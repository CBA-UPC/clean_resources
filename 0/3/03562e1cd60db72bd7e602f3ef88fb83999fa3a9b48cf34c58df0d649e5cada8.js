!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[8618],{6915:67645:(e,t,s)=>{s.d(t,{Z:()=>a});var n=(0,s(36343).q)("posts-empty");n.defaultProps={size:{width:100,height:100}};let a=n},53852:(e,t,s)=>{s.d(t,{Z:()=>a});var n=(0,s(36343).q)("posts-photo",{altIcon:"posts-photo-alt"});n.defaultProps={size:{width:24,height:24},useAltIcon:!1};let a=n},931:(e,t,s)=>{s.d(t,{Z:()=>R});var n=s(50209),a=s.n(n),r=s(5754),o=s.n(r),i=s(95004),l=s(55351),u=s(90127),p=s(43452),c=s(5700),h=s(59215),d=s(44561),m=s(83875),g=s(39277),v=s(54138),b=s.n(v),x=s(81022),f=s(66052),y=s(48430),P=s(53852),T=s(75815),S=s(60951),w=s(40565),C=s(63583),N=s(70834),j=s(2629),q={height:35,width:40},k={[c.hQ.Text]:(0,j.jsx)(S.Z,{colors:{primary:C.colorTextPostIcon},size:q}),[c.hQ.Photo]:(0,j.jsx)(P.Z,{colors:{primary:C.colorPhotoPost},size:q}),[c.hQ.Quote]:(0,j.jsx)(T.Z,{colors:{primary:C.colorQuotePost},size:q}),[c.hQ.Link]:(0,j.jsx)(y.Z,{colors:{primary:C.colorLinkPost},size:q}),[c.hQ.Chat]:(0,j.jsx)(f.Z,{colors:{primary:C.colorChatPost},size:q}),[c.hQ.Audio]:(0,j.jsx)(x.Z,{colors:{primary:C.colorAudioPost},size:q}),[c.hQ.Video]:(0,j.jsx)(w.Z,{colors:{primary:C.colorVideoPost},size:q})};let B=function(e){var t=e.postType,s=e.label,n=e.onClick,a=(0,N.I)("new-post-type-button");return(0,j.jsxs)("button",b()(b()({onClick:className:"FOqaP","aria-label":s},a),{},{children:[(0,j.jsx)("span",{className:"ADK9v",children:k[t]}),s]}))};class F extends i.Component{constructor(){super(...arguments),a()(this,"state",{}),a()(this,"onPostTypeButtonClick",(e,t)=>{(this.props.onPostCreation||this.createDefaultPost.bind(this))(t)})}tchBlog(){var e=this.props,t=e.selectedBlogName;return(0,e.appContext.getUserInfo)().then(e=>{var s=t?e.blogs.find(:(0,d.Z)(e.blogs);this.setState({blog:s})})}createDefaultPost(e){var t=this.props,s=t.navigate,n=t.saveButtonState,a=t.selectedBlogName;(0,t.appContext.logEvent)({eventName:(0,m.Y)(e),page:"toolbar"}),s((0,u.TL)({postType:e},{[p.xq.PostSaveButtonState]:n,[p.xq.BlogName]:a}))}render(){var e=this.props.appContext._t;return(0,j.jsx)(l.Z,{children:(0,j.jsx)("div",{className:o()("wttFd",this.props.className),children:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Text,onClick:this.onPostTypeButtonClick,label:e("Text")})}),(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Photo,onClick:this.onPostTypeButtonClick,label:e("Photo")})}),(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Quote,onClick:this.onPostTypeButtonClick,label:e("Quote")})}),(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Link,onClick:this.onPostTypeButtonClick,label:e("Link")})}),(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Chat,onClick:this.onPostTypeButtonClick,label:e("Chat")})}),(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Audio,onClick:this.onPostTypeButtonClick,label:e("Audio")})}),(0,j.jsx)("li",{children:(0,j.jsx)(B,{postType:c.hQ.Video,onClick:this.onPostTypeButtonClick,label:e("Video")})})]})})})}}var I=(0,h.X9)(F,{appContext:!0});let R=(0,g.Z)(I)},98724:(e,t,s)=>{s.d(t,{w:()=>i});var n=s(5754),a=s.n(n),r=s(6135),o=s(2629),i=e=>{var t=e.color,s=e.condensed;return(0,o.jsx)("div",{className:a()("gG278",{ops60:s}),children:(0,o.jsx)(r.Z,{centerOrientation:"horizontalAndVertical",color:t})})}},84665:(e,t,s)=>{s.d(t,{ZP:()=>B});var n=s(54138),a=s.n(n),r=s(50209),o=s.n(r),i=s(5754),l=s.n(i),u=s(95004),p=s(44009),c=s(93853),h=s(98384),d=s(10381),m=s(63665),g=s(59215),v=s(7070),b=s(63583),x=s.n(b),f=s(96467),y=s.n(f),P=s(91909);let T={manualPaginatorButtons:"m3lOJ",manualPaginatorButton:"PY8Tb",next:"B5txQ",prev:"jIdvc",manualPaginatorButtonInner:"Xp6EK"};var S=s(2629),w={width:13,height:13},C={href:"DON'T FETCH ME! OH GUY, PLEASE DON'T FETCH ME!"},N={prevNextLinks:[],linkForCurrentPage:C};class j extends P.Z{constructor(){super(...arguments),o()(this,"addObjectsToExisting",this.props.concatenate?e=>{var t=this.state.objects,s=this.props,n=s.direction,a=s.getObjectsFromResponse;return n===m.cU.Top?a(e).concat(t):t.concat(a(e))}:,o()(this,"shouldRenderMainLoader",()=>{var e=this.state,t=e.hasFetchedInitialPage,s=e.loadingNextPage;return!t||s}),o()(this,"preHandleContentFetch",e=>{var t=this.props.updateUrlFromCurrentPageLink,s=this.state.linkForCurrentPage;switch(e){case m.vO.Initial:return;case m.vO.Refresh:null==t||t();return;case m.vO.Pagination:null==t||t(null==s?void 0:s.href);return}}),o()(this,"getHotkeyCommands",()=>{var e=this.state,t=e.prevNextLinks,s=e.nextLink,n=[];return 0!==t.length&&n.push({key:c.SV.Left,command:this.onClickPrevious}),s&&n.push({key:c.SV.Right,command:this.onClickNext}),n}),o()(this,"renderPaginationButtons",e=>{var t=this.state,s=t.prevNextLinks,n=t.nextLink,r=this.props,o=r.prevButtonIsRefresh,i=r.manualPaginatorButtonCss,d=void 0===i?{}:i,m=d.containerClassName,g=d.prevButtonStyle,v=d.nextButtonStyle,b=r.appContext._c,f=r.nextButton,y=r.concatenate,P=b("The label for a button to return to the previous page of results","Previous"),C=b("The label for a button to refresh the contents of a set of posts to show the newest content in it","Latest"),N=b("The label for a button to go to the next page of results","Next"),j=!!s.length,q=j?this.onClickPrevious:this.refresh,k=j?P:C,B=j?{color:x().paletteWhite,background:x().paletteTransparentWhite65}:{color:x().paletteTransparentWhite87,background:"transparent",border:`2px solid ${x().paletteTransparentWhite87}`},F=!y&&j||o,I=!!n;return F||I?(0,S.jsxs)("div",{ref:this.setButtonContainerRef,className:l()(T.manualPaginatorButtons,m),children:[(0,S.jsx)(c.ZP,{hotkey:this.getHotkeyCommands()}),F&&(0,S.jsxs)(p.Z,{label:P,wrapperClassName:l()(T.manualPaginatorButton,T.prev),wrapperStyle:a()(a()({},B),g),className:T.manualPaginatorButtonInner,onClick:q,children:[(0,S.jsx)(h.sz,{size:w,colors:{primary:(null==g?void 0:g.color)||B.color||"currentcolor"}}),k]}),I&&(f?(0,u.cloneElement)(f,{label:N,onClick:this.onClickNext}):(0,S.jsxs)(p.Z,{label:N,wrapperClassName:l()(T.manualPaginatorButton,T.next),wrapperStyle:a()({color:x().paletteWhite,background:x().paletteAccent},this.getNextButtonStyle(e)),className:T.manualPaginatorButtonInner,onClick:this.onClickNext,children:[N,(0,S.jsx)(h.iL,{size:w,colors:{primary:v&&v.color||x().paletteWhite}})]}))]}):null}),o()(this,"onClickPrevious",()=>{var e=this.state,t=e.prevNextLinks,s=e.firstPageInfo,n=e.linkForCurrentPage,r=this.props.updateUrlFromCurrentPageLink,o=t.pop();if(!this.canFetchNextPage(o))return Promise.resolve();if(o===C&&s){var i=s.endpointApiRequest,l=s.objects;return this.nextPageApiRequest=i,null==r||r(i.getSearchParams(),!0),this.setState(a()(a()({},N),{},{objects:l,nextLink:n}),this.scrollToBottom),Promise.resolve()}return this.scrollToTop(),new Promise(e=>{this.setState({prevNextLinks:t,objects:[],linkForCurrentPage:o},e)}).then(.then(()=>this.scrollToBottom())}),o()(this,"onClickNext",()=>{var e=this.state,t=e.prevNextLinks,s=e.linkForCurrentPage,n=e.nextLink,r=e.objects,o=this.props,i=o.endpointApiRequest,l=o.concatenate;return this.canFetchNextPage(n)&&i?(l||this.scrollToTop(),new Promise(e=>{this.setState(a()({objects:l?this.state.objects:[],prevNextLinks:[...t,s],linkForCurrentPage:n},s===C&&{firstPageInfo:{objects:r,endpointApiRequest:i}}),e)}).then():Promise.resolve()}),o()(this,"setButtonContainerRef",,o()(this,"getNextButtonStyle",e=>{var t=this.props,s=t.manualPaginatorButtonCss,n=void 0===s?{}:s,r=n.doNotAccountForLowerRightContent,o=n.nextButtonStyle,i=t.messagingContext.offsetToAvoidLowerRightContentPx;if(r)return o;var l=this.state.buttonsContainerRef,u=l&&e?e-l.getBoundingClientRect().right:0;return a()(a()({},o),{},{transform:`translateX(-${u<i?i-u+y().lowerRightContentEdgeMarginPx:0}px)`})})}render(){var e=this.props.manualPaginatorButtonCss,t=(void 0===e?{}:e).doNotAccountForLowerRightContent;return(0,S.jsxs)(S.Fragment,{children:[super.render(),!this.shouldRenderMainLoader()&&(t?this.renderPaginationButtons():(0,S.jsx)(d.U$,{children:e=>{var t=e.bodyWidth;return this.renderPaginationButtons(t)}}))]})}getEmptyInitialState(){var e,t,s=null===(e=(t=this.props).getInitialPage)||void 0===e||null===(e=e.call(t))||void 0===e?void 0:e.prevLink;return a()(a()(a()({},super.getEmptyInitialState()),N),s&&{prevNextLinks:[s]})}didChangeEndpoint(e){var t,s=super.didChangeEndpoint(e)&&(!this.nextPageApiRequest||!(null!==(t=this.props.endpointApiRequest)&&void 0!==t&&t.isEqualTo(this.nextPageApiRequest,!0)));return s&&(this.nextPageApiRequest=null),s}getFetchNextPageRequest(e){return this.nextPageApiRequest=super.getFetchNextPageRequest(e),this.nextPageApiRequest}onPagination(e){super.onPagination(e);var t=e.requestType,s=e.response,n=this.props.getPrevLink,r=null==n?void 0:n(s);this.setState(e=>a()(a()({},[m.vO.Initial,m.vO.Refresh].includes(t)?N:e),!!r&&{prevNextLinks:[r]}))}}o()(j,"defaultProps",a()({},P.c));var q=(0,g.CN)(j,{appContext:!0,messagingContext:!0});(0,v.D)(q,`Inner${q.name}`);class k extends u.Component{render(){return(0,S.jsx)(q,a()(a()({},this.props),{},{ref:this.props.forwardedRef}))}}let B=k},64756:(e,t,s)=>{s.d(t,{$3:()=>h,cP:()=>c});var n=s(54138),a=s.n(n),r=s(17276),o=s.n(r),i=s(33590),l=s(1308),u=s(78667),p=s(83436);function c(e,t){return["blog-info",e,t]}var h=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,u.bp)().apiFetch;return(0,i.a)(a()({queryKey:c(e,t),queryFn:()=>o()().async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",function(e,t,s){var n,r;return o()().async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=function(e){switch(e){case"peepr":return a()(a()({},(0,l.n9)(["admin","advertiserName","allowSearchIndexing","analyticsUrl","ask","askPageTitle","avatar","blogViewUrl","canAddTipMessage","canBeFollowed","canMessage","canMessage","canSubmit","canSubscribe","descriptionNpf","followed","isAdult","isBrandSafe","isBlockedFromPrimary","isBloglessAdvertiser","isHiddenFromBlogNetwork","isMember","isPasswordProtected","isPaywallOn","name","paywallAccess","primary","shareFollowing","shareLikes","shouldShowGift","shouldShowTumblrmartGift","shouldShowTip","subscribed","subscriptionPlan","theme","title","topTags","url","uuid","created","liveNow","liveStreamingUserId","tumblrmartAccessories","showBadgeManagement","canShowBadges"])),{},{reblog_info:!0});case"blogSettings":return(0,l.n9)(["admin","canMessage","canOnboardToPaywall","canOnboardToTipping","descriptionNpf","tumblrmartAccessories","canShowTip","canSubmit","isAdult","isGroupChannel","isPremiumPartner","isPasswordProtected","isPrivateChannel","isTippingOn","isTumblrpayOnboarded","primary","replyConditions","showAuthorAvatar","supportsReplies","timezone","tippingPostsDefault","url","blogViewUrl","showBadgeManagement","canShowBadges"]);case"avatar":return a()({},(0,l.n9)(["avatar"]));default:return(0,p.m)(e)}}(s),i.next=3,o()().awrap(e(`/v2/blog/${t}/info`,{queryParams:n}));case 3:return r=i.sent,i.abrupt("return",r.response.blog);case 5:case"end":return i.stop()}},null,null,null,Promise)}(n,e,t));case 1:case"end":return s.stop()}},null,null,null,Promise),refetchOnWindowFocus:!1,retry:(e,t)=>!t.response&&e>3,staleTime:6e4},s))}},51211:(e,t,s)=>{s.d(t,{Z:()=>o});var n=s(67645),a=s(6915),r=s(2629);let o=e=>{var t=e.message,s=e.cta,o=e.ctaLink,i=e.linkTarget;return(0,r.jsxs)("div",{className:a.Z.emptyView,children:[(0,r.jsx)(n.Z,{}),t,(0,r.jsx)("div",{className:a.Z.emptyViewCTA,children:(0,r.jsx)("a",{href:o,target:void 0===i?"_blank":i,children:s})})]})}},30117:(e,t,s)=>{s.r(t),s.d(t,{default:()=>en,getInsertionOptions:()=>et});var n=s(33970),a=s.n(n),r=s(95004),o=s(78994),i=s(52980),l=s(931),u=s(54138),p=s.n(u),c=s(50209),h=s.n(c),d=s(76319),m=s(18488),g=s(4440),v=s(90621),b=s(78667),x=s(16273),f=s(63583),y=s(44009),P=s(93613),T=s(43523);let S={button:"oqphw",pausedContainer:"ABS_g"};var w=s(2629),C=e=>{var t=e.blogName,s=e.paused,n=e.refreshTimeline,o=(0,b.bp)(),i=o._c,l=o.apiFetch,u=o.logEvent,p=(0,r.useState)(s),c=a()(p,2),h=c[0],d=c[1],m=(0,P.V)().toggleToast,g=h?i("Button copy for resuming your queue","Resume Queue"):i("Button copy for pausing your queue","Pause Queue"),x=(0,w.jsx)(y.Z,{label:g,onClick:()=>{var e=!h;(0,v.T6)(l,{blogName:t,pause:e}).fetch().then(()=>{d(e),u({eventName:e?T.J.QueuePause:T.J.QueueResume}),n()}).catch(()=>{var e=i("Error message when trying to resume queue","Oops, could not resume queue right now. Please try again later."),t=i("Error message when trying to pause queue","Oops, could not pause queue right now. Please try again later.");m(h?e:t,"error")})},wrapperClassName:S.button,children:g});return h?(0,w.jsxs)("div",{className:S.pausedContainer,children:[(0,w.jsx)("p",{children:i("Explanation text shown when your queue is paused","Your queue is currently paused. No queued posts will be published at this time. Scheduled posts, however, will still be published. Once the queue is un-paused, queued posts will be re-calculated and resume publication.")}),x]}):x};let N=e=>{var t=e.blogName,s=e.refreshTimeline,n=(0,b.bp)(),a=n._c,r=n.apiFetch,o=(0,P.V)().toggleToast,i=a("Button copy for shuffling your queued posts","Shuffle Queue");return(0,w.jsx)(y.Z,{label:i,onClick:()=>(0,v.CG)(r,{blogName:t}).fetch().then(s).catch(()=>o(a("Error message when trying to shuffle the post queue fails","Opps, something went wrong shuffling the queue"),"error")),wrapperClassName:"N6XN6",children:i})};var j=s(54382),q=s(90127);let k={queueSettings:"R0TWs",queueInput:"W6BMk",queueTimezoneSettings:"EH8dR",queueDescription:"v_PWU",queueSettingsSave:"suxlE",option:"XtlZ8"},B=e=>{var t=e.blogName,s=e.timezone;return(0,w.jsxs)("div",{className:k.queueTimezoneSettings,children:[(0,w.jsx)(j.ZP,{comment:"[timezone] is a placeholder the blog's timezone (example: 'US/Eastern'). [a] is a placeholder for an anchor tag to ling to the blog settings page. The full string reads as 'Timezone: US/Eastern (change)'",params:{timezone:s},components:{a:(0,w.jsx)("a",{href:(0,q.BR)({blogName:t})})},children:"Timezone: [timezone] ([a]change[/a])"}),(0,w.jsx)("br",{}),(0,w.jsx)(j.ZP,{comment:"This text is shown after the blog's timezone setting on the queue page, and is followed by the blog's queued posts. [br/] is a placeholder for a line break.",components:{br:(0,w.jsx)("br",{})},children:"Note: This timezone only affects the queue schedule, as well as timestamps on custom themes.[br/] The publish times on posts below are displayed in your local timezone."})]})};class F extends r.Component{constructor(){super(...arguments),h()(this,"state",this.getInitialState())}getInitialState(){var e=this.props.appContext.getBootstrap(g.R),t=(null==e?void 0:e.blogName)===this.props.blogName;return p()(p()({},t?{postFrequency:e.postFrequency,startHour:e.startHour,endHour:e.endHour,paused:e.paused}:{postFrequency:2,startHour:0,endHour:23,paused:!1}),{},{hasFetchedInitialState:e&&e.postFrequency&&t,showSaveButton:!1,showSaveError:!1})}fetchInitialState(){var e=this.props,t=e.appContext.apiFetch,s=e.blogName;return(0,v.NV)(t,{blogName:s}).fetch().then(e=>{var t=e.response,s=t.postFrequency,n=t.startHour,a=t.endHour,r=t.paused;return this.setState({postFrequency:s,startHour:n,endHour:a,paused:r,hasFetchedInitialState:!0,showSaveButton:!1})})}omponentDidUpdate(e,t){if(e.blogName!==this.props.blogName)this.setState({hasFetchedInitialState:!1}),this.fetchInitialState();else{var s=this.state,n=s.showSaveButton,a=s.postFrequency,r=s.startHour,o=s.endHour;n||t.showSaveButton||!t.hasFetchedInitialState||a===t.postFrequency&&r===t.startHour&&o===t.endHour||this.setState({showSaveButton:!0})}}startStopTimes(){var e=this.props.appContext._t;return[e("12 am"),e("1 am"),e("2 am"),e("3 am"),e("4 am"),e("5 am"),e("6 am"),e("7 am"),e("8 am"),e("9 am"),e("10 am"),e("11 am"),e("12 pm"),e("1 pm"),e("2 pm"),e("3 pm"),e("4 pm"),e("5 pm"),e("6 pm"),e("7 pm"),e("8 pm"),e("9 pm"),e("10 pm"),e("11 pm"),e("12 am")]}postFrequencySelect(){var e=this.state.postFrequency,t=(0,x.Z)(1,51).map(t=>(0,w.jsx)("option",{value:t,"aria-selected":e===t,className:k.option,children:t},t));return(0,w.jsx)("select",{id:"queue_post_frequency",onChange:e=>this.setState({postFrequency:Number(e.target.value)}),value:e,className:k.queueInput,children:t})}startHourSelect(){var e=this.state.startHour,t=this.startStopTimes().map((t,s)=>24===s?null:(0,w.jsx)("option",{value:s,"aria-selected":e===s,className:k.option,children:t},s));return(0,w.jsx)("select",{id:"queue_start_hour",onChange:e=>this.setState({startHour:Number(e.target.value)}),value:e,className:k.queueInput,children:t})}endHourSelect(){var e=this.state.endHour,t=this.startStopTimes().map((t,s)=>0===s?null:(0,w.jsx)("option",{value:s,"aria-selected":e===s,className:k.option,children:t},s));return(0,w.jsx)("select",{id:"queue_end_hour",onChange:e=>this.setState({endHour:Number(e.target.value)}),value:e,className:k.queueInput,children:t})}onSave(){var e=this.props,t=e.appContext.apiFetch,s=e.blogName,n=e.refreshTimeline,a=this.state,r=a.postFrequency,o=a.startHour,i=a.endHour;return(0,v.L2)(t,{blogName:s,postFrequency:r,startHour:o,endHour:i}).fetch().then(()=>{this.setState({showSaveButton:!1,showSaveError:!1}),n()}).catch(}render(){var e=this.props,t=e.timezone,s=e.blogName,n=e.refreshTimeline,a=e.appContext,r=a._t,o=a._c,i=this.state,l=i.showSaveButton,u=i.showSaveError,p=i.hasFetchedInitialState,c=this.onSave.bind(this),h=r(u?"Hit a glitch. Try again.":"Save");return p?(0,w.jsxs)("div",{className:k.queueSettings,children:[(0,w.jsx)("div",{className:k.queueDescription,children:r("The queue lets you stagger posts over a period of hours or days. It's an easy way to keep your blog active and consistent.")}),l&&(0,w.jsx)(m.Z,{wrapperClassName:k.queueSettingsSave,onClick:c,label:h,textColor:f.paletteNavy,children:h}),(0,d.Z)({mixedString:o("{{postFrequencySelect /}}, {{startHourSelect /}}, and {{endHourSelect /}} are special <select> input tokens and can be read as '5 times a day between 1pm and 6pm'. Do not replace the tokens. This string should not include closing punctuation because it looks bad next to the input","Automatically publish a queued post {{postFrequencySelect /}} times a day between {{startHourSelect /}} and {{endHourSelect /}}"),components:{postFrequencySelect:this.postFrequencySelect(),startHourSelect:this.startHourSelect(),endHourSelect:this.endHourSelect()}}),t&&(0,w.jsx)(B,{blogName:s,timezone:t}),(0,w.jsx)(N,{blogName:s,refreshTimeline:n}),(0,w.jsx)(C,{blogName:s,paused:this.state.paused,refreshTimeline:n})]}):null}}let I=(0,b.HJ)(F);var R=s(33590),Q=s(77865),Z=s(46244),A=s(6135),E=s(42914),L="queue-plus-settings";let H=e=>{var t=e.blogName,s=e.timezone,n=e.refreshTimeline,o=(0,b.bp)(),i=o.getBootstrap,l=o.apiFetch,u=o._c,p=(0,r.useMemo)(()=>{var e=i(g.R);return(null==e?void 0:e.blogName)===t?e:void 0},[i,t]),c=(0,P.V)().toggleToast,h=(0,R.a)({queryKey:[L,t],queryFn:()=>(0,v.rK)(l,{blogName:t}).fetch().then(,initialData:p,staleTime:1/0,refetchOnWindowFocus:!1}),d=h.data,m=h.isError,x=h.refetch,f=(0,r.useState)(null==d?void 0:d.interval),y=a()(f,2),T=y[0],S=y[1];(0,r.useEffect)(()=>{null!=d&&d.interval&&S(null==d?void 0:d.interval)},[null==d?void 0:d.interval]);var q=(0,Q.NL)(),F=(0,Z.D)({mutationFn:e=>{var t=e.blogName,s=e.interval,n=e.perInterval,a=e.startTime,r=e.endTime;return(0,v.yR)(l,{blogName:t,interval:s,perInterval:n,startTime:a,endTime:r}).fetch()},onMutate:e=>{var t=e.blogName,s=e.interval,n=e.perInterval,a=e.startTime,r=e.endTime,o=e.paused;q.setQueryData([L,t],{interval:s,perInterval:n,startTime:a,endTime:r,paused:o})},onError:()=>{x(),c(u("Error message when saving the post queue settings fails","Oops, something went wrong trying to save your settings."),"error")}}).mutate,I=(0,r.useMemo)(()=>(0,E.Z)(e=>{d&&F({blogName:t,interval:Math.floor(e),perInterval:d.perInterval,startTime:d.startTime,endTime:d.endTime,paused:d.paused})},500),[F]);return(0,w.jsxs)("div",{className:k.queueSettings,children:[(0,w.jsx)("div",{className:k.queueDescription,children:(0,w.jsx)(j.ZP,{comment:"Intro text to the queue settings when the queue 2.0 lab experiment is turned on. [br/] is a placeholder for line breaks.",components:{br:(0,w.jsx)("br",{})},children:"Welcome to Queue 2.0, the better queueing solution to keep your blog regularly pumping out beautiful, engaging content. Let's take a look at some of the new hotness:[br/] - Explicit posting intervals - Specify the amount of time in between queued posts (1 to 1440 mins)[br/] - Bundled posts - Now you can schedule up to 5 posts at every interval[br/] - Around the clock posting - Your queue window can now span calendar days (i.e. 9pm til 2am)[br/] - More precise window settings - No longer are you constrained to having your queue window start and end on the hour"})}),m?u("Error text displayed when fetching the queue 2.0 settings fails","Something went wrong. Please try to reload the page."):d?(0,w.jsx)(j.ZP,{comment:"Post queue 2.0 settings. Example of full text in english: 'Automatically publish 3 queued posts(s) every 60 minute(s) between 09:00am and 05:00pm'",components:{perIntervalSelect:(0,w.jsx)("select",{value:d.perInterval,onChange:e=>F({blogName:t,interval:d.interval,perInterval:Math.floor(Number(e.target.value)),startTime:d.startTime,endTime:d.endTime,paused:d.paused}),className:k.queueInput,"aria-label":u("interval for post queue schedule","publishing interval in minutes"),children:[1,2,3,4,5].map(e=>(0,w.jsx)("option",{value:e,"aria-selected":d.perInterval===e,children:e},e))}),intervalSelect:(0,w.jsx)("input",{type:"number",min:"1",max:"1440",value:T,onChange:e=>{var t=Number(e.target.value);S(t),I(t)},className:k.queueInput,"aria-label":u("number of posts to publish per interval in post queue schedule","posts published per interval")}),startTimeSelect:(0,w.jsx)("input",{type:"time",value:d.startTime,onChange:e=>F({blogName:t,interval:d.interval,perInterval:d.perInterval,startTime:e.target.value,endTime:d.endTime,paused:d.paused}),className:k.queueInput,"aria-label":u("start time of post queue schedule","start time")}),endTimeSelect:(0,w.jsx)("input",{type:"time",value:d.endTime,onChange:e=>F({blogName:t,interval:d.interval,perInterval:d.perInterval,startTime:d.startTime,endTime:e.target.value,paused:d.paused}),className:k.queueInput,"aria-label":u("end time of post queue schedule","end time")}),br:(0,w.jsx)("br",{})},children:"Automatically publish [perIntervalSelect/] queued posts(s) every [intervalSelect/] minute(s)[br/] between [startTimeSelect/] and [endTimeSelect/]"}):(0,w.jsx)(A.Z,{}),s&&(0,w.jsx)(B,{blogName:t,timezone:s}),(0,w.jsx)(N,{blogName:t,refreshTimeline:n}),"boolean"==typeof(null==d?void 0:d.paused)&&(0,w.jsx)(C,{blogName:t,paused:d.paused,refreshTimeline:n})]})};var z=s(30337),O=s(91264),_=s(43597),M=s(64756),D=s(32468),V=s(51826),U=s(43452),J=s(5700),W=s(19937),$=s(6259),G=s(40563),Y=s(55015),K=s(51211),X=s(29860),ee=s(48352);function et(e,t){var s=t.length>0?t[0]:void 0;if(!s)return{insertionType:"noop"};if(0===e.length||!s.scheduledPublishTime)return{insertionType:"prepend"};var n=e.findLast(e=>e.scheduledPublishTime&&s.scheduledPublishTime&&e.scheduledPublishTime<s.scheduledPublishTime);return n?{insertionType:"append",insertionPointId:n.id}:{insertionType:"prepend"}}var es={getInsertionOptions:et,insertionType:"custom"};let en=()=>{var e,t,s,n=(0,b.bp)(),u=n._t,p=n._c,c=n.apiFetch,h=n.apiFetchWithSchema,d=n.getBootstrap,m=(0,G.J)("queuePlus"),x=(0,G.J)("queuePlusPrimary"),f=(0,G.J)("queuePlusSecondary"),y=(0,o.UO)().blogName,P=(0,$._)().addOnCloseModalRouteHandler,T=(0,r.useRef)(),S=(0,r.useRef)(),C=(0,r.useRef)(),N=(0,r.useState)(d(g.R)),j=a()(N,1)[0],q=(0,M.$3)(y,"blogSettings",{enabled:!Object.keys(j).length}).data;(0,r.useEffect)(()=>(C.current=P(e=>{var t,s,n=e.isModalSuccess,a=e.isNewPost,r=e.postStatus,o=e.legacyPostFormState,i=e.response;if(n&&a){if(o===J.hA.Queue||o===J.hA.Queued||"scheduled"===o){null===(s=T.current)||void 0===s||s.call(T);return}(r===U.$t.Queue||r===U.$t.Scheduled)&&null!==(t=i.response)&&void 0!==t&&t.id&&(0,W.J)(h,{postId:i.response.id,blogIdentifier:y,extraBlogQueryParams:["timezoneOffset"]}).fetch().then(e=>{var t;null===(t=S.current)||void 0===t||t.call(S,{elementsToInject:e.response.posts,insertionOptions:es})})}}),,[]);var k=null!==(e=j.isGroupChannel)&&void 0!==e?e:null==q?void 0:q.isGroupChannel,B=null!==(t=j.primary)&&void 0!==t?t:null==q?void 0:q.primary,F=null!==(s=j.timezone)&&void 0!==s?s:null==q?void 0:q.timezone;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(X.Z,{title:p("Title of the Queue page","Queue | Tumblr")}),(0,w.jsx)(ee.Z,{page:g.H.analyticsPageName}),(0,w.jsx)(i.Z,{activePage:D.vS.queue(y),children:(0,w.jsx)(_.Z,{sidebar:(0,w.jsx)(z.Z,{showRadar:!0,activeBlogPage:D.vS.queue(y)}),children:(0,w.jsxs)(w.Fragment,{children:[m&&!k&&(B?x:f)?(0,w.jsx)(H,{blogName:y,refreshTimeline:()=>{var e;null===(e=T.current)||void 0===e||e.call(T)},timezone:F}):(0,w.jsx)(I,{blogName:y,refreshTimeline:timezone:F}),(0,w.jsxs)("main",{className:"myxjb",children:[(0,w.jsx)(l.Z,{selectedBlogName:y,saveButtonState:V.C.Queue}),(0,w.jsx)(O.ZP,{endpointApiRequest:(0,v.Po)(c,{blogName:y}),id:`queue-${y}`,getObjectsFromResponse:getNextLink:getInitialPage:setRefreshCallback:e=>{T.current=e},setInjectTimelineItemsCallback:emptyView:(0,w.jsx)(K.Z,{message:u("Nothing in the queue"),cta:u("Learn how to queue a post."),ctaLink:"https://tumblr.zendesk.com/hc/en-us/articles/231481827-Queued-posts"}),isQueue:!0,overridePresentationStyle:Y.Z.queue})]})]})})})]})}},83875:(e,t,s)=>{s.d(t,{Y:);var n=s(43523),a=s(5700),r=e=>{switch(e){case a.hQ.Text:return n.J.PFComposePostText;case a.hQ.Audio:return n.J.PFComposePostAudio;case a.hQ.Photo:return n.J.PFComposePostPhoto;case a.hQ.Quote:return n.J.PFComposePostQuote;case a.hQ.Link:return n.J.PFComposePostLink;case a.hQ.Chat:return n.J.PFComposePostChat;case a.hQ.Video:return n.J.PFComposePostVideo}}}}]);