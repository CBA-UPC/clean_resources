"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4082,8125],{55287:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return ScaleOptions}});var r=n(52322),l=n(39708),i=n(99219),a=n(47330),o=n(83122),s=n(89370);let c=new Map(Object.entries({[a.V1.Responsive]:{name:"Responsive",description:"Use the responsive design of the static styles",Icon:i.ae8},[a.V1.FitWidth]:{name:"Fit Width",description:"Fill the screen width while maintaining the aspect ratio of the original screen",Icon:i.Fg3},[a.V1.ScaleToFill]:{name:"Scale to Fill",description:"Scale the capture to fill the screen",Icon:i.yDI},[a.V1.Fixed]:{name:"Fixed",description:"Fix to the original captured width and height. Visitors will scroll if there is overflow.",Icon:i.Uyi}}).map(e=>{let[t,n]=e;return[t,{...n,value:t}]}));function ScaleOptions(e){let{selected:t,onChange:n}=e,i=c.get(t);return(0,r.jsx)(l.v,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(l.v.Button,{className:"flex h-6 w-6 items-center justify-center rounded-md shadow ring-1 ring-slate-100/30 hover:bg-slate-200/10",children:i&&(0,r.jsx)(i.Icon,{className:"h-4 w-4 fill-slate-200/40"})})}),(0,r.jsx)(l.v.Items,{style:{zIndex:s.dw},className:"pointer-events-auto absolute right-0 top-7 z-10 w-36 translate-y-0 transform space-y-1 rounded-lg bg-white p-1 text-[0.8125rem] font-medium leading-6 text-slate-700 shadow-xl shadow-black/5 ring-1 ring-slate-700/10",children:Array.from(c.values()).map(})]})})}},34296:83193:15363:87017:},8016},9563},9626},8360},6854},5690},5972},5786},2030},5862},790},5229},35771:function(e,t,n){n.d(t,{Z:function(){return eT}});var r,l,i,a,o,s,c,d,u=n(52322),m=n(2784),p=n(22918),WebCaptureEditor_CaptureRenderContaine),h=n(96414),f=n(92333),v=n(84061),x=n(89370),b=n(16270),g=n(99809),y=n(11055);let AnchoredElemen};var components_AnchoredElemen},_=n(67569),w=n(87688),N=n(55283}var j=n(45103),C=n(99219),E=n(86414);let OpenMagicEditorActio};let BackMagicEditorActio};let CloseMagicEditorActio};var T=n(6676),A=n.n(T);let IgnoreOverlayActio};let RestoreOverlayActio}(r=o||(o={})).PERSONALIZATION="Personalization",r.UP_TO_DATE="UpToDate",r.DYNAMIC_EMBED="DynamicEmbed",r.TETHER="Tether",r.OVERLAY="Overlay",r.FIND_AND_REPLACE="FindAndReplace";var k=n(49208);let S=[{name:"Overlay",message:"Click to perform actions like editing elements behind overlay",Icon:C.KqJ,detectSelectedElement:detectElementOverlay,magicEditorRoute:o.OVERLAY}],scrollToCollapseContaine},scrollToMagicEditor=()=>scrollToCollapseContainer("magic-editor"}var I=n(52294),P=n(87017),R=n(15363),F=n(77512),D=n(96265);let InsertDynamicEmbedActio};var L=n(61807),z=n(88004),O=n(59720),M=n(68930 B=n(7901),U=n(32517),Z=n(40180),V=n(73235),H=n(66547),W=n(66980),q=n(26806);function _templateObject(){let e=(0,V._)(["\n    mutation FindAndReplaceImageAcrossCaptureCollection($data: FindAndReplaceImageCaptureCollectionInput!, $token: String!) {\n  findAndReplaceImageAcrossCaptureCollection(data: $data, token: $token) {\n    ...GlobalEditResult\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let K=(0,H.ZP)(_templateObject(),W.w);function findAndReplaceTextAcrossCaptureCollection_templateObject(){let e=(0,V._)(["\n    mutation FindAndReplaceTextAcrossCaptureCollection($data: FindAndReplaceTextCaptureCollectionInput!, $token: String!) {\n  findAndReplaceTextAcrossCaptureCollection(data: $data, token: $token) {\n    ...GlobalEditResult\n  }\n}\n    ",""]);return findAndReplaceTextAcrossCaptureCollection_templateObject=function(){return e},e}let Y=(0,H.ZP)(findAndReplaceTextAcrossCaptureCollection_templateObject(),W.w);var X=n(83122),G=n(64627),J=n(59103),$=n(22146);(l=s||(s={})).Text="text",l.Image="image";var Q=n(57863),ee=n(95623),et=n(3016),en=n(58627);(i=c||(c={})).TOP="TOP",i.TOP_END="TOP_END",i.TOP_START="TOP_START",i.RIGHT="RIGHT",i.RIGHT_START="RIGHT_START",i.RIGHT_END="RIGHT_END",i.LEFT="LEFT",i.LEFT_START="LEFT_START",i.LEFT_END="LEFT_END",i.BOTTOM="BOTTOM",i.BOTTOM_START="BOTTOM_START",i.BOTTOM_END="BOTTOM_END";let er=[{name:"Top center of element",value:"TOP"},{name:"Top right of element",value:"TOP_END"},{name:"Top left of element",value:"TOP_START"},{name:"Right center of element",value:"RIGHT"},{name:"Right top of element",value:"RIGHT_START"},{name:"Right bottom of element",value:"RIGHT_END"},{name:"Left center of element",value:"LEFT"},{name:"Left top of element",value:"LEFT_START"},{name:"Left bottom of element",value:"LEFT_END"},{name:"Bottom center of element",value:"BOTTOM"},{name:"Bottom left of element",value:"BOTTOM_START"},{name:"Bottom right of element",value:"BOTTOM_END"}}var el=n(46085),ei=n(50280),ea=n(89561),eo=n(97015),es=n(12335),ec=n(45581),ed=n(28879),eu=n.n(ed),em=n(89945),ep=n.n(em),eh=n(56180);let UpdateUpToDateElementActio};let RemoveUpToDateFromAttributeActio}function generateOffsetOptions(e){let{direction:t}=e,n="PAST"===t?"minus":"plus";return[{name:"Today's date",value:ei.u1.TodaysDate},{name:"Today's date ".concat(n," 1 hour"),value:ei.u1.Hour},{name:"Today's date ".concat(n," 1 day"),value:ei.u1.Day},{name:"Today's date ".concat(n," 1 week"),value:ei.u1.Week},{name:"Today's date ".concat(n," 1 month"),value:ei.u1.Month},{name:"Today's date ".concat(n," 1 year"),value:ei.u1.Year},{name:"Preserve original offset of date",value:ei.u1.CaptureDate}]}eu().extend(ep()),(a=d||(d={})).Past="PAST",a.Future="FUTURE";let randomBetweenZer);function generateUpToDateOffset(e){let t=function(e){let{option:t,text:n,createdAt:r,exactOffset:l}=e;if(l)return function(e){let{option:t,text:n,createdAt:r}=e;switch(t){case ei.u1.Hour:return 36e5;case ei.u1.Day:return 864e5;case ei.u1.Week:return 6048e5;case ei.u1.Month:return 2592e6;case ei.u1.Year:return 31536e6;case ei.u1.CaptureDate:return calculateOffsetOrFallback(parseDate(n),r);default:return 0}}(e);switch(t){case ei.u1.Hour:return randomBetweenZero(36e5);case ei.u1.Day:return randomBetweenZero(864e5);case ei.u1.Week:return randomBetweenZero(6048e5);case ei.u1.Month:return randomBetweenZero(2592e6);case ei.u1.Year:return randomBetweenZero(31536e6);case ei.u1.TodaysDate:return 0;case ei.u1.CaptureDate:return calculateOffsetOrFallback(parseDate(n),r);default:return 0}}(e);return"PAST"===e.direction?-t:var ef=n(37100),ev=n(53954);let ex=[{name:"Personalization",description:"User attributes dynamically populated for the visitor",value:o.PERSONALIZATION,selector:"[".concat(x.lz,"]"),Icon:C.T$Z,SelectedElementComponent:Q.X$,PreviewComponent:Q.q1},{name:"Dynamic embed",description:"Insert an iframe that will fetch content from a remote source",selector:"[".concat(x.wK,"]"),value:o.DYNAMIC_EMBED,Icon:C.mr4,SelectedElementComponen},PreviewComponen}},{name:"Up-to-date",value:o.UP_TO_DATE,description:"Keep dates fresh by trailing behind the current day",selector:x.Jb,Icon:C.Que,SelectedElementComponent:function(e){let{onUpdate:t,state:n,dispatch:r}=e,{selectedElement:l,capture:i,htmlEditorText:a}=n,o=null==a?void 0:a.trim(),s=l.hasAttribute(x._K),{format:c,offset:d,offsetType:p,original:h}=(0,ea.R)(l),f=parseDate(null!=o?o:""),[v,b]=(0,m.useState)(ei.u1.Hour),[g,y]=(0,m.useState)("PAST"),_=null!=d?d:generateUpToDateOffset({createdAt:null==i?void 0:i.createdAt,option:v,text:null!=o?o:"",direction:g,exactOffset:!0}),w=null!=p?p:ei.u1.CaptureDate,N=f&&!s&&o?(0,ec.E)(o):null,j=(0,m.useCallback},[r,t]),E=(0,m.useCallback},[v,f,null==i?void 0:i.createdAt,_,N,r,l,t]),T=(0,m.useCallback},[r,_,t,j,l,w]),A=(0,m.useCallback)(e=>{let{value:n}=e,a=generateUpToDateOffset({option:n,text:null!=o?o:"",createdAt:null==i?void 0:i.createdAt,direction:g,exactOffset:!0});r(new UpdateUpToDateElementAction(l,c,a,n)),t()},[o,null==i?void 0:i.createdAt,g,r,l,c,t]),k=c||N,S="FUTURE"===g;return s&&k?(0,u.jsxs)("div",{className:"grid gap-3",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"label-small normal-case",children:"Up-to-date transformation"}),(0,u.jsxs)("div",{className:"max-w-[250px] truncate rounded-md border border-zinc-200 bg-zinc-50 px-3 py-2 text-sm font-medium",children:[h," â†’ ",(0,ea.H)(k,_)]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"label-small",children:"Offset"}),(0,u.jsx)(et.Z,{mb:0,className:"text-sm",items:generateOffsetOptions({direction:g}),selected:w,onChange:A}),(0,u.jsx)(F.XZ,{labelText:"Show dates in the future",className:"mt-2 text-xs",checked:S,onCheckedChange:e=>{let n=e?"FUTURE":"PAST";y(e?"FUTURE":"PAST");let a=generateUpToDateOffset({option:w,text:null!=o?o:"",createdAt:null==i?void 0:i.createdAt,direction:n,exactOffset:!0});r(new UpdateUpToDateElementAction(l,c,a,w)),t()}})]}),(0,u.jsx)(UpdateDateFormat,{format:k,onUpdate:T,original:null!=h?h:""}),(0,u.jsx)("button",{onClick:j,className:"inline-flex text-sm text-zinc-400 hover:text-zinc-500",children:"Remove up-to-date"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"text-sm italic text-zinc-500",children:N?"Date detected.":"No date detected."}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"label-small mt-3",children:"Offset"}),(0,u.jsx)(et.Z,{mb:0,className:"text-sm",items:generateOffsetOptions({direction:g}),selected:v,onChat)}})]}),(0,u.jsx)("div",{children:(0,u.jsx)(F.XZ,{labelText:"Show dates in the future",className:"mt-2 text-xs",checked:S,onCheckedChange:e=>{y(e?"FUTURE":"PAST")}})}),N&&(0,u.jsxs)("button",{onClick:E,className:"mt-3 flex w-full items-center justify-center rounded-md border border-gray-300 px-2 py-2 text-[14px] text-sm text-gray-700 shadow-sm",children:[(0,u.jsx)(C.Que,{className:"mr-2 h-4 w-4"}),"Make up-to-date"]})]})},PreviewCompon})},MiddleComponent:function(e){let{dispatch:t,state:n,onUpdate:r}=e,[l,i]=(0,m.useState)(null),{capture:a}=n,[o,s]=(0,m.useState)("PAST"),c=generateOffsetOptions({direction:o}),[d,p]=(0,m.useState)(c[0]),h="FUTURE"===o;return(0,u.jsxs)(BoxSection,{title:"Auto-detect",children:[(0,u.jsxs)("div",{className:"text-sm text-zinc-500",children:["Use this feature to automatically convert"," ",(0,u.jsx)("b",{className:"font-semibold text-zinc-600",children:"all detected dates"})," at once."]}),null!==l?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"mt-2 text-sm text-zinc-500",children:0==l?"No dates detected.":"".concat(l," date").concat(l>1?"s":""," detected and converted.")}),(0,u.jsx)("button",{className:"text-blue-primary mt-2 text-sm",onClll),children:"Reset"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("label",{className:"label-small mt-3",children:"Offset"}),(0,u.jsx)(et.Z,{mb:0,className:"text-sm",items:c,selected:d.value,onChange:p}),(0,u.jsx)(F.XZ,{labelText:"Show dates in the future",className:"mt-2 text-xs",checked:h,onCheckedChange:e=>{s(e?"FUTURE":"PAST")}}),(0,u.jsxs)("button",{onClick:function(){let e=(0,eo.IR)(),n=null==e?void 0:e.contentDocument;if(!(null==n?void 0:n.body))return;let l=function(e,t){let{document:n,offsetOption:r,captureCreatedAt:l,exactOffset:i,direction:a}=t;return(0,J.EX)({node:n.__nv_sn,onMatch:t=>{var n;let{node:o,parent:s}=t;if(!s)return!1;let c=null!==(n=o.textContent)&&void 0!==n?n:"",d=(0,ec.E)(c);if(!d)return!1;let u=generateUpToDateOffset({option:r.value,text:c,createdAt:l,direction:a,exactOffset:i}),m=(0,es.P)(s.id);return!!m&&(e(new UpdateUpToDateElementAction(m,d,u,r.value)),!0)}})}(t,{document:n,offsetOption:d,captureCreatedAt:null==a?void 0:a.createdAt,exactOffset:!1,direction:o});i(l),r()},className:"mt-3 flex w-full items-center justify-center rounded-md border border-gray-300 px-2 py-2 text-[14px] text-sm text-gray-700 shadow-sm",children:[(0,u.jsx)(C.Que,{className:"mr-2 h-4 w-4"}),"Convert all dates"]})]})]})}},{name:"Tether",description:"Lock the position of one element relative to another",value:o.TETHER,selector:"[".concat(x.Fi,"]"),Icon:C.D0T,SelectedElementCompon})},PreviewCompon})}},{name:"Overlay",description:"Drill past an overlay to edit the content behind",value:o.OVERLAY,selector:"[".concat(x.xF,"]"),Icon:C.KqJ,SelectedElementCompon})},PreviewCompon})}},{name:"Find & Replace",description:"Replace all instances of text across a capture",value:o.FIND_AND_REPLACE,selector:"[".concat(x.xc,"]"),Icon:C.lvM,MiddleCompon})})}var eb=n(20306),eg=n(76003),ey=n(83615),e_=n(20851);let ew=globalThis.localStorage&&!!localStorage.getItem("debug:navattic:captureEditor:scroll"),eN=globalThis.localStorage&&!!localStorage.getItem("debug:navattic:captureEditor:scroll:manual"),ensureSnAttribu})},getScrollElem,n},acquireBestScrollCandid}let EmptyMess]}),SidebarVisi})}var ej=n(46877),eC=n(38145);let eE=m.forward})});eE.displayName="EditorContent";var eT=eE},76})},45)}},79)}},60)}},98}}},92}}},76n}},46877:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(52322),l=n(2784),Builder_BuilderEr})},i=n(6781),a=n(83603),o=n(87353),s=n(2530),c=n(80638);let CaptureCont})},d=l.forwardRef((e,t)=>{let{fetchingOrBuilding:n,errorMessage:i,scaleStrategy:s,updateTransformScalar:c}=e,d=l.useRef(null);return l.useImperativeHandlent),(0,o.Z)({playerEl:d.current,strategy:s,embeddedInApp:!0,updateTransformScalar:c,pause:n}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{ref:d,style:{visibility:i?"hidden":void 0,position:"absolute",height:"100%",width:"100%",margin:0}}),(0,r.jsx)(CaptureContent,{fetchingOrBuilding:n,errorMessage:i})]})});d.displayName="WebCapturePreview";var u=d},38)}},4)},96}}},37)}},61)}},40)}},81)}},61)}},95l}},66W)},65416:function(e,t,n){n.d(t,{N:function(){return usePublishWebBasedCaptureVersionMutation}});var r=n(73235),l=n(66547),i=n(28616),a=n(26806);function _templateObject(){let e=(0,r._)(["\n    mutation PublishWebBasedCaptureVersion($input: WebBasedCaptureVersionPublishInput!) {\n  publishWebBasedCaptureVersion(input: $input) {\n    ...WebBasedCaptureVersion\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let o=(0,l.ZP)(_templateObject(),i.W);function usePublishWebBasedCaptureVersionMutation(){return a.Db(o)}},74)}},50)}},53)}},19894:function(e,t,n){n.d(t,{Z:function(){return use_build_web_capture}});var r=n(2784),l=n(70274),i=n(87688),a=n(89370),o=n(83408),s=n(71664);let c=(0,o.hu)("debug:navattic:personalization"),parsePersonalizedElemn}},setPersonalized))},setPersonalizedBackgroundImn)},setPersonalizedT]}},setPersonalizedInputVat)},applyPersonalizationFallbt)},d="[".concat(a.lz,"][").concat(a.rX,"]"),applyPersonalizat}}},applyPersonalizationToCapt})};var u=n(30555),m=n(64627),use_fetch_capt])},use_build_web_capt])}},71}}},64627:function(e,t,n){n.d(t,{Az:function(){return getWebCaptureFromCache},J9:function(){return fetchWebCaptureCacheFirst},KE:function(){return requestThemeToken},Y6:function(){return initiateWebCapture},qd:function(){return requestProductDemoCaptureToken}});var r=n(24595),l=n(17840),i=n(16377),a=n(39391);let requestProductDemoCaptureToken=async e=>{let{collectionId:t,flowId:n,maxAge:l=300}=e;return await r.Z.requestSessionToken({collectionId:t,flowId:n,action:"EDIT",mode:"product-demo","max-age":l})}let initiateWebCapture=async e=>{let{collectionId:t,url:n,clickToCaptureEnabled:r}=e,i=await l.qE();if(!i)return{ok:!1,error:"Chrome extension needs to be installed"};let a=await requestProductDemoCaptureToken({collectionId:t,maxAge:3600});if(!a)return{ok:!1,error:"Failed to request session token for initiating capture"};let o=await l.Xi({url:n,token:a,collectionId:t,config:{clickToCapture:r}});return o?{ok:!1,error:o}:{ok:!0,error:void 0}},o=i.Z.CAPTURE_PLAYER_URL,fetchWebCapts}},s=new Map,fetchWebCaptureCacheFi,r},getWebCaptureFromCa(e)},59)}},50280:function(e,t,n){var r,l,i,a,o,s;n.d(t,{b:function(){return i},cU:function(){return l},u1:function(){return r}}),(a=r||(r={})).TodaysDate="TODAYS_DATE",a.Hour="HOUR",a.Day="DAY",a.Week="WEEK",a.Month="MONTH",a.Year="YEAR",a.CaptureDate="CAPTURE_DATE",(o=l||(l={}))[o.Text=0]="Text",o[o.Input=1]="Input",(s=i||(i={}))[s.Img=0]="Img",s[s.BackgroundImage=1]="BackgroundImage"},67)}},73}}},81l}},55l}},2}}},5000},59/i},63})},33d}},12t}},45)}}}]);
//# sourceMappingURL=4082-0537f52ff2853f5c.js.map