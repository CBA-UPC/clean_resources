!window,(function(){return [function(t,e,n){t.exports=n(241)},function(t,e,n){"use strict";n.d(e,"n",(function(){return _})),n.d(e,"a",(function(){return A})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return N})),n.d(e,"b",(function(){return R})),n.d(e,"k",(function(){return k})),n.d(e,"i",(function(){return I})),n.d(e,"s",(function(){return j})),n.d(e,"j",(function(){return L})),n.d(e,"l",(function(){return D})),n.d(e,"r",(function(){return M})),n.d(e,"q",(function(){return P})),n.d(e,"p",(function(){return F})),n.d(e,"o",(function(){return G})),n.d(e,"d",(function(){return U})),n.d(e,"g",(function(){return K})),n.d(e,"f",(function(){return H})),n.d(e,"m",(function(){return W})),n.d(e,"h",(function(){return B}));n(81),n(184),n(24),n(67),n(77),n(194),n(154),n(112);var r=n(13),o=n.n(r),i=n(18),a=n.n(i),c=n(12),u=n.n(c),s=n(0),l=n.n(s),f=n(116),p=n.n(f),v=n(68),h=n.n(v),g=n(165),d=n.n(g),y=n(7),m=n.n(y),S=n(27),b=n.n(S),T=n(3),E=n.n(T),O=n(79),x=n.n(O);function _(t,e){return!(!k(t)||!k(e))&&x()(t).call(t,0,e.length)===e}function A(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!k(t)||!k(e))&&(n&&(t=t.toLowerCase(),e=e.toLowerCase()),x()(t).call(t,t.length-e.length)===e)}function w(t,e,n){var r=n;try{var o=e.split("."),i=t;E()(o).call(o,(),void 0!==i&&(r=i)}catch(t){}return r}function N(t,e){if(b()(t)&&"function"==typeof e)for(var n=0;n<t.length;n++)if(!0===e(t[n],n,t))return n;return-1}function R(t,e){var n;if(L(t))for(var r=m()(t),o=0;o<r.length&&!n;o++){var i=r[o];e(t[i],i,t)&&(n=t[i])}else if(b()(t))for(var a=0;a<t.length&&!n;a++){e(t[a],a,t)&&(n=t[a])}return n}unction I(t){return"number"==typeof t?d()(t):t instanceof Number&&d()(t.valueOf())}var C=-1;unction L(t){return t&&"object"===h()(t)&&t.constructor===Object}function D(t,e){var n,r=t;L(e)&&E()(n=m()(e)).call(n,();for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(i&&i.length){var c,u=p()(i).call(i,0,1)[0];r=D.apply(void 0,l()(c=[r,u]).call(c,i))}return r}function M(t){var e={};return u()(t).call(t,()}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,n={};return u()(t).call(t,()}function F(t){if(null==t)return"";if("string"==typeof t)return t;if(b()(t))return o()(t).call(t,()+"";var e=t+"";return"0"===e&&1/t===Number.NEGATIVE_INFINITY?"-0":e}unction U(t,e){var n=m()(t);return E()(n).call(n,(),t}function K(t,e){var n={};if(b()(t)&&k(e))for(var r=0;r<t.length;r++){var o=t[r][e];k(o)&&(n[o]||(n[o]=[]),n[o].push(t[r]))}return n}function H(t){return t.name?t.name:(t.toString().match(/function (.+?)\(/)||["",""])[1]}function W(t){for(var e=m()(t),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];return n},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n(45),o=n(117),i=n(1),a=function(t){return!!Object(i.b)(r.a,()},c={showLevel:!0,displayAllErrors:!1},u=!1;void 0!==t&&void 0!==t.version&&t.version&&(u=!0);var s=String(u?t.env.SPLITIO_DEBUG:Object(o.a)()?localStorage.getItem("splitio_debug"):""),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new r.b(t,Object(i.l)(e,c))},f=l("splitio-utils:logger"),p={enable:function(){Object(r.c)(r.a.DEBUG)},setLogLevel:function(t){a(t)?Object(r.c)(t):f.error("Invalid Log Level - No changes to the logs will be applied.")},disable:LogLevel:r.a};/^(enabled?|on)/i.test(s)?p.enable(r.a.DEBUG):a(s)?p.setLogLevel(s):p.disable(),e.b=l}).call(this,n(335))},function(t,e,n){t.exports=n(326)},function(t,e,n){t.exports=n(369)},function(t,e,n){t.exports=n(322)},function(t,e,n){t.exports=n(392)},function(t,e,n){t.exports=n(247)},function(t,e,n){t.exports=n(349)},function(t,e,n){t.exports=n(283)},function(t,e,n){t.exports=n(258)},function(t,e,n){t.exports=n(406)},function(t,e){t.exports={}},function(t,e,n){var r=n(33);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){t.exports=n(280)},function(t,e,n){t.exports=n(412)},function(t,e,n){t.exports=n(416)},function(t,e,n){t.exports=n(419)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!0},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(167))},function(t,e,n){var r=n(25),o=n(124),i=n(43),a=n(105),c=n(125),u=n(171),s=o("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;t.exports=function(t){return i(s,t)||(c&&i(l,t)?s[t]=l[t]:s[t]=f("Symbol."+t)),s[t]}},function(t,e,n){t.exports=n(324)},function(t,e,n){t.exports=n(251)},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(22);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=n(408)},function(t,e,n){t.exports=n(409)},function(t,e,n){t.exports=n(395)},function(t,e,n){var r=n(30);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=n(245)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(15),o=n(25),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return S}));var r=n(50),o=n.n(r),i=n(7),a=n.n(i),c=n(13),u=n.n(c),s=n(10),l=n.n(s),f=n(5),p=n.n(f),v=n(8),h=n.n(v),g={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"},d=g.DEBUG,y=m={showLevel:!0,displayAllErrors:!1},S=function(){function t(e,n){p()(this,t),this.category=e,this.options=l()({},m,n)}return h()(t,[{key:"debug",value:function(t){this._shouldLog(g.DEBUG)&&this._log(g.DEBUG,t)}},{key:"info",value:function(t){this._shouldLog(g.INFO)&&this._log(g.INFO,t)}},{key:"warn",value:,{key:"error",value:,{key:"_log",value:,{key:"_generateLogMessage",value:,{key:"_shouldLog",value:function(t){var e,n=d,r=u()(e=a()(g)).call(e,(function(t){return g[t]}));return o()(r).call(r,t)>=o()(r).call(r,n)}}]),t}()},function(t,e,n){var r=n(32),o=n(168),i=n(16),a=n(103),c=Object.defineProperty;e.f=r?c:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r=n(98),o=n(376),i=n(161),a=n(108),c=n(222),u=a.set,s=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=s(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){t.exports=n(336)},function(t,e,n){var r=n(32),o=n(46),i=n(90);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(91);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(102),o=n(91);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(32),o=n(22),i=n(43),a=Object.defineProperty,c={},u=function(t){throw t};t.exports=function(t,e){if(i(c,t))return c[t];e||(e={});var n=[][t],s=!!i(e,"ACCESSORS")&&e.ACCESSORS,l=i(e,0)?e[0]:u,f=i(e,1)?e[1]:void 0;return c[t]=!!n&&!o((function(){if(s&&!r)return!0;var t={length:-1};s?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,f)}))}},function(t,e,n){t.exports=n(346)},function(t,e,n){var r=n(104),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){t.exports=n(442)},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,n){var r=n(136),o=n(70),i=n(26)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){"use strict";var r=n(257).charAt,o=n(82),i=n(134),a=o.set,c=o.getterFor("String Iterator");i(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){t.exports=n(331)},function(t,e,n){t.exports=n(429)},function(t,e,n){var r,o,i,a=n(252),c=n(25),u=n(33),s=n(51),l=n(43),f=n(107),p=n(96),v=c.WeakMap;if(a){var h=new v,g=h.get,d=h.has,y=h.set;r=function(t,e){return y.call(h,t,e),e},o=function(t){return g.call(h,t)||{}},i=function(t){return d.call(h,t)}}else{var m=f("state");p[m]=!0,r=function(t,e){return s(t,m,e),e},o=function(t){return l(t,m)?t[m]:{}},i=function(t){return l(t,m)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){t.exports=n(387)},function(t,e,n){t.exports=n(438)},function(t,e,n){var r=n(32),o=n(121),i=n(90),a=n(58),c=n(103),u=n(43),s=n(168),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=c(e,!0),s)try{return l(t,e)}catch(t){}if(u(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r,o=n(16),i=n(175),a=n(131),c=n(96),u=n(177),s=n(122),l=n(107),f=l("IE_PROTO"),p=function(){},v=function(t){return"<script>"+t+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;h=r?function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=s("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};c[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=o(t),n=new p,p.prototype=null,n[f]=t):n=h(),void 0===e?n:i(n,e)}},function(t,e){t.exports={}},function(t,e,n){var r=n(16),o=n(30),i=n(26)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r=n(22),o=n(70),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(33);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(176),o=n(131);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(124),o=n(105),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){},function(t,e,n){t.exports=n(287)},function(t,e,n){"use strict";.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(341)},function(t,e,n){t.exports=n(448)},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(25),o=n(33),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(23),o=n(170);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(22);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(58),o=n(64),i=n(130),a=function(t){return function(e,n,a){var c,u=r(e),s=o(u.length),l=i(a,s);if(t&&n!=n){for(;s>l;)if((c=u[l++])!=c)return!0}else for(;s>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(104),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(4),o=n(253),i=n(135),a=n(182),c=n(72),u=n(51),s=n(97),l=n(26),f=n(23),p=n(71),v=n(180),h=v.IteratorPrototype,g=v.BUGGY_SAFARI_ITERATORS,d=l("iterator"),y=function(){return this};t.exports=function(t,e,n,l,v,m,S){o(n,e,l);var b,T,E,O=function(t){if(t===v&&N)return N;if(!g&&t in A)return A[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},x=e+" Iterator",_=!1,A=t.prototype,w=A[d]||A["@@iterator"]||v&&A[v],N=!g&&w||O(v),R="Array"==e&&A.entries||w;if(R&&(b=i(R.call(new t)),h!==Object.prototype&&b.next&&(f||i(b)===h||(a?a(b,h):"function"!=typeof b[d]&&u(b,d,y)),c(b,x,!0,!0),f&&(p[x]=y))),"values"==v&&w&&"values"!==w.name&&(_=!0,N=function(){return w.call(this)}),f&&!S||A[d]===N||u(A,d,N),p[e]=N,v)if(T={values:O("values"),keys:m?N:O("keys"),entries:O("entries")},S)for(E in T)!g&&!_&&E in A||s(A,E,T[E]);else r({target:e,proto:!0,forced:g||_},T);return T}},function(t,e,n){var r=n(43),o=n(52),i=n(107),a=n(181),c=i("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,c)?t[c]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r={};r[n(26)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(37),o=/#|\.prototype\./,i=function(t,e){var n=c[a(t)];return n==s||n!=u&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=i.data={},u=i.NATIVE="N",s=i.POLYFILL="P";t.exports=i},function(t,e,n){var r=n(40),o=n(66);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e){t.exports={}},function(t,e,n){var r=n(191),o=n(146).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(26);e.f=r},function(t,e){t.exports="\t\n\v\f\r Â áš€â€€â€â€‚â€ƒâ€„â€…â€†âxports=o=r||function(t,e){return te:!0},{toJSON:function(){return URrn this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(32),o=n(22),i=n(122);t.exports=!r&&!o((function(){return 7!LowerCase()},c=i.data={},u=i.NATIVE="N",s=i.POLYFILL="P";t.exports=i},function(t,e,n){var r=n(25),o=n(244),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,n){var 46);var r=n(15).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(32),o=n(46),i=n(16),a=n(106);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),c=r.length,u=0;c>u;)o.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(43),o=n(58),i=n(129).indexOf,a=n(96);t.exports=function(t,e){var n,c=o(t),u=0,s=[];for(n in c)!r(a,n)&&r(c,n)&&s.push(n);for(;e.length>u;)r(c,n=e[u++])&&(~i(s,n)||s.push(n));return s}},f("document","documentElement")},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(170),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){"use strict";var r,o,i,a=n(135),c=n(51),u=n(43),s=n(26),l=n(23),f=s("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):p=!0),null==r&&(r={}),l||u(r,f)||c(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){var r=n(22);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(16),o=n(255);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return func===h&&(a.lastIndex=c(s,i(a.lastIndex),l)),v++}return 0===v?null:p}]}))},function(t,e,n){var r=n(109),o=n(76),i=function(t){return function(e,n){var i,a,c=String(o(e)),u=r(n),s=c.length;return u<0||u>=s?t?"":void 0:(i=c.charCodeAt(u))<55296||i>56319||u+1===s||(a=c.charCodeAt(u+1))<56320||a>57343?t?c.charAt(u):i:t?c.slice(u,u+n"!=typeof t)throw TypeError(Stringototype[U]||w(B.prototype,U,B.prototype.valueOf),M(B,"Symbol"),I[G]=!0},function(t,e,n){n(323);var r=n(15);t.exports=r.Object.keys},function(t,e,n){n(325);var r=n(15);t.exports=r.Array.isArray},function(t,e,n){var r=n(337),o=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===o||t ,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(o.sham=!0)},function(t,e,n){var r=n(91),o="["+n(158)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),c=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(i,"")),o.f;a&&e&&!e[c]&&n(e,c,{configurab){return{next:function(){return{don(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(393),o=Function.prototype;t.exports=functioh,r):e.apply(t,r)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){n(396);var r=n(15);t.exports=r.Reflect.construct},function(t,e,n){t.exports=n(397)},function(t,e,n){t.exports=n(398)},functof e&&(n=e(n),o.set(t,n))):"function"==typeof i&&(n=i(),o.set(t,n)),n}},function(t,e,n){t.exports=n(352)},function(t,e,n){t.exports=n(38,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)},s(e)}t.exports=s},function(t,e,n){t.exports=n(489)},function(t,e,n){var r=n(242);t.exports=r},function(t,e,n){var r=n(243),o=Array.prototype;t.exports=function(t){var e=t.concat;return t===o||t instanceof Array&&e===o.concao=n(51);t.exports=function(t,e){try{o(r,t,tion(t,e,n){n(4)({target:"Object",stat:!0,sham:!n(32)},{create:n(95)})},function(t,e,n){var r=n(248);t.e,d=g.length,y=0;d>y;)v=g[y++],r&&!p.call(h,v)||(n[v]=h[v]);return n}:l},function(t,e,n){n(60),n(74);var r=n(183);t.exports=r},function(t,e,n){var r=n(25),o=n(179),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,n){"use strict";var r=n(180).IteratorPrototype,o=n(95),i=n(90),a=n(72),c=n(71),u=function(){return this};t.exports=function(t,e,n){var s=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,s,!1,!0),c[s]=u,t}},function(t,e,n){"use strict";var r=n(136),o=n(73);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,e,n){var r=n(33);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferL2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,n){var r=n(259);t.exports=r},function(t,e,n){var r=n(260),o=Array.prototype;t.exports=function(t){var e=t.map;return t===o||t instanceof Array&&e===o.map?r:e}},function(t,e,n){n(261);var r=n(36);t.exports=r("Array").map},function(t,e,n){"use strict";var r=n(4),o=n(83).map,i=n(94),a=n(61),c=i("map"),u=a("map");r({target:"Array",proto:!0,forced:!c||!u},{map:function(t,e,n){var r=n(110);t.exports=r(e,n){var r=n(47),o=n(197),i=n(41)("species&&r({target:"JSON",stat:!0,forced:f},{stringify:function(t,e,n){var r=a.apply(null,arguments);return"string"==typeof r?r.replace(c,l):r}})},function(t,e,n){var r=n(284);t.exports=r},function(t,e,n){var r=n(285),o=Array.prototype;t.exports=funcr"),u=a("filter");r({target:"Array",proto:!0,forced:!c||!u},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(288);t.exports=r},function(t,e,n){var r=n(289),o=Array.prototype;t.exports=funcelse if(n>r)for(f=y-r;f>m;f--)v=f+n-1,(p=f+r-1)in d?d[v]=d[p]:delete d[v];foe,n){t.exports=n(292)},function(t,dow):[];t.exports.f=function(t){return aw]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){n(28)("asyncIterator")},function(t,e){},function(t,e,n){n(28)("hasInstance")},function(t,e,n){n(28)("isConcatSpreadable")},function(t,e,n){n(28)("match")},function(t,e,n){n(28)("matchAll")},function(t,e,n){n(28)("replace")},function(t,e,n){n(28)("search")},function(t,e,n){n(28)("species")},functiingTag")},function(t,e,n){n(28)("unscopables")},function(t,e,n){n(72)(Math,"Math",!0)},function(t,e,n){var r=n(25);n(72)(r.JSON,"JSON",!0)},function(n(t,e,n){n(28)("dispose")},function(t,e,n){n(28)("observable")},function(t,e,n){n(28)("patternMatch")},function(t,e,n){n(28)("replaceAll")},function(t,e,n){var r=n(319);t.ex",stat:!0},{isFinite:n(321)})},function(t,nction(t,e,n){var r=n(4),o=n(52),i=n(106);ys:function(t){return i(o(t))}})},function(t,e,n){var r=n(201);t.exports=r},function(t,e,n){n(4)({target:"Array",stat:!0},{isArray:n(92)})},function(t,e,n){n(60);var r=n(327),o=n(73),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===i||t instanceof Array&&e===i.forEa(114),i=n(61),a=o("forEach"),c=i("forEach"s=r},function(t,e,n){var r=n(333),o=Array.prototype;t.exports=fpported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported"y",proto:!0,forced:u||!s||!l},{indexOf:fun,e,n){var r=n(204);t.exports=r},function(t){var r=n(343),o=String.prototype;t.exports=function(t){var e=ttion(t,e,n){var r=n(22),o=n(158);t.exports,arguments.length?arguments[0]:void 0)}}),o)},function(t,e,n){var r=n(22);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){n(60);var r=n(350),o=n(73),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===i||t insray.prototype,a={DOMTokenList:!0,NodeList:t.exports=r("Array").values},function(t,e,n(358),o=n(216);t.exports=function(t){if(oction(t,e,n){var r=n(73),o=n(26),i=n(71),a=o("iterator");t.exports=function(t){var e=Object(t);return void 0||s.return()}finally{if(a)throw c}}return rList:0,SVGPathSegList:0,SVGPointList:0,SVm,i=n(158),a=r.parseInt,c=/^[+-]?0[Xx]/,u=8!==a(i+"08")||22!==a(i+"0x16");t.exports=u?function(t,e){var n=o(String(t));return a(n,e>>>0||(c.test(n)?16:10))}:a},function(t,e,n){var r=n(388);t.exports=r},function(t,e,n){var r=n(389),o=Array.prot=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:f>p;p+=v)p in l&&(u=n(u,l[p],p,s));return u}};t.exports={left:c(!1),right:c(!0)}},function(t,e,n){var r=n(226);t.exports=r},function(t,e,],e[3])}var r=[null];return r.push.apply(r,e),new(s.apply(t,r))}var o=n.prototype,l=u(c(o)?o:Object.prototype),h=Function.apply.call(t,l,e);return c(h)?h:l}})},function(t,e,n){var r=n(174);t.exports=r},function(t,e,n){var r=n(3Of:n(182)})},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been calledn){var r=n(4),o=n(22),i=n(52),a=n(135),c=n(181);r({target:"ion"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(i)},{setTimeout:c(o.setTimeout),setInterval:c(o.setInterval)})},function(t,e,n){var r=n(204);t.exports=r},function(t,e,n){var erties(t,e)};r.defineProperties.sham&&(o.sham=!0)},function(t,e,n){var r=n(4),o=n(32);r({target:"Object",stat:!0,forced:!o,,stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),o=c.f,s=i(r),l={},f=0;s.length>f;)void 0!==(n=o(r,e=s[f++]))&&u(l,e,n);return l}})},function(t,e,n){var r=n(44),o=n(i=n(58),a=n(89).f,c=n(32),u=o((function(){a(1)}));r({target:"Object",stat:!0,forced:;t.exports=function(t){var e=t.includes;return t===i||t instanceoft:"Array",proto:!0,forced:!n(61)("indexOf",{ACCESSORS:!0,1:0})},{inarguments[1]:void 0)}})},function(t,e,n){var r=n(427);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular xp"==o(t))}},function(t,e,n){var r=n(26)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}cexports=r},function(t,e,n){n(431);var r=n(15);t.exports=r.Date.now},function(t,e,n){n(4)({target:"Date",stat:!0},{now:){var r=n(163),o=n(436);t.exports=function(t,e){if(null==t)return{};var n,i,a={},c=o(t);for(i=0;i<c.length;i++)n=c[i],r(e).call(e,n)>=0||(a[n]=t[n]);return a}},function(t,e,n){t.exports=n(437)},function(t,e,n){var r=n(200);t.exports=r},function(t,e,n){var r=n(439);t.exports=r},function(t,e,n){n(440),n(113),n(74),n(60);var r=n(15);t.exports=r.Set},function(t,e,n){"use strict";var r=n(207),o=n(211);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},function(t,e,n){"use strict";var r=n(37);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(443);t.exports=r},function(t,e,n){var r=n(444),o=Array.prototype;t.exports=function(t){var e=t.some;return t===o||t instanceof Array&&e===o.some?r:e}},function(t,e,n){n(445);var r=n(36);t.exports=r("Array").some},function(t,e,n){"use strict";var r=n(4),o=n(83).some,ifigurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},_=u(y),A=0;_.length>A;)x(_[A++]);m.constructor=O,O.prototype=m,p(o,"RegExp",O)}g("RegExp")},function(t,e,n){"use strict";var r=n(110),o=n(59),i=n(41),a=n(53),c=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[c]&&n(e,c,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r,o;
    /**
     * @license utfx (c) 2014 Daniel Wirtz <dcode@dcode.io>
     * Released under the Apache License, Ve/void 0===(o="function"==typeof(r=function):n<2048?(!=(248&n))thor(var n,r=n{var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<=6553UTF16toUTF8:functioe,n)}))},decodateCodePoint:function1:e<2048?2:e<65536?3:4;return n},calculateUTreturn t.arraySourc=t.length?null:ngSource=function(t)nts.length)return n.join("")+e.apply(String,t);t.length+arguments.length>1024&&(n.push(e.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}},t.assertCharCode=function(t){if("number"!=typeof t||t!=t)throw TypeError("Illegal char code: "+typeof t);if(t<0||t>65535)throw RangeError("Illegal char code: "+t);return t},t.assertCodePoint=function(e){if("number"!dePoint=function(e){var n,r=0,o=arguments,i=o.length;return t.UTF8toUTF16((function(){return r<i?t.assertCodePoint(o[r++]):null}),n=t.stringDestination()),n()},t.codePointAt=function(e,n){if("string"!=typeof e&&!(e&&e instanceof String)||"number"!=typeof n)throw TypeError("Illegal arguments: "+typeof e+", "+Point&&!e||(String.fromCodePoint=t.fromCodePoint),String.prototype.codePo{var r=n(206);n(451),n(453),n(455),n(457),n(458),n(459),n(46 r(this),(e=void 0!==s)&&r(s),null==t?new this:(n=[],e?(a=,n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),o=new(s(e,i("Map"))),p=c(o.set);return f(n,(function(t,n){r(n,t,e)&&p.call(o,t,n)}),void 0,!0,!0),o}})},function(t,e,n){"use strict";var r=n(4),o=n(23),i=n(16),a=n(39),c=n(55),u=n(31);r({target:"Map",proto:!0,real:!0,forced:o},{find:fun.length;a(e);var o=n.has(t);if(!o&&r<3)throw TypeError("Updating absent value");var c=o?n.get(t):d:n(23)},{updateOrInsert:n(232)})},function(t,exports=c=o:t.exports=c=function(t,e,n){var o=[null];o.push.apply(o,e);var a=new(r(Function).apply(t,o));return n&&i(a,n.prototype),a},c.apply(null,arguments)}t.exports=c},function(t,e,n){t.exports=n(477)},function(t,e,n){var r=n(226);t.exports=r},function(t,e,n){t.exports=n(479)},function(t,e,n){var r=n(228);t.exports=r},function(t,e,n){"use strict";var r=n(100),o=n(481).filter,i=n(485),a=n(488),c=i("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!c||!u},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(482),o=n(145),i=n(155),a=n(99),c=n(483),u=[].push,s=function(t){var e=1==t,n=2==t,s=3==t,l=4==t,f=6==t,p=5==t||f;return function(v,h,g,d){for(var y,m,S=i(v),b=o(S),T=r(h,g,3),E=a(b.length),O=0,x=d||c,_=e?x(v,E):n?x(v,0):void 0;E>O;O++)if((p||O in b)&&(m=T(y=b[O],O,S),t))if(e)_[O]=m;else if(m)switch(t){case 3:return!0;case 5:return y;case 6:ret(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(65),o=n(484),i=n(41)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(84);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(37),o=n(41),i=n(486),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r,o,i=n(40),a=n(487),c=i.process,u=c&&c.versions,s=u&&u.v8;s?o=(r=s.split("."))[0]+r[1]:a&&(!(r=a.mi(e,0)?e[0]:u,f=i(e,1)?e[1]:void 0;return c[t]=!!n&&!o((function(){if(s&&!r)return!0;var t={length:-1};s?a(t,1,{enumerable:!0,get:u}):n.r(e);var r=n(0),o=n.n(r),i=(n(81),n(42)),a=n.n(i),c=n(10),u=n.n(c),s=n(29ull!=t&&"function"==typeof t.then},h=n(1),g=n(7),d=n.n(g),y=n(2),m=Object(y.b)("",{displayAllErrors:!0}),S={};function b(t){S[t]&&S[t]--,0===S[t]&&delete S[t]}var T=Object(y.b)("");var E=Object(y.b)(""),O=/^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/;function x(t,e){if(null==t)E.error("".concat(e,": you passed a null or undefined event_type, event_type must be a non-empty string."));else if(Object(h.k)(t))if(0===t.length)E.error("".concat(e,": you passed an empty event_type, event_type must be a non-empty string."));else{if(O.test(t))return t;var n;E.error(o()(n="".concat(e,': you passed "')).call(n,t,'", event_type must adhere to the regular expression /^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/g. This means an event_type must be alphanumeric, cannot be more than 80 characters long, and can only include a dash, underscore, period, or colon as separators of alphanumeric characters.'))}else E.error("".concat(e,": you passed an invalid event_type, event_type must be a non-empty string."));return!1}var _=Object(y.b)("");function A(t,e){return Object(h.i)(t)||null==t?t:(_.error("".concat(e,": value must be a finite number.")),!1)}var w=Object(y.b)(""),N=0,R=2,k=4,I=8;function C(t,e){if(null==t)return{properties:null,size:1024};if(!Object(h.j)(t))return w.error("".concat(e,": properties must be a plain object.")),{properties:!1,size:1024};var n=d()(t),r=Object(h.m)(t),i={properties:r,size:1024};n.length>300&&w.warn("".concat(e,": Event has more than 300 properties. Some of them will be trimmed when processed."));for(var a=0;a<n.length;a++){i.size+=n[a].length*R;var c,u=r[n[a]],s=Object(h.k)(u),l=Object(h.i)(u),f=Object(h.h)(u),p=null===u;if(!(s||l||f||p))r[n[a]]=null,u=null,p=!0,w.warn(o()(c="".concat(e,": Property ")).call(c,n[a]," is of invalid type. Setting value to null."));if(p?i.size+=N:l?i.size+=I:f?i.size+=k:s&&(i.size+=u.length*R),i.size>32768){w.error("".concat(e,": The maximum size allowed for the properties is 32768 bytes, which was exceeded. Event not queued.")),i.properties=!1;break}}return i}var j=n(118),L=n.n(j),D=Object(y.b)("");function M(t,e,n){var r,i;if(null==t)D.error(o()(r=o()(i="".concat(e,": you passed a null or undefined ")).call(i,n,", ")).call(r,n," must be a non-empty string."));else if(Object(h.i)(t)||Object(h.k)(t)){var a,c,u;if(Object(h.i)(t))return D.warn(o()(a=o()(c="".concat(e,": ")).call(c,n,' "')).call(a,t,'" is not of type string, converting.')),Object(h.p)(t);if((t=L()(t).call(t)).length>0&&t.length<=250)return t;if(0===t.length)D.error(o()(u="".concat(e,": you passed an empty string, ")).call(u,n," must be a non-empty string."));else if(t.length>250){var s,l;D.error(o()(s=o()(l="".concat(e,": ")).call(l,n," too long, ")).call(s,n," must be 250 characters or less."))}}else{var f,p;D.error(o()(f=o()(p="".concat(e,": you passed an invalid ")).call(p,n," type, ")).call(f,n," must be a non-empty string."))}return!1}function P(t,e){if(Object(h.j)(t)){var n=M(t.matchingKey,e,"matchingKey"),r=M(t.bucketingKey,e,"bucketingKey");return n&&r?{matchingKey:n,bucketingKey:r}:(D.error("".concat(e,": Key must be an object with bucketingKey and matchingKey with valid string properties.")),!1)}return M(t,e,"key")}var F=Object(y.b)(""),G=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/;function U(t,e){if(null==t)F.error("".concat(e,": you passed a null or undefined split name, split name must be a non-empty string."));else if(Object(h.k)(t)){var n;if(G.test(t))F.warn(o()(n="".concat(e,': split name "')).call(n,t,'" has extra whitespace, trimming.')),t=L()(t).call(t);if(t.length>0)return t;F.error("".concat(e,": you passed an empty split name, split name must be a non-empty string."))}else F.error("".concat(e,": you passed an invalid split name, split name must be a non-empty string."));return!1}function K(t,e,n,r){var i;if(t.get(t.constants.READY,!0)&&("definition not found"===n||null==n))return F.warn(o()(i="".concat(r,': you passed "')).call(i,e,'" that does not exist in this environment, please double check what Splits exist in the web console.')),!1;return!0}var H=n(3),W=n.n(H),B=n(27),Y=n.n(B),z=Object(y.b)("");var V="control",q={treatment:V,config:null},Q=Object(y.b)(""),J=/[A-Z]/;function $(t,e){if(null==t)Q.error("".concat(e,": you passed a null or undefined traffic_type_name, traffic_type_name must be a non-empty string."));else if(Object(h.k)(t)){if(0!==t.length)return J.test(t)&&(Q.warn("".concat(e,": traffic_type_name should be all lowercase - converting string to lowercase.")),t=t.toLowerCase()),t;Q.error("".concat(e,": you passed an empty traffic_type_name, traffic_type_name must be a non-empty string."))}else Q.error("".concat(e,": you passed an invalid traffic_type_name, traffic_type_name must be a non-empty string."));return!1}function X(t,e){var n;Q.warn(o()(n="".concat(t,": Traffic Type ")).call(n,e," does not have any corresponding Splits in this environment, make sure you're tracking your events to a valid traffic type defined in the Split console."))}function Z(t,e,n){var r=e.get(e.constants.REINGS),i=e.get(e.constants.STORAGE).splits;if(!r||"localhost(y.b)("",{displayAllErrors:!0});function et(t){return!t.get(t.constants.DESTROYED,!0)||(tt.error("Client has already been destroyed - no calls possible."),!1)}function nt(t,e){return!(!t.get(t.constants.READY,!0)&&!t.get(t.constants.READY_FROM_CACHE,!0))||(tt.warn("".concat(e,": the SDK is notwait for SDK readiness before using this method.")),!1)}var rt=function(t){var e,n=t.conditirn null==e?null:{name:e.name,trafficType:e.trafficTypeName||null,killed:e.killed,changeNumber:e.changeNumber||0,treatments:rt(e),configs:e.configurations||{}}},it=function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=l()(t);!(n=(i=a.next()).done);n=!0){var c=i.value,u=ot(c);null!=u&&e.push(u)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e};var at=function(t,e){var n=e.get(e.constants.STATUS_MANAGER);return u()(a()(n),{split:function(n){var r=U(n,"split");returnlits:function(){if(!et(e)||!nt(e,"splits"))return[];var n=t.getAll();return v(n)?n.then(it):it(n)},names:function(){return et(e)&&nt(e,"names")?t.getKeys():[]}})},ct=n(63),ut=n.n(ct),st=n(11),lt=n.n(st),ft=n(233),pt=n.n(ft),vt=n(62),ht=n.n(vt),gt=n(119),dt=n.n(gt),yt=n(5),mt=n.n(yt),St=n(8),bt=n.n(St);var Tt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;e<t.length;e++)for(var n=t[e].matcherGroup.matchers,r=0;r<n.length;r++)if("IN_SEGMENT"===n[r].matcherType)return!0;return!1},Et=(n(24),n(18)),Ot=n.n(Et),xt=n(6),_t=n.n(xt);function At(t,e,n){var r=this,o=this.getSplit(t);return(v(o)?o:_t.a.resolve(o)).then((function(o){if(o){var i=JSON.parse(o);if(!i.changeNumber||i.changeNumber<n){i.killed=!0,i.defaultTreatment=e,i.changeNumber=n;var a=Ot()(i);return r.addSplit(t,a)}}return!1}))}var wt=function(){function t(){mt()(this,t),this.flush()}return bt()(t,[{key:"addSplit",value:function(t,e){var n=this.getSplit(t);if(n){var r=JSON.parse(n);if(r.trafficTypeName){var o=r.trafficTypeName;this.ttCache[o]--,this.ttCache[o]||delete this.ttCache[o]}Tt(r.conditions)&&this.splitsWithSegmentsCount--}var i=JSON.parse(e);if(i){this.splitCache.set(t,e);var a=i.trafficTypeName;return a&&(this.ttCache[a]||(this.ttCache[a]=0),this.ttCache[a]++),Tt(i.conditions)&&this.splitsWithSegmentsCount++,!0}return!1}},{key:"addSplits",value:function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=l()(t);!(n=(i=a.next()).done);n=!0){var c=dt()(i.value,2),u=c[0],s=c[1];e.push(this.addSplit(u,s))}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}},{key:"removeSplit",value:function(t){var e=this.getSplit(t);if(e){this.splitCache.delete(t);var n=JSON.parse(e),r=n.trafficTypeName;return r&&(this.ttCache[r]--,this.ttCache[r]||delete this.ttCache[r]),Tt(n.conditions)&&this.splitsWithSegmentsCounfunction(t){var e=this;return plit(t)})),t.length}},{key:"getSplit",value:function(t){return this.splitCache.get(t)}},{key:"setChangeNumber",value:function(t){return this.changeNumber=t,!0}},{key:"getChangeNumber",value:function(){return this.changeNumber}},{key:"getAll",value:function(){var t;return ht()(pt()(t=this.splitCache).call(t))}},{key:"getKeys",value:function(){var t;return ht()(leturn Object(h.i)(this.ttCache[t])&&this.ttCache[t]>0}},{key:"usesSegments",value:function(){return-1===this.getChangeNumber()||this.splitsWithSegmentsCount>0}},{key:"flush",value:function(){this.splitCache=new ut.a,this.ttCache={},this.changeNumber=-1,this.splitsWithSegmentsCount=0}},{key:"fetchMany",value:function(t){var e=this,n=new ut.a;return W()(t).call(t,(function(t){n.set(t,e.splitCache.get(t)||null)})),n}},{key:"checkCache",value:function(){return!1}}]),t}();wt.prototype.killLocally=At;var Nt=wt,Rt=(n(49),n(54),n(234)),kt=n.n(Rt),It=n(235),Ct=n.n(It),jt=Object(y.b)("splitio-storage:localstorage"),Lt=function(){function t(e){mt()(this,t),this.keys=e}return bt()(t,[{key:"decrementCount",value:function(t){var e=Object(h.o)(localStorage.getItem(t))-1;e>0?localStorage.setItem(t,e):localStorage.removeItem(t)}},{key:"decrementCounts",value:function(t){try{if(t){if(t.trafficTypeName){var e=lt()(this).buildTrafficTypeKey(t.trafficTypeName);this.decrementCount(e)}if(Tt(t.conditions)){var n=lt()(this).buildSplitsWithSegmentCountKey();this.decrementCount(n)}}}catch(t){jt.error(t)}}},{key:"incrementCounts",value:function(t){try{if(t){if(t.trafficTypeName){var e=lt()(this).buildTrafficTypeKey(t.trafficTypeName);localStorage.setItem(e,Object(h.o)(localStorage.getItem(e))+1)}if(Tt(t.conditions)){var n=lt()(this).buildSplitsWithSegmentCountKey();localStorage.setItem(n,Object(h.o)(localStorage.getItem(n))+1)}}}catch(t){jt.error(t)}}},{key:"addSplit",value:function(t,e){try{var n=lt()(this).buildSplitKey(t),r=localStorage.getItem(n),o=r?JSON.parse(r):null;this.decrementCounts(o),localStorage.setItem(n,e);var i=e?JSON.parse(e):null;return this.incrementCounts(i),!0}catch(t){return jt.error(t),!1}}},{key:"addSplits",value:function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=l()(t);!(n=(i=a.next()).done);n=!0){var c=dt()(i.value,2),u=c[0],s=c[1];e.push(this.addSplit(u,s))}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}},{key:"removeSplit",value:function(t){try{var e=this.getSplit(t);localrementCounts(n),1}catch(t){return jt.error(t),0}}},{key:"removeSplits",value:function(t){for(var e=0,n=t.length,r=0;e<n;e++)r+=this.removeSplit(t[e]);return r}},{key:"getSplit",value:function(t){return localStorage.getItem(lt()(this).buildSplitKey(t))}},{key:"setChangeNumber",value:function(t){try{return localStorage.setItem(lt()(this).buildSplitsTillKey(),t+""),this.hasSync=!0,!0}catch(t){return jt.error(t),!1}}},{key:"getChangeNumber",value:function(){var t=localStorage.getItem(lt()(this).buildSplitsTillKey());return null!==t?(t=Ct()(t,10),kt()(t)?-1:t):-1}},{key:"getAll",value:function(){for(var t=localStorage.length,e=[],n=0;n<t;){var r=localStorage.key(n),o=r&&localStorage.getItem(r);null!=r&&lt()(this).isSplitKey(r)&&o&&e.push(o),n++}return e}},{key:"getKeys",value:function(){for(var t=localStorage.length,e=[],n=0;n<t;){var r=localStorage.key(n);null!=r&&lt()(this).isSplitKey(r)&&e.push(lt()(this).extractKey(r)),n++}return e}},{key:"trafficTypeExists",value:function(t){var e=Object(h.o)(localStorage.getItem(lt()(this).buildTrafficTypeKey(t)));return Object(h.i)(e)&&e>0}},{key:"usesSegments",value:function(){if(!this.hasSync)return!0;var t=localStorage.getItem(lt()(this).buildSplitsWithSegmentCountKey()),e=null===t?0:Object(h.o)(t);return!Object(h.i)(e)||e>0}},{key:"flush",value:function(){jt.info("Flushing localStorage"),localStorage.clear(),this.hasSync=!1}},{key:"fetchMany",v W()(t).call(t,(function(t){n.set(t,localStorage.getItem(lt(e:function(){return this.getChangLocally=At;var Dt=Lt,Mt=function(){function t(e){mt()(this,t),this.keys=e,this.flush()}return bt()(t,[{key:"flush",value:function(){this.segmentCache=new ut.a}},{key:"addToSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);return this.segmentCache.set(e,!0),!0}},{key:"removeFromSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);return this.segmentCache.delete(e),!0}},{key:"resetSegments",value:function(t){var e,n,r=!1;if(0===t.length&&this.segmentCache.size===t.length)return r;if(this.segmentCache.size!==t.length){r=!0,this.segmentCache=new ut.a;var o=!0,i=!1,a=void 0;try{for(var c,u=l()(t);!(o=(c=u.next()).done);o=!0)n=c.value,this.addToSegment(n)}catch(t){i=!0,a=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}else{for(e=0;e<t.length&&this.isInSegment(t[e]);e++);if(e<t.length){r=!0,this.segmentCache=new ut.a;var s=!0,f=!1,p=void 0;try{for(var v,h=l()(t);!(s=(v=h.next()).done);s=!0)n=v.value,this.addToSegment(n)}catch(t){f=!0,p=t}finally{try{s||null==h.return||h.return()}finally{if(f)throw p}}}}return r}},{key:"isInSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);return!0===this.segmentCache.get(e)}},{key:"setChangeNumber",value:function(){return!0}},{key:"getChangeNumber",value:function(){return-1}},{key:"registerSegment",value:function(){return!1}},{key:"registerSegments",value:function(){return!1}},{key:"getRegisteredSegments",value:function(){return[]}}]),t}(),Pt=n(50),Ft=n.n(Pt),Gt=n(85),Ut=n.n(Gt),Kt=Object(y.b)("splitio-storage:localstorage"),Ht=function(){function t(e){mt()(this,t),this.keys=e}return bt()(t,[{key:"addToSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);try{return localStorage.setItem(e,"1"),!0}catch(t){return Kt.error(t),!1}}},{key:"removeFromSegment",value:function(t){var e=lt()(this).buildSegmentNameKey(t);try{return localStorage.removeItem(e),!0}catch(t){return Kt.error(t),!1}}},{key:"resetSegments",value:function(t){var e,n,r=this,o=!1,i=Ut()(e=d()(localStorage)).call(e,(function(t,e){var n=lt()(r).extractSegmentName(e);return n&&t.push(n),t}),[]);if(0===t.length&&i.length===t.length)return o;if(i.length!==t.length)o=!0,W()(i).call(i,(function(t){return r.removeFromSegment(t)})),W()(t).call(t,(function(t){return r.addToSegment(t)}));else{for(n=0;n<t.length&&-1!==Ft()(i).call(i,t[n]);n++);n<t.length&&(o=!0,W()(i).call(i,(function(t){return r.removeFromSegment(t)})),W()(t).call(t,(function(t){return r.addToSegment(t)})))}return o}},{key:"isInSegment",value:fu=localStorage.getItem(lt()(this).buildSegmentNameKey(t))}},{key:"setChangeNumber",value:function(){return!0}},{key:"getChangeNumber",value:,{key:"registerSegmetion(){return!1}},{key{return[]}},{key:"flush",value:function(){Kt.info("Flushing localStorage"),localStorage.clear()}}]),t}(),Wt=function(){function t(){mt()(this,t),this.queue=[]}return bt()s.queue}},{key:"track",value:function(t){var e;return(e=this.queue).push.apply(e,ht()(t)),this}},{key:"clear",value:function(){return this.queue.lenr n=0,r=t.length-1,o=Math.floor((r+n)/2),i=n,a=r;t[o]!==e&&n<r;)e<t[o]?r=o-1:e>t[o]&&(n=o+1),o=Math.floor((r+n)/2);return o<i?o=i:o>a&&(o=a),e<t[o]&&o>i?o-1:o},Vt=Yt()(zt).call(zt,null,[1,1.5,2.25,3.38,5.06,7.59,11.39,17.09,25.63,38.44,57.67,86.5,129.75,194.62,291.93,437.89,656.84,985.26,1477.89,2216.84,3325.26,4987.89,77481.83]),qt=function(){function t(){mt()(this,t),tack",value:function(t,e){return void 0===this.counters[t]&&(this.counters[t]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.counters[t][Vtion(){return 0===d()(this.counter){return this.counters}}]),t}(),Qt=function(){function t(){mt()(this,t),tvalue:function(){return this.counters}},{key:"track",value:function(t){return void 0===this.counters[t]?this.counters[t]=1:this.counters[t]++,this.counters[t]}},{key:"isEmpty",value:function(){return 0===d()(this.counters).length}},{key:"toJSON",value:function(){return this.counters}}]),t}(),Jt=function(){function t(e){var n=this;mt()(this,t);var r=e.get(!1,this.maxQueue=r.scheduler.eventsQueueSize,this.queue=[],this.queueByteSize=0,v(o)?o.then((function(t){n.onFullQueue=t.flushAndResetTimer,n._checkForFlush()})):"funcack",value:function(s[1]:0;return this.qu(t),this._checkForFlush(),!0}},{key:"clear",value:function(){return this.queue=[],this.queue},{key:"_checkForFlush",value:function(){(this.queueByteSize>5242880||this.maxQueue>0&&this.queue.length>=this.e()}}]),t}(),$t=(n(67),n(194),/[^.]+$/),Xt=/count\.([^/]+)$/,Zt=/latency\.([^/]+)\.bucket\.([0-9]+)$/,te=function(){function t(e){mt()(this,t),this.settings=e}return bt()(t,[{key:"buildSplitKey",value:function(t){var e;return o()(e="".concat(this.settings.storage.prefix,".split.")).call(e,t)}},{key:"buildTrafficTypeKey",value:function(t){var e;return o()(e="".concat(this.settings.storage.prefix,".trafficType.")).call(e,t)}},{key:"buildSplitsTillKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.till")}},{key:"buildSplitsReady",value:function(){return"".concat(this.settings.storage.prefix,".splits.ready")}},{key:"isSplitKey",value:function(t){return Object(h.n)(t,"".concat(this.settings.storage.prefix,".split."))}},{key:"buildSegmentNameKey",value:function(t){var e;return o()(e="".concat(this.settings.storage.prefix,".segment.")).call(e,t)}},{key:"buildSegmentTillKey",value:function(t){var e;return o()(e="".concat(this.settings.storage.prefix,".segment.")).call(e,t,".till")}},{key:"buildRegisteredSegmentsKey",value:function(){return"".concat(this.settings.storage.prefix,".segments.registered")}},{key:"buildSegmentsReady",value:function(){return"".concat(this.settings.storage.prefix,".segments.ready")}},{key:"buildVersionablePrefix",value:function(){var t,e;return o()(t=o()(e="".concat(this.settings.storage.prefix,"/")).call(e,this.settings.version,"/")).call(t,this.settings.runtime.ip)}},{key:"buildImpressionsKey",value:function(){return"".concat(this.settings.storage.prefix,".impressions")}},{key:"buildEventsKey",value:function(){return"".concat(this.settings.storage.prefix,".events")}},{key:"buildLatencyKeyPrefix",value:function(){return"".concat(this.buildVersionablePrefix(),"/latency")}},{key:"buildLatencyKey",value:function(t,e){var n,r;return o()(n=o()(r="".concat(this.buildLatencyKeyPrefix(),".")).call(r,t,".bucket.")).call(n,e)}},{key:"buildCountKey",value:function(t){var e;return o()(e="".concat(this.buildVersionablePrefix(),"/count.")).call(e,t)}},{key:"buildGaugeKey",value:function(t){var e;return o()(e="".concat(this.buildVersionablePrefix(),"/gauge.")).call(e,t)}},{key:"searchPatternForCountKeys",value:function(){return"".concat(this.buildVersionablePrefix(),{return"".concat(this.settings.storage.prefix,".split.*")}},{key:"searchPatternForLatency",value:function(){return"".concat(this.buildLatencyKeyPrefix(),".*")}},{key:"extractKey",value:function(t){var e=t.match($t);if(e&&e.length)return e[0];throw"Invalid latency key provided"}},{key:"extractCounterName",value:function(t){var e=t.match(Xt);if(e&&e.length)return e[1];throw"Invalid counter key provided"}},{key:"extractLatencyMetricNameAndBucket",value:function(t){var e=t.match(Zt);if(e&&e.length>2)return{metricName:e[1],bucketNumber:e[2]};throw"Invalid counter key provided"}}]),t}(),ee=(n(77),n(38)),ne=n.n(ee),re=n(57),oe=n.n(re),ie=n(86),ae=n.n(ie),ce=n(56),ue=n.n(ce);function se(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return Object(h.j)(n)?n[t]:e?void 0:n}}var le=se("matchingKey"),fe=se("bucketingKey",!0);var pe=function(t){oe()(n,t);var e=function(t){function e(){if("undefined"==typeof Reflect||!ne.a)return!1;if(ne.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(ne()(Date,[],(function(){}))),!0}catch(t)=ue()(this).constructor;n=ne()(r,arguments,o)}else n=r.apply(this,arguments);return ae()(this,n)}}(n);function n(){return mt()(this,n),e.apply(this,arguments)}return bt()(n,[{key:"buildSegmentNameKey",value:function(t){var e,n;return o()(e=o()(n="".concat(le(this.settings.core.key),".")).call(n,this.settings.storage.prefix,".segment.")).call(e,t)}},{key:"extractSegmentName",value:function(t){var e,n=o()(e="".concat(le(this.settin(t,n))return t.substr(n.length)}},{key:"buildSplitsWithSegmentCountKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.usingSegments")}}]),n}(te),ve=function(t){var e=t.get(t.constants.SETTINGS);swi:new Mt(s.flush()}}},destroy:function(){this.splits.flush(),this.segments.flush(),this.impressions.clear(),this.metrics.clear(),this.count.clear(),this.eventsew Ht(e)}}},destroy:function(){this.splits=new Nt,this.segments=new Mt(new te(e)),this.impressions.clear(),this.metrics.clear(),this.count.clear(),this.events.clear()}};default:throw new Error("Unsupported storage type")}},he=n(14),ge=n.n(he),de=n(88),ye=n.n(de),me="init::timeout",Se="init::ready",be="init::cache-ready",Te="state::splits-arrived",Ee="state::segments-arrived",Oe="state::splits-cache-loaded",xe="state::update",_e="state::check";var Ae=function(){var t=0,e=new ye.a;e.SDK_SPLITS_CACHE_LOADED=Oe,e.SDK_SPLITS_ARRIVED=Te;var n=0;function r(e,n){var r=new ye.a,o=0){14!==i&&t+o===&r.emit(xe)})),e.on(Te,(function(e){e||(t=2),r.emit(_e)})),e.once(Oe,(function(){ge()((function(){return r.emit(be)}),0)})),n.on(Ee,(function(){o=4,r.emit(_e)})arguments[0]:0,ED=Ee;var a=r(e,i);return t>0&&(o=ge()((function(){a.emit(me,"Split SDK emitted SDK_READY_TIMED_OUT event.")}),t),a.once(Se,(OUT=me,n++,{splits:e,segments:i,gate:a,destroy:function(){i.removeAllListeners(),a.removeAllListeners(),clearTimeout(o),n>0&&n--,0===n&&e.removeAllListeners()}}}},we=n(34),Ne=n.n(we),Re=n(35),ke=n.n(Re),Ie=n(19),Ce=n.n(Ie),je=n(20),Le=n.n(je),De=n(12),Me=n.n(De),Pe=n(21),Fe=n.n(Pe),Ge=n(17),Ue=n.n(Ge),Ke={startup:{requestTimeoutBeforeReady:5,retriesOnFailureBeforeReady:1,readyTimeout:10,eventsFirstPushWindow:10}},He=n(117),We=Object(y.b)("splitio-settings"),Be=function(t){var e=t.mode,n=t.storage,r=n.type,o=void 0===r?"MEMORY":r,i=n.options,a=void 0===i?{}:i,c=n.prefix;return c?c+=".SPLITIO":c="SPLITIO","localhost"===e?{type:"MEMORY",prefix:c}:(("MEMORY"!==o&&"LOCALSTORAGE"!==o||"LOCALSTORAGE"===o&&!Object(He.a)())&&(o="MEMORY",We.warn("Invalid or unavailable storage. Fallbacking into MEMORY storage")),{type:o,options:a,prefix:c})},Ye=n(236),ze=n.n(Ye),Ve=Object(y.b)("splitio-settings"),qe=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.integrations;if(!Y()(i)||0===i.length)return[];var a=Me()(i).call(i,(function(t){return t&&Object(h.k)(t.type)&&ze()(r).call(r,t.type)})),c=i.length-a.length;return c&&Ve.warn(o()(e=o()(n="".concat:"are"," invalid: integration items must have a valid 'type' value")),a},Qe=function(t){return qe(t,["GOOGLE_ANALYTICS_TO_SPLIT","SPLIT_TO_GOOGLE_ANALYTICS"])};var Je,$e=function(t,e){var n;if("localhost"===t)return"localhost";if(-1===Ft()(n=["standalone","producer","consumer"]).call(n,e))throw Error("Invalid mode provided");return e},Xe=n(237);function Ze(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=Ze(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=Ze(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}var en=/^\/(testImpressions|metrics|events)/,nn=/^\/auth/,rn=/^\/(sse|event-stream)/,on={mode:"standalone",core:{authorizationKey:void 0,key:void 0,trafficType:void 0,labelsEnabled:!0,IPAddressesEnabled:void 0},scheduler:{featuresRefreshRate:30,segmentsRefreshRate:60,metricsRefreshRate:120,impressionsRefreshRate:60,offlineRefreshRate:15,eventsPushRate:60,eventsQueueSize:500,authRetryBackoffBase:1,streamingReconnectBackoffBase:1},urls:{sdk:"https://sdk.split.io/api",events:"https://events.split.io/api",auth:"https://auth.split.io/api",streaming:"https://streaming.split.io"},stsionListener:void 0,version:o()(Je="".concat("javascript","-")).call(Je,Xe.a),integrations:void 0,streamingEnabled:!0};function an(t){return Math.round(1e3*t)}function cn(t){var e,n=Object(h.l)({},on,Ke,t);return n.scheduler.featuresRefreshRate=an(n.scheduler.featuresRefreshRate),n.scheduler.segmentsRefreshRate=an(n.scheduler.segmentsRefreshRate),n.scheduler.metricsRefreshRate=an(n.scheduler.metricsRefreshRate),n.scheduler.impressionsRefreshRate=an(n.scheduler.impressionsRefreshRate),n.scheduler.offlineRefreshRate=an(n.scheduler.offlineRefreshRate),n.scheduler.eventsPushRate=an(n.scheduler.eventsPushRate),n.startup.requestTimeoutBeforeReady=an(n.startup.requestTimeoutBeforeReady),n.startup.readyTimeout=an(n.startup.readyTimeout),n.startup.eventsFirstPushWindow=an(n.startup.eventsFirstPushWindow),n.mode=$e(n.core.authorizationKey,n.mode),n.storage=Be(n),"boolean"==typeof(e=n.debug)?e?y.a.enable():y.a.disable():"string"==typeof e&&y.a.setLogLevel(e),n.runtime=(n.core.IPAddressesEnabled,n.mode,{ip:!1,hostname:!1}),n.integrations=Qe(n),!1!==n.streamingEnabled&&(n.streamingEnabled=!0),n.streamingEnabled&&(n.scheduler.authRetryBackoffBase=an(n.scheduler.authRetryBackoffBase),n.scheduler.streamingReconnectBackoffBase=an(n.scheduler.streamingReconnectBackoffBase)),n}var un={url:function(t){var e,n,r,i;return en.test(t)?o()(n="".concat(this.urls.events)).call(n,t):nn.test(t)?o()(r="".concat(this.urls.auth)).call(r,t):rn.test(t)?o()(i="".concat(this.urls.streaming)).call(i,t):o()(e="".concat(this.urls.sdk)).call(e,t)},overrideKeyAndTT:function(t,e){return u()(a()(un),tn(tn({},this),{},{core:tn(tn({},this.core),{},{key:t,trafficType:e})}))}},sn=function(t){return u()(a()(un),cn(t))},ln={COLLECTORS:"metrics_collectors",DESTROYED:"is_destroyed",EVENTS:"events_publisher",HAS_TIMEDOUT:"has_timedout",INTEGRATIONS_MANAGER:"integrations_manager",MY_SEGMENTS_CHANGE_WORKER:"my_segments_change_worker",PRODUCER:"producer",READINESS:"readiness_gate",READY:"is_ready",READY_FROM_CACHE:"is_ready_from_cache",SETTINGS:"settings",STATUS_MANAGER:"status_manager",STORAGE:"storage"},fn=function(){function t(){mt()(this,t),this._map={},this.constants=ln}return bt()(t,[{key:"get",value:function(t){var e=arguments.length>1&arguments[1];if("string"==typeof t&&("string"!=typeof t||t.length))urn n;if(!e){var r,o=new _t.a((function(t){return r=t}));return o.manualResolve=r,this._map[t]=o,o}}}},{key:"getAll",value:function(){return u()({},this._map)}},{key:"put",value:function(t,e){var n=this;if("string"!=typeof t||"string"==typeof t&&!t.this._mapof r.manualResolve)&&(v(r)&&r.manualResolve&&r.manualResolve(e),v(e)&&e.then((function(e){return n._map[t]=e,e})).catch((function(e){return n._map[t]=void 0,e})),this._map[t]=e,!0)}}]),t}(),pn=function(t){return Object(h.j)(t)?{matchingKey:t.matchingKey,bucketingKey:t.bucketingKey}:{matchingKey:t,bucketingKey:t}},vn=n(45),hn=n(80),gn=n.n(hn),dn=n(68),yn=n.n(dn);var mn,Sn="object"===("undefined"==typeof performannction"==typeof performance.now?Yt()(mn=performance.now).call(mn,performance):gn.a;var bn,Tn=function(){var t=Sn();return function(){return Math.round(Sn()-t)}},En=new vn.b("[TIME TRACKER]",{showLevel:!1}),On={},xn={SDK_READY:"Getting ready - Split SDK",SDK_GET_TREATMENT:"SDK - Get Treatment",SDK_GET_TREATMENTS:"SDK - Get Treatments",SDK_GET_TREATMENT_WITH_CONFIG:"SDK - Get Treatment with config",SDK_GET_TREATMENTS_WITH_CONFIG:"SDK - Get Treatments with config",SPLITS_READY:"Getting ready - Splits",SEGMENTS_READY:"Getting ready - Segments",METRICS_PUSH:"Pushing - Metrics",IMPRESSIONS_PUSH:"Pushing - Impressions",EVENTS_PUSH:"Pushing - Events",MY_SEGMENTS_FETCH:"Fetching - My Segments",SEGMENTS_FETCH:"Fetching - Segments",SPLITS_FETCH:"Fetching - Splits"},_n=(bn={},Ue()(bn,xn.SDK_READY,{collector:"client",method:"ready"}),Ue()(bn,xn.SDK_GET_TREATMENT,{collector:"client",method:"getTreatment"}),Ue()(bn,xn.SDK_GET_TREATMENTS,{collector:"client",method:"getTreatments"}),Ue()(bn,xn.SDK_GET_TREATMENT_WITH_CONFIG,{collector:"client",method:"getTreatmentWithConfig"}),Ue()(bn,xn.SDK_GET_TREATMENTS_WITH_CONFIG,{collector:"client",method:"getTreatmentsWithConfig"}),Ue()(bn,xn.MY_SEGMENTS_FETCH,{collector:"mySegments",method:"r:"segmentChanges",method:"latency"}),Ue()(bn,xn.SPLITS_FETCH,{con(t,e){return"string"=rn t.then((function(t){return o.stop(e,r),n&&n.count&&n.count(t.status),t})).catch((function(t){throw o.stop(e,r),n&&n.countException&&n.countException(),t}))},start:function(t,e,n){var r,o,i,a=Object(h.s)(),c=wn(t,e);v(n)?r=this.__attachToPromise(n,t,c,a):(r=Yt()(o=this.stop).call(o,this,t,a),_n[t,this,t,a)));var u=An(t,a),s=Nn(t,c);return On[u]={cb:s,timer:Tn()},r},setCollectorForTask:function(t,e,n){var r=wn(t,n);if(r){var o=An(t,e);On[o].cb=Nn(t,r)}},stop:function(t,e){var n=An(t,e),r=On[n];if(r){var i,a=r.timer();return En.debug(o()(i="[".concat(t,"] took ")).call(i,a,"ms to finish.")),r.cb&&r.cb(a),delete On[n],a}},TaskNames:xn},kn=(n(78),n(238)),In=n.n(kn),Cn={ALL:1,SEGMENT:2,WHITELIST:3,EQUAL_TO:4,GREATER_THAN_OR_EQUAL_TO:5,LESS_THAN_OR_EQUAL_TO:6,BETWEEN:7,UNDEFINED:8,EQUAL_TO_SET:9,CONTAINS_ANY_OF_SET:10,CONTAINS_ALL_OF_SET:11,PART_OF_SET:12,ENDS_WITH:13,STARTS_WITH:14,CONTAINS_STRING:15,IN_SPLIT_TREATMENT:16,ESET",DATETIME:"DATETIME",NOon(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.whitelist};var Gn=function(t){return t.value};function Un(t){return new Date(t).setUTCHours(0,0,0,0)}function Kn(t){return new Date(t).setUTCSeconds(0,0)}var Hn=function(t){var e=p()(t).call(t,(function(t){var e=t.matcherType,n=t.negate,r=t.keySelector,o=t.userDefinedSegmentMatcherData,i=t.whENT":return Cn.IN_SPLIT_TREATMENT;case"EQUAL_TO_BOOLEAN":return Cn.EQUAL_TO_BOOLEAN;case"MATCHES_STRING":return Cn.MATCHES_STRING;default:return Cn.UNDEFINED}}(e),v=jn.STRING,h=void 0;return p===Cn.SEGMENT?h=Ln(o):p===Cn.WHITELIST?h=Pn(i):p===Cn.EQUAL_TO?(h=Gn(a),v=jn.NUMBER,"DATETIME"===a.dataType&&(h=Un(h),v=jn.DATETIME)):p===Cn.GREATER_THAN_OR_EQUAL_TO||p===Cn.LESS_THAN_OR_EQUAL_TO?(h=Gn(a),v=jn.NUMBER,"DATETIME"===a.dataType&&(h=Kn(h),v=jn.DATETIME)):p===Cn.BETWEEN?(h=c,v=jn.NUMBER,"DATETIME"===c.dataType&&(h.start=Kn(h.start),h.end=Kn(h.end),v=jn.DATETIME)):p===Cn.EQUAL_TO_SET||p===Cn.CONTAINS_ANY_OF_SET||p===Cn.CONTAINS_ALL_OF_SET||p===Cn.PART_OF_SET?(h=Fn(i),v=jn.SET):p===Cn.STARTS_WITH||p===Cn.ENDS_WITH||p===Cn.CONTAINS_STRING?h=Fn(i):p===Cn.IN_SPLIT_TREATMENT?(h=u,v=jn.NOT_SOLEAN,h=if(!(this instanceof Wn))return new Wn(t,et,this._treatments=e}Wn.parse=function(t){var e=Ut()(t).call(t,(function(t,e){var n=e.size,r=e.treatment;return t.ranges.push(t.inc+=n),t.treatments.push(r),t}),{inc:0,ranges:[],treatments:[]});return new Wn(e.ranges,e.treatreatmentFor=function(t){if(t<0||t>100)throw new RangeError("Please provide a valun t<=e}));return this._treatments[e]};var Bn=Wn,Yn=Object(y.b)("splitio-engine:matcher");function zn(t){return Yn.debug("[allMatcher] is always true"),null!=t}var Vn=function(){return zn},qn=Object(y.b)("splitio-engine:matcher");var Qn=function(t,e){return function(n){var r,i,a=e.segments.isInSegment(t,n);return v(a)?a.then((function(e){var r,i;return qn.debug(o()(r=o()(i="[asyncSegmentMatcher] evaluated ".concat(t," / ")).call(i,n," => ")).call(r,a)),e})):qn.debug(o()(r=o()(i="[segmentMatcher] evaluated ".concat(t," / ")).call(i,n," => ")).call(r,a)),a}},Jn=(n(115),Object(y.b)("splitio-engine:matcher"));var $n=function(t){return function(e){var n,r,i=t.has(e);return Jn.debug(o()(n=o()(r="[whitelistMatcher] evaluated ".concat(e," in [")).call(r,ht()(t).join(","),"] => ")).call(n,i)),i}},Xn=Object(y.b)("splitio-engine:matcher");var Zn=function(t){return function(e){var n,r,i=e===t;return Xn.debug(o()(n=o()(r="[equalToMatcher] is ".concat(e," equal to ")).call(r,t,"? ")).call(n,i)),i}},tr=Object(y.b)("splitio-engine:matcher");var er=function(t){return function(e){var n,r,i=e>=t;return tr.debug(o()(n=o()(r="[greaterThanEqualMatcher] is ".concat(e," greater than ")).call(r,t,"? ")).call(n,i)),i}},nr=Object(y.b)("splitio-engine:matcher");var rr=function(t){return function(e){var n,r,i=e<=t;return nr.debug(o()(n=o()(r="[lessThanEqualMatcher] is ".concat(e," less than ")).call(r,t,"? ")).call(n,i)),i}},or=Object(y.b)("splitio-engine:matcher");var ir=function(t){return function(e){var n,r,i,a=e>=t.start&&e<=t.end;return or.debug(o()(n=o()(r=o()(i="[betweenMatcher] is ".concat(e," between ")).call(i,t.start," and ")).call(r,t.end,"? ")).call(n,a)),a}},ar=Object(y.b)("splitio-engine:matcher");var cr=function(t){return function(e){for(var n,r,i=e.length===t.length,a=function(n){Object(h.c)(t,(function(t){return t===e[n]}))<0&&(i=!1)},c=0;c<e.length&&i;c++)a(c);return ar.debug(o()(n=o()(r="[equalToSetMatcher] is ".concat(e," equal to set ")).call(r,t,"? ")).call(n,i)),i}},ur=Object(y.b)("splitio-engine:matcher");var sr=function(t){return function(e){var n,r,i=!0;if(e.length<t.length)i=!1;else for(var a=function(n){Object(h.c)(e,(function(e){return e===t[n]}))<0&&(i=!1)},c=0;c<t.length&&i;c++)a(c);return ur.debug(o()(n=o()(r="[containsAllMatcher] ".concat(e," contains all elements of ")).call(r,t,"? ")).call(n,i)),i}},lr=Object(y.b)("splitio-engine:matcher");var fr=function(t){return function(e){for(var n,r,i=!1,a=function(n){Object(h.c)(e,(function(e){return e===t[n]}))>=0&&(i=!0)},c=0;c<t.length&&!i;c++)a(c);return lr.debug(o()(n=o()(r="[containsAnyMatcher] ".concat(e," contains at least an element of ")).call(r,t,"? y.b)("splitio-engine:matcher");var vr=function(t){return function(e){for(var n,r,i=e.length<=t.length,a=function(n){Object(h.c)(t,(function(t){return t===e[n]}))<0&&(i=!1)},c=0;c<e.length&&i;c++)a(c);return pr.debug(o()(n=o()(r="[partOfMatcher] ".concat(e," is part of ")).call(r,t,"? ")).call(n,i)),i}},hr=n(69),gr=n.n(hr),dr=Object(y.b)("splitio-engine:matcher");var yr=function(t){return function(e){var n,r,i=gr()(t).call(t,(function(t){return Object(h.n)(e,t)}));return dr.debug(o()(n=o()(r="[startsWithMatcher] ".con)).call(n,i)),i}},mr=Object(y.b)("splitio-engine:matcher");var Sr=function(t){return function(e){var n,r,i=gr()(t).call(t,(function(t){return Object(h.a)(e,t)}));return mr.debug(o()(n=o()(r="[endsWithMatcher] ".concat(e," ends with ")).call(r,t,"? ")).call(n,i)),i}},br=Object(y.b)("splitio-engine:matcher");var Tr=function(t){return function(e){var n,r,i=gr()(t).call(t,(function(t){return Object(h.k)(e)&&Ft()(e).call(e,t)>-1}));return br.debug(o()(n=o()(r="[containsStringMatcher] ".concat(e," contains ")).call(r,t,"? ")).call(n,i)),i}},Er=(n(112),Object(y.b)("splitio-engine:matcher"));function Or(t,e,n){var r,i,a,c,u,s=!1;return Y()(e)&&(s=-1!==Ft()(e).call(e,t.treatment)),Er.debug(o()(r=o()(i=o()(a=o()(c=o()(u='[dependencyMatcher] Parent split "'.concat(n,'" evaluated to "')).call(u,t.treatment,'" with label "')).call(c,t.label,'". ')).call(a,n," evaluated treatment is part of [")).call(i,e,"] ? ")).call(r,s,".")),s}var xr=function(t,e){var n=t.split,r=t.treatments;return function(t,i){var a,c,u=t.key,s=t.attributes;Er.debug(o()(a=o()(c='[dependencyMatcher] wilncat(n,'" with key: ')).call(c,Ot()(u)," ")).call(a,s?"\n attributes: ".concat(Ot()(s)):""));var l=i(u,n,s,e);return v(l)?l.then((function(t){return Or(t,r,n)})):Or(l,r,n)}},_r=Object(y.b)("splitio-engine:matcher");var Ar=function(t){return function(e){var n,r=t===e;return _r.debug(o()(n="[booleanMatcher] ".concat(t," === ")).call(n,e)),r}},wr=(n(446),Object(y.b)("splitio-engine:matcher"));var Nr=function(t){return function(e){var n,r,i;try{i=new RegExp(t)}catch(e){return wr.debug("[stringMatcher] ".concat(t," is an invalid regex")),!1}var a=i.test(e);return wr.debug(o()(n=o()(r="[stringMatcher] does ".concat(e," matches with ")).call(r,t,"? ")).call(n,a?"yes":"no")),a}};var Rr=function(t,e){var n,r=t.type,o=t.value;return r===Cn.ALL?n=Vn(o):r===Cn.SEGMENT?n=Qn(o,e):r===Cn.WHITELIST?n=$n(o):r===Cn.EQUAL_TO?n=Zn(o):r===Cn.GREATER_THAN_OR_EQUAL_TO?n=er(o):r===Cn.LESS_THAN_OR_EQUAL_TO?n=rr(o):r===Cn.BETWEEN?n=ir(o):r===Cn.EQUAL_TO_SET?n=cr(o):r===Cn.CONTAINS_ANY_OF_SET?n=fr(o):r===Cn.CONTAINS_ALL_OF_SET?n=sr(o):r===Cn.PART_OF_SET?n=vr(o):r===Cn.STARTS_WITH?n=yr(o):r===Cn.ENDS_WITH?n=Sr(o):r===Cn.CONTAINS_STRING?n=Tr(oEQUAL_TO_BOOLEAN?n=Ar(o):r===Cn.MATCHES_ Ir.GREATER_THAN_OR_EQUAL_TO:case Ir.LESS_THAN_OR_EQUAL_TO:case Ir.BETWEEN:return"DATETIME"===e?Kn:void 0;case Ir.IN_SPLIT_TREATMENT:return jr;default:return}}(t,n);switch(n){case Cr.NUMBER:case Cr.DATETIME:u=e,s=Object(h.o)(u),c=isNaN(s)?void 0:s;break;case Cr.STRING:c=function(t){var e=t;Object(h..matchingKey:void 0);var n=Object(h.p)(e);return n||void 0}ak;case Cr.BOOLEAN:c=function(t){if(!0===t||!1===t)return t;if("string"==typeof t){var e=t.toLocaleLowerCase();if("true"===e)return!0;if("false"===e)return!1}}(e);break;case Cr.NOT_SPECIFIED:c=e;break;default:c=void 0}return l&&(c=l(c,r)),kr.debug(o()(i=o()(a="Attempted to sanitize [".concat(e,"] which should be of type [")).call(a,n,"]. \n Sanitized and processed value => [")).call(i,c instanceof Object?Ot()(c):c,"]")),c},Dr=Object(y.b)("splitio-engine:value");var Mr=function(t,e,n){var r,i=e.attribute,a=function(t,e,n){var r,i=void 0;return e?n?(i=n[e],Dr.debug(o()(r="Extracted attribute [".concat(e,"], [")).call(r,i,"] will be used for matching."))):Dr.warn("Defined attribute [".concat(e,"], no attributes received.")):i=t,i}(t,i,n),c=Lr(e.type,a,e.dataType,n);return void 0!=attribute ".concat(i," "):0,"doesn't match with expected type."))};n(184);function Pr(t){return e=function(t){return(t=Number(t))<0?Math.ceil(t):Math.floor(t)}(t),n=Math.pow(2,32),e-Math.floor(e/n)*n;var e,n}function Fr(t){var e=Pr(t);return e>=Math.pow(2,31)?e-Math.pow(2,32):e}function Gr(t,e){var n=0,r=!0,o=!1,i=void 0;try{for(var a,c=l()(t);!(r=(a=c.next()).done);r=!0){var u=a.value;n=Fr(Fr(31*n)+u.charCodeAt(0))}}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}regSource,Br=Hr.a.stringDestination,Yr=Hr.a.encodeUTF16toUTF8;function zr(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function Vr(t,e){return t<<e|t>>>32-e}function qr(t,e){e=e||0;for(var n,r=(t=t||"").length%4,o=t.length-r,i=e,a=0,c=3432918353,u=461845907,s=0;s<o;s+=4)a=zr(a=255&t.charCodeAt(s)|(255&t.charCodeAt(s+1))<<8|(255&t.charCodeAt(s+2))<<16|(255&t.charCodeAt(s+3))<<24,c),a=zr(a=Vr(a,15),u),i=zr(i=Vr(i^=a,13),5)+3864292196;switch(a=0,r){case 3:a^=(255&t.charCodeAt(s+2))<<16;case 2:a^=(255&t.charCodeAt(s+1))<<8;case 1:a=zr(a^=255&t.charCodeAt(s),c),i^=a=zr(a=Vr(a,15),u)}return i^=t.length,n=i,n=zr(n^=n>>>16,2246822507),n=zr(n^=n>>>13,3266489909),(i=n^=n>>>16)>>>0}functi),e>>>0);var n}var Jr={hash:Qr,bucket:function(t,e){return Math.abs(Qr(t,e)%100)+1}},$r=Object(y.b)("splitio-engine");function Xr(t){return 2===t?Jr.bucket:Ur}var Zr={getTreatment:function(t,e,n,r){var i,a,c,u,s=Xr(r)(t,e),l=n.getTreatmentFor(s);return $r.debug(o()(i=o()(a=o()(c=o()(u="[engine] using algo ".concat(2!==r?"legacy":"murmur"," bucket ")).call(u,s," for key ")).call(c,t," using seed ")).call(a,e," - treatment ")).call(i,l)),l},shouldApplyRollout:function(t,e,n,r){if(t<100&&Xr(r)(e,n)>t)return!1;return!0}};function to(t,e,n,r,o,i){if(t)return{treatment:Zr.getTreatment(e,n,r,i),label:o}}var eo=function(t,e,n,r){return functionRollout(a,o.bucketingKey,c,l))return{treatment:void 0,label:"not in split"};var f=t(o,s,u);return v(f)?f.then((function(t){return to(t,o.bucketingKey,i,e,n,l)})):to(f,o.bucketingKey,i,e,n,l)}},no=Object(y.b)("splitio-engine:combiner");function ro(){return no.error("Invalid Split provided, no valid conditions found"),{treatment:V,label:"exception"}}function oo(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];if(void 0!==r)return no.debug("Treatment found: ".concat(r.treatment)),r}n treatment found.")}var io=function(t){return!Y()(t)||Y()(t)&&0===t.length?ro:function(e,n,r,o,i,a,c){var u=p()(t).call(t,(function(t){return t(e,n,r,o,c,i,a)}));return-1!==Object(h.c)(u,v)?_t.a.all(u).then((function(t){return oo(t)})):oo(u)}},ao=Object(y.b)("splitio-engine:combiner");function co(t){for(var e,n=0,r=t.length;n<r&&t[n];n++);return e=n===r,ao.debug("[andCombinerunction(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=p()(t).call(t,(function(t){return t.apply(void 0,n)}));return-1!==Object(h.c)(o,v)?_t.a.all(o).then(co):co(o)}};var so=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{){var n=Rr(t,e);return function(e,r,o){var i=Mr(e,t,r),a=void 0!==i&&n(i,o);return v(a)?a.then((function(e){return Boolean(e^t.negate)})):Boolean(a^t.negate)}}));if(0===d.length){n=[];break}n.push(eo(uo(d),Bn.parse(f),h,g))}}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return io(n)};function lo(t,e){return{treatment:Object(h.e)(t,"treatment",e),label:Object(h.e)(t,"label","default rule")}}function fo(t,e){if(!(this instanceof fo))return new fo(t,e);var n;this.baseInfo=t,this.evaluator=e,"string"!=typeof(n=this).baseInfo.defaultTreatment&&(n.baseInfo.defaultTreatment=V)}fo.parse=function(t,e){var n=t.conditions;return new fo(In()(t,["conditions"]),so(n,e))},fo.prototype.getKey=function(){return this.baseInfo.name},fo.prototype.getTreatment=function(t,e,n){var r,o,i,a=this.baseInfo,c=a.killed,u=a.seed,s=a.defaultTreatment,l=a.trafficAllocation,f=a.trafficAllocationSeed,p=a.algo;try{r=pn(t)}catch(t){return{treatment:V,label:"exception"}}if(this.isGarbage())o=V,i="archived";else{if(!c){vn((function(t){return lo(t,s)label:i}},fo.prototype.isGarbage=function(){return"ARCHIVED"===this.baseInfo.status},fo.prototype.getChangeNumber=function(){return this.baseInfo.changeNumber};var eption",config:null};function ho(t,e,n,r){var o;try{o=r.splits.getSplit(e)}catch(t){return _t.a.resolve(vo)}return v(o)?o.then((function(e){return yo(e,t,n,r)})):yo o,i={};try{o=r.splits.fetchMany(e)}catch(t){return W()(e).call(e,(function(t){i[t]=vo})),_t.a.resolve(i)}return v(o)?o.then((function(o){return mo(e,o,t,n,r)})):mo(e,o,t,n,r)}function yo(t,e,n,r){var o={treatment:V,label:"definition not found",config:null};if(t){var i=JSON.parse(t),a=po.parse(i,r);if(o=a.getTreatment(e,n,ho),v(o))return o.then((function(t){return t.changeNumber=a.getChangeNumber(),t.config=Object(h.e)(i,"configurations.".concat(t.treatment),null),t}));o.changeNumber=a.getChangeNumber(),o.config=Object(h.e)(i,"configurations.".concat(o.treatment),null)}return o}function mo(t,e,n,r,o){var i={},a=[];return W()(t).call(t,(function(t){var c=yo(e.get(t),n,r,o);v(c)?a.push(c.then((function(e){i[t]=e}))):i[t]=c})),a.length>0?_t.a.all(a).then((function(){return i})):i}function So(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function bo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=So(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=So(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}var To=Object(y.b)("splitio-client:impression-tracker");var Eo=function(t){var e=t.get(t.constants.STORAGE).impressions,n=t.get(t.constants.SETTINGS),r=n.impressionLic=i.hostname,u=n.version;return{track:function(t,n){var i=e.track([t]);if(v(i)&&i.catch((function(t){To.error("Could not store impression. Error: ".concat(t))})),r||o){var s={impression:bo({},t),attributes:n,ip:a,hostname:c,sdkLanguageVersion:u};ge()((function(){o&&o.handleImpression(s);try{r&&r.logImpression(s)}catch(t){To.error("Impression listener logImpression method threw: ".concat(t,"."))}}),0)}}}},Oo=n(116),xo=n.n(Oo);function _o(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ao(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=_o(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=_o(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}var wo=Object(y.b)("splitio-client:impressions-tracker");var No=function(t){var e=t.get(t.constants.STORAGE).impressions,n=t.get(t.constants.SETTINGS),r=n.impressionListener,i=t.get(t.constants.INTEGRATIONS_MANAGER,!0),a=n.runtime,c=a.ip,u=a.hostname,s=n.version,l=[];return{queue:function(t,e){l.push({impression:t,attributes:e})},track:function(){var t=l.length,n=xo()(l).call(l,0,t),a=e.track(p()(n).call(n,(function(t){return t.impression})));if(v(a)&&a.then((function(){var e;wo.debug(o()(e="Successfully stored ".concat(t," impression")).call(e,1===t?"":"s","."))})).catch((function(e){var n,r;wo.error(o()(n=o()(r="Could not store impressions bulk with ".concat(t," impression")).call(r,1===t?"":"s",". Error: ")).call(n,e))})),r||i)for(var f=function(t){var e={impression:Ao({},n[t].impression),attributes:n[t].attributes,ip:c,hostname:u,sdkLanguageVersion:s};ge()((function(){i&&i.handleImpression(e);try{r&&r.logImpression(e)}catch(t){wo.error("Impression listener logImpression method threw: ".concat(t,"."))}}),0)},h=0;h<t;h++)f(h)}}};function Ro(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function ko(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=Ro(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=Ro(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}var Io=Object(y.b)("splitio-client:event-tracker");var Co=function(t){var e=t.get(t.constants.STORAGE).events,n=t.get(t.constants.INTEGRATIONS_MANAGER,!0);function r(t,e){var r,i,a,c,u,s=t.eventTypeId,l=t.trafficTypeName,f=t.key,p=t.value,v=t.timestamp,h=t.properties,g=o()(r=o()(i=o()(a=o()(c=o()(u='event of type "'.concat(s,'" for traffic type "')).call(u,l,'". Key: ')).call(c,f,". Valueies.");return e?(Io.info("Successfully qeued ".concat(g)),n&&ge()((function(){var e=ko({},t);t.properties&&(e.properties=ko({},t.properties)),n.handleEvent(e)}),0)):Io.warn("Failed to queue ".concat(g)),e}return{track:function(t,n){var o=e.track(t,n);return v(o)?o.then(Yt()(r).call(r,null,t)):r(t,o)}}},jo=Object(y.b)("splitio-client");var Lo=function(t){var e=t.get(t.constants.STORAGE),n=t.get(t.constants.COLLECTORS),r=Eo(t),i=No(t),a=Co(t);function c(t,o,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Rn.TaskNames[a?"SDK_GET_TREATMENT_WITH_CONFIG":"SDK_GET_TREATMENT"],u=Rn.start(c,n),l=ho(t,o,i,e);return v(l)?l.then((function(e){return s(e,o,t,i,u,r.track,a,"getTreatment".concat(a?"withConfig":""))})):s(l,o,t,i,u,r.track,a,"getTreatment".concat(a?"withConfig":""))}function u(t,r,o){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Rn.TaskNames[a?"SDK_GET_TREATMENTS_WITH_CONFIG":"SDK_GET_TREATMENTS"],u=Rn.start(c,n),l={},f=function(e){var n;return W(ion(n){l[n]=s(e[n],n,t,o,!1,i.queue,a,"getTreatments".concat(a?"withConfig":""))})),i.track(),u(),l},p=go(t,r,o,e);return v(p)?p.then((function(t){return f(t)})):f(p)}function s(e,n,r,i){var a,c,u,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0,f=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,v=t.get(t.constants.READY,!0)||t.get(t.constants.READY_FROM_CACHE,!0),h=le(r),g=fe(r);v||(e={treatment:V,label:"not ready"});var d=e,y=d.treatment,m=d.label,S=d.changeNumber,b=d.config,T=void 0===b?null:b;return jo.info(o()(a=o()(c=o()(u="Split: ".concat(n,". Key: ")).call(u,h,". Evaluation: ")).call(c,y,". Label: ")).call(a,m)),K(t,n,m,p)&&(jo.info("Queueing corresponding impression."),l({feature:n,keyName:h,treatment:y,time:gn()(),bucketingKey:g,label:m,changeNumber:S}:y}return{getTreatment:c,getTreatmentWithConfig:function(t,e,n){return c(t,e,n,!0)},getTreatments:u,getTreatmentsWithConfig:function(t,e,n){return u(t,e,n,!0)},track:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1024,u=le(e),s=gn()(),l={eventTypeId:r,trafficTypeName:n,value:o,timestamp:s,key:u,properties:i};return Z(n,t,"track"),a.track(l,c)}}};var Do=function(t,e,n){var r="REDIS"!==t.get(t.constants.SETTINGS).storage.type,o=Lo(t),i=o.getTreatment,a=o.getTreatmentWithConfig,c=o.getTreatments,s=o.getTreatmentsWit{var a,c,u=Object(h.n)(i,"getTreatments"),s=e?n:P(n,i),l=u?function(t,e){if(Y()(t)&&t.length>0){var n=[];if(W()(t).call(t,(function(t){var e=U(t);e&&n.push(e)})),n.length)return Object(h.r)(n)}return z.error("".concat(e,": split_names must be a non-empty array.")),!1}(r,i):U(r,i),f=(a=o,c=i,Object(h.j)(a)||null==a?a:(T.error("".concat(c,": attributes must be a plain object.")),!1)),p=et(t);return nt(t,i),{valid:p&&s&&l&&!1!==f,key:s,splitOrSplits:l,attributes:f}}return o.getTreatment=function(t,e,n){var o=f(t,e,n,"getTreatment");return o.valid?i(o.key,o.splitOrSplits,o.attributes):r?V:_t.a.resolve(V)},o.getTreatmentWithConfig=function(t,e,n){var o=f(t,e,n,"getTreatmentWithConfig");return o.valid?a(o.key,o.splitOrSplits,o.attributes):r?u()({},q):_t.a.resolve(u()({},q))},o.getTreatments=function(eatments");if(o.valid)return c(o.key,o.splitOrSplits,o.attributes);var i,a={};return o.splitOrSplits&&W()(i=o.splitOrSplits).call(i,(function(t){return a[t]=V})),r?a:_t.a.resolve(a)},o.getTreatmentsWithConfig=function(t,e,n){var");if(o.valid)return s(o.key,o.splitOrSplits,o.attributes);var i,a={};return o.splitOrSplits&&W()(i=o.splitOrSplits).call(i,(function(t){return a[t]=u()({},q)})),r?a:_t.a.resolve(a)},o.track=function(o,i,a,c,u){var s=e?o:P(o,"track"),f=n?i:$(i,"track"),p=x(a,"track"),v=A(c,"track"),h=C(u,"track"),g=h.properties,d=h.size;return et(t)&&s&&f&&p&&!1!==v&&!1!==g?l(s,f,p,v,g,d):!r&&_t.a.resolve(!1)},o};var Mo=function(t){var e,n,r,i,a,c,u,s=t.get(t.constants.SETTINGS),l=Object(h.e)(s,"core.key",void 0),f=Object(h.e)(s,"core.trafficType",void 0);"localhost"===s.mode&&void 0===l?s.core.key="localhost_key":s.core.key=P(l,"Client instantiation");var p=[s.core.key];if(void 0!==f){var v=$(f,"Client instantiation");s.core.trafficType=v,p.push(v)}var g=Do(t,!0,p.length>1);return g.isBrowserClient=!0,g.getTreatment=Yt()(e=g.getTreatment).call(e,g,s.core.key),g.getTreatmentWithConfig=Yt()(n=g.getTreatmentWithConfig).call(n,g,s.core.key),g.getTreatments=Yt()(r=g.getTreatments).call(r,g,s.core.key),g.getTreatmentsWithConfig=Yt()(i=g.getTreatmentsWithConfig).call(i,g,s.core.key),g.track=(c=Yt()(a=g.track)).call.apply(c,o()(u=[a,g]).call(u,p)),g};var Po=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,c=!1;function u(){for(var n=arguments.length>0&&void 0!==argumeew Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];c||(a=ge()((function(){t.apply(void 0,o()(i).call(i,[u]))}),n))}function s(){clearT,c[e]=c[e]?c[e]+","+n:n})),n(u())},o.onerror=r,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(s,e.headers[s]);o.send(e.body||null)}))};var Go=n(239);function Uo(t){function e(){if("undefined"==typeof Reflect||!ne.a)return!1;if(ne.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(ne()(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=ue()(t);if(e()){var o=ue()(this).constructor;n=ne()(r,arguments,o)}else n=r.apply(this,arguments);return ae()(this,n)}}var Ko=function(t){oe()(n,t);var e=Uo(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Split Error";return mt()(this,n),(t=e.call(this,r)).message=r,t}return n}(n.n(Go)()(Error)),Ho=function(t){oe()(n,t);var e=Uo(n);function n(t){return mt()(this,n),e.call(this,t||"Split Timeout Error")}return n}(Ko),Wo=function(t){oe()(n,t);var e=Uo(n);function n(t,r){var o;return mt()(this,n),(o=e.call(this,t||"Split Network Error")).statusCode=r,o}return n}(Ko),Bo=Object(y.b)("splitio-services:service");function Yo(t){var e=t.url;return(window&&window.fetch||Fo)(e,t).then((function(t){if(!t.ok)throw{response:t};return t})).catch((function(n){var r,i,a=n.response,c="";if(a)switch(a.status){case 404:c="Invalid API key or resource not found.";break;default:c=a.statusText}else c=n.message;a&&403===a.status||Bo[t.logErrorsAsInfo?"info":"error"](o()(r=o()(i="Response status is not OK. Status: ".concat(a?a.status:"NO_STATUS",". URL: ")).call(i,e,". Message: ")).call(r,c));throw new Wo(c,a&&a.status)}))}var zo=Yo;function Vo(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function qo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=Vo(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=Vo(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}var Qo=function(t,e,n){var r=t.core.authorizationKey,o=t.version,i=t.runtime,a=i.ip,c=i.hostname,u={},s={};return u.Accept="application/json",u["Content-Type"]="application/json",u.Authorization="Bearer ".concat(r),u.SplitSDKVersion=o,a&&(u.SplitSDKMachineIP=a),c&&(u.SplitSDKMachineName=c),qo(qo({headers:u,url:t.url(e)},s),n)};function Jo(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function $o(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=Jo(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=Jo(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}function Xo(t,e){var n=d()(t);if(Fe.a){var r=Fe()(t);e&&(r=Me()(r).call(r,(function(e){return Le()(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zo(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)W()(n=Xo(Object(r),!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=Xo(Object(r))).call(o,(function(e){Ne()(t,e,Le()(r,e))}))}}return t}n(164);function ti(t){var e=[],n=t.toJSON();return Object(h.d)(n,(function(t,n){e.push({name:n,delta:t})})),e}var ei=Yo;function ni(t,e){return Qo(t,"/testImpressions/bulk",u()({method:"POST"},e))}function ri(t,e){var n=e.core.labelsEnabled,r=Object(h.g)(t.state(),"feature"),o=[];for(var i in r){var a;o.push({testName:i,keyImpressions:p()(a=r[i]).call(a,(function(t){var e={keyName:t.keyName,treatment:eturn!1;if(ne.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(ne()(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=ue()(t);if(e()){var o=ue()(this).constructor;n=ne()(r,arguments,o)}else n=r.apply(this,arguments);return ae()(this,n)}}var ii=function(){function t(e){var n,r,o;mt()(this,t),this.storage=e,this.latency=Yt()(n=this.lation=Yt()(o=this.countException).call(o,this)}return bt()(t,[{key:"latency",value:function(t){this.storage.metrics.track("".concat(this.metricType,".time"),t)}},{key:"count",value:function(t){var e;this.storage.count.track(o()(e="".concat(this.metricType,".status.")).call(e,t))}},{key:"countException",value:function(){this.storage.count.track("".concat(this.metricType,".exception"))}}]),t}(),ai=function(t){oe()(n,t);var e=oi(n);function n(t){var r;return mt()(this,n),(r=e.call(this,t)).metricType="segmentChangeFetcher",r}rher",r}return n}(ii),ui=function(t){oe()(n,t);var e=oi(n);function n(t){var r;return mt()(this,n),(r=e.call(this,t)).metricType="mySegmentsFetcher",r}return n}(ii),si=function(){function t(e){var n,r,o,i,a;mt()(this,t),this.storage=e,this.ready=Yt()(n=this.ready).call(n,this),this.getTreatment=Yt()(r=this.getTreatment).call(r,this),this.getTreatments=Yt()(o=this.getTreatments).call(o,this),this.getTreatmentWithConfig=Yt()(i=this.getTreatmentWithConfig).call(i,this),this.getTreatmentsWithConfig=Yt()(a=this.getTreatmentsWithConfig).call(a,this)}return bt()(t,[{key:"ready",value:function(t){this.storage.metrics.track("sdk.ready",t)}},{key:"getTreatment",value:function(t){this.storage.metrics.track("sdk.getTreatment",t)}},{key:"getTreatments",value:function(t){this.storage.metrics.track("sdk.getTree.metrics.track("sdk.getTreatmentWithConfig",t)}},{key:"getTreatmentsWithConfig",value:function(t){this.storage.metrics.track("sdk.getTreatmentsWithConfig",t)}}]),t}(),li=Object(y.b)("splitio-metrics"),fi=function(t){var e=0,n=t.get(t.constants.SETTINGS),r=t.get(t.constants.STORAGE),i=function(){if(r.metrics.isEmpty()&&r.count.isEmpty())return _t.a.resolve();li.info("Pushing metrics");var t,e,o,i=Rn.start(Rn.TaskNames.METRICS_PUSH),a=r.metrics.isEmpty()?null:zo(fu({method:"POST"},$o($o({},e),{},{logErrorsAsInfo:!0})))}(n,{body:Ot()((t=r.metrics,e=[],o=t.toJSON(),Object(h.d)(o,(function(t,n){e.push({name:n,latencies:t})})),e))})).then((function(){return r.metrics.clear()})).catch((function(){return r.metrics.clear()})),c=r.count.isEmpty()?null:zo(function(t,e){return Qo(tOST"},Zo(Zo({},e),{},{logErrors)(ti(r.count))})).then((function(){return r.count.clear()})).catch((function(){return r.count.clear()}));return _t.a.all([a,c]).then((function(t){return i(),t}))},a=function(){if(r.impressions.isEmpty())return _t.a.resolve();var t=r.impressions.(t," impressions"));var i=Rn.start(Rn.TaskNames.IMPRESSIONS_PUSH);return ei(ni(n,{body:Ot()(ri(r.impressions,n))})).then((function(){e=0,r.impressions.clear()})).catch((function(n){var i,a;e?(li.warn(o()(i="Droping ".concat(t," impressions after retry. Reason ")).call(i,n,".")),e=0,r.impressions.clear()):(e++,li.warn(o()(a="Failed to push ".concat(t," impressions, keeping data to retry on next iteration. Reason ")).call(a,n,".")))})).then((function(){return i()}))},c=!1,s=!1;return{start:function(){c=Po((function(t){return a().then((function(){return t()}))}),n.schate),s=Po((function(t){return i().then((function(){return t()}))}),n.scheduler.metricsRefreshRate)},flush:fentChanges:new ai(r),splitChanges:new ci(r),mySegments:new ui(r),client:new si(r)}}},pi=Yo;function vi(t,e){return Qo(t,"/events/bulk",u()({method:"POST"},e))}var hi=Object(y.b)("splitio-events"),gi=function(t){var e=t.get(t.constants.SETTINGS),n=t.get(t.constants.STORAGE),r=function(){if(n.events.isEmpty())return _t.a.resolve();hi.info("Pushing ".concat(n.events.state().length," queued events."));var t),pi(vi(e,{body:r})).then(o).catch(o)},o=!1,i=!1,a=function(){return i=Po((function(t){return r().then((function(){return t()}))}),e.schedution(){e.startup.ev(){returshAndResetTimer:function(){return hi.info("Flushing events and reseting timer."),i&&i.reset(),r()}}},di=Yo;function yi(t){return"users="+encodeURIComponent(t)}n(154);var mi=n(79),Si=n.n(mi);function bi(t){var e,n,r=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComp,!0)).call(n,(function(e){Ue()(t,e,r[e])}));else if(Ce.a)ke()(t,Ce()(r));else{var o;W()(o=Ti(Object(r))).call(o,(function(e){Ne()(t,e,Lon Oi(t,e){return di(function(t,e){var n="/auth";if(e){var r=p()(e).call(e,yi).join("&");r&&(n+="?"+r)}return Qo(t,n)}(t,e)).then((function(t){return t.json()})).then((function(t){if(t.token){var e=bi(t.token);if("number"!=typeof e.iat||"number"!=typeof e.exp)throw'token properties "issuedAt" (iat) or "expiration" (exp) are missing or invalid';var n=JSON.parse(e["x-ably-capability"]);return Ei(Ei({},t),{},{decodedToken:e,channels:n})}return t}))}function xi(){return window&&"function"==typeof window.EventSource?window.EventSource:void 0}var _i=function(){function t(e,n,r){mt()(this,t),this.baseMillis=n||t.DEFAULT_BASE_MILLIS,this.maxMillis=r||t.DEFAULT_MAX_MILLIS,this.attempts=0,this.cb=e}return bt()(t,[{key:"scheduleCall",value:function(){var t=this,e=Math.min(this.baseMillis*Math.pow(2,this.age()((function(){t.cb()}),e),this.attempts++,e}},{key:"reset",value:function(){this.attempts=0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=0)}}]),t}();_i.DEFAULT_BASE_MILLIS=1e3,_i.DEFAULT_MAX_MILLIS=18e5;var Ai=_i,wi=function(){function t(e,n){var r,o;mt()(this,t),this.mySegmentsStorage=e,this.mySegmentsProducer=n,this.maxChangeNumber=0,this.segmentList=void 0,this.currentChangeNumber=-1,this.put=Yt()(r=this.put).call(r,this),this.__handleMySegmentUpdateCall=Yt()(o=this.__handleMySegmentUpdateCall).call(o,this),this.backoff=new Ai(this.__handleMySegmentUpdateCall)}return bt()(t,[{key:"__handleMySegmentUpdateCall",value:function(){var t=this;if(this.ma.then((function(n){!1!mber=t,this.handleNewEvent=!0,this.backoff.reset(),this.segmentList=e,this.mySegmentsProducer.isSynchronizingMySegments()||this.__handleMySegmentUpdateCall())}}]),t}(),Ni=function(){function t(e,n,r){var o,i,a;mt()(this,t),this.splitStorage=e,this.splitProducer=n,this.maxChangeNumber=0,this.splitsEventEmitter=r,this.put=Yt()(o=this.put).call(o,this),this.killSplit=Yt()(i=this.killSplit).call(i,this),this.__handleSplitUpdateCall=Yt()(a=this.__handleSplitUpdateCall).call(a,this),this.backoff=new Ai(this.__handleSplitUpdateCall)}return bt()(t,[{key:"__handleSplitUpdateCumber()&&(this.handleNewEvent=!1,this.splitProducer.synchronizeSplits().then((function(){t.handleNewEvent?t.__handleSplitUpdateCall():t.backoff.scheduleCall()})))}},{key:"put",value:function(t){t<=this.splitStorage.getChangeNumber()||t<=this.maxChangeNumber||(this.maxChangeNumber=t,this.handleNewEvent=!0,this.backoff.reset(),this.splitProducer.isSynchronizingSplits()||this.__handleSplitUpdateCall())}},{key:"killSplit",value:function(t,e,n){var r=this;this.splitStorage.killLocally(e,n,t).then((function(e){e&&r.splitsEventEmitter.emit(r.splitsEventEmitter.SDK_SPLITS_ARRIVED,!0),r.put(t)}))}}]),t}(),Ri=/^control_/,ki=function(){function t(e,n){var r;mt()(this,t),this.EventSource=e,this.streamingUrl=n.url("/sse"),this.reopen=Yt()(return bt()(t,null,[{key:"getInstance",value:function(e){var n=xi();if(n)return new t(n,e)}}]),bt()(t,[{key:"sclose(),this.authToken=t;var a=p()(e=d()(t.channels)).call(e,(function(t){var e=Ri.test(t)?"[?occupancy=metrics.publishers]":"";return encodeURIComponent(e+t)})).join(","),c=o()(n=o()(r=o()(i="".concat(this.streamingUrl,"?channels=")).call(i,a,"&accessToken=")).call(r,t.token,"&v=")).call(n,"1.1","&heartbeats=true");this.connection=new this.EventSource(c),this.handler&&(this.connecnmessage=this.handler=this.handler.handleError)}},{key:"close",value:function(){this.connection&&this.connection.close()}},{key:"reopen",value:function(){this.open(this.authToken)}}]),t}(),Ii="STREAMING_DISABLED",Ci="STREAMING_PAUSED",rol_pri$/;var sync:sse-handler");function Mi(t){var e,n,r,o,i,a=(e=t,n=-1,r=!0,o=-1,i=!0,{handleOpen:function(){e.emit("PUSH_CONNECT")},isStreamingUp:function(){return i&&r},handleOccupancyEvent:function(t,o,a){Li.test(o)&&a>n&&(n=a,i&&(0===t&&r?e.emit("PUSH_DISCONNECT"):0===t||r||e.emit("PUSH_CONNECT")),r=0!==t)},handleControlEvent:function(t,n,a)Ii?e.emit("PUSH_DISABLED"):r&&(t===Ci&&i?e.emit("PUSH_DISCONNECT"):t!==ji||i||e.emit("PUSH_CONNECT")),i=t===ji)}});return{handleOpen:function(){a.handleOpen()},handleError:function(e){var n=e;try{n=function(t){return Object(h.k)(t.data)&&(t.parsedData=JSON.parse(t.data)),t}(e)}catch(t){Di.warn("Error parsing SSE error notification: ".concat(t))}t.emit("SSE_ERROR",n)},handleMessage:function(e){var n;try{n=function(t){var e=JSON.parse(t.data);return e.parsedData=JSON.parse(e.data),e.name&&"[meta]occupancy"===e.name&&(e.parsedData.type="OCCUPANCY"),e}(e)}catch(t){return void Di.warn("Error parsing new SSE message notification: ".concat(t))}var r=n,o=r.parsedData,i=r.data,c=r.channel,u=r.timestamp;if(Di.debug("New SSE message received, with data: ".concat(i,".")),a.isStreamingUp()||"OCCUPANCY"===o.type||"CONTROL"===o.type)switch(o.type){case"SPLIT_UPDATE":t.emit("SPLIT_UPDATE",o.changeNumber);break;case"SEGMENT_UPDATE":t.emit("SEGMENT_UPDATE",o.changeNumber,o.segmentName);break;case"MY_SEGMENTS_UPDATE":t.emit("MY_SEGMENTS_UPDATE",o,c);break;case"SPLIT_KILL":t.emit("SPLIT_KILL",o.changeNumber,o.splitName,o.defaultTreatment);break;case"OCCUPANCY":a.handleOccupancyEvent(o.metrics.publishers,c,u);break;case"CONTROL":a.handleControlEvent(o.controlType,c,u)}}}}function Pi(t){return e=Jr.hash(t,0).toString(),btoa(e);var e}var Fi=Object(y.b)("splitio-sync:push-manager");function Gi(t,e){if(n=Fi,xi()?"function"==typeof atob&&"function"==typeof btoa||(n.warn('"atob" and "btoa" functions for Base64 encoding are not available. Falling back to polling mode.'),0):(n.warn("EventSource API is not available. Falling back to polling mode."),0)){var n,r=new ye.a,i=t.get(t.constants.READINESS).splits,c=t.get(t.constants.SETTINGS),s=t.get(t.constants.STORAGE),l=ki.getInstance(c),f=Mi(r);l.setEventHandler(f);var p,v={},h=[],g=!ase),m=new Ai(l.reopen,c.scheduler.streamingReconnectBackoffBase),S=0;r.on("PUSH_DISCONNECT",_),r.on("PUSH_DISABLED",(function(){x(),r.emit("PUSH_DISCONNECT")})),r.on("SSE_ERROR",(function(t){var e,n;l.close(),n=!t.parsedData||400!==t.parsedData.statusCode&&401!==t.parsedData.statusCode?m.scheduleCall():y.scheduleCall();var i=t.parsedData&&t.parsedData.message;Fi.error(o()(e="Fail to connect to streaming".concat(i?', with error message: "'.concat(i,'"'):"",". Attempting to reconnect in ")).call(e,n/1e3," seconds.")),r.emit("PUSH_DISCONNECT")}));var b=t.get(t.constants.PRODUCER),T=new Ni(s.splits,b,i);if(h.push(T),r.on("SPLIT_KILL",T.killSplit),r.on("SPLIT_UPDATE",T.put),e)r.on("MY_SEGMENTS_UPDATE",(function(n,r){var o=r.split("_")[2],i=v[o];if(i&&e[i]){var a=e[i].get(t.constants.MY_SEGMENTS_CHANGE_WORKER,!0);a&&a.put(n.changeNumd?n.segmentList?n.segmentList:[]:void 0)}}));else{var E=new wi(s.segments,b);h.push(E),r.on("SEGMENT_UPDATE",E.put)}return u()(a()(r),{stop:function(){x(),_()},start:O,startNewClient:function(t,e){var n=Pi(t),r=e.get(et(e.constants.PRODi(r.segments,o);h.push(i),e.put(e.constants.MY_SEGMENTS_CHANGE_WORKER,i),ge()((function(){g&&(g=!1,O())}),0)},removeClient:function(t){var e=Pi(t);delete v[e]}})}function O(){p=!1,Fi.info("Connecting to push streaming.");var t=e?d()(e):void 0;Oi(c,t).then((function(n){if(!p){if(y.reset(),m.reset(),!n.pushEnabled)return Fi.info("Streaming is not available. Switching to polling mode."),void r.emit("PUSH_DISCONNECT");if(!(t&&t.length<d()(e).length)){var o=n.decodedToken;l.open(n),function(t,e){S&&clearTimeout(S);var n=e-t-600;Fi.info("Refreshing streaming token in ".concat(n," seconds.")),S=ge()(O,1e3*n)}(o.iat,o.exp)}}})).catch((function(t){var e;if(!p)if(l.close(),r.emit("PUSH_DISCONNECT"),401!==t.statusCode){var n=y.scheduleCall();Fi.error(o()(e='Fail to authenticate for push notifications, with error message: "'.concat(t.message,'". Attempting to reauthenticate in ')).call(e,n/1e3," seconds."))}else Fi.error('Fail to authenticate for push notifications, with error message: "'.concat(ti.info("Disconnecting from push streaming."),l.close(),S&&clearTimeout(S),y.reset(),m.reset()}function _(){W()(h).call(h,(function(t){return t.backoff.reset()}))}}var Ui=Object(y.b)("splitio-producer:task"),Ki=function(t,e){var n=Object(h.f)(t),r=!1;rear i;r||(Ui.debug(o()(i="Starting ".concat(n," refreshing each ")).call(i,e)),r=ug("Running ".concat(n)),t().then((function(){return e()}))}),e))},stop:return t<1?e:new _t.a((function(n,r){var o=ge()(med out because it exceeded the configured time limit of ".concat(t,"ms.")))}),t);e.then((function(t){clearTimeout(o),n(t)}),(function(t){clearTimeout(o),r(t)}))}))},Wi=Yo;function Bi(t,e){return Qo(t,"/splitChanges?since=".concat(e))}var Yi=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=Wi(Bi(t,e)),a=n||o;return i=Rn.start(Rn.TaskNames.SPLITS_FETCH,!!a&&r,i),n&&(i=Hi(t.startup.requestTimeoutBeforeReady,i)),i.then((function(t){return t.json().catch((function(t){throw new Ko(t.message)}))}))},zi=function(t){var e=new Mn.a,n=!0,r=!1,o=void 0;try{for(var i,a=l()(t);!(n=(i=a.next()).done);n=!0){var c=i.value.matcherGroup.matchers,u=!0,s=!1,f=void 0;try{for(var p,v=l()(c);!(u=(p=v.next()).done);u=!0){var h=p.value,g=h.matcherType,d=h.userDefinedSegmentMatcherData;"IN_SEGMENT"===g&&e.add(d.segmentName)}}catch(t){s=!0,f=t}finally{try{u||null==v.return||v.return()}finally{if(s)throw f}}}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e},Vi=Object(y.b)("splitio-producer:split-changes");function qi(t){var e=Ut()(t).call(t,(function(t,e){if("ACTIVE"===e.status){t.added.push([e.name,Ot()(e)]);var n=!0,r=!1,o=void 0;try{for(var i,a=l()(zi(e.conditions));!(n=(i=a.next()).done);n=!0){var c=i.value;t.segments.add(c)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}else t.removed.push(e.name);return t}),{added:[],removed:[],segments:new Mn.a});return e.segments=ht()(e.segments),e}var Qi=Yo;function Ji(t){return Qo(t,"/mySegments/".concat(le(t.core.key)))}var $i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=Qes.MY_SEGMEon(t){return t.json().catch((function(t){throw new Ko(t.message)}))})).then((function(t){var e;return p()(e=t.mySegments).call(e,(function(t){return t.name}))}))},Xi=Object(y.b)("splitio-producer:my-segments");var Zi=Object(y.b)("splitio-producer:mySegmentsHandler"),ta=function(t){var e=t.get(t.constants.SETTINGS),n=t.get(t.constants.STORAGE).splits,r=t.get(t.constants.READINESS),i=r.splits,a=r.segments,c=function(t){var e=t.getAll(),n=e[t.constants.SETTINGS],r=e[t.constants.READINESS],i=e[t.constants.STORAGE],a=e[t.constants.COLLECTORS],c=r.segments,u=!0,s=!0;function l(t){var e=i.segments.resetSegments(t);i.splits.usesSegments()&&(e||u)&&(u=!1,c.emit(c.SDK_SEn function t(){varvoid 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return(r?new _t.a((function(t){l(r),t()})):$i(n,s,a).then((function(t){s=!1,l(t)}))).catch((function(r){var i;return r instanceof Ko||ge()((function(){throw r}),0),s&&n.startup.retriesOnFailureBeforeReady>e?(e+=1,Xi.warn(o()(i="Retrying download of segments #".concat(e,". Reason: ")).call(i,r)),t(e)):(s=!1,!1)}))}}(t),u=Ki(l,e.scheduler.segmentsRefreshRate);i.on(i.SDK_SPLITS_ARRIVED,(function(){if(!f)return;var t=n.usesSegments();t!==u.isRunning()&&(Zi.info("Turning segments data polling ".concat(t?"ON":"OFF",".")),t?u.start():u.stop())})),n.usesSegments()?i.once(i.SDK_SPLITS_ARRIVED,p):ge()(p,0);var s=!1;function l(t){return )}var.constants.READY,!0)||n.usesSegments()||a.emit(a.SDK_SEGMENTS_ARRIVED)}return{start:function(){f=!0,n.usesSegments()&&u.start()},stop:function(){f=!1,u.stop()},isRunning:function(){return f},isSynchronizingMySegments:function(){return s},synchronizeMySegments:l}},ea=Object(y.b)("splitio-producer:updater"),na=function(t){var e=t.get(t.constants.SETTINGS),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAll(),r=n[t.constants.SETTINGS],i=n[t.constants.READINESS],a=n[t.constants.STORAGE],c=n[t.constants.COLLECTORS],u=i.splits,s=!0,l=!0;return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;function i(i){Vi.debug("Spin up split update using since = ".concat(i));var f=Yi(r,i,s,c,e).then((function(t){s=!1;var e=qi(t.splits);return Vi.debug("New splits ".concat(e.added.length)),Vi.debug("Removed splits ".concat(e.removed.length)),Vi.debug("Segment names collected ".concat(e.segments)),_t.a.all([a.splits.addSplits(e.added),a.splits.removeSplits(e.removed),a.splits.setChangeNumber(t.till),a.segments.registerSegments(e.segments)]).then((function(){(i!==t.till||l)&&(l=!1,u.emit(u.SDK_SPLITS_ARRIVED))}))})).catch((function(e){var i;return e instanceof Ko||(ge()((function(){throw e}),0),s=!1),Vi.warn("Error while doing fetch of Splits. ".concat(e)),s&&r.startup.retriesOnFailureBeforeReady>n?(n+=1,Vi.info(o()(i="Retrying download of splits #".concat(n,". Reason: ")).call(i,e)),t(n)):(s=!1,!1)}));return s&&a.splits.checkCache()&&u.emit(u.SDK_SPLITS_CACHE_LOADED),f}var f=a.splits.ghen(i):_t.a.resolve(f);return p.then(i)}}(t),r=Ki(c,e.scheduler.featuresRefreshRate),i=ta,t}))}return{start:function(){ea.info("Starting BROWSER producer"),r.start(),i.start()},stop:function(){ea.info("Stopping BROWSER producer"),r.stop(),i.stop()},isRunning:r.isRunning,isSynchronizingSplits:function(){return a},synchronizeSplits:c,isSynchronizingMySegments:i.isSynchronizingMySegments,synchronizeMySegments:i.synchronizeMySegments}},ra=Object(y.b)("splitio-sync:sync-manager");var oa=Object(y.b)("splitio-client:cleanup"),ia=function(){function t(e){var n;mt()(this,t),this.storage=e.get(e.constants.STORAGE),this.settings=e.get(e.constants.SETTINGS),this.flushData=Yt()(n=this.flushData).call(n,this)}return bt()(t,[{key:"start",value:function(){window&&window.addEventListener&&(oa.debug("Registering flush handler when unload page event is triggered."),window.addEventListener("unload",this.flushData))}},{key:"stop",value:function(){window&&window.removeEventListenge event is triggered."),window.removeEventListener("unload",this.flushData))}},{key:"flushData",value:function(){this._flushImpressions(),this._flushEvents()}},{key:"_flushImpressions",value:function(){var t=this.storage.impressions;if(!t.isEmpty()){var e=this.settings.url("/testImpressions/beacon"),n=ri(t,this.settings);this._sendBeacon(e,n)||ei(ni(this.settings,{body:Ot()(n)})),t.clear()}}},{key:"_flushEvents",value:function(){var t=this.storage.events;if(!t.isEmpty()){var e=this.settings.url("/events/beacon"),n=t.toJSON();this._sendBeacon(e,n)||pi(vi(this.settings,{body:Ot()(n)})),t.clear()}}},{key:"_sendBeacon",value:function(t,e){if(navigator&&navigator.sendBeacon){var n=Ot()({entries:e,token:this.settings.core.authorizationKey,sdk:this.settings.version});return navigator.sendBeacon(t,n)}return!1}}]),t}(),aa={};var ca=function(t,e,n){var r,o=!!n,i=t.get(t.constants.SETTINGS),c=t.get(t.constants.READINESS),s=t.get(t.constants.STORAGE),l=t.get(t.constants.STATUS_MANAGER),f=c.gate,p=c.splits,v=c.segments,g=f.SDK_READY,d=o?void 0:fi(t),y=o?void 0:gi(t),m=o?void 0:new ia(t);switch(i.mode){case"producer":case"standalone":t.put(t.constants.COLLECTORS,d&&d.collectors),o?r=aa[i.core.authorizationKey].shared(t):(r=function(t){var e={},n=t.get(t.constants.SETTINGS),r=s(!1,t),o=n.streamingEnabled?Gi(t,e):void 0,i=t.get(t.constants.PRODUCER);function a(){i.isRunning()?ra.info("Streaming couldn't connect. Continue periodic fetch of data."):(ra.info("Streaming not available. Starting periodic fetch of data."),Object(h.d)(e,(function(t){t.get(t.constants.PRODUCER).start()})))}function c(){i.isRunning()&&(ra.info("PUSH (re)connected. Syncing and stopping periodic fetER).stop()}))),u()}function u(){t.get(t.constants.PRODUCER).synchronizeSplits(),Object(h.d)(e,(function(t){t.get(t.constants.PRODUCER).synchronizeMySegments()}))}function s(t,n){var r=t?ta(n):na(n),s=n.get(n.constants.SETTINGS),l=Object(h.p)(le(s.core.key));return n.put(n.constants.PRODUCER,r),e[l]&&ra.warn("A client with the same user key has already been created. Only the new instance will be properly synchronized."),e[l]=n,{start:function(){o?(t?i.isRunning()?r.start():r.synchronizeMySegments():(u(),o.on("PUSH_CONNECT",c),o.on("PUSH_DISCONNECT",a)),o.startNewClient(l,n)):r.start()},stop:function(){e[l]&&(delete e[l],o&&(o.removeClient(l),t||o.stop()),r.isRunning()&&r.stop())}}}return r.shared=Yt()(s).call(s,null,!0),r}(t),aa[i.core.authorizationKey]=r);break;case"consumer":t.put(t.constants.READY_FROM_CACHE,!0)}if(e&&r&&!o){var S=e.sdkReadyTracker,T=e.splitsReadyTracker,E=e.segmentsReadyTracker;S.setCollectorForTask(d.collectors),f.once(g,S),p.once(p.SDK_SPLITS_ARRIVED,T),v.once(v.SDK_SEGMENTS_ARRIVED,E)}r&&r.start(),d&&d.start(),y&&t.put(t.constants.EVENTS,y)&&y.start(),t.put(t.constants.COLLECTORS,n);var O=u()(a()(l),Mo(t),{destroy:function(){return r&&r.stop(),d&&d.stop(),y&&y.stop(),_t.a.all([d&&d.flush(),y&&y.flush()]).then((function(){c.destroy(),m&&m.stop(),s.destroy&&s.destroy(),t.put(t.constants.DESTROYED,!0),o||(b(i.core.authorizationKey),delete aa[i.core.authorizationKey])}))}});return!o&&m.start(O.destroy),{api:O,metricCollectors:d&&d.collectors}};function ua(t){var e=t.treatment;return lt()(t)?{conditionType:"WHITELIST",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"WHITELIST",negate:!1,whitelistMatcherData:{whitelist:Object(h.k)(lt()(t))?[lt()(t)]:lt()(t)}}]},partitions:[{treatment:e,size:100}],label:"whitelisted ".concat(e)}:{conditionType:"ROLLOUT",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"ALL_KEYS",negate:!1}]},partitions:[{treatment:e,size:100}],label:"default rule"}}var sa={emptyMock:1};function la(t){var e=d()(t);return e.length!==d()(sa).length?(sa=t,!0):gr()(e).call(e,(function(e){var n,r,o=!sa[e],i=(n=sa[e],r=t[e],yn()(n)!==yn()(r)||("string"==typeof n?n!==r:n.treatment!==r.treatment||n.config!==r.config)),a=o||i;return a&&(sa=t),a}))}var fa=function(t){var e=t.features||{};if(!la(e))return!1;var n={};return Object(h.d)(e,(function(t,e){var r=t,o=null;Object(h.j)(t)&&(r=t.treatment,o=t.config||o);var i={};null!==o&&(i[r]=o),n[e]={conditions:[ua({treatment:r})],configurations:i}})),n},pa=Object(y.b)("splitio-producer:offline");var va=function(t,e){var n=e.getAll(),r=n[e.constants.SETTINGS],o=n[e.constants.READINESS],i=n[e.constants.STORAGE];return function(){var e=[],n=null,a={};try{a=t(r)}catch(t){n=t,pa.error("There was an issue loading the mock Splits data, no changes will be applied to the current cache. ".concat(t))}return!n&&a?(pa.debug("Splits data: "),pa.debug(Ot()(a)),Object(h.d)(a,(function(t,n){e.push([n,Ot()({name:n,status:"ACTIVE",killed:!1,trafficAllocation:100,defaultTreatment:"controlt.a.all([i.splits.flush(),i.splits.addSplits(e)]).then((function(){o.splits.emit(o.splits.SDK_SPLITS_ARRIVED),o.segments.emit(o.segments.SDK_SEGMENTS_ARRIVED)}))):_t.a.resolve()}},ha=Yt()(va).call(va,null,fa),ga=function(t){var e=t.get(t.constants.SETTINGS),n=ha(t);return Ki(n,e.schedu,e){var n=!e,r=t.get(t.constants.READINESS),o=t.get(t.constants.STORAGE),i=t.get(t.constants.STATUS_MANAGER);n&&ge()((function(){r.gate.emit(r.gate.SDK_READY)}),0);var c=n?void 0:ga(t);return c&&c.start(),{api:u()(a()(i),Mo(t),{destroy:function(){return c&&c.stop(),r.destroy(),o.destroy&esolve()}}),metricCollect,(function(t){r?n(t):e(t)}))})),a=i.then;return i.then=function(e,o){var c=a"==typeof e&&(n=!0),"function"==typeof o?(r=!0,c):t(c)},i}(t);return o.hasOnFulfilled=function(){return n},o}var ma=Object(y.b)("");function Sa(t){ma.error(t)}function ba(t){var e=arguments.length>1&&void 0!==arguments[1]?argumeants.READINESS).gate,r=0,o=!1,i=!1,c=n.SDK_READY,s=n.SDK_READY_FROM_CACHE,l=n.SDK_UPDATE,f=n.SDK_READY_TIMED_OUT;n.on("removeListener",(function(t){t===c&&r--})),n.on("newListener",(function(t){t!==c&&t!==f||(o?ma.error("A listener was added for ".concat(t===c?"SDK_READY":"SDK_READY_TIMED_OUT"," on the SDK, which has already fired and won't be emitted again. The callback won't be executed.")):t===c&&r++)}));var p=v();function v(){var a=ya(new _t.a((function(u,s){n.once(c,(function(){r!==e||a.hasOnFulfilled()||ma.warn("No listeners for SDK Readiness detected. Incorrect control treatments could have been logged if you called getTreatment/s while the SDK was not yet ready."),t.put(t.constants.READY,!0),o=!0,u()})),n.once(f,(function(e){t.put(t.constants.HAS_TIMEDOUT,!0),i=!0,s(e)}))})),Sa);return a}return n.once(s,(function(){ma.info("Split SDK is ready from cache."),t.put(t.constants.READY_FROM_CACHE,!0)})),u()(a()(n),{Event:{SDK_READY:c,SDK_READY_FROM_CACHE:s,SDK_UPDATE:l,SDK_READY_TIMED_OUT:f},ready:function(){return i?o?_t.a.resolve():ya(_t.a.reject("Split SDK has emitted SDK_READY_TIMED_OUT event."),Sa):p},__context:t})}var Ta=Object(y.b)("splitio-ga-to-split");var Ea,Oa=(Ea={eventTypeId:{event:"eventAction",social:"socialAction"},eventValue:{event:"eventValue",timing:"timingValue"},eventProperties:{pageview:["page"],screenview:["screenName"],event:["eventCategory","eventLabel"],social:["socialNetwork","socialTarget"],timing:["timingCategory","timingVar","timingLabel"],exception:["exDescription","exFatal"]}},function(t){var e=t.get("hitType"),n=t.get(Ea.eventTypeId[e]||"hitType"),r=t.get(Ea.eventValue[e]),o={},i=Ea.eventProperties[e];if(i)for(var a=0;a<i.length;a++)o[i[a]]=t.get(i[a]);return{eventTypeId:n,value:r,properties:o,timestamp:gn()()}});var xa=/^[^a-zA-Z0-9]+/,_a=/[^-_.:a-zA-Z0-9]+/g;var Aa=function(t,e,n){var r,i,a,c={prefix:"ga",identities:n.key&&n.trafficType?[{key:n.key,trafficType:n.trafficType}]:void 0};r="splitTracker",i=function n(r,i){mt()(this,n);var a=u()({},c,t,i);this.tracker=r;var s=function(t){if(!Y()(t))return[];var e=Object(h.q)(t);return Me()(e).call(e,(function(t){if(!t)return!1;var e=t.key,n=t.trafficType;return!(!Object(h.k)(e)&&!Object(h.i)(e)||!Object(h.k)(n))}))}(a.identities);if(0!==s.length){var l=s.length-a.identities.length;l&&Ta.warn("".concat(l," identities were discarded because they are invalid or duplicated. Identities must be an array of objects with key and trafficType.")),a.identities=s,Object(h.k)(a.prefix)||(Ta.warn("The provided `prefix` was ignored since it is invalid. Please check that you are passing a string object as `prefix`."),a.prefix=void 0);var f=r.get("sendHitTask");r.set("sendHitTask",(function(t){var n;if(f(t),!1!==a.hits&&!t.get("splitHit")){try{if(Me()(a)&&!Me()(a).call(a,t))return}catch(t){return void Ta.warn("GaToSplit custom filter threw: ".concat(t))}var r,i=Oa(t);if(a.mapper){try{i=a.mapper(t,i)}catch(t){return void Ta.warn("GaToSplit custom mapper threw: ".concat(t))}if(!i)return}a.prefix&&(i.eventTypeId=o()(n="".concat(a.prefix,".")).call(n,i.eventTypeId)),i.eventTypeId=function(t){if(!Object(h.k)(t)||0===t.length)return t;var e=t.replace(xa,"").replace(_a,"_"),n=Si()(e).call(e,0,80);return n.length<e.length&&Ta.warn("EventTypeId was truncated because it cannot be more than 80 characters long."),n}(i.eventTypeId),function(t){return!(!x(t.eventTypeId,"splitio-ga-to-split:mapper")||!1===A(t.value,"splitio-ga-to-split:mapper")||!1===C(t.properties,"splitio-ga-to-split:mapper").properties||t.timestamp&&!Object(h.i)(t.timestamp)||t.key&&!1===P(t.key,"splitio-ga-to-split:mapper")||t.trafficTypeName&&!1===$(t.trafficTypeName,"splitio-ga-to-split:mapper"))}(i)&&(i.key&&i.trafficTypeName?e.events.track(event):W()(r=a.identities).call(r,(function(t){var n=u()({key:t.key,trafficTypeName:t.trafficType},i);e.events.track(n)})))}})),Ta.info("Started GA-to-Split integration")}else Ta.warn("No valid identities were provided. Please check thaticsObject||"ga",window[a]=window[a]||function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(window[a].q=window[a].q||[]).push(e)},window[a]("provide",r,i)},wa=(n(480),Object(y.b)("splitio-split-to-ga")),Na=function(){function t(e){if(mt()(this,t),"function"!=typeof t.getGa())return wa.warn("`ga` command queue not found. No hits will be sent."),{};this.trackerNames=t.defaultTrackerNames,e&&("function"==typeof Me()(e)&&(this.filter=Me()(e)),"function"==typeof e.mapper&&(this.mapper=e.mapper),Y()(e.trackerNames)&&(this.trackerNames=Object(h.r)(e.trackerNames)),this.impressions=e.impressions,this.events=e.events),wa.info("Started Split-to-GA integration")}return bt()(t,null,[{key:"defaultMapper",value:function(t){var e=t.type,n=t.payload;switch(e){case"IMPRESSION":return{hitType:"event",eventCategory:"split-impression",eventAction:"Evaluate "+n.impression.feature,eventLabel:"Treatment: "+n.impression.treatment+". Targeting rule: "+n.impression.label+".",nonInteraction:!0};alue:n.value,nonInteraction:!0}}return null}},{key:"getGa",value:function(){return"undefined"!=typeof window?window[window.GoogleAnalyticsObject||"ga"]:void 0}},{key:"validateFieldsObject",value:function(t){return!(!t||!t.hitType)||(wa.warn("your custom mapper returned an invalid FieldsObject instance. It must be an object with at least a `hitType` field."),!1)}}]),bt()(t,[{key:"queue",value:function(e){var n=t.getGa();if(n){var r,o;if(!1===this.impressions&&"IMPRESSION"===e.type)return;if(!1===this.events&&"EVENT"===e.type)return;try{var i;if(Me()(this)&&!Me()(i=this).call(i,e))return;if(o=t.defaultMapper(e),this.mapper&&(!(o=this.mapper(e,o))||!t.validateFieldsObject(o)))return}catch(t){return void wa.warn("SplitToGa queue method threw: ".concat(t,". No hit was sent."))}W()(r=this.trackerNames).call(r,(function(t){var e=t?"".concat(t,".send"):"send";o.splitHit=!0,n(e,o)}))}}}]),t}();Na.defaultTrackerNames=[""];var Ra=Na,ka=function(t){var e,n=t.get(t.constants.SETTINGS),r=[];if(W()(e=n.integrations).call(e,(function(e){var o;switch(e.type){case"GOOGLE_ANALYTICS_TO_SPLIT":var i=t.get(t.constants.STORAGE),a=n.core;o=Aa(e,i,a);break;case"SPLIT_TO_GOOGLE_ANALYTICS":o=new Ra(e)}o&&o.queue&&r.push(o)})),0!==rl(r,(function(e){return e.queue({type:"IMPRESSION",payload:t})}))},handleEvent:function(t){W()(r).call(r,(function(e){return e.queue({type:"EVENT",payload:t})}))}}},Ia=Object(y.b)("splitio"),Ca=function(t,e){var n,r;return o()(n=o()(r="".concat(t.matchingKey?t.matchingKey:t,"-")).call(r,t.bucketingKey?t.bucketingKey:t,"-")).call(n,void 0!==e?e:"")};e.default=function(t){var e={},n={splitsReadyTracker:Rn.start(Rn.TaskNames.SPLITS_READY),segmentsReadyTracker:Rn.start(Rn.TaskNames.SEGMENTS_READY),sdkReadyTracker:Rn.start(Rn.TaskNames.SDK_READY)},r=new fn,i=sn(t);r.put(r.constants.SETTINGS,i),function(t){var e,n=!1;null==t?m.error("Factory instantiation: you passed a null or undefined api_key, api_key must be a non-empty string."):Object(h.k)(t)?t.length>0?n=t:m.error("Factory instantiation: you passed an empty api_key, api_key must be a non-empty string."):m.error("Factory instantiation: you passed an invalid api_key, api_key must be a non-empty string."),n&&(S[n]?(m.warn(o()(e="Factory instantiation: You already have ".concat(S[n]," ")).call(e,1===S[n]?"factory":"factories"," with this API Key. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application.")),S[n]++):(S[n]=1,d()(S).length>1&&m.warn("Factory instantiation: You already have an instance of the Split factory. Make sure you definitely want this additional instance. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application.")))}(i.core.authorizationKey);var a=Ae(),c=a(i.startup.readyTimeout);r.put(r.constants.READINESS,c);var u=ba(r);r.put(r.constants.STATUS_MANAGER,u);var s=ve(r);r.put(r.constants.STORAGE,s);var l=ka(r);r.put(r.constants.INTEGRATIONS_MANAGER,l);var f="localhost"===i.mode?da:ca,p=f(r,n),v=p.api,g=p.metricCollectors,b=at(s.splits,r),T=pn(i.core.key),E=Ca(T,i.core.trafficType);return e[E]=v,Ia.info("New Split SDK instance created."),{client:function(t,n){if(void 0===t)return Ia.debug("Retrieving default SDK client."),v;if("function"!=typeof s.shared)throw"Shared Client not supported by the storage mechanism. Create isolated instances instead.";var o,c=P(t,"Shared Client instantiation");if(!1===c)throw"Shared Client needs a valid key.";if(void 0!==n&&!1===(o=$(n,"Shared Client instantiation")))throw"Shared Client needs a valid traffic type or no traffic type at all.";var u=Ca(c,o);if(e[u])Ia.debug("Retrieving existing SDK client.");else{var l=i.overrideKeyAndTT(c,o),p=new fn,h=a(l.startup.readyTimeout);p.put(r.constants.READY_FROM_CACHE,r.get(r.constants.READY_FROM_CACHE,!0)),p.put(r.constants.READINESS,h),p.put(r.constants.STATUS_MANAGER,ba(p,-s.shared(l)),e[u]=f(p,!1,g).api,Ia.info("New shared client instance created.")}return e[u]},manager:function(){return Ia.info("Manager instance retrieved."),b},Logger:y.a,settings:i}}}]).default}));