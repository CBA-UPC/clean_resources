"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[4820],{66271:function(e,n,r){r.d(n,{n:function(){return se},Z:function(){return de}});var t=r(17592),i=r(57829),a=r(75908),o=r(9289),l=r(19860),s=r(24813),d=r(60250),c=r(70455),u=r(47196),h=r(61689),f=r(47131),p=r(91345),x=r(52386),g=r(46417);function v(){var e=(0,x.Z)().selectedMedia;return(0,g.jsx)(f.Z,{"aria-label":"Media Details",color:"inherit",onClick:function(){(0,p.nt)("bucketMediaDetails")},disabled:1!==e.size,id:"details-button","data-test":"details-button",children:(0,g.jsx)(h.Z,{title:"Details",arrow:!0,children:(0,g.jsx)(u.Z,{})})})}var m=r(81578),b=r(61776);function Z(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v,{}),(0,g.jsx)(m.Z,{}),(0,g.jsx)(b.Z,{})]})}function j(){var e=(0,l.Z)();return(0,s.Z)(e.breakpoints.down("sm"))?null:(0,g.jsx)(Z,{})}var w=r(97373),k=r(90297),y=r(90891),M=r(57451),S=r(58467),I=r(2493);function P(e){var n=e.displayDrawerToggle,r=(0,l.Z)(),t=(0,S.bS)("/bucket/:bucketId/media/:mediaId/editor"),i=(0,S.s0)(),a=(0,s.Z)(r.breakpoints.up("md")),o=(0,s.Z)(r.breakpoints.down("sm")),d=!a&&!o,c="main"===(0,k.l)(p.nt)||t;return n?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(M.Z,{lgUp:!0,children:(0,g.jsx)(f.Z,{color:"inherit",onClick:function(){(0,p.nt)(c?null:"main"),t&&i(-1)},id:"appbar-drawer-toggle",disableRipple:!0,disableTouchRipple:!0,"aria-label":c?"Close Menu":"Open Menu","data-test":"appbar-drawer-toggle",size:"large"})}),(0,g.jsxs)(y.Z,{"aria-label":"Photobucket Homepage",href:"/",id:"appbar-logo","data-test":"appbar-logo",sx:{alignSelf:"center"},children:[(0,g.jsx)(M.Z,{mdDown:!0,children:"dark"===r.palette.mode?(0,g.jsx)(I.Z,{width:"160px",color:"white"}):(0,g.jsx)(I.Z,{width:"160px"})}),d&&(0,g.jsx)(I.Z,{width:"100px"})]})]}):(0,g.jsxs)(y.Z,{"aria-label":"Photobucket Homepage",href:"/",id:"appbar-logo","data-test":"appbar-logo",sx:{alignSelf:"center"},children:[(0,g.jsx)(M.Z,{mdDown:!0,children:"dark"===r.palette.mode?(0,g.jsx)(I.Z,{width:"160px",color:"white"}):(0,g.jsx)(I.Z,{width:"160px"})}),!a&&(0,g.jsx)(I.Z,{width:"100px"})]})}function E(e){var n=e.currentBucketMenu,r=e.displayDrawerToggle,t=e.iconMenu,u=(0,l.Z)(),h=(0,s.Z)(u.breakpoints.down("lg")),f=(0,d.Z)().selectedModeEnabled;return(0,g.jsx)(a.Z,{position:"static",elevation:0,color:"inherit",sx:{borderBottom:"1px solid #dfdfdf",color:u.palette.primary.main,alignItems:"center"},children:(0,g.jsxs)(o.Z,{disableGutters:h,sx:{padding:{xs:"10px"},justifyContent:"space-between",width:"100%",maxWidth:t?"100%":u.breakpoints.values.xl},children:[(0,g.jsxs)(i.Z,{sx:{display:"flex",flex:1},children:[!f&&(0,g.jsx)(P,{displayDrawerToggle:r}),f&&(0,g.jsx)(c.Z,{})]}),t&&(0,g.jsx)(j,{}),(0,g.jsx)(w.Z,{currentBucketMenu:n})]})})}P.defaultProps={displayDrawerToggle:!0},E.defaultProps={currentBucketMenu:!0,displayDrawerToggle:!0,iconMenu:!0};var T=r(1413),D=r(29439),B=r(61511),C=r(8586),U=r(99115),A=r(50494),F=r(46923),L=r(9019),R=r(61113),z=r(16783),O=r(52769),Q=r(98492),W=r(41872),Y=r(20201),_=r(36241),q=r(70816),H=r.n(q),N=r(47313),G=r(28422),X=r(75909),J=r(60790),V=r(25258),K=r(88777);function $(){var e,n,r,t,a=(0,x.Z)().selectedMedia,o=(0,S.UO)().mediaId,l=Array.from(a.keys()),s=(0,Y.Z)(),d=(0,N.useState)({}),c=(0,D.Z)(d,2),u=c[0],h=c[1],v=(0,k.l)(p.nt),m=(0,N.useState)(!0),b=(0,D.Z)(m,2),Z=b[0],j=b[1],w=function(){var e=(0,K.Z)().createAlert,n=(0,J.D)(G.XM9,{onError:function(n){n.graphQLErrors.forEach((function(n){var r;null!==(r=n.extensions)&&void 0!==r&&r.code&&e(n.message,"error",n)})),n.graphQLErrors||(V.Z.error(n),e("There was a problem updating your media. Please try again later."))},onCompleted:function(){e("Success: Item details have been updated!","success"),V.Z.info("success")}}),r=(0,D.Z)(n,2);return{mutation:r[0],results:r[1]}}().mutation,y=(0,B.x)(),M=null!==(e=l[0])&&void 0!==e?e:o,I=y.readFragment({id:"BucketMedia:".concat(M),fragment:G.ACw});(0,N.useEffect)((function(){var e,n;h({title:null!==(e=null===I||void 0===I?void 0:I.title)&&void 0!==e?e:"",description:null!==(n=null===I||void 0===I?void 0:I.description)&&void 0!==n?n:""})}),[I]);var P=function(e){var n=(0,T.Z)({},u);n[e.target.name]=e.target.value,h(n)},E=function(e){if(e.preventDefault(),I){var n={bucketId:I.bucketId,mediaId:I.id,data:u};w({variables:n})}},q=return I?(0,g.jsxs)(F.ZP,{anchor:"right",open:"bucketMediaDetails"===v,onClose:q,sx:{flexShrink:0,"& .MuiDrawer-paper":{width:_.isMobile?void 0:400}},elevation:0,variant:o&&!_.isMobile?"persistent":"temporary",children:[(0,g.jsxs)(L.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{padding:2},children:[(0,g.jsx)(R.Z,{sx:{fontSize:18,color:"#081230"},"data-test":"image-details-drawer",children:"Details"}),(0,g.jsx)(f.Z,{onClick:q,"data-test":"close",size:"large",children:(0,g.jsx)(C.Z,{})})]}),(0,g.jsxs)(L.ZP,{container:!0,direction:"row",alignItems:"center",sx:{borderTop:"1px solid #EAEAEA",borderBottom:"1px solid #EAEAEA",color:"#9195A4",padding:s.spacing(2)},children:[(0,g.jsx)(U.Z,{fontSize:"small"}),(0,g.jsx)("span",{style:{marginLeft:"10px"},"data-test":"username",children:I.userId})]}),(0,g.jsxs)("div",{style:{padding:16},children:[(0,g.jsx)(i.Z,{mb:2,children:(0,g.jsx)(z.Z,{"data-test":"title",label:"Item Title",placeholder:"Item Title",variant:"outlined",fullWidth:!0,onChange:P,name:"title",onBlur:E,disabled:!0,value:null!==(n=u.title)&&void 0!==n?n:""})}),(0,g.jsx)(i.Z,{mb:2,children:(0,g.jsx)(z.Z,{"data-test":"description",label:"Item Description",placeholder:"Item Description",variant:"outlined",multiline:!0,rows:4,fullWidth:!0,onChange:P,name:"description",onBlur:E,disabled:!0,value:null!==(r=u.description)&&void 0!==r?r:""})})]}),(0,g.jsxs)(O.Z,{expanded:Z,onChange:sx:{boxShadow:"none","&:before":{display:"none"}},children:[(0,g.jsx)(Q.Z,{expandIcon:(0,g.jsx)(A.Z,{}),sx:{background:Z?"rgba(6, 114, 203, 0.08)":"",color:Z?"#0672CB":""},children:(0,g.jsx)(R.Z,{children:"More Details"})}),(0,g.jsx)(W.Z,{children:(0,g.jsxs)("div",{style:{padding:16},children:[I.dateTaken&&(0,g.jsxs)(L.ZP,{container:!0,sx:{padding:s.spacing(.25,0)},children:[(0,g.jsx)(R.Z,{sx:{paddingRight:"5px",fontWeight:800},variant:"overline",children:"Date Taken:"}),(0,g.jsx)("div",{children:(0,g.jsx)(R.Z,{sx:{color:"#2F364E",paddingLeft:"5px",fontStyle:"italic",textTransform:"none"},variant:"overline",children:H()(I.dateTaken).format("MMM D[,] YYYY [at] LT")})})]}),(0,g.jsxs)(L.ZP,{container:!0,sx:{padding:s.spacing(.25,0)},children:[(0,g.jsx)(R.Z,{sx:{paddingRight:"5px",fontWeight:800},variant:"overline",children:"Original Filename:"}),(0,g.jsx)("div",{children:(0,g.jsx)(R.Z,{sx:{color:"#2F364E",paddingLeft:"5px",fontStyle:"italic",textTransform:"none"},variant:"overline",children:I.filename})})]}),(0,g.jsxs)(L.ZP,{container:!0,sx:{padding:s.spacing(.25,0)},children:[(0,g.jsx)(R.Z,{sx:{paddingRight:"5px",fontWeight:800},variant:"overline",children:"File Size:"}),(0,g.jsx)("div",{children:(0,g.jsx)(R.Z,{sx:{color:"#2F364E",paddingLeft:"5px",fontStyle:"italic",textTransform:"none"},variant:"overline",children:(0,X.Z)(null!==(t=I.fileSize)&&void 0!==t?t:0)})})]}),I.width&&I.height&&(0,g.jsxs)(L.ZP,{container:!0,sx:{padding:s.spacing(.25,0)},children:[(0,g.jsx)(R.Z,{sx:{paddingRight:"5px",fontWeight:800},variant:"overline",children:"Image Size:"}),(0,g.jsx)("div",{children:(0,g.jsxs)(R.Z,{sx:{color:"#2F364E",paddingLeft:"5px",fontStyle:"italic",textTransform:"none"},variant:"overline",children:[I.width,"px x ",I.height,"px"]})})]})]})})]})]}):null}var ee=r(42832),ne=r(99881);function re(e){var n=e.id,r=e.message,t=e.severity,i=e.removeAlert,a=(0,N.useRef)(i);(0,N.useEffect)((,[n]);return(0,g.jsx)(ne.Z,{onClose:elevation:6,variant:"filled",severity:t,children:r})}function te(){var e=(0,k.l)(p.sh),n=function(e){var n=(0,p.sh)().filter(();(0,p.sh)(n)};return(0,g.jsx)(ee.Z,{sx:{position:"absolute",bottom:24,left:24},spacing:2,children:e.map((function(e){return(0,g.jsx)(re,{id:e.id,removeAlert:n,message:e.message,severity:e.severity},e.id)}))})}var ie=r(69405),ae=r(17455),oe=(0,t.ZP)("main")({display:"flex",flex:1,overflowX:"hidden",flexDirection:"column",position:"relative"}),le=(0,t.ZP)("div")(();function se(e){var n=e.children;return(0,ie.Z)().loading?(0,g.jsx)(ae.Z,{}):(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,g.jsx)(le,{children:(0,g.jsx)(oe,{id:"main",children:n})}),(0,g.jsx)(te,{}),(0,g.jsx)($,{})]})}function de(e){var n=e.children;return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[(0,g.jsx)(E,{}),(0,g.jsx)(le,{children:(0,g.jsx)(oe,{id:"main",children:n})}),(0,g.jsx)(te,{}),(0,g.jsx)($,{})]})}},81578:function(e,n,r){r.d(n,{Z:function(){return Z}});var t=r(42996),i=r(47131),a=r(61689),o=(r(85281),r(15861)),l=r(64687),s=r.n(l),d=r(61511),c=r(31881),u=r.n(c),h=r(58585),f=r.n(h),p=r(16031),x=r(36241),g=r(28422),v=r(25258);var m=r(52386),b=r(46417);function Z(e){var n=e.media,r=(0,m.Z)().selectedMedia,l=function(){var e=(0,d.x)(),n=function(n){var r=e.readFragment({id:"BucketMedia:".concat(n),fragment:g.gFb});if(null!==r&&void 0!==r&&r.signedUrl)if(x.isMobile)window.open(r.signedUrl,"_blank");else{var t=document.createElement("a");t.href=r.signedUrl,t.download=r.signedUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},r=function(){var n=(0,o.Z)(s().mark((function n(r,t,i){var a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.map(function(){var n=(0,o.Z)(s().mark((function n(r){var t,i,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(t=e.readFragment({id:"BucketMedia:".concat(r),fragment:g.gFb}))&&void 0!==t&&t.signedUrl){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,u().get(t.signedUrl,{responseType:"blob"});case 5:i=n.sent,a=new Blob([i.data],{type:t.mediaType}),f()(a,t.filename);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.next=3,Promise.all(a);case 3:v.Z.debug("Batch ".concat(t," of ").concat(i),(new Date).toISOString());case 4:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),t=function(){var e=(0,o.Z)(s().mark((function e(n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.pop()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(o,i,a);case 5:return e.next=7,t(n,i+1,a);case 7:case"end":return e.stop()}}),e)})));return (),i=function(){var e=(0,o.Z)(s().mark((function e(r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==r.length){e.next=3;break}return n(r[0]),e.abrupt("return");case 3:return i=(0,p.chunk)(r,5),e.next=6,t(i,1,i.length);case 6:case"end":return e.stop()}}),e)})));return ();return{downloadMedia:i}}(),c=l.downloadMedia,h=n?[n.id]:Array.from(r.keys());return(0,b.jsxs)(i.Z,{disabled:!h.length,onClick:color:"primary","aria-label":"Download","data-test":"download",id:"download-button",children:[false,(0,b.jsx)(a.Z,{title:"Download Media",arrow:!0,children:(0,b.jsx)(t.Z,{})})]})}Z.defaultProps={media:null}},61776:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(93433),i=r(29439),a=r(61511),o=r(96420),l=r(15472),s=r(85281),d=r(47131),c=r(61689),u=r(58467),h=r(16031),f=r(47313),p=r(28422),x=r(88777),g=r(52386),v=r(46417);function m(e){var n=e.media,r=(0,g.Z)(),m=r.selectedMedia,b=r.clearSelectedMedia,Z=n?[n.id]:Array.from(m.keys()),j=(0,x.Z)().createAlert,w=(0,a.x)(),k=(0,f.useState)([]),y=(0,i.Z)(k,2),M=y[0],S=y[1],I=(0,u.UO)().shareId,P=(0,o.t)(p.j2H,{fetchPolicy:"no-cache",onError:function(e){e.graphQLErrors.length?e.graphQLErrors.forEach((function(e){j(e.message,"error",e)})):j("There was a problem retrieving your image. Please try again later.")},onCompleted:function(e){var n=e.bucketMediaByShareIds;if(n){var r=[];if(n.forEach((function(e){var n=e.signedUrl;n&&r.push(encodeURIComponent(n))})),r.push.apply(r,(0,t.Z)(M)),!(0,h.isEmpty)(r)){var i="https://www.printshoplab.com/prints/quick-order?source=".concat(r.join(";"));window.open(i,"_blank")}b()}}}),E=(0,i.Z)(P,2),T=E[0],D=E[1];return(0,v.jsxs)(d.Z,{"aria-label":"Order Prints",disabled:(0,h.isEmpty)(Z),onClick:function(){if(I&&Z.length){var e=[],r=[];Z.forEach((function(t){var i=w.readFragment({id:"BucketMedia:".concat(t),fragment:p.ACw});if(null!==n&&void 0!==n&&n.imageUrl&&null!==i&&void 0!==i&&i.filename.toLowerCase().includes(".heic")){var a=n.imageUrl;e.push(encodeURIComponent(a))}else null!==i&&void 0!==i&&i.isVideo||r.push(t)})),S(e),T({variables:{shareId:I,mediaIds:r}})}},color:"inherit","data-test":"order-prints",id:"order-prints-button",children:[D.loading&&(0,v.jsx)(s.Z,{size:20}),!D.loading&&(0,v.jsx)(c.Z,{title:"Buy Prints",arrow:!0,children:(0,v.jsx)(l.Z,{})})]})}m.defaultProps={media:null}},88777:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(93433),i=r(90297),a=r(18248),o=r(91345);function l(){var e=(0,i.l)(o.sh);return{createAlert:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=n,d=null===(r=(null===l||void 0===l?void 0:l.extensions).http)||void 0===r?void 0:r.status;switch(d){case 400:s="Bad request. Please check your request and try again.";break;case 401:s="You are not authenticated. Please log in to continue.";break;case 403:s="You do not have permission to perform this action.";break;case 404:s="The requested resource was not found.";break;case 408:s="Request timeout. Please try again later.";break;case 500:s="Internal server error. Please try again later.";break;case 502:s="Bad gateway. Please try again later.";break;case 503:s="Service unavailable. Please try again later.";break;case 504:s="Gateway timeout. Please check your network connection."}var c={id:(0,a.Z)(),message:s,severity:i};(0,o.sh)([].concat((0,t.Z)(e),[c]))}}}},69405:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(72668),i=r(16031),a=r(58467),o=r(28422),l=r(25258),s=r(88777);function d(e){var n,r,d,c,u,h=(0,a.UO)(),f=null!==e&&void 0!==e?e:null===h||void 0===h?void 0:h.shareId,p=(0,s.Z)().createAlert,x=(0,t.a)(o.PNB,{skip:!f,variables:{shareId:f},onError:function(e){e.graphQLErrors.length?e.graphQLErrors.forEach(():(p("There was a problem retrieving your share media. Please try again later."),l.Z.error(e))}}),g=null!==(n=null===(r=x.data)||void 0===r||null===(d=r.bucketMediaByShareId)||void 0===d?void 0:d.items)&&void 0!==n?n:[],v=null===(c=x.data)||void 0===c||null===(u=c.bucketMediaByShareId)||void 0===u?void 0:u.nextToken;return{items:g,loading:!x.called||x.loading,fetchMore:(0,i.debounce)((function(){v&&x.fetchMore({variables:{nextToken:v}})}),500,{leading:!0}),nextToken:v}}},52386:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(99146),i=r(90297),a=r(16031),o=r.n(a),l=r(25258),s=(0,t.QS)(new Map),d=(0,t.QS)(!1);function c(){var e=(0,i.l)(s),n=(0,i.l)(d),r=n||e.size>0,t=function(n,r){r?e.set(n,!0):e.delete(n)};return{clearSelectedMedia:function(){s(new Map),d(!1)},selectedMedia:e,selectedModeEnabled:r,selectMedia:function(n,r){null!==r&&void 0!==r&&r.replace&&e.clear(),e.set(n,!0),s(new Map(e))},toggleBulkSelectMedia:function(n,r){var i=Array.from(e.keys())[e.size-1][0],a=o().findIndex(r,(function(e){return e.id===i})),d=o().findIndex(r,(),c=-1===a?0:a,u=!e.get(n);if(l.Z.debug("Bulk: From %s to %s: %s",c,d,u),d<=c)for(var h=c;h>=d;h-=1)l.Z.debug("Bulk: Selected numbers: %s %s %s",h,r[h],u),t(r[h].id,u);else for(var f=c;f<=d;f+=1)l.Z.debug("Bulk: Selected numbers: %s %s %s",f,r[f],u),t(r[f].id,u);s(new Map(e)),l.Z.debug("Updated Selected Media: ",JSON.stringify(e))},toggleSelectionMode:toggleSelectMedia:function(n){e.get(n)?e.delete(n):e.set(n,!0),s(new Map(e))},unSelectMedia:function(n){e.delete(n),s(new Map(e))}}}},13549:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(36241);function i(e){var n,r,i,a,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(null!==e&&void 0!==e&&e.imageUrl){var s=null!==(n=e.width)&&void 0!==n?n:1/0,d={width:null!==(r=null===(i=e.width)||void 0===i?void 0:i.toString())&&void 0!==r?r:"590",height:null!==(a=null===(o=e.height)||void 0===o?void 0:o.toString())&&void 0!==a?a:"590",fit:"bounds"};if(l<=590&&s>=590&&(d.width="590",d.height="590"),l<=320&&s>=320&&(d.width="320",d.height="320"),!t.isMobile&&l>320&&s>=320){var c={width:"320",height:"320",fit:"bounds"},u=new URLSearchParams(c).toString(),h=new Image;h.src="".concat(e.imageUrl,"?").concat(u)}var f=new URLSearchParams(d).toString();return"".concat(e.imageUrl,"?").concat(f)}}},28662:]);