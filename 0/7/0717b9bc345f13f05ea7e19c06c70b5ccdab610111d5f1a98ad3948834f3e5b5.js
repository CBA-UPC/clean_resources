import{r as i,h as t,B as e,H as n}from"./p-7fd8f7d4.js";import{L as s,a as l,b as o,g as r,c as a}from"./p-1ce46c47.js";import{D as d,b as u,H as c,C as h,L as v,e as p,W as g,f as m,g as f,h as b,F as x,U as w,c as k,i as y,j as I,R as L,G as C}from"./p-10e6f328.js";import{F as P}from"./p-5dea3dd1.js";import{F as A,M as R}from"./p-b8a3ebf0.js";import{A as q,C as F}from"./p-30014926.js";import{M as W,B as D}from"./p-f53bc80b.js";const j=class{constructor(t){i(this,t);this.attractionsResult=undefined;this.visible=undefined}async componentWillLoad(){this.requestService=d.get(u);return new Promise((async i=>{var t;await d.get(u).initializationFinished;if(!this.requestService.attractions)i();(t=this.requestService.attractions)===null||t===void 0?void 0:t.subscribe((t=>{this.attractionsResult=t;i()}))}))}componentWillRender(){c.resetImages()}get showFavIcon(){return A.showLikes&&!h.customization.sparcMode}render(){var i;if(this.visible){return[t("div",{class:"search-result-content"},this.attractionsResult&&t("result-text",{results:(i=this.attractionsResult)===null||i===void 0?void 0:i.totalResults})),t("div",{class:"search-result-content",role:"list"},this.attractionsResult&&this.attractionsResult.attractions.map(((i,e)=>{var n,r,a,d,u,c;return i&&[t("listing-item",{link:((n=i.url)===null||n===void 0?void 0:n.path)||i.link,teaserId:i.attractionId,name:i.name,category:((r=h.messages.base)===null||r===void 0?void 0:r.tabAttractionTracking)||((a=h.messages.base)===null||a===void 0?void 0:a.tabAttraction),showFavIcon:this.showFavIcon,index:e},t(s,{src:i.imageUrl,alt:i.name,fallbackImage:h.artistFallbackImage}),t("div",{class:"listing-details listing-details-with-image"},t(l,{headline:i.name,index:e}),!!((d=i.rating)===null||d===void 0?void 0:d.average)&&t("div",{class:"artist-rating-icon-wrapper"},t("item-rating",{rating:i.rating})),t(o,{description:i.description}),this.showFavIcon&&t("favorite-button",{favorite:true,name:i.name,favId:i.attractionId,type:P.ARTIST}),t("listing-cta",{attraction:i,mobile:true,index:e,label:i.name,name:h.messages.listing.ctaButtonAttraction,link:((u=i.url)===null||u===void 0?void 0:u.path)||i.link})),t("listing-cta",{attraction:i,desktop:true,index:e,label:i.name,name:h.messages.listing.ctaButtonAttraction,link:((c=i.url)===null||c===void 0?void 0:c.path)||i.link})),this.attractionsResult.results===e+1&&window.dispatchEvent(new Event("resultsAreRendered"))]}))),t("listing-pagination",{pagination:this.attractionsResult})]}else{return null}}};const S=i=>{var n,s,l,o,r;function a(){return i.additionalInfo===undefined||e.isServer}function u(){var t;const e=(t=i.additionalInfo)===null||t===void 0?void 0:t.productCountText;return v.getCorrectMessageByNumber(i.products.length,(e===null||e===void 0?void 0:e[0])||h.messages.listing.product,(e===null||e===void 0?void 0:e[1])||h.messages.listing.products,(e===null||e===void 0?void 0:e[2])||h.messages.listing.products2)}function c(){if(!i.products)return;i.clickAction()}function g(){if(!i.products)return;return d.get(p).extractUniqueProductTimes(i.products)}return t("div",{class:"cal-cell1 cal-cell"},i.day&&t("div",{class:{"cal-month-day cal-day-inmonth cal-day-weekend theme-calendar-event-date-color":true,"with-event":!!((n=i.products)===null||n===void 0?void 0:n.length),"cal-day-outmonth":i.isDisabled,active:i.isActive},onClick:"data-qa":"calendar-month-with-events"},t("span",{class:"day-number cal-event-status-available theme-text-color theme-calendar-event-date-color","data-qa":"calendar-day",title:""},(s=i.day)===null||s===void 0?void 0:s.getDate()),!!((l=i.products)===null||l===void 0?void 0:l.length)&&[t("div",{class:"event-information tile-headline hidden-xs theme-text-light-color tile-headline-venue line-clamp\n                          cal-event-status-available theme-text-color theme-calendar-event-date-color","data-qa":"calendar-headline"},((o=i.products)===null||o===void 0?void 0:o.length)===1?i.products[0].name:`${i.products.length} ${u()}`),t("div",{class:"event-time-block events-list hidden-xs hidden-sm text-overflow-ellipsis"},g().map(()),t("span",{class:"hidden-xs cal-event-status cal-event-status-available theme-text-color theme-calendar-event-date-color","data-qa":"calendar-price"},t("event-status",{linkColor:true,calendar:true,product:((r=i.products)===null||r===void 0?void 0:r.length)&&i.products[0],additionalInfo:i.additionalInfo,isLoading:a()})),t("span",{class:"status-point visible-xs cal-event-status cal-event-status-available theme-text-color theme-calendar-event-date-color"})]))};const E=i=>{function n(){return[...new Set([d.get(p).formatTimeByPattern(i.product.typeAttributes.liveEntertainment.startDate),d.get(p).formatTimeByPattern(i.product.typeAttributes.liveEntertainment.endDate)])].filter(().join(" - ")}function l(){var t,e,n;return((t=i.additionalInfo)===null||t===void 0?void 0:t.ctaLabel)||(((n=q.getStateDisplay((e=i.additionalInfo)===null||e===void 0?void 0:e.eventStatus))===null||n===void 0?void 0:n.ctaLabel)===F.SHOW_INFO?h.messages.listing.ctaButtonShowInfo:h.messages.listing.ctaButton)}function a(){return i.additionalInfo===undefined||e.isServer}function u(t){t.stopImmediatePropagation();d.get(f).doClickTracking("packs","read more",`${i.product.name} ${i.product.productId}`);new R(i.product.name,i.product.description).show()}function c(){var t;return(t=i.product.tags)===null||t===void 0?void 0:t.includes(m.MEDALCEREMONY)}function v(){var t;return(t=i.product.tags)===null||t===void 0?void 0:t.find(()}function b(){var t,e;return(e=(t=i.product.typeAttributes.liveEntertainment)===null||t===void 0?void 0:t.location)===null||e===void 0?void 0:e.city}function x(){var t,e;return(e=(t=i.product.typeAttributes.liveEntertainment)===null||t===void 0?void 0:t.location)===null||e===void 0?void 0:e.name}return t("li",{class:"p-cal-list-item listing","data-qa":"calendar-event-entry"},t("div",{class:`list-item-${i.product.productId}`},t("div",{class:"u-position-relative p-event-item",role:"link",onClick:,t("span",null,t(s,{src:i.product.imageUrl,alt:i.product.name,fallbackImage:h.eventFallbackImage})),t("div",{class:"p-cal-listing-info"},t("div",{class:"p-cal-listing-info-inner"},t("div",null,t("span",{class:"calendar-listing-headline"},i.product.name,g.isP24Mode&&t("span",null,v()&&t("i",{class:`icon theme-text-color ${r.get(v()).className}`,"aria-label":h.messages.p24[r.get(v()).message],title:h.messages.p24[r.get(v()).message]}),c()&&t("i",{class:"icon icon-medal","aria-label":h.messages.p24.medalSession,title:h.messages.p24.medalSession}))),t("div",{class:"calendar-listing-description"},t(o,{description:i.product.description},t("button",{class:"listing-read-more","aria-haspopup":"dialog",onClick:,h.messages.p24.readMore)))),t("span",{class:"cal-listing-time","data-qa":"calendar-event-date"},t("span",null,d.get(p).getProductOrGroupDate(i.product)," | ",n(),t("span",null,"  |  ",b(),!!x()&&t("span",null,"  |  "),x())))),t("listing-cta",{product:i.product,name:l(),calendar:true,label:i.product.name,additionalInfo:i.additionalInfo,isLoading:a(),link:i.product.url.path}),t("span",{class:"visible-xs hidden-md p-event-listing-price font-size-xl u-font-weight-600 margin-top-s event-price-available","data-qa":"calendar-event-price"},t("event-status",{linkColor:true,calendar:true,product:i.product,additionalInfo:i.additionalInfo,isLoading:a()}))),t("listing-cta",{product:i.product,mobile:true,name:l(),calendar:true,label:i.product.name,additionalInfo:i.additionalInfo,isLoading:a(),link:i.product.url.path}))))};const O="calendar-listing{position:relative}calendar-listing .listing-event-tick{max-height:0;height:auto;overflow:hidden;-webkit-transition:max-height 0.4s cubic-bezier(0, 1, 0, 1);transition:max-height 0.4s cubic-bezier(0, 1, 0, 1)}calendar-listing .listing-event-tick-open{max-height:600px;overflow:auto;-webkit-transition:max-height 0.4s cubic-bezier(1, 0, 1, 0);transition:max-height 0.4s cubic-bezier(1, 0, 1, 0)}calendar-listing .event-time-block{font-size:0.75rem}calendar-listing .listing-description{position:relative;line-height:normal !important}calendar-listing .calendar-listing-headline i{font-size:1.25rem;margin-left:6px}calendar-listing .listing-read-more{color:var(--p24-black);padding-left:2px;line-height:normal}";const z=class{constructor(e){i(this,e);this.Week=i=>{var e;return[t("div",{class:"cal-row-fluid cal-before-eventlist theme-element-border"},(e=this.pickerService.getRow(i.row))===null||e===void 0?void 0:e.map((e=>t(S,{day:e,products:!this.isDisabled(e)&&this.getProductsForDate(e),additionalInfo:this.getLowestPrice(this.getProductsForDate(e)),clici.row)},isDisabled:this.isDisabled(e),isActive:this.selectedDay===e})))),t("div",{class:{"listing-event-tick":true,"listing-event-tick-open":this.selectedRow===i.row&&!!this.selectedProducts}},this.renderProductList)]};this.groupedProducts=undefined;this.additionalInfos=undefined;this.selectedMonth=undefined;this.selectedDay=undefined;this.selectedRow=undefined;this.visible=undefined}async componentWillLoad(){this.requestService=d.get(u);return new Promise((async i=>{var t;await d.get(u).initializationFinished;if(g.isCCClMode||g.isLinkGeneratorMode||!this.requestService.products||this.isClientSideClusterPage){i()}(t=this.requestService.products)===null||t===void 0?void 0:t.subscribe((t=>{var e,n,s,l;this.groupedProducts=this.groupProductsByDate((e=t.products)===null||e===void 0?void 0:e.products);if(!((n=this.groupedProducts)===null||n===void 0?void 0:n.size)){i();return}this.pickerService=new b(this.startingMonth,this.startingMonth,null,true,this.endingMonth);this.selectedMonth=this.startingMonth;(s=this.pickerService.monthChange)===null||s===void 0?void 0:s.subscribe((i=>{this.selectedRow=null;this.selectedMonth=i}));(l=x.filterChange)===null||l===void 0?void 0:l.subw=null}));i();d.get(q).getAdditionalInfos().subInfos=i))}),(i=>console.error(i)))}))}get isClientSideClusterPage(){return g.isClusterMode&&!e.isServer}forWeeksInMonth(i){return Array(6).fill(")=>i(e)))}isDisabled(i){var t;return(i===null||i===void 0?void 0:i.getMonth())!==((t=this.selectedMonth)===null||t===void 0?void 0:t.getMonth())}groupProductsByDate(i){return i===null||i===void 0?void 0:i.reduce(((i,t)=>{const e=d.get(p).formatDateForUrl(new Date(t.typeAttributes.liveEntertainment.startDate));i.set(e,[...i.get(e)||[],t]);return i}),new Map)}getProductsForDate(i){var t;return(t=this.groupedProducts)===null||t===void 0?void 0:t.get(d.get(p).formatDateForUrl(i))}get startingMonth(){var i,t;return new Date((t=(i=this.groupedProducts)===null||i===void 0?void 0:i.entries().next())===null||t===void 0?void 0:t.value[0])}get endingMonth(){return new Date([...this.groupedProducts][this.groupedProducts.size-1][0])}getLowestPrice(i){if(!this.additionalInfos)return undefined;return i===null||i===void 0?void 0ductId])).filter((i=>!!(i===null||i===void 0?void 0:i.price))).ice?i:t),{})}showProductsOfDay(i,t){if(this.selectedDay===i){d.get(f).doClickTracking("calendar","close",d.get(p).formatDateByPattern(i));this.selectedDay=null;this.selectedRow=null;return}d.get(f).doClickTracking("calendar","open",d.get(p).formatDateByPattern(i));this.selectedDay=i;this.selectedDay)}get renderProductList(){var i;return t("div",{class:{"cal-event-list cal-slide-content":true}},t("ul",{class:"p-cal-slide-list","data-qa":"calendar-listing"},(i=this.selectedProducts)===null||i===void 0?void 0:i.map((i=>t(E,{product:i,additionalInfo:this.additionalInfos?this.additionalInfos[i.productId]||null:undefined,clicteTo(i)})))))}navigateTo(i){var t;window.location.href=w.transformUrlForRedirect((t=i.url)===null||t===void 0?void 0:t.path)}render(){var i,e;if(!((i=this.groupedProducts)===null||i===void 0?void 0:i.size)){window.dispatchEvent(new Event("resultsAreRendered"));return null}return t("div",{class:"card p-calendar-card row clearfix overflow-hidden"},t("div",{class:"col col-xs-12"},t("div",{"data-js":"calendar",class:"u-min-height-250","data-qa":"calendar-component"},t("div",{class:"calendar-wrapper"},t("div",{class:"row"},t("div",{class:"btn-group p-cal-month-switch"},t("button",{class:{"p-cal-btn":true,disabled:this.pickerService.isPrevMonthButtonDisabled},"data-qa":"calendar-go-previous",disabled:this.pickerService.isPrevMonthButtonDisabled,onClick:()=>this.pickerService.selectMonth(-1)},t("i",{class:"icon icon-chevron-left"})),t("span",{class:"btn-today text-center","data-qa":"calendar-today"},h.messages.facets.monthNames[this.pickerService.selectedMonthIndex]," ",this.pickerService.selectedYear),t("button",{class:{"p-cal-btn":true,disabled:this.pickerService.isNextMonthButtonDisabled},"data-qa":"calendar-go-next",disabled:this.pickerService.isNextMonthButtonDisabled,onth(1)},t("i",{class:"icon icon-chevron-right"})))),t("div",{class:"row"},t("div",{class:"cal-content cal-context","data-qa":"calendar-content",style:{width:"100%"}},t("div",{class:"cal-row-fluid cal-row-head theme-headline-color"},(e=this.pickerService.weekdays)===null||e===void 0?void 0:e.map((i=>t("div",{class:"cal-cell1",title:i.title},i.value)))),t("div",{class:"cal-month-box theme-text-marginal-color"},this.forWeeksInMonth((i=>t(this.Week,{row:i}))))))))),window.dispatchEvent(new Event("resultsAreRendered")))}};z.style=O;const G=class{constructor(t){i(this,t);this.contentResults=undefined;this.visible=undefined}async componentWillLoad(){this.requestService=d.get(u);return new Promise((async i=>{var t;await d.get(u).initializationFinished;if(!this.requestService.content||g.isLinkGeneratorMode){i()}(t=this.requestService.content)===null||t===void 0?void 0:t.subscribe((t=>{this.contentResults=t;i()}),(i=>console.error(i)))}))}componentWillRender(){c.resetImages()}render(){var i,e,n;if(this.visible){return[t("div",{class:"search-result-content"},this.contentResults&&t("result-text",{results:(i=this.contentResults)===null||i===void 0?void 0:i.totalResults})),t("div",{class:"search-result-content service-listing",role:"list"},this.contentResults&&((e=this.contentResults.content)===null||e===void 0?void 0:e.map(((i,e)=>{var n,s,r,a;return i&&[t("listing-item",{link:(n=i.url)===null||n===void 0?void 0:n.path,teaserId:i.contentId,name:i.title,category:(s=h.messages.base)===null||s===void 0?void 0:s.service,index:e},t("div",{class:"listing-details"},t(l,{headline:i.title,index:e}),t(o,{description:i.description}),t("listing-cta",{content:i,mobile:true,index:e,label:i.title,name:h.messages.listing.moreInfo,link:(r=i.url)===null||r===void 0?void 0:r.path})),t("listing-cta",{content:i,desktop:true,label:i.title,index:e,name:h.messages.listing.moreInfo,link:(a=i.url)===null||a===void 0?void 0:a.path})),this.contentResults.results===e+1&&window.dispatchEvent(new Event("resultsAreRendered"))]})))),((n=this.contentResults)===null||n===void 0?void 0:n.totalPages)>1&&t("listing-pagination",{pagination:this.contentResults})]}else{this.visible&&window.dispatchEvent(new Event("resultsAreRendered"));return null}}};const efined}render(){return!!h.messages.base.legalHint&&t("p",{class:"legalhint-text",innerHTML:h.messages.base.legalHint})}};class _{constructor(i){if(!(i===null||i===void 0?void 0:i.length)||!g.isLinkGeneratorMode)return;this.items=this.formatItems(i)}generateCSV(){var i;if(!((i=this.items)===null||i===void 0?void 0:i.length))return;const t=(i,t)=>t===null?"":t;return[this.header.join(","),...this.items.map((i=>this.headi[e],t))).join(",")))].join("\r\n")}formatItems(i){return i.map((i=>({date:d.get(p).getProductOrGroupDate(i),city:this.getCity(i),name:i===null||i===void 0?void 0:i.name,link:w.getDeeplinkFromUrl(i===null||i===void 0?void 0:i.url)})))}getCity(i){var t,e,n;return(i===null||i===void 0?void 0:i.city)||((n=(e=(t=i===null||i===void 0?void 0:i.typeAttributes)===null||t===void 0?void 0:t.liveEntertainment)===null||e===void 0?void 0:e.location)===null||n===void 0?void 0:n.city)}get header(){return Object.keys(this.items[0]).filter((i=>{if(this.isProductGroupCSV){return i!=="city"}if(this.isLocationCSV){return i!=="date"}return true}))}get isProductGroupCSV(){return w.instance.tab===k.PRODUCT_GROUPS}get isLocATIONS}}const efined}async componentWillLoad(){this.requestService=d.get(u);return new Promise((async i=>{await d.get(u).initializationFinished;if(!this.requestService.locations||g.isLinkGeneratorMode){i()}this.requestService.locations.sub=t;i()}),(i=>console.error(i)))}))}componentWillRender(){c.resetImages()}get showFavIcon(){return A.showLikes}get showDeepLinkItem(){return g.isLinkGeneratorMode}get renderFilter(){var i,e;return t("div",{class:"search-result-content"},t("serp-filter",{locationFilter:true,results:(i=this.locationResults)===null||i===void 0?void 0:i.totalResults,csv:new _((e=this.locationResults)===null||e===void 0?void 0:e.locations).generateCSV()}))}render(){var i,e;if(this.visible){return[g.isLinkGeneratorMode&&this.renderFilter,!g.isLinkGeneratorMode&&t("div",{class:"search-result-content"},this.locationResults&&t("result-text",{results:(i=this.locationResults)===null||i===void 0?void 0:i.totalResults})),t("div",{class:"search-result-content",role:"list"},this.locationResults&&this.locationResults.locations.map(((i,e)=>{var n,r,d,u,c,v,p;return i&&[t("listing-item",{link:((n=i.url)===null||n===void 0?void 0:n.path)||i.link,teaserId:i.locationId,name:i.name,category:((r=h.messages.base)===null||r===void 0?void 0:r.tabLocationTracking)||((d=h.messages.base)===null||d===void 0?void 0:d.tabLocation),showFavIcon:this.showFavIcon,index:e},t(s,{src:i.imageUrl,alt:i.name,fallbackImage:h.locationFallbackImage}),t("div",{class:"listing-details listing-details-with-image"},t(l,{headline:i.name,index:e}),t(a,{subheadline:i.city}),!!((u=i.rating)===null||u===void 0?void 0:u.average)&&!this.showDeepLinkItem&&t("div",{class:"artist-rating-icon-wrapper"},t("item-rating",{rating:i.rating})),this.showDeepLinkItem&&t("deeplink-form-group",{class:"deeplink-form-group","data-qa":"deeplink-form-group-qa",label:h.messages.linkGenerator.locationDeeplinkLabel,url:i.url}),!this.showDeepLinkItem&&t(o,{description:i.description}),this.showFavIcon&&t("favorite-button",{favorite:true,name:i.name,favId:(c=i.locationId)===null||c===void 0?void 0:c.substring(3),type:P.LOCATION}),!this.showDeepLinkItem&&t("listing-cta",{location:i,mobile:true,index:e,label:i.name,name:h.messages.listing.ctaButtonLocation,link:((v=i.url)===null||v===void 0?void 0:v.path)||i.link})),!this.showDeepLinkItem&&t("listing-cta",{location:i,desktop:true,label:i.name,index:e,name:h.messages.listing.ctaButtonLocation,link:((p=i.url)===null||p===void 0?void 0:p.path)||i.link})),this.locationResults.results===e+1&&window.dispatchEvent(new Event("resultsAreRendered"))]}))),((e=this.locationResults)===null||e===void 0?void 0:e.totalPages)>1&&t("listing-pagination",{pagination:this.locationResults})]}else{this.visible&&window.dispatchEvent(new Event("resultsAreRendered"));return null}}};const T="product-group-item{display:block;margin-bottom:10px}.combined-listing product-group-item{margin-bottom:20px}.combined-listing product-group-item special-button,.combined-listing product-group-item .promo-label{margin-bottom:8px}.combined-listing product-group-item .event-listing-city{font-size:1.25rem;font-weight:600}.combined-listing product-group-item article{border-bottom-left-radius:0;border-bottom-right-radius:0}@media (min-width: 660px){.combined-listing product-group-item article{min-height:100px}.combined-listing product-group-item article .listing-cta{padding-top:8px}}@media (max-width: 659px){.combined-listing product-group-item .without-fallback-image{padding-bottom:10px}}product-group-item .listing{z-index:2;position:relative}product-group-item .listing-details{overflow:hidden;margin-right:20px}[dir=rtl] product-group-item .listing-details{margin:0 0 0 20px}.combined-listing product-group-item .listing-image-wrapper{border-radius:0;border-top-left-radius:var(--theme-element-radius, 3px) !important}.combined-listing product-group-item .listing-image{width:150px;height:150px;border-radius:0}@media (max-width: 659px){.combined-listing product-group-item .listing-image{width:100px !important;height:100px !important;min-width:100px}}product-group-item .nested-products product-item .u-flex-self-center{overflow:hidden;margin-right:20px}product-group-item .nested-products product-item:not(:last-child) .listing-item{border-radius:0 !important}product-group-item .nested-products product-item article{margin-bottom:0;border-radius:0;min-height:0}product-group-item .nested-products product-item article .listing-item{padding:0;border-top-left-radius:0 !important;border-top-right-radius:0 !important}product-group-item .nested-products product-item article .listing-cta{-ms-flex-align:end !important;align-items:flex-end !important;margin-right:16px}[dir=rtl] product-group-item .nested-products product-item article .listing-cta{padding:0 16px}@media (min-width: 950px){product-group-item .nested-products product-item:last-child article{border-bottom-left-radius:var(--theme-element-radius, 3px) !important;border-bottom-right-radius:var(--theme-element-radius, 3px) !important}}product-group-item .nested-products product-item:first-of-type article{margin-top:-10px}@media (max-width: 659px){product-group-item .nested-products product-item:first-of-type article{margin-top:-5px}}[dir=rtl] product-group-item .listing-subheadline{margin:0 0 0 20px}product-group-item .event-listing-date-box{width:150px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}@media (max-width: 659px){product-group-item .event-listing-date-box{width:100px;min-width:100px}}";const B=class{constructor(t){i(this,t);this.productGroup=undefined;this.index=undefined;this.additionalInfo=undefined;this.isMobile=undefined}componentWillLoad(){this.refreshState();d.get(q).getAdditionalInfos().subscribe((i=>{var t,e;if(!i){this.additionalInfo=undefined;return}if(typeof i[(t=this.productGroup)===null||t===void 0?void 0:t.productGroupId]!=="undefined"){this.additionalInfo=i[(e=this.productGroup)===null||e===void 0?void 0:e.productGroupId]}else{this.additionalInfo=nP_MIN)}get isLoading(){return this.additionalInfo===undefined||e.isServer}get productCountString(){var i;const t=(i=this.additionalInfo)===null||i===void 0?void 0:i.productCountText;return v.getCorrectMessageByNumber(this.productGroup.productCount,(t===null||t===void 0?void 0:t[0])||h.messages.listing.product,(t===null||t===void 0?void 0:t[1])||h.messages.listing.products,(t===null||t===void 0?void 0:t[2])||h.messages.listing.products2)}get ctaLabel(){var i,t;if(y.showCombinedListing){let i=h.messages.listing.ctaButtonGroup.replace("{0}",`${this.productGroup.productCount} ${this.productCountString}`);i=this.productGroup.productCount<2?i.replace(/\[([^)]+)\]/,""):i.replace(/[\[\]']+/g,"");return i}else{return((i=this.additionalInfo)===null||i===void 0?void 0:i.ctaLabel)||(((t=this.state)===null||t===void 0?void 0:t.ctaLabel)===F.SHOW_INFO?h.messages.listing.ctaButtonShowInfo:h.messages.listing.ctaButton)}}get state(){var i;return q.getStateDisplay((i=this.additionalInfo)===null||i===void 0?void 0:i.eventStatus)}get groupHasDate(){var i,t;if(this.isVoucher)return false;return!!((i=this.productGroup)===null||i===void 0?void 0:i.startDate)||!!((t=this.productGroup)===null||t===void 0?void 0:t.endDate)}get isVoucher(){var i;return(i=this.productGroup.tags)===null||i===void 0?void 0:i.includes(m.VOUCHER)}getCity(i){var t,e;return(e=(t=i===null||i===void 0?void 0:i.typeAttributes.liveEntertainment)===null||t===void 0?void 0:t.location)===null||e===void 0?void 0:e.city}get showCityInsteadOfProductName(){return this.productGroup.products.every((i=>{var t;return i.name===((t=this.productGroup.products[0])===null||t===void 0?void 0:t.name)}))&&!this.productGroup.products.every((i=>this.getCity(i)===this.getCity(this.productGroup.products[0])))}get url(){var i;return((i=this.productGroup.url)===null||i===void 0?void 0:i.path)||this.productGrorMode}get dateRange(){return d.get(p).getProductOrGroupDate(this.productGroup)}render(){var i,e,r,a,d,u,c,v,p,g,f,b;return!!this.productGroup&&t(n,{"data-qa":`product-group-item-qa-${this.productGroup.productGroupId}`},t("listing-item",{link:this.url,teaserId:this.productGroup.productGroupId,name:this.productGroup.name,category:((i=h.messages.base)===null||i===void 0?void 0:i.tabProductTracking)||((e=h.messages.base)===null||e===void 0?void 0:e.tabProduct),subIndex:-1,showFavIcon:this.showFavIcon,index:this.index,noPadding:!y.showOldListing},t(s,{src:this.productGroup.imageUrl,alt:this.productGroup.name,fallbackImage:h.eventFallbackImage}),t("div",{class:{"listing-details listing-details-with-image":true,"padding-left-l without-fallback-image":!h.eventFallbackImage&&!this.productGroup.imageUrl}},t(l,{dataQa:"product-group-headline",headline:this.productGroup.name,index:this.index}),!this.showDeepLinkItem&&t(o,{hiddenOnMobile:true,singleLine:!y.showOldListing,description:this.productGroup.description||""}),t(o,{singleLine:true},(this.groupHasDate||!this.isVoucher)&&t("span",{class:"listing-data theme-text-color"},this.groupHasDate&&t("span",null,this.dateRange),!this.isVoucher&&t("span",null,this.productGroup.productCount," ",this.productCountString)),!!((r=this.productGroup.rating)===null||r===void 0?void 0:r.average)&&h.showRatings&&!this.showDeepLinkItem&&t("span",{class:"rating-icon-wrapper"},t("item-rating",{rating:this.productGroup.rating}))),this.showDeepLinkItem&&t("deeplink-form-group",{class:"deeplink-form-group","data-qa":"deeplink-form-group-qa",label:h.messages.linkGenerator.productGroupDeeplinkLabel,url:this.productGroup.url}),this.showFavIcon&&!this.showDeepLinkItem&&t("favorite-button",{bookmark:true,name:this.productGroup.name,favId:this.productGroup.productGroupId,type:P.PRODUCTGROUP}),!y.showCombinedListing&&!this.showDeepLinkItem&&t("event-status",{mobile:true,linkColor:true,productGroup:this.productGroup,additionalInfo:this.additionalInfo,isLoading:this.isLoading}),h.showPromoLabels&&!this.showDeepLinkItem&&[t("div",{class:"clearfix"}),t("promo-labels",{eid:parseInt(this.productGroup.productGroupId,0)})],((a=this.productGroup.tags)===null||a===void 0?void 0:a.includes(m.SPECIAL))&&!this.showDeepLinkItem&&t("special-button",{special:true,name:h.messages.listing.specialsButton,link:this.url,teaserId:this.productGroup.productGroupId,teaserName:this.productGroup.name,category:((d=h.messages.base)===null||d===void 0?void 0:d.tabProductTracking)||((u=h.messages.base)===null||u===void 0?void 0:u.tabProduct),subIndex:-1,index:this.index}),((c=this.productGroup.tags)===null||c===void 0?void 0:c.includes(m.TRAVEL))&&!this.showDeepLinkItem&&t("special-button",{travel:true,name:h.messages.listing.journeysButton,link:this.url,teaserId:this.productGroup.productGroupId,teaserName:this.productGroup.name,category:((v=h.messages.base)===null||v===void 0?void 0:v.tabProductTracking)||((p=h.messages.base)===null||p===void 0?void 0:p.tabProduct),subIndex:-1,index:this.index})),!this.showDeepLinkItem&&[t("listing-icons",{tags:this.productGroup.tags}),t("listing-cta",{productGroup:this.productGroup,name:this.ctaLabel,label:this.productGroup.name,index:this.index,additionalInfo:this.additionalInfo,isLoading:this.isLoading,link:this.url,linkBtn:y.showCombinedListing&&this.isMobile})]),!!this.productGroup.products&&!this.showDeepLinkItem&&[t("div",{class:"nested-products"},(g=this.productGroup.products)===null||g===void 0?void 0:g.map(((i,e)=>t("product-item",{product:i,subIndex:e,index:this.index,nameAsTitle:!this.showCityInsteadOfProductName})))),y.showCombinedListing&&t("listing-cta",{productGroup:this.productGroup,name:this.ctaLabel,label:this.productGroup.name,additionalInfo:this.additionalInfo,isLoading:this.isLoading,link:this.url,mobile:true,fullWidthBtn:true})],!!this.productGroup.rankingStatistic&&t("item-statistics",{statistics:this.productGroup.rankingStatistic,productStatistics:(b=(f=this.productGroup.products)===null||f===void 0?void 0:f.at(0))===null||b===void 0?void 0:b.rankingStatistic,productGroupId:this.productGroup.productGroupId}))}};B.style=T;const N=class{constructor(t){i(this,t);this.products=undefined;this.groups=undefined;this.showCalendar=undefined;this.visible=undefined;this.productsOnly=undefined;this.groupsOnly=undefined}async componentWillLoad(){this.requestService=d.get(u);return new Promise((async i=>{var t;await d.get(u).initializationFinished;if(g.isCCClMode||g.isLinkGeneratorMode||!this.requestService.products||this.isClientSideClusterPage){i()}(t=this.requestService.products)===null||t===void 0?void 0:t.subscribe((t=>{var e,n,s,l,o,r;this.products=t.products;if(!this.productsOnly){this.groups=t.groups}if(y.showOldListing){if(((n=(e=t.products)===null||e===void 0?void 0:e.facets)===null||n===void 0?void 0:n.length)>0){this.facets=t.products.facets}if(((l=(s=t.groups)===null||s===void 0?void 0:s.facets)===null||l===void 0?void 0:l.length)>0&&g.isClusterMode){this.facets=this.facets.map((i=>I.findFacet(i.name,t.groups.facets)||i))}}else{this.facets=((o=t.groups)===null||o===void 0?void 0:o.facets)||((r=t.products)===null||r===void 0?void 0:r.facets)}if(this.productGroupsAreOutOfRange(t.groups)){this.redirectToPage(t.groups.totalPages)}else if(this.products&&this.productsAreOutOfRange(t.products)){this.redirectToPage(t.products.totalPages)rror(ages()}productGroupsAreOutOfRange(i){return(i===null||i===void 0?void 0:i.totalResults)&&this.requestService.outOfRange(i===null||i===void 0?void 0:i.totaPages)}redirectToPage(i){d.get(L).setParams({page:i});w.instance.setParam("page",String(i));w.instance.replaceState()}get isClientSideCluServer}get csv(){var i,t,e,n;if(((i=this.products)===null||i===void 0?void 0:i.products.length)>0&&!((t=this.products)===null||t===void 0?void 0:t.products[0]))return;return new _(this.productsOnly?(e=this.products)===null||e===void 0?void 0:e.products:(n=this.groups)===null||n===void 0?void 0:n.productGroups).generateCSV()}toggleCalendar(){this.showCalendar=!this.showCalendar;d.get(L).setParams({sort:this.showCalendar?C.DateAsc:x.sorting.state.selection.name,page:this.showCalendar?null:w.instance.page});this.showCalendar?d.get(L).setTag(m.CALENDAR_VIEW):d.get(L).removeTag(m.CALENDAR_VIEW);d.get(u).doProductsRequest()}get renderProductListing(){var i,e,n,s;if(((e=(i=this.groups)===null||i===void 0?void 0:i.productGroups)===null||e===void 0?void 0:e.length)>0&&!!this.groups.productGroups[0]){return[t("div",{class:"search-result-content",role:"list"},this.groups.productGroups.map(((i,e)=>[t("product-group-item",{productGroup:i,index:e}),this.groups.results===e+1&&window.dispatchEvent(new Event("resultsAreRendered"))]))),t("legal-hint",null),t("listing-pagination",{pagination:this.groups})]}else if(((s=(n=this.products)===null||n===void 0?void 0:n.products)===null||s===void 0?void 0:s.length)>0&&!!this.products.products[0]){return[t("div",{class:"search-result-content",role:"list"},this.products.products.map(((i,e)=>[t("product-item",{product:i,index:e}),this.products.results===e+1&&window.dispatchEvent(new Event("resultsAreRendered"))]))),t("legal-hint",null),t("listing-pagination",{pagination:this.products})]}else{this.visible&&window.dispatchEvent(new Event("resultsAreRendered"));return null}}get renderFilter(){var i,e;return t("div",{class:"search-result-content"},t("serp-filter",{facets:this.facets,results:((i=this.products)===null||i===void 0?void 0:i.totalResults)||((e=this.groups)===null||e===void 0?void 0:e.totalResults),calendarTendar(),csv:this.csv}))}render(){return[this.visible&&this.renderFilter,(this.visible&&(this.products||this.groups||g.isLinkGeneratorMode)||g.isCCClMode||g.isP24Mode)&&(this.showCalendar?t("calendar-listing",null):this.renderProductListing)]}};export{j as attraction_listing,z as calendar_listing,G as content_listing,$ as legal_hint,M as location_listing,B as product_group_item,N as product_listing};
//# sourceMappingURL=p-703056a0.entry.js.map