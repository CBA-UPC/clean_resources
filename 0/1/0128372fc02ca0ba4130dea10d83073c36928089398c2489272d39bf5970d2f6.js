//tealium universal tag - utag.loader ut4.0.202310091527, Copyright 2023 Tealium.com Inc. All Rights Reserved.
var utag_condload=false;window.__tealium_twc_switch=false;try{try{(function(w){w.vtg=w.vtg||{};w.vtg.config={"DataSource":[{"label":"utag","var":"utag.data"},{"label":"cfg","var":"utag.cfg"},{"label":"adl","function":"adobeDataLayer.getState"}],"Settings":{"debug":false,"ssl":true,"platform":"Desktop"},"AdobeData":{"enabled":true,"params":{"serverInfo":{"reportSuiteID":"{utag.isDev} ? {utag.tc_adobe_reportSuiteTest} : {utag.tc_adobe_reportSuiteProduction}","demdexUrl":"dpm.demdex.net/id?d_rtbd=json&d_ver=2&d_orgid=","marketingCloudOrgId":"ED7001AC512D2ABD0A490D4C@AdobeOrg","marketingCloudVisitorID":"{session.d_mid}","dataUrl":"{utag.tc_adobe_subdomain}.{utag.tc_network}/b/ss//6","cookieDomain":"{utag.tc_network}"}}},"AdobeMedia":{"enabled":true,"params":{"serverInfo":{"apiServerHost":"{utag.isDev} ? {utag.tc_adobe_subdomain}.{utag.tc_network}/va-stage : {utag.tc_adobe_subdomain}.{utag.tc_network}/va","sessionsPath":"/api/v1/sessions","eventsPath":"events","id3Owner":"com.cbsi.live.sg","sendUndefined":"{utag.isDev}","maxSessionTimeoutMinutes":30,"maxSessionStartWaitTime":180000,"aviaChapterTracking":"false","id3Tracking":"false"},"accountInfo":{"analytics.trackingServer":"{utag.tc_adobe_subdomain}.{utag.tc_network}","analytics.reportSuite":"{utag.isDev} ? {utag.tc_adobe_reportSuiteTest} : {utag.tc_adobe_reportSuiteProduction}","analytics.enableSSL":"true","visitor.marketingCloudOrgId":"ED7001AC512D2ABD0A490D4C@AdobeOrg","visitor.marketingCloudUserId":"{session.d_mid}"},"mediaInfo":{"media.playerName":"{adl.contextData.v.playerName}","media.contentType":"{data.isLive} ? Live : vod","media.length":"{data.isLive} ? 86400 : {adl.contextData.v.duration}","media.id":"{adl.contextData.v.mediaId}","media.name":"{adl.contextData.v.vidEpTitle}","media.channel":"{adl.contextData.v.vchannel}","media.network":"{utag.tc_network}","media.sdkVersion":"{data.playerVersion}","media.show":"{adl.contextData.v.seriesTitle}","media.genre":"{adl.contextData.v.category}","media.season":"{adl.contextData.v.seasonNumber}","media.episode":"{adl.contextData.v.episodeNumber}","media.showType":"{data.showType}","media.assetId":"{data.assetId}","media.firstAirDate":"{data.tvAirDate}","media.resume":"{data.hasSessionResumed}"},"adBreakInfo":{"media.ad.podFriendlyName":"{data.adBreakType}","media.ad.podIndex":"{data.adBreakPosition}","media.ad.podSecond":"{data.playhead}"},"adInfo":{"media.ad.name":"{data.adTitle}","media.ad.id":"{data.videoTitle} - {data.adTitle}","media.ad.length":"{data.adDuration}","media.ad.creativeId":"{data.adId}","media.ad.creativeURL":"{data.adUrl}","media.ad.playerName":"{data.playerName}","media.ad.podPosition":"{data.adPosition}"},"playerInfo":{"media.state.name":"{data.playerInfo.playerState}"},"playerStates":{"fullScreen":true,"closedCaptioning":true,"mute":true,"timeShifted":true},"customData":{"v.accountID":"{adl.contextData.v.accountID}","v.activity":"{adl.contextData.v.activity}","v.appName":"{adl.contextData.v.appName}","v.authSuiteID":"{adl.contextData.v.authSuiteID}","v.autoplayed":"{adl.contextData.v.autoplayed}","v.brandID":"{adl.contextData.v.brandID}","v.channel":"{adl.contextData.v.vchannel}","v.cmsBrand":"{adl.contextData.v.cmsBrand}","v.cmsLanguage":"{adl.contextData.v.cmsLanguage}","v.cmsPlatform":"{adl.contextData.v.cmsPlatform}","v.cmsRegion":"{adl.contextData.v.cmsRegion}","v.contentStatus":"{adl.contextData.v.contentStatus}","v.coppa":"{adl.contextData.v.coppa}","v.countryName":"{adl.contextData.v.countryName}","v.currentPlayerAudio":"{adl.contextData.v.currentPlayerAudio}","v.currentPlayerSubtitles":"{adl.contextData.v.currentPlayerSubtitles}","v.defaultPlayerAudio":"{adl.contextData.v.defaultPlayerAudio}","v.defaultPlayerSubtitles":"{adl.contextData.v.defaultPlayerSubtitles}","v.digitalExclusive":"{adl.contextData.v.digitalExclusive}","v.epCount":"{adl.contextData.v.epSegmentCount}","v.episodeN":"{adl.contextData.v.episodeNumber}","v.epLatest":"{adl.contextData.v.epLatest}","v.epLength":"{data.isLive} ? 86400 : {adl.contextData.v.duration}","v.epmgid":"{adl.contextData.v.mediaId}","v.eventName":"{adl.contextData.v.eventName}","v.genre":"{adl.contextData.v.category}","v.language":"{adl.contextData.v.language}","v.linearPubDate":"{data.publishDate}","v.mgid":"{adl.contextData.v.assetId}","v.monolithic":"{adl.contextData.v.monolithic}","v.pageType":"{adl.contextData.v.pageType}","v.pageURL":"{adl.contextData.v.pageURL}","v.playerName":"{data.playerName}","v.playerState":"{adl.contextData.v.customPlayerState}","v.playerVersion":"{data.playerVersion}","v.profileID":"{adl.contextData.v.profileID}","v.profileIDstate":"{adl.contextData.v.profileIDstate}","v.pv":"{adl.contextData.v.pv}","v.regStatus":"{adl.contextData.v.regStatus}","v.seamlessEnabled":"{adl.contextData.v.seamlessEnabled}","v.seasonN":"{adl.contextData.v.seasonNumber}","v.segmented":"{adl.contextData.v.segmented}","v.seriesInSeason":"{adl.contextData.v.seriesInSeason}","v.ssai":"{adl.contextData.v.ssai}","v.subscriberState":"{adl.contextData.v.subscriberState}","v.subscriptionID":"{adl.contextData.v.subscriptionID}","v.subscriptionSKU":"{adl.contextData.v.subscriptionSKU}","v.subscriptionStatus":"{adl.contextData.v.subscriptionStatus}","v.tealiumPlatformID":"{utag.ts_platformID}|{cfg.domain}{cfg.path}","v.thumbnailPreviewEnabled":"{adl.contextData.v.thumbnailPreviewEnabled}","v.timeStamp":"{adl.contextData.v.timeStamp}","v.tsVersion":"{data.version}","v.tvemvpd":"{adl.contextData.v.tvemvpd}","v.tveUsrStat":"{adl.contextData.v.tveUsrStat}","v.vidArtist":"{adl.contextData.v.vidArtist}","v.vidCategory":"{adl.contextData.v.vidCategory}","v.vidcontDescriptor":"{adl.contextData.v.vidcontDescriptor}","v.vidContentType":"{adl.contextData.v.contentType}","v.videoVersion":"{data.version}|{data.playerVersion}","v.vidEpTitle":"{adl.contextData.v.vidEpTitle}","v.vidFranchise":"{adl.contextData.v.vidFranchise}","v.vidLength":"{data.isLive} ? 86400 : {adl.contextData.v.vidLength}","v.vidOwner":"{adl.contextData.v.vidOwner}","v.vidSeriesTitle":"{adl.contextData.v.seriesTitle}","v.vidTitle":"{adl.contextData.v.vidTitle}"},"qoeData":{"media.qoe.timeToStart":"{data.timeToStart}"},"chapterInfo":{"media.chapter.index":"{data.chapterIndex}","media.chapter.offset":"{data.chapterOffset}","media.chapter.length":"{data.chapterLength}","media.chapter.friendlyName":"Chapter {data.chapterIndex} - {adl.contextData.v.videoTitle}"},"errorInfo":{"media.qoe.errorID":"{data.errorCode}","media.qoe.errorSource":"player"},"dataType":{"analytics.enableSSL":"boolean","media.length":"int","media.resume":"boolean","media.ad.podIndex":"int","media.ad.podSecond":"int","media.ad.length":"int","media.ad.podPosition":"int","media.qoe.timeToStart":"int","media.chapter.index":"int","media.chapter.offset":"int","media.chapter.length":"int"}}},"ComscoreStreaming":{"enabled":true,"params":{"sessionInfo":{"publisherId":"3005086","platformApi":"13","persistentLabels":{"cs_ucfr":""}},"appInfo":{"setApplicationName":"{utag.tc_comscore_c3}","setApplicationVersion":"*null"},"initInfo":{"setImplementationId":"","setProjectId":"","setMediaPlayerName":"{adl.contextData.v.playerName}","setMediaPlayerVersion":"{adl.contextData.v.playerVersion}"},"contentInfo":{"setUniqueId":"{adl.contextData.v.mediaId}","setLength":"{data.isLive} ? 0 : {adl.contextData.v.duration}","setPublisherName":"*null","setProgramTitle":"{data.isLive} ? *null : {adl.contextData.v.seriesTitle}","setEpisodeTitle":"{adl.contextData.v.videoTitle}","setEpisodeSeasonNumber":"{data.isLive} ? *null : {adl.contextData.v.seasonNumber}","setEpisodeNumber":"{data.isLive} ? *null : {adl.contextData.v.episodeNumber}","setGenreName":"{data.isLive} ? *null : {adl.contextData.v.category}","carryTvAdvertisementLoad":"{data.isLive} ? 1 : 0","classifyAsCompleteEpisode":"{data.isEpisode} ? 1 : 0","setStationTitle":"*null","setDateOfDigitalAiring":"{data.isLive} ? *null : {adl.contextData.v.tvAirDate}","setDateOfTvAiring":"{data.isLive} ? *null : {adl.contextData.v.tvAirDate}","setDictionaryClassificationC3":"{utag.tc_comscore_c3}","setDictionaryClassificationC4":"{utag.tc_comscore_c4}","setDictionaryClassificationC6":"{data.isLive} ? {adl.contextData.v.videoTitle} : {adl.contextData.v.seriesTitle}"},"adInfo":{"setUniqueId":"{data.adId}","setLength":"{data.adDuration}","setRelatedContentMetadata":"{data.cm}"},"events":{"sessionStart":"createPlaybackSession","metadata":"setMetadata","play":"notifyPlay","pause":"notifyPause","end":"notifyEnd","bufferStart":"notifyBufferStart","bufferStop":"notifyBufferStop","seekStart":"notifySeekStart"},"dataFormat":{"setDateOfDigitalAiring":function(s){var m=s.match(/(\d+-\d+-\d+)/);if(m.length>0&&m[0]){s=m[0].split('-');}
return s;},"setDateOfTvAiring":function(s){var m=s.match(/(\d+-\d+-\d+)/);if(m.length>0&&m[0]){s=m[0].split('-');}
return s;},"setEpisodeNumber":function(s,c){if(/\D/ig.test(s)){s="*null";}
return s;},"setEpisodeSeasonNumber":function(s,c){if(/\D/ig.test(s)){s="*null";}else{s="0"+c.source.data.seasonNumber;}
return s;},"setProgramTitle":function(s,c){if(/Movie/ig.test(c.source.data.contentType)){s=c.source.data.videoTitle;}
return s;},"setDictionaryClassificationC6":function(s,c){if(/Movie/ig.test(c.source.data.contentType)){s=c.source.data.videoTitle;}
return s;},"setGenreName":function(s,c){if(!s||s==="undefined"){s="*null";}
return s;},"setLength":function(s,c){s=Math.floor(s*1000);return s;}}}},"Mux":{"enabled":true,"params":{"initInfo":{"minimumRebufferDuration":500},"mediaInfo":{"env_key":"{utag.isDev} ? bts222g674d2n35l5vd6l8230 : kamd8jpdbeekn8gapkqcupq14","viewer_user_id":"{data.userId}","page_type":"{data.pageType}","experiment_name":"ViacomCBS Tracking","sub_property_id":"{utag.tc_mux_sub_property_id}","player_name":"{adl.contextData.v.playerName}","player_version":"{data.playerVersion}","player_init_time":"{data.initTime}","player_software_name":"{adl.contextData.v.playerName}","player_software_version":"{data.playerVersion}","player_mux_plugin_name":"Mux {data.platform}","player_mux_plugin_version":"{data.pluginVersion}","video_id":"{adl.contextData.v.mediaId}","video_title":"{data.videoTitle}","video_series":"{adl.contextData.v.seriesTitle}","video_variant_name":"","video_variant_id":"","video_language_code":"","video_content_type":"","video_duration":"{data.durationMs}","video_stream_type":"{data.isLive} ? live : on-demand","video_producer":"","video_encoding_variant":"","video_cdn":"{data.cdn}","video_source_bitrate":"{data.bitrate}"},"adInfo":{"ad_asset_url":"{data.adUrl}"},"cdnInfo":{"video_cdn":"{data.cdn}"},"errorInfo":{"player_error_code":"{data.errorCode}","player_error_message":"{data.errorMessage}"},"requestFailedInfo":{"request_error":"{data.errorName}","request_error_text":"{data.errorMessage}","request_error_code":"{data.errorCode}"},"hbInfo":{"player_playhead_time":"{data.playhead}"},"qosInfo":{"video_source_bitrate":"{data.bitrate}"},"playerInfo":{"player_is_paused":"{player.isPaused}","player_width":"{player.width}","player_height":"{player.height}","video_source_height":"{player.srcHeight}","video_source_width":"{player.srcWidth}","player_is_fullscreen":"{player.isFullscreen}","player_autoplay_on":"{player.isAutoplay}","player_preload_on":"{player.hasPreload}","video_source_url":"{data.mediaUrl}","video_source_mime_type":"{player.srcMimeType}","video_source_duration":"{player.srcDuration}","video_poster_url":"{player.posterUrl}","player_language_code":"{player.language}"},"dataType":{"player_init_time":"int","video_duration":"int","video_source_duration":"int","player_is_paused":"boolean","player_is_fullscreen":"boolean","player_autoplay_on":"boolean","player_preload_on":"boolean"}}}};})(window);}catch(e){console.log(e)}}catch(e){console.log(e);}
if(!utag_condload){try{try{"use strict";window.vtg=window.vtg||{};window.vtg.ts=(()=>{var rt=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var mt=Object.getOwnPropertyNames;var lt=Object.prototype.hasOwnProperty;var ft=(c,t)=>{for(var e in t)rt(c,e,{get:t[e],enumerable:!0})},pt=(c,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of mt(t))!lt.call(c,o)&&o!==e&&rt(c,o,{get:()=>t[o],enumerable:!(i=It(t,o))||i.enumerable});return c};var ht=c=>pt(rt({},"__esModule",{value:!0}),c);var h=(c,t,e)=>new Promise((i,o)=>{var r=f=>{try{a(e.next(f))}catch(u){o(u)}},n=f=>{try{a(e.throw(f))}catch(u){o(u)}},a=f=>f.done?i(f.value):Promise.resolve(f.value).then(r,n);a((e=e.apply(c,t)).next())});var Rt={};ft(Rt,{Event:()=>v,ServiceApi:()=>l,hydra:()=>At,restart:()=>at,snapshot:()=>St,start:()=>ut,track:()=>yt,version:()=>vt});var v=(s=>(s.AdBreakEnd="AdBreakEnd",s.AdBreakStart="AdBreakStart",s.AdClick="AdClick",s.AdCuepointsAvailable="AdCuepointsAvailable",s.AdEnd="AdEnd",s.AdError="AdError",s.AdFirstQuartile="AdFirstQuartile",s.AdHeartbeat="AdHeartbeat",s.AdMidQuartile="AdMidQuartile",s.AdPause="AdPause",s.AdProgress="AdProgress",s.AdResume="AdResume",s.AdSkip="AdSkip",s.AdStalled="AdStalled",s.AdStart="AdStart",s.AdJoin="AdJoin",s.AdThirdQuartile="AdThirdQuartile",s.AdobeData="AdobeData",s.AviaJsReady="AviaJsReady",s.BitrateChange="BitrateChange",s.BufferEnd="BufferEnd",s.BufferStart="BufferStart",s.CdnChange="CdnChange",s.ChapterComplete="ChapterComplete",s.ChapterStart="ChapterStart",s.CloudIdReady="CloudIdReady",s.ContentEnd="ContentEnd",s.ContentPause="ContentPause",s.ContentPlaying="ContentPlaying",s.ContentProgress="ContentProgress",s.ContentResume="ContentResume",s.ContentSegmentEnd="ContentSegmentEnd",s.ContentSegmentStart="ContentSegmentStart",s.ContentStart="ContentStart",s.CtvTimedData="CtvTimedData",s.CuePoint="CuePoint",s.DaiError="DaiError",s.DataUpdate="DataUpdate",s.DrmCreated="DrmCreated",s.FatalError="FatalError",s.Foreground="Foreground",s.Heartbeat="Heartbeat",s.LiveUiStopped="LiveUiStopped",s.LogEvent="LogEvent",s.PausedHeartbeat="PausedHeartbeat",s.BufferHeartbeat="BufferHeartbeat",s.PlaybackStarted="PlaybackStarted",s.PlaybackStateWaiting="PlaybackStateWaiting",s.PlayerError="PlayerError",s.PlayerState="PlayerState",s.PlayerUpdate="PlayerUpdate",s.QualityChange="QualityChange",s.ResourceInterrupt="ResourceInterrupt",s.ResourceReady="ResourceReady",s.RuntimeError="RuntimeError",s.SeekEnd="SeekEnd",s.SeekStart="SeekStart",s.SessionEnd="SessionEnd",s.SessionStart="SessionStart",s.StreamMetadata="StreamMetadata",s.TimeUpdate="TimeUpdate",s.PlaybackStatePlaying="PlaybackStatePlaying",s.NetworkRecovery="NetworkRecovery",s.CustomError="CustomError",s.SessionIdReady="SessionIdReady",s.BufferComplete="BufferComplete",s.AudioTrackChange="AudioTrackChange",s.TextTrackChange="TextTrackChange",s))(v||{});var x=class{constructor(t,e){this.key=t;this.service=e}onUpdate(t){let i=this.eventMap[t.name];this.notification=t,i&&i.apply(this)}};var P=class{constructor(t,e,i){this.key=t;this.configNode=e;this.service=i;this.eventMap={};let o=e.events;typeof o=="object"&&this.bindEvents(o)}bindEvents(t){let{View:e}=this.service.util;Object.keys(t).forEach(i=>{let o=t[i],r=e.find(o.function);typeof r=="function"&&(this.eventMap[i]=r)})}onUpdate(t){let i=this.eventMap[t.name];t.body=t.body||{},t.body.serviceKey=this.service.key;try{i(t)}catch(o){}}onRemove(){}};var nt={};ft(nt,{ConfigUtil:()=>y,Cookie:()=>U,DateUtil:()=>C,FetchUtil:()=>R,ObjectUtil:()=>A,StringUtil:()=>I,Timer:()=>M,View:()=>d});var y=class{static isNodeEnabledtatic isIdSyncPriority(t){var i;let e=(i=t==null?void 0:t.params)==null?void 0:i.serverInfo;return!!(y.isNodeEnabled(t)&&(e==null?void 0:e.ecidSyncPriority))}};var d=class{static gettatic find(t,e){e=e||window;let i;if(t.indexOf(".")>-1){let o=t.split("."),r=o.shift()||"",n=o.join(".");i=d.find(n,e[r])}else i=e[t];return i}static getSize(){let t=d.get("screen");return t&&t.width&&t.height?t.width+"x"+t.height:"n/a"}static getProtocol(t){return["http",t?"s":"","://"].join("")}};var U=class{static get(t){let e=d.get("document");if(!(e&&e.cookie))return"";let o=("; "+e.cookie).split(["; ",t,"="].join("")),r="";if(o.length>1){let n=o[1].split(";");n&&(r=n.shift()||"")}return r}static set(t,e,i){let o=d.get("document");!o||(i=i?";domain="+i:"",o.cookie=[t+"="+e,i,";expires=Tue, 19 Jan 2038 03:14:07 UTC",";path=/"].join(""))}};var C=class{tatic getElapsedSince;var I=class{static trim(t){return I.isDefined(t)?t.toString().trim():t}static isDefined(t){return!(typeof t=="undefined"||t==="undefined"||t===null||t==="")}static isTruthy(t){return I.isDefined(t)&&(typeof t=="boolean"&&t===!0||t==="true")}static toString(t){let e=d.get("JSON")||JSON;return e&&e.stringify?e.stringify(t):t.toString()}static toObject(t){let e=d.get("JSON")||JSON;return e&&e.parse?e.parse(t):t}static toMillisec(t){return isNaN(t)?t:Math.floor(t*1e3)}static toQs(t){let e=[],i=o=d.get("encodeURIComponent")||i;for(let r in t){let n=o(r),a=o(t[r]);e.push(n+"="+a)}return e.join("&")};var A=class{tatic merge(t,e){e=e||{};let i,o;for(i in t)o=t[i],t.hasOwnProperty(i)&&I.isDefined(o)&&(e[i]=typeof o=="object"?A.merge(o,e[i]):o);return e}static deleteIfDefined(t,e){return e.hasOwnProperty(t)?(delete e[t],!0):!1}};var R=class{static fetch(t){return h(this,null,function*(){let e=d.getProtocol(t.ssl),i={method:"POST",headers:{"Content-type":"application/json"}};return t.body&&(i.body=JSON.stringify(t.body)),t.requestInit&&(i=A.merge(t.requestInit,i)),fetch(e+t.url,i)})}};var M=class{constructor(t){this.millisec=t;this.running=!1;this.elapsed=0;this.millisec=t}start(t){if(!setInterval)return;let e=()=>{this.elapsed+=this.millisec,t.call(null,this.elapsed)};this.running||(this.id=setInterval(e,this.millisec),this.running=!0)}stop(){!clearInterval||!this.running||(clearInterval(this.id),this.running=!1)}};var F=class{pdate(t){let e=this.data;Object.keys(t).forEach(i=>{let o=t[i];I.isDefined(o)&&(e[i]=o)}),this.data=e,this.service&&this.service.notify("DataUpdate",this.data)};var B=class{constructor(t){this.dataRules=[];this.dataSources={};this.dataTypes={};this.transformers={};t.forEach(e=>{this.dataRules.push(new e)})}etConfig(t){this.config=t}setTransformers(t){this.transformers=t}setDataTypes(t){this.dataTypes=t}mapEventNode(t){let e=this.config.events;if(!e)return;let i=e[t];if(!!i)return this.execDataRules(i)}mapParamNode(t){let e=this.config.params;if(!e)return;let i=e[t];if(!!i)return this.execDataRules(i)}execDataRules(t){let e={};return this.dataRules.forEach(i=>{e=i.exec({source:this.dataSources,map:t,data:e,types:this.dataTypes,format:this.transformers})}),e}};var V=class{exec(t){let e=t.data,i=t.format;return Object.keys(i).forEach(o=>{let r=e[o],n=i[o];if(r&&n&&typeof n=="function"){let a;try{a=n(r,t)}catch(f){a=void 0}a&&(e[o]=a)}}),e}};var L=class{exec(t){let e={};return Object.keys(t.data).forEach(i=>{let o=t.data[i].toString();if(o)switch(t.types[i]){case"int":e[i]=parseInt(o);break;case"boolean":e[i]=o==="true";break;default:let r=t.data[i];e[i]=typeof r=="object"?r:o;break}}),e}};var q=class{exec(t){let e={},i=I.trim,o=I.isDefined;return Object.keys(t.data).forEach(r=>{if(t.data[r]){let n=t.data[r],a=n.toString(),f=a.split(" || ");if(e[r]=typeof n=="object"?n:a,f.length>1){let u=f.find(;u&&(e[r]=i(u))}}}),e}};var H=class{exec(t){let e={},i=(o,r)=>{let n=o?o.toString().match(r):null;return n&&n.length>0?n[1]:""};return Object.keys(t.map).forEach(o=>{let r=t.map[o],n=/\{.*?\}/g,a=r?r.toString().match(n):null;e[o]=t.map[o],a&&a.forEach(f=>{let u=i(f,/{(\w+).+}/),m=i(f,/{\w+\.(.+)}/),p=t.source[u];if(u&&m&&p){let E=d.find(m,p);if(typeof p=="function"){let k=p.call(null);E=d.find(m,k)}typeof E=="object"?e[o]=E:e[o]=e[o].replace(f.toString(),E)}})}),e}};var G=class{exec(t){let e={};return Object.keys(t.data).forEach(i=>{if(t.data[i]){let r=t.data[i].toString().match(/(.+)\?(.+)\s:\s(.+)/);if(r&&r.length>3){let n=I.trim(r[1]),a=!1;(n==="true"||n!=="undefined")&&(a=!0),(n==="false"||n==="")&&(a=!1),e[i]=a?r[2]:r[3],e[i]=I.trim(e[i])}else e[i]=t.data[i]}}),e}};var Y=class{constructor(t){this.service=t;this.engine=new B([H,G,q,L,V]),this.addDataSources()}addDataSources(){let t=this.service.manifest.DataSource,{View:e}=this.service.util;t&&t.forEach(i=>{if(i){let o=i.var||i.function;if(o){let r=e.find(o);this.engine.addDataSource(i.label,r)}}})}mapByNodeName(t,e,i){let o=this.getBaseNode(t,i);if(o&&o.params){let r=o.params;r.dataType&&this.engine.setDataTypes(r.dataType),r.dataFormat&&this.engine.setTransformers(r.dataFormat)}return this.engine.mapParamNode(e)}mapByEventName(t,e,i){let o=this.getBaseNode(t,i);return o&&o.events&&(o.dataTypes&&this.engine.setDataTypes(o.dataTypes),o.transformers&&this.engine.setTransformers(o.transformers)),this.engine.mapEventNode(e)}getBaseNode(t,e){let o=this.service.manifest[t],{ObjectUtil:r}=this.service.util;if(!o)return;this.engine.setConfig(o);let n=this.service.dataProxy.getData();e&&(n=r.merge(n,e)),this.engine.addDataSource("data",n),this.addDataSources();let a=this.service.manifest.SessionData;return a&&this.engine.addDataSource("session",a),o};var j=class{constructor(t){this.service=t;this.enabled=!1;this.header="[ts] ("+t.key+")"}log(...t){t.unshift(this.header),console.log(...t),this.notify("log",t)}debug(...t){t.unshift(this.header),console.debug(...t),this.notify("debug",t)}info(...t){t.unshift(this.header),console.info(...t),this.notify("info",t)}warn(...t){t.unshift(this.header),console.warn(...t),this.notify("warn",t)}notify(t,...e){let i={msg:t,obj:e};this.service.notify("LogEvent",i)}};var Q=class{ddReceivertify(t){this.receivers.forEach(e=>{e.onUpdate.call(e,t)})};var J=class{constructor(t){this.manifest=t}setItem(t,e){let i=this.manifest.SessionData||{};this.manifest.SessionData=Object.defineProperty(i,t,e)};var _=class{getId(t){let{View:e}=t.util;return new Promise((i,o)=>{let r=e.get("_satellite");if(!r)o("api not found");else if(typeof r.getVar=="function"){let n=r.getVar("ECID");n?i(n):o("mid not found")}else o("api method not found")})}};var W=class{getId(t){return this.util=t.util,new Promise((e,i)=>{var f;let r=t.manifest.AdobeData,n=(f=r==null?void 0:r.params)==null?void 0:f.serverInfo,a=n.marketingCloudOrgId;if(!(n&&a))i("adobe org id not found");else{let u=this.getAmcvId(a);u?(this.saveAmcvCookie(u,a,n.cookieDomain),e(u)):i("amcv not found")}})}getAmcvId(t){let{Cookie:e,View:i}=this.util,o="AMCV_"+this.encode(t),r=e.get(o),n=i.get("decodeURIComponent"),a=/MCMID\|(\d+)/,f;if(r&&n){let m=n(r).match(a);m&&m.length>1&&m[1]&&(f=m[1])}return f}saveAmcvCookie(t,e,i){let{Cookie:o}=this.util,r="AMCV_"+this.encode(e),n=this.encode("MCMID|")+t;o.set(r,n,i)};var z=class{getId(t){let{View:e}=t.util;return new Promise((i,o)=>{var r;if(!t.manifest)o("config not found");else{let n=t.manifest,a=n.Settings,f=n.AdobeData,u=(r=f==null?void 0:f.params)==null?void 0:r.serverInfo,m=u.marketingCloudOrgId;if(!(u&&m))o("adobe org id not found");else{let E=[e.getProtocol((a==null?void 0:a.ssl)||!1),u.demdexUrl,u.marketingCloudOrgId].join("");fetch(E).then(.then(k=>{let ct=k["d_mid"];ct?i(ct):o("mid not found")})}}})}};var X=class{getId(t){let{Cookie:e,View:i}=t.util;return new Promise((o,r)=>{let n=i.get("localStorage"),a=n?n.getItem("d_mid"):e.get("d_mid");a?o(a):r("mid not found")})}};var $=class{getId(t){let{View:e}=t.util;return new Promise((i,o)=>h(this,null,function*(){var m;let r=e.get("Visitor"),a=t.manifest.AdobeData,f=(m=a==null?void 0:a.params)==null?void 0:m.serverInfo,u=f.marketingCloudOrgId;if(!(r&&f&&u))o("unable to sync visitor id");else try{let p=yield this.requestMID(r,u);p||(p=yield this.requestMID(r,u,!0)),p?i(p):o("mid not found")}catch(p){o(p)}}))}requestMID(t,e,i){return new Promise((o,r)=>{let n=t.getInstance(e);if(n)if(i)n.getMarketingCloudVisitorID(;else{let a=n.getMarketingCloudVisitorID();o(a)}else r("visitor not found")})}};var O=class{exec(t){return h(this,null,function*(){this.service=t;let e=[_,$,W,X,z],i=e.length;for(let o=0;o<i;o++){let r;try{if(r=yield new e[o]().getId(t),r){this.saveMid(r);break}}catch(n){this.service.notify("RuntimeError",{e:n})}}})}saveMid(t){var n;let{Cookie:e,View:i}=this.service.util,o=this.service.logger;o.enabled&&o.debug("IdSyncTask "+t);let r=i.get("localStorage");if(r)r.setItem("d_mid",t);else{let f=this.service.manifest.AdobeData,u=(n=f==null?void 0:f.params)==null?void 0:n.serverInfo;e.set("d_mid",t,u.cookieDomain)}this.service.sessionData.setItem("d_mid",{value:t,writable:!1}),this.service.notify("CloudIdReady",{visitorId:t})}};var w=class extends x{constructor(e,i,o){super(e,o);this.key=e;this.config=i;this.service=o;this.notifications=[];this.bundle=["vtg",e.toLowerCase(),e].join(".")}onUpdate(e){this.notifications.push(e),this.receiver||this.createReceiver(),this.flushQueue()}flushQueue(){if(!this.receiver)return;let e=this.notifications.length;for(let i=0;i<e;i++){let o=this.notifications.shift();o&&this.receiver.onNotify(o)}}createReceiver(){let{View:e}=this.service.util,i=e.find(this.bundle);typeof i=="function"&&(this.receiver=new i(this.key,this.service),this.receiver.onRegister(),this.flushQueue())}onRemove(){this.flushQueue(),this.receiver&&this.receiver.onRemove(),this.receiver=null,this.notifications=null,this.key=null,this.config=null}};var Z=class{exec(t){let e=t.logger;e.enabled&&e.debug("RegistrationTask.exe");let{isNodeEnabled:i}=t.util.ConfigUtil,o=t.manifest;Object.keys(o).forEach(r=>{let n=o[r];i(n)&&this.register(r,n,t)})}register(t,e,i){let o=e.type||"default",r=w;switch(o){case"subscriber":r=P;break;default:r=w;break}let n=new r(t,e,i);i.notifier.addReceiver(n)}};var K=class{exec(t){let e=t.logger,{StringUtil:i}=t.util,o=!1,r=!0,n=t.dataRunner.getBaseNode("Settings");if(!n){e.warn("Settings"+" node is missing");return}let a=t.dataRunner.execDataRules(n);a&&(o=!!i.isTruthy(a.debug),r=!!i.isTruthy(a.ssl)),t.logger.enabled=o,e.enabled&&e.debug("SetDebugTask.exec"),t.sessionData.setItem("debug",{value:o,writable:!0}),t.sessionData.setItem("ssl",{value:r,writable:!0})}};var tt=class{constructor(t){this.service=t}exec(){let{isNodeEnabled:t}=this.service.util.ConfigUtil,e=[K,Z],i=this.service.manifest;t(i.AdobeMedia)&&e.push(O),e.forEach(o=>{new o().exec(this.service)})}};var st="hydra-api.dev.cbsivideo.com",S=S.TOKEN=st+"/v1/token",S.AUTH=st+"/v1/auth",S.EVENTS=st+"/v1/events";var T=class{constructor(){this.enabled=!1;this.hasAuth=!1;this.isPaused=!1;this.isAuthenticating=!1;this.isFlushing=!1;this.queue=[];this.order=0;this.count=0}static getInstance(){return T.instance||(T.instance=new T),T.instance}requestToken(t,e){let i={appName:t,platform:e};return new Promise((o,r)=>h(this,null,function*(){let a=yield(yield R.fetch({ssl:!0,url:S.TOKEN,body:i})).json();a.status==="Created"&&a.token?(this.enabled=!0,this.token=a.token,o(a.token)):r(a.status)}))}requestAuth(){if(this.isAuthenticating)return Promise.reject("busy");if(this.hasAuth)return Promise.resolve(this.streamId);let t={token:this.token};return this.isAuthenticating=!0,new Promise((e,i)=>h(this,null,function*(){let r=yield(yield R.fetch({ssl:!0,url:S.AUTH,body:t})).json();r.status==="Accepted"&&r.streamId?(this.streamId=r.streamId,this.hasAuth=!0,this.isAuthenticating=!1,e(r.streamId)):i(r.status)}))}flushQueue(t){t&&(this.isFlushing=!1),!this.isFlushing&&(this.isFlushing=!0,this.requestAuth().then(()=>{this.dispatchEvents().then(()=>{this.isFlushing=!1,t&&this.flushQueue()}).catch(e=>{this.onFlushError(e)})}).catch()}ispatchEvents(){if(this.queue.length===0)return Promise.resolve("ok");let e=JSON.stringify(this.queue).replace(T.STREAMID_REGEX,this.streamId);return this.queue=[],new Promise((i,o)=>h(this,null,function*(){let n=yield(yield R.fetch({ssl:!0,url:S.EVENTS,requestInit:{body:e}})).json();n.status==="ok"?i(n.status):o(n.status)}))}onTrackEvent(t,e){let i=e.senderId||"Client",o=e.category||"Track Event",r=e.timestamp||new Date().getTime();this.queue.push({streamId:"{streamId}".toString(),senderId:i,category:o,eventName:t,eventOrder:this.order++,timestamp:r,detail:e})}onNetworkResponse(t,e){let i={ok:t.ok,redirected:t.redirected,status:t.status,statusText:t.statusText,type:t.type,url:t.url,payload:e};this.queue.push({streamId:"{streamId}".toString(),senderId:"Client".toString(),category:"TS",eventName:"network".toString(),eventOrder:this.order++,timestamp:new Date().getTime(),detail:i})}onAviaEvent(t,e,i){let o=i.avia.PlayerEvent;switch(e.type===o.VIDEO_ELEMENT_ADDED&&delete e.detail,this.queue.push({streamId:"{streamId}".toString(),senderId:t,category:"AviaJS",eventName:e.type,eventOrder:this.order++,timestamp:e.timeStamp,detail:e.detail}),e.type){case o.QUALITY_CHANGE:case o.CONTENT_COMPLETE:case o.RESOURCE_END:case o.ERROR:this.flushQueue(!0);break;case o.CONTENT_PAUSED:case o.AD_PAUSED:this.flushQueue(!0),this.startHb(t),this.isPaused=!0;break;case o.CONTENT_PLAYING:case o.AD_PLAYING:this.flushQueue(),this.stopHb(),this.isPaused=!1;break}this.queue.length>=30&&this.flushQueue()}startHb(t){if(this.isPaused)return;let e=this.hbId=window.setInterval(e.bind(this),5e3)}ueueHbEvent(t){this.queue.push({streamId:"{streamId}".toString(),senderId:t,category:"AviaJS",eventName:"heartbeat".toString(),eventOrder:this.order++,timestamp:new Date().getTime()})}},b=T;b.STREAMID_REGEX=/{streamId}/g;var N=class{tatic getInstancenRegister(t){this.manifest||(this.manifest=t,this.logger=new j(this),this.notifier=new Q(this),this.dataProxy=new F(this),this.dataRunner=new Y(this),this.sessionData=new J(t),new tt(this).exec())}notify(t,e={}){let{DateUtil:i}=this.util;e.timestamp=e.timestamp||i.getTime(),e.serviceKey=this.key;let o={name:t,body:e};switch(t){case"NetworkRecovery":at(this.manifest);break}this.notifier.notify(o)}notifyAll(t,e){let i=N.instance;Object.keys(i).forEach(}=N;l.instance={};var et=class{exec(t){var a;let e=d.get("localStorage");if(!e)return;let i=e.getItem("HydraAppName");if(!i||i==="-1")return;let o=((a=t.manifest.Settings)==null?void 0:a.platform)||"web",r=e.getItem("HydraToken"),n=b.getInstance();r?(n.enabled=!0,n.token=r):n.requestToken(i,o).then(.catch(}};var it=class{exec(t){new O().exec(t.serviceApi)}};var ot=class{exec(t){let e=d.find("vtg.youbora.YouboraManager");if(!e){let o=t.serviceApi.logger;o&&o.warn("YouboraManager","Youbora library is not loaded in time for init, please move it above ts lib in loading queue");return}e.getInstance(t.serviceApi).newSession()}};var D=class{constructor(){this.commands=[et];this.started=!1;this.serviceApi=l.getInstance("app")}nch(t){!t||(this.serviceApi.manifest||this.serviceApi.onRegister(t),this.manifest=t,this.started=!0,this.startIdSync(t.AdobeMedia),this.startYoubora(t.Youbora),this.commands.forEach(e=>{new e().exec(this)}))}startIdSync(t){!y.isIdSyncPriority(t)||this.commands.push(it)}startYoubora(t){!y.isNodeEnabled(t)||this.commands.push(ot)}};function yt(c,t={}){let e=t&&t.playerId?l.getInstance(t.playerId):l.getInstance("app");if(!e.manifest){let o=d.find("vtg.config");if(o)e.onRegister(o);else throw"vtg.config not found"}e.dataProxy.update(t),e.notify(c,t);let i=e.getHydra();i.enabled&&i.onTrackEvent(c,t)}function St(){let c={};if(l.instance)for(let t in l.instance){let e=l.instance[t];c[t]=e.dataProxy.getData()}return c}unction At(c){let t=d.get("localStorage");!t||t.setItem("HydraAppName",c?c.toUpperCase():"-1")}function ut(){let c=d.find("vtg.config");c&&D.getInstance().start(c)}function at(c){c&&D.getInstance().restart(c)}ut();return ht(Rt);})();}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{"use strict";var vtg=vtg||{};vtg.aviatracking=(()=>{var p=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=E=var C=(s,t)=>{for(var e in t)p(s,e,{get:t[e],enumerable:!0})},N=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of b(t))!S.call(s,a)&&a!==e&&p(s,a,{get:()=>t[a],enumerable:!(i=D(t,a))||i.enumerable});return s};var P=s=>N(p({},"__esModule",{value:!0}),s);var B={};C(B,{AviaTracking:()=>d});var u=class{constructor(t){this.connector=t;this.startTime=0;this.playhead=0;this.mediaTime=0;this.chapterOffset=0;this.adPlayhead=0;this.utcTimeSeconds=0;this.lastUtcTime=0;this.seekTimestamp=0;this.pauseTimestamp=0;this.bufferTimestamp=0;this.adPlayheadMs=0;this.bufferingTimestamp=0;this.bufferingPlayhead=0;this.lastPlayhead=0;this.hasResourceStart=!1;this.hasAdBreakStart=!1;this.hasAdStart=!1;this.hasAdJoinSent=!1;this.hasResourceEnd=!1;this.isTimeShifted=!1;this.hasSeekStart=!1;this.hasContentPause=!1;this.hasAdPause=!1;let{DateUtil:e}=this.connector.serviceApi.util;this.initTime=e.getTime();let i=this.connector.services;this.ERROR_CODE_ENUM=i.avia.ErrorCode,this.RESOURCE_ATTACHMENT_END=i.avia.Measurement.RESOURCE_ATTACHMENT+":end"}getAdBreakInfo(){let t=this.connector.player.getAdBreakTimes(),e=t.length,i=t.map(.join(","),r=(this.getDetail()||{}).adBreakInfo,o=this.getContentInfo(),{ObjectUtil:n}=this.connector.serviceApi.util;if(r&&typeof r.adBreakType=="string"){let c=r.adBreakType.toLocaleLowerCase(),l="roll";c.indexOf(l)===-1?(r.adBreakType=c+l,r.adBreakTypeKey=c):r.adBreakTypeKey=c.replace(l,"")}return r.isDai=r.adTechnology&&r.adTechnology.indexOf("dai")>-1,r.adBreakCount=e,r.adBreakTimeList=i,r.adBreakList=t,n.merge(r,o)}getAdInfo(){let e=(this.getDetail()||{}).adInfo;return e.adUrl=e.adAssetUrl,e}getSessionInfo(){let{View:t,ObjectUtil:e}=this.connector.serviceApi.util,i=this.connector.services,a=this.connector.player,r=i.buildInfo;if(!a.resource)return null;let o=a.resource.metadata||{},n=a.resource.location,c=i.system,l=this.getContentInfo(),g={playerName:r.playerName,playerVersion:r.playerVersion,playerId:a.id,userCountry:o.country||"us",drmEnabled:this.isDrmEnabled(n),isMobile:!!c.isMobile,isPaidContent:!!o.isPaidContent,isAffiliateFeed:!!o.isAffiliateFeed,isPlaylist:!!o.isPlaylist,isFullscreen:!1,systemDevice:c&&c.device?c.device:"",screenSize:t.getSize(),initTime:this.initTime},v=e.merge;return v(g,v(o,l))}getContentInfo(){let{DateUtil:t}=this.connector.serviceApi.util,e=this.connector.player;if(!e.resource)return{};let i=e.resource.metadata||{},a=e.resource.location,r=a?a.mediaUrl:"",o=Math.abs(t.getTime()-this.startTime),n=e.resource.playback;return{timeToStart:o,mediaUrl:r,mediaId:i.videoId||"",duration:i.duration||e.contentDuration,bitrate:e.bitrate,isLive:this.isLive(),isDcrLive:!!i.isDcrLive,isEpisode:!!i.episodeFlag,streamType:this.getStreamType(),hasSessionResumed:!!(n&&n.startTime)}}getChapterInfo(){let t=this.chapterOffset,e=this.getPlayerInfo();return{chapterOffset:t,chapterIndex:t+1,chapterLength:e.srcDuration}}getPlayhead(){let t=this.getDetail()||{},i=this.connector.player.contentTime;return this.isLive()?this.playhead=t.elapsedTimeMs/1e3:this.isDvr()?this.playhead=this.getUtcPlayhead():i>-1&&(this.playhead=i,this.hasResourceEnd&&(this.playhead=t.duration)),isNaN(this.playhead)||(this.lastPlayhead=this.playhead),this.playhead}getElapsedTime(){return(this.getDetail()||{}).elapsedTimeMs||-1}getUtcPlayhead(){let t=this.connector.player,e=Math.floor(t.liveStreamUtcTime/1e3);if(e!==this.utcTimeSeconds){this.utcTimeSeconds=e;let i=new Date(t.liveStreamUtcTime),a=i.getUTCHours(),r=i.getUTCMinutes(),o=i.getUTCSeconds();this.lastUtcTime=a*60*60+r*60+o}return this.lastUtcTime}getPlayerInfo(){var o,n;let t=this.connector.services,e=this.connector.player,i=this.connector.eventApi.getData(),a=((o=e.dimensions)==null?void 0:o.width)||-1,r=((n=e.dimensions)==null?void 0:n.height)||-1;return{isPaused:this.isPlaybackStopped(),isAutoplay:!1,hasPreload:!1,width:a,height:r,srcWidth:a,srcHeight:r,srcDuration:Math.floor(e.streamDuration),srcBitrate:e.bitrate,isFullscreen:i.isFullscreen,srcMimeType:i.srcMimeType,srcUrl:"",posterUrl:"",language:t.localization.language,playerState:this.playerState,volume:this.connector.player.volume,muted:this.connector.player.muted}}getStreamType(){var a;let t=this.connector.player,i=(((a=t.resource)==null?void 0:a.metadata)||{}).streamType||t.streamType;return i?i.toUpperCase():""}isLive(){return this.getStreamType()==="LIVE"}isVod(){return this.getStreamType()==="VOD"}atePlayerInfo(){if(!this.hasResourceStart)return;let t={playerInfo:this.getPlayerInfo()};this.connector.serviceApi.dataProxy.update(t)}isPlaybackStopped(){let t=this.connector,e=t.services;return t.player.playbackState!==e.avia.PlaybackState.PLAYING}isDrmEnabled(t){if(!(t&&t.drm))return!1;let e=t.drm.aes,i=t.drm.fairplay,a=t.drm.playready,r=t.drm.widevine;return!!(e&&e.provider||i&&i.appCertUrl||a&&a.url||r&&r.url)}isTimeUpdated(){let t=!1,e=Math.floor(this.playhead);return this.mediaTime!==e&&(this.mediaTime=e,t=!0),t}etErrorInfo(t){let e=this.ERROR_CODE_ENUM,i=Object.keys(e).find(;return{errorName:t.category,errorMessage:t.message,errorCode:t.code,errorLabel:i}}isHeartbeat(){return this.isModulo(this.mediaTime)}sModulo(t){return Math.floor(t)%h.pingInterval===0}};var m=class{ost(t,e={}){let i=this.connector.serviceApi;switch(t){case"SessionStart":let r=i.manifest.Settings;i.dataProxy.update({platform:r==null?void 0:r.platform,version:i.getVersion()});break}e.playhead>-1?(e.playheadMs=e.playhead,e.playhead=Math.floor(e.playhead),this.playhead=e.playhead):e.playhead=this.playhead;let a=this.connector.aviaEvent;a&&a.timeStamp&&(e.timestamp=a.timeStamp),this.updateData(e),i.notify(t,e)}pdateData(t){let{DateUtil:e}=this.connector.serviceApi.util;t.utcSeconds=Math.round(e.getTime()/1e3),t.timestamp||(t.timestamp=e.getTime()),t.duration>0&&(t.durationMs=t.duration,t.duration=Math.floor(t.duration)),this.connector.serviceApi.dataProxy.update(t)};var I=class{constructor(t,e,i,a){this.player=t;this.options=e;this.services=i;this.serviceApi=a;this.eventQueue=[];this.isBufferingInProgress=!1;this.isPlaylist=!1;this.hasFatalError=!1;this.hasContentPlayingAfterFatalError=!1;let{Timer:r}=this.serviceApi.util,o=I.pingInterval*1e3;this.vo=new u(this),this.eventApi=new m(this),this.eventMap=this.bindPlayerEvents(),this.pingTimer=new r(o),this.bufferTimer=new r(o),this.hydra=a.getHydra()}onNotify(t){t.target=void 0,this.aviaEvent=t;let e=this.services.avia.PlayerEvent,i=this.serviceApi.logger;if(t.type===e.CLOCK)return;this.hydra.enabled&&(t.type===e.READY&&(t.detail.config=this.options.config),this.hydra.onAviaEvent(this.player.id,t,this.services)),i.enabled&&t.type!==e.CONTENT_PROGRESS&&this.logEvent(t);let a=this.eventMap[t.type];a&&a.call(this)}logEvent(t){this.serviceApi.logger.debug("onNotify \u2192 "+t.type,t.detail)}bindPlayerEvents(){let t=this.services.avia.PlayerEvent;return{[t.READY]:()=>{this.dispatch("AviaJsReady")},[t.RESOURCE_START]:()=>{this.vo.setStartTime(this.aviaEvent.timeStamp),this.vo.hasResourceStart=!0,this.vo.hasResourceEnd=!1,this.onSessionStart()},[t.PLAYBACK_STARTED]:()=>{this.dispatch("PlaybackStarted")},[t.RESOURCE_END]:()=>{let e=this.aviaEvent.detail;this.vo.hasResourceStart=!1,this.vo.hasResourceEnd=!0,this.stopHeartbeatTimer(),e.interrupted&&this.dispatch("ResourceInterrupt"),this.isPlaylist||this.dispatch("SessionEnd")},[t.LIVE_PRESENTATION_STOPPED]:()=>{this.dispatch("LiveUiStopped")},[t.CDN_CHANGE]:()=>{let e=this.aviaEvent.detail;this.dispatch("CdnChange",{cdn:e.cdn||""})},[t.DRM_KEY_SYSTEM_CREATED]:()=>{let e=this.aviaEvent.detail;this.dispatch("DrmCreated",{drmType:e.keySystem||"none"})},[t.STREAM_ID_AVAILABLE]:()=>{let e=this.aviaEvent.detail;this.eventApi.updateData({streamId:e.streamId})},[t.CONTENT_DURATION_AVAILABLE]:()=>{if(!this.aviaEvent.detail)return;let e=this.aviaEvent.detail.contentDuration;e&&this.eventApi.updateData({duration:e})},[t.QUALITY_INFO_CHANGE]:this.onBitrateChange,[t.QUALITY_CHANGE]:this.onBitrateChange,[t.CONTENT_SEGMENT_START]:[t.CONTENT_SEGMENT_END]:()=>{this.dispatch("ContentSegmentEnd"),this.vo.chapterOffset++},[t.CONTENT_START]:()=>{this.vo.lastPlayhead=NaN,this.stopBufferingHeartbeat(),this.dispatch("ContentStart",this.vo.getContentInfo())},[t.CONTENT_PLAYING]:()=>{let{DateUtil:e}=this.serviceApi.util;if(this.vo.hasContentPause){this.vo.hasContentPause=!1;let i=e.getElapsedSince(this.vo.pauseTimestamp);this.dispatch("ContentResume",{pauseElapsed:i}),this.vo.pauseTimestamp=0}this.dispatch("ContentPlaying"),this.hasFatalError&&(this.hasContentPlayingAfterFatalError=!0)},[t.CONTENT_COMPLETE]:()=>{this.dispatch("ContentEnd")},[t.METRIC]:()=>{let e=this.aviaEvent;if(e.detail.metric.key===this.vo.RESOURCE_ATTACHMENT_END&&this.dispatch("ResourceReady",E({},this.player.resource)),!this.vo.hasResourceStart||!e.detail)return;let i=this.services.avia,a=e.detail.metric;if(!(a.type!==i.MetricType.API||this.player.isAd))switch(a.key){case i.ApiMetric.GO_LIVE:this.onGoLive();break;case i.ApiMetric.SEEK:this.vo.seekTimestamp=this.aviaEvent.timeStamp,this.onSeekStart();break;case i.ApiMetric.PAUSE:this.dispatch("ContentPause"),this.vo.pauseTimestamp=this.aviaEvent.timeStamp,this.vo.hasContentPause=!0,this.pingTimer&&this.startHeartbeatTimer();break}},[t.SEEK_COMPLETE]:()=>{let{DateUtil:e}=this.serviceApi.util;if(!this.vo.hasSeekStart)return;this.vo.hasSeekStart=!1;let i=e.getElapsedSince(this.vo.seekTimestamp);this.dispatch("SeekEnd",{seekElapsed:i}),this.vo.seekTimestamp=0},[t.AD_BREAK_METADATA]:()=>{this.vo.adPlayhead=0,this.vo.hasAdBreakStart=!0,this.dispatch("AdBreakStart",this.vo.getAdBreakInfo())},[t.AD_START]:()=>{!this.vo.hasAdBreakStart||(this.vo.adPlayhead=0,this.dispatch("AdStart",this.vo.getAdInfo()),this.vo.hasAdStart=!0,this.vo.hasAdJoinSent=!1)},[t.AD_PAUSED]:()=>{!this.vo.hasAdBreakStart||(this.dispatch("AdPause"),this.vo.hasAdPause=!0,this.pingTimer&&this.startHeartbeatTimer())},[t.AD_FIRST_QUARTILE]:()=>{!this.vo.hasAdBreakStart||this.dispatch("AdFirstQuartile",{adPlayheadMs:this.vo.adPlayheadMs,quartileNumer:1})},[t.AD_MIDPOINT]:()=>{!this.vo.hasAdBreakStart||this.dispatch("AdMidQuartile",{adPlayheadMs:this.vo.adPlayheadMs,quartileNumer:2})},[t.AD_THIRD_QUARTILE]:()=>{!this.vo.hasAdBreakStart||this.dispatch("AdThirdQuartile",{adPlayheadMs:this.vo.adPlayheadMs,quartileNumer:3})},[t.AD_PROGRESS]:()=>{if(!this.vo.hasAdBreakStart||!this.aviaEvent.detail)return;let e=this.aviaEvent.detail.currentTime,i=Math.floor(e);this.vo.adPlayheadMs=e,i>0&&this.vo.adPlayhead!==i&&(this.vo.adPlayhead=i,this.dispatch("AdProgress"),this.vo.isAdHeartbeat()&&this.dispatch("AdHeartbeat"),this.stopHeartbeatTimer()),!this.vo.hasAdJoinSent&&this.vo.hasAdStart&&e>0&&(this.vo.hasAdJoinSent=!0,this.dispatch("AdJoin",{adPlayheadMs:this.vo.adPlayheadMs}))},[t.AD_SKIPPED]:()=>{!this.vo.hasAdBreakStart||this.dispatch("AdSkip")},[t.AD_STALLED]:()=>{!this.vo.hasAdBreakStart||this.dispatch("AdStalled")},[t.AD_COMPLETE]:()=>{!this.vo.hasAdBreakStart||(this.vo.hasAdStart=!1,this.stopBufferingHeartbeat(),this.dispatch("AdEnd",{adPlayheadMs:this.vo.adPlayheadMs}))},[t.AD_BREAK_COMPLETE]:()=>{!this.vo.hasAdBreakStart||(this.stopBufferingHeartbeat(),this.vo.hasAdBreakStart=!1,this.dispatch("AdBreakEnd"))},[t.FULLSCREEN_CHANGE]:()=>{let e=this.aviaEvent.detail;this.vo.updatePlayerInfo(),this.eventApi.updateData({isFullscreen:!!e.fullscreen}),e.fullscreen?this.onPlayerState("stateStart","fullScreen"):this.onPlayerState("stateEnd","fullScreen")},[t.PRESENTATION_SIZE_CHANGE]:[t.MUTE_CHANGE]:()=>{let e=this.aviaEvent.detail;this.onPlayerState(e.muted?"stateStart":"stateEnd","mute")},[t.TEXT_TRACK_ENABLED_CHANGE]:()=>{let i=this.aviaEvent.detail.textTrackEnabled;this.onPlayerState(i?"stateStart":"stateEnd","closedCaptioning")},[t.TEXT_TRACK_CHANGE]:()=>{let i=this.aviaEvent.detail.textTrack;this.dispatch("TextTrackChange",{textTrack:i})},[t.AUDIO_TRACK_CHANGE]:()=>{let i=this.aviaEvent.detail.audioTrack;this.dispatch("AudioTrackChange",{audioTrack:i})},[t.ERROR]:()=>{let e=this.aviaEvent.detail.error,i=this.services.avia.ErrorCategory,a=this.services.avia.ErrorCode;switch(e.category){case i.AD:this.dispatch("AdError"),(e.code===a.DAI_DATA_ERROR||e.code===a.DAI_NETWORK_ERROR)&&this.dispatch("DaiError"),e.fatal&&this.onError("FatalError",e);break;case i.RESOURCE:case i.VIDEO_START:e.fatal&&this.onError("FatalError",e);break;case i.PLAYBACK:if(e.fatal&&!this.hasFatalError)switch(this.onError("FatalError",e),e.code){case a.SHAKA_NETWORK_ERROR:case a.HLSJS_NETWORK_ERROR:case a.SHAKA_PARSE_ERROR:this.hasFatalError=!0,this.hasContentPlayingAfterFatalError=!1;break}break}},[t.METADATA_CUEPOINT]:()=>{let e=this.aviaEvent.detail;this.dispatch("CuePoint",{id3Info:e.cue})},[t.STREAM_METADATA]:()=>{let e=this.aviaEvent.detail;if(!(e&&e.fragment))return;let i=e.fragment.mimeType;!i&&e.manifest&&(i=e.manifest.mimeType),i&&this.dispatch("StreamMetadata",{srcMimeType:i})},[t.RESOURCE_BUFFERING]:()=>{let{DateUtil:e}=this.serviceApi.util;if(this.aviaEvent.detail.buffering)this.vo.bufferTimestamp=this.aviaEvent.timeStamp,this.dispatch("BufferStart"),this.startBufferingHeartbeat();else{let a=e.getElapsedSince(this.vo.bufferTimestamp);this.dispatch("BufferEnd",{bufferElapsed:a}),this.vo.bufferTimestamp=0}},[t.CONTENT_PROGRESS]:()=>{this.vo.hasContentPause||(this.stopHeartbeatTimer(),this.dispatch("ContentProgress"),this.vo.isTimeUpdated()&&(this.dispatch("TimeUpdate",{aviaEvent:this.aviaEvent}),this.vo.isHeartbeat()&&this.dispatch("Heartbeat"),this.serviceApi.logger.enabled&&this.logEvent(this.aviaEvent),this.isBufferingInProgress&&this.checkIfBufferingEnded()),this.onNetworkRecovery())},[t.PLAYBACK_STATE_CHANGE]:()=>{let e=this.aviaEvent.detail.playbackState,i=this.services.avia.PlaybackState;switch(e){case i.WAITING:this.dispatch("PlaybackStateWaiting");break;case i.PLAYING:this.vo.hasAdPause?(this.vo.hasAdPause=!1,this.dispatch("AdResume")):this.dispatch("PlaybackStatePlaying"),this.hasFatalError&&(this.hasContentPlayingAfterFatalError=!0);break}},[t.QUALITY_CHANGE]:()=>{let e=this.aviaEvent.detail.quality,i=this.vo.getQualityInfo(e);this.dispatch("QualityChange",i)},[t.AD_CLICK]:[t.AD_CUEPOINTS_AVAILABLE]:()=>{let e=this.aviaEvent.detail.adBreaks;this.dispatch("AdCuepointsAvailable",{adBreaks:e})}}}onSessionStart(){let t=this.vo.getSessionInfo();!t||(this.isPlaylist=!!t.isPlaylist,this.vo.updatePlayerInfo(),this.dispatch("SessionStart",t))}onPlayerState(t,e){!this.vo.hasResourceStart||(this.vo.playerState=e,this.vo.updatePlayerInfo(),this.dispatch("PlayerState",{playerState:{type:t,name:e}}))}onSeekStart(){this.vo.hasSeekStart=!0,this.dispatch("SeekStart"),this.vo.isDvr()&&!this.vo.isTimeShifted&&(this.onPlayerState("stateStart","timeShifted"),this.vo.isTimeShifted=!0)}onGoLive(){!this.vo.isTimeShifted||(this.onPlayerState("stateEnd","timeShifted"),this.vo.isTimeShifted=!1)}onBitrateChangenError(t,e){if(!(e&&e.code))return;let i=this.vo.getErrorInfo(e);this.dispatch(t,i)}startHeartbeatTimer(){if(this.pingTimer.running)return;let t=()=>{this.aviaEvent.timeStamp=Date.now(),this.dispatch("PausedHeartbeat",{timerElapsed:this.pingTimer.elapsed})};this.pingTimer.start(t.bind(this))}nNetworkRecovery(){if(this.hasFatalError&&this.hasContentPlayingAfterFatalError){this.hasFatalError=!1,this.hasContentPlayingAfterFatalError=!1,this.dispatch("NetworkRecovery");for(let t=this.eventQueue.length;t--;){let e=this.eventQueue.pop();e&&this.dispatch(e.id,e.data)}this.eventQueue=[]}}dispatch(t,e){let i=e||{},a=this.vo;i.playhead=a.getPlayhead(),i.adPlayhead=a.adPlayhead,i.utcPlayhead=this.player.liveStreamUtcTime,i.elapsedTime=a.getElapsedTime(),i.timestamp=this.aviaEvent.timeStamp,this.player.qualityInfo&&(i.bitrate=this.player.bitrate),i.isAd=this.player.isAd;let r=this.serviceApi.dataProxy.getData().isCTVAdPlaying;if(r&&(i.isAd=r),a.hasResourceStart&&(i.playerInfo=a.getPlayerInfo()),this.hasFatalError&&t!=="FatalError"){this.eventQueue.unshift({id:t,data:e});return}this.eventApi.post(t,i)}destroy(){this.stopHeartbeatTimer(),this.eventApi.destroy(),this.serviceApi.destroy(),this.vo=null,this.player=null,this.options=null,this.services=null,this.eventApi=null,this.eventMap=null,this.aviaEvent=null,this.serviceApi=null}startBufferingHeartbeat(){if(this.vo.isDvr()||(this.isBufferingInProgress=!0,this.vo.bufferingTimestamp=this.aviaEvent.timeStamp,this.vo.bufferingPlayhead=this.vo.getPlayhead(),this.bufferTimer.running))return;let t=()=>{this.aviaEvent.timeStamp=Date.now(),this.dispatch("BufferHeartbeat")};this.bufferTimer.start(t.bind(this))}stopBufferingHeartbeat(){this.vo.isDvr()||(this.isBufferingInProgress=!1,this.bufferTimer&&this.bufferTimer.running&&this.bufferTimer.stop())}checkIfBufferingEnded(){if(this.vo.isDvr())return;let t=this.vo.getPlayhead(),e=1;t-this.vo.bufferingPlayhead>e&&(this.stopBufferingHeartbeat(),this.dispatch("BufferComplete",{bufferCompletedTime:this.aviaEvent.timeStamp-this.vo.bufferingTimestamp}))}},h=I;h.pingInterval=10;var f=class{constructor(t,e,i){this.player=t;this.options=e;this.services=i;this.version="1.0.0-10:52:47";this.notifyHandler=let a=this.services.avia.PlayerEvent;for(let n in a)this.player.on(a[n],this.notifyHandler);let r=window.vtg,o;r&&r.ts&&(o=r.ts.ServiceApi.getInstance(t.id),o.onRegister(e.config)),this.connector=new h(t,e,i,o)}tatic createtroy(){let t=this.services.avia.PlayerEvent;for(let e in t)this.player.off(t[e],this.notifyHandler);this.connector.destroy(),this.player=null,this.options=null,this.services=null,this.connector=null,this.notifyHandler=null}},d=f;d.NAME="AviaTracking";(s=>{s.ts=s.ts||{},s.ts.AviaTracking=d})(window.vtg||{});return P(B);})();}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{"use strict";,2:[{}],3:[{"../custom-lodash":1,"../version.json":14,"./constants":2,"./item":5,"./listener":7,"./listenerManager":8,"./utils/customMerge":10}],4:[{"./dataLayerManager":3}],5:[{"../custom-lodash":1,"./constants":2,"./itemConstraints":6,"./utils/dataMatchesContraints":11}],6:[{}],7:[{"./constants":2}],8:[{"../custom-lodash":1,"./constants":2,"./utils/indexOfListener":12,"./utils/listenerMatch":13}],9:[{"../../custom-lodash":1}],10:[{"../../custom-lodash":1}],11:[{"../../custom-lodash":1}],12:[{"../../custom-lodash":1}],13:[{"../../custom-lodash":1,"../constants":2,"./ancestorRemoved":9}],14:[{}]},{},[4]);}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{(function(){'use strict';var f=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\]/;nction p(a,b){var c={},d=c;a=a.split(".");for(var e=0;e<a.length-1;e++)d=d[a[e]]={};d[a[a.length-1]]=b;return c}function q(a,b){var c=!a._clear,d;for(d in a)if(m(a,d)){var e=a[d];"array"===g(e)&&c?("array"===g(b[d])||(b[d]=[]),q(e,b[d])):n(e)&&c?(n(b[d])||(b[d]={}),q(e,b[d])):b[d]=e}delete b._clear};.prototype.process=function(){this.registerProcessor("set",;this.i=!0;for(var a=this.a.length,b=0;b<a;b++)v(this,[this.a[b]],!this.j)};r.prototype.get=r.prototype.flatten=r.prototype.registerProcessor=function v(a,b,c){c=void 0===c?!1:c;if(a.i&&(a.f.push.apply(a.f,b),!a.g))for(;0<a.f.length;){b=a.f.shift();if("array"===g(b))a:{var d=a.c;g(b[0]);for(var e=b[0].split("."),k=e.pop(),l=b.slice(1),h=0;h<e.length;h++){if(void 0===d[e[h]])break a;d=d[e[h]]}try{d[k].apply(d,l)}catch(w){}}else if("arguments"===g(b)){e=a;k=[];l=b[0];if(e.b[l])for(d=e.b[l].length,h=0;h<d;h++)k.push(e.b[l][h].apply(e.h,[].slice.call(b,1)));a.f.push.apply(a.f,k)}else if("function"==typeof b)try{b.call(a.h)}catch(w){}else if(n(b))for(var t in b)q(p(t,b[t]),a.c);else continue;c||(a.g=!0,a.l(a.c,b),a.g=!1)}}r.prototype.registerProcessor=r.prototype.registerProcessor;r.prototype.flatten=r.prototype.flatten;r.prototype.get=r.prototype.get;r.prototype.process=r.prototype.process;window.DataLayerHelper=r;})();}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{window.adobeDataLayer=window.adobeDataLayer||[];var stateHandler=function(event){if(event){var data={"event":"stateUpdate"};data.pageName=event.eventInfo.contextData.pageName;delete event.eventInfo.contextData.pageName;data.contextData=event.eventInfo.contextData;window.adobeDataLayer.push(data);var payload={"pageName":data.pageName};payload.contextData=adobeDataLayer.getState("contextData");var platform=window.utag&&window.utag.data?window.utag.data.ts_platformID:"unknown-platform"
payload.contextData["v.tealiumPlatformID"]=platform+"|"+window.location.hostname+window.location.pathname;}};var actionHandler=function(event){if(event){var data={"event":"stateUpdate"};data.contextData=event.eventInfo.contextData;window.adobeDataLayer.push(data);var payload={"linkType":"o"};payload.linkName=event.eventType;payload.contextData=adobeDataLayer.getState("contextData");payload.contextData.v.activity="actionCall";window.vtg.ts.track(vtg.ts.Event.AdobeData,payload);}};var mediaHandler=function(event){if(event&&event.eventType){switch(event.eventType){case"sessionStart":var data={"event":"stateUpdate"};data.contextData=event.eventInfo.contextData;window.adobeDataLayer.push(data);break;case"chapterStart":var data={"event":"stateUpdate"};data.contextData=event.eventInfo.contextData;data.contextData.v.activity="chapterStart";window.adobeDataLayer.push(data);window.vtg.ts.track(vtg.ts.Event.ChapterStart,{"playerId":event.eventInfo.playerId,"chapterIndex":event.eventInfo.chapterIndex,"chapterOffset":event.eventInfo.chapterOffset,"chapterLength":event.eventInfo.chapterLength});break;case"chapterComplete":window.vtg.ts.track(vtg.ts.Event.ChapterComplete,{"playerId":event.eventInfo.playerId});break;case"audioTrackChange":case"subtitleTrackChange":var data={"event":"stateUpdate"};data.contextData=event.eventInfo.contextData;window.adobeDataLayer.push(data);break;default:console.log("Default MCAPI event");}}};window.adobeDataLayer.push(function(dl){dl.addEventListener("action",actionHandler)},function(dl){dl.addEventListener("pageview",stateHandler)},;}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(typeof utag=="undefined"&&!utag_condload){var utag={id:"cbsi.webplex",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],db_log:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:lh:WQ:AS:GV:OU:RDdom:RDcp:RDqp:RDmeta:RDva:RDut:RDses:RDpv:RD:RC:SC:LOAD:EV:END:,DB:RP:view:function(a,c,d){return this.track({event:'view',data:a||{},cfg:{cb:c,uids:d}})},link:track:handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:test:LR:RE:trigger:C:,ut:{pad:vi:hasOwn:isEmptyObject:isEmpty:typeOf:flatten:merge:decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},encode:error:loader:};utag.o['cbsi.webplex']=utag;utag.cfg={template:"ut4.46.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,noconsole:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),datasource:"##UTDATASOURCE##".replace("##"+"UTDATASOURCE##",""),path:"//tags.tiqcdn.com/utag/cbsi/webplex/prod/",utid:"cbsi/webplex/202310091527"};utag.cfg.v=utag.cfg.template+"202310091527";utag.cond={12:0};utag.pagevars=function(ud){ud=ud||utag.data;try{ud['js_page.window.location.hostname']=window.location.hostname}catch(e){utag.DB(e)};try{ud['js_page.adobeDataLayer[0].eventInfo.g_brandId']=adobeDataLayer[0].eventInfo.g_brandId}catch(e){utag.DB(e)};try{ud['js_page.adobeDataLayer[0].eventInfo.g_language']=adobeDataLayer[0].eventInfo.g_language}catch(e){utag.DB(e)};try{ud['js_page.adobeDataLayer[0].eventInfo.g_countryName']=adobeDataLayer[0].eventInfo.g_countryName}catch(e){utag.DB(e)};try{ud['js_page.adobeDataLayer[0].eventInfo.g_coppa']=adobeDataLayer[0].eventInfo.g_coppa}catch(e){utag.DB(e)};try{ud['js_page.adobeDataLayer[0].eventInfo.g_brand']=adobeDataLayer[0].eventInfo.g_brand}catch(e){utag.DB(e)};try{ud['js_page.adobeDataLayer[0].eventInfo.g_platform']=adobeDataLayer[0].eventInfo.g_platform}catch(e){utag.DB(e)};};utag.loader.initdata=utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'12':try{c[12]|=(d['_demdexOptout']=='1')}catch(e){utag.DB(e)};break;}}};utag.pre=utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b,c,d,e,f,g){if((typeof b['js_page.adobeDataLayer[0].eventInfo.g_brand']!='undefined'&&typeof b['js_page.adobeDataLayer[0].eventInfo.g_brand']!='undefined'&&b['js_page.adobeDataLayer[0].eventInfo.g_brand']!='')){d=b['js_page.adobeDataLayer[0].eventInfo.g_brand'];if(typeof d=='undefined')return;c=[{'bet':'bet-dl'},{'cmt':'cmt-dl'},{'cc':'cc-dl'},{'logotv':'logotv-dl'},{'mtv':'mtv-dl'},{'nickanimation':'nickanimation-dl'},{'nickatnite':'nickatnite-dl'},{'paramountnetwork':'paramountnetwork-dl'},{'smithsonian':'smithsonian-dl'},{'tvland':'tvland-dl'},{'vh1':'vh1-dl'},{'southpark':'cc-dl'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['ts_platformID']=c[e][f];m=true};};if(m)break};if(!m)b['ts_platformID']='webTesting-unmappedDatalayer';}},function(a,b,c,d,e,f,g){if(typeof b['js_page.adobeDataLayer[0].eventInfo.g_brand']=='undefined'||typeof b['js_page.adobeDataLayer[0].eventInfo.g_brand']!='undefined'&&b['js_page.adobeDataLayer[0].eventInfo.g_brand']==''){d=b['js_page.window.location.hostname'];if(typeof d=='undefined')return;c=[{'(www\\.mtv\\.com)|(.*mtv.*webplex.*)|(.*local.*mtv)':'mtv-dom'},{'(www\\.cc\\.com)|(southpark\\.cc\\.com)|(.*cc.*webplex.*)|(.*local.*cc)':'cc-dom'},{'(www\\.paramountnetwork\\.com)|(.*paramountnetwork.*webplex.*)|(.*local.*paramountnetwork)|(.*paramount-paladin.*webplex.*)':'paramountnetwork-dom'},{'(www\\.vh1\\.com)|(.*vh1.*webplex.*)|(.*local.*vh1)':'vh1-dom'},{'(.*\\.nickanimation\\.com)|(.*\\.nickanimationdev\\.com)':'nickanimation-dom'},{'(www\\.bet\\.com)|(.*bet.*webplex.*)|(.*local.*bet)':'bet-dom'},{'(smithsonianchannel)':'smithsonianchannel-dom'},{'(tvland)':'tvland-dom'},{'(www\\.cmt\\.com)|(.*cmt.*webplex.*)|(.*local.*cmt)':'cmt-dom'},{'(logotv)':'logotv-dom'},{'(www\\.nickatnite\\.com)|(.*nickatnite.*webplex.*)|(.*local.*nickatnite)':'nickatnite-dom'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){g=new RegExp(f,'i');if(g.test(d)){b['ts_platformID']=c[e][f];m=true};};if(m)break};if(!m)b['ts_platformID']='webTesting-unmappedDomain';}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[94]=='undefined'){utag.runonce.ext[94]=1;if(1){function listener(model,message){if(message.event==="OneTrustLoaded"||message.event==="OneTrustGroupsUpdated"){b.priv_optanonConsentPerformance=message.OnetrustActiveGroups.includes(2)?"1":"0";b.priv_optanonConsentFunctional=message.OnetrustActiveGroups.includes(3)?"1":"0";b.priv_optanonConsentMarketing=message.OnetrustActiveGroups.includes(4)?"1":"0";b.priv_optanonConsentSocial=message.OnetrustActiveGroups.includes(5)?"1":"0";if(b.priv_optanonConsentPerformance==="0"){b._demdexOptout=1;}
utag.view(b);}}
if(window.dataLayer&&DataLayerHelper){window.gdlhelper=new DataLayerHelper(window.dataLayer,{listener:listener,listenToPast:true,});}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['priv_optanonConsentPerformance']=='0'){try{b['priv_adobeDataEnabled']=vtg.config.AdobeData.enabled=false}catch(e){};try{b['priv_adobeMediaEnabled']=vtg.config.AdobeMedia.enabled=false}catch(e){};try{b['comscore_v7_trigger']=vtg.config.ComscoreStreaming.enabled=false}catch(e){};try{b['mux_trigger']=vtg.config.Mux.enabled=false}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if(1){(function(w){if(w.utag&&w.utag.data){var env=w.utag.data['ut.env'];w.utag.data['isDev']=!!(env&&env!=='prod');}})(window);}}catch(e){utag.DB(e)}},function(a,b){try{if(/^bet-/i.test(b['ts_platformID'])){b['tc_network']='bet.com';b['tc_comscore_c3']='BETbrowser';b['tc_comscore_c4']='bet.com';b['tc_mux_sub_property_id']='BET Now US';b['tc_adobe_reportSuiteProduction']='betbetprod';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='smetrics'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^cmt-/i.test(b['ts_platformID'])){b['tc_network']='cmt.com';b['tc_comscore_c3']='CMTBrowser';b['tc_comscore_c4']='cmt.com';b['tc_mux_sub_property_id']='CMT US';b['tc_adobe_reportSuiteProduction']='cmtvia';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^cc-/i.test(b['ts_platformID'])){b['tc_network']='cc.com';b['tc_comscore_c3']='CCBrowser';b['tc_comscore_c4']='cc.com';b['tc_mux_sub_property_id']='Comedy Central US';b['tc_adobe_reportSuiteProduction']='viacomedycentral';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^logotv-/i.test(b['ts_platformID'])){b['tc_network']='logotv.com';b['tc_comscore_c3']='LogoTVBrowser';b['tc_comscore_c4']='logotv.com';b['tc_mux_sub_property_id']='Logo TV US';b['tc_adobe_reportSuiteProduction']='vialogoonline';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^mtv-/i.test(b['ts_platformID'])){b['tc_network']='mtv.com';b['tc_comscore_c3']='MTVBrowser';b['tc_comscore_c4']='mtv.com';b['tc_mux_sub_property_id']='MTV US';b['tc_adobe_reportSuiteProduction']='viamtv';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^nickanimation-/i.test(b['ts_platformID'])){b['tc_network']='nickanimation.com';b['tc_comscore_c3']='NickAnimationBrowser';b['tc_comscore_c4']='nickanimation.com';b['tc_mux_sub_property_id']='Nick US';b['tc_adobe_reportSuiteProduction']='vianickmarketing';b['tc_adobe_reportSuiteTest']='viawebplexdev';try{b['mux_trigger']=vtg.config.Mux.enabled=false}catch(e){};try{b['comscore_v7_trigger']=vtg.config.ComscoreStreaming.enabled=false}catch(e){};b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^nickatnite-/i.test(b['ts_platformID'])){b['tc_network']='nickatnite.com';b['tc_comscore_c3']='NickAtNiteBrowser';b['tc_comscore_c4']='nickatnite.com';b['tc_mux_sub_property_id']='NickatNite US';b['tc_adobe_reportSuiteProduction']='vianickatnite';b['tc_adobe_reportSuiteTest']='viawebplexdev';try{b['mux_trigger']=vtg.config.Mux.enabled=false}catch(e){};try{b['comscore_v7_trigger']=vtg.config.ComscoreStreaming.enabled=false}catch(e){};b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^paramountnetwork-/i.test(b['ts_platformID'])){b['tc_network']='paramountnetwork.com';b['tc_comscore_c3']='ParamountNetworkBrowser';b['tc_comscore_c4']='paramountnetwork.com';b['tc_mux_sub_property_id']='Paramount Network US';b['tc_adobe_reportSuiteProduction']='viaparamount';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^smithsonian/i.test(b['ts_platformID'])){b['tc_network']='smithsonianchannel.com';b['tc_comscore_c3']='SmithsonianChannelBrowser';b['tc_comscore_c4']='smithsonianchannel.com';b['tc_mux_sub_property_id']='Smithsonian Channel US';b['tc_adobe_reportSuiteProduction']='cbssmithtve';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^tvland-/i.test(b['ts_platformID'])){b['tc_network']='tvland.com';b['tc_comscore_c3']='TVLandBrowser';b['tc_comscore_c4']='tvland.com';b['tc_mux_sub_property_id']='TV Land US';b['tc_adobe_reportSuiteProduction']='tvland';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^vh1-/i.test(b['ts_platformID'])){b['tc_network']='vh1.com';b['tc_comscore_c3']='VH1Browser';b['tc_comscore_c4']='vh1.com';b['tc_mux_sub_property_id']='VH1 US';b['tc_adobe_reportSuiteProduction']='viavh1com';b['tc_adobe_reportSuiteTest']='viawebplexdev';b['tc_adobe_subdomain']='ssc'}}catch(e){utag.DB(e);}},function(a,b){try{if(/^webTesting-/i.test(b['ts_platformID'])){b['tc_network']='paramountnetwork.com';b['tc_comscore_c3']='testValue3';b['tc_comscore_c4']='testValue4';b['tc_mux_sub_property_id']='Test ID';b['tc_adobe_reportSuiteProduction']='viawebplexdev';b['tc_adobe_reportSuiteTest']='viawebplexdev'}}catch(e){utag.DB(e);}}];utag.handler.cfg_extend=[{"end":0,"blr":1,"alr":0,"id":"87","bwq":0},{"end":0,"blr":1,"id":"49","alr":0,"bwq":0},{"end":0,"blr":1,"alr":0,"id":"94","bwq":0},{"bwq":0,"alr":1,"blr":0,"id":"62","end":0},{"end":0,"blr":0,"alr":1,"id":"3","bwq":0},{"bwq":0,"end":0,"alr":1,"blr":0,"id":"40"},{"blr":0,"alr":1,"id":"83","end":0,"bwq":0},{"end":0,"blr":0,"alr":1,"id":"43","bwq":0},{"blr":0,"id":"84","alr":1,"end":0,"bwq":0},{"bwq":0,"id":"38","blr":0,"alr":1,"end":0},{"end":0,"blr":0,"alr":1,"id":"73","bwq":0},{"end":0,"blr":0,"alr":1,"id":"85","bwq":0},{"bwq":0,"alr":1,"blr":0,"id":"14","end":0},{"blr":0,"alr":1,"id":"81","end":0,"bwq":0},{"end":0,"blr":0,"id":"82","alr":1,"bwq":0},{"end":0,"blr":0,"alr":1,"id":"42","bwq":0},{"bwq":0,"alr":1,"blr":0,"id":"52","end":0}];utag.loader.initcfg=function(){utag.loader.cfg={"35":{load:4,send:1,v:202310091527,wait:1,tid:20010},"36":{load:4,send:1,v:202310091527,wait:1,tid:20010},"37":{load:1,send:1,v:202310051204,wait:1,tid:20010},"38":{load:4,send:1,v:202310051204,wait:1,tid:20010},"39":{load:1,send:1,v:202310051204,wait:1,tid:20010},"47":{load:((utag.cond[12])),send:1,v:202310051204,wait:1,tid:20010}};utag.loader.cfgsort=["35","36","37","38","39","47"];}
utag.loader.initcfg();}
if(typeof utag_cfg_ovrd!='undefined'){for(utag._i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[utag._i]=utag_cfg_ovrd[utag._i]};utag.loader.PINIT=utag.loader.INIT=if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',}else{utag.loader.PINIT()}}
//tealium universal tag - utag.35 ut4.0.202310091527, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
u.ev={view:1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){"use strict";window.vtg=window.vtg||{};window.vtg.adobedata=(()=>{var f=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var b=(i,t)=>{for(var e in t)f(i,e,{get:t[e],enumerable:!0})},O=(i,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of x(t))!y.call(i,r)&&r!==e&&f(i,r,{get:()=>t[r],enumerable:!(o=g(t,r))||o.enumerable});return i};var v=i=>O(f({},"__esModule",{value:!0}),i),R=(i,t,e,o)=>{for(var r=o>1?void 0:o?g(t,e):t,n=i.length-1,s;n>=0;n--)(s=i[n])&&(r=(o?s(t,e,r):s(r))||r);return o&&r&&f(t,e,r),r};var N=(i,t,e)=>new Promise((o,r)=>{var n=a=>{try{h(e.next(a))}catch(S){r(S)}},s=a=>{try{h(e.throw(a))}catch(S){r(S)}},h=h((e=e.apply(i,t)).next())});var U={};b(U,{AdobeData:);function u(i){return function(t,e,o){typeof o.value=="function"&&(typeof t.eventMap!="object"&&(t.eventMap={}),t.eventMap[i]||(t.eventMap[i]=o.value))}}var d=class{nUpdate(t){let o=this.eventMap[t.name];this.notification=t,o&&o.apply(this)}};var m=class{constructor(t,e){this.key=t;this.service=e;this.keepUndef=!1;let{StringUtil:o}=this.service.util;this.config=e.manifest[t];let r=this.mapByNodeName("serverInfo"),n=this.mapByNodeName("sessionInfo"),s=r||n;s&&(this.serverInfo=s,this.keepUndef=!!o.isTruthy(s["sendUndefined"]))}removeUndef(t){if(!t)return;let{StringUtil:e}=this.service.util,o={};return Object.keys(t).forEach(r=>{let n=t[r];e.isDefined(n)&&(o[r]=n)}),o}isAtLeast95(){let t=this.getData();return t&&t.isLive?!1:t.playhead>=t.duration*.95}isId3Owner(){let t=this.getData(),e=this.serverInfo,o=e?e.id3Owner:void 0;return t.id3Info&&t.id3Info.id===o}getLiveSegmentInfo(){let t=this.getData(),e=t.data,{StringUtil:o}=this.service.util,r={};if(e&&typeof e=="string"&&e.indexOf("|")>-1){let n=e.split("|"),s=o.trim;n.length>1&&(r={segmentId:s(n[0]),segmentTitle:s(n[1]),segmentEdition:s(n[2]),segmentOwner:t.id},this.service.dataProxy.update(r))}return r}apByNodeName(t,e){let o=this.service.dataRunner.mapByNodeName(this.key,t,e);return this.keepUndef?o:this.removeUndef(o)}mapByEventName(t,e){let o=this.service.dataRunner.mapByEventName(this.key,t,e);return this.keepUndef?o:this.removeUndef(o)}};var I=class extends d{constructor(e,o){super(e,o);this.key=e;this.service=o;this.queue=[];this.version="1.1.0-10:52:37";this.config=o.manifest[e],this.dataAccess=new m(e,o)}onNotify(e){let{View:o}=this.service.util;this.dependency?(this.sdk||(this.sdk=o.get(this.dependency.name)),this.queue.unshift(e),this.flush()):this.dispatch(e)}flush(){if(this.dependency&&!this.sdk)return;let e=this.queue.length;for(;e--;){let o=this.queue.pop();o&&this.dispatch(o)}}dispatch(e){let r=this.eventMap[e.name];this.notification=e,r&&r.apply(this)}};var D=((D||{});var p=class{constructor(t){this.receiver=t;this.ssl=!0;let e=t.service.sessionData;this.ssl=!!e.getItem("ssl")}getServerInfo(){if(this.serverInfo=this.mapByNodeName("serverInfo"),!!(this.serverInfo&&this.serverInfo.dataUrl))return this.apiUrl=this.serverInfo.dataUrl,delete this.serverInfo.dataUrl,delete this.serverInfo.demdexUrl,this.serverInfo};var l=class{getXml(t){return['<?xml version="1.0" encoding="UTF-8"?>',"<request>",this.toXml(t),"</request>"].join("")}toXml(t){let e="<{key}>{value}</{key}>",o="";return Object.keys(t).forEach(r=>{o+=e.replace(/{key}/g,r).replace(/{value}/g,typeof t[r]!="object"?this.replace(t[r]):this.toXml(t[r]))}),o}replace(t){if(!t)return t;let e=o=>["&",o,";"].join("");return t.toString().replace(/&|"|'|<|>/g,o=>{let r=o.toString();switch(r){case"&":r=e("amp");break;case'"':r=e("quot");break;case"'":r=e("apos");break;case"<":r=e("lt");break;case">":r=e("gt");break}return r})}};var c=class extends I{constructor(){super(...arguments);this.dataqueue=[];this.isReady=!1}onRegister(){this.vo=new p(this),this.xml=new l}onIdReady(){let e=this.vo.getServerInfo(),o=this.service.logger;if(!e){o.warn("adobe data server info node is missing");return}this.isReady=!0,this.flush()}onAdobeData(){let e=this.notification.body;!e||this.track(e)}tracklush(){for(let e=this.dataqueue.length;e--;){let o=this.dataqueue.pop();this.send(o)}}send(e){if(!e)return;let o=this.vo.serverInfo;if(!!o){for(let r in o)e[r]||(e[r]=o[r]);Object.keys(D).forEach(,this.post(e)}}post(e){return N(this,null,function*(){let{FetchUtil:o}=this.service.util,r={method:"POST",headers:{"Content-type":"application/xml"},body:this.xml.getXml(e)};return o.fetch({ssl:this.vo.ssl,url:this.vo.apiUrl,requestInit:r})})};R([u("CloudIdReady")],c.prototype,"onIdReady",1),R([u("AdobeData")],c.prototype,"onAdobeData",1);return v(U);})();}}catch(e){utag.DB(e)}}];u.send=utag.o[loader].loader.LOAD(id);})("35","cbsi.webplex");}catch(error){utag.DB(error);}

//tealium universal tag - utag.36 ut4.0.202310091527, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=else{u.loader=utag.ut.loader;}
u.ev={view:1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){"use strict";window.vtg=window.vtg||{};window.vtg.adobemedia=(()=>{var l=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var A=y=var E=a=var p=var B={};A(B,{AdobeMedia:()=>o});function i(h){return function(s,t,e){typeof e.value=="function"&&(typeof s.eventMap!="object"&&(s.eventMap={}),s.eventMap[h]||(s.eventMap[h]=e.value))}}var S=class{constructor(s,t){this.key=s;this.service=t}onUpdate(s){let e=this.eventMap[s.name];this.notification=s,e&&e.apply(this)}};var T=class{constructor(s,t){this.key=s;this.service=t;this.keepUndef=!1;let{StringUtil:e}=this.service.util;this.config=t.manifest[s];let r=this.mapByNodeName("serverInfo"),n=this.mapByNodeName("sessionInfo"),c=r||n;c&&(this.serverInfo=c,this.keepUndef=!!e.isTruthy(c["sendUndefined"]))}removeUndef(s){if(!s)return;let{StringUtil:t}=this.service.util,e={};return Object.keys(s).forEach(r=>{let n=s[r];t.isDefined(n)&&(e[r]=n)}),e}isAtLeast95(){let s=this.getData();return s&&s.isLive?!1:s.playhead>=s.duration*.95}isId3Owner(){let s=this.getData(),t=this.serverInfo,e=t?t.id3Owner:void 0;return s.id3Info&&s.id3Info.id===e}getLiveSegmentInfo(){let s=this.getData(),t=s.data,{StringUtil:e}=this.service.util,r={};if(t&&typeof t=="string"&&t.indexOf("|")>-1){let n=t.split("|"),c=e.trim;n.length>1&&(r={segmentId:c(n[0]),segmentTitle:c(n[1]),segmentEdition:c(n[2]),segmentOwner:s.id},this.service.dataProxy.update(r))}return r}getData(){return this.service.dataProxy.getData()}mapByNodeName(s,t){let e=this.service.dataRunner.mapByNodeName(this.key,s,t);return this.keepUndef?e:this.removeUndef(e)}mapByEventName(s,t){let e=this.service.dataRunner.mapByEventName(this.key,s,t);return this.keepUndef?e:this.removeUndef(e)}};var m=class extends S{constructor(t,e){super(t,e);this.key=t;this.service=e;this.queue=[];this.version="1.2.0-10:52:42";this.config=e.manifest[t],this.dataAccess=new T(t,e)}onNotify(t){let{View:e}=this.service.util;this.dependency?(this.sdk||(this.sdk=e.get(this.dependency.name)),this.queue.unshift(t),this.flush()):this.dispatch(t)}flush(){if(this.dependency&&!this.sdk)return;let t=this.queue.length;for(;t--;){let e=this.queue.pop();e&&this.dispatch(e)}}dispatch(t){let r=this.eventMap[t.name];this.notification=t,r&&r.apply(this)}};var R=class{constructor(s){this.receiver=s;this.maxWaitTime=12e4;this.maxSessionTime=30;this.startTime=0;this.hasChapterInfoNode=!1;let{DateUtil:t}=this.receiver.service.util,e=this.receiver.dataAccess,r=this.receiver.service.logger,n=e.mapByNodeName("serverInfo");if(!n){r.enabled&&r.warn("serverInfo"+" node is missing");return}n.maxSessionStartWaitTime&&(this.maxWaitTime=n.maxSessionStartWaitTime),n.maxSessionTimeoutMinutes&&(this.maxSessionTime=n.maxSessionTimeoutMinutes),this.serverInfo=n,this.startTime=t.getTime(),this.playerStateNode=e.mapByNodeName("playerStates"),this.hasChapterInfoNode=!!e.mapByNodeName("chapterInfo")}getSessionUrl(){let{StringUtil:s}=this.receiver.service.util,t=s.trimFwdSlash,e=this.serverInfo,r=t(e["sessionsPath"]||e.urlPath);return this.host=t(e["apiServerHost"]||e.serverUrl),[this.host,r].join("/")}getEventUrl(s){let t=s.replace(/^\/|\/$/g,""),e=this.serverInfo,{StringUtil:r}=this.receiver.service.util,n=r.trimFwdSlash(e["eventsPath"]||"events");return[this.host,t,n].join("/")}getSessionInfo(){var I;let{ObjectUtil:s,StringUtil:t}=this.receiver.service.util,e=this.getPayload("sessionStart"),r=s.merge;e.params=r(this.mapByNodeName("mediaInfo"),this.mapByNodeName("accountInfo")),e.customMetadata=this.mapByNodeName("customData"),e.qoeData=this.mapByNodeName("qoeData");let n=e.params["visitor.marketingCloudUserId"],c=(I=this.receiver.config.params)==null?void 0:I["accountInfo"];return c&&c["analytics.aid"]&&!t.isDefined(n)&&delete e.params["visitor.marketingCloudUserId"],e}getPayload(s){let{DateUtil:t}=this.receiver.service.util,e=this.receiver.service.dataProxy.getData(),r={eventType:s,playerTime:{playhead:e.playhead,ts:t.getTime()},params:{}};switch(s){case"adBreakStart":r.params=this.mapByNodeName("adBreakInfo");break;case"adStart":r.params=this.mapByNodeName("adInfo");break;case"chapterStart":r.params=this.mapByNodeName("chapterInfo"),r.customMetadata=this.mapByNodeName("customData");break;case"error":r.qoeData=this.mapByNodeName("errorInfo");break;case"bitrateChange":r.qoeData=this.mapByNodeName("bitrateInfo");break;case"stateStart":case"stateEnd":r.params=this.mapByNodeName("playerInfo");break}return r}isMaxWaitTime(){let{DateUtil:s}=this.receiver.service.util;return s.getTime()-this.startTime>this.maxWaitTime}hasId3Tracking(){let s=this.serverInfo,{StringUtil:t}=this.receiver.service.util;return s.hasOwnProperty("id3Tracking")?t.isTruthy(s.id3Tracking):!0}hasBitrateInfo(){let s=this.receiver.config.params;return!!(s&&s["bitrateInfo"])}mapByNodeName;var o=class extends m{constructor(){super(...arguments);this.hasSession=!1;this.hasSessionRequest=!1;this.hasChapterTracking=!0;this.hasContentStart=!1;this.hasStateChange=!1;this.hasAdStart=!1;this.hasInterrupted=!1;this.hasBitrateInfo=!1;this.isIdReady=!1;this.pausedTime=-1;this.liveStreamSegmentCount=0;this.pingInterval=10;this.ssl=!0}nAdStart(){this.hasAdStart=!0,this.track("adStart")}onAdPause(){this.track("pauseStart"),this.pause()}onAdQuartile(){this.adHb()}onAdSkip(){this.track("adSkip")}nAdBreakEnd(){this.track("adBreakComplete"),this.hasStateChange=!0,this.hasContentStart=!0,this.hasAdStart=!1}nContentEnd(){this.hasContentStart=!1}onContentSegmentStart(){!this.hasChapterTracking||this.chapterStart()}onContentSegmentEndnBufferStart(){!this.hasContentStart||(this.hasStateChange=!0,this.track("bufferStart"))}onSeekStart(){!this.hasContentStart||(this.hasStateChange=!0)}onCuePoint(){if(!this.vo.hasId3Tracking()||!(this.getData().isLive||this.dataAccess.isId3Owner()))return;let t=this.dataAccess.getLiveSegmentInfo();if(!t.segmentId)return;let e=t.segmentId;this.liveSegmentId!==e&&(this.liveSegmentId=e,this.end(),this.liveStreamSegmentCount++,this.service.dataProxy.update({liveStreamSegmentCount:this.liveStreamSegmentCount}),this.contentStart())}onFatalError(){this.track("error"),this.track("sessionEnd"),this.hasSession=!1,this.hasSessionRequest=!1,this.hasContentStart=!1}onPlayerState(){if(!this.hasSession)return;let t=this.getData().playerState;this.vo.playerStateNode&&this.vo.playerStateNode[t.name]&&this.track(t.type)}onChapterStart(){this.chapterStart()}onChapterComplete(){this.chapterEnd()}onContentResume(){this.resume()}onContentStart(){this.contentStart()}onAdResume(){this.resume()}onTimeUpdate(){this.play()}onHeartbeat(){this.ping()}onPausedHeartbeat(){this.ping()}onSessionEnd(){this.end()}BitrateChange(){let t=this.getData();!isNaN(t.bitrate)&&this.hasBitrateInfo&&this.track("bitrateChange")}onRegister(){let{StringUtil:t}=this.service.util;this.vo=new R(this),this.eventQueue=[],this.ssl=!!this.service.sessionData.getItem("ssl");let e=this.vo.serverInfo;if(e){let r=e["aviaChapterTracking"];this.hasChapterTracking=t.isTruthy(r),e.pingInterval&&(this.pingInterval=e.pingInterval)}}onRemove(){this.vo=null,this.eventMap=null}flush(){return p(this,null,function*(){let{FetchUtil:t}=this.service.util,e=this.service.logger;if(!this.hasSession)return;let r=this.getData(),n=this.eventQueue;(()=>p(this,null,function*(){let I=[];for(let d=n.length;d--;){let f=this.eventQueue.pop();I.push(new Promise((N,P)=>{t.fetch({ssl:this.ssl,url:this.eventUrl,body:f}).then(u=>{this.onNetworkResponse(u,f),N(u)}).catch(u=>{e.enabled&&e.warn(u),this.service.notify("RuntimeError",u),N(!1)})}))}return(yield Promise.all(I)).filter(}))()})}start(){return p(this,null,function*(){if(!this.isIdReady||this.hasSessionRequest)return;this.hasSessionRequest=!0,this.hasInterrupted=!1,this.sessionInfo=this.vo.getSessionInfo(),this.hasBitrateInfo=this.vo.hasBitrateInfo();let{FetchUtil:t}=this.service.util,e=yield t.fetch({ssl:this.ssl,url:this.vo.getSessionUrl(),body:this.sessionInfo});if(this.onNetworkResponse(e,this.sessionInfo),e.ok){let r=e.headers.get("location");if(!r)throw"error"+": location not found";this.hasSession=!0,this.eventUrl=this.vo.getEventUrl(r),this.flush()}else throw this.hasSessionRequest=!1,this.service.notify("RuntimeError",e),"error"+e.statusText})}onNetworkResponse(t,e){let r=this.service.getHydra();r.enabled&&r.onNetworkResponse(t,e)}track(t){let e=this.vo.getPayload(t);this.eventQueue.unshift(e),this.flush(),!this.hasInterrupted&&(this.hasSession||this.start())}contentStarthapterStart(){this.vo.hasChapterInfoNode&&this.track("chapterStart")}chapterEndlay(){this.hasStateChange&&(this.hasStateChange=!1,this.track("play")),this.hasSession||this.start()}adHb(){this.hasAdStart||this.eventMap["AdStart"].call(this),this.ping()}nd(){if(!this.hasSession){this.hasSessionRequest=!1;return}let t=this.getData();this.dataAccess.isAtLeast95()&&!t.isLive?this.track("sessionComplete"):this.track("sessionEnd"),this.hasSession=!1,this.hasSessionRequest=!1,this.hasContentStart=!1,this.sessionInfo=null}checkPausedTime(){let{DateUtil:t}=this.service.util;if(this.pausedTime===-1)return;t.getElapsedSince(this.pausedTime)/6e4>=this.vo.maxSessionTime&&(this.end(),this.contentStart())}getData(){return this.service.dataProxy.getData()}pause(){let{DateUtil:t}=this.service.util;this.hasStateChange=!0,this.pausedTime=t.getTime()};a([i("AdBreakStart")],o.prototype,"onAdBreakStart",1),a([i("AdStart")],o.prototype,"onAdStart",1),a([i("AdPause")],o.prototype,"onAdPause",1),a([i("AdFirstQuartile"),i("AdMidQuartile"),i("AdThirdQuartile")],o.prototype,"onAdQuartile",1),a([i("AdSkip")],o.prototype,"onAdSkip",1),a([i("AdEnd")],o.prototype,"onAdEnd",1),a([i("AdBreakEnd")],o.prototype,"onAdBreakEnd",1),a([i("ContentPause")],o.prototype,"onContentPause",1),a([i("ContentEnd")],o.prototype,"onContentEnd",1),a([i("ContentSegmentStart")],o.prototype,"onContentSegmentStart",1),a([i("ContentSegmentEnd")],o.prototype,"onContentSegmentEnd",1),a([i("BufferStart")],o.prototype,"onBufferStart",1),a([i("SeekStart")],o.prototype,"onSeekStart",1),a([i("CuePoint")],o.prototype,"onCuePoint",1),a([i("FatalError")],o.prototype,"onFatalError",1),a([i("PlayerState")],o.prototype,"onPlayerState",1),a([i("ChapterStart")],o.prototype,"onChapterStart",1),a([i("ChapterComplete")],o.prototype,"onChapterComplete",1),a([i("ContentResume")],o.prototype,"onContentResume",1),a([i("ContentStart")],o.prototype,"onContentStart",1),a([i("AdResume")],o.prototype,"onAdResume",1),a([i("TimeUpdate")],o.prototype,"onTimeUpdate",1),a([i("Heartbeat")],o.prototype,"onHeartbeat",1),a([i("PausedHeartbeat")],o.prototype,"onPausedHeartbeat",1),a([i("SessionEnd")],o.prototype,"onSessionEnd",1),a([i("ResourceInterrupt")],o.prototype,"onResourceInterrupt",1),a([i("CloudIdReady")],o.prototype,"onIdReady",1),a([i("BitrateChange"),i("QualityChange")],o.prototype,"onBitrateChange",1);return E(B);})();}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("36","cbsi.webplex");}catch(error){utag.DB(error);}

//tealium universal tag - utag.38 ut4.0.202310091527, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
u.ev={view:1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){!((window,"NOLBUNDLE");"use strict";window.vtg=window.vtg||{};window.vtg.nielsen=(()=>{var u=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var N=(n,t)=>{for(var e in t)u(n,e,{get:t[e],enumerable:!0})},R=(n,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of D(t))!g.call(n,r)&&r!==e&&u(n,r,{get:()=>t[r],enumerable:!(o=l(t,r))||o.enumerable});return n};var T=n=>R(u({},"__esModule",{value:!0}),n),d=(n,t,e,o)=>{for(var r=o>1?void 0:o?l(t,e):t,a=n.length-1,I;a>=0;a--)(I=n[a])&&(r=(o?I(t,e,r):I(r))||r);return o&&r&&u(t,e,r),r};var x={};N(x,{Nielsen:()=>i});function S(n){return function s(n){return function(t,e,o){typeof o.value=="function"&&(typeof t.eventMap!="object"&&(t.eventMap={}),t.eventMap[n]||(t.eventMap[n]=o.value))}}var c=class{constructor(t,e){this.key=t;this.service=e}onUpdate(t){let o=this.eventMap[t.name];this.notification=t,o&&o.apply(this)}};var p=class{constructor(t,e){this.key=t;this.service=e;this.keepUndef=!1;let{StringUtil:o}=this.service.util;this.config=e.manifest[t];let r=this.mapByNodeName("serverInfo"),a=this.mapByNodeName("sessionInfo"),I=r||a;I&&(this.serverInfo=I,this.keepUndef=!!o.isTruthy(I["sendUndefined"]))}removeUndef(t){if(!t)return;let{StringUtil:e}=this.service.util,o={};return Object.keys(t).forEach(r=>{let a=t[r];e.isDefined(a)&&(o[r]=a)}),o}isAtLeast95(){let t=this.getData();return t&&t.isLive?!1:t.playhead>=t.duration*.95}isId3Owner(){let t=this.getData(),e=this.serverInfo,o=e?e.id3Owner:void 0;return t.id3Info&&t.id3Info.id===o}getLiveSegmentInfo(){let t=this.getData(),e=t.data,{StringUtil:o}=this.service.util,r={};if(e&&typeof e=="string"&&e.indexOf("|")>-1){let a=e.split("|"),I=o.trim;a.length>1&&(r={segmentId:I(a[0]),segmentTitle:I(a[1]),segmentEdition:I(a[2]),segmentOwner:t.id},this.service.dataProxy.update(r))}return r}getData(){return this.service.dataProxy.getData()}mapByNodeName(t,e){let o=this.service.dataRunner.mapByNodeName(this.key,t,e);return this.keepUndef?o:this.removeUndef(o)}mapByEventName(t,e){let o=this.service.dataRunner.mapByEventName(this.key,t,e);return this.keepUndef?o:this.removeUndef(o)}};var f=class extends c{constructor(e,o){super(e,o);this.key=e;this.service=o;this.queue=[];this.version="1.3.0-10:53:34";this.config=o.manifest[e],this.dataAccess=new p(e,o)}onNotify(e){let{View:o}=this.service.util;this.dependency?(this.sdk||(this.sdk=o.get(this.dependency.name)),this.queue.unshift(e),this.flush()):this.dispatch(e)}flush(){if(this.dependency&&!this.sdk)return;let e=this.queue.length;for(;e--;){let o=this.queue.pop();o&&this.dispatch(o)}}dispatch(e){let r=this.eventMap[e.name];this.notification=e,r&&r.apply(this)}};var m=class{constructor(t){this.receiver=t;let e=t.dataAccess.mapByNodeName("sessionInfo");if(e)this.sessionInfo=e;else{let o=t.service.logger;o.enabled&&o.warn("nielsen session info node is missing")}}getPlayhead(){let t=this.getData(),e=t.isAd?t.adPlayhead:t.playhead;return t.isLive?t.utcSeconds:e}isVodOrDcr(){let t=this.getData(),e=t.streamType;return t.isDcrLive||e.toLowerCase()==="vod"}getData(){return this.receiver.service.dataProxy.getData()}};var i=class extends f{nRegister(){let{View:e}=this.service.util;this.vo=new m(this),this.sdk=e.get("NOLBUNDLE")}onAdStart(){this.load()}onAdEnd(){this.stop()}onAdProgress(){this.progress()}SessionStart(){this.start()}onSessionEnd(){this.end()}onTimeUpdate(){this.vo.getData().isAd||!this.vo.isVodOrDcr()||this.progress()}onPlayerError(){this.stop(),this.end()}onCuePoint(){let e=this.vo.getData().id3Info,o=this.vo.sessionInfo;o&&e&&e.id===o.id3Owner&&this.sdkInstance.ggPM("sendID3",e.info)}start(){let e=!!this.service.sessionData.getItem("debug"),o=this.vo.sessionInfo;!o||(!e&&o.nol_sdkDebug&&delete o.nol_sdkDebug,this.sdkInstance=this.sdk.nlsQ(o.appId,"nolInstance",o),this.vo.isVodOrDcr()||this.load())}load(){let o=this.vo.getData().isAd?"adInfo":"mediaInfo",r=this.dataAccess.mapByNodeName(o);this.sdkInstance.ggPM("loadMetadata",r),this.progress()}stop(){this.track("stop"),this.hasLoaded=!1}progress(){this.track("setPlayheadPosition")}rack(e){!this.sdkInstance||this.sdkInstance.ggPM(e,this.vo.getPlayhead())};d([s("AdStart")],i.prototype,"onAdStart",1),d([s("AdEnd")],i.prototype,"onAdEnd",1),d([s("AdProgress")],i.prototype,"onAdProgress",1),d([s("ContentSegmentStart"),s("ContentStart")],i.prototype,"onContentStart",1),d([s("ContentEnd"),s("ResourceInterrupt"),s("ContentPause")],i.prototype,"onContentEnd",1),d([s("SessionStart")],i.prototype,"onSessionStart",1),d([s("SessionEnd")],i.prototype,"onSessionEnd",1),d([s("TimeUpdate")],i.prototype,"onTimeUpdate",1),d([s("PlayerError"),s("FatalError")],i.prototype,"onPlayerError",1),d([s("CuePoint")],i.prototype,"onCuePoint",1),i=d([S({name:"NOLBUNDLE",type:"object"})],i);return T(x);})();}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("38","cbsi.webplex");}catch(error){utag.DB(error);}
(();