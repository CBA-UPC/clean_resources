(function($) {
  $(document).ready(function() {
    var ESC_KEYCODE = 27;

    var navHeight = 0;
    var offset = 144;

    var topPos = $(this).scrollTop();
    var bottomPos = topPos + window.innerHeight;
    var direction;

    var $sections = $(".event-section").filter(function( index ) {
      return $(this).attr("id").length > 0;
    });

    var $navSections = $(".event-progress__section");
    var $eventDots = $(".event-progress__dot");

    var $footerTop = $(".footer").offset().top;

    var selectedColor = function(dot) {
      var color = dot.data("color");

      $eventDots.css("border-color", "");
      dot.css("border-color", color);

      $eventDots.children().css({"background-color": "", "border-color": ""});
      dot.children().css({"background-color": color, "border-color": color});
    };

    $eventDots.on("click", function() {
      var $this = $(this);
      var target = $this.data("target");

      if (target) {
        var newTop;

        newTop = $("#" + target).offset().top - navHeight - offset;

        window.scrollTo({top: newTop, behavior: "smooth"});
      }
    });

    $(window).on("scroll", function() {
      var newTopPos = $(this).scrollTop();

      direction = newTopPos > topPos ? "down" : "up";

      if ($footerTop < bottomPos) {
        $(".event-progress").addClass("is-hidden");
      } else {
        $(".event-progress").removeClass("is-hidden");
      }

      $sections.each(function(i) {
        var $this = $(this);
        var $sectionTop = $this.offset().top;
        var $sectionBottom = $sectionTop + $this.outerHeight();
        var $sectionDot = $($navSections[i]).children(".event-progress__dot");

        if (direction === "down" && ($sectionTop > topPos && $sectionTop < bottomPos - offset)) {
          selectedColor($sectionDot);

          return false;
        } else if (direction === "up" && ($sectionBottom > topPos + offset && $sectionBottom < bottomPos)) {
          selectedColor($sectionDot);

          return false;
        }
      });

      topPos = newTopPos;
      bottomPos = topPos + window.innerHeight;
    });


    // Helper Function.
    function waitForElm(selector) {
      return new Promise(resolve => {
          if (document.querySelector(selector)) {
              return resolve(document.querySelector(selector));
          }
          const observer = new MutationObserver(mutations => {
              if (document.querySelector(selector)) {
                  resolve(document.querySelector(selector));
                  observer.disconnect();
              }
          });
          observer.observe(document.body, {
              childList: true,
              subtree: true
          });
      });
    }

    // Video Auto
    function autoVideo() {
      var $eventContentVideoLink = $(".event-content-video a");

      $eventContentVideoLink.on("click", function() {
        var $videoLinkReference = $(this).attr('href');
        // Put the object into storage
        localStorage.setItem("videoLocator", $videoLinkReference);
        // Wait for close button to initialize.
        waitForElm(".modal-media__close").then((elm) => {
          // Remove videoLocator
          $('.modal-media__close').on("click", function() {
            localStorage.removeItem("videoLocator");
          });
          $(document).on("keyup", function (e) {
            if (e.keyCode === ESC_KEYCODE) {
              localStorage.removeItem("videoLocator");
            }
          });
        });
      });

      // Retrieve the object from storage
      var retrievedObject = localStorage.getItem("videoLocator");

      if (retrievedObject !== null) {
        $("html, body").animate({
          scrollTop: $(".event-content-video a[href='" + retrievedObject + "']").offset().top - 200
        }, 400);

        setTimeout(() => {
          $(".event-content-video a[href='"+ retrievedObject + "']").click();
        }, 450);
      }
    }

    autoVideo();

    // Video
    var $eventModal = $(".event-video");
    var $eventVideoWrapper = $(".event-video__video");
    var livestream_source = $eventModal.attr("data-stream");
    var embed_id = $eventModal.attr("data-embed-id");
    var livestream_type = $eventModal.attr("data-type");
    var player = null;
    var videoPlayed = false;

    var ua = window.navigator.userAgent;
    var iOS = !!ua.match(/iPad/i) || !!ua.match(/iPhone/i);
    var safari = window.safari !== undefined;

    if(iOS) { $("body").addClass("ios"); }

    $(".js-event-play").on("click", function() {
      $eventModal.addClass("is-open");
      $("html, body").css({"overflow": "hidden"});

      switch (livestream_type) {
        case "akamai":
          console.log("akamai");

          var video = iOS ? document.createElement("video") : document.createElement("video-js");
          var source = document.createElement("source");

          video.id = "livestream_player";

          video.setAttribute("controls", "controls");
          video.setAttribute("autoplay", true);
          source.setAttribute("src", livestream_source);
          source.setAttribute("type", "application/x-mpegURL");

          if(!iOS) {
            var options = {};

            video.className = "video-js vjs-default-skin";

            $eventVideoWrapper.append(video);

            if(safari) {
              options = {
                enableLowInitialPlaylist: true,
                autoplay: true,
              };
            } else {
              options = {
                enableLowInitialPlaylist: true,
                autoplay: true,
                html5: {
                  hls: {
                    overrideNative: true,
                  },
                  nativeVideoTracks: false,
                  nativeAudioTracks: false,
                },
              };
            }

            player = videojs("livestream_player", options);

            player.src({
              src: livestream_source,
              type: "application/x-mpegURL",
            });
          } else {
            video.appendChild(source);
            $eventVideoWrapper.append(video);

            if(Hls.isSupported()) {
              hls = new Hls();
              hls.loadSource(livestream_source);
              hls.attachMedia(video);
              hls.on(Hls.Events.MANIFEST_PARSED,function() {
                video.play();
              });
            } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
              video.src = livestream_source;

              video.addEventListener("canplay",function() {
                video.play();
              });
            }
          }

          break;
        case "vimeo":
          var iframe = document.createElement("iframe");
          var referrerScript = document.createElement("script");

          iframe.setAttribute("src", livestream_source);
          iframe.setAttribute("frameborder", "0");
          iframe.setAttribute("style", "width: 100%;");
          iframe.setAttribute("scrolling", "no");
          iframe.setAttribute("allowfullscreen", "");

          if(embed_id) {
            iframe.setAttribute("id", embed_id);

            referrerScript.setAttribute("src", "https://livestream.com/assets/plugins/referrer_tracking.js");
            referrerScript.setAttribute("type", "text/javascript");
            referrerScript.setAttribute("data-embed-id", embed_id);
          }


          $(iframe).appendTo($eventVideoWrapper);

          if(embed_id) {
            $(referrerScript).appendTo($eventVideoWrapper);
          }

          break;
        default:
          console.log("nothing found");
      }

      if(_mp_page_parms && !videoPlayed) {
        mixpanel.track("Video Play Started", _mp_page_parms);
        videoPlayed = true;
      }
    });

    $(".js-event-close").on("click", function() {
      $(".event-video").removeClass("is-open");
      $("html, body").css({"overflow": "visible"});

      switch (livestream_type) {
        case "akamai":
          if(!iOS) {
            player.dispose();
          } else {
            var video = document.getElementById("livestream_player");

            video.pause();

            if(Hls.isSupported()) {
              hls.destroy();
            } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
              video.src = "";
            }

            $eventVideoWrapper.empty();
          }

          break;
        case "vimeo":
          $eventVideoWrapper.empty();

          break;
        default:
          console.log("Error: no stream type found.");
      }
    });

    $(document).on("keyup", function (e) {
      if (e.keyCode === ESC_KEYCODE) {
        $(".event-video").removeClass("is-open");
        $("html, body").css({"overflow": "visible"});

        switch (livestream_type) {
          case "akamai":
            if(!iOS) {
              player.dispose();
            } else {
              var video = document.getElementById("livestream_player");

              video.pause();

              if(Hls.isSupported()) {
                hls.destroy();
              } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
                video.src = "";
              }

              $eventVideoWrapper.empty();
            }

            break;
          case "vimeo":
            $eventVideoWrapper.empty();

            break;
          default:
            console.log("Error: no stream type found.");
        }
      }
    });
  });
})(jQuery);
etItem("_cs_sf",e))}embedded_svc.addEventHandler("onChatRequestSuccess",(function(e){i((function(){e&&e.liveAgentSessionKey&&d("Chat Started",e.liveAgentSessionKey,"etr","cs_salesforce=chat_started")}),c)})),embedded_svc.addEventHandler("onChatEndedByAgent",(function(e){i((function(){e&&e.liveAgentSessionKey&&d("Chat Ended",e.liveAgentSessionKey,0,"cs_salesforce=chat_ended")}),c)})),embedded_svc.addEventHandler("onChatEndedByChasitor",(function(e){i((function(){e&&e.liveAgentSessionKey&&d("Chat Ended",e.liveAgentSessionKey,0,"cs_salesforce=chat_ended")}),c)})),embedded_svc.addEventHandler("onChatConferenceEnded",(function(e){i((function(){e&&e.liveAgentSessionKey&&d("Chat Ended",e.liveAgentSessionKey,0,"cs_salesforce=chat_ended")}),c)}))}),c)}),500)}))}var l=!1;_uxa.push(["afterPageView",function(e){i((function(){l||(l=!0,f())}),c)}])}),c)}]);!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return gt},getRequestParameters:function(){return At}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return Ju}});var r="cs-native-frame",s={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(s.constructors).forEach((function(n){window[s.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),o("csNode",s.nodeProperties,t.Node.prototype,"get"),o("csElement",s.elementProperties,t.Element.prototype,"get"),o("csElement",s.elementPropertiesValues,t.Element.prototype,"value",!1),o("csHTMLImageElement",s.imageProperties,t.HTMLImageElement.prototype,"set"),o("csEvent",s.eventProperties,t.Event.prototype,"get"),o("csNavigator",s.navigatorProperties,t.navigator,"value")}function o(t,n,i,r,s){void 0===s&&(s=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(s||o in i)&&(window["".concat(t+o)]=e(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))}))}function h(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return h("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(xe){h("Critical","failed to copy references from window: ".concat(xe.message))}function c(t){return a(csString.prototype.toLowerCase.call(t.localName))}function a(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function f(t){return 1===t.nodeType}function v(t){return 3===t.nodeType}function l(t){return f(t)&&"source"===t.localName}function d(t){return null!==t&&f(t)&&"picture"===t.localName}function w(t){return f(t)&&"a"===t.localName}function y(t){return function(t){return f(t)&&"link"===t.localName}(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function p(t){return f(t)&&"img"===t.localName}function m(t){return f(t)&&"style"===t.localName}function g(t){return f(t)&&"input"===t.localName}function A(t){return f(t)&&"script"===t.localName}function S(t){return f(t)&&"ownerSVGElement"in t}function E(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}function b(t){return 9===t.nodeType}function R(t){return E(t)&&"host"in t&&"mode"in t}function N(t){return f(t)&&!!csElementshadowRoot.apply(t)&&R(csElementshadowRoot.apply(t))}var T=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var O="detached";function k(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return C(n)&&csArray.prototype.push.call(i,O),{ancestors:i,selectionRoot:n}}function C(t){return z.isValidElement(t)}var I=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,_=9;function P(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return I.call(t,n)}))}var x=[/\d{4}/,/^ember\d+$/],L="@",M="data-cs-override-id",D="data-cs-dynamic-id";function U(t,n,i,r){var s=r.dynamicIdRegex||null,e=r.dynamicElementNameRegex,u=c(t);e&&(e.test(t.localName)&&(u=csString.prototype.replace.call(u,e,"$1".concat(L))));if(function(t,n){var i=j(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&H(M,i,n)}(t,i)){var o=j(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(M,'="').concat(o,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,s=i.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(H(e,u,n))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,s=i.uniqueCssSelectors;r<s.length;r++){var e=s[r];if(I.call(t,e)&&q(e,n))return e}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?a(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==j(t)}(t)&&!function(t,n,i){return t.hasAttribute(D)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(x,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&H("id",t,n)}(n,i)}(t,v,i,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var s=r[i];if(I.call(t,s))return s}return}(t,r);if(l){var d=function(t,n,i){if(t===O||t.nodeType===_)return 0;for(var r=0,s=n.previousElementSibling;s;)I.call(s,i)&&(r+=1),s=s.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===O||t.nodeType===_)return 0;for(var r=i.dynamicElementNameRegex,s=!!(null==r?void 0:r.test(n.localName)),e=c(n),u=0,o=n.previousElementSibling;o;)(c(o)===e||s&&(null==r?void 0:r.test(o.localName)))&&!P(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function j(t){return t.getAttribute(M)}function H(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function q(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var z,V=11;function B(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return F(r,i);var s=U(r,t[0],n,i),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(F(o,i)).concat(e)}var h=B(t,n,i);return"".concat(h?"".concat(h,">"):"").concat(e)}function F(t,n){if(t===O)return"|detached|";if(t.host){var i=k(t.host),r=i.ancestors,s=i.selectionRoot;return"".concat(B(r,s,n),"|shadow-root|")}return t.nodeType===V?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return"";if(!n(e))return t.INVALID_ELEMENT;var u=k(e);return B(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return{path:"",firstAnchorParent:null};if(!n(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&w(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return C(n)&&csArray.prototype.push.call(i,O),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(e),o=u.firstAnchorParent;return{path:B(u.ancestors,u.selectionRoot,s),firstAnchorParent:o}}}(z||(z={})),window.CSPathComputation=window.CSPathComputation||z;var G=function(t,n){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},G(t,n)};function W(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}G(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var J=function(){return J=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},J.apply(this,arguments)};function Y(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}function X(t,n,i,r){return new(i||(i=Promise))((function(s,e){function u(t){try{h(r.next(t))}catch(t){e(t)}}function o(t){try{h(r.throw(t))}catch(t){e(t)}}function h(t){var n;t.done?s(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}h((r=r.apply(t,n||[])).next())}))}function K(t,n){var i,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function o(e){return function(o){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(t,u)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}}Object.create;function $(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var Z=Number.MAX_SAFE_INTEGER||9007199254740991;function Q(){}function tt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}var nt=34164e6,it={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=Z),Math.floor(Math.random()*t)}},rt="function"==typeof Symbol?Symbol("json"):null;var st,et,ut=rt?function(t){if(t[rt])return t[rt];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+ut(t[0]),i=1;i<t.length;i++)n+=","+ut(t[i]);return n+"]"}return t[rt]=csJSON.stringify(t)}:csJSON.stringify,ot=function(){function t(t){var n,i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||nt,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=J({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrors=J({enabled:null!==(i=t.customErrorsEnabled)&&void 0!==i?i:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&""===t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=J(J({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions)}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),"://").concat(this.malkaRecordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.getStaticResourceManagerUri=function(){return"".concat(this.i(),"://").concat(this.staticResourceManagerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var s=r[0],e=r[1];n.u(s,e)}}))},t.prototype.u=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"staticResourceManagerDomain"===t&&(this.staticResourceManagerDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.h(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.h=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t.prototype.isHeaderCollectionActive=function(){var t,n;return this.apiErrors.collectStandardHeaders||!!(null===(t=this.apiErrors.validCustomHeaders)||void 0===t?void 0:t.length)||!!(null===(n=this.apiErrors.plainCustomHeaders)||void 0===n?void 0:n.length)},t}(),ht=function(){function t(t,n){this.A=t,this.S=n}return t.prototype.init=function(){this.R=this.A!==this.A.top,this.N=this.S.isWebView&&this.A===this.A.top,this.S.iframesTracking&&this.R||this.N?this.T=!1:this.T=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=function(){return this.T},t.prototype.isInWebViewContext=function(){return this.N},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(st||(st={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(et||(et={}));var ct=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return J(J({},t),n)})):{}},t}(),at=function(t){function n(n,i){return t.call(this,n,i)||this}return W(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.O(t);var n=et.toQuery(t);this.k(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.k=function(t){var n=new window.Image(1,1);n.onload=Q,n.onerror=Q,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.O=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(ct),ft=function(){function t(t,n){this.C=t,this.I=n}return t.prototype.init=function(){this._=new at(this.C.getLoggerUri()),this._.setRequestParametersProviders(this,this.I)},t.prototype.send=function(t){this.P=t,this._.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),vt=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,lt=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,dt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",wt=new RegExp("(ey".concat(dt,"\\.ey").concat(dt,"\\.").concat(dt,")"),"g"),yt=/[45*][0-9*]{3}[ -]?[0-9*]{4}[ -]?[0-9*]{4}[ -]?[0-9*]{4}/g,pt=function(){function t(){}return t.prototype.anonymizePII=function(t){return t=this.anonymizeEmail(t)},t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&lt.test(t)?csString.prototype.replace.call(t,vt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeCreditCard=function(t){return"string"==typeof t?csString.prototype.replace.call(t,yt,"###CS_ANONYMIZED_PII###"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,wt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),mt="13.77.3";function gt(){return mt}function At(){return{v:mt}}var St=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function Et(){return Math.floor(St()/1e3)}function bt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Rt(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var Nt=function(){function t(t,n){this.L=t,this.M=n}return t.prototype.getRequestParameters=function(){return J(J({d:"".concat(St()),p:this.M.anonymizePII(window.location.href)},this.L.getRequestParameters()),At())},t}();function Tt(t){return It(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function Ot(t){return t===parseInt(t,10)}function kt(t){return It(t)&&("string"==typeof t||t instanceof csString)}function Ct(t){return"object"==typeof t}function It(t){return void 0!==t}function _t(t){return It(t)&&null!==t}function Pt(t){return"function"==typeof t}function xt(t){return t instanceof Element}function Lt(t){return t instanceof Error}function Mt(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var Dt,Ut,jt="snippet-",Ht="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(Dt||(Dt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Ut||(Ut={}));var qt=function(){function t(t,n,i){var r;this.D=n,this.M=new pt,this.U=Ut[st.warn],this.U=Ut[t.minLogLevel||st.warn],this._=i||new ft(t,new Nt(t,this.M)),this.j=((r={})[st.debug]=[],r[st.warn]=[],r[st.error]=[],r[st.critical]=[],r),this.H={implementation:{},dynamic:{}},this._.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=st.warn),this.q(i,n)){csArray.prototype.push.call(this.j[i],n||"");var r={message:this.V(t,n),stacktrace:this.B(t),app:"uxa",level:i};this._.send(r)}},t.prototype.V=function(t,n){var i=Lt(t)?this.M.anonymizePII(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.B=function(t){return Lt(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.F()):this.F()},t.prototype.F=function(){var t=this.D.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.D.getSessionService(),r=i&&i.getSession(),s={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.q=function(t,n){if(Ut[t]<this.U)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Ht,0)))return this.G(n,Dt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,jt,0)))return this.G(n,Dt.DYNAMIC);var i=this.j[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.G=function(t,n){return t in this.H[n]?!(this.H[n][t]>=5)&&(this.H[n][t]+=1,!0):(this.H[n][t]=1,!0)},t}(),zt="undefined"==typeof window,Vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:process;function Bt(t,n){return void 0!==Vt[t]?Vt[t]:n}var Ft=!zt&&document.createElement("a"),Gt=/(:443|:80)$/;function Wt(t){return Ft?(Ft.href=t,Ft.href):""}function Jt(t,n){return new csURL(t,n).href}function Yt(t){var n=$t(t);return null===n?"":decodeURIComponent(n.hostname)}function Xt(t,n){return csArray.prototype.some.call(n,(function(n){return Rt(t,".".concat(n))||t===n||""===n}))}function Kt(t){return csString.prototype.replace.call(t,Gt,"")}function $t(t){return Ft&&(bt(t,"http://")||bt(t,"https://"))?(Ft.href=t,{hash:Ft.hash,host:Kt(Ft.host),hostname:Ft.hostname,href:Ft.href,origin:Ft.origin?Ft.origin:Kt("".concat(Ft.protocol,"//").concat(Ft.host)),pathname:(n=Ft.pathname,"/"===n[0]?n:"/".concat(n)),port:Ft.port,protocol:Ft.protocol,search:Ft.search}):null;var n}var Zt,Qt,tn,nn,rn="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Zt||(Zt={})),function(t){t.Parent="parent",t.Child="child"}(Qt||(Qt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback",t.StaticResource="staticResource",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage",t.CustomError="customError"}(tn||(tn={})),function(t){t.buildBaseMessage=function(t,n,i,r){var s={type:t,from:n,pid:i,signature:rn};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,n,i,r){var s=Yt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===rn&&t.data.from===n&&t.data.pid===i&&Xt(s,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(nn||(nn={}));var sn=function(){function t(t){this.L=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=st.warn);var r={message:t,errorCode:n,level:i},s=nn.buildBaseMessage(tn.ChildLogMessage,Qt.Child,this.L.projectId);s.content=r,nn.sendPostMessage(window.parent,"*",s)},t}(),en=function(){function t(){}return t.prototype.setContext=function(t,n){this.W=t,this.J=n},t.prototype.getVisitorService=function(){return this.W},t.prototype.getSessionService=function(){return this.J},t}(),un=["t.contentsquare.net","clicktale"];window.addEventListener("error",(function(t){"string"!=typeof t.filename||!csArray.prototype.some.call(un,(function(n){return csString.prototype.indexOf.call(t.filename,n)>-1}))||csString.prototype.indexOf.call(t.filename,"blob")>-1&&(null==t.message?void 0:csString.prototype.indexOf.call(t.message,"importScripts"))>-1||on.error("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))}));var on=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(un,t)},t.setStrategy=function(n){t.Y=n},t.computeIsActive=function(n){t.X=it.boolean(n),t.X?t.K=it.boolean(10):t.K=!1},t.isLoggingActive=function(){return t.X},t.getStrategy=function(){return t.Y},t.debug=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,st.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,st.warn)},t.error=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,st.error)},t.critical=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,st.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=n.apply(void 0,r);return It(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return i.error(n,t)})):e}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.K},t.X=!1,t.K=!1,t}(),hn={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}};var cn,an,fn,vn,ln=function(t){return function(n,i,r){var s=(null==i?void 0:i.toString())||"",e=t||"".concat(n.constructor&&n.constructor.name,".").concat(s);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var s=n.apply(void 0,i);return It(window.Promise)&&s instanceof window.Promise?s.then((function(t){return t}),(function(n){return hn.error(n,t)})):s}catch(n){try{hn.error(n,t)}catch(t){}}}}(e,u.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,s,e,u,o){var h=encodeURIComponent("".concat(i)),c=s===t.CURRENT_DOMAIN?void 0:s,a=r(e),f=a?";expires=".concat(a.toUTCString()):"",v=_t(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(h).concat(f).concat(";path=/").concat(v);return It(u)&&u!==fn.NotSet&&(l="".concat(l,";SameSite=").concat(u)),It(o)&&o===vn.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return Tt(t)?new csDate(St()+t):t}function s(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),fn.None,vn.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=n(e);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,"."),h=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(e,h=csArray.prototype.join.call([csArray.prototype.pop.call(o),h],"."),h,void 0,t,r),u=n(e);return s(e,h),h}}(cn||(cn={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(an||(an={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(fn||(fn={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(vn||(vn={}));var dn=function(){function t(t,n,i){this.L=t,this.$=n,this.Z=i,this.tt=!1,this.nt=fn.NotSet,this.it=vn.No}return t.prototype.getSameSiteFlag=function(){return this.nt},t.prototype.getSecureFlag=function(){return this.it},t.prototype.getDomain=function(){return this.st},t.prototype.getRootDomain=function(){return this.et},t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled){var t=this.ut(),n=this.ot();this.tt=this.ht(t,n),this.tt?(this.nt=t,this.it=n):this.L.secureCookiesEnabled&&"https:"===this.$.getUrlProtocol()&&(this.it=vn.Yes),this.et=this.ft(),this.st=this.vt(this.et)}},t.prototype.ht=function(n,i){return!an.browserIsSafariV12()&&(cn.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!cn.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(cn.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ut=function(){return"http:"===this.$.getUrlProtocol()?fn.Lax:this.Z.isSameSiteNoneSecureNeeded()||this.L.crossDomainTracking?fn.None:fn.Lax},t.prototype.ot=function(){return"http:"===this.$.getUrlProtocol()?vn.No:this.L.secureCookiesEnabled||this.L.crossDomainTracking||this.Z.isSameSiteNoneSecureNeeded()?vn.Yes:vn.No},t.prototype.isSameSiteSupported=function(){return this.tt},t.prototype.set=function(t,n,i){var r=cn.toExpireDate(i);cn.set(t,n,this.st,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.st;cn.remove(t,i)},t.prototype.ft=function(){var t=this.Z.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?fn.None:void 0,i=t?vn.Yes:void 0;return cn.getRootDomain(n,i)},t.prototype.vt=function(t){return this.L.allowSubdomains?t:cn.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),wn="_cs_t",yn=function(){function t(t,n){this.lt=t,this.L=n,this.wt=!1,this.yt=!1}return t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled&&this.lt.isTopWindowTracker()&&"cookie"in document){if(!this.lt.isInIframeContext()&&cn.isCookiePresent())return this.wt=!0,void(this.yt=!1);if(cn.set(wn,"1",cn.CURRENT_DOMAIN),null!==cn.get(wn))return this.wt=!0,this.yt=!1,void cn.remove(wn,cn.CURRENT_DOMAIN);cn.set(wn,"1",cn.CURRENT_DOMAIN,void 0,fn.None,vn.Yes),null!==cn.get(wn)&&(this.wt=!0,this.yt=!0,cn.remove(wn,cn.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.wt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.yt},t}();var pn,mn=function(){function t(t,n){this.L=t,this.Z=n}return t.prototype.canTrack=function(){return this.L.isProjectActive()&&this.gt()&&this.At()&&this.St()},t.prototype.canTrackInChild=function(){return this.L.isProjectActive()&&this.Et()&&(this.At()||this.bt())},t.prototype.St=function(){return this.L.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.Z.areCookiesEnabled()},t.prototype.At=function(){return Xt(window.location.hostname,this.L.hostnames)},t.prototype.gt=function(){return!this.Rt()&&this.Nt()},t.prototype.Et=function(){return!this.Rt()&&this.Tt()},t.prototype.bt=function(){return tt(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Rt=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.Nt=function(){return this.Ot()&&!!window.localStorage},t.prototype.Tt=function(){return this.Ot()},t.prototype.Ot=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),gn=function(){function t(t){var n=this;this.kt=!1,this.Ct=new Map,this.It=new Map,this._t=new Map,this.Pt="CS_WORKER_SIGNATURE";var i="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}Object.create,Object.create,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));var o,s=function(){function r(e){var t=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r],s=o.metadata,a=o.events;t.send(a,s)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),a=!("ct"in s),i="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&a?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var c=i?JSON.stringify(r):r,u=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),h="".concat(this.endpoint,"?").concat(u);this.compressionOpts&&a&&"string"==typeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,s=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),i=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new a(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var c=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,s=e.events,this.byteSizeCounter.addString(t),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s=n.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new i(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,o=new u("csPersisted");function a(r){var n;if((n=r)&&n.WORKER_SIGNATURE===e)switch(r.type){case"CreatePostRequest":var a=r.endpoint,i=r.compressionOutputType,c=r.useRetry,u={endpoint:a};i&&(u.compressionOpts={compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c&&(u.recoveryStorage=o);var h=new s(u);t.set(a,h),h.onLoad((function(t){var r={type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),h.onError((function(t){var r={type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var p=r.endpoint,f=r.queryParams;(h=t.get(p))&&h.setQueryParams(f);break;case"RemoveQueryParams":p=r.endpoint,f=r.queryParams,(h=t.get(p))&&h.removeQueryParams(f);break;case"Send":p=r.endpoint;var y=r.payload;f=r.queryParams,(h=t.get(p))&&h.send(y,f);break;case"Abort":p=r.endpoint,(h=t.get(p))&&h.abort();break;case"SetHeader":p=r.endpoint;var d=r.headerName,l=r.headerValue;(h=t.get(p))&&h.setRequestHeader(d,l);break;case"SetTimeout":var v=r.endpoint,S=r.timeout;(h=t.get(v))&&h.onTimeout((function(){var t={type:"onTimeout",endpoint:v,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r=e.getReader(),n.label=1;case 1:return[4,r.read()];case 2:return o=n.sent(),s=o.done,a=o.value,s?[3,3]:(t(a),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');try{this.xt=this.Lt(i),this.kt=!0,this.Mt()&&(this.Dt=new ReadableStream({start:function(t){n.Ut=t}}),this.xt.postMessage(this.Dt,[this.Dt]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.kt=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Pt,this.xt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Pt,this.Ut.enqueue(t)},t.prototype.Lt=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker,e=new r([t],{type:"application/javascript"}),u=i.createObjectURL(e);on.whiteListFilename(u);var o=new s(u);return o.onmessage=function(t){var i=t.data,r=i.type,s=i.endpoint;if(i.WORKER_SIGNATURE===n.Pt)if("onLoad"===r){var e=t.data.response;(u=n.Ct.get(s))&&u(e)}else if("onError"===r){e=t.data.response;(u=n.It.get(s))&&u(e)}else if("onTimeout"===r){var u;(u=n._t.get(s))&&u()}},o},t.prototype.registerOnLoadCallback=function(t,n){this.Ct.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this.It.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this._t.set(t,n)},t.prototype.isSupported=function(){return this.kt},t.prototype.Mt=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),An=function(){function t(t){this.jt={},this.Ht=t.endpoint,this.qt=t.networkWorker,this.zt=t.compressionOutputType,this.Vt=t.useRetry,this.qt.postMessage({type:"CreatePostRequest",endpoint:this.Ht,compressionOutputType:this.zt,useRetry:this.Vt})}return t.prototype.setQueryParams=function(t){var n=this;this.qt.postMessage({type:"SetQueryParams",endpoint:this.Ht,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.jt[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.jt},t.prototype.removeQueryParams=function(t){var n=this;this.qt.postMessage({type:"RemoveQueryParams",endpoint:this.Ht,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.jt[t]}))},t.prototype.send=function(t,n){this.qt.postMessage({type:"Send",endpoint:this.Ht,payload:t,queryParams:n})},t.prototype.abort=function(){this.qt.postMessage({type:"Abort",endpoint:this.Ht})},t.prototype.onLoad=function(t){this.qt.registerOnLoadCallback(this.Ht,t)},t.prototype.onError=function(t){this.qt.registerOnErrorCallback(this.Ht,t)},t.prototype.setRequestHeader=function(t,n){this.qt.postMessage({type:"SetHeader",endpoint:this.Ht,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.qt.registerOnTimeoutCallback(this.Ht,t),this.qt.postMessage({type:"SetTimeout",endpoint:this.Ht,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(pn||(pn={}));var Sn,En,bn,Rn,Nn=function(t){this.onError=t},Tn=function(){function t(t){var n=this;this.jt={},this.Bt={},this.Ft=function(t){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.metadata,u=s.events;n.send(u,e)}},this.Ht=t.endpoint,this.Gt=t.compressionOpts,this.Wt=t.recoveryStorage,this.Wt&&this.Wt.recover(this.Ft)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.jt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.jt[t]})):this.jt={}},t.prototype.send=function(t,n){var i=this,r=n||J({},this.jt),s=!("ct"in r),e="string"!=typeof t&&!this.Jt(t);"ct"in r||(this.Gt&&s?r.ct=this.Gt.compressionType:r.ct=pn.UNCOMPRESSED);var u=e?JSON.stringify(t):t,o=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),h="".concat(this.Ht,"?").concat(o);this.Gt&&s&&"string"==typeof u?this.Gt.compressor(u,this.Gt.compressionOutputType,(function(t){return i.Yt(h,r,t)})):this.Yt(h,r,u)},t.prototype.onLoad=function(t){this.Xt=t},t.prototype.onError=function(t){this.Kt=t},t.prototype.onTimeout=function(t,n){this.$t=t,this.Zt=n},t.prototype.abort=function(){this.Qt&&this.Qt()},t.prototype.setRequestHeader=function(t,n){this.Bt[t]=n},t.prototype.getQueryParams=function(){return this.jt},t.prototype.Jt=function(t){return t&&void 0!==t.byteLength},t.prototype.Yt=function(t,n,i){var r=this,s=new XMLHttpRequest,e=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");s.open("POST",t),s.onload=function(){if(r.Wt&&r.Wt.recover(r.Ft),r.Xt){var t={params:n,responseText:s.responseText,status:s.status};r.Xt(t)}},s.onerror=function(){r.Wt&&r.Wt.save({key:e,metadata:n,events:i}),r.Kt&&r.Kt({params:n})},this.Zt&&this.$t&&(s.timeout=this.Zt,s.ontimeout=function(){r.$t()}),this.Qt=function(){return s.abort()},Object.keys(this.Bt).forEach((function(t){s.setRequestHeader(t,r.Bt[t])})),s.send(i)},t}(),On=function(){function t(t){this.tn=t,this.qt=new gn(this.tn)}return t.prototype.create=function(t,n,i,r){if(this.qt.isSupported()&&n)return new An({networkWorker:this.qt,endpoint:t,compressionOutputType:i,useRetry:!!r});var s=i?{compressor:this.tn.compress,compressionOutputType:i,compressionType:this.tn.algorithm}:void 0;return new Tn({endpoint:t,compressionOpts:s,recoveryStorage:r})},t}(),kn=function(){function t(t,n,i,r,s){this.W=t,this.J=n,this.nn=i,this.rn=r,this.L=s}return t.prototype.get=function(){return{exclusion:this.nn.getAppliedTrackingDraw(),visitor:this.W.getVisitor(),session:this.J.getSession(),cvars:this.rn.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.nn.exclude(this.L),this.W.removeVisitor(),this.J.removeSession(),this.rn.removeCustomVariablesSession()},t.prototype.include=function(t){this.nn.removeExclusion(),this.W.setVisitor(t.visitor),t.session?this.J.setSession(t.session):this.J.removeSession(),t.cvars?this.rn.setCustomVariableSession(t.cvars):this.rn.removeCustomVariablesSession()},t}();!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",t[t.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE",t[t.RESOURCE_HASHES=66]="RESOURCE_HASHES",t[t.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",t[t.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",t[t.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",t[t.TEXT_REF=73]="TEXT_REF",t[t.TOUCH_CANCEL=74]="TOUCH_CANCEL"}(Sn||(Sn={})),function(t){t[t.RECORDING_CONSENT_FOR_SESSION_GRANTED=1]="RECORDING_CONSENT_FOR_SESSION_GRANTED",t[t.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN=2]="RECORDING_CONSENT_FOR_SESSION_WITHDRAWN"}(En||(En={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(bn||(bn={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(Rn||(Rn={}));function Cn(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function In(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}function _n(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}var Pn=function(t,n){return Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Pn(t,n)};function xn(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Pn(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var Ln=function(){return Ln=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},Ln.apply(this,arguments)};function Mn(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}Object.create;function Dn(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function Un(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var s=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=St();if(e-s>r)return s=e,t.apply(this,n)}}var e,u=[],o=null,h=0,c=function(){h=St(),o=null,e=t.apply(i,u)},a=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var a=St(),f=r-(a-h);return i=null!=this?this:window,u=Dn([],n,!0),f<=0||f>r?(h=a,e=t.apply(i,u),o?(window.clearTimeout(o),o=null):u=[]):o||(o=window.setTimeout(c,f)),e};return a.cancel=function(){o&&(window.clearTimeout(o),h=0,o=null,u=[])},a.flushPending=function(){o&&(window.clearTimeout(o),c())},a}var jn,Hn,qn=function(t){return function(n,i,r){r.value=Un(r.value,t)}};!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(jn||(jn={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(Hn||(Hn={}));var zn=function(){function t(){}return t.isEmpty=function(){return 0===t.en.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,$([t.en],n,!1))},t.getAll=function(){return t.en},t.clear=function(){t.en=[]},t.en=[],t}(),Vn=50,Bn=.1;var Fn=!1;var Gn=[],Wn=[];var Jn=function(t){return function(n,i,r){var s=r.value;r.value=function(){if(!Fn)return r.value=s,s.apply(this,arguments);!function(t){csArray.prototype.push.call(Gn,t),performance.mark("".concat(t,"-start"))}(t);var n=s.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=Bn&&csArray.prototype.push.call(Wn,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(Gn),0===Gn.length&&(i>Vn&&zn.add(Wn),Wn=[])}}(t),n}}},Yn=function(t){return function(n,i,r){var s=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!Fn)return r.value=s,s.apply(this,n);!function(t){performance.mark("".concat(t,"-start"))}(t);var e=s.apply(this,n);return e.then((function(){!function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>Vn&&zn.add([{mName:t,mDuration:+i.toFixed(2)}])}}(t)})),e}}};function Xn(t){var n=csEventtarget.apply(t);return n&&f(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function Kn(){return function(t,n,i){var r=i.value;i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&Kn.enabled||r.call(this,t,n)}}}Kn.enabled=!0;var $n,Zn=!!window.chrome,Qn="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(_t(t)&&function(t){try{if(_t(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&xt(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Qn))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(Qn,"]"))}}($n||($n={}));var ti=function(){function t(n,i,r,s){var e=this;this.un=n,this.hn=i,this.cn=r,this.an=s,this.fn=!1,this.vn=new Set,this.ln=[],this.dn=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.wn=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndCancelListener(t)},boundElement:document},{type:"touchcancel",listener:function(t){return e.touchEndCancelListener(t)},boundElement:document}],this.yn=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.un.on(t.mn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.un.on(t.gn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.un.on(t.An,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.un.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.un.on(t.gn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this.Sn=[{type:"change",listener:this.un.on(t.An,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.un.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.un.on(t.gn,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}}];var u=function(t){if(!kt(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===u||u&&u>=16)&&csArray.prototype.push.call(this.Sn,{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}})}return t.prototype.init=function(){var t;this.En(),this.bn(),this.Rn(),this.Nn(),null===(t=this.an)||void 0===t||t.onInputNodeToEncrypt(this.Tn.bind(this)),this.On()},t.prototype.On=function(){var t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked");if(null==t?void 0:t.configurable){var n=t.set,i=this;t.set=function(t){var r=t!==this.checked;n.apply(this,[t]),r&&i.fn&&i.kn(this)},Object.defineProperty(HTMLInputElement.prototype,"checked",t)}},t.prototype.Nn=function(){var t=this;this.hn.onDocumentIdentified((function(n){t.Cn(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.ln,t)},t.prototype.Tn=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.ln,(function(i){return i(t,n)}))},t.prototype.start=function(){this.fn=!0,this.In()},t.prototype.stop=function(){this.fn=!1,this._n()},t.prototype.bn=function(){var t;this.Pn()&&(t=csArray.prototype.push).call.apply(t,$([this.yn],this.dn,!1))},t.prototype.En=function(){var t;this.xn()&&(t=csArray.prototype.push).call.apply(t,$([this.yn],this.wn,!1))},t.prototype.Cn=function(t){b(t)?csArray.prototype.forEach.call(this.yn,(function(t){return Cn(t)})):this.vn.has(t)||(this.vn.add(t),csArray.prototype.forEach.call(this.Sn,(function(n){var i=n;i.boundElement=t,Cn(i)})))},t.prototype.Ln=function(t){b(t)?csArray.prototype.forEach.call(this.yn,(function(t){return In(t)})):(this.vn.delete(t),csArray.prototype.forEach.call(this.Sn,(function(n){var i=n;i.boundElement=t,In(i)})))},t.prototype.Pn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.xn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype._n=function(){var t=this;this.Ln(document),this.vn.forEach((function(n){return t.Ln(n)}))},t.prototype.In=function(){this.Mn(t.mn),this.Dn(),this.Un(),this.jn(),this.Mn(t.gn)},t.prototype.Mn=function(t){for(var n,i=window.csquerySelectorAll[document.nodeType].call(document,t),r=0;r<i.length;r+=1){var s=i.item(r);(null===(n=s.value)||void 0===n?void 0:n.length)>0&&this.Hn(s,!0)}},t.prototype.Dn=function(){var t=$n.getScrollContainer()||document,n=this.hn.getId(t);if(n){var i=this.qn(t);if(0!==i.top||0!==i.left){var r={type:Sn.SCROLL,args:[n,i.left,i.top],date:St()};this.Tn(r,!0)}}},t.prototype.Un=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.zn(t[n],!0)},t.prototype.jn=function(){for(var n=window.csquerySelectorAll[document.nodeType].call(document,t.An),i=0;i<n.length;i+=1)this.kn(n[i],!0)},t.prototype.qn=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var n=this.hn.getId(t);if(n){var i=this.qn(t),r={type:Sn.SCROLL,args:[n,i.left,i.top],date:St()};this.Tn(r)}}},t.prototype.mouseOverListener=function(t){if(!this.cn.isSensitiveChild(t.target)){var n=this.hn.getId(t.target);if(n){var i={type:Sn.MOUSE_OVER,args:[n],date:St()};this.Tn(i)}}},t.prototype.clickListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLICK,args:[i],date:St()};this.Tn(r)}}},t.prototype.inputCheckableListener=function(t){var n=Xn(t);this.kn(n)},t.prototype.kn=function(t,n){if(void 0===n&&(n=!1),!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var i=this.hn.getId(t);if(i){var r={type:Sn.INPUT_CHECKABLE,args:[i,t.checked],date:St()};this.Tn(r,n)}}},t.prototype.inputSelectListener=function(t){var n=Xn(t);this.zn(n)},t.prototype.zn=function(t,n){if(void 0===n&&(n=!1),!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var i=this.hn.getId(t);if(i){var r={type:Sn.INPUT_SELECT,args:[i,t.selectedIndex],date:St()};this.Tn(r,n)}}},t.prototype.inputTextListener=function(t){var n=Xn(t);this.Hn(n)},t.prototype.Hn=function(t,n){var i,r,s;if(void 0===n&&(n=!1),!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var e=this.hn.getId(t);if(e){var u=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.an)||void 0===r?void 0:r.shouldEncrypt(t))null===(s=this.an)||void 0===s||s.registerInputNodeToEncrypt({targetId:e,targetValue:u,date:St()});else{var o="number"===t.type?"0":"•",h={type:Sn.INPUT_TEXT,args:[e,csString.prototype.replace.call(u,/\S/g,o)],date:St()};this.Tn(h,n)}}}},t.prototype.keyUpListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r=this.Vn[t.key];if(void 0!==r){var s={type:Sn.KEY_UP,args:[i,r],date:St()};this.Tn(s)}}}},t.prototype.keyDownListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r=this.Vn[t.key];if(void 0!==r){var s={type:Sn.KEY_DOWN,args:[i,r],date:St()};this.Tn(s)}}}},t.prototype.copyListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLIPBOARD_COMMAND,args:[i,Hn.COPY],date:St()};this.Tn(r)}}},t.prototype.cutListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLIPBOARD_COMMAND,args:[i,Hn.CUT],date:St()};this.Tn(r)}}},t.prototype.pasteListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.CLIPBOARD_COMMAND,args:[i,Hn.PASTE],date:St()};this.Tn(r)}}},t.prototype.pointerUpListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.POINTER_UP,args:[t.pointerId,t.pointerType,_n(t.clientX,1),_n(t.clientY,1),i,t.button],date:St()};this.Tn(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:Sn.POINTER_MOVE,args:[t.pointerId,t.pointerType,_n(t.clientX,1),_n(t.clientY,1)],date:St()};this.Tn(n)},t.prototype.pointerDownListener=function(t){var n=Xn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:Sn.POINTER_DOWN,args:[t.pointerId,t.pointerType,_n(t.clientX,1),_n(t.clientY,1),i,t.button,{pageX:_n(t.pageX,1),pageY:_n(t.pageY,1)}],date:St()};this.Tn(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Sn.TOUCH_START,args:[r.identifier,_n(r.clientX,1),_n(r.clientY,1)],date:St()};this.Tn(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Sn.TOUCH_MOVE,args:[r.identifier,_n(r.clientX,1),_n(r.clientY,1)],date:St()};this.Tn(s)}},t.prototype.touchEndCancelListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:"touchend"===t.type?Sn.TOUCH_END:Sn.TOUCH_CANCEL,args:[r.identifier,_n(r.clientX,1),_n(r.clientY,1)],date:St()};this.Tn(s)}},t.prototype.Rn=function(){this.Vn={},this.Vn[" "]=jn.SPACE,this.Vn.Spacebar=jn.SPACE,this.Vn.Backspace=jn.BACKSPACE,this.Vn.Enter=jn.ENTER,this.Vn.Delete=jn.DELETE,this.Vn.ArrowUp=jn.ARROWUP,this.Vn.ArrowDown=jn.ARROWDOWN,this.Vn.ArrowLeft=jn.ARROWLEFT,this.Vn.ArrowRight=jn.ARROWRIGHT,this.Vn.Up=jn.ARROWUP,this.Vn.Down=jn.ARROWDOWN,this.Vn.Left=jn.ARROWLEFT,this.Vn.Right=jn.ARROWRIGHT,this.Vn.CapsLock=jn.CAPSLOCK,this.Vn.Shift=jn.SHIFT,this.Vn.Tab=jn.TAB,this.Vn.Escape=jn.ESCAPE,this.Vn.Esc=jn.ESCAPE,this.Vn.End=jn.END,this.Vn.Alt=jn.ALT,this.Vn.Control=jn.CTRL,this.Vn.Meta=jn.META},t.mn=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.An=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.gn='input[type="number"]',Y([Jn("RecordingPageEvents.start")],t.prototype,"start",null),Y([ln("scroll")],t.prototype,"scrollListener",null),Y([ln("mouseOver"),Kn(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(Xn(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),Y([ln("click"),Kn()],t.prototype,"clickListener",null),Y([ln("checkable")],t.prototype,"inputCheckableListener",null),Y([ln("select")],t.prototype,"inputSelectListener",null),Y([ln("text")],t.prototype,"inputTextListener",null),Y([ln("Event handler type: keyup")],t.prototype,"keyUpListener",null),Y([ln("Event handler type: keydown")],t.prototype,"keyDownListener",null),Y([ln("Event handler type: copy")],t.prototype,"copyListener",null),Y([ln("Event handler type: cut")],t.prototype,"cutListener",null),Y([ln("Event handler type: paste")],t.prototype,"pasteListener",null),Y([ln("Event handler type: pointerup"),Kn()],t.prototype,"pointerUpListener",null),Y([ln("Event handler type: pointermove"),Kn(),qn({wait:33,ignoreThrottledCalls:!0})],t.prototype,"pointerMoveListener",null),Y([ln("Event handler type: pointerdown"),Kn()],t.prototype,"pointerDownListener",null),Y([ln("Event handler type: touchstart"),Kn()],t.prototype,"touchStartListener",null),Y([ln("Event handler type: touchmove"),Kn()],t.prototype,"touchMoveListener",null),Y([ln("Event handler type: touchend-cancel"),Kn()],t.prototype,"touchEndCancelListener",null),t}();function ni(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),s=0;s<i;s+=1)r[s]=t[s];return r}function ii(t,n){for(var i=t.length,r=new csArray(i),s=0;s<i;s+=1)r[s]=n(t[s]);return r}function ri(t,n){for(var i=[],r=0,s=0;s<t.length;s+=1)for(var e=n(t[s]),u=0;u<e.length;u++)i[r++]=e[u];return i}function si(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var s=0,e=t.next();!e.done;)n(e.value,s++),e=t.next()}function ei(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return!0;return!1}function ui(t,n){for(var i=t.length,r=[],s=0;s<i;s+=1){var e=t[s];n(e)&&csArray.prototype.push.call(r,e)}return r}var oi,hi,ci,ai=function(){function t(t,n,i,r,s,e,u){void 0===u&&(u=document);var o=this;this.Bn=t,this.Fn=n,this.Gn=i,this.Wn=r,this.hn=s,this.cn=e,this.Jn=u,this.fn=!1,this.Yn=function(t){o.Wn.emitInitialDomDone(t)},this.Xn=function(t){var n=o.hn.getId(t.target);if(n){var i=t.target.getBoundingClientRect();if(i.width!==t.target.__contentsquare_width||i.height!==t.target.__contentsquare_height){t.target.__contentsquare_width=i.width,t.target.__contentsquare_height=i.height;var r={args:[n,null,"style","width:".concat(i.width,"px !important;height:").concat(i.height,"px !important;")],date:St(),type:Sn.MUTATION_ATTRIBUTE};o.Kn(r)}}},this.Fn.onCharacterDataMutation((function(t){o.$n(t)})),this.Fn.onAttributesMutation((function(t){o.cn.isSensitive(t.target)&&"src"===t.attributeName&&p(t.target)&&(o.cn.unidentifySensitiveNodes(t.target),o.cn.identifySensitiveNodes(t.target)),o.Zn(t)})),this.Fn.onChildListMutation((function(t,n){si(t.addedNodes,(function(t){o.cn.identifySensitiveNodes(t),o.hn.identifyNodes(t,n)})),o.Qn(t,n),si(t.removedNodes,(function(t){o.cn.unidentifySensitiveNodes(t)}))})),this.Fn.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(o.cn.identifySensitiveNodes(t.target),o.hn.identifyNodes(csElementshadowRoot.apply(t.target)),o.ti(t))})),this.cn.onSensitiveElementResize(this.Xn)}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.isStarted=function(){return this.fn},t.prototype.start=function(){this.isStarted()||(this.fn=!0,this.Fn.start(),this.ni())},t.prototype.stop=function(){this.isStarted()&&(this.fn=!1,this.cn.unidentifySensitiveNodes(this.Jn),this.cn.disconnectResizeObserver(),this.Fn.stop())},t.prototype.flushEvents=function(){this.Fn.flushPendingMutations()},t.prototype.ni=function(){this.Wn.emitInitialDomStart(),this.cn.identifySensitiveNodes(this.Jn),this.hn.identifyNodes(this.Jn),this.Bn.serializeInitialDom(this.Jn,this.Yn)},t.prototype.ti=function(t){if(!this.cn.isSensitive(t.target)&&!this.cn.isSensitiveChild(t.target)){var n=this.Bn.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:Sn.ATTACH_SHADOW};this.Kn(i)}}},t.prototype.Zn=function(t){if(!this.cn.isSensitiveChild(t.target)&&!this.cn.isSensitiveAttribute(t.target,t.attributeName)){var n=this.Bn.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:Sn.MUTATION_ATTRIBUTE};this.Kn(i),this.Gn.scanAttribute(t.target,t.attributeName)}}},t.prototype.$n=function(t){var n=t.target.parentElement;if(!n||!this.cn.isSensitive(n)&&!this.cn.isSensitiveChild(n)){var i=this.Bn.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:Sn.MUTATION_CHARACTER_DATA};this.Kn(r),this.Gn.scanText(t.target)}}},t.prototype.Qn=function(t,n){var i=this;if(!this.cn.isSensitive(t.target)&&!this.cn.isSensitiveChild(t.target)){var r=this.Bn.serializeMutationChildList(t,n);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:Sn.MUTATION_REMOVE};i.Kn(r)})),csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:Sn.MUTATION_INSERT};i.Kn(r)}))}}},t}(),fi=function(){function t(t){this.ii=t,this.si=0}return t.prototype.addString=function(t){this.si+=2*t.length},t.prototype.addArrayBuffer=function(t){this.si+=t.byteLength},t.prototype.isThresholdReached=function(){return this.si>this.ii},t.prototype.reset=function(){this.si=0},t}(),vi=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.ei=t,this.ui=new fi(n)}return t.prototype.addEvent=function(t){this.ui.addString(ut(t)),csArray.prototype.push.call(this.ei,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.ei.length;n+=1){if(this.ei[n].date>t.date)break}csArray.prototype.splice.call(this.ei,n,0,t)},t.prototype.eventsCount=function(){return this.ei.length},t.prototype.clearEvents=function(){this.ui.reset(),this.ei=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.ui.isThresholdReached()},t.prototype.getEvents=function(){return this.ei},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.ei,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.ei=r,i},t.prototype.stringifyEvents=function(){return ut(this.ei)},t.prototype.oi=function(t){t.type===Sn.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)},Y([Jn("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),li=function(){function t(){this.hi=1}return t.prototype.getCurrentIndex=function(){return this.hi},t.prototype.increment=function(){this.hi+=1},t.prototype.reset=function(){this.hi=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.hi)}},t}(),di=function(){function t(){}return t.prototype.emit=function(n,i,r,s){void 0===s&&(s=document);var e="".concat(void 0!==r?r:t.ci),u="".concat(e).concat(n),o=t.createEvent(u,{detail:i});null!==o&&s.dispatchEvent(o)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.ai();if(null===i)return null;var r=n.bubbles,s=void 0!==r&&r,e=n.cancelable,u=void 0!==e&&e,o=n.detail;return i.initCustomEvent(t,s,u,o),i},t.ai=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.ci="cs.tracking.",t}(),wi=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}();!function(t){t.BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",t.BLOCKED_BY_CONSENT_WITHDRAWN="W",t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(oi||(oi={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(hi||(hi={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(ci||(ci={}));var yi,pi=function(){function t(){}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.fi},enumerable:!1,configurable:!0}),t.prototype.pushAll=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},t.prototype.push=function(t){this.vi?this.vi=this.vi[1]=[t,void 0]:this.vi=this.fi=[t,void 0]},t.prototype.pop=function(){if(!this.fi)return null;var t=this.fi[0];return this.fi=this.fi[1],this.fi||(this.vi=void 0),t},t}(),mi=function(){function t(t){var n=this;this.type="asyncEvent",this.li=!1,t&&t((function(t){return n.resolve(t)}))}return t.prototype.resolve=function(t){if(this.li)throw new Error("AsyncEvent already resolve.");null==t.timestamp&&(t=J(J({},t),{timestamp:this.timestamp})),this.wi=t,this.li=!0,this.yi&&this.yi(this.wi)},t.prototype.complete=function(t){this.li&&t(this.wi),this.yi=t},t.prototype.wait=function(){var t=this;return new Promise((function(n){return t.complete(n)}))},t}(),gi=function(){function t(t){this.yi=t,this.pi=new pi,this.mi=!1}return t.prototype.onEvent=function(t){if(this.yi)throw new Error("callback already set");return this.yi=t,this},t.prototype.push=function(t){this.pi.push(t),this.gi()},t.pipe=function(n,i){for(var r=n,s=function(n){var i=new t((function(t){n.pushEvent(t)}));si(r,(function(t){return t.subscribe((function(t){return i.push(t)}))})),r=[n]},e=0,u=i;e<u.length;e++){s(u[e])}var o=new t;return si(r,(function(t){return t.subscribe((function(t){return o.push(t)}))})),o},t.prototype.gi=function(){var t=this;if(!this.mi){if(this.mi=!0,!this.yi)throw new Error("callback not set");var n=this.pi.pop(),i=function(n){t.yi(n),t.mi=!1,t.pi.isEmpty||t.gi()};n instanceof mi?n.complete(i):i(n)}},t}(),Ai=function(){function t(t,n){void 0===n&&(n=[]);var i=this;this.producers=t,this.processors=n,this.fn=!1,this.Ai=[],this.Si=function(t){return csArray.prototype.forEach.call(i.Ai,(function(n){return n(t)}))}}return t.prototype.start=function(){if(this.fn)throw new Error("Recording is already started.");gi.pipe(this.producers,this.processors).onEvent(this.Si),si(this.producers,(function(t){return t.start()})),si(this.processors,(function(t){return t.start()})),this.fn=!0},t.prototype.stop=function(){for(var t=0,n=this.producers;t<n.length;t++){n[t].stop()}for(var i=0,r=this.processors;i<r.length;i++){r[i].stop()}this.fn=!1,this.Ai=[]},t.prototype.subscribe=function(t){var n=this;if(this.fn)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Ai,t),function(){return n.Ai=csArray.prototype.filter.call(n.Ai,(function(n){return n!==t}))}},t}(),Si=function(){function t(t){this.Ei=t}return t.prototype.start=function(){var t=this;this.Ei.subscribe((function(n){var i=n;switch(i.type){case"Legacy":t.yi(i.originalEvent);break;case"CustomElementRegistration":t.yi({type:Sn.CUSTOM_ELEMENT_REGISTRATION,date:i.timestamp,args:[i.tagName]});break;default:on.error("WebRecorderEventTranslator: Event not supported")}})),this.Ei.start()},t.prototype.stop=function(){this.Ei.stop()},t.prototype.onEvent=function(t){this.yi=t},t}(),Ei=function(){function t(){this.bi=[]}return t.prototype.produceEvent=function(t){var n;null!==(n=t.timestamp)&&void 0!==n||(t.timestamp=St()),csArray.prototype.forEach.call(this.bi,(function(n){return n(t)}))},t.prototype.stop=function(){this.bi=[]},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.bi,t),function(){var i=csArray.prototype.indexOf.call(n.bi,t);csArray.prototype.splice.call(n.bi,i,1)}},t}(),bi=function(t){function n(n){var i=t.call(this)||this;return i.Ri=n,i}return W(n,t),n.prototype.subscribe=function(n){return t.prototype.subscribe.call(this,n)},n.prototype.start=function(){var t=this;si(this.Ri,(function(n){n.onEvent((function(n){return t.Si(n)}))})),si(this.Ri,(function(t){var n;null===(n=t.start)||void 0===n||n.call(t)}))},n.prototype.stop=function(){si(this.Ri,(function(t){var n;return null===(n=t.stop)||void 0===n?void 0:n.call(t)})),t.prototype.stop.call(this)},n.prototype.Si=function(t){this.produceEvent({timestamp:St(),type:"Legacy",originalEvent:t})},n}(Ei);!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",t.PagehideHidden="pagehideHidden"}(yi||(yi={}));var Ri=function(){function t(){var t=this;this.Ni=!1,this.Ti=function(n){try{switch(n.type){case"visibilitychange":if("hidden"===document.visibilityState)return t.Oi(yi.Hidden);break;case"pagehide":return"hidden"===document.visibilityState?t.Oi(yi.PagehideHidden):t.Oi(yi.PagehideVisible);case"blur":return t.Oi(yi.Blur);default:return}}catch(t){}}}return t.prototype.start=function(){this.Ni||(this.Ni=!0,this.ki(),this.Ci(),this.Ii())},t.prototype.stop=function(){this.Ni&&(this.Ni=!1,this._i(),this.Pi(),this.xi())},t.prototype.onEvent=function(t){this.Oi=t},t.prototype.ki=function(){document.addEventListener("visibilitychange",this.Ti)},t.prototype._i=function(){document.removeEventListener("visibilitychange",this.Ti)},t.prototype.Ci=function(){window.addEventListener("pagehide",this.Ti)},t.prototype.Pi=function(){window.removeEventListener("pagehide",this.Ti)},t.prototype.Ii=function(){window.addEventListener("blur",this.Ti)},t.prototype.xi=function(){window.removeEventListener("blur",this.Ti)},t}(),Ni=0;function Ti(t){return"$$"+t+ ++Ni}Ti.asyncIterator="$$asyncIterator";var Oi=Bt("Symbol",Ti),ki=Bt("queueMicrotask",setTimeout),Ci=function(){return function(t,n,i){var r,s,e,u,o;i.value=(r=i.value,s=Oi("oncePerTickSymbol"),e=null,u={},o=function(){var t,n=null!==(t=this)&&void 0!==t?t:u;e=arguments,n[s]||(n[s]=!0,ki((function(){n[s]=!1,r.apply(n,e)})))},o.oncePerTickSymbol=s,o)}};Ci.isScheduled=function(t,n){return t[n.oncePerTickSymbol]};var Ii=function(){function t(t){var n=this;this.Li=new Map,this.Mi=function(t){var i=t.target;if(n.Li.has(i))return!0;var r=!1;return n.Li.forEach((function(t,s){return r||!n.Li.get(s).subtree?r:r=f(s)&&s.contains(i)})),r},this.yi=function(i){Ci.isScheduled(n,n.garbageCollect)&&(i=ui(i,n.Mi)),i.length&&t(i,n)},this.Fn=new csMutationObserver(this.yi)}return t.prototype.disconnect=function(){this.Fn.disconnect(),this.Li=new Map},t.prototype.takeRecords=function(){return this.Fn.takeRecords()},t.prototype.observe=function(t,n){return this.Li.set(t,n),this.Fn.observe(t,n)},t.prototype.unobserve=function(t){this.Li.has(t)&&(this.Li.delete(t),this.garbageCollect())},t.prototype.garbageCollect=function(){var t=this;this.yi(this.takeRecords(),this),this.Fn.disconnect(),this.Li.forEach((function(n,i){return t.Fn.observe(i,n)}))},Mn([Ci()],t.prototype,"garbageCollect",null),t}();function _i(){var t=new Error,n=t.stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?Pi(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":Pi(n[0]))}function Pi(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var xi,Li,Mi,Di=function(t){return t};function Ui(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?Di:e,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return hn.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h,c,a=!1,f=i[r];if("function"==typeof f){var v=function(){var t=u(arguments),n=f.apply(this,arguments);if(a){var i=void 0;o&&o.withCallerName&&(i=_i());try{s({result:n,context:this,args:t,callerName:i})}catch(t){hn.error(t)}}return n};(h=v).prototype=(c=f).prototype,Object.defineProperty(h,"toString",{value:function(){return c.toString()}}),i[r]=v}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function ji(t,n,i){var r=!1,s=Object.getOwnPropertyDescriptor(t,n);if(s){if(!s.configurable)return hn.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,Ln(Ln({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=arguments,n=s.set.apply(this,t);if(r)try{i(this,t[0])}catch(t){hn.error(t)}return n}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}function Hi(){var t=new Set;return{add:function(n){t.add(n),1===t.size&&setTimeout((function(){t.clear()}))},has:function(n){return t.has(n)},del:function(n){t.delete(n)},values:function(){return function(t){var n=[];return t.forEach((function(t){return csArray.prototype.push.call(n,t)})),n}(t)}}}!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&N(t)?t.shadowRoot:null},t.getAllShadowHosts=function t(n){for(var i,r,s=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,Dn([e,r],t(csElementshadowRoot.apply(r)),!1));return e}}(xi||(xi={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return Ot(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return Ot(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(Li||(Li={}));var qi,zi=null!==(Mi=Vt.Node)&&void 0!==Mi?Mi:Object;!function(t){var n="isConnected"in zi.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n,i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return hn.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof zi," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var s,e=window.getComputedStyle(t);return!e||("none"===e.display||"hidden"===e.visibility||"collapse"===e.visibility||"0"===e.opacity||"opacity(0)"===e.filter||"0px"===e.width&&"0px"===e.height||(s=e.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(s)))}function s(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return e(document,i,r)}function e(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var s=xi.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,n,i):r}function u(t){var n=s(t);return null!==n&&(t===n||t.contains(n))}t.forEachChild=function(t,n){for(var i=t;i;i=csNodenextSibling.apply(i))n(t)},t.isConnected=function(t){return n(t)},t.getAncestors=function(t,n){var i=[],r=function(t){csArray.prototype.push.call(i,t);for(var n=t.getRootNode(),r=t;(null==r?void 0:r.parentElement)&&r.parentElement!==n;)csArray.prototype.push.call(i,r.parentElement),r=r.parentElement;return csArray.prototype.push.call(i,n),i};if(n)for(var s=t;s;){r(s);var e=s.getRootNode();if(!(e instanceof ShadowRoot))break;s=e.host}else r(t);return i},t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var s=t.getParentElement(i);return!(!s||s===i)&&n(s,r)},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=ni(window.csquerySelectorAll[n.nodeType].call(n,t)),s=0,e=xi.getAllShadowHosts(n);s<e.length;s++){var u=e[s],o=csElementshadowRoot.apply(u),h=ni(window.csquerySelectorAll[o.nodeType].call(o,t));(i=csArray.prototype.push).call.apply(i,Dn([r],h,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var s=i(n);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var n=null,s=t;do{if(!r(s))break;n=s}while(s=i(s));return n},t.getTopElement=s,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,s=i.y+i.height/2;return t.getTopElementFromPoint(document,r,s)},t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+Li.windowOffsetX()<0||n.bottom+Li.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=s(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!r(t)&&u(t)},t.isInViewPort=u,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!w(t)||!t.hasAttribute("href"))||(!(!(f(n=t)&&"select"===n.localName||function(t){return f(t)&&"textarea"===t.localName}(t)||g(t)||function(t){return f(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return f(t)&&"details"===t.localName}(t)&&!function(t){return f(t)&&"summary"===t.localName}(t)))));var n}}(qi||(qi={}));var Vi,Bi,Fi,Gi=function(){function t(t){var n=this;this.yi=t,this.Di=[],this.Ui=Hi(),this.yi=function(i,r){"initial"===r?t(i,r):n.Ui.has(i)||(t(i,r),n.Ui.add(i))},this.ji()}return t.prototype.observe=function(t){csArray.prototype.push.call(this.Di,t),this.Hi(),this.qi(t,!0);this.Fn.observe(t,{subtree:!0,childList:!0})},t.prototype.disconnect=function(){this.Di=[],this.Fn.disconnect(),this.zi&&this.zi.deactivate()},t.prototype.Hi=function(){var t=this;this.zi||(this.zi=Ui({target:Element.prototype,methodName:"attachShadow",hook:function(n){return ei(t.Di,(function(t){return qi.isDescendantOf(n.result.host,t)}))&&t.yi(n.result,"added")}})),this.zi.activate()},t.prototype.qi=function(t,n){var i=this;si(xi.getAllShadowHosts(t),(function(t){i.yi(csElementshadowRoot.apply(t),n?"initial":"added"),i.Fn.observe(csElementshadowRoot.apply(t),{subtree:!0,childList:!0})}))},t.prototype.ji=function(){var t=this;this.Fn=new Ii((function(n){for(var i=0,r=n;i<r.length;i++){var s=r[i];si(s.addedNodes,(function(n){return t.qi(n,!1)})),csArray.prototype.forEach.call(ri(s.removedNodes,xi.getAllShadowHosts),(function(n){t.yi(csElementshadowRoot.apply(n),"removed"),t.Fn.unobserve(csElementshadowRoot.apply(n))}))}}))},t}(),Wi=function(t){function n(n){var i=t.call(this,(function(t){return n(t,i)}))||this;return i.Vi=[],i}return xn(n,t),n.prototype.observe=function(n,i){var r=this;if(t.prototype.observe.call(this,n,i),i.subtree){var s=new Gi((function(n,s){"added"===s||"initial"===s?t.prototype.observe.call(r,n,i):"removed"===s&&t.prototype.unobserve.call(r,n)}));s.observe(n),csArray.prototype.push.call(this.Vi,(function(){return s.disconnect()}))}},n.prototype.disconnect=function(){t.prototype.disconnect.call(this),si(this.Vi,(function(t){return t()})),this.Vi=[]},n}(Ii),Ji=Vt.ShadowRoot?Wi:Vt.csMutationObserver;function Yi(t,n){var i;void 0===n&&(n=$i.SHOW_ALL);var r=n|$i.SHOW_ELEMENT,s=[document.createTreeWalker(t,r,null,!1)];t instanceof Element&&(null===(i=csElementshadowRoot.apply(t))||void 0===i?void 0:i.firstElementChild)&&csArray.prototype.push.call(s,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1));var e=null;return{root:t,nextNode:function(){for(;s.length>0;){if(n===$i.SHOW_ALL&&e){var t=e;return e=null,t}var i=s[s.length-1].nextNode();if(i){var u=Xi(i);if(n===$i.SHOW_ALL&&(e=u),u&&csArray.prototype.push.call(s,document.createTreeWalker(u,r,null,!1)),0!=(Zi[i.nodeType]&n))return i}else csArray.prototype.pop.call(s)}return null},visitAll:function(n){n(t);for(var i=this.nextNode();i;)n(i),i=this.nextNode()}}}function Xi(t){return t&&N(t)?t.shadowRoot:null}var Ki=null!==(Bi=Vt.Node)&&void 0!==Bi?Bi:{},$i=null!==(Fi=Vt.NodeFilter)&&void 0!==Fi?Fi:{},Zi=((Vi={})[2]=$i.SHOW_ATTRIBUTE,Vi[4]=$i.SHOW_CDATA_SECTION,Vi[8]=$i.SHOW_COMMENT,Vi[11]=$i.SHOW_DOCUMENT_FRAGMENT,Vi[9]=$i.SHOW_ALL,Vi[10]=$i.SHOW_DOCUMENT_TYPE,Vi[1]=$i.SHOW_ELEMENT,Vi[Ki.ENTITY_NODE]=$i.SHOW_ENTITY,Vi[Ki.ENTITY_REFERENCE_NODE]=$i.SHOW_ENTITY_REFERENCE,Vi[Ki.NOTATION_NODE]=$i.SHOW_NOTATION,Vi[7]=$i.SHOW_PROCESSING_INSTRUCTION,Vi[3]=$i.SHOW_TEXT,Vi),Qi=function(){function t(t){var n=this;this.yi=t,this.Bi=function(t){for(var i=0,r=ri(t,(function(t){return t.addedNodes}));i<r.length;i++){Yi(r[i],NodeFilter.SHOW_ELEMENT).visitAll((function(t){f(t)&&n.yi(t)}))}},this.Fi=new Ji(this.Bi)}return t.prototype.observe=function(t){var n=this;void 0===t&&(t=document),this.Fi.observe(t,{childList:!0,subtree:!0}),Yi(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){f(t)&&n.yi(t)}))},t.prototype.disconnect=function(){this.Fi.disconnect()},t}(),tr=[],nr=!1;function ir(){for(var t=!document.hidden,n=csDate.now(),i=0;i<tr.length;i++)if(tr[i](),t&&csDate.now()-n>=35)return tr=csArray.prototype.slice.call(tr,i+1),void setTimeout(ir);tr=[],nr=!1}function rr(t){return function(){var n=this,i=arguments;!function(t){if(document.hidden)t();else if(csArray.prototype.push.call(tr,t),!nr){for(var n=0;n<3;n++)setTimeout(ir);nr=!0}}((function(){return t.apply(n,i)}))}}var sr=function(t){function n(){var n=t.call(this)||this;n.Gi="object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise,n.Wi=function(t){var i;f(i=t)&&csString.prototype.indexOf.call(i.tagName,"-")>0&&-1===csString.prototype.indexOf.call(i.tagName,":")&&-1===csString.prototype.indexOf.call(i.tagName,'"')&&-1===csString.prototype.indexOf.call(i.tagName,",")&&csArray.prototype.indexOf.call(T,csString.prototype.toLocaleLowerCase.call(i.tagName))<0&&n.Ji(csString.prototype.toLowerCase.call(t.tagName))};var i=rr(n.Wi);return n.Yi=new Qi(i),n.Xi=new Set,n}return W(n,t),n.prototype.start=function(){this.Gi&&this.Yi.observe()},n.prototype.stop=function(){this.Xi.clear(),this.Yi.disconnect()},n.prototype.Ji=function(t){return X(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.Xi.has(t)?[2]:(this.Xi.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}),[2]}}))}))},n}(Ei),er=function(t){function n(n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A){void 0===g&&(g=[]);var S=t.call(this)||this;return S.L=n,S.Ki=i,S.$i=r,S.Zi=s,S.Qi=e,S.tr=u,S.nr=o,S.ir=h,S.rr=c,S.J=a,S.er=f,S.ur=v,S.hr=l,S.cr=d,S.an=w,S.ar=y,S.vr=p,S.lr=m,S.Ri=g,S.wr=A,S.yr=0,S.pr=0,S.mr=0,S.gr=new di,S.Ar={allowFromQuotaService:!0,allowFromSerialization:!0},S.Sr=Un((function(){S.Ki.eventsCount()>0&&S.Er()}),2e3),S.br=function(t){return S.processBrowserEvent(t)},S.Rr=function(t){return S.Nr(t)},S.Tr=0,S.Or=0,S.kr=new Ri,S.Cr=!1,S.Ir=51200,S._r=!1,S.Pr=!1,S.Lr=[],S.Mr=function(t){S.vr.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},S.Ei=new Ai([new bi(csArray.prototype.filter.call($([S.tr],S.Ri,!0),(function(t){return t}))),new sr]),S.Dr=new Si(S.Ei),S.Dr.onEvent(S.br),S}return W(n,t),n.prototype.init=function(){this.Ur(),this.ar.onLoad(this.Mr),this.ar.onError(this.Mr)},n.prototype.Ur=function(){var t,n,i,r,s=this;this.nr.onEvent(this.Rr),this.ir.onEvent(this.Rr),null===(t=this.an)||void 0===t||t.onTextNodeToEncrypt(this.br),null===(n=this.an)||void 0===n||n.onApiErrorToEncrypt((function(t){s.jr(t)})),null===(i=this.an)||void 0===i||i.onUserIdentifierToEncrypt(this.br),null===(r=this.lr)||void 0===r||r.onEvent(this.br),this.kr.onEvent((function(t){return t===yi.Blur?s.Hr():s.Cr?void 0:(s.Cr=!0,setTimeout((function(){s.Cr=!1})),t===yi.Hidden?s.Hr():s.qr())}))},n.prototype.isRecording=function(){return this.J.hasValidSession()&&this.isStarted},n.prototype.Hr=function(){var t=this;if(this.canSendEvents()){this.vr.saveBatchesInProgress(),si(this.Ri,(function(n){var i,r;return si(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.Ki.addEvent(n)}))}));var n=this.Ki.getEvents();if(0!==n.length){var i=this.ar.getQueryParams();i.rst=this.getRecordingStartTimestamp(),i.let=this.getRecordingLastEventTimestamp();var r=this.Zi.getCurrentIndex();i.ri=r.toString(),this.wr.removeQueryParams(),this.wr.setQueryParams(i),this.Or=n[n.length-1].date;var s=this.Ki.stringifyEvents();if(s.length>this.Ir){var e=this.zr();if(e.length>0){var u=ut(e);this.wr.send(u)||this.vr.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:J(J({},i),{datatype:"json"}),events:u}),this.Zi.increment()}if(this.Ki.eventsCount()>0){i.ri=this.Zi.getCurrentIndex().toString();var o=this.Ki.stringifyEvents();this.vr.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:J(J({},i),{datatype:"json"}),events:o}),this.Zi.increment()}}else{this.wr.send(s)||this.vr.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:J(J({},i),{datatype:"json"}),events:s}),this.Zi.increment()}this.wr.removeQueryParams(),this.Ki.clearEvents()}}},n.prototype.qr=function(){var t=this;if(this.canSendEvents()){var n=this.ar.getQueryParams();this.vr.saveBatchesInProgress(),n.rst=this.getRecordingStartTimestamp(),delete n.ri,n.hlm="true",this.wr.removeQueryParams(),si(this.Ri,(function(n){var i,r;return si(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.Ki.addEvent(n)}))}));var i=this.Ki.getEvents();if(0===i.length)return delete n.let,delete n.rst,this.wr.setQueryParams(n),this.wr.send(),void this.wr.removeQueryParams();this.Or=i[i.length-1].date,n.let=this.getRecordingLastEventTimestamp(),this.wr.setQueryParams(n);var r=this.Ki.stringifyEvents();if(r.length>this.Ir){var s=this.zr();if(s.length>0){var e=ut(s);this.wr.send(e)||this.vr.save({key:"".concat(n.sn,".").concat(n.pn,".last"),metadata:J(J({},n),{datatype:"json"}),events:e})}else delete n.let,delete n.rst,delete n.ri,this.wr.removeQueryParams(),this.wr.setQueryParams(n),this.wr.send(),this.wr.removeQueryParams();if(this.Ki.eventsCount()>0){n.rst=this.getRecordingStartTimestamp(),n.let=this.getRecordingLastEventTimestamp();var u=this.Zi.getCurrentIndex();n.ri=u.toString();var o=this.Ki.stringifyEvents();this.vr.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:J(J({},n),{datatype:"json"}),events:o}),this.Zi.increment()}}else{this.wr.send(r)||(this.vr.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:J(J({},n),{datatype:"json"}),events:r}),this.Zi.increment())}this.wr.removeQueryParams(),this.Ki.clearEvents()}},n.prototype.isMutationTrackerStarted=function(){return this.tr.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.Ar.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.Ar.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.Ar.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.Ar.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.Ar.allowFromQuotaService&&this.Ar.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.Vr(t)},n.prototype.onIframeDetailedApiError=function(t){this.Br(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Nr(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.rr.isCurrentPageviewValid()&&this.Fr(t)},n.prototype.Nr=function(t){this.rr.isSessionValid()&&this.Fr(t)},n.prototype.Fr=function(t){this.Ki.addEvent(t),this.Ki.isThresholdReached()?this.pushEvents():this.Ki.isFull()&&this.Sr(),this.Gr(t)},n.prototype.Gr=function(t){this.L.emitDebugEvents&&this.gr.emit("recordingEvent",J(J({},t),{typeName:Sn[t.type]}))},n.prototype.onStart=function(){var t=this;this.kr.start(),this.initStates(),this.Qi.start(),this.Dr.start(),this.ir.start(),this.er&&this.ur&&this.er.subscribe(n.Wr,(function(n){return t.Vr(n)})),this.hr&&this.cr&&this.hr.subscribe(n.Wr,(function(n){return t.Br(n)}),{detailedEvent:!0}),this.L.emitDebugEvents&&this.gr.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Lr,(function(n){return t.Jr(n)})),this.Lr=[]},n.prototype.onStop=function(){this.kr.stop(),this.Qi.stop(),this.nr.stop(),this.er&&this.er.unsubscribe(n.Wr),this.hr&&this.hr.unsubscribe(n.Wr),this.Dr.stop(),this.ir.stop(),this.Pr=!1},n.prototype.clearStates=function(){this.tr.flushEvents(),this.Sr.cancel(),this.pushEvents(),this.ar.removeQueryParams()},n.prototype.initStates=function(){this.Tr=St(),this.Zi.reset(),this.yr=0,this.pr=0,this.mr=0,this.ar.setQueryParams(this.$i.getRequestParameters())},n.prototype.pushEvents=function(){si(this.Ri,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)})),this.Ki.eventsCount()>0&&(this.isStarted?this.Er():this.Ki.clearEvents())},n.prototype.Er=function(){if(this.canSendEvents()){var t=this.Ki.getEvents();this.Or=t[t.length-1].date;var n=this.Zi.getCurrentIndex();this.ar.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.ar.getQueryParams();this.vr.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.ar.getQueryParams(),t),this.ar.send(t),this.Zi.increment(),this.Ki.clearEvents(),this.Yr&&this.Yr()}},n.prototype.addInitialDom=function(t){this.Ki.addEventByTimestamp(t),this.Gr(t)},n.prototype.Br=function(t){if(t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody){if(this.an)return void this.an.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.jr(t)},n.prototype.jr=function(t){if(this.pr<n.Xr){var i={type:Sn.API_ERROR,date:St(),args:[this.cr.anonymize(t)]};this.br(i),this.pr=this.pr+1}},n.prototype.Vr=function(t){if(this.yr<n.Kr){var i={type:Sn.JAVASCRIPT_ERROR,date:St(),args:[this.ur.anonymize(t)]};this.br(i),this.yr=this.yr+1}},n.prototype.$r=function(t){if(this.mr<n.Zr){var i={type:Sn.CUSTOM_ERROR,date:St(),args:[t]};this.br(i),this.mr=this.mr+1}},n.prototype.Qr=function(t){var i,r;t===ci.ETR_SESSION?this.ar.setQueryParams(((i={})[n.ns]=n.rs,i)):t===ci.ETR_PAGE&&this.ar.setQueryParams(((r={})[n.ss]=n.rs,r))},n.prototype.clearEvents=function(){this.Ki.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.Vr(t)},n.prototype.onCustomErrorEvent=function(t){this.$r(t)},n.prototype.onPageEvent=function(t){this.es(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:St(),keyId:this.L.encryptionPublicKeyId};null===(n=this.an)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=function(t,n){this.isStarted?this.Jr({eventName:t,eventType:n}):csArray.prototype.push.call(this.Lr,{eventName:t,eventType:n})},n.prototype.Jr=function(t){this.Qr(t.eventType),this.es(t.eventName),this.pushEvents()},n.prototype.es=function(t){var i={type:Sn.PAGE_EVENT,date:St(),args:[{eventName:csString.prototype.slice.call(t,0,n.us)}]};this.Ki.addEvent(i)},n.prototype.triggerUnanonymizationConsentGranted=function(){var t={date:St(),type:Sn.UNANONYMIZED_CONSENT_GRANTED};this.Ki.addEvent(t)},n.prototype.triggerUnanonymizationConsentWithdrawn=function(){var t={date:St(),type:Sn.UNANONYMIZED_CONSENT_WITHDRAWN};this.Ki.addEvent(t)},n.prototype.triggerRecordingForSessionGranted=function(){var t={date:St(),type:Sn.RECORDING_INFO_EVENT,args:[En.RECORDING_CONSENT_FOR_SESSION_GRANTED]};this.Ki.addEvent(t)},n.prototype.triggerRecordingForSessionWithdrawn=function(){var t={date:St(),type:Sn.RECORDING_INFO_EVENT,args:[En.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN]};this.Ki.addEvent(t)},n.prototype.activateOnlineAssetsOnNextPageview=function(){this._r=!0,this.Pr=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.lr?{isStarted:this.L.useStaticResourceManager&&this.lr.isSupported(),onlineAssets:{activated:this.lr.isOnlineAssetsActivated(),enabledOnNextPageview:this._r,enabledForChildrenOnNextStart:this.Pr}}:null},n.prototype.updateStaticResourceManagerOnlineAssets=function(){this.lr&&this._r&&(this.lr.enableOnlineAssets(),this.Pr=!0,this._r=!1)},n.prototype.onRecordingRequestSent=function(t){this.Yr=t},n.prototype.getRecordingStartTimestamp=function(){return this.Tr.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.Or.toString()},n.prototype.zr=function(){return this.Ki.extractEvents(Sn.API_ERROR,Sn.JAVASCRIPT_ERROR,Sn.CUSTOM_ERROR,Sn.TEXT_VISIBILITY,Sn.POINTER_DOWN)},n.Wr="RecordingService",n.us=255,n.Kr=20,n.Xr=20,n.Zr=20,n.ss="etrp",n.ns="etrs",n.rs="1",Y([Jn("addInitialDom")],n.prototype,"addInitialDom",null),n}(wi),ur=function(t){function n(n,i,r){var s=t.call(this)||this;return s.Wt=n,s.wr=i,s.ar=r,s.hs=!1,s.cs={},s.fs=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],e=r.metadata,u=r.events;s.vs(e.rt)&&s.ar.send(u,e)}},window.addEventListener("focus",(function(){s.recover()})),s}return W(n,t),n.prototype.onStart=function(){this.cs={}},n.prototype.onStop=function(){},n.prototype.recover=function(){this.Wt.recover(this.fs)},n.prototype.addBatchInProgress=function(t,n,i){this.cs[t]={metadata:J({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.cs[t]},n.prototype.blockSendingLastMessage=function(){this.hs=!1},n.prototype.allowSendingLastMessage=function(){this.hs=!0},n.prototype.sendLastMessageBeacon=function(){if(this.hs){var t=this.ar.getQueryParams(),n=(t.ri,t.rst,t.let,function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i}(t,["ri","rst","let"]));n.hlm="true",this.wr.setQueryParams(n),this.wr.send()}},n.prototype.vs=function(t){return!!t&&-1===csString.prototype.indexOf.call(t,oi.TEMPORARILY_RECORDED)},n.prototype.saveBatchesInProgress=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.cs),(function(n){var i=t.cs[n],r=i.metadata,s=i.events;t.Wt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:J(J({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},n.prototype.save=function(t){this.Wt.save(t)},Y([ln("RecordingRecovery")],n.prototype,"recover",null),n}(wi),or=/[^\s]/g;function hr(t){return csString.prototype.replace.call(t,or,"a")}var cr,ar,fr,vr,lr=function(){function t(t,n,i,r){this.ls=t,this.hn=n,this.ds=i,this.an=r,this.ws=!1}return t.prototype.setAnonymization=function(t){this.ys=t},t.prototype.isDOMSerializationInProgress=function(){return this.ws},t.prototype.serializeInitialDom=function(t,n){if(this.ls.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){on.error(t)}));else{var i=this.ps(t);n(i)}},t.prototype.ps=function(t){return{args:[this.ls.serialize(t,{withAnonymization:this.ys})],date:St(),type:Sn.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return X(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:this.ws=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.ls.startSerializeAsync(t,{withAnonymization:this.ys})];case 2:return[2,n.sent()];case 3:return this.ws=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n,i=this.hn.getId(t.target);if(!i)return null;var r=t.target;if(r.data===t.oldValue)return null;if(v(r)&&(null===(n=this.an)||void 0===n?void 0:n.shouldEncrypt(r)))return this.an.registerTextNodeMutationToEncrypt({targetId:i,textNode:r,serializedTextData:hr(r.data),date:t.date}),null;var s=this.ds.getAnonymizedText(this.ys,r,r.data);v(r)&&(s=this.ls.serializeTextMutation(r,s));var e=[i,s];return this.gs(this.ls)&&this.isDOMSerializationInProgress()&&this.ls.handleMutationCharacterData(t,e),e},t.prototype.serializeAttachShadowEvent=function(t){var n=this.hn.getId(t.target);return n?[n,this.ls.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=this.hn.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,s=t.attributeNamespace,e=qi.getAttributeNS(t.target,s,r);e&&(e=this.ds.getAnonymizedAttributeValue(i,this.ys,r,e),e=this.ls.serializeAttributeMutationValue(t.target,r,e));var u=[n,s,r,e];return this.gs(this.ls)&&this.isDOMSerializationInProgress()&&this.ls.handleMutationAttribute(t.oldValue?this.ds.getAnonymizedAttributeValue(i,this.ys,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.hn.getId(t.target);return i?this.gs(this.ls)&&this.isDOMSerializationInProgress()?this.ls.serializeMutationChildList(t,this.ys,n):{removedNodes:this.As(t),addedNodes:this.Ss(t,i,n)}:(si(t.addedNodes,(function(t){var i=n.get(t);i&&n.set(t,i-1)})),null)},t.prototype.gs=function(t){return t.isAsynchronous()},t.prototype.As=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.hn.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.Ss=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.hn.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var o=t.addedNodes[u],h=this.ls.serialize(o,{excludedNodes:i,withAnonymization:this.ys}),c=i.get(o);c&&i.set(o,c-1),csArray.prototype.push.call(r,[n,s,h])}return r},Y([Yn("serializeDocumentAsync")],t.prototype,"serializeDocumentAsync",null),t}(),dr=function(){function t(t,n,i,r){var s=this;this.hn=t,this.cn=n,this.Gn=i,this.Qi=r,this.Es()&&(this.bs=ji(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return s.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.Rs=this.Qi.registerToInsertRuleInterceptor(this.sendInsertion.bind(this)),this.Ns=this.Qi.registerToDeleteRuleInterceptor(this.sendDeletion.bind(this)),this.bs&&this.bs.activate()},t.prototype.stop=function(){var t,n;null===(t=this.Rs)||void 0===t||t.call(this),null===(n=this.Ns)||void 0===n||n.call(this),this.bs&&this.bs.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.Ts(t);if((null==i?void 0:i.ownerNode)&&(!f(i.ownerNode)||!this.cn.isSensitiveChild(i.ownerNode))){var r=this.hn.getId(i.ownerNode);if(r){var s=this.Os(i.cssRules,t.parentRule),e={date:St(),type:Sn.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,n]};this.Kn(e),this.Gn.scanCssString(n)}}},t.prototype.Ts=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.Os=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.Es=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!f(t.ownerNode)||!this.cn.isSensitiveChild(t.ownerNode))){var s=this.hn.getId(t.ownerNode);if(s){var e={date:St(),type:Sn.STYLESHEET_RULE_INSERT,args:It(r)?[s,i,r]:[s,i]};this.Kn(e),this.Gn.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!f(t.ownerNode)||!this.cn.isSensitiveChild(t.ownerNode))){var r=this.hn.getId(t.ownerNode);if(r){var s={date:St(),type:Sn.STYLESHEET_RULE_DELETE,args:[r,i]};this.Kn(s)}}},Y([ln("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),Y([ln("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),Y([ln("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),wr="data-cs-mask",yr=function(){function t(t){this.cn=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.cn.isSensitive(t)||this.ks(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this.cn.isSensitive(t)&&!A(t)&&(csArray.prototype.push.call(n,this.Cs(t)),t.hasAttribute(wr)||csArray.prototype.push.call(n,document.createAttribute(wr))),csArray.prototype.filter.call(n,(function(n){return!i.cn.isSensitiveAttribute(t,n.name)}))},t.prototype.ks=function(t){return R(t)&&this.cn.isSensitive(t.host)},t.prototype.Cs=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),t.__contentsquare_height=n.height,t.__contentsquare_width=n.width,i},t}(),pr=null!==(cr=Vt.Element)&&void 0!==cr?cr:{prototype:{}},mr=null!==(ar=Vt.Node)&&void 0!==ar?ar:{prototype:{}},gr=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},Ar=null!==(fr=gr(pr))&&void 0!==fr?fr:gr(mr);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(vr||(vr={}));var Sr=function(t){this.csId=t.__contentsquare_identifier,this.format=vr.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var Er=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,Ar.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=1,r}return W(n,t),n}(Sr),br=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot",M],Rr=function(){function t(t,n){this.M=t,this.L=n,this.Is=new Set,this._s=""}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(br,(function(n){t.Is.add(n)})),csArray.prototype.forEach.call(this.L.whitelistedAttributes,(function(n){t.Is.add(n)}))},t.prototype.beforeSerializeChildren=function(t,n,i){return(m(t)||this.Ps(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=s},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?hr(r):this.M.anonymizePII(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(m(csNodeparentNode.apply(n)))return i;if(t&&this.Ps(csNodeparentNode.apply(n)))return this.M.anonymizePII(i)}return t?hr(i):this.M.anonymizePII(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.xs(i)||S(t)||f(s=t)&&"slot"===s.localName?r:n&&g(t)&&("submit"===t.type||"button"===t.type)&&"value"===i?hr(r):n?"":this.M.anonymizePII(r);var s},t.prototype.setWhitelistedElementsSelector=function(t){this._s=t},t.prototype.getWhitelistedElementsSelector=function(){return this._s},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof Er&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.xs=function(t){return this.Is.has(t)},t.prototype.Ps=function(t){return f(t)&&(t.hasAttribute("data-cs-capture")||this.Ls(t))},t.prototype.Ls=function(t){return!!this._s&&I.call(t,this._s)},t}(),Nr=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Ms=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Ms,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Ms,(function(t,n){return J(J({},n.getRequestParameters()),t)}),{})},t}();function Tr(t,n){var i,r,s,e,u=null,o=function(h){var c=St();if(!h&&null!==u){var a=n-(c-u);if(a>0)return void(r=window.setTimeout(o,a))}var f=c-s;r=null,u=null,s=null,e=t.apply(void 0,Dn([f],i,!1))},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(i=Dn([],t,!0),!s)return s=St(),r=window.setTimeout(o,n),e;u=St()};return h.flushPending=function(){r&&(window.clearTimeout(r),o(!0))},h.cancel=function(){u=null,s=null,r&&(window.clearTimeout(r),r=null)},h}function Or(t){return void 0===t&&(t=0),function(n,i,r){var s=r.value,e=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(n,i)}),t))}}}var kr=function(){function t(t){var n=this;this.L=t,this.Ds=!1,this.Us=Tr((function(){n.Ds=!1,n.js()}),this.L.pendingInactivityTimeout)}return t.prototype.start=function(){this.Ds=!0,this.Us()},t.prototype.stop=function(){this.Ds=!1,this.Us.cancel()},t.prototype.trackActivity=function(){this.Ds||(this.Ds=!0,this.Hs()),this.Us()},t.prototype.isUserActive=function(){return this.Ds},t.prototype.onActivityStopped=function(t){this.js=t},t.prototype.onActivityResumed=function(t){this.Hs=t},t}(),Cr=function(){function t(t,n,i){var r=this;this.qs=t,this.M=n,this.zs=i,this.Vs=[{boundElement:window,type:"resize",listener:function(){return r.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return r.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return r.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.Cn(),this.triggerInitialEvents(),this.zs&&(this.zs.setOnScreenChangedCallback(this.Kn),this.zs.start())},t.prototype.stop=function(){var t;this.Ln(),null===(t=this.zs)||void 0===t||t.stop()},t.prototype.Cn=function(){csArray.prototype.forEach.call(this.Vs,(function(t){return Cn(t)}))},t.prototype.Ln=function(){csArray.prototype.forEach.call(this.Vs,(function(t){return In(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t,n={type:Sn.RESIZE,args:[Li.windowWidth(),Li.windowHeight()],date:St()};this.Kn(n),null===(t=this.zs)||void 0===t||t.onScreenPotentiallyChanged()},t.prototype.hashChangeListener=function(){var t={type:Sn.HASH_CHANGE,args:[this.M.anonymizePII(this.qs.href)],date:St()};this.Kn(t)},t.prototype.visibilityChangeListener=function(){var t={type:Sn.VISIBILITY_CHANGE,args:[document.visibilityState],date:St()};this.Kn(t)},Y([ln("resize")],t.prototype,"resizeListener",null),Y([ln("hashChange")],t.prototype,"hashChangeListener",null),Y([ln("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Ir=function(t){function n(n,i,r,s,e,u,o){var h=t.call(this)||this;return h.nr=n,h.tr=i,h.Bs=r,h.Fs=s,h.Bn=e,h.Gs=u,h.Wn=o,h.Ws=0,h}return W(n,t),n.prototype.init=function(){var t=this;this.nr.onEvent((function(n,i){i||t.Js()})),this.Fs.onRecordingRequestSent((function(){t.Ws+=1,t.Ys()})),this.Bs.onActivityStopped((function(){t.Ys()})),this.Bs.onActivityResumed((function(){t.tr.isStarted()||t.Xs()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.Js()},n.prototype.onStart=function(){this.Bs.start()},n.prototype.onStop=function(){this.Bs.stop()},n.prototype.Ys=function(){this.tr.isStarted()&&!this.Bn.isDOMSerializationInProgress()&&!this.Bs.isUserActive()&&this.Ws>=2&&this.Ks()},n.prototype.Js=function(){this.Bs.trackActivity(),this.Ws=0},n.prototype.Ks=function(){this.tr.stop(),this.Wn.emitRecordingStatusChange()},n.prototype.Xs=function(){this.Bn.setAnonymization(this.Gs.shouldUseAnonymization()),this.tr.start(),this.Wn.emitRecordingStatusChange()},n}(wi);var _r=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Pr(t,n){var i=t.replace(_r,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=(r||s).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var s=parseInt(i,16);return 55296<=s&&s<=57343||0===s||s>1114111?"�":String.fromCodePoint(s)}));return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(e)||e)+")"}));return i}function xr(t){var n=[];return Pr(t,(function(t){return n.push(t),t})),n}function Lr(t){return bt(t,"data:")}function Mr(t){return bt(t,"#")}function Dr(t){return!!t&&Rt(t,".css")}function Ur(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),s=r[0],e=r[1];return e?(Rt(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),Dn([jr(s)],Ur(e),!0)):[jr(s)]}function jr(t){return csString.prototype.split.call(t,/,$/)[0]}var Hr,qr=function(){function t(){this.$s=!0}return t.prototype.enable=function(){this.$s||(this.$s=!0)},t.prototype.disable=function(){this.$s&&(this.$s=!1)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.onAsset=function(t){this.Zs=t},t.prototype.onStyleSheetFound=function(t){this.Qs=t},t.prototype.serializeElementNode=function(t){this.$s&&this.te(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.$s&&this.ne(t,n),n},t.prototype.scanAttribute=function(t,n){this.ie(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&m(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.scanCssString=function(t){this.re(xr(t))},t.prototype.te=function(t){this.ie(t)},t.prototype.ne=function(t,n){var i=this;m(t)&&si(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.ie=function(t,n){this.se(t,n)||(this.ee(t,n),this.ue(t,n),this.oe(t,n))},t.prototype.se=function(t,n){var i,r,s;if(y(t)&&(!n||"href"===n)&&t.href){var e=(null===(i=t.sheet)||void 0===i?void 0:i.href)||t.href,u={assetId:e,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};return null===(r=this.Qs)||void 0===r||r.call(this,u),null===(s=this.Zs)||void 0===s||s.call(this,u),this.he(e),!0}return!1},t.prototype.ce=function(t){return!this.ae(t)&&!Lr(t)&&!Mr(t)},t.prototype.ee=function(t,n){var i;if(p(t)){if(!n||"src"===n){var r=t.getAttribute("src");r&&this.ce(r)&&(this.he(t.src),null===(i=this.Zs)||void 0===i||i.call(this,{assetId:t.src,assetRawPath:r,assetBasePath:window.location.href}))}n&&"srcset"!==n||!t.srcset||this.fe(t.srcset)}},t.prototype.ue=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.fe=function(t){this.re(Ur(t))},t.prototype.oe=function(t,n){var i,r;if((S(r=t)&&"image"===r.localName||function(t){return S(t)&&"use"===t.localName}(t)||function(t){return S(t)&&"feImage"===t.localName}(t))&&(!n||"href"===n||"xlink:href"===n)){var s=t.getAttribute("href")||t.getAttribute("xlink:href");if(s&&this.ce(s)){var e=Wt(s);this.he(e),null===(i=this.Zs)||void 0===i||i.call(this,{assetId:e,assetRawPath:s,assetBasePath:window.location.href})}}},t.prototype.re=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.ae(t)})),(function(t){return!Lr(t)})),(function(t){return!Mr(t)})),(function(t){return{rawUrl:t,absoluteUrl:Wt(t)}})),(function(t){var i;n.Kn&&n.he(t.absoluteUrl),null===(i=n.Zs)||void 0===i||i.call(n,{assetId:t.absoluteUrl,assetBasePath:window.location.href,assetRawPath:t.rawUrl})}))},t.prototype.he=function(t){var n,i={date:St(),type:Sn.STATIC_RESOURCE_URL,args:[t]};null===(n=this.Kn)||void 0===n||n.call(this,i)},t.prototype.ae=function(t){return/^https:\/\/\w+:\w+@/.test(t)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive",t.TIME_ORIGIN="timeOrigin"}(Hr||(Hr={}));var zr=function(){function t(t){this.ve=t.performance}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.le()&&this.de()},t.prototype.de=function(){var t={args:this.we(),date:St(),type:Sn.PERFORMANCE_TIMINGS};this.Kn(t)},t.prototype.le=function(){return!(!this.ve||!this.ve.timing)},t.prototype.we=function(){return[{performanceTiming:Hr.REQUEST_START,timestamp:this.ve.timing.requestStart},{performanceTiming:Hr.DOM_INTERACTIVE,timestamp:this.ve.timing.domInteractive},{performanceTiming:Hr.TIME_ORIGIN,timestamp:this.ve.timeOrigin}]},t}(),Vr=function(t){function n(n){var i=t.call(this)||this;return i.ye=n,i.pe=new Map,i}return W(n,t),n.prototype.init=function(){this.ge(),this.Ae()},n.prototype.Ae=function(){var t=this;this.Fi=new csMutationObserver((function(n){t.handleMutations(n)}))},n.prototype.ge=function(){var t=this;this.Se()&&(this.Ee=Ui({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.be()&&(this.Re=Ui({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.Ne=t},n.prototype.onCharacterDataMutation=function(t){this.Te=t},n.prototype.onAttributesMutation=function(t){this.Oe=t},n.prototype.onAttachShadowMutation=function(t){this.ke=t},n.prototype.observe=function(t,n){this.isStarted&&this.Fi.observe(t,n)},n.prototype.onStart=function(){this.Ee&&this.Ee.activate(),this.Re&&this.Re.activate()},n.prototype.onStop=function(){this.Ee&&this.Ee.deactivate(),this.Re&&this.Re.deactivate(),this.ye.clearQueue(),this.Fi.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.ye.runPendingTasks();var t=this.Fi.takeRecords();this.handleMutations(t,!0)}},n.prototype.Se=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.be=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=St(),s=t.length>1?this.Ce(t):t;this.ye.isEmpty()&&this.pe.clear(),this.Ie(s);for(var e=function(t){var e=s[t];e.date=r,u.ye.schedule((function(){i.processMutation(e,i.pe)}),n)},u=this,o=0;o<s.length;o+=1)e(o)},n.prototype.Ce=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(f=t[i]).type){var r=f.target,s=f.attributeNamespace,e=f.attributeName,u="".concat(s||""," ").concat(e),o=n.get(r),h=qi.getAttributeNS(r,s,e)===f.oldValue?"none":"last";if(o)o.has(u)||o.set(u,h);else{var c=new Map;c.set(u,h),n.set(r,c)}}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,s=f.attributeNamespace,e=f.attributeName,u="".concat(s||""," ").concat(e);"last"===(o=n.get(r)).get(u)&&(csArray.prototype.push.call(a,f),o.set(u,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.ke({shadowRoot:n,date:St(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.Oe(t);break;case"characterData":this.Te(t);break;case"childList":this.Ne(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.Ie=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){si(t.addedNodes,(function(t){var i=n.pe.get(t);i?n.pe.set(t,i+1):n.pe.set(t,1)}))}))},Y([ln("handleMutations")],n.prototype,"handleMutations",null),Y([Jn("handleAttachShadow")],n.prototype,"handleAttachShadow",null),Y([Jn("processMutation")],n.prototype,"processMutation",null),n}(wi),Br=function(t){function n(n,i){var r=t.call(this,n)||this;return r.hn=i,r._e={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},r}return W(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Nn()},n.prototype.Nn=function(){var t=this;this.hn.onDocumentIdentified((function(n){t.observe(n,t._e)}))},n}(Vr),Fr=function(){function t(){}return t.create=function(n,i){if(!t.isSupported())throw new Error("IntersectionObserver is not supported");if(i&&i.delay&&i.delay<100)throw new Error("Visibility delay should be > 100ms");return(null==i?void 0:i.trackVisibility)&&(n=t.Pe(n)),new IntersectionObserver(n,i)},t.isSupported=function(){return!!window.IntersectionObserver&&!!window.IntersectionObserverEntry},t.Pe=function(t){return function(n,i){return t(ii(n,Gr),i)}},t}();function Gr(t){return t.isVisible||!qi.isVisibleInViewportInForeground(t.target)?t:{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,rootBounds:t.rootBounds,target:t.target,time:t.time,isVisible:!0}}var Wr,Jr=function(){function t(t){this.yi=t,this.Vi=[],this.xe=new Set}return t.prototype.observe=function(t,n){var i=this;if(!t.getRootNode())throw new Error("Node has no root node");if(!this.xe.has(t)){this.xe.add(t);var r=!!(null==n?void 0:n.subtree),s=t.parentElement||t.getRootNode(),e=qi.getAncestors(t,r),u=new Set(e),o=new csMutationObserver((function(n){setTimeout((function(){for(var r=0,s=n;r<s.length;r++){var e=s[r];if(u.has(e.target)&&ei(e.removedNodes,(function(t){return u.has(t)})))return i.yi(t),o.disconnect(),void i.xe.delete(t)}}))}));if(r)for(var h=0,c=e;h<c.length;h++){var a=c[h];csArray.prototype.includes.call([11,9],a.nodeType)&&o.observe(a,{childList:!0,subtree:!0})}else o.observe(s,{childList:!0});csArray.prototype.push.call(this.Vi,(function(){o.disconnect()}))}},t.prototype.disconnect=function(){si(this.Vi,(function(t){return t()})),this.Vi=[],this.xe.clear()},t}(),Yr=function(){function t(t){var n=this;this.Le=new Set,this.Me=new Jr((function(t){return n.De(t)})),this.fn=!1,this.Ue=t?Ln(Ln({},Kr),t):Kr}return t.prototype.stop=function(){this.fn=!1,this.je.disconnect(),this.Fn.disconnect()},t.prototype.start=function(t){var n=this;if(this.fn)throw new Error("VisibilityObserver is already started");this.yi=t;var i={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300};this.je=Fr.create((function(t){return n.handleIntersection(t)}),i),this.Fn=new Ii((function(t){return setTimeout((function(){si(t,(function(t){return n.De(t.target)}))}))})),this.He(),this.fn=!0},t.prototype.observe=function(t){if(!this.fn)throw new Error("Observer is stopped.");t[this.qe]||(t[this.qe]=!0,this.watchIntersection(t))},t.prototype.He=function(){this.ze=Oi("isVisible"),this.qe=Oi("ObservedElement"),this.Ve=Oi("LinkedElement"),this.Be=Oi("Tracked")},t.prototype.De=function(t){this.Le.add(t);for(var n=0,i=this.Fe(t);n<i.length;n++){var r=i[n];this.Le.add(r)}this.recheckCssVisibilityAll()},t.prototype.recheckCssVisibilityAll=function(){var t=this;si(this.Le.keys(),(function(n){n.isConnected&&!qi.areAncestorsHiddenByCSS(n)&&n[t.qe]&&t.watchIntersection(n)})),this.Le.clear()},t.prototype.watchIntersection=function(t){this.Fn.unobserve(t),this.je.unobserve(t);var n=qi.getTopAncestorHiddenByCSS(t);n?(n!==t&&(this.Ge(n,t),this.watchMutation(n)),this.watchMutation(t)):this.je.observe(t)},t.prototype.watchMutation=function(t,n){void 0===n&&(n=!0),n&&delete t[this.ze],this.je.unobserve(t);this.Fn.observe(t,{attributeFilter:["style","class","hidden"]})},t.prototype.handleIntersection=function(t){for(var n=this,i=0,r=t;i<r.length;i++){var s=r[i],e=s.target;if(s.isVisible){var u=null===s.target[this.ze];s.target[this.ze]=!0,u&&!this.Ue.delay&&this.onVisibilityChanged(s.target,Wr.VisibleInViewPort)}else{switch(qi.isVisibleInDocument(e)?Wr.VisibleOutsideViewPort:s.isIntersecting?Wr.HiddenByAnother:Wr.Hidden){case Wr.Hidden:case Wr.HiddenByAnother:this.We(e);break;case Wr.VisibleOutsideViewPort:this.onVisibilityChanged(s.target,Wr.VisibleOutsideViewPort)}}}this.Ue.delay&&setTimeout((function(){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.isIntersecting&&s.isVisible;s.target[n.ze]&&e&&n.onVisibilityChanged(s.target,Wr.VisibleInViewPort)}}),this.Ue.delay)},t.prototype.We=function(t){var n=qi.getTopElement(t);this.watchMutation(t),n&&(this.Me.observe(n,{subtree:!0}),this.Ge(n,t),this.watchMutation(n,!1))},t.prototype.Ge=function(t,n){var i;(t[this.Ve]=null!==(i=t[this.Ve])&&void 0!==i?i:new Set).add(n)},t.prototype.Fe=function(t){var n,i,r=[];return si(null!==(i=null===(n=t[this.Ve])||void 0===n?void 0:n.values())&&void 0!==i?i:[],(function(t){return csArray.prototype.push.call(r,t)})),r},t.prototype.onVisibilityChanged=function(t,n){if(n===Wr.VisibleInViewPort&&this.Ue.trackOnce){if(this.je.unobserve(t),this.Fn.unobserve(t),t[this.Be])return;t[this.Be]=!0}this.yi(t,n)},t.isSupported=function(){return Fr.isSupported()},Mn([ln()],t.prototype,"observe",null),Mn([qn({wait:50}),ln()],t.prototype,"recheckCssVisibilityAll",null),Mn([ln()],t.prototype,"watchIntersection",null),Mn([ln()],t.prototype,"watchMutation",null),Mn([ln()],t.prototype,"handleIntersection",null),Mn([ln()],t.prototype,"onVisibilityChanged",null),t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(Wr||(Wr={}));var Xr,Kr={delay:1e3,trackOnce:!0};!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(Xr||(Xr={}));var $r=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.Je=new Map,i)for(var r=csString.prototype.split.call(i,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],o=e[1];this.Je.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.Je)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(Xr.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,s){var e,u=r.toString(),o="".concat(null===(e=i.constructor)||void 0===e?void 0:e.name,".").concat(u),h=s.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(s.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,$([o],t,!1)),h.bind(this).apply(void 0,t)})}},t}();$r.init();var Zr=function(){function t(){this.Ye=[],this.Xe=[]}return t.prototype.isFull=function(){return this.Ye.length>=t.Ke||this.Xe.length>=t.Ke},t.prototype.isEmpty=function(){return 0===this.Ye.length&&0===this.Xe.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this.Ye,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this.Xe,t)},t.prototype.clear=function(){this.Ye=[],this.Xe=[]},t.prototype.flushIdsSeenGlobally=function(){var t=$([],this.Ye,!0);return this.Ye=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=$([],this.Xe,!0);return this.Xe=[],t},t.Ke=20,t}(),Qr=function(){function t(t,n,i){var r=this;this.$e=t,this.cn=n,this.Ze=i,this.Ni=!1,this.Qe=new Set,this.tu=new Set,this.nu=new Zr,this.iu=function(t,n){var i,s=ui(csNodechildNodes.apply(t),(function(t){return v(t)}));switch(csElementshadowRoot.apply(t)&&(i=csArray.prototype.push).call.apply(i,$([s],ui(csNodechildNodes.apply(t.shadowRoot),(function(t){return v(t)})),!1)),n){case Wr.VisibleInViewPort:csArray.prototype.forEach.call(s,(function(t){return r.onVisibleInViewPort(t)}));break;case Wr.VisibleOutsideViewPort:csArray.prototype.forEach.call(s,(function(t){return r.onVisibleOutsideViewPort(t)}))}r.nu.isFull()&&r.ru()}}return t.prototype.serializeTextNode=function(t,n,i){if(i.withAnonymization||!this.Ni)return n;var r=this.su(t);return r&&this.eu.observe(r),n},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){if(!this.Ni&&t.isSupported()){this.eu=new Yr({delay:this.Ze});try{this.eu.start(this.iu)}catch(t){return void on.error(t)}this.Ni=!0}},t.prototype.stop=function(){this.Ni&&t.isSupported()&&(this.eu&&this.eu.stop(),this.nu.clear(),this.Qe.clear(),this.tu.clear(),this.Ni=!1)},t.prototype.flushEvents=function(){this.Ni&&this.ru()},t.prototype.onVisibleInViewPort=function(t){var n=this.$e.setReferenceId(t.textContent);this.Qe.has(n)||(this.Qe.add(n),this.nu.addIdInViewPort(n)),this.tu.has(n)||(this.tu.add(n),this.nu.addIdInGlobally(n))},t.prototype.onVisibleOutsideViewPort=function(t){var n=this.$e.setReferenceId(t.textContent);this.tu.has(n)||(this.tu.add(n),this.nu.addIdInGlobally(n))},t.prototype.getPendingEvents=function(){var t=this.ou();return t?[t]:[]},t.prototype.ru=function(){var t=this.ou();t&&this.Kn(t)},t.prototype.ou=function(){if(!this.nu.isEmpty()){var t={visibleGlobally:csArray.prototype.map.call(this.nu.flushIdsSeenGlobally(),(function(t){return"cstextref://".concat(t)})),visibleInViewPort:csArray.prototype.map.call(this.nu.flushIdsSeenInViewport(),(function(t){return"cstextref://".concat(t)}))};return{type:Sn.TEXT_VISIBILITY,date:St(),args:[t]}}},t.isSupported=function(){return Yr.isSupported()},t.prototype.su=function(t){var n=qi.getParentElement(t);return!n||!n.isConnected||this.cn.isSensitive(n)||this.cn.isSensitiveChild(n)||m(n)||A(n)||Mt(t.data)?null:n},Y([$r.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),Y([$r.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),ts=function(){function t(t){this.hu=[],this.au=[],this.jt={},this.Ht=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),(function(i){n.jt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,(function(t){delete n.jt[t]})):this.jt={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.hu,t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.au,t)},t.prototype.send=function(t){var n=this,i=et.toQuery(J(J({},this.jt),{ct:pn.UNCOMPRESSED})),r=this.fu(i,t);return r?csArray.prototype.forEach.call(this.hu,(function(t){return t()})):csArray.prototype.forEach.call(this.au,(function(t){return t(n.jt)})),r},t.prototype.fu=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.Ht,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.Ht,"?").concat(t),n||"")},t}();function ns(t){return function(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,s=t.length;r<s;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}(self.atob(t))}function is(t){var n=csString.prototype.split.call(t,";base64,");return 2!==n.length?null:new Blob([ns(n[1])],{type:csString.prototype.replace.call(n[0],"data:","")})}function rs(t){var n=csArray.from(new Uint8Array(t));return csArray.prototype.join.call(csArray.prototype.map.call(n,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),"")}var ss,es,us=function(){function t(t){this.vu=t,this.lu=!1}return t.prototype.init=function(){this.lu=this.du(),this.lu&&(this.wu=new TextEncoder)},t.prototype.isSupported=function(){return this.lu},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.digest=function(t,n){return X(this,void 0,void 0,(function(){var i,r;return K(this,(function(s){switch(s.label){case 0:if(!this.lu)return[2,null];i=this.yu(t,n),r=this.wu.encode(i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return[2,rs(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.du=function(){return!!(this.vu&&this.vu.subtle&&this.vu.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.yu=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t}();!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(ss||(ss={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(es||(es={}));var os=function(){function t(t,n,i){this.pu=t,this.hn=n,this.cn=i}return t.prototype.start=function(){var n=this;this.pu.subscribe(t.mu,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.pu.unsubscribe(t.mu)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.processGesture=function(t,n){if(t.target&&(!f(t.target)||!this.cn.isSensitiveChild(t.target))){var i=this.hn.getId(t.target);if(i)switch(t.type){case ss.DRAG:case ss.FLICK:this.gu(Rn.SWIPE,t,i,n);break;case ss.LONG_PRESS:this.gu(Rn.LONG_PRESS,t,i,n);break;case ss.TAP:this.gu(Rn.TAP,t,i,n);break;case ss.PINCH_IN:this.gu(Rn.PINCH_IN,t,i,n);break;case ss.PINCH_OUT:this.gu(Rn.PINCH_OUT,t,i,n)}}},t.prototype.gu=function(t,n,i,r){var s=this.Au(n,t,r),e={type:Sn.GESTURE_RECOGNITION,args:[i,s],date:St()};this.Kn(e)},t.prototype.Au=function(t,n,i){var r={type:n};if(t.direction&&(r.direction=t.direction),t.distance&&(r.distance=t.distance),t.velocity&&(r.velocity=t.velocity),n===Rn.TAP&&i.changedTouches&&1===i.changedTouches.length){var s=i.changedTouches[0];r.pageX=_n(s.pageX,1),r.pageY=_n(s.pageY,1)}return r},t.mu="RecordingGesturesTracker",Y([Kn()],t.prototype,"processGesture",null),t}(),hs=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=10,i}return W(n,t),n}(Sr),cs=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},as=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=3,i}return W(n,t),n}(Sr),fs=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=4,i}return W(n,t),n}(Sr),vs=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=8,i}return W(n,t),n}(Sr),ls=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=9,r}return W(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(Sr),ds=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=11,i}return W(n,t),n}(Sr),ws=function(){function t(n){for(var i=function(i){var s=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return t[i]})),(function(t){return function(n,r,s,e){return t[i](n,r,s,e)}})),e=t.Su(s);r[i]=e},r=this,s=0,e=t.Eu;s<e.length;s++){i(e[s])}}return t.create=function(n){return new t(n)},t.Su=function(t){var n=csArray.prototype.map.call(t,(function(t){return function(n,i,r,s){return t(n,i,r,s)||i}})),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4];switch(t.length){case 0:return function(t,n){return n};case 1:return t[0];case 2:return function(t,n,s,e){return r(t,i(t,n,s,e),s,e)};case 3:return function(t,n,e,u){return s(t,r(t,i(t,n,e,u),e,u),e,u)};case 4:return function(t,n,u,o){return e(t,s(t,r(t,i(t,n,u,o),u,o),u,o),u,o)};case 5:return function(t,n,o,h){return u(t,e(t,s(t,r(t,i(t,n,o,h),o,h),o,h),o,h),o,h)};default:return function(n,i,r,s){for(var e=i,u=0;u<t.length;u++)e=t[u](n,i,r,s)||e;return i}}},t.Eu=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeDocumentNode","serializeShadowRootNode","serializeTextMutation","serializeAttributeMutationValue"],t}(),ys=function(){function t(t){this.bu=ws.create(t)}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serializeTextMutation=function(t,n){return this.bu.serializeTextMutation(t,n)},t.prototype.serializeAttributeMutationValue=function(t,n,i){return this.bu.serializeAttributeMutationValue(t,i,n)},t.prototype.serialize=function(t,n){var i,r=J({},n),s=t.nodeType;switch(s){case 1:i=this.Ru(t,r);break;case 3:i=this.Nu(t,r);break;case 4:i=this.Tu(t,r);break;case 7:case 8:i=this.Ou(t,r);break;case 10:i=new hs(t);break;case 9:i=this.ku(t,r);break;case 11:i=this.Cu(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return this.bu.afterSerialize(t,i,r),i},t.prototype.Ru=function(t,n){var i=new Er(t);this.bu.serializeElementNode(t,i,n),i.attributes=this.Iu(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this._u(r,n)),i.children=this.Pu(t,n),i},t.prototype.Iu=function(t,n){var i=ni(t.attributes);i=this.bu.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var s=i[r];i[r]=this.xu(t,s,n)}return i},t.prototype.xu=function(t,n,i){var r=new cs(n);return this.bu.serializeAttribute(t,n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?ui(r,(function(t){return!n.excludedNodes.get(t)})):r,ni(r=this.bu.beforeSerializeChildren(t,r,n))},t.prototype.Pu=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var s=i[r];i[r]=this.serialize(s,n)}return i},t.prototype.Nu=function(t,n){var i=new as(t);return this.bu.serializeTextNode(t,i,n),i},t.prototype.Tu=function(t,n){var i=new fs(t);return this.bu.serializeCDATASectionNode(t,i,n),i},t.prototype.Ou=function(t,n){var i=new vs(t);return this.bu.serializeCommentNode(t,i,n),i},t.prototype.ku=function(t,n){var i=new ls(t);return this.bu.serializeDocumentNode(t,i,n),i.children=this.Pu(t,n),i},t.prototype._u=function(t,n){var i=new ds(t);return this.bu.serializeShadowRootNode(t,i,n),i.children=this.Pu(t,n),this.bu.afterSerializeShadowRoot(t,i,n),i},t.prototype.Cu=function(t,n){if(t.mode)return this._u(t,n);throw new Error("Not implemented yet.")},t}();function ps(){return X(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var ms=function(){function t(t){this.hn=t,this.Lu=!1,this.Mu=new Map,this.Du={},this.Uu=new Map,this.ju=new Map,this.Hu=new Set,this.qu=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.Lu?ui(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.Lu)return n;var r=this.hn.getId(t);if(!r)return n;var s=this.ju.get(r);return s?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=s.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.Lu){var r=this.Uu.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.Lu){var i=this.Uu.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.Lu&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.zu(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.Lu&&(i.skipRegisterNode||this.zu(n,i))},t.prototype.enable=function(){this.Lu=!0,this.Vu()},t.prototype.disable=function(){this.Lu=!1,this.Vu()},t.prototype.setDefaultSerializationOptions=function(t){this.Du=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.Mu.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.hn.getId(t);if(i)return null===(n=this.Mu.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.hn.getId(t);return i&&(null===(n=this.Mu.get(i))||void 0===n?void 0:n.options)||this.Du},t.prototype.registerInitialCharacterData=function(t,n){this.Uu.get(t)||this.Uu.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var s=this.ju.get(t),e="".concat(i).concat(n||"");if(s){if(s.has(e))return}else s=new Map,this.ju.set(t,s);var u={name:i,namespaceURI:n||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.hn.getId(n);r&&this.Hu.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.hn.getId(i),s=this.hn.getId(t);if(r&&s){var e=this.qu.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s),csArray.prototype.indexOf.call(e.childNodeIds,s)<0&&csArray.prototype.push.call(e.childNodeIds,s);else{for(var u=[],o=n?this.hn.getId(n):null,h=0;h<csNodechildNodes.apply(i).length;h+=1){var c=this.hn.getId(csNodechildNodes.apply(i)[h]);c&&!this.Hu.has(c)&&(o&&c===o&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===o&&csArray.prototype.push.call(u,s);var a=[s];this.qu.set(r,{childNodeIds:u,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&As(r)&&this.Bu(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.hn.getId(t);return!!n&&this.Hu.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.hn.getId(n),r=this.hn.getId(t);if(!i||!r)return-1;var s=this.qu.get(i);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.Vu=function(){this.Mu.clear(),this.Uu.clear(),this.ju.clear(),this.Hu.clear(),this.qu.clear()},t.prototype.zu=function(t,n){t.csId&&(this.Fu(t.csId,t,n),this.Gu(t.csId,t),this.Mu.set(t.csId,{serializedNode:t,options:n}))},t.prototype.Fu=function(t,n,i){if(function(t){return t instanceof Er}(n)){var r=this.ju.get(t);if(r){for(var s=0,e=n.attributes;s<e.length;s++){var u=e[s],o="".concat(u.name).concat(u.namespaceURI||""),h=r.get(o);h&&null!==h.value&&(u.value=h.value,r.delete(o))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.Bu=function(t,n,i){(i.csId||gs(i))&&(t>=0?csArray.prototype.splice.call(n.children,t,0,i):gs(i)&&csArray.prototype.push.call(n.children,i))},t.prototype.Gu=function(t,n){var i;if(As(n)){var r=this.qu.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],o=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==o){var h=null===(i=this.Mu.get(u))||void 0===i?void 0:i.serializedNode;void 0!==h&&this.Bu(o,n,h)}}}},t}();function gs(t){return"artificial"in t}function As(t){return"children"in t}var Ss,Es,bs={taskTime:25},Rs=function(t){function n(n,i,r,s){void 0===r&&(r=new ms(i)),void 0===s&&(s=bs);var e=t.call(this,$([r],n,!0))||this;return e.Wu=i,e.Ju=r,e.Yu=s,e.Xu=0,e.Ku=e.Yu.taskTime,e}return W(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],s=n[2];this.Ju.getSerializedNodeById(i)||this.Ju.registerInitialAttributes(i,r,s,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.Ju.getSerializedNodeById(i)||this.Ju.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.Ss(t,n,i);return this.$u(t),{removedNodes:this.As(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),X(this,void 0,void 0,(function(){return K(this,(function(i){return this.Xu+=1,this.Ju.setDefaultSerializationOptions(n),[2,this.Zu(t,n)]}))}))},n.prototype.Ss=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.Wu.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this.Wu.getId(t.target),o=0;o<t.addedNodes.length;o+=1){var h=t.addedNodes[o],c=this.serialize(h,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(h);a&&i.set(h,a-1),csArray.prototype.push.call(r,[u,s,c])}return r},n.prototype.$u=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.Ju.markAddedTreeAsProcessed(i)}},n.prototype.Qu=function(t,n){if(!n)return-1;var i=this.Ju.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.As=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this.Ju.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.no(s))this.io(s)&&this.ro(s,n);else{var e=this.serialize(s,{withAnonymization:n});if(this.io(t.target)){var u=this.Qu(s,t.target);this.Ju.addSerializedChildToParent(t.target,u,e)}}var o=this.Wu.getId(s);o&&csArray.prototype.push.call(i,[o])}return i},n.prototype.ro=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.io(r))this.ro(r,n);else if(!this.Ju.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:n}),e=this.Qu(r,t);this.Ju.addSerializedChildToParent(t,e,s)}}},n.prototype.io=function(t){return!!this.Ju.getSerializedNodeByNode(t)},n.prototype.no=function(t){return this.io(t)||this.Ju.isAddedNodeDuringSerialization(t)},n.prototype.Zu=function(t,n){return void 0===n&&(n={}),X(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a,v,l;return K(this,(function(d){switch(d.label){case 0:return i=this.Xu,r=St(),this.Ju.enable(),n.skipChildrenSerialization=!0,s=[t],[4,ps()];case 1:if(d.sent(),i!==this.Xu)return[2,null];this.so=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this.Ju.getOptions(e),o=this.runBeforeSerializeChildrenHook(e,u),h=csArray.prototype.shift.call(o),d.label=3;case 3:return h?csDate.now()-this.so>this.Ku?[4,ps()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.Xu)return[2,null];this.so=csDate.now(),d.label=5;case 5:return this.no(h)?(h=csArray.prototype.shift.call(o),[3,3]):(csArray.prototype.push.call(s,h),c=this.serialize(h,u),a=this.Qu(h,e),this.Ju.addSerializedChildToParent(e,a,c),f(h)&&csElementshadowRoot.apply(h)&&(v=csElementshadowRoot.apply(h),csArray.prototype.push.call(s,v)),h=csArray.prototype.shift.call(o),[3,3]);case 6:return[3,2];case 7:if(!(l=this.Ju.getSerializedNodeByNode(t)))throw this.Ju.disable(),new Error("traverseAndSerialize : fail to serialize");return this.Ju.disable(),[2,{args:[l],date:r,type:Sn.INITIAL_DOM}]}}))}))},n}(ys),Ns=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return W(n,t),n.prototype.isAsynchronous=function(){return!1},n}(ys),Ts=function(){function t(){this.eo=new Map,this.uo=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!m(t))return n;var i=this.oo(t);if(null===i||0===i.length)return n;if(Mt(t.textContent)){var r=ni(n);return csArray.prototype.push.call(r,this.ho(i)),r}var s=this.co(t);if(s===i.length)return n;for(var e=new csArray(i.length-s),u=s,o=0;u<i.length;u+=1,o+=1)e[o]=i[u];r=ni(n);return csArray.prototype.push.call(r,this.ho(e)),r},t.prototype.co=function(t){var n=this.eo.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.uo.head.appendChild(i);var r=this.oo(i);return n=r?r.length:0,this.eo.set(t.textContent,n),this.uo.head.removeChild(i),n},t.prototype.oo=function(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.ho=function(t){var n="";si(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),Os=function(){function t(t,n){this.hn=t,this.Qi=n,this.ao=1,this.fn=!1}return t.prototype.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){this.isAdoptedStyleSheetsSupported()&&(this.fo=new Set,this.vo=ji(window.ShadowRoot.prototype,"adoptedStyleSheets",this.lo.bind(this)),this.do=ji(window.Document.prototype,"adoptedStyleSheets",this.lo.bind(this)))},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){!this.fn&&this.isAdoptedStyleSheetsSupported()&&(this.fn=!0,this.wo(),this.vo&&this.vo.activate(),this.do&&this.do.activate())},t.prototype.stop=function(){this.fn&&this.isAdoptedStyleSheetsSupported()&&(this.fn=!1,this.yo(),this.fo.clear(),this.vo&&this.vo.deactivate(),this.do&&this.do.deactivate())},t.prototype.serializeDocumentNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.lo(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.lo(t,t.adoptedStyleSheets)},t.prototype.wo=function(){this.Rs=this.Qi.registerToInsertRuleInterceptor(this.po.bind(this)),this.Ns=this.Qi.registerToDeleteRuleInterceptor(this.mo.bind(this))},t.prototype.yo=function(){var t,n;null===(t=this.Rs)||void 0===t||t.call(this),null===(n=this.Ns)||void 0===n||n.call(this)},t.prototype.lo=function(t,n){var i=this;if(this.fn){csArray.prototype.forEach.call(n,(function(t){return i.Ao(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.So(t)})),s=this.hn.getId(t);s&&queueMicrotask((function(){var t={type:Sn.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:St()};i.Kn(t)}))}},t.prototype.So=function(t){return t.__adopted_stylesheet_id},t.prototype.po=function(t,n){var i=n[0],r=n[1],s=this.Eo(t);if(s){var e={date:St(),type:Sn.ADOPTED_STYLESHEET_RULE_INSERT,args:It(r)?[s,i,r]:[s,i]};this.Kn(e)}},t.prototype.mo=function(t,n){var i=n[0],r=this.Eo(t);if(r&&r){var s={date:St(),type:Sn.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.Kn(s)}},t.prototype.Eo=function(t){return this.fo.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.Ao=function(t){if(!this.fo.has(t)){var n=this.ao++;t.__adopted_stylesheet_id=n,this.fo.add(t);var i=this.bo(t),r={type:Sn.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:St()};this.Kn(r)}},t.prototype.bo=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){on.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(Ss||(Ss={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(Es||(Es={}));var ks,Cs=function(){function t(t,n,i,r){this.Ro=t,this.L=n,this.$=i,this.To=r}return t.prototype.init=function(){this.Oo()},t.prototype.shouldUseAnonymization=function(){if(this.Ro.isReplayUnanonymizedAllowedByConsent()){switch(this.L.anonymisationMethod){case null:case Ss.replayRecordingMaskedUrlRegex:return!(!this.L.replayRecordingMaskedUrlRegex||!this.L.replayRecordingMaskedUrlRegex.test(this.$.getAnonymizedUrl()));case Ss.replayRecordingMaskedUrlRegexRules:return this.To.evaluateUrl(this.$.getAnonymizedUrl())}return!1}switch(this.L.anonymisationMethod){case null:case Ss.replayRecordingUnmaskedUrlRegex:return!(this.L.replayRecordingUnmaskedUrlRegex&&this.L.replayRecordingUnmaskedUrlRegex.test(this.$.getAnonymizedUrl()));case Ss.replayRecordingUnmaskedUrlRegexRules:return!this.To.evaluateUrl(this.$.getAnonymizedUrl())}return!0},t.prototype.Oo=function(){this.L.anonymisationMethod===Ss.replayRecordingMaskedUrlRegexRules&&this.L.replayRecordingMaskedUrlRegexRules?this.To.setRegexRules(this.L.replayRecordingMaskedUrlRegexRules):this.L.anonymisationMethod===Ss.replayRecordingUnmaskedUrlRegexRules&&this.L.replayRecordingUnmaskedUrlRegexRules&&this.To.setRegexRules(this.L.replayRecordingUnmaskedUrlRegexRules)},t}(),Is=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),_s=function(){function t(){this.fn=!1,this.ko=[],this.Co=[],this.Io()}return t.prototype.registerToInsertRuleInterceptor=function(t){var n=this;return this._o(this.ko,t)?function(){}:(csArray.prototype.push.call(this.ko,t),function(){n.ko=csArray.prototype.filter.call(n.ko,(function(n){return n!==t}))})},t.prototype.registerToDeleteRuleInterceptor=function(t){var n=this;return this._o(this.Co,t)?function(){}:(csArray.prototype.push.call(this.Co,t),function(){n.Co=csArray.prototype.filter.call(n.Co,(function(n){return n!==t}))})},t.prototype.start=function(){var t,n;this.fn||(this.fn=!0,null===(t=this.Po)||void 0===t||t.activate(),null===(n=this.xo)||void 0===n||n.activate())},t.prototype.stop=function(){var t,n;this.fn&&(this.fn=!1,null===(t=this.Po)||void 0===t||t.deactivate(),null===(n=this.xo)||void 0===n||n.deactivate())},t.prototype._o=function(t,n){return csArray.prototype.indexOf.call(t,n)>-1},t.prototype.Lo=function(t,n){csArray.prototype.forEach.call(this.ko,(function(i){return i(t,n)}))},t.prototype.Mo=function(t,n){csArray.prototype.forEach.call(this.Co,(function(i){return i(t,n)}))},t.prototype.Io=function(){var t=this;this.Do()&&(this.Po=Ui({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(n){var i=n.context,r=n.args;t.Lo(i,r)}})),this.Uo()&&(this.xo=Ui({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(n){var i=n.context,r=n.args;return t.Mo(i,r)}}))},t.prototype.Do=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.Uo=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t}(),Ps=function(){function t(t){this.jo={},this.Ho=new fi(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.Ho.isThresholdReached()||(this.Ho.addString(n),"string"==typeof r?this.Ho.addString(r):this.Ho.addArrayBuffer(r),this.Ho.isThresholdReached()||(this.jo[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.qo(),(function(t){var r=n.jo[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.zo(t))})),0!==i.length&&(t(i),this.Ho.reset())},t.prototype.qo=function(){return Object.keys(this.jo)},t.prototype.zo=function(t){delete this.jo[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(ks||(ks={}));var xs,Ls,Ms,Ds,Us=function(){function t(t,n,i){this.Vo=t,this.Bo=i,this.Fo=ks.NOT_STARTED,this.Go=[],this.Wo=0,this.Jo=self.origin,this.Yo="object"==typeof window?"":"worker-",this.Ho=new fi(n),this.He()}return t.prototype.He=function(){return X(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.Xo()];case 1:return t.sent(),this.Fo===ks.READY?this.Ko():this.Bo(this.Go),[2]}}))}))},t.prototype.Ko=function(){var t=this;csArray.prototype.forEach.call(this.Go,(function(n){t.save(n)})),this.Go=[]},t.prototype.save=function(t){return X(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.Fo===ks.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.Go,t),[2]):this.Fo!==ks.READY||this.Ho.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.Ho.addString(n),"string"==typeof r?this.Ho.addString(r):this.Ho.addArrayBuffer(r),this.Ho.isThresholdReached()?[2]:[4,this.$o.put("".concat(this.Jo,"/").concat(n),new Response(r,{headers:i}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return X(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.$o?[3,2]:[4,this.Xo()];case 1:if(n.sent(),this.Fo!==ks.READY)return[2];n.label=2;case 2:return this.Zo(t),[2]}}))}))},t.prototype.Xo=function(){return X(this,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.Fo=ks.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.Yo).concat(this.Vo))];case 1:return t.$o=n.sent(),this.Fo=ks.READY,[3,3];case 2:return n.sent(),this.Fo=ks.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.Zo=function(t){return X(this,void 0,void 0,(function(){var n,i,r,s,e=this;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.Wo++,this.Wo>1?[2]:[4,this.$o.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.$o.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return e.$o.delete(t)})))];case 4:return u.sent(),t(s),this.Ho.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.Wo--,[7];case 7:return[2]}}))}))},t}(),js=function(){function t(t){self.caches?this.Qo(t):this.th()}return t.prototype.save=function(t){this.nh.save(t)},t.prototype.recover=function(t){this.nh.recover(t)},t.prototype.Qo=function(n){var i=this;this.nh=new Us(n,t.ih,(function(t){i.th(t)}))},t.prototype.th=function(n){var i=this;this.nh=new Ps(t.ih),n&&csArray.prototype.forEach.call(n,(function(t){i.nh.save(t)}))},t.ih=16777216,t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(xs||(xs={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(Ls||(Ls={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(Ms||(Ms={})),function(t){function n(){return"orientation"in screen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(screen.orientation.type){case Ls.PORTRAIT_PRIMARY:case Ls.PORTRAIT_SECONDARY:return xs.PORTRAIT;case Ls.LANDSCAPE_PRIMARY:case Ls.LANDSCAPE_SECONDARY:return xs.LANDSCAPE;default:return xs.PORTRAIT}}:i()?function(){switch(window.orientation){case Ms.PORTRAIT:case Ms.PORTRAIT_REVERSE:return xs.PORTRAIT;case Ms.LANDSCAPE:case Ms.LANDSCAPE_REVERSE:return xs.LANDSCAPE;default:return xs.PORTRAIT}}:function(){return xs.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Ds||(Ds={}));var Hs,qs=function(){function t(){this.rh=null,this.eh=null,this.fn=!1}return t.prototype.start=function(){this.fn||(this.fn=!0,this.onScreenPotentiallyChanged())},t.prototype.stop=function(){this.fn&&(this.fn=!1,this.rh=null,this.eh=null)},t.prototype.setOnScreenChangedCallback=function(t){this.uh=t},t.prototype.onScreenPotentiallyChanged=function(){var t;if(this.fn){var n=Ds.getCurrentOrientation(),i=this.oh(n),r=i.screenWidth,s=i.screenHeight;if(r!==this.rh||s!==this.eh){this.rh=r,this.eh=s;var e={type:Sn.SCREEN_RESIZE,args:[r,s],date:St()};null===(t=this.uh)||void 0===t||t.call(this,e)}}},t.prototype.oh=function(t){var n,i,r=Li.screenWidth(),s=Li.screenHeight();return t===xs.PORTRAIT?(n=r,i=s):(n=Math.max(r,s),i=Math.min(r,s)),{screenWidth:n,screenHeight:i}},t}(),zs=function(){function t(t,n){this.lr=t,this.cn=n,this.hh="cssrm://",this.ah=0}return t.prototype.beforeSerializeAttributes=function(t,n){if(this.cn.isSensitive(t))return n;if(p(t)||l(t)&&d(csNodeparentNode.apply(t))){var i=n,r=t.getAttribute("src");if(null!==r&&r.length>0&&(Lr(r)||this.lr.isOnlineAssetsActivated()))return this.ah++,this.fh(t.src,this.ah),this.lh(n,this.ah);if(null!==t.getAttribute("srcset")&&this.lr.isOnlineAssetsActivated()){for(var s=Ur(t.srcset),e=this.ah+1,u=0,o=s;u<o.length;u++){var h=o[u];this.ah++,this.fh(Wt(h),this.ah)}i=this.yh(n,e,s)}return i}return y(t)&&""!==t.getAttribute("href")&&this.lr.isOnlineAssetsActivated()?(this.ah++,this.ph(t.href,this.ah),this.mh(n,this.ah)):n},t.prototype.serializeTextNode=function(t,n,i){t.parentElement&&m(t.parentElement)&&(n.data=this.gh(n.data))},t.prototype.serializeTextMutation=function(t,n){return csNodeparentNode.apply(t)&&m(csNodeparentNode.apply(t))?this.gh(n):n},t.prototype.serializeAttributeMutationValue=function(t,n,i){if(this.cn.isSensitive(t))return n;if(p(t)||l(t)&&d(csNodeparentNode.apply(t))){if("src"===i&&(Lr(n)||this.lr.isOnlineAssetsActivated()))return this.ah++,this.fh(n,this.ah),this.hh+this.ah;if("srcset"===i&&this.lr.isOnlineAssetsActivated()){for(var r=Ur(n),s=this.ah+1,e=0,u=r;e<u.length;e++){var o=u[e];this.ah++,this.fh(Wt(o),this.ah)}return this.Ah(s,n,r).value}}return y(t)&&"href"===i&&this.lr.isOnlineAssetsActivated()?(this.ah++,this.ph(n,this.ah),this.hh+this.ah):n},t.prototype.gh=function(t){var n=csArray.from(new Set(xr(t)));if(this.Sh(n)||this.lr.isOnlineAssetsActivated()&&this.Eh(n)){for(var i=t,r=0,s=n;r<s.length;r++){var e=s[r];(this.lr.isOnlineAssetsActivated()||Lr(e))&&(this.ah++,i=csString.prototype.replace.call(i,e,this.hh+this.ah)),Lr(e)?this.fh(e,this.ah):this.lr.isOnlineAssetsActivated()&&(Dr(e)?this.ph(e,this.ah):this.fh(e,this.ah))}return i}return t},t.prototype.Sh=function(t){return csArray.prototype.some.call(t,(function(t){return Lr(t)}))},t.prototype.Eh=function(t){return csArray.prototype.some.call(t,(function(t){return!Lr(t)}))},t.prototype.lh=function(t,n){var i=this;return csArray.prototype.map.call(t,(function(t){if("src"!==t.name)return t;var r=document.createAttribute(t.name);return r.value=i.hh+n,r}))},t.prototype.yh=function(t,n,i){var r=this;return csArray.prototype.map.call(t,(function(t){return"srcset"!==t.name?t:r.Ah(n,t.value,i)}))},t.prototype.Ah=function(t,n,i){var r=t,s=document.createAttribute("srcset");s.value=n;for(var e=0,u=i;e<u.length;e++){var o=u[e];s.value=csString.prototype.replace.call(s.value,o,this.hh+r),r++}return s},t.prototype.mh=function(t,n){for(var i=[],r=0,s=t;r<s.length;r++){var e=s[r],u=document.createAttribute(e.name);if(csArray.prototype.push.call(i,u),"href"===e.name){var o=document.createAttribute("data-cs-original-href");o.value=e.value,csArray.prototype.push.call(i,o),u.value=this.hh+n}else u.value=e.value}return i},t.prototype.fh=function(t,n){this.lr.processStaticResource({id:n,input:t})},t.prototype.ph=function(t,n){this.lr.processStaticCssLinkResource({id:n,input:t})},t}();!function(t){t[t.NOT_EXIST=2]="NOT_EXIST"}(Hs||(Hs={}));var Vs=function(t){function n(n,i,r){var s=t.call(this)||this;return s.lr=n,s.bh=i,s.Rh=r,s.Nh={},s.mi=!1,s}return W(n,t),n.prototype.onStart=function(){this.lr.start()},n.prototype.onStop=function(){this.lr.stop()},n.prototype.initState=function(){var t=this;this.lr.isStaticResourceManagerSupported()&&(this.Th=this.Rh.getRequestParameters(),this.Oh="".concat(this.bh,"/exist?").concat(et.toQuery(this.Th)),this.kh="".concat(this.bh,"/putTag?").concat(et.toQuery(this.Th)),this.Ch=Tr((function(){return X(t,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.mi?(this.Ch(),[2]):(this.mi=!0,[4,this.Ih()]);case 1:return t.sent(),this.mi=!1,[2]}}))}))}),300),this.lr.sendStaticResource((function(n){t.Nh[n.hash]=n,t.Ch()})))},n.prototype.onIframeStaticResource=function(t){this.lr.isStaticResourceManagerSupported()&&(this.Nh[t.hash]=t,this.Ch())},n.prototype.Ih=function(){return X(this,void 0,void 0,(function(){var t,n,i,r=this;return K(this,(function(s){switch(s.label){case 0:return t=this.Nh,this.Nh={},[4,this._h(t)];case 1:return(n=s.sent()).length?(i=this.Ph(n),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return window.fetch(r.kh,{method:"POST",body:t})})))]):[2];case 2:return s.sent(),[2]}}))}))},n.prototype.xh=function(t){return X(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(n=Object.keys(t)).length?(i={projectId:this.Th.pid,filter:Hs.NOT_EXIST,hashes:n,touch:!0},[4,window.fetch(this.Oh,{method:"POST",body:csJSON.stringify(i)})]):[2,[]];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},n.prototype._h=function(t){return X(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(s){switch(s.label){case 0:n=[],s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.xh(t)];case 2:return i=s.sent(),csArray.prototype.forEach.call(i,(function(i){var r=t[i];r?csArray.prototype.push.call(n,r):on.warn("SRM: received unknown hash: "+i)})),[3,4];case 3:return r=s.sent(),on.warn("SRM Service,getUnknownHashes error: ".concat(r.message," ")),[3,4];case 4:return[2,n]}}))}))},n.prototype.Ph=function(t){for(var n=0,i=[new FormData],r=0,s=t;r<s.length;r++){var e=s[r],u=e.blob,o=e.hash,h=i.length-1;if((n+=u.size)<8388608)i[h].append("",u,o);else{var c=new FormData;c.append("",u,o),n=u.size,csArray.prototype.push.call(i,c)}}return i},n}(wi),Bs=function(){function t(){this.Lh=[]}return t.prototype.setRegexRules=function(t){var n=this;this.Lh=csArray.prototype.map.call(t,(function(t){return n.Mh(t)}))},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this.Lh,(function(i){var r,s,e=n.Dh(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(e)):null===(s=i.regex)||void 0===s?void 0:s.test(e)}))},t.prototype.Dh=function(t,n){var i=$t(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.Uh=function(t){return t.ignoreCaseSensitivity?"i":""},t.prototype.Mh=function(t){switch(t.operator){case Es.NOT_START:t.notOperator=!0;case Es.START:t.regex=new RegExp("^".concat(t.value),this.Uh(t));break;case Es.NOT_END:t.notOperator=!0;case Es.END:t.regex=new RegExp("".concat(t.value,"$"),this.Uh(t));break;case Es.NOT_CONTAIN:t.notOperator=!0;case Es.CONTAIN:t.regex=new RegExp("".concat(t.value),this.Uh(t));break;case Es.NOT_EXACT:t.notOperator=!0;case Es.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.Uh(t));break;default:on.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},t}(),Fs=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};var Gs,Ws,Js=function(){function t(t,n){void 0===n&&(n=100),this.jh=t,this.Hh=n,this.qh="original-resource-name",this.zh=!1,this.fn=!1,this.Vh=!1,this.Bh="SHA-256",this.Fh={},this.Gh=null}return t.prototype.init=function(){"Promise"in window&&"function"==typeof window.Promise&&this.jh.isSupported()&&(this.zh=!0)},t.prototype.enableOnlineAssets=function(){this.Vh=!0},t.prototype.isOnlineAssetsActivated=function(){return this.Vh},t.prototype.isSupported=function(){return this.zh},t.prototype.processStaticResource=function(t){var n;return X(this,void 0,void 0,(function(){var i,r,s,e,u,o;return K(this,(function(h){switch(h.label){case 0:return h.trys.push([0,7,,8]),this.zh?(i=void 0,Lr(t.input)?[3,3]:[4,window.fetch(t.input)]):[2];case 1:return[4,h.sent().blob()];case 2:return i=h.sent(),[3,4];case 3:if(!(r=is(t.input)))return[2];i=r,h.label=4;case 4:return[4,i.arrayBuffer()];case 5:return s=h.sent(),[4,crypto.subtle.digest(this.Bh,s)];case 6:return e=h.sent(),u=rs(e),o=Lr(t.input)?void 0:t.input,this.Wh(t.id,u,o),null===(n=this.Jh)||void 0===n||n.call(this,{hash:u,blob:i}),[3,8];case 7:return h.sent(),[3,8];case 8:return[2]}}))}))},t.prototype.processStaticCssLinkResource=function(t){return X(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.zh?[4,this.Yh(t.input)]:[2];case 1:return n=i.sent(),this.Wh(t.id,n.get(Wt(t.input)).hash,t.input),this.Xh(n),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.isStaticResourceManagerSupported=function(){return this.zh},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.sendStaticResource=function(t){this.Jh=t},t.prototype.flushEvents=function(){var t;if(Object.keys(this.Fh).length){this.Gh&&clearTimeout(this.Gh);var n={type:Sn.RESOURCE_HASHES,date:Fs(),args:[this.Fh]};this.Gh=null,this.Fh={},null===(t=this.Kn)||void 0===t||t.call(this,n)}},t.prototype.start=function(){this.fn||(this.fn=!0)},t.prototype.stop=function(){this.fn&&(this.fn=!1,this.Vh=!1,this.flushEvents())},t.prototype.Wh=function(t,n,i){var r=this,s=n;i&&(s+="?".concat(this.qh,"=").concat(i)),this.Fh[t]=s,this.Gh&&clearTimeout(this.Gh),this.Gh=window.setTimeout((function(){return r.flushEvents()}),this.Hh)},t.prototype.Yh=function(t){return X(this,void 0,void 0,(function(){var n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p;return K(this,(function(m){switch(m.label){case 0:n=new Map,i=Wt(t),r=[{resourceRawPath:t,resourceAbsolutePath:i}],m.label=1;case 1:if(!(r.length>0))return[3,17];if(s=csArray.prototype.pop.call(r),!this.isOnlineAssetsActivated()&&null!==s.resourceAbsolutePath&&!Lr(s.resourceAbsolutePath))return n.set(s.resourceAbsolutePath,null),[3,1];if(void 0!==n.get(s.resourceAbsolutePath))return[3,1];m.label=2;case 2:return m.trys.push([2,15,,16]),null===s.resourceRawPath||csString.prototype.indexOf.call(s.resourceRawPath,".css")>0?s.data?[3,5]:[4,fetch(s.resourceAbsolutePath)]:[3,8];case 3:return w=m.sent(),e=s,[4,w.text()];case 4:e.data=m.sent(),m.label=5;case 5:for(s.nestedResources||(s.nestedResources=csArray.from(new Set(xr(s.data)))),u=!1,o=!1,h=function(t){var i=Lr(t)?t:s.resourceAbsolutePath?Jt(t,s.resourceAbsolutePath):Wt(t),e=n.get(i);if(void 0!==e){if(null!==e){var h=c.Kh(e,t);s.data=csString.prototype.replaceAll.call(s.data,t,h)}return"continue"}var a=void 0!==csArray.prototype.find.call(r,(function(t){return t.resourceAbsolutePath===i}));a||(u=!0,o||(csArray.prototype.push.call(r,s),o=!0),csArray.prototype.push.call(r,{resourceRawPath:t,resourceAbsolutePath:i}))},c=this,a=0,f=s.nestedResources;a<f.length;a++)v=f[a],h(v);return u?[3,7]:[4,this.$h(s.data)];case 6:l=m.sent(),n.set(s.resourceAbsolutePath,{hash:l.hash,blob:l.blob}),m.label=7;case 7:return[3,14];case 8:return d=void 0,Lr(s.resourceAbsolutePath)?[3,11]:[4,fetch(s.resourceAbsolutePath)];case 9:return[4,(w=m.sent()).blob()];case 10:return d=m.sent(),[3,12];case 11:if(!(y=is(s.resourceAbsolutePath)))return n.set(s.resourceAbsolutePath,null),[3,1];d=y,m.label=12;case 12:return[4,this.Zh(d)];case 13:p=m.sent(),n.set(s.resourceAbsolutePath,{hash:p,blob:d}),m.label=14;case 14:return[3,16];case 15:return m.sent(),n.set(s.resourceAbsolutePath,null),[3,16];case 16:return[3,1];case 17:return[2,n]}}))}))},t.prototype.Kh=function(t,n){var i="cs://resources/".concat(t.hash);return Lr(n)||(i+="?".concat(this.qh,"=").concat(n)),i},t.prototype.$h=function(t){return X(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(s){switch(s.label){case 0:return[4,(n=new Blob([t],{type:"text/css"})).arrayBuffer()];case 1:return i=s.sent(),[4,crypto.subtle.digest(this.Bh,i)];case 2:return r=s.sent(),[2,{blob:n,hash:rs(r)}]}}))}))},t.prototype.Zh=function(t){return X(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return[4,t.arrayBuffer()];case 1:return n=i.sent(),[4,crypto.subtle.digest(this.Bh,n)];case 2:return[2,rs(i.sent())]}}))}))},t.prototype.Xh=function(t){var n=this;t.forEach((function(t){var i;t&&(null===(i=n.Jh)||void 0===i||i.call(n,{hash:t.hash,blob:t.blob}))}))},t}(),Ys=function(){function t(){this.Qh=[],this.tc=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var s=csArray.prototype.pop.call(i),e=s.root;null!==e;)if(r&&n&&n.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.tc,this.tc+=1,f(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):E(e)&&this.nc(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var s=n.__contentsquare_identifier;if(s&&i.add(s),f(n)&&csElementshadowRoot.apply(n)){var e=csElementshadowRoot.apply(n);this.getIds(e).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Qh,t)},t.prototype.nc=function(t){for(var n=0,i=this.Qh;n<i.length;n++){(0,i[n])(t)}},t}(),Xs=function(){function t(){this.ic=new Map,this.rc={},this.sc=!1}return t.prototype.start=function(){},t.prototype.stop=function(){this.flushEvents(),this.ic.clear()},t.prototype.serializeTextNode=function(t,n){var i=this.setReferenceId(n.data);return n.data="cstextref://".concat(i),n},t.prototype.serializeCDATASectionNode=function(t,n){var i=this.setReferenceId(n.data);return n.data="cstextref://".concat(i),n},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.flushEvents=function(){var t=this.ec();t&&this.Kn(t)},t.prototype.getPendingEvents=function(){var t=this.ec();return t?[t]:[]},t.prototype.getReferenceId=function(t){return this.ic.get(t)},t.prototype.setReferenceId=function(t){return this.oc(t)},t.prototype.ec=function(){if(0!==Object.keys(this.rc).length){var t={type:Sn.TEXT_REF,date:St(),args:[this.rc]};return this.rc={},t}},t.prototype.oc=function(t){var n=this,i=this.ic.get(t);return i||(i=this.ic.size+1,this.ic.set(t,i),this.rc[i]=t,this.sc||(this.sc=!0,ki((function(){n.sc=!1,n.flushEvents()}))),i)},t}(),Ks="v2/recording",$s=["setCapturedElementsSelector"],Zs=["setPIISelectors"],Qs=["isRecording"],te=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],ne=["replay:resourceManager:getStatus","cssrm:getStatus"],ie=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b){this.hc=t,this.J=n,this.L=i,this.cc=r,this.un=s,this.Ro=e,this.Th=u,this.ac=o,this.M=h,this.rr=c,this.$=a,this.cn=f,this.er=v,this.ur=l,this.hr=d,this.pu=w,this.cr=y,this.Wn=p,this.fc=m,this.vc=g,this.lc=A,this.ye=S,this.wc=E,this.yc=b,this.lr=null,this.mc=null}return t.prototype.init=function(){var t=this,n=[],i=new js("csPersisted");this.gc(i);var r=new li;this.Ki=new vi;var s=new Ys,e=new yr(this.cn);this.Ac=new Rr(this.M,this.L),this.Ac.init();var u=new qr;csArray.prototype.push.call(n,u);var o=new Br(this.ye,s),h=[],c=[new Ts,e,this.Ac,u],a=null;if(this.L.useStaticResourceManager){var f=new us(window.crypto);f.init(),this.lr=new Js(f),this.lr.init(),csArray.prototype.push.call(n,this.lr),this.lr.isStaticResourceManagerSupported()&&(a=new zs(this.lr,this.cn),csArray.prototype.push.call(c,a),this.mc=new Vs(this.lr,this.L.getStaticResourceManagerUri(),this.Th))}var v=new _s,l=new Os(s,v);l.init(),csArray.prototype.push.call(n,l),l.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(c,l);var d,w=new Xs;if(this.L.textVisibilityEnabled&&Qr.isSupported()){var y=new Qr(w,this.cn,1e3);csArray.prototype.push.call(c,y),csArray.prototype.push.call(n,y),csArray.prototype.push.call(h,y)}csArray.prototype.push.call(c,w),csArray.prototype.push.call(n,w),csArray.prototype.push.call(h,w),d=this.Sc()?new Rs(c,s):new Ns(c);var p=new Nr(r,this.Th,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}},{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.J.getRecordingStates(),",")}}}),m=new ts("".concat(this.L.getRecordingUri(),"/").concat(Ks)),g=new Bs;this.Gs=new Cs(this.Ro,this.L,this.$,g),this.Gs.init(),this.Bn=new lr(d,s,this.Ac,this.an),this.Bn.setAnonymization(this.Gs.shouldUseAnonymization()),this.nr=new ti(this.un,s,this.cn,this.an),this.nr.init();var A=new ai(this.Bn,o,u,this.Wn,s,this.cn);this.vr=new ur(i,m,this.ar),csArray.prototype.push.call(n,new dr(s,this.cn,u,v)),csArray.prototype.push.call(n,new zr(window)),csArray.prototype.push.call(n,new Cr(window.location,this.M,new qs)),this.recordingService=new er(this.L,this.Ki,p,r,v,A,this.nr,new os(this.pu,s,this.cn),this.rr,this.J,this.er,this.ur,this.hr,this.cr,this.an,this.ar,this.vr,this.lr,n,m),this.Ec=new Ir(this.nr,A,new kr(this.L),this.recordingService,this.Bn,this.Gs,this.Wn),this.fc.addListener(this.recordingService),this.vc.addListener(this.recordingService),this.vc.addListener(this.Ec),this.mc&&this.vc.addListener(this.mc),o.init(),this.Ec.init(),this.recordingService.init(),this.ac.register(Qs,(function(){return t.J.isReplayRecorded()&&!t.lc.isUrlExcludedForSessionReplay()})),this.ac.register($s,(function(n){t.Ac.setWhitelistedElementsSelector(n),t.Wn.emitRecordingStatusChange()})),this.ac.register(Zs,(function(n){t.cn.setPIISelectors(n),t.Wn.emitRecordingStatusChange()})),this.ac.register(te,(function(){t.recordingService.activateOnlineAssetsOnNextPageview(),t.Wn.emitRecordingStatusChange()})),this.ac.register(ne,(function(){return t.recordingService.getStaticResourceManagerStatus()})),this.hc.enableRecordingStatus(this.recordingService,this.cn,this.Gs,this.Ac,this.J,this.an)},t.prototype.onAfterNaturalPageView=function(){var t;null===(t=this.mc)||void 0===t||t.initState()},t.prototype.onStartTracking=function(){this.vr.recover(),this.Bn.setAnonymization(this.Gs.shouldUseAnonymization()),this.J.isReplayRecorded()&&!this.lc.isUrlExcludedForSessionReplay()&&(this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.bc())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.J.isReplayRecorded()||this.lc.isUrlExcludedForSessionReplay()||this.J.isTemporarilyRecorded()||this.vr.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Bn.setAnonymization(this.Gs.shouldUseAnonymization()),this.J.isReplayRecorded()&&!this.lc.isUrlExcludedForSessionReplay()?(this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Rc()):this.Nc()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.Nc()},t.prototype.onOptout=function(){this.Nc()},t.prototype.onReplayUnanonymizationConsentGranted=function(){this.Bn.setAnonymization(this.Gs.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentGranted(),this.Wn.emitRecordingStatusChange()},t.prototype.onReplayUnanonymizationConsentWithdrawn=function(){this.Bn.setAnonymization(this.Gs.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.Wn.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){t===oi.NOT_RECORDED&&n===hi.ETR_OFF?(this.recordingService.clearEvents(),this.Nc()):(this.ar.setQueryParams({rt:csArray.prototype.join.call(this.J.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.Bn.isDOMSerializationInProgress()||this.recordingService.pushEvents())},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),this.vr.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.vr.allowSendingLastMessage(),this.nr.start(),this.recordingService.pushEvents()},t.prototype.onAfterReplayRecordingConsentGranted=function(){this.J.isReplayRecorded()&&!this.lc.isUrlExcludedForSessionReplay()&&(this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.bc(),this.recordingService.triggerRecordingForSessionGranted())},t.prototype.onAfterReplayRecordingConsentWithdrawn=function(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Nc())},t.prototype.bc=function(){var t;this.recordingService.updateStaticResourceManagerOnlineAssets(),this.Ec.start(),this.recordingService.start(),null===(t=this.mc)||void 0===t||t.start(),this.vr.start(),this.Wn.emitRecordingStatusChange()},t.prototype.Nc=function(){var t;this.Ec.stop(),this.recordingService.stop(),null===(t=this.mc)||void 0===t||t.stop(),this.vr.stop(),this.Wn.emitRecordingStatusChange()},t.prototype.Rc=function(){this.Nc(),this.bc()},t.prototype.gc=function(t){this.ar=this.wc.create("".concat(this.L.getRecordingUri(),"/").concat(Ks),!0,"byteArray",t)},t.prototype.Sc=function(){return Is.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.Tc=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&this.Oc.isSupported()&&this.kc.isSupported()},Y([Jn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),Y([Jn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}();!function(t){t[t.NOT_NEEDED=1]="NOT_NEEDED",t[t.NOT_EXPRESSED=2]="NOT_EXPRESSED",t[t.WITHDRAWN=3]="WITHDRAWN",t[t.GRANTED=4]="GRANTED"}(Gs||(Gs={})),function(t){t.isReplayConsentNeeded=function(t){return t.replayConsentRequiredForSession},t.isRecordingBlockedByConsent=function(t){return t.recordingState===oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED||t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN},t.isRecordingWithDrawn=function(t){return t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN}}(Ws||(Ws={}));var re=function(){function t(t,n,i,r){this.W=t,this.J=n,this.L=i,this.Cc=r,this.Ic=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Ic},t.prototype.setNaturalPageViewSent=function(t){this.Ic=t},t.prototype.getTrackingContext=function(){var t=this.J.getSession();if(!t)return null;var n=this.getSessionKey();if(!n)return null;var i=this._c(t),r=this.Pc(),s=this.xc(),e=this.Lc();return{projectId:r,sessionKey:n,pageNumber:i,pageViewType:s,isRecording:this.Mc(),uxaDomain:e,recordingConsentState:this.Dc(t)}},t.prototype.getSessionKey=function(){var t=this.W.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.Dc=function(t){return Ws.isReplayConsentNeeded(this.L)?t.recordingState===oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED?Gs.NOT_EXPRESSED:t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN?Gs.WITHDRAWN:Gs.GRANTED:Gs.NOT_NEEDED},t.prototype._c=function(t){return t.pageNumber},t.prototype.Pc=function(){return this.L.projectId},t.prototype.xc=function(){return this.Cc.getPageViewType()},t.prototype.Lc=function(){return this.L.uxaDomain},t.prototype.Mc=function(){return this.J.isReplayRecorded()},t}(),se=function(){function t(t){this.Uc=t,this.jc=[]}return t.prototype.handleCommand=function(t){if(Pt(t)&&(this.Hc(t),this.Uc.isNaturalPageViewSent())){var n=this.Uc.getTrackingContext();null!==n&&this.qc(t,n)}},t.prototype.Hc=function(t){csArray.prototype.push.call(this.jc,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Uc.getTrackingContext();null!==n&&csArray.prototype.map.call(this.jc,(function(i){return t.qc(i,n)}))},t.prototype.qc=function(t,n){setTimeout((function(){t(n)}))},t}(),ee=function(){function t(t){this.Uc=t,this.zc=[]}return t.prototype.handleCommand=function(t){return this.Uc.isNaturalPageViewSent()?this.Vc(t):void this.Bc(t)},t.prototype.Vc=function(t){var n=this.Uc.getSessionKey();return this._o(t)&&null!==n&&this.qc(t.callback,n),n},t.prototype.Bc=function(t){this._o(t)&&csArray.prototype.push.call(this.zc,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Uc.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.zc,(function(i){t.qc(i,n)})),this.zc=[]},t.prototype._o=function(t){return t&&"function"==typeof t.callback},t.prototype.qc=function(t,n){setTimeout((function(){t(n)}))},t}(),ue=function(){function t(t,n){this.Fc=t,this.Uc=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=this.Uc.getTrackingContext();null!==n&&this.Fc.sendToChildren(tn.TrackingContextResultMessage,J(J({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.Uc.isNaturalPageViewSent()){var n=this.Uc.getTrackingContext();null!==n&&(t.trackingContext=n,this.Fc.sendToChildren(tn.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Uc.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Zt.AfterPageView};this.Fc.sendToChildren(tn.IntegrationCallback,n)}},t}();function oe(t,n){var i,r=t.isRecording,s=t.pageNumber,e=t.projectId,u=t.uxaDomain,o=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&o){var h=o[1],c=o[2];i="".concat(u,"/quick-playback/index.html?pid=").concat(e,"&uu=").concat(h,"&sn=").concat(c,"&pvid=").concat(s,"&recordingType=cs"),n.withTimestamp&&(i+="&t=".concat(St()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}var he,ce,ae=function(){function t(t){this.Uc=t}return t.prototype.handleCommand=function(t,n){Ct(t)&&Pt(n)&&this.qc(t,n)},t.prototype.qc=function(t,n){var i=this;setTimeout((function(){var r=i.Uc.getTrackingContext();if(r){var s=oe(r,t);n(s)}}))},t}(),fe=function(){function t(){this.jc=new Set}return t.prototype.handleCommand=function(t,n){var i=this;return Pt(t)?this.jc.has(t)?null:(this.jc.add(t),n&&this.executeCallback(t,n),function(){return i.jc.delete(t)}):null},t.prototype.executeCallbacks=function(t){var n=this;this.jc.forEach((function(i){return n.executeCallback(i,t)}))},t.prototype.executeCallback=function(t,n){setTimeout((function(){try{t(n)}catch(t){}}))},t}(),ve=["afterPageView"],le=["getSessionKey"],de=["onRecordingStateChange"],we=["replay:link:generate"],ye=function(){function t(t,n,i,r,s,e,u,o){this.W=t,this.J=n,this.ac=i,this.Gc=r,this.Fc=s,this.L=e,this.Cc=u,this.hc=o}return t.prototype.init=function(){var t=this;this.Uc=new re(this.W,this.J,this.L,this.Cc),this.Wc=new se(this.Uc),this.Jc=new ee(this.Uc),this.Yc=new fe,this.Xc=new ae(this.Uc),this.Kc=new ue(this.Fc,this.Uc),this.Gc.addListener(this.Kc),this.ac.register(le,(function(n){return t.Jc.handleCommand(n)})),this.ac.register(ve,(function(n){return t.Wc.handleCommand(n)})),this.ac.register(de,(function(n){t.Yc.handleCommand(n,t.hc.getRecordingStatus())})),this.ac.register(we,(function(n,i){t.Fs&&t.Xc.handleCommand(J(J({},n),{recordingStartTimestamp:t.hc.getRecordingStatus().recordingStartTimestamp}),i)}))},t.prototype.onAfterNaturalPageView=function(){this.Uc.setNaturalPageViewSent(!0),this.Jc.flushPendingCallbacks(),this.Wc.executeRegisteredCallbacks(),this.Kc.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Wc.executeRegisteredCallbacks(),this.Kc.sendAfterPageViewCallbackToChildren()},t.prototype.onRecordingStateChange=function(){this.Yc.executeCallbacks(this.hc.getRecordingStatus())},t.prototype.onRecordingStatusChange=function(){this.Yc.executeCallbacks(this.hc.getRecordingStatus())},t.prototype.setRecordingService=function(t){this.Fs=t},Y([Or()],t.prototype,"onRecordingStateChange",null),Y([Or()],t.prototype,"onRecordingStatusChange",null),t}(),pe=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=kt(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return kt(t)&&(kt(n)||Ot(n))},t}(),me=function(t){function n(n,i){var r=t.call(this)||this;return r.$c=n,r.M=i,r.Zc=[],r}return W(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Zc,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.Zc=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?pe.isValid(t,n)&&this.$c.add(new pe(this.M.anonymizePII(t),this.M.anonymizePII(n))):csArray.prototype.push.call(this.Zc,{key:t,value:n})},n}(wi),ge=function(){function t(t){this.cc=t,this.$c=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.$c,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.$c=[]},t.prototype.onBatchReady=function(t){this.Qc=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.$c;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.cc.compressSync(csJSON.stringify(t),"base64"),ct:this.cc.algorithm}},t.prototype.setBatchReadyCall=function(){this.Qc()},Y([Or(),ln("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),Ae=["trackDynamicVariable"],Se=function(){function t(t,n,i,r,s,e){this.ac=t,this.J=n,this.L=i,this.Th=r,this.cc=s,this.M=e,this._=new at(this.L.getTrackerUri(),"dvar"),this.$c=new ge(this.cc),this.ta=new me(this.$c,this.M)}return t.prototype.init=function(){var t=this;this._.setRequestParametersProviders(this.Th,this.$c),this.J.setDynamicVariablesService(this.ta),this.$c.onBatchReady((function(){return t._.send()})),this._.after((function(){return t.$c.clear()})),this.ac.register(Ae,(function(n){var i=void 0===n?{}:n,r=i.key,s=i.value;t.ta.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.ta.start()},t}(),Ee=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),kt(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return _t(t)&&Tt(t.revenue)&&kt(t.currency)&&t.currency.length<=10&&(!_t(t.id)||kt(t.id))},t}(),be=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.na(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return It(n.sku)&&(i.sku=n.sku),It(n.category)&&(i.category=n.category),It(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.na=function(t){return _t(t)&&kt(t.id)&&kt(t.name)&&Tt(parseFloat(t.price))&&Ot(parseInt(t.quantity,10))&&(!It(t.sku)||kt(t.sku))&&(!It(t.category)||kt(t.category))&&(!It(t.merchant)||kt(t.merchant))},t}(),Re=function(){function t(t,n,i){this.M=t,this.ia=n,this.rr=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.M.anonymizeFields(t,["id"]);this.ra=Ee.from(n)},t.prototype.getTransaction=function(){return this.ra},t.prototype.sendTransaction=function(){null!==this.ia&&null!==this.rr&&this.rr.isSessionValid()&&(this.ra.hasValidRevenue()?this.ia.send():on.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!Pt(t)){var n=this.M.anonymizeFields(t,["id","name","sku","category"]),i=be.from(n);null!==i&&csArray.prototype.push.call(this.sa,i)}},t.prototype.getItems=function(){return this.sa},t.prototype.clear=function(){this.ra=Ee.from({revenue:NaN}),this.sa=[]},t.prototype.getRequestParameters=function(){var t={id:this.ra.id?"".concat(this.ra.id):"",revenue:"".concat(this.ra.revenue)};return It(this.ra.tax)&&(t.tax="".concat(this.ra.tax)),It(this.ra.shipping)&&(t.shipping="".concat(this.ra.shipping)),It(this.ra.currency)&&(t.cu="".concat(this.ra.currency)),t.items=window.csJSON.stringify(this.sa),t},t}(),Ne=function(){function t(t,n){this.ea=t,this.rr=n,this.ua=null}return t.prototype.addToCart=function(t){var n={};kt(t.sku)&&(n.sku=csString.prototype.slice.call(t.sku,0,100)),kt(t.merchant)&&(n.merchant=csString.prototype.slice.call(t.merchant,0,100)),(n.sku||n.merchant)&&(this.ua=n,this.sendCartItem())},t.prototype.getCartItem=function(){return this.ua},t.prototype.sendCartItem=function(){this.rr.isSessionValid()&&this.ea.send()},t.prototype.clear=function(){this.ua=null},t.prototype.getRequestParameters=function(){if(!this.ua)return{};var t={};return kt(this.ua.sku)&&this.ua.sku.length>0&&(t.sku=this.ua.sku),kt(this.ua.merchant)&&this.ua.merchant.length>0&&(t.me=this.ua.merchant),t},t}(),Te=["ecommerce:addToCart","ec:cart:add"],Oe=["ecommerce:addTransaction","ec:transaction:create"],ke=["ecommerce:addItem","ec:transaction:items:add"],Ce=["ecommerce:send","ec:transaction:send"],Ie=function(){function t(t,n,i,r,s,e,u){this.L=t,this.W=n,this.J=i,this.ac=r,this.M=s,this.rr=e,this.$=u}return t.prototype.init=function(){var t=new at(this.L.getTrackerUri(),"transaction"),i=new at(this.L.getTrackerUri(),"addtocart"),r=new Re(this.M,t,this.rr),s=new Ne(i,this.rr);t.setRequestParametersProviders(this.L,this.W,this.J,this.$,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.L,this.W,this.J,this.$,s,n),i.after((function(){s.clear()})),this.ac.register(Oe,(function(t){r.addTransaction(t)})),this.ac.register(ke,(function(t){return r.addItem(t)})),this.ac.register(Ce,(function(){return r.sendTransaction()})),this.ac.register(Te,(function(t){s.addToCart(t)}))},t}(),_e=function(){function t(t){this.ve=t.performance}return t.prototype.getRequestParameters=function(){if(this.oa())return{};var t=this.ha();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.ha=function(){var t=this.ve.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.oa=function(){return!(this.ve&&this.ve.timing&&this.ve.timing.loadEventEnd>0)},t}();function Pe(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.DEAD_CLICK=30]="DEAD_CLICK",t[t.DEAD_ZOOM=31]="DEAD_ZOOM",t[t.PAGE_RELOAD=32]="PAGE_RELOAD",t[t.THRASHED_CURSOR=33]="THRASHED_CURSOR",t[t.BLANK_PAGE=34]="BLANK_PAGE"}(he||(he={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(ce||(ce={}));var xe,Le,Me,De,Ue,je,He=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),qe=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),ze=function(t){function n(n){var i=t.call(this)||this;return i.ca=n,i.supportedEventTypes=[he.MOUSEDOWN,he.MOUSEUP,he.CLICK,he.MOUSEOVER,he.TAP,he.DRAG,he.FLICK],i}return W(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.ca.getEventTargetPath(t)),n},n}(qe),Ve=function(){function t(t,n,i,r){this.L=t,this.ca=n,this.pu=i,this.Ue=r,this.aa=[],csArray.prototype.push.call(this.aa,new ze(this.ca))}return t.prototype.processGesture=function(t,n){switch(t.type){case ss.TAP:this.fa(n);break;case ss.FLICK:this.va(t,n);break;case ss.DRAG:this.da(t,n)}},t.prototype.fa=function(t){var n={type:he.TAP,ts:0,x:0,y:0,tgt:""},i=He.build(t,n,this.aa);i.tgt!==z.INVALID_ELEMENT&&this.Kn(i)},t.prototype.da=function(t,n){var i,r,s={type:he.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this.Ue)||void 0===i?void 0:i.collectGestureDistance)&&(s.distance=t.distance),(null===(r=this.Ue)||void 0===r?void 0:r.collectGestureVelocity)&&(s.velocity=t.velocity);var e=He.build(n,s,this.aa);e.tgt!==z.INVALID_ELEMENT&&this.Kn(e)},t.prototype.va=function(t,n){var i,r,s={type:he.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this.Ue)||void 0===i?void 0:i.collectGestureDistance)&&(s.distance=t.distance),(null===(r=this.Ue)||void 0===r?void 0:r.collectGestureVelocity)&&(s.velocity=t.velocity);var e=He.build(n,s,this.aa);e.tgt!==z.INVALID_ELEMENT&&this.Kn(e)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){var n=this;this.pu.subscribe(t.mu,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.pu.unsubscribe(t.mu)},t.mu="AnalysisGestureTracker",Y([Kn()],t.prototype,"processGesture",null),t}(),Be=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[he.CHANGE],n.wa=["text","email","number","search","tel","url","password"],n}return W(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=Xn(t);return g(i)&&csArray.prototype.indexOf.call(this.wa,i.type)>=0&&(n.isBlank=""===i.value),n},n}(qe),Fe=function(){function t(t,n,i){var r=this;this.C=t,this.ca=n,this.un=i,this.ya="select, select *, input, textarea",this.pa="select, select *, input, textarea",this.ma="a, a *, button, button *, select, select *, input, textarea",this.ga="input, select, textarea",this.Aa=150,this.Sa=400,this.Ea=!1,this.ba=Tr((function(t,n){return r.scrollListener(t,n)}),this.Aa),this.Ra=Tr((function(t){return r.resizeListener(t)}),this.Aa),this.Na=Un((function(t){return r.mouseMoveListener(t)}),this.Sa),this.Ta=[{boundElement:window,type:"resize",listener:function(){return r.Ra()}},{boundElement:document,type:"scroll",listener:function(t){return r.ba(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Na(function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t}(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Oa=[{type:"change",listener:this.un.on(this.pa,(function(t){return r.changeListener(t)}))}],this.ka=$([{boundElement:document,type:"mouseover",listener:this.un.on(this.ma,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.un.on(this.ma,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.un.on(this.ya,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.un.on(this.ya,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"keyup",listener:this.un.on(this.ga,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.un.on(this.ga,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.un.on(this.ga,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.un.on(this.ga,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.un.on(this.ga,(function(t){return r.pasteListener(t)}))}],csArray.prototype.map.call(this.Oa,(function(t){return J(J({},t),{boundElement:document})})),!0),this.aa=[],this.Vn={},this.vn=new Set,this.Ca=function(t,n){switch(n){case"initial":r.vn.add(t);break;case"added":r.vn.has(t)||(r.vn.add(t),r.Cn(t));break;case"removed":r.Ln(t),r.vn.delete(t)}},xi.isSupported()&&(this.Ia=new Gi(this.Ca)),this.Rn(),this.C.mouseMoveHeatmapEnabled,csArray.prototype.push.call(this.aa,new Be,new ze(this.ca))}return t.prototype.Cn=function(t){if(b(t)){var n=this._a();csArray.prototype.forEach.call(n,(function(t){return Cn(t)}))}else{n=this.Pa();csArray.prototype.forEach.call(n,(function(n){Cn(J(J({},n),{boundElement:t}))}))}},t.prototype.Ln=function(t){if(b(t)){var n=this._a();csArray.prototype.forEach.call(n,(function(t){return In(t)}))}else{n=this.Pa();csArray.prototype.forEach.call(n,(function(n){In(J(J({},n),{boundElement:t}))}))}},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){var t,n=this;null===(t=this.Ia)||void 0===t||t.observe(document),this.Cn(document),this.vn.forEach((function(t){return n.Cn(t)})),this.resizeListener()},t.prototype.stop=function(){var t,n=this;this.Ln(document),this.vn.forEach((function(t){return n.Ln(t)})),null===(t=this.Ia)||void 0===t||t.disconnect(),this.vn.clear()},t.prototype.flushPendingDebouncedListeners=function(){this.ba.flushPending(),this.Ra.flushPending()},t.prototype.Pa=function(){return this.un.isMatchesSelectorSupported()?this.Oa:(on.warn("Element.matches is not implemented yet"),[])},t.prototype._a=function(){return this.un.isMatchesSelectorSupported()?$($([],this.Ta,!0),this.ka,!0):(on.warn("Element.matches is not implemented yet"),this.Ta)},t.prototype.resizeListener=function(t){var n=$n.getScrollContainer(),i=xt(n);i&&(this.Ea=!0);var r={type:he.RESIZE,ts:0,x:i?n.clientWidth:Li.windowWidth(),y:i?n.clientHeight:Li.windowHeight()};void 0!==t&&(r.d=t),this.Kn(r)},t.prototype.scrollListener=function(t,n){var i=$n.isEventOnScrollContainer(n);!this.Ea&&i&&this.resizeListener();var r={type:he.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:Li.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:Li.windowOffsetY(),d:t},s=He.build(n,r,this.aa);this.Kn(s)},t.prototype.mouseMoveListener=function(t){var n={type:he.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=He.build(t,n,this.aa);this.Kn(i)},t.prototype.mouseDownListener=function(t){var n={type:he.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.mouseUpListener=function(t){var n={type:he.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.clickListener=function(t){var n={type:he.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.mouseOverListener=function(t){var n={type:he.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.mouseOutListener=function(t){var n={type:he.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.ca.getEventTargetPath(t)},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.focusInListener=function(t){var n={type:he.FOCUSIN,ts:0,tgt:this.ca.getEventTargetPath(t)},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.focusOutListener=function(t){var n={type:he.FOCUSOUT,ts:0,tgt:this.ca.getEventTargetPath(t)},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.changeListener=function(t){var n={type:he.CHANGE,ts:0,tgt:this.ca.getEventTargetPath(t)},i=He.build(t,n,this.aa);this.xa(i)},t.prototype.copyListener=function(t){var n={type:he.COMMAND,ts:0,tgt:this.ca.getEventTargetPath(t),key:Hn.COPY};this.xa(n)},t.prototype.cutListener=function(t){var n={type:he.COMMAND,ts:0,tgt:this.ca.getEventTargetPath(t),key:Hn.CUT};this.xa(n)},t.prototype.pasteListener=function(t){var n={type:he.COMMAND,ts:0,tgt:this.ca.getEventTargetPath(t),key:Hn.PASTE};this.xa(n)},t.prototype.keyUpListener=function(t){var n={type:he.KEYUP,ts:0,tgt:this.ca.getEventTargetPath(t),key:this.La(t)};this.xa(n)},t.prototype.keyDownListener=function(t){var n={type:he.KEYDOWN,ts:0,tgt:this.ca.getEventTargetPath(t),key:this.La(t)};this.xa(n)},t.prototype.La=function(t){var n=this.Vn[t.key];return void 0===n?jn.ALPHANUMERICAL:n},t.prototype.xa=function(t){Pe(t)&&t.tgt!==z.INVALID_ELEMENT&&this.Kn(t)},t.prototype.Rn=function(){this.Vn[" "]=jn.SPACE,this.Vn.Spacebar=jn.SPACE,this.Vn.Enter=jn.ENTER,this.Vn.Backspace=jn.BACKSPACE,this.Vn.Delete=jn.DELETE,this.Vn.ArrowUp=jn.ARROWUP,this.Vn.ArrowDown=jn.ARROWDOWN,this.Vn.ArrowLeft=jn.ARROWLEFT,this.Vn.ArrowRight=jn.ARROWRIGHT,this.Vn.Up=jn.ARROWUP,this.Vn.Down=jn.ARROWDOWN,this.Vn.Left=jn.ARROWLEFT,this.Vn.Right=jn.ARROWRIGHT,this.Vn.CapsLock=jn.CAPSLOCK,this.Vn.Shift=jn.SHIFT,this.Vn.Tab=jn.TAB},Y([ln("Event handler type: resize")],t.prototype,"resizeListener",null),Y([ln("Event handler type: scroll")],t.prototype,"scrollListener",null),Y([ln("Event handler type: mouseMove"),Kn()],t.prototype,"mouseMoveListener",null),Y([ln("Event handler type: mouseDown"),Kn()],t.prototype,"mouseDownListener",null),Y([ln("Event handler type: mouseUp"),Kn()],t.prototype,"mouseUpListener",null),Y([ln("Event handler type: click"),Kn()],t.prototype,"clickListener",null),Y([ln("Event handler type: mouseOver"),Kn()],t.prototype,"mouseOverListener",null),Y([ln("Event handler type: mouseOut"),Kn()],t.prototype,"mouseOutListener",null),Y([ln("Event handler type: focusIn")],t.prototype,"focusInListener",null),Y([ln("Event handler type: focusOut")],t.prototype,"focusOutListener",null),Y([ln("Event handler type: change")],t.prototype,"changeListener",null),Y([ln("Event handler type: copy")],t.prototype,"copyListener",null),Y([ln("Event handler type: cut")],t.prototype,"cutListener",null),Y([ln("Event handler type: paste")],t.prototype,"pasteListener",null),Y([ln("Event handler type: keyup")],t.prototype,"keyUpListener",null),Y([ln("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Ge=function(){function t(){var t=this;this.Ma=100,this.Da=0,this.Ua=Li.documentHeight(),this.ja={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){Cn(this.ja),this.reset()},t.prototype.stop=function(){In(this.ja)},t.prototype.reset=function(){this.Ua=Li.documentHeight();var t=$n.getScrollContainer();if(null===t)this.Da=this.Ha(Li.documentHeight());else{var n=this.qa(t);this.Da=this.za(t,n)}this.Kn()},t.prototype.maxScrollRateListener=function(t){var n,i;if($n.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.qa(r);n=this.Va(r,s),i=this.za(r,s)}else n=Li.documentHeight(),i=this.Ha(n);(i>this.Da||n>this.Ua)&&(this.Da=i,n>this.Ua&&(this.Ua=n),this.Kn())},t.prototype.Ha=function(t){var n=Math.round(this.Ba()/t*100);return Math.min(n,this.Ma)},t.prototype.Ba=function(){var t=Li.windowHeight();return Li.windowOffsetY()+t},t.prototype.za=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.Va(t,n),s=Math.round(i/r*100);return Math.min(s,this.Ma)},t.prototype.qa=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.Va=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.Da),mdh:"".concat(this.Ua)}},Y([ln("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),We=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A){this.L=t,this.Fa=n,this.pu=i,this.Ga=r,this.Wa=s,this.Ja=e,this.Ya=u,this.Xa=o,this.rr=h,this.Wt=c,this.Ka=a,this.$a=f,this.kr=v,this.ar=l,this.Za=d,this.Qa=w,this.tf=y,this.nf=p,this.if=m,this.rf=g,this.sf=A,this.gr=new di,this.ef=!1}return t.prototype.init=function(){var t,n,i,r,s,e,u,o=this;this.Fa.onEvent((function(t){return o.Nr(t)})),this.pu.onEvent((function(t){return o.Nr(t)})),this.Ga.onEvent((function(){var t=o.Ga.getRequestParameters();o.ar.setQueryParams(t),o.Ya.setQueryParams(t)})),this.$a.onEvent((function(t){return o.uf(t)})),this.hf(),null===(t=this.Za)||void 0===t||t.onEvent((function(t){return o.Nr(t)})),null===(n=this.if)||void 0===n||n.onEvent((function(t){return o.Nr(t)})),null===(i=this.Qa)||void 0===i||i.onEvent((function(t){return o.Nr(t)})),null===(r=this.tf)||void 0===r||r.onEvent((function(t){return o.Nr(t)})),this.cf(),null===(s=this.nf)||void 0===s||s.onEvent((function(t){return o.uf(t)})),null===(e=this.rf)||void 0===e||e.onEvent((function(t){return o.uf(t)})),null===(u=this.sf)||void 0===u||u.onEvent((function(t){return o.uf(t)}))},t.prototype.cf=function(){var t=this;this.Ya.onBeaconSuccess((function(){t.Ja.clearEvents()})),this.Ya.onBeaconFailure((function(n){t.af(n)}))},t.prototype.initStates=function(){var t=this.Xa.getRequestParameters(),n=this.Wa.getRequestParameters(),i=this.Ga.getRequestParameters();this.ar.setQueryParams(t),this.ar.setQueryParams(n),this.ar.setQueryParams(i),this.Ya.setQueryParams(t),this.Ya.setQueryParams(n),this.Ya.setQueryParams(i),this.ff()},t.prototype.start=function(t){var n,i,r,s,e,u,o;t||null===(n=this.nf)||void 0===n||n.start(),this.kr.start(),this.Fa.start(),this.Ga.start(),this.pu.start(),null===(i=this.Za)||void 0===i||i.start(),null===(r=this.tf)||void 0===r||r.start(),t||this.$a.start(),null===(s=this.Qa)||void 0===s||s.start(),null===(e=this.if)||void 0===e||e.start(),null===(u=this.rf)||void 0===u||u.start(),null===(o=this.sf)||void 0===o||o.start()},t.prototype.collectInitialEvents=function(){var t;null===(t=this.Za)||void 0===t||t.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Fr(t)},t.prototype.uf=function(t){this.rr.isCurrentPageviewValid()&&this.Fr(t)},t.prototype.Nr=function(t){this.rr.isSessionValid()&&this.Fr(t)},t.prototype.Fr=function(t){this.Ja.addEvent(this.vf(t)),this.Ja.isFull()&&this.sendEvents(),this.L.emitDebugEvents&&this.gr.emit("analysisEvent",J(J({},t),{typeName:he[t.type]}))},t.prototype.vf=function(t){return t.ts=this.lf(),t},t.prototype.df=function(){this.Ya.setQueryParams({hlm:"true"}),this.ef=!0},t.prototype.sendLastMessageBeacon=function(){this.Ya.setQueryParams(this.Wa.getRequestParameters()),this.Ya.send(this.Ja.stringifyEvents()),this.Ya.removeQueryParams(["hlm"]),this.ef=!1},t.prototype.sendEvents=function(){this.Ja.isEmpty()||(this.ar.setQueryParams(this.Xa.getRequestParameters()),this.ar.setQueryParams(this.Wa.getRequestParameters()),this.ar.send(this.Ja.getEvents()),this.Ja.clearEvents())},t.prototype.stop=function(){var t,n,i,r,s,e,u;this.kr.stop(),this.Fa.stop(),this.Ga.stop(),this.pu.stop(),this.$a.stop(),null===(t=this.Za)||void 0===t||t.stop(),null===(n=this.Qa)||void 0===n||n.stop(),null===(i=this.tf)||void 0===i||i.stop(),null===(r=this.if)||void 0===r||r.stop(),this.Ja.empty(),null===(s=this.nf)||void 0===s||s.stop(),null===(e=this.rf)||void 0===e||e.stop(),null===(u=this.sf)||void 0===u||u.stop()},t.prototype.clearStates=function(t){var n,i;this.Fa.flushPendingDebouncedListeners(),null===(n=this.Qa)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.tf)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.df(),this.sendLastMessageBeacon()):this.sendEvents(),this.Ga.reset(),this.$a.stop(),this.ar.removeQueryParams()},t.prototype.ff=function(){this.wf=St()},t.prototype.lf=function(){return St()-this.wf},t.prototype.hf=function(){var t=this;this.kr.onEvent((function(n){var i,r;null===(i=t.Qa)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.tf)||void 0===r||r.flushPendingTextHighlightEvent(),n===yi.PagehideVisible?t.df():n===yi.PagehideHidden?(t.df(),t.sendLastMessageBeacon()):t.Ja.isEmpty()&&!t.ef||t.sendLastMessageBeacon()}))},t.prototype.af=function(t){try{this.Ja.isEmpty()&&!this.ef||this.Wt.save({requestParameters:t,events:this.Ja.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===ce.SUCCESS||t===ce.FAILURE||t===ce.ATTEMPT}(t))if(xt(n)){var i={status:t,type:he.SUBMIT,ts:0,tgt:this.Ka.getElementPath(n)};i.tgt!==z.INVALID_ELEMENT&&this.uf(i)}else on.warn("AnalysisEvents Service: invalid element: ".concat(n));else on.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Je=function(){function t(t,n){var i=this;this.Wt=t,this.ar=n,this.yf=function(){"visible"===document.visibilityState&&i.pf()}}return t.prototype.start=function(){this.pf(),this.ki()},t.prototype.stop=function(){this._i()},t.prototype.getRecoveryStorage=function(){return this.Wt},t.prototype.pf=function(){var t=this.Wt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.ar.send(r,i)}},t.prototype.ki=function(){document.addEventListener("visibilitychange",this.yf)},t.prototype._i=function(){document.removeEventListener("visibilitychange",this.yf)},t}(),Ye=function(){function t(t){this.Vo=t}return t.prototype.save=function(t){localStorage.setItem(this.Vo,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.Vo)},t.prototype.recover=function(){var t=localStorage.getItem(this.Vo);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){on.error("Invalid item in localStorage.\n         (key:".concat(this.Vo,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Xe=function(){function t(t){var n=this;this.mf=t,this.gf=function(t){return n.processMetric(t)},this.Ni=!1}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.Ni||(this.Ni=!0,this.mf.onFCP(this.gf),this.mf.onCLS(this.gf),this.mf.onFID(this.gf),this.mf.onLCP(this.gf),this.mf.onTTFB(this.gf),this.mf.onINP(this.gf))},t.prototype.stop=function(){this.Ni=!1},t.prototype.processMetric=function(t){if(this.Ni){var n={type:he.PERFORMANCE,name:t.name,val:t.value,ts:0};this.Kn(n)}},Y([ln("Performance metric handler")],t.prototype,"processMetric",null),t}(),Ke=-1,$e=function(t){addEventListener("pageshow",(function(n){n.persisted&&(Ke=n.timeStamp,t(n))}),!0)},Ze=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Qe=function(){var t=Ze();return t&&t.activationStart||0},tu=function(t,n){var i=Ze(),r="navigate";return Ke>=0?r="back-forward-cache":i&&(document.prerendering||Qe()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},nu=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){n(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},iu=function(t,n,i,r){var s,e;return function(u){n.value>=0&&(u||r)&&((e=n.value-(s||0))||void 0===s)&&(s=n.value,n.delta=e,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},ru=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},su=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},eu=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},uu=-1,ou=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},hu=function(t){"hidden"===document.visibilityState&&uu>-1&&(uu="visibilitychange"===t.type?t.timeStamp:0,au())},cu=function(){addEventListener("visibilitychange",hu,!0),addEventListener("prerenderingchange",hu,!0)},au=function(){removeEventListener("visibilitychange",hu,!0),removeEventListener("prerenderingchange",hu,!0)},fu=function(){return uu<0&&(uu=ou(),cu(),$e((function(){setTimeout((function(){uu=ou(),cu()}),0)}))),{get firstHiddenTime(){return uu}}},vu=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},lu=[1800,3e3],du=function(t,n){n=n||{},vu((function(){var i,r=fu(),s=tu("FCP"),e=nu("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(e.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=Math.max(t.startTime-Qe(),0),s.entries.push(t),i(!0)))}))}));e&&(i=iu(t,s,lu,n.reportAllChanges),$e((function(r){s=tu("FCP"),i=iu(t,s,lu,n.reportAllChanges),ru((function(){s.value=performance.now()-r.timeStamp,i(!0)}))})))}))},wu=[.1,.25],yu={passive:!0,capture:!0},pu=new Date,mu=function(t,n){xe||(xe=n,Le=t,Me=new Date,Su(removeEventListener),gu())},gu=function(){if(Le>=0&&Le<Me-pu){var t={entryType:"first-input",name:xe.type,target:xe.target,cancelable:xe.cancelable,startTime:xe.timeStamp,processingStart:xe.timeStamp+Le};De.forEach((function(n){n(t)})),De=[]}},Au=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){mu(t,n),s()},r=function(){s()},s=function(){removeEventListener("pointerup",i,yu),removeEventListener("pointercancel",r,yu)};addEventListener("pointerup",i,yu),addEventListener("pointercancel",r,yu)}(n,t):mu(n,t)}},Su=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,Au,yu)}))},Eu=[100,300],bu=0,Ru=1/0,Nu=0,Tu=function(t){t.forEach((function(t){t.interactionId&&(Ru=Math.min(Ru,t.interactionId),Nu=Math.max(Nu,t.interactionId),bu=Nu?(Nu-Ru)/7+1:0)}))},Ou=function(){return Ue?bu:performance.interactionCount||0},ku=function(){"interactionCount"in performance||Ue||(Ue=nu("event",Tu,{type:"event",buffered:!0,durationThreshold:0}))},Cu=[200,500],Iu=0,_u=function(){return Ou()-Iu},Pu=[],xu={},Lu=function(t){var n=Pu[Pu.length-1],i=xu[t.interactionId];if(i||Pu.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};xu[r.id]=r,Pu.push(r)}Pu.sort((function(t,n){return n.latency-t.latency})),Pu.splice(10).forEach((function(t){delete xu[t.id]}))}},Mu=[2500,4e3],Du={},Uu=[800,1800],ju=function t(n){document.prerendering?vu((function(){return t(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(n)}),!0):setTimeout(n,0)},Hu=function(t,n){n=n||{};var i=tu("TTFB"),r=iu(t,i,Uu,n.reportAllChanges);ju((function(){var s=Ze();if(s){var e=s.responseStart;if(e<=0||e>performance.now())return;i.value=Math.max(e-Qe(),0),i.entries=[s],r(!0),$e((function(){i=tu("TTFB",0),(r=iu(t,i,Uu,n.reportAllChanges))(!0)}))}}))},qu=function(){function t(){}return t.prototype.onFCP=function(t){du(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},du(eu((function(){var i,r=tu("CLS",0),s=0,e=[],u=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=e[0],i=e[e.length-1];s&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(s+=t.value,e.push(t)):(s=t.value,e=[t])}})),s>r.value&&(r.value=s,r.entries=e,i())},o=nu("layout-shift",u);o&&(i=iu(t,r,wu,n.reportAllChanges),su((function(){u(o.takeRecords()),i(!0)})),$e((function(){s=0,r=tu("CLS",0),i=iu(t,r,wu,n.reportAllChanges),ru((function(){return i()}))})),setTimeout(i,0))})))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},vu((function(){var i,r=fu(),s=tu("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),i(!0))},u=function(t){t.forEach(e)},o=nu("first-input",u);i=iu(t,s,Eu,n.reportAllChanges),o&&su(eu((function(){u(o.takeRecords()),o.disconnect()}))),o&&$e((function(){var r;s=tu("FID"),i=iu(t,s,Eu,n.reportAllChanges),De=[],Le=-1,xe=null,Su(addEventListener),r=e,De.push(r),gu()}))}))}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},vu((function(){var i,r=fu(),s=tu("LCP"),e=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(s.value=Math.max(n.startTime-Qe(),0),s.entries=[n],i())},u=nu("largest-contentful-paint",e);if(u){i=iu(t,s,Mu,n.reportAllChanges);var o=eu((function(){Du[s.id]||(e(u.takeRecords()),u.disconnect(),Du[s.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,o,!0)})),su(o),$e((function(r){s=tu("LCP"),i=iu(t,s,Mu,n.reportAllChanges),ru((function(){s.value=performance.now()-r.timeStamp,Du[s.id]=!0,i(!0)}))}))}}))}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){Hu(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},vu((function(){ku();var i,r=tu("INP"),s=function(t){t.forEach((function(t){t.interactionId&&Lu(t),"first-input"===t.entryType&&!Pu.some((function(n){return n.entries.some((function(n){return t.duration===n.duration&&t.startTime===n.startTime}))}))&&Lu(t)}));var n,s=(n=Math.min(Pu.length-1,Math.floor(_u()/50)),Pu[n]);s&&s.latency!==r.value&&(r.value=s.latency,r.entries=s.entries,i())},e=nu("event",s,{durationThreshold:n.durationThreshold||40});i=iu(t,r,Cu,n.reportAllChanges),e&&(e.observe({type:"first-input",buffered:!0}),su((function(){s(e.takeRecords()),r.value<0&&_u()>0&&(r.value=0,r.entries=[]),i(!0)})),$e((function(){Pu=[],Iu=Ou(),r=tu("INP"),i=iu(t,r,Cu,n.reportAllChanges)})))}))}(t,{reportAllChanges:!0})},t}(),zu=function(){function t(t){void 0===t&&(t=[]),this.ei=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.ei)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.ei,t)},t.prototype.eventsCount=function(){return this.ei.length},t.prototype.clearEvents=function(){this.ei=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.ei.length},t.prototype.getEvents=function(){return this.ei},t}(),Vu="v2/events",Bu=["submit"],Fu=function(){function t(t,n,i,r,s,e,u,o,h,c){this.L=t,this.W=n,this.J=i,this.Ka=r,this.un=s,this.ac=e,this.rr=u,this.pu=o,this.Gc=h,this.wc=c}return t.prototype.init=function(){var t=this,n=new zu,i=this.wc.create("".concat(this.L.getTrackerUri(),"/").concat(Vu),!0,"base64");this.Af=this.Sf(i),this.Ef=this.bf(n,this.Af.getRecoveryStorage(),i),this.Ef.init(),this.Gc.addListener(this.Ef),this.ac.register(Bu,(function(n,i){t.Ef.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.Af.start(),this.Ef.start(t)},t.prototype.onAfterNaturalPageView=function(){this.Ef.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Ef.initStates(),this.Ef.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.Ef.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.Ef.clearStates(),this.Ef.stop(),this.Af.stop()},t.prototype.onOptout=function(){this.Ef.stop(),this.Af.stop()},t.prototype.bf=function(t,i,r){var s=new _e(window),e=new Ge,u=new Fe(this.L,this.Ka,this.un),o=new Ve(this.L,this.Ka,this.pu),h=new Xe(new qu),c=new Ri;var a=new ts("".concat(this.L.getTrackerUri(),"/").concat(Vu)),f=new Nr(this.L,this.W,this.J,n);return new We(this.L,u,o,e,s,t,a,f,this.rr,i,this.Ka,h,c,r,undefined,undefined,undefined,undefined,undefined,undefined,undefined)},t.prototype.Sf=function(t){return new Je(new Ye("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(je||(je={}));var Gu=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Wn=n,e.Rf=i,e.$=r,e.Cc=s,e}return W(n,t),n.prototype.init=function(){this.Nf()},n.prototype.onStart=function(t){t?this.Tf():this.Of()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.kf(t):this.$.overridePath(t)},n.prototype.Of=function(){this.Cc.setPageViewType(je.Natural),this.Wn.emitBeforeNaturalPageView(),this.Rf.send(),this.Wn.emitAfterNaturalPageView()},n.prototype.Tf=function(){this.Cc.setPageViewType(je.Renewal),this.Wn.emitBeforeNaturalPageView(),this.Rf.send(),this.Wn.emitAfterNaturalPageView()},n.prototype.kf=function(t){this.Cc.setPageViewType(je.Artificial),this.Wn.emitArtificialPageViewEnd(),t&&this.$.overridePath(t),this.Wn.emitBeforeArtificialPageView(),this.Rf.send(),this.Wn.emitAfterArtificialPageView()},n.prototype.Nf=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.kf()}))},n}(wi),Wu=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ju(){return{la:Wu}}var Yu,Xu,Ku=function(){function t(t){this.yc=t,this.Cf=[],this.If=!1}return t.prototype.getRequestParameters=function(){return{dr:this._f()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.yc.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Cf,n)},t.prototype.enableRemoveQueryString=function(){this.If=!0},t.prototype.disableRemoveQueryString=function(){this.If=!1},t.prototype._f=function(){var t=this.If?this.yc.removeQueryString(this.Pf()):this.Pf();return this.yc.anonymizeUrl(t,this.Cf)},t.prototype.Pf=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),$u=function(){function t(t){this.J=t,this.xf=this.Lf()&&"currentScript"in document}return t.prototype.Mf=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.Df(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.Df=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.xf||1!==this._c())return{};var t=this.Mf();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype._c=function(){var t;return(null===(t=this.J.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.Lf=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Zu=["trackPageview"],Qu=["setPath"],to=["setQuery"],no=["referrer:maskUrl"],io=["referrer:removeQueryString"],ro=["referrer:keepQueryString"],so=function(){function t(t,n,i,r,s,e,u,o,h,c,a){this.L=t,this.ac=n,this.Wn=i,this.W=r,this.J=s,this.Ro=e,this.rn=u,this.yc=o,this.$=h,this.lc=c,this.Cc=a}return t.prototype.init=function(){var t=this,r=new at(this.L.getTrackerUri(),"pageview");this.Uf=new Gu(this.Wn,r,this.$,this.Cc);var s=new Ku(this.yc);this.Uf.init(),r.setRequestParametersProviders(this.L,this.W,this.J,Li,s,this.$,this.Ro,i,this.rn,n,this.Cc,new $u(this.J),this.lc),this.ac.register(Zu,(function(n){return t.Uf.triggerArtificialPageView(n)})),this.ac.register(Qu,(function(n){return t.$.overridePath(n)})),this.ac.register(to,(function(n){return t.$.overrideQuery(n)})),this.ac.register(no,(function(t){return s.addUrlMaskingPattern(t)})),this.ac.register(io,(function(){return s.enableRemoveQueryString()})),this.ac.register(ro,(function(){return s.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Uf.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Uf.stop()},t}(),eo=function(){function t(t){this.ca=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.ca.hasValidEventTarget(r)&&i.jf(r,t)&&n(r)}},t.prototype.jf=function(t,n){var i=Xn(t);return I.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!I},t}(),uo=function(){function t(){}return t.prototype.onLoad=function(t){this.Xt=t},t.prototype.onLoadCallbackExecute=function(){this.Xt()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Hf(t)},t.prototype.Hf=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},Y([ln("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),oo=function(){function t(t,n,i){this.L=t,this.W=n,this.J=i}return t.prototype.getSessionData=function(){var t=this.L.projectId,n=this.W.getVisitor();null==n&&on.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,s=i.visitsCount,e=this.J.getSession();return null===e&&on.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:s,pageNumber:(null!=e?e:{}).pageNumber}},t}(),ho=["clearSession"],co=["extendSession"],ao=["getSessionData"],fo=["session:start:newVisitor"],vo=["session:clear:visitor"],lo=function(){function t(t,n,i,r){this.L=t,this.W=n,this.J=i,this.ac=r}return t.prototype.init=function(){var t=this;this.qf=new oo(this.L,this.W,this.J),this.ac.register(ho,(function(){return t.J.removeSession()})),this.ac.register(co,(function(){return t.J.extendSessionPeriodically()}),{disableApplyPending:!0}),this.ac.register(ao,(function(){return t.qf.getSessionData()}),{disableApplyPending:!0}),this.ac.register(fo,(function(){return t.W.renewVitor()})),this.ac.register(vo,(function(){t.W.resetVisitor()}),{disableApplyImmediate:!0})},t.prototype.onBeforeNaturalPageView=function(){this.W.createOrUpdateVisitor(),this.J.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.J.abortQuotaServiceRequest(),this.W.createOrUpdateVisitor(),this.J.createOrUpdateSession()},t.prototype.onOptout=function(){this.W.removeVisitor(),this.J.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.J.updateRecordingState(t,n)},t}(),wo=function(){function t(t,n){this.J=t,this.W=n,this.zf=!1}return t.prototype.onSessionExpired=function(t){this.Vf=t},t.prototype.isSessionValid=function(){if(this.zf)return!0;var t=this.J.hasValidSession(),n=!1;return this.J.pollCacheRefreshEvent()&&(n=this.W.isSessionRenewed()),t&&!n||!this.Bf()?t:(this.Ff=St(),this.zf=!0,this.Vf(),this.zf=!1,this.J.hasValidSession())},t.prototype.isCurrentPageviewValid=function(){var t=this.J.hasValidSession();return this.J.pollCacheRefreshEvent(!1)?!this.W.isSessionRenewed():t},t.prototype.startNewSession=function(){this.Vf()},t.prototype.Bf=function(){return!It(this.Ff)||St()-this.Ff>6e4},t}();function yo(t){return t.tagDeploymentMode===Yu.DualCollectionReview||t.tagDeploymentMode===Yu.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}(Yu||(Yu={})),function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(Xu||(Xu={}));var po,mo="@user-identifier@",go=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.L=n,u.Gf=i,u.cc=r,u.Wf=s,u.Jf=e,u.Yf=[],u.Lr=[],u}return W(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Yf,(function(n){return t.trackPageEvent(n)})),this.Yf=[],csArray.prototype.forEach.call(this.Lr,(function(n){return t.trackEventTriggerRecording(n)})),this.Lr=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Xf(t)&&(this.Kf(t)?this.Jf.isSupported()&&this.$f(t):this.Zf(t)):csArray.prototype.push.call(this.Yf,t)},n.prototype.Kf=function(t){return tt(t,mo)},n.prototype.$f=function(t){return X(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return this.L.customHashIdEnabled?(n=csString.prototype.slice.call(t,17),this.Jf.isValidInput(n)?[4,this.Jf.digest(n,this.L.projectId)]:(on.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.Qf={eventName:i,isETR:!1,isCustomHashId:!0},this.tv()):on.warn("Page event: unable to compute customHashId"),this.L.encryptionEnabled?(this.Wf.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.Zf=function(t){this.Wf.emitPageEvent(t),this.Qf={eventName:t,isETR:!1,isCustomHashId:!1},this.tv(),this.L.tagDeploymentMode===Yu.LoadClicktalePtc&&Xu.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Xf(t)&&(this.L.malkaEtrEnabled?this.nv(t):this.iv(t)):csArray.prototype.push.call(this.Lr,t)},n.prototype.nv=function(t){tt(t,"@ETP@")?this.Wf.emitEventTriggerRecording(t,ci.ETR_PAGE):this.Wf.emitEventTriggerRecording(t,ci.ETR_SESSION),this.Qf={eventName:t,isETR:!0,isCustomHashId:!1},this.tv()},n.prototype.iv=function(t){(function(t){return yo(t)||t.tagDeploymentMode===Yu.LoadClicktalePtc})(this.L)&&(this.Wf.emitEventTriggerRecording(t,ci.ETR_LEGACY),this.Qf={eventName:t,isETR:!0,isCustomHashId:!1},this.tv(),this.L.tagDeploymentMode===Yu.LoadClicktalePtc&&Xu.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.cc.compressSync(this.Qf.eventName,"base64"),ct:this.cc.algorithm,isETR:"".concat(this.Qf.isETR),isCustomHashId:"".concat(this.Qf.isCustomHashId)}},n.prototype.tv=function(){this.Gf.send()},n.Xf=function(t){return kt(t)&&!!csString.prototype.trim.call(t)},n}(wi),Ao=["trackPageEvent"],So=["trackEventTriggerRecording"],Eo=function(){function t(t,n,i,r,s){this.L=t,this.ac=n,this.cc=i,this.Th=r,this.Wf=s}return t.prototype.init=function(){var t=this,n=new at(this.L.getTrackerUri(),"pageEvent"),i=new us(window.crypto);i.init(),this.rv=new go(this.L,n,this.cc,this.Wf,i),n.setRequestParametersProviders(this.rv,this.Th),this.ac.register(Ao,(function(n){t.rv.trackPageEvent(n)})),this.ac.register(So,(function(n){t.rv.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.rv.start()},t}(),bo=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}();!function(t){t.ellipsis="…",t.truncateStringWithEllipsis=function(n,i){return n.length<=i?n:csString.prototype.slice.call(n,0,i-t.ellipsis.length)+t.ellipsis}}(po||(po={}));var Ro=function(t){function n(){var n=t.call(this)||this;return n.sv=!1,n.ev={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return W(n,t),n.prototype.onStartTracking=function(){Cn(this.ev,this.sv)},n.prototype.onStopTracking=function(){In(this.ev,this.sv)},n.prototype.errorListener=function(t){var n=this.uv(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.ov=function(t){return t=null!=t?t:"[NO ERROR MESSAGE]",po.truncateStringWithEllipsis(t,n.hv)},n.prototype.uv=function(t){return{errorType:"jsError",message:this.ov(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="…",n.hv=1024,Y([ln("Event handler type: error")],n.prototype,"errorListener",null),n}(bo),No=document.createElement("div");function To(t){if(!(!!t&&kt(t)))return on.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return I.call(No,t),!0}catch(n){return on.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var Oo,ko=["#c1_card_info_id"];!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(Oo||(Oo={}));var Co,Io=function(){function t(t){var n;this.L=t,this.cv=["value","checked","src","data","alt"],this.av=$(["[data-cs-mask]","script"],ko,!0),this.fv=[{selector:"input:not([type=button]):not([type=submit])",attrName:"value"}],this.vv={PIISelectors:$([".ctHidden, textarea","#c1_card_info_id"],ko,!0),Attributes:[{selector:".ctHidden, input:not([type=button]):not([type=submit])",attrName:"value"}]},this.lv=[],this.wv="",this.yv=function(){},this.pv=this.mv(t),yo(this.L)||(this.pv||csArray.prototype.push.call(this.av,"img[src^='data:']"),this.wv=this.gv(this.wv,this.av),(n=csArray.prototype.push).call.apply(n,$([this.lv],this.fv,!1))),this.Av=this.Sv()}return t.prototype.mv=function(t){return t.useStaticResourceManager&&Boolean(window.crypto&&window.crypto.subtle&&self.TextEncoder&&csArray.from)},t.prototype.Sv=function(){var t=this;if(window.ResizeObserver)return new ResizeObserver((function(n){csArray.prototype.forEach.call(n,(function(n){t.yv(n)}))}))},t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return To(t)}));this.wv=this.gv(this.wv,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&To(t.selector)&&!i.Ev(t)&&csArray.prototype.push.call(i.lv,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.wv],Attributes:this.lv}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.wv=this.gv(this.wv,this.vv.PIISelectors),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return To(t)}));this.wv=this.gv(this.wv,s),(t=csArray.prototype.push).call.apply(t,$([this.lv],this.vv.Attributes,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&To(t.rule)&&csArray.prototype.push.call(r.lv,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(this.cv,n)||this.bv(t,n,this.lv)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===Oo.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===Oo.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(f(t)||E(t)){this.Rv(t);var i=xi.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.Rv(csElementshadowRoot.apply(t))}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(f(t)||E(t)){this.Nv(t);var i=xi.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.Nv(csElementshadowRoot.apply(t))}))}},t.prototype.onSensitiveElementResize=function(t){this.yv=t},t.prototype.disconnectResizeObserver=function(){var t;null===(t=this.Av)||void 0===t||t.disconnect()},t.prototype.Nv=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.Rv=function(t){var n=this;if(this.Tv(t))return this.Ov(t),void this.kv(t);this.Cv(t,this.wv)?(this.Iv(t),this.kv(t)):si(window.csquerySelectorAll[t.nodeType].call(t,this.wv),(function(t){n._v(t)||(n.Iv(t),n.kv(t))}))},t.prototype._v=function(t){return!this.pv&&p(t)&&(tt(t.src,"data:image/svg+xml")||tt(t.src,"data:image/png"))&&t.src.length<=1024},t.prototype.Iv=function(t){t.__contentsquare_sensitive=Oo.Sensitive,this.Pv(t)},t.prototype.Pv=function(t){this.Av&&f(t)&&!A(t)&&this.Av.observe(t)},t.prototype.Ov=function(t){t.__contentsquare_sensitive=Oo.SensitiveChild},t.prototype.kv=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.Ov(i),i=n.nextNode()},t.prototype.Tv=function(t){return!(!csNodeparentNode.apply(t)||!f(csNodeparentNode.apply(t))&&!E(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||R(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.Cv=function(t,n){return f(t)&&I.call(t,n)},t.prototype.bv=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&I.call(t,i.selector)}))},t.prototype.gv=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=csString.prototype.split.call(t,","),r=0,s=n;r<s.length;r++)for(var e=s[r],u=0,o=csString.prototype.split.call(e,",");u<o.length;u++){var h=o[u];-1===csArray.prototype.indexOf.call(i,h)&&csArray.prototype.push.call(i,h)}return csArray.prototype.join.call(i,",")},t.prototype.Ev=function(t){return csArray.prototype.some.call(this.lv,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),_o=function(){function t(t){this.ac=t}return t.prototype.init=function(){this.xv(t.Lv,Ht),this.xv(t.Mv,jt)},t.prototype.xv=function(t,n){this.ac.register([t],(function(t,i){kt(t)&&(kt(i)||Lt(i))&&on.error(i,"".concat(n).concat(t))}))},t.Mv="logSnippetError",t.Lv="logImplementationSnippetError",t}(),Po=function(){function t(t,n,i,r){this.L=t,this.Fc=n,this.hc=i,this.Gc=r}return t.prototype.init=function(){var t=this;this.Fc.onChildMessage((function(n,i,r){return t.Gc.emitIframeEvent(n,i,r)})),this.Fc.setRecordingStatusCallback((function(){return t.hc.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.L.iframesTracking&&this.Fc.start()},t.prototype.onOptout=function(){this.L.iframesTracking&&this.Fc.stop()},t.prototype.onRecordingStatusChange=function(){this.L.iframesTracking&&this.Fc.onRecordingStatusChange(this.hc.getRecordingStatus())},t}(),xo=function(t){function n(n,i){var r=t.call(this)||this;return r.L=n,r.cn=i,r.Dv=0,r.Uv=new Map,r.jv={boundElement:window,type:"message",listener:function(t){return r.Hv(t)}},r}return W(n,t),n.prototype.onChildMessage=function(t){this.qv=t},n.prototype.setRecordingStatusCallback=function(t){this.zv=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=nn.buildBaseMessage(tn.RecordingStatus,Qt.Parent,this.L.projectId);i.content=t,this.Uv.forEach((function(t){!n.Vv(t)&&t.port&&nn.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=nn.buildBaseMessage(t,Qt.Parent,this.L.projectId);i.content=n,this.Bv(i)},n.prototype.onStart=function(){Cn(this.jv,!1),this.Fv()},n.prototype.onStop=function(){this.Gv(),In(this.jv,!1),this.Wv()},n.prototype.Fv=function(){var t=this,n=this.Jv();this.Yv(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.Xv(n)){var i={iframe:n};t.Uv.set(t.Dv,i),t.Dv+=1}})),this.Kv()},n.prototype.Jv=function(){var t=this;return csArray.prototype.filter.call(qi.findAllElements("iframe"),(function(n){return t.$v(n)}))},n.prototype.Yv=function(t){var n=this;this.Uv.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Zv(r,i)}))},n.prototype.Zv=function(t,n){n.port&&nn.closeChannelPort(n.port),this.Uv.delete(t)},n.prototype.Wv=function(){this.Uv.forEach((function(t){t.port&&nn.closeChannelPort(t.port)})),this.Uv.clear()},n.prototype.Xv=function(t){var n=null;return this.Uv.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.$v=function(t){return t.id!==r&&(!t.src||Xt(Yt(t.src),this.L.hostnames))},n.prototype.Bv=function(t){this.Uv.forEach((function(n){n.port&&nn.sendChannelMessage(n.port,t)}))},n.prototype.Kv=function(){var t=this;this.Uv.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Qv(i);nn.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Gv=function(){var t=this.tl();this.Uv.forEach((function(n){n.port?nn.sendChannelMessage(n.port,t):n.iframe.contentWindow&&nn.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Qv=function(t){return nn.buildBaseMessage(tn.Discovery,Qt.Parent,this.L.projectId,t)},n.prototype.tl=function(){return nn.buildBaseMessage(tn.Stop,Qt.Parent,this.L.projectId)},n.prototype.nl=function(t,n){var i=this,r=this.Uv.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.il(t,r)}):on.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Dv,")"))},n.prototype.rl=function(t){if(t.port){var n=nn.buildBaseMessage(tn.RecordingStatus,Qt.Parent,this.L.projectId),i=this.zv();this.Vv(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,nn.sendChannelMessage(t.port,n)}},n.prototype.il=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===tn.EndOfBufferedMessages?this.rl(n):this.qv(n.iframe,i,r)}else on.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.Hv=function(t){if(nn.isMessageValid(t,Qt.Child,this.L.projectId,this.L.hostnames))switch(t.data.type){case tn.Discovery:if(void 0===t.data.id)return void this.Fv();if(t.ports&&1===t.ports.length&&this.Uv.has(t.data.id))return void this.nl(t.data.id,t.ports[0]);on.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case tn.ChildLogMessage:this.qv(null,tn.ChildLogMessage,t.data.content);break;default:on.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Vv=function(t){return this.cn.isSensitive(t.iframe)||this.cn.isSensitiveChild(t.iframe)},n}(wi),Lo=function(t){function n(n,i){var r=t.call(this)||this;return r.sl=n,r.el=i,r.ul=[],r}return W(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,n,i)},n.prototype.init=function(){var t=this;this.sl.onEvent((function(n){return t.ol(n)})),this.el.onEvent((function(n){return t.ol(n)}))},n.prototype.onStartTracking=function(){this.sl.start(),this.el.start()},n.prototype.onStopTracking=function(){this.sl.stop(),this.el.stop()},n.prototype.ol=function(t){if(t.url&&t.statusCode){if(this.hl(t.url))return;if(t.statusCode>=400||t.isConfigurableApiError)for(var n in this.subscriptions){var i=this.subscriptions[n];if(i.hasOwnProperty("detailedEvent"))i(this.cl(t));else i(this.al(t))}}},n.prototype.al=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library,matchingBodyContent:t.matchingBodyContent}},n.prototype.cl=function(t){var n=this.al(t);return Object.keys(t.standardRequestHeaders).length>0&&(n.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(n.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(n.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(n.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(n.queryParameters=t.queryParameters),t.requestBody&&(n.requestBody=t.requestBody),t.responseBody&&(n.responseBody=t.responseBody),Object.keys(t.plainCustomRequestHeaders).length>0&&(n.plainCustomRequestHeaders=t.plainCustomRequestHeaders),Object.keys(t.plainCustomResponseHeaders).length>0&&(n.plainCustomResponseHeaders=t.plainCustomResponseHeaders),n},n.prototype.hl=function(t){return csArray.prototype.some.call(this.ul,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n.prototype.excludeDomains=function(t){var n;(n=csArray.prototype.push).call.apply(n,$([this.ul],t,!1))},n.truncatedErrorMessageMarker="…",n}(bo),Mo=function(){function t(t){this.yc=t,this.Cf=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.yc.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Cf,n)},t.prototype.getUrlMaskingPatterns=function(){return this.Cf},t.prototype.anonymize=function(t){var n=this.yc.removeQueryString(t.url);return J(J({},t),{url:this.yc.anonymizeUrl(n,this.Cf),library:t.library?this.yc.anonymizeUrl(t.library,this.Cf):void 0})},t}(),Do=function(){function t(t,n){this.M=t,this.$=n}return t.prototype.anonymize=function(t){return kt(t.message)&&(t.message=this.vl(t.message),t.message=this.M.anonymizePII(t.message)),kt(t.filename)&&(t.filename=this.$.computeOverriddenUrl(t.filename)),t},t.prototype.vl=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),Uo=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.ll(n.x)-this.ll(t.x),r=this.ll(n.y)-this.ll(t.y),s=n.time-t.time;return{duration:s,distance:this.dl(i,r),direction:this.wl(i,r),velocity:this.yl(i,r,s)}},t.prototype.computePinchMetrics=function(t,n){var i=this.ll(n.x)-this.ll(t.x),r=this.ll(n.y)-this.ll(t.y);return{duration:n.time-t.time,distance:this.dl(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.ll=function(t){return t/window.devicePixelRatio},t.prototype.dl=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.yl=function(t,n,i){var r=i/1e3,s=t/r,e=n/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.wl=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?es.RIGHT:es.LEFT:n>0?es.DOWN:es.UP},t}(),jo=function(){function t(){this.pl={},this.ml=new Uo,this.gl()}return t.prototype.onGesture=function(t){this.Al=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.Sl(t)){this.El(t)&&this.gl();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:St()};if(1===t.touches.length)this.pl.startPinchTime=n.time,this.pl.firstTouch=n;else if(2===t.touches.length&&(this.pl.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:St()},this.pl.firstTouch&&this.pl.secondTouch)){var i=this.ml.computePinchMetrics(this.pl.firstTouch,this.pl.secondTouch);this.bl=i.distance}csArray.prototype.push.call(this.Rl,n),this.Nl=Xn(t)}},t.prototype.processActionMove=function(){this.Tl=!0},t.prototype.processActionUp=function(t){if(this.Ol(t)){if(csArray.prototype.push.call(this.Rl,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:St()}),this.kl(t)&&this.pl.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.pl.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:St()};this.pl.firstTouch&&(this.pl.firstTouch=n,this.pl.secondTouch=i),this.Cl(t)}this.bl||this.Il()&&this._l(t)}},t.prototype.gl=function(){this.Rl=[],this.Nl=null,this.Tl=!1,this.bl=null,this.Pl=!0},t.prototype._l=function(t){var n=this.ml.compute(this.Rl[0],this.Rl[1]);this.Pl=t.isTrusted;var i=this.Tl?this.xl(n):this.Ll(n);this.Al(i,t)},t.prototype.Cl=function(t){if(this.pl.firstTouch&&this.pl.secondTouch){var n=this.ml.computePinchMetrics(this.pl.firstTouch,this.pl.secondTouch);this.Pl=t.isTrusted;var i=this.Ml(n);i&&this.Al(i,t)}},t.prototype.Ml=function(t){if(this.bl&&!(this.ml.getScale(this.bl,t.distance)<.1))return{type:this.bl>t.distance?ss.PINCH_IN:ss.PINCH_OUT,target:this.Nl,distance:t.distance,isTrusted:this.Pl}},t.prototype.xl=function(t){return{type:t.velocity<100?ss.DRAG:ss.FLICK,target:this.Nl,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Pl}},t.prototype.Ll=function(t){return{type:t.duration<1e3?ss.TAP:ss.LONG_PRESS,target:this.Nl,isTrusted:this.Pl}},t.prototype.El=function(t){return 1===t.touches.length},t.prototype.Il=function(){return 2===this.Rl.length},t.prototype.Sl=function(t){return t.touches.length>0},t.prototype.Ol=function(t){return t.changedTouches.length>0},t.prototype.kl=function(t){return this.Tl&&!!this.bl&&1===t.changedTouches.length&&1===t.touches.length},t}(),Ho=function(t){function n(n){var i=t.call(this)||this;return i.Dl=n,i.Vs=[{boundElement:document,type:"touchstart",listener:function(t){return i.Fr(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Fr(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Fr(t)}}],i.Ul=new jo,i.Ul.onGesture((function(t,n){return i.jl(t,n)})),i}return W(n,t),n.prototype.jl=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,(function(t){return Cn(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,(function(t){return In(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Fr=function(t){var n=this;this.Dl.tryToExecute("process gesture event",(function(){if(n.Ul.isValidTouchEvent(t))switch(t.type){case"touchstart":n.Ul.processActionDown(t);break;case"touchmove":n.Ul.processActionMove();break;case"touchend":n.Ul.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===ss.FLICK||t.type===ss.DRAG},n}(bo),qo=function(t){function n(n,i){var r=t.call(this)||this;return r.ar=n,r.Hl=i,r.ql=0,r}return W(n,t),n.prototype.onStart=function(){var t=this;on.isPerfLoggingActive()&&(this.zl=window.setInterval((function(){return t.Vl()}),n.Bl))},n.prototype.onStop=function(){on.isPerfLoggingActive()&&(this.Vl(),clearInterval(this.zl))},n.prototype.Vl=function(){if(!(zn.isEmpty()||this.ql>=n.Fl)){var t=zn.getAll();this.ql++;var i=J({a:n.Gl,l:n.Wl},this.Hl.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return J(J({},t),i)}));this.ar.send(r),zn.clear()}},n.Gl="uxa",n.Wl="perf",n.Bl=5e3,n.Fl=5,n}(wi),zo=function(){function t(t,n,i){this.L=t,this.Hl=n,this.wc=i}return t.prototype.init=function(){this.Jl=new qo(this.wc.create(this.L.getLoggerUri(),!0),this.Hl)},t.prototype.onStartTracking=function(){this.Jl.start()},t.prototype.onOptout=function(){this.Jl.stop()},t}(),Vo=function(){function t(){this.Yl=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,s,e){this.Yl=!0,this.Fs=t,this.cn=n,this.Gs=i,this.Ac=r,this.J=s,this.an=e},t.prototype.getRecordingStatus=function(){var t,n,i,r;return this.Yl?{isRecording:this.Fs.isRecording(),isMutationTrackerStarted:this.Fs.isMutationTrackerStarted(),PIISelectors:this.cn.getPIISelectors(),capturedElementSelector:this.Ac.getWhitelistedElementsSelector(),useAnonymization:this.Gs.shouldUseAnonymization(),encryptionSelectors:null===(t=this.an)||void 0===t?void 0:t.getEncryptionSelectors(),activateOnlineAssetsOnNextStart:null===(n=this.Fs.getStaticResourceManagerStatus())||void 0===n?void 0:n.onlineAssets.enabledForChildrenOnNextStart,recordingStartTimestamp:parseInt(this.Fs.getRecordingStartTimestamp(),10),etrState:null!==(r=null===(i=this.J.getSession())||void 0===i?void 0:i.etrState)&&void 0!==r?r:hi.ETR_OFF}:{isRecording:!1,recordingStartTimestamp:0,etrState:hi.ETR_OFF}},t}(),Bo=function(){function t(t,n,i){var r=this;this.L=t,this.Xl=n,this.Kl=i,this.Ni=!1,this.$l=null,this.Zl=[],this.Ql=function(t){var n=t.result,i=t.args,s=t.callerName;r.interceptFetch(n,i,s)}}return t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Zl,t)},t.prototype.start=function(){this.Ni||this.td()&&(this.nd(),this.$l&&this.$l.activate(),this.Ni=!0)},t.prototype.stop=function(){this.Ni&&(this.$l&&this.$l.deactivate(),this.Ni=!1)},t.prototype.td=function(){return!!window.fetch&&"function"==typeof window.fetch},t.prototype.rd=function(t){if(t[0]&&"function"==typeof t[0].clone){var n=ni(t);return n[0]=t[0].clone(),n}return t},t.prototype.nd=function(){this.$l||(this.$l=Ui({target:window,methodName:"fetch",hook:this.Ql,hookPrepareArgs:this.rd,options:{withCallerName:!0}}))},t.prototype.sd=function(t,n,i){return X(this,void 0,void 0,(function(){var r,s,e,u,o,h,c,a,f;return K(this,(function(v){switch(v.label){case 0:return r=csString.prototype.split.call(n.url,"?"),s=r[0],e=r[1],u=Wt(s),o=J(J({},t),{url:u,method:n.method,responseTime:St(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}}),this.L.isHeaderCollectionActive()&&(h=this.Xl.extractAllHeaders(n.headers),c=this.Xl.extractAllHeaders(i.headers),this.L.apiErrors.collectStandardHeaders&&(o.standardRequestHeaders=h.standardHeaders,o.standardResponseHeaders=c.standardHeaders),o.customRequestHeaders=h.validCustomHeaders,o.customResponseHeaders=c.validCustomHeaders,o.plainCustomRequestHeaders=h.plainCustomHeaders,o.plainCustomResponseHeaders=c.plainCustomHeaders),this.Xl.isValidUrl(s,this.L.apiErrors.validUrls)?(this.L.apiErrors.collectQueryParam&&e&&(o.queryParameters=e),this.L.apiErrors.collectResponseBody&&this.Xl.isValidBodyType(o.standardResponseHeaders)?(a=o,[4,this.Xl.getResponseBody(i)]):[3,2]):[3,4];case 1:a.responseBody=v.sent(),v.label=2;case 2:return this.L.apiErrors.collectRequestBody&&this.Xl.isValidBodyType(o.standardRequestHeaders)?(f=o,[4,n.text()]):[3,4];case 3:f.requestBody=v.sent(),v.label=4;case 4:return csArray.prototype.forEach.call(this.Zl,(function(t){return t(o)})),[2]}}))}))},t.prototype.interceptFetch=function(t,n,i){return X(this,void 0,void 0,(function(){var r,s,e,u,o,h,c,a,f;return K(this,(function(v){switch(v.label){case 0:if(r=n[0],s=n[1],!kt((e=new Request(r,s)).url))return[2];u=St(),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,t];case 2:return o=v.sent(),[3,4];case 3:if(h=v.sent(),this.ud(h)||this.od(h)||this.ad(h))return[2];throw h;case 4:return c=o.status,a={statusCode:c,library:i,requestTime:u},c>=400?[4,this.sd(J(J({},a),{isConfigurableApiError:!1}),e,o)]:[3,6];case 5:return v.sent(),[3,9];case 6:return[3,9];case 7:return(f=v.sent()).isMatching?[4,this.sd(J(J({},a),{isConfigurableApiError:!0,matchingBodyContent:f.matchingBodyContent}),e,o)]:[3,9];case 8:v.sent(),v.label=9;case 9:return[2]}}))}))},t.prototype.ud=function(t){return t instanceof TypeError},t.prototype.od=function(t){return t instanceof DOMException&&"AbortError"===t.name},t.prototype.ad=function(n){return n instanceof DOMException&&csArray.prototype.some.call(t.vd,(function(t){return t===n.name}))},t.vd=["NoModificationAllowedError","InvalidStateError","OperationError"],Y([ln("FetchRequestTracker.interceptFetch")],t.prototype,"interceptFetch",null),t}(),Fo=function(){function t(){this.ld=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.dd=function(t,n){for(var i=0,r=Object.keys(n);i<r.length;i++){var s=r[i];if(csString.prototype.toLowerCase.call(s)===t)return n[s]}return""},t.prototype.isValidBodyType=function(t){var n=this.dd("content-type",t);if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return csArray.prototype.some.call(this.ld,(function(t){return tt(i,t)}))},t.prototype.getResponseBodySize=function(t){var n=parseInt(this.dd("content-length",t),10);return isNaN(n)?null:n},t}(),Go=function(t){function n(n){var i=t.call(this)||this;return i.wd=n,i}return W(n,t),n.prototype.extractAllHeaders=function(t){var n=this,i={},r={},s={};return t.forEach((function(t,e){n.wd.isValidStandardHeader(e)&&t?i[e]=csString.prototype.trim.call(t):n.wd.isValidCustomHeader(e)&&t?r[e]=csString.prototype.trim.call(t):n.wd.isPlainCustomHeader(e)&&t&&(s[e]=csString.prototype.trim.call(t))})),{standardHeaders:i,validCustomHeaders:r,plainCustomHeaders:s}},n.prototype.extractHeadersByName=function(t,n){var i={};return n.headers.forEach((function(n,r){-1!==csArray.prototype.indexOf.call(t,csString.prototype.toLowerCase.call(r))&&n&&(i[r]=csString.prototype.trim.call(n))})),i},n.prototype.getResponseBody=function(t){return X(this,void 0,void 0,(function(){return K(this,(function(n){return t.bodyUsed?[2,Promise.resolve(void 0)]:[2,t.clone().text()]}))}))},n}(Fo),Wo=function(){function t(t,n,i){var r=this;this.L=t,this.yd=n,this.Kl=i,this.Ni=!1,this.pd=null,this.md=null,this.gd=null,this.Zl=[],this.Ad=function(t){var n=t.context,i=t.args,s=t.callerName;return r.interceptOpen(n,i,s)},this.Sd=function(t){var n=t.context,i=t.args;return r.interceptSetRequestHeader(n,i)},this.Ed=function(t){var n=t.context,i=t.args;return r.interceptSend(n,i)}}return t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Zl,t)},t.prototype.start=function(){this.Ni||(this.bd(),this.pd&&this.pd.activate(),this.md&&this.md.activate(),this.gd&&this.gd.activate(),this.Ni=!0)},t.prototype.stop=function(){this.Ni&&(this.pd&&this.pd.deactivate(),this.md&&this.md.deactivate(),this.Ni=!1)},t.prototype.bd=function(){this.pd||(this.pd=Ui({target:XMLHttpRequest.prototype,methodName:"open",hook:this.Ad,options:{withCallerName:!0}})),this.md||(this.md=Ui({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.Sd})),this.gd||(this.gd=Ui({target:XMLHttpRequest.prototype,methodName:"send",hook:this.Ed}))},t.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&kt(n[1])){var s=csString.prototype.split.call(n[1],"?"),e=s[0],u=s[1],o=Wt(e);t.apiCall={url:o,method:n[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:St(),responseTime:0,statusCode:0,library:i,isConfigurableApiError:!1,plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},u&&this.yd.isValidUrl(o,this.L.apiErrors.validUrls)&&this.L.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},t.prototype.sd=function(t){if(t.apiCall.responseTime=St(),t.apiCall.statusCode=t.status,this.L.isHeaderCollectionActive()){var n=this.yd.extractAllHeaders(t.getAllResponseHeaders());this.L.apiErrors.collectStandardHeaders&&(t.apiCall.standardResponseHeaders=n.standardHeaders),t.apiCall.customResponseHeaders=n.validCustomHeaders,t.apiCall.plainCustomResponseHeaders=n.plainCustomHeaders}this.yd.isValidUrl(t.apiCall.url,this.L.apiErrors.validUrls)&&this.L.apiErrors.collectResponseBody&&this.yd.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.Zl,(function(n){return n(t.apiCall)}))},t.prototype.readyStateChangeListener=function(t){t.apiCall&&t.readyState===XMLHttpRequest.DONE&&(t.status>=400&&this.sd(t))},t.prototype.interceptSetRequestHeader=function(t,n){if(t.apiCall&&this.L.isHeaderCollectionActive()){var i=n[0],r=n[1];this.L.apiErrors.collectStandardHeaders&&this.yd.isValidStandardHeader(i)&&r?t.apiCall.standardRequestHeaders[i]=r.trim():this.yd.isValidCustomHeader(i)&&r?t.apiCall.customRequestHeaders[i]=r.trim():this.yd.isPlainCustomHeader(i)&&r&&(t.apiCall.plainCustomRequestHeaders[i]=r.trim())}},t.prototype.interceptSend=function(t,n){var i=n[0];t.apiCall&&this.yd.isValidUrl(t.apiCall.url,this.L.apiErrors.validUrls)&&this.L.apiErrors.collectRequestBody&&this.yd.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof i&&(t.apiCall.requestBody=i)},Y([ln("XhrRequestTracker.interceptOpen")],t.prototype,"interceptOpen",null),Y([ln("XhrRequestTracker.readyStateChangeListener")],t.prototype,"readyStateChangeListener",null),Y([ln("XhrRequestTracker.interceptSetRequestHeader")],t.prototype,"interceptSetRequestHeader",null),Y([ln("XhrRequestTracker.interceptSend")],t.prototype,"interceptSend",null),t}(),Jo=function(t){function n(n){var i=t.call(this)||this;return i.wd=n,i}return W(n,t),n.prototype.extractAllHeaders=function(t){var n=this,i={},r={},s={};return csArray.prototype.forEach.call(null==t?void 0:csString.prototype.split.call(t,/[\r\n]+/),(function(t){var e=csString.prototype.split.call(t,/:(.*)/),u=e[0],o=e[1];n.wd.isValidStandardHeader(u)&&o?i[u]=csString.prototype.trim.call(o):n.wd.isValidCustomHeader(u)&&o?r[u]=csString.prototype.trim.call(o):n.wd.isPlainCustomHeader(u)&&o&&(s[u]=csString.prototype.trim.call(o))})),{standardHeaders:i,validCustomHeaders:r,plainCustomHeaders:s}},n.prototype.extractHeadersByName=function(t,n){var i={};return csArray.prototype.forEach.call(null==n.getAllResponseHeaders()?void 0:csString.prototype.split.call(n.getAllResponseHeaders(),/[\r\n]+/),(function(n){var r=csString.prototype.split.call(n,/:(.*)/),s=r[0],e=r[1];-1!==csArray.prototype.indexOf.call(t,csString.prototype.toLowerCase.call(s))&&e&&(i[s]=csString.prototype.trim.call(e))})),i},n.prototype.getResponseBody=function(t){return t.responseText},n.prototype.isValidStandardHeader=function(t){return this.wd.isValidStandardHeader(t)},n.prototype.isValidCustomHeader=function(t){return this.wd.isValidCustomHeader(t)},n.prototype.isPlainCustomHeader=function(t){return this.wd.isPlainCustomHeader(t)},n}(Fo),Yo=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.hr=n,e.Rd=i,e.Rh=r,e.cr=s,e.Nd=[],e.pr=0,e}return W(n,t),n.prototype.init=function(){this.hr.init()},n.prototype.initStates=function(){this.Td(),this.Nd=[],this.pr=0,this.ff()},n.prototype.ff=function(){this.wf=St()},n.prototype.lf=function(){return St()-this.wf},n.prototype.onStart=function(){var t=this;this.hr.subscribe(n.Wr,(function(n){return t.Fr(n)}))},n.prototype.onStop=function(){this.hr.unsubscribe(n.Wr)},n.prototype.onIframeApiError=function(t){this.Fr(t)},n.prototype.Fr=function(t){this.isStarted&&this.pr<n.Od&&(t.relativeTime=this.lf(),csArray.prototype.push.call(this.Nd,this.cr.anonymize(t)),this.kd())},n.prototype.Td=function(){this.Rd.removeQueryParams(),this.Rd.setQueryParams(this.Rh.getRequestParameters())},n.prototype.kd=function(){this.Rd.send({errors:this.Nd}),this.Nd=[],this.pr+=1},n.Wr="ApiErrorsService",n.Od=20,n}(wi),Xo=["api-errors:maskUrl"];!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(Co||(Co={}));var Ko,$o=function(){function t(t,n,i,r,s,e,u){this.hr=t,this.cr=n,this.L=i,this.Rh=r,this.Gc=s,this.ac=e,this.wc=u}return t.prototype.init=function(){var t=this.wc.create("".concat(this.L.getTrackerUri(),"/").concat("api-errors"),!0);this.hr.excludeDomains([Co.CONTENTSQUARE,Co.CLICKTALE]),this.hr.excludeDomains([Co.FAKE_TRACKER]),this.Cd=new Yo(this.hr,t,this.Rh,this.cr),this.Cd.init(),this.Gc.addListener(this.Cd),this.Id()},t.prototype.Id=function(){var t=this;this.ac.register(Xo,(function(n){return t.cr.addUrlMaskingPattern(n)}))},t.prototype.onStartTracking=function(){this.Cd.start()},t.prototype.onAfterNaturalPageView=function(){this.Cd.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Cd.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Cd.stop()},t.prototype.onOptout=function(){this.Cd.stop()},t}(),Zo=function(){function t(t){this.L=t,this._d=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this._d,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){return this.Pd(t,this.L.apiErrors.validCustomHeaders)},t.prototype.isPlainCustomHeader=function(t){return this.Pd(t,this.L.apiErrors.plainCustomHeaders)},t.prototype.Pd=function(t,n){if(!n||0===n.length)return!1;var i=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(n,(function(t){return csString.prototype.toLowerCase.call(t)===i}))},t}(),Qo=function(t){function n(n,i,r,s,e,u){var o=t.call(this)||this;return o.er=n,o.xd=i,o.Rh=r,o.ur=s,o.fc=e,o.$=u,o.Ld=[],o.yr=0,o.Md=[],o}return W(n,t),n.prototype.initStates=function(){this.wf=St(),this.xd.removeQueryParams(),this.xd.setQueryParams(this.Rh.getRequestParameters()),this.Ld=[],this.yr=0},n.prototype.onStart=function(){var t=this;this.er.subscribe(n.Wr,(function(n){return t.Fr(n)})),this.Dd()},n.prototype.onStop=function(){this.er.unsubscribe(n.Wr)},n.prototype.onIframeJavascriptError=function(t){this.Fr(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.Ud(n)},n.prototype.Ud=function(t){var n=this;this.isStarted?this.Fr(t,(function(t){return n.fc.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.Md,t)},n.prototype.Dd=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.Md,(function(n){return t.Ud(n)})),this.Md=[])},n.prototype.Fr=function(t,n){if(this.isStarted&&this.yr<20){var i=J(J({},t),{pageUrl:this.$.getAnonymizedUrl(),rt:this.lf()});this.ur.anonymize(i),csArray.prototype.push.call(this.Ld,i),this.kd(),n&&n(i)}},n.prototype.lf=function(){return St()-this.wf},n.prototype.kd=function(){this.xd.send({errors:this.Ld}),this.Ld=[],this.yr+=1},n.Wr="JavaScriptErrorsService",n}(wi),th=["trackError"],nh=function(){function t(t,n,i,r,s,e,u,o,h){this.er=t,this.ur=n,this.L=i,this.Rh=r,this.Gc=s,this.ac=e,this.fc=u,this.$=o,this.wc=h}return t.prototype.init=function(){var t=this.wc.create("".concat(this.L.getTrackerUri(),"/").concat("errors"),!0);this.jd=new Qo(this.er,t,this.Rh,this.ur,this.fc,this.$),this.Gc.addListener(this.jd),this.Id()},t.prototype.Id=function(){var t=this;this.L.jsCustomErrorsEnabled&&!this.L.customErrors.enabled&&this.ac.register(th,(function(n){t.jd.trackCustomError(n)}))},t.prototype.onStartTracking=function(){this.jd.start()},t.prototype.onAfterNaturalPageView=function(){this.jd.initStates()},t.prototype.onAfterArtificialPageView=function(){this.jd.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.jd.stop()},t.prototype.onOptout=function(){this.jd.stop()},t}(),ih=function(){function t(){this.Hd=je.Natural}return t.prototype.setPageViewType=function(t){this.Hd=t},t.prototype.getPageViewType=function(){return this.Hd},t.prototype.getRequestParameters=function(){return{pvt:this.Hd}},t}(),rh=function(){function t(t){this.rr=t}return t.prototype.onAfterVisitorRenewal=function(){this.rr.startNewSession()},t}(),sh=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R){var N=this;this.Rh=t,this.cc=n,this.W=i,this.J=r,this.Wn=s,this.ac=e,this.qd=u,this.L=o,this.zd=h,this.Vd=c,this.Bd=a,this.Ro=f,this.M=v,this.Ka=l,this.yc=d,this.$=w,this.Fd=y,this.Wf=p,this.Gc=m,this.rn=g,this.Gd=A,this.lc=S,this.Wd=E,this.ye=b,this.wc=R,this.Jd=function(t){void 0===t&&(t=!1),N.Yd.start(t),N.Xd.start()}}return t.prototype.start=function(){var t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w=this;(this.zd.init(),this.Vd.init(),this.Vd.isActive())||(this.ye.schedule((function(){f=new wo(w.J,w.W),d=new rh(f),a=new eo(w.Ka),l=new Ho(on),t=new Fu(w.L,w.W,w.J,w.Ka,a,w.ac,f,l,w.Gc,w.wc),n=new Se(w.ac,w.J,w.L,w.Rh,w.cc,w.M),v=new Io(w.L),c=new Vo;var y=new xo(w.L,v);(h=new Po(w.L,y,c,w.Gc)).init();var p=new ih;i=new ye(w.W,w.J,w.ac,w.Gc,y,w.L,p,c),r=new Ie(w.L,w.W,w.J,w.ac,w.M,f,w.$),w.Yd=new so(w.L,w.ac,w.Wn,w.W,w.J,w.Ro,w.rn,w.yc,w.$,w.lc,p),s=new lo(w.L,w.W,w.J,w.ac),e=new Eo(w.L,w.ac,w.cc,w.Rh,w.Wf),u=new _o(w.ac),o=new zo(w.L,new Nt(w.L,w.M),w.wc),w.Xd=new uo})),this.L.apiErrors.enabled&&this.ye.schedule((function(){var t,n=new Zo(w.L);var i=new Jo(n),r=new Wo(w.L,i,t),s=new Go(n),e=new Bo(w.L,s,t);w.hr=new Lo(r,e),w.cr=new Mo(w.yc);var u=new $o(w.hr,w.cr,w.L,w.Rh,w.Gc,w.ac,w.wc);u.init(),w.Wn.addListener(u)})),this.L.jsErrorsEnabled&&this.ye.schedule((function(){w.er=new Ro,w.ur=new Do(w.M,w.$);var t=new nh(w.er,w.ur,w.L,w.Rh,w.Gc,w.ac,w.Wf,w.$,w.wc);t.init(),w.Wn.addListener(t)})),this.ye.schedule((function(){w.Bd.init()})),this.ye.schedule((function(){i.init()})),this.ye.schedule((function(){n.init()})),this.ye.schedule((function(){r.init()})),this.ye.schedule((function(){w.Gd.init()})),this.ye.schedule((function(){w.Yd.init()})),this.ye.schedule((function(){s.init()})),this.ye.schedule((function(){e.init()})),this.ye.schedule((function(){w.Fd.init()})),this.ye.schedule((function(){u.init()})),this.ye.schedule((function(){o.init()})),this.ye.schedule((function(){w.Wd.init()})),this.ye.schedule((function(){w.Wn.addListener(s),w.Wn.addListener(w.qd),w.Wn.addListener(t),w.Wn.addListener(w.Bd),w.Wn.addListener(i),w.Wn.addListener(w.Gd),w.Wn.addListener(w.Yd),w.Wn.addListener(e),w.Wn.addListener(n),w.Wn.addListener(h),w.Wn.addListener(o),w.Wn.addListener(d)})),Is.isRecordingSupported()&&this.ye.schedule((function(){var t=new ie(c,w.J,w.L,w.cc,a,w.Ro,w.Rh,w.ac,w.M,f,w.$,v,w.er,w.ur,w.hr,l,w.cr,w.Wn,w.Wf,w.Gc,w.lc,w.ye,w.wc,w.yc);t.init(),w.Wn.addListener(t),i.setRecordingService(t.recordingService)})),this.ye.schedule((function(){t.init()})),this.ye.schedule((function(){f.onSessionExpired((function(){w.Wn.emitBeforeSessionRenewal(),w.Kd(!0),w.Wn.emitAfterSessionRenewal()})),w.Kd()})))},t.prototype.Kd=function(t){var n=this;void 0===t&&(t=!1),this.ac.start(),this.Xd.onLoad((function(){n.Wn.emitStartTracking(t)})),yo(this.L)&&!t||this.Jd(t)},t}(),eh=function(){function t(t,n,i,r,s,e,u,o){this.L=t,this.W=n,this.nn=i,this.$d=r,this.Zd=s,this.Qd=e,this.tw=u,this.nw=o}return t.prototype.compute=function(t){var n,i,r=this;this.L.crossDomainTracking&&!this.L.cookielessTrackingEnabled?this.L.crossDomainSingleIframeTracking?null===(n=this.tw)||void 0===n||n.start((function(){return r.iw(t)})):null===(i=this.Qd)||void 0===i||i.applyUpToDate((function(){return r.iw(t)})):this.iw(t)},t.prototype.iw=function(t){this.Zd.handle(),this.$d.clear(),this.rw()?(this.$d.restoreClearedVisitor(),t(!0)):(this.nn.exclude(this.L),t(!1))},t.prototype.rw=function(){var t=it.boolean(this.L.sampleRate);return this.nw.isForceIncluded()||!this.nn.isExcluded()&&this.W.doesVisitorExist()||!this.nn.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(Ko||(Ko={}));var uh,oh=function(){function t(t,n,i,r){this.L=t,this.ew=n,this.J=i,this.Wn=r,this.uw=1e4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.ow(),this.J.removeSession()),this.hw(t),this.setVisitor(t)},t.prototype.ow=function(){return{id:Ko.generate(),visitsCount:0,appliedTrackingDraw:this.L.lastTrackingDraw,creationTimestamp:Et(),lastVisitTimestamp:0,hitTimestamp:0,expires:St()+this.L.visitorCookieTimeout,allowSubdomains:this.L.allowSubdomains}},t.prototype.hw=function(t){var n=Et();this.J.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.L.lastTrackingDraw,this.cw=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.ew.get()},t.prototype.setVisitor=function(t){this.ew.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.ew.get()},t.prototype.resetVisitor=function(){this.aw(),this.Wn.emitAfterVisitorCleared()},t.prototype.removeVisitor=function(){this.ew.remove()},t.prototype.hasAllowSubdomainsChanged=function(){var t=this.getVisitor();return!!t&&t.allowSubdomains!==this.L.allowSubdomains},t.prototype.handleSubdomainChange=function(){this.ew.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.cw&&t.visitsCount!==this.cw},t.prototype.fw=function(){return!It(this.lw)||St()-this.lw>this.uw},t.prototype.renewVitor=function(){this.fw()?(this.lw=St(),this.aw(),this.Wn.emitAfterVisitorRenewal()):on.warn("session:start:newVisitor is trying to renew visitor under time limit")},t.prototype.aw=function(){this.Wn.emitBeforeVisitorRenewal(),this.removeVisitor()},t}(),hh="_cs_s",ch=18e5,ah=/^(\d+\.[013567TBW](\.[01])?)(\.\d+)?$/,fh=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(uh||(uh={}));var vh,lh=function(){function t(t,n,i){this.L=t,this.yw=n,this.pw=i,this.$o=null,this.mw=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.gw();return t.Aw(i)}var r=this.Sw(),s=r.sessionString,e=r.status,u=t.Aw(s);if(e!==uh.EXPIRED)return u;if(this.L.cookielessTrackingEnabled)return null;var o=this.gw();if(!o)return null;var h=csString.prototype.split.call(o,fh);if(!t.Ew(h))return o;var c=h[h.length-1],a=parseInt(c,10);return isNaN(a)||this.bw(a),u},t.prototype.onCookieToSet=function(t){this.Rw=t},t.prototype.onCookieToRemove=function(t){this.Nw=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=ch);var r=St()+n,s=this.toString(t);s+="".concat(fh).concat(r),this.Tw(s,r),this.L.cookielessTrackingEnabled?this.pw.setItem(hh,s):(this.yw.set(hh,s,n),null===(i=this.Rw)||void 0===i||i.call(this,hh,s,n))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.pw.removeItem(hh):(this.yw.delete(hh),null===(t=this.Nw)||void 0===t||t.call(this,hh)),this.Ow()},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.L.allowSubdomains?this.yw.delete(hh,dn.CURRENT_DOMAIN):this.yw.delete(hh,this.yw.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],fh)},t.prototype.Tw=function(t,n){this.$o={sessionString:t,expires:n}},t.prototype.Sw=function(){return this.$o?this.$o&&St()<=this.$o.expires?{sessionString:this.$o.sessionString,status:uh.FOUND}:{sessionString:this.$o.sessionString,status:uh.EXPIRED}:{sessionString:this.gw(),status:uh.NOT_FOUND}},t.prototype.Ow=function(){this.$o=null},t.prototype.bw=function(t){this.$o&&(this.$o.expires=t,this.mw=!0)},t.prototype.isCacheRefreshed=function(){return this.mw},t.prototype.resetCacheRefreshed=function(){this.mw=!1},t.prototype.gw=function(){if(this.L.cookielessTrackingEnabled){var t=this.pw.getItem(hh);return!t||this.kw(t)?null:t}return this.yw.get(hh)},t.prototype.kw=function(t){var n=csString.prototype.split.call(t,fh),i=parseInt(n[n.length-1],10);return!isNaN(i)&&St()>i},t.Ew=function(t){return 13===t[t.length-1].length},t.Aw=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,ah))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.Aw(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n,i=csString.prototype.split.call(t,fh),r=i[0];return{recordingState:i[1],etrState:null!==(n=i[2])&&void 0!==n?n:hi.ETR_OFF,pageNumber:parseInt(r,10)}},t.isValidSessionString=function(t){return ah.test(t)},t}();!function(t){t[t.NO=0]="NO",t[t.WITHDRAWN=1]="WITHDRAWN",t[t.GRANTED=2]="GRANTED"}(vh||(vh={}));var dh,wh=function(){function t(t,n){this.Cw=t,this.Iw=n,this._w=null,this.Pw=0,this.xw=vh.NO}return t.prototype.setDynamicVariablesService=function(t){this.Lw=t},t.prototype.createOrUpdateSession=function(){this.Mw(),this.Dw=St(),this.Pw=0;var t=this.Uw();null===t?(t=this.jw(),this.Hw(t),this.qw(t)):(t=this.Iw.sanitizeSessionRecordingState(t),this.Hw(t),t.recordingState=this.Iw.updateRecordingState(t)),this.setSession(t)},t.prototype.grantReplayRecording=function(t){t.recordingState=this.Iw.getDisabledRecordingState(),t.recordingState=this.Iw.computeInitialRecordingStateFromRecordingConsentGranted(t),this.setSession(t)},t.prototype.grantReplayRecordingBeforeSessionStart=function(){this.xw=vh.GRANTED},t.prototype.withdrawnReplayRecording=function(t){t.recordingState=this.Iw.getConsentWithdrawnRecordingState(),this.setSession(t)},t.prototype.withdrawnReplayRecordingBeforeSessionStart=function(){this.xw=vh.WITHDRAWN},t.prototype.qw=function(t){this.xw===vh.WITHDRAWN?(t.recordingState=this.Iw.getConsentWithdrawnRecordingState(),this.setSession(t)):this.xw===vh.GRANTED?t.recordingState=this.Iw.computeInitialRecordingStateFromRecordingConsentGranted(t):t.recordingState=this.Iw.computeInitialRecordingState(t),this.xw=vh.NO},t.prototype.jw=function(){return{pageNumber:0,recordingState:this.Iw.getDisabledRecordingState(),etrState:hi.ETR_OFF}},t.prototype.Hw=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.Iw.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===oi.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.Iw.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber)),t},t.prototype.getSession=function(){return this.Cw.get()},t.prototype.Uw=function(){return this.Cw.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.Cw.get()},t.prototype.setSession=function(t){this.Cw.set(t)},t.prototype.removeSession=function(){this.Cw.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==oi.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===hi.ETR_ON&&csArray.prototype.push.call(n,oi.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.Cw.getRawSession();return this.Cw.isValid(t)},t.prototype.handleSubdomainChange=function(){this.Cw.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(t){void 0===t&&(t=!0);var n=this.Cw.isCacheRefreshed();return n&&t&&this.Cw.resetCacheRefreshed(),n},t.prototype.extendSessionPeriodically=function(){this._w||this.zw()},t.prototype.zw=function(){if(this.Vw())this.Mw();else{var t=this.getSession();if(null===t)return on.warn("extendSession is trying to extend an expired session"),void this.Mw();this.Cw.set(t,ch),this.Bw(),this.Fw()}},t.prototype.Fw=function(){var t=this;this._w=window.setTimeout((function(){t.zw()}),174e4)},t.prototype.Vw=function(){return 1434e4-(St()+ch-this.Dw)<0},t.prototype.Mw=function(){this._w&&(window.clearTimeout(this._w),this._w=null)},t.prototype.Bw=function(){this.Pw+=1,this.Lw.trackDynamicVariable("session_expiry_update",this.Pw)},t}(),yh=function(){function t(t,n,i){this.L=t,this.W=n,this.nn=i}return t.prototype.clear=function(){this.Gw()&&(this.Ww=this.W.getVisitor(),this.W.removeVisitor()),this.Jw()&&this.nn.removeExclusion()},t.prototype.Gw=function(){return this.W.doesVisitorExist()&&this.W.getVisitor().appliedTrackingDraw!==this.L.lastTrackingDraw},t.prototype.Jw=function(){return this.nn.getAppliedTrackingDraw()!==this.L.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Ww&&this.W.setVisitor(this.Ww)},t}(),ph=function(){function t(t,n,i){this.W=t,this.J=n,this.Yw=i}return t.prototype.handle=function(){this.W.hasAllowSubdomainsChanged()&&(this.W.handleSubdomainChange(),this.J.handleSubdomainChange(),this.Yw.handleSubdomainChange())},t}(),mh=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),gh=function(t){function n(n){var i=t.call(this)||this;return i.ye=n,i}return W(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.ye.schedule((function(){return n.onStartTracking(t)}))},i=this,r=0,s=this.listeners;r<s.length;r++){n(s[r])}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){on.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitReplayUnanonymizationConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentGranted&&i.onReplayUnanonymizationConsentGranted()}},n.prototype.emitReplayUnanonymizationConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentWithdrawn&&i.onReplayUnanonymizationConsentWithdrawn()}},n.prototype.emitAfterReplayRecordingConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentGranted&&i.onAfterReplayRecordingConsentGranted()}},n.prototype.emitAfterReplayRecordingConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentWithdrawn&&i.onAfterReplayRecordingConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onRecordingStateChange&&s.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},n.prototype.emitAfterVisitorCleared=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorCleared&&i.onAfterVisitorCleared()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},Y([Jn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(mh),Ah="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(dh||(dh={}));var Sh,Eh=function(){function t(t,n,i){this.L=t,this.yw=n,this.Xw=i}return t.prototype.get=function(){var t;return null===(t=this.L.cookielessTrackingEnabled?this.Xw.getItem(Ah):this.yw.get(Ah))?t:Number(t)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.Xw.setItem(Ah,csString(t)):this.yw.set(Ah,csString(t),nt)},t.prototype.remove=function(){this.L.cookielessTrackingEnabled?this.Xw.removeItem(Ah):this.yw.delete(Ah)},t.prototype.handleSubdomainChange=function(){this.L.cookielessTrackingEnabled||(this.L.allowSubdomains?this.yw.delete(Ah,dn.CURRENT_DOMAIN):this.yw.delete(Ah,this.yw.getRootDomain()))},t}(),bh=function(){function t(t,n,i){this.L=t,this.J=n,this.Wn=i}return t.prototype.grantReplayConsent=function(){if(Ws.isReplayConsentNeeded(this.L)){var t=this.J.getSession();t?Ws.isRecordingBlockedByConsent(t)&&(this.J.grantReplayRecording(t),this.Wn.emitAfterReplayRecordingConsentGranted()):this.J.grantReplayRecordingBeforeSessionStart()}},t.prototype.withdrawReplayConsent=function(){if(Ws.isReplayConsentNeeded(this.L)){var t=this.J.getSession();t?Ws.isRecordingWithDrawn(t)||(this.J.withdrawnReplayRecording(t),this.Wn.emitAfterReplayRecordingConsentWithdrawn()):this.J.withdrawnReplayRecordingBeforeSessionStart()}},t}(),Rh=["replay:consent:unanonymized:granted","trackConsentGranted"],Nh=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Th=["replay:consent:startForSession:granted"],Oh=["replay:consent:startForSession:withdrawn"],kh=function(){function t(t,n,i,r,s){this.L=t,this.ac=n,this.Ro=i,this.J=r,this.Wn=s}return t.prototype.init=function(){this.Kw=new bh(this.L,this.J,this.Wn),this.Ro.setInitialConsent(),this.Id()},t.prototype.Id=function(){var t=this;this.ac.register(Rh,(function(){t.Ro.grantReplayAnonymizationConsent()})),this.ac.register(Nh,(function(){t.Ro.withdrawReplayAnonymizationConsent()})),this.ac.register(Th,(function(){t.Kw.grantReplayConsent()})),this.ac.register(Oh,(function(){t.Kw.withdrawReplayConsent()}))},t.prototype.onOptout=function(){this.Ro.removeAllConsents()},t.prototype.onBeforeVisitorRenewal=function(){this.Ro.removeAllConsents()},t.prototype.onAfterVisitorRenewal=function(){this.Ro.setInitialConsent()},t.prototype.onAfterVisitorCleared=function(){this.Ro.setInitialConsent()},t}(),Ch=function(){function t(t,n,i){this.L=t,this.ew=n,this.Wn=i}return t.prototype.setInitialConsent=function(){var t=this.ew.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.L.consentRequired;return n&&t===dh.NOT_REQUIRED||!n&&t!==dh.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.ew.handleSubdomainChange()},t.prototype.setDefaultReplayAnonymization=function(){var t=this.L.consentRequired?dh.NOT_EXPRESSED:dh.NOT_REQUIRED;this.ew.set(t)},t.prototype.grantReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.ew.set(dh.GRANTED),this.Wn.emitReplayUnanonymizationConsentGranted())},t.prototype.withdrawReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.ew.set(dh.WITHDRAWN),this.Wn.emitReplayUnanonymizationConsentWithdrawn())},t.prototype.removeAllConsents=function(){this.ew.remove()},t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.L.consentRequired||this.ew.get()===dh.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.ew.get())}},t}(),Ih=function(){function t(t,n,i,r,s,e,u){this.Wn=t,this.ac=n,this.qd=i,this.zd=r,this.Vd=s,this.$w=e,this.Bd=u}return t.prototype.start=function(){this.Wn.addListener(this.$w),this.Wn.addListener(this.Bd),this.Wn.addListener(this.qd),this.Bd.init(),this.zd.init(),this.Vd.init(),this.Vd.isActive()||this.ac.start()},t}(),_h="_cs_ex",Ph=2592e6,xh=/^[0-9]+$/,Lh=function(){function t(t,n,i){this.L=t,this.yw=n,this.pw=i}return t.prototype.onCookieToSet=function(t){this.Rw=t},t.prototype.onCookieToRemove=function(t){this.Nw=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?Number(this.pw.getItem(_h)):Number(this.yw.get(_h))},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.pw.setItem(_h,t):(this.yw.set(_h,t,Ph),null===(n=this.Rw)||void 0===n||n.call(this,_h,t,Ph))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.pw.removeItem(_h):(this.yw.delete(_h),null===(t=this.Nw)||void 0===t||t.call(this,_h))},t.isValidExclusionString=function(t){return xh.test(t)},t}(),Mh=function(){function t(t,n){this.qs=t,this.ew=n}return t.prototype.exclude=function(t){this.ew.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.ew.remove()},t.prototype.isExcluded=function(){return this.Zw()||this.Qw()},t.prototype.Zw=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.ew.get()},t.prototype.Qw=function(){return csString.prototype.indexOf.call(this.qs.href,_h)>0},t}(),Dh=function(){function t(t){this.ta=t}return t.prototype.onOptout=function(){this.ta.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Sh||(Sh={}));var Uh=function(){function t(t){this.$=t,this.ty=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.ty=new RegExp(t)},t.prototype.ny=function(){return this.ty.test(this.$.getAnonymizedUrl())?Sh.SessionReplay:Sh.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.ny()===Sh.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.ny()}},t}(),jh=["excludeURLforReplay"],Hh=function(){function t(t,n){this.ta=t,this.ac=n}return t.prototype.init=function(){var t=this;this.ac.register(jh,(function(n){kt(n)&&t.ta.setExcludeUrlForSessionReplay(n)}))},t}(),qh="_cs_inc",zh=function(){function t(t,n){this.qs=t,this.yw=n}return t.prototype.isForceIncluded=function(){return this.iy()||this.sy()},t.prototype.isForceReplayRecorded=function(){return this.ey(oi.GLOBAL_SAMPLING)},t.prototype.iy=function(){return null!==this.yw.get(qh)},t.prototype.ey=function(t){return this.yw.get(qh)===t},t.prototype.sy=function(){return csString.prototype.indexOf.call(this.qs.href,qh)>0},t}(),Vh="_cs_optout",Bh=function(){function t(t,n,i){this.L=t,this.yw=n,this.Xw=i}return t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.Xw.getItem(Vh):this.yw.get(Vh)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.Xw.setItem(Vh,t):this.yw.set(Vh,t,nt)},t}(),Fh=function(){function t(t,n,i){this.Wn=t,this.qs=n,this.ew=i}return t.prototype.init=function(){!this.isActive()&&this.uy()&&this.activate()},t.prototype.isActive=function(){return"1"===this.ew.get()},t.prototype.activate=function(){this.Wn.emitOptout(),this.ew.set("1")},t.prototype.uy=function(){return csString.prototype.indexOf.call(this.qs.href,Vh)>0},t}(),Gh=["optout"],Wh=["optin"],Jh=function(){function t(t,n){this.ac=t,this.Vd=n}return t.prototype.init=function(){var t=this;this.ac.register(Gh,(function(){t.Vd.activate()}))},t}(),Yh=function(){function t(t,n){this.ac=t,this.Gc=n}return t.prototype.init=function(){this.Gc.addListener(this.ac)},t.prototype.onOptout=function(){this.ac.stop()},t.prototype.onBeforeSessionRenewal=function(){this.ac.stop()},t}();var Xh;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(Xh||(Xh={}));var Kh=function(t){function n(n){var i=t.call(this)||this;return i.oy=n,i.hy={},i}return W(n,t),n.prototype.register=function(t,n,i){for(var r=0,s=t;r<s.length;r++){var e=s[r];this.hy[e]={callback:n,configuration:i},this.hy}},n.prototype.onStart=function(){this.vy(),this.ly()},n.prototype.onStop=function(){for(var t=0,n=this.oy;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.applyFromIntegration=function(t,n,i){var r=this;this.isStarted?on.tryToExecute("Commands.apply.from.integration: ".concat(i),(function(){var i;if(r.hy[t])return(i=r.hy[t]).callback.apply(i,n)}))():window._uxa.push($([t],n,!0))},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.wy(r.name,r.params,t.iframePath)}},n.prototype.wy=function(t,n,i){var r=this;on.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.hy[t])return(i=r.hy[t]).callback.apply(i,n)}))()},n.prototype.vy=function(){for(var t=this,n=0,i=this.oy;n<i.length;n++){var r=i[n];window[r].forEach((function(n){var i=n[0],r=n.slice(1);return t.yy(i,r,!1)}))}},n.prototype.ly=function(){for(var t=this,n=0,i=this.oy;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.yy(i,r,!0)}}}},n.prototype.yy=function(t,n,i){var r,s,e;if(this.hy[t]){if((null===(s=this.hy[t].configuration)||void 0===s?void 0:s.disableApplyPending)&&!i||(null===(e=this.hy[t].configuration)||void 0===e?void 0:e.disableApplyImmediate)&&i)return;try{return(r=this.hy[t]).callback.apply(r,n)}catch(i){on.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(wi),$h=function(){function t(t,n,i){this.L=t,this.W=n,this.J=i}return t.prototype.getRequestParameters=function(){var t=J(J({},At()),this.L.getRequestParameters()),n=this.J.getSession();n&&(t.pn="".concat(n.pageNumber));var i=this.W.getVisitor();return i&&(t.sn="".concat(i.visitsCount),t.uu="".concat(i.id)),t},t}(),Zh=function(){function t(t,n){this.ac=t,this.C=n}return t.prototype.init=function(){var t=this;this.ac.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.C.updateDynamicFields("emitDebugEvents",n)}))},t}();function Qh(t,n,i){if(!It(n)&&!It(i))return t.href;var r=It(n)?function(t){return tt(t,"/")?t:"/".concat(t)}(n):t.pathname,s=It(i)?function(t){return tt(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var tc=function(){function t(t,n){this.qs=t,this.yc=n}return t.prototype.overridePath=function(t){It(t)&&kt(t)&&(this.py=""===t?void 0:t)},t.prototype.overrideQuery=function(t){It(t)&&kt(t)&&(this.my=t)},t.prototype.computeOverriddenUrl=function(t){return this.gy(t)?this.getAnonymizedUrl():t},t.prototype.gy=function(t){var n=this.Ay(this.qs.href);return this.Ay(t)===n},t.prototype.Ay=function(t){return n=t,i="/",-1!==csString.prototype.indexOf.call(n,i,n.length-i.length)?csString.prototype.slice.call(t,0,-1):t;var n,i},t.prototype.getAnonymizedUrl=function(){var t=Qh(this.qs,this.py,this.my);return this.yc.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.qs.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),nc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return W(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(mh),ic=function(){function t(t,n,i,r,s){this.configuration=t,this.Sy=n,this.Wn=i,this.nw=r,this.$=s,this.Ey=[]}return t.prototype.init=function(){this.by()},t.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===oi.TEMPORARILY_RECORDED&&(t.recordingState=oi.NOT_RECORDED),t},t.prototype.computeInitialRecordingState=function(t){return Ws.isReplayConsentNeeded(this.configuration)?oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.qw(t)},t.prototype.computeInitialRecordingStateFromRecordingConsentGranted=function(t){return this.qw(t)},t.prototype.qw=function(t){return Is.isRecordingSupported()?(this.Ey=[],it.percentage()<this.configuration.replayRecordingRate||this.nw.isForceReplayRecorded()?csArray.prototype.push.call(this.Ey,oi.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.Ey,oi.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Ey,oi.ETR_SAMPLING),this.Ey.length>0?(this.Ry(t),oi.TEMPORARILY_RECORDED):oi.NOT_RECORDED):oi.NOT_RECORDED},t.prototype.updateRecordingState=function(t){return Is.isRecordingSupported()?Ws.isRecordingBlockedByConsent(t)?t.recordingState===oi.BLOCKED_BY_CONSENT_WITHDRAWN?oi.BLOCKED_BY_CONSENT_WITHDRAWN:oi.BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.recordingState===oi.GLOBAL_SAMPLING?oi.GLOBAL_SAMPLING:(this.Ey=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.Ey,oi.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Ey,oi.ETR_SAMPLING)),this.Ey.length>0?(this.Ry(t),oi.TEMPORARILY_RECORDED):oi.NOT_RECORDED):oi.NOT_RECORDED},t.prototype.Ry=function(t){var n,i=null===(n=this.W)||void 0===n?void 0:n.getVisitor();this.Sy.send({recordingTypes:csArray.prototype.map.call(this.Ey,Number),url:this.$.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},t.prototype.abortQuotaServiceRequest=function(){this.Sy.abort()},t.prototype.isReplayRecorded=function(t){return!Ws.isRecordingBlockedByConsent(t)&&(t.recordingState===oi.TEMPORARILY_RECORDED||t.recordingState===oi.GLOBAL_SAMPLING||t.recordingState===oi.URL_SAMPLING||t.etrState===hi.ETR_ON)},t.prototype.by=function(){var t=this;this.Sy.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.Sy.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.Sy.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},t.prototype.quotaServiceErrorHandler=function(t){this.Ny("error - ".concat(t))},t.prototype.quotaServiceTimeoutHandler=function(){this.Ny("timeout")},t.prototype.Ny=function(t){var n=oi.NOT_RECORDED;this.Ty(this.Ey)?(n=oi.GLOBAL_SAMPLING,on.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):on.warn("Quota Service: request ".concat(t)),this.Wn.emitRecordingStateChange(n,hi.ETR_OFF)},t.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=hi.ETR_OFF,s=oi.NOT_RECORDED;this.Ty(i)?s=oi.GLOBAL_SAMPLING:this.Oy(i)&&(s=oi.URL_SAMPLING),this.ky(i)&&(r=hi.ETR_ON),this.Wn.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},t.prototype.Ty=function(t){return csArray.prototype.some.call(t,(function(t){return t===oi.GLOBAL_SAMPLING}))},t.prototype.Oy=function(t){return csArray.prototype.some.call(t,(function(t){return t===oi.URL_SAMPLING}))},t.prototype.ky=function(t){return csArray.prototype.some.call(t,(function(t){return t===oi.ETR_SAMPLING}))},t.prototype.setVisitorService=function(t){this.W=t},t.prototype.getDisabledRecordingState=function(){return oi.NOT_RECORDED},t.prototype.getConsentWithdrawnRecordingState=function(){return oi.BLOCKED_BY_CONSENT_WITHDRAWN},Y([ln("Quota Service: onerror")],t.prototype,"quotaServiceErrorHandler",null),Y([ln("Quota Service: ontimeout")],t.prototype,"quotaServiceTimeoutHandler",null),Y([ln("Quota Service: onload")],t.prototype,"quotaServiceLoadHandler",null),t}(),rc="|iframe|",sc=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Cy=n,e.Iy=i,e._y=r,e.Py=s,e}return W(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.xy(n)&&null===t)on.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case tn.ChildLogMessage:this.Ly(i);break;case tn.AnalysisEvent:var r=this.Cy.transformEvent(t,i);this.My(r);break;case tn.RecordingEvent:var s=i,e=this.Py.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.Dy(e.events):this.Uy(e.events);break;case tn.JavascriptError:this.jy(i);break;case tn.ApiError:this.Hy(i);break;case tn.DetailedApiError:this.qy(i);break;case tn.CustomError:this.zy(i);break;case tn.EmerchandisingMessage:var u=this._y.transformEvent(t,i);this.Vy(u);break;case tn.Commands:var o=this.Iy.transformEvent(t,i);this.By(o);break;case tn.IntegrationCallback:this.Fy(i);break;case tn.StaticResource:this.Gy(i);break;case tn.TrackingContextRequestMessage:this.Wy(i);break;default:on.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.xy=function(t){var n=[tn.AnalysisEvent,tn.RecordingEvent,tn.EmerchandisingMessage,tn.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.Ly=function(t){var n=t.message,i=t.errorCode;switch(t.level){case st.debug:on.debug(n,i);break;case st.warn:on.warn(n,i);break;case st.error:on.error(n,i);break;case st.critical:on.critical(n,i)}},n.prototype.My=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.Dy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Uy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.jy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.Hy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.qy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.Vy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.By=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Fy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.Gy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeStaticResource&&r.onIframeStaticResource(t)}},n.prototype.Wy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n.prototype.zy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCustomError&&r.onIframeCustomError(t)}},n}(mh);function ec(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,s){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var A=function(t){return t<256?f[t]:f[256+(t>>>7)]},S=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},E=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){E(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},N=function(t,n,i){var r,e,u=new Array(16),o=0;for(r=1;r<=s;r++)u[r]=o=o+i[r-1]<<1;for(e=0;e<=n;e++){var h=t[2*e+1];0!==h&&(t[2*e]=R(u[h]++,h))}},T=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?S(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,n,i,r){var s=2*n,e=2*i;return t[s]<t[e]||t[s]===t[e]&&r[n]<=r[i]},C=function(t,n,i){for(var r=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&k(n,t.heap[s+1],t.heap[s],t.depth)&&s++,!k(n,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},I=function(t,i,r){var s,o,h,c,a=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===s?b(t,o,i):(h=v[o],b(t,h+n+1,i),0!==(c=e[h])&&(o-=l[h],E(t,o,c)),s--,h=A(s),b(t,h,r),0!==(c=u[h])&&(s-=p[h],E(t,s,c)))}while(a<t.last_lit);b(t,256,i)},_=function(t,n){var i,r,e,u=n.dyn_tree,o=n.stat_desc.static_tree,h=n.stat_desc.has_stree,c=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[e]=0,t.opt_len--,h&&(t.static_len-=o[2*e+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)C(t,u,i);e=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*e]=u[2*i]+u[2*r],t.depth[e]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=e,t.heap[1]=e++,C(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,e,u,o,h,c=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=l[r-d]),h=c[2*r],t.opt_len+=h*(u+o),v&&(t.static_len+=h*(f[2*r+1]+o)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--i])>a||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,n),N(u,a,t.bl_count)},P=function(t,n,i){var r,s,e=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)s=u,u=n[2*(r+1)+1],++o<h&&s===u||(o<c?t.bl_tree[2*s]+=o:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,e=s,0===u?(h=138,c=3):s===u?(h=6,c=3):(h=7,c=4))},x=function(t,n,i){var r,s,e=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),r=0;r<=i;r++)if(s=u,u=n[2*(r+1)+1],!(++o<h&&s===u)){if(o<c)do{b(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),o--),b(t,16,t.bl_tree),E(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),E(t,o-3,3)):(b(t,18,t.bl_tree),E(t,o-11,7));o=0,e=s,0===u?(h=138,c=3):s===u?(h=6,c=3):(h=7,c=4)}},L=!1,M=function(t,n,i,r){E(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(S(t,i),S(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){L||(!function(){var t,n,h,g,A,S=new Array(16);for(h=0,g=0;g<28;g++)for(l[g]=h,t=0;t<1<<e[g];t++)v[h++]=g;for(v[h-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)f[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)f[256+A++]=g;for(n=0;n<=s;n++)S[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,S[8]++;for(;t<=255;)c[2*t+1]=9,t++,S[9]++;for(;t<=279;)c[2*t+1]=7,t++,S[7]++;for(;t<=287;)c[2*t+1]=8,t++,S[8]++;for(N(c,287,S),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=R(t,5);d=new m(c,e,257,i,s),w=new m(a,u,0,r,s),y=new m(new Array(0),o,0,19,7)}(),L=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,T(t)},U=function(t,i,r,s){var e,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),_(t,t.l_desc),_(t,t.d_desc),o=function(t){var n;for(P(t,t.dyn_ltree,t.l_desc.max_code),P(t,t.dyn_dtree,t.d_desc.max_code),_(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*h[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==i?M(t,i,r,s):4===t.strategy||u===e?(E(t,2+(s?1:0),3),I(t,c,a)):(E(t,4+(s?1:0),3),function(t,n,i,r){var s;for(E(t,n-257,5),E(t,i-1,5),E(t,r-4,4),s=0;s<r;s++)E(t,t.bl_tree[2*h[s]+1],3);x(t,t.dyn_ltree,n-1),x(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),I(t,t.dyn_ltree,t.dyn_dtree)),T(t),s&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*A(i)]++),t.last_lit===t.lit_bufsize-1},H=function(t){E(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},q={_tr_init:D,_tr_stored_block:M,_tr_flush_block:U,_tr_tally:j,_tr_align:H},z=function(t,n,i,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{e=e+(s=s+n[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},V=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),B=function(t,n,i,r){var s=V,e=r+i;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^n[u])];return-1^t},F={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,W=2,J=3,Y=4,X=0,K=1,$=-1,Z=0,Q=8,tt=q._tr_init,nt=q._tr_stored_block,it=q._tr_flush_block,rt=q._tr_tally,st=q._tr_align,et=G,ut=1,ot=J,ht=Y,ct=5,at=X,ft=K,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,St=2,Et=Q,bt=258,Rt=262,Nt=103,Tt=113,Ot=666,kt=function(t,n){return t.msg=F[n],n},Ct=function(t){return(t<<1)-(t>4?9:0)},It=function(t){for(var n=t.length;--n>=0;)t[n]=0},_t=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},Pt=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},xt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,Pt(t.strm)},Lt=function(t,n){t.pending_buf[t.pending++]=n},Mt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,c=t.window,a=t.w_mask,f=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[e]&&c[++i]===c[e+1]){e+=2,i++;do{}while(c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=n,u=r,r>=o)break;l=c[e+u-1],d=c[e+u]}}}while((n=f[n&a])>h&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,s,e,u,o,h,c,a,f=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);s+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,h=t.strstart+t.lookahead,c=s,a=void 0,(a=u.avail_in)>c&&(a=c),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),h),1===u.state.wrap?u.adler=z(u.adler,o,a,h):2===u.state.wrap&&(u.adler=B(u.adler,o,a,h)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=_t(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2},Ht=function(t,n){for(var i,r,s;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(xt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&xt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2};function qt(t,n,i,r,s){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=s}var zt=[new qt(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,xt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(xt(t,!1),t.strm.avail_out),1)})),new qt(4,4,8,4,jt),new qt(4,5,16,8,jt),new qt(4,6,32,32,jt),new qt(4,4,16,16,Ht),new qt(8,16,32,32,Ht),new qt(8,16,128,128,Ht),new qt(8,32,128,256,Ht),new qt(32,128,258,1024,Ht),new qt(32,258,258,4096,Ht)];function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Et,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),It(this.dyn_ltree),It(this.dyn_dtree),It(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),It(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),It(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Bt=function(t){if(!t||!t.state)return kt(t,vt);t.total_in=t.total_out=0,t.data_type=St;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Tt,t.adler=2===n.wrap?0:1,n.last_flush=et,tt(n),at},Ft=function(t){var n=Bt(t);return n===at&&function(t){t.window_size=2*t.w_size,It(t.head),t.max_lazy_match=zt[t.level].max_lazy,t.good_match=zt[t.level].good_length,t.nice_match=zt[t.level].nice_length,t.max_chain_length=zt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Gt=function(t,n,i,r,s,e){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||i!==Et||r<8||r>15||n<0||n>9||e<0||e>gt)return kt(t,vt);8===r&&(r=9);var o=new Vt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=e,o.method=i,Ft(t)},Wt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?kt(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===Ot&&n!==ht)return kt(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=n,42===s.status)if(2===s.wrap)t.adler=0,Lt(s,31),Lt(s,139),Lt(s,8),s.gzhead?(Lt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Lt(s,255&s.gzhead.time),Lt(s,s.gzhead.time>>8&255),Lt(s,s.gzhead.time>>16&255),Lt(s,s.gzhead.time>>24&255),Lt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Lt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Lt(s,255&s.gzhead.extra.length),Lt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=B(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Lt(s,0),Lt(s,0),Lt(s,0),Lt(s,0),Lt(s,0),Lt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Lt(s,3),s.status=Tt);else{var u=Et+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Tt,Mt(s,u),0!==s.strstart&&(Mt(s,t.adler>>>16),Mt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=B(t.adler,s.pending_buf,s.pending-i,i)),Pt(t),i=s.pending,s.pending!==s.pending_buf_size));)Lt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=B(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=B(t.adler,s.pending_buf,s.pending-i,i)),Pt(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Lt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=B(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=B(t.adler,s.pending_buf,s.pending-i,i)),Pt(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Lt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=B(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.status=Nt)}else s.status=Nt;if(s.status===Nt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&Pt(t),s.pending+2<=s.pending_buf_size&&(Lt(s,255&t.adler),Lt(s,t.adler>>8&255),t.adler=0,s.status=Tt)):s.status=Tt),0!==s.pending){if(Pt(t),0===t.avail_out)return s.last_flush=-1,at}else if(0===t.avail_in&&Ct(n)<=Ct(e)&&n!==ht)return kt(t,dt);if(s.status===Ot&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==s.lookahead||n!==et&&s.status!==Ot){var o=s.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===et)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2}(s,n):s.strategy===mt?function(t,n){for(var i,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2}(s,n):zt[s.level].func(s,n);if(3!==o&&4!==o||(s.status=Ot),1===o||3===o)return 0===t.avail_out&&(s.last_flush=-1),at;if(2===o&&(n===ut?st(s):n!==ct&&(nt(s,0,0,!1),n===ot&&(It(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),Pt(t),0===t.avail_out))return s.last_flush=-1,at}return n!==ht?at:s.wrap<=0?ft:(2===s.wrap?(Lt(s,255&t.adler),Lt(s,t.adler>>8&255),Lt(s,t.adler>>16&255),Lt(s,t.adler>>24&255),Lt(s,255&t.total_in),Lt(s,t.total_in>>8&255),Lt(s,t.total_in>>16&255),Lt(s,t.total_in>>24&255)):(Mt(s,t.adler>>>16),Mt(s,65535&t.adler)),Pt(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?at:ft)},Jt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=z(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===s&&(It(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(n.subarray(i-r.w_size,i),0),n=e,i=r.w_size}var u=t.avail_in,o=t.next_in,h=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,a=r.lookahead-2;do{r.ins_h=_t(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--a);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=u,r.wrap=s,at},Yt={deflateInit:function(t,n){return Gt(t,n,Et,15,8,At)},deflateInit2:Gt,deflateReset:Ft,deflateResetKeep:Bt,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,at):vt},deflate:Wt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Nt&&n!==Tt&&n!==Ot?kt(t,vt):(t.state=null,n===Tt?kt(t,lt):at)},deflateSetDictionary:Jt,deflateInfo:"pako deflate (from Nodeca project)"},Xt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Kt={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Xt(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var s=new Uint8Array(n),e=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];s.set(u,e),e+=u.length}return s}},$t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){$t=!1}for(var Zt=new Uint8Array(256),Qt=0;Qt<256;Qt++)Zt[Qt]=Qt>=252?6:Qt>=248?5:Qt>=240?4:Qt>=224?3:Qt>=192?2:1;Zt[254]=Zt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&$t)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,s,e,u=t.length,o=0;for(s=0;s<u;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),e=0,s=0;e<o;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?n[e++]=i:i<2048?(n[e++]=192|i>>>6,n[e++]=128|63&i):i<65536?(n[e++]=224|i>>>12,n[e++]=128|i>>>6&63,n[e++]=128|63&i):(n[e++]=240|i>>>18,n[e++]=128|i>>>12&63,n[e++]=128|i>>>6&63,n[e++]=128|63&i);return n},buf2string:function(t,n){var i,r,s=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var e=new Array(2*s);for(r=0,i=0;i<s;){var u=t[i++];if(u<128)e[r++]=u;else{var o=Zt[u];if(o>4)e[r++]=65533,i+=o-1;else{for(u&=2===o?31:3===o?15:7;o>1&&i<s;)u=u<<6|63&t[i++],o--;o>1?e[r++]=65533:u<65536?e[r++]=u:(u-=65536,e[r++]=55296|u>>10&1023,e[r++]=56320|1023&u)}}}return tn(e,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Zt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},sn=Object.prototype.toString,en=G,un=W,on=J,hn=Y,cn=X,an=K,fn=$,vn=Z,ln=Q;function dn(t){this.options=Kt.assign({level:fn,method:ln,chunkSize:16384,windowBits:15,memLevel:8,strategy:vn},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,this.strm.avail_out=0;var i=Yt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==cn)throw new Error(F[i]);if(n.header&&Yt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===sn.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Yt.deflateSetDictionary(this.strm,r))!==cn)throw new Error(F[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||F[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?hn:en,"string"==typeof t?s.input=nn.string2buf(t):"[object ArrayBuffer]"===sn.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===un||r===on)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((i=Yt.deflate(s,r))===an)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),i=Yt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===cn;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===cn&&(this.result=Kt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}var uc=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=pn.GZIP,i.Jy=ec(),i.Yy=function(t,n,r){r(i.Jy(t,n))},i.compress=oc(),"undefined"!=typeof CompressionStream&&Zn||(i.compress=i.Yy,i.getCompressorSourceCode=function(){return ec.toString()}),i}return W(n,t),n.prototype.compressSync=function(t,n){return this.Jy(t,n)},n.prototype.getCompressorSourceCode=function(){return oc.toString()},n}(Nn);function oc(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),s=new Response(r).arrayBuffer();"base64"!==n?s.then((function(t){return i(t)})):s.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var hc,cc,ac=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=pn.UNCOMPRESSED,n}return W(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(Nn),fc=function(){function t(){}return t.create=function(t){return this.instance?this.instance:$r.isCompressionEnabled()?this.instance=new uc(t):new ac(t)},t}(),vc=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),lc=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),dc="_cs_cvars",wc=function(){function t(t,n,i){this.L=t,this.yw=n,this.pw=i}return t.prototype.onCookieToSet=function(t){this.Rw=t},t.prototype.onCookieToRemove=function(t){this.Nw=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.pw.getItem(dc):this.yw.get(dc)},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.pw.setItem(dc,t):(this.yw.set(dc,t),null===(n=this.Rw)||void 0===n||n.call(this,dc,t))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.pw.removeItem(dc):(this.yw.delete(dc),null===(t=this.Nw)||void 0===t||t.call(this,dc))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}(),yc=["visit",2],pc=["page",3],mc=["nextPageOnly",4],gc=function(){function t(t,n){this.M=t,this.ew=n,this.Xy={},this.Ky={}}return t.prototype.set=function(t,n,i,r){var s,e;if(t>0&&_t(n)&&_t(i)&&!Pt(n)&&!Pt(i)){var u=this.M.anonymizePII(csString(n)),o=this.M.anonymizePII(csString(i));if(s=[u.slice(0,512),o.slice(0,255)],e=""!==i,!It(r)||csArray.prototype.indexOf.call(yc,r)>=0){var h=this.getCustomVariablesSession();e?h[t]=s:delete h[t],this.setCustomVariableSession(h)}(!It(r)||csArray.prototype.indexOf.call(pc,r)>=0)&&(e?this.Xy[t]=s:delete this.Xy[t]),It(r)&&csArray.prototype.indexOf.call(mc,r)>=0&&(e?this.Ky[t]=s:delete this.Ky[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.ew.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&Ct(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.ew.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.ew.remove()},t.prototype.removeCustomVariablesPage=function(){this.Xy={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.Ky)this.Ky.hasOwnProperty(n)&&(this.Xy[n]=this.Ky[n]);for(var n in this.Xy)this.Xy.hasOwnProperty(n)&&(t[n]=this.Xy[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.$y(t)};return this.Xy&&window.csJSON.stringify(this.Xy).length>2&&(i.cvarp=this.$y(this.Xy)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.Ky).length>0)for(var t in this.Ky)this.Ky[t]===this.Xy[t]&&(delete this.Xy[t],delete this.Ky[t])},t.prototype.$y=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],s=r[0],e=r[1];o=1,h=20,(!(Ot(u=i)&&u>=o&&u<=h)||s.length>512||e.length>255)&&delete t[n]}var u,o,h,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),Ac=["setCustomVariable"],Sc=function(){function t(t,n){this.ac=t,this.rn=n}return t.prototype.init=function(){var t=this;this.ac.register(Ac,(function(n,i,r,s){t.rn.set(n,i,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this.rn.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.rn.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.rn.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.rn.removeCustomVariablesSession(),this.rn.removeCustomVariablesPage()},t}(),Ec="_cs_id",bc=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?$/,Rc=function(){function t(t,n,i){this.L=t,this.yw=n,this.pw=i}return t.prototype.onCookieToSet=function(t){this.Rw=t},t.prototype.onCookieToRemove=function(t){this.Nw=t},t.prototype.get=function(){var n;return(n=this.L.cookielessTrackingEnabled?this.pw.getItem(Ec):this.yw.get(Ec))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.L.cookielessTrackingEnabled)this.pw.setItem(Ec,r);else{var s=new csDate(n.expires);this.yw.set(Ec,r,s),null===(i=this.Rw)||void 0===i||i.call(this,Ec,r,s)}},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.pw.removeItem(Ec):(this.yw.delete(Ec),null===(t=this.Nw)||void 0===t||t.call(this,Ec))},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get();t&&(t.allowSubdomains=this.L.allowSubdomains,this.L.allowSubdomains?this.yw.delete(Ec,dn.CURRENT_DOMAIN):this.yw.delete(Ec,this.yw.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4],o=n[5],h=n[6],c=n[7];return{id:i,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(h),allowSubdomains:void 0===c?void 0:!!Number(c)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.allowSubdomains?1:0],".")},t.isValidVisitorString=function(t){return bc.test(t)},t}(),Nc=function(){function t(t){this.M=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,s=csString.prototype.split.call(n,"/");r<s.length;r++){var e=s[r];tt(e,t.Zy)?csArray.prototype.push.call(i,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(i,{key:e,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.M.anonymizePII(t);return i=this.M.anonymizeJwt(i),n.length>0?this.Qy(i,n):i},t.prototype.removeQueryString=function(t){var n=this.tp(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.tp=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.Qy=function(t,n){for(var i=this.tp(t),r=i.path,s=i.queryString,e=csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var h=o[u],c=this.np(e,h);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.np=function(n,i){if(n.length<i.length)return null;for(var r="",s=0;s<n.length;s+=1)if(s>=i.length)r+="".concat(n[s],"/");else if(tt(i[s].key,t.Zy))r+="".concat(i[s].value,"/");else{if(n[s]!==i[s].key)return null;r+="".concat(n[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.Zy=":",t}(),Tc=function(){function t(t,n){this.ca=t,this.L=n}return t.prototype.getEventTargetPath=function(t){var n=Xn(t);return this.ca.getElementPath(n,J({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=Xn(t),i=this.ca.getElementPathAndFirstAnchorParent(n,J({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules)),r=i.path,s=i.firstAnchorParent;return{path:r,targetLink:this.ip(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var n=Xn(t);return this.ca.isValidElement(n)},t.prototype.getElementPath=function(t){return this.ca.getElementPath(t,J({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.ip=function(t){var n;return null!==t&&t.hasAttribute("href")&&!tt(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),Oc=function(){function t(t){this.Ka=t}return t.prototype.transformEvent=function(t,n){var i=this.rp(t,n),r=this.Ka.getElementPath(t);return this.sp(r,i)},t.prototype.rp=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+Li.windowOffsetX()),n.y=Math.round(i.top+n.y+Li.windowOffsetY())}return n},t.prototype.sp=function(t,n){return Pe(n)&&(n.tgt="".concat(t).concat(rc).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(rc).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(rc).concat(n.tgtLk)),n},t}(),kc=function(){function t(t){this.Ka=t}return t.prototype.transformEvent=function(t,n){var i=this.Ka.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(rc).concat(n.iframePath):i,commands:n.commands}},t}(),Cc=function(){function t(t){this.Ka=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Ka.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return J(J({},t),{targetPath:"".concat(i).concat(rc).concat(t.targetPath)})}));return J(J({},n),{products:r})},t}(),Ic=function(){function t(t){this.hn=t,this.ep={clientX:2,clientY:3},this.up={clientX:1,clientY:2},this.op=[Sn.POINTER_DOWN,Sn.POINTER_MOVE,Sn.POINTER_UP],this.hp=[Sn.TOUCH_START,Sn.TOUCH_MOVE,Sn.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!qi.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==Sn.VISIBILITY_CHANGE})),0===n.events.length||(on.warn("IframeRecordingEventsTransformer received event ".concat(tn.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.hn.getId(t);if(void 0===r)return on.error("IframeRecordingEventsTransformer received event ".concat(tn.RecordingEvent,"\n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var s=null;csArray.prototype.some.call(n.events,(function(t){return i.cp(t)||i.ap(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=n.events;e<u.length;e++){var o=u[e];this.cp(o)?this.fp(s,o):this.ap(o)&&this.vp(s,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},t.prototype.vp=function(t,n){this.lp(this.up,t,n)},t.prototype.fp=function(t,n){this.lp(this.ep,t,n)},t.prototype.lp=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.cp=function(t){return-1!==csArray.prototype.indexOf.call(this.op,t.type)},t.prototype.ap=function(t){return-1!==csArray.prototype.indexOf.call(this.hp,t.type)},t}(),_c=function(){function t(t){this.dp=t}return t.prototype.start=function(){var t=this;this.dp.onEvent((function(n){return t.Fr(n)})),this.dp.start()},t.prototype.stop=function(){this.dp.stop()},t.prototype.Fr=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);on.warn(n)},t}(),Pc=function(){function t(){var t=this;this.ev={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){Cn(this.ev)},t.prototype.stop=function(){In(this.ev)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.wp=function(n){if(!n)return!1;var i=n.disposition;return kt(n.sourceFile)&&csArray.prototype.some.call(t.yp,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.wp(t)&&this.Kn({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.yp=["contentsquare","cdnssl.clicktale.net"],Y([ln("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),xc=function(){function t(){}return t.prototype.init=function(){this.pp=new _c(new Pc),this.pp.start()},t.prototype.onOptout=function(){this.pp.stop()},t}(),Lc=function(){function t(t,n,i,r){this.L=t,this.Z=n,this.D=i,this.ye=r}return t.prototype.init=function(){var t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R,N,T,O,k,C,I,_,P,x=this;this.ye.schedule((function(){t=new gh(x.ye),n=new pt,i=new Nc(n),s=new tc(window.location,i),(r=new dn(x.L,s,x.Z)).init()})),this.ye.schedule((function(){e=new vc,u=new lc,p=new zh(window.location,r),(new xc).init(),m=fc.create(on.warn);var n=(y=new On(m)).create("".concat(x.L.getQuotaServiceUri(),"/quota"),!0);(c=new ic(x.L,n,t,p,s)).init()})),this.ye.schedule((function(){o=new lh(x.L,r,e),h=new wh(o,c)})),this.ye.schedule((function(){a=new Rc(x.L,r,e),f=new oh(x.L,a,h,t),x.D.setContext(f,h),c.setVisitorService(f)})),this.ye.schedule((function(){P=new Ch(x.L,new Eh(x.L,r,u),t),v=new ph(f,h,P),l=new Lh(x.L,r,e),d=new Mh(window.location,l),w=new Dh(d),g=new yh(x.L,f,d);var i=new Ys;I=new Tc(z,x.L),N=new Oc(I),T=new kc(I),O=new Cc(I),k=new Ic(i),C=new sc(N,T,O,k),R=new Kh([Xh.UXA]),A=new Yh(R,C),S=new Uh(s),E=new Hh(S,R);var o=new wc(x.L,r,e);_=new gc(n,o),b=new Sc(R,_);new kn(f,h,d,_,x.L)})),this.ye.schedule((function(){new eh(x.L,f,d,g,v,undefined,undefined,p).compute((function(e){x.ye.schedule((function(){A.init();var o=new nc,c=new kh(x.L,R,P,h,t),a=new Bh(x.L,r,u),v=new Fh(t,window.location,a),l=new Jh(R,v),d=new Zh(R,x.L),p=new $h(x.L,f,h);e?(t.emitInitTracking(),new sh(p,m,f,h,t,R,A,x.L,l,v,c,P,n,I,i,s,d,o,C,_,b,S,E,x.ye,y).start()):new Ih(t,R,A,l,v,w,c).start()}))}))}))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var o=t.source,h=t.data;if(e(h)){var f=function(){var n,i,r,e=s("{domain}/tag/tag.bundle.js?v={version}",h);n=e,i=function(){return o.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=h.token,a(r.loadBundle),u(t.origin)?f():function(t,n){var r=s(i,t),e=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(a(u),e.remove(),n())};c(u),document.head.appendChild(e)}(h,f)}}};function s(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&h(t.version)&&o(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(t)}function o(t){return/^[a-zA-Z0-9]+$/.test(t)}function h(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function a(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=o,t.isAuthorizedTagVersion=h,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=a}(hc||(hc={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(n=t.origin,h(s.ping),o(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(s.insertMessageScript),u(n))}))};function e(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function o(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return hc.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){o(s.ping),hc.waitForBundleInjection()},t.listen=o,t.removeListener=h,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(cc||(cc={}));var Mc,Dc=window.CSFrameCommunication||cc,Uc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return W(n,t),n.prototype.emitTrackingContextResultMessage=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextResultCallback&&r.onTrackingContextResultCallback(t)}},n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n.prototype.emitStartAnalytics=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStartAnalytics&&i.onStartAnalytics()}},n.prototype.emitStopAnalytics=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStopAnalytics&&i.onStopAnalytics()}},n.prototype.emitStartRecording=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStartRecording&&i.onStartRecording()}},n.prototype.emitStopRecording=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStopRecording&&i.onStopRecording()}},n}(mh),jc=["trackTransaction"],Hc=function(){function t(t){this.mp=t}return t.prototype.init=function(){this.mp.register(Ae),this.mp.register(Ac),this.mp.register(Qu),this.mp.register(to),this.mp.register(Zu),this.mp.register(Te),this.mp.register(Oe),this.mp.register(ke),this.mp.register(Ce),this.mp.register(jc),this.mp.register(ho),this.mp.register(co),this.mp.register(Gh),this.mp.register(Wh),this.mp.register(fo),this.mp.register(Ao),this.mp.register(So),this.mp.register(te),this.mp.register(Rh),this.mp.register(Nh),this.mp.register(Th),this.mp.register(Oh)},t.prototype.onStartTracking=function(){this.mp.start()},t.prototype.onOptout=function(){this.mp.stop()},t}(),qc=function(t){function n(n,i){var r=t.call(this)||this;return r.ac=n,r.gp=i,r.$c=[],r}return W(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.$c=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r.ac.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,s=0,e=t;s<e.length;s++){i(e[s])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.$c,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.$c.length){var t={commands:this.$c};this.gp.sendToParent(tn.Commands,t),this.$c=[]}},Y([ln("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),Y([Or(),ln("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(wi),zc=function(){function t(t){void 0===t&&(t=25),this.Ap=t,this.Sp=[]}return t.prototype.reset=function(){this.Sp=[]},t.prototype.getMessages=function(){return this.Sp},t.prototype.addMessage=function(t){this.Sp.length<this.Ap?csArray.prototype.push.call(this.Sp,t):this.Sp.length===this.Ap&&(this.Ep(t),csArray.prototype.push.call(this.Sp,t))},t.prototype.Ep=function(t){t.type=tn.ChildLogMessage,t.content={message:"Buffer is full, events might be missing.",errorCode:"",level:st.warn}},t}(),Vc=function(t){function n(n){var i=t.call(this)||this;return i.buffer=new zc(n),i}return W(n,t),n}(wi),Bc=function(t){function n(n,i,r,s){var e=t.call(this,25)||this;return e.L=n,e.Wn=i,e.bp=r,e.Rp=s,e.Np=null,e.Tp={boundElement:window,type:"message",listener:function(t){return e.Hv(t)}},e}return W(n,t),n.prototype.onStart=function(){Cn(this.Tp,!1),this.Op()},n.prototype.onStop=function(){In(this.Tp,!1),this.Np&&(nn.closeChannelPort(this.Np),this.Np=null)},n.prototype.sendToParent=function(t,n){var i=this.buildChildBaseMessage(t,n);this.kp(i)},n.prototype.Op=function(){var t=this.buildChildBaseMessage(tn.Discovery);nn.sendPostMessage(window.parent,"*",t)},n.prototype.buildChildBaseMessage=function(t,n){var i=nn.buildBaseMessage(t,Qt.Child,this.L.projectId);return n&&(i.content=n),i},n.prototype.kp=function(t){null!==this.Np?nn.sendChannelMessage(this.Np,t):this.buffer.addMessage(t)},n.prototype.Cp=function(t,n){var i=this,r=nn.getNewChannelMessage();this.Np=r.port1,this.Np.onmessage=function(t){i.il(t)};var s=this.buildChildBaseMessage(tn.Discovery);s.id=n,nn.sendPostMessage(window.parent,t,s,[r.port2]),this.sendAllMessagesFromBuffer()},n.prototype.il=function(t){switch(t.data.type){case tn.TrackingContextResultMessage:this.Rp.emitTrackingContextResultMessage(t.data.content);break;case tn.IntegrationCallback:var n=t.data.content;n.initiator===Zt.AfterPageView?this.Rp.emitAfterPageViewCallback(n):n.initiator===Zt.GetSessionKey?this.Rp.emitIntegrationSessionKeyCallback(n):on.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case tn.Stop:this.Wn.emitOptout();break;case tn.RecordingStatus:var i=t.data.content;this.bp.setRecordingStatus(i),this.Rp.emitParentRecordingStatusChange(i);break;default:on.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype.Hv=function(t){if(null===this.Np&&nn.isMessageValid(t,Qt.Parent,this.L.projectId,this.L.hostnames))switch(t.data.type){case tn.Stop:this.Wn.emitOptout();break;case tn.Discovery:if(!Ot(t.data.id)||t.data.id<0)return void on.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.Cp(t.origin,t.data.id);break;default:on.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.sendAllMessagesFromBuffer=function(){if(null!==this.Np){for(var t=0,n=this.buffer.getMessages();t<n.length;t++){var i=n[t];nn.sendChannelMessage(this.Np,i)}this.Ip(),this.buffer.reset()}},n.prototype.Ip=function(){var t=nn.buildBaseMessage(tn.EndOfBufferedMessages,Qt.Child,this.L.projectId);nn.sendChannelMessage(this.Np,t)},n}(Vc),Fc=function(){function t(t){this.gp=t}return t.prototype.onStartTracking=function(){this.gp.start()},t.prototype.onOptout=function(){this.gp.stop()},t}(),Gc=function(){function t(t,n,i,r){this.Fc=t,this.Gc=n,this.gp=i,this.bp=r}return t.prototype.init=function(){var t=this;this.Fc.onChildMessage((function(n,i,r){return t.Gc.emitIframeEvent(n,i,r)})),this.Fc.setRecordingStatusCallback((function(){return t.bp.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Fc.start()},t.prototype.onOptout=function(){this.Fc.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.gp.sendToParent(tn.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.gp.sendToParent(tn.RecordingEvent,n)},t.prototype.onIframeAnalysisEvent=function(t){this.gp.sendToParent(tn.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.gp.sendToParent(tn.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.gp.sendToParent(tn.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.gp.sendToParent(tn.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.gp.sendToParent(tn.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.gp.sendToParent(tn.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.gp.sendToParent(tn.IntegrationCallback,t)},t.prototype.onTrackingContextRequestCallback=function(t){this.gp.sendToParent(tn.TrackingContextRequestMessage,t)},t.prototype.onIframeStaticResource=function(t){this.gp.sendToParent(tn.StaticResource,t)},t.prototype.onIframeCustomError=function(t){this.gp.sendToParent(tn.CustomError,t)},t.prototype.onTrackingContextResultCallback=function(t){this.Fc.sendToChildren(tn.TrackingContextResultMessage,t)},t.prototype.onAfterPageViewCallback=function(t){this.Fc.sendToChildren(tn.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Fc.sendToChildren(tn.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.Fc.sendToChildren(tn.RecordingStatus,t)},t}(),Wc=function(t){function n(n,i,r,s,e,u,o,h){var c=t.call(this)||this;return c.Fa=n,c.pu=i,c.gp=r,c.Qa=s,c.tf=e,c.if=u,c.rf=o,c.sf=h,c}return W(n,t),n.prototype.init=function(){var t,n,i,r,s,e=this;this.Fa.onEvent((function(t){return e.Fr(t)})),this.pu.onEvent((function(t){return e.Fr(t)})),null===(t=this.Qa)||void 0===t||t.onEvent((function(t){return e.Fr(t)})),null===(n=this.tf)||void 0===n||n.onEvent((function(t){return e.Fr(t)})),null===(i=this.if)||void 0===i||i.onEvent((function(t){return e.Fr(t)})),null===(r=this.rf)||void 0===r||r.onEvent((function(t){return e.Fr(t)})),null===(s=this.sf)||void 0===s||s.onEvent((function(t){return e.Fr(t)}))},n.prototype.onStart=function(){var t,n,i,r,s;this.Fa.start(),this.pu.start(),null===(t=this.Qa)||void 0===t||t.start(),null===(n=this.tf)||void 0===n||n.start(),null===(i=this.if)||void 0===i||i.start(),null===(r=this.rf)||void 0===r||r.start(),null===(s=this.sf)||void 0===s||s.start()},n.prototype.onStop=function(){var t,n,i,r,s;this.Fa.stop(),this.pu.stop(),null===(t=this.Qa)||void 0===t||t.stop(),null===(n=this.tf)||void 0===n||n.stop(),null===(i=this.if)||void 0===i||i.stop(),null===(r=this.rf)||void 0===r||r.stop(),null===(s=this.sf)||void 0===s||s.stop()},n.prototype.Fr=function(t){this.isStarted&&t.type!==he.RESIZE&&this.gp.sendToParent(tn.AnalysisEvent,t)},n}(wi),Jc=["webview:analytics:start"],Yc=["webview:analytics:stop"],Xc=function(){function t(t,n,i,r,s,e,u,o){this.L=t,this.Ka=n,this.un=i,this.gp=r,this.lt=s,this._p=e,this.ac=u,this.pu=o}return t.prototype.init=function(){var t=new Fe(this.L,this.Ka,this.un),n=this.lt.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},i=new Ve(this.L,this.Ka,this.pu,n);this.Pp=new Wc(t,i,this.gp,undefined,undefined,undefined,undefined,undefined),this.Pp.init(),this.lt.isInWebViewContext()&&this.xp()},t.prototype.onStartTracking=function(){this.Pp.start()},t.prototype.onOptout=function(){this.Pp.stop()},t.prototype.onStartAnalytics=function(){this.Pp.start()},t.prototype.onStopAnalytics=function(){this.Pp.stop()},t.prototype.xp=function(){var t=this;this.ac.register(Jc,(function(){return t._p.emitStartAnalytics()}),{disableApplyPending:!0}),this.ac.register(Yc,(function(){t._p.emitStopRecording(),t._p.emitStopAnalytics()}),{disableApplyPending:!0})},t}(),Kc=function(t){function n(n,i,r,s,e,u,o,h,c){void 0===c&&(c=[]);var a=t.call(this)||this;return a.L=n,a.Qi=i,a.tr=r,a.nr=s,a.ir=e,a.an=u,a.gp=o,a.lr=h,a.Ri=c,a.Lp=!1,a.gr=new di,a.Ar=!1,a.Ki=[],a.Mp=!1,a.br=function(t){return a.uf(t)},a.Rr=function(t){return a.Nr(t)},a.Ei=new Ai([new bi(csArray.prototype.filter.call($([a.tr],a.Ri,!0),(function(t){return t}))),new sr]),a.Dr=new Si(a.Ei),a.Dr.onEvent(a.br),a}return W(n,t),n.prototype.init=function(){this.Ur()},n.prototype.Ur=function(){var t,n;this.tr.onEvent(this.br),this.nr.onEvent(this.Rr),this.ir.onEvent(this.Rr),null===(t=this.an)||void 0===t||t.onTextNodeToEncrypt(this.br),null===(n=this.lr)||void 0===n||n.onEvent(this.br)},n.prototype.blockSendingEventsFromSerialization=function(){this.Ar=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.Ar=!0},n.prototype.activateOnlineAssetsOnNextStart=function(){this.Lp=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.lr?{supported:this.lr.isSupported(),onlineAssets:{activated:this.lr.isOnlineAssetsActivated(),enableOnNextStart:this.Lp}}:null},n.prototype.uf=function(t){this.Dp(t),this.jp()},n.prototype.Nr=function(t){this.Hp(t),this.jp()},n.prototype.Hp=function(t){csArray.prototype.push.call(this.Ki,t),this.Mp=!0},n.prototype.Dp=function(t){csArray.prototype.push.call(this.Ki,t)},n.prototype.jp=function(){if(this.Ar){si(this.Ri,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)}));var t={containsUserEvent:this.Mp,events:this.Ki};this.gp.sendToParent(tn.RecordingEvent,t),this.Ki=[],this.Mp=!1}},n.prototype.onStart=function(){var t;this.lr&&this.Lp&&(this.lr.enableOnlineAssets(),this.Lp=!1),this.Qi.start(),this.Dr.start(),this.tr.start(),this.ir.start(),null===(t=this.lr)||void 0===t||t.start(),this.L.emitDebugEvents&&this.gr.emit("replayRecordingStarted")},n.prototype.onStop=function(){var t;this.Qi.stop(),this.Dr.stop(),this.tr.stop(),this.nr.stop(),this.ir.stop(),null===(t=this.lr)||void 0===t||t.stop()},n.prototype.addInitialDom=function(t){for(var n=0;n<this.Ki.length;n+=1){if(this.Ki[n].date>t.date)return csArray.prototype.splice.call(this.Ki,n,0,t),this.Mp=!0,void this.jp()}this.Hp(t),this.jp()},n}(wi),$c=function(){function t(t){this.L=t}return t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.L.consentRequired},t}(),Zc=function(){function t(){}return t.isWebViewLocalAssetsSupported=function(){return"URL"in window},t}(),Qc=["webview:replay:start"],ta=["webview:replay:stop"],na=function(){function t(t,n,i,r,s,e,u,o,h){this.L=t,this.M=n,this.cn=i,this.Ac=r,this._p=s,this.Gn=e,this.qp=u,this.zp=o,this.ac=h,this.fn=!1}return t.prototype.init=function(){var t=this,n=new Nc(this.M),i=new tc(window.location,n),r=new $c(this.L),s=new Bs;if(this.Gs=new Cs(r,this.L,i,s),this.Gs.init(),Zc.isWebViewLocalAssetsSupported()){var e=function(n){t.Vp(n)},u=function(t){return on.error("An error occurred while fetching a styleSheet: "+t)},o=new Set,h=function(t){return!o.has(t)},c=function(n){o.add(n.assetId),t.Vp([n])};this.Gn.onAsset((function(n){t.Bp(n)})),this.Gn.onStyleSheetFound((function(n){t.zp.getStyleSheetAssets(n.assetId,e,u,h,c)}))}this.Fp()},t.prototype.isStarted=function(){return null===this.qp.getBridgeVersion()||this.fn},t.prototype.onStartRecording=function(){this.fn=!0,this._p.emitParentRecordingStatusChange({isRecording:!0,isMutationTrackerStarted:!0,PIISelectors:this.cn.getPIISelectors(),capturedElementSelector:this.Ac.getWhitelistedElementsSelector(),useAnonymization:this.Gs.shouldUseAnonymization()})},t.prototype.onStopRecording=function(){this.fn=!1,this._p.emitParentRecordingStatusChange({isRecording:!1,isMutationTrackerStarted:!1})},t.prototype.Fp=function(){var t=this;this.ac.register(Qc,(function(){t._p.emitStartAnalytics(),t._p.emitStartRecording()}),{disableApplyPending:!0}),this.ac.register(ta,(function(){return t._p.emitStopRecording()}),{disableApplyPending:!0})},t.prototype.Bp=function(t){this.qp.sendToParent(tn.Assets,{assets:[t]})},t.prototype.Vp=function(t){0!==t.length&&this.qp.sendToParent(tn.Assets,{assets:t})},t}(),ia=function(){function t(t){this.Gp=t}return t.prototype.getStyleSheetAssets=function(t,n,i,r,s){var e=this,u=[];if(Dr(t)){this.Gp.getResourceContentText(t,(function(t,o){var h=e.Wp(t,o);csArray.prototype.forEach.call(h,(function(t){csArray.prototype.push.call(u,t),Dr(t.assetId)&&r(t.assetId)&&(null==s||s(t),e.getStyleSheetAssets(t.assetId,n,i,r,s))})),n(u)}),(function(t){return i(t)}))}},t.prototype.Wp=function(t,n){return this.Jp(t,xr(n))},t.prototype.Jp=function(t,n){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(n,(function(t){return!Lr(t)})),(function(t){return!Mr(t)})),(function(n){return{assetId:Jt(n,t),assetBasePath:t,assetRawPath:n}}))},t}(),ra=function(){function t(){}return t.prototype.getResourceContentText=function(t,n,i){var r=this.Yp((function(i){n(t,i.responseText)}),i);r.open("GET",t),r.send()},t.prototype.Yp=function(t,n){var i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?t(i):n(i.statusText))},i},t}(),sa=function(t){function n(n,i){var r=t.call(this)||this;return r.lr=n,r.gp=i,r}return W(n,t),n.prototype.onStart=function(){this.lr.start()},n.prototype.onStop=function(){this.lr.stop()},n.prototype.init=function(){var t=this;this.lr.isStaticResourceManagerSupported()&&this.lr.sendStaticResource((function(n){return t.gp.sendToParent(tn.StaticResource,n)}))},n}(wi),ea=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l){this.L=t,this.cc=n,this.un=i,this.M=r,this.hn=s,this.cn=e,this.pu=u,this.Wn=o,this.gp=h,this.bp=c,this.ac=a,this.Rp=f,this.lt=v,this.ye=l}return t.prototype.init=function(){var t=this,n=[],i=new yr(this.cn);this.Ac=new Rr(this.M,this.L),this.Ac.init();var r=new qr;csArray.prototype.push.call(n,r);var s=new Br(this.ye,this.hn),e=[new Ts,i,this.Ac,r],u=null;if(!this.lt.isInWebViewContext()&&this.L.useStaticResourceManager){var o=new us(window.crypto);o.init(),this.lr=new Js(o),this.lr.init(),csArray.prototype.push.call(n,this.lr),this.lr.isStaticResourceManagerSupported()&&(u=new zs(this.lr,this.cn),csArray.prototype.push.call(e,u),this.Xp=new sa(this.lr,this.gp),this.Xp.init())}var h=new Xs;if(this.L.textVisibilityEnabled&&Qr.isSupported()){var c=new Qr(h,this.cn,1e3);csArray.prototype.push.call(e,c),csArray.prototype.push.call(n,c)}var a,f=new _s,v=new Os(this.hn,f);if(v.init(),csArray.prototype.push.call(n,v),v.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(e,v),csArray.prototype.push.call(e,h),csArray.prototype.push.call(n,h),this.Sc()){var l=new ms(this.hn);a=new Rs(e,this.hn,l)}else a=new Ns(e);if(this.Bn=new lr(a,this.hn,this.Ac,this.an),this.nr=new ti(this.un,this.hn,this.cn,this.an),this.nr.init(),this.tr=new ai(this.Bn,s,r,this.Wn,this.hn,this.cn),csArray.prototype.push.call(n,new dr(this.hn,this.cn,r,f)),csArray.prototype.push.call(n,new zr(window)),csArray.prototype.push.call(n,new Cr(window.location,this.M)),this.Kp=new Kc(this.L,f,this.tr,this.nr,new os(this.pu,this.hn,this.cn),this.an,this.gp,this.lr,n),this.ac.register(Qs,(function(){return t.bp.getRecordingStatus().isRecording})),this.ac.register($s,(function(n){t.Ac.setWhitelistedElementsSelector(n)})),this.ac.register(Zs,(function(n){t.cn.setPIISelectors(n)})),this.ac.register(ne,(function(){return t.Kp.getStaticResourceManagerStatus()})),s.init(),this.Kp.init(),this.lt.isInWebViewContext()){var d=new ia(new ra);this.$p=new na(this.L,this.M,this.cn,this.Ac,this.Rp,r,this.gp,d,this.ac),this.Rp.addListener(this.$p),this.$p.init()}},t.prototype.onParentRecordingStatusChange=function(t){var n,i;t.PIISelectors&&this.cn.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.Ac.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.Bn.setAnonymization(t.useAnonymization),t.encryptionSelectors&&this.an.setEncryptionSelectors(t.encryptionSelectors),t.activateOnlineAssetsOnNextStart&&this.Kp.activateOnlineAssetsOnNextStart(),t.isRecording?(this.Kp.start(),null===(n=this.Xp)||void 0===n||n.start()):(this.Kp.stop(),null===(i=this.Xp)||void 0===i||i.stop()),t.isMutationTrackerStarted?this.tr.start():this.tr.stop()},t.prototype.onArtificialPageViewEnd=function(){this.lt.isInWebViewContext()&&this.Kp.stop()},t.prototype.onAfterArtificialPageView=function(){var t;this.lt.isInWebViewContext()&&(null===(t=this.$p)||void 0===t?void 0:t.isStarted())&&this.Kp.start()},t.prototype.onInitialDomStart=function(){this.Kp.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.nr.start(),this.Kp.allowSendingEventsFromSerialization(),this.Kp.addInitialDom(t)},t.prototype.Sc=function(){return Is.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.Tc=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&this.Oc.isSupported()&&this.kc.isSupported()},t.prototype.onOptout=function(){this.Kp.stop()},t}(),ua=function(){function t(t,n){this.qp=t,this.Zp=n}return t.prototype.init=function(){var t=this;this.qp.onWebViewEvent((function(n,i){t.Zp.emitWebviewEventToBridge(n,i)}))},t.prototype.onStartTracking=function(){this.qp.start()},t.prototype.onOptout=function(){this.qp.stop()},t}();!function(t){t[t.PAGE_VIEW=4]="PAGE_VIEW",t[t.TAP=6]="TAP",t[t.LONG_PRESS=8]="LONG_PRESS",t[t.DRAG=9]="DRAG",t[t.FLICK=10]="FLICK",t[t.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",t[t.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",t[t.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",t[t.API_ERROR=21]="API_ERROR",t[t.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",t[t.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN"}(Mc||(Mc={}));var oa,ha=function(){function t(){this.Qp=1}return t.prototype.transformEvent=function(t){switch(t.type){case he.TAP:return{version:this.Qp,type:Mc.TAP,data:{path:t.tgt}};case he.DRAG:var n=t;return{version:this.Qp,type:Mc.DRAG,data:{path:n.tgt,direction:n.fd,distance:n.distance,velocity:n.velocity}};case he.FLICK:var i=t;return{version:this.Qp,type:Mc.FLICK,data:{path:i.tgt,direction:i.fd,distance:i.distance,velocity:i.velocity}};default:return null}},t}(),ca=function(){function t(t,n,i,r){this.$=t,this.ur=n,this.cr=i,this.M=r,this.Qp=1}return t.prototype.transformEvent=function(t,n){switch(t){case tn.ApiError:case tn.DetailedApiError:var i=this.cr.anonymize(n);return{version:this.Qp,data:i};case tn.JavascriptError:var r=J(J({},n),{pageUrl:this.$.getAnonymizedUrl()});i=this.ur.anonymize(r);return{version:this.Qp,data:J(J({},i),{date:St()})};case tn.CustomError:var s=n;return s.message=this.M.anonymizePII(s.message),{version:this.Qp,data:J(J({},s),{date:St()})};default:return null}},t}();!function(t){var n=5,i=30,r=30;t.buildCustomErrorEvent=function(t,s,e){void 0===e&&(e=!1);var u={message:po.truncateStringWithEllipsis(t,300),errorType:"customError"};return(e||function(t){var i=Object.keys(t).length;return i>0&&i<=n}(s))&&(!function(t){for(var n in t){var s=t[n];if(t[n].length>r&&(s=po.truncateStringWithEllipsis(t[n],r),t[n]=s),n.length>i){var e=po.truncateStringWithEllipsis(n,i);delete t[n],t[e]=s}}}(s),u.attributes=s),u}}(oa||(oa={}));var aa;!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.getBridgeVersion=function(){if("function"==typeof window.CSJavascriptBridge.getVersion)try{var t=window.CSJavascriptBridge.getVersion();if(Tt(t))return t}catch(t){on.warn("an error occurred when calling getVersion")}return null},t.notifyIsReadyForTracking=function(){"function"==typeof window.CSJavascriptBridge.onWebviewTrackingReady&&window.CSJavascriptBridge.onWebviewTrackingReady()},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i){window.CSJavascriptBridge.sendTransaction(t,n,i)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,(function(t){return t.assetId})))},t.sendNativeSREvent=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(t))}}(aa||(aa={}));var fa,va,la=function(){function t(t,n,i,r,s,e,u){this.tm=t,this.nm=n,this.im=i,this.rm=r,this.sm=s,this.Wn=e,this.cr=u}return t.prototype.emitWebviewEventToBridge=function(t,n){return X(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a=this;return K(this,(function(f){switch(f.label){case 0:switch(t){case tn.AnalysisEvent:return[3,1];case tn.RecordingEvent:return[3,2];case tn.ChildLogMessage:return[3,3];case tn.Commands:return[3,4];case tn.Assets:return[3,5];case tn.JavascriptError:return[3,7];case tn.ApiError:return[3,8];case tn.DetailedApiError:return[3,9]}return[3,10];case 1:return(i=this.im.transformEvent(n))&&aa.sendAnalysisEvent(i),[3,11];case 2:return aa.sendSREvent(n),[3,11];case 3:return aa.sendLog(n),[3,11];case 4:return on.tryToExecute("SDKMessageUtils.sendMessage.sendCommandMessage: ".concat(n),(function(){a.um(n)}))(),[3,11];case 5:return s=(r=n).assets,e=r.serializationId,[4,this.sm.getTransformedAssets(s,e)];case 6:return u=f.sent(),aa.sendAssets(u,e),[3,11];case 7:return(o=this.rm.transformEvent(tn.JavascriptError,n))&&(aa.sendNativeSREvent(J(J({},o),{type:Mc.JAVASCRIPT_ERROR_SR})),aa.sendAnalysisEvent(J(J({},o),{type:Mc.JAVASCRIPT_ERROR_AN}))),[3,11];case 8:return(h=this.rm.transformEvent(tn.ApiError,n))&&aa.sendAnalysisEvent(J(J({},h),{type:Mc.API_ERROR})),[3,11];case 9:return(c=this.rm.transformEvent(tn.DetailedApiError,n))&&aa.sendNativeSREvent(J(J({},c),{type:Mc.DETAILED_API_ERROR})),[3,11];case 10:return[3,11];case 11:return[2]}}))}))},t.prototype.um=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];switch(!0){case csArray.prototype.indexOf.call(Wh,r.name)>=0:aa.sendOptIn();break;case csArray.prototype.indexOf.call(Gh,r.name)>=0:this.Wn.emitOptout(),aa.sendOptOut();break;case csArray.prototype.indexOf.call(Ae,r.name)>=0:this.om(r);break;case csArray.prototype.indexOf.call(Zu,r.name)>=0:this.hm(r);break;case csArray.prototype.indexOf.call(Oe,r.name)>=0:this.am(r);break;case csArray.prototype.indexOf.call(ke,r.name)>=0:break;case csArray.prototype.indexOf.call(Ce,r.name)>=0:this.fm();break;case csArray.prototype.indexOf.call(jc,r.name)>=0:this.am(r),this.fm();break;case csArray.prototype.indexOf.call(Xo,r.name)>=0:this.cr.addUrlMaskingPattern(r.params[0]);break;case csArray.prototype.indexOf.call(th,r.name)>=0:this.vm(r);break;default:on.warn("WebviewBridgeEventEmitter received an unknown command: ".concat(csJSON.stringify(r)))}}},t.prototype.om=function(t){if(1===t.params.length){var n=t.params[0];if(pe.isValid(n.key,n.value)){var i=this.tm.anonymizePII(n.key),r=this.tm.anonymizePII(n.value);aa.sendDynamicVariable(i,r)}}},t.prototype.hm=function(t){if(1===t.params.length){var n=t.params[0];if(kt(n)){var i={type:Mc.PAGE_VIEW,version:1,data:{url:n}};this.Wn.emitArtificialPageViewEnd(),aa.sendAnalysisEvent(i),this.Wn.emitAfterArtificialPageView()}}},t.prototype.am=function(t){if(1===t.params.length){var n=t.params[0];n.value&&(n.revenue=n.value),this.nm.addTransaction(n)}},t.prototype.fm=function(){var t=this.nm.getTransaction();Ee.isValid(t)&&(aa.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.nm.clear())},t.prototype.vm=function(t){if(!(t.params.length<1)){var n=t.params[0],i=t.params[1]||{};if(kt(n)&&Ct(i)){var r=oa.buildCustomErrorEvent(n,i),s=this.rm.transformEvent(tn.CustomError,r);s&&(aa.sendNativeSREvent(J(J({},s),{type:Mc.CUSTOM_ERROR_SR})),aa.sendAnalysisEvent(J(J({},s),{type:Mc.CUSTOM_ERROR_AN})))}}},t}(),da="LOCAL_ASSET",wa="NONE",ya="ONLY_LOCAL_ASSETS",pa="ALL",ma=function(){function t(t){var n,i;this.lm=t,this.dm=new Set,this.wm=wa;try{var r=null===(i=null===(n=window.CSJavascriptBridge)||void 0===n?void 0:n.getAssetTransformerMode)||void 0===i?void 0:i.call(n);r!==ya&&r!==pa||(this.wm=r)}catch(t){}}return t.prototype.setAssetProcessingMode=function(t){this.wm=t},t.prototype.getTransformedAssets=function(t,n){return X(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a;return K(this,(function(f){switch(f.label){case 0:if(this.wm===wa)return[2,t];i=[],r=0,s=t,f.label=1;case 1:if(!(r<s.length))return[3,8];if(e=s[r],u=e.assetId,o=this.ym(u),this.wm!==pa&&o!==da)return[3,6];if(h=u,this.pm(u,n)&&(h=this.gm(u,n)),this.dm.has(h))return csArray.prototype.push.call(i,e),[3,7];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.lm.getAssetContent(u)];case 3:return c=f.sent(),this.dm.has(h)?(csArray.prototype.push.call(i,e),[3,7]):(csArray.prototype.push.call(i,J(J({},e),{retrievedAssetContent:c})),this.dm.add(e.assetId),[3,5]);case 4:return a=f.sent(),on.error("an error occurred while getting data for asset: ".concat(h,": ").concat(a)),csArray.prototype.push.call(i,e),[3,5];case 5:return[3,7];case 6:csArray.prototype.push.call(i,e),f.label=7;case 7:return r++,[3,1];case 8:return[2,i]}}))}))},t.prototype.ym=function(t){var n=window.WEBVIEW_SERVER_URL||null;try{return"file:"===new csURL(t).protocol||n&&csString.prototype.startsWith.call(t,n)?da:"REMOTE_ASSET"}catch(n){on.error("Error constructing URL (".concat(t,'"): ').concat(n.message))}return"UNKNOWN_ASSET_TYPE"},t.prototype.pm=function(t,n){return n&&csString.prototype.endsWith.call(t,".css")||!1},t.prototype.gm=function(t,n){return"".concat(t,"#").concat(n)},t}(),ga=function(){function t(){this.Am=52428800,this.Sm=31457280,this.Em=0,this.bm=!1,this.Rm=new Map,this.pi=[]}return t.prototype.getAssetContent=function(t){return X(this,void 0,void 0,(function(){var n,i=this;return K(this,(function(r){return(n=this.Rm.get(t))?[2,n]:[2,new Promise((function(n,r){csArray.prototype.push.call(i.pi,{assetUrl:t,successCallback:n,errorCallback:r}),i.bm||i.Nm()}))]}))}))},t.prototype.Nm=function(){return X(this,void 0,void 0,(function(){var t,n,i=this;return K(this,(function(r){switch(r.label){case 0:this.bm=!0,t=function(){var t,r,s,e,u,o,h,c,a,f,v,l;return K(this,(function(d){switch(d.label){case 0:if(t=csArray.prototype.shift.call(n.pi),r=t.assetUrl,s=t.successCallback,e=t.errorCallback,u=n.Rm.get(r))return s(u),[2,"continue"];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,n.Tm("GET",r,"blob")];case 2:if(o=d.sent(),200===(h=o.target).status){if(c=h.getResponseHeader("Content-Type"),(a=Number(h.getResponseHeader("Content-Length")))&&Number(a)>n.Sm)return l="asset is too big, size = ".concat(a," bytes"),e(l),[2,"continue"];(f=new FileReader).onload=function(){var t={data:csString.prototype.split.call(f.result,"base64,")[1],mimeType:null!=c?c:""};i.Em+=a,i.Em>i.Am&&(i.Em=0,i.Rm.clear()),i.Rm.set(r,t),s(t)},f.onerror=function(){e("Error converting XHR response to base64")},f.readAsDataURL(h.response)}else e("error downloading ".concat(r,": ").concat(h.statusText));return[3,4];case 3:return v=d.sent(),l="Error downloading resource ".concat(r,": ").concat(v.message),e(l),[3,4];case 4:return[2]}}))},n=this,r.label=1;case 1:return this.pi.length>0?[5,t()]:[3,3];case 2:return r.sent(),[3,1];case 3:return this.bm=!1,[2]}}))}))},t.prototype.Tm=function(t,n,i){return new Promise((function(r,s){var e=new XMLHttpRequest;e.open(t,n),e.responseType=i,e.onload=r,e.onerror=s,e.send()}))},t}(),Aa=function(){function t(t,n,i,r){this.gp=t,this.zp=n,this.Gn=i,this.ls=r}return t.prototype.handleCommand=function(t){var n=t&&t.withAssets,i=[],r=new Set,s=new Set,e=[];n&&Zc.isWebViewLocalAssetsSupported()?(this.Gn.enable(),this.Gn.onAsset((function(t){r.has(t.assetId)||(r.add(t.assetId),csArray.prototype.push.call(i,t))})),this.Gn.onStyleSheetFound((function(t){s.has(t.assetId)||(s.add(t.assetId),csArray.prototype.push.call(e,t))}))):(this.Gn.disable(),Zc.isWebViewLocalAssetsSupported()||on.warn("Local asset is not supported on this browser"));var u=this.ls.serialize(document),o=csJSON.stringify(u);if(n){var h=Ko.generate();return this.Om(i,e,h),csJSON.stringify({serializedDom:o,serializationId:h})}return o},t.prototype.Om=function(t,n,i){var r=this;0===n.length?this.Vp(t,i):this.km(t,n,i,(function(t,n){return r.Vp(t,n)}))},t.prototype.km=function(t,n,i,r){var s=this,e=0,u=0,o=new Set(csArray.prototype.map.call(t,(function(t){return t.assetId}))),h=function(t){return!o.has(t)},c=function(i){o.has(i.assetId)||(o.add(i.assetId),csArray.prototype.push.call(n,i),csArray.prototype.push.call(t,i))},a=function(s){for(var h=0,c=s;h<c.length;h++){var a=c[h];o.has(a.assetId)||(o.add(a.assetId),csArray.prototype.push.call(t,a))}++e+u===n.length&&r(t,i)},f=function(s){u++,on.error("An error occurred while fetching a styleSheet: "+s),e+u===n.length&&r(t,i)};csArray.prototype.forEach.call(n,(function(t){s.zp.getStyleSheetAssets(t.assetId,a,f,h,c)}))},t.prototype.Vp=function(t,n){this.gp.sendToParent(tn.Assets,{assets:t,serializationId:n})},t}(),Sa=function(){function t(){}return t.prototype.serializeShadowRootNode=function(t,n){var i;(null===(i=t.adoptedStyleSheets)||void 0===i?void 0:i.length)>0&&(n.adoptedStyleSheets=this.Cm(t.adoptedStyleSheets))},t.prototype.Cm=function(t){var n=this;return ii(t,(function(t){return n.bo(t)}))},t.prototype.bo=function(t){var n=[];try{n=ii(t.cssRules,(function(t){return t.cssText}))}catch(t){}return{cssRules:n}},t}(),Ea=function(){function t(t){this.L=t,this.Im=null,this._m=this.Pc(),this.Pm=this.Lc()}return t.prototype.isSdkTrackingContext=function(t){return _t(t)&&Ct(t)&&kt(t.sessionKey)&&Ot(t.pageNumber)&&kt(t.pageViewType)&&"boolean"==typeof t.isRecording},t.prototype.update=function(t){if(!this.isSdkTrackingContext(t))return on.warn("webViewTrackingContext.service received wrong sdkTrackingContext, content:".concat(csJSON.stringify(t))),void(this.Im=null);this.Im=J(J({},t),{recordingConsentState:Gs.NOT_NEEDED,projectId:this._m,uxaDomain:this.Pm})},t.prototype.getTrackingContext=function(){return this.Im},t.prototype.Pc=function(){return this.L.projectId},t.prototype.Lc=function(){return this.L.uxaDomain},t}(),ba=function(){function t(t){this.xm=t,this.jc=[]}return t.prototype.handleCommand=function(t){if(Pt(t)){this.Hc(t);var n=this.xm.getTrackingContext();null!==n&&this.qc(t,n)}},t.prototype.executeRegisteredCallbacks=function(t){var n=this,i=t.trackingContext;i&&csArray.prototype.map.call(this.jc,(function(t){return n.qc(t,i)}))},t.prototype.Hc=function(t){csArray.prototype.push.call(this.jc,t)},t.prototype.qc=function(t,n){setTimeout((function(){t(n)}))},t}(),Ra=function(){function t(t,n){this.Fc=t,this.xm=n}return t.prototype.onIframeIntegrationCallback=function(t){var n=this.xm.getTrackingContext();null!==n&&(t.trackingContext=n,this.Fc.sendToChildren(tn.IntegrationCallback,t))},t}(),Na=function(){function t(t){this.commandsService=t,this.Yc=new fe}return t.prototype.registerChildCommands=function(){var t=this;this.commandsService.register(de,(function(n){return t.Yc.handleCommand(n,t.Iw)}))},t.prototype.onParentRecordingStatusChange=function(t){this.Iw={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||hi.ETR_OFF},this.Yc.executeCallbacks(this.Iw)},Y([Or()],t.prototype,"onParentRecordingStatusChange",null),t}(),Ta=["serializeWebView","webview:serializeWebView"],Oa=["setAssetTransformerMode","webview:setAssetTransformerMode"],ka=["webview:onAfterScreenView"],Ca=function(t){function n(n,i,r,s,e,u,o){var h=t.call(this,n)||this;return h.commandsService=n,h.gp=i,h.Fc=r,h.sm=s,h.Lm=e,h.Gc=u,h.L=o,h}return W(n,t),n.prototype.init=function(){this.xm=new Ea(this.L),this.Mm=new Ra(this.Fc,this.xm),this.Gc.addListener(this.Mm),this.Dm=new ba(this.xm);var t=new ia(new ra),n=new qr,i=new ys([n,new Sa]);this.Um=new Aa(this.gp,t,n,i),this.Id()},n.prototype.onAfterPageViewCallback=function(t){this.Dm.executeRegisteredCallbacks(t)},n.prototype.Id=function(){var n=this;t.prototype.registerChildCommands.call(this),this.commandsService.register(ve,(function(t){n.Dm.handleCommand(t)})),this.commandsService.register(ka,(function(t){n.xm.update(t);var i=n.xm.getTrackingContext();null!==i&&n.Lm.emitAfterPageViewCallback({initiator:Zt.AfterPageView,trackingContext:i})})),this.commandsService.register(Ta,(function(t){return n.Um.handleCommand(t)})),this.commandsService.register(Oa,(function(t){t!==wa&&t!==ya&&t!==pa||n.sm.setAssetProcessingMode(t)}))},n}(Na),Ia=function(){function t(t){this.gp=t,this.jc={}}return t.prototype.handleCommand=function(t){Pt(t)&&this.Hc(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this.jc[t.callbackId];i&&this.qc(i,n)}else for(var r in this.jc)this.qc(this.jc[r],n)},t.prototype.Hc=function(t){var n=it.integer(),i={callbackId:n,initiator:Zt.AfterPageView};this.jc[n]=t,this.gp.sendToParent(tn.IntegrationCallback,i)},t.prototype.qc=function(t,n){setTimeout((function(){t(n)}))},t}(),_a=function(){function t(t){this.gp=t,this.zc={}}return t.prototype.handleCommand=function(t){Ct(t)&&Pt(t.callback)&&this.Bc(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.zc[i];r&&(delete this.zc[i],this.qc(r,n.sessionKey))}},t.prototype.Bc=function(t){var n=it.integer(),i={callbackId:n,initiator:Zt.GetSessionKey};this.zc[n]=t,this.gp.sendToParent(tn.IntegrationCallback,i)},t.prototype.qc=function(t,n){setTimeout((function(){t(n)}))},t}(),Pa=function(){function t(t,n){this.gp=t,this.Fc=n,this.jm={}}return t.prototype.handleCommand=function(t,n){Ct(t)&&Pt(n)&&this.Bc(t,n)},t.prototype.executePendingCommand=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n)if(this.jm[i]){var r=this.jm[i],s=r[0],e=r[1];s&&(delete this.jm[i],this.qc(n,s,e))}else this.Fc.sendToChildren(tn.TrackingContextResultMessage,t)},t.prototype.Bc=function(t,n){var i=it.integer();this.jm[i]=[t,n],this.gp.sendToParent(tn.TrackingContextRequestMessage,{callbackId:i})},t.prototype.qc=function(t,n,i){setTimeout((function(){var r=oe(t,n);i(r)}))},t}(),xa=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.commandsService=n,s.gp=i,s.Fc=r,s}return W(n,t),n.prototype.init=function(){this.Hm=new Ia(this.gp),this.qm=new _a(this.gp),this.zm=new Pa(this.gp,this.Fc),this.Id()},n.prototype.onAfterPageViewCallback=function(t){this.Hm.executeRegisteredCallbacks(t)},n.prototype.onIntegrationSessionKeyCallback=function(t){this.qm.executePendingCallbacks(t)},n.prototype.onTrackingContextResultCallback=function(t){this.zm.executePendingCommand(t)},n.prototype.Id=function(){var n=this;t.prototype.registerChildCommands.call(this),this.commandsService.register(ve,(function(t){n.Hm.handleCommand(t)})),this.commandsService.register(le,(function(t){return n.qm.handleCommand(t)})),this.commandsService.register(we,(function(t,i){n.zm.handleCommand(t,i)}))},n}(Na),La=function(){function t(t,n,i,r,s,e,u,o){var h=this;this._p=t,this.Wn=n,this.L=i,this.gp=r,this.bp=s,this.ac=e,this.lt=u,this.ye=o,this.Jd=function(){h.ac.start(),h.Xd.start()}}return t.prototype.start=function(){var t,n,i,r,s,e,u,o,h,c,a,f,v,l=this;this.ye.schedule((function(){t=new Tc(z,l.L),n=new eo(t),i=new pt,a=new Nc(i),f=new tc(window.location,a),r=fc.create(on.warn),v=new Ho(on),s=new Xc(l.L,t,n,l.gp,l.lt,l._p,l.ac,v),l._p.addListener(s)})),this.ye.schedule((function(){if(l.lt.isInWebViewContext()){var t=new ha,n=new Do(i,f),r=new Mo(a),s=new ca(f,n,r,i),e=new ga;l.sm=new ma(e);var u=new la(i,new Re(i,null,null),t,s,l.sm,l.Wn,r),o=new ua(l.gp,u);o.init(),l.Wn.addListener(o)}else{var h=new Fc(l.gp);l.Wn.addListener(h)}})),this.ye.schedule((function(){u=new Ys,e=new Io(l.L)})),Is.isRecordingSupported()&&this.ye.schedule((function(){var t=new ea(l.L,r,n,i,u,e,v,l.Wn,l.gp,l.bp,l.ac,l._p,l.lt,l.ye);l.Wn.addListener(t),l._p.addListener(t),t.init()})),this.ye.schedule((function(){c=new xo(l.L,e);var n=new Oc(t),i=new kc(t),r=new Cc(t),s=new Ic(u);h=new sc(n,i,r,s),o=new Gc(c,h,l.gp,l.bp)})),this.ye.schedule((function(){h.addListener(o),l._p.addListener(o),l.Wn.addListener(o),l.Wn.addListener(s)})),this.ye.schedule((function(){var t;t=l.lt.isInWebViewContext()?new Ca(l.ac,l.gp,c,l.sm,l._p,h,l.L):new xa(l.ac,l.gp,c),l._p.addListener(t),t.init()})),this.ye.schedule((function(){o.init(),s.init()})),this.Xd=new uo,this.ye.schedule((function(){l.Xd.onLoad((function(){l.Wn.emitStartTracking()})),l.Jd()}))},t}(),Ma=function(t){function n(n,i){void 0===i&&(i=500);var r=t.call(this,2500)||this;return r._p=n,r.Vm=i,r.Bm=!1,r.Fm=void 0,r}return W(n,t),n.prototype.getBridgeVersion=function(){var t;return null!==(t=this.Fm)&&void 0!==t?t:null},n.prototype.onStart=function(){this.Gm()},n.prototype.onStop=function(){this.buffer.reset(),this.Wm&&window.clearInterval(this.Wm)},n.prototype.sendToParent=function(t,n){var i;if(this.Bm)null===(i=this.Jm)||void 0===i||i.call(this,t,n);else if(void 0===this.Fm){var r=this.buildChildBaseMessage(t,n);this.buffer.addMessage(r)}},n.prototype.onWebViewEvent=function(t){this.Jm=t},n.prototype.sendAllMessagesFromBuffer=function(){for(var t,n=0,i=this.buffer.getMessages();n<i.length;n++){var r=i[n];null===(t=this.Jm)||void 0===t||t.call(this,r.type,r.content)}this.buffer.reset()},n.prototype.Ym=function(){for(var t,n=0,i=this.buffer.getMessages();n<i.length;n++){var r=i[n];r.type===tn.Commands&&(null===(t=this.Jm)||void 0===t||t.call(this,r.type,r.content))}this.buffer.reset()},n.prototype.buildChildBaseMessage=function(t,n){return{type:t,content:n}},n.prototype.Gm=function(){var t=this;this.Bm=aa.isCSJavascriptBridgeDefined(),this.Bm?this.Xm():this.Wm=window.setInterval((function(){t.Bm=aa.isCSJavascriptBridgeDefined(),t.Bm&&(t.Xm(),window.clearInterval(t.Wm))}),this.Vm)},n.prototype.Xm=function(){this.Fm=aa.getBridgeVersion(),null===this.Fm?this.sendAllMessagesFromBuffer():this.Fm>=2?(this.Km(),this.Ym(),aa.notifyIsReadyForTracking()):on.warn("bridge version ".concat(this.Fm," is not supported"))},n.prototype.Km=function(){this._p.emitStopAnalytics()},n}(Vc),Da=function(){function t(){this.$m=null}return t.prototype.getRecordingStatus=function(){return null===this.$m?{isRecording:!1}:this.$m},t.prototype.setRecordingStatus=function(t){this.$m=t},t}(),Ua=function(t){function n(n,i){var r=t.call(this)||this;return r.hr=n,r.gp=i,r}return W(n,t),n.prototype.onStart=function(){var t=this;this.hr.subscribe(n.Wr,(function(n){return t.Fr(n)}))},n.prototype.onStop=function(){this.hr.unsubscribe(n.Wr)},n.prototype.Fr=function(t){this.isStarted&&this.gp.sendToParent(tn.ApiError,t)},n.Wr="ChildApiErrorsService",n}(wi),ja=function(t){function n(n,i){var r=t.call(this)||this;return r.hr=n,r.gp=i,r}return W(n,t),n.prototype.onStart=function(){var t=this;this.hr.subscribe(n.Wr,(function(n){return t.Fr(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this.hr.unsubscribe(n.Wr)},n.prototype.Fr=function(t){this.isStarted&&this.gp.sendToParent(tn.DetailedApiError,t)},n.Wr="ChildDetailedApiErrorsService",n}(wi),Ha=function(){function t(t,n,i){this.L=t,this.gp=n,this.mp=i}return t.prototype.init=function(){var t,n=new Zo(this.L),i=new Jo(n);var r=new Wo(this.L,i,t),s=new Go(n),e=new Bo(this.L,s,t);this.hr=new Lo(r,e),this.hr.excludeDomains([Co.CONTENTSQUARE,Co.CLICKTALE]),this.hr.excludeDomains([Co.FAKE_TRACKER]),this.Zm=new Ua(this.hr,this.gp),this.Qm=new ja(this.hr,this.gp),this.hr.init(),this.Id()},t.prototype.Id=function(){this.mp.register(Xo)},t.prototype.onStartTracking=function(){this.Zm.start()},t.prototype.onParentRecordingStatusChange=function(t){this.L.apiErrors.enabled&&(t.isRecording?this.Qm.start():this.Qm.stop())},t.prototype.onOptout=function(){this.Zm.stop(),this.Qm.stop()},t}(),qa=function(t){function n(n,i){var r=t.call(this)||this;return r.er=n,r.gp=i,r}return W(n,t),n.prototype.onStart=function(){var t=this;this.er.subscribe(n.Wr,(function(n){return t.Fr(n)}))},n.prototype.onStop=function(){this.er.unsubscribe(n.Wr)},n.prototype.Fr=function(t){this.isStarted&&this.gp.sendToParent(tn.JavascriptError,t)},n.Wr="ChildJavaScriptErrorsService",n}(wi),za=function(){function t(t,n,i){this.L=t,this.gp=n,this.mp=i}return t.prototype.init=function(){var t=new Ro;this.tg=new qa(t,this.gp),this.Id()},t.prototype.onStartTracking=function(){this.tg.start()},t.prototype.onOptout=function(){this.tg.stop()},t.prototype.Id=function(){this.L.jsCustomErrorsEnabled&&!this.L.customErrors.enabled&&this.mp.register(th)},t}(),Va=function(){function t(t,n,i){this.L=t,this.lt=n,this.ye=i}return t.prototype.init=function(){var t,n,i,r,s,e,u,o=this;this.ye.schedule((function(){t=new gh(o.ye),n=new Uc,i=new Da;var e=[Xh.UXA];o.lt.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(e,Xh.WVT),r=new Ma(n)):r=new Bc(o.L,t,i,n),s=new Kh(e)})),this.ye.schedule((function(){e=new qc(s,r),u=new Hc(e)})),this.ye.schedule((function(){u.init()})),this.ye.schedule((function(){if(o.L.apiErrors.enabled){var i=new Ha(o.L,r,e);i.init(),n.addListener(i),t.addListener(i)}if(o.L.jsErrorsEnabled){var s=new za(o.L,r,e);s.init(),t.addListener(s)}})),this.ye.schedule((function(){t.addListener(u)})),this.ye.schedule((function(){t.emitInitTracking()})),this.ye.schedule((function(){new La(n,t,o.L,r,i,s,o.lt,o.ye).start()}))},t}(),Ba=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this.ng=t,this.ig=n,this.rg=i,this.sg=[],this.X=!1,this.eg=0,this.ug=function(){for(r.eg=0;r.sg.length;){if(r.eg>=r.ig)return void setTimeout(r.ug,r.rg);var t=St(),n=csArray.prototype.shift.call(r.sg);if(!n)break;r.runTask(n);var i=St()-t;r.eg+=i}r.X=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this.ng&&!n?(csArray.prototype.push.call(this.sg,t),this.og()):t()},t.prototype.og=function(){var t=this;this.X||(this.X=!0,setTimeout((function(){t.ug()})))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.sg,(function(n){t.runTask(n)})),this.sg=[]},t.prototype.clearQueue=function(){this.sg=[]},t.prototype.isEmpty=function(){return 0===this.sg.length},Y([ln("TaskScheduler"),Jn("runTask")],t.prototype,"runTask",null),Y([Jn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),Fa=function(){function t(t,n,i){this.L=t,this.lt=n,this.D=i}return t.prototype.start=function(){var t,n,i,r,s;if(!window.UXAnalytics){var e=new Ba(!!(null===(t=this.L.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.L.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.L.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new yn(this.lt,this.L);u.init();var o=new mn(this.L,u);if(this.lt.isTopWindowTracker()&&o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&on.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(s=window.CSProtectnativeFunctionsLogs)||void 0===s?void 0:s.Critical)return void on.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new Lc(this.L,u,this.D,e).init()}else if(!this.lt.isTopWindowTracker()&&o.canTrackInChild()){new Va(this.L,this.lt,e).init()}window.UXAnalytics={},!window.CSFrameCommunication&&Dc.isActivable()&&(window.CSFrameCommunication=Dc,Dc.waitForConnection())}},Y([Jn("main.start"),ln("main.start")],t.prototype,"start",null),t}(),Ga=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=st.warn);var r={message:t,errorCode:n,level:i};aa.sendLog(r)},t}();try{var Wa=new ot(window.CS_CONF);window._uxa=window._uxa||[],Wa.processOptionOverrides(window._uxa);var Ja=new ht(window,Wa);Ja.init();var Ya=new en;if(hn=on,on.computeIsActive(Wa.validationRate),Ja.isTopWindowTracker()){var Xa=new qt(Wa,Ya);on.setStrategy(Xa)}else if(Ja.isInIframeContext()){var Ka=new sn(Wa);on.setStrategy(Ka)}else if(Ja.isInWebViewContext()){var $a=new Ga;on.setStrategy($a)}void 0===fa&&(fa=50),void 0===va&&(va=.1),Fn=on.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Fn&&(Vn=fa,Bn=va),new Fa(Wa,Ja,Ya).start()}catch(Mi){}}();