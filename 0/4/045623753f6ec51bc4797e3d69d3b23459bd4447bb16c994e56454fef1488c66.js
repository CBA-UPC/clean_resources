const advancedAdsGAInstances={instances:[],getInstance:function(a){return void 0===this.instances[a]&&(this.instances[a]=new AdvAdsGATracker(a,advads_gatracking_uids[a])),this.instances[a]}};function AdvAdsGATracker(a,d){this.blogId=a,this.propertyIds="string"==typeof d?[d]:d,this.normalTrackingDone=!1,this.clickTimer=null;const e=this;return this.getQueryString=function(a){var d=document.createElement("a");d.href=a;var e=d.search;if(e.length&&(e=(e=e.substr(1)).split("&")).length){var t={};for(var n in e){var s=e[n].split("=");t[s[0]]=s[1]}return t}return[]},this.appendQueryString=function(a,d){for(var e in d)-1!==a.indexOf("?")?a+="&"+e+"="+d[e]:a+="?"+e+"="+d[e];return a},this.trackImpressions=function(a){void 0===a&&(a=!1);var d=[];if(!this.normalTrackingDone&&AdvAdsTrackingUtils.hasAd(AdvAdsTrackingUtils.adsByBlog(advads_tracking_ads,e.blogId))&&(d=d.concat(advads_tracking_ads[e.blogId])),"frontend"===advads_tracking_methods[e.blogId]&&(d=[]),a?void 0!==advadsGATracking.delayedAds&&AdvAdsTrackingUtils.hasAd(AdvAdsTrackingUtils.adsByBlog(advadsGATracking.delayedAds,e.blogId))&&(d=d.concat(advadsGATracking.delayedAds[e.blogId]),advadsGATracking.delayedAds[e.blogId]=[]):void 0!==advadsGATracking.deferedAds&&AdvAdsTrackingUtils.hasAd(AdvAdsTrackingUtils.adsByBlog(advadsGATracking.deferedAds,e.blogId))&&(d=d.concat(advadsGATracking.deferedAds[e.blogId]),advadsGATracking.deferedAds[e.blogId]=[]),"undefined"!=typeof advads&&void 0!==advads.privacy.is_ad_decoded&&(d=d.filter(advads.privacy.is_ad_decoded)),d.length){for(var t in d)void 0!==advads_gatracking_allads[e.blogId][d[t]]&&advads_gatracking_allads[e.blogId][d[t]].impression&&e.sendEvent(advadsGALocale.Impressions,{event_category:"Advanced Ads",event_label:"["+d[t]+"] "+advads_gatracking_allads[e.blogId][d[t]].title,non_interaction:!0});this.normalTrackingDone=!0}},this.trackClick=function(a,d,t,n){void 0===d&&(d=!0);var s={event_category:"Advanced Ads",event_label:"["+a+"] "+advads_gatracking_allads[e.blogId][a].title,non_interaction:!0};if(t||n){var i=advads_gatracking_allads[e.blogId][a].target;void 0===advadsGATracking.postContext&&(i=(i=(i=i.replace("[CAT_SLUG]",advadsGATracking.postContext.cats)).replace("[POST_ID]",advadsGATracking.postContext.postID)).replace("[POST_SLUG]",advadsGATracking.postContext.postSlug)),i=i.replace("[AD_ID]",a);var r=n.getAttribute("href");d?i=r:(i=e.appendQueryString(i,e.getQueryString(r)),void 0!==advads_gatracking_transmitpageqs[e.blogId]&&advads_gatracking_transmitpageqs[e.blogId][a]&&(i=e.appendQueryString(i,e.getQueryString(document.location.href))));var c=!!n.getAttribute("target");if(c)e.sendEvent(advadsGALocale.Clicks,s),d||n.setAttribute("href",i);else{function o(){null!==e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),window.location=i}t.preventDefault(),e.clickTimer=setTimeout((,1e3),s.event_callback=o,e.sendEvent(advadsGALocale.Clicks,s)}}else e.sendEvent(advadsGALocale.Clicks,s)},this.sendEvent=(a,d)=>{e.propertyIds.forEach((e=>{d.send_to=e,gtag("event",a,structuredClone(d))}))},function(){if("function"!=typeof gtag){var a=document.createElement("script");a.src="https://www.googletagmanager.com/gtag/js",a.async=!0,document.body.appendChild(a),window.dataLayer=window.dataLayer||[],window.gtag=gtag("js",new Date)}var d={send_page_view:!1,transport_type:"beacon"};window.advads_gatracking_anonym&&(d.anonymize_ip=!0),e.propertyIds.forEach((),document.addEventListener("advadsGADeferedTrack",(function(){e.trackImpressions(!1)})),document.addEventListener("advadsGADelayedTrack",(),e.trackImpressions()}(),this}document.addEventListener("DOMContentLoaded",(function(){for(let a in advads_tracking_methods)if(a=parseInt(a,10),!isNaN(a)&&AdvAdsTrackingUtils.blogUseGA(a)){if("undefined"!=typeof advads&&"unknown"===advads.privacy.get_state())return void document.addEventListener("advanced_ads_privacy",(function(d){"not_needed"!==d.detail.state&&"accepted"!==d.detail.state||advancedAdsGAInstances.getInstance(a)}));advancedAdsGAInstances.getInstance(a)}}));