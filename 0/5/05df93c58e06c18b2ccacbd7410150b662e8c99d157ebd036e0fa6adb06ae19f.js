"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6791],{23158:(e,t,i)=>{i.d(t,{m:()=>d});var o=i(15137),n=i(21622),r=i(62591),a=i(31738),l=i(25678),s=i(79788);function d(){const{videoCount:e}=(0,l.C)(),t=(0,o.Lh)((()=>["abTestVersion"]),[]),i=(0,n.N8)(null==t?void 0:t.abTestVersion,"qr_sso_popup"),d=(0,o.Lh)((()=>["user"]),[]);let c,u=432e5,v=0;switch(i){case"v1":default:u=-1;break;case"v2":c={query:{enter_method:"qr_auto_popup"},popupType:"qr",loginPath:"/login/qrcode"},v=3;break;case"v3":c={query:{enter_method:"qr_auto_popup"},popupType:"qr",loginPath:"/login/qrcode"},v=6;break;case"v4":c={query:{enter_method:"sso_auto_popup"},popupType:"sso",loginPath:"/login/sso"},v=3;break;case"v5":c={query:{enter_method:"sso_auto_popup"},popupType:"sso",loginPath:"/login/sso"},v=6}const p=(0,r.Q)(c),{tooltipPriority:m,handlePopoverInitial:h,handlePopoverEnd:g}=(0,s.t)(2);(0,a.useEffect)((()=>{if(null==d?void 0:d.user)g();else try{const t=window.localStorage.getItem("timeOfLastQrSsoLoginPopup");-1!==u&&(!t||Date.now()-parseInt(t,10)>=u)&&e>=v&&2===m&&(window.localStorage.setItem("timeOfLastQrSsoLoginPopup",Date.now().toString()),p(),h())}catch(e){}}),[e,v,u,i,m])}},58357:(e,t,i)=>{i.d(t,{B:()=>m});var o=i(62591),n=i(85762),r=i(66943),a=i(15137),l=i(21622),s=i(98999),d=i(72975),c=i(89681),u=i(36050),v=i(31738),p=i(99333);function m(e){var t;const i=(0,o.Q)(Object.assign({query:{enter_method:"periodic_popup"}},e)),m=(0,p.q)(n.rE),h=(0,r.m7)((0,a.Lh)((()=>["user","abTestVersion","webIdCreatedTime"]),[])),{user:g,abTestVersion:b,webIdCreatedTime:x}=h;let f=432e5;const y=null!==(t=(0,l.N8)(b,"webapp_guest_mode"))&&void 0!==t?t:"v1",k=(0,l.N8)(b,"webapp_login_prediction_full"),w=(0,l.N8)(b,"webapp_login_prediction_reverse"),C=(0,l.N8)(b,"webapp_restricted_login_new_user"),_=(0,l.N8)(b,"webapp_restricted_login_old_user_no_model"),j=(0,l.N8)(b,"webapp_restricted_login_old_user_with_model"),I=(0,l.N8)(b,"webapp_login_causal_inference_validation"),S=(0,s.St)(d.vN),T=(0,c.EO)(x),L=(0,c.Fp)(T,S),M=!(C||_||j||I),O=[{expId:"online",segmentId:"segment_default",versionId:"v1",propertyList:["popup_interval"]},{expId:"webapp_login_prediction_full",segmentId:L,versionId:k,propertyList:["popup_interval"]},{expId:"webapp_login_prediction_reverse",segmentId:L,versionId:w,propertyList:["popup_interval"]}];(0,v.useEffect)((()=>{if(!g){const{popup_interval:e}=(0,u.G)(O);if(f=void 0===e?f:e,M&&("v1"===y||"1"===localStorage.getItem("guest-mode-flag")))try{const e=window.localStorage.getItem("timeOfLastPopup");-1!==f&&(!e||Date.now()-parseInt(e,10)>=f)?(window.localStorage.setItem("timeOfLastPopup",Date.now().toString()),i(),m.setCheckPeriodicLogin({showLoginOnLoad:!0})):m.setCheckPeriodicLogin({showLoginOnLoad:!1})}catch(e){}}}),[])}},84338:96747:(e,t,i)=>{i.r(t),i.d(t,{default:);var o,n=i(71030),r=i(99333),a=i(25879),l=i(31738),s=i(5909),d=i(55453),c=i(51548),u=i(15209),v=i(47294),p=i(87862),m=i(15137),h=i(21622),g=i(65325),b=i(24138),x=i(66943),f=i(32196),y=i(45179),k=i(17560),w=i(45707),C=i(41115),_=i(61537),j=i(25866),I=i(51366),S=i.n(I),T=i(58357),L=i(83167),M=i(23845),O=i(48267),A=i(42645),P=i(30036),V=i(50297),B=i(95925),D=i(85762),R=i(18031),E=i(94225),W=i(31616),Z=i(3979);!o||(o={}));var z=i(46044),q=i(59245),F=i.n(q),H=i(59271),N=i(47248),Y=i(30329),U=i(25129),G=i(46405),K=i(81530),Q=i(67051);const J=l.useLayoutEffect;var X=i(35180),$=i(90407),ee=i(34162),te=i(53292),ie=i(49724),oe=i(22403),ne=i(98279),re=i(3312),ae=i(82790),le=i(24155),se=i(82941),de=i(45809),ce=i(17620),ue=i(28952),ve=i(35380),pe=i(55823),me=i(90950),he=i(21249),ge=i(80986),be=i(56981),xe=i(72975);const fe=e=>{var t;const i={"cmn-Hans-CN":"zh-CN","eng-US":"en-US","jpn-JP":"jp-JP","kor-KR":"ko-KR","cmn-Hans-CN|eng-US":"en-US","rus-RU":"ru-RU","fra-FR":"fr-FR","por-PT":"pt-PT","spa-ES":"es-ES","afr-ZA":"en-ZA","ben-BD":"bn-BD","ces-CZ":"cs-CZ","dan-DK":"da-DK","nld-NL":"nl-NL","fin-FI":"fi-FI","deu-DE":"de-DE","ell-GR":"el-GR","hun-HU":"hu-HU","ind-ID":"id-ID","gle-IE":"en-IE","ita-IT":"it-IT","nor-NO":"no-NO","pol-PL":"pl-PL","swe-SE":"sv-SE","tha-TH":"th-TH","tur-TR":"tr-TR","ara-SA":"ar-SA","fra-CA":"fr-CA","cmn-Hant-CN":"zh-TW","heb-IL":"he-IL","jva-ID":"id-ID","ron-RO":"ro-RO","hin-IN":"hi-IN","ben-IN":"bn-BD","slk-SK":"sk-SK"};return null!==(t=null==i?void 0:i[e])&&void 0!==t?t:"en-US"};var ye=i(63189),ke=i(84033),we=i(1966),Ce=i(43549),_e=i(32565);let je=class{je=(0,oe.__decorate)([(0,Ce.G)(),(0,oe.__metadata)("design:paramtypes",[_e.r])],je);var Ie=let Se=class extends ne.D{constructor(e,t,i,o,n,r){super(),this.service=e,this.transcriptService=t,this.itemList=i,this.videoPlayer=o,this.videoExperience=n,this.itemModule=r,this.defaultState={currentIndex:0,itemListKey:"video",subtitleContent:[],ifShowSubtitle:!1,subtitleStruct:null,seekType:"none"}}setCurrentIndex(e,t){e.currentIndex=t}setSubtitleContent(e,t){e.subtitleContent=t}setIfShowSubtitle(e,t){e.ifShowSubtitle=t}setSubtitleStructetSeekType(e,t){e.seekType=t}handleSelectVideo(e){return e.pipe((0,ve.M)(this.state$,this.itemList.state$,this.itemModule.state$),(0,pe.U)((([{newIndex:e,abTestVersion:t,language:i,user:o},{itemListKey:n},r,a])=>{var l,s,d;const c=null!==(d=(null!==(s=null===(l=r[null!=n?n:""])||void 0===l?void 0:l.browserList)&&void 0!==s?s:[])[e])&&void 0!==d?d:"";return{itemListKey:n,item:a[c],newId:c,abTestVersion:t,language:i,user:o}})),(0,me.z)((({itemListKey:e,item:t,newId:i,abTestVersion:o,language:n,user:r})=>{const a=Object.assign(Object.assign({},t),{author:{nickname:null==t?void 0:t.nickname,uniqueId:null==t?void 0:t.author,id:null==t?void 0:t.authorId,secUid:null==t?void 0:t.authorSecId,avatarThumb:null==t?void 0:t.avatarThumb}});return(0,le.z)((0,se.of)(this.itemList.getActions().resetItemList({key:e,loading:!1}),this.getActions().setSubtitleContent([]),this.itemModule.getActions().updateItem({id:i,hasTranscript:!1})),(0,se.of)(this.itemList.getActions().setList({key:e,response:{loading:!1,statusCode:0,itemList:[a],hasMore:!0},abTestVersion:o,language:n,user:r})),(0,se.of)(...this.updateVideoIndex({newIndex:0,isIndexInvalid:!1,newId:i,enterMethod:"video_cover_click"})),this.itemList.getRelatedList$({key:"video",itemId:i,abTestVersion:o,language:n,user:r}))})))}handleSwitchVideo(e){return e.pipe((0,he.b)((),(0,ve.M)(this.state$,this.itemList.state$,this.itemModule.state$),(0,pe.U)((([{newIndex:e,abTestVersion:t,language:i,user:o,enterMethod:n},{itemListKey:r,currentIndex:a},l,s])=>{var d,c,u;const v=null!==(c=null===(d=l[null!=r?r:""])||void 0===d?void 0:d.browserList)&&void 0!==c?c:[];return{newIndex:e,isIndexInvalid:!(null==v?void 0:v.length)||e<0||e===a||e>=v.length,newId:null!==(u=v[e])&&void 0!==u?u:"",enterMethod:null!=n?n:"video_detail",itemModuleState:s,needLoadNextPage:(null==v?void 0:v.length)-e<6,abTestVersion:t,language:i,user:o}})),(0,he.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,me.z)((e=>{var{itemModuleState:t,needLoadNextPage:i,abTestVersion:o,language:n,user:r}=e,a=Ie(e,["itemModuleState","needLoadNextPage","abTestVersion","language","user"]);const l=[...this.updateVideoIndex(a)];a.isIndexInvalid||l.push(this.getActions().setSubtitleContent([]));const s=[(0,se.of)(...l)];return i&&s.push(this.itemList.getRelatedList$({key:"video",itemId:a.newId,abTestVersion:o,language:n,user:r})),(0,de.T)(...s)})),(0,be.n)({}))}handleErrorRefresh(e){return e.pipe((0,ve.M)(this.state$,this.itemList.state$),(0,pe.U)((([{abTestVersion:e,language:t,user:i},{itemListKey:o,currentIndex:n},r])=>{var a,l;return{itemListKey:o,abTestVersion:e,language:t,user:i,itemId:(null!==(l=null===(a=r[null!=o?o:""])||void 0===a?void 0:a.browserList)&&void 0!==l?l:[])[n]}})),(0,ce.z)((({itemListKey:e,abTestVersion:t,language:i,user:o,itemId:n})=>{var r;return this.service.getVideoDetail({aid:xe.CO,itemId:n,language:i,clientABVersions:(null==t?void 0:t.versionName)?null===(r=null==t?void 0:t.versionName)||void 0===r?void 0:r.split(","):[]}).pipe((0,me.z)((r=>{const{statusCode:a,itemInfo:l}=r;if(0===a){const r=null==l?void 0:l.itemStruct;return(0,le.z)((0,se.of)(this.itemList.getActions().resetItemList({key:e,loading:!1})),(0,se.of)(this.itemList.getActions().setList({key:e,response:{statusCode:0,itemList:[r],hasMore:!0},abTestVersion:t,language:i,user:o})),(0,se.of)(this.getActions().setCurrentIndex(0)),(0,se.of)(...this.updateVideoIndex({newIndex:0,isIndexInvalid:!1,newId:n,enterMethod:"video_error_auto_reload"})))}return this.itemList.getRelatedList$({key:"video",itemId:n,abTestVersion:t,language:i,user:o})})))})),(0,be.n)({}))}handleFirstVideo(e){return e.pipe((0,ve.M)(this.state$,this.itemList.state$),(0,pe.U)((([e,{itemListKey:t},i])=>{var o,n,r;const a=null!==(n=null===(o=i[null!=t?t:""])||void 0===o?void 0:o.browserList)&&void 0!==n?n:[];return{newIndex:0,isIndexInvalid:!(null==a?void 0:a.length)||0>a.length-1,newId:null!==(r=a[0])&&void 0!==r?r:"",enterMethod:"video_detail",itemListKey:t}})),(0,he.b)((),(0,me.z)((e=>{var{itemListKey:t}=e,i=Ie(e,["itemListKey"]);return(0,se.of)(...this.updateVideoIndex(i),this.itemList.getActions().setLoading({key:t,loading:!1}))})),(0,be.n)({}))}downloadTranscript(e){return e.pipe((0,ve.M)(this.state$,this.itemList.state$),(0,pe.U)((([e,{itemListKey:t,currentIndex:i},o])=>{var n,r,a;const l=null!==(a=(null!==(r=null===(n=o[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[])[i])&&void 0!==a?a:"";return Object.assign({itemId:l},e)})),(0,me.z)((e=>{var{itemId:t}=e,i=Ie(e,["itemId"]);return this.fetchTranscript(i).pipe((0,me.z)((e=>(0,se.of)(this.getActions().setSubtitleContent(e),this.itemModule.getActions().updateItem({id:t,hasTranscript:e.length>0})))))})))}fetchTranscript(e){var t;const i=this.getOriginalSubtitleStruct(e.subtitleInfos),o=Math.floor((new Date).getTime()/1e3);return!i||!i.url||(null!==(t=null==i?void 0:i.expire)&&void 0!==t?t:0)<=o?(0,se.of)([]):this.transcriptService.downloadTranscript(i.url).pipe((0,pe.U)((e=>e?(0,ye.Kk)(e).cues:[])),(0,ge.K)(())}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:i,enterMethod:o}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:i,mode:4},playProgress:0,teaParams:{isVideoDetail:!0,enterMethod:o}}),this.getActions().setCurrentIndex(e)]}getOriginalSubtitleStruct(e){const t=null==e?void 0:e.find((e=>("1"===e.Version||"3"===e.Version)&&e.Format===ye.fM.WebVTT));if((null==t?void 0:t.Url)&&(null==t?void 0:t.LanguageCodeName))return{url:t.Url,language:fe(t.LanguageCodeName),expire:t.UrlExpire}}};(0,oe.__decorate)([(0,re.lF)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[Object,Number]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"setCurrentIndex",null),(0,oe.__decorate)([(0,re.lF)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[Object,Array]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"setSubtitleContent",null),(0,oe.__decorate)([(0,re.lF)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[Object,Boolean]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"setIfShowSubtitle",null),(0,oe.__decorate)([(0,re.lF)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[Object,Object]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"setSubtitleStruct",null),(0,oe.__decorate)([(0,re.lF)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[Object,String]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"setSeekType",null),(0,oe.__decorate)([(0,re.Qm)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[ue.y]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"handleSelectVideo",null),(0,oe.__decorate)([(0,re.Qm)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[ue.y]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"handleSwitchVideo",null),(0,oe.__decorate)([(0,re.Qm)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[ue.y]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"handleErrorRefresh",null),(0,oe.__decorate)([(0,re.Qm)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[ue.y]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"handleFirstVideo",null),(0,oe.__decorate)([(0,re.Qm)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[ue.y]),(0,oe.__metadata)("design:returntype",void 0)],Se.prototype,"downloadTranscript",null),Se=(0,oe.__decorate)([(0,ae.Y)("VideoDetailModule"),(0,oe.__metadata)("design:paramtypes",[we.v,je,v.h,K.f,ke.KF,y.A])],Se);var Te=i(11597),Le=i(77324),Me=i(98171),Oe=i(94159),Ae=i(52201),Pe=i(27503);let Ve=class extends ne.D{constructor(e,t,i,o,n,r){super(),this.service=e,this.redirectService=t,this.itemList=i,this.commentList=o,this.seoModule=n,this.bizContext=r,this.defaultState={statusCode:0}}etVideoDetail(e){return e.pipe((0,ve.M)(this.bizContext.state$),(0,pe.U)((([{itemId:e,query:t,abTestVersion:i,language:o,user:n,appType:r},a])=>{var l,s,d;return{itemId:e,lang:o,query:t,isGoogleBot:null===(l=a.bizContext)||void 0===l?void 0:l.isGoogleBot,abTestVersion:i,user:n,appType:r,coverFormat:null===(d=null===(s=a.bizContext)||void 0===s?void 0:s.videoCoverSettings)||void 0===d?void 0:d.format}})),(0,ce.z)((({itemId:e="",lang:t="en",query:i="",abTestVersion:o,user:n,appType:r,isGoogleBot:a,coverFormat:l})=>{var s;return this.service.getVideoDetail({aid:xe.CO,itemId:e,language:t,coverFormat:l,clientABVersions:(null==o?void 0:o.versionName)?null===(s=null==o?void 0:o.versionName)||void 0===s?void 0:s.split(","):[]}).pipe((0,he.b)((),(0,me.z)((l=>{var s;let{statusCode:d,itemInfo:c}=l;const u=null==c?void 0:c.itemStruct,v=[(0,se.of)(this.getActions().setStatusCode(d),this.itemList.getActions().setList({key:"video",response:{statusCode:d,itemList:u?[u]:[],hasMore:!0,log_pb:null==l?void 0:l.log_pb},abTestVersion:o,user:n,language:t}))];if(0===d&&a&&(v.push(this.itemList.getRecommendList$({key:"video",routeName:te.Ur.video,abTestVersion:o,user:n,language:t})),v.push(this.commentList.fetchComment$({aweme_id:e})),(null==u?void 0:u.keywordTags)&&(null==u?void 0:u.keywordTags.length)>0&&(null==u?void 0:u.desc))){const e=(0,Oe.hS)(null==u?void 0:u.keywordTags).map((e=>e.linkPath));this.seoModule.reportImpressionByRpc({Timestamp:Date.now().toString(),VisitPageUrl:`${Ae.o}/@${null===(s=u.author)||void 0===s?void 0:s.uniqueId}/video/${u.id}`,Urls:e,Module:1,TrafficType:1})}return v.push(this.seoModule.setVideoSEOProps(l,{language:t},r,i)),(0,de.T)(...v)})),(0,Pe.l)(this.itemList.getActions().setListKeyword({key:"video",keyword:e}),this.terminate()))})))}};(0,oe.__decorate)([(0,re.lF)(),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[Object,Number]),(0,oe.__metadata)("design:returntype",void 0)],Ve.prototype,"setStatusCode",null),(0,oe.__decorate)([(0,re.Qm)({payloadGetter:1}),(0,oe.__metadata)("design:type",Function),(0,oe.__metadata)("design:paramtypes",[ue.y]),(0,oe.__metadata)("design:returntype",void 0)],Ve.prototype,"getVideoDetail",null),Ve=(0,oe.__decorate)([(0,ae.Y)("VideoPage"),(0,oe.__metadata)("design:paramtypes",[we.v,we.O,v.h,Te.x,Le.q,Me.r])],Ve);const Be=()=>{var e;const{list:t,loading:i}=(0,a.m)(v.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!0,statusCode:0}},dependencies:[]}),o=(0,a.m)(Ve,{selector:({statusCode:e})=>e,dependencies:[]}),{user:n}=null!==(e=(0,m.Lh)((()=>["user"]),[]))&&void 0!==e?e:{},r=(0,a.m)(K.f,{selector:dependencies:[]}),l=t[r],s=(0,a.m)(y.A,{selector:e=>e[null!=l?l:""],dependencies:[l]}),{showNotPass:d,takeDown:c,shareEnabled:u}=null!=s?s:{},{ftcUser:p}=null!=n?n:{},h=p&&!u,g=10101===o,b=!g&&(0!==o&&10404!==o&&10231!==o&&!(0,Q.mB)(o)||10231===o&&!s||d||6===c||h);return{isServerError:g,isCommonError:b,isInitLoading:i&&!(null==t?void 0:t.length)&&!b,isEmpty:!(g||b||i||t.length)}};var De=i(30471),Re=i(43340);const Ee=(0,De.Z)("div",{target:"elnrzms0"})((({theme:{direction:e},isHideSideComponent:t})=>t?{flex:"1 1 auto"}:[(0,Re.YJ)({direction:e,marginEnd:24,marginStart:24}),{padding:"24px 0",flex:"1 1 auto"},(0,Re.f1)({max:767,style:(0,Re.YJ)({direction:e,marginStart:16})})]),"label:DivMainContainer;"),We=(0,De.Z)("div",{target:"elnrzms1"})({padding:"210px 0"},"label:DivErrorWrapper;");var Ze=i(40013),ze=i(2606),qe=i(66020),Fe=i(71928),He=i(8650),Ne=i(62591),Ye=i(20832),Ue=i(73142),Ge=i(88573),Ke=i(55819),Qe=i(23097),Je=i(38771),Xe=i(67351),$e=i(28147),et=i(86172),tt=i(44812),it=i(87242),ot=i(86877),nt=i(59775),rt=i(74195),at=i(80984),lt=i(35991);const st=(0,De.Z)("div",{target:"e17fzhrb0"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative",flex:"0 0 82px",width:"488px"},"label:DivInfoContainer;"),dt=(0,De.Z)("span",{target:"e17fzhrb1"})(Re.wj,"label:SpanNickName;"),ct=(0,De.Z)(at.D,{target:"e17fzhrb2"})(Re.wj,Re.gi,{":hover":{[`${et.EN}`]:{textDecoration:"underline"}}},(,"label:StyledLink;"),ut=({theme:{direction:e}})=>[{flex:"0 0 40px",":hover":{[`~ ${ct} ${et.EN}`]:{textDecoration:"underline"}}},(0,Re.YJ)({direction:e,marginEnd:"12px"})],vt=(0,De.Z)(rt.k_,{target:"e17fzhrb5"})({justifySelf:"flex-end"},"label:StyledFollowButtonTux;");vt.defaultProps=Object.assign(Object.assign({},vt.defaultProps),{"data-e2e":"browse-follow"});const pt=function({author:e,video:t,videoReportParams:i}){var o;const r=(0,a.m)(He.G,{selector:dependencies:[e.uniqueId]}),s=(0,Ne.W)({modalConfig:{query:{enter_method:"click_follow",group_id:null==t?void 0:t.id}}}),{text:d,handleFollow:c,isFollowing:u,relation:v}=(0,Y.w)({uniqueId:e.uniqueId,onNeedLogin:s,teaParams:Object.assign({group_id:null==t?void 0:t.id},i)}),p=(0,l.useMemo)((,[v]);if(null==t?void 0:t.scheduleTime)return(0,n.jsx)(Ye.Q,{video:t},void 0);if(r)return(0,n.jsx)(Ue.C,{videoId:null!==(o=null==t?void 0:t.id)&&void 0!==o?o:""},void 0);const m=u?"secondary":"primary";return(0,n.jsx)(vt,{onClick:c,label:d,variant:m,icon:p},void 0)},mt=(0,l.memo)((function(e){const{uniqueId:t,videoId:i,teaParams:o}=e,r=(0,a.m)(Ge.z,{selector:e=>e.users[t],dependencies:[t]}),{shouldAvatarShowNickName:s}=(0,C.CY)(),{t:d,timeTranslator:c}=(0,Ke.e)(),u=(0,Qe.g)(i),{secret:v,forFriend:p,createTime:m,subVideoMeta:h,item_control:g}=null!=u?u:{},b=!1===(null==g?void 0:g.can_creator_redirect),{showing:x,handleCardEnter:f,handleCardLeave:y,handleItemEnter:k,handleItemLeave:w}=(0,Je.V)(),_=(0,Xe.zW)(r),{isShowLive:j}=_;(0,Xe.TB)({isShowLive:j,reportTrigger:j,user:r,enterMethod:j?"video_head_browser":"creator",autoReport:!0,reportValidator:once:!0});const I=(0,Xe.CN)(Object.assign({user:r,enterMethod:j?"video_head_browser":"creator"},o)),S=(0,l.useMemo)((()=>Object.assign(Object.assign({},I),{author_id:I.to_user_id,group_id:i})),[I,i]),T=(0,l.useMemo)((,[h]),L=(0,l.useMemo)((()=>{if(r)return Object.assign(Object.assign({},I),{author_id:r.id,to_user_id:r.id,group_id:i,enterMethod:"creator"})}),[r,i,I]),M=(0,l.useMemo)((,[]),{colors:O}=(0,Fe.u)();if(!r)return(0,$e.G)(["authorInfo"]);const{nickname:A,secUid:P,verified:V,stateControlledMedia:B}=r,D=function(e){return e?(0,De.Z)(lt.G,{target:"e17fzhrb3"})(ut):(0,De.Z)(at.D,{target:"e17fzhrb4"})(ut)}(j),R=s?(0,n.jsx)(et.Zg,{},void 0):(0,n.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),E=s?A:t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(st,{children:[(0,n.jsx)(D,Object.assign({uniqueId:t,secUid:P,onMouseEnter:k,onMouseLeave:w,isInBrowserMode:!0,teaParams:S,"data-e2e":"browse-user-avatar",onClick:e.onClick,onLinkClick:e.onLinkClick},{children:(0,n.jsx)(tt.k,Object.assign({needAnimation:!0,liveTheme:2,size:48},_),void 0)}),void 0),(0,n.jsxs)(ct,Object.assign({uniqueId:t,secUid:P,onMouseEnter:k,onMouseLeave:w,isInBrowserMode:!0,teaParams:L,onClick:e.onClick,onLinkClick:e.onLinkClick},{children:[(0,n.jsxs)(et.EN,Object.assign({shouldAvatarShowNickName:s},{children:[E,V&&(0,n.jsx)(nt.Q,{width:14,height:14,"data-e2e":"browse-bluev"},void 0)]}),void 0),(0,n.jsx)("br",{},void 0),(0,n.jsxs)(et.G8,Object.assign({isDetailPage:!0,shouldAvatarShowNickName:s},{children:[(0,n.jsx)(dt,{children:s?t:A},void 0),(0,n.jsxs)(n.Fragment,{children:[R,(0,n.jsx)("span",{children:c(1e3*Number(m))},void 0)]},void 0),v&&(0,n.jsxs)(n.Fragment,{children:[R,(0,n.jsx)(ze.Z,{width:16,height:16,style:{fill:O.TextPrimary,opacity:.5,margin:"0 4px"}},void 0),(0,n.jsx)("span",{children:d("video_label_private")},void 0)]},void 0),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:" · "},void 0),(0,n.jsx)(qe.Z,{style:{margin:"0 4px"},width:20,height:20},void 0),(0,n.jsx)("span",Object.assign({className:"friend"},{children:d("Friends only")}),void 0)]},void 0)]}),void 0)]}),void 0),!b&&(0,n.jsx)(pt,{author:r,video:u,videoReportParams:o},void 0),x&&!b&&(0,n.jsx)(it.C,{top:30,fixedLeft:32,onMouseEnter:f,onMouseLeave:y,uniqueId:t,teaParams:T},void 0)]},void 0),(0,n.jsx)(ot.i,{style:M,stateControlledMedia:B,labelType:0},void 0)]},void 0)}));var ht=i(73052),gt=i(82417),bt=i(74564),xt=i(41406),ft=i(72914),yt=i(77613);const kt={id:"default-avatar-9d6780cd",use:"default-avatar-9d6780cd-usage",viewBox:"0 0 48 48",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" id="default-avatar-9d6780cd"><circle cx="24" cy="24" r="24" fill="url(#default-avatar-9d6780cd_a)" /><defs><pattern id="default-avatar-9d6780cd_a" width="1" height="1" patternContentUnits="objectBoundingBox"><use xlink:href="#default-avatar-9d6780cd_b" transform="scale(.00333)" /></pattern><image xlink:href="data:image/png;base64,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" id="default-avatar-9d6780cd_b" width="300" height="300"></image></defs></symbol>'}const Ct=(0,De.Z)("div",{target:"e1a7v7ak0"})((({isFromBusiness:e})=>({marginTop:"24px",marginBottom:e?"24px":void 0})),"label:DivCommentContainer;"),_t=(0,De.Z)("p",{target:"e1a7v7ak1"})((({theme:e})=>(0,Re.GI)({theme:e,fontWeight:"bold",color:"TextPrimary"})),{lineHeight:"26px",fontSize:"18px"},"label:PCommentTitle;"),jt=(0,De.Z)("div",{target:"e1a7v7ak2"})((({isUIOptimization:e,isFromBusiness:t})=>({display:"flex",marginTop:e?"20px":"16px",position:t?"fixed":void 0,bottom:t?0:void 0,width:t?"100%":void 0,paddingTop:t?"16px":void 0,background:t?"#fff":void 0,zIndex:t?1001:void 0})),"label:DivCommentBarContainer;"),It=(0,De.Z)("div",{target:"e1a7v7ak3"})((({theme:e,isUIOptimization:t})=>[(0,Re.YJ)({direction:e.direction,marginStart:"16px"}),{height:"48px",paddingBottom:"24px",borderBottom:t?"":`1px solid ${e.colors.ShadowPrimary}`,cursor:"pointer",flex:1,boxSizing:"content-box"}]),"label:DivBarWrapper;"),St=(0,De.Z)("div",{target:"e1a7v7ak4"})((({theme:e,isUIOptimization:t,isFromBusiness:i})=>[(0,Re.YJ)({direction:e.direction,marginStart:"16px"}),{paddingBottom:"24px",borderBottom:t||i?"":`1px solid ${e.colors.ShadowPrimary}`,cursor:"pointer",flex:1,boxSizing:"content-box",paddingRight:i?"10px":void 0}]),"label:DivCommentInputWrapper;"),Tt=(0,De.Z)("div",{target:"e1a7v7ak5"})]),"label:DivErrorMessage;"),Lt=(0,De.Z)("div",{target:"e1a7v7ak6"})((({theme:e})=>[(0,Re.GI)({theme:e,color:"TextSecondary"}),{marginTop:"64px",lineHeight:"22px",fontSize:"14px",flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivCommentOff;"),Mt=(0,De.Z)(wt,{target:"e1a7v7ak7"})({width:"48px",height:"48px"},"label:StyledDefaultAvatar;"),Ot=(0,De.Z)("div",{target:"e1a7v7ak8"})((({theme:e})=>Object.assign(Object.assign({},(0,Re.YJ)({direction:e.direction,marginStart:"16px"})),{lineHeight:"20px",display:"flex",alignItems:"center",background:e.colors.BGPlaceholderDefault,borderRadius:"8px",height:"40px",fontSize:"14px",color:e.colors.TextQuaternary,flex:"1 1 0",justifyContent:"center",padding:"0 8px",marginBottom:"24px"})),"label:DivDisabledTip;"),At=(0,De.Z)("span",{target:"e1a7v7ak9"})((({theme:{colors:e},isUIOptimization:t})=>({color:t?e.Primary:""})),"label:SpanLogin;"),Pt=(0,l.memo)((({isCommentDisabled:e,authorId:t,itemId:i,teaParams:o})=>{var r,a;const{user:l}=null!==(r=(0,m.Lh)((()=>["user"]),[]))&&void 0!==r?r:{},s=Boolean(l),d=(0,P.Q)(),{nickname:c=""}=null!==(a=(0,Y.p)(t))&&void 0!==a?a:{},u=(0,b.HX)(),{isUIOptimization:v}=(0,C.iA)(),p=(0,Ne.Q)({query:{enter_method:"click_comment"}}),{prefixText:h,loginText:g,endText:x}=(0,gt.Oi)();return(0,n.jsxs)(jt,Object.assign({isUIOptimization:v,isFromBusiness:u},{children:[s?(0,n.jsx)(ft.q,{size:48,src:null==l?void 0:l.avatarUri[0]},void 0):(0,n.jsx)(Mt,{},void 0),s?e?(0,n.jsx)(Ot,{children:d("comment_disable_notfollow").replace("%@",c)},void 0):(0,n.jsx)(St,Object.assign({isUIOptimization:v,isFromBusiness:u},{children:(0,n.jsx)(xt._,{itemId:i,teaParams:o},void 0)}),void 0):(0,n.jsx)(It,Object.assign({isUIOptimization:v,onClick:p},{children:(0,n.jsxs)(bt.Vk,Object.assign({isUIOptimization:v},{children:[h,(0,n.jsx)(At,Object.assign({isUIOptimization:v},{children:g}),void 0),x]}),void 0)}),void 0)]}),void 0)})),Vt=(0,l.memo)((0,l.forwardRef)((function(e,t){var i,o,r;const{itemId:s="",teaParams:d,scheduleTime:c=""}=e,u=(0,P.Q)(),{user:v}=null!==(i=(0,m.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},p=(0,Qe.g)(s),h=(0,b.HX)(),{loading:g,comments:f,hasMore:y}=(0,a.m)(Te.x,{selecto},dependencies:[s]}),k=(0,Y.p)(null==p?void 0:p.author),w=(0,l.useMemo))),[null==k?void 0:k.commentSetting,null==p?void 0:p.itemCommentStatus]),C=!1===(null===(o=null==p?void 0:p.item_control)||void 0===o?void 0:o.can_comment),_=(0,l.useMemo))),[k,null==v?void 0:v.uid]),{stats:j,statsV2:I}=null!=p?p:{},S=null!=I?I:j,T=g&&!f.length&&y,L=w?0:null!==(r=null==S?void 0:S.commentCount)&&void 0!==r?r:0,M=u("video_details_page_comment_header",{num:BigInt(L)<=BigInt(1)?1:L,Count:(0,x.BT)(L)}),O=u(C?"ad_comment_close_des":"comment_off");return(null==p?void 0:p.isContentClassified)?null:c?(0,n.jsx)(Ct,{children:(0,n.jsx)(Tt,{children:u("scheduled_video_comment_unavailable")},void 0)},void 0):(0,n.jsx)(Ct,Object.assign({ref:t,isFromBusiness:h},{children:w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_t,{children:M},void 0),(0,n.jsx)(Lt,Object.assign({"data-e2e":"comment-turned-off"},{children:O}),void 0)]},void 0):(0,n.jsxs)(n.Fragment,{children:[!T&&(0,n.jsx)(_t,{children:M},void 0),T?null:(0,n.jsx)(Pt,{teaParams:d,itemId:s,authorId:null==p?void 0:p.author,isCommentDisabled:_},void 0),(0,n.jsx)(ht.$,{hasMore:y,inDetailPage:!0,itemId:s,disableReply:_,teaParams:d},void 0)]},void 0)}),void 0)})));var Bt,Dt=i(52869),Rt=i(38435),Et=i(1183),Wt=i(26447),Zt=i(98999),zt=i(73632),qt=i(76709),Ft=i(50159),Ht=i(30244)}(Bt||(Bt={}));var Nt=i(53443),Yt=i(51215);var Ut;!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Redirect=2]="Redirect"}(Ut||(Ut={}));const Gt=e=>{var t,i;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),null===(i=null==e?void 0:e.stopPropagation)||void 0===i||i.call(e)};function Kt({id:e}){const[{loading:t},i]=(0,r.b)(Te.x,{selector:t=>{var i,o;return{loading:null!==(o=(null!==(i=t[e])&&void 0!==i?i:Te.C).loading)&&void 0!==o&&o}},dependencies:[e]}),o=(0,l.useRef)(null),n=(0,l.useCallback)((()=>{!t&&i.fetchComment({aweme_id:e})}),[i,e,t]);return(0,l.useEffect)}),[i]),(0,B.qT)({elemRef:o,onHitBottom:n,bottomThreshold:20,throttle:500}),o}function Qt({onPageWidthBreakPoint:e}){const t=(0,qt.fB)((()=>{null==e||e(window.innerWidth<903)}),[e],500);(0,l.useEffect))),[t])}function Jt({videoContainerRef:e,isHorizontal:t,groupId:i,authorId:o}){const n=(0,l.useMemo)((()=>({group_id:i,author_id:o})),[i,o]),r=(0,l.useRef)(0),[a,s]=(0,l.useState)(!1),d=(0,l.useCallback)((e=>{var t;s(!1),t=Object.assign(Object.assign({},n),{play_time:(new Date).getTime()-r.current,enter_method:e}),Z.W.event("exit_PIP_mode",t)}),[n]),c=(0,l.useCallback)((e=>{var t;e?(r.current=(new Date).getTime(),s(!0),t=Object.assign(Object.assign({},n),{enter_method:"rolling_down"}),Z.W.event("enter_PIP_mode",t)):d("rolling_back")}),[d,n]),{hasPip:u}=(0,C.iA)();!function({elementRef:e,onChangeMiniVideoVisible:t,hasMiniPlayer:i}){const[{upChanged:o,downChanged:n},r]=(0,l.useState)({upChanged:!1,downChanged:!1}),a=(0,qt.fB)((()=>{var a,l;if(!i)return;const{top:s}=null!==(l=null===(a=e.current)||void 0===a?void 0:a.getBoundingClientRect())&&void 0!==l?l:{top:0};s<-500&&!n?(r({downChanged:!0,upChanged:!1}),t(!0)):s>=-500&&!o&&(r({downChanged:!1,upChanged:!0}),t(!1))}),[t,o,n,e,i],100);(0,l.useEffect))),[a,i])}({elementRef:e,onChangeMiniVideoVisible:c,hasMiniPlayer:u});const v=(0,l.useCallback)}),[]),{direction:p}=(0,Fe.u)(),m=(0,l.useMemo)((()=>a?Object.assign({width:t?350:197,height:t?197:350,position:"fixed",bottom:"32px",zIndex:99,borderRadius:"4px",overflow:"hidden",marginBottom:0,animation:"0.333s cubic-bezier(0.33, 1, 0.68, 1) show-mini-player"},(0,Re.YJ)({direction:p,end:"12px"})):void 0),[a,t,p]);return{handleCloseMiniVideo:d,miniVideoVisible:a,videoContainerStyle:m,handleZoomToNormalPlayer:v}}const Xt=(0,De.Z)("div",{target:"ege8lhx0"})({},"label:DivVideoDetailContainer;"),$t=(0,De.Z)("div",{target:"ege8lhx1"})({height:0,width:"1px",position:"absolute",marginTop:"-84px"},"label:DivEmptyWrapper;"),ei=(0,De.Z)("div",{target:"ege8lhx2"})({display:"flex"},"label:DivContentContainer;"),ti=(0,De.Z)("div",{target:"ege8lhx3"})((({theme:e,isHideSideComponent:t,isPhoto:i})=>[t?null:(0,Re.YJ)({direction:e.direction,marginEnd:"24px"}),{maxWidth:i?"808px":void 0,flex:"1 1 808px"}]),"label:DivLeftContainer;"),ii=(0,De.Z)("div",{target:"ege8lhx4"})({padding:"16px 0",paddingTop:0},"label:DivAuthorContainer;"),oi=(0,De.Z)("div",{target:"ege8lhx5"})({width:"322px",flex:"0 0 322px"},"label:DivVideoList;"),ni=(0,De.Z)("p",{target:"ege8lhx6"})((({theme:e})=>(0,Re.GI)({theme:e,fontWeight:"bold",color:"TextPrimary"})),Re.wj,{fontSize:"18px",marginBottom:"15px",lineHeight:"24px"},"label:PVideoListTitle;"),ri=(0,De.Z)("div",{target:"ege8lhx7"})((({theme:{colors:e}})=>({width:"100%",height:"606px",background:e.BGPlaceholderDefault,position:"relative",overflow:"hidden",borderRadius:"4px",marginBottom:"24px"})),"label:DivVideoContentSkeleton;");var ai,li=i(32222),si=i.n(li),di=i(43348),ci=i(7084),ui=i(70630)}(ai||(ai={}));const v},pi=(0,De.Z)("div",{target:"ejx52ff0"})((({theme:{direction:e,colors:t,isDark:i}})=>[(0,Re.YJ)({direction:e,paddingStart:16,paddingEnd:8}),{height:40,background:i?t.BGTertiary2:t.BGCreation3,opacity:.88,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"}]),"label:DivTranscriptHeader;"),mi=(0,De.Z)("span",{target:"ejx52ff1"})]),"label:SpanHeadertext;"),hi=(0,De.Z)("ul",{target:"ejx52ff3"})((({theme:{colors:e},isShow:t})=>[{fontWeight:400,fontSize:"14px",listStyleType:"none",padding:"0 0 16px 0",marginBottom:24,marginTop:0,background:e.BGPlaceholderOpaque,display:t?"block":"none",maxHeight:432,overflow:"auto",position:"relative"}]),"label:UlTranscriptList;"),gi=(0,De.Z)("li",{target:"ejx52ff4"})((({theme:{direction:e,colors:t},isCurrent:i,isRTL:o})=>[{minHeight:38,padding:"8px 16px",display:"flex",cursor:"pointer",":hover":{backgroundColor:t.BGCreation3}},i?Object.assign({backgroundColor:t.BGCreation3,borderRight:o?`4px solid ${t.Primary}`:"",borderLeft:o?"":`4px solid ${t.Primary}`},(0,Re.YJ)({direction:e,paddingStart:"12px"})):{}]),"label:LiTranscriptItem;"),bi=(0,De.Z)("div",{target:"ejx52ff5"})((({theme:{direction:e,colors:t}})=>[(0,Re.YJ)({direction:e,marginEnd:16}),{color:t.TextPrimary}]),"label:DivTranscriptTime;"),xi=(0,De.Z)("div",{target:"ejx52ff6"})((({theme:{colors:e}})=>[{color:e.Primary2,wordWrap:"break-word",wordBreak:"break-word"}]),"label:DivTranscriptText;"),fi=(0,De.Z)("div",{target:"ejx52ff7"})((({theme:{colors:e}})=>[{height:1,backgroundColor:e.BGPlaceholderOpaque,marginBottom:24}]),"label:DivSplitLine;"),yi=(0,De.Z)("div",{target:"ejx52ff8"})({cursor:"pointer"},"label:DivCloseIconContainer;"),ki=(0,l.memo)((function({item:e,onSeek:t,isNarrow:i,isListShow:o}){const{id:a}=e,[{subtitleContent:s},d]=(0,r.b)(Se),c=(0,l.useRef)(0),u=(0,l.useRef)(!1),v=(0,l.useMemo)((()=>{const e=si()(s);return e[0].start>=1&&e.unshift({end:0,start:0,startStr:"00:00",text:""}),e}),[s]),[{currentTime:p}]=(0,r.b)(ci.M,{selecto},dependencies:[a]}),{isRTL:m}=(0,Dt.Y)(),h=(0,l.useRef)(null),g=(0,l.useCallback)((e=>{var i;t(e),i=e,Z.W.event("click_transcript_line",{time_clicked:i})}),[t]),b=(0,l.useCallback)((()=>{var e,t;e="click_transcript",t=0,Z.W.event("close_transcript_panel",{enter_method:e,is_pinned:t}),d.setIfShowSubtitle(!1)}),[d]),x=(0,l.useCallback)((e=>{var t,i,o,n,r,a,l,s;if(u.current)return;const d=null===(i=null===(t=null==h?void 0:h.current)||void 0===t?void 0:t.children)||void 0===i?void 0:i[e],c=null==d?void 0:d.offsetTop,v=null===(o=null==h?void 0:h.current)||void 0===o?void 0:o.scrollTop,p=null==d?void 0:d.clientHeight,m=c-v,g=m<432&&m>-p;if(e>2){const t=null===(a=null===(r=null===(n=null==h?void 0:h.current)||void 0===n?void 0:n.children)||void 0===r?void 0:r[e-2])||void 0===a?void 0:a.offsetTop;null===(l=null==h?void 0:h.current)||void 0===l||l.scrollTo({top:t,behavior:"smooth"})}else g||null===(s=null==h?void 0:h.current)||void 0===s||s.scrollTo({top:0,behavior:"smooth"})}),[h,u]),f=(0,l.useCallback)((()=>{u.current=!0}),[u]),y=(0,l.useCallback)}),[u]),k=(0,l.useCallback)((()=>{var e;let t=0;for(let i=v.length-1;i>=0;i--)if(v[i].start<=p||p>(null===(e=null==v?void 0:v[i-1])||void 0===e?void 0:e.end)&&Math.abs(v[i].start-p)<.001){t=i,c.current!==i&&(c.current=i,x(i));break}return v.map(((e,i)=>(0,n.jsxs)(gi,Object.assign({isCurrent:t===i,onClic),isRTL:m},{children:[(0,n.jsx)(bi,{children:e.startStr},void 0),(0,n.jsx)(xi,{children:e.text},void 0)]}),i)))}),[v,p,g,m,x]),w=(0,P.Q)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({style:{marginTop:i?"32px":0}},{children:[(0,n.jsxs)(pi,Object.assign({style:{cursor:"auto"}},{children:[(0,n.jsx)(ui.Z,{},void 0),(0,n.jsx)(mi,{children:w("asr_transcript_onpc_kebab_menu_ab_transcript_button")},void 0),(0,n.jsx)(yi,Object.assign({onClick:b},{children:(0,n.jsx)(di.Z,{height:12,width:12},void 0)}),void 0)]}),void 0),(0,n.jsx)(hi,Object.assign({isShow:o,ref:h,onMouseEnter:f,onMouseLeave:y},{children:k()}),void 0)]}),void 0),(0,n.jsx)(fi,{},void 0)]},void 0)})),wi=(0,De.Z)("div",{target:"e1y973ys0"})({display:"flex",width:"100%",flexWrap:"wrap"},"label:DivVideoCardSkeletonContainer;"),Ci=(0,De.Z)("div",{target:"e1y973ys1"}))),"label:DivCardH;"),_i=(0,De.Z)("div",{target:"e1y973ys2"})((({theme:{colors:e}})=>({width:"147px",height:"202px",marginBottom:"16px",background:e.BGPlaceholderDefault,borderRadius:"2px",marginRight:"14px"})),"label:DivCard;"),ji=(0,l.memo)((function(){return(0,n.jsxs)(wi,{children:[(0,n.jsx)(_i,{},void 0),(0,n.jsx)(_i,{},void 0),(0,n.jsx)(_i,{},void 0),(0,n.jsx)(_i,{},void 0),(0,n.jsx)(_i,{},void 0),(0,n.jsx)(_i,{},void 0)]},void 0)}));(0,l.memo)((function(){return(0,n.jsxs)(wi,{children:[(0,n.jsx)(Ci,{},void 0),(0,n.jsx)(Ci,{},void 0),(0,n.jsx)(Ci,{},void 0),(0,n.jsx)(Ci,{},void 0),(0,n.jsx)(Ci,{},void 0),(0,n.jsx)(Ci,{},void 0)]},void 0)}));var Ii=i(6156),Si=i(41716),Ti=i(17554),Li=i(89348),Mi=i(85881),Oi=i(48716),Ai=i(28505),Pi=i(94163),Vi=i(46055),Bi=i(10206),Di=i(10967),Ri=i(59025),Ei=i(9878),Wi=i(98729),Zi=i(9538),zi=i(94557),qi=i(87844),Fi=i(46500),Hi=i(25678),Ni=i(59754),Yi=i(58718),Ui=i(73382);const Gi=(0,De.Z)("div",{target:"e18g5nxw0"})((({smallSize:e=!1})=>({display:"inline-flex",alignItems:"start",justifyContent:"center",padding:e?"6px 12px":"6px 8px",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:"4px"})),"label:DivContainer;"),Ki=(0,De.Z)("div",{target:"e18g5nxw1"})({fontSize:"16px",width:"22px",height:"22px",display:"flex",alignItems:"center"},"label:DivIconContainer;"),Qi=(0,De.Z)(Ki,{target:"e18g5nxw2"}))),"label:StyledWarningIconContainer;"),Ji=(0,De.Z)(Ki,{target:"e18g5nxw3"})((({theme:{direction:e}})=>({textAlign:(0,Re.$K)(e,"start"),cursor:"pointer"})),"label:StyledArrowIconContainer;"),Xi=(0,De.Z)("div",{target:"e18g5nxw4"})((({theme:e,smallSize:t=!1})=>[(0,Re.GI)({theme:e,fontWeight:"semiBold",color:"ConstTextInverse"}),{fontSize:"14px",lineHeight:t?"18px":"22px",wordBreak:"break-word",verticalAlign:"text-top",textAlign:(0,Re.$K)(e.direction,"start")}]),"label:DivWarnInfoContent;"),$i=(0,l.memo)((({info:{text:e,url:t},smallSize:i=!1})=>{const{direction:o,colors:{ConstTextInverse:r}}=(0,Fe.u)(),a=(0,l.useMemo))),[r,o]),s=(0,l.useCallback)}),[t]);return(0,n.jsxs)(Gi,Object.assign({onClick:s,style:{cursor:t?"pointer":"unset"}},{children:[!i&&(0,n.jsx)(Qi,{children:(0,n.jsx)(Ui.Z,{fill:r},void 0)},void 0),(0,n.jsx)(Xi,Object.assign({smallSize:i},{children:e}),void 0),t&&(0,n.jsx)(Ji,{children:a},void 0)]}),void 0)}));var eo=i(26970),to=i(2337),io=i(94346),oo=i(76746),no=i(26912),ro=i(52546),ao=i(17387),lo=i(98102),so=i(82509),co=i(39085),uo=i(18644),vo=i(4146),po=i(20143),mo=i(55168),ho=i(78132),go=i(65573),bo=i(75582),xo=i(43051);const fo=(0,xo.ZP)({resolved:{},chunkName:()=>"animation",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(1050).then(i.bind(i,68368)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>68368}),yo=({likedIcon:e,unlikeIcon:t,isLiked:i})=>{const[o,r]=(0,l.useState)(!1),a=(0,l.useRef)(!1);(0,l.useEffect)}),[i]),(0,l.useEffect)((()=>{r(!i),a.current=!0}),[]);const s=(0,l.useCallback)((()=>{r(!1)}),[]);return i?(0,n.jsx)("div",{children:o?(0,n.jsx)(fo,{autoplay:!0,onComplete:s},void 0):e},void 0):t};var ko=i(61216),wo=i(73512),Co=(i(2468),i(93245),i(95028)),_o=i(36995);(0,ko.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),(0,ko.F4)({"0%":{opacity:0,transform:"translate3d(.5em, calc(1 * .2em), 0) rotate(calc(1 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(1 * 0), 0) rotate(calc(1 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(1 * -.2em), 0) rotate(calc(1 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(1 * -.4em), 0) rotate(calc(1 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, 1 * -.6em, 0) rotate(1 * 100deg)"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(1 * -.8em), 0) rotate(calc(1 * 120deg))"}}),(0,ko.F4)({"0%":{opacity:0,transform:"translate3d(.5em,calc(2 * .2em), 0) rotate(calc(2 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(2 * 0), 0) rotate(calc(2 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(2 * -.2em), 0) rotate(calc(2 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(2 * -.4em), 0) rotate(calc(2 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, calc(2 * -.6em), 0) rotate(calc(2 * 100deg))"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(2 * -.8em), 0) rotate(calc(2 * 120deg))"}}),(0,ko.F4)({"0%":{opacity:0,transform:"translate3d(.5em, calc(3 * .2em), 0) rotate(calc(3 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(3 * 0), 0) rotate(calc(3 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(3 * -.2em), 0) rotate(calc(3 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(3 * -.4em), 0) rotate(calc(3 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, calc(3 * -.6em), 0) rotate(calc(3 * 100deg))"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(3 * -.8em), 0) rotate(calc(3 * 120deg))"}});const jo=(0,De.Z)("div",{target:"ean6quk0"})((({theme:e})=>(0,Re.YJ)({direction:e.direction,end:"20px"})),{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:1,bottom:"8px"},"label:DivActionItemContainer;"),Io=((0,ko.F4)({"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.67)"},"100%":{transform:"scale(1)"}}),(0,De.Z)("div",{target:"ean6quk5"})((({theme:e})=>[(0,Re.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:"490px",overflowY:"auto","::-webkit-scrollbar-thumb":{background:e.colors.SDTertiary}}]),"label:DivShareWrapper;"));Io.defaultProps=Object.assign(Object.assign({},Io.defaultProps),{"data-e2e":"feed-share-group"});const So=(0,De.Z)(wo.Z,{target:"ean6quk12"})((({theme:{direction:e}})=>(0,Re.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:StyledIconFlag;"),To=(0,De.Z)("div",{target:"ean6quk13"})]),"label:DivEleWrapper;"),Lo=(0,De.Z)(ui.Z,{target:"ean6quk14"})]),"label:StyledTranscriptIcon;"),Mo=(0,De.Z)(Co.Z,{target:"ean6quk15"})(Object.assign({},(0,_o.s)()),"label:StyledEllipsisHorizontal;"),Oo=32,Ao="#fff",Po=(0,n.jsx)(mo.Z,{width:Oo,height:Oo},void 0),Vo=(0,n.jsx)(ho.Z,{width:Oo,height:Oo},void 0),Bo=(0,l.memo)((function(e){var t,i,o;const{itemId:s,style:d,onlyShowExtra:c=!1,onClickLike:u,onClickShare:v,onClickComment:p,isTTAMAds:m}=e,h=(0,P.Q)(),g=(0,N.YA)(),{isRTL:b}=(0,Dt.Y)(),[f,w]=(0,l.useState)(0),C=b?"rightBottom":"leftBottom",_=(0,l.useMemo)((()=>({offset:[b?20:-20,10*Math.min(f,10)]})),[b,f]),j=(0,l.useMemo)((()=>({maxWidth:"unset",filter:"drop-shadow(0px 2px 12px rgba(0, 0, 0, 0.12))"})),[]),{colors:I}=(0,Fe.u)(),S=(0,l.useMemo))),[I]),T=b?"right":"left",L=(0,l.useMemo)((()=>({offset:[b?20:-20]})),[b]),[M={},O]=(0,r.b)(y.A,{selector:e=>e[s],dependencies:[s]}),[{subtitleContent:A},V]=(0,r.b)(Se),{author:B="",id:D="",digged:R=!1,commentSetting:E=!1,subVideoMeta:W}=(0,x.m7)(M),z=(0,l.useMemo)((()=>3===(null==M?void 0:M.itemCommentStatus)||3===E),[E,null==M?void 0:M.itemCommentStatus]),q=(0,a.m)(Ge.z,{selecto},dependencies:[M]}),{uniqueId:F="",id:H="",isEmbedBanned:Y=!1}=(0,x.m7)(q),U=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((()=>{null==u||u(),O.postLikeVideo({id:s,enter_method:"click",play_mode:"video_detail"})}),[O,s,u]),modalConfig:{query:{enter_method:"click_like",group_id:s}}}),G=(0,Ii.fz)(zi.p),[K,Q]=(0,l.useState)(!1),[J,X]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(!1),[te,ie]=(0,l.useState)(!1),oe=(0,l.useRef)(0),ne=(0,l.useRef)(0),re=(0,l.useRef)(0),ae=(0,l.useRef)(0),{expanded:le}=(0,lo.c1)(),se=(0,k.kw)(M),de=(0,k.K$)(M),ce=(0,l.useCallback)((()=>{var e,t;$||(Q(!K),G.handleClickShare(Object.assign({author_id:null!==(e=null==q?void 0:q.id)&&void 0!==e?e:"",to_user_id:null!==(t=null==q?void 0:q.id)&&void 0!==t?t:"",group_id:s,play_mode:"video_detail",is_sub_only_video:W?1:0},de))),null==v||v()}),[$,v,K,G,null==q?void 0:q.id,s,W,de]),ue=(0,l.useCallback)((()=>{var e,t;G.handleSharePanelShow(Object.assign({group_id:s,to_user_id:null!==(e=null==q?void 0:q.id)&&void 0!==e?e:"",play_mode:"video_detail",share_option_type:le,poi_id:null===(t=null==M?void 0:M.poi)||void 0===t?void 0:t.id,is_sub_only_video:W?1:0},de)),window.clearTimeout(oe.current),window.setTimeout((()=>{Q(!0)}),100)}),[G,s,null==q?void 0:q.id,le,null===(t=null==M?void 0:M.poi)||void 0===t?void 0:t.id,W,de]),ve=(0,l.useCallback)((()=>{$||(window.clearTimeout(re.current),oe.current=window.setTimeout((()=>{Q(!1)}),300))}),[$]),pe=(0,l.useCallback)((()=>{var e;e={group_id:s},Z.W.event("kebab_menu_hover",e),window.clearTimeout(ne.current),ae.current=window.setTimeout((()=>{X(!0)}),100)}),[s]),me=(0,l.useCallback)((()=>{window.clearTimeout(ae.current),ne.current=window.setTimeout((()=>{X(!1)}),300)}),[]),he=(0,l.useCallback)((e=>{ee(e)}),[]),ge=(0,l.useCallback)((()=>{ie(!0)}),[ie]),be=(0,so.gR)(s),xe=(0,lo.JW)();(0,l.useEffect)((()=>{xe()}),[xe]);const fe=(0,co.Q)({item:M,play_mode:"video_detail",onShow:Zt.NS,useAd:m}),ye=(0,l.useMemo)((()=>(0,n.jsxs)(To,Object.assign({onMouseEnter:pe,onMouseLeave:me,onClick:fe},{children:[(0,n.jsx)(So,{width:16,height:15},void 0),h("Report")]}),void 0)),[pe,me,fe,h]),ke=(0,l.useCallback)((()=>{V.setIfShowSubtitle(!0),vi("click_transcript",0)}),[V]),we=(0,l.useMemo)((()=>(0,n.jsxs)(To,Object.assign({onMouseEnter:pe,onMouseLeave:me,onClick:ke},{children:[(0,n.jsx)(Lo,{},void 0),h("asr_transcript_onpc_kebab_menu_ab_transcript_button")]}),void 0)),[pe,me,ke,h]),Ce=(0,l.useCallback)((()=>(0,n.jsxs)(n.Fragment,{children:[(null==A?void 0:A.length)>0?we:null,ye]},void 0)),[A,we,ye]),_e=(0,l.useMemo)((()=>{var e;return Object.assign({group_id:s,to_user_id:H,author_id:H,play_mode:"video_detail",poi_id:null===(e=null==M?void 0:M.poi)||void 0===e?void 0:e.id,is_sub_only_video:W?1:0},de)}),[s,H,null===(i=null==M?void 0:M.poi)||void 0===i?void 0:i.id,W,de]),je=(0,l.useMemo)((()=>(0,n.jsx)(ro.Z,{width:Oo,height:Oo,fill:Ao},void 0)),[]),Ie=(0,l.useMemo)((()=>(0,n.jsx)(no.Z,{width:Oo,height:Oo,fill:Ao},void 0)),[]),Te=(0,l.useMemo)((()=>(0,n.jsx)(Mo,{width:Oo,height:Oo,fill:Ao},void 0)),[]),Le=(0,l.useMemo)((()=>(0,n.jsx)(ao.Z,{width:Oo,height:Oo,fill:Ao},void 0)),[]),Me=(0,l.useMemo)((()=>(0,n.jsx)(vo.Z,{width:Oo,height:Oo,fill:Ao},void 0)),[]),Oe=(0,l.useMemo)((()=>(0,n.jsx)(yo,{isLiked:R,likedIcon:je,unlikeIcon:Me},void 0)),[R,Me,je]),Ae=(0,l.useMemo)((()=>(0,n.jsx)(bo.Z,{isCollected:M.collected,collectedIcon:Po,uncollectedIcon:Vo,iconSize:42,isLightMode:!0},void 0)),[M.collected]),{stats:Pe,statsV2:Ve,id:Be}=(0,x.m7)(M),De=null!=Ve?Ve:Pe,Re=`https://www.tiktok.com${g(M)}`,Ee=(0,l.useMemo)((()=>(0,n.jsx)(Io,Object.assign({onMouseEnter:ue,onMouseLeave:ve},{children:(0,n.jsx)(uo.mB,{mode:1,videoId:D,uniqueId:F,url:Re,embedCode:be,enabled:M.shareEnabled,isEmbedBanned:Y||se,teaParams:_e,onPlatformCountChange:w,onOtherModalOpen:he,onSendMessagePanelOpen:ge},void 0)}),void 0)),[ue,ve,D,F,Re,be,M.shareEnabled,Y,_e,se,he,ge]),We=(0,l.useCallback)((()=>{ie(!1)}),[ie]),Ze=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((()=>{Zi.y.handleCommentClick(Object.assign(Object.assign({},_e),{action:"open"})),null==p||p()}),[p,_e]),modalConfig:{query:{enter_method:"click_comment",group_id:s}}}),ze=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)}),[O,s]),modalConfig:{query:{enter_method:"click_favorite",group_id:s}}}),{isDark:qe}=(0,Fe.u)(),He=qe?"black":"white";return M?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(jo,Object.assign({style:d},{children:[!c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(go.i,Object.assign({text:(0,x.BT)(null==De?void 0:De.diggCount),onClick:U,e2eTag:"like",normalText:!0},{children:Oe}),void 0),(0,n.jsx)(go.i,Object.assign({text:z?"0":(0,x.BT)(null==De?void 0:De.commentCount),onClick:Ze,e2eTag:"comment",normalText:!0},{children:Ie}),void 0),(0,n.jsx)(go.i,Object.assign({text:(0,x.BT)(Number(null!==(o=null==De?void 0:De.collectCount)&&void 0!==o?o:0)),onClick:ze,normalText:!0},{children:Ae}),void 0),(0,n.jsx)(po.u,Object.assign({destroyTooltipOnHide:!0,visible:K,placement:C,overlay:Ee,align:_,overlayStyle:j,overlayInnerStyle:S,tooltipTheme:He,zIndex:999},{children:(0,n.jsx)(go.i,Object.assign({text:(null==De?void 0:De.shareCount)?(0,x.BT)(null==De?void 0:De.shareCount):h("Share"),onMouseEnter:ue,onMouseLeave:ve,onClick:ce,e2eTag:"share",normalText:!0},{children:Le}),void 0)}),void 0)]},void 0),(0,n.jsx)(po.u,Object.assign({visible:J,placement:T,align:L,overlay:Ce(),overlayStyle:j,overlayInnerStyle:S,tooltipTheme:He,zIndex:999},{children:(0,n.jsx)(go.i,Object.assign({onMouseEnter:pe,onMouseLeave:me,e2eTag:"more-entrance"},{children:Te}),void 0)}),void 0)]}),void 0),te&&(0,n.jsx)(Ei.J,{visible:te,videoId:Be,onClose:We},void 0)]},void 0):(0,$e.G)(["item"])}));var Do=i(45347),Ro=i(36623),Eo=i(77933);const Wo=(0,l.memo)((e=>{const{style:t,icon:i,title:o,desc:r,canClickPropagation:a=!1,horizontal:s=!1}=e,d=(0,l.useCallback)}),[a]);return(0,n.jsx)(Eo.uc,Object.assign({onClick:d,style:t},{children:(0,n.jsxs)(Eo.N,Object.assign({horizontal:s},{children:[Boolean(i)&&(0,n.jsx)(Eo.Vz,{children:i},void 0),Boolean(o)&&(0,n.jsx)(Eo.u,{children:o},void 0),Boolean(r)&&(0,n.jsx)(Eo.vZ,{children:r},void 0)]}),void 0)}),void 0)}));var Zo=i(99074);const zo=(0,De.Z)("div",{target:"e16wy98b0"})({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:20},"label:DivM3MaskContainer;"),qo=(0,l.memo)((({id:e,smallSizeMask:t})=>{var i;const o=(0,P.Q)(),{colors:a}=(0,Fe.u)(),s=(0,r.q)(D.rE),{user:d}=null!==(i=(0,m.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},c=Boolean(d);(0,l.useEffect)((()=>{c||s.openModal({query:{enter_method:"click_navigation",enter_from:Z.W.commonParams.page_name,redirect_url:(0,R.AY)(),type:"loginm3"}}),Zo.W.handleCCMaskShow({group_id:e,scenario:c?"age_restriction":"logged_out"})}),[c,e,s]);const u=(0,l.useMemo)((()=>(0,n.jsx)(Do.Z,{fontSize:72,color:a.ConstTextInverse4},void 0)),[a.ConstTextInverse4]),v=(0,l.useCallback)((()=>{Zo.W.handleClickLogInCCMask({group_id:e}),s.openModal({query:{enter_method:"click_navigation",enter_from:Z.W.commonParams.page_name,redirect_url:(0,R.AY)(),type:"loginm3"}})}),[e,s]),p=o(c?"cc_webapp_age_video_details_title":"classifyV1AWeb_webAppDesktop_maskLayer_headerTitle"),h=o(c?"cc_webapp_age_video_details_body":"classifyV1AWeb_webAppDesktop_maskLayer_bodyDesc");return t?(0,n.jsx)(Wo,{icon:u,title:p,desc:h},void 0):(0,n.jsx)(zo,{children:(0,n.jsx)(Ro.a,{style:{backgroundColor:a.ConstBGInverseOpaque,alignItems:"center"},icon:u,showIconBackground:!1,playMode:4,title:p,desc:h,firstButtonText:c?void 0:o("classifyV1AWeb_webAppDesktop_maskLayer_button"),onClickFirstButton:c?void 0:v},void 0)},void 0)}));var Fo=i(65364),Ho=i(8098),No=i(59575),Yo=i(11092),Uo=i(837);const Go=(0,De.Z)("div",{target:"emehcf90"})({position:"absolute",width:"100%",height:"80%",left:0,top:0,borderRadius:"4px",display:"flex",justifyContent:"center",zIndex:"initial","&.mask-exit":{opacity:1},"&.mask-exit-active":{opacity:0,transition:"opacity 233ms cubic-bezier(0.25, 0, 0.25, 1)"}},"label:DivRelatedMask;"),Ko=(0,De.Z)("div",{target:"emehcf91"})((({index:e})=>({cursor:"pointer",margin:"0 auto",animation:`0.3s cubic-bezier(0.25, 0, 0.25, 1) ${.066*e}s backwards show-card`,"@keyframes show-card":{"0%":{transform:"scale(0.8)",opacity:"0"},"100%":{transform:"scale(1)",opacity:"1"}}})),"label:DivItemContainer;"),Qo=(0,De.Z)("div",{target:"emehcf92"})((({theme:e})=>({width:"100%",position:"relative",borderRadius:"2px",marginBottom:"8px",overflow:"hidden",boxSizing:"border-box",border:`1px solid ${e.colors.ConstLineInverse2}`})),"label:DivCoverContainer;"),Jo=(0,De.Z)("img",{target:"emehcf93"}))),"label:ImgCover;"),Xo=(0,De.Z)("div",{target:"emehcf95"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:DivPlayIcon;"),$o=(0,De.Z)("div",{target:"emehcf96"})((({theme:e})=>(0,Re.GI)({theme:e,fontWeight:"semiBold",color:"ConstTextInverse"})),(0,Re.FC)(2),{wordBreak:"break-word",fontSize:"16px",lineHeight:"24px",height:"48px"},"label:DivTitle;"),en=(0,De.Z)("div",{target:"emehcf97"})({position:"absolute",height:"90px",left:"0",bottom:"0",width:"100%",background:"linear-gradient(180deg, rgba(22, 24, 35, 0.0001) 2.92%, rgba(22, 24, 35, 0.5) 98.99%)"},"label:DivMask;"),tn=(0,De.Z)("div",{target:"emehcf98"})((({theme:e})=>({position:"absolute",height:"40px",left:0,right:0,bottom:0,background:"linear-gradient(180deg, rgba(22, 24, 35, 0.0001) 2.92%, rgba(22, 24, 35, 0.3) 98.99%)",color:e.colors.ConstTextInverse,fontSize:"13px",lineHeight:"17px",padding:"12px 8px 8px 8px",display:"flex",alignItems:"center"})),"label:DivPlayCount;"),on=(0,De.Z)(Uo.Z,{target:"emehcf99"})((({theme:e})=>(0,Re.YJ)({direction:e.direction,marginEnd:4})),"label:StyledPlay;"),n",rn=(0,De.Z)("div",{target:"emehcf910"})((({isFullScreen:e})=>({display:"flex",alignItems:"start",justifyContent:"center",flexWrap:"wrap",height:"348px",overflow:"hidden",margin:`${nn(e)} 54px 0 54px`,[`& > ${Ko}`]:{margin:"0 10px"}})),"label:DivRecommendListContainer;"),an=(0,De.Z)("div",{target:"emehcf911"})((({theme:e,right:t=!1,isFullScreen:i=!1})=>Object.assign(Object.assign({},(0,Re.YJ)({direction:e.direction,start:t?void 0:"0px",end:t?"0px":void 0})),{transform:"rtl"===e.direction?"rotateZ(180deg)":"",margin:t?`${nn(i)} 8px 0 24px`:`${nn(i)} 24px 0 8px`,position:"absolute",alignItems:"center",cursor:"pointer",color:e.colors.ConstTextInverse,height:"348px",display:"none",[`@media screen and (max-width: ${i?826:1460}px)`]:{display:"flex"}})),"label:DivArrow;");var ln,sn=i(67757)}(ln||(ln={}));const dn={0:{iconSize:40,cardWidth:220,cardHeight:292},1:{iconSize:48,cardWidth:260,cardHeight:345}},cn=(0,l.memo)((e=>{const{item:t,size:i,index:o=0}=e,{video:{cover:r,zoomCover:a},desc:s,stats:d,statsV2:c}=t,u=null!=c?c:d,v=dn[i],p=v.cardWidth,m=v.cardHeight,[h,g]=(0,l.useState)({width:p,animation:""});return(0,l.useEffect)((()=>{g((e=>Object.assign(Object.assign({},e),{animation:`0.3s cubic-bezier(0.25, 0, 0.25, 1) ${.066*o}s backwards show-card`}))),window.setTimeout}),300+66*o+1)}),[t.id,o]),(0,n.jsxs)(Ko,Object.assign({index:o,style:h,onClick:e.onClick},{children:[(0,n.jsxs)(Qo,Object.assign({style:{height:m}},{children:[(0,n.jsx)(Jo,{src:(null==a?void 0:a[480])||r},void 0),(0,n.jsx)(Xo,{children:(0,n.jsx)(sn.Z,{width:v.iconSize,height:v.iconSize,fill:"#fff"},void 0)},void 0),(0,n.jsx)(en,{},void 0),(0,n.jsxs)(tn,{children:[(0,n.jsx)(on,{width:20,height:20,fill:"#fff"},void 0),(0,x.BT)(null==u?void 0:u.playCount)]},void 0)]}),void 0),(0,n.jsx)($o,{children:s},void 0)]}),void 0)})),un=(0,l.memo)((e=>{const{itemList:t,isFullScreen:i}=e,o=(0,l.useCallback)}),[]);return(0,n.jsx)(rn,Object.assign({isFullScreen:i},{children:t.map(((e,t)=>(0,n.jsx)(cn,{index:t,onClick:o(e.id),item:e,size:0},t)))}),void 0)})),vn=(0,l.memo)((({showRelated:e,onCloseRelatedMask:t,isFullScreen:i})=>{const o=(0,l.useRef)({}),s=(0,l.useRef)({index:-1,enterMethod:"rolling_video_card"}),{recommendItemList:d,handleVideoCardClick:c}=(()=>{const[{currentIndex:e,itemListKey:t},i]=(0,r.b)(Se),o=(0,a.m)(v.h,{selector:i=>{const o=i[null!=t?t:""];return o&&o.browserList.length>1?o.browserList.slice(e+1,3+e+1):[]},dependencies:[e]}),n=(0,a.m)(y.A,{selecto),dependencies:[o]}),{abTestVersion:s,language:d,user:c}=(0,x.m7)((0,m.Lh)((()=>["abTestVersion","language","user"]),[]));return{recommendItemList:n,handleVideoCardClick:(0,l.useCallback)((({index:t,enterMethod:o})=>{i.handleSwitchVideo({newIndex:e+t+1,abTestVersion:s,language:d,user:c,enterMethod:o})}),[s,d,c,e])}})(),[u,p]=(0,l.useState)(d);(0,l.useEffect)((()=>{d.forEach(((e,t)=>o.current[e.id]=t)),p(d)}),[d]);const h=(0,qt.fB)((()=>{const e=window.innerWidth;(e>1460||i&&e>826)&&p(d)}),[d],500);(0,l.useEffect)((()=>(window.addEventListener("resize",h),()=>window.removeEventListener("resize",h))),[h]);const g=(0,l.useCallback)((()=>{p((e=>[e[1],e[2],e[0]]))}),[]),b=(0,l.useCallback)((()=>{p((e=>[e[2],e[0],e[1]]))}),[]),f=(0,l.useCallback)((e=>{s.current.index="string"==typeof e?o.current[e]:e,t()}),[]),k=(0,l.useCallback)((()=>{s.current.index>=0&&(c(s.current),s.current={index:-1,enterMethod:"rolling_video_card"})}),[d]);return(0,n.jsx)(Ho.Z,Object.assign({in:e,onExited:k,unmountOnExit:!0,timeout:223,classNames:"mask"},{children:(0,n.jsxs)(Go,{children:[(0,n.jsx)(an,Object.assign({isFullScreen:i,onClick:g},{children:(0,n.jsx)(No.Z,{fontSize:32},void 0)}),void 0),(0,n.jsx)(un,{isFullScreen:i,onVideoCardClick:f,itemList:u},void 0),(0,n.jsx)(an,Object.assign({isFullScreen:i,right:!0,onClick:b},{children:(0,n.jsx)(Yo.Z,{fontSize:32},void 0)}),void 0)]},void 0)}),void 0)}));var pn=i(92639),mn=i(11372),hn=i(51553),gn=i(44233),bn=i(93697),xn=i(74360);const fn={id:"arrow_circle-1f3a09d0",use:"arrow_circle-1f3a09d0-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="arrow_circle-1f3a09d0"><path fill="white" fill-rule="evenodd" d="M10.084 4.18c4.263-1.142 8.659 1.405 9.81 5.703 1.152 4.298-1.381 8.701-5.644 9.844-4.102 1.099-8.327-1.218-9.666-5.224a.525.525 0 0 0-.627-.35l-.966.26a.482.482 0 0 0-.342.608c1.625 5.065 6.94 8.025 12.119 6.637 5.339-1.43 8.493-6.938 7.058-12.293-1.435-5.355-6.92-8.548-12.26-7.117A9.925 9.925 0 0 0 4.39 5.617l-.4-2.766a.5.5 0 0 0-.566-.423l-.99.143a.5.5 0 0 0-.423.566l.806 5.58a1 1 0 0 0 1.17.84l5.38-.984a.5.5 0 0 0 .402-.582l-.18-.984a.5.5 0 0 0-.581-.401l-3.322.607a7.936 7.936 0 0 1 4.398-3.033Z" clip-rule="evenodd" /></symbol>'};function yn(e){const t=(0,l.useContext)(yt.e);return(0,l.useLayoutEffect)((()=>(t.add(fn),()=>{t.remove("arrow_circle-1f3a09d0")})),[]),(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,n.jsx)("use",{xlinkHref:"#arrow_circle-1f3a09d0"},void 0)}),void 0)}const kn=(0,De.Z)("div",{target:"e123m2eu0"})({width:"100%",position:"absolute",bottom:"0"},"label:DivSeekBarContainer;"),wn=(0,De.Z)("div",{target:"e123m2eu1"})((({theme:e})=>[(0,Re.GI)({theme:e,typography:"P3",fontFamily:"TikTokFont",color:"TextTertiary"}),{maxWidth:"64px",marginInlineStart:"12px",fontSize:"14px",lineHeight:"20px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums"}]),"label:DivSeekBarTimeContainer;"),Cn=(0,De.Z)("div",{target:"e123m2eu2"})({height:"4px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",bottom:"0",cursor:"pointer"},"label:DivSeekBarProgress;"),_n=(0,De.Z)("div",{target:"e123m2eu3"})((({theme:{colors:e,direction:t}})=>({height:"4px",width:"100%",backgroundColor:e.Primary,position:"absolute",bottom:"0",cursor:"pointer",borderBottomLeftRadius:"rtl"===t?"0":"4px",borderBottomRightRadius:"rtl"===t?"4px":"0",transformOrigin:"rtl"===t?"right":"left"})),"label:DivSeekBar;"),jn=(0,De.Z)("div",{target:"e123m2eu4"}))),(({theme:{direction:e}})=>({display:"none",width:"18px",height:"18px",position:"absolute",zIndex:10,bottom:0,transform:`translate(${"rtl"===e?"50%":"-50%"}, 6px)`,cursor:"pointer"})),"label:DivSeekBarCircleWrapper;"),In=(0,De.Z)("div",{target:"e123m2eu5"})((({theme:{direction:e,colors:t}})=>[(0,Re.YJ)({direction:e,start:"3px"}),{width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",zIndex:10,bottom:"3px",boxShadow:`0px 0px 3px ${t.TextPrimary}`}]),"label:DivSeekBarCircle;"),Sn=(0,De.Z)("div",{target:"e123m2eu6"})((({reactive:e})=>({width:"100%",position:"absolute",zIndex:1,userSelect:"none",height:"100%",opacity:1,bottom:0,cursor:"initial",display:"flex",flexDirection:"column",background:e?"":"#000",borderRadius:"4px",[`:hover ${jn}`]:{display:e?"block":""},[`:hover ${_n}, :hover ${Cn}`]:{height:e?"6px":""}})),"label:DivVideoControlContainer;"),Tn=(0,De.Z)("div",{target:"e123m2eu7"})((({active:e})=>[{position:"absolute",width:"100%",display:"flex",alignItems:"center",paddingInlineStart:"16px",bottom:"22px",opacity:e?"1":"0",transition:"all .3s ease"}]),"label:DivControlButtonWrapper;"),Ln=(0,De.Z)("div",{target:"e123m2eu8"})((({theme:{direction:e},active:t,showActionBar:i})=>[{position:"absolute",cursor:"pointer",bottom:"20px",display:"flex",flexDirection:"column",alignItems:"center",opacity:t?"1":"0",transition:"opacity .5s"},(0,Re.YJ)({direction:e,start:"unset",end:i?"72px":"16px"})]),"label:DivVoiceControlContainer;"),Mn=(0,De.Z)("div",{target:"e123m2eu9"})({opacity:1,width:"40px",height:"24px",display:"flex",justifyContent:"center",transition:"opacity .3s"},"label:DivMuteIconContainer;"),On=(0,De.Z)("div",{target:"e123m2eu10"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",cursor:"pointer"},"label:DivPlayIconContainer;"),An=(0,De.Z)("div",{target:"e123m2eu11"})((({showEnded:e})=>({width:"100%",height:"100%",position:"absolute",background:"rgba(0, 0, 0, 0.5)",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 0.8",zIndex:2,opacity:e?1:0,":hover":{opacity:1}})),"label:DivMiniControlContainer;"),Pn=(0,De.Z)("div",{target:"e123m2eu12"})((({theme:{direction:e}})=>Object.assign(Object.assign({},(0,Re.YJ)({direction:e,start:"12px"})),{position:"absolute",top:"12px",cursor:"pointer"})),"label:DivZoomBtn;"),Vn=(0,De.Z)("div",{target:"e123m2eu13"})((({theme:{direction:e}})=>Object.assign(Object.assign({},(0,Re.YJ)({direction:e,end:"12px"})),{position:"absolute",top:"12px",cursor:"pointer"})),"label:DivCloseBtn;"),Bn=(0,De.Z)("div",{target:"e123m2eu14"})({display:"flex",justifyContent:"space-between",height:"40px",width:"168px"},"label:DivSwitchContainer;"),Dn=(0,De.Z)("div",{target:"e123m2eu15"})((({isRtl:e,center:t})=>({cursor:"pointer",display:"flex",alignItems:"center",width:"40px",transform:e?"rotateZ(180deg)":"",justifyContent:t?"center":""})),"label:DivAction;"),Rn=(0,De.Z)("div",{target:"e123m2eu16"})((({isRtl:e})=>({cursor:"pointer",transform:e?"":"rotateZ(180deg)",display:"flex",alignItems:"center",width:"40px"})),"label:DivRight;"),En={width:24,height:24,fill:"#fff"},Wn=(0,l.memo)((function(e){const t=(0,l.useRef)(null),i=(0,l.useRef)(null),o=(0,l.useRef)(null),r=(0,l.useRef)(null),[a,s]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),[u,v]=(0,l.useState)(!1),{direction:p}=(0,Fe.u)(),m=(0,l.useRef)(0),h=(0,l.useRef)(null),{videoId:g,pause:b=!1,seek:x,progressReportCallback:f,progressPreviewReportCallback:y,onDoubleClick:k,onTogglePlay:w,onReplay:C,noneActionBar:_=!1,ended:j=!1,itemMute:I=!1}=e,{bindDrag:S,seek:T,duration:L,videoPercent:M,currentTime:O}=(0,bn.z)({direction:p,progressRef:i,videoId:g,circleRef:o,barRef:r,initialPercent:0,draggingStateCb:s,draggingPercentCb:x,progressReportCallback:f}),{mute:A,setMute:P}=(0,V.s_)({playMode:4,itemMute:I}),[B,D]=(0,l.useState)(!1),R=(0,l.useCallback)}),[A,P]),E=(0,l.useMemo)((()=>j?(0,n.jsx)(yn,Object.assign({},En),void 0):b?(0,n.jsx)(sn.Z,Object.assign({},En),void 0):(0,n.jsx)(mn.Z,Object.assign({},En),void 0)),[b,j]),W=(0,l.useMemo)((()=>A?(0,n.jsx)(hn.Z,Object.assign({},En),void 0):(0,n.jsx)(gn.Z,Object.assign({},En),void 0)),[A]),Z=(0,l.useCallback)((()=>{clearTimeout(m.current),c(!0)}),[]),z=(0,l.useCallback)((()=>{m.current=window.setTimeout((()=>{c(!1)}),500)}),[]),q=(0,l.useCallback)((()=>{v(!0)}),[]),F=(0,l.useCallback)((()=>{v(!1)}),[]);(0,l.useEffect)((()=>{y()}),[y]);const H=(0,Et.D)((()=>({onClick:w,onDoubleClick:k})),[w,k]),N=(0,l.useCallback)((e=>{(0,Zt.UW)(e),j?C():w(e)}),[j,C,w]),Y=(0,l.useMemo)((()=>j?{}:{onClick:H,onMouseDown:Zt.UW}),[j,b]),U="ltr"===p?{left:`calc(${100*M}%)`}:{right:`calc(${100*M}%)`},G=d||a,K=d||a||A||B;return(0,n.jsxs)(Sn,Object.assign({reactive:!j,ref:h,onMouseEnter:Z,onMouseLeave:z},Y,{children:[(0,n.jsx)(pn.ZP,Object.assign({in:G,timeout:500,nodeRef:h},{children:(0,n.jsxs)(Tn,Object.assign({active:G||j},{children:[(0,n.jsx)(On,Object.assign({onClick:N},{children:E}),void 0),(0,n.jsx)(wn,{children:"ltr"===p?`${(0,Q.xo)(O)}/${(0,Q.xo)(L)}`:`${(0,Q.xo)(L)}/${(0,Q.xo)(O)}`},void 0)]}),void 0)}),void 0),(0,n.jsx)(pn.ZP,Object.assign({in:K,timeout:500,nodeRef:h},{children:(0,n.jsxs)(Ln,Object.assign({showActionBar:!_,active:K,onMouseEnter:q,onMouseLeave:F,onMouseDown:Zt.UW},{children:[!I&&(B||u&&!a)?(0,n.jsx)(xn.y,{isStyleV2:!0,setVolumeDragging:D},void 0):null,(0,n.jsx)(Mn,Object.assign({mute:A,onClick:R},{children:W}),void 0)]}),void 0)}),void 0),(0,n.jsxs)(kn,Object.assign({ref:t},{children:[(0,n.jsx)(Cn,{ref:i,onClick:T,onMouseDown:S},void 0),(0,n.jsx)(jn,Object.assign({ref:o,style:U,onMouseDown:S},{children:(0,n.jsx)(In,{},void 0)}),void 0),(0,n.jsx)(_n,{ref:r,style:{width:100*M+"%"},onClick:T,onMouseDown:S},void 0)]}),void 0)]}),void 0)}));var Zn=i(83791),zn=i(28972);const qn={id:"player_zoom-9498b120",use:"player_zoom-9498b120-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="player_zoom-9498b120"><path fill="white" fill-rule="evenodd" d="M4.5 4H18a.5.5 0 0 1 .5.5v6a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6A2.5 2.5 0 0 0 18 2H4.5A2.5 2.5 0 0 0 2 4.5V18a2.5 2.5 0 0 0 2.5 2.5h6a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-6A.5.5 0 0 1 4 18V4.5a.5.5 0 0 1 .5-.5Z" clip-rule="evenodd" /><path fill="white" d="M13 15a2 2 0 0 1 2-2h5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5Z" /><path fill="white" fill-rule="evenodd" d="M6.5 11.5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-2a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1Z" clip-rule="evenodd" /><path fill="white" fill-rule="evenodd" d="M11.51 11.51a1 1 0 0 1-1.414 0L6.56 7.975A1 1 0 0 1 7.975 6.56l3.535 3.535a1 1 0 0 1 0 1.414Z" clip-rule="evenodd" /></symbol>'};function Fn(e){const t=(0,l.useContext)(yt.e);return(0,l.useLayoutEffect)((()=>(t.add(qn),()=>{t.remove("player_zoom-9498b120")})),[]),(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,n.jsx)("use",{xlinkHref:"#player_zoom-9498b120"},void 0)}),void 0)}const Hn={id:"prev_icon-3a3cce08",use:"prev_icon-3a3cce08-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="prev_icon-3a3cce08"><g fill="white" filter="url(#prev_icon-3a3cce08_a)"><path fill-rule="evenodd" d="M27.333 7.092c0-1.369-1.426-2.211-2.542-1.5l-13.986 8.907c-1.073.684-1.073 2.318 0 3.002l13.986 8.908c1.116.71 2.542-.132 2.542-1.5V7.091Z" clip-rule="evenodd" /><path d="M4.667 4.75c0-.414.298-.75.666-.75H8c.368 0 .667.336.667.75v22.5c0 .414-.299.75-.667.75H5.333c-.368 0-.666-.336-.666-.75V4.75Z" /></g><defs><filter id="prev_icon-3a3cce08_a" width="34" height="34" x="-1" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation=".5"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_21350_134746"></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow_21350_134746" result="shape"></feBlend></filter></defs></symbol>'};function Nn(e){const t=(0,l.useContext)(yt.e);return(0,l.useLayoutEffect)((()=>(t.add(Hn),()=>{t.remove("prev_icon-3a3cce08")})),[]),(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,n.jsx)("use",{xlinkHref:"#prev_icon-3a3cce08"},void 0)}),void 0)}const Yn={width:40,height:40,fill:"#fff"},Un=(0,l.memo)((e=>{const{currentIndex:t,paused:i,hidePlay:o,onTogglePlayer:r,ended:a,onReplay:s}=e,d=(0,l.useMemo))),[i,a]),c=(0,l.useCallback)((()=>{o||(a?s():r())}),[r,s,o,a]),{isRTL:u}=(0,Dt.Y)();return(0,n.jsxs)(An,Object.assign({showEnded:a,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:[(0,n.jsx)(Pn,Object.assign({onClick:e.onGoToNormalPlayer},{children:(0,n.jsx)(Fn,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(Vn,Object.assign({onClick:e.onClose},{children:(0,n.jsx)(zn.Z,{width:24,height:24,fill:"#fff"},void 0)}),void 0),(0,n.jsxs)(Bn,{children:[(0,n.jsx)(Dn,Object.assign({isRtl:u,onClick:e.onPrev},{children:Boolean(t)&&(0,n.jsx)(Nn,{width:32,height:32},void 0)}),void 0),(0,n.jsx)(Dn,Object.assign({center:!0,onClick:c},{children:!o&&d}),void 0),(0,n.jsx)(Rn,Object.assign({isRtl:u,onClick:e.onNext},{children:(0,n.jsx)(Nn,{width:32,height:32},void 0)}),void 0)]},void 0)]}),void 0)}));var Gn=i(17474),Kn=i(51136),Qn=i(40362);const Jn=(0,l.memo)((({videoPlayerRef:e,currentIndex:t,id:i,listLength:o,onNext:s,onPrev:d,smallSizeMask:c,showSensitiveMask:u})=>{const v=(0,l.useRef)(-1),p=(0,l.useRef)(void 0),h=(0,l.useRef)(-1),g=(0,l.useRef)(0),[b,f]=(0,l.useState)(!1),k=(0,P.Q)(),w=t<o-1;(0,l.useEffect)((()=>{f(!0)}),[]);const C=(0,a.m)(y.A,{selector:e=>e[i],dependencies:[i]}),{user:_}=(0,x.m7)((0,m.Lh)((()=>["user"]),[])),{showVideoMask:j,maskType:I,videoMaskTitle:S,videoMaskDesc:T,icon:L,videoMaskFirstButtonText:M,videoMaskSecondButtonText:O}=(0,Gn.g)({playMode:4,item:null!=C?C:{},isLogin:Boolean(_),smallSizeIcon:c}),[{photoSensitiveVideosSetting:A,hideMaskTempVideoId:V},B]=(0,r.b)(Kn.P),D=j&&V!==i;(0,l.useEffect)}),[D]);const R=(0,l.useCallback)}),[]),[E,W]=(0,r.b)(K.f,{selector:e=>{var t;return Number(null===(t=e.currentVideo)||void 0===t?void 0:t.index)},dependencies:[]}),Z=(0,l.useRef)(!1);(0,l.useEffect)((()=>{var o,n;t!==v.current&&(-1!==v.current&&(B.setHideMaskTempVideoId(""),b&&f(!1),Z.current=!1),R(),void 0===A&&"photo_sensitive"===p.current&&B.setSkipPhotoSensitive({skip:!1,hasLogin:Boolean(_)}),j?("photo_sensitive_denied"===I?Zo.W.handleShowPhotosensitiveRemoved({group_id:i}):Zo.W.handleShowMaskLayer({scenario:"general_sensitive"===I?"general":"photosensitive",group_id:i}),h.current=window.setInterval}),50)):null===(n=null===(o=e.current)||void 0===o?void 0:o.play)||void 0===n||n.call(o),v.current=t,p.current=I)}),[j,D,e,t,I,B,A,R,b,V,i,W,_]);const z=(0,l.useCallback)((e=>{if((0,Zt.NS)(e),"general_sensitive"===I){if(Z.current)return;w?s():o>1&&d(),Zo.W.handleMaskLayerClickSkip({scenario:"general",group_id:i}),Qn.h.open({content:k("photosensitive_skepped_toast"),duration:3,widthType:"half"}),Z.current=!0}else B.setSkipPhotoSensitive({skip:!1,hasLogin:Boolean(_)}),R(),Zo.W.handleMaskLayerClickWatch({scenario:"photosensitive",group_id:i})}),[I,w,o,k,s,d,B,R,i,_]),q=(0,l.useCallback)((e=>{if((0,Zt.NS)(e),"general_sensitive"===I)B.setHideMaskTempVideoId(i),R(),Zo.W.handleMaskLayerClickWatch({scenario:"general",group_id:i});else{if(Z.current)return;w?s():1===o?(null==_||_.uid,null==C||C.authorId):d(),B.setSkipPhotoSensitive({skip:!0,hasLogin:Boolean(_)}),Zo.W.handleMaskLayerClickSkip({scenario:"photosensitive",group_id:i}),Qn.h.open({content:k("photosensitive_skepped_toast"),duration:3,widthType:"half"}),Z.current=!0}}),[I,B,i,R,w,k,s,o,null==C?void 0:C.authorId,d,_]);return D?c?(0,n.jsx)(Wo,{icon:L,title:S,desc:T},void 0):(0,n.jsx)(Ro.a,{playMode:4,icon:L,title:S,desc:T,firstButtonText:M,secondButtonText:O,onClickFirstButton:z,onClickSecondButton:q},void 0):null}));var Xn=i(19341);const $n=(0,De.Z)("div",{target:"eqrezik0"})({position:"absolute",width:"100%",height:"100%",left:0,top:0,overflow:"hidden",borderRadius:"4px"},"label:DivBlurBackgroundWrapper;"),er=(0,De.Z)(Xn.y,{target:"eqrezik1"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",transform:"scale(11)",opacity:"0.3",left:"50%",top:"50%"},"label:StyledVideoBlurBackground;"),tr=(0,De.Z)("span",{target:"eqrezik2"})((({theme:{direction:e,isDark:t}})=>({["ltr"===e?"right":"left"]:"22px",position:"absolute",bottom:"10px",color:t?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.48)"})),"label:SpanExpandIcon;"),ir=(0,De.Z)("div",{target:"eqrezik3"})({borderBottom:"none"},"label:DivVideoInfoContainer;"),or=(0,De.Z)("div",{target:"eqrezik4"})({width:"100%",position:"relative"},"label:DivPlayerContainer;"),nr=(0,De.Z)(sn.Z,{target:"eqrezik5"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:StyledPlayIcon;"),rr=(0,De.Z)("div",{target:"eqrezik6"})({position:"relative",width:"100%",height:"100%",cursor:"pointer",borderRadius:"4px",overflow:"hidden","& .xgplayer-container":{width:"100%!important",height:"100%!important"}},"label:DivVideoWrapper;"),ar=(0,De.Z)("div",{target:"eqrezik7"})((({theme:{colors:e}})=>({width:"100%",height:"606px",background:e.ConstBGInverse,position:"relative",borderRadius:"4px",borderBottomRightRadius:0,borderBottomLeftRadius:0,"@keyframes show-mini-player":{"0%":{transform:"scale(0.93)",opacity:0},"100%":{transform:"scale(1)",opacity:1}},"@keyframes hide-mini-player":{"50%":{transform:"scale(1)",opacity:1},"100%":{transform:"scale(0.93)",opacity:0}}})),"label:DivVideoContainer;"),lr=(0,De.Z)("div",{target:"eqrezik8"})({width:"40px",position:"absolute",bottom:"85px",right:"20px"},"label:DivActionBarWrapper;"),sr=(0,De.Z)("div",{target:"eqrezik9"})((({smallSize:e=!1})=>({position:"absolute",bottom:e?"12px":"70px",left:e?"12px":"20px",right:e?"12px":"110px"})),"label:DivWarnInfoPosition;"),dr=(0,De.Z)("div",{target:"eqrezik10"})({position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#000000",borderRadius:"4px"},"label:DivLoadingMask;"),cr=(0,De.Z)("img",{target:"eqrezik11"})((({smallSize:e=!1})=>({width:e?"112px":"176px",height:e?"112px":"176px"})),"label:ImgWrapper;"),ur="width 0.333s cubic-bezier(0.33, 1, 0.68, 1), height 0.333s cubic-bezier(0.33, 1, 0.68, 1)",vr={transition:ur,"& video":{transition:ur}},pr=(0,De.Z)("h1",{target:"eqrezik12"})({marginBottom:"12px",fontWeight:"700",fontSize:"22px",lineHeight:"26px"},"label:H1PhotoTitle;"),mr=(0,De.Z)("div",{target:"eqrezik13"})({position:"absolute",left:0,width:"100%",top:0,height:"100%",background:"#000000",borderRadius:"4px"},"label:DivMaskBackground;"),hr=(0,De.Z)(bt.Ci,{target:"eqrezik15"})({marginLeft:0,marginRight:0,borderTopLeftRadius:0,borderTopRightRadius:0},"label:StyledDetailContentWrapper;");var gr=i(20565),br=i(30982),xr=i(21463);const fr=(0,xo.ZP)({resolved:{},chunkName:()=>"seo-expended-section",isRea},importAsyn),requireAsy},requireSy},resolv3}),yr={width:"100%",position:"absolute"},kr={borderRadius:"4px",zIndex:"0"},wr=(0,l.forwardRef)(((e,t)=>{var i,o;const{item:s,currentIndex:d,totalLength:c,teaParams:u,onScrollToComment:v,videoChangeMethodRef:p,authorComponent:g}=e,f=null!==(i=null==s?void 0:s.id)&&void 0!==i?i:"",k=(0,l.useMemo)((()=>{var e;const t=null!==(e=null==s?void 0:s.suggestedWords)&&void 0!==e?e:[];return t.length>0?t[0]:""}),[null==s?void 0:s.suggestedWords]),w=null==s?void 0:s.isContentClassified,{video:_,itemMute:j=!1,warnInfo:I,downloadSetting:S=0,authorPrivate:T=!1,author:L="",authorId:M="",subVideoMeta:O,event:A,ad_info:B}=(0,x.m7)(s),{playAddr:R="",width:E=1,height:W=1,duration:Z,bitrateInfo:z,volumeInfo:q,bitrate:F,originCover:H}=(0,x.m7)(_),N=(0,r.q)(y.A),Y=(0,b.HX)(),U=!!B,G=(0,P.Q)(),Q=gr.V;w||Q();const[J,X]=(0,l.useState)(Y?0:1),$=0===J,ee=2===J,[te,ie]=(0,l.useState)(!0),oe=(0,xr.D)(),ne=(0,l.useRef)(null),re=(0,l.useRef)(null),ae=(0,l.useRef)(null),le=(0,l.useRef)(!1),se=(0,l.useRef)(!1),de=(0,l.useRef)(!1),[ce,ue]=(0,l.useState)({}),{isVideoPlayerOptimization:ve,isVideoDetailExperiment:pe}=(0,C.iA)(),me=(0,l.useMemo)((()=>{if((null==A?void 0:A.event_id)&&A.event_start_time)return{eventId:A.event_id,eventStartTime:Number(A.event_start_time),authorId:M,groupId:f}}),[A]),he=(0,l.useCallback)(((e="click",t)=>{N.postLikeVideo(Object.assign({id:f,enter_method:e,media_type:t},u))}),[N,f,u]),ge=(0,Ne.W)({actionWhenUserLoggedIn:he,modalConfig:{query:{enter_method:"click_like",groupId:f}}}),be=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((e=>{const{clientX:t,clientY:i}=e;new Rt.B(t,i).emit(),N.postLikeVideo({id:f,forceLike:!0,enter_method:"double_tap"})}),[f,N]),modalConfig:{query:{enter_method:"click_like",group_id:f}}}),{handleFullScreen:xe,handleExitFullscreen:fe,fullscreen:ye,playMode:ke,playModeForTea:we,containerStyle:Ce}=(0,Yt.p0)({fullscreenRef:re,groupId:f,authorId:M,originalPlayMode:4,originalPlayModeForTea:"video_detail",videoPlayerRef:ae}),{direction:_e}=(0,Fe.u)(),je=(0,l.useMemo)((()=>Object.assign(Object.assign({},(0,Re.YJ)({direction:_e,end:"22px",start:"unset"})),{zIndex:1,top:ye?"":"236px",transform:"unset",position:"absolute",marginTop:"-68px"})),[ye,_e]),Ie=(0,l.useRef)(-1),{muteOrPlayAnimation:Te}=(0,Nt.T)({animationTimerRef:Ie});(0,Nt.C)({pause:$,isActive:le.current,animationTimerRef:Ie});const{seekingTips:Le}=(()=>{const{seekType:e}=(0,a.m)(Se,{selecto),dependencies:[]});return{seekingTips:(0,Ft.P)(e)}})(),Me=(E/W||1)>=1,{handleCloseMiniVideo:Oe,miniVideoVisible:Ae,videoContainerStyle:Pe,handleZoomToNormalPlayer:Ve}=Jt({videoContainerRef:ne,isHorizontal:Me,groupId:f,authorId:M,isPlayEndedNow:ee}),{handleNextVideo:Be,handlePrevVideo:De,handleTogglePlay:Ee,handleToggleMute:We,handleLinkClick:Ze,handleVideoClick:ze,handleVideoError:qe,handleVideoPlay:He,handleSeek:Ye,handleTogglePlayWithoutReport:Ue,handleVideoEnd:Ge,handleReplay:Ke,handleSeekBySeekbar:Qe,autoReplay:Je}=function({playAddr:e,pause:t,groupId:i,authorId:o="",itemMute:n=!1,animationTimerRef:s,playModeForTea:d,playMode:c,isVideoPlayerOptimization:u,shouldShowPauseAnim:v,videoChangeMethodRef:p,videoPlayerRef:h,playKeyboardDisable:g,ended:f,handleFullScreen:k,handleLikeClick:w,setPlayStatus:_}){const j=(({groupId:e,authorId:t,playModeForTea:i})=>(0,l.useMemo))),[t,e,i]))({groupId:i,authorId:o,playModeForTea:d}),{handleOpenMuteAnimation:I}=(0,Nt.T)({animationTimerRef:s}),[{currentIndex:S},T]=(0,r.b)(Se),{isAutoScroll:L}=(0,a.m)(K.f),{hasLogin:M}=(0,Yt.pu)(),{isRTL:O}=(0,Dt.Y)(),{mute:A,setMute:P}=(0,V.s_)({playMode:c,itemMute:n}),B=(0,r.q)(y.A),R=(0,r.q)(D.rE),E=(0,l.useCallback)((({click_section:e,enter_method:t})=>()=>{P(!A,"keydown")&&(u&&I(!A),u&&Ht.O.handleVideoControlChange(Object.assign(Object.assign({},j),{click_section:e,change_params:A?"unmute":"mute",enter_method:t})))}),[I,A,P,j,u]),W=(0,l.useCallback)((({click_section:e,enter_method:i})=>()=>{var o,n,r,a;t?null===(n=null===(o=h.current)||void 0===o?void 0:o.play)||void 0===n||n.call(o):null===(a=null===(r=h.current)||void 0===r?void 0:r.pause)||void 0===a||a.call(r),v.current=u,u&&Ht.O.handleVideoControlChange(Object.assign(Object.assign({},j),{click_section:e,change_params:t?"play":"pause",enter_method:i})),_(t?1:0)}),[t,u,j,_,h,v]),Z=(0,l.useCallback)((()=>{var e,i,o,n;t?null===(i=null===(e=h.current)||void 0===e?void 0:e.play)||void 0===i||i.call(e):null===(n=null===(o=h.current)||void 0===o?void 0:o.pause)||void 0===n||n.call(o),_(t?1:0)}),[t,_,h]),{abTestVersion:z,language:q,user:F}=(0,x.m7)((0,m.Lh)((()=>["abTestVersion","language","user"]),[])),H=(0,l.useCallback)((({change_method:e,click_section:t,enter_method:i})=>()=>{p.current=e,T.handleSwitchVideo({newIndex:S+1,abTestVersion:z,language:q,user:F,enterMethod:i}),u&&Ht.O.handleVideoControlChange(Object.assign(Object.assign({},j),{click_section:t,change_params:"next_video",enter_method:"keydown"===p.current?"keydown":"click"})),_(1)}),[T,S,z,q,F,u]),N=(0,l.useCallback)((({change_method:e,click_section:t})=>()=>{p.current=e,T.handleSwitchVideo({newIndex:S-1,abTestVersion:z,language:q,user:F}),u&&Ht.O.handleVideoControlChange(Object.assign(Object.assign({},j),{click_section:t,change_params:"previous_video",enter_method:"keydown"===p.current?"keydown":"click"})),_(1)}),[T,S,z,q,F,u]),Y=(0,l.useCallback)((e=>{if(!M)return void R.openModal({query:{enter_method:"click_like",group_id:i}});const{clientX:t,clientY:o}=e;new Rt.B(t,o).emit(),B.postLikeVideo({id:i,forceLike:!0,play_mode:d,enter_method:"double_tap"})}),[i,M,B,R,d]),U=(0,Et.D)((()=>({onClick:W({click_section:"video_section",enter_method:"click"}),onDoubleClick:Y})),[W,Y]),G=(0,l.useRef)(""),[,Q]=(0,l.useState)(0),J=(0,Wt.m4)(),[,X]=(0,l.useState)(!1),$=(0,b.HX)(),ee=(0,l.useCallback)(((e,t)=>{J||(Gt(e),Q(2),X(!0),G.current=t),$&&((0,Zt.NS)(e),window.open(t))}),[J,$]),te=(0,l.useRef)(-1),ie=(0,l.useCallback)((({enter_method:e="keydown",click_section:t})=>i=>{var o,n;if(!h.current||!h.current.seekTime)return;const r=i>0?"forward":"backward";(!f||i<0)&&(window.clearTimeout(te.current),T.setSeekType(r),te.current=window.setTimeout((()=>{T.setSeekType("none")}),2e3),h.current.seekTime(h.current.currentTime+i),f&&(null===(n=null===(o=h.current)||void 0===o?void 0:o.play)||void 0===n||n.call(o),_(1)),u&&Ht.O.handleVideoControlChange(Object.assign(Object.assign({},j),{enter_method:e,click_section:t,change_params:i>0?"video_forward":"video_backward"})))}),[T,j,u,h,f]),oe=(0,a.m)(D.rE,{selector:e=>e.isOpen,dependencies:[]}),ne=(0,l.useMemo)((()=>{const e=new Map,t=!g;return t&&(e.set(76,(()=>{w("keydown")})),e.set(77,E({enter_method:"keydown"}))),u&&(t&&(e.set(32,W({enter_method:"keydown"})),e.set(70,k({enter_method:"keydown",change_params:"enter"})),e.set(37,(()=>{ie({enter_method:"keydown"})(O?zt.i:zt.R)})),e.set(39,(()=>{ie({enter_method:"keydown"})(O?zt.R:zt.i)}))),e.set(38,N({change_method:"keydown"})),e.set(40,H({change_method:"keydown"}))),e}),[g,ie,O,k,W,N,H,E,w,u]),re=(0,l.useCallback)((e=>{const t=Number(e.keyCode),i=e.target,o=i.tagName.toLocaleLowerCase(),n="button"===i.getAttribute("role")||"button"===o;27!==t&&["input","textarea"].includes(o)||"true"===i.getAttribute("contenteditable")||oe||9===t||13===t||32===t&&n||(e.preventDefault(),!ne.has(t))||ne.get(t)()}),[oe,ne]);(0,l.useEffect)((()=>(document.addEventListener("keydown",re),()=>{document.removeEventListener("keydown",re)})),[re]);const ae=(0,l.useCallback)((()=>{v.current=!1,_(0)}),[_,v]),le=(0,l.useCallback)((()=>{v.current=!1,_(1)}),[_,v]),se=(0,l.useCallback)((()=>{$||(_(2),L&&(T.handleSwitchVideo({newIndex:S+1,abTestVersion:z,language:q,user:F}),_(1)))}),[L,_,$,T,S,z,q,F]),de=(0,l.useCallback)((()=>{var e,t;_(1),null===(t=null===(e=h.current)||void 0===e?void 0:e.replay)||void 0===t||t.call(e)}),[_,h]),ce=(0,l.useCallback)((e=>{var t,i,o,n;null===(i=null===(t=h.current)||void 0===t?void 0:t.seek)||void 0===i||i.call(t,e),f&&(null===(n=null===(o=h.current)||void 0===o?void 0:o.play)||void 0===n||n.call(o),_(1))}),[h,f,_]),{refreshWhenExpireAndEmpty:ue,refreshInAllCase:ve}=(0,C.BY)(),pe=(0,l.useCallback)((()=>{const t=1==})(e)||!e;(t&&ue||ve)&&(p.current="video_error_auto_reload",T.handleErrorRefresh({abTestVersion:z,language:q,user:F}))}),[e,ue,ve,z,q,F]);return{handleNextVideo:H,handlePrevVideo:N,handleKeyDown:re,preventDefault:Gt,handleTogglePlay:W,handleToggleMute:E,handleLinkClick:ee,handleDoubleClick:Y,handleVideoClick:U,handleVideoPause:ae,handleVideoPlay:le,handleSeek:ie,handleTogglePlayWithoutReport:Z,handleVideoEnd:se,handleReplay:de,handleSeekBySeekbar:ce,handleVideoError:pe,autoReplay:$}}({ended:ee,pause:$,handleLikeClick:ge,setPlayStatus:e=>{X(e)},playAddr:R,authorId:M,playModeForTea:Ae?"pip":we,playMode:ke,groupId:f,itemMute:j,animationTimerRef:Ie,handleFullScreen:xe,isVideoPlayerOptimization:ve,shouldShowPauseAnim:le,videoChangeMethodRef:p,videoPlayerRef:ae,playKeyboardDisable:se.current||de.current}),Xe=(0,r.q)(ci.M),et=(0,l.useCallback)((e=>{var t,i,o;Xe.setVideoInfo({videoId:f,videoPercent:e,duration:null===(t=ae.current)||void 0===t?void 0:t.duration,currentTime:null!==(o=null===(i=ae.current)||void 0===i?void 0:i.currentTime)&&void 0!==o?o:0})}),[f,Xe,ae]),tt=(0,l.useCallback)}),[ae]);(0,l.useImperativeHandle)(t)));const{progressReportCallback:it,progressPreviewReportCallback:ot}=(0,Yt.CE)({pause:$,videoPlayerRef:ae,videoReportParams:u,playModeForTea:we}),{playbackRate:nt,handleChangePlaybackRate:rt,handleResetPlayBack:at}=(0,Si.oA)({isActive:!0,group_id:f,author_id:M,playModeForTea:we}),lt=(0,l.useCallback)((e=>{var t,i,o,n;"play-video"===e.data.type?(null===(i=null===(t=ae.current)||void 0===t?void 0:t.play)||void 0===i||i.call(t),X(1)):"pause-video"===e.data.type&&(null===(n=null===(o=ae.current)||void 0===o?void 0:o.pause)||void 0===n||n.call(o),X(0))}),[]);(0,l.useEffect)((()=>{if(Y)return window.addEventListener("message",lt),()=>{window.removeEventListener("message",lt)}}),[Y,lt]),(0,l.useEffect)((()=>{var e,t;le.current=!1,se.current||de.current||Y||(at(),et(0),null===(t=null===(e=ae.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e),ie(!0))}),[f]);const st=[],{setVideoCountPlusOne:dt}=(0,Hi.C)();(0,l.useEffect)((()=>{!s||$||st.includes(f)||(null==dt||dt(),st.push(f))}),[s]);const ct=(0,a.m)(Se,{selecto},dependencies:[s]}),ut=(0,a.m)(K.f,{selecto},dependencies:[]}),vt=(0,l.useCallback)((()=>{v()}),[v]),pt=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((()=>{Zi.y.handleCommentClick(Object.assign(Object.assign({},u),{action:"open"})),N.addMlModelTrainData({id:f,action:"click_comment"}),v()}),[v,u]),modalConfig:{query:{enter_method:"click_comment",group_id:f}}}),mt=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((()=>{Zi.y.handleCommentClick(Object.assign(Object.assign({},u),{action:"open",enter_method:"click_context_menu",media_type:"video"})),v()}),[v,u]),modalConfig:{query:{enter_method:"click_comment",group_id:f}}}),ht=(0,l.useMemo))),[fe]),gt=(0,l.useMemo))),[H]),bt=(0,l.useCallback)((()=>{var e,t;Oe("click_video"),ee||(X(0),null===(t=null===(e=ae.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e))}),[Oe,ee]),xt=(0,l.useCallback)((()=>{ie(!1)}),[]),[ft,yt]=(0,l.useState)(pe&&te);(0,l.useEffect)((()=>{yt(!1)}),[]);const kt=(0,r.q)(Se),wt=(0,l.useCallback)((()=>{kt.setIfShowSubtitle(!0),vi("click_transcript",0)}),[kt]),{handleLightenVideoControls:Ct}=(0,Si.MQ)();(0,l.useEffect)((()=>{Ct()}),[]);const _t=(0,l.useCallback)((e=>{de.current=e,e!==$&&!se.current&&!Y&&Ue()}),[$,Y,Ue]),jt=(0,l.useMemo)((()=>({parentRef:ye&&re.current?re.current:void 0})),[ye]),It=(0,l.useCallback)}),[]),St=(0,l.useCallback)}),[]);(0,l.useEffect)((()=>{!Ae&&ue({})}),[Ae]);const Tt=(0,l.useCallback)((()=>{X(1)}),[]),{user:Lt}=null!==(o=(0,m.Lh)((()=>["user"]),[]))&&void 0!==o?o:{},Mt=Boolean(Lt),[{contextMenuOpen:Ot},{openContextMenu:At}]=(0,r.b)(Li.vI),Pt=(0,Ii.fz)(zi.p),[Vt,Bt]=(0,l.useState)(!1),qt=(0,l.useCallback)((()=>{Pt.handleClickShare({author_id:M,group_id:f,enter_method:"click_context_menu",media_type:"video",is_sub_only_video:O?1:0}),Bt(!0)}),[M,f,Pt,O]),{hasNonPersonalizedMenu:Ut}=(0,C.dS)(),Kt=(0,Ne.W)({actionWhenUserLoggedIn:qt,modalConfig:{query:{enter_method:"click_share"}}}),Qt=(0,l.useCallback)((()=>{Bt(!1)}),[Bt]),Xt=(0,l.useCallback)((e=>{var t,i;if(w)return e.stopPropagation(),void e.preventDefault();if(U)return Qn.h.destroy(),Qn.h.open({content:G("ad_not_support"),duration:3}),e.stopPropagation(),void e.preventDefault();e.preventDefault();const o=["link"];T||0!==S||O||j||o.push("download"),Lt&&!(null==Lt?void 0:Lt.hasIMPermission)||o.push("share"),(0,Mi.b)("custom_right_click_menu",!1).should_show_additional_options&&o.push("like","comment","user"),document.pictureInPictureEnabled&&o.push("pip"),Ut&&o.push("manage-feed"),qi.s.handleContextMenu({media_type:"video"}),At({location:{x:e.clientX,y:e.clientY},videoInfo:{downloadAddr:null!==(t=null==s?void 0:s.video.downloadAddr)&&void 0!==t?t:"",videoId:f,author:L,videoElement:null===(i=re.current)||void 0===i?void 0:i.getElementsByTagName("video")[0],videoLikeHandler:()=>ge("click_context_menu","video"),videoCommentHandler:mt,videoShareHandler:Kt,mediaType:"video"},menuOptions:o})}),[f]),$t=(0,l.useCallback)}),[Ot,ze]),ei=(0,l.useMemo)((()=>(0,n.jsx)(Oi._,{onLinkClick:Ze,styleType:4,item:s,e2eTag:"browse-music",teaParams:u},void 0)),[Ze,s,u]),{abTestVersion:ti}=(0,x.m7)((0,m.Lh)((()=>["abTestVersion"]),[])),ii=(0,h.N8)(ti,"reverse_expand_item_tag"),oi=(0,C.nl)()&&"v2"!==ii,ni=(0,l.useMemo)((()=>{var e;return!Mt&&(null!==(e=null==s?void 0:s.keywordTags)&&void 0!==e?e:[]).length>0&&(null==s?void 0:s.desc)||oe}),[Mt,null==s?void 0:s.keywordTags,null==s?void 0:s.desc,oe]),[ri,ai]=(0,l.useState)(ni&&oi),li=(0,l.useCallback)}),[]);if(!s||!(null==s?void 0:s.video))return(0,$e.G)(["item.video"]);const si=(ni&&!oi||oe)&&(0,n.jsx)(Fo.y,{item:s,section:"query_tag"},void 0),di=(0,n.jsxs)(n.Fragment,{children:[g,(0,n.jsxs)(ir,{children:[(0,n.jsx)(Ai.p,Object.assign({onlyKey:f,lineClamp:eo.q4,overflowLineNum:eo.E4},{children:(0,n.jsx)(Pi.Q,{onLinkClick:Ze,item:s,e2eTag:"browse-video-desc",reportParams:u},void 0)}),void 0),me&&(0,n.jsx)("div",Object.assign({style:{margin:"13.5px 0"}},{children:(0,n.jsx)(Vi.r,{isBrowserMode:2===ke,eventList:[me]},void 0)}),void 0),ei,!Y&&(0,n.jsx)(Bi.Z,{item:s,playMode:4,poiTeaParams:u,capcapAnchorTeaParams:u},void 0),ri&&(0,n.jsx)(tr,Object.assign({onClick:li},{children:(0,n.jsx)(br.p,{size:16,fill:"rgb(255, 255, 255)"},void 0)}),void 0),!ri&&ni&&oi&&(0,n.jsx)(fr,{item:s},void 0)]},void 0)]},void 0),ui=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(hr,{children:di},void 0),si]},void 0);return(0,n.jsxs)(or,Object.assign({ref:ne},{children:[Ae&&(0,n.jsx)(ar,{},void 0),(0,n.jsxs)(ar,Object.assign({onContextMenu:Xt,miniVideoVisible:Ae,onMouseMove:Ct,ref:re,style:Object.assign(Object.assign(Object.assign({},Pe),ce),Ce)},{children:[(0,n.jsx)($n,{children:!ft&&(0,n.jsx)(er,{onLoad:xt,video:gt,objectFit:"initial"},void 0)},void 0),pe&&te&&(0,n.jsx)(dr,{children:(0,n.jsx)(cr,{smallSize:Ae,src:io},void 0)},void 0),w?(0,n.jsx)(qo,{id:f,smallSizeMask:Ae},void 0):(0,n.jsx)(rr,Object.assign({onClick:$t},{children:(0,n.jsx)(Di.S,{horizontal:Me,mode:4,playModeForTea:Ae?6:ke,ref:ae,desc:s.desc,topSearchQueryAfterViewWord:k,id:f,playUrl:R,index:d,itemMute:Boolean(j),duration:Z,bitrateInfo:z,teaParams:u,onVideoError:qe,onTimeUpdate:et,onVideoPlay:He,subtitleStruct:ct,disableDownload:!1,volumeInfo:q,bitrate:Number(F),playbackRate:nt,autoPlay:!Y,autoReplay:Je,onVideoEnded:Ge,videoCover:gt},f)}),void 0),(()=>{var e,t,i,o;return Ae?null:ve?(0,n.jsxs)(n.Fragment,{children:[Te,Le,!ee&&(0,n.jsx)(oo.t,{style:je,currentIndex:d,totalLength:null!=c?c:0,onClickPrev:De({change_method:"player_switch_btn_click"}),onClickNext:Be({change_method:"player_switch_btn_click"})},void 0),!ye&&(0,n.jsx)(lr,{children:(0,n.jsx)(to.B,{hideAvatar:!0,playModeForTea:we,onClickComment:pt,itemId:f},void 0)},void 0),ee&&(0,n.jsx)(mr,{},void 0),(0,n.jsx)(Ti.W,{customStyle:yr,currentCanPlay:null!==(t=null===(e=ae.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t,seek:Qe,videoId:f,isActive:!0,pause:$,ended:ee,itemMute:j,playbackRate:nt,fullscreen:ye,playModeForTea:we,playMode:ke,onReplay:Ke,onExpand:xe,onForward:Ye({enter_method:"click",click_section:"pc_web_keyboard_btn"}),onChangePlaybackRate:rt,onExitExpand:ht,onTogglePlay:Ee,onToggleMute:We,handleShowTranscript:wt,onNextVideo:Be({change_method:"click",click_section:"pc_web_keyboard_btn"}),onPrevVideo:De({change_method:"click",click_section:"pc_web_keyboard_btn"}),videoRef:ae,videoChangeMethodRef:p,progressReportCallback:it,progressPreviewReportCallback:ot},void 0)]},void 0):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Wn,{currentCanPlay:null!==(o=null===(i=ae.current)||void 0===i?void 0:i.currentCanPlay)&&void 0!==o&&o,seek:Qe,videoId:f,pause:$,ended:ee,itemMute:j,onDoubleClick:be,onTogglePlay:Ue,videoRef:ae,progressReportCallback:it,progressPreviewReportCallback:ot,onReplay:Ke},void 0),$&&(0,n.jsx)(nr,{width:70,height:70,fill:"#fff"},void 0),(0,n.jsx)(Bo,{onlyShowExtra:ee,onClickComment:vt,itemId:f,isPaused:$,isTTAMAds:U},void 0)]},void 0)})(),!Ae&&!Y&&!ut&&(0,n.jsx)(vn,{isFullScreen:ye,onCloseRelatedMask:Tt,showRelated:ee},void 0),(0,n.jsx)(Jn,{smallSizeMask:Ae,videoPlayerRef:ae,onPrev:De({change_method:"click"}),onNext:Be({change_method:"click"}),id:f,listLength:c,currentIndex:d,showSensitiveMask:se},void 0),(0,n.jsx)(Ri.C,{onReportMaskVisibleChange:_t,styleContainer:kr,smallMask:Ae,item:s},void 0),Ae&&(0,n.jsx)(Un,{onMouseEnter:It,onMouseLeave:St,onClose:bt,onGoToNormalPlayer:Ve,currentIndex:d,paused:$,ended:ee,onReplay:Ke,onNext:Be({change_method:"mini_player_switch"}),onPrev:De({change_method:"mini_player_switch"}),onTogglePlayer:Ue,hidePlay:se.current||de.current},void 0),(null==I?void 0:I[0])&&(0,n.jsx)(sr,Object.assign({smallSize:Ae},{children:(0,n.jsx)($i,{smallSize:Ae,info:null==I?void 0:I[0]},void 0)}),void 0)]}),void 0),ui,ye&&(0,n.jsx)(Wi.b,Object.assign({},jt),void 0),Vt&&(0,n.jsx)(Ei.J,{visible:Vt,videoId:f,onClose:Qt},void 0)]}),void 0)}));var Cr=i(28974),_r=i(57722),jr=i(23739),Ir=i(26183),Sr=i(30524);const Tr=(0,De.Z)("div",{target:"e1ymawm00"})((({isNarrowState:e=!1})=>({display:"flex",justifyContent:e?"":"space-between",flexWrap:"wrap"})),"label:DivListContainer;"),Lr=(0,De.Z)("div",{target:"e1ymawm01"})((({theme:e,isNarrowState:t})=>(0,Re.YJ)({marginEnd:t?"14px":"0px",direction:e.direction})),(({isUIOptimization:e})=>({width:e?"152px":"147px",marginBottom:"16px",cursor:"pointer"})),"label:DivItemContainer;");var Mr}(Mr||(Mr={}));const Or=(0,De.Z)("div",{target:"e1ymawm02"})({width:"100%",height:"202px",position:"relative",borderRadius:"2px",marginBottom:"8px",overflow:"hidden"},"label:DivCoverContainer;"),Ar=(0,De.Z)("div",{target:"e1ymawm03"})({width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},"label:DivPlayerWrapper;"),Pr=(0,De.Z)(Xn.y,{target:"e1ymawm04"}))),"label:StyledCover;"),Vr=(0,De.Z)("div",{target:"e1ymawm05"})({position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",borderRadius:"2px",padding:"2px",fontSize:"12px",color:"#fff"},"label:DivDuration;"),Br=(0,De.Z)("div",{target:"e1ymawm06"})({display:"flex",position:"relative"},"label:DivDesc;"),Dr=(0,De.Z)("div",{target:"e1ymawm07"}))),(({isUIOptimization:e})=>(0,Re.FC)(e?2:3)),{marginBottom:"4px",wordBreak:"break-word",position:"relative"},"label:DivTitle;"),Rr=(0,De.Z)("div",{target:"e1ymawm08"}))),"label:DivAuthor;"),Er=(0,De.Z)("span",{target:"e1ymawm09"})(Object.assign({},Re.wj),"label:SpanUniqueId;"),Wr=(0,De.Z)("div",{target:"e1ymawm010"})((({theme:{colors:e}})=>({display:"flex",height:"16px",color:e.TextSecondary,alignItems:"center",fontSize:"12px"})),"label:DivOtherInfo;"),Zr=(0,De.Z)("div",{target:"e1ymawm011"})((({theme:e})=>[(0,Re.YJ)({direction:e.direction,marginEnd:"8px"})]),"label:DivDate;"),zr=(0,De.Z)(Ir.Z,{target:"e1ymawm012"})((({theme:e})=>[(0,Re.YJ)({direction:e.direction,marginEnd:"4px"})]),"label:StyledHeart;"),qr=(0,De.Z)("div",{target:"e1ymawm013"})((({theme:{colors:e}})=>({borderBottom:`1px solid ${e.ShadowPrimary}`,marginTop:"23px"})),"label:DivListWrapper;"),Fr=(0,De.Z)(Sr.W,{target:"e1ymawm014"})({marginBottom:"24px",minWidth:"unset",fontSize:"16px",paddingLeft:"16px",paddingRight:"16px"},"label:StyledMoreBtn;"),Hr=(0,De.Z)("div",{target:"e1ymawm015"})({width:"100%",display:"flex",justifyContent:"center"},"label:DivLoadingWrapper;"),Nr=(0,De.Z)("div",{target:"e1ymawm016"}))),"label:DivMask;"),Yr=(0,De.Z)("div",{target:"e1ymawm017"}))),"label:DivMaskContainer;"),Ur=(0,De.Z)(ft.q,{target:"e1ymawm018"})((({theme:e})=>[(0,Re.YJ)({direction:e.direction,marginEnd:"4px"}),{flexShrink:0,border:`0.5px solid ${e.colors.LineReverse2}`}]),"label:StyledAvatar;"),Gr=(0,De.Z)("div",{target:"e1ymawm019"}))),"label:DivPlayCount;"),Kr=(0,De.Z)("span",{target:"e1ymawm021"})((({theme:e})=>[{color:e.colors.TextTertiaryAlt,position:"relative"},"ltr"===e.direction?{marginLeft:"auto"}:{marginRight:"auto"}]),"label:SpanInfoExpandIconWrapper;");function Qr(e,t){return"bottom"===e?function(e){return{borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderBottom:"10px solid",borderBottomColor:e.colors.BGSecondary,marginLeft:"-20px",marginTop:"30px"}}(t):"left"===e?function(e){return{borderBottom:"12px solid transparent",borderTop:"12px solid transparent",borderLeft:"10px solid",borderLeftColor:e.colors.BGSecondary,marginTop:"-5px",marginLeft:"-35px"}}(t):"top"===e?function(e){return{borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderTop:"10px solid",borderTopColor:e.colors.BGSecondary,marginLeft:"-20px",marginTop:"-25px"}}(t):"right"===}(t):{}}const Jr=(0,De.Z)("div",{target:"e1ymawm022"})]),"label:DivInfoCardArrow;"),Xr=(0,De.Z)("span",{target:"e1ymawm023"})({position:"absolute",display:"flex",":hover":{cursor:"pointer"}}}),"label:SpanInfoExpandWrapper;"),$r=(0,De.Z)(Uo.Z,{target:"e1ymawm024"}))),"label:StyledPlay;");var ea=i(10426),ta=i(83480),ia=i(92742),oa=i(75674),na=i(33148),ra=i(64752),aa=i(57066),la=i(82394),sa=i(3281),da=i(10822);const ca=(0,l.memo)((e=>{var t;const{item:i,index:o,isNarrowState:d,playing:c,videoChangeMethodRef:u}=e,{video:{duration:v,playAddr:p="",bitrate:h,bitrateInfo:g,cover:b,zoomCover:f},desc:y,author:k="",createTime:w,stats:_,statsV2:j}=i,I=null!=j?j:_,S=(0,l.useRef)(null),[T,L]=(0,l.useState)(!1);(0,l.useEffect)}),[T]),(0,l.useEffect)((()=>{var e;e={author_id:k,group_id:i.id,rank:o},Z.W.event("video_cover_show",Object.assign(Object.assign({},e),{enter_method:"video_detail",type:"video_detail"}))}),[]);const M=(0,a.m)(Ge.z,{selecto],dependencies:[k]}),{timeTranslator:O}=(0,Ke.e)(),{uniqueId:A,verified:P,avatarThumb:V}=(0,x.m7)(M),B=(0,r.q)(Se),{language:D,abTestVersion:R,user:E}=(0,x.m7)((0,m.Lh)((()=>["language","abTestVersion","user"]),[])),W=(0,l.useCallback)((e=>{var t;e.preventDefault(),e.stopPropagation(),t={author_id:k,group_id:i.id,rank:o},Z.W.event("video_cover_click",Object.assign(Object.assign({},t),{enter_method:"video_detail",type:"video_detail"})),u.current="related_list_click",B.handleSelectVideo({newIndex:o,language:D,abTestVersion:R,user:E})}),[k,i.id,o,B,D,R,E,u]),z=(0,l.useCallback)((()=>{L(!0)}),[]),q=(0,l.useCallback)((()=>{L(!1)}),[]),{showVideoMask:F}=(0,Gn.g)({item:null!=i?i:{},playMode:4}),{hideMaskTempVideoId:H}=(0,a.m)(Kn.P),N=F&&H!==i.id,Y=(0,r.q)(ta.bg),U=(0,r.q)(ia.mg),K=(0,xr.D)(),[J,X]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(!1),[te,ie]=(0,l.useState)(!1),oe=(0,l.useCallback)}),[]),ne=(0,l.useCallback)}),[]);(0,l.useEffect)}),[J,te]);const[re,ae]=(0,l.useState)("bottom"),le=(0,l.useRef)(null),se=(0,l.useRef)(null),{pathname:de}=(0,s.TH)(),ce=(0,G.C2)(de),ue=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),Fi._.handleGeneralClick("info_card_icon",{group_id:null==i?void 0:i.id}),aa.O.showSection("info_card",{group_id:null==i?void 0:i.id});const t=(0,da.q)(se,ce);ae(t),ie(!0)}),[se,ce]),ve=(0,l.useCallback)}),[Y,U,i,N]),pe=(0,a.m)(ta.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),me=(0,a.m)(ia.mg,{selecto],dependencies:[]}),{isUIOptimization:he,isVideoPlayerOptimization:ge,hasPip:be,isVideoDetailExperiment:xe}=(0,C.iA)(),fe=xe&&(N||pe.includes((null==i?void 0:i.id)||"")||me.includes((null==i?void 0:i.id)||"")),ye=!fe&&c&&(ge||be);return(0,n.jsxs)(Lr,Object.assign({isUIOptimization:he,isNarrowState:d},{children:[(0,n.jsxs)(Or,Object.assign({onMouseEnter:z,onMouseLeave:q,onClick:W},{children:[(0,n.jsx)(Pr,{video:{cover:b,zoomCover:f,quality:"480"}},void 0),!T||fe||ye?null:(0,n.jsx)(Ar,{children:(0,n.jsx)(oa.N,{ref:S,horizontal:!1,itemMute:!0,muteSetting:na.PA[4].forceMute,defaultMute:na.PA[4].defaultMute,playProgress:0,src:p,bitrate:Number(h),bitrateInfo:g},void 0)},void 0),ye&&(0,n.jsx)(ra.O,{},void 0),fe&&(0,n.jsx)(Nr,{children:(0,n.jsx)(Yr,Object.assign({onClick:ve},{children:(0,n.jsx)(ea.Z,{width:"24",height:"24"},void 0)}),void 0)},void 0),he?(0,n.jsxs)(Gr,{children:[(0,n.jsx)($r,{width:20,height:20,fill:"#fff"},void 0),(0,x.BT)(null==I?void 0:I.playCount)]},void 0):(0,n.jsx)(Vr,{children:(0,Q.xo)(v)},void 0)]}),void 0),(0,n.jsxs)(Br,Object.assign({onMouseLeave:ne},{children:[(0,n.jsx)(Dr,Object.assign({isUIOptimization:he,ref:le,onMouseEnter:oe,onClick:W},{children:y}),void 0),$&&(0,n.jsx)(Kr,Object.assign({onClick:ue,ref:se},{children:(0,n.jsx)(la.Z,{size:16},void 0)}),void 0),(0,n.jsx)(Xr,{children:(te||K)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Jr,{visible:te,renderDirection:re},void 0),(0,n.jsx)(sa.u,{item:i,author:M,description:null!==(t=null==i?void 0:i.desc)&&void 0!==t?t:"",stats:I,isBot:K,pageType:0,handleClos},visible:te,renderDirection:re},void 0)]},void 0)},void 0)]}),void 0),(0,n.jsxs)(Rr,Object.assign({ref:le,onMouseEnter:oe,onMouseLeave:ne,onClick:W},{children:[he&&(0,n.jsx)(Ur,{src:V,size:16},void 0),(0,n.jsx)(Er,{children:A},void 0),P&&(0,n.jsx)(nt.Q,{width:10,height:10},void 0)]}),void 0),!he&&(0,n.jsxs)(Wr,Object.assign({ref:le,onMouseEnter:oe,onMouseLeave:ne,onClick:W},{children:[(0,n.jsx)(Zr,{children:O(1e3*Number(w))},void 0),(0,n.jsx)(zr,{width:16,height:16,fill:"currentcolor"},void 0),(0,x.BT)(null==I?void 0:I.diggCount)]}),void 0)]}),void 0)})),ua=(0,l.memo)((0,l.forwardRef)((({itemList:e,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r,videoChangeMethodRef:s},d)=>{var c;const u=e.slice(1),v=(0,P.Q)(),{narrowStateHasMore:p,handleLoadMore:m,narrowStateList:h}=function({relatedList:e,isNarrowState:t,onLoadMore:i,hasMore:o}){const[n,r]=(0,l.useState)(1),[a,s]=(0,l.useState)(!0);return(0,l.useEffect)}),[t]),{narrowStateHasMore:a,handleLoadMore:(0,l.useCallback)((()=>{e.length-16*(n+1)<0&&o&&i(),r(n+1)}),[i,e,n,o]),narrowStateList:(0,l.useMemo)((()=>e.slice(0,16*n)),[e,n])}}({relatedList:u,isNarrowState:t,onLoadMore:i,hasMore:o}),{currentIndex:g}=(0,a.m)(Se),b=null!==(c=e.mapd)))&&void 0!==c?c:[],x=(0,xr.D)();(0,Cr.k)(b,x),(0,_r.S)(e,x);const f=(e,t,i)=>{if(!e)return null;const o=t+1;return(0,n.jsx)(ca,{videoChangeMethodRef:s,playing:g===o,isNarrowState:i,index:o,item:e},e.id)};return t?(0,n.jsxs)(qr,{children:[(0,n.jsx)(Tr,Object.assign({isNarrowState:t},{children:h.map(((e,t)=>f(e,t,!0)))}),void 0),p?(0,n.jsx)(Fr,Object.assign({size:"medium",disabled:r,buttonTheme:"line",onClick:m},{children:v("video_details_page_morevideos_btn")}),void 0):null]},void 0):(0,n.jsxs)(Tr,Object.assign({ref:d},{children:[u.map))),r&&u.length>1&&o?(0,n.jsx)(Hr,{children:(0,n.jsx)(jr.g,{},void 0)},void 0):null]}),void 0)}))),va=(0,n.jsx)(M.Z,Object.assign({},z.vj),void 0),pa=(0,n.jsx)(O.Z,Object.assign({},z.vj),void 0),ma=(0,A.l)((function({videoChangeMethodRef:e}){var t,i;const o=(0,P.Q)(),{user:d}=null!==(t=(0,m.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},[c,u]=(0,l.useState)(!1),[{currentIndex:p,itemListKey:h,subtitleContent:g,ifShowSubtitle:f},w]=(0,r.b)(Se),C=(0,l.useRef)(null),_=(0,l.useRef)(null),j=(0,l.useRef)(null),I=(0,l.useCallback)}),[j]);(0,V.$v)(4),(0,l.useEffect)((()=>{u(window.innerWidth<903)}),[]);const{browserList:S,listHasMore:T,listLoading:L}=(0,a.m)(v.h,{selector:e=>{const t=e[null!=h?h:""];return t?{browserList:t.browserList,listHasMore:!0,listLoading:t.loading}:{browserList:[],listHasMore:!0,listLoading:!1}},dependencies:[]}),[{itemList:M,currentItem:O,subtitleInfos:A}]=(0,r.b)(y.A,{selector:e=>{var t,i;return{itemList:S.map((t=>e[t])),currentItem:e[S[p]],subtitleInfos:null===(i=null===(t=e[S[p]])||void 0===t?void 0:t.video)||void 0===i?void 0:i.subtitleInfos}},dependencies:[S,p]}),q=null!==(i=null==O?void 0:O.id)&&void 0!==i?i:"",F=(0,l.useRef)(null);(0,l.useEffect)((()=>{var t;"mini_player_switch"!==e.current&&q&&function(e){if(e){const{y:t}=e.getBoundingClientRect();return t<-100}return!1}(F.current)&&(null===(t=F.current)||void 0===t||t.scrollIntoView())}),[q]);const H=(0,l.useMemo)((()=>({author:"",scheduleTime:""})),[]),{author:N="",scheduleTime:Y,item_control:U}=null!=O?O:H,G=Kt({id:q}),[K,Q]=(0,l.useState)(!0);(0,l.useEffect)((()=>{A&&(null==A?void 0:A.length)>0&&w.downloadTranscript({subtitleInfos:A})}),[A,w]);const J=function(){const{currentIndex:e}=(0,a.m)(Se),[{loading:t,hasMore:i,currentItemId:o},n]=(0,r.b)(v.h,{selector:t=>{var i,o,n,r,a,l;return{loading:null!==(o=null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.loading)&&void 0!==o&&o,hasMore:null===(r=null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.hasMore)||void 0===r||r,currentItemId:null!==(l=null===(a=null==t?void 0:t.video)||void 0===a?void 0:a.browserList[e])&&void 0!==l?l:0}},dependencies:[e]}),{user:s,abTestVersion:d,language:c}=(0,x.m7)((0,m.Lh)]),[])),u=(0,b.HX)();return(0,l.useCallback)((()=>{t||!i||u||n.getRelatedList({key:"video",itemId:o,user:s,abTestVersion:d,language:c})}),[t,i,u,n,o,s,d,c])}();(0,B.qT)({onHitBottom:J,elemRef:C});const X=(0,a.m)(Ve,{selectoe,dependencies:[]}),$=(0,k.K$)(O),ee=(0,l.useMemo)((()=>{var e;const{video:{bitrate:t=-1,encodedType:i="",format:o="",videoQuality:n="",encodeUserTag:r="",codecType:a="",definition:l=""}={},authorId:s="",id:d="",secret:c=!1,forFriend:u=!1,adLabelVersion:v,poi:p,music:m,subVideoMeta:h}=null!=O?O:{video:{}};return Object.assign({author_id:s,group_id:d,bitrate:Number(t),encodedType:i,format:o,videoQuality:n,encodeUserTag:r,codecType:a,definition:l,secret:c,forFriend:u,isPaidPartnership:2===v,poi_id:null==p?void 0:p.id,music_id:null!==(e=null==m?void 0:m.id)&&void 0!==e?e:"",is_sub_only_video:h?1:0},$)}),[O,$]),{isServerError:te,isCommonError:ie,isInitLoading:oe,isEmpty:ne}=Be(),re=(()=>{const{id:e}=(0,s.UO)(),t=(0,r.q)(v.h),i=(0,r.q)(Ve),{user:o,abTestVersion:n,language:a,appType:d}=(0,x.m7)((0,m.Lh)((()=>["abTestVersion","language","user","appType"]),[]));return(0,l.useCallback)((()=>{t.resetItemList({key:"video"}),i.getVideoDetail({itemId:e,user:o,abTestVersion:n,language:a,appType:d})}),[t,e,o,n,a,i,d])})(),ae=(0,l.useCallback)((e=>{e!==c&&u(e)}),[c]),le=(0,b.HX)(),se=!1===(null==U?void 0:U.can_creator_redirect),de=e=>{se&&(Qn.h.destroy(),Qn.h.open({content:o("ad_not_support"),duration:3}),e.preventDefault(),e.stopPropagation())},ce=(0,l.useMemo)((()=>N&&!le?(0,n.jsx)(ii,Object.assign({ref:_},{children:(0,n.jsx)(mt,{teaParams:ee,uniqueId:N,videoId:q,onClick:de},void 0)}),void 0):null),[N,q,le,ee]);Qt({onPageWidthBreakPoint:ae});const ue=(0,l.useCallback)((()=>{const t={onLoadMore:J,isLoading:L,hasMore:T,isNarrowState:c,itemList:M};return(null==M?void 0:M.length)<=1&&T||oe?(0,n.jsx)(ji,{},void 0):(0,n.jsx)(ua,Object.assign({videoChangeMethodRef:e,ref:C},t),void 0)}),[M,T,oe,c,L,J,e]),ve=(0,l.useCallback)((()=>{var e;null===(e=null==_?void 0:_.current)||void 0===e||e.scrollIntoView()}),[_]),pe=(0,r.q)(D.rE),{id:me}=(0,s.UO)(),he=(0,l.useCallback)((()=>{var e;203005===X&&(e={enter_method:"shared_sub_only_video",group_id:me},Z.W.event("login_entrance_click",e),pe.openModal({closeable:!0,query:{enter_method:"shared_sub_only_video",redirect_url:(0,R.AY)()}}))}),[me,pe,X]),ge=(0,l.useCallback)((()=>{var e;e={enter_method:"shared_sub_only_video",group_id:me},Z.W.event("login_entrance_show",e)}),[me]);if(te)return(0,n.jsx)(We,{children:(0,n.jsx)(E.T,{iconElem:z.hE,title:o("server_error_title"),desc:o("server_error_sub"),buttonText:o("refresh"),onButtonClick:re},void 0)},void 0);if(ie){const{title:e,desc:t}=(0,W.S9)(X),i=10239===X?pa:va,r=203005!==X||d?"":"Log In";return(0,n.jsx)(We,{children:(0,n.jsx)(E.T,{iconElem:i,title:o((0,W.V5)(X)),desc:o((0,W.ox)(X)),e2eTitle:e,e2eDesc:t,buttonText:o(r),onButtonClick:he,onButtonShow:ge},void 0)},void 0)}return ne?null:(0,n.jsxs)(Xt,{children:[(0,n.jsx)($t,{ref:F},void 0),(0,n.jsxs)(ei,{children:[(0,n.jsxs)(ti,Object.assign({isHideSideComponent:le},{children:[oe||!O?(0,n.jsx)(ri,{},void 0):(0,n.jsx)(wr,{onScrollToComment:ve,teaParams:ee,item:O,currentIndex:p,ref:j,totalLength:S.length,videoChangeMethodRef:e,authorComponent:ce},void 0),c&&f&&(null==g?void 0:g.length)>0&&!le?(0,n.jsx)(ki,{item:O,onSeek:I,isNarrow:!0,isListShow:K,setIsListShow:Q},void 0):null,c&&!le?ue():null,(0,n.jsx)(Vt,{scheduleTime:Number(Y),ref:G,teaParams:ee,itemId:q,disableReply:!1},void 0)]}),void 0),c||le?null:(0,n.jsxs)(oi,{children:[f&&(null==g?void 0:g.length)>0?(0,n.jsx)(ki,{item:O,onSeek:I,isNarrow:!1,isListShow:K,setIsListShow:Q},void 0):null,(0,n.jsx)(ni,{children:o("pc_web_you_may_like")},void 0),ue()]},void 0)]},void 0)]},void 0)}));var ha=i(26061),ga=i(25365),ba=i(71661);const xa=(0,De.Z)("div",{target:"eo7etkj0"})((({reactive:e,theme:{colors:t}})=>({width:"100%",position:"absolute",zIndex:1,userSelect:"none",height:"100%",opacity:1,bottom:0,cursor:"initial",display:"flex",flexDirection:"column",background:e?"":"#000",borderRadius:"4px","&:hover":{[ba.Or.toString()]:{backgroundColor:t.ConstBGInverse4},[ba.fH.toString()]:{backgroundColor:t.ConstBGInverse4},[ba.W5.toString()]:{backgroundColor:t.ConstBGInverse4}}})),"label:DivVideoControlContainer;"),fa=(0,De.Z)("div",{target:"eo7etkj1"})((({active:e})=>[{position:"absolute",width:"100%",display:"flex",alignItems:"center",paddingInlineStart:"16px",bottom:"22px",opacity:e?"1":"0",transition:"all .3s ease"}]),"label:DivControlButtonWrapper;"),ya=(0,De.Z)("div",{target:"eo7etkj2"})((({theme:{direction:e},active:t,showActionBar:i})=>[Object.assign({position:"absolute",cursor:"pointer",bottom:"20px",display:"flex",flexDirection:"column",alignItems:"center",opacity:t?"1":"0",transition:"opacity .5s"},(0,_o.s)()),(0,Re.YJ)({direction:e,start:"unset",end:i?"72px":"16px"})]),"label:DivVoiceControlContainer;"),ka=(0,De.Z)("div",{target:"eo7etkj3"})(Object.assign({opacity:1,width:"40px",height:"24px",display:"flex",justifyContent:"center",transition:"opacity .3s"},(0,_o.s)()),"label:DivMuteIconContainer;"),wa=(0,De.Z)("div",{target:"eo7etkj4"})(Object.assign({width:"24px",height:"24px",display:"flex",justifyContent:"center",cursor:"pointer"},(0,_o.s)()),"label:DivPlayIconContainer;"),Ca={width:24,height:24,fill:"#fff"},_a=(0,l.memo)((function(e){var t;const[i,o]=(0,l.useState)(!1),[r,a]=(0,l.useState)(!1),s=(0,l.useRef)(0),d=(0,l.useRef)(null),{photoVideoRef:c,pause:u=!1,teaParams:v,onDoubleClick:p,onTogglePlay:m,item:h}=e,g=null!==(t=null==h?void 0:h.itemMute)&&void 0!==t&&t,{mute:b,setMute:x}=(0,V.s_)({playMode:4,itemMute:g}),[f,y]=(0,l.useState)(!1),k=(0,l.useCallback)((e=>{var t,i,o;e.preventDefault(),e.stopPropagation(),!u&&(null===(o=null===(i=null===(t=c.current)||void 0===t?void 0:t.audio)||void 0===i?void 0:i.play)||void 0===o||o.call(i)),x(!b,"click",v)}),[u,c,x,b,v]),w=(0,l.useMemo)((()=>u?(0,n.jsx)(sn.Z,Object.assign({},Ca),void 0):(0,n.jsx)(mn.Z,Object.assign({},Ca),void 0)),[u]),C=(0,l.useMemo))),[b]),_=(0,l.useCallback)}),[]),j=(0,l.useCallback)}),[]),I=(0,l.useCallback)((()=>{a(!0)}),[]),S=(0,l.useCallback)((()=>{a(!1)}),[]),T=(0,Et.D))),[m,p]),L=(0,l.useCallback)}),[m]),M=(0,l.useMemo))),[u]),O=i||b||f;return(0,n.jsxs)(xa,Object.assign({reactive:!0,ref:d,onMouseEnter:_,onMouseLeave:j},M,{children:[(0,n.jsx)(pn.ZP,Object.assign({in:i,timeout:500,nodeRef:d},{children:(0,n.jsx)(fa,Object.assign({active:i},{children:(0,n.jsx)(wa,Object.assign({onClick:L},{children:w}),void 0)}),void 0)}),void 0),(0,n.jsx)(pn.ZP,Object.assign({in:O,timeout:500,nodeRef:d},{children:(0,n.jsxs)(ya,Object.assign({showActionBar:!0,active:O,onMouseEnter:I,onMouseLeave:S,onMouseDown:Zt.UW},{children:[g||!f&&!r?null:(0,n.jsx)(xn.y,{isStyleV2:!0,setVolumeDragging:y,teaParams:v},void 0),(0,n.jsx)(ka,Object.assign({mute:b,onClick:k},{children:C}),void 0)]}),void 0)}),void 0),(0,n.jsx)(ga.Q,{photoVideoRef:c,item:h},void 0)]}),void 0)}));var ja}(ja||(ja={}));const Ia=e=>{var t,i;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),null===(i=null==e?void 0:e.stopPropagation)||void 0===i||i.call(e)},Sa={borderRadius:"4px",zIndex:"0"},Ta=(0,l.forwardRef)((e=>{var t,i;const{item:o,teaParams:s,onScrollToComment:d,authorComponent:c}=e,u=null!==(t=null==o?void 0:o.id)&&void 0!==t?t:"",{video:{duration:v},imagePost:p,warnInfo:h,author:g="",authorId:f="",itemMute:w=!1}=(0,x.m7)(o),C=(0,r.q)(y.A),_=(0,b.HX)(),[j,I]=(0,l.useState)(_?0:1),S=0===j,T=2===j,L=(0,l.useRef)(null),M=(0,l.useRef)(null),O=(0,l.useRef)(null),A=(0,l.useRef)(!1),P=(0,l.useRef)(!1),B=(0,l.useCallback)}),[C,u,s]),R=(0,Ne.W)({actionWhenUserLoggedIn:B,modalConfig:{query:{enter_method:"click_like",group_id:u}}}),E=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((e=>{const{clientX:t,clientY:i}=e;new Rt.B(t,i).emit(),C.postLikeVideo({id:u,forceLike:!0,enter_method:"double_tap"})}),[u,C]),modalConfig:{query:{enter_method:"click_like",group_id:u}}}),W=(0,l.useRef)(-1);(0,Nt.C)({pause:S,isActive:A.current,animationTimerRef:W});const Z=(0,k.K$)(o),{handleLinkClick:z,handleTogglePlayWithoutReport:q,handleVideoPlay:F}=function({pause:e,setPlayStatus:t,groupId:i,itemMute:o=!1,handleLikeClick:n,playModeForTea:s,playMode:d,shouldShowPauseAnim:c,photoVideoRef:u,playKeyboardDisable:v,photoTeaParams:p}){const{hasLogin:m}=(0,Yt.pu)(),{mute:h,setMute:g}=(0,V.s_)({playMode:d,itemMute:o}),x=(0,r.q)(y.A),f=(0,r.q)(D.rE),k=(0,l.useCallback)((()=>{g(!h,"keydown",p)}),[h,g,p]),w=(0,l.useCallback)((()=>{var i,o,n,r,a,l,s,d,c,v,p,m;t(e?1:0),e?(null===(n=null===(o=null===(i=u.current)||void 0===i?void 0:i.swiper)||void 0===o?void 0:o.play)||void 0===n||n.call(o),null===(l=null===(a=null===(r=u.current)||void 0===r?void 0:r.audio)||void 0===a?void 0:a.play)||void 0===l||l.call(a)):(null===(c=null===(d=null===(s=u.current)||void 0===s?void 0:s.swiper)||void 0===d?void 0:d.pause)||void 0===c||c.call(d,"click_pause"),null===(m=null===(p=null===(v=u.current)||void 0===v?void 0:v.audio)||void 0===p?void 0:p.pause)||void 0===m||m.call(p))}),[e,u,t]),C=(0,l.useCallback)((e=>{if(!m)return void f.openModal({query:{enter_method:"click_like",group_id:i}});const{clientX:t,clientY:o}=e;new Rt.B(t,o).emit(),x.postLikeVideo({id:i,forceLike:!0,play_mode:s,enter_method:"double_tap"})}),[i,m,x,f,s]),_=(0,l.useRef)(""),[,j]=(0,l.useState)(0),I=(0,Wt.m4)(),[,S]=(0,l.useState)(!1),T=(0,b.HX)(),L=(0,l.useCallback)(((e,t)=>{I||(Ia(e),j(2),S(!0),_.current=t),T&&((0,Zt.NS)(e),window.open(t))}),[I,T]),M=(0,a.m)(D.rE,{selector:e=>e.isOpen,dependencies:[]}),O=(0,l.useMemo)((()=>{const e=new Map;return!v&&(e.set(76})),e.set(77,k)),e}),[v,k,n]),A=(0,l.useCallback)}),[M,O]);(0,l.useEffect))),[A]);const P=(0,l.useCallback)((()=>{c.current=!1,t(0)}),[t,c]),B=(0,l.useCallback)}),[t,c]);return{handleKeyDown:A,preventDefault:Ia,handleToggleMute:k,handleLinkClick:L,handleDoubleClick:C,handleVideoPause:P,handleVideoPlay:B,handleTogglePlayWithoutReport:w}}({pause:S,handleLikeClick:R,setPlayStatu},playModeForTea:"video_detail",playMode:4,groupId:u,itemMute:w,shouldShowPauseAnim:A,photoVideoRef:O,playKeyboardDisable:P.current,photoTeaParams:Z}),H=(0,r.q)(ci.M),N=(0,l.useCallback)((e=>{var t,i,o;H.setVideoInfo({videoId:u,videoPercent:e,duration:v,currentTime:null!==(o=null===(i=null===(t=O.current)||void 0===t?void 0:t.audio)||void 0===i?void 0:i.currentTime)&&void 0!==o?o:0})}),[u,H,O,v]),Y=(0,l.useCallback)((e=>{var t,i,o,n,r,a,l,s,d,c,u,v;"play-video"===e.data.type?(null===(o=null===(i=null===(t=O.current)||void 0===t?void 0:t.swiper)||void 0===i?void 0:i.play)||void 0===o||o.call(i),null===(a=null===(r=null===(n=O.current)||void 0===n?void 0:n.audio)||void 0===r?void 0:r.play)||void 0===a||a.call(r),I(1)):"pause-video"===e.data.type&&(null===(d=null===(s=null===(l=O.current)||void 0===l?void 0:l.swiper)||void 0===s?void 0:s.pause)||void 0===d||d.call(s,"other"),null===(v=null===(u=null===(c=O.current)||void 0===c?void 0:c.audio)||void 0===u?void 0:u.pause)||void 0===v||v.call(u),I(0))}),[]);(0,l.useEffect)((()=>{if(_)return window.addEventListener("message",Y),()=>{window.removeEventListener("message",Y)}}),[_,Y]),(0,l.useEffect)((()=>{var e,t,i,o,n,r;A.current=!1,P.current||_||(N(0),null===(i=null===(t=null===(e=O.current)||void 0===e?void 0:e.swiper)||void 0===t?void 0:t.play)||void 0===i||i.call(t),null===(r=null===(n=null===(o=O.current)||void 0===o?void 0:o.audio)||void 0===n?void 0:n.play)||void 0===r||r.call(n))}),[u]);const U=(0,l.useCallback)}),[d]),{handleLightenVideoControls:G}=(0,Si.MQ)();(0,l.useEffect)}),[]);const K=(0,l.useCallback)((e=>{P.current=e,e!==S&&!_&&q()}),[S,_,q]),Q=(0,Ii.fz)(zi.p),[J,X]=(0,l.useState)(!1),$=(0,l.useCallback)((()=>{Q.handleClickShare({author_id:f,group_id:u,enter_method:"click_context_menu",media_type:"photo"}),X(!0)}),[X]),ee=(0,Ne.W)({actionWhenUserLoggedIn:$,modalConfig:{query:{enter_method:"click_share"}}}),te=(0,Ne.W)({actionWhenUserLoggedIn:(0,l.useCallback)((()=>{Zi.y.handleCommentClick(Object.assign(Object.assign({},s),{action:"open",enter_method:"click_context_menu",media_type:"photo"})),d()}),[d,s]),modalConfig:{query:{enter_method:"click_comment",group_id:u}}}),ie=(0,l.useCallback)}),[X]),{user:oe}=null!==(i=(0,m.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},[,{openContextMenu:ne}]=(0,r.b)(Li.vI),re=(0,l.useCallback)((e=>{e.preventDefault();const t=["link"];(0,Mi.b)("custom_right_click_menu",!1).should_show_additional_options&&t.push("like","comment","user"),oe&&!(null==oe?void 0:oe.hasIMPermission)||t.push("share"),qi.s.handleContextMenu({media_type:"photo"}),ne({location:{x:e.clientX,y:e.clientY},videoInfo:{downloadAddr:"",videoId:u,author:g,videoElement:e.target,videoLikeHandle),videoCommentHandler:te,videoShareHandler:ee,mediaType:"photo"},menuOptions:t})}),[]),ae=(0,l.useMemo)((()=>(0,n.jsx)(Oi._,{onLinkClick:z,styleType:4,item:o,e2eTag:"browse-music",teaParams:s},void 0)),[z,o,s]);if(!o||!(null==o?void 0:o.video))return(0,$e.G)(["item.video"]);const le=(0,n.jsxs)(n.Fragment,{children:[c,(0,n.jsxs)(ir,{children:[(null==p?void 0:p.title)&&(0,n.jsx)(pr,{children:null==p?void 0:p.title},void 0),(0,n.jsx)(Ai.p,Object.assign({onlyKey:u,lineClamp:eo.q4,overflowLineNum:eo.E4},{children:(0,n.jsx)(Pi.Q,{onLinkClick:z,item:o,e2eTag:"browse-video-desc",reportParams:s},void 0)}),void 0),ae,!_&&(0,n.jsx)(Bi.Z,{item:o,playMode:4,poiTeaParams:s,capcapAnchorTeaParams:s,noPaidPartnerTag:!0},void 0)]},void 0)]},void 0),se=(0,n.jsx)(hr,{children:le},void 0);return(0,n.jsxs)(or,Object.assign({ref:L,onContextMenu:re},{children:[(0,n.jsxs)(ar,Object.assign({onMouseMove:G,ref:M},{children:[(0,n.jsx)(rr,{children:(0,n.jsx)(ha.C,{ref:O,mode:4,playModeForTea:4,item:o,teaParams:s,index:0,onAudioPlay:F,onTimeUpdate:N},void 0)},void 0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_a,{photoVideoRef:O,pause:S,item:o,teaParams:Z,onDoubleClick:E,onTogglePlay:q},void 0),(0,n.jsx)(Bo,{onlyShowExtra:T,onClickComment:U,itemId:u},void 0)]},void 0),(0,n.jsx)(Ri.C,{onReportMaskVisibleChange:K,styleContainer:Sa,item:o},void 0),(null==h?void 0:h[0])&&(0,n.jsx)(sr,{children:(0,n.jsx)($i,{info:null==h?void 0:h[0]},void 0)},void 0)]}),void 0),se,J&&(0,n.jsx)(Ei.J,{visible:J,videoId:u,onClose:ie},void 0)]}),void 0)})),La=(0,A.l)((function({videoChangeMethodRef:e}){var t;const[i,o]=(0,l.useState)(!1),[{currentIndex:s,itemListKey:d},c]=(0,r.b)(Se),u=(0,l.useRef)(null),p=(0,l.useRef)(null);(0,V.$v)(4),(0,l.useEffect)}),[]);const{browserList:m}=(0,a.m)(v.h,{selector:e=>{const t=e[null!=d?d:""];return t?{browserList:t.browserList,listHasMore:!0,listLoading:t.loading}:{browserList:[],listHasMore:!0,listLoading:!1}},dependencies:[]}),[{currentItem:h,subtitleInfos:g}]=(0,r.b)(y.A,{selector:e=>{var t,i;return{itemList:m.map])),currentItem:e[m[s]],subtitleInfos:null===(i=null===(t=e[m[s]])||void 0===t?void 0:t.video)||void 0===i?void 0:i.subtitleInfos}},dependencies:[m,s]}),x=null!==(t=null==h?void 0:h.id)&&void 0!==t?t:"",f=(0,l.useRef)(null);(0,l.useEffect)((()=>{var t;"mini_player_switch"!==e.current&&x&&function(e){if(e){const{y:t}=e.getBoundingClientRect();return t<-100}return!1}(f.current)&&(null===(t=f.current)||void 0===t||t.scrollIntoView())}),[x]);const w=(0,l.useMemo))),[]),{author:C="",scheduleTime:_}=null!=h?h:w,j=Kt({id:x});(0,l.useEffect)((()=>{g&&(null==g?void 0:g.length)>0&&c.downloadTranscript({subtitleInfos:g})}),[g,c]);const I=(0,k.K$)(h),S=(0,l.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:t="",format:i="",videoQuality:o="",encodeUserTag:n="",codecType:r="",definition:a=""}={},authorId:l="",id:s="",secret:d=!1,forFriend:c=!1,adLabelVersion:u,poi:v,subVideoMeta:p}=null!=h?h:{video:{}};return Object.assign({author_id:l,group_id:s,bitrate:Number(e),encodedType:t,format:i,videoQuality:o,encodeUserTag:n,codecType:r,definition:a,secret:d,forFriend:c,isPaidPartnership:2===u,poi_id:null==v?void 0:v.id,is_sub_only_video:p?1:0},I)}),[h,I]),{isInitLoading:T,isEmpty:L}=Be();Qt({onPageWidthBreakPoint:(0,l.useCallback)}),[i])});const M=(0,l.useCallback)}),[u]),O=(0,b.HX)();if(L)return null;const A=(0,l.useMemo)((()=>C&&!O?(0,n.jsx)(ii,Object.assign({ref:u},{children:(0,n.jsx)(mt,{teaParams:S,uniqueId:C,videoId:x},void 0)}),void 0):null),[C,x,O,S]);return(0,n.jsxs)(Xt,{children:[(0,n.jsx)($t,{ref:f},void 0),(0,n.jsx)(ei,Object.assign({style:{justifyContent:"center"}},{children:(0,n.jsxs)(ti,Object.assign({isPhoto:!0,isHideSideComponent:O},{children:[T?(0,n.jsx)(ri,{},void 0):(0,n.jsx)(Ta,{onScrollToComment:M,teaParams:S,item:h,currentIndex:s,ref:p,totalLength:m.length,videoChangeMethodRef:e,authorComponent:A},void 0),(0,n.jsx)(Vt,{scheduleTime:Number(_),ref:j,teaParams:S,itemId:x,disableReply:!1},void 0)]}),void 0)}),void 0)]},void 0)}));var Ma=i(23158);const Oa=S()(d.j,(0,c.Z)("video_detail"))((function({containerID:e,tabIndex:t}){var i;const[{statusCode:o},d]=(0,r.b)(Ve),{enterForyou:c}=(0,a.m)(u.e),[{list:I,preloadList:S},M]=(0,r.b)(v.h,{selector:e=>{var t,i,o,n;return{list:null!==(i=null===(t=e.video)||void 0===t?void 0:t.list)&&void 0!==i?i:[],preloadList:null!==(n=null===(o=e.video)||void 0===o?void 0:o.preloadList)&&void 0!==n?n:[]}},dependencies:[]}),O=(0,l.useRef)("scroll"),A=(0,r.q)(Se),{id:P}=(0,s.UO)(),[V,B]=(0,l.useState)(void 0),D=null!=V?V:P;!function(){var e;const t=(0,s.k6)(),{user:i,region:o=""}=null!==(e=(0,m.Lh)]),[]))&&void 0!==e?e:{},{id:n}=(0,s.UO)();J((()=>{const{search:e,pathname:r,hash:a}=window.location,l=(0,H.parse)(e),s=Object.assign({},l);l.cid&&"string"==typeof l.cid&&(delete s.cid,window.history.replaceState(window.history.state,window.document.title,`${r}?${(0,H.stringify)(s)}${a}`));const d=ee.SV.includes(o),c=X.$I.getItem("cid"),u=null!=c?c:l.cid;if(!d||!u||"string"!=typeof u)return;if(!Boolean(i))return X.$I.setItem("cid",u),void X.$I.setItem("vid",n);const v=X.$I.getItem("vid");if(X.$I.removeAll(),void 0!==v&&v!==n)return;const p=(0,$._)(u);p&&(s.browserMode="1",t.push(`${r}?${(0,H.stringify)(s)}${a}`,{cid:p,vid:n,browserMode:!0}))}),[t,i,o,n])}(),(()=>{const{list:e}=(0,a.m)(v.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,statusCode:0}},dependencies:[]}),{search:t,pathname:i}=(0,s.TH)(),o=(0,G.cQ)(i),{setEnterForyou:n}=(0,r.q)(u.e),d=(0,a.m)(K.f,{selecto},dependencies:[]}),c=e[d],p=(0,a.m)(y.A,{selector:e=>e[null!=c?c:""],dependencies:[c]}),m=(0,N.YA)()(p),h=function(e,t,i){return t?(0,H.stringifyUrl)({url:i,query:F()((0,H.parse)(e),"sender_device","sender_web_id","item_id")},{skipNull:!0}):`${(0,H.stringifyUrl)({url:"/foryou",query:F()((0,H.parse)(e),"sender_device","sender_web_id","item_id")},{skipNull:!0})}#${i}`}(t,o,m);(0,l.useEffect)((()=>{location.pathname!==te.nT.foryou&&d>0&&e.length>0&&ie.W.handleEnterTrending({enter_method:"see_more"});const t=o?d>=0:d>0;(location.pathname===te.nT.foryou||t)&&e.length>0&&!(null==p?void 0:p.isContentClassified)&&(n(!o),window.history.replaceState(window.history.state,"video-detail",h))}),[d,e,h,n,o,null==p?void 0:p.isContentClassified])})(),(()=>{const{id:e}=(0,s.UO)(),{pathname:t,search:i}=(0,s.TH)(),o=(0,l.useMemo)((()=>{var e;return null===(e=/^\/@(.*)\/video\/\d+/.exec(t))||void 0===e?void 0:e[1]}),[t]),n=(0,l.useMemo)((()=>{var e;return null===(e=/^\/@.*\/video\/(\d+)/.exec(t))||void 0===e?void 0:e[1]}),[t]),r=(0,a.m)(y.A,{selecto],dependencies:[n]}),d=(0,N.YA)()(r),c=(0,Y.p)(null==r?void 0:r.author),{uniqueId:u,secUid:v}=null!=c?c:{},p=(0,U.PzO)({uniqueId:u,secUid:v});(0,l.useEffect)((()=>{if(p&&n===e&&o!==p){const e=`${d}${i}`,t=Object.assign(Object.assign({},history.state),{as:e});window.history.replaceState(t,"open_video_page",e)}}),[e,p,o,i,n,d])})(),(0,p.sp)(S);const R=(0,m.Lh)]),[]),E=null!==(i=(0,h.N8)(null==R?void 0:R.abTestVersion,"webapp_guest_mode"))&&void 0!==i?i:"v1",W=T.B;"v1"===E&&W(),(0,Ma.m)(),(0,g.kg)();const Z=(0,b.HX)(),z=(0,l.useCallback)}),[B]);(0,l.useEffect)}),[Z,z]);const{abTestVersion:q,user:Q,language:oe,appType:ne}=(0,x.m7)((0,m.Lh)]),[]));(0,l.useEffect)((()=>{d.getVideoDetail({itemId:D,abTestVersion:q,user:Q,language:oe,appType:ne})}),[d,D,q,Q,oe,ne]),(0,l.useEffect)}),[]);const{browserList:re}=(0,a.m)(v.h,{selector:e=>{const t=e.video;return t?{browserList:t.browserList}:{browserList:[]}},dependencies:[]}),{currentItem:ae}=(0,a.m)(y.A,{selector:e=>({currentItem:e[re[0]]}),dependencies:[re]}),le=(0,k.kw)(ae),{aweme_type:se,pic_cnt:de}=(0,k.K$)(ae),ce=(0,l.useMemo)((()=>null==ae?void 0:ae.id),[ae]),ue=(0,l.useMemo)d),[ae]),ve=(0,l.useMemo)((()=>D===(null==ae?void 0:ae.id)),[ae,D]),pe=(0,l.useMemo)((()=>({aweme_type:se,pic_cnt:de,group_id:ce,author_id:ue,notReady:void 0===ce&&0===o||!ve})),[se,de,o,ce,ue,ve]);(0,L.a)(c?"homepage_hot":le?"graphic_detail":"video_detail",void 0,pe),(0,l.useEffect)((()=>{1===I.length&&"related_list_click"!==O.current&&(A.handleFirstVideo(),!Z&&!le&&M.getRelatedList({key:"video",itemId:D,abTestVersion:q,user:Q,language:oe}))}),[D,q,Q,oe,I,Z,le]),(0,l.useEffect)((()}),[D,M]);const[{isModalShow:me},he]=(0,r.b)(w.D,{selector:e=>({isModalShow:e.isModalShow}),dependencies:[]}),ge=(0,l.useCallback)}),[he]),{isVideoDetailExperiment:be}=(0,C.iA)();return(0,n.jsxs)(Ee,Object.assign({isHideSideComponent:Z,id:e,tabIndex:t},{children:[le?(0,n.jsx)(La,{videoChangeMethodRef:O},void 0):(0,n.jsx)(ma,{videoChangeMethodRef:O},void 0),!be&&!Z&&(0,n.jsx)(_.vr,{},"static-fixed"),be&&(0,n.jsx)(j._,{visible:me,onClose:ge},void 0)]}),void 0)})),Aa=Oa},5545}}]);