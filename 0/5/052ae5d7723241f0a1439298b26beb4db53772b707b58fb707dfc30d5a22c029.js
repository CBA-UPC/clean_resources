/*!
 * Sizzle CSS Selector Engine v1.9.4-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-04-24
 */
window.getSizzleForTarget=function(aA,b,r){var G,m,w,R,U,ag,aG,S,aj,L,x,at,an,aB,l,P,av="sizzle"+-(new Date()),T=aA.document,aD={},aE=0,ao=0,f=J(),au=J(),Q=J(),ah=false,N=function(){return 0},az=typeof r,ab=1<<31,Y=aD.hasOwnProperty,ax=[],ay=ax.pop,W=ax.push,c=ax.push,v=ax.slice,k=ax.indexOf||d="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",y="[\\x20\\t\\r\\n\\f]",a="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",V=a.replace("w","w#"),aq="\\["+y+"*("+a+")"+y+"*(?:([*^$|!~]?=)"+y+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+y+"*\\]",t=":("+a+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+aq.replace(3,8)+")*)|.*)\\)|)",A=new RegExp("^"+y+"+|((?:^|[^\\\\])(?:\\\\.)*)"+y+"+$","g"),D=new RegExp("^"+y+"*,"+y+"*"),K=new RegExp("^"+y+"*([>+~]|"+y+")"+y+"*"),al=new RegExp(y+"*[+~]"),C=new RegExp("="+y+"*([^\\]'\"]*)"+y+"*\\]","g"),ad=new RegExp(t),ae=new RegExp("^"+V+"$"),am={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a.replace("w","w*")+")"),ATTR:new RegExp("^"+aq),PSEUDO:new RegExp("^"+t),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+y+"*(even|odd|(([+-]|)(\\d*)n|)"+y+"*(?:([+-]|)"+y+"*(\\d+)|))"+y+"*\\)|)","i"),bool:new RegExp("^(?:"+d+")$","i"),needsContext:new RegExp("^"+y+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+y+"*((?:-\\d)?\\d*)"+y+"*\\)|)(?=[^-]|$)","i")},aa=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,j=/^(?:input|select|textarea|button)$/i,u=/^h\d$/i,X=/'|\\/g,B=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ap=try{c.apply((ax=v.call(T.childNodes)),T.childNodes);ax[T.childNodes.length].nodeType}catch(M){c={apply:ax.length?}unction J(){var e,i=[];return(e=function(aH,aI){if(i.push(aH+=" ")>w.cacheLength){delete e[i.shift()]}return(e[aH]=aI)})}nction E(aO,aH,aS,aU){var aT,aL,aM,aQ,aR,aK,aJ,e,aI,aP;if((aH?aH.ownerDocument||aH:T)!==L){aj(aH)}aH=aH||L;aS=aS||[];if(!aO||typeof aO!=="string"){return aS}if((aQ=aH.nodeType)!==1&&aQ!==9){return[]}if(at&&!aU){if((aT=ac.exec(aO))){if((aM=aT[1])){if(aQ===9){aL=aH.getElementById(aM);if(aL&&aL.parentNode){if(aL.id===aM){aS.push(aL);return aS}}else{return aS}}else{if(aH.ownerDocument&&(aL=aH.ownerDocument.getElementById(aM))&&P(aH,aL)&&aL.id===aM){aS.push(aL);return aS}}}else{if(aT[2]){c.apply(aS,aH.getElementsByTagName(aO));return aS}else{if((aM=aT[3])&&aD.getElementsByClassName&&aH.getElementsByClassName){c.apply(aS,aH.getElementsByClassName(aM));return aS}}}}if(aD.qsa&&(!an||!an.test(aO))){e=aJ=av;aI=aH;aP=aQ===9&&aO;if(aQ===1&&aH.nodeName.toLowerCase()!=="object"){aK=q(aO);if((aJ=aH.getAttribute("id"))){e=aJ.replace(X,"\\$&")}else{aH.setAttribute("id",e)}e="[id='"+e+"'] ";aR=aK.length;while(aR--){aK[aR]=e+p(aK[aR])}aI=al.test(aO)&&aH.parentNode||aH;aP=aK.join(",")}if(aP){try{c.apply(aS,aI.querySelectorAll(aP));return aS}catch(aN){}finally{if(!aJ){aH.removeAttribute("id")}}}}}return aC(aO.replace(A,"$1"),aH,aS,aU)}U=E.isXML=aj=E.setDocument=function(e){var i=e?e.ownerDocument||e:T;if(i===L||i.nodeType!==9||!i.documentElement){return L}L=i;x=i.documentElement;at=!U(i);aD.getElementsByTagName=n(;aD.attributes=n(;aD.getElementsByClassName=n(;aD.sortDetached=n(;aD.getById=n(;if(aD.getById){w.find.ID=w.filter.ID=else{w.find.ID=w.filter.ID=w.find.TAG=aD.getElementsByTagName?w.find.CLASS=aD.getElementsByClassName&&aB=[];an=[];if((aD.qsa=O(i.querySelectorAll))){n(;n(}if((aD.matchesSelector=O((l=x.webkitMatchesSelector||x.mozMatchesSelector||x.oMatchesSelector||x.msMatchesSelector)))){n(}an=an.length&&new RegExp(an.join("|"));aB=aB.length&&new RegExp(aB.join("|"));P=O(x.contains)||x.compareDocumentPosition?N=x.compareDocumentPosition?function(aI,aH){var aO,aL=0,aN=aI.parentNode,aK=aH.parentNode,aJ=[aI],aM=[aH];if(aI===aH){ah=true;return 0}else{if(!aN||!aK){return aI===i?-1:aH===i?1:aN?-1:aK?1:S?(k.call(S,aI)-k.call(S,aH)):0}else{if(aN===aK){return g(aI,aH)}}}aO=aI;while((aO=aO.parentNode)){aJ.unshift(aO)}aO=aH;while((aO=aO.parentNode)){aM.unshift(aO)}while(aJ[aL]===aM[aL]){aL++}return aL?g(aJ[aL],aM[aL]):aJ[aL]===T?-1:aM[aL]===T?1:0};return L};E.matches=E.matchesSelector=E.contains=E.attr=function(aH,e){if((aH.ownerDocument||aH)!==L){aj(aH)}var i=w.attrHandle[e.toLowerCase()],aI=i&&(Y.call(w.attrHandle,e.toLowerCase())?i(aH,e,!at):r);return aI===r?aD.attributes||!at?aH.getAttribute(e):(aI=aH.getAttributeNode(e))&&aI.specified?aI.value:null:aI};E.error=E.uniqueSort=function g(i,e){var aI=e&&i,aH=aI&&(~e.sourceIndex||ab)-(~i.sourceIndex||ab);if(aH){return aH}if(aI){while((aI=aI.nextSibling)){if(aI===e){return -1}}}return i?1:-1}function Z(i,e,aI){var aH;return aI?r:(aH=i.getAttributeNode(e))&&aH.specified?aH.value:i[e]===true?e.toLowerCase():null}function H(i,e,aI){var aH;return aI?r:(aH=i.getAttribute(e,e.toLowerCase()==="type"?1:2))}.getText=function(aK){var aJ,aH="",aI=0,e=aK.nodeType;if(!e){for(;(aJ=aK[aI]);aI++){aH+=R(aJ)}}else{if(e===1||e===9||e===11){if(typeof aK.textContent==="string"){return aK.textContent}else{for(aK=aK.firstChild;aK;aK=aK.nextSibling){aH+=R(aK)}}}else{if(e===3||e===4){return aK.nodeValue}}}return aH};w=E.selectors={cacheLength:50,createPseudo:s,match:am,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:CHILD:PSEUDO:function(i){var e,aH=!i[5]&&i[2];if(am.CHILD.test(i[0])){return null}if(i[4]){i[2]=i[4]}else{if(aH&&ad.test(aH)&&(e=q(aH,true))&&(e=aH.indexOf(")",aH.length-e)-aH.length)){i[0]=i[0].slice(0,e);i[2]=aH.slice(0,e)}}return i.slice(0,3)}},filter:{TAG:CLASS:ATTR:CHILD:PSEUDO:,pseudos:{not:s(,has:s(,contains:s(,lang:s(,target:root:function(e){return e===x},focus:enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:selected:empty:parent:header:function(e){return u.test(e.nodeName)},input:button:text:first:ar(,last:ar(,eq:ar(,even:ar(function(e,aI){var aH=0;for(;aH<aI;aH+=2){e.push(aH)}return e}),odd:ar(,lt:ar(,gt:ar(}};for(G in {radio:true,checkbox:true,file:true,password:true,image:true}){w.pseudos[G]=F(G)}for(G in {submit:true,reset:true}){w.pseudos[G]=h(G)}on aw(aM){var aH,aK,aI,aL=aM.length,aP=w.relative[aM[0].type],aQ=aP||w.relative[" "],aJ=aP?1:0,aN=z(aQ,true),aO=z(aQ,true),e=[;for(;aJ<aL;aJ++){if((aK=w.relative[aM[aJ].type])){e=[z(aF(e),aK)]}else{aK=w.filter[aM[aJ].type].apply(null,aM[aJ].matches);if(aK[av]){aI=++aJ;for(;aI<aL;aI++){if(w.relative[aM[aI].type]){break}}return o(aJ>1&&aF(e),aJ>1&&p(aM.slice(0,aJ-1)).replace(A,"$1"),aK,aJ<aI&&aw(aM.slice(aJ,aI)),aI<aL&&aw((aM=aM.slice(aI))),aI<aL&&p(aM))}e.push(aK)}}return aF(e)}function ai(aI,aH){var aK=0,e=aH.length>0,aJ=aI.length>0,i=function(aU,aO,aT,aS,a0){var aP,aQ,aV,aZ=[],aY=0,aR="0",aL=aU&&[],aW=a0!=null,aX=aG,aN=aU||aJ&&w.find.TAG("*",a0&&aO.parentNode||aO),aM=(aE+=aX==null?1:Math.random()||0.1);if(aW){aG=aO!==L&&aO;m=aK}for(;(aP=aN[aR])!=null;aR++){if(aJ&&aP){aQ=0;while((aV=aI[aQ++])){if(aV(aP,aO,aT)){aS.push(aP);break}}if(aW){aE=aM;m=++aK}}if(e){if((aP=!aV&&aP)){aY--}if(aU){aL.push(aP)}}}aY+=aR;if(e&&aR!==aY){aQ=0;while((aV=aH[aQ++])){aV(aL,aZ,aO,aT)}if(aU){if(aY>0){while(aR--){if(!(aL[aR]||aZ[aR])){aZ[aR]=ay.call(aS)}}}aZ=ak(aZ)}c.apply(aS,aZ);if(aW&&!aU&&aZ.length>0&&(aY+aH.length)>1){E.uniqueSort(aS)}}if(aW){aE=aM;aG=aX}return aL};return e?s(i):i}ag=E.compile=unction aC(aI,e,aJ,aM){var aK,aO,aH,aP,aN,aL=q(aI);if(!aM){if(aL.length===1){aO=aL[0]=aL[0].slice(0);if(aO.length>2&&(aH=aO[0]).type==="ID"&&e.nodeType===9&&at&&w.relative[aO[1].type]){e=(w.find.ID(aH.matches[0].replace(B,ap),e)||[])[0];if(!e){return aJ}aI=aI.slice(aO.shift().value.length)}aK=am.needsContext.test(aI)?0:aO.length;while(aK--){aH=aO[aK];if(w.relative[(aP=aH.type)]){break}if((aN=w.find[aP])){if((aM=aN(aH.matches[0].replace(B,ap),al.test(aO[0].type)&&e.parentNode||e))){aO.splice(aK,1);aI=aM.length&&p(aO);if(!aI){c.apply(aJ,aM);return aJ}break}}}}}ag(aI,aL)(aM,e,!at,aJ,al.test(aI));return aJ}w.pseudos.nth=w.pseudos.eq;f.prototype=w.filters=w.pseudos;w.setFilters=new af();aD.sortStable=av.split("").sort(N).join("")===av;aj();[0,0].sort(N);aD.detectDuplicates=ah;n(function(aI){aI.innerHTML="<a href='#'></a>";if(aI.firstChild.getAttribute("href")!=="#"){var e="type|href|height|width".split("|"),aH=e.length;while(aH--){w.attrHandle[e[aH]]=H}}});n(function(aI){if(aI.getAttribute("disabled")!=null){var e=d.split("|"),aH=e.length;while(aH--){w.attrHandle[e[aH]]=Z}}});b.Sizzle=E};var _AT=_AT||{};(function(){_AT.config=extend({atServer:"cdn.tt.omtrdc.net",atLocation:"/cdn",trackingTimeout:500,loadSizzle:true,debug:false,minified:false,pollDOM:true,pollTime:50,cdqConnectTimeout:50,fallbackTimeOut:3000,tryAfterLoadMaxCount:(15*60*1000)/50,numAttemptsToPreventFlicker:15,showElementsOnDomReady:true},_AT.config);var lastActions=null;var minStr=_AT.config.minified?".min":"";_AT.shouldDelayLoad=false;_AT.pollingIntervalId=null;_AT.actions=[];var admin=~window.location.toString().indexOf("mboxEdit=1")||~document.referrer.indexOf("mboxEdit=1")||~window.location.toString().indexOf("adobe_authoring_enabled=1")||~document.referrer.indexOf("adobe_authoring_enabled=1");var debugWindow=~window.location.search.indexOf("_AT_Debug=window");var debugConsole=~window.location.search.indexOf("_AT_Debug=console");var getCurrentTime=_AT.getCurrentTime=function(){var d=new Date();return d.toString()+" "+d.getMilliseconds()+" ms"};_AT.config.debug=(debugConsole||debugWindow);if(debugWindow){_AT.debugWindow=window.open("about:blank");_AT.debugWindowDocument=_AT.debugWindow.document;_AT.debugWindowDocument.write(_AT.getCurrentTime());_AT.debugWindowDocument.write("<hr/>")}if(!admin&&typeof mboxFactoryDefault!=="undefined"){var redirectCookie=mboxFactoryDefault.getCookieManager().getCookie("at-redirect-offer");_AT.isRedirectedPage=false;if(redirectCookie!==null){_AT.isRedirectedPage=(redirectCookie!==window.location.toString())}mboxFactoryDefault.getCookieManager().deleteCookie("at-redirect-offer")}window.getSizzleForTarget(window,_AT);(typeof _AT.Sizzle==="function"&&typeof _AT.Sizzle.matches==="function"&&typeof _AT.Sizzle.matchesSelector==="function")?(_AT.querySelectorAll=_AT.Sizzle):(_AT.querySelectorAll=document.querySelectorAll.bind(document));function extend(){var target={};for(var i=0;i<arguments.length;i++){var obj=arguments[i];for(var prop in obj){target[prop]=obj[prop]}}return target}var querySelectorAll=function(selector){if(_AT.querySelectorAll){return _AT.querySelectorAll.call(document,selector)}else{error("No query selector engine available")}};var onReady=_AT.onReady=function(fn){var doc=window.document;if(doc.readyState==="complete"){fn.call(window,"lazy");return}var done=false;var top=true;var root=doc.documentElement;var add,rem,pre;if(doc.addEventListener){add="addEventListener";rem="removeEventListener";pre=""}else{add="attachEvent";rem="detachEvent";pre="on"}var init=function(e){if(e.type==="readystatechange"&&doc.readyState!=="complete"){return}(e.type==="load"?window:doc)[rem](pre+e.type,init,false);if(!done&&(done=true)){fn.call(window,e.type||e)}};var poll=if(doc.createEventObject&&root.doScroll){try{top=!window.frameElement}catch(e){}if(top){poll()}}doc[add](pre+"DOMContentLoaded",init,false);doc[add](pre+"readystatechange",init,false);window[add](pre+"load",init,false)};var addListener=_AT.addListener=function(el,type,handler){var eventHandler=handler;if(el.attachEvent){eventHandler=el.attachEvent("on"+type,handler)}else{if(el.addEventListener){el.addEventListener(type,eventHandler,false)}}return eventHandler};var removeListener=_AT.removeListener=var stopEvent=_AT.stopEvent=function(evt){if(evt.preventDefault){evt.preventDefault()}else{evt.returnValue=false}return false};ar log=_AT.log=function(){var args=Array.prototype.slice.call(arguments),index,prepend=false,tempDiv,DOCUMENT_FRAGMENT_NODE=11;if(_AT.config.debug){if(typeof args[0]==="string"){args[0]="AT: "+args[0]}args[args.length]="| Executed at "+getCurrentTime();if((typeof args[0]==="object")&&(typeof args[0].options==="object")){if(debugWindow){if(args[0].options.prepend===true){prepend=true}if(args[0].options.style==="error"){args.splice(1,0,"<div style='color: red'>");args.push("</div>")}}args.shift()}if(debugWindow){for(index=0;index<args.length;index+=1){if(args[index].nodeType===DOCUMENT_FRAGMENT_NODE){tempDiv=document.createElement("div");tempDiv.appendChild(args[index]);args[index]=tempDiv}if(args[index]&&args[index].outerHTML){args[index]=htmlEntities(args[index].outerHTML)}if(typeof args[index]=="object"){args[index]="<pre>"+htmlEntities(JSON.stringify(args[index],null,"  "))+"</pre>"}}tempDiv=_AT.debugWindowDocument.createElement("div");tempDiv.innerText=args.join(" ");tempDiv.innerHTML+="<hr/>";if(prepend){_AT.debugWindowDocument.body.insertBefore(tempDiv,_AT.debugWindowDocument.body.childNodes[2])}else{_AT.debugWindowDocument.body.appendChild(tempDiv)}return}if(typeof console!=="undefined"){console.log.apply(console,args)}}};var error=_AT.errorLog=function(){if(typeof console!=="undefined"){var args=Array.prototype.slice.call(arguments);if(typeof args[0]==="string"){args[0]="AT: "+args[0]}console.error.apply(console,args)}};function _setText(element,content){element.innerHTML="";element.appendChild(document.createTextNode(content))}function applyAction(action,supressDebug){var type=action.action,contentType=action.contentType;action.numAttempts++;if(type==="trackLoad"){trackLoad(action.mboxName);return}var elems=querySelectorAll(action.selector);if(elems&&elems.length===1){if(!supressDebug){_AT.log("Will "+type+" on "+elems.length+" elements")}for(var i=0,n=elems.length,elem;i<n;i++){elem=elems[i];if(type==="setContent"){contentType=contentType||"html";_AT.log("Setting "+contentType+" content to fragment of ",action.content,"on",elem);if(contentType==="text"){_setText(elem,action.content)}else{elem.innerHTML=action.content}if(action.recsClickTrackId){elem.children[0].id=action.recsClickTrackId}executeScript(elem)}else{if(type==="remove"){log("Removing ",elem);if(elem.parentNode){elem.parentNode.removeChild(elem)}}else{if(type==="setAttribute"){log("Setting attribute",action.attribute,"to",action.value,"on",elem);if(actionIsToChangeImageSrc(action)){hideImageUntilIsLoaded({element:elem,src:action.value});return true}elem.setAttribute(action.attribute,action.value)}else{if(type==="setStyle"){log("Setting style",action.property,"to",action.value,"on",elem);if(elem.style.setProperty){elem.style.setProperty(action.property,action.value,action.priority||"")}else{elem.style[action.property]=action.value}}else{if(type==="trackSubmit"){log("Adding submit tracker on",elem,"with mbox",action.mboxName);addSubmitTracker(elem,action.mboxName)}else{if(type==="trackClick"){log("Adding click tracker on",elem,"with selector",action.selector);addClickTracker(elem,action)}else{if(type==="rearrange"){log("Rearraning item from",action.from,"to",action.to,"in",elem);return rearrange(action,elem)}else{if(type==="resize"){log("Resizing item",elem);resize(action,elem)}else{if(type==="move"){log("Moving element",elem,"top:",action.finalTopPosition,"left:",action.finalLeftPosition);move(action,elem)}else{if(type==="insertBefore"||type==="insertAfter"){log("Inserting ",(type==="insertBefore"?"before ":"after "),"fragment of ",action.content,"to element ",elem);insertElement(action,elem)}else{if(type==="customCode"){log("Adding custom code ",action.content,"to element ",elem);addCustomCode(action,elem)}else{if(type==="prependContent"){log("Prepending content ",action.content,"to element ",elem);elem.insertBefore(getFragment(action.content),elem.firstChild)}else{if(type==="replaceContent"&&elem.parentNode){log("Replacing content ",action.content,"to element ",elem);elem.parentNode.insertBefore(getFragment(action.content),elem);removeElement(elem)}}}}}}}}}}}}}}return elems.length}else{if(!supressDebug){log("Skipping "+type+", No element or More than 1 elements matched: "+action.selector)}}}var executeScript=function(element){var scripts=element.getElementsByTagName("script"),index,scriptSrc,async;for(index=0;index<scripts.length;index+=1){scriptSrc=scripts[index].src;async=scripts[index].getAttribute("async");try{if(scriptSrc){(async==="false")?loadScriptSynchronously(scriptSrc):loadScript(scriptSrc)}else{window.eval(scripts[index].innerHTML)}}catch(exception){log("Error occurred executing script: ",scripts[index],exception.message)}}};var actionIsToChangeImageSrc=var preloadImage=function(actionJson){var cacheImage=document.createElement("img");cacheImage.src=actionJson.value};function hideImageUntilIsLoaded(imageObj){var image=imageObj.element,hasClass=(" "+image.className+" ").indexOf(" mboxDefault ")>-1;if(!hasClass){image.className+=" mboxDefault"}image.onload=function(){removeClassName(image,"mboxDefault");image.onload=""};image.src=imageObj.src}var removeClassName=function(elem,className){if(elem){elem.className=elem.className.replace(new RegExp("(?:^|\\s+)"+className+"(?:\\s+|$)","g"),"")}};var applyActions=_AT.applyActions=function(actions,removeWhenApplied){var action,isApplied;if(actions&&actions.length){lastActions=removeWhenApplied?[]:actions;for(var i=0,ni=actions.length;i<ni;i++){action=actions[i];isApplied=applyAction(action,removeWhenApplied);if(isApplied){showElementForAction(action)}if(action.numAttempts===_AT.config.numAttemptsToPreventFlicker){log("Allowed Unsuccessful Polling Attempts reached - Showing element: ",action);showElementForAction(action)}if(removeWhenApplied&&isApplied){lastActions.push(actions[i]);actions.splice(i,1);i--;ni--}}}else{log("No actions found")}};var prepareBeforeApplyingActions=function(actions){var index,actionJson,selector;log("Prepare Stage - Hiding Elements before applying actions: ",actions);for(index=0;index<=(actions.length-1);index++){actionJson=actions[index];actionJson.numAttempts=0;selector=actionJson.selector;if(actionIsToChangeImageSrc(actionJson)){preloadImage(actionJson)}if(actionJson.action==="setContent"||actionJson.action==="replaceContent"){var div=document.createElement("div");div.innerHTML=actionJson.content}if(selector.indexOf("CLKTRK#")===0){var firstSpaceIndex=selector.indexOf(" ");actionJson.selector=selector.substring(firstSpaceIndex+1);actionJson.recsClickTrackId=selector.substring(7,firstSpaceIndex)}if(actions[index].action!=="trackClick"){hideElementBeforeApplyingAction(actionJson)}}};var checkIfRedirectAction=function(actionObject){return actionObject.action==="redirect"};var checkIfCustomCodeAction=var applyRedirectAction=function(redirectAction){if(!_AT.isRedirectedPage&&typeof mboxFactoryDefault!=="undefined"){mboxFactoryDefault.getCookieManager().setCookie("at-redirect-offer",window.location.toString(),30);log("_AT: Redirecting page to ",redirectAction.url,isPropertyTrue(redirectAction.includeAllUrlParameters)?"with query parameters":"without query parameters",isPropertyTrue(redirectAction.passMboxSession)?"with mbox session":"without mbox session");redirectPage(redirectAction,document.documentElement)}};var getFirstActionInActionJson=var isArray=_AT.isArray=function(obj){var toString=Object.prototype.toString,nativeIsArray=Array.isArray;if(nativeIsArray){return nativeIsArray(obj)}return toString.call(obj)==="[object Array]"};var applyWhenReady=_AT.applyWhenReady=function(actions){var firstActionInActionJson=getFirstActionInActionJson(actions);if(checkIfRedirectAction(firstActionInActionJson)){applyRedirectAction(firstActionInActionJson);return}if(checkIfCustomCodeAction(firstActionInActionJson)&&firstActionInActionJson.selector==="HEAD"){addCustomCode(firstActionInActionJson,document.head);actions.splice(0,1)}prepareBeforeApplyingActions(actions);if(_AT.config.pollDOM){applyWithPolling(actions)}else{applyOnDOMReady(actions)}};var applyWithPolling=_AT.applyWithPolling=function(actions){log("Preparing to apply "+actions.length+" actions with polling...");log("Actions to be applied :",actions);var doApply=function(){if(_AT.actions.length){applyActions(_AT.actions,true)}else{clearPolling()}log(_AT.actions.length+" actions remaining")};_AT.actions=_AT.actions.concat(actions);if(!_AT.pollingIntervalId){_AT.pollingIntervalId=setInterval(doApply,_AT.config.pollTime);onReady(function(){clearPolling();if(_AT.actions.length){applyActions(_AT.actions,true)}if(_AT.config.showElementsOnDomReady){showAllHiddenElements(_AT.actions)}applyRemainingActionsWithCounter(_AT.actions)})}};var clearPolling=var applyRemainingActionsWithCounter=function(actions){var counter=0,applyRemainingActionsInterval,logErrorConfig={options:{style:"error",prepend:true}},applyRemainingActions=function(){if(actions.length&&counter<_AT.config.tryAfterLoadMaxCount){applyActions(actions,true)}else{clearInterval(applyRemainingActionsInterval);if(actions.length){log(logErrorConfig,"Could not apply actions: ",actions);log(logErrorConfig,actions.length+" actions not applied after DOM load and polling!")}}counter+=1};if(actions.length){applyRemainingActionsInterval=setInterval(applyRemainingActions,_AT.config.pollTime)}};var applyOnDOMReady=_AT.applyOnDOMReady=function(actions){log("Waiting to apply "+actions.length+" actions until DOM ready...");onReady(};var getGlobalMboxName=_AT.getGlobalMboxName=function(){if(typeof TNT!=="undefined"&&typeof TNT.getGlobalMboxName==="function"){return TNT.getGlobalMboxName()}return"target-global-mbox"};var trackClick=_AT.trackClick=function(selector,parameters){var trackingUrl=getTrackingUrl(selector,parameters),isTrackingRequestSent=false,onBeforeUnloadHandler=function(){var jsonTrackingUrl,request;isTrackingRequestSent=true;jsonTrackingUrl=trackingUrl.replace("/ajax?","/json?");request=new XMLHttpRequest();request.open("GET",jsonTrackingUrl,false);request.send()};addListener(window,"beforeunload",onBeforeUnloadHandler);setTimeout(function(){var element;if(!isTrackingRequestSent){element=document.createElement("img");element.height=1;element.width=1;element.src=trackingUrl}removeListener(window,"beforeunload",onBeforeUnloadHandler)},_AT.config.trackingTimeout)};var getTrackingUrl=function(selector,parameters){var factory,mboxName,urlBuilder;if(!selector){log("Can't track click, no mbox name provided");return}factory=mboxFactories.get("default");mboxName=getGlobalMboxName();if(!factory.isEnabled()){log("Won't track click for "+mboxName+", default mbox is disabled");return}parameters=parameters||[];parameters.push("mbox="+mboxName+"-clicked");urlBuilder=factory.getUrlBuilder();urlBuilder.addParameters(parameters);factory.setVisitorIdParameters(urlBuilder,mboxName+"-clicked");urlBuilder.setServerType("ajax");return urlBuilder.buildUrl()};var trackLoad=var addSubmitTracker=function(elem,mboxName){if(elem.tagName!=="FORM"){log("Can't add submit tracking, element is not a form tag");return}var handler=function(evt){trackClick(mboxName,function(){removeListener(elem,"submit",handler);elem.submit()});return stopEvent(evt)};addListener(elem,"submit",handler);return false};var addClickTracker=function(elem,action){var selector=action.selector,clickTrackId=action.clickTrackId,params,handler;if(clickTrackId){params=["clickTrackId="+clickTrackId]}else{params=["target-click-url="+selector]}handler=function(){removeListener(elem,"click",handler);trackClick(selector,params)};addListener(elem,"click",handler);return false};var addInclude=function(el){var parent=(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0];parent.appendChild(el)};var getNextElementSibling=function(element){if(element.nextElementSibling){return element.nextElementSibling}do{element=element.nextSibling}while(element&&element.nodeType!==1);return element};var getPreviousElementSibling=function(element){if(element.previousElementSibling){return element.previousElementSibling}do{element=element.previousSibling}while(element&&element.nodeType!==1);return element};var rearrange=function(actionjson,elem){var containerElement=elem,draggedElement,droppedPositionElement,fromIndex=actionjson.from,toIndex=actionjson.to,childElements=containerElement.children,childElementsLength=childElements.length,newChildElements=[],index;for(index=0;index<childElementsLength;index++){if(childElements[index].nodeType!==8){newChildElements.push(childElements[index])}}draggedElement=newChildElements[fromIndex];droppedPositionElement=newChildElements[toIndex];if(fromIndex<toIndex){droppedPositionElement=getNextElementSibling(droppedPositionElement)}try{if(droppedPositionElement){containerElement.insertBefore(draggedElement,droppedPositionElement)}else{containerElement.appendChild(draggedElement)}}catch(e){return false}return true};var resize=function(actionjson,elem){var resizedElement=elem;resizedElement.style.height=actionjson.finalHeight;resizedElement.style.width=actionjson.finalWidth};var move=function(actionjson,elem){var movedElement=elem;if(actionjson.position){movedElement.style.position=actionjson.position}movedElement.style.left=actionjson.finalLeftPosition+"px";movedElement.style.top=actionjson.finalTopPosition+"px"};var insertElement=function(actionJson,elem){var content=actionJson.content,wrapperElement=document.createElement("div"),isInsertBefore=actionJson.action==="insertBefore",refElement=(isInsertBefore?elem:getNextElementSibling(elem));if((typeof actionJson.value!=="undefined")&&(actionJson.value!==null)){content='<img src="'+actionJson.value+'"></img>'}elem.parentNode.insertBefore(getFragment(content),refElement);if(actionJson.recsClickTrackId){(isInsertBefore?getPreviousElementSibling(elem):getNextElementSibling(elem)).id=actionJson.recsClickTrackId}wrapperElement.appendChild(getFragment(content));executeScript(wrapperElement)};var addCustomCode=function(actionJson,elem){var content=actionJson.content,isExecuted=false;if(elem.tagName==="HEAD"){isExecuted=appendToHead(content)}else{isExecuted=prependToBody(content,elem)}if(!isExecuted){wrapElementAndExecuteScript(content)}};var wrapElementAndExecuteScript=function(content){var wrapperElement=document.createElement("div");wrapperElement.innerHTML=content;executeScript(wrapperElement)};var appendToHead=function(content){var $=window.jQuery,contentFragment=getFragment(content);if($&&$.fn.append){$(document.head).append(content);return true}document.head.appendChild(contentFragment);return false};var prependToBody=function(content,firstElementInBody){var $=window.jQuery,contentFragment=getFragment(content);if($&&$.fn.prepend){$(document.body).prepend(content);return true}firstElementInBody.parentNode.insertBefore(contentFragment,firstElementInBody);return false};var redirectPage=function(action,elem){var searchString=window.location.search,redirectUrl=action.url;if(isPropertyTrue(action.includeAllUrlParameters)){redirectUrl=addParametersToURL(redirectUrl,searchString.substring(1))}if(isPropertyTrue(action.passMboxSession)){redirectUrl=addParametersToURL(redirectUrl,"mboxSession="+mboxFactoryDefault.getSessionId().getId())}elem.style.display="none";window.location.replace(redirectUrl)};var isPropertyTrue=var addParametersToURL=_AT.addParametersToURL=function(url,params){var urlParts=url.split("#"),urlWithoutHash=urlParts[0],urlHash=urlParts[1];if(params&&!~urlWithoutHash.indexOf(params)){if(~urlWithoutHash.indexOf("?")){urlWithoutHash+="&"+params}else{urlWithoutHash+="?"+params}}return urlHash?urlWithoutHash+"#"+urlHash:urlWithoutHash};var getFragment=function(content,contentType){var container=document.createElement("div"),fragment=document.createDocumentFragment();if(contentType==="text"){_setText(container,content)}else{container.innerHTML=content}for(var i=container.childNodes.length-1;i>=0;i--){fragment.insertBefore(container.childNodes[i],fragment.firstChild)}return fragment};var appendStyle=function(cssRule,id){var head=document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";style.id=id;if(style.styleSheet){style.styleSheet.cssText=cssRule}else{style.appendChild(document.createTextNode(cssRule))}head.appendChild(style);return style};var removeElement=var generateIdFromSelector=function(selector){var id=selector;id=id.replace("#","AT_");id=id.replace("HTML","AT_");id=id.replace(/[\s()>]/g,"");id=id.replace(/[.:]/g,"_");return id};var hideElementBeforeApplyingAction=function(actionJson){var cssSelector=actionJson.cssSelector,styleTagId,cssRule;cssSelector=cssSelector||(actionJson.selector.indexOf("eq")===-1?actionJson.selector:"");if(cssSelector){styleTagId=generateIdFromSelector(actionJson.selector);cssRule=cssSelector+" { visibility: hidden }";if(!document.getElementById(styleTagId)){appendStyle(cssRule,styleTagId)}}};var showAllHiddenElements=function(actions){for(var index=actions.length-1;index>=0;index--){showElementForAction(actions[index])}};var showElementForAction=function(actionJson){var styleTagId=generateIdFromSelector(actionJson.selector),styleElement=document.getElementById(styleTagId);removeElement(styleElement)};var loadScriptSynchronously=function(scriptURL){var script=document.createElement("script");script.type="text/javascript";try{script.text=getSyncScriptContent(scriptURL);addInclude(script)}catch(exception){throw exception}};var getSyncScriptContent=function(url){var request=new XMLHttpRequest(),type;request.open("GET",url,false);request.send(null);if(request.status!==200){throw new Error(request.statusText)}type=request.getResponseHeader("Content-Type");if(type&&!type.match(/javascript/)){throw new Error("Expected JavaScript content type, Got: "+type)}return request.responseText};var loadScript=_AT.loadScript=function(scriptURL,callback){var script=document.createElement("script");script.type="text/javascript";script.src=scriptURL;if(typeof callback==="function"){script.onload=callback}addInclude(script)};var loadCSS=_AT.loadCSS=function(cssURL,callback){var link=document.createElement("link");link.rel="stylesheet";link.type="text/css";link.href=cssURL;if(typeof callback==="function"){link.onload=callback}addInclude(link)};if(window!=top&&admin){var mboxToLoad=0,__mboxCreate,__mboxDefine,markMboxElement=function(mboxElement,mboxName){var mboxClass="mbox-name-"+mboxName;if(!mboxElement){return}if(!~mboxElement.className.indexOf(mboxClass)){mboxElement.className+=" "+mboxClass}if(!~mboxElement.className.indexOf("mboxDefault")){mboxElement.className+=" mboxDefault"}},onMboxLoadCallback=function(){markMboxElement(this.getDiv(),this.getName());mboxToLoad--;if(mboxToLoad===0){_AT.shouldDelayLoad=false}};if(typeof mboxCreate=="function"){__mboxCreate=mboxCreate;mboxCreate=function(name){var mbox=__mboxCreate.apply(undefined,arguments);if(mbox){_AT.shouldDelayLoad=true;mboxToLoad++;mbox.setOnLoad(onMboxLoadCallback)}}}if(typeof mboxDefine=="function"){__mboxDefine=mboxDefine;mboxDefine=function(elementId,name){var mbox=__mboxDefine.apply(undefined,arguments);mbox&&mbox.setOnLoad(function(){markMboxElement(this.getDiv(),this.getName())})}}document.addEventListener("click",true);loadScript("//"+_AT.config.atServer+_AT.config.atLocation+"/target-vec.js")}_AT.targetJSLoaded=true}());(function(){if(typeof mboxVersion!="undefined"&&mboxVersion>=43&&mboxVersion<47){var b=mboxVizTargetUrl("target-global-mbox");if(b){var a='<script src="'+b+'"><\/script>';document.write(a)}}})();