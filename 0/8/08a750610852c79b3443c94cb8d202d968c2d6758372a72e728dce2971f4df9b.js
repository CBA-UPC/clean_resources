var HigherLogic;!function(n){var e=(t.formatNumberWithCommas=function(e){return hl_common_util_formatNumberWithCommas(e)},t.hide=function(e){$(e).hide(),$(e).attr("aria-hidden","True")},t.newGuid=function(){return hl_common_util_generateGuid()},t.show=t.showBsModal=function(e){return hl_common_ui_showBsModal(e)},t.hideBsModal=function(e){return hl_common_ui_hideBsModal(e)},t.stringIsNullOrWhiteSpace=function(e){return hl_common_util_stringIsNullOrWhiteSpace(e)},t.stringCompare=function(e,t){return hl_common_util_stringCompare(e,t)},t.getParameterByName=function(e,t){return hl_common_util_getParameterByName(e,t)},t.stringFormat=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(,i},t.get=function(e,t,i){return(i=i||{}).cache=void 0!==i.cache&&i.cache,i.contentType=i.contentType||"application/json; charset=utf-8",i.dataType=t||"json",i.type="GET",i.url=e,i.error=i.error||this.ajaxErrorCallback,$.ajax(i)},t.post=function(e,t,i,n){return(n=n||{}).cache=void 0!==n.cache&&n.cache,n.contentType=n.contentType||"application/json; charset=utf-8",n.dataType=i||"json",n.type="POST",n.url=e,void 0!==t&&$.isPlainObject(t)&&(t=JSON.stringify(t)),n.data=t||n.data,n.error=n.error||this.ajaxErrorCallback,$.ajax(n)},t.ocapiGet=function(e,t,i){(i=i||{}).cache=void 0!==i.cache&&i.cache,i.contentType=i.contentType||"application/json; charset=utf-8",i.dataType=t||"json",i.type="GET",i.url=e;var n=document.getElementsByName("__HL-RequestVerificationToken")[0],o=n?n.value:"";return i.headers={RequestVerificationFormToken:o},i.error=i.error||this.ajaxErrorCallback,$.ajax(i)},t.ajaxErrorCallback=function(e,t){n.Common.Ui.unBlockUI();var i=e.responseText;try{0===e.status?n.Common.Ui.alertDialog("Not connected.\n Verify Network."):401==e.status||404==e.status||405==e.status||500==e.status?(i=jQuery.parseJSON(e.responseText),n.Common.Ui.alertDialog("Message: ".concat(i.Message,"\nError Code:").concat(i.ErrorCode))):"parsererror"===t?n.Common.Ui.alertDialog("Requested JSON parse failed."):"timeout"===t?n.Common.Ui.alertDialog("Time out error."):"abort"===t?n.Common.Ui.alertDialog("Ajax request aborted."):(i=jQuery.parseJSON(e.responseText),n.Common.Ui.alertDialog("Message: ".concat(i.Message,"\nError Code:").concat(i.ErrorCode)))}catch(e){n.Common.Ui.showjQueryUIAlertDialog("hlcomonalert","Close",!0,800,"",window.document.title,"Message: ".concat(i))}},t.isInteger=t.htmlDecode=t.updateQueryStringParameter=t.removeURLParameter=t.loadBioBubbles=function(){return LoadBioBubbles()},t.getRandomIntInRange=t.convertJsonResultDate=function(e){return t.stringIsNullOrWhiteSpace(e)?null:new Date(parseInt(e.substr(6)))},t.setModalFocusAndAccessibility=function(e,t){var i=document.querySelector(e.selector).querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=i[0],o=i[i.length-1];e.on("hidden.bs.modal",function(){t.focus()}),document.addEventListener("keydown",,void 0!==e.attr("tabindex")?e.focus():n.focus()},t.guidEmpty="00000000-0000-0000-0000-000000000000",t);function t(){}n.Util=e}(HigherLogic=HigherLogic||{}),function(c){"use strict";var a=a.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"};function s(e,t){this.element=c(e).addClass("colorpicker-element"),this.options=c.extend(!0,{},r,this.element.data(),t),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&c(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=this.createColor(!1!==this.options.color?this.options.color:this.getValue()),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,!1!==this.options.color&&(this.updateInput(this.color),this.updateData(this.color));var n,o,i=this.picker=c(this.options.template);this.options.customClass&&i.addClass(this.options.customClass),this.options.inline?i.addClass("colorpicker-inline colorpicker-visible"):i.addClass("colorpicker-hidden"),this.options.horizontal&&i.addClass("colorpicker-horizontal"),-1===["rgba","hsla","alias"].indexOf(this.format)&&!1!==this.options.format&&"transparent"!==this.getValue()||i.addClass("colorpicker-with-alpha"),"right"===this.options.align&&i.addClass("colorpicker-right"),!0===this.options.inline&&i.addClass("colorpicker-no-arrow"),!this.options.colorSelectors||0<(o=(n=this).picker.find(".colorpicker-selectors")).length&&(c.each(this.options.colorSelectors,,o.show().addClass("colorpicker-visible")),i.on("mousedown.colorpicker touchstart.colorpicker",c.proxy(this)),i.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",c.proxy(this.mousedown,this)),i.appendTo(this.container?this.container:c("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":c.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":c.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":c.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":c.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":c.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":c.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":c.proxy(this.show,this),"focus.colorpicker":c.proxy(this.show,this)}),this.update(),c(c.proxy(function(){this.element.trigger("create")},this))}var r={horizontal:!(a.prototype={constructor:a,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:_sanitizeNumber:isTransparent:rgbaIsTransparent:setColor:setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:setAlpha:toRGB:toHex:toHSL:toAlias:RGBtoHSB:function(e,t,i,n){var o,a,s,r;return e/=255,t/=255,i/=255,o=((o=0==(r=(s=Math.max(e,t,i))-Math.min(e,t,i))?null:s===e?(t-i)/r:s===t?(i-e)/r+2:(e-t)/r+4)+360)%6*60/360,a=0==r?0:r/s,{h:this._sanitizeNumber(o),s:a,b:s,a:this._sanitizeNumber(n)}},HueToRGB:HSLtoRGB:parse:getValidFallbackFormat:toString:stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:,{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:,{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:,{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:,{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:,{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:,{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:],colorNameToHex:),inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null};s.Color=a,s.prototype={constructor:s,destroy:reposition:show:hide:function(e){if(void 0!==e&&e.target&&(0<c(e.currentTarget).parents(".colorpicker").length||0<c(e.target).parents(".colorpicker").length))return!1;this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),c(window).off("resize.colorpicker",this.reposition),c(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:updateInput:updatePicker:updateComponent:function(e){var t,i=void 0!==e?this.createColor(e):this.color;return!1!==this.component&&(0<(t=this.component.find("i").eq(0)).length?t.css({backgroundColor:i.toString(!0,this.format)}):this.component.css({backgroundColor:i.toString(!0,this.format)})),i.toString(!1,this.format)},update:setValue:createColor:getValue:hasInput:isDisabled:disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:currentSlider:null,mousePointer:{left:0,top:0},mousedown:mousemove:mouseup:change:keyup:,c.colorpicker=s,c.fn.colorpicker=c.fn.colorpicker.constructor=s}),function(d){"use strict";ndefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={init:function(n,e,t,i,o){var a=t().selectedOptions,s=ko.utils.unwrapObservable(e());d(n).multiselect(s),l(a)&&a.subscribe(function(e){var t=[],i=[];e.forEach(,0<t.length&&d(n).multiselect("select",t),0<i.length&&d(n).multiselect("deselect",i)},null,"arrayChange")},update:),n.prototype={defaults:{buttonText:buttonTitle:label:onChange:function(e,t){},onDropdownShow:function(e){},onDropdownHide:function(e){},buttonClass:"btn btn-default",dropRight:!1,selectedClass:"active",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,includeSelectAllOption:!1,selectAllText:" Select all",selectAllValue:"multiselect-all",enableFiltering:!1,enableCaseInsensitiveFiltering:!1,filterPlaceholder:"Search",filterBehavior:"text",preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3},templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div>',li:'<li><a href="javascript:void(0)"><label></label></a></li>',divider:'<li class="divider"></li>',liGroup:'<li><label class="multiselect-group"></label></li>'},constructor:n,buildContainer:buildButton:function(){this.$button=d(this.templates.button).addClass(this.options.buttonClass),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!=this.options.buttonWidth&&this.$button.css({width:this.options.buttonWidth});var e=this.$select.attr("tabindex");e&&this.$button.attr("tabindex",e),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=d(this.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(d.proxy(this)),d("li input",this.$ul).on("change",d.proxy(function(e){var t=d(e.target).prop("checked")||!1,i=d(e.target).val()===this.options.selectAllValue;this.options.selectedClass&&(t?d(e.target).parents("li").addClass(this.options.selectedClass):d(e.target).parents("li").removeClass(this.options.selectedClass));var n=d(e.target).val(),o=this.getOptionByValue(n),a=d("option",this.$select).not(o),s=d("input",this.$container).not(d(e.target));if(i&&this.$select[0][0].value===this.options.selectAllValue){for(var r=[],l=d('option[value!="'+this.options.selectAllValue+'"]',this.$select),c=0;c<l.length;c++)l[c].value!==this.options.selectAllValue&&this.getInputByValue(l[c].value).is(":visible")&&r.push(l[c].value);t?this.select(r):this.deselect(r)}if(t?(o.prop("selected",!0),this.options.multiple?o.prop("selected",!0):(this.options.selectedClass&&d(s).parents("li").removeClass(this.options.selectedClass),d(s).prop("checked",!1),a.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&a.parents("a").css("outline","")):o.prop("selected",!1),this.$select.change(),this.options.onChange(o,t),this.updateButtonText(),this.updateSelectAll(),this.options.preventInputChangeEvent)return!1},this)),d("li a",this.$ul).on("touchstart click",function(e){var t,i;e.stopPropagation(),e.shiftKey&&d(e.target).prop("checked")&&(t=d(e.target).parents("li:last").siblings('li[class="active"]:first'),i=d(e.target).parents("li").index(),t.index()<i?d(e.target).parents("li:last").prevUntil(t).each(function(){d(this).find("input:first").prop("checked",!0).trigger("change")}):d(e.target).parents("li:last").nextUntil(t).each(),d(e.target).blur()}),this.$container.on("keydown",d.proxy(function(e){if(!d('input[type="text"]',this.$container).is(":focus"))if(9!==e.keyCode&&27!==e.keyCode||!this.$container.hasClass("open")){var t=d(this.$container).find("li:not(.divider):visible a");if(!t.length)return;var i=t.index(t.filter(":focus"));38===e.keyCode&&0<i?i--:40===e.keyCode&&i<t.length-1?i++:~i||(i=0);var n,o=t.eq(i);o.focus(),32!==e.keyCode&&13!==e.keyCode||((n=o.find("input")).prop("checked",!n.prop("checked")),n.change()),e.stopPropagation(),e.preventDefault()}else this.$button.click()},this))},createOptionValue:function(e){d(e).is(":selected")&&d(e).prop("selected",!0);var t=this.options.label(e),i=d(e).val(),n=this.options.multiple?"checkbox":"radio",o=d(this.templates.li);d("label",o).addClass(n),d("label",o).append('<input type="'+n+'" />');var a=d(e).prop("selected")||!1,s=d("input",o);s.val(i),i===this.options.selectAllValue&&s.parent().parent().addClass("multiselect-all"),d("label",o).append(" "+t),this.$ul.append(o),d(e).is(":disabled")&&s.attr("disabled","disabled").prop("disabled",!0).parents("li").addClass("disabled"),s.prop("checked",a),a&&this.options.selectedClass&&s.parents("li").addClass(this.options.selectedClass)},createDivider:function(e){var t=d(this.templates.divider);this.$ul.append(t)},createOptgroup:function(e){var t=d(e).prop("label"),i=d(this.templates.liGroup);d("label",i).text(t),this.$ul.append(i),d(e).is(":disabled")&&i.addClass("disabled"),d("option",e).each(d.proxy(function(e,t){this.createOptionValue(t)},this))},buildSelectAll:function(){var e=this.hasSelectAll();this.options.includeSelectAllOption&&this.options.multiple&&!e&&(this.options.includeSelectAllDivider&&this.$select.prepend('<option value="" disabled="disabled" data-role="divider">'),this.$select.prepend('<option value="'+this.options.selectAllValue+'">'+this.options.selectAllText+"</option>"))},buildFilter:function(){var e;(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering)&&(e=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering),this.$select.find("option").length>=e&&(this.$filter=d(this.templates.filter),d("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",d.proxy(function(e){clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(d.proxy(function(){this.query!==e.target.value&&(this.query=e.target.value,d.each(d("li",this.$ul),d.proxy(function(e,t){var i,n,o=d("input",t).val(),a=d("label",t).text();o!==this.options.selectAllValue&&a&&(i=!1,n="","text"!==this.options.filterBehavior&&"both"!==this.options.filterBehavior||(n=a),"value"!==this.options.filterBehavior&&"both"!==this.options.filterBehavior||(n=o),(this.options.enableCaseInsensitiveFiltering&&-1<n.toLowerCase().indexOf(this.query.toLowerCase())||-1<n.indexOf(this.query))&&(i=!0),i?d(t).show():d(t).hide())},this)))},this),300,this)},this))))},destroy:function(){this.$container.remove(),this.$select.show()},refresh:select:function(e){e&&!d.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var i=e[t],n=this.getOptionByValue(i),o=this.getInputByValue(i);this.options.selectedClass&&o.parents("li").addClass(this.options.selectedClass),o.prop("checked",!0),n.prop("selected",!0)}this.updateButtonText()},clearSelection:function(){var e=this.getSelected();if(e.length){for(var t=[],i=0;i<e.length;i+=1)t.push(e[i].value);this.deselect(t),this.$select.change()}},deselect:function(e){e&&!d.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var i=e[t],n=this.getOptionByValue(i),o=this.getInputByValue(i);this.options.selectedClass&&o.parents("li").removeClass(this.options.selectedClass),o.prop("checked",!1),n.prop("selected",!1)}this.updateButtonText()},rebuild:function(){this.$ul.html(""),d('option[value="'+this.options.selectAllValue+'"]',this.$select).remove(),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll()},dataprovider:enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:setOptions:mergeOptions:hasSelectAll:function(){return!!this.$select[0][0]&&this.$select[0][0].value===this.options.selectAllValue},updateSelectAll:function(){this.hasSelectAll()&&(this.getSelected().length===d("option:not([data-role=divider])",this.$select).length-1?this.select(this.options.selectAllValue):this.deselect(this.options.selectAllValue))},updateButtonText:getSelected:getOptionByValue:function(e){for(var t=d("option",this.$select),i=e.toString(),n=0;n<t.length;n+=1){var o=t[n];if(o.value==i)return d(o)}},getInputByValue:function(e){for(var t=d("li input",this.$ul),i=e.toString(),n=0;n<t.length;n+=1){var o=t[n];if(o.value==i)return d(o)}},updateOriginalOptions:asyncFunction:,d.fn.multiselect=d.fn.multiselect.Constructor=n,d(function(){d("select[data-role=multiselect]").multiselect()})}(window.jQuery),function(){var i=$.fn.popover.Constructor.prototype.show;$.extend(!0,$.fn.popover.Constructor.prototype,{show:function(){var e,t;i.apply(this,arguments),void 0===this.$element.attr("aria-label")&&(e=void 0!==this.$element.data("content")?this.$element.data("content"):this.$tip.find(".popover-content").text(),t=void 0!==this.$element.data("original-title")?this.$element.data("original-title"):"Popover",this.$element.attr("aria-label",t+" button with content that says: "+e))}})}(jQuery),function(k){"use strict";ar r,t,l,i,c;ing.prototype.includes||(r={}.toString,t=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),l="".indexOf,t?t(String.prototype,"includes",{value:e,configurable:!0,writable:!0}):String.prototype.includes=e),String.prototype.startsWith||(i=),c={}.toString,i?i(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n),Object.keys||(Object.keys=,k.fn.triggerNative=k.expr[":"].icontains=function(e,t,i){var n=k(e);return(n.data("tokens")||n.text()).toUpperCase().includes(i[3].toUpperCase())},k.expr[":"].ibegins=k.expr[":"].aicontains=function(e,t,i){var n=k(e);return(n.data("tokens")||n.data("normalizedText")||n.text()).toUpperCase().includes(i[3].toUpperCase())},k.expr[":"].aibegins=var u=.VERSION="1.7.2",u.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:maxOptionsText:selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},u.prototype={constructor:u,init:createDropdown:createView:reloadLi:destroyLi:createLi:function(){r e,m=this,f=[],g=0,t=document.createElement("option"),v=-1;return this.options.title&&!this.multiple&&(v--,this.$element.find(".bs-title-option").length||(e=this.$element[0],t.className="bs-title-option",t.appendChild(document.createTextNode(this.options.title)),t.value="",e.insertBefore(t,e.firstChild),void 0===k(e.options[e.selectedIndex]).attr("selected")&&(t.selected=!0))),this.$element.find("option").each(function(e){var t,i,n,o,a,s,r,l,c,d,u=k(this);v++,u.hasClass("bs-title-option")||(t=this.className||"",i=this.style.cssText,n=u.data("content")?u.data("content"):u.html(),o=u.data("tokens")?u.data("tokens"):null,a=void 0!==u.data("subtext")?'<small class="text-muted">'+u.data("subtext")+"</small>":"",s=void 0!==u.data("icon")?'<span class="'+m.options.iconBase+" "+u.data("icon")+'"></span> ':"",r=this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,""!==s&&r&&(s="<span>"+s+"</span>"),m.options.hideDisabled&&r?v--:(u.data("content")||(n=s+'<span class="text">'+n+a+"</span>"),"OPTGROUP"===this.parentElement.tagName&&!0!==u.data("divider")?(l=" "+this.parentElement.className||"",0===u.index()&&(g+=1,d=this.parentElement.label,c=void 0!==u.parent().data("subtext")?'<small class="text-muted">'+u.parent().data("subtext")+"</small>":"",d=(u.parent().data("icon")?'<span class="'+m.options.iconBase+" "+u.parent().data("icon")+'"></span> ':"")+'<span class="text">'+d+c+"</span>",0!==e&&0<f.length&&(v++,f.push(h("",null,"divider",g+"div"))),v++,f.push(h(d,null,"dropdown-header"+l,g))),f.push(h(p(n,"opt "+t+l,i,o),e,"",g))):!0===u.data("divider")?f.push(h("",e,"divider")):!0===u.data("hidden")?f.push(h(p(n,t,i,o),e,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(v++,f.push(h("",null,"divider",g+"div"))),f.push(h(p(n,t,i,o),e))),m.liObj[e]=v))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),f.join("")},findLis:render:function(e){var t,n=this;!1!==e&&this.$element.find("option").each(,this.tabIndex();var i,o,a=this.$element.find("option").map(function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled))return;var e=k(this),t=e.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+e.data("icon")+'"></i> ':"",i=n.options.showSubtext&&e.data("subtext")&&!n.multiple?' <small class="text-muted">'+e.data("subtext")+"</small>":"";return void 0!==e.attr("title")?e.attr("title"):e.data("content")&&n.options.showContent?e.data("content"):t+e.html()+i}}).toArray(),s=this.multiple?a.join(this.options.multipleSeparator):a[0];this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")&&((1<(i=this.options.selectedTextFormat.split(">")).length&&a.length>i[1]||1==i.length&&2<=a.length)&&(t=this.options.hideDisabled?", [disabled]":"",o=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+t).length,s=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(a.length,o):this.options.countSelectedText).replace("{0}",a.length.toString()).replace("{1}",o.toString()))),null==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(s=this.options.title),s=s||(void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",k.trim(s.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(s),this.$element.trigger("rendered.bs.select")},setStyle:liHeight:function(e){var t,i,n,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y,b,_,w,C;(e||!1!==this.options.size&&!this.sizeInfo)&&(t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("ul"),o=document.createElement("li"),a=document.createElement("li"),s=document.createElement("a"),r=document.createElement("span"),l=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,c=this.options.liveSearch?document.createElement("div"):null,d=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,u=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,r.className="text",t.className=this.$menu[0].parentNode.className+" open",i.className="dropdown-menu open",n.className="dropdown-menu inner",o.className="divider",r.appendChild(document.createTextNode("Inner text")),s.appendChild(r),a.appendChild(s),n.appendChild(a),n.appendChild(o),l&&i.appendChild(l),c&&(h=document.createElement("span"),c.className="bs-searchbox",h.className="form-control",c.appendChild(h),i.appendChild(c)),d&&i.appendChild(d),i.appendChild(n),u&&i.appendChild(u),t.appendChild(i),document.body.appendChild(t),p=s.offsetHeight,m=l?l.offsetHeight:0,f=c?c.offsetHeight:0,g=d?d.offsetHeight:0,v=u?u.offsetHeight:0,y=k(o).outerHeight(!0),_=(b="function"==typeof getComputedStyle&&getComputedStyle(i))?null:k(i),C=(w=parseInt(b?b.paddingTop:_.css("paddingTop"))+parseInt(b?b.paddingBottom:_.css("paddingBottom"))+parseInt(b?b.borderTopWidth:_.css("borderTopWidth"))+parseInt(b?b.borderBottomWidth:_.css("borderBottomWidth")))+parseInt(b?b.marginTop:_.css("marginTop"))+parseInt(b?b.marginBottom:_.css("marginBottom"))+2,document.body.removeChild(t),this.sizeInfo={liHeight:p,headerHeight:m,searchHeight:f,actionsHeight:g,doneButtonHeight:v,dividerHeight:y,menuPadding:w,menuExtras:C})},setSize:function(){var a,s,r,e,t,l,c,d,u,h,i,p,m,n,f,g,v,o,y,b,_,w;this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(s=(a=this).$menu,r=this.$menuInner,e=k(window),t=this.$newElement[0].offsetHeight,l=this.sizeInfo.liHeight,c=this.sizeInfo.headerHeight,d=this.sizeInfo.searchHeight,u=this.sizeInfo.actionsHeight,h=this.sizeInfo.doneButtonHeight,i=this.sizeInfo.dividerHeight,p=this.sizeInfo.menuPadding,m=this.sizeInfo.menuExtras,n=this.options.hideDisabled?".disabled":"",(v=(),"auto"===this.options.size?((o=(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",o),e.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",o)):this.options.size&&"auto"!=this.options.size&&this.$lis.not(n).length>this.options.size&&(y=this.$lis.not(".divider").not(n).children().slice(0,this.options.size).last().parent().index(),b=this.$lis.slice(0,y+1).filter(".divider").length,_=l*this.options.size+b*i+p,w=a.options.container?(s.data("height")||s.data("height",s.height()),s.data("height")):s.height(),a.options.dropupAuto&&this.$newElement.toggleClass("dropup",g<f&&_-m<w),s.css({"max-height":_+c+d+u+h+"px",overflow:"hidden","min-height":""}),r.css({"max-height":_-p+"px","overflow-y":"auto","min-height":""})))},setWidth:selectPosition:function(){function e(e){o.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,o.css({top:t.top+i,left:t.left,width:e[0].offsetWidth})}var t,i,n=this,o=k('<div class="bs-container" />');this.$newElement.on("click",,k(window).on("resize scroll",function(){e(n.$newElement)}),this.$element.on("hide.bs.select",},setSelected:function(e,t,i){(i=i||this.findLis().eq(this.liObj[e])).toggleClass("selected",t)},setDisabled:function(e,t,i){i=i||this.findLis().eq(this.liObj[e]),t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:checkDisabled:tabIndex:clickListener:function(){var y=this,t=k(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),t.data("spaceSelect",!1),this.$button.on("keyup",,this.$newElement.on("click",function(){y.setSize(),y.$element.on("shown.bs.select",function(){if(y.options.liveSearch||y.multiple){if(!y.multiple){var e=y.liObj[y.$element[0].selectedIndex];if("number"!=typeof e||!1===y.options.size)return;var t=(t=y.$lis.eq(e)[0].offsetTop-y.$menuInner[0].offsetTop)-y.$menuInner[0].offsetHeight/2+y.sizeInfo.liHeight/2;y.$menuInner[0].scrollTop=t}}else y.$menuInner.find(".selected a").focus()})}),this.$menuInner.on("click","li a",function(e){var t,i,n,o,a,s,r,l,c,d,u,h,p,m=k(this),f=m.parent().data("originalIndex"),g=y.$element.val(),v=y.$element.prop("selectedIndex");y.multiple&&e.stopPropagation(),e.preventDefault(),y.isDisabled()||m.parent().hasClass("disabled")||(n=(i=(t=y.$element.find("option")).eq(f)).prop("selected"),o=i.parent("optgroup"),a=y.options.maxOptions,s=o.data("maxOptions")||!1,y.multiple?(i.prop("selected",!n),y.setSelected(f,!n),m.blur(),!1===a&&!1===s||(r=a<t.filter(":selected").length,l=s<o.find("option:selected").length,(a&&r||s&&l)&&(a&&1==a?(t.prop("selected",!1),i.prop("selected",!0),y.$menuInner.find(".selected").removeClass("selected"),y.setSelected(f,!0)):s&&1==s?(o.find("option:selected").prop("selected",!1),i.prop("selected",!0),c=m.parent().data("optgroup"),y.$menuInner.find('[data-optgroup="'+c+'"]').removeClass("selected"),y.setSelected(f,!0)):(u=(d="function"==typeof y.options.maxOptionsText?y.options.maxOptionsText(a,s):y.options.maxOptionsText)[0].replace("{n}",a),h=d[1].replace("{n}",s),p=k('<div class="notify"></div>'),d[2]&&(u=u.replace("{var}",d[2][1<a?0:1]),h=h.replace("{var}",d[2][1<s?0:1])),i.prop("selected",!1),y.$menu.append(p),a&&r&&(p.append(k("<div>"+u+"</div>")),y.$element.trigger("maxReached.bs.select")),s&&l&&(p.append(k("<div>"+h+"</div>")),y.$element.trigger("maxReachedGrp.bs.select")),setTimeout(10),p.delay(750).fadeOut(300,function(){k(this).remove()}))))):(t.prop("selected",!1),i.prop("selected",!0),y.$menuInner.find(".selected").removeClass("selected"),y.setSelected(f,!0)),y.multiple?y.options.liveSearch&&y.$searchbox.focus():y.$button.focus(),(g!=y.$element.val()&&y.multiple||v!=y.$element.prop("selectedIndex")&&!y.multiple)&&(y.$element.triggerNative("change"),y.$element.trigger("changed.bs.select",[f,i.prop("selected"),n])))}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",,this.$menuInner.on("click",".divider, .dropdown-header",,this.$menu.on("click",".popover-title .close",function(){y.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",,this.$element.change(function(){y.render(!1)})},liveSearchListener:function(){var n=this,t=k('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",,this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var e,i;n.$searchbox.val()?(e=n.$lis.not(".is-hidden").removeClass("hidden").children("a"),(e=n.options.liveSearchNormalize?e.not(":a"+n._searchStyle()+'("'+y(n.$searchbox.val())+'")'):e.not(":"+n._searchStyle()+'("'+n.$searchbox.val()+'")')).parent().addClass("hidden"),n.$lis.filter(".dropdown-header").each(,(i=n.$lis.not(".hidden")).each(,n.$lis.not(".hidden, .no-results").length?t.parent().length&&t.remove():(t.parent().length&&t.remove(),t.html(n.options.noneResultsText.replace("{0}",'"'+d(n.$searchbox.val())+'"')).show(),n.$menuInner.append(t))):(n.$lis.not(".is-hidden").removeClass("hidden"),t.parent().length&&t.remove()),n.$lis.filter(".active").removeClass("active"),n.$searchbox.val()&&n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),k(this).focus()})},_searchStyle:val:selectAll:function(){this.findLis(),this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0),this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected"),this.render(!1)},deselectAll:keydown:function(e){var t,i,n,o,a,s,r,l,c,d,u,h,p=k(this),m=p.is("input")?p.parent().parent():p.parent(),f=m.data("this"),g=":not(.disabled, .hidden, .dropdown-header, .divider)",v={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};f.options.liveSearch&&(m=p.parent().parent()),f.options.container&&(m=f.$menu),t=k("[role=menu] li",m),!(c=f.$menu.parent().hasClass("open"))&&(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90)&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),c=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(e.keyCode.toString(10))&&c&&0===f.$menu.find(".active").length&&(e.preventDefault(),f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus()),t=k("[role=menu] li"+g,m),p.val()||/(38|40)/.test(e.keyCode.toString(10))||0===t.filter(".active").length&&(t=f.$menuInner.find("li"),t=f.options.liveSearchNormalize?t.filter(":a"+f._searchStyle()+"("+y(v[e.keyCode])+")"):t.filter(":"+f._searchStyle()+"("+v[e.keyCode]+")"))),t.length&&(/(38|40)/.test(e.keyCode.toString(10))?(i=t.index(t.find("a").filter(":focus").parent()),o=t.filter(g).first().index(),a=t.filter(g).last().index(),n=t.eq(i).nextAll(g).eq(0).index(),s=t.eq(i).prevAll(g).eq(0).index(),r=t.eq(n).prevAll(g).eq(0).index(),f.options.liveSearch&&(t.each(,i=t.index(t.filter(".active")),o=t.first().data("index"),a=t.last().data("index"),n=t.eq(i).nextAll().eq(0).data("index"),s=t.eq(i).prevAll().eq(0).data("index"),r=t.eq(n).prevAll().eq(0).data("index")),l=p.data("prevIndex"),38==e.keyCode?(f.options.liveSearch&&i--,i!=r&&s<i&&(i=s),i<o&&(i=o),i==l&&(i=a)):40==e.keyCode&&(f.options.liveSearch&&i++,-1==i&&(i=0),i!=r&&i<n&&(i=n),a<i&&(i=a),i==l&&(i=o)),p.data("prevIndex",i),f.options.liveSearch?(e.preventDefault(),p.hasClass("dropdown-toggle")||(t.removeClass("active").eq(i).addClass("active").children("a").focus(),p.focus())):t.eq(i).children("a").focus()):p.is("input")||(d=[],t.each(,u=k(document).data("keycount"),u++,k(document).data("keycount",u),k.trim(k(":focus").text().toLowerCase()).substring(0,1)!=v[e.keyCode]?(u=1,k(document).data("keycount",u)):u>=d.length&&(k(document).data("keycount",0),u>d.length&&(u=1)),t.eq(d[u-1]).children("a").focus()),(/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&f.options.selectOnTab)&&c&&(/(32)/.test(e.keyCode.toString(10))||e.preventDefault(),f.options.liveSearch?/(32)/.test(e.keyCode.toString(10))||(f.$menuInner.find(".active a").click(),p.focus()):((h=k(":focus")).click(),h.focus(),e.preventDefault(),k(document).data("spaceSelect",!0)),k(document).data("keycount",0)),(/(^9$|27)/.test(e.keyCode.toString(10))&&c&&(f.multiple||f.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!c)&&(f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus()))},mobile:refresh:hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},addHLSecurityEvents:function(){var n=this;this.$lis.filter('[data-original-index="0"]').bind("click",function(e){var t=e.target||e.srcElement;"disabled"!=t.parentNode.className&&null!=e.originalEvent&&"Public"==t.text&&(n.deselectAll(),n.setSelected(0))}),this.$lis.filter('[data-original-index="1"]').bind("click",function(e){var t=e.target||e.srcElement;null!=e.originalEvent&&"Authenticated"==t.text&&(n.deselectAll(),n.setSelected(1))}),this.$lis.filter('[data-original-index="2"]').bind("click",function(e){var t=e.target||e.srcElement;null!=e.originalEvent&&"Member"==t.text&&(n.deselectAll(),n.setSelected(2))}),this.$lis.filter('[data-original-index !="0"][data-original-index !="1"][data-original-index !="2"]').bind("click",function(){var e=n.$lis.filter('[data-original-index="0"]');!e.hasClass("disabled")&&e.hasClass("selected")&&e.find("a").click();var t=n.$lis.filter('[data-original-index="1"]');t.hasClass("selected")&&t.find("a").click();var i=n.$lis.filter('[data-original-index="2"]');i.hasClass("selected")&&i.find("a").click()})}};var a=k.fn.selectpicker;k.fn.selectpicker=o,k.fn.selectpicker.Constructor=u,k.fn.selectpicker.noConflict=k(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',u.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(e){e.stopPropagation()}),k(window).on("load.bs.select.data-api",}(jQuery),function(){var e=$.fn.selectpicker.Constructor.prototype.init;$.extend(!0,$.fn.selectpicker.Constructor.prototype,{init:function(){e.apply(this,arguments),this.$button.attr("aria-label",this.$button.attr("title")+", collapsed, press space to expand.")}})}(jQuery),function(a){function s(e,t){this.element=a(e),this.picker=a('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||t.id,this.id&&(this.picker[0].id=this.id),"undefined"!=typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var i=this.element.data("slider-tooltip")||t.tooltip;switch(this.tooltip=this.picker.find(".tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.orientation=this.element.data("slider-orientation")||t.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}switch(this.min=this.element.data("slider-min")||t.min,this.max=this.element.data("slider-max")||t.max,this.step=this.element.data("slider-step")||t.step,this.value=this.element.data("slider-value")||t.value,this.value[1]&&(this.range=!0),this.selection=this.element.data("slider-selection")||t.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,this.element.data("slider-handle")||t.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=t.formater,this.layout(),this.touchCapable?this.picker.on({touchstart:a.proxy(this.mousedown,this)}):this.picker.on({mousedown:a.proxy(this.mousedown,this)}),"show"===i?this.picker.on({mouseenter:a.proxy(this.showTooltip,this),mouseleave:a.proxy(this.hideTooltip,this)}):this.tooltip.addClass("hide")}s.prototype={constructor:s,over:!1,inDrag:!1,showTooltip:hideTooltip:layout:mousedown:function(e){this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var t,i,n=this.getPercentage(e);this.range?(t=Math.abs(this.percentage[0]-n),i=Math.abs(this.percentage[1]-n),this.dragged=t<i?0:1):this.dragged=0,this.percentage[this.dragged]=n,this.layout(),this.touchCapable?a(document).on({touchmove:a.proxy(this.mousemove,this),touchend:a.proxy(this.mouseup,this)}):a(document).on({mousemove:a.proxy(this.mousemove,this),mouseup:a.proxy(this.mouseup,this)}),this.inDrag=!0;var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).trigger({type:"slide",value:o}),!1},mousemove:mouseup:calculateValue:getPercentage:function(e){this.touchCapable&&(e=e.touches[0]);var t=100*(e[this.mousePos]-this.offset[this.stylePos])/this.size,t=Math.round(t/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,t))},getValue:setValue:,a.fn.slider=a.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(e){return e}},a.fn.slider.Constructor=s}(window.jQuery),function(o){var t,n,i,a,s=(i=!(n=[]),a={register:unregister:);unction l(e,t){this.element=o(e),this.dropdown=o('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+t.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element),this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup"),s.register(o.proxy(this.layout,this)),this.layout()}l.prototype={constructor:l,layout:function(){var e=[];this.dropdown.removeClass("hide"),this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){0<this.offsetTop&&e.push(this)}),0<e.length?(e=o(e),this.dropdown.find("ul").empty().append(e),1==this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")):this.dropdown.addClass("hide")}},o.fn.tabdrop=o.fn.tabdrop.defaults={text:'<i class="glyphicon glyphicon-align-justify"></i>'},o.fn.tabdrop.Constructor=l}(window.jQuery),function(){"use strict";ar e=this,t=e.Chart;a.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},a.types={};var i,n,h=a.helpers={},p=h.each=s=h.clone=r=h.extend=l=h.merge=m=h.indexOf=o=(h.where=h.findNextWhere=h.findPreviousWhere=h.inherits=,c=h.noop=function(){},d=h.uid=(i=0,,u=h.warn=f=h.amd="function"==typeof define&&define.amd,g=h.isNumber=v=h.max=function(e){return Math.max.apply(Math,e)},y=h.min=b=(h.cap=h.getDecimalPlaces=,_=h.radians=w=(h.getAngleFromPoint=h.aliasPixel=,C=(h.splineCurve=h.calculateOrderOfMagnitude=,k=(h.calculateScaleRange=function(e,t,i,n,o){var a=Math.floor(t/(1.5*i)),s=a<=2,r=v(e),l=y(e);r===l&&(r+=.5,.5<=l&&!n?l-=.5:r+=.5);for(var c=Math.abs(r-l),d=C(c),u=Math.ceil(r/Math.pow(10,d))*Math.pow(10,d),h=n?0:Math.floor(l/Math.pow(10,d))*Math.pow(10,d),p=u-h,m=Math.pow(10,d),f=Math.round(p/m);(a<f||2*f<a)&&!s;)if(a<f)m*=2,(f=Math.round(p/m))%1!=0&&(s=!0);else if(o&&0<=d){if(m/2%1!=0)break;m/=2,f=Math.round(p/m)}else m/=2,f=Math.round(p/m);return s&&(m=p/(f=2)),{steps:f,stepValue:m,min:h,max:h+f*m}},h.template=,x=(h.generateLabels=h.easingEffects={linear:function(e){return e},easeInQuad:easeOutQuad:easeInOutQuad:easeInCubic:function(e){return e*e*e},easeOutCubic:easeInOutCubic:easeInQuart:easeOutQuart:easeInOutQuart:easeInQuint:easeOutQuint:easeInOutQuint:easeInSine:easeOutSine:function(e){return+Math.sin(e*(Math.PI/2))},easeInOutSine:easeInExpo:function(e){return 0===e?1:+Math.pow(2,10*(e-1))},easeOutExpo:easeInOutExpo:easeInCirc:easeOutCirc:function(e){return+Math.sqrt(1- --e*e)},easeInOutCirc:easeInElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1==(e/=1)?1:(i=i||.3,t=n<Math.abs(1)?(n=1,i/4):i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*--e)*Math.sin((e-t)*(2*Math.PI)/i)))},easeOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1==(e/=1)?1:(i=i||.3,t=n<Math.abs(1)?(n=1,i/4):i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:2==(e/=.5)?1:(i=i||.3*1.5*1,t=n<Math.abs(1)?(n=1,i/4):i/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*--e)*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*--e)*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:easeOutBack:easeInOutBack:easeInBounce:easeOutBounce:easeInOutBounce:),S=h.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},T=(h.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||h.animationLoop=h.getRelativePosition=h.addEvent=,$=h.removeEvent=I=(h.bindEvents=h.unbindEvents=,j=h.getMaximumWidth=function(e){return e.parentNode.clientWidth},E=h.getMaximumHeight=function(e){return e.parentNode.clientHeight},A=(h.getMaximumSize=h.getMaximumWidth,h.retinaScale=,P=h.clear=M=h.fontString=O=h.longestText=D=h.drawRoundedRectangle=a.instances={},r((a.Type=.prototype,{initialize:function(){return this},clear:stop:resize:reflow:c,render:generateLegend:destroy:showTooltip:toBase64Image:),a.Type.extend=function(e){ar o,t,i=this;return n.prototype=s(i.prototype),r(n.prototype,e),n.extend=a.Type.extend,e.name||i.prototype.name?(o=e.name||i.prototype.name,t=a.defaults[i.prototype.name]?s(a.defaults[i.prototype.name]):{},a.defaults[o]=r(t,e.defaults),a.types[o]=n,a.prototype[o]=:u("Name not provided for this chart, so it hasn't been registered"),i},a.Element=r(a.Element.prototype,{initialize:function(){},restore:save:update:transition:tooltipPosition:hasValue:),a.Element.extend=o,a.Point=a.Element.extend({display:!0,inRange:draw:),a.Arc=a.Element.extend({inRange:tooltipPosition:draw:),a.Rectangle=a.Element.extend({draw:height:function(){return this.base-this.y},inRange:),a.Tooltip=a.Element.extend({draw:function(){var e=this.chart.ctx;e.font=M(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=e.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,n=i+this.caretHeight+2;this.x+t/2>this.chart.width?this.xAlign="left":this.x-t/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var o=this.x-t/2,a=this.y-n;switch(e.fillStyle=this.fillColor,this.yAlign){case"above":e.beginPath(),e.moveTo(this.x,this.y-2),e.lineTo(this.x+this.caretHeight,this.y-(2+this.caretHeight)),e.lineTo(this.x-this.caretHeight,this.y-(2+this.caretHeight)),e.closePath(),e.fill();break;case"below":a=this.y+2+this.caretHeight,e.beginPath(),e.moveTo(this.x,this.y+2),e.lineTo(this.x+this.caretHeight,this.y+2+this.caretHeight),e.lineTo(this.x-this.caretHeight,this.y+2+this.caretHeight),e.closePath(),e.fill()}switch(this.xAlign){case"left":o=this.x-t+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}D(e,o,a,t,i,this.cornerRadius),e.fill(),e.fillStyle=this.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,o+t/2,a+i/2)}}),a.MultiTooltip=a.Element.extend({initialize:getLineHeight:draw:),a.Scale=a.Element.extend({initialize:function(){this.fit()},buildYLabels:addXLabel:removeXLabel:fit:calculateXLabelRotation:function(){this.ctx.font=this.font;var e,t=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=t/2>this.yLabelWidth+10?t/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var n,o=O(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&0<this.xLabelRotation;)n=Math.cos(_(this.xLabelRotation)),(e=n*t)+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=e+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*o;0<this.xLabelRotation&&(this.endPoint-=Math.sin(_(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:calculateY:calculateX:update:draw:),a.RadialScale=a.Element.extend({initialize:calculateCenterOffset:update:buildYLabels:getCircumference:setScaleSize:setCenterPoint:getIndexAngle:getPointPosition:draw:function(){if(this.display){var r=this.ctx;if(p(this.yLabels,function(e,t){if(0<t){var i,n,o=t*(this.drawingArea/this.steps),a=this.yCenter-o;if(0<this.lineWidth)if(r.strokeStyle=this.lineColor,r.lineWidth=this.lineWidth,this.lineArc)r.beginPath(),r.arc(this.xCenter,this.yCenter,o,0,2*Math.PI),r.closePath(),r.stroke();else{r.beginPath();for(var s=0;s<this.valuesCount;s++)i=this.getPointPosition(s,this.calculateCenterOffset(this.min+t*this.stepValue)),0===s?r.moveTo(i.x,i.y):r.lineTo(i.x,i.y);r.closePath(),r.stroke()}this.showLabels&&(r.font=M(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop&&(n=r.measureText(e).width,r.fillStyle=this.backdropColor,r.fillRect(this.xCenter-n/2-this.backdropPaddingX,a-this.fontSize/2-this.backdropPaddingY,n+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)),r.textAlign="center",r.textBaseline="middle",r.fillStyle=this.fontColor,r.fillText(e,this.xCenter,a))}},this),!this.lineArc){r.lineWidth=this.angleLineWidth,r.strokeStyle=this.angleLineColor;for(var e,t=this.valuesCount-1;0<=t;t--){0<this.angleLineWidth&&(e=this.getPointPosition(t,this.calculateCenterOffset(this.max)),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(e.x,e.y),r.stroke(),r.closePath());var i=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);r.font=M(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),r.fillStyle=this.pointLabelFontColor;var n=this.labels.length,o=this.labels.length/2,a=o/2,s=t<a||n-a<t,l=t===a||t===n-a;r.textAlign=0===t||t===o?"center":t<o?"left":"right",r.textBaseline=l?"middle":s?"bottom":"top",r.fillText(this.labels[t],i.x,i.y)}}}}}),h.addEvent(window,"resize",,f?define(function(){return a}):"object"==typeof module&&module.exports&&(module.exports=a),(e.Chart=a).noConflict=function(){return e.Chart=t,a}}.call(this),function(){"use strict";var e=this.Chart,r=e.helpers;e.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:update:function(){this.scale.update(),r.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachBars(function(e){e.save()}),this.render()},eachBars:getBarsAtEvent:buildScale:function(e){var n=this,t={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t,i=r.calculateScaleRange((t=[],n.eachBars(function(e){t.push(e.value)}),t),e,this.fontSize,this.beginAtZero,this.integersOnly);r.extend(this,i)},xLabels:e,font:r.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:!this.options.showScale&&this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&r.extend(t,{calculateYRange:r.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(t)},addData:removeData:function(){this.scale.removeXLabel(),r.each(this.datasets,function(e){e.bars.shift()},this),this.update()},reflow:draw:)}.call(this),function(){"use strict";var t=this.Chart,n=t.helpers,e={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:e,initialize:getSegmentsAtEvent:function(e){var t=[],i=n.getRelativePosition(e);return n.each(this.segments,function(e){e.inRange(i.x,i.y)&&t.push(e)},this),t},addData:calculateCircumference:calculateTotal:update:removeData:function(e){var t=n.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},reflow:draw:),t.types.Doughnut.extend({name:"Pie",defaults:n.merge(e,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var i=this.Chart,c=i.helpers;i.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:update:eachPoints:function(t){c.each(this.datasets,function(e){c.each(e.points,t,this)},this)},getPointsAtEvent:buildScale:addData:removeData:reflow:draw:function(e){var i=e||1;this.clear();r n=this.chart.ctx;this.scale.draw(i),c.each(this.datasets,function(e){var s=c.where(e.points,r);c.each(e.points,this),this.options.bezierCurve&&c.each(s,this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=e.strokeColor,n.beginPath(),c.each(s,function(e,t){var i;0===t?n.moveTo(e.x,e.y):this.options.bezierCurve?(i=l(e,s,t),n.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y)):n.lineTo(e.x,e.y)},this),n.stroke(),this.options.datasetFill&&0<s.length&&(n.lineTo(s[s.length-1].x,this.scale.endPoint),n.lineTo(s[0].x,this.scale.endPoint),n.fillStyle=e.fillColor,n.closePath(),n.fill()),c.each(s,function(e){e.draw()})},this)}})}.call(this),function(){"use strict";var t=this.Chart,n=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},initialize:getSegmentsAtEvent:addData:removeData:calculateTotal:updateScaleRange:update:reflow:draw:)}.call(this),call(this),function(){return {1:[{}],2:[{"./closest":1}],3:[{}],4:[{"./is":3,delegate:2}],5:[{}],6:[{}],7:[function(e,t,i){var n,o,a;n=this,o=function(e,t){"use strict";var i,n=(i=t)&&i.__esModule?i:{default:i},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?a=(function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}(s,[{key:"resolveOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:,{key:"selectFake",value:,{key:"removeFake",value:,{key:"selectTarget",value:,{key:"copyText",value:,{key:"handleResult",value:,{key:"clearSelection",value:,{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:get:function(){return this._action}},{key:"target",set:get:function(){return this._target}}]),s);unction r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=a},void 0!==i?o(t,e("select")):(o(a={exports:{}},n.select),n.clipboardAction=a.exports)},{select:5}],8:[function(e,t,i){var n,o,a;n=this,o=function(e,t,i,n){"use strict";r s=o(t),r=o(i),l=o(n),c=d=(u,r.default),c(u,[{key:"resolveOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText}},{key:"listenClick",value:,{key:"onClick",value:,{key:"defaultAction",value:function(e){return a("action",e)}},{key:"defaultTarget",value:,{key:"defaultText",value:,{key:"destroy",value:],[{key:"isSupported",value:]),u);exports=d},void 0!==i?o(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener")):(o(a={exports:{}},n.clipboardAction,n.tinyEmitter,n.goodListener),n.clipboard=a.exports)},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(b,_,w,y){function r(){}function s(){return!1},m,g,v,k,x,S,T,$,e,n,I=_.document,j=b(I),E=b(_),A=Array.prototype,a=!0,P=!1,t=navigator.userAgent.toLowerCase(),M=_.location.hash.replace(/#\//,""),o="file:"==_.location.protocol?"http:":_.location.protocol,O=Math,D=),R=_.parent!==_.self,F="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",N=(n=[],b.each(F.split(" "),,n),B={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return o+"//www.youtube.com/embed/"+this.id},get_thumb:function(e){return o+"//img.youtube.com/vi/"+this.id+"/default.jpg"},get_image:,vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return o+"//player.vimeo.com/video/"+this.id},getUrl:get_thumb:function(e){return e[0].thumbnail_medium},get_image:,dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:getUrl:get_thumb:function(e){return e.thumbnail_240_url},get_image:function(e){return e.thumbnail_720_url}},_inst:[]},U={support:(e=C().html,!R&&(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen)),callback:r,enter:exit:instance:null,listen:function(){var e;this.support&&(e=function(){var e;U.instance&&(e=U.instance._fullscreen,I.fullscreen||I.mozFullScreen||I.webkitIsFullScreen||I.msFullscreenElement&&null!==I.msFullscreenElement?e._enter(U.callback):e._exit(U.callback))},I.addEventListener("fullscreenchange",e,!1),I.addEventListener("MSFullscreenChange",e,!1),I.addEventListener("mozfullscreenchange",e,!1),I.addEventListener("webkitfullscreenchange",e,!1))}},L=[],H=[],K=!1,W=!1,z=[],V=[],q={clearTimer:function(e){b.each(w.get(),function(){this.clearTimer(e)})},addTimer:array:create:removeFromArray:getScriptPath:animate:(S=(I.body||I.documentElement).style),T={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[S],,removeAlpha:function(e){var t,i,n;e instanceof jQuery&&(e=e[0]),D<9&&e&&(t=e.style,n=(i=e.currentStyle)&&i.filter||t.filter||"",/alpha/.test(n)&&(t.filter=n.replace(/alpha\([^)]*\)/i,"")))},forceStyles:revertStyles:moveOut:moveIn:hide:function(e,t,i){i=i||r;var n=b(e);e=n[0],n.data("opacity")||n.data("opacity",n.css("opacity"));var o,a={opacity:0};t?(o=D<9&&e?i,q.animate(e,a,{duration:t,complete:o,stop:!0})):D<9&&e?(q.removeAlpha(e),e.style.visibility="hidden"):n.css(a)},show:function(e,t,i){i=i||r;var n=b(e);e=n[0];var o,a={opacity:parseFloat(n.data("opacity"))||1};t?(D<9&&(n.css("opacity",0),e.style.visibility="visible"),o=D<9&&e?i,q.animate(e,a,{duration:t,complete:o,stop:!0})):D<9&&1==a.opacity&&e?(q.removeAlpha(e),e.style.visibility="visible"):n.css(a)},wait:toggleQuality:insertStyleTag:loadScript:parseValue:timestamp:loadCSS:function(e,t,i){var n,o,a;if(b("link[rel=stylesheet]").each(,"function"==typeof t&&(i=t,t=y),i=i||r,n)return i.call(n,n),n;if(o=I.styleSheets.length,b("#"+t).length)b("#"+t).attr("href",e),o--;else{n=b("<link>").attr({rel:"stylesheet",href:e,id:t}).get(0);var s=b('link[rel="stylesheet"], style');if(s.length?s.get(0).parentNode.insertBefore(n,s[0]):C().head.appendChild(n),D&&31<=o)return void w.raise("You have reached the browser stylesheet limit (31)",!0)}return"function"==typeof i&&(a=b("<s>").attr("id","galleria-loader").hide().appendTo(C().body),q.wait({until:success:error:timeout:5e3})),n}},Y={active:!($={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]}),init:effects:{fade:flash:pulse:slide:fadeslide:doorslide:};isten(),b.event.special["click:fast"]={propagate:!0,add:function(i){ar o={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};b(this).data({clickstate:o,timer:0}).on("touchstart.fast",.on("touchmove.fast",.on("touchend.fast",.on("click.fast",function(e){return!b(this).data("clickstate").touched&&(b(this).data("clickstate",o),void i.handler.call(this,e))})},remove:function(){b(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},E.on("orientationchange",function(){b(this).resize()}),(w=function(){var g=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=y,this._binds=[],this._id=parseInt(1e4*O.random(),10);b.each("container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip".split(" "),,b.each("current total".split(" "),;var n=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:attach:detach:,e=this._controls={0:y,1:y,active:0,swap:getActive:getNext:slides:[],frames:[],layers:[]},i=this._carousel={next:g.$("thumb-nav-right"),prev:g.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var n=0,o=0,a=[0];b.each(g._thumbnails,function(e,t){var i;t.ready&&(n+=t.outerWidth||b(t.container).outerWidth(!0),i=b(t.container).width(),n+=i-O.floor(i),a[e+1]=n,o=O.max(o,t.outerHeight||b(t.container).outerHeight(!0)))}),g.$("thumbnails").css({width:n,height:o}),i.max=n,i.hooks=a,i.width=g.$("thumbnails-list").width(),i.setClasses(),g.$("thumbnails-container").toggleClass("galleria-carousel",n>i.width),i.width=g.$("thumbnails-list").width()},bindControls:set:getLast:follow:setClasses:animate:,o=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+g._id,swapTimer:"swap"+g._id,init:move:bind:function(e,t){var i,n;w.TOUCH||(o.initialized||o.init(),i=n="string"==typeof t?n(e in g._dom?g.get(e):e,t):b.each(e,)},show:define:function(e,t){var i;"function"!=typeof t&&(i=t,t=function(){return i}),e=b(e in g._dom?g.get(e):e).data("tt",t),o.show(e)}},v=this._fullscreen={scrolled:0,crop:y,active:!1,prev:b(),beforeEnter:function(e){e()},beforeExit:function(e){e()},keymap:g._keyboard.map,parseCallback:enter:_enter:function(e){var t,i,n,o;v.active=!0,R&&(v.iframe=(i=I.referrer,n=I.createElement("a"),o=_.location,n.href=i,n.protocol!=o.protocol||n.hostname!=o.hostname||n.port!=o.port?(w.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(v.pd=_.parent.document,b(v.pd).find("iframe").each(,t))),q.hide(g.getActiveImage()),R&&v.iframe&&(v.iframe.scrolled=b(_.parent).scrollTop(),_.parent.scrollTo(0,0));var a,s,r,l,c,d,u,h=g.getData(),p=g._options,m=!g._options.trueFullscreen||!U.support,f={height:"100%",overflow:"hidden",margin:0,padding:0};m&&(g.$("container").addClass("fullscreen"),v.prev=g.$("container").prev(),v.prev.length||(v.parent=g.$("container").parent()),g.$("container").appendTo("body"),q.forceStyles(g.get("container"),{position:w.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),q.forceStyles(C().html,f),q.forceStyles(C().body,f)),R&&v.iframe&&(q.forceStyles(v.pd.documentElement,f),q.forceStyles(v.pd.body,f),q.forceStyles(v.iframe,b.extend(f,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),v.keymap=b.extend({},g._keyboard.map),g.attachKeyboard({escape:g.exitFullscreen,right:g.next,left:g.prev}),v.crop=p.imageCrop,p.fullscreenCrop!=y&&(p.imageCrop=p.fullscreenCrop),h&&h.big&&h.image!==h.big&&(a=new w.Picture,s=a.isCached(h.big),r=g.getIndex(),l=g._thumbnails[r],g.trigger({type:w.LOADSTART,cached:s,rewind:!1,index:r,imageTarget:g.getActiveImage(),thumbTarget:l,galleriaData:h}),a.load(h.big,,c=g.getNext(r),d=new w.Picture,u=g.getData(c),d.preload(g.isFullscreen()&&u.big?u.big:u.image)),g.rescale(,m?E.resize(v.scale):q.show(g.getActiveImage())},scale:function(){g.rescale()},exit:_exit:function(e){v.active=!1;var t,i=!g._options.trueFullscreen||!U.support,n=g.$("container").removeClass("fullscreen");v.parent?v.parent.prepend(n):n.insertAfter(v.prev),i&&(q.hide(g.getActiveImage()),q.revertStyles(g.get("container"),C().html,C().body),w.TOUCH||_.scrollTo(0,v.scrolled),(t=g._controls.frames[g._controls.active])&&t.image&&(t.image.src=t.image.src)),R&&v.iframe&&(q.revertStyles(v.pd.documentElement,v.pd.body,v.iframe),v.iframe.scrolled&&_.parent.scrollTo(0,v.iframe.scrolled)),g.detachKeyboard(),g.attachKeyboard(v.keymap),g._options.imageCrop=v.crop;var o,a=g.getData().big,s=g._controls.getActive().image;!g.getData().iframe&&s&&a&&a==s.src&&_.setTimeout((o=g.getData().image,,1),g.rescale(,E.off("resize",v.scale)}},s=this._idle={trunk:[],bound:!1,active:!1,add:remove:addEvent:function(){s.bound=!0,g.$("container").on("mousemove click",s.showAll),"hover"==g._options.idleMode&&g.$("container").on("mouseleave",s.hide)},removeEvent:addTimer:hide:function(){var n;g._options.idleMode&&!1!==g.getIndex()&&(g.trigger(w.IDLE_ENTER),n=s.trunk.length,b.each(s.trunk,)},showAll:show:,d=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){var o,e,i,t,n,a,s,r;d.initialized||(d.initialized=!0,o={},e=g._options,i="",t="position:absolute;",n="lightbox-",a={overlay:"position:fixed;display:none;opacity:"+e.overlayOpacity+";filter:alpha(opacity="+100*e.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+e.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:t+"background:#000;width:100%;height:100%;",content:t+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:t+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:t+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:t+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:t+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:t+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},s={},r="",r=7<D?D<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999",a.nextholder+=r,a.prevholder+=r,b.each(a,,i+=".galleria-"+n+"box.iframe .galleria-"+n+"prevholder,.galleria-"+n+"box.iframe .galleria-"+n+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",q.insertStyleTag(i,"galleria-lightbox"),b.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),,d.image=new w.Picture,b.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},,g.append(s),b(o.image).append(d.image.container),b(C().body).append(o.overlay,o.box),b(o.close).on("click:fast",d.hide).html("&#215;").hover(function(){b(this).css("color","#bbb")},,b.each(["Prev","Next"],,b(o.overlay).on("click:fast",d.hide),w.IPAD&&(g._options.lightboxTransitionSpeed=0))},rescale:hide:showNext:function(){d.show(g.getNext(d.active))},showPrev:show:function(r){d.active=r="number"==typeof r?r:g.getIndex()||0,d.initialized||d.init(),g.trigger(w.LIGHTBOX_OPEN),d.keymap||(d.keymap=b.extend({},g._keyboard.map),g.attachKeyboard({escape:d.hide,right:d.showNext,left:d.showPrev})),E.off("resize",d.rescale);var e,t,i,l=g.getData(r),c=g.getDataLength(),n=g.getNext(r);q.hide(d.elems.info);try{for(i=g._options.preload;0<i;i--)t=new w.Picture,e=g.getData(n),t.preload(e.big?e.big:e.image),n=g.getNext(n)}catch(e){}d.image.isIframe=l.iframe&&!l.image,b(d.elems.box).toggleClass("iframe",d.image.isIframe),b(d.image.container).find(".galleria-videoicon").remove(),d.image.load(l.big||l.image||l.iframe,function(e){var t,i,n,o,a,s;e.isIframe?(t=b(_).width(),i=b(_).height(),e.video&&g._options.maxVideoSize&&((n=O.min(g._options.maxVideoSize/t,g._options.maxVideoSize/i))<1&&(t*=n,i*=n)),d.width=t,d.height=i):(d.width=e.original.width,d.height=e.original.height),b(e.image).css({width:e.isIframe?"100%":"100.1%",height:e.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),d.elems.title.innerHTML=l.title||"",d.elems.counter.innerHTML=r+1+" / "+c,E.resize(d.rescale),d.rescale(),l.image&&l.iframe&&(b(d.elems.box).addClass("iframe"),l.video&&(o=f(e.container).hide(),_.setTimeout(function(){o.fadeIn(200)},200)),b(e.image).css("cursor","pointer").mouseup((a=l,s=e,))}),b(d.elems.overlay).show().css("visibility","visible"),b(d.elems.box).show()}},a=this._timer={trunk:{},add:function(e,t,i,n){var o;e=e||(new Date).getTime(),n=n||!1,this.clear(e),n&&(o=t,t=,this.trunk[e]=_.setTimeout(t,i)},clear:;return this}).prototype={constructor:w,init:_init:function(){var e,t,i,n,o,a,s,r,l,c,d=this,u=this._options;if(this._initialized)return w.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return w.raise("Init failed: No theme found.",!0),this;eturn b.extend(!0,u,this.theme.defaults,this._original.options,w.configure.options),u.swipe="enforced"==(e=u.swipe)||!1!==e&&"disabled"!=e&&!!w.TOUCH,u.swipe&&(u.clicknext=!1,u.imagePan=!1),"getContext"in(t=I.createElement("canvas"))?W=W||{elem:t,context:t.getContext("2d"),cache:{},length:0}:t=null,this.bind(w.DATA,,this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),q.hide(this.$("counter").append(this.get("current"),I.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),q.hide(d.get("tooltip")),this.$("container").addClass([w.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||b.each(new Array(2),,this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),u.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new w.Finger(this.get("stage"),{onchange:oncomplete:),this.bind(w.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(e){var t=d.getData();if(t){if(t.iframe){d.isPlaying()&&d.pause();var i=d._controls.frames[d._active],n=d._stageWidth,o=d._stageHeight;if(b(i.container).find("iframe").length)return;return b(i.container).css({width:n,height:o,opacity:0}).show().animate({opacity:1},200),void _.setTimeout(function(){i.load(t.iframe+(t.video?"&autoplay=1":""),{width:n,height:o},function(e){d.$("container").addClass("videoplay"),e.scale({width:d._stageWidth,height:d._stageHeight,iframelimit:t.video?d._options.maxVideoSize:y})})},100)}t.link&&(d._options.popupLinks?_.open(t.link,"_blank"):_.location.href=t.link)}}),this.bind(w.IMAGE,),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",.on("click",,b.each(["info","counter","image-nav"],,this.load(),u.keepSource||D||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),u.carousel&&(i=0,n=u.show,this.bind(w.THUMBNAIL,),u.responsive&&E.on("resize",,u.fullscreenDoubleTap&&this.$("stage").on("touchstart",(d.$("stage").on("touchmove",,),b.each(w.on.binds,,this},addTimer:function(){return this._timer.add.apply(this._timer,q.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,q.array(arguments)),this},_getWH:_createThumbnails:function(e){this.get("total").innerHTML=this.getDataLength();o,a,s,l,c,d=this,u=this._options,h=e?this._data.length-e.length:0,p=h,m=[],f=0,g=D<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",v=!!(c=d.$("thumbnails").find(".active")).length&&c.find("img").attr("src"),y="string"==typeof u.thumbnails?u.thumbnails.toLowerCase():null;for(e||(this._thumbnails=[],this.$("thumbnails").empty());this._data[h];h++)o=(s=this._data[h]).thumb||s.image,!0!==u.thumbnails&&"lazy"!=y||!s.thumb&&!s.image?s.iframe&&null!==y||"empty"===y||"numbers"===y?(a={container:q.create("galleria-image"),image:q.create("img","span"),ready:!0,data:{order:h}},"numbers"===y&&b(a.image).text(h+1),s.iframe&&b(a.image).addClass("iframe"),this.$("thumbnails").append(a.container),_.setTimeout(a.image,h,a.container),50+20*h)):a={container:null,image:null}:((a=new w.Picture(h)).index=h,a.displayed=!1,a.lazy=!1,a.video=!1,this.$("thumbnails").append(a.container),(l=b(a.container)).css("visibility","hidden"),a.data={width:q.parseValue(t("width")),height:q.parseValue(t("height")),order:h,src:o},!0!==u.thumbCrop?l.css({width:"auto",height:"auto"}):l.css({width:a.data.width,height:a.data.height}),"lazy"==y?(l.addClass("lazy"),a.lazy=!0,a.load(g,{height:a.data.height,width:a.data.width})):a.load(o,n),"all"===u.preload&&a.preload(s.image)),b(a.container).add(u.keepSource&&u.linkSourceImages?s.original:null).data("index",h).on(u.thumbEventType,i).data("thumbload",n),v===o&&b(a.container).addClass("active"),this._thumbnails.push(a);return m=this._thumbnails.slice(p),this},lazyLoad:function(e,s){var r=e.constructor==Array?e:[e],l=this,c=0;return b.each(r,function(e,t){var i,n,o,a;t>l._thumbnails.length-1||(n=(i=l._thumbnails[t]).data,o=a=b(i.container).data("thumbload"),i.video?a.call(l,i,o):i.load(n.src,)}),this},lazyLoadChunks:_run:function(){var a=this;a._createThumbnails(),q.wait({timeout:1e4,until:success:function(){var o;if(L.push(a),a._options.swipe&&(o=a.$("images").width(a.getDataLength()*a._stageWidth),b.each(new Array(a.getDataLength()),,a.finger.setup()),q.show(a.get("counter")),a._options.carousel&&a._carousel.bindControls(),a._options.autoplay&&(a.pause(),"number"==typeof a._options.autoplay&&(a._playtime=a._options.autoplay),a._playing=!0),a._firstrun)return a._options.autoplay&&a.trigger(w.PLAY),void("number"==typeof a._options.show&&a.show(a._options.show));a._firstrun=!0,w.History&&w.History.change(,a.trigger(w.READY),a.theme.init.call(a,a._options),b.each(w.ready.callbacks,,a._options.extend.call(a,a._options),/^[0-9]{1,4}$/.test(M)&&w.History?a.show(M,y,!0):a._data[a._options.show]&&a.show(a._options.show),a._options.autoplay&&a.trigger(w.PLAY)},error:)},load:_parseData:function(e){ar r,l=this,t=!1;return b.each(this._data,function(e,t){var a;r=l._data[e],"thumb"in t==!1&&(r.thumb=t.image),t.big||(r.big=t.image),"video"in t&&((a=d(t.video))&&(r.iframe=new c(a.provider,a.id).embed()+),r.thumb&&r.image||b.each(["thumb","image"],function(e,t){var i,n,o;"image"!=t||l._options.videoPoster?(i=new c(a.provider,a.id),r[t]||(r.loading=!0,i.getMedia(t,(n=r,o=t,))):r.image=y})))}),s(),this},destroy:splice:push:_getActive:validate:bind:unbind:trigger:addIdleState:removeIdleState:function(e){return this._idle.remove.apply(this._idle,q.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(e){return this._fullscreen.enter.apply(this,q.array(arguments)),this},exitFullscreen:toggleFullscreen:bindTooltip:function(e,t){return this._tooltip.bind.apply(this._tooltip,q.array(arguments)),this},defineTooltip:refreshTooltip:function(e){return this._tooltip.show.apply(this._tooltip,q.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,q.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,q.array(arguments)),this},hasVariation:getActiveImage:getActiveThumb:getMousePosition:addPan:function(o){if(!1!==this._options.imageCrop){o=b(o||this.getActiveImage());function t(e,t,i){var n;0<e&&(f=O.round(O.max(-1*e,O.min(0,t))),m!==f&&(m=f,8===D?o.parent()["scroll"+i](-1*f):((n={})[i.toLowerCase()]=f,o.css(n))))}ar i=this,n=o.width()/2,a=o.height()/2,s=parseInt(o.css("left"),10),r=parseInt(o.css("top"),10),l=s||0,c=r||0,d=0,u=0,h=!1,p=q.timestamp(),m=0,f=0;return 8===D&&(o.parent().scrollTop(-1*c).scrollLeft(-1*l),o.css({top:0,left:0})),this.$("stage").off("mousemove",e).on("mousemove",e),this.addTimer("pan"+i._id,50,!0),this}},proxy:getThemeName:function(){return this.theme.name},removePan:addElement:attachKeyboard:detachKeyboard:appendChild:function(e,t){return this.$(e).append(this.get(t)||t),this},prependChild:remove:append:_scaleImage:updateCarousel:resize:rescale:refreshImage:_preload:show:function(e,t,i){var n=this._options.swipe;if(n||!(3<this._queue.length||!1===e||!this._options.queue&&this._queue.stalled)){if(e=O.max(0,O.min(parseInt(e,10),this.getDataLength()-1)),t=void 0!==t?!!t:e<this.getIndex(),(i=i||!1)||!w.History){if(this.finger&&e!==this._active&&(this.finger.to=-(e*this.finger.width),this.finger.index=e),this._active=e,n){var o=this.getData(e),a=this;if(!o)return;var s=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,r=this._controls.slides[e],l=r.isCached(s),c=this._thumbnails[e],d={cached:l,index:e,rewind:t,imageTarget:r.image,thumbTarget:c.image,galleriaData:o};this.trigger(b.extend(d,{type:w.LOADSTART})),a.$("container").removeClass("videoplay");._preload(),_.setTimeout(100)}else A.push.call(this._queue,{index:e,rewind:t}),this._queue.stalled||this._show();return this}w.History.set(e.toString())}},_show:function(){var e,o,t,a,i,s,r,l,n,c,d,u,h=this,p=this._queue[0],m=this.getData(p.index);m&&(e=this.isFullscreen()&&m.big?m.big:m.image||m.iframe,o=this._controls.getActive(),t=this._controls.getNext(),a=t.isCached(e),i=this._thumbnails[p.index],s=h.$("container").toggleClass("iframe",!!m.isIframe).removeClass("videoplay"),l=m,n=t,c=o,d=p,u=i,r=this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(p.index),h._preload(),q.show(t.container),t.isIframe=m.iframe&&!m.image,b(h._thumbnails[p.index].container).addClass("active").siblings(".active").removeClass("active"),h.trigger({type:w.LOADSTART,cached:a,index:p.index,rewind:p.rewind,imageTarget:t.image,thumbTarget:i.image,galleriaData:m}),h._queue.stalled=!0,t.load(e,function(e){var n=b(h._layers[1-h._controls.active]).html(m.layer||"").hide();h._scaleImage(e,{complete:function(e){"image"in o&&q.toggleQuality(o.image,!1),q.toggleQuality(e.image,!1),h.removePan(),h.setInfo(p.index),h.setCounter(p.index),m.layer&&(n.show(),(m.iframe&&m.image||m.link||h._options.lightbox||h._options.clicknext)&&n.css("cursor","pointer").off("mouseup").mouseup(s)),m.video&&m.image&&f(e.container);var t,i=h._options.transition;b.each({initial:null===o.image,touch:w.TOUCH,fullscreen:h.isFullscreen()},,i in Y.effects==!1?r():(t={prev:o.container,next:e.container,rewind:p.rewind,speed:h._options.transitionSpeed||400},Y.active=!0,Y.init.call(h,i,t,r)),h.trigger({type:w.LOADFINISH,cached:a,index:p.index,rewind:p.rewind,imageTarget:e.image,thumbTarget:h._thumbnails[p.index].image,galleriaData:h.getData(p.index)})}})}))},getNext:getPrev:next:function(){return 1<this.getDataLength()&&this.show(this.getNext(),!1),this},prev:get:getData:getDataLength:function(){return this._data.length},getIndex:getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:setOptions:play:pause:playToggle:isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var e,t=this,i=0,n=q.timestamp(),o="play"+this._id;this._playing&&(this.clearTimer(o),e=t.addTimer(o,e,20))},setPlaytime:function(e){return this._playtime=e,this},setIndex:function(e){return this._active=e,this},setCounter:function(e){var t,i;return"number"==typeof e?e++:void 0===e&&(e=this.getIndex()+1),this.get("current").innerHTML=e,D&&(i=(t=this.$("counter")).css("opacity"),1===parseInt(i,10)?q.removeAlpha(t[0]):this.$("counter").css("opacity",i)),this},setInfo:hasInfo:jQuery:$:,b.each(N,,b.extend(w,{IE9:9===D,IE8:8===D,IE7:7===D,IE6:6===D,IE:D,WEBKIT:/webkit/.test(t),CHROME:/chrome/.test(t),SAFARI:/safari/.test(t)&&!/chrome/.test(t),QUIRK:D&&I.compatMode&&"BackCompat"===I.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!_.opera,IPHONE:/iphone/.test(t),IPAD:/ipad/.test(t),ANDROID:/android/.test(t),TOUCH:"ontouchstart"in I}),w.addTheme=function(i){i.name||w.raise("No theme name specified"),"object"!=typeof i.defaults?i.defaults={}:i.defaults=l(i.defaults);var n,o,a=!1;return"string"==typeof i.css?(b("link").each(,a||b():u(i),i},w.loadTheme=w.get=w.configure=w.configure.options={},w.on=w.on.binds=[],w.run=w.addTransition=w.utils=q,w.log=w.ready=w.ready.callbacks=[],w.raise=w.version=1.47,w.getLoadedThemes=w.requires=w.Picture=w.Picture.prototype={cache:{},show:function(){q.show(this.image)},hide:clear:function(){this.image=null},isCached:preload:function(e){var t,i;b(new Image).load((t=e,i=this.cache,function(){i[t]=t})).attr("src",e)},load:function(i,n,e){if("function"==typeof n&&(e=n,n=null),this.isIframe){var t="if"+(new Date).getTime(),o=this.image=b("<iframe>",{src:i,frameborder:0,id:t,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return n&&b(o).css(n),b(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),b("#"+t).load((a=this,s=e,),this.container}var a,s;this.image=new Image,w.IE8&&b(this.image).css("filter","inherit"),w.IE||w.CHROME||w.SAFARI||b(this.image).css("image-rendering","optimizequality");var r,l,c,d=!1,u=!1,h=b(this.container),p=b(this.image),m=(r=this,l=e,c=i,function(){ar t;this.width&&this.height?e.call(this):(t=this,q.wait({until:success:function(){e.call(t)},error:timeout:100}))});return h.find("iframe,img").remove(),p.css("display","block"),q.hide(this.image),b.each("minWidth minHeight maxWidth maxHeight".split(" "),,p.load(m).on("error",.attr("src",i),this.container},scale:function(d){var u=this;if(d=b.extend({width:0,height:0,min:y,max:y,margin:0,complete:r,position:"center",crop:!1,canvas:!1,iframelimit:y},d),this.isIframe){var e,t,i,n=d.width,o=d.height;d.iframelimit&&((i=O.min(d.iframelimit/n,d.iframelimit/o))<1?(e=n*i,t=o*i,b(this.image).css({top:o/2-t/2,left:n/2-e/2,position:"absolute"})):b(this.image).css({top:0,left:0})),b(this.image).width(e||n).height(t||o).removeAttr("width").removeAttr("height"),b(this.container).width(n).height(o),d.complete.call(u,u);try{this.image.contentWindow&&b(this.image.contentWindow).trigger("resize")}catch(e){}return this.container}if(!this.image)return this.container;var h,p,m,a=b(u.container);return q.wait({until:success:function(){var e=(h-2*d.margin)/u.original.width,t=(p-2*d.margin)/u.original.height,i=O.min(e,t),n=O.max(e,t),o={true:n,width:e,height:t,false:i,landscape:u.original.width>u.original.height?n:i,portrait:u.original.width<u.original.height?n:i}[d.crop.toString()],a="";d.max&&(o=O.min(d.max,o)),d.min&&(o=O.max(d.min,o)),b.each(["width","height"],,b(u.container).width(h).height(p),d.canvas&&W&&(W.elem.width=u.width,W.elem.height=u.height,a=u.image.src+":"+u.width+"x"+u.height,u.image.src=W.cache[a]||a));function s(e,t,i){var n,o;return/\%/.test(e)?(n=parseInt(e,10)/100,o=u.image[t]||b(u.image)[t](),O.ceil(-1*o*n+i*n)):q.parseValue(e)}var r={},l={},c={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};b.each(d.position.toLowerCase().split(" "),,b.each(r,,r=r.top?b.extend(r,l):l,r=b.extend({top:"50%",left:"50%"},r),b(u.image).css({position:"absolute",top:s(r.top,"height",p),left:s(r.left,"width",h)}),u.show(),u.ready=!0,d.complete.call(u,u)},error:timeout:1e3}),this}},b.extend(b.easing,{galleria:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},galleriaIn:function(e,t,i,n,o){return n*(t/=o)*t+i},galleriaOut:function(e,t,i,n,o){return-n*(t/=o)*(t-2)+i}}),w.Finger=function(){O.abs;function e(e,t){var n;this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(e,t,i,n,o){return-n*((t=t/o-1)*t*t*t-1)+i}},this.easeout=function(e,t,i,n,o){return n*((t=t/o-1)*t*t*t*t+1)+i},e.children.length&&(n=this,b.extend(this.config,t),this.elem=e,this.child=e.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,i||(this.child.style.position="absolute",this.elem.style.position="relative"),b.each(["ontouchstart","ontouchmove","ontouchend","setup"],,this.setX=b(e).on("touchstart",this.ontouchstart),b(_).on("resize",this.setup),b(_).on("orientationchange",this.setup),this.setup(),))}var t,i=w.HAS3D=),o=(t="RequestAnimationFrame",_.requestAnimationFrame||_["webkit"+t]||_["moz"+t]||_["o"+t]||_["ms"+t]||;return e.prototype={constructor:e,setup:setPosition:ontouchstart:ontouchmove:ontouchend:show:moveTo:loop:,e}(),b.fn.galleria="object"==typeof module&&module&&"object"==typeof module.exports?module.exports=w:(_.Galleria=w,"function"==typeof define&&define.amd&&define("galleria",["jquery"],function(){return w}))}(jQuery,this),function(R,v){var y,i=0;unction l(e){ar i,n=google.maps.version.split(".").map(t);for(e=e.split(".").map(t),i=0;i<e.length;i++){if(!n.hasOwnProperty(i))return;if(n[i]<e[i])return}return 1}function _(o,e,a,t,s){var r;(e.todo.events||e.todo.onces)&&(r={id:t,data:e.todo.data,tag:e.todo.tag},e.todo.events&&R.each(e.todo.events,function(e,t){var i=o,n=t;R.isArray(t)&&(i=t[0],n=t[1]),google.maps.event.addListener(a,e,function(e){n.apply(i,[s||a,e,r])})}),e.todo.onces&&R.each(e.todo.onces,function(e,t){var i=o,n=t;R.isArray(t)&&(i=t[0],n=t[1]),google.maps.event.addListenerOnce(a,e,}))}function e(){var t=[];this.empty=this.add=function(e){t.push(e)},this.get=this.ack=function(){t.shift()}}function r(i,n,o){var a,e,s={},t=this,r={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};"string"==typeof o&&((e={})[o]={},o=e),this.run=function(){for(var e,t;e=function(){var e;for(e in o)if(!(e in s))return e}();){if("function"==typeof i[e])return a=e,t=R.extend(!0,{},y[e]||{},o[e].options||{}),void(e in r.latLng?o[e].values?function(t,e,i,n){var o=this,a=-1;function s(){for(;++a<t.length&&!("address"in t[a]););a>=t.length?i.apply(e,[n]):p(o,!0,{todo:t[a]})}s()}(o[e].values,i,i[e],{todo:o[e],opts:t,session:s}):p(i,i[e],r.latLng[e],{todo:o[e],opts:t,session:s}):e in r.geoloc?function(t,i,n){var o=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){o||(o=!0,n.latLng=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),i.apply(t,[n]))},n.opts.getCurrentPosition):(n.latLng=!1,i.apply(t,[n]))}(i,i[e],{todo:o[e],opts:t,session:s}):i[e].apply(i,[{todo:o[e],opts:t,session:s}]));s[e]=null}n.apply(i,[o,s])},this.ack=unction w(e,t){var i={};if(e.todo)for(var n in e.todo)"options"!==n&&"values"!==n&&(i[n]=e.todo[n]);for(var o=["data","tag","id","events","onces"],a=0;a<o.length;a++)!function(e,t){for(var i=2;i<arguments.length;i++)if(t in arguments[i])return e[t]=arguments[i][t]}(i,o[a],t,e.todo);return i.options=R.extend({},e.opts||{},t.options||{}),i}function d(e,t,i,n){var o=this,a=[];y.classes.OverlayView.call(this),this.setMap(e),this.onAdd=function(){var e=this.getPanes();t.pane in e&&R(e[t.pane]).append(n),R.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(e,t){a.push(google.maps.event.addDomListener(n[0],t,function(e){R.Event(e).stopPropagation(),google.maps.event.trigger(o,t,[e]),o.draw()}))}),a.push(google.maps.event.addDomListener(n[0],"contextmenu",function(e){R.Event(e).stopPropagation(),google.maps.event.trigger(o,"rightclick",[e]),o.draw()}))},this.getPosition=function(){return i},this.draw=this.onRemove=function(){for(var e=0;e<a.length;e++)google.maps.event.removeListener(a[e]);n.remove()},this.hide=function(){n.hide()},this.show=function(){n.show()},this.toggle=function(){n&&(n.is(":visible")?this.show():this.hide())},this.toggleDOM=function(){this.getMap()?this.setMap(null):this.setMap(e)},this.getDOMElement=function C(i,w,C){var e,k,x,S,T=!1,$=!1,I=!1,j=!1,E=!0,t=this,n=[],A={},o={},d={},a=[],P=[],M=[],s=function(e){function t(){return this.onAdd=function(){},this.onRemove=function(){},this.draw=function(){},y.classes.OverlayView.apply(this,[])}t.prototype=y.classes.OverlayView.prototype;var i=new t;return i.setMap(e),i}(w,C.radius);unction l(){(k=s.getProjection())?(j=!0,n.push(google.maps.event.addListener(w,"zoom_changed",function(){c()})),n.push(google.maps.event.addListener(w,"bounds_changed",function(){c()})),u()):setTimeout(25)}function O(e){"object"==typeof A[e]?("function"==typeof A[e].obj.setMap&&A[e].obj.setMap(null),"function"==typeof A[e].obj.remove&&A[e].obj.remove(),"function"==typeof A[e].shadow.remove&&A[e].obj.remove(),"function"==typeof A[e].shadow.setMap&&A[e].shadow.setMap(null),delete A[e].obj,delete A[e].shadow):a[e]&&a[e].setMap(null),delete A[e]}function D(){var e=function(e,t,i,n){var o,a,s,r=e instanceof google.maps.LatLng?(o=e.lat(),s=e.lng(),t instanceof google.maps.LatLng?(a=t.lat(),t.lng()):(a=t,i)):(o=e,s=t,i instanceof google.maps.LatLng?(a=i.lat(),i.lng()):(a=i,n)),l=Math.PI*o/180,c=Math.PI*s/180,d=Math.PI*a/180,u=Math.PI*r/180;return 6371e3*Math.acos(Math.min(Math.cos(l)*Math.cos(d)*Math.cos(c)*Math.cos(u)+Math.cos(l)*Math.sin(c)*Math.cos(d)*Math.sin(u)+Math.sin(l)*Math.sin(d),1))}(w.getCenter(),w.getBounds().getNorthEast());return new google.maps.Circle({center:w.getCenter(),radius:1.25*e}).getBounds()}unction u(){if(!T&&!I&&j){var e,t,i,n,o,a,s,r,l,c,d,u,h,p,m,f=[],g={},v=w.getZoom(),y="maxZoom"in C&&v>C.maxZoom,b=function(){var e,t={};for(e in A)t[e]=!0;return t}(),_=!1;for($=!1,3<v&&(_=(o=D()).getSouthWest().lng()<o.getNorthEast().lng()),e=0;e<P.length;e++)!P[e]||_&&!o.contains(P[e].options.position)||x&&!x(M[e])||f.push(e);for(;;){for(e=0;g[e]&&e<f.length;)e++;if(e==f.length)break;if(n=[],E&&!y){d=10;do{for(r=n,n=[],d--,s=r.length?o.getCenter():P[f[e]].options.position,u=s,0,h=k.fromLatLngToDivPixel(u),p=k.fromDivPixelToLatLng(new google.maps.Point(h.x+C.radius,h.y-C.radius)),m=k.fromDivPixelToLatLng(new google.maps.Point(h.x-C.radius,h.y+C.radius)),o=new google.maps.LatLngBounds(m,p),t=e;t<f.length;t++)g[t]||o.contains(P[f[t]].options.position)&&n.push(t)}while(r.length<n.length&&1<n.length&&d)}else for(t=e;t<f.length;t++)if(!g[t]){n.push(t);break}for(a={indexes:[],ref:[]},l=c=0,i=0;i<n.length;i++)g[n[i]]=!0,a.indexes.push(f[n[i]]),a.ref.push(f[n[i]]),l+=P[f[n[i]]].options.position.lat(),c+=P[f[n[i]]].options.position.lng();l/=n.length,c/=n.length,a.latLng=new google.maps.LatLng(l,c),a.ref=a.ref.join("-"),a.ref in b?delete b[a.ref]:(1===n.length&&(A[a.ref]=!0),S(a))}R.each(b,function(e){O(e)}),I=!1}}l(),this.getById=this.rm=this.clearById=function(e){if(e in o)return this.rm(e),!0},this.clear=function(e,t,i){for(var n,o,a,s=[],r=h(i),l=e?(n=P.length-1,o=-1):(n=0,o=P.length,1),c=n;c!=o&&(!P[c]||r&&!r(P[c].tag)||(s.push(d[c]),!t&&!e));c+=l);for(a=0;a<s.length;a++)this.rm(s[a])},this.add=function(e,t){e.id=b(e.id),this.clearById(e.id),o[e.id]=a.length,d[a.length]=e.id,a.push(null),P.push(e),M.push(t),$=!0},this.addMarker=function(e,t){(t=t||{}).id=b(t.id),this.clearById(t.id),t.options||(t.options={}),t.options.position=e.getPosition(),_(i,{todo:t},e,t.id),o[t.id]=a.length,d[a.length]=t.id,a.push(e),P.push(t),M.push(t.data||{}),$=!0},this.todo=function(e){return P[e]},this.value=function(e){return M[e]},this.marker=this.markerIsSet=this.setMarker=function(e,t){a[e]=t},this.store=this.free=function(){for(var e=0;e<n.length;e++)google.maps.event.removeListener(n[e]);n=[],R.each(A,function(e){O(e)}),A={},R.each(P,function(e){P[e]=null}),P=[],R.each(a,,a=[],R.each(M,,M=[],o={},d={}},this.filter=this.enable=this.display=this.error=this.beginUpdate=function(){T=!0},this.endUpdate=this.autofit=function(e){for(var t=0;t<P.length;t++)P[t]&&e.extend(P[t].options.position)}}function k(e,o){this.id=function(){return e},this.filter=function(e){o.filter(e)},this.enable=function(){o.enable(!0)},this.disable=function(){o.enable(!1)},this.add=this.getById=function(e){return o.getById(e)},this.clearById=this.clear=function x(){var l={},r={};unction o(e){"function"==typeof e.setMap&&e.setMap(null),"function"==typeof e.remove&&e.remove(),"function"==typeof e.free&&e.free(),e=null}this.add=function(e,t,i,n){var o=e.todo||{},a=b(o.id);return l[t]||(l[t]=[]),a in r&&this.clearById(a),r[a]={obj:i,sub:n,name:t,id:a,tag:o.tag,data:o.data},l[t].push(a),a},this.getById=function(e,t,i){return e in r&&(t?r[e].sub:i?c(r[e]):r[e].obj)},this.get=function(e,t,i,n){var o,a,s=h(i);if(!l[e]||!l[e].length)return null;for(o=l[e].length;o;)if(o--,(a=l[e][t?o:l[e].length-o-1])&&r[a]){if(s&&!s(r[a].tag))continue;return n?c(r[a]):r[a].obj}return null},this.all=function(e,t,n){function i(e){for(var t,i=0;i<l[e].length;i++)if((t=l[e][i])&&r[t]){if(a&&!a(r[t].tag))continue;o.push(n?c(r[t]):r[t].obj)}}var o=[],a=h(t);if(e in l)i(e);else if(e===v)for(e in l)i(e);return o},this.rm=function(e,t,i){var n,o;if(!l[e])return!1;if(t)if(i)for(n=l[e].length-1;0<=n&&(o=l[e][n],!t(r[o].tag));n--);else for(n=0;n<l[e].length&&(o=l[e][n],!t(r[o].tag));n++);else n=i?l[e].length-1:0;return n in l[e]&&this.clearById(l[e][n],n)},this.clearById=function(e,t){if(e in r){for(var i=r[e].name,n=0;t===v&&n<l[i].length;n++)e===l[i][n]&&(t=n);return o(r[e].obj),r[e].sub&&o(r[e].sub),delete r[e],l[i].splice(t,1),!0}return!1},this.objGetById=function(e){var t;if(l.clusterer)for(var i in l.clusterer)if(!1!==(t=r[l.clusterer[i]].obj.getById(e)))return t;return!1},this.objClearById=function(e){if(l.clusterer)for(var t in l.clusterer)if(r[l.clusterer[t]].obj.clearById(e))return!0;return null},this.clear=function(e,t,i,n){var o,a,s,r=h(n);if(e&&e.length)e=I(e);else for(o in e=[],l)e.push(o);for(a=0;a<e.length;a++)if(s=e[a],t)this.rm(s,r,!0);else if(i)this.rm(s,r,!1);else for(;this.rm(s,r,!1););},this.objClear=function(e,t,i,n){if(l.clusterer&&(0<=R.inArray("marker",e)||!e.length))for(var o in l.clusterer)r[l.clusterer[o]].obj.clear(t,i,n)}}var S={},u=new function(){var r=[];this.get=function(e){if(r.length)for(var t,i,n,o,a=c(e),s=0;s<r.length;s++){for(n=r[s],o=a.length==n.keys.length,t=0;t<a.length&&o;t++)o=(o=(i=a[t])in n.request)&&("object"==typeof e[i]&&"equals"in e[i]&&"function"==typeof e[i]?e[i].equals(n.request[i]):e[i]===n.request[i]);if(o)return n.results}},this.store=;function T(){return S.elevationService||(S.elevationService=new google.maps.ElevationService),S.elevationService}function $(){if(y.verbose){var e,t=[];if(window.console&&"function"==typeof console.error){for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}else{for(t="",e=0;e<arguments.length;e++)t+=arguments[e].toString()+" ";alert(t)}}}unction I(e){var t,i=[];if(e!==v)if("object"==typeof e)if("number"==typeof e.length)i=e;else for(t in e)i.push(e[t]);else i.push(e);return i}function h(i){if(i)return"function"==typeof i?i:(i=I(i),function(e){if(e===v)return!1;if("object"!=typeof e)return 0<=R.inArray(e,i);for(var t=0;t<e.length;t++)if(0<=R.inArray(e[t],i))return!0;return!1})}function j(e,t,i){var n=t?e:null;return e&&"string"!=typeof e?e.latLng?j(e.latLng):e instanceof google.maps.LatLng?e:o(e.lat)?new google.maps.LatLng(e.lat,e.lng):!i&&R.isArray(e)&&o(e[0])&&o(e[1])?new google.maps.LatLng(e[0],e[1]):n:n}function E(e){var t,i;return!e||e instanceof google.maps.LatLngBounds?e||null:(R.isArray(e)?2==e.length?(t=j(e[0]),i=j(e[1])):4==e.length&&(t=j([e[0],e[1]]),i=j([e[2],e[3]])):"ne"in e&&"sw"in e?(t=j(e.ne),i=j(e.sw)):"n"in e&&"e"in e&&"s"in e&&"w"in e&&(t=j([e.n,e.e]),i=j([e.s,e.w])),t&&i?new google.maps.LatLngBounds(i,t):null)}function p(i,n,o,a,s){var e=!!o&&j(a.todo,!1,!0),r=e?{latLng:e}:!!a.todo.address&&("string"==typeof a.todo.address?{address:a.todo.address}:a.todo.address),t=!!r&&u.get(r),l=this;r?(s=s||0,t?(a.latLng=t.results[0].geometry.location,a.results=t.results,a.status=t.status,n.apply(i,[a])):(r.location&&(r.location=j(r.location)),r.bounds&&(r.bounds=E(r.bounds)),S.geocoder||(S.geocoder=new google.maps.Geocoder),S.geocoder.geocode(r,function(e,t){t===google.maps.GeocoderStatus.OK?(u.store(r,{results:e,status:t}),a.latLng=e[0].geometry.location,a.results=e,a.status=t,n.apply(i,[a])):t===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&s<y.queryLimit.attempt?setTimeout(y.queryLimit.delay+Math.floor(Math.random()*y.queryLimit.random)):($("geocode failed",t,r),a.latLng=a.results=!1,a.status=t,n.apply(i,[a]))}))):(a.latLng=j(a.todo,!1,!0),n.apply(i,[a]))}function a(p){var o,m=this,i=new e,u=new x,f=null;nction s(e){var t;e.todo.callback&&(t=Array.prototype.slice.call(arguments,1),"function"==typeof e.todo.callback?e.todo.callback.apply(p,t):R.isArray(e.todo.callback)&&"function"==typeof e.todo.callback[1]&&e.todo.callback[1].apply(e.todo.callback[0],t))}unction g(e,t){var i;t=t||{},f?t.todo&&t.todo.options&&(t.todo.options.center&&(t.todo.options.center=j(t.todo.options.center)),f.setOptions(t.todo.options)):((i=t.opts||R.extend(!0,{},y.map,t.todo&&t.todo.options?t.todo.options:{})).center=e||j(i.center),f=new y.classes.Map(p.get(0),i))}function t(r,l,c){var d=[],e="values"in r.todo;e||(r.todo.values=[{options:r.opts}]),r.todo.values.length?(g(),R.each(r.todo.values,function(e,t){var i,n,o,a,s=w(r,t);if(s.options[c])if(s.options[c][0][0]&&R.isArray(s.options[c][0][0]))for(n=0;n<s.options[c].length;n++)for(o=0;o<s.options[c][n].length;o++)s.options[c][n][o]=j(s.options[c][n][o]);else for(n=0;n<s.options[c].length;n++)s.options[c][n]=j(s.options[c][n]);s.options.map=f,a=new google.maps[l](s.options),d.push(a),i=u.add({todo:s},l.toLowerCase(),a),_(p,{todo:s},a,i)}),h(r,e?d:d[0])):h(r,!1)}this._plan=function(e){for(var t=0;t<e.length;t++)i.add(new r(m,a,e[t]));n()},this.map=this.destroy=function(e){u.clear(),p.empty(),f=f&&null,h(e,!0)},this.infowindow=function(a){var s=[],r="values"in a.todo;r||(a.latLng&&(a.opts.position=a.latLng),a.todo.values=[{options:a.opts}]),R.each(a.todo.values,function(e,t){var i,n,o=w(a,t);o.options.position=o.options.position?j(o.options.position):j(t.latLng),f||g(o.options.position),(n=new y.classes.InfoWindow(o.options))&&(o.open===v||o.open)&&(r?n.open(f,o.anchor?o.anchor:v):n.open(f,o.anchor?o.anchor:!a.latLng&&a.session.marker?a.session.marker:v)),s.push(n),i=u.add({todo:o},"infowindow",n),_(p,{todo:o},n,i)}),h(a,r?s:s[0])},this.circle=function(a){var s=[],e="values"in a.todo;e||(a.opts.center=a.latLng||j(a.opts.center),a.todo.values=[{options:a.opts}]),a.todo.values.length?(R.each(a.todo.values,function(e,t){var i,n,o=w(a,t);o.options.center=o.options.center?j(o.options.center):j(t),f||g(o.options.center),o.options.map=f,n=new y.classes.Circle(o.options),s.push(n),i=u.add({todo:o},"circle",n),_(p,{todo:o},n,i)}),h(a,e?s:s[0])):h(a,!1)},this.overlay=function(s,r){var l=[],e="values"in s.todo;if(e||(s.todo.values=[{latLng:s.latLng,options:s.opts}]),s.todo.values.length){if(d.__initialised||(d.prototype=new y.classes.OverlayView,d.__initialised=!0),R.each(s.todo.values,,r)return l[0];h(s,e?l:l[0])}else h(s,!1)},this.getaddress=function(e){s(e,e.results,e.status),o.ack()},this.getlatlng=this.getmaxzoom=function(t){S.maxZoomService||(S.maxZoomService=new google.maps.MaxZoomService),S.maxZoomService.getMaxZoomAtLatLng(t.latLng,function(e){s(t,e.status===google.maps.MaxZoomStatus.OK&&e.zoom,status),o.ack()})},this.getelevation=function(i){function e(e,t){s(i,t===google.maps.ElevationStatus.OK&&e,t),o.ack()}var t,n=[];if(i.latLng)n.push(i.latLng);else for(n=I(i.todo.locations||[]),t=0;t<n.length;t++)n[t]=j(n[t]);if(n.length)T().getElevationForLocations({locations:n},e);else{if(i.todo.path&&i.todo.path.length)for(t=0;t<i.todo.path.length;t++)n.push(j(i.todo.path[t]));n.length?T().getElevationAlongPath({path:n,samples:i.todo.samples},e):o.ack()}},this.defaults=function(e){R.each(e.todo,function(e,t){"object"==typeof y[e]?y[e]=R.extend({},y[e],t):y[e]=t}),o.ack(!0)},this.rectangle=function(a){var s=[],e="values"in a.todo;e||(a.todo.values=[{options:a.opts}]),a.todo.values.length?(R.each(a.todo.values,function(e,t){var i,n,o=w(a,t);o.options.bounds=o.options.bounds?E(o.options.bounds):E(t),f||g(o.options.bounds.getCenter()),o.options.map=f,n=new y.classes.Rectangle(o.options),s.push(n),i=u.add({todo:o},"rectangle",n),_(p,{todo:o},n,i)}),h(a,e?s:s[0])):h(a,!1)},this.polyline=function(e){t(e,"Polyline","path")},this.polygon=this.trafficlayer=function(e){g();var t=u.get("trafficlayer");t||((t=new y.classes.TrafficLayer).setMap(f),u.add(e,"trafficlayer",t)),h(e,t)},this.bicyclinglayer=function(e){g();var t=u.get("bicyclinglayer");t||((t=new y.classes.BicyclingLayer).setMap(f),u.add(e,"bicyclinglayer",t)),h(e,t)},this.groundoverlay=function(e){e.opts.bounds=E(e.opts.bounds),e.opts.bounds&&g(e.opts.bounds.getCenter());var t=new y.classes.GroundOverlay(e.opts.url,e.opts.bounds,e.opts.opts);t.setMap(f),h(e,t,u.add(e,"groundoverlay",t))},this.streetviewpanorama=function(e){e.opts.opts||(e.opts.opts={}),e.latLng?e.opts.opts.position=e.latLng:e.opts.opts.position&&(e.opts.opts.position=j(e.opts.opts.position)),e.todo.divId?e.opts.container=document.getElementById(e.todo.divId):e.opts.container&&(e.opts.container=R(e.opts.container).get(0));var t=new y.classes.StreetViewPanorama(e.opts.container,e.opts.opts);t&&f.setStreetView(t),h(e,t,u.add(e,"streetviewpanorama",t))},this.kmllayer=function(s){var r=[],e="values"in s.todo;e||(s.todo.values=[{options:s.opts}]),s.todo.values.length?(R.each(s.todo.values,,h(s,e?r:r[0])):h(s,!1)},this.panel=function(e){g();var t,i=0,n=0,o=R(document.createElement("div"));o.css({position:"absolute",zIndex:1e3,visibility:"hidden"}),e.opts.content&&(t=R(e.opts.content),o.append(t),p.first().prepend(o),e.opts.left!==v?i=e.opts.left:e.opts.right!==v?i=p.width()-t.width()-e.opts.right:e.opts.center&&(i=(p.width()-t.width())/2),e.opts.top!==v?n=e.opts.top:e.opts.bottom!==v?n=p.height()-t.height()-e.opts.bottom:e.opts.middle&&(n=(p.height()-t.height())/2),o.css({top:n,left:i,visibility:"visible"})),h(e,o,u.add(e,"panel",o)),o=null},this.marker=function(a){var e,n,s,t="values"in a.todo,r=!f;t||(a.opts.position=a.latLng||j(a.opts.position),a.todo.values=[{options:a.opts}]),a.todo.values.length?(r&&g(),!a.todo.cluster||f.getBounds()?a.todo.cluster?(a.todo.cluster instanceof k?(e=a.todo.cluster,n=u.getById(e.id(),!0)):(n=function(r){var l,e,c=new C(p,f,r),d={},u={},h=[],t=/^[0-9]+$/;for(e in r)t.test(e)?(h.push(+e),u[e]=r[e],u[e].width=u[e].width||0,u[e].height=u[e].height||0):d[e]=r[e];return h.sort(,l=d.calculator?function(e){return e.length},c.error(function(){$.apply(m,arguments)}),c.display(function(e){var t,i,n,o,a,s=l(e.indexes);if(r.force||1<s)for(t=0;t<h.length;t++)h[t]<=s&&(i=u[h[t]]);i?(a=i.offset||[-i.width/2,-i.height/2],(n=R.extend({},d)).options=R.extend({pane:"overlayLayer",content:i.content?i.content.replace("CLUSTER_COUNT",s):"",offset:{x:("x"in a?a.x:a[0])||0,y:("y"in a?a.y:a[1])||0}},d.options||{}),o=m.overlay({todo:n,opts:n.options,latLng:j(e)},!0),n.options.pane="floatShadow",n.options.content=R(document.createElement("div")).width(i.width+"px").height(i.height+"px").css({cursor:"pointer"}),shadow=m.overlay({todo:n,opts:n.options,latLng:j(e)},!0),d.data={latLng:j(e),markers:[]},R.each(e.indexes,,_(p,{todo:d},shadow,v,{main:o,shadow:shadow}),c.store(e,o,shadow)):R.each(e.indexes,}),c}(a.todo.cluster),e=new k(b(a.todo.id,!0),n),u.add(a,"clusterer",e,n)),n.beginUpdate(),R.each(a.todo.values,function(e,t){var i=w(a,t);i.options.position=i.options.position?j(i.options.position):j(t),i.options.map=f,r&&(f.setCenter(i.options.position),r=!1),n.add(i,t)}),n.endUpdate(),h(a,e)):(s=[],R.each(a.todo.values,function(e,t){var i,n,o=w(a,t);o.options.position=o.options.position?j(o.options.position):j(t),o.options.map=f,r&&(f.setCenter(o.options.position),r=!1),n=new y.classes.Marker(o.options),s.push(n),i=u.add({todo:o},"marker",n),_(p,{todo:o},n,i)}),h(a,t?s:s[0])):google.maps.event.addListenerOnce(f,"bounds_changed",):h(a,!1)},this.getroute=function(i){i.opts.origin=j(i.opts.origin,!0),i.opts.destination=j(i.opts.destination,!0),S.directionsService||(S.directionsService=new google.maps.DirectionsService),S.directionsService.route(i.opts,function(e,t){s(i,t==google.maps.DirectionsStatus.OK&&e,t),o.ack()})},this.directionsrenderer=function(e){e.opts.map=f;var t=new google.maps.DirectionsRenderer(e.opts);e.todo.divId?t.setPanel(document.getElementById(e.todo.divId)):e.todo.container&&t.setPanel(R(e.todo.container).get(0)),h(e,t,u.add(e,"directionsrenderer",t))},this.getgeoloc=this.styledmaptype=this.imagemaptype=this.autofit=function(e){var i=new google.maps.LatLngBounds;R.each(u.all(),function(e,t){t.getPosition?i.extend(t.getPosition()):t.getBounds?(i.extend(t.getBounds().getNorthEast()),i.extend(t.getBounds().getSouthWest())):t.getPaths?t.getPaths().forEach(:t.getPath?t.getPath().forEach(function(e){i.extend(e)}):t.getCenter?i.extend(t.getCenter()):t instanceof k&&(t=u.getById(t.id(),!0))&&t.autofit(i)}),i.isEmpty()||f.getBounds()&&f.getBounds().equals(i)||("maxZoom"in e.todo&&google.maps.event.addListenerOnce(f,"bounds_changed",,f.fitBounds(i)),h(e,!0)},this.clear=function(e){if("string"==typeof e.todo){if(u.clearById(e.todo)||u.objClearById(e.todo))return void h(e,!0);e.todo={name:e.todo}}e.todo.id?R.each(I(e.todo.id),:(u.clear(I(e.todo.name),e.todo.last,e.todo.first,e.todo.tag),u.objClear(I(e.todo.name),e.todo.last,e.todo.first,e.todo.tag)),h(e,!0)},this.exec=function(t){var n=this;R.each(I(t.todo.func),,h(t,!0)},this.get=function(e,t,n){var i,o,a=t?e:e.todo;if(t||(n=a.full),"string"==typeof a?!1===(o=u.getById(a,!1,n)||u.objGetById(a))&&(i=a,a={}):i=a.name,"map"===i&&(o=f),o||(o=[],a.id?(R.each(I(a.id),,R.isArray(a.id)||(o=o[0])):(R.each(i?I(i):[v],function(e,t){var i;a.first?(i=u.get(t,!1,a.tag,n))&&o.push(i):a.all?R.each(u.all(t,a.tag,n),function(e,t){o.push(t)}):(i=u.get(t,!0,a.tag,n))&&o.push(i)}),a.all||R.isArray(i)||(o=o[0]))),o=R.isArray(o)||!a.all?o:[o],t)return o;h(e,o)},this.getdistance=function(i){var e;for(i.opts.origins=I(i.opts.origins),e=0;e<i.opts.origins.length;e++)i.opts.origins[e]=j(i.opts.origins[e],!0);for(i.opts.destinations=I(i.opts.destinations),e=0;e<i.opts.destinations.length;e++)i.opts.destinations[e]=j(i.opts.destinations[e],!0);S.distanceMatrixService||(S.distanceMatrixService=new google.maps.DistanceMatrixService),S.distanceMatrixService.getDistanceMatrix(i.opts,function(e,t){s(i,t===google.maps.DistanceMatrixStatus.OK&&e,t),o.ack()})},this.trigger=function(e){var i;"string"==typeof e.todo?google.maps.event.trigger(f,e.todo):(i=[f,e.todo.eventName],e.todo.var_args&&R.each(e.todo.var_args,function(e,t){i.push(t)}),google.maps.event.trigger.apply(google.maps.event,i)),s(e),o.ack()}}R.fn.gmap3=function(){var e,i=[],n=[];for(y=y||{verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}},e=0;e<arguments.length;e++)arguments[e]&&i.push(arguments[e]);return i.length||i.push("map"),R.each(this,function(){var e=R(this),t=e.data("gmap3");t||(t=new a(e),e.data("gmap3",t)),1!==i.length||"get"!==i[0]&&!function(e){var t;if(e.hasOwnProperty("get")){for(t in e)if("get"!==t)return;return!e.get.hasOwnProperty("callback")}}(i[0])?t._plan(i):"get"===i[0]?n.push(t.get("map",!0)):n.push(t.get(i[0].get,!0,i[0].get.full))}),n.length?1===n.length?n[0]:n:this}}(jQuery),function(c){c.anythingSlider=function(e,t){var r,l=this;l.el=e,l.$el=c(e).addClass("anythingBase").wrap('<div class="anythingSlider"><div class="anythingWindow" /></div>'),l.$el.data("AnythingSlider",l),l.init=function(){l.options=r=c.extend({},c.anythingSlider.defaults,t),l.initialized=!1,c.isFunction(r.onBeforeInitialize)&&l.$el.bind("before_initialize",r.onBeforeInitialize),l.$el.trigger("before_initialize",l),l.$wrapper=l.$el.parent().closest("div.anythingSlider").addClass("anythingSlider-"+r.theme),l.$window=l.$el.closest("div.anythingWindow"),l.win=window,l.$win=c(l.win),l.$controls=c('<div class="anythingControls"></div>').appendTo(null!==r.appendControlsTo&&c(r.appendControlsTo).length?c(r.appendControlsTo):l.$wrapper),l.$startStop=c('<a href="#" class="start-stop"></a>'),r.buildStartStop&&l.$startStop.appendTo(null!==r.appendStartStopTo&&c(r.appendStartStopTo).length?c(r.appendStartStopTo):l.$controls),l.$nav=c('<ul class="thumbNav" />').appendTo(null!==r.appendNavigationTo&&c(r.appendNavigationTo).length?c(r.appendNavigationTo):l.$controls),l.flag=!1,l.playing=r.autoPlay,l.slideshow=!1,l.hovered=!1,l.panelSize=[],l.currentPage=r.startPanel=parseInt(r.startPanel,10)||1,r.changeBy=parseInt(r.changeBy,10)||1,l.adj=r.infiniteSlides?0:1,l.width=l.$el.width(),l.height=l.$el.height(),l.outerPad=[l.$wrapper.innerWidth()-l.$wrapper.width(),l.$wrapper.innerHeight()-l.$wrapper.height()],r.playRtl&&l.$wrapper.addClass("rtl"),r.expand&&(l.$outer=l.$wrapper.parent(),l.$window.css({width:"100%",height:"100%"}),l.checkResize()),r.buildStartStop&&l.buildAutoPlay(),r.buildArrows&&l.buildNextBackButtons(),r.autoPlay||(r.autoPlayLocked=!1),l.updateSlider(),l.$lastPage=l.$currentPage,l.runTimes=c("div.anythingSlider").index(l.$wrapper)+1,l.regex=new RegExp("panel"+l.runTimes+"-(\\d+)","i"),1===l.runTimes&&l.makeActive(),c.isFunction(c.easing[r.easing])||(r.easing="swing"),r.pauseOnHover&&l.$wrapper.hover(,l.setCurrentPage(l.gotoHash()||r.startPage,!1),l.slideControls(!1),l.$wrapper.bind("mouseenter mouseleave",function(e){l.hovered="mouseenter"===e.type,l.slideControls(l.hovered,!1)}),c(document).keyup(function(e){if(r.enableKeyboard&&l.$wrapper.is(".activeSlider")&&!e.target.tagName.match("TEXTAREA|INPUT|SELECT"))switch(e.which){case 39:l.goForward();break;case 37:l.goBack()}}),l.$items.delegate("a","focus.AnythingSlider",function(e){var t=c(this).closest(".panel"),i=l.$items.index(t)+l.adj;l.$items.find(".focusedLink").removeClass("focusedLink"),c(this).addClass("focusedLink"),l.$window.scrollLeft(0),!t.is(".activePage")&&l.currentPage+r.showMultiple-1>i&&(l.gotoPage(i),e.preventDefault())});var i="slideshow_paused slideshow_unpaused slide_init slide_begin slideshow_stop slideshow_start initialized swf_completed".split(" ");c.each("onShowPause onShowUnpause onSlideInit onSlideBegin onShowStop onShowStart onInitialized onSWFComplete".split(" "),,c.isFunction(r.onSlideComplete)&&l.$el.bind("slide_complete",,l.initialized=!0,l.$el.trigger("initialized",l),l.startStop(l.playing)},l.updateSlider=function(){l.$el.children(".cloned").remove(),l.$nav.empty(),l.currentPage=l.currentPage||1,l.$items=l.$el.children(),l.pages=l.$items.length,r.showMultiple=parseInt(r.showMultiple,10)||1,1<r.showMultiple&&(r.showMultiple>l.pages&&(r.showMultiple=l.pages),l.adjustMultiple=r.infiniteSlides&&1<l.pages?0:r.showMultiple-1,l.pages=l.$items.length-l.adjustMultiple),l.$controls.add(l.$nav).add(l.$startStop).add(l.$forward).add(l.$back)[l.pages<=1?"hide":"show"](),1<l.pages&&l.buildNavigation(),r.infiniteSlides&&1<l.pages&&(l.$el.prepend(l.$items.filter(":last").clone().removeAttr("id").addClass("cloned")),1<r.showMultiple?l.$el.append(l.$items.filter(":lt("+r.showMultiple+")").clone().removeAttr("id").addClass("cloned").addClass("multiple")):l.$el.append(l.$items.filter(":first").clone().removeAttr("id").addClass("cloned")),l.$el.find(".cloned").each(),l.$items=l.$el.children().addClass("panel"),l.setDimensions(),r.resizeContents?(l.$items.css("width",l.width),l.$wrapper.css("width",l.getDim(l.currentPage)[0]),l.$wrapper.add(l.$items).css("height",l.height)):l.$win.load(function(){l.setDimensions()}),l.currentPage>l.pages&&(l.currentPage=l.pages),l.setCurrentPage(l.currentPage,!1),l.$nav.find("a").eq(l.currentPage-1).addClass("cur")},l.buildNavigation=function(){var i,n;r.buildNavigation&&1<l.pages&&(l.$items.filter(":not(.cloned)").each(function(e){var t=e+1;i=(1===t?"first":"")+(t===l.pages?"last":""),n=c('<a href="#"></a>').addClass("panel"+t).wrap('<li class="'+i+'" />'),l.$nav.append(n.parent()),c.isFunction(r.navigationFormatter)?(i=r.navigationFormatter(t,c(this)),n.html("<span>"+i+"</span>"),parseInt(n.find("span").css("text-indent"),10)<0&&n.addClass(r.tooltipClass).prop("title",i)):n.html("<span>"+t+"</span>"),n.bind(r.clickControls,function(e){!l.flag&&r.enableNavigation&&(l.flag=!0,setTimeout(function(){l.flag=!1},100),l.gotoPage(t),r.hashTags&&l.setHash(t)),e.preventDefault()})}),!1!==r.navigationSize&&parseInt(r.navigationSize,10)<l.pages&&(l.$controls.find(".anythingNavWindow").length||l.$nav.before('<ul><li class="prev"><a href="#"><span>'+r.backText+"</span></a></li></ul>").after('<ul><li class="next"><a href="#"><span>'+r.forwardText+"</span></a></li></ul>").wrap('<div class="anythingNavWindow"></div>'),l.navWidths=l.$nav.find("li").map(.get(),l.navLeft=1,l.$nav.width(l.navWidth(1,l.pages+1)+5),l.$controls.find(".anythingNavWindow").width(l.navWidth(1,r.navigationSize+1)).end().find(".prev, .next").bind(r.clickControls,function(e){l.flag||(l.flag=!0,setTimeout(function(){l.flag=!1},200),l.navWindow(l.navLeft+r.navigationSize*(c(this).is(".prev")?-1:1))),e.preventDefault()})))},l.navWidth=function(e,t){for(var i=Math.min(e,t),n=Math.max(e,t),o=0;i<n;i++)o+=l.navWidths[i-1]||0;return o},l.navWindow=function(e){var t=l.pages-r.navigationSize+1;(e=e<=1?1:1<e&&e<t?e:t)!==l.navLeft&&(l.$controls.find(".anythingNavWindow").animate({scrollLeft:l.navWidth(1,e),width:l.navWidth(e,e+r.navigationSize)},{queue:!1,duration:r.animationTime}),l.navLeft=e)},l.buildNextBackButtons=function(){l.$forward=c('<span class="arrow forward"><a href="#"><span>'+r.forwardText+"</span></a></span>"),l.$back=c('<span class="arrow back"><a href="#"><span>'+r.backText+"</span></a></span>"),l.$back.bind(r.clickBackArrow,function(e){r.enableArrows&&!l.flag&&(l.flag=!0,setTimeout(function(){l.flag=!1},100),l.goBack()),e.preventDefault()}),l.$forward.bind(r.clickForwardArrow,function(e){r.enableArrows&&!l.flag&&(l.flag=!0,setTimeout(function(){l.flag=!1},100),l.goForward()),e.preventDefault()}),l.$back.add(l.$forward).find("a").bind("focusin focusout",function(){c(this).toggleClass("hover")}),l.$back.appendTo(null!==r.appendBackTo&&c(r.appendBackTo).length?c(r.appendBackTo):l.$wrapper),l.$forward.appendTo(null!==r.appendForwardTo&&c(r.appendForwardTo).length?c(r.appendForwardTo):l.$wrapper),l.$arrowWidth=l.$forward.width()},l.buildAutoPlay=function(){l.$startStop.html("<span>"+(l.playing?r.stopText:r.startText)+"</span>").bind(r.clickSlideshow,function(e){r.enableStartStop&&(l.startStop(!l.playing),l.makeActive(),l.playing&&!r.autoPlayDelayed&&l.goForward(!0)),e.preventDefault()}).bind("focusin focusout",function(){c(this).toggleClass("hover")})},l.checkResize=function(i){clearTimeout(l.resizeTimer),l.resizeTimer=setTimeout(function(){var e=l.$outer.width()-l.outerPad[0],t=("BODY"===l.$outer[0].tagName?l.$win.height():l.$outer.height())-l.outerPad[1];l.width*r.showMultiple==e&&l.height===t||(l.setDimensions(),l.gotoPage(l.currentPage,l.playing,null,1)),void 0===i&&l.checkResize()},500)},l.setDimensions=function(){var t,i,n,o=0,a=1<r.showMultiple?l.width||l.$window.width()/r.showMultiple:l.$window.width(),s=l.$win.width();r.expand&&(t=l.$outer.width()-l.outerPad[0],l.height=i=l.$outer.height()-l.outerPad[1],l.$wrapper.add(l.$window).add(l.$items).css({width:t,height:i}),l.width=a=1<r.showMultiple?t/r.showMultiple:t),l.$items.each(function(e){n=c(this).children(),r.resizeContents?(t=l.width,c(this).css({width:t,height:l.height}),n.length&&"EMBED"===n[0].tagName&&n.prop({width:"100%",height:"100%"}),1===n.length&&n.css({width:"100%",height:"100%"})):(t=c(this).width(),1===n.length&&s<=t&&(t=n.width()>=s?a:n.width(),n.css("max-width",t)),c(this).css("width",t),i=c(this).outerHeight(),c(this).css("height",i)),l.panelSize[e]=[t,i,o],o+=t}),l.$el.css("width",o)},l.getDim=function(e){if(l.pages<1||isNaN(e))return[l.width,l.height];e=r.infiniteSlides&&1<l.pages?e:e-1;var t,i=l.panelSize[e][0],n=l.panelSize[e][1];if(1<r.showMultiple)for(t=1;t<r.showMultiple;t++)i+=l.panelSize[(e+t)%r.showMultiple][0],n=Math.max(n,l.panelSize[e+t][1]);return[i,n]},l.goForward=function(e){l.gotoPage(l.currentPage+r.changeBy*(r.playRtl?-1:1),e)},l.goBack=function(e){l.gotoPage(l.currentPage+r.changeBy*(r.playRtl?1:-1),e)},l.gotoPage=function(t,e,i,n){!0!==e&&(e=!1,l.startStop(!1),l.makeActive()),1!==r.changeBy&&(t<0&&(t+=l.pages),t>l.pages&&(t-=l.pages)),l.pages<=1||(l.$lastPage=l.$currentPage,"number"!=typeof t&&(t=r.startPanel,l.setCurrentPage(t)),e&&r.isVideoPlaying(l)||(t>l.pages+1-l.adj&&(t=r.infiniteSlides||r.stopAtEnd?l.pages:1),t<l.adj&&(t=r.infiniteSlides||r.stopAtEnd?1:l.pages),l.currentPage=t>l.pages?l.pages:t<1?1:l.currentPage,l.$currentPage=l.$items.eq(l.currentPage-l.adj),1==(l.exactPage=t)&&c("#jQueryslideshow #menu li").eq(0).addClass("current"),l.$targetPage=l.$items.eq(0===t?l.pages-l.adj:t>l.pages?1-l.adj:t-l.adj),1<(n=n||r.animationTime)&&l.$el.trigger("slide_init",l),l.slideControls(!0,!1),!0!==e&&(e=!1),(!e||r.stopAtEnd&&t===l.pages)&&l.startStop(!1),1<n&&(l.$el.trigger("slide_begin",l),t<=4?c("#jQueryslideshow #menu li").removeClass("current").eq(t-1).addClass("current"):c("#jQueryslideshow #menu li").removeClass("current").eq(0).addClass("current")),setTimeout(function(){var e;r.resizeContents||(e=l.getDim(t),l.$wrapper.filter(":not(:animated)").animate({width:e[0]||l.width,height:e[1]||l.height},{queue:!1,duration:n,easing:r.easing})),l.$el.filter(":not(:animated)").animate({left:-l.panelSize[r.infiniteSlides&&1<l.pages?t:t-1][2]},{queue:!1,duration:n,easing:r.easing,complete:function(){l.endAnimation(t,i,n)}})},parseInt(r.delayBeforeAnimate,10)||0)))},l.endAnimation=function(e,t,i){0===e?(l.$el.css("left",-l.panelSize[l.pages][2]),e=l.pages):e>l.pages&&(l.$el.css("left",-l.panelSize[1][2]),e=1),l.exactPage=e,l.setCurrentPage(e,!1),l.$items.removeClass("activePage").eq(e-l.adj).addClass("activePage"),c("#jQueryslideshow #pictures li.activePage").length<=0&&c("#jQueryslideshow #menu li").eq(0).addClass("current"),l.hovered||l.slideControls(!1),1<i&&l.$el.trigger("slide_complete",l),"function"==typeof t&&t(l),r.autoPlayLocked&&!l.playing&&setTimeout(function(){l.startStop(!0)},r.resumeDelay-(r.autoPlayDelayed?r.delay:0))},l.setCurrentPage=function(e,t){var i;e=parseInt(e,10),l.pages<1||0===e||isNaN(e)?c("#jQueryslideshow #pictures li.activePage").length<=0&&(c("#jQueryslideshow #menu li").eq(0).addClass("current"),alert(c("#jQueryslideshow #menu li").eq(0).html())):(e>l.pages+1-l.adj&&(e=l.pages-l.adj),e<l.adj&&(e=1),r.buildNavigation&&l.$nav.find(".cur").removeClass("cur").end().find("a").eq(e-1).addClass("cur"),!r.infiniteSlides&&r.stopAtEnd&&(l.$wrapper.find("span.forward")[e===l.pages?"addClass":"removeClass"]("disabled").end().find("span.back")[1===e?"addClass":"removeClass"]("disabled"),e===l.pages&&l.playing&&l.startStop()),t||(i=l.getDim(e),l.$wrapper.css({width:i[0],height:i[1]}).add(l.$window).scrollLeft(0),l.$el.css("left",-l.panelSize[r.infiniteSlides&&1<l.pages?e:e-1][2])),l.currentPage=e,l.$currentPage=l.$items.removeClass("activePage").eq(e-l.adj).addClass("activePage"))},l.makeActive=l.gotoHash=function(){var e=l.win.location.hash,t=e.indexOf("&"),i=e.match(l.regex);return null!==i||/^#&/.test(e)?null!==i&&(i=r.hashTags?parseInt(i[1],10):null):(e=e.substring(0,0<=t?t:e.length),i=c(e).closest(".anythingBase")[0]===l.el?c(e).closest(".panel").index():null),i},l.setHash=function(e){var t="panel"+l.runTimes+"-",i=l.win.location.hash;void 0!==i&&(l.win.location.hash=0<i.indexOf(t)?i.replace(l.regex,t+e):i+"&"+t+e)},l.slideControls=function(e){var t=e?"slideDown":"slideUp",i=e?0:r.animationTime,n=e?r.animationTime:0,o=e?1:0,a=e?0:1;r.toggleControls&&l.$controls.stop(!0,!0).delay(i)[t](r.animationTime/2).delay(n),r.buildArrows&&r.toggleArrows&&(!l.hovered&&l.playing&&(a=1,o=0),l.$forward.stop(!0,!0).delay(i).animate({right:a*l.$arrowWidth,opacity:o},r.animationTime/2),l.$back.stop(!0,!0).delay(i).animate({left:a*l.$arrowWidth,opacity:o},r.animationTime/2))},l.clearTimer=function(e){l.timer&&(l.win.clearInterval(l.timer),!e&&l.slideshow&&(l.$el.trigger("slideshow_stop",l),l.slideshow=!1))},l.startStop=function(e,t){!0!==e&&(e=!1),(l.playing=e)&&!t&&(l.$el.trigger("slideshow_start",l),l.slideshow=!0),r.buildStartStop&&(l.$startStop.toggleClass("playing",e).find("span").html(e?r.stopText:r.startText),parseInt(l.$startStop.find("span").css("text-indent"),10)<0&&l.$startStop.addClass(r.tooltipClass).prop("title",e?r.stopText:r.startText)),e?(l.clearTimer(!0),l.timer=l.win.setInterval(function(){r.isVideoPlaying(l)?r.resumeOnVideoEnd||l.startStop():l.goForward(!0)},r.delay)):l.clearTimer()},l.init()},c.anythingSlider.defaults={theme:"default",expand:!1,resizeContents:!0,showMultiple:!1,easing:"swing",buildArrows:!0,buildNavigation:!0,buildStartStop:!0,appendForwardTo:null,appendBackTo:null,appendControlsTo:null,appendNavigationTo:null,appendStartStopTo:null,toggleArrows:!1,toggleControls:!1,startText:"Start",stopText:"Stop",forwardText:"&raquo;",backText:"&laquo;",tooltipClass:"tooltip",enableArrows:!0,enableNavigation:!0,enableStartStop:!0,enableKeyboard:!0,startPanel:1,changeBy:1,hashTags:!0,infiniteSlides:!0,navigationFormatter:null,navigationSize:!1,autoPlay:!1,autoPlayLocked:!1,autoPlayDelayed:!1,pauseOnHover:!0,stopAtEnd:!1,playRtl:!1,delay:3e3,resumeDelay:15e3,animationTime:600,delayBeforeAnimate:0,clickForwardArrow:"click",clickBackArrow:"click",clickControls:"click focusin",clickSlideshow:"click",resumeOnVideoEnd:!0,addWmodeToObject:"opaque",isVideoPlaying:function(e){return!1}},c.fn.anythingSlider=function(i,n){return this.each(function(){var e,t=c(this).data("AnythingSlider");(typeof i).match("object|undefined")?t?t.updateSlider():new c.anythingSlider(this,i):/\d/.test(i)&&!isNaN(i)&&t&&1<=(e="number"==typeof i?i:parseInt(c.trim(i),10))&&e<=t.pages&&t.gotoPage(e,!1,n)})}}(jQuery),function(x){x.fn._fadeIn=x.fn.fadeIn;function S(){}var e=document.documentMode||0,T=x.browser.msie&&(x.browser.version<8&&!e||e<8),$=x.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!e;x.blockUI=function(e){t(window,e)},x.unblockUI=function(e){E(window,e)},x.growlUI=x.fn.block=x.fn.unblock=x.blockUI.version=2.39,x.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:15e4,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var I=null,j=[];function t(e,o){var a=e==window,t=o&&void 0!==o.message?o.message:void 0;(o=x.extend({},x.blockUI.defaults,o||{})).overlayCSS=x.extend({},x.blockUI.defaults.overlayCSS,o.overlayCSS||{});var i,n,s=x.extend({},x.blockUI.defaults.css,o.css||{}),r=x.extend({},x.blockUI.defaults.themedCSS,o.themedCSS||{}),t=void 0===t?o.message:t;a&&I&&E(window,{fadeOut:0}),t&&"string"!=typeof t&&(t.parentNode||t.jquery)&&(i=t.jquery?t[0]:t,n={},x(e).data("blockUI.history",n),n.el=i,n.parent=i.parentNode,n.display=i.style.display,n.position=i.style.position,n.parent&&n.parent.removeChild(i)),x(e).data("blockUI.onUnblock",o.onUnblock);var l=o.baseZ,c=x.browser.msie||o.forceIframe?x('<iframe class="blockUI" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+o.iframeSrc+'"></iframe>'):x('<div class="blockUI" style="display:none"></div>'),d=o.theme?x('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+l+++';display:none"></div>'):x('<div class="blockUI blockOverlay" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),u=o.theme&&a?'<div class="blockUI '+o.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':o.theme?'<div class="blockUI '+o.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':a?'<div class="blockUI '+o.blockMsgClass+' blockPage" style="z-index:'+(l+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+o.blockMsgClass+' blockElement" style="z-index:'+(l+10)+';display:none;position:absolute"></div>',h=x(u);t&&(o.theme?(h.css(r),h.addClass("ui-widget-content")):h.css(s)),o.theme||o.applyPlatformOpacityRules&&x.browser.mozilla&&/Linux/.test(navigator.platform)||d.css(o.overlayCSS),d.css("position",a?"fixed":"absolute"),(x.browser.msie||o.forceIframe)&&c.css("opacity",0);var p=[c,d,h],m=x(a?"body":e);x.each(p,function(){this.appendTo(m)}),o.theme&&o.draggable&&x.fn.draggable&&h.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var f,g,v,y,b,_,w,C,k=T&&(!x.boxModel||0<x("object,embed",a?null:e).length);($||k)&&(a&&o.allowBodyStretch&&x.boxModel&&x("html, body").css("height","100%"),!$&&x.boxModel||a||(f=M(e,"borderTopWidth"),g=M(e,"borderLeftWidth"),v=f?"(0 - "+f+")":0,y=g?"(0 - "+g+")":0),x.each([c,d,h],function(e,t){var i,n=t[0].style;n.position="absolute",e<2?(a?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+o.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),a?n.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),y&&n.setExpression("left",y),v&&n.setExpression("top",v)):o.centerY?(a&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0):!o.centerY&&a&&(i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(o.css&&o.css.top?parseInt(o.css.top):0)+') + "px"',n.setExpression("top",i))})),t&&(o.theme?h.find(".ui-widget-content").append(t):h.append(t),(t.jquery||t.nodeType)&&x(t).show()),(x.browser.msie||o.forceIframe)&&o.showOverlay&&c.show(),o.fadeIn?(b=o.onBlock?o.onBlock:S,_=o.showOverlay&&!t?b:S,w=t?b:S,o.showOverlay&&d._fadeIn(o.fadeIn,_),t&&h._fadeIn(o.fadeIn,w)):(o.showOverlay&&d.show(),t&&h.show(),o.onBlock&&o.onBlock()),A(1,e,o),a?(I=h[0],j=x(":input:enabled:visible",I),o.focusInput&&setTimeout(P,20)):h[0],o.centerX,o.centerY),o.timeout&&(C=setTimeout(o.timeout),x(e).data("blockUI.timeout",C))}nction A(e,t,i){var n,o=t==window,a=x(t);!e&&(o&&!I||!o&&!a.data("blockUI.isBlocked"))||(o||a.data("blockUI.isBlocked",e),!i.bindEvents||e&&!i.showOverlay||(n="mousedown mouseup keydown keypress",e?x(document).bind(n,i,s):x(document).unbind(n,s)))}function s(e){if(e.keyCode&&9==e.keyCode&&I&&e.data.constrainTabKey){var t=!e.shiftKey&&e.target===j[j.length-1],i=e.shiftKey&&e.target===j[0];if(t||i)return setTimeout(function(){P(i)},10),!1}var n=e.data;return 0<x(e.target).parents("div."+n.blockMsgClass).length||0==x(e.target).parents().children().filter("div.blockUI").length}function P(e){var t;!j||(t=j[!0===e?j.length-1:0])&&t.focus()}function M(e,t){return parseInt(x.css(e,t))||0}}(jQuery),function(){var t=[].slice;!function(r,o){"use strict";var a;function e(t,e){var i,n,o;null==e&&(e={}),this.$element=r(t),this.options=r.extend({},r.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},e),this.prevOptions={},this.$wrapper=r("<div>",{class:(i=this,))}),this.$container=r("<div>",{class:this.options.baseClass+"-container"}),this.$on=r("<span>",{html:this.options.onText,class:this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=r("<span>",{html:this.options.offText,class:this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=r("<span>",{html:this.options.labelText,class:this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",(n=this,),this.$element.on("switchChange.bootstrapSwitch",(o=this,function(e){if(!1===o.options.onSwitchChange.apply(t,arguments))return o.$element.is(":radio")?r("[name='"+o.$element.attr("name")+"']").trigger("previousState.bootstrapSwitch",!0):o.$element.trigger("previousState.bootstrapSwitch",!0)})),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}(e.prototype._constructor=e).prototype.setPrevOptions=e.prototype.state=function(e,t){return void 0===e?this.options.state:(this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")||(this.$element.is(":radio")?r("[name='"+this.$element.attr("name")+"']").trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),e=!!e,this.$element.prop("checked",e).trigger("change.bootstrapSwitch",t)),this.$element)},e.prototype.toggleState=e.prototype.size=e.prototype.animate=function(e){return void 0===e?this.options.animate:(e=!!e)===this.options.animate?this.$element:this.toggleAnimate()},e.prototype.toggleAnimate=e.prototype.disabled=function(e){return void 0===e?this.options.disabled:(e=!!e)===this.options.disabled?this.$element:this.toggleDisabled()},e.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this.options.baseClass+"-disabled"),this.$element},e.prototype.readonly=function(e){return void 0===e?this.options.readonly:(e=!!e)===this.options.readonly?this.$element:this.toggleReadonly()},e.prototype.toggleReadonly=e.prototype.indeterminate=function(e){return void 0===e?this.options.indeterminate:(e=!!e)===this.options.indeterminate?this.$element:this.toggleIndeterminate()},e.prototype.toggleIndeterminate=e.prototype.inverse=e.prototype.toggleInverse=e.prototype.onColor=function(e){var t=this.options.onColor;return void 0===e?t:(null!=t&&this.$on.removeClass(this.options.baseClass+"-"+t),this.$on.addClass(this.options.baseClass+"-"+e),this.options.onColor=e,this.$element)},e.prototype.offColor=e.prototype.onText=function(e){return void 0===e?this.options.onText:(this.$on.html(e),this._width(),this._containerPosition(),this.options.onText=e,this.$element)},e.prototype.offText=e.prototype.labelText=e.prototype.handleWidth=function(e){return void 0===e?this.options.handleWidth:(this.options.handleWidth=e,this._width(),this._containerPosition(),this.$element)},e.prototype.labelWidth=e.prototype.baseClass=e.prototype.wrapperClass=e.prototype.radioAllOff=e.prototype.onInit=function(e){return void 0===e?this.options.onInit:(e=e||r.fn.bootstrapSwitch.defaults.onInit,this.options.onInit=e,this.$element)},e.prototype.onSwitchChange=e.prototype.destroy=e.prototype._width=function(){var i,n,e=this.$on.add(this.$off);return e.add(this.$label).css("width",""),i="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,i+=1,e.width(i),this.$label.width((n=this,),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},e.prototype._containerPosition=e.prototype._init=function(){var e,t,i,n=function(){return t.setPrevOptions(),t._width(),t._containerPosition(null,};return(t=this).$wrapper.is(":visible")?n():e=o.setInterval((i=this,,50)},e.prototype._elementHandlers=function(){return this.$element.on({"setPreviousOptions.bootstrapSwitch":function(e){return s.setPrevOptions()},"previousState.bootstrapSwitch":"change.bootstrapSwitch":"focus.bootstrapSwitch":function(e){return e.preventDefault(),n.$wrapper.addClass(n.options.baseClass+"-focused")},"blur.bootstrapSwitch":"keydown.bootstrapSwitch":(t=i=n=o=a=s=this,});var t,i,n,o,a,s},e.prototype._handleHandlers=e.prototype._labelHandlers=function(){return this.$label.on({click:"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(e){var t;if(null!=n._dragStart&&(e.preventDefault(),!((t=(e.pageX||e.originalEvent.touches[0].pageX)-n._dragStart)<-n._handleWidth||0<t)))return n._dragEnd=t,n.$container.css("margin-left",n._dragEnd+"px")},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":"mouseleave.bootstrapSwitch":(t=i=n=o=this,});var t,i,n,o},e.prototype._externalLabelHandler=e.prototype._formHandler=e.prototype._getClasses=a=e,r.fn.bootstrapSwitch=r.fn.bootstrapSwitch.Constructor=a,r.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),jQuery.fn.imagesLoaded=function(e){var t=this.filter("img"),i=t.length;return t.bind("load",function(){--i<=0&&e.call(t,this)}).each(function(){var e;!this.complete&&void 0!==this.complete||(e=this.src,this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=e)}),this},function(h){h.fn.extend({cjObjectScaler:function(n,u){var o=function(e){var t,i,n,o=e.data("cj").options,a=h(o.destElem).width(),s=h(o.destElem).height(),r=parseInt(e.css("borderLeftWidth"),10)+parseInt(e.css("borderRightWidth"),10),l=parseInt(e.css("borderTopWidth"),10)+parseInt(e.css("borderBottomWidth"),10),r=isNaN(r)?0:r,l=isNaN(l)?0:l,c=a/e.width(),d=s/e.height();e.hasClass("cf_image_scaler_fill")||!e.hasClass("cf_image_scaler_fit")&&"fit"!==o.method?e.hasClass("cf_image_scaler_fit")||!e.hasClass("cf_image_scaler_fill")&&"fill"!==o.method||(t=d<c?c:d):t=c<d?c:d,i=parseInt(e.width()*t,10)-r,n=parseInt(e.height()*t,10)-l,e.css({width:i+"px",height:n+"px",position:"absolute",top:parseInt((s-n)/2,10)-parseInt(l/2,10)+"px",left:parseInt((a-i)/2,10)-parseInt(r/2,10)+"px"}).prop({width:i,height:n}),0<o.fade&&e.fadeIn(o.fade),"function"==typeof u&&u()};if("object"==typeof n||!n)return this.each(function(){var e,t=h(this),i=t.data("cj");i||(t.data("cj",{options:{method:"fill",destElem:null,fade:0}}),i=t.data("cj")),n&&(i.options=h.extend(i.options,n)),null===(e=i.options).destElem&&(e.destElem=t.parent()),"static"===h(e.destElem).css("position")&&h(e.destElem).css({position:"relative"}),"object"==typeof t&&"object"==typeof e.destElem&&"string"==typeof e.method?(0<e.fade&&t.hide(),"IMG"===t.get(0).nodeName?(t.width("auto"),t.height("auto"),t.imagesLoaded(function(){o(t)})):o(t)):h.error("CJ Object Scaler could not initialize. Bad parameters.")});h.error("Method/Option "+n+" does not exist.")}})}(jQuery),function($){var e=document.createElement("div").style,I=void 0!==e.MozBorderRadius,j=void 0!==e.WebkitBorderRadius,E=void 0!==e.borderRadius||void 0!==e.BorderRadius,t=document.documentMode||0,A=$.browser.msie&&($.browser.version<8&&!t||t<8),P=$.browser.msie&&function(){var e=document.createElement("div");try{e.style.setExpression("width","0+0"),e.style.removeExpression("width")}catch(e){return!1}return!0}();support=$.support||{},$.support.borderRadius=I||j||E,$.fn.corner=function(T){return 0!=this.length?this.each(function(e){var t,i,n,o,a,s,r,l,c,d,u,h,p,m,f=$(this),g=[f.prop($.fn.corner.defaults.metaAttr)||"",T||""].join(" ").toLowerCase(),v=/keep/.test(g),y=(g.match(/cc:(#[0-9a-f]+)/)||[])[1],b=(g.match(/sc:(#[0-9a-f]+)/)||[])[1],_=parseInt((g.match(/(\d+)px/)||[])[1])||10,w=(g.match(/round|bevelfold|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dogfold|dog/)||["round"])[0],C=/dogfold|bevelfold/.test(g),k={T:0,B:1},x={TL:/top|tl|left/.test(g),TR:/top|tr|right/.test(g),BL:/bottom|bl|left/.test(g),BR:/bottom|br|right/.test(g)};if(x.TL||x.TR||x.BL||x.BR||(x={TL:1,TR:1,BL:1,BR:1}),$.fn.corner.defaults.useNative&&"round"==w&&(E||I||j)&&!y&&!b)return x.TL&&f.css(E?"border-top-left-radius":I?"-moz-border-radius-topleft":"-webkit-border-top-left-radius",_+"px"),x.TR&&f.css(E?"border-top-right-radius":I?"-moz-border-radius-topright":"-webkit-border-top-right-radius",_+"px"),x.BL&&f.css(E?"border-bottom-left-radius":I?"-moz-border-radius-bottomleft":"-webkit-border-bottom-left-radius",_+"px"),void(x.BR&&f.css(E?"border-bottom-right-radius":I?"-moz-border-radius-bottomright":"-webkit-border-bottom-right-radius",_+"px"));for(o in t=document.createElement("div"),$(t).css({overflow:"hidden",height:"1px",minHeight:"1px",fontSize:"1px",backgroundColor:b||"transparent",borderStyle:"solid"}),i={T:parseInt($.css(this,"paddingTop"))||0,R:parseInt($.css(this,"paddingRight"))||0,B:parseInt($.css(this,"paddingBottom"))||0,L:parseInt($.css(this,"paddingLeft"))||0},null!=typeof this.style.zoom&&(this.style.zoom=1),v||(this.style.border="none"),t.style.borderColor=y||function(e){for(;e;){var t,i=$.css(e,"backgroundColor");if(i&&"transparent"!=i&&"rgba(0, 0, 0, 0)"!=i)return 0<=i.indexOf("rgb")?"#"+O((t=i.match(/\d+/g))[0])+O(t[1])+O(t[2]):i;if("html"==e.nodeName.toLowerCase())break;e=e.parentNode}return"#ffffff"}(this.parentNode),n=$(this).outerHeight(),k)if((a=k[o])&&(x.BL||x.BR)||!a&&(x.TL||x.TR)){for(t.style.borderStyle="none "+(x[o+"R"]?"solid":"none")+" none "+(x[o+"L"]?"solid":"none"),s=document.createElement("div"),$(s).addClass("jquery-corner"),r=s.style,a?this.appendChild(s):this.insertBefore(s,this.firstChild),a&&"auto"!=n?("static"==$.css(this,"position")&&(this.style.position="relative"),r.position="absolute",r.bottom=r.left=r.padding=r.margin="0",P?r.setExpression("width","this.parentNode.offsetWidth"):r.width="100%"):!a&&$.browser.msie?("static"==$.css(this,"position")&&(this.style.position="relative"),r.position="absolute",r.top=r.left=r.right=r.padding=r.margin="0",P?(l=M(this,"borderLeftWidth")+M(this,"borderRightWidth"),r.setExpression("width","this.parentNode.offsetWidth - "+l+'+ "px"')):r.width="100%"):(r.position="relative",r.margin=a?i.B-_+"px -"+i.R+"px -"+i.B+"px -"+i.L+"px":"-"+i.T+"px -"+i.R+"px "+(i.T-_)+"px -"+i.L+"px"),c=0;c<_;c++)d=Math.max(0,function(e,t,i){switch(e){case"round":return Math.round(i*(1-Math.cos(Math.asin(t/i))));case"cool":return Math.round(i*(1+Math.cos(Math.asin(t/i))));case"sharp":return Math.round(i*(1-Math.cos(Math.acos(t/i))));case"bite":return Math.round(i*Math.cos(Math.asin((i-t-1)/i)));case"slide":return Math.round(i*Math.atan2(t,i/t));case"jut":return Math.round(i*Math.atan2(i,i-t-1));case"curl":return Math.round(i*Math.atan(t));case"tear":return Math.round(i*Math.cos(t));case"wicked":return Math.round(i*Math.tan(t));case"long":return Math.round(i*Math.sqrt(t));case"sculpt":return Math.round(i*Math.log(i-t-1,i));case"dogfold":case"dog":return 1&t?t+1:i;case"dog2":return 2&t?t+1:i;case"dog3":return 3&t?t+1:i;case"fray":return t%2*i;case"notch":return i;case"bevelfold":case"bevel":return t+1}}(w,c,_)),(u=t.cloneNode(!1)).style.borderWidth="0 "+(x[o+"R"]?d:0)+"px 0 "+(x[o+"L"]?d:0)+"px",a?s.appendChild(u):s.insertBefore(u,s.firstChild);if(C&&$.support.boxModel){if(a&&A)continue;for(h in x)if(x[h]&&(!a||"TL"!=h&&"TR"!=h)&&(a||"BL"!=h&&"BR"!=h)){switch(p={position:"absolute",border:"none",margin:0,padding:0,overflow:"hidden",backgroundColor:t.style.borderColor},m=$("<div/>").css(p).css({width:_+"px",height:"1px"}),h){case"TL":m.css({bottom:0,left:0});break;case"TR":m.css({bottom:0,right:0});break;case"BL":m.css({top:0,left:0});break;case"BR":m.css({top:0,right:0})}s.appendChild(m[0]);var S=$("<div/>").css(p).css({top:0,bottom:0,width:"1px",height:_+"px"});switch(h){case"TL":S.css({left:_});break;case"TR":S.css({right:_});break;case"BL":S.css({left:_});break;case"BR":S.css({right:_})}s.appendChild(S[0])}}}}):(!$.isReady&&this.selector&&(e=this.selector,t=this.context,$(),this);var e,t},$.fn.uncorner=function(){return(E||I||j)&&this.css(E?"border-radius":I?"-moz-border-radius":"-webkit-border-radius",0),$("div.jquery-corner",this).remove(),this},$.fn.corner.defaults={useNative:!0,metaAttr:"data-corner"}}(jQuery),function(c){"use strict";function d(t,i,e,n){var o,a,s,r;.busy||(o=t[0].parentNode,a=t[i.currSlide],s=t[i.nextSlide],0===o.cycleTimeout&&!e||(e||!o.cyclePause?(i.before.length&&c.each(i.before,function(e,t){t.apply(s,[a,s,i,n])}),i.nextSlide!=i.currSlide&&(i.busy=1,c.fn.cycle.custom(a,s,i,),r=i.nextSlide+1==t.length,i.nextSlide=r?0:i.nextSlide+1,i.currSlide=r?t.length-1:i.nextSlide-1):l(i)))}function u(e,t,i){var n=e[0].parentNode,o=n.cycleTimeout;return o&&(clearTimeout(o),n.cycleTimeout=0),t.nextSlide=t.currSlide+i,t.nextSlide<0?t.nextSlide=e.length-1:t.nextSlide>=e.length&&(t.nextSlide=0),d(e,t,1,0<=i),!1}c.fn.cycle=function(l){return this.each(function(){l=l||{},this.cycleTimeout&&clearTimeout(this.cycleTimeout),this.cycleTimeout=0,this.cyclePause=0;var e=c(this),t=l.slideExpr?c(l.slideExpr,this):e.children(),i=t.get();if(i.length<2)window.console&&console.log("terminating; too few slides: "+i.length);else{var n=c.extend({},c.fn.cycle.defaults,l||{},c.metadata?e.metadata():c.meta?e.data():{}),o=c.isFunction(e.data)?e.data(n.metaAttr):null;o&&(n=c.extend(n,o)),n.before=n.before?[n.before]:[],n.after=n.after?[n.after]:[],n.after.unshift(;var a=this.className;n.width=parseInt((a.match(/w:(\d+)/)||[])[1],10)||n.width,n.height=parseInt((a.match(/h:(\d+)/)||[])[1],10)||n.height,n.timeout=parseInt((a.match(/t:(\d+)/)||[])[1],10)||n.timeout,"static"==e.css("position")&&e.css("position","relative"),n.width&&e.width(n.width),n.height&&"auto"!=n.height&&e.height(n.height);t.css({position:"absolute",top:0}).each(,c(i[0]).css("opacity",1).show(),c.browser.msie&&i[0].style.removeAttribute("filter"),n.fit&&n.width&&t.width(n.width),n.fit&&n.height&&"auto"!=n.height&&t.height(n.height),n.pause&&e.hover(function(){this.cyclePause=1},;var s=c.fn.cycle.transitions[n.fx];if(s&&s(e,t,n),t.each(,n.cssFirst&&c(t[0]).css(n.cssFirst),n.timeout)for(n.speed.constructor==String&&(n.speed={slow:600,fast:200}[n.speed]||400),n.sync||(n.speed=n.speed/2);n.timeout-n.speed<250;)n.timeout+=n.speed;n.speedIn=n.speed,n.speedOut=n.speed,n.slideCount=i.length,n.currSlide=0,n.nextSlide=1;var r=t[0];n.before.length&&n.before[0].apply(r,[r,r,n,!0]),1<n.after.length&&n.after[1].apply(r,[r,r,n,!0]),n.click&&!n.next&&(n.next=n.click),n.next&&c(n.next).unbind("click.cycle").bind("click.cycle",,n.prev&&c(n.prev).unbind("click.cycle").bind("click.cycle",,n.timeout&&(this.cycleTimeout=setTimeout(n.timeout+(n.delay||0)))}})},c.fn.cycle.custom=function(e,t,i,n){var o=c(e),a=c(t);a.css(i.cssBefore);.animate(i.animOut,i.speedOut,i.easeOut,,i.sync&&s()},c.fn.cycle.transitions={fade:fadeout:function(e,t,i){i.before.push(function(e,t,i,n){c(e).css("zIndex",i.slideCount+(!0===n?1:0)),c(t).css("zIndex",i.slideCount+(!0===n?0:1))}),t.not(":eq(0)").hide(),i.cssBefore={opacity:1,display:"block",zIndex:1},i.cssAfter={display:"none",zIndex:0},i.animOut={opacity:0},i.animIn={opacity:1}}},c.fn.cycle.ver=c.fn.cycle.defaults={animIn:{},animOut:{},fx:"fade",after:null,before:null,cssBefore:{},cssAfter:{},delay:0,fit:0,height:"auto",metaAttr:"cycle",next:null,pause:!1,prev:null,speed:1e3,slideExpr:null,sync:!0,timeout:4e3}}(jQuery),function(l){l.fn.ddslick=var t={},e={data:[],keepJSONItemsOnTop:!1,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,onSelected:function(){}};function c(e,t){var i,n,o,a,s=e.data("ddslick"),r=e.find(".dd-selected"),l=r.siblings(".dd-selected-value"),c=(e.find(".dd-options"),r.siblings(".dd-pointer"),e.find(".dd-option").eq(t)),d=c.closest("li"),u=s.settings,h=s.settings.data[t];e.find(".dd-option").removeClass("dd-option-selected"),c.addClass("dd-option-selected"),s.selectedIndex=t,s.selectedItem=d,s.selectedData=h,u.showSelectedHTML?r.html((h.imageSrc?'<img class="dd-selected-image'+("right"==u.imagePosition?" dd-image-right":"")+'" src="'+h.imageSrc+'" />':"")+(h.text?'<label class="dd-selected-text">'+h.text+"</label>":"")+(h.description?'<small class="dd-selected-description dd-desc'+(u.truncateDescription?" dd-selected-description-truncated":"")+'" >'+h.description+"</small>":"")):r.html(h.text),l.val(h.value),s.original.val(h.value),e.data("ddslick",s),p(e),n=(i=e).find(".dd-select").css("height"),o=i.find(".dd-selected-description"),a=i.find(".dd-selected-image"),o.length<=0&&0<a.length&&i.find(".dd-selected-text").css("lineHeight",n),"function"==typeof u.onSelected&&u.onSelected.call(this,s)}function d(e){var o,t=e.find(".dd-select"),i=t.siblings(".dd-options"),n=t.find(".dd-pointer"),a=i.is(":visible");l(".dd-click-off-close").not(i).slideUp(50),l(".dd-pointer").removeClass("dd-pointer-up"),a?(i.slideUp("fast"),n.removeClass("dd-pointer-up")):(i.slideDown("fast"),n.addClass("dd-pointer-up")),(o=e).find(".dd-option").each(function(){var e=l(this),t=e.css("height"),i=e.find(".dd-option-description"),n=o.find(".dd-option-image");i.length<=0&&0<n.length&&e.find(".dd-option-text").css("lineHeight",t)})}("#css-ddslick").length<=0&&l('<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;} .dd-selected-text { font-weight:bold}</style>').appendTo("head"),t.init=function(r){r=l.extend({},e,r);return this.each(function(){var e,t,i,n,o,a,s=l(this);s.data("ddslick")||(i=[],r.data,s.find("option").e})}),r.keepJSONItemsOnTop?l.merge(r.data,i):r.data=l.merge(i,r.data),t=l('<div id="'+(e=s).attr("id")+'"></div>'),s.replaceWith(t),(s=t).addClass("dd-container").append('<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>').append('<ul class="dd-options"></ul>'),i=s.find(".dd-select"),(n=s.find(".dd-options")).css({width:r.width}),i.css({width:r.width,background:r.background}),s.css({width:r.width}),null!=r.height&&n.css({height:r.height,overflow:"auto"}),l.each(r.d")}),o={settings:r,original:e,selectedIndex:-1,selectedItem:null,selectedData:null},s.data("ddslick",o),0<r.selectText.length&&null==r.defaultSelectedIndex?s.find(".dd-selected").html(r.selectText):(a=null!=r.defaultSelectedIndex&&0<=r.defaultSelectedIndex&&r.defaultSelectedIndex<r.data.length?r.defaultSelectedIndex:0,c(s,a)),s.find(".dd-select").on("click.ddslick",function(){d(s)}),s.find(".dd-option").on("click.ddsli))}),r.clickOffToClose&&(n.addClass("dd-click-off-close"),s.on("click.ddslick",function(e){e.stopPropagation()}),l("body").on("cli")})))})},t.sel})},t.open=function(){return this.each(function(){var e=l(this);e.data("ddslick")&&d(e)})},t.cl})},t.destroy=function(){return this.each(function(){var e,t=l(this),i=t.data("ddslick");i&&(e=i.original,t.removeData("ddslick").unbind(".ddslick").replaceWith(e))})}}(jQuery);var isDirty=!1,SlideDeck;if("undefined"==typeof jQuery)throw"jQuery could not be found.";!function(r){r.extend({DirtyForm:{debug:!1,changedClass:"changed",addClassOn:new Function,hasFirebug:"console"in window&&"firebug"in window.console,includeHidden:!1,includeSelect:!0,excludeSelectClass:"",includeRadio:!0,includeCheckbox:!0,monitorEvent:"blur",logger:function(e){this.debug&&(e="DirtyForm: "+e,this.hasFirebug?console.log(e):alert(e))},input_value:function(e){return e.is(":radio, :checkbox")?void 0!==e.prop("checked")&&e.prop("checked"):e.val()},input_reset:function(e){e.is(":radio, :checkbox")?e.prop("checked",e.data("initial")):e.val(e.data("initial")),e.trigger(r.DirtyForm.monitorEvent+".dirty_form")},input_checker:function(e){var t=r(e.target),i=t.parents(".dirtyform"),n=t.data("initial"),o=r.DirtyForm.input_value(t),a=e.data.inputs,s=e.data.settings;n!=o?(r.DirtyForm.logger("Form "+i.prop("class")+' is dirty. Changed from "'+n+'" to "'+o+'"'),r.DirtyForm.logger("Class: "+s.changedClass),i.data("dirty",!0).trigger("dirty",{target:t,from:n,to:o,preventDefault:function(){return!1},stopPropagation:function(){return!1},bubbles:!0,cancelable:!0}),t.add(s.addClassOn.apply(t)).addClass(s.changedClass)):t.add(s.addClassOn.apply(t)).removeClass(s.changedClass),a.filter("."+s.changedClass).size()||i.data("dirty",!1).trigger("clean",{target:t,preventDefault:function(){return!1},stopPropagation:function(){return!1},bubbles:!0,cancelable:!0})}}}),r.fn.clean_form=function(){var i=0!=arguments.length?arguments[0]:{};return this.each(function(){var e,t=r(this);t.is("form")?t.reset().find(".changed:input").each(function(){r(this).trigger(r.DirtyForm.monitorEvent+".dirty_form")}):(e=":submit,:password,:button",i.includeHidden||(e=":hidden,"+e),r(":input:not("+e+")",t).e))}))})},r.fn.dirty_form=function(){var e={changedClass:r.DirtyForm.changedClass,addClassOn:r.DirtyForm.addClassOn,includeHidden:r.DirtyForm.includeHidden,includeSelect:r.DirtyForm.includeSelect,includeRadio:r.DirtyForm.includeRadio,includeCheckbox:r.DirtyForm.includeCheckbox,dynamic:r.isFunction(r.livequery)},n=r.extend(e,0!=arguments.length?arguments[0]:{});return this.each(function(){var e=r(this),t=":submit,:password,:button";n.includeHidden||(t=":hidden,"+t),n.includeSelect||(t=n.excludeSelectClass+","+t),n.includeRadio||(t=":radio,"+t),n.includeCheckbox||(t=":checkbox,"+t);var i=r(":input:not("+t+")",e);e.hasClass("dirtyform")?(e.unbind("dirty").unbind("clean"),i.unbind(r.DirtyForm.monitorEvent+".dirty_form")):r(this).addClass("dirtyform"),r.DirtyForm.logger("Storing initial data for form "+e.get(0)),n.dynamic?i.livequery(function(){r(this).bind(r.DirtyForm.monitorEvent+".dirty_form",{inputs:i,settings:n},r.DirtyForm.input_checker).data("initial",r.DirtyForm.input_value(r(this)))}):i.each(function(){r(this).bind(r.DirtyForm.monitorEvent+".dirty_form",{inputs:i,settings:n},r.DirtyForm.input_checker).data("initial",r.DirtyForm.input_value(r(this))),"checkbox"==r(this).prop("type")&&r(this).bind("click",function(){r(this).trigger("focus")})})})},r.fn.dirty_stopper=function(){var o=r.extend(!0,{dialog:{title:"Warning: Unsaved Changes!",height:300,width:500,modal:!0,resizeable:!1,autoResize:!1,overlay:{backgroundColor:"black",opacity:.5}},message:"<br/><p>You have changed form data without saving. All of your changes will be lost.</p><p>Are you sure you want to proceed?</p>"},0!=arguments.length?arguments[0]:{});return r.DirtyForm.logger("Setting dirty stoppers"),this.each(function(){var n,e=r(this);0<r(this).parents(".ui-tabs-nav").length?((n=r(this).parents(".ui-tabs-nav")).find("a").unbind("click.dirty_form"),n.unbind("tabsselect.dirty_form"),n.bind("tabsselect.dirty_form",function(e,t){if(r(".dirtyform").are_dirty()){e.preventDefault();var i=r("<div id='dirty_stopper_dialog'/>").appendTo(document.body);r(this).prop("href");return i.dialog(r.extend(o.dialog,{buttons:{Proceed:function(){var e=r(t.tab).parent().siblings(".ui-tabs-selected").find("a").prop("href");r(".dirtyform",e).clean_form(),n.tabs("select",r(t.tab).prop("href")),r(this).dialog("destroy").remove()},Can()}}})).dialog("moveToTop").append(o.message),!1}})):(e.unbind("click.dirty_form"),e.bind("click.dirty_form",function(e){var t,i;r(".dirtyform").are_dirty()&&(e.preventDefault(),t=r("<div id='dirty_stopper_dialog'/>").appendTo(document.body),i=r(this).prop("href"),t.dialog(r.extend({buttons:{Proceed:function(){window.location=i},Can!1}}},o.dialog)).dialog("moveToTop").append(o.message))}))})},r.fn.are_dirty=function(){var e=!1;return this.e0)}),e},r.fn.dirty_checker=function(){return r.DirtyForm.logger("Setting dirty checkers!"),this.each(function(){checker=r(this),checker.click(function(){r("form").are_dirty()?alert("Dirty Form!!"):alert("Clean Form ...phew!")})})},r.fn.extend({dirty:function(e){return this.bind("dirty",e)},clean:function(e){return this.bind("clean",e)}})}(jQuery),jQuery.extend(jQuery.easing,{easeInQ+i},easeOutQ+i},easeInOutQ+i},easeInCu+i},easeOutCu+i},easeInOutCu+i},easeInQu+i},easeOutQu+i},easeInOutQu+i},easeInQu+i},easeOutQu+i},easeInOutQu+i},easeInS+i},easeOutS+i},easeInOutS+i},easeInE+i},easeOutE+i},easeInOutE+i},easeInC+i},easeOutC+i},easeInOutC+i},easeInElasi)},easeOutElasi)},easeInOutElasi)},easeInB+i},easeOutB+i},easeInOutB+i},easeInBou+i},easeOutBou+i},easeInOutBou+i}}),jQuery(function(t){var i="emchange";t.em=t.extend({version:"1.0",delay:200,element:t("<div />").css({left:"-100em",position:"absolute",width:"100em"}).appendTo("body")[0],action:function(){var e=t.em.element.offsetWidth/100;e!=t.em.current&&(t.em.previous=t.em.current,t.em.current=e,t.event.trigger(i,[t.em.current,t.em.previous]))}},t.em),t.fni)},t.em.current=t.em.element.offsetWidth/100,t.em.iid=setInterval(t.em.action,t.em.delay)}),function=e}function g(e,t,i){this.init(e,t,i)}var v={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},y=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;g.prototype={i()},notify:function(e){var t,i;return this.results[e.original_url]=e,this.count++,this._deferred.notify.apply(this._deferred,[e]),this.count===this.urls.length&&(t=this,i=m.map(this.ue]}),this._deferred.resolve(i)),this},sts)}},window.Keeper=g;function e(){}e.prototype={defaults:{},])},build:function(e,t,i){var n=(i=f(i)?{}:i).secure;f(n)&&(n="https:"===window.location.protocol);var o=(n?"https":"http")+"://api.embed.ly/"+("objectify"===e?"2/":"1/")+e,a=f(i.query)?{}:i.query;return a.key=i.key,(o+="?"+m.param(a))+("&urls="+m.map(t,encodeURIComponent).join(","))},ajax:function(i,e,n){if(n=m.extend({},v,m.embedly.defaults,"object"==typeof n&&n),f(n.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;var t;e=f(t=e)?[]:m.isArray(t)?t:[t];var o,a=new g(e),s=[],r=[];m.eac})});var l,c,d,u,h=(l=s,c=n.batch,d=[],u=[],m.eac])}),0!==u.length&&d.push(u),d),p=this;return m.eac})}),r.length&&setTime})},1),a._deferred},oembed:function(e,t){return this.ajax("oembed",e,t)},preview:function(e,t){return this.ajax("preview",e,t)},objectify:function(e,t){return this.ajax("objectify",e,t)},extract:function(e,t){return this.ajax("extract",e,t)}};function t(){}t.prototype={build:function(e,t,i){var n=(i=m.extend({},m.embedly.defaults,"object"==typeof i&&i)).secure;f(n)&&(n="https:"===window.location.protocol);var o=(n?"https":"http")+"://i.embed.ly/"+("display"===e?"1/":"1/display/")+e,a=f(i.query)?{}:i.query;return a.key=i.key,(o+="?"+m.param(a))+("&url="+encodeURIComponent(t))},display:function(e,t){return this.build("display",e,t)},resize:function(e,t){return this.build("resize",e,t)},fill:function(e,t){return this.build("fill",e,t)},cti)}a.prototype={i])},progrs)},imageSt")},disp])}},m.embedly=new e,m.embedly.display=new t,m.fn.embedly=function(n){if(void 0===n||"object"==typeof n){if(n=m.extend({},v,m.embedly.defaults,"object"==typeof n&&n),f(n.key))return m.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(m.noop);function e(e){var t,i;m.data(m(e),"embedly")||(t=m(e).attr("href"),i=new a(e,t,n),m.data(e,"embedly",i),o.hasOwnProperty(t)?o[t].push(i):o[t]=[i])}var o={},t=this.es)}),i=m.embedly.ajax(n.endpoint,m.ma t}),n).progr})});return n.progress&&i.progress(n.progress),n.done&&i.done(n.done),t}},m.expr[":"].embedly=function(e){return!f(m(e).data("embedly"))},m.fn.display=function(a,s){if(f(a)&&(a="display"),void 0===s||"object"==typeof s){if(s=m.extend({},v,m.embedly.defaults,"object"==typeof s&&s),f(s.key))return m.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),this.each(m.noop);function e(e){var t,i,n,o=m(e);o.data("display")||(i={original_url:t=o.data("src")||o.attr("href"),url:m.embedly.display.build(a,t,s)},o.data("display",i),o.trigger("initialized",[e]),n="<img src='"+i.url+"' />",o.is("a")?o.append(n):o.replaceWith(n))}function t(e){return!f(m(e).data("src"))||!f(m(e).attr("href"))}return this.e})})}},m.expr[":"].disp))}}(jQuery,window),jQuery.fn.farbtasis},jQuery.farbtas))},jQuery._farbtastic=function(e,t){var l=this;$(e).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var i=$(".farbtastic",e);l.wheel=$(".wheel",e).get(0),l.radius=84,l.square=100,l.width=194,navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",i).each(function(){var e;"none"!=this.currentStyle.backgroundImage&&(e=this.currentStyle.backgroundImage,e=this.currentStyle.backgroundImage.substring(5,e.length-2),$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+e+"')"}))}),l.linis},l.updateVae)},l.setCois},l.setis},l.widgetCoords=function(e){var t=e.target||e.srcElement,i=l.wheel;if(void 0!==e.offsetX){for(var n={x:e.offsetX,y:e.offsetY},o=t;o;)o.mouseX=n.x,o.mouseY=n.y,n.x+=o.offsetLeft,n.y+=o.offsetTop,o=o.offsetParent;for(var o=i,a={x:0,y:0};o;){if(void 0!==o.mouseX){s=o.mouseX-a.x,r=o.mouseY-a.y;break}a.x+=o.offsetLeft,a.y+=o.offsetTop,o=o.offsetParent}for(o=t;o;)o.mouseX=void 0,o.mouseY=void 0,o=o.offsetParent}else var n=l.absolutePosition(i),s=(e.pageX||0*(e.clientX+$("html").get(0).scrollLeft))-n.x,r=(e.pageY||0*(e.clientY+$("html").get(0).scrollTop))-n.y;return{x:s-l.width/2,y:r-l.width/2}},l.moused!1},l.mousemove=function(e){var t,i,n,o=l.widgetCoords(e);return l.circleDrag?((t=Math.atan2(o.x,-o.y)/6.28)<0&&(t+=1),l.setHSL([t,l.hsl[1],l.hsl[2]])):(i=Math.max(0,Math.min(1,.5-o.x/l.square)),n=Math.max(0,Math.min(1,.5-o.y/l.square)),l.setHSL([l.hsl[0],i,n])),!1},l.mous!1},l.updateDisplay=function(){var e=6.28*l.hsl[0];$(".h-marker",i).css({left:Math.round(Math.sin(e)*l.radius+l.width/2)+"px",top:Math.round(-Math.cos(e)*l.radius+l.width/2)+"px"}),$(".sl-marker",i).css({left:Math.round(l.square*(.5-l.hsl[1])+l.width/2)+"px",top:Math.round(l.square*(.5-l.hsl[2])+l.width/2)+"px"}),$(".color",i).css("backgroundColor",l.pack(l.HSLToRGB([l.hsl[0],1,.5]))),"object"==typeof l.callback?($(l.callback).css({backgroundColor:l.color,color:.5<l.hsl[2]?"#000":"#fff"}),$(l.callback).er)})):"function"==typeof l.callback&&l.callback.call(l,l.color)},l.absolutePosition=function(e){var t,i={x:e.offsetLeft,y:e.offsetTop};return e.offsetParent&&(t=l.absolutePosition(e.offsetParent),i.x+=t.x,i.y+=t.y),i},l.p6)},l.unp 0},l.HSLToRGB=function(e){var t=e[0],i=e[1],n=e[2],o=n<=.5?n*(i+1):n+i-n*i,a=2*n-o;return[this.hueToRGB(a,o,t+.33333),this.hueToRGB(a,o,t),this.hueToRGB(a,o,t-.33333)]},l.hueToRGB=function(e,t,i){return 6*(i=i<0?i+1:1<i?i-1:i)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(.66666-i)*6:e},l.RGBToHSL=function(e){var t=e[0],i=e[1],n=e[2],o=Math.min(t,Math.min(i,n)),a=Math.max(t,Math.max(i,n)),s=a-o,r=(o+a)/2,l=0;return 0<s&&(a==t&&a!=i&&(l+=(i-n)/s),a==i&&a!=n&&(l+=2+(n-t)/s),a==n&&a!=t&&(l+=4+(t-i)/s),l/=6),[l,0<r&&r<1?s/(r<.5?2*r:2-2*r):0,r]},$("*",i).mousedown(l.mousedown),l.setColor("#000000"),t&&l.linkTo(t)},function(h){"use strict";var p="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";h.fn.imagesLoaded=function(i){var n=this,o=h.isFunction(h.Deferred)?h.Deferred():0,a=h.isFunction(o.notify),s=n.find("img").add(n.filter("img")),r=[],l=[],c)}return s.length?s.bind("load.imagesLoaded error.imagesLoade)}).ei)}):d(),o?o.promise(n):n}}(jQuery),function(Re){Re.Jcrop=function(e,t){var b=Re.extend({},Re.Jcrop.defaults),i=navigator.userAgent.toLowerCase(),n=/msie/.test(i),o=/msie [1-6]\./.testunction r(e,t,i){if(W=c(w),_e.setCursor("move"===e?e:e+"-resize"),"move"===e)return _e.activateHandlers((n=t,$e.watchKey()}),u,i);var n,o,a,s=Z.getFixed(),r=d(e),l=Z.getCorner(d(r));Z.setPressed(Z.getCorner(r)),Z.setCurrent(l),_e.activateHandlers((o=e,()}),uect"!=typeof e&&(e=Re(e)[0]),"object"!=typeof t&&(t={}),s(t);var m,w,C={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},k=Re(e),x=!0;"IMG"==e.tagName?(0!=k[0].width&&0!=k[0].height?(k.width(k[0].width),k.height(k[0].height)):((m=new Image).src=k[0].src,k.width(m.width),k.height(m.height)),(w=k.clone().removeAttr("id").css(C).show()).width(k.width()),w.height(k.height()),k.after(w).hide()):(w=k.css(C).show(),x=!1,null===b.shade&&(b.shade=!0)),l(w,b.boxWidth,b.boxHeight);var S=w.width(),T=w.height(),$=Re("<div />").width(S).height(T).addClass(g("holder")).css({position:"relative",backgroundColor:b.bgColor}).insertAfter(k).append(w);b.addClass&&$.addClass(b.addClass);var I=Re("<div />"),j=Re("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),E=Re("<div />").width("100%").height("100%").css("zIndex",320),A=Re("<div />").css({position:"absolute",zIndex:600}).dblcle)}).insertBefore(w).append(j,E);x&&(I=Re("<img />").attr("src",w.attr("src")).css(C).width(S).height(T),j.append(I)),o&&A.css({overflowY:"hidden"});var P,M,O,D,R,F,N,B,U=b.boundary,L=_().width(S+2*U).height(T+2*U).css({position:"absolute",top:f(-U),left:f(-U),zIndex:290}).mousedown(h),H=b.bgColor,K=b.bgOpacity,W=c(w),z={createDragger:function(t){return function(e){return b.disabled||"move"===t&&!b.allowMove||(W=c(w),N=!0,r(t,a(z.cfilter(e)),!0),e.stopPropagation(),e.preventDefault()),!1}},newSelect))},cfil,e},isSupported:V,support:!0===b.touchSupport||!1===b.touchSupport?b.touchSupport:V1}}var q,Y,G,J,Q,X,Z=(X=Q=J=G=0,{flipCoords:ie,setPres1]},setCurr1]},getOffset:function(){return[q,Y]},moveOff=i},getCor]}},getFixed:ee});function ee(){if(!b.aspectRatio)ret))}();var e,t,i,n,o=b.aspectRatio,a=b.minSize[0]/R,s=b.maxSize[0]/R,r=b.maxSize[1]/F,l=Q-G,c=X-J,d=Math.abs(l),u=Math.abs(c);return 0===s&&(s=10*S),0===r&&(r=10*T),d/u<o?(t=X,i=u*o,(e=l<0?G-i:i+G)<0?(e=0,n=Math.abs((e-G)/o),t=c<0?J-n:n+J):S<e&&(e=S,n=Math.abs((e-G)/o),t=c<0?J-n:n+J)):(e=Q,n=d/o,(t=c<0?J-n:J+n)<0?(t=0,i=Math.abs((t-J)*o),e=l<0?G-i:i+G):T<t&&(t=T,i=Math.abs(t-J)*o,e=l<0?G-i:i+G)),G<e?(e-G<a?e=G+a:s<e-G&&(e=G+s),t=J<t?J+(e-G)/o:J-(e-G)/o):e<G&&(G-e<a?e=G-a:s<G-e&&(e=G-s),t=J<t?J+(G-e)/o:J-(G-e)/o),e<0?(G-=e,e=0):S<e&&(G-=e-S,e=S),t<0?(J-=t,t=0):T<t&&(J-=t-T,t=T),ne(ie(G,J,e,}var oe,ae,se,re=(oe=!1,ae=Re("<div />").css({position:"absolute",zIndex:240,opacity:0}),se={top:de(),left:de().height(T),right:de().height(T),bottom:de()},{update:le,updateRaw:ce,getShades:fe,setBgColor:he,enable:ue,disable:pe,res})},refry)},opacity:mge,ve,ye,be=function(){var s,a=370,r={},l={},i={},eagEdges&&Re.isArray(b.createDragbars)&&function(e){for(var t=0;t<e.length;t++)i[e[t]]=c(e[t],a++).addClass("jcrop-dragbar")}(b.createDragbars),Re.isArray(b.createHandles)&&function(e){for(var t,i,n,o=0;o<e.length;o++)l[e[o]]=(t=e[o],n=void 0,i=b.handleSize,n=c(t,a++).css({opacity:b.handleOpacity}).addClass(g("handle")),i&&n.width(i).height(i),n)}(b.createHandles),b.drawBorders&&Re.isArray(b.createBorders)&&function(e){for(var t,i,n,o=0;o<e.length;o++){switch(e[o]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}r[e[o]]=(i=t,n=Re("<div />").css({position:"absolute",opacity:b.borderOpacity}).addClass(g(i)),j.append(n),n)}}(b.createBorders),Re(document).bind("touchstart.jcrop-i()});var m=_().mousedown(v("move")).css({cursor:"move",position:"absolute",zIndex:360});return z.support&&m.bind("touchstart.jcrop",z.createDragger("move")),j.append(m),h(),{updateVisible:n,update:o,relee)},refresh:t,isAwake:function(){return s},setCursor:function(e){m.css("cursor",e)},enableHandles:u,enableOnly:function(){e=!0},showHand()},disableHandles:h,animMode:p,setBgOpacity:d,d()}}}(),_e=(ge=function(){},ve=function(){},(ye=b.trackDocument)||L.mousemove(we).mouseup(Ce).mouseout(Ce),w.before(L),{activateHandlers:function(e,t,i){var n;return N=!0,ge=e,ve=t,n=i,L.css({zIndex:450}),n?Re(document).bind("touchmove.jcrop",ke).bind("touchend.jcrop",xe):ye&&Re(document).bind("mousemove.jcrop",we).bind("mouseup.jcrop",Ce),!1},setCursor:function(e){L.css("cursor",e)var Se,Te,$e=(Se=Re('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),Te=Re("<div />").css({position:"absolute",overflow:"hidden"}).append(Se),b.keySupport&&(Se.keyd!1}).blur(function(e){Se.hide()}),o||!b.fixedSupport?(Se.css({position:"absolute",left:"-20px"}),Te.append(Se).insertBefore(w)):Se.insertBefore(w)),{watchK))upport&&L.bind("touchstart.jcrop",z.newSelection),E.hide(),Oe(!0);var De={setIm=o},animat))},setSelect:je,setOpti()},tellSel))},tellSca()},setCle)},disable:Ae,enable:Pe,canl)},release:be.release,dest")},focus:$e.watchKeys,getBouF]},getWidgetSize:function(){return[S,T]},getScaleFacF]},getOptions:function(){return b},ui:{holder:$,selection:A}};return n&&$.bind("selectstart",function(){return!1}),k.data("Jcrop",De),De},Re.fn.Jcis},Re.Jcrop.Loa))},Re.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(_e,we,Ce){_e.fn.jScrollPane=function(i){function n(w,e){var C,k,x,S,T,$,I,j,E,A,P,M,O,D,R,F,N,B,U,t,L,H,K,W,z,V,q,Y,G,J,Q,X,Z,ee,te=this,s=!0,r=!0,l=!1,c=!1,i=w.clone(!1,!1).empty(),ie=_e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";function ne(e){var t,i,n,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y=!1,b=!1;if(C=e,k===Ce)a=w.scrollTop(),s=w.scrollLeft(),w.css({overflow:"hidden",padding:0}),x=w.innerWidth()+Z,S=w.innerHeight(),w.width(x),k=_e('<div class="jspPane" />').css("padding",X).append(w.children()),T=_e('<div class="jspContainer" />').css({width:x+"px",height:S+"px"}).append(k).appendTo(w);else{if(w.css("width",""),y=C.stickToBottom&&(20<(l=I-S)&&l-ye()<10),b=C.stickToRight&&(20<(r=$-x)&&r-ve()<10),(o=w.innerWidth()+Z!=x||w.outerHeight()!=S)&&(x=w.innerWidth()+Z,S=w.innerHeight(),T.css({width:x+"px",height:S+"px"})),!o&&ee==$&&k.outerHeight()==I)return void w.width(x);ee=$,k.css("width",""),w.width(x),T.find("* > .jspVerticalBar,  > .jspHorizontalBar").remove().en=D}k.css("overflow","auto"),$=e.contentWidth?e.contentWidth:k[0].scrollWidth,I=k[0].scrollHeight,k.css("overflow",""),A=1<(E=I/S),(P=1<(j=$/x))||A?(w.addClass("jspScrollable"),(t=C.maintainPosition&&(D||N))&&(i=ve(),n=ye()),A&&(T.append(_e('<div class="jspVerticalBar" />').append(_e('<div class="jspCap jspCapTop" />'),_e('<div class="jspTrack" />').append(_e('<div class="jspDrag" />').append(_e('<div class="jspDragTop" />'),_e('<div class="jspDragBottom" />'))),_e('<div class="jspCap jspCapBottom" />'))),B=T.find("* > .jspVerticalBar"),U=B.find("* > .jspTrack"),M=U.find("* > .jspDrag"),C.showArrows&&(K=_e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",re(0,-1)).bind("click.jsp",be),W=_e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",re(0,1)).bind("click.jsp",be),C.arrowScrollOnHover&&(K.bind("mouseover.jsp",re(0,-1,K)),W.bind("mouseover.jsp",re(0,1,W))),se(U,C.verticalArrowPositions,K,W)),L=S,T.find("* > .jspVerticalBar > .jspCap:visible,  > .jspVerticalBar > .jspArrow").each(function(){L-=_e(this).outerHeight()}),M.hover(function(){M.addClass("jspHover")},function(){M.removeClass("jspHover")}).bind("mousedown.jsp",function(e){_e("html").bind("dragstart.jsp selectstart.jsp",be),M.addClass("jspActive");var t=e.pageY-M.position().top;return _e("html").bind("mousemove.jsp",function(e){de(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",ce),!1}),oe()),P&&(T.append(_e('<div class="jspHorizontalBar" />').append(_e('<div class="jspCap jspCapLeft" />'),_e('<div class="jspTrack" />').append(_e('<div class="jspDrag" />').append(_e('<div class="jspDragLeft" />'),_e('<div class="jspDragRight" />'))),_e('<div class="jspCap jspCapRight" />'))),z=T.find("* > .jspHorizontalBar"),V=z.find("* > .jspTrack"),R=V.find("* > .jspDrag"),C.showArrows&&(G=_e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",re(-1,0)).bind("click.jsp",be),J=_e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",re(1,0)).bind("click.jsp",be),C.arrowScrollOnHover&&(G.bind("mouseover.jsp",re(-1,0,G)),J.bind("mouseover.jsp",re(1,0,J))),se(V,C.horizontalArrowPositions,G,J)),R.hover(function(){R.addClass("jspHover")},function(){R.removeClass("jspHover")}).bind("mousedown.j!1}),q=T.innerWidth(),ae()),function(){{var e,t;P&&A&&(e=V.outerHeight(),t=U.outerWidth(),L-=e,_e(z).find("* > .jspCap:visible,  > .jspArrow").e()}),q-=t,S-=t,x-=e,V.parent().append(_e('<div class="jspCorner" />').css("width",e+"px")),oe(),ae())}P&&k.width(T.outerWidth()-Z+"px");I=k.outerHeight(),E=I/S,P&&((Y=Math.ceil(1/j*q))>C.horizontalDragMaxWidth?Y=C.horizontalDragMaxWidth:Y<C.horizontalDragMinWidth&&(Y=C.horizontalDragMinWidth),R.width(Y+"px"),F=q-Y,pe(N));A&&((H=Math.ceil(1/E*L))>C.verticalDragMaxHeight?H=C.verticalDragMaxHeight:H<C.verticalDragMinHeight&&(H=C.verticalDragMinHeight),M.height(H+"px"),O=L-H,ue(D))}(),t&&(fe(b?$-x:i,!1),me(y?I-S:n,!1)),k.find(":input, a").unbind("focus.jsp").bind("focus.j1)}),T.unbind(ie).bind=D}),v=!1,T.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.j1)}).bind("touchmove.jD}}).bind("touchend.j!1}).bind("click.jsp-touchcli!1}),C.enableKeyboardNavigation&&(u=[],P&&u.push(z[0]),A&&u.push(B[0]),k.fo()}),w.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.j)}}).bind("keypress.j!d}),C.hideFocus?(w.css("outline","none"),"hideFocus"in T[0]&&w.attr("hideFocus",!0)):(w.css("outline",""),"hideFocus"in T[0]&&w.attr("hideFocus",!1))),C.clickOnTrack&&function(){le(),A&&U.bind("mousedown.jsp",function(o){if(o.originalTarget===Ce||o.originalTarget==o.currentTarget){var a,s=_e(this),e=s.offset(),r=o.pageY-e.top-D,l=!0,c=function(){var e=s.offset(),t=o.pageY-e.top-H/2,i=S*C.scrollPagePercent,n=O*i/(I-S);if(r<0)t<D-n?te.scrollByY(-i):de(t);else{if(!(0<r))return void d();D+n<t?te.scrollByY(i):de(t)}a=setTimeout(c,l?C.initialDelay:C.trackClickRepeatFreq),l=!1},d=function(){a&&clearTimeout(a),a=null,_e(document).unbind("mouseup.jsp",d)};return c(),_e(document).bind("mouseup.jsp",d),!1}});P&&V.bind("mousedown.j1}}))}}(),C.hijackInternalLin})}()):(w.removeClass("jspScrollable"),k.css({top:0,left:0,width:T.width()-Z}),T.unbind(ie),k.find(":input, a").unbind("focus.jsp"),w.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),le()),C.autoReinitialise&&!Q?Q=setInterval(function(){ne(C)},C.autoReinitialiseDelay):!C.autoReinitialise&&Q&&clearInterval(Q),a&&w.scrollTop(0)&&me(a,!1),s&&w.scrollLeft(0)&&fe(s,!1),w.trigger("jsp-initialised",[P||nction de(e,t){A&&(e<0?e=0:O<e&&(e=O),t===Ce&&(t=C.animateScroll),t?te.animate(M,"top",e,ue):(M.css("top",e),ue(e)))}function ue(e){e===Ce&&(e=M.position().top),T.scrollTop(0);var t,i,n=0===(D=e),o=D==O,a=-(e/O)*(I-S);s==n&&l==o||(s=n,l=o,w.trigger("jsp-arrow-change",[s,l,r,c])),t=n,i=o,C.showArrows&&(K[t?"addClass":"removeClass"]("jspDisabled"),W[i?"addClass":"removeClass"]("jspDisabled")),k.css("top",a),w.trigger("jsp-scroll-y",[-a,n,o]).trigger("scrol)}function me(e,t){de(e/(I-S)*O)}function ve(){return-k.position().l1}Z="border-box"===w.css("box-sizing")?X=0:(X=w.css("paddingTop")+" "+w.css("paddingRight")+" "+w.css("paddingBottom")+" "+w.css("paddingLeft"),(parseInt(w.css("paddingLeft"),10)||0)+(parseInt(w.css("paddingRight"),10)||0)),_e.extend(te,{reinitial))},scrollToElemi)},scroli)},scrollToX:function(e,t){fe(e,t)},scrollToY:function(e,t){me(e,t)},scrollToPercentX:function(e,t){fe(e*($-x),t)},scrollToPercet)},scroli)},scrollByX:function(e,t){he((ve()+Math[e<0?"floor":"ceil"](e))/($-x)*F,t)},scrollt)},positionDragX:function(e,t){he(e,t)},positionDrt)},anim})},getContentPositionX:ve,getContentPositionY:ye,getContentWidth:function(){return $},getContentHeight:function(){return I},getPercentScrolledX:function(){return ve()/($-x)},getPercentScrollS)},getIsScrollableH:function(){return P},getIsScrollableV:function(){return A},getContentPane:function(){return k},scrollToBottom:function(e){de(O,e)},hijackInternalLinks:_e.noop,destQ)}}),ne(e)}return i=_e.extend({},_e.fn.jScrollPane.defaults,i),_e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeeed}),this.e))})},_e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:Ce,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,thy)}(function(c){var d,u,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(c.event.fixHooks)for(var i=e.length;i;)c.event.fixHooks[e[--i]]=c.event.mouseHooks;function n(e){var t,i,n,o=e||window.event,a=[].slice.call(arguments,1),s=0,r=0,l=0;return(e=c.event.fix(o)).type="mousewheel",o.wheelDelta&&(s=o.wheelDelta),o.detail&&(s=-1*o.detail),l=s,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(l=0,r=-1*s),o.deltaY&&(s=l=-1*o.deltaY),o.deltaX&&(s=-1*(r=o.deltaX)),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(r=-1*o.wheelDeltaX),t=Math.abs(s),(!d||t<d)&&(d=t),i=Math.max(Math.abs(l),Math.abs(r)),(!u||i<u)&&(u=i),n=0<s?"floor":"ceil",s=Math[n](s/d),r=Math[n](r/u),l=Math[n](l/u),a.unshift(e,s,r,l),(c.event.dispatch||c.event.handle).apply(this,a)}c.event.special.mousewheel={se=n},teardll}},c.fn.extend({mousewh")},unmousewhe)}}y)}(function(e){"use strict";var T=!1,$=!1,I=0,j=2e3,E=0,A=e,P=document,M=window,O=A(M),D=[];var a,R=M.requestAnimationFrame||M.webkitRequestAnimationFrame||M.mozRequestAnimationFrame||!1,F=M.cancelAnimationFrame||M.webkitCancelAnimationFrame||M.mozCancelAnimationFrame||!1;R?M.cancelAnimationFrame|){}):(a=,o},F=function(e){M.clearTimeout(e=s}function r(e,t){var b=this;this.version="3.7.6",this.name="nicescroll",this.me=t;var i,n,_=A("body"),w=this.opt={doc:_,win:!1};if(A.extend(w,L),w.snapbackspeed=80,e)for(var o in w)void 0!==e[o]&&(w[o]=e[o]);if(w.disablemutationobserver&&(B=!1),this.doc=w.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(w.win?w.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==w.win,this.win=w.win||(this.ispage?O:this.doc),this.docscroll=this.ispage&&!this.haswrapper?O:this.win,this.body=_,this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=w.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==w.rtlmode?"horizontal-tb"==(n=(i=this.win[0]==M?this.body:this.win).css("writing-mode")||i.css("-webkit-writing-mode")||i.css("-ms-writing-mode")||i.css("-moz-writing-mode"))||"lr-tb"==n||""===n?(this.isrtlmode="rtl"==i.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==n||"tb"==n||"tb-rl"==n||"rl-tb"==n,this.isvertical="vertical-rl"==n||"tb"==n||"tb-rl"==n):(this.isrtlmode=!0===w.rtlmode,this.isvertical=!1),this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,(this.observerbody=!1)!==w.scrollbarid)this.id=w.scrollbarid;else for(;this.id="ascrail"+j++,P.getElementById(this.id););this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=w.overflowx,this.overflowy=w.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=N();var a,C=A.extend({},this.detect)}this.canhwscroll=C.hastransform&&w.hwacceleration,this.ishwscroll=this.canhwscroll&&b.haswrapper,this.isrtlmode?this.isvertical?this.hasreversehr=!(C.iswebkit||C.isie||C.isie11):this.hasreversehr=!(C.iswebkit||C.isie&&!C.isie10&&!C.isie11):this.hasreversehr=!1,this.istouchcapable=!1,(C.cantouch||!C.hasw3ctouch&&!C.hasmstouch)&&(!C.cantouch||C.isios||C.isandroid||!C.iswebkit&&!C.ismozilla)||(this.istouchcapable=!0),w.enablemouselockapi||(C.hasmousecapture=!1,C.haspointerlock=!1),this.debount)},this.sync))},this.unsync1)},this.])},this.scrollTop=function(e){return void 0===e?b.getScrollTop():b.setScrollTop(e)},this.scrollLe)},d.prototype=*e}*e}*e},getpd},get|0},updis}},this.ishwscroll?(this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},C.hastranslate3d&&C.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=s();if(t)return 16==t.length?-t[13]:-t[5];if(b.timerscroll&&b.timerscroll.bz)return b.timerscroll.bz.getNow()}return b.doc.translate.y},this.getScrollL.x},this.notifyScrollEvt)},a=this.isrtlmode?1:-1,C.hastranslate3d&&w.enabletranslate3d?(this.setScrollTop=function(e,t){b.doc.translate.y=e,b.doc.translate.ty=-1*e+"px",b.doc.css(C.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0)"),t||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(e,t){b.doc.translate.x=e,b.doc.translate.tx=e*a+"px",b.doc.css(C.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0)"),t||b.notifyScrollEvent(b.win[0])}):(this.setScroll])},this.setScrollL])})):(this.getScroll()},this.setScrolle)},this.getScrollL e},this.setScrollL1)}),this.getTart)},this.hasPar=i};var r={thin:1,medium:3,thick o}this.getDocumentScrollOfft}},this.getOfft}},this.updateScrollBar=function(e){var t,i,n,o,a;b.ishwscroll?(b.rail.css({height:b.win.innerHeight()-(w.railpadding.top+w.railpadding.bottom)}),b.railh&&b.railh.css({width:b.win.innerWidth()-(w.railpadding.left+w.railpadding.right)})):((a={top:(i=b.getOffset()).top,left:i.left-(w.railpadding.left+w.railpadding.right)}).top+=l(b.win,"border-top-width",!0),a.left+=b.rail.align?b.win.outerWidth()-l(b.win,"border-right-width")-b.rail.width:l(b.win,"border-left-width"),(t=w.railoffset)&&(t.top&&(a.top+=t.top),t.left&&(a.left+=t.left)),b.railslocked||b.rail.css({top:a.top,left:a.left,height:(e?e.h:b.win.innerHeight())-(w.railpadding.top+w.railpadding.bottom)}),b.zoom&&b.zoom.css({top:a.top+1,left:1==b.rail.align?a.left-20:a.left+b.rail.width+4}),b.railh&&!b.railslocked&&(a={top:i.top,left:i.left},(t=w.railhoffset)&&(t.top&&(a.top+=t.top),t.left&&(a.left+=t.left)),n=b.railh.align?a.top+l(b.win,"border-top-width",!0)+b.win.innerHeight()-b.railh.height:a.top+l(b.win,"border-top-width",!0),o=a.left+l(b.win,"border-left-width"),b.railh.css({top:n-(w.railpadding.top+w.railpadding.bottom),left:o,width:b.railh.width})))},this.doRailCl))},b.newscrolly=b.newscrollx=0,b.hasanimationframe="requestAnimationFrame"in M,b.hascancelanimationframe="cancelAnimationFrame"in M,b.hasborderbox=!1,this.init=function(){if(b.saved.css=[],C.isoperamini)return!0;if(C.isandroid&&!("hidden"in P))return!0;w.emulatetouch=w.emulatetouch||w.touchbehavior,b.hasborderbox=M.getComputedStyle&&"border-box"===M.getComputedStyle(P.body)["box-sizing"];var e,i={"overflow-y":"hidden"};if((C.isie11||C.isie10)&&(i["-ms-overflow-style"]="none"),b.ishwscroll&&(this.doc.css(C.transitionstyle,C.prefixstyle+"transform 0ms ease-out"),C.transitionend&&b.bind(b.doc,C.transitionend,b.onScrollTransitionEnd,!1)),b.zindex="auto",b.ispage||"auto"!=w.zindex?b.zindex=w.zindex:b.zin!1}()||"auto",!b.ispage&&"auto"!=b.zindex&&b.zindex>E&&(E=b.zindex),b.isie&&0===b.zindex&&"auto"==w.zindex&&(b.zindex="auto"),!b.ispage||!C.isieold){var t=b.docscroll;b.ispage&&(t=b.haswrapper?b.win:b.doc),b.css(t,i),b.ispage&&(C.isie11||C.isie)&&b.css(A("html"),i),!C.isios||b.ispage||b.haswrapper||b.css(_,{"-webkit-overflow-scrolling":"touch"});var n=A(P.createElement("div"));n.css({position:"relative",top:0,float:"right",width:w.cursorwidth,height:0,"background-color":w.cursorcolor,border:w.cursorborder,"background-clip":"padding-box","-webkit-border-radius":w.cursorborderradius,"-moz-border-radius":w.cursorborderradius,"border-radius":w.cursorborderradius}),n.addClass("nicescroll-cursors"),b.cursor=n;var o=A(P.createElement("div"));o.attr("id",b.id),o.addClass("nicescroll-rails nicescroll-rails-vr");var a,s,r=["left","right","top","bottom"];for(var l in r)s=r[l],(a=w.railpadding[s]||0)&&o.css("padding-"+s,a+"px");o.append(n),o.width=Math.max(parseFloat(w.cursorwidth),n.outerWidth()),o.css({width:o.width+"px",zIndex:b.zindex,background:w.background,cursor:"default"}),o.visibility=!0,o.scrollable=!0,o.align="left"==w.railalign?0:1,b.rail=o;var c,d,u,m,f,h,p,g,v,y=b.rail.drag=!1;!w.boxzoom||b.ispage||C.isieold||(y=P.createElement("div"),b.bind(y,"click",b.doZoom),b.bind(y,"mouseenter",function(){b.zoom.css("opacity",w.cursoropacitymax)}),b.bind(y,"mouselean)}),b.zoom=A(y),b.zoom.css({cursor:"pointer",zIndex:b.zindex,backgroundImage:"url("+w.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),w.dblclickzoom&&b.bind(b.win,"dblclick",b.doZoom),C.cantouch&&w.gesturezoom&&(b.ongestureze)},b.bind(b.win,"gestureend",b.ongesturezoom))),b.railh=!1,w.horizrailenabled&&(b.css(t,{overflowX:"hidden"}),(n=A(P.createElement("div"))).css({position:"absolute",top:0,height:w.cursorwidth,width:0,backgroundColor:w.cursorcolor,border:w.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":w.cursorborderradius,"-moz-border-radius":w.cursorborderradius,"border-radius":w.cursorborderradius}),C.isieold&&n.css("overflow","hidden"),n.addClass("nicescroll-cursors"),b.cursorh=n,(c=A(P.createElement("div"))).attr("id",b.id+"-hr"),c.addClass("nicescroll-rails nicescroll-rails-hr"),c.height=Math.max(parseFloat(w.cursorwidth),n.outerHeight()),c.css({height:c.height+"px",zIndex:b.zindex,background:w.background}),c.append(n),c.visibility=!0,c.scrollable=!0,c.align="top"==w.railvalign?0:1,b.railh=c,b.railh.drag=!1),b.ispage?(o.css({position:"fixed",top:0,height:"100%"}),o.css(o.align?{right:0}:{left:0}),b.body.append(o),b.railh&&(c.css({position:"fixed",left:0,width:"100%"}),c.css(c.align?{bottom:0}:{top:0}),b.body.append(c))):(b.ishwscroll?("static"==b.win.css("position")&&b.css(b.win,{position:"relative"}),d="HTML"==b.win[0].nodeName?b.body:b.win,A(d).scrollTop(0).scrollLeft(0),b.zoom&&(b.zoom.css({position:"absolute",top:1,right:0,"margin-right":o.width+4}),d.append(b.zoom)),o.css({position:"absolute",top:0}),o.css(o.align?{right:0}:{left:0}),d.append(o),c&&(c.css({position:"absolute",left:0,bottom:0}),c.css(c.align?{bottom:0}:{top:0}),d.append(c))):(b.isfixed="fixed"==b.win.css("position"),u=b.isfixed?"fixed":"absolute",b.isfixed||(b.viewport=b.getViewport(b.win[0])),b.viewport&&(b.body=b.viewport,/fixed|absolute/.test(b.viewport.css("position"))||b.css(b.viewport,{position:"relative"})),o.css({position:u}),b.zoom&&b.zoom.css({position:u}),b.updateScrollBar(),b.body.append(o),b.zoom&&b.body.append(b.zoom),b.railh&&(c.css({position:u}),b.body.append(c))),C.isios&&b.css(b.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),w.disableoutline&&(C.isie&&b.win.attr("hideFocus","true"),C.iswebkit&&b.win.css("outline","none"))),!1===w.autohidemode?(b.autohidedom=!1,b.rail.css({opacity:w.cursoropacitymax}),b.railh&&b.railh.css({opacity:w.cursoropacitymax})):!0===w.autohidemode||"leave"===w.autohidemode?(b.autohidedom=A().add(b.rail),C.isie8&&(b.autohidedom=b.autohidedom.add(b.cursor)),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh)),b.railh&&C.isie8&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"scroll"==w.autohidemode?(b.autohidedom=A().add(b.rail),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh))):"cursor"==w.autohidemode?(b.autohidedom=A().add(b.cursor),b.railh&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"hidden"==w.autohidemode&&(b.autohidedom=!1,b.hide(),b.railslocked=!1),(C.cantouch||b.istouchcapable||w.emulatetouch||C.hasmstouch)&&(b.scrollmom=new H(b),b.ontouchstart=function(e){if(b.locked)return!1;if(e.pointerType&&("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))return!1;if(b.hasmoving=!1,b.scrollmom.timer&&(b.triggerScrollEnd(),b.scrollmom.stop()),!b.railslocked){var t=b.getTarget(e);if(t)if(/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return b.stopPropagation(e);var i,n,o,a,s,r,l,c="mousedown"===e.type;if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),b.forcescreen&&((e={original:(i=e).original?e.original:e}).clientX=i.screenX,e.clientY=i.screenY),b.rail.drag={x:e.clientX,y:e.clientY,sx:b.scroll.x,sy:b.scroll.y,st:b.getScrollTop(),sl:b.getScrollLeft(),pt:2,dl:!1,tg:t},b.ispage||!w.directionlockdeadzone?b.rail.drag.dl="f":(n=O.width(),o=O.height(),s=(a=b.getContentSize()).h-o,r=a.w-n,b.rail.scrollable&&!b.railh.scrollable?b.rail.drag.ck=0<s&&"v":!b.rail.scrollable&&b.railh.scrollable?b.rail.drag.ck=0<r&&"h":b.rail.drag.ck=!1),w.emulatetouch&&b.isiframe&&C.isie&&(l=b.win.position(),b.rail.drag.x+=l.left,b.rail.drag.y+=l.top),b.hasmoving=!1,b.lastmouseup=!1,b.scrollmom.reset(e.clientX,e.clientY),t&&c){if(!/INPUT|SELECT|BUTTON|TEXTAREA/i.test(t.nodeName))return C.hasmousecapture&&t.setCapture(),w.emulatetouch?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.oncle)}),b.cancelEvent(e)):b.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(A(t).attr("type"))&&(b.preventclick={tg:t,click:!1})}}},b.ontouche)},m=w.emulatetouch&&b.isiframe&&!C.hasmousecapture,f=.3*w.directionlockdeadzone|0,b.ontouchmove=function(e,t){if(!b.rail.drag)return!0;if(e.targetTouches&&w.preventmultitouchscrolling&&1<e.targetTouches.length)return!0;if(e.pointerType&&("mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))return!0;if(2!=b.rail.drag.pt)return 1==b.rail.drag.pt?b.onmousemove(e):void 0;var i,n,o;"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n=o=0,m&&!t&&(n=-(i=b.win.position()).left,o=-i.top);var a=e.clientY+o,s=a-b.rail.drag.y,r=e.clientX+n,l=r-b.rail.drag.x,c=b.rail.drag.st-s;if(b.ishwscroll&&w.bouncescroll)c<0?c=Math.round(c/2):c>b.page.maxh&&(c=b.page.maxh+Math.round((c-b.page.maxh)/2));else if(c<0?a=c=0:c>b.page.maxh&&(c=b.page.maxh,a=0),0===a&&!b.hasmoving)return b.ispage||(b.rail.drag=!1),!0;var d=b.getScrollLeft();if(b.railh&&b.railh.scrollable&&(d=b.isrtlmode?l-b.rail.drag.sl:b.rail.drag.sl-l,b.ishwscroll&&w.bouncescroll?d<0?d=Math.round(d/2):d>b.page.maxw&&(d=b.page.maxw+Math.round((d-b.page.maxw)/2)):(d<0&&(r=d=0),d>b.page.maxw&&(d=b.page.maxw,r=0))),!b.hasmoving){if(b.rail.drag.y===e.clientY&&b.rail.drag.x===e.clientX)return b.cancelEvent(e);var u=Math.abs(s),h=Math.abs(l),p=w.directionlockdeadzone;if(b.rail.drag.ck?"v"==b.rail.drag.ck?p<h&&u<=f?b.rail.drag=!1:p<u&&(b.rail.drag.dl="v"):"h"==b.rail.drag.ck&&(p<u&&h<=f?b.rail.drag=!1:p<h&&(b.rail.drag.dl="h")):p<u&&p<h?b.rail.drag.dl="f":p<u?b.rail.drag.dl=f<h?"f":"v":p<h&&(b.rail.drag.dl=f<u?"f":"h"),!b.rail.drag.dl)return b.cancelEvent(e);b.triggerScrollStart(e.clientX,e.clientY,0,0,0),b.hasmoving=!0}return b.preventclick&&!b.preventclick.click&&(b.preventclick.click=b.preventclick.tg.onclick||!1,b.preventclick.tg.onclick=b.onpreventclick),b.rail.drag.dl&&("v"==b.rail.drag.dl?d=b.rail.drag.sl:"h"==b.rail.drag.dl&&(c=b.rail.drag.st)),b.synched("touchmo))}),b.cancelEvent(e)},b.ontouchstartCur)}},b.ontouchendCur)}},b.ontouchmoveCursor=function(e){if(b.rail.drag){if(3!=b.rail.drag.pt)return;var t,i;return b.cursorfreezed=!0,b.rail.drag.hr?(b.scroll.x=b.rail.drag.sx+(e.touches[0].clientX-b.rail.drag.x),b.scroll.x<0&&(b.scroll.x=0),t=b.scrollvaluemaxw,b.scroll.x>t&&(b.scroll.x=t)):(b.scroll.y=b.rail.drag.sy+(e.touches[0].clientY-b.rail.drag.y),b.scroll.y<0&&(b.scroll.y=0),i=b.scrollvaluemax,b.scroll.y>i&&(b.scroll.y=i)),b.synched("touchmo))}),b.cancelEvent(e)}}),b.onmoused)}},b.onmous))},b.onmousemove=function(e){if(b.rail.drag){if(1!==b.rail.drag.pt)return;return C.ischrome&&0===e.which?b.onmouseup(e):(b.cursorfreezed=!0,b.hasmoving||b.triggerScrollStart(e.clientX,e.clientY,0,0,0),b.hasmoving=!0,b.rail.drag.hr?(b.scroll.x=b.rail.drag.sx+(e.clientX-b.rail.drag.x),b.scroll.x<0&&(b.scroll.x=0),t=b.scrollvaluemaxw,b.scroll.x>t&&(b.scroll.x=t)):(b.scroll.y=b.rail.drag.sy+(e.clientY-b.rail.drag.y),b.scroll.y<0&&(b.scroll.y=0),i=b.scrollvaluemax,b.scroll.y>i&&(b.scroll.y=i)),b.synched("mousemo))}),b.cancelEvent(e));var t,i}else b.checkarea=0},C.cantouch||w.emulatetouch?(b.onpreventcle)},b.onclick=!C.isi))},w.grabcursorenabled&&C.cursorgrabvalue&&(b.css(b.ispage?b.doc:b.win,{cursor:C.cursorgrabvalue}),b.css(b.rail,{cursor:C.cursorgrabvalue}))):(h=function(e){var t,i,n;b.selectiondrag&&(e&&(t=b.win.outerHeight(),0<(i=e.pageY-b.selectiondrag.top)&&i<t&&(i=0),t<=i&&(i-=t),b.selectiondrag.df=i),0!==b.selectiondrag.df&&(n=-2*b.selectiondrag.df/6|0,b.doScrollBy(n),b.debounced("doselectionscroll",function(){h()},50)))},b.hasTextSelected="getSelection"int}:"selection"i!1},b.onselectionst))},b.onselectionend=function(e){b.selectiondrag=!1},b.onselectiond0)}),C.hasw3ctouch?(b.css(b.ispage?A("html"):b.win,{"touch-action":"none"}),b.css(b.rail,{"touch-action":"none"}),b.css(b.cursor,{"touch-action":"none"}),b.bind(b.win,"pointerdown",b.ontouchstart),b.bind(P,"pointerup",b.ontouchend),b.delegate(P,"pointermove",b.ontouchmove)):C.hasmstouch?(b.css(b.ispage?A("html"):b.win,{"-ms-touch-action":"none"}),b.css(b.rail,{"-ms-touch-action":"none"}),b.css(b.cursor,{"-ms-touch-action":"none"}),b.bind(b.win,"MSPointerDown",b.ontouchstart),b.bind(P,"MSPointerUp",b.ontouchend),b.delegate(P,"MSPointerMove",b.ontouchmove),b.bind(b.cursor,"MSGestureHold",function(e){e.preventDefault()}),b.bind(b.cursor,"contextmenu",function(e){e.preventDefault()})):C.cantouch&&(b.bind(b.win,"touchstart",b.ontouchstart,!1,!0),b.bind(P,"touchend",b.ontouchend,!1,!0),b.bind(P,"touchcancel",b.ontouchend,!1,!0),b.delegate(P,"touchmove",b.ontouchmove,!1,!0)),w.emulatetouch&&(b.bind(b.win,"mousedown",b.ontouchstart,!1,!0),b.bind(P,"mouseup",b.ontouchend,!1,!0),b.bind(P,"mousemove",b.ontouchmove,!1,!0)),!w.cursordragontouch&&(C.cantouch||w.emulatetouch)||(b.rail.css({cursor:"default"}),b.railh&&b.railh.css({cursor:"default"}),b.jqbind(b.rail,"mouseenter",function(){return!(!b.ispage&&!b.win.is(":visible"))&&(b.canshowonmouseevent&&b.showCursor(),void(b.rail.active=!0))}),b.jqbind(b.rail,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}),w.sensitiverail&&(b.bind(b.rail,"click",function(e){b.doRailClick(e,!1,!1)}),b.bind(b.rail,"dblclick",function(e){b.doRailClick(e,!0,!1)}),b.bind(b.cursor,"click",function(e){b.cancelEvent(e)}),b.bind(b.cursor,"dblclick",function(e){b.cancelEvent(e)})),b.railh&&(b.jqbind(b.railh,"mouseent))}),b.jqbind(b.railh,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}),w.sensitiverail&&(b.bind(b.railh,"click",function(e){b.doRailClick(e,!1,!0)}),b.bind(b.railh,"dblcli0)}),b.bind(b.cursorh,"click",function(e){b.cancelEvent(e)}),b.bind(b.cursorh,"dblclick",function(e){b.cancelEvent(e)})))),w.cursordragontouch&&(this.istouchcapable||C.cantouch)&&(b.bind(b.cursor,"touchstart",b.ontouchstartCursor),b.bind(b.cursor,"touchmove",b.ontouchmoveCursor),b.bind(b.cursor,"touchend",b.ontouchendCursor),b.cursorh&&b.bind(b.cursorh,"touchstart",function(e){b.ontouchstartCursor(e,!0)}),b.cursorh&&b.bind(b.cursorh,"touchmove",b.ontouchmoveCursor),b.cursorh&&b.bind(b.cursorh,"touchend",b.ontouchendCursor)),w.emulatetouch||C.isandroid||C.isios?(b.bind(C.hasmousecapture?b.win:P,"mouseup",b.ontouchend),b.onclick&&b.bind(P,"click",b.onclick),w.cursordragontouch?(b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mouseup",b.onmouseup),b.cursorh&&b.bind(b.cursorh,"mousedown",function(e){b.onmousedown(e,!0)}),b.cursorh&&b.bind(b.cursorh,"mouseup",b.onmouseup)):(b.bind(b.rail,"mousedown",function(e){e.preventDefault()}),b.railh&&b.bind(b.railh,"mousedown",function(e){e.preventDefault()}))):(b.bind(C.hasmousecapture?b.win:P,"mouseup",b.onmouseup),b.bind(P,"mousemove",b.onmousemove),b.onclick&&b.bind(P,"click",b.onclick),b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mouseup",b.onmouseup),b.railh&&(b.bind(b.cursorh,"mousedo0)}),b.bind(b.cursorh,"mouseup",b.onmouseup)),!b.ispage&&w.enablescrollonselection&&(b.bind(b.win[0],"mousedown",b.onselectionstart),b.bind(P,"mouseup",b.onselectionend),b.bind(b.cursor,"mouseup",b.onselectionend),b.cursorh&&b.bind(b.cursorh,"mouseup",b.onselectionend),b.bind(P,"mousemove",b.onselectiondrag)),b.zoom&&(b.jqbind(b.zoom,"mouseent!0}),b.jqbind(b.zoom,"mouselea()}))),w.enablemousewheel&&(b.isiframe||b.mousewheel(C.isie&&b.ispage?P:b.win,b.onmousewheel),b.mousewheel(b.rail,b.onmousewheel),b.railh&&b.mousewheel(b.railh,b.onmousewheelhr)),b.ispage||C.cantouch||/HTML|^BODY/.test(b.win[0].nodeName)||(b.win.attr("tabindex")||b.win.attr({tabindex:++I}),b.bind(b.win,"focus",function(e){T=b.getTarget(e).id||b.getTarget(e)||!1,b.hasfocus=!0,b.canshowonmouseevent&&b.noticeCursor()}),b.bind(b.win,"bl!1}),b.bind(b.win,"mouseent()}),b.bind(b.win,"mouselea()})),b.onkeypr)}},w.enablekeyboard&&b.bind(P,C.isopera&&!C.isopera12?"keypress":"keydown",b.onkeypress),b.bind(P,"keydo0)}),b.bind(P,"key1)}),b.bind(M,"bl!1}),b.bind(M,"resize",b.onscreenresize),b.bind(M,"orientationchange",b.onscreenresize),b.bind(M,"load",b.lazyResize),!C.ischrome||b.ispage||b.haswrapper||(p=b.win.attr("style"),g=parseFloat(b.win.css("width"))+1,b.win.css("width",g),b.synched("chromefp)})),b.onAttributeCha0)},w.enableobserver&&(b.isie11||!1===B||(b.observerbody=ne0)}),b.observerbody.observe(P.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),b.ispage||b.haswrapper||(v=b.win[0],!1!==B?(b.observer=nee)}),b.observer.observe(v,{childList:!0,characterData:!1,attributes:!0,subtree:!1}),b.observerremover=ne})}),b.observerremover.observe(v.parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(b.bind(v,C.isie&&!C.isie9?"propertychange":"DOMAttrModified",b.onAttributeChange),C.isie9&&v.attachEvent("onpropertychange",b.onAttributeChange),b.bind(v,"DOMNodeRemov()})))),!b.ispage&&w.boxzoom&&b.bind(M,"resize",b.resizeZoom),b.istextarea&&(b.bind(b.win,"keydown",b.lazyResize),b.bind(b.win,"mouseup",b.lazyResize)),b.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(e=function(){var t,e;b.iframexd=!1;try{(t="contentDocument"in this?this.contentDocument:this.contentWindow._doc).domain}catch(e){t=!(b.iframexd=!0)}if(b.iframexd)return"console"in M&&console.log("NiceScroll error: policy restriced iframe"),!0;b.forcescreen=!0,b.isiframe&&(b.iframe={doc:A(t),html:b.doc.contents().find("html")[0],body:b.doc.contents().find("body")[0]},b.getContentS)}},b.docscroll=A(b.iframe.body)),C.isios||!w.iframeautoresize||b.isiframe||(b.win.scrollTop(0),b.doc.height(""),e=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight),b.doc.height(e)),b.lazyResize(30),b.css(A(b.iframe.body),i),C.isios&&b.haswrapper&&b.css(A(t.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?b.bind(this.contentWindow,"scroll",b.onscroll):b.bind(t,"scroll",b.onscroll),w.enablemousewheel&&b.mousewheel(t,b.onmousewheel),w.enablekeyboard&&b.bind(t,C.isopera?"keypress":"keydown",b.onkeypress),C.cantouch?(b.bind(t,"touchstart",b.ontouchstart),b.bind(t,"touchmove",b.ontouchmove)):w.emulatetouch&&(b.bind(t,"mousedown",b.ontouchstart),b.bind(t,"mousemo0)}),w.grabcursorenabled&&C.cursorgrabvalue&&b.css(A(t.body),{cursor:C.cursorgrabvalue})),b.bind(t,"mouseup",b.ontouchend),b.zoom&&(w.dblclickzoom&&b.bind(t,"dblclick",b.doZoom),b.ongesturezoom&&b.bind(t,"gestureend",b.ongesturezoom))},this.doc[0].readyState&&"complete"===this.doc[0].readyState&&setTime1)},500),b.bind(this.doc,"load",e))},this.showCursor=function(e,t){var i;b.cursortimeout&&(clearTimeout(b.cursortimeout),b.cursortimeout=0),b.rail&&(b.autohidedom&&(b.autohidedom.stop().css({opacity:w.cursoropacitymax}),b.cursoractive=!0),b.rail.drag&&1==b.rail.drag.pt||(void 0!==e&&!1!==e&&(b.scroll.y=e/b.scrollratio.y|0),void 0!==t&&(b.scroll.x=t/b.scrollratio.x|0)),b.cursor.css({height:b.cursorheight,top:b.scroll.y}),b.cursorh&&(i=b.hasreversehr?b.scrollvaluemaxw-b.scroll.x:b.scroll.x,b.cursorh.css({width:b.cursorwidth,left:!b.rail.align&&b.rail.visibility?i+b.rail.width:i}),b.cursoractive=!0),b.zoom&&b.zoom.stop().css({opacity:w.cursoropacitymax}))},this.hideCur))},this.noticeCure)},this.getContentSize=b.isp)}}:b.haswrapper?function(){return{w:b.doc[0].offsetWidth,h:b.doc[0].offsetHeight}},this.onResb)},this.resize=b.onResize;var e)}this.onscreenres0)},this.lazyRes,b},this.jqbi)};var h=!(this.mousewheel=function(e,t,i){var n,o="jquery"in e?e[0]:e;"onwheel"in P.createElement("div")?b._bind(o,"wheel",t,i||!1):(u(o,n=void 0!==P.onmousewheel?"mousewheel":"DOMMouseScroll",t,i||!1),"DOMMouseScroll"==n&&u(o,"MozMousePixelScroll",t,i||!1))});if(C.haseventlistener){try{var p=Object.defineProperty({},"passive",{get:function(){h=!0}});M.addEventListener("test",null,p)}catch(e){}this.stopPropagat!1},this.cancelEv!1}}else Event.prototype.preventDefault=function(){this.returnValue=!1},Event.prototype.stopPropagat!0},M.constructor.prototype.addEventListener=P.constructor.prototype.addEventListener=Element.prototype.addEventListener=function(e,t,i){this.attachEvent("on"+e,t)},M.constructor.prototype.removeEventListener=P.constructor.prototype.removeEventListener=Element.prototype.removeEventListet)},this.cancelEv!1},this.stopPropagat!1};this.deleg))},this.undeleg))},this.b1)},this._b1)},this._unbn)},this.unbind)}},this.showRails=function(){return b.showRail().showRailHr()},this.showR,b},this.showRai,b},this.hideRa()},this.hideR,b},this.hideRai,b},this.show=function(){return b.hidden=!1,b.railslocked=!1,b.showRails()},this.h()},this.tog()},this.remll},this.scrollstart=function(e){return this.onscrollstart=e,b},this.scrollend=function(e){return this.onscrollend=e,b},this.scrollcancel=function(e){return this.onscrollcancel=e,b},this.zoomin=function(e){return this.onzoomin=e,b},this.zoom,b},this.isScrolla!1},this.getViewp!1},this.triggerScrollStart=function(e,t,i,n,o){var a;b.onscrollstart&&(a={type:"scrollstart",current:{x:e,y:t},request:{x:i,y:n},end:{x:b.newscrollx,y:b.newscrolly},speed:o},b.onscrollstart.call(b,a))},this.triggerScrollEnd=function(){var e,t,i;b.onscrollend&&(i={type:"scrollend",current:{x:e=b.getScrollLeft(),y:t=b.getScrollTop()},end:{x:e,y:t}},b.onscrollend.call(b,i))};var m=0,f=0,g=0,})}var k,x=!1;function S(e,t,i){var n,o;return!(i||!x)||(0===e.deltaMode?(n=0|-(e.deltaX*(w.mousescrollstep/54)),o=0|-(e.deltaY*(w.mousescrollstep/54))):1===e.deltaMode&&(n=-(e.deltaX*w.mousescrollstep)*50/80|0,o=-(e.deltaY*w.mousescrollstep)*50/80|0),t&&w.oneaxismousemode&&0===n&&o&&(n=o,o=0,i&&(n<0?b.getScrollLeft()>=b.page.maxw:b.getScrollLeft()<=0)&&(o=n,n=0)),b.isrtlmode&&(n=-n),y(n,o,i,!0)?void(i&&(x=!0)):(x=!1,e.stopImmediatePropagation(),e.preventDefault()))}this.onmousewh,n},this.onmousewhee)}},this.s,b},this.getTransitionSp|0},w.smoothscroll?b.ishwscroll&&C.hastransition&&w.usetransition&&w.smoothscroll?(k="",this.resetTransit")},this.prepareTransit,i},this.doScrollLeft=function(e,t){var i=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(i,e,t)},this.cursorupdate={running:!1,start:function(){var e,t=this;t.running||(t.running=!])},R(e))},stop:function(){this.running=!1}},this.doScrollx)},this.cancelScr,b},this.onScrollTransition1}}):(this.doScrollLeft=function(e,t){var i=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(e,i,t)},this.doScrollt)},this.doScrollPos=function(e,t,i){var n=b.getScrollTop(),o=b.getScrollLeft();((b.newscrolly-n)*(t-n)<0||(b.newscrollx-o)*(e-o)<0)&&b.cancelScroll();var a=!1;if(b.bouncescroll&&b.rail.visibility||(t<0?a=!(t=0):t>b.page.maxh&&(t=b.page.maxh,a=!0)),b.bouncescroll&&b.railh.visibility||(e<0?a=!(e=0):e>b.page.maxw&&(e=b.page.maxw,a=!0)),b.scrollrunning&&b.newscrolly===t&&b.newscrollx===e)return!0;b.newscrolly=t,b.newscrollx=e,b.dst={},b.dst.x=e-o,b.dst.y=t-n,b.dst.px=o,b.dst.py=n;var s=0|Math.sqrt(b.dst.x*b.dst.x+b.dst.y*b.dst.y),r=b.getTransitionSpeed(s);b.bzscroll={};var l=a?1:.58;b.bzscroll.x=new d(o,b.newscrollx,r,0,0,l,1),b.bzscroll.y=new d(n,b.newscrolly,r,0,0,l,1);U();var c=function(){var e;b.scrollrunning&&(e=b.bzscroll.y.getPos(),b.setScrollLeft(b.bzscroll.x.getNow()),b.setScrollTop(b.bzscroll.y.getNow()),e<=1?b.timer=R(c):(b.scrollrunning=!1,b.timer=0,b.triggerScrollEnd()))};b.scrollrunning||(b.triggerScrollStart(o,n,e,t,r),b.scrollrunning=!0,b.timer=R(c))},this.cancelScr,b}):(this.doScrollLeft=function(e,t){var i=b.getScrollTop();b.doScrollPos(e,i,t)},this.doScrollt)},this.doScroll})},this.cancelScroll=function(){}),this.doScrole)},this.doScrollLef0)},this.doScrole)},this.checkContentSe)},b.onscr})},b.bind(b.docscroll,"scroll",b.onscroll),this.doZoomIn=function(e){if(!b.zoomactive){b.zoomactive=!0,b.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],i=b.win[0].style;for(var n in t){var o=t[n];b.zoomrestore.style[o]=void 0!==i[o]?i[o]:""}b.zoomrestore.style.width=b.win.css("width"),b.zoomrestore.style.height=b.win.css("height"),b.zoomrestore.padding={w:b.win.outerWidth()-b.win.width(),h:b.win.outerHeight()-b.win.height()},C.isios4&&(b.zoomrestore.scrollTop=O.scrollTop(),O.scrollTop(0)),b.win.css({position:C.isios4?"absolute":"fixed",top:0,left:0,zIndex:E+100,margin:0});var a=b.win.css("backgroundColor");return""!==a&&!/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(a)||b.win.css("backgroundColor","#fff"),b.rail.css({zIndex:E+101}),b.zoom.css({zIndex:E+102}),b.zoom.css("backgroundPosition","0 -18px"),b.resizeZoom(),b.onzoomin&&b.onzoomin.call(b),b.cancelEvent(e)}},this.doZoome)},this.doZe)},this.resizeZoom=function(){var e;b.zoomactive&&(e=b.getScrollTop(),b.win.css({width:O.width()-b.zoomrestore.padding.w+"px",height:O.height()-b.zoomrestore.padding.h+"px"}),b.onResize(),b.setScrollTop(Math.min(b.page.maxh,e)))},this.init(),A.nicescroll.push(this)}var t,i,n,B=M.MutationObserver||M.WebKitMutationObserver||!1,U=Date.now||function(){return(new Date).getTime()},L={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:40,mousescrollstep:27,touchbehavior:!1,emulatetouch:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(i=P.currentScript||!!(t=P.getElementsByTagName("script")).length&&t[t.length-1],0<(n=i?i.src.split("?")[0]:"").split("/").length?n.split("/").slice(0,-1).join("/")+"/":""),preventmultitouchscrolling:!0,disablemutationobserver:!1,enableobserver:!0,scrollbarid:!1},o=!1,H=function(e){var f=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.re-1},this.upd=t},this.s-1},this.doSn()},this.doMomentum=function(e){var t=U(),i=e?t+e:f.lasttime,n=f.nc.getScrollLeft(),o=f.nc.getScrollTop(),a=f.nc.page.maxh,s=f.nc.page.maxw;f.speedx=0<s?Math.min(60,f.speedx):0,f.speedy=0<a?Math.min(60,f.speedy):0;var r=i&&t-i<=60;(o<0||a<o||n<0||s<n)&&(r=!1);var l,c,d,u,h,p=!(!f.speedy||!r)&&f.speedy,m=!(!f.speedx||!r)&&f.speedx;p||m?(50<(l=Math.max(16,f.steptime))&&(c=l/50,f.speedx*=c,f.speedy*=c,l=50),f.demulxy=0,f.lastscrollx=f.nc.getScrollLeft(),f.chkx=f.lastscrollx,f.lastscrolly=f.nc.getScrollTop(),f.chky=f.lastscrolly,d=f.lastscrollx,u=f.lastscrolly))})()):f.doSnapy(f.nc.getScrollLeft(),f.nc.getScrollTop())}},s=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e,t,i){var n=A.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.getScrollTop():s.call(e)},set:function(e,t){var i=A.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollTop(parseInt(t)):s.call(e,t),this}},e.fn.scrollTop=function(t){if(void 0!==t)return this.each(function(){var e=A.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollTop(parseInt(t)):s.call(A(this),t)});var e=this[0]&&A.data(this[0],"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollTop():s.call(this)};var l=e.fn.scrollLeft;A.cssHooks.pageXOffset={e)},is}},e.fn.scrollLeft=function(t){if(void 0!==t)return this.et)});var e=this[0]&&A.data(this[0],"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollLeft():l.call(thi])}(c.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPo)}}),e.fn.getNiceScr!1},(e.expr.pseudos||e.expr[":"]).nicescr")},A.fn.niceScroll=function(o,a){void 0!==a||"object"!=typeof o||"jquery"in o||(a=o,o=!1);var s=new c;return this.each(function(){var e,t=A(this),i=A.extend({},a);o&&(e=A(o),i.doc=1<e.length?A(o,t):e,i.win=t),!("doc"in i)||"win"in i||(i.win=t);var n=t.data("__nicescroll")||!1;n||(i.doc=i.doc||t,n=new r(i,t),t.data("__nicescroll",n)),s.push(n)}),1===s.length?s[0]:s},M.NiceScroll={getjQuery:function(){return e}},A.nicescroll||(A.nicescroll=new c,A.nicescroll.options=L)}),function(me,fe,gy)}(function(S){var p,e,f,t,g,T=!0,I=!1,v=null,y="width",b="height",j="top",E="left",A="bottom",P="right",M="center",O="shift",$={},_="qtip",m="data-hasqtip",u="data-qtip-id",n=["ui-widget","ui-tooltip"],w="."+_,o="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),h=_+"-fixed",C=_+"-default",s=_+"-focus",a=_+"-hover",k=_+"-disabled",r="_replacedByqTip",x="oldtitOWSER=aN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||I},(e=D.prototype).render=function(e){if(this.rendered||this.destroyed)return this;var i=this,t=this.options,n=this.cache,o=this.elements,a=t.content.text,s=t.content.title,r=t.content.button,l=t.position,c="."+this._id+" ",d=[];return S.attr(this.target[0],"aria-describedby",this._id),this.tooltip=o.tooltip=tooltip=S("<div/>",{id:this._id,class:[_,C,t.style.classes,_+"-pos-"+t.position.my.abbrev()].join(" "),width:t.style.width||"",height:t.style.height||"",tracking:"mouse"===l.target&&l.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":I,"aria-describedby":this._id+"-content","aria-hidden":T}).toggleClass(k,this.disabled).attr(u,this.id).data(_,this).appendTo(l.container).append(o.content=S("<div />",{class:_+"-content",id:this._id+"-content","aria-atomic":T})),this.rendered=-1,this.positioning=T,s&&(this._createTitle(),S.isFunction(s)||d.push(this._updateTitle(s,I))),r&&this._createButton(),S.isFunction(a)||d.push(this._updateContent(a,I)),this.rendered=T,this._setWidget(),S.each(t.evet)}),S.eact)}),this._assignEvents(),S.when.apply(S,d).t=I}),p.api[this.id]=this},e.destroy=function(e){if(this.destroyed)return this.target;function t(){var e,t;this.destroyed||(this.destroyed=T,t=(e=this.target).attr(x),this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),S.each(this.plug()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),e.removeData(_).removeAttr(u).removeAttr("aria-describedby"),this.options.suppress&&t&&e.attr("title",t).removeAttr(x),this._unbind(e),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=v,delete p.api[this.id])}return e!==T&&this.rendered?(tooltip.one("tooltiphidden",S.proxy(t,this)),this.triggering||this.hide()):t.call(this),this.target},t=e.checks={builtin:{"^i=n},"^prerendy)},"^content.text$":function(e,t,i){this._updateContent(i)},"^content.att))},"^content.titli)},"^content.buttoi)},"^content.title.(text|button)$":function(e,t,i){this.set("content."+t,i)},"^position.(my|at))},"^position.containei)},"^show.read))},"^style.classei)},"^style.width|heigi)},"^style.widget|content.title":function(){this._setWidget()},"^style.di)},"^events.(render|show|move|hide|focus|bluri)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjus()}}},e.:i};var N=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,B=/^prerender|show\.ready/i;e.set=function(o,e){if(this.destroyed)return this;var t,a=this.rendered,s=I,r=this.options;this.checks;return"string"==typeof o?(t=o,(o={})[t]=e):o=S.extend({},o),S.eace]}),R(r),this.positioning=T,S.each(o,S.proxy(F,this)),this.positioning=I,this.rendered&&0<this.tooltip[0].offsetWidth&&s&&this.reposition("mouse"===r.position.target?v:this.cache.event),this},e._update=function(e,t,i){var n=this,o=this.cache;return this.rendered&&e?(S.isFunction(e)&&(e=e.call(this.elements.target,o.event,this)||""),S.isFunction(e.then)?(o.waiting=T,e.tt)t)})):e===I||!e&&""!==e?I:(e.jquery&&0<e.length?t.children().detach().end().append(e.css({display:"block"})):t.html(e),o.waiting=T,(S.fn.imagesLoaded?t.imagesLoaded():S.Deferred().resolve(S([]))).done(function(e){o.waiting=I,e.length&&n.rendered&&0<n.tooltip[0].offsetWidth&&n.reposition(o.event,!e.length)}).promise())):I},e._updateContt)},e._updateTiI)},e._createTi()},e._removeTi))},e.reposition=function(e,t){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=T;var i,n,o=this.cache,a=this.tooltip,s=this.options.position,r=s.target,l=s.my,c=s.at,d=s.viewport,u=s.container,h=s.adjust,p=h.method.split(" "),m=a.outerWidth(I),f=a.outerHeight(I),g=0,v=0,y=a.css("position"),b={left:0,top:0},_=0<a[0].offsetWidth,w=e&&"scroll"===e.type,C=S(me),k=u[0].ownerDocument,x=this.mouse;if(S.isArray(r)&&2===r.length)c={x:E,y:j},b={left:r[0],top:r[1]};else if("mouse"===r&&(e&&e.pageX||o.event.pageX))c={x:E,y:j},e=!x||!x.pageX||!h.mouse&&e&&e.pageX?(!e||"resize"!==e.type&&"scroll"!==e.type?(!e||!e.pageX||"mousemove"!==e.type)&&(!h.mouse||this.options.show.distance)&&o.origin&&o.origin.pageX?o.origin:e:o.event)||e||o.event||x||{}:x,"static"!==y&&(b=u.offset()),k.body.offsetWidth!==(me.innerWidth||k.documentElement.clientWidth)&&(n=S(k.body).offset()),b={left:e.pageX-b.left+(n&&n.left||0),top:e.pageY-b.top+(n&&n.top||0)},h.mouse&&w&&(b.left-=x.scrollX-C.scrollLeft(),b.top-=x.scrollY-C.scrollTop());else{if("event"===r&&e&&e.target&&"scroll"!==e.type&&"resize"!==e.type?o.target=S(e.target):"event"!==r&&(o.target=S(r.jquery?r:elements.target)),r=o.target,0===(r=S(r).eq(0)).length)return this;r[0]===fe||r[0]===me?(g=BROWSER.iOS?me.innerWidth:r.width(),v=BROWSER.iOS?me.innerHeight:r.height(),r[0]===me&&(b={top:(d||r).scrollTop(),left:(d||r).scrollLeft()})):$.imagemap&&r.is("area")?i=$.imagemap(this,r,c,$.viewport?p:I):$.svg&&r[0].ownerSVGElement?i=$.svg(this,r,c,$.viewport?p:I):(g=r.outerWidth(I),v=r.outerHeight(I),b=r.offset()),i&&(g=i.width,v=i.height,n=i.offset,b=i.position),b=this.reposition.offset(r,b,u),(3.1<BROWSER.iOS&&BROWSER.iOS<4.1||4.3<=BROWSER.iOS&&BROWSER.iOS<4.33||!BROWSER.iOS&&"fixed"===y)&&(b.left-=C.scrollLeft(),b.top-=C.scrollTop()),(!i||i&&i.adjustable!==I)&&(b.left+=c.x===P?g:c.x===M?g/2:0,b.top+=c.y===A?v:c.y===M?v/2:0)}return b.left+=h.x+(l.x===P?-m:l.x===M?-m/2:0),b.top+=h.y+(l.y===A?-f:l.y===M?-f/2:0),$.viewport?(b.adjusted=$.viewport(this,b,s,g,v,m,f),n&&b.adjusted.left&&(b.left+=n.left),n&&b.adjusted.top&&(b.top+=n.top)):b.adjusted={left:0,top:0},this._trigger("move",[b,d.elem||d],e)&&(delete b.adjusted,t===I||!_||isNaN(b.left)||isNaN(b.top)||"mouse"===r||!S.isFunction(s.effect)?a.css(b):S.isFunction(s.effect)&&(s.effect.call(a,this,S.extend({},b)),a.qu()})),this.positioning=I),this},e.reposition.off,i};var U=(f=e.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,M).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var i=e.charAt(0);this.precedance="t"===i||"b"===i?"y":"x"}).protot")}function H(e){if(this.tooltip.hasClass(k))return I;clearTimeout(this.timers.show),clearTimeout(this.timers.hide);var t=S.proxy(function(){this.toggle(T,e)},this);0<this.options.show.delay?this.timers.show=setTimeout(t,this.options.show.delay):t()}function K(e){if(this.tooltip.hasClass(k))return I;var t=S(e.relatedTarget),i=t.closest(w)[0]===this.tooltip[0],n=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&"mouse"===this.options.position.target&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(i||n))try{e.preventDefault(),e.stopImmediatePropagation()}catch(e){}else{var o=S.pre)},this);0<this.options.hide.delay?this.timers.hide=setTimeout(o,this.options.hide.delay):o()}}function W(e){if(this.tooltip.hasClass(k)||!this.options.hide.inactive)return I;clearTimeout(this.timers.inactive),this.timers.inactive=setTimeout(S.proxy(function(){this.hide(e)},this),this.options.hide.inactie)}U.inve]},U.str+t},U.abb")},U.clY)},e.toggle=function(e,t){var i=this.cache,n=this.options,o=this.tooltip;if(t){if(/over|enter/.test(t.type)&&/out|leave/.test(i.event.type)&&n.show.target.add(t.target).length===n.show.target.length&&o.has(t.relatedTarget).length)return this;i.event=S.extend({},t)}if(this.waiting&&!e&&(this.hiddenDuringWait=T),!this.rendered)return e?this.render(1):this;if(this.destroyed||this.disabled)return this;var a,s,r=e?"show":"hide",l=this.options[r],c=(this.options[e?"hide":"show"],this.options.position),d=this.options.content,u=this.tooltip.css("width"),h=0<this.tooltip[0].offsetWidth,p=e||1===l.target.length,m=!t||l.target.length<2||i.target[0]===t.target;return(typeof e).search("boolean|number")&&(e=!h),(s=(a=!o.is(":animated")&&h===e&&m)?v:!!this._trigger(r,[90]))!==I&&e&&this.focus(t),!s||a||(S.attr(o[0],"aria-hidden",!e),e?(i.origin=S.extend({},this.mouse),S.isFunction(d.text)&&this._updateContent(d.text,I),S.isFunction(d.title)&&this._updateTitle(d.title,I),!g&&"mouse"===c.target&&c.adjust.mouse&&(S(fe).bind("mousemove."+_,this._storeMouse),g=T),u||o.css("width",o.outerWidth(I)),this.reposition(t,arguments[2]),u||o.css("width",""),l.solo&&("string"==typeof l.solo?S(l.solo):S(w,l.solo)).not(o).not(l.target).qtip("hide",S.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete i.origin,g&&!S(w+'[tracking="true"]:visible',l.solo).not(o).length&&(S(fe).unbind("mousemove."+_),g=I),this.blur(t)),after=S.pr")},this),l.effect===I||p===I?(o[r](),after()):S.isFunction(l.effect)?(o.stop(1,1),l.effect.call(o,this),o.queue("()})):o.fadeTo(90,e?1:0,after),e&&l.target.trigger("qtip-"+this.id+"-inactive")),this},e.show=function(e){return this.toggle(T,e)},e.he)},e.fois},e.bis},e.disais},e.enable=function(){return this.disable(I)},e._createBut})},e._updateBut()},e._setWide)},e._storeMop}},e._b))},e._unb))};var V=".}W)}),e._trig()},e._assignEvents=function(){var o=this.options,e=o.position,t=this.tooltip,i=o.show.target,n=o.hide.target,a=e.container,s=e.viewport,r=S(fe),l=(S(fe.body),S(me)),c=o.show.event?S.trim(""+o.show.event).split(" "):[],d=o.hide.event?S.trim(""+o.hide.event).split(" "):[],u=[];/mouse(out|leave)/i.test(o.hide.event)&&"window"===o.hide.leave&&this._bind(r,["mouseout","blue)}),o.hide.fixed?n=n.add(t.addClass(h)):/mouse(over|enter)/i.test(o.show.event)&&this._bind(n,"mouseleaw)}),-1<(""+o.hide.event).indexOf("unfocus")&&this._bind(a.closest("html"),["mousedown","touchstare)}),"number"==typeof o.hide.inactive&&(this._bind(i,"qtip-"+this.id+"-inactive",W),this._bind(n.add(t),p.inactiveEvents,W,"-inactive")),d=S.ma])}),this._bind(i,c,H),this._bind(n,d,K),this._bind(e)}),this._bind(i.add(t),"mousemoe)}),"mouse"===e.target&&e.adjust.mouse&&(o.hide.event&&this._bind(i,["mouseenter","mouseleavpe}),this._bind(r,"mousemoe)})),(e.adjust.resize||s.length)&&this._bind(S.event.special.resize?s:l,"resize",z),e.adjust.scroll&&this._bind(l.add(e.container),"scroll",z)},e._unassignEve")},(p=S.fn.qtip=function(e,t,i){var n=(""+e).toLowerCase(),o=v,a=S.makeArray(arguments).slice(1),s=a[a.length-1],r=this[0]?S.data(this[0],_):v;return!arguments.length&&r||"api"===n?r:"string"==typeof e?(this.e)}}),o!==v?o:this):"object"!=typeof e&&arguments.length?void 0:(r=R(S.extend(T,{},e)),p.bind.call(this,r,s))}).bind=function(l,c){return this.each(function(e){var i,n,o,a,s,t=S.isArray(l.id)?l.id[e]:l.id;if(t=!t||t===I||t.length<1||p.api[t]?p.nextid++:t,a=".qtip-"+t+"-create",(s=function(e,t,i){var n,o,a,s,r,l=S(fe.body),c=e[0]===fe?l:e,d=e.metadata?e.metadata(i.metadata):v,u="html5"===i.metadata.type&&d?d[i.metadata.name]:v,h=e.data(i.metadata.name||"qtipopts");try{h="string"==typeof h?S.parseJSON(h):h}catch(e){}if(o=(s=S.extend(T,{},p.defaults,i,"object"==typeof h?R(h):v,R(u||d))).position,s.id=t,"boolean"==typeof s.content.text){if(a=e.attr(s.content.attr),s.content.attr===I||!a)return I;s.content.text=a}if(o.container.length||(o.container=l),o.target===I&&(o.target=c),s.show.target===I&&(s.show.target=c),s.show.solo===T&&(s.show.solo=o.container.closest("body")),s.hide.target===I&&(s.hide.target=c),s.position.viewport===T&&(s.position.viewport=o.container),o.container=o.container.eq(0),o.at=new f(o.at,T),o.my=new f(o.my),e.data(_))if(s.overwrite)e.qtip("destroy");else if(s.overwrite===I)return I;return e.attr(m,t),s.suppress&&(r=e.attr("title"))&&e.removeAttr("title").attr(x,r).attr("title",""),n=new D(e,s,t,!!a),e.data(_,n),e.one("remove.qtip-"+t+" removeqtip.qtip-()}),n}(S(this),t,l))===I)return T;function ra)}if(s.disabled)return I;s.cache.event=S.extend({},e),s.cache.target=e?S(e.target):[ge],0<i.show.delay?(clearTimeout(s.timers.show),s.timers.show=setTimeout(t,i.show.delay),o.show!==o.hide&&n.hide.bind(o.hw)})):t()}p.api[t]=s,i=s.options,S.eacs)}),n={show:i.show.target,hide:i.hide.target},o={show:S.trim(""+i.show.event).replace(/ /g,a+" ")+a,hide:S.trim(""+i.hide.event).replace(/ /g,a+" ")+a},/mouse(over|enter)/i.test(o.show)&&!/mouse(out|leave)/i.test(o.hide)&&(o.hide+=" mouseleave"+a),n.show.bind("mousemove=T}),n.show.bind(o.show,r),(i.show.ready||i.prerender)&&r(c)})},p.api={},S.each({as)},cl,)}}),S.ui||(S["cleanData"+r]=S.cleanData,S.cleanDs)}),p.version="2.1.1",p.nextid=0,p.inactiveEvents=o,p.zindex=12e3,p.defaults={prerender:I,id:I,overwrite:T,suppress:T,content:{text:T,attr:"title",title:I,button:I},position:{my:"top left",at:"bottom right",target:I,container:I,viewport:I,adjust:{x:0,y:0,mouse:T,scroll:T,resize:T,method:"flipinvert flipinvert"},eff})}},show:{target:I,event:"mouseenter",effect:T,delay:90,solo:I,ready:I,autofocus:I},hide:{target:I,event:"mouseleave",effect:T,delay:0,fixed:I,inactive:I,leave:"window",distance:I},style:{classes:"",widget:I,width:I,height:I,def:T},events:{render:v,move:v,show:v,hide:v,toggle:v,visible:v,hidden:v,focus:v,blur:v}};var Y,G="margin",J="border",Q="color",X="background-color",Z="transparent",ee=" !important",te=!!fe.createElement("canvas").getContext,ie=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123451)}var oe={},ae=["Webkit","O","Moz","m)}te||(create>'}),S.extend(re.prototype,{i()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensiht},_useTi))},_parseCor,e},_parseWi|0},_parseRad|0},_invalidCol:n},_parseColo,s},_calculateSize:function(e){var t,i,n="y"===e.precedance,o=this.options[n?"height":"width"],a=this.options[n?"width":"height"],s="c"===e.abbrev(),r=o*(s?.5:1),l=Math.pow,c=Math.round,d=Math.sqrt(l(r,2)+l(a,2)),u=[this.border/r*d,this.border/a*d];return u[2]=Math.sqrt(l(u[0],2)-l(this.border,2)),u[3]=Math.sqrt(l(u[1],2)-l(this.border,2)),i=[c((t=(d+u[2]+u[3]+(s?0:u[0]))/d)*o),c(t*a)],n?i:i.reverse()},_calculate)]},creer},update:function(e,t){if(!this.enabled)return this;this.qtip.elements;var i,n,o,a,s,r,l,c=this.element,d=c.children(),u=this.options,h=this.size,p=u.mimic,m=Math.round;e=e||(this.qtip.cache.corner||this.corner),p===I?p=e:((p=new f(p)).precedance=e.precedance,"inherit"===p.x?p.x=e.x:"inherit"===p.y?p.y=e.y:p.x===p.y&&(p[e.precedance]=e[e.precedance])),n=p.precedance,"x"===e.precedance?this._swapDimensions():this._resetDimensions(),(i=this.color=this._parseColours(e))[1]!==Z?(l=this.border=this._parseWidth(e,e[e.precedance]),u.border&&l<1&&(i[0]=i[1]),this.border=l=u.border!==T?u.border:l):this.border=l=0,a=this._calculateTip(p),r=this.size=this._calculateSize(e),c.css({width:r[0],height:r[1],lineHeight:r[1]+"px"}),s="y"===e.precedance?[m(p.x===E?l:p.x===P?r[0]-h[0]-l:(r[0]-h[0])/2),m(p.y===j?r[1]-h[1]:0)]:[m(p.x===E?r[0]-h[0]:0),m(p.y===j?l:p.y===A?r[1]-h[1]-l:(r[1]-h[1])/2)],te?(d.attr(y,r[0]).attr(b,r[1]),(o=d[0].getContext("2d")).restore(),o.save(),o.clearRect(0,0,3e3,3e3),o.fillStyle=i[0],o.strokeStyle=i[1],o.lineWidth=2*l,o.translate(s[0],s[1]),o.beginPath(),o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]),o.lineTo(a[4],a[5]),o.closePath(),l&&("border-box"===tooltip.css("background-clip")&&(o.strokeStyle=i[0],o.stroke()),o.strokeStyle=i[1],o.stroke()),o.fill()):(a="m"+a[0]+","+a[1]+" l"+a[2]+","+a[3]+" "+a[4]+","+a[5]+" xe",s[2]=l&&/^(r|b)/i.test(e.string())?8===BROWSER.ie?2:1:0,d.css({coordsize:h[0]+l+" "+(h[1]+l),antialias:""+(-1<p.string().indexOf(M)),left:s[0]-s[2]*Number("x"===n),top:s[1]-s[2]*Number("y"===n),width:h[0]+l,height:h[1]+l}).e))})),t!==I&&this.calculate(e)},calculate:function(a){if(!this.enabled)return I;var s,r,e,l=this,c=this.qtip.elements,t=this.element,d=this.options.offset,u=(this.qtip.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,s=a.precedance,r=this._calculateSize(a),e=[a.x,a.y],"x"===s&&e.reverse(),S.eac))}),u[a[s]]-=r["x"===s?0:1],t.css({margin:"",top:"",bottom:"",left:"",right:""}).css(u),u},reposition:function(e,t,i,n){var o,a,s,r,l,c,d,u,h,p;this.enabled&&(o=t.cache,a=this.corner.clone(),s=i.adjusted,l=(r=t.options.position.adjust.method.split(" "))[0],c=r[1]||r[0],d={left:I,top:I,x:0,y:0},h={},this.corner.fixed!==T&&(l===O&&"x"===a.precedance&&s.left&&a.y!==M?a.precedance="x"===a.precedance?"y":"x":l!==O&&s.left&&(a.x=a.x===M?0<s.left?E:P:a.x===E?P:E),c===O&&"y"===a.precedance&&s.top&&a.x!==M?a.precedance="y"===a.precedance?"x":"y":c!==O&&s.top&&(a.y=a.y===M?0<s.top?j:A:a.y===j?A:j),a.string()===o.corner.string()||o.cornerTop===s.top&&o.cornerLeft===s.left||this.update(a,I)),(u=this.calculate(a,s)).right!==ge&&(u.left=-u.right),u.bottom!==ge&&(u.top=-u.bottom),u.user=this.offset,(d.left=l===O&&!!s.left)&&(a.x===M?h[G+"-left"]=d.x=u[G+"-left"]-s.left:(p=u.right!==ge?[s.left,-u.left]:[-s.left,u.left],(d.x=Math.max(p[0],p[1]))>p[0]&&(i.left-=s.left,d.left=I),h[u.right!==ge?P:E]=d.x)),(d.top=c===O&&!!s.top)&&(a.y===M?h[G+"-top"]=d.y=u[G+"-top"]-s.top:(p=u.bottom!==ge?[s.top,-u.top]:[-s.top,u.top],(d.y=Math.max(p[0],p[1]))>p[0]&&(i.top-=s.top,d.top=I),h[u.bottom!==ge?A:j]=d.y)),this.element.css(h).toggle(!(d.x&&d.y||a.x===M&&d.y||a.y===M&&d.x)),i.left-=u.left.charAt?u.user:l!==O||d.top||!d.left&&!d.top?u.left:0,i.top-=u.top.charAt?u.user:c!==O||d.left||!d.left&&!d.top?u.top:0,o.cornerLeft=s.left,o.cornerTop=s.top,o.corner=a.clone())},dest()}}),(Y=$.tip=function(e){return new re(e,e.options.style.tip)}).initialize="render",Y.sanit))},t.tip={"^position.my|style.tip.(corner|mimic|border()},"^style.tip.(height|width()},"^content.title|style.(classes|widget)$":function(){this.update()}},S.extend(T,p.defaults,{style:{tip:{corner:T,mimic:I,width:6,height:6,border:T,offset:0}}});var le,ce,de="qtip-modal",ue="."e)}ce=new(ce=function(){var c,d,u,h=this,o()}function t(e){var t,i,n;u.is(":visible")&&(t=S(e.target),i=c.tooltip,((n=t.closest(w)).length<1?I:parseInt(n[0].style.zIndex,10)>parseInt(i[0].style.zIndex,10))||t.closest(w)[0]===i[0]||p(t),e.target,o[o.length-1])}S.extend(h,{i,h},update:function(e){o=(c=e).options.show.modal.stealfocus!==I?e.tooltip.find("*").filter(function(){return function(e){if(S.expr[":"].focusable)return S.expr[":"].focusable;var t,i,n,o=!isNaN(S.attr(e,"tabindex")),a=e.nodeName&&e.nodeName.toLowerCase();return"area"===a?(i=(t=e.parentNode).name,!(!e.href||!i||"map"!==t.nodeName.toLowerCase())&&(!!(n=S("img[usemap=#"+i+"]")[0])&&n.is(":visible"))):/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a&&e.href||o}(this)}):[]},toggle:function(e,t,i){S(fe.body);var n=e.tooltip,o=e.options.show.modal,a=o.effect,s=t?"show":"hide",r=u.is(":visible"),l=S(ue).filter(":visible:not(:animated)").not(n);return h.update(e),t&&o.stealfocus!==I&&p(S(":focus")),u.toggleClass("blurs",o.blur),t&&u.css({left:0,top:0}).appendTo(fe.body),u.is(":animated")&&r===t&&d!==I||!t&&l.length||(u.stop(T,I),S.isFunction(a)?a.call(u,t):a===I?u[s]():u.fadeTo(parseInt(i,10)||90,t?()}),t||u.qu()}),d=t,c.destroyed&&(c=v)),h}}),h.init()}),S.extend(he.prototype,{init:function(e){var a=e.tooltip;if(!this.options.on)return this;e.elements.overlay=ce.elem,a.addClass(de).css("z-index",$.modal.zindex+S(ue).length),e._bind(a,["tooltipshow","tooltiphide"],function(e,t,i){var n=e.originalEvent;if(e.target===a[0])if(n&&"tooltiphide"===e.type&&/mouse(leave|enter)/.test(n.type)&&S(n.relatedTarget).closest(overlay[0]).length)try{e.preventDefault()}catch(e){}else n&&(!n||n.solo)||this.toggle(e,"tooltipshow"===e.type,i)},this._ns,this),e._bind(a,"tooltipfoc}}},this._ns,this),e._bind(a,"tooltiphie)},this._ns,this)},togi)},destay}}),(le=$.mol)}).sanit))},le.zindex=p.zindex-200,le.initialize="render",t.modal={"^show.modal.(on|blurh)}},S.extend(T,p.defaults,{show:{modal:{on:I,effect:T,blur:T,stealfocus:T,escape:T}}}),$.viewport=function(e,w,t,i,n,o,a){var s,C,r,l=t.target,c=e.elements.tooltip,k=t.my,x=t.at,d=t.adjust,u=d.method.split(" "),h=u[0],p=u[1]||u[0],S=t.viewport,T=t.container,m=e.cache,$=e.plugins.tip,f={left:0,top:0};if(!S.jquery||l[0]===me||l[0]===fe.body||"none"===d.method)return f;function g(e,t,i,n,o,a,s,r,l){var c=w[o],d=k[e],u=x[e],h=i===O,p=-T.offset[o]+S.offset[o]+S["scroll"+o],m=d===o?l:d===a?-l:-l/2,f=u===o?r:u===a?-r:-r/2,g=$&&$.size&&$.size[s]||0,v=$&&$.corner&&$.corner.precedance===e&&!h?g:0,y=p-c+v,b=c+l-S[s]-p+v,_=m-(k.precedance===e||d===k[t]?f:0)-(u===M?r/2:0);return h?(_=(d===o?1:-1)*m-(v=$&&$.corner&&$.corner.precedance===t?g:0),w[o]+=0<y?y:0<b?-b:0,w[o]=Math.max(-T.offset[o]+S.offset[o]+(v&&$.corner[e]===M?$.offset:0),c-_,Math.min(Math.max(-T.offset[o]+S.offset[o]+S[s],c+_),w[o]))):(n*="flipinvert"===i?2:0,0<y&&(d!==o||0<b)?(w[o]-=_+n,C.invert(e,o)):0<b&&(d!==a||0<y)&&(w[o]-=(d===M?-_:_)+n,C.invert(e,a)),w[o]<p&&-w[o]>b&&(w[o]=c,C=k.clone())),w[o]-c}return s="fixed"===c.css("position"),S={elem:S,width:S[0]===me?S.width():S.outerWidth(I),height:S[0]===me?S.height():S.outerHeight(I),scrollleft:s?0:S.scrollLeft(),scrolltop:s?0:S.scrollTop(),offset:S.offset()||{left:0,top:0}},T={elem:T,scrollLeft:T.scrollLeft(),scrollTop:T.scrollTop(),offset:T.offset()||{left:0,top:0}},"shift"===h&&"shift"===p||(C=k.clone()),f={left:"none"!==h?g("x","y",h,d.x,E,P,y,i,o):0,top:"none"!==p?g("y","x",p,d.y,j,A,b,n,a):0},C&&m.lastClass!==(r=_+"-pos-"+C.abbrev())&&c.removeClass(e.cache.lastClass).addClass(e.cache.lastClass=r),f},$.polys={polygon:function(e,t){for(var i,n,o,a={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:I},s=0,r=[],l=1,c=1,d=0,u=0,s=e.length;s--;)(i=[parseInt(e[--s],10),parseInt(e[s+1],10)])[0]>a.position.right&&(a.position.right=i[0]),i[0]<a.position.left&&(a.position.left=i[0]),i[1]>a.position.bottom&&(a.position.bottom=i[1]),i[1]<a.position.top&&(a.position.top=i[1]),r.push(i);if(n=a.width=Math.abs(a.position.right-a.position.left),o=a.height=Math.abs(a.position.bottom-a.position.top),"c"===t.abbrev())a.position={left:a.position.left+a.width/2,top:a.position.top+a.height/2};else{for(;0<n&&0<o&&0<l&&0<c;)for(n=Math.floor(n/2),o=Math.floor(o/2),t.x===E?l=n:t.x===P?l=a.width-n:l+=Math.floor(n/2),t.y===j?c=o:t.y===A?c=a.height-o:c+=Math.floor(o/2),s=r.length;s--&&!(r.length<2);)d=r[s][0]-a.position.left,u=r[s][1]-a.position.top,(t.x===E&&l<=d||t.x===P&&d<=l||t.x===M&&(d<l||d>a.width-l)||t.y===j&&c<=u||t.y===A&&u<=c||t.y===M&&(u<c||u>a.height-c))&&r.splice(s,1);a.position={left:r[0][0],top:r[0][1]}}return a},r}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},elliI}},cirn)}},$.svg=function(e,t,n,o){for(var a,s,r,l=S(fe),c=t[0],d={};!c.getBBox;)c=c.parentNode;if(!c.getBBox||!c.parentNode)return I;switch(c.nodeName){case"rect":s=$.svg.toPixel(c,c.x.baseVal.value,c.y.baseVal.value),r=$.svg.toPixel(c,c.x.baseVal.value+c.width.baseVal.value,c.y.baseVal.value+c.height.baseVal.value),d=$.polys.rect(s[0],s[1],r[0],r[1],n);break;case"ellipse":case"circle":s=$.svg.toPixel(c,c.cx.baseVal.value,c.cy.baseVal.value),d=$.polys.ellipse(s[0],s[1],(c.rx||c.r).baseVal.value,(c.ry||c.r).baseVal.value,n);break;case"line":case"polygon":case"polyline":for(points=c.points||[{x:c.x1.baseVal.value,y:c.y1.baseVal.value},{x:c.x2.baseVal.value,y:c.y2.baseVal.value}],d=[],i=-1,len=points.numberOfItems||points.length;++i<len;)next=points.getItem?points.getItem(i):points[i],d.push.apply(d,$.svg.toPixel(c,next.x,next.y));d=$.polys.polygon(d,n);break;default:if(a=c.getBBox(),mtx=c.getScreenCTM(),root=c.farthestViewportElement||c,!root.createSVGPoint)return I;point=root.createSVGPoint(),point.x=a.x,point.y=a.y,tPoint=point.matrixTransform(mtx),d.position={left:tPoint.x,top:tPoint.y},point.x+=a.width,point.y+=a.height,tPoint=point.matrixTransform(mtx),d.width=tPoint.x-d.position.left,d.height=tPoint.y-d.position.top}return d.position.left+=l.scrollLeft(),d.position.top+=l.scrollTop(),d},$.svg.toPixel=function(e,t,i){var n,o,a=e.getScreenCTM(),s=e.farthestViewportElement||e;return s.createSVGPoint?((o=s.createSVGPoint()).x=t,o.y=i,[(n=o.matrixTransform(a)).x,n.y]):I},$.imagemap=function(e,t,i,n){t.jquery||(t=S(t));var o,a,s,r=t.attr("shape").toLowerCase().replace("poly","polygon"),l=S('img[usemap="#'+t.parent("map").attr("name")+'"]'),c=t.attr("coords").split(",");if(!l.length)return I;if("polygon"===r)result=$.polys.polygon(c,i);else{if(!$.polys[r])return I;for(s=-1,len=c.length,a=[];++s<len;)a.push(parseInt(c[s],10));result=$.polys[r].apply(this,a.concat(i))}return(o=l.offset()).left+=Math.ceil((l.outerWidth(I)-l.width())/2),o.top+=Math.ceil((l.outerHeight(I)-l.height())/2),result.position.left+=o.left,result.position.top+=o.top,resue)}S.extend(pe.prototype,{_scr")},i()},adjustBGIFrame:function(){var e,t=this.qtip.tooltip,i={height:t.outerHeight(I),width:t.outerWidth(I)},n=this.qtip.plugins.tip,o=this.qtip.elements.tip,a=parseInt(t.css("borderLeftWidth"),10)||0;a={left:-a,top:-a},n&&o&&(a[(e="x"===n.corner.precedance?[y,E]:[b,j])[1]]-=o[e[0]]()),this.bgiframe.css(a).css(i)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return self;var e,t,i,n,o=this.qtip.tooltip,a=this.qtip.options.style,s=this.qtip.options.position.container;return this.qtip.drawing=1,a.height&&o.css(b,a.height),a.width?o.css(y,a.width):(o.css(y,"").appendTo(this.redrawContainer),(t=o.width())%2<1&&(t+=1),e=-1<((i=o.css("maxWidth")||"")+(n=o.css("minWidth")||"")).indexOf("%")?s.width()/100:0,t=(i=(-1<i.indexOf("%")?e:1)*parseInt(i,10)||t)+(n=(-1<n.indexOf("%")?e:1)*parseInt(n,10)||0)?Math.min(Math.max(t,n),i):t,o.css(y,Math.round(t)).appendTo(s)),this.drawing=0,self},dests)}}),($.:I}).initialize="render",t.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(){function e(e,t){this.element=e,this.options=C.extend({},i,t),this.globals={},this.$container=C(e),this.errorCheck()&&this.init()}var C,b,o,i,a;C=jQuery,b=window,document,i={selector:"*",enableDrag:!0,enableCrossDrop:!0,enableResize:!0,enableTrash:!(a="shapeshift"),align:"center",colWidth:null,columns:null,minColumns:1,autoHeight:!0,maxHeight:null,minHeight:100,gutterX:10,gutterY:10,paddingX:10,paddingY:10,animated:!0,animateOnInit:!1,animationSpeed:225,animationThreshold:100,dragClone:!1,deleteClone:!0,dragRate:100,dragWhitelist:"*",crossDropWhitelist:"*",cutoffStart:null,cutoffEnd:null,handle:!1,cloneClass:"ss-cloned-child",activeClass:"ss-active-child",draggedClass:"ss-dragged-child",placeholderClass:"ss-placeholder-child",originalContainerClass:"ss-original-container",currentContainerClass:"ss-current-container",previousContainerClass:"ss-previous-container"},e.prototype.errorCheck=function(){var e=this.options,t=!1;return null===e.colWidth&&0===this.$container.children(e.selector).length&&(t=!0,console.error("Shapeshift ERROR: option colWidth must be specified if Shapeshift is initialized with no active children.")),!t},e.prototype.i()},e.prototype.createEvents=function(){var i=this,e=(this.options,this.$container);return e.off("ss-arrange").on("ss-arrange",function(e,t){return null==t&&(t=!1),i.render(!1,t)}),e.off("ss-rearrange").on("ss-rearran0)}),e.off("ss-setTargetPosition").on("ss-setTargetPosition",function(){return i.setTargetPosition()}),e.off("ss-destroy").on("ss-destroy",function(){return i.destroy()})},e.prototype.setGlobals=function(){return this.globals.animated=this.options.animateOnInit},e.prototype.afterIed},e.prototype.setIdentifr)},e.prototype.enableFeatu()},e.prototype.setActiveChildren=function(){for(var e,t,i,n,o,a,s,r=this.options,l=this.$container.children(r.selector),c=r.activeClass,d=l.length,u=n=0;0<=d?n<d:d<n;u=0<=d?++n:--n)C(l[u]).addClass(c);for(this.setParsedChildren(),t=r.columns,s=[],u=o=0,a=this.parsedChildren.length;0<=a?o<a:a<o;u=0<=a?++o:--o)e=this.parsedChildren[u].colspan,i=r.minColumns,t<e&&i<e?(r.minColumns=e,s.push(console.error("Shapeshift ERROR: There are child elements that have a larger colspan than the minimum columns set through options.\noptions.minColumns has been set to "+e))):s.push(void 0);return s},e.prototype.setParsedChildren=function(){for(var e,t,i,n=this.$container.find("."+this.options.activeClass).filter(":visible"),o=n.length,a=[],s=i=0;0<=o?i<o:o<i;s=0<=o?++i:--i)t={i:s,el:e=C(n[s]),colspan:parseInt(e.attr("data-ss-colspan"))||1,height:e.outerHeight()},a.push(t);return this.parsedChildren=a},e.prototype.gridInit=function(){var e,t,i,n=this.options.gutterX;return 1<=this.options.colWidth?this.globals.col_width=this.options.colWidth+n:(i=((t=this.parsedChildren[0]).el.outerWidth()-((e=t.colspan)-1)*n)/e,this.globals.col_width=i+n)},e.prototype.rent)},e.prototype.setGridColumns=function(){var e,t,i=this.globals,n=this.options,o=i.col_width,a=n.gutterX,s=n.paddingX,r=this.$container.innerWidth()-2*s,l=n.minColumns,c=n.columns||Math.floor((r+a)/o);switch(l&&c<l&&(c=l),i.columns=c,(e=this.parsedChildren.length)<c&&(c=e),i.child_offset=s,n.align){case"center":return t=c*o-a,i.child_offset+=(r-t)/2;case"right":return t=c*o-a,i.child_offset+=r-t}},e.prototype.arrange=function(e,t){var i,n,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y,b;for(e&&this.setParsedChildren(),d=this.globals,f=this.options,n=this.$container,r=this.getPositions(),y=(g=this.parsedChildren).length,o=d.animated&&y<=f.animationThreshold,a=f.animationSpeed,c=f.draggedClass,u=b=0;0<=y?b<y:y<b;u=0<=y?++b:--b)i=g[u].el,s=r[u],(h=i.hasClass(c))&&(v=f.placeholderClass,i=i.siblings("."+v)),o&&!h?i.stop(!0,!1).animate(s,a,function(){}):i.css(s);if(t&&(o?setTimeout(function(){return n.trigger("ss-drop-complete")},a):n.trigger("ss-drop-complete")),n.trigger("ss-arranged"),f.autoHeight)return l=d.container_height,p=f.maxHeight,(m=f.minHeight)&&l<m?l=m:p&&p<l&&(l=p),n.height(l)},e.prototype.getPositions=function(n){var h,c,o,l,e,d,a,t,i,s,u,r,p,m,f,g,v,y=this;for(null==n&&(n=!0),l=this.globals,t=this.options,d=t.gutterY,i=t.paddingY,o=t.draggedClass,s=this.parsedChildren,f=s.length,h=[],a=g=0,v=l.columns;0<=v?g<v:v<g;a=0<=v?++g:--g)h.push(i);return p=function(e){var t,i,n,o=e.col,a=e.colspan,s=e.col*l.col_width+l.child_offset,r=h[o];if(u[e.i]={left:s,top:r},h[o]+=e.height+d,1<=a){for(n=[],t=i=1;1<=a?i<a:a<i;t=1<=a?++i:--i)n.push(h[o+t]=h[o]);return n}},c=function(e){for(var t,i,n,o,a,s,r,l=h.length-e.colspan+1,c=h.slice(0).splice(0,l),d=void 0,u=s=0;0<=l?s<l:l<s;u=0<=l?++s:--s){for(t=y.lowestCol(c,u),i=e.colspan,n=h[t],o=!0,a=r=1;1<=i?r<i:i<r;a=1<=i?++r:--r)if(n<h[t+a]){o=!1;break}if(o){d=t;break}}return d},m=[],r=function(){for(var e,t,i,n,o,a,s=[],r=n=0,l=m.length;0<=l?n<l:l<n;r=0<=l?++n:--n)(i=m[r]).col=c(i),0<=i.col&&(p(i),s.push(r));for(a=[],t=o=s.length-1;0<=o;t=o+=-1)e=s[t],a.push(m.splice(e,1));return a},u=[],function(){var e,t,i=[];for(a=t=0;0<=f?t<f:f<t;a=0<=f?++t:--t)e=s[a],n||!e.el.hasClass(o)?(1<e.colspan?e.col=c(e):e.col=y.lowestCol(h),void 0===e.col?m.push(e):p(e),i.push(r())):i.push(void 0)}(),t.autoHeight&&(e=h[this.highestCol(h)]-d,l.container_height=e+i),u},e.prototype.enableDragNDrop=function(){var n,o,a,s,r=this,e=this.options,t=this.$container,i=e.activeClass,l=e.draggedClass,c=e.placeholderClass,d=e.originalContainerClass,u=e.currentContainerClass,h=e.previousContainerClass,p=e.deleteClone,m=e.dragRate,f=e.dragClone,g=e.cloneClass,v=o=n=s=a=null,y=!1;if(e.enableDrag&&t.children("."+i).filter(e.dragWhitelist).draggable({addClasses:!1,containment:"document",handle:e.handle,zIndex:9999,start:function(e,t){var i;return v=C(e.target),f&&(n=v.clone(!0).insertBefore(v).addClass(g)),v.addClass(l),i=v.prop("tagName"),o=C("<"+i+" class='"+c+"' style='height: "+v.height()+"px; width: "+v.width()+"px'></"+i+">"),v.parent().addClass(d).addClass(u),s=v.outerHeight()/2,a=v.outerWidth()/2},drag:function(e,t){return y||f&&p&&C("."+u)[0]===C("."+d)[0]||(o.remove().appendTo("."+u),C("."+u).trigger("ss-setTargetPosition"),y=!0,b.setTime!1},m)),t.position.left=e.pageX-v.parent().offset().left-a,t.position.top=e.pageY-v.parent().offset().top-s},stop:function(){var e=C("."+d),t=C("."+u),i=C("."+h);return v.removeClass(l),C("."+c).remove(),f&&(p&&C("."+u)[0]===C("."+d)[0]?(n.remove(),C("."+u).trigger("ss-rearrange")):n.removeClass(g)),e[0]===t[0]?t.trigger("ss-rearranged",v):(e.trigger("ss-removed",v),t.trigger("ss-added",v)),e.trigger("ss-arrange").removeClass(d),t.trigger("ss-arrange",!0).removeClass(u),i.trigger("ss-arrange").removeClass(h),v=o=null}}),e.enableCrossDrop)return t.droppable({accept:e.crossDropWhitelist,tolerance:"intersect",over:function(e){return C("."+h).removeClass(h),C("."+u).removeClass(u).addClass(h),C(e.target).addClass(u)},drop:function(e,t){var i,n,o;if(r.options.enableTrash)return n=C("."+d),i=C("."+u),o=C("."+h),v=C(t.helper),i.trigger("ss-trashed",v),v.remove(),n.trigger("ss-rearrange").removeClass(d),i.trigger("ss-rearrange").removeClass(u),o.trigger("ss-arrange").removeClass(h)}})},e.prototype.setTargetPosition=function(){var e,t,i,n,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y,b,_,w=this.options;if(w.enableTrash)return d=this.options.placeholderClass,C("."+d).remove();if(l=w.draggedClass,t=(e=C("."+l)).parent(),c=this.parsedChildren,v=(o=this.getPositions(!1)).length,p=e.offset().left-t.offset().left+this.globals.col_width/2,m=e.offset().top-t.offset().top+e.height()/2,f=9999999,g=0,1<v){for(s=w.cutoffStart+1||0,a=w.cutoffEnd||v,u=_=s;s<=a?_<a:a<_;u=s<=a?++_:--_)(n=o[u])&&(b=p-n.left,y=m-n.top,0<b&&0<y&&(r=Math.sqrt(y*y+b*b))<f&&(f=r,(g=u)===v-1&&b>c[u].height/2&&g++));g===c.length?(i=c[g-1].el,e.insertAfter(i)):(i=c[g].el,e.insertBefore(i))}else 1!==v||(n=o[0]).left<p?this.$container.append(e):this.$container.prepend(e);return this.arrange(!0),t[0]!==e.parent()[0]?(h=w.previousContainerClass,C("."+h).trigger("ss-rearrange")):void 0},e.prototype.enableResize=function(){var e=this,t=this.options.animationSpeed,i=!1,n="resize."+this.identifier;return C(b).on(n,function(){if(!i)return i=!0,setTimeout(function(){return e.render()},t/3),setTimeout(function(){return e.render()},t/3),setTime()},t/3)})},e.prototype.lowestCol=function(e,t){var i,n,o,a;for(null==t&&(t=0),o=e.length,i=[],n=a=0;0<=o?a<o:o<a;n=0<=o?++a:--a)i.push([e[n],n]);return i.s,i}),i[t][1]},e.prototype.higheste)},e.prototype.destroy=function(){var e,t,i=this.$container;return i.off("ss-arrange"),i.off("ss-rearrange"),i.off("ss-setTargetPosition"),i.off("ss-destroy"),t=this.options.activeClass,e=i.find("."+t),this.options.enableDrag&&e.draggable("destroy"),this.options.enableCrossDrop&&i.droppable("destroy"),e.removeClass(t),i.removeClass(this.identifier)},o=e,C.fn[a]=function(n){return this.each(function(){var e,t,i=null!=(t=C(this).attr("class").match(/shapeshifted_container_\w+/))?t[0]:void 0;return i&&(e="resize."+i,C(b).off(e),C(this).removeClass(i)),C.data(this,"plugin_"+a,new o(this,n))})}}.call(this),function(w){w.fn.dcSlick=function(e){var b={classWrapper:"dc-slick",classContent:"dc-slick-content",idWrapper:"dc-slick-"+w(this).index(),location:"left",align:"top",offset:"100px",speed:"slow",tabText:"Click",classTab:"tab",classOpen:"slick-open",classClose:"slick-close",classToggle:"slick-toggle",autoClose:!0,loadOpen:!1,onLoad:function(){},beforeOpen:function(){},beforeClose:function(){}},e=w.extend(b,e),_=this;return _.each(function(e){var t=b.classWrapper,i=_.html();_.css("float","left");_.width();_.empty();var n='<div class="'+b.classTab+'"><span>'+b.tabText+"</span></div>";w(this).hide();var o=b.idWrapper,a='<div id="'+o+'" class="'+t+'">'+n+'<div class="'+b.classContent+'">'+i+"</div></div>";w("body").append(a);var u=w("#"+o),s=w("."+b.classTab,u);s.css({position:"absolute"});var r=w("."+b.classOpen),l=w("."+b.classClose),c=w("."+b.classToggle),d=u.height();u.css("float","left");var h=u.outerWidth()+"px";u.css("float","none");var p=u.outerHeight(),m=p-d,f=p+"px",g=w(window).height();function v(){w("."+t).css({zIndex:1e4}),u.css({zIndex:10001}),"bottom"==b.location&&u.animate({marginBottom:"-=5px"},"fast").animate({marginBottom:0},b.speed),"top"==b.location&&u.animate({marginTop:"-=5px"},"fast").animate({marginTop:0},b.speed),"left"==b.location&&u.animate({marginLeft:"-=5px"},"fast").animate({marginLeft:0},b.speed),"right"==b.location&&u.animate({marginRight:"-=5px"},"fast").animate({marginRight:0},b.speed),u.addClass("active"),b.beforeOpen.call(this)}function y(){if(u.css({zIndex:1e4}),u.hasClass("active")){var e={marginBottom:"-"+f};switch(b.location){case"top":e={marginTop:"-"+f};break;case"left":e={marginLeft:"-"+h};break;case"right":e={marginRight:"-"+h}}u.removeClass("active").animate(e,b.speed)}b.beforeClose.call(this)}!function(e){var t=w("."+b.classContent,e);w(e).addClass(b.location).addClass("align-"+b.align).css({position:"fixed",zIndex:1e4});u.css("border-top-width"),u.css("border-right-width"),u.css("border-bottom-width"),u.css("border-left-width");var i=w("."+b.classTab,u),n=i.outerWidth(!0)+"px",o=i.outerHeight(!0),a=o+"px",s=t.height(),r=t.outerHeight(!0)-s,l=g-o;l<p&&(s=l-m-r,f=l+"px");t.css({height:s+"px"});var c={marginLeft:"-"+h,top:b.offset},d={marginRight:"-"+n};"right"==b.location&&(c={marginRight:"-"+h,top:b.offset},d={marginLeft:"-"+n});"top"==b.location&&(c={marginTop:"-"+f},d={marginBottom:"-"+a},d="left"==b.align?(c={marginTop:"-"+f,left:b.offset},{marginBottom:"-"+a,left:0}):(c={marginTop:"-"+f,right:b.offset},{marginBottom:"-"+a,right:0}));"bottom"==b.location&&(c={marginBottom:"-"+f},d={marginTop:"-"+a},d="left"==b.align?(c={marginBottom:"-"+f,left:b.offset},{marginTop:"-"+a,left:0}):(c={marginBottom:"-"+f,right:b.offset},{marginTop:"-"+a,right:0}));w(e).css(c),i.css(d),b.onLoad.call(this)}(u),1==b.autoClose&&w("body").mouseup(function(e){u.hasClass("active")&&(w(e.target).parents("#"+b.idWrapper).length||w(e.target).hasClass(b.classOpen)||w(e.target).hasClass(b.classToggle)||y())}),0==w(c).length&&s.click(function(e){(u.hasClass("active")?y:v)()}),w(r).cl()}),w(l).click(function(e){u.hasClass("active")&&y(),e.preventDefault()}),w(c).click(function(e){(u.hasClass("active")?y:v)(),e.preventDefault()}),1==b.loadOpen&&v()})}}(jQuery);var SlideDeckSkin={},SlideDeckLens={},JSON;function ob_post_Constructor(){this.xmlstring="",this.objRoot=null,this.pendingRequests=new Array,this.ResetParams=ob_post_ResetParams,this.AddParam=ob_post_AddParam,this.DoSend=ob_post_DoSend,this.post=ob_post_Post,window.onbeforeunload=ob_post_AbortAll,this.ResetParams()}function ob_post_InitPbx(){var e=null;if(window.XMLHttpRequest)try{e=new window.XMLHttpRequest}catch(e){}else try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return e}function ob_post_ResetParams(){try{this.xmlstring=new ActiveXObject("Microsoft.XMLDOM")}catch(e){try{this.xmlstring=document.implementation.createDocument("","",null)}catch(e){}}var e;this.xmlstring&&(this.objRoot=this.xmlstring.createElement("ob_post"),e=this.xmlstring.createProcessingInstruction("xml",'version="1.0"'),this.xmlstring.insertBefore(e,this.xmlstring.childNodes[0]),this.xmlstring.appendChild(this.objRoot))}function ob_post_AddParam(e,t){var i,n;this.xmlstring&&((i=this.xmlstring.createElement("param")).setAttribute("name",e),this.objRoot.appendChild(i),n=this.xmlstring.createCDATASection(""+t),i.appendChild(n))}function ob_post_Post(e,t,i){var n,o=ob_post_InitPbx();if(o&&(o.open("POST",e||"DataProcessing4.aspx",null!=i),o.setRequestHeader("OBPostReq","true"),this.objRoot.setAttribute("eventname",t),null!=i&&(o.onreadystatechange=function(){return"function"==typeof ob_post_ReadyState?ob_post_ReadyState(o,i):null}),this.DoSend(o),this.ResetParams(),null==i))try{return ob_post_ProcessResponse(o)}catch(e){"postbackerror"==e.name.toLowerCase()&&void 0!==e.responseText&&0<e.responseText.length?window.confirm(e.name+": "+e.message+"\r\n\r\nDo you want to view the returned error page?")&&(null!=(n=window.open("","mywindow","menubar=1,resizable=1,width=600,height=400"))?(n.document.open(),n.document.write(e.responseText),n.document.close(),n.focus()):alert("The window could not be opened. If you have any popup blockers active, try deactivating it.")):alert(e.name+": "+e.message)}}function ob_post_ReadyState(e,t){if(4==e.readyState)try{var i=ob_post_ProcessResponse(e);if(e.aborted)return;"function"==typeof t&&t(i)}catch(e){var n;"postbackerror"==e.name.toLowerCase()&&void 0!==e.responseText&&0<e.responseText.length?window.confirm(e.name+": "+e.message+"\r\n\r\nDo you want to view the returned error page?")&&((n=window.open("","mywindow","menubar=1,resizable=1,width=600,height=400")).document.open(),n.document.write(e.responseText),n.document.close(),n.focus()):alert(e.name+": "+e.message),"function"==typeof t&&t(null,e)}}function ob_post_DoSend(t){"function"==typeof t.setRequestHeader&&t.setRequestHeader("Content-Type","text/xml");try{var e=(e=(new XMLSerializer).serializeToString(this.xmlstring)).replace(/<\?xml(\s+)version="1.0">/gi,"");t.send(e)}catch(e){t.send(this.objRoot.xml)}this.pendingRequests.push(t)}function ob_post_ProcessResponse(t){for(var e=0;e<ob_post.pendingRequests.length;e++)if(ob_post.pendingRequests[e]==t){ob_post.pendingRequests.splice(e,1);break}if(t.aborted)return null;try{t.status}catch(e){if(t.aborted)return null;ob_post_ThrowException("PostbackError","There was an error connecting to the server.")}if(t.status&&200==t.status){var i,n=t.responseText;return null==t.responseXML||null!=(i=t.responseXML.documentElement)&&(n="pbext"!=i.nodeName?t.responseText:(window.eval(i.firstChild.firstChild.nodeValue),null!=i.lastChild.firstChild?i.lastChild.firstChild.nodeValue:"")),n}var o=new Error("When requesting the file, the server returned: "+t.status+" - "+t.statusText);throw o.responseText=t.responseText,o.name="PostbackError",o.type="PostbackError",o}function ob_post_AbortAll(){for(var e=0;e<ob_post.pendingRequests.length;e++)try{ob_post.pendingRequests[e].aborted=!0,ob_post.pendingRequests[e].onreadystatechange=function(){},ob_post.pendingRequests[e].abort()}catch(e){}}function ob_post_ThrowException(e,t){var i=new Error(t);throw i.name=e,i.type=e,i}!function(O){window.SlideDeck=function(w,e){var C=this,w=O(w);void 0!==window.slideDeck2Version&&window.slideDeck2Version,void 0!==window.slideDeck2Distribution&&window.slideDeck2Distribution;this.options={speed:500,transition:"swing",start:1,activeCorner:!0,index:!0,scroll:!0,keys:!0,autoPlay:!1,autoPlayInterval:5e3,hideSpines:!1,cycle:!1,slideTransition:"slide",touchThreshold:{x:50,y:30},touch:!0,controlProgress:!1,useResponsive:!0,slideWidth:1200},this.classes={slide:"slide",spine:"spine",label:"label",index:"index",active:"active",indicator:"indicator",activeCorner:"activeCorner",disabled:"disabled",vertical:"slidesVertical",previous:"previous",next:"next"},this.current=1,this.deck=w,this.former=-1,this.spines=w.children("dt"),this.slides=w.children("dd"),this.controlTo=1,this.session=[],this.disabledSlides=[],this.pauseAutoPlay=!1,this.isLoaded=!1;var r,k,x,S,T,$,t=navigator.userAgent.toLowerCase();for(var i in this.browser={chrome:!!t.match(/chrome/),chromeFrame:!(!t.match(/msie/)||!t.match(/chrome/)),chromeiOS:!!t.match(/crios/),msie:!!t.match(/msie/),msie6:!(!t.match(/msie 6/)||t.match(/msie 7|8/)),msie7:!!t.match(/msie 7/),msie8:!!t.match(/msie 8/),msie9:!!t.match(/msie 9/),msie10:!!t.match(/msie 10/),msie11:!!t.match(/trident\/7\.0/),firefox:!(!t.match(/firefox/)||t.match(/trident\/7\.0/)),firefox2:!(!t.match(/firefox\/2\./)||t.match(/trident\/7\.0/)),firefox30:!(!t.match(/firefox\/3\.0/)||t.match(/trident\/\7.0/)),opera:!!t.match(/opera/),safari:!(!t.match(/safari/)||t.match(/chrome|crios/))},this.browser)!0===this.browser[i]&&(this.browser._this=i);!0!==this.browser.chrome||this.browser.chromeFrame||(this.browser.version=t.match(/chrome\/([0-9\.]+)/)[1]),!0===this.browser.firefox&&(this.browser.version=t.match(/firefox\/([0-9\.]+)/)[1]),!0===this.browser.msie&&(this.browser.version=t.match(/msie ([0-9\.]+)/)[1]),!0===this.browser.msie11&&(this.browser.version="11.0"),!0===this.browser.opera&&(this.browser.version=t.match(/version\/([0-9\.]+)/)[1]),!0!==this.browser.safari||this.browser.chromeiOS||(this.browser.version=t.match(/version\/([0-9\.]+)/)[1]),!0===this.browser.chromeiOS&&(this.browser.version=t.match(/crios\/([0-9\.]+)/)[1]),this.looping=!1;var p="";switch(C.browser._this){case"firefox":case"firefox3":p="-moz-";break;case"chrome":case"safari":p="-webkit-";break;case"opera":p="-o-"}function I(e){if(C.browser.msie&&!C.browser.msie8&&!C.browser.msie9&&!C.browser.msie10&&!C.browser.msie11){var t=e.css("background-color"),i=t;"transparent"==i?t="#ffffff":i.match("#")&&i.length<7&&(t="#"+i.substr(1,1)+i.substr(1,1)+i.substr(2,1)+i.substr(2,1)+i.substr(3,1)+i.substr(3,1));var n={r:(t=t.replace("#","")).substr(0,2),g:t.substr(2,2),b:t.substr(4,2)},o="#",a="01234567890ABCDEF";for(var s in n)n[s]=Math.max(0,parseInt(n[s],16)-1),n[s]=a.charAt((n[s]-n[s]%16)/16)+a.charAt(n[s]%16),o+=n[s];e.find("."+C.classes.index).css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1) chroma(color="+o+")",backgroundColor:o})}}function j(){"undefined"!=typeof Cufon&&Cufon.DOM.ready(function(){if(void 0!==C.options.cufonRefresh){var e=[];"string"==typeof C.options.cufonRefresh?e.push(C.options.cufonRefresh):e=C.options.cufonRefresh;for(var t=0;t<e.length;t++)Cufon.refresh(e[t])}var i;!1===C.options.hideSpines&&(i=0,C.browser.msie8&&!C.browser.chromeFrame&&(i=Math.floor((O(C.spines[0]).outerWidth()-O(O(C.spines[0]).find("cufon")[0]).height())/2)),(C.browser.safari||C.browser.chrome||C.browser.chromeFrame)&&document.doctype.publicId.toLowerCase().match(/transitional/)&&(i=Math.floor((O(C.spines[0]).outerHeight()-O(O(C.spines[0]).find("cufon")[0]).height())/2)),C.spines.find(">cufon").css("margin-top",i))})}function E(){if(!0===C.options.controlProgress)for(var e=0;e<C.spines.length;e++)e<C.controlTo?O(C.spines[e]).removeClass(C.classes.disabled):O(C.spines[e]).addClass(C.classes.disabled)}function A(e,t){var i,n={display:"block"};switch(n[p+"transform-origin"]="50% 50%",n[p+"transform"]="",t<C.current?(i=t*S,!0===C.options.hideSpines&&(i=t==C.current-1?0:0-(C.options.start-t-1)*w.width())):(i=t*S+T,!0===C.options.hideSpines&&(i=(t+1-C.options.start)*w.width())),e){case"stack":n.zIndex=C.slides.length-t,n.left=0;break;case"fade":var o=C.slides.eq(C.current-1);n.zIndex=C.slides.length-t,n.left=0,C.slides.not(o).css({opacity:0});break;case"flip":n.zIndex=C.slides.length-t,n.left=0,t!=C.current-1&&(n[p+"transform"]="scaleY(0)");break;case"flipHorizontal":n.zIndex=C.slides.length-t,n.left=0,t!=C.current-1&&(n[p+"transform"]="scaleX(0)");break;case"slide":default:n.left=i,n.zIndex=1}return C.slides.eq(t).css(p+"transition","").css(n),i}function m(e){var t=[];switch("function"==typeof C.options.complete&&t.push(function(){C.options.complete(C)}),typeof e){case"function":t.push(function(){e(C)});break;case"object":t.push(function(){e.complete(C)})}return P.track(C.current),function(){C.looping=!1;for(var e=0;e<t.length;e++)t[e](C)}}function n(e,t){var i,n,o,a;i=e,i=Math.min(C.slides.length,Math.max(1,i)),-1!=O.inArray(i,C.disabledSlides)&&(i=(i<C.current?l:c)(i)),((e=i)<=C.controlTo||!0!==C.options.controlProgress)&&!1===C.looping&&(n=!0,e<C.current&&(n=!1),o=[C.classes.active,C.classes.next,C.classes.previous].join(" "),C.former=C.current,C.current=e,"function"==typeof C.options.before&&C.options.before(C),void 0!==t&&"function"==typeof t.before&&t.before(C),C.current!=C.former&&(C.spines.removeClass(o),C.slides.removeClass(o),w.find("."+C.classes.activeCorner).hide(),C.spines.eq(C.current-2).addClass(C.classes.previous),C.spines.eq(C.current).addClass(C.classes.next),a="slide",void 0!==d[C.options.slideTransition]&&(a=C.options.slideTransition),d[a](e,t,n)))}function o(o,s,e){var r,l=this,c=(o=O(o)).children();"DL"==o[0].nodeName&&(c=o.children("dd"),r=o.children("dt").hide());var t,d=c.length,u=o.parents("dd.slide"),a=o.parent(),h=u.innerHeight(),p=100;if(s.deck.find("."+s.classes.activeCorner).length&&(p=s.deck.find("."+s.classes.activeCorner).css("z-index")-1),this.navParent=null,this.navChildren=null,this.current=0,this.slides=c,this.options={speed:500,scroll:!0,continueScrolling:s.options.continueScrolling},"object"==typeof e)for(var i in e)this.options[i]=e[i];function m(e,t,i){l.current=e,"function"==typeof l.options.before&&l.options.before(l),"object"==typeof i&&"function"==typeof i.before&&i.before(l);var n=l.options.speed;void 0!==t&&(n=0),n=parseInt(n,10),u.find("ul."+l.classes.navContainer+" li."+l.classes.arrow).stop().animate({top:O(l.navChildren[l.current]).position().top+"px"},n),l.navChildren.removeClass("active"),O(l.navChildren[l.current]).addClass("active"),o.stop().animate({top:0-l.current*h+"px"},{duration:n,easing:s.options.transition,complete:function(){"function"==typeof l.options.complete&&l.options.complete(l),"object"==typeof i?"function"==typeof i.complete&&i.complete(l):"function"==typeof i&&i(s)}})}function n(){if(!u.find("."+l.classes.navContainer).length){var e=!0!==s.browser.msie||s.browser.msie9||s.browser.msie10||s.browser.msie11?O(s.spines[0]).outerHeight():O(s.spines[0]).outerWidth();!0===s.options.hideSpines&&(e=0),o.css({position:"absolute",zIndex:p-1,top:"0px",left:e,listStyleType:"none",padding:"0px",margin:"0px",width:"100%",height:h*d});parseInt(c.css("padding-top"),10);parseInt(c.css("padding-right"),10),parseInt(c.css("padding-bottom"),10),parseInt(c.css("padding-left"),10);var t={top:parseInt(c.css("border-top-width"),10),right:parseInt(c.css("border-right-width"),10),bottom:parseInt(c.css("border-bottom-width"),10),left:parseInt(c.css("border-left-width"),10)};for(var i in t)isNaN(t[i])&&(t[i]=0);var n=h;o.width(),t.right,t.left;c.each(function(e,t){O(t).css({listStyleType:"none",position:"absolute",top:e*h,width:"100%",height:n}).addClass(l.classes.prefix+"_"+(e+1))}),a.css({overflow:"hidden"}),function(){var e=document.createElement("UL");e.className=l.classes.navContainer,e.style.position="absolute",e.style.zIndex=p,e.style.listStyleType="none";for(var t=0;t<d;t++){var i=document.createElement("LI");i.className="nav_"+(t+1)+(0===t?" active":""),i.style.listStyleType="none";var n=document.createElement("A");c[t].id?n.href="#"+c[t].id:n.href="#"+(t+1),n.className="nav_"+(t+1);var o="Nav "+(t+1);void 0!==r&&(o=r.eq(t).html()),n.innerHTML=o,i.appendChild(n),e.appendChild(i)}var a=document.createElement("LI");a.className=l.classes.arrow,a.style.top=0,a.appendChild(document.createTextNode(" ")),e.appendChild(a),u.append(e),l.navChildren=u.find("."+e.className+" li"),u.find("."+e.className+" li a").click(function(e){e.preventDefault(),s.pauseAutoPlay=!0,m(this.className.match("nav_([0-9]+)")[1]-1)})}(),void 0!==O.event.special.mousewheel&&o.bind("mousewheel",function(e,t){if(!1!==l.options.scroll){var i=e.detail?e.detail:e.wheelDelta;void 0===i&&(i=0-t);var n=!1;if(O(e.originalTarget).parents(l.deck).length&&-1!=O.inArray(e.originalTarget.nodeName.toLowerCase(),["input","select","option","textarea"])&&(n=!0),!0!==n){var o,a=!1;if(!0===l.options.continueScrolling&&(l.current+1==1?o=!0:l.current+1==l.slides.length&&(a=!0)),0<i){if(e.preventDefault(),s.pauseAutoPlay=!0,a)return s.next(),!1;l.next()}else{if(e.preventDefault(),s.pauseAutoPlay=!0,o)return s.prev(),!1;l.prev()}}}})}}this.classes={navContainer:"verticalSlideNav",arrow:"arrow",prefix:"verticalSlide"},this.goTo=function(e,t,i){e=Math.min(d-1,Math.max(0,e-1)),t=Math.min(s.slides.length-1,Math.max(0,e)),O(s.slides[t]).find("."+this.classes.navContainer+" a:eq("+e+")").addClass(s.classes.active).siblings().removeClass(s.classes.active),m(e,i)},this.next=function(e){m(Math.min(d-1,l.current+1),void 0,e)},this.prev=function(e){m(Math.max(0,l.current-1),void 0,e)},this.snapTo=function(e,t){m(Math.max(0,Math.min(d-1,e)),!0,t)},0<h?n():t=setInterval(function(){o=O(o),c=o.children(),d=c.length,u=o.parents("dd.slide"),a=o.parent(),0<(h=u.innerHeight())&&(clearInterval(t),n())},20)}var a,P={timestamp:function(){var e=new Date,t=e.getUTCFullYear()+"-"+e.getUTCMonth()+"-"+e.getUTCDate()+" "+e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds(),i=0-e.getTimezoneOffset()/60,n=Math.floor(i);return t+n+":"+(n!=i?60*(i-n):"00")},track:function(e){0!==C.session.length&&C.session[C.session.length-1].slide==e||C.session.push({slide:e,timestamp:this.timestamp()})}},s=function(){O.inArray(w.css("position"),["position","absolute","fixed"])&&w.css("position","relative"),w.css("overflow","hidden");for(var a,s,r,t,i,n,e=0;e<C.slides.length;e++){var o,l=O(C.slides[e]);C.spines.length>e&&(o=O(C.spines[e]));parseInt(l.css("padding-top"),10);var c=parseInt(l.css("padding-right"),10),d=(parseInt(l.css("padding-bottom"),10),parseInt(l.css("padding-left"),10)),u={top:parseInt(l.css("border-top-width"),10),right:parseInt(l.css("border-right-width"),10),bottom:parseInt(l.css("border-bottom-width"),10),left:parseInt(l.css("border-left-width"),10)};for(var h in u)u[h]=isNaN(u[h])?0:u[h];e<C.current&&e==C.current-1&&(!0!==C.options.hideSpines&&o.addClass(C.classes.active),l.addClass(C.classes.active)),C.slide_width=T-d-c-u.left-u.right;var p,m,f,g={position:"absolute",height:k+"px",width:C.options.slideWidth+"px",margin:0,paddingLeft:"0px"},v=A(C.options.slideTransition,e);if(l.css(g).addClass(C.classes.slide).addClass(C.classes.slide+"_"+(e+1)),!0!==C.options.hideSpines){var y={top:parseInt(o.css("padding-top"),10),right:parseInt(o.css("padding-right"),10),bottom:parseInt(o.css("padding-bottom"),10),left:parseInt(o.css("padding-left"),10)};for(var h in y)y[h]<10&&("left"==h||"right"==h)&&(y[h]=10);var b=y.top+"px "+y.right+"px "+y.bottom+"px "+y.left+"px",_={position:"absolute",zIndex:3,display:"block",left:v,width:k-y.left-y.right+"px",height:x+"px",padding:b,rotation:"270deg","-webkit-transform":"rotate(270deg)","-webkit-transform-origin":$+"px 0px","-moz-transform":"rotate(270deg)","-moz-transform-origin":$+"px 0px","-o-transform":"rotate(270deg)","-o-transform-origin":$+"px 0px",textAlign:"right"};C.browser.msie9||C.browser.msie10||C.browser.msie11||(_.top=C.browser.msie?0:k-$+"px",_.marginLeft=(C.browser.msie?0:0-$)+"px","rtl"==document.getElementsByTagName("html")[0].dir.toLowerCase()&&!0===C.browser.msie8&&(_.marginLeft=0-k+2*$+"px"),_.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"),o.css(_).addClass(C.classes.spine).addClass(C.classes.spine+"_"+(e+1)),(C.browser.msie9||C.browser.msie10||C.browser.msie11)&&(o[0].style.msTransform="rotate(270deg)",o[0].style.msTransformOrigin=Math.round(parseInt(w[0].style.height,10)/2)+"px "+Math.round(parseInt(w[0].style.height,10)/2)+"px")}else void 0!==o&&o.hide();e==C.slides.length-1&&(l.addClass("last"),!0!==C.options.hideSpines&&o.addClass("last")),!0===C.options.activeCorner&&!1===C.options.hideSpines&&((p=document.createElement("DIV")).className=C.classes.activeCorner+" "+C.classes.spine+"_"+(e+1),o.after(p),o.next("."+C.classes.activeCorner).css({position:"absolute",top:"25px",left:v+S+"px",overflow:"hidden",zIndex:"20000"}).hide(),o.hasClass(C.classes.active)&&o.next("."+C.classes.activeCorner).show()),!0!==C.options.hideSpines&&((m=document.createElement("DIV")).className=C.classes.index,!1!==C.options.index&&(f="boolean"!=typeof C.options.index?C.options.index[e%C.options.index.length]:""+(e+1),m.appendChild(document.createTextNode(f))),o.append(m),o.find("."+C.classes.index).css({position:"absolute",zIndex:2,display:"block",width:x+"px",height:x+"px",textAlign:"center",bottom:(C.browser.msie||C.browser.msie11?0:0-$)+"px",left:(C.browser.msie||C.browser.msie11?5:20)+"px",rotation:"90deg","-webkit-transform":"rotate(90deg)","-webkit-transform-origin":$+"px 0px","-moz-transform":"rotate(90deg)","-moz-transform-origin":$+"px 0px","-o-transform":"rotate(90deg)","-o-transform-origin":$+"px 0px"}),(C.browser.msie9||C.browser.msie10||C.browser.msie11)&&(o.find("."+C.classes.index)[0].style.msTransform="rotate(90deg)"),I(o))}0!=C.options.useResponsive&&0!=M||(!0!==C.options.hideSpines&&C.spines.bind("click",function(e){e.preventDefault(),C.goTo(C.spines.index(this)+1)}),O(document).bind("keydown",function(e){!1!==C.options.keys&&-1==O(e.target).parents().index(C.deck)&&(39==e.keyCode?(C.pauseAutoPlay=!0,C.next()):37==e.keyCode&&(C.pauseAutoPlay=!0,C.prev()))}),void 0!==O.event.special.mousewheel&&w.bind("mousewheel",function(e,t){if(!1!==C.options.scroll&&(o=e,a=!1,void 0!==C.verticalSlides&&void 0!==C.vertical().options&&!0===C.vertical().options.scroll&&0<O(o.target).parents("."+C.classes.vertical).length&&(a=!0),!a)){var i=e.detail?e.detail:e.wheelDelta;void 0===i&&(i=0-t);var n=!1;if(O(e.originalTarget).parents(C.deck).length&&-1!=O.inArray(e.originalTarget.nodeName.toLowerCase(),["input","select","option","textarea"])&&(n=!0),!0!==n)if(0<i){switch(C.options.scroll){case"stop":e.preventDefault();break;case!0:default:(C.current<C.slides.length||!0===C.options.cycle)&&e.preventDefault()}C.pauseAutoPlay=!0,C.next()}else{switch(C.options.scroll){case"stop":e.preventDefault();break;case!0:default:1==C.current&&!0!==C.options.cycle||e.preventDefault()}C.pauseAutoPlay=!0,C.prev()}}var o,a}),!0!==C.browser.msie&&!1!==C.options.touch&&(a={x:0,y:0},s={x:0,y:0},r=C.options.touchThreshold,w[0].addEventListener("touchstaeY},!1),w[0].addEventListener("touchmove",function(e){e.preventDefault(),s.x=e.targetTouches[0].pageX,s.y=e.targetTouches[0].pageY},!1),w[0].addEventListener("touchend",function(e){var t=a.x-r.x,i=a.x+r.x,n=a.y-r.y,o=a.y+r.y;0!=s.x&&(s.x<=t?(C.pauseAutoPlay=!0,C.next()):s.x>=i&&(C.pauseAutoPlay=!0,C.prev())),0!=s.y&&(s.y<=n?(C.pauseAutoPlay=!0,C.vertical().next()):s.y>=o&&(C.pauseAutoPlay=!0,C.vertical().prev())),a={x:0,y:0},s={x:0,y:0}},!1)),O(C.spines[C.current-2]).addClass(C.classes.previous),O(C.spines[C.current]).addClass(C.classes.next),j(),E(),P.track(C.current),i=t=!1,n=function(){var e;(t=!1)===C.pauseAutoPlay&&!0===C.options.autoPlay&&(void 0!==C.vertical()&&C.vertical().navChildren&&C.vertical().current+1!=C.vertical().slides.length&&(t=!0),!(e=!0)!==C.options.cycle||C.current!=C.slides.length||!0===t&&C.vertical().current+1!==C.vertical().slides.length||(e=!1),!1===e?C.pauseAutoPlay=!0:!0===t?(C.vertical().current+2==C.vertical().slides.length&&(t=!1,i=C.current),C.vertical().next()):1==C.slides.length&&C.current==C.slides.length?!1!==i&&(C.resetVertical(i,!1),i=!1):(-1!=C.former&&void 0!==C.verticalSlides[C.former]&&void 0!==C.verticalSlides[C.former].navChildren&&C.resetVertical(C.former+1),C.next(function(e){!1!==i&&(e.resetVertical(i),i=!1)}))),setTimeout(n,C.options.autoPlayInterval)},setTimeout(n,C.options.autoPlayInterval),C.isLoaded=!0)},l=function(e){return e=Math.max(1,e-1),-1!=O.inArray(e,C.disabledSlides)&&(e=1==e?1:l(e)),e},c=function(e){return e=Math.min(C.slides.length,e+1),-1!=O.inArray(e,C.disabledSlides)&&(e=e==C.slides.length?C.current:c(e)),e},d={fade:function(e,t,i){var n=C.slides.eq(C.current-1);C.slides.not(n).stop().animate({opacity:0},C.options.spe"}),n.css({display:"block",opacity:0}).addClass(C.classes.active).stop().animate({opacity:1},C.options.speed,function(){this.style.display="block",m(t)()})},flip:function(e,t,i,n){var o=C.options.speed/1e3/2,a=C.slides.eq(C.former-1),s=C.slides.eq(C.current-1);void 0===n&&(n=!1);var r=1==n?"X":"Y",l={position:"absolute",zIndex:999,top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",opacity:0},c=a.find(".slidedeck-slide-mask");c.length&&c.remove(),a.append('<div class="slidedeck-slide-mask mask-out"></div>'),c=a.find(".slidedeck-slide-mask").css(l);var d=s.find(".slidedeck-slide-mask");d.length&&c.remove(),s.addClass(C.classes.active).append('<div class="slidedeck-slide-mask mask-in"></div>'),l.opacity=1,d=s.find(".slidedeck-slide-mask").css(l);var u={};u[p+"transition"]="",u[p+"transform-origin"]="50% 50%",u[p+"transform"]="scale"+r+"(0)",C.slides.not(a).css(u);var h={};h[p+"transform-origin"]="50% 50%",h[p+"transform"]="scale"+r+"(0)",a.css(p+"transition",p+"transform "+o+"s ease-out").css(h),c.animate({opacity:1},{duration:C.options.speed/2,complete:function(){c.remove()}}),d.animate({opacity:1},{duration:C.options.speed/2,complete:function(){h[p+"transform"]="scale"+r+"(1)",s.addClass(C.classes.active).css(p+"transition",p+"transform "+o+"s ease-out").css(h),d.animate({opacity:0},{dureation:C.options.speed/2,complete:function(){C.slides.css(p+"transition","");var e={};e[p+"transform-origin"]="50% 50%",e[p+"transform"]="scale"+r+"(1)",C.slides.eq(C.current-1).css(e),m(t)(),c.remove(),d.remove()}})}})},flipHorizon0)},stack:function(e,t,i){(C.current==C.slides.length&&1==C.former||C.former==C.slides.length&&1==C.current)&&(C.looping=!0);for(var n=0;n<C.slides.length;n++){var o=0,a=C.slides.eq(n);!1===C.looping?o=n<C.current-1?(n==C.current-1&&(a.addClass(C.classes.active),j()),0-r):0:C.former==C.slides.length&&1==C.current?o=n==C.current-1?(a.css({left:0,zIndex:5}).addClass(C.classes.active),j(),0):n==C.former-1?(a.css("z-index",10),0-r):(a.css("z-index",1),0):1==C.former&&C.current==C.slides.length&&n!=C.former-1&&n==C.current-1&&(a.css({left:0-r,zIndex:100}),a.addClass(C.classes.active),j(),o=0);var s={duration:C.options.speed,easing:C.options.transition};n!=(!0===i&&C.current-1)&&n!=(!1===i&&C.current)||n==C.current-1&&(s.complete=function(){!0===C.looping&&C.slides.each(function(e){e!=C.current-1&&(this.style.left=(1==C.current?0:0-r)+"px"),this.style.zIndex=C.slides.length-e}),m(t)()}),a.stop().animate({left:o,width:C.slide_width},s)}},slide:function(e,t,i){for(var n=0;n<C.slides.length;n++){var o,a=0;!0!==C.options.hideSpines&&(o=O(C.spines[n]));var s=O(C.slides[n]),a=n<C.current?(n==C.current-1&&(s.addClass(C.classes.active),!0!==C.options.hideSpines&&(o.addClass(C.classes.active),o.next("."+C.classes.activeCorner).show()),j()),n*S):n*S+T;!0===C.options.hideSpines&&(a=(n-C.current+1)*w.width());var r={duration:C.options.speed,easing:C.options.transition};n!=(!0===i&&C.current-1)&&n!=(!1===i&&C.current)||0===n&&(r.complete=m(t)),s.stop().animate({left:a+"px",width:C.slide_width+"px"},r),!0!==C.options.hideSpines&&(I(o),o.css("left")!=a+"px"&&(o.stop().animate({left:a+"px"},{duration:C.options.speed,easing:C.options.transition}),o.next("."+C.classes.activeCorner).stop().animate({left:a+S+"px"},{duration:C.options.speed,easing:C.options.transition})))}}},u=function(){k=w.height(),r=w.width(),w.css("height",k+"px"),!(S=x=0)!==C.options.hideSpines&&0<C.spines.length&&(x=O(C.spines[0]).height(),S=O(C.spines[0]).outerHeight()),T=r-S*C.spines.length,!0===C.options.hideSpines&&(T=r),$=Math.ceil(x/2)},M()}O(window).bind("resize",function(){1==C.options.useResponsive&&(M=!0,a&&clearTimeout(a),a=setTimeout(h,100))});this.loaded=function(e){var t,i;return t=e,i=setInterval(function(){!0===C.isLoaded&&(clearInterval(i),t(C))},20),C},this.next=function(e){var t=Math.min(C.slides.length,C.current+1);return!0===C.options.cycle&&C.current+1>C.slides.length&&(t=1),n(t,e),C},this.prev=function(e){var t=Math.max(1,C.current-1);return!0===C.options.cycle&&C.current-1<1&&(t=C.slides.length),n(t,e),C},this.goTo=function(e,t){if(C.pauseAutoPlay=!0,"string"==typeof e){":first"==e?e=C.slides.filter(":first"):":last"==e?e=C.slides.filter(":last"):e.match(/^\#/)||(e="#"+e);var i=C.slides.index(O(e));if(-1==i)return!1;e=i+1}return n(Math.min(C.slides.length,Math.max(1,e)),t),C},this.progressTo=function(e,t){return C.pauseAutoPlay=!0,C.updateControlTo(e),C.goTo(e,t),C},this.updateContro,C},this.disableSlide=function(e){var t;return t=e,-1==O.inArray(t,C.disabledSlides)&&1!==t&&0!==t&&C.disabledSlides.push(t),C},this.enableSlide=function(e){var t,i;return t=e,-1!=(i=O.inArray(t,C.disabledSlides))&&C.disabledSlides.splice(i,1),C},this.setOption=function(e,t){return function(e,t){var i=e;for(var n in"string"==typeof e&&((i={})[e]=t),i){switch(t=i[n],n){case"speed":case"start":t=parseFloat(t),isNaN(t)&&(t=C.options[n]);break;case"autoPlay":"boolean"!=typeof t&&(t=C.options[n]),C.pauseAutoPlay=!1;break;case"scroll":case"keys":case"activeCorner":case"controlProgress":case"hideSpines":case"cycle":"boolean"!=typeof t&&(t=C.options[n]);break;case"cufonRefresh":case"transition":"string"!=typeof t&&(t=C.options[n]);break;case"complete":case"before":"function"!=typeof t&&(t=C.options[n]);break;case"index":"boolean"!=typeof t&&(O.isArray(t)||(t=C.options[n]));break;case"slideTransition":for(var o in d)if(t==o){switch(C.browser._this){case"msie":case"msie7":case"msie8":case"msie9":case"msie10":case"msie11":switch(t){case"flip":case"flipHorizontal":t="fade"}}C.options.slideTransition=t;for(var a=0;a<C.slides.length;a++)A(C.options.slideTransition,a)}}C.options[n]=t}}(e,t),C},this.vertical=function(e){if(void 0!==this.verticalSlides)return this.verticalSlides[this.current-1];this.verticalSlides={};for(var t=0;t<this.slides.length;t++){var i=O(this.slides[t]).find("."+this.classes.vertical),n={next:function(){return!1},prev:function(){return!1},goTo:function(){return!1}};i.length&&(n=new o(i,this,e)),this.verticalSlides[t]=n}},this.goToVertical=function(e,t){void 0!==t?!1!==this.verticalSlides[t-1]&&(this.current==t?this.vertical().goTo(e):(this.verticalSlides[t-1].goTo(e,t,!0),this.goTo(t))):this.vertical().goTo(e)},this.resetVertical=function(e,t){void 0===t&&(t=!0),void 0===e&&(e=this.current),1==t?this.verticalSlides[e-1].snapTo(0):this.verticalSlides[e-1].goTo(0)},function(e){if(C.browser.opera&&C.browser.version<"10.5"||C.browser.msie6||C.browser.firefox2||C.browser.firefox30)return"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This web browser is not supported by SlideDeck. Please view this page in a modern, CSS3 capable browser or a current version of Inernet Explorer");if(void 0!==e)for(var t in e)C.options[t]=e[t];switch(C.spines.length<1&&(C.options.hideSpines=!0),C.browser._this){case"msie":case"msie7":case"msie8":case"msie9":case"msie10":case"msie11":switch(C.options.slideTransition){case"flip":case"flipHorizontal":C.options.slideTransition="fade"}}switch(C.options.slideTransition){case"flip":case"flipHorizontal":case"fade":case"stack":C.options.hideSpines=!0}var i;!0===C.options.hideSpines&&(C.options.activeCorner=!1),C.current=Math.min(C.slides.length,Math.max(1,C.options.start)),0<w.height()?(u(),s()):i=setTimeout(function(){u(),0<w.height()&&(clearInterval(i),u(),s())},20)}(e)},O.fn.slidedeck=function(e){for(var t=[],i=0;i<this.length;i++)this[i].slidedeck||(this[i].slidedeck=new SlideDeck(this[i],e)),t.push(this[i].slidedeck);return 1<t.length?t:t[0]}}(jQuery),jQuery.fn.hl_util_ui_sortEleme)}}(),makeSortableTable=function(o,e,a,s,t){0==$(e).find("span").length&&("asc"==t?$(e).wrapInner("<span/>").append('<span class="tbArrows tbarrow-n"/>'):"desc"==t&&$(e).wrapInner("<span/>").append('<span class="tbArrows tbarrow-s"/>'));var r=!1;"asc"==t?r=!0:"desc"==t&&(r=!1),$(e).each(function(){var e,t=$(this),i=t.index(),n=r;t.click(function(){e=$(this).find(".tbArrows"),n?(e.removeClass("tbarrow-n"),e.addClass("tbarrow-s")):(e.removeClass("tbarrow-s"),e.addClass("tbarrow-n")),o.find("tr."+a+" td, tr."+s+" td").filter(function(){return $(this).index()===i}).hl_util_ui_sortEleme-1},function(){return this.parentNode}),n=!n,reapplyRowStyle(o,a,s)})})},makeSortableTableGlyphicon=function(o,e,a,s,t){0===$(e).find("span.glyphicon").length&&("asc"===t?$(e).append('&nbsp;<span class="glyphicon glyphicon-chevron-up" />'):"desc"===t&&$(e).append('&nbsp;<span class="glyphicon glyphicon-chevron-down"/>'));var r="asc"===t;$(e).each(function(){var e,t=$(this),i=t.index(),n=r;t.click(function(){e=$(this).find(".glyphicon"),n?(e.removeClass("glyphicon-chevron-up"),e.addClass("glyphicon-chevron-down")):(e.removeClass("glyphicon-chevron-down"),e.addClass("glyphicon-chevron-up")),o.find("tr."+a+" td, tr."+s+" td").fil=i}).hl_util_ui_sortElements(function(e,t){return $.text([e]).trim().toLowerCase()>$.text([t]).trim().toLowerCase()?n?-1:1:n?1:-1},function(){return this.parentNode}),n=!n,reapplyRowStyle(o,a,s)})})},reapplyRowStyle=function(e,i,n){$.each($(e).find("tr."+i+", tr."+n),function(e,t){0<e&&($(t).removeClass(i),$(t).removeClass(n),$(t).addClass(e%2==0?i:n),$(t).fadeIn("slow",function(){}))})},function(h){h.widget("ui.tagit",{options:{allowDuplicates:!0,allowCustomTags:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var n=this;this.element.is("input")?(this.tagList=h("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last(),this.tagInput=h('<input type="text" />').addClass("ui-widget-content").attr("aria-autocomplete","both"),this.options.readOnly&&this.tagInput.attr("disabled","disabled"),this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText),this.options.autocomplete.source||(this.options.autocomplete.soun)}),this.options.showAutocompleteOnFocus&&(this.tagInput.fo()}),void 0===this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0)),h.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=h.proxy(this.options.autocomplete.source,this)),h.isFunction(this.options.tagSource)&&(this.options.tagSource=h.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(h('<li class="tagit-new"></li>').append(this.tagInput)).click(function(e){var t,i=h(e.target);i.hasClass("tagit-label")?(t=i.closest(".tagit-choice")).hasClass("removed")||n._trigger("onTagClicked",e,{tag:t,tagLabel:n.tagLabel(t)}):n.tagInput.focus()});var e,t,i,o=!1;this.options.singleField&&(this.options.singleFieldNode?(t=(e=h(this.options.singleFieldNode)).val().split(this.options.singleFieldDelimiter),e.val(""),h.each(t,function(e,t){n.createTag("",t,null,!0),o=!0})):(this.options.singleFieldNode=h('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode))),o||this.tagList.children("li").each(function(){h(this).hasClass("tagit-new")||(n.createTag(h(this).attr("id"),h(this).text(),h(this).attr("class"),!0),h(this).remove())}),this.tagInput.keydown(function(e){var t;e.which==h.ui.keyCode.BACKSPACE&&""===n.tagInput.val()?(t=n._lastTag(),!n.options.removeConfirmation||t.hasClass("remove")?n.removeTag(t):n.options.removeConfirmation&&t.addClass("remove ui-state-highlight").attr("aria-selected","true")):n.options.removeConfirmation&&n._lastTag().removeClass("remove ui-state-highlight").removeAttr("aria-selected"),(e.which===h.ui.keyCode.COMMA&&!1===e.shiftKey||e.which===h.ui.keyCode.ENTER||e.which==h.ui.keyCode.TAB&&""!==n.tagInput.val()||e.which==h.ui.keyCode.SPACE&&!0!==n.options.allowSpaces&&('"'!=h.trim(n.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==h.trim(n.tagInput.val()).charAt(0)&&'"'==h.trim(n.tagInput.val()).charAt(h.trim(n.tagInput.val()).length-1)&&h.trim(n.tagInput.val()).length-1!=0))&&(e.which===h.ui.keyCode.ENTER&&""===n.tagInput.val()||!n.options.allowCustomTags||e.preventDefault(),n.options.autocomplete.autoFocus&&n.tagInput.data("autocomplete-open")||!n.options.allowCustomTags||(0<h(h(n.tagInput).data("ui-autocomplete").menu.active).length?h(h(n.tagInput).data("ui-autocomplete").menu.active).find("a").click():(n.tagInput.autocomplete("close"),n.createTag("",n._cleanedInput()))))}).blur(function(e){}),(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(i={sel!1}},h.extend(i,this.options.autocomplete),i.source=this.options.tagSource||i.source,this.tagInput.autocomplete(i).bind("autocompleteopen.tagit",function(e,t){n.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tag1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))},destis},_cleanedIn))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_t")},assignedT,t},_updateSingleTagsFi")},_subtractAr i},tagLa()},_showAutocompl")},_findTagByLa,n},_ise)},_format))},_effectExi))},createTag:function(e,t,i,n){var o=this;if(""!==t&&null!=t||(t=e),t=h.trim(t),this.options.preprocessTag&&(t=this.options.preprocessTag(t)),""===t)return!1;if(!this.options.allowDuplicates&&!this._isNew(t)){var a=this._findTagByLabel(t);return!1!==this._trigger("onTagExists",null,{existingTag:a,duringInitialization:n})&&this._effectExists("highlight")&&a.effect("highlight"),!1}if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:n}),!1;var s,r,l,c,d="",d=void 0!==e&&0<e.length?h(this.options.onTagClicked?'<a id="'+e+'" class="tagit-label"></a>':'<span  id="'+e+'" class="tagit-label"></span>').text(t):h(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(t),u=h("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(i).append(d);this.options.readOnly?u.addClass("tagit-choice-read-only"):(u.addClass("tagit-choice-editable"),s=h("<span></span>").addClass("ui-icon ui-icon-close"),r=h('<a href="javascript:void(0)"><span class="text-icon"></span></a>').addClass("tagit-close").append(s).click(function(e){o.removeTag(u)}),u.append(r)),this.options.singleField||(l=d.html(),u.append('<input type="hidden" value="'+l+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />')),!1!==this._trigger("beforeTagAdded",null,{tag:u,tagLabel:this.tagLabel(u),duringInitialization:n})&&(this.options.singleField&&((c=this.assignedTags()).push(t),this._updateSingleTagsField(c)),this._trigger("onTagAdded",null,u),this.tagInput.val(""),this.tagInput.parent().before(u),this._trigger("afterTagAdded",null,{tag:u,tagLabel:this.tagLabel(u),duringInitialization:n}),this.options.showAutocompleteOnFocus&&!n&&setTimeout(function(){o._showAutocomplete()},0),n||setTims()},5))},removeTag:function(e,t){var i,n,o,a;t=void 0===t?this.options.animate:t,e=h(e),this._trigger("onTagRemoved",null,e),!1!==this._trigger("beforeTagRemoved",null,{tag:e,tagLabel:this.tagLabel(e)})&&(this.options.singleField&&(n=this.assignedTags(),i=this.tagLabel(e),n=h.gr!=i}),this._updateSingleTagsField(n)),t?(e.addClass("removed"),o=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],a=this,o.)})}),e.fadeOut("fast").hide.apply(e,o).dequeue()):(e.remove(),this._trigger("afterTagRemoved",null,{tag:e,tagLabel:this.tagLabel(e)})))},removeTagByL,t)},remov)})}})}(jQuery),function(u){u.time))};var i=u.timeago;function n(){var e=function(e){{var t;(e=u(e)).data("timeago")||(e.data("timeago",{datetime:i.datetime(e)}),0<(t=u.trim(e.text())).length&&e.prop("title",t))}return e.data("timeago")}(this);return isNaN(e.datetime)||u(this).text(t(e.datetime)),this}function t(e){return i.inWords((t=e,(new Date).getTime()-t.getTime()));var t}u.extend(u.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inW"))},p(t)},date(t)}}),u.fn.timeago=function(){var e=this;e.each(n);var t=i.settings;return 0<t.refreshMillis&&setInterval(function(){e.each(n)},t.refreshMillis),e},document.createElement("abbr"),document.createElement("time")}(jQuery),function(x){x.fn.tipTip=function(e){var _,w,C,k=x.extend({activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:3,defaultPosition:"top",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,contentClass:"default",enter:function(){},exit:function(){}},e);return x("#tiptip_holder").find("."+k.contentClass).length<=0?(_=x('<div id="tiptip_holder" style="max-width:'+k.maxWidth+';"></div>'),w=x('<div id="tiptip_content" class="'+k.contentClass+'"></div>'),C=x('<div id="tiptip_arrow"></div>'),x("body").append(_.html(w).prepend(C.html('<div id="tiptip_arrow_inner"></div>')))):(_=x("#tiptip_holder"),w=x("#tiptip_content"),C=x("#tiptip_arrow")),this.each(function(){var v,y,b=x(this);function e(){k.enter.call(this),w.html(v),_.hide().removeAttr("class").css("margin","0"),C.removeAttr("style");var e=parseInt(b.offset().top),t=parseInt(b.offset().left),i=parseInt(b.outerWidth(!0)),n=parseInt(b.outerHeight(!0)),o=_.outerWidth(!0),a=_.outerHeight(!0),s=Math.round((i-o)/2),r=Math.round((n-a)/2),l=Math.round(t+s),c=Math.round(e+n+k.edgeOffset),d="",u="",h=Math.round(o-12)/2;"bottom"==k.defaultPosition?d="_bottom":"top"==k.defaultPosition?d="_top":"left"==k.defaultPosition?d="_left":"right"==k.defaultPosition&&(d="_right");var p=s+t<parseInt(x(window).scrollLeft()),m=o+t>parseInt(x(window).width());p&&s<0||"_right"==d&&!m||"_left"==d&&t<o+k.edgeOffset+5?(d="_right",u=Math.round(a-13)/2,h=-12,l=Math.round(t+i+k.edgeOffset),c=Math.round(e+r)):(m&&s<0||"_left"==d&&!p)&&(d="_left",u=Math.round(a-13)/2,h=Math.round(o),l=Math.round(t-(o+k.edgeOffset+5)),c=Math.round(e+r));var f=e+n+k.edgeOffset+a+8>parseInt(x(window).height()+x(window).scrollTop()),g=e+n-(k.edgeOffset+a+8)<0;f||"_bottom"==d&&f||"_top"==d&&!g?("_top"==d||"_bottom"==d?d="_top":d+="_top",u=a,c=Math.round(e-(a+5+k.edgeOffset))):(g|("_top"==d&&g)||"_bottom"==d&&!f)&&("_top"==d||"_bottom"==d?d="_bottom":d+="_bottom",u=-12,c=Math.round(e+n+k.edgeOffset)),"_right_top"==d||"_left_top"==d?c+=5:"_right_bottom"!=d&&"_left_bottom"!=d||(c-=5),"_left_top"!=d&&"_left_bottom"!=d||(l+=5),C.css({"margin-left":h+"px","margin-top":u+"px"}),_.css({"margin-left":l+"px","margin-top":c+"px"}).prop("class","tip"+d),y&&clearTimeout(y),y=setTimIn)},k.deut)}""!=(v=k.content?k.content:b.prop(k.attribute))&&(k.content||b.removeAttr(k.attribute),y=!1,"hover"==k.activation?(b.hover(function(){e()},function(){k.keepAlive||t()}),k.keepAlive&&_.hover(function(){},function(){t()})):"focus"==k.activation?b.focus(function(){e()}).blur(function(){t()}):"click"==k.activation&&(b.c,!1}).hover(functiont()}),k.keepAlive&&_.hover(function(){},function(){t()})))})}}(jQuery),function(h,p){var i,m="watermark",f="watermarkClass",g="watermarkFocus",v="watermarkSubmit",c="watermarkMaxLength",y="watermarkPassword",b="watermarkText",_=/\r/g,n=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,t="input:data("+m+"),textarea:data("+m+")",w=":watermarkable",o=["Page_ClientValidate"],d=!1,C="placeholder"in document.createElement("input");h.watermark=h.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(e){h(e).filter(t).each(function(){h.watermark._hide(h(this))})},_hide:function(e,t){var i,n,o=e[0],a=(o.value||"").replace(_,""),s=e.data(b)||"",r=e.data(c)||0,l=e.data(f);s.length&&a==s&&(o.value="",e.data(y)&&"text"===(e.attr("type")||"")&&(i=e.data(y)||[],n=e.parent()||[],i.length&&n.length&&(n[0].removeChild(e[0]),n[0].appendChild(i[0]),e=i)),r&&(e.attr("maxLength",r),e.removeData(c)),t&&(e.attr("autocomplete","off"),p.setTimeout(function(){e.select()},1))),l&&e.removeClass(l)},)})},_show:function(e){var t,i,n,o=e[0],a=(o.value||"").replace(_,""),s=e.data(b)||"",r=e.attr("type")||"",l=e.data(f);0!=a.length&&a!=s||e.data(g)?h.watermark._hide(e):(d=!0,e.data(y)&&"password"===r&&(t=e.data(y)||[],i=e.parent()||[],t.length&&i.length&&(i[0].removeChild(e[0]),i[0].appendChild(t[0]),(e=t).attr("maxLength",s.length),o=e[0])),"text"!==r&&"search"!==r||0<(n=e.attr("maxLength")||0)&&n<s.length&&(e.data(c,n),e.attr("maxLength",s.length)),l&&e.addClass(l),o.value=s)},hid!1)},showAll:function(){h.watermark.show(w)}},h.fn.watermark=h.fn.watermark||function(l,c){if(!this.length)return this;var d=!1,u="string"==typeof l;return u&&(l=l.replace(_,"")),"function"!=typeof(c="object"==typeof c?(d="string"==typeof c.className,h.extend({},h.watermark.options,c)):"string"==typeof c?(d=!0,h.extend({},h.watermark.options,{className:c})):h.watermark.options).useNative&&(c.useNative=c.useNative?function(){return!0}:function(){return!1}),this.each(function(){var e,t,i,n,o,a,s,r=h(this);if(r.is(w)){if(r.data(m))(u||d)&&(h.watermark._hide(r),u&&r.data(b,l),d&&r.data(f,c.className));else{if(C&&c.useNative.call(this,r)&&"TEXTAREA"!==(r.attr("tagName")||""))return void(u&&r.attr("placeholder",l));r.data(b,u?l:""),r.data(f,c.className),r.data(m,1),"password"===(r.attr("type")||"")?(e=r.wrap("<span>").parent(),(t=h(e.html().replace(/type=["']?password["']?/i,'type="text"'))).data(b,r.data(b)),t.data(f,r.data(f)),t.data(m,1),t.attr("maxLength",l.length),t.f!0)}).bind("dragenter",function(){h.watermark._hide(t)}).bind("drag,1)}),r.blur(function(){h.watermark._show(r)}).bind("dragleave",function(){h.watermark._show(r)}),t.data(y,r),r.data(y,t)):r.f!0)}).(r)}).bind("dragenter",function(){h.watermark._hide(r)}).bind("dragleave",function(){h.watermark._show(r)}).bind("drag,1)}).bind("ds()}),this.form&&(i=this.form,(n=h(i)).data(v)||(n.submit(h.watermark.hideAll),i.submit?(n.data(v,i.submit),i.submit=(a=ie()})):(n.data(v,1),i.submit=t()}))))}h.watermark._show(r)}})},h.watermark.runOnce&&(h.watermark.runOnce=!1,h.extend(h.expr[":"],{data:h.expr.createPseudo?h.expr.createPst3])},watermarkable:function(e){var t,i=e.nodeName;return"TEXTAREA"===i||"INPUT"===i&&(!(t=e.getAttribute("type"))||!n.test(t))}}),i=h.fn.val,h.fn.val=function(){var e=Array.prototype.slice.call(arguments);if(!this.length)return e.length?this:void 0;if(e.length)return i.apply(this,e),h.watermark.show(this),this;if(this.data(m)){var t=(this[0].value||"").replace(_,"");return t===(this.data(b)||"")?"":t}return i.apply(this)},o.length&&h(function(){for(var e,t,i=o.length-1;0<=i;i--)"function"==typeof(t=p[e=o[i]])&&())}}(t))}),h(p).bind("beforeunll()}))}(jQuery,win{})}),JSON=JSON)})}(),function(m){m.fn.linedtextarea=function(e){function h(e,t,i){for(;e.height()-t<=0;)i==p.selectedLine?e.append("<div class='lineno lineselect'>"+i+"</div>"):e.append("<div class='lineno'>"+i+"</div>"),i++;return i}var p=m.extend({},m.fn.linedtextarea.defaults,e);return this.each(function(){var o=1,e=m(this);e.attr("wrap","off"),e.css({resize:"none"});var t=e.outerWidth();e.wrap("<div class='linedtextarea'></div>");var i=e.parent().wrap("<div class='linedwrap' style='width:"+t+"px'></div>").parent();i.prepend("<div class='lines' style='width:50px'></div>");var n=i.find(".lines");n.height(e.height()+6),n.append("<div class='codelines'></div>");var a,s,r=n.find(".codelines"),o=h(r,n.height(),1);-1==p.selectedLine||isNaN(p.selectedLine)||(a=parseInt(e.height()/(o-2)),s=parseInt(a*p.selectedLine)-e.height()/2,e[0].scrollTop=s);var l=n.outerWidth(),c=parseInt(i.css("border-left-width"))+parseInt(i.css("border-right-width"))+parseInt(i.css("padding-left"))+parseInt(i.css("padding-right")),d=t-c,u=t-l-c-20;e.width(u),i.width(d),e.scroll(function(e){var t=m(this)[0],i=t.scrollTop,n=t.clientHeight;r.css({"margin-top":-1*i+"px"}),o=h(r,i+n,o)}),e.resize(function(e){var t=m(this)[0];n.height(t.clientHeight+6)})})},m.fn.linedtextarea.defaults={selectedLine:-1,selectedClass:"lineselect"}}(jQut()}(this,function(){"use strict";varts)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.cal.prototype.some?Array.prototype.n!1};var b=m.momentProperties=[],var n,}m.suppressDeprecationWarnings=!1,m.deprecationHandler=null,n=Object.keys?Object.)+n}var E=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,A=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,P={},e}var n}var r G,J=/\d/,Q=/\d\d/,X=/\d{3}/,Z=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ie=/\d\d\d\d?/,ne=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,ae=/\d{1,4}/,se=/[+-]?\d{1,6}/,re=/\d+/,le=/[+-]?\d+/,ce=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,ue=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,)}G={};var f})}var ye,be=0,_e=1,we=2,Ce=3,ke=4,xe=5,Se=6,Te=7,7%2}ye=Array.prototype.indexOf?Array.prototype.indn-1},O("M",["MM",2],)+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),N("month","M"),H("month",8),he("M",te),he("MM",te,Q),he("MMM",function(e,t){return t.monthsShortRegex(e)}),he("MMMM",function(e,t){return t.monthsRegex(e)}),ge(["M",")-1}),ge(["MMM","MMMM"],function(e,t,i,n){var o=i._locale.monthsParse(e,n,i._strict);null!=o?t[_e]=o:g(i).invalidMonth=e});var je="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ae=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pe=ue,M}O("Y""+e}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),N("year","y"),H("year",1),he("Y",le),he("YY",te,Q),he("YYYY",ae,Z),he("YYYYY",se,ee),he("YYYYYY",se,ee),ge(["YYYYY","YYYYYY"],be),ge("Y(e)}),ge((e)}),ge10)}),m.parseTwoDigite3)};var Ne=V("FullYear"O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),H("week",5),H("isoWeek",5),he("w",te),he("ww",te,Q),he("W",te),he("WW",te,Q),ve(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=z(t))}O("d",0,"do","day"),O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),he("d",te),he("e",te),he("E",te),he("dd",function(e,t){return t.weekdaysMinRegex(e)}),he("ddd",function(e,t){return t.weekdaysShortRegex(e)}),he("dddd",function(e,t){return t.weekdaysRegex(e)}),ve(["dd","ddd","ddy=e}),ve(["d","e",(e)});var ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ve="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ye=ue,Ge=ue,J}O("H",["HH",2],0,"hour"),O("h",["hh",2],0,Xe),O("k",["kk",|24}),O("hmm",2)}),O("hmmss",2)}),O("Hmm",2)}),O("Hmmss",2)}),Ze("a",!0),Ze("A",!1),N("hour","h"),H("hour",13),he("a",et),he("A",et),he("H",te),he("h",te),he("k",te),he("HH",te,Q),he("hh",te,Q),he("kk",te,Q),he("hmm",ie),he("hmmss",ne),he("Hmm",ie),he("Hmmss",ne),ge(["H","HH"],Ce),ge(["k","0:n}),ge(["a",m=e}),ge(["h","=!0}),ge("=!0}),ge("hm=!0}),ge("n))}),ge("Hmo))});var tt=V("Hours",!0);var it,nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:je,monthsShort:Ee,week:{dow:0,doy:6},weekdays:ze,weekdaysMin:qe,weekdaysShort:Ve,meridiemParse:/[ap]\.?m?\.?/i},ot={},ar pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ft=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yt=/^\/?Date\((-?\d+)/i,bt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,_t={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-function Tt(e){if(e._f!==m.ISO_8601)if(e._f!==m.RFC_2822){e._a=[],g(e).empty=!0;for(var t,i,n,o,a,s,r,l=""+e._i,c=l.length,d=0,u=R(e._f,e._locale).match(E)||[],h=u.length,p=0;p<h;p++)i=u[p],(t=(l.match(pe(i,e))||[])[0])&&(0<(n=l.substr(0,l.indexOf(t))).length&&g(e).unusedInput.push(n),l=l.slice(l.indexOf(t)+t.length),d+=t.length),M[i]?(t?g(e).empty=!1:g(e).unusedTokens.push(i),a=i,r=e,null!=(s=t)&&f(fe,a)&&fe[a](s,r._a,r,a)):e._strict&&!t&&g(e).unusedTokens.push(i);g(e).charsLeftOver=c-d,0<l.length&&g(e).unusedInput.push(l),e._a[Ce]<=12&&!0===g(e).bigHour&&0<e._a[Ce]&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a,t)}(e._locale,e._a[Ce],e._meridiem),null!==(o=g(e).era)&&(e._a[be]=e._locale.erasConvertYear(o,e._a[be])),St(e),ht(e)}else kt(e);else wt(e)}function $t(e){var t,i,n=e._i,o=e._f;return e._locale=e._locale||ut(e._l),null===n||void 0===o&&""===n?y({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),C(n)?new w(ht(n)):(a(n)?e._d=n:|t)}(e):o?Tt(e):s(i=(t=e)._i)?t._d=new Date(m.now()):a(i)?t._d=new Date(i.valueOf()):"string"==type1])}(t):r(i)?(t._a=u(i.slic10)}),St(t)):e))}(t):d(i)?t._d=new Date(i):m.createFromInputFallback(t),v(e)||(e._d=null)1)}m.createFromInputFallback=i("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more in"))}),m.ISO_8601=function(){},m.RFC_2822=function(){};var Et=i("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-my()}),At=i("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-myn i}var Mt=["year","quarter","month","week","day","hour","minute","second","milliseco}Ft("Z",":"),Ft("ZZ",""),he("Z",de),he("ZZ",de),ge(["Z",",e)});var Nt=/([\+\-]|\d\d}m.updateOffset=function(){};var Kt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Wt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?zt.fn=Ot.prototype,zt.invalid=function(){return zt(NaN)};var Jt=Yt(1,"add"),Qt=Yt(-1,"subtra}m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",m.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ii=i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languag(ale}var oi=1262278"N",0,0,"eraAbbr"),O("NN",0,0,"eraAbbr"),O("NNN",0,0,"eraAbbr"),O("NNNN",0,0,"eraName"),O("NNNNN",0,0,"eraNarrow"),O("y",["y",1],"yo","eraYear"),O("y",["yy",2],0,"eraYear"),O("y",["yyy",3],0,"eraYear"),O("y",["yyyy",4],0,"eraYear"),he("N",li),he("NN",li),he("NNN",li),he("NNNN",function(e,t){return t.erasNameRegex(e)}),he("NN(e)}),ge(["N","NN","NNN","NNNN","NNNa=e}),he("y",re),he("yy",re),he("yyy",re),he("yyyy",re),he(|re}),ge(["y","yy","yyy","yyyy"],be),ge(["10)}),O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",100}),di("gggg","weekYear"),di("ggggg","weekYear"),di("GGGG","isoWeekYear"),di("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),he("G",le),he("g",le),he("GG",te,Q),he("gg",te,Q),he("GGGG",ae,Z),he("gggg",ae,Z),he("GGGGG",se,ee),he("ggggg",se,ee),ve(["gggg","ggggg","GGGG","GGG(e)}),ve(["gg","(e)}),O("Q",0,"Qo","quarter"),N("quarter","Q"),H("quarter",7),he("Q",J),ge-1)}),O("D",["DD",2],"Do","date"),N("date","D"),H("date",9),he("D",te),he("DD",te,Q),he(ent}),ge(["D","DD"],we),ge(0])});var hi=V("Date",!0);O("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),H("dayOfYear",4),he("DDD",oe),he("DDDD",X),ge(["DDD","DD(e)}),O("m",["mm",2],0,"minute"),N("minute","m"),H("minute",14),he("m",te),he("mm",te,Q),ge(["m","mm"],ke);var pi=V("Minutes",!1);O("s",["ss",2],0,"second"),N("second","s"),H("second",15),he("s",te),he("ss",te,Q),ge(["s","ss"],xe);var mi,fi,gi=V("Seconds",!1);for(O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",10)}),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,function(){return 10*this.millisecond()}),O(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),O(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),O(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),O(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),O(0,["SSSSSSSSS",d()}),N("millisecond","ms"),H("millisecond",16),he("S",oe,J),he("SS",oe,Q),he("SSS",oe,X),mi="SSSS";mi.length<=9;mi+="S")he(mie))}for(mi="S";mi.length<=9;mi+="S")ge(mi,vi);fi=V("Milliseconds",!1),O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var yi=w.proton e}yi.add=Jt,yi.cale)))},yi.cis)},yi.(a)},yi.ehis},yi.fo(t)},yi.from=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||jt(e).isValid())?zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},yi.fromNow=function(e){return this.from(jt(),e)},ye()},yi.t,e)},yihis},yi.invallow},yi.isA())},yi.isBe())},yi.isBet)))},yi.is)))},yi.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},yi.isSameOrBe,t)},yi.isValid=function(){return v(this)},yi.lang=ii,yi.locale=ti,yi.localeData=ni,yi.max=At,yi.min=Et,yi.parsingFs))},yihis},yi.stahis},yi.subtract=Qt,yi.toA()]},yi.toOb()}},yi.to())},yi.toISOStZ")},yi.ins+i)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(yi[Symbol.for("nodejs.util.inspect.custo">"}),yi.toull},yi.toStZ")},yi.e3)},yi.val|0)},yi.creationct}},yi.eraName=function(){for(var e,t=this.localeData().eras(),i=0,n=t.length;i<n;++i){if(e=this.clone().startOf("day").valueOf(),t[i].since<=e&&e<=t[i].until)return t[i].name;if(t[i].until<=e&&e<=t[i].since)return t[i].name}return""},yi.eraNarrow=function(){for(var e,t=this.localeData().eras(),i=0,n=t.length;i<n;++i){if(e=this.clone().startOf("day").valueOf(),t[i].since<=e&&e<=t[i].until)return t[i].narrow;if(t[i].until<=e&&e<=t[i].since)return t[i].narrow}return""},yi.eran""},yi.erar()},yi.year=Ne,yi.isLeap())},yi.weekoy)},yi.isoWeek,4)},yi.quarter=yi.quar%3)},yi.month=De,yi.daysInM())},yi.week=yi.wd")},yi.isoWeek=yi.isoWd")},yi.weeksInYear=function(){var e=this.localeData()._week;return Ke(this.year(),e.dow,e.doy)},yi.weeksInWeekoy)},yi.isoWeeksInYear=function(){return Ke(this.year(),1,4)},yi.isoWeeksInISOWeek,4)},yi.date=hi,yi.day=yi.):n},yi.weed")},yi.isoWee-7)},yi.dayOfd")},yi.hour=yi.hours=tt,yi.minute=yi.minutes=pi,yi.second=yi.seconds=gi,yi.millisecond=yi.milliseconds=fi,yi.utcOfhis},yi.utc=function(e){return this.utcOffset(0,e)},yi.lhis},yi.parsehis},yi.hasAlignedHourOf=0)},yi.it()},yi.isLUTC},yi.isUtcOfUTC},yi.isUtc=Ht,yi.isUTC=Ht,yi.zoneAbbr=function(){return this._isUTC?"UTC":""},yi.zone:""},yi.dates=i("dates accessor is deprecated. Use date instead.",hi),yi.months=i("months accessor is deprecated. Use month instead",De),yi.years=i("years accessor is deprecated. Use year instead",Ne),yi.zone=i("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zot()}),yi.isDSTShifted=i("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more informatted});var _i=I.protor}_i.cale):n},_i.longDateFoe])},_i.invalidDate=function(){return this._invalidDate},_i.ord,e)},_i.preparse=bi,_i.postformat=bi,_i.relative,e)},_i.pastFu,t)},_ice)},_i.n n},_i.erasP[n]},_i.erasConvert)*i},_i.erasAbbrRegex=function(e){return f(this,"_erasAbbrRegex")||ci.call(this),e?this._erasAbbrRegex:this._erasRegex},_i.erasNameRegex=function(e){return f(this,"_erasNameRegex")||ci.call(this),e?this._erasNameRegex:this._erasRegex},_i.erasNarrowRgex},_i.moone},_i.monthsSone},_i.monthsP n}},_i.monthsRegex=function(e){return this._monthsParseExact?(f(this,"_monthsRegex")||Re.call(this),e?this._monthsStrictRegex:this._monthsRegex):(f(this,"_monthsRegex")||(this._monthsRegex=Me),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},_i.monthsShortRegex=function(e){return this._monthsParseExact?(f(this,"_monthsRegex")||Re.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(f(this,"_monthsShortRegex")||(this._monthsShortRegex=Pe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},_i.eek},_i.firstDayOfYear=function(){return this._week.doy},_i.firstDayOfdow},_i.week]:i},_i.weekdaysMin=function(e){return!0===e?We(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},_i.weekdaysSort},_i.weekdaysP n}},_i.weekdaysRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(f(this,"_weekdaysRegex")||(this._weekdaysRegex=Ye),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},_i.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ge),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},_i.weekdaysMinRex)},_i.(0)},_i.meriAM"},ct("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordh")}}),m.lang=i("moment.lang is deprecated. Use moment.locale instead.",ct),m.langData=i("moment.langData is deprecated. Use moment.localeData instead.",ut);var xi=Mathe)}function $i(e){return 4800*e/14)}}var Ei=ji("ms"),Ai=ji("s"),Pi=ji("m"),Mi=ji("h"),Oi=ji("d"),Di=ji("w"),Ri=ji("M"),Fi=ji("Q"),Ni=ji(aN}}var Ui=Bi("milliseconds"),Li=Bi("seconds"),Hi=Bi("minutes"),Ki=Bi("hours"),Wi=Bi("days"),zi=Bi("months"),Vi=Bi("years");var qi=Math.round,Yi={ss:44,s:45,m:45,h:22,d:26,w:null,M,h)}var Ji=MathD"}var Zi=Ot.prototype;return Zi.isVlid},Zihis},Zi,1)},Zi.subt-1)},Ze)}},Zi.asMilliseconds=Ei,Zi.asSeconds=Ai,Zi.asMinutes=Pi,Zi.asHours=Mi,Zi.asDays=Oi,Zi.asWeeks=Di,Zi.asMonths=Ri,Zi.asQuarters=Fi,Zi.asYears=Ni,Zi.valNaN},Zi._buhis},Zi.cis)},ZiNaN},Zi.milliseconds=Ui,Zi.seconds=Li,Zi.minutes=Hi,Zi.hours=Ki,Zi.days=Wi,Zi.w/7)},Zi.months=zi,Zi.years=Vi,Zi.huma(n)},Zi.toISOString=Xi,Zi.toString=Xi,Zi.toJSON=Xi,Zi.locale=ti,Zi.localeData=ni,Zi.toIsoString=i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xi),Zi.lang=ii,O("X",0,0,"unix"),O("x",0,0,"valueOf"),he("x",le),he("X",/[+-]?\d+(\.\d{1,3})?/),gee))}),gee))}),m.version="2.29.4",e=jt,m.fn=yi,m.min=function(){return Pt("isBefore",[].slice.call(arguments,0))},m0))},mate},m.utc=p,m.*e)},m.months=function(e,t){return Ci(e,t,"months")},m.isDate=a,m.locale=ct,m.invalid=y,m.duration=zt,m.isMoment=C,m.weekdays=function(e,t,i){return ki(e,t,i,"weekdays")},m.parsee()},m.localeData=ut,m.isDuration=Dt,m.monthsSt")},m.weekdaysMin=function(e,t,i){return ki(e,t,i,"weekdaysMin")},m.defineLocale=dt,m.updateLo[e]},m.locot)},m.weekdaysSt")},m.normalizeUnits=B,m.relativeTimeRoun!0)},m.relativeTimeThres0))},m.calendarFose"},m.prototype=yi,m.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},m});var ob_post=new ob_post_Construc}})}(jQuery),function(w,b){"use strict";var e,t,i,_,r,c,C,u,ntion y(e,t,i){var n,o=[],a=e.attr("class");a&&w((a=""+a).split(" ")).eis)}),(a=t.attr("class"))&&w((a=""+a).split(" ")).e(n)}),e.attr("class",o.join("})}function S(s){var e,r=null,t=s.quietMillis||100,l=s.url,c=this;return function(a){window.clearTimeout(e),e=window.setTimeout(function(){var e=s.data,t=l,i=s.transport||w.fn.select2.ajaxDefaults.transport,n={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||b,dataType:s.dataType||"json"},o=w.extend({},w.fn.select2.ajaxDefaults.params,n),e=e?e.call(c,a.term,a.page,a.context):null,t="function"==typeof t?t.call(c,a.term,a.page,a.context):t;r&&"function"==typeof r.abort&&r.abort(),s.params&&(w.isFunction(s.params)?w.extend(o,s.params.call(c)):w.extend(o,s.params)),w.extend(o,{url:t,dataType:s.dataType,data:e,suc(t)}}),r=i.call(c,o)}indow.Select2===b&&(c={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isAn!1},isConKey},isFunctio123}},n={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r",":"r","":"r","":"r","":"r","s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z"},a=w(document),o=1,_=function(){return o++},a.on("mousemove",function(e){c.x=e.pageX,c.y=e.pageY}),e=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var a,t,i,n,o,s=".select2-results";this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==b&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegendTo(document.body),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+_()),this.containerEventName=this.containerId.replace(/([.])\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=w("body"),y(this.container,this.opts.element,this.opts.ads.container.css(j(e.containessClass)),this.bindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",v),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClind("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",v),this.===e.pageX&&c.y===e.pageY||w(e.target).touchstart touchmove touchend",s,this.bind(function(e){this._touchEvent=!0his.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),i=80,n=this.results,o=g(i,function(e){n.trigger("scroll-debounced",e)})(e){e.stopPropagation()}),w(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),w.fn.mousewheel&&a.mousewheel(function(e,t,i,n){var o=a.scrollTophis.dropdown.nt.prop("disabled");r===b&&(r=!1),this.enable(!r);var l=e.element.prop("readonly");l===b&&(l=!1),this.readonly(l),C=C||function(){var e=w("<div class='select2-measure-scrollbar'></div>");e.appendTo("body");var t={width:s"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2");this.close(),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),t!==b&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),E.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:p(e.attr("locked"),"locked")||p(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(v){var e,t,i,y=this,s=v.element;if("select"===s.get(0).tagName.toLowerCase()&&(this.select=e=v.element),e&&w.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in v)throw new Error("Option '"+this+"' is not allowed for Select2 when attached t":"select2-result-unselectable"),a&&r.addClass("select2-disabled"),s&&r.addClass("select2-result-with-children"),r.addClass(y.opts.formatResultCssClass(n)),r.attr("role","presentation"),(l=w(document.createElement("div"))).addClass("select2-result-label"),l.ae","option"),(d=v.formatResult(n,l,p,y.th))};g(t,e,0)}},w.fn.select2.defaults,v)).id&&(t=v.id,v.id=function(e){return e[t]}),w.isArray(v.element.data("select2Tags"))){if("tags"in v)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+v.element.attr("id");v.tags=v.element.data("select2Tags")}if(e?(v.query=this.bind(function(n){var e,i={results:[],more:!1},o=n.term,a=function(e,t){var i;e.is("option")?n.matcher(o,e.text(),e)&&t.push(y.optionToData(e)):e.is("optgroup")&&(i=y.optionToData(e),e.children().each2(function(e,t){a(t,i.children)}),his.getPlaceho(e),text:w.trim(e)}}),v.initSelectioe.val(),v.separator)).each(function(){var e={id:this,text:this},t=v.tags;w.isFunction(t)&&(t=t()),w(t).each(function(){if(p(this.id,e.id))return e=this,!1}),i.push(e)}),t(i)}))),"function"!=typeof v.query)throw"query function not defined for Select2 "+v.element.attr("id");if("top"===v.createSearchChoicePosition)function(e,t){s.element.data("sel})),t=this.bind(),this.opdown.addClass(j(this.opts.dropdownCssClass)WebKitMutationObserver||window.MozMutationObserver)!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){e.forEach(t)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var t=w.Event("select2-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(t),!t.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=w.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===b&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===b&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,i,n,o,a=this.dropdown,s=this.colTop()+h,f=s.top+r,g=s.left,v=f+c<=m,y=s.top-c>=d.scrollTop(),b=a.outerWidth(!1),_=g+b<=p;a.hasClass("select2-drop-above")?(t=!0,!y&&v&&(t=!(i=!0))et(),r=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=a.outerHeight(!1),p=d.scrollLeft()+u,m=d.scrollTop()+h,f=s.top+r,_=(g=s.left)+(b=a.outerWidth(!1))<=p,a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=w(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),l<(b=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:C.width))?l=b:b=l,c=a.outerHeight(!1),_=g+b<=p):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(f-=(e=this.body.lect2-drop-above")):(n.top=f,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=w.extend(n,j(this.opts.dropdownCss)),a.css(n)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=w.Event("select2-opening"),this.optstion(){t"div"))).attr(",n.appendTo(this.body),n.on("mousedown touchstart<i.length&&((t=i.data("tion(e){a.opened()&&a.positionDropdown()})})},close:function(){var e,t,i,n;this.opened()&&(e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orieClass("selhlightableChoiceth-1&&0<(a=s.find("li.select2-more-results")).length&&(i=a.offset().top+a.outerHeight(!0)),(n=s.offset().top+s.outset().top-s.offset()ted)")},moveHighloice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t,i=w(e.target).closest(".select2-result-selectable");0<i.length&&!i.is(".select2-highlighted")?(t=this.findHighlightableChoices(),this.highlight(t.index(i))):0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,o=this,a=this.search.val(),s=this.context;0!==i.length&&i.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:a,page:n,context:s}),o.postprocessResults(e,!1,!1),!0===e.more?(i.detach().appendTo(t).text(j(o.opts.formatLoadMore,n+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(i){var e,t,n,o=this.search,a=this.results,s=this.opts,r=this,l=o.val(),c=w.data(this.container,"select2-last-term");if((!0===i||!c||!p(l,c))&&(w.data(this.container,"select2-last-term",l),!0===i||!1!=++this.queryCount;var d=this.getMaximumSelectionSize();if(!(1<=d&&(e=this.data(),w.isArray(e)&&e.length>=d&&I(s.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<s.minimumInputLength?(I(s.formatInputTooShort,"formatInputTooShort")?h("<li class='select2-no-results'>"+j(s.formatInputTooShort,o.val(),s.minimumInputLength)+"</li>"):h(""),void(i&&this.showSearch&&this.showSearch(!0))):void(s.maximumInputLength&&o.val().length>s.maximumInputLength?I(s.formatInputTooLong,"formatInputTooLong")?h("<li class='select2-no-results'>"+j(s.formatInputTooLong,o.val(),s.maximumInputLength)+"</li>"):h(""):(s.formatSearching&&0===this.findHighlightableChoices().length&&h("<li class='select2-searching'>"+j(s.formatSearching)+"</li>"nt&&(this.opened()?(this.context=e.context===b?null:e.context,thistNoMatches"),this.resultsPage)limit'>"+j(s.fo.text(r.opts.formatMament&&this.search.blaceholder")||this.opts.eth:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=i.length)return i[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),t=A(e,{createContainer:function(){return w(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-o for='ck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autos.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t,i;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((t=e.createTextRange()).collapse(!1),t.select()):e.setSelectionRange&&(i=this.search.val().length,e.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(w.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:funcar t,e,i=this.container,n=this.dro.focusser=i.find(".select2-focusser"),tent.attr("title",a||e.text()),this.focusser.attr("tabindex",this.el"+this.focusser.attr("id")+"']").text()).attr("N)switch(e.which){case u.UP:case u.DOWN:.cancel(e),void v(e)}else v(e)})),this.ss.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==u.TAB&&!u.isControl(e)&&!u.isFunctionKey(e)&&e.which!==u.ESC){if(!1!==this.opts.openOey||e.metaKey)return;return this.opnge input",this.bind(function(e){if(0<=this.opts.minimumResultsForSearch){if(e.stopPropagation(),this.ope),n.on("mousedselect2-container-active")})){this.conta?n.val():""),th&&(this.opts.elull!==e&&(t.updateSly(this,argery({matchosen").html(thi)&&this.showSearch(function i(e){var n=0;return w.each(e,function(e,t){t.children?n+=i(t.children):n++}),n}(e.results)>=n)},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-s2-search").toggleClass("select2-offscreen",!e),w(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){var i,n;this.triggerSelect(e)&&(i=this.opts.element.val(),n=this.data(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({ty,t&&t.noFocus||(),p(rmatSelectionCssClass(e,nhis.triggerChange({added:utocompl<ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(e,t){var i=[];e.his.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in l&&(l.initSelection=l.initSelection||function(e,a){var s=h(e.val(),l.separator),r=[];l.query({matcher:function(e,t,i){var (i),n},callback:w.isFunction(a)?function(){for(var e=[],t=0;t<s.length;t++)for(var i=s[t],n=0;n<r.length;n++){var o=r[n];if(p(i,l.id(o))){e.push(o),r.splice(n,1);break}}a(e)}:w.noop})}),l},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){w("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"searchContainer","selection")},initContainer:function(){var d,e=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(e);var t=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(w(this))}),this.search.attr("id","s2id_autogen"+_()),this.search.prev().text(w("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t,i,n,o,a=d.find(".select2-search-choice-focus"),s=a.prev(".select2-search-choice:not(.select2-locked)"),r=a.next(".select2-search-choice:not(.select2-locked)"),l=(t=this.search,o=n=0,"selectionStart"in(t=w(t)[0])?(n=t.selectionStart,o=t.selectionEnd-n):"selection"in document&&(t.focus(),i=document.selection.createRange(),o=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-o),{offset:n,leu.RIGHT||e.which==u.BACKSPACE||e.wis.search.width(10),c=r.length?r:null):ed())switch(e.which){case u.UP:case u.DOWu.isFunctionKey(e)&&e.which!==u.BACKSPACE&&e.which!==u.ESC){if(e.which===u.ENTER){if(!1===this.opts.openOnEnter)),e.which===u.opagation(),er-active")||thishis.contselectarent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;""===e&&(t.usClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(w.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t=[],i=[],n=this;w(e).each(function(){d(n.id(this),t)<0&&(t.push(n.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),w(e).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=b&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),coseOnSelect),!this.optsgth>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.valhis.opts.formatSelection(e,a.find("div"),this.opts.escapeMarkup);l!=b&&a.find("div").replaceWith("<div>"+l+"</div>"),(t=this.opts.formatSelectionCssClass(e,a.findd()&&(thi))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",e),a.insertBefore(this.searchContainer),r.push(s),this.setVal(r)},unselect:function(e){var t,i,n=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument:ct2-data")){var o=w.Event("select2-removing");if(o.val=this.id(t),o.choice=t,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;0<=(i=d(this.id(t),n));)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,i){var n=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),s=this;o.each2(function(e,t){0<=d(s.id(t.data("select2-data")),n)&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("selectlect2-sected)").length&&(!))+"th(Math.flooeach(functpliceect,this.bind(tch-choice").map(function(){return w(this).data("select2-data")}).get();n=this.data(),e=e||[],i=w.map(e,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelectiols(n,this.data()i,n,o,a=Arrauments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart"d","isFocused","container","dropdown"],l=["val","data"],c={search:"externth?{}:w.extend({},aprop("multiple"):(o=e.2.class.multi:new window.Select2.class.single).init(e);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(d(a[0],s)<0)throw"Unknown method: "+a[0];if(n=b,(t=w(this).data("sentainer"e(1))),0<=d(a[0],r)||0<=d(a[0],l)&&1==a.len e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matchesort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:f(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==b?null:e.id},matcher:function(e,t){return 0<=l(""+t).toUpperCase(teSearchChoice.call(this,o,(p(n.id(o),n.id(t[s]))){d=!0;break}d||i(o)}}return c!==e?e:void 0},escapeMarkup:x,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(e.opts.minimumResultsForSearch<0)}},w.fn.select2.ajaxDefaults={transport:w.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:S,local:T,tags:$},util:{debounce:g,markMatch:k,escapeMarkup:x,stripDiacritics:l},class:{abstract:e,single:t,multi:i}})}(jQuery),document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(e,t,i){var layers[e].ready(i),vjs.players[e];n=vjs.el(e)}else n=e;if(!n||!n.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return n.player||new vjs.Player(n,t,i)},videojs=window.videojs=vjs;function _handleMultipleEvents(t,i,e,n){vjs.arr.forEach(e,function(e){t(i,e,n)})}vjs.CDN_VERSION="4.12",vjs.ACCESS_PROTOCOL="https:"==document./",vjs.VERSION="4.12.1",vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,playbackRates:[],inactivityTimeout:2e3,children:{mediaLoader:{},posterImagelay:{},.languages[e]=t,vjs.options.languages},vjs.players={},"function"==typeof define&&define.amd?define("videojs",[],function(){return videojs}):"objexports=videojs),vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(e){var t,i=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){};for(var n in(((t=s.on=function(a,e,t){if(vjs.obj.isArray(e))return _handleMultipleEvents(vjs.on,a,e,t);var s=vjs.getData(a);s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),t.guid||(t.guid=vjs.guid++),s.handlers[e].push(t),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e){if(!s.disabled){e=vjs.fixEvent(e);var t=s.handlers[e.type];if(t)for(var i=t.slice(0),n=0,o=i.lengthddEventListener(e,s.dispatcher,!1):a.attachEvent&&a.attachEventandlers){if(vjs.obj.isArray(e))return _handleMultipl)for(var s=0;s<a.length;s++)a[s].guid===i.guid&&a.splice(s--,1);vjs.cleanUpEvents(t,e)}else o(e)}else for(var r in n.handlers)o(r)}}},vjs.cleanUpEvents=function(e,t){var i=vjs.getData(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),vjs.isEmpty(i.handlers)&&(delete i.handlers,delete i.dispatcher,delete i.disabled),vjs.isEmpty(i)&&vjs.removeData(e)},vjs.fixEvent=function(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n,o,a=e||window.event;for(var s in e={},a)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&("returnValue"==s&&a.preventDefault||(e[s]=a[s]));e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDef(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!=e.clirollTop||o&&o.s=e.charCode||e.keyCode,null!=e.button&&(ern e},vjs.tri.ownerDocumenttcher.call(e,t),o&t.target[t.tyd},vjs.one=funct(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||vjs.guid++,vjs.on(e,t,n)};var hasOwnProp=Object.prototype.hasOwnProperty;function _logType(e:"):e="log",vjs.log.history.push(n),n.unshift("VIDEOJS:"),o[e].apply?o[e].apply(o,n):o[e](n.join(" "))}vjs.createEl=function(e,t){var i;return e=e||"div",t=t||{},i=document.createElement(e),vjs.obj.each(t,fun),i},vjs.capitaach=function,e[n])},vjs.ol(t,i)&&(e[i],t)hasOwnProp.cajs.obj.merge({},e)},vjs.obj.isPlainay||function(e){return"[object Array]"===Object.prototype.toString.call(e)},vjs.isNaN=function(e){return e!=e},vjs.bind=function(e,t,i){t.guid||(t.guid=vjs.guid++);function n(){return t.apply(e,arguments)}return n.guid=i?i+"_"+t.gu),vjs.getData=function(e){var t=(t=e[vjs.expando])||(e[vjs.expando]=vpando];if(e){delete vjs.cache[e];try{delete t[vjs.expando]}catch(e){t.removeAttribute?t.removeAttribute(vjs.expando):t[vjs.expando]=null}}},vjs.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},vjs.hasClass=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},vjs.addClass=function(e,t){vjs.hasClass(e,t)||(e.className=""===e.className?t:e.className+" "+t)},vjs.removeClass=function(e,t){var i,n;if(v ")}},vjs.TEST_VID=vjs.createEl("video"),function(){var e=document.createElement("track");e.kind="captions",e.srclang="en",e.label="English",vjs.TEST_VID.appendChild(e)}(),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.ction(){var e,t,=i[1]&&parseFloat(i[1]OLD_ANDROID=vjs window||window.DocumenD="backgroundSize"in vjs.s.obj.eac(e):i.setA,o={},a=",autoplay,ce.attributes).lengthfaultView.getComputtFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},vjs.browser={},vjs.el=function(e){return 0===e.indexOf("#")&&(e=e.slice(1)),document.getElementById(e)},vjs.formatTime=function(e,t){t=t||e;var i=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(o=n=i="-"),(o=0<o||0<s?o+":":"")+(n=((o||10<=a)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(e){return(e+"").repla(e,t){return t=t|JS)",e):vjs.log("LocalStoraref="'+e+'">x</a>'}).firstChild.href),e},vjs.parseUrl=function(e){var t,i,n=["protocol","hostname","port","pathname","search","hash","host"],o=vjs.creaElsplay:none; position:absolute;"),docume.log.history=[],vjs.log.error=function(){_logType("error",arguments)},vjs.log.warn=function(){_logType("warn",arguments)},vjs.findPosition=function(e){var t,i,n,o,a,s,r,l,c;return e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),t?(i=document.documentElement,n=document.body,o=i.clientLeft||n.clientLeft||0,a=window.pageXOffset||n.scrdow.pageYOffset||n.scrollTop,c=t.top+l-r,{left:vjs.round(s),top:vjs.round(c)}):{left:0,top:0}},vjs.arr={},vjs.arr.forEach=function(e,t,i){if(vjs.obj.isArray(e)&&t instanceof Function)for(var n=0,o=e.length;n<o;++n)t.call(i||vjs,e[n],n,e);return e},vjs.xhr=function(e,t){var i,n,o,a,s,r,l,c;"string"==typeof e&&(e={uri:e}),videojs.util.mergeOpteof e||(e=new Error(e)),t(e,n)},void 0===(i=window.XMLHttpRequest)&&(i=function(){try{return new window.Aew window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),(n=new i).uri=e.uri,o=vjs.parseUrl(e.uri),a=window.location,!(o.protocol+o.host!==a.protocol+a.host)||!window.XDomainRequest||"w.protocol||"file:"==a.protocol,n.onut(function(){4!==n.readyState&&(n.timedout=!0,n.abort())},e.timeout))):((n=new window.XDomainRequest).onload=l,n.onerisPlain(o)?e[i]=vjs.util.mergeOptiprototype.off=function(e,t){vjs.off(this,e,t)},vjs.EventEmitter.prototype.removeEventListener=vjs.EventEmitter.prototype.off,vjs.EventEmitter.prototype.one=functio=typeof e&&(e={type:t}),e=vjs.fixEvent(e),this.allowedEvents_rigger(this,e)},vjs.EventEmitter.ction(e,t,i){this.player_=e,this.options_=vjs.obj.copy(this.options_),t=this.options(t),this.id_=t.id||t.el&&t.el.id,this.idmponent_"+vjs.guid++),this.name_=t.name||null,this.el_=t.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}}),vjs.Component.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(e){return void 0===e?this.options_:this.options_=vjs.util.mergeOptions(this.options_,e)},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(e,t){return vjs.createEl(e,t)},vjs.Component.prototype.localize=function(e){var t=this.player_.language(),i=this.player_.languages();return i&&i[t]&&i[t][e]?i[t][e]:e},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.pe_},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(e){return this.childIndexhildIndex_[o.id()]=o),(n=n||r t,i=!1,n=this.children_.le,vjs.Component.prototype.initChildren=function(){var e,t,i,n,o=this,a=o.options(),s=a.children;if(s)if(n=function(e,t){void 0!==a[e]&&(t=a[e]),!1!==t&&(o[e]=o.addChild(e,t))},vjs.obj.isArray(s))for(var r=0;r<s.length;r++)i="strijs.Component.prototype.on=function(e,,a)}).guid=a.guid,this.on("dispos=a.guid,e.nodeName?(vjs.on(n,o,a),vjs.on(n,"dispose",r)):"function"==typeof e.on&&(n.on(o,a),n.on("dispose",r))),this},;return!e||"string"==typeof e||vjs.obj.isArray(e)?vjs.off(this.el_,e,t):(n=e,o=t,a=vjs.bind(this,i),this.off("dispose",a),e.nodeName?(vjs.off(n,o,a),vjs.off(n,"dispose",a)):(n.off(o,a),n.off("dispose",a))),this},vjs.Component.prototype.one=function(e,t,i){var n,o,a,s,r;return"string"==typeof e||vjs.obj.isArray(e)?vjs.one(this.el_,e,vjs.bind(this,t)):(n=e,o=t,a=vjs.bind(this,i),s=this,(r=}).guid=a.guid,this.on(n,o,r)),this},vjs.Component.prototype.trigger=function(e){return vjs.trigger(this.el_,e),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!nt.prototype.ready=function(e){return e&&(this.isReady_?e.call(this):(void 0===this.readyQueue_&&(this.readyQueue_=[]),this.readyQueue_.push(e))),this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var e=this.readyQueue_;if(e&&0<e.length){for(var t=0,i=e.length;t<i;t++)e[t].call(this);this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.hasClass=function(e){return vjs.hasClass(this.el_,e)},vjs.Component.prototype.addClass=function(e){return vjs.addClass(this.el_,e),this},vjs.Component.type.show=function(){omponent.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this}s},vjs.Component.prototype.disable=function(){n=function(e,t,i){if(void 0!==t)return null!==t&&!vjs.isNaN(t)||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",i||this.trigger("resize"),this;if(!this.el_)return 0;var n=this.el_.style[e],o=n.indexOf("px");return-1!==o?parseInt(n.slice(0,o),10):parseInt(this.el_["offset"+vjs.capitalize(e)],10)},vjs.Component.proype.emitTapEvents=function(){var t,e,i,n,o=0,a=null;this.on("touchstart",function(e){1===e.touches.length&&(a=vjs.obj.copy(e.touches[0]),o=(new Date).getTime(),t=!0)}),this.on("touchmove",function(e){1<e.touches.length?t=!1:a&&(i=e.touches[0].pageX-a.pagew Date).getTime()-o<200&&(e.preunction i(){this.clearTimeout(n)}var n=setTimeout(e,t);return i.guid="vjs-timeout-"+n,this.on("dispose",i),n},vjs.Component.prototype.clearTimeout=function(e){clearTimeout(e);function t(){}return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},vjs.Component.prototype.setInterval=function(l(e,t);return i.guid="vjs-inl=function(e){clearInterval(e);functio),role:"button","aria-live":"polext",innerHTML:this.localize(thispe.onFocus=function(){vjs.on(document,"keydown",vjs.bind(this,this.onKeyPressonent.call(this,e,t),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.on(e,"controlsvisible",this.update),this.on(e,this.playerEvent,this.update)}}),vjs.Slider.prototype.createEl=function(e,t){return(t=t||{}).className=t.className+" vjs-slider",t=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},t),vjs.Component.prototype.createEl.call(this,e,t)},vjs.Slider.prototype.onMouseDown=function(e){e.preventDefault(),vjs.blockTextSelection(),this.addClass("vjs-sliding"),this.on(document,"mousemove",this.onMouseMove),this.on(document,"mouseup",this.onMouseUp),this.on(document,"touchmove",this.onMouseMove),this.on(document,"toucheextSelection(),this.removeClouseMove),this.off(document,"mouseup",this.onMouseUp),this.off(document,"touchmove",this.onMouseMove),this.off(document,"touchend",this.onMouseUp),this.update()},vjs.Slider.prototype.update=function(){var e,tround(100*s,2)+"%"),i&&(i.el().style.width=vjs.round(100*r,tion(i),o=t=i.offsetWidth,a=Slider.prototype.onFocus=function(){tKeyPress=function(e){37==e.which||s.off(document,"keydown",this.ope.onClick=function(e){e.stopImm(e,t){return(t=t||{}).className=t.class,vjs.Menu=vjs.Component.extend(),vl";this.contentEl_=vjs.createEl(e,{className:"vjs-menu-content"});var t=vjs.Comvjs.MenuItem.prototype.createEl=function(e,t){return vjs.Button.prototype.createEl.call(t,vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(e){e?(this.addClass("extend({init:function(e,t){vjs.Buttor e=this.createMenu();this.menu&&thisprototype.buttonPressed_=!1,vjs.MenuButtEl().appendChiem(this.items[t]);return e},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(e){32==e.which||13==e.which?(this.buttonPressed_?this.unpressButton():this.pressButton(),e.preventDefault()):27==e.which&&(this.buttonPressed_&&this.unpressButton(),e.preventDefault())},vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&0<this.items.length&&this.items[0].elt be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};for(var errNum=0,cx,easyXdmTimer;errNum<vjs.MediaError.errorTypes.length;errNum++)vjs.MediaError[vjs.MediaError.errorTypes[errNum]]=errNum,vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]]=errNum;!function(){var e,t,i,n;for(vjs.browser.fullscreenAPI,t=(e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfuluestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen",en","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreextend({init:function(e,t,i){(this.tag=e).id=e.id||"vjs_video_"+vjs.guid++,this.tagAttributes=e&&vjs.getElementAttributes(e),t=vjs.obj.merge(this.getTagSettings(e),t),this.language_=t.language||vjs.options.language,this.languages_=t.languages||vjs.options.languages,this.cache_={},this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,t.reportTouchActivity=!1,this.isAudio("audio"===this.tag.nodeName.toLowerCase()),vjs.Component.call(thisobj.merge(t,i),e.hasChildNodes())for(var o,a,s=e.childNodes,r=0,l=s.length;r<l;r++)"source"===(a=(o=s[r]).nodeName.toLowerCase())?t.sources.push(vjs.getElementAttributes(o)):"track"===a&&t.tracks.push(vjs.getElementAttributes(o));return t},vjs.Player.prototype.createEl=function(){var t,i=this.el_=vjs.Component.prototype.createEl.call(this,"div"),e=this.tag;return e.removeAttribute("width"),e.removeAttribute("height"),t=vjs.getElementAttributes(e),vjs.obj.each(t,function(e){"class"==e?i.className=t[e]:i.setAttribute(e,t[e])}),e.id+=s.addClass("vjs-paused"),this.widntNode.insertBefore(i,e),vjs.insertFirst(e,i),this.el_=i,this.on("lo,this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("pge),i},vjs.Player.prototype.loadTech=function(e,t){this.tech&&this.unloadTech(),"Html5"!==e&&this.tag&&(vjs.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=e,this.isReady_=!1;var i=vjs.obj.merge({source:t,parentEl:this.el_},this.options_[e.toLowerCase()]);t&&(this.currentType_=t.type,t.src==this.cache_.src&&eojs[e](this,i),this.tech.reaTech=function(){this.isReady_=!1,this.tech.dispose(),this.tech=!1}ded"),this.error(null),this.ped=function(e){return void 0!==e?(thiss):this.hasStarted_},vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0)},vjs.Player.prototype.onWaiting=function(){t(){this.addClass("vjs-seekingmeUpdate,vjs.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){this.addClass("vjs-endeds.play()):this.paused()||this.pau?this.addClass("vjs-live"):thifullscreen"):this.removeClass("vjs-prototype.cache_,vjs.Player.pr(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[e](t)});else try{this.tech[e](t)}catch(e){throw vjs.log(e),e}},vjs.Player.prototype.techGet=function(t){if(this.tech&&this.tech.isReady_)try{return this.tech[t](s.techName+" playback techno"play"),this},vjs.Player.prction(){return!1!==this.techGet("paused"d 0!==e?(this.techCall("setCurrentTime",e),this):this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(e){return void 0!==e?(this.cache_.duration{return this.duration()-this.currentTimtype.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall("setVolume",t),vjs.setLocalStorage("volume",t),this):(t=parseFloat(this.techGet("volume")),isNaN(t)?1:t)},vjs.Plpe.isFullscreen_=!1,vjs.Player.prototynction(e){return vjs.log.warn('players.isFullscreen(document[t.fullscreenElemfullscreenchange")})),this.el_[t.reqequestFullScreen() has been deprecchange")),this},vjs.PlayewOnEscKey=function(e){27===e.keyCigOverflow,vjs.removeClass("exitFullWindow")},vjs.Player.prder;t<i.length;t++){var n=vjs.caif(o.isSupported())for(var a=0,s=e;a<s.length;a++){var r=s[a];if(o.canPlaySource(r))return{source:r,tech:n}}}else vjs.log.error('The "'+n+'" tech is undefined. Skipped browser.obj.isArray(e)?this.sourc.canPlaySource(e)?this.sourceList_([e]):(this.cache_.src=chCall("setSource",e):this.techCall("src",e.src),"auto"==this})},0),this.triggerReady())},vjs.Player.prototype.load=function(){return this.techCload=e,this):this.techGet("preload")},vjs.Player.prototype.ater_:(e=e||"",this.poster_=e,this.techCall("setPoster",e),this.trigger("posterchange"),this)},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&((thiss-controls-disabled"),this.addClass("vjs-controls-enabled"),this.tris("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_},vjs.Player.prototype.err.removeClass("vjs-error")):(e instanceof vjs.MediaError?this.error_=e:this.error_=new vjs.MediaError(e),this.trigger("error"),this.addClass("vjs-error"),vjs.log.error("(CODE:"+this.error_.code+" "+vjs.MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_)),this)},vjs.Player.prototype.ended=function(){return thistion(){return this.techGet("seeking")},vjs.PlaPlayer.prototype.userActive=function(e){return void 0!==e?((e=this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivunction(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),Player.prototype.listenForUserActireenX,s=e.screenY,r())}function t(){r(),(),this.clearInterval(n)}var n,o,a,s,r=vjs.his.on("mousemove",e),this.on("mouseup",i),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o),0<(e=this.options().inactivityTimeout)&&(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},vjs.Player.prototype.playbackRate=function(e){return void 0!==e?(this.teckRate?this.techGet("playbackRate"):1},vjs.Player.prototype.isAudio_=!1,vjs.Player.prototype.isAudio=function(e){return voideturn this.tech&&this.tech.remoteTextTri)},vjs.Player.prototype.addRemoteTextTrack=function(e){return this.tech&&this.tech.addRemoteTextTrack(e)},vjs.Player.prototype.removeRemoteTextTrack=function(e){this.tech&&this.tech.removeRemoteTextTrons_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},liveDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteTreturn vjs.createEl("div",{className:"vjs-control-bar"})},vjs.LiveDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.LiveDisplay.prototype.createElntentEl_),e},vjs.PlayToggle=vjs.Button.extend({pe.buildCSSClass.call(this)},vjs.PlayToggle.prototype.onClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},vjs.PlayToggle.prototype.onPlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.el_.children[0].children[0].innerHTML=this.localize("Pause")},vjs.PlayToggle.prototype.onPause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.el_.children[0].children[0].innerHTML=this.localize("Play")},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(thiName:"vjs-current-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),e.appendChild(this.contentEl_),e},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var e=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.contentEl_.innerHTML='<span class=vjs-duration vjs-time-controls vjs-control"});retendChild(this.contentEl_),e},vjs.DurationDisplay.prototype.updateContent=function(){var e=this.player_.duration();e&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localinit:function(e,t){vjs.Component.call(t.extend({init:function(e,t){vjs.Component.call(this,e,t),this.on(e,"timeupdate",this.updateContent)}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var e=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00","aria-live":"off"}),e.appendChild(this.contentEl_),e},vjs.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -"+vjs.formatTime(this.player_.remainingTime()))},vjs.FullscreenToggle=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FurHTML=this.localize("Fullscreen")ocalize("Non-Fullscreen"))},vjs.Prfunction(){return vjs.Component.prjs.Slider.call(this,e,t),this.onssBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},vjs.SeekBar.prototype.updateARIAAttributes=function(){var e=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(e,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()},vjs.SeekBar.prototype.onMouseDown=function(e){vjs.Slider.prototype.onMouseDown.call(this,e),this.player_.scrubbing=!0,this.player_.addClass("vjs-scrubbing"),this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},vjs.SeekBar.prototype.onMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t==this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},vjs.SeekBar.prototype.onMouseUp=function(e){vjs.Slider.prototype.onMouseUp.call(this,e),this.player_.scrubbing=!1,this.player_.removeClass("vjs-scrubbing"),this.videoWasPlaying&&this.player_.play()},vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.player_.currentTime()-5)},vjs.LoadProgressBar=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.on(e,"progress",this.update)}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createt){return 100*(e/t||0)+"%"}var t,i,n,o,a=thisyle.width=e(n-i,r);for(t=l.length;t>a.length;t--)this.el_.removeChild(l[t-1])},vjs.PlayProgressBar=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.c</span>"})},vjs.SeekHandle=vjs.SliderHandle.extcreateEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"})},vjs.SeekHandle.prototype.updateContent=function(){var e=this.player_.scrubbing?tatTime(e,this.player_.duration())+"<!1===e.tech.featuresVolumeControl&&==e.tech.featuresVolumeControl?this.,vjs.VolumeControl.prototype.opti.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(e,t){vjs.Slider.call(this,e,t),this.on(e,"volumechange",this.updateARIAAttributes),e.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototr","aria-label":"volume level"})},vjs.VolumeBar.prototype.onMouseMove=function(e){this.player_.muted()&&this.player_.muted(!1),this.player_.volume(this.calculateDistance(e))},vjs.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.v){this.player_.volume(this.playedle.prototype.createEl=function(){return vjs.SlidlumeControl?this.addClass("vjs-hidden"):thise("Mute")+"</span></div>"})},vjs.MuteToe.update=function(){var e=this.player_.vmute")):this.el_.children[0].children[0].innerHTML!=this.localize("Mute")&&(this.el_.children[0].children[0].innerHTML=this.localizMenuButton.call(this,e,t),this.on(e,"volumechange",this.volumeUpdate),e.tech&&!1===e.tech.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(e,"loadstart",function(){!1===new vjs.Menu(this.player_,{contentElType:"div"})lick=function(){vjs.MuteToggle.prototype.onClick.call(thisateEl=function(){return vjs.Button.prototype.iv>"})},vjs.VolumeMenuButton.prototype.volumeUpdate=vjs.Mut,this.on(e,"loadstart",this.updateVisibility),this.on(vjs.PlaybackRateMenuButton.prototype.className="vtype.createEl.call(this);return this.labelEl_=vjs.createEl("div",{classNamayer()),t=this.player().options().playbackRat{rate:t[i]+"x"}));return e},vjs.PlaybackRatAttribute("aria-valuenow",this.player()ackRate(),t=this.player().options()..PlaybackRateMenuButton.prototype.pjs.PlaybackRateMenuButton.prototyhidden"):this.addClass("vjs-hidden")},vjs.PlaybackRateMenuButton.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},vjs.PlaybackRateMenuItem=vjs.MenuItem.extend({contentElType:"button",init:frate=parseFloat(i,10);t.label=i,t.selected=1===n,vjs.MenuItem.call(this,e,t),this.on(e,"ratechange",this.update)}}),vjs.PlaybackRateMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.ptend({init:function(e,t){vjs.Button.call(this,e,t),this.update(),e.on("posterchange",vjs.bind(this,this.update))date),vjs.Button.prototype.dispose.caljs.createEl("img"),e.appendChild(t),e?this.show():this.hide()},vjs.PosterImage.prototype.setSrc=functi=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTMLype.onClick=function(){this.player_.play()},vjs.ErrorDispeateEl("div"),e.appendChild(this.contentEl_),e},vjs.ErrorDonent.extend({init:function(e,t,i){(t=t||{esTimeupdateEvents||this.manualTimeUpdat|this.emulateTextTracks(),this.initTextTrackListeners()}}),vjs.MediaTechController.prototype.initControlsListeners=function(){function e(){t.controls()&&!t.usingNativeControls()&&this.addControlsListeners()}var t=this.player();this.ready(e),this.on(t,"controlsenabled",e),this.on(t,"controlsdisabled",this.removeControlsListeners),this.ready(function(){this.networkState&&0<this.networkState()&&this.player().trigger("loadstart")})},vjs.MediaTechController.prototype.addControlsListeners=function(){var t;this.on("mousedown",this.onClick),this.on("touchstart",function(e){t=this.player_.userActive()}),this.on("touchmove",function(e){t&&this.player().reportUve"),this.off("touchleave"),this.off("touchcancel"),thihis.player().play():this.player().pause())},vjs.Meds.manualProgress=!0,this.trackProgress()},vjs.MediaTechConss()},vjs.MediaTechController.prototype.trigger("progress"),1===(this.bufferedPercent_=e)&&pTrackingProgress=function(){this.clearInterval(this.progressInterva e=this.player_;this.manualTimeUpdates=!0,this.on(e,"play",this.trackCurrentTime),this.on(e,"pause",this.stopTrackingCurrentTime),this.one("timeupdate",function(){this.featuresTimeupdateEvents=!0,this.manualTimeUpdatesOff()})},vjs.MediaTechController.prototype.manualTimeUpdatesOff=function(){var e=this.player_;this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off(e,"play",this.trackCurrentTime),this.off(e,"pause",this.stopTrackingCurrentTime)},vjs.MediaTechController.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.player().trigger("timeupdate")},250)},vjs.MediaTechController.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.dispose=function(){this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),vjs.Component.prototype.dispose.call(this)},vjs.MediaTechController.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.player().trigger(&es,function(){i.removeEventListener("removetrackr e,t,i,n=this.player_;window.WebVTT||((i=document.crwindow.WebVTT=!0),(t=this.textTracks())&&(e=function(){vthis[e]).removeEventListener("cuechange",vjs.bind(i,i.updateDisplay)),"showing"===t.mode&&t.addEventListener("cuechange",vjs.bind(i,i.updateDisplay))},t.addEventListener("change",e),this.on("dispose",vjs.bind(this,function(){t.removeEventListener("change",e)})))},vjs.MediaTechController.prototype.textTracks_,vjs.MediaTechController.prototype.textTracks=function(){return this.player_.textTracks_=this.player_.textTracks_||new vjs.TextTrackList,this.player_.textTracks_},vjs.MediaTechController.proew vjs.TextTrackList,tn&&(o.language=nntroller.prototype.addremoteTextTracks().addTrack_(t),{s().removeTrack_(e),this.remoteTextTracks().removeTrack_(e)},vjs.MediaTechController.prototype.setPoster=function(){},vjs.MediaTechController.prototype.featuresVolumeControl=!0,vjs.MediaTechController.prototype.featuresFullscreenResize=!1,vjs.MediaTechController.prototype.featuresPlaybackRate=!1,vjs.MediaTechController.prototype.featuresProgressEvents=!1,vjs.MediaTechController.prototype.featuresTimeupdateEvents=!1,vjs.MediaTechController.prototype.featuresNativeTextTracks=!1,vjs.MediaTechController.withSourceHandlers=function(n){n.registerSourceHandler=function(e,t){var i=(i=n.sourceHandlers)||(n.sourceHandlers=[]);void 0===t&&(t=i.length),i.splice(t,0,e)},n.selectSourceHandler=function(e){for(var t=n.sourceHandlers||[],i=0;i<t.length;i++)if(t[i].canHandleSource(canHandleSource(e):""},n.prototype.setSource=functiorceHandler),this.currentSource_=e,this.sourceHandler_=t.handleSource(e,this),this.on("dispose",this.disposeSourceHandler),this},n.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&this.sourceHandler_.dispose()}},vjs.media={}}(),vjs.Html5=vjs.MediaTechController.extend({init:function(e,t,i){var n,o,a,s,r;!1!==t.nativeCaptions&&!1!==t.nativeTextTracks||(this.featuresNativeTextTracks=!1),vjs.MediaTechController.call(this,e,t,i),this.setupTriggers();var l=t.source;if(l&&(this.el_.currentSrc!==l.src||e.tag&&3===e.tag.initNetworkState_)&&this.setSource(l),this.el_.hasChildNodes()){for(o=(n=this.el_.childNodes).length,r=[];o--;)"track"===(s=n[o]).nodeName.toLowerCase()&&(this.featuresNativeTextTracks?this.remoteTextTracks().addTrack_(s.track):r.push(s));for(a=0;a<r.length;a++)this.el_.removeChild(r[a])}this.featuresNativeTextTracks&&this.on("loadstart",vjs.bind(this,this.hideCaptions)),vjs.TOUCH_ENABLED&&!0===e.options().nativeControlsForTouch&&this.useNativeControls(),e.ready(function(){this.tag&&this.options_.autoplay&&this.paon(){vjs.Html5.disposeMediaElemenis.player_,a=o.tag;if(!a||!1===this.movingMediaElementInDOM){if(a?(n=a.cloneNode(!1),vjs.Html5.disposeMediaElement(a),a=n,o.tag=null):(a=vjs.createEl("video"),i=videojs.util.mergeOptions({},o.tagAttributes),vjs.TOUCH_ENABLED&&!0===o.options().nativeControlsForTouch||delete i.controls,vjs.setElementAttributes(a,vjs.obj.merge(i,{id:o.id()+"_html5_api",class:"vjs-tech"}))),(a.player=o).options_.tracks)for(r=0;r<o.options_.tracks.length;r++)e=o.options_.tracks[r],(t=document.createElement("track")).kind=e.kind,t.label=e.label,t.srclang=e.srclang,t.src=e.src,"default"in e&&t.setAttribute("default","default"),a.appendChild(t);vjs.insertFirst(a,o.oid 0!==o.options_[l]&&(c[l]=a,c)}return a},vjs.Html5.prototype.hideCaptions=function(){for(var e,t=this.el_.textTracks,i=t.length,n={captions:1,subtitles:1};i--;)(e=t[i])&&e.kind in n&&(e.mode="disabled")},vjs.Html5.prototype.setupTriggers=function(){for(var e=vjs.Html5.Events.length-1;0<=e;e--)this.on(vjs.Html5.Events[e],this.eventHandler)},vjs.Html5.prototype.eventHandler=function(e){"error"==e.type&&this.error()?this.player().error(this.error().code):(e.bubbles=!1,this.player().trigger(e))},vjs.Html5.tControls(!1)},o.on("controlsenabledntTime=function(e){try{this.el_.currentTime=e}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}},vj||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(e){this.el_.volume=e},vjs.Html5.prototype.muted=function(){return this.el_.muted},vjs.Html5.prototype.setMuted=function(e){this.el_.muted=e},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){return!("function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(vjs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))},vjs.Html5.prototype.en.el_;"webkitDisplayingFullscreen"in e&&this.one("webkitbeginfullscreen",function(){this.player_.isFullscreen(!0),this.one("webkitendfullscreen",function(){this.player_.isFullscreen(!1),this.player_.trigger("fullscreenchange")}),this.player_.trigger("fullscreenchange")}),e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},vjs.Html5.prototype.setSrc=function(e){this.el_.src=e},vjs.Html5.prototype.load=function(){this.el_.load(_.poster},vjs.Html5.prototype.setis.el_.preload=e},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(e){this.el_.autoplay=e},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(e){this.el_.controls=!!e},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(e){this.el_.loop=e},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.prototype.playbackRate=function(){return this.el_.playbackRate},vjs.Html5.prototype.setPlaybackRaller.prototype.textTraeTextTracks?this.el_.addTextTrack(e,t,i):vjs.MediaTechController.prototype.addTextTrack.call(this,e,t,i)},vjs.Html5.prototype.addRemo&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),this.el().appendChild(t),"metadata"===t.track.kind?t.track.mode="hidden":t.track.mode="disabled",t.onload=function(){var e=t.track;2<=t.readyState&&("metadata"===e.kind&his.remoteTextTracks().addTrack_(t.track),t},vjs.Html5.prototype.removeRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return vjs.MediaTechController.prototype.removeRemoteTextTrack.call(this,e);var t,i;for(this.remoteTextTracks().removeTrack_(e),t=this.el().querySelectorAll("track"),i=0;i<t.length;i++)if(t[i]===e||t[i].track===e){t[i].parentNode.removeChild(t[i]);break}},vjs.Html5.isSupported=function(){try{vjs.TEST_VID.volume=.5}catch(e){return!1}return!!vjs.TEST_VID.canPlayType},vjs.MediaTechController.withSourceHandlers(vjs.Html5),vjs.Html5.nativeSourceHandler={},vjs.Html5.nativeSourceHandler.canHandleSource=function(e){var t;function i(e){try{return vjs.TEST_VID.TEST_VID.volume;return vjs.TEjs.TEST_VID.playbackRate=e/2+.1,e!==vjs.TEST_VID.playbackRate},vjs.Html5.supportsNativeTextTracks=function(){var e=!!vjs.TEST_VID.textTracks;return e&&0<vjs.TEST_VID.textTracks.length&&(e="number"!=typeof vjs.TEST_VID.textTracks[0].mode),e&&vjs.IS_FIREFOX&&(e=!1),e},vjs.Html5.prototype.featureize=!0,vjs.Html5.prototype.featuresProgressEvents=!0,vjs.Html5.prototype.featuresNativeTextTracks=vjs.Html5.supportsNativeTextTracks(),function(){var t,i=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,n=/^video\/mp4/i;vjs.Html5.patchCanPlayType=function(){4<=vjs.ANDROID_VERSION&&(t=t||vjs.TEST_VID.constructor.prototype.canPlayType,vjs.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&i.test(e)?"maybe":t.call(this,e)}),vjs.IS_OLD_ANDROID&&(t=t||vjs.TEST_VID.constructor.prototype.canPlayType,vjs.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&n.test(es.Html5.unpatchCanPlayType=function(){var e=vjonstructor.prototype.canPlaymptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationcha(","),vjs.Html5.disposeMediaElement=function(e){if(e){for(e.player=null,e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},vjs.Flash=vjs.MediaTechController.extend({init:function(e,t,i){vjs.MediaTechController.call(this,e,t,i);var n=t.source,o=t.parentEl,a=this.el_=vjtProxyFunction:"videojs.Flash.on.loop,muted:r.muted},t.flashVars-tech"},t.attributes);n&ource(n)}),vjs.insertFirst(ad(),this.play(),this.currentTime(t.startTime)}),vjs.IS_FIREFOX&&this.reemove",bubbles:!1})})}),e.on("stageclick",e.reportUserActivity),this.el_=vjs.Flash.embed(t.swf,a,l,c,d)}}),vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Flash.prototype.play=function(){this.el_.vjs_play()},vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()},vjs.Flash.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},vjs.Flash.prototype.setSrc=function(e){var t;e=vjs.getAbsoluteURL(e),thtion(){t.play()},0)},vjs.Flashontroller.prototype.setCurrentTime.call(this)},vjs.Flash.protong()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},vjs.Flash.prototype.currentSrc=function(){return this.currentSoction(){this.el_.vjs_load()},vjs.Flash.prot_.vjs_getProperty("poster")},vjs.Flash.prototype.setPoster=function(){},vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))},vjs.Flash.prototype.supportsFullScreen=function(){return!1},vjs.Flash.prototype.enterFullScreen=function(){return!1},function(){var e,i=vjs.Flash.prototype,t="rtmpConnection,rtmpStplit(","),n="errore,duration,startOfe){i[e]=function().canHandleSourcesterSourceHandler(vjs.F.player.trigger(t)},vjs.Flash.onError=function(e,t){var i=vjs.el(e).player,n="FLASH: "+t;:4,message:n}):i.error(nlication/x-shockwave-flashlash 2.0"]||navigator.plugins["Shockwave Flash"]).description.rch(e){}}return t.split(",")},vjs.Flash.embed=function(e,t,i,n,o){var a=vjs.entNode.replaceChild(s,t);var l=r.childNor o="",a="",s="";return t&&vjs.obj.each(t,function(e,t){o+=e+"="+t+"&amp;"}),i=vjs.obj.merge({movie:e,flve-flash" '+s+">"+a+"</object>"},vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},vjs.Flash.streamFromParts=function(e,t){return e+"&"+t},vjs.Flash.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var i,ion(){this.activeCues,d&&(this.trigger("cuechange"),d=!1)}),"disabled"!==n&&t.player_.on("timeupdate",c),Object.defineProperty(t,"kind",{get:function(){return o},set:Function.prototype}),Object.defineProperty(t,ineProperty(t,"id",{get:function()==tie<rototype}),e.src?h(e.t.length;i++)t[i]!==this&&t[i].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},vjs.TextTrack.prototype.removeCue=function(e){for(var t=0,i=this.cues_.length,n=!1;t<i;t++)this.cues_[t]===e&&(this.cues_.splice(t,1),n=!0);nr(e):(n.loaded_=!0,void o(i,n))}))},o=fu,i.flush()},p=function(e,t){var i;if(null===1/0&&(a=0),o<=a)return-1;for(i=Math.max(0<=a?a:o-Math.abs(a),0);i<o;){if(i in n&&n[i]===e)return i;i++}return-1}}(),vjs.TextTrackList=function(e){var t,i=thiackList.prototype=vjs.obj.create(vjs.EveList.prototype.allowedEvents_)vjs.TextTracs_.length;""+t in this||Object.defineProperty(this,t,{get:function(){retTrackList.prototype.getTrackById=function(e){foueList=function(e){var t,i=this;if(vjs.I.prototype[t];if(vjs.TextTrackCueList.protot{""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})},i<o)for(n=i;n<o;n++)t.call(this,n)},vjs.TextTrackCueList.prototype.getCueById=function(e){for(var t,i=0,n=this.length,o=null;i<n;i++)if((t=this[i]).id===e){o=t;break}return o},function(){"use strict";vjs.TextTrackDisplay=vjs.Component.extend({init:function(n,e,t){vjs.Component.call(this,n,e,t),n.on("loadstart",vjs.bind(this,this.toggs.bind(this,this.updateDisplay)),t=n.options_.ocessCues(window,e.activeCues,this.el_),n=a.leng.textShadow="1px 1px #ccc, 0 1px #ccc, -1pntSize),t.style.fontSize=i*o.fontPercent+"px",t.style.height="small-caps":t.firstChild.style.fontFamily=l[o.fontFamily])}},vje;if(this instanceof vjs.OffTextTrackMenuItem)fod&&"showing"===e.mode){n=!1;break}this.selected(catch(e){}n||(n=document.createEvent("Event"ode:"disabled"},vjs.TextTrackMenuItem.call(this,e,t),this.selected(!0)}}),vjs.CaptionSettingsMenuItem=vjs.TextTrackMenuItem.extend({init:function(e,t){t.track={kind:t.kind,player:e,label:t.kind+" settings",default:!1,mode:"disabled"},vjs.TextTrackMenuItem.call(this,e,t),this.addClass("vjs-texttrack-settings")}}),vjs.CaptionSettingsMenuItem.prototype.on),this.items.length<=1&&this.hide(),i&&(n=vjs.bind(this,this.update),i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.player_.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}}),vjs.TextTrackButton.prototype.createItems=function(){var e,t,i=[];if(!(this instanceof vjs.CaptionsButton)||this.player().nd:this.kind_})),i.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_})),!(t=this.player_.textTracks()))return i;for(var n=0;n<t.length;n++)(e=t[n]).kind===this.kind_&&i.push(new vjs.TextTrackMenuItem(this.player_,{track:e}));return i},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(e,t,i){vjs.TextTrackButton.call(this,e,t,i),this.el_.setAttribute("aria-label","Captions Menu")}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.CaptionsButton.prototype.update=function(){var e=2;update.call(this),this.player().tech&&this.player().tech.featuresNativeTextTracks&&(e=1),this.items&&this.items.length>e?this.show():this.hide()},vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(e,t,i){vjs.TextTrackButton.call(this,e,t,i),this.el_.setAttribute("aria-label","Subtitles Menu")}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.clape.kind_="chapters",vjs.ChaptersButton.prototytion(){var e,t=[],i=this.player_.textTracksnuItem(this.player_,{track:ut(vjs.bind(this,function(){this.createMenu()})his.el().querySelector(".vjs-window-opacityalue="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'})},vjs.TextTrackSettings.prototype.getValues=function(){var e,t=this.el(),i=d(t.querySelector(".vjs-edge-style select")),n=d(t.querySelector(".vjs-font-family sctor(".vjs-bg-color > select")),r=d(t.querySeontPercent:window.parseFloat(d(t.querySelectorent"===e&&1===c[e])&&delete c[e];return c},vjs.TextTrackSettings.prototype.setValues=function(e){var t,i=this.el();n(i.querySelector(".vjs-edge-style select"),e.edgeStyle),n(i.querySelector(".vjs-font-family select"),e.fontFamily).player_.options().persistTextTrackSettings){e=this.getValues();try{vjs.isEmpty(e)?window.localStorage.removeItem("vjs-text-track-settings"):window.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e))}catch(e){}}},vjs.TextTrackSettings.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}}(),vjs.JSON,void 0!==window.JSON&&"function"==typeof window.JSON.parse?vjs.JSON=window.JSON:(vjs.JSON={},cx=/[\u0000\u00ad\u0\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,vjs.JSON.parse=function(tee,t){var i,n,o=e[t];if(o&&"object"==ion(e)ion(){return m},set:fe,t){var l={"":!0,up:!0};function c(e){return"number"=:function(){rechorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!c(e))throw new Error("ViewportAnchorY must be between 0 and 100.");srn a);a=n(){&t.toLowal strinect.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return i.prototype=e,new i};function i(){}function c(e,t){this.name="ParsingError",this.code=esage}function h(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}fu a){"string"==typeof a[s]&&(2===(o=a[s].split(i)).length&&t(o[0],o[1]))}}((c.prototype=t(Error.prototype)).constructor=c).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},d.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:funion(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var p={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},f={v:"title",lang:"lang"},g={rt:"ruby"};function l(a,i){function t(e){return p[e]}for(var e,n,o,s=a.document.createElement("div"),r=s,l=[];null!==(e=function(){if(!i)return null;var e,t=i.match(/^([^<]*)(<[^>]+>?)?/);return e=t[1]?t[1]:t[2],i=i.substr(e.length),e}());)if("<"!==e[0])r.appendChild(a.document.createTextNode(function(e){for(;u=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(u[0],t);return e}(e)));else{if("/"===e[1]){l.length&&l[l.length-1]===e.substr(2).replace(">","")&&(l.pop(),r=r.parentNode);continue}var c,d=h(e.substr(1,e.length-2));if(d){c=a.document.createProcessingInstruction("timestamp",d),r.appendChild(c);continue}var u=e.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!u)continue;if(!(c=function(e,t){var i=m[e];if(!i)return null;var n=a.document.createElement(i);n.localName=i;var o=f[e];return o&&t&&(n[o]=t.trim()),n}(u[1],u[3])))continue;if(n=r,g[(o=c).localName]&&g[o.localName]!==n.localName)continue;u[2]&&(c.className=u[2].substr(1).replace("."," ")),l.push(u[1]),r.appendChild(c),r=c}return s}var r=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68626492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];function v(e){var t,i=[],n="";if(!e||!e.childNodes)return"ltr";function a(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}for(a(i,e);n=function e(t){if(!t||!t.length)return null;var i=t.pop(),n=i.textContent||i.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?o[t.length=0]:n}return"ruby"===i55, 255, 1)",a="rgba(0, 0, 0, 0.8)";n&&(o="rgb(255, 255, 255)",a="rgb(0, 0, 0)"),y.call(this),this.cue=t,this.cueDiv=l(e,t.text);var s={color:o,backgroundColor:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(s.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",s.unicodeBidi="plaintext"),this.applyStyles(s,this.cueDiv),this.div=e.document.createElement("div"),s={textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",positionight&&(this.lineHeight=13)}function wpToLines||0<=e.line&&e.lk||!e.track.textTrackList||!e.track.textTrackList.mediaElemex","-x"],i="width";brabs(d)>u&&(d=d<0?-1:1,d*e(h,d)}else{var p=nical){case"":t.applyStyles({top:t,n=new _(t)}var m=function(e,t){s<o&&(i=new _(e),o=s),e=new _()&&(t.style[i]=e[i])},yon(e){return thi1},_.prototype.within=s.bottom<=e.bo.div?e.div?e.div.getBoundingClientRect():||t,bottom:e.bottom||n+(e.heigh);return decodeURIComponent(encodeURIComponent(e))}}},n.convertCueToDOt].hasBeenReset||!e[t].displayState)return 1}(o)){var s=[],r=_.getSimpleBoxPosition(a),l={font:Math.round(.05*r.height*100)/100+"px sans-serif"};!function(){for(var e,t,i=0;i<o.length;i++)t=o[i],e=new b(n,t,l),a.appendChild(e.div),w(0,e,r,s),t.displayState=e.div,s.push(_.getSimpleBoxPosition(e))}()}else for(var t=0;t<o.length;t++)a.appendChild(o[t].displayState)},(n.Parser=function(e,t,i){i||(i=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof c))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,a=this;function i(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),i}function n(e){u(e,function(e,t){switch(e){case"Region":i=t,o=new d,u(i,function(e,t){switch(e){case"id":o.set(e,t);break;case"width":o.percent(e,t);break;case"lines":o.integer(e,t);break;case"regionanchor":case"v,n.get("y"));break;case"scroll":o.alt(e,t,["up"])}},/=/,/\s/),o.has("id")&&((n=new(a.vttjs.VTTRegion||a.window.VTTRegion)).width=o.get("width",100),n.lines=o.get("lines",3),n.regionAnchorX=o.get("regionanchorX",0),a.state){case"HEADER":/:/.test(t)?n(t):t||(a.state="ID");continue;case"NOTE":t||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){a.state="NOTE";break}if(!t)continue;if(a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,""),a.state="CUE",-1===t.indexOf("--\x3e")){a.cue.id=t;continue}case"CUE":try{!function(t,e,a){var i,n,s,o=t;function r(){var e=h(t);if(null===e)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=r(),l(),"--\x3e"!==t.substr(0,3))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);t=t.substr(3),l(),e.endTime=r(),l(),i=t,n=e,s=new d,u(i,function(e,t){switch(e){case"region":for(var i=a.length-1;0<=i;i--)if(a[i].id===t){s.set(e,a[i].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),o=n[0];s.intiddle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),n.region=s.get("region",null),n.vertical=s.get("vertical",""),n.line=s.get("line","auto"),n.lineAlign=s.rt"),n.snapToLines=s.get("snapToLines",!0),n.size=s.get("size",100),n.align=s.get("align","middle"),n.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},n.align),n.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},n.align)}(t,a.cue,a.regionList)}catch(e){a.reportOrThrowError(e),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var r=-1!==t.indexOf("--\x3e");if(!t||r&&(s=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=t;continue;case"BADCUE":t||(a.state="ID");continue}}}catch(e){a.reportOrThrowError(e),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new c(c.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onfluttjsn(n)uerySeltrack"),a=o.length,s=this,r=(o[0],0),l=!0,c=n.onTrackSe"==s.techName?s.src([{type:type="video/youtube",src&&"audio"==n.mediaType?s.src([{type:"audio/mpeg",src:t}Name.replace(/\bcurrentTrack\b/,"nonPlayingTrack"));e.className]),l=!0),{tracks:o,trackCount:a,play:function(){return xt:function(){var e=r+1;(e<0||a<e)&&(e=0),i(o[et("HLTenantKey")},get:function(e){return Cookies.get(||(Function.prototype.bind=function(e){var t=this;ients,1);return function(){return t.apply(e,0===arototype.trim=function(){return this.replace(/^\s+/,"").replype||(Array.prototype.indexOf=function(e,t){void 0===t&&if(t in this&&this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){for(void 0===t&&(t=this.length-1),t<0&&(t+=this.length),t>this.length-1&&(t=this.length-1),t++;0<t--;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;i<n;i++)i in this&&e.call(t,this[i],i,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var i=new Array(this.length),n=0,o=this.length;n<o;n++)n in this&&(i[n]=e.call(t,this[n],n,this));return i}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var i,n=[],o=0,a=this.length;o<a;o++)o in this&&e.call(t,i=this[o],o,this)&&n.push(i);return n}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var i=0,n=this.length;i<n;i++)if(i in this&&!e.call(t,this[i],i,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=functh;i<n;i++)if(i in this&&e.call(t,this[i],i,this))return!0;return!1}),"endsWith"in String.prototype||(String.prototype.endsWith=function(e){return this.match(e+"$")==e}),"undefined"==typeof easyXDM&&(easyXdmTimer=setInterval(function(){"undefined"!=typeof easyXDM&&clearInterval(easyXdmTimer)},100));var pathArray=window.location.href.split("/"),protocol=pathArray[0],host=pathArray[2],authTokenRefreshUrl=protocol+"//"+host+"/HigherLogic/RefreshAPIAuthToken.aspx/Refresh",HLeasyXDM={easyXDM:easyXDM.noConflict("HLeasyXDM")};function hl_webmethod_ajax(e,t,i,n,o){$.ajax({url:e,type:i,contentType:"application/json; charset=utf-8",datatype:"application/json",data:JSON.stringify(t),success:function(e){e.d&&(e=e.d),e.Error?hl_webmothod_handleErrorResponse(e):"function"==typeof n&&n(e,o)}})}function hl_webapi_refresh_cookie(e,t,i){hl_webapi_ajaxCallHandler("/Authentication/GetAuthToken?tenantkey="+e+"&token="+t,null,"GET",e,t,function(e,t){"true"==e&&CrestApiCookies.set(i,"true",{expires:1,path:"/",domain:document.domain.substring(document.domain.indexOf(".")+1)})},null,!0,function(e,t){CrestApiCookies.remove(i,{})})}function hl_webapi_remove_cookie(e,t,i,n){hl_webapi_ajaxCallHandler("/Authentication/ExpireAuthToken?cookieName="+i,null,"GET",e,t,function(e,t){Cookies.remove(n)},null,!1,null)}function hl_webapi_ajax(t,i,n,e,o,a,s,r,l,c){var d=void 0!==r&&r;void 0!==CrestApiCookies.getHLAuthToken()&&void 0!==CrestApiCookies.getTenantKey()?hl_webapi_ajaxCallHandler(t,i,n,CrestApiCookies.getTenantKey(),CrestApiCookies.getHLAuthToken(),a,s,d,l):$.ajax({type:"POST",url:authTokenRefreshUrl,data:"{}",contentType:"application/json; charset=utf-8",success:function(e){e.d&&(void 0!==CrestApiCookies.getHLAuthToken()&&void 0!==CrestApiCookies.getTenantKey()?hl_webapi_ajaxCallHandler(t,i,n,CrestApiCookies.getTenantKey(),CrestApiCookies.getHLAuthToken(),a,s,d,l):("undefined"==c?alert("Your session has expired. Please login."):alert(c),window.location=window.location.href))}})}function hl_webapi_ajax_formData(t,i,n,o,a,e,s){var r=void 0!==e&&e;void 0!==CrestApiCookies.getHLAuthToken()&&void 0!==CrestApiCookies.getTenantKey()?hl_webapi_ajaxCallHandler_formData(t,i,n,CrestApiCookies.getTenantKey(),CrestApiCookies.getHLAuthToken(),o,a,r):$.ajax({type:"POST",url:authTokenRefreshUrl,data:"{}",contentType:"application/json; charset=utf-8",success:function(e){e.d&&(void 0!==CrestApiCookies.getHLAuthToken()&&void 0!==CrestApiCookies.getTenantKey()?hl_webapi_ajaxCallHandler_formData(t,i,n,CrestApiCookies.getTenantKey(),CrestApiCookies.getHLAuthToken(),o,a,r):("undefined"==s?alert("Your session has expired. Please login."):alert(s),window.location=window.location.href))}})}function hl_webapi_ajaxCallHandler(e,t,i,n,o,a,s,r,l){HLeasyXDM.Rpc.request({url:HLeasyXDM.WebAPIFullUrl+e,method:i,timeout:6e4,data:JSON.stringify(t),headers:{HLTenantKey:n,HLAuthToken:o,Accept:"application/json","Content-Type":"application/json",Codebase:Cookies.get("HLCB")}},function(e){"function"==typeof a&&a(jQuery.parseJSON(e.data),s)},function(e){r?"function"==typeof a&&l(e,s):hl_webapi_handleErrorResponse(e)})}function hl_webapi_ajaxCalharset=utf-8",url:HLeasyXDM.WebAPIFullUrl+e,type:i,headers:{HLTenantKey:n,HLAuthToken:o},data:t,cache:!1,contentType:!1,processData:!1,crossDomain:!0,xrorResponse(e)}})}function hl_webapi_ajax_promise(t,i,n,e,o,a){if(void 0!==CrestApiCookies.getHLAuthToken()&&void 0!==CrestApiCookies.getTenantKey())return hl_webapi_ajaxCallHandler_promise(t,i,n,CrestApiCookies.getTenantKey(),CrestApiCookies.getHLAuthToken());$.ajax({type:"POST",url:authTokenRefreshU-8",success:function(e){e.d&&(void 0!==CrestApiCookies.getHLAuthToken()&&void 0!==CrestApiCookies.getTenantKey()?hl_webapi_ajaxCallHandler_promise(t,i,n,CrestApiCookies.getTenantKey(),CrestApiCookies.getHLAuthToken(),rpc):("undefined"==a?alert("Your session has expired. Please login."):alert(a),window.location=window.location.href))}})}function hl_webapi_ajaxCallHandler_promise(e,t,i,n,o){var a=$.Deferred();return HLeasyXDM.Rpc.request({url:HLeasyXDM.WebAPIFullUrl+e,method:i,data:{},headers:{HLTenantKey:n,HLAuthToken:o,Accept:"application/json",Codebase:Cookies.get("HLCB")}},function(e){a.resolve(jQuery.parseJSON(e.data))},function(e){a.resolve(e)}),a.promise()}function hl_webapi_handleErrorResponse(e){hl_common_ui_unBlockUI(),hl_common_ui_alertDialog("Message: "+e.message+"\nError Code:"+e.code)}function hl_webmethod_handleErrorResponse(e){hl_common_ui_alertDialog("Message: l+HLeasyXDM.WebAPIVersion,HLeasyXDM.Rpc=new HLeasyXDM.easyXDM.Rpc({remote:HLeasyXDM.WebAPIDomainUrl+"/scripts/easyXDM/cors/"},{remote:{request:{}}}),$.ajaxPrefilter(function(e){e.crossDomain&&(e.cont:!1,type:"GET",dataType:"json",error:function(e,t){if(hl_common_ui_unBlockUI(),-1!==this.url.toLowerCase().indexOf(location.hostname.toLowerCase())onseText;try{0===e.status?hl_common_ui_alertDialog("Not connected.\n Verify Netatus||500==e.status?hl_common_ui_alertDialog("Message: "+(i=jQuery.parseJSON(e.responseText)).Message+"\nError Code:"+i.ErrorCode):hl_common_ui_alertDialog("parsererror"===t?"Requested JSON parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"Message: "+(i=jQuery.parseJSON(e.responseText)).Message+"\nError Code:"+i.ErrorCode)}catch(e){hl_common_ui_showjQueryUIAlertDialog("hlcomonalert","CEditInContextHTMLHighlight(){$(".inline-content-html-editor-container").hover(function(){$(this).closest(".ContentItemHtml").toggleClass("editContentHighlight")})}function removeAtMention(e){var t=$(e).data("itemmentionkey");$('[data-toggle=popover][data-itemmentionkey="'+t+'"]').popover("destroy"),$.each($('[data-itemmentionkey="'+t+'"].user-content-mention'),function(){this.replaceWith(this.text)});var i={itemMentionKey:t};hl_webmethod_ajax("/HigherLogic/Common/wsjson.aspx/RemoveAtMention",i,"POST","",i)}function pageLoad(){$(document).es(),$(".collapse-tabs-control").tabdrop()})}function LoadBioBubbles(){var e={},t=$("[biobubblekey]");for(var i in t.each(function(){e[$(this).attr("biobubblekey")]=!0}),e)$("#bioBubbleShell"+i).hl_ui_bioBubble({displayContactKey:i,eventTriggers:$("[biobubblekey='"+i+"']"),authToken:CrestApiCookies.getHLAuthToken(),tenantKey:CrestApiCookies.getTenantKey()})}function navBarListener(){$(document).click(function(e){var t=$("ul.nav.nge").removeClass("active")}),$("ul.nav.navbar-nClass("active"),$(this).closest("li").addClass("active")}),$("ul.nav.navbar-nav li ul li a").blur(function(){$(this).closest("ul.nav.navbar-nav > li > ul").find("a").length===$(this).closest("his).closest("li.open").rem){var e=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),t=-1<navigator.userAgent.toLowerCase().indexOf("opera");(e||t)&&$("#skiplink").click(function(){var e=this.hash.replace("#","");$('<a name="skiptarget-'+e+'" tabindex="0"></a>').prependTo("#"+e).focus().focusout(function(){$(this).remove()})})}function SetupBSModalFocus(){$(".modal").on("shown.bs.modal",function(){docbody :input:visible").first().focus()})}function SetupBoostrapModalOnModal(){$(document).on("show.bs.modal",".modal.stackable",function(){var e=Math.max.apply(null,Array.prototype.map.call(document.querySelectorAll("*"),function(e){return e.style?+e.style.zIndex:0}))+10;$(this).css("z-index",e),setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",e-1).addClass("modal-stack")},0)}),$(document).on("hidden.bs.modal",".modal",function(){$(".modal:visible").length&&$(document.body).addClass("modal-open")})}$(document).ready(function(){hl_core_ui_jkmegamenu.render($),$(".drpContent div").on("mouseenter",function(){$(this).addClass("multiFunctionItemHover")}),$(".drpContent div").on("mouseleave",function(){$(this).removeClass("multiFunctionItemH$(t).children().lexists"),t.append(e),t.hide(n()[0],n=$(".editFunnelWhite");$(i).width()>n.width()&&($(i).addClass("web20RadEditRapOverwrite"),$(".reContentCell").addClass("reContentCellOverwrite")),SetupSkipLinks(),setTimeout(function(){$(".reToolbar").removeAttr("style")},100),SetupBSModalFocus(),$(".bootstrap-switch-container input").bootstrapSwitch(),LoadBioBubbles(),navBarListener(),$(".collapse-tabs-control").tabdrop(),0<$("[data-toggle=popover][data-itemmentionkey]").length&&$("[data-toggle=popover][data-itemmentionkey]").each(function(){$(this).popover({trigger:"manual",animation:!1,html:!0,title:"Remove Reference",content:'<div class="row"><div class="col-md-12"><label>You and your profile are associated with this content</label></div></div><div class="row"><div class="col-md-12"><button type="button" onclick="removeAtMention(this); return false;" data-itemmentionkey="'+$(this).data("itemmentionkey")+'" class="removeMention btn btn-small btn-default">Remove Reference</button></div></div>',placement:"top"}).on("mouseenter",function(){var e=this;$(this).popover("show"),$(".popover").on("mouseleave",function(){$(e).popover("hide")})}).on("mouseleave",function(){var e=this;setTimeout(function(){$(".popover:hover").length||$(e).popover("hide")},300)})}),$(document).ajaxComplete(function(){LoadBioBubbles()}),$("body").on("click","a.nominate-display-modal",function(e){var t=$(this).attr("data-key"),i=$(this).attr("data-contactkey"),n={};n.VolunteerOpportunityKey=t,n.ContactKey=i,hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(n),dataType:"html",url:"/higherlogic/ui/mvc/directory/volunteeradmin/GetOpportunityNominationsModal",success:function(e){var t=$("#volunteer-nominations-modal");0<t.length&&t.remove(),$("body").append(e),$("#volunteer-nominatior t=$(this).attr("data-key"),i=$(this).attr("data-contactkey"),n={};n.EntityKey=t,n.UserKey=i,n.HeaderTitle="Volunteer Opportunity Application",n.ItemKey=$(this).attr("data-volunteer-opportunitykey"),hl_common_ui_blockUI(),$.ajax({contentType:tml(e),$("#modal-view-application").modal("show"),hl_common_ui_unBlockUI()}})}),hl_directory_volunteer_profile.initMyProfileAjaxLoads(),SetupBoostrapModalOnModal(),handleEditInContextHTMLHighlight()}),window.onpopstate=function(e){null!=e.state&&(null!=e.state.myVolunteerHistory&&$("#my-volunteer-history").html(e.state.myVolunteerHistory.controlContent),null!=e.state.myVolunteerOpportunities&&$("#my-volunteer-opportunities").html(e.state.myVolunteerOpportunities.controlContent))},function(e){var t,i,n;function o(e,t,i,n){this.fpOnFailureCallback=void 0,thessCallback=t,this.fpOnFailureCallback=i,this.options=n,this.init()}t=e.Common||(e.Common={}),o.prototype.init=function(){this.$el.hl_ui_mvc_common_filepicker_imageUpload(this.fpOnSuccessCallback,this.fpOnFailureCallback,this.options)},o.NAME="hlFilepickerMvcImageUpload",n=o,t.FilepickerMvcImageUpload=n,i=jQuery,window,document,i.fn[n.NAME]=function(e,t,i){return this.each(function(){return new n(this,e,t,i)})}}(HigherLogic=HigherLogic||{});var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},HigherLogic;window.Buffer=null,function(f){var g;(function(e){var m=(l.loadFileStack=function(e,t){var i,n=this;void 0===e&&(e=function(){}),"undefined"==typeof filestack&&$(docum},10)),void 0!==t&&"undefined"==typeof filestack||("undefined"==typeof filestack?($(document).data("filestackLoaded",!0),i=hl_common_util_getIeVersion(),$.getScript(0===i||11<i?filestackUrl:filestackUrlIE11,function(){e()})):(clearInterval(t),e()))},l.loadFileNames=function(e){for(var t=e.map(function(e){return __assign({},e)}),i=0;i<t.length;i++)t[i].filename.lastIndexOf(".")<0&&-1<t[i].key.lastIndexOf(".")&&(t[i].filename=t[i].filename+t[i].key.substring(t[i].key.lastIndexOf("."),t[i].key.length));return t},l.baseFilePickerOptions=function(e,t){var i=0<$(".modal.in").length?$(".modal.in"):null;return{maxFiles:e?100:1,uploadInBackground:!1,storeTo:{location:"s3"},accept:t,onFileSelected:function(e){if("image/svg+xml"===e.mimetype)throw new Error("Cannot upload SVGs")},onOpen:function(){null!==i&&i.modal("hide")},onClose:function(){null!==i&&i.modal("show")}}},l.baseImagePickerOptions=function(e){var t=0<$(".modal.in").length?$(".modal.in"):null,i=$(document.activeElement),n=null,o=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.addedNodes.forEach(function(e){var t;e instanceof HTMLElement&&"__filestack-picker"===e.id&&(t=e)&&(n=new MutationObserver(function(){f.Util.setModalFocusAndAccessibility($("#__filestack-picker .fsp-modal"),i)})).observe(t,{childList:!0,subtree:!0})})})}),a={maxFiles:1,uploadInBackground:!1,storeTo:{location:"s3"},accept:"image/*",onFileSelected:function(e){if("image/svg+xml"===e.mimetype)throw new Error("Cannot upload SVGs")},onOpen:function(){null!==t&&t.modal("hide"),o.observe(document.body,{childList:!0}),n&&n.disconnect()},onClose:function(){null!==t&&t.modal("show"),o.disconnect(),i.focus()}};return e&&(a.transformations={crop:{aspectRatio:1,force:!0},rotate:!0}),a},l.onUploadDone=function(e,t){0<e.filesUploaded.length?t(e.filesUpl","Error Uploading File",this.errorMessage(e))},l.opefunction(){var e=filestack.init(t);n.onUploadDone=function(e){return l.onUploadDone(e,o)},e.picker(__assign(__assign({},n),{fromSources:i})).open()})},l.openFsInlineErrorHandling=function(t,i,n,o,a,s){var r=this;l.loadFileStack(function(){var e=filestack.init(t);n.onUploadDone=function(e){0<e.filesUploaded.length?o(e.filesUploaded):(a.text(r.errorMessage(e)),s.show())},e.picker(__assign(__assign({},n),{fromSources:i})).open()})},l.featuredImagePickerOptions=function(){var e=0<$(".modal.in").length?$(".modal.in"):null,t={maxFiles:1,uploadInBackground:!1,storeTo:{location:"s3"},accept:"image/*",exposeOriginalFile:!0,onFileSelected:function(e){if("image/svg+xml"===e.mimetype)throw new Error("Cannot upload SVGs")},onOpen:function(){null!==e&&e.modal("hide")},onClose:function(){null!==e&&e.modal("show")},transformations:{crop:{aspectRatio:2,force:!0},rotate:!0},onUploadStarted:function(){hl_common_ui_blockUI()}};return t},l.logoImagePickerOptions=function(){var e=0<$(".modal.in").length?$(".modal.in"):null;return{maxFiles:1,uploadInBackground:!1,storeTo:{location:"s3"},accept:"image/*",onFileSelected:function(e){if("image/svg+xml"===e.mimetype)throw new Error("Cannot upload SVGs")},onOpen:function(){null!==e&&e.modal("hide")},onClose:function(){null!==e&&e.modal("show")},transformations:{crop:{force:!0},rotate:!0},exposeOriginalFile:!0,onUploadStarted:function(){hl_common_ui_blockUI()}}},l.errorMessage=function(e){return"Failed to upload: ".concat(e.filesFailed.map(function(e){return e.filename}).join(", "))},l);function l(){}e.Util=m;var t=(i.openFs=function(t,i,n,o,a,s,r){m.loadFileStack(function(){var e=filestack.init(t);n.onUploadDone=function(e){var t;0<e.filesUploaded.length?o(e.filesUploaded):(t=m.errorMessage(e),s.text(t),r.show(),a(t))},e.picker(__assign(__assign({},n),{fromSources:i})).open()})},i);function i(){}e.ImageUpload=t;var n=(o.bsMediaObjOpenFs=function(t,i,n,o,a){var s=this;m.loadFileStack(function(){var e=filestack.init(t);n.onUploadDone=function(e){0<e.filesUploaded.length?s.bsMediaObjOnFsSuccess(e.filesUploaded,o,a):g.Ui.showBootstrapAlertDialog("#".concat(f.Util.newGuid(),"_errorAlert"),"Ok","Error Uploading File",m.errorMessage(e))},e.picker(__assign(__assign({},n),{fromSources:i})).open()})},o.bsMediaObjOnFsSuccess=function(e,d,t){g.Ui.blockUI();var i=m.loadFileNames(e);f.Util.post(t,{originalFilename:i[0].filename,filename:i[0].key,contentType:i[0].mimetype}).done(function(e){var t=$("#".concat(d,"-dvUploadContainer")),i=$("#".concat(d,"-dvImageContainer")),n=$("#".concat(d,"-img")),o=$("#".concat(d,"-slctThumbnail")),a=$("div.original-img-alert");n.data("baseHeight",e.baseHeight),n.data("baseWidth",e.baseWidth),n.data("imgBase",e.imgBase),n.data("imgThumbnail",e.imgThumbnail),n.data("imgMedium",e.imgMedium),n.data("imgLarge",e.imgLarge),a.hide();var s=e.baseHeight,r=e.baseWidth,l=parseInt(o.val()),c=100===l?n.data("imgThumbnail"):200==l?n.data("imgMedium"):300<=l?n.data("imgLarge"):n.data("imgBase");n.attr("src",0===l?n.data("imgBase"):c),n.removeAttr("width"),n.removeAttr("height"),0<l?(r<400&&500<s&&n.attr("height",500),n.attr("width",l)):(500<s||400<r)&&(400<r&&n.attr("width",400),r<400&&500<s&&n.attr("height",500),a.text("The original image (".concat(r," X ").concat(s,") has been minimized to fit the current display.")),a.show()),f.Util.hide(t),f.Util.show(i),g.Ui.unBlockUI()})},o);function o(){}e.TinyMce=n;var a=(s.openFs=function(i){m.loadFileStack(function(){var e=m.baseImagePickerOptions(!0),t=filestack.init($(i).data("fssetkey"));e.onUploadDone=function(e){0<e.filesUploaded.length?($("#".concat($(i).data("hdnimagekey"))).val(e.filesUploaded[0].key),$("#".concat($(i).data("btnsavecroppedimage"))).click()):g.Ui.showBootstrapAlertDialog("#".concat(f.Util.newGuid(),"_errorAlert"),"Ok","Error Uploading File",m.errorMessage(e))},t.picker(__assign(__assign({},e),{fromSources:$(i).data("fsfromsources")})).open()})},s);function s(){}e.ProfileImage=a;var r=(c.openFs=function(i,n,o,a,s){m.loadFileStack(function(){var e=m.baseFilePickerOptions(!1,o),t=filestack.init(i);e.onUploadDone=function(e){0<e.filesUploaded.length?a(e.filesUploaded):(s.html(s.data("failedtemplate")),s.show())},t.picker(__assign(__assign({},e),{fromSources:n})).open()})},c);function c(){}e.Cms=r;var d=(u.openFs=function(e,t,a,s,r,l){m.loadFileStack(function(){var n=m.featuredImagePickerOptions(),o=filestack.init(e);n.onUploadDone=function(e){var t,i;0<e.filesUploaded.length?($("#".concat(a)).val(e.filesUploaded[0].key),t=e.filesUploaded[0].filename,(i=$("#".concat(r))).text(t),i.unbind("click"),i.removeAttr("onClick"),i.on("click",function(){o.picker(__assign({},n)).crop([e.filesUploaded[0].originalFile])}),$("#".concat(s)).val(t),$("#".concat(l)).show(),hl_common_ui_unBlockUI()):(hl_common_ui_unBlockUI(),g.Ui.showBootstrapAlertDialog("#".concat(f.Util.newGuid(),"_errorAlert"),"Ok","Error Uploading File",m.errorMessage(e)))},o.picker(__assign(__assign({},n),{fromSources:t})).open()})},u.openCrop=function(i,n,t,o){function a(e){0<e.filesUploaded.length?($("#".concat(t)).val(e.filesUploaded[0].key),hl_common_ui_unBlockUI()):(hl_common_ui_unBlockUI(),g.Ui.showBootstrapAlertDialog("#".concat(f.Util.newGuid(),"_errorAlert"),"Ok","Error Uploading File",m.errorMessage(e)))}m.loadFileStack(function(){var e=m.featuredImagePickerOptions(),t=filestack.init(i);e.onUploadDone=a,t.picker(__assign(__assign({},e),{fromSources:n})).crop([o])})},u);function u(){}e.FeaturedImage=d;var h=(p.openFs=function(i,n,a,s,r,l,c,d,u,h,p){m.loadFileStack(function(){var e=m.logoImagePickerOptions(),t=filestack.init(i);e.onUploadDone=function(n){var o;0<n.filesUploaded.length?(o=n.filesUploaded[0].filename,$("#".concat(a)).val(n.filesUploaded[0].key),f.Util.post("/higherlogic/ui/mvc/common/filepicker/getpreviewimageurl",{originalFilename:n.filesUploaded[0].filename,holdingPenKey:n.filesUploaded[0].key,path:"LogoImages"}).done(function(e){var t=JSON.parse(e),i=$("#".concat(p));$("#".concat(s)).val(t.imgSrc),$("#".concat(d)).val(n.filesUploaded[0].mimetype),i.attr("src",t.imgSrc),$("#".concat(l)).text(o),$("#".concat(u)).hide(),$("#".concat(l)).show(),$("#".concat(r)).val(o),$("#".concat(c)).show(),$("#".concat(h)).fadeIn(800),hl_common_ui_unBlockUI()})):(hl_common_ui_unBlockUI(),g.Ui.showBootstrapAlertDialog("#".concat(f.Util.newGuid(),"_errorAlert"),"Ok","Error Uploading File",m.errorMessage(n)))},t.picker(__assign(__assign({},e),{fromSources:n})).open()})},p.openCrop=function(i,n,o,a,s,r){m.loadFileStack(function(){var e=m.logoImagePickerOptions(),t=filestack.init(i);e.onUploadDone=function(e){var i;0<e.filesUploaded.length?(i=e.filesUploaded[0].filename,$("#".concat(o)).val(e.filesUploaded[0].key),f.Util.post("/higherlogic/ui/mvc/common/filepicker/getpreviewimageurl",{originalFilename:e.filesUploaded[0].filename,holdingPenKey:e.filesUploaded[0].key,path:"LogoImages"}).done(function(e){var t=JSON.parse(e);$("#".concat(a)).val(t.imgSrc),$("#".concat(r)).attr("src",t.imgSrc),$("#".concat(s)).val(i),hl_common_ui_unBlockUI()})):(hl_common_ui_unBlockUI(),g.Ui.showBootstrapAlertDialog("#".concat(f.Util.newGuid(),"_errorAlert"),"Ok","Error Uploading File",m.errorMessage(e)))},t.picker(__assign(__assign({},e),{fromSources:n})).crop([$("#".concat(a)).val()])})},p.clearImage=function(e,t,i,n,o,a,s,r){m.loadFileStack(function(){$("#".concat(a)).fadeOut(800,function(){$("#".concat(e)).val(""),$("#".concat(t)).val(""),$("#".concat(i)).val(""),$("#".concat(o)).hide(),$("#".concat(s)).attr("src",""),$("#".concat(n)).hide(),$("#".concat(r)).show()})})},p);function p(){}e.LogoImage=h})((g=f.Common||(f.Common={})).FilestackExt||(g.FilestackExt={}))}(HigherLogic=HigherLogic||{});var hl_common=function(){var t="/higherlogic/ui/mvc/common/common";return{confirm:function(e){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(e),dataType:"html",url:t+"/GetConfirmation",success:function(e,t,i){var n=$("#confirmation-modal");0<n.length&&n.remove(),$("body").append(e),n=$("#confirmation-modal"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},alert:function(e){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(e),dataType:"html",url:t+"/GetAlert",success:function(e,t,i){var n=$("#alert-modal");0<n.length&&n.remove(),$("body").append(e),n=$("#alert-modal"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getStatesByCountry:function(o){void 0!==o&&(hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(o),dataType:"html",url:t+"/GetStateProvinceList",success:function(e,t,i){var n=$("#"+o.ControlID);0<n.length&&n.replaceWith(e),1==(n=$("#"+o.ControlID)).find("option").length&&$(".states-container").hide(),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}}(jQuery);function hl_common_itemRelatedResources_onItemRelatedModalBtnClick(e,t,i,n){$("#"+e).val(""),$("#"+e).closest("div.form-group").removeClass("has-error"),$("#"+t).val(""),$("#"+i).hide(),hl_common_itemRelatedResources_openItemRelatedModal(e,i,n)}function hl_common_itemRelatedResources_openItemRelatedModal(e,t,i){hl_common_itemRelatedResources_bindValidateUrl($("#"+e),$("#"+t)),$("#"+i).modal("show")}function hl_common_itemRelatedResources_bindValidateUrl(t,i){t.blur(function(){i.hide(),t.closest("div.form-group").removeClass("has-error"),hl_common_util_stringIsNullOrWhiteSpace(t.val())||hl_common_ui_validateUrl(t.val(),function(e){e.Item1?t.val(t.val()):(i.show(),t.closest("div.form-group").addClass("has-error"))})})}function hl_common_itemRelatedResources_closeItemRelatedModal(e){$(".modal-backdrop").remove(),$("#"+e).modal("hide")}var hl_common_signature=function(){var i="/higherlogic/ui/mvc/common/signature";return{baseUrl:i,get:function(n){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",url:i+"/GetSignature",success:function(e,t,i){"function"==typeof n?n(e):hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})},edit:function(){hl_common_ui_blockUI();var o=$(document.activeElement);$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i+"/SignatureEditModal?EditMode=true",success:function(e,t,i){var n=$("#signature-edit-modal");0<n.length&&n.remove(),$("body").append(e),n=$("#signature-edit-modal"),hl_common_ui_unBlockUI(),n.on("show.bs.modal",function(){HigherLogic.Util.setModalFocusAndAccessibility(n,o)}),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},save:function(e,n,t){""==e?"function"==typeof t&&t():(hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({signatureText:e}),dataType:"json",url:i+"/Signaturl("hide"),"function"==typeof n?n(e):hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}}(jQuery),hl_common_ui=(jQuery,{openModal:function(e,t,o,a){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:t,success:function(e,t,i){var n=$("#"+o);0<n.length&&n.remove(),$("body").append(e),n=$("#"+o),hl_common_ui_unBlockUI(),n.modal("show"),"function"==typeof a&&a(e,t,i)},error:function(e,t,i){hl_common_ui_unBlockUI()}})}});function hl_common_ui_configureMultiFunction(e,t,i,n,o,a){$(e).hl_core_ui_dropDown({ObjClassContainer:t,ObjPositionCSS:o,ToolTip:i,Icon:"https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/Images/icoMultiGearOn.png",IconWidth:"40px",IconHeight:"15px",IconPadding:"0 0 0 0",ContainerWidth:"",ContainerHeight:"",ContainerFloatOption:"",InsertIconAfterObject:n,DropDownAttachTo:""!=a?a:"body",DropDownTopPadding:0});var s=$("."+t+" h2#Title");0<s.length&&$("."+t+" div."+o).after(s)}functionIAlertDialog("hlcomonalert","Close",!1,400,150,window.document.title,e)}function hl_common_ui_showjQueryUIDialogOkBtnCallback(e,t,i,n,o,a){var s={};s[i]=function(){$(this).dialog("close"),$("#"+e).trigger("click")},s.Cancel=function(){$(this).dialog("close")},$(t).dialog({resizable:!0,width:o,modal:n,appendTo:hl_common_ui_getFormForDialog(t),buttons:s,focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(t).dialog("open")}function hl_common_ui_showjQueryUIDialogConfirmOkBtnCallback(e,t,i,n,o,a,s,r){var l="#dialog-confirm-"+t,c=$('<div id="dialog-confirm-'+t+'" style="display:none;"><p><span class="ui-icon ui-icon-info" style="float:left; margin:0 7px 20px 0;"></span><span id="dialog-confirm-'+l+'-message">'+r+"</span></p</div>");$("body").append(c);var d={};d[i]=function(){$(this).dialog("close"),$("#"+e).click()},d.Cancel=function(){$(this).dialog("close")},$(l).dialog({resizable:!0,title:s,width:o,modal:!0,appendTo:hl_common_ui_getFormForDialog(l),closeOnEscape:!0,buttons:d,focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},open:function(){var e=$(this).parent().find(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(l).dialog("open")}function hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(e,t,i,n,o,a,s,r,l,c){var d="#dialog-confirm-"+i,u=$('<div id="dialog-confirm-'+i+'" style="display:none;"><p><span class="ui-icon ui-icon-info" style="float:left; margin:0 7px 20px 0;"></span><span id="dialog-confirm-'+d+'-message">'+c+"</span></p></div>");$("body").append(u);var h={};h[n]=function(){$(this).dialog("close"),$(this).dialog("destroy"),"function"==typeof e&&e()},h[o]=function(){$(this).dialog("close"),$(this).dialog("destroy"),"function"==typeof t&&t()},$(d).dialog({resizable:!1,title:l,minHeight:r,width:s,modal:!0,closeOnEscape:!0,appendTo:hl_common_ui_getFormForDialog(d),focus:function(e,t){"Cancel"!=o&&"No"!=o||$(".ui-dialog-titlebar-close").hide(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},close:function(e,t){e.originalEvent&&$(e.originalEvent.tarthis).dialog("close"),$(this).dialog("destroy"))},buttons:h,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(d).dialog("open")}function hl_common_ui_showjQueryUIDialogContainer(e,i,t,n,o){i&&(_suppressGlobalPopupContainer=!0),$(e).dialog({width:n,modal:t,autoOpen:!1,appendTo:hl_common_ui_getFormForDialog(e),close:function(e,t){i&&(_suppressGlobalPopupContainer=!1)},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(e).dialog("open")}function hl_common_ui_showjQueryUIDialogContainer2(e,t,i,n,o,a,s){i&&(_suppressGlobalPopupContainer=!0);var r,l="#"+e;""!=$(l).html()&&(r=$("<div id='"+e+"'></div>"),$("body").append(r),$(l).html($(t).html()),$(l).dialog({width:o,title:s,modal:!0,autoOpen:!1,appendTo:hl_common_ui_getFormForDialog(l),close:function(e,t){i&&(_suppressGlobalPopupContainer=!1)},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(l).dialog("open"))}function hl_common_ui_showjQueryUIDialogContainer3(e,i,t,n,o,a){i&&(_suppressGlobalPopupContainer=!0),$(e).dialog({width:n,title:a,modal:t,buttons:{close:function(){$(this).dialog("close")},cancel:function(){$(this).dialog("close")}},autoOpen:!1,appendTo:hl_common_ui_getFormForDialog(e),focus:function(e,t){$(this).css("display","block"),$(this).parent().find(".ui-dialog-buttonset button").removeClass().addClass("btn btn-default")},close:function(e,t){$(this).css("display","none"),i&&(_suppressGlobalPopupContainer=!1)},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(e).dialog("open")}function hl_common_ui_showjQueryUIHelpDialog(e,i,t,n,o,a){i&&(_suppressGlobalPopupContainer=!0),$(e).dialog({width:n,title:a,modal:t,buttons:{cll_common_ui_getFormForDialog(e),focus:function(e,t){$(this).css("display","block"),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-default")},close:function(e,t){$(this).css("display","none"),i&&(_suppressGlobalPopupContainer=!1)},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(e).dialog("open")}function hl_common_ui_showjQueryUISucessDialog(e,t,i,n,o){var a={};a[t]=function(){$(this).dialog("close")},$(e).dialog({resizable:!0,width:n,modal:i,appendTo:hl_common_ui_getFormForDialog(e),buttons:a,focus:function(e,t){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-default")},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(e).dialog("open")}function hl_common_ui_closeDialog(e){$("#"+e).dialog("close")}function hl_common_ui_showjQueryAlertDialog(e,t,i,n,o,a){var s="#dialog-alert-"+e,r=$('<div id="dialog-alert-'+e+'" style="display:none;"><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span id="dialog-alert-'+s+'-message">'+a+"</span></p</div>");$("body").append(r);var l={};l[t]=function(){$(this).dialog("close"),$(this).dialog("destroy")},$(s).dialog({resizable:!1,title:o,minHeight:n,width:i,modal:!0,closeOnEscape:!0,appendTo:hl_common_ui_getFormForDialog(s),focus:function(e,t){$(".ui-dialog-titlebar-close").hide(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-default")},buttons:l,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(s).dialog("open")}function hl_common_ui_showBootstrapDeleteDialog(e,t,i,n,o){var a=t,s="Close",r="btn-danger";$.isPlainObject(t)&&(a=t.confirm,s=t.close||s,r=t.closeClass||r);var l="#dialog-alert-"+e;$(l).remove();var c=$('<div id="dialog-alert-'+e+'" class="modal" role="dialog" aria-labelledby="Delete Confirmation" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a href="#" role="button" class="close" data-dismiss="modal" aria-label="Close"></a><h4 class="modal-title" >'+i+'</h4></div><div class="modal-body"><span>'+n+'</span></div><div class="modal-footer"><div class="text-left"><a role="button" class="btn '+r+'" hriv></div></div></div>");$("body").append(c),$(l).find("#confirm-delete").bind("click",function(){setTimeout(function(){hl_common_ui_blockUI()},0),o(),$(l).modal("hide")}),$(l).modal("show")}function hl_common_ui_showjQueryUIAlertDialog(e,t,i,n,o,a,s){var r="#dialog-alert-"+e,l=$('<div id="dialog-alert-'+e+'" style="display:none;"><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span id="dialog-alert-'+r+'-message">'+s+"</span></p</div>");$("body").append(l);var c={};c[t]=function(){$(this).dialog("destroy").remove()},$(r).dialog({resizable:!0,title:a,width:n,modal:!0,closeOnEscape:!0,appendTo:hl_common_ui_getFormForDialog(r),focus:function(e,t){$(".ui-dialog-titlebar-close").hide(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-default")},buttons:c,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(r).dialog("open")}function hl_common_ui_showjQueryUIAlertDialogNoResize(e,t,i,n,o,a,s){hl_common_ui_showjQueryUIAlertDialogNoResize(e,t,i,n,o,a,s,"")}function hl_common_ui_showjQueryUIAlertDialogNoResize(e,t,i,n,o,a,s,r){var l="#dialog-alert-"+e,c=$('<div id="dialog-alert-'+e+'" style="display:none;" role="alert"><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span id="dialog-alert-'+l+'-message">'+s+"</span></p</div>");$("body").append(c);var d={};d[t]=function(){$(this).dialog("close"),""!=r&&$(r).focus()},$(l).dialog({resizable:!1,title:a,width:n,modal:!0,closeOnEscape:!0,focus:function(e,t){$(".ui-dialog-titlebar-close").hide(),$(":button").focus(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-default")},buttons:d,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(l).dialog("open")}function hl_common_ui_showBootstrapAlertDialog(e,t,i,n,o){var a="#dialog-"+e;$(a).remove();var s=$('<div id="dialog-'+e+'" aria-hidden="true" role="dialog" class="modal vdesigner-embedded-modal" aria-labelledby="'+e+'_label"><div class="modal-dialog '+(void 0!==o?o:"modal-sm")+'" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="'+e+'_label">'+i+'</h4></div><div class="modal-body"><p><span class="glyphicon glyphicon-warning-sign text-warning" style="float:left; margin:0 7px 20px 0;"></span><span id="dialog-'+a+'-message">'+n+'</span></p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+t+"</button></div></div></div></div>");$("body").append(s),$(a).modal()}function hl_common_ui_showBootstrapDialog(e,t,i,n,o){var a="#dialog-"+e;$(a).remove();var s=$('<div id="dialog-'+e+'" aria-hidden="true" role="dialog" class="modal" aria-labelledby="'+e+'_label"><div class="modal-dialog '+(vlass="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="'+e+'_label">'+i+'</h4></div><div class="modal-body">'+n+'</div><div class="modal-footer"><div class="text-left"><button type="button" class="btn btn-default" data-dismiss="modal">'+t+"</button></div></div></div></div></div>");$("body").append(s),$(a).modal()}function hl_common_ui_blockUI(){if(0<$(".bioBubbleShell").length){var e={},t=$("[biobubblekey]");for(var i in t.each(function(){e[$(this).attr("biobubblekey")]=!0}),e)$("[biobubblekey='"+i+"']")}var n=$(window).width()/2,o=n<80?"0px":n-80+"px",a=$(window)kUI.defaults.fadeOut=0,$.blockUI.defaults.fadeIn=0,$.blockUI.zIndex=r,$.blockUI({message:$("#GlobalPopupContainer"),css:{top:s,left:o,color:"#000",border:"none",backgroundColor:"none",cursor:"wait",opacity:1},overlayCSS:{backgroundColor:"#AAAAAA",opacity:.3}})}function arrayMax(e){for(var t=e.length,i=-1/0;t--;)e[t]>i&&(i=e[t]);return i}function hl_common_ui_unBlockUI(){$.unblockUI()}function hl_common_ui_showGlobalMessage(e,t){$.unblockUI(),void 0!==e&&(void 0!==t&&$("#GlobalMessageContainer").find("img#GlobalMsg_Img").attr("src",t),$("#GlobalMessageContainer").find("span#GlobalMsg_Text").text(e)),$.blockUI.defaults.fadeOut=2e3,$.blockUI.defaults.fadeIn=0,$.blockUI({message:$("#GlobalMessageContainer"),css:{padding:"15px",margin:0,width:"600px",top:"20%",left:"20%",textAlign:"center",color:"#000",border:"none",backgroundColor:"none",cursor:"wait",opacity:1},overlayCSS:{backgroundColor:"#AAAAAA",opacity:.3}}),setTimeout(function(){$.unblockUI()},3e3)}function hl_common_ui_centerModal(e,t,i){var n=hl_common_ui_getViewPort();return[$(e).position().left+$(e).width()/2-t/2,n.height/2-i/2]}function hl_common_ui_getViewPort(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}function hl_common_ui_getContrast50(e){return 8388607.5<parseInt(e,16)?"black":"white"}function hl_common_ui_getContrastYIQ(e){return 128<=(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3?"black":"white"}function hl_common_ui_inputValid(e,t,i){var n=$(e).text().replace(t,"").replace(i,"");$(e).text(n);var o="",a=$(e).attr("for"),s=$("#"+a),r=$(s).attr("regex"),l=new RegExp(r);return hl_common_util_stringIsNullOrWhiteSpace($(s).val())?o=$(e).text()+t:""!=r&&0<$(s).length&&null==$(s).val().match(l)&&(o=$(e).text()+i),""!=o?($(e).parent().addClass("has-error"),$(e).text(o),$(s).parent().addClass("has-error"),location.href="#",location.href=e,hl_common_ui_unBlockUI(),!1):(hl_common_ui_unBlockUI(),$(e).parent().removeClass("has-error"),$(s).parent().removeClass("has-error"),!0)}function hl_common_ui_inputsValid(e,s,r){var l=!0;return $(e).find("label").each(function(){var e=$(this).text().replace(s,"").replace(r,"");$(this).text(e);var t,i,n="",o=$(this).attr("for"),a=$("#"+o);"false"!=$(a).attr("validate")&&(t=$(a).attr("regex"),i=new RegExp(t),hl_common_util_stringIsNullOrWhiteSpace($(a).val())?n=$(this).text()+s:""!=t&&null==$(a).val().match(i)&&(n=$(this).text()+r),""!=n?($(this).parent().addClass("has-error"),$(this).text(n),$(a).parent().addClass("has-error"),hl_common_ui_unBlockUI(),l=!1):(hl_common_ui_blockUI(),$(this).parent().removeClass("has-error"),$(a).parent().removeClass("has-error")))}),l}function hl_common_ui_showItemPreview(t,e){var i,n=$("#"+t+"-modal");n.length?n.modal("show"):(i="/HigherLogic/UI/MVC/common/common/ItemPreview/?itemKey="+t+"&itemType="+e,hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){$("body").append(e),$("#"+t+"-modal").modal("show"),$("#"+t+"-modal").on("hidden.bs.modal",function(){hl_resourcelibrary_videoJs_pauseAll()}),hl_common_ui_unBlockUI()}}))}function hl_common_ui_showItemPreviewForModerationQ(n,e,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y,b){var t,i=$("#"+n+"-modal");i.length?i.modal("show"):(t="/HigherLogic/UI/MVC/common/common/ItemPreview/?itemKey="+n+"&itemType="+e+"&isModeration=true",hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){$("body").append(e);var t=$("#"+n+"-btnModApprove");t.prop("itemKey",n),t.prop("lnkApproveClientId",o),t.prop("lnkApproveName",a);var i=$("#"+n+"-btnModReject");i.length&&(i.prop("itemKey",n),i.prop("itemTypeHint",s),i.prop("hdnRejectedItemKeyClientId",r),i.prop("tbRejectionSubjectId",l),i.prop("hdnRejectionSubjectId",c),i.prop("hdnRejectionEmailId",d),i.prop("tmceRejectEmailId",u),i.prop("tbRejectionReasonId",h),i.prop("hasAssociatedItem",p),i.prop("pnlRejectAssociatedItemId",m),i.prop("isForAssocLib",f),i.prop("lblRejectAssocLibId",g),i.prop("lblRejectAssocPostId",v),i.prop("lblRej,$("#"+n+"-modal").on("hidden.bs.modal",function(){hl_resourcelibrary_videoJs_pauseAll()}),hl_common_ui_unBlockUI()}}))}function hl_common_ui_ItemPreview_OnBtnModApproveClick(e){var t=$(e).prop("itemKey"),i=$("#"+$(e).prop("lnkApproveClientId")),n=$(e).prop("lnkApproveName");$("#"+t+"-modal").modal("hide"),0===i.attr("href").indexOf("javascript:")?WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(n,"",!0,"","",!1,!0)):i.click()}function hl_common_ui_ItemPreview_OnBtnModRejectClick(e){var t=$(e).prop("itemKey"),i=$(e).prop("itemTypeHint")+t,n=$(e).prop("hdnRejectedItemKeyClientId"),o=$(e).prop("tbRejectionSubjectId"),a=$(e).prop("hdnRejectionSubjectId"),s=$(e).prop("hdnRejectionEmailId"),r=$(e).prop("tmceRejectEmailId"),l=$(e).prop("tbRejectionReasonId"),c=$(e).prop("hasAssociatedItem"),d=$(e).prop("pnlRejectAssociatedItemId"),u=$(e).prop("isForAssocLib"),h=$(e).prop("lblRejectAssocLibId"),p=$(e).prop("lblRejectAssocPostId"),m=$(e).prop("lblRejectEmailId"),f=$(e).prop("pnlRejectModalClientId");$("#"+t+"-modal").modal("hide"),hl_egroups_moderationQueue_onPendingRejectClick(i,n,o,a,s,r,l,c,d,u,h,p,m,f)}function hl_common_ui_showBsModal(e){return hl_directory_profile_showEditMode(e)}function hl_common_ui_hideBsModal(e){return hl_directory_profile_hideEditMode(e)}function hl_common_ui_validateUrl(e,t){HigherLogic.Util.post("/higherlogic/ui/mvc/common/common/ValidateUrl",JSON.stringify({url:e}),"json").done(t)}function hl_common_ui_validateUrlPromise(e){return HigherLogic.Util.post("/higherlogic/ui/mvc/common/common/ValidateUrl",JSON.stringify({url:e}),"json")}function hl_common_ui_validateUrlPageCode(e,t){HigherLogic.Util.post("/higherlogic/ui/mvc/common/common/ValidateUrlPageCode",JSON.stringify({urlPageCode:e}),"json").done(t)}function hl_common_ui_showModalRefreshTinyMce(e,t){$("#"+e).modal("show"),0===$("#"+t+"_ifr").length&&hl_common_ui_tinymce.init("#"+t)}function hl_common_ui_googleMaps_clickMarker(e){var t=$("#"+$(e).data("googleMapElement")),i=t.data("hlMap"),n=t.data("hlInfoWindow"),o=$("#"+$(e).data("gmPnlRow"));o.closest(".result-panel").find(".member-row.selected").removeClass("selected"),o.addClass("selected");var a=new google.maps.Marker({position:new google.maps.LatLng($(e).data("latitude"),$(e).data("longitude")),map:i}),s=o.closest(".result-panel").find(".member-directory"),r=o.closest(".result-panel").find(".map-sliding-panel");s.is(":visible")&&(480===$(document).width()||$(document).width()<480)&&hl_directory_findContactSearch2_togglePanel(s.is(":visible"),r),i.panTo(a.getPosition()),n.setContent(o.data("infoWindowContent")),n.open(i,a)}function hl_common_ui_ruleQueryBuilder_onAddressPickerClick(e){var t=$(e),i=$(".address-picker-modal");i.find(".invalid-address").hide(),i.modal("show");var n=i.find(".address-picker-save"),o=t.data("addresskey");"00000000-0000-0000-0000-000000000000"!==o?(i.find(".addresspicker-address1").val(t.data("address1")),i.find(".addresspicker-address2").val(t.data("address2")),i.find(".addresspicker-city").val(t.data("city")),$("#"+n.data("stateid")).val(t.data("stateprovincecode")),$("#"+n.data("countryid")).val(t.data("countrycode")),i.find(".addresspicker-postalcode").val(t.data("postalcode"))):(i.find(".addresspicker-address1").val(""),i.find(".addresspicker-address2").val(""),i.find(".addresspicker-city").val(""),$("#"+n.data("stateid")).val(""),$("#"+n.data("countryid")).val(""),i.find(".addresspicker-postalcode").val("")),n.click(hl_common_ui_ruleQueryBuilder_onAddressPickerModalSaveClick),n.data("addresskey",o),n.data("hiddenfieldid",t.data("hiddenfieldid")),n.data("tbid",t.attr("id"))}function hl_common_ui_ruleQueryBuilder_onAddressPickerModalSaveClick(e){var i=$(".address-picker-modal");i.find(".resspicker-address1"),a=i.find(".addresspicker-address2"),s=i.find(".addresspicker-city"),r=$("#"+n.data("stateid")),l=$("#"+n.data("countryid")),c=i.rLogic.Util.post("/higherlogic/ui/mvc/common/common/CreateUpdateAddress",JSON.stringify({addressKey:n.data("addresskey"),addressval(),stateProvinceCode:r.val(),countryCode:l.val(),postalCode:c.val()}),"json").dccess?($("#"+n.data("hiddenfieldid")).val(e.Message.substring(0,e.Message.indexOf("|"))),(t=$("#"+n.data("tbid"))).val(e.Message.substring(e.Message.indexOf("|")+1)),t.data("addresskey",e.Message.substring(0,e.Message.indexOf("|"))),t.data("address1",o.val()),t.data("address2",a.val()),t.data("city",s.val()),t.data("stateprovincecode",r.val()),t.data("countrycode",l.val()),t.data("postalcode",c.val()),i.modal("hide")):i.find(".invalid-address").show()})}function hl_common_ui_getFormForDialog(e){return 0<$(e).closest("form").length?$(e).closest("form"):0<$('form[id="MasterPageForm"]').length?$('form[id="MasterPageForm"]'):$("form")[0]}$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(e){this.options.title?e.html(this.options.title):e.html("&#160;")}})),$.fn.getHexBackgroundColor=function(){var e=$(this).css("background-color");if(!e)return"FFFFFF";var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function i(e){return("0"+parseInt(e).toString(16)).slice(-2)}return t?i(t[1])+i(t[2])+i(t[3]):"FFFFFF"},function(i){i.extend(i.fn,{alertChange:function(e){var t=i(this);n(t,e)},alertSuccess:function(e){var t=i(this);n(t,e)}});var n=function(e,t){e.addClass(t)}}(jQuery);var hl_common_ui_tinymce=function(){function s(e){return tinyMCE.EditorManager.get(e)}function g(e,t){s(e).execCommand("mceInsertContent",!1,t)}function n(M){var e;$("#"+$(M).data("imagedescmodalid")).appendTo("body"),$("#"+$(M).data("bsmediaobjectmodalid")).appendTo("body"),$("#"+$(M).data("bsembedvideomodalid")).appendTo("body"),$(M).data("hidecontentpreviewoption")||((e=$("#"+$(M).data("cbpreviewoptid"))).bootstrapSwitch({size:"mini",onText:"Yes",offText:"No",handleWidth:25}),e.on("switchChange.bootstrapSwitch",function(e,t){$(M).data("autodetecturls",t),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({generatePreviewUrl:t}),url:"/higherlogic/ui/mvc/common/common/UpdateGeneratePreviewUrlsModuleConfig"})})),$(M).data("showconfirmonleave")&&$("a").not(".dropdown-toggle").not(".btn").not(".alert-exempt").not('[data-tokens="null"]').click(function(e){if($(M).data("isdirty"))return confirm("The changes you made will be lost if you navigate away from this page.\n\nClick OK to leave.\n\nClick Cancel to stay on this page.")});var t,i,n,o,a,s,r,l,c=$(M).data("showmoxiemanager")?{moxiemanager:"/HigherLogic/moxiemanager/plugin.js"}:{},d="advlist anchor charmap code fullscreen insertdatetime codesample image linkpreview searchreplace table visualblocks visualchars",u=(t=M,i=$(t).data("version").toLowerCase(),n=(!!$(t).data("isatmentionsactive")?" hlmentions ":"")+(!!$(t).data("allowhashtags")?" hlhashtags ":""),o=!!$(t).data("showmediabuttons"),a=!!$(t).data("showmoxiemanager")?"image media insertfile hleditimage":o?"imageFeature videoFeature hleditimage":"",s=!!$(t).data("showhtmlbutton")?" hlhtml ":"",r=!!$(t).data("showmailmergevariableselector")?" hlmailmergevariable ":"",l="full"!==i&&"standard"!==i&&!!$(t).data("allowbasicplus")?"hlexpandplus":"",h("full"===i?["fontsize fontfamily blocks","bold italic underline strikethrough codesample","alignleft aligncenter alignright alignjustify","forecolor backcolor","bullist numlist","subscript superscript charmap",a,"link unlink","anchor","table","outdent indent","searchreplace",n,"removeformat","fullscreen ",s,r]:"standard"===i||l?["fontsize blocks","bold italic underline strikethrough codesample","alignleft aligncenter alignright alignjustify","forecolor backcolor","bullist numlist","subscript superscript charmap",a,"link unlink","outdent indent",n,"removeformat","fullscreen ",s,r,l]:["bold italic underline codesample","bullist numlist",a,"link unlink",n,s,r]));function h(e){return e.filter(function(e){return!!e}).join(" | ")}try{tinymce.remove()}catch(e){}finally{tinymce.baseURL=$(M).data("tinymcefolderlocation"),tinymce.init({readonly:$(M).data("readonly"),branding:!1,browser_spellcheck:!0,contextmenu:"image table",content_css:$(M).data("contentcss").split("|"),content_style:"body { font-size: 11pt; }",convert_urls:!1,custom_undo_redo_levels:10,default_link_target:"_blank",entity_encoding:"raw",external_plugins:c,extended_valid_elements:"pre[*],script[*],style[*]",block_formats:"Paragraph=p; Heading 1=h1; Heading 2=h2; Heading 3=h3; Heading 4=h4; Heading 5=h5; Heading 6=h6; Preformatted=code; Blockquote=blockquote;",font_size_formats:"8pt 10pt 11pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",font_family_formats:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Calibri=calibri,arial,helvetica,sans-serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",forced_root_block:!1,menubar:"""),height:$(M).data("height"),hl_showmoxiemanager:$(M).data("showmoxiemanager"),image_advtabesponsive",value:"img-responsive"}ink_assume_external_targets:!0,menu:{edit:{title:"Edit",items:"pastetext"},insert:{title:"Insert",items:"bsMediaObject bsEmbedVideo"},view:{title:"View",items:"visualchars visualblocks visualaid | preview fullscreen"},format:{title:"Styles",items:"formats | removeformat"}},moxiemanager_image_settings:{view:"thumbs",title:"Image Uploader",maxsize:"10MB",extensions:"bmp,gif,ico,jpe,jpg,jpeg,jpg,pjpeg,png"},moxiemanager_file_settings:{view:"files",title:"File Uploader",filelist_main_toolbar:$(M).data("showmoxiemanagermenubuttons")?"":" ",maxsize:"10MB",extensions:"avi,bmp,gif,ico,jpe,jpg,jpeg,jpg,pjpeg,png,doc,docx,js,mkv,m3u,mid,midi,mp3,mp4,mpeg,mpg,ogg,ppt,pptx,snd,xls,xlsx,gz,zip,htm,html,pdf,rtf,txt,wav,webm,wma,wmv,wpd,wri"},moxiemanager_media_settings:{title:"Media Uploader (mp3, mp4, ogg, webm)",filelist_main_toolbar:$(M).data("showmoxiemanagermenubuttons")?"":" ",maxsize:"1GB",extensions:"mp3,mp4,ogg,webm"},moxiemanager_title:"File Manager",moxiemanager_insert_filter:function(e){e.meta.url="https:"+e.meta.url},plugins:d,paste_data_images:!0,paste_postprocess:function(e,t){$.each($(t.node).find("img"),function(){$(this).hasClass("img-responsive")||$(this).addClass("img-responsive")});var i=$(t.node).find("a").filter(function(e,t){return!t.hasAttribute("target")});$(i).attr("target","_blank")},paste_as_text:!1,relative_urls:!1,remove_linebreaks:!1,remove_redundant_brs:!1,remove_script_host:!1,selector:M,text_patterns:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],toolbar:u,toolbar_mode:"wrap",table_toolbar:"",valid_children:"+body[style|script],pre[code|script|div|p|br|span|img|style|h1|h2|h3|h4|h5],*[*]",valid_elements:"*[*]",codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Rubyalue:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"PL/SQL",value:"plsql"},{text:"SQL",value:"sql"},{text:"Visual Basic (VB)",value:"vb"},{text:"VB.NET",value:"vbnet"}],setup:function(P){P.on("init",function(e){var t,i=P.iframeElement.contentDocument;i.getElementsByTagName("head")[0].appendChild($("<script><\/script>").attr("src",$(M).data("jquerycdnaddress"))[0]),i.getElementsByTagName("head")[0].appendChild($("<script><\/script>").attr("src",$(M).data("tinymcejs"))[0]),i.getElementsByTagName("head")[0].appendChild($("<script><\/script>").attr("src",$(M).data("hashmentionjs"))[0]),i.getElementsByTagName("head")[0].appendChild($("<script><\/script>").attr("src",$(M).data("hashtagjs"))[0]),i.getElementsByTagName("head")[0].appendChild($("<script><\/script>").attr("src",$(M).data("mentionjs"))[0]),$(M).data("previewonload")&&(hl_common_util_stringIsNullOrWhiteSpace(t=hl_common_util_getParameterByName("previewurl"))||(e.target.execCommand("mceInsertContent",!0,"<p></p><p>"+t+"&nbsp;</p>"),parseCurrentLine(e.target,0,""))),$(M).trigger("tinyMceRender",[P])}),P.on("LoadContent",function(e){$(".mce-edit-area iframe").contents().find(".remove-embedded-content").bind("click",function(){var e=$(this).closest("table.mce-item-table").attr("id");P.dom.remove(e)}),$(P.getBody()).find(".remove-embedded-content").css("cursor","pointer");function t(e){e.attr("href","javascript:void(0)"),e.removeAttr("data-mce-href"),e.attr("contenteditable","false")}t($(P.getBody()).find("a.user-content-hashtag")),t($(P.getBody()).find("a.user-content-mention"))}),P.on("BeforeSetContent",function(e){try{var t,i,n,o;void 0!==e.initial&&e.initial||hl_common_util_stringIsNullOrWhiteSpace(e.content)||1!==$(e.content).length||"IMG"!==$(e.content)[0].nodeName||hl_common_util_hasAttr($(e.content),"id")&&"__mcenew"===$(e.content).attr("id")||(void 0===(i=(t=$("<div />").append(e.content)).children(1)).attr("data-skipSetContent")?(n=hl_common_util_generateGuid(),i.attr("data-mce-hlimagekey",n),i.attr("data-mce-hlselector",M),e.content=t.html(),o=$("#"+$(M).data("imagedescmodalid")),$("#"+$(M).data("imagedescmodalid")+"-tbTitle").val(""),$("#"+$(M).data("imagedescmodalid")+"-tbDesc").val(""),o.data("imagekey",n),setTimeout(function(){var e=$("#"+$(M).data("bsmediaobjectmodalid"));e.find("[id*='-dvUploadContainer']").hl_accessibility_show(),e.find("[id*='-dvImageContainer']").hl_accessibility_hide(),e.find("[id*='-img']").attr("src"),e.find("[id*='-slctThumbnail']").val("100"),e.find("[id*='-h4']").text("Edit Image"),e.find("[id*='-btnSave']").text("Save Image")},1)):i.removeAttr("data-skipSetContent"))}catch(e){}}),P.on("change",function(e){$(window).trigger("TinyMceChangeEvent",e),$(M).data("isdirty",tinymce.activeEditor.isDirty()),tinymce.triggerSave(),$(M).val(m())}),$(M).data("isatmentionsactive")&&(hl_common_ui_tinymce_mention.addMentionAutocompleter(P),P.ui.registry.addButton("hlmentions",{text:"@",tooltip:"@Mentions",onAction:function(){P.execCommand("mceInsertContent",!1,"@"),$(M).data("isMention",!0),P.fire("keyup",{},!0)}})),$(M).data("allowhashtags")&&(hl_common_ui_tinymce_hashtag.addHashAutocompleter(P,M),P.ui.registry.addButton("hlhashtags",{text:"#",tooltip:"#Hashtags",onAction:function(){P.execCommand("mceInsertContent",!1,"#"),$(M).data("isHashtag",!0),P.fire("keyup",{},!0)}})),P.ui.registry.addButton("hlhtml",{text:"HTML",tooltip:"Source code",onAction:function(){var e;e="code",P.ui.registry.getAll().buttons[e].onAction()}}),P.ui.registry.addIcon("mailmergeicon",'<svg width="20" height="20" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="layer-group" class="svg-inline--fa fa-layer-group fa-lg" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"></path></svg>'),P.ui.registry.addButton("hlmailmergevariable",{tooltip:"Mail merge variable selector",icon:"mailmergeicon",onAction:function(){$("#"+$(M).data("mailmergevariablemodalid")).modal("show")}}),P.ui.registry.addButton("imageFeature",{tooltip:"Insert/edit Image",icon:"image",onAction:function(){var e,t,i,n,o,a,s,r,l,c,d=$("#"+$(M).data("bsmediaobjectmodalid")),u=d.find("[id*='-h4']"),h=d.find("[id*='-btnSave']"),p=d.find("[id*='-dvUploadContainer']"),m=d.find("[id*='-dvImageContainer']"),f=d.find("[id*='-img']"),g=d.find("[id*='-imgSizeAlert']"),v=d.find("[id*='-slctThumbnail']"),y=d.find("[id*='-tbTitle']"),b=d.find("[id*='-tbDesc']");e=$(M).data("bsmediaobjectmodalid"),t=$("#"+e+"-h4"),i=$("#"+e+"-btnSave"),n=$("#"+e+"-dvUploadContainer"),o=$("#"+e+"-dvImageContainer"),a=$("#"+e+"-img"),s=$("#"+e+"-imgSizeAlert"),r=$("#"+e+"-slctThumbnail"),l=$("#"+e+"-tbTitle"),c=$("#"+e+"-tbDesc"),t.text("Insert Image"),n.hl_accessibility_show(),o.hl_accessibility_hide(),a.attr("src",""),a.removeAttr("width"),a.removeAttr("height"),s.hide(),r.val("400"),l.val(""),c.val(""),i.text("Insert");var _,w,C,k,x,S,T,I,j,E,A=P.selection.getNode();"IMG"===A.nodeName&&(_=$(A).attr("title"),w=$(A).attr("alt"),C=void 0!==$(A).attr("width")?$(A).attr("width"):400<f.data("baseWidth")?400:0,k=f.data("baseWidth")<400&&500<f.data("baseHeight")?500:0,x=$(A).attr("src"),S=void 0===$(A).attr("width")?0:$(A).attr("width"),T=$(A).data("imgbase"),I=$(A).data("imgthumbnail"),j=$(A).data("imgmedium"),E=$(A).data("imglarge"),u.text("Edit Image"),f.attr("src",x),f.data("imgBase",T),f.data("imgThumbnail",I),f.data("imgMedium",j),f.data("imgLarge",E),0<C&&f.attr("width",C),0<k&&f.attr("height",k),void 0===$(A).attr("width")&&(400<f.data("baseWidth")||500<f.data("baseHeight"))?g.show():g.hide(),v.val(S),y.val(_),b.val(w),h.text("Save Image"),p.hide(),m.show()),d.modal("show")}}),P.ui.registry.addIcon("videoFeatureicon",'<svg width="20" height="20" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="video" class="svg-inline--fa fa-video fa-lg" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V1286 16.9 16.4 16.9 28.2V384c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1V320 192 174.9l14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z"></path></svg>'),P.ui.registry.addButton("videoFeature",{tooltip:"Insert/edit Video",icon:"videoFeatureicon",onAction:function(){var i=$(M).data("bsembedvideomodalid"),e=$("#"+i);void 0===e.data("bindedOnFirstShow")&&(e.on("shown.bs.modal",function(){var e=$("#"+i+"-tbEmbed"),t=$("#"+i+"-dvError");e.val(""),t.hl_accessibility_hide(),e.closest(".form-group").removeClass("has-error")}),e.data("bindedOnFirstShow",!0)),e.modal("show")}}),P.ui.registry.addButton("hleditimage",{tooltip:"Edit Image Title/Description",icon:"edit-image",onAction:function(){var e,t=P.selection.getNode();"IMG"===t.nodeName?(e=$("#"+$(M).data("imagedescmodalid")),P.selection.setNode(t),$("#"+$(M).data("imagedescmodalid")+"-tbTitle").val($(t).attr("title")),$("#"+$(M).data("imagedescmodalid")+"-tbDesc").val($(t).attr("alt")),e.modal("show")):hl_common_ugedescmodalid")).data("warningmessage"),"")}}),P.ui.registry.addToggleButton("hlexpandplus",{tooltip:"Expand Plus Editor",icon:"more-drawer",onSetup:function(){p(M,!1)},onAction:function(e){var t=!e.isActive();p(M,t),e.setActive(t)}}),P.ui.registry.addMenuItem("bsMediaObject",{text:$(M).data("insertmediaobjecttext"),context:"tools",onclick:function(){var e=$("#"+$(M).data("bsmediaobjectmodalid"));void 0===e.data("bindedOnFirstShow")&&(e.on("shown.bs.modal",function(){var e=$("#"+$(M).data("bsmediaobjectmodalid")+"-slctThumbnail");null===e.val()&&e.val(e.find("option:first").val())}),e.data("bindedOnFirstShow",!0)),e.modal("show")}}),P.ui.registry.addMenuItem("bsEmbedVideo",{tooltip:$(M).data("insertembeddedvideotext"),context:"tools",onclick:function(){var i=$(M).data("bindedOnFirstShow")&&(e.on("shown.bs.modal",function(){var e=$("#"+i+"-tbEmbed"),t=$("#"+i+"-dvError");e.val(""),t.hl_accessibility_hide(),e.closest(".form-group").removeClass("has-error")}),e.data("bindedOnFirstShow",!0)),e.modal("show")}}),hl_common_ui_tinymce_embedly.addEmbedly(P)}})}}$(document).on("focusin",function(e){$(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length&&e.stopImmediatePropagation()});var o=['[aria-label="Font sizes"]','[aria-label="Blocks"]','[aria-label="Strikethrough"]','[aria-label="Align left"]','[aria-label="Align center"]','[aria-label="Align right"]','[aria-label="Justify"]','[aria-label="Text color"]','[aria-label="Background color"]','[aria-label="Subscript"]','[aria-label="Superscript"]','[aria-label="Special character"]','[aria-label="Decrease indent"]','[aria-label="Increase indent"]','[aria-label="Clear formatting"]','[aria-label="Fullscreen"]'];function p(e,t){var i=$(e+" + .tox-tinymce .tox-editor-container");o.forEach(function(e){$btn=i.find(e),t?($btn.hl_accessibility_show(),$btn[0].style.display="flex"):$btn.hl_accessibility_hide()}),i.find('.tox-editor-header [role="toolbar"]').each(function(e,t){tribute("aria-hidden")})?($(t).hl_accessibility_show(),$(t)[0].style.display="flex"):$(t).hl_accessibility_hide()})}function i(e){s(e).setContent("")}function m(e,t){return void 0===t&&(t="html"),null!=e?s(e).getContent({format:t}):tinymce.activeEditor.getContent({format:t})}function v(e){var t=$(,n=$("#"+e+"-img"),o=$("div.original-img-alert");n.attr("src",""),o.hide(),i.hl_accessibility_hide(),t.hl_accessibility_show()}function t(e){var t=HigherLogic.Common.FilestackExt.Util.baseImagePickerOptions(!1),i=$("#"+tinyMCE.activeEditor.id).data("fsfromsources");HigherLogic.Common.FilestackExt.TinyMce.bsMediaObjOpenFs($(e).data("fsKey"),i,t,$(e).data("mediaObjectModalId"),"/higherlogic/ui/mvc/common/filepicker/uploadimagefile")}return{addTextToEditor:g,init:function(e){$(e).data("showmoxiemanager")||HigherLogic.Common.FilestackExt.Util.loadFileStack(),$(e).data("initSetContent",!0),function e(t,i){$(document).data("tinymceLoaded")&&"undefined"==typeof tinymce&&void 0===i&&(i=setInterval(function(){e(t,i)},10));if(void 0!==i&&"undefined"==typeof tinymce)return;"undefined"==typeof tinymce?($(document).data("tinymceLoaded",!0),$.getScript($(t).data("tinymceurl"),function(){$(document).removeData("tinymceLoaded"),n(t)})):(clearInterval(i),n(t))}(e)},calculateAspectRatioFit:function(e,t){var i=0,n=e,o=t;return 200<n&&(i=200/n,$(this).css("width",200),$(this).css("height",o*i),o*=i,n*=i),1e4<o&&(i=1e4/o,$(this).css("height",1e4),$(this).css("width",n*i),n*=i,o*=i),{width:n,height:o}},clearTinyMce:i,destroyTinyMce:function(e){tinymce.execCommand("mceRemoveControl",!0,e)},getTinyMceContent:m,isActiveEditorEmpty:function(e){return hl_common_util_stringIsNullOrWhiteSpace(s(e).getContent({format:"text"}))&&s(e).getContent().indexOf("<img")<0},validate:function(e,t,i,n){return $("#"+e).closest(t).removeClass("has-error"),hl_common_util_stringIsNullOrWhiteSpace(n)||$("#"+e).text(""),!hl_common_ui_tinymce.isActiveEditorEmpty(i)||($("#"+e).closest(t).addClass("has-error"),hl_common_util_stringIsNullOrWhiteSpace(n)||$("#"+e).text(n),$(document).scrollTop($("#"+e).closest(t).offset().top),!1)},onBsEmbedVideoSave:function(e){var t=$(e).data("controlId"),i=$("#"+t),n=$("#"+t+"-tbEmbed"),o=$("#"+t+"-dvError");if(n.closest(".form-group").removeClass("has-error"),o.hl_accessibility_hide(),HigherLogic.Util.stringIsNullOrWhiteSpace(n.val()))return n.closest(".form-group").addClass("has-error"),o.hl_accessibility_show(),!1;var a=$("<div>").append(n.val()).find("iframe");if(0===a.length)return n.closest(".form-group").addClass("has-error"),o.hl_accessibility_show(),!1;var s,r,l,c=$("<a>").prop("href",a.attr("src")).prop("hostname");if(s=$(e),r=c,void 0===(l=s.data("validembedhostnames"))||""===l||!l.split(",").some(function(e){return 0<e.length&&0<=r.indexOf(e)}))return n.closest(".form-group").addClass("has-error"),o.hl_accessibility_show(),!1;var d=parseInt(a.attr("height")),u=parseInt(a.attr("width"));(isNaN(d)||isNaN(u))&&(u=640,d=360);var h=$('<div contenteditable="false"></div>').attr("style","position: relative; height: 0; overflow: hidden;").css("padding-bottom",(d/u*100).toFixed(2)+"%").append('<iframe src="'+a.attr("src")+'" class="hl-embedded-video" width="'+u+'" height="'+d+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position: absolute;top:0;left:0;width:100%;height:100%;"></iframe>');return g(i.data("selector"),h[0].outerHTML),n.val(""),i.modal("hide"),!0},onBsMediaObjectSave:function(e){var t,i,n,o=$(e).data("mediaObjectModalId"),a=$("#"+o),s=$("#"+o+"-textarea"),r=$("#"+o+"-img"),l=$("#"+o+"-slctThumbnail"),c=($("#"+o+"-cbLinkImage"),$("#"+o+"-tbTitle")),d=$("#"+o+"-tbDesc"),u=$("#"+o+"-error-message"),h=!hl_common_util_stringIsNullOrWhiteSpace(r.attr("src")),p=0<s.length&&!hl_common_util_stringIsNullOrWhiteSpace(s.val()),m=!!c.val();if(!h||!m){var f=[];return h||f.push("Image is required"),m||f.push("Title is required"),u.html(f.join(", ")),void u.show()}(h||p)&&(i="",h&&(t=parseInt(l.val()),i="<img "+('src="'+r.attr("src")+'"')+' class="media-object tinymce-editor-img img-responsive" '+(""!==d.val()?'alt="'+d.val()+'"':'image"')+" "+(""!==c.val()?'title="'+c.val()+'"':"")+" "+('data-title="'+c.val()+'"')+" "+(100<=t?'width="'+t+'"':"")+" "+('data-modalsrc="'+r.data("imgBase")+'"')+" "+('data-imgbase="'+r.data("imgBase")+'"')+" "+('data-imgthumbnail="'+r.data("imgThumbnail")+'"')+" "+('data-imgmedium="'+r.data("imgMedium")+'"')+" "+('data-imglarge="'+r.data("imgLarge")+'"')+"> "),n='<div class="media" style="overflow:hidden; zoom:1;">'+i+"</div>(),a.modal("hide")},onBsMediaObjectRemoveImage:function(e){v($(e).data("mediaObjectModalId")),t(e)},onBsMediaObjectThumbnailSizeChange:function(e){var t,i,n,o,a,s=$(e).data("mediaObjectModalId");$("#"+s+"-dvImageContainer").is(":visible")&&(t=$("div.original-img-alert"),i=$("#"+s+"-img"),n=parseInt(i.data("baseHeight")),o=parseInt(i.data("baseWidth")),a=parseInt($(e).val()),t.hide(),0===a?i.attr("src",i.data("imgBase")):i.attr("src",200<a?i.data("imgMedium"):i.data("imgThumbnail")),i.removeAttr("width"),i.removeAttr("height"),0<a?(o<400&&500<n&&i.attr("height",500),i.attr("width",a)):(400<o||400<n)&&(400<o&&i.attr("width",400),o<400&&500<n&&i.attr("height",500),t.text("The original image ("+o+" X "+n+") has been minimized to fit the current dis),i=$("#"+e+"-tbTitle").val(),n=$("#"+e+"-tbDesc").val(),o=$("<div>").append(hl_common_ui_tinymce.getTinyMceContent(t.data("selector"))),a=o.find('img[data-mce-hlimagekey="'+t.data("imagekey")+'"]');hl_common_util_stringIsNullOrWhiteSpace(i)?a.removeAttr("title"):a.attr("title",i),a.attr("alt",n),a.attr("data-skipSetContent",!0),s(t.data("selector")).setContent(o.html()),t.modal("hide")},onInput:function(e,t){s(e).on("input",function(){t(e)})},reloadTinyMce:function(e){0===$("#"+e+"_ifr").length&&hl_common_ui_tinymce.init("#"+e)},setTextValue:function(e,t){i(e),s(e).execCommand("mceInsertContent",!1,t)},addEditorAction:function(e){tinymce.on("addeditor",e)},getActiveEditor:function(){return tinymce.activeEditor},getEditor:s,waitToLoadTinymce:function e(t,i){void 0===i&&"undefined"==typeof tinymce&&(i=setInterval(function(){e(t,i)},10)),void 0!==i&&"undefined"==typeof tinymce||"undefined"!=typeof tinymce&&(clearInterval(i),t())}}}(),hl_common_ui_tinymce_embedly=function(){function i(e,t,i){var n,o,a,s,r,l,c,d,u,h,p,m,f;function g(e,t){return t<0&&(t=0),3==e.nodeType&&(c=e.data.length)<t&&(t=c),t}function v(e,t){1!=e.nodeType||e.hasChildNodes()?n.setStart(e,g(e,t)):n.setStartBefore(e)}function y(e,t){1!=e.nodeType||e.hasChildNodes()?n.setEnd(e,g(e,t)):n.setEndAfter(e)}if((n=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(l=n.endContainer.previousSibling)){if(!n.endContainer.firstChild||!n.endContainer.firstChild.nextSibling)return;l=n.endContainer.firstChild.nextSibling}if(v(l,c=l.length),y(l,c),n.endOffset<5)return;o=n.endOffset,s=l}else{if(3!=(s=n.endContainer).nodeType&&s.firstChild){for(;3!=s.nodeType&&s.firstChild;)s=s.firstChild;3==s.nodeType&&(v(s,0),y(s,s.nodeValue.length))}o=1==n.endOffset?2:n.endOffset-1-t}for(a=o;v(s,2<=o?o-2:0),y(s,1<=o?o-1:0),--o," "!=(d=n.toString())&&""!==d&&160!=d.charCodeAt(0)&&0<=o-2&&d!=i;);n.toString()==i||160==n.toString().charCodeAt(0)?(v(s,o),y(s,a),o+=1):(0===n.startOffset?v(s,0):v(s,o),y(s,a)),hl_common_util_isValidEmailAddress(r=n.toString().trim())||("."==r.charAt(r.length-1)&&y(s,a-1),-1===(r=n.toString().trim()).indexOf("(")&&-1===r.indexOf(")")&&(f=r.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i))&&("www."==f[1]?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),hl_common_ui_blockUI(),u=f[1]+f[2],h=u,p=e,m=n,HigherLogic.Util.ocapiGet("/higherlogic/ocapi/oc/shared/tinymce/getpreview?url="+h).done(function(e){"error"!==e.data.type?(p.selection.setRng(m),b(e.data,p)):hl_common_ui_unBlockUI()})))}function b(e,t){var i,n,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y,b,_,w,C,k,x,S,T;void 0!==t&&(tinymce.activeEditor=t),null==e.error_message&&(i=null==e.title?e.url:e.title,tinymce.activeEditor.selection.setContent('<a data-url="'+e.original_url+'" class="embedly-content" href="'+e.url+'" target="_blank">'+i+"</a>"),s="",null!=e.provider_name&&(n=e.provider_name),null!=e.images[0]&&-1==e.images[0].url.indexOf("App_Themes/Common")&&(o=e.images[0].url,r=window.hl_common_ui_tinymce.calculateAspectRatioFit(e.images[0].width,e.images[0].height)),null==o&&null!=e.images[1]&&-1==e.images[1].url.indexOf("App_Themes/Common")&&(o=e.images[0].url,r=window.hl_common_ui_tinymce.calculateAspectRatioFit(e.images[1].width,e.images[1].height)),null==o&&null!=e.images[2]&&-1==e.images[2].url.indexOf("App_Themes/Common")&&(o=e.images[2].url,r=window.hl_common_ui_tinymce.calculateAspectRatioFit(e.images[2].width,e.images[2].height)),null==o&&null!=e.images[3]&&-1==e.images[3].url.indexOf("App_Themes/Common")&&(o=e.images[3].url,r=window.hl_common_ui_tinymce.calculateAspectRatioFit(e.images[3].width,e.images[3].height)),null!=e.title&&(a=e.title),null!=e.description&&(s=e.description),l=tinymce.activeEditor.dom.create("table",{id:tinymce.activeEditor.dom.uniqueId(),contenteditable:"false",width:"500",height:"400",cellpadding:"10",style:"border: 1px solid #ebebeb; border-left: 8px solid #ebebeb;"}),c=tinymce.activeEditor.dom.create("tr"),tinymce.activeEditor.dom.add(l,c),d=tinymce.activeEditor.dom.create("td",{colspan:"2",style:"border: none;"},n),tinymce.activeEditor.dom.add(c,d),u=tinymce.activeEditor.dom.create("td",{style:"border: none;text-align:right;",align:"right"}),tinymce.activeEditor.dom.add(c,u),h=tinymce.activeEditor.dom.create("span",{class:"remove-embedded-content"},"remove preview"),tinymce.activeEditor.dom.add(u,h),f=tinymce.activeEditor.dom.create("tr"),tinymce.activeEditor.dom.add(l,f),p=tinymce.activeEditor.dom.create("td",{style:"border: none;",colspan:"3"}),tinymce.activeEditor.dom.add(f,p),m=tinymce.activeEditor.dom.create("table",{style:"border: none;"}),tinymce.activeEditor.dom.add(p,m),f=tinymce.activeEditor.dom.create("tr"),tinymce.activeEditor.dom.add(m,f),g=tinymce.activeEditor.dom.create("td",{style:"border: none;"}),tinymce.activeEditor.dom.add(f,g),null!=o&&(v=tinymce.activeEditor.dom.create("a",{style:"text-decoration:none;",href:e.original_url,target:"_blank"}),tinymce.activeEditor.dom.add(g,v),o=tinymce.activeEditor.dom.create("img",{src:o,width:r.width,height:r.height}),tinymce.activeEditor.dom.add(v,o)),y=tinymce.activeEditor.dom.create("td",{style:"border: none;"}),tinymce.activeEditor.dom.add(f,y),b=tinymce.activeEditor.dom.create("table",{style:"border: none;"}),tinymce.activeEditor.dom.add(y,b),_=tinymce.activeEditor.dom.create("tr"),tinymce.activeEditor.dom.add(b,_),w=tinymce.activeEditor.dom.create("td",{style:"border: none;"},a),tinymce.activeEditor.dom.add(_,w),C=tinymce.activeEditor.dom.create("tr"),tinymce.activeEditor.dom.add(b,C),k=tinymce.activeEditor.dom.create("td",{style:"border: none;"},s),tinymce.activeEditor.dom.add(C,k),x=tinymce.activeEditor.dom.create("tr"),tinymce.activeEditor.dom.add(b,x),S=tinymce.activeEditor.dom.create("td",{style:"border: none;"}),tinymce.activeEditor.dom.add(x,S),T=tinymce.activeEditor.dom.create("a",{style:"text-decoration:none;color:cadetblue",target:"_blank",href:e.original_url}," View this on "+n+" >"),tinymce.activeEditor.dom.add(S,T),tinymce.activeEditor.execCommand("mceInsertContent",!1,l.outerHTML),$(".mce-edit-area iframe").contents().find(".remove-embedded-content").bind("click",function(){var e=$(this).parent().parent().parent().parent().attr("id");tinymce.activeEditor.dom.remove(e)}),$(tinymce.activeEditor.getBody()).find(".remove-embedded-content").css("cursor","pointer"),hl_common_ui_unBlockUI())}return{addEmbedly:function(t){t.on("keydown",function(e){13==e.keyCode&&$("#"+t.id).data("autodetecturls")&&i(t,-1,"")}),t.on("keypress",function(e){41==e.keyCode&&$("#"+t.id).data("autodetecturls")&&i(t,-1,"(")}),t.on("keyup",function(e){32==e.keyCode&&$("#"+t.id).data("autodetecturls")&&i(t,0,"")}),t.ui.registry.addButton("embedly",{image:"https://s3.amazonaws.com/higherlogiccloudfront/HigherLogic/JavaScript/Desktop/3rdParty/tinymce/plugins/embedly/img/embed.png",tooltip:"Insert content preview",onclick:function(){t.windowManager.open({title:"Insert content preview",width:400,height:100,body:[{type:"textbox",name:"url",label:"Link"}],onsubmit:function(e){/^https?:\/\//i.test(e.data.url)||(e.data.url="http://"+e.data.url),hl_common_ui_blockUI(),$.embedly.extract(e.data.url).done(function(e){"error"!==e[0].type?b(e[0]):hl_common_ui_unBlockUI()})}})}}),t.ui.registry.addMenuItonaws.com/higherlogiccloudfront/HigherLogic/JavaScript/Desktop/3rdParty/tinymce/plugins/embedly/img/embed.png",text:"Insert link with content preview",context:"insert",prependToContext:!0,onclick:function(){t.windowManager.open({title:"Insert content preview",width:400,height:100,body:[{type:"textbox",name:"url",label:"Link"}],onsubmit:function(e){/^https?:\/\//i.test(e.data.url)||(e.data.url="http://"+e.data.url),hl_common_ui_blockU(function(e){"errBlockUI()})}})}})}}}(),hl_common_ui_tinymce_hashmention={createAutocompleterOnClickContent:function(e,a){return function(n){var o=window.parent.tinymce.activeEditor,t=o.ui.registry.getAll().popups[e.toLowerCase()],i=n.getAttribute("data-tag-text");t.fetch(i).then(function(e){r","1"),o.dispatch("AutocompleterStart",{lookupData:[{columns:t.columns,highlightOn:[],matchText:i,items:e,onAction:function(e,t,i){i&&(o.selection.setRng(t),o.insertContent(a(i))),o.dispatch("AutocompleterEnd"),n.removeAttribute("data-mce-autocompleter")}}]})})}},debounceFetch:function(i){var n;return function(){var t=arguments;return n&&window.clearTimeout(n),new Promise(function(e){n=window.setTimeout(function(){i.apply(null,t).then(e)},500)})}}},hl_common_ui_tinymce_hashtag=function(){var c={};var d=0;var i=hl_common_ui_tinymce_hashmention.debounceFetchon(s){$.ajax({type:"POST",url:"/higherlogic/ui/mvc/common/tagging/findtags",data:JSON.stringify({communityKey:e,searchTerm:r,isForHashtags:!0}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t,i,n,o,a;l===d&&((t=e.TagGroups.map(function(e){return[e].concat(e.Tags)}).flat()).forEach(function(e){e.TagKey&&(c[e.TagKey]=e)}),i=t.map(function(e){return e.TagGroupKey?{type:"cardmenuitem",value:"",label:"Tag Group: "+(i=e).Name,items:[{type:"cardtext",value:i.Name,text:i.Name}]}:{type:"cardmenuitem",value:(t=e).TagKey,label:t.Tag,items:[{type:"cardtext",value:t.Tag,text:t.Tag}]};var t,i}),n=t.some(function(e){return e.Tag&&e.Tag===r}),o=e.CanUserCreateTags&&!n&&!!r&&!!r.trim()?[{type:"cardmenuitem",value:a=r,label:"Create tag: "+a,items:[{type:"cardtext",value:a,text:"Create tag: "+a}]}]:[],s(o.concat(i)))}})})});function n(e,t){return'<a contenteditable="false" href="javascript:void(0)"class="user-content-hashtag" data-sign="#" '+('data-tag-key="'+e+'" ')+('data-tag-text="'+t+'" ')+">#"+t+"</a>"}function o(e){var t=c[e];return t?n(e,t.Tag):n(void 0,e)}return{addHashAutocompleter:function(n,t){n.ui.registry.addAutocompleter("hashTagAutoCompleter",{trigger:"#",minChars:0,columns:1,fetch:function(e){ret,e)},onAction:function(e,t,i){i&&(n.selection.setRng(t),n.insertContent(o(i))),e.hide()}})},onClickCompletedContent:hl_common_ui_tinymce_hashmention.createAutocompleterOnClickContent("hashTagAutoCompleter",o)}}(),hl_common_ui_tinymce_mention=function(){var o={},a={type:"cardmenuitem",value:"",label:"no results found",items:[{type:"cardtext",text:"No results found"}]};function s(e){return{type:"cardmenuitms:[{type:"cardcontainer",direction:"horizontal",items:[{type:"cardimage",src:e.PictureUrl,alt:e.DisplayName+"' profile image",classes:["tinymce-mention-image"]},{type:"cardcontainer",direction:"vertical",items:[{type:"cardtext",text:e.DisplayName,classes:["tinymce-mention-name"]},{type:"cardtext",text:e.IsMentionable?e.EmailAddress:"previously removed",classes:["tinymce-mention-email"]}]}]}]}}var r=0;var i=hl_common_ui_tinymce_hashmention.debounceFetch(function(e,i){var n=r+=1;return new Promise(function(t){$.ajax({type:"POST",url:"/higherlogic/ui/mvc/directory/directory/FindAtMentionContacts",data:JSON.stringify({name:e.replace(/\uFEFF/g,""),itemKey:i||HigherLogic.Util.guidEmpty,maxCount:10}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){n===r&&(e.forEach(function(e){o[e.ContactKey]=e}),t(e.length?e.map(s):[a]))}})})});function l(e){var t=o[e];return'<a contenteditable="false" href="javascript:void(0)"class="user-content-mention" data-sign="@" '+('data-contactkey="'+t.ContactKey+'" ')+('data-tag-text="'+t.DisplayName+'" ')+">@"+t.DisplayName+"</a>"}return{addMentionAutocompleter:function(n,t){n.ui.registry.addAutocompleter("mentionAutoCompleter",{trigger:"@",minChars:1,columns:1,fetch:function(e){return i(e,$(t).data("itemKey"))},onAction:function(e,t,i){i&&(n.selection.setRng(t),n.insertContent(l(i))),e.hide()}})},onClickCompletedContent:hl_common_ui_tinymce_hashmention.createAutocompleterOnClickContent("mentionAutoCompleter",l)}}();function hl_common_util_setUniqueRadioButton(e,t){for(i=0;i<document.forms[0].elements.length;i++){var n=document.forms[0].elements[i];"radio"==n.type&&-1!=n.name.indexOf(e)&&(n.checked=!1)}t.checked=!0}function hl_common_util_attach_dropdown_config(e,t,i){var n=$("."+e);0==n.find("li").length&&$(n.find(".dropdown-toggle")).hide(0),t&&$("#PageTitleH1").is(":visible")?0<$("#PageTitleH1 .dropdown-multi-option").length?$("#PageTitleH1 .dropdown-multi-option").replaceWith(n):$("#PageTitleH1").append(n):t&&$("#mvc-title-h1").length?0<$("#mvc-title-h1 .dropdown-multi-option").length?$("#mvc-title-h1 .dropdown-multi-option").replaceWith(n):$("#mvc-title-h1").append(n):0<n.parent().parent().find("h2:visible").length?0<n.parent().parent().find("h2 .dropdown-multi-option").length?n.parent().parent().find("h2 .dropdown-multi-option").replaceWith(n):n.parent().parent().find("h2").append(n):"1"==n.data("ismicrosite")&&(n.closest(".communityDescriptionDashboard").addClass("text-right"),n.addClass("text-left"),0===n.closest(".ContentUserControl").prev().length&&(n.closest(".MPContentArea").removeClass("no-pageTitle-padding").addClass("margin-top-small"),n.next().remove())),n.addClass(i).show(0)}function hl_common_util_printerFriendly(){var e=window.location.href;return e.indexOf("?")<0?e+="?Printable=1":e+="&Printable=1",window.open(e,"PinterWin","height=600,width=800,toolbar=yes,menubar=yes,location=no,status=no,scrollbars=yes").focus(),!0}function hl_common_util_submitSearch(){document.getElementById("SearchCriteria").value=document.getElementById("SearchInput").value,document.getElementById("SearchForm").submit()}function hl_common_util_openFriendWin(){var e=window.open("","FriendWin","height=600,width=800,toolbars=no,location=no,statusbar=no,scrollbars=yes");e.document.write('<form id="FriendForm" name="FriendForm" action="http://www.rims.org/AMTemplate.cfm?template=EmailToFriend.cfm" method="POST" TARGET="FriendWin"><input type="hidden" name="ThisPage" value="'+window.location+'"></form>'),e.document.close(),e.document.getElementById("FriendForm").submit()}function hl_common_util_clearForm(e){var t,i,n,o;if(""==e&&(e="MasterPageForm"),null==(t=document.getElementById?document.getElementById(e):document.forms[e])&&(t=document.forms[0]),document.getElementsByTagName){for(i=t.getElementsByTagName("input"),n=0;o=i.item(n++);)"text"==o.getAttribute("type")?o.value="":"checkbox"==o.getAttribute("type")&&(o.checked=!1);for(i=t.getElementsByTagName("select"),n=0;o=i.item(n++);)o.options.selectedIndex=0,$(o).trigger("change")}else for(i=t.elements,n=0;o=i[n++];)"text"==o.getAttribute("type")?o.value="":"checkbox"==o.getAttribute("type")&&(o.checked=!1);return!1}function hl_common_util_checkBoxListSetAll(e,t){for(var i=document.getElementById(e).getElementsByTagName("input"),n=0;n<i.length;n++)i[n].checked=t;return!1}function hl_common_util_showHideHelpPanel(e,t){var i=document.getElementById(e);return"none"==i.style.display?(i.style.left=t.offsetLeft+t.offsetWidth+"px",i.style.display="block"):i.style.display="none",!1}var hl_common_util_scrollToUpload=function(e){$("html, body").animate({scrollTop:1100},"slow",function(){})},HigherLogic;function hl_common_util_checkInputButton(e){var t;switch(e.type){case"link":t="a";break;case"button":t="button";break;default:t="input"}return $(t+"[id*="+e.id+"]")}function hl_common_util_fldVerifyValidation(e){var t=!0;switch(e.type){case"se;case"radio":break;default:""==$.trim($(e).val())&&(t=!1)}return t}function hl_common_util_guidGenerator(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function hl_common_util_resetAllWatermark(e,t){var i,t=$.parseJSON(t),n=$(e.OutPutAreaID);$(n).text($(n).prop("maxlength")),$.each(t,functi00-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)}function hl_common_util_isUrlValid(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=0;i<t.length;i++)e=e.replace(t[i].letters,t[i].base);return e}function hl_common_util_closeContainingModal(e){$(e).closest('div.modal[role="dialog"]').modal("hide")}function hl_common_util_enableBtnOnChange(e,t,i,n){var o=n.find("#"+t),a=o.data("targetbtnchangecount");i&&void 0===n.find(e).data("elementchanged")?(n.find(e).data("elementchanged",!0),void 0===a?a=1:a++):i||void 0===n.find(e).data("elementchanged")||(n.find(e).removeData("elementchanged"),a--),0<a&&o.hasClass("disabled")?(o.removeClass("disabled"),o.next().length&&hl_common_util_hasAttr(o.next(),"data-toggle")&&o.next().hasClass("dropdown-toggle")&&o.next().removeveData("targetbtnchangecount")}function hl_common_util_appendReturnUrl(e){if(!hl_common_util_hasAttr(e,"href"))return"";var t=$(e).attr("href");return-1===t.indexOf("returnurl")?t+(-1===t.indexOf("?")?"?returnurl=":"&returnurl=")+encodeURIComponent(window.location.href):void 0}function hl_common_util_bindReturnUrl(e){null!=e&&0!==e.trim().length||(e='data-returnurl="1"'),$("a["+e+"]").each(function(){$(this).attr("href",hl_common_util_appendReturnUrl($(this)))})}function hl_common_util_updateQueryStringParameter(e,t,i){var n=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(n))return e.replace(n,"$1"+t+"="+i+"$2");var o="";-1!==e.indexOf("#")&&(o=e.replace(/.*#/,"#"),e=e.replace(/#.*/,""));var a=-1!==e.indexOf("?")?"&":"?";return e+a+t+"="+i+o}function hl_common_util_removeQueryStringParameter(e,t){if(e.length<1)return e;var i=e.substr(1);if(2<=i.length){for(var n=encodeURIComponent(t)+"=",o=i.split(/[&;]/g),a=o.length;0<a--;)-1!==o[a].lastIndexOf(n,0)&&o.splice(a,1);return 0<o.length?"?"+o.join("&"):""}return e}function hl_common_util_removeURLParameter(e,t){var i=e.split("?");if(2<=i.length){for(var n=encodeURIComponent(t)+"=",o=i[1].split(/[&;]/g),a=o.length;0<a--;)-1!==o[a].lastIndexOf(n,0)&&o.splice(a,1);return e=i[0]+(0<o.length?"?"+o.join("&"):"")}return e}function hl_common_util_enableBtnOnElementChange(e,t){var i=$("#"+e),n=!0;$('[data-groupname="'+t+'"]').each(function(){var e=$(this).attr("data-oldvalue"),t="";switch($(this).prop("type")){case"select-multiple":t=$(this)"checkbox":t=$(this).prop("checked")?"1":"0";break;default:t=$(this).val()}n=e!==t&&n}),n?i.hasClass("disabled")&&i.removeClass("disabled"):i.hasClass("disabled")||i.addClass("disabled")}function hl_common_util_doPostBackWithOptions(e){WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(e,"",!0,"","",!1,!0))}function hl_common_util_convertDropDownToSelectPicker(e,t){void 0!==t&&null!=t||(t={});var i=e.split(",");$.each(i,function(){return!hl_common_util_stringIsNullOrWhiteSpace(this.toString())&&($("#"+this.toString()).selectpicker(t),!0)})}function hl_common_util_hashChangeStickyHeaderFix(e){null!=e&&void 0!==e||(e=60);var t=$(":target");0<t.length&&window.scrollTo(0,t.offset().top-e)}function hl_common_util_hlMvcCheckbox(e){var t=$(e),i=t.data("inactivebuttonclass"),n=t.data("activebuttonclass"),o=t.data("ischecked");0===t.datd t=$(e);t.keydown(function(e){32===e.keyCode&&e.preventDefault()}),t.keyup(function(e){32===e.keyCode&&t.click()})}function hl_common_util_addHasError(e){$(e).addClass("has-error"),$("#"+$(e).find("label").attr("for")).attr("aria-invalid","true")}function hl_common_util_removeHasError(e){$(e).removeClass("has-error"),$("#"+$(e).find("label").attr("for")).removeAttr("aria-invalid")}function hl_common_util_isGuid(e){return 36===e.length&&!$.isEmptyObject(e.match(/[a-zA-z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}/g))}function hl_common_util_updateGroupBtnDropDownToggleMenu(e,t,i,n){var o=$(e),a=$(o.closest("div.input-group-btn").find("button.dropdown-toggle")[0]);a.data(t,i),a.text((void 0!==n?n:i)+" ")}function hl_common_util_getFileSizeText(e){return 1e9<=e?Math.round(e/1e8)/10+" GB":1e3<=e?Math.round(e/1e3)+" KB":e+" Bytes"}function hl_common_util_closePopoverOnClick(){$("body").on("click",function(e){$('[data-toggle="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})})}function hl_common_util_formatNumberWithCommas(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function hl_common_util_shortenText(e,t,i,n,o){n=n||"...";var a=e.trim(),s=a.length;return i&&(t-=3),t<s&&(s=o?a.substr(0,t).lastIndexOf(" "):a.indexOf(" ",t)),0<s&&s<a.length&&i?a.substr(0,s)+n:0<s&&!i?a.substr(0,s):s<0&&o&&a.length>t?i?a.substr(0,Int(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/Trident\/7\./)?11:/Edge\/\d./i.test(e)?12:0}function hl_common_util_isOnMobileDevice(){var e=navigator.userAgent;return e.match(/Android/i)||e.match(/webOS/i)||e.match(/iPhone/i)||e.match(/iPad/i)||e.match(/iPod/i)||e.match(/BlackBerry/i)||e.match(/Windows Phone/i)}function hl_common_util_stringCompare(e,t){var i,n=e.length>=t.length?(i=e,t):(i=t,e);return i.split("").filter(function(e,t){return n[t]!==e})}function hl_common_util_inIframe(){if(!window.name||-1===window.name.indexOf("#"))return!1;try{return window.self!==window.top}catch(e){return!0}}function hl_community_hl_community_initCommunityDescriptionMask(){$("s),t=e.children(".wrap");t.show();var i,n=t.height();55<=n&&((i=e.find(".read-more")).show(),t.css("height","55px"),t.children(".gradient").show(),i.append($(".mainCommGradiantArrow")),i.find(".mainCommGradiantArrow").show(),$(".mainCommGradiantArrow").live({mouseenter:function(){$(".mainCommGradiantArrow div").addClass("commTongueOff"),$(".mainCommGradiantArrow div").removeClass("commTongueOn")},mouseleave:function(){$(".mainCommGradiantArrow div").removeClass("commTongueOff"),$(".mainCommGradiantArrow div").addClass("commTongueOn")}}),i.find(".mainCommGradiantArrow").bind("click",function(e){return 55==t.height()?(t.animate({height:n},"normal"),$(".mainCommGradiantArrow div").removeClass("commTongueOn"),$(".mainCommGradiantArrow div").addClass("commTongueOff"),$(".mainCommGradiantArrow div").text("hide all"),t.children(".gradient").fadeOut()):(t.animate({height:55},"normal"),$(".mainCommGradiantArrow div").removeClass("commTongueOff"),$(".mainCommGradiantArrow div").addClass("commTongueOn"),$(".mainCommGradiantArrow div").text("show all details"),t.children(".gradient").fadeIn()),!1}))})}function hl_community_showjQueryUIDialogJoinCommunityJsCallBack(e,t,i,n,o,a,s,r,l,c,d,u){document.all&&(l+=10);var h={};h[o]=function(){hl_community_JoinCommunity(e,t,i,n,a,s,d,u)},h.Cancel=function(){$(this).dialog("close"),$(this).dialog("destroy")},$(i).dialog({resizable:!0,width:l,modal:r,appendTo:hl_common_ui_getFormForDialog(i),buttons:h,focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},open:function(){var e=$(this).parent().find(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(i).dialog("open")}function hl_community_JoinCommunity(e,t,i,n,o,a,s,r){$(i).parent().find("button").prop("disabled",!0).addClass("ui-state-disabled"),$("#"+n).show(),$.ajax({type:"POST",url:"/HigherLogic/Common/wsjson.aspx/JoinCommunity",data:JSON.stringify({communityKey:e}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){$(i).dialog("close"),$(i).dialog("destroy"),"success"==e.d?""!=t?hl_community_SubscribeUser(t,"True","ByUser","CommunityJoinLeave",i,o,a,s,r):0==s?hl_community_showJoinConfirmation(o,a,r):location.reload():(hl_common_ui_alertDialog("There was a problem processing your request, please try again."),$(i).parent().find("button").prop("disabled",!1).removeClass("ui-state-disabled"),$("#"+n).hide())}})}function hl_community_SubscribeUser(e,t,i,n,o,a,s,r,l){var c,d;$(o).find('div[id*="pnlOldDigest"]').length?(c=$(o).find("input[name$=RdoGrpSub]:checked").val(),d=$(o).find('input[id*="txtEmail"]').val(),$.ajax({type:"POST",url:"/HigherLogic/Common/wsjson.aspx/SubscribeUser",data:JSON.stringify({ListKey:e,EmailAddress:d,SubType:c,SubscriptionPerformedBy:i,SubscriptionLogCommentCode:n}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){-1==e.d.indexOf("error")&&0==r?hl_community_showJoinConfirmation(a,s,l):location.reload()}})):$.ajax({type:"POST",url:"/HigherLogic/Common/wsjson.aspx/SubscribeUserWithConsolidatedDigest",data:JSON.stringify({listKey:e,subToDailyConDigest:"1"==$(o).find('select[id*="ddlDailyConDigest"] option:selected').val(),subToWeeklyConDigest:"1"==$(o).find('select[id*="ddlWeeklyConDigest"] option:selected').val(),dailyDigestValue:$(o).find('select[id*="ddlDiscussionDigest"] option:selected').val()}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){-1==e.d.indexOf("error")&&0==r?hl_community_showJoinConfirmation(a,s,l):location.reload()}})}function hl_community_showJoinConfirmation(e,t,i){var n={};n[i]=function(){window.location=e},n.Close=function(){$(this).dialog("close"),$(this).dialog("destroy"),location.reload()},$(t).dialog({resizable:!0,width:550,modal:!0,appendTo:hl_common_ui_getFormForDialog(t),buttons:n,focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(t).dialog("open")}function hl_community_SubscribeUserAutoRedirect(e,t,i,n,o,a,s){$.ajax({type:"POST",url:"/HigherLogic/Common/wsjson.aspx/SubscribeUser",data:JSON.stringify({ListKey:e,EmailAddress:s,SubType:a,SubscriptionPerformedBy:i,SubscriptionLogCommentCode:n}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){-1==e.d.indexOf("error")?window.location=o:location.reload()}})}function hl_community_addEventButton_showModal(e,t,i,n,o,a){var s=$($(e).data("eventtypekeyid")),r=$($(e).data("startdatecontainerid")),l=$(e).data("eventstarttimeid"),c=$(e).data("eventendtimeid"),d=$($(e).data("enddatecontainerid")),u=$($(e).data("panelid")),h=$($(e).data("h4id")),p=$(e).data("tinymceselector");$(p).data("itemkey",i);var m=$($(e).data("eventtitleid")),f=$($(e).data("eventtitlecontainerid"));s.val(i),n?d.show():d.hide(),"00:00:00"!==o&&$(l+"_dateTimePicker").data("DateTimePicker").setDate(moment("01/01/01 "+o)),"00:00:00"!==a&&$(c+"_dateTimePicker").data("DateTimePicker").setDate(moment("01/01/01 "+a)),h.text(t),hl_common_ui_tinymce.clearTinyMce(p),m.text().click({elem:e},hl_community_addEventButton_onSaveButtonClick),u.modal("show")}function hl_community_addEventButton_onSaveButtonClick(e){var t=e.data.elem,i=$($(t).data("eventstartdateinputcontainerid")),n=$($(t).data("startdatecontainerid")),o=$($(t).data("eventstartdateid")+"_ucTextBox"),a=$($(t).data("eventstarttimeid")+"_ucTextBox"),s=$($(t).data("eventstarttimeinputcontainerid")),r=$($(t).data("panelid")),l=$($(t).data("savebuttonid")),c=$($(t).data("eventtitleid")),d=$($(t).data("eventtitlecontainerid")),u=$($(t).data("eventtitleinputcontainerid")),h=!0;d.removeClass("has-error"),n.removeClass("has-error"),r.find(".help-block").remove(),hl_common_util_stringIsNullOrWhiteSpace(c.val())&&(d.addClass("has-error"),u.append('<span class="help-block">Event title is required</span>'),h=!1),hl_common_util_stringIsNullOrWhiteSpace(o.val())&&(n.addClass("has-error"),i.append('<span class="help-block">Start date is required</span>'),h=!1),hl_common_util_stringIsNullOrWhiteSpace(a.val())&&(n.addClass("has-error"),s.append('<span class="help-block">Start time is required</span>'),h=!1),h&&(hl_common_ui_blockUI(),r.modal("hide"),l.click())}function showAddTags(t,e,i,n,o,a){a&&$(a).click(),$(o).click(function(e){e.preventDefault(),$(t).dialog("close"),$(t).dialog("destroy")}),$(t).dialog({autoOpen:!1,resizable:!1,title:e,minwidth:"500",width:"500",modal:!0,open:function(e,t){$(".ui-dialog-titlebar-close").hide(),$(this).css("position","");var i=$(".ui-dialog-titlebar-close");i.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(t).dialog("open")}function saveUserTags(e,t,i,n,o,a,s,r){for(var l=!1,c=$(t).val().split(","),d=0;d<c.length;d++)if(100<c[d].length){l=!0;break}l?($(n).text(o).show(),$(i).addClass("has-error")):(hl_common_ui_blockUI(),"True"==r&&($(s).dialog("close"),$(s).dialog("destroy"),$(a).val("True")),$(n).text("").hide(),$(i).removeClass("has-error"),$(e).click())}function saveAllTags(e,t,i,n,o){var a=!1,s=$(e).find("label[id*='AddTagError']"),r=$(e).find("div[id*='AddUserTagInput']"),l=$(e).find("input[id*='UserTagsTextBox']").val();if(void 0!==l){l=l.split(",");for(var c=0;c<l.length;c++)if(100<l[c].length){a=!0;break}}a?($(s).text(n).show(),$(r).addClass("has-error")):(hl_common_ui_blockUI(),"True"==o&&($(e).dialog("close"),$(e).dialog("destroy"),$(i).val("False")),$(s).text("").hide(),$(r).removeClass("has-error"),$(t).click())}$.fn.enterkeypressclickbtn=function(t){$(this).keydown(function(e){if(13==(e||event).keyCode)return $(t).click(),!1})},function(a){a.fn.hl_ko_confirmSaveOnDirtyForm=function(e){var o,t={",isDirtyCallback:"",confirmText:"",excludeElements:"",pageRefreshCallback:""};a.extend(t,e),""==t.confirmText&&(t.confirmText=i),o=t,a("a").not(o.excludeElements).each(function(){a(this).on("click",function(e){var t,i,n;e.preventDefault(),"string"==typeof e.target?a(this).data("_location",e.target):"object"==typeof e.target&&(void 0!==e.target.href?-1==e.target.href.indexOf("javascript")&&a(this).data("_location",e.target.href):((t="")!=a(this).attr("href")&&-1==a(this).attr("href").indexOf("javascript")&&(t=a(this).attr("href")),a(this).data("_location",t))),"function"==typeof o.pageRefreshCallback&&o.pageRefreshCallback(),""!=a(this).data("_location")&&void 0!==a(this).data("_location")&&(i=o,n=a(this),i.isDirtyCallback()?hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(function(){s(i,n)},function(){r(n)},"dialogConfirmSaveContinue","Save & continue","Continue without saving",!0,500,"auto","Save & Continue",i.confirmText):("function"==typeof i.pageRefreshCallback&&i.pageRefreshCallback(),window.location=a(n).data("_location")))})})};var i="You've made changes that require saving before leaving this page.";var s=function(e,t){hl_common_ui_blockUI(),e.saveCallback(e,"dirtySave",a(t).data("_location"))},r=function(e){window.location=a(e).data("_location")}}(jQuery),function(v,t){v.fn.hl_ui_bioBubble=function(i){var e={currectContactKey:"",displayContactKey:"",eventTriggers:"",tenantKey:"",authToken:"",title:"",closeButtonTitle:"Close",isJQueryUIWidget:!1,width:350,showDelay:1e3,hideDelay:1800,positionMy:"bottom center",positionAt:"top center",classes:"qtip-bootstrap",showProcessingCallback:function(){var e=l.first().qtip("api").tooltip.find(".bioBubbleShell");v(e).block({message:null,fadeIn:0,overlayCSS:{backgroundColor:"#000",opacity:.4,cursor:"wait"}})},hideProcessingCallback:function(){var e=l.first().qtip("api").tooltip.find(".bioBubbleShell");v(e).unblock({fadeOut:0})},contactPendingTxt:"Request pending <br />sent on  ",requiredClass:"HLModalRequired",buttonDisableClass:"ui-disabled",eventToTarget:null,loadingHtml:'<div class="bioBubbleShell"><div class="Inner"><div class="Loading"><img id="imgGlobalProcessing" src="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/ResourceLibrary/loading.gif"></div></div></div>',unknownUserHtml:'<div class="thisisneeded"><div class="bioBubbleShell"><div class="Inner"><div class="Pict"><img align="middle" width="80" height="80" style="border-width:1px;border-style:solid;" alt="" src="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/profile/profile_n2_50.png" class="Picture" title="Unknown" ></div><div class="Details"><div class="Name" ><h2>Unknown</h2></div></div></div></div></div>'},p=v.extend),n=i.find(".Action .Buttons #sendMessageButton"),o=(i.find(".Action .Buttons #sendMessageButton"),i.find(".Action .Buttons .friendRequestButton")),a=(i.find(".Action .Buttons .friendRequestLabel"),i.find(".Action .Buttons .FriendRequest"),i.find(".Action .Buttons .cancelFriendRequest")),s=i.find(".Action .Buttons"),r=(i.find(".Action .Buttons #MessageSent"),i.find(".SendMessage")),l=i.find(".SendMessage #MessageSubject"),c=i.find(".SendMessage #MessageBody"),d=i.find(".SendMessage #Send"),u=i.find(".SendMessage #Cancel"),h=i.find(".bioBubbleShell").attr("displaycontactkey").replace("mention","");0<n.length&&n.addClass("click-bound").on("click",function(){s.hide(),r.show(),t.reposition()}),0<u.length&&u.addClass("click-bound").on("click",function(){s.show(),r.hide(),t.reposition()}),0<d.length&&d.addClass("click-bound"i.addClass(p.buttonDisableClass);var o=e,a=t,s=o.val(),r=a.val();{var l;""==s||""==r?(0==s.length?o.addClass(p.requiredClass):o.removeClass(p.requiredClass),0==r.length?a.addClass(p.requiredClass):a.removeClass(p.requiredClass),i.removeClass(p.buttonDisableClass)):(p.showProcessingCallback(),hl_webapi_ajax("/Messaging/SendMessageToContact",l=function(e,t,i){var n={};return n.ContactKey=e,n.Subject=t,n.Body=i,n}(n,s,r),"POST",p.tenantKey,p.authToken,g,l),o.val(""),a.val(""))}}(l,c,d,h)}),0<o.length&&o.addClass("click-bound").on("click",function(){m(h)}),0<a.length&&a.addClass("click-bound").on("click",function(){f(h)})}function s(e,t,i){var n;0<i.find(".mention .Buttons .removeMention").length&&"true"===t.toLowerCase()?(i.find(".mention.row").show(),(n=i.find(".mention .Buttons .removeMention")).data("itemmentionkey",e),n.addClass("click-bound").on("click",function(){var e={itemMentionKey:v(this).data("itemmentionkey")};hl_webmethod_ajax("/HigherLogic/Common/wsjson.aspx/RemoveAtMention",e,"POST",o,e)})):i.find(".mention.row").hide()}function o(e,t){l.first().qtip("api").tooltip.find(".bioBubbleShell").find(".user-content-mention .Buttons .removeMention").replaceWith(""),v.each(v('[data-itemmentionkey="'+t.itemMentionKey+'"]'),function(){v(this).replaceWith(this.text)}),l.first().qtip("hide")}function m(e){var t;v("[displaycontactkey='"+i.displayContactKey+"']").find(".Action .Buttons .friendRequestButton").hide(),t="/Friends/PostFriendRequest?contactKey="+e,p.showProcessingCallback(),hl_webapi_ajax(t,{},"POST",p.tenantKey,p.authToken,n,null)}function f(e){var t;v("[displaycontactkey='"+i.displayContactKey+"']").find(".Action .Buttons .friendRequestLabel").hide(),l.first().qtip("api").tooltip.find(".bioBubbleShell").find(".Action .Buttons .FriendRequest").removeClass("alert alert-warning"),t="/Friends/CancelFriendRequest?contactKey="+e,p.showProcessingCallback(),hl_webapi_ajax(t,{},"POST",p.tenantKey,p.authToken,r,null)}function g(e,t){var i=l.first().qtip("api").tooltip.find(".bioBubbleShell"),n=i.find(".SendMessage #Send"),o=i.find(".Action .Buttons .SendMessageBtn"),a=i.find(".Action .Buttons"),s=i.find(".SendMessage"),r=i.find(".Action .Buttons #MessageSent");n.hide(),o.hide(),a.show(),s.hide(),l.first().qtip("reposition"),r.fadeIn("slow",function(){setTimeout(function(){r.fadeOut("slow",function(){o.show(),n.fadeIn("show")})},2500)}),p.hideProcessingCallback()}function n(e){var t=l.first().qtip("api").tooltip.find(".bioBubbleShell"),i=t.find(".Action .Buttons .friendRequestLabel"),n=t.find(".Action .Buttons .FriendRequest"),o=new Date,a='<a class="cancelFriendRequest" href="javascript: void(0);"data-contactkey="'+t.attr("displaycontactkey")+'"> Cancel Request</a>',s=p.contactPendingTxt+moment(o).format("l")+a;i.html(s),i.show(),n.addClass("alert alert-warning"),p.hideProcessingCallback(),t.find(".Action .Buttons .cancelFriendRequest").addClass("click-bound").on("click",function(){f(t.attr("displaycontactkey").replace("mention",""))})}function r(){var e=l.first().qtip("api").tooltip.find(".bioBubbleShell");e.find(".Action .Buttons .FriendRequest").append('<a href="javascript:void(0);" id="friendRequestButton" class="friendRequestButton btn btn-sm btn-default"runat="server" Visible="False">Contact Request</a>'),p.hideProcessingCallback();var t=e.attr("displaycontactkey").replace("mention","");e.find(".Action .Buttons .friendRequestButton").addClass("click-bound").on("click",function(){m(t)})}0<l.length&&l.first().qtip({prerender:!1,overwrite:!1,content:{text:function(n,o){var e=v("#bioBubbleShell"+p.displayContactKey);if(0<e.length)return setTimeout(function(){o.set("content.text",e.html()),a(0,o),v(n.originalEvent.target).hasClass("user-content-mention")&&0<v(n.originalEvent.target).data("itemmentionkey").length&&s(v(n.originalEvent.target).data("itemmentionkey"),v(o.tooltip))},0),p.loadingHtml;var t={contactKey:p.displayContactKey};return hl_webmethod_ajax("/HigherLogic/Common/wsjson.aspx/GetBioBubble",t,"POST",function(e,t){!e.d&&""!=e.d||(e=e.d),""==e&&(e=p.unknownUserHtml);var i=v(e);o.set("content.text",i.html()),""!=e&&(a(0,o),v(n.originalEvent.target).hasClass("user-content-mention")&&0<v(n.originalEvent.target).data("itemmentionkey").length&&s(v(n.originalEvent.target).data("itemmentionkey"),v(n.originalEvent.target).data("can-remove"),v(o.tooltip)),v("body").append(i))},t),p.loadingHtml},title:p.title,button:p.closeButtonTitle},style:{widget:p.isJQueryUIWidget,def:!0,width:p.width,classes:p.classes},show:{delay:p.showDelay,solo:!0,target:l},hide:{fixed:!0,delay:p.hideDelay,target:l},position:{my:p.positionMy,at:p.positionAt,target:"event",viewport:v(t)},events:{visible:function(e,t){},show:function(e,t){v(e.originalEvent.target).hasClass("user-content-mention")&&0<v(e.originalEvent.target).data("itemmentionkey").length&&s(v(e.originalEvent.target).data("itemmentionkey"),v(e.originalEvent.target).data("can-remove"),v(t.tooltip))}}})}}(jQuery,window),function(c){c.fn.hl_ui_common_fileuploadstatus=function(t,i,s,e){var r=c.extend({failedMalwareTemplate:'<span class="glyphicon glyphicon-warning-sign-text-danger"></span>&nbsp;<span class="text-danger">Failed malware scan, could not be uploaded.</span>',failedTemplate:'<span class="glyphicon glyphicon-warning-sign-text-danger"></span>&nbsp;<span class="text-danger">File failed to upload. You may try again or contact support.</span>',processingTemplate:'<p>Processing... <img src="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/hl-loading.gif" width="22" /></p>',successTemplate:'<p class="text-muted">Successfully uploaded!</p>',scanningTemplate:'<span>Scanning... <img src="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/hl-loading.gif" width="22" /></span>'},e||{}),l=this;!function a(){var e={itemKey:t,entityTypeName:i};c.ajax({url:"/HigherLogic/ResourceLibrary/wsjson.aspx/GetFileJobFile",type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(hl_common_util_stringIsNullOrWhiteSpace(e.d))l.html(r.failedTemplate),c.fn.hl_ui_common_fileuploadstatus.timeout=null;else{var t,i=JSON.parse(e.d),n=!1.successTemplate,n=!0;break;case"Processing":t=r.scanningTemplate;break;case"Failed":t="AVScan"===i.CurrentStep?r.failedMalwareTemplate:r.failedTemplate,n=!0;break;default:t=r.processingTemplate}l.html(t);var o=null;n||(o=setTimeout(function(){a()},5e3)),c.isFunction(s)&&s(n,i,o,l)}}})}()}}(jQuery),function(u){u.fn.hl_ui_common_requiredTextInput=function(e){var t={id:"",uId:"",required:!0,labelText:"",errorText:""};u.extend(t,e);u(this);var i="#"+t.uId+"-"+t.id+"-wrapper",n=u(i+" #"+t.id+"-label"),o=u(i+" .text-input"),a=u(i+" .form-control-feedback"),s=u(i+" .feed-back"),r=t.required;function l(){n.removeClass("has-error"),o.removeClass("has-error"),a.hide(),s.hide(),s.find(".sr-only").text("")}function c(){l(),r&&o.is(":visible")&&(""===o.val()||null===o.val())&&(n.addClass("has-error"),o.addClass("has-error"),a.show(),s.find(".sr-only").text("(error)"),s.show())}function d(){u(i).on("validate",{},function(e){c()}),o.on("blur",function(){c()}),n.html(t.labelText+"<sup>*</sup>"),s.find(".element-error").text(t.errorText),r=!0}n.html(t.labelText),u(i).on("clearValidation",{},function(e){l()}),u(i).on("validationOn",{},function(e){d()}),u(i).on("validationOff",{},function(e){u(i).off("validate",{},function(e){c()}),o.off("keyup",function(){o..labelText),s.find(".element-error").text(""),r=!1,c()}),r&&d()}}(jQuery,window),function(n){n.hl_util_ui_ajaxify={},n.hl_util_ui_ajaxify.DICTIONARY_TYPE={WCF:{value:0,name:"Wcf",code:"WCF"},WEBMETHOD:{value:1,name:"WebMethod",code:"WEBMETHOD"}},n.hl_util_ui_ajaxify.viewModel=function(i){this.ajaxControlViewModel={ControName:"",ControlAssembly:"",ControlPath:"",ControlParams:i==n.hl_util_ui_ajaxify.DICTIONARY_TYPE.WCF?[]:{}},this.keyValuePair=function(e,t){i!=n.hl_util_ui_ajaxify.DICTIONARY_TYPE.WCF&&i==n.hl_util_ui_ajaxify.DICTIONARY_TYPE.WEBMETHOD?this[e]=t:(this.Key=e,this.Value=t)}},n.fn.hl_util_ui_ajaxify=function(e){var a,t,i={contentId:"",postData:{},RESTUrl:"/Service/AjaxContent.svc/GetAJAXControl",ajaxSpinnerId:"",autoRefresh:!1,refreshInterval:3e4,pauseInterval:1500};n.extend(i,e),a=i,t=function(){for(var e,t={},i=location.search.substring(1),n=/([^&=]+)=([^&]*)/g;e=n.exec(i);)t[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return t}(),a.postData.ajaxControlViewModel.ControlParams instanceof Array?jQuery.each(t,function(e,t){var i,n,o={Key:e,Value:t};i=a.postData.ajaxControlViewModel.ControlParams,n=o,-1==i.indexOf(n)&&a.postData.ajaxControlViewModel.ControlParamsModel.ControlParams[e]=t}),0==a.pauseInterval&&(a.pauseInterval=1500),0==a.refresurl:a.RESTUrl,data:JSON.stringify(a.postData),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),setTimeout(function(){n("#"+a.ajaxSpinnerId).hide(),n("#"+a.contentId).html(e).fadeTo("slow",1),a.autoRefresh&&setInterval(function(){var t;n("#"+a.ajaxSpinnerId).show(),n("#"+a.contentId).fadeTo("slow",.4),t=a,n.ajax({type:"POST",url:t.RESTUrl,data:JSON.stringify(t.postData),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),setTimeout(function(){n("#"+t.ajaxSpinnerId).hide(),n("#"+t.contentId).html(e).fadeTo("slow",1)},t.pauseInterval)}})},a.refreshInterval)},a.pauseInterval)}})},0)}}(jQuery),function(c){!function(e){var t=(i.blockUI=function(){hl_common_ui_blockUI()},i.unBlockUI=function(){hl_common_ui_unBlockUI()},i.showBootstrapAlertDialog=function(e,t,i,n,o){hl_common_ui_showBootstrapAlertDialog(e,t,i,n,o)},i.showBootstrapDeleteDialog=function(e,t,i,n,o){hl_common_ui_showBootstrapDeleteDialog(e,t,i,n,o)},i.showBootstrapDialog=function(e,t,i,n,o){hl_common_ui_showBootstrapDialog(e,t,i,n,o)},i.alertDialog=function(e){hl_common_ui_alertDialog(e)},i.showjQueryUIAlertDialog=function(e,t,i,n,o,a,s){hl_common_ui_showjQueryUIAlertDialog(e,t,i,n,o,a,s)},i.validateUrl=function(e,t){hl_common_ui_validateUrl(e,t)},i.validateUrlPageCode=function(e,t){hl_common_ui_validateUrlPageCode(e,t)},i.dialog=function(e){var t=new n;return void 0!==e&&(t=t.setTitle(e.title).setBody(e.body),void 0===e.isCancelButton||e.isCancelButton||(t=t.removeCancelButton()),void 0===e.isCloseIcon||e.isCloseIcon||(t=t.removeCloseIcon()),void 0!==e.isFadeAnimated&&t.setFadeAnimated(e.isFadeAnimated),void 0!==e.dialogClass&&(t=t.setDialogClass(e.dialogClass)),void 0!==e.confirmClass&&(t=t.setConfirmClass(e.confirmClass)),void 0!==e.confirmLabel&&(t=t.setConfirmLabel(e.confirmLabel)),void 0!==e.confirmCallback&&(t=t.setConfirmCallback(e.confirmCallback)),void 0!==e.cancelClass&&(t=t.setCancelClass(e.cancelClass)),void 0!==e.cancelLabel&&(t=t.setCancelLabel(e.cancelLabel)),void 0!==e.cancelCallback&&(t=t.setCancelCallback(e.cancelCallback)),void 0!==e.parent&&(t=t.setParent(e.parent)),void 0!==e.options&&(t=t.setOptions(e.options))),t},i.generateJwt=function(e){var t=$("form"),i=t.attr("target"),n=t.attr("action");t.attr("action","/higherlogic/ui/mvc/common/jwt/generatetoken"),t.attr("target",$(e).data("target")),t.append('<input type="hidden" name="jwtSecretName"/>');var o=t.find('input[name="jwtSecretName"]');o.val($(e).data("jwtSecretName")),t.append('<input type="hidden" name="jwtExpireMinutes"/>');var a=t.find('input[name="jwtExpireMinutes"]');a.val($(e).data("jwtExpireMinutes")),t.append('<input type="hidden" name="jwtExtendedClaims"/>');var s=t.find('input[name="jwtExtendedClaims"]');s.val(void 0===$(e).data("jwtExtendedClaims")?"":JSON.stringify($(e).data("jwtExtendedClaims"))),t.append('<input type="hidden" name="jwtRedirectUrl"/>');var r=t.find('input[name="jwtRedirectUrl"]');r.val($(e).data("jwtRedirectUrl")),t.submit(),o.remove(),a.remove(),s.remove(),r.remove(),void 0===n?t.removeAttr("action"):t.attr("action",n),void 0===i?t.removeAttr("target"):t.attr("target",i)},i.loadReactJsCssScripts=function(e,t,i){var n,o=this,a=document.getElementById("hlreactscriptscontainer");null==a&&((a=document.createElement("div")).id="hlreactscriptscontainer",a.dataset.busy="false",document.body.appendChild(a)),0===e.length&&t(),"false"===a.dataset.busy?(a.dataset.busy="true",this.recurseLoadJsCssScripts(a,e,0,t)):n=setInterval(function(){"false"===a.dataset.busy&&(clearInterval(n),o.recurseLoadJsCssScripts(a,e,0,t))},10)},i.recurseLoadJsCssScripts=function(e,t,i,n){var o,a,s,r=this,l=t[i];i<t.length?c.Util.stringIsNullOrWhiteSpace(l.url)?((o=document.createElement("div")).innerHTML=l.element,"LINK"===(a=o.firstChild).tagName&&null!==e))||e.appendChild(a),this.recurseLoadJsCssScripts(e,t,i+1,n)):null===(s=e.querySelector('script[src="'.con("script")).type="text/javascript",s.onload=function(){return r.recurseLoadJsCssScripts(e,t,i+1,n)},s.src=l.url,e.appendChild(s)):this.recurseLoadJsCssScripts(e,t,i+1,n):(e.dataset.busy="false",n())},i);function i(){}e.Ui=t;var n=(o.prototype.setBody=function(e){return this.body=e,this},o.prototype.setTitle=function(e){return this.title=e,this},o.prototype.setDialogClass=function(e){return this.dialogClass=e,this},o.prototype.setConfirmLabel=function(e){return this.confirmLabel=e,this},o.prototype.setCancelLabel=function(e){return this.cancelLabel=e,this},o.prototype.setConfirmCallback=function(e){return this.confirmCallback=e,this},o.prototype.setCancelCallback=function(e){return this.cancelCallback=e,this},o.prototype.setConfirmClass=function(e){return this.confirmClass=e,this},o.prototype.setCancelClass=function(e){return this.cancelClass=e,this},o.prototype.setFooterDivClass=function(e){return this.footerDivClass=e,this},o.prototype.setParent=function(e){return this.parent=e,this},o.prototype.setOptions=function(e){return this.options=e,this},o.prototype.setFadeAnimated=function(e){return this.isFadeAnimated=e,this},o.prototype.removeCancelButton=function(){return this.isCancelButton=!1,this},o.prototype.removeCloseIcon=function(){return this.isCloseIcon=!1,this},o.prototype.render=function(){var e=this;return this.instance=$(this.getModal()),this.instance.appendTo(null!=this.parent?this.parent:"body"),this.instance.modal(null!=this.options?this.options:{show:!0}),this.instance.on("click",".modal-footer [data-hl-ui-dialog=confirm]",function(){return e.confirmClick()}).on("click",".modal-footer [data-hl-ui-dialog=cancel]",function(){return e.cancelClick()}).on("hidden.bs.modal",function(){e.isConfirming||e.cancelClick(),e.instance.remove(),e.isConfirming=!1}),this.instance},o.prototype.confirmClick=function(){!(this.isConfirming=!0)!==this.confirmCallback()&&this.instance.modal("hide")},o.prototype.cancelClick=function(){this.cancelCallback()},o.prototype.getModal=function(){var e=this.isCancelButton?'<a data-hl-ui-dialog="cancel" role="button" class="btn btn-default" data-dismiss="modal">\n                     '.concat(this.cancelLabel,"\n                   </a>"):"",t=this.isCloseIcon?'<a role="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>':"";return'\n<div class="'.concat(this.isFadeAnimated?"modal fade":"modal",' aria-label="').concat(this.title,'" role="dialog">\n  <div class="modal-dialog ').concat(this.dialogClass,'" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        ').concat(t,'\n        <h4 class="modal-title">\n            ').concat(this.title,'\n        </h4>\n      </div>\n      <div class="modal-body">\n        ').concat(this.body,'\n      </div>\n      <div class="modal-footer">\n        <div class="').concat(this.footerDivClass,'">\n          <a data-hl-ui-dialog="confirm" role="button" class="btn ').concat(this.confirmClass,'">\n            ').concat(this.confirmLabel,"\n          </a>\n          ").concat(e,"\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n")},o);function o(){this.isFadeAnimated=!1,this.isCancelButton=!0,this.isCloseIcon=!0,this.confirmLabel="Submit",this.confirmClass="btn-primary",this.dialogClass="",this.cancelLabel="Cancel",this.cancelClass="btn-default",this.footerDivClass="text-left",this.confirmCallback=function(){},this.cancelCallback=function(){}}e.Dialog=n;var a=(s.getUnobtruon(e){return e.removeData("validator").removeData("unobtrusiveValidation"),$.validator.unobtrusive.parse(e),e.find("span.field-validation-error").closest(".form-group").addClass("has-error"),e.find("span.field-validation-error").addClass("help-block"),e.validate()},s.initValidator=function(){$.validator.setDefaults({highlight:function(e,t,i){$(e).closest(".form-group").addClass(t),$(e).closest(".form-group").find('span[class^="field-validation"]').addClass("help-block")},unhighlight:function(e,t,i){0===$(e).closest(".form-group").find("span.field-validation-error").length&&($(e).closest(".form-group").removeClass(t),$(e).closest(".form-group").find('span[class^="field-validation"]').removeClass("help-block"))},focusInvalid:!1,onkeyup:!1}),$.validator.unobtrusive.options={errorClass:"has-error",validClass:"has-success"}},s);function s(){}e.Form=a}(c.Common||(c.Common={}))}(HigherLogic=HigherLogic||{}),hl_community_fileUploadButton=function(e,t,i,n){var o=$(t+"_CSSLinkButton1").parents()[1];$(t+"_CSSLinkButton").prop("notify",n),$(t+"_CSSLinkButton").tipTip({delay:0,defaultPosition:"right",attribute:"notify",activation:"hover"}),$(e).prop("notify",i),$(e).tipTip({delay:0,defaultPosition:"right",attribute:"notify",activation:"hover"}),$(e).change(function(){$(o).show()})},function(c){function d(e,t,i){i?(e.attr("disabled",""),t.attr("disabled","")):(e.removeAttr("disabled",""),t.removeAttr("disabled",""))}c.fn.hl_community_MarkEventAttendance=function(e,t,i){var o={attendedText:"Attended",unattendedText:"Unattended",markAttendedText:"Mark as Attended",markUnattendedText:"Mark as Unattended",markedAsAttendedText:"Marked as Attended",markedAsUnattendedText:"Marked as Unattended"};c.extend(o,i);function n(e,t){var i,n;hl_common_ui_unBlockUI(),void 0===e.message?(i=c("a#"+s),n=c("a#"+a),d(i,n,!0),"Attended"==e?(i.removeAttr("class").attr("class","btn btn-xs btn-success btn-attend RegistrantRosterActions").attr("Title",o.markedAsAttendedText),i.find("span:first-child").removeAttr("class").attr("class","glyphicon glyphicon-ok"),i.attr("Attended","False"),n.text(o.markUnattendedText).attr("Attended","False"),i.parent().append(r),c("div.attend-confirm").fadeOut(5e3,function(){d(i,n,!1),c(this).remove()})):(i.removeAttr("class").attr("class","btn btn-xs btn-unattend text-muted RegistrantRosterActions").attr("Title",o.markedAsUnattendedText),i.find("span:first-child").removeAttr("class").attr("class","glyphicon glyphicon-ok text-muted"),i.attr("Attended","True"),n.text(o.markAttendedText).attr("Attended","True"),i.parent().append(l),c("div.unattend-confirm").fadeOut(5e3,function(){d(i,n,!1),c(this).remove()}))):hl_common_ui_showGlobalMessage("Unable to update registrant attendance",u)}var a=c(this).attr("dropDownLinkId"),s=c(this).attr("iconid"),r='<div class="attend-confirm">'+o.markedAsAttendedText+"</div>",l='<div class="unattend-confirm">'+o.markedAsUnattendedText+"</div>";hl_common_ui_blockUI(),hl_webapi_ajax("/RegistrantClass/MarkRegistrantAttendance?registrantKey="+e+"&attended="+t,{},"Post","","",n,{},!0,n)};var u="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/warning.gif"}(jQuery);var hl_authentication=function(i){return{getLogin:function(){hl_common_ui_blockUI(),i.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:"/higherlogic/ui/mvc/security/authentication/GetLogin",success:function(e){var t=i("#modal-login");0<t.length&&t.remove(),i("body").append(e),(t=i("#modal-login")).find("#login-btn").bind("click",function(e){e.preventDefault()}),hl_common_ui_unBlockUI(),t.modal("show")},error:function(e){hl_common_ui_unBlockUI()}})}}}(jQuery);function CheckInputField(e){var t=null;if(void 0!==$("#"+e.id))switch((t=$("#"+e.id)).type){case"text":case"password":eType="keyup",eType2="blur";break;case"select-one":eType="change",eType2="";break;case"checkbox":eType="click",eType2=""}else"undefined"!=$("textarea[id="+e.id+"]")&&(t=$("textarea[id="+e.id+"]"),eType="keyup update",eType2="blur");return t}!function(s){var a=!1,r=!0;/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())&&document.addEventListener("touchstart",function(e){e.changedTouches[0]},!1);var l=null;s.fn.hl_core_event_verifyFields=function(e){var i=hl_common_util_guidGenerator(),n=!0,o=!1;l=new s.TokenizeFields.Cache,s.each(e.fs(CheckInputField(t)).prop("id"))&&(n=!1)}),s.each(e.clickHandler,function(e,t){""!=s.trim(s(hl_common_util_checkInputButton(t)).prop("id"))&&(o=!0)}),n&&o&&(s.each(e.field,function(e,t){new s.TokenizeFiler,function(e,t){new s.TokenizeFields(t,a,i)}))},s.TokenizeFields=function(e,t,i,n){var o,a;t?(""==s.trim(e.usetooltip)&&(e.usetooltip=!0),o=CheckInputField(tion(e){return n=s(this).prop("group"),o=!0,s.each(l.all(),function(e,t){if(-1!=e.indexOf(n)&&!hl_common_util_fldVerifyValidation(t)){var i=s(t).offset();return s("html, body").animate({scrollTop:i.top-100},"slow",function(){}),s(t).focus(),o=!1}}),!!o&&void(s(this).is("input")&&s(this).trigger("click"));var n,o}))},s.TokenizeFields.Cache=function(e){var n=s.extend({max_size:40},e),o={},a=0;this.add=function(e,t){var i=s(t).prop("id")+"_"+e;a>n.max_size&&(o={},a=0),o[i]||(a+=1),o[i]=t},this.get=function(e){return o[e]},this.all=function(i){var n={};return""==s.trim(i)?n=o:s.each(o,function(e,t){e==i&&(n[e]=t)}),n},this.size=function(){return a}}}(jQuery),function($){function ActivityShellSucceed(e,t){var i=$("div[id$="+e.Me+"]");i.shellupdate(e,t),i.prop("scrollbtm","0"),isscrollTobtm=!1,$(".Animload").hide()}function ActivityShellFailed(e){}function setCookie(e,t,i){var n=new Date;n.setDate(n.getDate()+i);var o=escape(t)+(null==i?"":"; expires="+n.toUTCString());document.cookie=e+"="+o+"; path=/"}function getCookie(e){for(var t,i,n=document.cookie.split(";"),o=0;o<n.length;o++)if(t=n[o].substr(0,n[o].indexOf("=")),i=n[o].substr(n[o].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==e)return unescape(i)}function parseJsonDate(e){return new Date(parseInt(e.substr(6)))}function getMousePosition(e){return ac_feedY=isIe?(ac_feedX=event.clientX+document.body.scrollLeft,event.clientY+document.body.scrollTop):(ac_feedX=e.pageX,e.pageY),ac_feedX<0&&(ac_feedX=0),ac_feedY<0&&(ac_feedY=0),1}function StandardShellSkin(data,record){var mMatch,cssClass=$.trim(data.SkinObjName.CssClass),skinOutput=data.SkinObjName.Skin;return $.each(data.SkinObjName.Fields,function(index,value){mMatch=eval("/::"+index+"::/g"),skinOutput=skinOutput.replace(mMatch,eval("record."+value.id))}),1}function defaultQuerySanitizer(e){return e}$.fn.extend({hl_core_ui_activityShell:function(i){var e=window.location.hostname,t=""!=window.location.port?":"+window.location.port+"/":"/",n=window.location.protocol+"//"+e+t;isIe=!!document.all,mobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),mobile&&document.addEventListener("touchstart",function(e){e.changedTouches[0]},!1);var o,a,s,r,l=this;""!=$.trim(i.FieldQuery)&&(o=unescape(i.FieldQuery.replace(/&amp;/g,"&").replace(/#/g,'"')),a="{",0<o.indexOf("&")?(r=o.split("&"),$.each(r,function(e,t){s=t.split("="),1<=e&&(a+=","),a+='"'+s[0]+'":'+s[1]})):(r=o.split("="),a+=r[0]+":"+r[1]),a+="}",$.extend(i,{FieldQuery:a})),document.addEventListener("touchstart",function(e){e.changedTouches[0]},!1),l.css("position","relative"),l.css("height",""!=jQuery.tMe+"_adjustedHeight"))?Math.floor(getCookie(i.Me+"_adjustedHeight")):i.minHeight),l.css("width","100%"),l.find(".mainAc_shell").css("height",""!=jQuery.trim(getCookie(i.Me+"_adjustedHeight"))?Math.floor(getCookie(i.Me+"_adjustedHeight")):i.minHeight),l.prop("scrollbtm","0"),l.prop("show","0");var c=new Image;c.src=i.Animation,$(c).css("text-align","center"),$(c).css("top","0"),$(c).css("padding-left","8px");var d=document.createElement("div");return $(d).append(c),$(d).addClass("Animload"),""!=i.Back&&""!=i.FeedTextColor&&""!=i.Border&&($(d).css("text-align","center"),$(d).css("position","relative"),d).css("color",i.FeedTextColor),$(d).css("backgroundColor",i.Back),$(d).css("cursor","default"),l.find(".refreshAc_shell").css("border-top",".1em solid "+i.Border),l.find(".refreshAc_shell").css("border-bottom",".1em solid "+ifind(".refreshAc_shell")),$(d).hide(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:n+"/api/ActivityShell.svc/GetSkin",data:'{"SkinObjName":"'+i.SkinObjName+'"}',dataType:"json",success:function(e){$.each(e,function(e,t){return $.extend(i,{SkinObjName:JSON.parse(t.Skin)}),!1}),l.shellcall(i),l.shelldelay(i)},error:function(e){}}),$.each(i.Subscribed,function(e,t){}),$()},shellcall:function(data){var shell=$("div[id$="+data.Me+"]");$(shell.find(".refreshAc_shell")).hide(),$(".Animload").show(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:data.EndPoint,data:data.FieldQuery,dataType:"json",success:function(msg){""==$.trim(data.SuccessCallBack)?ActivityShellSucceed(data,msg):eval(data.SuccessCallBack+"(data, msg)")},error:""==$.trim(data.FailureCallBack)?ActivityShellFail:eval(data.FailureCallBack)})},shellupdate:function(e,t){var i=$("div[id$="+e.Me+"]");$(i).shellpaint(e,t)},shelldelay:function(e){var t=$("div[id$="+e.Me+"]");setInterval(function(){$(t).shellcall(e,!1)},e.Refresh)},shellpaint:function(data,results){var ret=null==results.d||"undefined"==results.d?results:$.parseJSON(results.d),isAfter=!1;shell=$("div[id$="+data.Me+"]"),data.WipeCanvas&&shell.find(".mainAc_shell > div").filter(function(e){$(this).remove()}),0<ret.length&&"0"==shell.prop("show")&&shell.fadeIn(1400,function(){shell.prop("show","1")}),$.each(ret,function(index,value){""!=al(data.QuerySanitizer+"(data.FieldQuery)"));var div=document.createElement("div"),skin_out;""!=data.FeedTextColor&&""!=data.Border&&($(div).css("padding","0 0 0 43px"),$(div).css("pos sans-serif"),$(div).css("color","#"+data.FeedTextColor),$(div).css("cursor","pointer"),$(div).css("width","100%"),$(div).css("border-bottom",".1em solid #"+data.Border)),""!=data.Back&&$(div).css("backgroundColor","#"+data.Back),$(div).bind("mouseover",function(e){""!=data.Hover?$(this).css("backgroundColor","#"+data.Hover):$(this).addClass("ovr")}),$(div).bind("mouseout",function(e){""!=data.Back?$(this).css("backgroundColor","#"+data.Back):$(this).removeClass("ovr")}),""!=$.trim(data.SkinFunction)&&(skin_out=eval(data.SkinFunction+"(data, value)")),$(div).append(skin_out),shell.find(".mainAc_shell").append(div)}),shell.find(".mainAc_shell").jScrollPane({scrollbarWidth:data.ScrollSize});var $pane=$(shell).find(".jScrollPaneContainer"),$drag=$(">.jScrollPaneTrack .jScrollPaneDrag",$pane);$pane.css("width","100%"),$pane.mouseenter(function(){$drag.stop(!0,!0).fadeTo("fast",.6),$drag.mousedown(function(){$drag.prop("ScrollDown","1")})}),$pane.mousemove(function(){$drag.stop(!0,!0).fadeTo("fast",.6)}),$pane.mouseout(function(){""==$.trim($dment).mouseup(function(){$drag.fadeOut(),$drag.prop("ScrollDown","")})})}})}(jQuery),function(d){function u(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}d.fn.hl_core_ui_checkbox=function(r){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}function l(e){e.value=e.checked,c.print&&(window.status=e.value)}var c={cls:"jquery-ceturn this.each(function(){var e,t,i,n,o=this,a=(t=(e=o).checked,i=e.disabled,n=d(e),e.stateInterval&&clearInterval(e.stateInterval),e.stateInterval=setInterval(function(){e.disabled!=i&&n.trigger((i=!!e.disabled)?"disable":"enable"),e.checked!=t&&n.trigger((t=!!e.checked)?"check":"uncheck")},10),n);o.wrapper&&o.wrapper.remove(),o.wrapper=d('<span class="'+c.cls+'"><span class="mark"><img src="/App_Themes/Common/images/'+c.empty+'" /></span></span>'),o.wrapperInner=o.wrapper.children("span:eq(0)"),o.wrapper.hover(),a.css({position:"absolute",zIndex:-1,visibility:"hidden"}).after(o.wrapper);var s=!1;a.prop("id")&&((s=d("label[for="+a.prop("id")+"]")).length||(s=!1)),s||(s=a.closest?a.closest("label"):a.parents("label:eq(0)")).length||(s=!1),s&&(s.hover(function(e){o.wrapper.trigger("mouseover",[e])},function(e){o.wrapper.trigger("mouseout",[e])}),s.click(function(e){return a.trigger("click",[e]),u(e),!1})),o.wrapper.click(function(e){return a.trigger("click",[e]),u(e),!1}),a.click(function(e){try{if(null==r.target)return;var t=d("input[id$="+r.target+"]")[0];d(this).is(":checked")?t.disabled=!1:t.disabled=!0,u(e)}catcn(){o.wrapperInner.addClass(c.cls+"-disabled")}).bind("enable",function(){o.wrapperInner.removeClass(c.cls+"-disabled")}),a.bind("check",function(){l(o),o.wrapper.addClass(c.cls+"-checked")}).bind("uncheck",function(){l(o),o.wrapper.removeClass(c.cls+"-checked")}),d("img",o.wrapper).bind("dragstart",function(){return!1}).bind("mousedown",function(){return!1}),window.getSelection&&o.wrapper.css("MozUserSelect","none"),l(o),-checked"),o.disabled&&o.wrapperInner.addClass(c.cls+"-disabled")})}}(jQuery),function(u){var h="div",i={ToolTip:"More",OverlayProgress:!1,BrowserType:null,ObjClassContainer:"HLLandingControl",ObjPositionCSS:null,Icon:null,IconWidth:"12px",IconHeight:"12px",IconPadding:"5px 0 0 0",ContainerWidth:"20px",ContainerHeight:"20px",ContainerFloatOption:"right",InsertIconAfterObject:null,FADEOUT:.3,FADEIN:.6,DropDownTopPadding:0,DropLeftAdjust:0,ContentBlockObject:".Content",DropDownAttachTo:"body",ButtonText:"",AlternateText:""},e=window.location.hostname,t=""!=window.location.port?":"+window.location.port+"/":"/",p=window.locati|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())&&document.addEventListener("touchstart",function(e){e.changedTouches[0]},!1),u.fn.hl_core_ui_dropDown=function(e){/MSIE (\d+\.\d+);/.test(navigator.userAgent)?i.BrowserType=0:/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?i.BrowserType=1:/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)||/Safari[\/\s](\d+\.\d+)/.test(navigator.userAgent)?i.BrowserType=2:/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)?i.BrowserType=1:i.BrowserType=3;var t=u.extend({},i,e);return u(this).hide(),this.each(function(){new u.CreateSkin(this,t)})},u.CreateSkin=function(n,o){var a,s,r,l,c,d=document.createElement(h);u.each(u(n).parents(),function(e,t){if(-1<u(t).prop("class").indexOf(o.ObjClassContainer)){var i;return c=hl_common_util_guidGenerator(),s=u('<div id="'+c+'" class="drpDownHolder"></div>'),r=u('<div class="drpContent"></div>'),s.append(r),u("body").append(s),"body"!=o.DropDownAttachTo&&(s=u('<div id="'+c+'_mask" class="drpDownHolder"></div>'),u(s).prop("attachedto",o.DropDownAttachTo),l=u('<div class="drpContent"></div>'),s.append(l),u(o.DropDownAttachTo).append(s)),u.each(u(n).find("a"),function(e,t){var i,n=document.createElement(h);u(n).bind("click",function(){u("#"+c).hide()}),u(n).append(u(t)).css("display","none"==u.trim(u(t).css("display"))?"none":"block"),u(n).find("a").attr("tabindex","0").attr("role","button"),u(r).append(n),"body"!=o.DropDownAttachTo&&(i=document.createElement(h),u(i).append(u(t).clone()),u(l).append(i))}),a=u(u(t).find(o.InsertIconAfterObject)),""!=u.trim(u(a).prop("tagName"))&&(u(d).insertAfter(a),u(d).erWidth&&u(d).css("width",o.ContainerWidth),""!=o.ContainerHeight&&u(d).css("height",o.ContainerHeight),""!=o.ContainerFloatOption&&u(d).css("float",o.ContainerFloatOption),u(d).prop("ddrop",c),u("."+o.ObjPositionCSS).tipTip({delay:200}),(i=new Image).src=(0<o.Icon.indexOf("://")?"":p)+o.Icon,u(i).css("padding",o.IconPadding),u(i).css("width",o.IconWidth).css("height",o.IconHeight),u(i).attr("ddrop",c),u(i).attr("role","button"),u(i).attr("aria-haspopup","true"),u(i).attr("alt",o.ToolTip),u(d).fadeTo("fast",o.FADEOUT),u(d).bind("mouseover",function(){u(this).stop(!1,!1).fadeTo("fast",o.FADEIN)}),u(d).bind("mouseout",function(){u(this).stop(!1,!1).fadeTo("fast",o.FADEOUT),0}),u.InitializeDrop(d,o,!0),u(d).bind("mousedown touchstart",function(){var e=u.InitializeDrop(this,o,!1);""==u.trim(u(e).prop("isopened"))?setTimeout(function(){u("#tiptip_holder").fadeOut(),u(e).prop("isopened","1"),u(e).stop(!0,!0).fadeIn()},250):(u(e).prop("isopened",""),u(e).stop(!0,!0).fadeOut())}),u(d).bind("keypress",function(e){var t;13==(e.keyCode||e.which)&&(t=u.InitializeDrop(this,o,!1),""==u.trim(u(t).prop("isopened"))?setTimeout(function(){u("#tiptip_holder").).prop("isopened",""),u(t).stop(!0,!0).fadeOut()),u("#"+c).find(".drpContent div a:last").bind("keypress",function(e){9==(e.keyCode||e.which)&&(e.preventDefault(),u("#dropDownImage"+c).parent().parent().find("a:focusable:first").focus(),u.each(u(".drpDownHolder"),function(e,t){""!=u.trim(u(t).prop("isopened"))&&(setTimeout(function(){u(t).stop(!0,!0).fadeOut(function(){})},500),u(t).prop("isopened",""))}))}))}),""!=o.ButtonText&&u(d).append('<div class="dropDownText">'+o.ButtonText+"</div>"),u(d).append(u("<div id=dropDownImage"+c+' tabindex="0" class="dropDownImage"></div>').append(i))),u(document).bind("mousedown touchstart",function(){u.each(u(".drpDownHolder"),function(e,t){""!=u.trim(u(t).prop("isopened"))&&(setTimeout(function(){u(t).stop(!0,!0).fadeOut(function(){})},500),u(t).prop("isopened",""))})}),!1}})},u.InitializeDrop=function(e,t,i){var n=e,o=u("#"+u(n).prop("ddrop")),a=u(n).offset(),s=a.left+t.DropLeftAdjust+u(n).prop("offsetWidth")-Number(u(o).width()),r=a.top+u(n).prop("offsetHeight")+Number(t.DropDownTopPadding),l=u("#MPOuter");u(l).offset(),u(o).width();return u(o).css("left",s).css("top",r),o},u.guidGenerator=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},u.isNumber=function(){return"ndAbsPos=function(e){var t=curtop=0;if(e.offsetParent)for(;t+=e.offsetLeft,curtop+=e.offsetTop,e=e.offsetParent;);return[t,curtop]}}(jQuery);var hl_core_ui_jkmegamenu={effectduration:300,delaytimer:200,megamenulabels:[],megamenus:[],zIndexVal:1e3,$shimobj:nuRAME id="outlineiframeshim" src="'+("https:"==location.protocol?"/higherlogic/blank.htm":"about:blank")+'" style="display:none; left:0; top:0; z-index:999; position:absolute; filter:progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)" frameBorder="0" scrolling="no"></IFRAME>'),this.$shimobj=e("#outlineiframeshim")},alignmenu:function(e,t,i){var n=this.megamenus[i],o=(n.$anchorobj,n.$menuobj),a=e(window).width()-(n.offsetx-e(document).scrollLeft())>n.actualwidth?n.offsetx:n.offsetx-n.actualwidth+n.anchorwidth,s=e("#MPButtonBar").offset().left;a<s&&(a=s);var r=n.offsety+n.anchorheight;o.css({left:a+"px",top:r+"px"}),this.$shimobj.css({width:n.actualwidth+"px",height:n.actualheight+"px",left:a+"px",top:r+"px",display:"block"})},showmenu:function(e,t){var i=this.megamenus[t],n=i.$menuobj,o=i.$menuinner;return"none"==n.css("display")?(this.alignmenu(jQuery,e,t),n.css("z-index",++this.zIndexVal),n.show(this.effectduration,function(){o.css("visibility","visible")})):"block"==n.css("display")&&"click"==e.type&&this.hidemenu(e,t),!1},hidemenu:function(e,t){var i=this.megamenus[t],n=i.$menuobj;i.$menuinner.css("visibility","hidden"),this.$shimobj.css({display:"none",left:0,top:0}),n.hide(this.effectduration)},definemenu:function(e,t,i){this.megamenulabels.push([e,t,i])},render:function(i){for(var e=0,t=this.megamenulabels[e];e<this.megamenulabels.length;e++,t=this.megamenulabels[e]){if(1!=i("#"+t[0]).length||1!=i("#"+t[1]).length)return;this.megamenus.push({$anchorobj:i("#"+t[0]),$menuobj:i("#"+t[1]),$menuinner:i("#"+t[1]).children("ul:first-child"),revealtype:t[2],hidetimer:null});var n=this.megamenus[e];n.$anchorobj.add(n.$menuobj).prop("_megamenupos",e),n.actualwidth=n.$menuobj.outerWidth(!0),n.actualheight=n.$menuobj.outerHeight(!0),n.offsetx=n.$anchorobj.offset().left,n.offsety=n.$anchorobj.offset().top,n.anchorwidth=n.$anchorobj.outerWidth(!0),n.anchorheight=n.$anchorobj.outerHeight(!0),i(document.body).append(n.$menuobj),n.$menuobj.css("z-index",++this.zIndexVal).hide(),n.$menuinner.css("visibility","hidden"),n.$anchorobj.bind("click"==n.revealtype?"click":"mouseenter",function(e){var t=hl_core_ui_jkmegamenu.megamenus[parseInt(i(this).prop("_megamenupos"))];return clearTimeout(t.hidetimer),hl_core_ui_jkmegamenu.showmenu(e,parseInt(i(this).prop("_megamenupos")))}),n.$anchorobj.bind("mouseleave",function(e){var t=hl_core_ui_jkmegamenu.megamenus[parseInt(i(this).prop("_megamenupos"))];e.relatedTarget!=t.$menuobj.get(0)&&0==i(e.relatedTarget).parents("#"+t.$menuobj.get(0).id).length&&(t.hidetimer=setTimeout(function(){hl_core_ui_jkmegamenu.hidemenu(e,parseInt(t.$menuobj.prop("_megamenupos")))},hl_core_ui_jkmegamenu.delaytimer))}),n.$menuobj.bind("mouseenter",function(e){var t=hl_core_ui_jkmegamenu.megamenus[parseInt(i(this).prop("_megamenupos"))];clearTimeout(t.hidetimer)}),n.$menuobj.bind("click mouseleave",function(e){var t=henupos"))];t.hidetimer=setTimeout(function(){hl_core_ui_jkmegamenu.hidemenu(e,parseInt(t.$menuobj.prop("_megamenupos")))},hl_core_ui_jkmegamenu.delaytimer)})}/Safari/i.test(navigator.userAgent)?i(window).bind("resize load",function(){for(var e=0;e<hl_core_ui_jkmegamenu.megamenus.length;e++){var t=hl_core_ui_jkmegamenu.megamenus[e],i=1==t.$anchorobj.children().length&&t.$anchorobj.children().eq(0).is("img")?t.$anchorobj.children().eq(0):null;i&&(t.offsetx=i.offset().left,t.offsety=i.offset().top,t.anchorwidth=i.width(),t.anchorheight=i.height())}}):i(window).bind("resize",function(){for(var e=0;e<hl_core_ui_jkmegamenu.megamenus.length;e++){var t=hl_core_ui_jkmegamenu.megamenus[e];t.offsetx=t.$anchorobj.offset().left,t.offsety=t.$anchorobj.offset().top}}),hl_core_ui_jkmegamenu.addshim(i)}},HigherLogic;function hl_directory_blogEditor_isPageValid(e,t){return 1==(hl_common_ui_inputValid("#"+e,"","")&hl_common_ui_inputValid("#"+t,"",""))}function hl_directory_permalinkEditor_isPageValid(e,t){var i=hl_common_ui_inputValid("#"+e,"",""),n=hl_common_ui_inputValid("#"+t,"","");return 0==(i&&n)&&hl_common_ui_unBlockUI(),i&&n}function hl_directory_conditionalDialog_onLinkClick(e,t,i){hl_common_ui_blockUI(),$("#"+t).load(function(){hl_common_ui_unBlockUI(),$("#"+e).modal("show")}),document.getElementById(t).src=i}function hl_directory_sendMessage_checkRequired(e){var t=$("#"+e),i=t.find(".SendIndividualMessageSubjectLabel").attr("id"),n=t.find(".SendIndividualMessageMessageTextLabel").attr("id"),o=hl_common_ui_inputValid("#"+i,"","")&&hl_common_ui_inputValid("#"+n,"","");return o&&$("#"+e).modal("hide"),o}function hl_directory_findContactSearch2_onSlidingPanelClick(e){var t=$(e);hl_dirfind(".member-directory").is(":visible"),t)}function hl_directory_findContactSearch2_togglePanel(e,t){var i=t.find(".padding-bar"),n=t.find(".glyphicon"),o=t.find(".sliding-button"),a=t.closest(".result-panel").find(".member-directory");t.hide(),e?(a.hide("slide",{direction:"left"},200),n.removeClaemoveClass("hidden-bar")):(a.show("slide",{direction:"left"},200),n.removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-left"),i.hide(),o.addClass("hidden-bar")),setTimeout(function(){t.show()},200)}function hl_directory_communityHtml_onSaveClick(e){hl_common_ui_blockUI(),$("#EditHtmlModal").modal("hide"),$("#"+e).click()}function hl_directory_getSendMessageModal(e){var t,i;void 0!==e&&(0<(t=$("#modal-send-message")).length&&t.remove(),hl_common_ui_blockUI(),(i={}).ContactKey=e,$.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(i),url:"/higherlogic/ui/mvc/directory/directory/SendMessageModal",success:function(e,t,i){$("body").append(e),$("#modal-send-message").modal("show"),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}!function(t){var e,i;function n(){this.nextUpdateDate=0,this.incrementIn5Minutes=3e4}e=t.Core||(t.Core={}),n.prototype.init=function(){var t=this;["blur","change","click","close","dblclick","drag","drop","focus","input","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseup","mousewheel","scroll","select","submit","toggle"].forEach(function(e){window.addEventListener(e,function(){return t.onWindowEvent()})}),$(window).on("TinyMceChangeEvent",function(){return t.onWindowEvent()})},n.prototype.onWindowEvent=function(){var e=Date.now();this.nextUpdateDate<=e&&(t.Util.post("/higherlogic/ui/mvc/utilities/utilities/slidecontactcookie"),this.nextUpdateDate=e+this.incrementIn5Minutes)},i=n,e.SlidingSession=i}(HigherLogic=HigherLogic||{}),hl_directory_ams_removeMemberAccess=function(t,e,i,n,o,a,s,r,l,c,d,u,h,p,m){var f=250,g=500,v=$(h).text(),y=$(p).text();document.all&&(g+=10,f+=20),$(c).text(l),$(c).text($(c).text().replace("{1}",i));var b={};b[v]=function(){$(d).show(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/HigherLogic/Microsites/ManageAMS.aspx/RemoveAMSAccess",data:'{"additionkey":"'+n+'","legacyContactKey":"'+e+'"}',dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),$.each($(t).parents("tr"),function(e,t){$(t).hide();var i=$("<tr/>").append($("<td/>").prop("colspan",4).addClass("amsRowDeleted").text(m));return $(i).insertBefore(t),$(i).fadeOut(4e3,function(){$(this).remove(),reapplyRowStyle($(".amsTableData"),"TableRowB","TableRowAlternateB")}),$(t).remove(),!1}),$(d).hide(),$(u).dialog("close"),$(u).dialog("destroy")},error:function(e){}})},b.Cancel=function(){$(d).hide(),$(this).dialog("close"),$(this).dialog("destroy")},$(u).dialog({resizable:!1,height:f,width:g,modal:!0,title:y,appendTo:hl_common_ui_getFormForDialog(u),buttons:b,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(u).dialog("open")},hl_directory_ams_editMemberAccess=function(n,o,e,a,t,i,s,r,l,c,d,u,h,p,m,f){var g,v,y,b=800,_=300,w=$(h).text(),C=$(p).text();$.each($(n).parents("tr"),function(e,t){return g=$.trim($(t).find(".BeginRole").text()),v="none"!=$.trim($(t).find(".BeginDate").text())?new Date($(t).find(".BeginDate").text()):"",y="none"!=$.trim($(t).find(".EndDate").text())?new Date($(t).find(".EndDate").text()):"",!1}),document.all&&(b+=10,_+=20),$(f).val(g),""!=$.trim(v)?$(s).val(v.getMonth()+1+"/"+v.getDate()+"/"+v.getFullYear()):$(s).val(""),""!=$.trim(y)?$(r).val(y.getMonth()+1+"/"+y.getDate()+"/"+y.getFullYear()):$(r).val("");var k={};k[w]=function(){var e=new Date;e.setHours(0,0,0,0);var t=new Date($(s).val());t.setHours(0,0,0,0);var i=new Date($(r).val());return i.setHours(0,0,0,0),t.getTime()<e.getTime()?($(s).val(""),$(m).show(),!1):i.getTime()<e.getTime()||i.getTime()<t.getTime()?($(r).val(""),$(m).show(),!1):($(m).hide(),$(d).show(),$.each($(n).parents("tr"),function(e,t){return $(t).find(".BeginRole").text($(f).val()),$(t).find(".BeginDate").text($(s).val()),""!=$.trim($(r).val())?$(t).find(".EndDate").text($(r).val()):$(t).find(".EndDate").html($("<em/>").html("none")),!1}),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/HigherLogic/Microsites/ManageAMS.aspx/UpdateAMSAccess",data:'{"additionkey":"'+a+'","beginDate":"'+(""==$.trim($(s).val())?"":$(s).val())+'","endDate":"'+(""==$.trim($(r).val())?"":$(r).val())+'","legacyContactKey":"'+o+'","role":"'+$(f).val()+'"}',dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),$(d).hide(),$(m).hide(),$(u).dialog("close"),$(u).dialog("destroy")},error:function(e){}}),void $(s).datepicker("destroy"))},k.Cancel=function(){$(d).hide(),$(m).hide(),$(s).datepicker("destroy"),$(this).dialog("close"),$(this).dialog("destroy")},$(u).dialog({resizable:!1,height:_,width:b,modal:!0,title:C,appendTo:hl_common_ui_getFormForDialog(u),buttons:k,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(u).dialog("open"),$(s).datepicker({minDate:"Now",showAnim:"slideDown"}),""!=$.trim(y)?$(r).datepicker({defaultDate:y.getMonth()+1+"/"+y.getDate()+"/"+y.getFullYear(),gotoCurrent:!0,minDate:"Now",showAnim:"slideDown",showOn:"focus"}):$(r).datepicker({minDate:"Now",showAnim:"slideDown"}),$(c).text(l)},hl_directory_ams_amsFindMemeber=function(e,t,i,n,o,a,s,r,l,c,d,u,h){var p=800,m=600,f=$(t),g=$(i),v=$(n),y=$(o),b=$("#member_find").find(".SearchContent"),_=$("#member_grant").find(".SearchContent"),w=$(a),C=new Date,k=0,x=!1;0<$("#member_find").find(".jScrollPaneContainer").length&&($("#member_find").find(".jScrollPaneContainer").remove(),$("#member_find").append($("<div/>").addClass("SearchContent").append($("<div/>").addClass("SearchDisplay")))),$("#member_find").addClass("aclMemberField"),$("#member_grant").addClass("aclMemberField"),w.hide(),$(f).keypress(function(e){13==(e.keyCode?e.keyCode:e.which)&&hl_directory_ams_findMember(t,c,d,u,a,h)}),$(c).keypress(function(e){13==(e.keyCode?e.keyCode:e.which)&&hl_directory_ams_findMember(t,c,d,u,a,h)}),$(d).keypress(function(e){13==(e.keyCode?e.keyCode:e.which)&&hl_directory_ams_findMember(t,c,d,u,a,h)}),$(u).keypress(function(e){13==(e.keyCode?e.keyCode:e.which)&&hl_directory_ams_findMember(t,c,d,u,a,h)}),f.val(""),$(c).val(""),$(d).val(""),$(u).val(""),g.val(""),v.val(""),y.val(""),$(_).children().remove(),$(b).children().remove(),$(l).hide(),document.all&&(p+=10,m+=20);var S={done:function(){var n;$.each($(_).children(),function(e,i){n=!0,$.each($(".amsTableData").find("tbody").find("tr"),function(e,t){if($($(t).find("td")[0]).prop("contactkey")==$(i).prop("contactKey"))return!(x=!(n=!1))}),n&&""!=$.trim($(i).prop("title"))&&($(".amsTableData").append($("<tr/>").append($("<td/>").append($("<a/>").text($(i).prop("title")).prop("target","_blank").prop("href",$(i).prop("ref"))).prop("key",$(i).prop("key")).prop("contactKey",$(i).prop("contactKey"))).append($("<td/>").append($("<input/>").val("Member").addClass("dateSelectorField"))).append($("<td/>").css("text-align","center").append($("<input/>").datepicker({minDate:"Now",showAnim:"slideDown",showOn:"focus"}).val(C.getMonth()+1+"/"+C.getDate()+"/"+C.getFullYear()).addClass("dateSelectorField"))).append($("<td/>").css("text-align","center").append($("<input/>").datepicker({minDate:"Now",showAnim:"slideDown",showOn:"focus"}).val("").addClass("dateSelectorField"))).append($("<td/>").append($("<span/>").addClass("amsRowDelete glyphicon glyphicon-trash").bind("click",function(){$.each($(this).parents("tr"),function(e,t){$(t).hide();var i=$("<tr/>").append($("<td/>").prop("colspan",5).css("text-align","center").css("border-bottom","1px solid #CCCCCC").css("background-color","#fffccc").css("padding","12px 0 12px 0").text("Record removed."));return $(i).insertBefore(t),$(i).fadeOut(2e3,function(){$(this).remove()}),$(t).remove(),!1}),1==$(".amsTableData > tbody > tr").length&&$(".addToAccessListButton").hide()}))).addClass(k%2==0?"TableRowB":"TableRowAlternateB")),0<++k&&$(".addToAccessListButton").show())});var e=$(".amsTableData");makeSortableTable(e,$(".amsSortable"),"TableRowB","TableRowAlternateB"),$("#modal_list_builder").dialog("open"),0<$(_).children().length?($(s).show(),$(r).hide()):($(s).hide(),$(r).show()),x&&$(l).show(),$(this).dialog("close"),$(this).dialog("destroy")},cancel:function(){$(this).dialog("close"),$(this).dialog("destroy"),$(b).children().remove(),$(_).children().remove()}};$("#modal_list_builder").dialog({resizable:!1,height:m,width:p,modal:!0,title:"Find Members",appendTo:hl_common_ui_getFormForDialog("#modal_list_builder"),open:function(e,t){$(".ui-dialog-titlebar-close").hide();var i=$(".ui-dialog-titlebar-close");i.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')},buttons:S})},hl_directory_ams_findMember=function(e,t,i,n,o,s){var a=$(e),r=$(o),l=$("#member_find").find(".SearchContent"),c=$("#member_grant").find(".SearchContent"),d="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/mb_chckmark.png",u=new hl_directory_ams_directorySearchCache;new Date;$(l).children().remove(),hl_directory_ams_resizeList(),""==$.trim(a.val())&&""==$.trim($(t).val())&&""==$.trim($(i).val())&&""==$.trim($(n).val())||(hl_common_ui_blockUI(),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"/HigherLogic/Microsites/ManageAMS.aspx/GetContacts",data:'{"firstName":"'+a.val()+'","lastName":"'+$(t).val()+'","emailAddress":"'+$(i).val()+'","companyName":"'+$(n).val()+'"}',dataType:"json",success:function(e){var i,n,o,a;hl_common_ui_unBlockUI(),e.hasOwnProperty("d")&&(e=e.d),$(r).hide();var t=null==e.d||"undefined"==e.d?e:$.parseJSON(e.d);$.each(t,function(e,t){""==$.trim(u.get(t.ContactKey))&&(u.add(t.ContactKey,t),o=$("<span/>").text(t.DisplayName),a=$("<span/>").addClass("amsEmailKey").text(t.EmailAddress),(i=$("<div/>").addClass("personObjCs").prop("title",t.DisplayName).prop("key",t.LegacyContactKey).prop("contactKey",t.ContactKey).prop("selected","0").prop("ref",t.Navigation).append(o).append("<br/>").append(a)).bind("click",function(e){"1"==$(this).prop("selected")?($(this).prop("selected","0"),$(this).show(),hl_directory_ams_editAccessListBuilder(this,!0,l,c,d)):($(this).prop("selected","1"),(n=$(this).clone()).prop("key",$(this).prop("key")).prop("contactKey",$(this).prop("contactKey")).prop("selected",$(this).prop("selected")).prop("ref",$(this).prop("ref")),n.bind("click",function(e){hl_directory_ams_removeGrants(this,l),$(this).remove(),e.preventDefault()}),c.append(n.css("background-Image","none")),$(this).hide()),hl_directory_ams_resizeScroll(),e.preventDefault()}),l.append(i),hl_directory_ams_editAccessListBuilder(i,!1,l,c,d))}),l.children().length<1&&l.append($("<div/>").addClass("amsNoResults").text($(s).html())),hl_directory_ams_resizeList()},error:function(e){}}))},hl_directory_ams_editAccessListBuilder=function(i,n,e,t,o){$.each($(t).children(),function(e,t){n?$(t).prop("key")==$(i).prop("key")&&$(t).remove():$(t).prop("key")==$(i).prop("key")&&($(i).prop("selected","1"),$(i).hide())}),hl_directory_ams_resizeScroll()},hl_directory_ams_removeGrants=function(i,e){$.each($(e).children(),function(e,t){$(t).prop("key")==$(i).prop("key")&&($(t).prop("selected","0"),$(t).show())}),hl_directory_ams_resizeScroll()},hl_directory_ams_resizeList=function(){},hl_directory_ams_resizeScroll=function(){},hl_directory_ams_submitAccessList=function(e,t,i,n,o,a,s,r){var l,c,d,u=!1,h=$(i),p=$(n),m=$(o),f=$(a),g=$(s),v="",y="",b="",_="",w="",C=new Date;C.setHours(0,0,0,0),$.each($(".amsTableData").find("tbody").find("tr"),function(e,t){l=$($($(t).find("td")[1]).find("input")).val(),c=new Date($($($(t).find("td")[2]).find("input")).val()),d=new Date($($($(t).find("td")[3]).find("input")).val()),c.setHours(0,0,0,0),d.setHours(0,0,0,0),isNaN(c.getTime())&&(c=new Date,u=!0,$($($(t).find("td")[2]).find("input")).addClass("amsFieldError")),isNaN(d.getTime())&&""!=$.trim($($($(t).find("td")[3]).find("input")).val())&&(d=new Date,u=!0,$($($(t).find("td")[3]).find("input")).addClass("amsFieldError")),c.getTime()<C.getTime()&&(u=!0,$($($(t).find("td")[2]).find("input")).addClass("amsFieldError")),""!=$.trim($($($(t).find("td")[3]).find("input")).val())?((d.getTime()<C.getTime()||d.getTime()<c.getTime())&&(u=!0,$($($(t).find("td")[3]).find("input")).addClass("amsFieldError")),_+="|"+(d.getMonth()+1)+"/"+d.getDate()+"/"+d.getFullYear()):_+="|",v+="|"+$($(t).find("td")[0]).prop("key"),y+="|"+$($(t).find("td")[0]).prop("contactKey"),w+="|"+l,b+="|"+(c.getMonth()+1)+"/"+c.getDate()+"/"+c.getFullYear()}),h.val(v),p.val(y),m.val(w),f.val(b),g.val(_),u?$(r).show():($(r).hide(),__doPostBack(t,""))},hl_directory_ams_amsDuplicateWarning=function(e,t,i,n){var o={};o.Ok=function(){$(this).dialog("close"),$(this).dialog("destroy")},$(e).find("span").html(t),$(e).dialog({resizable:!1,height:"auto",width:435,modal:!0,title:i,appendTo:hl_common_ui_getFormForDialog(e),buttons:o,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(e).dialog("open")},hl_directory_ams_directorySearchCache=function(e){var i=$.extend({max_size:2e3},e),n={},o=0;this.add=function(e,t){o>i.max_size&&(n={},o=0),n[e]||(o+=1),n[e]=t},this.get=function(e){return n[e]},this.size=function(){return o}};var hl_mentoringDashboard=function(u){var h="/higherlogic/ui/mvc/directory/mentoring",a="",l="";function p(e,t,i,n,o,s,r){void 0!==e&&void 0!==t&&void 0!==i&&void 0!==n&&(void 0!==s&&null!=s||hl_common_ui_blockUI(),a=h+"/GetMentoringGridDataRows"+("?GridDataType="+e)+("&MentoringType="+t)+("&SortOption="+i)+("&Page="+n)+("&PageSize="+o)+(void 0!==s&&null!=s?"&ActionResult="+s:"")+(void 0!==r?"&SearchFilter="+r:""),l=window.location.pathname+a.substr(a.indexOf("?"),a.length),void 0===history.pushState&&(location.href=l),u.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a,success:function(e,t,i){history.pushState(e,null,l);var n,o,a=u("div.mentoring-grid-data-table-container");0<a.length&&a.replaceWith(e),void 0===s||null==s||0<(n=u("div#mentoring-action-result-modal")).length&&n.modal("show").fadeOut(3e3,function(){n.modal("hide")}),void 0===r||0<(o=u("input#type-ahead-mentoring-filter")).length&&o.val(r),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}function r(e,t,o,a,s,r,l,i){if(void 0!==e&&void 0!==t&&void 0!==o&&void 0!==a&&void 0!==s&&void 0!==r&&void 0!==l){hl_common_ui_blockUI();var n={};n.MentorMenteeKey=t;var c=h,d="";switch(e){case"accept":d="Accepted",c+="/AcceptRelationshipRequest";break;case"decline":d="Declined",c+="/DeclineRelationshipRequest",void 0!==i&&(n.HideFromProfile=i);break;case"complete":d="Completed",c+="/CompleteRelationship";break;case"abandon":d="Abandoned",c+="/AbandonRelationship"}u.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify(n),url:c,success:function(e,t,i){var n;e&&(n=u("table.mentoring-admin tr[mentor-mentee-key*='"+e[0].Key+"']"),e[0].Result?(p(o,a,s,r,l,d),u("ul#type-ahead-mentoring-filter").find(".tagit-close").click()):(hl_common_ui_unBlockUI(),n.addClass("alert-danger"),n.removeClass("alert-danger").fadeOut(3e3)))},error:function(e,t,i){hl_common_ui_unBlockUI()}})}}return{getMentoringGridRowFilter:function(e,t,i){void 0!==e&&void 0!==t&&void 0!==i&&(hl_common_ui_blockUI(),a=h+"/GetMentoringGridRowFilter"+("?GridDataType="+e)+("&MentoringType="+t)+("&SortOption="+i),l=window.location.pathname+a.substr(a.indation.href=l),u.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"htate(e,null,l);var n=u("div.mentoring-grid-row-filter-container");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getMentoringGridDataRows:p,getActiveMentoringModal:function(e,t){var i;void 0!==e&&void 0!==t&&(hl_common_ui_blockUI(),(i={}).MentoringType=e,i.MentoringKey=t,u.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",data:JSON.stringify(i),url:h+"/GetActiveMentoringModal",success:function(e,t,i){var n=u("div#modal-active-mentoring");0<n.length&&n.remove(),u("body").append(e),n=u("div#modal-active-mentoring"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},findMentorMenteesJSON:function(e,t,i){if(void 0!==e&&void 0!==t&&void 0!==i)return u.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",data:{searchTerm:e,dataType:t,mentoringType:i},url:h+"/FindMentorMenteesJSON",success:function(e,t,i){},error:function(e,t,i){}})},acceptRelationshipRequest:function(e,t,i,n,o,a){r("accept",e,t,i,n,o,a)},declineRelationshipRequest:function(e,t,i,n,o,a,s){r("decline",e,t,i,n,o,a,s)},completeRelationship:function(e,t,i,n,o,a){r("complete",e,t,i,n,o,a)},abandonRelationship:function(e,t,i,n,o,a){r("abandon",e,t,i,n,o,a)},updateProfileVisibility:function(e,t){var i;void 0!==e&&void 0!==t&&(hl_common_ui_blockUI(),(i={}).MentorMenteeKey=e,i.hideFromProfile=t,u.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify(i),url:h+"/Updmon_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}}(jQuery),hl_mentoringProfile=function(p){var s="/higherlogic/ui/mvc/directory/mentoring",r="",l="";function m(e,t,i,n){null==e&&(filterOptin="ActiveRelationships"),void 0!==e&&(hl_common_ui_blockUI(),r=s+"/MentoringProfileFilterPartial"+("?FilterOption="+e)+(void 0!==t?"&SortOption="+t:"")+("&Page="+i)+("&PageSize="+n),l=window.location.pathname+r.substr(r.indexOf("?"),r.length),void 0===history.pushState&&(location.href=l),p.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r,success:function(e,t,i){history.pushState(e,null,l);var n=p("#mentoringrelationships-filter-container");0<n.length&&n.html(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}function f(e,t){if(void 0!==e&&void 0!==t){hl_common_ui_blockUI();var n=p("#"+e.toLowerCase()+"-filter-container");if(0<n.length){if("MentoringRelationships"==e)return void g();"MentoringRequests"==e?r=s+"/GetMentoringRequests?UserKey="+t:"MentorProfile"==e?r=s+"/GetMentorProfile?UserKey="+t:"MenteeProfile"==e&&(r=s+"/GetMenteeProfile?UserKey="+t),p.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r,success:function(e,t,i){n.html(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})}}}function o(e,t,i,n,a){var o;void 0!==e&&void 0!==i&&void 0!==n&&(hl_common_ui_blockUI(),o=void 0!==a&&null!=a?"&SearchFilter="+a:"",r=s+"/GetMentoringRelationships"+("?FilterOption="+e)+(void 0!==t?"&SortOption="+t:"")+("&Page="+i)+("&PageSize="+n),l=window.location.pathname+r.substr(r.indexOf("?"),r.length),r+=o,void 0===history.pushState&&(location.href=l),p.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r,success:function(e,t,i){history.pushState(e,null,l);var n,o=p("#mentoringrelationships-data-container");0<o.length&&o.html(e),void 0===a||0<(n=p("input#type-ahead-mentoring-filter")).length&&n.val(a),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}function g(){var e,t,i=p("#mentoringrelationships-filter-container"),n=i.find("#mentoringrelationships-data-container");0<i.length&&0<n.length&&(e=i.find("select.mentoring-profile-filter-options"),t=i.find("select.mentoring-profile-sort-options"),o(e.val(),t.val(),n.data("page"),n.data("pagesize"),n.data("searchfilter")))}return{updateRelationship:function(d,u,e,h,t){if(void 0!==d&&void 0!==u&&void 0!==e&&void 0!==h){hl_common_ui_blockUI();var i={};i.MentorMenteeKey=e;var n=s;switch(u){case"accept":n+="/AcceptRelationshipRequest";break;case"decline":n+="/DeclineRelationshipRequest",void 0!==t&&(i.HideFromProfile=t);break;case"complete":n+="/CompleteRelationship";break;case"abandon":n+="/AbandonRelationship";break;case"delete":n+="/DeleteRelationship"}p.ajax({contentType:"application/json; charset=ngify(,s,r,l,c;e&&(t=p("table.mentoring-public tr[data-mentormenteekey*='"+e[0].Key+"']"),e[0].Result?("MentoringRelationships"==d?(l=p("#mentoringrelationships-filter-container"),c=l.find("#mentoringrelationships-data-container"),0<l.length&&0<c.length&&(i=l.find("select.mentoring-profile-filter-options"),nntoring-profile-sort-options"),o=i.val(),a=n.val(),s=c.data("page"),r=c.data("pagesize"),c.data("searchfilter"),m(o,a,s,r))):f(d,h),"MentoringRequests"!=d||"accept"!=u&&"decline"!=u||g()):(hl_common_ui_unBlockUI(),t.addClass("alert-danger"),t.removeClass("alert-danger").fadeOut(3e3)))},error:function(e,t,i){var n=p("table.mentoring-public tr[data-mentormenteekey*='"+updateResult[0].Key+"']");hl_common_ui_unBlockUI(),n.addClass("alert-danger"),n.removeClass("alert-danger").fadeOut(3e3)}})}},refreshRelationshipDataRows:o,refreshFilter:m,refreshDataRows:f,updateProfileVisibility:function(n,e,o,t){var i;void 0!==n&&void 0!==o&&void 0!==e&&void 0!==t&&(hl_common_ui_blockUI(),(i={}).MentorMenteeKey=e,i.hideFromProfile=t,p.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataTyp,hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},findMentorMenteesJSON:function(e,t,i,n){if(void 0!==e&&void 0!==t&&void 0!==i&&void 0!==n)return p.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",data:{searchTerm:e,filterOption:t,sortOption:i,userKey:n},url:s+"/FindRelationshipsJSON",success:function(e,t,i){},error:function(e,t,i){}})}}}(jQuery);function hl_directory_mvc_volunteerAdmin_PopulateDeleteModal(e,t,i,n,o,a){$("#"+i).attr("data-itemkey",e),hlil_stringIsNullOrWhiteSpace(a)||($("#"+i).attr("data-isDefault",t),$("#"+i).attr("data-itemCount",a)),$("#"+o).text('Delete "'+$("#"+e+n).val()+'"?')}function hl_directory_mvc_volunteerAdmin_OnDeleteClick(e,t,i,n,o){var a;hl_common_util_hasAttr(e,"data-itemkey")&&(a=hl_common_util_hasAttr(e,"data-isDefault")&&hl_common_util_hasAttr(e,"data-itemCount")?$.param({itemKey:$(e).attr("data-itemkey"),isDefault:$(e).attr("data-isDefault"),itemCount:$(e).attr("data-itemCount")}):$.param({itemKey:$(e).attr("data-itemkey")}),$.ajax({url:t+"?"+a,type:"DELETE",dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_directory_profile_hideEditMode(o),alert(e.statusText),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(o),$("#"+n).load(i),hl_common_ui_unBlockUI()}}))}function hl_directory_mvc_volunteerAdmin_OnSortOrderUpClick(e,t,i,n,o){var a;hl_common_util_hasAttr(e,"data-itemkey")&&(hl_common_ui_blockUI(),a={itemKey:$(e).attr("data-itemkey"),isUp:"1"==$(e).attr("data-isUp"),state:o},$.ajax({url:t,type:"POST",data:JSON.stringify(a),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI(),alert("Error: "+e.statusText)},success:function(){$("#"+n).load(i),hl_common_ui_unBlockUI()}}))}function hl_directory_mvc_volunteerAdmin_OnAddEditClick(e,t,i,n,o,a,s,r,l,c,d){$("#"+l).hide();var u,h,p,m,f=$("#"+a),g=$("#"+s),v=$("#"+r),y=$("#"+c);y.hide(),g.attr("data-defaultId",a),g.attr("data-alertshow",!1),hl_common_util_stringIsNullOrWhiteSpace(e)?(hl_common_util_clearElements([i,a,s,n,o]),f.bootstrapSwitch("disabled",!1),g.bootstrapSwitch("disabled",!1),0==d?(f.bootstrapSwitch("state",!0),f.prop("checked",!0),f.attr("checked","checked")):(f.bootstrapSwitch("state",!1),f.prop("checked",!1),f.removeAttr("checked")),g.bootstrapSwitch("state",!0),g.prop("checked",!0),g.attr("checked","checked"),v.bootstrapSwitch("state",!0),v.prop("checked",!0),v.attr("checked","checked"),$("#"+t).removeAttr("data-itemkey")):(hl_common_util_clearElements([i,a,s,n,o]),$("#"+i).val($("#"+e+i).val()),$("#"+n).val($("#"+e+n).val()),$("#"+o).val($("#"+e+o).val()),u="True"===$("#"+e+a).val(),h="True"===$("#"+e+s).val(),p="True"===$("#"+e+r).val(),m=u&&h,g.attr("data-alertshow",m),g.bootstrapSwitch("disabled",!1),f.bootstrapSwitch("disabled",!1),v.bootstrapSwitch("disabled",!1),f.bootstrapSwitch("state",u),f.prop("checked",h),u?f.attr("checked","checked"):f.removeAttr("checked"),g.bootstrapSwitch("state",h),g.prop("checked",h),h?g.attr("checked","checked"):g.removeAttr("checked"),v.bootstrapSwitch("state",p),v.prop("checked",p),p?v.attr("checked","checked"):v.removeAttr("checked"),m?y.show():g.on("switchChange.bootstrapSwitch",hl_directory_mvc_volunteerAdmin_onIsActiveChange),g.bootstrapSwitch("disabled",m),f.bootstrapSwitch("disabled",m),$("#"+t).attr("data-itemkey",e)),$("#"+i).enterkeypressclickbtn("#"+t),$("#"+n).enterkeypressclickbtn("#"+t),$("#"+o).enterkeypressclickbtn("#"+t),$("#"+a).enterkeypressclickbtn("#"+t),$("#"+s).enterkeypressclickbtn("#"+t)}function hl_directory_mvc_volunteerAdmin_OnAddEditClickWithDistance(e,t,i,n,o,a,s,r,l){$("#"+s).hide();var c=$("#"+o),d=$("#"+a),u=$("#"+r);u.hide(),d.attr("data-defaultId",o),d.attr("data-alertshow",!1);var h,p,m,f=$("#"+s+"-distance-error-container"),g=$("#"+s+"-distance-error");f.hl_accessibility_hide(),g.text(""),hl_common_util_stringIsNullOrWhiteSpace(e)?(hl_common_util_clearElements([i,n,o,a]),c.bootstrapSwitch("disabled",!1),d.bootstrapSwitch("disabled",!1),0==l?(c.bootstrapSwitch("state",!0),c.prop("checked",!0),c.attr("checked","checked")):(c.bootstrapSwitch("state",!1),c.prop("checked",!1),c.removeAttr("checked")),d.bootstrapSwitch("state",!0),d.prop("checked",!0),d.attr("checked","checked"),$("#"+t).removeAttr("data-itemkey")):(hl_common_util_clearElements([i,n,o,a]),$("#"+i).val($("#"+e+i).val()),$("#"+n).val($("#"+e+n).val()),h="True"===$("#"+e+o).val(),p="True"===$("#"+e+a).val(),m=h&&p,d.attr("data-alertshow",m),d.bootstrapSwitch("disabled",!1),c.bootstrapSwitch("disabled",!1),c.bootstrapSwitch("state",h),c.prop("checked",p),h?c.attr("checked","checked"):c.removeAttr("checked"),d.bootstrapSwitch("state",p),d.prop("checked",p),p?d.attr("checked","checked"):d.removeAttr("checked"),m?u.show():d.on("switchChange.bootstrapSwitch",hl_directory_mvc_volunteerAdmin_onIsActiveChange),d.bootstrapSwitch("disabled",m),c.bootstrapSwitch("disabled",m),$("#"+t).attr("data-itemkey",e)),$("#"+i).enterkeypressclickbtn("#"+t),$("#"+n).enterkeypressclickbtn("#"+t),$("#"+o).enterkeypressclickbtn("#"+t),$("#"+a).enterkeypressclickbtn("#"+t)}function hl_directory_mvc_volunteerAdmin_OnItemSaveClick(e,t,i,n,o,a,s,r,l,c,d,u,h){var p=$("#"+u),m=$("#"+u+"-span");p.hide(),m.text("");hl_common_ui_inputValid("#"+a+"-label","",""),hl_common_ui_inputValid("#"+r+"-label","","");if(hl_common_ui_inputValid("#"+s+"-label","","")){var f=$.trim($("#"+r).val()),g=$.trim($("#"+s).val());if(!hl_common_util_isInt(f)&&!hl_common_util_isFloat(f))return m.text("Skills multiplier must be a number."),p.show(),void $("#"+r).focus();var v=parseFloat(f);if(100<v)return m.text("Skills multiplier cannot exceed 99.99"),p.show(),void $("#"+r).focus();if(5<v.toString().length)return m.text("Skills multiplier cannot exceed 2 decimal places"),p.show(),void $("#"+r).focus();if(!hl_common_util_isInt(g)&&!hl_common_util_isFloat(g))return m.text("Hourly rate must be a number."),p.show(),void $("#"+s).focus();var y=parseFloat(g);if(1e10<y)return m.text("Hourly rate cannot exceed 9999999999.99"),p.show(),void $("#"+s).focus();if(13<y.toString().length)return m.text("Hourly rate cannot exceed 2 decimal places"),p.show(),void $("#"+s).focus();var b={ItemKey:hl_common_util_hasAttr(e,"data-itemkey")?$(e).attr("data-itemkey"):null,ItemName:$.trim($("#"+a).val()),HourlyRate:y,SkillsMultiplier:v,IsDefault:$("#"+l).prop("checked"),IsActive:$("#"+c).prop("checked"),IsAvailableToCommunityAdmin:$("#"+d).prop("checked")};hl_common_util_hasAttr(e,"data-itemkey")?$.ajax({url:i,type:"POST",data:JSON.stringify(b),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){m.text("Error: "+e.statusText),p.show(),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(h),$("#"+o).load(n),hl_common_ui_unBlockUI()}}):$.ajax({url:t,type:"POST",data:JSON.stringify(b),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){m.text("Error: "+e.statusText),p.show(),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(h),$("#"+o).load(n),hl_common_ui_unBlockUI()}})}}function hl_directory_mvc_volunteerAdmin_OnItemSaveClickWithDistance(e,t,i,n,o,a,s,r,l,c,d){var u,h=hl_common_ui_inputValid("#"+a+"-label","",""),p=$("#"+c),m=$("#"+c+"-span"),f=$("#"+c+"-distance-error-container"),g=$("#"+c+"-distance-error");$("#"+s+"-label").parent().removeClass("has-error"),p.hl_accessibility_hide(),m.text(""),f.hl_accessibility_hide(),g.text(""),(!hl_common_util_isInt($("#"+s).val())||parseInt($("#"+s).val())<0)&&($("#"+s+"-label").parent().addClass("has-error"),g.text("Error: Distance must be 0 or greater and a whole number."),f.hl_accessibility_show(),h=!1),h&&(u={ItemKey:hl_common_util_hasAttr(e,"data-itemkey")?$(e).attr("data-itemkey"):null,ItemName:$.trim($("#"+a).val()),Distance:parseInt($("#"+s).val()),IsDefault:$("#"+r).prop("checked"),IsActive:$("#"+l).prop("checked")},hl_common_util_hasAttr(e,"data-itemkey")?(p.hl_accessibility_hide(),m.text(""),f.hl_accessibility_hide(),g.text(""),$.ajax({url:i,type:"POST",data:JSON.stringify(u),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){m.text("Error: "+e.statusText),p.hl_accessibility_show(),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(d),$("#"+o).load(n),hl_common_ui_unBlockUI()}})):(p.hl_accessibility_hide(),m.text(""),f.hide(),g.hl_accessibility_hide(),$.ajax({url:t,type:"POST",data:JSON.stringify(u),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){m.text("Error: "+e.statusText),p.hl_accessibility_show(),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(d),$("#"+o).load(n),hl_common_ui_unBlockUI()}})))}function hl_directory_mvc_volunteerAdmin_selfReportingNtimeCommitments_OnAddEditClick(e,t,i,n,o,a,s){$("#"+s).hide();var r=$("#"+a),l=$("#"+s+"-point-error-container"),c=$("#"+s+"-point-error");l.hl_accessibility_hide(),c.text(""),hl_common_util_stringIsNullOrWhiteSpace(e)?(hl_common_util_clearElements([i,n,o,a]),$("#"+t).removeAttr("data-itemkey"),r.bootstrapSwitch("state",!0),r.prop("checked",!0),r.attr("checked","checked")):(hl_common_util_clearElements([i,n,o,a]),$("#"+i).val($("#"+e+i).val()),$("#"+n).val($("#"+e+n).val()),$("#"+o).val($("#"+e+o).val()),"True"===$("#"+e+a).val()?(r.bootstrapSwitch("state",!0),r.prop("checked",!0),r.attr("checked","checked")):(r.bootstrapSwitch("state",!1),r.prop("checked",!1),r.removeAttr("checked")),$("#"+t).attr("data-itemkey",e)),$("#"+i).enterkeypressclickbtn("#"+t),$("#"+n).enterkeypressclickbtn("#"+t),$("#"+o).enterkeypressclickbtn("#"+t),$("#"+a).enterkeypressclickbtn("#"+t)}function hl_directory_mvc_volunteerAdmin_selfReportingNtimeCommitments_OnItemSaveClick(e,t,i,n,o,a,s,r,l,c,d,u){var h,p,m,f,g=$("#"+d),v=$("#"+d+"-span"),y=$("#"+d+"-point-error-container"),b=$("#"+d+"-point-error");if(g.hl_accessibility_hide(),v.text(""),h=hl_common_ui_inputValid("#"+s+"-label","",""),m=hl_common_ui_inputValid("#"+l+"-label","",""),"TimeCommitments"===e){p=hl_common_ui_inputValid("#"+r+"-label","","");var _=$("#"+r),w=$("#"+l);if(h&&p&&m){if(parseFloat(w.val())<1)return $("#"+l+"-label").parent().addClass("has-error"),v.text("Error: Hours end must be higher than 0."),void g.show();if(parseFloat(_.val())>parseFloat(w.val())||parseFloat(_.val())===parseFloat(w.val()))return $("#"+r+"-label").parent().addClass("has-error"),$("#"+l+"-label").parent().addClass("has-error"),v.text("Error: Hours end must be higher than the hours start."),void g.show();$("#"+r+"-label").parent().removeClass("has-error"),$("#"+l+"-label").parent().removeClass("has-error")}}else if(y.hl_accessibility_hide(),b.text(""),p=!0,!hl_common_util_isInt($("#"+l).val())||parseInt($("#"+l).val())<0)return $("#"+l+"-label").parent().addClass("has-error"),b.text("Error: Points must be 0 or greater and a whole number."),void y.hl_accessibility_show();h&&p&&m&&(f=hl_directory_mvc_volunteerAdmin_selfReportingNtimeCommitments_JsonData(e,t,s,r,l,c),hl_common_util_hasAttr(t,"data-itemkey")?$.ajax({url:n,type:"POST",data:JSON.stringify(f),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){v.text("Error: "+e.statusText),g.hl_accessibility_show(),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(u),$("#"+a).load(o),hl_common_ui_unBlockUI()}}):$.ajax({url:i,type:"POST",data:JSON.stringify(f),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){v.text("Error: "+e.statusText),g.hl_accessibility_show(),hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(u),$("#"+a).load(o),hl_common_ui_unBlockUI()}}))}function hl_directory_mvc_volunteerAdmin_selfReportingNtimeCommitments_JsonData(e,t,i,n,o,a){switch(e){case"SelfReportingTypes":return{ItemKey:hl_common_util_hasAttr(t,"data-itemkey")?$(t).attr("data-itemkey"):null,ItemName:$.trim($("#"+i).val()),ItemDesc:$("#"+n).val(),VolunteerPoints:parseInt($("#"+o).val()),IsActive:$("#"+a).prop("checked")};case"TimeCommitments":return{ItemKey:hl_common_util_hasAttr(t,"data-itemkey")?$(t).attr("data-itemkey"):null,ItemName:$.trim($("#"+i).val()),HoursStart:$("#"+n).val(),HoursEnd:$("#"+o).val(),IsActive:$("#"+a).prop("checked")}}}function hl_directory_mvc_volunteerAdmin_onStateSelectChange(e,t,i){hl_common_ui_blockUI(),$("#"+e).load(t+"?state="+i),hl_common_ui_unBlockUI()}function hl_directory_mvc_volunteerAdmin_onIsActiveChange(e,t){var i=$("#"+$(this).attr("data-defaultId"));i.bootstrapSwitch("state")&&i.bansSpeed="fast",__profileShowTransSpeed="slow";function hl_directory_profile_suppressAjaxShowHideDiv(e,t){$(t).modal("show"),$(t).find(":input:first:visible").focus()}function hl_directory_profile_enableAjaxShowHideDiv(e,t){$(t).modal("show"),$(t).find(":input:first:visible").focus()}function hl_directory_profile_showPanel(e){return $(e).fadeIn(__profileShowTransSpeed),$(e).find(":input:first:visible").focus(),!1}function hl_directory_profile_hidePanel(e){return $(e).fadeOut(__profileHideTransSpeed),!1}function hl_directory_profile_hideShowEditMode(e,t){return $(t).modal("show"),$(t).find(":input:first:visible").focus(),!1}function hl_directory_profile_showEditMode(e,t){var i="#"+e;return $(i).modal("show"),$(i).find(":input:first:visible").focus(),!1}function hl_directory_profile_hideEditMode(e){return 0<e.length?$("#"+e).modal("hide"):$(".modal.in").modal("hide"),$(".modal-backdrop").remove(),$("body").removeClass("modal-open"),!1}function hl_directory_profile_htmlEncode(e){var t=$("#"+e).find('input[type="text"]'),n=$("#"+e).find("textarea"),t=Array.prototype.slice.call(t),n=Array.prototype.slice.call(n),o=t.concat(n);for(i=0;i<o.length;i++)o[i].value=$("<div />").text(o[i].value).html()}function hl_directory_profile_fadeIn(e){$(e).fadeIn(__profileShowTransSpeed)}function hl_directory_profile_socialMediaDialog(e,t,i){hl_common_ui_showjQueryUIDialogContainer2(e,t,!1,!1,780,370,i)}function hl_directory_profile_toggleSelectAllInbox(e,t){($("#"+t).is(":checked")?hl_directory_profile_SelectAll:hl_directory_profile_DeSelectAll)(e)}function hl_directory_profile_toggleSelectAllSent(e,t,i){var n=$("#"+i);$("#"+t).is(":checked")?(n.removeClass("disabled"),n.removeClass("btn-default"),n.addClass("btn-danger"),hl_directory_profile_SelectAll(e)):(n.addClass("btn-default"),n.removeClass("btn-danger"),n.addClass("disabled"),hl_directory_profile_DeSelectAll(e))}function hl_directory_profile_toggleDeleteSelectedMsgs(e,t,i){var n=$("#"+e),o=$("#"+i),a=$("#"+t),s=$("div.sentMessageRow").find(".checkbox").length,r=$("div.sentMessageRow").find(".checkbox :checked").length;n.is(":checked")?(a.removeClass("disabled"),s==r&&o.prop("checked",!0)):0==r&&(o.prop("checked",!1),a.addClass("disabled"))}function hl_directory_profile_SelectAll(e){for(var t=document.getElementById(e).value,i=new Array,i=t.split("~"),n=0;n<i.length;n++){var o=document.getElementById(i[n]);null!=o&&(o.checked=!0)}}function hl_directory_profile_DeSelectAll(e){for(var t=document.getElementById(e).value,i=new Array,i=t.split("~"),n=0;n<i.length;n++){var o=document.getElementById(i[n]);null!=o&&(o.checked=!1)}}function hl_directory_profile_hasSelectionOfCheckBox(e,t){var i=document.getElementById(e).value,n="",o=new Array,a="false",o=i.split("~");if(""==i||0==o.length)return _suppressGlobalPopupContainer=!0,hl_common_ui_alertDialog("<%: Resources.DirectoryResources.NoRecords %>")ElementById(o[s]);null!=r&&r.checked&&(n+=o[s]+"~",a="true")}return document.getElementById(t).value=n,"true"==a?!(_suppressGlobalPopupContainer=!1):(_suppressGlobalPopupContainer=!0,hl_common_ui_alertDialog("Please select at least 1 item."),!1)}var hl_directory_volunteer_common={showAddSpecificVolunteersModel:function(a,e,s){var i="#add-specific-volunteers-modal",r=$(i);0<r.length&&r.remove(),hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:"/higherlogic/ui/mvc/directory/volunteeradmin/GetAddSpecificVolunteersModal/?VolunteerOpportunityKey="+a,success:function(e){$("body").append(e);var n=(r=$(i)).find("#error-message"),o=n.find(".details"),t=r.find(".note");o.html(""),n.hide(),r.find(".bootstrap-switch-container input").bootstrapSwitch(),r.find("#add-specific-volunteers").bind("click",function(){var i={};i.VolunteerOpportunityKey=a,i.AutoApprove=!1,0<r.find("#switch-auto-approve").length&&(i.AutoApprove=r.find("#switch-auto-approve").is(":checked")),i.SendEmailNotifications=!1,0<r.find("#switch-send-notification").length&&(i.SendEmailNotifications=r.find("#switch-send-notification").is(":checked")),null==i.Volunteers&&(i.Volunteers=[]),$(".tagit-label").each(function(e,t){i.Volunteers.push($(t).attr("id"))}),hl_common_ui_blockUI(),$.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/AddSpecificVolunteers/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){void 0===s?window.location.reload():window.location=s}})}),$(i).modal("show"),r.find("#mytags").tagit({singleField:!1,allowSpaces:!0,allowDuplicates:!1,removeConfirmation:!0,afterTagRemoved:function(e){o.html(""),n.hide(),t.show(),r.find("#mytags input").attr("placeholder","Enter a Name or Email")},autocomplete:{source:function(e,t){var i={Term:e.term,VolunteerOpportunityKey:a};$.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/AddSpecificVolunteerSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length?(o.html(""),n.hide(),t($.map(e,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Add ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:""==e.FName not found in the directory."),n.show()),r.find("#mytags").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),r.find("#mytags input").attr("placeholder","Enter a Name or Email"),hl_common_ui_unBlockUI()}})}},hl_directory_volunteer_opportunity={setActive:function(e){hl_common_ui_blockUI(),$.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/setopportunityisactive?opportunityKey="+e+"&isActive=true",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(){location.reload(!0)}})},setInactive:function(e){hl_common_ui_blockUI(),$.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/setopportunityisactive?opportunityKey="+e+"&isActive=false",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(){location.reload(!0)}})},markDeleted:function(e,t){hl_common_ui_blockUI(),$.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/setopportunitydeleted?opportunityKey="+e,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(){hl_directory_profile_hideEditMode(t),location.reload(!0)}})},refreshTinyMCEImagePath:function(e,t){hl_common_ui_blockUI(),$.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/RefreshTinyMCEImagePath?communitykey="+e+"&text="+t,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(e){$("#opportunity-create-tinymce").html(e),hl_common_ui_unBlockUI()}})}},hl_directory_volunteer_opportunity_details=function(){var t="/higherlogic/ui/mvc/common/volunteeradmin",i=hl_common_util_getParameterByName("returnurl"),n=hl_common_util_getParameterByName("communitykey");return 0<i.length&&(i="&returnurl="+i),0<n.length&&(n="&CommunityKey="+n),{baseUrl:t,refreshDetails:function(e){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t+"/VolunteerOpportunityDetailsPartial?VolunteerOpportunityKey="+e+i+n,success:function(e){$("#volunteer-details").html(e),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})}}}(),hl_directory_volunteer_opportunity_invitation={baseUrl:"/higherlogic/ui/mvc/common/volunteeradmin",getNominations:function(e,t){hl_common_ui_blockUI();var i={};i.VolunteerOpportunityKey=e,i.ContactKey=t,$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(i),dataType:"html",url:"/higherlogic/ui/mvc/directory/volunteeradmin/GetOpportunityNominationsModal",success:function(e){var t=$("#volunteer-nominations-modal");0<t.length&&t.remove(),$("body").append(e),$("#volunteer-nominations-modal").modal("show"),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})}},hl_directory_volunteer_opportunity_volunteer=function(){var r="/higherlogic/ui/mvc/directory/volunteeradmin",e=hl_common_util_getParameterByName("returnurl");function a(t,i){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:r+"/AcceptVolunteerOpportunity?VolunteerOpportunityKey="+t,success:function(e){"True"==e?"function"==typeof i?i(t):hl_common_ui_unBlockUI():n(t,i)},error:function(){hl_common_ui_unBlockUI()}})}function h(o,a){hl_common_ui_blockUI();var t=[],s=[];$("#"+o+"-opportunity-nominate-modal").find("ul#nominees li span.tagit-label").each(function(e){t.push($(this).attr("id")),s.push($(this).text())}),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:r+"/NominateVolunteers?VolunteerOpportunityKey="+o+"&Nominees="+t.join(","),success:function(e){var i,t,n;"True"==e?(i=o,t=s,n=a,hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r+"/GetThanksForNominatingModal?VolunteerOpportunityKey="+i+"&NomineeNames="+t.join(", "),success:function(e){var t=$("#"+i+"-thanks-for-nominating-modal");0<t.length&&t.remove(),$("body").append(e),"function"==typeof n&&n(i),hl_common_ui_unBlockUI(),$("#"+i+"-thanks-for-nominating-modal").modal("show")},error:function(){hl_common_ui_unBlockUI()}})):hl_common_ui_unBlockUI()},error:function(e){$("#"+o+"-opportunity-nominate-modal").modal("hide"),hl_common_ui_unBlockUI()}})}function n(i,n){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r+"/GetOpportunityClosedModal?VolunteerOpportunityKey="+i,success:function(e){var t=$("#"+i+"-opportunity-closed-modal");0<t.length&&t.remove(),$("body").append(e),"function"==typeof n&&n(i),hl_common_ui_unBlockUI(),$("#"+i+"-opportunity-closed-modal").modal("show")},error:function(){hl_common_ui_unBlockUI()}})}return 0<e.length&&(e="&ReturnUrl="+e),{baseUrl:r,setIsPublic:function(e,t){hl_common_ui_blockUI(),$.ajax({url:"",type:"POST",dataType:"json",data:{volunteerOpportunityKey:e,isPublic:t},contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(){}})},applyForOpportunity:function(n,o){hl_common_ui_blockUI(),$.ajax({type:"GET",dataType:"html",url:r+"/GetApplyForOpportunityModal?VolunteerOpportunityKey="+n,success:function(e){var t=$("#"+n+"--modal");0<t.length&&t.remove(),$("body").append(e),(t=$("#"+n+"-opportunity-apply-modal")).find("#apply-submit").bind("click",function(e){e.preventDefault();var t=$(this),i={};i.data={mainControlId:t.data("controlid"),itemKey:n,formName:t.data("formname")},function(s,t,e,i){var n=!hl_common_util_stringIsNullOrWhiteSpace(t),r=[],l=[],o=$(this);n&&$(t).modal("hide");if($(s.data.mainControlId+"-ErrorLabel").text(""),$(s.data.mainControlId+"-ErrorContainer").hide(),hl_common_ui_blockUI(),$.each($(s.data.mainControlId).find(".form-group.view-form-element"),function(){var e=$(this),t=e.attr("data-itemkey"),i=[];switch(e.removeClass("has-error"),e.attr("data-elementtype")){case"plaintext":i.push({IfdKey:e.find("p").attr("data-ifdkey"),Value:e.find("p").text()});break;case"input":hl_common_util_stringIsNullOrWhiteSpace(e.find("input").val().trim())||i.push({IfdKey:e.find("input").attr("data-ifdkey"),Value:e.find("input").val().trim()});break;case"inputemailaddress":!hl_common_util_stringIsNullOrWhiteSpace(e.find("input").val().trim())&&hl_common_util_isValidEmailAddress(e.find("input").val().trim())&&i.push({IfdKey:e.find("input").attr("data-ifdkey"),Value:e.find("input").val().trim()});break;case"inputwebaddress":hl_common_util_stringIsNullOrWhiteSpace(e.find("input").val().tr"http://"+e.find("input").val().trim()),!hl_common_util_stringIsNullOrWhiteSpace(e.find("input").val().trim())&&hl_common_util_isUrlValid(e.find("input").val().trim())&&i.push({IfdKey:e.find("input").attr("data-ifdkey"),Value:e.find("input").val().trim()});break;case"textarea":hl_common_util_stringIsNullOrWhiteSpace(e.find("textarea").val().trim())||i.push({IfdKey:e.find("textarea").attr("data-ifdkey"),Value:e.find("textarea").val().trim()});break;case"checkbox":i.push({IfdKey:e.find('input[type="checkbox"]').attr("data-ifdkey"),Value:e.find('input[type="checkbox"]').prop("checked").toString()});break;case"checkboxlist":$.each(e.find(s.data.mainControlId+"-"+t+' input[type="checkbox"]:checked'),function(){i.push({IfdKey:$(this).attr("data-ifdkey"),Value:$(this).val()})});break;case"radiobuttonlist":0<e.find('input[name="radio-'+t+'"]:checked').length&&i.push({IfdKey:e.find('input[name="radio-'+t+'"]:checked').attr("data-ifdkey"),Value:e.find('input[name="radio-'+t+'"]:checked').val()});break;case"select":e.find("select :selected").each(function(){0<$(this).val().length&&i.push({IfdKey:$(this).attr("data-ifdkey"),Value:$(this).val()})});break;case"demographics":e.find("select :selected").each(function(){i.push({IfdKey:$(this).attr("data-ifdkey"),Value:$(this).val()})}),e.find("input.form-control.no-error").length&&!hl_common_util_stringIsNullOrWhiteSpace(e.find("input.form-control.no-error").val().trim())&&i.push({IfdKey:$(this).attr("data-ifdkey"),Value:e.find("input.form-control.no-error").val().trim()});break;case"filepicker":var n=$(s.data.mainControlId+"-"+t).data("filepickerdata");if(i.push({IfdKey:hl_common_util_hasAttr($(s.data.mainControlId+"-"+t),"data-clekey")?$(s.data.mainControlId+"-"+t).attr("data-clekey"):"00000000-0000-0000-0000-000000000000",Value:"[data-clekey]"}),void 0!==n&&0<n.length)for(var o=0;o<n.length;o++)i.push({IfdKey:n[o].IfdKey,Value:n[o].ItemKey})}hl_common_util_hasAttr(e,"data-required")&&"1"===e.attr("data-required")&&(0===i.length||"filepicker"===e.attr("data-elementtype")&&1===i.length)&&(e.addClass("has-error"),l.push({attributeKey:t}));var a={AttributeKey:t,DataEntryControlCode:e.attr("data-deccode"),IfdKeyValues:i};"filepicker"==e.attr("data-elementtype")&&0<i.length&&(a.FilePickerData=$(s.data.mainControlId+"-"+t).data("filepickerdata")),r.push(a)}),0<l.length)return hl_common_ui_unBlockUI(),n&&$(t).modal("show"),location.href=s.data.mainControlId+"-"+l[0].attributeKey+"-elementContainer";$.ajax({url:"/higherlogic/ui/mvc/common/formbuilder/addupdateformdata",type:"POST",data:JSON.stringify({fieldValues:r,itemKey:s.data.itemKey}),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI(),n&&$(t).modal("show"),$(s.data.mainControlId+"-ErrorLabel").text(200===e.status?"Unable to save application form data.":e.statusText),$(s.data.mainControlId+"-ErrorContainer").show(),"function"==typeof i&&i(e)},success:function(){!n&&o.data("submiturl").length&&(window.location.href=o.data("submiturl")),"function"==typeof e&&e()}})}(i,t.data("modalid"),function(){a(n,o)},"")}),hl_common_ui_unBlockUI(),t.modal("show")},error:function(e){hl_common_ui_unBlockUI()}})},signupForOpportunity:function(t,i){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:r+"/SignUpForVolunteerOpportunity?VolunteerOpportunityKey="+t,success:function(e){"True"==e?"function"==typeof i?i(t):hl_common_ui_unBlockUI():n(t,i)},error:function(e){hl_common_ui_unBlockUI()}})},acceptOpportunity:a,declineInvitation:function(t,i){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:r+"/DeclineInvitations?VolunteerOpportunityKey="+t,success:function(e){"function"==typeof i?i(t):hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})},setInactive:function(t,i){hl_common_ui_showBootstrapDeleteDialog(t,"Yes, withdraw my application.","Withdraw Volunteer Application","We hope that you will consider applying for other opportunities in the future.<br> Are you sure youd like to withdraw?",function(){$.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:r+"/SetInactive?VolunteerOpportunityKey="+t,success:function(e){"function"==typeof i?i(t):hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})})},findOpportunityNominees:function(c,d){function u(e){0==$("#nominees li.tagit-choice").length?e.attr("disabled",""):e.removeAttr("disabled","")}hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r+"/GetNominateForOpportunityModal?VolunteerOpportunityKey="+c,success:function(e){var n,t,i,o,a,s=$("#"+c+"-opportunity-nominate-modal");0<s.length&&s.remove(),$("body").append(e),s=$("#"+c+"-opportunity-nominate-modal"),t=(n=s).find("#nominees"),i=n.find("#nominate-submit"),o=n.find("#error-message"),(a=o.find(".details")).html(""),o.hide(),t.tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,t){var i={name:e.term,includeCompanies:!1};$.ajax({url:"/higherlogic/ui/mvc/directory/directory/FindContacts/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length?(a.html(""),o.hide(),t($.map(e,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.AddrCity)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:e.FirstName+" "+e.LastName,label:t}}))):(a.html("Name not found in the directory."),o.show()),n.find("#nominees").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3},afterTagAdded:function(){u(i)},afterTagRemoved:function(){u(i)}}),t.on("keydown",function(e){e.which!=$.ui.keyCode.BACKSPACE&&e.which!=$.ui.keyCode.DELETE||(a.html(""),o.hl_accessibility_hide())});var r=s.find("#nominees li.tagit-new input"),l=s.find("#nominate-submit");r.attr("placeholder","Enter a Name or Email"),l.attr("disabled",""),l.bind("click",function(e){e.preventDefault(),s.modal("hide"),h(c,d)}),hl_common_ui_unBlockUI(),s.modal("show")},error:function(e){hl_common_ui_unBlockUI()}})},nominatForOpportunity:h}}(),hl_directory_volunteer_profile=function(){var a="/higherlogic/ui/mvc/common/volunteerprofile";function n(e,t){hl_common_ui_blockUI();var i=hl_common_util_removeURLParameter(window.location.href,"MyVolunteerHistoryPage"),i=hl_common_util_removeURLParameter(i,"MyVolunteerOpportunitiesPage");i=hl_common_util_removeURLParameter(i,"myVolunteerOpportunitesfilterByOptions"),window.location=i}function o(e,t,i){var n=$(e).val(),o=moment(n);return!(0<n.trim().length)||null!=o&&o.format(t)==n.trim()||($(i).parent().addClass("has-error"),$(i).show(),!1)}function r(o,a,s){return $.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:o,success:function(e){var t,i,n;$("#my-volunteer-history .pagination-container").remove(),$(".my-volunteer-history-block-top").replaceWith($(e).find(".my-volunteer-history-block-top")),$("#my-volunteer-history-list").append($(e).find("#my-volunteer-history-list div.my-volunteer-history-block")),$("#my-volunteer-history").append($(e).find("#my-volunteer-history .pagination-container")),s&&void 0!==history.pushState&&((t={myVolunteerHistory:{}}).myVolunteerHistory.controlContent=$("#my-volunteer-history").html(),t.myVolunteerOpportunities={},t.myVolunteerOpportunities.controlContent=$("#my-volunteer-opportunities").html(),i=hl_common_util_getParameterByName("page",o),n=hl_common_util_updateQueryStringParameter(document.location.href,"MyVolunteerHistoryPage",i),history.pushState(t,document.title,n),a&&hl_common_ui_unBlockUI())}})}function l(o,a,s){return $.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:o,success:function(e){var t,i,n=hl_common_util_getParameterByName("page",o);$(".my-volunteer-opportunities-block-top").replaceWith($(e).find(".my-volunteer-opportunities-block-top")),$("#my-volunteer-opportunities .pagination-container").remove(),$("#my-volunteer-opportunities").append($(e).find("#my-volunteer-opportunities .pagination-container")),0<$(e).find("#my-volunteer-opportunities-list div.my-volunteer-opportunities-block").length?($("#my-volunteer-opportunities-no-data").hide(),$("#my-volunteer-opportunities-list").append($(e).find("#my-volunteer-opportunities-list div.my-volunteer-opportunities-block")),$("#my-volunteer-opportunities-list").show()):($("#my-volunteer-opportunities-list").html(""),$("#my-volunteer-opportunities-list").hide(),$("#my-volunteer-opportunities-no-data").replaceWith($(e).find("#my-volunteer-opportunities-no-data")),$("#my-volunteer-opportunities-no-data").show()),s&&void 0!==history.pushState&&((t={myVolunteerHistory:{}}).myVolunteerHistory.controlContent=$("#my-volunteer-history").html(),t.myVolunteerOpportunities={},t.myVolunteerOpportunities.controlContent=$("#my-volunteer-opportunities").html(),i=hl_common_util_updateQueryStringParameter(document.location.href,"MyVolunteerOpportunitiesPage",n),history.pushState(t,document.title,i),a&&hl_common_ui_unBlockUI())}})}function c(){var e={myVolunteerHistory:{}};e.myVolunteerHistory.controlContent=$("#my-volunteer-history").html(),e.myVolunteerOpportunities={},e.myVolunteerOpportunities.controlContent=$("#my-volunteer-opportunities").html();var t=hl_common_util_updateQueryStringParameter(t=document.location.href,"myVolunteerOpportunitesfilterByOptions",$("#my-volunteer-opportunity-sort").val());history.replaceState(e,document.title,t)}function d(){$("body").on("click","#my-volunteer-history .pagination-container li:not(.active) a",function(e){e.preventDefault();var t=$(this).attr("href");hl_common_ui_blockUI(),r(t,!0,!0)})}function u(){$("body").on("change","#my-volunteer-opportunity-sort",function(e){var n=$(this).val();hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:"/higherlogic/ui/mvc/common/volunteerprofile/MyVolunteerOpportunities?filterByOptions="+n+"&numbertoshow="+$(this).attr("number-to-show"),success:function(e){$(".my-volunteer-opportunities-block-top").replaceWith($(e).find(".my-volunteer-opportunities-block-top")),$("#my-volunteer-opportunities .pagination-container").remove(),$("#my-volunteer-opportunities").append($(e).find("#my-volunteer-opportunities .pagination-container")),0<$(e).find("#my-volunteer-opportunities-list div.my-volunteer-opportunities-block").length?($("#my-volunteer-opportunities-list").html(""),$("#my-volunteer-opportunities-no-data").hide(),$("#my-volunteer-opportunities-list").append($(e).find("#my-volunteer-opportunities-list div.my-volunteer-opportunities-block")),$("#my-volunteer-opportunities-list").show()):($("#my-volunteer-opportunities-list").html(""),$("#my-volunteeres-no-data").show());var t={myVolunteerHistory:{}};t.myVolunteerHistory.controlContent=$("#my-volunteer-history").html(),t.myVolunteerOpportunities={},t.myVolunteerOpportunities.controlContent=$("#my-volunteer-opportunities").html();var i=hl_common_util_updateQueryStringParameter(i=document.location.href,"myVolunteerOpportunitesfilterByOptions",n);i=hl_common_util_updateQueryStringParameter(i,"MyVolunteerOpportunitiesPage",1),history.pushState(t,document.title,i),hl_common_ui_unBlockUI()}})}),$("body").on("click","#my-volunteer-opportunities .pagination-container li:not(.active) a",function(e){e.preventDefault();var t=$(this).attr("href");hl_common_ui_blockUI(),l(t,!0,!0)})}function s(e){var t={};t.ParsedData=e.ParsedData,$.ajax({url:a+"/ImportExternalHistoryFile",type:"POST",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){e.Success?($("#modal-import-experience").modal("hide"),n(),hl_common_ui_unBlockUI()):($("#import-volunteer-history-import-upload-result").text(e.Message),$("#import-volunteer-history-import-upload-result").hl_accessibility_show())},error:function(e){$("#import-volunteer-history-import-upload-result").text(e.statusText),$("#import-volunteer-history-import-upload-result").hl_accessibility_show()}})}return{saveVolunteerBio:function(e,t,i){hl_common_ui_blockUI();var n=e.replace(/\n/g,"<br/>"),o={};o.volunteerBio=n,$.ajax({url:a+"/savevolunteerbio",type:"POST",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",success:function(){hl_common_ui_unBlockUI(),null!=t&&null!=i&&($("#"+t).modal("hide"),$("#"+i).html(n),""==n?($("#no-volunteer-bio").show(),$("#edit-pencil").hide()):($("#no-volunteer-bio").hide(),$("#edit-pencil").show())),$("#no-bio-notice").hide()}})},refreshMyVolunteerOpportunities:function(e,t){hl_common_ui_blockUI();var i=hl_common_util_removeURLParameter(window.location.href,"MyVolunteerHistoryPage"),i=hl_common_util_removeURLParameter(i,"MyVolunteerOpportunitiesPage");i=hl_common_util_removeURLParameter(i,"myVolunteerOpportunitesfilterByOptions"),window.location=i},toggleIsPublic:function(e,t){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a+"/ToggleIsPublic?itemKey="+e+"&isExternal="+t,success:function(e){$("#my-volunteer-history-list").html(e),$("#modal-keep-private").modal("hide"),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})},refreshVolunteerHistory:n,showAddEditExternalExperienceModal:function(e,t,i,n){hl_common_ui_blockUI();var o="/AddEditExternalHistory";o+="?showPointsToNonAdmins="+(i||!1),o+="&contentKey="+n,null!=e&&(o=o+"&externalHistoryItemKey="+e),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a+o,success:function(e){0<$("#modal-external-experience").length&&$("#modal-external-experience").remove(),$("body").append(e),$("#modal-external-experience").modal("show"),$("#history-item-start-date-picker").datetimepicker({dateFormat:"MM-dd-yyyy",pickTime:!1}),$("#history-item-end-date-picker").datetimepicker({dateFormat:"MM-dd-yyyy",pickTime:!1}),$("#history-item-opportunity-type").focus(),$("#history-item-opportunity-type").on("change",function(){!function(){{var e;null!=$("#history-item-points-awarded")&&(e=$("#history-item-opportunity-type").val(),null!=externalTypePointList[e]&&$("#history-item-points-awarded").val(externalTypePointList[e]))}}()}),$("#modal-external-experience").attr("number-to-show",t),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})},editAwardPointsAdmin:function(e){var t={};t.volunteerexternalhistorykey=e,$.fn.hl_ui_volunteer_awardpointsmodal.showAwardPointsModal(t,n)},saveExternalHistory:function(e){var t=$("#hidden-history-item-key").val(),i={ContentKey:e};null!=t&&(i.ExternalExperienceKey=t),i.ExternalTypeId=$("#history-item-opportunity-type").val(),i.StateCode=$("#history-item-state").val(),i.CountryCode=$("#history-item-country").val(),i.Title=$("#history-item-title").val(),i.Description=$("#history-item-description").val(),i.City=$("#history-item-city").val(),i.StartDate=$("#history-item-start-date").val(),i.EndDate=$("#history-item-end-date").val(),i.PointsAwarded=$("#history-item-points-awarded").val(),function(){var e=!1;$("#history-item-opportunity-type-label").parent().removeClass("has-error"),$("#history-item-title-label").parent().removeClass("has-error"),$("#history-item-start-date-label").parent().removeClass("has-error"),$("#history-item-end-date-label").parent().removeClass("has-error"),$("#history-item-start-date-help").hide(),$("#history-item-end-date-help").hide(),$("#history-item-dates-help").hide(),0==$("#history-item-opportunity-type").val().trim().length&&($("#history-item-opportunity-type-label").parent().addClass("has-error"),$("#history-item-opportunity-type").focus(),e=!0);0==$("#history-item-title").val().trim().length&&($("#history-item-title-label").parent().addClass("has-error"),e||($("#history-item-title").focus(),e=!0));0==$("#history-item-start-date").val().trim().length&&($("#history-item-start-date-label").parent().addClass("has-error"),e||($("#history-item-start-date").focus(),e=!0));var t=o($("#history-item-start-date"),"MM/DD/YYYY",$("#history-item-start-date-help"));t||e||($("#history-item-start-date").focus(),e=!0);var i=o($("#history-item-end-date"),"MM/DD/YYYY",$("#history-item-end-date-help"));i||e||($("#history-item-end-date").focus(),e=!0);{var n;t&&i&&(n=moment($("#history-item-start-date").val()),moment($("#history-item-end-date").val())<n&&($("#history-item-end-date||($("#history-item-end-date").focus(),e=!0)))}return!e}()&&(hl_common_ui_blockUI(),$.ajax({url:a+"/AddUpdateExternalExperience/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(e){e.Success&&($("#modal-external-experience").attr("number-to-show"),$("#modal-external-experience").modal("hide"),n(e.UserKey)),hl_common_ui_unBlockUI()}}))},saveVolunteerTravelPreference:function(e)"/savevolunteertravelpreference?travelPreferenceKey="+e,type:"POST",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(){hl_common_ui_unBlockUI()}})},saveVolunteerExperience:function(e){hl_common_ui_blockUI(),$.ajax({url:a+"/savevolunteerexperience?volunteerExperienceKey="+e,type:"POST",contentType:"application/json; charset=utf-8",error:function(e){hl_common_ui_unBlockUI()},success:function(){hl_common_ui_unBlockUI()}})},deleteExternalExperienceItem:function(e){hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a+"/DeleteExternalExperienceItem?itemKey="+e,success:function(e){$("#my-volunteer-history-list").html(e),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})},showVolunteerHistoryModal:function(e){hl_common_ui_blockUI(),$("#modal-view-volunteer-history").find(".modal-body").html("");var t="/MyVolunteerHistoryModal";null!=e&&(t=t+"?ContactKey="+e),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a+t,success:function(e){$("#modal-view-volunteer-history").lunteer-history").modal("show"),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}})},initMyHistoryPage:d,initMyProfileAjaxLoads:function(){var e=[],t=hl_common_util_getParameterByName("MyVolunteerOpportunitiesPage",document.location.href);if("1"!=t&&""!=t)for(var i=parseInt(t),n=1;n<i;n++){var o=$("#my-volunteer-opportunities .pagination-container li:not(.active) a").attr("href");o=hl_common_util_updateQueryStringParameter(document.location.href,"page",n+1),e.push(l(o,!1,!1))}else 0<$("#my-volunteer-history").length&&c();var a,s=hl_common_util_getParameterByName("MyVolunteerHistoryPage",document.location.href);if("1"!=s&&""!=s)for(i=parseInt(s),n=1;n<i;n++){o=$("#my-volunteer-history .pagination-container li:not(.active) a").attr("href");o=hl_common_util_updateQueryStringParameter(document.location.href,"page",n+1),e.push(r(o,!1,!1))}else 0<$("#my-volunteer-opportunities").length&&((a={myVolunteerHistory:{}}).myVolunteerHistory.controlContent=$("#my-volunteer-history").html(),a.myVolunteerOpportunities={},a.myVolunteerOpportunities.controlContent=$("#hen.apply($,e).done(function(){d(),u(),hl_common_ui_unBlockUI()}).fail(function(){}).always(function(){}))},loadMyHistoryPage:r,loadMyVolunteerOpportunitiesPage:l,initMyVolunteerOpportunitiesPage:u,replaceCurrentMyVOState:c,uploadAndProcessExternalHistoryFile:function(e,t){var i=new FormData;i.append("uploadedFile",e);var n=e.name;$.ajax({contentType:!1,url:a+"/UploadAndProcessExternalHistoryFile",type:"POST",processData:!1,data:i,success:function(e){if(e.Success)$("#import-volunteer-history-filename").text(n),$.fn.hl_ui_volunteer_profile_importHistory.previewImportResult(e.ParsedData),$("#import-volunteer-history-upload-result").hl_accessibility_show(),$("#modal-import-experience #import-volunteer-experience-button").removeClass("disabled"),$("#modal-import-experience #import-volunteer-experience-button").click(function(){s(e)});else{for(var t in $("#import-volunteer-history-upload-error span").text(e.Message),e.ErrorMessageList)e.ErrorMessageList.hasOwnProperty(t)&&$("#import-volunteer-history-upload-error > ul").append("<li>"+e.ErrorMessageList[t]+"</li>");$("#import-volunteer-history-upload-error").hl_accessibility_show()}},error:function(e){$("#import-volunteer-history-upload-error span").text(t),$("#import-volunteer-history-upload-error").hl_accessibility_show()}})},importExternalistoryFile:s}}();function hl_egroups_rdoAddSubscribed_CheckedChanged(e,t,i,n,o,a,s,r,l,c){var d=document.getElementById(r).style.display;document.getElementById(e).style.fontWeight="bold",document.getElementById(i).value=document.getElementById(t).innerHTML,"block"==d&&(document.getElementById(t).style.display="inline",document.getElementById(i).style.display="none",document.getElementById(n).style.display="inline",document.getElementById(o).style.display="none",document.getElementById(a).style.display="none",document.getElementById(s).style.display="none");var u=document.getElementById(l),h=document.getElementById(c);null!=u&&ValidatorEnable(u,!0),null!=h&&ValidatorEnable(h,!0)}function hl_egroups_rdoNotSubscribed_CheckedChanged(e,t,i,n,o){document.getElementById(e).style.fontWeight="normal",document.getElementById(t).disabled=!0,document.getElementById(i).disabled=!0,document.getElementById(n).disabled=!0,document.getElementById(o).disabled=!0}function hl_egroups_moderationQueue_onPendingRejectClick(e,t,i,n,o,a,s,r,l,c,d,u,h,p){$(".has-error").removeClass("has-error"),$("#"+h).hide(),$("#"+t).val(e),$("#"+i).val($("#"+n).val()),$("#"+s).val(""),$("#"+a).length&&hl_common_ui_tinymce.setTextValue(a,$("#"+o).val()),r?($("#"+l).show(),c?($("#"+d).show(),$("#"+u).hide()):($("#"+d).hide(),$("#"+u).show())):$("#"+l).hide(),$("#"+p).modal("show")}function hl_egroups_moderationRejectionAction_OnBtnRejectClick(e,t,i,n){var o=!hl_common_ui_tinymce.isActiveEditorEmpty($("#"+i).attr("for")),a=hl_common_ui_inputValid("#"+e,"","")&&hl_common_ui_inputValid("#"+t,"","")&&o;return a&&hl_directory_profile_hideEditMode(n),a}function hl_egroups_moderationRejectActionNoEmail_OnBtnRejectClick(e,t){var i=hl_common_ui_inputValid("#"+e,"","");return i&&hl_directory_profile_hideEditMode(t),i}!function(n){n.fn.hl_directory_mentoringProfile_profileRows=function(e){var i=n.extend({tenantKey:"",authToken:"",displayType:"",userKey:"",page:1,pageSize:25,rowSummary:"",confirmOK:"OK",confirmCancel:"Cancel"},e||{}),t=n(this);!function(){{var e;"MentoringRelationships"!=i.displayType||0<(e=n("div#mentoring-grid-row-summary")).length&&e.replaceWith('<div id="mentoring-grid-row-summary" class="text-muted count">'+i.rowSummary+"</div>")}!function(){"MentoringRelationships"!=i.displayType&&"MentorProfile"!=i.displayType&&"MenteeProfile"!=i.displayType||(t.find("button.complete-mentoring-relationship").on("click",function(){var e=n(this).data("mentormenteekey");hl_mentoringProfile.updateRelationship(i.displayType,"complete",e,i.userKey)}),t.find("a.abandon-mentoring-relationship").on("click",function(){var e=n(this).data("mentormenteekey");hl_mentoringProfile.updateRelationship(i.displayType,"abandon",e,i.userKey)}),t.find(".hide-from-mentoring-profile").on("click",function(){var e=n(this).data("mentormenteekey");hl_mentoringProfile.updateProfileVisibility(i.displayType,e,i.userKey,!0)}),t.find(".shotormenteekey");hl_mentoringProfile.updateProfileVisibility(i.displayType,e,i.userKey,!1)}));"MentoringRequests"==i.displayType&&(t.find("button.cancel-mentoring-request").on("click",function(){var e=n(this).data("mentormenteekey");hl_mentoringProfile.updateRelationship(i.displayType,"delete",e,i.userKey)}),t.find("button.accept-mentoring-request").on("click",function(){var e=n(this).data("mentormenteekey");hl_mentoringProfile.updateRelationship(i.displayType,"accept",e,i.userKey)}),t.find("a.decline-mentoring-request").on("click",function(){var e=n(this).data("mentormenteekey");hl_mentoringProfile.updateRelationship(i.displayType,"decline",e,i.userKey)}));"MentorProfile"!=i.displayType&&"MenteeProfile"!=i.displayType||t.find(".confirm-hide-from-mentoring-profile").on("click",function(){var e=n(this).data("mentormenteekey");$hideConfirmModal=n("#hide-from-profile-modal"),$okButton=$hideConfirmModal.find("button.hide-from-profile-ok"),$okButton.off("click"),$okButton.on("click",function(){$hideConfirmModal.modal("hide"),hl_mentoringProfile.updateProfileVisibility(i.displayType,e,i.userKey,!0)}),$hideConfirmModal.modal("show")});"MentoringRelationships"==i.displayType&&(n("input.profileVisibility").each(function(){var e=n(this);e.bootstrapSwitch({state:e.is(":checked")})}),n("input.profileVisibility").on("switchChange.bootstrapSwitch",function(){var e=n(this),t=e.data("mentormenteekey");hl_mentoringProfile.updateProfileVisibility(i.displayType,t,i.userKey,!e.bootstrapSwitch("state"))}),t.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),postUrl=n(this).attr("href"),pushStateUrl=window.location.pathname+postUrl.substr(postUrl.indexOf("?"),postUrl.length),void 0===history.pushState&&(location.href=pushStateUrl),n.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:postUrl,success:function(e){history.pushState(e,null,pushStateUrl),t.replaceWith(e),hl_common_ui_(r){r.fn.hl_directory_manageSettings=function(e){var t,i=r.extend({dirtySelector:".dirtyCheck",settingsDropDownId:{},topSaveButtonId:{},bottomSaveButtonId:{},hiddenSaveButtonId:{}},e||{});function n(){isDirty?(r(this).val(),hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(s,a,"dirty-data-modal","Proceed","Cancel",!0,500,300,"Warning: Unsaved Changes!","You have changed form data without saving. All of your changes will be lost.<p>Are you sure you want to proceed?</p>")):o(r(i.settingsDropDownId+" option:selected").val())}function o(e){switch(r("#Notifications, #Security, #Privacy, #Email, #Messaging, #RSSFeeds, #Subscriptions").hide(),e){case"Notifications":r("#Notifications").show();break;case"Security":r("#Security").show();break;case"Privacy":r("#Privacy").show();break;case"Email":r("#Email").show();break;case"Messaging":r("#Messaging").show();break;case"RSSFeeds":r("#RSSFeeds").show();break;case"Subscriptions":r("#Subscriptions").show()}"Security"==e?r(i.bottomSaveButtonId).hide():r(i.bottomSaveButtonId).show(),t=e}function a(){r(i.settingsDropDownId).val(t),o(t)}function s(){r("#"+t).clean_form(),o(r(i.settingsDropDownId+" option:selected").val())}r(i.settingsDropDownId).change(n),n.apply(i.settingsDropDownId),r(function(){r("#NotificationTabs").tabs()}),r(function(){r(i.dirtySelector).dirty_form({includeHidden:!0,includeRadio:!0,includeCheckbox:!0}).dirty(function(e,t){isDirty=!0}).clean(function(e,t){isDirty=!1}),r("a").not(r(i.dirtySelector).find("a")).not(".actionButton").dirty_stopper()})}}(jQuery),function(h){h.fn.hl_ui_directory_mentorsYouShouldKnow=function(e){var l=h.extend({controlId:""},e||{}),c="/higherlogic/ui/mvc/directory/mentoring",d=h(l.controlId);function u(){d.find(".add-mentor").click(i),d.find(".add-mentee").click(n),d.find(".ignore-mentor-mentee").click(t)}function t(){var e={ControlId:l.controlId.substr(1),ToContactKey:h(this).closest("div.row").data("tocontactkey"),FromContactKey:d.data("fromcontactkey"),IsRequestingAMentor:!0,CommunityKey:d.data("communitykey"),FilterBy:l.filterBy};hl_common_ui_blockUI(),HigherLogic.Util.post(c+"/IgnoreSuggestion",JSON.stringify(e),"html").done(function(e){d.find("div.Content").html(e),hl_common_ui_unBlockUI(),u()})}function i(){var t=h(this).closest("div.row").find("a.name").text(),i=h(this).closest("div.row").data("tocontactkey"),n=d.data("fromcontactkey"),o=h("#modalMentorMenteeRequest");o.find(".modal-body input.name").val(""),o.find(".modal-body input.subject").val(""),o.find(".modal-body div.mimic-textarea.message").html(""),o.find(".modal-body textarea.additional-message").val("");var e={ToContactKey:i,mentorMenteeMessageTemplateCode:"MentorRequest",fromContactKey:n};hl_common_ui_blockUI(),HigherLogic.Util.post(c+"/GetMentorMenteeModalInfo",JSON.stringify(e)).done(function(e){o.modal("show"),o.find(".modal-body input.name").val(t),o.find(".modal-body input.subject").val(e.SubjectPreview),o.find(".modal-body div.mimic-textarea.message").html(e.HtmlBodyPreview),o.find(".modal-content").find(".mentor-mentee-title").text(o.find(".modal-content").find(".mentor-mentee-title").data("mentortitle")),o.data("tocontactkey",i),o.data("fromcontactkey",n),o.data("messagetemplatecode","MentorRequest"),hl_common_ui_unBlockUI()})}function n(){var t=h(this).closest("div.row").find("a.name").text(),i=h(this).closest("div.row").data("tocontactkey"),n=d.data("fromcontactkey"),o=h("#modalMentorMenteeRequest");o.find(".modal-body input.name").val(""),o.find(".modal-body input.subject").val(""),o.find(".modal-body div.mimic-textarea.message").html(""),o.find(".modal-body textarea.additional-message").val("");var e={ToContactKey:i,mentorMenteeMessageTemplateCode:"MenteeRequest",fromContactKey:n};hl_common_ui_blockUI(),HigherLogic.Util.post(c+"/GetMentorMenteeModalInfo",JSON.stringify(e)).done(function(e){o.modal("show"),o.find(".modal-body input.name").val(t),o.find(".modal-body input.subject").val(e.SubjectPreview),o.find(".modal-body div.mimic-textarea.message").html(e.HtmlBodyPreview),o.find(".modal-content").find(".mentor-mentee-title").text(o.find(".modal-content").find(".mentor-mentee-title").data("menteetitle")),o.data("tocontactkey",i),o.data("fromcontactkey",n),o.data("messagetemplatecode","MenteeRequest"),hl_common_ui_unBlockUI()})}function o(){var t,e,i,n,o,a,s,r;"MentorRequest"===h("#modalMentorMenteeRequest").data("messagetemplatecode")?(o=h("#modalMentorMenteeRequest"),a=o.data("tocontactkey"),s=o.data("fromcontactkey"),r={ControlId:l.controlId.substr(1),MentorMenteeMessageTemplateCode:o.data("messagetemplatecode"),ToContactKey:a,FromContactKey:s,MentorUserKey:a,MenteeUserKey:s,SenderMessageText:o.find(".modal-body textarea.additional-message").val(),IsRequestingAMentor:!0,CommunityKey:d.data("communitykey"),FilterBy:l.filterBy},hl_common_ui_blockUI(),HigherLogic.Util.post(c+"/RequestMentorMentee",JSON.stringify(r),"html").done(function(e){h("#"+h(e).closest("div.control-id").data("controlid")).find("div.Content").html(e),hl_common_ui_unBlockUI(),o.modal("hide"),u()})):(t=h("#modalMentorMenteeRequest"),e=t.data("tocontactkey"),i=t.data("fromcontactkey"),n={ControlId:l.controlId.substr(1),MentorMenteeMessageTemplateCode:t.data("messagetemplatecode"),ToContactKey:e,FromContactKey:i,MentorUserKey:i,MenteeUserKey:e,SenderMessageText:t.find(".modal-body textarea.additional-message").val(),IsRequestingAMentor:!0,CommunityKey:d.data("communitykey"),FilterBy:l.filterBy},hl_common_ui_blockUI(),HigherLogic.Util.post(c+"/RequestMentorMentee",JSON.stringify(n),"html").done(function(e){h("#"+h(e).closest("div.control-id").data("controlid")).find("div.Content").html(e),hl_common_ui_unBlockUI(),t.modal("hide"),u()}))}h("#modalMentorMenteeRequest").find("a.request-mentor-mentee").click(o),u()}}(jQuery),function(r){r.fn.hl_ui_directory_peopleYouShouldKnow=function(e){var t=r.extend({controlId:""},e||{}),i="/higherlogic/ui/mvc/directory/ContactLikeness",n=r(t.controlId);function o(){n.find(".update-friend .add-contact").click(s),n.find(".update-friend .ignore-contact").click(a)}function a(){var e={ToContactKey:r(this).data("contactkey"),ConrolId:t.controlId.substr(1),CommunityKey:n.data("communitykey")};hl_common_ui_blockUI(),HigherLogic.Util.post(i+"/IgnoreContact",JSON.stringify(e),"html").done(function(e){n.find("div.Content").html(e),hl_common_ui_unBlockUI(),o()})}function s(){var e={ToContactKey:r(this).data("contactkey"),ConrolId:t.controlId.substr(1),CommunityKey:n.data("communitykey")};hl_common_ui_blockUI(),HigherLogic.Util.post(i+"/RequestContact",JSON.stringify(e),"html").done(function(e){n.find("div.Content").html(e),hl_common_ui_unBlockUI(),o()})}o()}}(jQuery),function(l,c){l.fn.hl_ui_volunteerAdmin_ManageApprovals=function(e){var o=l.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:""},e||{}),a=l(this);function n(){a.find(".volunteer-sorty-by").bind("change",function(e){hl_common_ui_blockUI();var t=l(this).find("option:selected").attr("link");l.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){s(e),hl_common_ui_unBlockUI()}})}),a.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),l.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:l(this).attr("href"),success:function(e){s(e),hl_common_ui_unBlockUI()}})}),a.find("#show-modal-reject-selected").bind("click",function(e){l("#modal-reject-selected").find(".modal-body").html("");var n=!1;a.find(".hl-checkbox").each(function(e,t){var i;l(this).hasClass("btn-success")&&(i="<div class='approve-to-send' data-key='"+l(this).attr("data-key")+"'>"+l(this).attr("data-name")+"</div>",l("#modal-reject-selected").find(".modal-body").append(i),n=!0)}),1==n&&(l("#reject-selected").off("click.rejectedselected"),l("#reject-selected").on("click.rejectedselected",function(e){var i={};i.VolunteerOpportunityKey=o.volunteerOpportunityKey,null==i.ContactKeys&&(i.ContactKeys=[]),a.find(".hl-checkbox").each(function(e,t){l(this).hasClass("btn-success")&&i.ContactKeys.push(l(this).attr("data-key"))}),hl_common_ui_blockUI(),l.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/RejectApprovals/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){r()}})}),l("#modal-reject-selected").modal("show"))}),a.find("#show-modal-awardpoints-selected").bind("click",function(e){var t=l(this).parents().find(".tab-pane:visible"),i=[];t.find(".hl-checkbox").each(function(e,t){l(this).hasClass("btn-success")&&i.push(l(this).attr("data-key"))});var n={};n.contactkeys=i,n.volunteeropportunitykey=o.volunteerOpportunityKey,l.fn.hl_ui_volunteer_awardpointsmodal.showAwardPointsModal(n,r)}),a.find("#select-all").bind("click",function(e){var t=l(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),l.each(a.find(".hl-checkbox"),function(){l(this).removeClass("btn-default"),l(this).addClass("btn-success"),hl_common_util_enableBtnOnChange(this,"show-modal-reject-selected",!0,a)})):(t.removeClass("btn-success"),t.addClass("btn-default"),l.each(a.find(".hl-checkbox"),function(){l(this).removeClass("btn-success"),l(this).addClass("btn-default"),hl_common_util_enableBtnOnChange(this,"show-modal-reject-selected",!1,a)}))}),a.find(".hl-checkbox").bind("click",function(e){var t=l(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),hl_common_util_enableBtnOnChange(t,"show-modal-reject-selected",!0,a)):(t.removeClass("btn-success"),t.addClass("btn-default"),hl_common_util_enableBtnOnChange(t,"show-modal-reject-selected",!1,a))}),a.find("#filter-approvals-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){a.find("#filter-approvals-results input,.tagit-new").hide(),i(a.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){a.find("#filter-approvals-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={ApprovalsTerm:e.term,VolunteerOpportunityKey:o.volunteerOpportunityKey};l.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersApprovalsSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<l("#filter-approvals-results").length&&(l("#filter-approvals-results").find("input").data("ui-autocomplete")._renderItem=function(e,t){return l("<li></li>").data("item.autocomplete",t).append(l("<a></a>").html(t.label)).appendTo(e)}),t(l.map(e,function(e){var t=e.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),a.find("#filter-approvals-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),a.find("#filter-approvals-results input").attr("placeholder","Enter a Name or Company")}function i(e){hl_common_ui_blockUI();var t=1;""==e&&(t=l(".pagination-container li.active a").html());var i=a.find(".volunteer-sorty-by").find("option:selected").attr("link")+"&ApprovedPageNumber="+t+"&ApprovedContactFilter="+e;l.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){a.find("#volunteer-approved-rows").replaceWith(l(e).filter("div#volunteer-approved-rows")),a.find(".pagination-container").replaceWith(l(e).filter(".pagination-container")),a.find(".manage-vol-select-all").replaceWith(l(e).find(".manage-vol-select-all")),n(),hl_common_ui_unBlockUI()}})}function s(e){a.html(e),n()}function r(){var e=c.location.href,t=hl_common_util_getParameterByName("selectedtab");null!=t&&(e=e.replace("selectedtab="+t,"selectedtab=approved")),c.location.href=e}n()}}(jQuery,window),function(r,l){r.fn.hl_ui_volunteerAdmin_ManageApprovalsAwaitingRating=function(e){var n=r.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:""},e||{}),o=r(this);function t(e){var i={};i.Rating=e;var n=!1;null==i.ContactKeys&&(i.ContactKeys=[]),o.find(".hl-checkbox").each(function(e,t){r(this).hasClass("btn-success")&&(i.ContactKeys.push(r(this).attr("data-key")),i.VolunteerOpportunityKey=r(this).attr("data-volunteer-opportunity-key"),n=!0)}),n&&(hl_common_ui_blockUI(),r.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/RateVolunteers/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){!function(){var e=l.location.href,t=hl_common_util_getParameterByName("selectedtab");null!=t&&(e=e.replace("selectedtab="+t,"selectedtab=managevolunteers"));l.location.href=e}()}}))}function a(){o.find(".volunteer-sorty-by").bind("change",function(e){hl_common_ui_blockUI();var t=r(this).find("option:selected").attr("link");r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){s(e),hl_common_ui_unBlockUI()}})}),o.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r(this).attr("href"),success:function(e){s(e),hl_common_ui_unBlockUI()}})}),o.find("#volunteer-rate-5").bind("click",function(e){t(5,r(this))}),o.find("#volunteer-rate-4").bind("click",function(e){t(4,r(this))}),o.find("#volunteer-rate-3").bind("click",function(e){t(3,r(this))}),o.find("#volunteer-rate-2").bind("click",function(e){t(2,r(this))}),o.find("#volunteer-rate-1").bind("click",function(e){t(1,r(this))}),o.find("#volunteer-did-not-attend").bind("click",function(e){t(0,r(this))}),o.find("#select-all").bind("click",function(e){var t=r(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),r.each(o.find(".hl-checkbox"),function(){r(this).removeClass("btn-default"),r(this).addClass("btn-success"),hl_common_util_enableBtnOnChange(this,"volunteer-rate-5",!0,o)})):(t.removeClass("btn-success"),t.addClass("btn-default"),r.each(o.find(".hl-checkbox"),function(){r(this).removeClass("btn-success"),r(this).addClass("btn-default"),hl_common_util_enableBtnOnChange(this,"volunteer-rate-5",!1,o)}))}),o.find(".hl-checkbox").bind("click",function(e){var t=r(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),hl_common_util_enableBtnOnChange(t,"volunteer-rate-5",!0,o)):(t.removeClass("btn-success"),t.addClass("btn-default"),hl_common_util_enableBtnOnChange(t,"volunteer-rate-5",!1,o))}),o.find("#filter-rating-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){o.find("#filter-rating-results input,.tagit-new").hide(),i(o.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){o.find("#filter-rating-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={RatingTerm:e.term,VolunteerOpportunityKey:n.volunteerOpportunityKey};r.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersRatingSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<r("#filter-rating-results").length&&(r("#filter-rating-results").find("input").data("ui-autocomplete")._renderItem=function(e,t){return r("<li></li>").data("item.autocomplete",t).append(r("<a></a>").html(t.label)).appendTo(e)}),t(r.map(e,function(e){var t=e.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),o.find("#filter-rating-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),o.find("#filter-rating-results input").attr("placeholder","Enter a Name or Company")}function i(e){hl_common_ui_blockUI();var t=1;""==e&&(t=r(".pagination-container li.active a").html());var i=o.find(".volunteer-sorty-by").find("option:selected").attr("link")+"&ApprovedAwaitingRatingPageNumber="+t+"&RatingContactFilter="+e;r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){o.find("#volunteer-rating-rows").replaceWith(r(e).filter("div#volunteer-rating-rows")),o.find(".pagination-container").replaceWith(r(e).filter(".pagination-container")),o.find(".manage-vol-select-all").replaceWith(r(e).find(".manage-vol-select-all")),a(),hl_common_ui_unBlockUI()}})}function s(e){o.html(e),a()}a()}}(jQuery,window),function(c,d){c.fn.hl_ui_volunteerAdmin_ManageAwaiting=function(e){var a=c.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:""},e||{}),o=c(this),s="/higherlogic/ui/mvc/directory/volunteeradmin";function n(){o.find(".volunteer-sorty-by").bind("change",function(e){hl_common_ui_blockUI();var t=c(this).find("option:selected").attr("link");c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){r(e),hl_common_ui_unBlockUI()}})}),o.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:c(this).attr("href"),success:function(e){r(e),hl_common_ui_unBlockUI()}})}),o.find(".view-result").bind("click",function(e){}),c.each(c("a.show-application-results-ata-contactkey"),o={};o.EntityKey=i,o.UserKey=n,o.HeaderTitle="Volunteer Opportunity Application",o.ItemKey=a.volunteerOpportunityKey,c(this).bind("click",function(e){hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(o),dataType:"html",url:"/higherlogic/ui/mvc/common/formbuilder/ViewResult/",success:function(e){c("#modal-view-application").find(".modal-body").html(e),c("#modal-view-application").modal("show"),hl_common_ui_unBlockUI()}})})}),o.find("#show-modal-approve-assignroles-selected").bind("click",function(e){var i=[];o.find(".hl-checkbox").each(function(e,t){c(this).hasClass("btn-success")&&i.push(c(this).attr("data-key"))});var t={};t.ContactKeys=i,t.VolunteerOpportunityKey=a.volunteerOpportunityKey,t.ConfirmButtonTitle="Assign Role, Approve and Confirm",function(t){var i=t.VolunteerOpportunityKey,n=c("#"+i+"-vol-assign-roles-modal");0<n.length&&n.remove();hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(t),dataType:"html",url:s+"/GetApproveAndAssignRoleModal",success:function(e){c("body").append(e),(n=c("#"+i+"-vol-assign-roles-modal")).find("#volunteer-roles").bind("change",function(){n.find(".volunteer-role-ref-selector").val(c(this).val())}),n.find("#assign-roles").bind("click",function(){var i=t;i.VolunteerRoleRefs=[],n.find(".volunteer-role-ref-selector").each(function(e,t){i.VolunteerRoleRefs.push(c(this).val())}),hl_common_ui_blockUI(),c.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ApproveApplications/",type:"POST",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){l()}})}),c("#"+i+"-vol-assign-roles-modal").modal("show"),hl_common_ui_unBlockUI()}})}(t)}),o.find("#show-modal-reject-awaiting-selected").bind("click",function(e){c("#modal-reject-selected").find(".modal-body").html("");var n=!1;o.find(".hl-checkbox").each(function(e,t){var i;c(this).hasClass("btn-success")&&(i="<div class='approve-to-send' data-key='"+c(this).attr("data-key")+"'>"+c(this).attr("data-name")+"</div>",c("#modal-reject-selected").find(".modal-body").append(i),n=!0)}),1==n&&(c("#reject-selected").off("click.rejectselected"),c("#reject-selected").on("click.rejectselected",function(e){var i={};i.VolunteerOpportunityKey=a.volunteerOpportunityKey,null==i.ContactKeys&&(i.ContactKeys=[]),o.find(".hl-checkbox").each(function(e,t){c(this).hasClass("btn-success")&&i.ContactKeys.push(c(this).attr("data-key"))}),hl_common_ui_blockUI(),c.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/RejectApprovals/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){l()}})}),c("#modal-reject-selected").modal("show"))}),o.find("#show-modal-approve-selected").bind("click",function(e){c("#modal-approve-selected").find(".modal-body").html("");var n=!1;o.find(".hl-checkbox").each(function(e,t){var i;c(this).hasClass("btn-success")&&(i="<div class='approve-to-send' data-key='"+c(this).attr("data-key")+"'>"+c(this).attr("data-name")+"</div>",c("#modal-approve-selected").find(".modal-body").append(i),n=!0)}),1==n&&(c("#approve-applications").off("click.approveapplications"),c("#approve-applications").on("click.approveapplications",function(e){var i={};i.VolunteerOpportunityKey=a.volunteerOpportunityKey,null==i.ContactKeys&&(i.ContactKeys=[]),o.find(".hl-checkbox").each(function(e,t){c(this).hasClass("btn-success")&&i.ContactKeys.push(c(this).attr("data-key"))}),hl_common_ui_blockUI(),c.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ApproveApplications/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){l()}})}),c("#modal-approve-selected").modal("show"))}),o.find("#select-all").bind("click",function(e){var t=c(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),c.each(o.find(".hl-checkbox"),function(){c(this).removeClass("btn-default"),c(this).addClass("btn-success"),hl_common_util_enableBtnOnChange(this,"show-modal-approve-selected",!0,o)})):(t.removeClass("btn-success"),t.addClass("btn-default"),c.each(o.find(".hl-checkbox"),function(){c(this).removeClass("btn-success"),c(this).addClass("btn-default"),hl_common_util_enableBtnOnChange(this,"show-modal-approve-selected",!1,o)}))}),o.find(".hl-checkbox").bind("click",function(e){var t=c(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),hl_common_util_enableBtnOnChange(t,"show-modal-approve-selected",!0,o)):(t.removeClass("btn-success"),t.addClass("btn-default"),hl_common_util_enableBtnOnChange(t,"show-modal-approve-selected",!1,o))}),o.find("#filter-awaiting-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){o.find("#filter-awaiting-results input,.tagit-new").hide(),i(o.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){o.find("#filter-awaiting-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={AwaitingTerm:e.term,VolunteerOpportunityKey:a.volunteerOpportunityKey};c.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersAwaitingSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<c("#filter-awaiting-results").length&&(c("#filter-awaiting-results").find("input").data("ui-autocomplete")._renderItem=function(e,t){return c("<li></li>").data("item.autocomplete",t).append(c("<a></a>").html(t.label)).appendTo(e)}),t(c.map(e,function(e){var t=e.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),o.find("#filter-awaiting-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),o.find("#filter-awaiting-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){o.find("#filter-awaiting-results input,.tagit-new").hide(),i(o.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){o.find("#filter-awaiting-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={AwaitingTerm:e.term,VolunteerOpportunityKey:a.volunteerOpportunityKey};c.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersAwaitingSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<c("#filter-awaiting-results").length&&(c("#filter-awaiting-results").find("input").data("ui-autocomplete")._renderItem=function(e,t){return c("<li></li>").data("item.autocomplete",t).append(c("<a></a>").html(t.label)).appendTo(e)}),t(c.map(e,function(e){var t=e.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),o.find("#filter-awaiting-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),o.find("#filter-awaiting-results input").attr("placeholder","Enter a Name or Company")}function i(e){hl_common_ui_blockUI();var t=1;""==e&&(t=c(".pagination-container li.active a").html());var i=o.find(".volunteer-sorty-by").find("option:selected").attr("link")+"&AwaitingPageNumber="+t+"&AwaitingContactFilter="+e;c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){o.find("#volunteer-awaiting-rows").replaceWith(c(e).filter("div#volunteer-awaiting-rows")),o.find(".pagination-container").replaceWith(c(e).filter(".pagination-container")),o.find(".manage-vol-select-all").replaceWith(c(e).find(".manage-vol-select-all")),n(),hl_common_ui_unBlockUI()}})}function r(e){o.html(e),n()}function l(){var e=d.location.href,t=hl_common_util_getParameterByName("selectedtab");null!=t&&(e=e.replace("selectedtab="+t,"selectedtab=approval")),d.location.href=e}n()}}(jQuery,window),function(r){r.fn.hl_ui_volunteerAdmin_ManageCompleted=function(e){var n=r.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:""},e||{}),o=r(this);function a(){o.find(".volunteer-sorty-by").bind("change",function(e){hl_common_ui_blockUI();var t=r(this).find("option:selected").attr("link");r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){s(e),hl_common_ui_unBlockUI()}})}),o.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r(this).attr("href"),success:function(e){s(e),hl_common_ui_unBlockUI()}})}),o.find("#select-all").bind("click",function(e){var t=r(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),r.each(o.find(".hl-checkbox"),function(){r(this).removeClass("btn-default"),r(this).addClass("btn-success"),hl_common_util_enableBtnOnChange(this,"manage-completed-email",!0,o)})):(t.removeClass("btn-success"),t.addClass("btn-default"),r.each(o.find(".hl-checkbox"),function(){r(this).removeClass("btn-success"),r(this).addClass("btn-default"),hl_common_util_enableBtnOnChange(this,"manage-completed-email",!1,o)}))}),o.find(".hl-checkbox").bind("click",function(e){var t=r(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),hl_common_util_enableBtnOnChange(t,"manage-completed-email",!0,o)):(t.removeClass("btn-success"),t.addClass("btn-default"),hl_common_util_enableBtnOnChange(t,"manage-completed-email",!1,o))}),o.find("#filter-completed-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){o.find("#filter-completed-results input,.tagit-new").hide(),i(o.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){o.find("#filter-completed-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={CompletedTerm:e.term,VolunteerOpportunityKey:n.volunteerOpportunityKey};r.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersCompletedSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<r("#filter-completed-results").length&&(r("#filter-completed-results").find("input").data("ui-autocomplete")._renderItem=function(e,t){return r("<li></li>").data("item.autocomplete",t).append(r("<a></a>").html(t.label)).appendTo(e)}),t(r.map(e,function(e){var t=e.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),o.find("#filter-completed-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),o.find("#filter-completed-results input").attr("placeholder","Enter a Name or Company")}function i(e){hl_common_ui_blockUI();var t=1;""==e&&(t=r(".pagination-container li.active a").html());var i=o.find(".volunteer-sorty-by").find("option:selected").attr("link")+"&CompletedPageNumber="+t+"&CompletedContactFilter="+e;r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){o.find("#volunteer-completed-rows").replaceWith(r(e).filter("div#volunteer-completed-rows")),o.find(".pagination-container").replaceWith(r(e).filter(".pagination-container")),o.find(".manage-vol-select-all").replaceWith(r(e).find(".manage-vol-select-all")),a(),hl_common_ui_unBlockUI()}})}function s(e){o.html(e),a()}a()}}(jQuery,window),function(h,p){h.fn.hl_ui_volunteerAdmin_ManageInvitations=function(e){var s=h.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:""},e||{}),r=h(this),c="/higherlogic/ui/mvc/directory/volunteeradmin";function n(){r.find(".volunteer-sorty-by").bind("change",function(e){hl_common_ui_blockUI();var t=h(this).find("option:selected").attr("link");h.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){u(e),hl_common_ui_unBlockUI()}})}),r.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),h.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:h(this).attr("href"),success:function(e){u(e),hl_common_ui_unBlockUI()}})}),r.find("#show-modal-resend-invitations-selected").bind("click",function(e){h("#modal-resend-invitations-selected").find(".modal-body").html("");var n=!1;r.find(".hl-checkbox").each(function(e,t){var i;h(this).hasClass("btn-success")&&(i="<div class='invitation-to-send' data-key='"+h(this).attr("data-key")+"'>"+h(this).attr("data-name")+"</div>",h("#modal-resend-invitations-selected").find(".modal-body").append(i),n=!0)}),1==n&&(h("#resend-invitations").off("click.resendinvitations"),h("#resend-invitations").on("click.resendinvitations",function(e){var i={};i.VolunteerOpportunityKey=s.volunteerOpportunityKey,null==i.Invitations&&(i.Invitations=[]),r.find(".hl-checkbox").each(function(e,t){h(this).hasClass("btn-success")&&i.Invitations.push(h(this).attr("data-key"))}),hl_common_ui_blockUI(),h.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/InviteOthers/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){l()}})}),h("#modal-resend-invitations-selected").modal("show"))}),r.find("#select-all").bind("click",function(e){var t=h(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),h.each(r.find(".hl-checkbox"),function(){h(this).removeClass("btn-default"),h(this).addClass("btn-success"),hl_common_util_enableBtnOnChange(this,"show-modal-resend-invitations-selected",!0,r)})):(t.removeClass("btn-success"),t.addClass("btn-default"),h.each(r.find(".hl-checkbox"),function(){h(this).removeClass("btn-success"),h(this).addClass("btn-default"),hl_common_util_enableBtnOnChange(this,"show-modal-resend-invitations-selected",!1,r)}))}),r.find(".hl-checkbox").bind("click",function(e){var t=h(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),hl_common_util_enableBtnOnChange(t,"show-modal-resend-invitations-selected",!0,r)):(t.removeClass("btn-success"),t.addClass("btn-default"),hl_common_util_enableBtnOnChange(t,"show-modal-resend-invitations-selected",!1,r))}),r.find("#opportunity-find-invite-others-modal").bind("click",function(e){var t={Invitations:[],SaveButtonText:"Invite Selected"};!function(e){var a=h("#vol-add-edit-invite-others-modal");0<a.length&&a.remove();hl_common_ui_blockUI(),h.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(e),dataType:"html",url:c+"/GetOpportunityAddEditInviteOthersModal/",success:function(e){h("body").append(e);var n=(a=h("#vol-add-edit-invite-others-modal")).find("#error-message"),o=n.find(".details");o.html(""),n.hide(),a.find("#volunteer-add-others-selected").bind("click",function(){var i={};i.Invitations=r.find("#opportunity-preselected").data("invitations"),i.VolunteerOpportunityKey=s.volunteerOpportunityKey,null==i.Invitations&&(i.Invitations=[]),h(".tagit-label").each(function(e,t){i.Invitations.push(h(t).attr("id"))}),hl_common_ui_blockUI(),h.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/InviteOthers/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){l()}})}),h("#vol-add-edit-invite-others-modal").modal("show"),a.find("#mytags").tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,t){var i={name:e.term};console.log("begin search "+performance.now()),h.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/FindAndInviteOthers/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length?(o.html(""),n.hide(),t(h.map(e,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:""==e.FirstName?e.LastName:e.FirstName+" "+e.LastName,label:t}}))):(o.html("Name not found in the directory."),n.show()),a.find("#mytags").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),a.find("#mytags input").attr("placeholder","Enter a Name or Email"),hl_common_ui_unBlockUI()}})}(t)}),r.find("#opportunity-add-to-volunteer-pool-modal").bind("click",function(e){!function(){var i=h("#volunteer-add-to-volunteer-pool-modal");0<i.length&&i.remove();var e={};e.VolunteerOpportunityKey=s.volunteerOpportunityKey,hl_common_ui_blockUI(),h.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(e),dataType:"html",url:c+"/GetOpportunityAddToVolunteerPoolModal/",success:function(e){h("body").append(e);var t=(i=h("#volunteer-add-to-volunteer-pool-modal")).find("#error-message");t.find(".details").html(""),t.hide(),i.find("#volunteer-add-others-selected").bind("click",function(){var e={};e.Invitations=i.find("#opportunity-preselected-edited").data("invitations"),e.VolunteerOpportunityKey=s.volunteerOppor{url:"/higherlogic/ui/mvc/directory/volunteeradmin/InviteOthers/",type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){l()}})}),i.find("#opportunity-invitations-modal").bind("click",function(e){!function(e){var r=h("#volunteer-add-to-volunteer-pool-modal");{var l;"0"!=r.find("#opportunity-preselected-edited").text()&&(0<(l=h("#vol-add-edit-invite-modal")).length&&l.remove(),hl_common_ui_blockUI(),h.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(e),dataType:"html",url:c+"/GetOpportunityAddEditInviteModal/",success:function(e){h("body").append(e),h("#vol-add-edit-invite-filter-name").keyup(a);var t=(l=h("#vol-add-edit-invite-modal")).find("#error-message");t.find(".details").html(""),t.hide(),l.find(".hl-checkbox").bind("click",function(e){var t=h(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-danger")):(t.removeClass("btn-danger"),t.addClass("btn-default"))}),l.find("#remove-selected").bind("click",function(){var i=[];l.find(".hl-checkbox").each(function(e,t){h(this).hasClass("btn-default")&&i.push(h(this).attr("data-key"))});var n=[];l.find(".hl-checkbox").each(function(e,t){h(this).hasClass("btn-danger")&&n.push(h(this).attr("data-key"))});for(var e=[],t=[],o=0;o<e.length;o++){for(var a=!1,s=0;s<n.length;s++)n[o]==e[o]&&(a=!0);a||t.push(e[o])}r.find("#opportunity-preselected-edited").data("added-invitations",d(t)),r.find("#opportunity-preselected-edited").data("invitations",i),r.find("#opportunity-preselected-edited").text(i.length),h("#vol-add-edit-invite-modal").modal("hide")}),h("#vol-add-edit-invite-modal").modal("show"),hl_common_ui_unBlockUI()}}))}}(i.find("#opportunity-preselected-edited").data("invitations"))}),h("#volunteer-add-to-volunteer-pool-modal").modal("show"),i.find("#opportunity-slider").slider(),i.find("#opportunity-slider").on("slideStop",function(){hl_common_ui_blockUI(),setTimeout(function(){o(i.find("#opportunity-slider").data("slider").getValue(),s.volunteerOpportunityKey,s.volunteerOpportunityTypeKey)},0)}),o(5,s.volunteerOpportunityKey,s.volunteerOpportunityTypeKey)}})}()}),r.find("#filter-invitation-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){r.find("#filter-invitation-results input,.tagit-new").hide(),i(r.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){r.find("#filter-invitation-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={InvitationTerm:e.term,VolunteerOpportunityKey:s.volunteerOpportunityKey};h.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersInvitationSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<h("#filter-invitation-results").length&&(h("#filter-invitation-results").find("input").data("ui-autocomplete")._renderItem=function(e,t){reture.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),r.find("#filter-invitation-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),r.find("#filter-invitation-results input").attr("placeholder","Enter a Name or Company")}function i(e){hl_common_ui_blockUI();var t=1;""==e&&(t=h(".pagination-container li.active a").html());var i=r.find(".volunteer-sorty-by").find("option:selected").attr("link")+"&InvitationPageNumber="+t+"&InvitationContactFilter="+e;h.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){r.find("#volunteer-invitation-rows").replaceWith(h(e).filter("div#volunteer-invitation-rows")),r.find(".pagination-container").replaceWith(h(e).filter(".pagination-container")),r.find(".manage-vol-select-all").replaceWith(h(e).find(".manage-vol-select-all")),n(),hl_common_ui_unBlockUI()}})}function d(e){for(var t=e.concat(),i=0;i<t.length;++i)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t}function o(e,t,i){var n=h("#volunteer-add-to-volunteer-pool-modal"),o={};o.VolunteerOpportunityKey=t,o.SliderPosition=e,o.Lattitude=0,o.Longitude=0,o.SkillsMultiplier=0,o.Hours=0,o.IsAll=!0,o.CommunityKey="00000000-0000-0000-0000-000000000000",o.Demographics=[],o.VolunteerOpportunityTypeKey=i,h.ajax({url:c+"/GetMatchingContactForVolunteer/",type:"POST",data:JSON.stringify(o),dataType:"json",async:!0,contentType:"application/json; charset=utf-8",success:function(e){var t=n.find("#opportunity-preselected-edited").data("added-invitations");null==t&&(t=[]);var i=d(t.concat(e));n.find("#opportunity-preselected-edited").data("invitations",i),n.find("#opportunity-preselected-edited").text(i.length),hl_common_ui_unBlockUI()}})}function a(){h("#vol-add-edit-invite-modal .volunteer-list-row").hide();var e=h(this).val().trim().toLowerCase();h.each(h("#vol-add-edit-invite-modal .volunteer-list-row a.invitee-display-name"),function(){0<=h(this).text().trim().toLowerCase().indexOf(e)&&h(this).closest(".volunteer-list-row").show()})}function l(){var e,t=r.find(".volunteer-sorty-by").find("option:selected").attr("link");null==t?p.location.reload():(e=t+"&InvitationPageNumber="+h(".pagination-container li.active a").html(),h.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:e,success:function(e){h("#vol-add-edit-invite-others-modal").modal("hide"),h("#modal-resend-invitations-selected").modal("hide"),h("#volunteer-add-to-volunteer-pool-modal").modal("hide"),u(e),hl_common_ui_unBlockUI()}}))}function u(e){r.html(e),n()}n()}}(jQuery,window),function(r,l){r.fn.hl_ui_volunteerAdmin_ManageRejected=function(e){var o=r.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:""},e||{}),a=r(this);function n(){a.find(".volunteer-sorty-by").bind("change",function(e){hl_common_ui_blockUI();var t=r(this).find("option:selected").attr("link");r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){s(e),hl_common_ui_unBlockUI()}})}),a.find(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:r(this).attr("href"),success:function(e){s(e),hl_common_ui_unBlockUI()}})}),a.find("#show-modal-undo-rejected-selected").bind("click",function(e){r("#modal-approve-rejected-selected").find(".modal-body").html("");var n=!1;a.find(".hl-checkbox").each(function(e,t){var i;r(this).hasClass("btn-success")&&(i="<div class='undo-rejected' data-key='"+r(this).attr("data-key")+"'>"+r(this).attr("data-name")+"</div>",r("#modal-approve-rejected-selected").find(".modal-body").append(i),n=!0)}),1==n&&(r("#undo-rejected").off("click.undorejected"),r("#undo-rejected").on("click.undorejected",function(e){var i={};i.VolunteerOpportunityKey=o.volunteerOpportunityKey,null==i.ContactKeys&&(i.ContactKeys=[]),a.find(".hl-checkbox").each(function(e,t){r(this).hasClass("btn-success")&&i.ContactKeys.push(r(this).attr("data-key"))}),hl_common_ui_blockUI(),r.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/UndoRejected/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){!function(){var e=l.location.href,t=hl_common_util_getParameterByName("selectedtab");null!=t&&(e=e.replace("selectedtab="+t,"selectedtab=rejected"));l.location.href=e}()}})}),r("#modal-approve-rejected-selected").modal("show"))}),a.find("#select-all").bind("click",function(e){var t=r(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),r.each(a.find(".hl-checkbox"),function(){r(this).removeClass("btn-default"),r(this).addClass("btn-success"),hl_common_util_enableBtnOnChange(this,"show-modal-undo-rejected-selected",!0,a)})):(t.removeClass("btn-success"),t.addClass("btn-default"),r.each(a.find(".hl-checkbox"),function(){rdal-undo-rejected-selected",!1,a)}))}),a.find(".hl-checkbox").bind("click",function(e){var t=r(this);t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),hl_common_util_enableBtnOnChange(t,"show-modal-undo-rejected-selected",!0,a)):(t.removeClass("btn-success"),t.addClass("btn-default"),hl_common_util_enableBtnOnChange(t,"show-modal-undo-rejected-selected",!1,a))}),a.find("#filter-rejected-results").tagit({singleField:!1,allowSpaces:!0,tagLimit:1,removeConfirmation:!0,afterTagAdded:function(e,t){a.find("#filter-rejected-results input,.tagit-new").hide(),i(a.find(".tagit-label").attr("id"))},afterTagRemoved:function(e,t){a.find("#filter-rejected-results input,.tagit-new").show(),i("")},autocomplete:{source:function(e,t){var i={RejectedTerm:e.term,VolunteerOpportunityKey:o.volunteerOpportunityKey};r.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/ManageVolunteersRejectedSearch/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&(0<r("#filter-rejected-results").length&&(r("#filter-rejected-results").find("input").data("ui-autocomplete")._renderItem=functiodata("item.autocomplete",t).append(r("<a></a>").html(t.label)).appendTo(e)}),t(r.map(e,function(e){var t=e.DisplayName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Email||hl_common_util_stringIsNullOrWhiteSpace(e.Email)?"":'<br><span class="text-muted">('+e.Email+")</span>");return{id:e.ContactKey,value:e.DisplayName,label:"<div class='stacked-block'>"+t+"</div>"}}))),a.find("#filter-rejected-results").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3}}),a.find("#filter-rejected-results input").attr("placeholder","Enter a Name or Company")}function i(e){hl_common_ui_blockUI();var t=1;""==e&&(t=r(".pagination-container li.active a").html());var i=a.find(".volunteer-sorty-by").find("option:selected").attr("link")+"&RejectedPageNumber="+t+"&RejectedContactFilter="+e;r.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:i,success:function(e){a.find("#volunteer-rejected-rows").replaceWith(r(e).filter("div#volunteer-rejected-rows")),a.find(".pagination-container").replaceWith(r(e).filter(".pagination-container")),a.find(".manage-vol-select-all").replaceWith(r(e).find(".manage-vol-select-all")),n(),hl_common_ui_unBlockUI()}})}function s(e){a.html(e),n()}n()}}(jQuery,window),function(s){s.fn.hl_ui_volunteerAdmin_VolunteerLeaderboardList=function(e){var n=s.extend({tenantKey:"",authToken:"",leaderBoardListContainer:"",summaryContactKey:"",uniqueId:""},e||{}),t=s(this),i=s("#leaderboard-ul-list-"+n.uniqueId),o=t.find("#volunteer-leaderboard-sorty-by-"+n.uniqueId);function a(e){e||o.on("change",function(e){hl_common_ui_blockUI();var t=s(this).find("option:selected").attr("link");s.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:t,success:function(e){var t;s("body").scrollTop(0),t=e,i.html(t),a(!0),hl_common_ui_unBlockUI()}})}),i.find("a[class*='leaderboardSummaryBtn-']").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),n.summaryContactKey=s(this).attr("key"),s.ajax({cont; charset=utf-8",type:"GET",dataType:"html",url:s(this).attr("href"),success:function(e){var t=n.summaryContactKey,i=s("#"+t+"-leaderboard-summary-modal");0<i.length&&i.remove(),s("body").append(e),s("#"+t+"-leaderboard-summary-modal").modal("show"),hl_common_ui_unBlockUI()}})})}a(!1)}}(jQuery,window),function(x,S){x.fn.hl_ui_volunteerAdmin_VolunteerOpportunitiesPublicList=function(e){var d=x.extend({tenantKey:"",authToken:"",volunteerOpportunityKey:"",opportunityDetailsContainer:"",showLocationError:!1,dateFormat:"",timeFormat:"",showLocation:!0,showTimeCommitment:!0,showCECredits:!0,showDates:!0,showSignUpDeadline:!0,hidePointsIfZero:!0,showPoints:!0,filterByMicrositeGroup:!0},e||{}),t=x(this),s="/higherlogic/ui/mvc/directory/volunteeradmin",u=x("select#time-commitments-select"),h=x("select#types-select"),p=x("select#demographics-select"),m=x("select#communities-select"),f=x("select#status-select"),g=x("select#opportunity-name-select"),v=t.find("select#opportunity-distance-select"),i=x("#location-error"),n=x("#location-filter-group"),y=x("select#volunteer-sorty-by"),b=x("select#volunteer-opportunities-itemscount"),_=x("select#opportunities-in-list"),o=(x("#opportunity-details-container"),x(this),x("."+d.opportunityDetailsContainer)),a="",r="";function l(e){o.html(e)}function c(e,t){var i=null!=u.val()?"&TimeCommitmentsFilter="+u.val().join(","):"",n=null!=h.val()?"&OpportunityTypesFilter="+h.val().join(","):"",o=null!=p.val()?"&DemographicsFilter="+p.val().join(","):"",a=null!=m.val()?"&CommunitiesFilter="+m.val().join(","):"",s=null!=f.val()?"&OpportunityStatusFilter="+f.val().join(","):"&OpportunityStatusFilter=+",r=null!=g.val()?"&OpportunityNamesFilter="+g.val().join(","):"",l="";null!=v.val()&&0<=v.val()&&(l="&LocationFilter="+v.val());var c="",d=0<_.length?"&ShowOnlyOpportunityOptions="+_.val():"";switch(t){case"sort":c="&ItemsCount="+b.val()+d;break;case"itemscount":c="&sortBy="+y.val()+d;break;case"oppivecreated":c="&ItemsCount="+b.val()+"&sortBy="+y.val()}return e+i+n+o+a+s+r+l+c}function w(){return"ShowPoints="+e.showPoints+"&ShowLocation="+e.showLocation+"&ShowTimeCommitment="+e.showTimeCommitment+"&ShowCECredits="+e.showCECredits+"&ShowDates="+e.showDates+"&ShowSignUpDeadline="+e.showSignUpDeadline+"&HidePointsIfZero="+e.hidePointsIfZero+"&ShowLocationError="+e.showLocationError+"&FilterByMicrositeGroup="+d.filterByMicrositeGroup}function C(){0<i.length&&0<n.length&&(i.fadeOut(),n.removeClass("has-error"))}function k(){0<i.length&&i.hl_accessibility_hide()}y.bind("change",function(e){hl_common_ui_blockUI();var t=w(),i=-1!==x(this).find("option:selected").attr("link").indexOf("?")?"&":"?";a=c(x(this).find("option:selected").attr("link"),"sort")+i+t,r=S.location.pathname+a.substr(a.indexOf("?"),a.length),void 0===history.pushState&&(location.href=r),x.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a,success:function(e){history.pushState(null,null,r),x("body").scrollTop(0),l(e),hl_common_ui_unBlockUI()}})}),x(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI();var t=w(),i=-1!==x(this).attr("href")?"&":"?";a=x(this).attr("href")+i+t,r=S.location.pathname+a.substr(a.indexOf("?"),a.length),void 0===history.pushState&&(location.href=r),x.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a,success:function(e){history.pushState(null,null,r),x("body").scrollTop(0),l(e),hl_common_ui_unBlockUI()}})}),b.bind("change",function(e){hl_common_ui_blockUI();var t=w(),i=-1!==x(this).find("option:selected").attr("link").indexOf("?")?"&":"?";a=c(x(this).find("option:selected").attr("link"),"itemscount")+i+t,r=S.location.pathname+a.substr(a.indexOf("?"),a.length),void 0===history.pushState&&(location.href=r),x.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a,success:function(e){history.pushState(null,null,r),x("body").scrollTop(0),l(e),hl_common_ui_unBlockUI()}})}),_.change(function(){hl_common_ui_blockUI();var e=w(),t=-1!==x(this).find("option:selected").attr("link").indexOf("?")?"&":"?";a=c(x(this).find("option:selected").attr("link"),"oppivecreated")+t+e,r=S.location.pathname+a.substr(a.indexOf("?"),a.length),void 0===history.pushState&&(location.href=r),x.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:a,success:function(e){history.pushState(null,null,r),x("body").scrollTop(0),l(e),hl_common_ui_unBlockUI()}})}),hl_common_util_bindReturnUrl(),t.find(".copy-opportunity").bind("click",function(e){!function(i,e){var n="#modal-confirm-copy-opportunity-"+i,a=x(n);0<a.length&&a.remove();var t={};t.VolunteerOpportunityKey=i,t.Title=e,hl_common_ui_blockUI(),x.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(t),dataType:"html",url:s+"/GetCopyOpportunityModal/",success:function(e){x("body").append(e);var t=(a=x(n)).find("#error-message");t.find(".details").html(""),t.hide(),a.find(".btn-ok").bind("click",function(){hl_common_ui_blockUI(),setTimeout(function(){var o;!function(e){var t=!0,i=!1;if(""==e.find("#opportunity-name").val()&&!(t=hl_common_ui_inputValid("#opportunity-name-label","","")))return e.find("#opportunity-name").focus(),i=!0,t;if(""==e.find("#opportunity-name").val()&&!(t=hl_common_ui_inputValid("#opportunity-volunteers-needed-label","","")))return 0==i&&(e.find("#opportunity-volunteers-needed").focus(),i=!0),t;var n=e.find("#opportunity-start-date"),o=e.find("#opportunity-close-date"),a=e.find("#opportunity-end-date"),s=moment(),r=moment(n.val(),d.dateFormat,!0),l=moment(o.val(),d.dateFormat,!0),c=moment(a.val(),d.dateFormat,!0);e.find("#opportunity-close-date-error-msg").hide(),e.find("#opportunity-start-date-error-msg").hide(),e.find("#opportunity-end-date-error-msg").hide(),e.find("#close-date-container").removeClass("has-error"),e.find("#start-date-container").removeClass("has-error"),e.find("#end-date-container").removeClass("has-error"),o.is(":visible")&&""!=o.val()&&(l.isBefore(s,"day")||l.isSame(r,"day")||l.isSame(c,"day"))&&(0==i&&(e.find("#opportunity-close-date").focus(),i=!0),e.find("#close-date-container").addClass("has-error"),e.find("#opportunity-close-date-error-msg").show(),t=!1);(""==e.find("#opportunity-start-date").val()||r.isBefore(s,"day")||r.isSame(s,"day")||r<=l)&&(0==i&&(e.find("#opportunity-start-date").focus(),i=!0),e.find("#start-date-container").addClass("has-error"),e.find("#opportunity-start-date-error-msg").show(),t=!1);""!=e.find("#opportunity-end-date").val()&&(c.isBefore(s,"day")||c.isSame(s,"day")||c<r||c<=l)&&(0==i&&(e.find("#opportunity-end-date").focus(),i=!0),e.find("#end-date-container").addClass("has-error"),e.find("#opportunity-end-date-error-msg").show(),t=!1);return t}(a)?hl_common_ui_unBlockUI():(hl_common_ui_blockUI(),(o={}).VolunteerOpportunityKey=i,o.Title=a.find("#opportunity-name").val(),o.StartDateTime=a.find("#opportunity-start-date").val(),o.CloseDate=a.find("#opportunity-close-date").val(),o.EndDateTime=a.find("#opportunity-end-date").val(),o.CopyVolunteers=a.find("#switch-copy-volunteers").prop("checked"),o.CopyFromKey=i,x.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(o),dataType:"json",url:s+"/CopyOpportunity/",success:function(e){var t,i=a.find("#error-message"),n=i.find(".details");e.Success?(n.html(""),i.hide(),t=hl_common_util_getParameterByName("CommunityKey"),-1==S.location.href.indexOf("/HigherLogic/Admin")?S.location="/HigherLogic/go.aspx?c=create-volunteer-opportunity&Copy=true&VolunteerOpportunityKey="+e.Message+"&CommunityKey="+t+"&CopyVolunteers="+o.CopyVolunteers+"&CopyFromKey="+o.CopyFromKey+"&ReturnUrl="+S.location.href:S.location="/HigherLogic/Admin/Volunteer/AddOpportunity.aspx?Copy=true&VolunteerOpportunityKey="+e.Message+"&CommunityKey="+t+"&CopyVolunteers="+o.CopyVolunteers+"&CopyFromKey="+o.CopyFromKey+"&ReturnUrl="+S.location.href):(n.html(e.Message),i.show(),hl_common_ui_unBlockUI())}}))},0)}),a.find(".opportunity-date-picker").datetimepicker({format:d.dateFormat,pickTime:!1,showToday:!1,minDate:moment(),useCurrent:!1}),a.find(".opportunity-date-picker-close").datetimepicker({format:d.dateFormat,pickTime:!1,showToday:!0,minDate:moment().add(-1,"day"),useCurrent:!1}),a.find(".bootstrap-switch-container input").bootstrapSwitch(),a.modal("show"),hl_common_ui_unBlockUI()}})}(x(this).attr("data-itemkey"),x(this).attr("data-itemtitle"))}),!d.showLocationError||0<i.length&&0<n.length&&(i.show(),i.hl_accessibility_show(),setTimeout(C,1e4,k),n.addClass("has-error"),v.selectpicker("val",""))}}(jQuery,window),function(T,$){T.fn.hl_ui_volunteerAdmin_VolunteerOpportunityFilter=function(p){var m=T.extend({opportunityDetailsContainer:"",iscmsadmin:!1,showLocation:!0,showTimeCommitment:!0,showCECredits:!0,showDates:!0,showSignUpDeadline:!0,hidePointsIfZero:!0,filterByMicrositeGroup:!0},p||{}),e=T(this),f=e.find("select#types-select"),g=e.find("select#time-commitments-select"),v=e.find("select#demographics-select"),y=e.find("select#communities-select"),b=e.find("select#status-select"),_=e.find("select#opportunity-name-select"),w=e.find("select#opportunity-distance-select"),C=(e.find("#location-error"),e.find("#community-key").val()),t=e.find("a#applyFilterBtn"),i=e.find("a#resetFilterBtn"),k=T("."+m.opportunityDetailsContainer),x="",S="";f.selectpicker(),g.selectpicker(),v.selectpicker(),y.selectpicker(),b.selectpicker(),_.selectpicker(),w.selectpicker(),t.bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI();var t="&iscmsadmin="+m.iscmsadmin,i=""!=C?"&communitykey="+C:"",n=null!=f.val()?"&OpportunityTypesFilter="+f.val().join(","):"",o=null!=g.val()?"&TimeCommitmentsFilter="+g.val().joi,"):"&OpportunityStatusFilter=+",l=null!=_.val()?"&OpportunityNamesFilter="+_.val().join(","):"",c=0<T("select#opportunities-in-list").length?"&ShowOnlyOpportunityOptions="+T("select#opportunities-in-list").val():"",d="";null!=w.val()&&0<=w.val()&&(d="&LocationFilter="+w.val());var u=0<T("select#volunteer-opportunities-itemscount").length?u="&ItemsCount="+T("select#volunteer-opportunities-itemscount").val()+"&SortBy="+T("select#volunteer-sorty-by").val()+c:"",h="&ShowLocation="+p.showLocation+"&ShowTimeCommitment="+p.showTimeCommitment+"&ShowCECredits="+p.showCECredits+"&ShowDates="+p.showDates+"&ShowSignUpDeadline="+p.showSignUpDeadline+"&HidePointsIfZero="+p.hidePointsIfZero+"&ShowPoints="+p.showPoints+"&FilterByMicrositeGroup="+m.filterByMicrositeGroup;x=T(this).attr("href")+t+i+n+o+a+s+r+l+d+u+h,S=$.location.pathname+x.substr(x.indexOf("?"),x.length),void 0===history.pushState&&(location.href=S),T.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:x,success:function(e){history.pushState(e,null,S),k.html(e),hl_common_ui_unBlockUI()}})}),i.bind("click",function(){f.selectpicker("val",""),g.selectpicker("val",""),v.selectpicker("val",""),y.selectpicker("val",""),b.selectpicker("val",""),_.selectpicker("val",""),w.selectpicker("val","")})}}(jQuery,window),function(s){s.fn.hl_ui_volunteer_awardpointsmodal={showAwardPointsModal:function(t,i){var n,e;null!=t&&(0<(n=s("#award-points-modal")).length&&n.remove(),e=null!=t.volunteerexternalhistorykey&&0<t.volunteerexternalhistorykey.length?"/higherlogic/ui/mvc/directory/volunteeradmin/GetAwardPointsEditModal":"/higherlogic/ui/mvc/directory/volunteeradmin/GetAwardPointsModal",hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(t),dataType:"html",url:e,success:function(e){s("body").append(e),(n=s("#award-points-modal")).find("#awarded-date-picker").datetimepicker({format:"MM/DD/YYYY",pickTime:!1,showToday:!1,useCurrent:!1}),n.find("#award-points").bind("click",function(){var e=t;e.volunteerexternalhistorykey=n.find("#hidden-award-item-key").val(),e.PointsAwarded=n.find("#award-pointsawarded").val(),e.Description=n.find("#award-description").val(),e.AwardedDate=n.find("#award-awardeddate").val(),s.fn.hl_ui_volunteer_awardpointsmodal.validateAwardPointsForm()&&(hl_common_ui_blockUI(),s.ajax({url:"/higherlogic/ui/mvc/directory/volunteeradmin/AwardPoints/",type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){e.Success&&(s("#award-points-modal").modal("hide"),"function"==typeof i?i.call(this):window.location.reload())}}))}),s("#award-points-modal").modal("show"),hl_common_ui_unBlockUI()}}))},validateAwardPointsForm:function(){var e=!1,t=s("#award-points-modal");hl_common_ui_inputValid("#award-pointsawarded-label"," (Required)"," (Please enter a positive number)")||(t.find("#award-pointsawarded").focus(),e=!0),hl_common_ui_inputValid("#award-description-label"," (Required)","")||e||(t.find("#award-description").focus(),e=!0),hl_common_ui_inputValid("#award-awardeddate-label"," (Required)","")||e||(t.find("#award-awardeddate").focus(),e=!0);var i=t.find("#award-awardeddate"),n=s(i).val(),o=moment(s(i).val()),a=t.find("#award-awardeddate-error-msg");return null==o||o.format("MM/DD/YYYY")!=n.trim()?(t.find("#award-awardeddate-container").addClass("has-error"),s(a).show(),e||s(i).focus(),e=!0):(t.find("#award-awardeddate-container").removeClass("has-error"),s(a).hide()),!e}}}(jQuery,window),function(o){o.fn.hl_ui_volunteer_profile_importHistory=function(e){var t=o.extend({authToken:"",tenantKey:"",errorMessage:""},e||{});o(this);function i(){o("#modal-import-experience #import-volunteer-experience-button").addClass("disabled"),o("#import-volunteer-history-filename").text(),o("#import-volunteer-history-upload-result table tbody").empty(),o("#import-volunteer-history-upload-result").hl_accessibility_hide(),o("#import-volunteer-history-upload-error").hl_accessibility_hide(),o("#import-volunteer-history-upload-error > ul").empty(),o("#import-volunteer-history-import-upload-result").hl_accessibility_hide()}o("#modal-import-experience").on("shown.bs.modal",function(e){i()}),o("#import-volunteer-history-file-upload-label").click(function(){o("#import-volunteer-history-file-upload").val(null)}),o("#import-volunteer-history-file-upload").change(function(){if(o(this).val()){if(i(),void 0===window.FormData)throw new error("This browser does not support FormData.");var e=o(this).get(0).files;hl_directory_volunteer_profile.uploadAndProcessExternalHistoryFile(e[0],t.errorMessage)}}),o("#import-volunteer-history-file-upload").bind("focus",function(){o(this).addClass("has-focus")}),o("#import-volunteer-history-file-upload").bind("blur",function(){o(this).removeClass("has-focus")}),o.fn.hl_ui_volunteer_profile_importHistory.previewImportResult=function(e){for(var t=0;t<e.length;t++){row=e[t];var i="<tr><td>"+row.ExternalTypeName+'</td><td scope="row">'+row.Title+"</td><td>",n=row.Description;30<n.length&&(n=n.substring(0,30)+"..."),i+=n+"</td><td>",i+=row.StartDate+"</td><td>"+row.EndDate+"</td><td>",i+=row.Location+"</td></tr>",o("#import-volunteer-history-upload-result table tbody").append(i)}}}}(jQuery);var hl_egroups_all=function(){function g(e,t,i){var n=$(i);e?"daily"===t?(n.find("a.dailycd").removeClass("disabled"),n.find("a.dailycd .glyphicon").removeClass("transparent")):(n.find("a.weeklycd").removeClass("disabled"),n.find("a.weeklycd .glyphicon").removeClass("transparent")):"daily"===t?(n.find("a.dailycd").removeClass("disabled"),n.find("a.dailycd").addClass("btn-default").removeClass("btn-success")):(n.find("a.weeklycd").removeClass("disabled"),n.find("a.weeklycd").addClass("btn-default").removeClass("btn-success"))}return{myCommunityNotificationInit:function(e){var t=$(".mycommnotif-selectpicker-on");t.selectpicker();for(var i=t.siblings(".btn-group.bootstrap-select").find(".dropdown-toggle"),n=0;n<i.length;n++){var o=i.eq(n),a=o.attr("title");o.attr("title",HigherLogic.Util.htmlDecode(a))}$('.community-notifications [data-toggle="popover"]').popover(),$(e.cbNotifSettingsPreferenceId).bootstrapSwitch({size:"mini",handleWidth:25,onText:"Yes",offText:"No"}),$(e.cbNotifSettingsPreferenceId).on("switchChange.bootstrapSwitch",function(e,t){$.ajax({type:"POST",url:"/HigherLogic/Egroups/wsjson.aspx/UpdateContactNotificationSettingsPreference",data:JSON.stringify({contactKey:$(this).data("contactkey"),value:t}),contentType:"application/json; charset=utf-8"})})},myCommunityNotificationChangeClick:function(e){var t=$("#"+$(e).data("currentemailtextboxid")),i=$("#"+$(e).data("saveid")),n=$("#"+$(e).data("noteid"));hl_common_util_stringIsNullOrWhiteSpace($(e).data("currentemail"))?t.val(""):t.val($(e).data("currentemail")),t.keyup(function(){0===$(this).val().trim().length||hl_common_util_isValidEmailAddress($(this).val().trim())?i.removeClass("disabled"):i.hasClass("disabled")||i.addClass("disabled")}),0<t.val().trim().length?(n.show(),i.removeClass("disabled")):(n.hide(),i.hasClass("disabled")||i.addClass("disabled")),hl_common_ui_showBsModal($(e).data("modalid")),t.focus()},myCommunityNotificationWeeklyConsolidatedOnChange:function(e){hl_common_ui_blockUI(),$.ajax({type:"POST",url:"/HigherLogic/Egroups/wsjson.aspx/ChangeActiveSubscriptionType",data:JSON.stringify({dayOfWeek:$(e).val()}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){hl_common_ui_unBlockUI()},error:function(){hl_common_ui_unBlockUI(),hl_common_ui_alertDialog("Error updating the weekly consolidated digest subscription type.")}})},myCommunityNotificationDiscussionEmailOnClick:function(a){hl_common_ui_blockUI();vata("selectid")),i=$("#"+$(a).data("hiddenoldemailid")),n=void 0!==$(a).data("email")?$(a).data("email"):"";i.val(n),t.val(n),hl_common_util_isValidEmailAddress(t.val().trim())?e.hasClass("disabled")&&e.removeClass("disabled"):e.hasClass("disabled")||e.addClass("disabled"),t.keyup(function(){hl_common_util_isValidEmailAddress(t.val().trim())?e.hasClass("disabled")&&e.removeClass("disabled"):e.hasClass("disabled")||e.addClass("disabled")}),$.ajax({type:"POST",url:"/HigherLogic/Egroups/wsjson.aspx/MyCommunityNotificationGroups",data:JSON.stringify({email:n}),contentType:"application/json; charset=utf-8",success:function(t){s.find("option").remove(),s.find("optgroup").remove();for(var i=0;i<t.d.length;i++){for(var e=$("<optgroup/>").attr("label",t.d[i].Name),n=0;n<t.d[i].KeyNames.length;n++){var o=$("<option/>").attr("value",t.d[i].KeyNames[n].Item1).text(t.d[i].KeyNames[n].Item2);$.grep(t.d[i].SelectedListKeys,function(e){e===t.d[i].KeyNames[n].Item1&&o.attr("selected","selected")}),e.append(o)}s.append(e)}s.selectpicker({liveSearch:!0,selectedTextFormat:"count > 0",noneSelectedText:"Select one or more"}),hl_common_ui_unBlockUI(),hl_common_ui_showBsModal($(a).data("modalid"))},error:function(){hl_common_ui_unBlockUI(),hl_common_ui_alertDialog("Error getting the lists.")}})},myCommunityNotificationOnDiscussionEmailOverrideClick:function(e){var t=$("#"+$(e).data("hiddenid")),i=$("#"+$(e).data("selectid"));null!=i.val()?t.val(i.val().toString()):t.val(""),hl_common_util_closeContainingModal(e)},myCommunityNotificationOnDiscussionCollapse:function(e){var t=$(e).find(".glyphicon");t.hasClass("glyphicon-chevron-right")?t.removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-down"):t.removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-right")},myCommunityNotificationOnDiscussionEmailDelete:function(e){var t=$("#"+$(e).data("strongid")),i=$("#"+$(e).data("hdndeleteid")),n=$(e).data("email");i.val(n),t.text(n),hl_common_ui_showBsModal($(e).data("modalid"))},myCommunityNotificationOnConsolidatedDigestClick:function(u){var h=$(u).hasClass("btn-default"),p=$(u).data("cdvalue"),e="daily"===p,m=$(u).closest(".notification-settings-row");e?m.find("a.dailycd").addClass("disabled"):m.find("a.weeklycd").addClass("disabled");var t,i,f=$("#"+$(u).data("checkboxid")).prop("checked");f&&(t=$(m.find("a.dailycd")[0]),i=$(m.find("a.weeklycd")[0]),f=(0==t.length||t.hasClass("btn-default"))&&(0==i.length||i.hasClass("btn-default"))),h?"daily"===p?m.find("a.dailycd").removeClass("btn-default").addClass("btn-success"):m.find("a.weeklycd").removeClass("btn-default").addClass("btn-success"):"daily"===p?m.find("a.dailycd .glyphicon").addClass("transparent"):m.find("a.weeklycd .glyphicon").addClass("transparent");var n=e?"":$("#"+$(u).data("dropdownweekid")).val(),o=$("#"+$(u).data("hyperlinkid")),a=0<o.length?o.data("currentemail"):"";$.ajax({contentType:"application/json; charset=utf-8",type:"POST",url:"/HigherLogic/Egroups/wsjson.aspx/UpdateConsolidatedDigestSubscription",data:JSON.stringify({isDailyDigest:e,isActive:h,setToNoEmail:f,email:a,communityKey:$(u).data("communitykey"),dayValue:n}),contentType:"application/json; charset=utf-8",success:function(e){var t,i,n,o,a,s,r,l,c,d=$("#"+$(u).data("hyperlinkid"));h?(d.is(":visible")||d.show(),"weekly"!==p||hl_common_util_hasAttr(t=$("#"+$(u).data("dropdownweekid")),"disabled")&&(t.removeAttr("disabled"),$(t.parent()).find(".disabled").removeClass("disabled"))):d.is(":visible")&&(i="weekly"===p?".weeklycd":".dailycd",n=!0,o=$($(u).closest(".text-muted")).hasClass("hidden-xs")?"hidden-xs":"visible-xs",$("a"+i).each(function(){if($(this).attr("id")!==$(u).attr("id")&&$($(this).closest(".text-muted")).hasClass(o)&&$(this).hasClass("btn-success"))return n=!1}),n&&"weekly"===p&&(d.hide(),(l=(a=$(d.closest(".weekly-email-container"))).find("span.email")).length&&(l.remove(),$(a.find(".weekly-to")[0]).text("your primary address."),$(a.find('a[data-toggle="modal"]')[0]).data("currentemail","")),(s=$("#"+$(u).data("dropdownweekid"))).attr("disabled","disabled"),$(s.parent()).find(".bootstrap-select").addClass("disabled"),$(s.parent()).find("button.dropdown-toggle").addClass("disabled")),n&&"daily"===p&&(d.hide(),(l=(r=$(d.closest(".daily-email-container"))).find("span.email")).length&&(l.remove(),(c=$(r.find(".daily-to")[0])).text(c.text()+" your primary address."),$(r.find('a[data-toggle="modal"]')[0]).data("currentemail","")))),e.d?(g(h,p,m),f&&(m.find("a.btn-group label").removeClass("active"),m.find('a.btn-group label[data-subscriptionvalue="ne"]').addClass("active"))):(g(!1,p,m),hl_common_ui_alertDialog("Error updating consolidated digest subscription."))},error:function(){g(!1,p,m),hl_common_ui_alertDialog("Error updating consolidated digest subscription.")}})},myCommunityNotificationOnDiscussionEmailChange:function(t){var i=$(t).closest(".with-discussion-email").find('select[data-isxs="'+(!$(t).data("isxs")).toString()+'"]'),n=$(t).val();$(i).val(n);var o=$(t).data("previoussubscriptionvalue"),e=$(t).data("listkey");$(t).attr("disabled","disabled"),$(i).attr("disabled","disabled"),$(t).selectpicker("refresh"),$(i).selectpicker("refresh"),$.ajax({type:"POST",url:"/HigherLogic/Egroups/wsjson.aspx/UpdateDiscussionEmailSubscription",data:JSON.stringify({listKey:e,subscriptionValue:n}),contentType:"application/json; charset=utf-8",success:function(e){e.d?($(t).data("previoussubscriptionvalue",n),$(i).data("previoussubscriptionvalue",n)):(hl_common_ui_alertDialog("Error updating subscription."),$(t).val(o),$(i).val(o))$(t).selectpicker("refresh"),$(i).selectpicker("refresh")},error:function(){$(t).val(o),$(i).val(o),$(t).removeAttr("disabled"),$(i).removeAttr("disaresh"),hl_common_ui_alertDialog("Error updating subscription.")}})},myCommunityNotificationOnTopicEmailChange:function(e){HigherLogic.Common.Ui.blockUI();var n=$(e),o=n.val(),a=n.data("previoussubscriptionvalue");n.attr("disabled","disabled"),n.selectpicker("refresh");var t={communityKey:n.data("communitykey"),subscriptionValue:o};HigherLogic.Util.post("/HigherLogic/Egroups/wsjson.aspx/UpdateTopicCommunitySubscription",t).done(function(e){e.d?n.data("previoussubscriptionvalue",o):(hl_common_ui_alertDialog("Error updating subscription."),n.val(a)),n.removeAttr("disabled"),n.selectpicker("refresh");var t=n.siblings(".btn-group.bootstrap-select").find(".dropdown-toggle"),i=t.attr("title");t.attr("title",HigherLogic.Util.htmlDecode(i))}).fail(function(){n.val(a),n.removeAttr("disabled"),n.selectpicker("refresh"),hl_common_ui_alertDialog("Error updating subscription.")}).always(function(){HigherLogic.Common.Ui.unBlockUI()})}}}(jQuery),HigherLogic,HigherLogic,HigherLogic;hl_egroups_ccadmin_discussion_ads=function(a){function o(){window.onbeforeunload=function(){return!0}}function s(e,t,i){window.onbeforeunload=null;var n=$('<span class="glyphicon glyphicon-ok text-'+t+'"></span> <span class="text-'+t+'">'+i+"</span>");function o(){e.siblings(".change").removeClass("hidden")}e.closest(".form-inline").find(".default-campaign").prop("disabled",!0),e.closest(".form-inline").find(".default-target").prop("disabled",!0),e.addClass("hidden").siblings(".change-button").addClass("hidden"),e.closest(".default-changer").append(n),setTimeout(function(){n.fadeOut(8,o)},2e3)}$(".default-changer").on("click",".change",function(e){e.preventDefault();var t=$(this),i=t.closest(".form-inline").find(".default-campaign"),n=t.closest(".form-inline").find(".default-target");i.one("change",o),n.one("change",o),t.addClass("hidden"),t.siblings(".change-button").removeClass("hidden"),i.prop("disabled",!1).data("original",i.val()),n.prop("disabled",!1).data("original",n.val())}).on("click",".change-cancel",function(e){e.preventDefault();var t=$(this),i=t.closest(".form-inline").find(".default-campaign"),n=t.closest(".form-inline").find(".default-target");i.val(i.data("original")),n.val(n.data("original")),s(t,"warning",a.canceled)}).on("click",".change-save",function(e){e.preventDefault();var t=$(this),i=t.closest(".form-inline").find(".default-campaign"),n=t.closest(".form-inline").find(".default-target");hl_common_ui_blockUI();function o(){hl_common_ui_unBlockUI(),hl_common_ui_showBootstrapDialog("default-error",a.close,a.error,a.error_dialog)}$.ajax({type:"POST",url:"/HigherLogic/Egroups/wsampaign:i.val(),type:i.data("type"),target:n.val()}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){hl_common_ui_unBlockUI(),e.d?s(t,"success",a.saved):o()},error:o})}),$(document).on("click",".campaign-preview",function(e){e.preventDefault();var t=$(this).data("sponsor");t&&(hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:"/higherlogic/ui/mvc/common/campaigns/preview?SponsorKey="+t,success:function(e){hl_common_ui_showBoot,e,"")},complete:hl_common_ui_unBlockUI}))}).on("click",".assignment-delete",function(e){e.preventDefault();var t=$(this),i=t.siblings(".hidden"),n=t.closest("tr").find(".community").text();hl_common_ui_showBootstrapDeleteDialog("delete-campaign-assignment",{confirm:a.confirm,close:a.cancel},a.delete,HigherLogic.Util.stringFormat(a.deleteMsg,n),function(){i[0].click(),setTimeout(hl_common_ui_unBlockUI,1e3)})}).on("click",".make-all-inactive",function(e){e.preventDefault(),hl_common_ui_showBootstrapDeleteDialog("deactivate-campaign-assignments",{confirm:a.inactiveYes,close:a.cancel,closeClass:"btn-primary"},a.confirmation,$(".assignment-count").text(),function(){$(".make-all-inactive-target")[0].click()})})},function(n){var e,t;function i(e){this.opts=e,this.$main=$(e.controlId),this.$container=this.$main.closest(".community-event-invite-settings"),this.$toggleButton=this.$main.find(".community-event-invite-toggle"),this.baseUrl="/higherlogic/ui/mvc/events/eventinvite"}e=n.Events||(n.Events={}),i.prototype.init=function(){var i=this;this.$toggleButton.bootstrapSwitch({size:"small",onColor:"primary",offColor:"warning",onText:this.opts.language.toggleYes,offText:this.opts.language.toggleNo,handleWidth:25,onSwitchChange:function(e,t){e.preventDefault(),i.saveOptOutFlag(t)}})},i.prototype.saveOptOutFlag=function(t){var i=this;n.Common.Ui.blockUI();var e={CommunityMemberKey:this.opts.communityMemberKey,OptOut:t};n.Util.post("".concat(this.baseUrl,"/UpdateOptOutFlag"),JSON.stringify(e),"json").done(function(e){return e||i.$toggleButton.bootstrapSwitch("state",!t),hl_common_ui_unBlockUI(),e})},t=i,e.CommunityEventInviteSettings=t}(HigherLogic=HigherLogic||{}),function(d){var e,t;function i(e){this.opts=e,this.$main=$(e.controlId),this.$calendarEventKey=e.calendarEventKey,this.$communityKey=e.communityKey,this.$addBtn=this.$main.find("#add-submit"),this.$findContactContainer=this.$main.find("#add-find-contact-container"),this.$errorMsgContainer=this.$main.find("#add-error"),this.$errorMsgLabel=this.$errorMsgContainer.find(".details")}e=d.Events||(d.Events={}),i.prototype.init=function(){var t=this;d.Util.hide(this.$errorMsgContainer),this.$main.on("click","#add-submit",function(e){e.preventDefault(),t.addAttendee()}),this.findContactByNameSetup(),this.toggleAddBtn()},i.prototype.toggleAddBtn=function(){0==this.$main.find("#attendees li.tagit-choice").length?this.$addBtn.attr("disabled",""):this.$addBtn.removeAttr("disabled")},i.prototype.addAttendee=function(){var t=[];this.$main.find("ul#attendees li span.tagit-label").each(function(e){t.push($(this).attr("id"))});var e={CalendarEventKey:this.$calendarEventKey,Attendees:t,CommunityKey:this.$communityKey},i=this.$main,n=this.$errorMsgContainer,o=this.$errorMsgLabel,a=this.$calendarEventKey;d.Util.post("/higherlogic/ui/mvc/events/manageregistrantroster/AddAttendee",e,"json").done(function(e){var t;e.Success?(0<(t=$("#event-attendee-added")).length&&t.val(1),i.modal("hide"),hl_common_ui_unBlockUI(),0<$("#attendance-summary").length&&hl_manageRegistrantRoster.refreshAttendanceSummary(a)):(o.text(e.Message),d.Util.show(n))})},i.prototype.post=function(e,t,i){void 0===i&&(i="html"),d.Common.Ui.blockUI();var n=d.Util.post("".concat(e),t,i);return n.always(d.Common.Ui.unBlockUI),n},i.prototype.findContactByNameSetup=function(){var n=this,a=this.$main.find("#attendees"),s=this.$main.find("#find-error"),i=(s.find(".details"),n.$calendarEventKey),r=n.$communityKey,l=this.$main.find("input#share-tagged-contacts-hidden"),o=this.$main.find(".tagit-label");d.Util.hide(s);var c=[];a.tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,n){var o=this,t={name:e.term,calendarEventKey:i,communityKey:r};d.Util.post("/higherlogic/ui/mvc/events/eventinvite/FindEligibleContactByName/",t,"json").done(function(e){if(0<e.length){var t=[];c=l.val().replace(/,\s*$/,"").split(",");for(var i=0;i<=e.length-1;i++)c.indexOf(e[i].ContactKey)<0&&t.push(e[i]);d.Util.hide(o.$errorMsgContainer),d.Util.hide(s),n($.map(t,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhitellOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:e.FirstName+" "+e.LastName,label:t}}))}else d.Util.show(s);a.find("input").removeClass("ui-autocomplete-loading")})},minLength:3},afterTagAdded:function(e,t){var i=o.map(function(e,t){return $(t).attr("id")}).toArray().join(",");l.val(i),n.toggleAddBtn()},afterTagRemoved:function(e,t){var i=o.map(function(e,t){return $(t).attr("id")}).toArray().join(",");l.val(i),n.toggleAddBtn()}});var e=this.$main.find("#attendees li.tagit-new input");e.attr("placeholder",a.data("placeholdertext")),e.on("keydown",function(e){e.which!=$.ui.keyCode.BACKSPACE&&e.which!=$.ui.keyCode.DELETE||d.Util.hide(s)})},t=i,e.EventAddAttendeeModal=t}(HigherLogic=HigherLogic||{}),function(r){var e,t;function i(e){this.opts=e,this.$main=$(e.controlId),this.$calendarEventKey=e.calendarEventKey,this.$communityKey=e.communityKey,this.$addBtn=this.$main.find("#add-submit"),this.$createBtn=this.$main.find("#create-registrant-submit"),this.$errorMsgContainer=this.$main.find("#add-error"),this.$errorMsgLabel=this.$errorMsgContainer.find(".details"),this.$attendanceContainer=this.$main.find("#add-registrant-attended-container"),this.$userSearch=this.$main.find("#userSearch"),this.$addRegistrantDisplayName=this.$main.find("#add-registrant-displayName"),this.$clearRegistrantNameBtn=this.$main.find("#clear-registrant-name-btn"),this.$findContactContainer=this.$main.find("#find-contact-container"),this.$addContactContainer=this.$main.find("#add-contact-container"),this.$emailAddressContainer=this.$main.find("#create-register-email-container"),this.$emailAddress=this.$main.find("#create-register-email-address"),this.$firstNameContainer=this.$main.find("#create-register-first-name-container"),this.$firstName=this.$main.find("#create-register-first-name"),this.$lastNameContainer=this.$main.find("#create-register-last-name-container"),this.$lastName=this.$main.find("#create-register-last-name"),this.$companyNameContainer=this.$main.find("#create-register-company-name-container"),this.$companyName=this.$main.find("#create-register-company-name"),this.$emailAddressHelpBlock=this.$main.find("#new-email-address-help-block"),this.$firstNameHelpBlock=this.$main.find("#new-first-name-help-block"),this.$lastNameHelpBlock=this.$main.find("#new-last-name-help-block"),this.$companyNameHelpBlock=this.$main.find("#new-company-name-help-block"),this.$selectPrice=this.$main.find(nt-select-register"),this.$clearEnterAnotherContainer=this.$main.find("#clear-enter-another-container"),this.$clearEnterAnother=this.$main.find("#create-registrant-clear-enter-another"),this.emailRegEx="([a-zA-Z_0-9.-]+\\@[a-zA-Z_0-9.-]+\\.\\w+)",this.allContacts=!0,this.selectedContacts=[]}e=r.Events||(r.Events={}),i.prototype.init=function(){var t=this;r.Util.hide(this.$errorMsgContainer),r.Util.hide(this.$createBtn),this.clearRegistrant(),this.selectRegisterSetup(),this.$main.on("click","#add-submit",function(e){e.preventDefault(),t.addRegistrant()}).on("click","#clear-registrant-name-btn",function(e){e.preventDefault(),t.clearRegistrant()}).on("click","#create-registrant-submit",function(){t.createNewContactAndRegister()}),this.findContactByNameSetup(),this.toggleAddBtn(),this.$emailAddress.on("blur",function(){t.validateEmailAddress()}),this.$main.find(".create-register-input").on("keyup",function(){t.setCreateBtnDisplay()}),this.$main.find(".create-register-input").on("change",function(){$(t).trigger("keyup")}),this.emailAlreadyExistsAlert='<div class="margin-top-medium"><span class="control-label">'+this.opts.emailAlreadyTakenText+"</span></div>",this.$clearEnterAnother.on("click",function(e){e.preventDefault(),t.clearRegistrant(),t.$emailAddress.blur().focus()})},i.prototype.toggleAddBtn=function(){!this.allContacts&&0===this.selectedContacts.length||!this.opts.isRSVPEvent&&(null===this.$selectPrice||void 0===this.$selectPrice)?this.$addBtn.attr("disabled",""):this.$addBtn.removeAttr("disabled")},i.prototype.clearRegistrant=function(){r.Util.hide(this.$errorMsgContainer),this.$emailAddress.val(""),this.$firstName.val(""),this.$lastName.val(""),this.$companyName.val(""),this.clearPriceList(),this.toggleAddBtn(),this.allContacts=!1,this.selectedContacts=[]},i.prototype.clearPriceList=function(){null!=this.$selectPrice&&(this.$selectPrice.remove(),this.$selectPrice=null);var e=this.$main.find("#add-registrant-pricing-container");r.Util.hide(e)},i.prototype.addRegistrant=function(){var t=this;r.Common.Ui.blockUI();var e=this.$main.find("#create-contact-choose-price"),i={CalendarEventKey:this.$calendarEventKey,ContactKeys:this.selectedContacts,AllContacts:this.allContacts,CommunityKey:this.communityKey,ContactKey:r.Util.guidEmpty,RegistrantClassKey:this.opts.isRSVPEvent?"":e.val(),Attendance:$("#registrant-attendance").is(":checked")},n=this.opts.baseUrl+"/events/manageregistrantroster/AddRegistrants";r.Util.post(n,i,"json").done(function(e){e.Success?t.$main.modal("hide"):(t.$errorMsgLabel.text(e.Message),r.Util.show(t.$errorMsgContainer))}).always(function(){r.Common.Ui.unBlockUI()})},i.prototype.selectRegisterSetup=function(){var n=this;this.$selectRegister.change(function(e){var t=n.$main.find("#add-registrant-select-register  option:selected").val(),i=n.$main.find("#searchContactContainer");r.Util.show(n.$attendanceContainer),"search"===t?(n.communityKey=null,r.Util.hide(n.$tableContacts),r.Util.hide(n.$addContactContainer),r.Util.show(i)):"new"===t?(n.communityKey=null,r.Util.hide(n.$tableContacts),r.Util.hide(i),n.showCreateAndRegister("")):(n.communityKey=t,r.Util.hide(i),r.Util.hide(n.$addContactContainer),n.showRegistrantContacts(1),n.opts.isRSVPEvent||n.showRegistrantPrices(!1,""))})},i.prototype.findContactByNameSetup=function(){var n=this,e=this.$userSearch;this.communityKey=this.$communityKey;var o=this.$main.find("#error-message"),a=this.$main.find(".details"),t=this.$main.find(".note");a.html(""),o.hide(),e.tagit({singleField:!1,allowSpaces:!0,allowDuplicates:!1,removeConfirmation:!0,placeholderText:this.opts.language.startTypingAName,afterTagRemoved:function(e){a.html(""),o.hide(),t.show(),n.$main.find("#userSearch input").attr("placeholder",n.opts.language.startTypingAName)},autocomplete:{source:function(e,t){var i={name:e.term,calendarEventKey:n.opts.calendarEventKey};n.post("/events/manageregistrantroster/FindAvailableRegistrantsByName",i,"json").done(function(e){0<e.length&&(a.html(""),o.hide(),t($.map(e,function(e){var t=e.Name+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(hl_common_util_stringIsNullOrWhiteSpace(e.CityStateCountry)?"":" - "+e.CityStateCountry);return{ContactKey:e.ContactKey,value:e.Name,label:t,PictureUrl:e.PictureUrl}}))),n.$main.find("#userSearch").find("input").removeClass("ui-autocomplete-loading")})},open:function(){$("ul.ui-menu").width(e.innerWidth()-20)},minLength:3}}),e.find("input").on("autocompleteselect",function(e,t){null!==t.item.ContactKey&&void 0!==t.item.ContactKey&&(n.selectedContacts.push(t.item.ContactKey),n.selectedContacts=n.selectedContacts.filter(function(e,t){return n.selectedContacts.indexOf(e)===t})),n.clearPriceList(),n.toggleAddBtn(),n.opts.isRSVPEvent||n.showRegistrantPrices(""==t.item.ContactKey,t.item.ContactKey)}),e.find("input").data("ui-autocomplete")._renderMenu=function(i,e){var n=this;$.each(e,function(e,t){n._renderItemData(i,t)})},e.find("input").data("ui-autocomplete")._renderItem=function(e,t){var i="";return hl_common_util_stringIsNullOrWhiteSpace(t.ContactKey)?i+='<a><div style="display: inline-block">"'+t.value+'" - '+n.opts.createContactAndRegisterText+"</div></a>":(i+='<a><div style="display: inline-block"><img class="img-typeahead" src="'+t.PictureUrl+'"></div><div style="display: inline-block"> &nbsp;'+t.label,i+="</div></a>"),$('<li class="ui-menu-item">').attr("data-value",t.value).append(i).appendTo(e)},e.tagit("removeAll")},i.prototype.post=function(e,t,i){void 0===i&&(i="json"),r.Common.Ui.blockUI();var n=r.Util.post("".concat(this.opts.baseUrl,"/").concat(e),t,i);return n.always(r.Common.Ui.unBlockUI),n},i.prototype.showRegistrantPrices=function(s.opts.baseUrl+"/events/manageregistrantroscalendarEventKey,ContactKey:r.Util.stringIsNullOrWhiteSpace(t)?r.Util.guidEmpty:t,CreateNewContact:e,CommunityKey:this.communityKey},a=this.$main.find("#add-registrant-select-price");0<a.length&&r.Util.hide(a),r.Util.post(n,o,"html").done(function(e){var t=i.$main.find("#add-registrant-pricing-container");0<a.length&&a.remove(),r.Util.show(t),t.html(e),i.$selectPrice=i.$main.find("#add-registrant-select-price"),i.toggleAddBtn()}).always(function(){r.Common.Ui.unBlockUI()})},i.prototype.showRegistrantContacts=function(e){var n=this;r.Common.Ui.blockUI();var t=this.opts.baseUrl+"/events/manageregistrantroster/AddRegistrantModalContacts",i={CalendarEventKey:this.$calendarEventKey,CommunityKey:this.communityKey,Page:e},o=this.$main.find("#add-registrant-select-contacts");0<o.length&&r.Util.hide(o),r.Util.post(t,i,"html").done(function(e){vantacts=n.$main.find("#community-registrant-roster-rows-container"),n.$tableContacts.on("click",".check",function(e){e.preventDefault(),n.checkRow(e.currentTarget)}).on("click",".check-all",function(e){e.preventDefault(),n.checkAll(!0)}).on("click","#cm-pagination .pagination a",function(e){e.preventDefault(),n.ContactsPage(e.target)}),n.allContacts?n.checkAll(!0,!0):n.$tableContacts.find(".check").each(function(e,t){var i=$(t).data("content");-1<n.selectedContacts.indexOf(i)&&n.checkRow(t,!0)})}).always(function(){r.Common.Ui.unBlockUI()})},i.prototype.ContactsPage=function(e){var t=e.href;""!==t&&this.showRegistrantContacts(parseInt(t.split("?")[1].split("=")[1]))},i.prototype.showCreateAndRegister=function(e){if(r.Util.show(this.$addContactContainer),r.Util.hide(this.$errorMsgContainer),this.$main.find("#add-registrants-modal-title").text(this.opts.createContactModalTitle),!r.Util.stringIsNullOrWhiteSpace(e))if(0<e.indexOf("@"))this.$emailAddress.val(e),this.$emailAddress.trigger("blur");else{var t=e.split(" ");if(this.$firstName.val(t[0]),1<t.length){for(var i="",n=1;n<=t.length-1;n++)i+=t[n]+" ";this.$lastName.val(i.trim())}}},i.prototype.hideAddExistingContact=function(){this.clearPriceList(),r.Util.hide(this.$addBtn),r.Util.hide(this.$clearEnterAnotherContainer)},i.prototype.validateEmailAddress=function(){var t=this;this.$firstName.removeAttr("disabled"),this.$lastName.removeAttr("disabled"),this.$companyName.removeAttr("disabled"),this.$emailAddressContainer.removeClass("required").removeClass("has-error"),this.$emailAddressHelpBlock.text("").hide(),this.$firstNameContainer.removeClass("required").removeClass("has-error"),this.$firstNameHelpBlock.text("").hide(),this.$lastNameContainer.removeClass("required").removeClass("has-error"),this.$lastNameHelpBlock.text("").hide(),this.$companyNameContainer.removeClass("required").removeClass("has-error"),this.$companyNameHelpBlock.text("").hide(),r.Util.hide(this.$contactAlreadyRegistered),this.hideAddExistingContact(),""!=this.$emailAddress.val()?null==this.$emailAddress.val().match(this.emailRegEx)?(this.$emailAddressContainer.addClass("required").addClass("has-error"),this.$emailAddressHelpBlock.append(this.opts.emailInvalidText).show()):(this.$emailAddressContainer.removeClass("required").removeClass("has-error"),this.$emailAddressHelpBlock.text("").hide(),this.verifyContact(this.$emailAddress.val(),this.opts.calendarEventKey).done(function(e){t.verifyContactResult(e)}).always(function(){r.Common.Ui.unBlockUI()})):this.setCreateBtnDisplay()},i.prototype.verifyContact=function(e,t){r.Common.Ui.blockUI();var i={calendarEventKey:this.opts.calendarEventKey,emailAddress:e},n=this.opts.baseUrl+"/events/ManageRegistrantRoster/VerifyContactByEmailAddress";return r.Util.post(n,i,"json")},i.prototype.verifyContactResult=function(e){var t,i;r.Util.hide(this.$errorMsgContainer),"True"===JSON.parse(e).GuestExists?(t=JSON.parse(e),this.$firstName.val(t.FirstName),this.$lastName.val(t.LastName),this.$companyName.val(t.CompanyName),this.$firstName.attr("disabled",""),this.$lastName.attr("disabled",""),this.$companyName.attr("disabled",""),i=$('<a target="_blank" biobubblekey="'+t.ContactKey+'" href="'+t.LinkToProfile+'" class="registrant">'+this.$emailAddress.val()+"</a>"),this.selectedContacts=[],this.selectedContacts.push(t.ContactKey),this.$errorMsgLabel.text(t.DisplayName+" ["),this.$errorMsgLabel.append(i),this.$errorMsgLabel.append("] "),"True"===t.AlreadyRegistered?(this.$errorMsgLabel.append(this.opts.contactIsAlreadyRegisteredFormatText),r.Util.hide(this.$attendanceContainer)):(this.$errorMsgLabel.append(this.opts.contactExistsText),this.showRegistrantPrices(!0,""),r.Util.show(this.$attendanceContainer)),r.Util.show(this.$clearEnterAnotherContainer),r.Util.show(this.$errorMsgContainer),r.Util.show(this.$addBtn)):(this.hideAddExistingContact(),r.Util.show(this.$attendanceContainer),r.Util.show(this.$createBtn),this.opts.isRSVPEvent||this.showRegistrantPrices(!0,"")),this.setCreateBtnDisplay()},i.prototype.setCreateBtnDisplay=function(){var e=!1;""!=this.$emailAddress.val()&&""!=this.$firstName.val()&&""!=this.$lastName.val()||(e=!0),e?this.$createBtn.attr("disabled",""):this.$createBtn.removeAttr("disabled")},i.prototype.createNewContactAndRegister=function(){var s=this;return this.$emailAddressContainer.removeClass("required").removeClass("has-error"),this.$emailAddressHelpBlock.text("").hide()s("required").removeClass("has-error"),this.$firstNameHelpBlock.text("").hide(),this.$lastNameContainer.removeClass("required").removeClass("has-error"),this.$lastNameHelpBlock.text("").hide(),this.$companyNameContainer.removeClass("required").removeClass("has-error"),this.$companyNameHelpBlock.text("").hide(),$.when(this.verifyContact(this.$emailAddress.val(),this.opts.calendarEventKey)).done(function(e,t,i){var n,o,a;"True"===JSON.parse(e).GuestExists?(r.Common.Ui.unBlockUI(),s.$emailAddressContainer.addClass("required").addClass("has-error"),s.$emailAddress.after(s.emailAlreadyExistsAlert)):s.userInfoValid()?(n=s.$main.find("#create-contact-choose-price"),o={NewContact:!0,ContactKeys:s.selectedContacts,AllContacts:s.allContacts,CommunityKey:s.communityKey,EmailAddress:s.$emailAddress.val(),FirstName:s.$firstName.val(),LastName:s.$lastName.val(),CompanyName:s.$companyName.val(),CalendarEventKey:s.opts.calendarEventKey,RegistrantClassKey:s.opts.isRSVPEvent?"":n.val(),Attendance:$("#registrant-attendance").is(":checked")},a=s.opts.baseUrl+"/events/manageregistrantroster/AddRegistrants"ain.modal("hide"):(s.$errorMsgLabel.text(e.Message),r.Util.show(s.$errorMsgContainer))}).always(function(){r.Common.Ui.unBlockUI()})):r.Common.Ui.unBlockUI()}),!1},i.prototype.userInfoValid=function(){var e=!0;return r.Util.stringIsNullOrWhiteSpace(this.$emailAddress.val())?(this.$emailAddressContainer.addClass("alert").addClass("alert-danger"),e=!1):null==this.$emailAddress.val().match(this.emailRegEx)&&(this.$emailAddressContainer.addClass("required").addClass("has-error"),this.$emailAddressHelpBlock.append(this.opts.emailRequiredText).show(),e=!1),r.Util.stringIsNullOrWhiteSpace(this.$firstName.val())&&(this.$firstNameContainer.addClass("required").addClass("has-error"),this.$firstNameHelpBlock.append(this.opngIsNullOrWhiteSpace(this.$lastName.val())&&(this.$lastNameContainer.addClass("required").addClass("has-error"),this.$lastNameHelpBlock.append(this.opts.lastNameRequiredText).show(),e=!1),e},i.prototype.toggle=function(e,t){var i=this;void 0===t&&(t=null);var n=e.data("content"),o=this.selectedContacts.indexOf(n);return null==t&&(t=e.hasClass("btn-default")),t?(null!=n&&-1===o&&(this.selectedContacts.push(n),this.selectedContacts=this.selectedContacts.filter(function(e,t){return i.selectedContacts.indexOf(e)===t})),e.addClass("btn-primary").removeClass("btn-default")):this.allContacts||(-1<o&&this.selectedContacts.splice(o,1),e.addClass("btn-default").removeClass("btn-primary")),e.is(".btn-primary")},i.prototype.toggleCheckbox=function(e,t){void 0===t&&(t=null);var i=$(e),n=this.toggle(i,t);return n?i.closest(".account-list-row").addClass("check-selected"):(i.closest(".account-list-row").removeClass("check-selected"),$(".check-all").is(".btn-primary")&&this.checkAll(!1)),n},i.prototype.checkAll=function(e,t){var i=this;void 0===e&&(e=!0),void 0===t&&(t=null),null==t&&(t=!this.allContacts);var n=$(".check-all");t||(this.selectedContacts=[]),this.allContacts=t,this.toggle(n,t),e&&this.$main.find(".check:not(.hidden)").map(function(e,t){i.checkRow(t,n.is(".btn-primary"))})},i.prototype.checkRow=function(e,t){void 0===t&&(t=null);var i=$(e),n=this.toggleCheckbox(e,t);i.closest(".account-list-row").find(".cm-contact-actions").toggleClass("display-only",n),this.toggleAddBtn()},t=i,e.EventAddRegistrantModal=t}(HigherLogic=HigherLogic||{});var hl_admin_events=function(r){var l="/higherlogic/ui/mvc/admin/events",c="00000000-0000-0000-0000-000000000000";function a(e,t,n,o){var i;void 0!==e&&void 0!==t&&("presenterRole"===e?i=l+"/SavePresenterRole":"registrantClass"===e?i=l+"/SaveRegistrantClass":"eventOptionCategory"===e&&(i=l+"/SaveEventOptionCategory"),r.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify(t),url:i,success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}}))}return{getAddEditEventTypeModal:function(e){hl_common_ui_blockUI();var t={};t.EventTypeKey=void 0===e?"00000000-0000-0000-0000-000000000000":e,r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:l+"/GetAddEditEventType",success:function(e,t,i){var n=r("#add-edit-event-type-modal-container");0<n.length&&n.remove(),r("body").append(e),n=r("#add-edit-event-type-modal"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},savePresenterRole:function(e,t,i,n){var o;void 0!==e&&void 0!==t&&((o={}).presenterRoleKey=0===e.length?c:e,o.roleName=t,a("presenterRole",o,i,n))},deleteAdminItem:function(e,t,n,o){var i,a;void 0!==e&&void 0!==t&&((i={}).itemKey=0===t.length?c:t,"presenterRole"===e?a=l+"/DeletePresenterRole":"registrantClass"===e?a=l+"/DeleteRegDeleteEventOptionCategory"),r.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify(i),url:a,success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}}))},updateAdminItemStatus:function(e,t,i,n,o){var a,s;void 0!==e&&void 0!==t&&void 0!==i&&((a={}).itemKey=0===t.length?c:t,a.isActive=i,"presenterRole"===e?s=l+"/UpdatePresenterRoleStatus":"registrantClass"===e?s=l+"/UpdateRegistrantClassStatus":"eventOptionCategory"===e&&(s=l+"/UpdateEventOptionCategoryStatus"),r.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify(a),url:s,success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}}))},updateSortOrder:function(e,t,i,n,o){var a,s;void 0!==e&&void 0!==t&&((a={}).itemKey=t,a.isUp=i,"presenterRole"===e?s=l+"/UpdatePresenterRoleSortOrder":"registrantClass"===e?s=l+"/UpdateRegistrantClassPriority":"eventOptionCategory"===e&&(s=l+"/UpdateEventOptionCategorySortOrder"),r.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify(a),url:s,success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}}))},refreshList:function(e,o,a){var t;"presenterRole"===e?t=l+"/ManagePresenterRolesRows":"registrantClass"===e?t=l+"/ManageRegistrantClassRows":"eventOptionCategoryOptions"===e?t=l+"/ManageEventOptionCategoriesPartial?IsSession=false":"eventOptionCategorySessions"===e&&(t=l+"/ManageEventOptionCategoriesPartial?IsSession=true"),r.ajax({type:"GET",dataType:"html",url:t,success:function(e,t,i){var n=r("#"+o);0<n.length&&n.html(e),"function"==typeof a&&a()},error:function(e,t,i){}})},openAdminAddEditModal:function(e,t,o,a,i){var n,s;void 0!==e&&(void 0!==t&&0!==t.length||(t=c),n={},"registrantClass"===e?(s=l+"/GetManageRegistrantClassesModal",n.RegistrantClassKey=t):"eventOptionCategory"===e&&(s=l+"/GetManageEventOptionCategoriesModal",n.EventOptionCategoryKey=t,n.IsSession=i),hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(n),url:s,success:function(e,t,i){var n=r("#"+o);0<n.length&&n.remove(),r("body").append(e),n=r("#"+o),hl_common_ui_unBlockUI(),n.modal("show"),"function"==typeof a&&a()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveAdminItem:a}}(jQuery),hl_eventAttendanceButton=function(i){return{refresh:function(t){0<i("#event-attendance-container-"+t.toLowerCase()).length&&(hl_common_ui_blockUI(),i.ajax({type:"Get",dataType:"html",url:"/higherlogic/ui/mvc/events/eventattendance/AttendanceButtonPartial?CalendarEventKey="+t,success:function(e){i("#event-attendance-container-"+t.toLowerCase()).html(e),hl_common_ui_unBlockUI()},error:function(e){hl_common_ui_unBlockUI()}}))}}}(jQuery),hl_eventInvite=function(d){var u="/higherlogic/ui/mvc/events/eventinvite";return{showShareEventDialog:function(o,a){function r(e){0==d("#invitees li.tagit-choice").length?e.attr("disabled",""):e.removeAttr("disabled","")}hl_common_ui_blockUI(),d.ajax({type:"GET",dataType:"html",url:u+"/GetInviteContactModal?CalendarEventKey="+o,success:function(e){var t=d("#"+o+"-invite-contact-modal");0<t.length&&t.remove(),d("body").append(e),function(o){var e=o.find("#invitees"),n=o.find("#share-submit"),a=o.find("#find-error");a.find(".details");a.hl_accessibility_hide();var s=[];e.tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,n){var t={name:e.term};d.ajax({url:"/higherlogic/ui/mvc/directory/directory/FindContacts/",type:"POST",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0<e.length){var t=[];s=o.find("input#share-tagged-contacts-hidden").val().replace(/,\s*$/,"").split(",");for(var i=0;i<=e.length-1;i++)s.indexOf(e[i].ContactKey)<0&&t.push(e[i]);a.hl_accessibility_hide(),n(d.map(t,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:e.FirstName+" "+e.LastName,label:t}}))}else a.hl_accessibility_show();o.find("#invitees").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3},afterTagAdded:function(e,t){var i=o.find(".tagit-label").map(function(e,t){return d(t).attr("id")}).toArray().join(",");o.find("input#share-tagged-contacts-hidden").val(i),r(n)},afterTagRemoved:function(e,t){var i=o.find(".tagit-label").map(function(e,t){return d(t).attr("id")}).toArray().join(",");o.find("input#share-tagged-contacts-hidden").val(i),r(n)}})}(t=d("#"+o+"-invite-contact-modal"));var i=t.find("#invitees li.tagit-new input"),n=t.find("#share-submit");i.attr("placeholder","Enter a Name or Email"),n.attr("disabled",""),n.on("click",function(e){e.preventDefault(),function(o,a){hl_common_ui_blockUI();var t=[],s=[],r=d("#"+o+"-invite-contact-modal"),l=r.find("#invite-error"),c=l.find(".details");l.hl_accessibility_hide(),r.find("ul#invitees li span.tagit-label").each(function(e){t.push(d(this).attr("id")),s.push(d(this).text())}),d.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:u+"/InviteContacts?calendarEventKey="+o+"&invitees="+t.join(","),success:function(e){var i,t,n;e.Success?(r.modal("hide"),i=o,t=s,n=a,hl_common_ui_blockUI(),d.ajax({type:"GET",dataType:"html",url:u+"/GetInviteContactResultModal?CalendarEventKey="+i+"&InviteeNames="+t.join(", "),success:function(e){var t=d("#"+i+"-invite-result-modal");0<t.length&&t.remove(),d("body").append(e),"function"==typeof n&&n(i),hl_common_ui_unBlockUI(),d("#"+i+"-invite-result-modal").modal("show")},error:function(){hl_common_ui_unBlockUI()}})):(c.text(e.Message),l.hl_accessibility_show(),hl_common_ui_unBlockUI())},error:function(e){c.text("Invitation could not be sent. Unexpected error has occured."),l.hl_accessibility_show(),hl_common_ui_unBlockUI()}})}(o,a)}),hl_common_ui_unBlockUI(),t.modal("show")},error:function(e){hl_common_ui_unBlockUI()}})}}}(jQuery),hl_eventOptionSession=function(d){var n="/higherlogic/ui/mvc/events/eventoptionsession";function u(e){hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/OptionsSessions",success:function(e,t,i){var n=d("#event-options-sessions-container");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})}return{getEventOptionsSessionsModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/OptionsSessionsModal",success:function(e,t,i){var n=d("#options-sessions-modal-container");0<n.length&&n.remove(),d("body").append(e),hl_common_ui_unBlockUI(),d("#options-sessions-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getAddEditOptionModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/AddEditOptionModal",success:function(e,t,i){var n=d("#add-edit-option-modal-container");0<n.length&&n.remove(),d("body").append(e),hl_common_ui_unBlockUI(),d("#add-edit-option-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getAddEditSessionModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/AddEditSessionModal",success:function(e,t,i){var n=d("#add-edit-session-modal-container");0<n.length&&n.remove(),d("body").append(e),hl_common_ui_unBlockUI(),d("#add-edit-session-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},confirmEventOptionDelete:function(e){var t,i;void 0!==e&&(t=e.IsSession?"session":"registration choice",(i={HeaderText:"Confirmation"}).ConfirmationText="Are you sure you want to delete this "+t+"?",i.OkayBtnText="Delete",i.OkayCallback="var request = {}; request.EventOptionKey = '"+e.EventOptionKey+"'; request.CalendarEventKey = '"+e.CalendarEventKey+"'; request.IsSession = "+e.IsSession+"; hl_eventOptionSession.deleteOptionSession(request); ",i.CancelBtnText="Cancel",hl_common.confirm(i))},sortEventOption:function(o){void 0!==o&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:n+"/SortEventOption",success:function(e,t,i){var n;d("#unable-to-sort-data").hide(),"success"==JSON.parse(e).Message?((n={}).CalendarEventKey=o.CalendarEventKey,n.ShowOptions=!o.IsSession,u(n)):(hl_common_ui_unBlockUI(),d("#unable-to-sort-data").show())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},deleteOptionSession:function(a){void 0!==a&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(a),url:n+"/DeleteOptionSession",success:function(e,t,i){var n,o;d("#unable-to-delete-data").hide(),"success"==JSON.parse(e).Message?(0<(n=d("#add-edit-option-modal")).length&&n.modal("hide"),(o={}).CalendarEventKey=a.CalendarEventKey,o.ShowOptions=!a.IsSession,o.ShowSessions=a.IsSession,u(o)):(hl_common_ui_unBlockUI(),d("#unable-to-delete-data").show())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveOption:function(s){void 0!==s&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(s),url:n+"/SaveOption",success:function(e,t,i){var n,o,a;d("#invalid-option-data").hide(),e.Success?(n=d("#add-edit-option-modal-container"),o=d("#add-edit-option-modal"),0<n.length&&0<o.length&&(o.modal("hide"),n.remove()),(a={}).CalendarEventKey=s.CalendarEventKey,u(a)):(hl_common_ui_unBlockUI(),d("#invalid-option-data").show())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveSession:function(c){void 0!==c&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(c),url:n+"/SaveSession",success:function(e,t,i){var n,o,a,s,r,l=d("#invalid-session-data");l.hl_accessibility_hide(),e.Success?(n=d("#add-edit-session-modal-container"),o=d("#add-edit-session-modal"),0<n.length&&0<o.length&&(o.modal("hide"),n.remove()),(a={}).CalendarEventKey=c.CalendarEventKey,a.ShowOptions=!1,a.ShowSessions=!0,u(a)):(hl_common_ui_unBlockUI(),s=l.find("#invalid-session-data-details"),""!=e.Message?(s.empty(),r=d("<ul></ul>").appendTo(s),d("<li/>").text(e.Message).appendTo(r),s.hl_accessibility_show()):s.hl_accessibility.hide(),l.hl_accessibility_show())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},findPresenters:function(e,t,i){if(void 0!==e&&void 0!==t)return request={},request.presenter=e,request.eventOptionKey=t,void 0!==i&&(request.existingPresenters=i),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(request),url:n+"/FindSessionPresenters",success:function(e,t,i){},error:function(e,t,i){}})},getAddEditSessionPresenterModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/AddEditSessionPresenterModal",success:function(e,t,i){var n=d("#add-edit-session-presenter-modal-container");0<n.length&&n.remove(),d("body").append(e),hl_common_ui_unBlockUI(),d("#add-edit-session-presenter-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},addEditSessionPresenter:function(e){void 0!==e&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/AddEditSessionPresenter",success:function(e,t,i){var n=d("#add-edit-session-presenter-modal");0<n.length&&n.modal("hide");var o=d("#next-session-presenter-placeholder");0<o.length&&o.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},deleteSessionPresenter:function(e){void 0!==e&&(hl_common_ui_blockUI(),d.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:n+"/DeleteSessionPresenter",success:function(e,t,i){var n,o=JSON.parse(e);""==o.AdditionalResponseData||0<(n=d(".session-presenters-container").find("#"+o.AdditionalResponseData)).length&&n.remove(),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}}(jQuery),hl_eventPresenters=function(s){var i="/higherlogic/ui/mvc/events/eventpresenters";function r(e){void 0!==e&&(hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:i+"/EventPresentersList",success:function(e,t,i){var n=s("#event-presenters-list-container");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}return{getEventPresentersModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:i+"/EventPresentersModal",success:function(e,t,i){var n=s("#event-presenters-modal");0<n.length&&n.remove(),s("body").append(e),hl_common_ui_unBlockUI(),s("#event-presenters-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},findPresenters:function(e,t){if(void 0!==e&&void 0!==t)return request={},request.presenter=e,request.calendarEventKey=t,s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(request),url:i+"/FindPresenters",success:function(e,t,i){},error:function(e,t,i){}})},getAddEditEventPresenterModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:i+"/AddEditEventPresenterModal",success:function(e,t,i){var n=s("#add-edit-event-presenter-modal-container");0<n.length&&n.remove(),s("body").append(e),hl_common_ui_unBlockUI(),s("#add-edit-event-presenter-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},addEditEventPresenter:function(a){void 0!==a&&(hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(a),url:i+"/AddEditEventPresenter",success:function(e,t,i){var n={};n.CalendarEventKey=a.CalendarEventKey,r(n);var o=s("#add-edit-event-presenter-modal");0<o.length&&o.modal("hide")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},confirmEventPresenterDelete:function(e){var t;void 0!==e&&((t={HeaderText:"Confirmation",ConfirmationText:"Are you sure you want to delete this presenter?",OkayBtnText:"Delete"}).OkayCallback="var request = {}; request.ContactKey = '"+e.ContactKey+"'; request.ExternalPresenterRefKey = '"+e.ExternalPresenterRefKey+"'; request.CalendarEventKey = '"+e.CalendarEventKey+"'; request.EventPresenterKey = '"+e.EventPresenterKey+"'; hl_eventPresenters.deleteEventPresenter(request); ",t.CancelBtnText="Cancel",hl_common.confirm(t))},sortEventPresenter:function(o){void 0!==o&&(hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:i+"/SortEventPresenter",success:function(e,t,i){var n={};n.CalendarEventKey=o.CalendarEventKey,r(n)},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},deleteEventPresenter:function(o){void 0!==o&&(hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:i+"/DeleteEventPresenter",success:function(e,t,i){var n={};n.CalendarEventKey=o.CalendarEventKey,r(n),hl_common_ui_blockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getEventPresentersList:r}}(jQuery),hl_eventInvite=function(d){var u="/higherlogic/ui/mvc/events/eventinvite";return{showShareEventDialog:function(o,a){function r(e){0==d("#invitees li.tagit-choice").length?e.attr("disabled",""):e.removeAttr("disabled","")}hl_common_ui_blockUI(),d.ajax({type:"GET",dataType:"html",url:u+"/GetShareEventModal?CalendarEventKey="+o,success:function(e){var t=d("#"+o+"-invite-contact-modal");0<t.length&&t.remove(),d("body").append(e),function(o){var e=o.find("#invitees"),n=o.find("#share-submit"),a=o.find("#find-error");a.find(".details");a.hl_accessibility_hide();var s=[];e.tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,n){var t={name:e.term,includeOptOut:!1};d.ajax({url:"/higherlogic/ui/mvc/directory/directory/FindContacts/",type:"POST",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0<e.length){var t=[];s=o.find("input#share-tagged-contacts-hidden").val().replace(/,\s*$/,"").split(",");for(var i=0;i<=e.length-1;i++)s.indexOf(e[i].ContactKey)<0&&t.push(e[i]);a.hl_accessibility_hide(),n(d.map(t,funcme+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:e.FirstName+" "+e.LastName,label:t}}))}else a.hl_accessibility_show();o.find("#invitees").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3},afterTagAdded:function(e,t){var i=o.find(".tagit-label").map(function(e,t){return d(t).attr("id")}).toArray().join(",");o.find("input#share-tagged-contacts-hidden").val(i),r(n)},afterTagRemoved:function(e,t){var i=o.find(".tagit-label").map(function(e,t){return d(t).attr("id")}).toArray().join(",");o.find("input#share-tagged-contacts-hidden").val(i),r(n)}}),o.find("#invitees li.tagit-new input").on("keydown",function(e){e.which!=d.ui.keyCode.BACKSPACE&&e.which!=d.ui.keyCode.DELETE||a.hl_accessibility_hide()})}(t=d("#"+o+"-invite-contact-modal"));var i=t.find("#invitees li.tagit-new input"),n=t.find("#share-submit");i.attr("placeholder","Enter a Name or Email"),n.attr("disabled",""),n.bind("click",function(e){e.preventDefault(),function(o,a){hl_common_ui_blockUI();var t=[],s=[],r=d("#"+o+"-invite-contact-modal"),l=r.find("#invite-error"),c=l.find(".details");l.hl_accessibility_hide(),r.find("ul#invitees li span.tagit-label").each(function(e){t.push(d(this).attr("id")),s.push(d(this).text())}),d.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:u+"/ShareWithContacts?calendarEventKey="+o+"&invitees="+t.join(","),success:function(e){var i,t,n;e.Success?(r.modal("hide"),i=o,t=s,n=a,hl_common_ui_blockUI(),d.ajax({type:"GET",dataType:"html",url:u+"/GetShareEventResultModal?CalendarEventKey="+i+"&InviteeNames="+t.join(", "),success:function(e){var t=d("#"+i+"-invite-result-modal");0<t.length&&t.remove(),d("body").append(e),"function"==typeof n&&n(i),hl_common_ui_unBlockUI(),d("#"+i+"-invite-result-modal").modal("show")},error:function(){hl_common_ui_unBlockUI()}})):(c.text(e.Message),l.hl_accessibility_show(),hl_common_ui_unBlockUI())},error:function(e){c.text("Invitation could not be sent. Unexpected error has occured."),l.hl_accessibility_show(),hl_common_ui_unBlockUI()}})}(o,a)}),hl_common_ui_unBlockUI(),t.modal("show")},error:function(e){hl_common_ui_unBlockUI()}})}}}(jQuery),hl_event_admininvite=function(a){var s="/higherlogic/ui/mvc/events/eventinvite",r="00000000-0000-0000-0000-000000000000";return{showSendInvitationDialog:function(e,t){void 0===t&&(t=r),0<t.length&&0==e.length&&(e=r),hl_common_ui_blockUI(),a.ajax({type:"GET",dataType:"html",url:s+"/GetSendInvitationModal?CalendarEventKey="+e+"&CommunityKey="+t,success:function(e){var t=a("#send-invitation-modal");0<t.length&&t.remove(),a("body").append(e),t=a("#send-invitation-modal"),hl_common_ui_unBlockUI(),t.modal("show")},error:function(e){hl_common_ui_unBlockUI()}})},getSendInvitationLocationContent:function(e,o){hl_common_ui_blockUI(),a.ajax({type:"GET",dataType:"html",url:s+"/GetSendInvitationModalLocation?CalendarEventKey="+e,success:function(e,t,i){var n=a("#invite-location-container");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI(),"function"==typeof o&&o(e,t,i)},error:function(e){hl_common_ui_unBlockUI()}})},getGeocode:function(e){if(void 0!==e)return a.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",url:"/higherlogic/ui/mvc/common/common/GeocodeAddress?address="+e,async:!0})},FindContactCountByLocation:function(e,t,i,n,o){if(void 0!==e&&void 0!==t&&void 0!==i&&void 0!==n&&void 0!==o)return 0==o.length&&(o=r),a.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",url:s+"/FindContactCountByLocation?latitude="+e+"&longitude="+t+"&radius="+i+"&calendarEventKey="+n+"&communityKey="+o,async:!0})},sendInvites:function(e,n,o){hl_common_ui_blockUI(),a.ajax({type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",url:s+"/SendInvitations",success:function(e,t,i){hl_common_ui_unBlockUI(),"function"==typeof n&&n(e,t,i)},error:function(e,t,i){hl_common_ui_unBlockUI(),"function"==typeof o&&o(e,t,i)}})}}}(jQuery),hl_manageEventPricing=function(r){var l="/higherlogic/ui/mvc/events/eventpricing",c="00000000-0000-0000-0000-000000000000";return{getEventPricingModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:l+"/EventPricingModal",success:function(e,t,i){var n=r("#event-pricing-modal");0<n.length&&n.remove(),r("body").append(e),hl_common_ui_unBlockUI(),r("#event-pricing-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getEventPricingInputs:function(e,t,i){var n;void 0!==t&&void 0!==e&&void 0!==i&&(hl_common_ui_blockUI(),(n={}).CalendarEventKey=e,n.EventTypeKey=t,n.SelectedPricingTypes=i,r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(n),url:l+"/EventPricingInputs",success:function(e,t,i){var n=r("#event-pricing-inputs-container");n.replaceWith(e);var o=r("#event-registration-time");0<o.length&&(-1==o.val().join().indexOf("early")?r(".early-price-column").hide():r(".early-price-column").show(),-1==o.val().join().indexOf("late")?r(".late-price-column").hide():r(".late-price-column").show()),(n=r("#event-pricing-inputs-container")).find("label.required").append('<span class="text-danger">*</span>'),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveEventPricing:function(e){void 0!==e&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(e),url:l+"/SaveEventPricing",success:function(e,t,i){var n,o,a,s;"fail"==e.Message?(hl_common_ui_unBlockUI(),r("#invalid-event-pricing-data").show()):(r("#invalid-event-pricing-data").hide(),""!=e.AdditionalResponseData&&(n=JSON.parse(e.AdditionalResponseData)).CalendarEventKey!=c&&(o=r("#event-pricing-modal"),a=r("#event-notification-"+n.CalendarEventKey),s=r("#event-row-"+n.CalendarEventKey),0<o.length&&(o.modal("hide"),o.remove()),0<a.length&&(0<s.length&&r("html,body").animate({scrollTop:s.offset().top},500),a.show(),a.fadeOut(5e3,function(){a.hide()}))),hl_common_ui_unBlockUI())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getManageEventRows:function(o){void 0!==o&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:l+"/ManageCalendarEventsRows",success:function(e,t,i){pushStateUrl=window.location.pathname+"?"+r.param(o),void 0===history.pushState&&(location.href=pushStateUrl),history.pushState(e,null,pushStateUrl);var n=r("#manage-events-rows-container");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getCreateEventModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:l+"/CreateEventModal",success:function(e,t,i){var n=r("#add-edit-event-modal-container");0<n.length&&n.remove(),r("body").append(e),hl_common_ui_unBlockUI(),r("#modal-add-edit-event").on("shown.bs.modal",function(){r(document).off("focusin.modal")}),r("#modal-add-edit-event").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getCreateEventModalContent:function(e,t){var i;void 0!==t&&void 0!==e&&(hl_common_ui_blockUI(),(i={}).CalendarEventKey=e,i.EventTypeKey=t,r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(i),url:l+"/CreateEventModalContent",success:function(e,t,i){var n=r("#manage-calendar-events-modal-contents");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getEmailTemplates:function(e,t){if(void 0!==e)return void 0!==t&&(e.ShowHeader=t),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:l+"/EmailTemplates",success:function(e,t,i){var n=r("#event-email-templates-container"),o=r("#modal-add-edit-event").find("#event-type");0<o.length&&o.val()==c?n.replaceWith('<div id="event-email-templates-container"></div>'):n.replaceWith('<div id="event-email-templates-container">'+e+"</div>")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},eventStates:function(e){void 0!==e&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify({countryCode:e}),url:l+"/EventStates",success:function(e,t,i){var n=r("div#event-states-container"),o=r("div#states-container");0<n.length&&0<o.length&&(o.html(e),1<o.find("option").length?n.show():n.hide()),hl_common_ui_uityVisibleToPublic:function(e){void 0!==e&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify({communityKey:e}),url:l+"/CommunityVisibleToPublic",success:function(e,t,i){var n=r("#community-visibility-notification");0<n.length&&("not visible to public."==e.Message?n.show():n.hide()),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveEvent:function(e){void 0!==e&&(hl_common_ui_blockUI(),r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(e),url:l+"/SaveEvent",success:function(e,t,i){var n,o,a,s;"fail"==e.Message?(hl_common_ui_unBlockUI(),r("#invalid-event-data").show()):(r("#invalid-event-data").hide(),""!=e.AdditionalResponseData?(n=JSON.parse(e.AdditionalResponseData),o=r("#modal-add-edit-event"),n.IsNew?(0<o.length&&(o.modal("hide"),o.remove()),0<(a=r("#reset-event-filters")).length&&a.click()):((s={}).CalendarEventKey=n.CalendarEventKey,s.EventTypeKey=n.EventTypeKey,r.when(function(e){if(void 0!==e)return r.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:l+"/EventPricingOptions",success:function(e,t,i){r("#event-pricing-options-container").replaceWith(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}})}(s)).done(function(e){hl_common_ui_unBlockUI()}))):hl_common_ui_unBlockUI())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}}(jQuery),hl_manageEvents=function(g){var s="/higherlogic/ui/mvc/events/managecalendarevents",r="00000000-0000-0000-0000-000000000000";function l(o){void 0!==o&&(hl_common_ui_blockUI(),g.ajax({contetml",data:JSON.stringify(o),url:s+"/ManageCalendarEventsRows",success:function(e,t,i){pushStateUrl=window.location.pathname+"?"+g.param(o),void 0===history.pushState&&(location.href=pushStateUrl),history.pushState(e,null,pushStateUrl);var n=g("#manage-events-rows-container");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}function n(e,t){t=void 0!==t&&t,void 0!==e&&(hl_common_ui_blockUI(),g.ajax({type:"POST",dataType:"json",data:JSON.stringify({CalendarEventKey:e,NotifyInvitees:t}),contentType:"application/json; charset=utf-8",url:s+"/CancelEvent",success:function(e,t,i){var n;!e.Success||0<(n=g("#filter-events")).length&&n.click(),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}return{getManageEventRows:l,getCreateEventModal:function(e){var a;void 0!==e&&(hl_common_ui_blockUI(),a=g(document.activeElement),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:s+"/CreateEventModal",success:function(e,t,i){var n=g("#add-edit-event-modal-container");0<n.length&&n.remove(),g("body").append(e),hl_common_ui_unBlockUI();var o=g("#modal-add-edit-event");o.on("shown.bs.modal",function(){HigherLogic.Util.setModalFocusAndAccessibility(o,a)}),o.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getEventPricingModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:s+"/EventPricingModal",success:function(e,t,i){var n=g("#event-pricing-modal");0<n.length&&n.remove(),g("body").append(e),hl_common_ui_unBlockUI(),g("#event-pricing-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getSpecialPricingModal:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:s+"/SpecialPricingModal",success:function(e,t,i){var n=g("#modal-event-special-pricing");0<n.length&&n.remove(),g("body").append(e),hl_common_ui_unBlockUI(),g("#modal-event-special-pricing").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getSpecialPricingRows:function(e,o){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:s+"/SpecialPricingRows",success:function(e,t,i){var n=g("#special-pricing-table");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI(),"function"==typeof o&&o(e,t,i)},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getEventPricingInputs:function(e,t,i){var n;void 0!==t&&void 0!==e&&void 0!==i&&(hl_common_ui_blockUI(),(n={}).CalendarEventKey=e,n.EventTypeKey=t,n.SelectedPricingTypes=i,g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(n),url:s+"/EventPricingInputs",success:function(e,t,i){var n=g("#event-pricing-inputs-container");n.replaceWith(e);var o=g("#event-registration-time");0<o.length&&(-1===o.val().join().indexOf("early")?g(".early-price-column").hide():g(".early-price-column").show(),-1===o.val().join().indexOf("late")?g(".late-price-column").hide():g(".late-price-column").show()),(n=g("#event-pricing-inputs-container")).find("label.required").append('<span class="text-danger">*</span>'),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getCreateEventModalContent:function(e,t,i,n,a){var o;void 0!==t&&void 0!==e&&(hl_common_ui_blockUI(),(o={}).CalendarEventKey=e,o.EventTypeKey=t,o.EventTypeChanged=void 0!==i&&i,o.CommunityKey=void 0!==n?n:"00000000-0000-0000-0000-000000000000",g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:s+"/CreateEventModalContent",success:function(e,t,i){var n=g("#manage-calendar-events-modal-contents");if(0<n.length&&n.replaceWith(e),void 0!==a){var o=JSON.parse(a);for(persistItem in o)g(o[persistItem].Id).val(o[persistItem].Value),g(o[persistItem].Id).data("valid",o[persistItem].Valid)}hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getEmailTemplates:function(e,t){if(void 0!==e)return void 0!==t&&(e.ShowHeader=t),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:s+"/EmailTemplates",success:function(e,t,i){var n=g("#event-email-templates-container"),o=g("#modal-add-edit-event").find("#event-type");0<o.length&&o.val()===r?n.replaceWith('<div id="event-email-templates-container"></div>'):n.replaceWith('<div id="event-email-templates-container">'+e+"</div>")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},findContacts:function(e,t){if(void 0!==e&&void 0!==t)return request={},request.name=e,request.calendarEventKey=t,g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(request),url:s+"/FindContacts",success:function(e,t,i){},error:function(e,t,i){}})},eventStates:function(e,a){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify({countryCode:e}),url:s+"/EventStates",success:function(e,t,i){var n=g("div#event-states-container"),o=g("div#states-container");0<n.length&&0<o.length&&(o.html(e),1<o.find("option").length?n.show():n.hide()),"function"==typeof a&&a(),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},communityVisibleToPublic:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify({communityKey:e}),url:s+"/CommunityVisibleToPublic",success:function(e,t,i){var n=g("#community-visibility-notification");0<n.length&&("not visible to public."===e.Message?n.show():n.hide()),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveEventPricing:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(e),url:s+"/SaveEventPricing",success:function(e,t,i){var n,o,a,s;"fail"===e.Message?(hl_common_ui_unBlockUI(),g("#invalid-event-pricing-data").show()):(g("#invalid-event-pricing-data").hide(),""!==e.AdditionalResponseData&&(n=JSON.parse(e.AdditionalResponseData)).CalendarEventKey!==r&&(o=g("#event-pricing-modal"),a=g("#event-notification-"+n.CalendarEventKey),s=g("#event-row-"+n.CalendarEventKey),0<o.length&&(o.modal("hide"),o.remove()),0<a.length&&(0<s.length&&g("html,body").animate({scrollTop:s.offset().top},500),a.show(),a.fadeOut(5e3,function(){a.hide()}))),hl_common_ui_unBlockUI())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveEvent:function(e,f){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(e),url:s+"/SaveEvent",success:function(e,t,i){var n,o,a,s,r,l,c,d,u,h,p,m;"fail"===e.Message?(hl_common_ui_unBlockUI(),n=g("#invalid-event-data-details"),g("#invalid-event-data").show(),""!==e.AdditionalResponseData?(n.empty(),null!=(a=JSON.parse(e.AdditionalResponseData)).ErrorMessages&&(o=g("<ul></ul>").appendTo(n),g.each(a.ErrorMessages,function(e){g("<li/>").text(this).appendTo(o)}),n.hl_accessibility_show())):n.hl_accessibility_hide()):(g("#invalid-event-data").hide(),""!==e.AdditionalResponseData?(a=JSON.parse(e.AdditionalResponseData),s=g("#modal-add-edit-event"),!0===f?(0<s.length&&(s.modal("hide"),s.remove()),0<(r=g("#filter-events")).length?r.click():location.reload()):(l=g("#manage-calendar-events-modal-contents").find("#event-save"),c=g("#manage-calendar-events-modal-contents").find("#event-save-close"),d=g("#manage-calendar-events-modal-content").find("#event-save-series"),0<l.length&&(l.data("actionid","edit"),l.data("calendareventkey",a.CalendarEventKey),l.data("additionaldetailsformentitykey",a.AdditionalDetailsFormEntityKey),l.data("mainregistrationoptionkey",a.MainRegistrationEventOptionKey)),0<c.length&&(c.data("actionid","edit"),c.data("calendareventkey",a.CalendarEventKey),c.data("additionaldetailsformentitykey",a.AdditionalDetailsFormEntityKey),c.data("mainregistrationoptionkey",a.MainRegistrationEventOptionKey)),0<d.length&&(d.data("actionid","edit"),d.data("calendareventkey",a.CalendarEventKey),d.data("mainregistrationoptionkey",a.MainRegistrationEventOptionKey)),0<s.length&&a.IsRepeatingEvent&&(s.find("input#repeating-event").bootstrapSwitch("disabled",!0),s.find("#ends-on-date-glyph").unbind("click"),s.find("input#repeat-ends-on-date").attr("readonly",""),s.find(".repeat-config-item").attr("disabled","disabled"),s.find("button[data-id='repeat-on-days']").attr("disabled","disabled")),u=0,g("#event-additional-details-container").find(".additional-details-item").each(function(){var e=g(this).find(".adInput"),t=g(this).find(".adInclude"),i=g(this).find(".adRequired");e.data("attributekey",a.AdditionalDetailAttributeKeys[u]),t.data("attributekey",a.AdditionalDetailAttributeKeys[u+1]),i.data("attributekey",a.AdditionalDetailAttributeKeys[u+2]),u+=3}),h=s.find("#event-send-community-invitations-container"),p=s.find("#community-send-invitations"),m=h.find("#community-send-invitations-alert"),0<h.length&&h.is(":visible")&&(p.bootstrapSwitch("state")?(p.bootstrapSwitch("state",!1),m.hl_accessibility_show()):m.hl_accessibility_hide()),hl_common_ui_unBlockUI())):hl_common_ui_unBlockUI())},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},saveSpecialPricing:function(e,n,o){void 0!==e&&g.ajax({type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",url:s+"/AddEditSpecialPricing",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},deleteSpecialPricing:function(e,n,o){var t;void 0!==e&&((t={}).EventContactRegistrantClassKey=e,g.ajax({type:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",url:s+"/DeleteSpecialPricing",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}}))},putOnHold:function(l,c){void 0!==l&&void 0!==c&&(hl_common_ui_blockUI(),g.ajax({type:"POST",dataType:"json",data:JSON.stringify({CalendarEventKey:l,PutOnHold:c}),contentType:"application/json; charset=utf-8",url:s+"/PutEventOnHold",success:function(e,t,ievent-hold-"+l),o=g("#event-hold-link-"+l),a=g("#event-hold-btn-text-"+l),s=g("#event-remove-hold-btn-text-"+l),c?(n.show(),o.data("putonhold",!1),a.hide(),s.show()):(n.hide(),o.data("putonhold",!0),a.show(),s.hide()),0<(r=g("#filter-events")).length&&r.click()),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},copyEvent:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({type:"POST",dataType:"json",data:JSON.stringify({CalendarEventKey:e}),contentType:"application/json; charset=utf-8",url:s+"/CopyEvent",success:function(e,t,i){var n;!e.Success||0<(n=g("#filter-events")).length&&n.click(),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},confirmCancelEvent:function(e){var t,i;void 0!==e&&(e.HasInvites?((t={}).HeaderText=e.ConfirmTitle,t.ConfirmationText=e.ConfirmationText,t.OkayBtnText=e.CancelEventConfirmYes,t.OkayCallback="hl_manageEvents.cancelEvent('"+e.CalendarEventKey+"', false)",t.AdditionalOkayBtnText=e.CancelEventConfirmYes+" and notify invitees",t.AdditionalOkayCallback="hl_manageEvents.cancelEvent('"+e.CalendarEventKey+"', true)",t.CancelBtnText=e.CancelEventConfirmNo,t.CancellCallback="",hl_common.confirm(t)):((i=new HigherLogic.Common.Ui.dialog).setConfirmCallback(function(){n(e.CalendarEventKey)}).setConfirmLabel(e.CancelEventConfirmYes).setCancelLabel(e.CancelEventConfirmNo).setTitle(e.ConfirmTitle).setBody(e.ConfirmationText),i.render()))},cancelEvent:n,confirmDeleteEvent:function(i){void 0!==i&&g.when(function(e){if(void 0!==e)return hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify({calendarEventKey:e}),url:s+"/DeleteConfirmationText",success:function(e,t,i){hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})}(i.CalendarEventKey)).then(function(e){var t={HeaderText:"Delete Event - Confirmation"};t.ConfirmationText=e.NotificationText,e.AllowDelete&&(t.OkayBtnText=i.IsRepeatingEvent?"Delete event":"Delete",t.OkayCallback="var request = {}; request.CalendarEventKey = '"+i.CalendarEventKey+"'; hl_manageEvents.deleteEvent(request); "),i.IsRepeatingEvent&&e.AllowDeleteSeries&&(t.AdditionalOkayBtnText="Delete all events in this series",t.AdditionalOkayCallback="var request = {}; request.CalendarEventKey = '"+i.CalendarEventKey+"'; request.DeleteSeries = true; hl_manageEvents.deleteEvent(request); "),t.CancelBtnText=e.AllowDelete||e.AllowDeleteSeries?"Cancel":"Ok",t.CancellCallback="",hl_common.confirm(t)})},deleteEvent:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(e),url:s+"/DeleteEvent",success:function(e,t,i){var n=g("#manage-events-sort-filter"),o=g("#manage-events-status-filter"),a=g("#manage-events-event-type-filter"),s=g("#manage-events-community-filter"),r={};r.SortBy=n.val(),r.ListFilters={},r.ListFilters.StatusFilter=o.val(),r.ListFilters.EventTypeFilter=a.val(),r.ListFilters.CommunitiesFilter=null!=s.val()?s.val().join(","):"",r.ListFilters.SearchTerm=g("#manage-events-search-searchInput").val(),r.ListFilters=JSON.stringify(r.ListFilters),r.CommunityKey=hl_common_util_getParameterByName("CommunityKey"),l(r)},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getRepeatEventSummary:function(e){if(void 0!==e)return hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(e),url:s+"/GetRepeatEventSummary",success:function(e,t,i){var n,o,a,s,r=g("#repeating-event-container");0<r.length&&(0<(n=r.find("#repeat-event-config-summary")).length&&(o=JSON.parse(e),r.find("#max-occurrences-allowed").text(o.MaxOccurrences),0!=o.OriginalOccurrences&&r.find("#repeat-ends-after-occurrences").val(o.OriginalOccurrences),n.text(o.Summary),""!=o.SeriesStartDate&&((a=g("#event-start-date")).val(o.SeriesStartDate),a.attr("title",o.SeriesStartDate),(s=r.find("#repeat-starts-on")).val(o.SeriesStartDate),s.attr("title",o.SeriesStartDate)))),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getEventSeriesList:function(e){void 0!==e&&(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify({calendarEventKey:e}),url:s+"/GetEventSeriesList",success:function(e,t,i){var n=g("#event-series-list-modal-container");0<n.length&&n.remove(),g("body").append(e),hl_common_ui_unBlockUI(),g("#event-series-list-modal").modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getRepeatingEventsConfig:function(e){return void 0!==e?(hl_common_ui_blockUI(),g.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:s+"/RepeatingEventConfig",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})):""}}}(jQuery),hl_manageRegistrantRoster=function(s){var a="/higherlogic/ui/mvc/events/manageregistrantroster",o="00000000-0000-0000-0000-000000000000";function r(e,t,o,a){hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:t,success:function(e,t,i){var n=s("#"+o);0<n.length&&n.remove(),s("body").append(e),(n=s("#"+o)).modal("show"),hl_common_ui_unBlockUI(),"function"==typeof a&&a(e,t,i)},error:function(e,t,i){hl_common_ui_unBlockUI()}})}return{openRegistrantDetailsModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantDetailsModal",t,i)},openRegistrantNotesModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantNotesModal",t,i)},addRegistrantNote:function(e,t,n,o){var i;void 0!==e&&void 0!==t&&((i={}).RegistrantKey=e,i.NoteText=t,s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(i),url:"/higherlogic/ui/mvc/events/manageregistrantroster/AddRegistrantNote",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}}))},refreshRegistrantNotes:function(e,n,o){var t;void 0!==e&&((t={}).RegistrantKey=e,hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantNotesModalRows",success:function(e,t,i){s("#"+n).html(e),hl_common_ui_unBlockUI(),"function"==typeof o&&o(e,t,i)},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},openSubstituteModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantSubstituteModal",t,i)},substituteRegistrant:function(e,t,n,o){var i={};i.RegistrantKey=e,i.SubstituteContactKey=t,s.ajax({type:"POST",dataType:"json",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",url:a+"/SubstituteRegistrant",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},openSpecialPricingModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantSpecialPricingModal",t,i)},saveSpecialPricing:function(e,t,n,o){var i={};i.RegistrantKey=e,i.RegistrantClassKey=t,s.ajax({type:"POST",dataType:"json",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",url:a+"/RegistrantSpecialPricingSave",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},deleteRegistrant:function(e,n,o){var t;void 0!==e&&(hl_common_ui_blockUI(),(t={}).RegistrantKey=e,s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"json",data:JSON.stringify(t),url:"/higherlogic/ui/mvc/events/manageregistrantroster/DeleteRegistrant",success:function(e,t,i){hl_common_ui_unBlockUI(),"function"==typeof n&&n(e,t,i)},error:function(e,t,i){hl_common_ui_unBlockUI(),"function"==typeof o&&o(e,t,i)}}))},markAttended:function(e,t,n,o){var i={};i.RegistrantKey=e,i.Attended=t,s.ajax({type:"POST",dataType:"json",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",url:a+"/RegistrantMarkAttended",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},openSendConfirmationModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantSendConfirmationModal",t,i)},sendConfirmation:function(e,t,n,o){var i={};i.RegistrantKey=e,i.EmailAddress=t,s.ajax({type:"POST",dataType:"json",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",url:a+"/SendConfirmation",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},openCancelRegistrationModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantCancelModal",t,i)},cancelRegistration:function(e,n,o){var t={};t.RegistrantKey=e,s.ajax({type:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",url:a+"/CancelRegistrant",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},openRefundModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantRefundModal",t,i)},saveRefund:function(e,n,o){s.ajax({type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",url:a+"/RegistrantRefundSave",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},openEmailModal:function(e,t,i){0==e.length&&(e=o);var n={};n.RegistrantKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantEmailModal",t,i)},sendEmailToRegistrant:function(e,n,o){s.ajax({type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",url:a+"/SendEmailToRegistrant",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})},openIncompleteRegistrationModal:function(e,t){0==e.length&&(e=o);var i={};i.RegistrantKey=e,r(i,"/higherlogic/ui/mvc/events/manageregistrantroster/RegistrantIncompleteRegistrationModal",t,null)},openAddAttendeeModal:function(e,t,i){0===e.length&&(e=o);var n={};n.calendarEventKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/AddAttendeeModal",t,i)},openAddRegistrantModal:function(e,t,i){0===e.length&&(e=o);var n={};n.calendarEventKey=e,r(n,"/higherlogic/ui/mvc/events/manageregistrantroster/AddRegistrantModal",t,i)},refreshAttendanceSummary:function(e){var t;void 0!==e&&((t={}).CalendarEventKey=e,hl_common_ui_blockUI(),s.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:"/higherlogic/ui/mvc/events/manageregistrantroster/AttendanceSummary",success:function(e,t,i){s("#attendance-summary").html(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}}(jQuery),hl_manageRegistration=function(l){var t="/higherlogic/ui/mvc/events/manageregistrantroster";return{openOfflinePaymentModal:function(e,t,i){0==e.length&&(e="00000000-0000-0000-0000-000000000000");var n,o,a,s,r={};r.RegistrantKey=e,n=r,o="/higherlogic/ui/mvc/events/manageregistrantroster/RegistrationOfflinePaymentModal",a=t,s=i,hl_common_ui_blockUI(),l.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(n),url:o,success:function(e,t,i){var n=l("#"+a);0<n.length&&n.remove(),l("body").append(e),n=l("#"+a),hl_common_ui_unBlockUI(),n.modal("show"),"function"==typeof s&&s()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},saveOfflinePaymentInfo:function(e,n,o){l.ajax({type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",url:t+"/RegistrationOfflinePaymentSave",success:function(e,t,i){"function"==typeof n&&n(e,t,i)},error:function(e,t,i){"function"==typeof o&&o(e,t,i)}})}}}(jQuery),hl_simpleRegistration=function(c){var d="/higherlogic/ui/mvc/events/simpleregistration";function s(e){return"00000000-0000-0000-0000-000000000000"!=e?c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetSimpleRegCartContent?CalendarEventKey="+e,success:function(e,t,i){var n=c(".simple-reg-cart-content");0<n.length&&n.remove(),0<c("span.cartContentPlaceholder").length&&c("span.cartContentPlaceholder").replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}}):(hl_common_ui_unBlockUI(),"")}function r(){return c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:d+"/RegistrarHasActiveRegistration",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})}function l(e,t){return c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetActiveRegistrationAlert?registrantKey="+e+"&isPostCheckout="+t,success:function(e,t,i){var n=c("#active-registration-alert-placeholder");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})}function u(){var e={},t=c("[biobubblekey]");for(var i in t.each(function(){e[c(this).attr("biobubblekey")]=!0}),e)c("#bioBubbleShell"+i).hl_ui_bioBubble({displayContactKey:i,eventTriggers:c("[biobubblekey='"+i+"']"),authToken:CrestApiCookies.getHLAuthToken(),tenantKey:CrestApiCookies.getTenantKey()})}return{verifyGuest:function(e,n){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",url:d+"/SimpleRegVerifyGuestRegistrar?emailAddress="+e,)return""!=e;n(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}})},verifyContact:function(e,n){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",url:d+"/SimpleRegVerifyContact?emailAddress="+e,success:function(e,t,i){if("function"!=typeof n)return""!=e;n(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}})},createGuest:function(e,t,i,n,o,a){hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",url:d+"/CreateGuest?emailAddress="+e+"&firstName="+t+"&lastName="+i+"&companyName="+n+"&contactKey="+o,success:function(e,t,i){"function"==typeof a?a(e):hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},createRegisterContact:function(e){hl_common_ui_blockUI();var t={};t.NewContact=e.NewContact,t.EmailAddress=e.EmailAddress,t.FirstName=e.FirstName,t.LastName=e.LastName,t.CompanyName=e.CompanyName,t.CalendarEventKey=e.CalendarEventKey,t.RegistrarContactKey=e.RegistrarContactKey,t.RegistrantClassKey=e.RegistrantClassKey,t.SelectBestPrice=e.SelectBestPrice,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:d+"/CreateRegisterContact",success:function(e,t,i){s(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},registrantPricingKey:function(e,t,i){var n={};return n.eventKey=e,n.eventOptionKey=t,n.contactKey=i,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(n),url:d+"/RegistrantPricingKey",success:function(e,t,i){},error:function(e,t,i){}})},registrarStatus:function(e){return c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify({emailAddress:e}),url:d+"/GetRegistrarStatus",success:function(e,t,i){},error:function(e,t,i){}})},getCreateRegisterContact:function(e,t,i,n,o,a,s,r){hl_common_ui_blockUI();var l={};l.CalendarEventKey=t,l.RegistrarContactKey=i,l.registrarEmailAddress=unescape(n),l.Name=unescape(e),l.RequireCompanyName=o,l.SelectBestPrice=a,l.NewContact=s,l.NewContactRegistrar=r,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(l),url:d+"/GetCreateRegisterContact",success:function(e,t,i){var n=c("#simple-reg-create-register-panel");0<n.length&&n.remove(),c("body").append(e),n=c("#simple-reg-create-register-panel"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getSimpleRegistrationContent:function(e,o,t,a){hl_common_ui_blockUI();var i={};return i.CalendarEventKey=o,i.RegistrarContactKey=e,i.ShowWhenUnauthenticated=t,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(i),url:d+"/GetSimpleRegistrationContent",success:function(e,t,i){var n=c("#simple-reg-registration-content");0<n.length&&n.remove(),c("#simple-reg-registration-content-placeholder").replaceWith(e),c.when(r()).then(function(e,t,i){function n(){void 0!==a&&1!=a||s(o)}0<c("#active-registration-alert-placeholder").length&&""!=e?c.when(l(e,!0)).then(function(e,t,i){n()}):n()})},error:function(e,t,i){hl_common_ui_unBlockUI()}})},findRegistrantsJSON:function(e,t,i,n){return c.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",data:{name:e,contactKey:t,eventKey:i,eventOptionKey:n},url:d+"/FindRegistrants",success:function(e,t,i){},error:function(e,t,i){}})},addRegistrantToCart:function(e){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(e),url:d+"/AddToCart",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getRegisterNowPayLaterConfirmation:function(){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetRegisterNowPayLaterConfirmation",success:function(e,t,i){var n=c("#modal-pay-later-confirmation");0<n.length&&n.remove(),c("body").append(e),n=c("#modal-pay-later-confirmation"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},registerNow:function(){return c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",url:d+"/RegisterNow",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})},registerNowPayLater:function(){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",url:d+"/RegisterNowPayLater",success:function(e,t,i){hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},removeRegistrantFromCart:function(e){c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",url:d+"/RemoveFromCart?registrantInfoKey="+e,success:function(e,t,i){c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetCheckoutRegistrants",success:function(e,t,i){var n=c(".checkout-registrants-list");0<n.length&&n.html(""),n.append(e);var o=c("#simple-reg-pay-later"),a=c("#simple-reg-register-now"),s=c("#paypal-payment-hidden");0==c(".simple-reg-checkout-cart-item").length?(o.attr("disabled",""),"paypal"==a.attr("provider")||"cybersource"==a.attr("provider")?(a.hide(),s.hide()):a.attr("disabled",""),c(window).unbind("beforeunload.simpleRegistration")):("paypal"==a.attr("provider")&&(s.hide(),c.fn.hl_simpleRegistration_Checkout.register(!0)),u())},error:function(e,t,i){hl_common_ui_unBlockUI()}})},error:function(e,t,i){hl_common_ui_unBlockUI()}})},loadCart:s,getCartSummary:function(){c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetSimpleRegCartSummary",success:function(e,t,i){var n=c("#simple-reg-cart-summary");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getAvailableRegistrationsExceeded:function(){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetAvailableRegistrationsExceeded",success:function(e,t,i){var n=c("#modal-cart-to-full");0<n.length&&n.remove(),c("body").append(e),n=c("#modal-cart-to-full"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getRegistrantsAlreadyRegistered:function(){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetRegistrantsAlreadyRegistered",success:function(e,t,i){var n=c("#modal-registrants-already-registered");0<n.length&&n.remove(),c("body").append(e),n=c("#modal-registrants-already-registered"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}})},checkout:function(e){hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetSimpleRegCheckout?ShowAsPanel="+e,success:function(e,t,i){var n=c(".simple-reg-checkout-cart");0<n.length&&n.remove();var o=c(".simple-reg-register-container"),a=c(".event-attendance-container"),s=c(".ContentItemMVC").has(".simple-reg-item"),r=c("#checkout-placeholder");0<r.length&&(0<o.length?o.hide():s.hide(),0<a.length&&a.hl_accessibility_hide(),r.after(e))},error:function(e,t,i){hl_common_ui_unBlockUI()}})},stripeCheckout:function(e){var t;""!=e&&((t={}).RegistrationKey=e,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:d+"/StripeCheckout",success:function(e,t,i){var n=c("#simple-reg-stripe-checkout");0<n.length&&n.remove(),c("body").append(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},payPalCheckout:function(e){if(""==e)return"";var t={};return t.RegistrationKey=e,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:d+"/InvokePayPalPaymentTransaction",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})},completePaymentTransaction:function(e){if(""!=e){var t={};return t.RegistrationKey=e,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:d+"/CompletePaymentTransaction",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})}},emptyCart:function(e,n){return hl_common_ui_blockUI(),c.ajax({contentType:"application/json; charset=utf-8",type:"Post",async:!1,dataType:"html",url:d+"/EmptyCart?CalendarEventKey="+e,success:function(e,t,i){c(window).unbind("beforeunload.simpleRegistration"),void 0!==n&&1!=n||s(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}})},loadActiveRegistration:function(e){c.when(r()).then(function(e,t,i){0<c("#active-registration-alert-placeholder").length&&""!=e&&l(e)})},getActiveRegistrationAlert:l,deleteRegistration:function(e){if(""==e)return"";var t={};return t.registrationKey=e,t.removeFromCart="00000000-0000-0000-0000-000000000000",c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:d+"/DeleteRegistration",success:function(e,t,i){},error:function(e,t,i){hl_common_ui_unBlockUI()}})},previousRegistration:function(e,t){var i;""!=e&&((i={}).registrationKey=e,i.CalendarEventKey=t,i.PreviousRegistrationFound="True",c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(i),url:d+"/PreviousRegistration",success:function(e,t,i){var n=c("#modal-previous-registration");0<n.length&&n.remove(),c("body").append(e),n=c("#modal-previous-registration"),hl_common_ui_unBlockUI(),n.modal("show")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))},getSimpleRegLocation:function(e){""!=e&&c.ajax({contentType:"application/json; charset=utf-8",type:"Get",dataType:"html",url:d+"/GetSimpleRegLocation?CalendarEventKey="+e,success:function(e,t,i){var n=c(".simple-reg-location-content");0<n.length&&n.replaceWith(e),hl_common_ui_unBlockUI()},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getSimpleRegPricing:function(e,t,i,n){if(""==e||""==t)return"";var o={};return o.CalendarEventKey=n,o.RegistrantSearch=e,o.SearchRegistrant=t,o.selectBestPrice=i,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:d+"/GetRegistrantPricing",success:function(e,t,i){var n=c("#simple-reg-select-price-container");0<n.length&&n.replaceWith(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}})},getCreateRegistrantPricing:function(e,t,i,n){if(""==e||""==t)return"";var o={};return o.CalendarEventKey=n,o.RegistrantSearch=e,o.SearchRegistrant=t,o.selectBestPrice=i,c.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(o),url:d+"/GetCreateRegistrantPricing",success:function(e,t,i){var n=c("#create-registrant-select-price-container");0<n.length&&n.replaceWith(e)},error:function(e,t,i){hl_common_ui_unBlockUI()}})},loadBioBubbles:u}}(jQuery),navCtl,validationCallback;function hl_microsites_colorpicker_changeCss(t,i,n){for(var e,o=!1,a=0;a<document.styleSheets.length;a++)if("SampleStyleSheet"==document.styleSheets[a].title){if(document.styleSheets[a].rules)e="rules";else{if(!document.styleSheets[a].cssRules)continue;e="cssRules"}for(var s=0;s<document.styleSheets[a][e].length;s++)if(document.styleSheets[a][e][s].selectorText==t){var r="background-color"==i?"backgroundColor":i;if(document.styleSheets[a][e][s].style[r]){if(null!=n){"null"!=n&&(document.styleSheets[a][e][s].style[r]=n),o=!0;break}document.styleSheets[a].deleteRule(s)}}if(!o){if(document.styleSheets[a].insertRule){if("null"!=n)try{document.styleSheets[a].insertRule(t+" { "+i+": "+n+"; }",document.styleSheets[a][e].length)}catch(e){"IndexSizeError"===e.message&&document.styleSheets[a].insertRule(t+" { "+i+": "+n+"; }",0)}break}if(document.styleSheets[a].addRule){"null"!=n&&document.styleSheets[a].addRule(t,i+": "+n+";");break}}}}function hl_microsites_colorpicker_radColorPicker_OnPopUpShow(e,t){0<$(".ui-dialog-content").length&&$(".ui-dialog-content").scrollTop($(".ui-dialog-content")[0].scrollHeight)}function hl_microsites_master_Ready(t,i){$(t).find("a.MPButtonNav").each(function(e){switch(this.innerHTML){case"Site List":case"Theme Manager":$(this).data("callback","");break;case"Site Setup":$(this).data("callback",siteSetupValidation);break;case"Ads":$(this).data("callback",validateAd);break;case"Traffic":case"Navigation":$(this).data("callback","")}$(this).bind("click",function(e){hl_microsites_master_clearClickFlags(),validationCallback=$($(t).find("a.selected")).data("callback")?$($(t).find("a.selected")).data("callback"):"",hl_microsites_master_checkFormDirty(this,e,i,validationCallback)||hl_microsites_master_noDirtyFormValidation(t,e,validationCallback)})}),$("#modelSiteLink").bind("click",function(e){hl_microsites_master_clearClickFlags(),validationCallback=$($(t).find("a.selected")).data("callback")?$($(t).find("a.selected")).data("callback"):"",hl_microsites_master_checkFormDirty(this,e,i,validationCallback)||hl_microsites_master_noDirtyFormValidation(t,e,validationCallback)}),$("#siteAdminForLink").bind("click",function(e){hl_microsites_master_clearClickFlags(),validationCallback=$($(t).find("a.selected")).data("callback")?$($(t).find("a.selected")).data("callback"):"",hl_microsites_master_checkFormDirty(this,e,i,validationCallback)||hl_microsites_master_noDirtyFormValidation(t,e,validationCallback)}),$("#siteAdminThemeLink").bind("click",function(e){hl_microsites_master_clearClickFlags(),validationCallback=$($(t).find("a.selected")).data("callback")?$($(t).find("a.selected")).data("callback"):"",hl_microsites_master_checkFormDirty(this,e,i,validationCallback)||hl_microsites_master_noDirtyFormValidation(t,e,validationCallback)})}function hl_microsites_master_noDirtyFormValidation(e,t,i){"Ads"==$($(e).find("a.selected")).prop("innerHTML")&&0==i()&&t.preventDefault()}function hl_microsites_master_clearClickFlags(){"undefined"!=typeof TabClickedID&&$(TabClickedID).val("false"),"undefined"!=typeof AdSaveBtnClickedID&&$(AdSaveBtnClickedID).val("false"),"undefined"!=typeof CrossSiteAdSaveBtnClickedID&&$(CrossSiteAdSaveBtnClickedID).val("false")}function hl_microsites_master_checkFormDirty(e,t,i,n){var o=!1;return 1==SelectThemeDirty&&1==DesignThemeSelected&&(SelectThemeDirty=!1),1!=isDirty&&1!=ThemeConfigOptionDirty&&1!=SelectThemeDirty&&1!=DesignTabsDirty&&1!=CrossSiteAdDirty||(t.preventDefault(),navCtl=t.currentTarget,$(i).val($(e).prop("href")),hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(function(){hl_microsites_master_saveContinueCallback(n)},function(){hl_microsites_master_continueNoSave()},"dialogNavSaveUnsavedData","Save and continue","Continue without saving",!0,600,150,"Warning","There are unsaved changes on this page. \nHow would you like to proceed?"),o=!0),o}!function(_){_.fn.hl_eventadmin_eventoptioncategories=function(e){var i,t,n,o=_.extend({isSession:!1,confirmDeleteYesText:"Yes",confirmDeleteDialogTitle:"Confirm Delete",confirmDeleteMessage:"Are you sure you want to delete this record?",unexpectedErrorMessage:"Unexpected error has occured. Please try again later and notify the site administrator if this problem persists."},e||{}),a=_(this),s=a.find(".event-option-category-add"),r="modal-addedit-event-option-category",l=a.find("#event-option-categories-tabs").find("#optionsTab"),c=a.find("#event-option-categories-tabs").find("#sessionsTab");function d(){i=_("#"+r),t=i.find(".event-admin-modal-save"),$modalItemKey=i.find(".event-admin-modal-item-key"),$modalErrorMessage=i.find(".event-admin-modal-error-message"),t.on("click",function(e){e.preventDefault(),function(){var e=i.find(".item-name"),t=i.find(".item-name-label");return 0==e.val().trim().length?(e.parent().addClass("has-error"),t.parent().addClass("has-error"),void e.focus()):(e.parent().removeClass("has-error"),t.parent().removeClass("has-error"),1)}()&&(hl_common_ui_bequest.EventOptionCategoryKey=i.find("#event-option-category-key").val(),request.EventOptionCategoryName=i.find("#event-option-category-name").val(),request.EventOptionCategoryDescription=i.find("#event-option-category-description").val(),request.IsASt.AllowMultipleSelections=i.find("#allowmultipleselections").val(),o.isSession||(request.IsPriceDisplayed=i.find("#ispricedisplayed").val()),hl_admin_events.saveAdminItem("eventOptionCategory",request,m,f))})}function u(e){var t=o.isSession;void 0!==e&&(t=e),t?hl_admin_events.refreshList("eventOptionCategorySessions","event-option-categories-content",h):hl_admin_events.refreshList("eventOptionCategoryOptions","event-option-categories-content",h)}function h(){hl_common_ui_unBlockUI()}function p(){hl_common_ui_blockUI(),hl_admin_events.deleteAdminItem("eventOptionCategory",n,g,v)}function m(e){e&&(e.Success?(i.modal("hide"),u()):(hl_common_ui_unBlockUI(),$modalErrorMessage.text(e.Message),$modalErrorMessage.hl_accessibility_show()))}function f(e,t,i){hl_common_ui_unBlockUI(),$modalErrorMessage.text(o.unexpectedErrorMessage),$modalErrorMessage.hl_accessibility_show()}function g(e){e&&(e.Success?u():alert(e.Message))}function v(e,t,i){alert(o.unexpectedErrorMessage)}function y(e){e&&(e.Success?(hl_common_ui_unBlockUI(),u()):(hl_common_ui_unBlockUI(),alert(e.Message)))}function b(e,t,i){hl_common_ui_unBlockUI(),alert(e.Message)}l.on("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),u(!1)}),c.on("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),u(!0)}),s.on("click",function(e){e.preventDefault(),hl_admin_events.openAdminAddEditModal("eventOptionCategory",_(this).data("itemkey"),r,d,o.isSession)}),a.find(".item-edit").on("click",function(e){hl_admin_events.openAdminAddEditModal("eventOptionCategory",_(this).data("itemkey"),r,d),d(),e.preventDefault()}),a.find(".item-delete").on("click",function(e){e.preventDefault(),hl_common_ui_showBootstrapDeleteDialog(n=_(this).data("itemkey"),o.confirmDeleteYesText,o.confirmDeleteDialogTitle,o.confirmDeleteMessage,p)}),a.find(".item-disable").on("click",function(e){var t;e.preventDefault(),t=_(this).data("itemkey"),hl_common_ui_blockUI(),hl_admin_events.updateAdminItemStatus("eventOptionCategory",t,!1,g,v)}),a.find(".item-enable").on("click",function(e){var t;e.preventDefault(),t=_(this).data("itemkey"),hl_common_ui_blockUI(),hl_admin_events.updateAdminItemStatus("eventOptionCategory",t,!0,g,v)}),a.find(".item-sortable").on("click",function(e){var t,i,n=_(this).data("itemkey"),o="1"==_(this).data("isup");t=n,i=o,hl_admin_events.updateSortOrder("eventOptionCategory",t,i,y,b),e.preventDefault()})}}(jQuery),function($){$.fn.hl_manageEvents_emailTemplates=function(e){var t={showTemplateOverride:!1,RegistrationProcessOption:0};$.extend(t,e);var i,n,o,a,s,r,l,c,d,u,h,p,m,f,g,v,y,b=$(this),_=b.find("#event-invite-template-container");t.showTemplateOverride&&(i=b.find("input#send-reminder-emails"),n=b.find("#upcoming-event-reminders-container"),o=b.find("#upcoming-event-reminder-template"),a=b.find("#days-before-reminder-container"),s=b.find("#days-before-reminder"),r=b.find("#reminder-postfix"),l=b.find("#reminder-postfix-same-day"),c=b.find("p#reminder-note"),d=b.find("#upcoming-event-reminder2-template"),u=b.find("#days-before-reminder2-container"),h=b.find("#days-before-reminder2"),p=b.find("#reminder2-postfix"),m=b.find("#reminder2-postfix-same-day"),f=b.find("p#reminder2-note"),g=b.find("#event-invite-template"),v=b.find("#repeating-invite-template"),_=b.find("#event-invite-template-container"),y=b.find("#repeating-invite-template-container"));var w=$("#event-community"),C=$("#repeating-event"),k=b.find("#event-send-community-invitations-container"),x=b.find("#record-attendance-reminder-template-container");function S(){var e,t,i;0<k.length&&(e=b.find("#community-send-invitations"),w.val()==I?(k.hl_accessibility_hide(),e.bootstrapSwitch("state",!1)):0<_.length?(t=b.find("#repeating-invite-template"),i=b.find("#event-invite-template"),"none"!=y.css("display")&&t.val()!=I||"none"!=_.css("display")&&i.val()!=I?k.hl_accessibility_show():(k.hl_accessibility_hide(),e.bootstrapSwitch("state",!1))):k.hl_accessibility_show())}function T(){0<x.length&&t.RegistrationProcessOption<3&&(w.val()==I?x.hl_accessibility_hide():x.hl_accessibility_show())}!function(){t.showTemplateOverride&&i.bootstrapSwitch();(function(){t.showTemplateOverride&&(i.on("switchChange.bootstrapSwitch",function(e,t){1==t?n.show():n.hide()}),o.on("change",function(){$(this).val()!=I?(a.show(),c.hide()):(a.hide(),c.show())}),s.on("change",function(){"0"!=$(this).val()?(r.show(),l.hide()):(r.hide(),l.show())}),d.on("change",function(){$(this).val()!=I?(u.show(),f.hide()):(u.hide(),f.show())}),h.on("change",function(){"0"!=$(this).val()?(p.show(),m.hide()):(p.hide(),m.show())}),g.on("change",S),v.on("change",S));0<k.length&&(w.on("change",S),C.on("switchChange.bootstrapSwitch",S));0<x.length&&w.on("change",T)})(),0<k.length&&S();0<x.length&&T()}()};var I="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(N){function B(e,t){var i=N("#you-are-placeholder"),n=N("#registrar-status-placeholder"),o=N("#registration-header-placeholder");if(0<n.length)":a='<span id="registrar-status-placeholder" class="registrar-status-placeholder text-muted">'+t.alreadyRegisteredText+"</span>",o.replaceWith('<span id="registration-header-placeholder">'+t.registrationOthersText+"</span>");break;case"in-cart":i.replaceWith('<span id="you-are-placeholder" class="you-are-placeholder"> '+i.html().replace(".","")+"</span>"),a='<span id="registrar-status-placeholder" class="registrar-status-placeholder text-muted">'+t.alreadyInCartText+"</span>",o.replaceWith('<span id="registration-header-placeholder">'+t.registrationOthersText+"</span>");break;default:i.replaceWith('<span id="you-are-placeholder" class="you-are-placeholder"> '+i.html()+".</span>"),a='<span id="registrar-status-placeholder" class="registrar-status-placeholder text-muted">'+t.registerYourselfAndOthersText+"</span>",o.replaceWith('<span id="registration-header-placeholder">'+t.registrationHeaderText+"</span>")}n.replaceWith(a)}}function C(){postUrl=window.location.href,-1!=postUrl.indexOf("&")&&(pushStateUrl=postUrl.replace(postUrl.substr(postUrl.indexOf("&"),postUrl.length),""),void 0===history.pushState&&(location.href=pushStateUrl),history.pushState(pushStateUrl,null,pushStateUrl))}N.fn.hl_simpleRegistration_ActiveRegistration=function(e){N.extend({registrantKey:""},e)},N.fn.hl_simpleRegistration_Registrar=function(e){var o={eventKey:"",eventOptionKey:"",registrarKey:"",welcomeText:"Welcome,",previouslyRegisteredContacts:"[{}]",registrantPriceRequiredText:"Choose registrant price",confirmText:"",createContactAndRegisterText:"Create contact and register?",requireCompanyName:"True",selectBestPrice:"True",youAreText:"You are",alreadyRegisteredText:"and are already registered for this event",alreadyInCartText:"Your registration is in the cart. Enter name to register others. Checkout to finish registration.",registerYourselfAndOthersText:"Register yourself by adding registration to the cart or clear and register others.",emailInvalidText:"Invalid Email Address.",emailRequiredText:"Email Address required. Please enter an Email Address.",firstNameRequiredText:"First Name required. Please enter a First Name.",lastNameRequiredText:"Last Name required. Please enter a Last Name.",companyNameRequiredText:"Company Name required. Please enter a Company Name",allowPublicUserRegistration:"True",captchaResponse:"",disableRecaptcha:!1};N.extend(o,e);var t=N("#simple-reg-registrar-info-container"),i=N("#simple-reg-registration-panel"),n="([a-zA-Z_0-9.-]+\\@[a-zA-Z_0-9.-]+\\.\\w+)",a=N(".simple-reg-guest-email-container"),s=N("#simple-reg-email-address"),r=N(".simple-reg-guest-first-name-container"),l=N("#simple-reg-first-name"),c=N(".simple-reg-guest-last-name-container"),d=N("#simple-reg-last-name"),u=N(".simple-reg-guest-company-name-container"),h=N("#simple-reg-company-name"),p=o.disableRecaptcha?N("#continue-as-guest-btn"):N("#continue-as-guest-recaptcha-btn"),m=N("#continue-as-guest-recaptcha-container"),f=N("#email-address-help-block"),g=N("#first-name-help-block"),v=N("#last-name-help-block"),y=N("#company-name-help-block"),b=N(".recaptcha-error-container");!function(){(function(){s.on("blur",function(){N("#simple-reg-guest-contact-exists").remove(),a.removeClass("required").removeClass("has-error"),f.text("").hide(),r.removeClass("required").removeClass("has-error"),g.text("").hide(),c.removeClass("required").removeClass("has-error"),v.text("").hide(),u.removeClass("required").removeClass("has-error"),y.text("").hide(),""!=s.val()?null==s.val().match(n)?(a.addClass("required").addClass("has-error"),f.append(o.emailInvalidText).show(),l.val(""),d.val(""),h.val(""),l.removeAttr("disabled"),d.removeAttr("disabled"),h.removeAttr("disabled"),p.attr("disabled","")):(a.removeClass("required").removeClass("has-error"),f.text("").hide(),hl_simpleRegistration.verifyGuest(N(this).val(),_)):(l.val(""),d.val(""),h.val(""),l.removeAttr("disabled"),d.removeAttr("disabled"),h.removeAttr("disabled"),p.attr("disabled",""))});function t(e,t){if(e.preventDefault(),(!t||0!==grecaptcha.getResponse().length)&&(a.removeClass("required").removeClass("has-error"),f.text("").hide(),r.removeClass("required").removeClass("has-error"),g.text("").hide(),c.re-error"),v.text("").hide(),u.removeClass("required").removeClass("has-error"),y.text("").hide(),function(){var e=!0;""==s.val()&&(a.addClass("required").addClass("has-error"),f.append(o.emailRequiredText).show(),e=!1);""==l.val()&&(r.addClass("required").addClass("has-error"),g.append(o.firstNameRequiredText).show(),e=!1);""==d.val()&&(c.addClass("required").addClass("has-error"),v.append(o.lastNameRequiredText).show(),e=!1);""!=h.val()||"True"!=o.requireCompanyName||h.is(":disabled")||(u.addClass("required").addClass("has-error"),y.append(o.companyNameRequiredText).show(),e=!1);return e}())){if(!m.is(":visible"))return 0==N("#simple-reg-guest-contact-exists").length?hl_simpleRegistration.createGuest(s.val(),l.val(),d.val(),h.val(),"00000000-0000-0000-0000-000000000000",w):hl_simpleRegistration.createGuest(s.val(),l.val(),d.val(),h.val(),N("#simple-reg-guest-contact-exists").val(),w),0;var i=0==N("#simple-reg-guest-contact-exists").length?"00000000-0000-0000-0000-000000000000":N("#simple-reg-guest-contact-exists").val(),n=N("form").attr("action");n+="&ContinueAsGuest=True&EmailAddress="+s.val()+"&FirstName="+l.val()+"&LastName="+d.val()+"&CompanyName="+h.val()+"&GuestContactKey="+i,N("form").attr("action",n),N("form").submit()}}p.click(function(e){t(e,!o.disableRecaptcha)})})(),o.disableRecaptcha||p.attr("disabled","");0<b.length&&""!=s.val()&&(p.removeAttr("disabled"),C())}();var _=function(e){var t;"True"==JSON.parse(e).GuestExists?(t=JSON.parse(e),l.val(t.FirstName),d.val(t.LastName),h.val(t.CompanyName),l.attr("disabled","disabled"),d.attr("disabled","disabled"),h.attr("disabled","disabled"),N("body").append('<input id="simple-reg-guest-contact-exists" type="hidden" value="'+t.Key+'">')):(l.val(""),d.val(""),h.val(""),l.removeAttr("disabled"),d.removeAttr("disabled"),h.removeAttr("disabled")),p.removeAttr("disabled"),hl_common_ui_unBlockUI()},w=function(e){hl_common_ui_blockUI(),t.remove(),i.show(),hl_simpleRegistration.loadActiveRegistration(!0),hl_simpleRegistration.loadCart(o.eventKey),N().hl_simpleRegistration_Register({eventKey:o.eventKey,eventOptionKey:o.eventOptionKey,registrarContactKey:e,previouslyRegisteredContacts:o.previouslyRegisteredContacts,registrantPriceRequiredText:o.registrantPriceRequiredText,confirmText:o.confirmText,createContactAndRegisterText:o.createContactAndRegisterText,requireCompanyName:o.requireCompanyName,selectBestPrice:o.selectBestPrice,firstName:l.val(),lastName:d.val(),emailAddress:s.val(),youAreText:o.youAreText,alreadyRegisteredText:o.alreadyRegisteredText,alreadyInCartText:o.alreadyInCartText,registerYourselfAndOthersText:o.registerYourselfAndOthersText,publicUser:0<N("#simple-reg-guest-contact-exists").length?"False":"True",cartSummaryText:"registration(s) in the cart",allowPublicUserRegistration:o.allowPublicUserRegistration,cleanUrl:!1})}},N.fn.hl_simpleRegistration_Register=function(e){var a={eventKey:"",eventOptionKey:"",registrarContactKey:"",previouslyRegisteredContacts:"[{}]",registrantPriceRequiredText:"Choose registrant price",confirmText:"",createContactAndRegisterText:"Create contact and register?",requireCompanyName:"True",selectBestPrice:"True",firstName:"",lastName:"",emailAddress:"",youAreText:"You are",registrationHeaderText:"Registration",registrationOthersText:"Registration - Register Others",alreadyRegisteredText:"and are already registered for this event",alreadyInCartText:"Your registration is in the cart. Enter name to register others. Checkout to finish registration.",registerYourselfAndOthersText:"Register yourself by adding registration to the cart or clear and register others.",publicUser:"False",cartSummaryText:"registration(s) in the cart",allowPublicUserRegistration:"True",cleanUrl:!0};N.extend(a,e);var o="",s='<div id="simple-reg-price-validate" class="alert alert-danger margin-top-medium"><span class="control-label">'+a.registrantPriceRequiredText+"</span></div>",r=N("#simple-reg-input-container"),l=N("#simple-reg-registrant-name"),c=N("#clear-registrant-name-btn"),d=N(".simple-reg-best-price"),u=N("#simple-reg-choose-price"),h=N("#simple-reg-add-to-cart"),p=N("#simple-reg-no-pricing"),t=N("#you-are-placeholder");N("#registrar-status-placeholder");function m(e,n,t,i,o,a){N.when(hl_simpleRegistration.getSimpleRegPricing(e,n,t,i)).then(function(e,t,i){u=N("#simple-reg-choose-price"),d=N(".simple-reg-best-price"),0<u.length?0<u.find("option").length||u.is("span")?(u.show(),u.val(o),h.data("contactKey",n).data("emailAddress",a).show()):p.show():0!=N(".simple-reg-best-price").length&&0<N(".simple-reg-best-price[value='"+o+"']").length?(N(".simple-reg-best-price[value='"+o+"']").attr("selected","").show(),h.data("contactKey",n).data("emailAddress",a).show()):p.show()})}function f(){l.val(""),u.hide(),d.removeAttr("selected").hide(),h.data("contactKey","").data("emailAddress","").hide(),p.hide(),c.attr("disabled","")}!function(){0<l.length&&(0<t.length&&(t.replaceWith('<span id="you-are-placeholder" class="you-are-placeholder"> '+a.youAreText+" <strong>"+a.firstName+" "+a.lastName+"</strong></span>"),t=rice[selected]").attr("value"):void 0!==u.val()?u.val():u.attr("value");""!=i?((t={}).CalendarEventKey=a.eventKey,t.RegistrantContactKey=h.data("contactKey"),t.EmailAddress=h.data("emailAddress"),t.SelectBestPrice=a.selectBestPrice,n=h.data("emailAddress"),0<i.length?t.RegistrantClassKey=i:t.RegistrantClassKey=N(".simple-reg-best-price[selected]").attr("value"),N.when(hl_simpleRegistration.addRegistrantToCart(t)).then(function(e,t,i){N.when(hl_simpleRegistration.registrarStatus(n)).then(function(e,t,i){""!=e&&B(e,a)}),N.when(hl_simpleRegistration.loadCart(e)).then(function(e,t,i){f()})}),N(window).unbind("beforeunload.simpleRegistration"),N(window).bind("beforeunload.simpleRegistration",function(){return a.confirmText})):(r.append(s),N("#simple-reg-price-validate").fadeOut(5e3,function(){N(this).remove()}))}),c.on("click",function(){f()}),l.autocomplete({minLength:0,source:function(e,o){N.when(hl_simpleRegistration.findRegistrantsJSON(e.term,a.registrarContactKey,a.eventKey,a.eventOptionKey)).then(function(e,t,i){var n;""!=e&&(n=N.parseJSON(e),o(N.map(n,function(e){return{FilterType:e.FilterType,value:e.Name,Name:e.Name,PictureUrl:e.PictureURL,ContactKey:e.ContactKey,EmailAddress:e.EmailAddress,CityStateCountry:e.CityStateCountry,CompanyName:e.CompanyName,PriceKey:e.PriceKey}}))),l.removeClass("ui-autocomplete-loading")})},select:function(e,t){""!=t.item.value?"00000000-0000-0000-0000-000000000000"==t.item.ContactKey?hl_simpleRegistration.getCreateRegisterContact(t.item.Name,a.eventKey,a.registrarContactKey,a.emailAddress,a.requireCompanyName,a.selectBestPrice,"True","True"):m(!0,t.item.ContactKey,a.selectBestPrice,a.eventKey,t.item.PriceKey,t.item.EmailAddress):N(this).val(""),c.removeAttr("disabled")}}).focus(function(){l.val()!=a.firstName+" "+a.lastName&&N(this).autocomplete("search")}),l.data("ui-autocomplete")._renderMenu=function(i,e){var n=this;N.each(e,function(e,t){n._renderItemData(i,t)}),d.removeAttr("selected").hide(),u.hide(),h.data("contactKey","").hide(),p.hide(),o=""},l.data("ui-autocomplete")._renderItem=function(e,t){var i="";if(t.FilterType!=o){var n="";switch(o=t.FilterType){case"previous":n="Suggestions";break;case"existing":n="Existing Contacts";break;case"nonExisting":n="New Contact?"}i="currentUser"!=o?'<span class="ui-autocomplete-header text-muted ">'+n+"</span><br><hr>":""}return"nonExisting"!=o?(i+='<a><div style="display: inline-block"><img class="img-typeahead" src="'+t.PictureUrl+'"></div><div style="display: inline-block"> '+t.Name,""!=t.CompanyName&&(i+=" - "+t.CompanyName),""!=t.CityStateCountry&&(i+=" - "+t.CityStateCountry),i+="</div></a>"):(t.value="","True"==a.allowPublicUserRegistration?i+='<a class="new-contact-option" onclick="hl_simpleRegistration.getCreateRegisterContact(\''+escape(t.Name)+"','"+a.eventKey+"','"+a.registrarContactKey+"','"+escape(a.emailAddress)+"','"+a.requireCompanyName+"','"+a.selectBestPrice+"','True','False'); return false;\"><div style=\"display: inline-block\">\""+t.Name+'" - '+a.createContactAndRegisterText+"</div></a>":i=""),N('<li class="ui-menu-item">').attr("data-value",t.value).attr("data-id",t.ContactKey).append(i).appendTo(e)},"add-to-cart"==n&&(l.val(a.firstName+" "+a.lastName),N.when(hl_simpleRegistration.registrantPricingKey(a.eventKey,a.eventOptionKey,a.registrarContactKey,a.publicUser)).then(function(e,t,i){m(!0,a.registrarContactKey,a.selectBestPrice,a.eventKey,e,a.emailAddress)}))}));a.cleanUrl&&C()}()},N.fn.hl_simpleRegistration_CreateRegisterContact=function(e){var o={eventKey:"",confirmText:"",registrarContactKey:"",registrarEmailAddress:"",emailAlreadyTakenText:"This email address is already taken.",contactExistsText:"is already a contact.",selectAndAddPriceText:"Select the price and add to cart.",createAddToCartText:"Create Contact and Add To Cart",addToCartText:"Add To Cart",requireCompanyName:"True",selectBestPrice:"True",youAreText:"You are",registrationHeaderText:"Registration",registrationOthersText:"Registration - Register Others",alreadyRegisteredText:"and are already registered for this event",alreadyInCartText:"Your registration is in the cart. Enter name to register others. Checkout to finish registration.",registerYourselfAndOthersText:"Register yourself by adding registration to the cart or clear and register others.",emailInvalidText:"Invalid Email Address.",emailRequiredText:"Email Address required. Please enter an Email Address.",firstNameRequiredText:"First Name required. Please enter a First Name.",lastNameRequiredText:"Last Name required. Please enter a Last Name.",companyNameRequiredText:"Company Name required. Please enter a Company Name."};N.extend(o,e);var a='<div id="simple-reg-email-taken" class="margin-top-medium"><span class="control-label">'+o.emailAlreadyTakenText+"</span></div>",s="([a-zA-Z_0-9.-]+\\@[a-zA-Z_0-9.-]+\\.\\w+)",t=N("#simple-reg-registrant-name"),r=N("#create-register-email-container"),l=N("#create-register-email-address"),c=N("#create-register-first-name-container"),d=N("#create-register-first-name"),u=N("#create-register-last-name-container"),h=N("#create-register-last-name"),p=N("#create-register-company-name-container"),m=N("#create-register-company-name"),f=N("#simple-reg-create-register-panel"),i=N("#save-register-btn"),n=N("#create-register-add-to-cart"),g=N("#contact-already-exists-container"),v=N("#contact-already-in-cart"),y=N("#add-to-cart-container"),b=N(".create-contact-best-price"),_=N("#create-contact-choose-price"),w=N("#contact-already-exists"),C=N("#existing-contact-name"),k=N("#create-register-modal-title"),x=N("#create-reg-no-pricing"),S=N("#create-register-registrant-choose-price"),T=N("#create-register-public-price-container"),$=N("#clear-enter-another-container"),I=N("#create-registrant-clear-enter-another"),j=N("#new-email-address-help-block"),E=N("#new-first-name-help-block"),A=N("#new-last-name-help-block"),P=N("#new-company-name-help-block");function M(e){N("body").append('<input id="simple-reg-contact-exists" type="hidden" value="'+e.Key+'">'),C.text(e.FirstName+" "+e.LastName);var t=o.contactExistsText;"False"==o.selectBestPrice&&(t+=" "+o.selectAndAddPriceText),w.text(t),g.show(),y.show(),n.data("contactKey",e.Key).show(),n.removeAttr("disabled"),T.hide(),$.show()}function O(){k.text(o.createAddToCartText),y.hide(),n.data("contactKey","").hide(),n.attr("disabled",""),b.removeAttr("selected").hide(),_.hide(),x.hide(),N("#simple-reg-contact-exists").remove(),T.show(),$.hide()}function D(){(_=N("#create-contact-choose-price")).hide(),g.show(),x.show(),T.hide()}function R(){var e=!1;(""==l.val()||""==d.val()||""==h.val()||"True"==o.requireCompanyName&&""==m.val())&&(e=!0),e?i.attr("disabled",""):i.removeAttr("disabled")}!function(){k.text(o.createAddToCartText),0<t.length&&(t.data("ui-autocomplete")._trigger("select","autocompleteselect",{item:{value:""}}),0<N("ul.ui-autocomplete").length&&N("ul.ui-autocomplete").hide());R(),l.on("blur",function(){d.removeAttr("disabled"),h.removeAttr("disabled"),m.removeAttr("disabled"),r.removeClass("required").removeClass("has-error"),j.text("").hide(),c.removeClass("required").removeClass("has-error"),E.text("").hide(),u.removeClass("required").removeClass("has-error"),A.text("").hide(),p.removeClass("required").removeClass("has-error"),P.text("").hide(),w.text(""),g.hide(),v.hide(),O(),""!=l.val()?null==l.val().match(s)?(r.addClass("required").addClass("has-error"),j.append(o.emailInvalidText).show(),N("#simple-reg-contact-exists").remove()):(r.removeClass("required").removeClass("has-error"),j.text("").hide(),hl_simpleRegistration.verifyContact(N(this).val(),F)):(O(),R())}),N(".create-register-input").on("keyup",function(){R()}),N(".create-register-input").on("change",function(){N(this).trigger("keyup")}),i.on("click",function(){return r.removeClass("required").removeClass("has-error"),j.text("").hide(),c.removeClass("required").removeClass("has-error"),E.text("").hide(),u.removeClass("required").removeClass("has-error"),A.text("").hide(),p.removeClass("required").removeClass("has-error"),P.text("").hide(),N.when(hl_simpleRegistration.verifyContact(l.val())).then(function(e,t,i){var n;"True"==JSON.parse(e).GuestExists?(hl_common_ui_unBlockUI(),r.addClass("required").addClass("has-error"),l.after(a),N("#simple-reg-email-taken").fadeOut(5e3,function(){N(this).remove()})):!function(){var e=!0;""!=l.val()?null==l.val().match(s)&&(r.addClass("required").addClass("has-error"),j.append(o.emailRequiredText).show(),e=!1):(r.addClass("alert").addClass("alert-danger"),e=!1);""==d.val()&&(c.addClass("required").addClass("has-error"),E.append(o.firstNameRequiredText).show(),e=!1);""==h.val()&&(u.addClass("required").addClass("has-error"),A.append(o.lastNameRequiredText).show(),e=!1);"True"==o.requireCompanyName&&""==m.val()&&(p.addClass("required").addClass("has-error"),P.append(o.companyNameRequiredText).show(),e=!1);return e}()?hl_common_ui_unBlockUI():((n={NewContact:!0}).EmailA),n.LastName=h.val(),n.CompanyName=m.val(),n.CalendarEventKey=o.eventKey,n.RegistrarContactKey=o.registrarContactKey,n.SelectBestPrice=o.selectBestPrice,0<S.length?n.RegistrantClassKey=""!=S.val()?S.val():S.attr("value"):n.RegistrantClassKey=N("#create-register-registrant-best-price").attr("value"),hl_simpleRegistration.createRegisterContact(n),f.modal("hide"),N(window).unbind("beforeunload.simpleRegistration"),N(window).bind("beforeunload.simpleRegistration",function(){return o.confirmText}))}),!1}),n.on("click",function(e){var t;e.preventDefault(),""!=(_=N("#create-contact-choose-price")).val()&&((t={}).CalendarEventKey=o.eventKey,t.RegistrantContactKey=n.data("contactKey"),t.SelectBestPrice=o.selectBestPrice,0<_.length?t.RegistrantClassKey=_.val():t.RegistrantClassKey=N(".create-contact-best-price[selected]").attr("value"),N.when(hl_simpleRegistration.addRegistrantToCart(t)).then(function(e,t,i){N.when(hl_simpleRegistration.registrarStatus(o.registrarEmailAddress)).then(function(e,t,i){""!=e&&B(e,o)}),N.when(hl_simpleRegistration.loadCart(e)).then(function(e,t,i){_.hide(),b.removeAttr("selected").hide(),n.data("contactKey","").hide(),x.hide()})}),N(window).unbind("beforeunload.simpleRegistration"),N(window).bind("beforeunload.simpleRegistration",function(){return o.confirmText}))}),I.on("click",function(e){e.preventDefault(),l.val(""),d.val(""),h.val(""),m.val(""),l.blur().focus()})}();var F=function(e){var n;"True"==JSON.parse(e).GuestExists?(n=JSON.parse(e),d.val(n.FirstName),h.val(n.LastName),m.val(n.CompanyName),d.attr("disabled",""),h.attr("disabled",""),m.attr("disabled",""),"True"==n.AlreadyInCart?(v.show(),O(),T.hide()):(k.text(o.addToCartText),N.when(hl_simpleRegistration.getCreateRegistrantPricing(!0,n.Key,o.selectBestPrice,o.eventKey)).then(function(e,t,i){0<(_=N("#create-contact-choose-price")).length?0<_.find("option").length||_.is("label")?(_.show(),_.val(n.PriceKey),M(n)):D():0==N(".create-contact-best-price").length?D():(b.removeAttr("selected").hide(),N(".create-contact-best-price[value='"+n.PriceKey+"']").attr("selected","").show(),M(n))})),i.hide()):"True"==JSON.parse(e).AlreadyInCart?(v.show(),O(),T.hide()):(i.show(),O()),R(),hl_common_ui_unBlockUI()}},N.fn.hl_simpleRegistration_Checkout=function(e){var o={eventKey:"",registrationKey:"",registrationFull:"false",paymentProvider:"PayPal",paymentUrl:"",externalCheckout:"False",transactionDecision:"",registrarEmailAddress:"",registrationHeaderText:"Registration",registrationOthersText:"Registration - Register Others",alreadyRegisteredText:"and are already registered for this event",alreadyInCartText:"Your registration is in the cart. Enter name to register others. Checkout to finish registration.",registerYourselfAndOthersText:"Register yourself by adding registration to the cart or clear and register others.",paypalEnvironment:"sandbox",payLater:!1};N.extend(o,e);var n="3350e14a-1b58-46ea-bb3a-860dc8fe949b",a="8b7fd222-6890-4f30-a4f0-b9bd2836a0a3",s=N(".simple-reg-register-container"),r=N(".ContentItemMVC").has(".simple-reg-item"),l=N("#simple-reg-checkout-cart"),c=N("#simple-reg-continue-registering"),d=N(".event-attendance-container"),t=N("#simple-reg-pay-later"),u=N("#simple-reg-register-now"),h=N("#paypal-payment-hidden"),p=N("#paypal-payment-form"),m=N("#modal-registration-full"),i=N("#registration-full-close"),f=N("#transaction-error-modal"),g=N("#transaction-error-close"),v=(N("#you-are-placeholder"),N("#registrar-status-placeholder"),N("#popup-blocker-alert"));function y(e,n){"True"==o.registrationFull?(hl_common_ui_unBlockUI(),m.modal("show")):e?N.when(hl_simpleRegistration.registerNow()).then(function(e,t,i){b(o.registrationKey=e,n)}):N.when(hl_simpleRegistration.registerNowPayLater()).then(function(e,t,i){o.registrationKey=e,o.payLater=!0,b(e,n)})}function b(e,t){var i;e==n?hl_simpleRegistration.getRegistrantsAlreadyRegistered():e==a?hl_simpleRegistration.getAvailableRegistrationsExceeded():"00000000-0000-0000-0000-000000000000"==e?(hl_common_ui_unBlockUI(),m.modal("show")):"function"==typeof t?t(e):(i=e,N.when(hl_simpleRegistration.payPalCheckout(i)).then(function(e,t,i){hl_common_ui_unBlockUI(),"error"!=e?(p.attr("action",e),h.show()):hl_common_ui_unBlockUI(),u.hide()}))}!function(){0==N(".simple-reg-checkout-cart-item").length&&(t.attr("disabled",""),u.attr("disabled",""));{var e;(function(){switch(hl_common_ui_unBlockUI(),o.paymentProvider){case"cybersource":u.show(),u.on("click",function(e){hl_common_ui_blockUI(),e.preventDefault(e);y(!0,function(e){N(window).unbind("beforeunload.simpleRegistration");var t=o.paymentUrl.replace("[registrationKey]",e);window.location=t,hl_common_ui_unBlockUI()})});break;cast||"True"==o.externalCheckout&&"ACCEPT"!=o.transactionDecision)&&(hl_common_ui_blockUI(),window.paypalCheckoutReady=function(){paypal.checkout.setup("9N69MJV32NKGU",{environment:o.paypalEnvironment,button:["paypal-payment-hidden"]})},y(!0));break;case"stripe":u.show(),u.on("click",function(e){hl_common_ui_blockUI(),e.preventDefault(e);y(!0,function(e){hl_simpleRegistration.stripeCheckout(e)})});break;default:u.show(),u.on("click",function(e){e.preventDefault(e),hl_common_ui_blockUI(),y(!0,_)})}c.on("click",function(){N.when(hl_simpleRegistration.getSimpleRegistrationContent("00000000-0000-0000-0000-000000000000",o.eventKey,!0)).then(function(e,t,i){l.remove(),v.remove(),s.show(),r.show(),0<d.length&&d.hl_accessibility_show(),("True"==o.externalCheckout&&"ACCEPT"==o.transactionDecision||o.payLater)&&hl_simpleRegistration.getSimpleRegLocation(o.eventKey),N.when(hl_simpleRegistration.registrarStatus(o.registrarEmailAddress)).then(function(e,t,i){""!=e&&B(e,o)})})}),t.on("click",function(e){e.preventDefault(),y(!1,_)}),i.on("click",function(e){e.preventDefault(),N.when(hl_simpleRegistration.emptyCart(o.eventKey,!1)).then(function(e,t,i){N.when(hl_simpleRegistration.getSimpleRegistrationContent("00000000-0000-0000-0000-000000000000",o.eventKey,!0)).then(function(e,t,i){l.remove(),s.show()})})})})(),"True"==o.externalCheckout&&("ACCEPT"==o.transactionDecision?function(e){N.when(hl_simpleRegistration.completePaymentTransaction(e)).then(function(e,t,i){N.when(hl_simpleRegistration.getRegisterNowPayLaterConfirmation()).then(function(e,t,i){N("#pay-later-close").on("click",function(e){e.preventDefault(),N.when(hl_simpleRegistration.emptyCart(o.eventKey,!1)).then(function(e,t,i){0<c.length&&c.click()})})})})}(o.registrationKey):"CANCEL"==o.transactionDecision?(hl_common_ui_blockUI(),"paypal"!=o.paymentProvider&&N.when(hl_simpleRegistration.deleteRegistration(o.registrationKey)).then(function(e,t,i){hl_common_ui_unBlockUI()})):0<N("#transaction-error-msg-container").length&&(e='<span id="transaction-error-msg"> '+o.transactionDecision+"</span>",N("#transaction-error-msg").replaceWith(e),0==N("#suppress-transaction-error").length&&f.modal("show"),g.on("click.transactionErrorClose",function(e){e.preventDefault(),hl_common_ui_blockUI(),N.when(hl_simpleRegistration.deleteRegistration(o.registrationKey)).then(function(e,t,i){N("body").append('<span id="suppress-transaction-error"></span>'),hl_common_ui_unBlockUI()})})))}hl_simpleRegistration.loadBioBubbles()}(),N.fn.hl_simpleRegistration_Checkout.register=y;var _=function(e){N.when(hl_simpleRegistration.completePaymentTransaction(e)).then(function(e,t,i){N.when(hl_simpleRegistration.getRegisterNowPayLaterConfirmation()).then(function(e,t,i){N("#pay-later-close").on("click",function(e){e.preventDefault(),N.when(hl_simpleRegistration.emptyCart(o.eventKey,!1)).then(function(e,t,i){c.click()})})})})}},N.fn.hl_simpleRegistration_PreviousRegistration=function(e){var o={cartEventKey:"",requestEventKey:"",registrationKey:""};N.extend(o,e);var t=N("#previous-registration-yes"),i=N("#previous-registration-no"),a=N("#resume-registarntkey"),s="00000000-0000-0000-0000-000000000000";t.on("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),window.location="/HigherLogic/go.aspx?c=simple-registration&CalendarEventKey="+o.cartEventKey}),i.on("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),N.when(hl_simpleRegistration.deleteRegistration(o.registrationKey)).then(function(e,t,i){N.when(hl_simpleRegistration.emptyCart(o.cartEventKey).then(function(e,t,i){var n="";0<a.val().length&&a.val()!=s&&(n="&ResumeRegistrantKey="+a.val()),window.location="/HigherLogic/go.aspx?c=simple-registration&CalendarEventKey="+o.requestEventKey+n}))})})}}(jQuery),function(l){l.fn.hl_ui_event_addattendeemodal=function(e){var i=l.extend({tenantKey:"",authToken:"",calendarEventKey:"",communityKey:""},e||{});$self=l(this);var t=$self.find("#add-submit"),s=($self.find("#add-find-contact-container"),$self.find("#add-error")),n=s.find(".details");function r(){0==l("#attendees li.tagit-choice").length?t.attr("disabled",""):t.removeAttr("disabled")}function o(e){e.Success?($self.modal("hide"),hl_common_ui_unBlockUI(),0<l("#manage-registrant-roster").length&&l.fn.hl_ui_event_ManageRegistrantRoster.rebindList(),0<l("#attendance-summary").length&&hl_manageRegistrantRoster.refreshAttendanceSummary(i.calendarEventKey)):(n.text(e.Message),s.hl_accessibility_show())}function a(e){n.text("Attendee could not be added. Unexpected error has occured."),s.hl_accessibility_show()}s.hl_accessibility_hide(),function(){var e=$self.find("#attendees"),o=$self.find("#find-error");o.find(".details");o.hl_accessibility_hide();var a=[];e.tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,n){var t={name:e.term,calendarEventKey:i.calendarEventKey,communityKey:i.communityKey};l.ajax({url:"/higherlogic/ui/mvc/events/eventinvite/FindEligibleContactByName/",type:"POST",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0<e.length){var t=[];a=$self.find("input#share-tagged-contacts-hidden").val().replace(/,\s*$/,"").split(",");for(var i=0;i<=e.length-1;i++)a.indexOf(e[i].ContactKey)<0&&t.push(e[i]);s.hl_accessibility_hide(),o.hl_accessibility_hide(),n(l.map(t,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:e.FirstName+" "+e.LastName,label:t}}))}else o.hl_accessibility_show();$self.find("#attendees").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3},afterTagAdded:function(e,t){var i=$self.find(".tagit-label").map(function(e,t){return l(t).attr("id")}).toArray().join(",");$self.find("input#share-tagged-contacts-hidden").val(i),r()},afterTagRemoved:function(e,t){var i=$self.find(".tagit-label").map(function(e,t){return l(t).attr("id")}).toArray().join(",");$self.find("input#share-tagged-contacts-hidden").val(i),r()}});var t=$self.find("#attendees li.tagit-new input");t.attr("placeholder",e.data("placeholdertext")),t.on("keydown",function(e){e.which!=l.ui.keyCode.BACKSPACE&&e.which!=l.ui.keyCode.DELETE||o.hl_accessibility_hide()})}(),t.on("click",function(e){!function(){postdata={},postdata.CalendarEventKey=i.calendarEventKey;var t=[];$self.find("ul#attendees li span.tagit-label").each(function(e){t.push(l(this).attr("id"))}),postdata.Attendees=t,postdata.CommunityKey=i.communityKey,hl_manageRegistrantRoster.addAttendee(postdata,o,a)}()}),r()}}(jQuery),function($){$.fn.hl_ui_event_admininvite=function(e){var s=$.extend({tenantKey:"",authToken:"",communityKey:""},e||{});$self=$(this);var t,i,n,o,a,r,l,c,d=$self.find("#invite-event-list"),u=$self.find("#send-submit"),h=$self.find("#invite-send-type"),p=$self.find("#invite-find-contact-container"),m=$self.find("#invite-security-group-container"),f=$self.find("#invite-security-group"),g=$self,v=g.find("#invite-error"),y=v.find(".details");v.hl_accessibility_hide(),g.find(".selectpicker").selectpicker(),0<p.length&&function(){var e=g.find("#invitees"),o=(g.find("#share-submit"),g.find("#find-error"));o.find(".details");o.hl_accessibility_hide();var a=[];e.tagit({singleField:!1,allowSpaces:!0,removeConfirmation:!0,autocomplete:{source:function(e,n){var t=0<$self.find("#invite-event-key").length?$self.find("#invite-event-key").val():d.val(),i={name:e.term,calendarEventKey:t,communityKey:s.communityKey};$.ajax({url:"/higherlogic/ui/mvc/events/eventinvite/FindEligibleContactByName/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(0<e.length){var t=[];a=g.find("input#share-tagged-contacts-hidden").val().replace(/,\s*$/,"").split(",");for(var i=0;i<=e.length-1;i++)a.indexOf(e[i].ContactKey)<0&&t.push(e[i]);v.hl_accessibility_hide(),o.hl_accessibility_hide(),n($.map(t,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_==e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":e.Address.CountryCode);return{id:e.ContactKey,value:e.FirstName+" "+e.LastName,label:t}}))}else o.hl_accessibility_show();g.find("#invitees").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3},afterTagAdded:function(e,t){var i=g.find(".tagit-label").map(function(e,t){return $(t).attr("id")}).toArray().join(",");g.find("input#share-tagged-contacts-hidden").val(i),C()},afterTagRemoved:function(e,t){var i=g.find(".tagit-label").map(function(e,t){return $(t).attr("id")}).toArray().join(",");g.find("input#share-tagged-contacts-hidden").val(i),C()}});var t=g.find("#invitees li.tagit-new input");t.attr("placeholder",e.data("placeholdertext")),t.on("keydown",function(e){e.which!=$.ui.keyCode.BACKSPACE&&e.which!=$.ui.keyCode.DELETE||o.hl_accessibient_admininvite.getSendInvitationLocationContent(d.val(),_)}),h.on("change",function(e){w()}),f.on("changed.bs.select",function(e){C()}),u.on("click",function(e){!function(){var e;e=0<$self.find("#invite-event-key").length?$self.find("#invite-event-key").val():d.val();{var t;postdata={},postdata.CalendarEventKey=e,"community-all"==h.val()?postdata.SendType="all":"community-radius"==h.val()||"admin-radius"==h.val()?(postdata.SendType="radius",postdata.Latitude=n.val(),postdata.Longitude=o.val(),postdata.RadiusInKm=x(),postdata.communityKey=s.communityKey):"contact-select"==h.val()?(t=[],g.find("ul#invitees li span.tagit-label").each(function(e){t.push($(this).attr("id"))}),postdata.SendType="select",postdata.Invitees=t,postdata.CommunityKey=""):"admin-sg"==h.val()&&(postdata.SendType="securityGroup",postdata.SecurityGroupKeys=f.val())}v.hl_accessibility_hide(),hl_event_admininvite.sendInvites(postdata,S,T)}()}),_();var b=null;function _(){t=$self.find("#invite-location-container"),i=$self.find("#invite-location"),n=$self.find("#invite-lat"),o=$self.find("#invite-lng"),a=$self.find("#event-invite-radius"),r=$self.find("#invite-find-contact-count"),l=$self.find("#invite-find-contacts"),c=$self.find("#invite-address-not-found"),w(),i.keydown(function(){clearTimeout(b),b=setTimeout(k,1e3)}),l.on("click",function(e){e.preventDefault(),function(){var e;e=0<$self.find("#invite-event-key").length?$self.find("#invite-event-key").val():d.val();{var t;0<n.val().length&&0!=n.val()&&0<o.val().length&&0!=o.val()&&(t=x(),hl_event_admininvite.FindContactCountByLocation(n.val(),o.val(),t,e,s.communityKey).done(function(e){var t=$("#invite-radius-search-result");1==e?t.text(l.data("result1")):1<e?t.text(l.data("result2").replace("[0]",e)):t.text(l.data("result0")),t.hl_accessibility_show(),r.val(e),C()}))}}()})}function w(){"community-all"==h.val()?(t.hl_accessibility_hide(),p.hl_accessibility_hide(),m.hl_accessibility_hide(),u.removeAttr("disabled")):"community-radius"==h.val()||"admin-radius"==h.val()?(t.hl_accessibility_show(),p.hl_aity_hide(),p.hl_accessibility_show(),m.hl_accessibility_hide(),u.attr("disabled","")):"admin-sg"==h.val()&&(t.hl_accessibility_hide(),p.hl_accessibility_hide(),m.hl_accessibility_show(),u.attr("disabled",""))}function C(){"community-all"==h.val()?u.removeAttr("disabled"):"community-radius"==h.val()||"admin-radius"==h.val()?0<r.val()?u.removeAttr("disabled"):u.attr("disabled",""):"contact-select"==h.val()?0==$("#invitees li.tagit-choice").length?u.attr("disabled",""):u.removeAttr("disabled"):"admin-sg"==h.val()&&0<f.val().length&&u.removeAttr("disabled")}function k(){$("#invite-radius-search-result").hl_accessibility_hide(),r.val(0),C(),""!=i.val()&&hl_event_admininvite.getGeocode(i.val()).done(function(e){var t;e.Success?(""!=e.AdditionalResponseData&&(t=JSON.parse(e.AdditionalResponseData),n.val(t.latitude),o.val(t.longitude)),c.hl_accessibility_hide(),l.removeClass("disabled")):c.hl_accessibility_show()}).fail(function(e,t,i){console.log("fail",e.status),alert("Address could not be geocoded. Please try again later.")})}function x(){return"mi"==a.data("distanceunit")?1.60934*a.val():a.val()}function S(e){e.Success?g.modal("hide"):(y.text(e.Message),v.hl_accessibility_show())}function T(e){y.text("Invitation could not be sent. Unexpected error has occured."),v.hl_accessibility_show()}}}(jQuery),function($,I){$.var i,n=$.extend({tenantKey:"",authToken:"",deleteDialogBtnText:"",deleteDialogTitle:"",deleteDialogText:"",substitutePlaceholder:"",calendarEventKey:"",overrideProfileSecurityInExport:!1},t||{}),o=($(this),"/higherlogic/ui/mvc/events/ManageRegistrantRoster"),a=$("select#registration-status"),s=$("select#payment-status"),r=$("select#registrant-class"),l=$("select#sortBy"),c=($("#event-roster-search-searchInput"),$("#manage-registrant-roster-rows-container"),$(this)),d=c.find("#manage-registrant-roster-rows-container"),e=c.find(".mark-as-not-attended"),u=c.find(".mark-as-attended"),h=$("#ExportRegistraints"),p="",m="",f="";function g(e){e.Success?0<$("#manage-registrant-roster").length&&(hl_manageRegistrantRoster.refreshAttendanceSummary(n.calendarEventKey),$.fn.hl_ui_event_ManageRegistrantRoster.rebindList()):alert(e.Message),hl_common_ui_unBlockUI()}function v(e){alert("Could not mark attendance for registrant. Unexpected error has occured."),hl_common_ui_unBlockUI()}function y(e,t){hl_common_ui_blockUI(),hl_manageRegistrantRoster.markAttended(e,t,g,v)}function b(){hl_common_ui_blockUI();var e=o+"/ManageRegistrantRosterRows"+I.location.search;$.ajax({type:"GET",dataType:"html",url:e,success:function(e){_(e),hl_common_ui_unBlockUI()}})}function _(e){d.html(e),d.trigger("dataChanged")}function w(e){return e+(null!=a.val()?"&RegStatusFilter="+a.val():"")+(null!=s.valilter="+s.val():"")+(null!=r.val()?"&RegistrantClassFilter="+r.val():"")+(null!=f?"&SearchTerm="+f:"")+("&sortBy="+l.val())}function C(){var e=$("#modal-registrant-notes"),t=e.find("#registrant-notes-registrant-key"),i=e.find("#registrant-notes-add"),n=e.find("#registrant-notes-text");i.addClass("disabled").addClass("btn-default").removeClass("btn-success"),n.val(""),n.on("input",function(e){1<=n.val().trim().length&&i.hasClass("disabled")?i.removeClass("disabled").removeClass("btn-default").addClass("btn-success"):n.val().trim().length<1&&!i.hasClass("disabled")&&i.addClass("disabled").addClass("btn-default").removeClass("btn-success")}),i.on("click",function(e){e.preventDefault(),0<n.val().trim().length&&(hl_common_ui_blockUI(),hl_manageRegistrantRoster.addRegistrantNote(t.val(),n.val(),k,x))})}function k(e){var t,i,n,o;hl_common_ui_unBlockUI(),e.Success&&(i=(t=$("#modal-registrant-notes")).find("#registrant-notes-registrant-key"),hl_manageRegistrantRoster.refreshRegistrantNotes(i.val(),"registrant-notes-list",null),n=t.find("#registrant-notes-add"),o=t.find("#registrant-notes-text"),n.addClass("disabled").addClass("btn-default").removeClass("btn-success"),o.val(""))}function x(){hl_common_ui_unBlockUI()}function S(){hl_manageRegistrantRoster.deleteRegistrant(i,T)}function T(e){b()}l.bind("change",function(e){hl_common_ui_blockUI(),p=w($(this).find("option:selected").attr("link")),m=I.location.pathname+p.substr(p.indexOf("?"),p.length),void 0===history.pushState&&(location.href=m),$.ajax({type:"GET",dataType:"html",url:p,success:function(e){history.pushState(null,null,m),$("body").scrollTop(0),_(e),hl_common_ui_unBlockUI()}})}),$(".pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),p=w($(this).attr("href")),m=I.location.pathname+p.substr(p.indexOf("?"),p.length),void 0===history.pushState&&(location.href=m),$.ajax({type:"GET",dataType:"html",url:p,success:function(e){history.pushState(null,null,m),$("body").scrollTop(0),_(e),hl_common_ui_unBlockUI()}})}),a.bind("change",function(){hl_common_ui_blockUI(),p=w($(this).find("option:selected").attr("link")),m=I.location.pathname+p.substr(p.indexOf("?"),p.length),void 0===history.pushState&&(location.href=m),$.ajax({type:"GET",dataType:"html",url:p,success:function(e){history.pushState(null,null,m),$("body").scrollTop(0),_(e),hl_common_ui_unBlockUI()}})}),s.bind("change",function(){hl_common_ui_blockUI(),p=w($(this).find("option:selected").attr("link")),m=I.location.pathname+p.substr(p.indexOf("?"),p.length),void 0===history.pushState&&(location.href=m),$.ajax({type:"GET",dataType:"html",url:p,success:function(e){history.pushState(null,null,m),$("body").scrollTop(0),_(e),hl_common_ui_unBlockUI()}})}),r.bind("change",function(){hl_common_ui_blockUI(),p=w($(this).find("option:selected").attr("link")),m=I.location.pathname+p.substr(p.indexOf("?"),p.length),void 0===history.pushState&&(location.href=m),$.ajax({type:"GET",dataType:"html",url:p,success:function(e){history.pushState(null,null,m),$("body").scrollTop(0),_(e),hl_common_ui_unBlockUI()}})}),c.find(".registrant-details").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openRegistrantDetailsModal($(this).data("itemkey"),"modal-registrant-details")}),c.find(".add-note").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openRegistrantNotesModal($(this).data("itemkey"),"modal-registrant-notes",C)}),c.find(".special-pricing").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSpecialPricingModal($(this).data("itemkey"),"modal-special-pricing")}),c.find(".incomplete-registration").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openIncompleteRegistrationModal($(this).data("itemkey"),"modal-registration-details-incomplete")}),c.find(".delete-registrant").on("click",function(e){e.preventDefault(),hl_common_ui_showBootstrapDeleteDialog(i=$(this).data("itemkey"),t.deleteDialogBtnText,t.deleteDialogTitle,t.deleteDialogText,S)}),c.find(".substitute-registrant").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSubstituteModal($(this).data("itemkey"),"modal-substitute-registrant")}),c.find(".send-confirmation").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSendConfirmationModal($(this).data("itemkey"),"modal-send-confirmation")}),c.find(".cancel-registration").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openCancelRegistrationModal($(this).data("itemkey"),"modal-cancel-registration")}),c.find(".issue-refund").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openRefundModal($(this).data("itemkey"),"modal-issue-refund")}),c.find(".email-registrant").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openEmailModal($(this).data("itemkey"),"modal-email-registrant")}),hl_com)}),u.bind("click",function(e){e.preventDefault(),y($(this).data("itemkey"),!0)}),$("#event-roster-search-showInput").on("searchClearTrigger",function(e,t,i){f=i,hl_common_ui_blockUI(),p=w($("#manage-registrant-roster-filters-row").attr("link")),m=I.location.pathname+p.substr(p.indexOf("?"),p.length),void 0===history.pushState&&(location.href=m),$.ajax({type:"GET",dataType:"html",url:p,success:function(e){history.pushState(null,null,m),$("body").scrollTop(0),_(e),hl_common_ui_unBlockUI()}})}),h.bind("click",function(e){e.preventDefault(),function(){hl_common_ui_blockUI();var e=o+"/ExportRegistrantRoster",t=hl_common_util_updateQueryStringParameter(I.location.search,"DemographicTypes",n.demographicTypes),i=hl_common_util_updateQueryStringParameter(t,"OverrideProfileSecurityInExport",n.overrideProfileSecurityInExport);setTimeout(function(){I.location.href=e+i,setTimeout(function(){hl_common_ui_unBlockUI()},500)},300)}()}),$.fn.hl_ui_event_ManageRegistrantRoster.rebindList=function(){b()},$.fn.hl_ui_event_ManageRegistrantRoster.rebindHeader=function(){!function(){hl_common_ui_blockUI();var e=o+"/ManageRegistrantRosterHeader"+I.location.search;$.ajax({type:"GET",dataType:"html",url:e,success:function(e){c.find("#manage-registrant-roster-header-container").html(e),hl_common_ui_unBlockUI()}})}()}}}(jQuery,window),function(r,l){r.fn.hl_ui_event_ManageRegistrant_cancel=function(e){r.extend({tenantKey:"",authToken:""},e||{});var i=r(this),t=i.find("#cancel-registration-save"),n=i.find("#cancel-error"),o=n.find(".details");function a(e){var t;e.Success?(i.modal("hide"),0<r("#manage-registrant-roster").length?r.fn.hl_ui_event_ManageRegistrantRoster.rebindList():(t=hl_common_util_getParameterByName("ReturnUrl"),l.location.href=t)):(o.text(e.Message),n.hl_accessibility_show()),hl_common_ui_unBlockUI()}function s(e){o.text("The registrant cannot be canceled. Unexpected error has occured."),n.hl_accessibility_show(),hl_common_ui_unBlockUI()}t.on("click",function(e){var t;e.preventDefault(),t=r(this).data("itemkey"),hl_common_ui_blockUI(),hl_manageRegistrantRoster.cancelRegistration(t,a,s)})}}(jQuery,window),function(l){l.fn.hl_ui_event_ManageRegistrant_email=function(n){l.extend({tenantKey:"",authToken:"",registrantKey:""},n||{});var t=l(this),e=t.find("#email-registrant-send"),o=t.find("#MessageSubject"),i=t.find("#email-registrant-error"),a=i.find(".details");function s(e){e.Success?t.modal("hidld not be sent. Unexpected error has occured."),i.hl_accessibility_show(),hl_common_ui_unBlockUI()}e.bind("click",function(e){e.preventDefault(),t.find(".messageSubject").removeClass("has-error"),t.find(".messageBody").removeClass("has-error"),(0!=o.val().trim().length?hl_common_ui_tinymce.validate("lblMessageBody",".messageBody","MessageBody","")||(t.find("#MessageBody").focus(),t.find(".messageBody").addClass("has-errbject").addClass("has-error"),0))&&function(){hl_common_ui_blockUI();var e=o.val(),t=hl_common_ui_tinymce.getTinyMceContent("MessageBody"),i={};i.RegistrantKey=n.registrantKey,i.MessageSubject=e,i.MessageBody=t,hl_manageRegistrantRoster.sendEmailToRegistrant(i,s,r)}()})}}(jQuery,window),function(a){a.fn.hl_ui_event_ManageRegistrant_header=function(e){var t=a.extend({tenantKey:"",authToken:"",PageTitle:""},e||{}),i=(a(this),a("#AddAttendee")),n=a("#AddRegistrant");function o(){a("#add-attendee-modal").on("hidden.bs.modal",function(){var e=a("#event-attendee-added");0<a("#manage-registrant-roster").length&&0<e.length&&1==e.val()&&a.fn.hl_ui_event_ManageRegistrantRoster.rebindList()}),a("#add-registrants-modal").on("hidden.bs.modal",function(){0<a("#manage-registrant-roster").length&&a.fn.hl_ui_event_ManageRegistrantRoster.rebindList()})}!function(){{var e;i.on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openAddAttendeeModal(a(this).data("calendareventkey"),"add-attendee-modal",o)}),n.on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openAddRegistrantModal(a(this).data("calendareventkey"),"add-registrants-modal",o)}),0<t.PageTitle.length&&0<(e=a("#PageTitleH1")).length&&0<e.contents().length&&(e.contents().filter(function(){return 3===this.nodeType}).remove(),e.prepend(t.PageTitle),0<e.length&&!e.is(":visible")&&e.show())}}()}}(jQuery,window),function(g){g.fn.hl_ui_event_ManageRegistrant_refund=function(e){var t,s=g.extend({tenantKey:"",authToken:"",registrantKey:"",currencySymbol:""},e||{}),r=g(this),i=r.find("#refund-save"),l=r.find("#total-paid"),c=r.find("#refund-amount"),d=r.find("#refund-payment-type"),u=r.find("#refund-date"),h=r.find("#refund-note"),p=r.find("#refund-error"),n=r.find(".details");function o(){r.find(".has-error").removeClass("has-error"),"Check"==d.val()?(r.find("#refund-payment-note-group").removeClass("required"),r.find("#refund-note").removeClass("required-input")):(r.find("#refund-payment-note-group").addClass("required"),r.find("#refund-note").addClass("required-input"))}function m(e){var t,i;e.Success?(r.modal("hide"),t=g("#manage-registrant-roster"),i=g("#payment-panel"),0<t.length?(g.fn.hl_ui_event_ManageRegistrantRoster.rebindList(),g.fn.hl_ui_event_ManageRegistrantRoster.rebindHeader()):0<i.length&&g.fn.hl_ui_event_ManageRegistration_payment.refreshPane()):(n.text(e.Message),p.hl_accessibility_show()),hl_common_ui_unBlockUI()}function f(e){n.text("Refund could not be saved. Unexpected error has occured."),p.hl_accessibility_show(),hl_common_ui_unBlockUI()}t=r.find("#refund-date").data("dateformat"),r.find(".refund-date-picker").datetimepicker({format:t,pickTime:!1,showToday:!0,useCurrent:!0}),i.on("click",function(e){var i,n,o,a,t;e.preventDefault(),(n=!(i=!1),o=l.val().trim().replace(s.currencySymbol,""),a=c.val().trim().replace(s.currencySymbol,""),p.hide(),r.find(".required").each(function(e){var t=g(this).find(".form-control");0==t.val().trim().length||"refund-amount"==t.attr("id")&&!g.isNumeric(t.val().trim().replace(s.currencySymbol,""))||"refund-amount"==t.attr("id")&&o<a?(t.parent().addClass("has-error"),g(this).addClass("has-error"),n=!1,i||(t.focus(),i=!0),"refund-amount"==t.attr("id")&&parseFloat(a)>parseFloat(o)&&p.show()):(t.parent().removeClass("has-error"),g(this).removeClass("has-error"))}),n)&&((t={}).RegistrantKey=s.registrantKey,t.RefundAmount=c.val().replace(s.currencySymbol,""),t.RefundPaymentType=d.val(),t.RefundDate=u.val(),t.RefundNote=h.val(),hl_common_ui_blockUI(),hl_manageRegistrantRoster.saveRefund(t,m,f))}),o(),d.on("change",function(e){o()})}}(jQuery,window),function(u){u.fn.hl_ui_event_ManageRegistrant_sendconfirmation=function(e){u.extend({tenantKey:"",authToken:"",substitutePlaceholder:""},e||{});var t=u(this),i=t.find("#send-confirmation-send"),n=t.find("#confirmation-email-address"),o=t.find("#email-address-container"),a=t.find("#email-address-help"),s="([a-zA-Z_0-9.-]+\\@[a-zA-Z_0-9.-]+\\.\\w+)",r=t.find("#send-confirmation-error"),l=r.find(".details");function c(e){e.Success?t.modal("hide"):(l.text(e.Message),r.hl_accessibility_show()),hl_common_ui_unBlockUI()}function d(e){l.text("Confirmation could not be sent. Unexpected error has occured."),r.hl_accessibility_show(),hl_common_ui_unBlockUI()}i.on("click",function(e){var t;e.preventDefault(),t=u(this).data("itemkey"),hl_common_ui_blockUI(),hl_manageRegistrantRoster.sendConfirmation(t,n.val(),c,d)}),n.on("change",function(e){a.hl_accessibility_hide(),0<n.val().trim().length?null==n.val().match(s)?(o.addClass("has-error"),i.addClass("disabled"),a.hl_accessibility_show()):(o.removeClass("has-error"),i.removeClass("disabled")):i.addClass("disabled")})}}(jQuery,window),function(c){c.fn.hl_ui_event_ManageRegistrant_specialpricing=function(e){c.extend({tenantKey:"",authToken:""},e||{});var n=c(this),t=n.find("#special-price-save"),o=n.find("#select-registrant-class"),a=n.find("#specialprice-error"),s=a.find(".details");function r(e){var t,i;e.Success?(n.modal("hide"),t=c("#manage-registrant-roster"),i=c("#payment-panel"),0<t.length?c.fn.hl_ui_event_ManageRegistrantRoster.rebindList():0<i.length&&c.fn.hl_ui_event_ManageRegistration_payment.refreshPane()):(s.text(e.Message),a.hl_accessibility_show()),hl_common_ui_unBlockUI()}function l(e){s.text("Special pricing could not be saved. Unexpected error has occured."),a.hl_accessibility_show(),hl_common_ui_unBlockUI()}o.on("change",function(e){o.data("originalvalue")!=o.val()?(t.removeClass("disabled"),t.focus()):t.addClass("disabled")}),t.bind("click",function(e){var t,i;e.preventDefault(),t=c(this).data("itemkey"),i=o.val(),hl_common_ui_blockUI(),hl_manageRegistrantRoster.saveSpecialPricing(t,i,r,l)})}}(jQuery,window),function(c){c.fn.hl_ui_event_ManageRegistrant_substitute=function(e){c.extend({tenantKey:"",authToken:"",substitutePlaceholder:""},e||{});var n=c(this),t=n.find("#find-contact"),i=n.find("#substitute-submit"),a=n.find("#substitute-error"),o=a.find(".details");function s(e){0==c("#find-contact li.tagit-choice").length?e.addClass("disabled"):(e.removeClass("disabled"),e.focus())}function r(e){e.Success?(n.modal("hide"),0<c("#manage-registrant-roster").length?c.fn.hl_ui_event_ManageRegistrantRoster.rebindList():location.reload()):(o.text(e.Message),a.hl_accessibility_show()),hl_common_ui_unBlockUI()}function l(e){o.text("Registrant could not be substituted. Unexpected error has occured."),a.hl_accessibility_show(),hl_common_ui_unBlockUI()}(function(n){var o=n.find("#find-error");o.hl_accessibility_hide(),t.tagit({tagLimit:1,singleField:!1,allowSpaces:!0,placeholderText:e.substitutePlaceholder,removeConfirmation:!0,autocomplete:{source:function(e,t){var i={name:e.cts/",type:"POST",data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length?(o.hl_accessibility_hide(),t(c.map(e,function(e){var t=e.FirstName+" "+e.LastName+(hl_common_util_stringIsNullOrWhiteSpace(e.CompanyName)?"":" - "+e.CompanyName)+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)&&hl_common_util_stringIsNullOrWhiteSpace(e.Address.CountryCode)?"":" - ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.City)?void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.Town)?"":e.Address.Town+", ":e.Address.City+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhiteSpace(e.Address.StateProvinceCode)?"":e.Address.StateProvinceCode+", ")+(void 0===e.Address||hl_common_util_stringIsNullOrWhitevalue:e.FirstName+" "+e.LastName,label:t}}))):o.hl_accessibility_show(),n.find("#find-contact").find("input").removeClass("ui-autocomplete-loading")},focus:function(){return!1}})},minLength:3},afterTagAdded:function(){t.find("input,.tagit-new").hl_accessibility_hide(),s(i)},afterTagRemoved:function(){t.find("input,.tagit-new").hl_accessibility_show(),s(i),a.har t=[],i=[];a.hl_accessibility_hide(),n.find("ul#find-contact li span.tagit-label").each(function(e){t.push(c(this).attr("id")),i.push(c(this).text())}),hl_manageRegistrantRoster.substituteRegistrant(e,t[0],r,l)}(c(this).data("itemkey"))})}}(jQuery,window),function(b){b.fn.hl_ui_event_ManageRegistration=function(r){var t,n,o=b.extend({tenantKey:"",authToken:"",registrantKey:"",deleteDialogBtnText:"",deleteDialogTitle:"",deleteDialogText:""},r||{}),l=b(this),c="/higherlogic/ui/mvc/events/manageregistrantroster",e=l.find("#launch-edit-registrant-sessions"),a=l.find(".mark-as-not-attended"),s=l.find(".mark-as-attended"),d=l.f{hl_manageRegistrantRoster.deleteRegistrant(o.registrantKey,h,p)}function h(e){var t=l.find("#return-to-my-registration");e.Success?0<t.length&&(window.location=t.attr("href")):(alert(e.Message),hl_common_ui_unBlockUI())}function p(e){alert("Could not delete the registrant. Unexpected error has occured."),hl_common_ui_unBlockUI()}function m(e){e.Success?window.location.reload(!1):(alert(e.Message),hl_common_ui_unBlockUI())}function f(e){alert("Could not mark attendance for registrant. Unexpected error has occured."),hl_common_ui_unBlockUI()}function g(e,t){hl_common_ui_blockUI(),hl_manageRegistrantRoster.markAttended(e,t,m,f)}function v(e){hl_common_ui_unBlockUI(),e.Success&&function(e,a,s){{var t,i;void 0!==e&&(i=c+"/RegistrantNotesRows",(t={}).RegistrantKey=e,hl_common_ui_blockUI(),b.ajax({contentType:"application/json; charset=utf-8",type:"Post",dataType:"html",data:JSON.stringify(t),url:i,success:function(e,t,i){b("#"+a).replaceWith(e),hl_common_ui_unBlockUI(),"function"==typeof s&&s(e,t,i);var n=l.find("#registrant-notes-addo.val("")},error:function(e,t,i){hl_common_ui_unBlockUI()}}))}}(r.registrantKey,"registrant-notes-list",null)}function y(){hl_common_ui_unBlockUI()}l.find("#delete-incomplete-registrant").on("click",function(e){e.preventDefault(),hl_common_ui_showBootstrapDeleteDialog(o.registrantKey,o.deleteDialogBtnText,o.deleteDialogTitle,o.deleteDialogText,u)}),e.on("click",function(e){e.preventDefault(),function(t){var s=b("#"+t+"-edit-registrant-sessions-modal");0<s.length&&s.remove();hl_common_ui_blockUI(),b.ajax({type:"GET",dataType:"html",url:c+"/GetEditRegistrantSessionsModal/?RegistrantKey="+t,success:function(e){b("body").append(e);var o=(s=b("#"+t+"-edit-registrant-sessions-modal")).find("#error-message"),a=o.find(".details");a.html(""),o.hide(),s.find("#save-registrant-sessions").bind("click",function(){hl_common_ui_blockUI();var n={};n.RegistrantKey=r.registrantKey,null==n.EventOptionKeys&&(n.Eventt){b(this).hasClass("btn-success")&&n.EventOptionKeys.push(b(this).attr("data-key"))}),b.ajax({url:c+"/SaveRegistrantSessions/",type:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){a.html("Item could not be saved, there was an unexpected error"),o.show(),hl_common_ui_unBlockUI()},success:function(e){if(e.Success)window.location.reload(!1);else{if(!hl_common_util_stringIsNullOrWhiteSpace(e.AdditionalResponseData)){var t=e.AdditionalResponseData.split(",");for(i in t)hl_common_util_hlMvcCheckbox(b("[data-key='"+t[i]+"']"))}a.html(e.Message),o.show(),document.getElementById("error-message").scrollIntoView(),hl_common_ui_unBlockUI()}}})}),b("#"+t+"-edit-registrant-sessions-modal").modal("show"),hl_common_ui_unBlockUI()}})}(r.registrantKey)}),l.find("#registrant-substitute").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSubstituteModal(b(this).data("itemkey"),"modal-substitute-registrant")}),l.find("#registrant-details").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openRegistrantDetailsModal(b(this).data("itemkey"),"modal-registrant-details")}),a.bind("click",function(e){e.preventDefault(),g(r.registrantKey,!1)}),s.bind("click",function(e){e.preventDefault(),g(r.registrantKey,!0)}),l.find("#registrant-send-confirmation").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSendConfirmationModal(b(this).data("itemkey"),"modal-send-confirmation")}),d.on("click",function( t={},i=c+"/RegistrantHistoryModal";t.RegistrantKey=r.registrantKey,hl_common_ui.openModal(t,i,r.registrantKey+"-modal-registrant-notes",null)}),l.find("#add-special-pricing").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSpecialPricingModal(b(this).data("itemkey"),"modal-send-confirmation")}),t=l.find("#registrant-notes-add"),n=l.find("#registrant-notes-text"),t.addClass("disabled").addClass("btn-default").removeClass("btn-success"),n.val(""),n.on("input",function(e){1<=n.val().trim().length&&t.hasClass("disabled")?t.removeClass("disabled").removeClass("btn-default").addClass("btn-success"):n.val().trim().length<1&&!t.hasClass("disabled")&&t.addClass("disabled").addClass("btn-default").removeClass("btn-success")}),t.on("click",function(e){e.preventDefault(),0<n.val().trim().length&&(hl_common_ui_blockUI(),hl_manageRegistrantRoster.addRegistrantNote(r.registrantKey,n.val(),v,y))})}}(jQuery),function(c){c.fn.hl_ui_event_ManageRegistration_payment=function(e){c.extend({tenantKey:"",authToken:""},e||{});var t,i=c(this),n="/higherlogic/ui/mvc/events/ManageRegistrantRoster";function o(){hl_common_ui_blockUI();var e=n+"/RegistrationPaymentSummary"+window.location.search;c.ajax({type:"GET",dataType:"html",url:e,success:function(e){i.html(e),hl_common_ui_unBlockUI()}})}function a(){var o=c("#modal-offline-payment"),e=o.find("#payment-date").data("dateformat");o.find(".payment-date-picker").datetimepicker({format:e,pickTime:!1,showToday:!0,useCurrent:!0});var a=o.find("#payment-type");o.find("#payment-save").on("click",function(e){var i,n,t;e.preventDefault(),(n=!(i=!1),o.find(".required:visible").each(function(e){var t=c(this).find(".form-control");0==t.val().trim().length?(t.parent().addClass("has-error"),c(this).addClass("has-error"),n=!1,i||(t.focus(),i=!0)):(t.parent().removeClass("has-error"),c(this).removeClass("has-error"))}),n)&&((t={}).RegistrantKey=c(this).data("itemkey"),t.PaymentType=a.val(),t.PaymentAmount=o.find("#payment-amount-hidden").val(),"check"==t.PaymentType&&(t.CheckNumber=o.find("#check-number").val()),t.PaymentDate=o.find("#payment-date").val(),t.PaymentNote=o.find("#payment-note").val(),hl_common_ui_blockUI(),hl_manageRegistration.saveOfflinePaymentInfo(t,s,r))}),null!=t&&a.val(t),l(),a.on("change",function(e){l()})}function s(e){var t=c("#modal-offline-payment"),i=t.find("#payment-error"),n=i.find(".details");e.Success?(t.modal("hide"),o()):(n.text(e.Message),i.hl_accessibility_show()),hl_common_ui_unBlockUI()}function r(e){var t=c("#modal-offline-payment").find_accessibility_show(),hl_common_ui_unBlockUI()}function l(){var e=c("#modal-offline-payment");e.find(".has-error").removeClass("has-error"),"check"==e.find("#payment-type").val()?(e.find(".payment-check").hl_accessibility_show(),e.find(".payment-online").hl_accessibility_hide(),e.find("#payment-note-group").removeClass("required"),e.find("#payment-note").removeClass("required-input")):(e.find(".payment-check").hl_accessibility_hide(),e.find(".payment-online").hl_accessibility_hide(),e.find("#payment-note-group").addClass("required"),e.find("#payment-note").addClass("required-input"))}i.find(".make-offline-payment").on("click",function(e){e.preventDefault(),t=c(this).data("payment-type"),hl_manageRegistration.openOfflinePaymentModal(c(this).data("itemkey"),"modal-offline-payment",a)}),i.find("#cancel-registration").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openCancelRegistrationModal(c(this).data("itemkey"),"modal-cancel-registration")}),i.find("#add-special-pricing").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openSpecialPricingModal(c(this).data("itemkey"),"modal-special-pricing")}),i.find("#issue-refund").on("click",function(e){e.preventDefault(),hl_manageRegistrantRoster.openRefundModal(c(this).data("itemkey"),"modal-issue-refund")}),c.fn.hl_ui_event_ManageRegistration_payment.refreshPane=function(){o()}}}(jQuery),function(v){v.fn.hl_ui_manageEvents_addEditEventPresenterModal=function(e){var n={calendarEventKey:y,contactKey:y,externalPresenterRefKey:y,eventPresenterKey:y};v.extend(n,e);var o=v(this),a=o.find("#presenter-prefix-designation"),s=o.find("#presenter-first-name"),r=o.find("#presenter-last-name"),l=(o.find("#presenter-image"),o.find("#presenter-job-title")),c=o.find("#presenter-company"),d=o.find("#presenter-bio"),u=o.find("#presenter-info-url"),h=o.find("#presenter-info-label"),p=o.find("#presenter-info-title"),m=o.find("#presenter-image-mainImage"),t=o.find("#presenter-save");function f(e){e.data("valid",!0),""==e.val()&&e.data("valid",!1)}function i(t){t.data("valid",!0),hl_common_ui_validateUrl(t.val(),function(e){e.Item1||""!=t.val()&&(t.data("valid",!1),t.data("help-block").text(e.Item2))})}function g(e){void 0!==e&&void 0!==e.data("valid")&&(e.data("valid")?(e.data("validator").removeClass("has-error"),0<e.data("help-block").length&&e.data("help-block").text("").hide()):(e.data("validator").addClass("has-error"),0<e.data("help-block").length&&""!=e.data("help-block").text()&&e.data("help-block").show()))}(function(){o.find(".PresenterRequiredInput_Marker").each(function(e){var t=v(this),i=t,n=t.find("input"),o=t.find(".help-block");n.data("validator",i),n.data("helpBlock",o),f(n)});var e=v("div#presenter-info-url-container"),t=e.find(".help-block");$infoURl=e.find("input"),$infoURl.data("validator",e),$infoURl.data("help-block",t),i($infoURl)})(),v(".required-input").on("change",function(e){f(v(this))}),u.on("change",function(e){i(v(this))}),t.on("click",function(e){!function(){v("input.required-input").each(function(e){g(v(this))});var i=o.find("input#presenter-info-url");hl_common_ui_validateUrl(i.val(),function(e){var t;e.Item1?(i.data("valid",!0),i.val(e.Item2)):""!=i.val()&&(i.data("valid",!1),i.data("help-block").text(e.Item2)),g(i),0===v(".has-error").length&&((t={}).EventPresenterKey=n.eventPresenterKey,t.ContactKey=n.contactKey,t.CalendarEventKey=n.calendarEventKey,t.PresenterInfoUrl=u.val(),t.PresenterInfoLabel=h.val(),t.PresenterInfoTitle=p.val(),t.ExternalPresenterRefKey=n.externalPresenterRefKey,t.Prefix=0<a.length?a.val():"",t.FirstName=0<s.length?s.val():"",t.LastName=0<r.length?r.val():"",t.JobTitle=0<l.length?l.val():"",t.CompanyName=0<c.length?c.val():"",t.Bio=0<d.length?d.val():"",t.PictureUrl=0<m.length&&0<m.attr("data-imagebase").length&&-1==m.attr("data-imagebase").indexOf("image-upload-placeholder")?m.attr("data-imagebase"):"",hl_eventPresenters.addEditEventPresenter(t))})}()})};var y="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(h){h.fn.hl_ui_manageEvents_addEditOptionModal=function(e){var a={isNew:!0,calendarEventKey:p,eventOptionKey:p,dateFormat:"MM-dd-yyyy",timeFormat:"h:mm A",registrantCount:0,timeZoneSelect2:"",optionRuleUsedNotification:"",sessionRuleUsedNotification:""};h.extend(a,e);var s=h(this),t=s.find("#add-edit-option-modal"),i=(s.find("#session-start-date"),s.find("#session-start-time"),s.find("#session-dates-help-block"),s.find("#session-end-date"),s.find("#session-end-time"),s.find("#session-presenter-search"),s.find("#add-session-presenter"),s.find("#option-save")),n=s.find("#modal-close");function r(e){$childRule=h(this);var t,i,n=$childRule.data("eventoptionrulekey"),o="";$childRule.hasClass("btn-default")?($childRule.removeClass("btn-default").addClass("btn-success"),t=$childRule.data("childeventoptionkey"),h("button.registration-rule-item").each(function(e){h(this).data("childeventoptionkey")===t&&h(this).data("eventoptionrulekey")!==n&&($registrationRule=h(this),$registrationRule.removeClass("registration-rule-item").removeClass("registration-rule").addClass("registration-rule-used"),$registrationRule.html('<span class="glyphicon glyphicon-ban-circle"></span>'),$registrationRule.unbind("click"),o=$registrationRule.hasClass("option")?a.optionRuleUsedNotification:a.sessionRuleUsedNotification,$notification=$registrationRule.parent().append(o))})):($childRule.removeClass("btn-success").addClass("btn-default"),i=$childRule.data("childeventoptionkey"),h("button.registration-rule-used").each(function(e){h(this).data("childeventoptionkey")===i&&($registrationRule=h(this),$registrationRule.removeClass("registration-rule-used").addClass("registration-rule-item").addClass("registration-rule"),$registrationRule.html('<span class="glyphicon glyphicon-ok"></span>'),$registrationRule.on("click",r),$notification=$.data("help-block").length&&e.data("help-block").text("").hide()):e.hasClass("price")&&parseFloat(e.val())<0?(e.data("valid",!1),e.data("help-block").text("Cannot be a negative number.")):e.data("valid",!0))}s.find(".requiredInput_Marker").each(function(e){var t=h(this),i=t,n=t.find(".help-block"),o=0<t.find("input").length?t.find("input"):t.find("select");o.data("validator",i),o.data("help-block",n),l(o)}),s.find(".required-input").on("change",function(e){l(h(this))}),s.find("button.registration-rule").on("click",r),i.on("click",function(e){var t;s.find("#invalid-option-data").hide(),s.find(".required-input").each(function(e){var t;l(h(this)),void 0!==(t=h(this))&&void 0!==t.data("valid")&&(t.data("valid")?(t.data("validator").removeClass("has-error"),0<t.data("help-block").length&&t.data("help-block").text("").hide()):(t.data("validator").addClass("has-error"),0<t.data("help-block").length&&""!==t.data("help-block").text()&&t.data("help-block").show()))}),0===s.find(".has-error").length?(t=new o(a),hl_eventOptionSession.saveOption(t)):s.find("#invalid-option-data").show()}),n.on("click",function(e){t.modal("hide"),s.remove()});var d=function(e,t,i,n,o,a){this.eventOptionPriceKey=e,this.eventOptionKey=t,this.registrantClassKey=i,this.earlyPrice=n,this.regularPrice=o,this.latePrice=a},u=function(e,t,i){this.parentEventOptionKey=e,this.childEventOptionKey=t,this.eventOptionRuleKey=i};function o(l){var e=s.find("#event-option-title"),t=s.find("#event-option-category"),i=s.find("#event-option-max-registrants"),n=s.find("#event-option-status"),o=s.find("#event-option-description"),c=this;c.EventOptionKey=l.eventOptionKey,c.CalendarEventKey=l.calendarEventKey,c.EventOptionCategoryKey=t.val(),c.IsSession=!1,c.Title=e.val(),c.Description=o.val(),c.MaximumRegistrants=i.val(),c.Status=n.val(),c.OptionPrices=[],h(".option-price").each(function(e){var t=h(this),i="True"===l.isNew?p:t.data("eventoptionpricekey"),n="True"===l.isNew?p:t.data("eventoptionkey"),o=t.data("registrantclasskey"),a=0<t.find("input[id*='early-reg-price-']").length?t.find("input[id*='early-reg-price-']").val():"",s=0<t.find("input[id*='regular-reg-price-']").length?t.find("input[id*='regular-reg-price-']").val():"",r=0<t.find("input[id*='late-reg-price-']").length?t.find("input[id*='late-reg-price-']").val():"";c.OptionPrices.push(new d(i,n,o,a,s,r))}),c.RegistrationRules=[],h(".registration-rule-item").each(function(e){var t,i,n,o=h(this);o.hasClass("btn-success")&&(t=o.data("parenteventoptionkey"),i=o.data("childeventoptionkey"),n=o.data("eventoptionrulekey"),c.RegistrationRules.push(new u(t,i,n)))})}};var p="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(x){x.fn.hl_ui_manageEvents_addEditSessionModal=function(e){var n={isNew:!0,calendarEventKey:S,eventOptionKey:S,dateFormat:"MM-dd-yyyy",timeFormat:"h:mm A",registrantCount:0,timeZoneSelect2:"",sessionRuleUsedNotification:""};x.extend(n,e);var t,m=x(this),i=m.find("#add-edit-session-modal"),o=m.find("#session-start-date-container"),h=m.find("#session-start-date"),p=m.find("#session-start-time"),a=m.find("#session-start-date-help-block"),s=m.find("#session-start-time-help-block"),r=m.find("#session-end-date-container"),f=m.find("#session-end-time"),l=(m.find("#session-end-date-help-block"),m.find("#session-end-time-help-block")),c=m.find("#session-presenter-search"),d=m.find("#add-session-presenter"),u=m.find("#option-save"),g=m.find("#modal-close");function v(e){$childRule=x(this);var t,i=$childRule.data("eventoptionrulekey");$childRule.hasClass("btn-default")?($childRule.removeClass("btn-default").addClass("btn-success"),t=$childRule.data("childeventoptionkey"),x("button.registration-rule-item").each(function(e){x(this).data("childeventoptionkey")==t&&x(this).data("eventoptionrulekey")!=i&&($registrationRule=x(this),$registrationRule.removeClass("registration-rule-item").removeClass("registration-rule").addClass("registration-rule-used"),$registrationRule.html('<span class="glyphicon glyphicon-ban-circle"></span>'),$registrationRule.unbind("click"),$notification=$registrationRule.parent().append(n.sessionRuleUsedNotification))})):($childRule.removeClass("btn-success").addClass("btn-default"),t=$childRule.data("childeventoptionkey"),x("button.registration-rule-used").each(function(e){x(this).data("childeventoptionkey")==t&&($registrationRule=x(this),$registrationRule.removeClass("registration-rule-used").addClass("registration-rule-item").addClass("registration-rule"),$registrationRule.html('<span class="glyphicon glyphicon-ok"></span>'),$registrationRule.on("click",v),$notification=$registrationRule.parent().find(".rule-used-notification").remove())}))}function y(e){var t=!0;h.data("valid",!0),p.data("valid",!0),f.data("valid",!0);var i,n,o,a,s,r,l=moment(new Date).format(e.dateFormat),c=moment(l,e.dateFormat,!0),d=""!=h.val()&&""!=p.val(),u=""!=f.val();return d?(i=moment(h.val(),e.dateFormat,!0),n=moment(p.val(),e.timeFormat,!0),o=moment(h.val()+" "+p.val(),e.dateFormat+" "+e.timeFormat,!0),i.isValid()&&n.isValid()?i.isBefore(c)&&"True"==e.isNew&&(t=!1,h.data("valid",!1),p.data("valid",!1),h.data("help-block").text("The start date cannot be in the past.")):(i.isValid()||(t=!1,h.data("valid",!1),h.data("help-block").text("Invalid date format. Must be "+e.dateFormat)),n.isValid()||(t=!1,p.data("valid",!1),p.data("help-block").text("Invalid time format. Must be "+e.timeFormat)))):(t=!1,h.data("valid",!1),p.data("valid",!1)),d&&u?(a=i,s=moment(f.val(),e.timeFormat,!0),r=moment(h.val()+" "+f.val(),e.dateFormat+" "+e.timeFormat,!0),a.isValid()&&s.isValid()?a.isBefore(c)&&"True"==e.isNew?(t=!1,f.data("valid",!1),f.data("help-block").text("The end date cannot be in the past.")):d&&o.isValid()&&o.isAfter(r)&&(t=!1,h.data("valid",!1),p.data("valid",!1),f.data("valid",!1),h.data("help-block").text("The start date must precede the end date.")):s.isValid()||(t=!1,f.data("valid",!1),f.data("help-block").text("Invalid time format. Must be "+e.timeFormat))):(t=!1,f.data("valid",!1)),t}function b(e){""==e.val()||e.val()==S?e.data("valid",!1):e.data("valid",!0)}function _(e){var t=!0;void 0!==e&&void 0!==e.data("valid")&&(t=e.data("valid"),"session-timezone"==e.attr("id")?t?e.data("validator").removeAttr("style").removeClass("has-error"):e.data("validator").attr("style","border-color: #b94a48;").addClass("has-error"):t?(-1!=e.attr("id").indexOf("session-start-time")&&e.data("validator").hasClass("has-error")||e.data("validator").removeClass("has-error"),0<e.data("help-block").length&&e.data("help-block").text("").hide()):(e.data("validator").addClass("has-error"),0<e.data("help-block").length&&""!=e.data("help-block").text()&&e.data("help-block").show()))}t=n,m.find(".session-date-picker").datetimepicker({format:t.dateFormat,pickTime:!1,showToday:!1,useCurrent:act(1,"days")}),m.find(".session-time-picker").datetimepicker({format:t.timeFormat,pickDate:!1,useCurrent:!1}),function(a){m.find(".requiredInput_Marker").each(function(e){var t=x(this),i=t,n="session-timezone-container"==t.attr("id")?t.find(":eq(2)"):t.find(":eq(1)"),o=t.find(".help-block");n.hasClass("select2-container")?(i=n.find("a.select2-choice"),(n=t.find("input#session-timezone")).data("validator",i),b(n),a.timeZoneSelect2.on("change",function(e){b(x(this))})):(n.data("validator",i),n.data("helpBlock",o),b(n))})}(t),function(e){h.data("validator",o),h.data("help-block",a),p.data("validator",o),p.data("help-block",s),f.data("validator",r),f.data("help-block",l),y(e)}(t),d.attr("disabled",""),function(a){m.find(".required-input").on("change",function(e){b(x(this))}),m.find(".delete-session-presenter").on("click",function(e){var t=x(this).data("eventpresenterkey"),i=x(this).data("eventoptionkey"),n=x(this).data("rowid"),o={};o.EventPresenterKey=t,o.EventOptionKey=i,o.PresenterRowId=n,hl_eventOptionSession.deleteSessionPresenter(o)}),m.find("button.registration-rule").on("click",v),m.find(".session-date-picker").on("dp.change",function(e){y(a)}),m.find(".session-time-picker").on("dp.change",function(e){y(a)}),m.find("input.required-date-input").on("change",function(e){return y(a)}),c.autocomplete({minLength:0,source:function(e,o){d.attr("disabled",""),d.removeData("contactKey");var i=[];m.find(".new-presenter").each(function(e){var t=x(this);"undefined"!=t.data("contactkey")&&i.push(t.data("contactkey"))}),x.when(hl_eventOptionSession.findPresenters(e.term,a.eventOptionKey,i)).then(function(e,t,i){var n;""!=e&&(n=x.parseJSON(e),o(x.map(n,function(e){return{FilterType:e.FilterType,ExternalPresenterRefKey:e.ExternalPresenterRefKey,ContactKey:e.ContactKey,EmailAddress:e.EmailAddress,PictureUrl:e.PictureUrl,value:e.Name,Name:e.Name}})),c.removeClass("ui-autocomplete-loading"))})},select:function(e,t){var i;t.item.ContactKey!=S||t.item.ExternalPresenterRefKey!=S?(d.data("contactKey",t.item.ContactKey),d.data("externalPresenterRefKey",t.item.ExternalPresenterRefKey),d.removeAttr("disabled")):(e.preventDefault(),x(this).val(""),d.attr("disabled",""),(i={IsNewPresenter:!0}).ContactKey=S,i.ExternalPresenterRefKey=S,i.EventOptionKey=a.eventOptionKey,hl_eventOptionSession.getAddEditSessionPresenterModal(i))}}),c.data("ui-autocomplete")._renderMenu=function(i,e){var n=this;x.each(e,function(e,t){n._renderItemData(i,t)})},c.data("ui-autocomplete")._renderItem=function(e,t){var i="",i="existing"==t.FilterType?'<a><div style="display: inline-block"><img height="50" width="50" class="img-typeahtyle="displspmargin-bottom: 5px;">').attr("data-value",t.Name).attr("data-id",t.ContactKey).append(i).appendTo(e)},d.on("click",function(e){var t=x(this),i=t.data("contactKey"),n=t.data("externalPresenterRefKey"),o={};o.ContactKey=S,o.ExternalPresenterRefKey=S,o.EventOptionKey=a.eventOptionKey,null!=i&&t.data("contactKey")!=S&&""!=x("#session-presenter-search").val()?o.ContactKey=i:null!=n&&t.data("externalPresenterRefKey")!=S&&""!=x("#session-presenter-search").val()&&(o.ExternalPresenterRefKey=n),hl_eventOptionSession.getAddEditSessionPresenterModal(o),x("#session-presenter-search").val("")}),u.on("click",function(e){var t;m.find("#invalid-session-data").hide(),m.find("#invalid-session-data-details").hl_accessibility_hide(),m.find("input.required-input").each(function(e){_(x(this))}),m.find("select.required-input").each(function(e){_(x(this))}),m.find("input.required-date-input").each(function(e){_(x(this))}),0==m.find(".has-error").length?(t=new k(a),hl_eventOptionSession.saveSession(t)):m.find("#invalid-session-data").show()}),g.on("click",function(e){i.modal("hide"),m.remove()})}(t);var w=function(e,t,i,n){this.eventPresenterKey=e,this.presenterRoleKey=t,this.isConfirmed=i,this.presenterInfo=n},C=function(e,t,i){this.parentEventOptionKey=e,this.childEventOptionKey=t,this.eventOptionRuleKey=i};function k(e){var t=m.find("#session-title"),i=m.find("#session-category"),n=m.find("#session-code"),o=m.find("#ce-credits"),a=m.find("#session-max-registrants"),s=m.find("#session-status"),r=m.find("#session-location"),l=m.find("#session-description"),c=m.find("#session-start-date"),d=m.find("#session-start-time"),u=m.find("#session-end-time"),h=m.find("#session-timezone"),p=this;p.IsSession=!0,p.EventOptionKey=e.eventOptionKey,p.CalendarEventKey=e.calendarEventKey,p.Title=t.val(),p.EventOptionCategoryKey=i.val(),p.SessionCode=n.val(),p.CECredits=o.val(),p.MaximumRegistrants=a.val(),p.Status=s.val(),p.Location=r.val(),p.Description=l.val(),p.StartDateTime=c.val()+" "+d.val(),p.EndDateTime=c.val()+" "+u.val(),p.TimeZoneKey=h.val(),p.SessionPresenters=[],x("div[id*='session-presenter-row-']").each(function(e){var t=x(this),i=t.data("eventpresenterkey"),n=t.find("select[id*='presenter-role-']").val(),o="1"==t.find("select[id*='presenter-confirm-']").val(),a=t.data("sessionpresenterinfo");p.SessionPresenters.push(new w(i,n,o,a))}),p.RegistrationRules=[],x(".registration-rule-item").each(function(e){var t,i,n,o=x(this);o.hasClass("btn-success")&&(t=o.data("parenteventoptionkey"),i=o.data("childeventoptionkey"),n=o.data("eventoptionrulekey"),p.RegistrationRules.push(new C(t,i,n)))})}};var S="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(v){v.fn.hl_ui_manageEvents_addEditSessionPresenterModal=function(e){var n={eventOptionKey:y,contactKey:y,externalPresenterRefKey:y,eventPresenterKey:y,isNewPresenter:!0};v.extend(n,e);var o=v(this),a=o.find("#presenter-prefix-designation"),s=o.find("#presenter-first-name"),r=o.find("#presenter-last-name"),l=(o.find("#presenter-image"),o.find("#presenter-job-title")),c=o.find("#presenter-company"),d=o.find("#presenter-bio"),u=o.find("#presenter-info-url"),h=o.find("#presenter-info-label"),p=o.find("#presenter-info-title"),m=o.find("#presenter-image-mainImage"),t=o.find("#presenter-save");function f(e){e.data("valid",!0),""==e.val()&&e.data("valid",!1)}function i(t){t.data("valid",!0),hl_common_ui_validateUrl(t.val(),function(e){e.Item1||""!=t.val()&&(t.data("valid",!1),t.data("help-block").text(e.Item2))})}function g(e){void 0!==e&&void 0!==e.data("valid")&&(e.data("valid")?(e.data("validator").removeClass("has-error"),0<e.data("help-block").length&&e.data("help-block").text("").hide()):(e.data("validator").addClass("has-error"),0<e.data("help-block").length&&""!=e.data("help-block").text()&&e.data("help-block").show()))}(function(){o.find(".PresenterRequiredInput_Marker").each(function(e){var t=v(this),i=t,n=t.find("input"),o=t.find(".help-block");n.data("validator",i),n.data("helpBlock",o),f(n)});var e=v("div#presenter-info-url-container"),t=e.find(".help-block");$infoURl=e.find("input"),$infoURl.data("validator",e),$infoURl.data("help-block",t),i($infoURl)})(),o.find(".required-input").on("change",function(e){f(v(this))}),u.on("change",function(e){i(v(this))}),t.on("click",function(e){var t,i;o.find("input.required-input").each(function(e){g(v(this))}),g(o.find("input#presenter-info-url")),0==o.find(".has-error").length&&((t={}).isNewPresenter=n.isNewPresenter,t.EventOptionKey=n.eventOptionKey,(i={}).EventPresenterKey=n.eventPresenterKey,i.ContactKey=n.contactKey,i.eventOptionKey=n.eventOptionKey,i.PresenterInfoUrl=u.val(),i.PresenterInfoLabel=h.val(),i.PresenterInfoTitle=p.val(),i.ExternalPresenterRefKey=n.externalPresenterRefKey,i.Prefix=0<a.length?a.val():"",i.FirstName=0<s.length?s.val():"",i.LastName=0<r.length?r.val():"",i.JobTitle=0<l.length?l.val():"",i.CompanyName=0<c.length?c.val():"",i.Bio=0<d.length?d.val():"",i.PictureUrl=0<m.length&&0<m.attr("data-imagebase").length&&-1==m.attr("data-imagebase").indexOf("image-upload-placeholder")?m.attr("data-imagebase"):"",t.SessionPresenterCRUD=i,hl_eventOptionSession.addEditSessionPresenter(t))})};var y="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(r){r.fn.hl_ui_manageEvents_additionalDetails=function(e){var t={};r.extend(t,e);var i=r(this),n=r("#event-max-registrants"),o=r("#event-credits-wrapper");function a(e){e.data("valid",!0),""!=e.val()&&parseInt(e.val())<0&&(e.data("valid",!1),e.data("help-block").text("Cannot be a negative number."))}function s(e){var t,i,n,o;e.is(":visible")&&(t=e.find("label"),i=e.find("input"),n=e.find(".feed-back"),t.removeClass("has-error"),i.removeClass("has-error"),n.hide(),n.find(".element-error").text(""),n.find(".sr-only").text(""),0<i.val().length&&(o=i.val().split(".")[1],(parseFloat(i.val())>parseFloat(i.attr("max"))||parseFloat(i.val())<parseFloat(i.attr("min"))||o&&2<o.length)&&(t.addClass("has-error"),i.addClass("has-error"),n.find(".element-error").text("The number must be between 0 and 99.99 and cannot exceed 2 decimal places."),n.find(".sr-only").text("(error)"),n.show())))}i.find(".event-bootstrap-switch").bootstrapSwitch(),i.find(".MaxRegistrantsInput_Marker").each(function(e){var t=r(this),i=t,n=t.find(".help-block"),o=t.find("input");o.data("validator",i),o.data("help-block",n),a(o)}),o.find("input").on("change",function(e){s(o)}),n.on("change",function(e){var t=r(this);"0"!=t.val()?a(t):t.val("")}),o.on("validate",{},function(e){s(r(this))})}}(jQuery,window),function(t){t.fn.hl_ui_manageEvents_addOptionSession=function(e){var i={addType:"addOn",calendarEventKey:n};t.extend(i,e),t(this).find("#add-option-session").on("click",function(e){var t={};t.CalendarEventKey=i.calendarEventKey,t.IsSession="addOn"!=i.addType,"addOn"==i.addType?hl_eventOptionSession.getAddEditOptionModal(t):hl_eventOptionSession.getAddEditSessionModal(t)})};var n="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(i){i.fn.hl_ui_manageEvents_editEventButton=function(e){i.extend({},e),i(this).find("#edit-calendar-event").on("click",function(e){var t={};t.CalendarEventKey=i(this).data("calendareventkey"),hl_manageEvents.getCreateEventModal(t)})}}(jQuery,window),function(i){i.fn.hl_ui_events_emailTemplates=function(e){var t={registrationProcessOption:"1"};i.extend(t,e);i(this)}}(jQuery,window),function($){$.fn.hl_ui_manageEvents_eventDates=function(e){var r={dateFormat:"MM-dd-yyyy",timeFormat:"h:mm A",actionId:"",hasRegistrants:!1,maxDurationNotificationText:"",recurringEventCannotBeBeforePreviousEventsText:"",recurringEventCannotBeAfterLaterEventsText:""};$.extend(r,e);var t=$(this),i=t.find("#event-start-date-container"),c=t.find("#event-start-date"),d=t.find("#event-start-time"),u=i.find("label"),h=i.find(".event-date-picker"),p=i.find(".event-time-picker"),m=i.find(".feed-back"),n=t.find("#event-end-date-container"),f=t.find("#event-end-date"),g=t.find("#event-end-time"),v=n.find("label"),y=n.find(".event-date-picker"),b=n.find(".event-time-picker"),_=n.find(".feed-back"),o=$("#manage-calendar-events-modal-contents").find("#event-type"),w=t.find("#event-repeating-previous"),C=t.find("#event-repeating-next");function k(e){u.addClass("has-error"),h.addClass("has-error"),p.addClass("has-error"),m.show(),m.find(".element-error").text(e),m.find(".sr-only").text("(error)")}function x(e){v.addClass("has-error"),0<f.length&&y.addClass("has-error"),b.addClass("has-error"),_.show(),_.find(".element-error").text(e),_.find(".sr-only").text("(error)")}function a(e){var t=!0;u.removeClass("has-error"),h.removeClass("has-error"),p.removeClass("has-error"),m.hide(),m.find(".element-error").text("Is required."),m.find(".sr-only").text(""),v.removeClass("has-error"),0<f.length&&y.removeClass("has-error"),b.removeClass("has-error"),_.hide(),_.find(".element-error").text("Is required."),_.find(".sr-only").text(""),c.attr("aria-describedby","event-start-date-feedback"),d.attr("aria-describedby","event-start-date-feedback"),f.attr("aria-describedby","event-start-date-feedback"),g.attr("aria-describedby","event-start-date-feedback");var i=moment(new Date).format(e.dateFormat),n=(moment(i,e.dateFormat,!0),moment(c.val(),e.dateFormat,!0)),o=moment(d.val(),e.timeFormat,!0),a=0<f.length?moment(f.val(),e.dateFormat,!0):n,s=moment(g.val(),e.timeFormat,!0),r=""!==c.val()&&""!==d.val(),l=!(0<f.length&&""===f.val()||""===g.val());return r?(n=moment(c.val(),e.dateFormat,!0),o=moment(d.val(),e.timeFormat,!0),n.isValid()&&o.isValid()?(momentPrevious=moment(w.val(),e.dateFormat,!0),momentNext=moment(C.val(),e.dateFormat,!0),0<w.val().length&&!n.isAfter(momentPrevious)?(t=!1,k(e.recurringEventCannotBeBeforePreviousEventsText)):0<C.val().length&&!n.isBefore(momentNext)&&(t=!1,k(e.recurringEventCannotBeAfterLaterEventsText))):(n.isValid()||(t=!1,k("Invalid start date format. Must be "+e.dateFormat)),o.isValid()||(t=!1,k("Invalid start time format. Must be "+e.timeFormat)))):(t=!1,k("Start date is required")),l?(a=0<f.length?moment(f.val(),e.dateFormat,!0):n,s=moment(g.val(),e.timeFormat,!0),a.isValid()&&s.isValid()?r&&n.isValid()&&o.isValid()&&(n.isAfter(a)?(t=!1,k("The start date must precede the end date."),x("")):(!f.is(":visible")&&o.isAfter(s)||n.isSame(a)&&o.isAfter(s))&&(t=!1,k("The start time must precede the end time."),x(""))):(0<f.length&&!a.isValid()&&(t=!1,k(""),c.attr("aria-describedby","event-end-date-feedback"),d.attr("aria-describedby","event-end-date-feedback"),f.attr("aria-describedby","event-end-date-feedback"),g.attr("aria-describedby","event-end-date-feedback"),x("Invalid end date format. Must be "+e.dateFormat)),s.isValid()||(t=!1,k(""),c.attr("aria-describedby","event-end-date-feedback"),d.attr("aria-describedby","event-end-date-feedback"),f.attr("aria-describedby","event-end-date-feedback"),g.attr("aria-describedby","event-end-date-feedback"),x("Invalid end time format. Must be "+e.timeFormat)))):(t=!1,c.attr("aria-describedby","event-end-date-feedback"),d.attr("aria-describedby","event-end-date-feedback"),f.attr("aria-describedby","event-end-date-feedback"),g.attr("aria-describedby","event-end-date-feedback"),x(e){-1!=e.attr("id").indexOf("date")&&0<$("div#event-dates-change-notification").length&&$("div#event-dates-change-notification").show()}function l(s){var e;0<$("#repeating-event-container").length&&"add"==r.actionId&&(e={},0<o.length&&(e.EventTypeKey=o.val()),$.when(hl_manageEvents.getRepeatingEventsConfig(e)).then(function(e){g-event-contain("#repeating-event").bootstrapSwitch("state"),a.replaceWith(e),$("#repeating-event-container").find("#repeating-event").bootstrapSwitch("state",t)),i=s,0<(o=$("input#repeat-starts-on")).length&&"event-start-date"==i.attr("id")&&(i.attr("title",i.val()),o.val(i.val()),o.attr("title",i.val()),n=moment(o.val(),r.dateFormat,!0).add(2,"years"),$("#max-duration-notification").text(r.maxDurationNotificationText+" "+n.format(r.dateFormat))),hl_common_ui_unBlockUI()}))}function S(e,t){s(t),a(r)||e.stopPropagation(),l(t)}function T(e,t){s(t),a(r),t.attr("title",t.val())}t.find(".event-date-picker").datetimepicker({format:r.dateFormat,pickTime:!1,showToday:!1,useCurrent:!1}),t.find(".event-date-picker").attr("data-isdirty",!1),t.find(".event-time-picker").datetimepicker({format:r.timeFormat,pickDate:!1,useCurrent:!1}),t.find(".event-time-picker").attr("data-isdirty",!1),function(e){"add"===e.actionId&&a(e)}(r),t.find(".event-date-picker").on("dp.change",function(e){S(e,$(this).find("input")),$(this).find("input").focus()}),t.find(".event-time-picker").on("dp.change",function(e){T(0,$(this).find("input")),$(this).find("input").focus()}),c.on("change",function(e){S(e,$(this))}),d.on("change",function(e){T(0,$(this))}),f.on("change",function(e){S(e,$(this))}),g.on("change",function(e){T(0,$(this))}),t.on("validate",{},function(e){a(r)})}}(jQuery,window),function(d){d.fn.hl_ui_manageEvents_eventFilters=functinage-events-paging-info");var i=d("#manage-events-status-filter"),n=d("#manage-events-event-type-filter"),c=d("#manage-events-community-filter"),o=d("#manage-events-sort-filter"),a=d("#filter-events"),t=d("#reset-event-filters");c.selectpicker({}),a.on("click",function(e){var t={};t.SortBy=o.val(),t.ListFilters={},t.ListFilters.StatusFilter=i.val(),t.ListFilters.EventTypeFilter=n.val(),t.ListFilters.CommunitiesFilter=""!=c.val()&&null!=c.val()?c.val().join(","):"",t.ListFilters.SearchTerm=d("#manage-events-search-searchInput").val(),t.ListFilters=JSON.stringify(t.ListFilters),t.CommunityKey=hl_common_util_getParameterByName("CommunityKey"),hl_manageEvents.getManageEventRows(t)}),t.on("click",function(e){e.preventDefault(),i.val("Upcoming"),n.val("00000000-0000-0000-0000-000000000000"),c.selectpicker("val","All"),a.click()}),o.on("change",function(e){a.click()}),c.on("changed.bs.select",function(e,t,i,n){var o,a,s,r=d(this),l=r.val();null!=l&&(console.log(r.val()),o=-1!=l.join().indexOf("All"),a=-1!=l.join().indexOf("Unassociated"),1<t&&(!o||-1<(s=l.indexOf("All"))&&(l.splice(s,1),c.selectpicker("val",l))),0===t&&1==i&&(a?c.selectpicker("val",["All","Unassociated"]):c.selectpicker("val",["All"])))}),d("#manage-events-search-showInput").on("searchClearTrigger",function(e,t,i){a.click()})}}(jQuery,window),function(w){w.fn.hl_ui_manageEvents_eventLocation=function(e){var t={actionId:"add"};w.extend(t,e);var i=w(this),n=i.find("#event-participation"),o=i.find(".physical"),a=i.find("#event-country-container"),s=i.find("#event-country"),r=i.find("div#event-states-container"),l=i.find("#event-state"),c=i.find("div[id*='-event-zip-wrapper']"),d=i.find(".conference"),u=i.find(".online"),h=i.find("#event-online-url-type"),p=i.find("#event-online-url"),m=i.find("div#event-online-url-container"),f="00000000-0000-0000-0000-000000000000";function g(){o.find(".required-text-input.has-feedback").each(function(e){w(this).trigger("clearValidation")}),r.find(".has-error").each(function(e){w(this).removeClass("has-error")}),r.find(".feed-back").hide()}function v(){var e=m.find("label"),t=m.find(".form-control-feedback"),i=m.find(".feed-back");e.removeClass("has-error"),h.removeClass("has-error"),p.removeClass("has-error"),t.hide(),i.hide(),i.find(".element-error").text("Is required."),i.find(".sr-only").text("")}function y(){l.on("blur",function(e){_(r)}),r.on("validate",{},function(e){_(r)})}function b(e,t,i,n){var o=t.val().split("http://").join("").split("https://").join("");t.val(o),function(t,i,e,n){var o=e.find("label"),a=e.find(".form-control-feedback"),s=e.find(".feed-back"),r=""!==i.val().trim()?t.val().trim()+i.val().trim():"";n||(o.removeClass("has-error"),t.removeClass("has-error"),i.removeClass("has-error"),a.hide(),s.hide(),s.find(".element-error").text("Is required."),s.find(".sr-only").text(""));e.is(":visible")&&(""!==i.val()?n||(i.attr("disabled","disabled"),i.addClass("loadinggif"),w("input.event-action-button").attr("Disabled","Disabled"),hl_common_ui_validateUrl(r,function(e){e.Item1||(o.addClass("has-error"),t.addClass("has-error"),i.addClass("has-error"),a.show(),s.find(".element-error").text("Invalid URL."),s.find(".sr-only").text("(error)"),s.show()),i.removeAttr("disabled"),i.removeClass("loadinggif"),w("input.event-action-button").removeAttr("Disabled")})):(o.addClass("has-error"),t.addClass("has-error"),i.addClass("has-error"),a.show(),s.find(".element-error").text("Is required."),s.find(".sr-only").text("(error)"),s.show()))}(e,t,i,n)}function _(e){$selectLabel=e.find("label"),$select=e.find("select"),$selectFeedback=e.find(".feed-back"),$selectLabel.removeClass("has-error"),$select.removeClass("has-error"),$selectFeedback.hide(),"event-states-container"!==e.attr("id")&&$selectFeedback.find(".element-error").text(""),$selectFeedback.find(".sr-only").text(""),e.is(":visible")&&void 0!==n.val()&&null!==n.val()&&-1!==n.val().join().indexOf("1")&&(""!=$select.val()&&$select.val()!=f&&null!=$select.val()||($selectLabel.addClass("has-error"),$select.addClass("has-error"),$selectFeedback.find(".element-error").text("Is required."),$selectFeedback.find(".sr-only").text("(error)"),$selectFeedback.show()))}n.selectpicker({}),function(e){0<p.length&&"add"!==e.actionId&&b(h,p,m,!1);s.on("blur",function(e){_(a)})}(t),function(){var e=i.find("div#states-container");0<r.length&&0<e.length&&(""!=s.val()&&1<e.find("option").length?r.show():r.hide(),y());s.on("change",function(e){"US"==w(this).val()?c.trigger("validationOn"):c.trigger("validationOff");var t=i.find("#event-state");0<t.length&&0<t.val().length&&s.data("prev-state",t.val()),l.off("blur",function(e){_(r)}),r.off("validate",{},function(e){_(r)}),hl_manageEvents.eventStates(w(this).val(),function(){var e=s.data("prev-state");l=i.find("#event-state"),e&&0<e.length&&l.is(":visible")&&0<l.children("option[value='"+e+"']").length&&l.val(e),y(().indexOf("1")?(a.find("label").html("Country<sup>*</sup>"),a.find(".feed-back .element-error").text("Is required."),o.show(),i&&""!==s.val()&&$state.show()):(a.find("label").html("Country"),a.find(".feed-back .element-error").text(""),g(),o.hide(),$state.hide()),-1!==t.val().join().indexOf("2")?d.show():d.hide(),-1!==t.val().join().indexOf("4")?u.show():(u.hide(),v())):(g(),_(a),v(),a.find("label").html("Country"),o.hide(),$state.hide(),d.hide(),u.hide())}),h.on("change",function(e){b(w(this),p,m,!1)}),p.on("change",function(e){b(h,w(this),m,!1)}),p.on("blur",function(e){b(h,w(this),m,!1)}),m.on("validate",{},function(e){b(h,p,w(this),!0)})}()}}(jQuery,window),function(r){r.fn.hl_ui_manageEvents_eventPresenters=function(e){var a={calendarEventKey:l};r.extend(a,e);var t=r(this),s=t.find("#event-presenter-search"),n=t.find("#add-event-presenter");n.attr("disabled",""),s.autocomplete({minLength:0,source:function(e,o){n.attr("disabled",""),n.removeData("contactKey"),r.when(hl_eventPresenters.findPresenters(e.term,a.calendarEventKey)).then(function(e,t,i){var n;""!=e&&(n=r.parseJSON(e),o(r.map(n,function(e){return{FilterType:e.FilterType,ExternalPresenterRefKey:e.ExternalPresenterRefKey,ContactKey:e.ContactKey,EmailAddress:e.EmailAddress,PictureUrl:e.PictureUrl,value:e.Name,Name:e.Name}})),s.removeClass("ui-autocomplete-loading"))})},select:function(e,t){var i;t.item.ContactKey!=l||t.item.ExternalPresenterRefKey!=l?(n.data("contactKey",t.item.ContactKey),n.data("externalPresenterRefKey",t.item.ExternalPresenterRefKey),n.removeAttr("disabled")):(e.preventDefault(),r(this).val(""),n.attr("disabled",""),(i={IsNewPresenter:!0}).ContactKey=l,i.ExternalPresenterRefKey=l,i.CalendarEventKey=a.calendarEventKey,i.ExternalPresenterName=t.item.Name.split(" ",2),hl_eventPresenters.getAddEditEventPresenterModal(i))}}),s.data("ui-autocomplete")._renderMenu=function(i,e){var n=this;r.each(e,function(e,t){n._renderItemData(i,t)})},s.data("ui-autocomplete")._renderItem=function(e,t){var i="",i="existing"==t.FilterType?'<a><div style="display: inline-block"><img width="50" height="50" class="img-typeahead" src="'+t.PictureUrl+'"></div> <div style="display: inline-block">&nbsp;'+t.Name+"</div></a>":'<a style="border-top: 1px solid; padding-top: 5px;"><div style="display: inline-block">"'+t.Name+'" - Create New</div></a>';return r('<li class="ui-menu-item" style="margin-bottom: 5px;">').attr("data-value",t.Name).attr("data-id",t.ContactKey).append(i).appendTo(e)},n.on("click",function(e){var t=r(this),i=t.data("contactKey"),n=t.data("externalPresenterRefKey"),o={};o.ContactKey=l,o.ExternalPresenterRefKey=l,o.CalendarEventKey=a.calendarEventKey,null!=i&&t.data("contactKey")!=l&&""!=r("#event-presenter-search").val()?o.ContactKey=i:null!=n&&t.data("externalPresenterRefKey")!=l&&""!=r("#event-presenter-search").val()&&(o.ExternalPresenterRefKey=n),hl_eventPresenters.getAddEditEventPresenterModal(o),r("#event-presenter-search").val("")})};var l="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(M){M.fn.hl_ui_manageEvents_eventPricingOptions=function(e){var t={actionId:"add",calendarEventKeyRegistration:!1,dateFormat:"MM-DD-YYYY",isModal:!1,registrationEventOptionKey:O,hasRegistrants:!1,saveEventSeries:!1};M.extend(t,e);var h=M(this),i=(M("input#event-start-date"),M("#event-rind("#event-early-registration-dates-container"),l=h.find(".early-registration-begin-date-container"),u=h.find("input#event-early-registration-begin-date"),c=(h.find("input#event-early-registration-end-date"),h.find("#event-regular-registration-dates-container")),p=h.find(".regular-registration-begin-date-container"),m=h.find("input#event-regular-registration-begin-date"),f=h.find(".regular-registration-end-date-container"),g=h.find("input#event-regular-registration-end-date"),v=h.find("#event-late-registration-dates-container"),y=(h.find("input#event-late-registration-begin-date"),h.find(".late-registration-end-date-container")),b=h.find("input#event-late-registration-end-date"),_=h.find("#event-registration-pricing-type"),n=h.find("#event-currency"),w=[],o=M("#event-pricing-modal"),s=M("#event-pricing-modal-save"),r=M("#event-save-series-pricing"),C=M("#event-pricing-modal-cancel"),k=h.find("#event-external-registration-container"),x=h.find("#event-external-reg-url-type"),S=h.find("#event-external-reg-url");function a(a){0<S.length?(x.on("change",function(e){T(M(this),S,k)}),S.on("blur",function(e){var t=M(this),i=t.val().split("http://").join("").split("https://").join("");t.val(i),T(x,t,k)}),h.find("#event-external-registration-container").on("validate",{},function(e){T(x,S,k,!0)})):(i.on("change",function(e){var t=M(this);null!==t.val()?(-1!==t.val().join().indexOf("early")?(d.show(),h.find(".early-price-column").show()):(d.hi$("early")),-1!==t.val().join().indexOf("late")?(v.show(),h.find(".late-price-column").show()):(v.hide(),h.find(".late-price-column").hide(),$("late"))):(d.hide(),v.hide(),$())}),_.on("changed.bs.select",{hasRegistrants:a.hasRegistrants},function(e){var t,i,n,o,a,s,r=M(this);w=null!==r.val()?(t=[],i=-1!==r.val().join().indexOf("simple"),n=-1!==r.val().join().indexOf("member/nonmember"),o=1<r.val().length,a=-1!==w.join().indexOf("simple"),s=-1!==w.join().indexOf("member/nonmember"),(a||s)&&o?t=r.vamber/nonmember","").substr(1).split(","):a||s||!i&&!n?(t=r.val(),"True"===e.data.hasRegistrants&&0<r.find("option.complexRegClass:disabled").length&&r.find("option.complexRegClass:disabled").each(function(){t.push(M(this).attr("value"))})):t=i?["simple"]:["member/nonmember"],_.selectpicker("val",t),t):(_.selectpicker("val",["simple"]),_.val())}),_.on("hidden.bs.select",{hasRegistrants:a.hasRegistrants},function(e){var t,i,n;$this=M(this),1<$this.find("option").length&&(t=$this.val(),i=_.attr("calendarEventKey"),n=_.attr("eventTypeKey"),-1==$this.val().join().indexOf("simple")&&-1==$this.val().join().indexOf("member/nonmember")&&"True"===e.data.hasRegistrants&&$this.find("option.complexRegClass:disabled").each(function(){t.push(M(this).attr("value"))}),hl_manageEvents.getEventPricingInputs(i,n,t))}),n.on("change",function(e){h.find(".currency-symbol").html(M(this).find("option:selected").attr("symbol"))}),h.find(".event-date-picker.early").on("dp.change",function(e){M(this).find("input").focus()}),h.find(".event-date-picker.regular-begin").on("dp.change",function(e){M(this).find("input").foc"input").focus()}),h.find(".event-date-picker.late").on("dp.change",function(e){M(this).find("input").focus()}),h.find(".early-required-date").on("blur",function(e){$("early"),j(a,"early")||e.stopPropagation()}),h.find(".regular-required-begin-date").on("blur",function(e){$("regular-begin"),j(a,"regular-begin")||e.stopPropagation()}),h.find(".regular-required-end-date").on("blur",function(e){$("regular-end"),j(a,"regular-end")||e.stopPropagation()}),h.find(".late-required-end-date").on("blur",function(e){$("late"),j(a,"late")||e.stopPropagation()}),h.on("validate",{},function(e){$("all"),j(a,"all")||e.stopPropagation()})),"True"===a.isModal&&0<s.length&&0<C.length&&(s.on("click",function(e){var t;A()?(t=new P(a),hl_manageEvents.saveEventPricing(t)):E()}),0<r.length&&r.on("click",function(e){var t,i,n,o=M(this);A()?(a.saveEventSeries=!0,t=new P(a),"True"==o.data("serieshasregistrants")?(i=o.data("cannotsaveseriesvaluesalert"),(n={HeaderText:"Save Event Series Pricing"}).AlertText=i,n.OkayBtnText="OK",n.OkayCallback="var crudRequestJSON = '"+JSON.stringify(t)+"'; hl_manageEvents.saveEventPricing(JSON.parse(crudRequestJSON));",hl_common.alert(n)):hl_manageEvents.saveEventPricing(t)):E()}),C.on("click",function(e){M("#event-pricing-modal").modal("hide"),M("#event-pricing-modal").remove()}))}function T(t,i,e,n){var o=e.find("label"),a=e.find(".form-control-feedback"),s=e.find(".feed-back"),r=""!==i.val().trim()?t.val().trim()+i.val().trim():"";n||(o.removeClass("has-error"),t.removeClass("has-error"),i.removeClass("has-error"),a.hide(),s.hide(),s.find(".element-error").text("Is required."),s.find(".sr-only").text(ddClass("has-error"),i.addClass("has-error"),a.show(),s.find(".element-error").text("Is required."),s.find(".sr-only").text("(error)"),s.show()):n||(i.attr("disabled","disabled"),i.addClass("loadinggif"),M("input.event-action-button").attr("Disabled","Disabled"),hl_common_ui_validateUrl(r,function(e){e.Item1||(o.addClass("has-error"),t.addClass("has-error"),i.addClass("has-error"),a.show(),s.find(".element-error").text("Invalid URL."),s.find(".sr-only").text("(error)"),s.show()),i.removeAttr("disabled"),i.removeClass("loadinggif"),M("input.event-action-button").removeAttr("Disabled")}))}function $(i){var e=null,n=null,t=null,o=null,a=".registration-date-container.has-feedback";switch(i){case"early":a=".early-registration-begin-date-container";break;case"regular-begin":a=".regular-registration-begin-date-container";break;case"regular-end":a=".regular-registration-end-date-container";break;case"late":a=".late-registration-end-date-container"}o=h.find(a),"all"!==i&&(n=h.find(a).find("label"),e=(t=o.closest(".registration-date-container.has-feedback")).find("label").first()),o.each(function(e){var t=M(this);"all"===i?t.find("label").each(function(e){M(this).removeClass("has-error")}):n.removeClass("has-error"),t.find(".event-date-picker").each(function(e){M(this).removeClass("has-error")}),t.find(".feed-back").each(function(e){M(this).hide(),M(this).find(".element-error").text("Is required."),M(this).find(".sr-only").text("")})}),"all"!==i&&1==t.find("label[class*='has-error']").length&&e.removeClass("has-error")}function I(e,t,i){var n=null,o=null,a=null,s=null,r=null;switch(e){case"early":case"late":o=(a="early"===e?l:y).find("label"),s=a.find(".event-date-picker"),r=a.find(".feed-back"),n="early"===e?d.find("label").first():v.find("label").first();break;default:r=(s=(o="begin"===t?(a=p).find("label"):(a=f).find("label"),a.find(".event-date-picker")),a.find(".feed-back")),n=c.find("label").first()}n.addClass("has-error"),o.addClass("has-error"),s.addClass("has-error"),r.find(".element-error").text(i),r.find(".sr-only").text("(error)"),r.show()}function j(e,t){var i=!0,n=moment(new Date).format(e.dateFormat),o=(moment(n,e.dateFormat,!0),moment()),a=moment(),s=moment(),r=moment(),l=0<d.length&&"none"!==d.css("display"),c=0<v.length&&"none"!==v.css("display");return l&&(o=moment(u.val(),e.dateFormat,!0),"all"!==t&&"early"!==t||($("early"),""===u.val()?(I("early","begin","Is required"),i=!1):o.isValid()||(I("early","begin","Invalid date format. Must be "+e.dateFormat),i=!1))),a=moment(m.val(),e.dateFormat,!0),"all"!==t&&"regular-begin"!==t||($("regular-begin"),""===m.val()?(I("regular","begin","Is required"),i=!1):a.isValid()?l&&o.isValid()&&(a.isBefore(o)||a.isSame(o,"day"))&&(I("regular","begin","The regular registration begin date cannot precede or eqent(g.val(),e.dateFormat,!0),"all"!==t&&"regular-end"!==t||($("regular-end"),""===g.val()?(I("regular","end","Is required"),i=!1):s.isValid()?a.isValid()&&(s.isBefore(a)||s.isSame(a,"day"))&&(I("regular","end","The regular registration end date cannot precede or equal the regular registration begin date."),i=!1):(I("regular","end","Invalid date format. Must be "+e.dateFormat),i=!1)),c&&(r=moment(b.val(),e.dateFormat,!0),"all"!==t&&"late"!==t||($("late"),""===b.val()?(I("late","end","Is required"),i=!1):r.isValid()?s.isValid()&&(r.isBefore(s)||r.isSame(s,"day"))&&(I("late","end","The late registration end date cannot precede or equal the regular registration end date."),i=!1):(I("late","end","Invalid date format. Must be "+e.dateFormat),i=!1))),i}function E(){h.find(".has-error").each(function(e){var t=!1;return M(this).is("input")?(M(this).focus(),t=!0):(M(this).is("[class*='event-date-picker']")||M(this).is("[class*='pricing-input']"))&&(M(this).find("input").focus(),t=!0),!t})}function A(){return o.find("#event-pricing-options-container").trigger("validate"),o.find("#event-pricing-inputs-container").trigger("validate"),0===M(".has-error").length}function P(e){function l(e,t,i,n,o){this.registrantClassKey=e,this.optionPriceKey=t,this.earlyPrice=i,this.regularPrice=n,this.latePrice=o}var t=h.find("#event-registration-time"),i=h.find("#event-early-registration-begin-date"),n=(h.find("#event-early-registration-end-date"),h.find("#event-regular-registration-begin-date")),o=h.find("#event-regular-registration-end-date"),a=(h.find("#event-late-registration-begin-date"),h.find("#event-late-registration-end-date")),s=h.find("#event-registration-pricing-type"),r=h.find("#event-currency"),c=h.find("#event-type-registration-process-option"),d=this;if(d.IsNew=!1,d.CurrencyCode=r.val(),d.CalendarEventKey=e.calendarEventKey,d.RegistrationProcessOption=c.val(),d.RegistrationEventOptionKey=e.registrationEventOptionKey,d.HasEarlyRegistration=typeof("undefined"!==t.val())&&-1!==t.val().indexOf("early"),d.HasLateRegistration=typeof("undefined"!==t.val())&&-1!==t.val().indexOf("late"),d.HasEarlyRegistration&&(d.EarlyRegistrationDate=moment(i.val(),e.dateFormat).format("MM-DD-YYYY")+" 12:00:00 AM"),d.RegularRegistrationDate=moment(n.val(),e.dateFormat).format("MM-DD-YYYY")+" 12:00:00 AM",d.RegularRegistrationEndDate=moment(o.val(),e.dateFormat).format("MM-DD-YYYY")+" 11:59:59 PM",d.HasLateRegistration&&(d.LateRegistrationEndDate=moment(a.val(),e.dateFormat).format("MM-DD-YYYY")+" 11:59:59 PM"),"True"===e.hasRegistrants)if(1==s.find("option:selected").length)switch(s.find("option:selected").attr("value")){case"simple":d.PriceTypeCode="1";break;case"member/nonmember":d.PriceTypeCode="2"}else d.PriceTypeCode="3",d.ComplexRegPricing=[];else-1!==s.val().indexOf("simple")?d.PriceTypeCode="1":-1!==s.val().indexOf("member/nonmember")?d.PriceTypeCode="2":(d.PriceTypeCode="3",d.ComplexRegPricing=[]);var u=M("div#event-pricing-inputs-container").find("div.pricing-input-row");switch(d.PriceTypeCode){case"1":d.SimpleRegPricingKey=u.data("event-option-price-key"),d.HasEarlyRegistration&&(d.SimpleEarlyRegPricing=parseFloat(u.find("input.early-price-input").val()).toFixed(2)),d.SimpleRegularRegPricing=parseFloat(u.find("input.regular-price-input").val()).toFixed(2),d.HasLateRegistration&&(d.SimpleLateRegPricing=parseFloat(u.find("input.late-price-input").val()).toFixed(2));break;case"2":u.each(function(e,t){var i=M(this);"True"===i.data("isdefaultmember")?(d.MemberRegPricingKey=i.data("event-option-price-key"),d.HasEarlyRegistration&&(d.MemberEarlyRegPricing=parseFloat(i.find("input.early-price-input").val()).toFixed(2)),d.MemberRegularRegPricing=parseFloat(i.find("input.regular-price-input").val()).toFixed(2),d.HasLateRegistration&&(d.MemberLateRegPricing=parseFloat(i.find("input.late-price-input").val()).toFixed(2))):(d.NonMemberRegPricingKey=i.data("event-option-price-key"),d.HasEarlyRegistration&&(d.NonMemberEarlyRegPricing=parseFloat(i.find("input.early-price-input").val()).toFixed(2)),d.NonMemberRegularRegPricing=parseFloat(i.find("input.regular-price-input").val()).toFixed(2),d.HasLateRegistration&&(d.NonMemberLateRegPricing=parseFloat(i.find("input.late-price-input").val()).toFixed(2)))});break;case"3":u.each(function(e,t){var i=M(this),n=i.data("registrant-class-key"),o=i.data("event-option-price-key"),a=d.HasEarlyRegistration?parseFloat(i.find("input.early-price-input").val()).toFixed(2):"",s=parseFloat(i.find("input.regular-price-input").val()).toFixed(2),r=d.HasLateRegistration?parseFloat(i.find("input.late-price-input").val()).toFixed(2):"";d.ComplexRegPricing.push(new l(n,o,a,s,r))})}d.SaveEventSeries=e.saveEventSeries}t.isExternalRegistration||(i.selectpicker({}),h.find(".event-date-picker").datetimepicker({format:t.dateFormat,pickTime:!1,showToday:!1,useCurrent:!1}),_.selectpicker({}),w=_.val()),a(t)};var O="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(o,i){o.fn.hl_ui_manageEvents_Hold",alertText:"This event has been put on hold. You cannot navigate to this event.",alertButtonText:"OK",cancelEventConfirmTitle:"Cancel Event",cancelEventConfirmText:"Are you sure you want to cancel this event?",cancelEventConfirmYes:"Yes",cancelEventConfirmNo:"No",cancelRepeatingEventTitle:"Cancel Series",cancelRepeatingEventConfirmText:"Cancelling the first event in the series will cancel the entire series, do you wish to proceed?",cancelEventRegistrantNotificationText:"Registrants will be notified via email that the event is canceled."};o.extend(n,e);var t=o(this);!function(){hl_common_util_bindReturnUrl();var e=o("div#manage-events-paging-info");0<e.length&&"Showing 1 to 0 of 0"!==n.rowSummary?e.replaceWith('<div id="manage-events-paging-info" class="pull-left text-muted count">'+n.rowSummary+"</div>"):e.replaceWith('<div id="manage-events-paging-info" class="pull-left text-muted count"></div>');o("a.event-link-title").on("click",function(e){if("True"===o(this).data("eventonhold")){e.preventDefault();var t={};return t.HeaderText=n.alertHeaderText,t.AlertText=n.alertText,t.OkayBtnText=n.alertButtonText,hl_common.alert(t),!1}}),t.find(".repeat-event-link").each(function(e){o(this).on("click",function(e){var t=o(this).data("calendareventkey");hl_manageEvents.getEventSeriesList(t)})}),t.find(".edit-calendar-event").each(function(e){o(this).on("click",function(e){var t={};t.CalendarEventKey=o(this).attr("CalendarEventKey"),t.EventTypeKey="",t.ShowCECredits=n.showCECredits,hl_manageEvents.getCreateEventModal(t)})}),t.find(".edit-event-pricing").each(function(e){o(this).on("click",function(e){var t={};t.CalendarEventKey=o(this).data("calendareventkey"),hl_manageEvents.getEventPricingModal(t)})}),t.find(".edit-event-add-ons").each(function(e){o(this).on("click",function(e){var t={};t.CalendarEventKey=o(this).data("calendareventkey"),hl_eventOptionSession.getEventOptionsSessionsModal(t)})}),t.find(".edit-event-sessions").each(function(e){o(this).on("click",function(e){var t={};t.CalendarEventKey=o(this).data("calendareventkey"),t.ShowOptions=!1,t.ShowSessions=!0,hl_eventOptionSession.getEventOptionsSessionsModal(t)})}),t.find(".edit-event-presenters").each(functionndareventkey"),hl_eventPresenters.getEventPresentersModal(t)})}),t.find(".edit-special-pricing").each(function(e){o(this).on("click",function(e){var t={};t.CalendarEventKey=o(this).data("calendareventkey"),hl_manageEvents.getSpecialPricingModal(t)})}),t.find(".event-hold-link").on("click",function(e){var t=o(this),i=t.data("calendareventkey"),n=t.data("putonhold");hl_manageEvents.putOnHold(i,n)}),t.find(".event-cancel").on("click",function(e){var t=o(this),i={};"),i.RegistrantNum=t.data("registrantnum"),i.RegistrationProcess=t.data("registrationprocessoption"),i.FutureEvent=t.data("futureevent"),i.HasInvites=t.data("hasinvites"),i.ConfirmTitle=i.IsRepeatEventParent?n.cancelRepeatingEventTitle:n.cancelEventConfirmTitle,i.ConfirmationText=((0<i.RegistrantNum||i.IsRepeatEventParent)&&2<i.RegistrationProcess&&i.FutureEvent?n.cancelEventRegistrantNotificationText+"<br>":"")+(i.IsRepeatEventParent?n.cancelRepeatingEventConfirmText:n.cancelEventConfirmText),i.CancelEventConfirmYes=n.cancelEventConfirmYes,i.CancelEventConfirmNo=n.cancelEventConfirmNo,hl_manageEvents.confirmCancelEvent(i)}),t.find(".event-copy").on("click",function(e){var t=o(this);hl_manageEvents.copyEvent(t.data("calendareventkey"))}),t.find(".delete-event").on("click",function(e){var t=o(this),i={};i.CalendarEventKey=t.data("calendareventkey"),i.EventTitle=t.data("calendareventtitle"),i.ConfirmationText=t.data("repeateventconfirmation"),i.IsRepeatingEvent="True"==t.data("isrepeatingevent"),i.AllowDelete="True"==t.data("allowdelete"),i.AllowDeleteSeries="True"==t.data("allowdeleteseries"),hl_manageEvents.confirmDeleteEvent(i)}),t.find(".send-invitations").each(function(e){o(this).on("click",function(e){hl_event_admininvite.showSendInvitationDialog(o(this).data("calendareventkey"))})}),o("#manage-events-rows-container .pagination-container li").not(".active,.disabled").find("a").bind("click",function(e){e.preventDefault(),hl_common_ui_blockUI(),postUrl=o(this).attr("href"),pushStateUrl=i.location.pathname+postUrl.substr(postUrl.indexOf("?"),postUrl.length),void 0===history.pushState&&(location.href=pushStateUrl),o.ajax({type:"GET",dataType:"html",url:postUrl,success:function(e){history.pushState(e,null,pushStateUrl),o("body").scrollTop(0);var t=o("div#manage-events-rows-container");0<t.length&&t.replaceWith(e),hl_common_ui_unBlockUI()}})})}()}}(jQuery,window),function(a){a.fn.hl_ui_manageEvents_eventsAddEditActions=function(e){var t={showCECredits:"true",communityKey:s};a.extend(t,e);var i=a(this),n=i.find("#add-calendar-event"),o={};n.on("click",function(e){(o={CalendarEventKey:"",EventTypeKey:"",ShowCECredits:!0}).CommunityKey=t.communityKey,hl_manageEvents.getCreateEventModal(o)}),i.find(".create-event-by-type").each(function(e){a(this).on("click",function(e){(o={CalendarEventKey:""}).EventTypeKey=a(this).attr("EventTypeKey"),o.ShowCECredits=!0,o.CommunityKey=t.communityKey,hl_manageEvents.getCreateEventModal(o)})})};var s="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(c){c.fn.hl_ui_manageEvents_optionSessionActions=function(e){c.extend({},e);var t=c(this),i=t.find(".option-edit"),n=t.find(".session-edit"),o=t.find(".option-delete"),a=t.find(".session-delete");function l(e){var t={};t.EventOptionKey=e.data("eventoptionkey"),t.CalendarEventKey=e.data("calendareventkey"),t.IsSession=e.data("issession"),hl_eventOptionSession.confirmEventOptionDelete(t)}!function(){t.find(".sort-up").on("click",function(e){var t={};t.EventOptionKey=c(this).data("eventoptionkey"),t.CalendarEventKey=c(this).data("calendareventkey"),t.IsSession=c(this).data("issession"),t.SortUp=!0,hl_eventOptionSession.sortEventOption(t)}),t.find(".sort-down").on("click",function(e){var t={};t.EventOptionKey=c(this).data("eventoptionkey"),t.CalendarEventKey=c(this).data("calendareventkey"),t.IsSession=c(this).data("issession"),t.SortDown=!0,hl_eventOptionSession.sortEventOption(t)}),0<i.length&&i.each(function(e){c(this).on("click",function(e){var t={};t.EventOptionKey=c(this).data("eventoptionkey"),t.CalendarEventKey=c(this).data("calendareventkey"),t.IsSession=c(this).data("issession"),hl_eventOptionSession.getAddEditOptionModal(t)})});0<o.length&&o.each(function(e){c(this).on("click",function(e){var t,i="True"==c(this).data("hasregistrants"),n="True"==c(this).data("hasrules"),o=c(this).data("registrantcount"),a=c(this).data("registrationchoicename"),s="",r="";i||n?(s=i?"<span style='font-weight:bold;'>"+o+"</span> "+(1==o?"registrant is":"registrants are")+" registered for this registration choice. <br>":"",r=n?"Registration rules are configured for this registration choice.":"",(t={}).HeaderText="Cannot Delete <span style='font-weight:bold;'>"+a+"</span>",t.AlertText=s+r,t.OkayBtnText="OK",hl_common.alert(t)):l(c(this))})});0<n.length&&n.each(function(e){c(this).on("click",function(e){var t={};t.EventOptionKey=c(this).data("eventoptionkey"),t.CalendarEventKey=c(this).data("calendareventkey"),t.IsSession=c(this).data("issession"),hl_eventOptionSession.getAddEditSessionModal(t)})});0<a.length&&a.each(function(e){c(this).on("click",function(e){var t,i="True"==c(this).data("hasregistrants"),n="True"==c(this).data("hasrules"),o=c(this).data("registrantcount"),a=c(this).data("sessionname"),s="",r="";i||n?(s=i?"<span style='font-weight:bold;'>"+o+"</span> "+(1==o?"registrant is":"registrants are")+" registered for this session. <br>":"",r=n?"Registration rules are configured for this session.":"",(t={}).HeaderText="Cannot Delete <span style='font-weight:bold;'>"+a+"</span>",t.AlertText=s+r,t.OkayBtnText="OK"manageEvents_presentersList=function(e){var a={calendarEventKey:s};n.extend(a,e);var t=n(this);function i(e){var t=e.data("contactKey"),i=e.data("externalPresenterRefKey"),n=e.data("eventPresenterKey"),o={};return o.ContactKey=s,o.ExternalPresenterRefKey=s,o.CalendarEventKey=a.calendarEventKey,o.EventPresenterKey=s,null!=n&&e.data("eventPresenterKey")!=s&&(o.EventPresenterKey=n),null!=t&&e.data("contactKey")!=s?o.ContactKey=t:null!=i&&e.data("externalPresenterRefKey")!=s&&(o.ExternalPresenterRefKey=i),o}t.find(".presenter-action").each(function(e){var t=n(this);t.data("contactKey",t.attr("contactKey")),t.data("externalPresenterRefKey",t.attr("externalPresenterRefKey")),t.data("eventPresenterKey",t.attr("eventPresenterKey")),t.removeAttr("contactKey"),t.removeAttr("externalPresenterRefKey"),t.removeAttr("eventPresenterKey")}),t.find(".sort-up").on("click",function(e){var t=i(n(this));t.SortUp=!0,hl_eventPresenters.sortEventPresenter(t)}),t.find(".sort-down").on("click",function(e){var t=i(n(this));t.SortDown=!0,hl_eventPresenters.sortEventPresenter(t)}),t.find(".edit-presenter").on("click",function(){var e=i(n(this));hl_eventPresenters.getAddEditEventPresenterModal(e)}),t.find(".delete-presenter").on("click",function(){var e=i(n(this));hl_eventPresenters.confirmEventPresenterDelete(e)})};var s="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(o){o.fn.hl_ui_manageEvents_pricingInputs=function(e){o.extend({actionId:""},e);var t=o(this);function l(e,t){var i=e.closest(".pricing-input-row").find("label").first(),n=e.closest(".has-feedback"),o=n.find("label"),a=n.find(".pricing-input"),s=n.find(".feed-back");o.addClass("has-error"),a.addClass("has-error"),s.find(".element-error").text(t),s.find(".sr-only").text("(error)"),s.show(),i.addClass("has-error")}function i(e){var t,i,n,o,a,s,r;i=(t=e).closest(".pricing-input-row"),n=i.find("label").first(),o=t.closest(".has-feedback"),a=o.find("label"),s=o.find(".pricing-input"),r=o.find(".feed-back"),a.removeClass("has-error"),s.removeClass("has-error")ly").text("Is required."),0==i.find(".price-column .control-label.has-error").length&&n.removeClass("has-error"),""===e.val()?l(e,"Is required."):parseFloat(e.val())<0&&l("Cannot be a negative number.")}o("div#event-pricing-inputs-container").find("div.pricing-input-row").each(function(e){var t=o(this),i=t.attr("event-option-price-key"),n=t.attr("registrant-class-key");t.data("event-option-price-key",i),t.data("registrant-class-key",n),t.removeAttr("event-option-price-key"),t.removeAttr("registrant-class-key")}),t.find(".price-input").on("keypress",function(e){return 0!==e.keyCode?48<=e.charCode&&e.charCode<=57||8==e.keyCode||9==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode:48<=e.charCode&&e.charCode<=57||46==e.charCode}),t.find(".price-input").on("blur",function(e){i(o(this))}),t.on("validate",{},function(e){t.find(".price-input").each(function(e){i(o(this))})})}}(jQuery,window),function(s){s.fn.hl_ui_manageEvents_sessionPresenterRow=function(e){var t={};s.extend(t,e);var i=s(this);function a(e){""==e.val()||e.val()==n?e.data("valid",!1):e.data("valid",!0)}i.find(".requiredInput_Marker").each(function(e){var t=s(this),i=t,n=t.find(":eq(1)"),o=t.find(".help-block");n.data("validator",i),n.data("helpBlock",o),a(n)}),i.find(".required-input").on("change",function(e){a(s(this))})};var n="00000000-0000-0000-0000-000000000000"}(jQuery,window),function(f){f.fn.hl_ui_manageEvents_specialpricing=function(o){var i="00000000-0000-0000-0000-000000000000",t=f.extend({tenantKey:"",authToken:"",calendarEventKey:"",tagitPlacehoderText:"",defaultRegistrantClassKey:"",deleteConfirmHeaderText:"",deleteConfirmText:"",deleteConfirmDeleteText:""},o||{}),e=f(this),a=e.find("#find-contact"),n=e.find("#add-special-pricing"),s=e.find("#find-error"),r=e.find("#specialprice-error"),l=r.find(".details");function c(){e.find(".select-registrant-class").on("change",function(e){f(this).data("originalvalue")!=f(this).val()&&d(f(this).data("itemkey"),f(this).val(),!1)}),e.find(".remove-special-pricing").on("click",function(e){var i;hl_common_ui_showBootui_blockUI(),hl_manageEvents.deleteSpecialPricing(t,u,m)})})}function d(e,t,i){hl_common_ui_blockUI();var n={};n.calendarEventKey=o.calendarEventKey,n.contactKey=e,n.registrantClassKey=t,i?hl_manageEvents.saveSpecialPricingccess?((t={}).CalendarEventKey=o.calendarEventKey,hl_manageEvents.getSpecialPricingRows(t,function(e){c()})):(l.text(e.Message),r.hl_accessibility_show()),hl_common_ui_unBlockUI()}function h(e){e.Success||(l.text(e.Message),r.hl_accessibility_show()),hl_common_ui_unBlockUI()}function p(e){l.text("Special pricing could not be saved. Unexpected error has occured."),r.hl_accessibility_showSpecial pricing could not be deleted. Unexpected error has occured."),r.hl_accessibility_show(),hl_common_ui_unBlockUI()}s.hl_accessibility_hide(),c(),n.attr("disabled",""),a.autocomplete({minLength:3,source:function(e,o){n.attr("disabled",""),n.removeData("contactKey"),f.when(hl_manageEvents.findContacts(e.term,t.calendarEventKey)).then(function(e,t,i){var n;""!=e?(s.hl_accessibility_hide(),n=f.parseJSON(e),o(f.map(n,function(e){return{ContactKey:e.ContactKey,EmailAddress:e.EmailAddress,PictureUrl:e.PictureUrl,value:e.Name,Name:e.Name,CompanyName:e.CompanyName}}))):s.hl_accessibility_show(),a.removeClass("ui-autocomplete-loading")})},select:function(e,t){t.item.ContactKey!=i&&(n.data("contactKey",t.item.ContactKey),n.removeAttr("disabled"))}}),a.data("ui-autocomplete")._renderMenu=function(i,e){var n=this;f.each(e,function(e,t){n._renderItemData(i,t)})},a.data("ui-autocomplete")._renderItem=function(e,t){var i='<a><div style="display: inline-block"><img class="img-typeahead" src="'+t.PictureUrl+'"></div><div style="display: inline-block" class="margin-left-small"> '+t.Name+"</div></a>";return f('<li class="ui-menu-item" style="margin-bottom: 5px;">').attr("data-value",t.Name).attr("data-id",t.ContactKey).append(i).appendTo(e)},a.keyup(function(){this.value||s.hl_accessibility_hide()}),n.on("click",functa("contactKey"),o.defaultRegistrantClassKey,!0),a.val("")})}}(jQuery,window),function(h){h.fn.hl_webapi_registration_rsvpEvent=function(n,e,t,o,a,s,r,l,i,c){function d(e,t){var i;void 0!==e.Success&&e.Success&&void 0!==e.Message?(h(l).val(e.Message.split(":")[0]),h(r).val(e.Message.split(":")[1]),h(s).show(),h(o).hide(),h("span.RSVPConfirmation").text(t.replace("{0}",(new Date).format("M/dd/yyyy h:mm:ss tt"))),hl_eventAttendanceButton.refresh(n),HigherLogic.Util.strationFull?eventKey="+n,"json").done(function(e){u(e)}).fail(function(){u({Message:"Error during request"})})):void 0===e.Success||e.Success||void 0===e.Message?(h(a).show(),h(o).hide(),hl_common_ui_showGlobalMessage("Error during request",p)):(h(a).hide(),h(o).hide(),hl_common_ui_showGlobalMessage(e.Message,p)),history.pushState&&void 0!==history.state&&(i=hl_common_uingPare(null,"",window.location.pathname+i))}var u=function(e){void 0!==e?e?h(i).show():h(i).hide():(h(a).show(),h(o).hide(),hl_common_ui_showGlobalMessage(result.message,p))};h(a).hide(),h(o).show(),HigherLogic.Util.post("/HigherLogic/UI/MVC/Events/RSVP/RSVPEvent",JSON.stringify({eventKey:n,registrantKey:t}),"json").done(function(e){d(e,c)}).fail(function(e){d({Message:"Error during request"},c)})},h.fn.hl_webapi_registration_removeRSVP=function(i,e,t,n,o,a,s,r,l){function c(e,t){void 0!==Success&&void 0!==e.Message?(h(n).hide(),h(r).val(e.Message.split(":")[0]),h(s).val(e.Message.split(":")[1]),h("span.RSVPConfirmation").text(""),hl_eventAttendanceButton.refresh(i),HigherLogic.Util.get("/HigherLogic/UI/MVC/Events/RSVP/IsRegistrationFull?eventKey="+i,"json").done(function(e){d(e)}).fail(function(){d({Message:"Invalid Request"})})):(h(a).show(),h(n).hide(),hl_common_ui_showGlobalMessage(e.Message,p))}var d=function(e){void 0!==e?e?h(l).show():(h(o).show(),h(l).hide()):(h(a).show(),h(n).hide(),hl_common_ui_showGlobalMessage(result.Message,p))};h(a).hide(),h(n).show(),HigherLogic.Util.post("/HigherLogic/UI/MVC/Events/RSVP/RemoveRSVP",JSON.stringify({registrationKey:e,registrantKey:t}),"json").done(fung request"},confirmMsg)})},h.fn.hl_webapi_registration_cancelRegistration=function(e,t,i,n){function o(t,e){setTimeout(function(){var e;void 0===t.message?0<(e=h("input[id*='CancelRegistration_Hidden']")).length&&e.click():hl_common_ui_showGlobalMessage(t.message,p)},0)}var a,s;a=e,s=t,hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(function(){var e,t;e=a,t=s,hl_common_ui_blockUI(),hl_webapi_ajax("/Registrations/CancelRegistration?RegistrantKey="+e+"&CalendarEventKey="+t,{},"POST",i,n,o,"",!0,o)},function(){},"dialogCancelRegistration","Yes","No",!0,400,"auto","Cancel Registration","Are you sure you want to cancel thihttps://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/warning.gif"}(jQuery);var hl_microsites_master_saveContinueCallback=function(e){var t,i,n,o;"function"==typeof e?"validateAd"===e.name?((t=$(".ad-submit-action")).is(":visible")||(t=$(".cross-site-ad-submit-action")),o=(n=(i=t.attr("href")).substr(i.indexOf("'")+1)).substr(0,n.indexOf("'")),$("#"+t.data("navigateawayhrefid")).val($(navCtl).prop("href")),__doPostBack(o,"")):1==e()&&document.getElementById("MasterPageForm").submit():document.getElementById("MasterPageForm").submit()},hl_microsites_master_continueNoSave=function(){window.location.href=$(navCtl).prop("href")};function hl_microsites_sitelist_ready(e,t){""!=$(t).val()&&($("#Success"+$(t).val()).text("Copied!"),$("#Success"+$(t).val()).show(),setTimeout(function(){$("#Success"+$(t).val()).fadeOut(2e3),$(copySiteKeySelector).val("")},3e3));var i=$(e);makeSortableTableGlyphicon(i,$(".siteSortable"),"ContentEditListRow","ContentEditListRow","asc"),$("span.tbArrows").addClass("nameThemeSortIndicator")}var postBack=!1,choiceMade=!1,deleteCtlId,deleteYes=function(){hl_common_ui_blockUI(),$(deleteCtlId).click()},deleteNo=function(e){$(e).removeAttr("style")};function hl_microsites_sitelist_deleteSite(e,t,i,n,o,a){$(a).prop("style","color:Red;");function s(){deleteNo(a)}return"true"==i?(hl_common_ui_alertDialog("You cannot delete your model site"),!1):(e===t?hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(deleteYes,s,"dialogDeleteCurrentSite","Ok","Cancel",!0,600,160,"Alert","Clicking 'OK' will permanently delete this site. Since this is the site you're currently working on, you will be redirected to Model Site '"+n+"'"):hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(deleteYes,s,"dialogDeleteSite","Yes","No",!0,600,160,"Warning","Are you sure you want to delete this site?"),deleteCtlId=o,postBack)}function hl_microsites_siteList_showAddCopySiteDialog(e,n,o,a,s,t,r,i,l,c,d,u,h,p){var m={};m[u]=function(){$(t).html(""),"add"==r?hl_microsites_siteList_createNewSite(e,n,t,a,i,d,h,p):"copy"==r&&hl_microsites_siteList_copySite(e,n,t,c,s,i,h)},m.Cancel=function(){$(this).dialog("close"),$(this).dialog("destroy")};var f="",f="add"==r?"Create New Site":'<span style="color:Gray;">Copy Site: </span>'+$(l).text();return $(e).dialog({resizable:!1,title:f,height:250,width:500,modal:!0,appendTo:hl_common_ui_getFormForDialog(e),open:function(e,t){var i=$(".ui-dialog-titlebar-close");i.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>'),$(".ui-dialog-titlebar-close").hide(),$(o).text("Name: "),$(n).focus(),$(n).keypress(function(e){13==e.which&&("add"==r?$(".ui-dialog-buttonset :button :contains('Create Site')").click():$(".ui-dialog-buttonset :button :contains('Copy Site')").click())}),$(a).val(""),$(s).val("")},close:function(){$(n).val(""),$(t).html("")},buttons:m,create:function(){$(this).closest(".ui-dialog").find(".ui-dialog-buttonset button:contains('Cancel')").attr("class","btn btn-default"),$(this).closest(".ui-dialog").find(".ui-dialog-buttonset button:contains('"+u+"')").attr("class","btn btn-primary")}}),$(e).dialog("open"),!1}function hl_microsites_siteList_createNewSite(t,e,i,n,o,a,s,r){var l,c,d=!1;if(""==$(e).val())return $(i).html("*<br><br> Site Name is required."),$(i).prop("style","color:Red;"),!1;(d=!0)===d&&(hl_common_ui_blockUI(),(l={NewSiteDto:{}}).NewSiteDto.IsUniqueName="true",l.NewSiteDto.NewMicrositeGroupAdded="true",l.NewSiteDto.MicrositeGroupKey="",l.NewSiteDto.MicrositeGroupTypeRouteDesignKey="",l.NewSiteDto.Name=$(e).val(),l.NewSiteDto.UserName=a,l.NewSiteDto.AddToIndex="True"===$(s).find('input[type="radio"]:checked').val(),c=JSON.stringify(l),$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/CreateNewSite",async:!1,data:c,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e.IsUniqueName?!0===e.NewMicrositeGroupAdded?($(t).dialog("close"),$(n).val(e.MicrositeGroupKey),$(r).val(e.MicrositeGroupTypeRouteDesignKey),$(o).trigger("click")):(hl_common_ui_unBlockUI(),$(i).html("*<br><br> Unable to create new site."),$(i).prop("style","color:Red;")):(hl_common_ui_unBlockUI(),$(i).html("*<br><br> Site Name already exists."),$(i).prop("style","color:Red;"))}}))}function hl_microsites_siteList_copySite(t,e,i,n,o,a,s){var r,l,c=!1;if(""==$(e).val())return $(i).html("*<br><br> Site Name is required."),$(i).prop("style","color:Red;"),!1;(c=!0)===c&&(hl_common_ui_blockUI(),(r={NewSiteDto:{}}).NewSiteDto.IsUniqueName=!0,r.NewSiteDto.NewMicrositeGroupAdded=!0,r.NewSiteDto.MicrositeGroupKey=n,r.NewSiteDto.MicrositeGroupTypeRouteDesignKey="",r.NewSiteDto.Name=$(e).val(),r.NewSiteDto.AddToIndex="True"===$(s).find('input[type="radio"]:checked').val(),r.NewSiteDto.UserName="",l=JSON.stringify(r),$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/CopySite",async:!1,data:l,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e.IsUniqueName?!0===e.NewMicrositeGroupAdded?($(t).dialog("close"),$(o).val(e.MicrositeGroupKey),$(a).trigger("click")):(hl_common_ui_unBlockUI(),$(i).html("*<br><br> Unable to create new site."),$(i).prop("style","color:Red;")):(hl_common_ui_unBlockUI(),$(i).html("*<br><br> Site Name already exists."),$(i).prop("style","color:Red;"))}}))}var SelectThemeDirty=!1,ThemeConfigOptionDirty=!1,ObservingSelectTheme=!1,DesignThemeSelected=!1,saveContinue=function(e,t){("function"!=typeof t||1==t())&&hl_microsites_siteSetup_Submit(e)},continueWithoutSave=function(e){$(PrevTabID).val(e),document.getElementById("MasterPageForm").submit()};function hl_microsites_siteSetup_Submit(e,t){$(TabClickedID).val("false"),$(PrevTabID).val(e),document.getElementById("MasterPageForm").submit()}function hl_micrositeh(e){case 0:case 5:$(function(){$("form").dirty_form().dirty(function(e,t){isDirty=!0}).clean(function(e,t){isDirty=!1})});break;case 1:case 2:$(function(){$("form").dirty_form({includeHidden:!0,includeRadio:!1}).dirty(function(e,t){isDirty=!0}).clean(function(e,t){isDirty=!1})})}$("div.StepButtonContainer").find("#hl-csslinkbutton"iteSetupStepContainer").find("a.SiteSetupNormalTab, a.SiteSetupSelectedTab").each(function(i){switch(this.innerHTML){case"Site Name":case"Theme":$(this).data("callback",siteSetupValidation)}$(this).bind("click",function(e){var t=$($("div.SiteSetupStepContainer").find("a.SiteSetupSelectedTab")).data("callback")?$($("div.SiteSetupStepContainer").find("a.SiteSetupSelectedTab")).data("callback"):"";ChangeTab(i,$(PrevTabID).val(),n,t,e)})})}function ChangeTab(e,t,i,n,o){$(NextTabID).val(e),$(TabClickedID).val("true"),hl_microsites_siteSetup_siteSetupDataDirty(e,n,o)}function hl_microsites_siteSetup_siteSetupDataDirty(e,t,i){1==SelectThemeDirty&&1==DesignThemeSelected&&(SelectThemeDirty=!1),1==isDirty||1==ThemeConfigOptionDirty||1==SelectThemeDirty||1==DesignTabsDirty?(i.preventDefault(),hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(function(){saveContinue(e,t)},function(){continueWithoutSave(e)},"dialogSaveUnsavedData","Save and Continue","Continue without Saving",!0,600,150,"Warning","There are unsaved changes on this page. \nHow would you like to proceed?")):($(PrevTabID).val(e),document.getElementById("MasterPageForm").submit())}function hl_microsites_siteSetup_Name_ready(e){$(e).focus(function(){$("span.SiteSetupSiteName").hide(),$("#"+SiteTitleID).removeClass("InError")})}var ValidateUniqueSiteName=function(){var e,t,i=!0,n=$("#"+SiteTitleID).val(),o=$("#"+OriginalSiteNameID).val();return $("span.SiteSetupSiteName").hide(),n!=o&&(e={SiteName:$("#"+SiteTitleID).val()},t=JSON.stringify(e),$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/IsUniqueSiteName",async:!1,data:t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0!==e&&(i=!1,$("#"+SiteTitleID).addClass("InError"),$("span.SiteSetupSiteName").show(),hl_common_ui_showjQueryUIAlertDialogNoResize("dialogChangeSiteName","Ok",!0,250,0,"Alert","Site Name '"+n+"' already exists"))}})),i};function hl_microsites_siteSetup_Theme_ready(e,t,i,n,o,a,s,r){$("div"+o).removeClass("ThemeEditorLoading"),$("select.SitesUsingTheme").change(function(e){""==$(e.target).val()?$(e.target).parent().next("div.sitesUsingThemeGoContainer").children("div#csshyperlinkGoToSite").children("a").removeAttr("href"):$(e.target).parent().next("div.sitesUsingThemeGoContainer").children("div#csshyperlinkGoToSite").children("a").prop("href",$(e.target).val())}),"SelectedRadioImageContainer"==$(t).prop("class")||"NoImageContainer"==$(t).prop("class")?($(i).show(),$(o).hide(),ObserverSelectThemeContainer(i),ObservingSelectTheme=!0):"SelectedRadioImageContainer"==$(n).prop("class")?($(r).hide(),$(o).show(),DesignThemeSelected=!0):($(r).hide(),$(o).hide()),$("div"+t).click(function(){"RadioImageContainer"==$(this).prop("class")&&($(this).removeClass("RadioImageContainer"),$(this).addClass("SelectedRadioImageContainer"),$("div"+n).removeClass("SelectedRadioImageContainer"),$("div"+n).addClass("RadioImageContainer"),$("div"+i).show(),$("div"+o).hide(),$(a).val("Select").blur(),ObserverSelectThemeContainer(i),DesignThemeSelected=!1)}),$("div"+n).click(function(){"RadioImageContainer"==$(this).prop("class")&&($(this).removeClass("RadioImageContainer"),$(this).addClass("SelectedRadioImageContainer"),$("div"+t).removeClass("SelectedRadioImageContainer"),$("div"+t).addClass("RadioImageContainer"),$("div"+i).hide(),$("div"+o).show(),$(a).val("Design").blur(),hl_microsite_themeeditor_changeThemeTab(0,!(DesignThemeSelected=!0)))}),$(e+" tr.ContentEditListRow").each(function(){1==$(this).find(":radio").prop("checked")&&($(this).find("label").addClass("siteSetupSelectTheme"),$(this).addClass("SelectedTheme"))});var l=$(e);makeSortableTable(l,$(".siteThemeSortable"),"ContentEditListRow","ContentEditListRow","asc"),$("span.tbArrows").addClass("themeNameSortIndicator"),$(function()tion(e,t){ThemeConfigOptionDirty=!0}).clean(function(e,t){ThemeConfigOptionDirty=!1})})}var siteSetupValidation=function(){var e=!0;switch($("div.SiteSetupStepContainer").find("div.StepOn").prop("textContent")){case"Site Name":e=ValidateUniqueSiteName();break;case"Theme":e=validateThemeSelected("#"+$("div.HiddenConfigOptionContainer").find(":hidden").prop("id"))}return e};function validateThemeSelected(e){var t=!0,i=null!=e?$(e).val():null;return null!=i&&"Select"!=i||(t=ThemeSelected()),0==t&&hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(hl_microsite_siteSetup_OnModalCancelKeepCurrentLocalDesignClick,"","sitePropertiesCssModal","Cancel and keep current setting","Select a theme for this site",!0,"auto","auto","Alert","A Local Design is currently used for this site."),t}function hl_microsite_siteSetup_OnModalCancick(){$('div[id$="SelectThemeContainer"]').removeClass("SelectedRadioImageContainer").addClass("RadioImageContainer"),$('div[id$="DesignThemeContainer"]').removeClass("RadioImageContainer").addClass("SelectedRadioImageContainer"),$('div[id$="SelectThemePanel"]').hide(),$('div[id$="DesignThemePanel"]').show()}function ThemeSelected(){var e=!1;return $("div.ThemeNameContainer input:radio").each(function(){1==$(this).prop("checked")&&(e=!0)}),e}function ObserverSelectThemeContaine$(function(){$(e).dirty_form({includeSelect:!1,excludeSelectClass:".SitesUsingTheme"}).dirty(function(e,t){SelectThemeDirty=!0}).clean(function(e,t){SelectThemeDirty=!1})}),ObservingSelectTheme=!0)}function SetSelectedTheme(t,e,i,n,o){var a=0,s=!1;$("div.ThemeNameContainer input:radio").each(function(e){$(this).prop("id")!=t?$(this).prop("checked",!1):(a=e,s=!0)}),$(o+" tr.ContentEditListRow").removeClass("SelectedTheme"),1==s&&$(o+" tr.ContentEditListRow").eq(a).addClass("SelectedTheme"),1==$("#"+t).prop("checked")?$(i).val(e):$(i).val(""),$("div.ThemeNameContainer input#"+t).prop("id")==$(n).val()&&(SelectThemeDirty=!1)}function hl_microsites_siteSetup_Images_ready(e){$(function(){$(e).dirty_form({includeHidden:!0}).dirty(function(e,t){isDirty=!0}).clean(function(e,t){isDirty=!1})})}var SelectedThemeTab=0,CssCategoryContainers=new Array,TotalColorsChanged=0,DesignTabsDirty=!1;function hl_microsite_themeeditor_ready(e,t,i){hl_microsite_themeeditor_changeThemeTab(e,$("#"+i).data("firsttabpaneid")),bindColorPickerChange(t)}function hl_microsite_themeeditor_changeThemeTab(e,t){ObserveColorPickerTab(SelectedThemeTab=e,"#"+t)}function ObserveColorPickerTab(e,t){$(t).data("observed")||($(function(){$(t).dirty_form().dirty(function(){DesignTabsDirty=!0}).clean(function(){DesignTabsDirty=!1})}),$(t).data("observed",!0))}function hl_microsite_themeeditor_showLoadThemeDesign(n,e,t,i,o,a,s,r){var l={Load:function(){$(a).html(""),"7102B28F-014C-44A3-9D8A-8A7F503B710B"!=$(t).val()?(hl_common_ui_blockUI(),hl_microsite_themeeditor_loadThemeDesign($(t).val(),n,i,o,a),$(".ui-dialog").hide()):($(a).html("*<Br><Br> Theme is required."),$(a).prop("style","color:Red;"))},Cancel:function(){$(this).dialog("close"),$(this).dialog("destroy")}};return $(n).dialog({resizable:!1,hide:"fadeOut",maxHeight:500,modal:!0,title:e,width:500,closeOnEscape:!1,open:function(e,t){var i=$(".ui-dialog-titlebar-close");i.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>');$("div.ui-dialog-buttonset").prepend('<button type="button" class="ui-button ui-widget ui-state-default ui-state-dynamic ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Yes, let me choose a theme to copy</span></button>'),setThemeLoadButtonState("prompt",s,r,n)},focus:function(){$(".ui-dialog-titlebar-close").hide(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},close:function(){hl_common_ui_unBlockUI(),$(a).html(""),$(t).val("7102b28f-014c-44a3-9d8a-8a7f503b710b"),$(s).removeAttr("class"),$(s).addClass("populateThemeWarningContainerOn"),$(r).removeAttr("class"),$(r).addClass("populateWithThemeContainerOff"),setThemeLoadButtonState("prompt",s,r,n)},buttons:l}),$(n).dialog("open"),!1}function setThemeLoadButtonState(t,i,n,o){$("div.ui-dialog").has("div#"+o.substring(1)).find("div.ui-dialog-buttonset").find(":button").each(function(e){switch(e){case 0:"prompt"==t?($(this).show(),$(this).bind("click",function(){$(i).switchClass("populateThemeWarningContainerOn","populateThemeWarningContainerOff",500),$(n).switchClass("populateWithThemeContainerOff","populateWithThemeContainerOn",200),setThemi,n,o)})):$(this).hide();break;case 1:"prompt"==t?$(this).hide():$(this).show()}})}function hl_microsite_themeeditor_loadThemeDesign(e,t,i,n,o){var a={SiteThemeCSSVariableDto:{}};a.SiteThemeCSSVariableDto.MicrositeKey=n,a.SiteThemeCSSVariableDto.ThemeToLoad=e,a.SiteThemeCSSVariableDto.CssText="",a.SiteThemeCSSVariableDto.MainSiteColors=new Array(15),a.SiteThemeCSSVariableDto.MainMenu=new Array(15),a.SiteThemeCSSVariableDto.SecondaryMenus=new Array(15),a.SiteThemeCSSVariableDto.WelcomeBox=new Array(25),a.SiteThemeCSSVariableDto.HomeBoxes=new Array(15),a.SiteThemeCSSVariableDto.Tabs=new Array(15),a.SiteThemeCSSVariableDto.Tables=new Array(25),a.SiteThemeCSSVariableDto.SearchResults=new Array(15),a.SiteThemeCSSVariableDto.Discussions=new Array(15),a.SiteThemeCSSVariableDto.Misc=new Array(10),a.SiteThemeCSSVariableDto.ThemeSavedLoaded=!0;var s=JSON.stringify(a);$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/LoadSaveThemeCssVariables",async:!0,timeoutNumber:2e4,data:s,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e.ThemeSavedLoaded?window.location.href=window.location.href:(hl_common_ui_unBlockUI(),$(o).html("*<Br><Br> Unable to load theme."),$(o).prop("style","color:Red;"))},error:function(e,t){alert(t)}})}function hl_microsite_themeeditor_showCssEditor(e,t,i,n,o,a,s){var r={Save:function(){hl_microsite_themeeditor_saveMicrositeCSS(e,i,n,o,a),$(s).val($(i).val())},Cancel:function(){$(i).val($(s).val()),$(o).css("display","none"),$(this).dialog("close")}};return $(e).dialog({hide:"fadeOut",modal:!0,title:t,width:600,closeOnEscape:!1,appendTo:hl_common_ui_getFormForDialog(e),open:function(e,t){var i=$(".ui-dialog-titlebar-close");i.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')},focus:function(){$(".ui-dialog-titlebar-close").hide(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},buttons:r}),$(e).dialog("open"),!1}function hl_microsite_themeeditor_saveMicrositeCSS(t,e,i,n,o){var a=o?{SiteThemeKey:i,CSSText:$(e).val()}:{MicrositeKey:i,CSSText:$(e).val()},s=JSON.stringify(a),r=o?"/HigherLogic/Mic/Microsites/wsjson.aspx/SaveMicrositeCss";$.ajax({type:"POST",url:r,async:!1,data:s,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e?($(t).dialog("close"),$(t).dialog("destroy")):$(n).css("display","inline-block")}})}function hl_microsite_themeeditor_showSitesUsingThisTheme(e){var t={Close:function(){$(this).dialog("close"),$(this).dialog("destroy")}};return $(e).dialog({resizable:!1,hide:"fadeOut",maxHeight:525,modal:!1,title:"Sites currently using this theme",width:525,closeOnEscape:!1,autoOpen:!1,appendTo:hl_common_ui_getFormForDialog(e),close:function(e){e.originalEvent&&$(e.originalEvent.target).closest(".ui-dialog-titlebar-close").length&&($(this).dialog("close"),$(this).dialog("destroy"))},focus:function(){$(".ui-dialog-titlebar-close").hide(),$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-default")},buttons:t,open:function(){var e=$(".ui-dialog-titlebar-close");e.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),e.find("span").length<=0&&e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')}}),$(e).dialog("open"),!1}function setThemeChanged(e){$(e).val("true")}function bindColorPickerChange(o){$("input.selectedCSSVariableColor").bind("change",function(e){var t=$(e.target),i=t.data("initial"),n=t.data("prevChg")?t.data("prevChg"):"";$(this).val()!=i?""==n&&(TotalColorsChanged++,t.data("prevChg","changed")):TotalColorsChanged--,0<TotalColorsChanged?$(o).val("changed"):$(o).val(""),$(this).trigger("blur")})}function hl_microsites_thememanager_ready(e,t,i){$("select.SitesUsingTheme").change(function(e){var t,i=$(e.target).closest(".site-using-theme-container");hl_common_util_stringIsNullOrWhiteSpacef","javasnd('option[value="'+t.val()+'"]').data("isarchived")?(i.find("a.go-selected-site").attr("href","javascript:void(0)"),i.find("a.go-selected-site").click(function(){hl_common_ui_showjQueryUIAlertDialog("hlcomonalert","Close",!1,400,150,t.data("dialogtitle"),t.data("dialogtext"))})):(i.find("a.go-selected-site").unbind("click"),i.find("a.go-sele$(e.target).val()))}),hl_common_util_stringIsNullOrWhiteSpace($("#"+e).val())||($("#spnMessage_"+$("#"+e).val()).text("Theme successfully created!"),$("#dvContainer_"+$("#"+e).val()).hl_accessibility_show(),setTimeout(function(){$("#dvContainer_"+$("#"+e).val()).fadeOut(2e3).attr("aria-hidden",!0),$("#"+e).val("")},3e3)),hl_common_util_stringIsNullOrWhiteSpace($("#"+t).val())||($("#spnMessage_"+$("#"+t).val()).text("Theme successfully copied!"),$("#dvContainer_"+$("#"+t).val()).hl_accessibility_show(),setTimeout(function(){$("#dvContainer_"+$("#"+t).val()).fadeOut(2e3).attr("aria-hidden",!0),$("#"+t).val("")},3e3));var n=$(i);makeSortableTable(n,$(".siteThemeSortable"),"ContentEditListRow","ContentEditListRow","asc"),$("span.tbArrows").addClass("themeNameSortIndicator")}var postBack=!1,choiceMade=!1,deleteCtlId,deleteYes=function(){hl_common_ui_blockUI(),$(deleteCtlId).click()},deleteNo=function(e){$(e).removeAttr("style")},npt;function hl_microsites_thememanager_deleteTheme(e,t,i){return 0<i?hl_common_ui_showjQueryUIAlertDialogNoResize("dialogSitesUsingTheme","Ok",!0,450,0,"Alert",i+" site(s) using this theme. Themes associated with sites cannot be deleted."):($(e).prop("style","color:Red;"),hl_common_ui_showjQueryUIDialogConfirmOkCancelBtnJsCallback(deleteYes,function(){deleteNo(e)},"dialogDeleteTheme","Yes","No",!0,600,160,"Warning","Are you sure you want to delete this theme?'")),deleteCtlId=t,postBack}function hl_microsites_thememanager_showThemeNameEditor(e,t,n,i,o,a,s,r,l,c){document.all&&(l+=10,c+=20);var d={};return d[s]=function(){""!=$(n).val()?$(n).val()!=$(o).text()?hl_microsites_thememanager_renameTheme(e,$(n).val(),t,o,i,a):($(t).dialog("close"),$(t).dialog("destroy")):($(i).html("*<Br><Br> Theme Name is required."),$(i).prop("style","color:Red;"))},d.Cancel=function(){$(this).dialog("close"),$(this).dialog("destroy")},$(t).dialog({resizable:!1,title:'<span style="color:Gray;">Rename Theme: </span>'+$(o).text(),height:c,width:l,modal:r,appendTo:hl_common_ui_getFormForDialog(t),open:function(e,t){var i=$(".ui-lass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>'),$(".ui-dialog-titlebar-close").hide(),$(n).focus(),$(n).keypre,focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},close:function(){$(n).val(""),$(i).html("")},buttons:d}),$(t).dialog("open"),!1}function hl_microsites_thememanager_renameTheme(e,t,i,n,o,a){var s={SiteThemeDescDto:{}};s.SiteThemeDescDto.IsUniqueThemeName="true",s.SiteThemeDescDto.SiteThemeDesc=t,s.SiteThemeDescDto.SiteThemeKey=e,s.SiteThemeDescDto.ThemeRenamed="true";var r=JSON.stringify(s);$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/RenameTheme",async:!1,data:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e.IsUniqueThemeName?!0===e.ThemeRenamed?($(n).text(t),$(a).texut(function(){$(a).fadeOut(2e3)},3e3),$(i).dialog("close"),$(i).dialog("destroy")):($(o).html("*<Br><Br> Unable to rename theme."),$(o).prop("style","color:Red;")):($(o).html("*<Br><Br> Theme Name already exists."),$(o).prop("style","color:Red;"))}})}function hl_microsites_thememanager_showCssEditor(n,o,e,t,i,a){var s={Save:function(){hl_common_ui_blockUI(),hl_microsites_thememanager_saveAdvancedCSSText(e,n,o,i)},Cancel:function(){$(this).dialog("close"),$(this).dialog("destroy")}};return $(i).dialog({hide:"fadeOut",modal:!0,title:'<span style="color:Gray;">Edit CSS For Theme: </span>'+$(t).text(),width:600,closeOnEscape:!1,appendTo:hl_common_ui_getFormForDialog(i),open:function(e,t){var i=$(".ui-dialog-titlebar-close");i.addClass("uin-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>'),$(".ui-dialog-titlebar-close").hide(),$(o).val($(n).val())},focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},close:function(){$(o).text(""),$(a).css("display","none")},buttons:s}),$(i).dialog("open"),!1}function hl_microsites_thememanager_saveAdvancedCSSText(e,t,i,n,o){var a={SiteThemeKey:e,CSSText:$(i).val()},s=JSON.stringify(a);$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/SaveCssText",async:!1,data:s,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e?($(t).val($(i).val()),$(n).dialog("close"),$(n).dialog("destroy")):$(o).css("display","inline-block"),hl_common_ui_unBlockUI()}})}function hl_mDialog(e,t,n,i,o,a,s,r,l,c,d){var u={};u[d]=function(){"add"==n?hl_microsites_thememanager_createNewTheme(i,a,o,r,c):"copy"==n&&hl_microsites_thememanager_copyTheme(t,i,a,o,l,c)},u.Cancel=function(){$(this).dialog("close"),$(this).dialog("destroy")};var h="",h="add"==n?"Create New Theme":'<span style="color:Gray;">Copy Theme: </span>'+$(e).text();return $(i).dialog({resizable:!1,title:h,height:200,width:500,modal:!0,appendTo:hl_common_ui_getFormForDialog(i),open:function(e,t){var i=$(".ui-dialog-titlebar-close");i.addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only "),i.find("span").length<=0&&i.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>'),$(".ui-dialog-titlebar-close").hide(),$(s).text("Name: "),$(a).focus(),$(a).keypress(function(e){13===e.which&&("add"===n?$(".ui-dialog-buttonset :button :contains('Create Theme')").click():$(".ui-dialog-buttonset :button :contains('Copy Theme')").click())}),$(r).val(""),$(l).val("")},focus:function(){$(this).parent().find(".ui-dialog-buttonset button").eq(0).removeClass().addClass("btn btn-primary"),$(this).parent().find(".ui-dialog-buttonset button").eq(1).removeClass().addClass("btn btn-default")},close:function(){$(a).val(""),$(o).html("")},buttons:u}),$(i).dialog("open"),!1}function hl_microsites_thememanager_createNewTheme(t,e,i,n,o){var a,s,r=!1;if(""==$(e).val())return $(i).html("*<Br><Br> Theme Name is required."),$(i).prop("style","color:Red;"),!1;(r=!0)===r&&(hl_common_ui_blockUI(),(a={NewSiteThemeDto:{}}).NewSiteThemeDto.IsUniqueThemeName="true",a.NewSiteThemeDto.NewThemeAdded="true",a.NewSiteThemeDto.SiteThemeDesc=$(e).val(),a.NewSiteThemeDto.SiteThemeKey="",s=JSON.stringify(a),$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/CreateNewTheme",async:!1,data:s,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e.IsUniqueThemeName?!0===e.NewThemeAdded?($(t).dialog("clo create new theme."),$(i).prop("style","color:Red;")):(hl_common_ui_unBlockUI(),$(i).html("*<Br><Br> Theme Name already exists."),$(i).prop("style","color:Red;"))}}))}function hl_microsites_thememanager_copyTheme(e,t,i,n,o,a){var s,r,l=!1;if(""==$(i).val())return $(n).html("*<Br><Br> Theme Name is required."),$(n).prop("style","color:Red;"),!1;(l=!0)===l&&(hl_common_ui_blockUI(),(s={NewSiteThemeDto:{}}).NewSiteThemeDto.IsUniqueThemeName="true",s.NewSiteThemeDto.NewThemeAdded="true",s.NewSiteThemeDto.SiteThemeDesc=$(i).val(),s.NewSiteThemeDto.SiteThemeKey=e,r=JSON.stringify(s),$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/CopyTheme",async:!1,data:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0===e.IsUniqueThemeName?!0===e.NewThemeAdded?($(t).dialog("close"),$(o).val(e.SiteThemeKey),$(a).trigger("click")):(hl_common_ui_unBlockUI(),$(n).html("*<Br><Br> Unable to copy theme."),$(n).prop("style","color:Red;")):(hl_common_ui_unBlockUI(),$(n).html("*<Br><Br> Theme Name already exists."),$(n).prop("style","color:Red;"))}}))}var TotalAdChanges=0,TotalCrossSiteAdChanges=0,CrossSiteAdDirty=!1,errorCount=0;function AdTab(e,t,i,n,o,a){this.tabName=e,this.tabId=t,this.index=i,this.selected=n,this.validationParam=o}var AdTabs=new _AdTabs;function _AdTabs(){var n=this;n.Collection=[],n.getSelectedTabId=function(){for(var e=0;e<=n.Collection.length-1;e++)if(1==n.Collection[e].selected)return n.Collection[e].tabId},n.getAdTabPropertyByName=function(e,t){for(var i=0;i<=n.Collection.length-1;i++)if(n.Collection[i].tabName==e)switch(t){case"tabName":return n.Collection[i].tabName;case"tabId":return n.Collection[i].tabId;case"index":return n.Collection[i].index;case"selected":return n.Collection[i].selected;case"validationParam":return n.Collection[i].validationParam}},n.getAdTabById=function(e){for(var t=0;t<=n.Collection.length-1;t++)if(n.Collection[t].tabId==e)return n.Collection[t]},n.bindTabValidation=function(){for(var e=0;e<=n.Collection.length-1;e++)switch(n.Collection[e].tabName){case"CrossSiteAds":$("ul.AdSpotEditTabs li").find("a#"+n.Collection[e].tabId).bind("click",function(){var e=n.getAdTabById("aMicrositeAds").validationParam,t=validateAd(e,$("input:hidden[id*='_MGK']").val());$("ul.nav.nav-tabs li").removeClass("active"),$(".tab-content .tab-pane").removeClass("active"),t?($("#ActiveTabIndex").val(1),$("#CrossSiteAds").addClass("active"),$("#aCrossSiteAds").closest('li[role="presentation"]').addClass("active")):($("#MicrositeAds").addClass("active"),$("#aMicrositeAds").closest('li[role="presentation"]').addClass("active"))});break;case"MicrositeAds":$("ul.AdSpotEditTabs li").find("a#"+n.Collection[e].tabId).bind("click",function(){var e=n.getAdTabById("aCrossSiteAds").validationParam,t=validateAd(e,$("input:hidden[id*='_MGK']").val());$("ul.nav.nav-tabs li").removeClass("active"),$(".tab-content .tab-pane").removeClass("active"),t?($("#ActiveTabIndex").val(0),$("#MicrositeAds").addClass("active"),$("#aMicrositeAds").closest('li[role="presentation"]').addClass("active")):($("#CrossSiteAds").addClass("active"),$("#aCrossSiteAds").closest('li[role="presentation"]').addClass("active"))})}},n.hideTab=function(e){for(var t=0;t<=n.Collection.length-1;t++)n.Collection[t].tabName==e&&($("ul.AdSpotEditTabs li:eq("+n.Collection[t].index+")").removeAttr("class"),$("ul.AdSpotEditTabs li:eq("+n.Collection[t].index+")").addClass("hideCrossSiteTab"),$("div#"+n.Collection[t].tabName).addClass("ui-tabs-hide"))}}function hl_microsites_addSpotEdit_ready(l,c,e){$("ul.AdSpotEditTabs li").each(function(e){var t=$(this).find("a").prop("id").substring(1),i=$(this).find("a").prop("id"),n="";switch(t){case"CrossSiteAds":n="Cross-site Ad";break;case"MicrositeAds":n="Microsite Ad"}AdTabs.Collection.push(new AdTab(t,i,e,!1,n))}),AdTabs.bindTabValidation(),$("ul.nav.nav-tabs li").removeClass("active"),$(".tab-content .tab-pane").removeClass("active"),0===e?($("#MicrositeAds").addClass("active"),$("#aMicrositeAds").closest('li[role="presentation"]').addClass("active")):($("#CrossSiteAds").addClass("active"),$("#aCrossSiteAds").closest('li[role="presentation"]').addClass("active")),$("div.CrossSite_AdRowAdRow").each(function(){var e="#"+$(this).find(".SortOrder").prop("id"),t="#"+$(this).find("select.MicrositeAdLevelCode").prop("id"),i="#"+$(this).find("input.AdLink").prop("id"),n="#"+$(this).find("input.AdPath").prop("id"),o="#"+$(this).find("textarea.AdCode").prop("id"),a="#"+$(this).find(".UploadImageRadio").find(":radio").prop("id"),s="#"+$(this).find(".RotatingAdRadio").find(":radio").prop("id"),r="#"+$(this).find("div.ImageTypeContainer").children().eq(2).prop("id");$(this).find(".AdImagePanel").children().eq(1).prop("id");$(e).bind("change",function(e){updateTotalCrossSiteAdChangesCount(npt=$(e.target)"change")}),$(s).click(function(e){$(r).val("rotatingAdService").trigger("change")}),$(r).bind("change",function(e){updateTotalCrossSiteAdChangesCount(npt=$(e.target),c),$(this).trigger("blur")}),$(t).bind("change",function(e){updateTotalCrossSiteAdChangesCount(npt=$(e.target),c)}),$(i).bind("change",function(e){updateTotalCrossSiteAdChangesCount(npt=$(e.target),c)}),$(n).bind("change",function(e){updateTotalCrossSiteAdChangesCount(npt=$(e.target),c)}),$(o).bind("change",function(e){updateTotalCrossSiteAdChangesCount(npt=$(e.target),c)})}),$("div.AdRow").each(function(){var e="#"+$(this).find(".SortOrder").prop("id"),t="#"+$(this).find("select.MicrositeAdLevelCode").prop("id"),i="#"+$(this).find("input.AdLink").prop("id"),n="#"+$(this).find("input.AdPath").prop("id"),o="#"+$(this).find("textarea.AdCode").prop("id"),a="#"+$(this).find(".UploadImageRadio").find(":radio").prop("id"),s="#"+$(this).find(".RotatingAdRadio").find(":radio").prop("id"),r="#"+$(this).find("div.ImageTypeContainer").children().eq(2).prop("id");$(this).find(".AdImagePanel").children().eq(1).prop("id");$(e).bind("change",function(e){updateTotalAdChangesCount(npt=$(e.target),l)}),$(a).click(function(e){$(r).val("uploadImage").trigger("change")}),$(s).click(function(e){$(r).val("rotatingAdService").trigger("change")}),$(r).bind("change",function(e){updateTotalAdChangesCount(npt=$(e.target),l),$(this).trigger("blur")}),$(t).bind("change",function(e){updateTotalAdChangesCount(npt=$(e.target),l)}),$(i).bind("change",function(e){updateTotalAdChangesCount(npt=$(e.target),l)}),$(n).bind("change",function(e){updateTotalAdChangesCount(npt=$(e.target),l)}),$(o).bind("change",function(e){updateTotalAdChangesCount(npt=$(e.target),l)})}),hl_microsites_addSpotEdit_ObserveCrossSiteAdRows($("div.CrossSiteAdsContainer").prop("id")),hl_microsites_addSpotEdit_ObserveAdRows($("div.MicrositeAdsContainer").prop("id"))}function hl_microsites_addSpotEdit_ObserveAdRows(e){$(function(){$("#"+e).dirty_form({includeHidden:!0,includeRadio:!1,includeCheckbox:!1}).dirty(function(e,t){isDirty=!0}).clean(function(e,t){isDirty=!1})})}function hl_microsites_addSpotEdit_ObserveCrossSiteAdRows(e){$(function(){$("#"+e).dirty_form({includeHidden:!0,includeRadio:!1,includeCheckbox:!1}).dirty(function(e,t){CrossSiteAdDirty=!0}).clean(function(e,t){CrossSiteAdDirty=!1})})}function hl_microsites_addSpotEdit_SwitchPanel(e,t,i,n){document.getElementById(e).style.display="block",document.getElementById(t).style.display="none",document.getElementById(i).style.display="block",document.getElementById(n).style.display="none"}function updateTotalAdChangesCount(e,t){var i=e.data("initial");$(e).val()!=i?TotalAdChanges++:TotalAdChanges--,0<TotalAdChanges?$(t).val("changed"):$(t).val("")}function updateTotalCrossSiteAdChangesCount(e,t){var i=e.data("initial");$(e).val()!=i?TotalCrossSiteAdChanges++:TotalCrossSiteAdChanges--,0<TotalCrossSiteAdChanges?$(t).val("changed"):$(t).val("")}function saveAndValidateAd(e,t,i){$("#"+i).val(!0),validateAd(e,t)}function saveAndValidateCrossSiteAd(e,t,i){$("#"+i).val(!0),validateAd(e,t)}var validateAd=function(e,t){return void 0===e||hl_microsites_addSpotEdit_iterateAdList("Cross-site Ad"==e?"div.CrossSite_AdRow":"div.AdRow",!0,e,t)},HigherLogic;function validateAdName(e,t,i,n,o){var a,s,r=!0;return $(".AdName").each(function(){"#"+$(this).prop("id")!==e&&$(this).val()===t&&(r=!1)}),r&&(a="Cross-site Ad"==n?"CrossSite":"Site",s=JSON.stringify({AdName:t,AdSpotKey:i,AdType:a,MicrositeGroupKey:o}),$.ajax({type:"POST",url:"/HigherLogic/Microsites/wsjson.aspx/ValidateAdName",async:!1,data:s,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.hasOwnProperty("d")&&(e=e.d),!0!==e&&(r=!1)}})),r}function hl_microsites_addSpotEdit_iterateAdList(e,t,i,n){var o=t,a="div.CrossSite_AdRow"==e?"CrossSite":"Microsite",s="aCrossSiteAds"==$("ul.AdSpotEditTabs li.active").find("a").prop("id")?"CrossSite":"Microsite",r="a#"+$("ul.AdSpotEditTabs li:not(.active)").find("a").prop("id"),l="a#"+$("ul.AdSpotEditTabs li.active").find("a").prop("id");$(e).length;errorCount=0,a==s&&$(l).removeAttr("style"),$(e).each(function(){"True"===$(this).find(".AdSpotKeyDiv").find("input:hidden")[0].value||(o=validateAdSpotRow(e,$(this),i,o,n))});var c=$(e).first();return 0<c.length&&"True"===c.find(".AdSpotKeyDiv").find("input:hidden")[0].value&&(o=validateAdSpotRow(e,c,i,o,n)),t&&!o&&a!=s&&$(r).click(),o}function validateAdSpotRow(e,t,i,n,o){var a=n,s="div.CrossSite_AdRow"==e?"CrossSite":"Microsite",r="aCrossSiteAds"==$("ul.AdSpotEditTabs li.active").find("a").prop("id")?"CrossSite":"Microsite",l="a#"+$("ul.AdSpotEditTabs li:not(.active)").find("a").prop("id"),c="#"+t.find(".RotatingAdRadio").find(":radio").prop("id"),d="#"+t.find(".AdCodeLabel").prop("id"),u="#"+t.find(".AdNameLabel").prop("id"),h="#"+t.find("textarea.AdCode").prop("id"),p="Cross-site Ad"==i?"#"+t.find("input.CrossSite_AdName").prop("id"):"#"+t.find("input.AdName").prop("id"),m="#"+t.find("input.AdPath").prop("id"),f="#"+t.find(".AdSpotKeyDiv").find("input:hidden")[1].id,g="#"+t.find(".UploadImageRadio").find(":radio").prop("id"),v="#"+t.find(".AdImagePathLabel").prop("id"),y="#"+t.find(".AdImagePanel").find("input:hidden").prop("id"),b="Microsite"==s?"Site":"Cross-site";return""==$(p).val()?(a&&hl_common_ui_showjQueryUIAlertDialogNoResize("dialogAdNameRequired","Ok",!0,450,0,"Alert","Ad Name is missing for a "+b+" Ad",p),$(u).prop("style","color:Red;font-weight:bold"),t.find(".AdNameHelp").prop("style","color:Red;font-weight:bold"),errorCount++,a=!1):validateAdName(p,$(p).val(),$(f).val(),i,o)?($(u).removeAttr("style"),t.find(".AdNameHelp").removeAttr("style"),s!=r&&0==errorCount&&$(l).removeAttr("style")):(a&&hl_common_ui_showjQueryUIAlertDialogNoResize("dialogAdNameUnique","Ok",!0,450,0,"Alert","Ad Name must be unique for a "+b+" Ad",p),$(u).prop("style","color:Red;font-weight:bold"),t.find(".AdNameHelp").prop("style","color:Red;font-weight:bold"),errorCount++,a=!1),1==$(g).prop("checked")&&("false"==$(y).val()&&""==$(m).val()?(a&&hl_common_ui_showjQueryUIAlertDialogNoResize("dialogAdPathRequired","Ok",!0,450,0,"Alert","Ad Image is missing for a "+b+" Ad",m),$(v).prop("style","color:Red;font-weight:bold"),t.find(".AdPathHelp").prop("style","color:Relp").removeAttr("style"),$(v).removeAttr("style"),s!=r&&0==errorCount&&$(l).removeAttr("style"))),1==$(c).prop("checked")&&(""==$(h).val()?(a&&hl_common_ui_showjQueryUIAlertDialogNoResize("dialogAdCodeRequired","Ok",!0,450,0,"A","color:Red;font-weight:bold"),t.find(".AdCodeHelp").prop("style","color:Red;font-weight:bold"),errorCount++,a=!1):(t.find(".AdCodeHelp").removeAttr("style"),$(d).removeAttr("style"),s!=r&&0==errorCount&&$(l).removeAttr("style"))),a}function hl_provisioning_reloadPartial(e,t){$("#"+t).load($(e).data("url"))}function hl_provisioning_resetToDefault(t){$.ajax({contentType:"application/json; charset=utf-8",type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/Provisioning/ResetRefreshConfig",dataType:"json",success:function(e){e.Success&&$("#stepContentWrapper").load($(t).parent().data("url"))}})}function hl_provisioning_runActionState(e){$(this).attr("disabled",!0),$(this).html(e)}function hl_provisioning_switchSyncHost(e){var t={Initials:$.trim($("#refreshInitials").val())};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/Provisioning/SwitchSyncHost",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success&&$("#onOffText").text(e.OnOffText)}})}!function(t){var e,i;function n(){}e=t.Microsites||(t.Microsites={}),n.dropCookieNotification=function(e){t.Util.post("/higherlogic/microsites/wsjson.aspx/dropcookienotification",{micrositeKey:$(e).data("micrositeKey")}).done(function(){$(e).closest(".cookie-notification-bar").remove()})},i=n,e.Ui=i}(HigherLogic=HigherLogic||{});var hl_provisioning_EuclidMembershipIntegrationSetup_memberDetailsConfig=function(){var l=0,c=0;function t(e){l=e}function i(e){c=e}return{addPicklistRow:function(){var e='<div class="row form-group" style="margin-left: 20px" id="picklist_'+(l+1)+'"><div class="col-md-3"><label>Euclid Field Name</label><input type="text" class="form-control field-name-text-box" /></div><div class="col-md-3"><label>HL Display Name</label><input type="text" class="form-control demographic-name-text-box" /></div></div>';$("#picklist_"+l).after(e),t(l+1)},removePicklistRow:function(){0<l&&($("#picklistWrapper").find("div.row").last().remove(),t(l-1))},addFreeformRow:function(){var e='<div class="row form-group" style="margin-left: 20px" id="freeform_'+(c+1)+'"><div class="col-md-3"><label>Euclid Field Name</label><input type="text" class="form-control field-name-text-box" /></div><div class="col-md-3"><label>HL Display Name</label><input type="text" class="form-control demographic-name-text-box" /></div></div>';$("#freeform_"+c).after(e),i(c+1)},removeFreeformRow:function(){0<c&&($("#freeformWrapper").find("div.row").last().remove(),i(c-1))},setPicklistCount:t,setFreeformCount:i,save:function(e){for(var t=$(e),i=[],n=[],o=0;o<l+1;o++){var a=$("#picklist_"+o).find("input.form-control.field-name-text-box").val(),s=$("#picklist_"+o).find("input.form-control.demographic-name-text-box").val();a&&s&&i.push(a+":"+s)}for(o=0;o<c+1;o++){a=$("#freeform_"+o).find("input.form-control.field-name-text-box").val(),s=$("#freeform_"+o).find("input.form-control.demographic-name-text-box").val();a&&s&&n.push(a+":"+s)}var r={DisableInactiveRecords:document.getElementById("DisableInactiveRecordsCheckBox").checked,SyncCompanyRecords:document.getElementById("SyncCompanyRecordsCheckBox").checked,SyncEducationHistory:document.getElementById("SyncEducationHistoryCheckBox").checked,SyncEvents:document.getElementById("SyncEventsCheckBox").checked,EuclidEventUrl:document.getElementById("EuclidEventUrlTextBox").value,SyncDemographicsFromFields:document.getElementById("GetDemographicsCheckBox").checked,PicklistDemographics:i.join(","),FreeformDemographics:n.join(",")};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/EuclidMembershipIntegrationSetup/SaveMemberDetailsConfig",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Step=2":(t.removeAttr("disabled"),alert(e.Message))}})}}}(),hl_provisioning_EuclidMembershipIntegrationSetup_setCommunityGroupSettings={save:function(e){var t=$(e),i={SyncEventRegistrations:document.getElementById("SyncEventRegistrationsCheckBox").checked};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/EuclidMembershipIntegrationSetup/SaveCommunityGroupSettings",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Step=3":(t.removeAttr("disabled"),alert(e.Message))}})}},hl_provisioning_EuclidUserIntegrationSetup_setSsoUrl={save:function(e){var t=$(e),i={LoginUrl:document.getElementById("loginUrlTextBox").value,ResetPasswordUrl:document.getElementById("resetPasswordUrlTextBox").value,LogoutUrl:document.getElementById("logoutUrlTextBox").value};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/EuclidUserIntegrationSetup/SaveSsoUrl",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?($("#failureMessage").hide(),window.location.href="?Section=Refresh"):(t.removeAttr("disabled"),t.html("Save and Continue"),$("#failureMessage").show())}})}},hl_provisioning_ImpexiumMembershipIntegrationSetup_setMemberRefreshInformation=function(){var r=0,l=0;function t(e){r=e}function i(e){l=e}return{addPicklistRow:function(){var e='<div class="row form-group" style= "margin-left: 20px" id= "picklist_'+(r+1)+'"><div class="col-md-4"><input type="text" class="form-control prdCodeTextBox" /></div></div>';$("#picklist_"+r).after(e),t(r+1)},removePicklistRow:function(){0<r&&($("#picklistWrapper").find("div.row").last().remove(),t(r-1))},addFreeformRow:function(){var e='<div class="row form-group" style= "margin-left: 20px" id= "freeform_'+(l+1)+'"><div class="col-md-4"><input type="text" class="form-control prdCodeTextBox" /></div></div>';$("#freeform_"+l).after(e),i(l+1)},removeFreeformRow:function(){0<l&&($("#freeformWrapper").find("div.row").last().remove(),i(l-1))},setPicklistCount:t,setFreeformCount:i,save:function(e){for(var t=$(e),i=[],n=[],o=0;o<r+1;o++){var a=$("#picklist_"+o).find("input.form-control").val();i.push(a)}for(o=0;o<l+1;o++){a=$("#freeform_"+o).find("input.form-control").val();n.push(a)}var s={SyncOrgAccounts:document.getElementById("SyncOrgAccountsCheckBox").checked,SyncEvents:document.getElementById("SyncEventsCheckBox").checked,SyncProfilePics:document.getElementById("SyncProfilePicsCheckBox").checked,SyncSocialMediaLinks:document.getElementById("SyncSocialMediaLinksCheckBox").checked,UseDirectoryOptOut:document.getElementById("UseDirectoryOptOutCheckBox").checked,SyncCategoryDemographics:document.getElementById("SyncCategoryDemographicsCheckBox").checked,SyncServicesDemographics:document.getElementById("SyncServicesDemographicsCheckBox").checked,PicklistDemographics:i.join(","),FreeformDemographics:n.join(",")};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/ntegrationSetup/SaveMemberRefreshInformation",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Step=2":(t.removeAttr("disabled"),alert(e.Message))}})}}}(),hl_provisioning_ImpexiumMembershipIntegrationSetup_setSecurityGroupSettings={save:function(e){var t=$(e),i={CreateImpexiumMembershipTypeSecGroups:document.getElementById("CreateImpexiumMembershipTypeSecGroupsCheckBox").checked,UseGracePeriod:document.getElementById("UseGracePeriodCheckBox").checked,CreateAllMembersSecGroup:document.getElementById("CreateAllMembersSecGroupCheckBox").checked,CreateAllUsersSecGroup:document.getElementById("CreateAllUsersSecGroupCheckBox").checked,CreateSecurityRoleSecGroups:document.getElementById("CreateSecurityRoleSecGroupsCheckBox").checked};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/ImpexiumMembershipIntegrationSetup/SaveSecurityGroupSettings",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Step=3":(t.removeAttr("disabled"),alert(e.Message))}})}},hl_provisioning_ImpexiumMembershipIntegrationSetup_setCommunityGroupSettings=function(){var s=0;function t(e){s=e}return{addCustomFieldsRow:function(){var e='<div class="row form-group" style= "margin-left: 20px" id= "custom_'+(s+1)+'"><div class="col-md-4"><input type="text" class="form-control prdCodeTextBox" /></div></div>';$("#custom_"+s).after(e),t(s+1)},removeCustomFieldsRow:function(){0<s&&($("#customFieldsWrapper").find("div.row").last().remove(),t(s-1))},setCustomFieldsCount:t,save:function(e){for(var t=$(e),i=[],n=0;n<s+1;n++){var o=$("#custom_"+n).find("input.form-control").val();i.push(o)}var a={CreateCommitteeCommunities:document.getElementById("CreateCommitteeCommunitiesCheckBox").checked,CreateEventRegistrationCommunities:document.getElementById("CreateEventRegistrationCommunitiesCheckBox").checked,CreateMembershipTypeCommunities:document.getElementById("CreateMembershipTypeCommunitiesCheckBox").checked,CreateCustomFieldCommunities:document.getElementById("CreateCustomFieldCommunitiesCheckBox").checked,CustomFieldCommunities:i.join(",")};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/ImpexiumMembershipIntegrationSetup/SaveCommunityGroupSettings",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Section=User&Step=0":(t.removeAttr("disabled"),alert(e.Message))}})}}}(),hl_provisioning_ImpexiumUserIntegrationSetup_setSignOnandSignOffUrl={save:function(e){var t=$(e),i={SignOnUrl:document.getElementById("signOnUrlTextBox").value,SignOffUrl:document.getElementById("signOffUrlTextBox").value};t.html("Saving..."),t.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/ImpexiumUserIntegrationSetup/SaveSignOnandSignOffUrl",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Section=User&Step=1":(t.removeAttr("disabled"),alert(e.Message))}})}};function hl_provisioning_integrationConfig_addError(e,t,i){if(null!=e&&0!==e.split(",").length){var n=e.split(",");if(i){var o=$("#"+e);o.prepend('<div class="row form-group"><div class="col-md-12"><div class="alert aler"div.modal-footer").find("button").on("click",{isGlobalError:!0},hl_provisioning_integrationConfig_removeError)}else for(var a=0;a<n.length;a++){var s=$("#"+n[a]),r=s.parent().parent();r.hasClass("row")&&(r.addClass("has-error"),""!=$.trim("errorMessage")&&s.after('<span class="help-block">'+t+"</span>"),s.on("keyup",{isGlobalError:!1},hl_provisioning_integrationConfig_removeError))}}}function hl_provisioning_integrationConfig_removeError(e){if(e.data.isGlobalError)return $(this).parent().find("button").off("click",hl_provisioning_integrationConfig_removeError),void(null!=$(this).parent().parent().find("alert")&&alert.parent().parent().remove());$(this).off("keyup");var t=$(this).parent().parent();t.hasClass("has-error")&&t.removeClass("has-error"),t.find("span.help-block").remove()}function hl_provisioning_integrationConfig_setView(){var e=window.location.hash.substr(1);hl_common_ui_blockUI(),hl_common_util_stringIsNullOrWhiteSpace(e)?$("#integrationConfigContainer").load("/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/ProviderTypeList",function(){hl_common_ui_unBlockUI(),window.scroll(0,0)}):$("#integrationConfigContainer").load("/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/ProviderTypeConfig?tenantProviderTypeKey="+e,function(){hl_common_ui_unBlockUI(),window.scroll(0,0)})}var hl_provisioning_integrationConfig_providerTypeConfig=function(){function u(e).find("tr"),i=0;i<t.length;i++){var n=$(t.get(i));$(e).is(":checked")&&n.find("td").get(3).innerHTML!=$("#providerNameTextBox").val()?n.hide():n.show()}}return{addParameter:function(e){var i,t,n,o,a,s,r,l,c,d=$(e);"addParameterSaveButton"==d.attr("id")&&(i=d.data("url"),t=d.parent().parent().parent().parent().attr("id"),n=t.substring(t.indexOf("_")+1),o="true"==$("#switchNameField").data("showList")?d.parent().parent().find("#addParameterNameDropDownList").find(":selected").text():d.parent().parent().find("#addParameterNameTextBox").first().val(),a=d.parent().parent().find("#addParameterDescriptionTextBox").first().val(),s=d.parent().parent().find("#addParameterPossibleValuesTextBox").first().val(),r=d.parent().parent().find("#addParameterDefaultValueTextBox").first().val(),l=parseInt($.trim(d.parent().parent().find("#addParameterInputTypeDropDownList").first().val()),10),c={Key:n,Name:o,Description:a,PossibleValues:s,DefaultValue:r,InputType:l},$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/AddParameter",data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.Status?($("#providerTypeConfigParameterList").load(i+"?TenantProviderTypeKey="+n,function(){u($("#addParameterHideInheritedCheckbox").get(0))}),d.parent().parent().parent().modal("hide"),t=n,$.ajax({contentType:"application/json; charset=utf-8",type:"GET",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/GetSharedParameterNames?key="+t,dataType:"json",success:function(e){if(e.Status){var t=$("#addParameterNameDropDownList");t.empty();for(var i=0;i<e.SharedNames.length;i++)t.append('<option value="'+e.SharedNames[i]+'">'+e.SharedNames[i]+"</option>")}}})):hl_provisioning_integrationConfig_addError(e.ErrorIds,e.ErrorMessage,e.IsGlobalError)},complete:function(){$("#addParameterNameTextBox").val(""),$("#addParameterDescriptionTextBox").val(""),$("#addParameterPossibleValuesTextBox").val(""),$("#addParameterDefaultValueTextBox").val(""),$("#addParameterInputTypeDropDownList").prop("selectedIndex",0),$("#addParameterNameDropDownList").prop("selectedIndex",0),$("#addParameterNameTextBox").show(),$("#addParameterNameDropDownList").hide();var e=$("#switchNameField");"true"==e.data("showList")&&(e.data("showList","false"),e.html("or select one from the list of shared"))}}))},addStep:function(e){var t,i,n,o,a,s,r,l=$(e);"addStepSaveButton"==l.attr("id")&&(t=l.data("url"),i=l.parent().parent().parent().parent().attr("id"),n=i.substring(i.indexOf("_")+1),o=l.parent().parent().find("#addStepNameTextBox").val(),a=l.parent().parent().find("#addStepDescriptionTextBox").val(),s=l.parent().parent().find("#addStepControlPathTextBox").val(),r={Key:n,Name:o,Description:a,ControlPath:s},$.ajax({type:"POST",url:"/Highercation/json; charset=utf-8",dataType:"json",success:function(e){e.Status&&($("#providerTypeConfigStepList").load(t+"?TenantProviderTypeKey="+n),l.parent().parent().parent().modal("hide"),$("#addStepNameTextBox").val(""),$("#addStepDescriptionTextBox").val(""),$("#addStepControlPathTextBox").val(""))}}))},hideInherited:u,showParameters:function(){var e=$("#providerTypeConfigTabs").find("li");e.last().removeAttr("class"),e.first().attr("class","active"),$("#providerTypeConfigStepDiv").hide(),$("#providerTypeConfigParameterDiv").show()},showSteps:function(){var e=$("#providerTypeConfigTabs").find("li");e.first().removeAttr("class"),e.last().attr("class","active"),$("#providerTypeConfigParameterDiv").hide(),$("#providerTypeConfigStepDiv").show()},switchNameField:function(){var e=$("#switchNameField");"true"==e.data("showList")?($("#addParameterNameTextBox").show(),$("#addParameterNameDropDownList").hide(),e.data("showList","false"),e.html("or select one from the list of shared")):($("#addParameterNameTextBox").hide(),$("#addParameterNameDropDownList").show(),e.data("showList","true"),e.html("or type in a new name"))}}}(),hl_provisioning_integrationConfig_providerTypeConfigParameterList=function(){function r(){$("#editParameterModal").modal("hide"),$("#editParameterModalWrapper").remove()}return{closeEditModal:r,openEditModal:function(e){var t=$(e),i=t.data("url");t.parent().after('<div id="editParameterModalWrapper">'),t.attr("disabled",!0);var n=t.html();t.html(n+"ing..."),$("#editParameterModalWrapper").load(i+"?Key="+t.data("key"),function(){$("#editParameterModal").modal("show"),t.html(n),t.removeAttr("disabled")})},saveParameter:function(i){var e=$(i).data("key"),n=$(i.parentNode.parentNode).find("#editParameterDescriptionTextBox").first().val(),t=$(i.parentNode.parentNode).find("#editParameterPossibleValuesTextBox").first().val(),o=$(i.parentNode.parentNode).find("#editParameterDefaultValueTextBox").first().val(),a=parseInt($.trim($(i.parentNode.parentNode).find("#editParameterInputTypeDropDownList").first().val()),10),s={Key:e,Description:n,PossibleValues:t,DefaultValue:o,InputType:a};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/UpdateParameter",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e.Status){var t=$(i.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode).find("td");switch($(t[1]).html($.trim(n)),a){case 1:$(t[2]).html("Boolean");break;case 2:$(t[2]).html("Integer");break;case 3:$(t[2]).html("Double");break;case 4:$(t[2]).html("Guid");break;default:$(t[2]).html("String")}r()}else hl_provisioning_integrationConfig_addError(e.ErrorIds,e.ErrorMessage,e.IsGlobalError)}})}}}(),hl_provisioning_integrationConfig_providerTypeConfigStepList={associateParameter:function(t){$(t).attr("disabled","disabled"),$(t).html("Selecting...");var e={ParameterKey:$(t).parent().parent().parent().parent().parent().attr("id").split("_")[1],StepKey:$(t).parent().parent().parent().parent().parent().parent().parent().parent().attr("id").split("_")[1]};$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/AddStepParameter",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Status?($(t).html("Deselect"),$(t).attr("class","btn btn-default"),$(t).attr("data-key",e.TenantProviderTypeConfigStepKey),$(t).attr("onclick","hl_provisioning_integrationConfig_providerTypeConfigStepList.dissociateParameter(this);")):$(t).html("Select"),$(t).removeAttr("disabled")}})},deleteStep:function(a){var e=$(a.parentNode.parentNode.parentNode).attr("id").split("_")[1];$.ajax({type:"DELETE",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/DeleteStep?key="+e,contentType:"application/json; charset=utf-8",success:function(e){var t,i,n,o;e.Status?($(a).parent().parent().parent().modal("hide"),i=(t=$(a).parent().parent().parent().parent().parent().parent()).parent(),n=t.next().find("td").last().prev().find("button").first(),o=t.prev().find("td").last().prev().find("button").last(),t.remove(),0==n.parent().parent().index()&&(n.removeAttr("onclick"),n.attr("disabled","disabled")),o.parent().parent().index()==i.find("tr").length-1&&(o.removeAttr("onclick"),o.attr("disabled","disabled"))):hl_provisioning_integrationConfig_addError(e.ErrorIds,e.ErrorMessage,e.IsGlobalError)}})},dissociateParameter:function(t){var e=$(t).data("key");$(t).attr("disabled","disabled"),$(t).html("Deselecting..."),$.ajax({type:"DELETE",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/DeleteStepParameter?key="+e,contentType:"application/json; charset=utf-8",success:function(e){e.Status?($(t).html("Select"),$(t).attr("class","btn btn-success"),$(t).removeAttr("data-key"),$(t).attr("onclick","hl_provisioning_integrationConfig_providerTypeConfigStepList.associateParameter(this);")):$(t).html("Deselect"),$(t).removeAttr("disabled")}})},filterParameters:function(e){for(var t=$(e).val(),i=$(e).parent().parent().parent().find('div[id^="associatedStepParameterContainer_"]'),n=0;n<i.length;n++){var o=$(i[n]);-1<o.find("h4.parameter-header").html().toLowerCase().indexOf(t.toLowerCase())?o.show():o.hide()}},moveStep:function(a,s){var r,e=$(a.parentNode.parentNode).find("div[id^=editStepModal]").attr("id").split("_")[1];if("up"==s)r=$(a.parentNode.parentNode).prev().find("div[id^=editStepModal]").attr("id").split("_")[1];else{if("down"!=s)return;r=$(a.parentNode.parentNode).next().find("div[id^=editStepModal]").attr("id").split("_")[1]}var t={Key1:e,Key2:r};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/SwapStep",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e.Status){for(var t=$(a.parentNode.parentNode.parentNode).find("tr"),i=$(a.parentNode.parentNode).detach(),n=0;n<t.length;n++)if($(t[n]).find("div[id^=editStepModal]").attr("id").split("_")[1]==r){"up"==s?$(t[n]).before(i):$(t[n]).after(i);var o=$(i.find("td")[3]).detach();$($(t[n]).find("td")[3]).detach().insertAfter($(i.find("td")[2])),o.insertAfter($($(t[n]).find("td")[2]));break}}else hl_provisioning_integrationConfig_addError(e.ErrorIds,e.ErrorMessage,e.IsGlobalError)}})},reorderStepParameters:function(t){var e={Keys:$(t).parent().parent().find("li").map(function(){return $(this).data("key")}).get()};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/ReorderStepParameters",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Status?$(t.parentNode.parentNode.parentNode).modal("hide"):hl_provisioning_integrationConfig_addError(e.ErrorIds,e.ErrorMessage,e.IsGlobalError)}}"),t=e.substring(e.indexOf("_")+1),n=$(i.parentNode.parentNode).find("#editStepNameTextBox_"+t).first().val(),o=$(i.parentNode.parentNode).find("#editStepDescriptionTextBox_"+t).first().val(),a=$(i.parentNode.parentNode).find("#editStepControlPathTextBox_"+t).first().val(),s={Key:t,Name:n,Description:o,ControlPath:a};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationConfig/UpdateStep",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t;e.Status?(t=$(i.parentNode.parentNode.parentNode.parentNode.parentNode).find("td"),$(t[0]).html($.trim(n)),$(t[1]).html($.trim(o)),$(t[2]).html($.trim(a)),$(i.parentNode.parentNode.parentNode).modal("hide")):hl_provisioning_integrationConfig_addError(e.ErrorIds,e.ErrorMessagction(e,t){var i={MembershipProviderKey:$("#"+e).find("option:selected").val(),UserProviderKey:$("#"+t).find("option:selected").val()};$.ajax({contentType:"application/json; charset=utf-8",type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/IntegrationSetup/SaveProviders",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success&&(window.location.href="?Section=Membership&Step=0")}})}},hl_provisioning_MemberClicksMembershipIntegrationSetup={getMemberInfo:function(e){var t=$(e).find("option:selected").val();hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/GetMemberInfo?ProfileId="+t,dataType:"json",success:function(e){hl_common_ui_unBlockUI(),function(e){for(var t=$("#contactInfoTable").find("tbody > tr"),i=0;i<t.length;i++){var n=t.eq(i).find("td");switch(n.first().attr("data-type")){case"Newtonsoft.Json.Linq.JArray":var o=e[n.first().attr("data-field-name")],a=n.last();if(null!==o&&0<o.length){a.html(o[0]);for(var s=1;s<o.length;s++)a.append("<br />"),a.append(o[s])}break;default:n.last().html(e[n.first().attr("data-field-name")])}}}(e)},error:function(){hl_common_ui_unBlockUI(),console.log("An error has occurred.")}})},showConfirmDialog:function(e,t,i,n){var o="#dialog-"+e;$(o).remove();var a=$('<div id="dialog-'+e+'" class="modal" role="dialog" aria-labelledby="Save Confirmation" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><a href="#" role="button" class="close" data-dismiss="modal" aria-label="Close"></a><h4 class="modal-title" >'+t+"</h4></div><div class=\"modal-body\"><span>The following configuration parameters will be set:<br><br><table class='table'><tr><th>Name</th><th>Value</th></tr>"+function(e){for(var t=e.split("||"),i="",n=0;n<t.length;n++){var o=t[n].split(":");i+="<tr><td>"+o[0]+"</td><td>"+o[1]+"</td></tr>"}return i}(i)+'</table></span></div><div class="modal-footer"><div class="text-left"><a role="button" class="btn btn-primary" href="javascript:void(0)" id="confirm-save">Save</a><a role="button" class="btn btn-default" data-dismiss="modal">Cancel</a></div></div></div></div></div>');$("body").append(a),$(o).find("#confirm-save").bind("click",function(){setTimeout(function(){hl_common_ui_blockUI()},0),n(),$(o).modal("hide")}),$(o).modal("show")},updateGlyphicon:function(e){var t=$(e).find("span");t.hasClass("glyphicon-minus")?(t.removeClass("glyphicon-minus"),t.addClass("glyphicon-plus")):(t.removeClass("glyphicon-plus"),t.addClass("glyphicon-minus"))}},hl_provisioning_MemberClicksMembershipIntegrationSetup_configureContactInformation={changeImportStatus:function(e){var t=$(e),i=t.attr("id").substr(2),n=$("#ddl"+i);n.attr("disabled",t.is(":checked")),$("#tb"+i+"Type").attr("disabled",t.is(":checked")),n.selectpicker("refresh")},saveMappings:function(){var t=$("#saveMappingsStatus"),i=$("#saveMappingsButton");t.removeClass(),t.html(""),i.attr("disabled","disabled"),i.html("Updating...");var e={IsCompany:$("#cbIsCompany").is(":checked")?"DONTIMPORT":$("#ddlIsCompany").val(),DateOfBirth:$("#cbDateOfBirth").is(":checked")?"DONTIMPORT":$("#ddlDateOfBirth").val(),Designation:$("#cbDesignation").is(":checked")?"DONTIMPORT":$("#ddlDesignation").val(),Prefix:$("#cbPrefix").is(":checked")?"DONTIMPORT":$("#ddlPrefix").val(),FirstName:$("#cbFirstName").is(":checked")?"DONTIMPORT":$("#ddlFirstName").val(),MiddleName:$("#cbMiddleName").is(":checked")?"DONTIMPORT":$("#ddlMiddleName").val(),LastName:$("#cbLastName").is(":checked")?"DONTIMPORT":$("#ddlLastName").val(),InformalName:$("#cbInformalName").is(":checked")?"DONTIMPORT":$("#ddlInformalName").val(),Suffix:$("#cbSuffix").is(":checked")?"DONTIMPORT":$("#ddlSuffix").val(),EmailAddress:$("#cbEmailAddress").is(":checked")?"DONTIMPORT":$("#ddlEmailAddress").val(),Gender:$("#cbGender").is(":checked")?"DONTIMPORT":$("#ddlGender").val(),CompanyName:$("#cbCompanyName").is(":checked")?"DONTIMPORT":$("#ddlCompanyName").val(),CompanyId:$("#cbCompanyId").is(":checked")?"DONTIMPORT":$("#ddlCompanyId").val(),Title:$("#cbTitle").is(":checked")?"DONTIMPORT":$("#ddlTitle").val(),DirectoryOptOut:$("#cbDirectoryOptOut").is(":checked")?"DONTIMPORT":$("#ddlDirectoryOptOut").val(),MemberId:$("#cbMemberId").is(":checked")?"DONTIMPORT":$("#ddlMemberId").val(),WebsiteURL:$("#cbWebsiteURL").is(":checked")?"DONTIMPORT":$("#ddlWebsiteURL").val(),Phone1:$("#cbPhone1").is(":checked")?"DONTIMPORT":$("#ddlPhone1").val(),Phone1Type:$("#cbPhone1").is(":checked")?"":$("#tbPhone1Type").val(),Phone2:$("#cbPhone2").is(":checked")?"DONTIMPORT":$("#ddlPhone2").val(),Phone2Type:$("#cbPhone2").is(":checked")?"":$("#tbPhone2Type").val(),Phone3:$("#cbPhone3").is(":checked")?"DONTIMPORT":$("#ddlPhone3").val(),Phone3Type:$("#cbPhone3").is(":checked")?"":$("#tbPhone3Type").val(),Phone4:$("#cbPhone4").is(":checked")?"DONTIMPORT":$("#ddlPhone4").val(),Phone4Type:$("#cbPhone4").is(":checked")?"":$("#tbPhone4Type").val(),Address1:$("#cbAddress1").is(":checked")?"DONTIMPORT":$("#ddlAddress1").val(),Address2:$("#cbAddress2").is(":checked")?"DONTIMPORT":$("#ddlAddress2").val(),Address3:$("#cbAddress3").is(":checked")?"DONTIMPORT":$("#ddlAddress3").val(),City:$("#cbCity").is(":checked")?"DONTIMPORT":$("#ddlCity").val(),StateOrProvince:$("#cbStateOrProvince").is(":checked")?"DONTIMPORT":$("#ddlStateOrProvince").val(),PostalCode:$("#cbPostalCode").is(":checked")?"DONTIMPORT":$("#ddlPostalCode").val(),Country:$("#cbCountry").is(":checked")?"DONTIMPORT":$("#ddlCountry").val(),MemberSinceDate:$("#cbMemberSinceDate").is(":checked")?"DONTIMPORT":$("#ddlMemberSinceDate").val(),MembershipExpiresOn:$("#cbMembershipExpiresOn").is(":checked")?"DONTIMPORT":$("#ddlMembershipExpiresOn").val()};$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/SaveMappings",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){i.html("Update Parameters"),i.removeAttr("disabled"),e.Success?(t.addClass("text-success"),t.html("The save was successful."),window.location="/HigherLogic/Admin/HLStaff/IntegrationConfiguration/IntegrationSetup.aspx?Section=Membership&Step=2"):(t.addClass("text-danger"),t.html("An error has occurred."))},error:function(){i.html("Update Parameters"),i.removeAttr("disabled")}})}},hl_provisioning_MemberClicksMembershipIntegrationSetup_configuret().parent().parent(),n=function(e){var t,i,n=e?"6":"12",o=$('<div class="row form-group">');e&&(t=$('<div class="col-md-'+n+'">'),i=$('<input type="text" class="form-control" />'));var a=$('<div class="col-md-'+n+'">'),s=$('<select class="form-control" data-container="body"'+(e?"multiple>":">")),r=$("#attributes").val().split("||");for(var l in r)s.append($('<option value="'+r[l]+'">'+r[l]+"</option>"));return e&&(t.append(i),o.append(t)),a.append(s),o.append(a),o}(t);i.find("div.row").last().prev().after(n),n.find("select").selectpicker({liveSearch:!0,multipleSeparator:"; "})},removeRow:function(e){$(e).parent().parent().parent().find("div.row").last().prev().remove()},saveDemographics:function(){var e=$("#pickList"),t=$("#collapsedCheckbox"),i=$("#freeForm"),n=t.find("div.row.form-group").slice(1).map(function(){if(!hl_common_util_stringIsNullOrWhiteSpace($(this).find("input").val())&&"Select One or More Fields"!==$(this).find("span.filter-option").text())return{demoType:$(this).find("input").val(),checkboxes:$(this).find("span.filter-option").text().split("; ")}}).toArray(),o={PickDemographics:e.find("select option:selected[value]").map(function(){return $(this).val()}).toArray(),CombinedCheckBoxDemographics:JSON.stringify(n.reduce(function(e,t){return e[t.demoType]=t.checkboxes,e},{})),FreeFormDemographics:i.find("select option:selected[value]").map(function(){return $(this).val()}).toArray()};$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/SaveDemographics",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){window.location="/HigherLogic/Admin/HLStaff/IntegrationConfiguration/IntegrationSetup.aspx?Section=Membership&Step=3"}})}},hl_provisioning_MemberClicksMembershipIntegrationSetup_configureCommunities=function(){function t(){return $.makeArray($("#otherCommunities").find("div.fieldNameRow").map(function(){var e=$(this).find("select option:selected").val();if("Select a Field"!==e)return e.substring(0,e.indexOf(","))}))}return{addRow:function(e){var t=$(e).parent().parent().parent(),i=function(){var e=$('<div class="row form-group fieldNameRow">'),t=$('<div class="col-md-12">'),i=$('<select class="form-control" data-container="body">');i.append($("<option>Select a Field</option>"));var n=$("#attributes").val().split("||");for(var o in n)i.append($('<option value="'+n[o]+'">'+n[o]+"</option>"));return t.append(i),e.append(t),e}();t.find("div.row").last().prev().after(i),i.find("select").selectpicker({liveSearch:!0,multipleSeparator:"; "})},buildAttributeArray:t,removeRow:function(e){$(e).parent().parent().parent().find("div.fieldNameRow").last().remove()},saveCommunityConfiguration:function(){var e={UseGroups:document.getElementById("cbUseGroups").checked,AdditionalAttributes:t()};$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/SaveCommunityConfiguration",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){window.location="/HigherLogic/Admin/HLStaff/IntegrationConfiguration/IntegrationSetup.aspx?Section=Membership&Step=4"}})}}}(),hl_provisioning_MemberClicksMembershipIntegrationSetup_configureSecurityGroups=function(){function t(){return $.makeArray($("#otherSecurityGroups").find("div.fieldNameRow").map(function(){var e=$(this).find("select option:selected").val();if("Select a Field"!==e)return e.substring(0,e.indexOf(","))}))}function r(e,t){e.parent().addClass("has-error"),hl_common_util_stringIsNullOrWhiteSpace(t)||e.parent().find("span.help-block").text(t),e.parent().find("span.help-block").show(),e.on("keyup",{obj:e},i)}function i(e){var t=e.data.obj;t.parent().removeClass("has-error"),t.parent().find("span.help-block").hide(),t.parent().find("span.help-block").text(""),t.off("keyup",i)}return{addMemberTypeRow:function(){var e=$("#memberTypesTable"),t=function(e){var t=$('<div class="row form-group">'),i=$('<div class="col-md-4">');i.append($('<input type="text" class="form-control" id="tbMemberTypeCode'+e+'">')),i.append($('<span class="help-block">'));var n=$('<div class="col-md-5">');n.append($('<input type="text" class="form-control" id="tbProfileId'+e+'">')),n.append($('<span class="help-block">'));var o=$('<div class="col-md-3">');return o.append($('<input type="checkbox" id="cbIsMember'+e+'">')),t.append(i),t.append(n),t.append(o),t}(e.find("div.row").length);e.append(t),t.find("div.col-md-3").find('[id^="cb"]').bootstrapSwitch({handleWidth:30,onText:"Yes",offText:"No"})},addRow:function(e){var t=$(e).parent().parent().parent(),i=function(){var e=$('<div class="row form-group fieldNameRow">'),t=$('<div class="col-md-12">'),i=$('<select class="form-control" data-container="body">');i.append($("<option>Select a Field</option>"));var n=$("#attributes").val().split("||");for(var o in n)i.append($('<option value="'+n[o]+'">'+n[o]+"</option>"));return t.append(i),e.append(t),e}();t.find("div.row").last().prev().after(i),i.find("select").selectpicker({liveSearch:!0,multipleSeparator:"; "})},buildAttributeArray:t,buildMemberTypeCodeString:function(){var e=[];return $("#memberTypesTable").find("div.row").each(function(){!hl_common_util_stringIsNullOrWhiteSpace($(this).find("div.col-md-4").find("input").val())&&$(this).find("div.col-md-3").find("input").is(":checked")&&e.push($(this).find("div.col-md-4").find("input").val().replace(" ",""))}),e.join()},getProfileIdByMemberNumber:function(e){var t=$(e);t.html("Searching..."),t.attr("disabled","disabled"),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/Getmber").val()),dataType:"json",success:function(e){$("#tbProfileId").val(e.Message)},complete:function(){t.removeAttr("disabled"),t.html("Search")}})},removeMemberTypeRow:function(){$("#memberTypesTable").find("div.row").last().remove()},removeRow:function(e){$(e).parent().parent().parent().find("div.fieldNameRow").last().remove()},savw").each(function(){var i=$(this).find("div.col-md-4").find("input"),n=i.val(),e=!hl_common_util_stringIsNullOrWhiteSpace(n),o=$(this).find("div.col-md-5").find("input"),t=o.val(),a=!hl_common_util_stringIsNullOrWhiteSpace(t);return!e&&!a||(e&&!a?(r($(this).find("div.col-md-5").find("input"),"Profile ID Required."),!0):!e&&a?(r($(this).find("div.col-md-5").find("input"),"Member Type Required."),!0):void $.ajax({contentType:"application/json; charset=utf-8",type:"GET",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/GetMemberInfo?ProfileId="+t,dataType:"json",async:!1,success:function(e){var t;null!==e&&null!=e?(t=e["[Member Type]"])!==n&&(s=!1,r(i,"Member Type does not match actual: "+t)):(s=!1,r(o,"Invalid Profile ID. Try looking it up!"))},error:function(){return console.log("An error has occurred."),!1}}))}),s&&(e={UseMemberType:document.getElementById("cbUseMemberTypes").checked,MemberTypeCodes:"",SecurityGroupAttributes:t()},$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/MemberClicksMembershipIntegrationSetup/SaveSecurityGroups",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){window.location="/HigherLogic/Admin/HLStaff/IntegrationConfiguration/IntegrationSetup.aspx?Section=User&Step=0"}}))),hl_common_ui_unBlockUI()},showHideMemberTypesSection:function(){document.getElementById("cbUseMemberTypes").checked?$("#memberTypesSection").show():$("#memberTypesSection").hide()},updateGlyphicon:function(e){var t=$(e).find("span");t.hasClass("glyphicon-minus")?(t.removeClass("glyphicon-minus"),t.addClass("glyphicon-plus")):(t.removeClass("glyphicon-plus"),t.addClass("glyphicon-minus"))}}}(),hl_provisioning_netFORUMProMembershipIntegrationSetup_setMembershipInformation=function(){function l(e){for(var t=$(this),i=0;i<e.data.genNum;i++)t=t.parent();t.removeClass("has-error"),$(this).off("keyup",l)}return{addRow:function(){var e=$('<div class="row form-group">'),t=$('<div class="col-md-4 col-sm-4">');t.append('<input type="text" class="form-control prdCodeTextBox" />');var i=$('<div class="col-md-2 col-sm-2">');i.append('<div class="checkbox"><label></label></div>');var n=$('<input type="checkbox" class="memberStatusCheckBox use-bootstrap-switch" />');i.children().first().children().first().append(n),e.append(t),e.append(i),$("#productListWrapper").append(e),n.bootstrapSwitch({size:"small",onText:"Yes",offText:"No",handleWidth:25})},removeRow:function(){$("#productListWrapper").find("div.row").last().remove()},save:function(e){for(var s=$(e),t="",i=!0,n=$("#productListWrapper").find("div.row"),o=0;o<n.length;o++){var a=n.eq(o);hl_common_util_stringIsNullOrWhiteSpace(a.find("input.prdCodeTextBox").val())||(i?i=!1:t+="||",t+=o+"::"+$.trim(a.find("input.prdCodeTextBox").val())+"::"+a.find("input.memberStatusCheckBox").prop("checked"))}var r={IgnoreHideOnWeb:document.getElementById("ignoreHideOnWebCheckBox").checked,AllowCompanyRecords:document.getElementById("allowCompanyRecordsCheckBox").checked,AllowLimitbySecurityGroups:document.getElementById("allowLimitbySecurityGroupsCheckBox").checked,PrdCodeStr:t,UseCstReceivesMemberBenefitsFlag:document.getElementById("useCstReceivesMemberBenefitsFlagCheckBox").checked,UseCstMemberFlag:document.getElementById("useCstMemberFlagCheckBox").checked,UseEmailDomain:document.getElementById("useEmailDomainCheckBox").checked,UseCompanyName:document.getElementById("useCompanyNameCheckBox").checked,UseCompanyId:document.getElementById("useCompanyIdCheckBox").checked,EmailDomain:$.trim($("#emailDomainTextBox").val()),CompanyName:$.trim($("#companyNameTextBox").val()),CompanyId:ument.getcePeriod:document.getElementById("useGracePeriodCheckBox").checked,GracePeriodDays:$.trim($("#gracePeriodDaysTextBox").val())};s.html("Saving..."),s.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/netFORUMProMembershipIntegrationSetup/SaveMembershipInformation",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e.Success)window.location.href="?Step=2";else{s.removeAttr("disabled"),s.html("Save and Continue");for(var t=e.Message.split(","),i=0;i<t.length;i++){var n,o=2,a=t[i];0===a.indexOf("#")?(n=$(a),"#gracePeriodDaysTextBox"==a?(n.parent().parent().parent().parent().addClass("has-error"),o=4):n.parent().parent().addClass("has-error")):(n=$("#productListWrapper").find("div.row").eq(parseInt(a))).parent().parent().addClass("has-error"),n.on("keyup",{genNum:o},l)}}}})},searchByPrdName:function(e){var t=$(e);t.html("Searching..."),t.attr("disabled","disabled"),$.ajax({contentType:"application/json; charset=utf-8",type:"GET",url:"/HigherLogic/UI/MVC/Provisioning/netFORUMProMembershipIntegrationSetup/GetPrdCode?prdName="+$.trim($("#prdNameTextBox").val()),dataType:"json",success:function(e){$("#prdCodeResponseTextBox").val(e.Message)},complete:function(){t.removeAttr("disabled"),t.html("Search")}})},updateGracePeriodDaysVisibility:function(){document.getElementById("useMbrExpireDateCheckBox").checked&&document.getElementById("useGracePeriodCheckBox").checked?$("#gracePeriodDaysWrapper").show():$("#gracePeriodDaysWrapper").hide()},updateStaffVisibility:function(e,t){e.checked?$("#"+t).parent().show():$("#"+t).parent().hide()},updateUseGracePeriodVisibility:function(){document.getElementById("useMbrExpireDateCheckBox").checked?$("#useGracePeriodWrapper").show():$("#useGracePeriodWrapper").hide()}}}(),hl_provisioning_netFORUMProMembershipIntegrationSetup_configureDemographics=function(){function u(){$(this).parent().parent().removeClass("has-error"),$(this).off("keyup",u)}return{addRow:function(){var e=$('<div class="row form-group">'),t=$('<div class="col-md-4 col-sm-4">');t.append('<input type="text" class="form-control demographicTypeNameTextBox" />');var i=$('<div class="col-md-4 col-sm-4">');i.append('<input type="text" class="form-control customFieldTextBox" />');var n=$('<div class="col-md-2 col-sm-2">');n.append('<div class="checkbox"><label></label></div>');var o=$('<input type="checkbox" class="freeFormCheckBox use-bootstrap-switch" />');n.children().first().children().first().append(o),e.append(t),e.append(i),e.append(n),$("#demographicsWrapper").append(e),o.bootstrapSwitch({size:"small",onText:"FF",offText:"PL",handleWidth:25})},removeRow:function(){$("#demographicsWrapper").find("div.row").last().remove()},save:function(e){$("#errorMessageRow").hide();var t=$("#demographicsWrapper").find("div.row"),i=function(e){for(var t=[],i=[],n=0;n<e.length;n++){var o=e.eq(n).find('input[type="text"]');hl_common_util_stringIsNullOrWhiteSpace(o.eq(0).val()+o.eq(1).val())||(hl_common_util_stringIsNullOrWhiteSpace(o.eq(0).val())||hl_common_util_stringIsNullOrWhiteSpace(o.eq(1).val())||!$.trim(o.eq(1).val()).match(/^custom_(flag|date|currency|integer|string|text)_(0[1-9]|1[0-5])$/)?i.push(n):t.push(n))}return{goodIndices:t,errorIndices:i}}(t),n=i.errorIndices;if(0<n.length)for(var o=0;o<n.length;o++){var a=t.eq(n[o]);a.addClass("has-error")es,l=[],c=0;c<r.length;c++){var d=t.eq(r[c]);l.push({DemographicTypeName:d.find("input.demographicTypeNameTextBox").val(),CustomField:d.find("input.customFieldTextBox").val(),IsFreeForm:d.find("input.freeFormCheckBox").checked})}s.html("Saving..."),s.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/netFORUMProMembershipIntegrationSetup/SaveDemographics",data:JSON.stringify({Demographics:l}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?window.location.href="?Section=User&Step=0":(s.removeAttr("disabled"),s.html("Save and Continue"),$("#errorMessageRow").find("span").html("<strong>"+e.Message+"</strong>"),$("#errorMessageRow").show())}})}}}}();function hl_provisioning_netFORUMProUserIntegrationSetup_updateCmsSetup(e){var t=$(e);t.prop("disabled","disabled"),t.html("Fixing...");var i={LoginStatusCode:$(e).data("loginStatusCode"),ContactInfoStatusCode:$(e).data("contactInfoStatusCode"),ContactInfoLink:$.trim($("#contactInfoLink").val())};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/netFORUMProUserIntegrationSetup/UpdateCmsSetup",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?$("#refreshButton").show():$("#refreshButton").hide()},complete:function(){$("#stepContentWrapper").load($(e).data("url")),t.html("Fix CMS setup"),t.removeAttr("disabled")}})}function hl_provisioning_TimberlakeUserIntegrationSetup_updateCmsSetup(t){var e={ContactInfoStatusCode:$(t).data("contactInfoStatusCode"),ContactInfoLink:$.trim($("#contactInfoLink").val())};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/TimberlakeUserIntegrationSetup/UpdateCmsSetup",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success&&$("#cmsSetupWrapper").load($(t).data("url"))}})}var hl_provisioning_YourMembershipMembershipIntegrationSetup_setMembershipInformation=function(){function c(e){for(var t=$(this),i=0;i<e.data.genNum;i++)t=t.parent();t.removeClass("has-error"),$(this).off("keyup",c)}return{addRow:function(){var e=$('<div class="row form-group">'),t=$('<div class="col-md-4 col-sm-4">');t.append('<input type="text" class="form-control prdCodeTextBox" />');var i=$('<div class="col-md-3 col-sm-3">');i.append('<input type="text" class="form-control memberTypeCodeTextBox"/>');var n=$('<div class="col-md-2 col-sm-2">');n.append('<div class="checkbox"><label></label></div>');var o=$('<input type="checkbox" class="memberStatusCheckBox use-bootstrap-switch" />');n.children().first().children().first().append(o);var a=$('<div class="col-md-1 col-sm-1">'),s=$("#productListWrapper").data("checkboxtemplate");a.append(s),e.append(t),e.append(i),e.append(n),e.append(a),$("#productListWrapper").append(e),o.bootstrapSwitch({size:"small",onText:"Yes",offText:"No",handleWidth:25})},removeRow:function(){$("#productListWrapper").find("div.row").last().remove()},save:function(e,r){for(var l=$(e),t="",i=!0,n=$("#productListWrapper").find("div.row"),o=0;o<n.length;o++){var a=n.eq(o);hl_common_util_stringIsNullOrWhiteSpace(a.find("input.prdCodeTextBox").val())||(i?i=!1:t+="||",t+=o+"::"+$.trim(a.find("input.prdCodeTextBox").val())+"::"+$.trim(a.find("input.memberTypeCodeTextBox").val())+"::"+a.find("input.memberStatusCheckBox").prop("checked"))}var s={syncAllMembers:document.getElementById("useLimitSyncByCheckBox").checked,PrdCodeStr:t,UseGracePeriod:document.getElementById("useGracePeriodCheckBox").checked,GracePeriodDays:$.trim($("#gracePeriodDaysTextBox").val())};l.html("Saving..."),l.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipMembershipIntegrationSetup/SaveMembershipInformation",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e.Success&&0==r)window.location.href="?Step=2";else if(e.Success&&1==r)window.location.href="?Step=1";else{l.removeAttr("disabled"),1==r?l.html("Check MemberTypes"):l.html("Save and Continue");for(var t=e.Message.split(","),i=0;i<t.length;i++){var n,o,a=0,s=t[i];0===s.indexOf("#")?(n=$(s),"#gracePeriodDaysTextBox"==s&&(n.parent().parent().parent().addClass("has-error"),a=3)):0===s.indexOf("[")?((n=$("#productListWrapper").find("div.row").eq(parseInt(s.replace("[","").replace("]","")))).find("label.hl-checkbox").data("ischecked",1),n.find("label.hl-checkbox > span.glyphicon").removeClass("opacity-zero"),n.find("label.hl-checkbox").removeClass("btn-default"),n.find("label.hl-checkbox").addClass("btn-success"),n.find("div.membertype").remove()):((n=$("#productListWrapper").find("div.row").eq(parseInt(s.substring(0,s.indexOf("("))))).addClass("has-error"),n.find("label.hl-checkbox").data("ischecked",0),n.find("label.hl-checkbox > span.glyphicon").addClass("opacity-zero"),n.find("label.hl-checkbox").addClass("btn-default"),n.find("label.hl-checkbox").removeClass("btn-success"),n.on("keyup",{genNum:a},c),o=s.substring(s.indexOf("(")+1,s.indexOf(")")),n.find("div.membertype").remove(),""===o?n.append('<div class="col-md-2 col-sm-2 membertype"><label><strong>No MemberType</strong></label></div>'):n.append('<div class="col-md-2 col-sm-2 membertype"><label>Acutal MemberTypeCode: <strong>'+o+"</strong></label></div>"))}}}})},updateGracePeriodDaysVisibility:function(){document.getElementById("useGracePeriodCheckBox").checked?$("#gracePeriodDaysWrapper").show():$("#gracePeriodDaysWrapper").hide()}}}(),hl_provisioning_YourMembershipMembershipIntegrationSetup_setDemographicInformation=function(){function c(e){for(var t=$(this),i=0;i<e.data.genNum;i++)t=t.parent();t.removeClass("has-error"),$(this).off("keyup",c)}return{addRow:function(){var e=$('<div class="row form-group">'),t=$('<div class="col-md-4 col-sm-4">');t.append('<input type="text" class="form-control demTypeCodeTextBox" />');var i=$('<div class="col-md-3 col-sm-3">');i.append('<input type="text" class="form-control demTypeIdTextBox"/>');var n=$('<div class="col-md-2 col-sm-2">');n.append('<div class="checkbox"><label></label></div>');var o=$('<input type="checkbox" class="demographicTypeCheckBox use-bootstrap-switch" />');n.children().first().children().first().append(o);var a=$('<div class="col-md-1 col-sm-1">'),s=$("#productListWrapper").data("checkboxtemplate");a.append(s),e.append(t),e.append(i),e.append(n),e.append(a),$("#productListWrapper").append(e),o.bootstrapSwitch({size:"small",onText:"PL",offText:"FF",handleWidth:25})},removeRow:function(){$("#productListWrapper").find("div.row").last().remove()},save:function(e,r){for(var l=$(e),t="",i=!0,n=$("#productListWrapper").find("div.row"),o=0;o<n.length;o++){var a=n.eq(o);hl_common_util_stringIsNullOrWhiteSpace(a.find("input.demTypeCodeTextBox").val())||(i?i=!1:t+="||",t+=o+"::"+$.trim(a.find("input.demTypeCodeTextBox").val())+"::"+$.trim(a.find("input.demTypeIdTextBox").val())+"::"+a.find("input.demographicTypeCheckBox").prop("checked"))}var s={DemoCodeStr:t,UseAddress:document.getElementById("addressCheckBox").checked,UsePicture:document.getElementById("profilePicCheckBox").checked,UseExpiry:document.getElementById("membershipExpiryCheckBox").checked,PickListDemo:null,FreeFormDemo:null};l.html("Saving..."),l.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipMembershipIntegrationSetup/SaveDemographicInformation",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e.Success&&0==r)window.location.href="?Step=0";else if(e.Success&&1==r)window.location.href="?Step=3";else{l.removeAttr("disabled"),1==r?l.html("Check Demographics"):l.html("Save and Continue");for(var t=e.Message.split(","),i=0,n=0;n<t.length;n++){var o,a,s=t[n];0===s.indexOf("[")?((o=$("#productListWrapper").find("div.row").eq(parseInt(s.replace("[","").replace("]","")))).find("label.hl-checkbox").data("ischecked",1),o.find("label.hl-checkbox > span.glyphicon").removeClass("opacity-zero"),o.find("label.hl-checkbox").removeClass("btn-default"),o.find("label.hl-checkbox").addClass("btn-success")):0===s.indexOf("*")?(o=$("div").find("select.form-control.demoList"),0===i&&o.find("option").remove().end(),a=s.replace("*",""),0==i&&o.append($("<option></option>").attr("value",$.guid++).text("")),o.append($("<option></option>").attr("value",$.guid++).text(a)),$("div").find("div.returnedDemosWrapper").removeAttr("hidden"),i++):((o=$("#productListWrapper").find("div.row").eq(parseInt(s))).addClass("has-error"),o.find("label.hl-checkbox").data("ischecked",0),o.find("label.hl-checkbox > span.glyphicon").addClass("opacity-zero"),o.find("label.hl-checkbox").addClass("btn-default"),o.find("label.hl-checkbox").removeClass("btn-success"),o.on("keyup",{genNum:0},c))}}}})},addPickList:function(){var e={DemoCodeStr:null,UseAddress:null,UsePicture:null,UseExpiry:null,PickListDemo:$("#demographicList option:selected").text(),FreeFormDemo:null};$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipMembershipIntegrationSetup/SaveDemographicInformation",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success?($("#demographicCreateMessage").text("The Pick List Demographic "+e.Message+" Was Successfully Created"),$("#demographicCreateMessage").removeClass("text-danger"),$("#demographicCreateMessage").addClass("text-success")):($("#demographicCreateMessage").text(e.Message),$("#demographicCreateMessage").addClass("text-danger"),$("#demographicCreateMessage").removeClass("text-success"))}})},addFreeForm:function(){var e={DemoCodeStr:null,UseAddress:null,UsePicture:null,UseExpiry:null,PickListDemo:null,FreeFormDemo:$("#demographicList option:selected").text()};$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipMembershipIntegrationSetup/SaveDemograp charset=utf-8",dataType:"json",success:function(e){e.Success?($("#demographicCreateMessage").text("The Free Form Demographic "+e.Message+" Was Successfully Created"),$("#demographicCreateMessage").removeClass("text-danger"),$("#demographicCreateMessage").addClass("text-success")):($("#demographicCreateMessage").text(e.Message),$("#demographicCreateMessage").addClass("text-danger"),$("#demographicCreateMessage").removeClass("text-success"))}})}}}(),hl_provisioning_YourMembershipMembershipIntegrationSetup_setGroupsInformation=function(){function c(e){for(var t=$(this),i=0;i<e.data.genNum;i++)t=t.parent();t.removeClass("has-error"),$(this).off("keyup",c)}return{addRow:function(){var e=$('<div class="row form-group">'),t=$('<div class="col-md-4 col-sm-4">');t.append('<input type="text" class="form-control prdCodeTextBox" />');var i=$('<div class="col-md-3 col-sm-3">');i.append('<input type="text" class="form-control memberTypeCodeTextBox"/>');var n=$('<div class="col-md-1 col-sm-1">'),o=$("#productListWrapper").data("checkboxtemplate");n.append(o),e.append(t),e.append(i),e.append(n),$("#productListWrapper").append(e),$checkBox.bootstrapSwitch({size:"small",onText:"Yes",offText:"No",handleWidth:25,disabled:!0})},removeRow:function(){$("#productListWrapper").find("div.row").last().remove()},save:function(e,s){for(var r=$(e),t="",i=!0,n=$("#productListWrapper").find("div.row"),o=0;o<n.length;o++){var a=n.eq(o);hl_common_util_stringIsNullOrWhiteSpace(a.find("input.prdCodeTextBox").val())||(i?i=!1:t+="||",t+=o+"::"+$.trim(a.find("input.prdCodeTextBox").val())+"::"+$.trim(a.find("input.memberTypeCodeTextBox").val()))}var l={GroupsCodeStr:t,CreateCommunitiesForEvents:document.getElementById("useEventCommunities").checked,CreateCalendar:document.getElementById("useCalendar").checked};r.html("Saving..."),r.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipMembershipIntegrationSetup/SaveGroupsInformation",data:JSON.stringify(l),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e.Success&&0==s)window.location.href="?Step=3";else if(e.Success&&1==s)window.location.href="?Step=2";else{r.removeAttr("disabled"),1==s?r.html("Check Groups"):r.html("Save and Continue");for(var t=e.Message.split(","),i=0;i<t.length;i++){var n,o,a=t[i];0===a.indexOf("[")?((n=$("#productListWrapper").find("div.row").eq(parseInt(a.replace("[","").replace("]","")))).find("label.hl-checkbox").data("ischecked",1),n.find("label.hl-checkbox > span.glyphicon").removeClass("opacity-zero"),n.find("label.hl-checkbox").removeClass("btn-default"),n.find("label.hl-checkbox").addClass("btn-success")):((n=$("#productListWrapper").find("div.row").eq(parseInt(a))).addClass("has-error"),n.find("label.hl-checkbox").data("ischecked",0),n.find("label.hl-checkbox > span.glyphicon").addClass("opacity-zero"),n.find("label.hl-checkbox").addClass("btn-default"),n.find("label.hl-checkbox").removeClass("btn-success"),(o=$("#productListWrapper").find("div.row").eq(parseInt(a.replace("#","")))).find("div.grouptype").remove(),n.on("keyup",{genNum:0},c),0===a.indexOf("#")&&o.append('<div class="col-md-2 col-sm-2 grouptype"><label><strong>Error Creating new Group Type</strong></label></div>'))}}}})}}}(),hl_provisioning_YourMembershipUserIntegrationSetup_SetSignInInformation={save:function(e,t){var i=$(e),n={username:$("#username").val(),password:$("#password").val(),testGuid:$("#testGuid").val()};i.html("Saving..."),i.attr("disabled","disabled"),$.ajax({type:"POST",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipUserIntegrationSetup/SaveSignInInformation",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success&&0==t?window.location.href="?Section=User&Step=1":window.location.href="?Section=User&Step=0"}})}};function hl_provisioning_YourMembershipUserIntegrationSetup_updateCMSSetup(t){var e={ContactInfoStatusCode:$(t).data("contactInfoStatusCode"),ContactInfoLink:$.trim($("#contactInfoLink").val())};$.ajax({type:"PUT",url:"/HigherLogic/UI/MVC/Provisioning/YourMembershipUserIntegrationSetup/UpdateCmsSetup",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e.Success&&$("#cmsSetupWrapper").load($(t).data("url"))}})}var var t=$(e),n=$("#"+t.data("pnlerrorid")),o=$("#"+t.data("lblerrorid"));o.text(""),n.hide();var a={isOldDigest:"1"==t.data("olddigest"),lKey:t.data("library-key"),subType:"",email:"",isCd:!1,isWd:!1,isTopic:!1};if(a.isOldDigest){var s=$("#"+t.data("tbolddigest1stid"));if(!hl_common_util_isValidEmailAddress(s.val()))return s.parent().addClass("has-error"),s.focus(),void hl_common_ui_unBlockUI();s.parent().removeClass("has-error"),a.email=s.val(),a.subType=$('input[type="radio"][name*="'+t.data("radioname")+'"]:checked').val()}else"1"==t.data("istopic")?(a.isTopic=!0,a.subType=$('input[type="radio"][name*="'+t.data("radioname")+'"]:checked').val()):(a.isCd="1"==$("#"+t.data("ddldailycondigest1stid")+" option:selected").val(),a.isWd="1"==$("#"+t.data("ddlweeklycondigest1stid")+" option:selected").val(),a.subType=$("#"+t.data("ddldiscussiondigest1stid")+" option:selected").val());$.ajax({type:"POST",url:"/HigherLogic/Egroups/wsjson.aspx/JoinSubscribeByLibrary",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var t=JSON.parse(e.d);hl_common_ui_unBlockUI(),t.success?hl_common_util_doPostBackWithOptions(i):(o.text(t.errormessage),n.show())},error:function(){hl_common_ui_unBlockUI(),o.text("Error updating notification settings."),n.show()}})},renameBreadcrumbTitle:function({$("#"+$(e).data("modalid")).modal("hide"),$("#"+$(e).data("btnDeleteId")).click()}});function hl_resourcelibrary_addentryupload_onFpSuccess(e){$("#addEntryUpload_pnlFilesUploaded").show();for(var t=0;t<e.length;t++){var i='<tr id="addEntryUpload_file_'+e[t].key.substr(0,e[t].key.indexOf("_"))+'"><td>'+e[t].filename+' <a href="javascript:void(0)" class="btn btn-danger btn-xs" onclick="hl_resourcelibrary_addentryupload_onRemoveFileRow(\'addEntryUpload_file_'+e[t].key.substr(0,e[t].key.indexOf("_"))+'\')"><span class="glyphicon glyphicon-remove"></span></a></td></tr>';$("#addEntryUpload_tbodyFilesUploaded").append(i)}}function hl_resourcelibrary_addentryupload_onRemoveFileRow(e){$("#"+e).remove(),$("#addEntryUpload_tbodyFilesUploaded").children().length<1&&$("#addEntryUpload_pnlFilesUploaded").hide()}function hl_resourcelibrary_entryFlashPlayer_onResizeVideoJsPlayer(t,i){setTimeout(function(){var e=$("#"+t.id()).parent().width();void 0===i?t.width(e).height(e*(8/12)):t.width(e).height(i)},0)}function hl_resourcelibrary_entryFlashPlayer_onVideoJsWindowResize(e){hl_resourcelibrary_entryFlashPlayer_onResizeVideoJsPlayer(e.data.thisPlayer)}function hl_resourcelibrary_entryFlashPlayer_onAudioOnlyWindowResize(e){hl_resourcelibrary_entryFlashPlayer_onResizeVideoJsPlayer(e.data.thisPlayer,200)}function hl_resourcelibrary_videoJs_pauseAll(){$('audio[id*="audMain"]').each(function(){document.getElementById($(this).attr("id").paused)||$(this).trigger("pause")}),$('video[id*="vidMain"]').each(function(){document.getElementById($(this).attr("id").paused)||$(this).trigger("pause")}),$("#YouTubeDisplayFrame").length&&$("#YouTubeDisplayFrame")[0].contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}function hl_resourcelibrary_entryUploadFileList_updateStatusDisplay(o){var e={itemKey:$(px/GetFileJobFile",type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){var t,i=JSON.parse(e.d),n=!1;switch(i.StatusCode){case"Complete":t='<p class="text-muted">Successfully uploaded!</p>',n=!0;break;case"Processing":t='<p>Scanning... <img src="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/hl-loading.gif" /></p>';break;case"Failed":t="AVScan"===i.CurrentStep?'<span class="glyphicon glyphicon-warning-sign-text-danger"></span>&nbsp;<span class="text-danger">Failed malware scan, could not be uploaded.</span>':'<span class="glyphicon glyphicon-warning-sign-text-danger"></span>&nbsp;<span class="text-danger">File failed to upload. You may try again or contact support.</span>',n=!0;break;default:t='<p>Processing... <img src="https://d2x5ku95bkycr3.cloudfront.net/App_Themes/Common/images/hl-loading.gif" /></p>'}$(o).html(t),n?($(o).siblings(".processing-file-label").hide(),$(o).siblings(".DocumentTitle").attr("href",i.Url).text(i.FileName),$(o).closest(".file-container").find(".file-icon-img").attr("src",i.ImgUrl),$(o).closest(".file-container").find(".file-download-button").removeClass("aspNetDisabled").attr("href",i.ImgUrl)):setTimeout(function(){n=hl_resourcelibrary_entryUploadFileList_updateStatusDisplay(o)},5e3)}})}function hl_ui_cms_content_showHLExpressContentEditorModal(e,t,i){var n;void 0!==e&&(0<(n=$("#"+i+"-modal")).length&&n.remove(),hl_common_ui_blockUI(),$.ajax({contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(e),dataType:"html",url:"/higherlogic/ui/mvc/microsites/content/GetHLExpressContentEditorModal",success:function(e){$("body").append(e),(n=$("#"+i+"-modal")).find("#"+i+"-save").bind("click",function(){var e={};e.ContentKey=t,e.HtmlContent=$("#"+i+"-tinyMceHtml").val(),hl_common_ui_blockUI(),$.ajax({url:"/higherlogic/ui/mvc/microsites/content/SaveWidgetHTMLOnly/",type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){e.Success?window.location.reload():hl_common_ui_unBlockUI()}})}),$("#"+i+"-modal").modal("show"),hl_common_ui_unBlockUI()}}))}function onSyndicatedTypeSaveAndStay(e,t){var i=$(e.controlId+"-syndicatedFromOptions"),n=$(e.controlId+"-syndicatedPageOpts"),o={ControlId:e.controlId.substring(1),NavigationKey:t,SyndicatedContentSiteCategory:i.find(":selected").val().trim(),SyndicatedContentNaviagtionKey:i.find(":selected").text().trim(),SyndicatedContentCurrentPageCode:n.find(":selected").val().trim(),IsOnSaveAndStay:!0,ReturnPath:$(e.controlId).parent().data("returnpath")},a=i.closest("div.syndicatedContentPartial");hl_common_ui_blockUI(),$.ajax({type:"POST",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"html",url:"/higherlogic/ui/mvc/microsites/content/SyndicatedContentChange",success:function(e){a.html(e),hl_common_ui_unBlockUI()}})}function hl_ui_cms_content_contentEdit_lnkSwitchClick(){var e=hl_common_util_removeURLParameter(location.href,"dct"),t="new"===$("div[data-cms-version]").data("cmsVersion");location.href=t?hl_common_util_updateQueryStringParameter(e,"ov","1"):hl_common_util_removeURLParameter(e,"ov")}!function(e){if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires moment.js to be loaded first";e(jQuery,moment)}}(function(N,e){if(void 0===e)throw alert("momentjs is requried"),new Error("momentjs is required");function n(n,o){function a(){var e,t="absolute",i=g.component?g.component.offset():g.element.offset(),n=N(window);g.width=g.component?g.component.outerWidth():g.element.outerWidth(),i.top=i.top+g.element.outerHeight(),"up"===g.options.direction?e="top":"bottom"===g.options.direction?e="bottom":"auto"===g.options.direction&&(e=i.top+g.widget.height()>n.height()+n.scrollTop()&&g.widget.height()+g.element.outerHeight()<i.top?"top":"bottom"),"top"===e?(i.top-=g.widget.height()+g.element.outerHeight()+15,g.widget.addClass("top").removeClass("bottom")):(i.top+=1,g.widget.addClass("bottom").removeClass("top")),void 0!==g.options.width&&g.widget.width(g.options.width),"left"===g.options.orientation&&(g.widget.addClass("left-oriented"),i.left=i.left-g.widget.width()+20),I()&&(t="fixed",i.top-=n.scrollTop(),i.left-=n.scrollLeft()),n.width()<i.left+g.widget.outerWidth()?(i.right=n.width()-i.left-g.width,i.left="auto",g.widget.addClass("pull-right")):(i.right="auto",g.widget.removeClass("pull-right")),g.widget.css({position:t,top:i.top,left:i.left,right:i.right})}function r(e,t){U(g.date).isSame(U(e))||(g.element.trigger({type:"dp.change",date:U(g.date),oldDate:U(e)}),"change"!==t&&g.element.change())}function s(e){g.element.trigger({type:"dp.error",date:U(e)})}function e(e){e.stopPropagation(),e.preventDefault(),g.unset=!1;var t,i,n,o,a=N(e.target).closest("span, td, th"),s=U(g.date);if(1===a.length&&!a.is(".disabled"))switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"switch":T(1);break;case"prev":case"next":n=R.modes[g.viewMode].navStep,"prev"===a[0].className&&(n*=-1),g.viewDate.add(n,R.modes[g.viewMode].navFnc),b()}break;case"span":a.is(".month")?(t=a.parent().find("span").index(a),g.viewDate.month(t)):(i=parseInt(a.text(),10)||0,g.viewDate.year(i)),g.viewMode===g.minViewMode&&(g.date=U({y:g.viewDate.year(),M:g.viewDate.month(),d:g.viewDate.date(),h:g.date.hours(),m:g.date.minutes(),s:g.date.seconds()}),r(s,e.type),j()),T(-1),b();break;case"td":a.is(".day")&&(o=parseInt(a.text(),10)||1,t=g.viewDate.month(),i=g.viewDate.year(),a.is(".old")?0===t?(t=11,--i):--t:a.is(".new")&&(11==t?(t=0,i+=1):t+=1),g.date=U({y:i,M:t,d:o,h:g.date.hours(),m:g.date.minutes(),s:g.date.seconds()}),g.viewDate=U({y:i,M:t,d:Math.min(28,o)}),b(),j(),r(s,e.type))}}function l(e){var t=U(g.date),i=N(e.currentTarget).data("action"),n=x[i].apply(g,arguments);return S(e),g.date||(g.date=U({y:1970})),j(),k(),r(t,e.type),n}function c(e){U.lang(g.options.language);var t=N(e.target),i=U(g.date),n=U(t.val(),g.format,g.options.useStrict);n.isValid()&&!A(n)&&P(n)?(f(),g.setValue(n),r(i,e.type),j()):(g.viewDate=i,r(i,e.type),s(n),g.unset=!0)}function t(){g.widget.off("click",".datepicker *",g.click),g.widget.off("click","[data-action]"),g.widget.off("mousedown",g.stopEvent),g.options.pickDate&&g.options.pickTime&&g.widget.off("click.togglePicker"),g.isInput?g.element.off({focus:g.show,change:g.change}):(g.element.off({change:g.change},"input"),g.component?g.component.off("click",g.show):g.element.off("click",g.show))}function d(){N(window).off("resize.datetimepicker"+g.id),g.isInput||N(document).off("mousedown.datetimepicker"+g.id)}var u={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new U({y:1900}),maxDate:(new U).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1},h={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},g=this,p=function(){return g.isInput?g.element:dateStr=g.elem=e.datePickdate),void 0!==e.datePicktime&&(g.options.pickTime=e.datePicktime),void 0!==e.dateUseminutes&&(g.options.useMinutes=e.dateUseminutes),void 0!==e.dateUseseconds&&(g.options.useSeconds=e.dateUseseconds),void 0!==e.dateUsecurrent&&(g.options.useCurrent=e.dateUsecurrent),void 0!==e.dateMinutestepping&&(g.options.minuteStepping=e.dateMinutestepping),void 0!==e.dateMindate&&(g.options.minDate=e.dateMindate),void 0!==e.dateMaxdate&&(g.options.maxDate=e.dateMaxdate),void 0!==e.dateShowtoday&&(g.options.showToday=e.dateShowtoday),void 0!==e.dateCollapse&&(g.options.collapse=e.dateCollapse),void 0!==e.dateLanguage&&(g.options.language=e.dateLanguage),void 0!==e.dateDefaultdate&&(g.options.defaultDate=e.dateDefaultdate),void 0!==e.dateDisableddates&&(g.options.disabledDates=e.dateDisableddates),void 0!==e.dateEnableddates&&(g.options.enabledDates=e.dateEnableddates),void 0!==e.dateIcons&&(g.options.icons=e.dateIcons),void 0!==e.dateUsestrict&&(g.options.useStrict=e.dateUsestrict),void 0!==e.dateDirection&&(g.options.direction=e.dateDirection),void 0!==e.dateSidebyside&&(g.options.sideBySide=e.dateSidebyside)},f=function(e){U.lang(g.options.language);var t=e;t||((t=p().val())&&(g.date=U(t,g.format,g.options.useStrict)),g.date||(g.date=U())),g.viewDate=U(g.date).startOf("month"),b(),k()},v=function(){U.lang(g.options.language);var e,t=N("<tr>"),i=U.weekdaysMin();if(0==U.localeData().firstDayOfWeek())for(e=0;e<7;e++)t.append('<th class="dow">'+i[e]+"</th>");else for(e=1;e<8;e++)7==e?t.append('<th class="dow">'+i[0]+"</th>"):t.append('<th class="dow">'+i[e]+"</th>");g.widget.find(".datepicker-days thead").append(t)},y=function(){U.lang(g.options.language);for(var e="",t=0,i=U.monthsShort();t<12;)e+='<span class="month">'+i[t++]+"</span>";g.widget.find(".datepicker-months td").append(e)},b=function(){U.lang(g.options.language);var e,t,i,n,o,a,s,r,l=g.viewDate.year(),c=g.viewDate.month(),d=g.options.minDate.year(),u=g.options.minDate.month(),h=g.options.maxDate.year(),p=g.options.maxDate.month(),m=[],f=U.months();for(g.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),g.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),g.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),g.widget.find(".datepicker-days th:eq(1)").text(f[c]+" "+l),a=(e=U(g.viewDate).subtract("months",1)).daysInMonth(),e.date(a).startOf("week"),(l==d&&c<=u||l<d)&&g.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(l==h&&p<=c||h<l)&&g.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),t=U(e).add(42,"d");e.isBefore(t);){if(e.weekday()===U().startOf("week").weekday()&&(i=N("<tr>"),m.push(i)),n="",e.year()<l||e.year()==l&&e.month()<c?n+=" old":(e.year()>l||e.year()==l&&e.month()>c)&&(n+=" new"),e.isSame(U({y:g.date.year(),M:g.date.month(),d:g.date.date()}))&&(n+=" active"),!A(e)&&P(e)||(n+=" disabled"),!0===g.options.showToday&&e.isSame(U(),"day")&&(n+=" today"),g.options.daysOfWeekDisabled)for(o in g.options.daysOfWeekDisabled)if(e.day()==g.options.daysOfWeekDisabled[o]){n+=" disabled";break}i.append('<td class="day'+n+'">'+e.date()+"</td>"),e.add(1,"d")}for(g.widget.find(".datepicker-days tbody").empty().append(m),r=g.date.year(),f=g.widget.find(".datepicker-months").find("th:eq(1)").text(l).end().find("span").removeClass("active"),r===l&&f.eq(g.date.month()).addClass("active"),r-1<d&&g.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),h<r+1&&g.widget.find(".(l+9)).end().find("td"),g.widget.find(".datepicker-years").find("th").removeClass("disabled"),l<d&&g.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),h<l+9&&g.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),--l,o=-1;o<11;o++)m+='<span class="year'+(-1===o||10===o?" old":"")+(r===l?" active":"")+(l<d||h<l?" disabled":"")+'">'+l+"</span>",l+=1;s.html(m)},_=function(){U.lang(g.options.language);var e,t,i,n=g.widget.find(".timepicker .timepicker-hours table"),o="";if(n.parent().hide(),g.use24hours)for(t=e=0;t<6;t+=1){for(o+="<tr>",i=0;i<4;i+=1)o+='<td class="hour">'+O(e.toString())+"</td>",e++;o+="</tr>"}else for(eur">'+O(e.toStrin,w=function(){var e,t,i=g.widget.find(".timepicker .timepicker-minutes table"),n="",o=0,a=g.options.minuteStepping;for(i.parent().hide(),1==a&&(a=5),e=0;e<Math.ceil(60/a/4);e++){for(n+="<tr>",t=0;t<4;t+=1)o<60?(n+='<td class="minute">'+O(o.toString())+"</td>",o+=a):n+="<td></td>";n+="</tr>"}i.html(n)},C=function(){var e,t,i=g.widget.find(".timepicker .timepicker-seconds table"),n="",o=0;for(i.parent().hide(),e=0;e<3;e++){for(n+="<tr>",t=0;t<4;t+=1)n+='<td class="second">'+O(o.toString())+"</td>",o.hours(),i="AM",g.use24hours||(12<=t&&(i="PM"),0===t?t=12:12!=t&&(t%=12),g.widget.find(".timepicker [data-action=togglePeriod]").text(i)),e.filter("[data-time-component=hours]").text(O(t)),e.filter("[data-time-component=minutes]").text(O(g.date.minutes())),e.filter("[data-time-component=s1)},incrementMinutes:function(){E("add","minutes",g.options.minuteStepping)},incrementSeconds:function(){E("add","seconds",1)},decrementHours:function(){E("subtract","hours",1)},decrementMinutes:function(){E("subtract","minutes",g.options.minuteStepping)},decrementSeconds:function(){E("subtract","seconds",1)},togglePeriod:function(){var e=g.date.hours();12<=e?e-=12:e+=12,g.date.hours(e)},showPicker:function(){g.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),g.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){g.widget.find(".timepicker .timepicker-picker").hide(),g.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){g.widget.find(".timepicker .timepicker-picker").hide(),g.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){g.widget.find(".timepicker .timepicker-picker").hide(),g.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var t=g.widget.find(".timepicker [data-action=togglePeriod]").text(),i=parseInt(N(e.target).text(),10);"PM"==t&&(i+=12),g.date.hours(i),x.showPicker.call(g)},selectMinute:function(e){g.date.minutes(parseInt(N(e.target).text(),10)),x.showPicker.call(g)},selectSecond:function(e){g.date.seconds(parseInt(N(e.target).text(),10)),x.showPicker.call(g)}},S=function(e){e.stind(".datepicker > div").hide().filter(".datepicker-"+R.modes[g.viewMode].clsName).show()},$=function(){var t,i,n,o,a;g.widget.on("click",".datepicker *",N.proxy(e,this)),g.widget.on("click","[data-action]",N.proxy(l,this)),g.widget.on("mousedown",N.proxy(S,this)),g.options.pickDate&&g.options.pickTime&&g.widget.on("click.togglePicker",".accordion-toggle",function(e){if(e.stopPropagation(),t=N(this),i=t.closest("ul"),n=i.find(".in"),o=i.find(".collapse:not(.in)"),n&&n.length){if((a=n.data("collapse"))&&a.date-transitioning)return;n.collapse("hide"),o.collapse("show"),t.find("span").toggleClass(g.options.icons.time+" "+g.options.icons.date),g.element.find(".input-group-addon span").toggleClass(g.options.icons.time+" "+g.options.icons.date)}}),g.isInput?g.element.on({focus:N.proxy(g.show,this),change:N.proxy(c,this),blur:N.proxy(g.hide,this)}):(g.element.on({change:N.proxy(c,this)},"input"),g.component?g.component.on("click",N.proxy(g.show,this)):g.element.on("click",N.proxy(g.show,this)))},I=function(){if(g.element){for(var e=g.element.parents(),t=!1,i=0;i<e.length;i++)if("fixed"==N(e[i]).css("position")){t=!0;break}return t}return!1},j=function(){U.lang(g.options.language);var e="";g.unset||(e=U(g.date).format(g.format)),p().val(e),g.element.data("date",e),g.options.pickTime||g.hide()},E=function(e,t,i){var n;U.lang(g.options.language),"add"==e?(23==(n=U(g.date)).hours()&&n.add(i,t),n.add(i,t)):n=U(g.date).subtract(i,t),A(U(n.subtract(i,t)))||A(n)?s(n.format(g.format)):("add"==e?g.date.add(i,t):g.date.subtract(i,t),g.unset=!1)},A=function(e){return U.lang(g.options.language),!(!e.isAfter(g.options.maxDate)&&!e.isBefore(g.options.minDate))||!1!==g.options.disabledDates&&!0===g.options.disabledDates[U(e).format("YYYY-MM-DD")]},P=function(e){return U.lang(g.options.language),!1===g.options.enabledDates||!0===g.options.enabledDates[U(e).format("YYYY-MM-DD")]},M=function(e){var t={},n=0;for(i=0;i<e.length;i++)dDate=U(e[i]),dDate.isValid()&&(t[dDate.format("YYYY-MM-DD")]=!0,n++);return 0<n&&t},O=function(e){return 2<=(e=e.toString()).length?e:"0"+e},D=function(){if(g.options.pickDate&&g.options.pickTime){var e="",e='<div class="bootstrap-datetimepicker-widget'+(g.options.sideBySide?" timepicker-sbs":"")+' dropdown-menu" style="z-index:9999 !important;">';return g.options.sideBySide?e+='<div class="row"><div class="col-sm-6 datepicker">'+R.template+'</div><div class="col-sm-6 timepicker">'+F.getTemplate()+"</div></div>":e+='<ul class="list-unstyled"><li'+(g.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+R.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+g.options.icons.time+'"></span></a></li><li'+(g.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+F.getTemplate()+"</div></24hours?""uteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(g.options.useSeconds?'<td class="separator">:</td><td>'+F.secondTemplate+"</td>":"")+(g.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+g.options.icons..options.icons.down+'"></span></a>':"")+"</td>"+(g.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+g.options.icons.down+'"></span></a></td>':"")+(g.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(g.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},g.destroy=function(){t(),d(),g.widget.remove(),g.element.removeData("DateTimePicker")ateTimePicoptions.minuteStepping?(t=U(),i=g.options.minuteStepping,t.minutes(Math.round(t.minutes()/i)*i%(U().format(g.format))),g.widget.show(),g.height=g.component?g.component.outerHeight():g.element.outerHeight(),a(),g.element.trigger({type:"dp.show",date:U(g.date)}),function(){N(window).on("resize.datetimepicker"+g.id,N.proxy(a,this)),g.isInput||N(document).on("mousedown.datetimepicker"+g.id,N.proxy(g.hide,this))}(),e&&S(e)},g.disable=function(){var e=g.element.find("input");e.prop("disabled")||(e.prop("disabled",!0),t())},g.enable=function(){var e=g.element.find("input");e.prop("disabled")&&(e.prop("disabled",!1),$())},g.hide=function(e){if(!e||!N(e.target).is(g.element.attr("id"))){for(var t,i=g.widget.find(".collapse"),n=0;n<i.length;n++)if((t=i.eq(n).data("collapse"))&&t.date-transitioning)return;g.widget.hide(),g.viewMode=g.startViewMode,T(),g.element.trigger({type:"dp.hide",date:U(g.date)}),d()}},g.setValue=function(e){U.lang(g.options.language),e?g.unset=!1:(g.unset=!0,j()),U.isMoment(e)||(e=U(e,g.format)),e.isValid()?(g.date=e,j(),g.viewDate=U({y:g.date.year(),M:g.date.month()}),b(),k()):s(e)},g.getDate=function(){return g.unset?null:g.date},g.setDate=function(e){var t=U(g.date);e?g.setValue(e):g.setValue(null),r(t,"function")},g.setDisabledDates=function(e){g.options.disabledDates=M(e),g.viewDate&&f()},g.setEnabledDates=function(e){g.options.enabledDates=M(e),g.viewDate&&f()},g.setMaxDate=function(e){null!=e&&(g.options.maxDate=U(e),g.viewDate&&f())},g.setMinDate=function(e){null!=e&&(g.options.minDate=U(e),g.viewDate&&f())},function(){var e,t,i=!1;if(g.options=N.extend({},u,o),g.options.icons=N.extend({},h,g.options.icons),g.element=N(n),m(),!g.options.pickTime&&!g.options.pickDate)throw new Error("Must choose at least one picker");if(g.id=B++,U.lang(g.options.language),g.date=U(),g.unset=!1,g.isInput=g.element.is("input"),g.component=!1,g.element.hasClass("input-group")&&(0==g.element.find(".datepickerbutton").size()?g.component=g.element.find("[class^='input-group-']"):g.component=g.element.find(".datepickerbutton")),g.format=g.options.format,e=U.localeData(),g.format||(g.format=g.options.pickDate?e.longDateFormat("L"):"",g.options.pickDate&&g.options.pickTime&&(g.format+=" "),g.format+=g.options.pickTime?e.longDateFormat("Ls"addClass(g.options.icons.time)),g.opicker=ypeof ),void 0!==t&&t)}return n.settings.debug&&i.prmit=!1,cusInvalidconsole.warn(").is("form")?e=thiszeRule(t)),delete o.messages,n[l.name]=o,t.messages&&(i.messages[l.name]=d.extend(i.messages[l.name],t.messages));break;case"remove":return t?(r={},d.each(t.split(/\s/),function(e,t){r[t]=o[t],delete o[t],"required"===t&&d(l).removeAttr("aria-required")}),r):(delete n[l.name],otend({requi,{remotern!d(e).his.init()},d.validator.format=function(i,e){return 1===arguments.length?function(){var e=d.makeArray(arguments);return e.unshift(i),d.vali1)),e.constru=i.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),i)},d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==d.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.dd(thle")&&(thi!d(this), [type='raired").attors(),this.valrepareElement(o),d.each(this.gnTargetFor(a.clean(a.findByName(e))))&&n.name in a.invalid&&(t,thisvalids()||(this.toHide=this.toHide.add(this.containers)),thlement:i.findByings.showss,"")removeCvalids:functionrn i},function(e){n(){return 0===h},focusInvaltarea,io"===o||"checkboxN":n.val():(t=(0,12)?t.subof t?t.replace(ethods[i].calAndAdd(t,n)when checking elemvar i=this.fine,t.method),!thitrong>WarndWrapper(t,o,a,s=this.ereClass(th=d("<"+this.settings.wrapper&&"/>").parenacement?thescapeC.name])&&(a=this,d.ea,t){t==currentFo,s.attr("iuccess):this.).attr("ariame(e.name)),d(sMeta(e)er(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,lementValues.pendingClass),this.peettings.pendinge,t){returm).off(".valttings:{requirees:function(e)toUpperCasvalidator.normalizm).length;break;case"function":i=t.depends.call(o,o)}i?n[e]=void 0===t.param||t.param:(d.data(o.form,"validator").resetElements(d(o)),delete n[e])}}else delete n[e]}),d.each(n,function(e,t){n[e]=d.isFunction(t)&&"normalizer"!==e?t(o):t}),d.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),d.each(["rangelength","range"],function(){var e;n[this]&&(d.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(e=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(e[0]),Number(e[1])]))}),d.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength&&null!=n.maxlength&&(nrmalizeRule:function(e){var t;return"string"==typeof e&&(t={},d.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,i){d.validator.methods[e]=t,d.validator.messages[e]=void 0!==i?i:d.validator.messages[e],alizeRule(e))},methods:{required:function(e,t,i){if(!this.depend(i,t))return"dependency-mismatch";if("select"!==t.n);return n&&[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zAction()(?:\)(?::\d{](0?[1-est(["text","number","range"].join()))throw new Erroro:function(e,t,i){mote:function(a,s,e,r){if(this.optional(s))r"remote";var l,t,i,c=this.p||(this.settings.messages[s.name]={}),c.originalMessage=c.originalMessage||this.settings.messages[s.name][r],this.settings.messages[s.name][r]=c.message,e="string"==typeof e?{url:e}:e,i=d.param(d.extend({data:a},e.data)),c.old===i?c.valid:(c.old=i,(l=this).startRequest(s),(t={})[s.name]=a,d.ajax(d.extend(!0,{mode:"abort",port:"validate"+s.name,dataType:"json",data:t,context:l.currentForm,success:function(e){var t,i,n,o=!0===e||"true"===e;l.settings.messages[s.name][r]=c.originalMessage,o?(n=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(s),l.formSubmitted=n,l.successList.push(s),l.invalid[s.name]=!1,l.showErrors()):(t={},i=e||l.defaultMessage(s,{method:r,parameters:a}),t[s.name]=c.message=i,l.invalid[s.name]=!0,l.showErrors(t)),c.valid=o,l.stopRequest(s,o)}},e)),"pending")}}});var n,o={};return d.ajaxPrefilter?d.ajaxPrefilter(function(e,t,i){var n=e.port;"abort"===e.mode&&(o[n]&&o[n].abort(),o[n]=i)}):(n=d.ajax,d.ajax=function(e){var t=("mode"in e?e:d.ajaxSettings).mode,i=("port"in e?e:d.ajaxSettings).port;return"abort"===t?(o[i]&&o[i].abort(),o[i]=n.apply(this,arguments),o[i]):n.apply(this,arguments)}),d}),function(e){e.fn.hl_accessibility_hide=function(){this.hide(),this.attr("aria-hidden",!0)},e.fn.hl_accessibility_show=function(){this.show(),this.removeAttr("aria-hidden")}}(jQuery),function(a){a.fn.hl_custom_ala_communicationAndAddress=function(e){var t=a.extend({controlId:"",userKey:""},e||{}),i=a(this),n=(i.closest(".ala-communication-and-address"),"/higherlogic/ui/mvc/custom/ala");function o(){hl_common_ui_blockUI();var e={userKey:t.userKey};HigherLogic.Util.post(n+"/EditCommunicationAndAddressModalPartial",JSON.stringify(e),"html").done(function(e){i.find(".edit-comm-address-modal-container").html(e),hl_common_ui_unBlockUI()})}a(t.controlId+"-editBtn").click(o)}}(jQuery),function(r){r.fn.hl_custom_ala_editCommunicationAndAddressModal=function(e){var o=r.extend({modalOpts:{show:!0,backdrop:"static",keyboard:!1},controlId:"",userKey:"",communicationAndAddress:{}},e||{}),a=r(this),t=a.closest(".ala-communication-and-address"),i=a.closest(".edit-comm-address-modal-container"),n="/higherlogic/ui/mvc/custom/ala";function s(){a.modal("hide"),i.empty()}a.modal(o.modalOpts),a.find(".close-btn").click(s),r(o.controlId+"-saveBtn").click(function(e){!function(){var t=!0;a.find(".required").each(function(e){hl_common_util_stringIsNullOrWhiteSpace(r(this).find(":input").val())?(t=!1,hl_common_util_addHasError(this),r(this).find(".help-block").show()):(hl_common_util_removeHasError(this),r(this).find(".help-block").hide())});var i=!0,n=!0;r(o.controlId+"-address1Panel").find(".address-required").each(function(e){hl_common_util_stringIsNullOrWhiteSpace(r(this).val())&&(i=!1)}),r(o.controlId+"-address2Panel").find(".address-required").each(function(e){hl_common_util_stringIsNullOrWhiteSpace(r(this).val())&&(n=!1)}),i||n?(a.find(".address-warning").show(),a.find(".address-danger").hide()):(t=!1,a.find(".address-warning").hide(),a.find(".address-danger").show());{var e;t||(0===(e=a.find(".has-error").first()).length?r(document).scrollTop(a.find(".address-danger").offset().top):r(document).scrollTop(e.offset().top))}return t}()||function(){hl_common_ui_blockUI();var e={UserKey:o.userKey,CommunicationAndAddress:{HomePhone:r(o.controlId+"-homePhone").val(),WorkPhone:r(o.controlId+"-workPhone").val(),Fax:r(o.controlId+"-fax").val(),EmailAddress:r(o.controlId+"-emailAddress").val(),CommunicationsLevel:r(o.controlId+"-communicationsLevel").val(),Delivery:r(o.controlId+"-delivery").val(),PreferredMailingAddress:r(o.controlId+"-preferredMailingAddress").val(),PreferredBillingAddress:r(o.controlId+"-preferredBillingAddress").val(),OrganizationAddress:{Address1:r(o.controlId+"-orgAddress1").val(),Address2:r(o.controlId+"-orgAddress2").val(),City:r(o.controlId+"-orgAddressCity").val(),State:r(o.controlId+"-orgAddressState").val(),Country:r(o.controlId+"-orgAddressCountry").val(),PostalCode:r(o.controlId+"-orgAddressPostalCode").val()},HomeAddress:{Address1:r(o.controlId+"-homeAddress1").val(),Address2:r(o.controlId+"-homeAddress2").val(),City:r(o.controlId+"-homeAddressCity").val(),State:r(o.controlId+"-homeAddr-homeAddressCountry").val(),PostalCode:r(o.controlId+"-homeAddressPostalCode").val()}}};HigherLogic.Util.post(n+"/SaveCommunicationAndAddress",JSON.stringify(e),"html").done(function(e){a.modal("hide"),hl_common_ui_unBlockUI(),t.html(e)})}()}),r(o.controlId+"-communicationsLevel").val(o.communicationAndAddress.CommunicationsLevel),r(o.controlId+"-delivery").val(o.communicationAndAddress.Delivery),r(o.controlId+"-preferredMailingAddress").val(o.communicationAndAddress.PreferredMailingAddress),r(o.controlId+"-preferredBillingAddress").val(o.communicationAndAddress.PreferredBillingAddress),r(o.controlId+"-orgAddressState").val(o.communicationAndAddress.OrganizationAddress.State),r(o.controlId+"-orgAddressCountry").val(o.communicationAndAddress.OrganizationAddress.Country),r(o.controlId+"-homeAddressState").val(o.communicationAndAddress.HomeAddress.State),r(o.controlId+"-homeAddressCountry").val(o.communicationAndAddress.HomeAddress.Country)}}(jQuery),function(r){r.fn.hl_custom_ala_editUserDetailsModal=function(e){var t=r.extend({modalOpts:{show:!0,backdrop:"static",keyboard:!1},controlId:"",userKey:"",userDetails:{}},e||{}),i=r(this),n=i.closest(".ala-user-details"),o=i.closest(".edit-user-details-modal-container"),a="/higherlogic/ui/mvc/custom/ala";function s(){i.modal("hide"),o.empty()}i.modal(t.modalOpts),i.find(".selectpicker").selectpicker(),i.find(".close-btn").click(s),r(t.controlId+"-saveBtn").click(function(e){!function(){var t=!0;{var e;i.find(".required").each(function(e){hl_common_util_stringIsNullOrWhiteSpace(r(this).find(":input").val())?(t=!1,hl_common_util_addHasError(this),r(this).find(".help-block").show()):(hl_common_util_removeHasError(this),r(this).find(".help-block").hide())}),t||(e=i.find(".has-error").first(),r(document).scrollTop(e.offset().top))}return t}()||function(){hl_common_ui_blockUI();var e={UserKey:t.userKey,UserDetails:{IDNumber:t.userDetails.IDNumber,Prefix:r(t.controlId+"-prefix").val(),FirstName:r(t.controlId+"-firstName").val(),MiddleName:r(t.controlId+"-middleName").val(),LastName:r(t.controlId+"-lastName").val(),Suffix:r(t.controlId+"-suffix").val(),CompanyName:r(t.controlId+"-orgCompanyName").val(),Title:r(t.controlId+"-title").val(),PrincipalWorkAreas:r(t.controlId+"-principalWorkArea").val(),ResponsibilityTypes:r(t.controlId+"-typeOfResponsibility").val(),OrgType:r(t.controlId+"-typeOfLibraryOrOrg").val(),Interests:r(t.controlId+"-interests").val(),Ethnicity:r(t.controlId+"-ethnicity").val(),ExcludeFromDirectory:!("true"===r(t.controlId+"-includeInDirectory").val()),ExcludeFromHandbook:!("true"===r(t.controlId+"-includeInHandbook").val())}};HigherLogic.Util.post(a+"/SaveUserDetails",JSON.stringify(e),"html").done(function(e){i.modal("hide"),hl_common_ui_unBlockUI(),n.html(e)})}()}),r(t.controlId+"-prefix").val(t.userDetails.Prefix),r(t.controlId+"-suffix").val(t.userDetails.Suffix),r(t.controlId+"-principalWorkArea").selectpicker("val",t.userDetails.PrincipalWorkAreas),r(t.controlId+"-typeOfResponsibility").selectpicker("val",t.userDetails.ResponsibilityTypes),r(t.controlId+"-typeOfLibraryOrOrg").selectpicker("val",t.userDetails.OrgType),r(t.controlId+"-interests").selectpicker("val",t.userDetails.Interests),r(t.controlId+"-ethnicity").selectpicker("val",t.userDetails.Ethnicity),r(t.controlId+"-includeInDirectory").val((!t.userDetails.ExcludeFromDirectory).toString()),r(t.controlId+"-includeInHandbook").val((!t.userDetails.ExcludeFromHandbook).toString())}}(jQuery),function(a){a.fn.hl_custom_ala_userDetails=function(e){var t=a.extend({controlId:"",userKey:""},e||{}),i=a(this),n=(i.closest(".ala-user-details"),"/higherlogic/ui/mvc/custom/ala");function o(){hl_common_ui_blockUI();var e={userKey:t.userKey};HigherLogic.Util.post(n+"/EditUserDetailsModalPartial",JSON.stringify(e),"html").done(function(e){i.modal("hide"),i.find(".edit-user-details-modal-container").html(e),hl_common_ui_unBlockUI()})}a(t.controlId+"-editBtn").click(o)}}(jQuery),function(l){l.fn.hl_ui_cms_syndicatedcontent=function(e){var i=l.extend({controlId:"",navigationId:""},e||{}),n=l(i.controlId).parent(),o="/higherlogic/ui/mvc/microsites/content",a=l(i.controlId+"-syndicatedFromOptions"),s=l(i.controlId+"-syndicatedPageOpts");function t(){var e={ControlId:i.controlId.substring(1),NavigationKey:i.navigationId,SyndicatedContentSiteCategory:a.find(":selected").val().trim(),SyndicatedContentNaviagtionKey:a.find(":selected").text().trim(),SyndicatedContentCurrentPageCode:s.find(":selected").val().trim(),ReturnPath:n.data("returnpath")},t=a.closest("div.syndicatedContentPartial");hl_common_ui_blockUI(),l.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"html",url:o+"/SyndicatedContentChange",success:function(e){t.html(e),hl_common_ui_unBlockUI()}})}function r(){l(i.controlId+"-editSyndicatedPageLink").closest("label.control-label").attr("hidden","")}a.selectpicker().on("changed.bs.select",t),s.selectpicker().on("changed.bs.select",r)}}(jQuery),function(E){E.fn.hl_ui_cms_content=function(e){var o,l=E.extend({controlId:"",guidEmpty:"",contentTypeFileUpload:"ctFileUpload",contentTypeHtml:"ctHtml",contentTypeReact:"ctReact",contentTypeHyperlink:"ctHyperlink",contentTypeJavascript:"ctJavascript",contentTypeSyndicatedContent:"ctSyndicatedContent",contentTypeWidget:"ctWidget",jsContentUrl:"jsContentUrl",jsContentEmbedded:"jsContentEmbedded",fileExts:[],fsSetKey:"",fsFromSources:[]},e||{}),d=this,c=d.parent(),u=c.data("contentkey"),h="/higherlogic/ui/mvc/microsites/content",t=E(l.controlId+"-ContentTypeOptions"),p=E(l.controlId+"-fileUploadContainer"),i=p.find(".upload-status");function n(){E(l.controlId+"-expandAll,"+l.controlId+"-collapseAll").click(function(){var e;e="expandall"===E(this).data("name"),E.each(d.find(".panel-group .panel"),function(){e?(E(this).find(".panel-collapse").removeClass("collapse").addClass("in"),E(this).find(".panel-heading a").removeClass("collapsed")):(E(this).find(".panel-collapse").addClass("collapse").removeClass("in"),E(this).find(".panel-heading a").addClass("collapsed"))})})}function m(e){var t=e.match(/[\Sah(t,function(){var e=this.split("=");i.push({Key:e[0],Value:e[1].replace(/["]+/g,"")})}),i}function f(e){var t="";return E.each(e,function(){t+=this.Key+'="'+this.Value+'" '}),t}function a(){d.find(".param-as-text .hl-bootstrap-switch").bootstrapSwitch();var t=E(l.controlId+"-dvViewParamAsText"),e=E(l.controlId+"-btnCopyToClipboard"),i=E(l.controlId+"-tbParameterList"),n=E(l.controlId+"-btnSaveParameterList");E(l.controlId+"-btnModalClose,"+l.controlId+"-btnModalCancel").click(function(){i.val(i.data("originaldata")),E(l.controlId+"-cbEnableParameterListTextArea").bootstrapSwitch("state",!1),n.attr("disabled","disabled")}),t.on("show.bs.modal",function(){e.on("mouseout",function(){E(this).tooltip("disable")}),(o=new Clipboard(l.controlId+"-btnCopyToClipboard")).on("success",function(e){E(e.trigger).data("bs.tooltip",null),E(e.trigger).tooltip({title:"Copied!",placement:"bottom",viewport:"#viewport"}),E(e.trigger).tooltip("show"),e.clearSelection()}),o.on("error",function(e){E(e.trigger).data("bs.tooltip",null),E(e.trigger).tooltip({title:"Please use Ctrl+C/Cmd+C to copy",placement:"bottom",viewport:"#viewport"}),E(e.trigger).tooltip("show")}),E(l.controlId+"-cbEnableParameterListTextArea").on("switchChange.bootstrapSwitch",function(e,t){t?i.removeAttr("readonly"):i.attr("readonly",!0)}),i.on("change keyup mouseup",function(){i.val()===i.data("originaldata")?n.attr("disabled","disabled"):n.removeAttr("disabled")})}),n.click(function(){t.modal("hide"),hl_common_ui_blockUI();var c=m(i.val());E.each(d.find("[data-pname]"),function(){var i=E(this).data("pname"),e=E(this).data("ptype"),t=E(this).closest(".parameter-name-value"),n=E(t.find(".widget-target-element")[0]);S(t);var o="boolean"===e,a=E.map(c,function(e,t){if(e.Key===i)return t}),s=c[a[0]];if(E.isEmptyObject(s))o?(E(this).data("pvalue",""),n.bootstrapSwitch("state","true"===E(this).data("pdefaultvalue").toString().trim().toLowerCase())):(E(this).data("pvalue",""),n.val(""),n.is("select")&&n.selectpicker("refresh"),n.hasClass("businessobject-contact")&&(n.tagit("destroy"),$(n)));else{var r,l=!1;switch(e){case"boolean":l="true"!==s.Value.toString().trim().toLowerCase()&&"false"!==s.Value.toString().trim().toLowerCase();break;case"dropdown":l=!0,E.each(E(E(this).children("select")[0]).find("option"),function(){if(!hl_common_util_stringIsNullOrWhiteSpace(E(this).val())&&E(this).val().toLowerCase()===s.Value.trim().toLowerCase())return l=!1});break;case"guid":l=!(hl_common_util_isGuid(s.Value)||function(e){var t=!0;0<e.indexOf(",")&&E.each(e.split(","),function(){hl_common_util_isGuid(this)||(t=!1)});if(!t)return!1;0<e.indexOf("|")&&E.each(e.split("|"),function(){hl_common_util_isGuid(this)||(t=!1)});return t}(s.Value));break;case"integer":l=!hl_common_util_isInt(s.Value)}l?(o?(E(this).data("pvalue",""),n.bootstrapSwitch("state","true"===E(this).data("pdefaultvalue").trim().toLowerCase())):(E(this).data("pvalue",""),n.val(""),n.is("select")&&n.selectpicker("refresh"),n.hasClass("businessobject-contact")&&(n.tagit("destroy"),$(n))),t.addClass("has-warning"),E(t.find(".hidden-warning-container.help-block")[0]).show(),c.splice(a[0],1)):(o&&(s.Value="true"===s.Value.toString().trim().toLowerCase()),E(this).data("pvalue",s.Value),o?n.bootstrapSwitch("state",s.Value):n.hasClass("businessobject-contact")?(n.data("tagid",s.Value),E.ajax({url:"/higherlogic/ui/mvc/directory/directory/FindContactByKey/",type:"POST",data:JSON.stringify({contactKey:s.Value}),async:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){r=e.FirstName+" "+e.LastName}}),n.val(r),n.tagit("destroy"),$(n)):(hl_common_util_isGuid(s.Value)?n.val(s.Value):0<s.Value.indexOf(",")?n.val(s.Value.split(",")):0<s.Value.indexOf("|")?n.val(s.Value.split("|")):"integer"===E(this).data("ptype")&&n.val(s.Value),n.is("select")&&n.selectpicker("refresh")))}}),i.data("originaldata",i.val()),E(l.controlId+"-hypViewParamAsText").data("paramlist-string",f(c)),E(l.controlId+"-cbEnableParameterListTextArea").bootstrapSwitch("state",!1),hl_common_ui_unBlockUI()}),t.on("hide.bs.modal",function(){o.destroy(),n.prop("disabled")||n.attr("disabled","disabled")}),0<E(l.controlId+"-oldParameterListBox").length&&E(l.controlId+"-oldParameterListBox").dblclick(s),E(l.controlId+"-hypViewParamAsText").click(function(){var o,e;E(l.controlId+"-WidgetContentTypes").val()!==l.guidEmpty&&(hl_common_ui_blockUI(),o=m(E(this).data("paramlist-string")),E.each(d.find("[data-pname]"),function(){var e,t=E(this).data("pvalue").toString().trim().toLowerCase(),i=E(this).data("pname"),n=E(this).data("pdefaultvalue").toString().trim().toLowerCase();hl_common_util_stringIsNullOrWhiteSpace(t)||(0<(e=E.map(o,function(e,t){if(e.Key===i)return t})).length?t===n?o.splice(e[0],1):o[e[0]].Value=E(this).data("pvalue"):hl_common_util_stringIsNullOrWhiteSpace(n)||t===n||o.push({Key:i,Value:E(this).data("pvalue")}))}),e=f(o),i.val(e),i.data("originaldata",e),i.val()?(t.modal("show"),hl_commoers",JSON.stringify({isMvc:E(l.controlId+"-WidgetParameters").data("ismvc"),path:E(this).data("content-path")})).done(function(e){E.each(e,function(){if(this.Visible){var e;switch(this.Type){case"String":e="Text";break;case"Int32":e="Number";break;case"Guid":e="Key";break;case"Boolean":e="True or False";break;case"DateTime":e="Date";break;default:e=this.Type}0<E(l.controlId+"-oldParameterListBox").length&&E(l.controlId+"-oldParameterListBox").append("<option>"+this.Name+" - "+e+"</option>")}}),t.modal("show"),hl_common_ui_unBlockUI()}))})}function s(){var e=this.value.substring(0,this.value.indexOf("-")-1)+'=" "',t=E(l.controlId+"-tbParameterList");t.removeAttr("disabled"),0===t.val().length?t.val(e):t.val(t.val()+"\n"+e),E(l.controlId+"-cbEnableParameterListTextArea").bootstrapSwitch("state",!0)}function r(){d.find(".hl-bootstrap-switch.boolean").bootstrapSwitch().on("switchChange.bootstrapSwitch",function(e,t){I(this,t);var i,n=E(this).closest(".bswitch-container").find(".content-type-parameter-children");n.length&&(i=E(n[0]).data("showchildrenonno"),!t&&i||t&&!i?n.slideDown(250):n.slideUp(250))}),E.each(d.find("input.businessobject-contact"),function(){$(this)}),E.each(d.find(l.controlId+"-userControlParameter-LibraryKey"),function(){E(this).selectpicker().on("changed.bs.select",k)}),E.each(d.find("select.businessobject-lfolder"),function(){E(this).selectpicker().on("changed.bs.select",function(){var e=E(this).val();I(this,e!==l.guidEmpty?e:"")})}),d.find(l.controlId+"-userControlParameter-LibraryKey").trigger("changed.bs.select"),E.each(d.find("select.businessobject-others"),function(){E(this).selectpicker().on("changed.bs.select",function(){var e=null===E(this).val()?l.guidEmpty:E(this).val().constructor===Array?E(this).val().join(","):E(this).val();I(this,e!==l.guidEmpty?e:"")})}),E.each(d.find("input.widget-parameter-default"),function(){E(this).change(function(){I(this,E(this).val())})}),E.each(d.find("select.to-selectpicker"),function(){E(this).selectpicker().on("changed.bs.select",function(){I(this,E(this).val())})}),E.each(d.find("input.number"),function(){E(this)al())})}),n()}function g(){HigherLogic.Common.FilestackExt.Cms.openFs(l.fsSetKey,l.fsFromSources,l.fileExts,v,i)}function v(e){hl_common_ui_blockUI();var t={filename:e[0].key,container:e[0].container,mimeType:e[0].mimetype,size:e[0].size,originalFilename:e[0].filename};p.data("documentFile",t),E(l.controlId+"-fileUpldFilename").html(E(l.controlId+"-fileUpldFilename").data("htmltemplate").replace(/\{0\}/g,t.originalFilename).replace(/\{1\}/g,hl_common_util_getFileSizeText(t.size))),p.data("filename",t.originalFilename),p.find(".uploaded-file").show(),p.find(".empty-file-container").hide(),p.data("isnew",!0),p.data("isready",!1),i.html(i.data("successtemplate")),i.show(),0<E("img#file-upload-img").length&&E("img#file-upload-img").remove(),hl_common_ui_unBlockUI()}function y(e,t,i,n){var o=p.find(".filename");switch(o.removeClass("failed"),t.StatusCode){case"Complete":p.data("isready",!0),p.find(".change-block").hl_accessibility_show(),p.find(".name").hl_accessibility_hide(),p.find(".link").attr("href",t.Url).hl_accessibility_show();break;case"Failed":o.addClass("failed"),p.find(".change-block").hl_accessibility_show();break;default:p.find(".change-block").hl_accessibility_hide()}e&&"Failed"!==t.ContactInfoStatusCode&&"Complete"===t.StatusCode?setTimeout(function(){n.fadeOut(),n.html("")},5e3):t.FileName.replace("HLProcessing_","")!==p.data("filename")&&null!==i&&clearTimeout(i)}function b(e){var i=E(e);if(i.data("hasError")){var t=E(d.find(".has-error")[0]);return E(document).scrollTop(t.offset().top),void hl_common_ui_unBlockUI()}var n=_(),o="",a=E(l.controlId+"-ContentTypeOptions");switch(a.val()){case l.contentTypeFileUpload:o="F";var s=p.data("documentFile");n.FileUploadIsNew=p.data("isnew"),n.FileUploadIsNew&&!i.data("hasError")&&(n.FileUploadContainer=s.container,n.FileUploadFilename=s.filename,n.FileUploadMimetype=s.mimeType,n.FileUploadFileSize=s.size,n.FileUploadOriginalFilename=s.originalFilename,p.data("isnew",!1));break;case l.contentTypeHtml:o="H",n.HtmlContent=encodeURIComponent(E(l.controlId+"-tinyMceHtml").val());break;case l.contentTypeReact:o="R",n.ReactContent=E(l.controlId+"-ReactHtml").val();break;case l.content.controlId+"-JavascriptTypeOptions").val()!==l.jsContentUrl,n.IsJsInline?n.JsText=encodeURIComponent(E(l.controlId+"-taJavascriptEmbedded").val().trim()):(n.JsIsHttpSelected="http://"===E(l.controlId+"-jsBtnSelector").data("selectorvalue"),n.JsText=E(l.controlId+"-tbJavascriptUrl").val());break;case l.contentTypeHyperlink:o="L",n.Hyperlink=E(l.controlId+"-hyperlink").val(),n.HyperlinkOpenInNewWindow=E(l.controlId+"-openHyperlinkNewWindow").prop("checked"),n.HyperlinkRedirectCode=E(l.controlId+"-redirectTypeOptions").val();break;case l.contentTypeSyndicatedContent:o="S",n.SyndicatedSiteKeyText=E(l.controlId+"-syndicatedFromOptions").find(":selected").val(),n.SyndicatedNavigationCode=E(l.controlId+"-syndicatedPageOpts").find(":selected").val();break;case l.contentTypeWidget:o=E(l.controlId+"-WidgetParameters").data("ismvc")?"M":"W",n.UserControlParameters="";var r=m(E(l.controlId+"-hypViewParamAsText").data("paramlist-string"));E.each(d.find("[data-pname]"),function(){var e,t=E(this).data("pvalue").toString(),i=E(this).data("pdefaultvalue").toString().trim().toLowerCase(),n=E(this).data("pname");(E(this).data("ischildparameter")&&E(E(this).closest(".content-type-parameter-children")[0]).is(":visible")||!E(this).data("ischildparameter"))&&(0<(e=E.map(r,function(e,t){if(e.Key===n)return t})).length?hl_common_util_stringIsNullOrWhiteSpace(t)||t===i?r.splice(e[0],1):r[e[0]].Value=t:hl_common_util_stringIsNullOrWhiteSpace(t)||t===i||r.push({Key:n,Value:t}))}),n.UserControlParameters=f(r),n.ContentPath=E(l.controlId+"-WidgetParameters").data("contentpath")}n.ContentTypeIndicator=o,E.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:h+"/SaveContentEdit",data:JSON.stringify(n),success:function(e){if(hl_common_ui_unBlockUI(),e.Success){if(c.data("contentkey",e.ContentKey),u=e.ContentKey,c.data("ishlonly")&&(E(l.controlId+"-tbCustomWidgetName").val(e.ContentPath),E(l.controlId+"-btnCustomWidgetName").removeAttr("disabled")),a.val()===l.contentTypeSyndicatedContent&&onSyndicatedTypeSaveAndStay(l,c.data("navigationkey")),i.data("returntosite"))return void(location.href=c.data("returnpath"));if(!i.data("isstay"))return void(location.href=c.data("sitenavigationurl"));var t=hl_common_util_updateQueryStringParameter(location.href,"ContentKey",e.ContentKey);void 0===history.pushState?location.href=t:history.pushState(e,null,t),a.val()===l.contentTypeFileUpload&&T()}else hl_common_ui_showBootstrapDialog(l.controlId.substr(1)+"-error","Close",E("title").text().trim()+" - Error",e.Message,"cms modal-md")}})}function _(){var e=E(l.controlId+"-cbLockContent");return{ContentKey:c.data("contentkey"),NavigationKey:c.data("navigationkey"),SecurityValue:E(l.controlId+"-EditContentSecurity-MainInput").data("securityvalue"),ShowTitleFlag:E(l.controlId+"-ShowTitle").prop("checked"),Title:E(l.controlId+"-Title").val(),VisibleOnPage:E(l.controlId+"-VisibleOnPage").prop("checked"),CssClass:E(l.controlId+"-CssClassName").val(),LayoutSection:E(l.controlId+"-PageLayoutSection").data("selectedlayoutsection"),IsLocked:0<e.length?e.bootstrapSwitch("state"):E(l.controlId+"-divIsLocked").data("isLocked")}}function w(e){c.find(".validate-url-container").removeClass("has-success"),E.each(c.find(".validate-url-container"),function(){hl_common_util_removeHasError(this)}),c.find(".validate-url-container .valid-url").hide(),c.find(".validate-url-container .invalid-url").hide(),c.find(".validate-url-container .valid-pagecode").hide(),c.find(".validate-url-container .invalid-pagecode").hide(),E(l.controlId+"-previewLink").hide(),e&&(E(l.controlId+"-hyperlink").val(""),E(l.controlId+"-tbJavascriptUrl").val(""))}function C(){var i=E(this);switch(i.data("hasError",!1),hl_common_ui_blockUI(),hl_common_util_stringIsNullOrWhiteSpace(E(l.controlId+"-Title").val())?(hl_common_util_addHasError(E(l.controlId+"-Title").closest(".form-group")),i.data("hasError",!0),b(i)):hl_common_util_removeHasError(E(l.controlId+"-Title").closest(".form-group")),t.val()){case l.contentTypeFileUpload:p.data("isnew")&&!i.data("hasError")&&i.data("hasError",E.isEmptyObject(p.data("documentFile"))),b(i);break;case l.contentTypeHtml:case l.contentTypeReact:b(i);break;case l.contentTypeHyperlink:j(E(this),E(l.controlId+"-hyperlink"));break;case l.contentTypeJavascript:E(l.controlId+"-JavascriptTypeOptions").val()===l.jsContentUrl?j(E(this),E(l.controlId+"-tbJavascriptUrl")):(hl_common_util_stringIsNullOrWhiteSpace(E(l.controlId+"-taJavascriptEmbedded").val().trim())?(hl_common_util_addHasError(E(l.controlId+"-dvJsContentEmbeded")),i.data("hasError")||i.data("hasError",!0)):hl_common_util_removeHasError(E(l.controlId+"-dvJsContentEmbeded")),b(i));break;case l.contentTypeSyndicatedContent:b(i);break;case l.contentTypeWidget:E.each(d.find(".widget .parameter-value"),function(){var e=E(this),t=e.closest(".form-group");e.data("isrequired")&&hl_common_util_stringIsNullOrWhiteSpace(e.data("pvalue").ror")||i.data("hasError",!0)):hl_common_util_removeHasError(t)}),b(i)}}function k(){var e=E(this).val(),t=d.find("select.businessobject-lfolder");hl_common_util_hasAttr(t,"disabled")||t.attr("disabled","disabled"),I(t,""),t.empty(),t.append('<option value="'+l.guidEmpty+'">Choose a '+t.data("libraryformat")+" folder</option"),t.selectpicker("refresh"),0!=E("option:selected",this).index()&&E.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:JSON.stringify({libraryKey:e}),url:h+"/GetLibraryFolders",success:function(e){0===e.length?(t.empty(),t.append('<option value="'+l.guidEmpty+'">Only default folder exist.</option')):(E.each(e,function(){t.append('<option value="'+this.Item1+'"'+(0<this.Item3?'style="padding-left:'+(20+15*this.Item3).toString()+'px"':"")+">"+(0<this.Item3?" - ":"")+this.Item2+"</option")}),t.removeAttr("disabled")),t.selectpicker("refresh")}})}function x(){var t=E(l.controlId+"-WidgetParameters").parent();hl_common_ui_blockUI(),E.ajax({contentType:"application/json; charset=utf-8",type:"POST",dataType:"html",data:JSON.stringify({ControlId:l.controlId.substr(1),ContentKey:u,SelectedContentTypeKey:E(l.controlId+"-WidgetContentTypes").val()}),url:h+"/WidgetParameterPartial",success:function(e){t.html(e),r(),a(),hl_common_ui_unBlockUI()}})}function S(e){var t=E(e);t.hasClass("has-warning")&&(t.removeClass("has-warning"),E(t.find(".hidden-warning-container.help-block")[0]).hide())}function T(){i.hl_ui_common_fileuploadstatus(u,"Content",y,{failedMalwareTemplate:i.data("uploadfailedmalwaretemplate"),failedTemplate:i.data("uploadfailedtemplate"),processingTemplate:i.data("uploadprocessingtemplate"),successTemplate:i.data("uploadsuccesstemplate"),scanningTemplate:i.data("uploadscanningtemplate")})}function $(i){E(i).tagit({allowSpaces:!0,removeConfirmation:!0,autocomplete:{minLength:3,source:function(e,t){E.ajax({url:"/higherlogic/ui/mvc/directory/directory/FindContacts/",type:"POST",data:JSON.stringify({name:e.term}),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){0<e.length&&t(E.map(e,function(e){var t=hl_common_util_stringIsNullOrWhiteSpace(e.EmailAddress)?"":" ("+e.EmailAddress+")";return{id:E(i).data("iscontactkey")?e.ContactKey:e.LegacyContactKey,value:e.FirstName+" "+e.LastName,label:e.FirstName+" "+e.LastName+t}}))}})}},beforeTagAdded:function(e,t){E(this).parent().find("ul.tagit li.tagit-new").hide(),E(t.tag[0]).find("span.tagit-label").prop("id")===t.tagLabel?E(t.tag[0]).find("span.tagit-label").prop("id",E(this).data("tagid")):hl_common_util_stringIsNullOrWhiteSpace(E(t.tag[0]).find("span.tagit-label").prop("id"))||E(this).data("tagid",E(t.tag[0]).find("span.tagit-label").prop("id")),I(this,E(this).data("tagid"))},beforeTagRemoved:function(){E(this).parent().find("ul.tagit li.tagit-new").show(),E(this).data("tagid",l.guidEmpty),I(this,"")}})}function I(e,t){E(e).closest(".parameter-value").data("pvalue",t),S(E(e).closest(".parameter-name-value"))}function j(t,e){var i,n=E(void 0!==e?e:"#"+E(this).data("inputid")),o="",a=!1;-1!==n.val().indexOf(".")?o=void 0!==n.data("btnselectorid")?(i=E(n.data("btnselectorid")),0===n.val().indexOf("http://")?(i.text("http:// "),i.data("selectorvalue","http://"),n.val(n.val().substr(7))):0!==n.val().indexOf("https://")&&0!==n.val().indexOf("//")||(i.text("https:// "),i.data("selectorvalue","https://"),n.val(n.val().substr(0===n.val().indexOf("https://")?8:2))),i.data("selectorvalue")+n.val()):(n.val(-1===n.val().indexOf("://")?"http://"+n.val():n.val()),n.val()):(o=c.data("baseurl")+c.data("navigationpath")+(0===n.val().indexOf("/")?n.val().substr(1):n.val()),a=!0);var s=n.closest(".validate-url-container"),r=void 0!==t&&E(t).is("button");w(!1),r||hl_common_ui_blockUI(),hl_common_ui_validateUrl(o,function(e){e.Item1?(s.addClass("has-success"),a?s.find(".valid-pagecode").show():s.find(".valid-url").show(),s.find(".preview-link").text(e.Item2),s.find(".preview-link").attr("href",e.Item2),E(l.controlId+"-previewLink").show()):(hl_common_util_addHasError(s),a?s.find(".invalid-pagecode").show():s.find(".invalid-url").show()),r?(E(t).data("hasError",!e.Item1),b(E(t))):hl_common_ui_unBlockUI()})}!function(){E(l.controlId+"-byLinePopover").popover({container:"body",placement:"auto right",html:!0,title:"Editorial History",template:'<div class="popover cms" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),hl_common_util_closePopoverOnClick(),E(l.controlId+"-VisibleOnPage").bootstrapSwitch(),t.change(function(){c.find(".content-type-item").hide(),c.find("."+E(this).val()).show(),E(this).val()===l.contentTypeWidget?E(".switch-new-version").hl_accessibility_show():E(".switch-new-version").hl_accessibility_hide(),E(this).val()!==l.contentTypeHyperlink&&E(this).val()!==l.contentTypeJavascript||w(!0)}),E(l.controlId+"-JavascriptTypeOptions").change(function(){c.find(".javascript-type-item").hide(),c.find("."+E(this).val()).show(),w(!0)});var e=E(l.controlId+"-PageLayoutSection");c.find(".page-layout-section").click(function(){c.find(".page-layout-section").removeClass("selected"),E(this).addClass("selected"),e.data("selectedlayoutsection",E(this).data("sectionid"))}),r(),E(l.controlId+"-btnHyperlinkValidateUrl,"+l.controlId+"-btnJavascriptValidateUrl").click(j),a(),function(){var e=E(l.controlId+"-WidgetCategory"),t=E(l.controlId+"-WidgetContentTypes"),i=t.parent();{var n,o;t.change(x),e.selectpicker(),t.selectpicker(),e.change(function(){var e=E(this).val();hl_common_ui_blockUI(),E.ajax({contentType:"application/json; charset=utf-8",type:"GET",dataType:"html",url:h+"/ContentTypePartial?SelectedContentTypeGroupKey="+e+"&controlid="+l.controlId.substr(1),success:function(e){i.html(e),E(l.controlId+"-WidgetContentTypes").change(x),1===E(l.controlId+"-WidgetParameters").length&&E(lontrolId+"-WidgetContentTypes").selectpicker(),hl_common_ui_unBlockUI()}})}),c.data("ishlonly")&&(n=E(l.controlId+"-tbCustomWidgetName"),o=E(l.controlId+"-btnCustomWidgetName"),n.keyup(function(){hl_common_util_stringIsNullOrWhiteSpace(E(this).val())?o.attr("disabled","disabled"):o.removeAttr("disabled")}),o.click(function(){var e;hl_common_util_stringIsNullOrWhiteSpace(E(l.controlId+"-Title").val())?hl_common_util_addHasError(E(l.controlId+"-Title").closest(".form-group")):(hl_common_util_removeHasError(E(l.controlId+"-Title").closest(".form-group")),hl_common_ui_blockUI(),(e=_()).ContentPath=n.val().trim(),HigherLogic.Util.post(h+"/SaveWidgetNameHlOnly",JSON.stringify(e)).done(function(e){hl_common_ui_unBlockUI(),e.Success?(c.data("contentkey",e.ContentKey),u=e.ContentKey,location.href=hl_common_util_updateQueryStringParameter(location.href,"ContentKey",e.ContentKey)):hl_common_ui_showBootstrapDialog(l.controlId.substr(1)+"-error","Close",E("title").text().trim()+" - Error",e.Message,"cms modal-md")}))}))}}(),E(l.controlId+"-btnFileUpldBrowse,"+l.controlId+"-hypFileUpldChange").click(g),E(l.controlId+"-btnSave").click(C),E(l.controlId+"-btnSaveAndStay").click(C),E(l.controlId+"-btnSaveAndReturn").click(C),E(l.controlId+"-btnCancel").click(function(){location.href=c.data("cancelurl")}),t.val()===l.contentTypeFileUpload&&(p.data("isready")||T()),E(l.controlId+"-cbLockContent").bootstrapSwitch()}()}}(jQuery),function(h){h.fn.hl_ui_cms_navigation=function(e){var a=h.extend({controlId:""},e||{}),s=h(a.controlId),r="/higherlogic/ui/mvc/microsites/navigation";function n(){hl_common_ui_blockUI();var t=h(this);t.data("hasError",!1);var e=h(a.controlId+"-tbNavigationTitle");hl_common_util_stringIsNullOrWhiteSpace(e.val())?(t.data("hasError",!0),hl_common_util_addHasError(e.closest(".form-group"))):hl_common_util_removeHasError(e.closest(".form-group"));var i=h(a.controlId+"-tbUrlName");hl_common_util_stringIsNullOrWhiteSpace(i.val())?(t.data("hasError")||t.data("hasError",!0),hl_common_util_addHasError(i.closest(".form-group"))):hl_common_util_removeHasError(i.closest(".form-group"));var n=h(a.controlId+"-tbPageCodeName");hl_common_util_stringIsNullOrWhiteSpace(n.val())?(t.data("hasError")||t.data("hasError",!0),hl_common_util_addHasError(n.closest(".form-group"))):hl_common_util_removeHasError(n.closest(".form-group")),t.data("hasError")?l():h.ajax({url:r+"/IsPageCodeAvailable",type:"POST",data:JSON.stringify({pageCode:n.val(),navigationKey:s.data("navigationkey"),micrositeKey:n.data("micrositekey")}),dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){e?function(e){var t=h(a.controlId+"-tbAdditionalMeta").val(),i=h(a.controlId+"-tbMetaTitle").val();i&&(t+='<meta property="og:title" content="'+i+'">');var n=h(a.controlId+"-tbMetaImage").val();n&&(t+='<meta property="og:image" content="'+n+'">');t+='<meta property="og:type" content="website">';var o={NavigationKey:s.data("navigationkey"),NavigationTitle:h(a.controlId+"-tbNavigationTitle").val(),PageTitle:h(a.controlId+"-tbPageTitle").val(),NavigationName:h(a.controlId+"-tbUrlName").val(),NavigationCode:h(a.controlId+"-tbPageCodeName").val(),PageDescription:h(a.controlId+"-tbMetaDescription").val(),CanonicalUrl:h(a.controlId+"-tbCanonicalUrl").val(),SecurityValue:h(a.controlId+"-EditContentSecurity-MainInput").data("securitlector").val(),CssClass:h(a.controlId+"-tbCssClass").val(),IsHidden:!h(a.controlId+"-cbIncludeInNavigation").bootstrapSwitch("state"),IsActive:h(a.controlId+"-cbVisibleOnPage").prop("checked"),SuppressBannersFlag:!h(a.controlId+"-cbShowAds").prop("checked"),HideTitle:!h(a.controlId+"-cbShowPageTitle").prop("checked"),IsSyndicatable:!h(a.controlId+"-cbPreventSyndication").prop("checked"),IncludeInSearchIndex:h(a.controlId+"-cbIncludeInSearchIndex").bootstrapSwitch("state"),AdditionalMeta:t};h(a.controlId+"-dvLockNav").length&&(o.IsLocked=h(a.controlId+"-cbLockNav").bootstrapSwitch("state"));h.ajax({url:r+"/SaveNavigation",type:"POST",data:JSON.stringify(o),dataType:"json",contentType:"application/json; charset=utf-8",success:function(){void 0===e.data("returnpath")||hl_common_util_stringIsNullOrWhiteSpace(e.data("returnpath"))?c():location.href=e.data("returnpath"),hl_common_ui_unBlockUI()}})}(t):(h(a.controlId+"-spnPageCodeMustBeUnique").show(),hl_common_util_addHasError(n.closest(".form-group")),l())}})}function o(){s.find(".layout-sections").hide(),h(a.controlId+"-pageLayout-"+h(a.controlId+"-pageLayoutSelector").val()).show()}function l(){var e=h(s.find(".has-error")[0]);h(document).scrollTop(e.offset().top),hl_common_ui_unBlockUI()}function c(){location.href=s.data("sitetoreturn")}function d(e,t){h(this).data("isnavproduct")&&!t&&h(a.controlId+"-mdlProductWarning").modal("show"),h(a.controlId+"-cbIncludeInNavigation").bootstrapSwitch("disabled",!1,!0),h(a.controlId+"-cbIncludeInNavigation").bootstrapSwitch("state",t,!0),h(a.controlId+"-cbIncludeInNavigation").bootstrapSwitch("disabled",!t,!0),u(0,t),t?h(a.controlId+"-noteVisibleOnPage").hl_accessibility_hide():h(a.controlId+"-noteVisibleOnPage").hl_accessibility_show()}function u(e,t){h(a.controlId+"-cbVisibleOnPage").bootstrapSwitch("state")?(h(a.controlId+"-cbIncludeInSearchIndex").bootstrapSwitch("disabled",!1,!0),h(a.controlId+"-cbIncludeInSearchIndex").bootstrapSwitch("state",t,!0),h(a.controlId+"-cbIncludeInSearchIndex").bootstrapSwitch("disabled",t,!0)):(h(a.controlId+"-cbIncludeInSearchIndex").bootstrapSwitch("disabled",!1,!0),h(a.controlId+"-cbInclte",!1,!0),h(a.controlId+"-cbIncludeInSearchIndex").bootstrapSwitch("disabled",!0,!0))}!function(){h(".tobootstrapswitch").bootstrapSwitch(),h(a.controlId+"-pageLayoutSelector").selectpicker().change(o),h(a.controlId+"-btnSave").click(n),h(a.controlId+"-btnSaveAndReturn").click(n),h(a.controlId+"-btnCancel").click(c),h(a.controlId+"-cbVisibleOnPage").on("switchChange.bootstrapSwitch",d),h(a.controlId+"-cbIncludeInNavigation").on("switchChange.bootstrapSwitch",u),h(a.controlId+"-dvLockNav").length&&h(a.controlId+"-dvLockNav").find('input[type="checkbox"]').bootstrapSwitch(),h(a.controlId+"-cbVisibleOnPage").data("isnavproduct")&&h(a.controlId+"-btnProductWarningCancel").click(function(){h(a.controlId+"-cbVisibleOnPage").bootstrapSwitch("state",!0,!0),h(a.controlId+"-mdlProductWarning").modal("hide")}),h(a.controlId+"-byLinePopover").popover({container:"body",placement:"auto right",html:!0,title:"Editorial History",template:'<div class="popover cms" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),hl_common_util_closePopoverOnClick();var e=h(a.controlId+"-dvSeoItems"),t=h(a.controlId+"-hypShowSeo"),i=h(a.controlId+"-hypHideSeo");t.click(function(){e.show(),de()})}()}}(jQuery),function(p){p.fn.hl_ui_cms_security=function(e){var r=p.extend({controlId:""},e||{}),o=p(r.controlId),a=p(o.data("maininputid")),n=p(r.controlId+"-hdnSpan"),s=p(r.controlId+"-slctCustomPermissions");function l(e){var t=p(e);o.find(".main-security").each(function(){p(this).removeClass("btn-success").removeClass("btn-grey").addClass("btn-default"),p(p(this).children().first()).addClass("opacity-zero"),p(this).data("ischecked",!1),p(this).attr("aria-checked","false")}),t.data("ischecked",!0),t.attr("aria-checked","true");var i=p(r.controlId+"-publicHideAfterLoggedIn");"Public"===t.data("securitytype")?i.show():(i.hide(),p(r.controlId+"-cbHideAfterLoggedIn").bootstrapSwitch("state",!1)),p(r.controlId+"-btnSave").removeAttr("disabled","disabled"),"Custom"!==t.data("securitytype")?(p(r.controlId+"-dvCustomPermissions").show()&&(p(r.controlId+"-dvCustomPermissions").hide(),s.val(null),s.selectpicker("refresh")),t.removeClass("btn-default").addClass("btn-success"),p(t.children().first()).removeClass("opacity-zero")):(p(r.controlId+"-btnSave").attr("disabled","disabled"),t.removeClass("btn-default").addClass("btn-grey"),p(r.controlId+"-dvCustomPermissions").show())}function t(){var e;p.each(o.find(".main-security"),function(){if(p(this).data("ischecked"))return e=p(this),!1});var t=e.data("securitytype");switch(a.data("selectedsecuritytype",t),t){case"Public":a.text(p(r.controlId+"-cbHideAfterLoggedIn").prop("checked")?a.data("notLoggedInText"):a.data("everyoneText")),a.data("securityvalue",p(r.controlId+"-cbHideAfterLoggedIn").prop("checked")?p(r.controlId+"-cbHideAfterLoggedIn").data("securitygroupkey"):e.data("securitygroupkey"));break;case"Authenticated":a.text(a.data("loggedInText")),a.data("securityvalue",e.data("securitygroupkey"));break;case"Custom":var i="",n="";p.each(s.find("option:selected:not(.skip)"),function(){var e,t=p(this).val();switch(i+=t+",",t){case o.data("siteadmin"):e=a.data("siteAdminsText");break;case s.data("sgsuperadmin"):e=a.data("superAdminsText");break;case s.data("sgmember"):e=a.data("membersText");break;case s.data("sgnonmember"):e=a.data("nonMembersText");break;case s.data("sgnotloggedin"):e=a.data("notLoggedInText");break;default:e=p(r.controlId+'-slctCustomPermissions option[value="'+t+'"]').text()}n+=e.trim()+", "}),a.text(n.substr(0,n.length-2)),a.data("securityvalue",i.substr(0,i.length-1))}p(r.controlId+"-dvModal").modal("hide"),h()}function i(e,t){var i=p(this),n=i.find('optgroup[data-optgroupname="mption'),a=p(i.find("option")[t]);0<n.length&&a.val()===i.data("sgmember")?d(i,-1!==p.inArray(a.val(),i.val()),!0):0<o.length&&a.val()===i.data("sgnonmember")&&d(i,-1!==p.inArray(a.val(),i.val()),!1);var s=p(i.closest(".custom-permission-main").find('.hl-checkbox[data-securitytype="Custom"]')[0]);p.isEmptyObject(i.val())?(s.addClass("btn-grey").removeClass("btn-success"),p(s.children().first()).addClass("opacity-zero"),p(r.controlId+"-btnSave").attr("disabled","disabled")):(s.removeClass("btn-grey").addClass("btn-success"),p(s.children().first()).removeClass("opacity-zero"),p(r.controlId+"-btnSave").removeAttr("disabled","disabled")),s.data("ischecked",!p.isEmptyObject(i.val())),s.attr("aria-checked",!p.isEmptyObject(i.val()).toString())}function c(){p.each(s.find("option"),function(e,t){p(t).hasClass("skip")?s.closest(".custom-permission-select-container").find('ul li[data-original-index="'+e+'"]').addClass("disabled"):s.closest(".custom-permission-select-container").find('ul li[data-original-index="'+e+'"]').removeClass("disabled")})}function d(e,t,i){var n=i?"member":"nonmember",o=e.find('optgroup[data-optgroupname="'+n+'"] option');t?p.each(o,function(){p(this).prop("selected",!0),p(this).addClass("skip")}):p.each(o,function(){p(this).prop("selected",!1),p(this).removeClass("skip")}),e.selectpicker("refresh")}function u(){var e,t,i;"Public"===a.data("selectedsecuritytype")?(p(r.controlId+"-cbHideAfterLoggedIn").===p(r.controlId+"-cbHideAfterLoggedIn").data("securitygroupkey")),l(p(r.controlId+"-cbPublic"))):"Authenticated"===a.data("selectedsecuritytype")?l(p(r.controlId+"-cbAuthenticated")):(s.val(a.data("securityvalue").split(",")),e=s.find('optgroup[data-optgroupname="member"] option'),t=s.find('optgroup[data-optgroupname="nonmember"] option'),0<e.length||0<t.length?(i=!0,-1!==p.inArray(s.data("sgmember"),s.val())&&(d(s,!0,!0),i=!1),-1!==p.inArray(s.data("sgnonmember"),s.val())&&(d(s,!0,!1),i=!1),i&&s.selectpicker("refresh")):s.selectpicker("refresh"),l(p(r.controlId+"-cbCustom")),p(r.controlId+"-cbCustom").removeClass("btn-grey").addClass("btn-success"),p(p(r.controlId+"-cbCustom").children().first()).removeClass("opacity-zero"),p(r.controlId+"-btnSave").removeAttr("disabled","disabled")),p(r.controlId+"-dvModal").modal("show")}fu("font-size"","+r.controlId+"-btnEdit").click(u),p((){p("#"+p(this).attr("for")).click()}),o.find(".btn.hl-checkbox").click(function(){var (){p('button[data-id="'+r.controlId.substr(1)+'-slctCustomPermissions"]').click()},0)}),o.fauto bottom",html:!0,template:'<div class="popover cms" role="tooltip"><div class="arrow"></dict",i).on("refreshed.bs.select",c)}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(l){function a(e)e).match(/\b\w+\b/g).length<=i},l.validator.format("Please enter {0} words or less.")),l.vt least {0} words.")),l.validator.addMethod("rangeWords",function(e,t,i){var n=a(eween {0} and {1} words.")),l.validator.addMethod("accept",function(e,t,i){var n,o,a="string"==typeof i?i.replace(/\s/g,""):"image/*",s=this.optional(t);if(s)return s;if("file"===l(t).attr("type")&&(a=a.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*"),t.files&&t.files.length))for(o=new RegExp(".?("+a+")$","i"),n=0;n<t.files.length;n++)if(!t.files[n].type.match(o))return!1;return!0},l.validator.format("Please enter a value with a valid mimetype.")),l.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^\w+$/i.test(e)},"Letters, numbers, and underscores only please"),l.validator.addMethod("bankaccountNL",function(e,t){if(this.optional(t))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(e))return!1;for(var i=e.replace(/ /g,""),n=0,o=i.length,a=0;a<o;a++)n+=(o-a)*i.substring(a,a+1);return n%11==0},"Please specify a valid bank account number"),l.validator.addMethod("bankorgiroaccountNL",function(e,t){return this.optional(t)||l.validator.methods.bankaccountNL.call(this,e,t)||l.validator.methods.giroaccountNL.call(this,e,t)},"Please specify a valid bank or giro account number"),l.validator.addMethod("bic",function(e,t){return this.optional(t)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-9])(X{3}|;if(9!==e.length||!a.test(e))return!1;for(t=0;t<r.length;t++)i=parseInt(r[t],10),t%2"===e||"22222222222"===e||"33333333333"===e||"44444444444"===e||"55555555555",l.validator.addMethod("creditcard",function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,n,o=0,a=0,s=!1;if((e=e.replace(/\D/g,"")).length<13||19<e.length)return!1;for(i=e.length-1;0<=i;i--)n=e.charAt(i),a=parseInt(n,10),s&&9<(a*=2)&&(a-=9),o+=a,s=!s;return o%10==0},"Please enter a valid credit card number."),l.validator.addMethod("creditcardtypes",function(e,t,i){if(/[^0-9\-]+/.test(e))return!1;e=e.replace(/\D/g,"");var n=0;return i.mastercard&&(n|=1),i.visa&&(n|=2),i.amex&&(n|=4),i.dinersclub&&(n|=8),i.enroute&&(n|=16),i.discover&&(n|=32),i.jcb&&(n|=64),i.unknown&&(n|=128),i.all&&(n=255),1&n&&/^(5[12345])/.test(e)||2&n&&/^(4)/.test(e)?16===e.length:4&n&&/^(3[47])/.test(e)?15===e.length:8&n&&/^(3(0[012345]|[68]))/.test(e)?14===e.length:16&n&&/^(2(014|14)},"Please enter a valid credit card number."),l.validator.addMethod("currency",function(e,t,i){var n="string"==typeof i,o=n?i:i[0],a=n||i[1],o=o.replace(/,/g,""),s="^["+(o=a?o+"]":o+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[r.substring(0,2)])&&!new RegExp("^[A-Z]{2}\\d{2}"+o+"$","").test(r))return!1;for(i=r.substring(4,r.length)+r.substring(0,4),a=0;a<i.length;a++)"0"!==(n=i.charAt(a))&&(c=!1),c||(l+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(n));for(s=0;s<l.length;s++)d=(""+d+l.charAt(s))%97;return 1===d},"Please specify a valid IBAN"),l.validator.addMethod("integer",function(e,t){return this.optional(t)||/^-?\d+$/.test(e)},"A positive or negative non-decimal number please"),l.validator.addMethod("ipv4",function(e,t){return this.optional(t)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)},"Please enter a valid IP v4 address."),l.validator.addMethod("ipv6",function(e,t){return this.optional(t)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::(ion(e,t){return this.optional(t)||/^[a-z\-.,()'"\s]+$/i.test(e)},"Letters.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(e)},"Please specify a valid mobile number"),l.validator.addMethod("mobileUK",function(e,t){return e=e.replace(24)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),l.validator.addMethod("nieES",function(e){"use strict";var t,i=new RegExp(/^[MXYZ]{1}[0-9]{7,8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/gi),n=e.substr(e.length-1).toUpperCase();return!(10<(e=e.toString().toUpperCase()).length||e.length<9||!i.test(e))&&(t=9===(e=e.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2")).length?e.substr(0,8):e.substr(0,9),"TRWAGMYFPDXBNJZSQVHLCKET".charAt(parseInt(t,10)%23)===n)},"Please specify a valid NIE number."),l.validator.addMethod("nifES",function(e){"use strict";return!!(e=e.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(e)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(e.substring(8,0)%23)===e.charAt(8):!!/^[KLM]{1}/.test(e)&&e[8]===String.fromCharCr a different value, values must not be the same."),l.validator.addMethod("nowhitespace",function(e,t){return this.optional(t)||/^\S+$/i.test(e)},"No white space please"),l.validator.addMethod("pattern",function(e,t,i){return!!this.optional(t)||("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(e))},"Invalid format."),l.validator.addMethod("phoneNL",function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(e)},"Please specify a valid phone number."),l.validator.addMethod("phonesUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||9<e.length&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),l.validator.addMethod("phoneUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||9<e.length&&e.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please  this.optional(t)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(e)},"Informe um CEP vlido."),l.validator.addMtalcodeNL",function(e,t){return this.optional(t)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(e)},"Please specify a valid po least {0} of these fields.")),l.validator.addMethod("skip_or_fill_minimum0),a=o.data("valid_skip")?o.data("valid_skip"):l.extend({},this),s=n.filter(function(){return a.elementValue(this)}).length,r=0===s||s>=i[0];return o.data("valid_skip",a),l(t).data("being_validated")||(n.data("being_validated",!0),n.each(function(){a.element(this)}),n.data("being_validated",!1)),r},l.validator.format("Please either skip these fields or fill at least {0} of them.")),l.validator.addMethod("stateUS",function(e,t,i){var n=void 0===i,o=!n&&void 0!==i.caseSensitive&&i.caseSensitive,a=!n&&void 0!==i.includeTerritories&&i.includeTerritories,s=!n&&void 0!==i.includeMilitary&&i.includeMilitary,r=a||s?a&&s?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":a?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$";return r=o?new RegExp(r):new RegExp(r,"i"),this.optional(t)||r.test(e)},"Please specify a valid state"),l.validator.addMethod("strippedminlength",function(e,t,i){return l(e).text().length>=i},l.validator.format("Please enter at least {0} characters")),l.validator.addMethod("time",function(e,t){return this.optional(t)||/^([01]\d|2[0-3]|[0-9])(:[0-5]\d){1,2}$/.test(e)},"Please enter a valid time, between 00:00 and 23:59"),l.validator.addMethod("time12h",function(e,t){return this.optional(t)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(e)},"Please enter a valid time in 12-hour am/pm format"),l.validator.addMethod("url2",function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\s.length;t+s[t]);break}}else i*=n;c+=i}return 10===(o=c%11)&&(o="X"),o===a},"The specified vehicle identification number (VIN) is invalid."),l.validator.addMethod("zipcodeUS",function(e,t){return thisfunction d(e){rData(i)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function m(n){function e(e,t){voxy(p,n),options:{errorClass:a.errorClass||"input-validation-erro,e("erry-valid"),l.each(t.errorList,funvalidHandnction(e){vaield-validation("success",arguments)}},){t.off("reset."+r,o)nobtrusive={adapters:[],parm(r)).options.rules[n.name]=o={},t.options.messages[n.name]=a={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=s.attr(e),i={};void 0!==t&&(e+="-",l.each(this.params,function(){i[this]=s.attr(e+this)}),this.adapt({element:n,form:r,message:t,params:i,rules:o,messages:a}))}),l.extend(o,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e),i=t.parents().addBack().filter("form").add(t.find("form")).has("[data-val=true]");t.find("[data-val=true]").each(function(){s.ution(e,t,i){return|t,!0)})},e.addMinMax=function(e,n,o,a,t,i){returnn;return i&&(n=(n=e.match(/\W/g))&&n.length>=i),l("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],function(e){var t=u(e.element.name),i=h(e.params.other,t);c(e,"equalTo",l(e.form).find(":input").filter("[name='"+d(i)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||c(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(n){var o={url:n.params.url,type:n.params.type||"GET",data:{}},a=u(n.element.name);l.each((n.params.additionalfields||n.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var i=h(t,a);o.data[i]=function(){var e=l(n.form).find(":input").filter("[name='"+d(i)+"']");return e.is(":checkbox")?e.filter(":checked").val()||e.filter(":hidden").val()||"":e.is(":radio")?e.filter(":checked").val()||"":e.val()}}),c(n,"remote",o)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&c(e,"minlength",e.params.min),e.params.nonalphamin&&c(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&c(e,"regex",e.params.regex)}),l(function(){s.unobtrusive.parse(document)})}(jQuery);