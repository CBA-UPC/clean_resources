(function(){var pe={409:function(){(function(d){d.fn.scrollTo=d.fn.dropdown=function(w){var s={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1,moveActivates:!0};if(w==="open")return this.each(function(){d(this).trigger("open")}),!1;if(w==="close")return this.each(,!1;this.each(function(){var f=d(this),p=d.extend({},s,w),m=!1,h=d("#"+f.attr("data-activates"));function x(){f.data("induration")!==void 0&&(p.inDuration=f.data("induration")),f.data("outduration")!==void 0&&(p.outDuration=f.data("outduration")),f.data("constrainwidth")!==void 0&&(p.constrainWidth=f.data("constrainwidth")),f.data("hover")!==void 0&&(p.hover=f.data("hover")),f.data("gutter")!==void 0&&(p.gutter=f.data("gutter")),f.data("beloworigin")!==void 0&&(p.belowOrigin=f.data("beloworigin")),f.data("alignment")!==void 0&&(p.alignment=f.data("alignment")),f.data("stoppropagation")!==void 0&&(p.stopPropagation=f.data("stoppropagation")),f.data("moveactivates")!==void 0&&(p.moveActivates=f.data("moveactivates"))}x(),p.moveActivates===!0&&f.after(h);function v(C){C==="focus"&&(m=!0),x(),h.addClass("active"),f.addClass("active");var k=f[0].getBoundingClientRect().width;p.constrainWidth===!0?h.css("width",k):h.css("white-space","nowrap");var P=window.innerHeight,M=f.innerHeight(),U=f.offset().left,z=f.offset().top-d(window).scrollTop(),G=p.alignment,B=0,I=0,N=0;p.belowOrigin===!0&&(N=M);var Q=0,K=0,R=f.parent();if(R.is("body")||(R[0].scrollHeight>R[0].clientHeight&&(Q=R[0].scrollTop),R[0].scrollWidth>R[0].clientWidth&&(K=R[0].scrollLeft)),U+h.innerWidth()>d(window).width()?G="right":U-h.innerWidth()+f.innerWidth()<0&&(G="left"),z+h.innerHeight()>P)if(z+M-h.innerHeight()<0){var Z=P-z-N;h.css("max-height",Z)}else N||(N+=M),N-=h.innerHeight();if(G==="left")B=p.gutter,I=f.position().left+B;else if(G==="right"){h.stop(!0,!0).css({opacity:0,left:0});var X=f.position().left+k-h.innerWidth();B=-p.gutter,I=X+B}h.css({position:"absolute",top:f.position().top+N+Q,left:I+K}),h.slideDown({queue:!1,duration:p.inDuration,easing:"easeOutCubic",complete:).animate({opacity:1},{queue:!1,duration:p.inDuration,easing:"easeOutSine"}),setTimeout(0)}f(p.hover){var y=!1;f.off("click."+f.attr("id")),f.on("mouseenter",,f.on("mouseleave",function(C){var k=C.toElement||C.relatedTarget;d(k).closest('.dropdown-content, [data-target="dropdown-content"]').is(h)||(h.stop(!0,!0),T(),y=!1)}),h.on("mouseleave",}else f.off("click."+f.attr("id")),f.on("click."+f.attr("id"),function(C){m||(f[0]==C.currentTarget&&!f.hasClass("active")&&d(C.target).closest('.dropdown-content, [data-target="dropdown-content"]').length===0?(C.preventDefault(),p.stopPropagation&&C.stopPropagation(),v("click")):f.hasClass("active")&&(T(),d(document).off("click."+h.attr("id"))))});f.on("open",,f.on("close",T)})},d(document).ready(function(){d(".dropdown-button").dropdown()})})(jQuery)},289:function(d,w,s){"use strict";var f=s(755),p=s(485),m=s(986),h=s(270),x=s(860),v=s(959),T=s(87),y=s(823),C=s(409),k=s(412),P=s(732),M=s.n(P),U=s(35);const z=t=>{s.e(960).then(s.t.bind(s,702,23)).then(({default:e})=>{t(e)})},G=t=>{s.e(508).then(s.t.bind(s,542,23)).then(()=>{t()})},B=t=>{s.e(180).then(s.t.bind(s,989,23)).then(()=>{t()})},I=t=>{s.e(513).then(s.t.bind(s,307,23)).then(()=>{t()})},N=()=>{s.e(366).then(s.t.bind(s,417,23))},Q=()=>{s.e(566).then(s.t.bind(s,222,23))},K=()=>{s.e(166).then(s.t.bind(s,568,23)).then(},R=t=>{s.e(797).then(s.bind(s,578)).then(},Z={sm:"37.5625em",lg:"62.0625em",xl:"75.0625em"};function X(t){return window.matchMedia(`(min-width: ${Z[t]})`).matches}function H(t){const e=parseFloat(Z[t])-Ae(1);return window.matchMedia(`(max-width: ${e}em)`).matches}ar D={lazyload:null,init:function(){var t;window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),this.organizeTags(),this.organizeBlock(),this.initLazyImg(),this.initForms(),this.initPanels(),this.verticalArticle(),this.infosdirect(),this.initElections(),this.detectWebview(),this.readAlso(),this.initElectionBlocMore(),$(".modal").modal(),$(".scrollspy").scrollSpy({scrollOffset:((t=document.querySelector('[rel="js-header-container"]'))==null?void 0:t.clientHeight)||200})},organizeTags:function(){if(H("lg")){let t=document.getElementById("hot-tags"),e=document.querySelector(".hottags");if(t&&e)t.insertAdjacentElement("afterbegin",e),e.classList.remove("hide-on-med-and-down");else if(!e){let i=document.querySelector('[data-activates="hot-tags"]');i&&i.parentElement.classList.add("hide")}}},initElectionBlocMore:function(){let t=$(".election-maire__more");$('[rel="js-maire-show-more"]').on("click",function(e){e.preventDefault(),t.slideDown("slow"),$(this).hide()})},initForms:function(){$("form").length>0&&G(},initLazyImg:function(){this.lazyload=new(M())({elements_selector:"img, iframe, .lazy"});var t=new(M())({elements_selector:".topic-block__content, .aside-makers__content",callback_enter:function(e){var i=new(M())({container:e})}})},initPanels:function(){let t=document.location.hash.match(new RegExp("^#(?<id>.+)$"));if(t){let e=$(`[data-panel-id="${t.groups.id}"]`);e.length>0&&($("[data-panel-id]").addClass("hide"),e.removeClass("hide"),$('[data-toggle="panel"] > option').removeProp("selected"),$(`[data-toggle="panel"] > [value="${t.groups.id}"]`).prop("selected",!0))}$('[data-toggle="panel"]').on("change",function(e){$("[data-panel-id]").addClass("hide"),$(`[data-panel-id="${e.target.value}"]`).removeClass("hide"),document.location.hash=`#${e.target.value}`})},initIframes:function(){$("iframe.auto-resize").length>0&&z(function(e){e({},"iframe.auto-resize")})},infosdirect:function(){var t=1,e=$('[rel="js-direct"] [rel="js-pager"]');$('[rel="js-direct"] [rel="js-pager-left"]').on("click",function(){t>1&&($('[rel="js-page-'+t+'"]').hide(),t--,$('[rel="js-page-'+t+'"]').show(),e.text(t+"/5"))}),$('[rel="js-direct"] [rel="js-pager-right"]').on("click",function(){t<5&&($('[rel="js-page-'+t+'"]').hide(),t++,$('[rel="js-page-'+t+'"]').show(),e.text(t+"/5"))}),$('[rel="js-direct-num"] [rel="js-pager"]').on("click",function(){let i=$('[rel="js-direct-num"] .aside-direct__pager.is-current');t=i.attr("id"),$('[rel="js-page-'+t+'"]').hide(),i.removeClass("is-current"),$(this).addClass("is-current"),$('[rel="js-page-'+$(this).attr("id")+'"]').show()})},popupCenter:function(t,e,i){var a=window.screenLeft!==void 0?window.screenLeft:screen.left,n=window.screenTop!==void 0?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=o/2-e/2+a,r=l/2-i/2+n,u=window.open(t,"Share","scrollbars=yes, width="+e+", height="+i+", top="+r+", left="+c);window.focus&&u.focus()},organizeBlock:function(){const t=function(e){e.forEach(function(i){let a=document.getElementById(i.dataset.blockTarget);a&&(a.insertAdjacentElement("beforebegin",i),$(a).remove())})};X("lg")?t(document.querySelectorAll('[data-block-device="tablet"], [data-block-device="desktop"]')):X("sm")&&t(document.querySelectorAll('[data-block-device="tablet"]'))},showMunicipales:function(){let t=$("#inscription-municipales"),e=$("img",t);t.removeClass("hide"),e.hasClass("loaded")||(e.attr("src",e.attr("data-src")),e.addClass("loaded"))},initElections:function(){$(".election-result__toggle-colistiers").on("click",function(){$(this).toggleClass("open"),$(this).parent().parent().find(".election-result__colistiers").slideToggle()})},detectWebview:function(){document.location.search.indexOf("webview=1")!==-1&&(!document.body.classList.contains("body--webview")&&document.body.classList.contains("body--arche")&&document.body.classList.add("body--webview"),document.addEventListener("click",function(t){let e=t.target.closest("a[href]");if(!e)return;let i=e.getAttribute("href");i.indexOf("webview=1")===-1&&i.search("^(https?://|javascript:)")!==0&&(i+=(i.indexOf("?")!==-1?"&":"?")+"webview=1"),e.href=i},!1))},readAlso:function(){var t=document.querySelectorAll('[rel="js-read-also-content"] > article:nth-child(1n+7)'),e=document.querySelector('[rel="js-read-also-btn"]');e&&e.addEventListener("click",function(){e.dataset.state==="hide"?(t.forEach(function(i){i.dataset.state="hidden"}),e.removeAttribute("data-state"),H("lg")&&e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})):(t.forEach(,e.dataset.state="hide")})},verticalArticle:function(){let t=$('[data-toggle="dotdotdot"]');t.length>0&&R(function(e){t.each(function(){var i=this,a=0;$(".grid-2__section-fluid > article",i).each(function(){a+=$(this).outerHeight(!0)});var n=$(".grid-2__section-fixed > article",i),o=$(".article__chapo",n),l=$(".article__media",n).outerHeight(!0),c=$(".article__title",n).outerHeight(!0),r=a-l-c;new e(o[0],{ellipsis:"\u2026 ",height:r,keep:null,tolerance:0,truncate:"word",watch:!0})})})}};$.fn.multiple_select=function(t){$(this).each(function(){var e=this;if(!!e.hasAttribute("multiple")){if(t==="destroy"){var i=$(e).prev(),a=$(".agenda-form__btn-select",i);a.off("click"),i.remove();return}var n=e.dataset.selectId,o=$('[data-activates="select-options-'+n+'"]'),l=$("#select-options-"+n),c=document.createElement("div"),r=document.createElement("button");l.find("li.disabled").remove(),r.classList.add("btn","agenda-form__btn-select"),r.setAttribute("type","button"),r.innerHTML="Sauvegarder",c.classList.add("agenda-form__select"),c.appendChild(l[0]),c.appendChild(r),e.insertAdjacentElement("beforebegin",c),r.addEventListener("click",function(){o.trigger("close")})}})};var Pe=(t,e,i)=>new Promise((a,n)=>{var o=r=>{try{c(i.next(r))}catch(u){n(u)}},l=r=>{try{c(i.throw(r))}catch(u){n(u)}},c=r=>r.done?a(r.value):Promise.resolve(r.value).then(o,l);c((i=i.apply(t,e)).next())});const Me={root:null,rootMargin:"300px",threshold:0};class Be{static attachToObserver(e,i,a){new IntersectionObserver((o,l)=>{o.forEach(c=>Pe(this,null,function*(){!c.isIntersecting||(yield i(),typeof a=="function"&&a(),l.unobserve(c.target))}))},Me).observe(e)}}var q=Be;const ve='iframe.auto-resize, iframe[rel="js-iframe-resize"]';class Ie{init(){const e=document.querySelector(".waves-effect"),i=document.querySelector("ul.tabs"),a=document.querySelector(ve);e&&q.attachToObserver(e,K),i&&q.attachToObserver(i,Q),a&&q.attachToObserver(a,()=>{z(function(n){n({log:!1,checkOrigin:!1},ve)})})}}var Re=s(808),_=s.n(Re),ze={init:function(){this.checkPollStateFromCookies(),this.addVoteClick()},checkVote:function(t){var e=_().get("poll_"+t);return typeof e!="undefined"},getPollResults:function(t){var e="/api/fo/sondages/results/"+t;$.ajax({url:e,method:"get"}).done(function(i){var a,n=i.nb_votes,o,l,c;for(a in i.reponses)o=i.reponses[a]._id,l=i.reponses[a].nb_votes,c=l?Math.round(l/n*100):0,$("[data-response-id="+o+'] [rel="js-survey-progress-bar"]').css("width",c+"%"),$("[data-response-id="+o+'] [rel="js-survey-response-value"]').html(c+"%")})},addVoteClick:function(){var t=this;$('[rel="js-survey"] [data-button-poll-id]').each(function(){$(this).on("click",function(e){var i=$(this).data("button-poll-id");t.doVote(i,$("input[name=response]:checked","#poll_form_"+i).val())})})},doVote:function(t,e){var i=this;if(typeof e!="undefined"&&e!==""){_().set("poll_"+t,e,{expires:1});var a=[];a.id=e,$.post("/api/fo/sondages/votes/"+t,{reponses:e}).done(function(){var n=$('[rel="js-survey"][data-poll-id='+t+"]").data("poll-element-id"),o=$('[rel="js-survey"][data-poll-result-id='+t+"]");$('[rel="js-survey-alert"]',o).text("Votre vote a bien \xE9t\xE9 pris en compte !"),$('[rel="js-survey-alert"]',o).addClass("survey-alert poll__alert"),i.getPollResults(n),i.checkPollStateFromCookies()})}else I(function(){Materialize.toast("Vous devez choisir une r\xE9ponse...",4e3)})},checkPollStateFromCookies:function(){var t=this;$('[rel="js-survey"][data-poll-id]').each(function(){var e=$(this).data("poll-id");if(e&&t.checkVote(e)){var i=$('[rel="js-survey"][data-poll-result-id='+e+"]");i.removeClass("hide"),$(this).addClass("hide")}})}},Et=s(605),Ne={btnContainer:$('[rel="js-share"]'),init:function(){this.facebook(),this.twitter(),this.linkedin(),this.viadeo(),this.pinterest(),this.mail(),this.print(),this.dropdownMini()},facebook:function(){$(".icon-facebook",this.btnContainer).on("click",function(){var t=$(this).data("url")||$('meta[property="og:url"]').attr("content");D.popupCenter("https://www.facebook.com/sharer.php?u="+encodeURI(t),600,300)})},twitter:function(){$(".icon-twitter",this.btnContainer).on("click",function(){var t=$(this).data("url")||$('meta[property="og:url"]').attr("content"),e=$(this).data("text")||$('meta[property="og:title"]').attr("content"),i=$('meta[property="twitter:site"]').attr("content").replace("@","").replace("https://twitter.com/",""),a="https://twitter.com/intent/tweet?url="+encodeURI(t)+"&text="+encodeURIComponent(e)+"&via="+i;D.popupCenter(a,600,300)})},linkedin:function(){$(".icon-linkedin",this.btnContainer).on("click",function(){var t=$(this).data("url")||$('meta[property="og:url"]').attr("content"),e=$(this).data("text")||$('meta[property="og:title"]').attr("content"),i=$('meta[property="og:site_name"]').attr("content"),a="https://www.linkedin.com/shareArticle?mini=1&url="+encodeURI(t)+"&text="+encodeURI(e)+"&source="+i;D.popupCenter(a,600,300)})},pinterest:function(){$(".icon-pinterest",this.btnContainer).on("click",function(){var t=$(this).data("url")||$('meta[property="og:url"]').attr("content"),e=$(this).data("text")||$('meta[property="og:title"]').attr("content"),i=$('meta[property="og:site_name"]').attr("content"),a="http://pinterest.com/pin/create/button/?url="+encodeURI(t)+"&description="+encodeURI(e)+"&media="+encodeURI($(this).data("media"));D.popupCenter(a,600,300)})},viadeo:function(){$(".icon-viadeo",this.btnContainer).on("click",function(){var t="https://www.viadeo.com/fr/widgets/share/preview?url="+encodeURIComponent(window.location.href)+"&language=fr";D.popupCenter(t,600,300)})},mail:function(){$(".icon-mail",this.btnContainer).on("click",function(){$.get("/social/article-share").then(.then(function(){let t=$('[rel="js-share-article-modal"]');return t.modal(),t.modal("open"),t}).then(function(t){$('[name="share-id"]',t).val($("[data-article-id]").data("article-id")),$("form",t).on("submit",function(e){e.preventDefault(),$.post($(this).attr("action"),$(this).serialize()).done(function(i){I(function(){Materialize.toast("Votre message a bien \xE9t\xE9 envoy\xE9",4e3)}),t.modal("close")}).fail(function(i){var a=i.responseJSON;a&&(Object.prototype.hasOwnProperty.call(a,"name")&&$('[name="name"]',t).addClass("invalid"),Object.prototype.hasOwnProperty.call(a,"email")&&$('[name="email"]',t).addClass("invalid"))})})})})},print:function(){$(".icon-printer",this.btnContainer).on("click",},dropdownMini:function(){let t=$('[rel="js-share-mini"]');t.length>0&&t.dropdown({constrainWidth:!1})}},He={init:function(){$('[rel="js-close-popin"]').on("click",}},ae={init:function(){this.snInstantiate(),this.snClose(),this.ddOpen(),this.ddFocusable(),this.ddClose(),this.dsManage(),this.mainNav(),this.subNav(),document.addEventListener("scroll",this.scrollHandler)},scrollHandler:function(){var t,e;window.scrollY>0?(t=document.querySelector('[rel="js-header-container"]'))==null||t.setAttribute("data-state","sticky"):(e=document.querySelector('[rel="js-header-container"]'))==null||e.removeAttribute("data-state")},snInstantiate:function(){$('[rel="js-side-nav"]').sideNav({draggable:!1,onOpen:function(e){$("body").css("overflow-y","scroll"),(!document.querySelector('[rel="js-menu-container"]')||$('[rel="js-menu-container"]').html().length===0)&&ae.snLoadMenu(e)}})},snLoadMenu:function(t){$.ajax({method:"GET",url:t.data("topics")}).done(function(e){$('[rel="js-menu-container"]').html(e),$(".collapsible").collapsible(),ldi_conf.general.sitename=="viaoccitanie.tv"&&$('[rel="js-menu-container"]').find(".icon-triangle-bottom").trigger("click"),ae.snTopic()}).fail(function(e){})},snTopic:snClose:ddOpen:function(){$('[rel="js-open-dropdown"]').click(},ddFocusable:function(){$('[rel="js-main-nav"] .navbar-main__sub').click(},ddClose:function(){$('[rel="js-close-dropdown"]').click(function(){$(this).parent(".navbar-main__sub").siblings(".dropdown-button").dropdown("close"),document.querySelector("body").classList.remove("body--navbar-opened")})},dsManage:function(){$('[rel="js-desktop-search-toggle"]').click(},seoBusiness:mainNav:function(){let t=document.querySelector('[rel="js-main-nav"]');if(t&&H("lg")){let e=t.querySelectorAll(".dropdown-button");for(let i=0;i<e.length;i++){let a=e[i];new MutationObserver(function(o){for(let l=0;l<o.length;l++){let c=o[l];c.type==="attributes"&&(c.target.classList.contains("active")?document.body.classList.add("body--navbar-opened"):document.body.classList.remove("body--navbar-opened"))}}).observe(a,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1,subtree:!0})}}if(H("lg")){let e=document.querySelector(".navbar-main__main-link.is-current"),i=document.querySelector(".navbar-sub__nav-link.is-current");e&&e.scrollIntoView({behavior:"instant",block:"center",inline:"center"}),i&&i.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}},subNav:function(){$(".navbar-sub__nav-link").each(function(){document.location.pathname===$(this).attr("href")&&$(this).addClass("is-current")});var t=document.querySelectorAll(".navbar-sub__nav-link");t.forEach(function(e){(document.location.pathname===e.getAttribute("href")+"sports/"||document.location.pathname===e.getAttribute("href")+"sorties/")&&e.classList.add("is-current")}),$('[rel="js-open-subnav"]').on("click",function(){var e=$(".navbar-sub__nav");e.attr("data-state")==="open"?e.removeAttr("data-state"):e.attr("data-state","open")})}};const jt=()=>{$('[rel="js-trigger-search-overlay"]').on("click",,$('[rel="js-search-overlay"]').on("click",,$(".search-overlay__form").on("click",};function qe(){return Promise.all([s.e(850),s.e(713)]).then(s.bind(s,344))}class Ve{xWidth(e,i){let a=0;a=Array.from(e.children()).reduce((n,o)=>n+o.offsetWidth+i,a),e.width(a)}fixControlsPosition(e){var i;let a=e.get(0),n=(i=a==null?void 0:a.querySelector("article img"))==null?void 0:i.offsetHeight;[...a.parentNode.querySelectorAll(".lSAction .lSPrev, .lSAction .lSNext")].forEach(l=>l.style.top=`${n/2}px`)}quiz(){let e=$('[rel="js-quiz-slider"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({item:1,pager:!1,adaptiveHeight:!0,enableDrag:!1,prevHtml:this.prev,nextHtml:this.next})})}club(){let e=$('[rel="js-club-slider"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({pager:!1,enableDrag:!1,autoWidth:!0,slideMargin:30,addClass:"club-slider",prevHtml:this.prev,nextHtml:this.next})})}candidat(){let e=$('[rel="js-candidat-slider"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({pager:!1,enableDrag:!1,autoWidth:!0,slideMargin:30,addClass:"candidat-slider",prevHtml:this.prev,nextHtml:this.next}),e.removeAttr("data-state")})}eventBar(){let e=$('[rel="js-event-bar-slider"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({pager:!1,enableDrag:!1,autoWidth:!0,slideMargin:60,addClass:"event-bar-slider",prevHtml:this.prev,nextHtml:this.next}),e.removeAttr("data-state")})}cinema(){let e=$('[rel="js-cinema-slider"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({pager:!1,autoWidth:!0,enableDrag:!0,loop:!1,prevHtml:this.prev,nextHtml:this.next,onAfterSlide:function(){D.lazyload.update()}})})}diaporama(){var e=10,i=Math.ceil($('[rel="js-slideshow"] li').length/e),a=1,n=null;let o=$('[rel="js-slideshow"]');o.length!==0&&this._attachToOberver(o.get(0),()=>{var l=o.lightSlider({item:1,slideMargin:0,galleryMargin:25,enableDrag:!1,enableTouch:!0,pager:!1,prevHtml:'<span class="icon-chevron-left"></span>',nextHtml:'<span class="icon-chevron-right"></span>',onSliderLoad:c=>{this._updateSlideshow(c);var r=document.querySelector('[rel="js-slideshow"]'),u=function(E,j){for(var A in E){var F=E[A];(F.type=="attributes"&&F.attributeName=="class"&&r.classList.contains("rightEnd")&&$(".slideshow-full__restart").attr("data-state")!="active"||F.type=="attributes"&&F.attributeName=="style"&&$(".slideshow-full__restart").attr("data-state")!="active"&&l.getCurrentSlideCount()==l.getTotalSlideCount()&&n!==null&&n>parseInt($(r).css("transform").split(",")[4].replace(/ /g,"")))&&($(".slideshow-full__restart").attr("data-state","active"),$('[rel="js-slideshow-more-list"]').attr("data-state","active"),$('[rel="js-slideshow-more-list"]').parent().css("height","auto"))}},g=new MutationObserver(u);g.observe(r,{attributes:!0})},onBeforeSlide:function(c,r){$(".slideshow-full__pager-link").removeAttr("data-state"),$('.slideshow-full__pager-link[data-index="'+r+'"]').attr("data-state","active")},onAfterSlide:(c,r)=>{this._updateSlideshow(c),typeof googletag!="undefined"&&googletag.pubads().refresh();var u=r+1;if(i>0){var g=(a-1)*e+1,E=a*e;if(u>E||u<g&&a>=1){a+=u>E?1:-1;var j=$(".slideshow-full__pager-wrapper").innerWidth()*(a-1)+5;$(".slideshow-full__pager-inner").css("transform","translateX(-"+j/10+"rem)")}}l.getCurrentSlideCount()==l.getTotalSlideCount()&&(n=parseInt(l.css("transform").split(",")[4].replace(/ /g,"")))},onBeforePrevSlide:function(c){$(".slideshow-full__restart").attr("data-state")=="active"&&$('[rel="js-slideshow-more-list"]').attr("data-state")=="active"&&($(".slideshow-full__restart").removeAttr("data-state"),$('[rel="js-slideshow-more-list"]').removeAttr("data-state"),setTimeout(function(){$('[rel="js-slideshow-more-list"]').parent().css("height","0")},500))}});$('[rel="js-slideshow"]').removeAttr("data-state"),$(document).on("click",".slideshow-full__pager-link",,$(document).on("click",".slideshow-full__pager-left",function(){l.goToPrevSlide()}),$(document).on("click",".slideshow-full__pager-right",function(){l.goToNextSlide()}),$(document).on("click",".slideshow-full__restart--link",function(c){c.preventDefault(),$(".slideshow-full__restart").removeAttr("data-state"),$('[rel="js-slideshow-more-list"]').removeAttr("data-state"),setTimeout(500),l.goToSlide(0)})})}_updateSlideshow(e){var i=$('[rel="js-slideshow-title"]'),a=$('[rel="js-slideshow-text"]'),n=$('[rel="js-slideshow-author"]'),o=$('[rel="js-slideshow-index"]'),l=$('[rel="js-slideshow-hr"]');i.html($("li.active",e).data("title")),a.html($("li.active",e).data("text")),n.html($("li.active",e).data("author")),o.html($("li.active",e).data("index")),i.html()===""&&a.html()===""&&n.html()===""?l.hide():l.show()}complements(){let e=$('[rel="js-complements"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({item:1,enableDrag:!1,slideMargin:0,pager:!1,prevHtml:'<span class="icon-chevron-left"></span>',nextHtml:'<span class="icon-chevron-right"></span>'}),e.removeAttr("data-state")})}eventSlider(){let e=$('[rel="slider-event"]');e.length>0&&this._attachToOberver(e.get(0),()=>{e.lightSlider({pager:!1,autoWidth:!0,slideMargin:parseInt($('[rel="slider-event"] .article-childs__item').css("margin-right")),enableDrag:!0,loop:!1,prevHtml:this.prev,nextHtml:this.next,onAfterSlide:function(){D.lazyload.update()}})})}_attachToOberver(e,i){q.attachToObserver(e,qe,i)}}lass Fe{init(){let e=$('[data-gallery="true"]'),i=$('[rel="js-article-inline-img"]'),a={controls:!1,pager:!1,download:!1,counter:!1,enableDrag:!1,enableTouch:!1};e.length>0&&this._attachToObserver(e.get(0),,i.length>0&&this._attachToObserver(i.get(0),()=>{i.each(function(){$(this).children().is(":not(a)")&&$(this).lightGallery(a)})})}var J={urlToArray:function(t){for(var e={},i=t.substring(t.indexOf("?")+1).split("&"),a=0;a<i.length;a++)if(!!i[a]){var n=i[a].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e},arrayToUrl:getRandomInt:getTopOffset:function(e){return e.getBoundingClientRect().top+window.pageYOffset-e.ownerDocument.documentElement.clientTop},isBelowViewport:function(e,i,a){var n=i===window?window.innerHeight+window.pageYOffset:this.getTopOffset(i)+i.offsetHeight;return n<=this.getTopOffset(e)-a},getLeftOffset:isAtRightOfViewport:function(e,i,a){var n=window.innerWidth,o=i===window?n+window.pageXOffset:this.getLeftOffset(i)+n;return o<=this.getLeftOffset(e)-a},isAboveViewport:function(e,i,a){var n=i===window?window.pageYOffset:this.getTopOffset(i);return n>=this.getTopOffset(e)+a+e.offsetHeight},isAtLeftOfViewport:function(e,i,a){var n=i===window?window.pageXOffset:this.getLeftOffset(i);return n>=this.getLeftOffset(e)+a+e.offsetWidth},isInsideViewport:function(t,e,i){return!this.isBelowViewport(t,e,i)&&!this.isAboveViewport(t,e,i)&&!this.isAtRightOfViewport(t,e,i)&&!this.isAtLeftOfViewport(t,e,i)},iOS:,Ue={init:function(){this.idalgo(),this.sportTabs()},idalgo:function(){var t=document.querySelector("section[data-idalgo-loader-src]"),e=t?J.isInsideViewport(t,window,300):!1,i=function(){e=t?J.isInsideViewport(t,window,300):!1,e&&(a(),window.removeEventListener("scroll",i))},a=function(){$.cachedScript(ldi_conf.idalgo.script).fail(};t&&e?a():t&&!e&&window.addEventListener("scroll",i)},sportTabs:function(){$(".idalgotab").on("click",function(){$(".sport-tabs").hide(),$(".idalgotab").attr("data-state",""),$(this).attr("data-state","active");var t=$(this).data("tab");$("#"+t).show()})}},Ge={form:$('form[rel="js-search-form"]'),headerSeachForm:$('form[rel="js-header-search-form"]'),agendaForm:$('form[rel="js-agenda-search-box"]'),init:archeSearch:function(){let t=$('[rel="js-search-where-autocomplete"]');t.length>0&&B(function(){var e=t.materialize_autocomplete({cacheable:!1,limit:10,dropdown:{el:"#search-where-autocomplete-dropdown"},hidden:{el:"#search-where-autocomplete-hidden"},getData:function(i,a){$.get("/ajax/communes-ac",{query:i}).done(}});e.$el.data("prefill-value")&&$.get("/ajax/communes-ac-rev",{query:e.$el.data("prefill-value")}).done(,e.$el.keyup(function(){$(this).val()===""&&e.$hidden.val("")})})},headerSearch:function(){let t=$('input[name="q"]',this.headerSeachForm);t.length>0&&B(function(){t.each(function(){$(this).on("keyup",function(e){e.keyCode===13&&e.target.form.submit()}).materialize_autocomplete({cacheable:!1,limit:13,getData:function(e,i){$.get("/ajax/search-ac",{query:e}).done(function(a){var n=[];for(var o in a.results)n.push({id:a.results[o].uri,text:a.results[o].text});i(e,n)})},onSelect:function(e){document.location.href=e.id}})})})},communesSearch:function(){let t=$('[rel="js-hp-communes-autocomplete"], input[rel="autocomplete-cities"]');t.length>0&&B(function(){t.materialize_autocomplete({cacheable:!1,limit:5,getData:function(e,i){$.get("/ajax/communes-ac",{query:e}).done(function(a){var n=[];for(var o in a.results)n.push({id:a.results[o].uri,text:a.results[o].text});i(e,n)})},onSelect:)})},electionSearch:function(){let t=$('input[rel="autocomplete-cities-elections"]');t.length>0&&B(function(){t.materialize_autocomplete({cacheable:!1,limit:10,dropdown:{el:"#search-where-autocomplete-dropdown"},getData:function(e,i){$.get("/ajax/resultats-elections-locations",{query:e}).done(function(a){let n=[],o=$('input[rel="autocomplete-cities-elections"]').attr("data-scope-department"),l=function(r){n.push({id:"/elections/resultats/"+r.url,text:r.name})},c=function(r){let u=r.code||r.zipCode;return u.substring(0,2)===o||u==="76"};for(let r in a)(typeof o!="undefined"&&c(a[r])||typeof o=="undefined")&&l(a[r]);i(e,n)})},onSelect:function(e){document.location.search.indexOf("webview=1")!==-1&&(e.id+=(e.id.indexOf("?")!==-1?"&":"?")+"webview=1"),document.location.href=e.id}})})}},Xe={form:$('form[data-form="agenda"]'),autocompleteMaxSize:10,init:function(){var t=this;t.scrollTo(),t.saveElement(),t.saveSearch(),t.form.each(function(){var e="#"+$('[id^="agenda-insee-appender"]',$(this)).attr("id"),i="#"+$('[id^="agenda-insee-dropdown"]',$(this)).attr("id"),a="#"+$('[id^="agenda-insee-hidden"]',$(this)).attr("id"),n,o={};n=t.autocomplete($(this),e,i,a,o),t.addCity($(this),i,o),t.removeCity($(this),e,o),t.dateHandler($(this)),t.prepareForm($(this)),$(this).on("reset",}),$('[rel="js-add-event"]').on("click",function(){var e=$(this);return $(".panel-calendar").slideToggle("fast",function(){e.text($(".panel-calendar").is(":visible")?"Fermer":"Ajouter \xE0 l'agenda")}),!1}),$('[rel="js-ical-link"]').on("click",function(){return document.location.href=$(this).data("href"),!1})},autocomplete:function(t,e,i,a,n){var o=this,l=$('[rel="js-agenda-insee"]',t);l.length>0&&B(function(){var c=l.materialize_autocomplete({cacheable:!1,limit:10,multiple:{enable:!0,maxSize:o.autocompleteMaxSize,onExist:function(r){I(},onExceed:function(r){I(function(){Materialize.toast("Vous ne pouvez pas ajouter plus de "+r+" villes",2e3)})}},appender:{el:e,tagName:"div",className:"agenda-form__cities",tagTemplate:'<div class="chip" data-id="<%= item.id %>" data-text="<%= item.text %>"><i class="close"></i><%= item.text %></div>'},dropdown:{el:i,tagName:"ul",className:"ac-dropdown",itemTemplate:'<li class="ac-item" data-id="<%= item.id %>" data-path="<%= item.leapath %>" data-text="<%= item.text %>"><a role="button"><%= item.text %></a></li>',noItem:""},hidden:{el:a},getData:function(r,u){$.get("/ajax/communes-ac",{query:r,multisite:1}).done(function(g){var E=[];N(),g.results.forEach(function(j){j.insee&&E.push({id:parseInt(j.insee),leapath:j.id,text:j.text})}),u(r,E)})}});return c.$el.data("prefill-value")&&$.get("/ajax/communes-ac-rev",{query:c.$el.data("prefill-value"),multisite:1}).done(function(r){var u=[];r.results.forEach(function(g){if(g.insee){var E=parseInt(g.insee);u.push({id:E,leapath:g.id,text:g.text}),n[E]=g.id}}),u.forEach(}),c})},addCity:function(t,e,i){var a=this,n=$('[name="where"]',t);$(e).on("click","[data-id]",function(){var o=$(this).data("id"),l=$(this).data("path"),c=[];Object.keys(i).length<a.autocompleteMaxSize&&(i[o]=l,$.each(i,function(r,u){c.push(u)}),n.val(c.join(",")))})},removeCity:function(t,e,i){var a=$('[name="where"]',t);$(e).on("click","[data-id] .close",function(){var n=$(this).parent().data("id"),o=[];delete i[n],$.each(i,,a.val(o.join(","))})},dateHandler:function(t){let e=$('input[type="radio"]',t),i=$('input[data-name="from"]',t),a=$('input[data-name="to"]',t);e.on("change",function(){let n=be($(this).val());i.val(n.from),a.val(n.to)}),i.on("click",function(){$('input[name="date"]',t).prop("checked",!1)}),a.on("click",function(){$('input[name="date"]',t).prop("checked",!1)})},prepareForm:function(t){var e=$('[data-name="path"]',t),i=$('[name="path"]',t),a=$('[type="submit"]',t);a.on("click",function(n){n.preventDefault(),i.val(e.val().join(",")),t.submit()})},resetForm:function(t,e,i){var a=$('[type="text"], [type="date"], [type="hidden"], [type="radio"], [type="checkbox"]',t),n=$('[data-name="path"]',t);$.each(i,function(o,l){var c={id:parseInt(o),text:l};e.remove(c)}),a.removeAttr("value").removeAttr("checked").removeAttr("data-prefill-value"),n.val(""),$("option",n).prop("selected",!1).prop("defaultSelected",!1),n.material_select("destroy"),n.multiple_select("destroy"),n.material_select(),n.multiple_select(),i={}},saveElement:function(){$(document).on("click",".agenda-article[id]",function(){var t=document.querySelector("title").text,e=location.search;window.history.replaceState(location.href,t,e+"#"+$(this).attr("id"))})},saveSearch:function(){$(document).on("click","#agenda-pager",function(){var t=document.querySelector("title").text,e=location.search,i=J.urlToArray(e);i.agendapg=$(this).data("page"),e="?"+J.arrayToUrl(i),window.history.replaceState(location.href,t,e)})},scrollTo:function(){if(location.pathname==="/agenda/"&&location.hash){var t=$(location.hash);if(t.length>0){var e=t.offset().top-parseInt($("body").css("padding-top"));$("html, body").animate({scrollTop:e},500)}}}};const be=t=>{let e=null,i=null,a=new Date,n=new Date,o=new Date;switch(t){case"today":e=i=ee(a);break;case"tomorrow":a.setDate(a.getDate()+1),e=i=ee(a);break;case"weekend":n=n.setDate(n.getDate()-(n.getDay()-5)+1),o=o.setDate(o.getDate()-(o.getDay()-1)+6),e=ee(new Date(n)),i=ee(new Date(o));break;default:throw new Error(`Invalid date string ${t}`)}return{from:e,to:i}},ee=we=let ye={panel:null,content:null,close:null,link:null,build:function(){let t=['<div class="agenda-map__panel">','<div class="agenda-map__panel-header">','<button class="agenda-map__panel-close"><i class="icon-chevron-left"></i> Retour</button>',"</div>",'<div class="agenda-map__panel-content"></div>','<div class="agenda-map__panel-footer">','<a class="agenda-map__panel-footer-link" href="#" target="_blank">Voir le d\xE9tail</a>',"</div>","</div>"].join("");te.container.insertAdjacentHTML("beforeend",t),this.panel=document.querySelector(".agenda-map__panel"),this.content=document.querySelector(".agenda-map__panel-content"),this.close=document.querySelector(".agenda-map__panel-close"),this.link=document.querySelector(".agenda-map__panel-footer-link"),this.close.addEventListener("click",,L.DomEvent.disableScrollPropagation(this.panel),L.DomEvent.disableClickPropagation(this.panel)},update:function(t){let e;const i=a=function(r,u){let g="";return r&&(g+=r),r&&u&&(g+=" - "),u&&(g+=u.nom+" ("+u.cp[0]+")"),g},n=function(r){let u="";return r&&(u='<div class="agenda-map__panel-chapo">'+r+"</div>"),u},o=function(r,u,g){let E="";return(r&&u.length>0||g)&&(E+='<div class="agenda-map__panel-label">Tarif</div>',g?E+="Gratuit":(E+='<div class="agenda-map__panel-data">',u.forEach(function(j){let A=j.libelle?j.libelle+j.separateur:"";A+=j.prix?j.prix+"\u20AC":"",E+="<div>"+A+"</div>"}),E+="</div>")),E},l=function(r,u){let g="";return r&&u?g+="Du "+r+" au "+u:r&&(g+=r),g},c=function(r,u){let g="";return(r||u)&&(g+='<div class="agenda-map__panel-label">Contact</div>'),r&&(g+="<div>"+r+"</div>"),u&&(g+='<div><a href="'+u+'" target="_blank">Page facebook</a></div>'),g};e=['<div class="agenda-map__panel-topic">'+t.rubrique+"</div>",'<h3 class="agenda-article__title">'+t.titre+"</h3>",i(t.media),n(t.description),'<div class="agenda-map__panel-label">Adresse</div>','<div class="agenda-map__panel-data">'+a(t.adresse,t.commune)+"</div>",o(t.payant,t.tarifs),'<div class="agenda-map__panel-label">Date</div>','<div class="agenda-map__panel-data">'+l(t.startDate,t.endDate)+"</div>",c(t.tel,t.social)].join(""),$(this.content).empty(),this.content.insertAdjacentHTML("beforeend",e),this.link.setAttribute("href",t.link),t.currentSimplePath&&(this.link.setAttribute("data-xiti-action",`${t.currentSimplePath}::services::sortir::map-picto-${t.rubriqueSlug}-detail,A`),typeof window.xitiElementClickHandler=="function"&&this.link.addEventListener("click",),this.panel.dataset.state!=="open"&&(this.panel.dataset.state="open")}};const $e="agenda-map";let te={container:document.getElementById($e),leaflet:null,markersCluster:null,init:initSearchMap:function(){!this.container||we().then(()=>{this.leaflet=L.map($e,{maxZoom:18,zoomControl:!1}),L.control.zoom({position:"bottomright"}).addTo(this.leaflet),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'\xA9 OpenStreetMap<span class="agenda-map__generator"> | <a role="button" id="embed-generator" class="icon-share"></a></span>'}).addTo(this.leaflet),this.leaflet.addControl(new L.Control.Fullscreen({title:{false:"Voir en plein \xE9cran",true:"Sortir du plein \xE9cran"}})),ye.build(),this.addEvents(mapEvents),this.generateEmbed()})},inSudOuest:function(t,e){const i={lat1:46,lng1:-2,lat2:41,lng2:10};return t<i.lat1&&t>i.lat2&&e>i.lng1&&e<i.lng2},addEvents:function(t){let e=[];this.markersCluster=new L.MarkerClusterGroup,t.forEach(i=>{let a=L.icon({iconUrl:i.icon||"/img/icons/agenda/marker.png",iconSize:[44,44],className:"agenda-map__icon"}),n=L.marker([i.lat,i.lng],{icon:a}),o=i.rubrique+" - "+i.titre;this.inSudOuest(i.lat,i.lng)&&!i.cp&&e.push([i.lat,i.lng]),n.on("click",l=>{this.container.getAttribute("data-current-simple-path")&&(i.currentSimplePath=this.container.getAttribute("data-current-simple-path"),l.target.getElement().setAttribute("data-xiti-action",`${i.currentSimplePath}::services::sortir::map-picto-${i.rubriqueSlug},A`),typeof window.xitiElementClickHandler=="function"&&window.xitiElementClickHandler.call(l.target.getElement())),ye.update(i)}),this.markersCluster.addLayer(n),n.bindTooltip(o).openTooltip()}),e.length>0&&this.leaflet.fitBounds(e),this.leaflet.addLayer(this.markersCluster)},generateEmbed:function(){let t=document.getElementById("embed-generator"),e=document.getElementById("copied-field");t==null||t.addEventListener("click",function(){if(e){let i=location.href.replace("agenda","agenda/map");e.innerText='<iframe src="'+i+'" width="100%" rel="js-iframe-resize" scrolling="yes" frameborder="0"></iframe>',e.select(),document.execCommand("copy"),I(}})},updateSearchMap:clearSearchMapMarkers:initSingleEventMap:function(){let t="agenda-full__map";!document.getElementById(t)||we().then(()=>{let e=parseFloat(document.getElementById(t).dataset.latitude),i=parseFloat(document.getElementById(t).dataset.longitude),a=L.map(t).setView([e,i],11);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap"}).addTo(a),L.marker([e,i]).addTo(a),a.addControl(new L.Control.Fullscreen({title:{false:"Voir en plein \xE9cran",true:"Sortir du plein \xE9cran"}}))})}};const Je=var Ye={init:homepagePager:function(){const t=e=>{let i=$('[rel="js-home-pager"]'),a=$('[rel="js-home-pager-loader"]');a.addClass("active"),$.ajax({method:"GET",url:e}).done(function(n){i.replaceWith(n),a.removeClass("active"),D.lazyload&&D.lazyload.update()}).fail(function(){i.remove()})};$(document).on("click",'[rel="js-home-see-more"]',,$(window).on("scroll",function(){let e=$('[rel="js-home-see-more"]',document);$(window).scrollTop()+window.innerHeight>=$(document).height()&&e.length>0&&!e.is(":visible")&&t(e.data("href"))})},toggleTopic:function(){$('[rel="js-toggle-topic"]').on("click",},toggleDescription:function(){$('[rel="js-toggle-description"]').on("click",}};const Qe=()=>{window.location.pathname==="/"&&setTimeout(3e5)};var O={map:null,zoom:12,center:null,mapOptions:null,trafficLayer:null,cityLatLng:null,directionsService:null,directionsRenderer:null,autocompleteDeparture:null,autocompleteArrival:null,autocompleteOptions:null,transportMode:null,context:$('[rel="js-trafic"]'),init:function(){if($("#map-canvas").length>0){var t=ldi_conf.maps.gmapKey;$.cachedScript("https://maps.googleapis.com/maps/api/js?key="+t+"&libraries=places&callback=map.start")}},start:function(){var t=ldi_conf.maps.mainGpsLat,e=ldi_conf.maps.mainGpsLong;this.cityLatLng=new google.maps.LatLng(t,e),this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer,this.mapOptions={zoom:this.zoom,center:this.cityLatLng},this.autocompleteOptions={componentRestrictions:{country:"fr"}},this.autocompleteDeparture=new google.maps.places.Autocomplete(document.getElementById("start"),this.autocompleteOptions),this.autocompleteArrival=new google.maps.places.Autocomplete(document.getElementById("end"),this.autocompleteOptions),this.map=new google.maps.Map(document.getElementById("map-canvas"),this.mapOptions),this.trafficLayer=new google.maps.TrafficLayer,this.trafficLayer.setMap(this.map),this.events()},manageTabs:function(t){$('[rel="js-tab"].active',this.context).removeClass("active"),t.addClass("active")},events:function(){$('[rel="js-tab"]',this.context).on("click",function(){switch($(this).data("action")){case"city":O.displayCityAction($(this));break;case"city-center":O.displayCityCenterAction($(this));break;default:O.displayPathAction($(this))}}),$('[rel="js-draw-path"]',this.context).on("click",function(){$('[rel="js-start-input"]',this.context).val()===""?$('[rel="js-start-input"]',this.context).focus():$('[rel="js-end-input"]',this.context).val()===""?$('[rel="js-end-input"]',this.context).focus():$('[rel="js-transport"]',this.context).val()===""?$('[rel="js-transport"]',this.context).focus():O.drawPath()})},displayCityAction:function(t){O.manageTabs(t),O.deletePath(),O.zoomOut()},displayCityCenterAction:displayPathAction:function(t){O.manageTabs(t),$('[rel="js-form-trafic"]',this.context).show(),$('[rel="js-directions-panel"]',this.context).show(),O.moveCenter("small")},moveCenter:function(t){this.center=this.map.getCenter(),t==="small"?$('[rel="js-map"]',this.context).parent().addClass("l6"):$('[rel="js-map"]',this.context).parent().removeClass("l6"),google.maps.event.trigger(this.map,"resize"),this.map.setCenter(this.center)},zoomIn:function(){this.map.setZoom(14),this.map.setCenter(this.cityLatLng)},zoomOut:drawPath:function(){this.transportMode=document.getElementById("transport").value,this.directionsService.route({origin:document.getElementById("start").value,destination:document.getElementById("end").value,travelMode:google.maps.TravelMode[this.transportMode],provideRouteAlternatives:!0},function(t,e){e===google.maps.DirectionsStatus.OK?(O.directionsRenderer.setMap(O.map),O.directionsRenderer.setPanel(document.getElementById("directions-panel")),O.directionsRenderer.setDirections(t)):window.alert("Directions request failed due to "+e)})},deletePath:function(){$('[rel="js-form-trafic"]',this.context).hide(),$('[rel="js-directions-panel"]',this.context).hide(),this.directionsRenderer.setMap(null),this.directionsRenderer.setPanel(null),O.moveCenter("big")}};class Ke{enerate(e){let a=_().get(this.cookieName);return typeof a=="undefined"&&(a=this._draw(e)?"A":"B"),_().set(this.cookieName,a,{expires:1}),a}generateABC(){let i=_().get(this.cookieName);return typeof i=="undefined"&&(i=this._draw(33.3333)?"A":this._draw(50)?"B":"C"),_().set(this.cookieName,i,{expires:1}),i}_draw(e){return e>=100?!0:Math.random()*100<e}}var ne=Se={subscriptions:null,smartButtonId:"swg-button",init:function(){return ne(this,null,function*(){let t=this;_().defaults={secure:document.location.protocol==="https:"},swg_dejavu=!0,document.querySelector('[rel="js-article-premium"]')&&(self.SWG=self.SWG||[]).push(function(i){return ne(this,null,function*(){console.log("SwGable"),console.log("user.isSubscriber : ",S.isSubscriber),S.isSubscriber||(console.log("SwG show button"),console.log("subscriptions : ",i),$("#"+t.smartButtonId).show(),t.attachButton(i),t.eventManager(i),t.setOnLoginRequest(i),t.setOnPaymentResponse(i),t.setOnEntitlementsResponse(i)),S.isSubscriber&&!S.isSwgLinked&&(yield t.saveSubscription(i))})})})},attachButton:function(t){console.log("attachButton"),t.attachButton(document.getElementById(this.smartButtonId),{theme:"light",lang:"fr"},},eventManager:function(t){console.log("eventManager"),t.getEventManager().then(e=>{e.registerEventListener(i=>{switch(i.eventType){case 1007:dataLayer.push({event:"swg-button-click"});break;case 1006:dataLayer.push({event:"swg-offer-selected"});break;case 1014:dataLayer.push({event:"swg-user-cancel-payflow"});break;case 2e3:dataLayer.push({event:"swg-payment-failed"});break;case 1001:dataLayer.push({event:"swg-payment-complete"})}})})},setOnLoginRequest:function(t){console.log("setOnLoginRequest"),t.setOnLoginRequest(},setOnPaymentResponse:function(t){console.log("setOnPaymentResponse"),t.setOnPaymentResponse(function(e){e.then(function(i){$.ajax({url:ldi_conf.general.url_profil+"/swg/signin",type:"POST",async:!1,dataType:"json",xhrFields:{withCredentials:!0},data:{subscribe_response:JSON.stringify(i)}}).done(function(a){}).fail(function(){}),i.complete().then(function(){_().remove("ssochk"),document.location.reload()})})})},setOnEntitlementsResponse:function(t){console.log("setOnEntitlementsResponse"),t.setOnEntitlementsResponse(e=>{console.log("entitlementsPromise : ",e),e.then(i=>{if(console.log("entitlementsResponse : ",i),this.paywall(i.isReadyToPay),i.enablesThis()){const a=new Promise((n,o)=>{let l=!1;for(const c of i.entitlements)console.log("entitlement : ",c),c.source==="google"?$.ajax({url:ldi_conf.general.url_profil+"/swg/signin",type:"POST",async:!1,dataType:"json",xhrFields:{withCredentials:!0},data:{subscription_token:c.subscriptionToken}}).done(.fail(function(){}):$.ajax({url:ldi_conf.general.url_profil+"/swg/user-data",type:"POST",async:!1,dataType:"json",xhrFields:{withCredentials:!0},data:{customer_jwt_token:c.subscriptionToken}}).done(.fail(function(){});return n(l)});t.waitForSubscriptionLookup(a).then(n=>{n?t.showLoginPrompt().then(()=>{t.showLoginNotification().then(()=>{_().remove("ssochk"),document.location.reload()})},:t.completeDeferredAccountCreation({entitlements:i,consent:!0}).then(o=>{$.ajax({url:ldi_conf.general.url_profil+"/swg/signin",type:"POST",async:!1,dataType:"json",xhrFields:{withCredentials:!0},data:{subscribe_response:JSON.stringify(o)}}).done(.fail(,o.complete().then(()=>{_().remove("ssochk"),document.location.reload()})})}),i.ack()}else console.log("No access; Your logic here: i.e. meter, show a paywall, etc.")})})},saveSubscription:function(t){return ne(this,null,function*(){if(console.log("saveSubscription"),_().get("swg-linked-account")===void 0){const i=new Promise(n=>{$.getJSON(ldi_conf.general.url_profil+"/swg/auth-code?callback=?",});(yield t.saveSubscription()?$.ajax({url:ldi_conf.general.url_profil+"/swg/link-account",type:"POST",dataType:"json",xhrFields:{withCredentials:!0}}):_().set("swg-linked-account",!1,{expires:7})}})},paywall:function(t){console.log("paywall, isReadyToPay : ",t);let e=document.querySelector('[data-paywall-scenario="default"]'),i=document.querySelector('[data-paywall-scenario="ready-to-pay"]'),a=document.querySelector('[data-paywall-scenario="autoroute-digital-plus"]'),n=document.referrer?new URL(document.referrer).hostname.indexOf(ldi_conf.general.sitename)!==-1:!1;if(t)console.log("scenario : RTP"),e.style.display="none",i.style.display="block",dataLayer.push({"paywall.params":{paywall_type:"autoroute SWG"}}),dataLayer.push({event:"swg-paywall-rtp"});else if(!n&&a)if(new Ke("paywallABTesting").generate(50)==="A")e.style.display="none",a.style.display="block",dataLayer.push({"paywall.params":{paywall_type:"autoroute Digital+"}});else{const l="classique_offsite";let c=e.querySelector(".paywall__btn--subscribe"),r=c.getAttribute("href"),[u,g]=r.split("#");if(g){let E=new URLSearchParams(g);E.set("src_paywall",l),c.setAttribute("href",`${u}#${E.toString()}`)}dataLayer.push({"paywall.params":{paywall_type:l}})}else dataLayer.push({"paywall.params":{paywall_type:"classique_onsite"}}),dataLayer.push({event:"swg-paywall-default"});dataLayer.push({event:"paywall-scenario-ready"})}};const Ze=()=>{gaa_dejavu=!0;let t=document.querySelector('[rel="js-article-premium"]');const e=()=>{if(S.isAuthenticated)if(S.isSubscriber){let r=new Date(S.profileData.extraData.createdAt),u=new Date(S.profileData.extraData.createdAt);return{id:S.profileData.userData.md5,registrationTimestamp:Math.floor(r.getTime()/1e3),subscriptionTimestamp:Math.floor(u.getTime()/1e3),granted:!0,grantReason:"SUBSCRIBER"}}else{let r=new Date(S.profileData.extraData.createdAt);return{id:S.profileData.userData.md5,registrationTimestamp:Math.floor(r.getTime()/1e3),granted:!1}}else return{granted:!1}},i=()=>{console.log("unlockArticle"),window.pwll(document.querySelector('[rel="js-article-premium"]').dataset.articleToken)},a=n=new Promise(r=>{console.log("registerUserPromise"),GaaMetering.getGaaUserPromise().then(u=>{console.log("registerUserPromise, gaaUser : ",u),fetch(ldi_conf.general.url_profil+"/connect/google/gaa",{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(u)}).then(.then(})}),o=new Promise(()=>{console.log("handleLoginPromise"),GaaMetering.getLoginPromise().then(()=>{const r=encodeURIComponent(window.location.href),u=ldi_conf.general.url_profil;window.location=`${u}/login?SSO_Context=${r}`})}),l=new Promise(r=>{let u=e();console.log("publisherEntitlementPromise"),console.log(u),r(u)}),c=r=>{console.log("handle swg entitlement : SwG.init()"),console.log("handleSwGEntitlement, entitlements : ",r),i()};if(t&&!S.isSubscriber){console.log("GaaMetering.init");let r={googleApiClientId:gsi_client_id,allowedReferrers:[location.hostname,new URL(ldi_conf.general.url_profil).hostname],userState:e(),unlockArticle:i,showPaywall:a,registerUserPromise:n,handleLoginPromise:o,publisherEntitlementPromise:l};swg_active&&(r.handleSwGEntitlement=c),console.log("gaaConf : ",r),GaaMetering.init(r)}else swg_active&&!swg_dejavu&&Se.init()};class xe{static encodetatic decodeclass Te{static encode(e){let i;const a=xe.encode(e),n={},o=(a+"").split(""),l=[];let c,r=o[0],u=256;for(i=1;i<o.length;i++)c=o[i],n[r+c]!=null?r+=c:(l.push(r.length>1?n[r]:r.charCodeAt(0)),n[r+c]=u,u++,r=c);for(l.push(r.length>1?n[r]:r.charCodeAt(0)),i=0;i<l.length;i++)l[i]=String.fromCharCode(l[i]);return l.join("")}static decode(e){const i={},a=(e+"").split("");let n=a[0],o=n;const l=[n];let c=256,r;for(let u=1;u<a.length;u++){const g=a[u].charCodeAt(0);g<256?r=a[u]:r=i[g]?i[g]:o+n,l.push(r),n=r.charAt(0),i[c]=o+n,c++,o=r}return xe.decode(l.join(""))}}const Y=window.location.hostname.replace(/^(?:.+)(\.[^.]+\.[^.]+)$/,"$1"),et="hideCbExpirationBanner",Ce='[data-selector="cb-expiration-alert"]';var S={profileData:null,cookieLogin:"userinfo",cookieName:"userdata",cookieJWT:"ssojwt",isAuthenticated:!1,isSubscriber:!1,isPremium:!1,isSwgLinked:!1,userReady:!1,isGoogle:!1,meteoProcessed:!1,horoscopeProcessed:!1,init:function(){if(_().defaults={secure:document.location.protocol==="https:"},!ldi_conf.general.url_profil)return this.updateTagManager(),!0;this.initProfileData(),this.rewriteUrlHoroscope()},initProfileData:function(){let t=ldi_conf.general.url_profil+"/remote/getProfileDatas.php?jsonCallback=?&SSO_Context="+document.location;const e=_().get(this.cookieLogin),i=_().get(this.cookieJWT),a=e?JSON.parse(e):null,n=_().get("ssochk");if(a&&a.id_sso!==null){const o=this.getStoredData();o&&a&&o.userData.id===a.id_sso&&this.setProfileData(o)}a||!n?(i&&(t+="&t="+i),$.getJSON(t).done(o=>{this.setProfileData(o),o.activeSession?(this.storeData(o),a||_().set(this.cookieLogin,JSON.stringify({id_sso:o.userData.id}),{domain:Y}),n&&_().remove("ssochk",{domain:Y})):(this.storeData(),_().set("ssochk",1,{domain:Y}),a&&_().remove(this.cookieLogin,{domain:Y}),i&&_().remove(this.cookieJWT)),this.updateTagManager()}).fail():(this.setProfileData(),this.updateTagManager())},setProfileData:function(t){if(t&&t.activeSession?(this.profileData=t,this.isAuthenticated=!0,this.isSubscriber=this.profileData.subscriptionsData.isSubscriber,this.isPremium=this.profileData.subscriptionsData.isPremium,this.isSwgLinked=this.profileData.extraData.swgLinked,this.isGoogle=this.profileData.extraData.connectionMode==="google",this.updateWeather(this.profileData),this.updateHoroscope(this.profileData),this.isSubscriber&&this.showCbExpirationBanner(this.profileData.subscriptionsData.cbExpirationScenario,this.profileData.userData.subscriberId)):(this.profileData=null,this.isAuthenticated=!1,this.isSubscriber=!1,this.isPremium=!1,this.isSwgLinked=!1,this.isGoogle=!1),this.updatePage(),gaa_active&&!gaa_dejavu){let e=document.createElement("script"),i=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.onload=Ze,e.src="https://news.google.com/swg/js/v1/swg-gaa.js",i.parentNode.insertBefore(e,i)}swg_active&&!gaa_active&&!swg_dejavu&&Se.init(),!swg_active&&!gaa_active&&document.querySelector('[rel="js-article-premium"]')&&(dataLayer.push({"paywall.params":{paywall_type:"classique_onsite"}}),dataLayer.push({event:"paywall-scenario-ready"}))},updateTagManager:function(){if(dataLayer&&!this.userReady){let t=S.getTagManagerData();dataLayer.push({user:t}),dataLayer[0].restriction===3&&t.type!=="guest"&&t.type!=="free"&&dataLayer.push({restriction:2}),dataLayer.push({event:"user-ready"}),this.userReady=!0}},getTagManagerData:function(){var t,e,i,a,n;let o={id:null,md5:null,subscriberId:"",status:1,newsletter:0,type:"guest",connectionMode:"",parentSubscriberId:"",offerCodes:[],tiersPayeur:"",adsABTesting:"A"};if(this.isAuthenticated){let l=this.profileData.userData;o.id=l.id,o.md5=l.md5,o.status=l.status,o.type=l.category,o.newsletter=this.profileData.mailingsData!==void 0&&this.profileData.mailingsData.newsletter!==void 0&&this.profileData.mailingsData.newsletter===!0?1:0,o.scenarios=this.profileData.extraData.scenarios,o.subscriberId=(t=l.subscriberId)!=null?t:"",o.connectionMode=(e=this.profileData.extraData.connectionMode)!=null?e:"",o.parentSubscriberId=(i=this.profileData.extraData.parentSubscriberId)!=null?i:"",o.tiersPayeur=(a=this.profileData.subscriptionsData.tp)!=null?a:"",o.offerCodes=(n=this.profileData.subscriptionsData.offerCodes)!=null?n:[]}return o},updateWeather:function(t){if($('[rel="js-weather-change"]').length===0||this.meteoProcessed||typeof t.userData.postalCode=="undefined"||typeof t.userData.city=="undefined")return;const e=t.userData.postalCode,i=t.userData.city;this.meteoProcessed=!0,e&&fetch("/ajax/weather/"+e).then(a=>{if(!a.ok)throw new Error(a.status+" : "+a.statusText);return a.json()}).then(a=>{if(typeof a.forecast=="undefined")return;const n=a.forecast;$('[rel="js-weather-town"]').html(i),$('[rel="js-weather-label-0"]').html(n[0].description);for(let o=0;o<=2;o++)$(`[rel="js-weather-temps-${o}"]`).html(`${n[o].temp_min}\xB0 / ${n[o].temp_max}\xB0`),$(`[rel="js-weather-image-${o}"]`).attr("src",`/img/meteo/temps/${n[o].icon}`).attr("title",n[o].description)}).catch(},showCbExpirationBanner:function(t,e){const i=document.querySelectorAll(Ce),a=`${et}_${e}`;if(!(i.length===0||typeof t=="undefined")&&typeof _().get(a)=="undefined"){const n=document.querySelector(`${Ce}[data-scenario="${t}"]`);n.classList.remove("hide"),n.querySelectorAll('[data-dismiss="alert"]').forEach(function(o){o.addEventListener("click",function(){_().set(a,!0,{domain:Y,expires:5}),n.classList.add("hide")})})}},updateHoroscope:function(t){const e=$('[rel="js-horoscope"]');if(e.length===0||this.horoscopeProcessed||typeof t.userData.birthday=="undefined")return;const i=t.userData.birthday;this.horoscopeProcessed=!0,fetch("/ajax/horoscope/?birthday="+i).then(a=>{if(!a.ok)throw new Error;return a.json()}).then(a=>{for(const n in a){const o=n.charAt(0).toUpperCase()+n.substring(1);$('[rel="js-signe-img"]',e).attr("data-src",`/img/horoscope/${n}.png`),$('[rel="js-signe-text"]',e).html(o),$('[rel="js-previsions"]',e).html(a[n].Amour),$('[rel="js-lien-signe"]',e).attr("href","/services/horoscope/#"+n)}}).catch()},rewriteUrlHoroscope:function(){const t=document.location.href,e=t.indexOf("#");if(e!==-1){const i=`https://lindep.libreserviceweb.fr/astrologie/zodiaque/${t.substring(e+1,t.length)}.html`;$('[rel="js-horoscope-frame"]').attr("src",i)}},updatePage:function(){if(this.isAuthenticated){$('[rel="js-profile-link"]').attr("href",ldi_conf.general.url_profil+"/account/");var t=$('<img id="dynamic">'),e=$('<span class="navbar-top__nav-link-username truncate hide-on-med-and-down">'+this.profileData.userData.pseudo+"</span>");$('[rel="js-profile-link"]').empty(),t.attr("src",this.profileData.avatarData.url),t.addClass("navbar-top__nav-link-userimg"),t.appendTo('[rel="js-profile-link"]'),e.appendTo('[rel="js-profile-link"]'),$('[rel="js-profile-link"] .icon-user').remove(),$('[rel="js-comment-authenticated"]').removeClass("hide"),$(".js-authenticated-hide").hide(),typeof this.profileData.avatarData.url=="string"&&$('img[rel="js-user-avatar"]').attr("src",this.profileData.avatarData.url),$("a[data-authenticated-href]").each(function(){$(this).attr("href",$(this).data("authenticated-href"))}),$("[data-authenticated-text]").each(function(){$(this).html($(this).data("subscriber-text"))}),$(document).trigger("userReady")}else $('[rel="js-comment-anonymous"]').removeClass("hide"),this.googleOneTapSigninWithConsent();if(this.isSubscriber)$(".ad").css("height","auto"),$(".ad--outstream, .ad--article").css("display","none"),$('[rel="js-article-content"]').removeAttr("data-state"),(this.profileData.extraData.hebdo==="GDC"||this.profileData.extraData.hebdo==="LVF")&&$('[rel="js-header-sub"]').closest("li").remove(),$("a[data-subscriber-href]").each(function(){$(this).attr("href",$(this).data("subscriber-href"))}),$("[data-subscriber-text]").each(function(){$(this).html($(this).data("subscriber-text"))}),$('[rel="js-header-sub"]').addClass("btn--club").removeClass("btn--sub"),$('nav.header-top a.subscription, [rel="js-header-sub"]').addClass("passclub"),$("#newspaper-reconciliation").hide(),$('[rel="js-subscription-bloc"]').hide(),$('[rel="js-comments-limit"]').hide(),$(".js-subscription-hide").hide(),D.showMunicipales(),$(".subscriber-placeholder").show(),$(".ad--publi_haut, .ad--publi_bas").hide(),$(".slideshow-full--obfuscate .paywall").hide(),$(".slideshow-full--obfuscate").removeClass("slideshow-full--obfuscate");else if($(".js-no-subscription-hide").hide(),typeof _402_Show=="function")try{_402_Show()}catch(i){}this.isPremium&&($("a[data-premium-href]").each(,$("[data-premium-text]").each()},getStoredData:function(){if(typeof sessionStorage=="undefined")return null;const t=sessionStorage.getItem(this.cookieName);if(t){const e=JSON.parse(Te.decode(t));if(e)return e}return null},storeData:function(t){typeof sessionStorage!="undefined"&&(t?sessionStorage.setItem(this.cookieName,Te.encode(JSON.stringify(t))):(sessionStorage.removeItem(this.cookieName),sessionStorage.removeItem("userCity")))},googleOneTapSigninWithConsent:function(){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push(t=>{t.isConsentRequired()?t.getObservableOnUserConsentStatusForVendor("google").filter(.first().subscribe(:this.googleOneTapSignin()})},googleOneTapSignin:function(){gsi_client_id&&!document.querySelector("button#swg-button")&&(google.accounts.id.initialize({client_id:gsi_client_id,callback:function(t){let e=document.createElement("form");e.method="POST",e.action=ldi_conf.general.url_profil+"/connect/google/one-tap?sso_context="+encodeURI(gsi_sso_context);let i=document.createElement("input");i.value=t.credential,i.name="credential",e.appendChild(i),document.body.appendChild(e),e.submit()}}),google.accounts.id.prompt())}},tt={form:$("#reagir-form"),formMsg:$("#reagir-message"),comments:$('[rel="js-comments-comment"]'),seeMore:$('[rel="js-comments-see-more"]'),followThreadButton:$('[rel="js-follow-thread"]'),popinFollowCommentThread:$("#popin-follow-comment-thread"),init:function(){var t=this;this.form.on("submit",function(e){e.preventDefault();var i=$(this).attr("action"),a="Une erreur est survenue, le service devrait \xEAtre r\xE9tabli dans quelques instants...",n="Votre commentaire a bien \xE9t\xE9 pris en compte. Il appara\xEEtra sur le site lorsqu'il aura \xE9t\xE9 valid\xE9 par notre \xE9quipe de mod\xE9ration.",o="",l="red darken-1",c=l,r=!1;t.validate()&&($('[name="user_token"]',$(this)).length===0&&$("<input />").attr("type","hidden").attr("name","user_token").attr("value",S.profileData.userData.token||null).appendTo($(this)),$.post(i,$(this).serialize()).done(function(u){if(typeof u.status.code!="undefined"){if(typeof u.status.code!="undefined"&&u.status.code===200){o=typeof u.status.message!="undefined"?u.status.message:n,c="",t.form.hide();var g=parseInt(t.followThreadButton.attr("data-article-id")),E=$("#reagir-form input[name=parentcommentid]").val()!=0?parseInt($("#reagir-form input[name=parentcommentid]").val()):null,j=!1;if(S.profileData!=null&&S.profileData.userData.articlesSub!=null&&(S.profileData.userData.articlesSub.indexOf(g)!==-1?j=!0:E!=null&&(j=S.profileData.userData.articlesSub.indexOf(E)!==-1)),!j){var A=null;$("#reagir-form input[name=parentcommentid]").val()!=0?A=$("#reagir-form input[name=parentcommentid]").val():u.response.id_commentaire!=null?A=u.response.id_commentaire:typeof u.response.comment_id!="undefined"&&(A=u.response.comment_id),t.popinFollowCommentThread.length>0&&A!=null&&($("#reagir-form input[name=parentcommentid]").val(A),t.popinFollowCommentThread.slideDown())}}else typeof u.response.retour!="undefined"?o=u.response.retour:typeof u.status.message!="undefined"?o=u.status.message:o=a,c=l;typeof u.status.retry!="undefined"&&u.status.retry===!1&&(r=!0)}t.formMsg.empty().removeClass(l).addClass(c).text(o).show(),r&&($('textarea[name="texte"]',t.form).prop("disabled",!0),$("#post-btn",t.form).addClass("disabled")),D.lazyload&&D.lazyload.update()}).fail(function(u){t.formMsg.empty().addClass(c).text(a).show()}))}),$(document).on("click",".js-comments-reply",function(e){$('[name="parentcommentid"]',t.form).val($(this).data("parentid")),$("html, body").animate({scrollTop:$("#commentaires").offset().top-200},"slow"),$('[rel="js-comment-textarea"]').focus().attr("placeholder","R\xE9pondre \xE0 @"+$(this).data("pseudo"))}),$(document).on("click",".js-comments-report",function(e){if($('[rel="js-comment-authenticated"]').is(":visible")){var i=$(this).closest(".comment[data-id]").data("id");$('#report-form input[name="comment_id"]').val(i),$('#report-form textarea[name="motivation_txt"]').val(""),$("#comment-report-fields").show(),$("#comment-report-btn").show(),$("#comment-report-btn-close").addClass("hide"),$("#comment-report-msg").addClass("hide"),$("#comment-report").modal("open")}else $("html, body").animate({scrollTop:$("#commentaires").offset().top-200},"slow")}),$("#report-form").on("submit",function(e){e.preventDefault();var i=$(this).attr("action"),a=$('textarea[name="motivation_txt"]').val().trim();a?($('[name="user_token"]',$(this)).length===0&&$("<input />").attr("type","hidden").attr("name","user_token").attr("value",S.profileData.userData.token||null).appendTo($(this)),$("#comment-report-btn").hide(),$.post(i,$(this).serialize()).done(function(n){$("#comment-report-fields").hide(),$("#comment-report-msg").text(n.response).removeClass("hide"),$("#comment-report-btn-close").removeClass("hide").on("click",})):$("#comment-report-msg").text("Veuillez pr\xE9ciser les motifs de votre alerte").removeClass("hide")}),$("a",this.seeMore).on("click",function(e){e.preventDefault();var i=$('input[name="offset"]'),a=$('input[name="total"]'),n="/comments/"+$('input[name="info_id"]').val()+"/"+$('input[name="offset"]').val();$.get(n,function(o){t.seeMore.before(o),D.lazyload&&D.lazyload.update(),i.val(parseInt(i.val())+10),parseInt(i.val())>=parseInt(a.val())&&t.seeMore.hide()})})},validate:function(){var t=!1;return $(".js-comments-validate",this.form).each(function(e){var i=$(this);i.val().trim()===""&&(t=!0,i.addClass("invalid"))}),t&&this.formMsg.empty().addClass("red darken-1").text("Votre saisie contient des erreurs, veuillez les corriger afin de valider votre commentaire").show(),!t}};class it{reloadPage(){let i=setInterval(function(){location.reload()},12e4);window.addEventListener("scroll",}}var at=s(518),oe={element:document.querySelector('[rel="js-article-content"]'),payant:document.querySelector('[rel="js-article-premium"]'),noFollowOnExternalLinks:!1,paywallConfig:{isServer:!1,isEarly:!1},videoEmbed:$("article .extemb-container iframe"),init:function(){let t=this;t.videoEmbed.css("width","100%"),document.querySelector("[data-paywall-config]")&&(this.paywallConfig=JSON.parse(document.querySelector("[data-paywall-config]").dataset.paywallConfig)),this.initLive(),this.fixChildsHeight(),this.initExternalLinks(),this.hit(),this.figcaption(),this.anchor(),this.dfpify(),this.paywallPosition(),this.checkFbNewsRelease(),this.taboolaComplianceHandler(),window.pwll=this.paywall,dataLayer.push({event:"paywall-ready"}),$(document).on("userReady",},paywall:function(t=null){let e=document.querySelector('[rel="js-article-premium"]');if((S.isSubscriber||t)&&e!==null){let i=e.dataset.articleToken;if(i&&(!t||t===i))if(oe.paywallConfig.isServer)$.get("/ajax/article-content?k="+i,;else{$("[rel=js-article-content]").removeAttr("data-state").removeAttr("data-selection").removeAttr("style"),$(".paywall").hide();let n=this.element.querySelectorAll("p")[1].nextElementSibling;for(;n!==null;)n.removeAttribute("aria-hidden"),n=n.nextElementSibling}}},checkFbNewsRelease:function(){let t=J.urlToArray(location.search);t.fb_news_token!==void 0&&$.post("/ajax/fbnews-token",{token:t.fb_news_token,article:document.querySelector('link[rel="canonical"]').href}).done(function(e){if(e.bypass===!0){let i=document.querySelector('[rel="js-article-premium"]');oe.paywall(i.dataset.articleToken)}})},paywallPosition:function(){if(this.element&&this.payant){let t=document.getElementById("pub_dfp_outstream"),e=this.element.querySelectorAll("p");if(this.paywallConfig.isEarly)this.element.style.maxHeight="11.5rem";else if(!this.paywallConfig.isServer&&e.length>=2){const i=()=>{let o=$(e[0]).outerHeight(!0),l=$(t).outerHeight(!0),c=$(e[1]).outerHeight(!0)*30/100+50,r=Math.ceil(o+l+c);this.element.style.maxHeight=`${r/10}rem`};let a=e[1].nextElementSibling;for(;a!==null;)a.setAttribute("aria-hidden","true"),a=a.nextElementSibling;i(),new ResizeObserver(()=>{var o;((o=document.querySelector(".paywall"))==null?void 0:o.getBoundingClientRect().height)>0&&i()}).observe(t)}}},fixChildsHeight:function(){if(H("xl"))return;const t=()=>{let e=0;$(".article-full__section-1:not(.article-full__section-1--footer) > *").each(,$(".article-full__section-2").css("max-height",e+"px"),$(".article-full__section-2 .article-full__childs-container").css("padding-right","0.5rem")};t(),this.element&&typeof ResizeObserver=="function"&&new ResizeObserver(.observe(this.element)},hit:function(){var t;const e=(t=document.querySelector("[data-article-id]"))==null?void 0:t.getAttribute("data-article-id");e&&fetch(`/api/fo/articles-les-plus/hit/${e}`,{method:"post"})},anchor:function(){$('a[href^="#"][rel="js-anchor"]').click(function(){var t;let e=$(this).attr("href");if(e!=="#")return $("html, body").animate({scrollTop:$(e).offset().top-(((t=document.querySelector('[rel="js-header-container"]'))==null?void 0:t.clientHeight)||0)},"slow"),!1})},initExternalLinks:function(){var t=document.querySelector('article [rel="js-article-content"]');if(t)for(var e=t.getElementsByTagName("a"),i=0;i<e.length;i++)e[i].host&&e[i].host!==location.host&&(e[i].setAttribute("target","_blank"),this.noFollowOnExternalLinks&&e[i].setAttribute("rel","nofollow"))},figcaption:function(){var t=$('[rel="js-article-detail-figcaption"]'),e=$('[rel="js-article-detail-legend"]'),i=$('[rel="js-article-detail-credit"]');t.each(function(){$(e)[0].offsetWidth<$(e)[0].scrollWidth&&($('[rel="js-more"]',$(this)).removeClass("invisible"),$(this).on("click",)})},followThread:function(){var t=$(".follow-thread"),e=$('[rel="js-follow-thread"]');if(e.length>0){t.removeClass("hide");var i=parseInt(e.attr("data-article-id")),a=S.profileData!=null&&S.profileData.userData.articlesSub!=null?S.profileData.userData.articlesSub.indexOf(i)!==-1:!1,n=function(o){var l=o.text();o.text(o.attr("data-alt-text")),o.attr("data-alt-text",l)};a!==!1&&n(e),e.on("click",function(o){function l(){a!==!1?delete S.profileData.userData.articlesSub[S.profileData.userData.articlesSub.indexOf(i)]:(S.profileData.userData.articlesSub==null?S.profileData.userData.articlesSub=[i]:S.profileData.userData.articlesSub.push(i),S.storeData(S.profileData)),n(e)}function c(){$("#follow-message").slideDown(),setTimeout(function(){$("#follow-message").slideUp()},5e3)}return S.isAuthenticated?$.ajax({dataType:"json",url:ldi_conf.general.url_profil+"/ajax/abonnement/?article_id="+i,xhrFields:{withCredentials:!0},success:function(r){r=="ok"?l():($("#follow-message").html(r),c())},error:function(){c()}}):window.location=ldi_conf.general.url_profil+"/login?redirect=1",o.preventDefault(),!1})}},followCommentThread:function(){var t=$('[rel="js-follow-comment-thread"]');t.on("click",function(e){var i=$("input[name=parentcommentid]").val();function a(){$("#follow-message").slideDown(),setTimeout(5e3)}return S.isAuthenticated?$.ajax({dataType:"json",url:ldi_conf.general.url_profil+"/ajax/abonnement/?comment_id="+i,xhrFields:{withCredentials:!0},success:function(n){n=="ok"?$("#popin-follow-comment-thread").slideUp():a()},error:):window.location=ldi_conf.general.url_profil+"/login?redirect=1",e.preventDefault(),!1})},dfpify:function(){let t=document.getElementById("pub_dfp_outstream");if(this.element&&t){let e=document.getElementById("pub_dfp_article"),i=document.getElementById("pub_dfp_mobile_droite_haute"),a=document.getElementById("pub_dfp_mobile_droite_basse"),n=document.getElementById("dfp-slot1-taboola"),o=document.getElementById("dfp-slot2-taboola"),l={value:!1},c={value:!1},r={value:!1},u=t.nextElementSibling,g=0,E=function(j,A,F){for(;j&&!F.value;)(j.tagName==="P"||j.classList.contains("live-post"))&&(g+=j.textContent.length,(g>500&&j.nextElementSibling||A.id==="pub_dfp_article"&&g<250&&!j.nextElementSibling)&&(j.insertAdjacentElement("afterend",A),F.value=!0)),j=j.nextElementSibling};e&&i&&(E(u,e,l),u=e.nextElementSibling,g=0,E(u,i,c)),c.value||(n.insertAdjacentElement("afterbegin",i),o.insertAdjacentElement("afterbegin",a),c.value=!0,r.value=!0),!r.value&&a&&(u=i.nextElementSibling,g=0,E(u,a,r),r.value||(n.hasChildNodes()?o.insertAdjacentElement("afterbegin",a):n.insertAdjacentElement("afterbegin",a),r.value=!0)),e&&!e.nextElementSibling&&e.parentElement.removeChild(e)}},taboolaComplianceHandler:function(){const t=document.querySelector(".article-full__body");if(!t||X("lg"))return;let e={batch:null,canShow:!1,init:function(){this.batch=document.getElementById("batchsdk-ui-alert-container"),this.canShow=window.innerHeight>t.getBoundingClientRect().bottom},canProcess:hide:;window.addEventListener("scroll",(0,at.Z)(function(){e.init(),!!e.canProcess()&&e.canShow&&e.hide()},25))},initLive:function(){let t=document.querySelector("[data-live-config]");if(t){let e=new it;JSON.parse(t.dataset.liveConfig).isLive&&e.reloadPage()}}},V=s(599),re=s(545),nt=Object.defineProperty,ot=(t,e,i)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,se=(t,e,i)=>(ot(t,typeof e!="symbol"?e+"":e,i),i);class le extends V.Qr{onnect(){(0,re.Nr)(this),(0,re.w_)(this),this.target=this.hasTargetTarget?this.targetTarget:this.element}windowResize(){X("lg")?this.target.style.height=Math.ceil(this.repositoryTarget.getBoundingClientRect().height)+"px":this.target.style.height="auto"}}se(le,"debounces",["windowResize"]),se(le,"targets",["repository","target"]);var rt=Object.defineProperty,st=(t,e,i)=>e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ce=(t,e,i)=>(st(t,typeof e!="symbol"?e+"":e,i),i);const lt=!!navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Mobi/i)&&"ontouchstart"in document.documentElement;class de extends V.Qr{constructor(){super(...arguments),ce(this,"checkXPosition",()=>{const e=this.containerTarget.scrollWidth-this.containerTarget.clientWidth;!this.hasPreviousTarget||!this.hasNextTarget||(this.containerTarget.scrollLeft<=0?this.previousTarget.classList.add("disabled"):this.previousTarget.classList.remove("disabled"),this.containerTarget.scrollLeft>=e?this.nextTarget.classList.add("disabled"):this.nextTarget.classList.remove("disabled"))})}initialize(){this.containerTarget.addEventListener("scroll",this.checkXPosition),!(this.hideControlsOnMobileValue&&lt)&&(this._isOverflown()&&this.hasNextTarget&&this.nextTarget.classList.remove("disabled"),this.draggableValue&&this.draggableToScroll())}draggableToScroll(){this.containerTarget.style.cursor="grab";let e={top:0,left:0,x:0,y:0},i=!1;const a=n=c=>{a(c),this.containerTarget.style.cursor="grabbing",this.containerTarget.style.userSelect="none",this.containerTarget.style.scrollBehavior="auto",e={left:this.containerTarget.scrollLeft,top:this.containerTarget.scrollTop,x:c.clientX,y:c.clientY},this.containerTarget.addEventListener("mousemove",o),this.containerTarget.addEventListener("mouseup",l)},o=c=>{i=!0;const r=c.clientX-e.x,u=c.clientY-e.y;this.containerTarget.scrollTop=e.top-u,this.containerTarget.scrollLeft=e.left-r},l=()=>{this.containerTarget.style.cursor="grab",this.containerTarget.style.removeProperty("user-select"),this.containerTarget.style.scrollBehavior="smooth",i?this.containerTarget.addEventListener("click",a):this.containerTarget.removeEventListener("click",a),i=!1,this.containerTarget.removeEventListener("mousemove",o),this.containerTarget.removeEventListener("mouseup",l)};this.containerTarget.addEventListener("mousedown",n)}next(){const e=this.containerTarget.scrollWidth-this.containerTarget.clientWidth;this.containerTarget.scrollLeft+=this.scrollSpeedValue,this.containerTarget.scrollLeft+this.scrollSpeedValue*2>e&&(this.containerTarget.scrollLeft=e)}previous(){this.containerTarget.scrollLeft-=this.scrollSpeedValue,this.containerTarget.scrollLeft-this.scrollSpeedValue*2<0&&(this.containerTarget.scrollLeft=0)}_isOverflown(){return this.containerTarget.scrollWidth>this.containerTarget.clientWidth}}ce(de,"targets",["container","next","previous"]),ce(de,"values",{hideControlsOnMobile:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},scrollSpeed:{type:Number,default:300}});var ct=class extends V.Qr{toggle(t){let e=t.currentTarget.parentElement.querySelector(".active");document.getElementById(e.dataset.tabsTarget).classList.add("hide"),e.classList.remove("active"),t.currentTarget.classList.add("active"),document.getElementById(t.currentTarget.dataset.tabsTarget).classList.remove("hide")}},dt=Object.defineProperty,ut=(t,e,i)=>e in t?dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ft=(t,e,i)=>(ut(t,typeof e!="symbol"?e+"":e,i),i);class Ee extends V.Qr{switchLinksEmplacement(){if(this._isOverflown())for(this.dropdownBtnTarget.style.display="block";this._isOverflown();)this.dropdownListTarget.insertAdjacentElement("afterbegin",this.listTarget.children[this.listTarget.childElementCount-1]);else this.dropdownBtnTarget.style.display="none"}ft(Ee,"targets",["list","dropdownBtn","dropdownList"]);var ht=Object.defineProperty,pt=(t,e,i)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,je=(t,e,i)=>(pt(t,typeof e!="symbol"?e+"":e,i),i);const _e="my-city-traffic--open";class Le extends V.Qr{constructor(){super(...arguments),je(this,"panelOpened",!1)}toggle(e){this.panelOpened?(this.mapTarget.classList.add("hide"),this.mapTarget.classList.remove("show"),this.element.classList.remove(_e),this.panelOpened=!1,H("lg")&&(e.currentTarget.innerText="Voir le trafic en temps r\xE9el")):(this.mapTarget.classList.remove("hide"),this.mapTarget.classList.add("show"),this.element.classList.add(_e),this.panelOpened=!0,H("lg")&&(e.currentTarget.innerText="Fermer le bulletin"))}}je(Le,"targets",["map"]);var mt=Object.defineProperty,gt=(t,e,i)=>e in t?mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,vt=(t,e,i)=>(gt(t,typeof e!="symbol"?e+"":e,i),i);const ke="my-city-weather--open";var bt=class extends V.Qr{oggle(){this.panelOpened?(this.element.classList.remove(ke),this.panelOpened=!1):(this.element.classList.add(ke),this.panelOpened=!0)}},wt=Object.defineProperty,yt=ue=const $t="/ajax/agenda";class ie extends V.Qr{connect(){(0,re.Nr)(this);const e=this.listingTarget.querySelectorAll(".my-city-agenda-article:nth-child(-n+4)");let i=0;e.forEach(a=>{i+=a.clientHeight+parseInt(getComputedStyle(a).marginBottom)}),this.listingTarget.style.height=Math.max(i,500)+"px"}updateDay(e){var i;this.dateValue=be(e.currentTarget.dataset.value),(i=e.currentTarget.parentNode.querySelector(".active"))==null||i.classList.remove("active"),e.currentTarget.classList.add("active"),this._fetch()}updateCategory(e){var i;e.currentTarget.classList.contains("active")?(this.categoryValue="",e.currentTarget.classList.remove("active")):(this.categoryValue=e.currentTarget.dataset.value,(i=e.currentTarget.parentNode.querySelector(".active"))==null||i.classList.remove("active"),e.currentTarget.classList.add("active")),this._fetch()}updateQuery(e){this.qValue=e.target.value,e.target.parentNode.classList.add("loading"),this._fetch().then(}_fetch(){return fetch(`${$t}?${new URLSearchParams(this._buildQuery())}`,{headers:{"X-Requested-With":"XMLHttpRequest"},method:"get"}).then(e=>{if(e.status===200)return e.json();throw new Error("Une erreur technique est survenue")}).then(e=>{e.events.length>0?(this.listingTarget.innerHTML=e.events,D.lazyload.update()):this.listingTarget.innerHTML="<p>Aucun r\xE9sultat ne correspond \xE0 votre recherche...</p>",e.mapEvents?te.updateSearchMap(e.mapEvents):te.clearSearchMapMarkers()}).catch(e=>{I(})}_buildQuery(){let e={insee:this.inseeValue,from:this.dateValue.from,to:this.dateValue.to,path:this.categoryValue,q:this.qValue};return this._isMapVisible()&&(e.map=1),e}_isMapVisible(){return this.mapTarget.getBoundingClientRect().height>0&&this.mapTarget.getBoundingClientRect().width>0}}ue(ie,"debounces",["updateQuery"]),ue(ie,"targets",["listing","map"]),ue(ie,"values",{insee:String,date:Object,category:String,q:String});let W=V.Mx.start();W.register("fixheight",le),W.register("slider",de),W.register("tabs",ct),W.register("my-city--header",Ee),W.register("my-city--traffic",Le),W.register("my-city--weather",bt),W.register("my-city--agenda",ie);const Oe='blockquote[data-class="twitter-tweet"]',fe='blockquote[data-class="instagram-media"]',he='blockquote[data-class="tiktok-embed"]',St=[Oe,fe,he],De="article-full__body-content--no-consent";class xt{constructor(){this.article=document.querySelector('[rel="js-article-content"]'),this.twitterScriptAdded=!1}init(){!this.article||(document.cookie.includes("euconsent-v2")?this._didomiOnReady():this._consentChangeListener(this._didomiOnReady))}_consentChangeListener(e){window.didomiEventListeners=window.didomiEventListeners||[],window.didomiEventListeners.push({event:"consent.changed",listener:e.apply(this)})}_didomiOnReady(){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push(e=>{__tcfapi("addEventListener",2,(i,a)=>{a&&(i.eventStatus==="tcloaded"||i.eventStatus==="useractioncomplete")&&(e.getUserStatus().purposes.consent.enabled.includes("cookies")?this._consentHandler():this._noConsentHandler())})})}_consentHandler(){this.article.classList.remove(De),document.querySelectorAll(".article-full__thirdparty-consent-required").forEach(;const e=document.getElementById("r-cookies-wall");e&&(e.style.display="none");const i=document.querySelector(fe),a=document.querySelector(he),n=document.querySelectorAll(Oe),o=()=>new Promise(;i&&q.attachToObserver(i,o,this._loadAll.bind(this,fe,"https://www.instagram.com/embed.js")),a&&q.attachToObserver(a,o,this._loadAll.bind(this,he,"https://www.tiktok.com/embed.js")),n.forEach(l=>{q.attachToObserver(l,o,this._loadExecuteTwitter.bind(this,l))})}_loadAll(e,i){document.querySelectorAll(e).forEach(l=>{l.classList.add(l.getAttribute("data-class"))});let n=document.createElement("script"),o=document.getElementsByTagName("head")[0];n.src=i,n.async=!0,o.insertAdjacentElement("beforeend",n)}_loadExecuteTwitter(e){const i=()=>{window.twttr&&twttr.widgets&&(e.classList.add(e.getAttribute("data-class")),twttr.widgets.load(this.article))};this.twitterScriptAdded||$.cachedScript("https://platform.twitter.com/widgets.js").done(,i()}_noConsentHandler(){document.querySelectorAll(St.join(",")).forEach(,this.article.classList.add(De)}_addConsentBox(e){const i='Nous avons bloqu\xE9 l\u2019affichage de ce contenu pour respecter vos choix en mati\xE8re de cookies. En cliquant sur \xAB Consulter \xBB, vous acceptez le d\xE9p\xF4t de cookies. Vous pouvez modifier vos choix \xE0 tout moment en vous rendant sur <a href="/page/utilisation-cookies">cette page</a>.';e.insertAdjacentHTML("afterend",`<div class="article-full__thirdparty-consent-required">
                    <div class="u-mb-15">${i}</div>
                    <button class="btn btn-primary" onclick="Didomi.setUserAgreeToAll();">Consulter</button>
            </div>`)}}class Tt{constructor(e=new Ve){this.slider=e}init(){this.jqueryAddOns();let e=new Fe,i=new Ie,a=new xt;this.slider.init(),e.init(),D.init(),i.init(),a.init(),ze.init(),Ne.init(),He.init(),ae.init(),Ue.init(),Ge.init(),Je(),Ye.init(),O.init(),S.init(),tt.init(),oe.init(),window.map=O}jqueryAddOns(){jQuery.cachedScript=}let Ct=new Tt;Qe(),Ct.init()}},me={};.m=pe,),),),),),function(){b.u=function(d){return"js/"+{166:"vendors~waves",180:"vendors~materialize-autocomplete",366:"vendors~chips",410:"lightgallery",508:"vendors~forms",513:"vendors~toasts",566:"vendors~tabs",694:"vendors~lightgallery",703:"vendors~map",713:"lightslider",797:"vendors~dotdotdot-js",842:"map",850:"vendors~lightslider",960:"vendors~iframe-resizer"}[d]+"."+{166:"54897f2f1373a14991d5",180:"126497f0c38b66ae1596",366:"8a43b3eba97409d72915",410:"725dbb42d807759c3ad7",508:"b823f4c6372438dc4ac8",513:"284f70f222fe6658236d",566:"35a4d4e3fe36922a5597",694:"4a1e9566024b6feeee03",703:"fae95e0354ccd381a927",713:"bdb4f6e9f1dcde264cc3",797:"a3570435e2401e25cec2",842:"4300b8ab2b7068eb436a",850:"04dce25418271bde946b",960:"b25d7a816425a1078983"}[d]+".js"}}(),function(){b.miniCssF=function(d){return"css/"+{694:"vendors~lightgallery",703:"vendors~map",850:"vendors~lightslider"}[d]+"."+{694:"811039d554f721568172",703:"ca70dda45d4847434268",850:"1e75b14fffe9b6397481"}[d]+".css"}}(),),),),),),function(){b.p="/"}(),function(){var d=function(p,m,h,x){var v=document.createElement("link");v.rel="stylesheet",v.type="text/css";var T=function(y){if(v.onerror=v.onload=null,y.type==="load")h();else{var C=y&&(y.type==="load"?"missing":y.type),k=y&&y.target&&y.target.href||m,P=new Error("Loading CSS chunk "+p+` failed.
(`+k+")");P.code="CSS_CHUNK_LOAD_FAILED",P.type=C,P.request=k,v.parentNode.removeChild(v),x(P)}};return v.onerror=v.onload=T,v.href=m,document.head.appendChild(v),v},w=s=f={514:0};b.f.miniCss=function(p,m){var h={694:1,703:1,850:1};f[p]?m.push(f[p]):f[p]!==0&&h[p]&&m.push(f[p]=s(p).then()}}(),function(){var d={514:0};b.f.j=function(f,p){var m=b.o(d,f)?d[f]:void 0;if(m!==0)if(m)p.push(m[2]);else{var h=new Promise(;p.push(m[2]=h);var x=b.p+b.u(f),v=new Error,T=b.l(x,T,"chunk-"+f,f)}},b.O.j=var w=s=self.webpackChunkpackage=self.webpackChunkpackage||[];s.forEach(w.bind(null,0)),s.push=w.bind(null,s.push.bind(s))}();var ge=b.O(void 0,[723],;ge=b.O(ge)})();
