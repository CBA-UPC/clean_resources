"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5713],{71251:(e,t,i)=>{i.d(t,{j:()=>l});var a=i(50959),s=i(22795),n=i(57562),o=i(13734),r=i(11527);const l=a.memo((function(e){let{uri:t,size:i=n.q.md,className:l,onClick:c,canDownload:d,condensedAll:u}=e;const[g,p]=(0,s.Z)(t),m=(0,o.o)(),x=(0,a.useCallback)((()=>{m({targetUri:t,intent:g?"unsave":"save",type:"click"}),p(!g)}),[m,t,g,p]);return(0,r.jsx)(n.o,{className:l,isFollowing:g,onFollow:x,onClick:c,uri:t,size:i,canDownload:d,condensedAll:u})}))},19514:(e,t,i)=>{i.d(t,{V:()=>B,e:()=>U});var a=i(50959),s=i(29132),n=i(10226),o=i(41657),r=i(11317),l=i(8810),c=i(4612),d=i(82579),u=i(64329),g=i(18050),p=i(12553),m=i(51040),x=i(71459),h=i(94739),y=i(17053),v=i(13734),j=i(50540),b=i(53758),k=i(44724),f=i(52993),P=i(45438),C=i(61058),S=i(23769),A=i(80626),I=i(73928),N=i(74234),w=i(58301),E=i(17676),R=i(11527);function U(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const D=e=>`activation-trigger-mme-${e}`,B=a.memo((function(e){var t,i,B,T,L;let{index:F=-1,showMetadata:M,episode:O,usePlayContextItem:z,status:_,variant:W}=e;const G=(0,w.E)(),Y=O.playedState.playPositionMilliseconds,K=O.uri,H=(0,a.useRef)(null),[X,V]=(0,a.useState)(O.playedState.state===I.sY.Completed),q=(0,y.O)(),Z=(0,j.g)(),$=(0,C.jh)(),Q=(0,v.o)(),J=(0,s.I0)(),{UBIFragment:ee,spec:te,logger:ie}=(0,A.fU)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:K,reason:O.requestId||"",position:F}}),ae=(0,A.Wi)(te),{isActive:se,isPlaying:ne,togglePlay:oe}=z({uri:K}),[re]=(0,S.z)(1e4,(e=>{var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===K}));(0,a.useEffect)((()=>{ne&&(H.current=re)}),[ne,re]),(0,a.useEffect)((()=>{!ne&&H.current&&O.duration.milliseconds<=H.current&&V(!0)}),[ne,O.duration.milliseconds]);const le=(0,a.useCallback)((e=>{e||(H.current=0),V(e)}),[]),ce=e=>{if(e.target!==e.currentTarget)return;const t=`${O.name} • ${M.name}`;q(e,{itemUris:[K],dragLabelText:t,contextUri:M.uri})},de=U(M),ue=(0,b.s)({...O,coverArt:{sources:O.coverArt}},de),ge=(0,a.useCallback)((()=>{if(O.episodeType===I.Wf.Episode&&G)x.y.set((()=>({triggerId:D(O.uri),triggerAction:null})));else if(Z)ue();else{let e;e=ne?te.playButtonFactory().hitPause({itemToBePaused:K}):se?te.playButtonFactory().hitResume({itemToBeResumed:K}):te.playButtonFactory().hitPlay({itemToBePlayed:K});const t=ie.logInteraction(e);Q({targetUri:K,intent:ne?"pause":"play",type:"click"}),oe({loggingParams:t})}}),[se,ue,Q,oe,K,ne,Z,O,G,ie,te]),pe=(0,a.useCallback)((()=>{ie.logInteraction(te.hitUiNavigate({destination:K})),Q({type:"click",targetUri:K,intent:"navigate"})}),[K,Q,ie,te]),me=(null===(t=O.podcastSubscription)||void 0===t?void 0:t.isPaywalled)??!1,xe=(null===(i=O.podcastSubscription)||void 0===i?void 0:i.isUserSubscribed)??!1,he=me&&!xe,ye=me&&Z,{badges:ve}=(0,N.r)({contentRating:null===(B=O.contentRating)||void 0===B?void 0:B.label,isPaywalled:me}),je=(0,a.useCallback)((()=>J((0,l.RM)(M.uri))),[M.uri,J]),be=(0,a.useCallback)((e=>{let t=e;return(he||ye)&&(t=(0,R.jsx)(m.l,{enabled:!0,showUri:M.uri,children:t})),!O.playability.playable&&ve.nineteen&&(t=(0,R.jsx)("div",{onClick:e=>{e.stopPropagation(),je()},children:e})),t=(0,R.jsx)(c.D,{id:D(K),targetURI:(0,r.EC)(K),children:t}),t}),[K,he,ye,M.uri,ve.nineteen,O.playability.playable,je]),ke=(0,n.W6)(E.eli,{loadingValue:!1});return(0,R.jsx)(ee,{spec:te,children:(0,R.jsx)(P.JL,{value:"row",index:F,children:(0,R.jsx)(d._,{onShow:()=>{ie.logInteraction(te.secondaryHitUiReveal())},menu:(0,R.jsx)(u.k,{uri:K,showUri:M.uri,sharingInfo:O.sharingInfo,isPlayed:X,onMarkAsPlayed:le}),children:ke?(0,R.jsx)(p.k,{ref:ae,requestId:O.requestId,index:F,uri:K,size:$,images:O.coverArt||[],name:O.name,showName:M.name,description:O.description,isPlayable:O.playability.playable||he,fullyPlayed:X,durationMs:O.duration.milliseconds,releaseDate:(null===(T=O.releaseDate)||void 0===T?void 0:T.isoString)||"",resumePositionMs:H.current??Y,handleDragStart:ce,handlePlaybackClick:ge,handleClick:pe,isCurrentlyPlaying:se,isPaywalled:me,isUserSubscribed:xe,isPlaying:ne,position:ne?re:void 0,episodeSharingInfo:O.sharingInfo,onMarkAsPlayed:le,contentInformation:O.contentInformation,showUri:M.uri,mediaTypes:O.mediaTypes??void 0,badges:(0,R.jsxs)(R.Fragment,{children:[ve.explicit&&(0,R.jsx)(k.N,{}),ve.paid&&(0,R.jsx)(h.g,{}),ve.nineteen&&(0,R.jsx)(f.X,{size:16})]}),playButtonWrapper:be,onMoreButtonClick:()=>{ie.logInteraction(te.moreButtonFactory().hitUiReveal())},status:_,variant:W}):(0,R.jsx)(g.X,{ref:ae,requestId:O.requestId,index:F,uri:K,size:$,images:O.coverArt||[],name:O.name,showName:M.name,description:O.description,isPlayable:O.playability.playable||he,fullyPlayed:X,durationMs:O.duration.milliseconds,releaseDate:(null===(L=O.releaseDate)||void 0===L?void 0:L.isoString)||"",resumePositionMs:H.current??Y,handleDragStart:ce,handlePlaybackClick:ge,handleClick:pe,isCurrentlyPlaying:se,isPaywalled:me,isUserSubscribed:xe,isPlaying:ne,position:ne?re:void 0,episodeSharingInfo:O.sharingInfo,onMarkAsPlayed:le,contentInformation:O.contentInformation,badges:(0,R.jsxs)(R.Fragment,{children:[ve.explicit&&(0,R.jsx)(k.N,{}),ve.paid&&(0,R.jsx)(h.g,{}),ve.nineteen&&(0,R.jsx)(f.X,{size:16})]}),playButtonWrapper:be,onMoreButtonClick:()=>{ie.logInteraction(te.moreButtonFactory().hitUiReveal())},showUri:M.uri,mediaTypes:O.mediaTypes??void 0,status:_,variant:W})})})})}))},66713:(e,t,i)=>{i.d(t,{k:()=>o});i(75930),i(92027),i(86277);var a=i(58206);const s="rTMkDBDp47Eo12ZEQv4U";var n=i(11527);const o=e=>{let{copyrights:t,courtesyLine:i}=e;const o=(t||[]).map(((e,t)=>{const i=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let s;return s="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,n.jsx)(a.D,{as:"p",variant:"finale",dir:"auto",children:`${s} ${i}`},t)}));return i&&o.unshift((0,n.jsx)(a.D,{as:"p",variant:"finale",dir:"auto",children:i},o.length)),(0,n.jsx)("div",{className:s,children:o})}},89992:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ia});var a=i(50959),s=i(75802),n=i(20521),o=i(75095),r=i(11317),l=i(85648),c=i(41038),d=i(91643),u=(i(75930),i(65484),i(35174),i(96241),i(82187)),g=i.n(u),p=i(29132),m=i(69736),x=i(10226),h=i(22085),y=i(2386),v=i(97013),j=i(40235),b=i(91939),k=i(85770),f=i(58206),P=i(21611),C=i(93421),S=i(11401),A=i(44724),I=i(52993),N=i(13128),w=i(68245),E=i(82857),R=i(74234),U=i(61027);const D="Bns6t3CfzQaCA4DLRzPQ",B="zGFcpmwFVhJxRDXUXoXA",T="_FLyhB96W9W0msGYNWUl",L="Si5iVyGLDY7mGWH_U2wA",F="HLBtD6mJyIB9EeOzDtXE",M="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",_="bu7LVUNyDPF_FcrKMv74",W="bYP2npsc_CeChpMGcr6g",G="Ux7aVnDYlwojS4AmkSLg";var Y=i(11527);let K=function(e){return e.SMALL="small",e.LARGE="large",e}({});const H=e=>{let{images:t,title:i,contentRating:a,duration:s,moreButton:n,onClick:o,onContextMenu:r,onTouchStart:l,onTouchEnd:c,isPlaying:d,isActive:u,size:p,className:m,label:x,isPlayable:h=!0}=e;const y=p===K.LARGE?"medium":"small",{badges:v}=(0,R.r)({contentRating:a});return(0,Y.jsxs)("div",{"data-testid":"trailer-component",className:g()(D,m,{[B]:u}),onContextMenu:r,onTouchStart:l,onTouchEnd:c,children:[(0,Y.jsxs)("div",{className:L,children:[(0,Y.jsxs)("div",{className:z,children:[(0,Y.jsx)(C.O,{type:E.p.EPISODE,title:i,className:g()(O,{[G]:p===K.SMALL,[W]:p===K.LARGE}),size:S.m$.SIZE_56,images:t,shape:C.K.ROUNDED_CORNERS}),(0,Y.jsx)("div",{className:_,children:(0,Y.jsx)(U.f,{"data-testid":"trailer-play-button",version:P.ul.transparent,size:y,isPlaying:d,onClick:o,disabled:!h})})]}),(0,Y.jsxs)("div",{children:[(0,Y.jsx)("div",{className:F,children:(0,Y.jsx)(f.D,{dir:"auto",className:T,variant:"balladBold",children:i})}),(0,Y.jsxs)("div",{className:M,children:[(0,Y.jsx)(N.V,{text:x}),v.explicit&&(0,Y.jsx)(A.N,{}),v.nineteen&&(0,Y.jsx)(I.X,{}),(0,Y.jsx)(f.D,{dir:"auto",variant:"mesto",children:(0,Y.jsx)(w.nL,{durationMs:s})})]})]})]}),n]})};var X=i(13734),V=i(71318),q=i(66713),Z=i(40688),$=i(15764);const Q="_yl4tOZxcpoUt28k6B8I",J="lcJflizNrSwDM9yPNk6h",ee="ret7iHkCxcJvsZU14oPY",te=e=>{var t,i,a;let{rating:s,className:n,onClick:o}=e;if(!s)return null;const r=Boolean(null===(t=s.rating)||void 0===t?void 0:t.rating);return(0,Y.jsxs)("button",{className:g()(Q,n),onClick:o,children:[(0,Y.jsx)(f.D,{dir:"auto",variant:"mestoBold",children:null!==(i=s.averageRating)&&void 0!==i&&i.showAverage?l.ag.formatNumber(s.averageRating.average,{maximumFractionDigits:1}):l.ag.get("web-player.audiobooks.noRating")}),r?(0,Y.jsx)(Z.u,{iconSize:16,className:g()(J)}):(0,Y.jsx)($.G,{iconSize:16,className:g()(J)}),(null===(a=s.averageRating)||void 0===a?void 0:a.showAverage)&&(0,Y.jsxs)(f.D,{variant:"mesto",className:g()(ee),children:["(",l.ag.formatNumberCompact(Number(s.averageRating.totalRatings)),")"]})]})};var ie=i(61058),ae=i(90979),se=i(22527),ne=i(95812),oe=i(29673),re=i(80626),le=i(73461);const ce=e=>{let{htmlDescription:t,narrators:i,spec:s}=e;const n=(0,X.o)(),o=(0,re.$P)(),r=(0,a.useCallback)((e=>{n({intent:"expand-description",type:"click"});const t=s.seeMoreButtonFactory();o.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[o,n,s]);return(0,Y.jsxs)(Y.Fragment,{children:[i.length?(0,Y.jsx)(m.x,{as:"p",variant:"bodyMedium",children:l.ag.get("web-player.audiobooks.narratedByX",i.join(l.ag.getSeparator()))}):null,t&&(0,Y.jsx)(le.o,{maxLines:4,content:t,htmlContent:t,onExpanded:r})]})};var de=i(38338),ue=i(71251),ge=i(20580),pe=i(91023);const me="8px",xe="mmCZ5VczybT9VqKB5wFU",he="At_ihDspJfh1yw3Cn2cq",ye="u3LLJx1KnMchfNCzi6k5",ve="Yqz1Nv6wj1n3HmXL_qji",je="qRqn3JrWLPbGW9k2a63n",be="HAah1_lK_dHgyyE71I8Z",ke="eiC4nh70nb5UHZBYMgNA",fe="hl2eRCaYcZ1Jm1bgNYlU",Pe="eYtmwXEvi1UdCevg8WoK",Ce="QOp2aYTYmZHZ6DFFHuYE",Se=e=>{let{explicit:t,durationMs:i,publishDate:a}=e;return(0,Y.jsxs)("div",{className:Pe,children:[t&&(0,Y.jsx)(A.N,{fullText:!0}),(0,Y.jsxs)("div",{children:[a&&(0,Y.jsx)(m.x,{variant:"bodySmall",className:Ce,children:l.ag.formatDate(a)}),(0,Y.jsx)(m.x,{variant:"bodySmall",children:(0,Y.jsx)(w.nL,{durationMs:i})})]})]})};var Ae=i(22795),Ie=i(5542),Ne=i(57986),we=i(49857),Ee=i(43286),Re=i(76963),Ue=i(50540),De=i(19039);const Be="iZut9Dh2KEjNVhDUxzWw";function Te(e){var t;let{uri:i,price:a,size:s,spec:n,logger:o,onPlayback:r}=e;const{enqueueSnackbar:c}=(0,De.D)(),d=(0,Ue.g)(),u=0===(null==a||null===(t=a.finalPrice)||void 0===t?void 0:t.amount),g=u?n.getButtonFactory({uri:i}):n.buyButtonFactory({uri:i}),p=(0,we.y1)((async()=>{if(o.logInteraction(g.hitShowPaywall({paywalledItem:i})),d)r();else{try{null!=a&&a.finalPrice?await(0,Re.Q)({show_uri:i,currency:a.finalPrice.currency,price:a.finalPrice.amount}):c(l.ag.get("error.generic"))}catch(e){c(l.ag.get("error.generic"))}r()}}),2e3,{leading:!0,trailing:!1});return(0,Y.jsx)(Ee.D,{size:s,className:Be,style:{flexShrink:0},onClick:p,children:u?l.ag.get("web-player.audiobooks.buyFree"):l.ag.get("web-player.audiobooks.buy")})}const Le=e=>{let{uri:t,isLocked:i,price:a,isPlaying:s,isConsumptionCapped:n,onPlayback:o,logger:r,spec:l,size:c="large"}=e;return i&&!n?(0,Y.jsx)(Te,{size:c,uri:t,price:a,logger:r,spec:l,onPlayback:o}):(0,Y.jsx)(Ne.$,{size:c,isPlaying:s,uri:t,onClick:o})};var Fe=i(94948),Me=i(15842),Oe=i(66205),ze=i(6395),_e=i(66819),We=i(9443);const Ge=a.memo((function(e){let{backgroundColor:t,uri:i,name:s,isPlaying:n,togglePlay:o,isLocked:r,consumptionCapExplanation:c,price:d,spec:u,isExplicit:g,publishDate:m,duration:x}=e;const[h,y]=(0,Ae.Z)(i),j=!(0,We.k)(),b=(0,p.I0)(),k=(0,X.o)(),f=(0,re.$P)(),P=(0,a.useCallback)((()=>{k({targetUri:i,intent:h?"unsave":"save",type:"click"});const e=u.saveToLibraryButtonFactory();h?f.logInteraction(e.hitUnfollow({itemToBeUnfollowed:i})):f.logInteraction(e.hitFollow({itemToBeFollowed:i})),y(!h)}),[k,i,h,u,y,f]),C=(0,a.useCallback)(((e,t)=>{const a=u.downloadButtonFactory();c?b((0,Fe.S3)(c)):t===Ie.mc.ADD?f.logInteraction(a.hitDownload({itemToDownload:i})):t===Ie.mc.REMOVE?f.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:i})):t===Ie.mc.NO_PERMISSION&&f.logInteraction(a.hitUiReveal())}),[c,b,f,u,i]),S=(0,a.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();f.logInteraction(e)}),[f,u]),A=(0,_e.j)(),I=!!c,N=!r&&!I;return(0,Y.jsxs)(Me.o,{backgroundColor:t,style:{"--action-bar-padding-bottom":me},children:[(0,Y.jsx)(Oe.F,{testId:"book-action-bar-metadata",children:(0,Y.jsx)(Se,{explicit:g,publishDate:m,durationMs:x})}),(0,Y.jsxs)(Oe.F,{children:[(0,Y.jsx)(Le,{uri:i,isLocked:r,isConsumptionCapped:I,price:d,isPlaying:n,onPlayback:o,logger:f,spec:u,size:A}),(0,Y.jsx)(ze.r,{children:(0,Y.jsx)(de.H,{isAdded:h,onClick:P,disabled:j,size:A,isAudiobook:!0})},"follow-button"),(0,Y.jsx)(ue.j,{uri:i,onClick:C,size:A,canDownload:N}),(0,Y.jsx)(ge.yj,{menu:(0,Y.jsx)(pe.X,{uri:i}),children:(0,Y.jsx)(v.z,{label:l.ag.get("more.label.context",s),onClick:S,size:A})})]})]})}));var Ye=i(78734),Ke=i(62182),He=i(81639),Xe=i(16118),Ve=i(36637),qe=i(59099);const Ze=a.memo((function(e){let{coverArt:t,name:i,authorName:a,uri:s,backgroundColor:n,isPlaying:o,togglePlay:r,isLocked:c,price:d,isConsumptionCapped:u,logger:g,spec:p}=e;return(0,Y.jsxs)(Ke.gF,{backgroundColor:n,children:[(0,Y.jsxs)(He.W,{children:[(0,Y.jsx)(Le,{uri:s,isLocked:c,price:d,isPlaying:o,isConsumptionCapped:u,onPlayback:r,logger:g,spec:p,size:"medium"}),(0,Y.jsx)(Xe.i,{text:i,dragUri:s,dragLabel:i})]}),(0,Y.jsx)(ge._P,{menu:(0,Y.jsx)(pe.X,{uri:s}),children:(0,Y.jsx)(Ke.Oz,{images:t,name:i,dragUri:s,dragMimeType:Ye.RN.AUDIOBOOKS,shape:C.K.SQUARE})}),(0,Y.jsxs)(Ke.sP,{children:[(0,Y.jsx)(Ve.g,{children:l.ag.get("web-player.audiobooks.audiobook")}),(0,Y.jsx)(Ke.xd,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:Ke.vz,dragUri:s,dragMimeType:Ye.RN.AUDIOBOOKS,dragLabel:i,children:i}),(0,Y.jsx)(qe.m,{children:a})]})]})})),$e="HvVxzh4ZoggYAhgSxSth",Qe=a.memo((e=>{let{price:t}=e;return t.finalPrice&&t.finalListPrice?0===t.finalPrice.amount&&0===t.finalListPrice.amount?(0,Y.jsxs)("div",{className:$e,children:[(0,Y.jsx)(m.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("audiobook.freePriceDescription")}),(0,Y.jsx)(m.x,{variant:"bodySmall",children:l.ag.get("audiobook.freePriceExplanation")})]}):(0,Y.jsxs)("div",{className:$e,children:[(0,Y.jsx)(m.x,{variant:"titleSmall",semanticColor:"textBase",children:t.finalPrice.formattedPrice}),t.finalPrice.amount<t.finalListPrice.amount&&(0,Y.jsx)(m.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.ag.get("web-player.audiobooks.retailPrice",(0,Y.jsx)("span",{style:{textDecoration:"line-through"},children:t.finalListPrice.formattedPrice}))})]}):null}));i(46758),i(53321),i(86277);var Je=i(80936),et=i(93246);var tt=i(77861);var it=i(78706),at=i(64222),st=i(17676),nt=i(23769);const ot="b0Vng72SrQiFroJKXfk2",rt="FfeP3XKSZcAdfviyk8fv",lt="eWxDd0LanTnTlSl8SOHX",ct="eAOkseqV13_CAmzuDJpa",dt="fovofKIYdEIURgIYoKm2",ut="NXXFrQO7npgPCRuSKaAA",gt="ekkhhuxKVGAzkEmuh9kE",pt="zd6xqobF255bxHFtCmXy",mt=a.memo((function(e){let{name:t,duration:i,uri:s,bookName:n,usePlayContextItem:o,isChapterLocked:r,isPlayable:c,resumePositionMs:d,isFullyPlayed:u,isExplicit:h,is19PlusOnly:y,spec:j,index:k,consumptionCapExplanation:f}=e;const P=(0,a.useRef)(d),{isPlaying:C,togglePlay:S,isActive:N}=o({uri:s}),w=(0,re.$P)(),E=(0,Ue.g)(),R=(0,p.I0)(),D=(0,x.W6)(st.vWw,{loadingValue:!1}),{position:B,isFullyPlayed:T}=((e,t,i,s)=>{const n=(0,a.useRef)(null),[o,r]=(0,a.useState)(s),[l]=(0,nt.z)(1e4,(t=>{var i;return(null==t||null===(i=t.item)||void 0===i?void 0:i.uri)===e}));return(0,a.useEffect)((()=>{i&&(n.current=l)}),[i,l]),(0,a.useEffect)((()=>{!i&&n.current&&t.milliseconds<=n.current+1e4&&r(!0)}),[i,t.milliseconds]),{position:i?l:null,isFullyPlayed:o}})(s,i,C,u);null!==B&&(P.current=B);const L=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,X.o)(),M=(0,a.useCallback)((e=>{if(L(e),f&&!E&&D)return void R((0,Fe.S3)(f));const t=j.chapterBlockFactory({position:k,uri:s}).playButtonFactory();if(r)F({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),w.logInteraction(t.hitShowPaywall({paywalledItem:s}));else{const e=(0,at.aK)({isPlaying:C,isActive:N,spec:t,logger:w,uri:s});S({loggingParams:e})}}),[f,R,k,D,N,E,r,C,w,F,j,L,S,s]),O=(0,a.useCallback)((()=>{const e=j.chapterBlockFactory({position:k,uri:s}).secondaryHitUiReveal();w.logInteraction(e)}),[k,w,j,s]),z=(0,a.useCallback)((e=>{L(e);const t=j.chapterBlockFactory({position:k,uri:s}).contextMenuFactory().hitUiReveal();w.logInteraction(t)}),[k,w,j,L,s]),_=(0,a.useMemo)((()=>!(r||f)),[f,r]),W=(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("hr",{className:lt,"aria-hidden":!0}),(0,Y.jsxs)("div",{className:ot,onDoubleClick:e=>{F({targetUri:s,intent:"play",type:"double-click"}),M(e)},children:[(0,Y.jsx)(m.x,{as:"h2",variant:"bodyMediumBold",className:g()(ut,{[rt]:N}),semanticColor:"textBase",children:t}),(0,Y.jsxs)("div",{className:gt,children:[(0,Y.jsx)(U.f,{size:"small",version:U.u.secondary,onClick:M,isPlaying:C,ariaPlayLabel:l.ag.get("tracklist.a11y.play",t,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",t,n),locked:r&&!f,disabled:!c&&!(r||f)}),h&&(0,Y.jsx)(A.N,{fullText:!0}),y&&(0,Y.jsx)(I.X,{size:16}),(0,Y.jsx)("div",{className:pt,children:(0,Y.jsx)(it.E,{isPlaying:C,fullyPlayed:T,durationMs:i.milliseconds,resumePositionMs:P.current,position:B??void 0})})]}),_?(0,Y.jsx)(ge.yj,{menu:(0,Y.jsx)(b.r,{uri:s}),children:(0,Y.jsx)(v.z,{className:dt,size:v.q.sm,label:l.ag.get("more.label.context",t),onClick:z,condensedAll:!0})}):null]})]});return _?(0,Y.jsx)(ge._P,{menu:(0,Y.jsx)(b.r,{uri:s}),onShow:O,children:(0,Y.jsx)("div",{className:ct,children:W})}):(0,Y.jsx)("div",{className:ct,children:W})}));var xt=i(97345),ht=i(25331),yt=i(65019),vt=i(43806);const jt="XG_S4BkuyAMohXFLGKU1",bt="NrMNU3Sf4iy2c6JJx7R8",kt="n8V7RFwuVx9PaIT1n_mA",ft="kTtB_Y_yizhUj6SMYY8e",Pt="f2XS5sEjEtvk4TdlzHK3",Ct="d9YBRXX3qqxAD43sqNzE",St="Jvp5er4UpzTljUao_SrR",At="EQCGoB4MqhFPtwUwp1rh",It="UTBQUpUwOPb37ou2ULmH",Nt="Dnwv7PC1vjXvcwYEfqqf",wt=a.memo((function(e){let{name:t,duration:i,uri:s,bookName:n,usePlayContextItem:o,isChapterLocked:r,isPlayable:c,resumePositionMs:d,isFullyPlayed:u,isExplicit:m,is19PlusOnly:h,spec:y,index:j,consumptionCapExplanation:k}=e;const f=(0,a.useRef)(d),{isPlaying:P,togglePlay:C,isActive:S}=o({uri:s}),N=(0,re.$P)(),w=(0,Ue.g)(),E=(0,p.I0)(),R=(0,x.W6)(st.vWw,{loadingValue:!1}),D=(0,yt.Y)((e=>{var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===s){const t=(0,vt.k)(e)??0;return f.current=t,t}return 0})),B=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),T=(0,X.o)(),L=(0,a.useCallback)((e=>{if(B(e),k&&!w&&R)return void E((0,Fe.S3)(k));const t=y.chapterBlockFactory({position:j,uri:s}).playButtonFactory();if(r)T({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),N.logInteraction(t.hitShowPaywall({paywalledItem:s}));else{const e=(0,at.aK)({isPlaying:P,isActive:S,spec:t,logger:N,uri:s});C({loggingParams:e})}}),[k,E,j,R,S,w,r,P,N,T,y,B,C,s]),F=(0,a.useCallback)((()=>{const e=y.chapterBlockFactory({position:j,uri:s}).secondaryHitUiReveal();N.logInteraction(e)}),[j,N,y,s]),M=(0,a.useCallback)((e=>{B(e);const t=y.chapterBlockFactory({position:j,uri:s}).contextMenuFactory().hitUiReveal();N.logInteraction(t)}),[j,N,y,B,s]),O=!(r||k),z=(0,Y.jsx)(xt.g,{className:g()({[bt]:S}),children:t}),_=(0,Y.jsxs)("div",{className:Ct,children:[m&&(0,Y.jsx)(A.N,{fullText:!0}),h&&(0,Y.jsx)(I.X,{size:16}),(0,Y.jsx)("div",{className:St,children:(0,Y.jsx)(it.E,{isPlaying:P,fullyPlayed:u,durationMs:i.milliseconds,resumePositionMs:f.current,position:P?D:void 0})})]}),W=(0,Y.jsxs)("div",{className:It,children:[(0,Y.jsx)("div",{className:Nt,children:O?(0,Y.jsx)(ge.yj,{menu:(0,Y.jsx)(b.r,{uri:s}),children:(0,Y.jsx)(v.z,{className:Pt,size:v.q.xs,label:l.ag.get("more.label.context",t),onClick:M})}):null}),(0,Y.jsx)("div",{className:At,children:(0,Y.jsx)(U.f,{size:"small",version:U.u.secondary,onClick:L,isPlaying:P,ariaPlayLabel:l.ag.get("tracklist.a11y.play",t,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",t,n),locked:r&&!k,disabled:!c&&!(r||k)})})]}),G=(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("hr",{className:kt,"aria-hidden":!0}),(0,Y.jsx)(ht.w,{id:`chapter-${j}`,title:z,body:_,footer:W,onDoubleClick:e=>{T({targetUri:s,intent:"play",type:"double-click"}),L(e)},className:jt})]});return O?(0,Y.jsx)(ge._P,{menu:(0,Y.jsx)(b.r,{uri:s}),onShow:F,children:(0,Y.jsx)("div",{className:ft,children:G})}):(0,Y.jsx)("div",{className:ft,children:G})})),Et=e=>{let{bookUri:t,bookName:i,sampleUri:s,isFinishedUnlockingJourney:n,usePlayContextItem:o,spec:r,consumptionCapExplanation:l}=e;const c=function(e,t){const i=(0,et.z)();return(0,a.useCallback)((async(a,s)=>i.getBookContents(e,{offset:a,limit:s,doRefreshSubscription:t})),[t,i,e])}(t,n),d=(0,a.useRef)(!1),u=(0,a.useRef)(0),g=(0,x.W6)(st.eli,{loadingValue:!1}),[p,m]=(0,a.useState)([]),h=(0,a.useCallback)((e=>(null==e?void 0:e.uri)===s),[s]),y=(0,a.useCallback)((e=>(e=>null!==e)(e)&&!h(e)),[h]),v=(0,a.useCallback)((()=>{c&&(d.current||null===u.current||(d.current=!0,c(u.current,50).then((e=>{d.current=!1,u.current=e.nextOffset,e.items.length>0&&m((t=>t.concat(e.items.filter(y))))}))))}),[c,y]);return(0,a.useEffect)((()=>{u.current=0,m([])}),[t]),(0,Y.jsx)("ul",{children:(0,Y.jsx)(Je.C,{onReachBottom:v,triggerOnInitialLoad:!0,children:p.map(((e,t)=>{const{name:a,duration:s,uri:n,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:u},isExplicit:p,is19PlusOnly:m}=e,x=function(e){var t,i,a;return!(null!==(t=e.playability)&&void 0!==t&&t.playable||(null===(i=e.playability)||void 0===i?void 0:i.reason)!==tt.WY.PaymentRequired&&(null===(a=e.playability)||void 0===a?void 0:a.reason)!==tt.WY.Anonymous)}(e);return g?(0,Y.jsx)(wt,{name:a,duration:s,uri:n,bookName:i,usePlayContextItem:o,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:u===tt.sY.Completed,isExplicit:p,is19PlusOnly:m,spec:r,index:t},n):(0,Y.jsx)(mt,{name:a,duration:s,uri:n,bookName:i,usePlayContextItem:o,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:u===tt.sY.Completed,isExplicit:p,is19PlusOnly:m,spec:r,index:t},n)}))})})};var Rt=i(7863),Ut=i(90755),Dt=i(85039),Bt=i(58912),Tt=i(40537);const Lt="QEd1L2SSRW1ol_sQQN6m",Ft="ENuWK8u3C9kmadnqkErf",Mt="i0gSVhns0PjhiUKm4OG1",Ot="jKVb6K0dga3SfW1dp2Pg",zt="MOpV0_YizQER2NksxLju",_t="vrR8bh9DvivyDfUrh1vD",Wt="_toO3CqMPAPTbny7Rh8R",Gt="Iudw61HRePwOAJpbDRvA",Yt="GWaz1n1SADn9enzKdi_Z",Kt=a.memo((function(e){let{coverArt:t,toggleModal:i,uri:a,isBook:s}=e;const n=(0,Bt.X)(t,{desiredSize:320}),{spec:r,logger:c}=(0,re.fU)(Ut.createDesktopPodcastRatingEventFactory,{data:{identifier:s?o.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:o.Wg.RATINGS_AND_REVIEWS_RATINGS,uri:a}});return(0,Y.jsx)(Tt.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:i,children:(0,Y.jsxs)("div",{className:Lt,children:[(0,Y.jsxs)("div",{className:Mt,children:[(0,Y.jsx)(m.x,{as:"h1",variant:"titleSmall",className:Wt,children:s?l.ag.get("web-player.audiobooks.rating.rateAudiobook"):l.ag.get("web-player.show.rating.header")}),(0,Y.jsxs)("button",{className:Ot,onClick:()=>{const e=r.closeButtonFactory().hitUiNavigateBack();c.logInteraction(e),i()},children:[(0,Y.jsx)(Rt.k,{role:"presentation"}),(0,Y.jsx)("span",{className:"hidden-visually",children:l.ag.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,Y.jsxs)("div",{className:zt,children:[(0,Y.jsx)(Dt.Ee,{loading:"eager",src:null==n?void 0:n.url,className:Ft}),(0,Y.jsxs)("div",{className:_t,children:[(0,Y.jsx)(m.x,{as:"p",variant:"bodyMediumBold",className:Gt,children:s?l.ag.get("web-player.audiobooks.rating.wantToRate"):l.ag.get("web-player.show.rating.want-to-rate")}),(0,Y.jsx)(m.x,{as:"p",className:Yt,children:l.ag.get("web-player.audiobooks.rating.goToApp")}),(0,Y.jsx)(Ee.D,{colorSet:"invertedLight",onClick:()=>{const e=r.okButtonFactory().hitUiNavigateBack();c.logInteraction(e),i()},children:l.ag.get("web-player.audiobooks.rating.ok")})]})]})]})})})),Ht={shuffle:!1,repeat:ne.zq.REPEAT_NONE},Xt=a.memo((function(e){var t,i;let{metadata:n}=e;const{uri:r,coverArt:d,name:u,htmlDescriptionPlain:f,authorName:P,sample:C,narrators:S,rating:A,isExplicit:I,duration:N,copyrights:w,publishDate:E,price:R,isLocked:U,consumptionCapExplanation:D,signifierText:B,latestPlayedEpisodeLink:T,topics:L}=n,{search:F}=(0,s.TH)(),M=!!new URLSearchParams(F).get("isUnlockingAudiobook"),O=!(!(0,ae.D)(M)||M),z=(0,Ue.g)(),_=(0,V.Z)(null===(t=d[0])||void 0===t?void 0:t.url),W=(0,p.I0)(),[G,Z]=(0,a.useState)(!1),$=(0,X.o)(),Q=(0,x.W6)(st.vWw,{loadingValue:!1}),{spec:J,logger:ee}=(0,re.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:r,identifier:o.Wg.PODCAST_SHOW_AUDIOBOOK}}),{spec:ne,logger:le}=(0,re.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:r,identifier:o.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:de,logger:ue}=(0,re.fU)(y.createDesktopLockedAudiobookEventFactory,{data:{uri:r,identifier:o.Wg.PODCAST_SHOW_AUDIOBOOK}}),ge=(0,a.useMemo)((()=>J.actionBarFactory()),[J]),pe=(0,a.useMemo)((()=>ne.aboutSectionFactory()),[ne]),me=(0,a.useMemo)((()=>J.chapterListFactory()),[J]);(0,a.useEffect)((()=>{$({type:"view",intent:"audiobook"})}),[$]),(0,a.useEffect)((()=>{U&&ue.logImpression(de.impression())}),[de,ue,U]);const{isPlaying:Pe,togglePlay:Ce,usePlayContextItem:Se,isActive:Ae,triggerPlay:Ie}=(0,se.n)({uri:r},{featureIdentifier:"audiobook"},Ht),{togglePlay:Ne,isPlaying:we,isActive:Ee}=(0,se.n)({uri:(null==C?void 0:C.uri)??""},{featureIdentifier:"audiobook"},Ht),Re=Pe&&!we,De=Ae&&!Ee,Be=(0,a.useCallback)((async()=>{const e=J.actionBarFactory().playButtonFactory();if(D&&!z&&Q)return ee.logInteraction(e.hitShowPaywall({paywalledItem:r})),void W((0,Fe.S3)(D));if(!U||z)if(z)Ce();else{const t=(0,at.aK)({isPlaying:Re,isActive:De,spec:e,logger:ee,uri:r});De?Ce({loggingParams:t}):Ie({skipTo:T?{uri:T}:void 0,loggingParams:t})}}),[J,D,z,Q,U,ee,r,W,Ce,Re,De,Ie,T]),Te=(0,a.useCallback)((()=>{null!=C&&C.uri&&($({targetUri:C.uri,intent:we?"play":"pause",type:"click"}),Ne())}),[we,$,Ne,null==C?void 0:C.uri]),Le=(0,a.useCallback)((()=>{const e=pe.ratingButtonFactory().hitUiReveal();le.logInteraction(e),Z((e=>!e))}),[pe,le]),Me=(0,ie.jh)(),Oe=U&&!D&&R;return(0,Y.jsxs)("section",{className:xe,children:[(0,Y.jsx)(c.$,{children:(0,oe.Od)({showOrAudiobookName:u,type:"Audiobook"})}),(0,Y.jsx)(Ze,{name:u,authorName:P,uri:r,coverArt:d,backgroundColor:_,togglePlay:Be,isPlaying:Re,isLocked:U,isConsumptionCapped:!!D,price:R,logger:ee,spec:J.actionBarFactory()}),(0,Y.jsx)(Ge,{name:u,backgroundColor:_,uri:r,togglePlay:Be,isPlaying:Re,isLocked:U,consumptionCapExplanation:D,isExplicit:I,duration:N,publishDate:E,price:R,spec:ge}),(0,Y.jsxs)("div",{className:g()(he,"contentSpacing",{[ye]:Me===ie.Uo.LARGE}),children:[(0,Y.jsxs)("div",{className:ve,children:[(0,Y.jsxs)("div",{className:fe,children:[B&&(0,Y.jsx)(m.x,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:B}),!B&&Oe&&(0,Y.jsx)(Qe,{price:R})]}),(0,Y.jsx)(ce,{htmlDescription:f,narrators:S,spec:pe})]}),(0,Y.jsxs)("div",{className:je,children:[(null==C?void 0:C.isPlayable)&&(0,Y.jsx)(H,{label:l.ag.get("audiobook.page.sample"),images:C.coverArt,title:C.name,duration:C.duration.milliseconds,moreButton:U?null:(0,Y.jsx)(j.y,{menu:(0,Y.jsx)(b.r,{uri:C.uri}),children:(0,Y.jsx)(v.z,{})}),onClick:Te,isPlaying:we,isActive:Ee,size:K.LARGE,contentRating:null===(i=C.contentRating)||void 0===i?void 0:i.label,isPlayable:C.isPlayable}),(0,Y.jsx)("div",{className:be,children:(0,Y.jsx)(te,{rating:A,onClick:Le})}),L.length>0&&(0,Y.jsx)(k.v,{topics:L})]}),(0,Y.jsxs)("div",{className:ke,children:[(0,Y.jsx)(Et,{bookUri:r,bookName:u,sampleUri:null==C?void 0:C.uri,isFinishedUnlockingJourney:O,usePlayContextItem:Se,spec:me,consumptionCapExplanation:D},`${r}-${U}-${!!D}`),(0,Y.jsx)(q.k,{copyrights:w})]})]}),G&&(0,Y.jsx)(Kt,{toggleModal:()=>Z(!1),coverArt:d,uri:r,isBook:!0})]})}));var Vt=i(96989),qt=i(35078),Zt=i(90291),$t=i(75463),Qt=i(67208);const Jt=e=>{let{uri:t,name:i,backgroundColor:s,spec:n}=e;const o=(0,re.$P)(),r=(0,X.o)(),c=!(0,We.k)(),[d,u]=(0,Ae.Z)(t),g=(0,a.useCallback)((()=>{r({targetUri:t,intent:d?"unsave":"save",type:"click"});const e=n.followButtonFactory();o.logInteraction(d?e.hitUnfollow({itemToBeUnfollowed:t}):e.hitFollow({itemToBeFollowed:t})),u(!d)}),[r,t,d,n,o,u]),p=(0,a.useCallback)((()=>{o.logInteraction(n.contextButtonFactory().hitUiReveal())}),[o,n]),m=(0,_e.j)();return(0,Y.jsx)(Me.o,{backgroundColor:s,children:(0,Y.jsxs)(Oe.F,{children:[(0,Y.jsx)(ze.r,{children:(0,Y.jsx)(Qt.e,{isFollowing:d,onClick:g,disabled:c})},"follow-button"),(0,Y.jsx)(j.y,{menu:(0,Y.jsx)($t.M,{uri:t}),onShow:p,children:(0,Y.jsx)(v.z,{label:l.ag.get("more.label.context",i),size:m})})]})})},ei=(0,a.lazy)((()=>i.e(6341).then(i.bind(i,6341)))),ti=(0,a.lazy)((()=>i.e(8092).then(i.bind(i,28092))));function ii(e){const t=(0,x.W6)(st.$f6),i=(0,x.W6)(st.BOn);return t&&i?(0,Y.jsx)(ti,{uri:e.uri}):t?(0,Y.jsx)(a.Suspense,{fallback:!0,children:(0,Y.jsx)(ei,{...e})}):null}var ai=i(82579),si=i(64329),ni=i(53758),oi=i(2994),ri=i(19514),li=i(45438),ci=(i(70054),i(80090));const di=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),ui=a.memo((function(e){let{uri:t,children:i}=e;return(0,Y.jsx)(ci.r,{uri:t,defaultState:[],sortContext:di,localStorageKey:"showFilterParams-v2",children:i})}));i(39301);var gi=i(13199);const pi={field:gi.ay.PUBLISH_DATE,order:gi.i5.DESC},mi={field:gi.ay.PUBLISH_DATE,order:gi.i5.ASC},xi=mi,hi={episodic:pi,sequential:mi,recent:pi};function yi(){return new Map([[pi,{key:"newest-to-oldest",value:l.ag.get("shows.sort.newest-to-oldest")}],[mi,{key:"oldest-to-newest",value:l.ag.get("shows.sort.oldest-to-newest")}]])}function vi(e){return hi[e]}const ji=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:vi("recent")}),bi=e=>{const t=yi();return Array.from(t.keys()).some((t=>{let{field:i}=t;return i===(null==e?void 0:e.field)}))},ki=a.memo((function(e){let{uri:t,children:i,defaultSortParam:a}=e;return(0,Y.jsx)(ci.r,{uri:t,defaultState:a,sortContext:ji,localStorageKey:"showSortParam",validator:bi,children:i})})),fi="cJJXVm4gQW6AdfCQRhpX",Pi="hTRqaN61SDG95erQGMmx",Ci={totalCount:0,nextOffset:0,items:[]},Si=a.memo((function(e){let{showMetadata:t,usePlayContextItem:i}=e;const{sortState:s}=(0,a.useContext)(ji),{sortState:n}=(0,a.useContext)(di),o=(0,oi.ZM)(t.uri,s,n),[r,l]=(0,a.useState)(Ci),c=(0,a.useRef)(!1),d=(0,a.useRef)(0),u=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!o)return;const t=d.current;null!==t&&(c.current||(c.current=!0,o(t,50).then((i=>{l((a=>{const s=e?[]:[...a.items];return s.splice(t,i.items.length,...i.items),d.current=i.nextOffset,{...i,items:s}})),c.current=!1}))))}),[o]);return(0,a.useEffect)((()=>{l(Ci)}),[t.uri]),(0,a.useEffect)((()=>{d.current=0,u(!0)}),[u]),(0,Y.jsx)(li.JL,{value:"track-list",children:(0,Y.jsx)(Je.C,{onReachBottom:u,triggerOnInitialLoad:!0,children:r.items.map(((e,a)=>e&&(0,Y.jsxs)("div",{className:Pi,children:[(0,Y.jsx)("hr",{className:fi,"aria-hidden":!0}),(0,Y.jsx)(ri.V,{index:a,episode:e,showMetadata:t,usePlayContextItem:i},`${e.uri}/${a}`)]},`${a}${e.uri}`)))})})}));i(45205);var Ai=i(67408);const Ii={field:gi.YG.ISPLAYED,operator:gi.NK.EQUALS,value:!1},Ni={field:gi.YG.STARTEDPLAYING,operator:gi.NK.GREATER_THAN,value:0};const wi="all-episodes",Ei=e=>{let{onFilter:t}=e;const{sortState:i,setSortState:s}=(0,a.useContext)(di),n=new Map([[Ii,{key:"is-played",value:l.ag.get("shows.filter.unplayed")}],[Ni,{key:"started-playing",value:l.ag.get("shows.filter.in-progress")}]]),o=Array.from(n.values());o.unshift({key:wi,value:l.ag.get("mwp.podcast.all.episodes")});const r=Array.from(n.keys()),c=(0,a.useCallback)((e=>{if(e===wi)s([]);else{const t=r.find((t=>{var i;return(null===(i=n.get(t))||void 0===i?void 0:i.key)===e}));t&&s([t])}t()}),[t,s,r,n]);if(!n.size||!r)return null;let d=o[0];const u=Array.from(n.entries()).filter((e=>null==i?void 0:i.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return u.length>0&&(d=u[0][1]),(0,Y.jsx)(Ai.A,{options:o,onSelect:e=>c(e),selected:d,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.ag.get("drop_down.filter_by")})},Ri=e=>{let{onSort:t}=e;const{sortState:i,setSortState:s}=(0,a.useContext)(ji),n=yi(),o=Array.from(n.values()),r=Array.from(n.keys()),c=(0,a.useCallback)((e=>{const i=r.find((t=>{var i;return(null===(i=n.get(t))||void 0===i?void 0:i.key)===e}));i&&s(i),t()}),[r,t,n,s]);if(!n.size||!i)return null;const d=Array.from(n.keys()).find((e=>e.field===i.field&&e.order===i.order));if(!d)return null;const u=n.get(d);return u?(0,Y.jsx)(Ai.A,{options:o,onSelect:e=>c(e),selected:u,heading:l.ag.get("drop_down.sort_by")}):null},Ui="aQMtxnKeiJqZ9XCcDuZ7",Di="TYB4Y2xQujO7cifhHush",Bi="sSXKiPRvp2AHmwfHoCCS",Ti="YJlizbhw6DBPHT9OYbdj",Li="TfjbWiK8hca4HHEBnonP",Fi="kR0M2WSYVUj4cohADSFM",Mi="ghfuv80I8uW_ymG_jfx9",Oi="jtfSxoRam9rzTtdXIjzc",zi="fejGrhq7pxGC99cUdyVw",_i="T0OjvsNXAJJGd23eBG2m",Wi="Ppm5YkDdE5ktTPwZC1Dw",Gi="urKYEVZPj2k0hwDT1qzt",Yi=e=>{let{spec:t}=e;const i=(0,re.$P)(),{canSort:s,canFilter:n}=(0,oi.zZ)().capabilities,o=(0,a.useCallback)((()=>{i.logInteraction(t.episodeListFactory().filterButtonFactory().hitFilter())}),[i,t]),r=(0,a.useCallback)((()=>{i.logInteraction(t.episodeListFactory().sortButtonFactory().hitSort())}),[i,t]);return(0,Y.jsxs)("div",{className:Fi,children:[n&&(0,Y.jsx)("div",{className:Oi,children:(0,Y.jsx)(Ei,{onFilter:o})}),!n&&(0,Y.jsx)(m.x,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:zi,children:l.ag.get("mwp.podcast.all.episodes")}),s&&(0,Y.jsx)("div",{className:Mi,children:(0,Y.jsx)(Ri,{onSort:r})})]})};var Ki=i(39600),Hi=i(40234),Xi=i(58301);const Vi=e=>{switch(e){case tt.it.TRAILER:return l.ag.get("podcasts.next-episode.trailer");case tt.it.UP_NEXT:return l.ag.get("podcasts.next-episode.up-next");case tt.it.CONTINUE_LISTENING:return l.ag.get("podcasts.next-episode.continue-listening");case tt.it.FIRST_PUBLISHED:return l.ag.get("podcasts.next-episode.first-published");case tt.it.LATEST_PUBLISHED:return l.ag.get("podcasts.next-episode.latest-published");default:return}},qi=e=>{var t;let{breakpoint:i,metadata:n,showId:o,spec:r}=e;const{uri:c,trailer:d,topics:u,description:p,htmlDescription:h,coverArt:y,rating:b}=n,f=(0,re.$P)(),P=(0,a.useMemo)((()=>r.episodeListFactory()),[r]),[C,S]=(0,a.useState)(!1),A=(0,X.o)(),I=(0,Ue.g)(),{sortState:N}=(0,a.useContext)(di),w=(0,oi.zZ)(),{usePlayContextItem:E}=(0,se.n)({uri:c,metadata:{[ne.sb.SORTING_CRITERIA]:w.getPlayerSort(xi),[ne.sb.FILTERING_PREDICATE]:w.getPlayerFilter(N)}},{featureIdentifier:"show"}),{isActive:R,isPlaying:U,togglePlay:D}=E({uri:(null==d?void 0:d.uri)||""}),B=(0,a.useCallback)((e=>{A({intent:"expand-description",type:"click"});const t=r.aboutSectionFactory().seeMoreButtonFactory(),i=e?t.hitUiReveal():t.hitUiHide();f.logInteraction(i)}),[f,A,r]),T=(0,a.useCallback)(((e,t)=>{const i=r.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});f.logInteraction(i)}),[f,r]),L=d?{name:d.name,uri:d.uri,audio:{items:d.audio.items.map((e=>({url:e.url})))}}:null,F=(0,ri.e)(n),M=(0,ni.s)(L,F),O=(0,a.useCallback)((()=>{null!=d&&d.uri&&(I?M():(A({targetUri:d.uri,intent:U?"play":"pause",type:"click"}),D()))}),[M,I,U,A,D,null==d?void 0:d.uri]),{ref:z,breakpoint:_}=(0,ie.Db)({[ie.Uo.MEDIUM]:0,[ie.Uo.LARGE]:600}),W=u.length>0,G=p||h,V=G||W,Z=(()=>{const e=(0,Xi.E)(),t=(0,s.TH)(),i=(0,x.W6)(st.Khh),a=(0,Ki.vI)(Hi.k.ILRShow,t);return!!e&&(a||i===st.juN.VARIANT)})();return(0,Y.jsxs)("div",{className:g()(Di,"contentSpacing",{[Bi]:i===ie.Uo.LARGE}),ref:z,children:[(0,Y.jsxs)("div",{className:Ti,children:[V&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(m.x,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:zi,children:l.ag.get("artist.about")}),G&&(0,Y.jsx)(le.o,{maxLines:4,content:(p||"").trim(),onExpanded:B,htmlContent:h||void 0}),b&&(0,Y.jsx)("div",{className:Gi,children:(0,Y.jsx)(te,{rating:b,onClick:()=>S(!0)})}),W&&(0,Y.jsx)(k.v,{topics:u,onClick:T})]}),(0,Y.jsx)(ii,{showId:o,uri:c}),d&&!n.nextBestEpisode&&(0,Y.jsx)(ai._,{menu:(0,Y.jsx)(si.k,{uri:d.uri,showUri:c,sharingInfo:d.sharingInfo}),children:(0,Y.jsx)(H,{label:l.ag.get("track-trailer"),className:_i,images:d.coverArt,title:d.name,duration:d.duration.milliseconds,moreButton:(0,Y.jsx)(j.y,{menu:(0,Y.jsx)(si.k,{uri:d.uri,sharingInfo:d.sharingInfo,showUri:c}),children:(0,Y.jsx)(v.z,{})}),onClick:O,isPlaying:U,isActive:R,size:K.LARGE,contentRating:null===(t=d.contentRating)||void 0===t?void 0:t.label})})]}),(0,Y.jsx)(ie.ZU.Provider,{value:_,children:(0,Y.jsxs)("div",{className:Li,"data-testid":"show-all-episode-list",children:[n.nextBestEpisode&&(0,Y.jsx)(ri.V,{showMetadata:n,episode:n.nextBestEpisode.data,usePlayContextItem:E,status:Vi(n.nextBestEpisode.type),variant:"next-best-episode"}),(0,Y.jsx)(Yi,{spec:r}),(0,Y.jsx)(re.Nh,{spec:P,children:(0,Y.jsx)(Si,{showMetadata:n,usePlayContextItem:E})})]})}),(0,Y.jsx)(q.k,{copyrights:[]}),Z&&(0,Y.jsx)("div",{"data-testid":"show-ilr-component-to-be-added"}),C&&(0,Y.jsx)(Kt,{toggleModal:()=>S(!1),coverArt:y,uri:c,isBook:!1})]})},Zi=a.memo(qi);var $i=i(1502);const Qi=e=>{let{reason:t}=e;const i=(0,x.W6)(st.ALT),a=function(e){switch(e){case"OTP":return l.ag.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.ag.get("podcasts.subscriber-indicator.subscription");default:return""}}(t);return i&&a?(0,Y.jsx)(m.x,{className:Wi,children:a}):null};const Ji=e=>{let{metadata:t,backgroundColor:i}=e;const{uri:a,coverArt:s,name:n,podcastType:o,publisherName:r,gatedContentAccessReason:c}=t;return(0,Y.jsxs)(Ke.gF,{backgroundColor:i,children:[(0,Y.jsx)(He.W,{children:(0,Y.jsx)(Xe.i,{text:n,dragUri:a,dragLabel:n})}),(0,Y.jsx)($i.k,{children:(0,Y.jsx)(ai._,{menu:(0,Y.jsx)($t.M,{uri:a}),children:(0,Y.jsx)(Ke.Oe,{loading:"eager",name:n,images:s,placeholderType:"show",shape:Ke.Kc.SQUARE})})}),(0,Y.jsxs)(Ke.sP,{children:[(0,Y.jsxs)(Ve.g,{children:["SHOW"===o?l.ag.get("type.show"):l.ag.get("type.podcast"),c&&(0,Y.jsx)(Qi,{reason:c})]}),(0,Y.jsx)(ai._,{menu:(0,Y.jsx)($t.M,{uri:a}),children:(0,Y.jsx)(Ke.xd,{dragUri:a,dragLabel:n,scaleAtMinWidth:Ke.vz,children:(0,Y.jsx)("span",{"data-testid":"show-title",children:n})})}),(0,Y.jsx)(qe.m,{children:r})]})]})};var ea=i(71059);const ta=e=>{var t;let{metadata:i,showId:s}=e;const{coverArt:o,name:r,uri:l}=i,{spec:d}=(0,re.fU)(n.createDesktopPodcastEventFactory,{data:{uri:l}}),u=(0,a.useMemo)((()=>d.actionBarFactory()),[d]),g=(0,V.Z)((null===(t=o[0])||void 0===t?void 0:t.url)||null),p=(0,ie.jh)();return(0,Y.jsxs)("section",{className:Ui,children:[(0,Y.jsx)(c.$,{children:(0,oe.Od)({showOrAudiobookName:r,type:"Podcast"})}),(0,Y.jsx)(Ji,{metadata:i,backgroundColor:g}),(0,Y.jsx)(Jt,{uri:l,name:r,backgroundColor:g,spec:u}),(0,Y.jsx)(Zi,{breakpoint:p,metadata:i,showId:s,spec:d})]})},ia=(0,a.memo)((function(){const{showId:e=""}=(0,s.UO)(),t=`spotify:show:${e}`,{data:i,error:n,redirectUri:c}=(0,Zt.l)(t);if(c){const e=(0,r._b)(c);return(0,Y.jsx)(Vt.InstrumentedRedirect,{to:e.toURLPath(!0)})}return!i||n?n instanceof qt.E?(0,Y.jsx)(d.h,{hasError:!0,errorMessage:l.ag.get("error-page.not-available-in-region.title")}):(0,Y.jsx)(d.h,{hasError:!!n,errorMessage:l.ag.get("error.not_found.title.page")}):(0,tt.l6)(i)?(0,Y.jsx)(a.Suspense,{fallback:null,children:(0,Y.jsx)(ea.C,{pageId:o.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,Y.jsx)(Xt,{metadata:i},`${!!i.consumptionCapExplanation}`)})}):(0,Y.jsx)(a.Suspense,{fallback:null,children:(0,Y.jsx)(ea.C,{pageId:o.Wg.PODCAST,uri:t,children:(0,Y.jsx)(ui,{uri:i.uri,children:(0,Y.jsx)(ki,{uri:i.uri,defaultSortParam:vi(i.consumptionOrder),children:(0,Y.jsx)(ta,{showId:e,metadata:i})})})})})}))},39600:(e,t,i)=>{i.d(t,{vI:()=>a});i(75930),i(86277),i(65484),i(35174),i(96241);const a=(e,t)=>{const i=t?new URLSearchParams(t.search):void 0;return"1"===(null==i?void 0:i.get(e))}},13199:(e,t,i)=>{i.d(t,{NK:()=>o,YG:()=>n,ay:()=>a,i5:()=>s});let a=function(e){return e.PUBLISH_DATE="PUBLISH_DATE",e}({}),s=function(e){return e.ASC="ASC",e.DESC="DESC",e}({}),n=function(e){return e.AVAILABLE="AVAILABLE",e.TEXT="TEXT",e.NAME="NAME",e.ISPLAYED="ISPLAYED",e.STARTEDPLAYING="STARTEDPLAYING",e}({}),o=function(e){return e.CONTAINS="CONTAINS",e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.GREATER_THAN="GREATER_THAN",e}({})},40234:(e,t,i)=>{i.d(t,{k:()=>a});let a=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.88134482.js.map