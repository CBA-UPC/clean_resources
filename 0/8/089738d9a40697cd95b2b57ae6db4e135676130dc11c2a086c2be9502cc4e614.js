window.undefined=window.undefined;Ext={version:"3.1.0-MOL"};Ext.apply=(function(){var idSeed=0,toString=Object.prototype.toString,ua=navigator.userAgent.toLowerCase(),check=function(r){return r.test(ua)},DOC=document,isStrict=DOC.compatMode=="CSS1Compat",isOpera=check(/opera/),isChrome=check(/chrome/),isWebKit=check(/webkit/),isSafari=!isChrome&&check(/safari/),isSafari2=isSafari&&check(/applewebkit\/4/),isSafari3=isSafari&&check(/version\/3/),isSafari4=isSafari&&check(/version\/4/),isIE=!isOpera&&check(/msie/),isIE7=isIE&&check(/msie 7/),isIE8=isIE&&check(/msie 8/),isIE6=isIE&&!isIE7&&!isIE8,isGecko=!isWebKit&&check(/gecko/),isGecko2=isGecko&&check(/rv:1\.8/),isGecko3=isGecko&&check(/rv:1\.9/),isBorderBox=isIE&&!isStrict,isWindows=check(/windows|win32/),isMac=check(/macintosh|mac os x/),isAir=check(/adobeair/),isLinux=check(/linux/),isSecure=/^https/i.test(window.location.protocol);if(isIE6){try{DOC.execCommand("BackgroundImageCache",false,true)}catch(e){}}Ext.apply(Ext,{SSL_SECURE_URL:isSecure&&isIE?'javascript:""':"about:blank",isStrict:isStrict,isSecure:isSecure,isReady:false,enableGarbageCollector:true,enableListenerCollection:false,enableNestedListenerRemoval:false,USE_NATIVE_JSON:false,applyIf:id:extend:),override:namespace:urlEncode:urlDecode:urlAppend:toArray:),isIterable:each:iterate:function(obj,fn,scope){if(Ext.isEmpty(obj)){return}if(Ext.isIterable(obj)){Ext.each(obj,fn,scope);return}else if(Ext.isObject(obj)){for(var prop in obj){if(obj.hasOwnProperty(prop)){if(fn.call(scope||obj,prop,obj[prop],obj)===false){return}}}}},getDom:getBody:removeNode:isIE&&!isIE8?):isEmpty:isArray:function(v){return toString.apply(v)==="[object Array]"},isDate:function(v){return toString.apply(v)==="[object Date]"},isObject:isPrimitive:isFunction:function(v){return toString.apply(v)==="[object Function]"},isNumber:isString:function(v){return typeof v==="string"},isBoolean:isElement:isDefined:function(v){return typeof v!=="undefined"},isOpera:isOpera,isWebKit:isWebKit,isChrome:isChrome,isSafari:isSafari,isSafari3:isSafari3,isSafari4:isSafari4,isSafari2:isSafari2,isIE:isIE,isIE6:isIE6,isIE7:isIE7,isIE8:isIE8,isGecko:isGecko,isGecko2:isGecko2,isGecko3:isGecko3,isBorderBox:isBorderBox,isLinux:isLinux,isWindows:isWindows,isMac:isMac,isAir:isAir});Ext.ns=Ext.namespace})();Ext.ns("Ext.util","Ext.lib","Ext.data");Ext.elCache={};Ext.apply(Function.prototype,{createInterceptor:createCallback:createDelegate:defer:);Ext.applyIf(String,{format:);Ext.applyIf(Array.prototype,{indexOf:remove:);Ext.util.TaskRunner=Ext.TaskMgr=new Ext.util.TaskRunner;Ext.util.DelayedTask=(function(){var libFlyweight;function(){var doc=document,isCSS1=doc.compatMode=="CSS1Compat",MAX=Math.max,ROUND=Math.round,PARSEINT=parseInt;Ext.lib.Dom={isAncestor:getViewWidth:function(full){return full?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:getDocumentHeight:function(){return MAX(!isCSS1?doc.body.scrollHeight:doc.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:getViewportHeight:getViewportWidth:getY:function(el){return this.getXY(el)[1]},getX:getXY:setXY:function(el,xy){(el=Ext.fly(el,"_setXY")).position();var pts=el.translatePoints(xy),style=el.dom.style,pos;for(pos in pts){if(!isNaN(pts[pos]))style[pos]=pts[pos]+"px"}},setX:setY:})();Ext.lib.Event=function(){var loadComplete=false,unloadListeners={},retryCount=0,onAvailStack=[],_interval,locked=false,win=window,doc=document,POLL_RETRYS=200,POLL_INTERVAL=20,EL=0,TYPE=0,FN=1,WFN=2,OBJ=2,ADJ_SCOPE=3,SCROLLLEFT="scrollLeft",SCROLLTOP="scrollTop",UNLOAD="unload",MOUSEOVER="mouseover",MOUSEOUT="mouseout",doAdd=),doRemove=);nction _tryPreloadAttach(){var ret=false,notAvail=[],element,i,len,v,tryAgain=!loadComplete||retryCount>0;if(!locked){locked=true;for(i=0,len=onAvailStack.length;i<len;i++){v=onAvailStack[i];if(v&&(element=doc.getElementById(v.id))){if(!v.checkReady||loadComplete||element.nextSibling||doc&&doc.body){element=v.override?v.override===true?v.obj:v.override:element;v.fn.call(element,v.obj);onAvailStack.remove(v)}else{notAvail.push(v)}}}retryCount=notAvail.length===0?0:retryCount-1;if(tryAgain){startInterval()}else{clearInterval(_interval);_interval=null}ret=!(locked=false)}return ret} pub={extAdapter:true,onAvailable:addListener:removeListener:function(el,eventName,fn){el=Ext.getDom(el);var i,len,li,lis;if(el&&fn){if(eventName==UNLOAD){if((lis=unloadListeners[el.id])!==undefined){for(i=0,len=lis.length;i<len;i++){if((li=lis[i])&&li[TYPE]==eventName&&li[FN]==fn){unloadListeners[id].splice(i,1)}}}return}doRemove(el,eventName,fn,false)}},getTarget:resolveTextNode:Ext.isGecko?getRelatedTarget:function(ev){ev=ev.browserEvent||ev;return this.resolveTextNode(ev.relatedTarget||(ev.type==MOUSEOUT?ev.toElement:ev.type==MOUSEOVER?ev.fromElement:null))},getPageX:function(ev){return getPageCoord(ev,"X")},getPageY:function(ev){return getPageCoord(ev,"Y")},getXY:stopEvent:stopPropagation:function(ev){ev=ev.browserEvent||ev;if(ev.stopPropagation){ev.stopPropagation()}else{ev.cancelBubble=true}},preventDefault:getEvent:getCharCode:getListeners:purgeElement:_load:function(e){loadComplete=true;var EU=Ext.lib.Event;if(Ext.isIE&&e!==true){doRemove(win,"load",arguments.callee)}},_unload:function(e){var EU=Ext.lib.Event,i,j,l,v,ul,id,len,index,scope;for(id in unloadListeners){ul=unloadListeners[id];for(i=0,len=ul.length;i<len;i++){v=ul[i];if(v){try{scope=v[ADJ_SCOPE]?v[ADJ_SCOPE]===true?v[OBJ]:v[ADJ_SCOPE]:win;v[FN].call(scope,EU.getEvent(e),v[OBJ])}catch(ex){}}}}unloadListeners=null;Ext.EventManager._unload();doRemove(win,UNLOAD,EU._unload)}};pub.on=pub.addListener;pub.un=pub.removeListener;if(doc&&doc.body){pub._load(true)}else{doAdd(win,"load",pub._load)}doAdd(win,UNLOAD,pub._unload);_tryPreloadAttach();return pub}();Ext.lib.Ajax=function(){var activeX=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],CONTENTTYPE="Content-Type";function setHeader(o){var conn=o.conn,prop;f(pub.defaultHeaders){setTheHeaders(conn,pub.defaultHeaders)}if(pub.headers){setTheHeaders(conn,pub.headers);delete pub.headers}}nction createResponseObject(o,callbackArg){var headerObj={},headerStr,conn=o.conn,t,s;try{headerStr=o.conn.getAllResponseHeaders();Ext.each(headerStr.replace(/\r\n/g,"\n").split("\n"),}catch(e){}return{tId:o.tId,status:conn.status,statusText:conn.statusText,getResponseHeader:getAllResponseHeaders:function(){return headerStr},responseText:conn.responseText,responseXML:conn.responseXML,argument:callbackArg}}function releaseObject(o){o.conn=null;o=null}unction handleReadyState(o,callback){callback=callback||{};var conn=o.conn,tId=o.tId,poll=pub.poll,cbTimeout=callback.timeout||null;if(cbTimeout){pub.timeout[tId]=setTimeout(cbTimeout)}poll[tId]=setInterval(function(){if(conn&&conn.readyState==4){clearInterval(poll[tId]);poll[tId]=null;if(cbTimeout){clearTimeout(pub.timeout[tId]);pub.timeout[tId]=null}handleTransactionResponse(o,callback)}},pub.pollInterval)} pub={request:serializeForm:function(form){var fElements=form.elements||(document.forms[form]||Ext.getDom(form)).elements,hasSubmit=false,encoder=encodeURIComponent,element,options,name,val,data="",type;Ext.each(fElements,function(element){name=element.name;type=element.type;if(!element.disabled&&name){if(/select-(one|multiple)/i.test(type)){Ext.each(element.options,function(opt){if(opt.selected){data+=String.format("{0}={1}&",encoder(name),encoder((opt.hasAttribute?opt.hasAttribute("value"):opt.getAttribute("value")!==null)?opt.value:opt.text))}})}else if(!/file|undefined|reset|button/i.test(type)){if(!(/radio|checkbox/i.test(type)&&!element.checked)&&!(type=="submit"&&hasSubmit)){data+=encoder(name)+"="+encoder(element.value)+"&";hasSubmit=/submit/i.test(type)}}}});return data.substr(0,data.length-1)},useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},pollInterval:50,transactionId:0,abort:isCallInProgress:;return pub}();(function(){var EXTLIB=Ext.lib,noNegatives=/width|height|opacity|padding/i,offsetAttribute=/^((width|height)|(top|left))$/,defaultUnit=/width|height|top$|bottom$|left$|right$/i,offsetUnit=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,isset=now=EXTLIB.Anim={motion:run:;EXTLIB.AnimBase=EXTLIB.AnimBase.prototype={doMethod:setAttr:getAttr:getDefaultUnit:animateX:setRunAttr:init:;Ext.lib.AnimMgr=new EXTLIB.Bezier=new EXTLIB.Easing={easeNone:easeIn:easeOut:;(function(){EXTLIB.Motion=function(el,attributes,duration,method){if(el){EXTLIB.Motion.superclass.constructor.call(this,el,attributes,duration,method)}};Ext.extend(EXTLIB.Motion,Ext.lib.AnimBase);var superclass=EXTLIB.Motion.superclass,proto=EXTLIB.Motion.prototype,pointsRe=/^points$/i;Ext.apply(EXTLIB.Motion.prototype,{setAttr:getAttr:doMethod:setRunAttr:);var translateValues=)()})();(();(function(){var EXTLIB=Ext.lib;EXTLIB.Anim.color=function(el,args,duration,easing,cb,scope){return EXTLIB.Anim.run(el,args,duration,easing,cb,scope,EXTLIB.ColorAnim)};EXTLIB.ColorAnim=Ext.extend(EXTLIB.ColorAnim,EXTLIB.AnimBase)
;var superclass=EXTLIB.ColorAnim.superclass,colorRE=/color$/i,transparentRE=/^transparent|rgba\(0, 0, 0, 0\)$/,rgbRE=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,isset=function(v){return typeof v!=="undefined"};xt.apply(EXTLIB.ColorAnim.prototype,{getAttr:doMethod:function(attr,start,end){var me=this,val,floor=Math.floor,i,len,v;if(colorRE.test(attr)){val=[];for(i=0,len=start.length;i<len;i++){v=start[i];val[i]=superclass.doMethod.call(me,attr,v,end[i])}val="rgb("+floor(val[0])+","+floor(val[1])+","+floor(val[2])+")"}else{val=superclass.doMethod.call(me,attr,start,end)}return val},setRunAttr:)})();(();if(Ext.isIE){indow.attachEvent("onunload",fnCleanUp)}})();(function(){var EXTUTIL=Ext.util,TOARRAY=Ext.toArray,EACH=Ext.each,ISOBJECT=Ext.isObject,TRUE=true,FALSE=false;EXTUTIL.Observable=EXTUTIL.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var a=TOARRAY(arguments),ename=a[0].toLowerCase(),me=this,ret=TRUE,ce=me.events[ename],q,c;if(me.eventsSuspended===TRUE){if(q=me.eventQueue){q.push(a)}}else if(ISOBJECT(ce)&&ce.bubble){if(ce.fire.apply(ce,a.slice(1))===FALSE){return FALSE}c=me.getBubbleTarget&&me.getBubbleTarget();if(c&&c.enableBubble){if(!c.events[ename]||!Ext.isObject(c.events[ename])||!c.events[ename].bubble){c.enableBubble(ename)}return c.fireEvent.apply(c,a)}}else{if(ISOBJECT(ce)){a.shift();ret=ce.fire.apply(ce,a)}}return ret},addListener:removeListener:purgeListeners:addEvents:hasListener:suspendEvents:resumeEvents:;var OBSERVABLE=EXTUTIL.Observable.prototype;OBSERVABLE.on=OBSERVABLE.addListener;OBSERVABLE.un=OBSERVABLE.removeListener;EXTUTIL.Observable.releaseCapture=function(o){o.fireEvent=OBSERVABLE.fireEvent};TIL.Event=EXTUTIL.Event.prototype={addListener:createListener:findListener:isListening:removeListener:clearListeners:fire:})();Ext.DomHelper=function(){var tempTableEl=null,emptyTags=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,tableRe=/^table|tbody|tr|td$/i,pub,afterbegin="afterbegin",afterend="afterend",beforebegin="beforebegin",beforeend="beforeend",ts="<table>",te="</table>",tbs=ts+"<tbody>",tbe="</tbody>"+te,trs=tbs+"<tr>",tre="</tr>"+tbe;unction createHtml(o){var b="",attr,val,key,keyVal,cn;if(Ext.isString(o)){b=o}else if(Ext.isArray(o)){for(var i=0;i<o.length;i++){if(o[i]){b+=createHtml(o[i])}}}else{b+="<"+(o.tag=o.tag||"div");Ext.iterate(o,;if(emptyTags.test(o.tag)){b+="/>"}else{b+=">";if(cn=o.children||o.cn){b+=createHtml(cn)}else if(o.html){b+=o.html}b+="</"+o.tag+">"}}return b}unction insertIntoTable(tag,where,el,html){var node,before;tempTableEl=tempTableEl||document.createElement("div");if(tag=="td"&&(where==afterbegin||where==beforeend)||!/td|tr|tbody/i.test(tag)&&(where==beforebegin||where==afterend)){return}before=where==beforebegin?el:where==afterend?el.nextSibling:where==afterbegin?el.firstChild:null;if(where==beforebegin||where==afterend){el=el.parentNode}if(tag=="td"||tag=="tr"&&(where==beforeend||where==afterbegin)){node=ieTable(4,trs,html,tre)}else if(tag=="tbody"&&(where==beforeend||where==afterbegin)||tag=="tr"&&(where==beforebegin||where==afterend)){node=ieTable(3,tbs,html,tbe)}else{node=ieTable(2,ts,html,te)}el.insertBefore(node,before);return node}pub={markup:applyStyles:function(el,styles){if(styles){var i=0,len,style;el=Ext.fly(el);if(Ext.isFunction(styles)){styles=styles.call()}if(Ext.isString(styles)){styles=styles.trim().split(/\s*(?::|;)\s*/);for(len=styles.length;i<len;){el.setStyle(styles[i++],styles[i++])}}else if(Ext.isObject(styles)){el.setStyle(styles)}}},insertHtml:insertBefore:insertAfter:function(el,o,returnElement){return doInsert(el,o,returnElement,afterend,"nextSibling")},insertFirst:append:overwrite:createHtml:createHtml};return pub}();Ext.Template=function(html){var me=this,a=arguments,buf=[];if(Ext.isArray(html)){html=html.join("")}else if(a.length>1){Ext.each(a,;html=buf.join("")}me.html=html;if(me.compiled){me.compile()}};Ext.Template.prototype={re:/\{([\w-]+)\}/g,applyTemplate:set:compile:insertFirst:function(el,values,returnElement){return this.doInsert("afterBegin",el,values,returnElement)},insertBefore:function(el,values,returnElement){return this.doInsert("beforeBegin",el,values,returnElement)},insertAfter:function(el,values,returnElement){return this.doInsert("afterEnd",el,values,returnElement)},append:doInsert:overwrite:;Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.Template.from=Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?true:false,key=30803;eval("var batch = 30803;");unction next(n){while((n=n.nextSibling)&&n.nodeType!=1);return n} byAttribute(cs,attr,value,op,custom){var r=[],ri=-1,st=custom=="{",f=Ext.DomQuery.operators[op],a,ih;for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}ih=ci.innerHTML;if(ih!==null&&ih!==undefined){if(st){a=Ext.DomQuery.getStyle(ci,attr)}else if(attr=="class"||attr=="className"){a=ci.className}else if(attr=="for"){a=ci.htmlFor}else if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}else{a=ci.getAttribute(attr)}if(f&&f(a,value)||!f&&a){r[++ri]=ci}}return r}{getStyle:compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],q=path,mode,lq,tk=Ext.DomQuery.matchers,tklen=tk.length,mm,lmode=q.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';q=q.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(q&&lq!=q){lq=q;var tm=q.match(tagTokenRe);if(type=="select"){if(tm){if(tm[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");'}q=q.replace(tm[0],"")}else if(q.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}else{if(tm){if(tm[1]=="#"){fn[fn.length]='n = byId(n, null, "'+tm[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tm[2]+'");'}q=q.replace(tm[0],"")}}while(!(mm=q.match(modeRe))){var matched=false;for(var j=0;j<tklen;j++){var t=tk[j];var m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,;q=q.replace(m[0],"");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at "'+q+'"'}}if(mm[1]){fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";';q=q.replace(mm[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},select:selectNode:selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,"select")}var n=valueCache[path](root),v;n=n[0]?n[0]:n;if(typeof n.normalize=="function")n.normalize();v=n&&n.firstChild?n.firstChild.nodeValue:null;return v===null||v===undefined||v===""?defaultValue:v},selectNumber:is:filter:matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":"!=":"^=":"$=":"*=":"%=":"|=":"~=":,pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1);if(!n){r[++ri]=ci}}return r},"last-child":"nth-child":"only-child":empty:contains:nodeValue:checked:not:any:odd:function(c){return this["nth-child"](c,"odd")},even:nth:first:last:has:next:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:}}();Ext.query=Ext.DomQuery.select;Ext.EventManager=function(){var docReadyEvent,docReadyProcId,docReadyState=false,E=Ext.lib.Event,D=Ext.lib.Dom,DOC=document,WINDOW=window,IEDEFERED="ie-deferred-loader",DOMCONTENTLOADED="DOMContentLoaded",propRe=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,specialElCache=[];unction addListener(el,ename,fn,task,wrap,scope){el=Ext.getDom(el);var id=getId(el),es=Ext.elCache[id].events,wfn;wfn=E.on(el,ename,wrap);es[ename]=es[ename]||[];es[ename].push([fn,wrap,scope,wfn,task]);if(ename=="mousewheel"&&el.addEventListener){var args=["DOMMouseScroll",wrap,false];el.addEventListener.apply(el,args);Ext.EventManager.addListener(WINDOW,"unload",}if(ename=="mousedown"&&el==document){Ext.EventManager.stoppedMouseDownEvent.addListener(wrap)}}unction initDocReady(){var COMPLETE="complete";docReadyEvent=new Ext.util.Event;if(Ext.isGecko||Ext.isOpera){DOC.addEventListener(DOMCONTENTLOADED,fireDocReady,false)}else if(Ext.isIE){var s=DOC.createElement("script");s.setAttribute("defer","defer");s.setAttribute("src","//:");DOC.getElementsByTagName("head")[0].appendChild(s);s.onreadystatechange=else if(Ext.isWebKit){docReadyProcId=setInterval(10)}E.on(WINDOW,"load",fireDocReady)}tion listen(element,ename,opt,fn,scope){var o=!Ext.isObject(opt)?{}:opt,el=Ext.getDom(element),task;fn=fn||o.fn;scope=scope||o.scope;if(!el){throw'Error listening for "'+ename+'". Element "'+element+"\" doesn't exist."}f(o.target){h=createTargeted(h,o)}if(o.delay){h=createDelayed(h,o,fn)}if(o.single){h=createSingle(h,el,ename,fn,scope)}if(o.buffer){task=new Ext.util.DelayedTask(h);h=createBuffered(h,o,task)}addListener(el,ename,fn,task,h,scope);return h}var pub={addListener:removeListener:function(el,eventName,fn,scope){el=Ext.getDom(el);var id=getId(el),f=el&&Ext.elCache[id].events[eventName]||[],wrap,i,l,k,wf,len,fnc;for(i=0,len=f.length;i<len;i++){if(Ext.isArray(fnc=f[i])&&fnc[0]==fn&&(!scope||fnc[2]==scope)){if(fnc[4]){fnc[4].cancel()}k=fn.tasks&&fn.tasks.length;if(k){while(k--){fn.tasks[k].cancel()}delete fn.tasks}wf=wrap=fnc[1];if(E.extAdapter){wf=fnc[3]}E.un(el,eventName,wf);f.splice(i,1);if(f.length===0){delete Ext.elCache[id].events[eventName]}for(k in Ext.elCache[id].events){return false}Ext.elCache[id].events={};return false}}if(eventName=="mousewheel"&&el.addEventListener&&wrap){el.removeEventListener("DOMMouseScroll",wrap,false)}if(eventName=="mousedown"&&el==DOC&&wrap){Ext.EventManager.stoppedMouseDownEvent.removeListener(wrap)}},removeAll:function(el){el=Ext.getDom(el);var id=getId(el),ec=Ext.elCache[id]||{},es=ec.events||{},f,i,len,ename,fn,k;for(ename in es){if(es.hasOwnProperty(ename)){f=es[ename];for(i=0,len=f.length;i<len;i++){fn=f[i];if(fn[4]){fn[4].cancel()}if(fn[0].tasks&&(k=fn[0].tasks.length)){while(k--){fn[0].tasks[k].cancel()}delete fn.tasks}E.un(el,ename,E.extAdapter?fn[3]:fn[1])}}}if(Ext.elCache[id]){Ext.elCache[id].events={}}},getListeners:purgeElement:_unload:onDocumentReady:function(fn,scope,options){if(docReadyState){docReadyEvent.addListener(fn,scope,options);docReadyEvent.fire();docReadyEvent.listeners=[]}else{if(!docReadyEvent)initDocReady();options=options||{};options.delay=options.delay||1;docReadyEvent.addListener(fn,scope,options)}}};pub.on=pub.addListener;pub.un=pub.removeListener;pub.stoppedMouseDownEvent=new Ext.util.Event;return pub}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var initExtCss=function(){var bd=document.body||document.getElementsByTagName("body")[0];if(!bd){return false}var cls=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":Ext.isIE7?"ext-ie7":"ext-ie8"):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isWebKit?"ext-webkit":""];if(Ext.isSafari){cls.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4"))}else if(Ext.isChrome){cls.push("ext-chrome")}if(Ext.isMac){cls.push("ext-mac")}if(Ext.isLinux){cls.push("ext-linux")}if(Ext.isStrict||Ext.isBorderBox){var p=bd.parentNode;if(p){p.className+=Ext.isStrict?" ext-strict":" ext-border-box"}}bd.className+=cls.join(" ");return true};if(!initExtCss()){Ext.onReady(initExtCss)}})();Ext.EventObject=function(){var E=Ext.lib.Event,safariKeys={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},btnMap=Ext.isIE?{1:0,4:1,2:2}:Ext.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2};Ext.EventObjectImpl=Ext.EventObjectImpl.prototype={setEvent:stopEvent:function(){var me=this;if(me.browserEvent){if(me.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(me)}E.stopEvent(me.browserEvent)}},preventDefault:stopPropagation:getCharCode:
getKey:normalizeKey:getPageX:function(){return this.xy[0]},getPageY:getXY:getTarget:getRelatedTarget:getWheelDelta:within:;return new Ext.EventObjectImpl}();(function(){var DOC=document;Ext.Element=function(element,forceNew){var dom=typeof element=="string"?DOC.getElementById(element):element,id;if(!dom)return null;id=dom.id;if(!forceNew&&id&&Ext.elCache[id]){return Ext.elCache[id].el}this.dom=dom;this.id=id||Ext.id(dom)};var D=Ext.lib.Dom,DH=Ext.DomHelper,E=Ext.lib.Event,A=Ext.lib.Anim,El=Ext.Element,EC=Ext.elCache;El.prototype={set:defaultUnit:"px",is:focus:blur:getValue:addListener:removeListener:removeAllListeners:purgeAllListeners:addUnits:load:isBorderBox:remove:hover:contains:getAttributeNS:getAttribute:Ext.isIE?update:;var ep=El.prototype;El.addMethods=ep.on=ep.addListener;ep.un=ep.removeListener;ep.autoBoxAdjust=true;var unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,docEl;El.get=function(el){var ex,elm,id;if(!el){return null}if(typeof el=="string"){if(!(elm=DOC.getElementById(el))){return null}if(EC[el]&&EC[el].el){ex=EC[el].el;ex.dom=elm}else{ex=El.addToCache(new El(elm))}return ex}else if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(EC[id]&&EC[id].el){ex=EC[id].el;ex.dom=el}else{ex=El.addToCache(new El(el))}return ex}else if(el instanceof El){if(el!=docEl){el.dom=DOC.getElementById(el.id)||el.dom}return el}else if(el.isComposite){return el}else if(Ext.isArray(el)){return El.select(el)}else if(el==DOC){if(!docEl){var f=function(){};f.prototype=El.prototype;docEl=new f;docEl.dom=DOC}return docEl}return null};El.addToCache=El.data=l.collectorThreadId=setInterval(garbageCollect,3e4);var flyFn=function(){};flyFn.prototype=El.prototype;El.Flyweight=El.Flyweight.prototype=new flyFn;El.Flyweight.prototype.isFlyweight=true;El._flyweights={};El.fly=Ext.get=El.get;Ext.fly=El.fly;var noBoxAdjust=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){noBoxAdjust["button"]=1}Ext.EventManager.on(window,"unload",})();Ext.Element.addMethods());Ext.Element.addMethods());Ext.Element.addMethods(function(){var propCache={},camelRe=/(-[a-z])/gi,classReCache={},view=document.defaultView,propFloat=Ext.isIE?"styleFloat":"cssFloat",opacityRe=/alpha\(opacity=(.*)\)/i,trimRe=/^\s+|\s+$/g,EL=Ext.Element,PADDING="padding",MARGIN="margin",BORDER="border",LEFT="-left",RIGHT="-right",TOP="-top",BOTTOM="-bottom",WIDTH="-width",MATH=Math,HIDDEN="hidden",ISCLIPPED="isClipped",OVERFLOW="overflow",OVERFLOWX="overflow-x",OVERFLOWY="overflow-y",ORIGINALCLIP="originalClip",borders={l:BORDER+LEFT+WIDTH,r:BORDER+RIGHT+WIDTH,t:BORDER+TOP+WIDTH,b:BORDER+BOTTOM+WIDTH},paddings={l:PADDING+LEFT,r:PADDING+RIGHT,t:PADDING+TOP,b:PADDING+BOTTOM},margins={l:MARGIN+LEFT,r:MARGIN+RIGHT,t:MARGIN+TOP,b:MARGIN+BOTTOM},data=Ext.Element.data;turn{adjustWidth:function(width){var me=this;var isNum=Ext.isNumber(width);if(isNum&&me.autoBoxAdjust&&!me.isBorderBox()){width-=me.getBorderWidth("lr")+me.getPadding("lr")}return isNum&&width<0?0:width},adjustHeight:addClass:radioClass:removeClass:toggleClass:hasClass:replaceClass:isStyle:getStyle:function(){return view&&view.getComputedStyle?function(prop){var el=this.dom,v,cs,out,display,wk=Ext.isWebKit,display;if(el==document){return null}prop=chkCache(prop);if(wk&&/marginRight/.test(prop)){display=this.getStyle("display");el.style.display="inline-block"}out=(v=el.style[prop])?v:(cs=view.getComputedStyle(el,""))?cs[prop]:null;if(wk){if(out=="rgba(0, 0, 0, 0)"){out="transparent"}else if(display){el.style.display=display}}return out}:(),getColor:setStyle:setOpacity:clearOpacity:getHeight:function(contentHeight){var me=this,dom=me.dom,hidden=Ext.isIE&&me.isStyle("display","none"),h=MATH.max(dom.offsetHeight,hidden?0:dom.clientHeight)||0;h=!contentHeight?h:h-me.getBorderWidth("tb")-me.getPadding("tb");return h<0?0:h},getWidth:setWidth:function(width,animate){var me=this;width=me.adjustWidth(width);!animate||!me.anim?me.dom.style.width=me.addUnits(width):me.anim({width:{to:width}},me.preanim(arguments,1));return me},setHeight:getBorderWidth:function(side){return this.addStyles(side,borders)},getPadding:function(side){return this.addStyles(side,paddings)},clip:unclip:addStyles:margins:margins}}());(function(){var D=Ext.lib.Dom,LEFT="left",RIGHT="right",TOP="top",BOTTOM="bottom",POSITION="position",STATIC="static",RELATIVE="relative",AUTO="auto",ZINDEX="z-index";Ext.Element.addMethods({getX:function(){return D.getX(this.dom)},getY:function(){return D.getY(this.dom)},getXY:getOffsetsTo:setX:setY:setLeft:function(left){this.setStyle(LEFT,this.addUnits(left));return this},setTop:function(top){this.setStyle(TOP,this.addUnits(top));return this},setRight:function(right){this.setStyle(RIGHT,this.addUnits(right));return this},setBottom:setXY:setLocation:function(x,y,animate){return this.setXY([x,y],this.animTest(arguments,animate,2))},moveTo:getLeft:function(local){return!local?this.getX():parseInt(this.getStyle(LEFT),10)||0},getRight:function(local){var me=this;return!local?me.getX()+me.getWidth():me.getLeft(true)+me.getWidth()||0},getTop:getBottom:position:clearPositioning:getPositioning:setPositioning:translatePoints:animTest:)})();Ext.Element.addMethods({isScrollable:scrollTo:getScroll:);Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.addMethods(function(){var VISIBILITY="visibility",DISPLAY="display",HIDDEN="hidden",NONE="none",ORIGINALDISPLAY="originalDisplay",VISMODE="visibilityMode",ELDISPLAY=Ext.Element.DISPLAY,data=Ext.Element.data,getDisplay=function(dom){var d=data(dom,ORIGINALDISPLAY);if(d===undefined){data(dom,ORIGINALDISPLAY,d="")}return d},getVisMode=return{originalDisplay:"",visibilityMode:1,setVisibilityMode:animate:anim:function(args,opt,animType,defaultDur,defaultEase,cb){animType=animType||"run";opt=opt||{};var me=this,anim=Ext.lib.Anim[animType](me.dom,args,opt.duration||defaultDur||.35,opt.easing||defaultEase||"easeOut",me);opt.anim=anim;return anim},preanim:isVisible:setVisible:toggle:setDisplayed:fixDisplay:hide:function(animate){this.setVisible(false,this.preanim(arguments,0));return this},show:}());(();Ext.CompositeElementLite=Ext.CompositeElementLite.prototype={isComposite:true,getElement:transformElement:function(el){return Ext.getDom(el)},getCount:add:function(els,root){var me=this,elements=me.elements;if(!els){return this}if(Ext.isString(els)){els=Ext.Element.selectorFunction(els,root)}else if(els.isComposite){els=els.elements}else if(!Ext.isIterable(els)){els=[els]}for(var i=0,len=els.length;i<len;++i){elements.push(me.transformElement(els[i]))}return me},invoke:item:addListener:each:fill:filter:indexOf:replaceElement:clear:;Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;(();if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(selector,root){var els;if(typeof selector=="string"){els=Ext.Element.selectorFunction(selector,root)}else if(selector.length!==undefined){els=selector}else{throw"Invalid selector"}return new Ext.CompositeElementLite(els)};Ext.select=Ext.Element.select;(function(){var BEFOREREQUEST="beforerequest",REQUESTCOMPLETE="requestcomplete",REQUESTEXCEPTION="requestexception",UNDEFINED=undefined,LOAD="load",POST="POST",GET="GET",WINDOW=window;Ext.data.Connection=Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:isLoading:abort:handleResponse:handleFailure:doFormUpload:function(o,ps,url){var id=Ext.id(),doc=document,frame=doc.createElement("iframe"),form=Ext.getDom(o.form),hiddens=[],hd,encoding="multipart/form-data",buf={target:form.target,method:form.method,encoding:form.encoding,enctype:form.enctype,action:form.action};Ext.fly(frame).set({id:id,name:id,cls:"x-hidden"});doc.body.appendChild(frame);Ext.fly(frame).set({src:Ext.SSL_SECURE_URL});if(Ext.isIE){document.frames[id].name=id}Ext.fly(form).set({target:id,method:POST,enctype:encoding,encoding:encoding,action:url||buf.action});Ext.iterate(Ext.urlDecode(ps,false),;xt.EventManager.on(frame,LOAD,cb,this);form.submit();Ext.fly(form).set(buf);Ext.each(hiddens,}})})();Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:);Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=),pad=doDecode=doEncode=function(o){if(!Ext.isDefined(o)||o===null){return"null"}else if(Ext.isArray(o)){return encodeArray(o)}else if(Ext.isDate(o)){return Ext.util.JSON.encodeDate(o)}else if(Ext.isString(o)){return encodeString(o)}else if(typeof o=="number"){return isFinite(o)?String(o):"null"}else if(Ext.isBoolean(o)){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(doEncode(i),":",v===null?"null":doEncode(v));b=true}}}}a.push("}");return a.join("")}},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=encodeArray=this.encodeDate=this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=)};Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;()(window);DM.m={};DM.has=function(id,type,params){type=type||id;if(!this.m[type]){this.m[type]=[]}this.m[type].push({id:id,params:params})};DM.setCookie=function(szName,szValue,szExpires,szPath,szDomain,bSecure){var szCookieText=escape(szName)+"="+escape(szValue);szCookieText+=szExpires?";expires="+szExpires.toGMTString():"";szCookieText+=szPath?";path="+szPath:"";szCookieText+=szDomain?";domain="+szDomain:"";szCookieText+=bSecure?";secure":"";document.cookie=szCookieText};DM.getCookie=function(szName){var szValue=null;if(document.cookie){var arr=document.cookie.split(escape(szName)+"=");if(2<=arr.length){szValue=unescape(arr[1].split(";")[0]);if(szValue.length>1&&szValue.charAt(0)==='"'&&szValue.charAt(szValue.length-1)==='"'){szValue=szValue.substring(1,szValue.length-1)}}}return szValue};DM.deleteCookie=function(szName){var tmp=DM.getCookie(szName);if(tmp)DM.setCookie(szName,tmp,new Date(1))};DM.popup=function(url,w,h){var _popupFeatures="menubar=false,location=false,statusbar=false,toolbar=false,resizable=false",_popupfpFeatures="resizable=1,scrollbars=1",nw=window.open(url,"_blank","width="+w+",height="+h+","+_popupFeatures+","+_popupfpFeatures);nw.focus();return nw};(function($){"use strict"$.fn.emulateTransitionEnd;$.support.transition=transitionEnd();var NS="ez-modal";var numberOfModals=0;var methods={init:function(options){var defaults={container:"body",closeOnBackgroundClick:true,triggerOnClick:false,toggleButtons:false,autoOpen:false,closeKeyCodes:"27",center:false,ajaxUrl:false,ajaxRefreshEverytime:true,ajaxLoadOnInit:false,ajaxErrorMessage:"Sorry, but something went wrong. Please come back later and try again."};options=$.extend(defaults,options);return this.each(function(){var o=options,showModal,hideModal,showBackdrop,loadHTML,ui={},evtNS="."+NS+"-"+numberOfModals++,alreadyLoaded=false,toBeCentered=o.center,centerModal,closeKeyCodes=$.map(o.closeKeyCodes.split(" "),function(el){if(el&&el.length){return parseInt(el,10)}});ui.container=$(o.container);ui.backdrop=ui.container.children("."+NS+"-backdrop");if(!ui.backdrop.length){ui.backdrop=$("<div class="+NS+"-backdrop></div>").appendTo(ui.container)}ui.modal=$(this).addClass(NS);ui.modal.data("modal","active");showBackdrop=function(){ui.backdrop.show();setTimeout(function(){ui.backdrop.addClass(NS+"-backdrop-on")},30)};showModal=function(){ui.modal.show();centerModal();setTimeout(function(){ui.container.addClass(NS+"-container-on");ui.modal.addClass(NS+"-on");ui.modal.attr("aria-hidden","false");ui.modal.focus();ui.modal.trigger({type:NS+"-after-open",ui:ui,opt:o})},30)};hideModal=function(){ui.container.removeClass(NS+"-container-on");ui.backdrop.removeClass(NS+"-backdrop-on");ui.modal.removeClass(NS+"-on");ui.modal.attr("aria-hidden","true");if($.support.transition){ui.container.addClass(NS+"-container-off").one($.support.transition.end).emulateTransitionEnd(600);ui.backdrop.addClass(NS+"-backdrop-off").one($.support.transition.end,function(){ui.backdrop.removeClass(NS+"-backdrop-off").hide()}).emulateTransitionEnd(600);ui.modal.addClass(NS+"-off").one($.support.transition.end,function(){ui.modal.removeClass(NS+"-off").hide();ui.modal.trigger({type:NS+"-after-close",ui:ui,opt:o})}).emulateTransitionEnd(600)}else{ui.backdrop.hide();ui.modal.hide();ui.modal.trigger({type:NS+"-after-close",ui:ui,opt:o})}};centerModal=function(){if(toBeCentered){ui.modal.css("margin-left",0);ui.modal.css("margin-left","-"+ui.modal.outerWidth(true)/2+"px");ui.modal.css("margin-top",0);ui.modal.css("margin-top","-"+ui.modal.outerHeight(true)/2+"px")}toBeCentered=false};loadHTML=o.ajaxUrl&&function(cb){if(!alreadyLoaded||o.ajaxRefreshEverytime){ui.modal.trigger({type:NS+"-before-load",ui:ui,opt:o});ui.modal.load($.isFunction(o.ajaxUrl)&&o.ajaxUrl()||o.ajaxUrl,function(response,status,req){if(status==="error"){ui.modal.html('<div class="'+NS+"-error "+NS+'-close" >'+o.ajaxErrorMessage+"</div>")}else{alreadyLoaded=true;toBeCentered=o.center}ui.modal.trigger({type:NS+"-after-load",ui:ui,opt:o});cb()})}else{cb()}}|;if(o.ajaxLoadOnInit){loadHTML(function(){})}ui.modal.on(NS+"-open"+evtNS,function(){showBackdrop();ui.modal.trigger({type:NS+"-before-open",ui:ui,opt:o});loadHTML(function(){showModal()})});ui.modal.on(NS+"-close"+evtNS,function(){ui.modal.trigger({type:NS+"-before-close",ui:ui,opt:o});hideModal()});if(o.autoOpen){ui.modal.trigger(NS+"-open")}if(closeKeyCodes){$(document).on("keydown"+evtNS,function(e){if(ui.modal.is("."+NS+"-on")){if($.inArray(e.keyCode,closeKeyCodes)!==-1){ui.modal.trigger(NS+"-close");return false}}})}if(o.triggerOnClick){$(document).on("click"+evtNS,o.triggerOnClick,function(evt){ui.modal.trigger(NS+"-open");return false})}if(o.toggleButtons){$(o.toggleButtons).each)}ui.modal.on("click"+evtNS,"."+NS+"-close",function(evt){ui.modal.trigger(NS+"-close");return false});if(o.closeOnBackgroundClick){ui.backdrop.on("click"+evtNS,function(){ui.modal.trigger(NS+"-close");return false})}ui.modal.bind(NS+"-destroy"+evtNS,function(){ui.backdrop.off(evtNS);ui.modal.off(evtNS);$(document).off(evtNS);hideModal();ui.modal.removeData("modal")})})},open:function(){this.trigger(NS+"-open")},close:function(){this.trigger(NS+"-close")},destroy};$.fn.ezmodal;$(document).on("click."+NS,'[data-toggle="modal"]',function(e){var $this=$(this);if($this.attr("data-on-mobile")&&(MobileUtils.isMobile()||MobileUtils.isKindleSilk())){$(this).attr("href",$this.attr("data-on-mobile"));return}var href=$this.attr("href"),target=$this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""),modalId=$this.data("modal-id"),$target;if(target.indexOf("#")===0){$target=$(target);if(!$target.data("modal")){$target.ezmodal($.extend($target.data(),$this.data()))}}else{if(modalId){
$target=$("#"+modalId)}else{$target=$this.data("modal")}if(!$target||$target.length==0){$target=$('<div class="'+NS+'" aria-hidden="true" role="dialog"></div>');modalId&&$target.attr("id",modalId);$target.ezmodal($.extend({ajaxUrl:target,toggleButtons:$this},$this.data())).appendTo("body")}}$target.ezmodal("open");e.preventDefault()})})(jQuery);DM.Fn=function(){var initClass=function(type,items){var cls,initFn,scope,l=items.length;if(typeof DM[type]==="undefined"){type=type.charAt(0).toUpperCase()+type.slice(1);if(typeof DM[type]==="undefined"){return}}cls=DM[type];if(typeof cls==="function"){while(l>0){--l;new cls(items[l].id,items[l].params)}}else if(typeof cls==="object"){if(typeof cls.getInstance==="function"){initFn=cls.getInstance().init;scope=cls.getInstance()}else{initFn=cls.init;scope=cls}while(l>0){--l;initFn.call(scope,items[l])}}};var fixIframe=function(){var fn=function(e){var t=e.getTarget("A");if(!t||window.location.pathname.indexOf("/embed/video")>=0)return;if(t.target==""){top.location.replace(t.href)}};document.body.addEventListener("click",fn);var forms=document.getElementsByTagName("form"),l=forms.length;while(l>0){--l;forms[l].setAttribute("target","_top")}setTimeout(function(){var params=window.location.search.substring(1).split("&");for(var i=0,len=params.length;i<len;i++){var param=params[i].split("=");if(param[0]=="dmproxy"){var iFrameId="";if(window.location.search.indexOf("betaonly")!=-1){iFrameId="dmbeta"}else if(window.location.search.indexOf("headeronly")!=-1){iFrameId="dmheader"}else if(window.location.search.indexOf("footeronly")!=-1){iFrameId="dmfooter"}if(iFrameId!=""){var iFrame=document.createElement("iframe");iFrame.style.border="0px";iFrame.style.width="0px";iFrame.style.height="0px";var windowHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);iFrame.src=param[1]+"?command=updateIFrame&id="+iFrameId+"&attribute=height&value="+windowHeight;document.body.appendChild(iFrame)}}}},1e3)};return{init:function(){var type;if(self!=top)fixIframe();for(type in DM.m){initClass(type,DM.m[type])}}}}();DM.PictureSwap=Ext.extend(Ext.util.Observable,{constructor:function(id){this.el=Ext.get(id);if(!this.el)return;this.el.on("mouseover",this._mouseOverHandler,this);var image=Ext.get(id+"-img");this._img=image?image.dom:null;this.addEvents(["change"])},_swap:function(src){if(this._img){this._img.src=src;this.fireEvent("change")}},_mouseOverHandler:function(e){var trg=e.getTarget("a",3),imgSrc;if(!trg){return}function getClassData(el){return el.className.includes("|")?el.className.split("|"):[]}imgSrc=getClassData(trg)[0];imgSrc&&this._swap(imgSrc)}});DM.Showcase=Ext.extend(Ext.util.Observable,{constructor:function(id){this.el=Ext.get(id);this._showables=this.el.select(".mainImages li");this.el.on("click",this._clickHandler,this);this._prodElX=Ext.fly(this.el.query(".products")[0]).getX();this._prodElY=Ext.fly(this.el.query(".products")[0]).getY();this.addEvents(["startAnim","endAnim"])},_resetShowable,_showShowable:function(el,pos){var h,value=el.getStyle("height");if(value==="0px"||value==="auto"){h=el.dom.offsetHeight-6}else{h=value.substring(0,value.length-2)}el.setStyle({top:pos.top-this._prodElY-11+"px",left:pos.left+"px",width:"0px",height:"0px",visibility:"visible"});this.fireEvent("startAnim");var onEndAnim=this.fireEvent.createDelegate(this,["endAnim"]);el.animate({width:{to:251},height:{to:h}},.3,function(){el.select(".js-product-container").item(0).animate({opacity:{to:1}},.3,function(){onEndAnim()})})},_clickHandler:function(e){function getHash(el){return(el.href||"").split("#")[1]||""}function getClassData(el){return el.className.includes("|")?el.className.split("|"):[]}var parent=trg=Ext.get(e.getTarget());!trg.hasClass("buy-link")&&!trg.hasClass("promo")&&e.preventDefault();var liContainer=trg.parent("li");var childIndex=getClassData(liContainer.dom)[1];var leftPos;if(childIndex%2===0){leftPos=148}else{leftPos=10}if(trg.is("a")&&trg.hasClass("revealProductMain")||(parent=trg.parent("a.revealProductMain"))){this._showables.each(function(el){this._resetShowable(el)},this);this._showShowable(Ext.get(getHash(parent.dom)),{top:parent.getY()+10,left:leftPos})}else if(trg.is("img.close")){this._resetShowable(trg.parent("li"))}}});DM.MirrorMirror=Ext.extend(Ext.util.Observable,{_blockAction:false,constructor:function(id,params){this.el=Ext.get(id);this._galleryId=params.galleryId;this._showables=this.el.select(".js-mm-overlay");this.el.on("click",this._clickHandler,this,{preventDefault:true});this.addEvents(["startAnim","endAnim"]);this.on("endAnim",this._showShowable)},_getTwin:function(el){var id=el.dom.id;var match=id.match(/[0-9]{1,2}$/gi)[0];match%2?++match:--match;return Ext.get("MM_overlay_thumb_overlay_"+this._galleryId+"_"+match)},_resetShowable:function(el,fromUserClick){el.setStyle("visibility","hidden");el.select("div").setStyle("opacity",0);fromUserClick&&arguments.callee(this._getTwin(el))},_showShowable:function(el,fromUserClick){var h=el.getHeight()-26;el.setStyle({width:"0px",height:"0px",visibility:"visible"});this.fireEvent("startAnim");var onEndAnim=fromUserClick?this.fireEvent.createDelegate(this,["endAnim",this._getTwin(el)]):false;var removeBlock.createDelegate(this);el.animate({width:{to:180},height:{to:h}},.3,function(){el.select("div").animate({opacity:{to:1,from:0}},.3,function(){onEndAnim&&onEndAnim()||removeBlock()})})},_clickHandler:function(e){var parent=trg=Ext.get(e.getTarget());if(trg.is("a")&&trg.hasClass("js-mm-image-link")||(parent=trg.parent("a.js-mm-image-link"))){if(!this._blockAction){this._blockAction=true;this._showables.each,this);this._showShowable(parent.next(),true)}}else if(trg.is("img.closebutton")){this._resetShowable(trg.parent("div.js-mm-overlay"),true)}}});DM.Poll=Ext.extend(Ext.util.Observable,{_classes:{pollDiv:"js-poll",pollQuestion:"js-poll-question",pollResults:"js-poll-results",pollResultsData:"js-poll-content",voteButton:"js-vote-button",radio:"js-radio",selectedRadio:"selected",closeButton:"js-close",showYesterdays:"js-show-yesterdays",showAll:"js-show-all",pollWide:"poll-wide"},constructor:function(id,conf){this.el=Ext.get(id);if(!this.el)return;this.el.on("click",this._clickHandler,this);this._spanRadios=this.el.select("."+this._classes.radio);this._checkedRadio=null;this._pollId=conf.pollId;this._questionId=conf.questionId;this._channelId=conf.channelId;this._pollResults=this.el.select("."+this._classes.pollResults).item(0);this._pollQuestion=this.el.select("."+this._classes.pollQuestion).item(0);this._pollResultsData=this._pollResults.select("."+this._classes.pollResultsData).item(0);this._showAll=this.el.select("."+this._classes.showAll).item(0);this._showYesterdays=this.el.select("."+this._classes.showYesterdays).item(0);this.addEvents(["onVote"])},_toggleRelatedRadio:function(el,checked){var radio=el.next().dom;if(checked){radio.checked="checked";this._checkedRadio=radio}else{radio.checked=""}},_resultsTemplate:function(){return new Ext.Template('<li class="cleared">','<span class="results-text">{answer}</span>','<span class="results-bar" style="width: {barLength}px;"></span>','<span class="results-score">{percentage}%</span>',"</li>").compile()}(),_endTemplate:new Ext.Template("</ul><span>{message}</span></div>").compile(),_callBack:function(m,showYesterdayLink){var startTemplate;if(this.el.hasClass("poll-wide")){startTemplate=new Ext.Template('<div class="poll-results-graph box cleared">','<a class="js-close close" href="#">','<span class="close-btn">&nbsp;</span>Close',"</a><p>POLL RESULTS</p><ul>").compile()}else{startTemplate=new Ext.Template("<p>{question}</p><ul>").compile()}if(m){var html=startTemplate.applyTemplate({question:m.poll.pollQuestions[0]["question"]});for(var i=0;i<m.poll.pollQuestions[0].answers.length;i++){html+=this._resultsTemplate.applyTemplate({answer:m.poll.pollQuestions[0].answers[i]["answer"],barLength:m.poll.pollQuestions[0].answers[i]["barLength"],percentage:m.poll.pollQuestions[0].answers[i]["percentage"]})}var tmp={};if(m.pollAnswered||showYesterdayLink){m.pollAnswered?tmp.message="Oops! You have already voted on this topic":tmp.message=""}else{tmp.message="Thank you for voting"}html+=this._endTemplate.applyTemplate({message:tmp.message});this._pollResultsData.dom.innerHTML=html;this._pollQuestion.addClass("hidden");this._pollResults.removeClass("hidden");this._switchFootLink(showYesterdayLink)}this.fireEvent("onVote")},_vote:function(){if(this._checkedRadio){AjaxPoll.vote(this._pollId,this._checkedRadio.value,this._questionId,this._callBack.createDelegate(this,[false],true))}},_close,_switchFootLink:function(showAll){if(!this._showAll){return}if(showAll){this._showAll.removeClass("hidden");this._showYesterdays.addClass("hidden")}else{this._showAll.addClass("hidden");this._showYesterdays.removeClass("hidden")}},_toggleTicked:function(spanRadio){this._spanRadios.each(function(el){if(el!==spanRadio){el.removeClass(this._classes.selectedRadio);this._toggleRelatedRadio(el,false)}},this);spanRadio.addClass(this._classes.selectedRadio);this._toggleRelatedRadio(spanRadio,true)},_clickHandler:function(e,t){var trg=Ext.get(e.getTarget());!trg.hasClass(this._classes.showAll)&&e.preventDefault();if(trg.hasClass(this._classes.radio)){this._toggleTicked(trg)}else if(trg.hasClass(this._classes.voteButton)||trg.parent("button")){if(this._spanRadios.elements.length>0){this._vote()}else{window.location.href="/columnists/polls/poll.html?pollId="+this._pollId}}else if(trg.hasClass(this._classes.closeButton)||trg.parent("."+this._classes.closeButton)){this._close()}else if(trg.hasClass(this._classes.showYesterdays)){AjaxPoll.getYesterdaysPoll(this._channelId,this._pollId,this._callBack.createDelegate(this,[true],true))}}});DM.Lightbox=function(){var UI;function getPageSize(){var docBody=document.body;var docEl=document.documentElement;var xScroll=Math.max(docBody.scrollWidth,docEl.offsetWidth);var yScroll=Math.max(docBody.body.scrollHeight,docEl.offsetHeight);return[xScroll,yScroll,docEl.clientWidth,docEl.clientHeight]}var constructor=function(){DM.LightboxObj=Ext.extend(Ext.util.Observable,{overlayDuration:.2,overlayOpacity:.85,resizeDuration:.7,constructor:function(){DM.LightboxObj.superclass.constructor.call(this);if(!this.initialized){this.addEvents(["b4open","open","afterOpen","close"]);this.initMarkup();this.initialized=true}},initMarkup:function(){this.shim=Ext.get("lightbox-shim");this.overlay=Ext.get("overlay");this.container=Ext.get("lightbox-container");this.containerElement=Ext.get("lightbox");this.defaultContainer=Ext.get("lightbox-default-container");this.fader=Ext.get("lightbox-fader");this.els=[this.shim,this.overlay,this.defaultContainer,this.container,this.containerElement,this.fader];var l=this.els.length;while(l>0){--l;this.els[l].setVisibilityMode(Ext.Element.DISPLAY)}},open:function(e){this.setViewSize();this.showBg();this.fireEvent("b4open");return this},showBg:function(){this.overlay.fadeIn({duration:this.overlayDuration,endOpacity:this.overlayOpacity,scope:this})},show:function(pos){var dims=this.position(pos);this.resetEls();this.defaultContainer.shift({height:dims.height,width:dims.width,duration:this.resizeDuration,delay:50});this.fader.shift({height:dims.height,width:dims.width,scope:this,callback:this.contentShow,duration:this.resizeDuration,delay:50})},position:function(pos){this.containerElement.show();var w=this.containerElement.getWidth();var h=this.containerElement.getHeight();var pageScroll=Ext.fly(document).getScroll();var arrayPageSize=getPageSize();if(pos){this.containerElement.setStyle({top:pos[1]+"px",left:pos[0]+"px"}).show()}else{var lightboxTop=pageScroll.top+(arrayPageSize[3]-35-h)/2;var lightboxLeft=(arrayPageSize[2]-w)/2;this.containerElement.setStyle({top:lightboxTop<0?"0px":lightboxTop+"px",left:lightboxLeft<0?"0px":lightboxLeft+"px"}).show()}return{width:w,height:h}},contentShow:function(){this.defaultContainer.setStyle({visibility:"visible",height:"auto"});this.fireEvent("afterOpen");this.fader.fadeOut({endOpacity:0,duration:this.resizeDuration,callback,scope:this})},resetEls:function(){this.defaultContainer.setStyle({visibility:"hidden",width:"0px",height:"0px"});this.fader.setStyle({display:"block",width:"0px",height:"0px",opacity:"1"});this.container.setStyle("left","0px")},close:function(){this.containerElement.hide();this.overlay.hide();this.shim.hide();this.fireEvent("close");this.defaultContainer.dom.innerHTML="";this.defaultContainer.setStyle({height:"auto",width:"auto"})},setViewSize:function(){var viewSize=getPageSize(),w=viewSize[0],h=Math.max(viewSize[1],viewSize[3]);this.overlay.setStyle({left:0,top:0,width:w+"px",height:h+"px"});this.shim.setStyle({left:0,top:0,width:w+"px",height:h+"px"}).show()}})};return{getInstance:function(){if(!UI){constructor();UI=new DM.LightboxObj}return UI}}}();(function($){var $document=$(document);var addCurrentUrltoLink;$document.on("click",".js-logout",function(evt){window.location=addCurrentUrltoLink($(this).attr("href"));return false});$document.on("click",".js-login",function(evt){evt.preventDefault();window.location.href=addCurrentUrltoLink($(this).attr("href"))});$(document).on("click",".not_you")})(jQuery);DM.Login={init:function(o){},open};(function(root,factory){if(typeof define==="function"&&define.amd){define(["jquery"])}else{return factory(root,$)}})(this,function(root,$){var debounce;var types="text password search number email datetime datetime-local date month week time tel url color range".split(" "),len=types.length;$.expr[":"]["textall"]=function(elem){var type=elem.getAttribute("type");for(var i=0;i<len;i++){if(type===types[i]){return true}}return false};var DEFAULT_ERROR_MESSAGE="The value is not correct";var ruleFactory={regExp:function(args){var re=args.re,error=args.error;return function(val,$form,cb){if(re.test(val)){cb()}else{cb(error||DEFAULT_ERROR_MESSAGE)}}},length:function(args){var min=args.min,max=args.max,error=args.error;if(typeof min==="undefined"){min=-Infinity}if(typeof max==="undefined"){max=Infinity}return function(val,$form,cb){var l=val.length;if(l>=min&&l<=max){cb()}else{cb(error||DEFAULT_ERROR_MESSAGE)}}},rest:function(args){var success=args.success||function(msg,status,cb){if(status==="success"){cb()}else{cb(msg||DEFAULT_ERROR_MESSAGE)}};var error=args.error|;var notCached=args.notCached;var cache={};return function(val,form,cb){var ajaxConfig=$.extend({url:args.url,type:"GET",data:args.getData&&args.getData(val)||val,success:function(msg,status){if(!notCached){cache[val]={msg:msg,status:status}}success(msg,status,cb)},error},args.ajaxConfig);if(!notCached&&typeof cache[val]!=="undefined"){success(cache[val].msg,cache[val].status,cb)}else{$.ajax(ajaxConfig)}}}};$.fn.regformvalidator=function(conf){var getFieldContainer=function($field,cls){var $fieldContainer=$($field).closest(cls);if(!$fieldContainer.length)$fieldContainer=$field;return $fieldContainer};return this.each(function(){var $this=$(this),opts=$.extend({fieldContainer:undefined,errorContainer:".err",succeedClass:"succeed",errorClass:"fail",hintClass:"hint",serverSideErrorClass:undefined,errorsMap:{},hintsMap:{},onSubmitFailed:undefined,rules:{},scroll:true,changeStatus:function($field,message,cls){var $fieldContainer=getFieldContainer($field,this.fieldContainer),message,type;$fieldContainer.removeClass(this.errorClass+" "+this.hintClass+" "+this.succeedClass);$fieldContainer.find(this.errorContainer).html(message);$fieldContainer.addClass(cls)}},conf);$.each(opts.rules,function(rulename,rule){if(!$.isFunction(rule)){opts.rules[rulename]=ruleFactory[rule.type](rule.opts)}});var getValue=function($field){if($field.is(":textall,textarea,select")){return $field.val()}if($field.is(":checkbox:checked,:radio:checked")){return $field.val()}return""};var validateError;var validateHint;var validate=function(hint){var $field=$(this),value=getValue($field),name=$field.attr("name"),map=opts.errorsMap[name]||opts.errorsMap["*"],hints=opts.hintsMap[name]||opts.hintsMap["*"],gettingValidation=new $.Deferred;if(!map&&!hints){return gettingValidation.resolve()}if(hint&&hints){map=hints.concat(map)}(function(value,map,opts,$field,$form,hint){(function validateNext(i){var ruleName=map[i],func;if(!ruleName){opts.changeStatus($field,"",opts.succeedClass);gettingValidation.resolve({$field:$field,error:"",hint:opts.succeedClass});return}func=opts.rules[ruleName];func(value,$form,function(error){if(error){opts.changeStatus($field,error,hint&&opts.hintClass||opts.errorClass);gettingValidation.resolve({$field:$field,error:error,hint:hint&&opts.hintClass||opts.errorClass})}else{validateNext(i+1)}})})(0)})(value,map,opts,$field,$this,hint);return gettingValidation.promise()};var validateAll=function($form){var gettingValidation=new $.Deferred,gettingErrors;gettingErrors=$form.find(":textall,textarea,:radio,:checkbox,select").map(function(){return validate.apply(this)}).get();$.when.apply($,gettingErrors).done(function(){var errors;errors=$.map(arguments,function(obj){if(obj&&obj.error.length){return obj}});gettingValidation.resolve(errors)});return gettingValidation.promise()};var submit=function(evt,validated){var $form=$(this);if(validated){return true}if($form.hasClass("submitting")){return false}$form.addClass("submitting");validateAll($form).done(function(errors){var $firstError,offset;if(errors.length){$form.removeClass("submitting");$firstError=getFieldContainer(errors[0].$field,opts.fieldContainer).removeClass("focus");offset=$firstError.offset().top-50;if(offset<0){offset=0}if(opts.scroll){$("html, body").animate({scrollTop:offset},1e3)}if(opts.onSubmitFailed&&typeof opts.onSubmitFailed==="function"){opts.onSubmitFailed(errors)}$firstError.focus()}else{$form.trigger("submit",true)}});return false};var $fields=$this.find(":input");if(opts.serverSideErrorClass){$fields.each(function(){var $field=$(this),name=$field.attr("name"),value=getValue($field),$fieldContainer=getFieldContainer($field,opts.fieldContainer),msg=$fieldContainer.find(opts.errorContainer).html(),ruleName;if(!$fieldContainer.length)$fieldContainer=$field;if(!$fieldContainer.is(opts.serverSideErrorClass)||!name){return}ruleName="serverSideValidation_"+name;opts.rules[ruleName]=function(val,$form,cb){if(val===value){cb(msg||" ")}else{cb()}};if(opts.errorsMap[name]){opts.errorsMap[name].push(ruleName)}else{opts.errorsMap[name]=[ruleName]}})}$fields.each(function(){var $input=$(this);if(!$input.is(".ignore-events")){if($input.is(":textall,textarea")){$input.on("blur",validateError);$input.on("focus",validateHint);$input.on("keydown",debounce(validateError,1e3));$input.on("validate-error",validateError);$input.on("validate-hint",validateHint)}else if($input.is(":radio,:checkbox")){$input.on("click",validateError);$input.on("validate-error",validateError);$input.on("validate-hint",validateHint)}else if($input.is("select")){$input.on("change focus",validateError);$input.on("validate-error",validateError);$input.on("validate-hint",validateHint)}if($input.is(":textall,textarea,:radio,:checkbox,select")){$input.focus(function(){getFieldContainer($fields,opts.fieldContainer).removeClass("focus");getFieldContainer(this,opts.fieldContainer).addClass("focus")});$input.blur(function(){getFieldContainer(this,opts.fieldContainer).removeClass("focus")})}}});$this.on("submit",submit)})};return $});DM.MiniMoment=function MiniMoment(initDate){var weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MINUTE=60*1e3,HOUR=60*MINUTE;var date=initDate||new Date;var offset=-date.getTimezoneOffset();init();function init(){if(date.getMinutes()){date=new Date(+date+HOUR)}var moment={minutes:function minutes(){return date.getMinutes()},add:function add(howMany,what){switch(what){case"hours":date=new Date(+date+howMany*HOUR);break;case"minutes":date=new Date(+date+howMany*MINUTE);break}return this},hours,toString:function toString(){return date},valueOf:function valueOf(){return date},timeFormat:function timeFormat(){var hours=date.getHours();return(hours<=12?hours==0?12:hours:hours%12)+(hours<12?"AM":"PM")},dateFormat:function dateFormat(){return weekdays[date.getDay()]+", "+months[date.getMonth()]+" "+ordinalSuffix(date.getDate())+" "+date.getUTCFullYear()},dateFormatShort:function dateFormatShort(){return[weekdays[date.getDay()].substring(0,3),date.getDate(),months[date.getMonth()].substring(0,3),date.getUTCFullYear().toString().substring(2,4)].join(" ")},addOffset,setDate:function setDate(newDate){date=newDate;return this},clone:function(){return DM.MiniMoment(new Date(+date))},tod:function tod(hours){var m=DM.MiniMoment(new Date(+date+(hours||0)*HOUR));var mod3=m.hours()%3;return(!mod3?m:m.add(3-mod3,"hours")).timeFormat()}};return moment};DM.TravelSearch=function(){var UI;var constructor=function(){var el,depDay,depMon,depYear,cal;var init=function(o){Ext.fly("js-submit-button").on("click",validateForm,this);el=Ext.get("js-calendar-container");if(el){depDay=Ext.get("depdate-day");depMon=Ext.get("depdate-month");depYear=Ext.get("depdate-year");var dateRange=new Date;dateRange.setTime(dateRange.getTime()+1e3*60*60*24*3);cal=new Ext.ux.DatePicker("js-calendar-container",{handler:mySelectHandler,value:dateRange,showToday:false});Ext.fly("js-dateFromLink").on("click",cal.show,cal);var c=Ext.get("js-children-1");c.on("change",showChildren,this);c.on("keyup",showChildren,this);setDepartureDate();Ext.get("js-to").on("focus",function(e,t){t.value=""},this,{single:true})}};var mySelectHandler=function(c,d){cal.el.hide();depDay.dom.value=d.getDate();depMon.dom.value=d.getMonth()+1;depYear.dom.value=d.getFullYear()};var validateForm=function(e){var blockSub1=true;var blockSub2=true;var errDep=Ext.get("js-error-departure"),inputDep=Ext.get("js-from").dom,errDest=Ext.get("js-error-destination"),inputDest=Ext.get("js-to").dom;if(inputDep.value=="UNDEFINED"){errDep.dom.innerHTML="Please select your departure airport";errDep.show()}else{errDep.hide();blockSub1=false}if(inputDest.value.length<1||inputDest.value=="Please type your destination"){errDest.dom.innerHTML="Please type in your destination or click 'More search options' to see the list of destinations available";errDest.show()}else{errDest.hide();blockSub2=false}(blockSub1||blockSub2)&&e.preventDefault()};var setDepartureDate=function(){var dateRange=new Date;dateRange.setTime(dateRange.getTime()+1e3*60*60*24*3);depDay.dom.value=dateRange.getDate();depMon.dom.value=dateRange.getMonth()+1;depYear.dom.value=dateRange.getFullYear()};var showChildren=function(numChildren){var elem,c=Ext.get("js-childages");if(numChildren>0){c.show();var l=5;while(l>0){--l;elem=Ext.get("js-childage-"+l);if(l>numChildren)elem.hide();else elem.show()}}else{c.hide()}};return{init:init}};return{getInstance}}();DM.TimSearch=function(id,conf){Ext.apply(this,conf);this.init({id:id})};DM.TimSearch.prototype={_el:null,init:function(o){this._el=Ext.get(o.id);if(!this._el){return}this._el.on("submit",this._onSubmit,this)},_onSubmit:function(e){var checkedEl=this._el.select("input[name=searchWhere]:checked").item(0),redirectUrl;if(checkedEl&&checkedEl.dom.value==="company"&&checkedEl.dom.checked){e.preventDefault();redirectUrl=this.link+this._el.select("input[name=searchPhrase]").item(0).dom.value;this._el.dom.target&&this._el.dom.target==="_top"?window.parent.location=redirectUrl:window.location=redirectUrl}}};DM.SCExternalLinks=function(id,params){$(document.getElementById(id)).find("a.js-tl").on("click",function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_EXTERNAL_LINK_CLICKED,{pageMetadata:DM.getPageMetadata(),target:this,value:params.value})})};(function(Ext){function onDomReady(){function updateOnHover(event,target,options){var item=Ext.get(this).child("span");event.type=="mouseover"?updateOnMouseover(item,options.onPos):updateOnMouseout(item,-options.styleRight)}function updatePosition(item,position){Ext.fly(item).animate({right:{to:position}},.45)}function updateOnMouseover(item,position){updatePosition(item,position)function addHoverHandler(item){var linkVideo=item.child("span");if(linkVideo!==null){this.styleRight=/(\d+)/.exec(linkVideo.getStyle("right"))[0];item.on({mouseover:{fn:updateOnHover,onPos:0,styleRight:this.styleRight},mouseout:{fn:updateOnHover,onPos:0,styleRight:this.styleRight}})}}Ext.select(".videoplayer-preview a").each(function(item){addHoverHandler(item)})}Ext.onReady(onDomReady,this,{single:true})})(Ext);(function(DM,Ext){DM.NextStory={init:function(o){var el=Ext.get(o.id);if(!el)return;this.el=el;Ext.EventManager.on(window,"scroll",this.toggle,this)},toggle:function(){var w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.showAt=this.showAt||Ext.get(Ext.query("div[class=shareArticles]")[0]);this.container=this.container||Ext.get("content");if(this.showAt){if(Ext.getBody().getScroll().top+h>=this.showAt.getY()&&h>=this.el.getHeight()&&this.container.getX()>=this.el.getWidth()+15&&w>=this.el.getHeight()&&Ext.getBody().getStyle("background-image")=="none"){this.el.addClass("show")}else{this.el.removeClass("show")}}}}})(DM,Ext);(function(){DM.later(["DOM_READY"],function(){var $bydaywrapper=document.querySelector(".articles_by_day_wrapper");if(!$bydaywrapper){return}var allChecks=Array.from($bydaywrapper.querySelectorAll(".checkbox input"));allChecks.forEach(function(checkboxEl){checkboxEl.addEventListener("change",function(){if(checkboxEl.id==="all"){allChecks.forEach)}else if(!checkboxEl.checked){$bydaywrapper.querySelector("#all").checked=false}var showingClasses=allChecks.filter).map(function(checkEl){return checkEl.value});Array.from($bydaywrapper.querySelectorAll("li")).forEach(function(listItem){if(showingClasses.some)){listItem.style.display=""}else{listItem.style.display="none"}})})})})})();([,function(e,t,o){"use strict";var n=o(12),i=o.n(n);DM.RC.FB=function(e){function t(){var t=e(".fbShareWhatsThis"),m=e(".fbShareConfirmBox");if(t.appendTo(e("body")).ezmodal().on("ez-modal-after-close",function(){"true"===DM.UD.publishPermission&&DM.UD.publishPermission||o(!1)}),DM.UD&&DM.UD.displayName){var c=document.getElementById("readerCommentsUsername");c&&(c.innerHTML="("+DM.UD.displayName+")",c.classList.add("displayUsername"))}m.appendTo(e("body")).ezmodal(),e(".ez-modal-close, .js-close").click(function(){m.ezmodal("close"),"true"===DM.UD.publishPermission&&DM.UD.publishPermission||o(!1)}),e(".whatsThis").click(function(){t.ezmodal("open")}),e(p).click(function(){r(e(this)[0]),l(p.checked)}),p.checked=i.a.get("publishPermissionCheckbox");var u=DM.isLoggedIn&&!DM.UD.fbUserName?"addAccountAndLogin":"noFbMergeNeeded";e(".fbConfirm").click(function(){if(p.checked&&("true"!==DM.UD.publishPermission||!DM.UD.publishPermission)){DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_COMMENTS,{name:"fbConfirm/click"}),s();a("/registration/p/signin/social.html",{targetUrl:n(window.location.href.replace(/\#[^\?&]*/,"")+"#newcomment","requestPublishPermission","true"),"social-provider":"facebook","social-permissions":"publish_actions,email",param:u})}})}function o(e){p&&(p.checked=e),l("false")function a(e,t,o){o=o||"post";var n=document.createElement("form");n._submit_function_=n.submit,n.setAttribute("method",o),n.setAttribute("action",e);for(var i in t){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",i),a.setAttribute("value",t[i]),n.appendChild(a)}document.body.appendChild(n),n._submit_function_()}function s(){var e=d.get("message"),t=e.dom.value;i.a.set("commentMessageToSaveStorage",t)}function r(t){!t.checked||"true"===DM.UD.publishPermission&&DM.UD.publishPermission||e(".fbShareConfirmBox").ezmodal("open")}function m(){var e=d.get("message"),t=i.a.get("commentMessageToSaveStorage");t&&e&&(e.dom.value=t,i.a.set("commentMessageToSaveStorage",""))}function l(e){String(e)!==i.a.get("publishPermissionCheckbox")&&i.a.set("publishPermissionCheckbox",String(e))}function c(){p.checked="true"===i.a.get("publishPermissionCheckbox")&&"true"===DM.UD.publishPermission}var u={},d=window.Ext,p=void 0;return u.initialize=function(){"#_=_"===window.location.hash&&(window.location.hash="comments"),(p=document.getElementById("handlePostToFacebookInput"))&&(m(),t(),c())},u.isHandlePostToFacebookSelected,u}(window.jQuery)},function(e,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};DM.Pagination=function(){function e(){function e(e){e.stopEvent();var t=e.getTarget("A",5);t&&(a.page=parseInt(t.getAttribute("rel")),a.offset=parseInt(a.page-1)*a.maxResults,i(a),n(DM.pageEvents.COMMENTS_PAGINATION_CLICK,{label:a.page}))}var t=void 0,i=void 0,a={maxResults:100,offset:0,page:1,showPageNumber:!0,showPagingOptions:!1,greyStyle:!1,numberOfPageButtonsToShow:10};return{init:function(o,n){i=o,Ext.apply(a,n),t=Ext.query("div.pagination-container","content"),Ext.each(t)},doPagination:function(e){if("object"===(void 0===e?"undefined":o(e))){for(var n=parseInt(e.max),i=parseInt(e.offset),s=parseInt(e.total),r=a.numberOfPageButtonsToShow,m=Math.ceil(s/n),l=parseInt(i/n),c=1+l,u=[],d=[],p=1;p<r&&(c>1&&c-p>0&&u.push(c-p),!(u.length+d.length>=r-1))&&(c+p<=m&&d.push(c+p),!(u.length+d.length>=r-1));p++);if(m>1&&t.length>0){var g="",f=["","","","",""],h="link-ccox",v="<span>Page</span>"
;a.showPageNumber&&(g+='<div class="sch-pagesummary">Page '+c+" of "+m+"</div>"),c>1&&(f[0]='<a href="#" rel="'+(c-1)+'">Previous</a>');for(var p=u.length-1;p>=0;p--)f[1]+='<a class="page-number bdrgr3" href="#" rel="'+u[p]+'">'+u[p]+"</a>";f[2]='<span class="page-number bdrgr3 bogr2">'+c+"</span>";for(var p=0;p<d.length;p++)f[3]+='<a class="page-number bdrgr3" href="#" rel="'+d[p]+'">'+d[p]+"</a>";c<m&&(f[4]='<a href="#" rel="'+(c+1)+'">Next</a>'),a.greyStyle&&(h="link-gr5ox",v=""),g+='<div class="pagination bdrcc '+h+' linkro-box"><div class="float-r">'+v+f.join("")+"</div></div>";for(var p=0,C=t.length;p<C;p++)t[p].innerHTML=g,Ext.fly(t[p]).setStyle("display","block")}else this.hide()}},hide:function(){for(var e=0,o=t.length;e<o;e++)Ext.fly(t[e]).setStyle("display","none")}}}var t=void 0,n=function(e,t){try{DM.molFeTracking.pageEvents.publish(e,t)}catch(e){console.error("Error tracking comments",e)}};return{getInstance:function(){return t||(t=e()),t}}}()},function(e,t){DM.RCTabs=Ext.extend(Ext.util.Observable,{linkHk:".js-links",activeHk:"js-active",tabsQuery:".dm-tab",tabOffClass:null,tabOnClass:null,constructor:function(e,t){DM.RCTabs.superclass.constructor.call(this),t&&Ext.apply(this,t),this.el=Ext.get(e),Ext.fly(this.el.query(this.linkHk)[0]).on("click",this._clickHandler,this,{preventDefault:!0}),this._tabs=this.el.query(this.tabsQuery)},_clickHandler,_selectTab,reset:function(){for(var e=void 0,t=this._tabs.length;t>0;)--t,e=Ext.get(this._tabs[t]),e.addClass(this.tabOffClass).removeClass(this.tabOnClass).removeClass(this.activeHk)},tab:function(e){Ext.fly(e).removeClass(this.tabOffClass).addClass(this.tabOnClass).addClass(this.activeHk)}})},function(module,exports){DM.ReaderComments=function(){var UI=void 0,RCTemplates=DM.RC.Templates,RCUtils=DM.RC.Utils,trackEvent=function(e,t){try{DM.molFeTracking.pageEvents.publish(e,t)}catch(e){console.error("Error tracking comments",e)}},constructor=function constructor(){function inlineSubmissionMessage(e,t,o){var n=t.up(".comment-replies")||t,i={};switch(clearInlineSubmissionMessage(),e){case"success":o=moderated?"Thanks for sharing your comment. Comments on this article are moderated. Please be patient for your comment to appear.":"Thanks for sharing your comment!";break;case"success-fb-share":"true"===DM.UD.publishPermission&&"null"!==DM.UD.fbUserName?(e="success",i.fbMessage="Your comment will also be posted to the Facebook account for "+DM.UD.fbUserName,i.completeMessage='<div class="submission-feedback-fbmessage"><p>'+i.fbMessage+"</p></div>",o=moderated?"Thanks for sharing your comment. Comments on this article are moderated. Please be patient for your comment to appear.":"Thanks for sharing your comment. It will appear shortly on MailOnline."):"true"!==DM.UD.publishPermission&&(e="error",o="Something has gone wrong with your Facebook user and your Daily Mail Username, sorry! You have posted as your normal Daily Mail User.");break;case"pending":o="Sending...";break;case"invalid":o||(o="Invalid comment");break;case"error":o="Apologies - something went wrong. Please try later."}o&&Ext.DomHelper.insertAfter(n,RCTemplates.inlineSubmissionResponse.apply({message:o,type:e,fbMessage:i.completeMessage}))}function clearInlineSubmissionMessage(){var e=Ext.get("reader-comments"),t=Ext.get("reader-comments-in-overlay");e?Ext.each(e.query(".submission-message"),function(e){Ext.fly(e).remove()}):t&&Ext.each(t.query(".submission-message"))}function calcVoteRatings(e){return{up:(e.voteCount+e.voteRating)/2,down:(e.voteCount-e.voteRating)/2}}function rejectedComment(){var e=Ext.fly("js-comments").getWidth(),t=e>=700?"":e<500?'style="margin-top: 2px !important; font-size: 12px !important;"':'style="margin-top: 4px !important;"',o='<div id="comment-not-found" class="bogr2 bogr3 cleared comment-post"><div class="rejected-left"></div><div class="rejected-body"><p class="rejected-body-text" '+t+'>Sorry. The content of this comment did not conform to our <a href="/home/house_rules.html">house rules</a>, and it has now been removed by our moderators.</p></div><div class="rejected-right"></div></div>';Ext.DomHelper.insertFirst("js-comments",o),Ext.fly("comment-not-found").child(".rejected-right").on({click})}function getComment(e){if(e)return Ext.get(e).up(".reply")||Ext.get(e).up(".comment")}function getCommentData(e){var t=getComment(e);if(t){var o=t.hasClass("reply")?".reply-text":".comment-text",n=t.id.substring(8),i=DMS.domain+"/reader-comments/p/comment/link/"+n,a=t.child(o).dom.innerHTML,s=t.child(".js-usr");return{commentId:n,commentLink:i,commentBody:a,commenterName:s?s.dom.innerHTML:Ext.query(".commenter-name")[0].innerHTML.replace("'s Comments",""),commentUrl:i,abuseLink:"/home/reportAbuseInComment.html?articleId="+t.assetId+"&commentId="+t.id}}}function onCommentMouseOver(e,t,o){var n=Ext.get(e.getTarget(".comment"));n&&(n.addClass("hovered"),DMS.RC.updateHoverElements())}function onCommentMouseLeave(e,t,o){var n=Ext.get(e.getTarget(".comment"));n&&(disableCommentFeatures(n),n.removeClass("hovered"),DMS.RC.updateHoverElements())}function onReplyMouseOver(e,t,o){var n=Ext.get(e.getTarget(".reply"));n&&(disableCommentFeatures(Ext.get(Ext.query(".comment.hovered",Ext.getDom("js-comment"))[0])),n.addClass("hovered"),DMS.RC.updateHoverElements())}function onReplyMouseLeave(e,t,o){var n=Ext.get(e.getTarget(".reply"));n&&(disableCommentFeatures(n),n.removeClass("hovered"),DMS.RC.updateHoverElements())}function disableCommentFeatures(e){if(e){var t=Ext.get(e),o=t.child(".reportAbuseLink");o&&o.hide()}}function initComments(){Ext.each(Ext.query(".comment",Ext.getDom("js-comments")),function(e){initComment(Ext.get(e))}),document.onkeydown=function(e){27==(e?e.which||e.keyCode:void 0)&&DM.Lightbox.getInstance()&&closeCopyCommentLinkLightbox()},Ext.getBody().on("click",closeCopyCommentLinkLightbox)}function initFurniture(){var e=Ext.get("message"),t=Ext.get("addYourCommentButton");if(e)t.on("click");else{var o=Ext.get("addYourCommentButton");o&&o.hide()}function initCommentStyle(e){if(!e.hasClass("reply")){var t=0==e.query(".reply").length,o=e.query("textarea").length>0;toggleCssClass(e,"no-replies",t),toggleCssClass(e,"contains-reply-textarea",o)}}function initComment(e){if(e){initCommentStyle(e);var t=e.child(".shareComment");t.on({click:DMS.RC.shareComment}),t.down(".copyCommentLink").on({click:function(e,t){copyCommentLinkClicked(e,t,!1)}}),t.down(".shareExpansionAnchor").on({click}),e.hasClass("reply")?e.hover(onReplyMouseOver,onReplyMouseLeave):(e.hover(onCommentMouseOver,onCommentMouseLeave),Ext.each(Ext.query(".reply",Ext.getDom(e)),function(e){initComment(Ext.get(e))}));var o=e.dom.querySelector(".reportAbuseLink");o&&o.addEventListener("click")}}function isCopyLinkLightbox(e){var t=Ext.get(e);return t&&("copyLinkLightboxArrow"==t.id||"copyLinkLightbox"==t.id||null!=Ext.get(e).up("#copyLinkLightbox"))}function closeCopyCommentLinkLightbox(e,t){if(!isCopyLinkLightbox(t)){var o=Ext.get("copyLinkLightbox");o&&o.hide();var n=Ext.get("copyLinkLightboxArrow");n&&n.hide()}}function copyCommentLinkClicked(e,t,o){var n=getCommentData(t);if(n){var i=Ext.get(t),a=Ext.get("copyLinkLightbox"),s=Ext.get("copyLinkLightboxArrow"),r=void 0,m=void 0,l=void 0;Ext.get("copyLinkLightbox").show(),Ext.get("copyLinkLightboxArrow").show(),o?(a.dom.innerHTML='<div class="socialButtons">'+DMS.RC.SOCIAL_ELEMENTS_HTML+"</div>"+RCTemplates.copyCommentLinkTemplate.apply({commentLink:n.commentUrl}),a.removeAllListeners(),a.on({click})):a.dom.innerHTML=RCTemplates.copyCommentLinkTemplate.apply({commentLink:n.commentUrl}),r=i.getLeft()-a.getWidth()/2+i.getWidth()/2,m=i.getTop()+i.getHeight(),l=i.getLeft(),s.setLocation(l,m),a.setLocation(r,m+10),Ext.get("copyLinkInput").focus(),e.stopPropagation()}}function replySubmitHandler(e){var t=Ext.get(e),o=Ext.get("formAssetId"),n=t.parent().select("a").elements[0].name.split("reply-form-")[1],i=Ext.get(t.parent().select(".textarea-input").elements[0]);t.on("click",function(){var e=i.dom.value;if(trackEvent(DM.pageEvents.COMMENTS_REPLY_SUBMIT),validateMessage(i.dom)){RCUtils.disableButton(i.dom),inlineSubmissionMessage("pending",i.parent());var t={assetId:o.dom.value,message:e,replyTo:n,source:"desktop"};Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/postCommentInline",params:t,success:function(a){var s=JSON.parse(a.responseText);if("success"===s.status)inlineSubmissionMessage("success",i.parent()),i.up(".reply-form").remove(),trackEvent(DM.pageEvents.COMMENTS_SUBMIT_SUCCESS);else if("error"===s.status&&"login"===s.reason){RCUtils.enableButton(i.dom);var r=new Date;r.setHours(r.getHours()+1),commentAssetToSubmitCookie=o.dom.value,commentMessageToSubmitCookie=e,commentReplyToSubmitCookie=n,clearInlineSubmissionMessage(),DM.setCookie("commentAssetToSubmitCookie",commentAssetToSubmitCookie,r,"/"),DM.setCookie("commentMessageToSubmitCookie",commentMessageToSubmitCookie,r,"/"),DM.setCookie("commentReplyToSubmitCookie",commentReplyToSubmitCookie,r,"/"),trackEvent(DM.pageEvents.COMMENTS_LOGIN_REDIRECT),window.location.replace("/registration/login.html?usr=1&reg_source=comment&targetUrl="+encodeURIComponent(window.location.href))}else commentSubmissionError(t,s,i)},failure:function(e,o){commentSubmissionError(t,e,i)}})}})}function validateMessage(e){var t=function(){return"message"!=e.id?Ext.get(e).parent():RCUtils.getSubmitButton(e).up(".post-comment-form")}(),o=e.value&&e.value.length>COMMENT_MAX_LENGTH,n=""==e.value||e.value==e.title||o;return o?inlineSubmissionMessage("invalid",t,"Sorry! Your comment is "+(e.value.length-COMMENT_MAX_LENGTH)+" characters too long."):clearInlineSubmissionMessage(t),n?RCUtils.disableButton(e):RCUtils.enableButton(e),!n}function initReplyInput(e){var t=e.child(".textarea-input");validateMessage(t.dom),t.on("blur",function(e,t){""==t.value&&Ext.get(t).up(".textarea-holder").remove()}),t.on("focus"),t.on("keyup")}function initCommentInput(e){var t=e.child(".textarea-input");validateMessage(t.dom),t.on("blur"),t.on("focus",function(e,t){t.value==t.title&&(t.value=""),validateMessage(t),clearInlineSubmissionMessage()}),t.on("keyup")}function setFocus(e,t){var o=window.DM&&window.DM.molFeDomHelpers&&window.DM.molFeDomHelpers.scrollUtils;o&&o.scrollTo(0,o.getScrollTop(e)-100),setTimeout(function(){t.focus()},50)}function initCommentForm(){var e=Ext.get("readerCommentsCommand");e&&(initCommentInput(e.down(".comment-form")),e.child(".btn-clear").on("click",function(e,t){var o=Ext.get(t).parent().prev(".textarea-holder").down(".textarea-input");o.dom.value="",validateMessage(o),o.focus(),trackEvent(DM.pageEvents.COMMENTS_CLEAR)}))}function openReplyInput(e,t){if(e.child(".textarea-input")){var o=Ext.get(e.child(".anchor-reply-comment").dom.getAttribute("rel"));t&&setFocus(o,o.next(".textarea-input"))}else{var n=e.child(".rating").dom.getAttribute("rel"),i=Ext.DomHelper.append(e.child(".comment-replies"),RCTemplates.replyFormTemplate.apply({id:n}),!0);initReplyInput(i),replySubmitHandler(i.child(".js-reply-submit")),t&&i.child(".textarea-input").focus(),initCommentStyle(Ext.get("comment-"+n))}}function initReplyForms(){var e=Ext.getDom("js-comments");Ext.each(Ext.query(".reply-form",e)),Ext.each(Ext.query(".js-reply-submit",e)),Ext.each(Ext.query(".js-newcomment",e),function(e){Ext.get(e).on("click",function(){clearInlineSubmissionMessage(),setFocus(Ext.get("newcomment"),Ext.get("message")),trackEvent(DM.pageEvents.COMMENTS_NEW_COMMENT_CLICK)})}),Ext.each(Ext.query(".js-reply.anchor-reply-comment",e),function(e){var t=Ext.get(e);t.on("click",function(){openReplyInput(t.up(".comment"),!0),trackEvent(DM.pageEvents.COMMENTS_REPLY_CLICK)})}),Ext.each(Ext.query(".js-reply.anchor-reply-reply",e),function(e){Ext.get(e).on("click",function(){var t=Ext.get(e.getAttribute("rel"));setFocus(t,t.next(".textarea-input"))})})}function initReaderComments(e){var t=e.params||{},o=null,n=null,i=void 0;Ext.apply(Ext.Fx,{fadeInS:function(e){e=e||{};var t=this,o=t.dom,n=e.endOpacity||1;return Ext.isIE?(t.dom.style.opacity=1,t.dom.style.filter="alpha(opacity=100)"):t.queueFx(e,function(){Ext.fly(o).setOpacity(e.startOpacity||0),Ext.fly(o).fixDisplay(),o.style.visibility="visible",arguments.callee.anim=Ext.fly(o).fxanim({opacity:{to:n}},e,null,.5,"easeOut")}),t}}),Ext.Element.addMethods(Ext.Fx),DMS.RC=DMS.RC||{},totalComments=t.total||0,mode=t.mode||"article",moderated=t.moderated,ratingsCookie=DM.getCookie("commentRatings"),abuseCookie=DM.getCookie("reportAbuse"),commentAssetToSubmitCookie=DM.getCookie("commentAssetToSubmitCookie"),commentMessageToSubmitCookie=DM.getCookie("commentMessageToSubmitCookie"),commentReplyToSubmitCookie=DM.getCookie("commentReplyToSubmitCookie"),allowNewComments=t.allowNewComments;var a=Ext.get(e.id);if(a&&(rc=a.dom),rc){"article"===mode?(o=new RegExp("article-id-([0-9]+)").exec(rc.className),articleId=o?o[1]:null):"user"===mode&&(n=new RegExp("user-id-([0-9]+)").exec(rc.className),userId=n?n[1]:null),defaultPaginationConfig={maxResults:Ext.urlDecode(window.location.search.substring(1)).max||100,page:1,offset:Ext.urlDecode(window.location.search.substring(1)).offset||0,reply:Ext.urlDecode(window.location.search.substring(1)).reply||null,articleId:articleId,userId:userId,greyStyle:!0,mode:mode,numberOfPageButtonsToShow:10},"user"===mode&&(period=t.period||"week",defaultPaginationConfig.period=period,defaultPaginationConfig.numberOfPageButtonsToShow=5),DM.Pagination.getInstance().init(loadComments,defaultPaginationConfig);var s=Ext.get("reader-comments"),r=Ext.get("reader-comments-in-overlay");s?s.on("click",readerCommentsHandler,this):r&&r.on("click",readerCommentsHandler,this),checkCookies();if(Ext.get("rc-tabs")&&(tabs=new DM.RCTabs("reader-comments",{tabOnClass:["ow-igr5-bx wogr5","link-wox","dm-tab-on"],tabOffClass:["ow-igr2-bx","xogr2","link-gr5ox"],tabQuery:"li",_clickHandler:tabHandler})),buttonLabel=Ext.select(".view-more-container"),Ext.select(".pagination-container-bottom, .view-more-container-bottom a").on("click",function(){"#comments"!==window.location.hash?window.location.hash="#comments":window.location.hash="#reader-comments"},{delegate:"a"}),"article"===mode&&(i=window.location.hash.substring(1).match(/(comment\-\d+)/),i=i?i[1]:null)){viewAll=!0,setButtonLabel("View "+tabNames[tabIndex]+" "+maxComments),DM.Pagination.getInstance().doPagination({max:100,offset:t.offset||0,total:totalComments});var m=Ext.fly(i);m&&m.replaceClass("bogr1","comment-selected")}setFormValuesFromCookie(),"article"===mode&&initReplyForms(),trackEvent(DM.pageEvents.COMMENTS_IMPRESSION)}window.location.hash.match(/#comment-not-found/)&&rejectedComment(),Ext.get("report-abuse-comfirm")&&updateAbuseCookie(Ext.get("report-abuse-comfirm").dom.className.split("|")[0]),initCommentForm(),initComments(),initFurniture(),window.RCdefferedTab?tabHandler(window.RCdefferedTab):(viewAll=!Ext.urlDecode(window.location.search.substring(1)).offset||!Ext.urlDecode(window.location.search.substring(1)).max,toggleViewAll(defaultPaginationConfig))}DM.RC.initialize(),DM.RC.FB.initialize();var COMMENT_MAX_LENGTH=1e3,MAX_COMMENTS=10,SHOW_MORE_COMMENT_HEIGHT=650,MAX_COOKIE_RATINGS=50,REPLIES_INITIAL_NUMBER=2,REPLIES_PAGINATION_SIZE=25,defaultPaginationConfig=void 0,maxComments=MAX_COMMENTS,totalComments=0,offset=0,viewAll=!1,allowNewComments=void 0,rc=void 0,tabs=void 0,tabCommands=["newest","oldest","bestRated","worstRated"],tabNames=["newest","oldest","best","worst"],tabIndex=0,buttonLabel=void 0,ratingsCookie=void 0,abuseCookie=void 0,commentAssetToSubmitCookie=void 0,commentMessageToSubmitCookie=void 0,commentReplyToSubmitCookie=void 0,articleId=void 0,userId=void 0,period=void 0,mode=void 0,moderated=void 0,hasSubmittedCommentFromLogin=void 0,timeCommentsVisible=void 0,trackedLoadTime=void 0,getShoutChannels=function(){try{return window.DM.SHOUT&&window.DM.SHOUT.shoutChannels&&JSON.parse(window.DM.SHOUT.shoutChannels)}catch(e){return logger.error("Unable to parse rc shout config: ",e),!1}},loadComments=function(e){var t="?max="+e.maxResults,o=tabCommands[tabIndex];if(e.offset&&(t+="&offset="+e.offset),e.period&&(t+="&period="+e.period),"newest"==o?t+="&order=desc":"oldest"==o?t+="&order=asc":"bestRated"==o?t+="&sort=voteRating&order=desc":"worstRated"==o&&(t+="&sort=voteRating&order=asc"),setButtonLabel("Loading..."),DM.RC.spinner("show"),"article"===e.mode){var n=getShoutChannels(),i=n?n.disabledChannels:[],a=-1==i.indexOf(window.PageCriteria.subchannel);window.DM.SHOUT&&!window.DM.SHOUT.isOldArticle&&!n.disabledMolShout&&a&&(t+="&rcCache=shout"),Ext.Ajax.request({url:"/reader-comments/p/asset/readcomments/"+articleId+t,callback:loadCommentsCallback,method:"get"})}else"user"===e.mode&&Ext.Ajax.request({url:"/reader-comments/p/user/readcomments/"+userId+t,callback:loadCommentsCallback,method:"get"})},createCommentHtml=function e(t,o){function n(e){for(var t="",o=void 0,n=0;n<e.length;n++)o=n>=e.length-1||n>=5,t+=e[n]+(o?"":"/");return t.toString()}var i=calcVoteRatings(t),a="",s=o?"reply":"comment";return"reply"!=s&&t.replies.comments.length>0&&(t.replies.totalCount>REPLIES_INITIAL_NUMBER&&(a+='<div class="more-replies-container"><p><span class="number-of-replies">'+REPLIES_INITIAL_NUMBER+" of "+t.replies.totalCount+' replies</span><a class="more-replies" rel="'+t.id+'">'+(t.replies.totalCount>REPLIES_INITIAL_NUMBER+REPLIES_PAGINATION_SIZE?"See next "+REPLIES_PAGINATION_SIZE+" replies":"See all replies")+'<span class="rc-down-arrow"></span></a></p></div>'),Ext.each(t.replies.comments,function(o){a+=e(formatUserInfo(o),t.id)})),RCTemplates.articleCommentTemplate.apply({commentId:t.id,type:s,body:t.message,votesUpValue:i.up,votesDownValue:i.down,ratingClass:getRatingClass(t.id),avatarSide:o?35:55,userProfileUrl:getUserProfileUrl(t),userInfo:'<a href="'+getUserProfileUrl(t)+'" class="js-usr">'+t.userAlias+"</a>, "+t.userLocation+t.formattedDateAndTime,repliesHtml:a,shareHTML:DMS.RC.SHARE_ELEMENTS_HTML,voteButtonText:""==getRatingClass(t.id)?"Click to rate":"Rated",newCommentButtonHTML:allowNewComments?o?"":RCTemplates.newCommentButtonTemplate.apply():"",replyButtonHTML:allowNewComments&&"reply"!=s?RCTemplates.replyButtonTemplate.apply({type:s,id:o||t.id}):"",abuseLink:"/home/reportAbuseInComment.html?articleId="+t.assetId+"&commentId="+t.id,userProfileImageUrl(t),formattedCurrentDate:formatCurrentDate()})},getUserProfileUrl,formatCurrentDate=function(){var e=new Date;return e.getFullYear().toString()+(e.getMonth()+1).toString()+e.getDate().toString()},createUserHtml=function(e){var t=calcVoteRatings(e),o=e.openWebId;return(o?RCTemplates.userOpenWebCommentTemplate:RCTemplates.userCommentTemplate).apply({articleId:e.assetId,articleTitle:e.assetHeadline,assetUrl:e.assetUrl,openWebId:o,commentId:e.id,body:e.message,ratingClass:getRatingClass(e.id),votesUpValue:t.up,votesDownValue:t.down,abuseLink:"/home/reportAbuseInComment.html?articleId="+e.assetId+"&commentId="+e.id})},formatUserInfo=function(e){return e.userAliasUrl="string"==typeof e.userAlias?e.userAlias.replace(/ /g,"-")+"/":"",e.userLocation="string"==typeof e.userLocation&&"default"!==e.userLocation?e.userLocation+", ":"",e},showMoreExpanded=!1,showMoreButton=null,showMoreButtonWrapper=null,handleShowMoreToggle=function(){var e=document.getElementById("reader-comments")||document.getElementById("reader-comments-in-overlay");showMoreExpanded?(e.style.maxHeight=SHOW_MORE_COMMENT_HEIGHT+"px",showMoreButton.innerHTML="Show More",e.dataset.showMore="collapsed",showMoreExpanded=!1,e.scrollIntoView(),trackEvent(DM.pageEvents.COMMENTS_SHOW_MORE_CLICK,{label:"collapse"})):(e.style.maxHeight="",showMoreButton.innerHTML="Show Less",e.dataset.showMore="expanded",showMoreExpanded=!0,trackEvent(DM.pageEvents.COMMENTS_SHOW_MORE_CLICK,{label:"expand"}))},initShowMore=function(){var e=document.getElementById("reader-comments")||document.getElementById("reader-comments-in-overlay"),t="feature"===window.PageCriteria.articleType;if(e.offsetHeight<SHOW_MORE_COMMENT_HEIGHT||t||hasSubmittedCommentFromLogin)return e.dataset.showMore="none",void(e.style.maxHeight="");showMoreButton||(showMoreButton=document.createElement("button"),showMoreButton.classList.add("rc-show-more"),showMoreButton.addEventListener("click",handleShowMoreToggle),showMoreButtonWrapper=document.createElement("div"),showMoreButtonWrapper.classList.add("rc-show-more-wrapper"),showMoreButton.innerHTML="Show More",showMoreButtonWrapper.appendChild(showMoreButton),e.appendChild(showMoreButtonWrapper),e.style.maxHeight=SHOW_MORE_COMMENT_HEIGHT+"px",e.dataset.showMore="collapsed")},loadCommentsCallback=function(e,t,o){var n=Ext.util.JSON.decode(o.responseText),i=n&&n.payload&&n.payload.page?n.payload.page:[],a=void 0,s="";n.payload&&n.payload.parentCommentsCount&&(n.payload.total=n.payload.parentCommentsCount),totalComments=n.payload&&n.payload.total?n.payload.total:totalComments;for(var r=0,m=i.length;r<m;r++)a=formatUserInfo(i[r]),"article"===mode?s+=createCommentHtml(a):"user"===mode&&(s+=createUserHtml(a));var l=Ext.get("js-comments");l&&(l.dom.innerHTML=s),Ext.each(i,function(e){initComment(Ext.get("comment-"+e.id))}),viewAll?(setButtonLabel("View "+tabNames[tabIndex]+" "+maxComments),DM.Pagination.getInstance().doPagination(n.payload)):(setButtonLabel("View all"),DM.Pagination.getInstance().hide()),totalComments>maxComments&&Ext.select(".js-view-all-link").removeClass("hidden"),i.length>=0&&Ext.each(Ext.query("div.rc-content",rc));var c=Ext.urlDecode(window.location.search).jumpTo,u=Ext.urlDecode(window.location.search).openReply,d=Ext.fly(c);if(d){d.replaceClass("bogr1","comment-selected"),u&&jQuery(document).ready(function(){var e=jQuery("#"+c+" button.js-reply");setTimeout,5)}),DM.RC.spinner("hide"),window.location.hash="#"+c;var p=Ext.select("reader-comments")||Ext.select("reader-comments-in-overlay");p.dataset.showMore="expanded",p.style.maxHeight=""}initReplyForms(),DM.RC.spinner("hide"),initShowMore(),timeCommentsVisible&&!trackedLoadTime&&(trackedLoadTime=!0,trackEvent(DM.pageEvents.COMMENTS_LOAD_TIME,{value:Date.now()-timeCommentsVisible}))},toggleViewAll=function(e){viewAll=!viewAll,loadComments(viewAll?e:{maxResults:maxComments,page:1,mode:mode,period:period})},commentSubmissionError=function(e,t,o){o&&(RCUtils.enableButton(o.dom),inlineSubmissionMessage("error",o.parent()));var n="assetId:"+e.assetId+",message:"+e.message;e.replyTo&&(n+=",replyTo:"+e.replyTo),tedParams={status:t.status,params:n},t.status&&(tedParams.responseCode=t.code),DM.getCookie("authid")&&(tedParams.authidCookie=DM.getCookie("authid")),DM.ted.tedEvent("reader-comments",tedParams)},readerCommentsHandler=function(e,t){function o(t,o,n){!DM.isLoggedIn&&DM.Login&&(e.preventDefault(),trackEvent(DM.pageEvents.COMMENTS_LOGIN_REDIRECT),window.location.replace("/registration/login.html?usr=1&reg_source=comment&targetUrl="+window.location.href))}var n=e.getTarget(".js-view-all-link",4,!0),i=void 0;if(n)closeCopyCommentLinkLightbox(e,t),intellitrackerLog(),toggleViewAll(defaultPaginationConfig),e.stopEvent(),trackEvent(DM.pageEvents.COMMENTS_VIEW_ALL);else if(n=e.getTarget(".js-usr",3,!0))trackEvent(DM.pageEvents.COMMENTS_PROFILE_CLICK),o(e,t,n);else if(Ext.get(t).parent().hasClass("rc-avatar-link"))trackEvent(DM.pageEvents.COMMENTS_PROFILE_CLICK),o(e,t,Ext.get(t).parent());else if(n=e.getTarget("a.js-rate",3,!0)){var a=Ext.get(n.dom.parentNode),s=void 0;a.hasClass("rated")||(n.hasClass("js-rate-up")?(s=Ext.query("div.rating-button-up div.rating-button-inline",Ext.getDom(a))[0].innerHTML,i=a.dom.getAttribute("rel"),a.addClass("rated rated-up"),updateRatingsCookie(i,"+"),Ext.query("span.gr5ox",Ext.getDom(a))[0].innerHTML="Rated",Ext.query("div.rating-button-up div.rating-button-inline",Ext.getDom(a))[0].innerHTML=parseInt(s)+1,Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/voteup/"+i,success:function(){}}),trackEvent(DM.pageEvents.COMMENTS_UPVOTE)):n.hasClass("js-rate-down")&&(s=Ext.query("div.rating-button-down div.rating-button-inline",Ext.getDom(a))[0].innerHTML,i=a.dom.getAttribute("rel"),a.addClass("rated rated-down"),updateRatingsCookie(i,"-"),Ext.query("span.gr5ox",Ext.getDom(a))[0].innerHTML="Rated",Ext.query("div.rating-button-down div.rating-button-inline",Ext.getDom(a))[0].innerHTML=parseInt(s)+1,Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/votedown/"+i,success:function(){}}),trackEvent(DM.pageEvents.COMMENTS_DOWNVOTE))),e.stopEvent()}else if(n=e.getTarget(".js-more-link",3,!0)){var r=n.parent(".js-headers").child(".comments-user");if(!r)return;n.containerHeight=n.containerHeight||r.getHeight(),r.scale(void 0,n.hasClass("js-collapsed")?n.containerHeight:0,{easing:"easeOut",duration:.65}),n.toggleClass("js-collapsed"),e.stopEvent()}else if(n=e.getTarget(".btn-submit",3,!0)){var m=Ext.get("message"),l=Ext.get("formAssetId"),c=m.dom.value;if(!validateMessage(m.dom))return;RCUtils.disableButton(m.dom),inlineSubmissionMessage("pending",m.parent());var u={assetId:l.dom.value,message:c,source:"desktop",postToFacebook:DM.RC.FB.isHandlePostToFacebookSelected()},d=$("#handlePostToFacebookInput").is(":checked")?"click_with_fbShare":"click";trackEvent(DM.pageEvents.SOCIAL_SHARE_COMMENTS,{name:"submitComment/"+d}),trackEvent(DM.pageEvents.COMMENTS_SUBMIT_COMMENT),Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/postCommentInline",params:u,success:function(e){var t=JSON.parse(e.responseText);if("success"===t.status){m.dom.value=m.dom.title,validateMessage(m.dom);inlineSubmissionMessage(u.postToFacebook?"success-fb-share":"success",m.parent()),trackEvent(DM.pageEvents.COMMENTS_SUBMIT_SUCCESS)}else if("error"===t.status&&"login"===t.reason){RCUtils.enableButton(m.dom);var o=new Date;o.setHours(o.getHours()+1),commentAssetToSubmitCookie=l.dom.value,commentMessageToSubmitCookie=c,clearInlineSubmissionMessage(),DM.setCookie("commentAssetToSubmitCookie",commentAssetToSubmitCookie,o,"/"),DM.setCookie("commentMessageToSubmitCookie",commentMessageToSubmitCookie,o,"/"),trackEvent(DM.pageEvents.COMMENTS_LOGIN_REDIRECT),window.location.replace("/registration/login.html?usr=1&reg_source=comment&targetUrl="+encodeURIComponent(window.location.href))}else commentSubmissionError(u,t,m)},failure}),e.stopEvent()}else if(n=e.getTarget(".more-replies",3,!0)){var p=n.parent().parent().parent(),g=n.parent().parent(),f=n.dom.getAttribute("rel"),h=p.query(".reply-post").length,v="start="+h,C="/reader-comments/p/comment/morereplies/"+f+"?"+v;Ext.Ajax.request({url:C,callback:function(e,t,o){function n(e){var t=e.dom.innerHTML,o=t.indexOf("of "),n=t.indexOf(" replies");return o<0||n<0?0:parseInt(t.substring(o+3,n))}var i=Ext.util.JSON.decode(o.responseText);if(!("200"!=i.code||i.payload.length<1)){var a=i.payload,s="";Ext.each(a,function(e){s+=createCommentHtml(formatUserInfo(e),f)}),Ext.DomHelper.insertAfter(g,s,!0),Ext.each(a,function(e){initComment(Ext.get("comment-"+e.id))});var r=Ext.get(g.query("span")[0]),n=n(r),m=p.query(".reply").length,l=n-m;l>0?(r.next("a").dom.innerHTML=(l>REPLIES_PAGINATION_SIZE?"See next "+REPLIES_PAGINATION_SIZE+" replies":"See all replies")+'<span class="rc-down-arrow"></span>',r.dom.innerHTML=m+" of "+n+" replies"):g.remove(),openReplyInput(Ext.get("comment-"+f),!1)}},method:"get"}),e.stopEvent()}},checkCookies=function checkCookies(){var arrComments=void 0,currentComment=void 0,arrAbuseLink=void 0,currentAbuseLink=void 0;if(ratingsCookie){arrComments=Ext.query("div.comment-post",rc);for(var i=0,len=arrComments.length;i<len;i++)currentComment=arrComments[i],currentComment.ratings=Ext.get("reader-comments").query(".rating")||Ext.get("reader-comments-in-overlay").query(".rating"),Ext.each(currentComment.ratings,function(el){if(currentComment.commentId=el.getAttribute("rel"),-1!=ratingsCookie.search(eval("/"+currentComment.commentId+"[+-]/"))){Ext.fly(el).addClass(getRatingClass(currentComment.commentId));var clickToRate=Ext.query("span.gr5ox",el)[0];clickToRate&&(clickToRate.innerHTML="Rated")}})}if(abuseCookie){arrComments=Ext.query("div.comment-post",rc),arrAbuseLink=Ext.query("p.js-report-abuse",rc);for(var i=0,len=arrComments.length;i<len;i++)currentComment=arrComments[i],currentAbuseLink=arrAbuseLink[i],currentComment.rating=currentComment.getElementsByTagName("div")[0],currentComment.commentId=currentComment.rating.getAttribute("rel"),-1!=abuseCookie.search(eval(currentComment.commentId))&&(currentAbuseLink.innerHTML=currentAbuseLink.getElementsByTagName("a")[0].innerHTML,Ext.fly(currentAbuseLink).replaceClass("link-gr5ox",getAbuseClass(currentComment.commentId)))}if(commentAssetToSubmitCookie||commentMessageToSubmitCookie){var deleteDate=new Date;if(deleteDate.setDate(deleteDate.getDate()-1),commentAssetToSubmitCookie&&commentMessageToSubmitCookie){if(articleId!=commentAssetToSubmitCookie)return DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),void DM.setCookie("commentReplyToSubmitCookie","",deleteDate,"/");var requestParams={assetId:commentAssetToSubmitCookie,message:commentMessageToSubmitCookie,source:"desktop"};commentReplyToSubmitCookie&&(requestParams.replyTo=commentReplyToSubmitCookie);var targetForm=Ext.get("readerCommentsCommand-message-field");Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/postCommentInline",params:requestParams,success:function(e){DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentReplyToSubmitCookie","",deleteDate,"/");var t=JSON.parse(e.responseText);"success"===t.status?(inlineSubmissionMessage("success",targetForm),trackEvent(DM.pageEvents.COMMENTS_SUBMIT_SUCCESS)):"error"===t.status&&"login"!=t.reason&&(commentSubmissionError(requestParams,t),inlineSubmissionMessage("error",targetForm)),window.location.hash="readerCommentsCommand-message-field"},failure:function(e,t){commentSubmissionError(requestParams,e),DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),inlineSubmissionMessage("error",targetForm),window.location.hash="readerCommentsCommand-message-field"}})}else DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),commentReplyToSubmitCookie&&DM.setCookie("commentReplyToSubmitCookie","",deleteDate,"/")}},updateRatingsCookie=function(e,t){var o=ratingsCookie?ratingsCookie.split(","):[];o.push(e+t)>MAX_COOKIE_RATINGS&&(o=o.slice(1));var n=new Date;n.setFullYear(2030),ratingsCookie=o.join(","),DM.setCookie("commentRatings",ratingsCookie,n,"/")},updateRatingCount=function(e,t){var o=Ext.query("span.js-vote-rating",e.dom)[0];0==t?(e.removeClass(["positive","negative"]),o.innerHTML="(0)"):(t>0?e.addClass("positive"):(t*=-1,e.addClass("negative")),o.innerHTML=t)},getRatingClass=function(e){if(ratingsCookie){var t=new RegExp(e+"([+-])").exec(ratingsCookie)
;if(t)switch(t[1]){case"+":return" rated rated-up";case"-":return" rated rated-down"}}return""},updateAbuseCookie=function(e){var t=abuseCookie?abuseCookie.split(","):[];t.push(e)>MAX_COOKIE_RATINGS&&(t=t.slice(1));var o=new Date;o.setFullYear(2030),abuseCookie=t.join(","),DM.setCookie("reportAbuse",abuseCookie,o,"/")},getAbuseClass=function(e){return abuseCookie&&-1!=abuseCookie.search(String(e))?"gr3ox":"link-gr5ox"},setFormValuesFromCookie=function(){var e=Ext.query("form.post-comment-form","reader-comments")[0]||Ext.query("form.post-comment-form","reader-comments-in-overlay")[0];void 0!==e&&(DM.getCookie("remember_me_cookie")&&void 0!==e.rememberMe&&(e.rememberMe.checked=!0),DM.getCookie("reader_name_cookie")&&void 0!==e.name&&(e.name.value=DM.getCookie("reader_name_cookie")),DM.getCookie("reader_town_cookie")&&void 0!==e.townAndCountry&&(e.townAndCountry.value=DM.getCookie("reader_town_cookie")))},setButtonLabel=function(e){buttonLabel&&buttonLabel.each)},tabHandler=function(e){for(var t=e.getTarget("li.dm-tab",5),o=tabs._tabs.length;0<o;)o--,t==tabs._tabs[o]&&(tabIndex=o);tabs._selectTab(t),viewAll=!0,intellitrackerLog(),toggleViewAll(defaultPaginationConfig)},intellitrackerLog=function(){trackEvent(DM.pageEvents.PAGE_COMMENT_TAB_SWAPPED,DM.getPageMetadata({contentType:"commenttab",tab:tabNames[tabIndex]}))};DM.RC.getCommentData=getCommentData;var debounce,getOffsetTop;return{init:function(e){var t=document.querySelector("#reader-comments");hasSubmittedCommentFromLogin=!1;try{hasSubmittedCommentFromLogin=DM.getCookie("commentReplyToSubmitCookie")||DM.getCookie("commentMessageToSubmitCookie")}catch(e){}if(window.location.search&&window.location.search.match(/[?&]jumpTo=comment-/)||hasSubmittedCommentFromLogin)return initReaderComments(e);if(window.location.hash&&"#comments"===window.location.hash)try{var o=getOffsetTop(t);return DM.molFeDomHelpers.scrollUtils.scrollToElement(t),setTimeout(function(){getOffsetTop(t)!==o&&(DM.molFeDomHelpers.scrollUtils.scrollToElement(t),timeCommentsVisible=Date.now())},1e3),initReaderComments(e)}catch(e){}var n=!1,i=document.querySelector(".comments-count"),a=document.querySelector("#page-container"),s="feature"===window.PageCriteria.articleType,r=s?a:window,m=function t(){n||(initReaderComments(e),n=!0,timeCommentsVisible=Date.now(),r.removeEventListener("scroll",l),i.removeEventListener("click",t))},l=debounce(function(){var e=s?a.scrollTop:window.pageYOffset,o=document.documentElement&&document.documentElement.clientHeight||window.innerHeight||1e3,i=getOffsetTop(t);i&&e+o>i&&!n&&m()},50);r.addEventListener("scroll",l),i.addEventListener("click",m),l()}}};return{getInstance}}()},function(e,t){DM.RC=DM.RC||{},function()DM.RC.spinner=function(){e()||(DM.RC.spinner=function(e){var t=$(".rc-content"),o=$(".rc-spinner"),n=$("#js-comments"),i={show:{callback},hide:{callback:function(){o=$(".rc-spinner"),n.removeClass("rc-transparent-comments-list"),o.remove()}}};i[e].callback&&i[e].callback()})},DM.RC.initialize=function(){if(!e()){var t=$(".rc-content"),o=$("#js-comments");t.append('<div class="rc-spinner"><img src="https://i.dailymail.co.uk/i/furniture/fff/preload-inline.gif" /><span>Loading...</span></div>'),o.addClass("rc-transparent-comments-list")}}}()},function(e,t){DM.RC.Templates=function(){var e=new Ext.Template('<button type="submit" class="btn anchor-comment js-newcomment newcomment-wide">New Comment</button><button type="submit" class="btn anchor-comment js-newcomment newcomment-small">New</button>').compile(),t=new Ext.Template('<div class="submission-message submission-{type}"><div class="submission-feedback-icon"></div><div class="submission-feedback-message">{message}</div>{fbMessage}</div>').compile(),o='<a class="reportAbuseLink" href="{abuseLink}" rel="nofollow"><div title="Report abuse" class="reportAbuseIcon"></div></a>';return{newCommentButtonTemplate:e,inlineSubmissionResponse:t,articleCommentTemplate:new Ext.Template('<div id="comment-{commentId}" class="{type} {type}-post bogr1 cleared">'+o+'<div class="avatar"><a href="{userProfileUrl}" class="rc-avatar-link"><img src="{userProfileImageUrl}?cb={formattedCurrentDate}"style="width: {avatarSide}px;clip: rect(0px {avatarSide}px {avatarSide}px 0px);"onerror="this.style.display=\'none\';"/></a></div><div class="container"><p class="user-info">{userInfo}</p><p class="{type}-body {type}-text">{body}</p><div class="rating {ratingClass}" rel="{commentId}"><div class="reply-buttons">{replyButtonHTML}{newCommentButtonHTML}</div>{shareHTML}<a class="js-rate js-rate-down" href="#"><div class="rating-button grey-rating-button rating-button-down"><div class="rate-down"></div><div class="rating-button-inline">{votesDownValue}</div></div></a><a class="js-rate js-rate-up" href="#"><div class="rating-button grey-rating-button rating-button-up"><div class="rate-up"></div><div class="rating-button-inline">{votesUpValue}</div></div></a><span style="float:right;" class="gr5ox">{voteButtonText}</span> </div><div class="comment-replies">{repliesHtml}</div></div></div>').compile(),userCommentTemplate:new Ext.Template('<div id="comment-{commentId}" class="comment comment-post bogr1 cleared"><p class="comment-title f-b"><a href="/reader-comments/p/comment/link/{commentId}">{articleTitle}</a></p>'+o+'<div class="container"><a href="/reader-comments/p/comment/link/{commentId}"><p class="comment-body comment-text">{body}</p></a><div class="rating {ratingClass}" rel="{commentId}"><div class="shareComment"><a class="fShareComment"></a><a class="tShareComment"></a><span class="pShareComment"></span><span class="copyCommentLink"></span><span class="shareExpansionAnchor"></span></div><a class="js-rate js-rate-down" href="#"><div class="rating-button grey-rating-button rating-button-down"><div class="rate-down"></div><div class="rating-button-inline">{votesDownValue}</div></div></a><a class="js-rate js-rate-up" href="#"><div class="rating-button grey-rating-button rating-button-up"><div class="rate-up"></div><div class="rating-button-inline">{votesUpValue}</div></div></a><span style="float:right;" class="gr5ox">Click to rate</span></div><div class="comment-replies"></div></div></div>').compile(),userOpenWebCommentTemplate:new Ext.Template('<div id="comment-{commentId}" class="comment comment-post bogr1 cleared"><p class="comment-title f-b"><a href="{assetUrl}?spot_im_redirect_source=user-profile&spot_im_comment_id={openWebId}&spot_im_highlight_immediate=true">{articleTitle}</a></p><div class="container"><a href="{assetUrl}?spot_im_redirect_source=user-profile&spot_im_comment_id={openWebId}&spot_im_highlight_immediate=true"><p class="comment-body comment-text">{body}</p></a><div class="rating {ratingClass}" rel="{commentId}"><div class="shareComment"><a class="fShareComment"></a><a class="tShareComment"></a><span class="pShareComment"></span><span class="copyCommentLink"></span><span class="shareExpansionAnchor"></span></div></div><div class="comment-replies"></div></div></div>').compile(),replyButtonTemplate:new Ext.Template('<button type="submit" class="btn anchor-reply-{type} js-reply" rel="reply-form-{id}">Reply</button>').compile(),replyFormTemplate:new Ext.Template('<div class="reply-form textarea-holder field"><a id="reply-form-{id}" name="reply-form-{id}"></a><textarea class="js-validate js-countdown js-defaultvalue js-expand textarea-input"cols="40"rows="2"title="Enter your reply..."></textarea><button type="submit" class="btn js-reply-submit">Post</button></div>').compile(),copyCommentLinkTemplate:new Ext.Template('<div class="lightBoxContent"><input id="copyLinkInput" class="copyLinkInput" onfocus="this.select();" readonly="true" type="text" value="{commentLink}" /><p>Copy link to paste in your message</p></div>')}}()},function(e,t){DM.RC.Utils=function(){function e(e){return"message"!=e.id?Ext.get(e).next("button"):Ext.get(e).parent().next(".buttons-holder").down(".btn-submit")}function t(t){var o=e(t);o.addClass("btn-disabled"),o.dom.disabled="true"}function o(t){var o=e(t);o.removeClass("btn-disabled"),o.dom.disabled=void 0}return{getSubmitButton:e,disableButton:t,enableButton:o}}()},function(e,t){!function(e){e(document).ready(function(){var t=e("#abuse-details"),o=e(".thankyou"),n=e(".failed"),i={mandatory:{type:"regExp",opts:{re:/^.+$/,error:"Please provide a value for this field"}},emailHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please enter a valid email address"}},email:{type:"regExp",opts:{re:/^([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})?$/i,error:"Please provide a valid email address"}},recaptchaHelper:{type:"length",opts:{min:1,error:"Don't forget the verification code"}},complaintHelper:{type:"regExp",opts:{re:/^.*[^\s].*$/,error:"Please provide an explanation of your complaint"}},complaint:{type:"regExp",opts:{re:/^.+$/,error:"Please provide an explanation of your complaint"}}};e("#abuse-details").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:i,errorsMap:{email:["emailHelper","email"],complaint:["complaintHelper","complaint"]},hintsMap:{email:["emailHelper"],complaint:["complaintHelper"]}}),o.hide(),n.hide(),window.submitReportAbuseFunction=function(){var i=grecaptcha.getResponse();if(0===i.length)return void e("#abuse-details").removeClass("submitting");t.hide(),n.hide(),DM.RC.spinner("show");var a=e("#email").val(),s=e("#complaint").val(),r=e("#commentId").val();e.ajax({type:"POST",url:"/reader-comments/p/postReportAbuseInComment.html",Accept:"application/json",contentType:"application/json",data:JSON.stringify({email:a,complaint:s,recaptchaResponse:i,commentId:r}),success:function(e){"success"==e.status?(console.log("success: "+e.reportId+".."),document.querySelector(".reportId").innerHTML=e.reportId,t.hide(),o.show(),n.hide(),DM.RC.spinner("hide")):(console.log("failure: "+e.status+".."),DM.RC.spinner("hide"),t.show(),o.hide(),n.hide(),grecaptcha.reset(),t.removeClass("submitting"))},error:function(e,t,o){console.log("Error while accessing server: "+o),DM.RC.spinner("hide"),n.show()}}),e(function(){e("textarea[maxlength]").bind("input propertychange")})}})}(jQuery)},,,function(e,t){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator;!function(t,n){var i={version:"2.14.2",areas:{},apis:{},nsdelim:".",inherit,stringify,parse,fn,get:function(e,t){return e.getItem(t)},set,remove,key,length:function(e){return e.length},clear,Store,storeAPI:{area,namespace:function(e,t,o){if(o=o||this._delim||i.nsdelim,!e)return this._ns?this._ns.substring(0,this._ns.length-o.length):"";var n=e,a=this[n];if(!(a&&a.namespace||(a=i.Store(this._id,this._area,this._ns+n+o),a._delim=o,this[n]||(this[n]=a),t)))for(var s in i.areas)a.area(s,i.areas[s]);return a},isFake,toString,has,size,each,keys,get,getAll,transact,set,setAll,add:function(e,t,n){var a=this.get(e);if(a instanceof Array)t=a.concat(t);else if(null!==a){var s=void 0===a?"undefined":o(a);if(s===(void 0===t?"undefined":o(t))&&"object"===s){for(var r in t)a[r]=t[r];t=a}else t=a+t}return i.set(this._area,this._in(e),i.stringify(t,n)),t},remove,clear,clearAll,_in,_out},storage,storageAPI:{length:0,has,key,setItem,removeItem,getItem,clear}},a=i.Store("local",function(){try{return localStorage}catch(e){}}());a.local=a,a._=i,a.area("session"()),a.area("page",i.storage("page")),"function"==typeof n&&void 0!==n.amd?n("store2",[],function(){return a}):void 0!==e&&e.exports?e.exports=a:(t.store&&(i.conflict=t.store),t.store=a)}(this,this&&this.define)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(10),i=(o.n(n),o(5)),a=(o.n(i),o(1),o(6)),s=(o.n(a),o(7)),r=(o.n(s),o(4)),m=(o.n(r),o(3)),l=(o.n(m),o(2)),c=(o.n(l),o(8));o.n(c)}]);(function(){var bundleLocation;var channel;var insertBeforeScript;var script;if(typeof DM!=="undefined"&&DM.getPageMetadata){channel=DM.getPageMetadata().channel}if(channel==="/registration"){bundleLocation=DM.getPageMetadata().bundleLocation}if(bundleLocation){script=document.createElement("script");script.type="text/javascript";script.async=true;script.onload=function(){DM.later.go("REGISTRATION_ASYNC_BUNDLE_LOADED")};insertBeforeScript=document.querySelector("script");insertBeforeScript.parentNode.insertBefore(script,insertBeforeScript);script.src=bundleLocation+"/registration--.js"}})();(function(){var articleEvents=["ARTICLE_DEFER_BUNDLE_LOADED"];var channelEvents=["CHANNEL_DEFER_BUNDLE_LOADED"];if(DM.getPageMetadata().channel==="/registration"){var REGISTRATION_ASYNC_BUNDLE_LOADED_EVENT="REGISTRATION_ASYNC_BUNDLE_LOADED";articleEvents.push(REGISTRATION_ASYNC_BUNDLE_LOADED_EVENT);channelEvents.push(REGISTRATION_ASYNC_BUNDLE_LOADED_EVENT)}Promise.race([DM.later(articleEvents),DM.later(channelEvents)]).then)})();
//# sourceMappingURL=async_bundle--.js.map
