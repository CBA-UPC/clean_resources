"use strict";(self.webpackChunk_kambi_micro_frontend_app_router=self.webpackChunk_kambi_micro_frontend_app_router||[]).push([[9049],{61102:(e,t,s)=>{s.d(t,{Z:()=>A});var i=s(64572),r=s(64365),o=s(45269),n=s(68107),a=s(82198),c=s(97849),d=s(74553),u=s(87181),l=s(75449);const p=[r.hA,r.mY,r.tq,r.h4,r.AS,r.ZE,r.Yc,r.MI],E=[r.hA,r.LZ,r.XW,r.Zn,r.zz],g={[r.Gu.PREMATCH]:r.jN,[r.Gu.LIVE]:r.wI,[r.MG]:""},h={[r.gx.MY_BETS]:r.$N,[r.gx.REWARDS]:r.Ck},S={[r.fS.PENDING]:r.hA,[r.fS.SETTLED]:r.mY,[r.fS.WON]:r.LZ,[r.fS.LOST]:r.XW,[r.fS.VOID]:r.Zn,[r.fS.CASH_OUT]:r.tq,[r.fS.CASHED_OUT]:r.zz},b={[r.hA]:r.fS.PENDING,[r.mY]:r.fS.SETTLED,[r.LZ]:r.fS.WON,[r.XW]:r.fS.LOST,[r.Zn]:r.fS.VOID,[r.tq]:r.fS.CASH_OUT,[r.zz]:r.fS.CASHED_OUT,[r.h4]:r.N2.ACTIVE,[r.AS]:r.N2.PENDING,[r.ZE]:r.N2.IN_USE,[r.Yc]:r.N2.USED,[r.MI]:r.N2.EXPIRED},_=[r.jN,r.wI],m={[r.jN]:g.PREMATCH,[r.wI]:g.LIVE},f={[r.N2.ACTIVE]:r.h4,[r.N2.PENDING]:r.AS,[r.N2.IN_USE]:r.ZE,[r.N2.USED]:r.Yc,[r.N2.EXPIRED]:r.MI};function v(e){if(e){const t=e.match(/^\d{4}-\d{2}-\d{2}$/);return t&&!Number.isNaN(Date.parse(t))}}function T(e,t){return t!==r.gx.REWARDS?S[e]||"":f[e]||""}class A{static get COUPONS_PER_PAGE(){return Math.max(window.innerHeight,document.documentElement.clientHeight,document.body.clientHeight)>960||(0,a.nI)()?25:15}constructor(e={}){(0,i.Z)(this,"source",""),(0,i.Z)(this,"status",r.fS.ALL),(0,i.Z)(this,"offset",0),(0,i.Z)(this,"count",A.COUPONS_PER_PAGE),(0,i.Z)(this,"to",new Date),(0,i.Z)(this,"from",null),this.to.setHours(23,59,59,999),e.to&&(this.to=new Date(e.to)),e.count&&(this.count=e.count),e.offset&&(this.offset=e.offset),e.status?this.status=e.status:c.Session.get(d.SessionAPIConstants.SUPPORT_AGENT_MODE)||(this.status=this.getBetHistoryDefaultTab())}getBetHistoryDefaultTab(){const e=(0,u.getData)(u.customerSettings.selector).defaultSortOrderForFiltersInBetHistory;if(null!=e&&e.length){const t=e.filter(().map((e=>e!==r.MG?e:""));return null!=t&&t.length?t[0]:r.su[0]}return r.su[0]}etUrlFormattedSource(){return c.Session.get(d.SessionAPIConstants.SUPPORT_AGENT_MODE)?g[this.source]||"":h[this.source]||""}getUrlFormattedDate(){return this.source===r.gx.REWARDS?"":this.from?`${(0,o.eV)(this.from)},${(0,o.eV)(this.to)}`:(0,o.eV)(this.to)}getApiParams(e,t){const s=c.Session.get(d.SessionAPIConstants.SUPPORT_AGENT_MODE),i={count:this.count,offset:this.offset,status:this.status,source:s?this.source:"",to:this.to,from:this.from};i.to.setHours(23,59,59,999);const r=new Date;return r.setHours(23,59,59,999),i.isToday=i.to.getTime()===r.getTime(),s&&(i.pbaOnly=!!t,i.couponRef=e&&!isNaN(e)?e:"",i.eventName=e&&!i.couponRef?e:""),i}parseFragment(e=(0,n.getKambiRoute)()){e.includes(r.Ck)&&(this.source=r.gx.REWARDS);const t=-1!==e.indexOf("filter/")?this._parseOldFragment(e):this._parseNewFragment(e);let s,i,a=0;var h;(0,u.getData)(u.customerSettings.selector).enableCalendarDateRange?([s,i]=(null===(h=t[a])||void 0===h?void 0:h.split(",").sort(((e,t)=>new Date(e)-new Date(t))))||[],i||(i=s,s===(0,o.eV)(new Date)&&(s=null))):i=t[a];v(i)&&(this.to=(0,o.n2)(i),this.from=v(s)?(0,o.n2)(s):null,a+=1);const S=function(e){return!!(c.Session.get(d.SessionAPIConstants.SUPPORT_AGENT_MODE)?E:p.concat((0,l.Ms)())).includes(e)&&b[e]}(t[a]);if(S&&(a+=1),this.status=S||this.getBetHistoryDefaultTab(),c.Session.get(d.SessionAPIConstants.SUPPORT_AGENT_MODE)){const e=function(e){return!!(c.Session.get(d.SessionAPIConstants.SUPPORT_AGENT_MODE)?_:[]).includes(e)&&m[e]}(t[a]);e&&(a+=1),this.source=e||g.ALL}}_parseOldFragment(e){const t=e.replace("bethistory/filter/","").split(",").filter(Boolean),s=t[0],i=v(t[1])||"";return[`${s}${i&&`,${i}`}`,T(i?t[3]:t[2])]}_parseNewFragment(e){let t=e.split("/").filter(();return t[0]&&"bethistory"===t[0]&&t.shift(),t}lone},40102:(e,t,s)=>{s.d(t,{N:()=>i});s(634);const i={WIDGET_IFRAME:Symbol("widget-iframe"),SELF_WINDOW:Symbol("self-window"),EXTERNAL_IFRAME:Symbol("external-iframe")}},65141:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(82614),r=s(33577),o=s(30868),n=s(53708),a=s(10411),c=s(45269);function d(e){return`${e.getUTCFullYear()}-${(0,c.Bd)(e.getUTCMonth()+1)}-${(0,c.Bd)(e.getUTCDate())}`}class u extends i.Z{get requiresAuthentication(){return!0}apiVersion(){return this.VERSIONS.V2019}parse(e,t,s){const i={coupons:e.historyCoupons.map((e=>{const t=new n.Z((0,r.Q)(e));let s=e.outcomes||[];return s=s.map((t=>new a.Z((0,o.Q)(e,t)))),t.set("outcomes",s),t})),hasNext:e.range.more};s.get("callback")(i)}urlPath(){return"/coupon/history.json"}queryParams(e){const t=super.queryParams(e);if(t.range_size=e.get("count")||100,t.range_start=e.get("offset")||0,e.get("from")){const s=new Date(e.get("from"));s.setUTCDate(s.getUTCDate()+1),t.fromDate=d(s)}if(e.get("to")){const s=new Date(e.get("to"));s.setUTCDate(s.getUTCDate()+1),t.toDate=d(s)}e.get("source")&&(t.source=e.get("source"));const s=e.get("status");return s&&(t.status="ALL"===s?void 0:s),t}}const l=new u},11364:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(82614),r=s(30592),o=s(83533);class n extends i.Z{get requiresAuthentication(){return!0}apiVersion(e){return e.get("apiVersion")===o.Fy?this.VERSIONS.V2019:this.VERSIONS.V2}parse(e,t,s){s.get("callback")(e)}onFetchError(e,t){super.onFetchError(),e.get("callback")(t)}urlPath(e){if(e.get("apiVersion")===o.Fy){return`/reward/status/${[r.qb.ACTIVE,r.qb.IN_USE,r.qb.USED,r.qb.EXPIRED].toString()}.json`}return"/bonus/reward/all.json"}queryParams(e){return e.get("apiVersion")===o.Fy?{includePending:!0}:{withRuleDetails:!0}}}const a=new n},90436:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(64572),r=s(94798),o=s(82614),n=s(23459),a=s(19502),c=s(50770),d=s(63227),u=s(75449);class l extends o.Z{constructor(...e){super(...e),(0,i.Z)(this,"_parseRewardsResponse",(e=>(["validRewards","validGroupRewards","implicitGroupRewards"].forEach((t=>{Array.isArray(e[t])&&(e[t]=e[t].map((({reward:e,validForOutcomes:t})=>({...e,id:e.rewardId,validForOutcomes:t,validFor:(0,d.Y)(e)}))))})),e))),(0,i.Z)(this,"onPostError",((e,t)=>{super.onPostError(e,t),this._clearErrors();const s=t.responseJSON;let i=!0;if(s){var o;(0,c.i)(s,e),(null===(o=s.couponRowErrors)||void 0===o?void 0:o.length)>0&&(s.betErrors=[]);const{betErrors:t=[],couponRowErrors:n=[],generalErrors:d=[],status:u=null}=s;if(i=this.revalidate(n),i){const e=[...t,...n];r.EventBus.send(r.EventKeys.VALIDATION_BET_ERRORS_RECEIVED,e)}if(d&&r.EventBus.send(r.EventKeys.VALIDATION_GENERAL_ERRORS_RECEIVED,d),400===u){const e="bad-request";r.EventBus.send(r.EventKeys.VALIDATION_GENERAL_ERRORS_RECEIVED,[{id:e,type:a.At.VET_BAD_REQUEST}])}this._sendRewards(s.rewardInfo)}i&&(0,u.t6)({name:n.Z.NOTIFICATION_BET_VALIDATION_COMPLETED,status:a.zc.INVALID,response:s}),r.EventBus.send(r.EventKeys.VALIDATION_COMPLETED)}))}st(e){super.post(e),r.EventBus.send(r.EventKeys.VALIDATION_STARTED)}parse(e,t,s){s.changed&&void 0!==s.changed.isUserLoggedIn||(this._clearErrors(),this._sendRewards(e.rewardInfo),(0,u.t6)({name:n.Z.NOTIFICATION_BET_VALIDATION_COMPLETED,status:a.zc.VALID,response:e})),r.EventBus.send(r.EventKeys.VALIDATION_COMPLETED)}_sendRewards(e){if(e){const{validRewards:t,validGroupRewards:s,implicitGroupRewards:i}=this._parseRewardsResponse(e);r.EventBus.send(r.EventKeys.VALID_REWARDS_RECEIVED,{validRewards:t,validGroupRewards:s}),r.EventBus.send(r.EventKeys.IMPLICIT_GROUP_REWARDS_RECEIVED,i)}}lPath(){return"/coupon/validate.json"}revalidate(e=[]){if(e.length){const t=[],s=[];if(e.filter(().forEach((({values:e})=>{const{couponRow:i,value:r}=e[0];let{outcomeId:o,group:n}=i;n&&(o=n.groups.map(());const a={id:o,odds:+r};Array.isArray(a.id)?s.push(a):t.push(a)})),t.length&&r.EventBus.send(r.EventKeys.BETSLIP_OUTCOME_ODDS_UPDATED,t),s.length&&r.EventBus.send(r.EventKeys.VALIDATION_BET_BUILDER_ODDS_CHANGED,s),t.length||s.length)return r.EventBus.send(r.EventKeys.BETSLIP_VALIDATE_OUTCOMES),!1}return!0}}const p=new l},22899:(e,t,s)=>{s.d(t,{Z:()=>S});var i=s(7298),r=s(38513),o=s(45269),n=s(10189),a=s(69656),c=s(87181),d=s(46281),u=s(11583),l=s(97006),p=s(50474),E=s(71569),g=s(64365);class h extends r.Lf{get repositories(){return[d.Z]}_getTitle(e){return e.get("hasPBABets")?(0,a.i0)("bethistory.statuses.wfa"):(0,a.i0)("betslipReceipt.title")}_getMultiPositionSelections(e,t){const s={};return e.forEach((e=>{s[`${t}_${e}`]=!0})),s}_getOutcomeIds(e){return e.get("couponOutcomeIds").map((e=>{const t=p.Z.get(e);if(t){if(t.get("isMultiPosition")){const e=this._getMultiPositionSelections(t.get("participantIds"),t.get("eventId")),s=E.lw[t.get("multiPositionType")];return(0,n._1)(Object.keys(e),e,s,new i.Model({id:t.get("outcomeId")}))}return t.get("playercastId")||t.get("outcomeId")}})).filter(Boolean)}currentData(e){const t=d.Z.get(e),s=u.Z.getItemAsJSON(l.Z.KEY_RETAIN_BETSLIP_SELECTION),i=t.get("status")===g.K7.WAITING_FOR_APPROVAL_BY_AAMS,r=i&&(0,a.i0)("receipt.aams.pending");return{title:r||this._getTitle(t),formattedTime:(0,o.$4)(new Date(t.get("placedDate"))),receiptId:e,showPrintButton:(0,c.getData)(c.customerSettings.selector).enablePrintReceipt,retainBetslipSelection:!(!s||!s.retainBetslipSelection),waitingForApprovalString:t.get("hasPBABets")?(0,a.i0)("betslip.pba.waitingForApprovalExtraInfo"):"",stakeAwaitingApprovalInfo:(0,a.i0)("betslipReceipt.awaitingApproval"),showAAMS:i,showAAMSlbl:r||"",outcomeIds:this._getOutcomeIds(t),coupon:t.toJSON()}}}const S=new h},88186:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>E});var r=s(38513),o=s(41672),n=s(1888),a=s(19502),c=s(64365),d=s(46281),u=e([n]);function l(e){return(null==e?void 0:e.checkStatus(c.K7.WAITING_FOR_APPROVAL))||(null==e?void 0:e.checkStatus(c.K7.WAITING_FOR_APPROVAL_BY_AAMS))}n=(u.then?(await u)():u)[0];class p extends r.ip{constructor(){super(),o.Z.on("change:displayState",this.produceDataSync.bind(this))}currentData(){let e;const t=o.Z.get("displayState"),s=o.Z.get("receiptId"),i=d.Z.get(s),r=(null==(u=i)?void 0:u.checkStatus(c.K7.REJECTED))||(null==u?void 0:u.checkStatus(c.K7.REJECTED_BY_AAMS));var u;const p=l(i),E=null==i?void 0:i.get("stake");let g=E?E/1e3:void 0;const h=null==i?void 0:i.get("couponFromAPI");return(r||p)&&(g=i.get("requestedStake")/1e3),t===a.K_.ERROR&&(e=(0,n.T)().type),{displayState:t,errorType:e,couponId:s,totalStake:g,couponFromAPI:h}}}const E=new p;i()}catch(g){i(g)}}))},68291:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>p});var r=s(38513),o=s(21069),n=s(19502),a=s(93851),c=s(79149),d=s(18321),u=e([o]);o=(u.then?(await u)():u)[0];class l extends r.ip{get repositories(){return[o.Z]}onDiffInRepository(e,t){if(!t.changed||0===t.changed.length)return;const s=d.Z.getSelectedTab(),i=t.changed.filter((e=>{const t=e.get("type");return t===n.oP.SINGLE&&s.id===n.mQ.SINGLE||t===n.oP.COMBINATION&&s.id===n.mQ.COMBINATION||[n.oP.SYSTEM,n.oP.PACKAGE].includes(t)&&s.id===n.mQ.SYSTEM})),r=i.find((e=>!0===e.get("isRewardBetPackage")&&!isNaN(e.changed.stake)))||i.find(()||i[0];if(!r)return;const o=r.toJSON();let c;switch(o.type){case n.oP.SINGLE:{const t=a.ot.STAKE_UPDATE_TYPE_SINGLE,s=e.models.filter((e=>e.get("type")===n.oP.SINGLE)).indexOf(r),i=r._previousAttributes.stake;c=this.getSingleOrCombinationStakeModelData({...o,stakeType:t,stakeIndex:s,previousStake:i}),c.outcomeId=o.outcomeId;break}case n.oP.COMBINATION:{const e=a.ot.STAKE_UPDATE_TYPE_COMBINATION,t=0,s=r._previousAttributes.stake;c=this.getSingleOrCombinationStakeModelData({...o,stakeType:e,stakeIndex:t,previousStake:s});break}case n.oP.SYSTEM:case n.oP.PACKAGE:{const t=e.models.filter((e=>[n.oP.SYSTEM,n.oP.PACKAGE].includes(e.get("type")))),s=t.find((e=>!0===e.get("isRewardBetPackage")));if(s){const{id:e,stakeBeforeChange:t,stakeAfterChange:i}=this.getSystemOrPackageStakeModelData(s);c={stakeType:a.ot.STAKE_UPDATE_TYPE_SYSTEM,isFreeBetStake:!0,stakeBeforeChange:t,stakeAfterChange:i,freeBetStakeType:e}}else{const e={};for(const s of t){const{id:t,type:i,stakeBeforeChange:r,stakeAfterChange:o}=this.getSystemOrPackageStakeModelData(s);e[t]={isPackage:i===n.oP.PACKAGE,stakeBeforeChange:r,stakeAfterChange:o,type:t}}c={stakeType:a.ot.STAKE_UPDATE_TYPE_SYSTEM,stakes:e}}break}}this.produce(c)}normalizeStake(e,t=""){return e?e/1e3:t}getSingleOrCombinationStakeModelData({stakeType:e,stakeIndex:t,previousStake:s,stake:i,isFreeBet:r,lastKeyPressed:o}){const n={stakeType:e,stakeIndex:t,stakeBeforeChange:this.normalizeStake(s),stakeAfterChange:this.normalizeStake(i),isFreeBetStake:r};return o&&!r&&(n.keyCode=o),n}getSystemOrPackageStakeModelData(e){const t=e.get("type"),s=t===n.oP.PACKAGE?e.id:c.Xp.indexOf(e.id)+1,i=e._previousAttributes.stake,r=e.get("stake");return{id:s,type:t,stakeBeforeChange:this.normalizeStake(i,NaN),stakeAfterChange:this.normalizeStake(r,NaN)}}}const p=new l;i()}catch(e){i(e)}}))},91115:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>L});var r=s(72346),o=s(64572),n=s(86033),a=s(38513),c=s(94798),d=s(23459),u=s(13272),l=s(18321),p=s(30467),E=s(95791),g=s(8652),h=s(64384),S=s(28564),b=s(19502),_=s(41069),m=s(69656),f=s(97849),v=s(74553),T=s(37661),A=s(4648),I=s(87181),O=s(75449),R=s(67883),y=e([S,R]);[S,R]=y.then?(await y)():y;var Z=new WeakMap;class D extends a.ip{constructor(...e){super(...e),(0,o.Z)(this,"repositories",[u.Z,l.Z,p.Z,{repository:S.Z,callback:"onDiffRetailBetslipData"},{repository:E.Z,callback:"onDiffInValidRewardsRepository"}]),(0,r.Z)(this,Z,{writable:!0,value:),(0,o.Z)(this,"onDiffRetailBetslipData",(()=>{const e=S.Z.getData();(0,O.t6)({name:d.Z.NOTIFICATION_BETSLIP_CHANGED,data:e})}))}subscribeToRepositories(){this.localeSubscription=f.Session.subscribe(v.SessionAPIConstants.LOCALE,this.produceData.bind(this)),this.isLoggedInSubscription=f.Session.subscribe(v.SessionAPIConstants.IS_USER_LOGGED_IN,this.produceData.bind(this)),c.EventBus.subscribe(c.EventKeys.BETSLIP_OUTCOMES_REMOVED,(0,n.Z)(this,Z)),super.subscribeToRepositories()}unsubscribeFromRepositories(){var e,t;null===(e=this.localeSubscription)||void 0===e||e.unsubscribe(),null===(t=this.isLoggedInSubscription)||void 0===t||t.unsubscribe(),c.EventBus.unsubscribe(c.EventKeys.BETSLIP_OUTCOMES_REMOVED,(0,n.Z)(this,Z)),super.unsubscribeFromRepositories()}currentData(){var e,t;const{pinned:s,pinnable:i,...r}=u.Z.getState().toJSON(),o=l.Z.getSelectedTab(),n=p.Z.getSelectedOutcomes(),a=l.Z.toJSON(),c=a.map((e=>({title:(0,m.i0)(e.titleTranslationKey),content:"",enabled:e.enabled,id:e.id}))),d=f.Session.isUserLoggedIn();return r.tabsSelectedIndex=a.findIndex((e=>e.selected)),r.hasFreeBet=this._isFreeBetSelected(),r.eachWayAvailable=h.Z.isEachWayAvailable(p.Z.map((e=>e.get("betofferId")))),o&&(r.selectedTabTitle=o.get("titleTranslationKey"),r.selectedTabId=o.id),r.selectedOutcomes=(null==n?void 0:n.map((e=>e.toJSON())))||[],r.maximized=!r.hidden&&!r.minimized,r.combinedOdds=this._getCombinedOdds(r.selectedOutcomes),r.inBetslipBarcodeMode=(0,I.getData)(I.applicationSettings.selector).betslipBarcodeMode,r.noBetsAddedToBetslipLabel=(0,m.i0)("betslip.info.no_bets_added_to_betslip"),r.containsStartingPriceOutcome=this.containsStartingPriceOutcome(r.selectedOutcomes),r.isPlacingBet=r.displayState===b.K_.PLACING_BET,r.tabs=c,r.clearButtonLabel=(0,m.i0)("betslip.clearBetslip"),r.showToWinOption=(0,R.aU)(),r.showTabs=o.id!==b.mQ.SINGLE||(!(0,I.getData)(I.customerSettings.selector).hideBetslipsTabsForOneSelectedBet||n.length>1),r.useCompressedBetslip=(0,I.getData)(I.customerSettings.selector).useCompressedBetslip,r.showRewards=d&&(0,I.getData)(I.customerSettings.selector).enableFreeBets,r.showNavLinks=!!(0,I.getData)(I.customerSettings.selector).betslipLinks||d&&(null===(e=(0,I.getData)(I.customerSettings.selector).betslip)||void 0===e||null===(t=e.navLinks)||void 0===t?void 0:t.length)>0,r.showOddsActions=d&&p.Z.hasLiveOutcomes()&&f.Session.get(v.SessionAPIConstants.SHOW_ODDS_CHANGE_OPTIONS),r.showMainWidgetContainer=(0,I.getData)(I.widgetTarget.selectByTarget,T.HV).length>0,r.outcomesAddedFromWAPI=n.some((),r}getCombinedOdds(e){let t=e.reduce(((e,t)=>e*t.odds/1e3),1);return(0,_.QS)(t,!0)}isFreeBetSelected(){const e=E.Z.getSelectedReward();return!!e&&g.Z.isFreeBetSelected(e)}}const L=new D;i()}catch(e){i(e)}}))},4722:(e,t,s)=>{s.d(t,{G:()=>n});var i=s(69656),r=s(64365);const o=[];function n(e){e.coupons=e.coupons.map((e=>{const t=e.get("outcomes"),s=o.slice();return(e.get("betCounts")||[]).forEach((e=>{s[e.size]={singularLabel:(0,i.i0)(e.singularLabelKey),pluralLabel:(0,i.i0)(e.pluralLabelKey),size:e.betCount}})),{id:e.id,outcomes:t.map((e=>({label:e.get("betLabel"),event:e.get("eventName"),eventHomeName:e.get("eventHomeName"),eventAwayName:e.get("eventAwayName"),eventId:e.get("eventId"),eventGroups:e.get("eventGroups"),eventStartTime:e.get("startTimeValue"),betofferTypeId:e.get("betofferTypeId"),betofferTypeName:e.get("betofferTypeName"),betofferCriterionLabel:e.get("betofferCriterionLabel"),isLive:e.get("betofferLive"),isBestOddsGuaranteed:e.get("bestOddsGuaranteed"),isRule4Applied:e.get("rule4Applied"),rule4Info:(0,i.i0)("bethistory.outcome.rule4info"),isStartingPrice:e.get("startingPrice"),eachWayTerms:e.get("eachWayTerms"),extraInfo:e.get("extraInfo"),result:e.get("result"),statusLabel:(0,i.i0)(r.T6[e.get("status")]),status:e.get("status"),stake:e.get("stake"),potentialPayout:e.get("potentialPayout"),rejectedStake:e.get("rejectedStake"),formattedStake:e.getStakeFormatted(),formattedPotentialPayout:e.getPotentialPayoutFormatted(),formattedRejectedStake:e.getRejectedStakeFormatted(),payout:e.get("payout"),payoutFormatted:e.getPayoutFormatted(),payoutOdds:e.get("payoutOdds"),payoutOddsFormatted:e.getPayoutOddsFormatted(),playedOdds:e.get("playedOdds"),playedOddsFormatted:e.getPlayedOddsFormatted(),voidReason:e.get("voidReason")}))),isLive:e.isLive(),isFreeBet:e.isFreeBet(),isProfitBoostBet:e.isProfitBoostBet(),isStartingPrice:e.isStartingPrice(),odds:e.getOdds(),oddsFormatted:e.getOddsFormatted(),payout:e.getPayout(),payoutFormatted:e.getPayoutFormatted(),potentialPayout:e.getPotentialPayout(),potentialPayoutFormatted:e.getPotentialPayoutFormatted(),stake:e.getStake(),stakeFormatted:e.getStakeFormatted(),statusType:e.getStatusType(),systemCombinations:s,statusLabel:e.get("status")&&(0,i.i0)(r.T6[e.get("status")]),type:e.get("type"),placedDateTimeStamp:e.get("placedDateTimeStamp")}}))}o.length=12},8956:(e,t,s)=>{s.d(t,{G:()=>l});var i=s(32057),r=s(51679),o=s(4591),n=s(45948);const{SPORT_AMERICAN_FOOTBALL:a,SPORT_BASKETBALL:c,SPORT_ICEHOCKEY:d}=n.Z,u=[a,c,d];const l=e=>{const t=e.id,s=i.Z.get(t);let n=!0;s&&(n=!!s.get("disabled"));const a={QUARTER1:"Q1",QUARTER2:"Q2",QUARTER3:"Q3",QUARTER4:"Q4",OT1:"OT"};if(n)e.disabled=!0;else{const i=s.get("period")||"";e.period=a[i]||i,e.minute=s.get("minute"),e.second=s.get("second"),e.running=s.get("running"),function(e){const t=r.Z.get(e);return t&&u.includes(t.get("sport"))}(t)&&["secondsLeftInMinute","minutesLeftInPeriod"].forEach((t=>{const i=(e=>{const t=parseInt(e,10);if(!isNaN(t)&&t>=0)return t})(s.get(t));void 0!==i&&(e[t]=i)}));const n=s.get("minutesLeftInPeriod"),c=s.get("secondsLeftInMinute");s.get("reversed")&&s.get("source")===o.my.NON_FEED&&Number.isInteger(n)&&Number.isInteger(c)?(e.matchClockMinute=n,e.matchClockSecond=c):(e.matchClockMinute=s.get("minute"),e.matchClockSecond=s.get("second")),e.elapsedPeriodTime=s.get("periodTime"),e.disabled=!1}return e}},91708:(e,t,s)=>{s.d(t,{Z:()=>E});s(84870),s(53985);var i=s(38513),r=s(51679),o=s(32646),n=s(64384),a=s(42929),c=s(45040),d=s(99250),u=s(95039),l=s(97586);class p extends i.Lf{get idType(){return"string"}get decorators(){return[e=>{let[t,s,i]=e.id.split("_");t=parseInt(t,10),i="true"===i;const c=r.Z.get(t);if(e.id=t,e.context=s,this.removedEvents.has(t))e.eventRemoved=!0,this.removedEvents.delete(t);else if(c){let r,c=n.Z.filter(().filter((e=>e.isOfferedForContext(s)));i&&(e.mainOnly=!0,c=c.filter(()),c.length>0&&(r=c.flatMap(().filter(Boolean),r=(0,l.jj)(r).map((e=>o.default.get(e))).filter(Boolean).map((e=>e.toJSON()))),e.betoffers=c.map((e=>{const t=a.Z.getOutcomesByBetofferId(e.id).map((e=>e.toJSON()));return{...e.toJSON(),outcomes:t}})),e.categories=r||[]}}]}onstructor(){super(),this.removedEvents=new Set,this.pendingLiveBOSubscriptionEvents=new Set,this._eventBetoffersSubscriptions=new Map}subscribeToRepositories(){super.subscribeToRepositories(),this.listenTo(r.Z,r.Z.REPOSITORY_ADD,this._onEventAdded)}unsubscribeFromRepositories(){super.unsubscribeFromRepositories(),this.stopListening(r.Z,r.Z.REPOSITORY_ADD)}subscribe(e){super.subscribe(e);const{id:t,context:s,requestSource:i}=e,o=r.Z.get(t);o&&(0,u.Z)(o,s);const a=`${t}_${s}`;if(!this._eventBetoffersSubscriptions.has(a)){const e={params:{id:t,live:s===c.Af.LIVE,requestSource:i},pollingInterval:d.Hb,socketDownPollingInterval:d.dK},u={params:{eventId:t}};this._eventBetoffersSubscriptions.set(a,{pollSubscription:e,pushSubscription:u}),(s===c.Af.PRE_MATCH||s===c.Af.LIVE&&o)&&r.Z.addSubscription(r.Z.BETOFFERS,e),s===c.Af.LIVE&&(o&&!0===o.get("openForLiveBetting")?n.Z.addSubscription(n.Z.BETOFFERS,u):this.pendingLiveBOSubscriptionEvents.add(t))}}unsubscribe(e){super.unsubscribe(e);const{id:t,context:s}=e,i=`${t}_${s}`;if(this._eventBetoffersSubscriptions.has(i)){const{pollSubscription:e,pushSubscription:t}=this._eventBetoffersSubscriptions.get(i);r.Z.removeSubscription(r.Z.BETOFFERS,e),n.Z.removeSubscription(n.Z.BETOFFERS,t),this._eventBetoffersSubscriptions.delete(i)}s===c.Af.LIVE&&this.pendingLiveBOSubscriptionEvents.delete(t)}idForModel(e,t){switch(t){case n.Z:{const t=e.get("eventId");return[c.Af.LIVE,c.Af.PRE_MATCH].flatMap((s=>!!e.isOfferedForContext(s)&&[`${t}_${s}_true`,`${t}_${s}_false`])).filter(Boolean)}case o.default:{const t=e.get("sportId");let s;if(t)s=this._eventIdsForSportOrLeagueId(t);else{const t=e.get("leagueId");s=this._eventIdsForSportOrLeagueId(null,t)}return s.flatMap((e=>[`${e}_${c.Af.LIVE}_true`,`${e}_${c.Af.LIVE}_false`,`${e}_${c.Af.PRE_MATCH}_true`,`${e}_${c.Af.PRE_MATCH}_false`]))}case a.Z:{const t=e.get("betofferId"),s=n.Z.get(t);if(s){const e=s.get("eventId");return[c.Af.LIVE,c.Af.PRE_MATCH].flatMap((t=>!!s.isOfferedForContext(t)&&[`${e}_${t}_true`,`${e}_${t}_false`])).filter(Boolean)}break}case r.Z:return[`${e.id}_${c.Af.LIVE}_true`,`${e.id}_${c.Af.LIVE}_false`,`${e.id}_${c.Af.PRE_MATCH}_true`,`${e.id}_${c.Af.PRE_MATCH}_false`]}}nDiffInRepository(e,t){if(e===r.Z){if(t.removed.length>0){const e=t.removed.map((e=>e.id));this.removedEvents=new Set([...this.removedEvents,...e])}for(const e of t.changed)if(this.pendingLiveBOSubscriptionEvents.has(e.id)&&!0===e.get("openForLiveBetting")){for(const t of Object.keys(this.subscriptions)){let[s,i]=t.split("_");if(s=parseInt(s,10),s===e.id&&i===c.Af.LIVE){const e=`${s}_${i}`;if(this._eventBetoffersSubscriptions.get(e)){const{pollSubscription:t}=this._eventBetoffersSubscriptions.get(e);r.Z.removeSubscription(r.Z.BETOFFERS,t),r.Z.addSubscription(r.Z.BETOFFERS,t);const i={params:{eventId:s}};n.Z.addSubscription(n.Z.BETOFFERS,i),this._eventBetoffersSubscriptions.set(e,{pollSubscription:t,pushSubscription:i})}}}this.pendingLiveBOSubscriptionEvents.delete(e.id)}}super.onDiffInRepository(e,t)}_eventIdsForSportOrLeagueId(e,t){return this.allIds().map((e=>{let[t]=e.split("_");return parseInt(t,10)})).filter((s=>{const i=r.Z.get(s);if(i){const s=i.get("path");if(e)return s[0].id===e;if(t)return s[s.length-1].id===t}}))}_onEventAdded(e){const t=Object.keys(this.subscriptions);e.forEach((e=>{t.filter(().forEach((t=>{const[,s]=t.split("_");(0,u.Z)(e,s)}))}))}}const E=new p},59463:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(72346),r=s(64572),o=s(13092),n=s(86033),a=s(38513),c=s(51679),d=new WeakMap,u=new WeakMap;class l extends a.Lf{constructor(...e){super(...e),(0,r.Z)(this,"repositories",[c.Z]),(0,i.Z)(this,d,{writable:!0,value:{}}),(0,i.Z)(this,u,{writable:!0,value:[]})}currentData(e){const t={id:e};if((0,n.Z)(this,u).includes(e))t.eventRemoved=!0,(0,o.Z)(this,u,(0,n.Z)(this,u).filter((t=>t!==e)));else{const e=c.Z.get(t.id);e&&(t.name=e.get("displayedName"),t.startTimestamp=e.get("startTimestamp"),t.sport=e.get("sport"),t.path=e.get("path").map(())}return t}onAddedSubscriptionsForId(e){c.Z.get(e)||((0,n.Z)(this,d)[e]={params:{id:e}},c.Z.addSubscription(c.Z.BETOFFERS,(0,n.Z)(this,d)[e]))}onRemovedSubscriptionsForId(e){c.Z.removeSubscription(c.Z.BETOFFERS,(0,n.Z)(this,d)[e]),delete(0,n.Z)(this,d)[e]}shouldPropagateModelChange(e){return"displayedName"in e.changed||"startTimestamp"in e.changed}onDiffInRepository(e,t){if(t.removed.length>0){const e=t.removed.map((e=>e.id));(0,n.Z)(this,u).push(...e)}super.onDiffInRepository(e,t)}}const p=new l},40384:(e,t,s)=>{s.d(t,{Z:()=>b});var i=s(72346),r=s(64572),o=s(86033),n=s(13092),a=s(38513),c=s(51679),d=s(23645),u=s(45040),l=s(99250),p=s(38654);const E={pollingInterval:l.L0};var g=new WeakMap,h=new WeakMap;class S extends a.Lf{constructor(...e){super(...e),(0,r.Z)(this,"repositories",[c.Z,d.Z]),(0,i.Z)(this,g,{writable:!0,value:{}}),(0,i.Z)(this,h,{writable:!0,value:[]})}subscribeToRepositories(){c.Z.addSubscription(c.Z.LIVE,E),super.subscribeToRepositories()}unsubscribeFromRepositories(){c.Z.removeSubscription(c.Z.LIVE,E),(0,n.Z)(this,h,[]),super.unsubscribeFromRepositories()}onAddedSubscriptionsForId(e){c.Z.get(e)||((0,o.Z)(this,g)[e]={params:{id:e}},c.Z.addSubscription(c.Z.BETOFFERS,(0,o.Z)(this,g)[e]))}onRemovedSubscriptionsForId(e){c.Z.removeSubscription(c.Z.BETOFFERS,(0,o.Z)(this,g)[e]),delete(0,o.Z)(this,g)[e]}currentData(e){const t={id:e};if((0,o.Z)(this,h).includes(e))t.eventRemoved=!0,(0,n.Z)(this,h,(0,o.Z)(this,h).filter(());else{const s=c.Z.get(e);s&&(t.type=s.get("type"),t.score=s.get("score"),t.type===u.tw.COMPETITION?t.type=u._q.COMPETITION:t.type===u.tw.MATCH&&(0,p.M)(t,s.get("sport")),t.sport=s.get("sport"))}return t}onDiffInRepository(e,t){if(e===c.Z&&t.removed.length>0){const e=t.removed.map((e=>e.id));(0,o.Z)(this,h).push(...e)}super.onDiffInRepository(e,t)}}const b=new S},61769:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(38513),r=s(32057),o=s(8956),n=s(99250);class a extends i.Lf{get repositories(){return[r.Z]}bscribeToRepositories(){r.Z.addSubscription(r.Z.MATCH_CLOCKS,this.matchClocksRepoPushSubscription),super.subscribeToRepositories()}unsubscribeFromRepositories(){r.Z.removeSubscription(r.Z.MATCH_CLOCKS,this.matchClocksRepoPushSubscription),super.unsubscribeFromRepositories()}subscribe(e){super.subscribe(e);const{subscriptionFromWAPI:t,id:s}=e;if(t&&!this.repositoryLiveDataSubscriptions[s]){const e={params:{id:s},pollingInterval:n.Hb};this.repositoryLiveDataSubscriptions[s]=e,r.Z.addSubscription(r.Z.LIVE_DATA,e)}}unsubscribe(e){super.unsubscribe(e);const t=this.idForOptions(e);if(this.repositoryLiveDataSubscriptions[t]){const e=this.repositoryLiveDataSubscriptions[t];r.Z.removeSubscription(r.Z.LIVE_DATA,e),delete this.repositoryLiveDataSubscriptions[t]}}}const c=new a},58046:(e,t,s)=>{s.d(t,{Z:()=>l,o:()=>u});var i=s(31440),r=s(81695),o=s(88371),n=s(51679),a=s(82369),c=s(99250),d=s(48401);class u extends i.Z{subscribeToLiveData(e){const t=n.Z.get(e.id);if(t&&t.isLive()){const s={id:e.id},i=this.idForOptions(e),o={params:s,pollingInterval:c.Hb,socketDownPollingInterval:c.cQ};e.showExtraInfo&&!this.liveDataSubscriptions[i]&&(this.liveDataSubscriptions[i]=o,n.Z.addSubscription(n.Z.LIVE_DATA,o)),(0,r.X6)(t,e.context)&&!this.eventStateUpdatesSubscriptions[i]&&(this.eventStateUpdatesSubscriptions[i]=o,a.Z.addSubscription(a.Z.EVENT_STATE_UPDATES,o),a.Z.addSubscription(a.Z.EVENT_STATE,o))}}currentData(e){const[t]=e.split("_"),s=parseInt(t,10),i={id:s},r=n.Z.get(s);if(r){(0,o.G)(i);const e=r.get("sport");i.isLive=r.isLive(),i.isSetBased=(0,d.UP)(e),i.willBeLive=r.willBeLive(),i.participantsNameLayout=r.getParticipantsNameLayout(),i.group=r.get("group")}return i}}const l=new u},31440:(e,t,s)=>{s.d(t,{Z:()=>E});var i=s(64572),r=s(38513),o=s(51679),n=s(23645),a=s(16730),c=s(82369),d=s(25536),u=s(99250),l=s(48401);const p={pollingInterval:u.L0},E=class extends r.Lf{constructor(...e){super(...e),(0,i.Z)(this,"idType","string"),(0,i.Z)(this,"decorators",[]),(0,i.Z)(this,"repositories",[o.Z,n.Z,a.Z,c.Z]),(0,i.Z)(this,"liveDataSubscriptions",{}),(0,i.Z)(this,"eventStateUpdatesSubscriptions",{}),(0,i.Z)(this,"onEventAdded",(e=>{this.allIds().forEach((t=>{e.forEach((e=>{t.startsWith(e.id)&&this.subscriptions[t].forEach(()}))}))}))}subscribeToRepositories(){this.listenTo(o.Z,o.Z.REPOSITORY_ADD,this.onEventAdded),o.Z.addSubscription(o.Z.LIVE,p),super.subscribeToRepositories()}unsubscribeFromRepositories(){this.stopListening(o.Z,o.Z.REPOSITORY_ADD),o.Z.removeSubscription(o.Z.LIVE,p),super.unsubscribeFromRepositories()}nsubscribe(e){super.unsubscribe(e);const t=this.idForOptions(e);if(this.liveDataSubscriptions[t]){const e=this.liveDataSubscriptions[t];delete this.liveDataSubscriptions[t],o.Z.removeSubscription(o.Z.LIVE_DATA,e)}if(this.eventStateUpdatesSubscriptions[t]){const e=this.eventStateUpdatesSubscriptions[t];delete this.eventStateUpdatesSubscriptions[t],c.Z.removeSubscription(c.Z.EVENT_STATE_UPDATES,e),c.Z.removeSubscription(c.Z.EVENT_STATE,e)}}subscribeToLiveData(e){const t=o.Z.get(e.id);if(t&&t.isLive()){const t={id:e.id},s=this.idForOptions(e),i={params:t,pollingInterval:u.Hb,socketDownPollingInterval:u.cQ};e.showExtraInfo&&!this.liveDataSubscriptions[s]&&(this.liveDataSubscriptions[s]=i,o.Z.addSubscription(o.Z.LIVE_DATA,i))}}currentData(e){const[t]=e.split("_"),s=parseInt(t,10),i={id:s},r=o.Z.get(s);if(r){const e=r.get("sport");(0,d.G)(i),i.isLive=r.isLive(),i.isSetBased=(0,l.UP)(e),i.willBeLive=r.willBeLive(),i.participantsNameLayout=r.getParticipantsNameLayout()}return i}idForModel(e,t){let s=e.id;return t===c.Z&&(s=e.get("eventId")),this.allIds().filter(()}},81240:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(64572),r=s(51679),o=s(58046),n=s(25536),a=s(68410),c=s(88371),d=s(81695),u=s(48401),l=s(45948);const{SPORT_FOOTBALL:p}=l.Z;class E extends o.o{constructor(...e){super(...e),(0,i.Z)(this,"getDecorator",((e,t)=>(0,d.X6)(e,t)?c.G:e.get("sport")===p?a.G:n.G))}currentData(e){const[t,s]=e.split("_"),i=parseInt(t,10),o={id:i},n=r.Z.get(i);if(n){this.getDecorator(n,s)(o);const e=n.get("sport");o.isLive=n.isLive(),o.isSetBased=(0,u.UP)(e),o.willBeLive=n.willBeLive(),o.participantsNameLayout=n.getParticipantsNameLayout(),o.group=n.get("group")}return o}}const g=new E},1888:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{T:()=>m});var r=s(23072),o=s(61182),n=s(66438),a=s(90990),c=s(19502),d=s(9029),u=s(21069),l=s(18321),p=s(87181),E=s(41672),g=s(10093),h=s(69656),S=s(63485),b=e([u,g]);[u,g]=b.then?(await b)():b;const _=e=>e.length&&e.at(0).get("type")===c.At.VET_INVALID_BET;function m(){const e=o.Z,t=n.Z,s=a.Z,i=r.Z,b=d.Z,m=_(t)&&s.length>0;let f={};e.length>0?f=e.at(0).toJSON():t.length>0&&!m?f=t.at(0).toJSON():s.length>0?(f=s.at(0).toJSON(),f.couponRowErrors=s.map(()):i.length>0&&(f=i.at(0).toJSON(),f.type=f.key),f.type===c.At.VET_PBA_NOT_ALLOWED&&t.length>0&&(f.values=t.at(0).get("values")),S.Z.length>0?f.secondaryApproval=S.Z.at(0).get("secondaryApproval"):f.secondaryApproval=!1,f.updateStake=(0,p.getData)(p.customerSettings.selector).updateStakeWhenStakeTooLow,f.selectedTabId=l.Z.getSelectedTab().id,f.hasSelectedTeaser=E.Z.hasSelectedTeaser(),f.stakesLength=u.Z.getStakesForTab(f.selectedTabId).length,f.paragraphs=[],f.primaryActionText=(0,h.i0)("placeBetErrors.actionButtons.back");const v=g.Z.at(0),T=null==v?void 0:v.get("rewards");return(null==T?void 0:T.length)>0&&(f.rewardType=T[0].rewardType),b.length>0&&(f.customerError=b.at(0).get("code")),f.type===c.At.VET_STAKE_TOO_HIGH&&f.stakesLength>1&&(f.updateStake=!1),f.type===c.At.VET_STAKE_LIVE_TOO_HIGH&&f.selectedTabId===c.mQ.SYSTEM&&(f.updateStake=!1),f}i()}catch(f){i(f)}}))},71002:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{J:()=>S});var r=s(30467),o=s(41672),n=s(95791),a=s(64384),c=s(21069),d=s(79149),u=s(89971),l=s(19502),p=s(76118),E=s(87181),g=e([c]);function h(e,t){const s=(0,u.RK)(e,[]).filter((e=>e>0)),i=Object.values(d.DF);return t.reduce(((e,t)=>{const r=i.indexOf(t);return e+s[r]}),0)}function S(e){const t=c.Z.get(e),s=t&&t.get("eachWayDisabled")||!1,i=r.Z.getSelectedOutcomes(),u=o.Z.get("mobileKeyboardId"),g=o.Z.get("touchKeyboardId"),S=n.Z.getSelectedReward();return d.qU.filter(().map((t=>({id:t.id,translationKey:t.translationKey,combinationSizeCount:h(i,t.combination),type:l.oP.PACKAGE,detailsOpen:!1,displayMobileKeyboard:u===t.id&&(0,p.S)(),displayTouchKeyboard:g===e&&(0,E.getData)(E.applicationSettings.selector).retailMode,eachWayAvailable:a.Z.isEachWayAvailable(r.Z.map((e=>e.get("betofferId")))),eachWayDisabled:s,populatedByFreeBet:!!S&&S.get("selectedBetPackageId")===t.id})))[0]}c=(g.then?(await g)():g)[0],i()}catch(b){i(b)}}))},38673:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{J:()=>m});var r=s(30467),o=s(18321),n=s(66531),a=s(41672),c=s(21069),d=s(64384),u=s(19502),l=s(79149),p=s(89971),E=s(76118),g=s(87181),h=e([c]);function S(e){const t=c.Z.get(e);return t&&t.get("eachWayDisabled")||!1}function b(e,t,s,i,r,o,n){const c=a.Z.get("mobileKeyboardId"),d=a.Z.get("touchKeyboardId");return{translationKey:1===r?l.pE[e]:l.EP[e],id:t,type:s,detailsOpen:i,combinationSizeCount:s===u.mQ.SYSTEM?r:void 0,displayMobileKeyboard:c===t&&(0,E.S)(),displayTouchKeyboard:d===t&&(0,g.getData)(g.applicationSettings.selector).retailMode,eachWayAvailable:o,eachWayDisabled:n,populatedByFreeBet:!1}}function _(e,t){const s=n.Z.getBetErrorIndices(),i=(0,p.RK)(e,s).filter((),o=Object.keys(l.DF).find((),c=t===a.Z.get("systemDetailsId");return b(o,t,u.mQ.SYSTEM,c,i[o-1],d.Z.isEachWayAvailable(r.Z.map((e=>e.get("betofferId")))),S(t))}function m(e){const t=r.Z.map((),s=o.Z.getSelectedTab().get("id");return s===u.mQ.COMBINATION?b(t.length,u.mQ.COMBINATION,u.mQ.COMBINATION,!1,1,d.Z.isEachWayAvailable(r.Z.map(()),S(u.mQ.COMBINATION)):s===u.mQ.SYSTEM?_(t,e):[]}c=(h.then?(await h)():h)[0],i()}catch(f){i(f)}}))},95039:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(15388),r=s(32646),o=s(45040);function n(e,t){const s=e.get("path"),n=s[s.length-1].id,a=e.get("sport"),c=s[0].id,d=t===o.Af.LIVE,u=d?[i.LQ.LIVE,i.LQ.INSTANT,i.LQ.SELECTED_LIVE]:[i.LQ.PRE_MATCH,i.LQ.SELECTED_PRE_MATCH];r.default.find({sportId:c,live:d})||r.default.addSubscription(r.default.GENERAL_CATEGORY_DEFINITIONS,{params:{id:n,categoryGroupNames:u,live:d,eventId:e.id,sport:a,sportId:c}})}},23072:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(7298);class r extends i.Model{defaultsvar o=s(38513),n=s(94798),a=s(19502);class c extends o._j{nitialize(){super.initialize(...arguments),n.EventBus.subscribe(n.EventKeys.BETSLIP_ADD_FEEDBACK,this._onFeedbackReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.PLACE_BET_CLEAR_ALL_ERRORS,this.reset.bind(this))}_onFeedbackReceived(e){n.EventBus.send(n.EventKeys.PLACE_BET_CLEAR_ALL_ERRORS),"object"==typeof e?this.set(e):this.set({key:e,displayState:a.K_.ERROR})}}const d=new c},63485:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(38513),r=s(94798);class o extends i._j{constructor(){super(),r.EventBus.subscribe(r.EventKeys.BETSLIP_SECONDARY_APPROVAL_RECEIVED,this._onSecondaryApprovalReceived.bind(this)),r.EventBus.subscribe(r.EventKeys.BETSLIP_SECONDARY_APPROVAL_CLEARED,this._clearSecondaryApproval.bind(this))}_clearSecondaryApproval(){this.set([])}const n=new o},66438:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(38513),r=s(94798);class o extends i._j{constructor(){super(),r.EventBus.subscribe(r.EventKeys.PLACE_BET_BET_ERRORS_RECEIVED,this._onBetErrorsReceived.bind(this)),r.EventBus.subscribe(r.EventKeys.BETSLIP_CLOSE_ERROR,this._clearBetErrors.bind(this)),r.EventBus.subscribe(r.EventKeys.PLACE_BET_CLEAR_ALL_ERRORS,this._clearBetErrors.bind(this))}onst n=new o},90990:(e,t,s)=>{s.d(t,{Z:);var i=s(64572),r=s(38513),o=s(94798);class n extends r._j{constructor(){super(),(0,i.Z)(this,"_clearCouponRowErrors",(()=>{this.set([])})),(0,i.Z)(this,"_onCouponRowErrorsReceived",(e=>{this.set(e)})),o.EventBus.subscribe(o.EventKeys.PLACE_BET_COUPON_ROW_ERRORS_RECEIVED,this._onCouponRowErrorsReceived),o.EventBus.subscribe(o.EventKeys.BETSLIP_CLOSE_ERROR,this._clearCouponRowErrors),o.EventBus.subscribe(o.EventKeys.PLACE_BET_CLEAR_ALL_ERRORS,this._clearCouponRowErrors)}}const a=new n},9029:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(38513),r=s(94798);class o extends i._j{constructor(){super(),r.EventBus.subscribe(r.EventKeys.PLACE_BET_CUSTOMER_ERRORS_RECEIVED,this._onCustomerErrorsReceived.bind(this)),r.EventBus.subscribe(r.EventKeys.BETSLIP_CLOSE_ERROR,this._clearCustomerErrors.bind(this)),r.EventBus.subscribe(r.EventKeys.PLACE_BET_CLEAR_ALL_ERRORS,this._clearCustomerErrors.bind(this))}_clearCustomerErrors(){this.set([])}_onCustomerErrorsReceived(e){this.set(e)}}const n=new o},61182:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(38513),r=s(94798);class o extends i._j{constructor(){super(),r.EventBus.subscribe(r.EventKeys.PLACE_BET_GENERAL_ERRORS_RECEIVED,this._onGeneralErrorsReceived.bind(this)),r.EventBus.subscribe(r.EventKeys.BETSLIP_CLOSE_ERROR,this._clearGeneralErrors.bind(this)),r.EventBus.subscribe(r.EventKeys.PLACE_BET_CLEAR_ALL_ERRORS,this._clearGeneralErrors.bind(this))}_clearGeneralErrors(){this.set([])}_onGeneralErrorsReceived(e){this.set(e)}}const n=new o},81707:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(7298),r=s(94798),o=s(48164);class n extends i.Model{get defaultsetActiveType(){return this.get("activeType")}class a extends i.Collection{get model(){return n}constructor(){super(),r.EventBus.subscribe(r.EventKeys.ACTIVE_EVENT_TYPES_RECEIVED,this._activeEventTypesReceived.bind(this))}_activeEventTypesReceivedconst c=new a},10093:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var r=s(38513),o=s(94798),n=s(7298),a=s(94378),c=s(8299),d=s(90436),u=s(75449),l=s(23459),p=e([a]);a=(p.then?(await p)():p)[0];class E extends n.Model{defaults(){return{subscription:void 0,createdAt:void 0}}}class g extends r.IX{et PLACE_BET(){return"place-bet"}et services(){return{[`${this.PLACE_BET}`]:c.Z,[`${this.VALIDATE_BET}`]:d.Z}}constructor(){super(),o.EventBus.subscribe(o.EventKeys.REQUEST_COUPON_RECEIVED,this._onRequestCouponReceived.bind(this)),o.EventBus.subscribe(o.EventKeys.PLACE_BET_REQUEST_COMPLETED,this._onPlaceBetRequestCompleted.bind(this)),this._resetPlaceBetSubscription()}tCopyOfCoupon(){return this.at(0)&&this.at(0).clone()}_serializeSubscription(e){const t=JSON.parse(JSON.stringify(e));return t.postParams&&t.postParams.callStack&&delete t.postParams.callStack,JSON.stringify(t)}_addPlaceBetSubscription(e){return!!this.isPlaceBetSubscriptionAllowed(e)&&(this._currentPlaceBetSubscription=e,this._lastPlaceBetSubscription=new E({createdAt:this._getTime(),subscription:this._serializeSubscription(e)}),e.isPBA||(0,u.t6)({name:l.Z.NOTIFICATION_BET_BEGIN_PLACING}),super.addSubscription(this.PLACE_BET,e),!0)}_onPlaceBetRequestCompleted(){this.removeSubscription(this.PLACE_BET,this._currentPlaceBetSubscription),this._currentPlaceBetSubscription=void 0}sPlaceBetSubscriptionAllowed(e,t=1e3){return"POST"===e.method&&(!this._currentPlaceBetSubscription&&("object"==typeof e&&(e=this._serializeSubscription(e)),!this._lastPlaceBetSubscription||(this._lastPlaceBetSubscription.get("subscription")!==e||this._lastPlaceBetSubscription.get("createdAt")+t<this._getTime())))}addSubscription(e,t){if(e===this.PLACE_BET)return this._addPlaceBetSubscription(t);super.addSubscription(e,t)}}const h=new g;i()}catch(e){i(e)}}))},28564:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>F});var r=s(64572),o=s(38513),n=s(30467),a=s(41672),c=s(18321),d=s(21069),u=s(42929),l=s(51679),p=s(62958),E=s(95791),g=s(8652),h=s(3646),S=s(2701),b=s(96867),_=s(71002),m=s(38673),f=s(10189),v=s(69656),T=s(41069),A=s(97849),I=s(74553),O=s(19502),R=s(71525),y=s(81679),Z=s(15388),D=s(33882),L=s(94798),P=s(87181),B=s(82862),C=s(65584),N=s(77837),k=e([d,_,m,D,C]);[d,_,m,D,C]=k.then?(await k)():k;class w extends o._j{constructor(){super(),(0,r.Z)(this,"generateDataForOTC",(()=>{const e=n.Z.getSelectedOutcomeIds(),t=c.Z.getSelectedTab(),s=t.id,i={};return e&&e.length>0&&(i.selectedTab={id:s,translation:(0,v.i0)(t.get("titleTranslationKey"))},i.outcomes=[],e.forEach((e=>{const t=n.Z.get(e),r=this.getDataFromReposForOutcome(t,s);r&&i.outcomes.push(r)}))),s!==O.mQ.COMBINATION&&s!==O.mQ.SYSTEM||(i.systemStakes=this.getSystemStakes()),s===O.mQ.SYSTEM&&(i.systemPackageStakes=this.getSystemPackageStakeInputs()),i.summary=this.getSummaryDetails(s),i})),(0,r.Z)(this,"generateAndSendData",(()=>{let e={};if((0,P.getData)(P.applicationSettings.selector).otcMode)e=this.generateDataForOTC();else{const t=n.Z.getSelectedOutcomes();e.outcomes=t.map((e=>e.id))}this.add({id:"betslipData",data:e},{merge:!0})})),(0,r.Z)(this,"hasBeenValidated",(()=>{const e=a.Z.hasValidationCompleted();return e&&e!==a.Z.previous("validationCompleted")})),(0,r.Z)(this,"onBetslipStateDiff",(),(0,r.Z)(this,"getDataFromReposForOutcome",((e,t)=>{const s=l.Z.get(e.get("eventId")),i=u.Z.getOutcome(e.get("id")),r=i.getBetOffer();return r?Object.assign({},this.getEventData(s),this.getBetOfferData(i,r),this.getOutcomeDetails(i,r,s),this.getSingleStake(e.get("id"),t)):null})),(0,r.Z)(this,"getEventData",(),(0,r.Z)(this,"getBetOfferData",((e,t)=>{const s=t.get("eachWay");let i;return s&&s.terms&&(i=`${(0,v.i0)("betoffer.eachwayterms")} ${s.terms}`),{criteria:this.getBetOfferCriterion(e,t),betofferType:t.get("betofferType"),suspended:t.get("suspended"),eachWayText:i,extraInfo:t.get("extra")?t.get("extra"):void 0,live:t.isConsideredLiveBetting()}})),(0,r.Z)(this,"getTeaserPoints",((e,t,s)=>{const i=a.Z.getSelectedTeaserId();return(0,h.H6)()&&i!==O.zT&&t&&s?(0,h.NR)(t,e,i):null})),(0,r.Z)(this,"getOutcomeDetails",((e,t,s)=>{const i=(0,P.getData)(P.customerSettings.selector).enableOutcomeLabelHelper,r={outcomeId:e.get("id"),betOffer:t.toJSON(),event:s.toJSON(),translations:(0,N.ZV)()};return{odds:(0,T.u6)(e.get("odds")),outcomeType:e.get("type"),outcomeLabel:i?(0,B.getOutcomeLabel)(r):e.getLabel(t,s,p.Z),stakeLabel:e.getStakeLabel(),requiresOddsApproval:e.get("odds")!==e.get("approvedOdds"),teaserPoints:this.getTeaserPoints(e,t,s)}})),(0,r.Z)(this,"getFormattedStake",(e=>e&&e.get("valid")?(0,R.WU)(e.get("stake"),y.uy):void 0)),(0,r.Z)(this,"getSingleStake",((e,t)=>{if(t===O.mQ.SINGLE){const t=d.Z.get(`outcome-${e}`);if(this.getFormattedStake(t))return{stake:this.getFormattedStake(t)}}})),(0,r.Z)(this,"getSystemStakes",(()=>{const e=(0,S.J)();let t=[];return e.forEach((e=>{const{id:s}=e,{translationKey:i,combinationSizeCount:r}=(0,m.J)(s),o=d.Z.get(s);t.push({label:(0,v.i0)(i),combinationSizeCount:r||void 0,stake:this.getFormattedStake(o)})})),t})),(0,r.Z)(this,"getSummaryDetails",(e=>{const t=n.Z.getSelectedOutcomes(),s=a.Z.hasSelectedTeaser(),i=this.isFreeBetSelected();let r,o=0,c=0;if(e===O.mQ.SYSTEM)o=(0,D.Lt)(t,!0),c=(0,D.Hm)(t);else{o=(0,P.getData)(P.customerSettings.selector).tempUseStakeAndOddsHelpers?(0,B.getTotalStake)((0,C.DF)(t,!0)):(0,D.ml)(t,!0),c=(0,D.a)(t)}if(s){const e=a.Z.getSelectedTeaserId(),s=(0,h.ET)(t,e);r=(0,D.r8)(s),c=(0,D.a)(s)}else r=(0,D.r8)(t);return{unformattedTotalStake:o,totalStake:(0,R.WU)(o,y.uy),potentialPayout:(0,R.WU)(c,y.uy),totalOdds:r.totalOdds,isCashoutAvailable:(0,D.zJ)(t),hasTeaser:s,isFreeBet:i}})),(0,r.Z)(this,"getSystemPackageStakeInputs",(()=>{const e=(0,b.J)();let t=[];return e.forEach((e=>{const{id:s}=e,{translationKey:i,combinationSizeCount:r}=(0,_.J)(s),o=d.Z.get(s);t.push({label:(0,v.i0)(i),combinationSizeCount:r||void 0,stake:this.getFormattedStake(o)})})),t})),(0,P.getData)(P.applicationSettings.selector).retailMode&&(this.listenTo(n.Z,"change",this.generateAndSendData),this.listenTo(d.Z,"change",this.generateAndSendData),this.listenTo(c.Z,"change",this.generateAndSendData),this.listenTo(u.Z,"change",this.onOutcomesDiff),this.listenTo(a.Z,"change",this.onBetslipStateDiff)),A.Session.subscribe(I.SessionAPIConstants.ODDS_FORMAT,this.generateAndSendData.bind(this)),L.EventBus.subscribe(L.EventKeys.FREE_BET_SELECTED,this.generateAndSendData.bind(this))}isFreeBetSelected(){const e=E.Z.getSelectedReward();return!!e&&g.Z.isFreeBetSelected(e)}getData(){return this.getByIds(["betslipData"])[0].get("data")}onOutcomesDiff(e){n.Z.getSelectedOutcomeIds().includes(e.attributes.id)&&this.generateAndSendData()}getBetOfferCriterion(e,t){let s=t.get("criterion")&&t.get("criterion").label;return(0,f.AY)(e.id)?s=e.getDescription():t.get("betofferType").id===Z.i0.SCORER.id?s=`${s} (${e.get("criterion").name})`:t.get("betofferType").id===Z.i0.YES_NO.id&&e.get("participant")&&(s=`${s}: ${e.get("participant")}`),s}}const F=new w;i()}catch(e){i(e)}}))}}]);
//# sourceMappingURL=kambi-chunk-client-api-30c3a00b.6a67bb2675bc7082d7d0.js.map