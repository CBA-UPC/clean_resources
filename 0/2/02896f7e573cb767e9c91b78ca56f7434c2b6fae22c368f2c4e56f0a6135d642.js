"use strict";(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[5360],{22247:65777:(e,a,t)=>{t.d(a,{Ou:()=>c});var r=t(66062),i=t(18274),s=t(55752),n=t.n(s),d=t(5663),o=t.n(d),p=t(96748);var c=(0,i.H)((e=>function(){var a=(0,r.Z)((function*(a,t,r){var{fetchr:i}=r;if(!e)return null;if(!n()(t(),["bloggerState","bloggerMap",e,"attribute","isOfficial"],!1))return null;var s=n()(t(),["adState","pcOfficialBloggerMap",e],{});if(!o()(s))return null;try{var d=yield i.read("pcOfficialAdTags").params({amebaId:e}).end();return a(e,d.data))}catch(c){return a(function(e,a){return{type:p.s,payload:{amebaId:e,error:a},error:!0}}(e,c))}}));return ()))},75360:(e,a,t)=>{t.r(a),t.d(a,{default:);var r,i,s,n,d,o=t(3e4),p=t(66062),c=(t(91938),t(76955)),l=t(55752),u=t.n(l),h=t(29466),m=t.n(h),g=t(5663),f=t.n(g),b=t(54342),A=t.n(b),v=t(66948),y=t(97175),_=t(73614),I=t(65777),P=t(51650),R=t(93218),S=t(22698),F=t(3710),w=t(22247),B=t(70749),T=t(31289),N=t(7430);function k(){return(k=(0,p.Z)((function*(e){var{dispatch:a,getState:t,match:r}=e,{params:i,pathname:s}=r,n=i.amebaId,d=yield a((0,_.Rs)(n));if(!d||!d.error){var o=u()(t(),["bloggerState","bloggerMap",n,"blog"]),p=t().bloggerState.blogMap[o];p&&p.blog_id&&(yield Promise.all([a((0,I.Ou)(n)),a((0,T.QG)(s,i))]))}}))).apply(this,arguments)}var O=(0,P.lB)(["match","location"])(r=(0,v.$j)((function(e,a){var{match:t,location:r}=a,{pathname:i}=r,{params:s,route:n}=t,{amebaId:d,entryId:o}=s,p=e.adState,c=e.bloggerState,l=e.raichoAdState,h=c.bloggerMap[d]||{},m=h.attribute||{},g=(0,S.pY)(h),b=m.isOfficial,v=(h.blog_genre||{}).genre_code||"",y=h.advertise_dto||{},_="enable"===(y.google_ad_sense||""),I="enable"===(y.google_ad_manager||""),P=A()({adxOk:"".concat(_),ameba_id:d,gender:g,genre:v},f()),R=(p.pcOfficialBloggerMap[d]||{}).premiumBannerSide||{},F=e.deviceState.isBotAccess;return{amebaId:d,gender:g,rchAd:u()(l,["raichoAdMap",w.Ac,"own_side_panel"],null),entryId:o,serviceId:b?"official":"general",pathname:i,pageType:n.pageType,attribute:m,isBotAccess:F,isGamEnabled:I,officialPremiumBannerSide:R,targetingParams:P}}),((e,a)=>{var{match:t}=a;return{fetchRchAd:()=>{e((0,F.OX)(w.Ac,w.zZ,t.params.amebaId,{useAmebaId:!0,useCache:!0}))},trackRchTapLog:function(){e((0,F.tJ)(...arguments))},trackRchInviewLog:function(){for(var a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];e((0,F.xs)(...t,{contentType:"ownedBanner"}))}}}))(r=(0,y.provideHooks)({done:)((s=i=class extends c.Component{onstructor(e){super(e),this.handleDFPNotFound=()=>{"sub_a"===this.props.subType&&this.props.fetchRchAd(),this.setState({isDFPNotFound:!0,showRaichoAd:!0})},this.handleOnDFPRendered=()=>{this.dfpRef.current.clientHeight<=250&&(this.props.fetchRchAd(),this.setState({showRaichoAd:!0}))},this.dfpRef=c.createRef(),this.state={isDFPNotFound:!1,showRaichoAd:!1}}shouldComponentUpdate(e,a){return!(this.props.amebaId===e.amebaId&&this.props.gender===e.gender&&this.props.isBotAccess===e.isBotAccess&&this.props.isGamEnabled===e.isGamEnabled&&this.props.subType===e.subType&&this.props.entryId===e.entryId&&this.props.pageType===e.pageType&&this.props.pathname===e.pathname&&this.props.serviceId===e.serviceId&&m()(this.props.attribute,e.attribute)&&m()(this.props.officialPremiumBannerSide,e.officialPremiumBannerSide)&&m()(this.props.targetingParams,e.targetingParams)&&m()(this.props.rchAd,e.rchAd)&&this.state.isDFPNotFound===a.isDFPNotFound&&this.state.showRaichoAd===a.showRaichoAd)}getUnit(e,a){var{officialPremiumBannerSide:t,subType:r}=this.props;return e?u()(t,[r,"dfp"],null):"sub_a"!==r?null:"PremiumPanel_AmebaBlog_".concat(a)}render(){var{amebaId:e,attribute:a,gender:t,isBotAccess:r,isGamEnabled:i,targetingParams:s,rchAd:p,subType:l,trackRchTapLog:h,trackRchInviewLog:m,entryId:g,serviceId:f,pathname:b,pageType:A}=this.props;if(r||!a.isShowAdUser||!i)return null;if("sub_a"!==l&&this.state.isDFPNotFound)return null;var v=this.getUnit(a.isOfficial,t),y=R.r.id,_=a.isOfficial?y.official:y.general;if(!v||!_)return null;var I=u()(p,["items",0],{});return(0,o.Z)("div",{className:"subAdBannerArea subModule premiumAdWrapper"},void 0,n||(n=(0,o.Z)("div",{className:"subAdBannerHeader"},void 0,(0,o.Z)("span",{},void 0,"AD"))),c.createElement("div",{ref:this.dfpRef},(0,o.Z)(N.$,{shouldRequestAmazon:!1,sizeRule:R.r.sizes,slotId:_,slotName:v,style:(0,S.eC)(R.r.sizes),targetingParams:s,onAdRendered:this.handleOnDFPRendered,onNotFoundAd:this.handleDFPNotFound})),this.state.showRaichoAd&&(0,o.Z)("div",{className:"premiumSubAd"},void 0,d||(d=(0,o.Z)("div",{className:"subAdBannerHeader"},void 0,(0,o.Z)("span",{},void 0,"Ameba\u304b\u3089\u306e\u304a\u77e5\u3089\u305b"))),p&&(0,o.Z)(B._,{alt:u()(I,["labels","description"],"Ameba\u304b\u3089\u306e\u304a\u77e5\u3089\u305b\u753b\u50cf"),height:"300px",imgSrc:u()(I,["imgUrls","0"]),rchMeasureProps:{targetUrl:I.link,bloggerAmebaId:e,entryId:g,serviceId:f,pathname:b,dspMqps:I.meta.dspMqps,metaMqps:I.meta.mqps,mqps:p.mqps,pageType:A,spotId:p.spot,trackInview:m,trackTap:h},width:"300px"})))}},i.displayName="PcAdSidebarPremiumPanelNew",r=s))||r)||r)||r}}]);