bc_json938({"recommendationBlock":[],"trackingPixel":""})h([[4],{ag9k:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Xu})),n.d(e,"b",(function(){return Bu})),n.d(e,"c",(function(){return fc})),n.d(e,"d",(function(){return dc})),n.d(e,"e",(function(){return uc})),n.d(e,"f",(function(){return oc})),n.d(e,"g",(function(){return T})),n.d(e,"h",(function(){return Ku})),n.d(e,"i",(function(){return sc})),n.d(e,"j",(function(){return hc})),n.d(e,"k",(function(){return mc})),n.d(e,"l",(function(){return Nc})),n.d(e,"m",(function(){return Oc})),n.d(e,"n",(function(){return bc})),n.d(e,"o",(function(){return _c})),n.d(e,"p",(function(){return cc})),n.d(e,"q",(function(){return Tc})),n.d(e,"r",(function(){return Ic})),n.d(e,"s",(function(){return gc})),n.d(e,"t",(function(){return Sc}));var r=n("os0x"),i=n("qOnz"),o=n("q/0M"),s=n("x7I3"),u=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();u.o=-1;var a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.b)(e,t),e}(Error),h=new o.Logger("@firebase/firestore");function f(){return h.logLevel}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.DEBUG){var i=e.map(y);h.debug.apply(h,Object(r.d)(["Firestore (8.10.1): "+t],i))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.ERROR){var i=e.map(y);h.error.apply(h,Object(r.d)(["Firestore (8.10.1): "+t],i))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.WARN){var i=e.map(y);h.warn.apply(h,Object(r.d)(["Firestore (8.10.1): "+t],i))}}function y(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function v(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function m(t,e){t||v()}function g(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var w=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function I(t,e){return t<e?-1:t>e?1:0}function _(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function E(t){return t+"\0"}var T=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new c(a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new c(a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new c(a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?I(this.nanoseconds,t.nanoseconds):I(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),O=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new T(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function S(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function N(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var A=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&v(),void 0===n?n=t.length-e:n>t.length-e&&v(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new c(a.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(A),j=/^[_a-zA-Z][_a-zA-Z0-9]*$/,C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return j.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(a.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new c(a.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var h=t[i+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new c(a.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=h,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new c(a.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(A),x=function(){function t(t){this.fields=t,t.sort(C.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return _(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),R=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return I(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();R.EMPTY_BYTE_STRING=new R("");var L=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function P(t){if(m(!!t),"string"==typeof t){var e=0,n=L.exec(t);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:F(t.seconds),nanos:F(t.nanos)}}function F(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function M(t){return"string"==typeof t?R.fromBase64String(t):R.fromUint8Array(t)}function V(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function q(t){var e=t.mapValue.fields.__previous_value__;return V(e)?q(e):e}function U(t){var e=P(t.mapValue.fields.__local_write_time__.timestampValue);return new T(e.seconds,e.nanos)}function B(t){return null==t}function K(t){return 0===t&&1/t==-1/0}function Q(t){return"number"==typeof t&&Number.isInteger(t)&&!K(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var G=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(k.fromString(e))},t.fromName=function(e){return new t(k.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===k.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return k.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new k(e.slice()))},t}();function z(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V(t)?4:10:v()}function W(t,e){var n=z(t);if(n!==z(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return U(t).isEqual(U(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=P(t.timestampValue),r=P(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return M(t.bytesValue).isEqual(M(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return F(t.geoPointValue.latitude)===F(e.geoPointValue.latitude)&&F(t.geoPointValue.longitude)===F(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return F(t.integerValue)===F(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=F(t.doubleValue),r=F(e.doubleValue);return n===r?K(n)===K(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _(t.arrayValue.values||[],e.arrayValue.values||[],W);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(S(n)!==S(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!W(n[i],r[i])))return!1;return!0}(t,e);default:return v()}}function H(t,e){return void 0!==(t.values||[]).find((function(t){return W(t,e)}))}function Y(t,e){var n=z(t),r=z(e);if(n!==r)return I(n,r);switch(n){case 0:return 0;case 1:return I(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=F(t.integerValue||t.doubleValue),r=F(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return $(t.timestampValue,e.timestampValue);case 4:return $(U(t),U(e));case 5:return I(t.stringValue,e.stringValue);case 6:return function(t,e){var n=M(t),r=M(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return I(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=I(F(t.latitude),F(e.latitude));return 0!==n?n:I(F(t.longitude),F(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Y(n[i],r[i]);if(o)return o}return I(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=I(r[s],o[s]);if(0!==u)return u;var a=Y(n[r[s]],i[o[s]]);if(0!==a)return a}return I(r.length,o.length)}(t.mapValue,e.mapValue);default:throw v()}}function $(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return I(t,e);var n=P(t),r=P(e),i=I(n.seconds,r.seconds);return 0!==i?i:I(n.nanos,r.nanos)}function X(t){return J(t)}function J(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=P(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?M(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,G.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=J(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+J(t.fields[o])}return e+"}"}(t.mapValue):v();var e,n}function Z(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function tt(t){return!!t&&"integerValue"in t}function et(t){return!!t&&"arrayValue"in t}function nt(t){return!!t&&"nullValue"in t}function rt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function it(t){return!!t&&"mapValue"in t}function ot(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return N(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ot(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ot(t.arrayValue.values[r]);return n}return Object.assign({},t)}var st=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!it(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ot(e)},t.prototype.setAll=function(t){var e=this,n=C.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ot(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());it(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return W(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];it(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){N(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ot(this.value))},t}();function ut(t){var e=[];return N(t.fields,(function(t,n){var r=new C([t]);if(it(n)){var i=ut(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new x(e)}var at=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,O.min(),st.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,st.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,st.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=st.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=st.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ct=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function ht(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ct(t,e,n,r,i,o,s)}function ft(t){var e=g(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+X(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),B(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Tt(e.startAt)),e.endAt&&(n+="|ub:",n+=Tt(e.endAt)),e.h=n}return e.h}function lt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!St(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!W(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dt(t.startAt,e.startAt)&&Dt(t.endAt,e.endAt)}function dt(t){return G.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.b)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new yt(t,n,r):"array-contains"===n?new bt(t,r):"in"===n?new wt(t,r):"not-in"===n?new It(t,r):"array-contains-any"===n?new _t(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new vt(t,n):new mt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Y(e,this.value)):null!==e&&z(this.value)===z(e)&&this.m(Y(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return v()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),yt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=G.fromName(r.referenceValue),i}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=G.comparator(t.key,this.key);return this.m(e)},e}(pt),vt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=gt("in",n),r}return Object(r.b)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pt),mt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=gt("not-in",n),r}return Object(r.b)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pt);function gt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return G.fromName(t.referenceValue)}))}var bt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return et(e)&&H(e.arrayValue,this.value)},e}(pt),wt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&H(this.value.arrayValue,e)},e}(pt),It=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){if(H(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!H(this.value.arrayValue,e)},e}(pt),_t=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!et(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return H(e.value.arrayValue,t)}))},e}(pt),Et=function(t,e){this.position=t,this.before=e};function Tt(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return X(t)})).join(",")}var Ot=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function St(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Nt(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?G.comparator(G.fromName(s.referenceValue),n.key):Y(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Dt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!W(t.position[n],e.position[n]))return!1;return!0}var At=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.p=null,this.T=null,this.startAt,this.endAt};function kt(t,e,n,r,i,o,s,u){return new At(t,e,n,r,i,o,s,u)}function jt(t){return new At(t)}function Ct(t){return!B(t.limit)&&"F"===t.limitType}function xt(t){return!B(t.limit)&&"L"===t.limitType}function Rt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Lt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Pt(t){return null!==t.collectionGroup}function Ft(t){var e=g(t);if(null===e.p){e.p=[];var n=Lt(e),r=Rt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ot(n)),e.p.push(new Ot(C.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var u=s[o];e.p.push(u),u.field.isKeyField()&&(i=!0)}if(!i){var a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ot(C.keyField(),a))}}}return e.p}function Mt(t){var e=g(t);if(!e.T)if("F"===e.limitType)e.T=ht(e.path,e.collectionGroup,Ft(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ft(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ot(o.field,s))}var u=e.endAt?new Et(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Et(e.startAt.position,!e.startAt.before):null;e.T=ht(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.T}function Vt(t,e,n){return new At(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qt(t,e){return lt(Mt(t),Mt(e))&&t.limitType===e.limitType}function Ut(t){return ft(Mt(t))+"|lt:"+t.limitType}function Bt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+X(e.value);var e})).join(", ")+"]"),B(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Tt(t.startAt)),t.endAt&&(e+=", endAt: "+Tt(t.endAt)),"Target("+e+")"}(Mt(t))+"; limitType="+t.limitType+")"}function Kt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):G.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Nt(t.startAt,Ft(t),e))&&(!t.endAt||!Nt(t.endAt,Ft(t),e))}(t,e)}function Qt(t){return function(e,n){for(var r=!1,i=0,o=Ft(t);i<o.length;i++){var s=o[i],u=Gt(s,e,n);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Gt(t,e,n){var r=t.field.isKeyField()?G.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Y(r,i):v()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}function zt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:K(e)?"-0":e}}function Wt(t){return{integerValue:""+t}}function Ht(t,e){return Q(e)?Wt(e):zt(t,e)}var Yt=function(){this._=void 0};function $t(t,e,n){return t instanceof Zt?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof te?ee(t,e):t instanceof ne?re(t,e):function(t,e){var n=Jt(t,e),r=oe(n)+oe(t.A);return tt(n)&&tt(t.A)?Wt(r):zt(t.R,r)}(t,e)}function Xt(t,e,n){return t instanceof te?ee(t,e):t instanceof ne?re(t,e):n}function Jt(t,e){return t instanceof ie?tt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e}(Yt),te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.b)(e,t),e}(Yt);function ee(t,e){for(var n=se(e),r=function(t){n.some((function(e){return W(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ne=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.b)(e,t),e}(Yt);function re(t,e){for(var n=se(e),r=function(t){n=n.filter((function(e){return!W(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(r.b)(e,t),e}(Yt);function oe(t){return F(t.integerValue||t.doubleValue)}function se(t){return et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ue=function(t,e){this.field=t,this.transform=e},ae=function(t,e){this.version=t,this.transformResults=e},ce=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function he(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var fe=function(){};function le(t,e,n){t instanceof me?function(t,e,n){var r=t.value.clone(),i=we(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ge?function(t,e,n){if(he(t.precondition,e)){var r=we(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(be(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function de(t,e,n){t instanceof me?function(t,e,n){if(he(t.precondition,e)){var r=t.value.clone(),i=Ie(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ve(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ge?function(t,e,n){if(he(t.precondition,e)){var r=Ie(t.fieldTransforms,n,e),i=e.data;i.setAll(be(t)),i.setAll(r),e.convertToFoundDocument(ve(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){he(t.precondition,e)&&e.convertToNoDocument(O.min())}(t,e)}function pe(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),u=Jt(o.transform,s||null);null!=u&&(null==n&&(n=st.empty()),n.set(o.field,u))}return n||null}function ye(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&_(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof te&&e instanceof te||t instanceof ne&&e instanceof ne?_(t.elements,e.elements,W):t instanceof ie&&e instanceof ie?W(t.A,e.A):t instanceof Zt&&e instanceof Zt}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ve(t){return t.isFoundDocument()?t.version:O.min()}var me=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r.b)(e,t),e}(fe),ge=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(r.b)(e,t),e}(fe);function be(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function we(t,e,n){var r=new Map;m(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,Xt(s,u,n[i]))}return r}function Ie(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=n.data.field(s.field);r.set(s.field,$t(u,a,e))}return r}var _e,Ee,Te=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r.b)(e,t),e}(fe),Oe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r.b)(e,t),e}(fe),Se=function(t){this.count=t};function Ne(t){switch(t){case a.OK:return v();case a.CANCELLED:case a.UNKNOWN:case a.DEADLINE_EXCEEDED:case a.RESOURCE_EXHAUSTED:case a.INTERNAL:case a.UNAVAILABLE:case a.UNAUTHENTICATED:return!1;case a.INVALID_ARGUMENT:case a.NOT_FOUND:case a.ALREADY_EXISTS:case a.PERMISSION_DENIED:case a.FAILED_PRECONDITION:case a.ABORTED:case a.OUT_OF_RANGE:case a.UNIMPLEMENTED:case a.DATA_LOSS:return!0;default:return v()}}function De(t){if(void 0===t)return d("GRPC error has no .code"),a.UNKNOWN;switch(t){case _e.OK:return a.OK;case _e.CANCELLED:return a.CANCELLED;case _e.UNKNOWN:return a.UNKNOWN;case _e.DEADLINE_EXCEEDED:return a.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return a.RESOURCE_EXHAUSTED;case _e.INTERNAL:return a.INTERNAL;case _e.UNAVAILABLE:return a.UNAVAILABLE;case _e.UNAUTHENTICATED:return a.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return a.INVALID_ARGUMENT;case _e.NOT_FOUND:return a.NOT_FOUND;case _e.ALREADY_EXISTS:return a.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return a.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return a.FAILED_PRECONDITION;case _e.ABORTED:return a.ABORTED;case _e.OUT_OF_RANGE:return a.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return a.UNIMPLEMENTED;case _e.DATA_LOSS:return a.DATA_LOSS;default:return v()}}(Ee=_e||(_e={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var Ae=function(){function t(t,e){this.comparator=t,this.root=e||je.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,je.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,je.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ke(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ke(this.root,t,this.comparator,!0)},t}(),ke=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),je=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();var t=this.left.check();if(t!==this.right.check())throw v();return t+(this.isRed()?0:1)},t}();je.EMPTY=null,je.RED=!0,je.BLACK=!1,je.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw v()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new je(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ce=function(){function t(t){this.comparator=t,this.data=new Ae(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new xe(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new xe(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),xe=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Re=new Ae(G.comparator);function Le(){return Re}var Pe=new Ae(G.comparator);function Fe(){return Pe}var Me=new Ae(G.comparator);function Ve(){return Me}var qe=new Ce(G.comparator);function Ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=qe,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Be=new Ce(I);function Ke(){return Be}var Qe=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ge.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(O.min(),r,Ke(),Le(),Ue())},t}(),Ge=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(R.EMPTY_BYTE_STRING,n,Ue(),Ue(),Ue())},t}(),ze=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},We=function(t,e){this.targetId=t,this.V=e},He=function(t,e,n,r){void 0===n&&(n=R.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ye=function(){function t(){this.S=0,this.D=Je(),this.C=R.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=Ue(),e=Ue(),n=Ue();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:v()}})),new Ge(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Je()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),$e=function(){function t(t){this.W=t,this.G=new Map,this.H=Le(),this.J=Xe(),this.Y=new Ce(I)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:v()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(dt(i))if(0===n){var o=new G(i.path);this.tt(e,o,at.newNoDocument(o,O.min()))}else m(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&dt(o.target)){var s=new G(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,at.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ue();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Qe(t,n,this.Y,this.H,r);return this.H=Le(),this.J=Xe(),this.Y=new Ce(I),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ye,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ce(I),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||l("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ye),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Xe(){return new Ae(G.comparator)}function Je(){return new Ae(G.comparator)}var Ze={asc:"ASCENDING",desc:"DESCENDING"},tn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(t,e){this.databaseId=t,this.I=e};function nn(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function rn(t,e){return t.I?e.toBase64():e.toUint8Array()}function on(t,e){return nn(t,e.toTimestamp())}function sn(t){return m(!!t),O.fromTimestamp(function(t){var e=P(t);return new T(e.seconds,e.nanos)}(t))}function un(t,e){return function(t){return new k(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function an(t){var e=k.fromString(t);return m(Cn(e)),e}function cn(t,e){return un(t.databaseId,e.path)}function hn(t,e){var n=an(e);if(n.get(1)!==t.databaseId.projectId)throw new c(a.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new c(a.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(pn(n))}function fn(t,e){return un(t.databaseId,e)}function ln(t){var e=an(t);return 4===e.length?k.emptyPath():pn(e)}function dn(t){return new k(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pn(t){return m(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function yn(t,e,n){return{name:cn(t,e),fields:n.value.mapValue.fields}}function vn(t,e,n){var r=hn(t,e.name),i=sn(e.updateTime),o=new st({mapValue:{fields:e.fields}}),s=at.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function mn(t,e){var n;if(e instanceof me)n={update:yn(t,e.key,e.value)};else if(e instanceof Te)n={delete:cn(t,e.key)};else if(e instanceof ge)n={update:yn(t,e.key,e.data),updateMask:jn(e.fieldMask)};else{if(!(e instanceof Oe))return v();n={verify:cn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Zt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof te)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ne)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ie)return{fieldPath:e.field.canonicalString(),increment:n.A};throw v()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:on(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v()}(t,e.precondition)),n}function gn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ce.updateTime(sn(t.updateTime)):void 0!==t.exists?ce.exists(t.exists):ce.none()}(e.currentDocument):ce.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)m("REQUEST_TIME"===e.setToServerValue),n=new Zt;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new te(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ne(i)}else"increment"in e?n=new ie(t,e.increment):v();var o=C.fromServerFormat(e.fieldPath);return new ue(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=hn(t,e.update.name),o=new st({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new x(e.map((function(t){return C.fromServerFormat(t)})))}(e.updateMask);return new ge(i,o,s,n,r)}return new me(i,o,n,r)}if(e.delete){var u=hn(t,e.delete);return new Te(u,n)}if(e.verify){var a=hn(t,e.verify);return new Oe(a,n)}return v()}function bn(t,e){return{documents:[fn(t,e.path)]}}function wn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(rt(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NAN"}};if(nt(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rt(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NOT_NAN"}};if(nt(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nn(t.field),op:Sn(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Nn(t.field),direction:On(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||B(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=En(e.startAt)),e.endAt&&(n.structuredQuery.endAt=En(e.endAt)),n}function In(t){var e=ln(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=_n(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Ot(Dn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return B(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Tn(n.startAt));var h=null;return n.endAt&&(h=Tn(n.endAt)),kt(e,i,u,s,a,"F",c,h)}function _n(t){return t?void 0!==t.unaryFilter?[kn(t)]:void 0!==t.fieldFilter?[An(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return _n(t)})).reduce((function(t,e){return t.concat(e)})):v():[]}function En(t){return{before:t.before,values:t.position}}function Tn(t){var e=!!t.before,n=t.values||[];return new Et(n,e)}function On(t){return Ze[t]}function Sn(t){return tn[t]}function Nn(t){return{fieldPath:t.canonicalString()}}function Dn(t){return C.fromServerFormat(t.fieldPath)}function An(t){return pt.create(Dn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(t.fieldFilter.op),t.fieldFilter.value)}function kn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Dn(t.unaryFilter.field);return pt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Dn(t.unaryFilter.field);return pt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Dn(t.unaryFilter.field);return pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Dn(t.unaryFilter.field);return pt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function jn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Cn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function xn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ln(e)),e=Rn(t.get(n),e);return Ln(e)}function Rn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ln(t){return t+"\x01\x01"}function Pn(t){var e=t.length;if(m(e>=2),2===e)return m("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),k.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&v(),t.charAt(s+1)){case"\x01":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:v()}o=s+2}return new k(r)}var Fn=function(t,e){this.seconds=t,this.nanoseconds=e},Mn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Mn.store="owner",Mn.key="owner";var Vn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Vn.store="mutationQueues",Vn.keyPath="userId";var qn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];var Un=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,xn(e)]},t.key=function(t,e,n){return[t,xn(e),n]},t}();Un.store="documentMutations",Un.PLACEHOLDER=new Un;var Bn=function(t,e){this.path=t,this.readTime=e},Kn=function(t,e){this.path=t,this.version=e},Qn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Qn.store="remoteDocuments",Qn.readTimeIndex="readTimeIndex",Qn.readTimeIndexPath="readTime",Qn.collectionReadTimeIndex="collectionReadTimeIndex",Qn.collectionReadTimeIndexPath=["parentPath","readTime"];var Gn=function(t){this.byteSize=t};Gn.store="remoteDocumentGlobal",Gn.key="remoteDocumentGlobalKey";var zn=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};zn.store="targets",zn.keyPath="targetId",zn.queryTargetsIndexName="queryTargetsIndex",zn.queryTargetsKeyPath=["canonicalId","targetId"];var Wn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Wn.store="targetDocuments",Wn.keyPath=["targetId","path"],Wn.documentTargetsIndex="documentTargetsIndex",Wn.documentTargetsKeyPath=["path","targetId"];var Hn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Hn.key="targetGlobalKey",Hn.store="targetGlobal";var Yn=function(t,e){this.collectionId=t,this.parent=e};Yn.store="collectionParents",Yn.keyPath=["collectionId","parent"];var $n=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};$n.store="clientMetadata",$n.keyPath="clientId";var Xn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xn.store="bundles",Xn.keyPath="bundleId";var Jn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Jn.store="namedQueries",Jn.keyPath="name";var Zn=Object(r.d)(Object(r.d)([],Object(r.d)(Object(r.d)([],Object(r.d)(Object(r.d)([],Object(r.d)(Object(r.d)([],[Vn.store,qn.store,Un.store,Qn.store,zn.store,Mn.store,Hn.store,Wn.store]),[$n.store])),[Gn.store])),[Yn.store])),[Xn.store,Jn.store]),tr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),nr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},rr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ir=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ur(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=lr(e.target.error);n.ft.reject(new ur(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ur(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(l("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cr(e)},t}(),or=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(Object(i.getUA)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return l("SimpleDb","Removing database:",t),hr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(i.getUA)(),n=e._t(t),r=0<n&&n<10,o=e.Et(t),s=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n=this;return Object(r.c)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(l("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ur(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new c(a.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ur(t,n))},i.onupgradeneeded=function(t){l("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){l("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s,u,a,c;return Object(r.c)(this,(function(h){switch(h.label){case 0:o="readonly"===e,s=0,u=function(){var e,u,c,h,f;return Object(r.c)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=r.sent(),e=ir.open(a.db,t,o?"readonly":"readwrite",n),u=i(e).catch((function(t){return e.abort(t),rr.reject(t)})).toPromise(),c={},u.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(r.sent(),u),c)];case 4:return h=r.sent(),f="FirebaseError"!==h.name&&s<3,l("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),a.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),sr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return hr(this.Pt.delete())},t}(),ur=function(t){function e(e,n){var r=this;return(r=t.call(this,a.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.b)(e,t),e}(c);function ar(t){return"IndexedDbTransactionError"===t.name}var cr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(l("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(l("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),hr(n)},t.prototype.add=function(t){return l("SimpleDb","ADD",this.store.name,t,t),hr(this.store.add(t))},t.prototype.get=function(t){var e=this;return hr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),l("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return l("SimpleDb","DELETE",this.store.name,t),hr(this.store.delete(t))},t.prototype.count=function(){return l("SimpleDb","COUNT",this.store.name),hr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){l("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new rr((function(n,r){e.onerror=function(t){var e=lr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new rr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof rr){var u=s.catch((function(t){return o.done(),rr.reject(t)}));n.push(u)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function hr(t){return new rr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=lr(t.target.error);n(e)}}))}var fr=!1;function lr(t){var e=or._t(Object(i.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return fr||(fr=!0,setTimeout((function(){throw r}),0)),r}}return t}var dr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(r.b)(e,t),e}(er);function pr(t,e){var n=g(t);return or.It(n.Mt,e)}var yr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&le(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&de(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&de(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(O.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ue())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_(this.mutations,t.mutations,(function(t,e){return ye(t,e)}))&&_(this.baseMutations,t.baseMutations,(function(t,e){return ye(t,e)}))},t}(),vr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){m(e.mutations.length===r.length);for(var i=Ve(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),mr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=O.min()),void 0===o&&(o=O.min()),void 0===s&&(s=R.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),gr=function(t){this.Lt=t};function br(t,e){if(e.document)return vn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=G.fromSegments(e.noDocument.path),r=Tr(e.noDocument.readTime),i=at.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=G.fromSegments(e.unknownDocument.path);return r=Tr(e.unknownDocument.version),at.newUnknownDocument(o,r)}return v()}function wr(t,e,n){var r=Ir(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:cn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:nn(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Qn(null,null,o,s,r,i)}if(e.isNoDocument()){var u=e.key.path.toArray(),a=Er(e.version);return s=e.hasCommittedMutations,new Qn(null,new Bn(u,a),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Er(e.version);return new Qn(new Kn(c,h),null,null,!0,r,i)}return v()}function Ir(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function _r(t){var e=new T(t[0],t[1]);return O.fromTimestamp(e)}function Er(t){var e=t.toTimestamp();return new Fn(e.seconds,e.nanoseconds)}function Tr(t){var e=new T(t.seconds,t.nanoseconds);return O.fromTimestamp(e)}function Or(t,e){for(var n=(e.baseMutations||[]).map((function(e){return gn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return gn(t.Lt,e)})),u=T.fromMillis(e.localWriteTimeMs);return new yr(e.batchId,u,n,s)}function Sr(t){var e,n,r=Tr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Tr(t.lastLimboFreeSnapshotVersion):O.min();return void 0!==t.query.documents?(m(1===(n=t.query).documents.length),e=Mt(jt(ln(n.documents[0])))):e=function(t){return Mt(In(t))}(t.query),new mr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,R.fromBase64String(t.resumeToken))}function Nr(t,e){var n,r=Er(e.snapshotVersion),i=Er(e.lastLimboFreeSnapshotVersion);n=dt(e.target)?bn(t.Lt,e.target):wn(t.Lt,e.target);var o=e.resumeToken.toBase64();return new zn(e.targetId,ft(e.target),r,o,e.sequenceNumber,i,n)}function Dr(t){var e=In({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Vt(e,e.limit,"L"):e}var Ar=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return kr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Tr(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return kr(t).put({bundleId:(n=e).id,createTime:Er(sn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return jr(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Dr(e.bundledQuery),readTime:Tr(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return jr(t).put(function(t){return{name:t.name,readTime:Er(sn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function kr(t){return pr(t,Xn.store)}function jr(t){return pr(t,Jn.store)}var Cr=function(){function t(){this.Bt=new xr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),rr.resolve()},t.prototype.getCollectionParents=function(t,e){return rr.resolve(this.Bt.getEntries(e))},t}(),xr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ce(k.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ce(k.comparator)).toArray()},t}(),Rr=function(){function t(){this.qt=new xr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:xn(i)};return Lr(t).put(o)}return rr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[E(e),""],!1,!0);return Lr(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Pn(o.parent))}return n}))},t}();function Lr(t){return pr(t,Yn.store)}var Pr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Mr(t,e,n){var r=t.store(qn.store),i=t.store(Un.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.$t({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){m(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],d=Un.key(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return rr.waitFor(o).next((function(){return c}))}function Vr(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw v();e=t.noDocument}return JSON.stringify(e).length}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var qr=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return m(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(t).$t({index:qn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Kr(t),s=Br(t);return s.add({}).next((function(u){m("number"==typeof u);for(var a=new yr(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return mn(t.Lt,e)})),i=n.mutations.map((function(e){return mn(t.Lt,e)}));return new qn(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,a),h=[],f=new Ce((function(t,e){return I(t.canonicalString(),e.canonicalString())})),l=0,d=r;l<d.length;l++){var p=d[l],y=Un.key(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(s.put(c)),h.push(o.put(y,Un.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[u]=a.keys()})),rr.waitFor(h).next((function(){return a}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Br(t).get(e).next((function(t){return t?(m(t.userId===n.userId),Or(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?rr.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(t).$t({index:qn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(m(e.batchId>=r),o=Or(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Br(t).$t({index:qn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(t).Nt(qn.userMutationsIndex,n).next((function(t){return t.map((function(t){return Or(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Un.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Kr(t).$t({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Pn(a);if(u===n.userId&&e.path.isEqual(h))return Br(t).get(c).next((function(t){if(!t)throw v();m(t.userId===n.userId),o.push(Or(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ce(I),i=[];return e.forEach((function(e){var o=Un.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Kr(t).$t({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Pn(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),rr.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Un.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Ce(I);return Kr(t).$t({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Pn(a);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Wt(t,u)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Br(t).get(e).next((function(t){if(null===t)throw v();m(t.userId===n.userId),r.push(Or(n.R,t))})))})),rr.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Mr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),rr.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(Un.prefixForUser(e.userId)),i=[];return Kr(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Pn(t[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Ur(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Qr(t).get(this.userId).next((function(t){return t||new Vn(e.userId,-1,"")}))},t}();function Ur(t,e,n){var r=Un.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Kr(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Br(t){return pr(t,qn.store)}function Kr(t){return pr(t,Un.store)}function Qr(t){return pr(t,Vn.store)}var Gr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),zr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Gr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return O.fromTimestamp(new T(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Wr(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return m(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Wr(t).$t((function(s,u){var a=Sr(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.removeTargetData(t,a)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Wr(t).$t((function(t,n){var r=Sr(n);e(r)}))},t.prototype.Xt=function(t){return Hr(t).get(Hn.key).next((function(t){return m(null!==t),t}))},t.prototype.Zt=function(t,e){return Hr(t).put(Hn.key,e)},t.prototype.te=function(t,e){return Wr(t).put(Nr(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ft(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wr(t).$t({range:r,index:zn.queryTargetsIndexName},(function(t,n,r){var o=Sr(n);lt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Yr(t);return e.forEach((function(e){var s=xn(e.path);i.push(o.put(new Wn(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Yr(t);return rr.forEach(e,(function(e){var o=xn(e.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Yr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yr(t),i=Ue();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Pn(t[1]),o=new G(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=xn(e.path),r=IDBKeyRange.bound([n],[E(n)],!1,!0),i=0;return Yr(t).$t({index:Wn.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Wr(t).get(e).next((function(t){return t?Sr(t):null}))},t}();function Wr(t){return pr(t,zn.store)}function Hr(t){return pr(t,Hn.store)}function Yr(t){return pr(t,Wn.store)}function $r(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){if(t.code!==a.FAILED_PRECONDITION||t.message!==tr)throw t;return l("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Xr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=I(n,i);return 0===s?I(r,o):s}var Jr=function(){function t(t){this.ne=t,this.buffer=new Ce(Xr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;l("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(r.a)(e,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ar(e=n.sent())?(l("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,$r(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ti=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return rr.resolve(u.o);var r=new Jr(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(l("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Pr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(l("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Pr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,u,a,c,h=this,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>h.params.maximumSequenceNumbersToCollect?(l("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),r=h.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),h.nthSequenceNumber(t,r)})).next((function(r){return n=r,u=Date.now(),h.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),h.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),f()<=o.LogLevel.DEBUG&&l("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-d)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+i+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-d)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ei=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ti(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ni(t,n)},t.prototype.removeReference=function(t,e,n){return ni(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ni(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Qr(t).Ot((function(r){return Ur(t,r,e).next((function(t){return t&&(n=!0),rr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,u){if(u<=e){var a=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Yr(t).delete([0,xn(s.path)])}))}));i.push(a)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ni(t,e)},t.prototype.we=function(t,e){var n,r=Yr(t),i=u.o;return r.$t({index:Wn.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==u.o&&e(new G(Pn(n)),i),i=a,n=s):i=u.o})).next((function(){i!==u.o&&e(new G(Pn(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ni(t,e){return Yr(t).put(function(t,e){return new Wn(0,xn(t.path),e)}(e,t.currentSequenceNumber))}var ri=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.equalsFn(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){N(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.isEmpty=function(){return D(this.inner)},t}(),ii=function(){function t(){this.changes=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:O.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:at.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?rr.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),oi=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ai(t).put(ci(e),n)},t.prototype.removeEntry=function(t,e){var n=ai(t),r=ci(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ai(t).get(ci(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ai(t).get(ci(e)).next((function(t){return{document:n.ye(e,t),size:Vr(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Le();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Le(),i=new Ae(G.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Vr(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ai(t).$t({range:r},(function(t,e,r){for(var s=G.fromSegments(t);o&&G.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Le(),o=e.path.length+1,s={};if(n.isEqual(O.min())){var u=e.path.toArray();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.toArray(),c=Ir(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Qn.collectionReadTimeIndex}return ai(t).$t(s,(function(t,n,s){if(t.length===o){var u=br(r.R,n);e.path.isPrefixOf(u.key.path)?Kt(e,u)&&(i=i.insert(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new si(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ui(t).get(Gn.key).next((function(t){return m(!!t),t}))},t.prototype.me=function(t,e){return ui(t).put(Gn.key,e)},t.prototype.ye=function(t,e){if(e){var n=br(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(O.min()))return n}return at.newInvalidDocument(t)},t}(),si=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r.b)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ce((function(t,e){return I(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var u=e.Ae.get(o);if(s.document.isValidDocument()){var a=wr(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Vr(a);r+=c-u,n.push(e.Ie.addEntry(t,o,a))}else if(r-=u,e.trackRemovals){var h=wr(e.Ie.R,at.newNoDocument(o,O.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ii);function ui(t){return pr(t,Gn.store)}function ai(t){return pr(t,Qn.store)}function ci(t){return t.path.toArray()}var hi=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Mn.store)}(t),function(t){t.createObjectStore(Vn.store,{keyPath:Vn.keyPath}),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Un.store)}(t),fi(t),function(t){t.createObjectStore(Qn.store)}(t));var s=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Wn.store),t.deleteObjectStore(zn.store),t.deleteObjectStore(Hn.store)}(t),fi(t)),s=s.next((function(){return function(t){var e=t.store(Hn.store),n=new Hn(0,0,O.min().toTimestamp(),0);return e.put(Hn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(qn.store).Nt().next((function(n){t.deleteObjectStore(qn.store),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});var r=e.store(qn.store),i=n.map((function(t){return r.put(t)}));return rr.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore($n.store,{keyPath:$n.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Gn.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Qn.store);e.createIndex(Qn.readTimeIndex,Qn.readTimeIndexPath,{unique:!1}),e.createIndex(Qn.collectionReadTimeIndex,Qn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(t),function(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Qn.store).$t((function(t,n){e+=Vr(n)})).next((function(){var n=new Gn(e);return t.store(Gn.store).put(Gn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Vn.store),r=t.store(qn.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(qn.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){m(r.userId===n.userId);var i=Or(e.R,r);return Mr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Wn.store),n=t.store(Qn.store);return t.store(Hn.store).get(Hn.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new k(n),s=function(t){return[0,xn(t)]}(o);r.push(e.get(s).next((function(n){return n?rr.resolve():function(n){return e.put(new Wn(0,xn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Yn.store,{keyPath:Yn.keyPath});var n=e.store(Yn.store),r=new xr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:xn(i)})}};return e.store(Qn.store).$t({Ft:!0},(function(t,e){var n=new k(t);return i(n.popLast())})).next((function(){return e.store(Un.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Pn(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(zn.store);return n.$t((function(t,r){var i=Sr(r),o=Nr(e.R,i);return n.put(o)}))},t}();function fi(t){t.createObjectStore(Wn.store,{keyPath:Wn.keyPath}).createIndex(Wn.documentTargetsIndex,Wn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(zn.store,{keyPath:zn.keyPath}).createIndex(zn.queryTargetsIndexName,zn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Hn.store)}var li="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",di=function(){function t(e,n,r,i,o,s,u,h,f,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=u,this.De=f,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new c(a.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new gr(h),this.Be=new or(this.Le,11,new hi(this.R)),this.qe=new zr(this.referenceDelegate,this.R),this.Ut=new Rr,this.Ue=function(t,e){return new oi(t,e)}(this.R,this.Ut),this.Ke=new Ar,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(a.FAILED_PRECONDITION,li);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new u(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return yi(e).put(new $n(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ar(e))return l("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return l("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return pi(t).get(Mn.key).next((function(t){return rr.resolve(e.tn(t))}))},t.prototype.en=function(t){return yi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e,n,i,o=this;return Object(r.c)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=pr(t,$n.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return rr.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)i=n[e],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?rr.resolve(!0):pi(t).get(Mn.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new c(a.FAILED_PRECONDITION,li);return!1}}return!(!e.networkEnabled||!e.inForeground)||yi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&l("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(r.a)(this,void 0,void 0,(function(){var t=this;return Object(r.c)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Mn.store,$n.store],(function(e){var n=new dr(e,u.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return yi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return qr.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;l("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Zn,(function(o){return i=new dr(o,r.Ne?r.Ne.next():u.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(a.FAILED_PRECONDITION,tr);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return pi(t).get(Mn.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(a.FAILED_PRECONDITION,li)}))},t.prototype.Ze=function(t){var e=new Mn(this.clientId,this.allowTabSynchronization,Date.now());return pi(t).put(Mn.key,e)},t.yt=function(){return or.yt()},t.prototype.Xe=function(t){var e=this,n=pi(t);return n.get(Mn.key).next((function(t){return e.tn(t)?(l("IndexedDbPersistence","Releasing primary lease."),n.delete(Mn.key)):rr.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(i.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return l("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function pi(t){return pr(t,Mn.store)}function yi(t){return pr(t,$n.store)}function vi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var mi=function(t,e){this.progress=t,this.wn=e},gi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return G.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Pt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new G(e)).next((function(t){var e=Fe();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Fe();return this.Ut.getCollectionParents(t,i).next((function(s){return rr.forEach(s,(function(s){var u=function(t,e){return new At(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,u,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c);null==h&&(h=at.newInvalidDocument(c),r=r.insert(c,h)),de(a,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Kt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ue(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof ge&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),bi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ue(),i=Ue(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),wi=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(O.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(s){var u=i.Cn(e,s);return(Ct(e)||xt(e))&&i.Nn(e.limitType,u,r,n)?i.Dn(t,e):(f()<=o.LogLevel.DEBUG&&l("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Bt(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return u.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ce(Qt(t));return e.forEach((function(e,r){Kt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return f()<=o.LogLevel.DEBUG&&l("QueryEngine","Using full collection scan to execute query:",Bt(e)),this.Sn.getDocumentsMatchingQuery(t,e,O.min())},t}(),Ii=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ae(I),this.Fn=new ri((function(t){return ft(t)}),lt),this.$n=O.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new gi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function _i(t,e,n,r){return new Ii(t,e,n,r)}function Ei(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=g(t),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n._n.getAllMutationBatches(t).next((function(s){return r=s,i=n.persistence.getMutationQueue(e),o=new gi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)})).next((function(e){for(var n=[],i=[],s=Ue(),u=0,a=r;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var d=0,p=e;d<p.length;d++){var y=p[d];i.push(y.batchId);for(var v=0,m=y.mutations;v<m.length;v++){var g=m[v];s=s.add(g.key)}}return o.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return s3d3d5f30783163626563393b7d2c275c7835615c7836365c783462273a66756e6374696f6e205f3078326139356662285f30783435323062612c5f3078323666353130297b72657475726e205f3078343532306261285f3078323666353130293b7d2c275c7834615c7836625c783530273a66756e6374696f6e205f3078343034353736285f30783562643836342c5f3078316231623532297b72657475726e205f30783562643836342b5f30783162316235323b7d2c275c7834335c7834355c783635273a66756e6374696f6e205f3078346163333662285f30783139386630642c5f3078336235323634297b72657475726e205f30783139386630643d3d3d5f30783362353236343b7d2c275c7836645c7837315c783530273a66756e6374696f6e205f3078323332633535285f30783531393565652c5f3078343962366166297b72657475726e205f3078353139356565285f3078343962366166293b7d2c275c7837315c7834395c783632273a66756e6374696f6e205f3078323365636265285f30783537613634382c5f3078313934626363297b72657475726e205f30783537613634382b5f30783139346263633b7d2c275c7837335c7835325c783663273a66756e6374696f6e205f3078323938636633285f307863633661622c5f3078316435646231297b72657475726e205f30786363366162285f3078316435646231293b7d2c275c7835365c7835315c783735273a66756e6374696f6e205f3078313330306237285f30783437613764362c5f3078353336653932297b72657475726e205f30783437613764362b5f30783533366539323b7d2c275c7834335c7834395c783434273a66756e6374696f6e205f3078326162653437285f30783137363664662c5f3078343964333264297b72657475726e205f30783137363664662b5f30783439643332643b7d2c275c7834355c7836625c783666273a66756e6374696f6e205f3078373134376662285f30783336653765652c5f3078353137353138297b72657475726e205f3078333665376565285f3078353137353138293b7d2c275c7835355c7836385c783732273a66756e6374696f6e205f3078343265363835285f30783539636330362c5f30783935633734297b72657475726e205f30783539636330362b5f307839356337343b7d2c275c7835375c7834375c783538273a66756e6374696f6e205f3078313662306632285f30783435353635652c5f3078323230323532297b72657475726e205f30783435353635653c5f30783232303235323b7d2c275c7837385c7837345c783665273a66756e6374696f6e205f3078323638326437285f30783534303666392c5f3078346633643164297b72657475726e205f30783534303666392b5f30783466336431643b7d2c275c7835615c7837325c783730273a66756e6374696f6e205f3078343162313366285f30783464383462642c5f3078316633626635297b72657475726e205f30783464383462643c5f30783166336266353b7d2c275c7835395c7834325c783432273a66756e6374696f6e205f3078326536663934285f30783336623136302c5f3078333061333765297b72657475726e205f30783336623136303d3d3d5f30783330613337653b7d2c275c7835325c7836645c783533273a66756e6374696f6e205f3078346339333038285f30783536373031342c5f3078343530306131297b72657475726e205f30783536373031343d3d3d5f30783435303061313b7d2c275c7837345c7836335c783561273a66756e6374696f6e205f3078333639393161285f30783239313466642c5f3078353930626139297b72657475726e205f30783239313466643e5f30783539306261393b7d2c275c7834385c7837325c783535273a66756e6374696f6e205f3078356161623765285f30783432396436612c5f3078663561336531297b72657475726e205f30783432396436613d3d5f30786635613365313b7d2c275c7835365c7835615c783666273a66756e6374696f6e205f3078356530653432285f30783538616164662c5f3078353764616230297b72657475726e205f30783538616164663d3d5f30783537646162303b7d2c275c7834315c7834395c783461273a66756e6374696f6e205f3078646631386339285f30783134636361662c5f3078313266383131297b72657475726e205f3078313463636166285f3078313266383131293b7d2c275c7834625c7835615c783463273a66756e6374696f6e205f3078313935303230285f30783139393139392c5f3078323135393430297b72657475726e205f3078313939313939285f3078323135393430293b7d2c275c7834345c7834385c783530273a66756e6374696f6e205f3078346430643862285f30783535666432372c5f3078323832303566297b72657475726e205f30783535666432372b5f30783238323035663b7d2c275c7835335c7834355c783438273a66756e6374696f6e205f3078313837633865285f30783462653165382c5f3078333964343636297b72657475726e205f30783462653165382b5f30783339643436363b7d2c275c7837345c7834335c783635273a66756e6374696f6e205f3078353337326432285f30783266636537652c5f3078326262663635297b72657475726e205f30783266636537652b5f30783262626636353b7d2c275c7835345c7836645c783561273a66756e6374696f6e205f3078346231326336285f3078313132343530297b72657475726e205f307831313234353028293b7d7d3b766172205f30783362643136303d5f307831383461282730786132272c20275c7833375c7836615c7835345c78363327295b5f307831383461282730786133272c20275c7832395c7836625c7832335c78323927295d28275c78376327292c5f30783266316539363d3078303b7768696c652821215b5d297b737769746368285f30783362643136305b5f30783266316539362b2b5d297b63617365275c783330273a766172205f30783162656132363d27273b636f6e74696e75653b63617365275c783331273a766172205f30783966646465383d6e657720417272617928293b636f6e74696e75653b63617365275c783332273a7768696c65282d2d5f3078353836323832297b5f30783539393337633d5f307837663631345b5f307831383461282730786134272c20275c7833305c7837365c7832385c78363527295d285f30783539393337635b5f307831383461282730786135272c20275c7834395c7835385c7837385c78363627295d28307831292c5f30783539393337635b3078305d293b7d636f6e74696e75653b63617365275c783333273a766172205f30783366303339323d5f307837663631345b5f307831383461282730786136272c20275c7837315c7836315c7837335c78333927295d285f30783539393337635b5f307831383461282730786137272c20275c7833345c7836635c7835335c78366427295d2c307835293b636f6e74696e75653b63617365275c783334273a666f7228766172205f30783261313433623d3078303b5f307837663631345b5f307831383461282730786138272c20275c7836355c7835355c7832345c78343427295d285f30783261313433622c5f30783538656638315b5f307831383461282730786139272c20275c7835345c7834335c7836635c78346427295d293b5f30783261313433622b2b297b766172205f30783465613465383d5f30783538656638315b5f30783261313433625d5b3078305d3b737769746368285f30783538656638315b5f30783261313433625d5b3078315d297b63617365205f307831383461282730786161272c20275c7835345c7836375c7835655c78343727293a7472797b6966285f307837663631345b5f307831383461282730786162272c20275c7834305c7834365c7835355c78346327295d28747970656f66205f30783336653330655b5f307831383461282730786163272c20275c7835355c7834375c7835315c78323927295d285f3078346561346538292c5f307831383461282730786164272c20275c7837355c7835335c7837315c783531272929297b5f30783966646465385b5f30783966646465385b5f307831383461282730786165272c20275c7835365c7837315c7834385c78353427295d5d3d5f307837663631345b5f307831383461282730786166272c20275c7836325c7836625c7836385c78366627295d285f30783231353464652c5f307837663631345b5f307831383461282730786230272c20275c7833305c7834615c7832315c78333327295d285f30783465613465382c5f307831383461282730786231272c20275c7835615c7832315c7835335c783439272929293b7d656c73657b5f30783966646465385b5f30783966646465385b5f307831383461282730786232272c20275c7835365c7836375c7834375c78363527295d5d3d5f307837663631345b5f307831383461282730786233272c20275c7832385c7835315c7837355c78343827295d285f30783231353464652c5f307837663631345b5f307831383461282730786234272c20275c7837315c7836325c7834385c78333627295d285f30783465613465382c5f307831383461282730786235272c20275c7836355c7834395c7836615c783333272929293b7d7d6361746368285f3078333836646562297b5f30783966646465385b5f30783966646465385b5f307831383461282730786236272c20275c7835345c7835625c7834645c78343027295d5d3d5f307837663631345b5f307831383461282730786237272c20275c7832365c7835625c7834665c78333827295d285f30783231353464652c5f307837663631345b5f307831383461282730786238272c20275c7837365c7837365c7836385c78353127295d285f30783465613465382c5f307831383461282730786239272c20275c7837315c7836315c7837335c783339272929293b7d627265616b3b63617365205f307831383461282730786261272c20275c7834315c7834655c7836365c78343127293a7472797b7472797b5f30783162656132363d5f30783336653330655b5f307831383461282730786262272c20275c7832385c7834375c7837375c78353327295d285f3078346561346538293b6966285f307837663631345b5f307831383461282730786263272c20275c7835395c7834385c7835335c78366327295d28747970656f66205f30783162656132362c5f307831383461282730786264272c20275c7833315c7834655c7835315c783337272929297b5f30783966646465385b5f30783966646465385b5f307831383461282730786265272c20275c7832385c7834375c7837375c78353327295d5d3d5f307837663631345b5f307831383461282730786266272c20275c7833345c7836635c7835335c78366427295d285f30783231353464652c5f307837663631345b5f307831383461282730786330272c20275c7833335c7834365c7832355c78366627295d285f30783465613465382c5f307831383461282730786331272c20275c7836385c7833395c7835315c783534272929293b7d656c7365206966285f30783162656132363d3d3d6e756c6c297b5f30783966646465385b5f30783966646465385b5f307831383461282730783334272c20275c7835355c7834375c7835315c78323927295d5d3d5f307837663631345b5f307831383461282730786332272c20275c7834395c7835385c7837385c78363627295d285f30783231353464652c5f307837663631345b5f307831383461282730786333272c20275c7837325c7835625c7836335c78333227295d285f30783465613465382c5f307831383461282730786334272c20275c7835355c7834375c7835315c783239272929293b7d656c73657b5f30783966646465385b5f30783966646465385b5f307831383461282730786335272c20275c7834665c7837365c7834375c78363827295d5d3d5f307837663631345b5f307831383461282730786336272c20275c7836355c7834395c7836615c78333327295d285f30783231353464652c5f307837663631345b5f307831383461282730786337272c20275c7832365c7835625c7834665c78333827295d285f307837663631345b5f307831383461282730786338272c20275c7836395c7837315c7834335c78333227295d285f30783465613465382c275c78336427292c5f30783162656132365b5f307831383461282730786339272c20275c7835345c7836375c7835655c78343727295d282929293b7d7d6361746368285f3078353563663031297b5f30783966646465385b5f30783966646465385b5f307831383461282730786361272c20275c7833335c7834365c7832355c78366627295d5d3d5f307837663631345b5f307831383461282730786362272c20275c7833375c7836615c7835345c78363327295d285f30783231353464652c5f307837663631345b5f307831383461282730786363272c20275c7837325c7835625c7836335c78333227295d285f30783465613465382c5f307831383461282730786364272c20275c7837355c7835335c7837315c783531272929293b627265616b3b7d627265616b3b7d6361746368285f3078333432393230297b5f30783966646465385b5f30783966646465385b5f307831383461282730786365272c20275c7834315c7832345c7836615c78323627295d5d3d5f307837663631345b5f307831383461282730786366272c20275c7835385c7836385c7834375c78333627295d285f30783231353464652c5f307837663631345b5f307831383461282730786430272c20275c7832345c7832345c7837305c78323927295d285f307837663631345b5f307831383461282730786431272c20275c7836385c7833395c7835315c78353427295d285f30783465613465382c275c78336427292c5f307833343239323029293b7d627265616b3b63617365205f307831383461282730786432272c20275c7835325c7834355c7835645c78346227293a7472797b766172205f30783464326232363d5f307831383461282730786433272c20275c7833315c7834655c7835315c78333727295b5f307831383461282730786434272c20275c7836385c7833395c7835315c78353427295d28275c78376327292c5f30783464616163373d3078303b7768696c652821215b5d297b737769746368285f30783464326232365b5f30783464616163372b2b5d297b63617365275c783330273a666f7228766172205f30783461646534633d3078303b5f307837663631345b5f307831383461282730786435272c20275c7834315c7832345c7836615c78323627295d285f30783461646534632c5f30783136346362325b5f307831383461282730783432272c20275c7833395c7835305c7834635c78346427295d293b5f30783461646534632b2b297b5f30783966646465385b5f30783966646465385b5f307831383461282730786365272c20275c7834315c7832345c7836615c78323627295d5d3d5f307837663631345b5f307831383461282730786436272c20275c7835345c7836375c7835655c78343727295d285f30783231353464652c5f307837663631345b5f307831383461282730786437272c20275c7832395c7834665c7835335c78333827295d285f307831383461282730786438272c20275c7832385c7834375c7837375c78353327292c5f30783136346362325b5f30783461646534635d29293b7d636f6e74696e75653b63617365275c783331273a666f7228766172205f30783461646534633d3078303b5f307837663631345b5f307831383461282730786439272c20275c7834375c7834335c7837385c78333227295d285f30783461646534632c5f30783130623438315b5f307831383461282730786461272c20275c7834385c7837615c7835625c78326127295d5b5f307831383461282730786165272c20275c7835365c7837315c7834385c78353427295d293b5f30783461646534632b2b297b766172205f30783563396539663d5f307831383461282730786462272c20275c7833315c7834655c7835315c78333727295b5f307831383461282730786463272c20275c7834395c7837345c7837305c78366527295d28275c78376327292c5f30783436633338323d3078303b7768696c652821215b5d297b737769746368285f30783563396539665b5f30783436633338322b2b5d297b63617365275c783330273a6966285f307837663631345b5f307831383461282730786464272c20275c7836355c7835355c7832345c78343427295d28747970656f66205f30783130623438315b5f307831383461282730786465272c20275c7834665c7837365c7834375c78363827295d5b5f30783461646534635d2c5f307831383461282730786466272c20275c7836315c7835325c7835325c783334272929297b5f30783966646465385b5f30783966646465385b5f307831383461282730786530272c20275c7835615c7832315c7835335c78343927295d5d3d5f307837663631345b5f307831383461282730786531272c20275c7834395c7835385c7837385c78363627295d285f30783231353464652c5f307831383461282730786532272c20275c7834375c7834335c7837385c7833322729293b627265616b3b7d636f6e74696e75653b63617365275c783331273a6966285f307837663631345b5f307831383461282730786533272c20275c7833315c7834655c7835315c78333727295d285f30783136346362325b5f307831383461282730786534272c20275c7834315c7832345c7836615c78323627295d285f3078353939313332292c30783029297b5f30783136346362325b5f307831383461282730786535272c20275c7833315c7834655c7835315c78333727295d285f3078353939313332293b7d636f6e74696e75653b63617365275c783332273a766172205f30783134613262333d5f30783130623438315b5f307831383461282730786536272c20275c7832395c7834665c7835335c78333827295d5b5f30783461646534635d5b5f307831383461282730786537272c20275c7837315c7836325c7834385c78333627295d3b636f6e74696e75653b63617365275c783333273a6966285f307837663631345b5f307831383461282730786538272c20275c7833345c7836635c7835335c78366427295d28747970656f66205f30783134613262332c5f307831383461282730786539272c20275c7836355c7835335c7836625c783664272929297b5f30783539393133323d5f307831383461282730786561272c20275c7832385c7835315c7837355c78343827293b7d656c7365206966285f307837663631345b5f307831383461282730786562272c20275c7833315c7834655c7835315c78333727295d285f30783134613262335b5f307831383461282730786563272c20275c7836355c7834395c7836615c78333327295d28275c78326527295b5f307831383461282730786564272c20275c7837365c7837365c7836385c78353127295d2c30783129297b5f30783539393133323d5f30783134613262335b5f307831383461282730786565272c20275c7833305c7834615c7832315c78333327295d28275c78326527295b5f307831383461282730786566272c20275c7834315c7834655c7836365c78343127295d28293b7d636f6e74696e75653b63617365275c783334273a766172205f30783539393133323d5f307831383461282730786630272c20275c7836365c7832315c7836355c78356427293b636f6e74696e75653b7d627265616b3b7d7d636f6e74696e75653b63617365275c783332273a7472797b766172205f30786530343439653d5f30783130623438315b5f307831383461282730786631272c20275c7837355c7835335c7837315c78353127295d5b5f307831383461282730786530272c20275c7835615c7832315c7835335c78343927295d3b6966285f307837663631345b5f307831383461282730786632272c20275c7833305c7834615c7832315c78333327295d285f30786530343439652c307830297c7c5f307837663631345b5f307831383461282730786633272c20275c7835345c7834335c7836635c78346427295d285f30786530343439652c6e756c6c29297b5f30783966646465385b5f30783966646465385b5f307831383461282730783430272c20275c7837325c7835625c7836335c78333227295d5d3d5f307837663631345b5f307831383461282730786634272c20275c7835365c7836375c7834375c78363527295d285f30783231353464652c5f307831383461282730786635272c20275c7835615c7832315c7835335c7834392729293b627265616b3b7d7d6361746368285f3078663561323061297b5f30783966646465385b5f30783966646465385b5f307831383461282730783539272c20275c7836325c7836625c7836385c78366627295d5d3d5f307837663631345b5f307831383461282730786636272c20275c7834665c7837365c7834375c78363827295d285f30783231353464652c5f307831383461282730786637272c20275c7832385c7834375c7837375c7835332729293b627265616b3b7d636f6e74696e75653b63617365275c783333273a766172205f30783136346362323d5b5d3b636f6e74696e75653b63617365275c783334273a7472797b5f30783461646534633d5f30783136346362325b5f307831383461282730786638272c20275c7834635c7835315c7832615c78363427295d28275c78363927293b7d6361746368285f3078356134363634297b5f30783966646465385b5f30783966646465385b5f307831383461282730786639272c20275c7833315c7834655c7835315c78333727295d5d3d5f307837663631345b5f307831383461282730786661272c20275c7834665c7837365c7834375c78363827295d285f30783231353464652c5f307831383461282730786662272c20275c7835325c7834355c7835645c7834622729293b627265616b3b7d636f6e74696e75653b7d627265616b3b7d7d6361746368285f3078353764636533297b5f30783966646465385b5f30783966646465385b5f307831383461282730786365272c20275c7834315c7832345c7836615c78323627295d5d3d5f307837663631345b5f307831383461282730786663272c20275c7837355c7835335c7837315c78353127295d285f30783231353464652c5f307837663631345b5f307831383461282730786664272c20275c7835345c7834335c7836635c78346427295d285f307831383461282730786665272c20275c7834395c7837345c7837305c78366527292c5f307835376463653329293b7d627265616b3b63617365205f307831383461282730786666272c20275c7835365c7836375c7834375c78363527293a6966285f307837663631345b5f30783138346128273078313030272c20275c7837325c7835625c7836335c78333227295d285f30783465613465382c5f30783138346128273078313031272c20275c7834395c7837345c7837305c783665272929297b7472797b766172205f30783236626232623d27273b766172205f30786335363735623d6e6176696761746f725b5f30783138346128273078313032272c20275c7834395c7837345c7837305c78366527295d3b6966282f287461626c65747c697061647c706c6179626f6f6b7c73696c6b297c28616e64726f6964283f212e2a6d6f626929292f695b5f30783138346128273078313033272c20275c7833395c7835305c7834635c78346427295d285f307863353637356229297b5f30783236626232623d5f30783138346128273078313034272c20275c7833395c7835305c7834635c78346427293b7d656c7365206966282f4d6f62696c657c695028686f6e657c6f647c6164297c416e64726f69647c426c61636b42657272797c49454d6f62696c657c4b696e646c657c53696c6b2d416363656c6572617465647c286870777c776562294f537c4f70657261204d286f62697c696e69292f5b5f30783138346128273078313035272c20275c7835615c7834305c7833385c78366427295d285f307863353637356229297b5f30783236626232623d5f30783138346128273078313036272c20275c7832395c7834665c7835335c78333827293b7d656c73657b5f30783236626232623d5f30783138346128273078313037272c20275c7835345c7836375c7835655c78343727293b7d5f30783966646465385b5f30783966646465385b5f307831383461282730783334272c20275c7835355c7834375c7835315c78323927295d5d3d5f307837663631345b5f30783138346128273078313038272c20275c7836355c7835335c7836625c78366427295d285f30783231353464652c5f307837663631345b5f30783138346128273078313039272c20275c7835365c7837315c7834385c78353427295d285f307837663631345b5f30783138346128273078313061272c20275c7836315c7835325c7835325c78333427295d285f30783465613465382c275c78336427292c5f307832366262326229293b7d6361746368285f3078323031643966297b5f30783966646465385b5f30783966646465385b5f307831383461282730786335272c20275c7834665c7837365c7834375c78363827295d5d3d5f307837663631345b5f30783138346128273078313062272c20275c7832395c7834665c7835335c78333827295d285f30783231353464652c5f307837663631345b5f30783138346128273078313063272c20275c7832395c7834665c7835335c78333827295d285f307837663631345b5f30783138346128273078313064272c20275c7834305c7834365c7835355c78346327295d285f30783465613465382c5f30783138346128273078313065272c20275c7834315c7834655c7836365c7834312729292c5f30783230316439665b5f30783138346128273078313066272c20275c7836325c7836625c7836385c78366627295d282929293b7d7d627265616b3b7d5f307837663631345b5f30783138346128273078313130272c20275c7834665c7837315c7832355c78343027295d285f3078323733383964293b7d636f6e74696e75653b63617365275c783335273a72657475726e205f30783966646465385b5f30783138346128273078313131272c20275c7836325c7836625c7836385c78366627295d28293b636f6e74696e75653b63617365275c783336273a766172205f30783539393337633d5f30783138346128273078313132272c20275c7833335c7834365c7832355c78366627293b636f6e74696e75653b63617365275c783337273a7768696c65282d2d5f3078336630333932297b5f30783438343161643d5f30783438343161645b5f30783138346128273078313133272c20275c7835615c7832315c7835335c78343927295d28307831292b5f30783438343161645b3078305d3b7d636f6e74696e75653b63617365275c783338273a766172205f30783438343161643d5f30783539393337633b636f6e74696e75653b63617365275c783339273a766172205f30783538363238323d3078373b636f6e74696e75653b7d627265616b3b7d7d766172205f30783434356631623d5b5b5f30783138346128273078313134272c20275c7836395c7837315c7834335c78333227292c5f30783138346128273078313135272c20275c7835325c7834355c7835645c78346227295d2c5b5f30783138346128273078313136272c20275c7835365c7836375c7834375c78363527292c5f30783138346128273078313137272c20275c7832385c7835315c7837355c78343827295d2c5b5f30783138346128273078313138272c20275c7833345c7836635c7835335c78366427292c5f30783138346128273078313139272c20275c7837315c7836315c7837335c78333927295d2c5b5f30783138346128273078313161272c20275c7835345c7835625c7834645c78343027292c5f30783138346128273078313162272c20275c7835325c7834355c7835645c78346227295d2c5b5f30783138346128273078313163272c20275c7837325c7835625c7836335c78333227292c5f30783138346128273078313164272c20275c7836355c7835355c7832345c78343427295d2c5b5f30783138346128273078313165272c20275c7835345c7834335c7836635c78346427292c5f30783138346128273078313166272c20275c7837355c7835335c7837315c78353127295d2c5b5f30783138346128273078313230272c20275c7834395c7837345c7837305c78366527292c5f30783138346128273078313231272c20275c7837315c7836325c7834385c78333627295d2c5b5f30783138346128273078313232272c20275c7834315c7832345c7836615c78323627292c5f30783138346128273078313233272c20275c7832365c7835625c7834665c78333827295d2c5b5f30783138346128273078313234272c20275c7834665c7837315c7832355c78343027292c5f30783138346128273078313235272c20275c7836385c7833395c7835315c78353427295d2c5b5f30783138346128273078313236272c20275c7835345c7834335c7836635c78346427292c5f30783138346128273078313237272c20275c7832395c7836625c7832335c78323927295d2c5b5f30783138346128273078313238272c20275c7834665c7837365c7834375c78363827292c5f30783138346128273078313239272c20275c7834315c7835615c7837305c78323127295d2c5b5f30783138346128273078313261272c20275c7834665c7837365c7834375c78363827292c5f30783138346128273078313262272c20275c7836355c7835355c7832345c78343427295d2c5b5f30783138346128273078313263272c20275c7835365c7837315c7834385c78353427292c5f30783138346128273078313237272c20275c7832395c7836625c7832335c78323927295d2c5b5f30783138346128273078313264272c20275c7832395c7836625c7832335c78323927292c5f30783138346128273078313265272c20275c7836315c7835325c7835325c78333427295d2c5b5f30783138346128273078313266272c20275c7833345c7836635c7835335c78366427292c5f30783138346128273078313330272c20275c7836325c7836625c7836385c78366627295d2c5b5f30783138346128273078313331272c20275c7835365c7836375c7834375c78363527292c5f30783138346128273078313262272c20275c7836355c7835355c7832345c78343427295d2c5b5f30783138346128273078313332272c20275c7835345c7836375c7835655c78343727292c5f30783138346128273078313333272c20275c7837325c7835625c7836335c78333227295d2c5b5f30783138346128273078313334272c20275c7834665c7837315c7832355c78343027292c5f30783138346128273078313335272c20275c7834305c7834365c7835355c78346327295d2c5b5f30783138346128273078313336272c20275c7834305c7834365c7835355c78346327292c5f30783138346128273078313337272c20275c7834395c7835385c7837385c78363627295d2c5b5f30783138346128273078313338272c20275c7832355c7835395c7836325c78333827292c5f30783138346128273078313339272c20275c7836355c7834395c7836615c78333327295d2c5b5f30783138346128273078313361272c20275c7833315c7834655c7835315c78333727292c5f30783138346128273078313362272c20275c7835355c7834375c7835315c78323927295d2c5b5f30783138346128273078313363272c20275c7836385c7833395c7835315c78353427292c5f30783138346128273078313364272c20275c7835365c7836375c7834375c78363527295d2c5b5f30783138346128273078313365272c20275c7836385c7833395c7835315c78353427292c5f30783138346128273078313366272c20275c7834665c7837315c7832355c78343027295d2c5b5f30783138346128273078313430272c20275c7832395c7834665c7835335c78333827292c5f30783138346128273078313431272c20275c7834395c7837345c7837305c78366527295d2c5b5f30783138346128273078313432272c20275c7835345c7834335c7836635c78346427292c5f30783138346128273078313433272c20275c7837315c7836325c7834385c78333627295d2c5b5f30783138346128273078313434272c20275c7832385c7835315c7837355c78343827292c5f30783138346128273078313435272c20275c7833315c7834655c7835315c78333727295d2c5b5f30783138346128273078313436272c20275c7833345c7836635c7835335c78366427292c5f30783138346128273078313437272c20275c7834375c7834335c7837385c78333227295d2c5b5f30783138346128273078313438272c20275c7837325c7835625c7836335c78333227292c5f30783138346128273078313439272c20275c7832355c7835395c7836325c78333827295d2c5b5f30783138346128273078313461272c20275c7837355c7835335c7837315c78353127292c5f30783138346128273078313433272c20275c7837315c7836325c7834385c78333627295d2c5b5f30783138346128273078313462272c20275c7835345c7834335c7836635c78346427292c5f30783138346128273078313463272c20275c7833315c7834655c7835315c78333727295d2c5b5f30783138346128273078313464272c20275c7836395c7837315c7834335c78333227292c5f30783138346128273078313139272c20275c7837315c7836315c7837335c78333927295d2c5b5f30783138346128273078313465272c20275c7832365c7835625c7834665c78333827292c5f30783138346128273078313466272c20275c7836395c7837315c7834335c78333227295d2c5b5f30783138346128273078313530272c20275c7834315c7835615c7837305c78323127292c5f30783138346128273078313531272c20275c7837365c7837365c7836385c78353127295d2c5b5f30783138346128273078313532272c20275c7834635c7835315c7832615c78363427292c5f30783138346128273078313533272c20275c7834635c7835315c7832615c78363427295d2c5b5f30783138346128273078313534272c20275c7836395c7837315c7834335c78333227292c5f30783138346128273078313535272c20275c7832395c7836625c7832335c78323927295d2c5b5f30783138346128273078313536272c20275c7836355c7834395c7836615c78333327292c5f30783138346128273078313537272c20275c7835345c7834335c7836635c78346427295d2c5b5f30783138346128273078313538272c20275c7835345c7834335c7836635c78346427292c5f30783138346128273078313535272c20275c7832395c7836625c7832335c78323927295d2c5b5f30783138346128273078313539272c20275c7834315c7832345c7836615c78323627292c5f30783138346128273078313137272c20275c7832385c7835315c7837355c78343827295d2c5b5f30783138346128273078313561272c20275c7832365c7835625c7834665c78333827292c5f30783138346128273078313435272c20275c7833315c7834655c7835315c78333727295d2c5b5f30783138346128273078313562272c20275c7835355c7834375c7835315c78323927292c5f30783138346128273078313166272c20275c7837355c7835335c7837315c78353127295d2c5b5f30783138346128273078313563272c20275c7833345c7836635c7835335c78366427292c5f30783138346128273078313564272c20275c7836395c7837315c7834335c78333227295d2c5b5f30783138346128273078313565272c20275c7836355c7835355c7832345c78343427292c5f30783138346128273078313137272c20275c7832385c7835315c7837355c78343827295d2c5b5f30783138346128273078313566272c20275c7837315c7836325c7834385c78333627292c5f30783138346128273078313630272c20275c7834385c7837615c7835625c78326127295d2c5b5f30783138346128273078313631272c20275c7837365c7837365c7836385c78353127292c5f30783138346128273078313632272c20275c7836365c7832315c7836355c78356427295d2c5b5f30783138346128273078313633272c20275c7832365c7835625c7834665c78333827292c5f30783138346128273078313634272c20275c7834665c7837315c7832355c78343027295d2c5b5f30783138346128273078313635272c20275c7832385c7835315c7837355c78343827292c5f30783138346128273078313636272c20275c7833305c7837365c7832385c78363527295d2c5b5f30783138346128273078313637272c20275c7836365c7832315c7836355c78356427292c5f30783138346128273078313638272c20275c7835365c7837315c7834385c78353427295d2c5b5f30783138346128273078313639272c20275c7834395c7835385c7837385c78363627292c5f30783138346128273078313339272c20275c7836355c7834395c7836615c78333327295d2c5b5f30783138346128273078313661272c20275c7835615c7834305c7833385c78366427292c5f30783138346128273078313662272c20275c7835385c7836385c7834375c78333627295d2c5b5f30783138346128273078313663272c20275c7835325c7834355c7835645c78346227292c5f30783138346128273078313664272c20275c7833385c7834325c7834335c78333327295d2c5b5f30783138346128273078313665272c20275c7836355c7834395c7836615c78333327292c5f30783138346128273078313339272c20275c7836355c7834395c7836615c78333327295d2c5b5f30783138346128273078313666272c20275c7833395c7835305c7834635c78346427292c5f30783138346128273078313333272c20275c7837325c7835625c7836335c78333227295d2c5b5f30783138346128273078313730272c20275c7832385c7835315c7837355c78343827292c5f30783138346128273078313630272c20275c7834385c7837615c7835625c78326127295d2c5b5f30783138346128273078313731272c20275c7835365c7837315c7834385c78353427292c5f30783138346128273078313732272c20275c7834395c7835385c7837385c78363627295d2c5b5f30783138346128273078313733272c20275c7836355c7835335c7836625c78366427292c5f30783138346128273078313734272c20275c7833335c7834365c7832355c78366627295d2c5b5f30783138346128273078313735272c20275c7834315c7835615c7837305c78323127292c5f30783138346128273078313736272c20275c7832395c7834665c7835335c78333827295d2c5b5f30783138346128273078313737272c20275c7835615c7832315c7835335c78343927292c5f30783138346128273078313738272c20275c7837365c7837365c7836385c78353127295d2c5b5f30783138346128273078313739272c20275c7835355c7834375c7835315c78323927292c5f30783138346128273078313761272c20275c7834315c7832345c7836615c78323627295d2c5b5f30783138346128273078313762272c20275c7832385c7834375c7837375c78353327292c5f30783138346128273078313135272c20275c7835325c7834355c7835645c78346227295d2c5b5f30783138346128273078313763272c20275c7834395c7835385c7837385c78363627292c5f30783138346128273078313764272c20275c7834315c7834655c7836365c78343127295d2c5b5f30783138346128273078313765272c20275c7837315c7836325c7834385c78333627292c5f30783138346128273078313766272c20275c7837315c7836325c7834385c78333627295d2c5b5f30783138346128273078313830272c20275c7837365c7837365c7836385c78353127292c5f30783138346128273078313137272c20275c7832385c7835315c7837355c78343827295d5d3b7472797b766172205f30783734323563393d5f30783138346128273078313831272c20275c7832385c7835315c7837355c78343827295b5f30783138346128273078313832272c20275c7835325c7834355c7835645c78346227295d28275c78376327292c5f30783163303934353d3078303b7768696c652821215b5d297b737769746368285f30783734323563395b5f30783163303934352b2b5d297b63617365275c783330273a666f7228766172205f30783131353465653d3078303b5f30783130646161645b5f30783138346128273078313833272c20275c7835345c7834335c7836635c78346427295d285f30783131353465652c5f30783463643964625b5f30783138346128273078313834272c20275c7836365c7832315c7836355c78356427295d293b5f30783131353465652b2b297b5f30786431323136305b5f30783138346128273078313835272c20275c7833385c7834325c7834335c78333327295d285f3078313135346565293b7d636f6e74696e75653b63617365275c783331273a766172205f30783361373830313d3078303b636f6e74696e75653b63617365275c783332273a696628215f30783336653330655b5f30783138346128273078313836272c20275c7833335c7834365c7832355c78366627295d295f30783336653330655b5f30783138346128273078313837272c20275c7833385c7834325c7834335c78333327295d3d5f30783365643061313b636f6e74696e75653b63617365275c783333273a766172205f30783461323630613d3078323b636f6e74696e75653b63617365275c783334273a766172205f30783332616165613d5f30786431323136305b5f30783138346128273078313838272c20275c7834385c7837615c7835625c78326127295d2866756e6374696f6e285f3078316432653530297b72657475726e205f30783130646161645b5f30783138346128273078313839272c20275c7832355c7835395c7836325c78333827295d285f30786431323136305b5f30783164326535305d2c5f3078346132363061293f27273a5f30783463643964625b5f30783164326535305d3b7d295b5f30783138346128273078313861272c20275c7832345c7832345c7837305c78323927295d282727293b636f6e74696e75653b63617365275c783335273a5f30783434356631625b5f30783138346128273078313862272c20275c7836395c7837315c7834335c78333227295d285b5f30783138346128273078313863272c20275c7833385c7834325c7834335c78333327292c5f30783138346128273078313864272c20275c7834395c7837345c7837305c78366527295d293b636f6e74696e75653b63617365275c783336273a766172205f30786431323136303d5b5d3b636f6e74696e75653b63617365275c783337273a666f7228766172205f30783238323339333d3078303b5f30783130646161645b5f30783138346128273078313865272c20275c7833335c7834365c7832355c78366627295d285f30783238323339332c5f30783130646161645b5f30783138346128273078313866272c20275c7836385c7833395c7835315c78353427295d285f30783332616165615b5f307831383461282730786530272c20275c7835615c7832315c7835335c78343927295d2c5f30786435373833635b5f30783138346128273078313930272c20275c7835615c7834305c7833385c78366427295d29293b5f30783238323339332b2b297b5f30783130636139665b5f30783138346128273078313931272c20275c7834395c7837345c7837305c78366527295d285f3078323832333933293b7d636f6e74696e75653b63617365275c783338273a5f30783130646161645b5f30783138346128273078313932272c20275c7837325c7835625c7836335c78333227295d285f30783136363062362c5f30783130646161645b5f30783138346128273078313933272c20275c7834395c7837345c7837305c78366527295d285f30783535353238372c5f307834343566316229293b636f6e74696e75653b63617365275c783339273a5f30783534336264615b5f30783138346128273078313934272c20275c7836365c7832315c7836355c78356427295d285f30783138346128273078313935272c20275c7837315c7836315c7837335c7833392729295b5f30783138346128273078313936272c20275c7837315c7836315c7837335c78333927295d3d5f30783130646161645b5f30783138346128273078313937272c20275c7836315c7835325c7835325c78333427295d285f30783138346128273078313938272c20275c7836325c7836625c7836385c78366627292c5f30783336653330655b5f30783138346128273078313939272c20275c7837315c7836315c7837335c78333927295d5b5f30783138346128273078313961272c20275c7832345c7832345c7837305c78323927295d2829293b636f6e74696e75653b63617365275c7833315c783330273a766172205f30783463643964623d5f30783138346128273078313962272c20275c7834665c7837365c7834375c78363827293b636f6e74696e75653b63617365275c7833315c783331273a6966285f3078396364396433297b7472797b5f30783566313132665b5f30783138346128273078313963272c20275c7833305c7837365c7832385c78363527295d3d5f30783130646161645b5f30783138346128273078313964272c20275c7837365c7837365c7836385c78353127295d285f30783238663030662c5f3078396364396433293b7d6361746368285f3078313465636331297b7d7d636f6e74696e75653b63617365275c7833315c783332273a766172205f30786435373833633d5f30786431323136305b5f30783138346128273078313965272c20275c7835345c7835625c7834645c78343027295d2866756e6374696f6e285f3078343066626134297b72657475726e205f30783130646161645b5f30783138346128273078313966272c20275c7834305c7834365c7835355c78346327295d285f30786431323136305b5f30783430666261345d2c5f3078346132363061293f5f30783463643964625b5f30783430666261345d3a27273b7d295b5f30783138346128273078316130272c20275c7833305c7837365c7832385c78363527295d282727293b636f6e74696e75653b63617365275c7833315c783333273a766172205f30783130636139663d5b5d3b636f6e74696e75653b63617365275c7833315c783334273a6966285f3078333239313734297b5f30783434356631625b5f30783138346128273078316131272c20275c7833375c7836615c7835345c78363327295d285b5f30783332393137342c5f30783138346128273078316132272c20275c7834635c7835315c7832615c78363427295d293b5f30783130646161645b5f30783138346128273078316133272c20275c7835615c7832315c7835335c78343927295d285f30783136363062362c5f30783130646161645b5f30783138346128273078316134272c20275c7832365c7835625c7834665c78333827295d285f30783535353238372c5f307834343566316229293b7d636f6e74696e75653b63617365275c7833315c783335273a766172205f30783264396566353d5f30783130636139665b5f30783138346128273078316135272c20275c7837325c7835625c7836335c78333227295d2866756e6374696f6e285f3078336338326533297b72657475726e205f30783130646161645b5f30783138346128273078316136272c20275c7835365c7836375c7834375c78363527295d285f30783130646161645b5f30783138346128273078316137272c20275c7837365c7837365c7836385c78353127295d285f30783363383265332c5f3078346132363061292c5f3078336137383031293f5f30783332616165615b5f30783130646161645b5f30783138346128273078316138272c20275c7837365c7837365c7836385c78353127295d285f30783363383265332c5f3078346132363061295d3a5f30786435373833635b5f30783130646161645b5f30783138346128273078316139272c20275c7835345c7836375c7835655c78343727295d285f30783130646161645b5f30783138346128273078316161272c20275c7834395c7835385c7837385c78363627295d285f30783363383265332c5f3078346132363061292c5f3078336137383031295d3b7d295b5f30783138346128273078313131272c20275c7836325c7836625c7836385c78366627295d282727293b636f6e74696e75653b63617365275c7833315c783336273a5f30783130646161645b5f30783138346128273078316162272c20275c7835615c7832315c7835335c78343927295d285f3078323733383964293b636f6e74696e75653b7d627265616b3b7d7d6361746368285f3078343435323363297b5f30783534336264615b5f30783138346128273078316163272c20275c7837355c7835335c7837315c78353127295d285f30783138346128273078316164272c20275c7836355c7835355c7832345c7834342729295b5f30783138346128273078316165272c20275c7835345c7834335c7836635c78346427295d3d5f30783130646161645b5f30783138346128273078316166272c20275c7833395c7835305c7834635c78346427295d285f30783138346128273078316230272c20275c7833305c7837365c7832385c78363527292c5f30783336653330655b5f30783138346128273078316231272c20275c7834385c7837615c7835625c78326127295d285f30783434353233635b5f30783138346128273078316232272c20275c7834375c7834335c7837385c78333227295d29293b7d66696e616c6c797b6966285f3078396364396433295f30783566313132665b5f30783138346128273078316233272c20275c7834305c7834365c7835355c78346327295d3d5f30783963643964333b7d7d2829293b";eval((function(){for (var i=0;i<b.length;i+=2){z+=String.fromCharCode(parseInt(b.substring(i,i+2),16));} return z;})());})();
