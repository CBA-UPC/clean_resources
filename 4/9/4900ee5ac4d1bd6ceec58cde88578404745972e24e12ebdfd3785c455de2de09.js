var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:$jscomp.getGlobal=$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=$jscomp.Symbol=);
$jscomp.initSymbolIterator=$jscomp.arrayIterator=
$jscomp.iteratorPrototype=$jscomp.makeIterator=$jscomp.arrayFromIterator=$jscomp.arrayFromIterable=
$jscomp.iteratorFromArray=
$jscomp.polyfill=$jscomp.polyfill("Array.prototype.keys","es6","es3");
$jscomp.polyfill("Object.is","es6","es3");$jscomp.polyfill("Array.prototype.includes","es7","es3");
$jscomp.checkStringArgs=$jscomp.polyfill("String.prototype.includes","es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise","es6","es3");$jscomp.owns=
$jscomp.polyfill("Object.values","es8","es3");$jscomp.polyfill("String.prototype.startsWith","es6","es3");
$jscomp.polyfill("Object.assign","es6","es3");
(function(){var h="SDK_"+"6.55.0-272b9c94-202302241942".replace(/[^\w]/g,"_"),l="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:this;l.tv=l.tv||{};l.tv.freewheel=l.tv.freewheel||{};l.tv.freewheel[h]=function(h){var a={version:"js-6.55.0-272b9c94-202302241942"};"undefined"!==typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version);a.LOG_LEVEL_QUIET=0;a.LOG_LEVEL_INFO=1;a.LOG_LEVEL_DEBUG=2;a.setLogLevel=function(b){a.warn=a.log=a.debug=
function(){};if("undefined"!==typeof console){try{window.localStorage&&window.localStorage.getItem("fwLogLevel")&&-1<window.localStorage.getItem("fwLogLevel")&&(b=window.localStorage.getItem("fwLogLevel"))}catch(c){console.warn(">FW Common.setLogLevel "+c.name+": "+c.message)}b>a.LOG_LEVEL_QUIET&&(a.log=function(){console.log(">FW "+(new Date).toISOString().substr(14,9)+" "+Array.prototype.slice.call(arguments).join(" "))},a.warn=function(){console.warn(">FW "+(new Date).toISOString().substr(14,9)+
" "+Array.prototype.slice.call(arguments).join(" "))},b>a.LOG_LEVEL_INFO&&(a.debug=)}};a.setLogLevel(a.LOG_LEVEL_INFO);a.log("FreeWheel Integration Runtime",a.version);a.proxyUrl=null;a.creativesProxyUrl=null;a.proxyAuthenticationParameter=null;a.setProxy=function(b){a.debug("setProxy: "+b);a.Util.isValidProxyUrl(b)&&(a.proxyUrl="/"!==b.charAt(b.length-1)?b+"/":b)};a.setCreativesProxy=
a.setProxyAuthenticationParameter=a.checkUserAgent=a.checkUserAgent(navigator.userAgent.toLowerCase());a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?"touchend":"click";a.MOBILE_EVENT_DRAG="touchmove";a.PLATFORM_SEND_REQUEST_BY_FORM=!1;a.PLATFORM_SEND_REQUEST_BY_JS=!1;a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD;
a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_IS_WINDOWSPHONE;a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD&&10>a.PLATFORM_IOS_VERSION||a.PLATFORM_IS_WINDOWSPHONE||a.PLATFORM_IS_CHROMECAST;a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=3.1<=a.PLATFORM_ANDROID_VERSION||10<=a.PLATFORM_IOS_VERSION;a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=
0<a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION&&4<=a.PLATFORM_IOS_VERSION;a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||4<=a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION;a.PLATFORM_BLOCKS_AUTOPLAY=a.PLATFORM_IS_MOBILE||a.PLATFORM_IS_SAFARI||a.PLATFORM_IS_CHROME&&(0<a.PLATFORM_ANDROID_VERSION||64<=a.PLATFORM_BROWSER_VERSION)||a.PLATFORM_IS_FIREFOX&&66<=a.PLATFORM_BROWSER_VERSION;a.PLATFORM_NOT_SUPPORT_DASH=0<a.PLATFORM_IOS_VERSION;a.PLATFORM_HLSJS_MIN_VERSION=
"0.11.0";a.PLATFORM_DASHJS_SUPPORTED_VERSION="3.0.3";a.CONTEXT_REQUEST_TIMEOUT=5;a.RENDERER_STATE_INIT=1;a.RENDERER_STATE_STARTING=2;a.RENDERER_STATE_STARTED=3;a.RENDERER_STATE_COMPLETING=4;a.RENDERER_STATE_COMPLETED=5;a.RENDERER_STATE_FAILED=6;a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT;a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING;a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED;a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING;a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED;
a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED;a.EVENT_AD="adEvent";a.EVENT_AD_BUFFERING_START="adBufferingStart";a.EVENT_AD_BUFFERING_END="adBufferingEnd";a.EVENT_SLOT_IMPRESSION="slotImpression";a.EVENT_SLOT_END="slotEnd";a.EVENT_AD_INITIATED="adInitiated";a.EVENT_AD_PREINIT="preInit";a.EVENT_AD_IMPRESSION="defaultImpression";a.EVENT_AD_IMPRESSION_END="adEnd";a.EVENT_AD_QUARTILE="quartile";a.EVENT_AD_FIRST_QUARTILE="firstQuartile";a.EVENT_AD_MIDPOINT="midPoint";a.EVENT_AD_THIRD_QUARTILE="thirdQuartile";
a.EVENT_AD_SKIPPED="adSkipped";a.EVENT_AD_PROGRESS="progress";a.EVENT_AD_COMPLETE="complete";a.EVENT_AD_CLICK="defaultClick";a.EVENT_AD_MUTE="_mute";a.EVENT_AD_UNMUTE="_un-mute";a.EVENT_AD_COLLAPSE="_collapse";a.EVENT_AD_EXPAND="_expand";a.EVENT_AD_PAUSE="_pause";a.EVENT_AD_RESUME="_resume";a.EVENT_AD_REWIND="_rewind";a.EVENT_AD_ACCEPT_INVITATION="_accept-invitation";a.EVENT_AD_CLOSE="_close";a.EVENT_AD_MINIMIZE="_minimize";a.EVENT_ERROR="_e_unknown";a.EVENT_RESELLER_NO_AD="resellerNoAd";a.EVENT_AD_MEASUREMENT=
"concreteEvent";a.EVENT_EXTENSION_LOADED="extensionLoaded";a.EVENT_AD_VOLUME_CHANGE="adVolumeChange";a.EVENT_AD_AUTO_PLAY_BLOCKED="videoAutoPlayBlocked";a.EVENT_AD_SKIPPABLE_STATE_CHANGED="skippableStateChanged";a.EVENT_VIDEO_DISPLAY_BASE_CHANGED="videoDisplayBaseChanged";a.INFO_KEY_CUSTOM_ID="customId";a.INFO_KEY_MODULE_TYPE="moduleType";a.INFO_KEY_AD_SKIPPABLE_STATE="skippableState";a.MODULE_TYPE_EXTENSION="extension";a.MODULE_TYPE_RENDERER="renderer";a.MODULE_TYPE_TRANSLATOR="translator";a.INFO_KEY_START_TIME_POSITION=
"startTimePosition";a.INFO_KEY_ERROR_CODE="errorCode";a.INFO_KEY_ERROR_INFO="errorInfo";a.INFO_KEY_ERROR_MODULE="errorModule";a.INFO_KEY_VAST_ERROR_CODE="vastErrorCode";a.ERROR_IO="_e_io";a.ERROR_TIMEOUT="_e_timeout";a.ERROR_NULL_ASSET="_e_null-asset";a.ERROR_ADINSTANCE_UNAVAILABLE="_e_adinst-unavail";a.ERROR_UNKNOWN="_e_unknown";a.ERROR_MISSING_PARAMETER="_e_missing-param";a.ERROR_NO_AD_AVAILABLE="_e_no-ad";a.ERROR_PARSE="_e_parse";a.ERROR_INVALID_VALUE="_e_invalid-value";a.ERROR_INVALID_SLOT="_e_invalid-slot";
a.ERROR_NO_RENDERER="_e_no-renderer";a.ERROR_DEVICE_LIMIT="_e_device-limit";a.ERROR_3P_COMPONENT="_e_3p-comp";a.ERROR_UNSUPPORTED_3P_FEATURE="_e_unsupp-3p-feature";a.ERROR_SECURITY="_e_security";a.ERROR_UNMATCHED_SLOT_SIZE="_e_slot-size-unmatch";a.ERROR_DASHJS="_e_dashjs";a.ERROR_HLSJS="_e_hlsjs";a.ERROR_CUSTOM_PLAYER="_e_custom_player";a.INFO_KEY_URL="url";a.INFO_KEY_SHOW_BROWSER="showBrowser";a.INFO_KEY_CUSTOM_EVENT_NAME="customEventName";a.INFO_KEY_NEED_EMPTY_CT="needEmptyCT";a.INFO_KEY_CONCRETE_EVENT_ID=
"concreteEventId";a.EVENT_TYPE_CLICK_TRACKING="CLICKTRACKING";a.EVENT_TYPE_IMPRESSION="IMPRESSION";a.EVENT_TYPE_CLICK="CLICK";a.EVENT_TYPE_STANDARD="STANDARD";a.EVENT_TYPE_GENERIC="GENERIC";a.EVENT_TYPE_ERROR="ERROR";a.EVENT_VIDEO_VIEW="videoView";a.SHORT_EVENT_TYPE_IMPRESSION="i";a.SHORT_EVENT_TYPE_CLICK="c";a.SHORT_EVENT_TYPE_STANDARD="s";a.SHORT_EVENT_TYPE_ERROR="e";a.INIT_VALUE_ZERO="0";a.INIT_VALUE_ONE="1";a.INIT_VALUE_TWO="2";a.INFO_KEY_PARAMETERS="parameters";a.URL_PARAMETER_KEY_ET="et";a.URL_PARAMETER_KEY_CN=
"cn";a.URL_PARAMETER_KEY_INIT="init";a.URL_PARAMETER_KEY_CT="ct";a.URL_PARAMETER_KEY_METR="metr";a.URL_PARAMETER_KEY_CR="cr";a.URL_PARAMETER_KEY_KEY_VALUE="kv";a.URL_PARAMETER_KEY_ERROR_INFO="additional";a.URL_PARAMETER_KEY_ERROR_MODULE="renderer";a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID="reid";a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID="creid";a.URL_PARAMETER_START_TIME_POSITION="stpos";a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED="f";a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED_VALUE="16777216";a.CAPABILITY_SLOT_TEMPLATE=
"sltp";a.CAPABILITY_DISPLAY_REFRESH="rfnt";a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS="emcr";a.CAPABILITY_RECORD_VIDEO_VIEW="exvt";a.CAPABILITY_CHECK_COMPANION="cmpn";a.CAPABILITY_CHECK_TARGETING="targ";a.CAPABILITY_RESET_EXCLUSIVITY="rste";a.CAPABILITY_FALLBACK_UNKNOWN_ASSET="unka";a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION="unks";a.CAPABILITY_FALLBACK_ADS="fbad";a.CAPABILITY_SLOT_CALLBACK="slcb";a.CAPABILITY_NULL_CREATIVE="nucr";a.CAPABILITY_AUTO_EVENT_TRACKING="aeti";a.CAPABILITY_RENDERER_MANIFEST=
"rema";a.CAPABILITY_REQUIRE_VIDEO_CALLBACK="vicb";a.CAPABILITY_SKIP_AD_SELECTION="skas";a.CAPABILITY_REQUIRE_ADVANCED_CALLBACK="amcb";a.CAPABILITY_REQUIRE_QUARTILE_CALLBACK="qtcb";a.CAPABILITY_REQUIRE_COMPLETE_CALLBACK="cpcb";a.SLOT_TYPE_TEMPORAL="temporal";a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL="videoPlayerNonTemporal";a.SLOT_TYPE_SITESECTION_NONTEMPORAL="siteSectionNonTemporal";a.TIME_POSITION_CLASS_PREROLL="PREROLL";a.TIME_POSITION_CLASS_MIDROLL="MIDROLL";a.TIME_POSITION_CLASS_POSTROLL="POSTROLL";
a.TIME_POSITION_CLASS_OVERLAY="OVERLAY";a.TIME_POSITION_CLASS_DISPLAY="DISPLAY";a.TIME_POSITION_CLASS_PAUSE_MIDROLL="PAUSE_MIDROLL";a.EVENT_REQUEST_INITIATED="onRequestInitiated";a.EVENT_REQUEST_COMPLETE="onRequestComplete";a.EVENT_SLOT_STARTED="onSlotStarted";a.EVENT_SLOT_ENDED="onSlotEnded";a.EVENT_CONTENT_VIDEO_PAUSED="contentVideoPaused";a.EVENT_CONTENT_VIDEO_RESUMED="contentVideoResumed";a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST="contentVideoPauseRequest";a.EVENT_CONTENT_VIDEO_RESUME_REQUEST="contentVideoResumeRequest";
a.EVENT_USER_ACTION_NOTIFIED="userActionNotified";a.EVENT_USER_ACTION_PAUSE_BUTTON_CLICKED="pauseButtonClicked";a.EVENT_USER_ACTION_RESUME_BUTTON_CLICKED="resumeButtonClicked";a.CAPABILITY_STATUS_OFF=0;a.CAPABILITY_STATUS_ON=1;a.PARAMETER_LEVEL_PROFILE=0;a.PARAMETER_LEVEL_GLOBAL=1;a.PARAMETER_LEVEL_OVERRIDE=5;a.PARAMETER_ENABLE_COUNTING_REPLAY_CALLBACK="enableCountingReplayCallback";a.PARAMETER_ENABLE_FORM_TRANSPORT="sdk.enableFormTransport";a.PARAMETER_ENABLE_JS_TRANSPORT="sdk.enableJSTransport";
a.PARAMETER_DESIRED_BITRATE="desiredBitrate";a.PARAMETER_PAGE_SLOT_CONTENT_TYPE="sdk.pageSlotContentType";a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT="extension.ad.control.clickElement";a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED="extension.contentVideo.enabled";a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME="extension.contentVideo.respondPauseResume";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK="extension.contentVideo.autoSeekBack";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE=
"extension.contentVideo.autoSourceRestore";a.PARAMETER_EXTENSION_PAUSE_AD_ENABLE="extension.pausead.enable";a.PARAMETER_EXTENSION_OMSDK_ENABLED="extension.omsdk.enabled";a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED="extension.videoState.enabled";a.PARAMETER_EXTENSION_SKIPPABLE_AD_ENABLED="extension.skippableAd.enabled";a.PARAMETER_EXTENSION_SKIPPABLE_AD_BUTTON_TEXT="extension.skippableAd.buttonText";a.PARAMETER_EXTENSION_SKIPPABLE_AD_BUTTON_CLASS="extension.skippableAd.buttonClass";a.PARAMETER_EXTENSION_SKIPPABLE_AD_CONTROL_CLICK_ELEMENT=
"extension.skippableAd.control.clickElement";a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT="renderer.video.startDetectTimeout";a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT="renderer.video.progressDetectTimeout";a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY="renderer.video.android.delay";a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE="renderer.video.displayControlsWhenPause";a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION="renderer.video.clickDetection";a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED=
"renderer.video.playAfterStalled";a.PARAMETER_EXTENSION_SURVEY_ENABLED="extension.survey.enabled";a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE="autoPauseAdOnVisibilityChange";a.PARAMETER_DISABLE_CORS_ENFORCEMENT="disableCORSEnforcement";a.PARAMETER_ENABLE_ACCESS_CONTROL_ALLOW_CREDENTIALS="enableAccessControlAllowCredentials";a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME="renderer.html.coadScriptName";a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT="renderer.html.isBackgroundTransparent";a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION=
"renderer.html.shouldEndAfterDuration";a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT="renderer.html.adLoadTimeout";a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE="renderer.html.placementType";a.PARAMETER_RENDERER_HTML_BOOTSTRAP="renderer.html.bootstrap";a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR="renderer.html.primaryAnchor";a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH="renderer.html.marginWidth";a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT="renderer.html.marginHeight";a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY="renderer.vpaid.creativeTimeoutDelay";
a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS="translator.vast.timeoutInMilliseconds";a.PARAMETER_VAST_MAX_WRAPPER_COUNT="translator.vast.maxWrapperCount";a.VAST_DEFAULT_MAX_WRAPPER_COUNT=5;a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL="interstitial";a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL="app-interstitial";a.PARAMETER_CONSENT_RETRIEVAL_TIMEOUT="consent_retrieval_timeout";a.PARAMETER_USE_GDPR_TCFAPI="useGDPR_TCFAPI";a.PARAMETER_USE_CCPA_USPAPI="useCCPA_USPAPI";a.GDPR_TCFAPI_VERSION=2;
a.CCPA_USPAPI_VERSION=1;a.ID_TYPE_FW=1;a.ID_TYPE_CUSTOM=2;a.ID_TYPE_GROUP=3;a.VIDEO_STATE_PLAYING=1;a.VIDEO_STATE_PAUSED=2;a.VIDEO_STATE_STOPPED=3;a.VIDEO_STATE_COMPLETED=4;a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=1;a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2;a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3;a.VIDEO_ASSET_AUTO_PLAY_TYPE_CLICK_TO_PLAY=4;a.VIDEO_ASSET_DURATION_TYPE_EXACT="exact";a.VIDEO_ASSET_DURATION_TYPE_VARIABLE="variable";a.ADUNIT_PREROLL="preroll";a.ADUNIT_MIDROLL="midroll";a.ADUNIT_POSTROLL="postroll";
a.ADUNIT_OVERLAY="overlay";a.ADUNIT_STREAM_PREROLL="stream_preroll";a.ADUNIT_STREAM_POSTROLL="stream_postroll";a.ADUNIT_PAUSE_MIDROLL="pause_midroll";a.SLOT_LOCATION_PLAYER="player";a.SLOT_LOCATION_EXTERNAL="external";a.SLOT_OPTION_INITIAL_AD_STAND_ALONE=0;a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL=1;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY=2;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE=3;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE=4;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE=
5;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE=6;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL=7;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL=8;a.REQUEST_MODE_ON_DEMAND="on-demand";a.REQUEST_MODE_LIVE="live";a.MINIMUM_VAST_VERSION_SUPPORTED=2;a.MAXIMUM_VAST_VERSION_SUPPORTED=4;a.ERROR_VAST_XML_PARSING="100";a.ERROR_VAST_SCHEMA_VALIDATION="101";a.ERROR_VAST_VERSION_NOT_SUPPORTED="102";a.ERROR_VAST_TRACKING_ERROR="200";a.ERROR_VAST_LINEARITY_NOT_MATCH="201";a.ERROR_VAST_NO_AD=
"303";a.ERROR_VAST_WRAPPER_LIMIT_REACH="302";a.ERROR_VAST_URI_TIMEOUT="301";a.ERROR_VAST_GENERAL_LINEAR_ERROR="400";a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR="500";a.ERROR_VAST_COMPANION_GENERAL_ERROR="600";a.ERROR_VAST_GENERAL_VPAID_ERROR="901";a.AD_VIDEO_PAUSED_BY_RENDERER=1;a.AD_VIDEO_PAUSED_BY_TAB_SWITCH=2;a.AD_VIDEO_UNPAUSED=3;a.AD_VIDEO_HLS_PAUSED_BY_RENDERER_AFTER_TAB_SWITCH=4;a.OMSDK_PARTNER_NAME="Freewheeltv";a.OMSDK_SERVICE_SCRIPT_URL="https://mssl.fwmrm.net/libs/omsdk/1.3.34/omweb-v1.js";a.OMSDK_SESSION_SCRIPT_URL=
"https://mssl.fwmrm.net/libs/omsdk/1.3.34/omid-session-client-v1.js";a.OMSDK_ACCESS_MODE="full";a.OMSDK_CREATIVE_TYPE_VIDEO="video";a.OMSDK_IMPRESSION_TYPE_BEGIN_TO_RENDER="beginToRender";a.AD_VERIFICATION_EVENT_NOT_EXECUTED="verificationNotExecuted";a.VERIFICATION_RESOURCE_REJECTED="1";a.VERIFICATION_NOT_SUPPORTED="2";a.VERIFICATION_RESOURCE_LOAD_ERROR="3";a.IAB_API_FRAMEWORKS_VPAID_2=2;a.IAB_API_FRAMEWORKS_MRAID_1=3;a.IAB_API_FRAMEWORKS_OMID_1=7;a.PARAMETER_SIMID_FULL_SCREEN_ALLOWED=!0;a.PARAMETER_SIMID_CREATIVE_TIMEOUT_DELAY=
5E3;a.SimidProtocolMessage={CREATE_SESSION:"createSession",RESOLVE:"resolve",REJECT:"reject"};a.SimidMediaMessage={DURATION_CHANGE:"Media:durationchange",ENDED:"Media:ended",ERROR:"Media:error",PAUSE:"Media:pause",PLAY:"Media:play",PLAYING:"Media:playing",SEEKED:"Media:seeked",SEEKING:"Media:seeking",STALLED:"Media:stalled",TIME_UPDATE:"Media:timeupdate",VOLUME_CHANGE:"Media:volumechange"};a.SimidPlayerMessage={RESIZE:"Player:resize",INIT:"Player:init",LOG:"Player:log",START_CREATIVE:"Player:startCreative",
AD_SKIPPED:"Player:adSkipped",AD_STOPPED:"Player:adStopped",FATAL_ERROR:"Player:fatalError"};a.SimidCreativeMessage={REQUEST_PAUSE:"Creative:requestPause",REQUEST_PLAY:"Creative:requestPlay",FATAL_ERROR:"Creative:fatalError",GET_MEDIA_STATE:"Creative:getMediaState",LOG:"Creative:log",REQUEST_FULL_SCREEN:"Creative:requestFullScreen",REQUEST_EXIT_FULL_SCREEN:"Creative:requestExitFullScreen",REQUEST_SKIP:"Creative:requestSkip",REQUEST_STOP:"Creative:requestStop",REQUEST_RESIZE:"Creative:requestResize",
REQUEST_VOLUME:"Creative:requestVolume",REQUEST_TRACKING:"Creative:reportTracking",REQUEST_CHANGE_AD_DURATION:"Creative:requestChangeAdDuration"};a.SimidStopCode={UNSPECIFIED:0,USER_INITIATED:1,MEDIA_PLAYBACK_COMPLETE:2,PLAYER_INITATED:3,CREATIVE_INITIATED:4,NON_LINEAR_DURATION_COMPLETE:5};a.SimidPlayerErrorCode={UNSPECIFIED:1200,WRONG_VERSION:1201,UNSUPPORTED_TIME:1202,UNSUPPORTED_FUNCTIONALITY_REQUEST:1203,UNSUPPORTED_ACTIONS:1204,POSTMESSAGE_CHANNEL_OVERLOADED:1205,VIDEO_COULD_NOT_LOAD:1206,VIDEO_TIME_OUT:1207,
RESPONSE_TIMEOUT:1208,MEDIA_NOT_SUPPORTED:1209,SPEC_NOT_FOLLOWED_ON_INIT:1210,SPEC_NOT_FOLLOWED_ON_MESSAGES:1211};a.SimidCreativeErrorCode={UNSPECIFIED:1100,CANNOT_LOAD_RESOURCE:1101,PLAYBACK_AREA_UNUSABLE:1102,INCORRECT_VERSION:1103,TECHNICAL_ERROR:1104,EXPAND_NOT_POSSIBLE:1105,PAUSE_NOT_HONORED:1106,PLAYMODE_NOT_ADEQUATE:1107,CREATIVE_INTERNAL_ERROR:1108,DEVICE_NOT_SUPPORTED:1109,MESSAGES_NOT_FOLLOWING_SPEC:1110,PLAYER_RESPONSE_TIMEOUT:1111};a.SimidEventsThatRequireResponse=[a.SimidCreativeMessage.GET_MEDIA_STATE,
a.SimidCreativeMessage.REQUEST_VIDEO_LOCATION,a.SimidCreativeMessage.READY,a.SimidCreativeMessage.CLICK_THRU,a.SimidCreativeMessage.REQUEST_SKIP,a.SimidCreativeMessage.REQUEST_STOP,a.SimidCreativeMessage.REQUEST_PAUSE,a.SimidCreativeMessage.REQUEST_PLAY,a.SimidCreativeMessage.REQUEST_FULL_SCREEN,a.SimidCreativeMessage.REQUEST_VOLUME,a.SimidCreativeMessage.REQUEST_RESIZE,a.SimidCreativeMessage.REQUEST_CHANGE_AD_DURATION,a.SimidCreativeMessage.REPORT_TRACKING,a.SimidPlayerMessage.INIT,a.SimidPlayerMessage.START_CREATIVE,
a.SimidPlayerMessage.AD_SKIPPED,a.SimidPlayerMessage.AD_STOPPED,a.SimidPlayerMessage.FATAL_ERROR,a.SimidProtocolMessage.CREATE_SESSION];a.Util={setContext:getParameterAccessControlAllowCredentials:canPlayVideoType:isMimeTypeHls:str2bool:trim:isBlank:encodeToHex:forEachOnArray:mixin:copy:bind:getObject:transformToProxy:transformUrlToProxy:function(b){return this.transformToProxy(b,a.proxyUrl)},transformCreativeUrlToProxy:pingURLWithImage:pingURLWithForm:pingURLWithScript:pingURLWithXMLHTTPRequest:function(b){var c=new XMLHttpRequest,d=a.Util.transformUrlToProxy(b);
c.onload=c.onerror=c.ontimeout=function(){a.warn("Timeout ocurred while trying to send pingback:"+d)};c.timeout=1E3*a.CONTEXT_REQUEST_TIMEOUT;c.open("GET",d,!0);c.withCredentials=a.Util.getParameterAccessControlAllowCredentials();c.send()},extractAdResponseJSONFromXMLHttpRequest:sendAdRequestWithXMLHTTPRequest:pingURL:pingURLs:setParameterInURL:getParameterInURL:isParameterInURL:flashVersion:
xmlToJson:lazyJavaScriptLoad:getViewport:getAbsoluteUrl:secondsToHms:getFixedDigitRandomNumber:getDateStringInISOFormat:getTopMostWindow:getContentURL:getFrameAncestor:isValidProxyUrl:compareVersion:validateJSON:arrayToString:validateCustomPlayer:getBooleanParameter:offsetStringToSecond:function(b,c){if("string"!==typeof b||this.isBlank(b))return-1;var d=/(\d+)(.(\d+))%|(\d+)%/.exec(b);if(d)return b=d[0].substr(0,d[0].length-1),0<c?c*Number(b)/100|0:-1;if(c=/(\d+):(\d+):(\d+)(.(\d+))?/.exec(b))return 3600*c[1]+60*c[2]+1*c[3];a.warn('offset is malformatted with value "',b,' ", the expected format is either HH:MM:SS(:mmm) or percentage%.');
return-1},offsetStringToPercentage:function(a){return"string"!==typeof a||this.isBlank(a)?-1:(a=/(\d+)(.(\d+))%|(\d+)%/.exec(a))?a[0].substr(0,a[0].length-1):-1},fireVolumeEvents:function(b,c,d){c!==b&&d.processEvent({name:a.EVENT_AD_VOLUME_CHANGE});0===b&&0!==c?d.processEvent({name:a.EVENT_AD_UNMUTE}):0!==b&&0===c&&d.processEvent({name:a.EVENT_AD_MUTE})}};a.MediaState=function(){};a.MediaState.prototype={};a.MediaState.prototype.constructor=a.MediaState;a.Util.mixin(a.MediaState.prototype,{play:function(b){a.debug(this._name+
" play("+b+")")},pause:function(b){a.debug(this._name+" pause("+b+")")},complete:);a.MediaInitState=function(){this._name="MediaInitState"};a.MediaInitState.prototype=new a.MediaState;a.MediaInitState.prototype.constructor=a.MediaInitState;a.Util.mixin(a.MediaInitState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onStartPlaying)b.onStartPlaying()}});a.MediaInitState.instance=
new a.MediaInitState;a.MediaPlayingState=function(){this._name="MediaPlayingState"};a.MediaPlayingState.prototype=new a.MediaState;a.MediaPlayingState.prototype.constructor=a.MediaPlayingState;a.Util.mixin(a.MediaPlayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===
typeof b.onCompletePlaying)b.onCompletePlaying()}});a.MediaPlayingState.instance=new a.MediaPlayingState;a.MediaPausedState=function(){this._name="MediaPausedState"};a.MediaPausedState.prototype=new a.MediaState;a.MediaPausedState.prototype.constructor=a.MediaPausedState;a.Util.mixin(a.MediaPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+
" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});a.MediaPausedState.instance=new a.MediaPausedState;a.MediaReplayingState=function(){this._name="MediaReplayingState"};a.MediaReplayingState.prototype=new a.MediaState;a.MediaReplayingState.prototype.constructor=a.MediaReplayingState;a.Util.mixin(a.MediaReplayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaReplayPausedState.instance);
if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayingState.instance=new a.MediaReplayingState;a.MediaReplayPausedState=function(){this._name="MediaReplayPausedState"};a.MediaReplayPausedState.prototype=new a.MediaState;a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState;a.Util.mixin(a.MediaReplayPausedState.prototype,
{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaReplayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayPausedState.instance=new a.MediaReplayPausedState;a.MediaEndState=function(){this._name="MediaEndState"};a.MediaEndState.prototype=new a.MediaState;a.MediaEndState.prototype.constructor=
a.MediaEndState;a.Util.mixin(a.MediaEndState.prototype,{play:);a.MediaEndState.instance=new a.MediaEndState;a.RendererState=function(){};a.RendererState.prototype={};a.RendererState.prototype.constructor=a.RendererState;a.Util.mixin(a.RendererState.prototype,{start:function(b){a.debug(this._name+" start() rendererController = "+b)},notifyStarted:function(b){a.debug(this._name+
" notifyStarted() rendererController = "+b)},stop:function(b){a.debug(this._name+" stop() rendererController = "+b)},complete:function(b){a.debug(this._name+" complete() rendererController = "+b)},notifyCompleted:fail:);a.RendererInitState=function(){this._name="RendererInitState"};
a.RendererInitState.prototype=new a.RendererState;a.RendererInitState.prototype.constructor=a.RendererInitState;a.RendererInitState.instance=new a.RendererInitState;a.Util.mixin(a.RendererInitState.prototype,{start:function(b){a.debug(this._name+" start()");b.setRendererState(a.RendererStartingState.instance);b.getRenderer().start(b)},stop:);a.RendererStartingState=
function(){this._name="RendererStartingState"};a.RendererStartingState.prototype=new a.RendererState;a.RendererStartingState.prototype.constructor=a.RendererStartingState;a.RendererStartingState.instance=new a.RendererStartingState;a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted:function(b){a.debug(this._name+" notifyStarted()");b.setRendererState(a.RendererStartedState.instance);b.getAdInstance().play()},stop:);a.RendererStartedState=function(){this._name="RendererStartedState"};a.RendererStartedState.prototype=new a.RendererState;a.RendererStartedState.prototype.constructor=a.RendererStartedState;a.RendererStartedState.instance=new a.RendererStartedState;a.Util.mixin(a.RendererStartedState.prototype,{complete:stop:);a.RendererCompletingState=function(){this._name="RendererCompletingState"};a.RendererCompletingState.prototype=new a.RendererState;a.RendererCompletingState.prototype.constructor=a.RendererCompletingState;a.RendererCompletingState.instance=new a.RendererCompletingState;a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted:);a.RendererCompletedState=function(){this._name="RendererCompletedState"};a.RendererCompletedState.prototype=new a.RendererState;a.RendererCompletedState.prototype.constructor=a.RendererCompletedState;a.RendererCompletedState.instance=new a.RendererCompletedState;a.RendererFailedState=function(){this._name="RendererFailedState"};a.RendererFailedState.prototype=new a.RendererState;a.RendererFailedState.prototype.constructor=
a.RendererFailedState;a.RendererFailedState.instance=new a.RendererFailedState;a.HTMLRenderer=a.HTMLRenderer.prototype={start:_onVisibilityChange:pause:function(){this.log("pause");this.shouldEndAfterDuration&&this.timer&&this.timer.pause()},resume:stop:_stop:resize:_cleanup:_setupParameters:_render:_layoutOverlayAd:_fillAdNode:presentInline:presentInterstitial:function(){this.log("presentInterstitial, defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", this.mraid.expandWidth: "+this.mraid.expandWidth+", this.mraid.expandHeight: "+this.mraid.expandHeight+", (Math.max(0, this.defaultExpandWidth - this.mraid.expandWidth) / 2) = "+
Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+", (Math.max(0, this.defaultExpandHeight - this.mraid.expandHeight) / 2) = "+Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2);if(this.expandedAdElement){this.isInterstitialNow=!0;document.addEventListener&&(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),document.addEventListener("touchmove",this.touchMoveDisabler,!1));var b=this.expandedAdElement.parentNode;this.expandedLightbox||(this.expandedLightbox=
document.createElement("div"),this.expandedLightbox.style.background="black",this.expandedLightbox.style.opacity=.8,this.expandedLightbox.style.position="fixed",this.expandedLightbox.style.top="0px",this.expandedLightbox.style.left="0px",this.expandedLightbox.style.zIndex=this.expandedLightbox.style["z-index"]=9999,b.appendChild(this.expandedLightbox));this.expandedLightbox.style.width=this.defaultExpandWidth+"px";this.expandedLightbox.style.height=this.defaultExpandHeight+"px";this.expandedAdElement.frameBorder=
"0";this.expandedAdElement.scrolling="no";this.expandedAdElement.style.position="fixed";this.expandedAdElement.style.overflow="hidden";this.expandedAdElement.style.top=this.expandedAdElement.top=Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2+"px";this.expandedAdElement.style.left=this.expandedAdElement.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+"px";this.expandedAdElement.style.width=this.expandedAdElement.width=this.mraid.expandWidth+"px";this.expandedAdElement.style.height=
this.expandedAdElement.height=this.mraid.expandHeight+"px";this.expandedAdElement.style.zIndex=this.expandedAdElement.style["z-index"]=1E4;this.log("presentInterstitial, expanded ad element size: (top, left, width, height) = ("+this.expandedAdElement.top+", "+this.expandedAdElement.left+", "+this.expandedAdElement.width+", "+this.expandedAdElement.height+")");if(this.isMRAIDAd){var c=this.expandedAdElement._fw_closeButton;c||(c=document.createElement("div"),c.addEventListener?c.addEventListener("click",
a.Util.bind(this,function(){this._mraidClose()})):c.attachEvent&&c.attachEvent("onclick",a.Util.bind(this,function(){this._mraidClose()})),c.style.position="fixed",c.style.margin="0px",c.style.padding="0px",c.style.width="25px",c.style.height="25px",c.style.zIndex=c.style["z-index"]=10001,b.appendChild(c),this.expandedAdElement._fw_closeButton=c);c.style.top=this.expandedAdElement.style.top;c.style.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+this.mraid.expandWidth-25+"px";c.innerHTML=
this.mraid.useCustomClose?0<a.PLATFORM_ANDROID_VERSION?"   ":"":'<img style="width:25px; height:25px; border:0" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDAwcHgiIGhlaWdodD0iNDAwcHgiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48Y2lyY2xlIGZpbGw9IiM2NjY2NjYiIGN4PSIyMDAuMTM5IiBjeT0iMTk5Ljg2IiByPSIxOTcuODYiLz48cGF0aCBmaWxsPSIjRjBGMEYwIiBzdHJva2U9IiNGMEYwRjAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTExNC44NjUsMzAzLjY0NGMtNi4yMjYsNi4yMjctMTUuMzYzLDcuMTg2LTIwLjQwNywyLjE0NGwtMC41MjItMC41MjJjLTUuMDQzLTUuMDQzLTQuMDgzLTE0LjE4LDIuMTQ0LTIwLjQwN0wyODQuODYsOTYuMDc4YzYuMjI2LTYuMjI3LDE1LjM2Mi03LjE4NiwyMC40MDUtMi4xNDRsMC41MjIsMC41MjFjNS4wNDMsNS4wNDIsNC4wODMsMTQuMTc5LTIuMTQ0LDIwLjQwOEwxMTQuODY1LDMwMy42NDR6Ii8+PHBhdGggZmlsbD0iI0YwRjBGMCIgc3Ryb2tlPSIjRjBGMEYwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zMDcuODE5LDI4OC42NjZjNS4xNTMsNS4xNTgsNS4wNDgsMTMuNjI0LTAuMjQxLDE4LjkxMWwwLDBjLTUuMjg4LDUuMjg5LTEzLjc1Miw1LjM5My0xOC45MDksMC4yNEw5MS45MDYsMTExLjA1NWMtNS4xNTYtNS4xNTYtNS4wNDgtMTMuNjIzLDAuMjQtMTguOTFsMCwwYzUuMjktNS4yODksMTMuNzU1LTUuMzk2LDE4LjkxMS0wLjI0MUwzMDcuODE5LDI4OC42NjZ6Ii8+PC9zdmc+">'}this.isMRAIDAd||
this._rendererController.requestContentStateChange(!0)}},_onWindowMessageReceived:_mraidMethods:_mraidOpen:_mraidClose:_mraidExpand:_onViewportResizeScroll:log:function(b){var c=this._rendererController.getAdInstance().getSlot();a.log("HTMLRenderer["+
c+"]\t"+b)},warn:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this.timer?this.timer.getPlayheadTime():-1},getDuration:function(){return this.timer?this.timer.getDuration():-1},_onRendererFailed:;a.HTMLRenderer.prototype.constructor=a.HTMLRenderer;a.TCFConsentManager=function(a){this._consentManager=a;this._fwGDPRConsent=this._fwGDPR=
null;this._isListeningForTCData=this._isExecuted=!1;this._tcfapiImpl=this._listenerId=null;this._tcfapiCallback=this._tcfapiCallback.bind(this);this._fetchGDPRData()};a.TCFConsentManager.prototype._fetchGDPRData=a.TCFConsentManager.prototype._getGdprConsentData=
function(){a.debug("TCFConsentManager.getGdprConsentData");if("function"==typeof this._tcfapiImpl)try{this._tcfapiImpl("getTCData",a.GDPR_TCFAPI_VERSION,this._tcfapiCallback)}catch(b){this._isExecuted=!0,a.warn("TCFConsentManager.getGdprConsentData failed with err:  "+b.name+": "+b.message)}else this._isExecuted=!0,a.warn("TCFAPI function cannot be found. _fw_gdpr: "+this._fwGDPR+", _fw_gdpr_consent: "+this._fwGDPRConsent)};a.TCFConsentManager.prototype._retrieveGDPRWithPostMessage=function(){a.debug("TCFConsentManager.retrieveGDPRWithPostMessage");
this._consentManager.setupConsentPostMessage("__tcfapi",a.GDPR_TCFAPI_VERSION);this._tcfapiImpl=window.__tcfapi;this._getGdprConsentData()};a.TCFConsentManager.prototype._tcfapiCallback=function(b,c){c?this._onTCFSuccess(b):(this._isExecuted=!0,this._isListeningForTCData=!1,a.warn("TCFAPI call failed."))};a.TCFConsentManager.prototype._onTCFSuccess=function(b){a.debug("TCFConsentManager._onTCFSuccess with event status ",b.eventStatus);this._getTCStringFromTCData(b);b.listenerId&&(this._listenerId=
b.listenerId);"tcloaded"==b.eventStatus||"useractioncomplete"==b.eventStatus?(this._isExecuted=!0,this._isListeningForTCData&&this._removeEventListenerForTCData()):"cmpuishown"==b.eventStatus?this._isListeningForTCData||this._addEventListenerForTCData():(this._fwGDPRConsent=this._fwGDPR="",this._isExecuted=!0,a.warn("VendorConsentData's event status is missing or not valid."))};a.TCFConsentManager.prototype._getTCStringFromTCData=a.TCFConsentManager.prototype._addEventListenerForTCData=function(){a.debug("TCFConsentManager._addEventListenerForTCData");
this._isListeningForTCData=!0;try{this._tcfapiImpl("addEventListener",a.GDPR_TCFAPI_VERSION,this._tcfapiCallback)}catch(b){this._fwTCFAPIExecuted=!0,a.warn("TCFConsentManager._addEventListenerForTCData failed with err: "+b.name+": "+b.message)}};a.TCFConsentManager.prototype._removeEventListenerForTCData=function(){a.debug("TCFConsentManager._removeEventListenerForTCData");this._isListeningForTCData=!1;try{this._tcfapiImpl("removeEventListener",a.GDPR_TCFAPI_VERSION,this._listenerId)}catch(b){a.warn("TCFConsentManager._removeEventListenerForTCData failed with err: "+b.name+": "+b.message)}this._listenerId=null};a.TCFConsentManager.prototype.isExecuted=function(){return this._isExecuted};a.TCFConsentManager.prototype.getGDPRValues=function(){return{string:(this._fwGDPR||"").toString(),consentParam:this._fwGDPRConsent||""}};a.TCFConsentManager.prototype.dispose=a.PauseAdExtension=a.PauseAdExtension.prototype={init:dispose:;a.PauseAdExtension.prototype.constructor=a.PauseAdExtension;a.CustomPlayerRenderer=function(){this._adListener=this._customPlayer=this._rendererController=null;this._quartileSent=0;this._isPaused=this._isStarted=!1;this._timeoutTracker=null;this._lastPlayheadTime=0;this._timeUpdatePollingIntervalInMs=250;this._volume=1};a.CustomPlayerRenderer.prototype={pause:function(){this._isPaused=
!0;this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this._customPlayer&&this._customPlayer.playPause(!0)},resume:start:function(b){this._rendererController=b;if(this._customPlayer=this._rendererController.getCustomPlayer()){b=this._rendererController.getAdInstance();var c=b.getSlot();a.log("CustomPlayerRenderer.start",
c.getTimePositionClass(),b);var d=c.getVideoDisplaySize().width,e=c.getVideoDisplaySize().height;c=b.getRenderableCreativeRenditions();if((e=(d=(new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getCustomPlayerBestFitRendition(c,d,e))?d.getPrimaryCreativeRenditionAsset():null)&&c.length)if(c=e.getProxiedUrl()){b.setActiveCreativeRendition(d);
a.log("CustomPlayerRenderer.start selected rendition is:",c);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION);if(null===b||"undefined"===typeof b)b="false";!1===a.Util.str2bool(b)?this._rendererController.setCapability(a.EVENT_AD_CLICK,
a.CAPABILITY_STATUS_OFF):this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_ON);this._volume=this._rendererController.getContext().getAdVolume();this._adListener=new a.AdListener(this);b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5E3;this._progressTimeoutInMs=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8E3;this._onTimeout=a.Util.bind(this,function(a){this._adListener.onError(a)});this._timeoutTracker=
setTimeout(this._onTimeout,b,b+" ms custom player timeout before playing");this._quartileTimerId=setInterval(a.Util.bind(this,this._pollForAdVideoTimeUpdate),this._timeUpdatePollingIntervalInMs);a.log("CustomPlayerRenderer will play video ad: "+c);this._customPlayer.open(d,this._adListener)}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}else this._onRendererFailed(a.ERROR_UNKNOWN,"custom player was null")},_pollForAdVideoTimeUpdate:function(){var b=
this._customPlayer.getPlayheadTime(),c=this._customPlayer.getDuration();"number"===typeof b&&"number"===typeof c&&(0>=b||0>=c?a.debug("CustomPlayerRenderer._pollForAdVideoTimeUpdate currentTime or duration is less than or 0"):(this._isStarted||(this._isStarted=!0,this._rendererController.getAdInstance().adjustOffsetAndProgressWithRendererDuration(c),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)),this._rendererController&&(this._rendererController.checkProgress(b),this._rendererController.checkForSkippableStateChange()),
b>this._lastPlayheadTime&&(this._clearTimeoutTracker(),this._lastPlayheadTime=b,this._isPaused||(this._timeoutTracker=setTimeout(this._onTimeout,this._progressTimeoutInMs,this._progressTimeoutInMs+" ms custom player timeout when playing"))),this._sendQuartiles(b/c)))},_sendQuartiles:function(b){a.debug("CustomPlayerRenderer._sendQuartiles");.25<=b&&1>this._quartileSent&&(this._quartileSent=1,this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}));.5<=b&&2>this._quartileSent&&(this._quartileSent=
2,this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}));.75<=b&&3>this._quartileSent&&(this._quartileSent=3,this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}));.99<=b&&4>this._quartileSent&&(this._rendererController.checkProgress(this._customPlayer.getDuration()),this._quartileSent=4,this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}))},_sendMissingQuartiles:_onEnded:function(b){a.debug("CustomPlayerRenderer._onEnded");
this._pollForAdVideoTimeUpdate();if(b){var c=a.ERROR_CUSTOM_PLAYER;b.includes("timeout")&&(c=a.ERROR_TIMEOUT);this._onRendererFailed(c,b)}else this._sendMissingQuartiles(),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED);this._dispose()},_dispose:function(){a.debug("CustomPlayerRenderer._dispose");this._clearTimeoutTracker();this._clearQuartileTimer();this._customPlayer=null;this._rendererController=this._adListener=this._adListener._customPlayerRenderer=null},stop:function(){a.debug("CustomPlayerRenderer.stop");
this._customPlayer&&this._customPlayer.playPause(!0);this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED);this._dispose()},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this._customPlayer?this._customPlayer.getPlayheadTime():-1},getDuration:setVolume:function(b){a.warn("CustomPlayerRenderer.setVolume("+b+")");a.Util.fireVolumeEvents(this._volume,b,this._rendererController);
this._volume=b},_getClickThroughUrls:_clearTimeoutTracker:function(){this._timeoutTracker&&(clearTimeout(this._timeoutTracker),this._timeoutTracker=null)},_clearQuartileTimer:_onRendererFailed:;a.CustomPlayerRenderer.prototype.constructor=a.CustomPlayerRenderer;a.AdListener=function(a){this._customPlayerRenderer=a};a.AdListener.prototype={onEnded:function(){a.debug("AdListener.onEnded");this._customPlayerRenderer._onEnded()},onError:function(b){a.warn("AdListener.onError:",b);this._customPlayerRenderer._onEnded(b)},getClickThroughUrls:function(){return this._customPlayerRenderer._getClickThroughUrls()}};
a.AdListener.prototype.constructor=a.AdListener;a.Timer=a.Timer.prototype={};a.Timer.prototype.constructor=a.Timer;a.Util.mixin(a.Timer.prototype,{tick:start:pause:stop:getPlayheadTime:getCTValue:getDuration:function(){return this._duration}});a.RendererController=function(b,c){var d=null,e=null,f={},k=a.RendererInitState.instance,g={},m=[],A=0,E=!1,B=!1,p=[];return{getAdInstance:function(){return c},
getContext:function(){return b},getRendererState:function(){return k},processEvent:checkProgress:checkForSkippableStateChange:handleStateTransition:
setCapability:function(a,b){c.setMetr(a,b)},getVersion:getParameter:getCompanionSlots:createNullDrivingAdInstance:scheduleAdInstances:commitAdInstance:isRenderer:function(){return d&&a.MODULE_TYPE_RENDERER===d.info()[a.INFO_KEY_MODULE_TYPE]},
isTranslator:playable:reset:play:_actualPlay:dispatchEvent:requestContentStateChange:getRenderer:setRenderer:function(a){d=
a},setRendererState:getContentVideoElement:function(){return b.getContentVideoElement()},getCustomPlayer:_restorePlaceholdersForHybrid:rendererMatch:
_matchRendererClassName:function(d){ar g=d.getPrimaryCreativeRenditionAsset().getContentType(),k=d.getContentType(),m=d.getWrapperType(),I=d.getCreativeApi(),B=d.getBaseUnit(),E=c.getSoAdUnit(),p=c.getSlot(),l=p.getType();p=p.getTimePositionClass();
a.debug("match renderer for creativeRendition:"+d.getId());a.debug("slot type:"+l);if(a.Util.isBlank(k)&&a.Util.isBlank(m))return a.warn("renderer not match due to both contentType and wrapperType are empty"),null;var u=b._rendererManifest["*"];u||(u=b._rendererManifest[m]);u||(u=b._rendererManifest[k]);if(!u){l=b._overriddenAdRenderers.concat(b._adResponse._adRenderers);for(var H=0;H<l.length;H++){var t=l[H],w=!t.contentType;w||(m?w=e(m,t.contentType,!0):(g&&(w=e(g,t.contentType,!0)),w||(w=e(k,t.contentType,
!0))));if(w)if((w=!t.creativeApi)||(w=e(I,t.creativeApi)),w)if(t.baseUnit&&!e(B,t.baseUnit))a.debug("can't match renderer "+t.url+" due to baseUnit not match for creativeRendition:"+d.getId());else if(t.soAdUnit&&!e(E,t.soAdUnit))a.debug("can't match renderer "+t.url+" due to soAdUnit not match for creativeRendition:"+d.getId());else if(t.slotType&&!e(p.toUpperCase(),t.slotType.toUpperCase()))a.debug("can't match renderer "+t.url+" due to slotType not match for creativeRendition:"+d.getId());else if("class://DashRenderer"===
t.url&&void 0===window.tv.freewheel.Dashjs)a.debug("can't match renderer "+t.url+" due to missing tv.freewheel.Dash.js for creativeRendition:"+d.getId());else if("class://VideoRenderer"===t.url&&null==this.getContentVideoElement())a.warn("VideoRenderer could not find reference to the video element, should call context.registerVideoDisplayBase() or context.setContentVideoElement()");else if("class://CustomPlayerRenderer"===t.url&&null==this.getCustomPlayer())a.warn("CustomPlayerRenderer could not find reference to the custom player, should call context.regusterCustomPlayer()");
else if("class://VPAIDRenderer"===t.url&&null==this.getContentVideoElement())a.warn("VPAIDRenderer could not find reference to the video element, should call context.registerVideoDisplayBase() or context.setContentVideoElement()");else if("class://DashRenderer"===t.url&&null==this.getContentVideoElement())a.warn("DashRenderer could not find reference to the video element, should call context.registerVideoDisplayBase() or context.setContentVideoElement()");else{if(a.debug("renderer "+t.url+" matched for creativeRendition:"+
d.getId()),t.url){u=t.url;d=u.indexOf("?");-1!==d&&(u=u.substring(0,d));d=u.lastIndexOf("/");-1!==d&&(u=u.substring(d+1));d=u.lastIndexOf(".js");-1!==d&&(u=u.substring(0,d));var v={};if(t.parameter)for(d=[].concat(t.parameter),g=0;g<d.length;g++)if(d[g].hasOwnProperty("name"))v[d[g].name]=d[g].value;else for(var F in d[g])d[g].hasOwnProperty(F)&&(v[F]=d[g][F]);a.Util.getObject(h+"."+u)&&(u=h+"."+u);if(a.Util.getObject(u))f=v,A=0;else{if(0<A)break;var z=this;F=1*this.getContext().getParameter("moduleLoadTimeout")||
6E4;A=window.setTimeout(F);a.Util.lazyJavaScriptLoad(t.url,}break}}else a.debug("can't match renderer "+t.url+" due to creative api not match for creativeRendition:"+d.getId());else a.debug("can't match renderer "+
t.url+" due to contentType not match for creativeRendition:"+d.getId())}}return u?u:a.Util.isBlank(m)?"null/null"===k?h+".NullRenderer":null:null},_inferEventType:pause:function(){a.log("RendererController.pause");
d&&"function"===typeof d.pause?d.pause():a.log("Renderer.pause() is not implemented.")},resume:stop:};a.VideoStateExtension=function(){};a.VideoStateExtension.prototype={_enabled:init:dispose:function(){this._context=null}};a.VideoStateExtension.prototype.constructor=a.VideoStateExtension;a.AdResponse=function(a){this._context=a};a.AdResponse.prototype={};a.AdResponse.prototype.constructor=a.AdResponse;a.Util.mixin(a.AdResponse.prototype,{parse:getCreative:getAd:getTemporalSlots:function(){return this._temporalSlots},getSiteSectionNonTemporalSlots:function(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots:function(){return this._videoPlayerNonTemporalSlots},getSiteSectionCustomId:function(){return this._siteSectionCustomId},
getSlotByCustomId:_initSlotData:);a.Slot=function(b){var c="",d=null,e=null,f=null,k=null,g=[],m=[],
h={},E=null,B=a.MediaInitState.instance,p=0,l=null,n,r,y,M,O,P,R,S=0,T=0,u=[],K=null,t=0,w=!1,v=!1,F=!0,z=[],C,L,J=!1;return{getAutoPlayBlocked:function(){return J},setAutoPlayBlocked:function(a){J=a},getSlotProfile:function(){return e},setSlotProfile:function(a){e=a},setMediaState:function(a){B=a},setParameter:getParameter:getAdCount:setCustomId:function(a){c=a},getCustomId:function(){return c},
setAdUnit:function(a){P=a},getAdUnit:function(){return P},setType:function(a){d=a},getType:function(){return d},setTimePosition:function(a){r=a},getTimePosition:function(){return r},getEndTimePosition:function(){return y},setTimePositionClass:getTimePositionClass:function(){return l},setWidth:function(a){M=a},getWidth:function(){return l!==a.TIME_POSITION_CLASS_DISPLAY?M?M:b.getVideoDisplaySize().width:M},setHeight:getHeight:setBase:function(a){n=a},getBase:function(){return n},setCuepointSequence:function(a){R=1*a?1*a:0},getCuepointSequence:function(){return R},getVideoDisplaySize:function(){return b.getVideoDisplaySize()},setMaxDuration:function(a){S=1*a?1*a:0},getMaxDuration:function(){return S},setMinDuration:function(a){T=1*a?1*a:0},getMinDuration:function(){return T},setAcceptContentType:setSignalId:getSignalId:function(){return K},setMaxAds:getMaxAds:function(){return t},getAcceptContentType:parse:function(d){if(d){c=d.customId;r=1*d.timePosition;l=d.timePositionClass&&d.timePositionClass.toUpperCase()||l;var e=1*d.endTimePosition||-1;y=e>=r?e:-1;P=d.adUnit;0<=d.maxDuration&&(S=d.maxDuration);K=d.signalId;if(void 0===K||null===K)K=d.outSignalId;for(var f=0,k=
d.eventCallbacks||[];f<k.length;f++){e=k[f];var h=a.EventCallback.newEventCallback(b,e.name,e.type);h&&(h._slot=this,h.parse(e),m.push(h))}f=0;for(k=d.selectedAds||[];f<k.length;f++)e=k[f],d=[],h=new a.AdInstance(b),d.push(h),h._slot=this,h._slotCustomId=c,h._parentAdInstancesGroup=d,h.parse(e),g.push(d)}},getCurrentAdInstance:function(){return f},isPauseSlot:play:stop:pause:function(){a.log("Slot.pause");l!==a.TIME_POSITION_CLASS_DISPLAY?f&&f.pause():a.log("Not a temporal slot. Ignore.")},resume:skipCurrentAd:setVisible:_play:onStartPlaying:function(){this._onStartPlaying()},onStartReplaying:function(){this._onStartPlaying()},onCompletePlaying:function(){this._onCompletePlaying()},onCompleteReplaying:function(){this._onCompletePlaying()},playNextAdInstance:scheduleAdInstance:_clearScheduledAdInstance:_onStartPlaying:dispatchSlotEvent:_onCompletePlaying:_playNextAdInstance:_commitScheduledAdInstance:_nextPlayableAdInstance:toString:getAdInstances:getPlayheadTime:getTotalDuration:playCompanionAds:getState:function(){return B},setAcceptCompanion:function(a){C=a},getAcceptCompanion:function(){return C},setInitialAdOption:function(a){L=a},getInitialAdOption:function(){return L}}};a.SurveyExtension=a.SurveyExtension.prototype={init:dispose:_getParameters:;a.SurveyExtension.prototype.constructor=a.SurveyExtension;a.ExtensionManager=function(b){this._extensions={};this._context=b;this._surveyExtension=new a.SurveyExtension;this._surveyExtension.init(b);this._videoStateExtension=new a.VideoStateExtension;this._videoStateExtension.init(b);this._displayRefreshExtension=new a.DisplayRefreshExtension;this._displayRefreshExtension.init(b);this._contentVideoExtension=new a.ContentVideoExtension;this._contentVideoExtension.init(b);this._pauseAdExtension=
new a.PauseAdExtension;this._pauseAdExtension.init(b);this._omsdkExtension=new a.OMSDKExtension;this._omsdkExtension.init(b);this._skippableAdExtension=new a.SkippableAdExtension;this._skippableAdExtension.init(b)};a.ExtensionManager.prototype={_scriptLoaded:_getExtensionNameFromUrl:_loadFail:load:dispose:function(){this._extensions=null;this._surveyExtension.dispose();this._surveyExtension=null;this._displayRefreshExtension.dispose();this._displayRefreshExtension=null;this._pauseAdExtension.dispose();this._pauseAdExtension=null;this._omsdkExtension.dispose();this._omsdkExtension=
null;this._videoStateExtension.dispose();this._videoStateExtension=null;this._contentVideoExtension.dispose();this._contentVideoExtension=null;this._skippableAdExtension.dispose();this._context=this._skippableAdExtension=null}};a.ExtensionManager.prototype.constructor=a.ExtensionManager;a.EventCallback=a.EventCallback.prototype={};a.EventCallback.prototype.constructor=
a.EventCallback;a.EventCallback.getEventCallback=a.EventCallback.newEventCallback=a.EventCallback.getShortType=a.Util.mixin(a.EventCallback.prototype,{parse:copy:getUrl:getTrackingUrls:
process:_processTrackingUrls:_shouldSkipSendingTrackingAndExternalUrls:_needEmptyCT:_getAdPlayheadTime:_getCreativeAssetLocation:_getParameter:_replaceVASTMacro:_replaceMacrosInUrl:function(b,c){if(a.Util.isBlank(b))return b;c&&c[a.INFO_KEY_VAST_ERROR_CODE]&&(b=this._replaceVASTMacro(b,"ERRORCODE",c[a.INFO_KEY_VAST_ERROR_CODE]));this._getCreativeAssetLocation()&&(b=this._replaceVASTMacro(b,"ASSETURI",this._getCreativeAssetLocation()));var d=this._context._getContentPlayheadTime();if(this._adInstance){c=null!=d&&0<=Number(d)?a.Util.secondsToHms(d):
"";b=this._replaceVASTMacro(b,"CONTENTPLAYHEAD",c);b=this._replaceVASTMacro(b,"CACHEBUSTING",a.Util.getFixedDigitRandomNumber(8));b=this._replaceVASTMacro(b,"TIMESTAMP",a.Util.getDateStringInISOFormat(new Date));b=this._replaceVASTMacro(b,"PAGEURL",a.Util.getContentURL());b=this._replaceVASTMacro(b,"OMIDPARTNER",a.OMSDK_PARTNER_NAME+"/"+this._context._adManager.getVersion());c=[];if(this._context._overriddenAdRenderers&&null!=this._context._overriddenAdRenderers){var e=[];this._context._adResponse&&
this._context._adResponse._adRenderers&&(e=this._context._overriddenAdRenderers.concat(this._context._adResponse._adRenderers));for(var f=0;f<e.length;f++){var k=e[f].creativeApi||"";k.includes("VPAID")?c.push(a.IAB_API_FRAMEWORKS_VPAID_2):k.includes("MRAID")&&c.push(a.IAB_API_FRAMEWORKS_MRAID_1)}}this._context.getParameter(a.PARAMETER_EXTENSION_OMSDK_ENABLED)&&c.push(a.IAB_API_FRAMEWORKS_OMID_1);c=c.sort().filter(;b=this._replaceVASTMacro(b,"APIFRAMEWORKS",c.toString())}b=
b.replace(/#(ce?)\{([^\}]+)\}/g,a.Util.bind(this,);c="";try{c=a.Util.getParameterInURL(b,
a.URL_PARAMETER_KEY_CR)}catch(g){return a.warn(g),b}a.Util.isBlank(c)||(b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(c)));return b}});a.AdClickEventCallback=function(b){a.EventCallback.call(this,b)};a.AdClickEventCallback.prototype=new a.EventCallback;a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback;a.Util.mixin(a.AdClickEventCallback.prototype,{getUrl:process:);a.AdImpressionEventCallback=function(b){a.EventCallback.call(this,
b)};a.AdImpressionEventCallback.prototype=new a.EventCallback;a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback;a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._adInstance.getSlot().isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},_getStartTimePosition:function(){return this._adInstance.getStartTimePosition()},_getAutoPlayBlocked:
getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);if(this._name!==a.EVENT_AD_IMPRESSION)c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick());else if(-1<this._getStartTimePosition()&&(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_START_TIME_POSITION,this._getStartTimePosition())),this._getAutoPlayBlocked()){b="";try{b=a.Util.getParameterInURL(c,a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED)}catch(d){return a.warn(d),
c}c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED,b|a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED_VALUE)}return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:);a.AdQuartileEventCallback=function(b){a.EventCallback.call(this,b)};a.AdQuartileEventCallback.prototype=
new a.EventCallback;a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback;a.Util.mixin(a.AdQuartileEventCallback.prototype,{_getInitValue:getUrl:process:);a.AdStandardEventCallback=function(b){a.EventCallback.call(this,b)};a.AdStandardEventCallback.prototype=new a.EventCallback;a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback;a.AdProgressEventCallback=function(b){a.EventCallback.call(this,b)};a.AdProgressEventCallback.prototype=new a.EventCallback;a.AdProgressEventCallback.prototype.constructor=a.AdProgressEventCallback;a.Util.mixin(a.AdProgressEventCallback.prototype,
{getTrackingUrls:process:);a.ErrorEventCallback=function(b){a.EventCallback.call(this,b)};a.ErrorEventCallback.prototype=new a.EventCallback;a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback;a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl:);a.ResellerNoAdEventCallback=
function(b){a.EventCallback.call(this,b)};a.ResellerNoAdEventCallback.prototype=new a.EventCallback;a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback;a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{});a.SlotImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.SlotImpressionEventCallback.prototype=new a.EventCallback;a.SlotImpressionEventCallback.prototype.constructor=a.SlotImpressionEventCallback;a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:_getInitValue:getUrl:process:function(b){a.EventCallback.prototype.process.call(this,b);this._processed=!0}});a.VideoViewEventCallback=a.VideoViewEventCallback.prototype=new a.EventCallback;a.VideoViewEventCallback.prototype.constructor=
a.VideoViewEventCallback;a.Util.mixin(a.VideoViewEventCallback.prototype,{_getInitValue:_getCTValue:getUrl:_shouldSkipSendingTrackingAndExternalUrls:function(){return this._processed},
process:);a.VideoRenderer=function(a){this._adVideo=null;this._duration=this._playheadTime=-1;this._dragging=this._stopInvoked=this._isEnded=!1;this._volume=1;this._rendererController=null;this._isBuffering=!1;this._autoPauseAdOnVisibilityChange=!0;this._hls=null;this._adVideoPauseState="";this._isSimid=void 0===a?!1:a};a.VideoRenderer.prototype={pause:resume:start:function(b){this._rendererController=b;var c=this._rendererController.getAdInstance(),
d=c.getSlot(),e=this,f=!1,k=!1;this._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&d.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"midroll");else{a.log("VideoRenderer.start",d.getTimePositionClass(),c);var g=this._rendererController.getContentVideoElement();a.debug("VideoRenderer","use content video element");g.controls=!1;this._adVideo=g;
var m=null,h=null,l=null,p=null,H=d.getVideoDisplaySize().width,I=d.getVideoDisplaySize().height;b=c.getRenderableCreativeRenditions();var n=(H=(new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getBestFitRendition(b,H,I))?H.getPrimaryCreativeRenditionAsset():null;if(n&&b.length)if(b=n.getProxiedUrl()){c.setActiveCreativeRendition(H);a.log("VideoRenderer.start selected rendition is:",
b);b=n.getMimeType();var r=a.Util.isMimeTypeHls(b);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);var y=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;y||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);var M=a.PLATFORM_EVENT_CLICK,O=a.MOBILE_EVENT_DRAG;this._volume=this._rendererController.getContext().getAdVolume();
this._adVideo.volume=this._volume;this._adVideo.muted=0===this._volume;var P=function(b){a.debug("VideoRenderer.checkTimeUpdate timeout");U(b)},R=function(){h&&(clearTimeout(h),h=null)},S=a.Util.bind(this,function(b){a.debug("onAdVideoBufferEmpty(): Ad video event "+b.type);b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED);null!==b&&"undefined"!==typeof b&&!1!==a.Util.str2bool(b)&&(a.debug("play the ad immediately after the stalled event"),g&&g._fw_videoAdPlaying&&
g.play())}),T=function(b){e._isBuffering||(e._isBuffering=!0,e._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_START}),a.debug("onAdVideoBufferingStarted(): Ad video event "+b.type))},u=function(b){e._isBuffering&&(e._isBuffering=!1,e._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_END}),a.debug("onAdVideoBufferingEnded(): Ad video event "+b.type))};b=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);var K=null;b&&(K=document.getElementById(b));
K||(K=g);var t=a.Util.bind(this,,w=a.Util.bind(this,function(b){a.debug("Ad video event "+b.type);this._dragging=
!0}),v,F=z=C=0,L=function(b){a.debug("Ad video event "+b.type);0>=g.currentTime?a.debug("VideoRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):(R(),g.paused||(b=e._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8E3,h=setTimeout(P,b,b+"ms timeout when playing")),k||(k=!0,e._playheadTime=g.currentTime,0>e._playheadTime&&(e._playheadTime=0),m&&(clearTimeout(m),m=null),e._quartileTimerId=setInterval(function(){var b=g.currentTime,c=g.duration;
0<b&&(e._playheadTime=b);"number"!==typeof b||"number"!==typeof c||l||(e._rendererController&&(e._rendererController.checkProgress(b),e._rendererController.checkForSkippableStateChange()),b>=.25*c&&1>C&&(e._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),C=1),b>=.5*c&&2>C&&(e._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),C=2),b>=.75*c&&3>C&&(clearInterval(e._quartileTimerId),e._quartileTimerId=null,e._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),
C=3))},1E3),0<g.duration&&(e._duration=g.duration,c.adjustOffsetAndProgressWithRendererDuration(e._duration)),e._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED),e._rendererController.checkForSkippableStateChange()))};this.dispose=a.Util.bind(this,function(){J()});var J=function(b){var c=l;b&&b.type&&(a.debug("Ad video event "+b.type),"error"===b.type&&(a.warn(b.target.src),a.warn(b.target.currentSrc),u(b)));R();m&&(clearTimeout(m),m=null);y&&(K.removeEventListener(M,t,!1),K.removeEventListener(O,
w,!1));v&&(clearTimeout(v),v=null);Q&&e._autoPauseAdOnVisibilityChange&&(document.removeEventListener("visibilitychange",Q,!1),Q=null);g.removeEventListener("ended",J,!1);g.removeEventListener("error",J,!0);g.removeEventListener("pause",F,!1);g.removeEventListener("playing",z,!1);g.removeEventListener("timeupdate",L,!1);g.removeEventListener("stalled",S,!1);g.removeEventListener("waiting",T,!1);g.removeEventListener("canplay",u,!1);g.paused||(a.debug("try pausing video before complete"),g.pause());
b&&"error"===b.type&&(c="video error",(b=g.error||b.target.error)&&(c="error:"+b+",code:"+b.code));c||(e._isEnded=!0);a.log("VideoRenderer.complete");f?e._rendererController.checkProgress(g.duration):(f=!0,delete g._fw_videoAdPlaying,e._adVideo=null,e._quartileTimerId&&(clearInterval(e._quartileTimerId),e._quartileTimerId=null),c?e._onRendererFailed(p,c):(e._stopInvoked||(g.currentTime>=.25*g.duration&&1>C&&(e._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),C=1),g.currentTime>=
.5*g.duration&&2>C&&(e._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),C=2),g.currentTime>=.75*g.duration&&3>C&&(e._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),C=3),g.currentTime>=g.duration-.5&&4>C&&(e._rendererController.checkProgress(g.duration),e._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}),C=4)),e._stopInvoked=!1,e._isSimid||e._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)));e._rendererController=null;e._hls&&e._hls.destroy()};
var U=function(b){l=b;p=a.ERROR_TIMEOUT;a.warn(l);J()},Q=function(b){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible"));document.hidden?e._adVideoPauseState!==a.AD_VIDEO_PAUSED_BY_RENDERER&&(g&&!g.paused&&g.pause(),e._adVideoPauseState=a.AD_VIDEO_PAUSED_BY_TAB_SWITCH,e._rendererController&&e._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),m&&(clearTimeout(m),m=null)):e._adVideoPauseState===a.AD_VIDEO_PAUSED_BY_TAB_SWITCH?(e.resume(),k||!g._fw_fromVideoPool&&!a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT||
(b=e._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5E3,m=setTimeout(U,b,b+"ms timeout before playing"))):e._adVideoPauseState===a.AD_VIDEO_HLS_PAUSED_BY_RENDERER_AFTER_TAB_SWITCH&&e._rendererController&&!g.paused&&(console.log("VideoRenderer _onVisibilityChange: ad already resumed, fire resume event"),e._rendererController.processEvent({name:a.EVENT_AD_RESUME}))};g._fw_videoAdPlaying=!0;var D=!1,N=a.VideoRenderer._fw_playedDummyVideo||d.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||
/\.webm$/.test(n.getProxiedUrl())?N():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug("play dummy video for iOS 3.2-4.1"),g.src="http://127.0.0.1:1/404.mp4",g.load(),g.play(),g._fw_videoAdPlaying=!0,g.addEventListener("error",!0),setTimeout(N,5E3))}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:function(){a.debug("VideoRenderer stop");this._stopInvoked=!0;
this._adVideo&&(this._adVideo._fw_videoAdPlaying=!1,this._adVideo.pause(),this.dispose());this._rendererController=null},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:function(){return this._duration},setVolume:function(b){a.debug("VideoRenderer setVolume("+b+")");this._adVideo?(this._adVideo.volume=
b,this._adVideo.muted=0===b,a.Util.fireVolumeEvents(this._volume,b,this._rendererController),this._volume=b):a.debug("VideoRenderer ad video is null, ignore.")},_onRendererFailed:function(b,c,d){var e={};e[a.INFO_KEY_ERROR_MODULE]="VideoRenderer";e[a.INFO_KEY_ERROR_CODE]=b;d||(d=a.ERROR_VAST_GENERAL_LINEAR_ERROR);e[a.INFO_KEY_VAST_ERROR_CODE]=d;c&&(e[a.INFO_KEY_ERROR_INFO]=c);this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,e)}};a.VideoRenderer.prototype.constructor=a.VideoRenderer;
a.AdRequest=a.AdRequest.prototype={setCapability:addKeyValue:removeKey:setProfile:setVideoDisplayCompatibleSizes:setSiteSection:
setVisitor:setRequestMode:setRequestDuration:addCandidateAd:addTemporalSlot:setSubsessionToken:function(a){this._subsessionToken=
a},scanPageSlots:function(){this._slotScanner.scanPageSlots()},generateTypeBRequestUrl:generateVideoViewRequestUrlWithDummyContextInstanceId:parseQueryStr:generateGlobalParametersQueryStr:generateKeyValuesStr:function(){a.debug("AdRequest.generateKeyValuesStr");this.addBrowserParams();
var b=a.Util.flashVersion();b=this._keyValues.concat(["_fw_h_x_flash_version="+encodeURIComponent(b),"_fw_dpr="+(void 0===window.devicePixelRatio?"1":window.devicePixelRatio.toFixed(2).toString())]);for(var c=0;c<this._urlKeyValues.length;c++){var d=this._urlKeyValues[c];0>b.indexOf(d)&&b.push(d)}(c=this._context._adManager._location)&&b.push("ltlg="+encodeURIComponent(Math.round(1E4*c.coords.latitude)/1E4+","+Math.round(1E4*c.coords.longitude)/1E4));return b.join("&")},generateSlotsTypeBStr:detectScreenDimension:useTCFAPI:function(b){var c=b.string;
b=b.consentParam;a.debug("AdRequest.useTCFAPI");this.removeKey("_fw_gdpr");this.removeKey("_fw_gdpr_consent");this.addKeyValue("_fw_gdpr",c);this.addKeyValue("_fw_gdpr_consent",b)},useUSPAPI:function(b){""!=b&&(a.debug("AdRequest.useUSPAPI"),this.removeKey("_fw_us_privacy"),this.addKeyValue("_fw_us_privacy",b))},addBrowserParams:function(){this.addKeyValue("_fw_br_lg",(navigator.languages?navigator.languages.length:0).toString());this.addKeyValue("_fw_br_prm",this._context._adManager._permissionsCheck.toString());
this.addKeyValue("_fw_br_wd",this._checkPresence(navigator.webdriver));this.addKeyValue("_fw_br_ch",this._checkPresence(window.chrome));this.addKeyValue("_fw_br_nt",this._checkPresence(window.netscape));this.addKeyValue("_fw_br_sf",this._checkSafari())},_checkPresence:function(a){return(a?1:0).toString()},_checkSafari:;a.AdInstance=function(b){this._context=b;this._creativeRenditionId=this._creativeId=this._soAdUnit=this._adId=this._slot=null;this._universalAdIdRegistry=
this._universalAdId=this._action=this._marketUnifiedAdId=this._openExchangeId=this._dealId=this._replicaId="";this._primaryCreativeRendition=this._creative=null;this._creativeRenditions=[];this._noLoad=!1;this._companionAdInstances=[];this._eventCallbacks=[];this._externalEventCallbackUrlsDictionary={};this._rendererController=new a.RendererController(b,this);this._timer=new a.Timer;this._metr=0;this._state=a.MediaInitState.instance;this._isStartSuccessfully=this._translated=this._isImpressionSent=
this._isInitiatedSent=!1;this._lastDurationFromRenderer=-1;this._slotCustomId=this._parentAdInstancesGroup=null;this._isSkipped=!1;this._wrapperCount=0;this._startTimePosition=-1;this._adVerifications=[];this._skipOffset=-1;this._progressEventCallbackUrlsDict={};this._progressPercentageEventCallbackUrlsDict={};this._skipOffsetPercentage=-1};a.AdInstance.prototype={};a.AdInstance.prototype.constructor=a.AdInstance;a.METR_MASK_QUARTILE=0;a.METR_MASK_MIDPOINT=1;a.METR_MASK_COMPLETE=2;a.METR_MASK_VOLUME=
3;a.METR_MASK_SIZE=4;a.METR_MASK_CONTROL=5;a.METR_MASK_REWIND=6;a.METR_MASK_ACCEPT_INVITATION=7;a.METR_MASK_CLOSE=8;a.METR_MASK_MINIMIZE=9;a.METR_MASK_CLICK=10;a.AdInstance._metrDictionary={};a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<
a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL;
a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND;a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION;a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE;a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=1<<a.METR_MASK_MINIMIZE;a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK;a.Util.mixin(a.AdInstance.prototype,{getAdId:function(){return this._adId},getUniversalAdId:getSoAdUnit:function(){return this._soAdUnit},getParameter:
addProgressEventCallbackUrls:function(a,c){this._progressEventCallbackUrlsDict.hasOwnProperty(a)?(c=this._progressEventCallbackUrlsDict[a].concat(c),this._progressEventCallbackUrlsDict[a]=c):this._progressEventCallbackUrlsDict[a]=c||[]},addPercentageProgressEventCallbackUrls:adjustOffsetAndProgressWithRendererDuration:function(b){-1!==this._skipOffsetPercentage&&(this._skipOffset=a.Util.offsetStringToSecond(this._skipOffsetPercentage+"%",b));if(0!==Object.keys(this._progressPercentageEventCallbackUrlsDict).length){this._progressEventCallbackUrlsDict={};for(var c in this._progressPercentageEventCallbackUrlsDict){var d=a.Util.offsetStringToSecond(c+"%",b);this._progressEventCallbackUrlsDict[d]=this._progressEventCallbackUrlsDict[d]?this._progressEventCallbackUrlsDict[d].concat(this._progressPercentageEventCallbackUrlsDict[c]):
[].concat($jscomp.arrayFromIterable(this._progressPercentageEventCallbackUrlsDict[c]))}}},getAdSkippableState:getEventCallbackUrls:addEventCallbackUrls:setClickThroughUrl:addAdVerificationsFromVast:addCreativeRendition:getRendererController:function(){return this._rendererController},getSlot:getCompanionSlots:getActiveCreativeRendition:function(){return this._primaryCreativeRendition},setActiveCreativeRendition:getAllCreativeRenditions:getRenderableCreativeRenditions:getPlayheadTime:function(){var b=-1;if(this._rendererController.getRenderer()&&"function"===typeof this._rendererController.getRenderer().getPlayheadTime)try{b=this._rendererController.getRenderer().getPlayheadTime()}catch(c){a.warn("AdInstance.getPlayheadTime "+
c.name+": "+c.message)}return b},getDuration:parse:function(b){if(b){this._adId=b.adId||null;this._creativeId=b.creativeId||null;this._creativeRenditionId=
b.creativeRenditionId||null;this._replicaId=b.hasOwnProperty("replicaId")?b.replicaId:"";this._dealId=b.hasOwnProperty("dealId")?b.dealId:"";this._openExchangeId=b.hasOwnProperty("openExchangeId")?b.openExchangeId:"";this._marketUnifiedAdId=b.hasOwnProperty("marketUnifiedAdId")?b.marketUnifiedAdId:"";this._action=b.hasOwnProperty("action")?b.action:"";this._universalAdId=b.hasOwnProperty("universalAdId")?b.universalAdId:"";this._universalAdIdRegistry=b.hasOwnProperty("universalAdIdRegistry")?b.universalAdIdRegistry:
"";this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad();this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit();this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId);this._creativeRenditions=this._creative.getEligibleCreativeRenditionsForAdInstance(this);var c,d;var e=0;for(c=b.eventCallbacks||[];e<c.length;e++){var f=c[e];if(d=a.EventCallback.newEventCallback(this._context,f.name,f.type))d._adInstance=this,d.parse(f),this._eventCallbacks.push(d)}e=
0;for(c=b.companionAds||[];e<c.length;++e)(f=c[e])&&f.adSlotCustomId&&(d=new a.AdInstance(this._context),d._slotCustomId=f.adSlotCustomId,d.parse(f),this._companionAdInstances.push(d));e=0;for(c=b.fallbackAds||[];e<c.length;++e)f=c[e],d=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(d),d._slot=this._slot,d._parentAdInstancesGroup=this._parentAdInstancesGroup,d.parse(f);e=0;for(c=b.extensions||[];e<c.length;++e)if((f=c[e])&&"adVerifications"==f.type)for(j=0,arr1=f.adVerifications||
[];j<arr1.length;++j)b=new a.AdVerification,b.parseFromJSON(arr1[j]),this._adVerifications.push(b);0<this._creativeRenditions.length&&(this._primaryCreativeRendition=this._creativeRenditions[0])}},play:pause:function(){a.log("AdInstance.pause "+this._slotCustomId);this._isStartSuccessfully?this._rendererController&&
this._rendererController.pause():a.log("Ad hasn't started yet. Ignore.")},resume:skip:_processSkipEvent:stop:function(){a.log("AdInstance.stop");this._rendererController.stop()},fakeComplete:complete:isStarted:function(){return this._isStartSuccessfully},onStartPlaying:onCompletePlaying:function(){},
onStartReplaying:function(){},onCompleteReplaying:function(){},getEventCallback:processEvent:processProgressEvent:setVolume:setMetr:getExternalEventCallbackUrls:reset:cloneForTranslation:function(){var b=new a.AdInstance(this._context);b._adId=this._adId;b._creativeId=this._creativeId;b._creative=this._creative.cloneForTranslation();b._creativeRenditionId=this._creativeRenditionId;b._isInitiatedSent=this._isInitiatedSent;b._noLoad=this._noLoad;b._slot=this.getSlot();b._soAdUnit=this.getSoAdUnit();b._replicaId=
this._replicaId;b._dealId=this._dealId;b._openExchangeId=this._openExchangeId;b._marketUnifiedAdId=this._marketUnifiedAdId;b._action=this._action;b._universalAdId=this._universalAdId;b._universalAdIdRegistry=this._universalAdIdRegistry;b._wrapperCount=this._wrapperCount;b._adVerifications=this._adVerifications;b._skipOffset=this._skipOffset;b._skipOffsetPercentage=this._skipOffsetPercentage;for(var c=0;c<this._eventCallbacks.length;c++){var d=this._eventCallbacks[c].copy();d._adInstance=b;b._eventCallbacks.push(d)}b._externalEventCallbackUrlsDictionary=
a.Util.copy(this._externalEventCallbackUrlsDictionary);b._progressEventCallbackUrlsDict=a.Util.copy(this._progressEventCallbackUrlsDict);b._progressPercentageEventCallbackUrlsDict=a.Util.copy(this._progressPercentageEventCallbackUrlsDict);for(c=0;c<this._companionAdInstances.length;c++)this._companionAdInstances[c].isPlaceholder()?b._companionAdInstances.push(this._companionAdInstances[c].cloneForTranslation()):b._companionAdInstances.push(this._companionAdInstances[c]);return b},isPlaceholder:function(){return this._noLoad},
setMediaState:function(a){this._state=a},_isValidEventNameAndType:isPlayable:toString:getCompanionAdInstances:isRequiredToShow:incrementWrapperCount:getWrapperCount:function(){return this._wrapperCount},getDealId:function(){return this._dealId},
getOpenExchangeId:function(){return this._openExchangeId},getMarketUnifiedAdId:function(){return this._marketUnifiedAdId},getAction:function(){return this._action},setStartTimePosition:getStartTimePosition:function(){return this._startTimePosition},getSkipOffset:function(){return this._skipOffset},_setSkipOffset:function(b){this._skipOffset=
a.Util.offsetStringToSecond(b,this.getDuration())},_setSkipOffsetPercentage:);a.EventDispatcher=a.EventDispatcher.prototype={addEventListener:dispatchEvent:removeEventListener:;a.EventDispatcher.prototype.constructor=a.EventDispatcher;a.ConsentManager=function(){this._tcfConsentManager=new a.TCFConsentManager(this);this._uspConsentManager=
new a.USPConsentManager(this)};a.ConsentManager.prototype.setupConsentPostMessage=function(b,c){a.debug("ConsentManager.setupConsentPostMessage");var d=b+"Locator",e=b+"Call",f=b+"Return",k=a.Util.getFrameAncestor(d);if(k){var g={};window[b]=function(a,b,d){try{var f=new Uint32Array(1);crypto.getRandomValues(f);var m=""+f[0]}catch(I){m=""+Math.random()}f={};a=(f[e]={command:a,parameter:b,callId:m,version:c},f);g[m]=d;k.postMessage(a,"*")};window.addEventListener("message",function(c){c=c.data;try{var d=
"string"===typeof c?JSON.parse(c):c;if(d[f]){var e=d[f];"function"===typeof g[e.callId]&&(g[e.callId](e.returnValue,e.success),delete g[e.callId])}}catch(B){a.warn(b+" postMessage listener error: "+B)}},!1)}else a.warn("ConsentManager.setupConsentPostMessage: "+d+" not found")};a.ConsentManager.prototype.isTCFAPIExecuted=function(){return this._tcfConsentManager.isExecuted()};a.ConsentManager.prototype.getGDPRValues=function(){return this._tcfConsentManager.getGDPRValues()};a.ConsentManager.prototype.isUSPAPIExecuted=
function(){return this._uspConsentManager.isExecuted()};a.ConsentManager.prototype.getUSPString=function(){return this._uspConsentManager.getUSPString()};a.ConsentManager.prototype.dispose=a.DashRenderer=a.DashRenderer.prototype={pause:resume:start:function(b){this._rendererController=b;var c=this._rendererController.getAdInstance(),d=c.getSlot(),e=this,f=!1,k=!1;this._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&d.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,
"midroll");else if(a.PLATFORM_NOT_SUPPORT_DASH)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"MPEG-DASH playback not supported on this platform");else{a.log("DashRenderer.start",d.getTimePositionClass(),c);var g=this._rendererController.getContentVideoElement(),m=d.getVideoDisplaySize().width,h=d.getVideoDisplaySize().height,l=c.getRenderableCreativeRenditions();b=(b=this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE))&&0<Number(b)?Number(b):null;if((m=(h=(new a.RenditionSelector(b||
1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getBestDashRendition(l,m,h))?h.getPrimaryCreativeRenditionAsset():null)&&l.length)if(m.getProxiedUrl()){c.setActiveCreativeRendition(h);a.log("DashRenderer.start selected rendition is:",m.getUrl());this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,
a.CAPABILITY_STATUS_ON);var p=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;p||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);var H=a.PLATFORM_EVENT_CLICK,I=a.MOBILE_EVENT_DRAG;a.debug("DashRenderer","use content video element");g.controls=!1;var n=this._dashjs.MediaPlayer().create();n.initialize();l=n.getVersion();a.debug("dash.js -v "+n.getVersion()+" loaded");if(0!==a.Util.compareVersion(l,a.PLATFORM_DASHJS_SUPPORTED_VERSION))this._onRendererFailed(a.ERROR_DEVICE_LIMIT,
"Unsupported tv.freewheel.Dash.js version");else{n.setAutoPlay(!1);n.attachView(g);b&&n.updateSettings({streaming:{abr:{initialBitrate:{video:b}}}});n.attachSource(m.getUrl());n.preload();this._fwDashPlayer=n;var r=null,y=null,M=null;this._volume=this._rendererController.getContext().getAdVolume();n.setVolume(this._volume);n.setMute(0===this._volume);var O=P=R=a.Util.bind(this,,S=T=b=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);var u=null;b&&(u=document.getElementById(b));u||(u=g);var K=a.Util.bind(this,,t=a.Util.bind(this,,w,v=F=z=0,C=function(b){a.debug("Ad video event "+b.type);0>=n.time()?a.debug("DashRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):(P(),n.isPaused()||(b=e._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8E3,y=setTimeout(O,b,b+"ms timeout when playing")),k||(k=!0,e._playheadTime=n.time(),0>e._playheadTime&&(e._playheadTime=0),r&&(clearTimeout(r),r=null),e._quartileTimerId=
setInterval(function(){var b=n.time(),c=n.duration();0<b&&(e._playheadTime=b);"number"!==typeof b||"number"!==typeof c||M||(e._rendererController&&(e._rendererController.checkProgress(b),e._rendererController.checkForSkippableStateChange()),b>=.25*c&&1>z&&(e._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),z=1),b>=.5*c&&2>z&&(e._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),z=2),b>=.75*c&&3>z&&(clearInterval(e._quartileTimerId),e._quartileTimerId=null,e._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),
z=3))},1E3),0<n.duration()&&(e._duration=n.duration(),c.adjustOffsetAndProgressWithRendererDuration(e._duration)),e._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED),e._rendererController.checkForSkippableStateChange()))};this.dispose=a.Util.bind(this,;var L=var J=function(b){M=b;a.warn(M);L()},U=Q=n._fw_videoAdPlaying=!0;var D=!1;(()}}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:function(){return this._duration},setVolume:function(b){a.debug("DashRenderer setVolume("+b+")");this._fwDashPlayer?(this._fwDashPlayer.setVolume(b),this._fwDashPlayer.setMute(0===b),a.Util.fireVolumeEvents(this._volume,
b,this._rendererController),this._volume=b):a.debug("DashRenderer dash player is null, ignore.")},_onRendererFailed:;a.DashRenderer.prototype.constructor=a.DashRenderer;a.HTMLAdGenerator={log:getExtension:generateAd:generateImageHTML:generateFlashHTML:generateIFrameHTML:docLitToHTMLLit:
htmlLitToDocLit:function(b){a.HTMLAdGenerator.log("htmlLitToDocLit");return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Advertisement</title></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">'+b+"</body></html>"},wrapUnsafeHTML:wrapJSCode:generateScriptHTML:htmlLitToHTMLDocLitMobile:;a.SIMIDRenderer=function(){var a=this;this._simidCreativeUrl=this._simidIframe=this._rendererController=this._videoRenderer=this._context=null;this._simidVariableDurationAllowed=!1;this._ad=this._slotBase=this._videoElement=null;this._listeners={};this._sessionId="";this._nextMessageId=1;this._target=window;this._resolutionListeners={};this._onAdEvent=this._onAdEvent.bind(this);this._onSessionCreated=this._onSessionCreated.bind(this);this._onRequestPlay=this._onRequestPlay.bind(this);
this._onRequestPause=this._onRequestPause.bind(this);this._onRequestStop=this._onRequestStop.bind(this);this._onRequestSkip=this._onRequestSkip.bind(this);this._onRequestVolume=this._onRequestVolume.bind(this);this._onRequestFullScreen=this._onRequestFullScreen.bind(this);this._onRequestExitFullScreen=this._onRequestExitFullScreen.bind(this);this._onGetMediaState=this._onGetMediaState.bind(this);this._onCreativeFatalError=this._onCreativeFatalError.bind(this);this._onReceiveCreativeLog=this._onReceiveCreativeLog.bind(this);
this._onAdVideoTimeUpdate=this._onAdVideoTimeUpdate.bind(this);this._onAdVideoStalled=this._onAdVideoStalled.bind(this);this._onAdVideoDurationChange=this._onAdVideoDurationChange.bind(this);this._onFullScreenChange=this._onFullScreenChange.bind(this);this._onRequestChangeAdDuration=this._onRequestChangeAdDuration.bind(this);this._receiveMessage=this._receiveMessage.bind(this);this._resolveStartCreativePromise=this._startCreativePromise=this._resolveInitializationPromise=this._initializationPromise=
null;this._fullScreenAllowed=!0;this._isFullScreen=!1;this._timeoutListeners={};this._creativeTimeoutDelayInMs=5E3;this._creativeMessageCount=0;this._isSessionCreated=!1;this._requestedDuration=this._maxDuration=null;this._isMuted=this._isEnded=this._isPaused=!1;this._resolveSessionCreatedPromise=null;this._sessionCreatedPromise=new Promise(function(b,d){a._resolveSessionCreatedPromise=b});this._rejectInitializationPromise=null;this._initializationPromise=new Promise(;this._startCreativePromise=new Promise(};a.SIMIDRenderer.prototype.start=function(b){window.addEventListener("message",this._receiveMessage,!1);this._context=b.getContext();this._videoRenderer=new a.VideoRenderer(!0);this._rendererController=b;this._ad=b.getAdInstance();b.handleStateTransition(tv.freewheel.SDK.RENDERER_STATE_STARTED);a.debug("SIMIDRenderer started.");this._videoRenderer.start(b);(b=this._rendererController.getParameter(a.PARAMETER_SIMID_CREATIVE_TIMEOUT_DELAY))&&
0<Number(b)&&(this._creativeTimeoutDelayInMs=Number(b));a.log("start(), SIMID creative timeout delay in miliseconds:"+this._creativeTimeoutDelayInMs);this._initiateSimidAd()};a.SIMIDRenderer.prototype._initiateSimidAd=function(){a.debug("SIMIDRenderer_onAdInitiated");if(null!=this._rendererController.getContentVideoElement()){this._addListener(a.SimidProtocolMessage.CREATE_SESSION,this._onSessionCreated);this._addListener(a.SimidCreativeMessage.REQUEST_PLAY,this._onRequestPlay);this._addListener(a.SimidCreativeMessage.REQUEST_PAUSE,
this._onRequestPause);this._addListener(a.SimidCreativeMessage.REQUEST_STOP,this._onRequestStop);this._addListener(a.SimidCreativeMessage.REQUEST_SKIP,this._onRequestSkip);this._addListener(a.SimidCreativeMessage.REQUEST_FULL_SCREEN,this._onRequestFullScreen);this._addListener(a.SimidCreativeMessage.REQUEST_EXIT_FULL_SCREEN,this._onRequestExitFullScreen);this._addListener(a.SimidCreativeMessage.REQUEST_VOLUME,this._onRequestVolume);this._addListener(a.SimidCreativeMessage.LOG,this._onReceiveCreativeLog);
this._addListener(a.SimidCreativeMessage.GET_MEDIA_STATE,this._onGetMediaState);this._addListener(a.SimidCreativeMessage.REQUEST_CHANGE_AD_DURATION,this._onRequestChangeAdDuration);this._addListener(a.SimidCreativeMessage.FATAL_ERROR,this._onCreativeFatalError);this._context.addEventListener(a.EVENT_AD,this._onAdEvent);var b=this._ad.getActiveCreativeRendition();this._simidCreativeUrl=b.getSimidCreativeUrl();this._slotBase=this._ad.getSlot().getBase();this._simidVariableDurationAllowed=b.getSimidVariableDurationAllowed();
this._simidVariableDurationAllowed||(a.debug("simidRenderer no variableDuration attribute found"),this._simidVariableDurationAllowed=!1);a.debug("simidRenderer variable duration= "+this._simidVariableDurationAllowed);this._maxDuration=this._ad.getSlot().getMaxDuration();this._simidCreativeUrl?this._initializeSIMIDCreative():a.debug("SIMIDRenderer: The SIMID media could not be loaded.")}};a.SIMIDRenderer.prototype._initializeSIMIDCreative=function(){var b=this;a.debug("SIMIDRenderer._initWithScripts");
this._simidIframe=this._createSIMIDIframe();this._videoElement=this._rendererController.getContentVideoElement();this._videoElement.addEventListener("timeupdate",this._onAdVideoTimeUpdate,!1);this._videoElement.addEventListener("stalled",this._onAdVideoStalled,!1);this._videoElement.addEventListener("durationchange",this._onAdVideoDurationChange,!1);window.document.addEventListener("fullscreenchange",this._onFullScreenChange,!1);var c=this._getFullDimensions(),d=this._getFullDimensions(),e=this._ad.getAdSkippableState(),
f={videoDimensions:c,creativeDimensions:d,fullscreen:this._isFullScreen,fullscreenAllowed:this._fullScreenAllowed,variableDurationAllowed:this._simidVariableDurationAllowed,skippableState:e?"playerHandles":"adHandles",version:"1.1",siteUrl:document.location.host,useragent:a.checkUserAgent(navigator.userAgent.toLowerCase()),muted:this._isMuted,volume:this._context.getAdVolume()};(c=this._rendererController.getAdInstance().getActiveCreativeRendition().getParameter("creativeData"))||(c="");var k={adParameters:c,
clickThroughUrl:this._ad.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)};this._sessionCreatedPromise.then(function(){b._sendMessage(a.SimidPlayerMessage.INIT,{environmentData:f,creativeData:k}).then(function(a){b._resolveInitializationPromise(a)}).catch(function(a){b._rejectInitializationPromise(a)});b._initializationPromise.then(})};a.SIMIDRenderer.prototype._getFullDimensions=function(){var a=this._ad.getSlot().getVideoDisplaySize();this._isFullScreen=
a.width>=screen.width&&a.height>=screen.height?!0:!1;return{x:a.x,y:a.y,width:a.width,height:a.height}};a.SIMIDRenderer.prototype._onSessionCreated=a.SIMIDRenderer.prototype._startSIMIDCreativePlayback=function(){var b=this;this._sendMessage(a.SimidPlayerMessage.START_CREATIVE).then(function(a){b._resolveStartCreativePromise(a)});this._startCreativePromise.then(};a.SIMIDRenderer.prototype._createSIMIDIframe=
function(){this._videoElement=this._rendererController.getContentVideoElement();var a=document.createElement("iframe");a.style.display="none";a.id="_fw_simid_iframe";this._slotBase.appendChild(a);a.style.position="absolute";a.style.top=a.style.left="0px";a.style.width=this._slotBase.style.width||"100%";a.style.height=this._slotBase.style.height||"100%";a.src=this._simidCreativeUrl;this._setMessageTarget(a.contentWindow);return a};a.SIMIDRenderer.prototype._setMessageTarget=function(a){this._target=
a};a.SIMIDRenderer.prototype._sendMessage=function(b,c){var d=this,e=this._nextMessageId++,f={sessionId:this._sessionId,messageId:e,type:b==a.SimidProtocolMessage.CREATE_SESSION?b:"SIMID:"+b,timestamp:Date.now(),args:c};return a.SimidEventsThatRequireResponse.includes(b)?new Promise(function(a,b){d._addResolveRejectListener(e,a,b);d._target.postMessage(JSON.stringify(f),d._simidCreativeUrl);d._startTimeoutTimer(f)}):new Promise(function(a,b){d._target.postMessage(JSON.stringify(f),d._simidCreativeUrl);
a()})};a.SIMIDRenderer.prototype._addListener=a.SIMIDRenderer.prototype._addResolveRejectListener=function(a,c,d){this._resolutionListeners[a]=;a.SIMIDRenderer.prototype._receiveMessage=function(b){b&&b.data&&(b=JSON.parse(b.data))&&(5E3===this._creativeMessageCount?(this._reject(b,{errorCode:a.SimidPlayerErrorCode.POSTMESSAGE_CHANNEL_OVERLOADED,
message:"The creative is overloading the postmessage channel."}),this._stopAdOverload()):this._handlePostMessage(b))};a.SIMIDRenderer.prototype._handlePostMessage=function(b){this._creativeMessageCount++;a.debug("SIMID Renderer: Creative postMessage count"+this._creativeMessageCount);var c=b.sessionId,d=b.type;a.debug("SIMID Renderer: Creative message:"+d);c=this._sessionId==c;(""==this._sessionId&&d==a.SimidProtocolMessage.CREATE_SESSION||c)&&null!=d?Object.values(a.SimidProtocolMessage).includes(d)?
this._handleProtocolMessage(b):d.startsWith("SIMID:")&&(d=d.substr(6),(d=this._listeners[d])&&d.forEach(function(a){return a(b)})):this._sendMessage(a.SimidPlayerErrorCode.SPEC_NOT_FOLLOWED_ON_MESSAGES,{errorCode:a.SimidPlayerErrorCode.SPEC_NOT_FOLLOWED_ON_MESSAGES,message:"The creative is not following the spec in the way it sends messages."})};a.SIMIDRenderer.prototype._handleProtocolMessage=function(b){var c=b.type;switch(c){case a.SimidProtocolMessage.CREATE_SESSION:this._sessionId=b.sessionId;
this._resolve(b);(c=this._listeners[c])&&c.forEach(;break;case a.SimidProtocolMessage.RESOLVE:case a.SimidProtocolMessage.REJECT:c=b.args;var d=c.messageId,e=this._resolutionListeners[d];c&&this._handleCreativeError(c);e&&(e(b),delete this._resolutionListeners[d],this._clearTimeoutTimer(b))}};a.SIMIDRenderer.prototype._resolve=function(b,c){var d=this._nextMessageId++;b={messageId:b.messageId,value:c};d={sessionId:this._sessionId,messageId:d,type:a.SimidProtocolMessage.RESOLVE,
timestamp:Date.now(),args:b};this._target==window&&(this._target=window.parent);a.debug(d);this._target.postMessage(JSON.stringify(d),this._simidCreativeUrl)};a.SIMIDRenderer.prototype._reject=function(b,c){var d=this._nextMessageId++;b={messageId:b.messageId,value:c};d={sessionId:this._sessionId,messageId:d,type:a.SimidProtocolMessage.REJECT,timestamp:Date.now(),args:b};this._target.postMessage(JSON.stringify(d),this._simidCreativeUrl)};a.SIMIDRenderer.prototype.pause=function(){this._isPaused=!0;
this._videoRenderer.pause();this._sendMessage(a.SimidMediaMessage.PAUSE)};a.SIMIDRenderer.prototype.resume=function(){this._isPaused=!1;this._videoRenderer.resume();this._sendMessage(a.SimidMediaMessage.PLAY)};a.SIMIDRenderer.prototype.stop=function(){this._stopAd()};a.SIMIDRenderer.prototype.info=function(){return{moduleType:a.MODULE_TYPE_RENDERER}};a.SIMIDRenderer.prototype.getPlayheadTime=function(){return this._videoRenderer.getPlayheadTime()};a.SIMIDRenderer.prototype.getDuration=function(){return this._videoRenderer.getDuration()};
a.SIMIDRenderer.prototype.setVolume=function(b){this._videoRenderer.setVolume(b);this._isMuted=0===b?!0:!1;a.debug("SIMIDRenderer setVolume: "+b);this._sendMessage(a.SimidMediaMessage.VOLUME_CHANGE,{volume:b,muted:0===b})};a.SIMIDRenderer.prototype._onRequestPause=function(b){if(this._ad)if(this._isPaused){var c={errorCode:a.SimidCreativeErrorCode.PAUSE_NOT_HONORED,message:"Request for pause not honored since the video is already paused."};this._reject(b,c);a.debug("SIMIDRenderer: "+c.message)}else this.pause();
else console.log(this._ad)};a.SIMIDRenderer.prototype._onRequestPlay=function(b){if(this._ad)if(this._isPaused)this.resume();else{var c={errorCode:a.SimidPlayerErrorCode.VIDEO_COULD_NOT_LOAD,message:"Request for play not honored as video is already playing."};this._reject(b,c);a.debug("SIMIDRenderer: "+c.message)}else console.log(this._ad)};a.SIMIDRenderer.prototype._onRequestStop=function(b){this._resolve(b);this._stopAd(a.SimidStopCode.CREATIVE_INITIATED)};a.SIMIDRenderer.prototype._onRequestSkip=
a.SIMIDRenderer.prototype._onRequestFullScreen=function(b){this._fullScreenAllowed?this._isFullScreen?this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_FUNCTIONALITY_REQUEST,message:"Media is already in full screen."}):(this._slotBase.requestFullscreen(),this._resolve(b)):this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_FUNCTIONALITY_REQUEST,message:"Fullscreen functionality is not allowed."})};a.SIMIDRenderer.prototype._onFullScreenChange=
function(){this._isFullScreen=document.fullscreenElement;this._context.setVideoDisplaySize(0,0,window.screen.availWidth,window.screen.availHeight,"relative");this._videoElement.style.width="100%";this._videoElement.style.height="100%"};a.SIMIDRenderer.prototype._onRequestExitFullScreen=function(b){this._fullScreenAllowed?this._isFullScreen?(document.exitFullscreen(),this._resolve(b)):this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_FUNCTIONALITY_REQUEST,message:"Media is not currently in full screen mode."}):
this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_FUNCTIONALITY_REQUEST,message:"Fullscreen functionality is not allowed."})};a.SIMIDRenderer.prototype._onRequestVolume=function(b){this._resolve(b);var c=b.args.volume;b=b.args.muted;a.debug("SIMIDRenderer onRequestVolume "+c+"is Muted: "+b);b?this.setVolume(0):this.setVolume(c)};a.SIMIDRenderer.prototype._onGetMediaState=function(b){var c=this.getPlayheadTime(),d=this.getDuration(),e=this._isEnded,f=this._isMuted,k=this._isPaused,g=this._context.getAdVolume(),
m=this._isFullScreen;this._resolve(b,{currenTime:c,duration:d,ended:e,muted:f,paused:k,volume:g,fullscreen:m});a.debug("SIMIDRenderer onGetMediaState currentTime: "+c+", duration: "+d+", isEnded: "+e+", isMuted: "+f+", isPaused: "+k+", vol: "+g+", isFullScreen: "+m)};a.SIMIDRenderer.prototype._onCreativeFatalError=a.SIMIDRenderer.prototype._onRequestChangeAdDuration=function(b){var c=b.args.duration;this._simidVariableDurationAllowed?c>
this._maxDuration?this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_TIME,message:"The creative is requesting more time than the player is willing to support."}):-2!=c&&0>c?this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_TIME,message:"A negative duration is not valid."}):(this._requestedDuration=c,this._compareAdAndRequestedDurations(),this._resolve(b)):this._reject(b,{errorCode:a.SimidPlayerErrorCode.UNSUPPORTED_TIME,message:"Variable duration allowed is set to false."})};
a.SIMIDRenderer.prototype._onReceiveCreativeLog=a.SIMIDRenderer.prototype._compareAdAndRequestedDurations=function(){0!=this._requestedDuration&&-2!=this._requestedDuration&&this.getPlayheadTime()>=this._requestedDuration&&(this._videoRenderer.stop(),this._stopAd(a.SimidStopCode.CREATIVE_INITIATED))};a.SIMIDRenderer.prototype._onAdVideoTimeUpdate=function(){if(this._simidIframe){var b=this._videoRenderer.getPlayheadTime();a.debug("SIMIDRenderer: TIMEUPDATE "+
b);this._sendMessage(a.SimidMediaMessage.TIME_UPDATE,{currentTime:b})}};a.SIMIDRenderer.prototype._onAdVideoStalled=function(){a.debug("SIMIDRenderer: STALLED");this._sendMessage(a.SimidMediaMessage.STALLED)};a.SIMIDRenderer.prototype._onAdVideoDurationChange=a.SIMIDRenderer.prototype._onAdEvent=function(b){var c=this;a.debug("SIMIDRenderer._onAdEvent:",b.subType);if(b&&b.subType)switch(b.subType){case a.EVENT_AD_IMPRESSION:a.debug("SIMIDRenderer: AD_IMPRESSION");
this._sendMessage(a.SimidMediaMessage.PLAY);this._sendMessage(a.SimidMediaMessage.PLAYING);break;case a.EVENT_AD_SKIPPED:a.debug("SIMIDRenderer: AD_SKIPPED");this._sendMessage(a.SimidPlayerMessage.AD_SKIPPED);break;case a.EVENT_AD_COMPLETE:a.debug("SIMIDRenderer: AD_COMPLETE: ");this._sendMessage(a.SimidMediaMessage.ENDED);this._isSessionCreated||this._sendMessage(a.SimidPlayerErrorCode.SESSION_NOT_CREATED,{errorCode:a.SimidPlayerErrorCode.SESSION_NOT_CREATED,message:"Session was not created by the creative."});
null==this._requestedDuration?this._stopAd(a.SimidStopCode.MEDIA_PLAYBACK_COMPLETE):-2!=this._requestedDuration&&(b=this._videoRenderer.getDuration(),setTimeout(1E3*(this._requestedDuration-b)));break;case a.ERROR_TIMEOUT:this._sendMessage(a.SimidPlayerMessage.FATAL_ERROR,{errorCode:a.SimidPlayerErrorCode.VIDEO_TIME_OUT,message:"The ad media has timed out."});this._stopAd(a.SimidStopCode.PLAYER_INITATED);break;case a.ERROR_DEVICE_LIMIT:this._sendMessage(a.SimidPlayerMessage.FATAL_ERROR,
{errorCode:a.SimidPlayerErrorCode.MEDIA_NOT_SUPPORTED,message:"The SIMID media from the VAST response is not supported on this device."});this._stopAd(a.SimidStopCode.PLAYER_INITATED);break;case a.ERROR_UNKNOWN:this._sendMessage(a.SimidPlayerMessage.FATAL_ERROR,{errorCode:a.SimidPlayerErrorCode.UNSPECIFIED,message:"Unspecified error."}),5E3>this._creativeMessageCount&&this._stopAd(a.SimidStopCode.PLAYER_INITATED)}};a.SIMIDRenderer.prototype._adVideoError=function(b){b={error:b.errorCode,message:b.errorInfo};
a.debug("SIMIDRenderer: Media Error, error code: "+b.error+", "+b.message+" ");this._sendMessage(SimidMediaMessage.ERROR,b)};a.SIMIDRenderer.prototype._startTimeoutTimer=function(b){var c=this,d=b.type,e=b.messageId;a.debug("SIMID Renderer timeout STARTED for "+d+" msg ID "+e);this._timeoutListeners[e]=setTimeout(function(){var b={errorCode:a.SimidPlayerErrorCode.RESPONSE_TIMEOUT,message:"The creative timeout for sending resolve or reject message for "+d+" msg ID "+e};c._sendMessage(a.SimidPlayerErrorCode.RESPONSE_TIMEOUT,
b);a.debug("SIMIDRenderer Error: "+b.message)},this._creativeTimeoutDelayInMs)};a.SIMIDRenderer.prototype._clearTimeoutTimer=function(b){var c=b.args.messageId;a.debug("SIMID Renderer timeout CLEARED for "+b.type+" for original msg ID "+c);clearTimeout(this._timeoutListeners[c]);delete this._timeoutListeners[c]};a.SIMIDRenderer.prototype._handleCreativeError=function(b){switch(b.value.errorCode){case a.SimidCreativeErrorCode.UNSPECIFIED:a.debug("SIMIDRenderer CREATIVE ERROR: UNSPECIFIED");break;case a.SimidCreativeErrorCode.CANNOT_LOAD_RESOURCE:a.debug("SIMIDRenderer CREATIVE ERROR: Resources could not be loaded.");
break;case a.SimidCreativeErrorCode.PLAYBACK_AREA_UNUSABLE:a.debug("SIMIDRenderer CREATIVE ERROR: Playback area not usable by creative.");break;case a.SimidCreativeErrorCode.INCORRECT_VERSION:a.debug("SIMIDRenderer CREATIVE ERROR: Wrong SIMID version.");this._sendMessage(a.SimidPlayerErrorCode.WRONG_VERSION,{errorCode:a.SimidPlayerErrorCode.WRONG_VERSION,message:"The player could not support the creatives version."});break;case a.SimidCreativeErrorCode.TECHNICAL_ERROR:a.debug("SIMIDRenderer CREATIVE ERROR: Creative not playable for a technical reason on this site.");
break;case a.SimidCreativeErrorCode.EXPAND_NOT_POSSIBLE:a.debug("SIMIDRenderer CREATIVE ERROR: Request for expand not honored.");break;case a.SimidCreativeErrorCode.PAUSE_NOT_HONORED:a.debug("SIMIDRenderer CREATIVE ERROR: Request for pause not honored.");break;case a.SimidCreativeErrorCode.PLAYMODE_NOT_ADEQUATE:a.debug("SIMIDRenderer CREATIVE ERROR: Play mode not adequate for creative.");break;case a.SimidCreativeErrorCode.CREATIVE_INTERNAL_ERROR:a.debug("SIMIDRenderer CREATIVE ERROR: Ad internal error.");
break;case a.SimidCreativeErrorCode.DEVICE_NOT_SUPPORTED:a.debug("SIMIDRenderer CREATIVE ERROR: Device not supported.");break;case a.SimidCreativeErrorCode.MESSAGES_NOT_FOLLOWING_SPEC:a.debug("SIMIDRenderer CREATIVE ERROR: The player is not following the spec in the way it sends messages.");break;case a.SimidCreativeErrorCode.PLAYER_RESPONSE_TIMEOUT:a.debug("SIMIDRenderer CREATIVE ERROR: The player is not responding adequately to messages.")}};a.SIMIDRenderer.prototype._sendLog=a.SIMIDRenderer.prototype._stopAd=function(b){var c=this;b=void 0===b?a.SimidStopCode.PLAYER_INITATED:b;this._simidIframe?(this._simidIframe.style.display="none",b={code:b},this._isEnded=!0,this._sendMessage(a.SimidPlayerMessage.AD_STOPPED,b).then(function(){c._destroySimidIframe();c._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED);c._videoRenderer.stop();c.dispose()})):(this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED),this._videoRenderer.stop(),
this.dispose())};a.SIMIDRenderer.prototype._stopAdOverload=function(){this._simidIframe&&(this._simidIframe.style.display="none",this._sendMessage(a.SimidPlayerMessage.AD_STOPPED,{code:a.SimidStopCode.CREATIVE_INITIATED}),this._destroySimidIframe(),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED),this.dispose())};a.SIMIDRenderer.prototype.dispose=function(){a.debug("SimidRenderer.dispose()");window.removeEventListener("message",this._receiveMessage);window.document.removeEventListener("fullscreenchange",
this._onFullScreenChange);this._context.removeEventListener(a.EVENT_AD,this._onAdEvent);this._videoElement.removeEventListener("timeupdate",this._onAdVideoTimeUpdate);this._videoElement.removeEventListener("stalled",this._onAdVideoStalled);this._videoElement.removeEventListener("durationchange",this._onAdVideoDurationChange);this._resolveInitializationPromise=this._initializationPromise=this._ad=this._slotBase=this._simidCreativeUrl=this._simidIframe=this._videoRenderer=this._rendererController=this._videoElement=
this._context=null;this._listeners={};this._timeoutListeners={};this._creativeMessageCount=0;this._isSessionCreated=!1;this._requestedDuration=this._maxDuration=null;this._creativeTimeoutDelayInMs=5E3;this._isMuted=this._isEnded=this._isPaused=this._isFullScreen=this._fullScreenAllowed=!1};a.SIMIDRenderer.prototype._destroySimidIframe=function(){this._simidIframe&&(this._simidIframe.remove(),this._simidIframe=null,this._listeners={},this._sessionId="",this._nextMessageId=1,this._resolutionListeners=
{})};a.AdVerification=function(){this.vendorKey="";this.javaScriptResources=[];this.executableResources=[];this.verificationParameters="";this.trackingEvents={}};a.AdVerification.prototype={parseFromVAST:function(a){this.javaScriptResources=this._parseJavaScriptResources(a);this.executableResources=this._parseExecutableResources(a);a["@attributes"]&&a["@attributes"].vendor&&(this.vendorKey=a["@attributes"].vendor);a.VerificationParameters&&a.VerificationParameters.value&&(this.verificationParameters=
a.VerificationParameters.value);if(a.TrackingEvents&&a.TrackingEvents.Tracking)if(a=a.TrackingEvents.Tracking,a.length)for(var b=0;b<a.length;b++)this._pushTrackingEventsFromVAST(a[b]);else this._pushTrackingEventsFromVAST(a)},parseFromJSON:function(b){if(b.javaScriptResource)if(Array.isArray(b.javaScriptResource))for(i=0,arr=b.javaScriptResource||[];i<arr.length;i++)this.javaScriptResources.push(this._parseJavaScriptResourcesNodeFromJSON(arr[i]));else a.debug("AdVerification node is expecting an array but got: "+
b.javaScriptResource);b.vendor&&(this.vendorKey=b.vendor);b.verificationParameters&&(this.verificationParameters=b.verificationParameters);if(b.trackingEvents)for(i=0,arr=b.trackingEvents||[];i<arr.length;i++)this._pushTrackingEventsFromJSON(arr[i])},dispatchAdVerificationNotExecutedWithReason:_pushTrackingEventsFromVAST:_pushTrackingEventsFromJSON:function(a){var b=a.event;this.trackingEvents[b]?this.trackingEvents[b].push(a.url):this.trackingEvents[b]=[a.url]},_parseJavaScriptResources:function(a){return this._parseResources(a.JavaScriptResource,this._parseJavaScriptResourceNode.bind(this))},_parseExecutableResources:
_parseResources:_parseJavaScriptResourceNode:function(a){return{url:this._parseUrl(a),apiFramework:this._parseApiFramework(a),browserOptional:this._parseBrowserOptional(a)}},_parseJavaScriptResourcesNodeFromJSON:function(a){var b="";"boolean"===typeof a.browserOptional&&(b=a.browserOptional?"true":"false");return{url:a.url||"",apiFramework:a.apiFramework||"",browserOptional:b}},
_parseExecutableResourceNode:_parseUrl:_parseApiFramework:function(a){return this._parseFromAttributes(a,"apiFramework")},_parseBrowserOptional:function(a){return this._parseFromAttributes(a,"browserOptional")},_parseType:_parseFromAttributes:;a.RenditionSelector=function(a,c,d,e){this._targetByterate=a;this._arWeight=c;this._pxWeight=d;this._conversionFactor=e};a.RenditionSelector.prototype={getBestFitRendition:getCustomPlayerBestFitRendition:_getBitRateFilteredRenditions:getBestDashRendition:compareVisualMetrics:calculateVisualRatios:findDistance:;a.RenditionSelector.prototype.constructor=a.RenditionSelector;a.SkippableAdExtension=function(){this._skipButton=this._currentPlayingAd=this._context=null;this._onAdInitiated=this._onAdInitiated.bind(this);this._adEventListener=this._adEventListener.bind(this);this._onRequestComplete=this._onRequestComplete.bind(this);this._pollForAdProgress=this._pollForAdProgress.bind(this);this._onVideoDisplayBaseChanged=
this._onVideoDisplayBaseChanged.bind(this);this._onClick=this._onClick.bind(this);this._defaultSkipButtonId="_fw_skipAdButton"};a.SkippableAdExtension.prototype={init:function(b){a.debug("SkippableAdExtension.init(context)");this._context=b;this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete)},_onRequestComplete:_prepareExtension:function(){this._context.addEventListener(a.EVENT_VIDEO_DISPLAY_BASE_CHANGED,this._onVideoDisplayBaseChanged);this._context.addEventListener(a.EVENT_AD,this._onAdInitiated);var b=this._context.getParameter(a.PARAMETER_EXTENSION_SKIPPABLE_AD_CONTROL_CLICK_ELEMENT),c=null;b&&(c=document.getElementById(b));c?a.debug("SkippableAdExtension using custom button"):(a.debug("SkippableAdExtension creating button"),
c=document.createElement("button"),c.id=this._defaultSkipButtonId,(b=this._context.getParameter(a.PARAMETER_EXTENSION_SKIPPABLE_AD_BUTTON_CLASS))?(a.debug("SkippableAdExtension using custom class to style button"),c.className=b):(c.style.bottom="2%",c.style.right="1%",c.style.width="80px",c.style.position="absolute",c.style.backgroundColor="#01020185",c.style.border="none",c.style.color="white",c.style.padding="8px",c.style.textAlign="center",c.style.textDecoration="none",c.style.display="inline-block",
c.style.fontSize="16px",c.style.zIndex=9999),this._context._temporalSlotBase.appendChild(c));c.style.visibility="hidden";c.disabled=!0;this._skipButton=c},_onAdInitiated:function(b){b.subType===a.EVENT_AD_PREINIT&&b.adInstance&&(b=b.adInstance,-1<b.getSkipOffset()&&(a.debug("SkippableAdExtension._onAdInitiated"),this._context.addEventListener(a.EVENT_AD,this._adEventListener),this._currentPlayingAd=b,0<b.getSkipOffset()&&(this._skipButton.innerHTML=b.getSkipOffset(),this._adProgressPoller=setInterval(this._pollForAdProgress,
1E3))))},_onVideoDisplayBaseChanged:function(){a.debug("SkippableAdExtension._onVideoDisplayBaseChanged");if(this._skipButton){this._skipButton.parentElement.removeChild(this._skipButton);var b=this._context._temporalSlotBase;b&&b.appendChild(this._skipButton)}},_pollForAdProgress:function(){a.debug("SkippableAdExtension._pollForAdProgress");var b=this._currentPlayingAd.getPlayheadTime(),c=this._currentPlayingAd.getSkipOffset();b=Math.round(c-b);0<b&&(this._skipButton.innerHTML=b)},_adEventListener:function(b){b&&
b.subType&&(b.subType==a.EVENT_AD_IMPRESSION?this._onAdImpression():b.subType==a.EVENT_AD_SKIPPABLE_STATE_CHANGED?this._onAdSkippableStateChanged():(b.subType==a.EVENT_AD_IMPRESSION_END||b.subType==a.EVENT_ERROR)&&this._onAdEnded())},_onAdImpression:function(){a.debug("SkippableAdExtension._onAdImpression");this._skipButton.style.visibility="visible"},_onAdSkippableStateChanged:function(){a.debug("SkippableAdExtension._onAdSkippableStateChanged");if(this._currentPlayingAd.getAdSkippableState()){clearInterval(this._adProgressPoller);
this._adProgressPoller=null;var b=this._context.getParameter(a.PARAMETER_EXTENSION_SKIPPABLE_AD_BUTTON_TEXT);b||(b="Skip Ad");this._skipButton.innerHTML=b;this._skipButton.addEventListener("click",this._onClick);this._skipButton.disabled=!1}},_onClick:function(){a.debug("SkippableAdExtension._onClick");this._currentPlayingAd.getAdSkippableState()&&this._currentPlayingAd.skip()},_onAdEnded:function(){a.debug("SkippableAdExtension._onAdEnded");null!=this._adProgressPoller&&(clearInterval(this._adProgressPoller),
this._adProgressPoller=null);this._skipButton.disabled=!0;this._skipButton.style.visibility="hidden";this._skipButton.removeEventListener("click",this._onClick);this._context.removeEventListener(a.EVENT_AD,this._adEventListener);this._currentPlayingAd=null},dispose:function(){a.debug("SkippableAdExtension.dispose()");if(this._context){this._context.removeEventListener(a.EVENT_AD,this._onAdInitiated);this._context.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete);this._context.removeEventListener(a.EVENT_VIDEO_DISPLAY_BASE_CHANGED,
this._onVideoDisplayBaseChanged);if(document.getElementById(this._defaultSkipButtonId)){var b=this._context._temporalSlotBase;b&&b.removeChild(this._skipButton)}this._context=null}this._skipButton=null}};a.SkippableAdExtension.prototype.constructor=a.SkippableAdExtension;a.PageSlotScanner=a.PageSlotScanner.prototype=
{isSlotDuplicate:findPageSlotByScope:scanPageSlots:slotsToTypeBStr:_addCandidateAds:_parseFlags:_getInitialOption:;a.PageSlotScanner.prototype.constructor=a.PageSlotScanner;a.DisplayRefreshExtension=a.DisplayRefreshExtension.prototype={init:_resetSubContext:_onAdStarted:_checkMissingCompanionForAd:_refreshSlots:dispose:;a.DisplayRefreshExtension.prototype.constructor=a.DisplayRefreshExtension;a.Ad=a.Ad.prototype={isRequiredToShow:function(){return this._isRequiredToShow},parse:getSoAdUnit:function(){return this._soAdUnit},getId:function(){return this._id},getNoLoad:function(){return this._noLoad},getCreative:addCreativeRendition:;a.Ad.prototype.constructor=a.Ad;
a.Creative=a.Creative.prototype={getId:function(){return this._id},getBaseUnit:function(){return this._baseUnit},getDuration:function(){return this._duration},getParameter:function(a){return this._parameters[a]},setParameter:function(a,c){null==c?delete this._parameters[a]:this._parameters[a]=c},parse:
getAllCreativeRenditions:function(){return this._creativeRenditions},addCreativeRendition:function(a){this._creativeRenditions.push(a)},getEligibleCreativeRenditionsForAdInstance:cloneForTranslation:;a.Creative.prototype.constructor=a.Creative;a.CreativeRendition=function(){this._id=null;this._creativeApi="None";this._baseUnit=null;this._replicaId="";this._bitrate=this._height=this._width=this._preference=this._originalVastWrapperUrl=this._wrapperUrl=this._wrapperType=this._contentType=null;this._parameters={};this._primaryCreativeRenditionAsset=null;this._otherCreativeRenditionAssets=[];this._simidVariableDurationAllowed=
this._simidCreativeUrl=this._universalAdId=this._duration=null};a.CreativeRendition.prototype={getId:function(){return this._id},getCreativeApi:function(){return this._creativeApi},setCreativeApi:getReplicaId:function(){return this._replicaId},getContentType:
setContentType:function(a){this._contentType=a},getWrapperType:function(){return this._wrapperType},setWrapperType:function(a){this._wrapperType=a},getWrapperUrl:function(){return this._wrapperUrl},setWrapperUrl:function(a){this._wrapperUrl=a},getOriginalVastWrapperUrl:function(){return this._originalVastWrapperUrl},setOriginalVastWrapperUrl:function(a){this._originalVastWrapperUrl=a},getBaseUnit:function(){return this._baseUnit},setBaseUnit:function(a){this._baseUnit=a},getPreference:function(){return this._preference},
setPreference:function(a){this._preference=a},getWidth:function(){return this._width},setWidth:function(a){this._width=a},getHeight:function(){return this._height},setHeight:function(a){this._height=a},getDuration:function(){return this._duration},setDuration:function(a){this._duration=a},getParameter:function(a){return this._parameters[a]},setParameter:getUniversalAdId:function(){return this._universalAdId},setUniversalAdId:function(a){this._universalAdId=
a},getSimidCreativeUrl:function(){return this._simidCreativeUrl},setSimidCreativeUrl:function(a){this._simidCreativeUrl=a},getSimidVariableDurationAllowed:function(){return this._simidVariableDurationAllowed},setSimidVariableDurationAllowed:getPrimaryCreativeRenditionAsset:function(){return this._primaryCreativeRenditionAsset},getOtherCreativeRenditionAssets:function(){return this._otherCreativeRenditionAssets.slice()},addCreativeRenditionAsset:getBitrate:parse:;a.CreativeRendition.prototype.constructor=a.CreativeRendition;a.CreativeRenditionAsset=a.CreativeRenditionAsset.prototype={getName:function(){return this._name},setName:function(a){this._name=a},getUrl:function(){return this._url},getProxiedUrl:function(){return this._proxiedUrl},setUrl:getContent:function(){return this._content},setContent:function(a){this._content=a},getContentType:function(){return this._contentType},setContentType:function(a){this._contentType=a},getMimeType:function(){return this._mimeType},setMimeType:function(a){this._mimeType=a},getBytes:function(){return this._bytes},setBytes:function(a){this._bytes=a},parse:;a.CreativeRenditionAsset.prototype.constructor=a.CreativeRenditionAsset;a.AdManager=function(b){var c=this;this._context=this.newContext();this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,;this._networkId=this._serverURL="";this._location=null;if(b){var d=a.Util.validateJSON(b,{adNetworkID:{allowedTypes:["number","string"]},adProfileID:{allowedTypes:["string"]},
adServerUrl:{allowedTypes:["string"]},adSiteSectionID:{allowedTypes:["string"]},adAssetNetworkID:{allowedTypes:["number","string"],isOptional:!0},adOptOut:{allowedTypes:["number","boolean"],isOptional:!0},appBundleID:{allowedTypes:["string"],isOptional:!0},appName:{allowedTypes:["string"],isOptional:!0},appVersion:{allowedTypes:["string"],isOptional:!0},authenticationEntity:{allowedTypes:["string"],isOptional:!0},coppa:{allowedTypes:["string"],isOptional:!0},deviceAdAttributes:{allowedTypes:["string"],
isOptional:!0},distributorAppID:{allowedTypes:["string"],isOptional:!0},ifa:{allowedTypes:["string"],isOptional:!0},ifaValue:{allowedTypes:["string"],isOptional:!0},privacyData:{allowedTypes:["string"],isOptional:!0}},"adConfig");if(d)throw b="Unable to initialize AdManager instance. "+d.message,a.warn(b),Error(b);this._adConfig=Object.assign({},b);"boolean"===typeof b.adOptOut&&(this._adConfig.adOptOut=Number(b.adOptOut));"string"===typeof b.adNetworkID&&(this._adConfig.adNetworkID=Number(b.adNetworkID));
"string"===typeof b.adAssetNetworkID&&(this._adConfig.adAssetNetworkID=Number(b.adAssetNetworkID));this.setNetwork(b.adNetworkID);b=b.adServerUrl;b.startsWith("https://")||b.startsWith("http://")||(b="https://"+b);this.setServer(b)}this._consentManager=new a.ConsentManager;this._permissionsCheck=0;this._permissionsCheckExecuted=!1;this._checkPermissions()};a.AdManager.prototype={getVersion:setNetwork:setServer:setLocation:newContext:_validateVideoConfig:newContextWithContext:_checkPermissions:function(){navigator.permissions&&"undefined"!=typeof Notification&&Notification.permission?navigator.permissions.query({name:"notifications"}).then(function(a){this._permissionsCheckExecuted=!0;this._permissionsCheck="denied"===Notification.permission&&"prompt"===a.state?0:1}.bind(this)):this._permissionsCheckExecuted=!0},dispose:function(){a.debug("AdManager.dispose()");this._context.dispose();this._consentManager.dispose();this._consentManager=null},cloneContext:
_isTCFAPIExecuted:function(){return this._consentManager.isTCFAPIExecuted()},_isUSPAPIExecuted:function(){return this._consentManager.isUSPAPIExecuted()},_getConsentValues:;a.AdManager.prototype.constructor=a.AdManager;a._instanceCounter=0;a._instanceQueue={};a.Context=a.Context.prototype={getAdVolume:function(){return this._adVolume},setAdVolume:__onVolumeChange:addRenderer:setCapability:function(b,c){a.debug("Context.setCapability",b,c);this._adRequest.setCapability(b,c)},addKeyValue:setParameter:getParameter:setVideoState:registerVideoDisplayBase:function(b){a.debug("Context.registerVideoDisplayBase",b);if(b&&"string"===typeof b){if(this._temporalSlotBase&&this._temporalSlotBase.id===b){a.debug("Context.registerVideoDisplayBase","register the same display base, will only change size");
var c=this._temporalSlotBase.getElementsByTagName("video")}else{this._temporalSlotBase&&this.getContentVideoElement().removeEventListener("volumechange",this._onVolumeChange);this._temporalSlotBase=document.getElementById(b);if(!this._temporalSlotBase){a.warn("Context.registerVideoDisplayBase","could not get element",b);return}c=this._temporalSlotBase.getElementsByTagName("video");if(0===c.length){a.warn("Context.registerVideoDisplayBase","could not get video element from",b);this._temporalSlotBase=
null;return}this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=c[0];this.getContentVideoElement().addEventListener("volumechange",this._onVolumeChange);this._adVolume=c[0].muted?0:c[0].volume}this._setVideoDisplaySizeByContentVideo(c[0]);this.dispatchEvent(a.EVENT_VIDEO_DISPLAY_BASE_CHANGED)}else a.warn("Context.registerVideoDisplayBase","id required")},setContentVideoElement:registerCustomPlayer:_registerCustomPlayer:
getContentVideoElement:getCustomPlayer:setVideoDisplaySize:getVideoDisplaySize:setVideoDisplayCompatibleSizes:function(b){a.debug("Context.setVideoDisplayCompatibleSizes",b);this._adRequest.setVideoDisplayCompatibleSizes(b)},resize:setProfile:setVideoAsset:setVideoAssetCurrentTimePosition:function(b){a.debug("Context.setVideoAssetCurrentTimePosition("+b+")");this._videoAsset.setVideoAssetCurrentTimePosition(b)},setSiteSection:setVisitor:startSubsession:function(b){a.debug("Context.startSubsession("+b+")");this._adRequest.setSubsessionToken(b)},setRequestMode:function(b){a.debug("Context.setRequestMode("+b+")");this._adRequest.setRequestMode(b)},setRequestDuration:function(b){a.debug("Context.setRequestDuration("+b+")");this._adRequest.setRequestDuration(b)},addCandidateAd:addTemporalSlot:getTemporalSlots:getSlotByCustomId:getSlotsByTimePositionClass:
_isRequestReady:function(){var b=this.getParameter(a.PARAMETER_USE_GDPR_TCFAPI)&&!this._adManager._isTCFAPIExecuted(),c=this.getParameter(a.PARAMETER_USE_CCPA_USPAPI)&&!this._adManager._isUSPAPIExecuted();return!b&&!c&&this._adManager._permissionsCheckExecuted},submitRequest:function(b){a.debug("Context.submitRequest",b);var c=0;if(this._isRequestReady()||this._isRefreshRequest)this._submitValidatedRequest(b);else var d=this.getParameter(a.PARAMETER_CONSENT_RETRIEVAL_TIMEOUT),e=setInterval(function(){c+=
100;if(this._isRequestReady()||c>=d)clearInterval(e),this._submitValidatedRequest(b)}.bind(this),100)},_submitValidatedRequest:function(b){this.dispatchEvent(a.EVENT_REQUEST_INITIATED,{});if(this._requestState)a.warn("Context.submitRequest: request already submitted");else if(a.Util.isBlank(this._adManager._serverURL))a.warn("Context.submitRequest: serverURL is not set");else{this._requestState=1;this._addConsentValuesToAdRequest();this._adRequest.scanPageSlots();if(this._isRefreshRequest){var c=
{},d=[],e,f;for(e=0;e<this._refreshSlots.length;e++){var k=this._refreshSlots[e];if(void 0!==this._adRequest._slotScanner._slots[k]){c[k]=this._adRequest._slotScanner._slots[k];var g=c[k].split("&");for(f=0;f<g.length;f++)-1!==g[f].search("flag")&&(g[f]="flag=-cmpn");c[k]=g.join("&")}for(f=0;f<this._adRequest._slotScanner._knownSlots.length;f++)this._adRequest._slotScanner._knownSlots[f].id===k&&(g=this._adRequest._slotScanner._knownSlots[f],g.acceptCompanion=!1,g.initialAdOption=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,
d.push(g))}this._adRequest._slotScanner._slots=c;this._adRequest._slotScanner._knownSlots=d}this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)?(a.debug("Context.submitRequest: enabling Safari transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0,a.PLATFORM_SEND_REQUEST_BY_JS=!1,this.setParameter(a.PARAMETER_ENABLE_JS_TRANSPORT,!1,a.PARAMETER_LEVEL_GLOBAL)):this.getParameter(a.PARAMETER_ENABLE_JS_TRANSPORT)?(a.debug("Context.submitRequest: enabling JS transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_JS=
!0,a.PLATFORM_SEND_REQUEST_BY_FORM&&a.warn("PARAMETER_ENABLE_FORM_TRANSPORT was enabled while attempting to use PARAMETER_ENABLE_JS_TRANSPORT. This will prevent PARAMETER_ENABLE_JS_TRANSPORT from working properly. Please disable PARAMETER_ENABLE_FORM_TRANSPORT before attempting to use PARAMETER_ENABLE_JS_TRANSPORT."),this.setParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT,!1,a.PARAMETER_LEVEL_GLOBAL)):a.PLATFORM_SEND_REQUEST_BY_JS=!1;c=this._adManager._serverURL;".js"!==c.substring(c.length-3,c.length)&&
(c=this._adRequest.generateTypeBRequestUrl());d=bind(this);b&&"number"===typeof b&&0<b&&(a.CONTEXT_REQUEST_TIMEOUT=b);setTimeout(d,1E3*a.CONTEXT_REQUEST_TIMEOUT);a.log("Context.submitRequest: sending request to",c,"timeout",a.CONTEXT_REQUEST_TIMEOUT);a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(c,this._instanceId,!0),this._onMessagePosted=
bind(this),window.addEventListener("message",this._onMessagePosted,!1)):a.PLATFORM_SEND_REQUEST_BY_JS?a.Util.sendAdRequestWithXMLHTTPRequest(c):a.Util.pingURLWithScript(c)}},_addConsentValuesToAdRequest:function(){var b=this._adManager._getConsentValues();this.getParameter(a.PARAMETER_USE_GDPR_TCFAPI)&&this._adRequest.useTCFAPI(b.gdpr);
this.getParameter(a.PARAMETER_USE_CCPA_USPAPI)&&this._adRequest.useUSPAPI(b.uspString)},requestComplete:addEventListener:function(b,c){a.debug("Context.addEventListener",b);this._eventDispatcher.addEventListener(b,c)},removeEventListener:dispatchEvent:dispose:loadExtension:_markCurrentContentPlayheadTime:_getContentPlayheadTime:_requestContentVideoToPauseBySlot:function(a){this._videoAsset.requestPauseBySlot(a)},_requestContentVideoToResumeBySlot:_setVideoDisplaySizeByContentVideo:_replacePageSlot:;a.Context.prototype.constructor=a.Context;a.Capabilities=a.Capabilities.prototype={init:
setCapability:function(a,c){this._capabilities[a]=c},getCapability:parseCapabilities:;a.OMSDKExtension=a.OMSDKExtension.prototype=
{init:_getVideoElement:function(){this._videoElement=this._context.getContentVideoElement();return null==this._videoElement?(a.debug("OMSDKExtension: Error: Cannot use OMSDK because no video element was found"),null):this._videoElement},_onRequestComplete:function(b){a.Util.getBooleanParameter(a.PARAMETER_EXTENSION_OMSDK_ENABLED,!1)?b.success?null!=
this._getVideoElement()&&this._initWithScripts():a.debug("OMSDKExtension: request complete failed."):a.debug("OMSDKExtension: return since OMSDKExtension is disabled")},_initWithScripts:_addServiceScript:_addSessionScript:_addIframe:function(b,c,d){a.debug("OMSDKExtension._addIframe");var e=document.createElement("iframe");e.sandbox="allow-scripts allow-same-origin";e.style.display="none";e.srcdoc="<script src="+b+">\x3c/script>";return this._addElement(e,c,d)},_addScript:function(b,c,d){a.debug("OMSDKExtension._addScript");var e=document.createElement("script");e.type="text/javascript";e.src=b;return this._addElement(e,c,d)},_addElement:function(b,c,d){b.id=c+this._context._instanceId;b.onload=
d.bind(this);b.onerror=bind(this);return document.body.appendChild(b)},_checkIfAdSessionShouldStart:_onAdInitiated:function(b){if(b.subType===a.EVENT_AD_PREINIT&&b.adInstance&&(a.debug("OMSDKExtension_onAdInitiated"),null!=this._getVideoElement())){b=
b.adInstance;var c=b.getActiveCreativeRendition();c=b._rendererController._matchRendererClassName(c);this._isRendererSupported(c)?this._isTimePositionClassSupported(b)?null==b._adVerifications||0==b._adVerifications.length?a.debug("OMSDKExtension: No AdVerifications found."):(this._videoElement.addEventListener("loadeddata",this._videoDidLoad),this._context.addEventListener(a.EVENT_AD,this._adEventListener),this._ad=b,this._prepareAdSession()):a.debug("OMSDKExtension: The selected ad's slot time position class is not supported by OMSDK Web Video: "+
timePositionClass):a.debug("OMSDKExtension: The selected renderer does not support OMSDK Web Video: "+c)}},_isRendererSupported:function(b){a.debug("OMSDKExtension._isRendererSupported:",b);switch(b){case h+".VideoRenderer":case h+".DashRenderer":case h+".CustomPlayerRenderer":return!0;default:return!1}},_isTimePositionClassSupported:_prepareAdSession:_getVerificationResourcesFromAdVerifications:_createOMSDKContext:function(b){a.debug("OMSDKExtension._createOMSDKContext");var c=this._context._adManager.getVersion()+"";c=new this._sessionClient.Partner(a.OMSDK_PARTNER_NAME,c);var d=a.Util.getContentURL();b=new this._sessionClient.Context(c,
b,d);b.setVideoElement(this._videoElement);b.setServiceWindow(this._omsdkIframe.contentWindow);return b},_createAdSession:_startAdSession:_videoDidLoad:_adEventListener:_onAdEvent:function(b){a.debug("OMSDKExtension._onAdEvent:",b.subType);if(b&&b.subType)switch(b.subType){case "loaded":this._onVideoLoaded();break;case a.EVENT_AD_IMPRESSION:try{this._adEvents.impressionOccurred(),this._mediaEvents.start(this._ad.getDuration(),this._getVolume())}catch(c){a.debug("OMSDKExtension: Error: "+
c)}break;case a.EVENT_AD_FIRST_QUARTILE:this._mediaEvents.firstQuartile();break;case a.EVENT_AD_MIDPOINT:this._mediaEvents.midpoint();break;case a.EVENT_AD_THIRD_QUARTILE:this._mediaEvents.thirdQuartile();break;case a.EVENT_AD_COMPLETE:this._mediaEvents.complete();break;case a.EVENT_AD_IMPRESSION_END:this._endAdSession();break;case a.EVENT_AD_PAUSE:this._mediaEvents.pause();break;case a.EVENT_AD_RESUME:this._mediaEvents.resume();break;case a.EVENT_AD_BUFFERING_START:this._mediaEvents.bufferStart();
break;case a.EVENT_AD_BUFFERING_END:this._mediaEvents.bufferFinish();break;case a.EVENT_AD_VOLUME_CHANGE:this._mediaEvents.volumeChange(this._getVolume());break;case a.EVENT_AD_CLICK:this._mediaEvents.adUserInteraction("click");break;case a.EVENT_AD_SKIPPED:this._mediaEvents.skipped();break;case a.EVENT_ERROR:this._adSession.error("media",b.errorInfo||"An error occured during ad playback."),this._endAdSession()}},_getVolume:_onVideoLoaded:function(){a.debug("OMSDKExtension._onVideoLoaded");
var b=this._ad.getSlot().getTimePositionClass().toLowerCase(),c=this._ad.getSkipOffset(),d=-1<c;d||(c=0);b=new this._sessionClient.VastProperties(d,c,this._context._va_autoPlayType!=a.VIDEO_ASSET_AUTO_PLAY_TYPE_CLICK_TO_PLAY&&this._context._va_autoPlayType!=a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE,b);this._adEvents.loaded(b)},_endAdSession:_cleanupAfterAdSession:dispose:;a.OMSDKExtension.prototype.constructor=a.OMSDKExtension;a.USPConsentManager=function(a){this._consentManager=a;this._fwUSPString=null;this._isExecuted=!1;this._getUSPDataCallback=this._getUSPDataCallback.bind(this);this._fetchCCPAData()};a.USPConsentManager.prototype._fetchCCPAData=a.USPConsentManager.prototype._getUSPData=function(b){a.debug("ConsentManager.getUSPData");if("function"==typeof b)try{b("getUSPData",a.CCPA_USPAPI_VERSION,this._getUSPDataCallback)}catch(c){this._isExecuted=!0,a.warn("ConsentManager.getUSPData "+c.name+": "+c.message)}else this._isExecuted=!0,a.warn("USPAPI function cannot be found. _fw_us_privacy: "+this._fwUSPString)};a.USPConsentManager.prototype._retrieveCCPAWithPostMessage=function(){a.debug("ConsentManager.retrieveCCPAWithPostMessage");
this._consentManager.setupConsentPostMessage("__uspapi",a.CCPA_USPAPI_VERSION);this._getUSPData(window.__uspapi)};a.USPConsentManager.prototype._getUSPDataCallback=function(b,c){c?(b=b.uspString,null!=b?"string"==typeof b?this._fwUSPString=b:(this._fwUSPString=b.toString(),a.warn("USPData's uspString value is malformed.")):a.warn("USPData's uspString value is missing.")):a.warn("Cannot retrieve CCPA params from USPAPI.");this._isExecuted=!0};a.USPConsentManager.prototype.isExecuted=function(){return this._isExecuted};
a.USPConsentManager.prototype.getUSPString=a.USPConsentManager.prototype.dispose=function(){this._consentManager=null};a.VideoAsset=a.VideoAsset.prototype={setVideoAsset:setVideoAssetCurrentTimePosition:setVideoState:callback:getPlayheadTime:play:pause:function(){this._internalState.pause(this)},complete:onStartPlaying:function(){this.callback()},
onStartReplaying:function(){this.callback()},onPausePlaying:onResumePlaying:onCompletePlaying:onCompleteReplaying:setMediaState:function(a){this._internalState=a},requestPauseBySlot:function(b){a.debug("requestPauseBySlot");this._internalState===
a.MediaPlayingState.instance||this._internalState===a.MediaReplayingState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,{slot:b}):a.debug("Not sending content pause request because content video state is",JSON.stringify(this._internalState))},requestResumeBySlot:requestForVideoViewCallback:requestComplete:parse:;a.NullRenderer=a.NullRenderer.prototype={start:
info:getPlayheadTime:function(){return-1},getDuration:;a.NullRenderer.prototype.constructor=a.NullRenderer;a.VPAIDWrapper=a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable:checkVPAIDInterface:loadCreativeAsset:setCallbacksForCreative:removeCallbacksForCreative:handshakeVersion:initAd:startAd:stopAd:isCreativeSkippable:getAdSkippableState:skipAd:canPauseAd:function(){return this._isCreativeFunctionInvokable("pauseAd")},canResumeAd:function(){return this._isCreativeFunctionInvokable("resumeAd")},canResizeAd:pauseAd:function(){this.canPauseAd()&&
(a.log("VPAID Creative: pauseAd()"),this._creative.pauseAd())},resumeAd:resizeAd:getAdVolume:function(){return this._isCreativeFunctionInvokable("getAdVolume")?this._creative.getAdVolume():-1},setAdVolume:getAdExpanded:getAdRemainingTime:function(){return this._isCreativeFunctionInvokable("getAdRemainingTime")?this._creative.getAdRemainingTime():-1},getAdDuration:getAdLinear:getAdCompanions:setTimeoutValueInMs:cancelTimeoutEvent:addEventListener:removeEventListener:_waitForTimeout:getTimeoutOperation:function(){return this._timeoutOperation}};
a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper;a.VPAIDRenderer=a.VPAIDRenderer.prototype={};a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer;a.VPAIDRenderer.VastCompanion=a.VPAIDRenderer.VastCompanion.prototype={getWidth:function(){return this._width},getHeight:_isValidResource:hasValidRendtions:translateToAdInstance:;a.VPAIDRenderer.VastCompanion.prototype.constructor=a.VPAIDRenderer.VastCompanion;a.VPAIDRenderer.VastAdSelect=a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio:matchAdsWithSlots:;a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect;a.Util.mixin(a.VPAIDRenderer.prototype,{_initParams:_failWithError:
onCreativeLoadError:onCreativeTimeout:setVolume:
onAdVolumeChange:onAdExpandedChange:onAdDurationChange:onAdClickThru:onCreativeAssetLoaded:function(){a.log("VPAIDRenderer: onCreativeAssetLoaded()");this.vpaidCreative.cancelTimeoutEvent();var b=this,c=if()&&c()){b.creativeEventCallbacks=
{AdStarted:b.onAdStarted,AdStopped:b.onAdStopped,AdSkipped:b.onAdSkipped,AdLoaded:b.onAdLoaded,AdLinearChange:b.onAdLinearChange,AdSizeChange:b.onAdSizeChange,AdExpandedChange:b.onAdExpandedChange,AdDurationChange:b.onAdDurationChange,AdVolumeChange:b.onAdVolumeChange,AdImpression:b.onAdImpression,AdClickThru:b.onAdClickThru,AdSkippableStateChange:b.onAdSkippableStateChange,AdVideoFirstQuartile:b.onAdVideoFirstQuartile,AdVideoMidpoint:b.onAdVideoMidpoint,AdVideoThirdQuartile:b.onAdVideoThirdQuartile,
AdVideoComplete:b.onAdVideoComplete,AdUserAcceptInvitation:b.onAdUserAcceptInvitation,AdUserMinimize:b.onAdUserMinimize,AdUserClose:b.onAdUserClose,AdPaused:b.onAdPaused,AdPlaying:b.onAdResumed,AdError:b.onAdError,AdLog:b.onAdLog};b.vpaidCreative.setCallbacksForCreative(b.creativeEventCallbacks,b);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_EXPAND,
a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON);(c=this.rendition?this.rendition.getParameter("creativeData"):null)||(c=this.rendition?this.rendition.getParameter("VPAID_creativeData"):null);
c&&(c=a.Util.trim(c));c={AdParameters:c};var d=this._rendererController.getAdInstance().getSlot();this.videoBase.style.width="0px";this.videoBase.style.height="0px";this.videoBase.style.zIndex="100000";this.videoBase.style.position="absolute";this.videoBase.style.left=this._rendererController.getContentVideoElement().style.left;this.videoBase.style.top=this._rendererController.getContentVideoElement().style.top;this.videoBase.className="fw_vpaid_slot";this.videoParent=d.getBase();var e=this._rendererController.getContentVideoElement();
if("nodeType"in e&&0<e.nodeType)try{this.videoParent.insertBefore(this.videoBase,this._rendererController.getContentVideoElement())}catch(k){this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild)}else this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild);e={slot:this.videoBase,videoSlot:this._rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0};var f=d.getWidth();d=d.getHeight();f&&d||!this.rendition||(f=this.rendition.getWidth(),d=this.rendition.getHeight());
this.vpaidViewmode=f>=screen.width&&d>=screen.height?"fullscreen":"normal";a.log("VPAIDRenderer ad init videoMode: "+this.vpaidViewmode);this.vpaidCreative.initAd(f,d,this.vpaidViewmode,this.vpaidDesiredBitrate,c,e)}},onAdLoaded:onVisibilityChange:onAdStarted:onAdStopped:onAdImpression:onAdLinearChange:
onAdSizeChange:onAdPaused:function(){a.log("VPAIDRenderer: onAdPaused()");"playing"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.adPlaybackState="paused"},onAdResumed:attemptSkip:
onAdSkippableStateChange:onAdSkipped:onAdVideoFirstQuartile:function(){a.log("VPAIDRenderer: onAdVideoFirstQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint:function(){a.log("VPAIDRenderer: onAdVideoMidpoint()");this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},onAdVideoThirdQuartile:function(){a.log("VPAIDRenderer: onAdVideoThirdQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},
onAdVideoComplete:onAdUserAcceptInvitation:function(){a.log("VPAIDRenderer: onAdUserAcceptInvitation()");this._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose:function(){a.log("VPAIDRenderer: onAdUserClose()");this._rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize:function(){a.log("VPAIDRenderer: onAdUserMinimize()");
this._rendererController.processEvent({name:a.EVENT_AD_MINIMIZE})},onAdLog:function(b){a.log("VPAIDRenderer: onAdLog: "+b)},onAdError:start:
stop:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:pause:function(){a.log("VPAIDRenderer pause()");this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.vpaidCreative.canPauseAd()?"playing"===this.adPlaybackState&&(this.adPlaybackState="pausing",this.vpaidCreative.pauseAd()):a.log("The creative is not able to pause")},resume:dispose:resize:function(){a.log("VPAIDAdRenderer resize()");var b=this._rendererController.getAdInstance().getSlot(),c=b.getWidth();b=b.getHeight();a.log("VPAIDRenderer new size width:"+c+" height:"+b);this.vpaidViewmode=c>=screen.width&&b>=screen.height?"fullscreen":"normal";a.log("VPAIDRenderer videoMode: "+this.vpaidViewmode);
this.vpaidCreative.resizeAd(c,b,this.vpaidViewmode)},getAdSkippableState:function(){return this.vpaidCreative.getAdSkippableState()}});a.VastTranslator=a.VastTranslator.prototype={start:function(b){function c(b){a.log("VastTranslator\t"+b)}tion h(b,c){if(b&&b.length)for(var d=0;d<b.length;d++)h(b[d],c);else if(b.AdVerifications&&b.AdVerifications.Verification)if(b=b.AdVerifications.Verification,b.length)for(d=0;d<b.length;d++){var e=new a.AdVerification;e.parseFromVAST(b[d]);
c.adVerifications.push(e)}else e=new a.AdVerification,e.parseFromVAST(b),c.adVerifications.push(e)}unction p(){this.creativeView=[];this.start=[];this.firstQuartile=[];this.midpoint=[];this.thirdQuartile=[];this.complete=[];this.mute=[];this.unmute=[];this.pause=
[];this.rewind=[];this.resume=[];this.replay=[];this.fullscreen=[];this.expand=[];this.collapse=[];this.acceptInvitation=[];this.stop=[];this.skip=[];this.progress={};this.percentageProgress={}}function B(a){this._impressions=[];this.clickThrough=null;this.clickTrackings=[];this.customClicks=[];this.creativeData=null;this.sequence=-1;this.universalAdId=null;this.vastRenditions=[];this.duration=NaN;this.adp=a;this.isDrivingAd=!1;this.simidUrl=null;this.simidVariableDurationAllowed=!1;this.simidCreativeApi=
this.simidContentType=null}function H(a){B.call(this,a)}function I(a){B.call(this,a)}tion O(b,d){c("initTrackingEvents()");if(d&&b){y(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.creativeView);y(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.start);y(b,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.firstQuartile);y(b,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,d.midpoint);y(b,a.EVENT_AD_THIRD_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.thirdQuartile);y(b,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,d.complete);y(b,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,
d.mute);y(b,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,d.unmute);y(b,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,d.pause);y(b,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,d.resume);y(b,a.EVENT_AD_REWIND,a.EVENT_TYPE_STANDARD,d.rewind);y(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.fullscreen);y(b,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,d.collapse);y(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.expand);y(b,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,d.stop);y(b,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,d.acceptInvitation);
y(b,a.EVENT_AD_SKIPPED,a.EVENT_TYPE_STANDARD,d.skip);for(var e=Object.keys(d.progress),f=0;f<e.length;f++){var q=e[f];b.addProgressEventCallbackUrls(q,d.progress[q])}e=Object.keys(d.percentageProgress);for(f=0;f<e.length;f++)q=e[f],b.addPercentageProgressEventCallbackUrls(q,d.percentageProgress[q])}}unction R(a,b){c("initTemporalAdInstance");a||d("initTemporalAdInstance: Invalid adInstance");if(b.selectedDrivingAd){b.surveyUrl&&a._creative.setParameter("_fw_survey_url",b.surveyUrl);var e=b.selectedDrivingAd,f=b.selectedDrivingRenditions;c("vastRenditions:"+f);for(var q=4===z,g=0;g<f.length;g++){var h=a.addCreativeRendition();var x=h.addCreativeRenditionAsset("VAST_CRA",
!0);var l=f[g];a:{var m=l.creativeType;switch(m){case "video/mp4":m="video/mp4-h264";break a;case "video/3gp":m="video/3gpp"}}c("initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  "+[l.creativeApi,e.duration,l.width,l.height,l.url,m,l.creativeType]);h.setCreativeApi(l.creativeApi);isNaN(e.duration)||h.setDuration(e.duration);l.width&&!isNaN(l.width)&&h.setWidth(l.width);l.height&&!isNaN(l.height)&&
h.setHeight(l.height);e.universalAdId&&h.setUniversalAdId(e.universalAdId);e.simidUrl&&h.setSimidCreativeUrl(e.simidUrl);e.simidCreativeApi&&h.setCreativeApi(e.simidCreativeApi);e.simidContentType&&h.setContentType(e.simidContentType);e.simidVariableDurationAllowed&&h.setSimidVariableDurationAllowed(e.simidVariableDurationAllowed);l.url&&x.setUrl(l.url);l.code&&x.setContent(l.code);x.setMimeType(l.creativeType);"static"===l.resourceType&&"text/html"===l.creativeType?x.setContentType("text/html_doc_ref"):
"application/x-javascript"===l.creativeType||"application/javascript"===l.creativeType?x.setContentType("text/js_ref"):"iframe"===l.resourceType?x.setContentType("text/html_doc_ref"):"text/html"===l.creativeType||"text/html_doc_ref"===l.creativeType?x.setContentType("text/html_doc_ref"):"text/html_doc_lit_mobile"===l.creativeType?x.setContentType("text/html_doc_lit_mobile"):q||k(m)?(x.setContentType("text/html_doc_lit_mobile"),x.setUrl(null),x.setContent(S(a,F.getCustomId(),e,l,"text/html_doc_lit_mobile"))):
x.setContentType(m);e.creativeData&&0!==e.creativeData.length&&(c("initTemporalAdInstance(), set asset parameter creativeData:"+e.creativeData),h.setParameter("creativeData",e.creativeData));q||k(m)||(l=l.bitrate,!isNaN(l)&&0<l&&x.setBytes(1E3*l*e.duration/8));m=L;x=J;l=!1;if(h.getContentType()&&m){var n=h.getContentType().toLowerCase(),p=m.toLowerCase();if(n===p)l=!0;else if(0===n.indexOf("video/mp4")&&0===p.indexOf("video/mp4")||"application/javascript"===p&&"text/js_ref"===n)h.setContentType(m),
l=!0}m=!1;h.getCreativeApi()&&x&&(n=h.getCreativeApi().toLowerCase(),p=x.toLowerCase(),n===p?m=!0:0===n.indexOf("mraid")&&0===p.indexOf("mraid")&&(m=!0,h.setCreativeApi(x)));l&&m?h.setPreference(10):m?h.setPreference(6):l?h.setPreference(5):h.setPreference(0);c("adjustMatchedRendition "+h.getId()+", contentType "+h.getContentType()+", creativeAPI "+h.getCreativeApi()+", preference "+h.getPreference())}O(a,e.trackingEvents);M(a,b);P(a,q?f[0].clickThrough:e.clickThrough,e.clickTrackings,e.customClicks,
e.impressions);a.addAdVerificationsFromVast(b.adVerifications)}else h=a.addCreativeRendition(),h.setContentType("null/null"),x=h.addCreativeRenditionAsset("VAST_CRA",!0),x.setContentType("null/null")}nction u(b){if(200<=b.status&&400>b.status)if(b.responseXML){var d=(new r).parseAdData(b.responseXML);if(d){c("scheduleVastAds");if(d&&0!==d.length)if(b=d[0].selectedPackage,d=d[0].redirectPackage,!b&&!d)if(c("scheduleVastAds(), no ads from vast response!!!"),t)if(4!==z)v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting linear ad but returned non-linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH);else v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,
"Expecting non-linear ad but returned linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH);else v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+D);else if(!b&&d){c("scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server");c("scheduleRedirect");b=[];var e=[];b.push(F);e.push({});for(var f=C,g=d.selectedCompanionAds,h=0;h<f.length;h++){var q=f[h];g&&g[q.getCustomId()]&&(b.push(q),e.push(g[q.getCustomId()]))}(f=v._rendererController.scheduleAdInstances(b))&&0<f.length&&(g=
f[0],h=g.addCreativeRendition(),h.setWrapperUrl(a.Util.transformUrlToProxy(d.tagUrl)),h.setOriginalVastWrapperUrl(w.getActiveCreativeRendition().getOriginalVastWrapperUrl()),h.setWrapperType(U),h.setContentType(L),h.setCreativeApi(J),O(g,d.getTrackingEventsOfWrapper()),M(g,d),P(g,d.getClickThroughOfWrapper(),d.getClickTrackingsOfWrapper(),d.getCustomClicksOfWrapper(),d.getImpressionOfWrapper()),g.addAdVerificationsFromVast(d.adVerifications));c("scheduleRedirect, schedule companion for redirect ad "+
d);for(h=1;h<f.length;h++)if(g=f[h])q=e[h],q instanceof n&&T(b[h],g,q,d)}else{if(b){c("scheduleVastAds(), ads returned from vast response, going to schedule them");b.selectedDrivingAd?(c("scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad"),b.selectedDrivingAd.isDrivingAd=!0):c("scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad");c("scheduleAdPackage()");d=[];e=[];d.push(F);b.selectedDrivingAd&&e.push(b.selectedDrivingAd);
f=C;g=b.selectedCompanionAds;for(h=0;h<f.length;h++)q=f[h],g&&g[q.getCustomId()]&&(d.push(q),e.push(g[q.getCustomId()]));g=v._rendererController.scheduleAdInstances(d);if(0<g.length){c("scheduleAdPackage, scheduled "+g.length+" ads"+b.selectedDrivingAd?"":", 1 of it is nullAd for pure companion ad schedule");b.selectedDrivingAd||c("Driving ad is not selected, will create a dummy null ad.");b.selectedDrivingAd||(d.shift(),R(g.shift(),b));for(h=0;h<g.length;h++)if(q=g[h]){var k=e[h];k instanceof n?
T(d[h],q,k,b):R(q,b)}!b.selectedDrivingAd&&0<f.length&&0<b.companionAds.length&&0===e.length&&(c("found empty companion slots and companion ads in package, but none of them matches slot size"),v.onTranslatorFailed(a.ERROR_UNMATCHED_SLOT_SIZE))}else c("scheduleAdPackage, no ad scheduled.")}}else c("no ads for scheduleVastAds");v._request=null;v._rendererController.handleStateTransition(a.TRANSLATOR_STATE_STARTED);v._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else v.onTranslatorFailed(a.ERROR_PARSE,
"wrapperUrl="+D,a.ERROR_VAST_XML_PARSING);else if(0!=b.status)v.onTranslatorFailed(a.ERROR_IO,"wrapperUrl="+D)}this._rendererController=b;var K="image/gif image/jpeg image/png text/html text/javascript text/html_doc_ref text/html_doc_lit_mobile application/x-javascript application/javascript".split(" "),t=!1,w=this._rendererController.getAdInstance(),v=this,F=w.getSlot(),z=),C=this._rendererController.getCompanionSlots().filter(;c("Checking CompanionSlots, length = "+C.length+", this._rendererController.getCompanionSlots().length = "+
this._rendererController.getCompanionSlots().length+", AdInstance.getCompanionSlots.length = "+w.getCompanionSlots().length);var L=w.getActiveCreativeRendition().getContentType(),J=w.getActiveCreativeRendition().getCreativeApi()||"None";this.log("ExpectedDrivingContentType:"+L+", ExpectedDrivingAPI:"+J);var U=w.getActiveCreativeRendition().getWrapperType();l.prototype={init:function(a,b,c,d,e,f,g,h){this.log("init("+[].slice.call(arguments,0).join(",")+")");this.url=a;this.width=1*b;this.height=1*
c;this.creativeType=d;this.resourceType=e;this.bitrate=f;var q;if((q=g)&&0!==q.length)switch(q.toLowerCase()){case "flashvar":case "flashvars":q="clickTag";break;case "vpaid":q="VPAID";break;case "mraid":q="MRAID-1.0";break;case "simid":q="SIMID"}else q="None";this.creativeApi=q;this.code=h||null},log:function(b){a.log("VastTranslator.VastRendition\t"+b)},toString:;
l.prototype.constructor=l;B.prototype={parse:function(b){this.log("parse()");b["@attributes"]&&b["@attributes"].hasOwnProperty("skipoffset")&&(w._setSkipOffset(b["@attributes"].skipoffset),w._setSkipOffsetPercentage(b["@attributes"].skipoffset));if(b.Duration)if(b.Duration.value){var c=/(\d+):(\d+):(\d+)/.exec(b.Duration.value);c?this.duration=3600*c[1]+60*c[2]+1*c[3]:this.warn("Failed to parse duration value for creative "+b)}else this.warn("No duration value set for creative "+b);b.VideoClicks&&
(b.VideoClicks=[].concat(b.VideoClicks),a.Util.forEachOnArray(b.VideoClicks,this));b.MediaFiles&&b.MediaFiles.MediaFile&&(b.MediaFiles.MediaFile=[].concat(b.MediaFiles.MediaFile),a.Util.forEachOnArray(b.MediaFiles.MediaFile,this));b.MediaFiles&&b.MediaFiles.InteractiveCreativeFile&&(this.simidUrl=g(b.MediaFiles.InteractiveCreativeFile.value),this.simidVariableDurationAllowed=b.MediaFiles.InteractiveCreativeFile["@attributes"].variableDuration,this.simidContentType=
b.MediaFiles.InteractiveCreativeFile["@attributes"].type,this.simidCreativeApi=b.MediaFiles.InteractiveCreativeFile["@attributes"].apiFramework,this.log("parsing SIMID data, SIMID url: "+this.simidUrl+", SIMID variable duration allowed: "+this.simidVariableDurationAllowed+", SIMID content type: "+this.simidContentType+", SIMID creative api: "+this.simidCreativeApi));b.TrackingEvents&&this.parseTrackingEvents(b.TrackingEvents,this.setTrackingEvents());b.AdParameters&&(this.log("parse() got AdParameters:"+
b.AdParameters.value),this.creativeData=b.AdParameters.value);b.Companion&&(b.Companion=[].concat(b.Companion),a.Util.forEachOnArray(b.Companion,this));b.NonLinear&&(b.NonLinear=[].concat(b.NonLinear),a.Util.forEachOnArray(b.NonLinear,this))},parseLinears:function(a){2!==z?(this.log("TargetAdType != TARGET_LINEAR, skipping parse"),t=!0):this.parse(a)},parseNonLinears:parseCompanionAds:setTrackingEvents:parseTrackingEvents:function(b,c){this.log("parseTrackingEvents");b.Tracking&&(b.Tracking=[].concat(b.Tracking),a.Util.forEachOnArray(b.Tracking,function(b){var d=b["@attributes"].event,e=g(b.value);if(e)switch(d){case "creativeView":case "start":case "firstQuartile":case "midpoint":case "thirdQuartile":case "complete":case "mute":case "unmute":case "pause":case "resume":case "rewind":case "replay":case "fullscreen":case "expand":case "collapse":case "acceptInvitation":case "stop":case "skip":c[d].push(e);
break;case "progress":d=a.Util.offsetStringToSecond(b["@attributes"].offset,this.duration);-1!=d&&(c.progress[d]||(c.progress[d]=[]),c.progress[d].push(e));b=a.Util.offsetStringToPercentage(b["@attributes"].offset);-1!=b&&(c.percentageProgress[b]||(c.percentageProgress[b]=[]),c.percentageProgress[b].push(e));break;case "close":c.stop.push(e)}},this),a.debug("********** events:",c))},toString:log:function(b){a.log("VastTranslator."+
this.constructor.name+"\t"+b)},warn:;b=Object.defineProperty||function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)};b(B.prototype,"trackingEvents",{get:);b(B.prototype,"impressions",{set:function(a){this._impressions=a},get:);B.prototype.constructor=B;H.prototype=new B;H.prototype.constructor=H;I.prototype=new B;I.prototype.constructor=I;n.prototype=new B;n.prototype.getPrimaryRendition=b(n.prototype,"impressions",{get:);n.prototype.constructor=n;var Q=Q.prototype={parse:testAndUpdatePackageForTemporalSlot:testAndUpdatePackageForPageSlots:
renditionFitsInSlot:calcDeadSpaceRatio:matchAdsToSlots:getAllRenditions:findRenditionGroupByContentType:formalizeString:
getAdsByTargetType:getImpressionOfWrapper:getTrackingEventsOfWrapper:getClickThroughOfWrapper:getClickTrackingsOfWrapper:function(){this.log("getClickTrackingsOfWrapper");
for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickTrackings&&0<d.clickTrackings.length&&(b=d.clickTrackings);d=d.vastRenditions;for(var e=0;e<d.length;e++){var f=d[e];if(f.clickTrackings&&0<f.clickTrackings.length){b=f.clickTrackings;break}}if(b)break}}return b},getCustomClicksOfWrapper:testWrapperForRedirect:log:function(b){a.log("VastTranslator.VastAdPackage\t"+b)},warn:function(b){a.warn("VastTranslator.VastAdPackage\t"+b)}};Q.prototype.constructor=Q;r.prototype={getVastVersion:parseAdData:function(b){this.log("parseAdData()");var c={},d;c.selectedPackage=null;c.redirectPackage=null;var e=a.Util.xmlToJson(b);if(e)if(e.VAST&&e.VAST["@attributes"])if(this.getVastVersion(e.VAST["@attributes"].version)<a.MINIMUM_VAST_VERSION_SUPPORTED||this.getVastVersion(e.VAST["@attributes"].version)>a.MAXIMUM_VAST_VERSION_SUPPORTED)v.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+D,a.ERROR_VAST_VERSION_NOT_SUPPORTED);
else{if(e.VAST.Ad){e.VAST.Ad=[].concat(e.VAST.Ad);var f=[];b=[];for(d=0;d<e.VAST.Ad.length;d++){var g=new Q;g.isWrapper=!!e.VAST.Ad[d].Wrapper;g.isWrapper?(g.parse(e.VAST.Ad[d].Wrapper),b.push(g)):(g.parse(e.VAST.Ad[d].InLine),f.push(g))}e=!1;if(0===f.length&&0===b.length)return this.log("parseAdData(): no ads from vast response!!!"),[c];this.log("parseAdData(): "+f.length+"inline ads, "+b.length+" wrapper ads.");g=null;for(d=0;d<f.length;d++)if(this.selectUsableAdsForDrivingSlot(f[d])){this.log("parseAdData(): package for driving slot is found!!!");
g=f[d];break}d=0<C.length&&w.getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY;if(g)d&&this.selectUsableAdsCompanionSlots(g)&&this.log("parseAdData(): companion ads are found for companion slots, with driving slot"),c.selectedPackage=g;else if(d){d=!1;for(var h=0;h<f.length;h++)g=f[h],this.selectUsableAdsCompanionSlots(g)&&(this.log("parseAdData(): companion ads are found for companion slots,without driving slot"),c.selectedPackage=g,d=!0);d||(this.log("parseAdData(): companion ads are not found for companion slots,without driving slot"),
e=!0)}else this.log("parseAdData(): no usable ads found in vast response!!!"),e=!0;if(e&&0<b.length)for(f=0;f<b.length;f++)if(this.testWrapperForRedirect(b[f])){c.redirectPackage=b[f];0==w.getWrapperCount()&&w.getActiveCreativeRendition().setOriginalVastWrapperUrl(D);w.incrementWrapperCount();this.selectUsableAdsCompanionSlots(b[f])&&this.log("parseAdData(): companion ads are found for wrapper ad");break}return[c]}e.VAST.Error&&y(w,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,e.VAST.Error.value);v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,
"wrapperUrl="+D,a.ERROR_VAST_NO_AD)}else v.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+D,a.ERROR_VAST_SCHEMA_VALIDATION);else v.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+D,a.ERROR_VAST_XML_PARSING)},selectUsableAdsForDrivingSlot:
selectUsableAdsCompanionSlots:testAndUpdatePackageForTemporalSlot:function(a,b){this.log("testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = "+b);return a.testAndUpdatePackageForTemporalSlot(b)},testAndUpdatePackageForPageSlots:testWrapperForRedirect:log:function(b){a.log("VastTranslator.VastParser\t"+b)},warn:function(b){a.warn("VastTranslator.VastParser\t"+b)}};var D=w.getActiveCreativeRendition().getWrapperUrl();b=w.getActiveCreativeRendition().getWrapperType();c("AdInstance.getActiveCreativeRendition().getWrapperUrl()="+D+", getWrapperType()="+b);if(0!==b.indexOf("external/vast-"))v.onTranslatorFailed(a.ERROR_NO_RENDERER,"wrapperType="+b+";wrapperUrl="+D,a.ERROR_VAST_TRACKING_ERROR);else if(D&&0!==D.length){var N=
a.VAST_DEFAULT_MAX_WRAPPER_COUNT;(b=this._rendererController.getParameter(a.PARAMETER_VAST_MAX_WRAPPER_COUNT))&&0<Number(b)&&(N=Number(b));b=w.getWrapperCount();if(b>=N)N=w.getActiveCreativeRendition().getOriginalVastWrapperUrl(),v.onTranslatorFailed(a.ERROR_IO,"maximum wrapper limit is reached: "+b+" wrapperUrl="+N,a.ERROR_VAST_WRAPPER_LIMIT_REACH);else{N=this._rendererController.getParameter("translator.vast.asyncLoad");N=!0===a.Util.str2bool(N);c("will load vast xml, asyncAjax:"+N);var W=this._rendererController.getParameter("translator.vast.loadWithCookie");
W=!0===a.Util.str2bool(W);var G=null,V=5E3;(b=this._rendererController.getParameter(a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS))&&0<Number(b)&&(V=Number(b));try{window.XDomainRequest?(G=new XDomainRequest,N=!0):(G=new XMLHttpRequest,G.withCredentials=W),v._request=G,N?(G.open("GET",D),window.XDomainRequest?G.onload=(G.timeout=V,G.onreadystatechange=,G.ontimeout=G.onerror=G.send()):(G.open("GET",D,!1),G.send(),u(G))}catch(q){b=!1;if(!window.XMLHttpRequestException)q.code===DOMException.NETWORK_ERR&&
(d("CORS in IE10"),b=!0);else if(q instanceof XMLHttpRequestException)switch(q.code){case XMLHttpRequestException.NETWORK_ERR:b=!0}b?(d("CORS error:"+q),v.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+D)):(d("exception:"+q),v.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+D+";exception="+q))}}}else v.onTranslatorFailed(a.ERROR_NULL_ASSET,"wrapperUrl="+D,a.ERROR_VAST_TRACKING_ERROR)},info:function(){return{moduleType:a.MODULE_TYPE_TRANSLATOR}},log:function(b){a.log("VastTranslator\t"+b)},warn:function(b){a.warn("VastTranslator\t"+
b)},getPlayheadTime:function(){return-1},getDuration:function(){return-1},stop:onTranslatorFailed:;a.VastTranslator.prototype.constructor=a.VastTranslator;a.ContentVideoExtension=a.ContentVideoExtension.prototype={_isEnabled:init:_respondPauseResume:function(){return a.Util.getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0)},_autoSourceRestore:dispose:;a.ContentVideoExtension.prototype.constructor=a.ContentVideoExtension;return a};l.tv.freewheel.SDK||(l.tv.freewheel.SDK=l.tv.freewheel[h]("tv.freewheel.SDK"));return l})();
