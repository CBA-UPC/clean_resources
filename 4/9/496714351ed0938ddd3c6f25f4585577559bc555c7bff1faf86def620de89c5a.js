(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1009:function(e,t,r){"use strict";(function(e){var s=r(5),a=r(1198);t.a=Object(s.defineComponent)({__name:"expiry-banners",props:{banners:{type:Object,required:!0}},setup(t){const r=t,n=Object(s.computed)((()=>{const{alert:t,comments:s,group:a,highlights:n}=r.banners,c=t.suggestedKeyword?e("Crear una alerta para :keyword",{replaces:{keyword:t.suggestedKeyword}}):"Ponte una alerta",o=t.suggestedKeyword?"Crea una alerta y recibe notificaciones de ofertas similares":"Crea una alerta y recibe notificaciones de chollos similares";return[a?Object.assign({type:"group",icon:"folder",title:e("Más :group",{replaces:{group:a.group}}),description:e("Encuentra más chollos en :group",{replaces:{group:a.group}})},a):Object.assign({type:"comments",icon:"comments-alternate",title:e(":count comentarios",{replaces:{count:s.count}})},s),Object.assign({type:"highlights",icon:"group-default",title:"Explora todos los chollos",description:"Descubre los mejores chollos en nuestra portada"},n),Object.assign({needsLogin:!0,type:"alert",icon:"bell",title:c,description:o},t)]}));return{__sfc:!0,props:r,cards:n,ExpiryBannerItem:a.a}}})}).call(this,r(70).translation)},1198:function(e,t,r){"use strict";var s=r(5),a=r(103),n=r(507),c=r(150),o=Object(s.defineComponent)({__name:"expiry-banner-item",props:{card:{type:Object,required:!0}},setup(e){const t=e,{isLoggedIn:r}=Object(c.a)(),o=Object(s.computed)((()=>t.card.needsLogin&&!r.value));return{__sfc:!0,props:t,isLoggedIn:r,isButton:o,onClick:function(){o.value&&Object(a.b)({login:{source:"keyword_alarm",keyword:t.card.suggestedKeyword},intents:null}).catch((()=>null))},BaseButton:n.a}}}),i=r(44),l=Object(i.a)(o,(function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t(r.BaseButton,{staticClass:"flex",attrs:{href:!r.isButton&&e.card.url},on:{click:r.onClick}},[t("div",{staticClass:"img--square-m img--type-entity text--color-white bg--color-brandPrimary flex--inline boxAlign-jc--all-c boxAlign-ai--all-c flex--shrink-0"},[t("BaseIcon",{attrs:{name:e.card.icon}})],1),t("div",{staticClass:"space--l-2"},[t("h4",{staticClass:"text--b text--color-brandPrimary space--t-1 space--b-2"},[e._v(e._s(e.card.title))]),t("p",{staticClass:"size--all-s text--color-charcoalTint"},[e._v(e._s(e.card.description))])])])}),[],!1,null,null,null);t.a=l.exports},1360:function(e,t,r){"use strict";r.r(t);var s=r(1009).a,a=r(44),n=Object(a.a)(s,(function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",{staticClass:"threadItem-content threadItem-content--space"},[t("div",{directives:[{name:"track",rawName:"v-track:expiredBanner.view",arg:"expiredBanner",modifiers:{view:!0}}],staticClass:"border border--color-borderGrey bRad--a space--v-4"},[t("h3",{staticClass:"size--all-l space--h-4"},[e._v(e._s("¡Oops! Este chollo parece estar ya agotado... Aquí tienes unas opciones que te pueden interesar:"))]),t("div",{staticClass:"flex--fromW3"},e._l(r.cards,(function(e,s){return t(r.ExpiryBannerItem,{directives:[{name:"track",rawName:"v-track:[`${card.type}ExpiredCard`].click",value:{pos:s},expression:"{ pos: index }",arg:`${e.type}ExpiredCard`,modifiers:{click:!0}}],key:s,staticClass:"flex--1 space--h-4 space--t-4",attrs:{card:e}})})),1)])])}),[],!1,null,null,null);t.default=n.exports}}]);{__name:"form-wizard-progress-bar-info",props:{list:null,intervalFrequency:{default:1500}},setup(e){const t=e,a=Object(i.ref)(0);function n(){let e=a.value+1;e===t.list.length&&(e=0),a.value=e}return Object(s.a)(n,t.intervalFrequency,{immediate:!0}),{__sfc:!0,props:t,index:a,changeInfoLabel:n}}}),r=a(45),l=Object(r.a)(n,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"lbox--v-5"},[t("BaseIcon",{staticClass:"text--color-brandPrimary space--mr-3",attrs:{name:e.list[a.index].icon}}),t("span",[e._v(e._s(e.list[a.index].label))])],1)}),[],!1,null,null,null);t.a=l.exports},1283:function(e,t,a){"use strict";a.r(t);var i=a(5),s=a(730),n=a(731),r=a(4),l=a(510),c=a(508),o=a(1060),u=a(816),d=a(1061),p=a(1062),f=a(17),m=a(896),h=a(850),k=a(970),v=a(851),g=a(568),b=Object(i.defineComponent)({__name:"step-link-form",props:{isEditing:{type:Boolean},currentStep:null},emits:["change-link","continue"],setup(e,t){let{expose:a,emit:s}=t;const n=e,b=[{icon:"duplicate",label:"Checking for duplicates deals"},{icon:"yen",label:"Fetching Price"},{icon:"gallery",label:"Adding Images"}],_=Object(i.inject)("$v"),L=Object(g.j)(),S=Object(i.ref)(L.value.link),y=Object(i.ref)(""),C=Object(i.ref)(!1),x=Object(i.ref)(!1),O=Object(i.ref)(null),D=Object(i.computed)((()=>!x.value&&1===n.currentStep.visitedCount&&!n.isEditing)),w=Object(i.computed)((()=>S.value.length<4)),j=Object(i.computed)((()=>n.isEditing?b.filter((e=>"duplicate"===e.icon)):b)),B=()=>{L.value.link="",S.value="",C.value=!1,F(),E()},F=()=>{y.value="",_.clear("link"),n.isEditing||r.a.dispatch("threadForm/removeAllGalleryImages")},E=()=>{x.value=!1},T=async()=>{await _.validate("link",S.value)},I=async()=>{s("change-link",S.value),await T()},P=async()=>{L.value.link!==S.value?(await T(),!_.error.link&&S.value?(y.value=S.value,x.value=!0):E()):A(O.value.$el)},W=e=>{B(),A(e)},A=e=>{s("continue",e)};return a({linkValue:S,submit:P,submitWithoutLink:W,isLinkCheckingProcess:x}),{__sfc:!0,DEAL_LIST:b,$v:_,props:n,emit:s,thread:L,linkValue:S,linkValueToValidate:y,hasErrors:C,isLinkCheckingProcess:x,linkInput:O,canSubmit:D,isSubmitBtnDisabled:w,progressBarInfolist:j,resetLink:B,resetLinkData:F,resetLinkCheckProcessStatus:E,pasteLink:async e=>{S.value=e.clipboardData.getData("text/plain"),await I(),n.isEditing||P()},validateLink:T,changeLink:I,submit:P,continueWithLink:()=>{L.value.link=S.value,A(O.value.$el),E()},submitWithoutLink:W,setLinkErrors:e=>{let{hasErrorsFromRequest:t}=e;C.value=t},continueNextStep:A,FormRow:l.o,FormInputLabeled:l.i,FormInputIcon:l.h,FormInputButton:l.g,BaseButton:c.a,ThreadDuplicates:o.a,ControlLinkErrors:u.a,FormWizardProgressBar:d.a,FormWizardProgressBarInfo:p.a,DEAL_TYPE:f.a,MERCHANT_GENERIC_OFFER_TYPE:f.g,CheckLinkDuplicates:m.a,CheckBlockedLinks:h.a,GetLinkSuggestion:k.a,GetLinkMerchantSuggestion:v.a}}}),_=a(45),L=Object(_.a)(b,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"width--all-12 width--max-pageNarrow"},[t("div",{staticClass:"flex--grow-1 space--mb-3"},[t("form",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"link"},expression:"{ name: 'link' }",arg:"formField"}],staticClass:"width--all-12",on:{submit:function(e){return e.preventDefault(),a.submit.apply(null,arguments)}}},[t("div",{staticClass:"flex boxAlign-ai--all-c"},[t("div",{staticClass:"flex--grow-1"},[t("ol",[t(a.FormRow,[t(a.FormInputLabeled,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"linkInput",attrs:{id:"link",placeholder:"https://www.site.com/greatdeal...",name:"link",inputmode:"url",autofocus:!!a.linkValue},on:{change:a.changeLink,paste:function(e){return e.preventDefault(),a.pasteLink.apply(null,arguments)}},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t(a.FormInputIcon,{attrs:{name:"link"}})]},proxy:!0},{key:"appendButton",fn:function(){return[a.linkValue?t(a.FormInputButton,{staticClass:"search-clear-button",on:{click:a.resetLink}}):e._e()]},proxy:!0}]),model:{value:a.linkValue,callback:function(e){a.linkValue="string"==typeof e?e.trim():e},expression:"linkValue"}})],1)],1)]),a.canSubmit?t("div",{staticClass:"hide--toW2 space--ml-2"},[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:submitWithLink.click",arg:"submitWithLink",modifiers:{click:!0}}],staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",type:"submit",disabled:a.isSubmitBtnDisabled}},[e._v(" "+e._s("Get started")+" ")])],1):e._e()]),a.linkValueToValidate?t(a.CheckBlockedLinks,{staticClass:"space--mt-3",attrs:{link:a.linkValueToValidate},on:{request:a.setLinkErrors},scopedSlots:e._u([{key:"default",fn:function({isLoading:i,hasErrors:s,errors:n}){return[s?t(a.ControlLinkErrors,{attrs:{"error-messages":n},on:{cancel:a.resetLink}}):t(a.CheckLinkDuplicates,{attrs:{link:a.linkValueToValidate,filter:{type:{ne:a.MERCHANT_GENERIC_OFFER_TYPE}}},scopedSlots:e._u([{key:"default",fn:function({isLoading:n,hasDuplicates:r,duplicates:l,isSoftDuplicates:c}){return[t("div",[e.isEditing?e._e():t(a.GetLinkSuggestion,{attrs:{link:a.linkValueToValidate,"keep-alive":!i}}),t(a.GetLinkMerchantSuggestion,{attrs:{link:a.linkValueToValidate,"keep-alive":!i}}),r||s?e._e():t("div",{staticClass:"space--mt-3"},[t(a.FormWizardProgressBar,{attrs:{"is-loading":i||n,"has-errors":s||r},on:{end:a.continueWithLink}}),t("div",{staticClass:"space--mt-5 hAlign--all-c"},[t(a.FormWizardProgressBarInfo,{attrs:{list:a.progressBarInfolist}})],1)],1),r?t(a.ThreadDuplicates,{attrs:{type:a.DEAL_TYPE,threads:l,"is-soft-duplicates":c},on:{cancel:a.resetLink,continue:a.continueWithLink}}):e._e()],1)]}}],null,!0)})]}}],null,!1,998225480)}):e._e(),t(a.ControlLinkErrors,{attrs:{"error-messages":a.$v.messages.link},on:{cancel:a.resetLink}}),a.canSubmit?t("div",{staticClass:"hide--fromW2 space--mt-3"},[t(a.BaseButton,{staticClass:"width--all-12 space--mb-3",attrs:{variant:"primary",mode:"brand",type:"submit",disabled:a.isSubmitBtnDisabled}},[e._v(" "+e._s("Get started")+" ")])],1):e._e()],1)]),a.canSubmit?t("div",{staticClass:"hAlign--all-c"},[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:submitWithoutLink.click",arg:"submitWithoutLink",modifiers:{click:!0}}],attrs:{variant:"tertiary",mode:"default"},on:{click:a.submitWithoutLink}},[e._v(" "+e._s("I don't have a link")+" ")])],1):e._e()])}),[],!1,null,null,null),S=L.exports,y=Object(i.defineComponent)({__name:"step-link",props:{isEditing:{type:Boolean},currentStep:null},setup:e=>({__sfc:!0,FormWizardStepBase:s.a,FormWizardStepTitle:n.a,StepLinkForm:S})}),C=Object(_.a)(y,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.FormWizardStepBase,{attrs:{"align-center":""},scopedSlots:e._u([{key:"title",fn:function(){return[t(a.FormWizardStepTitle,{staticClass:"hAlign--all-c"},[e._v(" "+e._s("Share a deal with millions of people")+" ")])]},proxy:!0},{key:"sub-title",fn:function(){return[t("p",{staticClass:"size--all-l size--fromW3-xxl text--color-charcoalTint hAlign--all-c"},[e._v(" "+e._s("Paste the link where other users can buy the deal or find out more information")+" ")])]},proxy:!0},{key:"form",fn:function(){return[e._t("default",(function(){return[t(a.StepLinkForm,{ref:"form",attrs:{"is-editing":e.isEditing,"current-step":e.currentStep},on:{continue:function(t){return e.$emit("continue",t)},"change-link":function(t){return e.$emit("trap")}}})]}))]},proxy:!0}],null,!0)})}),[],!1,null,null,null);t.default=C.exports},161:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(5);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{immediate:s=!1}=a,n=Object(i.ref)(!1);let r=null;function l(){n.value&&c(),n.value=!0,r=setInterval(e,t)}function c(){n.value=!1,clearInterval(r)}return s&&l(),Object(i.onUnmounted)(c),{isActive:n,set:l,clear:c}}},163:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(5),s=a(161),n=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.MAX_PROGRESS=99]="MAX_PROGRESS",e[e.FINISHED=100]="FINISHED",e}(n||{});const r=function(){let{timeConstant:e=1e4,stopOnMaxProgress:t=!1,intervalFrequency:a=1e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=Object(i.ref)(0),l=Object(i.ref)(0),c=Object(i.ref)(!1),{set:o,clear:u}=Object(s.a)(d,a);function d(){r.value+=a;const i=100*(1-Math.exp(-1*r.value/e));l.value=t?Math.min(i,n.MAX_PROGRESS):i}return{startLoader:function(){u(),d(),o(),c.value=!0},completeLoader:function(){u(),l.value=n.MAX_PROGRESS,setTimeout((()=>{l.value=n.FINISHED,c.value=!1}),a)},endLoader:function(){u(),l.value=n.FINISHED,c.value=!1},progressBarPercentage:l,isLoaderInProgress:c}}},571:function(e,t,a){var i=a(766),s=a(308);e.exports=function(e,t,a){return void 0===a&&(a=t,t=void 0),void 0!==a&&(a=(a=s(a))==a?a:0),void 0!==t&&(t=(t=s(t))==t?t:0),i(s(e),t,a)}},730:function(e,t,a){"use strict";var i={props:{alignCenter:{type:Boolean,default:!1}},computed:{containerClasses(){return{"boxAlign-ai--all-c":this.alignCenter}},hasTitle(){return!!this.$scopedSlots.title},hasSubTitle(){return!!this.$scopedSlots["sub-title"]}}},s=a(45),n=Object(s.a)(i,(function(){var e=this,t=e._self._c;return t("Transition",e._g({attrs:{appear:"",name:"slide-in","leave-active-class":"hide","leave-to-class":"hide"}},e.$listeners),[t("section",{staticClass:"flex flex--grow-1 flex--shrink-0 boxAlign-jc--all-c width--all-12",class:e.containerClasses},[t("div",{staticClass:"flex flex--dir-col space--fromW2-h-4 space--h-3 space--fromW3-t-6 space--b-4 boxAlign-ai--all-c width--all-12"},[e.hasTitle?t("div",{staticClass:"space--mb-4 width--all-12 width--max-pageNarrow"},[e._t("title")],2):e._e(),e.hasSubTitle?t("div",{staticClass:"space--mb-4 width--all-12 width--max-pageNarrow"},[e._t("sub-title")],2):e._e(),e._t("form"),e._t("footnotes")],2)])])}),[],!1,null,null,null);t.a=n.exports},731:function(e,t,a){"use strict";var i=a(45),s=Object(i.a)({},(function(e,t){return e("h1",{staticClass:"size--all-xxxl text--color-charcoal text--b",class:t.data.staticClass},[t._t("default")],2)}),[],!0,null,null,null);t.a=s.exports},766:function(e,t){e.exports=function(e,t,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==t&&(e=e>=t?e:t)),e}},896:function(e,t,a){"use strict";var i=a(5),s=a(545),n=a(617),r=a(716);const l=()=>{let e=null;const t=Object(i.ref)([]),a=Object(i.ref)(!1),{isLoading:l,setLoader:c}=Object(s.a)(),o=()=>{t.value=[],a.value=!1,l.value&&Object(r.a)(e)};return{duplicates:t,checkDuplicates:(i,s)=>{i&&(o(),((i,s)=>{e=Object(n.a)(i,s),e.request.then((e=>{e&&(t.value=e.threads,a.value=e.isSoftDuplicates)})).finally(c())})(i,s))},resetDuplicates:o,isLoading:l,isSoftDuplicates:a}};var c=Object(i.defineComponent)({__name:"check-link-duplicates",props:{link:null,filter:null},setup(e){const t=e,{duplicates:a,isLoading:s,isSoftDuplicates:n,checkDuplicates:r,resetDuplicates:c}=l(),o=Object(i.computed)((()=>!!a.value.length));return Object(i.watch)((()=>t.link),(()=>{r(t.link,t.filter)}),{immediate:!0}),Object(i.onBeforeUnmount)((()=>{c()})),{__sfc:!0,props:t,duplicates:a,isLoading:s,isSoftDuplicates:n,checkDuplicates:r,resetDuplicates:c,hasDuplicates:o}}}),o=a(45),u=Object(o.a)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[e._t("default",null,{isLoading:a.isLoading,duplicates:a.duplicates,isSoftDuplicates:a.isSoftDuplicates,hasDuplicates:a.hasDuplicates,reset:a.resetDuplicates})],2)}),[],!1,null,null,null);t.a=u.exports},968:function(e,t,a){"use strict";var i=a(571),s=a.n(i),n={props:{value:{type:Number,required:!0},max:{type:Number,default:100},color:{type:String,default:""}},computed:{percentage(){return Math.round(100*s()(this.value/this.max,0,1))},colorClass(){return this.color?"text--color-".concat(this.color):null}}},r=a(45),l=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"progressBar",class:e.colorClass,attrs:{"aria-label":`${e.percentage}%`}},[t("div",{staticClass:"progressBar-progress",style:{right:100-e.percentage+"%"}})])}),[],!1,null,null,null);t.a=l.exports},970:function(e,t,a){"use strict";var i=a(91),s=a(655),n=a(716),r=a(612);let l=null,c=null;var o={props:{link:{type:String,default:""},keepAlive:{type:Boolean,default:!1}},watch:{link:{handler:"linkChange",immediate:!0}},beforeDestroy(){this.keepAlive||this.cancelRequest()},methods:Object.assign({},Object(i.b)("threadForm",["getFormSuggestionsFromLink","getProductSpecificationFromLink","clearFormSuggestionsFromLink"]),{linkChange(e,t){e!==t&&(this.reset(),this.link&&(this.request(),this.requestProductSpecification()))},async request(){l=await this.getFormSuggestionsFromLink({url:this.link}),l&&l.request.then(r.a).catch((()=>{})).finally(Object(s.a)(this,"isLoading"))},async requestProductSpecification(){c=await this.getProductSpecificationFromLink({url:this.link}),c&&c.request.catch((()=>{}))},cancelRequest(){this.isLoading&&(Object(n.a)(l),Object(n.a)(c))},reset(){this.cancelRequest(),this.clearFormSuggestionsFromLink()}}),render(){return this.$scopedSlots.default?this.$scopedSlots.default({isLoading:this.isLoading}):null}},u=a(45),d=Object(u.a)(o,undefined,undefined,!1,null,null,null);t.a=d.exports}}]);