/*!
 * v2.51.36 built:
 * Tue Jan 16 2024 16:26:52 GMT+0300 (Moscow Standard Time)
 * bundle:vn_providers_vpaid
 *
 */(()=>{"use strict";var e,t,r,i,o="videonow-config";try{e=localStorage,t=sessionStorage}catch(r){t=e={getItem:function(){return""},setItem:}try{r=top.localStorage,i=top.sessionStorage}catch(e){i=r=null}var n=(r?[r]:[]).concat(e),a=(i?[i]:[]).concat(t);r l;function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u="background: #f2f2f2; color: #564545",g="background: #f6f1cd; color: #414042",p="L"+Math.random().toString(36).substring(2,4),h="undefined"!=typeof window&&window||{},f={NONE:0,ERROR:1,WARN:2,LOG:3,TRACK:4,TRACE:5},v="logLevel",m="loglevel-changed",A=0,b=1,y=2,O="color:{{color}}",w=((l={})[A]="",l[b]=O,l[y]=O+";font-weight:bold",l);ar _,P=function(){function e(t){var r=this,i=t.maxLevel,o=void 0===i?0:i,n=t.header,s=void 0===n?p:n,l=t.archive,c=void 0===l?[]:l,O=t.logs,w=void 0===O?[]:O,_=t.rootLogger,P=void 0===_?null:_;this.write=h.vnLoggerHook||this.writeArchive=this.getChildWriter=this.none=function(){},this.error=function(e,t,i){return void 0===t&&(t=y),r.write(f.ERROR,e,E(t,"red",i))},this.warn=function(e,t,i){return void 0===t&&(t=b),r.write(f.WARN,e,E(t,"red",i))},this.log=this.track=this.trace=this.getLevel=this.setLevel=function(e){r.isRootLogger&&(r.write(f.TRACE,"Log level set to "+e),d(v,e),d(m,!0,a),e>r._maxLevel&&r.writeArchive()),r.children.forEach((),r._maxLevel=e},this.rootLogger=P,this._header=s,this._maxLevel=o,this.archive=c,this.logs=w,this.children=[]}var t,r,i;return t=e,(r=[{key:"isRootLogger",get:])&&c(t.prototype,r),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();try{_=window.location.search;try{_=window.top.location.search}catch(e){}}catch(e){}var S,j,I=_?/[?&]vn_debug\b(?:=(\d+))?/.exec(_):null,C=I&&I[1];null==C||s(m,a)?(C=parseInt(s(v),10)||0)&&(j=" logger: vn_debug("+C+") was restored from localStorage"):(S=" logger: vn_debug="+(C=parseInt(C,10)||0)+" is using and saved to localStorage",d(v,C));var V;try{V=window.videonow=window.videonow||{}}catch(e){V={}}if(!V.logger){var R=function(e,t,r){void 0===r&&(r=!0);var i=new P({maxLevel:e,header:t}),o=(new Date).getTimezoneOffset()/60,n=o>0?"-":"+";return r&&i.write(f.LOG," Videonow logger started with log level "+e+" ("+function(e){return Object.keys(f).find(()}(e)+") v2.51.36 built "+new Date(1705411612119).toLocaleDateString()+" user timezone UTC"+n+Math.abs(o),"font-weight: bold"),i}(C);S&&R.warn(S,2,"color:#ff5722;font-size:1.5em;font-weight:bold"),j&&R.warn(j,2,"color:#ff5722; font-size:1.5em"),V.logger=R}const L=V.logger;var T=C;const D={GENERAL_WRAPPER_ERROR:300,TIMEOUT_OF_VAST_URI:301,NO_ADS_RESPONSE:303,GENERAL_LINEAR_ERROR:400,TIMEOUT_OF_MEDIA:402,MEDIA_FILE_NOT_FOUND:403,FAIL_MEDIA_DISPLAY:405,GENERAL_VPAID_ERROR:901,VPAID_JS_ERROR:1010,GLOBAL_TIMEOUT_HAPPENED:1011,VPAID_INIT_AD_TIMEOUT_HAPPENED:1012,START_AD_TIMEOUT_HAPPENED:1013,FORMAT_ERROR:1020,AD_SIZE_ERROR:1030,AD_IMPRESSION_NOT_HAPPENED_ERROR:1040,AD_STARTED_NOT_HAPPENED_ERROR:1041,AD_STAT_ERROR:1050,DEFAULT_AD_NEXT_WITHOUT_ERROR_CODE:1060,FAIL_MEDIA_START:3e3};var k="undefined"!=typeof window&&window||{},x="undefined"!=typeof navigator&&navigator||{},M=x.userAgent,N=x.vendor,H=x.plugins,W=x.appVersion,F=k.opera,z=k.MSStream,B=(k.devicePixelRatio,k.VN&&k.VN.debug&&k.VN.debug.userAgent||M||N||F||""),U=/iPod/.test(B)&&!z,G=/iPhone/.test(B)&&!z,J=/iPad/.test(B)&&!z,Y=U||G||J,q=(/android/i.test(B),/safari/i.test(B)&&/apple/i.test(N)),Q=/chrome/i.test(B),K=/firefox|mozilla/i.test(B)&&(!N||!/google/i.test(N)),X=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(B)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(B.substr(0,4));void 0===H||0===H.length?"undefined"==typeof ActiveXObject||new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):H["Shockwave Flash"],function(){if(!Q)return!1;var e=W.match(/Chrome\/(\d+)\.(\d+)/i);e&&e.length&&e.length>2&&parseFloat(e[1]+"."+e[2])}(),function(){if(!Y)return!1;if("string"!=typeof W)return!1;var e=W.match(/OS (\d+)_(\d+)_?(\d+)?/);e&&e.length&&e.length>2&&parseFloat(e[1]+"."+e[2])}();k.document&&k.document.addEventListener("touchstart",(function(){!0})),k.document&&k.document.addEventListener("touchend",();var Z;function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re,ie="DOM",oe=(null==L||null===(Z=L.getChildWriter)||void 0===Z||Z.call(L,ie),,ne=ae=se=de=le=ce=function(e,t){void 0===t&&(t={});var r,i,o=ee(ee({},{iframeLoadedTimeout:50,maxAttempt:10,manualCheck:!1,onloadCheck:!0}),t),n=o.iframeLoadedTimeout,a=o.maxAttempt,s=o.onload,d=o.onerror,l=o.manualCheck,c=o.onloadCheck,u=a;if(s){if(ue(e))return s(),null;q&&(l=!0,c=!1),l&&(r=setInterval((,n)),c&&(i=e.addEventListener("load",i))}return e.addEventListener("error",(function(t){if(clearInterval(r),K)s();else if(d&&d(new Error(".setIframeEventsHandlers() fail loading iframe")),!d)throw new Error(".setIframeEventsHandlers() fail loading iframe");i&&e.removeEventListener("load",i),clearInterval(r)})),r};ar ge="utils",pe=(null==L||null===(re=L.getChildWriter)||void 0===re||re.call(L,ge),;r ve=var me=Ae=e(s("intersections.trace"));var ye=);function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}var we="Managed",Ee=function(e){var t,r;function i(t){var r;void 0===t&&(t={});var i=Ae(s("managed.trace")),o=t&&t.ancestor&&""+t.ancestor||we,n=t&&(t.logger||t.moduleAPI&&t.moduleAPI.logger)||L;return i&&n.trace(o+".constrictor()"),(r=e.call(this)||this).logger=n,r.Managed=o,r.traceLogEnabled=i,r._vpaidEventListeners=[],r._domEventListeners=[],r._patchedMethods=[],r._domNodes=[],r._timeouts=[],r._destroyableObjects=[],r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Oe(t,r);var o=i.prototype;return o._addDOMNode=o._removeDOMNode=function(e){ne(e),this._domNodes=this._domNodes.filter(()},o._addDOMEventListener=o._removeDOMEventListener=function(e,t,r){this.traceLogEnabled&&this.logger.trace(this.Managed+".removeDOMEventListener("+t+")"),this._domEventListeners=this._domEventListeners.filter((function(i){return i.node!==e||i.name!==t||i.listener!==r||(e.removeEventListener(t,r),!1)}))},o._addVPAIDEventListener=function(e,t,r){var i;return(i=e)&&"function"!=typeof(null==i?void 0:i._subscribe)&&"function"!=typeof(null==i?void 0:i._subscribeOnce)&&(i._subscribe=i.subscribe,i._subscribeOnce=i.subscribeOnce),this.traceLogEnabled&&this.logger.trace(this.Managed+".addVPAIDEventListener("+t+")"),this._vpaidEventListeners.push({vpaid:e,name:t,listener:r}),e._subscribe(r,t),r},o._removeVPAIDEventListener=o._patchMethod=o._restoreMethod=o._removeEventListeners=o._destroy=function(){var e=this;this.traceLogEnabled&&this.logger.trace(this.Managed+"._destroy()");var t=this._patchedMethods,r=this._domNodes,i=this._timeouts,o=this._destroyableObjects;if(this._removeEventListeners(),t.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Restoring patched methods ("+t.length+")"),t.forEach(()),r.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing DOM elements ("+r.length+")"),r.forEach((function(t){var r=t||{},i=r.node,o=r.removeDelay;o>0?(e.traceLogEnabled&&e.logger.trace(e.Managed+".destroy() Removing DOM element {"+i+") after "+o+" ms"),setTimeout((function(){e.traceLogEnabled&&e.logger.trace(e.Managed+".destroy() timeout "+o+" ms is finished. Removing DOM element {"+i+")"),ne(i)}),o)):ne(i)}))),i.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing timeouts ("+i.length+")"),i.forEach(()),o.length){var n=this._delayRemovingControls;this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing destroyableObjects ("+o.length+")"),o.forEach(()}},o._addTimeout=o._removeTimeout=o._addDestroyableObject=o._removeDestroyableObject=i}(ye),_e="__overwrite_type";"undefined"!=typeof exports&&(exports.OVERWRITE_FLAG=_e);var Pe="__important";"undefined"!=typeof exports&&(exports.IMPORTANT_FLAG=Pe);var Se="__value";"undefined"!=typeof exports&&(exports.VALUE_FLAG=Se);var je="__primitive";"undefined"!=typeof exports&&(exports.PRIMITIVE_FLAG=je);var Ie=Ce="__remove";"undefined"!=typeof exports&&(exports.REMOVE_FLAG=Ce);var Ve="undefined"!=typeof exports&&(exports.extend=function e(t){if(void 0===t&&(t={}),t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];i.forEach((function(r){void 0===r&&(r={});var i=!Ve(t)||Ve(r),o=Ie(r);o&&i?t=r:Array.isArray(t)&&Array.isArray(r)?t=Array.from(new Set(t.concat(r))):Object.keys(r).forEach((function(n){var a=r[n];if(void 0!==a&&a!==_e)if(!a||"object"!=typeof a||me(a)||oe(a))n!==_e&&i&&(t[n]=a);else{var s=Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=Array.isArray(a)?[]:{}),d=typeof s;t[n]="string"===d||"number"===d||(!Ve(s)||Ve(a))&&(o||Ie(a))?a:e(s,a)}}))}))}return t});var Re;function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}"undefined"!=typeof exports&&(exports.finalize=function e(t,r,i){return void 0===r&&(r={}),window.WeakSet&&!i&&(i=new WeakSet),Array.isArray(t)?t.map(():t&&"object"==typeof t?!0===t.__remove?null:!0===t.__primitive?t.__value:(Object.keys(t).forEach((function(o){var n=t[o],a=null!=n&&!0===n.__primitive;if(n&&!0===n.__remove)delete r[o];else if(a&&null!=n.__value)r[o]=n.__value;else if(void 0!==n){var s,d;if(!n||Array.isArray(n)||"object"!=typeof n||me(n)||oe(n)||window.WeakSet&&!1!==(null===(s=i)||void 0===s||null===(d=s.has)||void 0===d?void 0:d.call(s,n)))r[o]=n;else{var l,c;null===(l=i)||void 0===l||null===(c=l.add)||void 0===c||c.call(l,n);var u=Object.prototype.hasOwnProperty.call(r,o)&&r[o]||(r[o]={});e(n,u,i)}}})),r&&r.__primitive?r.__value:r):t});var ke="parse",xe=(null==L||null===(Re=L.getChildWriter)||void 0===Re||Re.call(L,ke),,Me=Ne=function(e,t){if(void 0===t&&(t={}),!e)return null;var r=Te({optionName:"option",onlyTopLevel:!1},t),i=r.optionName,o=r.onlyTopLevel,n=e&&(Me(e,"important")||e.getAttribute("important")),a=e.querySelector(i+"s"),s=a&&(Me(a,"important")||a.getAttribute("important")),d=a&&a.getAttribute("overwrite"),l=e.querySelectorAll(i+"s > "+i);if(!l||!l.length)return null;if(o)return Array.from(l);var c=Array.from(l).reduce((function(e,t){var r,i=t.getAttribute("name"),o=t.getAttribute("important"),a=e[i]=((r={}).__value=xe(t),r.__primitive=!0,r);return He(t,a),null!=o?a.__important=Ae(o):null!=s?a.__important=Ae(s):null!=n&&(a.__important=Ae(n)),e}),{});return d&&(c[_e]=d),s?c.__important=Ae(s):n&&(c.__important=Ae(n)),c};"undefined"!=typeof exports&&(exports.parseXmlOptions=Ne);function He(e,t){void 0===t&&(t={});var r=Me(e,"global")||Ae(e.getAttribute("global"));r&&(t.global=r);var i=Me(e,"important")||Ae(e.getAttribute("important"));i&&(t.__important=i);var o=Me(e,"overwrite")||e.getAttribute("overwrite");null!=o&&(t[_e]=o);var n=Me(e,"remove")||Ae(e.getAttribute("remove"));return n&&(t.__remove=n),t}function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}var Ue="Vpaid",Ge=function(e){var t,r;function i(t){var r;void 0===t&&(t={});var i=t&&t.ancestor&&""+t.ancestor||"Module::Vpaid",o=t&&(t.logger||t.moduleAPI&&t.moduleAPI.logger)||L;return o.trace(i+".constructor() options.ancestor="+i),(r=e.call(this,Fe(Fe({},t),{},{ancestor:i,logger:o}))||this).Vpaid=i,r.options=t,r.logger=o,r.adLinear=!0,r.adWidth=0,r.adHeight=0,r.adExpanded=!1,r.adSkippableState=!0,r.adRemainingTime=0,r.adDuration=0,r.adVolume=0,r.adCompanions="",r.adIcons=!1,r.tapholdTimer=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Be(t,r);var o=i.prototype;return o.getAdLinear=function(){return this.adLinear},o.getAdWidth=function(){return this.adWidth},o.getAdHeight=function(){return this.adHeight},o.getAdAspectRatio=o.getAdExpanded=function(){return this.adExpanded},o.getAdSkippableState=function(){return this.adSkippableState},o.getAdRemainingTime=function(){return this.adRemainingTime},o.getAdDuration=function(){return this.adDuration},o.getAdElapsedTime=o.getAdVolume=function(){return this.adVolume},o.getAdCompanions=function(){return this.adCompanions},o.getAdIcons=function(){return this.adIcons},o.handshakeVersion=o.initAd=o.resizeAd=o.startAd=function(){this.trigger("AdStarted")},o.stopAd=function(){this.trigger("AdStopped")},o.pauseAd=function(){this.trigger("AdPaused")},o.resumeAd=o.expandAd=function(){this.setAdExpanded(!0)},o.collapseAd=o.skipAd=o.setAdExpanded=o.setAdSkippableState=o.setAdVolume=o._destroy=i.create=o.getMediaInfo=o.getDebugInfo=o.getAdIframes=function(){return Promise.resolve(null)},o.toString=i}(Ee);function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe,Ke="::ManualCountdownBase",Xe={increasePieceOfTime:250},Ze=function(){function e(e){var t;void 0===e&&(e={}),this.options=Ye(Ye({},Xe),e);var r=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||L;this.logger=(null==r||null===(t=r.getChildWriter)||void 0===t?void 0:t.call(r,Ke))||r;var i=e,o=i.duration,n=i.VPAID_API,a=i.tickHandler;this.logger.log("::ManualCountdownBase duration="+o),this._trigger=n&&n.trigger,this._duration=o,this._timeoutId=null,this._elapsedTime=0,this._tickHandler=a}var t=e.prototype;return t.getAdRemainingTime=t.getAdElapsedTime=function(){return this._elapsedTime||0},t.getAdDuration=t.start=t.stop=t._destroy=e}();unction et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}var ot="::ManualCountdown",nt=(null==L||null===(Qe=L.getChildWriter)||void 0===Qe?void 0:Qe.call(L,ot))||L,at={increasePieceOfTime:1e3},st=Ze);unction lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(e,t){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gt(e,t)}var pt="VpaidProvider",ht={explicitAdLoaded:!1,explicitAdStarted:!1,explicitAdImpression:!1,explicitAdVideoStart:!1},ft=function(e){var t,r;function i(t){var r,i,o;void 0===t&&(t={});var n=(t||{}).logLevel,a=void 0!==n?n:T,s=t&&t.ancestor&&t.ancestor+":"+pt||"VpaidProvider",d=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||L;d=(null===(r=d)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,pt))||d,(o=e.call(this,ct(ct(ct({},ht),t),{},{ancestor:s,logger:d}))||this).logger.log(".constructor()",2),o.logLevel=a,o.iFrame=null,o.visibilityHandlerWithEl=null,o.explicitAdLoaded=!1,o.explicitAdStarted=!1,o.explicitAdImpression=!1,o.explicitAdVideoStart=!1;var l=o.options.media;return l&&(o.media=l),window.vn_module_id=s,o}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,gt(t,r);var o=i.prototype;return o.initAd=function(t,r,i,o,n,a){var s=this;return e.prototype.initAd.call(this,t,r,i,o,n,a).then((function(){return new Promise((function(e,t){var r=s.AdParameters=s.prepareAdParameters(n&&n.AdParameters||{});s.validateAdParams.call(s,r||{})||t(new Error("VpaidProvider invalid parameters"));var i=ct(ct({},s.options),r),o=i.explicitAdLoaded,d=i.explicitAdStarted,l=i.explicitAdImpression,c=i.explicitAdVideoStart,u=i.duration,g=i.countDownDisabled;s.explicitAdLoaded=Ae(o),s.explicitAdImpression=Ae(l),s.explicitAdVideoStart=Ae(c),s.explicitAdStarted=Ae(d),s.changeEventsInfo=s.setEventsForChange(r);var p=a.slot,h=a.parentSlot;a.videoSlot&&s.trigger("vn_VideoSlotRemoved"),s.playerEl=h.parentNode,s.iFrame=s.addIFrame(p,r,(),s.logger.trace(".constructor() countDownDisabled="+g+" duration="+u),Ae(g)||(s.logger.trace(".constructor() Switched to manual countdown"),s._countdown=new st({duration:u>0?parseFloat(u):1/0,VPAID_API:{trigger:s.trigger.bind(s)},logger:s.logger})),e(s)}))}))},o.setEventsForChange=o.getCommunicationInputIframeWindow=o.getCommunicationOutputIframe=o.prepareAdParameters=o.showPlayer=function(e){var t=this.playerEl;t&&ae(t,{maxHeight:e?"100%":0})},o.postMessageHandler=function(e){var t=e.data;this.logger.none("VpaidProvider postMessageHandler() "+t,2,"green");var r=(t&&t.split&&t.split(":")||[])[0],i=this._countdown;i&&r&&~["AdVideoComplete","AdStopped"].indexOf(r)&&(this.logger.trace(".postMessageHandler() got event "+r+". destroying ManualCountdown"),i._destroy())},o.postMessage=function(e,t){void 0===t&&(t="*");var r=(this.getCommunicationOutputIframe()||{}).contentWindow;r&&r.postMessage(e,t)},o.validateAdParams=function(){this.trigger("AdError","Abstract method validateAdParams call",D.GENERAL_VPAID_ERROR)},o._destroy=o.getModuleOptions=function(){return Promise.resolve({destroyControls:["spinner"]})},o.addIFrame=function(e,t,r){var i=this,o=vt.call(this,e);return setTimeout((function(){return i.initIframe(o,r)})),this.iframe=this._addDOMNode(o)},o.initIframe=function(e){return e},o.getAdIframes=function(){return Promise.resolve([this.iframe])},o._addMessageListener=function(){var e=this.explicitAdLoaded,t=this.getCommunicationInputIframeWindow();t.addEventListener?t.addEventListener("message",this.postMessageHandler.bind(this),!1):t.attachEvent&&t.attachEvent("message",this.postMessageHandler.bind(this)),e||this.trigger("AdLoaded")},o.startAd=function(t){var r=this;this.logger.log(".startAd()",2,"blue");var i=t||{},o=i.adVideoStartParams,n=i.adImpressionParams,a=this._countdown,s=this.explicitAdImpression,d=this.explicitAdVideoStart,l=this.explicitAdStarted;a&&a.start(),this.trigger("AdDurationChange"),l||e.prototype.startAd.call(this),d||s?d&&!s&&this._addVPAIDEventListener(this,"AdStarted",(function(){return r.trigger("AdImpression",n)})):this.trigger("AdImpression",n),d||l?d&&!l&&this._addVPAIDEventListener(this,"AdStarted",():this.trigger("AdVideoStart",o)},o.stopAd=function(){this.logger.trace(".stopAd()");var t=this._countdown;return t&&t.stop(),e.prototype.stopAd.call(this)},o.pauseAd=function(){this.logger.trace(".pauseAd()");var t=this._countdown;return t&&t.stop(),e.prototype.pauseAd.call(this)},o.resumeAd=function(){this.logger.trace(".resumeAd()");var t=this._countdown;return t&&t.start(),e.prototype.resumeAd.call(this)},o.skipAd=o.getAdDuration=function(){var t=this._countdown;return t?t.getAdDuration():e.prototype.getAdDuration.call(this)},o.getAdRemainingTime=function(){var t=this._countdown;return t?t.getAdRemainingTime():e.prototype.getAdRemainingTime.call(this)},o.getAdElapsedTime=function(){var t=this._countdown;return t?t.getAdElapsedTime():e.prototype.getAdElapsedTime.call(this)},o.messageAction=function(e,t){var r=this;t||(t=;var i=e.event,o=e.args;if(i){var n=this.changeEventsInfo[i];if(!n)return this.logger.trace("VpaidProvider postMessageHandler() ["+i+"] "+(o&&o.length||""),2),t(i,o),void("NoAd"===i&&t("AdError","No ad"));n.length?n.forEach((function(e){var o=e.event,n=e.args;setTimeout((function(){r.logger.log("VpaidProvider messageAction event "+i+" changed to ["+o+"] "+(n&&n.length||""),1),t(o,n)}))})):this.logger.trace("VpaidProvider postMessageHandler() ["+i+"] "+(o&&o.length||"")+" was ignored",2)}},i}(Ge);function vt(e){var t,r,i=de(e,"iframe",{position:"relative",width:"100%",height:"100%",border:"none",overflow:"hidden",zIndex:2,padding:0,margin:0});return r={scrolling:"no",frameborder:0,allowfullscreen:"",mozallowfullscreen:"",webkitallowfullscreen:"",allow:Q?"autoplay":""},(t=i)&&"object"==typeof r&&Object.keys(r).forEach((),i}function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yt(e,t){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yt(e,t)}var Ot=function(e){var t,r;function i(t){return void 0===t&&(t={}),e.call(this,At(At({},t),{},{ancestor:"ExternalSrcVpaidProvider"}))||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,yt(t,r);var o=i.prototype;return o.initAd=function(t,r,i,o,n,a){var s=a.iframe;return this.communicationIframe=s&&s.contentWindow&&s.contentWindow.document.querySelector("iframe")||s,e.prototype.initAd.call(this,t,r,i,o,n,a)},o.getCommunicationInputIframeWindow=o.getModuleOptions=o.initIframe=function(e,t){var r,i=this.AdParameters;t&&(r=e.addEventListener("load",());var o=""+i.url,n=Object.keys(i).filter(().map(().join("&");n.length&&(o+=~o.indexOf("?")?"&":"?",o+=n),e.src=o},i}(ft);function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){_t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pt(e,t)}var St={explicitAdStarted:!0,explicitAdImpression:!0,explicitAdVideoStart:!0},jt=function(e){var t,r;function i(t){var r;return void 0===t&&(t={}),(r=e.call(this,Et(Et(Et({},St),t),{},{ancestor:"::VpaidIvi"}))||this).logger.trace(".constructor()"),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Pt(t,r);var o=i.prototype;return o.postMessageHandler=function(e){var t=e.data;switch(this.logger.none(".postMessageHandler() "+(t&&t.message)),t.message){case"ivi-playerLoad":this.trigger("AdLoaded");break;case"ivi-advStarted":this.trigger("AdImpression"),this.trigger("AdStarted"),this.trigger("AdVideoStart"),this.showPlayer(!0);break;case"ivi-advShowed":this.trigger("AdVideoComplete");break;case"ivi-noAdv":this.trigger("AdError","There is no Ad",D.GENERAL_VPAID_ERROR)}},o.validateAdParams=function(e){var t=e.url,r=e.videoid,i=e.subsite;return t&&/ivi\.ru\/embeds/gi.test(t)?r&&Number.isInteger(r)?!(!i||!Number.isInteger(i))||(this.trigger("AdError",'Parameter "subsite" is wrong or unavailable',D.GENERAL_VPAID_ERROR),!1):(this.trigger("AdError",'Parameter "videoid" is wrong or unavailable',D.GENERAL_VPAID_ERROR),!1):(this.trigger("AdError","URL is not ivi.ru",D.GENERAL_VPAID_ERROR),!1)},o.pauseAd=function(){e.prototype.pauseAd.call(this),It.call(this,!1)},o.resumeAd=function(){e.prototype.resumeAd.call(this),It.call(this,!0)},o.getModuleOptions=function(){return e.prototype.getModuleOptions.call(this)},i}(Ot);function It(e){this.postMessage({type:"player",message:"controlAd",params:{status:e}})}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){Rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e,t){return Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lt(e,t)}var Tt="::VpaidSJ",Dt={skipAdTimeout:5e3,explicitAdStarted:!0,explicitAdImpression:!0,explicitAdVideoStart:!0},kt=function(e){var t,r;function i(t){var r;return void 0===t&&(t={}),(r=e.call(this,Vt(Vt(Vt({},Dt),t),{},{ancestor:Tt}))||this).logger.trace(".constructor()"),r.pauseBeforeStartHasTriggered=!0,r.pauseBeforeSkipHasTriggered=!1,r.impressionHasTriggered=!1,r.startHasTriggered=!1,r.hasAdvHasTriggered=!1,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Lt(t,r);var o=i.prototype;return o.postMessageHandler=function(t){var r=t.data;switch(this.logger.none(".postMessageHandler() "+r),e.prototype.postMessageHandler.call(this,{data:r}),r){case"sj_adpaused":this.logger.trace(".postMessageHandler() SJ_AD_PAUSED this.pauseBeforeStartHasTriggered="+this.pauseBeforeStartHasTriggered),this.pauseBeforeSkipHasTriggered&&Mt.call(this);break;case"sj_has_ads":this.logger.trace(".postMessageHandler() SJ_HAS_ADS this.hasAdvHasTriggered="+this.hasAdvHasTriggered),this.hasAdvHasTriggered||(this.trigger("AdLoaded"),this.hasAdvHasTriggered=!0);break;case"sj_impression":this.logger.trace(".postMessageHandler() SJ_AD_IMPRESSION this.impressionHasTriggered="+this.impressionHasTriggered),this.impressionHasTriggered||(this.trigger("AdImpression"),this.impressionHasTriggered=!0);break;case"sj_adStarted":this.logger.trace(".postMessageHandler() SJ_AD_STARTED"),this.startHasTriggered||(this.pauseBeforeStartHasTriggered=!1,this.startHasTriggered=!0,this.trigger("AdStarted"),this.trigger("AdVideoStart"),this.showPlayer(!0));break;case"sj_adview25":this.logger.trace(".postMessageHandler() SJ_AD_FIRST_Q"),this.adVideoFirstQuartileHasTriggered||(this.adVideoFirstQuartileHasTriggered=!0,this.trigger("AdVideoFirstQuartile"));break;case"sj_adview50":this.logger.trace(".postMessageHandler() SJ_AD_MIDPOINT"),this.adVideoMidpointHasTriggered||(this.adVideoMidpointHasTriggered=!0,this.trigger("AdVideoMidpoint"));break;case"sj_adview75":this.logger.trace(".postMessageHandler() SJ_AD_THIRD_Q"),this.adVideoThirdQuartileHasTriggered||(this.adVideoThirdQuartileHasTriggered=!0,this.trigger("AdVideoThirdQuartile"));break;case"sj_adview100":this.logger.trace(".postMessageHandler() SJ_AD_COMPLETE"),this.adVideoCompleteTrackOnlyHasTriggered||(this.adVideoCompleteTrackOnlyHasTriggered=!0,this.trigger("AdVideoCompleteTrackOnly"));break;case"sj_skipped":this.logger.trace(".postMessageHandler() SJ_AD_SKIPPED"),this.adVideoCompleteTrackOnlyHasTriggered||this.trigger("AdSkipped");break;case"sj_ads_finished":Nt.call(this);break;case"sj_adclicked":default:break;case"sj_no_ads":this.trigger("AdError","There is no Ad",D.GENERAL_VPAID_ERROR);break;case"sj_player_error":this.trigger("AdError","Player error",D.GENERAL_VPAID_ERROR)}},o.prepareAdParameters=function(t){var r=e.prototype.prepareAdParameters.call(this,t);return r.sjuid7=!0,r.autoplay=!1,r},o.validateAdParams=function(e){var t=e.url,r=e.sjuid5;return t&&/showjet\.(ru|net)\/promolanding/gi.test(t)?!(!r||!Number.isInteger(r))||(this.trigger("AdError",'Parameter "sjuid5" is wrong or unavailable',D.GENERAL_VPAID_ERROR),!1):(this.trigger("AdError","URL is not showjet.net or showjet.ru",D.GENERAL_VPAID_ERROR),!1)},o.pauseAd=function(){e.prototype.pauseAd.call(this),xt.call(this,!1)},o.resumeAd=function(){e.prototype.resumeAd.call(this),xt.call(this,!0)},o.getModuleOptions=o.skipAd=function(){this.logger.trace(".skipAd()"),xt.call(this,!1),this.pauseBeforeSkipHasTriggered=!0},o.stopAd=function(){var t=this;this._addTimeout("SJStopAd",(,500)},o.startAd=function(){this.logger.trace("::VpaidSJ.startAd() this.pauseBeforeStartHasTriggered="+this.pauseBeforeStartHasTriggered),e.prototype.startAd.call(this),this.pauseBeforeStartHasTriggered&&(this.pauseBeforeStartHasTriggered=!1,this.logger.trace(".startAd() -> _playPauseAd(true)"),xt.call(this,!0))},i}(Ot);function xt(e){var t=e?"sj_adresume":"sj_adpause";this.logger.trace(".SJPlayer event ["+t+"] was sent"),this.postMessage(t)}function Mt(){this.logger.trace('.SJPlayer event "sj_close" was sent'),this.postMessage("sj_close"),this.trigger("AdSkipped")}function Nt(){this.logger.trace("@SJAdsFinished"),this.pauseAd(),this.trigger("AdVideoComplete")}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Ft(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e,t){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zt(e,t)}var Bt,Ut="::VpaidIframe",Gt=["AdVideoComplete","AdVideoCompleteTrackOnly","NoAd","AdError","AdStarted","AdStopped","AdLoaded","AdSkipped","AdError","AdUserClose","AdPaused","AdResumed","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdImpression","AdVideoThirdQuartile","AdSizeChange","AdClickThru","AdAudioOnlyStart","AdReadyToShow"],Jt=function(e){var t,r;function i(t){var r;return void 0===t&&(t={}),(r=e.call(this,Wt(Wt({},t),{},{ancestor:Ut}))||this).logger.trace(".constructor()"),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,zt(t,r);var o=i.prototype;return o.initAd=function(t,r,i,o,n,a){var s=a.videoSlot;return s&&ae(s,{display:"none"}),e.prototype.initAd.call(this,t,r,i,o,n,a)},o.setEventsForReplace=function(t){var r=e.prototype.setEventsForReplace.call(this,t)||{},i="NoAd";return i in r||(r[i]=[{event:"AdError"}]),r},o.postMessageHandler=function(t){var r=t.data;this.logger.none("::VpaidIframe postMessageHandler() "+r,2,"green"),e.prototype.postMessageHandler.call(this,{data:r});var i=r&&r.split&&r.split(":")||[],o=i[0],n=i.slice(1);~Gt.indexOf(o)&&this.messageAction({event:o,args:n})},o.validateAdParams=function(){return!0},o.resizeAd=function(t,r,i){void 0===i&&(i=this.viewMode),e.prototype.resizeAd.call(this,t,r,i)},i}(Ot);function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){Qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e,t){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kt(e,t)}var Xt,Zt="SoftIframeVpaidProvider",$t=(null==L||null===(Bt=L.getChildWriter)||void 0===Bt?void 0:Bt.call(L,Zt))||L,er=["AdVideoComplete","AdVideoCompleteTrackOnly","AdError","AdStarted","AdStopped","AdLoaded","AdSkipped","AdError","AdUserClose","AdPaused","AdResumed","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdImpression","AdVideoThirdQuartile","AdSizeChange","AdClickThru","vn_hideOverlayFormatWrapper","vn_setOverlayZIndex","vn_SelectedCreative"],tr={},rr=function(e){var t,r;function i(t){void 0===t&&(t={});var r=t&&t.ancestor&&t.ancestor+":"+Zt||"SoftIframeVpaidProvider";return $t.trace("SoftIframeVpaidProvider.constructor()"),e.call(this,qt(qt(qt({},tr),t),{},{ancestor:r}))||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Kt(t,r);var o=i.prototype;return o.postMessageHandler=function(t){var r=t.data;e.prototype.postMessageHandler.call(this,{data:r}),this.logger.none("SoftIframeVpaidProvider postMessageHandler() "+r,2,"green");var i=r&&r.split&&r.split(":")||[],o=i[0],n=i.slice(1);this.canEventAction(o)&&this.messageAction({event:o,args:n})},o.canEventAction=function(e){return!(!e||!er.includes(e)||"AdStarted"===e&&!this.explicitAdStarted||"AdVideoStart"===e&&!this.explicitAdVideoStart||"AdLoaded"===e&&!this.explicitAdLoaded||"AdImpression"===e&&!this.explicitAdImpression)},o.initIframe=o.validateAdParams=o.onLoadedVideoData=function(){var e=this.iFrame.contentDocument.documentElement||{},t=e.offsetWidth,r=e.offsetHeight;t&&r&&(this.adHeight=r,this.logger.trace("SoftIframeVpaidProvider iframe size: width: "+t+", height: "+r+"}}"),this.triggersEventsOnLoadVideoData())},o.triggersEventsOnLoadVideoData=o.getModuleOptions=function(){return Promise.resolve({format:{forceEnableVerticalContent:!0},destroyControls:["spinner","volume","play"],controlsActions:[{name:"container",action:function(e){return e&&ae(e,{backgroundColor:"transparent"})}}]})},i}(ft);function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e,t){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ar(e,t)}var sr,dr="::VpaidHtml",lr=(null==L||null===(Xt=L.getChildWriter)||void 0===Xt?void 0:Xt.call(L,dr))||L,cr={viewableImpressionWaitingInterval:1e3,forceTrackClick:!1},ur=function(e){var t,r;function i(t){var r;return void 0===t&&(t={}),lr.trace("::VpaidHtml.constructor()"),(r=e.call(this,or(or(or({},cr),t),{},{ancestor:dr}))||this).viewableImpressionWaitingInterval=r.options.viewableImpressionWaitingInterval,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,ar(t,r);var o=i.prototype;return o.initAd=function(t,r,i,o,n,a){var s=a.videoSlot;return s&&ae(s,{display:"none"}),e.prototype.initAd.call(this,t,r,i,o,n,a)},o.initIframe=function(t,r){var i=this,o=this.AdParameters,n=o.html,a=o.forceTrackClick,s=n;try{s=decodeURIComponent(n)}catch(e){s=n}gr.call(this,s,t,(function(){var o,n,s,d;(e.prototype.initIframe.call(i,t),i.onLoadedVideoData(),a)&&(null==t||null===(o=t.contentWindow)||void 0===o||null===(n=o.document)||void 0===n||null===(s=n.body)||void 0===s||null===(d=s.addEventListener)||void 0===d||d.call(s,"click",(,{capture:!0}));r&&r()}))},o.prepareAdParameters=function(e){var t=e;try{var r,i,o,n=null==this||null===(r=this.options)||void 0===r||null===(i=r.moduleAPI)||void 0===i||null===(o=i.getControlUnionData)||void 0===o?void 0:o.call(i,"vnAdParametersReplace","mode");if("deprecated"===n)t=e.replace(/"(html)":\s*("(.*?\n)+.*?")(?=[,\n$])/gm,(function(e,t,r){return e&&e.length?'"'+t+'": '+r.replace(/([^,])(?=\n)\s+/g,"$1\\n"):""}));else if("replace"===n){var a=new RegExp('(?:"\\w*":\\s*)"(.*?)(?<!\\\\)"',"gs");t=e.replace(a,(function(e){return e&&e.length?e.replace(/(?:\r\n|\r|\n)/g,"\\n"):""}))}else t=e;return JSON.parse(t)}catch(t){lr.warn("::VpaidHtml.prepareAdParameters() JSON.parse(AdParameters) throws exception: "+t.message);try{lr.warn("::VpaidHtml.prepareAdParameters() trying parse with vnAdParametersReplace:replace mode");var s=new RegExp('(?:"\\w*":\\s*)"(.*?)(?<!\\\\)"',"gs"),d=e.replace(s,();return JSON.parse(d)}catch(t){return lr.error("::VpaidHtml.prepareAdParameters() JSON.parse(AdParameters) with vnAdParametersReplace:replace mode replaces throws exception: "+t.message),JSON.parse(e)}}},o.validateAdParams=function(e){var t=e.html;return!(!t||!t.length)||(this.trigger("AdError","html param not found",D.GENERAL_VPAID_ERROR),!1)},i}(rr);function gr(e,t,r){if(void 0===t.srcdoc){var i=(new DOMParser).parseFromString(e,"text/html");if(i&&t){var o=t.contentDocument;o.head.innerHTML=i.head.innerHTML,o.body.innerHTML=i.body.innerHTML,o.body.className=i.body.className,r&&setTimeout(r,0),ae(t.contentWindow.document.body,{margin:0}),function(e,t,r){void 0===e&&(e=window);void 0===t&&(t=!0);void 0===r&&(r=1);new Promise((function(i){var o=e.document,n=o.documentElement.querySelectorAll("script"),a=[];n&&n.length&&Array.from(n).forEach((function(e){var r=e.parentNode,i=o.createElement("script");e.attributes&&Array.from(e.attributes).forEach((),e.src&&a.push((function(){var t,o,n;t=r,o=i,n=e.src,o.src=n,t.appendChild(o)})),e.innerHTML&&t&&a.push((function(){var t,o,n;t=r,o=i,n=e.innerHTML,o.innerHTML=n,t.appendChild(o)})),r.removeChild(e)})),a.length?setTimeout((,r):i()}))}(t.contentWindow)}}else r&&(n=t.addEventListener("load",(function(){t.removeEventListener("load",n),ae(t.contentWindow.document.body,{margin:0}),r()}))),t.srcdoc=e;var n}function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(r),!0).forEach((function(t){fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}unction mr(e,t){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mr(e,t)}var Ar,br="VpaidAdfox",yr=(null==L||null===(sr=L.getChildWriter)||void 0===sr?void 0:sr.call(L,br))||L,Or={loaderUrl:"https://yandex.ru/ads/system/context.js",explicitAdLoaded:!0,startAdTimeout:5e3,stopAdTimeout:3e3},wr="vn_SelectedCreative",Er=function(e){var t,r;function i(t){var r,i;void 0===t&&(t={}),yr.trace("VpaidAdfox.constructor()");var o=t&&t.ancestor&&t.ancestor+":"+br||"VpaidAdfox";return(i=e.call(this,hr(hr(hr({},Or),t),{},{ancestor:o}))||this)._revertTransformStyle=function(){var e;i._isOriginalTransformCanBreakLayout&&(null===(e=getComputedStyle(document.body))||void 0===e?void 0:e.transform)!==i._originalTransform&&(i._isOriginalTransformFromAttribute?(i.logger.trace("._revertTransformStyle() setting body transform style attribute back to "+i._originalTransform),document.body.style.transform=i._originalTransform):(i.logger.trace("._revertTransformStyle() clearing body transform style attribute"),document.body.style.transform=""))},i._originalStartAd=e.prototype.startAd,i._originalWindowOpen=[],i._originalCallClick=[],i._clickedByElement=!1,i._windowOpened=!1,i._callClickWasInvoked=!1,i._originalTransform=null===(r=getComputedStyle(document.body))||void 0===r?void 0:r.transform,i._isOriginalTransformFromAttribute=""!==document.body.style.transform,i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,mr(t,r);var o,n,a,s=i.prototype;return s.initAd=function(t,r,i,o,n,a){var s=this;return e.prototype.initAd.call(this,t,r,i,o,n,a).then((function(){var e=(s.AdParameters||{}).loader,t=(a||{}).shouldCreateIframe;return s.shouldCreateIframe=t,e&&(s.options.loaderUrl=e,s.logger.log('.initAd() loaderUrl get from AdParameters "'+e+'"')),s}))},s.addIFrame=function(e,t,r){var i=null;return this.slot=e,this.initIframe(i,r),i},s.initIframe=function(e,t){!e||e.contentWindow?_r.call(this,e,t):ce(e,{adLoaded:_r.bind(this,e,t)})},s.validateAdParams=function(e){return void 0!==((e||{}).params||{}).ownerId||(this.wasAdError=!0,this.trigger("AdError","ownerId param not found",D.GENERAL_VPAID_ERROR),!1)},s.getCommunicationInputIframeWindow=function(){var e=this.iFrame;return e&&e.contentWindow||window},s.startAd=s.getModuleOptions=function(){var t=this.options,r=t.stopAdTimeout,i=t.startAdTimeout;return e.prototype.getModuleOptions.call(this).then((function(e){return delete e.format,e.startAdTimeout=i,e.stopAdTimeout=1.5*r,e}))},s._destroy=function(){this.logger.trace("._destroy()");var t=this._originalWindowOpen,r=this._originalCallClick,i=this.adfoxIframeObserver;t.forEach((function(e){var t=e.win,r=e.open;t&&r&&(t.open=r)})),r.forEach((),i&&i.disconnect&&i.disconnect(),this._revertTransformStyle(),e.prototype._destroy.call(this)},s.stopAd=function(){var e=this,t=this._countdown,r=this.options.stopAdTimeout;this._revertTransformStyle(),this.logger.trace(".stopAd() AdStopped triggers delayed for "+r+" ms"),t&&t.stop(),setTimeout((function(){e.logger.log(".stopAd() triggered AdStopped after "+r+" ms"),e.trigger("AdStopped")}),r)},o=i,(n=[{key:"_isOriginalTransformCanBreakLayout",get:function(){return!["none",void 0,null,""].includes(this._originalTransform)}}])&&vr(o.prototype,n),a&&vr(o,a),Object.defineProperty(o,"prototype",{writable:!1}),i}(rr);function _r(e,t){var r=this;this.iFrame=e;var i=this.options.loaderUrl,o=this.slot,n=this.getCommunicationInputIframeWindow(),a=n&&n.document;n.yaContextCb=n.yaContextCb||[];var s=a.createElement("script");s.setAttribute("crossorigin","anonymous"),s.addEventListener("load",(function(){r.logger.log("VpaidAdfox onIframeLoaded() @load script('"+i+"') was successfully loaded"),r.trigger("AdLoaded",{selectedCreativeEventName:wr}),t&&t()})),s.addEventListener("error",(function(e){r.wasAdError=!0,r.trigger("AdError","VpaidAdfox "+e.message,D.GENERAL_VPAID_ERROR)})),n.addEventListener("error",(function(e){r.wasAdError=!0,r.trigger("AdError","VpaidAdfox "+e.message,D.GENERAL_VPAID_ERROR)})),(o||a&&a.head).appendChild(s),s.src=i,e&&ae(a.body,{margin:0,padding:0})}function Pr(){var e=this;this.logger.log("VpaidAdfox createBanner()");var t=this.AdParameters.params,r=this.slot,i=(t||{}).params;t.containerId||(t.containerId="adfox_vn_"+Math.random().toString().substring(3)),t.method||(t.method="create");var o=t.method,n=t.containerId,a=t.onlyNewBanners,s=this.getCommunicationInputIframeWindow(),d=de(r,"div",{display:"flex",alignItems:"center",justifyContent:"center",maxHeight:"100vh",height:"100%"});de(d,"div",{}).setAttribute("id",n);var l=function(e){try{if(e.top&&fe(e.top))return e.top}catch(e){return null}return null}(window),c=hr(hr({},l?{dl:l.document.location.href}:{}),i||{}),u=hr(hr({onStub:function(){e.logger.error(".onStub"),e.wasAdError=!0,Lr.call(e),e.trigger("AdError","VpaidAdfox @onStub")},onError:function(t){Lr.call(e);var r=JSON.stringify(t,null,"\t");e.wasAdError=!0,e.logger.error(".onError. "+r),e.trigger("AdError",r)},onRender:function(){e.logger.log(".onRender"),Sr.call(e)},onLoad:function(t){e.bannerLoaded=!0;var r,i=t||{},o=i.bundleName,n=i.bundleParams;try{r=JSON.stringify(n,null,"\t")}catch(e){}e.logger.trace(".onLoad bundleName="+o+" bundleParams="+r),e.trigger(wr)}},t),{},{params:c});this.logger.log(".createBanner() data:"+JSON.stringify(u,null,"\t")),s.yaContextCb.push((),this.shouldCreateIframe&&!Ae(a)&&(this.bannerAppearObserver=Rr.call(this,window))}function Sr(){var e=this;if(Lr.call(this),!this.bannerRendered){this.bannerRendered=!0,this.bannerLoaded||this.trigger(wr);var t=this.getCommunicationInputIframeWindow();this._originalStartAd(),t&&(this.logger.log(".onRender() set click handler on the iframe of the VN slot"),Cr.call(this,t),Vr.call(this,t),this._addDOMEventListener(t.document,"click",jr.bind(this),{capture:!0})),Tr.call(this,window,(,().then((function(o){e.logger.trace(".onRender() found iframe"),ce(o,{onload:function(){var t,r,i;e.logger.log(".onRender() iframe loaded");var n=o.contentDocument||window.document,a=o.contentWindow||window;(!o.contentWindow||null!=o&&null!==(t=o.contentWindow)&&void 0!==t&&null!==(r=t.document)&&void 0!==r&&null!==(i=r.body)&&void 0!==i&&i.childElementCount)&&(e.logger.log(".onRender() set click handler on the doc of the iframe of adfox banner"),Cr.call(e,a),Vr.call(e,a),e._addDOMEventListener(n,"click",jr.bind(e),{capture:!0}))}});var n=Array.from(document.body.children).filter(r);if(n.length>0){var a=n[0],s=getComputedStyle(a)||{},d=parseFloat(s.zIndex);e._isOriginalTransformCanBreakLayout&&(e.logger.trace("setting body transform style attribute to none"),document.body.style.transform="none"),e.logger.warn("banner has been included in the body element zIndex="+d),window===window.top&&(d?e.trigger("vn_setOverlayZIndex",{zIndex:d-1}):e.trigger("vn_hideOverlayFormatWrapper")),Ir.call(e,window)}else i.call(e,t)})).catch((function(){i.call(e,t)}))}function r(e){var t=getComputedStyle(e)||{},r=parseFloat(t.zIndex);return"fixed"===t.position&&(r>1e3||e.className.includes("full"))&&e}function i(e){var t=this,r=this.AdParameters.params.containerId,i=e.document.getElementById(r).querySelector("iframe");if(i&&i.contentDocument){var o=i.contentWindow;ce(i,{onload:)}}}function jr(e){var t=this._windowOpened,r=this._callClickWasInvoked,i=this.slot;if(!t&&!r){var o=(e||{}).target;if(o!==i){var n=o||{},a=n.id,s=n.className,d=n.href;if(!(a&&~a.toLocaleLowerCase().indexOf("close")||s&&s.toLowerCase&&~s.toLowerCase().indexOf("close"))){(d||o&&function(e){for(;e&&"BODY"!==e.tagName;e=e.parentElement)if("A"===e.tagName)return!0;return!1}(o))&&(this._clickedByElement=!0,this.logger.log(".onClick() from onClick url="+d),this.trigger("AdClickThru",d))}}}}function Ir(e){var t=this;if("undefined"!=typeof MutationObserver){var r=e.document.body.children&&e.document.body.querySelectorAll("div").length;this.logger.log(".startObservingIframe() elementsCount="+r,2,"brown");var i=new MutationObserver((function(o){o.forEach((function(){var o=e.document.body.children&&e.document.body.querySelectorAll("div").length;o<r&&(t.logger.log(".startObservingIframe() mutations elementCount="+o+" savedElementsCount="+r,2,"brown"),i.disconnect(),t.logger.trace("AdVideoComplete"),t.trigger("AdVideoComplete"))}))}));i.observe(e.document.body,{childList:!0,attributes:!1,characterData:!1,subtree:!1})}else yr.warn(" MutationObserver is not available")}function Cr(e){var t=this;if(e){var r=e.open;this._originalWindowOpen.push({win:e,open:r}),e.open=function(e){t._clickedByElement||t._callClickWasInvoked||(t._windowOpened=!0,t.logger.log(".onClick() from window.open url="+e),t.trigger("AdClickThru",e)),r(e)}}}function Vr(e){var t=this;if(e){var r=e.callClick;this._originalCallClick.push({win:e,callClick:r}),e.callClick=function(){t._clickedByElement||t._windowOpened||(t._callClickWasInvoked=!0,t.logger.log(".callClick()"),t.trigger("AdClickThru")),r()}}}function Rr(e){var t=this;if("undefined"==typeof MutationObserver)return yr.warn(" MutationObserver is not available"),null;var r=new MutationObserver((function(e){e.forEach((function(){document.querySelector("body > div  div > table")&&(t.logger.log(".onRenderByTimeout"),r.disconnect(),Sr.call(t))}))}));return r.observe(e.document.body,{childList:!0,attributes:!1,characterData:!1,subtree:!1}),r}unction Tr(e,t,r){var i=this;return new Promise((function(o,n){if(i.logger.log(".startChecksAdfoxBaseElementAppear()"),"undefined"==typeof MutationObserver)return yr.warn(" MutationObserver is not available"),void n();var a=e.document,s=t(a);s&&(i.logger.log(".startChecksAdfoxBaseElementAppear() was found immediately"),i.adfoxIframeObserver=null,o(s));var d=new MutationObserver((function(e){e.forEach((function(e){var t=e.addedNodes;Array.from(t).some((function(e){return!!r(e)&&(d.disconnect(),i.logger.log(".startChecksAdfoxBaseElementAppear() was found"),setTimeout((,1),!0)}))}))}));d.observe(a.body,{childList:!0,attributes:!1,characterData:!1,subtree:!1}),i.adfoxIframeObserver=d}))}function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mr(e,t){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mr(e,t)}var Nr,Hr="::VpaidExternalJs",Wr=(null==L||null===(Ar=L.getChildWriter)||void 0===Ar?void 0:Ar.call(L,Hr))||L,Fr={},zr=function(e){var t,r;function i(t){return void 0===t&&(t={}),Wr.trace("::VpaidExternalJs.constructor()"),e.call(this,kr(kr(kr({},Fr),t),{},{ancestor:Hr}))||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Mr(t,r);var o=i.prototype;return o.initIframe=function(t,r){var i=this.AdParameters,o=i.src,n=i.url;this.logger.log("::VpaidExternalJs initIframe() src('"+(n||o)+"')"),e.prototype.initIframe.call(this,t);var a=Br.bind(this,t,r,n,o);this.iframeLoadedIntervalId=ce(t,{onload:a})},o.validateAdParams=function(e){var t=e.src,r=e.url;return!!(r&&r.length||t&&t.length)||(this.trigger("AdError","url param not found",D.GENERAL_VPAID_ERROR),!1)},o.onLoadedVideoData=function(){var e=this.iFrame.contentDocument.documentElement||{},t=e.offsetWidth,r=e.offsetHeight;t&&r&&(this.logger.trace("::VpaidExternalJs iframe size: width: "+t+", height: "+r+"}}"),this.triggersEventsOnLoadVideoData())},i}(rr);function Br(e,t,r,i){var o=this,n=this.iframeLoadedIntervalId,a=this.iframeWasLoaded;if(clearInterval(n),!a){this.iframeWasLoaded=!0;var s=e.contentWindow,d=e.contentDocument,l=d.createElement("script");l.addEventListener("load",(function(){o.logger.log("::VpaidExternalJs initIframe() script('"+(r||i)+"') was successfully loaded"),t(),ae(e.contentWindow.document.body,{margin:0}),o.onLoadedVideoData()})),l.addEventListener("error",(function(e){o.trigger("AdError","::VpaidExternalJs "+e,D.GENERAL_VPAID_ERROR)})),s.addEventListener("error",(function(e){o.trigger("AdError","::VpaidExternalJs "+e,D.GENERAL_VPAID_ERROR)})),d&&d.body.appendChild(l),l.src=r||i}}var Ur="requests",Gr=(null==L||null===(Nr=L.getChildWriter)||void 0===Nr||Nr.call(L,Ur),;function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qr(e,t){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qr(e,t)}var Kr="VpaidGoogleTag",Xr={adUnitPath:"",setSizeByMedia:!0,containerBackgroundColor:"#d3d3d3"},Zr=function(e){var t,r;function i(t){var r,i,o;void 0===t&&(t={});var n=t&&t.ancestor&&t.ancestor+":"+Kr||"Module::VpaidGoogleTag",a=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||L;(a=(null===(r=a)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Kr))||a).trace(n+".constructor() options.ancestor="+n),(o=e.call(this,Yr(Yr(Yr({},Xr),t),{},{ancestor:n,logger:a}))||this).VpaidGoogleTag=n;var s=new ve;return o.tagCreatedPromise=s.promise,o.tagCreatedResolve=s.resolve,o}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Qr(t,r);var o=i.prototype;return o.initAd=function(e,t,r,i,o,n){var a=this;void 0===o&&(o={}),void 0===n&&(n={}),this.logger.trace(".initAd(width="+e+", height="+t+", viewMode="+r+" creativeData="+o+" environmentVars="+n),this.adLinear=!0,this.adWidth=e,this.adHeight=t,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=0,this.adCompanions="",this.adIcons=!1,this.viewMode=r,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot,this.adDuration=-2,this.options=Yr(Yr({},this.options),n.options);var s=o.AdParameters,d=JSON.parse(s),l=d.adUnitPath,c=d.slotSizes,u=d.useFluid,g=d.page_url;l&&(this.options.adUnitPath=l),c&&(this.options.slotSizes=c),g&&(this.options.pageUrl=g),u&&(this.options.useFluid=u),this.started=!1,this.slotDivId=("div-gpt-ad-"+1e16*Math.random()).split(".")[0];var p=n,h=p.videoSlot,f=p.moduleAPI||{},v=f.addVPAIDEventListener,m=f.removeVPAIDEventListener;h&&this.trigger("vn_VideoSlotRemoved"),this.formatChangedEventOccurred=!1,v("vn_FormatChanged",(,this);var A=v("AdVideoStart",(function(){m("AdVideoStart",A,a),a.triggerResize()}),this),b=v("AdStarted",(function(){m("AdStarted",b,a),a.triggerResize(Kr,10)}),this);return $r.call(this,n.slot).catch((function(e){var t=e.code,r=e.message;a.trigger("AdError",r,t)})),setTimeout((function(){return a.trigger("vn_VPAIDCreated")})),Promise.resolve()},o.triggerResize=function(e,t){var r=this;setTimeout((function(){var i=[r.getAdWidth(),r.getAdHeight()],o=i[0],n=i[1];r.trigger("slotSizeChanged",{height:n,width:o,src:e},t)}))},o.resizeAd=function(e,t,r){void 0===r&&(r=this.viewMode);var i=this.adWidth,o=this.adHeight;!i&&(this.adWidth=e),!o&&(this.adHeight=t),this.viewMode=r,(be(this.adWidth,i)||be(this.adHeight,o))&&this.trigger("AdSizeChange")},o.getFormatOptions=function(){var e=(this.options||{}).setSizeByMedia;return Promise.resolve({setSizeByMedia:Ae(e)})},o.getMediaInfo=function(){return this.tagCreatedPromise.then((function(e){return e}))},o._resizeAd=function(e,t,r,i){void 0===r&&(r=this.viewMode),void 0===i&&(i=!1),this.adWidth=e,this.adHeight=t,this.viewMode=r,i&&this.trigger("AdSizeForceChange")},o.getModuleOptions=function(){var e=this.options.containerBackgroundColor;return Promise.resolve({destroyControls:["spinner","volume","play"],controlsActions:[{name:"container",action:function(t,r){if(t){var i=r?Yr(Yr({},r.getControlUnionData("background","css")),r.getControlUnionData("containerBackground","css")):{};ae(t,Yr({backgroundColor:e},i))}}}]})},o.startAd=function(){this.logger.trace("VpaidGoogleTag.startAd()");var e=this.formatChangedEventOccurred,t=this.options.setSizeByMedia,r=(this.environmentVars||{}).moduleAPI||{},i=r.addVPAIDEventListener,o=r.getFormat,n=oi.bind(this),a=o&&o().getBaseName();!e&&Ae(t)&&i&&a&&(a.includes("flyroll")||a.includes("contentroll"))?i("vn_FormatChanged",n,this):n()},i}(Ge);function $r(e){var t=this;if(this.logger.trace(".createGoogleTag() slot="+e),!this.options)return null;var r=this.slotDivId,i=this.options,o=i.adUnitPath,n=i.pageUrl,a=i.useFluid,s=this.placeholder=de(e,"div",{},null);s.setAttribute("id",r);var d=ei.call(this)||[],l=s.clientWidth;return d.unshift([l,l],[l,l*(X?16/9:9/16)^0]),Ae(a)&&d.push("fluid"),Gr("https://securepubads.g.doubleclick.net/tag/js/gpt.js").then((function(){return new Promise((function(e,i){var a=window.googletag||{};a.cmd=a.cmd||[],t.targetSlot=null,a.cmd.push((function(){try{t.targetSlot=a.defineSlot(o,d,r).addService(a.pubads());var l=n||he(window,document);a.pubads().set("page_url",l),a.pubads().enableSingleRequest(),a.enableServices(),a.pubads().addEventListener("slotRenderEnded",ti.bind(t)),a.pubads().addEventListener("slotOnload",ii.bind(t)),a.pubads().addEventListener("impressionViewable",ni.bind(t)),a.pubads().addEventListener("slotRequested",ri.bind(t)),de(s,"script",{},"window.googletag && googletag.cmd.push(function() {\n                    googletag.pubads().enableLazyLoad({fetchMarginPercent: -1, renderMarginPercent: -1, mobileScaling: 1}); // disable lazy load\n                    googletag.display('"+r+"');\n                    if (googletag.pubads().isInitialLoadDisabled()) { // googletag.pubads().disableInitialLoad() could be called by other script before\n                        const slot = googletag.pubads().getSlots().find(s => s.getSlotElementId() === '"+r+"'); // find slot\n                        slot && googletag.pubads().refresh([slot]); // then we fetch ad for slot manually\n                    }\n                  });"),t.logger.trace(".createGoogleTag() defineSlot.adUnitPath="+o+" defineSlot.slotSizes="+JSON.stringify(d)+" defineSlot.slotDivId="+r+" page_url="+l),e()}catch(e){t.tagCreatedResolve(null),i(function(e,t,r){var i=Error(t+" ("+(e&&e.message)+")");return r?i.code=r:e&&e.code&&(i.code=e.code),e&&e.name&&(i.name=e.name),i}(e,t.VpaidGoogleTag+".createGoogleTag()",D.GENERAL_VPAID_ERROR))}}))}))}))}function ei(){this.logger.trace(".getSlotSizes()");var e=this.options.slotSizes;if(e&&e.length)return e;var t=this.placeholder.getBoundingClientRect(),r=t.left,i=t.right-r;return ai.slice().filter((function(e){return e&&e[0]<=i})).sort((function(e,t){return Math.abs(i-e[0])-Math.abs(i-t[0])})).sort((function(e,t){return e[0]===t[0]?Math.abs(e[0]-e[1])-Math.abs(t[0]-t[1]):Math.abs(i-e[0])-Math.abs(i-t[0])}))}function ti(e){var t=this;if(this.logger.trace(".onSlotRenderEnded() event="+e+" advertiserId="+(null==e?void 0:e.advertiserId)+" campaignId="+(null==e?void 0:e.campaignId)+" creativeId="+(null==e?void 0:e.creativeId)+" size="+(null==e?void 0:e.size)),!e||e.slot===this.targetSlot&&!0===e.isEmpty)return this.trigger("AdError","There is no Ad",D.GENERAL_VPAID_ERROR),void this.tagCreatedResolve(!1);if(e.size){var r=e.size&&e.size[0],i=e.size&&e.size[1];if(this.trigger("AdLoaded"),!r&&!i){var o=(this.environmentVars||{}).slot;if(o){ae(o,{width:"100%"}),i=(r=o.clientWidth)*(X?16/9:9/16)^0,this.trigger("slotSizeChanged",{height:i,width:r,src:Kr}),ae(this.placeholder,{width:"100%",height:"initial"});var n=12,a=function e(){if(--n<0)t.trigger("AdError","Adaptive (fluid) banner is not visible",D.GENERAL_VPAID_ERROR);else{var r=getComputedStyle(t.placeholder.firstElementChild),i=r.width,a=r.height,s=parseFloat(a),d=parseFloat(i);t.logger.warn(".onSlotRenderEnded():fluidSizeBanner height="+s+" attempt="+(12-n)),s>50?(t._resizeAd(d,s,"normal",!0),ae(o,{height:a}),t.tagCreatedResolve({width:d,height:s})):setTimeout((function(){return e()}),200)}};setTimeout((function(){return a()}),300)}else this.trigger("AdError","Banner size is 0. width="+r+" height="+i,D.GENERAL_VPAID_ERROR)}else ae(this.placeholder,{width:pe(r),height:pe(i),margin:"auto"}),this.tagCreatedResolve({width:r,height:i}),this._resizeAd(r,i),this.trigger("slotSizeChanged",{height:i,width:r,src:Kr})}}function ri(e){this.logger.trace(".onSlotRequested() GPT fetching ad for slot event="+e)}function ii(e){var t,r,i;this.logger.trace(".onSlotOnload() event="+e);var o,n=null===(t=this.placeholder)||void 0===t||null===(r=t.firstElementChild)||void 0===r?void 0:r.firstElementChild;"0"===(null==n||null===(i=n.getAttribute)||void 0===i?void 0:i.call(n,"height"))&&(null==n||null===(o=n.setAttribute)||void 0===o||o.call(n,"height","100%"))}function oi(){this.started||(this.logger.trace(this.VpaidGoogleTag+" triggerAdVideoStart()"),this.started=!0,this.trigger("AdStarted"),this.trigger("AdVideoStart"),this.trigger("AdImpression"))}ar ai=[[970,250],[750,300],[750,200],[728,90],[580,400],[300,250],[336,280],[160,600],[320,50],[320,100],[300,600],[300,100],[250,250],[250,360],[240,400],[200,200]];function si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?si(Object(r),!0).forEach((function(t){li(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function li(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ci(e,t){return ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ci(e,t)}var ui="VpaidGoogleIMA",gi="setAdVolumeTimer",pi={dataRequestTimeout:5e3,shouldPreRequest:!1,imaSDKUrl:"//imasdk.googleapis.com/js/sdkloader/ima3.js"},hi=function(e){var t,r;function i(t){var r,i,o;void 0===t&&(t={});var n=(t||{}).logLevel,a=void 0!==n?n:T,s=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||L;return s=(null===(r=s)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,ui))||s,(o=e.call(this,di(di(di({},pi),t),{},{logger:s}))||this)._addParentSlotHideClassName=function(){var e,t,r,i=o.environmentVars,n=i.parentSlot,a=i.parentFormat;o._parentSlotsHideClassName="vn_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),null==n||null===(e=n.classList)||void 0===e||e.add(o._parentSlotsHideClassName),null==a||null===(t=a.slot)||void 0===t||null===(r=t.classList)||void 0===r||r.add(o._parentSlotsHideClassName);var s="\n      ."+o._parentSlotsHideClassName+" {\n         width: 1px !important;\n         height: 1px !important;\n         position: absolute !important;\n         clip: rect(0 0 0 0) !important;\n         margin: -1px !important;\n      }";n&&le(n,s),(null==a?void 0:a.slot)&&le(a.slot,s)},o._clearParentSlotHideClassName=o.logLevel=a,o.VpaidGoogleIMA="",o.logger.log(".constructor()",2),o._parentSlotsHideClassName=null,o}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,ci(t,r);var o=i.prototype;return o.initAd=function(e,t,r,i,o,n){var a=this;void 0===o&&(o={}),void 0===n&&(n={}),this.adLinear=!0,this.adWidth=e,this.adHeight=t,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=0,this.viewMode=r,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot;var s=function(e,t){return~["slot","videoSlot"].indexOf(e)?t:void 0};this.logger.log(".initAd() creativeData="+JSON.stringify(o||{},s,"/t")),this.logger.log(".initAd() environmentVars="+JSON.stringify(n||{},s,"/t"));var d=o.AdParameters,l=JSON.parse(d)||{},c=l.maxSkipOffset,u=l.url,g=l.imaSDKUrl,p={};void 0!==u&&(p.adTagUrl=u),void 0!==g&&(p.imaSDKUrl=g),this.maxSkipOffset=c||null,this.logger.log(".initAd() maxSkipOffset="+c);var h=n||{},f=h.slot,v=h.videoSlot;if(!f)throw Error("slot is not defined");if(!v)throw Error("videoSlot is not defined");this.options=di(di(di({},this.options),n.options),p);var m=this.options,A=m.adTagUrl,b=m.imaSDKUrl,y=de(f,"div",{});return this.adContainer=y,y.setAttribute("id","adContainer"),y.setAttribute("zIndex","0"),Gr(b).then(().then(().catch((function(e){var t=e.code,r=e.message;a.trigger("AdError",r,t)}))},o._destroy=function(){var t=this.adsManager;this._removeTimeout(gi),t&&t.destroy(),e.prototype._destroy.call(this),ne(this.adContainer)},o._checkSkipTime=function(e){var t=this.maxSkipOffset;return e&&t&&e>t&&'skipTime has attribute "strict" == true and value of maxSkipOffset('+e+") is more than parent skipTime("+t+")"},o.init=function(e,t,r){var i=this;return new Promise((function(o,n){var a,s,d=window.google.ima;try{s=(top.navigator.language||top.navigator.userLanguage).substr(0,2)}catch(e){s=(navigator.language||navigator.userLanguage).substr(0,2)}s&&d.settings.setLocale(s);var l=d.AdEvent.Type,c=((a={})[l.LOADED]="AdLoaded",a[l.AD_CAN_PLAY]="AdLoadedVideoData",a[l.CLICK]="AdClickThru",a[l.DURATION_CHANGE]="AdDurationChange",a[l.FIRST_QUARTILE]="AdVideoFirstQuartile",a[l.MIDPOINT]="AdVideoMidpoint",a[l.THIRD_QUARTILE]="AdVideoThirdQuartile",a[l.USER_CLOSE]="AdUserClose",a[l.VOLUME_CHANGED]="AdVolumeChange",a[l.VOLUME_MUTED]="AdVolumeChange",a[l.PAUSED]="AdPaused",a[l.RESUMED]="AdPlaying",a[l.SKIPPED]="AdSkipped",a[l.SKIPPABLE_STATE_CHANGED]="AdSkippableStateChange",a[l.LOG]="AdLog",a),u=new window.google.ima.AdDisplayContainer(e,t);u.initialize();var g=i,p=null,h=new window.google.ima.AdsLoader(u);function f(e){g._clearParentSlotHideClassName();var t=e.getError(),r=t,i=t.getErrorCode,o=t.getMessage,a=t.getType;i&&o&&a&&((r=Error(a.call(t)+":"+o.call(t))).code=i.call(t)),p&&p.destroy(),n(r)}h.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){(p=e.getAdsManager(t)).addEventListener(l.AD_ERROR,f),p.addEventListener(l.COMPLETE,(function(e){g._clearParentSlotHideClassName(),g.logger.log(".onAdEvent() adEvent.type="+e.type),!g.adQ1&&g.logger.warn(' "'+e.type+'" has not been passed because the AdVideoFirstQuartile event did not happens.'),g.trigger.call(g,"AdVideoComplete")})),p.addEventListener(l.FIRST_QUARTILE,(function(e){g.logger.log(".onAdEvent() adEvent.type="+e.type),g.adQ1=!0})),p.addEventListener(l.STARTED,function(e){if(this.logger.log(".onAdEvent() adEvent.type="+e.type),e.type===l.STARTED){this.wasStarted=!0;var t=e.getAd();t&&((this.options||{}).shouldPreRequest||fi.call(this,["AdStarted","AdVideoStart"]),-1!==String(null==t?void 0:t.getContentType()).indexOf("audio")&&(this.logger.log(".onAdStartedEvent() hiding wrapper on AdAudioOnlyStart"),fi.call(this,["AdAudioOnlyStart"]),this._addParentSlotHideClassName()))}}.bind(g)),Object.keys(c).forEach((function(e){p.addEventListener(e,(function(t){g.logger.log(". pass event "+t.type+" -> "+c[e]);var r=t.getAdData();g.trigger.call(g,c[e],r)}))})),p.addEventListener(l.LOADED,(function(e){if(e.type===l.LOADED){var t=e.getAd();if(t)if(g.isLinear=t.isLinear(),!(g.options||{}).shouldPreRequest){var r=t.getDuration();g.adDuration=r;var i=t.getSkipTimeOffset();g.logger.log(".init() @loaded adDuration="+r+" skipOffset="+i);var o=g._checkSkipTime(i);if(o)setTimeout((function(){g.stopAd(),g.trigger("AdError",o,D.GENERAL_VPAID_ERROR)}));else{g.trigger("AdDurationChange");var n=i>-1&&i<r;g.setAdSkippableState(n),g.logger.log(".init() @AdEvent isSkippable="+n),g.trigger("AdSkippableStateChange")}}}})),p.addEventListener(l.STARTED,(function(){g.logger.log(". @google.ima.AdEvent.Type.STARTED"),fi.call(g,["AdImpression","AdStarted","AdVideoStart"])})),p.addEventListener(l.IMPRESSION,(function(){g.logger.log(". @google.ima.AdEvent.Type.IMPRESSION"),fi.call(g,["AdImpression","AdStarted","AdVideoStart"])}));try{p.init(m,A,window.google.ima.ViewMode.NORMAL),o(p)}catch(e){n(e)}}),!1),h.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,f,!1),t.onended=var v=new window.google.ima.AdsRequest;v.adTagUrl=r;var m=i.adWidth,A=i.adHeight;m&&A&&(v.linearAdSlotWidth=m,v.linearAdSlotHeight=A),h.requestAds(v)}))},o.resizeAd=function(e,t,r){void 0===r&&(r=this.viewMode),this.adWidth=e,this.adHeight=t,this.viewMode=r;var i=this.adsManager;i&&i.resize(e,t,r)},o.getModuleOptions=function(){return Promise.resolve({destroyControls:["skipAd"],format:{hideThumbnail:!0}})},o.startAd=function(){this.logger.trace(".startAd()");var e=this.adsManager;e&&e.start()},o.stopAd=function(){this.logger.trace(".stopAd()");var t=this.adsManager;t&&t.stop(),this._clearParentSlotHideClassName(),e.prototype.stopAd.call(this)},o.skipAd=function(){var e=this.adsManager;e&&e.skip(),this._clearParentSlotHideClassName()},o.pauseAd=function(){this.logger.trace(".pauseAd()");var e=this.adsManager;e&&e.pause()},o.resumeAd=function(){this.logger.trace(".resumeAd()");var e=this.adsManager;e&&e.resume()},o.setAdVolume=function(t,r){var i=this;void 0===r&&(r={}),this._removeTimeout(gi);var o=this.adsManager,n=this.wasStarted;o&&o.setVolume(t),e.prototype.setAdVolume.call(this,t,r),!n&&t<.001&&this._addTimeout(gi,(function(){return i.setAdVolume(t,r)}),10)},o.getAdVolume=function(){var t=this.adsManager;return t&&(this.adVolume=t.getVolume()),e.prototype.getAdVolume.call(this)},o.expandAd=function(){var t=this.adsManager;t&&t.expand&&t.expand(),e.prototype.expandAd.call(this)},o.collapseAd=function(){var t=this.adsManager;t&&t.collapse&&t.collapse(),e.prototype.collapseAd.call(this)},o.getAdRemainingTime=function(){var t=this.adsManager;return t&&(this.adRemainingTime=t.getRemainingTime()),e.prototype.getAdRemainingTime.call(this)},o.getAdSkippableState=function(){var t=this.adsManager;return t&&e.prototype.setAdSkippableState.call(this,t.getAdSkippableState()),e.prototype.getAdSkippableState.call(this)},i}(Ge);function fi(e){var t=this;[].concat(e).forEach((function(e){var r="_"+e+"WasTriggered";t[r]||(t[r]=!0,t.logger.log(". @google.ima trigger event "+e),t.trigger(e))}))}function vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(r),!0).forEach((function(t){Ai(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bi(e,t){return bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bi(e,t)}var yi="VpaidYandexAds",Oi={dataRequestTimeout:5e3,sdkUrl:"https://yandex.ru/ads/system/adsdk.js",vpaidTimeout:5e3,playbackParameters:null},wi=function(e){var t,r;function i(t){var r,i,o;void 0===t&&(t={});var n=t&&t.ancestor&&t.ancestor+":"+yi||"::VpaidYandexAds",a=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||L;return a=(null===(r=a)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,yi))||a,(o=e.call(this,mi(mi(mi({},Oi),t),{},{ancestor:yi,logger:a}))||this).VpaidYandexAds=n,o.logger.log(o.VpaidYandexAds+".constructor()"),window.vn_module_id=n,o.moduleAPI=t.moduleAPI,o}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,bi(t,r);var o=i.prototype;return o.initAd=function(e,t,r,i,o,n){var a=this;void 0===o&&(o={}),void 0===n&&(n={}),this.adLinear=!0,this.adWidth=e,this.adHeight=t,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=0,this.viewMode=r,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot,this.isStarted=!1;var s=o.AdParameters,d=JSON.parse(s);delete d.vnVpaidProvider;var l=d.url;l&&(d.vastUrl=l),delete d.url,this.logger.log(".initAd()");var c=n||{},u=c.slot,g=c.videoSlot;if(!u)throw Error("slot is not defined");if(!g)throw Error("videoSlot is not defined");this.logger.log(this.VpaidYandexAds+".initAd() slot="+u+" videoSlot="+g),this.options=mi(mi(mi({},this.options),n.options),d);var p=this.options,h=p.vastUrl,f=p.sdkUrl,v=p.partnerId,m=p.category,A=p.adFoxParameters;if(delete d.sdkUrl,h)this.logger.log(".initAd() using adTagUrl="+h+". other parameters are ignored");else if(void 0===A&&(void 0===v||void 0===m))throw Error("adFoxParameters("+A+") or partnerId("+v+") and category("+m+") must be defined");return Gr(f).then(().then(().then(().then((function(){return a.trigger("AdReadyToShow"),setTimeout((function(){return a.trigger("AdLoaded")}),0),!0})).catch((function(e){var t=e.code,r=e.message;a.trigger("AdError",r,t)}))},o._destroy=function(){var t=this.adViewer;t&&t.destroy(),e.prototype._destroy.call(this),ne(this.adContainer)},o.init=function(e,t,r,i,o){var n=this,a=mi({},i),s=a.vast,d=a.vastUrl,l=(this.options||{}).vpaidTimeout,c=i.vpaidTimeout;c&&(l=c),delete a.vpaidTimeout;var u=void 0!==s||void 0!==d;return e.AdLoader.create(a,u).then(().then((function(e){return e.preload({videoSlot:r}),n.adViewer=e,e})).then((function(e){return new Promise((function(i){var a=n,s="object"==typeof n.options.playbackParameters&&null!==n.options.playbackParameters?n.options.playbackParameters:{},d=e.createPlaybackController(r,t,mi({vpaidTimeout:l,controlsSettings:{controlsVisibility:{mute:!0,skip:!0,title:!1}}},s)),c={AdStopped:"AdStopped",AdPodImpression:"AdImpression",AllAdPodVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdPodVideoFirstQuartile:"AdVideoFirstQuartile",AdPodVideoMidpoint:"AdVideoMidpoint",AdPodVideoThirdQuartile:"AdVideoThirdQuartile",AdVolumeChange:"AdVolumeChange",AdPodSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange"};Object.keys(c).forEach((function(e){d.subscribe(e,a.trigger.bind(a,c[e]))}));var u=function(){d.getAdVolumeAvailabilityState&&!d.getAdVolumeAvailabilityState()?a.trigger("AdAudioDisabled"):a.trigger("AdAudioEnabled")};d.subscribe("AdStarted",(function(){a.logger.trace(a.VpaidYandexAds+" @AdStarted"),a.trigger("AdStarted"),a.trigger("AdVideoStart"),a.isStarted=!0,u()})),d.subscribe("AdPodError",(function(e){var t=e.code,r=e.message;a.logger.trace(a.VpaidYandexAds+" @AdPodError "+r+" "+t),a.trigger("AdError","VpaidYandexAds:"+(r||""),t)})),d.subscribe("AdPodStopped",(),d.subscribe("AdPodImpression",(function(){a.logger.trace(a.VpaidYandexAds+" @AdPodImpression"),a.trigger("AdImpression"),u()})),d.subscribe("AdDurationChange",(function(){a.logger.trace(a.VpaidYandexAds+" @AdDurationChange"),u()})),d.subscribe("AdPodStarted",(function(){a.logger.trace(a.VpaidYandexAds+" @AdPodStarted"),u()})),d.subscribe("AdPlayingStateChange",(function(e){"pause"===(null==e?void 0:e.playingState)&&!1===a.isStarted&&(a.trigger("AdStarted"),a.trigger("AdVideoStart"),setTimeout((function(){return a.trigger("AdPaused")}),300)),"play"===(null==e?void 0:e.playingState)&&a.trigger("AdPlaying")})),d.subscribe("AdStopped",(),i(d)}))}))},o.getModuleOptions=o.startAd=function(){this.logger.log(this.VpaidYandexAds+".startAd()");var e=this.adPlaybackController;try{e&&e.playAd()}catch(e){var t=e.code,r=e.message;this.trigger("AdError",r,t)}},o.stopAd=function(){this.logger.log(this.VpaidYandexAds+".stopAd()");var t=this.adPlaybackController;t&&t.stopAd(),e.prototype.stopAd.call(this)},o.skipAd=function(){this.logger.log(this.VpaidYandexAds+".skipAd()");var e=this.adPlaybackController;e&&e.skipAd()},o.pauseAd=function(){this.logger.log(this.VpaidYandexAds+".pauseAd()");var t=this.adPlaybackController;t&&t.pauseAd(),e.prototype.pauseAd.call(this)},o.resumeAd=function(){this.logger.log(this.VpaidYandexAds+".resumeAd()");var t=this.adPlaybackController;t&&t.resumeAd(),e.prototype.resumeAd.call(this)},o.setAdVolume=function(t,r){void 0===r&&(r={}),(t>.999||t<.001?this.logger.log:this.logger.trace)(this.VpaidYandexAds+".setAdVolume("+t+")");var i=this.adPlaybackController;i&&i.setAdVolume(t),e.prototype.setAdVolume.call(this,t,r)},o.getAdVolume=function(){var t=this.adPlaybackController;return t&&(this.adVolume=t.getAdVolume()),e.prototype.getAdVolume.call(this)},o.expandAd=function(){var e=this.adPlaybackController;e&&e.expand&&e.expand()},o.collapseAd=o.getAdRemainingTime=function(){var t=this.adPlaybackController;return t&&t.getAdRemainingTime&&(this.adRemainingTime=t.getAdRemainingTime()),e.prototype.getAdRemainingTime.call(this)},o.getAdSkippableState=function(){var t=this.adPlaybackController;return t&&e.prototype.setAdSkippableState.call(this,t.getAdSkippableState()),e.prototype.getAdSkippableState.call(this)},o.getAdDuration=function(){var t=this.adPlaybackController;return t?t.getAdDuration():e.prototype.getAdSkippableState.call(this)},i}(Ge);function Ei(e){this._countdown=new st(e),this.startAd=function(){var e=this._countdown;e&&e.start()},this.stopAd=function(){var e=this._countdown;e&&e.stop()},this.pauseAd=function(){var e=this._countdown;e&&e.stop()},this.resumeAd=function(){var e=this._countdown;e&&e.start()},this.skipAd=function _i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(r),!0).forEach((function(t){Si(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Si(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}var Ii,Ci="VpaidYandexContext",Vi={setSizeByMedia:!0,containerBackgroundColor:"#d3d3d3"},Ri=function(e){var t,r;function i(t){var r,i,o;void 0===t&&(t={});var n=t&&t.ancestor&&t.ancestor+":"+Ci||"Module::VpaidYandexContext",a=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||L;(a=(null===(r=a)||void 0===r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Ci))||a).trace(n+".constructor() options.ancestor="+n),(o=e.call(this,Pi(Pi(Pi({},Vi),t),{},{logger:a,ancestor:n}))||this).VpaidYandexContext=n;var s=new ve;return o.tagCreatedPromise=s.promise,o.tagCreatedResolve=s.resolve,o}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,ji(t,r);var o=i.prototype;return o.initAd=function(e,t,r,i,o,n){var a=this;void 0===o&&(o={}),void 0===n&&(n={}),this.logger.trace("VpaidYandexContext.initAd("+e+", "+t+", "+r+", "+i+")"),this.adLinear=!0,this.adWidth=e,this.adHeight=t,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adVolume=0,this.adCompanions="",this.adIcons=!1,this.viewMode=r,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot,this.adDuration=-2,this.options=Pi(Pi({},this.options),n.options);var s=o.AdParameters,d=JSON.parse(s),l=d.blockId,c=d.statId,u=d.url,g=d.duration,p=d.fullscreen;if(!l)throw Error("VpaidYandexContext blockId is not defined");this.fullscreen=p||!1,this.started=!1,this.blockId=l,this.uniqueId=Math.random().toString(36).substring(2,5),this.slotDivId="yandex_rtb_"+this.blockId+"_"+this.uniqueId,this.statId=c,this.duration=g,this.libUrl=u||"https://yandex.ru/ads/system/context.js",null!=g&&(this.adDuration=g,this._manualCountdown=new Ei({duration:g,VPAID_API:{trigger:this.trigger.bind(this)}}));var h=n,f=h.videoSlot,v=h.moduleAPI||{},m=v.addVPAIDEventListener,A=v.removeVPAIDEventListener;f&&this.trigger("vn_VideoSlotRemoved"),Li.call(this,n.slot).catch(();var b=m("AdVideoStart",(function(){A("AdVideoStart",b,a),a.triggerResize()}),this),y=m("AdStarted",(function(){A("AdStarted",y,a),a.triggerResize(Ci,10)}),this);return setTimeout((function(){return a.trigger("vn_VPAIDCreated")})),Promise.resolve()},o.triggerResize=function(e,t){var r=this;setTimeout((function(){var i=[r.getAdWidth(),r.getAdHeight()],o=i[0],n=i[1];r.trigger("slotSizeChanged",{height:n,width:o,src:e},t)}))},o.resizeAd=function(e,t,r){void 0===r&&(r=this.viewMode),this.logger.trace(this.VpaidYandexContext+" resizeAd()");var i=this.adWidth,o=this.adHeight;!i&&(this.adWidth=e),!o&&(this.adHeight=t),this.viewMode=r,(be(this.adWidth,i)||be(this.adHeight,o))&&this.trigger("AdSizeChange")},o.getFormatOptions=function(){var e=(this.options||{}).setSizeByMedia;return Promise.resolve({setSizeByMedia:Ae(e)})},o.getMediaInfo=o._resizeAd=function(e,t,r){void 0===r&&(r=this.viewMode),this.logger.trace(this.VpaidYandexContext+" _resizeAd()"),this.adWidth=e,this.adHeight=t,this.viewMode=r,this.trigger("AdSizeForceChange")},o.getModuleOptions=function(){var e=(this.options||{}).containerBackgroundColor;return Promise.resolve({destroyControls:["spinner","volume","play"],controlsActions:[{name:"container",action:function(t,r){if(t){var i=r?Pi(Pi({},r.getControlUnionData("background","css")),r.getControlUnionData("containerBackground","css")):{};ae(t,Pi({backgroundColor:e},i))}}}]})},o.startAd=function(){this.logger.trace("VpaidYandexContext.startAd()");var e=this._manualCountdown;e&&e.startAd(),Ti.call(this)},o.stopAd=function(){var t=this._manualCountdown;e.prototype.stopAd.call(this),t&&t.stopAd()},o.pauseAd=function(){var t=this._manualCountdown;e.prototype.pauseAd.call(this),t&&t.pauseAd()},o.resumeAd=function(){var t=this._manualCountdown;e.prototype.resumeAd.call(this),t&&t.resumeAd()},o.skipAd=function(){var t=this._manualCountdown;e.prototype.skipAd.call(this),t&&t.skipAd()},i}(Ge);function Li(e){var t=this;return new Promise((function(r,i){var o=t.slotDivId,n=t.blockId,a=t.statId,s=t.libUrl,d=t.fullscreen,l=e,c=window,u=c.document,g=t,p=!1,h={blockId:n,renderTo:o,async:!0,onError:function(e){p||(t.logger.trace("createYandexContext() yaContextCb.onError()}"),g.trigger("AdError","VpaidYandexContext:"+(e&&e.text||"")),p=!0)},onRender:function(e){t.logger.trace("createYandexContext() yaContextCb.onRender(): product="+(null==e?void 0:e.product)+" productType="+(null==e?void 0:e.productType)+" advData="+JSON.stringify(null==e?void 0:e.advData)),Di.call(g),r()},onClose:function(){t.logger.trace("createYandexContext() yaContextCb.onClose()"),t.trigger("AdSkipped")},videoCallbacks:{onAdStart:onAdEnd:function(){t.logger.trace("createYandexContext() yaContextCb.onAdEnd()}"),g.trigger("AdVideoComplete")}}};d&&(h.type="fullscreen",h.platform="touch",delete h.renderTo,l=(null==u?void 0:u.head)||e),a&&(h.statId=a),c.yaContextCb=c.yaContextCb||[],c.yaContextCb.push((function(){try{c.Ya&&c.Ya.Context.AdvManager.render(h,(function(){t.logger.trace("createYandexContext() yaContextCb > Ad not found}"),g.trigger("AdError","VpaidYandexContext said: Ad not found"),p=!0}))}catch(e){i(e.message)}})),(t.placeholder=de(e,"div",{},null)).setAttribute("id",o);var f=u.createElement("script");f.type="text/javascript",f.src=s,f.async=!0,l.appendChild(f),g.logger.trace("VpaidYandexContext.createYandexContext() executed for slotDivId="+o)}))}function Ti(){this.started||(this.logger.trace(this.VpaidYandexContext+" triggerAdVideoStart()"),this.started=!0,this.trigger("AdStarted"),this.trigger("AdVideoStart"),this.trigger("AdImpression"))}function Di(){var e=this;this.logger.trace(this.VpaidYandexContext+" onRender()"),this.trigger("AdReadyToShow"),setTimeout((function(){return e.trigger("AdLoaded")}),0),ki.call(this)||(this.tagCreatedResolve(),this._addTimeout("check",ki.bind(this),300))}function ki(){this.logger.trace(this.VpaidYandexContext+" checkSize()");var e=this.placeholder;if(e){var t=function(e){if(!oe(e))return{};var t=getComputedStyle(e),r=t.paddingTop,i=t.paddingRight,o=t.paddingBottom,n=t.paddingLeft,a=t.marginTop,s=t.marginRight,d=t.marginBottom,l=t.marginLeft,c=t.borderTopWidth,u=t.borderRightWidth,g=t.borderBottomWidth,p=t.borderLeftWidth,h=t.width,f=t.height,v=e.getBoundingClientRect(),m=v.width,A=v.height;h=parseFloat(h)||0,f=parseFloat(f)||0,c=parseFloat(c)||0,u=parseFloat(u)||0,g=parseFloat(g)||0,p=parseFloat(p)||0,r=parseFloat(r)||0,i=parseFloat(i)||0,o=parseFloat(o)||0,n=parseFloat(n)||0,a=parseFloat(a)||0,s=parseFloat(s)||0,d=parseFloat(d)||0,l=parseFloat(l)||0;var b=e.clientWidth,y=e.clientHeight,O=e.offsetHeight,w=e.offsetWidth,E=return{paddingTop:r,paddingRight:i,paddingBottom:o,paddingLeft:n,marginTop:a,marginRight:s,marginBottom:d,marginLeft:l,top:r+E(a),right:i+E(s),bottom:o+E(d),left:n+E(l),clientWidth:b,clientHeight:y,width:m,height:A,offsetHeight:O,offsetWidth:w,insideWidth:w-n-i-p-u,insideHeight:O-r-o-c-g,floatInsideWidth:m-n-i-p-u,floatInsideHeight:A-r-o-c-g,outsideWidth:w?w+E(l)+E(s):Math.max(E(l),E(s)),outsideHeight:O?O+E(a)+E(d):Math.max(E(a),E(d)),floatOutsideWidth:m?m+E(l)+E(s):Math.max(E(l),E(s)),floatOutsideHeight:A?A+E(a)+E(d):Math.max(E(a),E(d)),borderTopWidth:c,borderRightWidth:u,borderBottomWidth:g,borderLeftWidth:p,widthFromStyle:h,heightFromStyle:f,rect:e.getBoundingClientRect()}}(e),r=t.width,i=t.height;if(i>1)return this.tagCreatedResolve({width:r,height:i}),this.logger.trace(this.VpaidYandexContext+" checkSize() tagCreatedResolve() width="+r+" height="+i),this._resizeAd(r,i),this.trigger("slotSizeChanged",{height:i,width:r,src:Ci}),!0}return!1}function xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(r),!0).forEach((function(t){Ni(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ni(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hi(e,t){return Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hi(e,t)}var Wi,Fi="VpaidRoxot",zi=(null==L||null===(Ii=L.getChildWriter)||void 0===Ii?void 0:Ii.call(L,Fi))||L,Bi={url:"https://cdn-plus.roxot-panel.com/roxot-wrapper/js/roxot-manager.js",pid:"e8101d05-786a-4178-9e6d-e313b506dda9",explicitAdLoaded:!0,startAdTimeout:5e3,stopAdTimeout:3e3},Ui=function(e){var t,r;function i(t){var r;void 0===t&&(t={}),zi.trace("VpaidRoxot.constructor()");var i=t&&t.ancestor&&t.ancestor+":"+Fi||"VpaidRoxot";return(r=e.call(this,Mi(Mi(Mi({},Bi),t),{},{ancestor:i}))||this)._originalStartAd=e.prototype.startAd,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Hi(t,r);var o=i.prototype;return o.initAd=function(t,r,i,o,n,a){var s=this.AdParameters||{},d=s.url,l=s.pid,c=s.master_page_url,u=(a||{}).slot;return this.options.slot=u,c&&(this.options.masterPageUrl=c,this.logger.log('.initAd() page_url got from AdParameters: "'+c+'"')),this.shouldCreateIframe=!0,d&&(this.options.url=d,this.logger.log('.initAd() url got from AdParameters: "'+d+'"')),l&&(this.options.pid=l,this.logger.log('.initAd() pid got from AdParameters: "'+l+'"')),e.prototype.initAd.call(this,t,r,i,o,n,a)},o.addIFrame=function(t,r,i){return this.shouldCreateIframe?e.prototype.addIFrame.call(this,t,r,i):(this.iframe=t,this.initIframe(t,i),this.iframe)},o.initIframe=function(e,t){ce(e,{onload:Gi.bind(this,e,t)})},o.validateAdParams=function(e){return void 0!==(e||{}).placementId||(this.wasAdError=!0,this.trigger("AdError","placementId param not found",D.GENERAL_VPAID_ERROR),!1)},o.getCommunicationInputIframeWindow=function(){var e=this.iFrame;return e&&e.contentWindow||window},o.getModuleOptions=function(){var t=this.options,r=t.stopAdTimeout,i=t.startAdTimeout;return e.prototype.getModuleOptions.call(this).then((function(e){return delete e.format,e.startAdTimeout=i,e.stopAdTimeout=1.5*r,e}))},o.startAd=function(){},o.stopAd=function(){var e=this,t=this._countdown,r=this.options.stopAdTimeout;this.logger.trace(".stopAd() AdStopped triggers delayed for "+r+" ms"),t&&t.stop(),setTimeout((function(){e.logger.log(".stopAd() triggered AdStopped after "+r+" ms"),e.trigger("AdStopped")}),r)},i}(rr);function Gi(e,t){var r,i;this.iFrame=e;var o=(null==e||null===(r=e.contentWindow)||void 0===r||null===(i=r.document)||void 0===i?void 0:i.body)||e;o&&ae(o,{margin:0,padding:0}),t&&t(),Ji.call(this)}function Ji(){var e,t,r=this;this.logger.log("VpaidRoxot createBanner()");var i=this.AdParameters,o=this.options,n=o.url,a=o.pid,s=o.masterPageUrl,d=i||{},l=d.url,c=d.pid,u=d.placementId,g=d.master_page_url;g&&(s=g,this.logger.log('.createBanner() page url got from AdParameters: "'+s+'"')),l&&(n=l,this.logger.log('.createBanner() url got from AdParameters: "'+n+'"')),c&&(a=c,this.logger.log('.initAd() pid got from AdParameters: "'+a+'"'));var p=this.getCommunicationInputIframeWindow(),h=p&&p.document,f=this.iFrame,v=(null==f||null===(e=f.contentWindow)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.body)||f;s&&(window.roxotPlusPageUrl=s);var m=h.createElement("script");m.type="text/javascript",m.async=1;var A=n+"?pid="+a;m.addEventListener("error",(function(e){r.wasAdError=!0,r.trigger("AdError","VpaidRoxot "+e.message,D.GENERAL_VPAID_ERROR)})),p&&p.addEventListener("error",(function(e){r.wasAdError=!0,r.trigger("AdError","VpaidRoxot "+e.message,D.GENERAL_VPAID_ERROR)})),m.src=A,v.appendChild(m),m.addEventListener("load",(function(){r.logger.log("VpaidRoxot createBanner() @load script('"+A+"') was successfully loaded"),setTimeout(()}));var b=0,y=function(){var e="roxot_vn_"+Math.random().toString().substring(3),t=h.createElement("div");t.setAttribute("id",e),v.appendChild(t),r.logger.log(".insertBannerInfo() awaiting @onAdImpression...");var i=p.rom=p.rom||{cmd:[]};i.cmd.push((function(){i.displayPlacement(e,u,{onAdImpression:function(){var e={vnExternalSEQ:b};setTimeout((),b++,r.logger.log(".insertBannerInfo() @onAdImpression")},onAdEmpty:function(e){r.logger.warn(".insertBannerInfo() onAdEmpty"),r.trigger("AdError","VpaidRoxot "+((null==e?void 0:e.message)||"Empty"),(null==e?void 0:e.code)||D.GENERAL_VPAID_ERROR)}})})),r.trigger("AdLoaded")}}function Yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(r),!0).forEach((function(t){Qi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}unction Xi(e,t){return Xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xi(e,t)}var Zi,$i="VpaidAdform",eo=(null==L||null===(Wi=L.getChildWriter)||void 0===Wi?void 0:Wi.call(L,$i))||L,to="https://s1.adform.net/banners/scripts/adx.js",ro={url:"adx.adform.net/adx/",explicitAdLoaded:!0,startAdTimeout:5e3,stopAdTimeout:3e3},io=function(e){var t,r;function i(t){var r;void 0===t&&(t={}),eo.trace("VpaidAdform.constructor()");var i=t&&t.ancestor&&t.ancestor+":"+$i||"VpaidAdform";return(r=e.call(this,qi(qi(qi({},ro),t),{},{ancestor:i}))||this)._onIframeLoaded=function(e,t){var i,o;r.iFrame=e;var n=(null==e||null===(i=e.contentWindow)||void 0===i||null===(o=i.document)||void 0===o?void 0:o.body)||e;n&&ae(n,{margin:0,padding:0,display:"flex",alignItems:"center",justifyContent:"center"}),t&&t(),r._createBanner()},r._onClickThrough=r._createBanner=function(){var e,t;r.logger.log("VpaidAdform _createBanner()");var i=Ki(r).AdParameters||{},o=i.url,n=i.mid,a=i.params,s=Ki(r).options.url;o&&(s=o,r.logger.log('._createBanner() url get from AdParameters "'+s+'"'));var d=r.getCommunicationInputIframeWindow(),l=d&&d.document,c=Ki(r).iFrame,u=(null==c||null===(e=c.contentWindow)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.body)||c,g=l.createElement("script");g.type="text/javascript",g.async=1;var p=null!==a&&"object"==typeof a?Object.entries(a).reduce((function(e,t){var r=t[0],i=t[1];return e+"&"+window.encodeURIComponent(r)+"="+window.encodeURIComponent(i)}),""):"",h=s+"?mid="+n+p;g.setAttribute("data-adfscript",h),g.addEventListener("error",(function(e){r.wasAdError=!0,r.trigger("AdError","VpaidAdform "+e.message,D.GENERAL_VPAID_ERROR)})),d&&d.addEventListener("error",(function(e){r.wasAdError=!0,r.trigger("AdError","VpaidAdform "+e.message,D.GENERAL_VPAID_ERROR)})),d.adformtag=d.adformtag||[],d.adformtag.push((function(){d.adformtag.onLoaded(n,(function(e){r.logger.log("VpaidAdform createBanner() @adformtag.onLoaded trigger adItem "+JSON.stringify(e)),!0===(null==e?void 0:e.isEmpty)?r.trigger("AdError","VpaidAdform adformtag adItem is empty",D.GENERAL_VPAID_ERROR):window.queueMicrotask(()})).onRendered(n,(function(e){r.logger.log("VpaidAdform createBanner() @adformtag.onRendered trigger adItem "+JSON.stringify(e)),window.queueMicrotask((function(){var t,i,o;r._originalStartAd();var n=(null==e?void 0:e.ad)||(null===(t=u.querySelector)||void 0===t?void 0:t.call(u,"iframe"));null==n||null===(i=n.contentDocument)||void 0===i||null===(o=i.addEventListener)||void 0===o||o.call(i,"click",r._onClickThrough,{capture:!0})}))}))})),g.src=to,u.appendChild(g),g.addEventListener("load",()},r._originalStartAd=e.prototype.startAd,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,Xi(t,r);var o=i.prototype;return o.initAd=function(t,r,i,o,n,a){var s=(this.AdParameters||{}).url,d=(a||{}).slot;return this.options.slot=d,this.shouldCreateIframe=!0,s&&(this.options.url=s,this.logger.log('.initAd() url get from AdParameters "'+s+'"')),e.prototype.initAd.call(this,t,r,i,o,n,a)},o.addIFrame=function(t,r,i){return this.shouldCreateIframe?e.prototype.addIFrame.call(this,t,r,i):(this.iframe=t,this.initIframe(t,i),this.iframe)},o.initIframe=function(e,t){var r=this;ce(e,{onload:)},o.validateAdParams=function(e){var t=(e||{}).mid;return!!["string","number"].includes(typeof t)||(this.wasAdError=!0,this.trigger("AdError","mid param not found",D.GENERAL_VPAID_ERROR),!1)},o.getCommunicationInputIframeWindow=o.getModuleOptions=function(){var t=this.options,r=t.stopAdTimeout,i=t.startAdTimeout;return e.prototype.getModuleOptions.call(this).then((function(e){return delete e.format,e.startAdTimeout=i,e.stopAdTimeout=1.5*r,e}))},o.startAd=o.stopAd=function(){var e=this,t=this._countdown,r=this.options.stopAdTimeout;this.logger.trace(".stopAd() AdStopped triggers delayed for "+r+" ms"),t&&t.stop(),setTimeout((function(){e.logger.log(".stopAd() triggered AdStopped after "+r+" ms"),e.trigger("AdStopped")}),r)},i}(rr);lo,co=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError","AdAudioDisabled","AdAudioEnabled","AdSizeForceChange","AdLoadedVideoData","AdVideoCompleteTrackOnly","NoAd","AdResumed","AdAudioOnlyStart"],uo=["getAdLinear","getAdWidth","getAdHeight","getAdAspectRatio","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdElapsedTime","getAdVolume","getAdCompanions","getAdIcons","handshakeVersion","resizeAd","startAd","stopAd","pauseAd","resumeAd","expandAd","collapseAd","skipAd","setAdExpanded","setAdSkippableState","setAdVolume","_destroy","getMediaInfo","getDebugInfo","getAdIframes"],go="VpaidMailBlockSitename",po=(null==L||null===(Zi=L.getChildWriter)||void 0===Zi?void 0:Zi.call(L,go))||L,ho={url:null,functionPath:"UTMApi.sitename.getBlockSitename",functionArgs:["ViqeoEmbedSlot"],searchParam:"sitename"},fo=function(e){var t,r;function i(t){var r;void 0===t&&(t={});var i=t&&t.ancestor&&t.ancestor+":"+go||"Module::VpaidMailBlockSitename";po.trace(i+".constructor() options.ancestor="+i);var o=no(no({},ho),t);return(r=e.call(this,no(no({},o),{},{ancestor:go,logger:po}))||this).VpaidMailBlockSitename=i,r}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,so(t,r),i.prototype.initAd=function(e,t,r,i,o,n){var a=this;void 0===o&&(o={}),void 0===n&&(n={}),this.adLinear=!0,this.adWidth=e,this.adHeight=t,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=0,this.adCompanions="",this.adIcons=!1,this.viewMode=r,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot,this.adDuration=-2,this.options=no(no({},this.options),n.options);var s,d,l=this.creativeData.AdParameters,c=JSON.parse(l),u=c.url,g=void 0===u?this.options.url:u,p=c.functionPath,h=void 0===p?this.options.functionPath:p,f=c.functionArgs,v=void 0===f?this.options.functionArgs:f,m=c.searchParam,A=void 0===m?this.options.searchParam:m;g||this.trigger("AdError","no url passed",D.GENERAL_VPAID_ERROR);try{var b=(d=window.top,h.split(".").reduce((,d)),y=window.encodeURIComponent(String(b.apply(void 0,v))),O=new URL(g);O.search=""===O.search?"?"+A+"="+y:O.search+"&"+A+"="+y,s=O.toString()}catch(e){s=g}if(s){var w=window.top.getVPAIDAd;this.logger.trace("VpaidMailBlockSitename.initAd() spawning new module with dataUrl="+s+" moduleFactory="+w);var E=w(no(no({},this.options),{},{hideTitleControl:!0})),_=no(no({},o),{},{AdParameters:null,dataUrl:s});co.forEach((),uo.forEach((),E.initAd(e,t,r,i,_,n)}else this.trigger("AdError","no new url formed",D.GENERAL_VPAID_ERROR);return Promise.resolve()},i}(Ge),vo=(null==L||null===(lo=L.getChildWriter)||void 0===lo?void 0:lo.call(L,"VpaidCreateProvider"))||L;window.getVnVPAIDAdProvider=function(e){return e||e.vnVpaidProvider?(vo.log("Requested vpaid provider instance via window.getVnVPAIDAdProvider()"),function(e){switch(e.vnVpaidProvider&&e.vnVpaidProvider.toLowerCase()){case"ivi":return new jt(e);case"sj":return new kt(e);case"iframe":return new Jt(e);case"google":return new Zr(e);case"googleima":return new hi(e);case"yandex_context":return new Ri(e);case"yandex":return new wi(e);case"html":return new ur(e);case"externaljs":return new zr(e);case"adfox":return new Er(e);case"roxot":return new Ui(e);case"adform":return new io(e);case"mailblocksitename":return new fo(e);default:throw Error("createProvider() Unknown value options.vnVpaidProvider="+e.vnVpaidProvider)}}(e)):(vo.error("vnVpaidProvider was not specified"),null)}})();