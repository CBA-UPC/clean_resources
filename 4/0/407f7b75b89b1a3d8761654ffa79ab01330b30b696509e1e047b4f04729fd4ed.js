(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[8242],{10793:(t,e,n)=>{"use strict";n.d(e,{f:()=>c});var a=n(76955),i=n(52377),o=n(5154),r=n.n(o),s=n(54285);class c extends a.PureComponent{constructor(t){super(t),this.handleClick=this.handleClick.bind(this),this.handleInview=this.handleInview.bind(this),this.startListen=this.startListen.bind(this),this.stopListen=this.stopListen.bind(this),this.inviewTracked=!1,this.tapTracked=!1}static get defaultProps(){return{activate:["tap"],algorithmId:"",bloggerAmebaId:"",categories:[],categoryId:"",subCategoryId:"",children:null,contentId:"",disable:!1,displayPosition:"",entryId:"",orderId:"",pageId:"",sectionId:"",serviceId:"",tagName:"",tapLogger:r(),viewLogger:r()}}componentDidMount(){this.startListen()}componentDidUpdate(){this.startListen()}et params(){var{algorithmId:t,bloggerAmebaId:e,categoryId:n,subCategoryId:a,contentId:i,displayPosition:o,pageId:r,entryId:s,orderId:c,sectionId:d,serviceId:p,tagName:m}=this.props;return{algorithmId:t,bloggerAmebaId:e,categories:this.props.categories.filter((),categoryId:n,subCategoryId:a,contentId:i,displayPosition:o,pageId:r,entryId:s,orderId:c,sectionId:d,serviceId:p,tagName:m}}startListen(){-1===this.props.activate.indexOf("view")||this.inviewTracked||(c.intersectionListener||(c.intersectionListener=(0,s.T)({})),this.stopListen(),this.trigger=i.findDOMNode(this),this.trigger&&!this.unlisten&&(this.unlisten=c.intersectionListener.listen(this.trigger,(t=>{(t.isIntersecting||t.intersectionRatio>0)&&(this.stopListen(),this.handleInview())}))))}andleClick(t){var e=a.Children.only(this.props.children).props.onClick;e&&e(t),this.props.tapLogger(this.params)}ender(){if(this.props.disable)return this.props.children;var t=this.props.children;return-1!==this.props.activate.indexOf("tap")&&(t=a.cloneElement(t,{onClick:this.handleClick})),t}}c.displayName="Tracker"},85287:33811:(t,e,n)=>{"use strict";n.d(e,{uw:()=>_,x0:()=>C});var a=n(41185),i=n(66062),o=n(18274),r=n(55752),s=n.n(r),c=n(5663),d=n.n(c),p=n(74890),m=n.n(p),l=n(62720),u=n(64123),g=n(11622),h=n(18966),b=n(41779);r I=[l.Z.REBLOG,l.Z.HASH_TAG,l.Z.IMAGE,l.Z.VIDEO,l.Z.CLIPBLOG,l.Z.VOICE_BLOG,l.Z.PR,l.Z.AUTO_AD],k=f=(t,e,n)=>({type:h.V7,payload:{blogId:t,entryId:e,error:n},error:!0}),C=(0,o.H)((function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;return function(){var o=(0,i.Z)((function*(i,o,r){var{fetchr:c}=r,p=m()(I.concat(n)),l=s()(o(),["bloggerState","blogMap",t,"blog_name"],"");if(!l||!e)return null;var b=s()(o(),["entryState","entryMetaMap",e],null),v=s()(b,"pagingType",void 0),C=a===v,_=s()(o(),["entryState","entryMap",e],null);if(b&&C&&_&&(!d()(_.entry_text)||404===_.status_code))return null;try{i({type:h.Gh,payload:{blogId:t,entryId:e,fieldFilter:p,frm:a}});var x={amebaId:l,blogId:t,entryId:e,fieldFilter:p,frm:a},Z=yield c.read(u.Z.BlogEntry).params(x).end(),L=Z.data;if(!(!1!==o().deviceState.isEmojiSupported)&&L.entities&&L.entities.entryMap)try{L=y(y({},L),{},{entities:y(y({},L.entities),{},{entryMap:yield(0,g.R9)(L.entities.entryMap)})})}catch(P){console.warn(P),L=Z.data}return i(k(t,e,L,a))}catch(N){return i(f(t,e,N))}}));return ()})),_=(0,o.H)(((t,e)=>function(){var n=(0,i.Z)((function*(n,a){var i=s()(a(),["bloggerState","blogMap",t,"blog_name"],"");if(!i||!e)return null;var o=s()(a(),["entryState","entryMap",e],null);if("amember"!==o.publish_flg||o&&(o.entry_text||404===o.statusCode))return null;try{n({type:h.tB,payload:{entryId:e}});var r={token:s()(a(),["amebloTokenState","amebloToken"],null),amebaId:i,entryId:parseInt(e,10)},c=yield(0,b.s)(r);return n(((e,c))}catch(d){return n(((t,e)=>({type:h.Ny,payload:{entryId:t,error:e},error:!0}))(e,d))}}));return ()))},83438:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:);var a,i,o,r,s,c,d,p,m,l,u,g,h,b,v=n(3e4),y=n(66062),I=(n(91938),n(76955)),k=n(29466),f=n.n(k),C=n(55382),_=n.n(C),x=n(97175),Z=n(66948),L=n(45525),P=n(29842),N=n(85287),O=n(73614),w=n(33811),M=n(9263),S=n(5563),T=n(51650),j=n(18318),A=n.n(j),E=n(72591),D=n(30657),H=n(50412),B=n.n(H),W=n(48516),R=(0,L.w1)(B())((o=i=class extends I.Component{shouldComponentUpdate(t){return this.props.amebaId!==t.amebaId||this.props.dispCommentNo!==t.dispCommentNo||this.props.isActive!==t.isActive||this.props.onClick!==t.onClick||!f()(this.props.comment,t.comment)}render(){var{amebaId:t,comment:e,dispCommentNo:n,onClick:a,isActive:i}=this.props;if(!e)return null;var o=e.comment_title||"\u7121\u984c",s=e.comment_text||"",c=e.comment_url?(0,v.Z)(W.Z,{rel:"noopener noreferrer nofollow",target:"_blank",targetUrl:e.comment_url},void 0,e.comment_name):e.comment_name,d=(0,D.TA)(1,e.ins_datetime);"accept"!==e.comment_add_flg&&(o="",c="",d="");var p=(e.comment_url?E.parse(e.comment_url).path:"").startsWith("/".concat(t,"/"));return(0,v.Z)("li",{className:_()(i&&"is-active")},void 0,(0,v.Z)("a",{className:"js-commentId",id:"c".concat(e.comment_id),name:"c".concat(e.comment_id)}),(0,v.Z)("div",{className:_()({"skin-bgQuiet":p,"is-owner":p}),"data-uranus-component":"commentOwner"},void 0,(0,v.Z)("div",{className:"skin-comment skin-borderQuiet","data-uranus-component":"comment"},void 0,(0,v.Z)("p",{"data-uranus-component":"commentNum"},"commentNum",n),"\u7121\u984c"!==o&&(0,v.Z)("p",{"data-uranus-component":"commentTitle"},"commentTitle",o),(0,v.Z)("div",{dangerouslySetInnerHTML:{__html:s},"data-uranus-component":"commentText"}),(0,v.Z)("p",{"data-uranus-component":"commentAuthor"},"commentAuthor",c),(0,v.Z)("p",{className:"skin-textQuiet","data-uranus-component":"commentDatetime"},"commentDatetime",d),(0,v.Z)("p",{className:"skin-textQuiet","data-uranus-component":"commentAction"},"commentAction","accept"===e.comment_add_flg&&(0,v.Z)("a",{className:_()(B().Link,"commentReply","commentWinOpenBtn"),"data-cid":e.comment_id,href:"",role:"button",onClick:a},void 0,r||(r=(0,v.Z)("span",{"data-uranus-icon":"reply hasLabel"})),"\u8fd4\u4fe1\u3059\u308b")))))}},i.displayName="PcEntryDetailCommentListItemUranus",a=o))||a,U=n(10793);function q(){return(q=(0,y.Z)((function*(t){var{dispatch:e,getState:n,match:a,location:i}=t,{params:o}=a,r=o.amebaId,s=yield e((0,O.Rs)(r));if(!s||!s.error){var c=n().bloggerState,d=c.bloggerMap,p=c.blogMap[(d[r]||{}).blog];if(p&&p.blog_id){var m=o.entryId,{frm:l}=i.query;yield e((0,w.x0)(p.blog_id,m,[],l))}}}))).apply(this,arguments)}function G(){return(G=(0,y.Z)((function*(t){var{dispatch:e,getState:n,match:a}=t,{params:i}=a,o=i.amebaId,r=n().bloggerState,s=r.bloggerMap,c=r.blogMap[(s[o]||{}).blog];if(c&&c.blog_id){var d=n().entryState.entryMap,p=i.entryId,m=d[p]||{};if(m.entry_id&&m.entry_text)if((0,P.M)(c,m).canComment){yield e((0,M.u1)({blogId:c.blog_id,entryId:p,excludeReplies:!1,offset:0,limit:50,currentPage:1}))}}}))).apply(this,arguments)}var Q=(0,T.lB)(["match","location"])(s=(0,Z.$j)((function(t,e){var{match:n,location:a}=e,{params:i,route:o}=n,r=i.amebaId,s=i.entryId,c=o.pageType,d=a.hash||"",p=t.entryState,m=t.bloggerState,l=t.commentState,u=m.bloggerMap,g=m.blogMap,h=p.entryMap,b=u[r]||{},v=(b.attribute||{}).isOfficial,y=h[s]||{},I=g[b.blog]||{},k=I.blog_id||"",f=l.commentPageMap.currentPage||1,C=l.commentPageMap["".concat(y.entry_id,"/").concat(f)]||{},_=C.data||[],x=l.commentMap||{},Z=_.map((),L=C.paging||{},N=L.total_count||0,O=!(0,P.M)(I,y).canComment;return{amebaId:r,blogId:k,commentCount:N,comments:Z,denyComment:O,entry:y,entryId:s,isOfficial:v,loading:!O&&void 0===C.loading,locationHash:d,pageType:c,paging:L}}),{fetchCommentsRequest:M.u1,trackTapLog:S.XI})(s=(0,x.provideHooks)({defer:function(t){return q.apply(this,arguments)},done:)(s=(0,L.w1)(A())((d=c=class extends I.Component{omponentDidMount(){setImmediate((()=>{this.moveToCommentArea()}))}shouldComponentUpdate(t){return this.props.amebaId!==t.amebaId||this.props.blogId!==t.blogId||this.props.commentCount!==t.commentCount||this.props.denyComment!==t.denyComment||this.props.entryId!==t.entryId||this.props.fetchCommentsRequest!==t.fetchCommentsRequest||this.props.isOfficial!==t.isOfficial||this.props.loading!==t.loading||this.props.locationHash!==t.locationHash||this.props.pageType!==t.pageType||this.props.trackTapLog!==t.trackTapLog||!f()(this.props.comments,t.comments)||!f()(this.props.paging,t.paging)}oveToCommentArea(){"#cbox"===this.props.locationHash&&this.comentArea&&this.comentArea.scrollIntoView()}handleClickPaging(t){t.preventDefault();var{blogId:e,entryId:n}=this.props,a=t.target.getAttribute("data-link-page");null==a&&(a=t.target.parentElement.getAttribute("data-link-page"));var i=!a||parseInt(a,10)<1?1:a,o=!i||i<1?0:50*(i-1);this.props.fetchCommentsRequest({blogId:e,entryId:n,excludeReplies:!1,offset:o,limit:50,currentPage:i});var r=document.getElementById("commentsHeader");if(r){var s=document.getElementById("ambHeader"),c=s?s.clientHeight:N.S,d=window.pageXOffset||document.documentElement.scrollLeft;window.scroll(d,r.offsetTop-c)}}handleClickMoreLink(){this.moreLink.classList.add("is-hidden"),this.moreLink.parentElement.parentElement.querySelector("#commentsList").classList.remove("is-collapsed"),this.moreLink.parentElement.parentElement.querySelector("#commentsList > li").classList.remove("is-active"),this.props.commentCount>50&&this.moreLink.parentElement.parentElement.querySelector("#indexPagination").classList.remove("is-hidden")}handleClickPostComment(t){if(t.preventDefault(),"undefined"!=typeof window){var{amebaId:e,entryId:n}=this.props,a=t.target.getAttribute("data-cid"),i="".concat(window.process.env.HTTP_PATH_COMMENT_AMEBA,"/form?eid=").concat(n,"&bnm=").concat(e);a&&(i="".concat(i,"&cid=").concat(a));var o={width:536,height:675,scrollbars:"yes",resizable:"yes"};window.open(i,"childWindow",Object.keys(o).map(().join(","))}}renderCommentList(){var{amebaId:t,commentCount:e,comments:n,paging:a}=this.props,i=e-50*(a.current_page-1),o=n.map(((e,n)=>(0,v.Z)(R,{amebaId:t,comment:e,dispCommentNo:i-n,isActive:n<3,onClick:this.handleClickPostComment},"comment_".concat(e.comment_id))));return(0,v.Z)("ul",{className:"is-collapsed","data-uranus-component":"commentsList",id:"commentsList"},"commentsList",o)}renderMoreLink(){return(0,v.Z)("p",{className:"skin-borderLoud","data-uranus-component":"commentsMore"},"commentsMore",this.props.commentCount>=4&&I.createElement("button",{className:"skin-textQuiet","data-uranus-component":"commentsMoreButton",ref:t=>{this.moreLink=t},onClick:this.handleClickMoreLink},"\u3082\u3063\u3068\u898b\u308b"," ",p||(p=(0,v.Z)("span",{className:"skin-textQuiet","data-uranus-icon":"more medium"}))))}renderPaging(){var{paging:t}=this.props;return(0,v.Z)("div",{"data-uranus-component":"commentsListPageing"},"paging",(0,v.Z)("div",{className:"skin-pagination is-hidden","data-uranus-component":"pagination",id:"indexPagination"},void 0,(0,v.Z)("ul",{className:"skin-paginationPrevs","data-uranus-component":"paginationPrevs"},"paginationPrevs",(0,v.Z)("li",{},"paginationStart",(0,v.Z)("a",{className:_()(A().Link,"skin-paginationStart","skin-btnIndex","js-paginationStart",1===t.current_page&&"is-disabled"),"data-link-page":"1","data-uranus-component":"paginationStart",role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,m||(m=(0,v.Z)("span",{"data-uranus-icon":"start large"})))),(0,v.Z)("li",{},"paginationPrev",(0,v.Z)("a",{className:_()(A().Link,"skin-paginationPrev","skin-btnIndex","js-paginationPrev",1===t.current_page&&"is-disabled"),"data-link-page":t.current_page-1,"data-uranus-component":"paginationPrev",role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,l||(l=(0,v.Z)("span",{"data-uranus-icon":"previous large"}))))),(0,v.Z)("ul",{className:"skin-paginationNexts","data-uranus-component":"paginationNexts"},"paginationNexts",(0,v.Z)("li",{},"paginationNext",(0,v.Z)("a",{className:_()(A().Link,"skin-paginationNext","skin-btnIndex","js-paginationNext",t.current_page===t.max_page&&"is-disabled"),"data-link-page":t.current_page+1,"data-uranus-component":"paginationNext",role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,u||(u=(0,v.Z)("span",{"data-uranus-icon":"next large"})))),(0,v.Z)("li",{},"paginationEnd",(0,v.Z)("a",{className:_()(A().Link,"skin-paginationEnd","skin-btnIndex","js-paginationEnd",t.current_page===t.max_page&&"is-disabled"),"data-link-page":t.max_page,"data-uranus-component":"paginationEnd",role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,g||(g=(0,v.Z)("span",{"data-uranus-icon":"end large"}))))),(0,v.Z)("ul",{className:"skin-paginationNums","data-uranus-component":"paginationNums"},"paginationNums",(0,v.Z)("li",{className:_()("js-paginationIndexPrev",t.current_page-2<=1&&"is-hidden")},"paginationIndexPrev","\u2026"),(0,v.Z)("li",{},"paginationIndex1",(0,v.Z)("a",{className:_()(A().Link,"skin-btnIndex","js-paginationIndex1",(1===t.current_page||2===t.current_page)&&"is-unassigned"),"data-link-page":t.current_page-2,"data-number":t.current_page-2,role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,t.current_page-2)),(0,v.Z)("li",{},"paginationIndex2",(0,v.Z)("a",{className:_()(A().Link,"skin-btnIndex","js-paginationIndex2",1===t.current_page&&"is-unassigned"),"data-link-page":t.current_page-1,"data-number":t.current_page-1,role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,t.current_page-1)),(0,v.Z)("li",{},"paginationIndex3",(0,v.Z)("a",{className:_()(A().Link,"skin-btnIndex","js-paginationIndex3","is-active"),"data-link-page":t.current_page,"data-number":t.current_page,role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,t.current_page)),(0,v.Z)("li",{},"paginationIndex4",(0,v.Z)("a",{className:_()(A().Link,"skin-btnIndex","js-paginationIndex4",t.current_page===t.max_page&&"is-unassigned"),"data-link-page":t.current_page+1,"data-number":t.current_page+1,role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,t.current_page+1)),(0,v.Z)("li",{},"paginationIndex5",(0,v.Z)("a",{className:_()(A().Link,"skin-btnIndex","js-paginationIndex5",(t.current_page===t.max_page-1||t.current_page===t.max_page)&&"is-unassigned"),"data-link-page":t.current_page+2,"data-number":t.current_page+2,role:"button",tabIndex:"0",onClick:this.handleClickPaging},void 0,t.current_page+2)),(0,v.Z)("li",{className:_()("js-paginationIndexNext",t.current_page+2>=t.max_page&&"is-hidden")},"paginationIndexNext","\u2026"))))}renderPostCommentButton(){return(0,v.Z)("div",{"data-uranus-component":"mainWidgetFooter"},"mainWidgetFooter",h||(h=(0,v.Z)("a",{id:"cform",name:"cform"})),(0,v.Z)(U.f,{pageId:this.props.pageType,sectionId:"comment_lower",serviceId:this.props.isOfficial?"official":"general",tapLogger:this.props.trackTapLog},void 0,(0,v.Z)("button",{className:_()(A().Link,"skin-btnPrimary","commentWinOpenBtn"),"data-uranus-component":"button",type:"button",onClick:this.handleClickPostComment},void 0,b||(b=(0,v.Z)("span",{"data-uranus-icon":"comment large hasLabel"})),"\u30b3\u30e1\u30f3\u30c8\u3059\u308b")))}render(){var{denyComment:t,comments:e,commentCount:n}=this.props;return t||!e||n<=0||e.length<=0?null:(0,v.Z)("div",{"data-uranus-component":"mainWidget"},void 0,(0,v.Z)("div",{"data-uranus-component":"mainWidgetAnchor"},"mainWidgetAnchor",I.createElement("a",{id:"cbox",name:"cbox",ref:tabIndex:"-1"})),(0,v.Z)("div",{className:"skin-mainWidgetTitle skin-borderLoud","data-uranus-component":"mainWidgetHeader",id:"commentsHeader"},"commentsHeader",(0,v.Z)("h4",{},void 0,"\u30b3\u30e1\u30f3\u30c8","\uff08".concat(n,"\uff09"))),(0,v.Z)("div",{"data-uranus-component":"mainWidgetBody"},"mainWidgetBody",(0,v.Z)("div",{"data-uranus-component":"comments"},void 0,this.renderCommentList(),(0,v.Z)("input",{id:"js-commentCount",type:"hidden",value:n},"commentCount"),this.renderMoreLink(),this.renderPaging())),this.renderPostCommentButton())}},c.displayName="PcEntryDetailCommentListUranus",s=d))||s)||s)||s)||s},74890:8737:(t,e,n)=>{var a=n(18300)((function(t){return t[1]}));a.push([t.id,"._2_pUl8Sp{cursor:pointer}",""]),a.locals={Link:"_2_pUl8Sp"},t.exports=a},2216:(t,e,n)=>{var a=n(18300)(();a.push([t.id,"._il4exTcg{cursor:pointer;outline-offset:3px}",""]),a.locals={Link:"_il4exTcg"},t.exports=a},50412:(t,e,n)=>{var a=n(8737),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},o=Object.defineProperty||function(t,e,n){t[e]=n.value};"string"==typeof a&&(a=[[t.id,a,""]]),t.exports=function(t){var e=i({},t.locals||{});return o(e,"_",{value:function(){return t}}),o(e,"toString",{value:function(){return"function"==typeof t.toString?t.toString():""}}),e}(a)},18318:(t,e,n)=>{var a=n(2216),i=Object.assign||o=Object.defineProperty||"string"==typeof a&&(a=[[t.id,a,""]]),t.exports=function(t){var e=i({},t.locals||{});return o(e,"_",{value:),o(e,"toString",{value:function(){return"function"==typeof t.toString?t.toString():""}}),e}(a)}}]);