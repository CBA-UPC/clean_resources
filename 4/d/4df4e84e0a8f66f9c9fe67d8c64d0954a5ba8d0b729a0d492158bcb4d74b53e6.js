//tag 9.1.0 15/01/2024
var panierTransverse;(()=>{var e={669:448:609:263:972:502:321:782:97:61:572:481:185:26:527:655:849:327:303:372:793:268:985:16:109:713:867:954:,t={};.d=i.o=i.r=var n={};(()=>{"use strict";i.r(n),i.d(n,{addAccessory:()=>ta,addDevice:()=>ea,addInsurance:()=>na,addOffer:()=>Kr,addOption:()=>ia,changePortability:()=>$r,changeSim:()=>Zr,close:()=>Yr,get:()=>ba,init:()=>va,isInit:()=>pa,open:()=>Qr,refreshEligibility:remove:()=>aa,setEligibility:()=>fa,setLine:()=>ma});const e={env:null,proxyLS:!1,LSsync:!0,dataLS:{},root:null,template:null,mainContainer:null,emptyBasket:null,content:null,receipt:null,smallReceipt:null,toastr:null,spinner:null,popinContainer:null,popin:null,initialized:!1,open:!1,actionInProgress:!1,basket:null,warnings:null,offersFixe:null,offersMobile:null,devicesPrices:null,dgDevicesPrices:null,groupId:null,devices:null,accessories:null,accessoriesByGroup:null,clientInfos:null,options:null,consentedOptions:null,newAccessoriesListBySapCodes:null,brand:"SFR",basketId:null,line:null,changeLine:!1,accessToken:null,idEligibility:null,openToggleMobile:null,openToggleFixe:null,openToggleAccessory:null,putAdded:!1,lineSeted:!1,eTagActionContext:null,isAuthenticate:!1,toggleClicked:!1,scrollId:null,isBack:!1,stepper:null,hasNetflixAdaptator:!1,activateReprise:null,buyBackRecord:null,optsEquipFixAdded:!1,fixeOfferCode:null,openOnChange:!1,firstAdd:!1,optionConstants:null,offers:null,accessoriesQuantity:0,pushConfig:{keepPushGen8Offer:!1}};var t=[{code:"gen7",realOptionCodes:["gen7"],name:"BOX PLUS de SFR",lines:["Wifi 5","Image 4K"],logoPictureUrl:"/cdn/assets/images/png/Box_Gen-7.png",subLabel:"Par défaut dans les offres",forceDetailUrl:"offre-internet/box-internet",secondaryDetailUrl:null,included:!0,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"STB7",realOptionCodes:["STB7"],name:"Décodeur PLUS de SFR",description:"Image 4K haute définition, télécommande vocale et disque dur numérique. Compatible Netflix.",frequency:"RECURRENT",logoPictureUrl:"/cdn/assets/images/png/decodeur_gen7.png",subLabel:"",forceDetailUrl:"offre-internet/box-internet",secondaryDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"GEN8",realOptionCodes:["NB8_THD"],name:"SFR BOX 8",lines:["Wifi 6 (dernière génération)","Image 4K HDR Dolby Vision Atmos","Audio compatible Dolby Atmos","Assistant vocal intégré"],price:7,frequency:"RECURRENT",logoPictureUrl:"/cdn/assets/images/png/box_gen8.png",isDevice:!0,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"STB8",realOptionCodes:["STB8"],name:"SFR BOX 8 TV",description:'Image 4K HDR et compatible Dolby Vision, audio compatible Dolby Atmos et enceinte connectée avec 2 haut-parleurs en stéréo. Assistant vocal "OK SFR". Disque dur numérique.',frequency:"RECURRENT",logoPictureUrl:"/cdn/assets/images/png/decodeur_gen8.png",subLabel:"Inclus par défaut avec la Gen8",forceDetailUrl:"offre-internet/box-internet",secondaryDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"v3",realOptionCodes:["v3"],name:"Box PLUS de SFR",description:"Connexion Internet ADSL et VDSL en filaire ou en WiFi 5, connexion au décodeur possible en WiFi.",logoPictureUrl:"/cdn/assets/images/png/Box_Gen-7.png",subLabel:"Box PLUS de SFR est inclus par défaut dans tous les forfaits.",forceDetailUrl:"offre-internet/box-internet",secondaryDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"4K",realOptionCodes:["4K"],name:"Box 4K",lines:["Wifi 5","Image 4K"],logoPictureUrl:"//static.s-sfr.fr/media/box_4k.png",subLabel:"Par défaut dans les offres",forceDetailUrl:"offre-internet/box-internet",secondaryDetailUrl:null,included:!0,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"4G",realOptionCodes:["4G+"],name:"Box 4G+",description:"Accès internet en Très haut Débit à des vitesses atteignant 220 Mbits/s, en filaire ou en WiFi, jusqu'à 4 appareils en simultané, 200Go d’Internet inclus.",logoPictureUrl:"/cdn/assets/images/png/lp-4gbox-plus.png",subLabel:"Inclus par défaut dans tous les forfaits",forceDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"aideCNT",realOptionCodes:["aideCNT"],name:"Box 4G+",description:"Je certifie sur l'honneur n'avoir jamais bénéficié de cette subvention de l'Etat.",logoPictureUrl:"",forceDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"REM_REFACTION",realOptionCodes:["REM_REFACTION"],name:"Remise contrat collectif",description:"Remise contrat collectif",logoPictureUrl:"",forceDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"module-sfr",realOptionCodes:["MODULE_SFP_8"],name:"Module SFR BOX 8X",logoPictureUrl:"//static.s-sfr.fr/media/module-box-8.jpg",forceDetailUrl:null,type:"FIXE",metaCategory:"META-SFR-FIXE-SURCAT-1-TELCO"},{code:"sfr-box8-fibre",name:"SFR Box 8X",logoPictureUrl:"//static.s-sfr.fr/media/box8-64x64-1.png",description:"WiFi 6",type:"FIXE"},{code:"sfr-box8-tv",name:"SFR Box 8 TV",logoPictureUrl:"//static.s-sfr.fr/media/decodeur8-64x64-1.png",description:"Image 4K HDR, Dolby Vision, Dolby Atmos, enceinte connectée, assistant vocal",type:"FIXE"},{code:"connect-tv-sfr",name:"Connect TV Android",logoPictureUrl:"//static.s-sfr.fr/media/connecttv-64x64-1.png",description:"Image 4K HDR, Dolby Vision, Dolby Atmos",type:"FIXE"}],o=["aideCNT","REM_REFACTION","listerouge","module-sfr","remise-promo24mois","internet-garanti","repeteur-wifi","repeteur-wifi6","disneyplus-sfr-divertissement-BUNDLE-LEG","netflix-sfr-divertissement-BUNDLE-LEG","netflix-disney-sfr-divertissement","sfr-box8-fibre","sfr-box8-tv","connect-tv-sfr","disneyplus-bouquet-famille-bundle-leg-9mois","prime-video-9mois","prime-video-6mois","netflix-pub-bouquet-famille","dazn","internet-raccordement"],r=["aideCNT","REM_REFACTION","listerouge","sfr-box8-fibre","sfr-box8-tv"];function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var s=i(954),c=new DOMParser;function l(e,t){if(e&&t){var i=!0;for(var n in e)if(e[n]!==t[n]){i=!1;break}return i}return!1}function u(t){console.log("notifSynchroLS: "+t),e.LSsync=t}function d(t){return e.proxyLS&&e.dataLS[t]?e.dataLS[t]:localStorage.getItem(t)}function f(t,i){if(e.proxyLS){var n=document.getElementById("_iPt"),o={a:"S"};o.n=t,o.v=i,n.contentWindow.postMessage(o,"*")}localStorage.setItem(t,i)}function p(t){if(e.proxyLS){var i=document.getElementById("_iPt"),n={a:"R"};n.n=t,i.contentWindow.postMessage(n,"*")}else localStorage.removeItem(t)}function m(e){var t={á:"a",é:"e",è:"e",ê:"e",í:"i",î:"i",ó:"o",ô:"o",ú:"u"};if(!e)return"";for(var i="",n=0;n<e.length;n++.toUpperCase()+e.slice(1).toLowerCase()}const v={isEligibleForBox4GSubvention:function(e){if("SFR"==e){var t=JSON.parse(d("eligibilityResult"));if(t){if(t.eligibilityResult&&t.eligibilityResult.installationBOXM&&t.eligibilityResult.installationBOXM.boxmLineType&&t.eligibilityResult.installationBOXM.boxmLineType.eligibilityCriterias&&t.eligibilityResult.installationBOXM.boxmLineType.eligibilityCriterias.length>0){var i=t.eligibilityResult.installationBOXM.bn"subvention"===e.key&&"true"===e.value}));return void 0!==i&&i.length>0}if(t.isSubvention)return t.isSubvention}}return!1},loadEnvConfiguration:function(){"localhost"==location.hostname?e.env=s.LOCAL:location.hostname.includes("cms.")?e.env=s.CMS:location.hostname.startsWith("futpsw.")?e.env=s.FUTPSW:location.hostname.endsWith("pfv.sfr.fr")?e.env=s.IPP:e.env=s.PROD,window._PTenv=e.env},parseTemplate:function(e){return c.parseFromString(e,"text/html")},parseHTML:function(e){return c.parseFromString(e,"text/html").body.childNodes[0]},getStoredBasketId:function(e){return d("_PTn(e){return d("_PT.".concat(e,".line"))},setStoredBasketId:function(e,t){null!=t?f("_PT.".concat(e,".basketId"),t):p("_PT.".concat(e,".basketId"))},setStoredLine:function(e,t){null!=t?f("_PT.".concat(e,".line"),t):p("_PT.".ken:function(){return d("access_token")},getIdEligiblity:function(e){if("SFR"==e){var t=JSON.parse(d("eligibilityResult"));if(t&&t.eligibilityResult)return t.eligibilityResult.apiRequestId}},getIdEligiblityDmgt:function(e){if("SFR"==e){var t=JSON.parse(d("eligibilityResultDmgt"));if(t&&null!=t&&t.idEligibility)return null==t?void 0:t.idEligibility}},setStoredPushConfig:function(e,t){f("_PT.".concat(e,".pushConfig"),JSON.stringify(t))},getStoredPushConfig:function(e){return d("_PT.".concat(e,".pushConfig"))?JSON.parse(d("_PT.".concat(e,".pushConfig"))):""},createTitle:function(e,t,i){var n=document.createElement(e);return n.classList.add(t),n.innerHTML=i,n},asNormalizedId:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="-";return void 0!==t&&!1!==t||(i=""),e?m(e).toLocaleLowerCase().replace(/ /g,i).replace(/\+/g,"plus").replace(/&/g,"et").replace(/\*/g,"star").repl/"+(t.getMonth()+1)+"/"+t.getFullYear()},initLShandler:function(){if("www.sfr.fr"!=window.location.hostname&&"cms.sfr.fr"!=window.location.hostname&&"www.pfv.sfr.fr"!=window.location.hostname&&"futpsw.sfr.fr"!=window.location.hostname)return new Promise((function(t,i){var n=document.createElement("iframe");n.style.display="none",n.id="_iPt",n.src=e.env.endpoints.lsHelper,document.body.appendCh,initDataLS:function(t,i){e.dataLS[t]=i},smartLSSet:f,smartLSGet:d,smartLSRm:p,notifo.substring(t.length,o.length)}return""}("eTab"+e)||"1"},isReload:function(){return window.performance.navigation&&1===window.performance.navigation.type||window.performance.getEntriesByType("navigation").map((function(e){return e.type})).includes("reload")},setStepper:function(t){e.stepper||(e.stepper=[0]),e.stepper.includes(t)||e.stepper.push(t)},getStars:function(e){var t=[1,2,3,4,5];t=t.map((function(t){return e>=t?1:0}));var i=Math.trunc(e);return e-i>0&&(t[i]=.5),tnction(e,t){retsort((funct+33 )([1-5]|[8-9])([-. ]?[0-9]{2}){4}/)},getStorageData:function(e,t,i){var n=window.newSfrAPIs;return function(e,t){var i;if(e&&t){var n,o=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw r}}}}(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(r.url===t.url&&l(t.params,r.params)){i=r.data;break}}}catch(e){o.e(e)}finally{o.f()}}return i}(n?n[e]:void 0,{url:t,params:i})},setTitleBasedOnDeviceType:function(t,i){switch(e.basket.fixe.mainDevice.type){case"TV":return"".concat(t.brandLabel," ").concat(i.model," ").concat((null==i?void 0:i.modelLabel.split(" ").pop())+"''"||0);case"PROJECTEUR":return i.modelLabel;case"PC":return"".concat(t.brandLabel," ").concat((null==i?void 0:i.modelLabel.split(" ").pop())||"");case"CONSOLE":return"Sony ".concat(null==i?void 0:i.modelLabel);case"TABLETTE":return"".concat(b(t.brandLabel)," ").concat(i.modelLabel);default:return"".concat(t.brandLabel," ").concat(i.modelLabel)}},capitalizeFirstLetter:b};function y(e,t){return v.asNormalizedId("".concat(e.brandLabel,"-").concat(e.label,"-").concat(t.properties.color.marketingLabel,"-").concat(t.properties.memoryCapacity).concat("RECONDITIONNE"!=e.properties.state||e.brandLabel.toLowerCase().includes("reconditionné")?"":"-reconditionne"))}const h=function(t){return t=t.replace(/https:\/\/(www|cms).sfr.fr/g,""),"".concat(e.env.redirectionRootPaths[e.brand]).concat(t)},g=function(t){return t?"".concat(e.env.redirectionRootPaths[e.brand],"/offre-mobile/").concat(v.asNormalizedId(t)):"".concat(e.env.redirectionRootPaths[e.brand],"/offre-mobile")},k=function(t){return t?"".concat(e.env.redirectionRootPaths[e.brand],"/offre-internet/").concat(v.asNormalizedId(t)):"".concat(e.env.redirectionRootPaths[e.brand],"/offre-internet")},S=function(t,i){return"".concat(e.env.redirectionRootPaths[e.brand],"/").concat(y(t,i))},P=function(t,i,n){var o=n.properties&&n.properties.screenSize?n.properties.screenSize:i.properties.screenSize;return"TV"==t?"".concat(e.env.redirectionRootPaths[e.brand],"/boxtv/").concat(v.asNormalizedId(i.brandLabel+"-tv-"+n.model+"-"+o)):"CONSOLE"==t?"".concat(e.env.redirectionRootPaths[e.brand],"/box-console/").concat(v.asNormalizedId(i.brandLabel+"-"+n.modelLabel.replace(/ /g,"-"))):"PROJECTEUR"==t?"".concat(e.env.redirectionRootPaths[e.brand],"/boxtv/videoprojecteur-the-freestyle"):void 0},E=function(e){return"/offre-zedId(e))},M=function(e,t){return y(e,t)},D=function(e,t,i){var n=i.properties&&i.properties.screenSize?i.properties.screenSize:t.properties.screenSize;return"TV"==e?"/boxtv/".concat(v.asNormalizedId(t.brandLabel+"-tv-"+i.model+"-"+n)):"CONSOLE"==e?"/box-console/".concat(v.asNormalizedId(t.brandLabel+"-"+i.modelLabel.replace(/ /g,"-"))):"PROJECTEUR"==e?"/boxtv/videoprojecteur-the-freestyle":void 0},L=function(e,t){if(t.brandLabel&&t.label&&e.properties.color&&e.properties.memoryCapacity){var i=v.asNormalizedId(t.brandLabel),n=v.asNormalizedId(t.label).replace(/-/g,""),o=v.asNormalizedId(e.properties.color.marketingLabel),r=v.asNormalizedId(e.properties.memoryCapacity);return"/".concat(i,"-").concat(n,"-").concat(o,"-").concat(r).concat(e.reconditionned&&!["IPHONE RECONDITIONNE","SAMSUNG RECONDITIONNE"].includes(t.brandLabel)?"-reconditionne":"")}var a=v.asNormalizedId(t.label.replace(/-/g,""));return"iphonereconditionne"===v.asNormalizedId(t.brandLabel)||"samsungreconditionne"===v.asNormalizedId(t.brandLabel)?"/".concat(v.asNormalizedId(t.brandLabel),"-").concat(a):"/".concat(v.asNormalizedId(t.brandLabel),"-").concat(a).concat(t.reconditionned?"-reconditionne":"")},x=function(t){return"".concat(e.env.redirectionRootPaths[e.brand],"/").concat(t)};var A=i(669);const I=function(t){var i,n,o,r,a,s,c=v.getStoredAccessToken()?e.line:void 0,l="".concat(e.env.endpoints["service-offer"],"/").concat(t),u="mobile"===t?{universe:"GP",act:e.line&&!v.isFixeLine(c)?"CHANGE":"OPEN",brand:e.brand,pnm:!1,line:c}:"FIXE_DEMENAGEMENT"===(null==e||null===(i=e.basket)||void 0===i||null===(n=i.fixe)||void 0===n||null===(o=n.offer)||void 0===o?void 0:o.acteDeGestion)?{universe:"GP",act:"OPEN",brand:e.brand,pnf:!1,idElig:v.getIdEligiblityDmgt(e.brand),line:c,migElig:!(!c||!v.isFixeLine(c))||void 0,adg:"FIXE_DEMENAGEMENT",moveDate:null==e||null===(r=e.basket)||void 0===r||null===(a=r.fixe)||void 0===a||null===(s=a.offer)||void 0===s?void 0:s.moveDate}:{universe:"GP",act:e.line&&v.isFixeLine(c)?"CHANGE":"OPEN",brand:e.brand,pnf:!1,idElig:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),line:c,migElig:!(!c||!v.isFixeLine(c))||void 0},d=v.getStorageData("offerInfo",l,u);return d?Promise.resolve(d):A.get(l,{params:u})},q=function(t,i){var n,o=v.getStoredAccessToken()?e.line:void 0,r="".concat(t?e.env.endpoints["service-groupPrices"]:e.env.endpoints["service-devicesprices"]),a={universe:"GP",act:o&&!v.isFixeLine(o)?"CHANGE":"OPEN",brand:e.brand,pnm:!1,pnf:!1,line:o,adg:o?"CQT"===(null===(n=e.basket.mobile)||void 0===n?void 0:n.acteDeGestion)?"VLA,CQT":"RM":void 0};t&&(a.groupId=t),i&&(a.gammeId=i);var s=v.getStorageData(t?"groupPrices":"devicePrices",r,a);return s?Promise.resolve(s):A.get(r,{params:a})};function R(e){switch(e){case"CQT":case"FIXE_VLAG_LCA_ABO":return"MIG";default:return e}}const O=function(t){return e.offersMobile&&"mobile"===t||e.offersFixe&&"fixe"===t?Promise.resolve():new Promise((function(i,n){I(t).then((function(n){var o,r,a,s;"fixe"===t?e.offersFixe=null!==(o=null===(r=n.data)||void 0===r?void 0:r.data)&&void 0!==o?o:n.data:e.offersMobile=null!==(a=null===(s=n.data)||void 0===s?void 0:s.data)&&void 0!==a?a:n.data,i()}),(function(){i()}))}))},w=function(t,i){return e.devicesPrices&&!t||e.dgDevicesPrices&&t===e.groupId?Promise.resolve():new Promise((function(n,o){q(t,i).then((function(i){var o,r,a,s;t?(e.dgDevicesPrices=null!==(o=null===(r=i.data)||void 0===r?void 0:r.data)&&void 0!==o?o:i.data,e.groupId=t):e.devicesPrices=null!==(a=null===(s=i.data)||void 0===s?void 0:s.data)&&void 0!==a?a:i.data,n()}),(function(){n()}))}))},F=function(t,i){var n=R(t);if(e.offersFixe&&e.offersFixe.offers&&e.offersFixe.offers[n]&&e.offersFixe.offers[n].offers)return e.offersFixe.offers[n].offers.filter((function(e){return e.code==i}))[0]},N=function(t,i){var n=C(t);if(e.offersMobile&&e.offersMobile.offers[n]&&e.offersMobile.offers[n].offers)return e.offersMobile.offers[n].offers.filter((function(e){return e.code==i}))[0]},_=function(t,i){if(t){var n=C("MIG"===t.acteDeGestion?"RM":t.acteDeGestion);if(i||(i=t.universe),t.gammeId&&e.dgDevicesPrices&&e.dgDevicesPrices[n]&&e.dgDevicesPrices[n].offers){var o,r,a=e.dgDevicesPrices[n].offers.find((function(e){return e.code===t.gammeId}));return a?null===(o=a.plans)||void 0===o||null===(r=o.find((function(e){return e.universe?e.universe===i:!e.universe})))||void 0===r?void 0:r.deviceGroups[0]:void 0}}},B=function(t,i,n,o,r,a){var s=R(t);if(e.offersFixe&&e.offersFixe.offers[s]&&e.offersFixe.offers[s].offers)return e.offersFixe.offers[s].offers.filter((function(e){return e.codePivotGamme==i&&e.techno==n&&e.stbCompatibility==("GEN7"==o?"GEN8":"GEN7")&&e.xperience==r&&e.tvOffer==a}))[0]},H=function(t,i,n,o){console.debug("***",t,i,n,o);var r=e.devicesPrices;if(r){var a,s,c,l=r[C(n)],u=null==l?void 0:l.offers.find((function(t){var i;return t.code===(null===(i=e.basket.mobile.offer)||void 0===i?void 0:i.gammeId)})),d=null==u||null===(a=u.plans)||void 0===a||null===(s=a.find((function(e){return e.universe===o})))||void 0===s||null===(c=s.deviceGroups)||void 0===c?void 0:c.find((function(e){return e.code===t}));return null==d?void 0:d.devicePrices.find((function(e){return e.sapCode===i}))}return null},W=function(t,i){var n=e.dgDevicesPrices;if(n){var o,r,a=n[C(i)],s=null==a?void 0:a.offers.find((function(t){return t.code===e.basket.mobile.offer.gammeId})),c=null==s||null===(o=s.plans)||void 0===o||null===(r=o.find((function(t){var i;return t.universe===(null===(i=e.basket.mobile.offer)||void 0===i?void 0:i.universe)})))||void 0===r?void 0:r.deviceGroups[0];return null==c?void 0:c.devicePrices.find((function(e){return e.sapCode===t}))}return null};var G="L’éco-participation est une contribution payée par les consommateurs pour tout achat d’un appareil neuf et reversée à un éco-organisme, en charge du traitement et du recyclage des déchets d’équipements électriques et électroniques (DEEE). Incluse dans le prix d’achat, cette éco-participation permet de financer et améliorer la collecte, la dépollution et le recyclage des DEEE. Son montant varie selon le produit acheté et selon les barèmes d’éco-participation des éco-organismes. Chaque distributeur ou fabricant d’équipements électriques ou électroniques adhère à un éco-organisme et applique le montant défini.",U="554510",X=["FIXE_CONQUETE","FIXE_VLA","FIXE_MIG"];function V(e){if(e){if(e>=1e6)return e/1e6+"Gb/s";if(e<1e6)return e/1e3+"Mb/s"}return 0}const j=function(e){return!!(e&&e.fixe&&e.fixe.offer&&e.fier.acteDeGestion))},z=function(e){return e&&(e.mobile||e.fixe||e.temporary)},Q=function(e){return e&&(e.mobile&&e.mobile.offer&&e.mobile.offer.gammeId||e.fixe&&e.fixe.offer&&e.fixe.offer.gammeId)},Y=function(e){return e&&e.mobile&&e.mobile.offer&&e.mobile.offer.gammeId},J=function(e){return e&&e.fixe&&e.fixe.offer&&e.fixe.offer.gammeId},K=function(e){return e&&e.mobile&&e.mobile.mainDevice&&e.mobile.mainDevice.id},$=function(e){return e&&(e.mobile&&e.mobile.mainDevice&&e.mobile.mainDevice.id||e.fixe&&e.fixe.mainDevice&&e.fixe.mainDevice.id&&"554777"!==e.fixe.mainDevice.id)},Z=function(e){return e&&e.fixe&&e.fixe.mainDevice&&("TV"==e.fixe.mainDevice.type||"PROJECTEUR"==e.fixe.mainDevice.type)},ee=function(e){return e&&e.mobile&&e.mobile.offer&&e.fixe&&e.fixe.offer},te=function(e){return e&&e.fixe&&e.fixe.offer&&"BX1"==e.fixe.offer.ptaId&&"SFR_BOXV1_BOX4G_200Go|BX1"==e.fixe.offer.gammeId},ie=function(e){return e&&(e.mobile&&e.mobile.accessories&&e.mobile.accessories.length||e.fixe&&e.fixe.accessories&&e.fixe.accessories.length||e.temporary&&e.temporary.accessories&&e.temporary.accessories.length)},ne=function(e){return e&&(e.mobile&&e.mobile.options&&e.mobile.options.length||e.fixe&&e.fixe.options&&e.fixe.options.length||e.temporary&&e.temporary.options&&e.temporary.options.length)},oe=function(){var t=e.basket.mobile&&e.basket.mobile.options?e.basket.mobile.options:[],i=e.basket.fixe&&e.basket.fixe.options?e.basket.fixe.options:[],n=e.basket.temporary&&e.basket.temporary.options?e.basket.temporary.options:[];return t.concat(i).concat(n)},re=function(){var t=e.basket.mobile&&e.basket.mobile.options?e.basket.mobile.options:[],i=e.basketn(e){return e&&e.temporary&&e.temporary.options&&e.temporary.options.length},se=function(t){return e.basket&&e.basket.mobile&&e.basket.mobile.options&&e.basket.mobile.options.find((function(e){return e.id===t.code}))?"MOBILE":e.basket&&e.basket.fixe&&e.basket.fixe.options&&e.basket.fixe.options.find((function(e){return e.id===t.code}))?"FIXE":e.basket&&e.basket.temporary&&e.basket.temporary.options?"TEMPORARY":void 0},ce=function(e){if(e&&e.mobile&&e.mobile.offer&&e.mobile.offer.gammeId&&e.mobile.mainDevice&&e.mobile.mainDevice.id){var t="MIG"===e.mobile.acteDeGestion?"RM":e.mobile.acteDeGestion,i=N(t,e.mobile.offer.gammeId);if(i){var n=i.plans.filter((function(t){return t.universe===e.mo.devicePrices.filter((function(t){return t.sapCode===e.mobile.mainDevice.id}))[0];if(o&&o.paymentOption){var r=o.paymentOption.filter((function(e){return"CB4X"==e.billingMode}));return r&&r.length}}}}return!1},le=function(e){return e&&(e.mobile&&e.mobile.upSellToPush&&e.mobile.upSellToPush.length||e.fixe&&e.fixe.upSellToPush&&e.fixe.upSellToPush.length)},ue=function(){var t=e.basket;return t?(t.mobile?(t.mobile.offer?1:0)+(t.mobile.mainDevice?1:0)+(t.mobile.options?t.mobile.options.length:0)+(t.mobile.accessories?t.mobile.accessories.length:0)+(t.mobile.insurance?1:0):0)+(t.fixe?(t.fixe.offer?1:0)+(t.fixe.mainDevice?t.isFixe4G?0:1:0)+(t.fixe.options?t.fixe.options.filter((function(e){return!o.includes(e.id)})).length:0)+(t.fixe.accessories?t.fixe.accessories.length:0)+(t.fixe.insurance?1:0):0)+(t.temporary&&t.temporary.options?t.temporary.options.length:0)+(t.querySelector(":scope > section:last-of-type");t&&t.classList.add("last")},fe=function(e){return e&&e.fixe&&e.fixe.mainDevice&&"CONSOLE"===e.fixe.mainDevice.type},pe=function(e){if(e)if(e.fixe){if(e.fixe.offer)return"fixe-offer";if(e.fixe.mainDevice)return"fixe-device";if(e.fixe.options&&e.fixe.options.length)return"option";if(e.fixe.accessories&&e.fixe.accessories.length)return"accessory"}else if(e.mobile){if(e.mobile.offer)return"mobile-offer";if(e.mobile.mainDevice)return"mobile-device";if(e.mobile.accessories&&e.mobile.accessories.length)return"accessory";if(e.mobile.options&&e.mobile.options.length)return"option"}else if(e.temporary){if(e.temporary.accessories&&e.temporary.accessories.length)return"accessory";if(e.temporary.options&&e.temporary.options.length)return"option"}return null},me=function(e){var t,i="";return e.maxDown,[iction(){return"true"===window.sessionStorage.getItem("repriseMobActivated")},ye=function(){var t=e.basket;if(t&&t.mobile){var i={mobile:{offer:{ptaId:t.mobile.offer.ptaId,gammeId:t.mobile.offer.gammeId,universe:t.mobile.offer.universe,act:t.mobile.offer.acteDeGestion}}};return t.mobile.mainDevice&&(i.mobile.mainDevice={id:t.mobile.mainDevice.id,quantity:1,paymentMode:t.mobile.mainDevice.paymentMode}),i}},he=functMIG"===e.fixe.acteDeGestion},ge=function(e){return["QG0","QG1"].includes(e)},ke=function(){return e.basket.temporary&&e.basket.temporary.options?e.basket.temporary.options:[]};var Se=i(669);const Pe=function(){var t=v.getStoredAccessToken()?e.line:void 0;return Se.get("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket"),{params:{line:t}})},Ee=function(){var t=v.getStoredAccessToken()?e.line:void 0;return Se.get("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket/").concat(e.basketId),{params:{line:t}})},Te=function(t){var i=v.getStoredAccessToken()?e.line:void 0;return e.basketId?Se.put("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket/").concat(e.basketId),t,{params:{line:i}}):Se.put("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket"),t,{params:{line:i}})},Me=function(t){var i=v.getStoredAccessToken()?e.line:void 0;return Se.delete("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket/").concat(e.basketId),{data:t,params:{line:i}})},De=function(){var t=v.getStoredAccessToken()?e.line:void 0;return Se.get("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket/").concat(e.basketId,"/check"),{params:{line:t}})},Le=function(t,i){var n=v.getStoredAccessToken()?e.line:void 0;return Se.get("".concat(e.env.endpoints["service-cart"],"/").concat(e.brand,"/GP/basket/").concat(e.basketId,"/notify?email=").concat(t),{params:{line:n,optin:i}})};function xe(e){this.message=e}xe.prototype=new Error,xe.prototype.name="InvalidCharacterErroperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(e){return Ae(t)}}function qe(e){this.message=e}qe.prototype=new Error,qe.prototype.name="InvalidTokenError";var Re=i(669);const Ce=function(){return Re.get("".concat(e.env.endpoints["template-panier"]))},Oe=function(){return new Promise((function(t,i){Ce().then((function(i){e.template=v.parseTemplate(i.data),t()}))}))},we=function(t){var i=e.template.getElementById(t);if(i)return i.cloneNode(!0);console.error("PANIER-TRANSVERSE - Error : could not find any template for "+t)},Fe=function(t){var i=e.template.querySelector(t);if(i)return i.cloneNode(!0);console.error("PANIER-TRANSVERSE - Error : could not find any template for "+t)};var Ne={A_RECEPTIONNER_LIVRAISON:{title:"Equipement(s) envoyé(s) par SFR"},A_RECEPTIONNER_LIVRAISON_ECOM:{title:"Equipement(s) envoyé(s) par SFR"},A_RECEPTIONNER_RDV:{title:"Equipement(s) apporté(s) par le technicien"},A_RETOURNER_LIVRAISON:{title:"Equipement(s) à renvoyer",desc:"Si vous aviez réglé un dépôt de garantie sur vos équipement à retourner, il vous sera remboursé sous 10 jours suite à la restitution de votre matériel."},A_RETOURNER_RDV:{title:"Equipement(s) à donner au technicien",desc:"Si vous aviez réglé un dépôt de garantie sur vos équipement à retourner, il vous sera remboursé sous 10 jours suite à la restitution de votre matériel."},A_RETOURNER_SWAP:{title:"Equipement(s) à renvoyer"},A_RETOURNER_CLIENT:{title:"Equipement(s) à renvoyer"},A_CONSERVER:{title:"Equipement(s) conservés"},A_DEPOSER_DECHETTERIE:{title:"Equipement(s) de votre ancienne ligne"}};function _e(e){return e?"".concat((t=e/100,t-Math.floor(t)!=0?(e/100).toFixed(2):e/100),"€").replace(".",","):"0€";var t}const Be={toEuros:_e,formatPrice:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0===e)return"";var o="";if(0===e)return(o=i?'<div class="price"><p class="t">'.concat(i,"</p>"):'<div class="price"> <p class="L">'.concat(e,'</p> <span class="R">€</span>'))+(t&&!i?'<span class="R">/mois</span> </div>':"</div>");var r,a=(e/100).toString(),s=a.split("."),c=s[0],l=null!==(r=s[1])&&void 0!==r?r:"";return o='<div class="price"><p class="L">',o+=n?'<span class="o">'.concat(_e(n),"</span>"):"",(o+="".concat(c,'</p><span class="R">€').concat(l,"</span>"))+(t?'<span class="R">/mois</span> </div>':"</div>")}};var He=["FIXE_MIG","FIXE_ARO"],We="Conservation du numéro";const Ge=function(){if(e.basket.fixe&&e.basket.fixe.offer&&e.basket.fixe.offer.gammeId){v.setStepper(3);var t=we("Box");if(t){t.classList.add("first");var i=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);i&&((n=document.createElement("h2")).setAttribute("id","PtFixeOffer"),n.innerHTML=He.includes(e.basket.fixe.offer.acteDeGestion)?"Changement d'offre box":"FIXE_DEMENAGEMENT"===e.basket.fixe.offer.acteDeGestion?"Déménagement de box":" Mon offre box",e.content.append(n),function(){var t,i,n,o,r,a;if(e.line&&e.basket&&null!==(t=e.basket)&&void 0!==t&&t.fixe&&null!==(i=e.basket)&&void 0!==i&&null!==(n=i.fixe)&&void 0!==n&&n.offer&&["FIXE_MIG","FIXE_DEMENAGEMENT"].includes(null===(o=e.basket)||void 0===o||null===(r=o.fixe)||void 0===r||null===(a=r.offer)||void 0===a?void 0:a.acteDeGestion)){var s=document.createElement("div");if(e.basket.fixe){var c,l,u,d,f,p,m,b,v="FIXE_DEMENAGEMENT"===(null===(c=e.basket)||void 0===c||null===(l=c.fixe)||void 0===l||null===(u=l.offer)||void 0===u?void 0:u.acteDeGestion),y=new Date(null===(d=e.basket)||void 0===d||null===(f=d.fixe)||void 0===f||null===(p=f.offer)||void 0===p?void 0:p.moveDate).toLocaleDateString("en-GB");s.classList.add("lc"),s.style.height="55px",s.innerHTML="<div>",v?s.innerHTML="Date d'emmenagement : ".concat(y,"<br>\n                Adresse concernée : ").concat(null===(m=e.offersFixe.offers)||void 0===m||null===(b=m.FIXE_DEMENAGEMENT)||void 0===b?void 0:b.address,"<br>"):s.innerHTML+="Adresse concernée : ".concat(e.offersFixe.offers.FIXE_MIG.address,"<br>"),s.innerHTML+="Ligne concernée : ".concat(e.line.replace(/(.{2})/g,"$1 ")),s.innerHTML+="</div>"}e.content.append(s)}}(),function(e,t){var i=e.querySelector(".sticker");i&&(t.templateData&&t.templateData.properties&&t.templateData.properties.promotionalSticker?(e.classList.add("promo"),i.innerHTML=t.templateData.properties.promotionalSticker.label):(e.classList.remove("promo"),i.remove()))}(t,i),function(t,i){var n=t.querySelector(".L a");n&&(n.href=k(i.seoName),"SFR"===e.brand&&window.newSFRNavigateTo&&(n.onclick=function(e){window.newSFRNavigateTo(T(i.seoName)),e.preventDefault()}));var o=t.querySelector(".L img");o&&(i.templateData&&i.templateData.properties&&i.templateData.properties.boxDescriptions&&i.templateData.properties.boxDescriptions.urlPictureBoxPanier?o.src=i.templateData.properties.boxDescriptions.urlPictureBoxPanier:o.remove())}(t,i),function(t,i){var n=t.querySelector(".M a");n&&(n.href=k(i.seoName),"SFR"===e.brand&&window.newSFRNavigateTo&&(n.onclick=function(e){window.newSFRNavigateTo(T(i.seoName)),e.preventDefault()}));var o=t.querySelector(".M .title");o&&(e.basket.fixe.mainDevice&&"CONSOLE"==e.basket.fixe.mainDevice.type?o.innerHTML=i.templateData.properties.labelLongOther:o.innerHTML=i.templateData.properties.labelLong)}(t,i),function(t,i){var n=t.querySelector(".M .desc ul");if(n){if(n.innerHTML="",i.templateData.properties.boxDescriptions){if(i.templateData.properties.boxDescriptions.descriptions){var o=me(i);i.templateData.properties.boxDescriptions.descriptions.forEach((function(e){var t=document.createElement("li");t.innerHTML=e.replace("[DEBITD]",o[0]).replace("[DEBITU]",o[1]),n.append(t)}))}if(i.templateData.properties.boxDescriptions.appel){var r=document.createElement("li");r.innerHTML=i.templateData.properties.boxDescriptions.appel,"Appels illimités"===r.innerHTML&&(e.basket.fixe.offer.gammeId.includes("-STARTER")?r.innerHTML="Appels illimités vers les Fixes en France":e.basket.fixe.offer.gammeId.includes("-POWER")?r.innerHTML="Appels illimités vers les Fixes et Mobiles en France":e.basket.fixe.offer.gammeId.includes("-PREMIUM")&&(r.innerHTML="Appels illimités vers les Fixes et Mobiles en Europe")),n.append(r)}if(i.templateData.properties.boxDescriptions.chaine){var a=document.createElement("li");a.innerHTML=i.templateData.properties.boxDescriptions.chaine,n.append(a)}}var s=document.createElement("li");He.includes(e.basket.fixe.offer.acteDeGestion)?(s.innerHTML=We,n.append(s)):te(e.basket)||null==e.basket.fixe.offer.withPortability||(s.innerHTML=e.basket.fixe.offer.withPortability?We:"Attribution d'un nouveau numéro",n.append(s)),function(t){if(j(e.basket)){var i=document.createElement("li");i.innerHTML+="NETFLIX avec publicité et bouquet Famille",t.append(i)}}(n)}}(t,i),function(t){var i=t.querySelector(".M .equipements");if(i){var n={},o=[];e.basket.fixe.mainDevice&&e.basket.fixe.mainDevice.code&&o.push(e.basket.fixe.mainDevice.code);var r=e.basket.fixe&&e.basket.fixe.options?e.basket.fixe.options.map((function(e){return e.code})).filter((function(e){return!!e})):[];if(r&&r.length&&(o=o.concat(r)),e.basket.fixe.retained&&e.basket.fixe.retained.equipments&&e.basket.fixe.retained.equipments.forEach((function(e){n[e.logisticAction]||(n[e.logisticAction]=[]),n[e.logisticAction].push(e)})),e.basket.fixe.subscribed&&e.basket.fixe.subscribed.equipments&&e.basket.fixe.subscribed.equipments.filter((function(e){return!o.includes(e.id)})).forEach((function(e){n[e.logisticAction]||(n[e.logisticAction]=[]),n[e.logisticAction].puxe.unsubscribed.equipments.forEach((function(e){n[e.logisticAction]||(n[e.logisticAction]=[]),n[e.logisticAction].push(e)})),Object.keys(n).length>0){var a=i.querySelector(".subtitle"),s=i.querySelector(".desc"),c=i.querySelector(".equ");i.innerHTML="",Object.keys(n).forEach((function(e){var t=Ne[e];if("A_RECEPTIONNER_LIVRAISON_ECOM"===e&&v.setStepper(1),"A_RECEPTIONNER_RDV"===e&&v.setStepper(2),t){if(a&&t.title){var o=a.cloneNode();o.innerHTML=t.title,i.append(o)}if(s&&t.desc){var r=s.cloneNode();r.innerHTML=t.desc,i.append(r)}c&&n[e].forEach((function(e){var t=c.cloneNode(!0);t.querySelector("p")&&(t.querySelector("p").innerHTML=e.label),e.picUrl?t.querySelector("img").src=e.picUrl:t.querySelector("img").remove(),i.append(t)}))}}))}else i.remove()}}(t),function(t){var i=t.querySelector(".R .p-block");if(i){var n=e.basket.fixe.offer.totalPricePerMonthWithDiscount||0===e.basket.fixe.offer.totalPricePerMonthWithDiscount?e.basket.fixe.offer.totalPricePerMonthWithDiscount:e.basket.fixe.offer.totalPricePerMonth;if(i.innerHTML=Be.formatPrice(n,!0,"Offert"),e.basket.fixe.offer.discounts){var o=e.basket.fixe.offer.discounts.filter((function(e){return e.duration&&0==e.duration&&e.discountValue>0}))[0],r=e.basket.fixe.offer.discounts.filter((function(e){return e.duration&&e.duration>0&&e.discountValue>0}))[0];if(r){var a=o?o.priceAfter:e.basket.fixe.offer.totalPricePerMonth,s=document.createElement("p");s.innerHTML="Pendant ".concat(r.duration," mois puis ").concat(Be.toEuros(a),"/mois"),i.append(s)}if(!r&&o){var c=document.createElement("p");c.innerHTML="au lieu de ".concat(Be.toEuros(e.basket.fixe.offer.totalPricePerMonth)),i.append(c)}}var l=document.createElement("p");l.innerHTML=e.basket.fixe.offer.commitmentDuration?"Engagement ".concat(e.basket.fixe.offer.commitmentDuration," mois"):"Sans engagement",i.append(l)}}(t),function(t){var i=t.querySelector(".R .r-block");if(i){var n=i.querySelector("p");i.innerHTMLilter((function(e){return e.label})).map((function(e){return e.label.replace("24 mois","2 ans").replace("12 mois","1 an")}))),e.basket.fixe.subscribed&&e.basket.fixe.subscribed.options.length&&(e.basket.fixe.subscribed.options.find((function(e){return"FICTIF_2MOFFERT"===e.id}))&&o.push("2 mois d'abonnement offerts"),e.basket.fixe.subscribed.options.find((function(e){return"REM_REFACTION"===e.id}))&&e.basket.fixe.options.length)){var r=e.basket.fixe.options.find((function(e){return"REM_REFACTION"===e.id}));o.push("Remise contrat collectif (".concat(Be.toEuros(r.totalPricePerMonth),"&nbsp;TTC/mois max)<br/>\n               ement actuel."))}o.length>0?(i.append(n),o.forEach((function(e){var t=document.createElement("p");t.innerHTML=e,i.append(t)}))):i.remove()}}(t),e.content.append(t))}}var n};var Ue=i(669);const Xe=function(){var t="".concat(e.env.endpoints["service-option"],"/NEWSFR/catalog/detailt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ze(e,t,i,n){return{mediaCategory:"-SURCAT-2-CONTENU",telCoCategory:"-SURCAT-1-TELCO",code:e.code,name:e.name,description:e.description,picUrl:e.picUrl,lines:e.lines,discountLabel:e.discountLabel,discountLabelPrice:e.discountLabelPrice,price:e.price,discount:e.discount?e.discount:0,discountDuration:null==e?void 0:e.discountDuration,frequency:e.frequency,logoUrl:e.logoUrl,realOptionCodes:e.realOptionCodes?e.realOptionCodes:[],logoPictureUrl:e.logoPictureUrl,logoPictureGFUrl:e.logoPictureGFUrl,materialImpacts:e.materialImpacts,migCachee:e.migCachee,subLabel:e.subLabel,filters:e.filters,normalizedFilters:e.filters?e.filters.map((function(e){return v.asNormalizedId(e)})):[],type:t,isFixe:"FIXE"===t,isMobile:"MOBILE"===t,normalizedId:v.asNormalizedId(e.code,!0),category:i,metaCategory:n,animCo:e.animCo,isDevice:e.isDevice,referencedProductId:e.referencedProductId,retainable:e.retainable,needsConsent:e.needsConsent,urlOtt:e.urlOtt?e.urlOtt.trim():void 0,forceDetailUrl:e.forceDetailUrl,secondaryDetailUrl:e.secondaryDetailUrl,commitmentChoices:e.commitmentChoices,hideLegalMention:e.hideLegalMention,class:e.class,link:e.link,included:e.included,basketRealOptionCode:e.basketRealOptionCode}}function Qe(e,t,i){return(null==i||e.type==i)&&(e.code===t||e.normalizedId===t||e.realOptionCodes&&e.realOptionCodes.indexOf(t)>-1)}const Ye={loadOptions:function(){return e.options?Promise.resolve():new Promise((function(i,n){Xe().then((function(n){var o,r,a=null!==(o=null===(r=n.data)||void 0===r?void 0:r.data)&&void 0!==o?o:n.data;e.options=a?function(e){var i=[],n=[];e.forEach((function(e){"FIXE"===e.environment?i=e.containers.map((function(e){return e.categories.map((function(t){return{options:t.options,category:t.label,metaCategory:e.code}}))})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.options.map((function(t){return ze(t,"FIXE",e.ers.map((function(e){return e.categories.map((function(t){return{options:t.options,category:t.label,metaCategory:e.code}}))})).reduce((function(e,t){return e.concn e.options.map((function(t){return ze(rn e.concat(t)}),[]))}));var o=Ve(i);return t.forEach((function(e){i.find((function(t){return t.code===e.code}))||o.push(e)})),[].concat(Ve(o),Ve(n))}(a):null,i()}),(function(){i()}))}))},detailsUrl:function(e){retuilUrl)>-1?e.secondaryDetailUrl:e.forceDetailUrl:function(e){return e.metaCategory&&e.metaCategory.includes(e.mediaCategory)}(e)&&e.normalizedId?"/tv-sfr/".concat(e.normalizedId):e.normalizedId?"/options/".concat(rl?e.forceDetailUrl:null},match:Qe,getOption:function(t,i){if(e.options)return e.options.find((function(e){return Qe(e,t,i)}))}};function Je(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=e.querySelector(".list li");if(r){var a=r.cloneNode(!0),s=e.querySelector(".list");s.innerHTML="";for(var c=o||0;c<t.length;c++){var l=t[c];if($e(s,l,a,i),n&&c===n-1)break}}}function Ke(t,i,n){var o,r,a;"MOBILE"===n&&"HM1"!==(null===(o=e.basket)||void 0===o||null===(r=o.mobile)||void 0===r||null===(a=r.offer)||void 0===a?void 0:a.ptaId)&&(i.reverse(),i.push({id:"INTUS",checked:!1}),i.reverse());var s=0;i.forEach((function(o){s++;var r=we("Facture");r&&(r.removeAttribute("id"),1===s&&r.classList.add("last"),s===i.length&&r.classList.add("first"),"FIXE"===n?r.classList.add("more-options-fixe"):r.classList.add("more-options-mobile"),function(t,i,n){var o=t.querySelector(".M .title"),r=t.querySelector(".M .desc"),a=t.querySelector("input"),s="INTUS"===i.id?0:1;a.checked=i.checked;var c="",l="";switch(i.id){case"SV07":c=i.label,l="Bénéficiez des tarifs de base pour appeler, envoyer des SMS \n            et surfer sur internet depuis l'étranger. Toutes les \n            informations détaillées sur les tarifs sont indiquées dans la \n            brochure tarifaire en vigueur au moment de votre achat.";break;case"P107":case"FACELUNIT":c="Facture uniquement en ligne",l=i.checked?"Vous recevrez vos factures uniquement dans votre espace client.":"Vous recevrez gratuitement vos factures dans votre espace client et par voie postale.";break;case"INTUS":a&&a.remove()}o&&(o.innerHTML=c),r&&(r.innerHTML=l);var u=t.querySelector(".M label");if(u.onclick=function(){return function(t,i,n){"MOBILE"===n&&(e.openToggleMobile=!0),"FIXE"===n&&(e.openToggleFixe=!0),e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,"MOBILE"===n?Fr.put({mobile:{switchableOptions:[{id:i.id,checked:!i.checked}]}}):Fr.put({fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),switchableOptions:[{id:i.id,checked:!i.checked}]}}))}(u,i,n)},"MOBILE"===n){var d=t.querySelectorAll(".R")[s];d&&d.remove();var f=t.querySelectorAll(".L")[s];f&&f.remove();var p=t.querySelectorAll(".M")[s];p&&p.remove()}if(i.check){var m=t.querySelector(".R");if(m)if("RECURRENT"===i.frequency){var b=i.totalPricePerMonthWithDiscount||0===i.totalPricePerMonthWithDiscount?i.totalPricePerMonthWithDiscount:i.totalPricePerMonth,y=(Be.toEuros(b),Be.formatPrice(b,!0,"Offert"));m.innerHTML='<section class="p-block"> '.concat(y,"</section>")}else{var h=i.totalPriceWithDiscount?i.totalPriceWithDiscount:i.totalPrice,g=(Be.toEuros(h),Be.formatPrice(h,!0,"Gratuit"));m.innerHTML='<section class="p-block"> '.concat(g,"</section>")}}}(r,o,n),t?t.after(r):e.content.append(r))}))}function $e(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"FIXE",o=i.cloneNode(!0),r=tt(t),a=o.querySelector(".sticker");a&&(t.animCo?(a.innerHTML=t.animCo,a.style.display="block"):a.style.display="none");var s=o.querySelectorAll("a");s&&s.length&&s.forEach((function(e){e.setAttribute("href",h(Ye.detailsUrl(t))),e.innerHTML=t.name}));var c=o.querySelector("img");c&&(c.setAttribute("alt",t.name),c.setAttribute("src",ot(t)));var l=o.querySelector("bol-label-refund");l&&(t.discountLabel?(l.innerHTML=t.discountLabel,l.style.display="block"):l.style.display="none");var u=o.querySelector(".BlackBloc h3");u&&(u.innerHTML=t.name);var d=o.querySelector(".BlackBloc p");d&&(d.innerHTML=t.description);var f=o.querySelector("bol-price");f&&(f.innerHTML=Be.formatPrice(100*r.price,"RECURRENT"===r.frequency,r.discount?"Offert":"Gratuit"));var p=o.querySelector(".engagement .mention");p&&(r.discount?(null!=r&&r.discountDuration?p.innerHTML="pendant ".concat(null==r?void 0:r.discountDuration," mois puis ").concat(Ze(r.subPrice),"€"):p.innerHTML="au lieu de ".concat(Ze(r.subPrice),"€"),p.style.display="block"):p.style.display="none");var m=o.querySelector(".engagement .commitment");m&&(r.commitmentDuration?m.innerHTML="engagement ".concat(r.commitmentDuration," mois"):m.innerHTML="Sans engagement");var b=o.querySelector(".bl_btn .btn");b&&(b.onclick=function(e){et(b,t.code,n),e.preventDefault()}),e.append(o)}function Ze(e){return e?"".concat(e).replace(".",","):""}function et(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&t.classList.add("loading"),"MOBILE"===n)Fr.put({mobile:{options:[{id:i}]}});else{var r=e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand);o?Fr.put({fixe:{idEligibility:r,options:[{id:i,params:o}]}}):Fr.put({fixe:{idEligibility:r,options:[{id:i}]}})}}function tt(e){var t=e.commitmentChoices&&e.commitmentChoices.length?e.commitmentChoices[0]:e,i=t.discount;return i?(null==t?void 0:t.discountDuration)?{price:it(t.price,Math.round(100*t.discount)/100),subPrice:t.price,discount:Math.round(i),frequency:t.frequency,discountDuration:null==t?void 0:t.discountDuration,commitmentDuration:nt(t)}:{price:it(t.price,t.discount),subPrice:t.price,discount:Math.round(i),frequency:t.frequency,commitmentDuration:nt(t)}:{price:t.price,frequency:t.parseInt(Math.round(100*e))-Number.parseInt(Math.round(100*t)))/100}function nt(e){return e.commitmentDuration?e.commitmentDuration:0}function ot(e){var t,i;return null!==(t=null!==(i=e.logoPictureGFUrl)&&void 0!==i?i:e.logoPictureUrl)&&void 0!==t?t:e.picUrl}const rt={generateOptions:Je,voirPlus:function(t,i,n,o){var r,a,s="FIXE"===o?"#Content .more-options-fixe":"#Content .more-options-mobile",c=document.querySelectorAll("".concat(s,".lame-toggle")),l=document.querySelector("".concat(s,".addons_bloc"));if("FIXE"===o?e.openToggleFixe=!0:e.openToggleMobile=!0,l&&c)c.forEach((function(e){return e.style.display="flex"})),l.style.display="block";else{var u=t.cloneNode(!0);u.classList.add("FIXE"===o?"more-options-fixe":"more-options-mobile");var d=u.querySelector(".tilte-asso");d&&d.remove();var f=u.querySelector(".subtilte-asso");f&&f.remove();var p=u.querySelector(".open");p&&p.remove();var m=u.querySelector("label");m&&m.remove();var b=u.querySelector(".seeAll");b&&(b.style.display="block",b.href="".concat(e.env.redirectionRootPaths[e.brand],"/").concat("FIXE"===o?"offre-internet":"offre-mobile","/options"),"SFR"===e.brand&&window.newSFRNavigateTo&&(b.onclick=function(e){window.newSFRNavigateTo("/".concat("FIXE"===o?"offre-internet":"offre-mobile","/options")),e.preventDefault()})),Je(u,i,o,null,4),r=u,(a=t).parentElement.insertBefore(r,a.nextSibling),Ke(t,n,o)}},voirMoins:function(t,i,n){var o=document.getElementById("Content");if(o)if("FIXE"===n){var r=o.querySelectorAll(".more-optionsstyle.display="none"}))}else{var a=o.querySelectorAll(".more-options-mobile");a&&a.forEach((function(e){return e.style.display="none"}))}var s=t.querySelector(".seeAll");s&&(s.style.display="none"),"MOBILE"===n&&(e.openToggleMobile=!1),ixe=!1)},getPriceInfos:tt,addOption:et,addOptions:function(t,i,n){t&&t.classList.add("loading");var o=i.map((function(e){return{id:e}}));"MOBILE"===n?Fr.put({mobile:{options:o}}):Fr.put({fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),options:o}})},removeOption:function(e,t,i){e.classList.add("loader"),"FIXE"===i?Fr.remove({fixe:{options:[{id:t}]}}):"MOBILE"===i?Fr.remove({mobile:{options:[{id:t}]}}):"TEMPORARY"===i&&Fr.remove({temporary:{options:[{id:t}]}})},generateSwitchableOptions:Ke,optionPicture:ot,getPriceInfo:function(e){if(e.discounts){var t;e.discounts.forEach((function(e){e.duration&&(!t||e.duration<t)&&(t=e.duration)}));var i=0;e.discounts.forEach((function(e){!e.duration&&e.discountValue>i&&(i=e.discountValue)}));var n=e.totalPricePerMonth,o=e.totalPricePerMonth-i;return"RECURRENT"===e.frequency?{price:e.totalPricePerMonthWithDiscount,subPrice:n,duration:t,priceBefore:o,frequency:1}:{price:e.totalPriceWithDiscount,subPrice:e.totalPrice}}return"RECURRENT"===e.frequency?{price:e.totalPricePerMonth,frequency:1}:{price:e.totalPrice}},subPrice:function(e){return e.subPrice&&e.duration&&e.priceBefore?"au lieu de ".concat(Be.toEuros(e.subPrice)).concat(e.frequency?"/mois":""):e.subPrice&&e.duration?"pendant ".concat(e.duration," mois <br> puis ").concat(Be.toEuros(e.subPrice),"/mois"):e.subPrice&&e.subPrice>e.price?"au lieu de ".concat(Be.toEuros(e.subPrice)).concat(e.frequency?"/mois":""):""},subSubPrice:function(e){return e.subPrice&&e.duration&&e.priceBefore?"pendant ".concat(e.duration," mois <br> puis ").concat(Be.toEuros(e.priceBefore),"/mois"):""},engagement:function(e,t){return e.commitmentDuration?"Engagement ".concat(e.commitmentDuration," mois"):"Sans engagement"}};function at(t,i,n,o){if(t){if([".L","input",".M",".R"].forEach((function(e){t.querySelectorAll(e).forEach((function(e){e.remove()}))})),"dazn"===(null==n?void 0:n.code)){!function(t){var i,n,o=null===(i=e.optionConstants)||void 0===i||null===(n=i.fixeConstants)||void 0===n?void 0:n.lblTitleSVODAutrePanier,r=lt("div","L"),a=lt("div","M"),s=lt("div"),c=lt("p","title"),l=lt("div","R");a.style,c&&(c.innerHTML="".concat(o||"")),s.append(c),a.append(s),t.append(r,a,l),e.content.append(t)}(t);var r=t.querySelector(".M");r.style.alignItems="unset",r.style.flexDirection="column"}o&&n&&ct(t,i,n)}}function st(t,i,n,o,r,a,s,c,l,u){t&&([".L","input",".M",".R"].forEach((function(e){t.querySelectorAll(e).forEach((function(e){e.remove()}))})),function(t){var i,n,o=null===(i=e.optionConstants)||void 0===i||null===(n=i.fixeConstants)||void 0===n?void 0:n.lblTitleSVODPanier,r=lt("div","L"),a=lt("div","M"),s=lt("div"),c=lt("p","title"),l=lt("div","R");c&&(c.innerHTML="".concat(o||"")),s.append(c),a.append(s),t.append(r,a,l),e.content.append(t)}(t),o&&n&&ct(t,i,n),s&&a&&ct(t,r,a),u&&l&&ct(t,c,l))}function ct(t,i,n){null==n||n.code;var o=lt("div","L"),r=lt("div","img"),a=function(e,t){var i=document.createElement("img");return i.setAttribute("loading","lazy"),i}();r.append(a),o.append(r);var s=function(e,t,i,n){var o=document.createElement("input");return o.setAttribute("type","radio"),o.setAttribute("name",i),t&&o.setAttribute("id",t),n.split(" ").forEach((function(e){o.classList.add(e)})),o}(0,null==n?void 0:n.code,null==n?void 0:n.code,"toggle"),c=lt("div","M"),l=function(e,t,i){var n=document.createElement("label");return e&&n.setAttribute("for",e),n}(null==n?void 0:n.code),u=lt("div"),d=lt("p","title"),f=lt("div","desc");u.append(d,f),c.append(l,u);var p=lt("dtion(t,i,n,o){var r;i&&n&&o&&(null!==(r=e.basket.fixe.options)&&void 0!==r&&r.find((function(e){return e.id===(null==o?void 0:o.code)}))?(i.checked=!0,n.onclick=function(){return rt.removeOption(n,null==o?void 0:o.code,"FIXE")}):(i.checked=!1,n.onclick=function(){rt.addOption(n,null==o?void 0:o.code,"FIXE")}))}(0,s,l,n),function(e,t,i,n){e&&null!=n&&n.urlLogoConf&&e.setAttribute("src",null==n?void 0:n.urlLogoConf),t.innerHTML="",t&&null!=n&&n.lblConf&&(t.innerHTML="".concat(null==n?void 0:n.lblConf)),i.innerHTML="",i&&null!=n&&n.desc&&(i.innerHTML=null==n?void 0:n.desc)}(a,d,f,n),function(e,t,i){if(i&&(i.innerHTML="",e)){var n=rt.getPriceInfo(e),o=n.price?Be.toEuros(n.price):0;i.innerHTML='<span class="offer">'.concat(o||"".concat(t||"Inclus"),"</span>\n            <p>").concat(null!=e&&e.discounts&&null!=e&&e.discounts.length?rt.subPrice(n):"","</p>\n            <p>").concat(rt.subSubPrice(n),"</p>")}}(i,null==n?void 0:n.libelle,m),t.append(o,s,c,p),e.content.append(t)}function lt(e,t){var i=document.createElement(e);return null==t||t.split(" ").forEach((function(e){i.classList.add(e)})),i}const ut=function(){if(e.basket.fixe&&e.basket.fixe.offer){var t,i,n,o,r,a,s,c,l,u,d,f,p,m,b,y,h,g,k,S,P,E=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId),T=null==E||null===(t=E.templateData)||void 0===t||null===(i=t.properties)||void 0===i||null===(n=i.boxDescriptions)||void 0===n?void 0:n.idOption1,M=null==E||null===(o=E.templateData)||void 0===o||null===(r=o.properties)||void 0===r||null===(a=r.boxDescriptions)||void 0===a?void 0:a.idOption2,D=null==E||null===(s=E.templateData)||void 0===s||null===(c=s.properties)||void 0===c||null===(l=c.boxDescriptions)||void 0===l?void 0:l.idOption3,L=null==E||null===(u=E.templateData)||void 0===u||null===(d=u.properties)||void 0===d||null===(f=d.boxDescriptions)||void 0===f?void 0:f.idOption4,x=null,A=null,I=null,q=null,R=null,C=null,O=null,w=null,N=null;E&&E.plans[0]&&E.plans[0].devicePrices&&(x=E.plans[0].devicePrices);var _=T,B=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length?e.basket.fixe.upSellToPush.filter((function(e){return e.id===_}))[0]:void 0;T=null!==(p=T)&&void 0!==p?p:null===(m=B)||void 0===m?void 0:m.id;var H=M,W=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length?e.basket.fixe.upSellToPush.filter((function(e){return e.id===H}))[0]:void 0;M=null!==(b=M)&&void 0!==b?b:null===(y=W)||void 0===y?void 0:y.id;var G=D,U=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length?e.basket.fixe.upSellToPush.filter((function(e){return e.id===G}))[0]:void 0;D=null!==(h=D)&&void 0!==h?h:null===(g=U)||void 0===g?void 0:g.id;var X,V,j,z,Q,Y,J,K,$=L,Z=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length?e.basket.fixe.upSellToPush.filter((function(e){return e.id===$}))[0]:void 0;if(L=null!==(k=L)&&void 0!==k?k:null===(S=Z)||void 0===S?void 0:S.id,B||(B=e.basket.fixe.options&&e.basket.fixe.options.length>0?e.basket.fixe.options.filter((function(e){return e.id===_}))[0]:void 0,T=null!==(X=T)&&void 0!==X?X:null===(V=B)||void 0===V?void 0:V.id),W||(W=e.basket.fixe.options&&e.basket.fixe.options.length>0?e.basket.fixe.options.filter((function(e){return e.id===H}))[0]:void 0,M=null!==(j=M)&&void 0!==j?j:null===(z=W)||void 0===z?void 0:z.id),U||(U=e.basket.fixe.options&&e.basket.fixe.options.length>0?e.basket.fixe.options.filter((function(e){return e.id===G}))[0]:void 0,D=null!==(Q=D)&&void 0!==Q?Q:null===(Y=U)||void 0===Y?void 0:Y.id),Z||(Z=e.basket.fixe.options&&e.basket.fixe.options.length>0?e.basket.fixe.options.filter((function(e){return e.id===$}))[0]:void 0,L=null!==(J=L)&&void 0!==J?J:null===(K=Z)||void 0===K?void 0:K.id),null!==(P=e.optionConstants)&&void 0!==P&&P.optionConstants){var ee,te,ie,ne,oe,re,ae=null===(ee=e.optionConstants)||void 0===ee?void 0:ee.optionConstants.filter((function(e){return"dazn"!==(null==e?void 0:e.code)}));A=ae.find((function(e){return(null==e?void 0:e.code)===T})),q=ae.find((function(e){return(null==e?void 0:e.code)===M})),C=de)===D})),w=null===(te=e.optionConstants)||void 0===te?void 0:te.optionConstants.find((function(e){return(null==e?void 0:e.code)===L})),A&&(I=null===(ie=x)||void 0===ie?void 0:ie.find((function(e){var t;return(null==e?void 0:e.id)===(null===(t=A)||void 0===t?void 0:t.code)}))),q&&(R=null===(ne=x)||void 0===ne?void 0:ne.find((function(e){var t;return(null==e?void 0:e.id)===(null===(t=q)||void 0===t?void 0:t.code)}))),C&&(O=null===(oe=x)||void 0===oe?void 0:oe.find((function(e){var t;return(null==e?void 0:e.id)===(null===(t=C)||void 0===t?void 0:t.code)}))),w&&(N=null===(re=x)||void 0===re?void 0:re.find((function(e){var t;return(null==e?void 0:e.id)===(null===(t=w)||void 0===t?void 0:t.code)})))}if(!B&&!I||R||O){if((B||I)&&(W||R||U||O)){var se=we("pushNetflixOrDisney");"2"===v.getABT(685)?st(se,W,q,R,B,A,I,U,C,O):st(se,B,A,I,W,q,R,U,C,O),(Z||N)&&at(we("pushNetflixAndDisney"),Z,w,N)}}else at(we("pushNetflixAndDisney"),B,A)}};var dt="internet-raccordement";function ft(t){var i,n,o=null===(i=e.receipt)||void 0===n?void 0:n.querySelector(".btn");o&&o.forEach((function(e){t?e.classList.add("disabled"):e.classList.remove("disabled")})),r&&(t?r.classList.add("disabled"):r.classList.remove("disabled"))}function pt(e){var t=document.createElement("div");return e.split(" ").forEach((function(e){t.classList.add(e)})),t}function mt(e,t,i,n){var o=documn o.setAttribute("type",e),o.setAttribute("name",i),t&&o.setAttribute("id",t),n&&n.split(" ").forEach((function(e){o.classList.add(e)})),o}function bt(e){var t=null==e?void 0:e.replace(/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4 $5"),i=pt("showNum box2"),n=pt("message wa"),o=document.createElement("p");o.innerHTML="Vous devez déjà être client mobile SFR ou RED pour bénéficier de cette option",n.append(o);var r=document.createElement("p");r.classList.add("title"),r.innerHTML='<label for="phonenumber" class="noAftBef" id="NoTop">Le numéro de téléphone mobile SFR ou RED sur lequel l’option s’activera</label>';var a=mt("tel","","phonenumber","sr-size-100pc unselectable");a.setAttribute("value",t),a.setAttribute("pattern","^0[0-9]{9}");var s=document.createElement("label");s.setAttribute("class","ModifNum"),s.innerHTML='<p class="numCta">Modifier le numéro de téléphone</p>';var c=document.createElement("p");return c.setAttribute("class","sr-message-error"),c.innerHTML="Veuillez saisir un numéro de téléphone valide pour bénéficier de cette option",c.style.visibility="hidden",i.append(n,r,a,s,c),i}const vt=function(){var t,i;if(e.basket.fixe&&e.basket.fixe.offer&&!te(e.basket)&&!["FIXE_DEMENAGEMENT","FIXE_MIG"].includes(null===(t=e.basket.fixe)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.acteDeGestion)){var n,o,r=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);if(null!=r&&null!==(n=r.plans[0])&&void 0!==n&&nuldt}))){var a=we("pushpotdedata");if(a){var s,c,l,u;[".L","input",".M",".R"].forEach((function(e){a.querySelectorAll(e).forEach((function(e){e.remove()}))})),function(t){if(t){var i,n,o,r=pt("L"),a=pt("img"),s=document.createElement("img");s.setAttribute("src","//static.s-sfr.fr/assets/pictos/internet-jusquau-racco-40px.svg"),s.setAttribute("loading","lazy"),a.append(s),r.append(a);var c=mt("radio","pushpotdedata76","pushpotdedata76","toggle"),l=pt("M showInput"),u=document.createElement("label");u.setAttribute("for","pushpotdedata76");var d=document.createElement("div"),f=document.createElement("p");f.classList.add("title");var p=pt("desc"),m=null===(i=e.basket.fixe)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.find((function(e){return e.id===dt})),b=null==m||null===(o=m.optionParams)||void 0===o?void 0:o.find((function(e){return"msisdn"===e.id})),y=function(){var e=pt("showNum box1"),t=pt("message wa"),i=document.createElement("p");i.innerHTML="Vous devez déjà être client mobile SFR ou RED pour bénéficier de cette option",t.append(i);var n=document.createElement("p");n.classList.add("title"),n.innerHTML='<label for="phonenumber" class="noAftBef" id="NoTop">Entrez le numéro de téléphone mobile SFR ou RED sur lequel l’option s’activera</label>';var o=mt("tel","","phonenumber","sr-size-100pc");o.setAttribute("pattern","^0[0-9]{9}"),o.setAttribute("maxlength","10"),o.setAttribute("placeholder","0X XX XX XX XX"),o.setAttribute("id","phone");var r=document.createElement("p");return r.setAttribute("class","sr-message-error"),""===o.value.trim()?(r.innerHTML="Veuillez saisir un numéro de téléphone valide pour bénéficier de cette option",r.style.visibility="visible",o.style.border="1px solid red"):r.style.visibility="hidden",e.append(t,n,o,r),e}(),h=bt();m&&b&&null!=b&&b.value&&(h=bt(null==b?void 0:b.value)),d.append(f,p,y,h),l.append(u,d);var g=pt("R"),k=document.createElement("section");k.classList.add("p-block"),g.append(k),function(t,i,n){var o,r=n.querySelector(".showNum"),a=v.getStoredAccessToken()?e.line:void 0;t&&i&&(null!==(o=e.basket.fixe.options)&&void 0!==o&&o.find((function(e){return e.id===dt}))?(t.checked=!0,r.style.display="block",i.onclick=function(){return rt.removeOption(i,dt,"FIXE")}):(t.checked=!1,r.style.display="none",i.onclick=function(){var e=a?[{id:"msisdn",value:a}]:void 0;rt.addOption(i,dt,"FIXE",e)}))}(c,u,d),P=p,(S=f).innerHTML="",S&&(S.innerHTML="Client mobile SFR/RED : Internet jusqu’au raccordement"),P.innerHTML="",P&&(P.innerHTML="<ul><li>Bénéficiez gratuitement de 200Go sur votre forfait mobile en attendant l'activation de votre box.</li><li>Valable 30 jours</li><li>Hors prépayé</li></ul>"),(E=k)&&(E.innerHTML="",E.innerHTML='<span class="offer">Inclus</span>'),t.append(r,c,l,g),e.content.append(t)}var S,P,E}(a);var d=a.querySelector(".showNum input"),f=a.querySelector(".showNum"),p=a.querySelector(".showNum .sr-message-error"),m=a.querySelector("label");d&&(d.onkeyup=function(){var e;d.value=null===(e=d.value)||void 0===e?void 0:e.match(/\d+/g),function(e,t,i,n){var o,r,a=e.querySelector("input[name='phonenumber'"),s=a?a.value:"";s&&function(e){return/^[0]{1}[6-7]{1}[0-9]{8}$/.test(e)}(s)?(o=i,r=[{id:"msisdn",value:s}],rt.addOption(o,dt,"FIXE",r),a.removeAttribute("class","on-error"),t.style.visibility="hidden",t.innerHTML=""):(a.setAttribute("class","on-error"),t.style.visibility="visible",t.innerHTML="Veuillez saisir un numéro de téléphone valide pour bénéficier de cette option")}(f,p,m)});var b=a.querySelector(".box1"),y=a.querySelector(".box2"),h=null===(s=e.basket.fixe)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.find((function(e){return e.id===dt})),g=null==h||null===(l=h.optionParams)||void 0===l?void 0:l.find((function(e){return"msisdn"===e.id}));h&&g&&null!=g&&g.value?(b.style.display="none",y.style.display="block"):(b.style.display="block",y.style.display="none"),ft(!(!h||g)),!(null===(u=e.basket.fixe.options)||void 0===u||!u.find((function(e){return e.id===dt})))||(b.style.display="none",y.style.display="none"),a.querySelector(".showNum .Modi="none",ft(!0)}}}}};function yt(t){e.toastr.classList.add("show"),e.toastr.querySelector("p").innerHTML=t,setTimeout((function(){e.toastr.className=e.toastr.classList.remove("show")}),3e3)}const ht=function(e){yt(e)};function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var kt=["PC","TV","CONSOLE","PROJECTEUR","TABLETTE","CASQUE_VR"];function St(t,i,n){var o,r,a,s;F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId),t.setAttribute("id","BoxEquipOptions"),t.classList.add("lame-toggle","promo"),t.innerHTML+='\n  <div class="L"></div>\n  <div class="M">\n  <p class="title">2 Bonus High Tech offerts à choisir</p></div>\n  <div cll!==(r=o.fixe)&&void 0!==r&&null!==(a=r.offer)&&void 0!==a&&null!==(s=a.gammeId)&&void 0!==s&&s.includes("DSL")?i.filter((function(e){return"bonus-eqpt-mtv"!==(null==e?void 0:e.code)})):i,l=0;l<c.length;l++){var u;t.innerHTML+='\n        <div class="L">\n            <div class="img"><img src='.concat(c[l].urlVisuel,' loading="lazy" ></div>\n        </div>\n        ').concat(n.includes(c[l].code)?'<input type="checkbox" id="optionBoxEquip-'+l+'" class="toggle" checked>':'<input type="checkbox" id="optionBoxEquip-'+l+'" class="toggle">','\n        <div class="M premium">\n        <label data-code="').concat(c[l].code,'" for="optionBoxEquip-').concat(l,'"></label>\n            <div>\n            <p class="title">').concat(c[l].subtitlte,"</p>\n            ").concat(null!=c&&null!==(u=c[l])&&void 0!==u&&u.desc?"<p>"+(null==c?void 0:c[l].desc)+"</p>":"",'\n            </div>\n        </div>\n        <div class="R premium">\n            <section class="p-block"></section>\n        </div>    \n    ')}t.querySelectorAll("label").forEach((function(e){e.onclick=function(){var i=e.getAttribute("data-code"),o=e.getAttribute("for"),r=t.querySelector("#"+o);i&&function(e,t,i,n,o){i?2==n.length?rt.removeOption(e,t,"FIXE"):(o.checked=!o.checked,ht("La sélection de 2 bonus équipements est obligatoire")):2!=n.length||o.checked?rt.addOption(e,t,"FIXE"):(o.checked=!o.checked,ht("Vous ne pouvez choisir que 2 bonus inclus"))}(e,i,n.includes(i),n,r)}}))}const Pt=function(){if(e.basket.fixe&&e.basket.fixe.offer&&"FIXE_MIG"!==e.basket.fixe.acteDeGestion&&e.basket.fixe.mainDevice&&kt.includes(e.basket.fixe.mainDevice.type)){var t,i,n,o,r,a,s,c,l,u=null!==(t=null===(i=e.optionConstants)||void 0===i||null===(n=i.fixeConstants)||void 0===n?void 0:n.optionsBoxEquip)&&void 0!==t?t:[],d=function(e){if(Array.isArray(e))return gt(e)}(y=u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?gt(e,t):void 0}}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=null!==(o=null===(r=e.basket.fixe.options)||void 0===r?void 0:r.map((function(e){return e.id})))&&void 0!==o?o:[],p=u.filter((function(e){return f.includes(e.code)})).map((function(e){return e.code}));if(p.length||e.optsEquipFixAdded&&e.basket.fixe.offer.gammeId===e.fixeOfferCode){if(p.length){e.optsEquipFixAdded=!1;var m=document.createElement("section");e.basket.fixe.mainDevice.brandLabel.includes("SAMSUNG")&&["TV","PROJECTEUR"].includes(e.basket.fixe.mainDevice.type)?St(m,u,p):St(m,((v=(b=d).findIndex((function(e){return"mtv-stbless-bonus"===e.code})))>-1&&b.splice(v,1),d=b),p),e.content.append(m)}}else e.optsEquipFixAdded=!0,e.fixeOfferCode=e.basket.fixe.offer.gammeId,null!==(a=e.basket)&&void 0!==a&&null!==(s=a.fixe)&&void 0!==s&&null!==(c=s.offer)&&void 0!==c&&null!==(l=c.gammeId)&&void 0!==l&&l.includes("DSL")?rt.addOptions(null,["bonus-eqpt-npvr300"],"FIXE"):"TV"===e.basket.fixe.mainDevice.type&&e.basket.fixe.mainDevice.brandLabel.includes("SAMSUNG")?rt.addOptions(null,["mtv-stbless-bonus","bonus-eqpt-npvr300"],"FIXE"):rt.addOptions(null,["bonus-eqpt-cloud1to","bonus-eqpt-npvr300"],"FIXE")}var b,v,y};var Et={code:"SSG_LCA_MOB_BIOS",label:"Carte prépayée",templateData:{properties:{labelLong:"SFR La Carte"}},plans:[{ptaId:"PZ0",universe:"MOB",commitmentDuration:0,pricePerMonth:0,pricePerMonthWithDiscounts:0,fidelityDiscount:0}]},Tt={code:"SSG_LCA_SSMOB",label:"Forfait prépayé seul",templateData:{properties:{labelLong:"Forfait prépayé seul"}},plans:[{ptaId:"PZ2",universe:"ECO",commitmentDuration:0,pricePerMonth:0,pricePerMonthWithDiscounts:0,fidelityDiscount:0}]},Mt="Mon offre mobile",Dt="//static.s-sfr.fr/assets/pictos/sim_40_rouge.svg",Lt="//static.s-sfr.fr/assets/pictos/Internet_Partout_40_rouge.svg";function xt(){var t=document.createElement("h2");t.setAttribute("id","PtMobileOffer"),e.basket.mobile.offer.gammeId.includes("INTERNET_PARTOUT")?t.innerHTML="Mon offre box":t.innerHTML="MIG"==e.basket.mobile.offer.acteDeGestion?"Changement d'offre mobile":Mt,e.content.append(t)}function At(){return e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_SSMOB")}function It(){return e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_MOB")}function qt(){return e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_")}function Rt(e,t){var i=e.querySelector(".sticker");i&&(t.templateData&&t.templateData.properties&&t.templateData.properties.promotionalSticker?(e.classList.add("promo"),i.innerHTML=t.templateData.properties.promotionalSticker.label):(e.classList.remove("promo"),i.remove()))}function Ct(t,i){var n=t.querySelector(".L a");n&&(n.href=g(i.seoName),"SFR"===e.brand&&window.newSFRNavigateTo&&(n.onclick=function(e){window.newSFRNavigateTo(E(i.seoName)),e.preventDefault()}));var o=t.querySelector(".L .card");if(o){var r=o.querySelector("img");!qt()&&i.templateData&&i.templateData.properties&&i.templateData.properties.skinClassName?(o.classList.add(i.templateData.properties.skinClassName),r&&(e.basket.mobile.sim&&"ESIM"===e.basket.mobile.sim.type?r.src="//static.s-sfr.fr/assets/pictos/e_sim_40_rouge.svg":r.src=Dt)):qt()&&r&&(r.src=Dt)}}function Ot(t,i){var n=t.querySelector(".M a");n&&(n.href=g(i.seoName),"SFR"===e.brand&&window.newSFRNavigateTo&&(n.onclick=function(e){window.newSFRNavigateTo(E(i.seoName)),e.preventDefault()}));var o,r,a,s=t.querySelector(".M .title");s&&(s.innerHTML=qt()?e.basket.mobile.offer.label?e.basket.mobile.offer.label:null===(o=i.templateData)||void 0===o?void 0:o.properties.labelLong:null!==(r=i.templateData)&&void 0!==r&&null!==(a=r.properties)&&void 0!==a&&a.labelLong?i.templateData.properties.labelLong:e.basket.mobile.offer.label)}function wt(t,i){var n=t.querySelector(".M .desc ul");if(n&&(n.innerHTML="",i.templateData&&i.templateData.properties.blocs&&i.templateData.properties.blocs.forEach((function(e){var t=document.createElement("li");t.innerHTML=e.desc,n.append(t)})),null!=e.basket.mobile.offer.withPortability)){var o=document.createElement("li");o.innerHTML=e.basket.mobile.offer.withPortability?"Conservation du numéro":"Attribution d'un nouveau numéro",n.append(o)}var r=t.querySelector(".M .desc:nth-of-type(2) p");if(r)if(e.basket.mobile.offer.migrationDate){if(n){var a=v.getDtFromTs(e.basket.mobile.offer.migrationDate);r.innerHTML=r.innerHTML.replace("13/04/2021",a)}}else r.innerHTML=""}function Ft(t){var i=t.querySelector(".R .p-block");if(i){i.querySelector("span");var n=i.querySelector(".download"),o=e.basket.mobile.offer.totalPricePerMonthWithDiscount||0===e.basket.mobile.offer.totalPricePerMonthWithDiscount?e.basket.mobile.offer.totalPricePerMonthWithDiscount:e.basket.mobile.offer.totalPricePerMonth;if(i.innerHTML=Be.formatPrice(o,!0,"Offert"),e.basket.mobile.offer.discounts){var r=e.basket.mobile.offer.discounts.filter((function(e){return!e.duration&&e.discountValue>0&&"ODR"!==e.discountType}))[0],a=e.basket.mobile.offer.discounts.filter((function(e){return e.duration&&e.duration>0&&e.discountValue>0}))[0];if(a){var s=r?r.priceAfter:e.basket.mobile.offer.totalPricePerMonth,c=document.createElement("p");c.innerHTML="Pendant ".concat(a.duration," mois puis ").concat(Be.toEuros(s),"/mois"),i.append(c)}if(r){var l=document.createElement("p");l.innerHTML="au lieu de ".concat(Be.toEuros(e.basket.mobile.offer.totalPricePerMonth)),i.append(l)}}var u=document.createElement("p");if(u&&(u.innerHTML=e.basket.mobile.offer.commitmentDuration?"Engagement ".concat(e.basket.mobile.offer.commitmentDuration," mois"):"Sans engagement",i.append(u)),e.basket.mobile.offer.discounts){var d=e.basket.mobile.offer.discounts.filter((function(e){return"ODR"===e.discountType}))[0];d&&(n.href=d.url,i.append(n))}}}function Nt(t){var i=t.querySelector(".R .r-block");if(i){var n=i.querySelector("p");i.innerHTML="";var o=[];e.basket.mobile.offer.discounts&&(o=e.basket.mobile.offer.discounts.filter((function(e){return e.label}))),o.length>0?(i.append(n),o.forEach((function(e){var t=document.createElement("p");e.discountValue>0&&"ODR"!==e.discountType?t.innerHTML="".concat(e.label," -").concat(Be.toEuros(e.discountValue),"/mois"):t.innerHTML=e.label,i.append(t)}))):i.remove()}}function _t(e,t){var i=e.querySelector(".R .p-block"),n=t.plans.filter((function(e){return"MOB"==e.universe}))[0];if(i&&n){var o=n.pricePerMonthWithDiscounts?n.pricePerMonthWithDiscounts:n.pr r=n.discounts.filter((function(e){return!e.duration&&e.discountValue>0&&"MULTIPACK"!==e.discountType}))[0],a=n.discounts.filter((function(e){return e.duration&&e.duration>0&&e.discountValue>0}))[0];if(a){var s=r?r.priceAfter:n.pricePerMonth,c=document.createElement("p");c.innerHTML="Pendant ".concat(a.duration," mois puis ").concat(Be.toEuros(s),"/mois"),i.append(c)}if(r){var l=document.createElement("p");l.innerHTML="au lieu de ".concat(Be.toEuros(n.pricePerMonth)),i.append(l)}}if(n.commitmentDuration&&n.commitmentDuration>0){var u=document.createElement("p");u.innerHTML="Engagement ".concat(n.commitmentDuration," mois"),i.append(u)}}}function Bt(t,i){var n=i.plans.filter((function(e){return"MOB"==e.universe}))[0],o=t.querySelector(".R .r-block");if(o&&n){var r=o.querySelector("p");o.innerHTML="";var a=[];i.mpSimulatedDiscount&&e.basket.mobile.offer.discounts&&e.basket.mobile.offer.discounts.filter((function(e){return"MULTIPACK"==e.discountType}))[0]&&a.push({label:"Remise Multi-Packs  -".concat(Be.toEuros(i.mpSimulatedDiscount),"/mois")}),n.discounts&&(a=a.concat(n.discounts.filter((function(e){return e.label&&"MULTIPACK"!==e.discountType})))),a.length>0?(o.append(r),a.forEach((function(e){var t=document.createElement("p");e.discountValue&&e.discountValue>0?t.innerHTML="".concat(e.label," -").concat(Be.toEuros(e.discountValue),"/mois"):t.innerHTML=e.label,o.append(t)}))):o.remove()}}const Ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT";if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&"RM"!=e.basket.mobile.offer.acteDeGestion){v.setStepper(3);var i=we("Mobile");if(i){i.classList.add("first");var n=It()?Et:At()?Tt:N(e.basket.mobile.acteDeGestion,e.basket.mobile.offer.gammeId);if(n&&("DEFAULT"==t&&xt(),Rt(i,n),Ct(i,n),Ot(i,n),"ASSOCIATION"==t?(_t(i,n),i.querySelector(".M .desc ul")&&(i.querySelector(".M .desc ul").innerHTML=""),i.querySelector(".M .desc:nth-of-type(2) p")&&(i.querySelector(".M .desc:nth-of-type(2) p").innerHTML=""),Bt(i,n)):(wt(i,n),Ft(i),Nt(i)),e.content.append(i)),ge(e.basket.mobile.offer.ptaId)){"DEFAULT"===t&&xt();var o=i.querySelector(".L .card"),r=o.querySelector("img");r&&(r.src=Lt);var a=i.querySelector(".sticker");a.remove();var s=i.querySelector(".M .title");s&&(s.innerHTML=e.basket.mobile.offer.label);var c=i.querySelector(".M .desc ul");c&&("QG0"===e.basket.mobile.offer.ptaId?c.innerHTML="3€/jour déclenché au 1er usage":c.innerHTML="");var l=i.querySelector(".M .desc:nth-of-type(2) p");l&&(l.innerHTML=""),Ft(i),Nt(i),e.content.append(i)}}}else if(e.basket.mobile&&e.basket.mobile.mainDevice&&!e.basket.mobile.offer){var u=document.createElement("h2");u.setAttribute("id","PtMobileOffer"),u.innerHTML=Mt,e.content.append(u)}};var Wt=i(669);const Gt=function(){var t="".concat(e.env.endpoints["service-home"],"/home");return Wt.get(t,{params:{universe:"GP",act:"OPEN",brand:"SFR",pnm:!1,pnf:!1}})},Ut=function(){return e.offers?Promise.resolve():new Promise((function(t,i){Gt().then((function(i){var n,o;e.offers=null!==(n=null===(o=i.data)||void 0===o?void 0:o.data)&&void 0!==n?n:i.data,t(e.offers)}),(function(){t()}))}))},Xt=function(){var t,i,n,o=null===(t=e.offers)||void 0===t||null===(i=t.offers)||void 0===i||null===(n=i.CQT)||void 0===n?void 0:n.offers;if(o)return o[0]},Vt=function(){if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&"HM1"===e.basket.mobile.offer.ptaId){var t=we("Home");if(t){t.classList.add("first");var i=Xt();i&&(function(t){var i,n=document.createElement("h2");n.setAttribute("id","PtMobileOffer"),n.innerHTML="Mon offre "+(null===(i=t.plans[0])||void 0===i?void 0:i.ptaLabel),e.content.append(n)}(i),t.querySelector(".sticker").remove(),function(t,i){var n=t.querySelector(".M a");n&&(n.href="".concat(e.env.redirectionRootPaths[e.brand],"/maison/offre-protection/"));var o,r=t.querySelector(".M .title");r&&(r.innerHTML=null===(o=i.plans[0])||void 0===o?void 0:o.ptaLabel)}(t,i),function(e){var t=e.querySelector(".M .desc ul");t&&(t.innerHTML="<li>Autosurveillance avec stockage 30 jours</li>",t.innerHTML+="<li>Alerte par SMS, mail ou sur l’application</li>",t.innerHTML+="<li>L’assistance et accompagnement via Europ Assistance.</li>")}(t),function(t){var i,n=null===(i=t.querySelectorAll(".R .p-block"))||void 0===i?void 0:i[0];if(n){n.innerHTML="";var o=e.basket.mobile.offer.totalPricePerMonthWithDiscount||0===e.basket.mobile.offer.totalPricePerMonthWithDiscount?e.basket.mobile.offer.totalPricePerMonthWithDiscount:e.basket.mobile.offer.totalPricePerMonth;n.innerHTML=Be.formatPrice(o,!0,"Offert");var r=document.createElement("p");r.innerHTML=e.basket.mobile.offer.commitmentDuration?"Engagement ".concat(e.basket.mobile.offer.commitmentDuration," mois"):"Sans engagement",n.append(r)}}(t),function(t,i){var n,o=null==i||null===(n=i.plans)||void 0===n?void 0:n.filter((function(e){return"SSENG"==e.universe}))[0],r=t.querySelector(".R .r-block");if(r&&o){var a=r.querySelector("p");r.innerHTML="";var s=[];i.mpSimulatedDiscount&&e.basket.mobile.offer.discounts&&e.basket.mobile.offer.disce}))[0]&&s.push({label:"Remise Multi-Packs  -".concat(Be.toEuros(i.mpSimulatedDiscount),"/mois")}),o.discounts&&(s=s.concat(o.discounts.filter((function(e){return e.label&&"MULTIPACK"!==e.discountType})))),s.length>0?(r.append(a),s.forEach((function(e){var t=document.createElement("p");e.discountValue&&e.discountValue>0?t.innerHTML="".concat(e.label," -").concat(Be.toEuros(e.discountValue),"/mois"):t.innerHTML=e.label,r.append(t)}))):r.remove()}else r.remove()}(t,i),function(e){var t=e.querySelector(".M .equipements");t&&t.querySelectorAll(".equ .desc").forEach((function(e){e&&"Centrale Sécurité x1"===e.innerHTML&&(e.innerHTML="Centrale de sécurité x1")}))}(t),function(t,i){var n,o=null===(n=t.querySelectorAll(".R .p-block"))||void 0===n?void 0:n[1];if(i&&i.plans[0]){var r,a=null==i||null===(r=i.plans[0])||void 0===r?void 0:r.devicePrices[0];if("COMPTANT"===e.basket.mobile.mainDevice.paymentMode){var s=nullerHTML=Be.formatPrice(s,!1,""))}else if("LOAN_FDPSFR"===e.basket.mobile.mainDevice.paymentMode){var c=null==a?void 0:a.paymentOption.filter((function(e){return"LOAN_FDPSFR"==(null==e?void 0:e.billingMode)}))[0];c&&(o.innerHTML=Be.formatPrice(c.upfrontWithPayback,!1,""),o.innerHTML+="<p>Puis ".concat(Be.toEuros(c.monthlyFeeWithDiscount)," x24</p>"),o.innerHTML+='<p class="g ecotaxe">Dont 0,02€ d\'éco-participation\n                                            <i class="tooltip">\n                                                <span>\n                                                L’éco-participation est une contribution payée par les consommateurs pour tout achat d’un appareil neuf et reversée à un éco-organisme, en charge du traitement et du recyclage des déchets d’équipements électriques et électroniques (DEEE). Incluse dans le prix d’achat, cette éco-participation permet de financer et améliorer la collecte, la dépollution et le recyclage des DEEE. Son montant varie selon le produit acheté et selon les barèmes d’éco-participation des éco-organismes. Chaque distributeur ou fabricant d’équipements électriques ou électroniques adhère à un éco-organisme et applique le montant défini. \n                                                </span>\n                                            </i>\n                                        </p>')}}}(t,i),e.content.append(t))}}};var jt=i(669);const zt=function(){var t=v.getStoredAccessToken()?e.line:void 0,i="".concat(e.env.endpoints["service-deviceinfo"],"/devices"),n={universe:"GP",act:"OPEN",brand:e.brand,line:t},o=v.getStorageData("deviceInfo",i,n);return o?Promise.resolve(o):jt.get(i,{params:n})};function Qt(t){if(e.devices&&e.devices.mobile&&e.devices.mobile.deviceGroups)return e.devices.mobile.deviceGroups.filter((function(e){return e.devices.map((function(e){return e.sapCode})).includes(t)}))[0]}const Yt={loadDevices:function(){return e.devices?Promise.resolve():new Promise((function(t,i){zt().then((function(i){var n,o;if(e.devices=null!==(n=null===(o=i.data)||void 0===o?void 0:o.data)&&void 0!==n?n:i.data,e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id&&e.basket.mobile.mainDevice.id!==U){var r=Qt(e.basket.mobile.mainDevice.id);w(null==r?void 0)}))}))},getMobileDeviceGroup:Qt,getFixeDeviceGroup:function(t){if(e.devices&&e.devices.fixe&&e.devices.fixe.deviceGroups)return e.devices.fixe.deviceGroups.filter((function(e){return e.devices.map((function(e){return e.sapCode})).includes(t)}))[0]},getMobileDeviceGroupBySeoName:function(t){if(e.devices&&e.devices.mobile&&e.devices.mobile.deviceGroups)return e.devices.mobile.deviceGroups.filter((function(e){return e.seoName===t}))[0]}};var Jt=i(669);const Kt=function(){return console.log("_PT.env.endpoints['push-accessories']",e.en.concat(e.env.endpoints["push-accessories"]))},$t=function(t){if(e.accessories)return e.accessories.find((function(e){return e.sapCode===t}))},Zt=function(){return new Promise((function(t,i){Kt().then((function(i){e.pushAccessories=i.data,t()}),(function(){t()}))}))};var ei=v.getABT(609);const ti=function(){var t,i,n,o,r,a,s,c,l,u,d,f,p,m,b,v,y,h,g,k,S,P,E,T=Xt(),M=(null===(t=e.basket)||void 0===t?void 0:t.mobile)&&(null===(i=e.basket)||void 0===i||null===(n=i.mobile)||void 0===n?void 0:n.accessories)&&(null===(o=e.basket)||void 0===o||null===(r=o.mobile)||void 0===r||null===(a=r.accessories)||void 0===a?void 0:a.length),D=(null===(s=e.basket)||void 0===s?void 0:s.temporary)&&(null===(c=e.basket)||void 0===c||null===(l=c.temporary)||void 0===l?void 0:l.accessories)&&(null===(u=e.basket)||void 0===u||null===(d=u.temporary)||void 0===d||null===(f=d.accessories)||void 0===f?void 0:f.length),L=!1,x=!1;if(e.accessories&&(M||D)&&(h=M,g=e.basket.mobile&&Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id),k=g&&g.seoName&&g.seoName.toLowerCase(),S=k&&e.pushAccessories?e.pushAccessories.find((function(e){return k.includes(e.seoName)})):null,P=h?e.basket.mobile.accessories:e.basket.temporary.accessories,E=S?S.lst.map((function(e){return e.accId})):[],S&&Eilter((function(e){return!E.includes(e.id)})):P).forEach((function(e){var t=$t(e.id);"ACCESSOIRE_HOME"===(null==t?void 0:t.accessoryCategory)&&(L=!0)})),null===(p=window)||void 0===p||null===(m=p._eT)||void 0===m||m.hbs((function(e){e&&(x=!0)})),L&&!x&&"HM1"!==(null===(b=e.basket)||void 0===b||null===(v=b.mobile)||void 0===v||null===(y=v.offer)||void 0===y?void 0:y.ptaId)){var A=we("ProduitNonDispo"),I=we("DejaClient");if(e.smallReceipt&&e.smallReceipt.querySelectorAll(".btn").forEach((function(e){e.classList.add("disabled")})),e.receipt&&e.receipt.querySelectorAll(".btn").forEach((function(e){e.classList.add("disabled")})),A){var q,R,C,O,w,F,N,_,B=A.querySelector(".btn"),H=A.querySelector(".link"),W={mobile:{mainDevice:{id:null==T||null===(q=T.plans)||void 0===q||null===(R=q[0])||void 0===R||null===(C=R.devicePrices)||void 0===C||null===(O=C[0])||void 0===O?void 0:O.sapCode,quantity:1,paymentMode:"LOAN_FDPSFR"},offer:{ptaId:null==T||null=====F?void 0:F.ptaId,gammeId:null==T?void 0:T.code,universe:null==T||null===(N=T.plans)||void 0===N||null===(_=N[0])||void 0===_?void 0:_.universe,act:"CQT",withPortability:!1}}};B&&T&&(B.onclick=function(e){B.classList.add("loader"),Fr.put(W)}),H.href="".concat(e.env.redirectionRootPaths[e.brand],"/maison/offre-protection/"),H&&(H.onclick=function(e){H.classList.add("loader")}),A.classList.add("first"),e.content.append(A)}if(I){var G=I.querySelector(".btn4");G&&(G.onclick=function(t){window.location.replace("".concat(e.env.redirectionRootPaths[e.brand],"/mon-espace-client"))}),e.content.append(I)}}};var ii=i(669);const ni=function(){var t=v.getStoredAccessToken()?e.line:void 0,i="".concat(e.env.endpoints["service-clientinfo"]),n={line:t};if(t){var o=v.getStorageData("infoClient",i,n);return o?Promise.resolve(o):ii.get(i,{params:n})}return Promise.resolve({})},oi=function(){return new Promise((function(t,i){ni().then((function(i){var n,o;e.clientInfos=null!==(n=null===(o=i.data)||void 0===o?void 0:o.data)&&void 0!==n?n:null==i?void 0:i.data,e.clientInfos&&(e.isAuthenticate=!0),t()}),(function(){i()}))}))},ri=function(){if(e.clientInfos&&e.clientInfos.parc&&e.clientInfos.parc.offer)return e.clientInfos.parc.offer.currentPlan};var ai="//static.s-sfr.fr/assets/pictos/sim_40_rouge.svg";const si=function(){if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&"RM"==e.basket.mobile.offer.acteDeGestion){var t=we("Mobile");if(t){t.classList.add("first");var i=ri();i&&((n=document.createElement("h2")).setAttribute("id","PtMobileOffer"),n.innerHTML="Conservation de votre offre actuelle",e.content.append(n),t.querySelector(".sticker").remove(),function(t,i){var n=t.querySelector(".L a");n&&n.removeAttribute("href");var o=t.querySelector(".L .card");if(o){var r=o.querySelector("img");r&&(!e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_")&&i.templateData&&i.templateData.properties&&i.templateData.properties.skinClassName?(o.classList.add(i.templateData.properties.skinClassName),e.basket.mobile.sim&&"ESIM"===e.basket.mobile.sim.type?r.src="//static.s-sfr.fr/assets/pictos/sim_40_rouge.svg":r.src=ai):r.src=ai)}}(t,i),function(e,t){var i=e.querySelector(".M .title");i&&(i.removeAttribute("href"),i.innerHTML=t.gammeLabel)}(t,i),function(e){var t=e.querySelector(".M .desc ul");if(t){t.innerHTML="";var i=document.createElement("li");i.innerHTML="Conservation de votre offre",t.append(i);var n=document.createElement("li");n.innerHTML="Conservation du numéro",t.append(n)}var o=e.querySelector(".M .desc:nth-of-type(2) p");o&&(o.innerHTML="")}(t),function(t){var i=t.querySelector(".R .p-block");if(i&&(i.innerHTML="",null!=e.basket.mobile.offer.commitmentDuration)){var n=document.createElement("p");n.classList.add("g"),n.innerHTML=e.basket.mobile.offer.commitmentDuration>0?"Réengagement ".concat(e.basket.mobile.offer.commitmentDuration," mois"):"Sans réengagement",i.append(n)}}(t),t.querySelector(".R .r-block").remove(),e.content.append(t))}}var n},ci=function(){if(e.basket.fixe&&e.basket.fixe.mainDevice&&e.basket.fixe.mainDevice.id){var t=we("TV");if(t){var i=Yt.getFixeDeviceGroup(e.basket.fixe.mainDevice.id);if(i){var n=i.devices.filter((function(t){return t.sapCode==e.basket.fixe.mainDevice.id}))[0],o=null!=n&&n.properties&&null!=n&&n.properties.screenSize?n.properties.screenSize:i.properties.screenSize;!function(t,i,n){var o=t.querySelector(".L a");o&&(o.href=P(e.basket.fixe.mainDevice.type,i,n),"SFR"===e.brand&&window.newSFRNavigateTo&&(o.onclick=function(t){window.newSFRNavigateTo(D(e.basket.fixe.mainDevice.type,i,n)),t.preventDefault()}));var r=t.querySelector(".L img");r&&(n.pictures&&n.pictures[0]&&n.pictures[0].small?r.src=n.pictures[0].small:r.remove())}(t,i,n),function(t,i,n){var o=t.querySelector(".M a");o&&(o.href=P(e.basket.fixe.mainDevice.type,i,n),"SFR"===e.brand&&window.newSFRNavigateTo&&(o.onclick=function(t){window.newSFRNavigateTo(D(e.basket.fixe.mainDevice.type,i,n)),t.preventDefault()}));var r=t.querySelector(".M .title");r&&(r.innerHTML=v.setTitleBasedOnDeviceType(i,n))}(t,i,n),function(t,i){var n=t.querySelector(".M p"),o=t.querySelector(".M p.subtitle");if(n&&("TV"!=e.basket.fixe.mainDevice.type&&"PC"!=e.basket.fixe.mainDevice.type||!i?n.remove():n.innerHTML="".concat(i," pouces")),o){var r=e.basket.fixe.subscribed.equipments.filter((function(t){return t.id==e.basket.fixe.mainDevice.code}))[0];r&&Ne[r.logisticAction]?(o.innerHTML=Ne[r.logisticAction].title,"A_RECEPTIONNER_LIVRAISON_ECOM"===r.logisticAction&&v.setStepper(1),"A_RECEPTIONNER_RDV"===r.logisticAction&&v.setStepper(2)):o.remove()}}(t,o),function(t){var i=t.querySelector(".R .p-block");if(i){var n,o,r=e.basket.fixe.mainDevice.totalPriceWithDiscount?e.basket.fixe.mainDevice.totalPriceWithDiscount:e.basket.fixe.mainDevice.totalPrice;if(i.innerHTML=Be.formatPrice(r,!1),"COMPTANT"==e.basket.fixe.mainDevice.paymentMode){var a=document.createElement("p");a.innerHTML="En 1x",i.append(a)}else if("LOAN_FDPSFR"==e.basket.fixe.mainDevice.paymentMode){var s=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);if(s&&s.plans[0]){var c=s.plans[0].devicePrices.filter((function(t){return t.sapCode==e.basket.fixe.mainDevice.id}))[0];if(c){var l=c.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0];if(l){var u=document.createElement("p");u.innerHTML="+".concat(Be.toEuros(l.monthlyFeeWithDiscount),"/mois x").concat(l.nbPayment," mois"),24===l.nbPayment&&(u.innerHTML+="<br>(soit ".concat(Be.toEuros(l.monthlyFeeWithDiscount*l.nbPayment),")")),i.append(u)}}}}null!==(n=e.basket.fixe)&&void 0!==n&&null!==(o=n.mainDevice)&&void 0!==o&&o.type&&function(e,t){var i=function(e){var t=0;switch(e){case"PC":t=25;break;case"PS":case"CONSOLE":t=24;break;case"TV":t=1200;break;case"PROJ":case"PROJECTEUR":case"TABLETTE":t=50;break;case"CASQUE_VR":t=13;break;default:t=0,console.log("Ooops !!! Dont Now Type Of Box")}return t}(t);if(i){var n=document.createElement("p");n.classList.add("g"),n.innerHTML="Dont ".concat(Be.toEuros(i)," d’éco participation");var o=document.createElement("i");o.classList.add("tooltip"),o.innerHTML="<span>".concat(G,"</span>"),n.append(o),e.append(n)}}(i,e.basket.fixe.mainDevice.type)}}(t),function(e,t){var i=e.querySelector(".M section.r-block");if(i)if(t.delivery&&t.delivery.preOrder){var n=new Date(t.delivery.firstDeliveryDate),o=n.getDate()<10?"0".concat(n.getDate()):n.getDate(),r=n.getMonth()<9?"0".concat(n.getMonth()+1):n.getMonth()+1,a=n.getFullYear().toString().slice(-2);i.innerHTML="<p>En précommande</p>\n                                  <p>Expédition à partir du ".concat(o,"/").concat(r,"/").concat(a,"</p>")}else i.remove()}(t,n),e.content.append(t)}}}},li=function(){return!(!e.basket.mobile||!e.basket.mobile.offer||"ECO"!=e.basket.mobile.offer.universe&&"CASH"!=e.basket.mobile.offer.universe||!e.basket.mobile.mainDevice)},ui=function(e,t,i){e&&(e.innerHTML="",t.devices.filter((function(e){return e.delivery&&e.delivery.stock&&e.properties.color.label==i.properties.color.label})).filter((function(e){return"RECONDITIONNE"!=t.properties.state||e.grade==i.grade})).forEach((function(t){var i=document.createElement("option");i.text=t.properties.memoryCapacity,i.value=t.sapCode,e.append(i)})),e.value=i.sapCode)},di=function(e,t,i){if(e){if(t.properties&&"RECONDITIONNE"==t.properties.state){var n=e.querySelector("select"),o=[],r=["A+","A","B","C"];return n.innerHTML="",t.devices.filter((function(e){var t;return(null===(t=e.delivery)||void 0===t?void 0:t.stock)&&e.properties.color.label==i.propermemoryCapacity==i.properties.memoryCapacity})).forEach((function(e){var t=document.createElement("option");t.text=e.gradeLabel,t.value=e.sapCode,o.push({optionElem:t,grade:e.grade})})),o.sort((function(e,t){return r.indexOf(e.grade)-r.indexOf(t.grade)})).forEach((function(e){return n.append(e.optionElem)})),n.value=i.sapCode,n}e.remove()}return null},fi=function(t,i,n,o){t.classList.add("loader"),Fr.put({mobile:{offer:{act:e.basket.mobile.offer.acteDeGestion,geof e)return vi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructay.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?vi(e,t):void 0}}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function yi(){return window.hasOwnProperty("_eT")}function hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vue",t=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!ull;"string"==typeof t?n=t:(n=Li(Xi(t)),i&&gi(t)),yi()?windoe.debug("_eT.".concat(e),n)}function gi(t){if(t){var i=function(e){var t=!!e.displayedProducts&&e.displayedProducts.findIndex((function(e){return!0===e.isMain}))>-1;return e.displayedProducts?e.displayedProducts.filter((function(e){return e.isMain||!t})):[]}(t);window.products=i.map((function(e){ret_product?window.stat_get_product(t.type,t.t){var i,n=function(e){return e.displayedProducts?e.displayedProducts.filter((function(e){return!e.isMain})):[]}(t).map((function(e){return ki(e)})),o=function(e){return e.displayedProducts?e.displayedProducts.filisMain})):[]}(t).map((function(e){return ki(e)}));window.elrProducts={},n.length>0&&(window.elrProducts.listing=n),o.length>0&&(window.elrProducts.fiche=o),window.elrProducts.basket={products:(i=Mi(Si(e.basket))).products.map((function(e){return ki(e)})),amount_buy:i.amountBuy,amount_firstFacture:i.amountFirstBill,amount_perMonth:i.amountPerMonth}}(t),yi()?window.stat_evt(Ti(t),window.products):(console.debug("stat_evt",Ti(t),window.products),console.debug("eulerian_data",window.elrProducts))}}function ki(e){var t={type:e.type,id:e.codeProduct,name:e.label,quantity:e.quantity};return["OffreFixe","OffreMobile","OffreOTT","Option"].includes(e.type)&&(t.engagement=e.engagement,t.price_monthly_with_promo=e.priceMonthlyWithPromo,t.price_monthly_without_promo=e.priceMonthlyWithoutPromo),"Accessoire"===e.type&&(t.price_with_promo=e.priceWithPromo,t.price_without_promo=e.priceWithoutPromo),"Reprise_Mobile"===e.type&&(t.price_device_only=e.priceDeviceOnly,t.marque=e.brandLabel),["Device","Tv","Console"].includes(e.type)&&(t.price_device_only=e.priceDeviceOnly,t.price_with_abonnement=e.priceWithAbonnement),["Device","Tv","Console","Accessoire"].includes(e.type)&&(t.marque=e.brandLabel),t}function Si(e){return{basketContent:e,options:Oi(e),accessories:wi(e)}}function Pi(e){return"CB4X"===e?"4X":"LOAN_FDPSFR"===e?"FDP":"LOAN_24X_PAYANT"===e||"LOAN_24X_SANS_FRAIS"===e?"CCL24":"LOAN_12X_PAn(t{added:i.length?i:t.products,removed:e.products.filter((function(e){return-1===t.products.findIndex((function(t){return t.codeProduct===e.codeProduct}))}))}}function Ti(e){return e.omnitureEvent&&e.omnitureEvent.events?e.omnitureEvent.events:"event14"}function Mi(e){var t,i,n=[],o=e.basketContent;return o&&(o.mobile&&o.mobile.offer&&n.push({relatedBloc:null,type:"OffreMobile",codeProduct:o.mobile.offer.gammeId,label:o.mobile.offer.label,quantity:1,engagement:o.mobile.offer.commitmentDuration,priceMonthlyWithPromo:o.mobile.offer.totalPricePerMonthWithDiscount/100,priceMonthlyWithoutPromo:o.mobile.offer.totalPricePerMonth/100,price:o.mobile.offer.totalPricePerMonthWithDiscount/100}),o.mobile&&o.mobile.mainDevice&&n.push({relatedBloc:null,type:"Device",codeProduct:o.mobile.mainDevice.id,label:o.mobile.mainDevice.modelLabel,brandLabel:o.mobile.mainDevice.brandLabel,quantity:o.mobile.mainDevice.quantity,priceDeviceOnly:o.mobile.mainDevice.totalPrice/100,priceWithAbonnement:o.mobile.mainDevice.totalPriceWithDiscount/100,price:o.mobile.mainDevice.totalPriceWithDiscount/100}),o.mobile&&o.mobile.buyBackRecord&&n.push({relatedBloc:null,type:"Reprise_Mobile",codeProduct:o.mobile.buyBackRecord.id,label:o.mobile.buyBackRecord.modelLabel,brandLabel:o.mobile.buyBackRecord.brand,quantity:1,priceDeviceOnly:o.mobile.buyBackRecord.totalPrice/100,price:o.mobile.buyBackRecord.totalPrice/100}),o.fixe&&o.fixe.offer&&n.push({relatedBloc:null,type:"OffreFixe",codeProduct:o.fixe.offer.gammeId,label:o.fixe.offer.label,quantity:1,engagement:o.fixe.offer.commitmentDuration,priceMonthlyWithPromo:o.fixe.offer.totalPricePerMonthWithDiscount/100,priceMonthlyWithoutPromo:o.fixe.offer.totalPricePerMonth/100,price:o.fixe.offer.totalPricePerMonthWithDiscount/100}),o.fixe&&o.fixe.mainDevice&&"554777"!==o.fixe.mainDevice.id&&n.push({relatedBloc:null,type:o.fixe.mainDevice.type,codeProduct:o.fixe.mainDevice.id,label:o.fixe.mainDevice.modelLabel,brandLabel:o.fixe.mainDevice.brandLabel,quantity:o.fixe.mainDevice.quantity,priceDeviceOnly:o.fixe.mainDevice.totalPrice/100,priceWithAbonnement:o.fixe.mainDevice.totalPriceWithDiscount/100,price:o.fixe.mainDevice.totalPriceWithDiscount/100}),e.options&&e.options.forEach((function(e){var t=n.find((function(t){return t.codeProduct===e.code}));if(t)t.quantity++;else{var i=rt.getPriceInfos(e);n.push({relatedBloc:null,type:e.urlOtt?"OffreOTT":"Option",codeProduct:e.code,label:e.name,quantity:1,engagement:i.commitmentDuration,priceMonthlyWithPromo:i.price,priceMonthlyWithoutPromo:e.price,price:i.price})}})),e.accessories&&null!=o&&null!==(t=o.mobile)&&void 0!==t&&null!==(i=t.accessories)&&void 0!==i&&i.length&&e.accessories.forEach((function(e){var t=n.find((function(t){return t.codeProduct===e.sapCode})),i=o.mobile.accessories.find((function(t){return t.id===e.sapCode}));t?t.quantity++:n.push({relatedBloc:null,type:"Accessoire",codeProduct:e.sapCode,label:e.modelLabel,brandLabel:e.brand,quantity:null==i?void 0:i.quantity,priceWithPromo:e.price.priceWithDiscount/100,priceWithoutPromo:e.price.nudeprice/100,price:e.price.priceWithDiscount/100})})),o.mobile&&o.mobile.sim&&n.push({relatedBloc:null,type:"ESim",codeProduct:o.mobile.sim.deviceId,label:o.mobile.sim.label,quantity:1,priceMonthlyWithPromo:o.mobile.sim.totalPriceWithDiscount/100,priceMonthlyWithoutPromo:o.mobile.sim.totalPrice/100,price:o.mobile.sim.totalPriceWithDiscount/100}),o.mobile&&o.mobile.insurance&&n.push({relatedBloc:null,type:"Insurance",codeProduct:o.mobile.insurance.id,label:o.mobile.insurance.label,quantity:1,priceMonthlyWithPromo:o.mobile.insurance.totalPricePerMonthWithDiscount/100,priceMonthlyWithoutPromo:o.mobile.insurance.totalPricePerMonth/100,price:o.mobile.insurance.totalPricePerMonthWithDiscount/100}),o.fixe&&o.fixe.insurance&&n.push({relatedBloc:null,type:"Insurance",codeProduct:o.fixe.insurance.id,label:o.fixe.insurance.label,quantity:1,priceMonthlyWithPromo:o.fixe.insurance.totalPricePerMonthWithDiscount/100,priceMonthlyWithoutPromo:o.fixe.insurance.totalPricePerMonth/100,price:o.fixe.insurance.totalPricePerMonthWithDiscount/100})),{products:n,amountBuy:o&&o.global?o.global.totalPriceWithDiscount/100:0,amountFirstBill:o&&o.global?Di(o)/100:0,amountPerMonth:o&&o.global?o.global.totalPricePerMonthWithDiscount/100:0}}function Di(e){var t=e.mobile&&e.mobile.activationPrice?e.mobile.activationPrice:0,i=e.fixe&&e.fixe.activationPricixe.offer&&e.fixe.offer.gammeId.includes("-TV")?e.fixe.totalPriceWithDiscount:0;return n?t+n:t+i}function Li(e){return{pn:xi(e),ev:e.omnitureEvent&&e.omnitureEvent.events?e.omnitureEvent.events:"event14",v:Ii(e)}}function xi(e){return Ai(e,e.pageName)}function Ai(e,t){return e&&e.values?Object.entries(e.values).reduce((function(e,t){var i=mi(t,2),n=i[0],o=i[1],r=new RegExp("\\[".concat(n,"\\]"));return"".concat(e).replace(r,o)}),t):t}function Ii(e){var t={};remnitureVar).forEach((function(i){var n=mi(i,2),o=n[0],r=n[1];return t[o]=Ai(e,r),t})),t}function qi(e){var t="Vide";return e.products&&e.products.length>0&&(t=e.products.map((function(e){return e.type})).filter((function(e,t,i){return i.indexOf(e)===t})).join(";")),t}function Ri(e){if(e){var t=e.creationDate,i=((new Date).getTime()-new Date(t).getTime())/1e3;return"".concat(Math.round(i/3600),"H")}return"0H"}function Ci(e){return e&&e.products&&e.products.length?e.products.map((function(e){return e.codeProduct})).join("|"):"Vide"}function Oi(e){var t=[];return e&&e.fixe&&e.fixe.options&&t.push.apply(t,pi(Fi(e.fixe.options,"FIXE"))),e&&e.mobile&&e.mobile.options&&t.push.apply(t,pi(Fi(e.mobile.options,"MOBILE"))),e&&e.temporary&&e.temporary.options&&t.push.apply(t,pi(Fi(e.temporary.options))),t.filter((function(e){return!!e}))}function wi(e){var t=[];return e&&e.fixe&&e.fixe.accessories&&t.push.apply(t,pi(Ni(e.fixe.accessories))),e&&e.mobile&&e.mobile.accesccessories))),e&&e.temporary&&e.temporat,))),t.filter((function(e){return!!e}))}function Fi(t,i){return t.map((function(t){return e.options?e.options.find((function(e){return Ye.match(e,t.id,i)})):null}))}function Ni(e){return e.map((function(e){return $t(e.id)}))}function _i(e){return e||{}}function Bi(e){if(e){var t="";if(e.mobile&&(t="Mobile"),e.fixe&&e.fixe.offer){var i=Wi(e.fixe.offer.gammeId);t?t+=" Et "+ffer.gammeId)):e.isAuthenticate?"Bol:VLA":"Bol:Conquete";var i=Gi(t);return"RM"===i?"Bol:RM":"MIG"===i?"Bol:Mig":void 0}function Wi(e){return e.includes("THD")?"FIBRE":e.includes("CBL")?"CABLE":e.includes("4G")?"Box 4G":e.includes("DSL")?"ADSL":"FIXE"}function Gi(e){if(e){if(e.mobile&&e.mobile.offer){if("RM"===e.mobile.offer.acteDeGestion||"RM"===e.mobile.offer.act)return"RM";if("MIG"===e.mobile.offer.acteDeGestion||"MIG"===e.mobile.offer.act)return"MIG"}if(e.fixe&&e.fixe.offer&&("FIXE_MIG"===e.fixe.offer.acteDeGestion||"FIXE_MIG"===e.fixe.offer.act))return"MIG"}return"CQT"}function Ui(e){var t=Gi(e);return"RM"===t||"MIG"===t?"Change":"Conquete"}function Xi(e){return function(e){var t=window.location.pathname,i=e.values;return i&&(i.SensParcours=i.SensParcours?i.SensParcours:t.includes("telephone-portable")?"Pmobile":t.includes("/offre-mobile/sfr")?"Poffre":"Vide"),e}(e)}const Vi={sendEtagOpenBasketEvent:function(){var t=Mi(Si(e.basket));e.eTagActionContext={pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier",omnitureEvent:{events:"scView,event47"},omnitureVar:{eVar54:"[Periode]|[Avancement]",eVar64:"[OffreProduit]"},values:{Periode:Ri(e.basket),Avancement:qi(t),OffreProduit:Ci(t),TypeAchat:Bi(e.basket),TypeParcours:Ui(e.basket)}},hi("vue",e.eTagActionContext)},triggerBasketPhoneOptionProp68:function(e){var t;hi("vue",_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier",omnitureEvent:null,omnitureVar:{prop68:"[PaymentCode]"},values:{PaymentCode:Pi((t=e,t.mobile&&t.mobile.mainDevice&&t.mobile.mainDevice?t.mobile.mainDevice.paymentMode:t.fixe&&t.fixe.mainDevice&&t.fixe.mainDevice?t.fixe.mainDevice.paymentMode:void 0)),TypeAchat:Bi(e),TypeParcours:Ui(e)}}),!1)},sendEtagRemoveBasketEvent:function(t,i){var n=Mi(i);e.eTagActionContext=_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier/Vidage",omnitureEvent:{events:"scRemove,scOpen"},omnitureVar:{eVar54:"[Periode]|[Avancement]",eVar64:"[OffreProduit]"},values:{Periode:Ri(e.basket),Avancement:qi(n),OffreProduit:Ci(n),TypeAchat:Bi(t.basketContent),TypeParcours:Ui(t.basketContent)}}),e.eTagActionContext.displayedProducts=Ei(Mi(t),n).removed,hi("vue",e.eTagActionContext)},sendEtagSaveBasketEvent:function(){var t=Mi(Si(e.basket));e.eTagActionContext=_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier",omnitureEvent:{events:"scEpropal,event47"},omnitureVar:{eVar54:"[Periode]|[Avancement]"},values:{Periode:Ri(e.basket),Avancement:qi(t),TypeAchat:Bi(e.basket),TypeParcours:Ui(e.basket)}}),hi("vue",e.eTagActionContext)},sendEtagAddBasketEvent:function(t,i){var n=Mi(i);e.eTagActionContext=_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier",omnitureEvent:{events:"scAdd,scOpen,event47"},omnitureVar:{eVar54:"[Periode]|[Avancement]",eVar64:"[CodeProduit]"},values:{Periode:Ri(e.basket),Avancement:qi(n),CodeProduit:Ci(n),TypeAchat:Bi(e.basket),TypeParcours:Ui(e.basket)}}),e.eTagActionContext.displayedProducts=Ei(Mi(t),n).added,hi("vue",e.eTagActionContext)},getBasketSnapshot:Si,sendEtagAddPromoCodeBasketEvent:function(){e.eTagActionContext=_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier",omnitureEvent:{events:null},omnitureVar:{eVar42:"[CodePromo]"},values:{CodePromo:"Code_promo_ok",TypeAchat:Bi(e.basket),TypeParcours:Ui(e.basket)}}),hi("vue",e.eTagActionContext,!1)},sendEtagOpenBox4GPopinBasketEvent:function(){e.eTagActionContext=_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Popin Panier box 4G+",values:{TypeAchat:Bi(e.basket),TypeParcours:Ui(e.basket)}}),hi("vue",e.eTagActionContext,!1)},sendEtagCheckoutBasketEvent:function(){var t,i=Mi(Si(e.basket));e.eTagActionContext=_i({pageName:"Web/[TypeAchat]/Boutique/[TypeParcours]/Panier/Valider",omnitureEvent:{events:"Prodview, event14"},omnitureVar:{eVar54:"[Periode]|[Avancement]",eVar46:"[Contexte]|[TypeAchatEligible]",eVar64:"[OffreProduit]"},values:{Periode:Ri(e.basket),OffreProduit:Ci(i),Avancement:qi(i),TypeAchat:Bi(e.basket),TypeAchatEligible:Hi(e.basket),TypeParcours:Ui(e.basket),Contexte:(t=e.basket,"Change"===Ui(t)?"Changer":"Ouvrir")}}),i.products&&(e.eTagActionContext.displayedProducts=i.products),hi("vue",e.eTagActionContext)},showItemNumber:function(){var t=ue();yi()&&window._eT.pT&&window._eT.pT(t,e.open?1:0)},trigETag_Stl_Event:function(t,i){e.eTagActionContext=_i({pageNque/[TypeParcours]/Panier"+i,values:{TypeAchat:Bi(e.basket),TypeParcours:Ui(e.basket)}});var n=Li(Xi(e.eTagActionContext));n.pn&&yi()&&window.s_tl&&window.s_tl(t.target,"o",n.pn)},trigETag_chF_Event:function(e){var t=e?e.sort((function(e,t){return e-t})).join(""):"0";console.log(">>> Call _eT.chF with",t),yi()&&window._eT.chF&&window._eT.chF(t)},getSelectedLine:function(){if(yi()){var e=window._eT.lse(1);if(e&&e.length>0)return e[0]}}};var ji="//static.s-sfr.fr/media/15246_visuelspanier_offresbox-1.jpg";function zi(t){var i=t.querySelector(".M .desc .generic-bonus");if(i){var n=_(e.basket.mobile.offer),o=n?n.devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null;null!=o&&o.buyBackContribution?i.innerHTML="".concat(Be.toEuros(o.buyBackContribution)):i.remove()}}function Qi(){return e.basket.mobile.offer&&"ECO"==e.basket.mobile.offer.universe||!e.basket.mobile.offer}function Yi(t,i,n){var o=t.querySelector(".L a");o&&(o.href=S(i,n),"SFR"===e.brand&&window.newSFRNavigateTo&&(o.onclick=function(e){window.newSFRNavigateTo(M(i,n)),e.preventDefault()}));var r=t.querySelector(".L img");r&&(n.pictures&&n.pictures[0]&&n.pictures[0].medium?r.src=n.pictures[0].medium:r.remove())}function Ji(t,i,n){var o=t.querySelector(".M a");o&&(o.href=S(i,n),"SFR"===e.brand&&window.newSFRNavigateTo&&(o.onclick=function(e){window.newSFRNavigateTo(M(i,n)),event.preventDefault()}));var r=t.querySelector(".M .title");if(r)if(i.properties&&"RECONDITIONNE"==(null==i?void 0:i.properties.state)){r.innerHTML="".concat(i.brandLabel," ").concat(i.label," ").concat(n.properties.color.marketingLabel," ").concat(n.properties.memoryCapacity);var a=document.createElement("span");a.classList.add("reconditionne"),a.innerHTML=" Reconditionné ",r.append(a);var s=" ".concat(n.gradeLabel);r.innerHTML+=s}else r.innerHTML="".concat(i.brandLabel," ").concat(i.label," ").concat(null==n?void 0:n.properties.color.marketingLabel," ").concat(n.properties.memoryCapacity)}function Ki(e,t){var i=e.querySelector(".M .desc section.r-block");if(i)if(t.delivery&&t.delivery.preOrder){var n=new Date(t.delivery.firstDeliveryDate),o=n.getDate()<10?"0".concat(n.getDate()):n.getDate(),r=n.getMonth()<9?"0".concat(n.getMonth()+1):n.getMonth()+1,a=n.getFullYear().toString().slice(-2);i.innerHTML="<p>En précommande</p>\n                                  <p>Expédition à partir du ".concat(o,"/").concat(r,"/").concat(a,"</p>")}else i.remove()}function $i(t,i,n){var o=t.querySelector(".M .desc");if(o){null!=i&&i.properties&&"RECONDITIONNE"==(null==i?void 0:i.properties.state)&&o.classList.add("reconditionne");var r=o.querySelector(".selectors");r&&(function(t,i,n){v"label").innerHTML='<span style="background-color: '.concat(null==n?void 0:n.properties.color.rgb,'"></span>');var a=r.querySelector("div ul");a&&(a.innerHTML="",i.devices.filter((function(e){return e.properties.memoryCapacity==n.properties.memoryCapacity})).filter((function(e){return"RECONDITIONNE"!=i.properties.state||e.grade==n.grade})).forEach((function(i){var n,r=document.createElement("li");null!==(n=i.delivery)&&void 0!==n&&n.stock||r.classList.add("disabled"),ivice.id?(r.innerHTML='<span style="box-shadow: #ffffff 0px 0px 0px 3px inset, '.concat(i.properties.color.rgb," 0px 0px 0px 1px;background-color: ").concat(i.properties.color.rgb,'"></span>'),r.dataset.id=i.sapCode,r.onclick=function(){return o.checked=!1}):(r.innerHTML='<span style="background-color: '.concat(i.properties.color.rgb,'"></span>'),r.onclick=function(e){var n;null!==(n=i.delivery)&&void 0!==n&&n.stock&&(o.checked=!1,Vi.trigETag_Stl_Event(e,"/Modif_couleur_dans_panier"),Zi(i.sapCode,t))}),a.append(r)})))}(r,i,n),function(e,t,i){var n=e.querySelector(".selector:nth-of-type(2) select");n&&(ui(n,t,i),n.onchange=function(t){Vi.trigETag_Stl_Event(t,"/Modif_capa_dans_panier"),Zi(t.target.value,e)})}(r,i,n),function(e,t,i){var n=e.querySelector(".selector:nth-of-type(3)"),o=di(n,t,i);o&&(o.onchange=function(t){Vi.trigETag_Stl_Event(t,"/Modif_grade_dans_panier"),Zi(t.target.value,e)})}(r,i,n))}}function Zi(t,i){e.actionInProgress||(i.classList.add("loader"),Fr.put({mobile:{mainDevice:{id:t,quantity:1,paymentMode:e.basket.mobile.mainDevice.paymentMode}}}))}function en(e){if(e){var t=e.filter((function(e){return"ODR"!==e.discountType&&e.discountValue&&(!e.duration||0==e.duration)}));if(t&&t.length)return t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)}return 0}function tn(t,i){var n=t.querySelector(".R .p-block");if(n){var o,r=n.querySelector(".download");on(n,e.basket.mobile.mainDevice.totalPriceWithDiscount?e.basket.mobile.mainDevice.totalPriceWithDiscount:e.basket.mobile.mainDevice.totalPrice);var a=null,s=null,c=null,l=null,u=null,d=[],f=null,p=null;if(e.basket.mobile.mainDevice.discounts&&(a=en(e.basket.mobile.mainDevice.discounts),f=(d=e.basket.mobile.mainDevice.discounts.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0}))).map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)),e.basket.mobile.offer&&e.basket.mobile.offer.gammeId){var m=_(e.basket.mobile.offer);(p=m?m.devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null)&&p.paymentOption&&(s=p.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0],c=p.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0],l=p.paymentOption.filter((function(e){return"LOAN_24X_PAYANT"==e.billingMode}))[0],u=p.paymentOption.filter((function(e){return"LOAN_24X_SANS_FRAIS"==e.billingMode}))[0])}else i&&i.paymentOptions&&(s=i.paymentOptions.filter((function(e){return"CB4X"==e.billingMode}))[0]);rn(n,a,d,null===(o=e.basket.mobile.mainDevice)||void 0===o?void 0:o.discounts),an(n,e.basket.mobile.mainDevice.paymentMode,s),sn(n,e.basket.mobile.mainDevice.paymentMode,s,c,l,u,f),function(t,i,n,o,r){if(o.length>0){var a=e.basket.mobile.mainDevice.totalPrice;e.basket.mobile.mainDevice.discounts.forEach((function(e){"ODR"!==e.discountType&&e.priceBefore>a&&(a=e.priceBefore)}));var s=document.createElement("p");s.innerHTML="Soit ".concat(Be.toEuros(a)," ").concat(n?"moins "+Be.toEuros(n)+" de remise immédiate":""," puis ").concat(Be.toEuros(r)," remboursés après achat"),t.append(s)}}(n,0,a,d,f),cn(n,r,d),ln(n,i),un(n,p),dn(n)}}function nn(t,i){var n=t.querySelector(".R .p-block"),o=_(e.basket.mobile.offer,"MOB"),r=o?o.devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null;if(n&&r){var a=n.querySelector(".download"),s=r.devicePriceWithDiscounts?r.devicePriceWithDiscounts:r.devicePrice,c=r.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0];c&&(s=c.upfrontWithPayback?c.upfrontWithPayback:c.upfrontWithoutPayback),on(n,s);var l=null,u=r.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0],d=r.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0],f=r.paymentOption.filter((function(e){return"LOAN_24X_PAYANT"==e.billingMode}))[0],p=r.paymentOption.filter((function(e){return"LOAN_24X_SANS_FRAIS"==e.billingMode}))[0],m=[],b=null;if(r.discounts&&(l=en(r.discounts),b=(m=r.discounts.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0}))).map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)),rn(n,l,m),an(n,c?"LOAN_FDPSFR":"COMPTANT",u),m.length>0){var v=document.createElement("p");if(c)v.innerHTML="(Soit ".concat(Be.toEuros(c.upfrontWithoutPayback)," puis ").concat(Be.toEuros(b)," remboursés après achat)");else{var y=l?r.devicePrice-l.priceAfter:r.devicePrice;v.innerHTML="(Soit ".concat(Be.toEuros(y)," puis ").concat(Be.toEuros(b)," remboursés après achat)")}n.append(v)}sn(n,c?"LOAN_FDPSFR":"COMPTANT",u,d,f,p,b),cn(n,a,m),ln(n,i),un(n,r),dn(n)}}function on(e,t){e.innerHTML=Be.formatPrice(t,!1)}function rn(t,i,n,o){if(i&&0==n.length){var r=1===(null==o?void 0:o.length)?o[0].priceBefore:0,a=Math.max(e.basket.mobile.mainDevice.totalPrice,r),s=document.createElement("p");s.innerHTML="au lieu de ".concat(Be.toEuros(a)),t.append(s)}}function an(t,i,n){if("COMPTANT"==i||"CB4X"==i){var o=document.createElement("p");n&&e.basket.mobile.mainDevice&&!e.basket.mobile.offer||n&&e.basket.mobile.mainDevice&&e.basket.mobile.offer?o.innerHTML="<b>En 1 fois</b> sans frais":o.innerHTML=n?"En 1x ou 4x":"En 1x",t.append(o)}else if(["LOAN_FDPSFR","LOAN_24X_SANS_FRAIS","LOAN_24X_PAYANT"].includes(i)){var r=document.createElement("p");r.classList.add("b"),r.setAttribute("id","PaiementMode"),"LOAN_24X_SANS_FRAIS"===i&&(r.innerHTML="En 24 fois"),t.append(r)}}function sn(t,i,n,o,r,a,s){if("LOAN_24X_SANS_FRAIS"==i){if(a){var c=document.createElement("p");c.innerHTML="puis ".concat(Be.toEuros(a.monthlyFeeWithinMobilePlan)," x ").concat(a.nbPayment," mois<br>"),c.innerHTML+="(Soit un montant total de ".concat(Be.toEuros(a.totalPriceWithoutFee),". TAEG ").concat(a.taeg,"%)"),t.append(c)}}else if("LOAN_24X_PAYANT"==i){if(r){var l=document.createElement("p");l.innerHTML="puis ".concat(Be.toEuros(r.monthlyFeeWithinMobilePlan)," x ").concat(r.nbPayment," mois<br>"),l.innerHTML+="(Soit un montant total de ".concat(Be.toEuros(r.totalPriceWithoutFee)," dont ").concat(Be.toEuros(r.totalFeeWithDiscount)," de frais inclus. TAEG ").concat(r.taeg,"%)"),t.append(l)}}else if("LOAN_FDPSFR"==i){if(o){var u=document.createElement("p");u.innerHTML="puis ".concat(Be.toEuros(o.monthlyFeeWithinMobilePlan)," x ").concat(o.nbPayment," mois<br>"),t.append(u)}}else if(("COMPTANT"==i||"CB4X"==i)&&n){var d=document.createElement("p"),f="";f=!e.basket.mobile.offer&&e.basket.mobile.mainDevice?"<b>ou ".concat(Be.toEuros(n.monthlyFeeWithDiscount)," x4</b> dont ").concat(Be.toEuros(n.totalFeeWithDiscount)," de frais"):e.basket.mobile.mainDevice&&e.basket.mobile.offer?"<b>ou ".concat(Be.toEuros(n.monthlyFeeWithDiscount)," x4</b> sans frais"):"ou ".concat(Be.toEuros(n.monthlyFeeWithinMobilePlan)," x4"),s&&(f+=" puis ".concat(Be.toEuros(s)," remboursés après achat")),d.innerHTML=f,t.append(d)}}function cn(e,t,i){1==i.length?(t.href=i[0].url,t.target="_blank",e.append(t)):i.forEach((function(i){var n=document.createElement("p");n.classList.add("g"),n.innerHTML="".concat(Be.toEuros(i.discountValue)," remboursés après achat"),e.append(n);var o=t.cloneNode(!0);o.href=i.url,o.target="_blank",e.append(o)}))}function ln(e,t){if(t.ecotaxe){var i=document.createElement("p");i.classList.add("g"),i.innerHTML="Dont ".concat(Be.toEuros(t.ecotaxe)," d’éco participation ");var n=document.createElement("i");n.classList.add("tooltip"),n.innerHTML="<span>".concat(G,"</span>"),i.append(n),e.append(i)}}function un(e,t){if(t&&t.guaranteedRecoveryPrice){var i=document.createElement("p");i.classList.add("g"),i.innerHTML="Reprise garantie : ".concat(Be.toEuros(t.guaranteedRecoveryPrice));var n=document.createElement("i");n.classList.add("tooltip"),n.innerHTML="<span>".concat("Montant de reprise garantie de votre nouveau téléphone lors de votre prochain renouvellement de mobile avec engagement 24 mois","</span>"),i.append(n),e.append(i)}}function dn(e){var t=document.createElement("p");t.classList.add("g"),t.innerHTML="Montant collecté au titre <br> de la <a href='".concat(" https://static.s-sfr.fr/media/noticecopieprivee.pdf","' target='_blank'>copie privée</a> inclus"),e.append(t)}const fn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT";if(e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id){v.setStepper(1),v.setStepper(3),v.setStepper(4);var i=we("Telephone");if(i){if(e.basket.mobile.mainDevice.id===U){var n=i.querySelector(".M .title");n.innerHTML="".concat(e.basket.mobile.mainDevice.brandLabel," ").concat(e.basket.mobile.mainDevice.modelLabel);var o=i.querySelector(".L img");o.src=ji;var r=i.querySelector(".M .desc .selectors");r&&r.remove();var a=i.querySelector(".M .desc section.r-block");a&&a.remove();var s=i.querySelector(".R .p-block"),c=i.querySelector(".M .generic-bonus");if(c&&c.remove(),s){var l=e.basket.mobile.mainDevice.totalPriceWithDiscount?e.basket.mobile.mainDevice.totalPriceWithDiscount:e.basket.mobile.mainDevice.totalPrice;on(s,l)}e.content.append(i)}var u=Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id);if(u){var d=u.devices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0];if(Yi(i,u,d),Ji(i,u,d),"ASSOCIATION"==t){nn(i,d);var f=i.querySelector(".M .desc .selectors");f&&f.remove();var p=i.querySelector(".M .desc section.r-block");p&&p.remove(),zi(i)}else Qi()&&i.classList.add("first"),tn(i,d),$i(i,u,d),Ki(i,d),zi(i);e.content.append(i)}}}};var pn=i(669);const mn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=v.getStoredAccessToken()?e.line:void 0,o="".concat(e.env.endpoints["service-accessory"],"/RTM/groups/allGroups"),r=t||void 0,a=i||void 0,s={universe:"GP",act:"OPEN",brand:e.brand,line:n,groupCodes:a,sapCodes:r},c=v.getStorageData("accessoryByGroupCodes",o,s);return c?Promise.resolve(c):pn.get(o,{params:s})};function bn(t){if(e.accessoriesByGroup)return e.accessoriesByGroup.find((function(e){return null==e?void 0:e.accessories.find((function(e){return e.sapCode===t}))}))}const vn={loadAccessoriesByGroup:function(){return e.accessoriesByGroup?Promise.resolve():new Promise((function(t,i){mn().then((function(i){var n,o,r,a,s,c;e.accessoriesByGroup=null!==(n=null===(o=i.data)||void 0===o||null===(r=o.data)||void 0===r||null===(a=r.result)||void 0===a?void 0:a.groups)&&void 0!==n?n:null===(s=i.data)||void 0===s||null===(c=s.result)||void 0===c?void 0:c.groups,t()}),(function(){t()}))}))},loadAccessoriesByGroupCodes:function(){var t,i;if(e.newAccessories)return Promise.resolve();var n="";return null===(t=e.basket.mobile)||void 0===t||null===(i=t.sfrrecoToPush)||void 0===i||i.map((function(e){n+=(null==e?void 0:e.id)+","})),new Promise((function(t,i){mn("",n).then((function(i){var n,o,r,a,s,c;e.newAccessoriesListBySapCodes=null!==(n=null===(o=i.data)||void 0===o||null===(r=o.data)||void 0===r||null===(a=r.result)||void 0===a?void 0:a.groups)&&void 0!==n?n:null===(s=i.data)||void 0===s||null===(c=s.result)||void 0===c?void 0:c.groups,t()}),(function(){t()}))}))},loadAccessoriesBySapCodes:function(){var t,i;if(e.newAccessories)return Promise.resolve();var n="";return null===(t=e.basket.mobile)||void 0===t||null===(i=t.sfrrecoToPush)||void 0===i||i.map((function(e){n+=(null==e?void 0:e.id)+","})),new Promise((function(t,i){mn(n).then((funct,a,s,c;e.newAccessoriesListBySapCodes=null!==(n=null===(o=i.data)||void 0===o||null===(r=o.data)||void 0===r||null===(a=r.result)||void 0===a?void 0:a.groups)&&void 0!==n?nnd((function(e){return e.sapCode===t}))}}};function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e){if(e&&yn(null==e?void 0:e.paymentOptions)){var t,i=null==e||null===(t=e.paymentOptions)||void 0===t?void 0:t[0];return(null==i?void 0:i.monthlyFeeWithDiscount)||0ptions)){var t,i=null==e||null===(t=e.paymentOptions)||void 0===t?void 0:t[0];return(null==i?void 0:i.totalFeeWithDiscount)||0}return 0}function kn(e){if(e&&e.discounts&&e.discounts.length){var t=e.discounts.filter((function(e){return"ODR"!==e.discountType&&e.discountValue}));if(t&&t.length)return t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)}return 0}function Sn(t,i,n){e.actionInProgress||e.actionInProgress||(n?Fr.put({mobile:{accessories:[{id:t,quantity:i}]}}):Fr.put({temporary:{accessories:[{id:t,quantity:i}]}}))}const Pn={render:function(){var t=e.basket.mobile&&e.basket.mobile.accessories&&e.basket.mobile.accessories.length,i=e.basket.temporary&&e.basket.temporary.accessories&&e.basket.temporary.accessories.length;if(e.accessoriesByGroup&&(t||i)){var n=function(t){var i=e.basket.mobile&&Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id),n=i&&i.seoName&&i.seoName.toLowerCase(),o=n&&e.pushAccessories?e.pushAccessories.find((function(e){return n.includes(e.seoName)})):null,r=t?e.basket.mobile.accessories:e.basket.temporary.accessories,a=o?o.lst.map((function(e){return e.accId})):[];return o&&a.length>0?r.filter((function(e){return!a.includes(e.id)})):r}(t);if(n&&n.length){var o=document.createElement("h2");o.classList.add("lame-option"),o.innerHTML="Mes accessoires",o.setAttribute("id","PtAccessory"),e.content.append(o),e.accessoriesQuantity=0,n.forEach((function(t){t&&(e.accessoriesQuantity+=t.quantity)})),n.forEach((function(i){var n=vn.getAccessory(i.id);if(n){var o=v.parseHTML(function(t,i){var n,o,r,a,s,c,l=0===(null==t||null===(n=t.price)||void 0===n?void 0:n.priceWithDiscount)?null==t||null===(o=t.price)||void 0===o?void 0:o.priceWithDiscount:null==t||null===(r=t.price)||void 0===r?void 0:r.price,u=null!=t&&null!==(a=t.price)&&void 0!==a&&a.discounts.length?t.price.discounts.find((function(e){return"STANDARD"===e.discountType})):null;u&&(l=u.priceAfter);var d,f,p,m=(d=t)&&d.paymentOptions?d.paymentOptions.find((function(e){return"CB4X"===e.billingMode})):void 0,b=null!=t&&null!==(s=t.pictures)&&void 0!==s&&null!==(c=s[0])&&void 0!==c&&c.smallUrl?t.pictures[0].smallUrl:"//static.s-sfr.fr/media/buds-pro-150.jpg";return'<section id="Accessoire" class="lame-offre first last"> \n                                <div class="L"> \n                                    <a href="'.concat(h("/".concat(t.detailsUrl)),'">\n                                        <img src="').concat(b,'" loading="lazy" alt="').concat(i.model,'">\n                                    </a> \n                                </div>\n                                <div class="M"> \n                                    <a class="title" href="').concat(h("/".concat(t.detailsUrl)),'">\n                                        ').concat(t.model,'\n                                    </a> \n                                    <div class="desc"> \n                                        <p class="subtitle">\n                                            Quantité\n                                        </p>\n                                        <div class="quantifier">\n                                            <button type="button" class="minus" >-</button>\n                                            <span>').concat(i.quantity,'</span>\n                                            <button type="button" class="plus">+</button> \n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="R"> \n                                    <section class="p-block"> \n                                        <div class="price"> \n                                            ').concat(Be.formatPrice(l,!1,"Offert"),'\n                                        </div>\n                                        <p class="mensualite">').concat(m?"<b>En 1 fois</b> sans frais<br>":"","\n                                            ").concat(function(t){var i,n;return t&&null!=t&&t.paymentOptions&&null!==(i=e.basket.global)&&void 0!==i&&i.sumTotalFeeWithDiscount&&(null==t||null===(n=t.paymentOptions)||void 0===n?void 0:n[0])?"<b>ou ".concat(Be.toEuros(hn(t))," x4 mois</b> dont ").concat(Be.toEuros(gn(t))," de frais"):""}(t),"</p>\n                                            ").concat((f=i,p=function(e){var t=e.discounts?e.discounts.filter((function(e){return"ODR"===e.discountType})):[];return t&&t.length?t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0):0}(f),p?"<p>(Soit ".concat(Be.toEuros(f.totalPrice)," ").concat(kn(f)?" moins "+Be.toEuros(kn(f))+" de remise immédiate ":""," puis ").concat(Be.toEuros(p)," remboursés après achat)</p>"):""),"\n                                            ").concat(function(e){var t=e.discounts?e.discounts.filter((function(e){return"ODR"===e.discountType})):[];return t&&t.length?1===t.length?'<a class="download" target="_blank" href="'.concat(t[0].url,'">Télécharger le coupon de remboursement</a>'):t.map((function(e){return'<a class="download" target="_blank" href="'.concat(e.url,'">Télécharger le coupon de remboursement ').concat(Be.toEuros(e.discountValue),"</a>")})).join(" "):""}(i),"\n                                            ").concat(function(e){var t;return null!==(t=e.price)&&void 0!==t&&t.ecotaxe?'<p class="g">Dont '.concat(Be.toEuros(e.price.ecotaxe),' d’éco participation<i class="tooltip"><span>').concat("L’éco-participation est une contribution payée par les consommateurs pour tout achat d’un appareil neuf et reversée à un éco-organisme, en charge du traitement et du recyclage des déchets d’équipements électriques et électroniques (DEEE). Incluse dans le prix d’achat, cette éco-participation permet de financer et améliorer la collecte, la dépollution et le recyclage des DEEE. Son montant varie selon le produit acheté et selon les barèmes d’éco-participation des éco-organismes. Chaque distributeur ou fabricant d’équipements électriques ou électroniques adhère à un éco-organisme et applique le montant défini.","</span></i></p>"):""}(t),"\n                                    </section> \n                                </div>\n                            </section>")}(n,i)),r=o.querySelector(".M .desc");(null==n?void 0:n.mpc)<=1&&r&&(r.style.display="none"),o&&e.content.append(o),function(t,i){var n=v.parseHTML('<div class="a-block"><a class="suppr">Supprimer</a></div>'),o=n.querySelector(".suppr");o.onclick=function(){o.classList.add("loader"),function(t,i){e.actionInProgress||(i?Fr.remove({mobile:{accessories:[{id:t}]}}):Fr.remove({temporary:{accessories:[{id:t}]}}))}(t.id,i)},e.content.append(n)}(i,t),function(t,i,n){var o=n.querySelector(".plus"),r=null==t?void 0:t.quantity;o&&(("852440"===t.id&&3===r||15===r||e.accessoriesQuantity>=15)&&(o.disabled=!0),o.onclick=function(o){e.accessoriesQuantity++,n.querySelector(".quantifier").classList.add("loader");var a=1+r;Sn(null==t?void 0:t.id,a,i),o.preventDefault()})}(i,t,o),function(t,i,n){var o=n.querySelector(".minus"),r=null==t?void 0:t.quantity;o&&(r-1==0&&(o.disabled=!0),o.onclick=function(o){e.accessoriesQuantity--,n.querySelector(".quantifier").classList.add("loader");var a=r-1;0!==a&&Sn(null==t?void 0:t.id,a,i),o.preventDefault()})}(i,t,o)}}))}}},monthlyFeeWithDiscount:hn,totalFeeWithDiscount:gn};const En=function(){if(e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id){var t=Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id);if(t&&t.seoName&&e.pushAccessories&&e.accessoriesByGroup){var i,n,o=t.seoName.toLowerCase(),r=e.pushAccessories.find((function(e){return o.includes(e.seoName)}));if(r&&(r.lst.forEach((function(t){var o;!i&&vn.getAccessory(t.accId)&&null!==(o=vn.getAccessory(t.accId).delivery)&&void 0!==o&&o.stock&&(i=t,e.basket.mobile.accessories&&e.basket.mobile.accessories.length&&(n=e.basket.mobile.accessories.find((function(e){return e.id===t.accId}))))})),i)){console.log("*** accToPush: "+i.accId+" - accInBasket: "+n);var a=we("AdaptatorAc"),s=vn.getAccessory(i.accId);a&&(function(t,i,n,o){var r=t.querySelector("img");r&&i.pictures&&i.pictures[0]&&r.setAttribute("src",i.pictures[0].smallUrl);var a=t.querySelector(".L a");a&&a.setAttribute("href",h("/".concat(i.detailsUrl)));var s=t.querySelector(".M a");s&&(s.setAttribute("href",h("/".concat(i.detailsUrl))),s.innerHTML="charger"===n?"Ce mobile est livré sans adaptateur secteur.":"Pensez à protéger votre mobile des chocs et rayures");var c=t.querySelector(".M .desc");if(c&&(c.innerHTML=("charger"===n?"N'oubliez pas de vous équiper si besoin de votre XXX pour YYY":"avec un XXX pour YYY").replace("XXX",i.model).replace("YYY",Be.toEuros(i.price.priceWithDiscount))),o){var l=t.querySelector(".R .p-block");l&&(l.innerHTML=Be.formatPrice(i.price.priceWithDiscount,!1,"Gratuit"))}var u=t.querySelector(".M label"),d=t.querySelector("input");d&&(o?(d.checked=!0,u.onclick=function(){return t=u,n=i.sapCode,void(e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.remove({mobile:{accessories:[{id:n}]}})));var t,n}):(d.checked=!1,u.onclick=function(){return t=u,n=i.sapCode,void(e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.put({mobile:{accessories:[{id:n,quantity:1}]}})));var t,n}))}(a,s,i.type,!!n),e.content.append(a))}}}},Tn=function(){if(e.basket.fixe&&e.basket.fixe.offer&&e.basket.fixe.offer.gammeId&&(e.basket.fixe.insurancesToPush&&e.basket.fixe.insurancesToPush.length||e.basket.fixe.insurance&&e.basket.fixe.insurance.length)){var t=we("Assurance");if(t){var i=t.querySelectorAll(".M")[0],n=t.querySelectorAll(".L")[0],o=t.q")[1],c=t.querySelectorAll(".R")[1];t.innerHTML="",t.append(n),t.append(i),t.append(o),(e.basket.fixe.insurance?e.basket.fixe.insurancesToPush.concat(e.basket.fixe.insurance):e.basket.fixe.insurancesToPush).sort((function(e,t){return parseFloat(e.totalPricePerMonthWithDiscount)-parseFloat(t.totalPricePerMonthWithDiscount)})).forEach((function(i){return function(t,i,n,o,r,a){var s=n.cloneNode(!0),c=e.basket.fixe.insurance;s.checked=!1;var l=o.cloneNode(!0),u=Be.toEuros(a.totalPricePerMonthWithDiscount);l.querySelector("p")&&(l.querySelector("p").innerHTML=u.length?"".concat(a.label," pour ").concat(u[0]).concat(u[1]," /mois"):"Offert");var d=l.querySelector("ul");d&&(d.innerHTML="","SFRPC-HOME_REGULAR"===a.id&&(d.innerHTML="\n                <li>Vol et Dommage Accidentel</li> \n                <li>2 sinistres dont 1 vol (par année et avec plafond de 500€ TTC par sinistre)</li>\n                \n            "),"SFRPC-HOME_FULL"===a.id&&(d.innerHTML="\n                <li>Vol, Dommage Accidentel et Oxydation</li> \n                <li>2 sinistres dont 1 vol (par année et avec plafond de 1000€ TTC par sinistre)</li>\n            "));var f=l.querySelector("label");f&&(f.onclick=function(){!function(t,i){e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.put({fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),insurance:{id:i.id}}}))}(f,a)});var p=r.cloneNode(!0),m=p.querySelector(".p-block");c&&c.id===a.id&&(s.checked=!0,f.onclick=function(){return t=f,void(e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.remove({fixe:{insurance:{}}})));var t}),m&&(m.innerHTML=Be.formatPrice(a.totalPricePerMonthWithDiscount,"RECURRENT"===a.frequency||"MENSUEL"===a.frequency,"Offert")),t.append(i.cloneNode(!0)),t.append(s),t.append(l),t.append(p)}(t,r,a,s,c,i)})),e.content.append(t)}}};var Mn="module-sfr",Dn=["CQT-LGO-THD-3P-PREMIUM-BIS","CQT-LGO-THD-3P-PREMIUM-TV-BIS"];function Ln(t,i){var n=t.querySelector("input"),o=t.querySelector(".M label");t.querySelector(".M a"),i?(n.checked=!0,o.onclick=function(){return t=o,void(e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.remove({fixe:{options:[{id:Mn}]}})));var t}):(n.checked=!1,o.onclick=function(){var t;t=o,e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.put({fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),options:[{id:Mn}]}}))})}const xn=function(){var t;if(e.basket.fixe&&e.basket.fixe.offer&&Dn.includes(e.basket.fixe.offer.gammeId)&&"PC"!=(null===(t=e.basket.fixe.mainDevice)||void 0===t?void 0:t.type)){var i=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);if(i&&i.maxDownstream>=8e6){var n=we("Sfp"),o=n.querySelector(".M div .desc");n&&o&&(o.innerHTML="Avec un ordinateur doté d'un port réseau Ethernet compatible 10 Gbits, permet d'augmenter\n        le débit de la connexion internet filaire. Sans effets sur le débit du wifi."),n&&(e.basket.fixe.options&&e.basket.fixe.options.length&&e.basket.fixe.options.find((function(e){return e.id===Mn}))?Ln(n,!0):Ln(n,!1),e.content.append(n))}}};function An(t,i,n,o){var r=t.querySelector(".M .subtitle");r&&(r.innerHTML="".concat("Assurer mon téléphone pour XX/mois avec CHUBB".replace("XX",Be.toEuros(i||0))));var a=t.querySelector("input"),s=t.querySelector(".M label"),c=(Be.toEuros(i),t.querySelector(".R .p-block"));if(c&&(c.innerHTML=Be.formatPrice(i,"RECURRENT"===o||"MENSUEL"===o,"Offert"),i)){var l="",u=12*i;(l=t.querySelector(".price").nextElementSibling?t.querySelector(".price").nextElementSibling:document.createElement("p")).innerHTML="soit ".concat(Be.toEuros(u),"/an"),c.appendChild(l)}n?(a.checked=!0,s.onclick=function(){return t=s,void(e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.remove({mobile:{insurance:{}}})));var t}):(a.checked=!1,s.onclick=function(){var t;t=s,e.actionInProgress||(t.classList.add("loader"),e.toggleClicked=!0,Fr.put({mobile:{insurance:{id:e.basket.mobile.insurancesToPush[0].id}}}))})}const In=function(){if(e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id)if(e.basket.mobile.insurance&&e.basket.mobile.insurance.id){var t=we("Chubb");t&&(An(t,e.basket.mobile.insurance.totalPricePerMonthWithDiscount,!0,e.basket.mobile.insurance.frequency),e.content.append(t))}else if(e.basket.mobile.insurancesToPush&&e.basket.mobile.insurancesToPush[0]&&e.basket.mobile.insurancesToPush[0].id){var i=we("Chubb");i&&(An(i,e.basket.mobile.insurancesToPush[0].totalPricePerMonthWithDiscount,!1,e.basket.mobile.insurancesToPush[0].frequency),e.content.append(i))}};var qn=["CQT","VLA"],Rn="blocage-forfait-2h-100mo",Cn="optionBlocage";function On(t){"HM1"===e.basket.mobile.offer.ptaId&&t.remove()}function wn(t,i){if(e.basket.mobile&&e.basket.mobile.simsToPush&&qn.includes(e.basket.mobile.acteDeGestion)&&e.basket.mobile.mainDevice){var n=Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id);if(n&&n.properties&&"SIM_OR_ESIM"===n.properties.simCompatibility){i.hasSim=!0;var o=t.querySelector("input"),r=t.querySelector(".M label");"ESIM"===e.basket.mobile.sim.type&&(o.checked=!0),r.onclick=function(){return function(t){if(!e.actionInProgress){t.classList.add("loader"),e.toggleClicked=!0;var i="ESIM"===e.basket.mobile.sim.type?"TRIPLE":"ESIM";Fr.put({mobile:{sim:{type:i}}})}}(r)}}}else t.querySelector(".L").remove(),t.querySelector("input").remove(),t.querySelector(".M").remove(),t.querySelector(".R").remove()}function Fn(){var t,i,n,o,r,a,s,c,l,u,d,f,p,m,b,v,y,h,g,k,S,P,E=we("Porta");if(E){var T=E.querySelector("input"),M=E.querySelector("div.M div p"),D=E.querySelector("div.M label");E.id=Cn,T.id=Cn,T.name=Cn,T.checked=(P=!1,0===(null===(t=e.basket)||void 0===t||null===(i=t.mobile)||void 0===i||null===(n=i.retained)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.length)&&0===(null===(r=e.basket)||void 0===r||null===(a=r.mobile)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.length)||(k=null!==(c=e.basket)&&void 0!==c&&null!==(l=c.mobile)&&void 0!==l&&null!==(u=l.retained)&&void 0!==u&&null!==(d=u.options)&&void 0!==d&&d.length?null===(f=e.basket)||void 0===f||null===(p=f.mobile)||void 0===p||null===(m=p.retained)||void 0===m?void 0:m.options:null!==(b=e.basket)&&void 0!==b&&null!==(v=b.mobile)&&void 0!==v&&null!==(y=v.options)&&void 0!==y&&y.length?null===(h=e.basket)||void 0===h||null===(g=h.mobile)||void 0===g?void 0:g.options:null,S=!1,(null==k?void 0:k.length)>0&&k.forEach((function(e){e.id!==Rn&&e.code!==Rn||(S=!0)})),P=S),P),D.onclick=function(){return handleToggleSwitch(D,T,!T.checked,Rn)},M.innerHTML='Option de blocage du forfait<i class="tooltip"><span>L’option de Blocage vous permet de maîtriser votre facture en bloquant les communications voix et data une fois le crédit épuisé.</span></i>',e.content.append(E)}}function Nn(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!qn.includes(e.basket.mobile.acteDeGestion)||e.basket.mobile.mainDevice&&!n)i.hasSim&&!n&&(t.querySelectorAll(".L")[1].remove(),t.querySelectorAll("input")[1].remove(),t.querySelectorAll(".M")[1].remove(),t.querySelectorAll(".R")[1].remove());else{i.hasPortability=!0;var o=i.hasSim?t.querySelectorAll("input")[1]:t.querySelector("input"),r=i.hasSim?t.querySelectorAll(".M label")[1]:t.querySelector(".M label");o.checked=e.basket.mobile.offer.withPortability,r.onclick=function(){return _n(!o.checked,r)}}}function _n(t,i){if(!e.actionInProgress){i.classList.add("loader"),e.toggleClicked=!0;var n={mobile:{offer:{act:e.basket.mobile.offer.acteDeGestion,gammeId:e.basket.mobile.offer.gammeId,ptaId:e.basket.mobile.offer.ptaId,universe:e.basket.mobile.offer.universe,withPortability:t}}},o=function(){if(e.basket.mobile.mainDevice)return{id:e.basket.mobile.mainDevice.id,quantity:e.basket.mobile.mainDevice.quantity,paymentMode:e.basket.mobile.mainDevice.paymentMode}}();o&&(n.mobile.mainDevice=o),Fr.put(n)}}const Bn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PORTA_AND_ESIM";if(e.basket.mobile&&e.basket.mobile.offer&&!ge(e.basket.mobile.offer.ptaId)){var i={hasSim:!1,hasPortability:!1},n=we("PORTA_ONLY"===t?"Porta":"ESim");n&&("PORTA_ONLY"===t?(e.basket.mobile.mainDevice&&Nn(n,i,!0),i.hasPortability&&e.content.append(n),e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&(e.basket.mobile.offer.gammeId.includes("SFR_RBK1_2H_100MO_4G_F2A")||e.basket.mobile.offer.gammeId.includes("SFR_RFL1_2H_100MO_4G_G1AA")||e.basket.mobile.offer.gammeId.includes("SFR_RFL1_2H_100MO_4G_G1AA|G1AA"))&&Fn()):"PORTA_AND_ESIM"===t&&(wn(n,i),Nn(n,i),(i.hasSim||i.hasPortability)&&e.content.append(n)),On(n))}};var Hn=["FIXE_CONQUETE","FIXE_VLA"];function Wn(e){e.querySelector(".L").remove(),e.querySelector("input").remove(),e.querySelector(".M").remove(),e.querySelector(".R").remove()}const Gn=function(){if(e.basket.fixe&&e.basket.fixe.offer&&e.basket.fixe.offer.gammeId&&!te(e.basket)){var t={hasDecoder:!1,hasPortability:!1,hasRedlist:!1},i=we("Decodeur");if(i){var n=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);n&&!e.basket.fixe.mainDevice?function(t,i,n){var o=B(e.basket.fixe.acteDeGestion,i.codePivotGamme,i.techno,i.stbCompatibility,i.xperience);if(o){n.hasDecoder=!0;var r=t.querySelector("input"),a=t.querySelector(".M label");r.checked="3P"==i.xperience,a.onclick=function(){return function(t,i){if(!e.actionInProgress){i.classList.add("loader");var n=e.basket.fixe.options?e.basket.fixe.options.find((function(e){return"remise-promo24mois"===e.id})):void 0,o={fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),offer:{act:e.basket.fixe.offer.acteDeGestion,gammeId:t.code,ptaId:t.plans[0].ptaId,universe:e.basket.fixe.offer.universe,withPortability:e.basket.fixe.offer.withPortability},options:n?[{id:"remise-promo24mois"}]:void 0}};Fr.put(o)}}(o,a)}}else Wn(t)}(i,n,t):Wn(i),function(t,i){if(Hn.includes(e.basket.fixe.acteDeGestion)){i.hasPortability=!0;var n=i.hasDecoder?t.querySelectorAll("input")[1]:t.querySelector("input"),o=i.hasDecoder?t.querySelectorAll(".M label")[1]:t.querySelector(".M label");n.checked=e.basket.fixe.offer.withPortability,o.onclick=function(){return function(t,i){if(!e.actionInProgress){i.classList.add("loader");var n=e.basket.fixe.options?e.basket.fixe.options.find((function(e){return"remise-promo24mois"===e.id})):void 0,o={fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),offer:{act:e.basket.fixe.offer.acteDeGestion,gammeId:e.basket.fixe.offer.gammeId,ptaId:e.basket.fixe.offer.ptaId,universe:e.basket.fixe.offer.universe,withPortability:t},options:n?[{id:"remise-promo24mois"}]:void 0}},r=function(){if(e.basket.fixe.mainDevice)return{id:e.basket.fixe.mainDevice.id,quantity:e.basket.fixe.mainDevice.quantity,paymentMode:e.basket.fixe.mainDevice.paymentMode}}();r&&(o.fixe.mainDevice=r),Fr.put(o)}}(!n.checked,o)}}else{var r=i.hasDecoder?1:0;t.querySelectorAll(".L")[r].remove(),t.querySelectorAll("input")[r].remove(),t.querySelectorAll(".M")[r].remove(),t.querySelectorAll(".R")[r].remove()}}(i,t),function(t,i){var n=t.querySelector("#toggle5"),o=t.querySelector("#toggle5 + .M label");if(n&&o)if(Hn.includes(e.basket.fixe.acteDeGestion)){i.hasRedlist=!0;var r="listerouge";n.checked=e.basket.fixe.options&&e.basket.fixe.options.some((function(e){return e.id===r})),o.onclick=function(){return function(t,i,n){e.actionInProgress||(t?rt.removeOption(i,n,"FIXE"):rt.addOption(i,n,"FIXE"))}(n.checked,o,r)}}else{var a=i.hasDecoder?1:0;a=i.hasPortability?a++:a,t.querySelectorAll(".L")[a].remove(),t.querySelectorAll("input")[a].remove(),t.querySelectorAll(".M")[a].remove(),t.querySelectorAll(".R")[a].remove()}}(i,t)}(t.hasRedlist||t.hasDecoder||t.hasPortability)&&e.content.append(i)}},Un=function(){var t=[];if(e.basket.fixe&&e.basket.fixe.administrationFee&&e.basket.fixe.administrationFee.length>0&&(t=t.concat(e.basket.fixe.administrationFee)),e.basket.fixe&&e.basket.fixe.changeFee&&e.basket.fixe.changeFee.length>0&&(t=t.concat(e.basket.fixe.changeFee)),t.length>0){var i=we("FraisSupp");if(i){var n=i.querySelector("section");i.innerHTML="",t.sort((function(e,t){return t.totalPriceWithDiscount-e.totalPriceWithDiscount})).forEach((function(e,t){!function(e,t,i,n){n>0&&t.querySelector(".M .title").remove(),t.querySelector(".M .subtitle").innerHTML=i.label;var o=t.querySelector(".R .p-block"),r=(o.querySelector("span"),o.querySelector("p")),a=i.totalPriceWithDiscount||0===i.totalPriceWithDiscount?i.totalPriceWithDiscount:i.totalPrice;o.innerHTML=Be.formatPrice(a,!1,"Offert"),"MATERIEL_DEPOT_GARANTIE"==i.type?r.innerHTML="Cette somme sera prélevée sur votre facture et remboursée sous 10 jours suite à la restitution du matériel.":a<i.totalPrice?r.innerHTML="au lieu de ".ce.content.append(i)}}};function Xn(){e.popin.innerHTML="",e.popinContainer.classList.remove("show")}const Vn={open:function(t){e.popin.innerHTML="";var i=t.querySelector(".btn-close");i&&(i.onclick=Xn),e.popin.append(t),e.popinContainer.classList.add("show")},close:Xn};function jn(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}const zn=function(){var e=we("SaveBasketContainer");if(e){var t=e.querySelector(".btn"),i=e.querySelector(".cp input"),n=e.querySelector(".cp .iconok"),o=e.querySelector(".cp .ko");n&&(n.style.visibility="hidden"),o&&(o.style.visibility="hidden"),t&&(t.onclick=function(){return function(e,t){var i=e.querySelector("input[nameinput[name=&&jn(o)){t&&(t.style.visibility="hidden");var a=e.querySelector(".btn");a&&(a.classList.add("loader"),Fr.saveBasket(o,r).then((function(t){a.classList.remove("loader"),e.innerHTML=we("SaveBasketResult").innerHTML;var i=e.querySelector(".btn-close");i&&(i.onclick=function(){return Vn.close()})})).catch((function(e){return console.log("erreur: ",e)})))}else t&&(t.style.visibility="visible")}(e,o)}),i&&e&&(i.onchange=function(){return function(e,t,i){var n=e.querySelector("input[name='email'"),o=n?n.value:"";o&&jn(o)?(t&&(t.style.visibility="visible"),i&&(i.style.visibility="hidden")):t&&(t.style.visibility="hidden")}(e,n,o)}),e&&Vn.open(e)}};var Qn=["ADD_MOB_PAN","ADD_MOB_ACC","ADD_MOB_INS","ADD_FIX_PAN","ADD_FIX_OPT","ADD_FIX_ACC","ADD_FIX_INS","ADD_MOB_OFF","ADD_ACC_PAN","ADD_MOB_MDV","ADD_FIX_MDV","ADD_MOB_OPT"],Yn={UPD_FIX_MDV:"Vous avez déjà mis une offre internet au panier : elle a été remplacée par l'offre que vous avez selectionnée",UPD_FIX_OFF:"Vous avez déjà mis une offre internet au panier : elle a été remplacée par l'offre que vous avez sélectionnée",UPD_FIX_ACC:"Vous avez déjà mis un accessoire au panier : il a été remplacé par l'accessoire que vous avez sélectionnée",UPD_FIX_OPT:"Vous avez déjà mis une option au panier : elle a été remplacée par l'option que vous avez sélectionnée",UPD_FIX_INS:"Vous avez déjà mis une assurance au panier : elle a été remplacée par l'assurance que vous avez sélectionnée",UPD_MOB_MDV:"Vous avez déjà mis une offre mobile au panier : elle a été remplacée par l'offre que vous avez sélectionnée",UPD_MOB_OFF:"Vous avez déjà mis une offre mobile au panier : elle a été remplacée par l'offre que vous avez sélectionnée",UPD_MOB_ACC:"Vous avez déjà mis un accessoire au panier : il a été remplacé par l'offre que vous avez sélectionné",UPD_MOB_OPT:"Vous avez déjà mis une option au panier : elle a été remplacée par l'offre que vous avez sélectionnée",UPD_MOB_INS:"Vous avez déjà mis une assurance au panier : elle a été remplacée par l'offre que vous avez sélectionnée",WRN_FIX_OPT:"L'offre internet de votre panier ne vous permet pas de souscrire d'option TV.","WRN_FIX_OPT&incompatibility":"Pour bénéficier de cette option, supprimez celle déjà présente dans votre panier","WRN_MOB_OPT&incompatibility":"Pour bénéficier de cette option, supprimez celle déjà présente dans votre panier","DEL_MOB_PAN|ADD_TMP_PAN":"Pour profiter de cette option, connectez-vous ou ajoutez un abonnement box internet ou mobile","DEL_FIX_PAN|ADD_TMP_PAN":"Pour profiter de cette option, connectez-vous ou ajoutez un abonnement box internet ou mobile","DEL_TMP_ACC|ADD_TMP_ACC":"Vous avez déjà mis un accessoire au panier : il a été remplacé par l'offre que vous avez sélectionnée",ADD_TMP_PAN:"Pour profiter de cette option, connectez-vous ou ajoutez un abonnement box internet ou mobile","ADD_MOB_OFF|isPro":"Vous changez pour une offre particulier. Avec ce changement, vous perdez les avantages du Pack Pro.","ADD_FIX_OFF|isPro":"Vous changez pour une offre particulier. Avec ce changement, vous perdez les avantages du Pack Pro.",LCVM_001:"Option non ajoutée",WRN_ADD_GEN8:"Pour profiter de cette option, connectez-vous ou ajoutez un abonnement box internet",CAA_001:"Cette offre a déjà été mise au Panier",CAOP_001:"Cette offre a déjà été mise au Panier",WRN_004:"L'ajout de cet accessoire rend indisponible le paiement en 4x"},Jn={ECS_010:"Offre box 4G+ non compatible avec l'offre sélectionnée. Plus de détails dans votre panier",LCVM_003:"Veuillez ajouter un mobile compatible avec cet accessoire au préalable",OOS_001:"Ce téléphone est actuellement indisponible",P4P_001:"L'offre mise au panier n'est pas disponible dans le cadre d'un changement d'offre. Veuillez en sélectionner une nouvelle.",BVC_002:"Offre accessoire non compatible avec l'offre sélectionnée",ECS_013:"Offre incompatible avec votre panier",WRN_FIX_OPT:"Option non compatible avec votre panier",WRN_MOB_OPT:"Option non compatible avec vésente dans le panier",CVA_003:"Vous avez atteint la quantité maximale dans votre panier"},Kn={incompatibility:"Incompatible avec l'option",nonDisponible:"OPTION NON DISPO"};function $n(e,t,i,n){switch(e){case"SUCCESS":return t.cloneNode();case"ERROR":return n.cloneNode();case"WARNING":return i.cloneNode()}}function Zn(e){setTimeout((function(){e.classList.add("visuallyhidden"),e.addEventListener("transitionend",(function(t){e.classList.add("hidden")}),{capture:!1,once:!0,passive:!1})}),3e3)}const eo=futor(".toast.g"),i=e.receipt.querySelector(".toast.o"),n=e.receipt.querySelector(".toast.o"),o=e.smallReceipt.querySelector(".toast.g"),r=e.smallReceipt.querySelector(".toast.o");if(r&&r.remove(),o&&o.remove(),t&&i){if(e.warnings){var a=e.warnings.map((function(e){return Object.keys(Kn).forEach((function(t){e.message&&e.message.includes(Kn[t])&&(e.code=e.code+"&"+t)})),e}));if(a.map((function(e){return e.code})).filter((function(e){return Qn.includes(e)}))[0]){var s=$n("SUCCESS",t,i,n);if(s.innerHTML="Ajouté au panier","block"===window.getComputedStyle(e.smallReceipt).getPropertyValue("display")){var c=s.cloneNode(!0);e.smallReceipt.append(c),Zn(c)}else e.receipt.prepend(s),Zn(s)}a.forEach((function(o){var r=Yn[o.code];if(r){var a=$n("WARNING",t,i,n);if(a.innerHTML=r,"block"===window.getComputedStyle(e.smallReceipt).getPropertyValue("display")){var s=a.cloneNode(!0);e.smallReceipt.append(s),Zn(s)}else e.receipt.prepend(a),Zn(a)}}))}t.remove(),i.remove()}};var to=v.getABT(856);function io(){var t,i;e.basket.fixe?e.basket.mobile?null!==(i=e.basket.mobile)&&void 0!==i&&i.mainDevice?no("TitleBlocOpt"):no("TitleBlocTels"):no("pushForfaits"):null!==(t=e.basket.mobile)&&void 0!==t&&t.mainDevice?no("TitleBlocAcc"):e.basket.mobile&&no("TitleBlocTels")}function no(e){if(e){var t=document.getElementById(e);t&&window.scrollTo({top:t.offsetTop,behavior:"smooth"})}}function oo(e){return e.discounts&&e.discounts.length?"RECURRENT"===e.frequency?e.totalPricePerMonthWithDiscount:e.totalPriceWithDiscount:"RECURRENT"===e.frequency?e.totalPricePerMonth:e.totalPrice}function ro(e,t,i,n,o,r){switch(t){case"RECURRENT":e.monthly.total+=o?n+o:n,e.monthly.items.push({label:i,price:n,odr:o,isFrais:r});break;case"PUNCTUAL":e.punctual.total+=o?n+o:n,e.punctual.items.push({label:i,price:n,odr:o,isFrais:r});break;case"PUNCTUAL_RAW":case"IMMEDIATE":e.immediate.total+=o?n+o:n,e.immediate.items.push({label:i,price:n,odr:o,isFrais:r})}}function ao(e,t,i,n){var o=document.createElement("section");n||o.classList.add("light");var r=document.createElement("span");r.classList.add("L"),r.innerHTML=t;var a=document.createElement("span");a.classList.add("R"),a.innerHTML=i,o.append(r),o.append(a),e.append(o)}function so(t,i,n){var o,r,a,s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=!be()||ve();if((null===(o=i.items)||void 0===o?void 0:o.length)>0){var d=document.createElement("div");if(d.classList.add("tdc"),l&&d.setAttribute("id",l),lo(d,n,"",i.total,"",!0,!1,c),i.payment4xAvailable){var f=i.total+i.sumTotalFeeWithDiscount;lo(d,"","ou ",Math.trunc(f/4*100)/100,"x4 mois",!0,!1,!1,!0,i)}i.items.forEach((function(e){lo(d,e.label,"",e.odr?e.price+e.odr:e.price,"",!1,!1,c),e.odr&&e.odr>0&&lo(d,"Puis remboursement(s)","",-e.odr,"",!1,!0,!1)})),t.append(d),co(d,t)}else if("Reprise mobile"===n&&null!==(r=e.basket)&&void 0!==r&&null!==(a=r.mobile)&&void 0!==a&&null!==(s=a.buyBackRecord)&&void 0!==s&&s.id&&u){var p,m,b,v=document.createElement("div");v.classList.add("tdc");var y=e.basket.mobile.buyBackRecord,h=null!==(p=null===(m=e.basket.mobile.mainDevice)||void 0===m?void 0:m.buyBackContribution)&&void 0!==p?p:0,g=(null!==(b=null==y?void 0:y.totalPrice)&&void 0!==b?b:0)+h;lo(v,n,"-",g,"",!0,!1,!1),lo(v,"sous réserve de la validation de la reprise de votre téléphone",null,null,!1,!1,!1,!1);var k=y.brand+" "+y.modelLabel;lo(v,"Reprise ".concat(k),"-",null==y?void 0:y.totalPrice,"",!1,!1,!1),h&&lo(v,"Bonus Reprise","-",h,"",!1,!1,!1),t.append(v),co(v,t)}}function co(t,i){if(!i.querySelector("#sl-pub")&&j(e.basket)){var n=document.createElement("section");n.setAttribute("id","sl-pub");var o=document.createElement("div");o.classList.add("L"),o.innerHTML="NETFLIX standard avec pub et bouquet Famille";var r=document.createElement("div");r.classList.add("R"),r.innerHTML="Inclus",n.append(o),n.append(r),t.append(n)}}function lo(t,i,n,o,r,a,s,c,l,u){var d=document.createElement("section"),f=document.createElement("div");f.classList.add("L"),a&&f.classList.add("titre"),s&&f.classList.add("sous-titre"),f.innerHTML=i;var p=document.createElement("div");if(p.classList.add("R"),s&&p.classList.add("sous-titre"),0==o){var m=!1;if(e.basket.fixe&&e.basket.fixe.offer){var b,v,y,h,g,k,S,P,E;m=!0;var T,M,D,L,x=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId),A=null==x||null===(b=x.templateData)||void 0===b||null===(v=b.properties)||void 0===v||null===(y=v.boxDescriptions)||void 0===y?void 0:y.idOption1,I=null==x||null===(h=x.templateData)||void 0===h||null===(g=h.properties)||void 0===g||null===(k=g.boxDescriptions)||void 0===k?void 0:k.idOption2,q=null==x||null===(S=x.templateData)||void 0===S||null===(P=S.properties)||void 0===P||null===(E=P.boxDescriptions)||void 0===E?void 0:E.idw=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length&&e.basket.fixe.options?e.basket.fixe.options.filter((function(e){return e.id===A}))[0]:void 0,N=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length&&e.basket.fixe.options?e.basket.fixe.options.filter((function(e){return e.id===I}))[0]:void 0,_=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length&&e.basket.fixe.options?e.basket.fixe.options.filter((function(e){return e.id===q}))[0]:void 0;if(w&&null!=w&&w.id)R=null===(T=e.optionConstants)||void 0===T?void 0:T.optionConstants.find((function(e){return(null==e?void 0:e.code)===(null==w?void 0:w.id)})),p.innerHTML="".concat(null!==(M=R)&&void 0!==M&&M.libelle&&(null===(D=R)||void 0===D?void 0:D.lblConf)===i?null===(L=R)||void 0===L?void 0:L.libelle:nConstants)||void 0===B?void 0:B.optionConstants.find((function(e){return(null==e?void 0:e.code)===(null==N?void 0:N.id)})),p.innerHTML="".concat(null!==(H=C)&&void 0!==H&&H.libelle&&(null===(W=C)||void 0===W?void 0:W.lblConf)===i?null===(G=C)||void 0===G?void 0:G.libelle:"Offert")}else if(_&&null!=_&&_.id){var U,X,V,j;O=null===(U=e.optionConstants)||void 0===U?void 0:U.optionConstants.find((function(e){return(null==e?void 0:e.code)===(null==_?void 0:_.id)})),p.innerHTML="".concat(null!==(X=O)&&void 0!==X&&X.libelle&&(null===(V=O)||void 0===V?void 0:V.lblConf)===i?null===(j=O)||void 0===j?void 0:j.libelle:"Offert")}else p.innerHTML="Offert"}if(re().length){m=!0;var z,Q=re().filter((function(e){return"disneyplus-bouquet-famille"==e.id}));Q.length&&i&&i===(null===(z=Q[0])||void 0===z?void 0:z.label)&&(p.innerHTML="Inclus")}ke().length&&(m=!0,ke().map((function(e){return e.id})).includes("disneyplus-bouquet-famille")&&(p.innerHTML="Inclus")),m||(p.innerHTML="Offert")}else if(o){var Y=(o=Math.trunc(o)).toString().slice(0,-2),J=o.toString().slice(-2),K="".concat(n).concat(Y).concat("00"!=J?",".concat(J):"","€").concat(c?"/mois":"").concat(r);p.innerHTML=K,null!=u&&u.sumTotalFeeWithDiscount&&l&&(p.innerHTML="Ou ".concat(Be.toEuros(o),' x4 mois <br><span class="grey">Dont ').concat(Be.toEuros(null==u?void 0:u.sumTotalFeeWithDiscount)," de frais</span>"))}d.append(f),d.append(p),t.append(d)}function uo(e,t,i){var n=document.createElement("div");n.classList.add("elem"),n.innerHTML="<strong>".concat(Be.toEuros(t.total),"</strong><span>").concat(i,"</span>"),e.append(n)}functiasket.fixe&&e.basket.fixe.offer&&"FIXE_MIG"!==e.basket.fixe.acteDeGestion&&e.basket.fixe.mainDevice&&["PC","TV","CONSOLE","PROJECTEUR"].includes(e.basket.fixe.mainDevice.type)){var i,n,o,r,a=null!==(i=null===(n=e.op.optionsBo],s=null===(r=e.basket.fixe.options)||void 0===r?void 0:r.map((function(e){return e.id})),c=a.filter((function(e){return s.includes(e.code)}));if(2!devez sélectionner 2 bonus équipements inclus")}if(ne(e.basket)&&e.options){if(ae(e.basket)&&!e.basket.mobile&&!e.basket.fixe)return;var l=e.options?re().map((function(t){return e.options.find((function(e){return Ye.match(e,t.id)}))})).filter((function(e){return!!e})):void 0,u=l?l.filter((function(e){return e.needsConsent})):[];if(u&&u.length){if(!e.consentedOptions||!e.consentedOptions.length)return;u.forEach((function(t){e.consentedOptions.includes(t.code)}))}}t.classList.add("loader"),Vi.sendEtagCheckoutBasketEvent(),Fr.checkout()}}function po(e,t){t.querySelector('.cp input[type="text"]')&&(t.querySelector('.cp input[type="text"]').value=e.code),t.querySelector('.cp input[type="submit"]')&&(t.querySelector('.cp input[type="submit"]').style.display="none"),t.querySelector(".cp .iconok")&&(t.querySelector(".cp .iconok").style.display="block")}function mo(){var t=e.basket.fixe&&e.basket.fixe.promocodes?e.basket.fixe.promocodes:[],i=e.basket.mobile&&e.basket.mobile.promocodes?e.basket.mobile.promocodes:[],n=e.basket.temporary&&e.basket.temporary.promocodes?e.basket.temporary.promocodes:[];return t.concat(i).concat(n)}const bo=function(){var t=Fe("#Fac"),i=Fe("#FacRes");if(t){var n,o,a;e.receipt.innerHTML="",e.smallReceipt.innerHTML="";var s={monthly:{total:0,items:[]},immediate:{total:0,payment4xAvailable:!1,monthlyFeeWithDiscount:0,sumTotalFeeWithDiscount:0,items:[]},punctual:{total:0,items:[]}},c={ASTFR:{label:"Prélevé par CHUBB",total:0,items:[]},CanalPlus:{label:"Prélevé par CANAL+",total:0,items:[]},SFRPC:{label:"Prélevé par ASSURANT",total:0,items:[]},LOAN_1224X:{label:"Prélevé par FLOA Bank",total:0,items:[]}};!function(t,i,n){(function(t){if(e.basket.fixe&&e.basket.fixe.offer){var i=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);if(i){var n,o=e.basket.fixe.mainDevice&&"CONSOLE"==e.basket.fixe.mainDevice.type?i.templateData.properties.labelLongOther:null===(n=i.templateData.properties)||void 0===n?void 0:n.labelLong,r=e.basket.fixe.offer.totalPricePerMonthWithDiscount||0===e.basket.fixe.offer.totalPricePerMonthWithDiscount?e.basket.fixe.offer.totalPricePerMonthWithDiscount:e.basket.fixe.offer.totalPricePerMonth;ro(t,e.basket.fixe.offer.frequency,o,r)}}if(e.basket.mobile&&e.basket.mobile.offer&&"RM"!=e.basket.mobile.offer.acteDeGestion){var a=e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_MOB")?Et:e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_SSMOB")?Tt:N(e.basket.mobile.acteDeGestion,e.basket.mobile.offer.gammeId);if(a){var s=e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_")&&e.basket.mobile.offer.label?e.basket.mobile.offer.label:a.templateData?a.templateData.properties.labelLong:"",c=e.basket.mobile.offer.totalPricePerMonthWithDiscount||0===e.basket.mobile.offer.totalPricePerMonthWithDiscount?e.basket.mobile.offer.totalPricePerMonthWithDiscount:e.basket.mobile.offer.totalPricePerMonth;ro(t,e.basket.mobile.offer.frequency,s,c)}}if(e.basket.mobile&&e.basket.mobile.offer&&ge(e.basket.mobile.offer.ptaId)){var l=e.basket.mobile.offer.label,u=e.basket.mobile.offer.totalPricePerMonthWithDiscount||0===e.basket.mobile.offer.totalPricePerMonthWithDiscount?e.basket.mobile.offer.totalPricePerMonthWithDiscount:e.basket.mobile.offer.totalPricePerMonth;ro(t,e.basket.mobile.offer.frequency,l,u)}if(e.basket.mobile&&e.basket.mobile.offer&&"HM1"===e.basket.mobile.offer.ptaId){var d,f,p,m,b=e.basket.mobile.offer.label,v=e.basket.mobile.offer.totalPricePerMonthWithDiscount||0===e.basket.mobile.offer.totalPricePerMonthWithDiscount?e.basket.mobile.offer.totalPricePerMonthWithDiscount:e.basket.mobile.offer.totalPricePerMonth;ro(t,e.basket.mobile.offer.frequency,b,v);var y=Xt(),h=null!==(d=e.basket.mobile.mainDevice)&&void 0!==d&&d.discounts?null===(f=e.basket.mobile.mainDevice)||void 0===f||null===(p=f.discounts)||void 0===p?void 0:p.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0})).map((function(e){return e.discountValue})).reduce((function(e,t){return e+t}),0):0,g=null,k=null===(m=e.basket.mobile.mainDevice)||void 0===m?void 0:m.modelLabel,S=e.basket.mobile.mainDevice.totalPriceWithDiscount||0===e.basket.mobile.mainDevice.totalPriceWithDiscount?e.basket.mobile.mainDevice.totalPriceWithDiscount:e.basket.mobile.mainDevice.totalPrice;if(y&&y.plans[0]&&y.plans[0].devicePrices){var P=y.plans[0].devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0];if(P&&P.paymentOption)if("COMPTANT"==e.basket.mobile.mainDevice.paymentMode||"CB4X"==e.basket.mobile.mainDevice.paymentMode)P.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0]&&(t.immediate.payment4xAvailable=!0);else{var E=P.paymentOption.filter((function(t){return t.billingMode==e.basket.mobile.mainDevice.paymentMode}))[0];E&&(g={nbPayments:E.nbPayment,value:E.monthlyFeeWithinMobilePlan})}}ro(t,e.basket.mobile.mainDevice.frequency,k,S,h),g&&"LOAN_FDPSFR"==e.basket.mobile.mainDevice.paymentMode&&ro(t,"RECURRENT","Facilité de paiement pack alerte vidéo",g.value)}})(t),function(t,i,n){if(e.basket.fixe&&e.basket.fixe.mainDevice&&e.basket.fixe.mainDevice.id){var o=Yt.getFixeDeviceGroup(e.basket.fixe.mainDevice.id);if(o){var r=o.devices.filter((function(t){return t.sapCode==e.basket.fixe.mainDevice.id}))[0],a=v.setTitleBasedOnDeviceType(o,r),s=e.basket.fixe.mainDevice.totalPriceWithDiscount||0===e.basket.fixe.mainDevice.totalPriceWithDiscount?e.basket.fixe.mainDevice.totalPriceWithDiscount:e.basket.fixe.mainDevice.totalPrice,c=e.basket.fixe.mainDevice.discounts?e.basket.fixe.mainDevice.discounts.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0})).map((function(e){return e.discountValue})).reduce((function(e,t){return e+t}),0):0,l=null;if(e.basket.fixe.offer&&e.basket.fixe.offer.gammeId){var u=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);if(u&&u.plans[0]&&u.plans[0].devicePrices){var d=u.plans[0].devicePrices.filter((function(t){return t.sapCode==e.basket.fixe.mainDevice.id}))[0];if(d&&d.paymentOption)if("COMPTANT"==e.basket.fixe.mainDevice.paymentMode||"CB4X"==e.basket.fixe.mainDevice.paymentMo;else{var f=d.paymentOption.filter((function(t){return t.billingMode==e.basket.fixe.mainDevice.paymentMode}))[0];f&&(l={nbPayments:f.nbPayment,value:f.monthlyFeeWithinMobilePlan})}}ro(t,e.basket.fixe.mainDevice.frequency,a,s,c),l&&("LOAN_FDPSFR"==e.basket.fixe.mainDevice.paymentMode?ro(t,"RECURRENT","Facilité de paiement",l.value):ro(t,"RECURRENT","Crédit ".concat(function(e){switch(e){case"PC":return"ordinateur";case"CONSOLE":return"console";default:return"télévision"}}(e.basket.fixe.mainDevice.type)," ").concat(l.nbPayments," mois"),l.value))}else ro(t,e.basket.fixe.mainDevice.frequency,a,s,c)}}if(e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id){var p=Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id);if(e.basket.mobile.mainDevice.id===U&&ro(t,"IMMEDIATE","".concat(e.basket.mobile.mainDevice.brandLabel," ").concat(e.basket.mobile.mainDevice.modelLabel),e.basket.mobile.mainDevice.totalPriceWithDiscount||0===e.basket.mobile.mainDevice.totalPriceWithDiscount?e.basket.mobile.mainDevice.totalPriceWithDiscount:e.basket.mobile.mainDevice.totalPrice),p){var m=p.devices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0],b="".concat(p.brandLabel," ").concat(p.label," ").concat(m.properties.color.label," ").concat(m.properties.memoryCapacity);p.properties&&"RECONDITIONNE"==p.properties.state&&(b+=" ".concat(m.gradeLabel));var y=e.basket.mobile.mainDevice.totalPriceWithDiscount||0===e.basket.mobile.mainDevice.totalPriceWithDiscount?e.basket.mobile.mainDevice.totalPriceWithDiscount:e.basket.mobile.mainDevice.totalPrice,h=e.basket.mobile.mainDevice.discounts?e.basket.mobile.mainDevice.discounts.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0})).map((function(e){return e.discountValue})).reduce((function(e,t){return e+t}),0):0,g=null;if(e.basket.mobile.offer&&e.basket.mobile.offer.gammeId){var k=_(e.basket.mobile.offer),S=k?k.devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null;if(S&&S.paymentOption)if("COMPTANT"==e.basket.mobile.mainDevice.paymentMode||"CB4X"==e.basket.mobile.mainDevice.paymentMode)S.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0]&&(t.immediate.payment4xAvailable=!0);else{var P=S.paymentOption.filter((function(t){return t.billingMode==e.basket.mobile.mainDevice.paymentMode}))[0];P&&(g={nbPayments:P.nbPayment,value:P.monthlyFeeWithinMobilePlan})}ro(t,e.basket.mobile.mainDevice.frequency,b,y,h),g&&("LOAN_FDPSFR"==e.basket.mobile.mainDevice.paymentMode?ro(t,"RECURRENT","Facilité de paiement téléphone",g.value):["LOAN_24X_PAYANT","LOAN_24X_SANS_FRAIS"].includes(e.basket.mobile.mainDevice.paymentMode)&&(i.LOAN_1224X.items.push({label:"Crédit téléphone ".concat(g.nbPayments," mois"),price:g.value}),i.LOAN_1224X.total+=g.value))}else{if("CB4X"===e.basket.mobile.mainDevice.paymentMode&&m.paymentOptions){var E=m.paymentOptions.filter((function(e){return"CB4X"==e.billingMode}))[0];E&&(t.immediate.payment4xAvailable=!0,t.immediate.sumTotalFeeWithDiscount=n||0,t.immediate.monthlyFeeWithDiscount=E.monthlyFeeWithDiscount?E.monthlyFeeWithDiscount:0)}ro(t,e.basket.mobile.mainDevice.frequency,b,y,h)}}}}(t,i,n),function(t,i){var n=e.basket.mobile&&e.baskssories:[],o=e.basket.fixe&&e.basket.fixe.accessories?e.basket.fixe.accessories:[],r=e.basket.temporary&&e.basket.temporary.accessories?e.basket.temporary.accessories:[],a=n.concat(o).concat(r);a&&a.length&&a.forEach((function(n){var o="".concat(null==n?void 0:n.modelLabel," x").concat(null==n?void 0:n.quantity);ro(t,"PUNCTUAL"==n.frequency?"IMMEDIATE":n.frequency,o,n.totalPriceWithDiscount,function(e){var t=e.discounts?e.discounts.filter((function(e){return"ODR"===e.discountType})):[];return t&&t.length?1===t.length?t[0].discountValue:t.map((function(e){return e.discountValue})).reduce((function(e,t){return e+t}),0):0}(n));var r,a,s=$t(n.id);t.immediate.monthlyFeeWithDiscount=Pn.monthlyFeeWithDiscount(s),t.immediate.sumTotalFeeWithDiscount=i||0,"CB4X"===n.paymentMode&&"IMMEDIATE"===n.frequency&&(null!==(r=e.basket.mobile)&&void 0!==r&&r.mainDevice||null!==(a=e.basket.fixe)&&void 0!==a&&a.mainDevice||(t.immediate.payment4xAvailable=!0))}))}(t,n),function(t,i){var n,o,a,s,c,l,u=e.basket.mobile&&e.basket.mobile.options?e.basket.mobile.options:[],d=e.basket.fixe&&e.basket.fixe.options?e.basket.fixe.options:[],f=null!==(n=e.basket.fixe)&&void 0!==n&&n.options&&(null===(o=e.basket.fixe)||void 0===o?void 0:o.options.length)>0?e.basket.fixe.options.filter((function(e){return"internet-garanti"==e.id}))[0]:void 0,p=null!==(a=e.basket.fixe)&&void 0!==a&&a.options&&(null===(s=e.basket.fixe)||void 0===s?void 0:s.options.length)>0?e.basket.fixe.options.filter((function(e){return"repeteur-wifi6"==e.id}))[0]:void 0,m=null!==(c=e.basket.fixe)&&void 0!==c&&c.options&&(null===(l=e.basket.fixe)||void 0===l?void 0:l.options.length)>0?e.basket.fixe.options.filter((function(e){return"repeteur-wifi"==e.id}))[0]:void 0;f&&ro(t,"PUNCTUAL","Frais d'activation Internet garanti",1e3),p&&e.basket.fixe.offer.gammeId.includes("-PREMIUM")&&ro(t,"PUNCTUAL","Frais de mise à disposition Répéteur Wifi 6",1e3),m&&e.basket.fixe.offer.gammeId.includes("-PREMIUM")&&ro(t,"PUNCTUAL","Frais de mise à disposition Répéteur Wifi",1e3);var b=e.basket.temporary&&e.basket.temporary.options?e.basket.temporary.options:[],y=void 0;e.basket.fixe&&"FIXE_DEMENAGEMENT"!==e.basket.fixe.signupType&&(y=e.basket.fixe&&e.basket.fixe.retained&&e.basket.fixe.retained.options?e.basket.fixe.retained.options:[]);var h=e.basket.mobile&&e.basket.mobile.retained&&e.basket.mobile.retained.options?e.basket.mobile.retained.options:[];y&&y.length&&(y=y.filter((function(e){return e.label&&void 0!==e.totalPrice&&!r.includes(e.id)})),(y=v.sortByPrice(v.sortByLabel(y),"totalPrice")).forEach((function(e){return ro(t,"RECURRENT",e.label,e.totalPrice)}))),h&&h.length&&(h=h.filter((function(e){return e.label&&void 0!==e.priceFuturPerMonthWithDicounts&&0!==e.priceFuturPerMonthWithDicounts&&!r.includes(e.id)})),(h=v.sortByPrice(v.sortByLab")).forEach((function(e){return ro(t,"RECURRENT",e.label,e.priceFuturPerMonthWithDicounts)}))),d&&d.length&&d.filter((function(e){return!r.includes(e.id)})).forEach((function(e){"CanalPlus"===e.partner?(i.CanalPlus.items.push({label:e.label,price:oo(e)}),i.CanalPlus.total+=oo(e)):ro(t,e.frequency,e.label,oo(e))})),u&&u.length&&u.forEach((function(e){ro(t,e.frequency,e.label,oo(e))})),b&&b.length&&b.forEach((function(i){var n=e.options?e.options.find((function(e){return Ye.match(e,i.id)})):void 0;n&&(i.frequency=n.frequency),ro(t,i.frequency,i.label,oo(i))}))}(t,i),function(t){e.basket.fixe&&e.basket.fixe.administrationFee&&e.basket.fixe.administrationFee.length>0&&e.basket.fixe.administrationFee.sort((function(e,t){return t.totalPriceWithDiscount-e.totalPriceWithDiscount})).forEach((function(e){ro(t,e.frequency,e.label,e.totalPriceWithDiscount,null,!0)})),e.basket.fixe&&e.basket.fixe.changeFee&&e.basket.fixe.changeFee.length>0&&e.basket.fixe.changeFee.sort((function(e,t){return t.totalPriceWithDiscount-e.totalPriceWithDiscount})).forEach((function(e){ro(t,e.frequency,e.label,e.totalPriceWithDiscount,null,!0)})),e.basket.mobile&&e.basket.mobile.administrationFee&&e.basket.mobile.administrationFee.length>0&&e.basket.mobile.administrationFee.sort((function(e,t){return t.totalPriceWithDiscount-e.totalPriceWithDiscount})).forEach((function(e){ro(t,e.frequency,e.label,e.totalPriceWithDiscount,null,!0)})),e.basket.mobile&&e.basket.mobile.changeFee&&e.basket.mobile.changeFee.length>0&&e.basket.mobile.changeFee.sort((function(e,t){return t.totalPriceWithDiscount-e.totalPriceWithDiscount})).forEach((function(e){ro(t,e.frequency,e.label,e.totalPriceWithDiscount,null,!0)}))}(t),function(t){e.basket.mobile&&e.basket.mobile.sim&&"CLASSIQUE"!=e.basket.mobile.sim.type&&e.basket.mobile.sim.totalPriceWithDiscount>0&&ro(t,"IMMEDIATE",e.basket.mobile.sim.label,e.basket.mobile.sim.totalPriceWithDiscount)}(t),function(t){e.basket.mobile&&e.basket.mobile.insurance&&e.basket.mobile.insurance.id&&(t.ASTFR.items.push({label:e.basket.mobile.insurance.label,price:e.basket.mobile.insurance.totalPricePerMonthWithDiscount}),t.ASTFR.total+=e.basket.mobile.insurance.totalPricePerMonthWithDiscount)}(i),function(t){e.basket.fixe&&e.basket.fixe.insurance&&e.basket.fixe.insurance.id&&(t.SFRPC.items.push({label:e.basket.fixe.insurance.label,price:e.basket.fixe.insurance.totalPricePerMonthWithDiscount}),t.SFRPC.total+=e.basket.fixe.insurance.totalPricePerMonthWithDiscount)}(i)}(s,c,null===(n=e.basket.global)||void 0===n?void 0:n.sumTotalFeeWithDiscount),function(e,t,i){var n=e.querySelector(".blocs"),o=e.querySelector(".sep");t.immediate&&t.immediate.items&&t.immediate.items.length&&v.setStepper(4),n&&(n.innerHTML="",so(n,t.immediate,"À payer aujourd'hui",!1,"PayerAjourHui"),so(n,t.monthly,"À payer chaque mois",!0,"PayerChaqueMois"),so(n,t.punctual,"À payer sur la prochaine facture uniquement",!1,"PayerSurProchaineFacture"),so(n,{},"Reprise mobile",!1,"RepriseMobile")),o&&(o.innerHTML="",Object.keys(i).forEach((function(e){var t=i[e];if(t.items.length>0){var n=document.createElement("div");n.classList.add("mi"),ao(n,t.label,"".concat(Be.toEuros(t.total),"/mois"),!0),t.items.forEach((function(e){ao(n,e.label,"".concat(Be.toEuros(e.price),"/mois"),!1)})),o.append(n)}})))}(t,s,c),e.receipt.innerHTML+=t.innerHTML,function(t){if(t){var i=t.querySelector(".lame-services");if(i){var n=e.basket&&e.basket.mobilele.mainDevice.paymentMode||"CB4X"===e.basket.mobile.mainDevice.paymentMode);if(!ce(e.basket)||!n){i.classList.remove("five-elem");var o=i.querySelector(".cb4x");o&&o.remove()}}}}(e.receipt),e.basket.temporary&&(e.basket.temporary.accessories&&e.basket.temporary.accessories.length>1||e.basket.temporary.devices)||e.basket.mobile&&(e.basket.mobile.accessories&&e.basket.mobile.accessories.length>1||e.basket.mobile.devices)||e.basket.fixe?function(e){e.querySelector(".cp").style.display="none"}(e.receipt):function(t){var i=t.querySelector(".cp"),n=t.querySelector('.cp input[type="text"]'),o=t.querySelector('.cp input[type="submit"]'),r=t.querySelector(".cp .ret.ok"),a=t.querySelector(".cp .ret.ko"),s=t.querySelector(".cp .iconok");if(r&&(r.innerHTML=""),a&&(a.style.display="none"),s&&(s.style.display="none"),o&&(o.style.display=null),o&&n){var c=mo();c&&c.length&&po(c[0],t),o.onclick=function(){if(n.value&&e.basket){var t=e.basket.mobile?"mobile":e.basket.fixe?"fixe":"temporary",o=(r={},a=t,s={promocodes:[{code:n.value}]},a in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,r);"fixe"===t&&(o.fixe.idEligibility=e.idEligibility),v.smartLSSet("_PT.".concat(e.brand,".lastPromoCode"),n.value),i.clasCodeBasketEvent(),Fr.put(o)}var r,a,s},n.onkeyup=function(e){s.style.display="none",a.style.display="none",o.style.display=null,c&&c.length&&(e.target.value!==c[0].code||""===e.target.value?(o.style.display=null,r.innerHTML=""):e.target.value===c[0].code&&(s.style.display="block",o.style.display="none"))}}}(e.receipt),function(t){var i=v.smartLSGet("_PT.".concat(e.brand,".lastPromoCode"));e.warnings&&i&&e.warnings.forEach((function(e){var n=mo().find((function(t){return t.code===e.message}));if(e.code)switch(e.code){case"ADD_FIX_PCO":case"ADD_MOB_PCO":case"ADD_TMP_PCO":t.querySelector(".cp .ret.ok").innerHTML=n&&n.label?n.label:"",po(n,t);break;case"WRN_FIX_PCO":case"WRN_MOB_PCO":case"WRN_TMP_PCO":var o=t.querySelector(".cp .iconok");t.querySelector('.cp input[type="text"]')&&(t.querySelector('.cp input[type="text"]').value=i),t.querySelector('.cp input[type="submit"]')&&(t.querySelector('.cp input[type="submit"]').style.display="none"),t.querySelector(".cp .ret.ko")&&(t.querySelector(".cp .ret.ko").style.display="block"),o&&(o.classList.add("iconko"),o.classList.contains("iconok")&&o.classList.remove("iconok"),o.style.display="block")}}))}(e.receipt),e.receipt.querySelectorAll(".btn").forEach((function(e){return e.onclick=function(){e.classList.contains("disabled")?e.classList.contains("disabled")&&document.getElementById("pushpotdedata")&&(no("pushpotdedata"),document.getElementById("phone").focus()):fo(e)}}));var l=e.receipt.querySelector(".bot .save-basket");null!==(o=e.basket.mobile)&&void 0!==o&&null!==(a=o.buyBackRecord)&&void 0!==a&&a.id?l.remove():l.onclick=function(){return zn()},i&&(e.smallReceipt.innerHTML+=i.innerHTML,"2"===to&&(e.bsket.fixe)&&(e.smallReceipt.querySelector("a").innerHTML="Compléter mon offre",e.smallReceipt.querySelector("a").onclick=function(e){io()}),function(e,t){var i=e.querySelector(".T");i.innerHTML="",uo(i,t.monthly,"Par mois"),uo(i,t.immediate,"Aujourd'hui"),uo(i,t.punctual,"Sur la prochaine facture")}(e.smallReceipt,s),"3"===to&&(e.basket.mobile||e.basket.fixe)?(e.smallReceipt.querySelector(".btn").innerHTML="Compléter mon offre",e.smallReceipt.querySelector(".btn").onclick=function(e){io()}):e.smallReceipt.querySelector(".btn").onclick=function(t){e.smallReceipt.querySelector(".btn").classList.contains("disabled")?e.smallReceipt.querySelector(".btn").classList.contains("disabled")&&document.getElementById("pushpotdedata")&&(no("pushpotdedata"),document.getElementById("phone").focus()):fo(t.target)}),eo()}e.receipt.querySelectorAll("#Fac .tdc .L").forEach((function(e){e.innerHTML.includes("Pack alerte vidéo")&&(e.style.textTransform="lowercase")}))};function vo(e,t){var i=document.createElement("input");return i.setAttribute("id",e),i.setAttribute("type","radio"),i.setAttribute("name",t),i}function yo(e){var t=document.createElement("div");if(""!==e)for(var i=e.split(" "),n=0;n<i.length;n++)t.classList.add(i[n]);return t}function ho(e){var t=document.createElement("p");return""!==e&&t.classList.add(e),t}function go(e){var t=document.createElement("label");return t.classList.add("elem"),t.setAttribute("for",e),t}function ko(t,i){e.actionInProgress||(i.classList.add("loader"),Fr.put({fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),mainDevice:{id:r:{act:e.basket.fixe.offer.acteDeGestion,gammeId:e.basket.fixe.offer.gammeId,ptaId:e.basket.fixe.offer.ptaId,universe:e.basket.fixe.offer.universe,withPortability:e.basket.fixe.offer.withPortability}}}))}function So(t,i){!0===Po(t)&&(i=document.getElementById("ModePaiment").querySelector(".R")),e.actionInProgress||(i.classList.add("loader"),Fr.put({mobile:{mainDevice:{id:e.basket.mobile.mainDevice.id,quantity:1,paymentMode:t}}},!1,!0))}function Po(e){return["LOAN_24X_SANS_FRAIS"].includes(e)}function Eo(e){var t=document.createElement("span");return""!==e&&t.classList.add(e),t}const To={addPaymentCreditLong:function(e,t,i,n,o,r,a,s){if(i){var c=vo(o,r);c.checked=a===t,c.onchange=function(){return"fixePaymentMode"===s?ko(t,e):So(t,e)};var l=go(o),u=yo(""),d=ho("nfois");d.innerHTML="En ".concat(i.nbPayment," fois"),l.append(u),u.append(d);var f=yo(""),p=ho("nfois");p.innerHTML="".concat(Be.toEuros(i.monthlyFeeWithinMobilePlan)," x").concat(i.nbPayment," mois"),l.append(f),f.append(p),n&&(ho("").innerHTML="dont ".concat(Be.toEuros(n.discountValue)," remboursés après achat<br>")),e.append(c),e.append(l)}},addPaymentComptantAnd4x:function(e,t,i,n,o,r,a,s,c){var l=vo(r,a);l.checked="COMPTANT"===s||"CB4X"==s,l.onchange=function(){return"fixePaymentMode"===c?ko("COMPTANT",e):So("COMPTANT",e)};var u=go(r),d=yo("opt"),f=ho("nfois");f.innerHTML="En 1 fois"+(i?"  ou":""),u.append(d),d.append(f);var p=yo("right");d.append(p);var m,b,v=ho("b"),y=t.devicePriceWithDiscounts?t.devicePriceWithDiscounts:t.devicePrice;if(v.innerHTML=Be.toEuros(y),p.append(v),n){var h=ho("");h.innerHTML="au lieu de ".concat(Be.toEuros(t.devicePrice)),p.append(h)}if(o){var g=ho("");g.innerHTML="dont ".concat(Be.toEuros(o.discountValue)," remboursés après achat"),p.append(g)}if(i){var k=yo("opt"),S=yo(""),P=ho("nfois");P.innerHTML="En 4 fois";var E=(m="tooltip",(b=document.createElement("i")).classList.add(m),b);P.append(E);var T=Eo("tooltip");T.innerHTML="Le choix entre le paiement en 1 fois et en 4 fois s'effectuera lors de l'étape de paiement.",E.append(T),u.append(k),k.append(S),S.append(P);var M=yo("right");k.append(M);var D=ho("b");D.innerHTML=Be.toEuros(i.firstMonthPriceWithDiscount),M.append(D);var L=ho("");o&&(L.innerHTML="dont ".concat(Be.toEuros(o.discountValue)," remboursés après achat<br>")),L.innerHTML+="<b>puis ".concat(Be.toEuros(i.monthlyFeeWithinMobilePlan)," x3 mois </b>"),M.append(L)}e.append(l),e.append(u)},addPaymentLoanFDPSFR:function(e,t,i,n,o,r,a){if(t){var s=vo(n,o);s.checked="LOAN_FDPSFR"===r,s.onchange=function(){return"fixePaymentMode"===a?ko("LOAN_FDPSFR",e):So("LOAN_FDPSFR",e)};var c=go(n),l=yo(""),u=ho("nfois");u.innerHTML="Facilité ".concat(t.nbPayment," fois");var d=ho("");d.innerHTML="sans frais",c.append(l),l.append(u),l.append(d);var f=yo("right");c.append(f);var p=ho("b");if(p.innerHTML="".concat(Be.toEuros(t.upfrontWithPayback)),f.append(p),"fixePaymentMode"===a){var m=ho("");m.innerHTML="+ ".concat(Be.toEuros(t.monthlyFeeWithinMobilePlan)," x24"),24===t.nbPayment&&(m.innerHTML+="<br>(soit ".concat(Be.toEuros(t.monthlyFeeWithinMobilePlan*t.nbPayment),")")),f.append(m)}else{var b=ho("");i&&(b.innerHTML="dont ".concat(Be.toEuros(i.discountValue)," remboursés après achat<br>")),b.innerHTML+="<b>puis ".concat(Be.toEuros(t.monthlyFeeWithinMobilePlan)," x24 mois </b>"),f.append(b)}e.append(s),e.append(c)}},creditLong:Po,createDiv:yo,createParagrapheBloc:ho,changeMobilePaymentMode:So,createSpanBloc:Eo,createLabel:go,createInput:vo},Mo=function(){if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id){var t=we("ModePaiment");if(t){t.querySelector(".title")&&(t.querySelector(".title").innerHTML="Mode de paiement du téléphone");var i="MIG"==e.basket.mobile.acteDeGestion?"RM":e.basket.mobile.acteDeGestion,n=W(e.basket.mobile.mainDevice.id,i);if(n&&n.paymentOption){var o=0,r=0,a="",s=n.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0];s&&(o++,a="CB4X");var c=n.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0];c&&(o++,a="LOAN_FDPSFR"),n.paymentOption.filter((function(e){return"LOAN_24X_PAYANT"==e.billingMlter((function(e){return"LOAN_24X_SANS_FRAIS"==e.billingMode}))[0];l&&(r++,a="LOAN_24X_SANS_FRAIS");var u=function(e){if(e){var t=e.filter((functcountType&&e.discountValue&&(!e.duration||0==e.duration)}));if(t&&t.length)return t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)}return 0}(n.discounts),d=function(e){if(e){var t=e.filter((function(e){return"ODR"===e.discountType&&e.discountValue>0}));if(t&&t.length)return{discountValue:t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)}}return null}(n.discounts);if(o){var f=t.querySelector(".R");if(f){if(f.innerHTML="",To.addPaymentComptantAnd4x(f,n,s,u,d,"24foisTel","paymentTel",e.basket.mobile.mainDevice.paymentMode,"mobilePaymentMode"),To.addPaymentLoanFDPSFR(f,c,d,"paymentloanFDPSFR","paymentTel",e.basket.mobile.mainDevice.paymentMode,"mobilePaymentMode"),r){var p,m,b,v=To.createInput("credit24fois","credit24fois");v.checked=e.basket.mobile.mainDevice.paymentMode===a,v.onchange=function(){!function(e,t,i){!1===To.creditLong(e)&&To.changeMobilePaymentMode(i,t)}(e.basket.mobile.mainDevice.paymentMode,f,a)};var y=To.createLabel("credit24fois"),h=To.creaCrédit en 24 fois";var k=To.createParagrapheBloc("");k.innerHTML=(l?"sans":"avec")+" f");S.innerHTML="opéré par ";var P=((L=document.createElement("img")).setAttribute("alt","Image banque Floa en 4x"),L.setAttribute("src","//static.s-sfr.fr/media/Logo_Floa.svg"),L);S.append(P),h.append(g),h.append(k),h.append(S);var E=To.createDiv("right"),T=To.createParagrapheBloc("b"),M=n.paymentOption.filter((function(t){return t.billingMode==e.basket.mobile.mainDevice.paymentMode}))[0];To.creditLong(e.basket.mobile.mainDevice.paymentMode)||(M=n.paymentOption.filter((function(e){return e.billingMode==a}))[0]),T.innerHTML=Be.toEuros(null===(p=M)||void 0===p?void 0:p.upfrontWithPayback),y.append(E),E.append(T);var D=To.createParagrapheBloc("");d&&(D.innerHTML="dont ".concat(Be.toEuros(d.discountValue)," remboursés après achat<br>")),D.innerHTML+="<b>puis ".concat(Be.toEuros(null===(m=M)||void 0===m?void 0:m.monthlyFeeWithinMobilePlan)," x").concat(null===(b=M)||void 0===b?void 0:b.nbPayment," mois</b><br>"),E.append(D),f.append(v),f.append(y)}f.querySelectorAll("input").length&&e.content.append(t)}}}}}var L},Do=function(){var t=[];e.basket.mobile&&e.basket.mobile.administrationFee&&e.basket.mobile.administrationFee.length>0&&(t=t.concat(e.basket.mobile.administrationFee)),e.basket.mobile&&e.basket.mobile.changeFee&&e.basket.mobile.changeFee.length>0&&(t=t.concat(e.basket.mobile.changeFee));var i=we("FraisSuppMob");if(t.length&&i){var n=i.querySelector("section");i.innerHTML="",t.sort((function(e,t){return t.totalPriceWithDiscount-e.totalPriceWithDiscount})).forEach((function(e,t){!function(e,t,i,n){n>0&&t.querySelector(".M .title").remove(),t.querySelector(".M .subtitle").innerHTML=i.label,t.querySelector(".R .p-block").innerHTML=Be.formatPrice(i.totalPriceWithDiscount,!1),e.append(t),e.innerHTML=t.innerHTML}(i,n.cloneNode(!0),e,t)})),e.content.append(i)}if(e.basket.mobile&&e.basket.mobile.sim&&"CLASSIQUE"!=e.basket.mobile.sim.type&&e.basket.mobile.sim.totalPriceWithDiscount>0){i&&i.classList.add("double");var o=we("FraisSuppSim");o.querySelector(".M .subtitle").innerHTML=e.basket.mobile.sim.label;var r=o.querySelector(".R .p-block"),a=Be.formatPrice(e.basket.mobile.sim.totalPriceWithDiscount,!1)+"<p>A payer aujourd'hui</p>";r.innerHTML=a,e.content.append(o)}};function Lo(){Vi.sendEtagOpenBox4GPopinBasketEvent();var e=we("SubventionBlock");e&&Vn.open(e)}const xo=function(){if(console.log("*** utils.isEligibleForBox4GSubvention(_PT.brand): "+v.isEligibleFoket)&&v.isEligibleForBox4GSubvention(e.brand)){var t=we("Consentement");if(t){var i=t.querySelector(".subtitle");i&&(i.innerHTML="Je certifie sur l’honneur n’avoir jamais bénéficié de cette subvention de L’Etat et que ma ligne téléphonique desservant l’adresse d’installation n’est pas éligible à l’ADSL à 8Mb/s ni au très haut débit.");var n=t.querySelector("a");n&&(n.onclick=Lo);var o=t.querySelector("input");o&&(o.checked=e.basket.fixe.options&&e.basket.fixe.options.filter((function(e){return"aideCNT"==e.id}))[0]);var r=t.querySelector(".M label");r&&(r.onclick=function(){return function(t,i){if(!e.actionInProgress){i.classList.add("loader");var n={fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),options:[{id:"aideCNT"}]}};t?Fr.remove(n):Fr.put(n)}}(o.checked,r)}),e.content.append(t)}}},Ao=function(){if(e.basket.fixe&&e.basket.fixe.offer&&e.basket.fixe.offer.gammeId){var t=we("Gen8");if(t){var i=F(e.basket.fixe.acteDeGestion,e.basketr||"GEN7"==i.stbCompatibility)){var n=B(e.basket.fixe.acteDeGestion,i.codePivotGamme,i.techno,i.stbCompatibility,i.xperience,i.tvOffer);if(n){var o="GEN8"==i.stbCompatibility?i:n;e.content.append(v.createTitle("h2","tilte-asso","SFR Box 8 vous en offre plus")),e.content.append(v.createTitle("p","subtilte-asso","Changer pour une offre SFR box 8, l'équipement dernière génération")),function(t,i){var n=t.querySelector(".L a");n&&("SFR"===e.brand&&window.newSFRNavigateTo?n.onclick=function(){return window.newSFRNavigateTo(T(i.seoName))}:n.href=k(i.seoName));var o=t.querySelector(".L img");o&&(i.templateData&&i.templateData.properties&&i.templateData.properties.boxDescripons.urlPies.boxDescriptions.urlPictureBoxPanier:o.remove())}(t,o),function(t,i){var n=t.querySelector(".M .title");if(n){var o=e.basket.fixe.mainDevice&&"CONSOLE"==e.basket.fixe.mainDevice.type?i.templateData.properties.labelLongOther:i.templateData.properties.labelLong,r=i.plans[0];if(r){var a=r.pricePerMonthWithDiscounts?r.pricePerMonthWithDiscounts:r.pricePerMonth;if(o+=" pour ".concat(Be.toEuros(a),"/mois"),r.discounts){var s=r.discounts.filter((function(e){return e.duration&&e.duration>0})).sort((function(e,t){return e.duration-t.duration}))[0];s&&(o+=" pendant ".concat(s.duration," mois puis ").concat(Be.toEuros(s.priceBefore),"/mois"))}}n.innerHTML=o}}(t,o),function(e,t){var i=e.querySelector(".M .desc");if(i&&(i.innerHTML="",t.templateData.properties.boxDescriptions)){if(t.templateData.properties.boxDescriptions.descriptions){var n=me(t);t.templateData.properties.boxDescriptions.descriptions.forEach((function(e){i.innerHTML+=e.replace("[DEBITD]",n[0]).replace("[DEBITU]",n[1])+"</br>"}))}t.templateData.properties.boxDescriptions.appel&&(i.innerHTML+=t.templateData.properties.boxDescriptions.appel+"</br>"),t.templateData.properties.boxDescriptions.chaine&&(i.innerHTML+=t.templateData.properties.boxDescriptions.chaine+"</br>")}}(t,o);var r=t.querySelector("input"),a=t.querySelector(".M label");r.checked=o==i,a.onclick=function(){return function(t,i){if(!e.actionInProgress){i.classList.add("loader"),e.scrollId="PtFixeOffer";var n={fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand),offer:{act:e.basket.fixe.offer.acteDeGestion,gammeId:t.code,ptaId:t.plans[0].ptaId,universe:e.basket.fixe.offer.asket.fixe.offer.withPortability}}};e.basket.fixe.mainDevice&&(n.fixe.mainDevice={id:e.basket.fixe.mainDevice.id,quantity:e.basket.fixe.mainDevice.quantity,paymentMode:e.basket.fixe.mainDevice.paymentMode}),e.pushConfig.keepPushGen8Offer=!0,v.setStoredPushConfig(e.brand,e.pushConfig),Fr.put(n)}}(n,a)},e.content.append(t)}}}}};function Io(t,i,n,o,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s="FIXE"===r?"totalPrice":"priceFuturPerMonthWithDicounts",c=v.sortByPrice(v.sortByLabel(t.filter((function(e){return e.label}))),s);if(c&&c.length){if(n){var l=document.createElement("h2");l.innerHTML=n,e.content.append(l)}if(o){var u=document.createElement("p");u.innerHTML=o,u.classList.add("subtilte-asso"),e.content.append(u)}c.forEach((function(t,n){if(t.label){var o,s=i.cloneNode(!0),l=s.querySelector(".w");if(l)if(0===n&&s.classList.add("first"),n===c.length-1&&s.classList.add("last"),l.querySelector(".L p").innerHTML=t.label,a&&void 0!==t.totalPrice&&"FIXE_DEMENAGEMENT"!==(null===(o=e.basket.fixe)||void 0===o?void 0:o.signupType)){var u,d="FIXE"===r?t.totalPrice:null!==(u=t.priceFuturPerMonthWithDicounts)&&void 0!==u?u:0;l.querySelector(".R .p-block").innerHTML=Be.formatPrice(d,!0,"inclus")}else l.que";e.content.append(s)}}))}}const qo=function(){var t=e.basket.fixe&&e.basket.fixe.retained&&e.basket.fixe.retained.options?e.basket.fixe.retained.options.filter((function(e){return!o.includes(e.id)})):[],i=e.basket.mobile&&e.basket.mobile.retained&&e.basket.mobile.retained.options?e.basket.mobile.retained.options.filter((function(e){return!o.includes(e.id)})):[],n=t&&t.length?t:i,r=e.basket.fixe&&e.basket.fixe.unsubscribed&&e.basket.fixe.unsubscribed.options?e.basket.fixe.unsubscribed.options.filter((function(e){return!o.includes(e.id)})):[],a=r&&r.length?r:t,s=Fe(".lame-option.saved");if(s){var c,l,u,d=e.basket.fixe?"FIXE":"MOBILE";n&&n.length&&Io(n,s,"Mes options conservées","Pour supprimer vos options, rendez vous dans votre espace client",d),!a||!a.length||null!==(c=e.basket.fixe)&&void 0!==c&&null!==(l=c.offer)&&void 0!==l&&null!==(u=l.gammeId)&&void 0!==u&&u.includes("DMGT")||Io(,null,d,!1)}};var Ro=["disneyplus-bouquet-famille","disneyplus-sfr-cinema","disneyplus-rmc-sport"];function Co(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElement("section");o.classList.add("lame-option","first","last"),t.animCo&&o.classList.add("promo"),o.innerHTML=Oo(t,i);var r=o.querySelector(".suppr");r&&(r.onclick=function(){rt.removeOption(r,i.id,se(t))});var a=o.querySelector("input");if(a&&(a.checked=e.consentedOptions&&e.consentedOptions.includes(i.id),a.onchange=function(){return wo(o,a,t)},a.checked&&(o.querySelector(".toast.r").style.display="none")),!t.animCo&&o.querySelector(".sticker")&&o.querySelector(".sticker").remove(),!t.discountLabel&&o.querySelector(".p-block .promo")&&o.querySelector(".p-block .promo").remove(),"RECURRENT"!==i.frequency&&o.querySelector(".per-m")&&o.querySelector(".per-m").classList.remove("per-m"),n){var s=e.options.find((function(e){return Ye.match(e,i.id,"FIXE")})),c=e.options.find((function(e){return Ye.match(e,i.id,"MOBILE")})),l=document.createElement("div");if(l.classList.add("modes"),l.innerHTML='<p>Pour profiter de cette option, choisissez un mode de souscription : </p>\n                            <a class="link" href="'.concat(e.env.redirectionRootPaths[e.brand],"/espace-client/options/option/meta/").concat(i.id,'">Aller dans mon espace client<i></i></a>'),rt.getPriceInfo(i),s){var u=document.createElement("a");u.classList.add("link"),u.innerHTML="Profiter de cette option avec une offre box SFR <i></i>",u.href="".concat(e.env.redirectionRootPaths[e.brand],"/offre-internet"),l.append(u)}if(c){var d=document.createElement("a");d.classList.add("link"),d.innerHTML="Profiter de cette option avec une offre mobile SFR <i></i>",d.href="".concat(e.env.redirectionRootPaths[e.bran                ').concat(function(e){return e.needsConsent?'\n            <p class="subtitle">Les conditions CANAL+</p>\n            <p class="desc">\n              '.concat("En choisissant Canal +, j'accepte que SFR transmette au Groupe Canal + mes coordonnées postales et bancaires pour une confirmation de mon éligibilité par le Groupe Canal +. Après validation de ma commande, SFR transmettra l'identifiant de mon décodeur TV SFR à Groupe Canal + afin que je puisse bénéficier du service sur ma TV.","\n            </p>\n            "):""}(e),'\n            </div>\n            <div class="R">\n                <div>\n                    <div><a href="').concat(Ye.detailsUrl(e),'" class="title">').concat(e.name?e.name:"","</a></div>\n                    ").concat(function(e){return _o(e)?'<p class="sub">'.concat(_o(e),"</p>"):""}(t),'\n                </div>\n                <section class="p-block">\n                     <span class="promo">').concat(e.discountLabent">').concat(rt.engagement(t,o),"</p>\n                 </section>\n            </div>\n            ").concat(function(e){return e.needsConsent?'\n            <input type="checkbox" name="consent" id="'.concat(e.code,'" class="toggle">\n            <div class="tg">\n                <label for="').concat(e.codediv><p class="subtitle">Accepter les conditions de CANAL+</p></div>\n            </div>\n            <p class="toast r">Veuillez accepter les conditions Canal+ pour passer à l’étape suivante</p>\n        '):""}(e),'\n        </div>\n        <div class="a-block"><a class="suppr">Supprimer</a></div>\n        ')}function wo(t,i,n){i.checked?e.consentedOptions?e.consentedOptions.push(n.code):e.consentedOptions=[n.code]:e.consentedOptions&&e.consentedOptions.includes(n.code)&&(e.consentedOptions=e.consentedOptions.filter((function(e){return e!==n.code}))),Fo(t,n)}function Fo(t,i){var n=oe().map((function(t){return e.options.find((function(e){return Ye.match(e,t.id)}))})).filter((function(e){return!!e})),o=n?n.filter((function(e){return e.needsConsent})):[];if(o&&o.length){if(!e.consentedOptions||!e.consentedOptions.length)return void No(t,i,o);var r=!0;o.forEach((function(i){if(!e.consentedOptions.includes(i.code))return No(t),void(r=!1)})),r&&function(t){e.receipt&&(e.receipt.querySelectorAll(".btn").forEach((function(e){e.classList.remove("disabled")})),t&&(t.querySelector(".toast.r").style.display="none")),e.smallReceipt&&e.smallReceipt.querySelector(".btn").classList.remove("disabled")}(t)}!ae(e.basket)||e.basket.mobile||e.basket.fixe||No(t)}function No(t,i,n){e.receipt&&(e.receipt.querySelectorAll(".btn").forEach((function(e){e.classList.add("h")})),(i&&i.code.includes("canalplus")||n&&n.find((function(e){return e.code.includes("canalplus")}))&&t)&&(t.querySelector(".toast.r").style.display="block")),e.smallReceipt&&e.smallReceipt.querySelector(".btn")&&e.smallReceipt.querySelector(".btn").classList.add("disabled")}function _o(t){var i="";if(e.basket.fixe){var n=function(e){if(t&&t.code===e.id){var n=Ne[e.logisticAction];i=n&&n.title?n.title.split("(s)").join(" "):"","A_RECEPTIONNER_LIVRAISON_ECOM"===e.logisticAction&&v.setStepper(1),"A_RECEPTIONNER_RDV"===e.logisticAction&&v.setStepper(2)}};e.basket.fixe.retained&&e.basket.fixe.retained.equipments&&e.basket.fixe.retained.equipments.length&&e.basket.fixe.retained.equipments.forEach((function(e){return n(e)})),e.basket.fixe.subscribed&&e.basket.fixe.subscribed.equipments&&e.basket.fixe.subscribed.equipments.length&&e.basket.fixe.subscribed.equipments.forEach((function(e){return n(e)})),e.basket.fixe.unsubscribed&&e.basket.fixe.unsubscribed.equipments&&e.basket.fixe.unsubscribed.equipments.length&&e.basket.fixe.unsubscribed.equipments.forEach((function(e){return n(e)}))}return i}const Bo={render:function(){?e.basket.mobile.options.filter((function(e){return!o.includes(e.id)})):[],i=e.basket.fixe&&e.basket.fixe.options?e.basket.fixe.options.filter((function(e){return!o.includes(e.id)})):[],n=e.basket.temporary&&e.basket.temporary.options?e.basket.temporary.options:[],r=t.concat(i).concat(n);if(r&&r.length&&e.options){var a=[];if(i&&i.length.find((function(e){return Ye.match(e,t.id,"FIXE")}));i&&a.push(Co(i,t))})),t&&t.length&&t.forEach((function(t){var i=e.options.find((function(e){return Ye.match(e,t.id,"MOBILE")}));i&&a.push(Co(i,t))})),n&&n.length&&n.forEach((function(t){var i=e.options.find((function(e){return Ye.match(e,t.id)}));i&&(t.frequency=i.frequency,a.push(Co(i,t,!0)))})),a.length>0){var s=document.createElement("h2");s.classList.add("lame-option"),s.setAttribute("id","PtOption"),s.innerHTML="Mes options",e.content.append(s),a.forEach((function(t){return e.content.append(t)}))}}},disableNextIfNeed:Fo},Ho=function(){if(e.basket.fixe&&e.basket.fixe.offer&&e.basket.fixe.mainDevice&&e.basket.fixe.mainDevice.id){var t=we("ModePaiment");if(t)if("TABLETTE"===e.basket.fixe.mainDevice.type)t.remove();else{t.querySelector(".title")&&(t.querySelector(".title").innerHTML="Mode de paiement de l'équipement");var i=F(e.basket.fixe.acteDeGestion,e.basket.fixe.offer.gammeId);if(i&&i.plans[0]&&i.plans[0].devicePrices){var n=i.plans[0].devicePrices,o=n?n.filter((function(t){return t.sapCode==e.basket.fixe.mainDevice.id}))[0]:null;if(o&&o.paymentOption){var r=1,a=o.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0];a&&r++;var s=o.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0];s&&r++;var c=o.paymentOption.filter((function(e){return"LOAN_24X_PAYANT"==e.billingMode}))[0];c&&r++;var l=o.paymentOption.filter((function(e){return"LOAN_24X_SANS_FRAIS"==e.billingMode}))[0];l&&r++;var u=o.discounts?o.discounts.filter((function(e){return"ODR"!=e.discountType&&(!e.duration||0==e.duration)&&e.discountValue>0}))[0]:null,d=o.discounts?o.discounts.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0}))[0]:null;if(r>1){var f=t.querySelector(".R");f&&(f.querySelector(".loader"),f.innerHTML="",To.addPaymentComptantAnd4x(f,o,a,u,d,"fixePaymentComptantOr4x","paymentTv",e.basket.fixe.mainDevice.paymentMode,"fixePaymentMode"),To.addPaymentLoanFDPSFR(f,s,d,"paymentloanFDPSFR","paymentTv",e.basket.fixe.mainDevice.paymentMode,"fixePaymentMode"),To.addPaymentCreditLong(f,"LOAN_24X_PAYANT",c,d,"fixePaymentCreditLong","paymentTv",e.basket.fixe.mainDevice.paymentMode,"fixePaymentMode"),To.addPaymentCreditLong(f,"LOAN_24X_SANS_FRAIS",l,d,"fixePaymentCreditLong","paymentTv",e.basket.fixe.mainDevice.paymentMode,"fixePaymentMode"),f.querySelectorAll("input").length>1&&e.content.append(t))}}}}}};function Wo(e){var t=document.createElement("input");return t.setAttribute("id",e),t.setAttribute("type","radio"),t.setAttribute("name","paymentTv"),t}function Go(e){var t=document.createElement("label");return t.classList.add("elem"),t.setAttribute("for",e),t}function Uo(e,t){var i=document.createElement(e);return t&&i.classList.add(t),i}function Xo(t,i){e.actionInProgress||(i.classList.add("loader"),Fr.put({mobile:{mainDevice:{id:e.basket.mobile.mainDevice.id,quantity:1,paymentMode:t},offer:{act:e.basket.mobile.offer.acteDeGestion,gammeId:e.basket.mobile.offer.gammeId,ptaId:e.basket.mobile.offer.ptaId,universe:e.basket.mobile.offer.universe,withPortability:e.basket.mobile.offer.withPortability}}}))}const Vo=function(){if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id&&"HM1"===e.basket.mobile.offer.ptaId){var t=we("ModePaiment");if(t){t.querySelector(".title")&&(t.querySelector(".title").innerHTML="Mode de paiement du pack alerte vidéo");var i,n,o=Xt();if(o&&null!=o&&o.plans[0]&&null!=o&&null!==(i=o.plans)&&void 0!==i&&null!==(n=i[0])&&void 0!==n&&n.devicePrices){var r=o.plans[0].devicePrices,a=r?r.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null;if(a&&a.paymentOption){var s=1;a.paymentOption.filter((function(e){return"CB4X"==e.billingMode}))[0]&&s++;var c=a.paymentOption.filter((function(e){return"LOAN_FDPSFR"==e.billingMode}))[0];c&&s++;var l=a.discounts?a.discounts.filter((function(e){return"ODR"!=e.discountType&&(!e.duration||0==e.duration)&&e.discountValue>0}))[0]:null,u=a.discounts?a.discounts.filter((function(e){return"ODR"==e.discountType&&e.discountValue>0}))[0]:null;if(s>1){var d=t.querySelector(".R");d&&(d.querySelector(".loader"),d.innerHTML="",function(t,i,n,o){var r=Wo("fixePaymentComptant");r.checked="COMPTANT"==e.basket.mobile.mainDevice.paymentMode||"CB4X"==e.basket.mobile.mainDevice.paymentMode,r.onchange=function(){return Xo("COMPTANT",t)};var a=Go("fixePaymentComptant"),s=Uo("span","nfois");s&&(s.innerHTML="En 1 fo),l=i.devicePriceWithDiscounts?i.devicePriceWithDiscounts:i.devicePrice;c.innerHTML='<p class="b"> '.concat(Be.toEuros(l),"</p>"),n&&(c.innerHTML+="<p>au lieu de ".concat(Be.toEuros(n.priceBefore),"</p>")),o&&(c.innerHTML+="<p>Soit ".concat(Be.toEuros(o.priceBefore)," puis ").concat(Be.toEuros(o.discountValue)," remboursés après achat</p>")),a.append(c),t.append(r),t.append(a)}(d,a,l,u),function(t,i,n){if(i){var o=Wo("fixePaymentloanFDPSFR");o.checked="LOAN_FDPSFR"==e.basket.mobile.mainDevice.paymentMode,o.onchange=function(){return Xo("LOAN_FDPSFR",t)};var r=Go("fixePaymentloanFDPSFR"),a=Uo("div",""),s=Uo("span","nfois");s.innerHTML="Facilité ".concat(i.nbPayment," fois");var c=Uo("p","");c.innerHTML="sans frais",a.append(s),a.append(c);var l=Uo("div","right");l.innerHTML='<p class="b"> '.concat(Be.toEuros(i.upfrontWithPayback),"</p>"),l.innerHTML+="<p><b>puis ".concat(Be.toEuros(i.monthlyFeeWithinMobilePlan)," x24 mois</b></p>"),n&&(l.innerHTML+="<p>Soit ".concat(Be.toEuros(i.upfrontWithoutPayback)," puis ").concat(Be.toEuros(n.discountValue)," remboursés après achat</p>")),r.append(a),r.append(l),t.append(o),t.append(r)}}(d,c,u),d.querySelectorAll("input").length>1&&e.content.append(t))}}}}}},jo=function(){if(e.firstAdd&&!e.isAuthenticate){var t=we("PopinAddedBasket");if(e.putAdded=!1,t){var i=t.querySelector(".close-btn")?t.querySelector(".close-btn"):t.querySelector(".elem_popin .btn");i&&(i.onclick=function(){return Vn.close()});var n=t.querySelector(".btn-connect")?t.querySelector(".btn-connect"):t.querySelectorAll(".elem_popin .btn")[1];n&&(n.href="".concat(e.env.redirectionRootPaths[e.brand],"/mon-espace-client")),Vn.open(t)}}};var zo=["internet-garanti","sfr-box8-fibre","sfr-box8-tv","connect-tv-sfr"];const Qo=function(){var t=e.basket.fixe&&e.basket.fixe.offer&&e.basket.fixe.offer.gammeId&&e.basket.fixe.upSellToPush?e.basket.fixe.upSellToPush:[],i=(t=t.filter((function(e){return!zo.includes(e.id)}))).length&&e.options?t.map((function(t){return Ye.getOption(t.id,te(e.basket)?"MOBILE":"FIXE")})).filter((function(e){return!!e})):[];if(i.length){var n=Fe(".addons_bloc");if(n){var o=e.basket.fixe&&e.basket.fixe.switchableOptions?e.basket.fixe.switchableOptions:[],r=n.querySelector(".tilte-asso");r&&(r.innerHTML="Des options intéressantes avec ma box");var a=n.querySelector(".subtilte-asso");a&&(a.innerHTML="Découvrez nos options pour compléter votre offre internet"),rt.generateOptionsquerySelector(".vp"),l=n.querySelector(".open");l&&(l.checked=!!e.openToggleFixe),s&&(s.onclick=function(){return rt.voirPlus(n,i,o,"FIXE")}),c&&(c.onclick=function(){return rt.voirMoins(n,i,"FIXE")});var u=n.querySelector(".seeAll");u&&(u.style.display="none"),e.content.append(n),e.openToggleFixe&&rt.voirPlus(n,i,o,"FIXE")}}},Yo=function(){var t=e.basket&&e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&e.basket.mobile.upSellToPush?e.basket.mobile.upSellToPush:[],i=t.length&&e.options?t.map((function(e){return Ye.getOption(e.id,"MOBILE")})).filter((function(e){return!!e})):[],n=e.basket.mobile&&e.basket.mobile.switchableOptions?e.basket.mobile.switchableOptions:[];if(e.basket.mobile&&e.basket.mobile.offer&&e.optir){r.setAttribu.tilte-asso");a&&(a.innerHTML="Des options intéressantes avec mon forfait mobile");var s=r.querySelector(".subtilte-asso");s&&(s.innerHTML="Découvrez des options pour compléter votre offre mobile"),rt.generateOptions(r,i,"MOBILE",4);var c=r.querySelector(".vm"),l=r.querySelector(".vp"),u=r.querySelector(".open");if(u){u.setAttribute("id","mobile");var d=r.querySelector("label");d&&d.setAttribute("for","mobile"),u.checked=!!e.openToggleMobile}c&&(c.onclick=function(){return rt.voirPlus(r,i,o,"MOBILE")}),l&&(l.onclick=function(){return rt.voirMoins(r,i,"MOBILE")});var f=r.querySelector(".seeAll");f&&(f.style.display="none"),e.content.append(r),e.openToggleMobile&&rt.voirPlus(r,i,o,"MOBILE")}}elsvar n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ko(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $o(t,i,n,o,r){var a=i.cloneNode(!0);if(o&&o.devices){var s=r?o.devices?o.devices.find((function(e){return e.sapCode===r})):void 0:o.devices?o.devices.find((function(e){var t,i;return(null===(t=e.delivery)||void 0===t?void 0:t.stock)||(null===(i=e.delivery)||void 0===i?void 0:i.preOrder)})):void 0;if(s){var c,l,u,d=a.querySelector(".sticker"),f=a.querySelector(".mobile_card"),p=a.querySelector(".bl_phone"),m=a.querySelector(".selectors"),b=a.querySelector(".add-basket-btn"),v="MIG"===e.basket.mobile.acteDeGestion?"RM":e.basket.mobile.acteDeGestion,y=null!==(c=null===(l=e.basket.mobile)||void 0===l||null===(u=l.offer)||void 0===u?void 0:u.universe)&&void 0!==c?c:"MOB",g=H(o.groupId,s.sapCode,v,y);d&&(s.promotionalSticker&&s.promotionalSticker.label?(d.innerHTML=s.promotionalSticker.label,d.style.display="inline-block"):d.style.display="none");var k=h(L(s,o));f&&function(e,t,i){var n=e.querySelector(".bl_title");n&&(n.innerHTML="".concat(t.brandLabel,'<a href="').concat(i,'">').concat(t.label,"</a>"))}(f,o,k),p&&(function(e,t,i){"5G"!==t.properties.supportedStandards&&e.classList.remove("compatibility-5g"),"RECONDITIONNE"!==t.properties.state&&e.classList.remove("rec");var n=e.querySelector(".bl_img");n&&i.pictures&&i.pictures[0].medium&&(n.src=i.pictures[0].medium,n.alt=t.label)}(p,o,s),function(t,i,n,o,r,a){var s,c,l=!a,u=t.querySelector(".infos"),d=null==u?void 0:u.querySelector(".md-content"),f=u.querySelector("bol-price"),p=a?a.paymentOption[0]:n.paymentOptions?n.paymentOptions[0]:null,m="CB4X"===(null==p?void 0:p.billingMode),b="LOAN_FDPSFR"===(null==p?void 0:p.billingMode),v=null!==(s=null==a?void 0:a.devicePriceWithDiscounts)&&void 0!==s?s:n.devicePriceWithDiscounts,y=m?v:null!==(c=null==p?void 0:p.upfrontWithPayback)&&void 0!==c?c:null==p?void 0:p.firstMonthPriceWithDiscount;f&&(f.innerHTML=Be.formatPrice(y,!1));var h=null==u?void 0:u.querySelector(".forfait");h&&(h.innerHTML="+ Forfait ".concat(e.basket.mobile.offer.label)),i&&(i.onclick=function(e){e.preventDefault();var t=null!=p&&p.billingMode?p.billingMode:"COMPTANT";fi(i,t,n.sapCode,"ECO")});var g=0;if(a&&p){var k,S,P=u.querySelector(".mensualites");v>p.monthlyFeeWithDiscount&&P&&p.nbPayment?P.innerHTML=m?"ou ".concat(Be.toEuros(null!==(k=p.monthlyFeeWithDiscount)&&void 0!==k?k:0)," ×4"):"+ ".concat(Be.toEuros(null!==(S=p.monthlyFeeWithDiscount)&&void 0!==S?S:0),"/mois ×").concat(p.nbPayment):P.remove();var E=u.querySelector("input"),T=u.querySelector(".md-label"),M=u.querySelector(".md-content");if(E&&T&&M){var D,L;E.id=n.sapCode,T.htmlFor=n.sapCode;var x=0;a.discounts&&a.discounts.forEach((function(e){"ODR"===e.discountType&&(g=e.discountValue,x||(x=e.priceBefore))}));var A=a?null!==(D=p.upfrontWithoutPayback)&&void 0!==D?D:x:n.devicePrice,I=M.querySelectorAll("p")[0];I.querySelector("b:first-child").innerHTML="Prix initial du ".concat(null==o?void 0:o.label," :"),I.querySelector("b:last-child").innerHTML="".concat(Be.toEuros(n.devicePrice)),M.querySelectorAll("p")[1].style.display="none";var q=M.querySelector(".oneshot-price");if(q&&(q.innerHTML="<span>À payer aujourd’hui :</span> <span>".concat(function(e,t,i){if(e)return i?"<strong>".concat(Be.toEuros(t)," <br /> </strong>\n                <strong>ou ").concat(Be.toEuros(e.firstMonthPriceWithDiscount)," <br /> </strong>\n                puis ").concat(Be.toEuros(e.monthlyFeeWithDiscount)," x 3 mois<br />"):"<strong> ".concat(Be.toEuros(t)," <br /> </strong>\n              puis ").concat(Be.toEuros(null==e?void 0:e.monthlyFeeWithDiscount)," x ").concat(null==e?void 0:e.nbPayment," mois<br />")}(p,A,m),"</span>")),g){var R=M.querySelector(".remboursement");R&&(R.innerHTML="<span>Remboursement sur demande après<br>achat :</span><span><strong>-".concat(Be.toEuros(g),"</strong></span>"));var C=M.querySelector(".t");C&&(C.innerHTML="<span><strong>Prix après remboursement : </strong></span><span><strong>".concat(Be.toEuros(y),"</strong></span>"))}else{var O,w;null===(O=M.querySelector(".remboursement"))||void 0===O||O.remove(),null=d 0===w||w.remove()}var F=null!==(L=a.buyBackContribution)&&void 0!==L?L:0,N=M.querySelector(".reprise");N.classList.remove("l");var _=N?N.querySelector(".bonus"):null;N&&(F&&_?(_.innerHTML="-".concat(Be.toEuros(F)),_.classList.remove("bonus")):N.remove());var B=M.querySelector("#Strc"),H=B.querySelector("p:first-child");(m||b)&&B&&H&&(H.style.display="none")}}else{var W;u.querySelector(".mensualites").style.display="none",null!==(W=n.discounts)&&void 0!==W&&W.length&&n.discounts.filter((function(e){return"ODR"===e.discountType})).forEach((function(e){g+=e.discountValue}))}var G=null==d?void 0:d.querySelector(".mentions"),U=function(t,i){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return{forfaitPrice:"Forfait à 0€/mois",duration:"",priceAfterDiscount:"",commitmentLabel:"Sans engagement"};varfunction(e){return"MULTIPACK"===e.discountType})):void 0,o=n?n.discountValue:0,r=e.basket.mobile.offer.discounts?e.basket.mobile.offer.discounts.find((function(e){return"MULTIPACK"===e.discountType})):void 0;o+=r?r.discountValue:0,t&&e.basket.fixe&&e.basket.fixe.offer&&(t.pricePerMonthWithDiscounts-=o,t.pricePerMonth-=o);var a=t?t.pricePerMonthWithDiscounts:null,s=t?t.pricePerMonth:null,c=a?"Forfait à ".concat(Be.toEuros(a),"/mois"):"",l="",u=!1;if(t.discounts){var d=t&&t.discounts?t.discounts.map((function(e){return e.duration})).filter((function(e){return void 0!==e&&e>0}))[0]:0;l="pendant ".concat((u=d&&d>0)?d:t.commitmentDuration," mois")}return{forfaitPrice:c,duration:l,priceAfterDiscount:u?"puis ".concat(Be.toEuros(s),"/mois"):"",commitmentLabel:t&&t.commitmentDuration?0===t.commitmentDuration?"Sans engagement":"Engagement ".concat(t.commitmentDuration," mois"):""}}(r,a,l),X=U.forfaitPrice,V=U.duration,j=U.priceAfterDiscount,z=U.commitmentLabel;G&&e.basket.mobile.offer.label&&(G.innerHTML="<span><strong>Forfait ".concat(e.basket.mobile.offer.label.replace(" 4G+","").replace(" 5G","")," :</strong></span>\n                                        <span><strong>").concat(X,"</strong><br>").concat(V," ").concat(j," <br>").concat(z,"</span>"));var Q=u.querySelector(".price-alone");Q&&(n.devicePriceWithDiscounts?Q.innerHTML="Prix seul : <strong>".concat(Be.toEuros(null==n?void 0"</strong> <span>").concat(n.devicePriceWithDiscounts!==n.devicePrice?Be.toEuros(n.devicePrice):"","</span>"):Q.remove());var Y=u.querySelector(".das .more-info");Y&&(Y.innerHTML="DAS Tête : ".concat(o.properties.das," W/kg<br />DAS Tronc :\n        ").concat(o.properties.bodyDas," W/kg<br />DAS Membre : ").concat(o.properties.limbDas," W/kg"));var J=u.querySelector(".stars");if(J){var K=J.querySelector(".rate_bloc");if(K&&o.reviewsSummary&&o.reviewsSummary.reviewsCount>0&&o.reviewsSummary.averageRate){var $=function(e){var t=[1,2,3,4,5];t=t.map((function(t){return e>=t?1:0}));var i=Matry.averageRate);K.querySelectorAll("img").forEach((function(e,t){switch($[t]){case 0:e.src="//static.s-sfr.fr/media/star-grey.svg";break;case.5:e.src="//static.s-sfr.fr/media/star-demi.svg";break;case 1:e.src="//static.s-sfr.fr/media/star-yellow.svg"}}))}}var Z=u.querySelector(".count-rate");Z&&o.reviewsSummary.reviewsCount&&(Z.querySelector("span").innerHTML=o.reviewsSummary.reviewsCount)}(p,b,s,o,n,g)),m&&function(e,t,i,n,o,r){t.properties&&"RECONDITIONNE"!==t.properties.state&&e.classList.remove("reconditionne"),e.onclick=function(e){e.stopPropagation(),e.preventDefault()},function(e,t,i,n,o,r){var a=e.querySelector(".color");if(a){a.querySelector(".filtre").innerHTML='<span style="background-color: '.concat(i.properties.color.rgb,'"></span>');var s=a.querySelector("div ul");if(s){s.innerHTML="";var c=function(){return a.classList.contains("active")?a.classList.remove("active"):a.classList.add("active")};a.onclick=function(){return c()},t.devices.filter((function(e){return e.properties.memoryCapacity==i.properties.memoryCapacity})).filter((function(e){return"RECONDITIONNE"!=t.properties.state||e.grade==i.grade})).forEach((function(e){var a,l=document.createElement("li");null!==(a=e.delivery)&&void 0!==a&&a.stock||l.classList.add("disabled"),e.sapCode==i.sapCode?(l.innerHTML='<span style="box-shadow: #ffffff 0px 0px 0px 3px inset, '.concat(e.properties.color.rgb," 0px 0px 0px 1px;background-color: ").concat(e.properties.color.rgb,'"></span>'),l.dataset.id=e.sapCode,l.onclick=function(){return c()}):(l.innerHTML='<span style="background-color: '.concat(e.properties.color.rgb,'"></span>'),l.onclick=function(){var i;null!==(i=e.delivery)&&void 0!==i&&i.stock&&(c(),$o(n,o,r,t,e.sapCode))}),s.append(l)}))}}}(e,t,i,n,o,r),function(e,t,i,n,o,r){var a=e.querySelector(".selector:nth-of-type(2) select");a&&(ui(a,t,i),a.onchange=function(e){$o(n,o,r,t,e.target.value)})}(e,t,i,n,o,r),function(e,t,i,n,o,r){var a=e.querySenction(e){$o(n,o,r,t,e.target.value)})}(e,t,i,n,o,r)}(m,o,s,t,a,n),t.contains(i)?t.replaceChild(a,i):t.append(a)}}}const Zo=function(){if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.devicesToPush&&e.basket.mobile.devicesToPush.length>0){var t=Fe("#all_mobile_list");if(t){var i=e.basket.mobile.devicesToPush.map((function(e){return Yt.getMobileDeviceGroupBySeoName(e.id)})),n="MIG"===e.basket.mobile.acteDeGestion?"RM":e.basket.mobile.acteDeGestion,o=N(n,e.basket.mobile.offer.gammeId),r=o&&o.plans.filter((function(t){return t.universe===e.basket.mobile.offer.universe}))[0];if(r||(r=o&&o.plans.filter((function(e){return"MOB"===e.universe}))[0]),r&&null!=i&&i.length||e.basket.mobile.offer.gammeId.startsWith("SSG_LCA_SSMOB")){var a=v.createTitle("h2","tilte-asso","Un large choix de téléphones");a&&(a.setAttribute("id","TitleBlocTels"),e.content.append(a)),e.content.append(v.createTitle("p","subtilte-asso","Ajoutez un téléphone pour aller avec le forfait choisi")),i&&i.length&&function(e,t,i){var n=e.querySelector("li");if(n){var o=n.cloneNode(!0),r=e;r.innerHTML="",t.forEach((function(e){$o(r,o,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(i),!0).forEach((function(t){Ko(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Jo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},i),e)}))}}(t,i,r),e.content.append(t);var s=document.createElement("a");s.innerHTML="Voir tous les téléphones<i></i>",s.classList.add("link","seeAll"),s.href="".concat(e.env.redirectionRootPaths[e.brand],"/offre-mobile/telephone-portable"),"SFR"===e.brand&&window.newSFRNavigateTo&&(s.onclick=function(e){window.newSFRNavigateTo("/offre-mobile/telephone-portable"),e.preventDefault()}),e.content.append(s)}}}};function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e.querySelector(".list li");if(o){var r=o.cloneNode(!0),a=e.querySelector(".list");a.innerHTML="";for(var s=0,c=n;c<(null==t?void 0:t.length);c++){var l,u,d=null===(l=t[c])||void 0===l?void 0:l.accessories,f=null===(u=t[c])||void 0===u?void 0:u.label,p=d?d.filter((function(e){return!!e&&0!==e.stock&&(e.price||e.discountedPrice)})):null;if(p&&p.length){if(nr(a,p,r,f),i&&s===i-1)break;s++}}}}function ir(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",n=t.querySelector(".seeAll");if(n){var o,r,a,s,c,l,u;n.style.display=i;var d=null!==(o=e.basket.mobile)&&void 0!==o&&null!==(r=o.mainDevice)&&void 0!==r&&r.id?null===(a=e.basket.mobile)||void 0===a||null===(s=a.mainDevice)||void 0===s?void 0:s.id:null===(c=e.basket)||void 0===c||null===(l=c.temporaryup(d);if(f&&f.brandLabel&&f.label){var p=f.brandLabel.toLowerCase(),m=f.label.split(" ").join("%20"),b="compatibility=".concat(p,"%3B").concat(m,"%7C");n.href="".concat(e.env.redirectionRootPaths[e.brand],"/accessoires/accessoires-mobiles?bht&").concat(b)}}}function nr(t,i,n,o,r){var a,s=n.cloneNode(!0);if(i){var c=i.sort((function(e,t){var i,n;return(null==e|| 0===i?void 0:i.priceWithDiscount)-(null==t||null===(n=t.price)||void 0===n?void 0:n.priceWithDiscount)})).filter((function(e,t,i){return i.findIndex((function(t){return t.colorBox===e.colorBox}))===t})),l=r?i?i.find((function(e){return e.sapCode===r})):void 0:c?null==c?void 0:c[0]:void 0;if(l){var u,d,f=l.price.priceWithDiscount?l.price.priceWithDiscount:l.price.price,p=s.querySelector(".sticker");p&&(l.animCo?p.innerHTML=l.animCo:p.remove()),function(e,t,i,n,o){var r=e.querySelector(".colors");if(r){if(r.style.zIndex="1",r.querySelectorAll("span").forEach((function(e){e.remove()})),null!=i&&i.colorBoxHex&&null!=i&&i.colorBox){var a=document.createElement("span");a.classList.add("a"),a.style.background="linear-gradient(320deg, ".concat(null==i?void 0:i.colorStrapHex," 50%, ").concat(null==i?void 0:i.colorBoxHex," 50%)"),a.innerHTML=null==i?void 0:i.colorBox,r.append(a)}t.forEach((function(e){if(e.sapCode!==i.sapCode){var t=document.createElement("span");t.style.background="linear-gradient(320deg, ".concat(null==e?void 0:e.colorStrapHex," 50%, ").concat(null==e?void 0:e.colorBoxHex," 50%)"),t.innerHTML=null==e?void 0:e.colorBox,r.append(t)}}))}}(s,c,l);var m=s.querySelectorAll("a");m&&m.length&&m.forEach((function(e){return e.setAttribute("href",h("/".concat(l.detailsUrl)))}));var b=s.querySelector("img"),v=null!=l&&null!==(u=l.pictures)&&void 0!==u&&null!==(d=u[0])&&void 0!==d&&d.smallUrl?l.pictures[0].smallUrl:"//static.s-sfr.fr/media/buds-pro-150.jpg";b&&(b.setAttribute("alt",l.model),b.setAttribute("src",v));var y=s.querySelector("bol-label-refund");y&&(ar(l)?y.innerHTML=ar(l):y.remove());var g,k,S=s.querySelector(".stars");S&&(null!=l&&l.review&&null!=l&&null!==(g=l.review)&&void 0!==g&&g.averageRate?l.review.reviewsCount?S.innerHTML='<bol-rate><span class="rating-wrapper"><mark style="width: '.concat(100*l.review.averageRate/5,'%;"></mark></span></bol-rate>\n                        <div class="count-rate"><a href="').concat(h("/".concat(null===(k=l.detailsUrl)||void 0===k?void 0:k.replace("/details","/avis"))),'">(<span>').concat(l.review.reviewsCount," avis</span>)</a></div>"):S.innerHTML='<bol-rate><span class="rating-wrapper"><mark style="width: '.concat(100*l.review.averageRate/5,'%;"></mark></span></bol-rate>'):S.remove());var P=s.querySelector(".BlackBloc .title");P&&(P.innerHTML=o);var E=s.querySelector(".BlackBloc .m");E&&(l.brand?E.innerHTML=l.brand.toUpperCase():E.remove());var T=s.querySelector(".BlackBloc .availability");T&&(T.classList.contains("wa")&&T.classList.remove("wa"),l.delivery.stock?(T.classList.add("g"),T.innerHTML="Disponible"):(T.classList.add("r"),T.innerHTML="Non disponible"));var M=s.querySelector("bol-price");if(M){var D,L,x=(null==l||null===(D=l.price)||void 0===D?void 0:D.priceWithDiscount)<(null==l||null===(L=l.price)||void 0===L?void 0:L.price)?l.price.price:void 0;M.innerHTML=Be.formatPrice(f,"RECURRENT"===l.frequency,"Offert",x)}var A=s.querySelector(".engagement");A&&(!function(e){if(e&&e.price.discounts&&e.price.discounts.length){var t=e.price.discounts.filter((function(e){return"ODR"!==e.discountType}));if(t&&t.length)return t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0)}return 0}(l)||or(l)?A.remove():A.innerHTML='<p class="totalPrice">au lieu de '.concat(Be.toEuros(l.price),"</p>"));var I,q,R=s.querySelector(".bl_prix .or"),C=(a=l)&&a.paymentOptions?a.paymentOptions.find((function(e){return"CB4X"===e.billingMode})):void 0;R&&(C&&"DEVICE"===(null===(I=e.basket)||void 0===I||null===(q=I.mobile)||void 0===q?void 0:q.signupType)?R.innerHTML="Ou ".concat(Be.toEuros(C.firstMonthPrice)," x").concat(C.nbPayment):R.remove());var O=s.querySelector(".bl_prix .i");"MONTRE_CONNECTEE"!==(null==l?void 0:l.accessoryCategory)&&O.remove();var w=s.querySelector(".bl_prix .md-label"),F=s.querySelector("#md_acc_adaptateur_usbc");if(w)if(or(l)&&f){F.id=l.sapCode,w.htmlFor=l.sapCode;var N=s.querySelector(".bl_prix .md-content");N&&(N.innerHTML="<p>\n                                                <span>À payer aujourd’hui :</span>\n                                                <span>\n                                                    <strong>\n                                                    ".concat(null==Be?void 0:Be.toEuros(f),"\n                                                        <br>\n                                                        ou ").concat(Be.toEuros(null==C?void 0:C.firstMonthPrice),"\n                                                        <br>\n                                                    </strong>\n                                                    puis ").concat(Be.toEuros(null==C?void 0:C.monthlyFeeWithDiscount)," x3\n                                                    ").concat(rr(l)?"<br> dont ".concat(Be.toEuros(rr(l))," de frais"):"","\n                                                </span>\n                                            </p>\n                                            "),or(l)&&(N.innerHTML+="<p>\n                                <span>Remboursement après achat sur<br>demande :</span><span><strong>-".concat(Be.toEuros(or(l)),'</strong></span>\n                                </p>\n                            <p class="t"><span><strong>Prix après remboursement : </strong></span><span><strong>').concat(Be.toEuros(l.price.priceWithDiscount),"</strong></span></p>")))}else w.remove(),F.remove();var _=s.querySelector(".bl_btn .btn");_.innerHTML=(null==i?void 0:i.length)>1?"Configurer le produit":"Ajouter au panier",_&&(_.onclick=function(t){(null==i?void 0:i.length)>1?window.location=h("/".concat(l.detailsUrl)):function(t,i){e.actionInProgress||(e.openToggleAccessory=!0,t.classList.add("loader"),Fr.put({mobile:{accessories:[{id:i,quantity:1}]}}))}(_,l.sapCode),t.preventDefault()}),t.contains(n)?t.replaceChild(s,n):t.append(s)}}}function or(e){var t=e.price.discounts?e.price.discounts.filter((function(e){return"ODR"===e.discountType})):[];return t&&t.length?t.map((function(e){return"VALUE"===e.computationType?e.discountValue:e.priceBefore-e.priceAfter})).reduce((function(e,t){return e+t}),0):0}function rr(e){if(e&&er(null==e?void 0:e.paymentOptions)){var t,i=null===(t=e.paymentOptions)||void 0===t?void 0:t[0];return(null==i?void 0:i.totalFeeWithDiscount)||0}return""}function ar(e){if(e&&e.price.discounts&&e.price.discounts.length){var t=e.price.discounts.fi&&t.discountLabel?t.discountLabel:""}}const sr=function(){var t,i,n,o,r,a,s,c,l=(e.basket.mobile||e.basket.temporary)&&null!==(t=e.basket)&&void 0!==t&&null!==(i=t.mobile)&&void 0!==i&&i.sfrrecoToPush?null===(n=e.basket)||void 0===n||null===(o=n.mobile)||void 0===o?void 0:o.sfrrecoToPush:null!==(r=e.basket)&&void 0!==r&&null!==(a=r.temporary)&&void 0!==a&&a.sfrrecoToPush?null===(s=e.basket)||void 0===s||null===(c=s.temporary)||void 0===c?void 0:c.sfrrecoToPush:[];if(l&&l.length&&e.accessoriesByGroup.length){var u=[];l.forEach((function(e){var t=vn.getAccessoryByGroup(e.id);t&&u.push(t)}));var d=Fe("#addons_bloc_accessories");if(u&&null!=u&&u.length&&d){tr(d,u,4);var f=d.querySelector(".vm"),p=d.querySelector(".vp"),m=d.querySelector("#dep1");m&&(m.checked=!!e.openToggleAccessory),(null==u?void 0:u.length)>4?(f&&(f.onclick=function(){return function(t,i){var n=document.querySelector("#Content .more-accessories .addons_bloc");if(n)n.style.display="block";else{var o=Fe("#addons_bloc_accessories");o.classList.add("more-accessories");var r=o.querySelector(".tilte-asso");r&&r.remove();var a=o.querySelector(".subtilte-asso");a&&a.remove();var s=o.querySelector(".open");s&&s.remove(),ir(o),tr(o,i,null,4),t.parentElement.insertBefore(o,t.nextSibling);var c=t.nextSibling.querySelectorAll(".vm");c&&(null==c||c[0].remove())}e.openToggleAccessory=!0}(d,u)}),p&&(p.onclick=function(){return function(t){var i=document.getElementById("Content");if(i){var n=i.querySelector(".more-accessories");n&&(n.style.display="none")}var o=t.querySelector(".seeAll");o&&(o.style.display="none"),e.openToggleAccessory=!1}(d)}),ir(d,"none")):(f&&f.remove(),p&&p.remove(),ir(d)),e.content.append(d)}}};function cr(t,i){var n=e.content.querySelector(":scope > section:last-child");if(n){var o=document.createElement("div");o.classList.add("a-block"),o.append(function(t){var i=document.createElement("a");return i.classList.add("modifier"),i.href="".concat(e.env.redirectionRootPaths[e.brand],"/").concat(t),i.onclick=function(n){i.classList.add("loader"),"SFR"===e.brand&&window.newSFRNavigateTo&&(window.newSFRNavigateTo(t),n.preventDefault(),i.classList.remove("loader"))},i.innerHTML="Modifier",i}(t)),o.append(function(t){var i=document.createElement("a");return i.classList.add("suppr"),i.innerHTML="Supprimer",i.addEventListener("click",(function(){!function(t,i){e.actionInProgress||(t.classList.add("loader"),Fr.remove(i))}(i,t)})),i}(i)),n.parentNode.append(o)}}const lr=function(){if(e.basket.fixe){var t={fixe:{}};e.basket.fixe.offer&&(t.fixe.offer={}),e.basket.fixe.mainDevice&&(t.fixe.mainDevice={}),e.basket.fixe.insurance&&(t.fixe.insurance={}),e.basket.fixe&&"SFR_BOXV1_BOX4G_200Go|BX1"===e.basket.fixe.offer.gammeId&&(t={fixe:{idEligibility:e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand)}}),e.basket.fixe&&e.basket.fixe.options&&e.basket.fixe.options.length&&e.basket.fixe.options.some((function(e){return"listerouge"===e.id}))&&(t.fixe.options=[{id:"listerouge"}]),cr("offre-internet",t)}},ur=function(t){if(e.basket.mobile){var i=li(),n={mobile:{}};"OFFER"===t&&e.basket.mobile.offer&&i&&(n.mobile.offer={},de(),cr("offre-mobile",n)),"DEVICE"===t&&e.basket.mobile.mainDevice&&i&&(n.mobile.mainDevice={},n.mobile.sim={},cr("offre-mobile",n)),"DEVICE"!==t||i||(e.basket.mobile.offer&&(n.mobile.offer={}),e.basket.mobile.mainDevice&&(n.mobile.mainDevice={}),e.basket.mobile.insurance&&(n.mobile.insurance={}),cr("offre-mobile",n))}},dr=function(){var t,i,n,o,r=["sfr-box8-tv","connect-tv-sfr","sfr-box8-fibre"];if("FIXE_MIG"===(null===(t=e.basket.fixe)||void 0===t||nDeGestion)&&(null!==(n=e.basket.fixe.upSellToPush)&&void 0!==n&&n.length||null!==(o=e.basket.fixe.options)&&void 0!==o&&o.length)){var a=e.basket.fixe.options&&e.basket.fixe.options.length?e.basket.fixe.options.filter((function(e){return r.includes(e.id)})):[],s=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length?e.basket.fixe.upSellToPush.filter((function(e){return r.includes(e.id)})):[],c=a.concat(s).map((function(e){return e.id}));if((c=r.filter((function(e){return c.includes(e)}))).length){var l=we("pushNetflixAndDisney"),u=c.map((function(e){return Ye.getOption(e,"FIXE")})).filter((function(e){return!!e}));l&&null!=u&&u.length&&u.forEach((function(t){return function(t,i){var n,o=t.cloneNode(!0);o.setAttribute("id","pushNetflixAndDisney"+i.code);var r=o.querySelector(".M .title");r&&(r.innerHTML=i.name);var a=o.querySelector(".M .desc");a&&(a.innerHTML=i.description);var s=o.querySelector(".L img");s&&s.setAttribute("src",rt.optionPicture(i));var c=o.querySelector(".M label");c&&c.setAttribute("for",i.code);var l=o.querySelector(".R .p-block"),u=null===(n=e.basket.fixe.options)||void 0===n?void 0:n.find((function(e){return e.id===i.code})),d=rt.getPriceInfo(i);l&&(u&&d.price?l.innerHTML=Be.formatPrice(d.price,!1,"Inclus"):l.remove());var f=o.querySelector("input");f&&c&&(f.setAttribute("name",i.code),f.checked=!!u,f.setAttribute("id",i.code),f.onclick=function(e){return t=c,n=i.code,void(u?rt.removeOption(t,n,"FIXE"):rt.addOption(t,n,"FIXE"));var t,n}),e.}}};var fr="internet-garanti";const pr=function(){if(e.basket.fixe&&e.basket.fixe.offer){var t=e.basket.fixe.options&&e.basket.fixe.options.length>0?e.basket.fixe.options.filter((function(e){return e.id==fr}))[0]:void 0,i=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length>0?e.basket.fixe.upSellToPush.filter((function(e){return e.id==fr}))[0]:void 0;(t||i)&&function(t,i,n){if(t){var o=t.querySelector("input"),r=t.querySelector(".M label");o&&r&&(i?(o.checked=!0,r.onclick=function(){return rt.removeOption(r,fr,n)}):(o.checked=!1,r.onclick=function(){return rt.addOption(r,fr,n)}));var a=t.querySelector(".p-block");if(a.innerHTML="",i){var s=rt.getPriceInfo(i);a.innerHTML="\n               ".concat(Be.formatPrice(s.price,!1,"Offert"),"\n               <p>").concat(i.discounts&&i.discounts.length?rt.subPrice(s):"","</p>\n               <p>").concat(rt.subSubPrice(s),"</p>\n               <p>+Frais d'activation 10€</p>")}e.content.append(t)}}(we("Garanti"),t,"FIXE")}};var mr=be();const br=function(){var t,i;if(mr=be(),e.basket.mobile&&null!==(t=e.basket.mobile.mainDevice)&&void 0!==t&&t.id&&(null!==(i=e.basket.mobile.buyBackRecord)&&void 0!==i&&i.id||e.buyBackRecord)){var n;e.activateReprise=!mr||ve(),e.buyBackRecord||(e.buyBackRecord=e.basket.mobile.buyBackRecord),mr||(window.sessionStorage.setItem("transactionId",null===(n=e.basket.mobile.buyBackRecord)||void 0===n?void 0:n.id),window.sessionStorage.setItem("repriseMobActivated","true"));var o=we("Reprise");o&&(function(t){var i,n=t.querySelector(".M .title"),o=t.querySelector(".M p.title"),r=t.querySelector(".M p.desc"),a=Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id),s=null==a?void 0:a.devices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0],c=null!==(i=e.basket.mobile.buyBackRecord)&&void 0!==i?i:e.buyBackRecord,l=0;if(n&&s){var u=c.brand+" "+c.modelLabel;n.innerHTML="Reprise mobile de votre<br>".concat(u)}if(e.basket.mobile.offer&&e.basket.mobile.offer.gammeId){var d,f=_(e.basket.mobile.offer),p=f?f.devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null;l=null!==(d=null==p?void 0:p.buyBackContribution)&&void 0!==d?d:0}o&&o.remove(),r&&(e.basket.mobile.offer?r.innerHTML="":r.innerHTML="Jusqu'à 200€ <strong>de bonus supplémentaire </strong>quelque soit le téléphone que vous revendez si vous êtes client SFR ou si vous choisissez un forfait");var m=t.querySelector(".M a.link");m&&(m.href=x("offre-mobile"),"SFR"===e.brand&&window.newSFRNavigateTo&&(m.onclick=function(e){window.newSFRNavigateTo("/offre-mobile"),e.preventDefault()}),e.basket.mobile.offer&&m.remove());var b=t.querySelector(".R .p-block");b&&null!=c&&c.totalPrice&&(b.innerHTML="<span>-".concat(Be.toEuros((null==c?void 0:c.totalPrice)+l),"</span>"));var v=t.querySelector("input"),y=t.querySelector(".M label");e.activateReprise?(v.checked=!0,y.onclick=function(){return t=y,void(e.actionInProgress||(t.classList.add("loader"),e.activateReprise=!1,window.sessionStorage.setItem("repriseMobActivated","false"),Fr.remove({mobile:{buyBackRecord:{}}})));var t}):(v.checked=!1,y.onclick=function(){!function(t){if(!e.actionInProgress){t.classList.add("loader"),e.activateReprise=!0,window.sessionStorage.setItem("repriseMobActivated","true");var i=ye();i&&(i.mobile.buyBackRecord={transactionId:mr},Fr.put(i))}}(y)})}(o),e.content.append(o))}};var vr=i(669);const yr=function(t,i){return vr.get("".concat(e.env.endpoints["service-buybackrecord"]),{params:{act:i,brand:"SFR",pnm:"true",universe:"GP",name:t}})};function hr(t,i){var n=document.createElement("div");n.setAttribute("id","push-reprise"),n.style.marginTop="20px",n.style.marginBottom="20px";var o=document.getElementById("addons_bloc_accessories");n&&o&&o.parentNode.insertBefore(n,o),n.append(v.createTitle("h2","tilte-asso","Profitez du Bonus reprise")),n.append(v.createTitle("p","subtilte-asso","Bénéficiez d'un Bonus reprise de ".concat(t," en revendant votre ").concat(i)));var r,a,s=document.createElement("div");s.setAttribute("id","push-reprise-child"),s.classList.add("push-reprise"),s.append(((a=document.createElement("img")).classList.add("img-reprise"),a.src="//static.s-sfr.fr/assets/pictos/echange_mobile_40_rouge.svg",a.loading="lazy",a),function(e){var t=document.createElement("div"),i=document.createElement("p");i.classList.add("t"),i.innerHTML="".concat(e," de Bonus suplémentaires");var n=document.createElement("p");return n.classList.add("d"),n.innerHTML="Quel que soit le téléphone que vous revendez",t.appendChild(i),t.appendChild(n),t}(t),((r=document.createElement("button")).classList.add("btn"),r.style.pointerEvents="auto",r.innerHTML=be()?"Finaliser mon estimation":"Estimer mon téléphone",r.onclick=function(t){"SFR"===e.brand&&window.newSFRNavigateTo?window.newSFRNavigateTo("offre-mobile/reprise-mobile?fromBasket=true"):window.location.replace(x("offre-mobile/reprise-mobile?fromBasket=true"))},r)),n.append(s)}const gr=function(){var t,i;if(e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id&&e.basket.mobile.offer&&!e.basket.mobile.buyBackRecord&&"HM1"!==(null===(t=e.basket.mobile)||void 0===t||null===(i=t.offer)||void 0===i?void 0:i.ptaId)){we("Telephone").querySelector(".M .desc .generic-bonus");var n=_(e.basket.mobile.offer),o=n?n.devicePrices.filter((function(t){return t.sapCode==e.basket.mobile.mainDevice.id}))[0]:null,r=o&&o.buyBackContribution?"".concat(Be.toEuros(o.buyBackContribution)):"";["RM","VLA"].includes(e.basket.mobile.offer.acteDeGestion)||["RM","VLA","CQT"].includes(e.basket.mobile.acteDeGestion)?(e.clientInfos&&e.clientInfos.parc&&e.clientInfos.parc.mobile&&e.clientInfos.parc.mobile.imei?new Promise((function(t){yr(e.clientInfos.parc.mobile.imei,"OPEN").then((function(e){t(e)}),(function(e){t()}))})):Promise.resolve()).then((function(e){var t,i,n,o,a,s,c,l=null!=e&&e.data&&null!=e&&null!==(t=e.data)&&void 0!==t&&t.data?(null==e||null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.marque)+" "+(null==e||null===(a=e.data)||void 0===a||null===(s=a.data)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.modele):"ancien téléphone";hr(r,l)})):hr(r,"ancien téléphone")}},kr=function(){var t,i,n,o,r;if(null!==(t=e.basket)&&void 0!==t&&null!==(i=t.fixe)&&void 0!==i&&i.offer&&!ee(e.basket)&&!te(e.basket)&&!he(e.basket)&&null!==(n=e.basket.fixe.upSellToPush)&&void 0!==n&&n.length&&"FIXE_DEMENAGEMENT"!==(null===(o=e.basket.fixe)||void 0===o||null===(r=o.offer)||void 0===r?void 0:r.acteDeGestion)){var a=e.basket.fixe.upSellToPush.filter((function(e){return"offer"===e.type})).map((function(e){return e.id})),s=Fe("#pushForfaits");s&&a.length&&(function(t,i){var n,o=t.querySelector(".forfaits"),r=o.querySelector("button.btn").cloneNode(!0),a=null==o||null===(n=o.querySelector(".forfait-card"))||void 0===n?void 0:n.cloneNode(!0);a&&(o.innerHTML="",i.forEach((function(t,i){a.querySelector("input").checked=0===i,function(t,i,n){var o=i.cloneNode(!0),r=N("CQT",n),a=null==r?void 0:r.plans.find((function(e){return"ECO"===e.universe}));if(a||null==r||r.plans.find((function(e){return"MOB"===e.universe})),a){var s=o.querySelector("input");s&&(s.setAttribute("id",n),s.setAttribute("value",n));var c=o.querySelector("label");if(c){var l,u;c.setAttribute("for",n),c.classList.remove("quatreg"),c.classList.remove("c||void 0===l||null===(u=l.properties)||void 0===u?void 0:u.skinClassName),c.querySelector(".title").innerHTML=a.ptaLabel,c.querySelector(".desc").innerHTML="".concat(Be.toEludes("MP_CQT_")}));return o&&(n=1*o.code.split("_").pop()),null!=e&&e.pricePerMonthWithDiscounts?(null==e?void iscount)),"/mois<br>").concat(function(e,t){var i,n=(i=null==e?void 0:e.discounts)?i.filter((function(e){return e.duration&&e.discountValue}))[0]:null;return n?"Pendant ".concat(n.duration," mois <br>Puis ").concat(Be.toEuros(e.pricePerMonth-t),"/mois"):""}(a,null==r?void 0:r.mpSimulatedDiscount),"<br>").concat(function(e){return null!=e&&e.commitmentDuration?"Engagement ".concat(e.commitmentDuration," mois"):"Sans engagement"}(a));var d=c.querySelector(".link");d&&(d.href=g(r.seoName),"SFR"===e.brand&&window.newSFRNavigateTo&&(d.onclick=function(e){window.newSFRNavigateTo(E(r.seoName)),e.preventDefault()})),null!=r&&r.mpSimulatedDiscount?o.querySelector(".saving").innerHTML='<p class="saving">Vous économisez <strong>'.concat(Be.toEuros(null==r?void 0:r.mpSimulatedDiscount),"/mois</strong></p>"):o.querySelector(".saving").remove()}t.append(o)}}(o,a,t)})),o.append(r),r.onclick=function(t){return function(t,i){var n=i.querySelector("input:checked");if(n){var o=n.value,r=N("CQT",o),a=null==r?void 0:r.plans.find((function(e){return"ECO"===e.universe}));a||null==r||r.plans.find((function(e){return"MOB"===e.universe}));var s=a?function(t,i){e.basket;var n={mobile:{}};return i&&t&&(n.mobile.offer={ptaId:t.ptaId,gammeId:i,universe:t.universe,act:"CQT"}),i&&t?n:null}(a,o):null;s&&(t&&t.classList.add("loader"),Fr.put(s))}}(t.target,o)})}(s,a),e.content.append(s))}};var Sr=[{code:"repeteur-wifi6",label:"Répéteur Smart Wifi 6 n°1 :",visuel:"//static.s-sfr.fr/media/smartwifi_repeteur-64x64.png"},{code:"repeteur-wifi",label:"Répéteur WiFi",visuel:"//static.s-sfr.fr/Repeteur-Legacy-64x64.png"},{code:"bundle-repeteur-wifi6",label:"bundle Répéteur Smart Wifi 6 n°1 :",visuel:"//static.s-sfr.fr/media/smartwifi_repeteur-64x64.png"},{code:"bundle-repeteur-wifi-leg",label:"Bundle Répéteur WiFi",visuel:"https://static.s-sfr.fr/Repeteur-Legacy-64x64.png"},{code:"bundle-repeteur-wifi6-prem",label:"bundle Répéteur Smart Wifi 6 n°1 :",visuel:"//static.s-sfr.fr/media/smartwifi_repeteur-64x64.png"},{code:"bundle-repeteur-wifi-leg-prem",label:"Bundle Répéteur WiFi",visuel:"https://static.s-sfr.fr/Repeteur-Legacy-64x64.png"}],Pr=["Couverture Wifi dans toute la maison","A envisager pour les logements de plus de 80m2","Equipement envoyé par SFR"];function Er(t,i,n,o,r,a){if(t){t.setAttribute("id","RepeteurWifi");var s=t.querySelector("#RepeteurWifi input");s.setAttribute("id","RepeteurInput");var c=t.querySelector("#RepeteurWifi label");c.setAttribute("for","RepeteurInput");var l=t.querySelector(".M .title"),u=t.querySelector(".L img"),d=t.querySelector(".M .desc"),f=Array.from(d.children);n&&(l&&(l.innerHTML=n.label),u&&(u.src=n.visuel),d&&(f.forEach((function(e){return d.removeChild(e)})),Pr.forEach((function(e){return d.innerHTML+="<li>".concat(e,"</li>")}))),s&&c&&(i?(s.checked=!0,c.onclick=function(){return rt.removeOption(c,n.code,o)}):(s.checked=!1,c.onclick=function(){null!=r&&r.code.includes("bundle")&&!a&&rt.removeOption(c,r.code,o),rt.addOption(c,n.code,o)})));var p=t.querySelector(".p-block");if(p.innerHTML="",i){var m=rt.getPriceInfo(i);p.innerHTML="\n               ".concat(Be.formatPrice(m.price,!1,"Offert"),"\n               <p>").concat(i.discounts&&i.discounts.length?rt.subPrice(m):"","</p>\n               <p>").concat(rt.subSubPrice(m),"</p>"),e.basket.fixe.offer.gammeId.includes("-PREMIUM")&&(p.innerHTML+="<p>+Frais de mise à nction Tr(t,i,n,o,r,a){if(t){t.setAttribute("id","BundleRepeteurWifi");var s=t.querySelector("#BundleRepeteurWifi input");s.setAttribute("id","BundleRepeteurInput");var c=t.querySelector("#BundleRepeteurWifi label");c.setAttribute("for","BundleRepeteurInput");var l=t.querySelector(".M .title"),u=t.querySelector(".L img"),d=t.querySelector(".M .desc"),f=Array.from(d.children);n&&(l&&(l.innerHTML=n.label),u&&(u.src=n.visuel),d&&(f.forEach((function(e){return d.removeChild(e)})),Pr.forEach((function(e){return d.innerHTML+="<li>".concat(e,"</li>")}))),s&&c&&(i?(s.checked=!0,c.onclick=function(){return rt.removeOption(c,n.code,o)}):(s.checked=!1,c.onclick=function(){null!=r&&r.code.includes("bundle")||a||rt.removeOption(c,r.code,o),rt.addOption(c,n.code,o)})));var p=t.querySelector(".p-block");if(p.innerHTML="",i){var m=rt.getPriceInfo(i);p.innerHTML="\n               ".concat(Be.formatPrice(m.price,!1,?rt.subPrice(m):"","</p>\n               <p>").concat(rt.subSubPrice(m),"</p>"),e.basket.fixe.offer.gammeId.includes("-PREMIUM")&&(p.innerHTML+="<p>+Frais de mise à disposition 10€</p>")}e.content.append(t)}}const Mr=function(){if(!te(e.basket)&&e.basket.fixe&&e.basket.fixe.offer){var t=!1,i=e.basket.fixe.options&&e.basket.fixe.options.length>0?e.basket.fixe.options.filter((function(e){return Sr.map((function(e){return e.code})).includes(e.id)}))[0]:void 0,n=e.basket.fixe.upSellToPush&&e.basket.fixe.upSellToPush.length>0?e.basket.fixe.upSellToPush.filter((function(e){return Sr.map((function(e){return e.code})).includes(e.id)})):void 0;if(i||n.lenf(i&&i.id.includes("bundle")){var a=Sr.filter((function(e){return e.code===(null==n?void 0:n[0].id)}))[0],s=Sr.filter((function(e){re,s.code.includes("bundle")&&Tr(r,i,s,"FIXE",a)}else if(i&&!i.id.includes("bundle")){var c=i?Sr.filter((function(e){return e.code===i.id}))[0]:void 0,l=n.length?Sr.filter((function(e){return e.code===(null==n?void 0:n[0].id)}))[0]:void 0;Er(o,i,c,"FIXE",l),l&&null!=l&&l.code.includes("bundle")&&Tr(r,!1,l,"FIXE",c)}else if(!i&&n.length){t=!0;var u=Sr.filter((function(e){var t,i;return e.code===(null===(t=n.filter((function(e){return!e.id.includes("bundle")})))||void 0===t||null===(i=t[0])||void 0===i?void 0:i.id)}))[0],d=Sr.filter((function(e){var t,i;return e.code===(null===(t=n.filter((function(e){return e.id.includes("bundle")})))||void 0===t||null===(i=t[0])||void 0===i?void 0:i.id)}))[0];u&&Er(o,!1,u,"FIXE",d,t),d&&Tr(r,!1,d,"FIXE",u,t)}}}};function Dr(){e.content&&(e.content.innerHTML=""),e.receipt&&(e.receipt.innerHTML=""),e.smallReceipt&&(e.smallReceipt.innerHTML="");var t=void 0;z(e.basket)?(bo(),function(){if(e.line&&e.basket&&e.basket.mobile&&e.basket.mobile.offer&&["MIG","RM"].includes(e.basket.mobile.offer.acteDeGestion)){var t=document.createElement("div");t.innerHTML='<div class="lc">Ligne concernée : '.concat(e.line.replace(/(.{2})/g,"$1 "),"</div>"),e.content.append(t)}}(),Ge(),dr(),Gn(),xo(),ut(),ci(),Ho(),Pt(),Mr(),pr(),vt(),xn(),Un(),Tn(),de(),lr(),Ht(),Vt(),Vo(),si(),Bn("PORTA_ONLY"),ur("OFFER"),fn(),Bn("PORTA_AND_ESIM"),br(),En(),Mo(),Do(),In(),de(),ur("DEVICE"),de(),Pn.render(),ti(),qo(),Bo.render(),jo(),Ao(),kr(),Zo(),Qo(),sr(),Yo(),gr(),Bo.disableNextIfNeed(),e.mainContainer&&e.mainContainer.style.removeProperty("display"),e.receipt&&e.receipt.style.removeProplay="none"),e.receipt&&(e.receipt.style.display="none"),e.smallReceipt&&(e.smallReceipt.style.display="none"),e.emptyBasket&&(t=e.emptyBasket.querySelector(".back-shop")),function(){if(e.emptyBasket){if(e.emptyBasket.querySelector("p")&&(e.emptyBasket.querySelector("p").innerHTML="Votre panier est vide !"),e.emptyBasket.querySelector(".login")&&(e.emptyBasket.querySelector(".login").display="block"),e.clientInfos){var t=function(e,t){if("string"!=typeof e)throw new qe("Invalid token specified");var i=!0===(t=t||{}).header?0:1;try{return JSON.parse(Ie(e.split(".")[i]))}catch(e){throw new qe("Invalid token specified: "+e.message)}}(v.getStoredAccessToken());if(t){var i=JSON.parse(t.fu).ficheUser;e.emptyBasket.querySelector("p")&&(e.emptyBasket.querySelector("p").innerHTML="Bonjour ".concat(i.prenom,", votre panier est vide !")),e.emptyBasket.querySelector(".log="none")}}e.emptyBasket.style.removeProperty("display")}}()),t&&(e.proxyLS||location.href.includes("espace-client"))&&(t.innerHTML="Retour"),Vi.showItemNumber("basket-builder::init")}var Lr=i(669);const xr=function(){var t="".concat(e.env.endpoints.constantsUrl),i=v.getStorageData("constantsData",t,{});return i?Promise.resolve(i):Lr.get(t)},Ar=function(){return e.optionConstants?Promise.resolve():new Promise((function(t,i){xr().then((function(i){var n;e.optionConstants=null!==(n=i.data)&&void 0!==n?n:i,t()}))}))},Ir=function(){e.spinner&&e.spinner.classList.add("show")},qr=function(){e.spinner&&e.spinner.classList.remove("show")},Rr=function(t){if(e.toggleClicked)e.toggleClicked=!1;else if(t&&!e.firstAdd){var i=document.getElementById(t);i&&window.scrollTo({top:i.offsetTop,behavior:"smooth"})}else window.scrollTo({top:0});e.scrollId=null},Cr=function(e){if(!e)return null;switch(e){case"fixe-offer":return"PtFixeOffer";case"mobile-offer":return"PtMobileOffer";case"fixe-device":return"TV";case"mobile-device":return"Telephone";case"option":return"PtOption";case"accessory":return"PtAccessory";default:return null}};function Or(t,i,n){var o,r,a,s,c,l,u,d,f,p,m,b,y,h=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=arguments.length>4?arguments[4]:void 0,k=Vi.getBasketSnapshot(e.basket);e.basketId=t.data&&t.data.data?t.data.data.id:null,e.stepper=null,e.actionInProgress=!1,t.data&&t.data.warnings&&t.data.warnings.forEach((function(t){Jn[t.code]&&(ht(Jn[t.code]),e.actionInProgress=!1,n())})),!e.basket&&e.putAdded?e.firstAdd=!0:e.firstAdd=!1,e.basket=t.data?t.data.data:null,e.warnings=t.data?t.data.warnings:null;var S=e.line;!e.basket.line||e.basket.line.includes("CMD_")||e.changeLine||(e.line=e.basket.line);var P=[];if((!S&&e.basket.line||S&&e.basket.line&&S!==e.basket.line)&&P.push(oi()),v.setStoredBasketId(e.brand,e.basketId),v.setStoredLine(e.brand,e.line),(Y(e.basket)||J(e.basket))&&P.push(O("mobile")),J(e.basket)&&P.push(O("fixe")),Y(e.basket)&&K(e.basket)&&e.basket.mobile.mainDevice.id!==U||Y(e.basket)&&e.basket.mobile.devicesToPush&&e.basket.mobile.devicesToPush.length)if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId){var E=e.basket.mobile.offer.gammeId;P.push(w("",E))}else P.push(w());if(e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id&&e.basket.mobile.mainDevice.id!==U){var T=Yt.getMobileDeviceGroup(e.basket.mobile.mainDevice.id);T&&P.push(w(T.groupId))}($(e.basket)||Y(e.basket)&&null!==(o=e.basket.mobile.devicesToPush)&&void 0!==o&&o.length)&&P.push(Yt.loadDevices()),Q(e.basket)&&P.push(Ar()),($(e.basket)||ie(e.basket)||e.basket&&e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.offer.gammeId)&&P.push(vn.loadAccessoriesByGroup()),e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id&&P.push(Zt());var M=(null===(r=e.basket)||void 0===r?void 0:r.mobile)&&(null===(a=e.basket)||void 0===a||null===(s=a.mobile)||void 0===s?void 0:s.accessories)&&(null===(c=e.basket)||void 0===c||null===(l=c.mobile)||void 0===l||null===(u=l.accessories)||void 0===u?void 0:u.length),D=(null===(d=e.basket)||void 0===d?void 0:d.temporary)&&(null===(f=e.basket)||void 0===f||null===(p=f.temporary)||void 0===p?void 0:p.accessories)&&(null===(m=e.basket)||void 0===m||null===(b=m.temporary)||void 0===b||null===(y=b.accessories)||void 0===y?void 0:y.length);if((e.basket.mobile&&e.basket.mobile.offer&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id&&"HM1"===e.basket.mobile.offer.ptaId||M||D)&&P.push(Ut()),(ne(e.basket)||le(e.basket))&&P.push(Ye.loadOptions()),P.length>0)Promise.all(P).then((function(){Dr();var t=Vi.getBasketSnapshot(e.basket);"add"===g&&Vi.sendEtamoveBasketEvent(k,t),Vi.trigETag_chF_EvenProgress=!1,(e.scrollId&&e.open||e.toggleClicked)&&Rr(e.scrollId),i(e.basket)}));else{Dr();var L=Vi.getBasketSnapshot(e.basket);"add"===g&&Vi.sendEtagAddBasketEvent(k,L),"rm"===g&&Vi.ent(k,L),Vi.trigETag_chF_Event(e.stepper),h&&qr(),e.actionInProgress=!1,(e.scrollId&&e.open||e.toggleClicked)&&Rr(e.sunction wr(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Dr(),i&&qr(),t&&t.response&&t.response.data&&t.response.data.errors&&t.response.data.errors.find((function(e){return"noResultError"!==e.code}))){var n=t.response.data.errors.filter((function(e){return Jn[e.code]}))[0];ht(n?Jn[n.code]:"Erreur panier ")}e.actionInProgress=!1}const Fr={loadStoredBasketForLine:function(){return e.brand?new Promise((function(e,t){Pe().then((function(i){Or(i,e,t)}),(function(e){wr(),t()}))})):Promise.resolve()},loadStoredBasket:function(){return e.basketId&&e.brand?new Promise((function(e,t){Ee().then((function(i){Or(i,e,t)}),(function(t){wr(t),e()}))})):(Dr(),Promise.resolve())},put:function(t){var i=arguments.length>1en2?arguments[2]:void 0;if(!e.actionInProgress)return e.actionInProgress=!0,e.putAdded=!0,e.scrollId||n||(e.scrollId=Cr(pe(t))),$(t)&&Vi.triggerBasketPhoneOptionProp68(t),K(t)&&be()&&ve()&&!t.mobile.buyBackRecord&&(t.mobile.buyBackRecord={transactionId:be()}),i&&Ir(),new Promise((function(n,o){Te(t).then((function(t){e.changeLine&&(e.changeLine=!1),Or(t,n,o,i,"add")}),(function(e){wr(e,i),n()}))}))},remove:functintguments"bypassRecap","true"),e.actionInProgress=!1,location.href=i.href}),(function(e){wr(e),t()}))}))},saveBasket:function(t,i){if(!e.actionInProgress)retur),new Promise((function(e){Le(t,i).then((functiorable:!0,writable:!0}):e[t]=i,e}var Br="SFR.V.detectedQueryVars",Hr="SFR.V.detectedQueryVarsExpiration";function Wr(e,t){var artLSSet(e,i)}function Gr(e){return JSON.parse(v.sma.env){var tvar t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(i),!0).forEach((function(t){_r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),n=e.env.allowedQueryVars;if(n&&n.length){var o=function(e){var t={};return e.length>1&&e.substr(1).split("&").forEach((function(e){var i=e.split("=");t[i[0]]=i[1]})),t}(window.location.search);Object.keys(o).filter((function(e){return n.indexOf(e)>-1})).forEach((function(e){return t[e]=o[e]})),JSON.stringify(i)!==JSON.stringify(t)&&function(t){var i=e.env.allowedQueryVarsTimeoutMs;Wr(Br,t),Wr(Hr,Date.now()+i)}(t)}}},Xr=function(){return Date.now()>Gr(Hr)&&(v.smartLSRm(Hr),v.smartLSRm(Br)),Gr(Br)||{}},Vr=function(){return!!e.initialized||(console.log("PANIER-TRANSVERSE - Not initialized : call init() method to initilize"),!1)},jr=function(){return!e.initialized||(console.log("PANIER-TRANSVERSE - Initialization error : already initialized"),!1)},zr=function(e){return!!["SFR","RED"].includes(e.brand)||(console.error("PANIER-TRANSVERSE - Initialization error : brand must be SFR or RED"),!1)};function Qr(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.open||(e.open=!0,e.basket&&Vi.sendEtagOpenBasketEvent(),setTimeout((function(){document.body.classList.add("basket-displayed"),e.root&&e.root.style.removeProperty("display"),Vi.showItemNumber("display.handler::open"),Rr(e.scrollId);var i=window.location.href;i.endsWith("#")&&(i=i.substring(0,i.length-1));var n=i.includes("#sfrpt")?i:i+"#sfrpt";t&&window.history.pushState({},"",n)})))}function Yr(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.open&&(Jr(),e.isBack=t,t&&window.history.back(),Vi.showItemNumber("popin.service::close"))}function Jr(){e.open&&(document.body.classList.remove("basket-displayed"),e.root&&(e.root.style.display="none"),e.open=!1)}function Kr(t){if(t.fixe&&t.fixe.offer)e.pushConfig.keepPushGen8Offer=!1,v.setStoredPushConfig(e.brand,e.pushConfig),t.fixe.idEligibility&&e.idEligibility!==t.fixe.idEligibility&&(e.idEligibility=t.fixe.idEligibility);else if(t.mobile&&t.mobile.offer&&t.mobile.offer.gammeId&&t.mobile.offer.gammeId.includes("INTERNET_PARTOUT")&&"ECO"===t.mobile.offer.universe){var i;return e.basket&&e.basket.mobile&&e.basket.mobile.mainDevice&&e.basket.mobile.mainDevice.id===U&&(t.mobile.offer.universe="CASH"),t.mobile&&null!==(i=t.mobile.mainDevice)&&void 0!==i&&i.id&&!t.mobile.offer&&(e.scrollId="Telephone"),oa(null,t)}return oa(null,t)}function $r(t,i){if("FIXE"==t){if(e.basket&&e.basket.fixe)return oa(t,{offer:ca(t,i)});console.log("Changement de portabilité impossible avec une offre inexistante")}else if("MOBILE"==t){if(e.basket&&e.basket.mobile)return oa(t,{offer:ca(t,i)});console.log("Changement de portabilité impossible avec une offre inexistante")}}function Zr(t){if(e.basket&&e.basket.mobile)return oa("MOBILE",{sim:{type:t}});console.log("Ajout carte sim incompatible avec l'offre existante")}function ea(t,i,n,o){var r=i===U?"CASH":"";return"FIXE"==t?(e.scrollId="TV",oa(t,{idEligibility:ra(),mainDevice:{id:i,quantity:n,paymentMode:o},offer:ca(t,null,r)})):"MOBILE"==t?(e.scrollId="Telephone",oa(t,{mainDevice:{id:i,quantity:n,paymentMode:o},offer:ca(t,null,r)})):void 0}function ta(t,i){if(e.scrollId="PtAccessory",e.basket){if(e.basket.mobile)return oa("MOBILE",{accessories:[{id:t,quantity:i}]});if(e.basket.fixe)return oa("FIXE",{accessories:[{id:t,quantity:i}]})}return oa("TEMPORARY",{accessories:[{id:t,quantity:i}]})}function ia(t,i){if(e.scrollId="PtOption",e.basket){if(i){if("fixe"===i.toLowerCase()&&ra())return oa("FIXE",{idEligibility:ra(),options:[{id:t}]});if("mobile"===i.toLowerCase())return oa("MOBILE",{options:[{id:t}]})}if(e.basket.fixe)return oa("FIXE",{idEligibility:ra(),options:[{id:t}]});if(e.basket.mobile)return oa("MOBILE",{options:[{id:t}]})}return oa("TEMPORARY",{options:[{id:t}]})}function na(t){return e.basket.mobile?oa("MOBILE",{insurance:{id:t}}):e.basket.fixe?oa("FIXE",{insurance:{id:t},idEligibility:ra()}):void 0}function oa(t,i){if(Vr())return!e.open&&e.openOnChange&&Qr(),Fr.put(sa(t,i),!0)}function ra(){return e.idEligibility?e.idEligibility:v.getIdEligiblity(e.brand)}function aa(e,t){if(Vr())return Fr.remove(sa(e,t),!0)}function sa(e,t){if(!e)return t;var i={};return"FIXE"==e?i.fixe=t:"MOBILE"==e?i.mobile=t:"TEMPORARY"==e&&(i.temporary=t),i}function ca(t,i,n){if(!t||!e.basket)return null;if("FIXE"==t){i.act=e.basket.fixe.offer.acteDeGestion,o.gammeId=e.basket.fixe.offer.gammeId,o.ptaId=e.basket.fixe.offer.ptaId,o.universe=n||e.basket.fixe.offer.universe,o.withPortability=null!=i?i:e.basket.fixe.offer.withPortability,o}if("MOBILE"==t){if(!e.basket.mobile||!e.basket.mobile.offer)return null;var r={};return r.act=e.basket.mobile.offer.acteDeGestion,r.gammeId=e.basket.mobile.offer.gammeId,r.ptaId=e.basket.mobile.offer.ptaId,r.universe=n||e.basket.mobile.offer.universe,r.withPortability=null!=i?i:e.basket.mobile.offer.withPortability,r}}var la="/internet-mobile",ua=!1;function da(){e.offers=null}function unction pa(){return e.initialized}function ma(t){var i=!0;if(e.proxyLS&&e.line&&&&(i=!1),i)return!t||e.line&&e.line===t?Promise.resolve(e.basket):new Promise((function(i,n){e.offersFixe=null,e.offersMobile=null,e.devices=null,e.devicesPrices=null,e.dgDevicesPrices=null,e.clientInfos=null,e.basketId=null,e.basket=null,e.pushAccessories=null,v.setStoredLine(e.brand,null),t&&(e.line&&(e.changeLine=!0),e.line=t,v.setStoredLine(e.brand,t),Ir(),oi().then((function(){e.lineSeted?(qr(),i(null)):(e.lineSeted=!0,Fr.loadStoredBasketForLine().then((function(){Dr(),qr(),i(e.basket)}),(function(){Dr(),qr(),i(null)})))}),(function(){e.line=null,v.setStoredLine(e.brand,null),Dr(),qr(),n()})))}))}function ba(){return e.basket}function va(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!jr())return Promise.resolve(void 0);var n=ya(t);if(!n)return Promise.reject();t.accessToken&&localStorage.setItem("access_token",t.accessToken),t.basketId&&localStorage.setItem("_PT.SFR.basketId",t.basketId),t.eligibilityResult&&localStorage.setItem("eligibilityResult",t.eligibilityResult),t.eligibilityResultDmgt&&localStorage.setItem("eligibilityResultDmgt",t.eligibilityResultDmgt),t.eligibilityResultMig&&localStorage.setItem("eligibilityResultMig",t.eligibilityResultMig);var o=void 0;return i&&(o=i),new Promise((function(i,n){Ur();var r=document.createElement("link");if(r.type="text/css",r.rel="stylesheet",r.href=e.env.styleUrl,document.body.append(r),e.brand=t.brand?t.brand:e.brand,e.openOnChange=t.openOnChange?t.openOnChange:e.openOnChange,e.line=t.line?t.line:e.line,e.root=v.parseHTML('<div id="PT" style="display: none;"></div>'),e.mainContainer=v.parseHTML('<main id="Panier" style="display: none;"></main>'),e.content=v.parseHTML('<section id="Content"></section>'),e.receipt=v.parseHTML('<section id="Fac" style="display: none"></section>'),e.smallReceipt=v.parseHTML('<section id="FacRes" style="display: none"></section>'),Oe().then((function(){e.mainContainer.append(e.smallReceipt);var t=Fe(".back-shop");t&&(t.onclick=function(t){Yr(!0),Vi.trigETag_Stl_Event(t,"/Retour_boutique_depuis_panier"),o&&o(e.basket)},e.mainContainer.append(t)),e.mainContainer.append(Fe(".title-page")),e.mainContainer.append(e.content),e.mainContainer.append(e.receipt),e.root.append(e.mainContainer);var r=document.getEparentNode.insertBefore(e.root,r.nextSibling):document.body.append(e.root),ha();var a=v.getStoredPushConfig(e.brand);a&&(e.pushConfig=a);var s=v.getStoredLine(e.brand);e.proxyLS?(s&&(e.line=s),e.basketId=v.getStoredBasketId(e.brand)):s==e.line&&(e.basketId=v.getStoredBasketId(e.brand)),e.initialized=!0,Ir(),e.line?oi().finally((function(){Fr.loadStoredBasket().t.sendEtagOpenBasketEvent(),ua=!1),i(e.basket)}),(function(){return n()}))})):Fr.loadStoredBasket().then((function(){qr(),e.basket&&ua&&(Vi.sendEtagOpenBasketEvent(),ua=!1),i(e.basket)}),(function(){return n()}))}),(function(){return n()})),window.location.href.includes("#sfrpt")&&(ua=!0,v.isRelon.href.includes("#sfrpt")?e.isBack?(e.isBack=!1,window.history.back()):Qr(!1):e.open&&!ua&&Yr()},window.location.href.includes(".sfr.fr/accessoires")){var a=document.querySelectorAll("a.cta");a&&a.length&&a.forEach((function(e){return e.onclick=function(t){ga(e),t.preventDefault()}}))}}))}function ya(e){return e.brand||(e.brand="SFR"),null==e.openOnChange&&(e.openOnChange=!1),zr(e)}function ha(){if(e.emptyBasket=we("EmptyBasket"),e.emptyBasket){var t=e.emptyBasket.querySelector(".back-shop");t&&(t.onclick=Yr);var i=e.emptyBasket.querySelector(".login .btn");i&&(i.onclick=function(e){windowe"),e.root.append(e.emptyBasket)}var n=e.emptyBasket.querySelector(".links"),o=n.querySelectorAll("a")[0];o&&(o.href=k(),"SFR"===e.brand&&window.newSFRNaviga-internet"),e.preventDefault()}));var r=n.querySelectorAll("a")[1];r&&(r.href=g(),"SFR"===e.brand&&window.newSFRNavigateTo&&(r.onclick=function(e){window.newSFRNavigateTo("/offre-mobile"),e.preventDefault()}));var a=n.querySelectorAll("a")[2];a&&(a.href=g("telephone-portable"),"SFR"===e.brand&&window.newSFRNavigateTo&&(a.onclick=function(e){window.newSFRNavigateTo("/offre-mobile/telephone-portable"),e.preventDefault()}));var s=n.querySelectorAll("a")[3];s&&(s.href="".concat(e.env.redirectionRootPaths[e.brand]).concat(la),"SFR"===e.brand&&window.newSFRNavigateTo&&(s.onclick=function(e){window.newSFRNavigateTo(la),e.preventDefault()}));var c=n.querySelectorAll("a")[4];c&&(c.href="".concat(e.env.redirectionRootPaths[e.brand]).concat("/accessoires/"));var l=we("toaster");if(l){e.toastr=document.createElement("div"),e.toastr.setAttribute("oastr.append(l),document.body.append(e.toastr)}e.popinContainer=document.createElement("div"),e.popinContainer.setAttribute("id","popinContainer"e.popin.setAttribute("id","popinContent");var d=document.createElement("div");d.classList.add("overlay"),e.popinContainer.append(d),e.popinContainer.append(e.popier&&e.root.append(e.spinner)}function ga(e){e.getAttribute("data-pat")&&ta(e.getAttribute("data-pat"),1).then"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ka(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw r}}}}(Sa.values());try{for(t.s();!(e=t.n()).done;)if(Pa(e.value))return!0}catch(e){t.e(e)}finally{t.f()}return!1}()){var n=!0,o=v.smartLSGet("access_token");if(o){var r=Ea(o).exp;(n=Date.now()-(1e3*r-12e4)>0)?(v.smartLSRm("access_token"),v.smartLSRm("access_token_stored_at"),v.smartLSRm("expires_at"),console.log("[PT] expired Token"),t(!1)):(console.log("[PT] valid token"),e.isAuthenticate=!0,console.log("valid token"),tew URL(e.env.endpoints.authorizeService);a.searchParams.set("response_type","token"),a.searchParams.set("client_id",e.env.clientId),a.searchParams.set("redirect_uri",e.env.redirect_uri),a.searchParams.set("scope","openid"),a.searchParams.set("gateway",!0),a.searchParams.set("token",!0),a.searchParams.set("state",(c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=new Uint8Array(40),window.crypto.getRandomValues(l),l=l.map((function(e){return c.charCodeAt(e%c.length)})),String.fromCharCode.apply(null,l)));var s=new XMLHttpRequest;s.open("GET",a,!0),s.withCredentials=!0,s.addEventListener("error",(function(e){t(!1)})),s.addEventListener("load",(functionponse)){var i=new Date;localStorage.setItem("access_token",this.response),localStorage.setItem("access_token_stored_at",i.getTime()),localStorage.setItem("expires_at",i.getTime()),e.isAuthenticate=!0}console.log("[PT] Renewed Token"),t(!0)}else console.error("[PT] ERROR renewing the Token"),t(!1)})),s.send()}}else v.smartLSRm("access_token"),v.smartLSRm("access_token_stored_at"),v.smartLSRm("expires_at"),t(!1);var c,l}))};var Ma=i(669),Da=["/service-cart","/service-offer","/service-deviceinfo","/service-options","/service-clientinfo","/service-accessory"];function La(e){var t=!1;return Da.forEach((function(i){e.includes(i)&&(t=!0)})),t}function xa(e){e.origin.includes(".sfr.fr")&&(e.data.n||e.data.v)&&("status"==e.data.n&&"finish"==e.data.v?v.notifSynchroLS(!0):(v.initDataLS(e.data.n,e.data.v),e.data.n.includes("basketId")||e.data.n.includes("line")))}v.loadEnvConfiguration(),window.addEventListenventListener("message",xa,!0):window.attachEvent("onmessage",xa),v.initLShandler(),Ma.defaults.params={},Ma.interceptors.request.use((function(e){var t=v.getStoredAccessToken();t&&La(e.url)&&(e.headers.Authorization="Bearer ".concat(t),console.log("PT initAuthenticationInterceptor => url : "+e.url+" http header set"));var i=Xr();return i&&Object.keys(i).forEach((function(t){("surfDate"!==t||La(e.url))&&(e.params[t]=i[t])})),e.headers.sfrCookie=document.cookie.split("; ").filter((function(e){return(t=e).startsWith("eTab")||t.startsWith("prtnr");var t})).join("; "),e}),(function(e){return Promise.reject(e)})),Ta().then((function(e){}))})(),panierTransverse=n})();