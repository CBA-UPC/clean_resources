"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1289],{84314:(e,t,l)=>{l.r(t),l.d(t,{default:()=>fe});l(46758),l(53321);var a=l(50959),i=l(26520),r=l(85648),s=l(38024),n=l(91643),o=l(21536),A=l(65432),c=(l(70054),l(80090)),u=l(42652),d=(l(80378),l(98328)),E=l(59374);let g=function(e){return e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER",e}({});const D={"show-alphabetical":g.SHOW_ALPHABETICAL,"book-alphabetical":g.BOOK_ALPHABETICAL,"episode-alphabetical":g.EPISODE_ALPHABETICAL,"playlist-alphabetical":g.PLAYLIST_ALPHABETICAL,"album-alphabetical":g.ALBUM_ALPHABETICAL,"recently-added":g.ADDED_AT,"creator-name":g.CREATOR_NAME,"creator-name-alphabetical":g.CREATOR_NAME_ALPHABETICAL,"album-creator-name":g.ALBUM_CREATOR_NAME,"recently-played":g.RECENTLY_PLAYED,"playlist-most-relevant":g.MOST_RELEVANT,"playlist-custom-order":g.CUSTOM_ORDER},C={[g.RECENTLY_PLAYED]:{key:"recently-played",get value(){return r.ag.get("collection.sort.recently-played")}},[g.ADDED_AT]:{key:"recently-added",get value(){return r.ag.get("collection.sort.recently-added")}},[g.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[g.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[g.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[g.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[g.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return r.ag.get("collection.sort.creator")}},[g.CREATOR_NAME]:{key:"creator-name",get value(){return r.ag.get("collection.sort.creator")}},[g.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[g.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[g.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return r.ag.get("collection.sort.most-relevant")}},[g.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return r.ag.get("collection.sort.custom-order")}}};g.ADDED_AT,g.ALBUM_ALPHABETICAL,g.CREATOR_NAME,g.ADDED_AT,u.lY.ADDED_AT,u.As.DESC,g.ALBUM_ALPHABETICAL,u.lY.NAME,u.As.ASC,g.CREATOR_NAME,u.lY.ARTIST_NAME,u.As.ASC;g.ADDED_AT,g.CREATOR_NAME_ALPHABETICAL,g.ADDED_AT,u.hx.ADDED_AT,u.As.DESC,g.CREATOR_NAME_ALPHABETICAL,u.hx.NAME,u.As.ASC;g.ADDED_AT,g.SHOW_ALPHABETICAL,g.ADDED_AT,u.aW.ADDED_AT,u.As.DESC,g.SHOW_ALPHABETICAL,u.aW.NAME,u.As.ASC;g.ADDED_AT,g.BOOK_ALPHABETICAL,g.ADDED_AT,u.VN.ADDED_AT,g.BOOK_ALPHABETICAL,u.VN.NAME;g.MOST_RELEVANT,g.RECENTLY_PLAYED,g.ADDED_AT,g.PLAYLIST_ALPHABETICAL,g.CUSTOM_ORDER,g.ADDED_AT,E.bD.ADDED_AT,E.As.DESC,g.RECENTLY_PLAYED,E.bD.RECENTLY_PLAYED,E.As.ASC,g.PLAYLIST_ALPHABETICAL,E.bD.NAME,E.As.ASC,g.MOST_RELEVANT,E.bD.RELEVANCE,E.As.DESC,g.CUSTOM_ORDER;g.ADDED_AT,g.ADDED_AT,g.ADDED_AT,g.MOST_RELEVANT,g.ADDED_AT;var T=l(11527);const p=e=>e===g.ADDED_AT?u.As.DESC:u.As.ASC,L={option:g.ADDED_AT,order:u.As.DESC},h={[u.As.ASC]:u.As.DESC,[u.As.DESC]:u.As.ASC},y=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:L}),_=a.memo((function(e){let{uri:t,children:l,defaultSortOption:a}=e;const i={option:a,order:p(a)};return(0,T.jsx)(c.r,{uri:t,defaultState:i,sortContext:y,children:l})}));var m=l(9443),P=l(47262),b=l(20980),x=l(22527),S=l(95812),O=l(79694),f=l(57986),I=l(51837),R=l(8824),v=l(80626),N=(l(86277),l(67408));const k=a.memo((function(e){let{sortOptions:t,onSort:l}=e;const{sortState:i,setSortState:r}=(0,a.useContext)(y),s=(0,a.useCallback)((e=>{const t=D[e];null==l||l(t),r(((e,t,l)=>t!==e?{option:e,order:p(e)}:{option:e,order:h[l]})(t,i.option,i.order))}),[l,r,i.option,i.order]),n=t.map((e=>C[e])),o=C[i.option];return(0,T.jsx)(N.A,{options:n,onSelect:s,selected:o,sortOrder:(A=i.order,A===u.As.ASC?d.k.ASC:d.k.DESC)});var A})),M="VuUpAVlUW_OfMfOcDEID",j=a.memo((function(e){let{canSort:t,canFilter:l,filterPlaceholder:i,sortOptions:r}=e;const{spec:s,logger:n}=(0,v.fU)(I.createDesktopSearchBarEventFactory,{}),o=(0,a.useCallback)((()=>{n.logInteraction(s.filterFieldFactory().keyStrokeFilter())}),[n,s]),A=(0,a.useCallback)((()=>{n.logInteraction(s.filterFieldFactory().hitClearFilter())}),[n,s]);return(0,T.jsxs)("div",{className:M,children:[l?(0,T.jsx)(a.Suspense,{fallback:null,children:(0,T.jsx)(R.K,{placeholder:i,onFilter:o,onClear:A})}):null,t?(0,T.jsx)(k,{sortOptions:r}):null]})}));var B=l(22795);const H={[u.yW.NAME]:o.hI.TITLE,[u.yW.SHOW_NAME]:o.hI.SHOW,[u.yW.ADDED_AT]:o.hI.ADDED_AT},U=[g.ADDED_AT,g.CREATOR_NAME,g.EPISODE_ALPHABETICAL],w={[g.ADDED_AT]:u.yW.ADDED_AT,[g.CREATOR_NAME]:u.yW.SHOW_NAME,[g.EPISODE_ALPHABETICAL]:u.yW.NAME};const W=(e,t)=>{if(function(e){return U.includes(e)}(e))return{field:w[e],order:t}},Y=(e,t)=>{if(!U.includes(e))return;return(e=>{if(null==e||!e.field)return;const t=H[e.field];if(!t)return;return o.Vd[t].map((t=>e.order?`${t} ${e.order}`:t)).join(",")})(W(e,t))};var F=l(66819);const V="m9xwK71Ieq9cySIq4FAP",K="PkEMTu8sGqJeQWJ7HvEs",$="DbH2KkRA8yVWWpXGaNSW",z=e=>{let{metadata:t,canSort:l,backgroundColor:a,isPlaying:i,isOnline:s,togglePlay:n}=e;const o=(0,B.y)(),{uri:A,name:c}=t,u=t.totalLength>0,d=(0,F.j)();return(0,T.jsx)(O.o,{backgroundColor:a,children:(0,T.jsxs)(O.F,{children:[u&&(0,T.jsx)(f.$,{onClick:()=>n(),isPlaying:i,size:d,uri:A,disabled:!s,ariaPlayLabel:r.ag.get("playlist.a11y.play",c),ariaPauseLabel:r.ag.get("playlist.a11y.pause",c)}),l&&(0,T.jsx)("div",{className:$,children:(0,T.jsx)(j,{canSort:o.getCapabilities().canSort,canFilter:o.getCapabilities().canFilter,filterPlaceholder:r.ag.get("playlist.search_in_playlist"),sortOptions:U})})]})})};var q=l(80936),G=l(45438),J=l(61058),X=l(18517),Q=l(64329),Z=l(18050),ee=l(12553),te=l(51040),le=l(94739);const ae="p6DKqBcwmVtxmHt8ju43",ie="_OxEpxzAgJiTENfolVUN";var re=l(17053),se=l(13734),ne=l(10956),oe=l(44724),Ae=l(52993),ce=l(23769),ue=l(82857),de=l(74234),Ee=l(4901),ge=l(42783),De=l(17676);const Ce={small:64,standard:300,large:640,xlarge:1024},Te=a.memo((function(e){var t,l,i,r,s,n,o;let{index:c,contextUri:u,episode:d,onRemove:E,usePlayContextItem:g}=e;const D=(0,a.useRef)(d.duration.milliseconds-d.timeLeft.milliseconds),C=d.uri,[p,L]=(0,a.useState)(0===d.timeLeft.milliseconds),{filter:h}=(0,a.useContext)(A.fo),y=(0,re.O)(),_=(0,J.jh)(),P=(0,se.o)(),[b]=(0,B.Z)(C,!0),S=(0,ge.k)(d.uri,d.isPlayable),O=(0,m.k)(),{isPlaying:f,isActive:I,togglePlay:R}=g({uri:C,index:c}),[v]=(0,ce.z)(1e4,(e=>{var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===C}));(0,a.useEffect)((()=>{f&&(D.current=v)}),[f,v]);const{isPlaying:N,isActive:k,togglePlay:M}=(0,x.n)({uri:C,pages:[{items:[{type:ue.p.EPISODE,uri:C,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,a.useEffect)((()=>{b||E()}),[b,E]),(0,a.useEffect)((()=>{f||d.duration.milliseconds<=D.current&&L(!0)}),[f,d.duration.milliseconds]);const j=(0,a.useCallback)((e=>{e||(D.current=0),L(e)}),[]),H=e=>{if(e.target!==e.currentTarget)return;let t=`${d.name}`;d.show&&(t+=` â€¢ ${d.show.name}`),y(e,{itemUris:[C],dragLabelText:t,contextUri:u})},U=(0,a.useCallback)((()=>{P({type:"click",targetUri:C,intent:"navigate"})}),[C,P]),w=(0,a.useCallback)((()=>{O?(P({type:"click",intent:f?"pause":"play"}),R()):(P({type:"click",intent:N?"pause":"play"}),M())}),[O,f,N,P,R,M]),W=(0,a.useCallback)((e=>(0,T.jsx)(Ee.o,{searchWords:[h],textToHighlight:e})),[h]),Y=(null===(t=d.podcastSubscription)||void 0===t?void 0:t.isPaywalled)??!1,F=(null===(l=d.podcastSubscription)||void 0===l?void 0:l.isUserSubscribed)??!1,{badges:V}=(0,de.r)({isExplicit:d.isExplicit,isMOGEFRestricted:d.is19PlusOnly,isPaywalled:Y});let K=!1;(I||!O&&k)&&(K=!0);const $=(0,X.W6)(De.eli,{loadingValue:!1});return b?(0,T.jsxs)(G.JL,{value:"row",index:c,children:[(0,T.jsx)("hr",{className:ae,"aria-hidden":!0}),(0,T.jsx)(ne._,{menu:(0,T.jsx)(Q.k,{uri:C,contextUri:u,showUri:null===(i=d.show)||void 0===i?void 0:i.uri,isPlayed:p,onMarkAsPlayed:j}),children:$?(0,T.jsx)(ee.k,{requestId:d.requestId,index:c,uri:C,uid:C,size:_,images:d.images.map((e=>({url:e.url,width:e.width||(e.label?Ce[e.label]:null),height:e.height||(e.label?Ce[e.label]:null)}))),isPaywalled:Y,isUserSubscribed:F,name:d.name,highlightText:W,showName:null===(r=d.show)||void 0===r?void 0:r.name,showUri:null===(s=d.show)||void 0===s?void 0:s.uri,description:d.description,isPlayable:S,fullyPlayed:p,durationMs:d.duration.milliseconds,releaseDate:d.release.date||"",resumePositionMs:D.current,handleDragStart:H,handlePlaybackClick:w,handleClick:U,isCurrentlyPlaying:K,isPlaying:O?f:N,position:K?v:void 0,episodeSharingInfo:null,onMarkAsPlayed:j,badges:(0,T.jsxs)(T.Fragment,{children:[V.explicit&&(0,T.jsx)(oe.N,{}),V.paid&&(0,T.jsx)(le.g,{}),V.nineteen&&(0,T.jsx)(Ae.X,{size:16})]}),playButtonWrapper:e=>{var t;return(0,T.jsx)(te.l,{enabled:Y&&!F,showUri:(null===(t=d.show)||void 0===t?void 0:t.uri)||void 0,children:e})}}):(0,T.jsx)(Z.X,{requestId:d.requestId,index:c,uri:C,uid:C,size:_,images:d.images.map((e=>({url:e.url,width:e.width||(e.label?Ce[e.label]:null),height:e.height||(e.label?Ce[e.label]:null)}))),isPaywalled:Y,isUserSubscribed:F,name:d.name,highlightText:W,showName:null===(n=d.show)||void 0===n?void 0:n.name,showUri:null===(o=d.show)||void 0===o?void 0:o.uri,description:d.description,isPlayable:S,fullyPlayed:p,durationMs:d.duration.milliseconds,releaseDate:d.release.date||"",resumePositionMs:D.current,handleDragStart:H,handlePlaybackClick:w,handleClick:U,isCurrentlyPlaying:K,isPlaying:O?f:N,position:K?v:void 0,episodeSharingInfo:null,onMarkAsPlayed:j,badges:(0,T.jsxs)(T.Fragment,{children:[V.explicit&&(0,T.jsx)(oe.N,{}),V.paid&&(0,T.jsx)(le.g,{}),V.nineteen&&(0,T.jsx)(Ae.X,{size:16})]}),playButtonWrapper:e=>{var t;return(0,T.jsx)(te.l,{enabled:Y&&!F,showUri:(null===(t=d.show)||void 0===t?void 0:t.uri)||void 0,children:e})}})})]}):null})),pe=a.memo((function(e){let{contextUri:t,usePlayContextItem:l}=e;const i=(0,a.useContext)(b.H),{sortState:r}=(0,a.useContext)(y),[s,n]=(0,a.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),o=(0,a.useRef)(!1),c=(0,a.useRef)(0),u=(0,a.useRef)(0),{filter:d}=(0,a.useContext)(A.fo),E=(0,a.useCallback)((()=>{u.current++}),[]),{ref:g,breakpoint:D}=(0,J.Db)({[J.Uo.MEDIUM]:0,[J.Uo.LARGE]:600}),C=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=c.current;null!==t&&(o.current||(o.current=!0,(async e=>{const t=await i.getEpisodes({offset:e-u.current,limit:50,sort:W(r.option,r.order),filter:d});return u.current=0,t})(Number(t)).then((l=>{n((a=>{const i=Number(l.offset)+l.items.length,r=e?[]:[...a.items];return r.splice(Number(t),l.items.length,...l.items),c.current=i<l.totalLength?i:null,{...l,items:r}})),o.current=!1}))))}),[d,i,r]);return(0,a.useEffect)((()=>{c.current=0,C(!0)}),[C]),(0,T.jsx)(J.ZU.Provider,{value:D,children:(0,T.jsx)(G.JL,{value:"track-list",children:(0,T.jsx)("div",{ref:g,children:(0,T.jsx)(q.C,{onReachBottom:C,triggerOnInitialLoad:!0,children:s.items.map(((e,a)=>(0,T.jsx)("div",{className:ie,children:(0,T.jsx)(Te,{index:a,episode:e,contextUri:t,onRemove:E,usePlayContextItem:l},`${e.uri}/${a}`)},`${a}${e.uri}`)))})})})})}));var Le=l(69736),he=l(97922),ye=l(81639),_e=l(16118),me=l(93421),Pe=l(84535);const be=e=>{let{metadata:t,backgroundColor:l,isPlaying:i,isOnline:s,togglePlay:n}=e;const{uri:o,name:A,images:c,totalLength:u,owner:d}=t,E=(0,a.useMemo)((()=>({id:d.username,uri:d.uri,name:d.username,displayName:d.displayName||void 0,images:d.images||[]})),[d]);return(0,T.jsxs)(he.gF,{backgroundColor:l,children:[(0,T.jsxs)(ye.W,{children:[(0,T.jsx)(f.$,{size:"medium",onClick:()=>n(),isPlaying:i,uri:o,disabled:!s,ariaPlayLabel:r.ag.get("playlist.a11y.play",A),ariaPauseLabel:r.ag.get("playlist.a11y.pause",A)}),(0,T.jsx)(_e.i,{text:A})]}),(0,T.jsx)(he.Oz,{images:c,name:A,shape:me.K.ROUNDED_CORNERS,renderImage:()=>(0,T.jsx)(Pe.$,{})}),(0,T.jsxs)(he.sP,{children:[(0,T.jsx)(Le.x,{variant:"bodySmallBold",children:r.ag.get("playlist")}),(0,T.jsx)(he.xd,{canEdit:!1,onClick:()=>{},children:A}),(0,T.jsx)(he.QS,{creators:[E],totalItems:u,hasEpisodes:!0})]})]})};var xe=l(41038),Se=l(52260);const Oe=e=>{let{metadata:t,canSort:l}=e;const n=(0,P.Y5)("#006450"),c=(0,m.k)(),{sortState:u}=(0,a.useContext)(y),{filter:d}=(0,a.useContext)(A.fo),{isPlaying:E,togglePlay:g,usePlayContextItem:D}=(0,x.n)({uri:t.uri,metadata:{[S.sb.SORTING_CRITERIA]:Y(u.option,u.order),[S.sb.FILTERING_PREDICATE]:(0,o.aK)(d)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"},{shuffle:!1,repeat:S.zq.REPEAT_NONE});return(0,T.jsxs)("section",{className:K,"data-testid":"your-episodes-page",children:[(0,T.jsx)(xe.$,{children:r.ag.get("sidebar.your_episodes")}),(0,T.jsx)(be,{metadata:t,backgroundColor:n,isPlaying:E,isOnline:c,togglePlay:g}),(0,T.jsxs)("div",{className:V,children:[(0,T.jsx)(z,{metadata:t,backgroundColor:n,isPlaying:E,isOnline:c,togglePlay:g,canSort:l}),(0,T.jsx)("div",{className:"contentSpacing",children:t.totalLength>0?(0,T.jsx)(pe,{contextUri:t.uri,usePlayContextItem:D}):(0,T.jsx)(s.u,{message:r.ag.get("collection.empty-page.episodes-subtitle"),title:r.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:r.ag.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,T.jsx)(i.G,{"aria-hidden":"true"})})})]})]})},fe=(0,a.memo)((function(){const e=(0,a.useContext)(b.H).getCapabilities(),t=(0,Se.x)();return t?(0,T.jsx)(_,{uri:t.uri,defaultSortOption:g.ADDED_AT,children:(0,T.jsx)(A.hz,{uri:t.uri,children:(0,T.jsx)(Oe,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,T.jsx)(n.h,{hasError:!1,errorMessage:r.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.a88ed31e.js.map