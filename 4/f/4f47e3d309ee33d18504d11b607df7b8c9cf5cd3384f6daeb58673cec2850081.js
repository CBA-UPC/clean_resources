(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{396:function(e,a,t){},397:function(e,a,t){},398:419:function(e,a,t){"use strict";t.r(a);var i=t(2),n=t.n(i),r=t(3),s=t(4),l=t(1),c=t(150),d=t(151),h=t(153),o=t(152),m=t(0),u=t.n(m),p=t(24),b=t.n(p),y=t(161),g=t(35),v=(t(396),function(e){var a,t,i,n=e.id,r=e.videoThumb,s=e.handleHotspotClick,l=e.handleMediaAdd,c=e.isHotspot,d=e.currentMedia,h=e.mediaType,o=e.mediaData;return c?(a=s,t="Add to Hotspot",i=JSON.stringify(o)):(a=t="Add to Tour",i=!1),u.a.createElement("div",{className:"inline-gallery-single-select"},u.a.createElement(y.default,{mediaId:n,mediaType:h,thumbSrc:r,thumbClass:"inline-gallery-large-image",height:250,alt:"",pad:!0}),u.a.createElement("div",{className:"inline-gallery-single-select-btn-wrapper"},u.a.createElement("p",{className:"media-name"},o.name),n!==d?u.a.createElement(g.a,{className:"media-add-btn",handleClick:a,"data-mediadata":i},u.a.createElement("i",{className:"material-icons"},"add_circle")," \xa0 ",t):u.a.createElement("p",{className:"media-added-btn"},"\xa0 ",t)))}),f=t(53),S=t(165),O=(t(397),function(e){var a=e.handleChange,t=e.value,i=e.onKeyUp,n=e.handleSubmit,r=e.handleClear,s=e.searchDisabled,l=e.clearDisabled,c=e.id,d=e.name,h=e.isSearching;return u.a.createElement("div",{className:"search-box__wrapper"},u.a.createElement(S.a,{id:c,className:"input-wrapper search-box__input",name:d,iconName:"search",onChange:a,inputValue:t,onKeyUp:i,type:"search"}),h?u.a.createElement(g.a,{className:"search-box__clear-btn",onClick:r,disabled:l,name:"Clear search"},u.a.createElement("i",{className:"material-icons","aria-hidden":"true"},"cancel")):u.a.createElement(g.a,{className:"search-box__search-btn",onClick:n,disabled:s},"search"))}),M=(t(398),t(172)),k=t(181);var C=function(e){Object(h.a)(t,e);var a=Object(o.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).setActiveMedia=function(a){e.state.selectedMediaId===a?e.setState({selectedMediaId:null}):e.setState({selectedMediaId:a})},e.handleSingleSelect=function(a){var t,i=e.state.selectedMediaId,n=e.props.mediaList;if(i){var r=Object.keys(n).indexOf(i),s=(t=r,a.length,3+3*Math.floor(t/3));a.splice(s,0,{select:!0,data:n[i]})}},e.renderThumbGallery=function(){var a,t,i=e.state,n=i.selectedMediaId,r=i.isSearching,s=i.searchMedia,c=e.props,d=c.mediaList,h=c.mediaType,o=c.stopMedia,m=c.addMediaToStop,p=c.isHotspot,g=c.handleHotspotClick;return Object.keys(d).length?(a=r?Object.keys(s).map(function(e){return s[e]}):Object.keys(d).map(,r&&!Object.keys(a).length?u.a.createElement("p",{className:"no-results"},"There are no results matching this search. Please try a new search term."):(e.handleSingleSelect(a),a.map(function(a){var i="audio"===a.type?"https://res.cloudinary.com/concept3d/image/upload/q_auto,f_auto,b_black,c_lfill,dpr_2.0,g_center,h_70,w_140/v1/images/audio-thumb-placeholder.jpg":event&&event.target.src,r="audio"===a.type?Object(l.a)(Object(l.a)({},a),{},{preview:i,thumbnail:i}):Object(l.a)(Object(l.a)({},a.data),{},{preview:i});if(t=p?r:"",a.select)return u.a.createElement(v,{key:"single".concat(a.data.id),id:a.data.id,videoThumb:a.data.thumbnail,handleMediaAdd:m,currentMedia:p?"":o.find(,mediaData:t,mediaType:h,isHotspot:p,handleHotspotClick:g});var s=b()("sidebar-library-small-image",{active:!p&&o.includes("".concat(a.id)),select:n===a.id}),c="audio"===h||"images"===h;return u.a.createElement(y.default,{key:a.id,mediaId:a.id,name:a.name,mediaType:h,thumbSrc:a.thumbnail,thumbClass:s,height:c?140:70,alt:"",handleClick:e.setActiveMedia,overlayMediaName:!0})}))):null},e.handleChange=function(a){e.setState(Object(s.a)({},a.target.name,a.target.value))},e.handleKeyUp=function(a){var t=e.state.searchVal;"Enter"===a.key&&t.length>2&&e.mediaSearch()},e.handleClear=e.mediaSearch=Object(r.a)(n.a.mark(function a(){var t,i,r,s,l;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.searchVal,i=e.props.mediaType,r=localStorage.getItem("aid"),s=t.toLowerCase(),a.next=6,Object(k.e)(r,i,s);case 6:l=a.sent,e.setState({isSearching:!0,searchMedia:l[i],selectedMediaId:null});case 8:case"end":return a.stop()}},a)})),e.state={selectedMediaId:null,searchVal:"",searchMedia:{},isSearching:!1},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a){var t=this.state,i=t.searchVal,n=t.isSearching;e.isOpen&&!this.props.isOpen&&this.setState({selectedMediaId:null}),a.searchVal&&!i&&n&&this.setState({isSearching:!1})}},{key:"shouldComponentUpdate",value:function(e,a){return!(!this.props.isOpen&&!e.isOpen)}},{key:"render",value:function(){var e=this.props,a=e.mediaType,t=e.closeModal,i=e.isHotspot,n=e.isOpen,r=this.state,s=r.searchMedia,l=r.isSearching,c=a?Object(M.a)(a,!0):"",d="Select a ".concat(c,i?" from the media library to add to the hotspot":" from the media library to add to the stop"),h=b()({"hotspot-media":i}),o=b()({"search-media__container":l&&!Object.keys(s).length});return u.a.createElement(f.a,{className:"sidebar-library",closeModal:t,isOpen:n,shouldCloseOnOverlayClick:!0},u.a.createElement("div",{className:"sidebar-library-modal"},u.a.createElement("div",{className:"sidebar-library-top ".concat(h)},u.a.createElement("div",{className:"sidebar-library-text-wrapper"},u.a.createElement("h4",{className:"sidebar-library-heading-4"},"Media Library"),u.a.createElement("p",{className:"sidebar-library-description"},d)),u.a.createElement(O,{handleChange:this.handleChange,value:this.state.searchVal,onKeyUp:this.handleKeyUp,handleSubmit:this.mediaSearch,handleClear:this.handleClear,searchDisabled:this.state.searchVal.length<2,clearDisabled:!this.state.searchVal,name:"searchVal",isSearching:l})),u.a.createElement("div",{className:"inline-gallery sidebar-library-thumbs ".concat(o)},n&&this.renderThumbGallery())))}}]),t}(m.Component);a.default=C}}]);