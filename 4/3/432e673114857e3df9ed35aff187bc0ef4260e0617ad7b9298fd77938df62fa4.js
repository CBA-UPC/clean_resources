!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"},(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[5227],{95817:()=>{},57056:function(e,t,a){(function(e,t){"use strict";let a,n,r,i,s;class o{constructorpe(e,t){let a=t;if("string"==typeof e){if(void 0===a)return this.pipes[e];this.pipes[e]=a}if(e&&e.name){if((a=e).processor===this)return a;this.pipes[a.name]=a}return a.processor=this,a}process(e,t){let a,n,r=e;r.options=this.options();let i=t||e.pipe||"default";for(;i;)void 0!==r.nextAfterChildren&&(r.next=r.nextAfterChildren,r.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(r),n=r,a=i,i=null,r&&r.next&&(r=r.next,i=n.nextPipe||r.pipe||a);return r.hasResult?r.result:void 0}}class l{rocess(e){if(!this.processor)throw Error("add this pipe to a processor before using it");let t=this.debug,a=this.filters.length;for(let n=0;n<a;n++){let a=this.filters[n];if(t&&this.log(`filter: ${a.filterName}`),a(e),"object"==typeof e&&e.exiting){e.exiting=!1;break}}!e.next&&this.resultCheck&&this.resultCheck(e)}log(e){console.log(`[jsondiffpatch] ${this.name} pipe, ${e}`)}append(){return this.filters.push(...arguments),this}prepend(){return this.filters.unshift(...arguments),this}indexOf(e){if(!e)throw Error("a filter name is required");for(let t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw Error(`filter not found: ${e}`)}fter(e){let t=this.indexOf(e),a=Array.prototype.slice.call(arguments,1);if(!a.length)throw Error("a filter is required");return a.unshift(t+1,0),Array.prototype.splice.apply(this.filters,a),this}before(e){let t=this.indexOf(e),a=Array.prototype.slice.call(arguments,1);if(!a.length)throw Error("a filter is required");return a.unshift(t,0),Array.prototype.splice.apply(this.filters,a),this}replace(e){let t=this.indexOf(e),a=Array.prototype.slice.call(arguments,1);if(!a.length)throw Error("a filter is required");return a.unshift(t,1),Array.prototype.splice.apply(this.filters,a),this}removeouldHaveResult(e){if(!1===e){this.resultCheck=null;return}if(this.resultCheck)return;let t=this;return this.resultCheck=e=>{if(!e.hasResult){console.log(e);let a=Error(`${t.name} failed`);throw a.noResult=!0,a}},this}}class d{setResultitchToushlet c="function"==typeof Array.isArray?Array.isArray:e=>e instanceof Array;function u(e){if("object"!=typeof e)return e;if(null===e)return null;if(c(e))return e.map(u);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return function(e){let t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}(e);let t={};for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=u(e[a]));return t}class h extends d{constructor(e,t){super(),this.left=e,this.right=t,this.pipe="diff"}setResultclass g extends d{class p extends d{let m="function"==typeof Array.isArray?Array.isArray:f=function(e){if(e.left===e.right){e.setResult(void 0).exit();return}if(void 0===e.left){if("function"==typeof e.right)throw Error("functions are not supported");e.setResult([e.right]).exit();return}if(void 0===e.right){e.setResult([e.left,0,0]).exit();return}if("function"==typeof e.left||"function"==typeof e.right)throw Error("functions are not supported");if(e.leftType=null===e.left?"null":typeof e.left,e.rightType=null===e.right?"null":typeof e.right,e.leftType!==e.rightType||"boolean"===e.leftType||"number"===e.leftType||("object"===e.leftType&&(e.leftIsArray=m(e.left)),"object"===e.rightType&&(e.rightIsArray=m(e.right)),e.leftIsArray!==e.rightIsArray)){e.setResult([e.left,e.right]).exit();return}e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit())};f.filterName="trivial";let b=function(e){if(void 0===e.delta){e.setResult(e.left).exit();return}if(e.nested=!m(e.delta),!e.nested){if(1===e.delta.length){e.setResult(e.delta[0]).exit();return}if(2===e.delta.length){if(e.left instanceof RegExp){let t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t){e.setResult(new RegExp(t[1],t[2])).exit();return}}e.setResult(e.delta[1]).exit();return}3===e.delta.length&&0===e.delta[2]&&e.setResult(void 0).exit()}};b.filterName="trivial";let v=function(e){if(void 0===e.delta){e.setResult(e.delta).exit();return}if(e.nested=!m(e.delta),!e.nested){if(1===e.delta.length){e.setResult([e.delta[0],0,0]).exit();return}if(2===e.delta.length){e.setResult([e.delta[1],e.delta[0]]).exit();return}3===e.delta.length&&0===e.delta[2]&&e.setResult([e.delta[0]]).exit()}};function x(e){let t;if(!e||!e.children)return;let a=e.children.length,n=e.result;for(let r=0;r<a;r++)void 0!==(t=e.children[r]).result&&((n=n||{})[t.childName]=t.result);n&&e.leftIsArray&&(n._t="a"),e.setResult(n).exit()}function y(e){let t,a;if(e.leftIsArray||"object"!==e.leftType)return;let n=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(!n||n(t,e))&&(a=new h(e.left[t],e.right[t]),e.push(a,t));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(!n||n(t,e))&&void 0===e.left[t]&&(a=new h(void 0,e.right[t]),e.push(a,t));if(!e.children||0===e.children.length){e.setResult(void 0).exit();return}e.exit()}v.filterName="trivial",x.filterName="collectChildren",y.filterName="objects";let w=function(e){let t,a;if(e.nested&&!e.delta._t){for(t in e.delta)a=new g(e.left[t],e.delta[t]),e.push(a,t);e.exit()}};w.filterName="objects";let j=function(e){let t;if(!e||!e.children||e.delta._t)return;let a=e.children.length;for(let n=0;n<a;n++)t=e.children[n],Object.prototype.hasOwnProperty.call(e.left,t.childName)&&void 0===t.result?delete e.left[t.childName]:e.left[t.childName]!==t.result&&(e.left[t.childName]=t.result);e.setResult(e.left).exit()};j.filterName="collectChildren";let k=function(e){let t,a;if(e.nested&&!e.delta._t){for(t in e.delta)a=new p(e.delta[t]),e.push(a,t);e.exit()}};function N(e){let t;if(!e||!e.children||e.delta._t)return;let a=e.children.length,n={};for(let r=0;r<a;r++)n[(t=e.children[r]).childName]!==t.result&&(n[t.childName]=t.result);e.setResult(n).exit()}k.filterName="objects",N.filterName="collectChildren";let S=_=function(e,t,a,n){let r,i;let s=e.length,o=t.length,l=[s+1];for(r=0;r<s+1;r++)for(i=0,l[r]=[o+1];i<o+1;i++)l[r][i]=0;for(r=1,l.match=a;r<s+1;r++)for(i=1;i<o+1;i++)a(e,t,r-1,i-1,n)?l[r][i]=l[r-1][i-1]+1:l[r][i]=Math.max(l[r-1][i],l[r][i-1]);return l},T=function(e,t,a,n){let r=t.length,i=a.length,s={sequence:[],indices1:[],indices2:[]};for(;0!==r&&0!==i;)e.match(t,a,r-1,i-1,n)?(s.sequence.unshift(t[r-1]),s.indices1.unshift(r-1),s.indices2.unshift(i-1),--r,--i):e[r][i-1]>e[r-1][i]?--i:--r;return s};var C,P,A={get:function(e,t,a,n){let r=n||{},i=T(_(e,t,a||S,r),e,t,r);return"string"==typeof e&&"string"==typeof t&&(i.sequence=i.sequence.join("")),i}};let E="function"==typeof Array.isArray?Array.isArray:e=>e instanceof Array,B="function"==typeof Array.prototype.indexOf?(e,t)=>{let a=e.length;for(let n=0;n<a;n++)if(e[n]===t)return n;return -1};function D(e,t,a,n,r){let i,s;let o=e[a],l=t[n];if(o===l)return!0;if("object"!=typeof o||"object"!=typeof l)return!1;let d=r.objectHash;return d?("number"==typeof a?(r.hashCache1=r.hashCache1||[],void 0===(i=r.hashCache1[a])&&(r.hashCache1[a]=i=d(o,a))):i=d(o),void 0!==i&&("number"==typeof n?(r.hashCache2=r.hashCache2||[],void 0===(s=r.hashCache2[n])&&(r.hashCache2[n]=s=d(l,n))):s=d(l),void 0!==s&&i===s)):r.matchByPosition&&a===n}let Z=function(e){let t,a,n,r,i;if(!e.leftIsArray)return;let s={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},o=0,l=0,d=e.left,c=e.right,u=d.length,g=c.length;for(u>0&&g>0&&!s.objectHash&&"boolean"!=typeof s.matchByPosition&&(s.matchByPosition=!d,c,u,g));o<u&&o<g&&D(d,c,o,o,s);)t=o,r=new h(e.left[t],e.right[t]),e.push(r,t),o++;for(;l+o<u&&l+o<g&&D(d,c,u-1-l,g-1-l,s);)a=u-1-l,n=g-1-l,r=new h(e.left[a],e.right[n]),e.push(r,n),l++;if(o+l===u){if(u===g){e.setResult(void 0).exit();return}for(i=i||{_t:"a"},t=o;t<g-l;t++)i[t]=[c[t]];e.setResult(i).exit();return}if(o+l===g){for(i=i||{_t:"a"},t=o;t<u-l;t++)i[`_${t}`]=[d[t],0,0];e.setResult(i).exit();return}delete s.hashCache1,delete s.hashCache2;let p=d.slice(o,u-l),m=c.slice(o,g-l),f=A.get(p,m,D,s),b=[];for(i=i||{_t:"a"},t=o;t<u-l;t++)0>B(f.indices1,t-o)&&(i[`_${t}`]=[d[t],0,0],b.push(t));let v=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(v=!1);let x=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(x=!0);let y=b.length;for(t=o;t<g-l;t++){let l=B(f.indices2,t-o);if(l<0){let l=!1;if(v&&y>0){for(let d=0;d<y;d++)if(D(p,m,(a=b[d])-o,t-o,s)){i[`_${a}`].splice(1,2,t,3),x||(i[`_${a}`][0]=""),n=t,r=new h(e.left[a],e.right[n]),e.push(r,n),b.splice(d,1),l=!0;break}}l||(i[t]=[c[t]])}else a=f.indices1[l]+o,n=f.indices2[l]+o,r=new h(e.left[a],e.right[n]),e.push(r,n)}e.setResult(i).exit()};Z.filterName="arrays";let L=function(e){var t;let a,n,r;if(!e.nested||"a"!==e.delta._t)return;let i=e.delta,s=e.left,o=[],l=[],d=[];for(a in i)if("_t"!==a){if("_"===a[0]){if(0===i[a][2]||3===i[a][2])o.push(parseInt(a.slice(1),10));else throw Error(`only removal or move can be applied at original array indices, invalid diff type: ${i[a][2]}`)}else 1===i[a].length?l.push({index:parseInt(a,10),value:i[a][0]}):d.push({index:parseInt(a,10),delta:i[a]})}for(a=(o=o.sort().length-1;a>=0;a--){n=o[a];let e=i[`_${n}`],t=s.splice(n,1)[0];3===e[2]&&l.push({index:e[1],value:t})}let c=(l=l.sort((t="index",)).length;for(a=0;a<c;a++){let e=l[a];s.splice(e.index,0,e.value)}let u=d.length;if(u>0)for(a=0;a<u;a++){let t=d[a];r=new g(e.left[t.index],t.delta),e.push(r,t.index)}if(!e.children){e.setResult(e.left).exit();return}e.exit()};L.filterName="arrays";let M=function(e){let t;if(!e||!e.children||"a"!==e.delta._t)return;let a=e.children.length;for(let n=0;n<a;n++)t=e.children[n],e.left[t.childName]=t.result;e.setResult(e.left).exit()};M.filterName="arraysCollectChildren";let I=function(e){let t,a;if(!e.nested){3===e.delta[2]&&(e.newName=`_${e.delta[1]}`,e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),3]).exit());return}if("a"===e.delta._t){for(t in e.delta)"_t"!==t&&(a=new p(e.delta[t]),e.push(a,t));e.exit()}};I.filterName="arrays";let R=(e,t,a)=>{if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if(E(a)&&0===a[2])return`_${t}`;let n=+t;for(let a in e){let r=e[a];if(E(r)){if(3===r[2]){let e=parseInt(a.substr(1),10),i=r[1];if(i===+t)return e;e<=n&&i>n?n++:e>=n&&i<n&&n--}else 0===r[2]?parseInt(a.substr(1),10)<=n&&n++:1===r.length&&a<=n&&n--}}return n};function O(e){let t;if(!e||!e.children||"a"!==e.delta._t)return;let a=e.children.length,n={_t:"a"};for(let r=0;r<a;r++){let a=(t=e.children[r]).newName;void 0===a&&(a=R(e.delta,t.childName,t.result)),n[a]!==t.result&&(n[a]=t.result)}e.setResult(n).exit()}O.filterName="arraysCollectChildren";let F=F.filterName="dates";var U={exports:{}};(C=.Diff=C.prototype.diff_main=function(e,t,a,n){void 0===n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=n;if(null==e||null==t)throw Error("Null input. (diff_main)");if(e==t)return e?[new C.Diff(0,e)]:[];void 0===a&&(a=!0);var i=a,s=this.diff_commonPrefix(e,t),o=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var l=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var d=this.diff_compute_(e,t,i,r);return o&&d.unshift(new C.Diff(0,o)),l&&d.push(new C.Diff(0,l)),this.diff_cleanupMerge(d),d},C.prototype.diff_compute_=function(e,t,a,n){if(!e)return[new C.Diff(1,t)];if(!t)return[new C.Diff(-1,e)];var r,i=e.length>t.length?e:t,s=e.length>t.length?t:e,o=i.indexOf(s);if(-1!=o)return r=[new C.Diff(1,i.substring(0,o)),new C.Diff(0,s),new C.Diff(1,i.substring(o+s.length))],e.length>t.length&&(r[0][0]=r[2][0]=-1),r;if(1==s.length)return[new C.Diff(-1,e),new C.Diff(1,t)];var l=this.diff_halfMatch_(e,t);if(l){var d=l[0],c=l[1],u=l[2],h=l[3],g=l[4],p=this.diff_main(d,u,a,n),m=this.diff_main(c,h,a,n);return p.concat([new C.Diff(0,g)],m)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,n):this.diff_bisect_(e,t,n)},C.prototype.diff_lineMode_=function(e,t,a){var n=this.diff_linesToChars_(e,t);e=n.chars1,t=n.chars2;var r=n.lineArray,i=this.diff_main(e,t,!1,a);this.diff_charsToLines_(i,r),this.diff_cleanupSemantic(i),i.push(new C.Diff(0,""));for(var s=0,o=0,l=0,d="",c="";s<i.length;){switch(i[s][0]){case 1:l++,c+=i[s][1];break;case -1:o++,d+=i[s][1];break;case 0:if(o>=1&&l>=1){i.splice(s-o-l,o+l),s=s-o-l;for(var u=this.diff_main(d,c,!1,a),h=u.length-1;h>=0;h--)i.splice(s,0,u[h]);s+=u.length}l=0,o=0,d="",c=""}s++}return i.pop(),i},C.prototype.diff_bisect_=function(e,t,a){for(var n=e.length,r=t.length,i=Math.ceil((n+r)/2),s=2*i,o=Array(s),l=Array(s),d=0;d<s;d++)o[d]=-1,l[d]=-1;o[i+1]=0,l[i+1]=0;for(var c=n-r,u=c%2!=0,h=0,g=0,p=0,m=0,f=0;f<i&&!(new Date().getTime()>a);f++){for(var b=-f+h;b<=f-g;b+=2){for(var v,x=i+b,y=(v=b==-f||b!=f&&o[x-1]<o[x+1]?o[x+1]:o[x-1]+1)-b;v<n&&y<r&&e.charAt(v)==t.charAt(y);)v++,y++;if(o[x]=v,v>n)g+=2;else if(y>r)h+=2;else if(u){var w=i+c-b;if(w>=0&&w<s&&-1!=l[w]){var j=n-l[w];if(v>=j)return this.diff_bisectSplit_(e,t,v,y,a)}}}for(var k=-f+p;k<=f-m;k+=2){for(var j,w=i+k,N=(j=k==-f||k!=f&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-k;j<n&&N<r&&e.charAt(n-j-1)==t.charAt(r-N-1);)j++,N++;if(l[w]=j,j>n)m+=2;else if(N>r)p+=2;else if(!u){var x=i+c-k;if(x>=0&&x<s&&-1!=o[x]){var v=o[x],y=i+v-x;if(v>=(j=n-j))return this.diff_bisectSplit_(e,t,v,y,a)}}}}return[new C.Diff(-1,e),new C.Diff(1,t)]},C.prototype.diff_bisectSplit_=C.prototype.diff_linesToChars_=C.prototype.diff_charsToLines_=C.prototype.diff_commonPrefix=C.prototype.diff_commonSuffix=C.prototype.diff_commonOverlap_=function(e,t){var a=e.length,n=t.length;if(0==a||0==n)return 0;a>n?e=e.substring(a-n):a<n&&(t=t.substring(0,a));var r=Math.min(a,n);if(e==t)return r;for(var i=0,s=1;;){var o=e.substring(r-s),l=t.indexOf(o);if(-1==l)return i;s+=l,(0==l||e.substring(r-s)==t.substring(0,s))&&(i=s,s++)}},C.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var a,n,r,i,s,o=e.length>t.length?e:t,l=e.length>t.length?t:e;if(o.length<4||2*l.length<o.length)return null;var d=this;ar u=c(o,l,Math.ceil(o.length/4)),h=c(o,l,Math.ceil(o.length/2));return u||h?(a=h?u&&u[4].length>h[4].length?u:h:u,e.length>t.length?(n=a[0],r=a[1],i=a[2],s=a[3]):(i=a[0],s=a[1],n=a[2],r=a[3]),[n,r,i,s,a[4]]):null},C.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],n=0,r=null,i=0,s=0,o=0,l=0,d=0;i<e.length;)0==e[i][0]?(a[n++]=i,s=l,o=d,l=0,d=0,r=e[i][1]):(1==e[i][0]?l+=e[i][1].length:d+=e[i][1].length,r&&r.length<=Math.max(s,o)&&r.length<=Math.max(l,d)&&(e.splice(a[n-1],0,new C.Diff(-1,r)),e[a[n-1]+1][0]=1,n--,i=--n>0?a[n-1]:-1,s=0,o=0,l=0,d=0,r=null,t=!0)),i++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),i=1;i<e.length;){if(-1==e[i-1][0]&&1==e[i][0]){var c=e[i-1][1],u=e[i][1],h=this.diff_commonOverlap_(c,u),g=this.diff_commonOverlap_(u,c);h>=g?(h>=c.length/2||h>=u.length/2)&&(e.splice(i,0,new C.Diff(0,u.substring(0,h))),e[i-1][1]=c.substring(0,c.length-h),e[i+1][1]=u.substring(h),i++):(g>=c.length/2||g>=u.length/2)&&(e.splice(i,0,new C.Diff(0,c.substring(0,g))),e[i-1][0]=1,e[i-1][1]=u.substring(0,u.length-g),e[i+1][0]=-1,e[i+1][1]=c.substring(g),i++),i++}i++}},C.prototype.diff_cleanupSemanticLossless=C.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,C.whitespaceRegex_=/\s/,C.linebreakRegex_=/[\r\n]/,C.blanklineEndRegex_=/\n\r?\n$/,C.blanklineStartRegex_=/^\r?\n\r?\n/,C.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],n=0,r=null,i=0,s=!1,o=!1,l=!1,d=!1;i<e.length;)0==e[i][0]?(e[i][1].length<this.Diff_EditCost&&(l||d)?(a[n++]=i,s=l,o=d,r=e[i][1]):(n=0,r=null),l=d=!1):(-1==e[i][0]?d=!0:l=!0,r&&(s&&o&&l&&d||r.length<this.Diff_EditCost/2&&s+o+l+d==3)&&(e.splice(a[n-1],0,new C.Diff(-1,r)),e[a[n-1]+1][0]=1,n--,r=null,s&&o?(l=d=!0,n=0):(i=--n>0?a[n-1]:-1,l=d=!1),t=!0)),i++;t&&this.diff_cleanupMerge(e)},C.prototype.diff_cleanupMerge=function(e){e.push(new C.Diff(0,""));for(var t,a=0,n=0,r=0,i="",s="";a<e.length;)switch(e[a][0]){case 1:r++,s+=e[a][1],a++;break;case -1:n++,i+=e[a][1],a++;break;case 0:n+r>1?(0!==n&&0!==r&&(0!==(t=this.diff_commonPrefix(s,i))&&(a-n-r>0&&0==e[a-n-r-1][0]?e[a-n-r-1][1]+=s.substring(0,t):(e.splice(0,0,new C.Diff(0,s.substring(0,t))),a++),s=s.substring(t),i=i.substring(t)),0!==(t=this.diff_commonSuffix(s,i))&&(e[a][1]=s.substring(s.length-t)+e[a][1],s=s.substring(0,s.length-t),i=i.substring(0,i.length-t))),a-=n+r,e.splice(a,n+r),i.length&&(e.splice(a,0,new C.Diff(-1,i)),a++),s.length&&(e.splice(a,0,new C.Diff(1,s)),a++),a++):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,r=0,n=0,i="",s=""}""===e[e.length-1][1]&&e.pop();var o=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),o=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),o=!0)),a++;o&&this.diff_cleanupMerge(e)},C.prototype.diff_xIndex=C.prototype.diff_prettyHtml=C.prototype.diff_text1=C.prototype.diff_text2=C.prototype.diff_levenshtein=function(e){for(var t=0,a=0,n=0,r=0;r<e.length;r++){var i=e[r][0],s=e[r][1];switch(i){case 1:a+=s.length;break;case -1:n+=s.length;break;case 0:t+=Math.max(a,n),a=0,n=0}}return t+Math.max(a,n)},C.prototype.diff_toDelta=C.prototype.diff_fromDelta=function(e,t){for(var a=[],n=0,r=0,i=t.split(/\t/g),s=0;s<i.length;s++){var o=i[s].substring(1);switch(i[s].charAt(0)){case"+":try{a[n++]=new C.Diff(1,decodeURI(o))}catch(e){throw Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var l=parseInt(o,10);if(isNaN(l)||l<0)throw Error("Invalid number in diff_fromDelta: "+o);var d=e.substring(r,r+=l);"="==i[s].charAt(0)?a[n++]=new C.Diff(0,d):a[n++]=new C.Diff(-1,d);break;default:if(i[s])throw Error("Invalid diff operation in diff_fromDelta: "+i[s])}}if(r!=e.length)throw Error("Delta length ("+r+") does not equal source text length ("+e.length+").");return a},C.prototype.match_main=C.prototype.match_bitap_=function(e,t,a){if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var n,r,i,s=this.match_alphabet_(t),o=this;ar d=this.Match_Threshold,c=e.indexOf(t,a);-1!=c&&(d=Math.min(l(0,c),d),-1!=(c=e.lastIndexOf(t,a+t.length))&&(d=Math.min(l(0,c),d)));var u=1<<t.length-1;c=-1;for(var h=t.length+e.length,g=0;g<t.length;g++){for(n=0,r=h;n<r;)l(g,a+r)<=d?n=r:h=r,r=Math.floor((h-n)/2+n);h=r;var p=Math.max(1,a-r+1),m=Math.min(a+r,e.length)+t.length,f=Array(m+2);f[m+1]=(1<<g)-1;for(var b=m;b>=p;b--){var v=s[e.charAt(b-1)];if(0===g?f[b]=(f[b+1]<<1|1)&v:f[b]=(f[b+1]<<1|1)&v|((i[b+1]|i[b])<<1|1)|i[b+1],f[b]&u){var x=l(g,b-1);if(x<=d){if(d=x,(c=b-1)>a)p=Math.max(1,2*a-c);else break}}}if(l(g+1,a)>d)break;i=f}return c},C.prototype.match_alphabet_=function(e){for(var t={},a=0;a<e.length;a++)t[e.charAt(a)]=0;for(var a=0;a<e.length;a++)t[e.charAt(a)]|=1<<e.length-a-1;return t},C.prototype.patch_addContext_=C.prototype.patch_make=function(e,t,a){if("string"==typeof e&&"string"==typeof t&&void 0===a)n=e,(r=this.diff_main(n,t,!0)).length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)r=e,n=this.diff_text1(r);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)n=e,r=t;else if("string"==typeof e&&"string"==typeof t&&a&&"object"==typeof a)n=e,r=a;else throw Error("Unknown call format to patch_make.");if(0===r.length)return[];for(var n,r,i=[],s=new C.patch_obj,o=0,l=0,d=0,c=n,u=n,h=0;h<r.length;h++){var g=r[h][0],p=r[h][1];switch(o||0===g||(s.start1=l,s.start2=d),g){case 1:s.diffs[o++]=r[h],s.length2+=p.length,u=u.substring(0,d)+p+u.substring(d);break;case -1:s.length1+=p.length,s.diffs[o++]=r[h],u=u.substring(0,d)+u.substring(d+p.length);break;case 0:p.length<=2*this.Patch_Margin&&o&&r.length!=h+1?(s.diffs[o++]=r[h],s.length1+=p.length,s.length2+=p.length):p.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(s,c),i.push(s),s=new C.patch_obj,o=0,c=u,l=d)}1!==g&&(l+=p.length),-1!==g&&(d+=p.length)}return o&&(this.patch_addContext_(s,c),i.push(s)),i},C.prototype.patch_deepCopy=C.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);t=a+t+a,this.patch_splitMax(e);for(var n=0,r=[],i=0;i<e.length;i++){var s=e[i].start2+n,o=this.diff_text1(e[i].diffs),l=-1;if(o.length>this.Match_MaxBits?-1!=(c=this.match_main(t,o.substring(0,this.Match_MaxBits),s))&&(-1==(l=this.match_main(t,o.substring(o.length-this.Match_MaxBits),s+o.length-this.Match_MaxBits))||c>=l)&&(c=-1):c=this.match_main(t,o,s),-1==c)r[i]=!1,n-=e[i].length2-e[i].length1;else if(r[i]=!0,n=c-s,u=-1==l?t.substring(c,c+o.length):t.substring(c,l+this.Match_MaxBits),o==u)t=t.substring(0,c)+this.diff_text2(e[i].diffs)+t.substring(c+o.length);else{var d=this.diff_main(o,u,!1);if(o.length>this.Match_MaxBits&&this.diff_levenshtein(d)/o.length>this.Patch_DeleteThreshold)r[i]=!1;else{this.diff_cleanupSemanticLossless(d);for(var c,u,h,g=0,p=0;p<e[i].diffs.length;p++){var m=e[i].diffs[p];0!==m[0]&&(h=this.diff_xIndex(d,g)),1===m[0]?t=t.substring(0,c+h)+m[1]+t.substring(c+h):-1===m[0]&&(t=t.substring(0,c+h)+t.substring(c+this.diff_xIndex(d,g+m[1].length))),-1!==m[0]&&(g+=m[1].length)}}}}return[t=t.substring(a.length,t.length-a.length),r]},C.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,a="",n=1;n<=t;n++)a+=String.fromCharCode(n);for(var n=0;n<e.length;n++)e[n].start1+=t,e[n].start2+=t;var r=e[0],i=r.diffs;if(0==i.length||0!=i[0][0])i.unshift(new C.Diff(0,a)),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>i[0][1].length){var s=t-i[0][1].length;i[0][1]=a.substring(i[0][1].length)+i[0][1],r.start1-=s,r.start2-=s,r.length1+=s,r.length2+=s}if(0==(i=(r=e[e.length-1]).diffs).length||0!=i[i.length-1][0])i.push(new C.Diff(0,a)),r.length1+=t,r.length2+=t;else if(t>i[i.length-1][1].length){var s=t-i[i.length-1][1].length;i[i.length-1][1]+=a.substring(0,s),r.length1+=s,r.length2+=s}return a},C.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var n=e[a];e.splice(a--,1);for(var r=n.start1,i=n.start2,s="";0!==n.diffs.length;){var o=new C.patch_obj,l=!0;for(o.start1=r-s.length,o.start2=i-s.length,""!==s&&(o.length1=o.length2=s.length,o.diffs.push(new C.Diff(0,s)));0!==n.diffs.length&&o.length1<t-this.Patch_Margin;){var d=n.diffs[0][0],c=n.diffs[0][1];1===d?(o.length2+=c.length,i+=c.length,o.diffs.push(n.diffs.shift()),l=!1):-1===d&&1==o.diffs.length&&0==o.diffs[0][0]&&c.length>2*t?(o.length1+=c.length,r+=c.length,l=!1,o.diffs.push(new C.Diff(d,c)),n.diffs.shift()):(c=c.substring(0,t-o.length1-this.Patch_Margin),o.length1+=c.length,r+=c.length,0===d?(o.length2+=c.length,i+=c.length):l=!1,o.diffs.push(new C.Diff(d,c)),c==n.diffs[0][1]?n.diffs.shift():n.diffs[0][1]=n.diffs[0][1].substring(c.length))}s=(s=this.diff_text2(o.diffs)).substring(s.length-this.Patch_Margin);var u=this.diff_text1(n.diffs).substring(0,this.Patch_Margin);""!==u&&(o.length1+=u.length,o.length2+=u.length,0!==o.diffs.length&&0===o.diffs[o.diffs.length-1][0]?o.diffs[o.diffs.length-1][1]+=u:o.diffs.push(new C.Diff(0,u))),l||e.splice(++a,0,o)}}},C.prototype.patch_toText=C.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),n=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<a.length;){var i=a[n].match(r);if(!i)throw Error("Invalid patch string: "+a[n]);var s=new C.patch_obj;for(t.push(s),s.start1=parseInt(i[1],10),""===i[2]?(s.start1--,s.length1=1):"0"==i[2]?s.length1=0:(s.start1--,s.length1=parseInt(i[2],10)),s.start2=parseInt(i[3],10),""===i[4]?(s.start2--,s.length2=1):"0"==i[4]?s.length2=0:(s.start2--,s.length2=parseInt(i[4],10)),n++;n<a.length;){var o=a[n].charAt(0);try{var l=decodeURI(a[n].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+l)}if("-"==o)s.diffs.push(new C.Diff(-1,l));else if("+"==o)s.diffs.push(new C.Diff(1,l));else if(" "==o)s.diffs.push(new C.Diff(0,l));else if("@"==o)break;else if(""===o);else throw Error('Invalid patch mode "'+o+'" in: '+l);n++}}return t},C.patch_obj=C.patch_obj.prototype.toString=function(){e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;for(var e,t,a=["@@ -"+e+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case -1:t="-";break;case 0:t=" "}a[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return a.join("").replace(/%20/g," ")},U.exports=C,U.exports.diff_match_patch=C,U.exports.DIFF_DELETE=-1,U.exports.DIFF_INSERT=1,U.exports.DIFF_EQUAL=0;var $=(P=U.exports)&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P;let z=null,G=function(e){if(!z){let t;if("undefined"!=typeof diff_match_patch)t="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if($)try{t=$&&new $}catch(e){t=null}if(!t){if(!e)return null;let t=Error("text diff_match_patch library not found");throw t.diff_match_patch_not_found=!0,t}z={diff:patch:}return z},W=function(e){if("string"!==e.leftType)return;let t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||60;if(e.left.length<t||e.right.length<t){e.setResult([e.left,e.right]).exit();return}let a=G();if(!a){e.setResult([e.left,e.right]).exit();return}let n=a.diff;e.setResult([n(e.left,e.right),0,2]).exit()};W.filterName="texts";let H=function(e){if(e.nested||2!==e.delta[2])return;let t=G(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()};H.filterName="texts";let V=function(e){let t,a,n,r;let i=null,s=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,o=e.split("\n");for(t=0,a=o.length;t<a;t++){let e=(n=o[t]).slice(0,1);"@"===e?(i=s.exec(n),o[t]="@@ -"+i[3]+","+i[4]+" +"+i[1]+","+i[2]+" @@"):"+"===e?(o[t]="-"+o[t].slice(1),"+"===o[t-1].slice(0,1)&&(r=o[t],o[t]=o[t-1],o[t-1]=r)):"-"===e&&(o[t]="+"+o[t].slice(1))}return o.join("\n")},q=q.filterName="texts";class K{constructor(e){this.processor=new o(e),this.processor.pipe(new l("diff").append(x,f,F,W,y,Z).shouldHaveResult()),this.processor.pipe(new l("patch").append(j,M,b,H,w,L).shouldHaveResult()),this.processor.pipe(new l("reverse").append(N,O,v,q,k,I).shouldHaveResult())}iff(e,t){return this.processor.process(new h(e,t))}patcheverset Y="function"==typeof Array.isArray?Array.isArray:Q="function"==typeof Object.keys?J=e=>"_"===e.substr(0,1)?e.slice(1):e,X=e=>"_t"===e?-1:"_"===e.substr(0,1)?parseInt(e.slice(1),10):parseInt(e,10)+.1,ee=class et{formatrepareContext(e){e.buffer=[],e.out=function(){this.buffer.push(...arguments)}}typeFormattterNotFound(e,t){throw Error(`cannot format delta type: ${t}`)}inalize(e){let{buffer:t}=e;if(Y(t))return t.join("")}recurse(e,t,a,n,r,i,s){let o=t&&i?i.value:a;if(void 0===t&&void 0===n)return;let l=this.getDeltaType(t,i),d="node"===l?"a"===t._t?"array":"object":"";void 0!==n?this.nodeBegin(e,n,r,l,d,s):this.rootBegin(e,l,d);try{(this[`format_${l}`]||this.typeFormattterNotFound(e,l)).call(this,e,t,o,n,r,i)}catch(a){this.typeFormattterErrorFormatter(e,a,t,o,n,r,i),"undefined"!=typeof console&&console.error&&console.error(a.stack)}void 0!==n?this.nodeEnd(e,n,r,l,d,s):this.rootEnd(e,l,d)}formatDeltaChildren(e,t,a){let n=this;this.forEachDeltaKey(t,a,(r,i,s,o)=>{n.recurse(e,t[r],a?a[i]:void 0,r,i,s,o)})}forEachDeltaKey(e,t,a){let n;let r=Q(e),i="a"===e._t,s={};if(void 0!==t)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0===e[n]&&(!i||void 0===e[`_${n}`])&&r.push(n);for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let a=e[n];Y(a)&&3===a[2]&&(s[a[1].toString()]={key:n,value:t&&t[parseInt(n.substr(1))]},!1!==this.includeMoveDestinations&&void 0===t&&void 0===e[a[1]]&&r.push(a[1].toString()))}i?r.sort(ee):r.sort();for(let e=0,t=r.length;e<t;e++){let n=r[e];if(i&&"_t"===n)continue;let o=i?"number"==typeof n?n:parseInt(J(n),10):n,l=e===t-1;a(n,o,s[o],l)}}getDeltaType(e,t){if(void 0===e)return void 0!==t?"movedestination":"unchanged";if(Y(e)){if(1===e.length)return"added";if(2===e.length)return"modified";if(3===e.length&&0===e[2])return"deleted";if(3===e.length&&2===e[2])return"textdiff";if(3===e.length&&3===e[2])return"moved"}else if("object"==typeof e)return"node";return"unknown"}parseTextDiff(e){let t=[],a=e.split("\n@@ ");for(let e=0,n=a.length;e<n;e++){let n=a[e],r={pieces:[]},i=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(n).slice(1);r.location={line:i[0],chr:i[1]};let s=n.split("\n").slice(1);for(let e=0,t=s.length;e<t;e++){let t=s[e];if(!t.length)continue;let a={type:"context"};"+"===t.substr(0,1)?a.type="added":"-"===t.substr(0,1)&&(a.type="deleted"),a.text=t.slice(1),r.pieces.push(a)}t.push(r)}return t}}var ea=Object.freeze({__proto__:null,default:et});class en extends et{typeFormattterErrorFormatter(e,t){e.out(`<pre class="jsondiffpatch-error">${t}</pre>`)}formatValue(e,t){e.out(`<pre>${er(JSON.stringify(t,null,2))}</pre>`)}formatTextDiffString(e,t){let a=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(let t=0,n=a.length;t<n;t++){let n=a[t];e.out(`<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">${n.location.line}</span><span class="jsondiffpatch-textdiff-char">${n.location.chr}</span></div><div class="jsondiffpatch-textdiff-line">`);let r=n.pieces;for(let t=0,a=r.length;t<a;t++){let a=r[t];e.out(`<span class="jsondiffpatch-textdiff-${a.type}">${er(decodeURI(a.text))}</span>`)}e.out("</div></li>")}e.out("</ul>")}rootBegin(e,t,a){let n=`jsondiffpatch-${t}${a?` jsondiffpatch-child-node-type-${a}`:""}`;e.out(`<div class="jsondiffpatch-delta ${n}">`)}rootEnd(e){e.out(`</div>${e.hasArrows?`<script type="text/javascript">setTimeout(${ei.toString()},10);</script>`:""}`)}nodeBegin(e,t,a,n,r){let i=`jsondiffpatch-${n}${r?` jsondiffpatch-child-node-type-${r}`:""}`;e.out(`<li class="${i}" data-key="${a}"><div class="jsondiffpatch-property-name">${a}</div>`)}ormat_unchanged(e,t,a){void 0!==a&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,a),e.out("</div>"))}format_movedestinationormat_node(e,t,a){let n="a"===t._t?"array":"object";e.out(`<ul class="jsondiffpatch-node jsondiffpatch-node-type-${n}">`),this.formatDeltaChildren(e,t,a),e.out("</ul>")}format_added(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}format_modifiedormat_deleted(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}format_moved(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out(`</div><div class="jsondiffpatch-moved-destination">${t[1]}</div>`),e.out(`<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">
          <svg width="30" height="60" style="position: absolute; display: none;">
          <defs>
              <marker id="markerArrow" markerWidth="8" markerHeight="8"
                 refx="2" refy="4"
                     orient="auto" markerUnits="userSpaceOnUse">
                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />
              </marker>
          </defs>
          <path d="M30,0 Q-10,25 26,50"
            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"
          ></path>
          </svg>
      </div>`),e.hasArrows=!0}format_textdifffunction er(e){let t=e,a=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]];for(let e=0;e<a.length;e++)t=t.replace(a[e][0],a[e][1]);return t}let ei=function(e){let t=a=(e,t)=>{let{children:a}=e;for(let e=0,n=a.length;e<n;e++)t(a[e],e)};((e,t,a)=>{let n=e.querySelectorAll(t);for(let e=0,t=n.length;e<t;e++)a(n[e])})(e||document,".jsondiffpatch-arrow",e=>{let n,{parentNode:r,children:i,style:s}=e,o=i[0],l=o.children[1];o.style.display="none";let d=t(r.querySelector(".jsondiffpatch-moved-destination"));if(a(r.parentNode,e=>{e.getAttribute("data-key")===d&&(n=e)}),n)try{let e=n.offsetTop-r.offsetTop;o.setAttribute("height",Math.abs(e)+6),s.top=`${-8+(e>0?0:e)}px`;let t=e>0?`M30,0 Q-10,${Math.round(e/2)} 26,${e-4}`:`M30,${-e} Q-10,${Math.round(-e/2)} 26,4`;l.setAttribute("d",t),o.style.display=""}catch(e){}})},es=(e,t,a)=>{let n=t||document.body,r="jsondiffpatch-unchanged-",i={showing:`${r}showing`,hiding:`${r}hiding`,visible:`${r}visible`,hidden:`${r}hidden`},s=n.classList;if(!s)return;if(!a){s.remove(i.showing),s.remove(i.hiding),s.remove(i.visible),s.remove(i.hidden),!1===e&&s.add(i.hidden);return}!1===e?(s.remove(i.showing),s.add(i.visible),setTimeout(10)):(s.remove(i.hiding),s.add(i.showing),s.remove(i.hidden));let o=setInterval(()=>{ei(n)},100);setTimeout(()=>{s.remove(i.showing),s.remove(i.hiding),!1===e?(s.add(i.hidden),s.remove(i.visible)):(s.add(i.visible),s.remove(i.hidden)),setTimeout(a+400)},a)};var eo=Object.freeze({__proto__:null,default:en,format:function(e,t){return a||(a=new en),a.format(e,t)},hideUnchanged:showUnchanged:es});class el extends et{constructor(){super(),this.includeMoveDestinations=!1}prepareContext(e){super.prepareContext(e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=Array(this.indentLevel+1).join("&nbsp;&nbsp;")},e.row=(t,a)=>{e.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),e.out(e.indentPad),e.out('</pre><pre style="display: inline-block">'),e.out(t),e.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),e.out(a),e.out("</div></td></tr>")}}typeFormattterErrorFormatter(e,t){e.row("",`<pre class="jsondiffpatch-error">${t}</pre>`)}formatTextDiffString(e,t){let a=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(let t=0,n=a.length;t<n;t++){let n=a[t];e.out(`<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">${n.location.line}</span><span class="jsondiffpatch-textdiff-char">${n.location.chr}</span></div><div class="jsondiffpatch-textdiff-line">`);let r=n.pieces;for(let t=0,a=r.length;t<a;t++){let a=r[t];e.out(`<span class="jsondiffpatch-textdiff-${a.type}">${a.text}</span>`)}e.out("</div></li>")}e.out("</ul>")}rootBeginootEndodeBegin(e,t,a,n,r){e.row(`&quot;${t}&quot;: {`),"node"===n&&e.indent(),"array"===r&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}nodeEnd(e,t,a,n,r,i){"node"===n&&e.indent(-1),e.row(`}${i?"":","}`)}format_unchanged(){}format_movedestination(){}format_node(e,t,a){this.formatDeltaChildren(e,t,a)}}let ed=e=>`<pre style="display:inline-block">&quot;${e}&quot;</pre>`,ec={added(e,t,a,n){let r=" <pre>([newValue])</pre>";return void 0===n?`new value${r}`:"number"==typeof n?`insert at index ${n}${r}`:`add property ${ed(n)}${r}`},modified(e,t,a,n){let r=" <pre>([previousValue, newValue])</pre>";return void 0===n?`modify value${r}`:"number"==typeof n?`modify at index ${n}${r}`:`modify property ${ed(n)}${r}`},deleted(e,t,a,n){let r=" <pre>([previousValue, 0, 0])</pre>";return void 0===n?`delete value${r}`:"number"==typeof n?`remove index ${n}${r}`:`delete property ${ed(n)}${r}`},moved:(e,t,a,n)=>`move from <span title="(position to remove at original state)">index ${n}</span> to <span title="(position to insert at final state)">index ${e[1]}</span>`,textdiff(e,t,a,n){let r=void 0===n?"":"number"==typeof n?` at index ${n}`:` at property ${ed(n)}`;return`text diff${r}, format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>`}},eu=el.prototype.format_added=eu,el.prototype.format_modified=eu,el.prototype.format_deleted=eu,el.prototype.format_moved=eu,el.prototype.format_textdiff=eu;var eh=Object.freeze({__proto__:null,default:el,format:);class eg extends et{constructor(){super(),this.includeMoveDestinations=!0}prepareContext(e){super.prepareContext(e),e.result=[],e.path=[],e.pushCurrentOp=function(e){let{op:t,value:a}=e,n={op:t,path:this.currentPath()};void 0!==a&&(n.value=a),this.result.push(n)},e.pushMoveOp=function(e){let t=this.currentPath();this.result.push({op:"move",from:t,path:this.toPath(e)})},e.currentPath=e.toPath=function(e){let t=this.path.slice();return t[t.length-1]=e,`/${t.join("/")}`}}typeFormattterErrorFormatter(e,t){e.out(`[ERROR] ${t}`)}rootBegin(){}rootEnd(){}nodeBegin(e,t,a){let{path:n}=e;n.push(a)}nodeEnd(e){let{path:t}=e;t.pop()}format_unchanged(){}ormat_node(e,t,a){this.formatDeltaChildren(e,t,a)}format_added(e,t){e.pushCurrentOp({op:"add",value:t[0]})}format_modified(e,t){e.pushCurrentOp({op:"replace",value:t[1]})}format_deletedormat_movedrmatlet ep=em=ef=(e,t)=>{let a=parseInt(e,10),n=parseInt(t,10);return isNaN(a)||isNaN(n)?0:n-a},eb=e=>em(e,(e,t)=>{let a=e.path.split("/"),n=t.path.split("/");return a.length!==n.length?a.length-n.length:ef(ep(a),ep(n))}),ev=(e,t)=>{let a=Array(t.length+1).fill().map(;return e.map(e=>{let a=t.map(.indexOf(!0);return a<0&&(a=t.length),{item:e,position:a}}).reduce((e,t)=>(e[t.position].push(t.item),e),a)},ex=e=>{let{op:t}=e;return"move"===t},ey=ew=e=>{let[t,a,n]=ev(e,[ex,ey]);return[...eb(a),...t,...n]},ej=(e,t)=>(r||(r=new eg),ew(r.format(e,t)));var ek=Object.freeze({__proto__:null,default:eg,format:ej,log:partitionOps:ev});et eS={added:eN("green"),deleted:eN("red"),movedestination:eN("gray"),moved:eN("yellow"),unchanged:eN("gray"),error:eN("white.bgRed"),textDiffLine:eN("gray")};class e_ extends et{repareContext(e){super.prepareContext(e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=Array(this.indentLevel+1).join("  "),this.outLine()},e.outLine=function(){this.buffer.push(`
${this.indentPad||""}`)},e.out=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e=0,a=t.length;e<a;e++){let a=t[e].split("\n").join(`
${this.indentPad||""}`);this.color&&this.color[0]&&(a=this.color[0](a)),this.buffer.push(a)}},e.pushColor=e.popColor=typeFormattterErrorFormatter(e,t){e.pushColor(eS.error),e.out(`[ERROR]${t}`),e.popColor()}formatValueormatTextDiffString(e,t){let a=this.parseTextDiff(t);e.indent();for(let t=0,n=a.length;t<n;t++){let r=a[t];e.pushColor(eS.textDiffLine),e.out(`${r.location.line},${r.location.chr} `),e.popColor();let i=r.pieces;for(let t=0,a=i.length;t<a;t++){let a=i[t];e.pushColor(eS[a.type]),e.out(a.text),e.popColor()}t<n-1&&e.outLine()}e.indent(-1)}rootBeginootEndodeBegin(e,t,a,n,r){e.pushColor(eS[n]),e.out(`${a}: `),"node"===n&&(e.out("array"===r?"[":"{"),e.indent())}nodeEnd(e,t,a,n,r,i){"node"===n&&(e.indent(-1),e.out("array"===r?"]":`}${i?"":","}`)),i||e.outLine(),e.popColor()}format_unchanged(e,t,a){void 0!==a&&this.formatValue(e,a)}format_movedestinationrmat_added(e,t){this.formatValue(e,t[0])}format_modifiedormat_deleted(e,t){this.formatValue(e,t[0])}format_moved(e,t){e.out(`==> ${t[1]}`)}format_textdifflet eT=(e,t)=>(i||(i=new e_),i.format(e,t));var eC=Object.freeze({__proto__:null,default:e_,format:eT,log:),eP=Object.freeze({__proto__:null,annotated:eh,base:ea,console:eC,html:eo,jsonpatch:ek});e.DiffPatcher=K,e.clone=function(){return s||(s=new K),s.clone.apply(s,arguments)},e.console=eC,e.create=e.dateReviver=function(e,t){let a;return"string"==typeof t&&(a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(t))?new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6],+(a[7]||0))):t},e.diff=function(){return s||(s=new K),s.diff.apply(s,arguments)},e.formatters=eP,e.patch=function(){return s||(s=new K),s.patch.apply(s,arguments)},e.reverse=function(){return s||(s=new K),s.reverse.apply(s,arguments)},e.unpatch=)(t,a(95817))},95469:(e,t,a)=>{"use strict";a.d(t,{_:()=>v});var n=a(54138),r=a.n(n),i=a(5754),s=a.n(i),o=a(78994),l=a(90127),d=a(45546),c=a(93853),u=a(24755),h=a(54382),g=a(2629),p=e=>{var t=e.wrapperClassName,a=e.backgroundColor,n=e.onClick,i=()=>null==n?void 0:n();return(0,g.jsxs)("span",{className:s()("lEl3a",t),onClick:i,onKeyDown:e=>{e.key!==c.SV.Enter||e.nativeEvent.isComposing||i()},tabIndex:0,role:"button",style:r()({},a&&{background:a}),children:[(0,g.jsx)(u.Z,{}),(0,g.jsx)("span",{className:"R8cCR",children:(0,g.jsx)(h.ZP,{comment:"[TumblrMart] Label on a button that will allow folks to add badges to their profile.",children:"Add badges"})})]})},m=a(22183),f=e=>{var t=e.children,a=e.wrapperClassName,n=e.onClick,r=return(0,g.jsxs)("span",{className:s()("Rb2DY",a),onClick:r,onKeyDown:e=>{e.key!==c.SV.Enter||e.nativeEvent.isComposing||r()},tabIndex:0,role:"button",children:[t,(0,g.jsx)("span",{className:"MD1SL",children:(0,g.jsx)(m.Z,{size:{width:14,height:14}})})]})},b=a(25078),v=e=>{var t,a=e.tumblrmartAccessories,n=e.canShowBadges,i=e.wrapperClassName,c=e.backgroundColor,u=e.blogName,h=e.canEdit,m=e.isHoverCardDisabled,v=e.unwrapped,x=e.badgeClassName,y=(0,o.s0)(),w=()=>{u&&h&&y((0,l.cB)(u))};if(!(null!=a&&null!==(t=a.badges)&&void 0!==t&&t.length)||!n)return h?(0,g.jsx)(p,{wrapperClassName:b.Z.addWrapper,backgroundColor:c,onClick:w}):null;var j=(0,g.jsx)(d.a,{badgeClassName:x,canShowBadges:n,isHoverCardDisabled:m,tumblrmartAccessories:a,unwrapped:void 0!==v&&v});return(0,g.jsx)("span",{className:s()(b.Z.container,b.Z[i||"wrapper"]),style:r()({},c&&!h&&{background:c}),children:h?(0,g.jsx)(f,{onClick:w,wrapperClassName:b.Z.editWrapper,children:j}):j})}},59857:(e,t,a)=>{"use strict";a.d(t,{rE:()=>m,Nh:()=>h,M5:()=>g,D0:()=>p});var n=a(33970),r=a.n(n),i=a(5754),s=a.n(i),o=a(95004),l=a(78667),d=a(93613),c=a(2629),u=/^image\/(gif|jpe?g|png|webp)$/,h=g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return!e.match(t)},p=e=>{var t=e._t,a=e.file,n=e.fileType,r=[];return g(a.type,void 0===n?u:n)&&r.push(t("File type not supported")),h(a.size)&&r.push(t("File is too big")),{errors:r,isValid:!r.length}},m=e=>{var t=e.className,a=e.toggleDragging,n=e.onNewImage,i=e.testId,h=e.fileType,g=void 0===h?u:h,m=(0,l.bp)()._t,f=(0,d.V)().toggleToast,b=(0,o.useState)(!1),v=r()(b,2),x=v[0],y=v[1],w=()=>{y(!1),a(!1)};return(0,c.jsx)("div",{"data-testid":i,className:s()("i4muB",t,{CzmZj:x}),onDragOver:onDragLeave:onDrop:e=>{e.preventDefault();var t=e.dataTransfer;if(t.types.includes("Files")){var a=Array.from(t.items)[0].getAsFile();if(a){var r=p({_t:m,file:a,fileType:g}),i=r.errors;if(!r.isValid){f(i[0],"error"),w();return}n(URL.createObjectURL(a),a),w()}}}})}},24755:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=(0,a(36343).q)("badge-add");n.defaultProps={size:{width:24,height:24}};let r=n},82145:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n=a(54138),r=a.n(n),i=a(54589),s=a.n(i),o=a(36343),l=a(55015),d=a(2629),c=["isCompact","isRounded"],u=(0,o.q)("reblog"),h=(0,o.q)("reblog-compact"),g=(0,o.q)("reblog-rounded"),p=e=>{var t=e.isCompact,a=e.isRounded,n=s()(e,c);return t?(0,d.jsx)(h,r()({},n)):a?(0,d.jsx)(g,r()({},n)):(0,d.jsx)(u,r()({},n))};p.defaultProps={size:l.Z.desktop.reblogIconSize,isCompact:!1,isRounded:!1};let m=p},37560:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(50209),r=a.n(n),i=a(95004),s=a(36485),o=a(2629);class l extends i.Component{render(){var e=this.props,t=e.className,a=e.src,n=e.title,r=e.queryParams,i=e.scrolling,l=e.frameBorder,d=e.style,c=e.onLoad,u=e.placementId,h=e.allow,g=e.allowFullScreen;return(0,o.jsx)("iframe",{className:t,name:u,title:n,src:(0,s.Z)(a,r),scrolling:i,frameBorder:l,style:d,onLoad:c,allow:h,allowFullScreen:g})}}r()(l,"defaultProps",{className:"",queryParams:{},scrolling:"no",frameBorder:0});let d=l},98724:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var n=a(5754),r=a.n(n),i=a(6135),s=a(2629),o=e=>{var t=e.color,a=e.condensed;return(0,s.jsx)("div",{className:r()("gG278",{ops60:a}),children:(0,s.jsx)(i.Z,{centerOrientation:"horizontalAndVertical",color:t})})}},48352:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var n=a(54138),r=a.n(n),i=a(33970),s=a.n(i),o=a(95004),l=a(78994),d=a(55673),c=a(43523),u=a(22424),h=a(12736),g=a(14544),p=a(78667);let m=e=>{var t=(0,p.bp)().logEvent,a=(0,l.TH)().pathname,n=(0,d.lr)(),i=s()(n,1)[0];(0,o.useEffect)(()=>{"embed"===i.get("source")&&t({pathname:a,eventName:c.J.EmbedPostClick,eventDetails:r()(r()({},e),{},{refUrl:i.get("refUrl"),action:i.get("action")})})},[])},f=e=>{var t=e.page,a=e.eventDetails,n=(0,u.wL)().logEvent,i=(0,l.TH)().pathname,p=(0,d.lr)(),f=s()(p,1)[0],b=(0,g.M)().name,v=(0,h.z)(),x=v.isModalShowing,y=v.isPeeprShowing,w=(0,o.useRef)(x||y),j=f.get("source"),k=()=>n({page:t,pathname:i,eventName:c.J.ScreenView,eventDetails:r()(r()({pathname:i,referrer:document.referrer,color_palette:b},j&&{source:j}),a)});return(0,o.useEffect)(()=>{k()},[i,t]),(0,o.useEffect)(()=>{!w.current||x||y||k(),w.current=x||y},[w,x,y]),m(),null}},90841:63771:(e,t,a)=>{"use strict";a.d(t,{f:()=>c,n:()=>u});var n=a(17276),r=a.n(n),i=a(54138),s=a.n(i),o=a(85795),l=a(49116),d=a(90841),c=(e,t)=>{var a,n,i,c,u,h;return r()().async(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(i=null==(n=JSON.parse(null!==(a=l.E.getItem("limits"))&&void 0!==a?a:"null"))?void 0:n[e])||(c=i.maxVideoSizeMb,u=i.lastUpdated,Date.now()-u>=6e5)){g.next=8;break}return g.abrupt("return",c);case 8:return g.next=10,r()().awrap((0,o.ZP)(t).getBlogLimits(e).fetch().then(e=>{var t,a=null==e||null===(t=e.response)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.maxByteSize;return a?a/1024/1024:d.Qw}));case 10:return h=g.sent,l.E.setItem("limits",JSON.stringify(s()(s()({},n),{},{[e]:s()(s()({},null==n?void 0:n[e]),{},{maxVideoSizeMb:h,lastUpdated:Date.now()})}))),g.abrupt("return",h);case 13:case"end":return g.stop()}},null,null,null,Promise)},u=function(e){var t,a=arguments;return r()().async(function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:document.createElement("video"),n.abrupt("return",new Promise(a=>{t.preload="metadata",t.onloadedmetadata=t.src=URL.createObjectURL(e)}));case 2:case"end":return n.stop()}},null,null,null,Promise)}},25108:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var n=a(33970),r=a.n(n),i=a(95004),s=a(6135),o=a(6233),l=a(53460),d=a(78667),c=a(93613),u=a(63583),h=a.n(u),g=a(25793),p=a(40733),m=a(2629);let f=e=>{var t,a=e.closeModal,n=e.productGroup,u=e.source,f=e.initialCheckoutType,b=e.initialSelfPurchaseBlogName,v=(0,d.bp)(),x=v._c,y=v._t,w=v.isLoggedIn,j=(0,c.V)().toggleToast,k=(0,g.m)(n),N=k.data,S=k.isError,_=k.isPending,T=(0,i.useState)(f),C=r()(T,2),P=C[0],A=C[1];return((0,i.useEffect)(()=>{S&&j(x("[TumblrMart] Error message when product detail modal fails to fetch product data","There was a problem loading the TumblrMart product. Check back later."),"error")},[x,S,j]),!w||S)?null:(0,m.jsx)(o.Z,{onClose:a,title:null!==(t=null==N?void 0:N.title)&&void 0!==t?t:y("TumblrMart"),modalWrapperClass:"tumblrmartV2",children:_?(0,m.jsx)("div",{className:p.Z.loader,children:(0,m.jsx)(s.Z,{color:h().paletteBlack})}):(0,m.jsx)(l.dn,{source:u,product:N,checkoutType:null!=P?P:null!=N&&N.gift?"gift":"self-purchase",onSelectGift:()=>A("gift"),onSelectSelfPurchase:()=>A("self-purchase"),initialSelfPurchaseBlogName:b})})}},5849:(e,t,a)=>{"use strict";a.d(t,{Z:()=>P});var n=a(50209),r=a.n(n),i=a(5754),s=a.n(i),o=a(95004),l=a(44009),d=(0,a(36343).q)("question-bubble");d.defaultProps={size:{width:24,height:24}};var c=a(92779),u=a(92677),h=a(59215),g=a(45051),p=a(17276),m=a.n(p),f=a(33970),b=a.n(f),v=a(6135),x=a(90841),y=a(63771),w=a(78667),j=a(65551),k=a(63583),N=a.n(k),S=a(2629);let _=()=>{var e=(0,w.bp)(),t=e.apiFetch,a=e._t,n=(0,j.m)().selectedBlog,r=(0,o.useState)(),i=b()(r,2),s=i[0],l=i[1];return(0,o.useEffect)(()=>{var e=!1;return(()=>{var a;return m()().async(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=x.Qw,!n){r.next=5;break}return r.next=4,m()().awrap((0,y.f)(n.name,t));case 4:a=r.sent;case 5:e||l(a);case 6:case"end":return r.stop()}},null,null,null,Promise)})(),,[null==n?void 0:n.name,t]),(0,S.jsxs)("div",{className:"M15EX",children:[(0,S.jsx)("div",{className:"oSXiI",children:a("Upload a video")}),(0,S.jsx)("div",{children:s?a("%1$sMB max per file",[String(s)]):(0,S.jsx)(v.Z,{small:!0,color:N().paletteBlack})})]})},T={uploadButton:"MD5Ec",videoContainer:"w3qxK",videoBubble:"Smi9h"};class C extends o.Component{constructor(){super(...arguments),r()(this,"state",{isVideoTooltipVisible:!1}),r()(this,"uploadInputRef",(0,o.createRef)()),r()(this,"toggleVideoBubble",,r()(this,"uploadButtonOnClick",()=>{var e,t,a,n=this.props,r=n.metLocalUploadLimit,i=n.uploadLimitError,s=n.handleUploadLimitError,o=n.toastContext.toggleToast;if(r){i&&o(i,"error"),null==s||s();return}null===(e=this.uploadInputRef.current)||void 0===e||e.click(),null===(t=(a=this.props).onClick)||void 0===t||t.call(a)}),r()(this,"uploadInputOnClick",,r()(this,"getUploadButtonLabel",()=>{var e=this.props,t=e.fileTypes,a=e.appContext._t,n=!!t.find(e=>"image"===e),r=!!t.find(e=>"video"===e),i=!!t.find(e=>"audio"===e);return n&&r?a("Upload an image or video"):n?a("Upload an image"):r?a("Upload a video"):i?a("Upload an audio"):""}),r()(this,"getAccept",()=>{var e=this.props.fileTypes,t={image:[c.lu.Gif,c.lu.Jpeg,c.lu.Png,c.lu.Webp].join(","),video:[u.w3.Mov,u.w3.Mp4].join(","),audio:"audio/mpeg"};return e.map(e=>t[e]).join(",")})}render(){var e=this.props,t=e.wrapperClassName,a=e.multiple,n=e.onChange,r=e.children,i=e.disabled,o=this.props.fileTypes,c=this.state.isVideoTooltipVisible,u=!!o.find(;return(0,S.jsxs)(S.Fragment,{children:[u&&(0,S.jsxs)("div",{className:T.videoContainer,children:[(0,S.jsx)("div",{className:T.videoBubble,onClick:this.toggleVideoBubble,role:"button",children:(0,S.jsx)(d,{size:{width:15,height:15}})}),c&&(0,S.jsx)(_,{})]}),(0,S.jsxs)(l.Z,{wrapperClassName:s()(T.uploadButton,t),label:this.getUploadButtonLabel(),onClick:this.uploadButtonOnClick,disabled:i,title:this.props.title,children:[(0,S.jsx)("input",{ref:this.uploadInputRef,type:"file",multiple:a,accept:this.getAccept(),role:"button",tabIndex:-1,onClick:this.uploadInputOnClick,onChange:n}),r]})]})}}r()(C,"defaultProps",{wrapperClassName:"",uploadLimitError:"",onChange:g.Z,handleUploadLimitError:g.Z,multiple:!0,fileTypes:[],disabled:!1,title:""});let P=(0,h.X9)(C,{appContext:!0,toastContext:!0})},4721:(e,t,a)=>{"use strict";a.d(t,{_:()=>p,g:()=>m});var n=a(17276),r=a.n(n),i=a(33970),s=a.n(i),o=a(33590),l=a(94833),d=a(91253),c=a(62082),u=a(43523),h=a(78667),g=(0,d.i)(l.z.object({token:c.U,tosAccepted:l.z.boolean(),tmgProfile:l.z.object({networkUserId:c.U,profile:l.z.object({age:l.z.number().optional(),firstName:c.U,displayName:c.U,images:l.z.array(c.U).optional(),media:l.z.array(l.z.object({id:c.U,type:c.U,urls:l.z.object({large:c.U,square:c.U})})).optional()})})})).transform(e=>e.response);function p(e){return e("/v2/tmglive/v1/init?generic_data=false",g,{schemaErrorPrintFullResponse:!0})}var m=()=>{var e=(0,h.bp)(),t=e.apiFetchWithSchema,n=e._getLanguage,i=e.liveStreaming,l=n().localization,d=(0,h.bp)(),c=d.getBootstrap,g=d.logEvent,m=c("tmgliveStagingWebPaymentsCredentials").value,f=!!(i&&m);return(0,o.a)({queryKey:["tmg-live-init"],queryFn:()=>{var e,n,o,d,c,h,f,b,v,x,y;return r()().async(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,r()().awrap(Promise.all([p(t),a.e(62).then(a.bind(a,25289))]));case 2:return e=w.sent,o=(n=s()(e,2))[0],d=n[1].default,h=(c=i).authUrl,f=c.apiUrl,b=o.token,v=o.tosAccepted,x="zh-hk"===l?"zh-cn":l,g({eventName:u.J.TumblrLiveInitCallFinished}),y={locale:x,chatSupport:!1,hostAppName:"tumblr",hostAppVersion:"1.0.0",credentials:m,authUrl:h,gatewayUrl:f,authToken:b,tosAccepted:v,webLiveURL:`${f}/web-live/`},w.abrupt("return",{authToken:b,tosAccepted:v,tmgWebSDK:new d(y),networkUserId:o.tmgProfile.networkUserId,webLiveURL:y.webLiveURL,profile:o.tmgProfile.profile});case 12:case"end":return w.stop()}},null,null,null,Promise)},enabled:f,refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:1/0})}},37811:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n8});var n=a(64756),r=a(95004),i=a(78994),s=a(43523),o=a(78667),l=a(48352),d=a(70077),c=a(33970),u=a.n(c),h=a(54138),g=a.n(h),p=a(5754),m=a.n(p),f=a(95469),b=a(91181),v=a(68384),x=a(2629),y={"1785 GLC Baskerville":{display_name:"1785 Baskerville",family:"'1785 GLC Baskerville', serif"},"Alternate Gothic":{display_name:"Alternate Gothic",family:"'Alternate Gothic', sans-serif"},Arquitecta:{display_name:"Arquitecta",family:"'Arquitecta', sans-serif"},Avalon:{display_name:"Avalon",family:"'Avalon', sans-serif"},Baskerville:{display_name:"Baskerville",family:"Baskerville, 'Times New Roman', Times, serif"},"Bodoni Recut FS":{display_name:"Bodoni",family:"'Bodoni Recut FS', serif"},Bookmania:{display_name:"Bookmania",family:"'Bookmania', serif"},"Brutal Type":{display_name:"Brutal Type",family:"'Brutal Type', sans-serif"},Calluna:{display_name:"Calluna",family:"'Calluna', serif"},"Calluna Sans":{display_name:"Calluna Sans",family:"'Calluna Sans', sans-serif"},Capita:{display_name:"Capita",family:"'Capita', serif"},"Caslon FS":{display_name:"Caslon FS",family:"'Caslon FS', serif"},"Clarendon Text Pro":{display_name:"Clarendon",family:"'Clarendon Text Pro', serif"},"Clearface FS":{display_name:"Clearface",family:"'Clearface FS', serif"},FangSong:{display_name:"Fang Song",family:"'FangSong', 'STFangsong', sans-serif"},Favorit:{display_name:"Favorit",family:"'Favorit', sans-serif"},"Garamond Classic FS":{display_name:"Garamond",family:"'Garamond Classic FS', serif"},Georgia:{display_name:"Georgia",family:"Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', serif"},Gibson:{display_name:"Gibson",family:"'Gibson', sans-serif"},"Grumpy Black 48":{display_name:"Grumpy",family:"'Grumpy Black 48', serif"},"Helvetica Neue":{display_name:"Helvetica",family:"'Helvetica Neue', Arial, Helvetica, sans-serif"},Kaiti:{display_name:"Kaiti",family:"'Kaiti TC', 'KaiTi', sans-serif"},"Lorimer No 2":{display_name:"Lorimer No 2",family:"'Lorimer No 2', sans-serif"},"Lucida Sans":{display_name:"Lucida Sans",family:"'Lucida Sans', 'Lucida Grande', 'Lucida Sans Unicode', sans-serif"},"News Gothic FS":{display_name:"News Gothic",family:"'News Gothic FS', sans-serif"},"Pratt Pro":{display_name:"Pratt Pro",family:"'Pratt Pro', serif"},Quadrat:{display_name:"Quadrat",family:"'Quadrat', serif"},SimHei:{display_name:"Sim Hei",family:"'SimHei', 'STHeiti', sans-serif"},"Sofia Pro":{display_name:"Sofia Pro",family:"'Sofia Pro', sans-serif"},Spade:{display_name:"Spade",family:"'Spade', serif"},"Square Serif":{display_name:"Square Serif",family:"'Square Serif', serif"},Streetscript:{display_name:"Streetscript",family:"'Streetscript', sans-serif"},"Typewriter FS":{display_name:"Typewriter",family:"'Typewriter FS', serif"},Verdana:{display_name:"Verdana",family:"Verdana, Geneva, Tahoma, sans-serif"},Ziclets:{display_name:"Ziclets",family:"'Ziclets', serif"}},w=e=>Object.hasOwn(y,e)?y[e]:y.Gibson;function j(e){var t=e.currentFont,a=e.setFont;return(0,x.jsx)("ul",{className:"hLWYL",children:Object.entries(y).map(e=>{var n=u()(e,2),r=n[0],i=n[1];return(0,x.jsx)("li",{className:"dGTSs",children:(0,x.jsxs)("button",{onClick:style:{fontFamily:i.family},children:[(0,x.jsx)(v.Z,{className:m()("Nbqb7",{Pvl_M:r!==t})}),i.display_name]})},i.display_name)})})}var k=a(59857),N=a(68144),S=a(93390),_=a(36343),T=(0,_.q)("reposition");T.defaultProps={size:{width:19,height:19}};var C=(0,_.q)("view-grid-settings");C.defaultProps={size:{width:19,height:19}};var P=a(6135),A=a(53714),E=a(18488),B=a(54589),D=a.n(B),Z=["className","disabled","label","onChange","spellCheck","style","value"];let L=e=>{var t=e.className,a=e.disabled,n=e.label,i=e.onChange,s=e.spellCheck,o=e.style,l=void 0===o?{}:o,d=e.value,c=D()(e,Z),h=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useState)(),b=u()(f,2),v=b[0],y=b[1],w=e=>{h.current&&(h.current.value=e,y(h.current.scrollHeight))};return(0,r.useEffect)(()=>{w(d)},[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("textarea",g()(g()({ref:p,value:d,className:t,disabled:a,style:g()(g()({},l),void 0!==v&&{height:v}),onChange:"aria-label":n},void 0!==s&&{spellCheck:s}),c)),(0,x.jsx)("textarea",{ref:h,className:m()(t,"OB_tD"),disabled:a,style:l,"aria-hidden":!0,tabIndex:-1})]})};var M=a(15608),I=a(54382),R=a(5849),O=a(90127),F=a(4721),U=a(79153),$=(0,r.createContext)({isActive:!1,toggleIsActive:);$.displayName="BlurContext";var z=e=>{var t=e.children,a=(0,r.useState)(!1),n=u()(a,2),i=n[0],s=n[1];return(0,x.jsx)($.Provider,{value:{isActive:i,toggleIsActive:()=>{s(e=>!e)}},children:t})},G=W=a(37236),H=a(8293),V=a(5700),q=a(93613),K=a(73125),Y=a(60857),Q=a(63415),J=a(46306),X=a(63583),ee=a.n(X),et=a(44009),ea=a(17276),en=a.n(ea),er=a(33590),ei=a(91253),es=a(39377),eo=a(94833),el=(0,ei.i)(eo.z.object({list:eo.z.array(es.eu)})),ed=e=>["earned-badges",e],ec=e=>{var t=(0,o.bp)().apiFetchWithSchema;return(0,er.a)({queryKey:ed(e),queryFn:()=>{var a,n,r;return en()().async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,en()().awrap(t("/v2/tumblrmart/earned_badges",el,{method:"GET",queryParams:{tumblelog:e}}));case 2:return r=i.sent,i.abrupt("return",null!==(a=null===(n=r.response)||void 0===n?void 0:n.list)&&void 0!==a?a:[]);case 4:case"end":return i.stop()}},null,null,null,Promise)}})},eu=a(19299),eh=(0,_.q)("prohibited");eh.defaultProps={size:{width:24,height:24}};var eg=a(73465),ep=e=>{var t,a=e.label,n=e.tumblrmartBadge,i=e.toggleImageSelector,s=tb(),o=s.updatedTumblrmartAccessories,l=s.canShowBadges,d=(0,r.useContext)(th),c=(null==o||null===(t=o.badges)||void 0===t?void 0:t.find(e=>e.productGroup===n.productGroup))||n,u=!l,h=(c.activeCount||0)>0;return(0,x.jsx)(et.Z,{className:m()("CZ8KG",{SxCe9:u}),disabled:u,label:a,onClick:e=>{e.stopPropagation(),d({type:"UPDATE_TUMBLRMART_BADGE",badge:g()(g()({},c),{},{activeCount:h?0:1})}),i&&!h&&i()},children:h&&(0,x.jsx)(v.Z,{size:{width:12,height:9}})})};let em={container:"Jslv2",select:"oMEN2",options:"m362x",option:"_qeO_",isSelected:"ckNbS",popover:"MQZSO",decrement:"AZF5v",increment:"iWAUB",isDisabled:"BIpaf"};var ef=e=>{var t,a=e.label,n=e.tumblrmartBadge,i=e.variants,s=e.toggleImageSelector,l=(0,o.bp)(),d=l._c,c=l._cn,h=tb(),p=h.updatedTumblrmartAccessories,f=h.canShowBadges,b=(0,r.useState)(!1),v=u()(b,2),y=v[0],w=v[1],j=!f,k=(0,r.useContext)(th),S=(null==p||null===(t=p.badges)||void 0===t?void 0:t.find(e=>e.productGroup===n.productGroup))||n,_=S.activeCount,T=void 0===_?0:_,C=S.variant,P=n.urls,E=n.totalCount,B=void 0===E?1:E,D=T>0,Z=e=>{var t,a=null!=i&&i.length?Array(e).fill(null===(t=i.find(e=>e.name===C))||void 0===t?void 0:t.badgeImages[0]):P.slice(0,Math.ceil(P.length/(null!=B?B:P.length))*(null!=e?e:P.length));k({type:"UPDATE_TUMBLRMART_BADGE",badge:g()(g()({},S),{},{activeCount:e,urls:a})}),s&&0===T&&e>0&&setTimeout(s,100)},L=()=>{w(!y)};return(0,x.jsxs)("div",{className:m()(em.container,{[em.isDisabled]:j}),children:[(0,x.jsx)(et.Z,{className:em.increment,disabled:j,onClick:label:d("[Badge Management] Badge count selector increment label","Increment badge count"),children:(0,x.jsx)(N.Cq,{colors:{primary:ee().paletteTransparentBlack50}})}),(0,x.jsx)(A.ZP,{targetWrapperClassName:em.popover,component:(0,x.jsx)("div",{className:em.options,children:[...Array(B+1)].map((e,t)=>(0,x.jsx)(et.Z,{className:m()(em.option,{[em.isSelected]:T===t}),label:c("[Badge Management] Badge count selector option label","Select %1$s badge","Select %1$s badges",t),onClick:children:t},`count-selector-${n.productGroup}-${t}`))}),isOpen:y,toggle:L,usePortals:!0,children:(0,x.jsx)(et.Z,{className:m()(em.select,{[em.isDisabled]:j}),disabled:j,label:a,children:D?T:void 0})}),(0,x.jsx)(et.Z,{className:em.decrement,disabled:j,onClick:label:d("[Badge Management] Badge count selector increment label","Decrement badge count"),children:(0,x.jsx)(N.nT,{colors:{primary:ee().paletteTransparentBlack50}})})]})},eb=(0,_.q)("camera-flip");eb.defaultProps={size:{width:23,height:20}};let ev={badgeImageSelector:"MZOy_",button:"wDnZk",isSelected:"hQf3P",img:"n6b11"};var ex=e=>{var t,a=e.variants,n=e.tumblrmartBadge,i=e.title,s=(0,o.bp)()._c,l=(0,r.useContext)(th),d=tb().updatedTumblrmartAccessories,c=(null==d||null===(t=d.badges)||void 0===t?void 0:t.find(e=>e.productGroup===n.productGroup))||n,u=c.variant,h=c.activeCount,p=e=>{var t,n=e.currentTarget.dataset.variant,r=0===h?1:h,i=Array(r).fill(null==a||null===(t=a.find(e=>e.name===n))||void 0===t?void 0:t.badgeImages[0]);n&&l({type:"UPDATE_TUMBLRMART_BADGE",badge:g()(g()({},c),{},{variant:n,activeCount:r,urls:i})})};return(0,x.jsx)("div",{className:ev.badgeImageSelector,children:null==a?void 0:a.map((e,t)=>(0,x.jsx)("button",{className:m()({[ev.button]:!0,[ev.isSelected]:u===e.name||!u&&0===t}),"data-variant":e.name,onClick:p,disabled:u===e.name,"aria-label":s("Text on a button that will select a badge image.","Select badge image"),children:(0,x.jsx)("img",{className:ev.img,src:e.avatar["2x"],alt:`${i} - ${e.name}`})},`badge-variant-${e.name}`))})};let ey={badge:"F_8YS",shouldHighlightOnHover:"eWQ4_",imageSelectorPopover:"vU9hT",badgeImage:"oNhmj",avatar:"R57IE",none:"I9G6T",pill:"DEBX7",count:"AwPN5",changeImageButton:"d3ic8",badgeDetails:"RaTY1",title:"M96mU",description:"viUng",badgeActions:"jtb6_",lockIcon:"RU65D",purchaseButton:"tIfyb",isSelected:"ni0OS"};var ew=e=>{var t,a,n,i=e.activeCount,s=e.count,l=void 0===s?0:s,d=e.description,c=e.icon,h=e.onClickPurchase,g=e.price,p=e.productGroup,f=e.title,b=e.type,v=void 0===b?"default":b,y=e.variants,w=void 0===y?[]:y,j=e.initialVariant,k=e.badgeImages,N=(0,o.bp)()._c,S=(0,r.useState)(!1),_=u()(S,2),T=_[0],C=_[1],E=(0,r.useContext)(th),B=tb(),D=B.updatedTumblrmartAccessories,Z=B.canShowBadges,L={productGroup:p,variant:j,activeCount:void 0===i?0:i,totalCount:l,urls:(null===(t=w.find(e=>e.name===j))||void 0===t?void 0:t.badgeImages)||k||[]},I=(null==D||null===(a=D.badges)||void 0===a||null===(a=a.find(e=>e.productGroup===L.productGroup))||void 0===a?void 0:a.variant)||j,R=(null==w||null===(n=w.find(e=>e.name===I))||void 0===n?void 0:n.avatar)||c||null,O=F=!Z;return(0,x.jsxs)("div",{className:m()(ey.badge,{[ey.isSelected]:!Z&&"none"===p,[ey.shouldHighlightOnHover]:"default"!==v}),children:[(0,x.jsx)("div",{className:ey.badgeImage,children:R?(0,x.jsxs)(x.Fragment,{children:[(0,eg.C6)(R,N("[Badge Management] Badge manager badge icon image","Badge image."),ey.avatar),l>1&&(0,x.jsx)("span",{className:m()(ey.count,ey.pill),children:l}),w.length>1&&(0,x.jsx)(A.ZP,{toggle:O,isOpen:T,maxWidth:300,popoverWrapperClassName:ey.imageSelectorPopover,component:(0,x.jsx)(ex,{variants:w,tumblrmartBadge:L,title:f}),position:"top",closeForAllExternalClicks:!0,children:(0,x.jsx)("button",{className:m()(ey.changeImageButton,ey.pill),"aria-label":N("Text on a button that will allow a user change their badges image","Change badge image"),children:(0,x.jsx)(eb,{colors:{primary:ee().paletteBlack},size:{width:10,height:10}})})})]}):(0,x.jsx)("span",{className:ey.none,children:(0,x.jsx)(eh,{size:{height:22,width:22}})})}),(0,x.jsxs)("div",{className:ey.badgeDetails,children:[(0,x.jsx)("p",{className:ey.title,children:f}),(0,x.jsx)("p",{className:ey.description,children:d})]}),(0,x.jsx)("div",{className:ey.badgeActions,children:(()=>{if("default"===v){if("none"===p)return(0,x.jsx)(M.Z,{"aria-label":N("[Badge Management] Hide badges toggle label","Hide all badges"),className:ey.toggle,controlled:!0,checked:!Z,onChange:);var e=N("[Badge Management] Count selector label","Manage number of visible %1$s badges",[f]);return l>1?(0,x.jsx)(ef,{label:e,tumblrmartBadge:L,variants:w,toggleImageSelector:w.length>1?O:void 0}):(0,x.jsx)(ep,{label:e,tumblrmartBadge:L,toggleImageSelector:w.length>1?O:void 0})}return"shop"===v?(0,x.jsx)(et.Z,{className:ey.purchaseButton,disabled:F,onClick:children:F?(0,x.jsx)(P.Z,{small:!0}):g}):"earn"===v?(0,x.jsx)("span",{className:ey.lockIcon,children:(0,x.jsx)(eu.Z,{size:{height:16,width:14}})}):null})()})]})},ej=a(24755),ek=(0,_.q)("badge-earn");ek.defaultProps={size:{width:130,height:90}};let eN={wrapper:"aR4Rj",title:"vdv_5",description:"mbZDJ",cta:"KmSk8"},eS=e=>{var t=e.cta,a=e.description,n=e.title,r=e.type,i=void 0===r?"default":r;return(0,x.jsxs)("div",{className:eN.wrapper,children:["default"===i&&(0,x.jsx)(ej.Z,{size:{height:56,width:56},colors:{primary:ee().paletteBlack}}),"earn"===i&&(0,x.jsx)(ek,{colors:{primary:ee().paletteBlack,accent:ee().paletteWhite}}),n&&(0,x.jsx)("h2",{className:eN.title,children:n}),a&&(0,x.jsx)("p",{className:eN.description,children:a}),t&&(0,x.jsx)("div",{className:eN.cta,children:t})]})},e_={wrapper:"ptU3q",loader:"F4Nbr",link:"ScuF2"},eT=()=>{var e=(0,o.bp)(),t=e._c,a=e.logEvent,n=(0,i.s0)(),l=(0,i.UO)().blogName,d=(0,q.V)().toggleToast,c=ec(null!=l?l:""),u=c.isError,h=c.isPending,g=c.data;if((0,r.useEffect)(()=>{a({eventName:s.J.BadgeManagementEarnTabSelect})},[a]),(0,r.useEffect)(()=>{u&&d(t("[Badge Management] Error message that appears when fetching available earned badges fails.","Oops! Something went wrong while checking for earned badges. Please try again later."),"error")},[t,u,d]),h)return(0,x.jsx)("div",{className:e_.loader,children:(0,x.jsx)(P.Z,{centerOrientation:"horizontalAndVertical",color:ee().paletteBlack})});if(u||!(null!=g&&g.length)){var p=(0,x.jsx)(I.ZP,{comment:"[Badge Management] Empty state link text that appears when a user has earned all badges in the earn tab.",components:{button:(0,x.jsx)(et.Z,{className:e_.link,label:t("[Badge Management] link to Your Badges tab.","Your Badges"),onClick:e=>{e.stopPropagation(),l&&n((0,O.cB)(l))}})},children:"Go to [button]Your Badges[/button] to display them."});return(0,x.jsx)(eS,{description:t("[Badge Management] Empty earn tab desription","You've earned all the badges for now."),cta:p,title:t("[Badge Management] Empty earn tab title","Well done!"),type:"earn"})}return(0,x.jsx)("div",{className:e_.wrapper,children:g.map((e,t)=>{var a=e.imageUrls,n=e.productGroup,r=e.subtitle,i=e.title;return(0,x.jsx)(ew,{description:r,icon:a.avatar,productGroup:n,title:i,type:"earn"},`badge-manager-badge-${n}-${t}`)})})};var eC=a(25108),eP=a(31722),eA=a(88926),eE=a(61351);let eB={wrapper:"esP5Z",loader:"xZ8ZJ"},eD=()=>{var e,t,a=(0,o.bp)(),n=a._getPriceInCurrency,l=a.logEvent,d=(0,i.UO)().blogName,c=(0,eP.F)({category:"all",only_types:"badges"}),h=c.data,g=c.isPending,p=(0,r.useState)(""),m=u()(p,2),f=m[0],b=m[1];(0,r.useEffect)(()=>{l({eventName:s.J.BadgeManagementShopTabSelect})},[l]);var v=e=>{b(e),l({eventName:s.J.BadgeManagementBuySelect,eventDetails:{product:e}})};return g?(0,x.jsx)("div",{className:eB.loader,children:(0,x.jsx)(P.Z,{centerOrientation:"horizontalAndVertical",color:ee().paletteBlack})}):(0,x.jsxs)("div",{className:eB.wrapper,children:[(null==h?void 0:h.banner)&&(0,x.jsx)(eE.j,{banner:h.banner}),[...null!==(e=null==h?void 0:h.list)&&void 0!==e?e:[],...null!==(t=null==h?void 0:h.carousel)&&void 0!==t?t:[]].map((e,t)=>{var a,r=e.selfPurchase,i=e.productGroup;return(null==r||null===(a=r.products)||void 0===a?void 0:a[0])&&(0,x.jsx)(ew,{icon:e.imageUrls.avatar,title:e.title,description:e.subtitle,onClickPurchase:v,productGroup:i,price:(0,eA.T4)(r.products[0].price,"USD",n),type:"shop"},`badge-manager-badge-${i}-${t}`)}),f&&(0,x.jsx)(eC.Z,{closeModal:()=>{b("")},productGroup:f,source:"badge-manager",initialCheckoutType:"self-purchase",initialSelfPurchaseBlogName:d})]})};var eZ=a(38177),eL=a(5784),eM=a(99708),eI=a(30646),eR=a(80391),eO=a(24464);let eF={gift:"K4FTh",giftIcon:"frwBP",sparkle:"STlFt",giftText:"_VXcF",giftActions:"KVqZG",giftButton:"L2qes"},eU=e=>{var t=e.blogName,a=e.count,n=(0,o.bp)(),i=n._c,l=n._cn,d=n.logEvent,c=(0,q.V)().toggleToast,h=(0,eR.V)(["unopened"],t,"badges"),g=h.data,p=h.isError,m=h.isPending,f=(0,eO.i)(["unopened"],t,"badges").mutate,b=(0,r.useState)(),v=u()(b,2),y=v[0],w=v[1],j=(0,r.useState)(!1),k=u()(j,2),N=k[0],S=k[1];if((0,r.useEffect)(()=>{null!=g&&g.pages&&w(g.pages.reduce([])[0])},[null==g?void 0:g.pages]),(0,r.useEffect)(()=>{p&&c(i("[Badge Management] Error message that appears when a users unopened badges gifts fail to load.","There was an error loading your unopened badge gifts."),"error")},[i,p,c]),p)return null;var _=i("[Badge Management] Button label to open the gift.","View gift"),T=l("[Badge Management] Text that appears when a user has received a gift.","Well looky here, you have %1$s unopened badge gift!","Well looky here, you have %1$s unopened badge gifts!",a);return(0,x.jsxs)(x.Fragment,{children:[N&&!!y&&(0,x.jsx)(eI.Gl,{gift:y,onClose:()=>{y&&f(y.uuid,{onSuccess:()=>{d({eventName:s.J.BadgeManagementGiftOpen,eventDetails:{product:y.productGroup}})}}),S(!1)}}),(0,x.jsxs)("div",{className:eF.gift,children:[(0,x.jsxs)("div",{className:eF.giftIcon,children:[(0,x.jsx)(eL.Z,{size:{height:24,width:24}}),(0,x.jsx)("span",{className:eF.sparkle,children:(0,x.jsx)(eM.Z,{})})]}),(0,x.jsx)("div",{className:eF.giftText,children:T}),(0,x.jsx)("div",{className:eF.giftActions,children:m?(0,x.jsx)(P.Z,{small:!0}):(0,x.jsx)(et.Z,{className:eF.giftButton,label:_,onClick:()=>S(!0),children:_})})]})]})},e$={wrapper:"FGGIZ",loader:"rxKeX",link:"UC_Ry"};var ez=()=>{var e,t,a,n,l,d,c=(0,r.useContext)(th),u=(0,o.bp)(),h=u._c,g=u.logEvent,p=(0,i.s0)(),m=(0,i.UO)().blogName,f=tb(),b=f.tumblrmartAccessories,v=f.pendingChanges,y=(0,eZ.F)(null!=m?m:""),w=y.data,j=y.isError,k=y.isPending,N=y.isFetching,S=(0,q.V)().toggleToast;if((0,r.useEffect)(()=>{var e;null!=w&&null!==(e=w.badges)&&void 0!==e&&e.length&&!v&&c({type:"HYDRATE_TUMBLRMART_ACCESSORIES",updatedTumblrmartAccessories:{badges:(((null==b?void 0:b.badges)||[]).map(e=>{var t;return(null===(t=w.badges)||void 0===t?void 0:t.find()||null}).filter(||[]).map(e=>{var t,a=e.activeCount,n=e.badgeImages,r=e.productGroup,i=e.totalCount,s=e.variant,o=e.variants,l=null==o||null===(t=o.find(e=>e.name===s))||void 0===t?void 0:t.badgeImages,d=l?Array(a).fill(l[0]):n;return{activeCount:a,productGroup:r,urls:d.slice(0,Math.ceil(n.length/(null!=i?i:n.length))*(null!=a?a:n.length)),variant:s}})}})},[null==w?void 0:w.badges,b]),(0,r.useEffect)(()=>{g({eventName:s.J.BadgeManagementYourBadgesTabSelect})},[g]),(0,r.useEffect)(()=>{j&&S(h("[Badge Management] Error message that appears when fetching available badges fails.","Oops! Something went wrong while grabbing your badges. Please try again later."),"error")},[h,j,S]),k||N)return(0,x.jsx)("div",{className:e$.loader,children:(0,x.jsx)(P.Z,{centerOrientation:"horizontalAndVertical",color:ee().paletteBlack})});if(j||!(null!=w&&null!==(e=w.badges)&&void 0!==e&&e.length)&&!(null!=w&&null!==(t=w.active)&&void 0!==t&&t.length)&&!(null!=w&&null!==(a=w.available)&&void 0!==a&&a.length)){var _=(0,x.jsx)(et.Z,{className:e$.link,label:h("[Badge Management] Link to shop tab.","Shop"),onClick:e=>{e.stopPropagation(),m&&p((0,O.cB)(m,"shop"))},children:h("[Badge Management] Empty state link text that appears when a user has no badges in the your badges tab.","Shop for badges")});return(0,x.jsx)(eS,{cta:_,description:h("[Badge Management] Empty state text that appears when a user has no badges in the your badges tab.","Show off your personality or achievements by adding badges to your blog.")})}var T=null!==(n=null==w?void 0:w.badges)&&void 0!==n?n:[...null!==(l=null==w?void 0:w.active)&&void 0!==l?l:[],...null!==(d=null==w?void 0:w.available)&&void 0!==d?d:[]];return(0,x.jsxs)("div",{className:e$.wrapper,children:[!!(null!=w&&w.unopenedCount)&&(0,x.jsx)(eU,{blogName:null!=m?m:"",count:w.unopenedCount}),(0,x.jsx)(ew,{description:h('[Badge Management] Description for the "No Badge" option.',"Hide badges on my blog."),title:h('[Badge Management] Title for the "No Badge" option.',"None"),productGroup:"none"}),T.sort(.map((e,t)=>{var a=e.count,n=e.activeCount,r=e.totalCount,i=e.imageUrls,s=e.productGroup,o=e.subtitle,l=e.title,d=e.variants,c=e.variant,u=e.badgeImages;return(0,x.jsx)(ew,{activeCount:n,count:null!=a?a:r,description:o,icon:i.avatar,badgeImages:u,productGroup:s,title:l,variants:d,initialVariant:c},`badge-manager-badge-${s}-${t}`)})]})};let eG={badgeManager:"AQWzd",header:"jv0l7",nav:"N2a7P",navButton:"dwvvQ",isSelected:"gkrhE",description:"SH9QM"};var eW=[{key:"yourBadges",label:(0,x.jsx)(I.ZP,{comment:"[TumblrMart] Label for a button that will display a users active and available badges.",children:"Your Badges"})},{key:"shop",label:(0,x.jsx)(I.ZP,{comment:"[TumblrMart] Label for a button that will display badges that can be purchased.",children:"Shop"})},{key:"earn",label:(0,x.jsx)(I.ZP,{comment:"[TumblrMart] Label for a button that will display badges that can be earned.",children:"Earn"})}],eH=eV=()=>{var e=(0,o.bp)()._c,t=(0,i.UO)(),a=t.blogName,n=t.subSection,r=n&&eH(n)?n:"yourBadges",s=(0,i.s0)(),l=e=>{var t=e.currentTarget.dataset.tab;a&&s("yourBadges"===t?(0,O.cB)(a):(0,O.cB)(a,t))},d="earn"===r?e("[Badge Management] Description that appears below the badge management earn tab explaining how to earn badges.","Earn badges to display on your profile and next to your username on posts."):e("[Badge Management] Description that appears below the badge management your badges and shop tabs explaining how to get new badges.","Purchase badges to display on your profile and next to your username on posts.");return(0,x.jsxs)("div",{className:"AQWzd",children:[(0,x.jsxs)("div",{className:"jv0l7",children:[(0,x.jsx)("nav",{className:"N2a7P",children:eW.map(e=>(0,x.jsx)("button",{className:m()("dwvvQ",eG[e.key],{gkrhE:r===e.key}),"data-tab":e.key,onClick:l,children:e.label},e.key))}),(0,x.jsx)("p",{className:"SH9QM",children:d})]}),(()=>{switch(r){case"yourBadges":return(0,x.jsx)(ez,{});case"shop":return(0,x.jsx)(eD,{});case"earn":return(0,x.jsx)(eT,{});default:return null}})()]})},eq=a(21283),eK=16/9,eY=(e,t,a)=>{var n=a?a.right-a.left:e.width,r=a?a.bottom-a.top:e.height;if(0===n||0===r)return{zoom:1,scale:1};var i=e.width/e.height;return{zoom:i<=eK?e.width/n:e.height/r,scale:i<=eK?t.width/e.width:t.height/e.height}},eQ=(e,t,a,n,r)=>{var i=t*a,s=e.height*i,o=e.width*i;return{left:r?-(r.left*i):n.x-.5*o,top:r?-(r.top*i):n.y-.5*s,height:s,width:o}},eJ=e=>{var t=e&&"string"==typeof e?e.split(","):void 0;return t?{top:Number(t[0]),right:Number(t[1]),bottom:Number(t[2]),left:Number(t[3])}:void 0},eX=(e,t,a)=>{var n=t.width/e.width,r={top:Math.floor(-(e.top*n)),right:Math.floor((a.width-e.left)*n),bottom:Math.floor((a.height-e.top)*n),left:Math.floor(-(e.left*n))};return`${r.top},${r.right},${r.bottom},${r.left}`},e0=(e,t)=>{var a=g()({},e);return e.left+e.width<t.width&&(a.left=t.width-e.width),e.left>0&&(a.left=0),e.top+e.height<t.height&&(a.top=t.height-e.height),e.top>0&&(a.top=0),a},e1=(e,t,a,n,r)=>{var i=e*t,s=a.width*i,o=a.height*i,l=s-n.width,d=o-n.height;return{left:n.left-(Math.abs(n.left)+r.x)/n.width*l,top:n.top-(Math.abs(n.top)+r.y)/n.height*d,width:s,height:o}},e2=e=>({x:.5*e.width,y:.5*e.height});let e5={opacity50:"klAXf",header:"xfYy6",avatarButNoHeaderImage:"GavZM",headerPopoverOpen:"FQv0L",actions:"xZeGG",inactive:"xq33i",isBlurActive:"bxP7u",blogLink:"FIbZt",name:"RzXgL",fullUrl:"UMd4K",editButtonWrapper:"vedqR",editAppearanceButton:"v8miJ",editAppearanceText:"DdI5l",confirmActionButtons:"mPpJS",actionButton:"MyRtW",zoomSlider:"jIYTI",rightActions:"DRpr_",editButton:"uEsQE",editHeader:"ZT1Ap",offOverlay:"Y2zzm",headerImageWrapper:"w52M7",headerImage:"H9Upm",noStretchImage:"ZW5xv",noImage:"x6yKE",draggable:"l48kY",dragging:"Lzamt",repositionWrapper:"eKZv0",repositionImage:"vrS6v",avatar:"El9z5",noHeaderImage:"APC7N",noAvatar:"Mpq8f",isCircle:"ANjB9",avatarBlurOverlay:"FJvpu",isSquare:"hLlge",info:"EPQuf",noText:"p2Lfl",title:"c1JQY",editing:"qZTLo",input:"qC1o8",notVisibleTitle:"Mu_af",description:"Nuqd5",descriptionEditable:"BL18W",textarea:"GIYcy",notVisibleDescription:"Upm72",disabled:"hWo2K",popoverOptions:"gLkmg",toggleField:"X6jXJ",fontField:"BOOOD",shapeSelection:"qphwQ",avatarShape:"DWEAr",circle:"rP_0r",selected:"xDe2T",toggleCenter:"QiWNR",blogSettingsUploadButton:"vLz5h",colorControls:"ecxSz",roundedPicker:"WGv8X",noMarginRight:"q1i7B",colorGroup:"MvEOd",fontControls:"mBzwo",fontButton:"V41Xe",fontWeightSelector:"BTp7J",on:"WspZz",titleColorPicker:"RQbff",zoomRange:"jsup4",badgePreviewContainer:"PkbOW",badgeManager:"R4wth"};var e4=a(77865),e3=a(46244),e6=a(57056),e7=a(40486),e9=a(93799),e8=a(88451),te=a(24078),tt=a(40092),ta=a(35215),tn="blog description length exceeded",tr="header upload failed",ti="avatar upload failed",ts="badge update failed",to=["headerStretch","showHeaderImage","showAvatar","avatarShape","linkColor","backgroundColor","titleFont","titleFontWeight","titleColor","showTitle","showDescription","headerBounds","imagePosition"],tl=["title","description"],td=(e,t,a)=>(0,te.c)(t,t=>e.includes(t),e=>{var t=u()(e,1)[0];return[t,a[t]]});let tc=function(e,t){var a=(0,o.bp)().apiFetch,r=(0,e7.L)(e).mutateAsync,i=(0,e4.NL)();return(0,e3.D)(g()(g()({},t),{},{mutationFn:t=>{var n,i,s,o,l,d,c,u,h,g,p,m,f,b,v,x,y,w;return en()().async(function(j){for(;;)switch(j.prev=j.next){case 0:if(n=t.initialValues,i=t.payload,o=(s=t.updatedImages).avatar,l=s.header,d=t.updatedTumblrmartAccessories,c=t.canShowBadges,u=[],(h=(0,e6.diff)(n,i))&&(Object.keys(g=td(to,h,i)).length&&u.push(a(`/v2/blog/${e}/theme_settings`,{method:"POST",body:(0,e8.v)(g)})),Object.keys(p=td(tl,h,i)).length&&(null!==(m=p.description)&&void 0!==m&&m.includes("\n")&&(p.description=p.description.replace(/\n/g,"<br />")),u.push(r(p).catch(e=>{if(null!=e&&e.detailedErrors.some()throw Error(tn);throw e})))),f=c!==i.canShowBadges,(null!=d&&d.badges||f)&&(b={},null!=d&&d.badges&&(v=d.badges.length>0?d.badges.map(.filter(e=>(e.active_count||0)>0):[],b.badges={active:v}),c!==i.canShowBadges&&(b.can_show_badges=c),u.push(a(`/v2/blog/${e}/tumblrmart_accessories`,{body:b,method:"PATCH"}).catch(()=>{throw Error(ts)}))),l&&((x=new FormData).append("data",l.file),x.append("header_stretch",i.headerStretch.toString()),"string"==typeof i.headerBounds&&x.append("header_bounds",null===(y=i.headerBounds)||void 0===y?void 0:y.toString()),u.push(a(`/v2/blog/${e}/header`,{method:"POST",body:x,headers:{"Content-Type":"multipart/form-data"}}).catch(()=>{throw Error(tr)}))),!o){j.next=12;break}return j.next=10,en()().awrap((0,tt.$k)(o.file));case 10:w=j.sent,u.push(a(`/v2/blog/${e}/avatar`,{method:"POST",body:{data:w.replace("data:","").replace(/^.+,/,"")}}).catch();case 12:return j.abrupt("return",Promise.all(u));case 13:case"end":return j.stop()}},null,null,null,Promise)},onSuccess:(a,r,s)=>{var o;i.invalidateQueries({queryKey:(0,ta.R)(e)}),i.invalidateQueries({queryKey:(0,eZ.r)(e)}),i.invalidateQueries({queryKey:(0,n.cP)(e,"blogSettings")}),null===(o=t.onSuccess)||void 0===o||o.call(t,a,r,s)},onSettled:(a,r,s,o)=>{var l,d=s.canShowBadges,c=s.updatedTumblrmartAccessories,u=s.payload;(null!=c&&c.badges||d!==u.canShowBadges)&&(i.invalidateQueries({queryKey:(0,n.cP)(e,"peepr")}),i.invalidateQueries({queryKey:(0,n.cP)(e,"blogSettings")}),i.invalidateQueries({queryKey:(0,eZ.r)(e)})),null===(l=t.onSettled)||void 0===l||l.call(t,a,r,{updatedTumblrmartAccessories:c},o)}}))};var tu=r.createContext(void 0),th=r.createContext(,tg=r.createContext(null),tp=A.ZP,tm=A.ZP,tf=A.ZP,tb=tv=(e,t)=>{var a,n,r,i,s,o;switch(t.type){case"EDIT":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{edit:t.action,popover:"none"})});case"EDIT_DONE":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{edit:"none",popover:"none"})});case"OPEN_POPOVER":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{popover:t.popover})});case"OPEN_BADGE_MANAGER":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{popover:"badges",edit:"appearance"})});case"RESET_AVATAR":return g()(g()({},e),{},{updatedImages:g()(g()({},e.updatedImages),{},{avatar:void 0}),pendingChanges:!0});case"RESET_HEADER_IMAGE":return g()(g()({},e),{},{updatedImages:g()(g()({},e.updatedImages),{},{header:void 0}),pendingChanges:!0});case"SET_PENDING_CHANGES":return g()(g()({},e),{},{pendingChanges:t.value});case"STRETCH_HEADER":return g()(g()({},e),{},{styles:g()(g()({},e.styles),{},{headerStretch:!e.styles.headerStretch,imagePosition:void 0,headerBounds:void 0}),pendingChanges:!0});case"EDIT_STYLE":return g()(g()({},e),{},{styles:g()(g()({},e.styles),t.field),pendingChanges:!0});case"SET_IS_DRAGGING_HEADER":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{draggingHeader:t.value})});case"SET_IS_DRAGGING_AVATAR":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{draggingAvatar:t.value})});case"UPDATE_HEADER_IMAGE":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{popover:"none"}),updatedImages:g()(g()({},e.updatedImages),{},{header:{dataUrl:t.url,file:t.file}}),styles:g()(g()({},e.styles),{},{headerBounds:void 0}),pendingChanges:!0});case"UPDATE_AVATAR_IMAGE":return g()(g()({},e),{},{updatedImages:g()(g()({},e.updatedImages),{},{avatar:{dataUrl:t.url,file:t.file}}),controls:g()(g()({},e.controls),{},{popover:"none"}),pendingChanges:!0});case"CANCEL_REPOSITION":return g()(g()({},e),{},{controls:g()(g()({},e.controls),{},{edit:"appearance",popover:"none"}),styles:g()(g()({},e.styles),{},{imagePosition:void 0,headerBounds:t.bounds})});case"UPDATE_IMAGE_POSITION":return g()(g()({},e),{},{styles:g()(g()({},e.styles),{},{imagePosition:t.position,headerBounds:t.bounds}),pendingChanges:!0});case"RESET_STYLES":return g()(g()({},e),{},{styles:t.initialStyle,updatedImages:g()(g()({},e.updatedImages),{},{avatar:void 0,header:void 0}),pendingChanges:!1});case"UPDATE_AVATAR":return g()(g()({},e),{},{avatar:t.newAvatar});case"UPDATE_STYLES":return g()(g()({},e),{},{styles:t.newInitialStyle});case"HYDRATE_TUMBLRMART_ACCESSORIES":return g()(g()({},e),{},{updatedTumblrmartAccessories:t.updatedTumblrmartAccessories});case"UPDATE_TUMBLRMART_BADGE":return r=(null==(n=null===(a=e.updatedTumblrmartAccessories)||void 0===a||null===(a=a.badges)||void 0===a?void 0:a.find()?void 0:n.activeCount)===0&&(t.badge.activeCount||0)>0?[...((null===(i=e.updatedTumblrmartAccessories)||void 0===i?void 0:i.badges)||[]).filter(,t.badge]:n?null===(s=e.updatedTumblrmartAccessories)||void 0===s||null===(s=s.badges)||void 0===s?void 0:s.map(:[...(null===(o=e.updatedTumblrmartAccessories)||void 0===o?void 0:o.badges)||[],t.badge],g()(g()({},e),{},{updatedTumblrmartAccessories:{badges:r},pendingChanges:!0});case"RESET_TUMBLRMART_ACCESSORIES":return g()(g()({},e),{},{updatedTumblrmartAccessories:{badges:void 0},tumblrmartAccessories:t.initialTumblrmartAccessories});case"TOGGLE_CAN_SHOW_BADGES":return g()(g()({},e),{},{canShowBadges:!e.canShowBadges,pendingChanges:!0});case"UPDATE_THEME":return g()(g()({},e),{},{theme:t.newTheme});case"MUTATION_START":return g()(g()({},e),{},{isUpdating:!0});case"MUTATION_END":return g()(g()({},e),{},{isUpdating:!1});default:return e}},tx=e=>{var t=r.useState(null),a=(0,o.bp)().features,n=(0,i.TH)().pathname,s=(0,i.UO)().section,l=e.avatar,d=e.cname,c=e.description,h=e.descriptionNpf,p=e.name,f=e.showBadgeManagement,b=e.theme,v=e.title,y=e.tumblrmartAccessories,w=e.canShowBadges,j=b.headerStretch,k=b.showHeaderImage,N=b.showAvatar,S=b.avatarShape,_=b.linkColor,T=b.backgroundColor,C=b.titleFont,P=b.titleFontWeight,A=b.showTitle,E=b.titleColor,B=b.showDescription,D=b.headerBounds,Z=()=>Object.freeze({headerStretch:!!j,showHeaderImage:!!k,showAvatar:!!N,avatarShape:S,linkColor:_,backgroundColor:T,title:v,titleFont:C,titleFontWeight:P,showTitle:A,titleColor:E,description:null==c?void 0:c.trimStart(),descriptionNpf:h,showDescription:B,headerBounds:D,canShowBadges:w}),L="accessories"===s,M=r.useReducer(tv,{styles:Z(),controls:{edit:L?"appearance":"none",popover:L?"badges":"none",draggingAvatar:!1,draggingHeader:!1},updatedImages:{avatar:void 0,header:void 0},showBadgeManagement:f,tumblrmartAccessories:y,theme:b,avatar:l,cname:d,name:p,pendingChanges:!1,isUpdating:!1,updatedTumblrmartAccessories:{badges:void 0},canShowBadges:w}),I=u()(M,2),R=I[0],O=I[1],U=(0,F.g)(),$=U.data,z=U.refetch;(0,J.Z)(()=>{if(O({type:"UPDATE_AVATAR",newAvatar:l}),null!=$&&$.tmgWebSDK&&null!=$&&$.tosAccepted&&a.liveStreamingWeb){var e=$.tmgWebSDK,t=$.networkUserId,n=$.profile;e.registerProfile(t,g()(g()({},n),{},{images:[l[0].url]}),}},[l]),(0,J.Z)(()=>{O({type:"UPDATE_STYLES",newInitialStyle:Z()})},[c,h,b,v]),(0,J.Z)(()=>{O({type:"RESET_TUMBLRMART_ACCESSORIES",initialTumblrmartAccessories:y})},[y]),(0,J.Z)([b]),(0,J.Z)(()=>{O({type:"OPEN_POPOVER",popover:L?"badges":"none"})},[n]);var G={"--blog-background-color":R.styles.backgroundColor};return(0,x.jsx)("div",{"data-testid":"header-root-element",className:m()(e5.header,{[e5.avatarButNoHeaderImage]:"none"===R.controls.edit&&R.styles.showAvatar&&!R.styles.showHeaderImage}),style:G,children:(0,x.jsx)(th.Provider,{value:O,children:(0,x.jsx)(tg.Provider,{value:t,children:(0,x.jsx)(tu.Provider,g()(g()({},e),{},{value:g()(g()({},R),{},{getInitialStyle:Z})}))})})})},ty=()=>{var e=G().isActive,t=tb().controls,a=r.useContext(tg);return(0,x.jsx)("div",{ref:null==a?void 0:a[1],className:m()(e5.actions,{[e5.inactive]:"avatar"===t.popover,[e5.isBlurActive]:e}),children:"none"===t.edit?(0,x.jsx)(tj,{}):null})},tw=e=>{var t=e.children,a=r.useContext(tg);return null!=a&&a[0]?U.createPortal(t,a[0]):null},tj=()=>{var e=tb(),t=e.cname,a=e.name,n=e.styles,i=r.useContext(th),s=!(n.showHeaderImage&&n.headerStretch),o={color:s?n.linkColor:X.white};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:(0,x.jsxs)("a",{className:e5.blogLink,href:t?`https://${t}`:(0,Y.Z)(a),rel:"noopener",children:[(0,x.jsx)("span",{className:e5.name,style:o,children:a}),(0,x.jsx)("span",{className:e5.fullUrl,style:o,children:t||(0,K.Z)(a)})]})}),(0,x.jsx)("div",{className:e5.editButtonWrapper,children:(0,x.jsx)(E.Z,{wrapperClassName:e5.editAppearanceButton,onClick:backgroundColor:s?n.linkColor:X.white,textColor:s?n.backgroundColor:X.black,children:(0,x.jsx)(I.ZP,{comment:"Button to edit the blog settings header",children:"Edit appearance"})})})]})},tk=()=>{var e=(0,o.bp)(),t=e._c,a=e._t,n=G().toggleIsActive,s=tb(),l=s.controls,d=s.name,c=s.styles,u=s.updatedImages,h=s.pendingChanges,g=s.getInitialStyle,p=s.updatedTumblrmartAccessories,f=s.tumblrmartAccessories,b=s.canShowBadges,v=r.useContext(th),y=(0,q.V)().toggleToast,w=(0,i.s0)(),j=tc(d,{onMutate:()=>{v({type:"MUTATION_START"})},onError:e=>{switch(e.message){case ti:v({type:"RESET_AVATAR"}),y(t("Error message when the avatar image was not uploaded as a result of an error","The avatar image was not updated. Please try again"),"error");break;case tr:v({type:"RESET_HEADER_IMAGE"}),y(t("Error message when the blog header image was not uploaded as a result of an error","The header image was not updated. Please try again"),"error");break;case ts:y(t("[Badge Management] Error message that appears when updating active badge fails.","Oops! Something went wrong while updating your badges. Please try again later."),"error");break;case tn:y(t("Error message when the blog description is too long","Sorry! We are unable to save your settings as your blog description is more than %1$s characters",["2000"]),"error");break;default:y(t("Error message when the blog header info was not saved for an unknown reason","Something went wrong. Please try again"),"error")}},onSuccess:onSettled:()=>{v({type:"SET_PENDING_CHANGES",value:!1}),v({type:"MUTATION_END"})}}),N=j.isPending,_=j.mutate;if("appearance"!==l.edit)return null;var B=!(c.showHeaderImage&&c.headerStretch);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:m()(e5.editAppearanceText,{[e5.headerPopoverOpen]:"header-image"===l.popover}),style:{color:B?c.linkColor:X.white},children:(0,x.jsx)(I.ZP,{comment:"Heading shown when user is editing their blog appearance",children:"Edit appearance"})}),(0,x.jsxs)("div",{className:e5.rightActions,children:[(0,x.jsxs)("div",{className:m()(e5.confirmActionButtons,{[e5.headerPopoverOpen]:"header-image"===l.popover}),children:[(0,x.jsx)(E.Z,{wrapperClassName:e5.actionButton,backgroundColor:X.transparent,disabledBackgroundColor:X.transparent,disabledTheme:"default",textColor:B?c.linkColor:X.white,disabledTextColor:X.transparentWhite50,disabled:N,style:{width:"fit-content"},onClick:()=>{v({type:"EDIT_DONE"}),v({type:"RESET_STYLES",initialStyle:g()}),v({type:"RESET_TUMBLRMART_ACCESSORIES",initialTumblrmartAccessories:f}),w((0,O.BR)({blogName:d}))},children:(0,x.jsx)(I.ZP,{comment:"Cancel the changes after updating the blog settings header",children:"Cancel"})}),(0,x.jsx)(E.Z,{wrapperClassName:e5.actionButton,disabledTheme:"default",disabledBackgroundColor:B?(0,Q.ZP)(c.linkColor,.4):X.paletteWhite,backgroundColor:B?c.linkColor:X.paletteWhite,textColor:B?c.backgroundColor:X.paletteGray80,style:{width:"fit-content"},onClick:()=>{_({initialValues:g(),payload:c,updatedImages:u,updatedTumblrmartAccessories:p,canShowBadges:b})},disabled:N||!h,disabledTextColor:X.paletteGray25,children:N?(0,x.jsx)(P.Z,{small:!0,color:X.paletteGray80}):(0,x.jsx)(I.ZP,{comment:"Save the changes after updating the blog settings header",children:"Save"})})]}),(0,x.jsx)("div",{children:(0,x.jsx)(A.ZP,{isOpen:"header-image"===l.popover,toggle:()=>v({type:"OPEN_POPOVER",popover:"none"===l.popover?"header-image":"none"}),width:220,height:"auto",component:(0,x.jsxs)("ul",{"data-testid":"image-edit-popover",className:e5.popoverOptions,children:[(0,x.jsx)("li",{className:e5.toggleField,children:(0,x.jsxs)(R.Z,{wrapperClassName:e5.blogSettingsUploadButton,fileTypes:["image"],onChange:e=>{var t=e.target.files;if(null!=t&&t.length){var n=t[0];if((0,k.M5)(n.type,void 0)){y(a("File type not supported"),"error");return}if((0,k.Nh)(n.size)){y(a("File is too big"),"error");return}v({type:"UPDATE_HEADER_IMAGE",url:URL.createObjectURL(n),file:n})}},children:[(0,x.jsx)(C,{size:{height:22,width:22},colors:{primary:X.paletteGray80}}),(0,x.jsx)(I.ZP,{comment:"Choose a photo from the user's computer",children:"Choose a photo"})]})}),(0,x.jsx)("li",{children:(0,x.jsxs)("button",{className:e5.actionButton,disabled:!c.headerStretch,onClick:()=>{n(),v({type:"EDIT",action:"reposition"})},children:[(0,x.jsx)(T,{size:{height:22,width:22},colors:{primary:X.paletteGray80}}),(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{comment:"Change the visible part of an image on a blog settings header",children:"Reposition"})})]})}),(0,x.jsxs)("li",{className:e5.toggleField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{comment:"An image will fill the available space",children:"Stretch header image"})}),(0,x.jsx)(M.Z,{"data-testid":"stretch-image-toggle",checked:c.headerStretch,className:e5.toggleCenter,size:"small",onChange:)]}),(0,x.jsxs)("li",{className:e5.toggleField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{children:"Show header image"})}),(0,x.jsx)(M.Z,{"data-testid":"show-header-image-toggle",checked:c.showHeaderImage,className:e5.toggleCenter,size:"small",onChange:()=>v({type:"EDIT_STYLE",field:{showHeaderImage:!c.showHeaderImage}})})]})]}),children:"avatar"!==l.popover?(0,x.jsx)("button",{"aria-label":t("Button to customize the blog header image","Edit blog header image"),className:m()(e5.editButton,e5.editHeader),disabled:N,children:(0,x.jsx)(S.Z,{size:{height:16,width:16},colors:{primary:X.paletteWhite}})}):(0,x.jsx)(x.Fragment,{})})})]})]})},tN=e=>{var t=e.zoom,a=e.setZoom,n=e.isGrabbing,i=G().toggleIsActive,s=tb().theme,l=r.useContext(th),d=(0,o.bp)()._c;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:m()(e5.editAppearanceText,{[e5.opacity50]:n}),children:(0,x.jsx)(I.ZP,{comment:"Indicates the action of repositioning the blog settings header image",children:"Position Image"})}),(0,x.jsx)("div",{className:e5.zoomSlider,children:(0,x.jsx)("input",{className:e5.zoomRange,type:"range",min:"1",max:"3",step:"0.2",value:t,alt:d("Slider used to zoom an image in/out","Drag to zoom the image in or out"),onChange:)}),(0,x.jsx)("div",{className:m()(e5.rightActions,{[e5.opacity50]:n}),children:(0,x.jsxs)("div",{className:e5.confirmActionButtons,children:[(0,x.jsx)(E.Z,{backgroundColor:X.transparent,textColor:X.white,style:{width:"fit-content"},onClick:()=>{i(),l({type:"CANCEL_REPOSITION",bounds:s.headerBounds})},children:(0,x.jsx)(I.ZP,{comment:"Cancel the changes",children:"Cancel"})}),(0,x.jsx)(E.Z,{backgroundColor:X.paletteWhite,textColor:X.paletteGray80,style:{width:"fit-content"},onClick:children:(0,x.jsx)(I.ZP,{comment:"Save the changes",children:"Done"})})]})})]})},tS=e=>{var t=e.wrapper,a=e.image,n=tb(),i=n.updatedImages,s=n.theme,o=n.styles,l=r.useContext(th),d=i.header?`url("${i.header.dataUrl}")`:`url("${s.headerImage}")`,c=function(e,t,a){var n=(0,r.useMemo)(()=>({width:e.naturalWidth,height:e.naturalHeight}),[e.naturalHeight,e.naturalWidth]),i=t.getBoundingClientRect(),s=(0,r.useMemo)([i.height,i.width]),o=e2(s),l=eJ(a),d=(0,r.useMemo)([s,l,n]),c=d.scale,h=d.zoom,g=(0,r.useState)(eQ(n,c,h,o,l)),p=u()(g,2);return{initialZoom:h,position:p[0],setPosition:p[1],imageDimensions:n,boundingBox:s,centerPoint:o,scale:c}}(a,t,o.headerBounds),h=c.centerPoint,p=c.position,m=c.boundingBox,f=c.scale,b=c.initialZoom,v=c.imageDimensions,y=c.setPosition,w=function(e){var t=e.image,a=e.position,n=e.boundingBox,i=e.setPosition,s=e.onDragEnd,o=(0,r.useRef)({x:0,y:0}),l=(0,r.useRef)(!1),d=(0,r.useState)(!1),c=u()(d,2),h=c[0],p=c[1],m=e=>{l.current=!0,o.current={x:e.screenX,y:e.screenY},t.classList.remove(e5.draggable),t.classList.add(e5.dragging),p(!0)},f=(0,eq.Z)(e=>{if(e.preventDefault(),e.stopPropagation(),l.current){var t=g()({},a);t.left+=e.screenX-o.current.x,t.top+=e.screenY-o.current.y,o.current.x=e.screenX,o.current.y=e.screenY;var r=e0(t,n);i(r),s(r)}},40),b=()=>{l.current=!1,f.flush(),p(!1),t.classList.add(e5.draggable),t.classList.remove(e5.dragging)};return(0,r.useEffect)(()=>(t.addEventListener("mousedown",m),document.body.addEventListener("mousemove",f),document.body.addEventListener("mouseup",b),()=>{t.removeEventListener("mousedown",m),document.body.removeEventListener("mousemove",f),document.body.removeEventListener("mouseup",b)})),h}({image:a,position:p,boundingBox:m,setPosition:y,onDragEnd:e=>{l({type:"UPDATE_IMAGE_POSITION",bounds:eX(e,v,m),position:e})}}),j=function(e){var t=(0,r.useState)(e),a=u()(t,2);return{zoom:a[0],setZoom:a[1]}}(b),k=j.zoom,N=j.setZoom,S=p.top,_=p.left,T=p.height,C=p.width;return(0,x.jsxs)("div",{className:e5.repositionWrapper,children:[(0,x.jsx)("div",{className:e5.repositionImage,style:{backgroundImage:d,top:`${S}px`,left:`${_}px`,width:`${C}px`,height:`${T}px`}}),(0,x.jsx)(tw,{children:(0,x.jsx)(tN,{zoom:k,setZoom:e=>{N(e);var t=e0(e1(f,e,v,p,h),m);l({type:"UPDATE_IMAGE_POSITION",bounds:eX(t,v,m),position:t}),y(t)},isGrabbing:w})})]})},t_=()=>{var e=G(),t=e.isActive,a=e.toggleIsActive,n=tb(),i=n.styles,s=n.theme,l=n.updatedImages,d=n.controls,c=r.useContext(th),u=(0,o.bp)()._c,h=r.useRef(null),g=r.useRef(null);if("none"===d.edit&&!i.showHeaderImage)return null;var p=l.header?`url("${l.header.dataUrl}")`:`url("${i.headerStretch?s.headerImageFocused:s.headerImageScaled}")`,f=l.header?l.header.dataUrl:s.headerImage;g.current&&(g.current.onload=()=>{s.headerImage!==f&&(a(),c({type:"EDIT",action:"reposition"}))});var b=i.imagePosition&&"reposition"!==d.edit?{backgroundColor:i.backgroundColor,backgroundImage:l.header?`url("${l.header.dataUrl}")`:`url("${s.headerImage}")`,top:`${i.imagePosition.top}px`,left:`${i.imagePosition.left}px`,width:`${i.imagePosition.width}px`,height:`${i.imagePosition.height}px`}:{backgroundColor:i.backgroundColor,backgroundImage:p};return(0,x.jsx)("div",{className:m()(e5.headerImageWrapper,{[e5.isBlurActive]:t}),ref:h,children:(0,x.jsxs)("div",{"data-testid":"header-image",className:m()(e5.headerImage,{[e5.noImage]:!i.showHeaderImage,[e5.noStretchImage]:!i.headerStretch}),style:b,children:["reposition"===d.edit&&h.current&&g.current&&(0,x.jsx)(tS,{wrapper:h.current,image:g.current}),(0,x.jsx)("img",{ref:g,src:f,alt:u("Image alt for the blog's header image","The blog's header image"),draggable:!1,className:m()({[e5.draggable]:"reposition"===d.edit})}),(0,x.jsx)("div",{"data-testid":"main-image-overlay",className:e5.offOverlay,style:d.draggingHeader?{backgroundColor:i.titleColor,opacity:.8}:{}}),"reposition"!==d.edit&&(0,x.jsx)(k.rE,{testId:"main-image-dropzone",toggleDragging:e=>c({type:"SET_IS_DRAGGING_HEADER",value:e}),onNewImage:)]})})},tT=()=>{var e,t=G().isActive,a=(0,q.V)().toggleToast,n=(0,o.bp)(),i=n._c,s=n._t,l=tb(),d=l.styles,c=l.avatar,u=l.controls,h=l.isUpdating,p=l.updatedImages,f=r.useContext(th);if("none"===u.edit&&!d.showAvatar)return null;var b=p.avatar?p.avatar.dataUrl:(null===(e=c.find()||void 0===e?void 0:e.url)||c[0].url;return(0,x.jsxs)("div",{"data-testid":"avatar-image",className:m()(e5.avatar,{[e5.isCircle]:d.avatarShape===W.o.Circle,[e5.isSquare]:d.avatarShape===W.o.Square,[e5.noAvatar]:!d.showAvatar,[e5.noHeaderImage]:"none"===u.edit&&!d.showHeaderImage,[e5.isBlurActive]:t}),style:g()({backgroundImage:`url("${b}")`},!t&&{color:d.backgroundColor}),children:[t&&(0,x.jsx)("div",{className:e5.avatarBlurOverlay,"data-testid":"avatar-blur-overlay"}),(0,x.jsx)("div",{"data-testid":"avatar-overlay",className:e5.offOverlay,style:u.draggingAvatar?{backgroundColor:d.titleColor,opacity:.8}:{}}),(0,x.jsx)(k.rE,{testId:"avatar-dropzone",toggleDragging:onNewImage:),"appearance"===u.edit&&(0,x.jsx)(A.ZP,{isOpen:"avatar"===u.popover,toggle:()=>f({type:"OPEN_POPOVER",popover:"none"===u.popover?"avatar":"none"}),width:210,height:"auto",targetStyles:{width:"100%"},component:(0,x.jsxs)("ul",{"data-testid":"avatar-edit-popover",className:e5.popoverOptions,children:[(0,x.jsx)("li",{className:e5.toggleField,children:(0,x.jsxs)(R.Z,{wrapperClassName:e5.blogSettingsUploadButton,fileTypes:["image"],onChange:e=>{var t=e.target.files;if(null!=t&&t.length){var n=t[0];if((0,k.M5)(n.type,void 0)){a(s("File type not supported"),"error");return}if((0,k.Nh)(n.size)){a(s("File is too big"),"error");return}f({type:"UPDATE_AVATAR_IMAGE",url:URL.createObjectURL(n),file:n})}},children:[(0,x.jsx)(C,{size:{height:22,width:22},colors:{primary:X.paletteGray80}}),(0,x.jsx)(I.ZP,{comment:"Choose a photo from the user's computer",children:"Choose a photo"})]})}),(0,x.jsxs)("li",{className:e5.toggleField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{children:"Show avatar"})}),(0,x.jsx)(M.Z,{"data-testid":"show-avatar-image-toggle",checked:d.showAvatar,className:e5.toggleCenter,size:"small",onChange:()=>f({type:"EDIT_STYLE",field:{showAvatar:!d.showAvatar}})})]}),(0,x.jsxs)("li",{className:e5.shapeSelection,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{children:"Shape"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{"aria-label":i("Button to change the avatar shape to be a square","Set the avatar shape to be a square"),className:m()(e5.avatarShape,{[e5.selected]:d.avatarShape===W.o.Square}),onClick:()=>f({type:"EDIT_STYLE",field:{avatarShape:W.o.Square}})}),(0,x.jsx)("button",{"aria-label":i("Button to change the avatar shape to be a circle","Set the avatar shape to be a circle"),className:m()(e5.avatarShape,e5.circle,{[e5.selected]:d.avatarShape===W.o.Circle}),onClick:()=>{f({type:"EDIT_STYLE",field:{avatarShape:W.o.Circle}})}})]})]})]}),children:"header-image"===u.popover||u.draggingAvatar?(0,x.jsx)(x.Fragment,{}):(0,x.jsx)("button",{"aria-label":i("Button to customize the avatar image","Edit blog avatar image"),className:e5.editButton,disabled:h,children:(0,x.jsx)(S.Z,{size:{height:16,width:16},colors:{primary:X.paletteWhite}})})})]})},tC=()=>{var e=(0,o.bp)(),t=e._c,a=e.logEvent,n=(0,i.s0)(),l=tb(),d=l.controls,c=l.name,u=l.showBadgeManagement,h=l.tumblrmartAccessories,p=l.updatedTumblrmartAccessories,m=l.canShowBadges,b=r.useContext(th),v=null!=p&&p.badges?g()(g()({},p),{},{badges:p.badges.filter(e=>(e.activeCount||0)>0)}):h;return(0,x.jsx)(A.ZP,{isOpen:"badges"===d.popover,onOpen:toggle:()=>{"badges"===d.popover?n((0,O.BR)({blogName:c})):(n((0,O.cB)(c)),b({type:"OPEN_BADGE_MANAGER"}))},width:"410px",height:"420px",targetStyles:{width:"100%"},component:(0,x.jsx)(eV,{}),popoverWrapperClassName:e5.badgeManager,position:"bottom",children:(0,x.jsx)("button",{className:e5.badgePreviewContainer,title:null!=v&&v.badges?t("[badge management] label for button to open badge manager","Manage badges"):void 0,children:(0,x.jsx)(f._,{blogName:c,canEdit:u,canShowBadges:m,isHoverCardDisabled:!0,tumblrmartAccessories:v,wrapperClassName:"blogSettingsBadgesWrapper"})})})},tP=()=>{var e,t=(0,o.bp)()._c,a=tb(),n=a.controls,i=a.isUpdating,s=a.styles,l=r.useContext(th),d=(0,r.useState)(!1),c=u()(d,2),h=c[0],g=c[1],p="appearance"===n.edit||"reposition"===n.edit,f=w(s.titleFont),v=f.display_name,y=f.family;return(0,x.jsxs)("div",{className:m()(e5.info,{[e5.noAvatar]:"none"===n.edit&&!s.showAvatar,[e5.noHeaderImage]:"none"===n.edit&&!s.showHeaderImage,[e5.noText]:"none"===n.edit&&!s.showTitle&&!s.showDescription}),children:["appearance"!==n.edit?s.showTitle?(0,x.jsx)("h1",{className:m()(e5.title,{[e5.editing]:p}),style:{fontFamily:y,color:s.titleColor,fontWeight:s.titleFontWeight,textDecorationColor:s.linkColor},children:s.title}):null:(0,x.jsx)(tp,{isOpen:"title"===n.popover,toggle:()=>{h||l({type:"OPEN_POPOVER",popover:"title"===n.popover?"none":"title"})},width:"250px",height:"auto",targetStyles:{width:"100%"},component:(0,x.jsxs)("ul",{"data-testid":"blog-name-edit-popover",className:e5.popoverOptions,children:[(0,x.jsxs)("li",{className:e5.toggleField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{comment:"Toggle to show or hide the blog title",children:"Show title"})}),(0,x.jsx)(M.Z,{"data-testid":"show-title-toggle",checked:s.showTitle,className:e5.toggleCenter,size:"small",onChange:()=>l({type:"EDIT_STYLE",field:{showTitle:!s.showTitle}})})]}),(0,x.jsxs)("li",{className:e5.fontField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{comment:"Font selection for the blog title",children:"Font"})}),(0,x.jsxs)("div",{className:e5.fontControls,children:[(0,x.jsx)(tm,{usePortals:!0,isOpen:h,width:"auto",height:"260px",targetStyles:{verticalAlign:"initial"},toggle:component:(0,x.jsx)(j,{currentFont:s.titleFont,setFont:),children:(0,x.jsxs)("button",{className:e5.fontButton,style:{fontFamily:y,fontWeight:s.titleFontWeight},children:[v,(0,x.jsx)(N.sn,{})]})}),(0,x.jsx)("div",{className:e5.fontWeightSelector,children:(0,x.jsx)("button",{className:m()({[e5.on]:"bold"===s.titleFontWeight}),style:{fontWeight:s.titleFontWeight},onClick:()=>l({type:"EDIT_STYLE",field:{titleFontWeight:"bold"===s.titleFontWeight?"normal":"bold"}}),"aria-label":t("Word that indicates font boldness","Bold"),children:"B"})})]})]}),(0,x.jsxs)("li",{className:e5.toggleField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{children:"Color"})}),(0,x.jsx)("div",{className:m()(e5.colorControls,e5.titleColorPicker),children:(0,x.jsx)("div",{className:m()(e5.roundedPicker,e5.noMarginRight),children:(0,x.jsx)("input",{type:"color",id:"titleColor",name:"titleColor",value:s.titleColor,onChange:e=>l({type:"EDIT_STYLE",field:{titleColor:e.target.value}})})})})]})]}),children:(0,x.jsx)("input",{value:s.title,className:m()(e5.title,e5.input,{[e5.editing]:p,[e5.notVisibleTitle]:!s.showTitle}),disabled:i,style:{fontFamily:y,color:s.titleColor,fontWeight:s.titleFontWeight,textDecorationColor:s.linkColor},onFocus:()=>{g(!1)},onChange:e=>l({type:"EDIT_STYLE",field:{title:e.target.value}}),placeholder:t("Placeholder for the input that allows users to set the blog title on the blog settings","Title"),spellCheck:!1,"aria-label":t("Input to change the blog title","Blog title")})}),(0,x.jsx)(tC,{}),"appearance"!==n.edit?s.showDescription?(0,x.jsx)("div",{className:e5.description,children:(0,x.jsx)(b.Z,{size:H.U0.Medium,description:s.descriptionNpf||[{type:V.kH.Text,text:""}],styles:s})}):null:(0,x.jsx)(tf,{isOpen:"description"===n.popover,toggle:()=>{g(!1),l({type:"OPEN_POPOVER",popover:"description"===n.popover?"none":"description"})},width:"250px",height:"auto",targetStyles:{width:"100%"},component:(0,x.jsx)("ul",{"data-testid":"blog-name-edit-popover",className:e5.popoverOptions,children:(0,x.jsxs)("li",{className:e5.toggleField,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{comment:"Toggle to show or hide the blog description",children:"Show description"})}),(0,x.jsx)(M.Z,{"data-testid":"show-description-toggle",checked:s.showDescription,className:e5.toggleCenter,size:"small",onChange:()=>l({type:"EDIT_STYLE",field:{showDescription:!s.showDescription}})})]})}),children:(0,x.jsx)(L,{value:(null===(e=s.description)||void 0===e?void 0:e.replace(/<br \/>/g,"\n"))||"",className:m()(e5.descriptionEditable,e5.textarea,{[e5.editing]:p,[e5.notVisibleDescription]:!s.showDescription,[e5.disabled]:i}),disabled:i,style:{color:s.titleColor,textDecorationColor:s.linkColor},onChange:e=>{l({type:"EDIT_STYLE",field:{description:e.target.value}})},label:t("Input to change the blog description","Blog description"),placeholder:t("Placeholder for the input that allows users to set the blog description on the blog settings","Description"),spellCheck:!1})})]})},tA=()=>{var e=tb(),t=e.controls,a=e.isUpdating,n=e.styles,i=r.useContext(th);return"appearance"!==t.edit&&"reposition"!==t.edit?null:(0,x.jsxs)("div",{className:m()(e5.colorControls,{[e5.disabled]:a}),children:[(0,x.jsxs)("div",{className:e5.colorGroup,children:[(0,x.jsx)("div",{className:e5.roundedPicker,children:(0,x.jsx)("input",{disabled:a,type:"color",id:"accent",name:"accent",value:n.linkColor,onChange:e=>i({type:"EDIT_STYLE",field:{linkColor:e.target.value}})})}),(0,x.jsx)("label",{htmlFor:"accent",children:(0,x.jsx)(I.ZP,{comment:"Color selector to change the colors of the blog view accents",children:"Accent"})})]}),(0,x.jsxs)("div",{className:e5.colorGroup,children:[(0,x.jsx)("div",{className:e5.roundedPicker,children:(0,x.jsx)("input",{disabled:a,type:"color",id:"background",name:"background",value:n.backgroundColor,onChange:e=>i({type:"EDIT_STYLE",field:{backgroundColor:e.target.value}})})}),(0,x.jsx)("label",{htmlFor:"background",children:(0,x.jsx)(I.ZP,{comment:"Color selector to change the background color of the blog view",children:"Background"})})]})]})},tE=a(32415),tB=a(24425),tD=a(25756),tZ=a(85795),tL=a(399),tM=a(68782),tI=["mutate"],tR=["passwordProtectedPassword"];let tO=e=>{var t=(0,o.bp)(),a=t._t,r=t.apiFetch,i=(0,e4.NL)(),s=(0,q.V)().toggleToast,l=(0,e3.D)({mutationFn:t=>(0,tZ.ZP)(r).updateBlogSettings(e,t).fetch(),onMutate:t=>{var a=i.getQueryData((0,n.cP)(e,"blogSettings"));t.passwordProtectedPassword;var r=D()(t,tR);return i.setQueryData((0,n.cP)(e,"blogSettings"),g()(g()({},a),r)),{previousInfo:a}},onError:(t,a,r)=>{null!=r&&r.previousInfo&&i.setQueryData((0,n.cP)(e,"blogSettings"),r.previousInfo)}}),d=l.mutate,c=D()(l,tI),u=()=>{s((0,tM.U)((0,tL.Pk)(a)),"error")},h=c.isPending,p=c.variables;return g()(g()({mutate:(e,t)=>d(e,g()({onError:u},t))},c),{},{isMutatingField:e=>h&&!!p&&Object.hasOwn(p,e)})};var tF=["blogName","setting"],tU=["blogName","setting"],t$=tz=e=>{var t=e.blogName,a=e.setting,n=D()(e,tF),r=(0,ta.Q)(t),i=r.data,s=r.isFetching,o=(0,e7.L)(t),l=o.mutate,d=o.isMutatingField,c=null==i?void 0:i[a],u=s||d(t$(a));return(0,x.jsx)(tD.Z,g()({checked:!!c,controlled:!0,disabled:u,id:`blog-settings-${a}`,onChange:()=>{l({[t$(a)]:!(null!=i&&i[a])})}},n))},tG=e=>{var t=e.blogName,a=e.setting,r=D()(e,tU),i=(0,n.$3)(t,"blogSettings"),s=i.data,o=i.isFetching,l=tO(t),d=l.mutate,c=l.isMutatingField,u=null==s?void 0:s[a],h=o||c(a);return(0,x.jsx)(tD.Z,g()({checked:!!u,controlled:!0,disabled:h,id:`blog-settings-${a}`,onChange:()=>{d({[a]:!(null!=s&&s[a])})}},r))};let tW=e=>!e)?(0,x.jsx)(tz,g()({},e)):(0,x.jsx)(tG,g()({},e)),tH=e=>{var t=e.blogName;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Blog avatar"}),children:(0,x.jsx)(tW,{blogName:t,setting:"showAuthorAvatar",label:(0,x.jsx)(I.ZP,{comment:"Label describing a setting that will show the author portrait next to a post on group blogs",children:"Show author portraits"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text next to a setting that will show the author portrait next to a post on group blogs",children:"On the Dashboard, followers will see authors' portraits in addition to this blog's portrait next to each post."})})})};var tV=a(81192),tq=a(66589),tK=a(10240),tY=a(9441);let tQ={shell:"RpOgn",withContent:"LCyHl",shellBlurOverlay:"oBLLF",blockedTumblrs:"bRMBl",inputWrapper:"K6jfy",featuredTags:"Abky6",input:"cGaDG",inputError:"wjvK6",add:"zgG6f",block:"BrTCn",remove:"TA6Sk",blockedTumblrsList:"hzyqF",removableFeaturedTags:"tx2eb",blockedTumblr:"ZmRX1",removableFeaturedTag:"c469_",blockedTumblrName:"o9bj9",removableFeaturedTagText:"QOWcA",blockedTumblrsPreview:"rAWzk",blockedTumblrPreview:"LeFHQ",blockedTumblrAvatar:"GT9oc",blockedTumblrError:"LmE_i",list:"mL7Ql",featuredTagPill:"k0bm8",repliesSelect:"WHmWu",mentionsSelect:"X7scp",tippingAlert:"kk9OI",tippingModalButtons:"Zfqv1",tippingModalText:"HExvK",showMore:"eVqNG",submissionsGuidelines:"CJjpt",submissionsTypes:"YoWWr",submissionsType:"e9tlM",downloadExport:"UaF7u",downloadExportButton:"LlFB2",downloadCheckLater:"yDRjF",discordUrl:"vOCEX",discordInput:"BMPYw",discordUrlHelpText:"REOIS",discord:"LbJEJ",discordUrlError:"DgrU9",tippingSuccessSplash:"z_6Um",rocketGif:"GEmWR",tippingSuccessSplashTitle:"r_CTi",tippingSuccessSplashText:"uLOJ9",newPill:"W_SrG",headingWithPill:"Gyc3T",blazeModalText:"EEdKl",blazeModalButtons:"v6ioC",pushContentRight:"nNrkH",deleteBlogButton:"NIqPO"},tJ=e=>{var t=e.blogName,a=e.primary,n=(0,o.bp)(),i=n._c,s=n._t,l=(0,ta.Q)(t),d=l.data,c=l.isFetching,h=(0,e7.L)(t),g=h.mutate,p=h.isPending,m=h.variables,f=(0,r.useState)(),b=u()(f,2),v=b[0],y=b[1],w=(0,r.useState)(""),j=u()(w,2),k=j[0],N=j[1],S=(0,q.V)().toggleToast,_=i("Blog setting for the Discord integration","Webhook URL from Discord"),T=()=>{void 0!==v&&(N(""),g({discordWebhookUrl:v},{onError(e){e instanceof tK.Z&&400===e.status?N(i("Error message shown on the Discord webhooks blog settings section when the user introduces a bad URL","This is not a valid URL")):S((0,tM.U)((0,tL.Pk)(s)),"error")}}))};return(0,x.jsxs)(tB.Z,{className:tQ.discord,label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section used for connecting a blog to Discord",children:"Discord Notifications"}),children:[(0,x.jsx)(tV.Z,{className:tQ.discordInput,"aria-label":_,label:(0,x.jsx)(tq.Z,{className:tQ.discordUrl,children:_}),id:"discord_webhook_url",disabled:c||p&&m&&Object.hasOwn(m,"discordWebhookUrl"),error:""!==k&&k,errorClassName:tQ.discordUrlError,value:void 0===v?(null==d?void 0:d.discordWebhookUrl)||"":v,onBlur:()=>{T()},onChange:e=>{y(e.target.value),N("")},onKeyDown:e=>{(0,tY.Z)(e)&&T()}}),(0,x.jsx)(tq.Z,{className:tQ.discordUrlHelpText,children:(0,x.jsx)(I.ZP,{comment:"Help text for blog setting for Discord integration",children:"Clear this field to disable sending events to Discord."})}),[{setting:"discordSendNewOriginalPosts",label:i("Blog setting for the Discord integration","Send your new original posts to Discord")},{setting:"discordSendNewReblogs",label:i("Blog setting for the Discord integration","Send your new reblogs to Discord")},{setting:"discordSendNewFollowers",label:i("Blog setting for the Discord integration","Send info about new followers to Discord")},{setting:"discordSendNewMembers",label:i("Blog setting for the Discord integration","Send info about new members of your blog to Discord"),predicate:!a},{setting:"discordSendReceivedAsks",label:i("Blog setting for the Discord integration","Send new received asks to Discord")},{setting:"discordSendReceivedReblogs",label:i("Blog setting for the Discord integration","Send new reblogs of your posts to Discord")},{setting:"discordSendReceivedReplies",label:i("Blog setting for the Discord integration","Send new received replies to Discord")},{setting:"discordSendReceivedLikes",label:i("Blog setting for the Discord integration","Send new received likes to Discord")},{setting:"discordSendReceivedMentions",label:i("Blog setting for the Discord integration","Send new received mentions in posts and replies to Discord")}].filter(e=>{var t=e.predicate;return!!(void 0===t||t)}).map(e=>{var a=e.setting,n=e.label;return(0,x.jsx)(tW,{blogName:t,setting:a,label:n},a)})]})};var tX=a(56237);let t0=e=>e.isExpanded?(0,x.jsx)("div",{className:"C8dNW",children:e.children}):null,t1=e=>{var t=e.blogName,a=(0,n.$3)(t,"blogSettings"),i=a.data,s=a.isFetching,o=tO(t),l=o.isMutatingField,d=o.mutate,c=(0,r.useState)(""),h=u()(c,2),g=h[0],p=h[1],m=(0,r.useState)(),f=u()(m,2),b=f[0],v=f[1],y=null!=b?b:null==i?void 0:i.isPasswordProtected,w=s||l("isPasswordProtected"),j=w||l("passwordProtectedPassword"),k=return(0,x.jsxs)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to protect group blogs with a password",children:"Password"}),children:[(0,x.jsx)(tD.Z,{controlled:!0,id:"blog-settings-password",disabled:w,checked:y,onChange:()=>{y&&d({isPasswordProtected:!1}),v(!y)},label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Password protect this blog"})}),(0,x.jsx)(t0,{isExpanded:y,children:(0,x.jsx)(tX.Z,{text:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"This blog can only be viewed by people who enter this password:"}),children:(0,x.jsx)(tV.Z,{disabled:j,value:g,onChange:e=>{p(e.target.value)},onKeyDown:e=>{(0,tY.Z)(e)&&k()},onBlur:()=>{k()},placeholder:"Change current password",type:"password"})})})]})},t2=e=>{var t=e.blogName;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Security"}),children:(0,x.jsx)(tW,{blogName:t,setting:"restrictCrossdomainXml",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Serve empty crossdomain.xml policy"}),helpText:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Serving an empty crossdomain.xml tells external services using Flash and Silverlight not to access any data on your Tumblr."})})})};var t5=a(40563),t4=a(17287),t3=a(34438),t6=a(50899),t7=e=>{var t=(0,t3.SS)({peeprBlogname:e});return{href:`${t6.Cw}${t}`,display:`${t6.uO}${t}`}},t9=t8=a(55673),ae=a(96976),at=a(22365),aa=a(38255),an=a(47211),ar=a(14066),ai=e=>{var t=e.blogName,a=(0,o.bp)().logEvent,n=(0,O.W8)(t,"domainSearch");return(0,x.jsxs)("div",{className:"VL_n6",children:[(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"CTA description for Domains on Tumblr upsell in blog settings",children:"Want a different home address for all your chaos?"})}),(0,x.jsx)(E.Z,{className:"hPkeB",href:n,onClick:()=>{a({eventName:s.J.BlogSettingsGetDomainClick})},textColor:ee().paletteWhite,children:(0,x.jsx)(I.ZP,{comment:"CTA button for Domains upsell",children:"Get a Tumblr Domain"})})]})};let as={button:"VwPIr",isLoading:"I0dMz",buttonLabel:"XrMkv",loaderWrapper:"KFSSv",subSection:"HEUmc"};var ao=e=>{var t=e.blogName,a=(0,o.bp)(),n=a._getPriceInCurrency,l=a.apiFetchWithSchema,d=a.logEvent,c=(0,i.s0)(),h=(0,q.V)().toggleToast,g=(0,r.useState)(!1),p=u()(g,2),f=p[0],b=p[1],v=(0,O.W8)(t,"domainSearch"),y=(0,ae.Of)(t),w=y.data,j=y.isFetching,k=y.isError,N=(null==w?void 0:w.domainSuggestions)||[],S=e=>{b(!0),d({eventName:s.J.BlogSettingsPurchaseDomainClick});var t=(0,O.B9)({page:an.f.DomainsManagement}),a=new URL(t,window.location.href);(0,ar.K)(l,e,a.href).then(e=>{var t=e.response;if(t.isAvailable&&t.url){window.location.assign(t.url);return}c(v)}).catch(};if(k||!j&&0===N.length)return(0,x.jsx)(ai,{blogName:t});if(j)return(0,x.jsx)(P.Z,{small:!0,color:ee().paletteGray65});var _=N[0],T=(0,eA.T4)(_.salePrice?_.salePrice:_.price,at.oX,n);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:as.subSection,children:[(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Marketing text to upsell Tumblr Domains in blog settings.",params:{suggestedDomainName:_.domainName},components:{strong:(0,x.jsx)("strong",{})},children:"Make [strong][suggestedDomainName][/strong] the home address of your blog and give your blog the branding it deserves!"})}),(0,x.jsxs)(E.Z,{className:m()(as.button,{[as.isLoading]:f}),disabled:f,onClick:()=>{S(_.domainName)},textColor:ee().paletteWhite,children:[f&&(0,x.jsx)("div",{className:as.loaderWrapper,children:(0,x.jsx)(P.Z,{small:!0,color:ee().paletteGray65})}),(0,x.jsx)("span",{className:as.buttonLabel,children:(0,x.jsx)(I.ZP,{comment:"CTA to purchase a domain to brand user's blog",params:{price:T},children:"Brand it for [price]"})})]})]}),(0,x.jsx)("div",{className:as.subSection,children:(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Marketing text to upsell Tumblr Domains in blog settings.",components:{link:(0,x.jsx)(t8.rU,{to:v,onClick:()=>{d({eventName:s.J.BlogSettingsGetDomainClick})}})},children:"Looking for a different domain? More options are available [link]here[/link]."})})})]})},al=e=>{var t=e.blogName,a=e.isCustomThemeEnabled,n=t7(t),r=t9(t);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(tq.Z,{children:a?(0,x.jsx)(t4.Z,{"aria-label":r.href,href:r.href,showBlogCard:!1,children:r.display}):(0,x.jsx)(t4.Z,{"aria-label":n.href,href:n.href,showBlogCard:!1,children:n.display})}),(0,x.jsx)(ao,{blogName:t})]})},ad=a(452),ac=a(44663),au=e=>{var t=e.domainName,a=e.discountedPrice,n=e.shouldShowDescription,r=(0,o.bp)(),i=r._getPriceInCurrency,l=r.logEvent,d=(0,O.hG)({domainName:t}),c=a&&(0,eA.T4)(a,at.oX,i);return(0,x.jsxs)("div",{className:"fv5X8",children:[(void 0===n||n)&&a&&(0,x.jsx)(tq.Z,{children:(0,x.jsx)(aa.hQ,{firstYearPrice:a})}),(0,x.jsx)(E.Z,{className:"kwyDv",href:d,onClick:()=>{l({eventName:s.J.BlogSettingsConnectDomainClick})},textColor:ee().paletteWhite,children:c?(0,x.jsx)(I.ZP,{comment:"CTA button for Domain Connection",params:{discountedPriceFormatted:c},children:"Connect domain for [discountedPriceFormatted]"}):aa.vY})]})},ah=e=>{var t=e.domainName,a=e.renewalPrice,n=e.shouldShowDescription,r=(0,o.bp)(),i=r._getPriceInCurrency,l=r.logEvent,d=(0,eA.T4)(a,at.oX,i),c=(0,O.q8)({domainName:t});return(0,x.jsxs)("div",{className:"eSW1E",children:[(void 0===n||n)&&(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Marketing text to promote domain transfers in blog settings",components:{link:(0,x.jsx)(t8.rU,{to:"https://tumblr.com/pages/domains-price-list",target:"_blank"})},children:"Manage your domain directly on Tumblr! Transfers extend your registration by another year at the [link]regular renewal fee[/link]. SSL certificate included for free!"})}),(0,x.jsx)(E.Z,{className:"AKPrY",href:c,onClick:()=>{l({eventName:s.J.BlogSettingsTransferDomainClick})},textColor:ee().paletteWhite,children:(0,x.jsx)(I.ZP,{comment:"CTA button for Domain transfer",params:{renewalPriceFormatted:d},children:"Transfer and renew at [renewalPriceFormatted]"})})]})},ag=a(1539),ap=a(11476),am=a(74837),af=e=>{var t=e.domainNameUrl;return(0,x.jsx)(t4.Z,{"aria-label":t,href:t,showBlogCard:!1})},ab=e=>{var t=e.blogName,a=e.domainName,n=e.domainNameUrl,r=e.isTransferSupported,i=(0,am.j)(at.J5),s=t7(t),o={domainName:a,defaultDisplayUrl:s.display,startDate:i},l={customDomainBlogLink:af({domainNameUrl:n}),defaultDomainBlogLink:(0,x.jsx)(t4.Z,{"aria-label":s.href,href:s.href,showBlogCard:!1}),linkLearnMore:(0,x.jsx)(t8.rU,{to:"https://help.tumblr.com/hc/articles/231256548-Legacy-Domains",target:"_blank"})};return(0,x.jsx)("div",{className:"koW1w",children:(0,x.jsx)(ag.Z,{theme:"error",icon:(0,x.jsx)(ap.Z,{colors:{primary:ee().paletteRed}}),message:(0,x.jsx)(tq.Z,{children:r?(0,x.jsx)(I.ZP,{comment:"Announcement of the sunsetting of free connection if the legacy domain is transferable to Tumblr",params:o,components:l,children:"Starting [startDate], your custom theme will be disabled, and [customDomainBlogLink][domainName][/customDomainBlogLink] will redirect to [defaultDomainBlogLink][defaultDisplayUrl][/defaultDomainBlogLink]. Transfer or connect your domain to ensure your blog remains on [customDomainBlogLink][domainName][/customDomainBlogLink] and retains its unique aesthetic. [linkLearnMore]Learn more[/linkLearnMore]."}):(0,x.jsx)(I.ZP,{comment:"Announcement of the sunsetting of free connection if the legacy domain is not transferable to Tumblr",params:o,components:l,children:"Starting [startDate], your custom theme will be disabled, and [customDomainBlogLink][domainName][/customDomainBlogLink] will redirect to [defaultDomainBlogLink][defaultDisplayUrl][/defaultDomainBlogLink]. But you can ensure your blog remains on [customDomainBlogLink][domainName][/customDomainBlogLink] and retains its unique aesthetic by connecting your domain! [linkLearnMore]Learn more[/linkLearnMore]."})})})})},av=e=>{var t=e.domainName,a=e.domainNameUrl,n=e.isTransferSupported,r={domainName:t},i={customDomainBlogLink:af({domainNameUrl:a}),linkLearnMore:(0,x.jsx)(t8.rU,{to:"https://help.tumblr.com/hc/articles/231256548-Legacy-Domains",target:"_blank"})};return(0,x.jsx)("div",{className:"CQVTa",children:(0,x.jsx)(ag.Z,{theme:"error",icon:(0,x.jsx)(ap.Z,{colors:{primary:ee().paletteRed}}),message:(0,x.jsx)(tq.Z,{children:n?(0,x.jsx)(I.ZP,{comment:"Announcement of the sunsetting of free connection if the legacy domain is transferable to Tumblr",params:r,components:i,children:"Transfer or connect your domain to ensure your blog remains on [customDomainBlogLink][domainName][/customDomainBlogLink] and retains its unique aesthetic! [linkLearnMore]Learn more[/linkLearnMore]."}):(0,x.jsx)(I.ZP,{comment:"Announcement of the sunsetting of free connection if the legacy domain is not transferable to Tumblr",params:r,components:i,children:"Connect your domain to ensure your blog remains on [customDomainBlogLink][domainName][/customDomainBlogLink] and retains its unique aesthetic! [linkLearnMore]Learn more[/linkLearnMore]."})})})})},ax=a(91086),ay=e=>{var t=e.blogName,a=e.domainName,n=e.domainNameUrl,r=e.message,i=t7(t),s=(0,x.jsx)(I.ZP,{comment:"Text explaining that a custom domain redirects to the default domain",components:{customDomainBlogLink:(0,x.jsx)(t4.Z,{"aria-label":n,href:n,showBlogCard:!1}),defaultDomainBlogLink:(0,x.jsx)(t4.Z,{"aria-label":i.href,href:i.href,showBlogCard:!1})},params:{domainName:a,peeprDefaultDisplayUrl:i.display},children:"[customDomainBlogLink][domainName][/customDomainBlogLink] currently redirects to [defaultDomainBlogLink][peeprDefaultDisplayUrl][/defaultDomainBlogLink]."});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"_x01Z",children:(0,x.jsx)(tq.Z,{children:s})}),(0,x.jsx)("div",{className:"GpBNR",children:(0,x.jsx)(ag.Z,{theme:"info",icon:(0,x.jsx)(ax.Z,{colors:{primary:ee().paletteBlue}}),message:(0,x.jsx)(tq.Z,{children:r})})})]})},aw=e=>{var t=e.domainName,a=e.domainAddPrice,n=(0,o.hz)(),r=n.domainsFreeConnectionHasSunset,i=n.domainsFreeConnectionWillSunset;return null!=a&&a.isTransferSupported?r||i?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ah,{domainName:t,renewalPrice:a.transfer.renewalPrice}),(0,x.jsx)(au,{domainName:t,discountedPrice:null==a?void 0:a.connection.price,shouldShowDescription:!1})]}):(0,x.jsx)(ah,{domainName:t,renewalPrice:a.transfer.renewalPrice}):(0,x.jsx)(au,{domainName:t,discountedPrice:null==a?void 0:a.connection.price})},aj=e=>{var t=e.blogName,a=e.domainName,n=e.isHiddenFromBlogNetwork,r=e.isCustomThemeEnabled,i=(0,o.bp)().features,s=(0,ad.s3)(a),l=s.data,d=s.isFetching,c=!!(null!=l&&l.isTransferSupported),u=(0,ac.Z)(a).href;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:r&&n?(0,x.jsx)(ay,{blogName:t,domainName:a,domainNameUrl:u,message:(0,x.jsx)(I.ZP,{comment:"Text explaining the behaviour of a custom domain when blog is hidden from people without an account",components:{customDomainBlogLink:af({domainNameUrl:u})},params:{domainName:a,blogName:t},children:'Turn off "Hide [blogName] from people without an account" to make [customDomainBlogLink][domainName][/customDomainBlogLink] the home address for this blog.'})}):(0,x.jsx)(tq.Z,{children:(0,x.jsx)(t4.Z,{"aria-label":u,href:u,showBlogCard:!1,children:a})})}),d?(0,x.jsx)(P.Z,{small:!0,color:ee().paletteGray65}):(0,x.jsxs)(x.Fragment,{children:[i.domainsFreeConnectionHasSunset&&(0,x.jsx)(av,{isTransferSupported:c,domainName:a,domainNameUrl:u}),!i.domainsFreeConnectionHasSunset&&i.domainsFreeConnectionWillSunset&&(0,x.jsx)(ab,{isTransferSupported:c,domainName:a,domainNameUrl:u,blogName:t}),(0,x.jsx)(aw,{domainName:a,domainAddPrice:l})]})]})},ak=e=>{var t=e.blogName,a=e.domainName,n=e.domainNameUrl;return e.isHiddenFromBlogNetwork?(0,x.jsx)(ay,{blogName:t,domainName:a,domainNameUrl:n,message:(0,x.jsx)(I.ZP,{comment:"Description of the required actions in order for a custom domain to link to the blog network view",components:{customDomainBlogLink:af({domainNameUrl:n})},params:{domainName:a,blogName:t},children:'Turn off "Hide [blogName] from people without an account" to make [customDomainBlogLink][domainName][/customDomainBlogLink] the home address for this blog.'})}):(0,x.jsx)(t4.Z,{"aria-label":n,href:n,showBlogCard:!1,children:a})},aN=e=>{var t=e.blogName,a=e.domainName,n=e.domainNameUrl;return e.isHiddenFromBlogNetwork?(0,x.jsx)(ay,{blogName:t,domainName:a,domainNameUrl:n,message:(0,x.jsx)(I.ZP,{comment:"Description of the required actions in order for a custom domain to link to the blog network view",components:{customDomainBlogLink:af({domainNameUrl:n})},params:{domainName:a,blogName:t},children:'Enable custom theme and turn off "Hide [blogName] from people without an account" to make [customDomainBlogLink][domainName][/customDomainBlogLink] the home address for this blog.'})}):(0,x.jsx)(ay,{blogName:t,domainName:a,domainNameUrl:n,message:(0,x.jsx)(I.ZP,{comment:"Description of the required actions in order for a custom domain to link to the blog network view",components:{customDomainBlogLink:af({domainNameUrl:n})},params:{domainName:a},children:"Enable custom theme to make [customDomainBlogLink][domainName][/customDomainBlogLink] the home address for this blog."})})},aS=e=>{var t=e.domainName,a=e.blogName,n=e.isCustomThemeEnabled,r=e.isHiddenFromBlogNetwork,i=(0,ac.Z)(t).href;return n?(0,x.jsx)(ak,{blogName:a,domainName:t,domainNameUrl:i,isHiddenFromBlogNetwork:r}):(0,x.jsx)(aN,{blogName:a,domainName:t,domainNameUrl:i,isHiddenFromBlogNetwork:r})},a_=a(37834),aT=a(97707);let aC={domainName:"ELN9i",domainStatusDescription:"y1WUb",connectedDomain:"U6D7V",connectedDomainDescription:"wQCz2",domainSettingsButton:"lP300"};var aP=e=>{var t=e.blogName,a=e.domainName,n=e.domainStatus,r=e.isCustomThemeEnabled?t9(t):t7(t);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:aC.domainName,children:a}),(0,x.jsx)(a_.B,{status:n})]}),(0,x.jsxs)("div",{className:aC.domainStatusDescription,children:["pending_dns"===n&&(0,x.jsx)(I.ZP,{comment:"Help text that tells the user that the domain is setting up",components:{blogLink:(0,x.jsx)(t4.Z,{"aria-label":r.href,href:r.href,showBlogCard:!1})},params:{blogDisplayUrl:r.display},children:"An email will be sent to you once the domain is ready! In the meantime, your site's custom URL is [blogLink][blogDisplayUrl][/blogLink]"}),["in_argp","in_redemption"].includes(n)&&(0,x.jsx)(I.ZP,{comment:"Help text that tells the user that the domain is expired",components:{blogLink:(0,x.jsx)(t4.Z,{"aria-label":r.href,href:r.href,showBlogCard:!1})},params:{blogDisplayUrl:r.display},children:"Your domain has expired, please renew it as soon as possible from your Domain Settings. Your site's custom URL is [blogLink][blogDisplayUrl][/blogLink]"}),["suspended","registration_failed"].includes(n)&&(0,x.jsx)(I.ZP,{comment:"Help text that tells the user that the domain is no longer active",components:{blogLink:(0,x.jsx)(t4.Z,{"aria-label":r.href,href:r.href,showBlogCard:!1}),tumblrLink:(0,x.jsx)("a",{href:"https://www.tumblr.com/support",rel:"noopener noreferrer",target:"_blank","aria-label":"https://www.tumblr.com/support"})},params:{blogDisplayUrl:r.display},children:"Your domain is no longer active, please contact [tumblrLink]Tumblr support[/tumblrLink] for assistance. Your site's custom URL is [blogLink][blogDisplayUrl][/blogLink]"}),"pending_transfer_in"===n&&(0,x.jsx)(I.ZP,{comment:"Help text that tells the user that the domain is setting up due to a pending transfer",children:"An email will be sent to you once the domain is transferred to Tumblr!"}),"transfer_in_failed"===n&&(0,x.jsx)(I.ZP,{comment:"Help text that tells the user that we failed to transfer the domain",children:"Your domain could not be transferred to Tumblr! Please contact your domain provider for assistance."}),"invalid_dns"===n&&(0,x.jsx)(I.ZP,{comment:"Alert to inform users that action is required to restore functionality for their domain connection",components:{link:(0,x.jsx)(t8.rU,{to:aT.J5,target:"_blank"})},children:"Uh oh, your domain is disconnected. Please ensure the domains DNS points to Tumblrs IP address 66.6.44.4. [link]Learn more[/link]."})]})]})},aA=e=>{var t=e.domainName,a=e.domainStatus,n=e.isCustomThemeEnabled,r=e.blogName,i=e.isHiddenFromBlogNetwork,l=(0,o.bp)(),d=l.logEvent,c=l.wwwBaseUrl,u=["invalid_dns","registration_failed","restoration_failed","suspended"].includes(a);return(0,x.jsxs)("div",{className:aC.connectedDomain,children:[(0,x.jsx)("div",{className:aC.connectedDomainDescription,children:"active"===a?(0,x.jsx)(aS,{blogName:r,domainName:t,isCustomThemeEnabled:n,isHiddenFromBlogNetwork:i}):(0,x.jsx)(aP,{blogName:r,domainName:t,domainStatus:a,isCustomThemeEnabled:n})}),(0,x.jsx)(E.Z,{href:(0,O.uq)({domainName:t}),backgroundColor:ee().paletteBlack40,textColor:ee().paletteWhite,className:aC.domainSettingsButton,onCl})},children:(0,x.jsx)(I.ZP,{comment:"CTA button that links to a certain Domain Settings page",children:"Domain Settings"})}),u&&(0,x.jsx)(E.Z,{href:`${c}/support`,backgroundColor:ee().paletteBlack40,textColor:ee().paletteWhite,className:aC.domainSettingsButton,target:"_blank",children:(0,x.jsx)(I.ZP,{comment:"Button that links to Tumblr support",children:"Contact Support"})})]})};function aE(e){var t=e.blogName,a=(0,o.bp)()._c,n=(0,ta.Q)(t).data,r=null==n?void 0:n.connectedDomainName,i=(null==n?void 0:n.hasLegacyDomain)&&(null==n?void 0:n.cname),s=!(null!=n&&n.blogNetworkRedirect),l=(0,x.jsx)(al,{blogName:t,isCustomThemeEnabled:s});return r?l=(0,x.jsx)(aA,{blogName:t,domainName:r,domainStatus:n.connectedDomainStatus,isCustomThemeEnabled:s,isHiddenFromBlogNetwork:n.hiddenFromBlogNetwork}):i&&(l=(0,x.jsx)(aj,{blogName:t,domainName:i,isCustomThemeEnabled:s,isHiddenFromBlogNetwork:n.hiddenFromBlogNetwork})),(0,x.jsx)(tB.Z,{label:a("Label for a settings section that lets the user edit the domain name of their blog","Address"),children:l})}let aB=e=>{var t=e.blogName;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Affiliate links"}),children:(0,x.jsx)(tW,{blogName:t,setting:"affiliateLinks",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Change unaffiliated links into Tumblr affiliate links"}),helpText:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"If you use your own affiliate code, we'll leave your links alone."})})})};var aD=a(93853),aZ=a(61702);let aL=e=>{var t=e.blogName,a=e.cname,n=(0,o.bp)()._c,i=(0,ta.Q)(t),s=i.data,l=i.isFetched,d=(0,e7.L)(t).mutate,c=(null==s?void 0:s.askPageTitle)||"",h=(0,r.useState)(c),g=u()(h,2),p=g[0],m=g[1],f=(0,r.useState)(),b=u()(f,2),v=b[0],y=b[1],w=()=>(y(null),!(0,aZ.Y)(p,H.pT)||(y(n("Blog settings: Ask page title input length error.","Page title is too long. Please use %1$s or fewer characters!",[`${H.pT}`])),!1)),j=()=>{p!==c&&w()&&d({askPageTitle:p})};return(0,r.useEffec)},[c]),(0,x.jsxs)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to allow other users to ask questions",children:"Ask"}),children:[(0,x.jsx)(tW,{blogName:t,setting:"askEnabled",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Let people ask questions"}),helpText:(0,x.jsx)(I.ZP,{components:{link:(0,x.jsx)("a",{href:`${a||(0,Y.Z)(t)}/ask`})},params:{url:"/ask"},comment:"Label describing a settings input",children:"Send your audience to [link][url][/link] to ask you questions."})}),(0,x.jsxs)(t0,{isExpanded:!!(null!=s&&s.askEnabled),children:[(0,x.jsx)(tX.Z,{text:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Ask page title"}),children:(0,x.jsx)(tV.Z,{disabled:!l,value:p,onFoll),onChange:e=>{w(),m(e.target.value)},onKeyDown:e=>{e.key!==aD.SV.Enter||e.nativeEvent.isComposing||j()},onBlur:()=>{j()},placeholder:n("Placeholder for user input to provide a custom Ask page title","Ask me anything"),error:null!==v&&v})}),(0,x.jsx)(tW,{blogName:t,setting:"askAllowAnonymous",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Allow anonymous questions"})}),(0,x.jsx)(tW,{blogName:t,setting:"asksAllowMedia",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Allow asks with media"})})]})]})};var aM=a(75773),aI=a(89952),aR=a(6233),aO=a(26321),aF=a(24946),aU=e=>{var t=e.blogName,a=e.onClose,n=(0,o.bp)()._c,i=(0,ta.Q)(t).data,s=(0,e7.L)(t),l=s.isMutatingField,d=s.mutate,c=(0,r.useRef)((null==i?void 0:i.interactabilityBlaze)==="everyone").current,u=c?n("Title for the modal shown when a user wants to disallow users to Blaze their posts","Turn it off for all or only new posts"):n("Title for the modal shown when a user wants to allow users to Blaze their posts","Turn it on for all or only new posts");return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(aR.Z,{compact:!0,title:u,onClose:a,children:[(0,x.jsx)("p",{className:tQ.blazeModalText,children:(0,x.jsx)(I.ZP,{comment:"Instructions for the modal shown when a user wants to set up other users Blaze their content setting",children:"Decide whether you want to apply this setting to all your blogs posts or only new posts you create."})}),(0,x.jsx)(aI.Z,{className:tQ.blazeModalButtons,buttons:[{disabled:l("interactabilityBlaze"),text:n("Button text that will set up other users Blaze their content setting","Apply to all"),onClick:()=>{d({interactabilityBlaze:c?"noone":"everyone",interactabilityBlazeBulkUpdate:!0},{onSuccess:a})},buttonStyle:"confirm",type:"submit"},{disabled:l("interactabilityBlaze"),className:tQ.pushContentRight,text:n("Button text that will set up other users Blaze their content setting","Only new posts"),onClick:()=>{d({interactabilityBlaze:c?"noone":"everyone",interactabilityBlazeBulkUpdate:!1},{onSuccess:a})},buttonStyle:"confirm",type:"submit"},{text:n("Button text that will close a dialog that prompted the user to set up other users Blaze their content setting","Nevermind"),onClick:a,buttonStyle:"cancel",type:"button"}]})]})})};let a$=e=>{var t=e.blogName,a=(0,o.bp)(),n=a._t,s=a._getLanguage,l=(0,ta.Q)(t),d=l.data,c=l.isFetched,h=(0,e7.L)(t).isMutatingField,g=s().localization,p=(0,aF.sU)(g),m=(0,r.useState)(!1),f=u()(m,2),b=f[0],v=f[1],y=(0,i.TH)().hash,w=(0,r.useRef)(!1),j=(0,r.useState)(null),k=u()(j,2),N=k[0],S=k[1];(0,r.useEffect)(()=>{if("#blaze"===y&&N){w.current=!0;var e=matchMedia("(prefers-reduced-motion: reduce)").matches?"instant":"smooth";N.scrollIntoView({behavior:e})}},[N,y]);var _=!c||h("interactabilityBlaze"),T=(0,x.jsx)(aO.Z,{className:tQ.newPill,isThin:!0,noHover:!0,children:(0,x.jsx)(aM.Z,{text:n("New!")})});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(tB.ZS(e)},label:(0,x.jsxs)("span",{className:tQ.headingWithPill,children:[(0,x.jsx)("span",{children:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to allow Blazing your posts",children:"Blaze"})}),T]}),anchorId:"blaze",children:(0,x.jsx)(tD.Z,{controlled:!0,id:"blog-settings-blaze",disabled:_,checked:(null==d?void 0:d.interactabilityBlaze)==="everyone",onChange:()=>v(!0),label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input for blaze other people posts",children:"Let people Blaze your posts"}),helpText:(0,x.jsx)(I.ZP,{components:{link:(0,x.jsx)("a",{href:`https://help.tumblr.com/hc/${p}/articles/5298854249367`,target:"_blank"})},comment:"Label describing a settings input",children:"Let other users sponsor my blogs posts. This setting can be overridden on each post you create. [link]Learn more[/link]"})})}),b&&(0,x.jsx)(aU,{blogName:t,onClose:()=>{v(!1)}})]})};var az=a(9156),aG=a(50213),aW=a(91669),aH=a(19585),aV=a(38149),aq=a(23326),aK=a(35381),aY=a(93793),aQ=a(54870),aJ=a(86743),aX=ags",e]}let a1=e=>{var t=(0,o.bp)().apiFetchWithSchema;return(0,aJ.N)({queryKey:a0(e),queryFn:a=>{var n=a.pageParam;return(0,aX.y7)(t,g()({blogName:e},n&&{limit:n.limit,offset:n.offset}))},initialPageParam:void 0,getNextPaParams},staleTime:6e4})};var a2=a(43684),a5=a(56777),a4=()=>{var e=(0,o.bp)()._c,t=(0,r.useRef)([e("Text for empty blocked Tumblrs setting","Nobody"),e("Text for empty blocked Tumblrs setting","None :)"),e("Text for empty blocked Tumblrs setting","None yet"),e("Text for empty blocked Tumblrs setting","Not a soul")]);return(0,a5.h)(t.current)},a3=(0,az.Z)(e=>(0,tM.U)(aH.R).reduce((e,t)=>g()(g()({},e),{},{[t]:t.replace("#","")}),{})),a6=e=>{var t,a=e._c,n=e.disabled,r=e.blog,i=e.onClick;return(0,x.jsxs)("li",{className:tQ.blockedTumblr,children:[(0,x.jsxs)(t4.Z,{className:tQ.blockedTumblrName,blog:r,showBlogCard:!1,children:[(0,x.jsx)("div",{className:tQ.blockedTumblrAvatar,children:r.mediaResponse?(0,x.jsx)(aW.Z,{src:(null===(t=r.mediaResponse.getSmallestImage())||void 0===t?void 0:t.url)||""}):(0,x.jsx)(aV.Sw,{colors:a3(r.name),imageResponse:[{}],isSquare:!0})}),(0,x.jsx)("span",{children:r.name})]}),(0,x.jsx)(aY.Z,{className:tQ.remove,disabled:n,text:a("Label to show on a button where a user can unblock a blog","Unblock"),buttonStyle:"cancel",type:"submit",onClick:i})]})};let a7=e=>{var t=e.blogName,a=(0,o.bp)(),n=a._c,i=a._t,l=a.apiFetch,d=a.logEvent,c=(0,e3.D)({mutationFn:e=>{var a=e.block,n=e.otherBlogName;return a?(0,aX.No)(l,{blockingBlogName:t,blogNameToBlock:n}):(0,aX.bx)(l,{blockingBlogName:t,blogNameToUnblock:n})},onMutate:e=>{var t=e.block,a=e.otherBlogName,n=m.getQueryData(W);return m.setQueryData(W,g()(g()({},n),{},{pages:null==n?void 0:n.pages.map((e,n)=>t?0===n?g()(g()({},e),{},{blockedTumblelogs:[{name:a}].concat(e.blockedTumblelogs)}):e:g()(g()({},e),{},{blockedTumblelogs:e.blockedTumblelo.name!==a)}))})),{previousResult:n}},onError:(e,t,a)=>{(null==a?void 0:a.previousResult)&&m.setQueryData(W,a.previousResult)},onSuccess:()=>{z()}}),h=c.isPending,p=c.mutate,m=(0,e4.NL)(),f=(0,r.useState)(!1),b=u()(f,2),v=b[0],y=b[1],w=(0,r.useState)(""),j=u()(w,2),k=j[0]werCase(),_=(0,r.useState)(""),T=u()(_,2),C=T[0],A=T[1],E=(0,r.useState)(!1),B=u()(E,2),D=B[0],Z=B[1],L=(0,q.V)().toggleToast,M=a1(t),R=M.data,O=M.fetchNextPage,F=M.hasNextPage,U=M.isFetchingNextPage,$=M.isFetching,z=M.refetch,G=()=>(null==R?void 0:R.pages.flatMap(e=>e.blockedTumblelogs))||[],W=a0(t),H=n("Label text to show on a user input where they can change the Tumblrs they have blocked","Block"),V=Math.min((null==R?void 0:R.pages[0].blockedTumblelogs.length)||0,10),K=()=>{ifame===S())){Z(!0),d({eventName:s.J.BlocksBlockAddedBlockAlreadyExists,eventDetails:{from:"settings"}});return}A(""),p({block:!0,otherBlogName:S()},{onSuccess(e){var t=e.response.alreadyBlocked;t?Z(!0):N(""),d({eventName:t?s.J.BlocksBlockAddedBlockAlreadyExists:s.J.BlocksBlockAdded,eventDetails:{from:"settings"}})},onError(e){var t;e instanceof tK.Z&&null!==(t=e.detailedErrors)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.detail?A(e.detailedErrors[0].detail):L(i("Something went wrong. Please try again."),"error")}})},Y=a4();return(0,x.jsx)(tB.Z,{className:tQ.blockedTumblrs,label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Blocked Tumblrs"}),children:(0,x.jsxs)(aK.Z,{controlled:!0,isOpen:v,onToggle:()=>{y(!0),d({eventName:s.J.BlocksBlocklistOpened})},label:{buttonLabel:n("Label for a toggle button that lets a user change the Tumblrs they have blocked","Edit your blocked Tumblrs"),label:$?(0,x.jsx)(P.Z,{centerOrientation:"horizontal",color:ee().paletteBlack,small:!0}):null!=R&&R.pages[0].blockedTumblelogs.length?(0,x.jsx)("ul",{className:tQ.blockedTumblrsPreview,onClick:()=>{y(!0)},children:null==R?void 0:R.pages[0].blockedTumblelogs.slice(0,10).map((e,t)=>{var a,n=e.mediaResponse,r=e.name;return(0,x.jsx)("li",{className:tQ.blockedTumblrPreview,children:(0,x.jsx)(aQ.Z,{content:r,popoverProps:{targetWrapperClassName:""},position:a2.I2.Top,children:(0,x.jsx)(aW.Z,{src:(null==n||null===(a=n.getSmallestImage())||void 0===a?void 0:a.url)||"",style:{opacity:(V-t)/V}})})},r)})}):Y,showEditButton:!$},children:[(0,x.jsxs)("div",{className:tQ.inputWrapper,children:[(0,x.jsx)(tV.Z,{"aria-label":H,className:tQ.input,disabled:h,error:""!==C&&C,errorClassName:tQ.blockedTumblrError,value:k,onChange:e=>{N(e.target.value),A("")},onKeyDown:e=>{""!==k.trim()&&(0,tY.Z)(e)&&K()},placeholder:n("Placeholder text to show on a user input where they can change the Tumblrs they have blocked","Tumblr to block")}),(0,x.jsx)(aY.Z,{className:tQ.block,disabled:""===k.trim()||h,text:h?(0,x.jsx)(P.Z,{color:ee().paletteWhite,small:!0}):H,label:H,buttonStyle:"confirm",onClick:()=>{K()},type:"submit"})]}),(0,x.jsx)("ul",{className:tQ.blockedTumblrsList,children:G().map(e=>(0,x.jsx)(a6,{_c:n,blog:e,disabled:h,onClick:()=>{p({block:!1,otherBlogName:e.name}),d({eventName:s.J.BlocksBlockRemoved,eventDetails:{from:"settings"}})}},e.name))}),F&&(0,x.jsx)(aY.Z,{buttonStyle:"neutral",className:tQ.showMore,disabled:U,text:U?(0,x.jsx)(P.Z,{centerOrientation:"horizontal",color:ee().paletteBlack,small:!0}):n("Text for a button that will load more blogs","Show more"),type:"submit",onClick:()=>{O(),d({eventName:s.J.BlocksBlocklistMoreLoaded,eventDetails:{offset:null==R?void 0:R.paggs.length,0)}})}}),D&&(0,x.jsx)(aG.Z,{glassIsClickable:!1,onGlassClick:()=>{Z(!1),N("")},children:(0,x.jsx)(aq.O,{buttons:[{text:(0,x.jsx)(I.ZP,{children:"Unblock"}),onClick:()=>{p({block:!1,otherBlogName:S()}),Z(!1),N(""),d({eventName:s.J.BlocksBlockRemoved,eventDetails:{from:"settings"}})},buttonStyle:aq.X.Neutral},{text:(0,x.jsx)(I.ZP,{children:"OK"}1),N("")},buttonStyle:aq.X.Confirm}],title:n("Prompt to show when a user is blocking a blog that they are already blocking. The placeholder is the blocked blog name","Looks like you are already blocking %1$s",[S()])})})]})})};var a9=e=>{var t=e.connectedDomainName,a=e.blogName,n=e.hideModal,r=e.onConfirm,i=(0,o.bp)()._c;return(0,x.jsx)(aG.Z,{glassIsClickable:!0,onGlassClick:n,children:(0,x.jsx)(aq.O,{buttons:[{text:(0,x.jsx)(I.ZP,{children:"Nevermind"}),onClick:n,buttonStyle:aq.X.Neutral},{text:(0,x.jsx)(I.ZP,{children:"Disable custom theme"}),onClick:r,buttonStyle:aq.X.Confirm}],title:i("Prompt to show when a user is about to disable the custom domain setting from one of its blogs","Disabling your custom theme will cause %1$s to redirect to tumblr.com/%2$s. Are you sure?",[t,a])})})},a8=e=>{var t=e.cname,a=e.blogName,n=(0,o.bp)(),i=n._c,l=n.apiFetch,d=n.logEvent,c=(0,e7.L)(a),h=c.isMutatingField,g=c.mutate,p=(0,r.useState)(!1),m=u()(p,2),f=m[0],b=m[1],v=(0,e3.D)({mname:e}})}).isPending||h("cname");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(tD.Z,{checked:!0,className:"Rhhda",controlled:!0,disabled:v,id:"custom-domain-toggle",label:(0,x.jsx)(I.ZP,{comment:"Toggle button that lets the user add a custom domain for this blog",params:{domain:t},children:"Use custom domain [domain]"}),onChange:()=>b(!0)}),f&&(0,x.jsx)(aG.Z,{glassIsClickable:!1,onGlassClick:()=>{b(!1)},children:(0,x.jsx)(aq.O,{buttons:[{disabled:v,text:(0,x.jsx)(I.ZP,{children:"Nevermind"}),onClick:()=>{b(!1)},buttonStyle:aq.X.Neutral},{disabled:v,text:(0,x.jsx)(I.ZP,{children:"Disable custom domain"}),onClick:()=>{b(!1),g({cname:""}),d({eventName:s.J.CnameDisabled})},buttonStyle:aq.X.Confirm}],title:i("Prompt to show when a user is about to disable the custom domain setting from one of its blogs","You will not be able to reconnect your blog to %1$s once it is disabled. Are you sure?",[t])})})]})};let ne={buttons:"JbG1F",error:"wUUpO"},nt=e=>{var t=e.cname,a=e.blogName,n=(0,o.bp)(),i=n._c,l=n.logEvent,d=n.features,c=(0,ta.Q)(a),h=c.data,g=c.isFetching,p=(0,e7.L)(a),m=p.isMutatingField,f=p.mutate,b=(0,r.useState)(!1),v=u()(b,2),y=v[0],w=v[1],j=(0,r.useState)(!1),k=u()(j,2),N=k[0],S=k[1],_=!(null!=h&&h.blogNetworkRedirect),T=t||(0,Y.Z)(a),C=t&&(null==h?void 0:h.hasLegacyDomain),A=null==h?void 0:h.connectedDomainName,E=(0,ad.s3)(C?t:""),B=E.data,D=E.isFetching;return(0,x.jsxs)(tB.Z,{label:i("Label for a settings section that lets the user edit the blog theme","Custom Theme"),children:[(0,x.jsx)(tD.Z,{controlled:!0,id:"custom-theme",disabled:g||m("blogNetworkRedirect"),checked:_,onChange:()=>{_&&C?w(!0):_&&A?S(!0):(f({blogNetworkRedirect:_}),l({eventName:_?s.J.CustomThemeDisabled:s.J.CustomThemeEnabled}))},label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings toggle",children:"Enable custom theme"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a settings toggle",children:"Create a separate theme for your blog. Change the layout. Edit the code. Make an entirely new theme. Its up to you."})}),(0,x.jsxs)(t0,{isExpanded:!(null!=h&&h.blogNetworkRedirect),children:[y&&(0,x.jsx)("p",{className:ne.error,children:(0,x.jsx)(I.ZP,{comment:"Error message shown on the 'Custom Theme' section of the blog settings",children:"To disable your custom theme, you must first disable your custom domain."})}),(0,x.jsx)(aI.Z,{className:ne.buttons,buttons:[{href:`/customize/${a}?redirect_to=/settings/blog/${a}`,feature:!1,text:i("Button that redirects the user to the edit blog theme page","Edit theme"),buttonStyle:"neutral",disabled:g,type:"button"},{href:t?`http://${t}`:T,target:"_blank",feature:!1,text:i("Button that redirects the user to the web","View website"),buttonStyle:"neutral",disabled:g,type:"button"}]}),D&&(0,x.jsx)(P.Z,{small:!0,color:ee().paletteGray65}),C&&!D&&(0,x.jsxs)(x.Fragment,{children:[d.domainsFreeConnectionHasSunset&&(0,x.jsx)(av,{isTransferSupported:null==B?void 0:B.isTransferSupported,domainName:t,domainNameUrl:T}),!d.domainsFreeConnectionHasSunset&&d.domainsFreeConnectionWillSunset&&(0,x.jsx)(ab,{isTransferSupported:null==B?void 0:B.isTransferSupported,domainName:t,domainNameUrl:T,blogName:a}),(0,x.jsx)(a8,{cname:t,blogName:a}),(d.domainsFreeConnectionWillSunset||d.domainsFreeConnectionHasSunset)&&(0,x.jsxs)(x.Fragment,{children:[(null==B?void 0:B.isTransferSupported)&&(0,x.jsx)(ah,{domainName:t,renewalPrice:B.transfer.renewalPrice,shouldShowDescription:!1}),(0,x.jsx)(au,{domainName:t,discountedPrice:null==B?void 0:B.connection.price,shouldShowDescription:!1})]})]})]}),N&&A&&(0,x.jsx)(a9,{blogName:a,connectedDomainName:l:()=>S(!1),onConfirm:()=>{f({blogNetworkRedirect:!0}),S(!1),l({eventName:s.J.CustomThemeDisabled})}})]})};var na=e=>{var t=e.blogName,a=e.primary,n=e.isGroupChannel,r=(0,o.bp)()._c,s=(0,i.TH)().pathname,l=n?r("Section title in settings page for leaving a group blog","Leave group blog"):r("Section title in settings page for deleting a secondary blog","Delete blog"),d=n?r("Button label to leave a group blog. Placeholder is the blog name","Leave %1$s",[t]):r("Button label for deleting a blog. Placeholder is the blog name","Delete %1$s",[t]),c=new URL(`/blog/${t}/${n?"leave":"delete"}`,t6.Cw);return c.searchParams.set("redirect_to",s),(0,x.jsx)(tB.Z,{label:l,children:a?(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Explainer shown in the 'Delete blog' section on the primary blog's settings page",components:{link:(0,x.jsx)(t8.rU,{to:O.o_.accountSettings})},children:"This is your primary blog. It cannot be deleted without deleting the account associated with it. Head over to your [link]account settings[/link] if you want to delete your account."})}):(0,x.jsx)(E.Z,{href:c.toString(),feature:!1,backgroundColor:X.paletteRed,textColor:X.paletteWhite,className:tQ.deleteBlogButton,children:d})})};na.displayName="Delete";var nn=a(67023),nr=a(66498),ni=a(14544),ns=a(86033),no=[0,1,2,5,6,7,8,9,10],nl=eo.z.lazy(()=>(0,ei.i)(eo.z.object({message:eo.z.string(),status:eo.z.number(),downloadLink:eo.z.string().optional(),date:eo.z.preprocess(e=>e&&"string"==typeof e&&new Date(e),eo.z.date()).optional()})).transform(e=>e.response)),nd=e=>{var t=e.blogName,a=(0,o.bp)(),n=a.apiFetch,i=a.apiFetchWithSchema,s=a._getLocaleDateString,l=(0,ni.M)(),d=(0,r.useRef)(),c=(0,er.a)({queryKey:["blog-export-lookup",t],queryFn:()=>i(`/v2/blog/${t}/backup`,nl),refetchInterval:e=>{var t=e.state.data;return!!((null==t?void 0:t.status)!==void 0&&no.includes(t.status))&&3e4},refetchOnWindowFocus:!1}),u=c.data,h=c.error,g=c.isFetching,p=c.refetch,m=(null==u?void 0:u.status)===3&&!!(null!=u&&u.downloadLink),f=(null==u?void 0:u.status)!==void 0&&no.includes(null==u?void 0:u.status),b=h instanceof tK.Z&&403===h.status;return(0,re.cancel()},[]),(0,x.jsxs)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section used for exporting a blog's data",children:"Export"}),children:[m&&(0,x.jsxs)("div",{className:tQ.downloadExport,children:[(0,x.jsx)(E.Z,{className:tQ.downloadExportButton,feature:!1,href:null==u?void 0:u.downloadLink,target:"_blank",textColor:X.paletteWhite,children:(0,x.jsx)(I.ZP,{comment:"Button on the blog settings section that allows the user to download a backup of their blog",children:"Download backup"})}),(null==u?void 0:u.date)&&(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Text on the blog settings section that tells when the latest backup of their blog was created. [date] is the date of the backup",params:{date:s(u.date,nn.C.Notes,!0)},children:"Created on [date]"})})]}),b?(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Message to be shown on the blog settings section for Export when the setting is not available because of feature flags",children:"This setting is not available yet for your account"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(E.Z,{disabled:g||f,textColor:X.paletteWhite,disabledTextColor:l.name===nr.Z.trueBlue?X.paletteGray40:void 0,onClick:()=>en()().async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d.current=(0,ns.Z)(n(`/v2/blog/${t}/backup`,{method:"POST"})),e.next=6,en()().awrap(d.current);case 6:return e.prev=6,d.current=void 0,e.next=10,en()().awrap(p());case 10:return e.finish(6);case 11:case"end":return e.stop()}},null,null,[[2,,6,11]],Promise),children:f?(0,x.jsx)(I.ZP,{comment:"Text displayed while a blog backup is being generated for download",children:"Backup processing"}):(0,x.jsx)(I.ZP,{comment:"Button text to export blog contents",params:{blogName:t},children:"Export [blogName]"})}),f&&(0,x.jsx)(tq.Z,{className:tQ.downloadCheckLater,children:(0,x.jsx)(I.ZP,{comment:"Text displayed while a blog backup is being generated for download",children:"This will take a while, please check back later."})})]})]})};nd.displayName="Export";var nc=a(98041);let nu=(e,t)=>{var a=t.blogName,n=t.tags;return e(`/v2/blog/${a}/top_tags`,nc.v5,{method:"POST",body:{tags:n}})};var nh=e=>{var t=e.tag,a=e.onClick;return(0,x.jsx)("li",{className:tQ.featuredTagPill,onClick:a,children:t})},ng=e=>{var t=e.isLoading,a=e.tag,n=e.onClick,r=(0,o.bp)()._c;return(0,x.jsxs)("li",{className:tQ.removableFeaturedTag,children:[(0,x.jsxs)("span",{className:tQ.removableFeaturedTagText,children:["#",a]}),(0,x.jsx)(aY.Z,{className:tQ.remove,disabled:t,text:r("Label or placeholder text to show on a button where a user can remove a featured tag from their blog","Remove"),buttonStyle:"cancel",type:"submit",onClick:n})]})};let np=e=>{var t=e.name,a=(0,o.bp)(),n=a._c,i=a._t,s=a.apiFetchWithSchema,l=(0,q.V)().toggleToast,d=(0,r.useState)(!1),c=u()(d,2),h=c[0],g=c[1],p=(0,r.useState)(""),m=u()(p,2),f=m[0],b=m[1],v=(0,r.useState)(""),y=u()(v,2),w=y[0],j=y[1],k=(0,e4.NL)(),N=(0,nc.mJ)(t),S=N.isPending,_=N.data,T=N.error,C=(0,nc.TW)(t),A=(0,tL.Pk)(i)),[i]),E=(0,e3.D)({mutationFn:e=>{var a=new Set((null!=_?_:[]).map(e=>e.tag));return"tagToAdd"in e?a.add(e.tagToAdd):a.delete(e.tagToRemove),nu(s,{blogName:t,tags:[...a]})},onMutate:e=>{var t=k.getQueryData(C)||[];return k.setQueryData(C,"tagToAdd"in e?t.concat({tage.tagToRemove)),{previousResult:t}},onError:(e,t,a)=>{(null==a?void 0:a.previousResult)&&k.setQueryData(C,a.previousResuleryData(C,e)}}),B=E.isPending,D=E.mutate,Z=S||B,L=n("Label or placeholder text to show on a user input where a user can add a featured tag to their blog","Add a tag"),M=e=>{var t;e instanceof tK.Z&&null!==(t=e.detailedErrors)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.detail?j(e.detailedErrors[0].detail):l(A,"error")},I=()=>{if(_&&_.length>=24){j(n("Error message to show when the user tries to introduce a featured tag after having already reached the limit","You have already reached the maximum number of tags for your blog, please remove some before adding new ones"));return}if(""===f.trim()){j(n("Error message to show when the user tries to introduce an invalid tag","Please introduce a valid tag"));return}if(null!=_&&_.find(e=>e.tag===f)){j(n("Error message to show when the user tries to introduce an already existing tag","This tag already exists"));return}D({tagToAdd:s:()=>{b("")},onError:M})};return(0,x.jsxs)(tB.Z,{className:tQ.featuredTags,label:n("Label describing a settings section to configure which tags should show as featured a blog","Featured Tags"),children:[(0,x.jsxs)(aK.Z,{controlled:!0,isOpen:h,onToggle:()=>{g(!0)},label:{buttonLabel:n("Label for a toggle button that lets a user change the featured tags of their blog","Edit your featured tags"),label:Z?(0,x.jsx)(P.Z,{centerOrientation:"horizontal",color:X.paletteBlack,small:!0}):T?A:null!=_&&_.length?(0,x.jsx)("ul",{className:tQ.list,children:_.map(e=>{var t=e.tag;return(0,x.jsx)(nh,{tag:t,onClick:()=>{g(!0)}},t)})}):n("Label shown on the blog settings when the user has not configured any featured tags for their blog","You do not have any featured tags"),showEditButton:!Z},children:[(0,x.jsxs)("div",{className:tQ.inputWrapper,children:[(0,x.jsx)(tV.Z,{"aria-label":L,className:tQ.input,errorClassName:tQ.inputError,disabled:Z,value:f,error:""!==w&&w,onChange:e=>{b(e.target.value),j("")},onKeyDown:e=>{e.key!==aD.SV.Enter||e.nativeEvent.isComposing||I()},placeholder:L}),(0,x.jsx)(aY.Z,{className:tQ.add,disabled:Z,text:Z?(0,x.jsx)(P.Z,{color:X.paletteWhite,small:!0}):i("Add"),label:L,buttonStyle:"confirm",onClick:I,type:"submit"})]}),(0,x.jsx)("ul",{className:tQ.removableFeaturedTags,children:null==_?void 0:_.map(e=>{var t=e.tag;return(0,x.jsx)(ng,{isLoading:Z,tag:t,onClick:()=>{D({tagToRemove:t},{onError:M})}},t)})})]}),(0,x.jsx)(tq.Z,{children:n("Help text describing the featured tags settings. The replacement is the maximum number of tags a blog can have.","Manage the featured tags that appear in your blog's search and archive. You can have up to %1$s featured tags.",[String(24)])})]})};var nm=a(14113),nf=a(24085);let nb=e=>{var t=e.blogName,a=(0,ta.Q)(t),n=a.data,r=a.isFetched,i=(0,e7.L)(t).mutate,s=(null==n?void 0:n.language)||nf.X9;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to configure the language for a blog",children:"Language"}),children:(0,x.jsx)(nm.Z,{disabled:!r,helpText:(0,x.jsx)(I.ZP,{comment:"Label describing a settings selection",children:"The language used on your blog."}),onChange:e=>{i({language:e.target.value})},value:s,children:Object.entries(nf.zX).map(e=>{var t=u()(e,2),a=t[0],n=t[1].localizedName;return(0,x.jsx)("option",{value:a,children:n},a)})})})};var nv=a(52533),nx=e=>{var t=e.connectedDomainName,a=e.hasLegacyDomain,n=e.cname,r=e.blogNetworkRedirect,i=e.name,s=a&&n,o=!r;return t?o?{href:`https://${t}`,display:t}:t7(i):s?{href:`https://${s}`,display:s}:o?t9(i):t7(i)},ny=(e,t,a,n)=>(n=n.replace(/^\/?/,"/"),{href:`${e}${n}`,display:`${t}${n}`,path:`${a}${n}`}),nw=e=>{if(e){var t=nx(e),a=t.href,n=t.display,r=(0,t3.SS)({peeprBlogname:e.name});return{href:a,display:n,path:r,addSuffix:ny.bind(null,a,n,r)}}};let nj=e=>{var t=e.blogName,a=nw((0,ta.Q)(t).data),n=null==a?void 0:a.addSuffix(O.o_.likes),r=null==a?void 0:a.addSuffix(O.o_.following);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label for a setting that enables a public likes page",children:"Likes"}),children:(0,x.jsx)(tW,{blogName:t,setting:"shareLikes",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings toggle",children:"Share posts you like"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a settings toggle",components:{link:(0,x.jsx)(nv.Z,{to:(null==n?void 0:n.path)||""}),s:(0,x.jsx)("span",{})},params:{url:(null==n?void 0:n.display)||""},children:"[s]Make your likes public at[/s] [link][url][/link] [s]and to others in recommendations.[/s]"})})}),(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Following"}),children:(0,x.jsx)(tW,{blogName:t,setting:"shareFollowing",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings toggle",children:"Share the Tumblrs you're following"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a settings toggle",components:{link:(0,x.jsx)(nv.Z,{to:(null==r?void 0:r.path)||""})},params:{url:(null==r?void 0:r.display)||""},children:"Make your follows public at: [link][url][/link]"})})})]})};var nk=e=>{var t=e._c;return[{text:t("A blog setting option that determines who can mention this blog.","Everyone can mention me"),value:H.PT.AllowAll},{text:t("A blog setting option that determines who can mention this blog","Only blogs I'm following can mention me"),value:H.PT.FollowingOnly},{text:t("A blog setting option that determines who can mention this blog","Only mutuals can mention me"),value:H.PT.MutualsOnly},{text:t("A blog setting option that determines who can mention this blog","No one can mention me"),value:H.PT.Nobody}]};let nN=e=>{var t=e.name,a=(0,o.bp)()._c,n=(0,ta.Q)(t),r=n.data,i=n.isPending,s=(0,e7.L)(t).mutate,l=e=>{switch(e){case H.PT.AllowAll:case H.PT.FollowingOnly:case H.PT.MutualsOnly:case H.PT.Nobody:return e;default:return H.PT.AllowAll}};return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to determine which users can mention this blog",children:"Mentions"}),children:!r||i?(0,x.jsx)(P.Z,{centerOrientation:"horizontalAndVertical",color:X.paletteBlack,small:!0}):(0,x.jsx)(nm.Z,{className:tQ.mentionsSelect,onChange:e=>{s({mentionsAllowed:l(e.target.value)})},value:r.mentionsAllowed,children:nk({_c:a}).map(e=>{var t=e.text,a=e.value;return(0,x.jsx)("option",{value:a,children:t},a)})})})},nS=e=>{var t=e.blogName,a=e.canOnboardToPaywall;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to determine which users can send messages",children:"Messaging"}),children:(0,x.jsx)(tW,{blogName:t,setting:"messagingAllowFollowsOnly",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Only allow messages from Tumblrs you follow"}),helpText:a?(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Tumblrs you don't follow (except your Post+ supporters) won't be able to start conversations with you."}):(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Tumblrs you don't follow won't be able to start conversations with you."})})})},n_=e=>{var t=e.blogName;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section for configuring queued posts",children:"Queue"}),children:(0,x.jsx)(I.ZP,{comment:"Link pointing to queue page where user can change its settings",components:{link:(0,x.jsx)(t8.rU,{to:(0,O.Kt)({blogName:t})})},children:"Head over [link]to the queue[/link] to manage its settings"})})};var nT=new Map([["DO_NOT_ALLOW_REPLIES","0"],["ALLOW_REPLIES_ONLY_FROM_BLOGS_I_FOLLOW","1"],["ALLOW_REPLIES_ONLY_FROM_BLOGS_I_FOLLOW_AND_MORE","2"],["ALLOW_REPLIES_FROM_ANYONE","3"]]),nC=e=>{var t=e._c,a=e.blogInfo,n=[{text:t("A blog setting option that determines who can reply","Everyone can reply"),value:nT.get("ALLOW_REPLIES_FROM_ANYONE")},{text:t("A blog setting option that determines who can reply",null!=a&&a.primary?"Tumblrs you follow and Tumblrs following you for a week can reply":"Members and Tumblrs following you for a week can reply"),value:nT.get("ALLOW_REPLIES_ONLY_FROM_BLOGS_I_FOLLOW_AND_MORE")},{text:t("A blog setting option that determines who can reply",null!=a&&a.primary?"Only Tumblrs you follow can reply":"Only members can reply"),value:nT.get("ALLOW_REPLIES_ONLY_FROM_BLOGS_I_FOLLOW")}];return null!=a&&a.isPremiumPartner&&n.push({text:t("A blog setting option that determines who can reply","Nobody can reply"),value:nT.get("DO_NOT_ALLOW_REPLIES")}),n};let nP=e=>{var t=e.name,a=(0,o.bp)()._c,r=(0,n.$3)(t,"blogSettings"),i=r.data,s=r.isPending,l=tO(t).mutate;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to determine which users can reply to posts",children:"Replies"}),children:!i||s?(0,x.jsx)(P.Z,{centerOrientation:"horizontalAndVertical",color:X.paletteBlack,small:!0}):(0,x.jsx)(nm.Z,{className:tQ.repliesSelect,disabled:null==i?void 0:i.isPrivateChannel,onChange:e=>{l({replyConditions:e.target.value})},value:null!=i&&i.isPrivateChannel?nT.get("ALLOW_REPLIES_ONLY_FROM_BLOGS_I_FOLLOW"):i.replyConditions,children:nC({_c:a,blogInfo:i}).map(e=>{var t=e.text,a=e.value;return(0,x.jsx)("option",{value:a,children:t},a)})})})},nA=e=>{var t=e.cname,a=e.name,n=(0,o.bp)(),i=n._c,s=n._t,l=(0,ta.Q)(a),d=l.isFetching,c=l.data,h=(0,e7.L)(a),g=h.isMutatingField,p=h.mutate,m=(0,r.useState)(),f=u()(m,2),b=f[0],v=f[1],y=(0,r.useState)(!1),w=u()(y,2),j=w[0],k=w[1],N=(0,r.useState)(),S=u()(N,2),_=S[0],T=S[1],C=(0,r.useState)(),P=u()(C,2),A=P[0],E=P[1],B=void 0!==b&&b!==(null==c?void 0:c.submissionsGuidelines),D=void 0!==_&&_!==(null==c?void 0:c.submissionsTags),Z=void 0!==A&&A!==(null==c?void 0:c.submissionsTitle),L=["submissionsAllowText","submissionsAllowPhoto","submissionsAllowQuote","submissionsAllowLink","submissionsAllowVideo"].reduce((e,t)=>e+(null!=c&&c[t]?1:0),0);return(0,x.jsxs)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to allow other users to submit posts to your blog",children:"Submissions"}),children:[(0,x.jsx)(tW,{blogName:a,setting:"submissionsEnabled",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Let people submit posts"}),helpText:null!=c&&c.hiddenFromBlogNetwork?i("Description for the Post submission setting.","Allow your audience to submit posts via mobile into your submission queue for approval. Web submissions aren't enabled for this blog because it is hidden."):(0,x.jsx)(I.ZP,{components:{link:(0,x.jsx)("a",{href:`${t||(0,Y.Z)(a)}/submit`})},comment:"Label describing a settings input",children:"Allow your audience on [link]web[/link] and mobile to submit posts into your submission queue for approval."})}),(0,x.jsxs)(t0,{isExpanded:null==c?void 0:c.submissionsEnabled,children:[(0,x.jsx)(tX.Z,{text:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Submissions page title"}),children:(0,x.jsx)(tV.Z,{disabled:d||g("submissionsTitle"),onBlur:()=>{Z&&p({submissionsTitle:A})},onChange:e=>{E(e.target.value)},onKeyDown:e=>{Z&&(0,tY.Z)(e)&&p({submissionsTitle:A})},value:null!=A?A:null==c?void 0:c.submissionsTitle})}),(0,x.jsx)(tX.Z,{text:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Submissions guidelines"}),children:(0,x.jsx)("textarea",{className:tQ.submissionsGuidelines,disabled:d||g("submissionsGuidelines"),onBlur:()=>{B&&p({submissionsGuidelines:b})},onChange:e=>{v(e.target.value)},value:null!=b?b:(null==c?void 0:c.submissionsGuidelines)||""})}),(0,x.jsx)(tX.Z,{text:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Optional tags for submitter (comma separated)"}),children:(0,x.jsx)(tV.Z,{disabled:d||g("submissionsionsTags:_})},onChange:e=>{T(e.target.value)},onKeyDown:e=>{D&&(0,tY.Z)(e)&&p({submissionsTags:_})},value:null!=_?_:null==c?void 0:c.submissionsTags})}),(0,x.jsx)(tq.Z,{children:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Allowed post types"})}),[[{label:s("Text"),setting:"submissionsAllowText"},{label:s("Photo"),setting:"submissionsAllowPhoto"},{label:s("Quote"),setting:"submissionsAllowQuote"}],[{label:s("Link"),setting:"submissionsAllowLink"},{label:s("Video"),setting:"submissionsAllowVideo"}]].map((e,t)=>(0,x.jsx)("div",{className:tQ.submissionsTypes,children:e.map(e=>{var t=e.label,a=e.setting;return(0,x.jsx)(tD.Z,{className:tQ.submissionsType,checked:!!(null!=c&&c[a]),controlled:!0,disabled:d||g(a),id:`blog-settings-${a}`,label:t,onChange:()=>{1===L&&null!=c&&c[a]?k(!0):p({[a]:!(null!=c&&c[a])})}},t)})},t))]}),j&&(0,x.jsx)(aG.Z,{glassIsClickable:!0,onGlassClick:()=>{k(!1)},children:(0,x.jsx)(aq.O,{buttons:[{text:s("OK"),onClick:()=>{k(!1)},buttonStyle:aq.X.Confirm}],title:i("Warning message shown when a user tries to disable all accepted submission types","At least one post type must be selected")})})]})};var nE={"Africa/Bangui":"West Central Africa","Africa/Cairo":"Cairo, Egypt","Africa/Casablanca":"Casablanca, Monrovia","Africa/Harare":"Harare","Africa/Johannesburg":"Pretoria","America/Bogota":"Bogota, Lima, Quito","America/Buenos_Aires":"Buenos Aires, Georgetown","America/Caracas":"Caracas, La Paz","America/Costa_Rica":"Central America","America/Noronha":"Fernando de Noronha","America/Santiago":"Santiago","Asia/Almaty":"Almaty, Novosibirsk","Asia/Baghdad":"Baghdad","Asia/Baku":"Baku, Tbilisi, Yerevan","Asia/Bangkok":"Bangkok, Hanoi, Jakarta","Asia/Calcutta":"Chennai, Calcutta, Mumbai, New Delhi","Asia/Dhaka":"Astana, Dhaka, Sri Jayawardenepura","Asia/Hong_Kong":"Beijing, Chongqing, Hong Kong, Urumqi","Asia/Irkutsk":"Irkutsk, Ulaan Bataar","Asia/Jerusalem":"Jerusalem","Asia/Kabul":"Kabul","Asia/Karachi":"Islamabad, Karachi, Tashkent","Asia/Katmandu":"Katmandu","Asia/Krasnoyarsk":"Krasnoyarsk","Asia/Magadan":"Magadan, Soloman Is., New Caledonia","Asia/Muscat":"Abu Dhabi, Muscat","Asia/Rangoon":"Rangoon","Asia/Riyadh":"Kuwait, Nairobi, Riyadh","Asia/Seoul":"Seoul","Asia/Singapore":"Kuala Lumpur, Perth, Singapore, Taipei","Asia/Tehran":"Tehran","Asia/Tokyo":"Osaka, Sapporo, Tokyo","Asia/Yakutsk":"Yakutsk","Asia/Yekaterinburg":"Yekaterinburg","Atlantic/Azores":"Azores","Atlantic/Cape_Verde":"Cape Verde Is.","Australia/Adelaide":"Adelaide","Australia/Brisbane":"Brisbane, Guam, Port Moresby","Australia/Canberra":"Canberra, Hobart, Melbourne, Sydney, Vladivostok","Australia/Darwin":"Darwin","Canada/Atlantic":"Atlantic Time (Canada); Brasilia, Greenland","Canada/Newfoundland":"Newfoundland","Canada/Saskatchewan":"Saskatchewan","Europe/Amsterdam":"Amsterdam, Berlin, Rome, Stockholm, Vienna","Europe/Dublin":"Greenwich Mean Time : Dublin, Edinburgh, London","Europe/Istanbul":"Athens, Beirut, Bucharest, Istanbul","Europe/Kiev":"Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","Europe/Moscow":"Moscow, St. Petersburg, Volgograd","Europe/Paris":"Brussels, Copenhagen, Madrid, Paris","Europe/Prague":"Belgrade, Bratislava, Budapest, Prague","Europe/Warsaw":"Sarajevo, Skopje, Warsaw, Zagreb","Mexico/BajaNorte":"Chihuahua, La Paz, Mazatlan","Mexico/General":"Guadalajara, Mexico City, Monterrey","Pacific/Auckland":"Auckland, Wellington","Pacific/Fiji":"Fiji, Kamchatka, Marshall Is.","Pacific/Honolulu":"Hawaii","Pacific/Kwajalein":"International Date Line West","Pacific/Samoa":"Midway Island, Samoa","US/Alaska":"Alaska","US/Arizona":"Arizona","US/Central":"Central Time (US & Canada)","US/East-Indiana":"Indiana (East)","US/Eastern":"Eastern Time (US & Canada)","US/Mountain":"Mountain Time (US & Canada)","US/Pacific":"Pacific Time (US & Canada); Tijuana"},nB=new Map([["Mexico/BajaNorte","America/Tijuana"],["Mexico/General","America/Mexico_City"],["US/Alaska","America/Anchorage"],["US/Arizona","America/Phoenix"],["US/Central","America/Chicago"],["US/East-Indiana","America/Indiana/Indianapolis"],["US/Eastern","America/New_York"],["US/Mountain","America/Denver"],["US/Pacific","America/Los_Angeles"]]),nD=e=>0===e?"0":e>0?`+${e}`:String(e),nZ=e=>e<10?`0${e}`:String(e),nL=e=>{var t,a=new Date,n=new Date(a.toUTCString().replace(/ GMT$/,""));return(new Date(a.toLocaleString("sv",{timeZone:null!==(t=nB.get(e))&&void 0!==t?t:e})).getTime()-n.getTime())/36e5},nM=e=>{var t=nL(e),a=Math.floor(t),n=t-a;return`${nD(a)}:${nZ(60*n)}`},nI=(e,t)=>{var a=u()(e,2),n=a[0],r=a[1],i=u()(t,2),s=i[0],o=i[1],l=nL(n),d=nL(s);return l<d?-1:l>d?1:r.localeCompare(o)};let nR=e=>{var t=e.blogName,a=(0,ta.Q)(t),n=a.data,r=a.isFetched,i=(0,e7.L)(t).mutate;return(0,x.jsx)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section to configure the timezone for a blog",children:"Timezone"}),children:(0,x.jsx)(nm.Z,{disablarget.value})},value:null==n?void 0:n.timezone,children:Object.entries(nE).sort(nI).map(e=>{var t=u()(e,2),a=t[0],n=t[1];return(0,x.jsxs)("option",{value:a,children:["(UTC",nM(a),") ",n]},a)})})})},nO=a.p+"src/assets/images/tipping/rocket-money-400-a1757802.gif";var nF=eo.z.lazy(()=>(0,ei.i)(eo.z.object({disabledFromPaymentsLabel:eo.z.string(),disabledFromPaymentsReason:eo.z.nullable(eo.z.string()),isPaywallOn:eo.z.boolean(),isTippingOn:eo.z.boolean(),isTumblrpayOnboarded:eo.z.boolean(),isTumblrpaySiteProvisioned:eo.z.boolean(),stripeDashboardUrl:eo.z.string(),stripeKycRejectedReason:eo.z.string(),stripeKycStatus:eo.z.union([eo.z.literal("application-pending"),eo.z.literal("additional-info-needed"),eo.z.literal("successful"),eo.z.literal("rejected"),eo.z.literal("unknown"),eo.z.literal("")]),stripeKycStatusMessage:eo.z.string(),stripeKycUrl:eo.z.string()(e=>e.response);function nU(e){var t=(0,o.bp)().apiFetchWithSchema;return(0,er.a)({queryKey:["payments-status",e],queryFn:()=>en()().async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t(`/v2/blog/${e}/payments/status`,nF));case 1:case"end":return a.stop()}},null,null,null,Promise),staleTime:6e4})}var n$=a(52153),nz=a(45051),nG=e=>{var t=e.name,a=e.enableTipping,n=e.onClose,r=(0,o.bp)()._c,i=tO(t).isMutatingField;return(0,x.jsxs)(aR.Z,{compact:!0,title:r("Title for the modal shown when a user wants to allow tips on their blog","Start accepting tips"),onClose:n,children:[(0,x.jsx)("p",{className:tQ.tippingModalText,children:(0,x.jsx)(I.ZP,{comment:"Text for the dialog shown when a user wants to allow tips on their blog",components:{termsLink:(0,x.jsx)("a",{href:"https://www.tumblr.com/policy/en/terms-of-service"}),privacyLink:(0,x.jsx)("a",{href:"https://www.tumblr.com/privacy"})},children:"By tapping Enable tipping below you agree to our [termsLink]Terms of Service[/termsLink] and have read our [privacyLink]Privacy Policy[/privacyLink]."})}),(0,x.jsx)(aI.Z,{className:tQ.tippingModalButtons,buttons:[{disabled:i("isTippingOn"),text:i("isTippingOn")?(0,x.jsx)(P.Z,{centerOrientation:"horizontal",color:X.paletteWhite,small:!0}):r("Button text that will enable tipping on a blog","Enable tipping"),onClick:()=>{null==a||a(n)},buttonStyle:"confirm",type:"submit"},{disabled:i("isTippingOn"),text:r("Button text that will close a dialog that prompted a user to enable tipping","Nevermind"),onClick:n,buttonStyle:"cancel",type:"button"}]})]})},nW=e=>{var t=e.name,a=e.onClose,n=(0,o.bp)(),i=n._c,l=n._t,d=n.apiFetch,c=n.logEvent,h=window.location,g=h.host,p=h.pathname,m=(0,er.a)({queryKey:["memberships-provision",t,g,p],queryFn:()=>d(`/v2/blog/${t}/memberships/provision?host=${g}&path=${p}`,{method:"POST"})}),f=m.data,b=m.isError,v=m.isFetching,y=(0,r.useState)(!1),w=u()(y,2),j=w[0],k=w[1],N=(0,q.V)().toggleToast;return(0,r.useEffect)(()=>{!v&&b&&N((0,tM.U)((0,tL.Pk)(l)),"error")},[l,b,v,N]),(0,x.jsxs)(aR.Z,{compact:!0,title:i("Title for the modal shown when a user wants to set up their Stripe account to receive tips","Set up your payout details"),onClose:a,children:[(0,x.jsx)("p",{className:tQ.tippingModalText,children:(0,x.jsx)(I.ZP,{comment:"Instructions for the modal shown when a user wants to set up their Stripe account to receive tips",children:"To enable tipping, we're going to direct you to our payment partner, Stripe, so you can safely input your personal banking details in order to get paid. Don't worry, we'll bring you back here when you're done."})}),(0,x.jsx)(aI.Z,{className:tQ.tippingModalButtons,buttons:[{disabled:b||v||j,text:v||j?(0,x.jsx)(P.Z,{centerOrientation:"horizontal",color:X.paletteWhite,small:!0}):i("Button text that will take user to Stripe to add their banking info","Continue to Stripe"),onClick:()=>{null!=f&&f.response.url?(k(!0),c({eventName:s.J.TippingOnboardingStart}),window.location.assign(null==f?void 0:f.response.url)):N((0,tM.U)((0,tL.Pk)(l)),"error")},buttonStyle:"confirm",type:"submit"},{text:i("Button text that will close a dialog that prompted a user to enable tipping","Nevermind"),onClick:a,buttonStyle:"cancel",type:"button"}]})]})},nH=e=>{var t=e.name,a=e.onClose,n=(0,o.bp)(),r=n._c,i=n.logEvent,l=nU(t),d=l.isFetching,c=l.data;return(0,x.jsxs)(aR.Z,{compact:!0,title:r("Title for the modal shown to a user while their Stripe application is awaiting approval on the Stripe side","Your application is under review"),onClose:a,children:[(0,x.jsx)("p",{className:tQ.tippingModalText,children:r("Text for the modal shown to a user while their Stripe application is awaiting approval on the Stripe side","Its taking a little longer than expected to verify your information but dont worry, well let you know once its complete and you can enable tipping.")}),(0,x.jsx)(aI.Z,{className:tQ.tippingModalButtons,buttons:[{disabled:d,text:r("Button that will close the modal shown to a user while their Stripe application is awaiting approval on the Stripe side","Got it"),onClick:a,buttonStyle:"neutral",type:"button"},{disabled:d||!(null!=c&&c.stripeDashboardUrl),text:null!=c&&c.stripeDashboardUrl?r("Button that will take the user to Stripe from the modal shown to a user while their Stripe application is awaiting approval on the Stripe side","View Details"):r("Error message on a dialog of the blog settings Tipping section","Couldn't access your Stripe account, please try again later"),onClick:()=>{i({eventName:s.J.StripeEditTap,eventDetails:{status:null==c?void 0:c.stripeKycStatus}}),null!=c&&c.stripeDashboardUrl&&window.location.assign(c.stripeDashboardUrl)},buttonStyle:"confirm",type:"button"}]})]})},nV=()=>{var e=(0,o.bp)()._c;return(0,x.jsx)(aG.Z,{opacity:1,glassIsClickable:!1,onGlassClick:nz.Z,children:(0,x.jsx)(aq.O,{title:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.Z,{centerOrientation:"horizontal"}),(0,x.jsx)("br",{}),(0,x.jsx)(I.ZP,{components:{br:(0,x.jsx)("br",{})},children:"Hang tight![br/]Just doing the final checks..."})]}),body:e("Message shown to the user while Stripe is processing the information provided in order to enable the tipping setting","Stripe is verifying your information. It shouldnt take too long so we thought youd enjoy this cat GIF while you wait (cause who doesnt enjoy a good cat GIF)"),footer:(0,x.jsx)("img",{alt:"Cat playing",src:"https://media.giphy.com/media/ebITvSXYKNvRm/giphy.gif"}),buttons:[]})})},nq=e=>{var t=e.enableTipping,a=e.name,n=e.onClose,r=(0,o.bp)(),l=r._c,d=r.logEvent,c=(0,i.s0)(),u=tO(a).isMutatingField;return(0,x.jsx)(aG.Z,{className:tQ.tippingSuccessSplash,opacity:1,glassIsClickable:!1,onGlassClick:nz.Z,children:(0,x.jsx)(aq.O,{title:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("img",{alt:"money",className:tQ.rocketGif,src:nO,width:180}),(0,x.jsx)("p",{className:m()(tQ.tippingSuccessSplashTitle,tQ.tippingSuccessSplashText),children:l("Message shown to users after the Stripe verification process is successful when enabling tipping","Ka-Ching! Youre ready to get paid.")})]}),body:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{className:tQ.tippingSuccessSplashText,children:(0,x.jsx)(I.ZP,{components:{payouts_link:(0,x.jsx)(t8.rU,{to:"",onClick:()=>{null==t||t(()=>{d({eventName:s.J.PayoutsTap}),c((0,O.su)({blogName:a}))})}})},children:"Your personal and payout details have been verified. If any information changes you can access it by going to [payouts_link]Payouts[/payouts_link] under your blog settings."})}),(0,x.jsx)("p",{className:tQ.tippingSuccessSplashText,children:l("Message shown to users after the Stripe verification process is successful when enabling tipping","To start accepting tips, enable your tip jar by tapping below.")}),(0,x.jsx)(tq.Z,{className:tQ.tippingSuccessSplashText,children:(0,x.jsx)(I.ZP,{components:{terms_link:(0,x.jsx)("a",{href:"https://www.tumblr.com/policy/en/terms-of-service"}),privacy_link:(0,x.jsx)("a",{href:"https://www.tumblr.com/privacy"})},children:"By tapping Enable tipping you agree to our [terms_link]Terms of Service[/terms_link] and have read our [privacy_link]Privacy Policy[/privacy_link]."})})]}),buttons:[{buttonStyle:aq.X.Confirm,disabled:u("isTippingOn"),text:l("Button text that will enable tippin tipping")}]})})},nK=e=>""===e||"successful"===e,nY=e=>{var t=nU(e.name),a=t.isFetching,n=t.data;return(null==n||!n.disabledFromPaymentsReason)&&nK(null==n?void 0:n.stripeKycStatus)||a?null:(0,x.jsxs)("div",{className:tQ.tippingAlert,children:[(0,x.jsx)("p",{children:(null==n?void 0:n.disabledFromPaymentsLabel)||(null==n?void 0:n.stripeKycStatusMessage)}),(0,x.jsx)("p",{children:(0,x.jsx)("a",{href:null==n?void 0:n.stripeDashboardUrl,children:(0,x.jsx)(I.ZP,{comment:"Button text that will bring a user to Stripe to see their banking info",children:"View details"})})})]})};let nQ=e=>{var t=e.canOnboardToTipping,a=e.name,l=(0,o.bp)(),d=l._c,c=l.apiFetch,h=l.features.tippingExtraToggles,g=l.logEvent,p=(0,n.$3)(a,"blogSettings"),m=p.isFetching,f=p.data,b=tO(a),v=b.isMutatingField,y=b.mutate,w=nU(a),j=w.isFetching,k=w.data,N=(0,i.UO)().subSection,S=(0,r.useRef)(),_=(0,r.useRef)(0),T=(0,t8.lr)(),C=u()(T,2),P=C[0],A=C[1],E=(0,i.TH)().pathname,B=(0,r.useState)(!1),D=u()(B,2),Z=D[0],L=D[1],M=(0,r.useState)(!1),R=u()(M,2),F=R[0],U=R[1],$=(0,r.useState)(!1),z=u()($,2),G=z[0],W=z[1],H=(0,r.useState)(!1),V=u()(H,2),K=V[0],Y=V[1],Q=(0,r.useState)(!1),J=u()(Q,2),X=J[0],ee=J[1],et=(0,q.V)().toggleToast,ea=ct)(()=>()=>{clearInterval(S.current)},[]),(0,r.useEffect)(()=>{var e="true"===P.get("refresh")&&!(0,O.N2)(E,a,N);if(ee(e),e){var t=()=>{var e=new URLSearchParams(P);e.set("refresh","false"),A(e)};S.current=window.setInterval(()=>en()().async(function(e){for(;;)switch(e.prev=e.next){case 0:return _.current+=5e3,_.current>=3e4&&(clearInterval(S.current),t(),L(!0)),e.next=4,en()().awrap((0,tZ.ZP)(c).getCreatorSettingsStatus(a).fetch());case 4:e.sent.response.membershipsStatus.stripeKycStatus===n$.Uc.Successful&&(clearInterval(S.current),t(),Y(!0));case 7:case"end":return e.stop()}},null,null,null,Promise),5e3)}},[c,a,P,A,E,N]);vaing=function(){return e.toString()},t}(()=>{et(d("Success message shown after user has enabled tipping on their blog","Tipping has been enabled"),"success"),e(),g({eventName:s.J.TippingToggleOn,eventDetails:{blogname:a}})})})},ei=()=>!!t||(et((0,tL.iI)(d),"tumblrbot"),!1);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Tipping"}),children:[(0,x.jsx)(tD.Z,{controlled:!0,id:"blog-settings-tipping",disabled:ea||!nK(null==k?void 0:k.stripeKycStatus),checked:null==f?void 0:f.isTippingOn,onChange:()=>{ei()&&(null!=f&&f.isTippingOn||X?y({isTippingOn:!1}):null!=f&&f.isTumblrpayOnboarded?U(!0):W(!0),ee(!1))},label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input",children:"Let people tip you"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a setting",components:{link:(0,x.jsx)("a",{href:"https://tumblr.zendesk.com/hc/articles/4417356885527"})},children:"Add an option for your audience to show their love in tips. [link]Learn more[/link]"})}),(0,x.jsx)(nY,{name:a}),h&&(0,x.jsxs)(t0,{isExpanded:null==f?void 0:f.isTippingOn,children:[(0,x.jsx)(tW,{blogName:a,setting:"canShowTip",label:(0,x.jsx)(I.ZP,{comment:"Label for a toggle that will show a tip button under a blog's name",children:"Let people tip your blog"}),helpText:(0,x.jsx)(I.ZP,{comment:"Description for a toggle that will show a tip button under a blog's name",children:'A "Tip" button will appear under your blog\'s name.'})}),(0,x.jsx)(tW,{blogName:a,setting:"tippingPostsDefault",label:(0,x.jsx)(I.ZP,{comment:"Label for a toggle that will show a tip button under a blog's posts",children:"Add tip button to your posts by default"}),helpText:(0,x.jsx)(I.ZP,{comment:"Description for a toggle that will show a tip button under a blog's posts",children:"Other people will see a Tip button on all of your eligible posts. You can still add/remove the button on individual posts regardless of this toggle."})})]})]}),G&&(0,x.jsx)(nW,{name:a,onClose:()=>{W(!1)}}),F&&(0,x.jsx)(nG,{enableTipping:er,name:a,onClose:()=>{U(!1)}}),X&&(0,x.jsx)(nV,{}),K&&(0,x.jsx)(nq,{enableTipping:er,onClose:()=>{Y(!1)},na,x.jsx)(nH,{name:a,onClose:()=>{L(!1)}})]})},nJ=e=>{var t=e.blogViewUrl,a=e.name,n=e.primary,i=(0,o.bp)(),s=i._c,l=i._t,d=i.features.blogNameReleaseWait,c=(0,q.V)().toggleToast,h=(0,r.useState)(!1),p=u()(h,2),m=p[0],f=p[1],b=(0,r.useState)(a),v=u()(b,2),y=v[0],w=v[1],j=(0,r.useState)(""),k=u()(j,2),N=k[0],S=k[1],_=(0,r.useRef)(null),T=(0,e7.L)(a),C=T.isPending,A=T.mutate,E=a!==y,B=()=>{f(!1),w(a),S("")},D=[{text:(0,x.jsx)(I.ZP,{children:"Cance:l("Cancel changes"),onClick:()=>{B()},buttonStyle:"cancel",disabled:C,type:"button"},{text:C?(0,x.jsx)(P.Z,{small:!0,centerOrientation:"horizontal",color:X.paletteWhite}):(0,x.jsx)(I.ZP,{children:"Save"}),label:l("Save changes"),buttonStyle:"confirm",disabled:C||!E,type:"submit"}],Z=t&&(0,x.jsxs)(tq.Z,{as:"small",children:[(0,x.jsx)(I.ZP,{children:"Tumblr URL"}),":"," ",(0,x.jsx)(t4.Z,{href:t,showBlogCard:!1,children:t.replace("https://","")})]}),L=n?s("Label or placeholder for an input field that lets a user change the url of its primary blog","Your username"):s("Label or placeholder for an input field that lets a user change the url of its secondary blog","Your blog's url");return(0,x.jsx)(tB.Z,{label:n?s("Label for a section that shows the tumblr url of a primary blog, e.g. primary-blog.tumblr.com","Username"):s("Label for a section that shows the tumblr url of a secondary blog, e.g. secondary-blog.tumblr.com","Blog name"),isFocused:m,children:(0,x.jsx)(aK.Z,{aboveBlurWhenO=(e=_.current)||void 0===e||e.focus()},label:{buttonLabel:s("Label for a toggle button that lets a user change the name or url of its blog","Change your username"),label:(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"mkC_o",children:a}),Z]})},children:(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),S("");var t=function(e){return""===e.trim()?"Username is blank.":e.length>=1&&e.length<=32?!RegExp("^-|-$","gi").test(e)||"Can't do dashes at the start or end. Middles only.":"Username is too long. Please enter 32 or fewer characters."}(y);!0===t?A(g()({},E&&{name:y}),{onSuccess:(e,t)=>{var a=t.name;a&&window.location.replace((0,O.BR)({blogName:a}))},onError:e=>{var t;e instanceof tK.Z&&null!==(t=e.detailedErrors)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.detail?S(e.detailedErrors[0].detail):c(l("Something went wrong. Please try again."),"error")}}):S(t)},children:[(0,x.jsx),onChange:e=>{w(e.target.value),S("")},error:""!==N&&N,placeholder:L,ref:_}),Z,(0,x.jsx)(aI.Z,{className:"ggcAZ",buttons:D}),!d&&(0,x.jsx)(tq.Z,{as:"small",children:(0,x.jsx)(I.ZP,{comment:"Message to show to the user when it's about to change the username or url of its blog",children:"We'll hold the old username for you for 24 hours, just in case you change your mind or want to use it on a different blog."})})]})})})},nX=e=>{var t=e.blogName,a=e.isAdult,n=e.cname,r=(0,ta.Q)(t),i=r.data,s=r.isFetching,l=(0,e7.L)(t),d=l.isMutatingField,c=l.mutate,u=(0,o.bp)().features.safeMode,h=n||(0,K.Z)(t),g=null==i?void 0:i.hiddenFromSearchResults;return(0,x.jsxs)(tB.Z,{label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings section",children:"Visibility"}),children:[(0,x.jsx)(tW,{blogName:t,setting:"hiddenFromBlogNetwork",label:u?(0,x.jsx)(I.ZP,{comment:"Label describing a settings input that hides your blog when enabled. The blogName param is the blog name.",params:{blogName:t},children:"Hide [blogName] from people without an account"}):(0,x.jsx)(I.ZP,{comment:"Label describing a settings that hides your blog when enabled.",children:"Allow logged-out users to see this blog"}),helpText:u?(0,x.jsx)(I.ZP,{comment:"Help text describing a setting",components:{link:(0,x.jsx)("a",{href:"https://tumblr.zendesk.com/hc/articles/115011611747",target:"_blank"})},children:"This blog will only be viewable to people that are logged into Tumblr and its submission form will only be available on mobile apps. [link]Learn more[/link]"}):(0,x.jsx)(I.ZP,{comment:"Help text describing a setting that hides your blog when enabled. The url param is the blog URL",params:{url:h},children:"Your blog will be available to the public at [url]"})}),u?(0,x.jsx)(tD.Z,{controlled:!0,id:"blog-settings-visibility-safe-search-results",disabled:a||s||d("hiddenFro:()=>{c({hiddenFromSearchResults:!g})},label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input that hides your blog from search results.",params:{blogName:t},children:"Discourage searching of [blogName]"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a setting",components:{link:(0,x.jsx)("a",{href:"https://tumblr.zendesk.com/hc/articles/223857628",target:"_blank"})},children:"Itll be hidden from Tumblr searches, and external search engines like Google or Yahoo will be discouraged from indexing your blog, but it is up to them to honor your request. [link]Learn more[/link]"})}):(0,x.jsx)(tW,{blogName:t,setting:"allowSearchIndexing",label:(0,x.jsx)(I.ZP,{comment:"Label describing a settings input that hides your blog from search results.",params:{blogName:t},children:"Allow [blogName] to appear in search results"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a setting",children:"This applies to searches on Tumblr as well as external search engines, like Google or Yahoo."})}),a&&(0,x.jsx)(tD.Z,{id:"blog-settings-visibility-explicit",disabled:!0,checked:!0,label:(0,x.jsx)(I.ZP,{comment:"Label describing a disabled settings input that informs you about the fact that your blog is explicit.",params:{blogName:t},children:"[blogName] is explicit"}),helpText:(0,x.jsx)(I.ZP,{comment:"Help text describing a setting",components:{link:(0,x.jsx)("a",{href:"https://www.tumblr.com/help",target:"_blank"})},children:"If this seems wrong, learn more at [link]tumblr.com/help[/link]"})})]})},n0=()=>{var e,t=(0,t5.J)("discordWebhooks"),a=(0,i.UO)().blogName,r=(0,n.$3)(a,"blogSettings").data,s=(0,ta.Q)(a).data,o=(0,tE.Pc)().data;if(!r||!s||!(null!=o&&o.isLoggedIn))return null;var l=r.blogViewUrl,d=r.primary,c=r.isAdult,u=r.isGroupChannel,h=r.isPremiumPartner,g=r.canOnboardToTipping,p=r.canMessage,m=r.canOnboardToPaywall,f=r.supportsReplies,b=s.cname,v=s.interactabilityBlaze,y=o.user;return(0,x.jsxs)("section",{className:"hrPDE",children:[(0,x.jsx)(nJ,{blogViewUrl:l,name:a,prid&&(null===(e=y.blogs.find(e=>e.name===a))||void 0===e?void 0:e.admin))&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(aE,{blogName:a}),(0,x.jsx)(nt,{cname:b,blogName:a})]}),h&&(0,x.jsx)(t2,{blogName:a}),d&&(0,x.jsx)(nj,{blogName:a}),!d&&(0,x.jsx)(tH,{blogName:a}),(0,x.jsx)(np,{name:a}),f&&(0,x.jsx)(nP,{name:a}),(0,x.jsx)(nN,{name:a}),!u&&(0,x.jsx)(nQ,{canOnboardToTipping:g,name:a}),void 0!==v&&(0,x.jsx)(a$,{blogName:a}),(0,x.jsx)(aL,{blogName:a,cname:b}),(0,x.jsx)(nA,{cname:b,name:a}),p&&(0,x.jsx)(nS,{blogName:a,canOnboardToPaywall:m}),(0,x.jsx)(aB,{blogName:a}),(0,x.jsx)(n_,{blogName:a}),(0,x.jsx)(nb,{blogName:a}),(0,x.jsx)(nR,{blogName:a}),(0,x.jsx)(nX,{blogName:a,isAdult:c,cname:b}),t&&(0,x.jsx)(tJ,{blogName:a,primary:d}),!d&&(0,x.jsx)(t1,{blogName:a}),(0,x.jsx)(a7,{blogName:a}),(0,x.jsx)(nd,{blogName:a}),(0,x.jsx)(na,{blogName:a,primary:d,isGroupChannel:u})]})};var n1=a(52980),n2=a(98724),n5=a(30337),n4=a(81844),n3=a(43597),n6=a(32468),n7=a(56249);let n9=e=>{var t=e.children,a=(0,i.UO)().blogName,n=(0,ta.Q)(a).isPending;return(0,x.jsxs)(z,{children:[(0,x.jsx)(n1.Z,{activePage:n6.vS.blogSettings(a),children:(0,x.jsx)(n3.Z,{sidebar:(0,x.jsx)(n5.Z,{children:(0,x.jsx)(n4.Z,{settingsPagesConfigs:n7.Zq})}),children:(0,x.jsx)("main",{className:m()(tQ.shell,{[tQ.withContent]:!n}),children:n?(0,x.jsx)(n2.w,{}):t})})}),(0,x.jsx)($.Consumer,{children:e=>e.isActive&&(0,x.jsx)("div",{className:tQ.shellBlurOverlay,"data-testid":"shell-blur-overlay"})})]})},n8=()=>{var e=(0,o.bp)().logEvent,t=(0,i.UO)().blogName,a=(0,ta.Q)(t).data,c=(0,n.$3)(t,"blogSettings").data;if((0,r.useEffect)(()=>{e({eventName:s.J.FeatureExposed,eventDetails:{feature_key:"redpop_blog_settings"}})},[]),!a||!c)return(0,x.jsx)(n9,{});if(!c.admin)return window.location.replace("/settings/account"),(0,x.jsx)(n9,{});var u=a.avatar,h=a.cname,g=a.description,p=a.name,m=a.theme,f=a.title,b=c.canShowBadges,v=c.descriptionNpf,y=c.showBadgeManagement,w=c.tumblrmartAccessories;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.Z,{page:d.H.analyticsPageName}),(0,x.jsxs)(n9,{children:[(0,x.jsxs)(tx,{theme:m,avatar:u,cname:h,description:g,descriptionNpf:v,name:p,title:f,tumblrmartAccessories:w,showBadgeManagement:!!y,canShowBadges:b,children:[(0,x.jsx)(ty,{}),(0,x.jsx)(tw,{children:(0,x.jsx)(tk,{})}),(0,x.jsx)(t_,{}),(0,x.jsx)(tT,{}),(0,x.jsx)(tP,{}),(0,x.jsx)(tA,{})]}),(0,x.jsx)(n0,{})]},t)]})}},98041:(e,t,a)=>{"use strict";a.d(t,{TW:()=>h,ZP:()=>p,mJ:()=>g,v5:()=>c});var n=a(17276),r=a.n(n),i=a(33590),s=a(94833),o=a(91253),l=a(78667),d=a(25731),c=(0,o.i)(s.z.object({blog:s.z.object({topTags:s.z.array(s.z.object({count:s.z.number().optio}))g./${e}/top_tags`,h=e=>["blog-top-tags",e],g=e=>{var t=(0,l.bp)().apiFetchWithSchema;return(0,i.a),c));case 1:case"end":return a.stop()}},null,null,null,Promise),staleTime:6e4})};let p=(e,t)=>r()().async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=d._,a.t1=c,a.next=4,r()().awrap(e(u(t)));case 4:return a.t2=a.sent,a.abrupt("return",(0,a.t0)(a.t1,a.t2));case 6:case"end":return a.stop()}},null,null,null,Promise)},82952:(e,t,a)=>{"use strict";a.d(t,{s:()=>r});var n=a(95004),r=(e,t)==>{if(a.current)return e();a.current=!0},t)}},56777:(e,t,a)=>{"use strict";a.d(t,{h:()=>d});var n=a(33970),r=a.n(n),i=a(95004),s=a(78667),o=a(82952),l=a(68782);function d(e){var t=(0,s.bp)().randomNumber,a=(0,i.useState)((0,l.U)(e,t)c=n[1];return(0,o.s)(()=>{c((0,l.U)(e))},[e]),d}},95867:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>h,jx:()=>c,n5:()=>u});var n=a(33970),r=a.n(n),i=a(95004),s=a(5553),o=a(44561),l=a(49116),d="lastSelectedBlog",c=e=>{var t;try{t=JSON.parse(l.E.getItem(d)||"null")}catch(e){}return null==e?void 0:e.find(e=>{var a;return e.uuid===(null,u=e=>{l.E.setItem(d,JSON.stringify(e))};let h=()=>{var e=(0,i.useState)(),t=r()(e,2),a=t[0],n=t[1],l=(0,s.n)().data;return(0,i.useEffect)(()=>{var e=c(l||[]),t=(0,o.Z)(l||[]);n(e||t)},[og:a,onChangeSelectedBlog:e=>{n(e),u(e)}}}},40092:(e,t,a)=>{"use strict";a.d(t,{$k:()=>c,FI:()=>d,du:()=>l});var n=a(33970),r=a.n(n),i=a(90841),s=a(92779),o={rotationDegrees:0,isMirrored:!1},l=e=>{var t=(e.type===s.lu.Gif?i.Xt:i._Q)*i.BL;return e.size>t},d=e=>Promise.all([c(e),"image/jpeg"===e.type?u(e):Promise.resolve(o)]).then(e=>{var t=r()(e,2),a=t[0],n=t[1];return new Promise((e,t)=>h(a).then(t=>{var r=n.rotationDegrees,i=n.isMirrored,s=t.height,o=t.width;return e({dataUrl:a,displayHeight:s,displayWidth:o,rotationDegreesred:i,isPortrait:s>o})}).catch(e=>{t(e)}))}),c=e=>{var t=new (e=>{t.onloadend=t=>{e(t.target.result)}});return t.readAsDataURL(e),a},u=e=>{var t=new FileReader,a=new Promise(e=>{t.onload=t=>{var a=t.target,n=new DataView(a.result);if(65496!==n.getUint16(0,!1)){e(o);return}for(var r=n.byteLength,i=2;i<r;){if(8>=n.getUint16(i+2,!1)){e(o);return}var s=n.getUint16(i,!1);if(i+=2,65505===s){if(i+=2,1165519206!==n.getUint32(i,!1)){e(o);return}i+=6;var l=18761===n.getUint16(i,!1);i+=n.getUint32(i+4,l);var d=n.getUint16(i,l);i+=2;for(var c=0;c<d;c+=1)if(274===n.getUint16(i+12*c,l)){e(g(n.getUint16(i+12*c+8,l)));return}}else if((65280&s)!=65280)break;else i+=n.getUint16(i,!1)}e(o)}});return t.readAsArrayBuffer(e),a},h=e=>new Promise((t,a)=>{if("datad=()=>t({wror=()=>a(Error("Failed to load image")),n.src=e}else t({width:1,height:2})}),g=e=>{switch(e){case 2:return{rotationDegrees:0,isMirrored:!0};case 3:return{rotationDegrees:180,isMirrored:!1};case 4:return{rotationDegrees:180,isMirrored:!0};case 5:return{rotationDegrees:90,isMirrored:!0};case 6:return{rotationDegrees:90,isMirrored:!1};case 7:return{rotationDegrees:270,isMirrored:!0};case 8:return{rotationDegrees:270,isMirrored:!1};default:return{rotationDegrees:0,isMirrored:!1}}}},44663:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(71650);let r=e=>new URL(e.startsWith("mailto:")?e:(0,n.J)(e)&&!e.startsWith("mailto:")?`mailto:${e}`:)=>n});var n=e=>/\S+@\S+\.\S+/i.test(e)},9441:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(93853);let r=e=>e.key===n.SV.Enter&&!e.nativeEvent.isComposing},68859:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});let n=e=>{if(!e)return!1;try{t=new URL(e)}catch(e){return!1}var t,a=t.hostname;return"safe.txmblr.com"===a||/(?:^tumblr|\.tumblr)\.(?:com|net)$/.test(a)}},60042:(e,t,a)=>{"use strict";a.d(t,{Ev:()=>s,ag:()=>o,bG:()=>l,oL:()=>i});var n=a(94576),r=a(68859);function i(e,t){var a,i=n=>{var i=function(e){var t,a=e.origin,n=e.source,i=e.data;if(!(i&&a&&n)||!(0,r.Z)(a))return null;try{t=JSON.parse(i)}catch(e){return null}if(!t.method)return null;var s=t.method.match(/^([^:]+):(.+)$/);if(!s)return null;var o=s[1],l=s[2],d=t.args[0];return{origin:a,namespace:o,name:l,source:n,cid:t.cid,data:d}}(n);if(i&&i.namespace===e){if("_syn"===i.name){a={namespace:e,source:i.source,origin:i.origin},function(e,t,a,n){var r=JSON.stringify({method:`${a}:_method_callback_responder`,args:[n]});e.postMessage(r,t)}(i.source,i.origin,e,{response:"ack",cid_response:i.cid});return}t[i.name]&&t[i.name](i.data)}};return(0,n.Rr)("mess>a}}function s(e){(0,n.oQ)("message",e)}var o={listen:i,unlisten:s};function l(e,t,a){var n=e.source,r=e.target,i=e.namespace,s=JSON.stringify({method:`${i}:${t}`,args:[a]});n.postMessage(s,r)}},59379:(e,t,a)=>{"use strict";a.d(t,{h:()=>r});var n=a(22979),r=e=>{var t=e.editablePost,a=e.isReblog,r=e.isReblogWithPaywall,i=e.isInbox,s=e.isAsk,o=e.isPrefilledPost,l=e.isReblogWithPoll;return!!(null!=t&&t.isBlocksPostFormat||a&&t&&(0,n.WN)(t))||!!l||!!r||!!s||null!=t&&!!t.isAdFreeGiftAsk||null!=t&&!!t.isTumblrmartGiftAsk||!!i&&!(null!=t&&t.isSubmission)||!!o}},8737:(e,t,a)=>{"use strict";a.d(t,{Ly:()=>o,Tf:()=>i,r9:()=>s});var n=a(49116),r="reblogPostData",i=(e,t)=>{try{var a=n.E.getItem(r);if(a){var i=JSON.parse(a),s=i.postId,l=i.placementId,d=i.isLongPost,c=i.tabId;if(e!==s)return o(),{placementId:t};return{placementId:l,isLongPost:d,tabId:c}}return{placementId:t}}catch(e){return{placementId:t}}},s=(e,t,a,i)=>{try{n.E.setItem(r,JSON.stringify({postId:e,placementIdo=()=>{try{n.E.removeItem(r)}catch(e){}}},82560:(e,t,a)=>{"use strict";a.d(t,{fE:()=>r});var n=a(59379),r=e=>{var t=e.isMobile,a=e.features,r=a.redpopDesktopEditorBeta,i=a.legacyEditorAccess,s=e.editablePost,o=e.isReblog,l=e.isReblogWithPaywall,d=e.isInbox,c=e.isAsk,u=e.isPrefilledPost,h=e.isReblogWithPoll,g=e.isPremiumPartner;return!(0,n.h)({editablePost:s,isReblog:o,isReblogWithPaywall:l,isAsk:c,isInbox:d,isPrefilledPost:u,isReblogWithPoll:h})&&(null!=s&&!!s.shouldOpenInLegacy||!t&&!!(i||g)&&!r)02:(e,t,a)=>{"use strict";a.d(t,{Y:()=>n});var n=(e,t)=>!(e.length<=t)&&RegExp(`^.{${t+1},}`,"u").test(e)}}]);