"use strict";(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[4547],{85287:6473:(e,t,i)=>{i.d(t,{_F:()=>n,dU:()=>a,lA:()=>r,mW:()=>o});var n=(e,t,i)=>i?"official"!==t?void 0!==i[t]?i[t]:null:i[e]||i.official:null,a=(e,t,i,n)=>"general"===t?n["general_".concat(i)]?n["general_".concat(i)]:n[t]||null:n[e]||n.official,r=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(e,t,i.prebid)},o=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(e,t,i.criteo)}},4547:(e,t,i)=>{i.r(t),i.d(t,{default:);var n,a,r,o,s,d=i(3e4),l=i(66062),c=(i(91938),i(76955)),p=i(55752),h=i.n(p),u=i(29466),m=i.n(u),g=i(66948),f=i(97175),b=i(73614),v=i(65777),y=i(6473),A=i(51650),I=i(93218),P=i(85287),w=i(22698),S=i(74103),R=i(3710),k=i(22247),T=i(70749),F=i(5924),H=i(31289),B=i(7430),E=600-P.S+250;function L(){return(L=(0,l.Z)((function*(e){var{dispatch:t,getState:i,match:n}=e,{params:a,pathname:r}=n,o=a.amebaId,s=yield t((0,b.Rs)(o));if(!s||!s.error){var d=h()(i(),["bloggerState","bloggerMap",o,"blog"]),l=i().bloggerState.blogMap[d];l&&l.blog_id&&(yield t((0,v.Ou)(o)),yield Promise.all([t((0,v.Ou)(o)),t((0,H.QG)(r,a))]))}}))).apply(this,arguments)}var O=(0,A.lB)(["match","location"])(n=(0,g.$j)(F.Y,((e,t)=>{var{match:i}=t;return{fetchRchAd:()=>{e((0,R.OX)(k.Ac,k.zZ,i.params.amebaId,{useAmebaId:!0,useCache:!0}))},trackRchTapLog:function(){e((0,R.tJ)(...arguments))},trackRchInviewLog:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e((0,R.xs)(...i,{contentType:"ownedBanner"}))}}}))(n=(0,f.provideHooks)({done:)((r=a=class extends c.Component{onstructor(e){super(e),this.handleDFPNotFound=()=>{"sub_a"===this.props.subType&&this.props.fetchRchAd(),this.setState({isDFPNotFound:!0,showRaichoAd:!0})},this.handleOnDFPRendered=()=>{this.dfpRef.current.clientHeight<=250&&(this.props.fetchRchAd(),this.setState({showRaichoAd:!0}))},this.pointer={ambHeaderHeight:0,releasePoint:0,sidebarHeight:0,stickPoint:0,targetMarginLeft:0},this.onScroll=this.onScroll.bind(this),this.dfpRef=c.createRef(),this.state={isDFPNotFound:!1,showRaichoAd:!1}}componentDidMount(){setImmediate((()=>{this.initStickyAd()}))}shouldComponentUpdate(e,t){return!(this.props.amebaId===e.amebaId&&this.props.adUnit===e.adUnit&&this.props.gender===e.gender&&this.props.canShowAd===e.canShowAd&&this.props.subType===e.subType&&this.props.entryId===e.entryId&&this.props.pageType===e.pageType&&this.props.pathname===e.pathname&&this.props.serviceId===e.serviceId&&m()(this.props.attribute,e.attribute)&&m()(this.props.officialPremiumBannerSide,e.officialPremiumBannerSide)&&m()(this.props.targetingParams,e.targetingParams)&&m()(this.props.rchAd,e.rchAd)&&this.state.isDFPNotFound===t.isDFPNotFound&&this.state.showRaichoAd===t.showRaichoAd)}omponentWillUnmount(){var e=h()(document.querySelectorAll('[data-uranus-layout="subAInner"]'),0,null),t=document.getElementById("subA");e&&t&&(t.style.height="",Object.assign(e.style,{marginTop:"",marginLeft:"",position:"",top:"",left:""})),window.removeEventListener("scroll",this.onScroll,!1)}onScroll(){var e=h()(document.querySelectorAll('[data-uranus-layout="subAInner"]'),0,null),t=document.getElementById("subA"),i=document.getElementById("sideTopBanner"),n=document.getElementById("main");if(e&&t&&i&&n){var a=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft,o=n.clientHeight,s=o-this.pointer.sidebarHeight,d=this.pointer.stickPoint+s,l=void 0!==i.previousElementSibling?(0,S.mV)(i)-(0,S.mV)(e):0;if(1e3>s&&a>d)return t.style.height="",void Object.assign(e.style,{marginTop:"".concat(d-this.pointer.stickPoint,"px"),marginLeft:"",position:"",top:"",left:""});if(a>this.pointer.releasePoint)return t.style.height="",void Object.assign(e.style,{marginTop:"".concat(this.pointer.releasePoint-this.pointer.stickPoint,"px"),marginLeft:"",position:"",top:"",left:""});if(a>this.pointer.stickPoint)return t.style.height="".concat(o,"px"),void Object.assign(e.style,{marginTop:"",marginLeft:"".concat(this.pointer.targetMarginLeft,"px"),position:"fixed",top:"".concat(this.pointer.ambHeaderHeight-l,"px"),left:"".concat((0,S.mJ)(t)-r,"px")});t.style.height="",Object.assign(e.style,{marginTop:"",marginLeft:"",position:"",top:"",left:""})}}initStickyAd(){var e=document.documentElement.clientHeight,t=document.getElementById("main"),i=document.getElementById("subA");if(t&&i){var n=t.clientHeight,a=i.clientHeight+E;if(!(e>n||e>a||a>=n)){var r=document.getElementById("sideTopBanner"),o=document.getElementById("ambHeader"),s=h()(document.querySelectorAll('[data-uranus-layout="subAInner"]'),0,null);if(r&&o&&s){var d=(0,S.mV)(r),l=o.clientHeight,c=d-l,p=c+1e3,u=(0,S.mJ)(s)-(0,S.mJ)(i);this.pointer={ambHeaderHeight:l,releasePoint:p,targetMarginLeft:u,sidebarHeight:a,stickPoint:c},window.addEventListener("scroll",this.onScroll,!1)}}}}render(){var{amebaId:e,adUnit:t,attribute:i,gender:n,rchAd:a,canShowAd:r,targetingParams:l,trackRchTapLog:p,trackRchInviewLog:u,subType:m,entryId:g,serviceId:f,pathname:b,pageType:v}=this.props;if(!r)return null;if("sub_a"!==m&&this.state.isDFPNotFound)return null;var A=i.isOfficial?"official":"general",P=(0,y._F)(e,A,I.r.id),S=(0,y.mW)(e,A,I.r),R=(0,y.dU)(e,i.isOfficial?"official":"general",n,I.r.prebid),k=h()(a,["items",0],{});return(0,d.Z)("div",{className:"subAdBannerArea subModule","data-uranus-component":"widgetAdWrapper",id:"sideTopBanner"},void 0,o||(o=(0,d.Z)("div",{className:"subAdBannerHeader","data-uranus-component":"widgetAd"},void 0,(0,d.Z)("span",{},void 0,"AD"))),c.createElement("div",{ref:this.dfpRef},(0,d.Z)(B.$,{criteoZoneId:S,prebidParams:R,sizeRule:I.r.sizes,slotId:P,slotName:t,style:(0,w.eC)(I.r.sizes),targetingParams:l,onAdRendered:this.handleOnDFPRendered,onNotFoundAd:this.handleDFPNotFound})),this.state.showRaichoAd&&(0,d.Z)("div",{"data-uranus-component":"widgetSubAd"},void 0,s||(s=(0,d.Z)("div",{className:"subAdBannerHeader","data-uranus-component":"widgetAd"},void 0,(0,d.Z)("span",{},void 0,"Ameba\u304b\u3089\u306e\u304a\u77e5\u3089\u305b"))),a&&(0,d.Z)(T._,{alt:h()(k,["labels","description"],"Ameba\u304b\u3089\u306e\u304a\u77e5\u3089\u305b\u753b\u50cf"),height:"300px",imgSrc:h()(k,["imgUrls","0"]),rchMeasureProps:{targetUrl:k.link,bloggerAmebaId:e,entryId:g,serviceId:f,pathname:b,dspMqps:k.meta.dspMqps,metaMqps:k.meta.mqps,mqps:a.mqps,pageType:v,spotId:a.spot,trackInview:u,trackTap:p},width:"300px"})))}},a.displayName="PcAdSidebarPremiumPanelUranus",n=r))||n)||n)||n}}]);