(()=>{"use strict";var t={760:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UrlPart=e.PlatformOption=e.FilterType=e.InjectionType=e.InjectionPosition=void 0,e.InjectionPosition||(e.InjectionPosition={})),function(t){t.WIDGET="WIDGET",t.CODE="CODE",t.SCRIPT="SCRIPT"}(e.InjectionType||(e.InjectionType={})),function(t){t.PLATFORM="PLATFORM",t.URL="URL",t.DRAFT="DRAFT"}(e.FilterType||(e.FilterType={})),function(t){t.ALL="ALL",t.MOBILE="MOBILE",t.DESKTOP="DESKTOP"}(e.PlatformOption||(e.PlatformOption={})),e.UrlPart||(e.UrlPart={}))},740:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(760),i=function(){eturn t.prototype.approveFilters=function(t){var e=this,r=!0;return!!this.checkExcludedDomain()&&(!t||(t.forEach((function(t){switch(t.filterType){case n.FilterType.PLATFORM:e.validatePlatform(t)||(r=!1);break;case n.FilterType.URL:e.validateUrl(t)||(r=!1);break;case n.FilterType.DRAFT:e.isDraft()||(r=!1)}})),r))},t.prototype.isDraft=function(){var t=window.location.search,e=new URLSearchParams(t),r=e.get("obDraft")||e.get("obdraft");return!("false"===r||!r)},t.prototype.checkExcludedDomain=function(){return window.location.host!==this.excludeDomain},t.prototype.validatePlatform=function(t){var e=!0;switch(t.value){case n.PlatformOption.MOBILE:this.isMobile(t)||(e=!1);break;case n.PlatformOption.DESKTOP:!this.isMobile(t)||(e=!1);case n.PlatformOption.ALL:}return e},t.prototype.validateUrl=function(t){for(var e=t.value,r=!0,i=0;r&&i<e.length;){var o=e[i];switch(o.type){case n.UrlPart.DOMAIN:for(var a=this.cleanPath(window.location.hostname),l=!1,s=0;!l&&s<o.values.length;){a===this.cleanPath(o.values[s])&&(l=!0),s++}l||(r=!1);break;case n.UrlPart.PATH:for(var c=this.cleanPath(window.location.pathname),u=!1,d=0;!u&&d<o.values.length;){c===this.cleanPath(o.values[d])&&(u=!0),d++}u||(r=!1);break;case n.UrlPart.QUERY_PARAM:for(var p=window.location.search,f=!1,v=0;!f&&v<o.values.length;)p.includes(o.values[v].trim())&&(f=!0),v++;f||(r=!1)}i++}return r},t.prototype.cleanPath=function(t){return t=t.trim().replace(/\/$/,"").replace(/^\//,"")},t.prototype.isMobile=function(t){var e=navigator.userAgent.toLowerCase();return!!/(mobi|iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/i.test(e)},t}();e.default=i},136:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=r(760),i=r(740),o=function(){eturn t.prototype.initElementsInjection=function(t){var e=this;t.forEach((function(t){if(e.filtersService.approveFilters(t.filters)){var r=e.searchForSelector(t.locationSelectors);if(r){var i=void 0;switch(t.type){case n.InjectionType.WIDGET:i=e.createWidgetContainer(t.widgetToInject);break;case n.InjectionType.CODE:i=e.createDivWithContent(t.HTMLToInject);break;case n.InjectionType.SCRIPT:i=e.createScriptTag(t.scriptToInject)}i&&e.insertElement(r,i,t.position)}}}))},t.prototype.searchForSelector=function(t){if(!t||!t.length)return null;for(var e=0;e<t.length;e++){var r=document.querySelector(t[e]);if(r)return r}return null},t.prototype.createDivWithContent=function(t){if(!t)return null;var e=document.createElement("div");return e.innerHTML=t,e},t.prototype.createScriptTag=function(t){if(!t||!Object.keys(t))return null;var e=document.createElement("script");for(var r in t.attributes)e.setAttribute(r,t.attributes[r]);if(t.content){var n=document.createTextNode(t.content);e.appendChild(n)}return e},t.prototype.createWidgetContainer=function(t){var e;if(!t.widgetId&&!t.widgetsTest)return null;var r=new URLSearchParams(window.location.search).get("ksforce");if(r?t.widgetId=null==r?void 0:r.toUpperCase():t.widgetsTest&&(t.widgetId=null!==(e=this.randomWidgetId(t.widgetsTest))&&void 0!==e?e:t.widgetId),!t.widgetId)return null;if("NA"===t.widgetId)return null;var n=document.createElement("div");return n.className="OUTBRAIN",n.setAttribute("data-widget-id",t.widgetId),t.permalink&&n.setAttribute("data-src",t.permalink),t.template&&n.setAttribute("data-ob-template",t.template),t.installationKey&&n.setAttribute("data-ob-installation-key",t.installationKey),t.test&&n.setAttribute("data-ob-test",t.test.toString()),t.APIUserId&&n.setAttribute("data-user-id",t.APIUserId),n},t.prototype.randomWidgetId=function(t){try{var e=0;for(var r in t)e+=t[r];var n=Math.floor(Math.random()*e),i=0;for(var r in t)if(n<(i+=t[r]))return r;return null}catch(t){return console.error("Failed to random widget",t),null}},t.prototype.insertElement=function(t,e,r){"BEFORE"===r?t.parentNode.insertBefore(e,t):"AFTER"===r?t.parentNode.insertBefore(e,t.nextSibling):"IN"===r?t.appendChild(e):"REPLACE"===r&&(t.parentNode.insertBefore(e,t),t.remove())},t}();e.default=o}},e={};ar n,i;n=r(136),i=r(740),new(function(){function t(){this.injector=new n.default,this.filtersService=new i.default,this.init(window.OBR.settings.extraElementsInjections)}return t.prototype.init=function(t){try{if(this.elementsData=JSON.parse(t),this.elementsData.isDraft&&!this.filtersService.isDraft())return void window.OB_PROXY.run();if(!this.filtersService.approveFilters(this.elementsData.filters))return void window.OB_PROXY.run();this.injector.initElementsInjection(this.elementsData.elements),window.OB_PROXY.run()}catch(t){return console.error(t),void window.OB_PROXY.run()}},t}())})();