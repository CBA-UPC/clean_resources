(window.webpackJsonp=window.webpackJsonp||[]).push([[27,3,6],{1377:function(e,t,n){},1378:function(e,t,n){},1379:function(e,t,n){},1380:function(e,t,n){},1381:function(e,t,n){},1382:function(e,t,n){},1383:function(e,t,n){},1541:function(e,t,n){"use strict";n.r(t);var a=n(36),r=n(30),c=n(150),o=n(151),s=n(153),i=n(152),u=n(0),l=n.n(u),d=n(24),p=n.n(d),m=n(708),f=n(55),h=(n(1377),function(e){var t=e.packageQuantity,n=e.tier,a=e.paymentDate,r=parseInt(a.substr(3,2),10);return l.a.createElement("section",{className:"account-overview"},l.a.createElement("h4",null,"Subscription Overview"),l.a.createElement(f.a,{className:"manage-sub-btn",to:"/home/settings/subscription"},l.a.createElement("i",{className:"material-icons"},"credit_card"),"\xa0Manage Subscription"),l.a.createElement("p",null,"Your card will be charged on the ",l.a.createElement("strong",null,"".concat(r)))," ","of each month"),l.a.createElement("div",null,l.a.createElement("span",{className:"plan-details"},"Plan Details"),l.a.createElement("div",{className:"line-item"},l.a.createElement("p",null,"Tour Builder plan: ",l.a.createElement("span",{className:"tier"},n)),l.a.createElement("span",{className:"cost"},249)),l.a.createElement("div",{className:Boolean(t)?"line-item":"line-item hide"},l.a.createElement("p",null,"Additional Tour Stop Packages (10 stops) :"),l.a.createElement("p",null,l.a.createElement("span",{className:Boolean(t)?"quantity":"quantity hide"},"".concat(t)),Boolean(t)&&l.a.createElement("span",{className:"cost"},199))),l.a.createElement("div",{className:"total"},"Total Cost:",l.a.createElement("span",{className:"cost"},249+199*t))))}),b=function(e){var t=e.title,n=e.children,a=e.className;return l.a.createElement("div",{className:"item ".concat(a)},l.a.createElement("h4",null,t),l.a.createElement("p",null,n))},v=(n(1378),function(e){var t=e.invoices;return l.a.createElement("section",{className:"payment-history"},l.a.createElement("h4",null,"Payment History"),l.a.createElement("p",null,"Your payment history for the last six billing cycles"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Amount"),l.a.createElement("th",null,"Paid"))),l.a.createElement("tbody",null,t.slice(0,6).map(function(e,t){var n=e.date,a=e.amount,r=e.paid,c=t%2===0,o=p()({row:!0,even:c,odd:!c});return l.a.createElement("tr",{className:o,key:t},l.a.createElement("td",null,"".concat(n)),l.a.createElement("td",null,"$".concat(a.toFixed(2))),l.a.createElement("td",{className:r?"success":"fail"},r?l.a.createElement("i",{className:"material-icons"},"check_circle"):l.a.createElement("i",{className:"material-icons"},"cancel")))}))))}),g=n(1),y=n(11),O=n(27),E=n(35),w=function(e){var t=e.assignments,n=void 0===t?{}:t,a=e.canManageUsers,r=e.email,c=e.firstName,o=e.id,s=e.lastName,i=e.roles,d=e.toggleEditUser,m=e.toggleConfirm,f=e.username,h=e.isAccountOwner,b=Object(u.useState)(!1),v=Object(y.a)(b,2),g=v[0],O=v[1],w=i[(n[o]||{}).rid]||"",j="owner"===(null===w||void 0===w?void 0:w.name),N=!j&&a||j&&h,I=p()("manage-users__table-row-values button-wrapper",{show:g});return l.a.createElement("tr",{className:"manage-users__table-row"},l.a.createElement("td",{className:"manage-users__table-row-values"},c," ",s),l.a.createElement("td",{className:"manage-users__table-row-values"},f),l.a.createElement("td",{className:"manage-users__table-row-values"},r),l.a.createElement("td",{className:"manage-users__table-row-values"},w.displayName),!g&&l.a.createElement("td",{className:"manage-users__table-row-values"},l.a.createElement(E.a,{"data-cy":"manage-users-manage-user-btn-".concat(o),className:"text-btn icon-button manage-user",handleClick:function(){return O(!g)},disabled:!N},l.a.createElement("i",{className:"material-icons"},N?"edit":"lock"),"\xa0 Manage")),N&&g?l.a.createElement("td",{className:I},l.a.createElement(E.a,{"data-cy":"manage-users-edit-user-btn-".concat(o),className:"text-btn icon-button edit-user",handleClick:,l.a.createElement("i",{className:"material-icons"},"edit"),"\xa0Edit"),l.a.createElement(E.a,{"data-cy":"manage-users-password-reset-btn-".concat(o),className:"text-btn icon-button pw-reset",handleClick:function(){return m({id:o,type:"reset"})}},l.a.createElement("i",{className:"material-icons"},"lock"),"\xa0Password"),l.a.createElement(E.a,{className:"text-btn icon-button delete-user",handleClick:"data-cy":"manage-users-delete-user-btn-".concat(o)},l.a.createElement("i",{className:"material-icons"},"delete"),"\xa0Remove"),l.a.createElement(E.a,{"data-cy":"manage-users-canncel-manage-users-btn-".concat(o),className:"text-btn cancel-btn",handleClick:disabled:!N},l.a.createElement("i",{className:"material-icons"},"cancel"),"\xa0 Cancel")):null)},j=n(12),N=n(4),I=n(165),S=["id","label","className","options","handleChange","selected","name"],x=function(e){var t=e.id,n=e.label,a=e.className,r=e.options,c=void 0===r?[]:r,o=e.handleChange,s=e.selected,i=e.name,u=Object(j.a)(e,S);return l.a.createElement("div",{className:a},n&&l.a.createElement("label",null,n),l.a.createElement("select",Object.assign({id:t,onChange:o,value:s,name:i},u),c.map(function(e){var n=e.name,a=e.value;return l.a.createElement("option",{key:"".concat(t,"-").concat(a),value:a},n)})))},T=n(169),C=n(155),k=n(300),A=n.n(k),_=(n(1379),n(190)),U=n(204),P=["emailConfirm","notifyUser"],D=["notifyUser","raid","lastName","firstName"],R={firstName:"",lastName:"",email:"",emailConfirm:"",rid:"",raid:"",notifyUser:!0},M=Object.keys(R).reduce({}),L=Object(u.memo)(function(e){var t=e.accountUsers,n=e.assignments,a=e.clearStatusState,r=e.errorCode,c=e.errorMessage,o=e.id,s=e.postNewUser,i=e.roles,d=void 0===i?{}:i,p=e.status,m=e.toggleEditUser,f=e.type,h=e.updateUser,b="edit"!==f,v=Object(O.g)(o),w=Object(O.g)(b),S=Object(O.g)(r),k=!b&&o?t[o]:{},L=Object(u.useState)(R),V=Object(y.a)(L,2),F=V[0],B=V[1],G=Object(u.useState)(M),J=Object(y.a)(G,2),H=J[0],z=J[1],Q=k.firstName,W=void 0===Q?"":Q,K=k.lastName,q=void 0===K?"":K,Y=k.email,$=void 0===Y?"":Y,Z=n[o],X=(Object.values(d).find(function(e){return"admin"===e.name})||{}).rid,ee=(null===Z||void 0===Z?void 0:Z.rid)||"",te=d[ee],ne="owner"===(null===te||void 0===te?void 0:te.name),ae=o===localStorage.getItem("uid");Object(u.useEffect)(function(){b||v===o?!w&&b&&B(Object(g.a)(Object(g.a)({},R),{},{rid:X})):B({firstName:W,lastName:q,email:$,emailConfirm:$,rid:ee,raid:(null===Z||void 0===Z?void 0:Z.id)||"",notifyUser:!0}),b&&!F.rid&&X&&B(Object(g.a)(Object(g.a)({},F),{},{rid:X})),S!==r&&409===r&&z(Object(g.a)(Object(g.a)({},M),{},{email:{warning:!0,message:"User Already Exists"}}))},[ee,o,b,v,k,w,W,q,$,Z,d,X,F,r,S]);var re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.preventDefault();var n=function(){return oe()},a=ie(),r=Object(y.a)(a,2),c=r[0],i=r[1];if(!c)return z(Object(g.a)(Object(g.a)({},H),i)),!1;b?s(Object(g.a)(Object(g.a)({},se(F)),{},{linkExisting:t}),n):h(o,se(F),n)},ce=function(e){var t=e.target,n=t.name,a=t.value;z(M),B(Object(g.a)(Object(g.a)({},F),{},Object(N.a)({},n,a)))},oe=function(){m(),B(R),z(M),a()},se=function(e){var t=Object(j.a)(R,P);return Object.keys(e).reduce({})},ie=function(){F.notifyUser,F.raid,F.lastName,F.firstName;var e=Object(j.a)(F,D),t=!0,n={};return Object.keys(e).forEach(function(a){e[a]||(t=!1,n=Object(g.a)(Object(g.a)({},n),{},Object(N.a)({},a,{error:!0,message:"Required Field"})))}),t&&((t=Object(_.c)(e.email))||(n=Object(g.a)(Object(g.a)({},n),{},{email:{error:!0,message:"Email is invalid"}}))),t&&e.email!==e.emailConfirm&&((t=!1)||(n=Object(g.a)(Object(g.a)({},n),{},{emailConfirm:{error:!0,message:"Emails do not match"}}))),[t,n]},ue=b||k.email!==F.email,le=Object.values(d).filter(.map(,de=b||function(){var e={firstName:W,lastName:q,email:$,rid:ee,raid:null===Z||void 0===Z?void 0:Z.id};return!A()(se(F),se(e))}(),pe=b||ae;return l.a.createElement("div",{className:"edit-user-modal"},l.a.createElement(E.a,{className:"text-btn edit-user-modal__close-btn",handleClick:oe,type:"button"},l.a.createElement(U.a,null,"close")),l.a.createElement("form",{className:"edit-user-modal__form"},l.a.createElement("h2",{className:"edit-user-modal__heading"},b?"Add New User":"Edit ".concat(k.email).concat(ae?" (you)":"")),pe&&l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{id:"edit-user-first-name",classNames:"edit-user-modal__text-input",label:"First Name:",name:"firstName",inputValue:F.firstName,handleInput:ce,displayError:H.firstName.error,errorText:H.firstName.message}),l.a.createElement(I.a,{id:"edit-user-last-name",classNames:"edit-user-modal__text-input",label:"Last Name:",name:"lastName",inputValue:F.lastName,handleInput:ce,displayError:H.lastName.error,errorText:H.lastName.message}),l.a.createElement(I.a,{id:"edit-user-email",classNames:"edit-user-modal__text-input",label:"Email Address:",name:"email",inputValue:F.email,handleInput:ce,displayError:H.email.error,displayWarning:H.email.warning,errorText:H.email.message,required:!0}),ue&&l.a.createElement(I.a,{id:"edit-user-email-confirm",classNames:"edit-user-modal__text-input",label:"Confirm Email:",name:"emailConfirm",inputValue:F.emailConfirm,handleInput:ce,displayError:H.emailConfirm.error,errorText:H.emailConfirm.message,required:!0})),!ne&&l.a.createElement(x,{id:"edit-user-role-selection",className:"edit-user-modal__select",label:"User Role:",name:"rid",handleChange:ce,options:le,selected:F.rid,"data-testid":"edit-user-role-select"}),"error"===p&&(409!==r?l.a.createElement("p",{className:"edit-user-modal__error"},c):l.a.createElement("p",{className:"edit-user-modal__error__link"},l.a.createElement(U.a,null,"warning"),"The email address already exists in the Concept3D system. Are you sure you want to give this user access to your data and account? They will be notified you made this change.")),l.a.createElement("div",{className:"edit-user-modal__button-wrapper"},"error"===p&&409===r?l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{className:"edit-user-modal__save-btn",permission:C.k.manageUsers,saving:"saving"===p,disabled:!de,changed:de,changedText:"Give Access",changedIcon:"check",doneText:"Saved",doneIcon:"check",savingText:b?"Creating User":"Updating User",handleClick:type:"submit","data-testid":"edit-user-link-btn"}),l.a.createElement(E.a,{className:"cancel-btn",handleClick:oe,type:"button"},l.a.createElement(U.a,null,"block"),"\xa0 Cancel")):l.a.createElement(T.a,{className:"edit-user-modal__save-btn",permission:C.k.manageUsers,saving:"saving"===p,disabled:!de,changed:de,changedText:b?"Create User":"Update User",doneText:"Saved",doneIcon:"check",changedIcon:"add",savingText:b?"Creating User":"Updating User",handleClick:re,type:"submit","data-testid":"edit-user-save-btn"}))))}),V=n(261),F=(n(1380),function(e){var t=e.accountUsers,n=void 0===t?{}:t,a=e.roles,r=void 0===a?{}:a,c=e.toggleConfirm,o=e.deleteUser,s=e.updateUser,i=e.resetPassword,u=e.showConfirm,d=e.status,p=u.id,m=u.type,f=n[p]||{},h=function(){return c()},b=Object.values(r),v=(b.length>0&&b.find(function(e){return"disabled"===e.name})||{}).rid,g=void 0===v?"":v,y={delete:"Are you sure you want to remove ".concat(f.username||f.email," from this account?"),reset:"Are you sure you want to reset ".concat(f.username||f.email,"'s password?"),disable:"Are you sure you want to disable ".concat(f.username||f.email,"?")};return l.a.createElement(V.a,{copy:y[m],isOpen:u.show,closeModal:renderButtons:function(){return l.a.createElement(l.a.Fragment,null,"delete"===m&&l.a.createElement(T.a,{className:"user-actions-btn red-btn",saving:"saving"===d,disabled:!1,changed:"done"===d,changedText:"Remove User",doneText:"Remove User",doneIcon:"delete",savingText:"Removing User",handleClick:function(){return o(p,h)}}),"disable"===m&&l.a.createElement(T.a,{className:"user-actions-btn red-btn",saving:"saving"===d,disabled:!1,changed:"done"===d,changedText:"Disable User",doneText:"Disable User",doneIcon:"block",savingText:"Disabling User",handleClick:),"reset"===m&&l.a.createElement(T.a,{className:"user-actions-btn red-btn",saving:"saving"===d,disabled:!1,changed:"done"===d,changedText:"Reset Password",doneText:"Reset Password",doneIcon:"lock",savingText:"Resetting",handleClick:),l.a.createElement(E.a,{className:"cancel-btn",handleClick:c},"Cancel"))}})}),B=n(263),G=(n(1381),n(53)),J=function(e){var t=e.toggleHelpModal,n=Object(u.useState)({type:"",show:!1,id:""}),r=Object(y.a)(n,2),c=r[0],o=r[1],s=Object(u.useState)({type:"",show:!1,id:""}),i=Object(y.a)(s,2),d=i[0],p=i[1],m=Object(a.e)(function(e){return e.accountUsers}),f=m.accountUsers,h=void 0===f?{}:f,b=m.roles,v=void 0===b?{}:b,j=m.assignments,N=void 0===j?{}:j,I=m.status,S=m.errorMessage,x=m.errorCode,T=Object(O.a)(C.k.manageUsers),k=Object(y.a)(T,1)[0],A=Object(O.a)(C.k.deleteAccount),_=Object(y.a)(A,1)[0],P=Object(a.d)(),D=Object(u.useEffect)([P]);var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(Object(g.a)(Object(g.a)({},t),{},{type:e,show:!c.show}))},M=function(e){p(Object(g.a)(Object(g.a)(Object(g.a)({},d),e),{},{show:!d.show}))},V=Object.values(h);return l.a.createElement("div",{className:"manage-users__wrapper","data-cy":"manage-users-wrapper"},l.a.createElement("div",{className:"manage-users__heading-wrapper"},l.a.createElement("header",{className:"settings__section-header"},l.a.createElement("h1",null,"Users & Roles"),l.a.createElement("p",null,"View and manage account users and permissions"),l.a.createElement(E.a,{onClick:t,className:"text-btn user-role-opts"},l.a.createElement(U.a,null,"help"),"\xa0 User role descriptions")),l.a.createElement("div",{className:"add-user"},k&&l.a.createElement(E.a,{"data-cy":"manage-users-add-user-btn",className:"text-btn add-new-user",handleClick:,l.a.createElement(U.a,null,"add_circle"),"\xa0 Add New User"))),l.a.createElement("div",{className:"manage-users__table-wrapper"},l.a.createElement("table",{className:"manage-users__table"},l.a.createElement("thead",{className:"manage-users__table-head"},l.a.createElement("tr",{className:"manage-users__table-row"},["Name","Username","Email Address","Role"].map(function(e){return l.a.createElement("th",{key:"manage-users-".concat(e),className:"manage-users__table-column"},e)}))),l.a.createElement("tbody",{className:"manage-users__table-body"},V.length>0&&V.map(function(e){return l.a.createElement(w,Object.assign({roles:v,assignments:N,canManageUsers:k,isAccountOwnder:_,key:"manage-users-".concat(e.id),toggleEditUser:R,toggleConfirm:M},e))})))),k&&l.a.createElement(G.a,{isOpen:c.show},l.a.createElement(L,Object.assign({status:I,accountUsers:h,roles:v,assignments:N,toggleEditUser:R,postNewUser:function(e,t){P(Object(B.a)(e,t))},updateUser:D,errorMessage:S,errorCode:x,clearStatusState:,c))),k&&l.a.createElement(F,{toggleConfirm:M,deleteUser:function(e,t){P(Object(B.b)(e,t))},updateUser:D,showConfirm:d,accountUsers:h,status:I,resetPassword:roles:v}))},H=(n(1382),function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(function(){return Object(N.a)({},n,r.toUpperCase())})},a.save=function(){var e=a.props,t=e.editAnalyticsId,n=e.publishedTourIds,r=a.state.analyticsID,c=localStorage.getItem("aid"),o=localStorage.getItem("id_token");t(c,{gaId:r,tourIds:n,auth:"Bearer ".concat(o," ").concat(c)})},a.clear=a.state={analyticsID:e.gaId||"",hasEdits:!1},a}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.state,a=n.analyticsID,r=n.hasEdits,c=this.props.gaId;!e.gaId&&!a||e.gaId===a||this.state.hasEdits||this.setState({hasEdits:!0}),c||a||!r||this.setState({hasEdits:!1})}},{key:"render",value:function(){var e=this.props,t=e.saving,n=e.gaId,a=this.state,r=a.analyticsID,c=a.hasEdits,o=r!==n;return l.a.createElement("div",{id:"google-analytics",className:"setting"},l.a.createElement("h2",{className:"google-analytics-h2"},"Google Analytics"),l.a.createElement("p",null,"Track your shared tours' usage and statistics"),l.a.createElement("label",{htmlFor:"ga-id"},"Analytics ID"),l.a.createElement("div",{className:"input-wrapper"},l.a.createElement("input",{id:"ga-id",name:"analyticsID",type:"text",placeholder:"Enter your analytics ID",onChange:this.handleChange,value:r}),l.a.createElement(T.a,{disabled:!o||!c,changed:o,saving:t,className:"ga save",handleClick:this.save,changedText:"Save",savingText:"Saving",doneText:"\u2713 Saved"},l.a.createElement("i",{className:"material-icons publish-upload"},"check"),"\xa0 Save"),l.a.createElement(E.a,{disabled:!r,className:"ga clear",handleClick:this.clear},l.a.createElement("i",{className:"material-icons","aria-hidden":"true"},"\xa0 cancel"),"clear")))}}]),n}(u.Component)),z=function(e){var t=e.helpText,n=Object.keys(t);return l.a.createElement("div",{id:"user-roles__container"},l.a.createElement("header",null,l.a.createElement("h1",null,"User Role Descriptions"),l.a.createElement("p",null,"The roles below indicate what permissions users can be assigned within Tour Builder.")),n.map(function(e){return l.a.createElement("section",null,l.a.createElement("h2",{className:"role-description__title"},e),l.a.createElement("p",{className:"role-description__text"},t[e].description))}))},Q=function(e){var t=e.helpText,n=e.closeModal,a=e.isOpen;return l.a.createElement(G.a,{closeModal:n,isOpen:a,className:"user-roles",shouldCloseOnOverlayClick:!0},l.a.createElement(z,{helpText:t}))},W=(n(1383),n(205)),K=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).toggleHelpModal=a.handleNoAccessClick=function(){(0,a.props.populateSnackBar)({showSnackBar:!0,message:"To access this feature, please contact support@concept3d.com",clearDelay:5e3})},a.state={displayHelpModal:!1,showResetEmail:!1,showResetPassword:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:,{key:"render",value:function(){var e=this.props,t=e.accountId,n=e.accountName,a=e.addGAAnalyticsID,r=e.addNewPaymentSource,c=e.gaId,o=e.guardRails,s=o.totalTours,i=o.totalActiveStops,u=e.invoices,d=e.packageQuantity,f=e.paymentData,g=e.permissions,y=g.maxStops,O=g.maxTours,E=e.publishedTourIds,w=e.setStripeError,j=e.stripeError,N=e.stripeId,I=e.tier,S=e.updatePaymentSource,x=e.updating,T=this.state,C=T.showResetEmail,k=T.showResetPassword,A=T.displayHelpModal,_=p()({"account-data":!0,"account-data__expanded":C||k});return l.a.createElement("div",{id:"settings"},l.a.createElement("section",{className:"settings__left-wrapper"},l.a.createElement("header",{className:"settings__section-header"},l.a.createElement("h1",null,"Account Settings"),l.a.createElement("p",null,"View and change your login and billing information")),l.a.createElement("section",{className:"account-details"},l.a.createElement(b,{title:"Account Name"},n),l.a.createElement(b,{title:"Account ID"},t),l.a.createElement(b,{title:"Account Level",className:"account-level"},I),l.a.createElement(b,{title:"Tours"},O?"".concat(s," / ").concat(O):s),l.a.createElement(b,{title:"Tour Stops"},"".concat(i," / ").concat(y)),"enterprise"!==I&&l.a.createElement(b,{title:"Subscription Cost"},l.a.createElement("span",{className:"sub-total"},N?249+199*"".concat(d):0))),N&&u&&l.a.createElement("div",{className:_},l.a.createElement("h3",null,"Payment Information"),l.a.createElement(h,{packageQuantity:d,tier:I,paymentDate:u[0].date}),l.a.createElement(v,{invoices:u}),l.a.createElement("section",{className:"billing"},l.a.createElement("h4",null,"Payment Details"),l.a.createElement("p",null,"Your card saved on file for billing"),l.a.createElement(m.a,{paymentSources:f,editable:!0,stripeId:N,accountName:n,addNewPaymentSource:r,updatePaymentSource:S,stripeError:j,setStripeError:w,updating:x}))),l.a.createElement(H,{editAnalyticsId:a,saving:x,gaId:c,publishedTourIds:E})),l.a.createElement("section",{className:"settings__right-wrapper"},l.a.createElement(W.a,{featureDisabled:"enterprise"!==I,handleDisabledClick:this.handleNoAccessClick},l.a.createElement(J,{toggleHelpModal:this.toggleHelpModal}))),l.a.createElement(Q,{closeModal:this.toggleHelpModal,isOpen:A,helpText:{owner:{description:"Every account must have an owner. Owners have the same permissions as account admins. To update your account owner, contact Concept3D."},admin:{description:"Admins are able to manage and add users as well as make edits to tours and publish edits live."},editor:{description:"Editors cannot manage users. They can make edits to tours and create new tours, but cannot publish content for tours."},publisher:{description:"Publishers can make edits to tours and create new tours, and publish tours or tour changes made by other users."},viewer:{description:"Viewers can access restricted 360\xba Tours with a username and password. Viewers have no access to the Tour Builder CMS."}}}))}}]),n}(u.Component),q=n(220),Y=n(195),$=n(228);function Z(e){var t=[];for(var n in e){var a=e[n];a.published&&t.push(a.id)}return t}t.default=Object(a.c)(function(e){return{userCredentials:e.userCredentials,stripeId:e.account.stripeId,tier:e.account.tier,updating:e.account.updating,gaId:e.account.gaId,publishedTourIds:Z(e.tours.tours)}},(K)},155:function(e,t,n){"use strict";n.d(t,"j",function(){return a}),n.d(t,"h",function(){return r}),n.d(t,"f",function(){return c}),n.d(t,"n",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"m",function(){return i}),n.d(t,"i",function(){return u}),n.d(t,"o",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"k",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"l",function(){return b}),n.d(t,"c",function(){return v});var a="panos",r="images",c="icons",o="videos",s="audio",i="text",u="logo",l="videos360",d="https://s3-us-west-2.amazonaws.com/images-mb01-resized/SJvNC13nz/index.html",p=20,m={manageTours:"manageTours",manageUsers:"manageUsers",deleteAccount:"deleteAccount",publishTours:"publishTours"},f="https://res.cloudinary.com/concept3d/video/upload/vc_auto/audio_files/",h="us-west-2:8d221ae4-c54f-4155-9f62-af5b0015bc0a",b="xplorertourmedia",v="https://res.cloudinary.com/concept3d"},158:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(6),s=n(7),i=n(25),u=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.aid,a=void 0===n?localStorage.getItem("aid"):n,c=Object(s.a)(),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/tours"),{headers:c,credentials:"include"});case 5:return u=e.sent,e.next=8,Object(i.a)(u);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/tours/").concat(t),{headers:n,credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/tours"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/tours/").concat(t.id),{method:"PUT",headers:n,body:JSON.stringify(t),credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/tours/").concat(t),{method:"DELETE",headers:n,credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.a)(),c=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(c,"/tours/").concat(t,"/stops"),{method:"DELETE",headers:a,body:JSON.stringify(n),credentials:"include"});case 5:return u=e.sent,e.next=8,Object(i.a)(u);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("aid"),a=Object(s.a)(),e.next=4,fetch("".concat(o.a.tourAPI,"/v2/").concat(n,"/tours/").concat(t,"/unpublish"),{method:"POST",headers:a,credentials:"include"});case 4:return c=e.sent,e.next=7,Object(i.a)(c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=n(36),v=n(174);n.d(t,"e",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"f",function(){return O}),n.d(t,"m",function(){return E}),n.d(t,"b",function(){return w}),n.d(t,"c",function(){return j}),n.d(t,"g",function(){return N}),n.d(t,"l",function(){return I}),n.d(t,"h",function(){return x}),n.d(t,"k",function(){return C}),n.d(t,"i",function(){return k}),n.d(t,"j",function(){return A}),n.d(t,"a",function(){return _});var g=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(C()),n.prev=1,t&&a(S()),n.next=5,u({aid:e});case 5:n.sent.forEach(,a(k()),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a(A(n.t0.message||"Something went wrong fetching tours."));case 13:case"end":return n.stop()}},n,null,[[1,10]])}));return function(e,t){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){var c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(C()),t.prev=1,t.next=4,l(e);case 4:c=t.sent,n(x(c)),n(k()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(A(t.t0.message||"Something went wrong fetching the tour."));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(C()),n.prev=1,n.next=4,d(e);case 4:o=n.sent,Object(b.b)(function(){a(x(o)),a(k())}),"function"===typeof t&&t(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a(A(n.t0.message||"Something went wrong saving the tour."));case 12:case"end":return n.stop()}},n,null,[[1,9]])}));return function(e,t){return n.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){var c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(C()),t.prev=1,t.next=4,p(e);case 4:c=t.sent,Object(b.b)(function(){n(x(c)),n(k())}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),n(A(t.t0.message||"Something went wrong saving the tour."));case 12:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(C()),t.prev=1,t.next=4,m(e);case 4:n(T(e)),n(k()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(A(t.t0.message||"Something went wrong deleting the tour."));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()},j=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(C()),n.prev=1,n.next=4,f(e,t);case 4:o=n.sent,Object(b.b)(function(){a(x(o)),a(k())}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(A(n.t0.message||"Something went wrong deleting stops."));case 11:case"end":return n.stop()}},n,null,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()},N=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o,s,i,u;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h(e);case 3:o=n.sent,s=o.tour,i=o.stops,u=void 0===i?[]:i,a(x(s)),u.forEach(,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0),a(A(n.t0.message||"Something went wrong reverting the tour."));case 15:return n.prev=15,"function"===typeof t&&t(),n.finish(15);case 18:case"end":return n.stop()}},n,null,[[0,11,15,18]])}));return function(e,t){return n.apply(this,arguments)}}()},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ,S=function(){return{type:"CLEAR_TOURS"}},x=function(e){return{type:"SAVE_TOUR",tour:e}},T=function(e){return{type:"DELETE_TOUR",tourId:e}},C=function(){return{type:"TOURS_STATUS",status:"saving",errorMessage:""}},k=function(){return{type:"TOURS_STATUS",status:"ok",errorMessage:""}},A=function(e){return{type:"TOURS_STATUS",status:"error",errorMessage:e}},_=function(e,t){return{type:"ADD_STOP_TO_TOUR",tourId:e,stopId:t}}},162:function(e,t,n){"use strict";var a=n(1),r=n(37),c=n(2),o=n.n(c),s=n(3),i=n(198),u=n.n(i),l=n(36);var d=function(e){if(e.type.indexOf("audio/")>=0)return".mp3";var t=e.type.lastIndexOf("/")+1;return".".concat(e.type.substr(t))},p=n(155),m=n(181),f=n(170),h=n(6),b=n(266),v=n(256);b.config.region="us-west-2",b.config.credentials=new b.CognitoIdentityCredentials({IdentityPoolId:p.g});var g=function(e){var t=e.id,n=void 0===t?"":t,a=e.file,r=void 0===a?{}:a,c=e.mediaType,o=void 0===c?"":c,s=e.useEnv,i=void 0!==s&&s,u=e._bucket,l=void 0===u?"":u,d=localStorage.getItem("aid"),m=l||p.l,f=i?"".concat("360tours","/").concat(h.a.apiENV,"/").concat(d,"/").concat(o):o;return{Bucket:"".concat(m,"/").concat(f),Key:"".concat(n),Body:r,ContentType:"".concat(r.type)}},y=function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new v,e.abrupt("return",new Promise(function(e,a){n.upload(t,}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=n(158);n.d(t,"b",function(){return E}),n.d(t,"f",function(){return j}),n.d(t,"g",function(){return N}),n.d(t,"a",function(){return I}),n.d(t,"h",function(){return S}),n.d(t,"i",function(){return C}),n.d(t,"j",function(){return k}),n.d(t,"d",function(){return R}),n.d(t,"c",function(){return K}),n.d(t,"e",function(){return q});var E=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n,a){var r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(A()),t.prev=1,r=localStorage.getItem("aid"),t.next=5,Object(m.b)(r,e);case 5:c=t.sent,Object(l.b)(function(){n(R(c)),n(U())}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(_(t.t0));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.c)(e);case 3:a=t.sent,Object(l.b)(function(){n(P(e.type,a[e.type])),n(z())}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),n(Q(t.t0));case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.g)(e);case 3:a=t.sent,n(D(e.type,a[e.type][e.id])),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Q(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.h)(e);case 3:a=t.sent,n(L(a[e.id])),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Q(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},I=function(e,t){return function(){var n=Object(s.a)(o.a.mark(function n(a){var r,c;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Object(l.b)(,n.prev=1,r=localStorage.getItem("aid"),c={aid:r,id:e,type:t},n.next=6,Object(m.a)(c);case 6:Object(l.b)(function(){a(H()),a(E(!0))}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a(W(n.t0));case 12:case"end":return n.stop()}},n,null,[[1,9]])}));return function(e){return n.apply(this,arguments)}}()},S=function(e){var t=e.file,n=e.mediaType,a=e.name,r=e.description,c=e.alt,i=e.transcript,m=e.componentCB,f=e.permissions;return function(){var e=Object(s.a)(o.a.mark(function e(s){var h,b,v,O,E,j,N;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(V()),h=u()()+d(t),n===p.j&&(v=window.URL||window.webkitURL,(O=new Image).onload=function(){b=this.width/this.height},O.src=v.createObjectURL(t)),s(F()),E=g({id:h,file:t,mediaType:n,useEnv:n===p.f}),e.next=7,y(E);case 7:j=e.sent,N={permissions:f,aid:localStorage.getItem("aid"),id:h,name:a,description:r,alt:c,transcript:i,ratio:b,type:n,url:n===p.j?j.Location:t.name},t&&(s(B()),n===p.j?x(N,s,m):(Object(l.b)(function(){s(G()),s(w(N))}),"function"===typeof m&&m(h)));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},x=function(e,t,n){Object(m.f)(e).then(function(a){if(a.Error)t(Q({message:"ERROR DURING UPLOAD"})),console.error(a.Error,"ERROR DURING UPLOAD");else{var r=JSON.parse(a.Payload),c={aid:e.aid,id:e.id,ratio:e.ratio,src:decodeURIComponent(e.url),url:r+"index.html",name:e.name||null,description:e.description||null,alt:e.alt||null};Object(l.b)(function(){var e;t(G()),t((e=c,function(){var t=Object(s.a)(o.a.mark(function t(n){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.d)(e);case 3:a=t.sent,r=a.Attributes,Object(l.b)(function(){n(M(r.panos)),n(z())}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(Q(t.t0));case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()))}),"function"===typeof n&&n(e.id)}})},T=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(O.k)()),t.next=3,Object(f.d)(e).then(function(e){var t=e.tourId,a=e.tourStyles;Object(l.b)(function(){n(Object(O.h)({id:t,styles:a,uptoDate:!1})),n(z()),n(Object(O.i)())})}).catch(function(e){return console.error(e)});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},C=function(e){var t=e.tourId,n=e.primaryColor,c=e.logoId,i=e.logoURL,p=e.logoToUpload,m=e.faviconId,f=e.faviconToUpload,h=e.hotspotIcons,b=e.hotspotIconsToUpload,v=e.buttonStyles,E=e.uptoDate,w=e.permissions,j=e.componentCB;return function(){var e=Object(s.a)(o.a.mark(function e(N){var I,S,x,C,k,A,_;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(N(Object(O.k)()),!(p||f||b.length>0)){e.next=13;break}return I=[p,f].concat(Object(r.a)(b)).filter(,S={aid:localStorage.getItem("aid"),id:t,uptoDate:E,permissions:w},x={logoURL:i,primaryColor:n,buttonStyles:v},N(V()),C=c,k=m,A=Object(a.a)({},h),e.next=11,Promise.all(I.map(function(){var e=Object(s.a)(o.a.mark(function e(t){var n,r,c,s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u()()+d(t),N(F()),r="icons"===t.fileType,c=g({id:n,file:t,mediaType:r?"icons":"images",useEnv:r}),e.next=6,y(c);case 6:s=e.sent,C="logo"===t.fileType?n:C,k="favicon"===t.fileType?n:k,i=Object(a.a)(Object(a.a)({},"logo"===t.fileType?{logoId:n}:{logoId:C}),"favicon"===t.fileType?{faviconId:n}:{faviconId:k}),r&&(A[t.hotspotType]={id:n,path:s.key}),x=Object(a.a)(Object(a.a)(Object(a.a)({},x),i),{},{hotspotIcons:A}),"function"===typeof j&&j(n,t.fileType,t.hotspotType);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(){Object(l.b)(function(){N(B()),N(G()),N(T(Object(a.a)(Object(a.a)({},S),{styles:x})))})});case 11:e.next=15;break;case 13:_={aid:localStorage.getItem("aid"),id:t,styles:{primaryColor:n,logoId:c,logoURL:i,faviconId:m,buttonStyles:v},uptoDate:E,permissions:w,hotspotIcons:h},N(T(_));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},k=function(e){var t=e.id,n=void 0===t?u()():t,a=e.mediaType,r=void 0===a?"videos":a,c=e.url,o=e.name,s=e.description;return function(e,t){var a=t().account;e(V());var i={aid:localStorage.getItem("aid"),id:n,name:o,description:s,type:r,url:c,permissions:a.permissions};Object(l.b)(function(){e(B()),e(G()),e(w(i))})}},A=function(){return{type:"MEDIA_FETCHING"}},_=function(e){return{type:"MEDIA_FETCH_ERROR",error:e}},U=function(){return{type:"MEDIA_FETCH_SUCCESS"}},P=function(e,t){return{type:"SAVE_ACCOUNT_MEDIA",mediaType:e,media:t}},D=R=M=function(e){return{type:"SAVE_ACCOUNT_PANO",panos:e}},L=function(e){return{type:"UPDATE_ACCOUNT_PANO",pano:e}},V=function(){return{type:"START_MEDIA_UPLOAD"}},F=function(){return{type:"START_RAW_UPLOAD"}},B=function(){return{type:"START_MEDIA_BUILD"}},G=function(){return{type:"START_MEDIA_SAVE"}},J=function(){return{type:"MEDIA_DELETING"}},H=function(){return{type:"MEDIA_DELETED"}},z=function(){return{type:"MEDIA_UPLOAD_COMPLETE"}},Q=function(e){return{type:"MEDIA_UPLOAD_FAILED",error:e}},W=function(){return{type:"MEDIA_DELETE_FAILED"}},K=function(){return{type:"MEDIA_FAIL_RESET"}},q=function(e){return{type:"TOGGLE_MAIN_MEDIA_STATUS",isMainMediaPlaying:e}}},165:function(e,t,n){"use strict";var a=n(12),r=n(0),c=n.n(r),o=n(24),s=n.n(o),i=n(171),u=["charCount","classNames","displayError","displayWarning","editIcon","errorText","handleInput","handleKeyPress","handleKeyUp","hideErrorText","iconName","id","inputOptional","inputValue","label","labelAbove","maxCount","name","showCount","type"],l=Object(r.memo)(function(e){var t=e.charCount,n=e.classNames,r=e.displayError,o=e.displayWarning,l=e.editIcon,d=e.errorText,p=e.handleInput,m=e.handleKeyPress,f=e.handleKeyUp,h=e.hideErrorText,b=e.iconName,v=e.id,g=e.inputOptional,y=e.inputValue,O=e.label,E=e.labelAbove,w=e.maxCount,j=e.name,N=e.showCount,I=void 0===N||N,S=e.type,x=Object(a.a)(e,u);return c.a.createElement(i.a,{charCount:t,classNames:n,displayWarning:o,displayError:r,editIcon:l,errorText:d,hideErrorText:h,iconName:b,id:v,inputOptional:g,label:O,labelAbove:E,maxCount:w,showCount:I},c.a.createElement("input",Object.assign({id:v,type:S||"text",value:y||"",onChange:p,onKeyPress:m,onKeyUp:f,maxLength:w,className:s()({error:r,warning:o}),name:j,"data-testid":v},x)))});t.a=l},169:function(e,t,n){"use strict";var a=n(11),r=n(12),c=n(0),o=n.n(c),s=n(155),i=n(27),u=n(54),l=(n(84),["saving","changed","savingText","changedText","changedIcon","doneText","doneIcon","className","style","handleClick","name","disabled","permission","type"]);t.a=function(e){var t=e.saving,n=e.changed,c=e.savingText,d=e.changedText,p=e.changedIcon,m=void 0===p?"sync":p,f=e.doneText,h=e.doneIcon,b=e.className,v=e.style,g=e.handleClick,y=e.name,O=e.disabled,E=e.permission,w=void 0===E?"":E,j=e.type,N=void 0===j?"button":j,I=Object(r.a)(e,l),S=Object(i.a)(w),x=Object(a.a)(S,1)[0],T=!s.k[w]||x;return o.a.createElement("button",Object.assign({className:"btn-update ".concat(b),name:y,style:v,onClick:g,disabled:O||!T,type:N},I),t?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.ClipLoader,{key:"loader",color:"none",size:10}),c):n?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"material-icons"},T?m:"lock"),d):o.a.createElement(o.a.Fragment,null,h&&o.a.createElement("i",{className:"material-icons"},h),f))}},170:function(e,t,n){"use strict";n.d(t,"e",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"f",function(){return h});var a=n(2),r=n.n(a),c=n(3),o=n(4),s=n(6),i=n(7),u=n(25),l=function(e){var t=Object(i.a)();return fetch("".concat(s.a.tourAPI,"/tours"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},d=function(e){var t=Object(i.a)();return fetch("".concat(s.a.tourAPI,"/tours"),{method:"DELETE",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},p=function(e){var t=Object(i.a)();return fetch("".concat(s.a.tourAPI,"/tourstyles"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},m=function(e){var t={aid:e.aid,id:e.id,tourData:Object(o.a)({},e.id,e.tourData),published:e.published,uptoDate:e.uptoDate,tier:e.tier,gaId:e.gaId,mapboxToken:e.mapboxToken},n=Object(i.a)();return fetch("".concat(s.a.tourAPI,"/publishtour"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},f=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.a)(),e.next=3,fetch("".concat(s.a.tourAPI,"/publishtour/").concat(t),{headers:n});case 3:return a=e.sent,Object(u.b)(a),e.abrupt("return",Object(u.a)(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t,tier:n},c=Object(i.a)(),e.abrupt("return",fetch("".concat(s.a.tourAPI,"/publishtour/newTier/"),{method:"POST",headers:c,body:JSON.stringify(a),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}));case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},171:function(e,t,n){"use strict";var a=n(150),r=n(151),c=n(153),o=n(152),s=n(0),i=n.n(s),u=n(1),l=(n(177),function(e){var t=e.inputId,n=e.label,a=e.displayError,r=e.displayWarning,c=e.inputOptional,o=e.editIcon,s=e.ariaHidden;return i.a.createElement("label",{style:Object(u.a)(Object(u.a)({},a&&{color:"#a23f3f"}),r&&{color:"#b18830"}),htmlFor:t,"aria-hidden":s||!1},n,c&&i.a.createElement("span",null,"(Optional)"),o&&i.a.createElement("i",{className:"material-icons"},"edit"))}),d=n(24),p=n.n(d),m=function(e){var t=e.id,n=e.hideErrorText,a=e.errorText,r=e.label,c=e.displayWarning;return i.a.createElement(i.a.Fragment,null,!n&&i.a.createElement("div",{"data-testid":"".concat(t,"-input-error"),className:p()("input-error",{warning:c})},a||"".concat(r," is a required field")))},f=function(e){var t=e.iconName,n=e.iconClasses;return i.a.createElement("div",{className:"input-icon ".concat(n)},i.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},t))},h=function(e){var t=e.max,n=e.count;return e.inputDisabled?null:i.a.createElement("div",{className:"char-count"},t-n)},b=(n(178),function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).enableInput=e.state={inputDisabled:!0},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.inputDisabled,t=this.props,n=t.charCount,a=t.children,r=t.classNames,c=t.displayError,o=t.displayWarning,s=t.editIcon,u=t.errorText,d=t.hideErrorText,p=t.iconClasses,b=t.iconName,v=t.id,g=t.inputOptional,y=t.label,O=t.labelAbove,E=t.maxCount,w=t.name,j=t.showCount,N=t.toolTipClickHandler,I=t.toolTipText;return i.a.createElement("div",{className:r},O&&i.a.createElement(l,{ariaHidden:!0,inputId:v,label:y,htmlFor:w,inputOptional:g,editIcon:s,displayError:c,displayWarning:o}),I&&i.a.createElement("span",{className:"form-interactive-tooltip",onClick:N},I),a,!O&&i.a.createElement(l,{ariaHidden:!0,inputId:v,label:y,htmlFor:w,inputOptional:g,editIcon:s,displayError:c,displayWarning:o}),j&&E&&i.a.createElement(h,{inputDisabled:e,max:E,count:n}),b&&i.a.createElement(f,{iconClasses:p,iconName:b}),(c||o)&&i.a.createElement(m,{id:v,displayWarning:o,hideErrorText:d,errorText:u,label:y}))}}]),n}(s.PureComponent));t.a=b},172:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={panos:"Panorama",images:"Image",videos:"Video",audio:"Audio",videos360:"360\xba Video",logo:"Logo"}[e];return t?n.toLowerCase():n}},174:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(6),s=n(7),i=n(25),u=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/tours/").concat(t,"/stops"),{headers:n,credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/stops/").concat(t),{headers:n,credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(a,"/stops"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c,u,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.a)(),c=localStorage.getItem("aid"),u=n?"?tourId=".concat(n):"",e.prev=3,e.next=6,fetch("".concat(o.a.tourAPI,"/v2/").concat(c,"/stops/").concat(t.id).concat(u),{method:"PUT",headers:a,body:JSON.stringify(t),credentials:"include"});case 6:return l=e.sent,e.next=9,Object(i.a)(l);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t,n){return e.apply(this,arguments)}}(),m=n(36),f=n(158);n.d(t,"b",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"f",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return E});var h=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(O()),t.prev=1,t.next=4,u(e);case 4:t.sent.forEach(function(e){n(y(e))}),n(E()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(w(t.t0.message||"Something went wrong fetching stops."));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){var c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(O()),t.prev=1,t.next=4,l(e);case 4:c=t.sent,Object(m.b)(,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(w(t.t0.message||"Something went wrong fetching the stop."));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()},v=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o,s,i;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(O()),n.prev=1,n.next=4,d(e);case 4:o=n.sent,s=o.stop,i=o.tourId,Object(m.b)(function(){a(y(s)),a(Object(f.a)(i,s.id)),a(Object(f.l)(i,!1)),a(E())}),"function"===typeof t&&t(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(w(n.t0.message||"Something went wrong saving the stop."));case 14:case"end":return n.stop()}},n,null,[[1,11]])}));return function(e,t){return n.apply(this,arguments)}}()},g=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(O()),n.prev=1,n.next=4,p(e,t);case 4:o=n.sent,Object(m.b)(function(){a(y(o)),a(Object(f.l)(t),!1),a(E())}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(w(n.t0.message||"Something went wrong saving the stop."));case 11:case"end":return n.stop()}},n,null,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()},y=function(e){return{type:"SAVE_STOP",stop:e}},O=function(){return{type:"STOPS_STATUS",status:"saving",errorMessage:""}},E=w=,177:function(e,t,n){},178:function(e,t,n){},181:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"e",function(){return m});var a=n(6),r=n(7),c=n(172),o=function(e,t){var n=Object(r.a)(),c=t?"?tour_data=true":"";return fetch("".concat(a.a.tourAPI,"/media/").concat(e).concat(c),{method:"GET",headers:n,credentials:"include"}).then(function(e){if(200!==e.status)throw{message:"Error Fetching Media Data"};return e.json()}).then(function(e){return e})},s=function(e){var t=Object(r.a)(),n=Object(c.a)(e.type);return fetch("".concat(a.a.tourAPI,"/media"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){if(200!==e.status)throw{message:"".concat(n," failed to upload. ").concat("Video"===n?"Check that the URL is correct and try again.":"Please try again."),status:e.status};return e.json()}).then(function(e){return e})},i=function(e){var t=Object(r.a)();return fetch("".concat(a.a.tourAPI,"/media"),{method:"PATCH",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},u=function(e){var t=Object(r.a)();return fetch("".concat(a.a.tourAPI,"/panos"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},l=function(e){var t=Object(r.a)();return fetch("".concat(a.a.accountsAPI,"/buildpano"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},d=function(e){var t=Object(r.a)();return fetch("".concat(a.a.tourAPI,"/panos"),{method:"PATCH",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},p=function(e){var t=e.aid,n=e.id,c=e.type,o=Object(r.a)();return fetch("".concat(a.a.tourAPI,"/media/").concat(t,"/assets/").concat(n),{method:"DELETE",headers:o,body:JSON.stringify({type:c}),credentials:"include"}).then(function(e){return e}).then(function(e){return e.status}).catch(function(e){return console.log("ERROR DELETING MEDIA",e)})},m=function(e,t,n){var c=Object(r.a)();return fetch("".concat(a.a.tourAPI,"/media/").concat(e,"?type=").concat(t,"&search=").concat(n,"&tour_data=true"),{method:"GET",headers:c,credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}).catch(}},182:function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return f}),n.d(t,"a",function(){return h});var a=n(2),r=n.n(a),c=n(3),o=n(23),s=n(6),i=n(7),u=n(28),l=n(25),d=function(e){var t=Object(i.a)();return fetch("".concat(s.a.tourAPI,"/accounts/").concat(encodeURIComponent(e)),{headers:t,credentials:"include"}).then(.then(function(e){return e})},p=function(e){var t=e.accountId,n=e.userId,a=e.packageQuantity,r=e.newTier,c=e.accountName,u=Object(i.a)();return fetch("".concat(s.a.accountsAPI,"/api/admin/accounts/tour/upgrade/").concat(encodeURIComponent(n)),{method:"POST",headers:u,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){if("string"===typeof e)return e;var n=e.stripeResponse,s=e.newPermissions,i=n;return o.a.push("/home/settings/subscription"),Object.assign({},{name:c,aid:t,stripeId:i.id,tier:r,packageQuantity:a,tierPermissions:s,customer:i})})},m=function(e,t){var n=new Headers,a=u.a.token;n.append("Authorization","Bearer ".concat(a));var r=[];if(t){var c=encodeURIComponent(t);r.push("search=".concat(c))}e&&r.push("start=".concat(e));var o=r.length?"".concat(s.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc&").concat(r.join("&")):"".concat(s.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc");return fetch(encodeURI(o),{headers:n,credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}).catch(},f=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,o=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],a=Object(i.a)(),e.next=4,fetch("".concat(s.a.accountsAPI,"/api/admin/v2/accounts/").concat(encodeURIComponent(t)),{headers:a,credentials:"include"});case 4:return c=e.sent,e.next=7,Object(l.a)(c,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){var n=Object(i.a)();return fetch("".concat(s.a.accountsAPI,"/api/v2/").concat(encodeURIComponent(e),"/settings/ga"),{headers:n,method:"PUT",body:JSON.stringify(t),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}).catch(}},190:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"a",function(){return p});var a=n(2),r=n.n(a),c=n(3),o=function(e){if("string"!==typeof e)return!1;return!!e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},s=function(e){if("string"!==typeof e)return!1;return!!e.match(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/gi)},i=function(e){if("string"!==typeof e)return!1;return!!e.match(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/g)},u=function(e){if("string"!==typeof e)return!1;return!!e.match(/^(https:\/\/www\.|www\.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/g)},l=function(e){if("string"!==typeof e)return!1;function t(){return(t=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).catch(;case 2:if(!e.sent.ok){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return!!e.match(/^https?:\/\/[^\/]+\/assets\/[0-9]+\/[a-zA-Z0-9._-]+(\/{z}\/{x}\/{y})$/gm)&&function(e){return t.apply(this,arguments)}(e)},d=function(e){if("string"!==typeof e)return!1;return!!e.match(/^(http:\/\/|https:\/\/)(vimeo\.com|youtu\.be|www\.youtube\.com)\/([\w\/]+)([\?].*)?$/)},p=function(e){return 0===e.indexOf("www.")?"https://".concat(e):e}},195:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(6),s=n(7),i=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(t.userId),"/source/update"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"});case 4:return a=e.sent,e.next=7,a.json();case 7:if(!(c=e.sent).errorMessage){e.next=10;break}return e.abrupt("return",c.errorMessage);case 10:return e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(t.userId),"/source/new"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"});case 4:return a=e.sent,e.next=7,a.json();case 7:if(!(c=e.sent).errorMessage){e.next=10;break}return e.abrupt("return",c.errorMessage);case 10:return e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/payments/").concat(encodeURIComponent(t)),{headers:n,credentials:"include"});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),d=n(182),p=n(197),m=n(36);n.d(t,"f",function(){return h}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"h",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return E}),n.d(t,"a",function(){return w});var f=function(e){return{type:"SAVE_PAYMENT_INFO",data:e}},h=function(e){return{type:"SET_STRIPE_ERROR",error:e}},b=function(e){return{type:"SAVE_ACCOUNT_INFO",stripeId:e.stripeId,status:e.status,tier:e.tier,packageQuantity:e.packageQuantity,permissions:e.tierPermissions||{},payment:e.customer,aid:e.aid,name:e.name,gaId:e.gaId,mapboxToken:e.mapboxToken}},v=function(e,t){return function(n){Object(d.b)(e,t).then(function(e){n({type:"SAVE_ALL_ACCESSIBLE_ACCOUNTS",accounts:e})})}},g=function(e){return function(t){t({type:"ACCOUNT_UPDATING"}),Object(d.e)(e).then(function(n){t(Object(p.c)(e.newTier)),"string"===typeof n?Object(m.b)(function(){t(h(n)),t({type:"ACCOUNT_UPDATING"})}):Object(m.b)(function(){t(b(n)),t({type:"ACCOUNT_UPDATING"})})})}},y=function(e){return function(t){t({type:"ACCOUNT_UPDATING"}),i(e).then(function(n){"string"===typeof n?Object(m.b)(function(){t(h(n)),t({type:"ACCOUNT_UPDATING"})}):(Object(m.b)(function(){t(f(n)),t({type:"ACCOUNT_UPDATING"})}),"function"===typeof e.callback&&e.callback())})}},O=function(e){return function(t){t({type:"ACCOUNT_UPDATING"}),u(e).then(function(n){"string"===typeof n?(Object(m.b)(,t(h(n)),t({type:"ACCOUNT_UPDATING"})):(Object(m.b)(function(){t(f(n)),t({type:"ACCOUNT_UPDATING"})}),"function"===typeof e.callback&&e.callback())})}},E=function(e){return function(t){l(e).then(}},w=function(e,t){return function(n){n({type:"ACCOUNT_UPDATING"}),Object(d.a)(e,t).then(function(e){Object(m.b)(function(){n({type:"UPDATE_GAID",gaId:e.gaId}),n({type:"ACCOUNT_UPDATING"})})})}}},197:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p});var a=n(2),r=n.n(a),c=n(3),o=n(36),s=n(170),i=n(162),u=n(158),l=function(e,t){return function(n){Object(s.c)(e).then(function(e){var a=e.tour;Object(o.b)(function(){n(Object(u.h)(a)),n(Object(i.b)(!0))}),"function"===typeof t&&t()})}},d=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.b)(e);case 2:a=t.sent,n(m(a));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(t,n){var a=Object.values(n().tourData.tours).filter(function(e){return e.published}).map(;Promise.all(a.map(function(){var t=Object(c.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.f)(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))}},m=function(e){return{type:"SAVE_PUBLIC_TOUR",aid:e.aid,id:e.id,panos:e.panos,images:e.images,videos:e.videos,audio:e.audio,stops:e.stops,tours:e.tourData,tier:e.tier,active:e.active,gaId:e.gaId,mapboxToken:e.mapboxToken}}},204:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.children;return r.a.createElement("i",{className:"material-icons","aria-hidden":"true"},t)}},205:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(24),o=n.n(c);n(219);t.a=function(e){var t=e.featureDisabled,n=e.handleDisabledClick,a=e.children,c=e.forms;return t?r.a.createElement("main",{id:"tiered-item","data-cy":"tiered-feature",className:o()({disabled:t,forms:c}),onClick:n},a):a}},206:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a,r=n(2),c=n.n(r),o=n(3),s=n(38),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;return function(){var t=Object(o.a)(c.a.mark(function t(n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a&&clearInterval(a),n(u()),a=setInterval(1e3*e);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},u=function(){return function(){var e=Object(o.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a();case 2:n=e.sent,t(l(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},l=function(e){return{type:"SAVE_ACTIVE_SESSIONS",data:e}}},218:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(36),s=n(170),i=n(6),u=n(7),l=n(162),d=n(195),p=n(182),m=n(158),f=n(220),h=n(206),b=n(263);n.d(t,"a",function(){return v}),n.d(t,"d",function(){return g}),n.d(t,"b",function(){return y}),n.d(t,"e",function(){return O}),n.d(t,"g",function(){return w}),n.d(t,"f",function(){return j}),n.d(t,"h",function(){return N}),n.d(t,"c",function(){return I});var v=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.c)(e).then(function(e){var t=a().media.mediaFetched;e.aid&&Object(o.b)(function(){n(O(e)),!t&&n(Object(l.d)(e))})});case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},g=y=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a){var c;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(p.d)(e);case 3:(c=n.sent)?c.aid&&(localStorage.setItem("aid",c.aid),Object(o.b)(function(){a(Object(d.e)(c)),a(Object(f.a)()),a(Object(m.e)(c.aid,!0)),a(Object(l.b)(!0)),a(Object(h.a)()),a(Object(b.e)())}),localStorage.setItem("accountSwapped","true"),"function"===typeof t&&t()):a({type:"TOUR_ACCOUNT_SWAP_ERROR",value:!0}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a({type:"TOUR_ACCOUNT_SWAP_ERROR",value:!0});case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(e){return n.apply(this,arguments)}}()},O=E=function(e){var t=e.tourId;return{type:"SAVE_ACCOUNT_TOUR",tour:e.tour,tourId:t}},w=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.e)(e).then(function(e){var t=e.tourId,a=e.updatedTour;n(E({tourId:t,tour:a}))});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(t){(function(e){var t=e,n=Object(u.a)();return fetch("".concat(i.a.tourAPI,"/allstops"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"}).then(.then(})(e).then(function(e){var n;t({type:"SAVE_NEW_STOP_ORDER",tour:(n=e).tour,tourId:n.tourId})})}},N=function(){return{type:"SHOW_STOP_DESCRIPTION"}},I=function(){return{type:"HIDE_STOP_DESCRIPTION"}}},219:function(e,t,n){},220:function(e,t,n){"use strict";n.d(t,"d",function(){return f}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return O});var a=n(2),r=n.n(a),c=n(3),o=n(36),s=n(22),i=n(182),u=(n(218),n(195)),l=n(158),d=n(162),p=n(206),m=function(e){return{type:"SAVE_POLICY_STATUS",privacyPolicy:e}},f=function(e){return{type:"SAVE_USER_CREDS",data:e}},h=function(e){var t=e.permissions;return{type:"SET_USER_PERMISSIONS",permissions:void 0===t?{}:t}},b=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a){var c,i,u,h,b,v;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.b)(e);case 2:(i=n.sent).privacyPolicy||"function"===typeof t&&t(),u=Boolean(null===i||void 0===i?void 0:null===(c=i.roles)||void 0===c?void 0:c.find(),h=i.accounts[0],localStorage.setItem("default-aid",h),localStorage.setItem("uid",e),(!(b=localStorage.getItem("aid"))||b&&!u)&&localStorage.setItem("aid",h),v=localStorage.getItem("aid"),Object(o.b)(function(){u&&a({type:"SET_ROOT_ADMIN"}),a(f(i)),a(g()),a(m(i.privacyPolicy)),a(Object(l.e)(v)),a(Object(d.b)(!0)),a(O()),a(Object(p.a)())});case 12:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.l)(e);case 2:(a=t.sent)&&Object(o.b)(;case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},g=function(){return function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("aid"),e.next=3,Object(i.d)(n);case 3:return a=e.sent,e.next=6,t(Object(u.e)(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.b)(e);case 2:a=t.sent,n(f(a));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)();case 2:n=e.sent,(a=n[localStorage.getItem("aid")])&&t(h(a));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},228:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){return function(t,n){e.showSnackBar!==n().snackBar.showSnackBar&&(t({type:"POPULATE_SNACKBAR",snackBarData:e}),setTimeout(e.clearDelay))}},r=function(){return{type:"CLEAR_SNACKBAR"}}},233:261:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(53);n(304);t.a=function(e){var t=e.closeModal,n=e.copy,a=e.isOpen,o=e.renderButtons;return r.a.createElement(c.a,{isOpen:a,closeModal:t,className:"delete-confirm-modal"},r.a.createElement("div",{className:"delete-confirm-modal__wrapper"},r.a.createElement("p",{className:"delete-confirm-modal__copy"},n),r.a.createElement("span",{className:"delete-confirm-modal__btn-wrapper"},"function"===typeof o&&o())))}},263:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(22),s=n(6),i=n(7),u=n(25),l=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t||localStorage.getItem("aid"),a=Object(i.a)(),e.next=4,fetch("".concat(s.a.accountsAPI,"/api/admin/v2/accounts/").concat(n,"/users"),{method:"GET",headers:a});case 4:return c=e.sent,e.next=7,Object(u.a)(c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n||localStorage.getItem("aid"),c=Object(i.a)(),e.next=4,fetch("".concat(s.a.accountsAPI,"/api/admin/v2/accounts/").concat(a,"/users"),{method:"POST",headers:c,body:JSON.stringify(t)});case 4:return o=e.sent,e.next=7,Object(u.a)(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark(function e(t,n,a){var c,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a||localStorage.getItem("aid"),o=Object(i.a)(),e.next=4,fetch("".concat(s.a.accountsAPI,"/api/admin/v2/accounts/").concat(c,"/users/").concat(t),{method:"PUT",headers:o,body:JSON.stringify(n)});case 4:return l=e.sent,e.next=7,Object(u.a)(l);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return (),m=function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n||localStorage.getItem("aid"),c=Object(i.a)(),e.next=4,fetch("".concat(s.a.accountsAPI,"/api/admin/v2/accounts/").concat(a,"/users/").concat(t),{method:"DELETE",headers:c});case 4:return o=e.sent,e.next=7,Object(u.a)(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t||localStorage.getItem("aid"),a=Object(i.a)(),e.next=4,fetch("".concat(s.a.accountsAPI,"/api/admin/v2/accounts/").concat(n,"/roles"),{method:"GET",headers:a});case 4:return c=e.sent,e.next=7,Object(u.a)(c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();n.d(t,"d",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"a",function(){return g}),n.d(t,"h",function(){return y}),n.d(t,"b",function(){return O}),n.d(t,"f",function(){return E}),n.d(t,"e",function(){return S}),n.d(t,"g",;var h="Something went wrong! Please try again",b=function(){return function(){var e=Object(c.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,e.next=4,l();case 4:e.sent.forEach(function(e){t(w(e))}),t(T()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(C(e.t0.errorMessage||h));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,n){return e.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c,o,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,e.next=4,f();case 4:a=e.sent,c=a.roles,o=void 0===c?[]:c,s=a.assignments,i=void 0===s?[]:s,o.forEach(function(e){t(j(e))}),i.forEach(,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(C(e.t0.errorMessage||h));case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t,n){return e.apply(this,arguments)}}()},g=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(x()),n.next=4,d(e);case 4:a(T()),"function"===typeof t&&t(),a(b()),a(v()),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),o=n.t0.errorMessage||h,a(C(o,n.t0.status));case 14:case"end":return n.stop()}},n,null,[[0,10]])}));return function(e,t){return n.apply(this,arguments)}}()},y=function(e,t,n){return function(){var a=Object(c.a)(r.a.mark(function a(c,o){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c(x()),a.next=4,p(e,t);case 4:c(T()),"function"===typeof n&&n(),c(b()),c(v()),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),s=a.t0.errorMessage||h,c(C(s,a.t0.status));case 14:case"end":return a.stop()}},a,null,[[0,10]])}));return function(e,t){return a.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a,c){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(x()),n.next=4,m(e);case 4:a(I(e)),a(T()),"function"===typeof t&&t(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),o=n.t0.errorMessage||h,a(C(o,n.t0.status));case 13:case"end":return n.stop()}},n,null,[[0,9]])}));return ()},E=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a){var c;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(x()),n.next=4,Object(o.j)(e);case 4:a(T()),"function"===typeof t&&t(),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),c=n.t0.errorMessage||h,a(C(c,n.t0.status));case 12:case"end":return n.stop()}},n,null,[[0,8]])}));return ()},w=function(e){return{type:"SAVE_ACCOUNT_USER",user:e}},j=function(e){return{type:"SAVE_ACCOUNT_ROLE",role:e}},N=function(e){return{type:"SAVE_ACCOUNT_ASSIGNMENT",assignment:e}},I=S=x=function(){return{type:"ACCOUNT_USERS_STATUS",status:"saving",errorMessage:"",errorCode:""}},T=C=,304:function(e,t,n){},520:function(e,t,n){},694:708:function(e,t,n){"use strict";var a=n(150),r=n(151),c=n(153),o=n(152),s=n(0),i=n.n(s),u=n(555),l=n(6),d=n(2),p=n.n(d),m=n(3),f=n(4),h=n(24),b=n.n(h),v=n(55),g=n(35),y=(n(520),function(e){var t=e.brand,n=e.last4,a=e.exp_month,r=e.exp_year,c=e.cardholderData,o=(e.className,e.editable);return i.a.createElement(i.a.Fragment,null,o&&i.a.createElement("div",{className:"user-data-wrap"},c.map(function(e){return i.a.createElement("div",{className:"card-user-data ".concat(e.className),key:e.label},i.a.createElement("span",{className:"label"},e.label),i.a.createElement("span",{className:"content"},e.content))})),i.a.createElement("div",{className:"card-data"},i.a.createElement("span",null,i.a.createElement("i",{className:"material-icons"},"credit_card"),"\xa0 ",t),i.a.createElement("span",null,"**** **** ****"),i.a.createElement("span",null,n),i.a.createElement("span",{className:"exp"},"".concat(a,"/").concat(r))))}),O=function(e){var t=e.error,n=e.resetError;return i.a.createElement("p",{className:"card-error"},t,i.a.createElement("span",{onClick:,i.a.createElement("i",{className:"material-icons"},"add_circle")))},E=function(e){var t=e.paymentSources,n=e.editable,a=e.editCard,r=e.error,c=e.resetError,o=t[0],s=o.brand,u=o.last4,l=o.exp_month,d=o.exp_year,p=o.name,m=o.address_line1,f=o.address_city,h=o.address_state,b={cardholderName:p,billingAddress:m,city:f,state:h};return i.a.createElement("div",{className:n?"existing-card editable":"existing-card"},!n&&i.a.createElement("h3",{className:"form-title"},"Payment Information"),!n&&i.a.createElement("h4",null,"Saved Card"),i.a.createElement(y,{editable:n,brand:s,last4:u,exp_month:l,exp_year:d,cardholderData:[{label:"cardholder name",content:p,className:"name"},{label:"billing address",content:m,className:"address"},{label:"city",content:f,className:"city"},{label:"state",content:h,className:"state"}]}),r&&i.a.createElement(O,{error:r,resetError:c}),n?i.a.createElement(g.a,{className:"update-card-btn",handleClick:,i.a.createElement("i",{className:"material-icons"},"edit"),"\xa0Update Card Information"):i.a.createElement(v.a,{className:"edit-payment-btn",to:"/home/settings/account"},i.a.createElement("i",{className:"material-icons"},"mode_edit"),"\xa0 Change payment method"))},w=n(165),j=n(54),N=function(e){var t=e.stripeId,n=e.editable,a=e.changed,r=e.updating,c=e.handleUpgrade,o=e.editingCard,s=e.addNewCard,u=e.updatePaymentMethod,l=(e.validateForm,e.toggleEditCard),d=e.toggleNewCard,p=e.errors;return i.a.createElement("footer",null,n?(o||s)&&i.a.createElement("div",{className:"btn-wrapper"},i.a.createElement(g.a,{className:r?"save-card-btn":"save-card-btn check",disabled:Boolean(p.length),handleClick:u},r&&i.a.createElement(j.ClipLoader,{color:"#2560a6",size:13}),"\xa0 Save Card"),i.a.createElement(g.a,{className:"cancel-card-btn",handleClick:o?l:d},i.a.createElement("i",{className:"material-icons"},"cancel"),"\xa0 Cancel")):i.a.createElement(g.a,{className:"complete-btn",disabled:Boolean(p.length)||!a,handleClick:c},t?i.a.createElement("span",null,r?i.a.createElement(j.ClipLoader,{color:"#2560a6",size:12}):i.a.createElement("i",{className:"material-icons"},"update"),"\xa0 Update Plan"):i.a.createElement("span",{className:r?"":"check"},r&&i.a.createElement(j.ClipLoader,{color:"#2560a6",size:13}),"\xa0 Complete Upgrade")))},I=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=e.state.errors,a=t.target,r=a.name,c=a.value;c&&n.includes(r)&&e.setState({errors:n.filter(}),e.setState(},e.createStripeToken=Object(m.a)(p.a.mark(function t(){var n,a,r,c,o,s,i,u;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.billingAddress,r=n.city,c=n.state,o=n.cardholderName,t.prev=1,t.next=4,e.props.stripe.createToken({name:o,address_line1:a,address_city:r,address_state:c});case 4:if(s=t.sent,i=s.token,!(u=s.error)){t.next=11;break}e.props.setStripeError(u.message),t.next=12;break;case 11:return t.abrupt("return",i);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error(t.t0);case 17:case"end":return t.stop()}},t,null,[[1,14]])})),e.createStripeCustomer=Object(m.a)(p.a.mark(function t(){var n,a,r,c,o,s,i,u;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.newPkgQuantity,r=n.stripeId,c=n.newTier,o=n.upgradeAccount,s=n.email,t.next=3,e.createStripeToken();case 3:(i=t.sent)&&(u=Object.assign({},i,{userId:localStorage.getItem("uid"),accountId:localStorage.getItem("aid"),accountName:e.state.accountName,packageQuantity:a,email:s,stripeId:r,newTier:c}),e.validateForm(u,o));case 5:case"end":return t.stop()}},t)})),e.updateStopPackages=function(){var t=e.props,n=t.newPkgQuantity,a=t.stripeId,r=t.newTier;(0,t.upgradeAccount)({accountName:t.accountName,stripeId:a,packageQuantity:n,newTier:r,userId:localStorage.getItem("uid"),accountId:localStorage.getItem("aid")})},e.updatePaymentMethod=Object(m.a)(p.a.mark(function t(){var n,a,r,c,o,s,i,u,l,d,m,f,h,b;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.billingAddress,r=n.city,c=n.state,o=n.cardholderName,s=n.addNewCard,i=e.props,u=i.updatePaymentSource,l=i.addNewPaymentSource,d=i.stripeId,m=i.paymentSources,!s){t.next=9;break}return t.next=5,e.createStripeToken();case 5:(f=t.sent)&&(h=Object.assign({},f,{userId:localStorage.getItem("uid"),stripeId:d,oldCardId:m[0].id,callback:e.toggleNewCard}),e.validateForm(h,l)),t.next=11;break;case 9:b={stripeId:d,userId:localStorage.getItem("uid"),cardData:{id:m[0].id,name:o,address:a,city:r,state:c},callback:e.toggleEditCard},e.validateForm(b,u);case 11:case"end":return t.stop()}},t)})),e.editCard=function(t){var n=t.cardholderName,a=t.billingAddress,r=t.city,c=t.state;e.setState({editingCard:!0,cardholderName:n,billingAddress:a,city:r,state:c})},e.toggleNewCard=function(){e.setState({addNewCard:!e.state.addNewCard})},e.toggleEditCard=e.handleUpgrade=e.validateForm=function(t,n){var a=e.props,r=a.editable,c=a.stripeId,o=[];for(var s in e.state)!r&&c||"string"!==typeof e.state[s]||!Boolean(e.state[s].length)&&o.push(s);e.setState(function(){!Boolean(e.state.errors.length)&&n(t)})},e.state={accountName:"",cardholderName:"",billingAddress:"",city:"",state:"",editingCard:!1,addNewCard:!1,changed:!1,errors:[]},e}return Object(r.a)(n,[{key:"componentDidMount",value:,{key:"componentDidUpdate",value:function(e,t){var n=this.state.changed,a=this.props,r=a.packageQuantity,c=a.currentTier,o=a.newTier;n||e.newPkgQuantity===r&&o===c||this.setState({changed:!0}),n&&e.newPkgQuantity===r&&o===c&&this.setState({changed:!1})}},{key:"render",value:function(){var e=this.state,t=e.accountName,n=e.cardholderName,a=e.billingAddress,r=e.city,c=e.state,o=e.editingCard,s=e.changed,l=e.addNewCard,d=e.errors,p=this.props,m=p.paymentSources,f=p.updating,h=p.stripeId,v=p.packageQuantity,y=p.editable,j=p.stripeError,I=p.setStripeError,S=b()({editable:y,error:j});return i.a.createElement(i.a.Fragment,null,!h||o||l?i.a.createElement("form",{id:"checkout-form",className:S},i.a.createElement(i.a.Fragment,null,!l&&!o&&i.a.createElement(w.a,{label:"Organization Name",id:"account-name",classNames:"input-wrapper medium",name:"accountName",inputValue:t,handleInput:this.handleChange,placeholder:"Organization Name",displayError:d.includes("accountName")}),i.a.createElement("h3",null,"Update Card"),i.a.createElement(w.a,{label:"Cardholder Name",id:"cardholder-name",classNames:"input-wrapper medium",name:"cardholderName",inputValue:n,handleInput:this.handleChange,placeholder:"Cardholder Name",displayError:d.includes("cardholderName")}),i.a.createElement(w.a,{label:"Billing Address",id:"billing-address",classNames:"input-wrapper medium",name:"billingAddress",inputValue:a,handleInput:this.handleChange,placeholder:"Billing Address",displayError:d.includes("billingAddress")}),i.a.createElement(w.a,{label:"City",id:"city",classNames:"input-wrapper short",name:"city",inputValue:r,handleInput:this.handleChange,placeholder:"City",displayError:d.includes("city")}),i.a.createElement(w.a,{label:"State",id:"state",classNames:"input-wrapper vshort",name:"state",inputValue:c,handleInput:this.handleChange,placeholder:"State",displayError:d.includes("state")}),(l&&!o||!h)&&i.a.createElement(u.CardElement,{style:{base:{color:"#4a4a4a",fontSize:"14px",fontFamily:'"Open Sans", sans-serif',fontSmoothing:"antialiased","::placeholder":{color:"#ccc"}},invalid:{color:"#cc6666"}}}),j&&i.a.createElement(O,{error:j,resetError:I}))):i.a.createElement(i.a.Fragment,null,y&&i.a.createElement(g.a,{className:"add-card-btn",handleClick:this.toggleNewCard},i.a.createElement("i",{className:"material-icons"},"add_circle"),"\xa0 Add new card"),i.a.createElement(E,{paymentSources:m,packageQuantity:v,editCard:this.editCard,editingCard:o,editable:y,updatePaymentMethod:this.updatePaymentMethod,error:j,resetError:I})),i.a.createElement(N,{editable:y,stripeId:h,changed:s,handleUpgrade:this.handleUpgrade,updatePaymentMethod:this.updatePaymentMethod,editingCard:o,addNewCard:l,validateForm:this.validateForm,updating:f,toggleEditCard:this.toggleEditCard,toggleNewCard:this.toggleNewCard,errors:d}))}}]),n}(s.Component),S=Object(u.injectStripe)(I),x=(n(694),function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={stripe:null},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(!document.getElementById("stripe-script")){var t=document.createElement("script");t.id="stripe-script",t.src="https://js.stripe.com/v3/",t.async=!0,t.onload=document.body&&document.body.appendChild(t)}}},{key:"render",value:function(){var e=this.props,t=e.email,n=e.price,a=e.updating,r=e.newPkgQuantity,c=e.packageQuantity,o=e.newTier,s=e.currentTier,l=e.stripeId,d=e.accountName,p=e.upgradeAccount,m=e.paymentSources,f=e.updatePackageQuantity,h=e.addNewPaymentSource,b=e.updatePaymentSource,v=e.total,g=e.editable,y=e.stripeError,O=e.setStripeError;return i.a.createElement("section",{id:"stripe-js"},i.a.createElement(u.StripeProvider,{stripe:this.state.stripe},i.a.createElement(u.Elements,null,i.a.createElement(S,{email:t,price:n,newPkgQuantity:r,packageQuantity:c,newTier:o,currentTier:s,stripeId:l,accountName:d,upgradeAccount:p,updating:a,updatePackageQuantity:f,addNewPaymentSource:h,updatePaymentSource:b,paymentSources:m&&m.sources.data,total:parseInt(v,10),editable:g,stripeError:y,setStripeError:O}))))}}]),n}(s.Component));t.a=x}}]);