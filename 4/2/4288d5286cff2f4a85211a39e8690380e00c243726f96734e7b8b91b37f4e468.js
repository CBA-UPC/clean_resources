import{V as k}from"./VLinkWrapper_89f0cc15_r24-02-0_b0_t240129-161140.js";import{V as h}from"./VDoorwayColumn_396225a7_r24-02-0_b0_t240129-161140.js";import{_ as w}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import{L as c,A as e,B as t,I as r,a8 as f,J as m,G as s,D as V,N as g,X as C,_ as i,V as x,W as v,O as D,a7 as b}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import"./vuex.esm-bundler_aa359dca_r24-02-0_b0_t240129-161140.js";import"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import"./cmsContentHelper_f68cc642_r24-02-0_b0_t240129-161140.js";import"./typeOf_b861069e_r24-02-0_b0_t240129-161140.js";import"./i18n_4b81f106_r24-02-0_b0_t240129-161140.js";import"./tinycolor_ea5bcbb6_r24-02-0_b0_t240129-161140.js";import"./objectHasKeys_aced35f1_r24-02-0_b0_t240129-161140.js";import"./ElementInViewDirective_8a3c1de4_r24-02-0_b0_t240129-161140.js";import"./VCmsMediaSSR_1101c01c_r24-02-0_b0_t240129-161140.js";import"./eventBus_552c1ba1_r24-02-0_b0_t240129-161140.js";import"./safariCheck_11313f0b_r24-02-0_b0_t240129-161140.js";import"./SvgIcon_e55bd28a_r24-02-0_b0_t240129-161140.js";import"./LscoLazyLoadDirective_02fa23a1_r24-02-0_b0_t240129-161140.js";import"./VResponsivePicture_fb50e2e9_r24-02-0_b0_t240129-161140.js";import"./imageUtils_fcbf42ca_r24-02-0_b0_t240129-161140.js";const W={content_type_uid:"module_doorway_column_v2",components:{VDoorwayColumn:h,VLinkWrapper:k},props:{headline:{type:String,default:""},doorway_media:{type:Array,default:()=>[]},headline_color:{type:String,default:""},link:{type:Object,default:void 0},moduleShouldEagerLoad:{type:Boolean,default:!1}},computed:{tabletDesktopColumnWidth(){var l,a;return((l=this==null?void 0:this.doorway_media)==null?void 0:l.length)===4?5:((a=this==null?void 0:this.doorway_media)==null?void 0:a.length)===3?7:9}}},L={class:"doorway-column"},B={key:0,class:i(["lsco-row lsco-row-xs--center doorway-column__heading "])},S={class:"lsco-col-xs-23"},N={class:"lsco-row lsco-row-xs--center"};function E(l,a,o,z,A,n){const u=c("VLinkWrapper"),_=c("VDoorwayColumn");return e(),t("div",L,[o.headline||o.link?(e(),t("div",B,[r("div",S,[o.headline?(e(),t("h4",{key:0,class:"doorway-column__headline",style:f({color:o.headline_color})},m(o.headline),5)):s("",!0),o.link&&o.link.link_text?(e(),V(u,{key:1,class:"doorway-column__link","link-position":0,"cta-link":o.link},{default:g(()=>[C(m(o.link.link_text),1)]),_:1},8,["cta-link"])):s("",!0)])])):s("",!0),r("div",N,[r("div",{class:i(["doorway-column-items lsco-row lsco-col-xs-25 lsco-col-md-23",n.tabletDesktopColumnWidth>7?"lsco-row-md--around":"lsco-row-md--between"])},[(e(!0),t(x,null,v(o.doorway_media,(p,d,y)=>(e(),t("div",{key:y,class:i(["doorway-column__item lsco-col-xs-21",`lsco-col-md-${n.tabletDesktopColumnWidth}`])},[D(_,b(p,{"link-position":d,"tablet-desktop-column-width":n.tabletDesktopColumnWidth,"module-should-eager-load":o.moduleShouldEagerLoad&&d===0}),null,16,["link-position","tablet-desktop-column-width","module-should-eager-load"])],2))),128))],2)])])}const oo=w(W,[["render",E],["__scopeId","data-v-8291be42"]]);export{oo as default};
abled",selected:s.mappedValue===""},n(s.regionLabel),9,te)],42,Y),u("label",{class:m(["control-label",[{required:e.isRequired}]]),for:"address.region"},n(s.regionLabel),3),!e.isValid&&!e.isDisabled?(d(),l("span",se,n(e.errorMsg),1)):h("",!0)],2)}const ae=_(Z,[["render",ie],["__scopeId","data-v-d72fef3a"]]);const re={inject:["mq"],components:{SvgIcon:C},props:{id:{type:String,default:""},labelText:{type:String,default:""},stateModel:{type:String,required:!0},stateModule:{type:String,required:!0},validation:{type:Function,default:()=>!0},errorMsg:{type:String,default:""},isValid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},maxlength:{type:Number,required:!1,default:30},isRequired:Boolean,validateOnBlur:{type:Boolean,default:!0}},data(){return{addOutline:!1,hideDropdown:!1,selectAddress:!1,ignoreBlur:!1,timeouts:{}}},computed:{...y(F,["restrictedShippingList"]),...y(p,["country","caOrUs"]),...y(L,["loqateAddressLine1","loqateAddressLine2"]),...T(L,["restrictedRegion","loqateAddresses"]),mappedValue:{get(){return this.$store.getters[`${this.stateModule}/${this.stateModel}`]},set(t){if(this.isValid||this.validation(t),t){this.hideDropdown=!1,Object.keys(this.timeouts).forEach(e=>{clearTimeout(e)});const i=setTimeout(()=>{this.loqateFindAddress({text:t})},200);this.timeouts[i]="",this.restrictedRegion=!1}else this.hideDropdown=!0,this.loqateAddresses=[];this.$store.commit(`${this.stateModule}/updateState`,{property:this.stateModel,value:t})}},isMobile(){return this.mq.current==="mobile"},isFilled(){return!!this.mappedValue},showDropdown(){var t;return!!((t=this.loqateAddresses)!=null&&t.length)&&!this.hideDropdown}},methods:{...O(L,["loqateRetrieveAddress","loqateFindAddress"]),handleSelect(t){this.isAddressType(t)?this.loqateRetrieveAddress({id:t.id}).then(i=>{var s;i||(this.hideDropdown=!0);const e=this.loqateAddressLine1(i,this.country),c=this.loqateAddressLine2(i);if(((s=this.restrictedShippingList)==null?void 0:s.findIndex(o=>o.toLowerCase()===i.countryName.toLowerCase()))!==-1){this.hideDropdown=!0,this.loqateAddresses=[],this.restrictedRegion=!0;return}this.restrictedRegion=!1,this.$store.commit(`${this.stateModule}/updateState`,{property:"address_line1",value:e}),this.$store.commit(`${this.stateModule}/updateState`,{property:"address_line2",value:c}),this.$store.commit(`${this.stateModule}/updateState`,{property:"city",value:i.city}),this.$store.commit(`${this.stateModule}/updateState`,{property:"postcode",value:i.postalCode}),this.$store.commit(`${this.stateModule}/updateState`,{property:"postcode",value:i.postalCode}),this.$store.commit(`${this.stateModule}/updateState`,{property:"billing_country",value:i.countryIso2}),this.caOrUs&&this.$store.commit(`${this.stateModule}/updateState`,{property:"state",value:`${this.country}-${i.provinceCode}`}),this.hideDropdown=!0,this.loqateAddresses=[]}):this.loqateFindAddress({text:t.text,container:t.id})},handleFocus(){this.setIgnoreBlur(!1),this.addOutline=!0,this.hideDropdown=!1},handleBlur(t){this.ignoreBlur||(this.hideDropdown=!0,this.addOutline=!1,this.validateOnBlur&&this.validation(t.target.value))},isAddressType(t){return t.type==="Address"},clickLabel(t){t.target.previousElementSibling.focus()},setIgnoreBlur(t){this.ignoreBlur=t},getBoldText(t,i){return!t||!i?"":i.toLowerCase().startsWith(t.toLowerCase())?i.slice(0,t.length):""}}},de=["maxlength","disabled"],le=["for"],ne={key:0,class:"address-list"},oe=["value","onClick","onKeyup"],ue={class:"text"},ce={class:"title"},me={class:"subtitle"},he={key:0,class:"c-right"},fe={key:1,class:"error-msg",id:"error-message",role:"alert"},ye={key:2,class:"error-msg",id:"error-message",role:"alert"};function ge(t,i,e,c,a,s){const o=v("SvgIcon");return d(),l("div",{class:m(["form-group hasFloatLabel",[{invalid:!e.isValid},{"restricted-region-error":t.restrictedRegion}]])},[N(u("input",{class:m(["form-control",{isFilled:s.isFilled},{invalid:!e.isValid},{"outlined-on-focus":a.addOutline}]),id:"loqate-address",name:"loqate-address","onUpdate:modelValue":i[0]||(i[0]=r=>s.mappedValue=r),type:"text",maxlength:e.maxlength,onFocus:i[1]||(i[1]=(...r)=>s.handleFocus&&s.handleFocus(...r)),onBlur:i[2]||(i[2]=(...r)=>s.handleBlur&&s.handleBlur(...r)),disabled:e.isDisabled,"aria-required":"true","aria-activedescendant":"error-message","aria-labelledby":"addressLine1Label"},null,42,de),[[E,s.mappedValue]]),u("label",{class:m(["control-label",{disabled:e.isDisabled},{required:e.isRequired}]),for:e.id,onClick:i[3]||(i[3]=(...r)=>s.clickLabel&&s.clickLabel(...r)),onKeyup:i[4]||(i[4]=R((...r)=>s.clickLabel&&s.clickLabel(...r),["enter"])),id:"addressLine1Label"},n(e.labelText),43,le),s.showDropdown?(d(),l("div",ne,[(d(!0),l(A,null,k(t.loqateAddresses,(r,f)=>(d(),l("div",{class:"item",key:f,value:r.text,onClick:M=>s.handleSelect(r),onKeyup:R(M=>s.handleSelect(r),["enter"]),onMousedown:i[5]||(i[5]=M=>s.setIgnoreBlur(!0))},[u("div",ue,[u("div",ce,[u("b",null,n(s.getBoldText(s.mappedValue,r.text)),1),u("span",null,n((r.text||"").replace(s.getBoldText(s.mappedValue,r.text),"")),1)]),u("div",me,n(r.description),1)]),s.isAddressType(r)?h("",!0):(d(),l("div",he,[g(o,{name:"chevron-right","set-aria-hidden":!0})]))],40,oe))),128))])):h("",!0),!e.isValid&&!e.isDisabled&&!t.restrictedRegion?(d(),l("div",fe,[g(o,{name:"error",class:"error-icon",title:"error","set-aria-hidden":!0}),u("span",null,n(e.errorMsg),1)])):h("",!0),t.restrictedRegion?(d(),l("span",ye,n(t.$t("i18n.restrictedPostalCodeError")),1)):h("",!0)],2)}const ve=_(re,[["render",ge],["__scopeId","data-v-78223009"]]);const _e={components:{TextInputGroup:P,RegionSelect:ae,LoqateAddressInput:ve},props:{isDisabled:Boolean,columnWidthLg:{type:Number,default:5},stateModule:{type:String,required:!0},myAccountPage:{type:Boolean,default:!1},addressCountry:{type:String,default:""},forceUpdateBillingGMap:{type:Number,default:0},isRequired:Boolean,disableStateUpdate:{type:Boolean,default:!1},address:{type:Object,default(){return{addressLine1:"",addressLine2:"",city:"",state:"",postcode:"",addressCountry:""}}}},computed:{...y(p,["locale","country"]),...y(V,["isLoqateEnabled"]),selectedCountry(){return this.addressCountry||this.country},removePostalCode(){return this.country==="IE"},useLoqate(){return this.isLoqateEnabled&&this.$route.name==="Checkout"&&!this.billing},errorMsgL1(){switch(this.errorTypeL1){case"missing":return this.$t("i18n.errorAddress");case"maxLength":return this.$t("i18n.errorAddressMaxLength",{_maxLength_:35});case"invalid":return this.$t("i18n.errorAddress");default:return""}},errorMsgL2(){switch(this.errorTypeL2){case"maxLength":return this.$t("i18n.errorAddressMaxLength",{_maxLength_:35});case"invalid":return this.$t("i18n.errorAddress");default:return""}},errorMsgCity(){switch(this.errorTypeCity){case"missing":return this.$t("i18n.errorCity");case"maxLength":return this.$t("i18n.errorCityMaxLength",{_maxLength_:30});case"invalid":return this.$t("i18n.errorCity");default:return""}},errorMsgState(){switch(this.errorTypeState){case"missing":return this.$t("i18n.errorState");default:return""}},errorMsgPostcode(){switch(this.errorTypePostcode){case"missing":return this.$t("i18n.errorPostcode");case"maxLength":return this.$t("i18n.errorPostcodeMaxLength");case"invalid":return this.$t("i18n.errorPostcode");case"restricted":return this.$t("i18n.restrictedPostalCodeError");default:return""}}},data(){return{isValidL1:!0,isValidL2:!0,isValidCity:!0,isValidState:!0,isValidPostcode:!0,errorTypeL1:"",errorTypeL2:"",errorTypeCity:"",errorTypeState:"",errorTypePostcode:"",addressLine1Label:"",addressLine2Label:"",cityLabel:"",stateLabel:"",postcodeLabel:"",city:"",state:"",postcode:""}},created(){this.addressLine1Label=this.$t("i18n.formAddressLine1Label"),this.addressLine2Label=this.$t("i18n.formAddressLine2Label"),this.cityLabel=this.$t("i18n.formCityLabel"),this.stateLabel=this.$t("i18n.formStateLabel"),this.postcodeLabel=this.$t("i18n.formPostcodeLabel")},methods:{evaluateL1(t,i=!0){let e=null;return e=$(t,this.country,this.country==="US"?35:40),i&&(this.errorTypeL1=e.errorType,this.isValidL1=e.isValid),e.isValid},evaluateL2(t,i=!0){let e=null;return e=W(t,this.country),i&&(this.errorTypeL2=e.errorType,this.isValidL2=e.isValid),e.isValid},evaluateCity(t,i=!0,e=!1){let c=null;return c=j(t,this.country,30,!1,e),i&&(this.errorTypeCity=c.errorType,this.isValidCity=c.isValid),c.isValid},evaluateState(t,i=!0){if(!["US","CA"].includes(this.country))return!0;let e=null;return e=K(t,this.country),i&&(this.errorTypeState=e.errorType,this.isValidState=e.isValid),e.isValid},evaluatePostcode(t,i=!0,e=!1){const c=H(t,this.country,e);return i&&(this.errorTypePostcode=c.errorType,this.isValidPostcode=c.isValid),this.country==="IE"?!0:c.isValid},validateAutofillData(){this.city=this.$store.getters[`${this.stateModule}/city`],this.state=this.$store.getters[`${this.stateModule}/state`],this.country!=="IE"&&(this.postcode=this.$store.getters[`${this.stateModule}/postcode`],this.evaluatePostcode(this.postcode)),this.evaluateCity(this.city),this.evaluateState(this.state)}}},pe={class:"lsco-row lsco-row-xs--between"},be={class:"lsco-row"},Se={key:0,class:"halfcell state",myAccountPage:"myAccountPage"};function Le(t,i,e,c,a,s){const o=v("TextInputGroup"),r=v("LoqateAddressInput"),f=v("RegionSelect");return d(),l("div",pe,[s.useLoqate?(d(),S(r,{key:1,class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"]),id:"address.line1","state-model":"address_line1","state-module":"userNewAddressState",type:"text","label-text":a.addressLine1Label,validation:s.evaluateL1,"is-valid":a.isValidL1,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.errorMsgL1},null,8,["class","label-text","validation","is-valid","is-disabled","is-required","error-msg"])):(d(),S(o,{key:0,class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"]),id:"address.line1","state-model":"address_line1","state-module":e.stateModule,type:"text","label-text":a.addressLine1Label,validation:s.evaluateL1,"is-valid":a.isValidL1,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.errorMsgL1,autocomplete:!0,onValidateAutofill:s.validateAutofillData},null,8,["class","state-module","label-text","validation","is-valid","is-disabled","is-required","error-msg","onValidateAutofill"])),g(o,{id:"address.line2",class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"]),"state-model":"address_line2",autocomplete:!1,"state-module":e.stateModule,type:"text","label-text":a.addressLine2Label,validation:s.evaluateL2,"is-valid":a.isValidL2,"is-disabled":e.isDisabled,"error-msg":s.errorMsgL2},null,8,["class","state-module","label-text","validation","is-valid","is-disabled","error-msg"]),g(o,{id:"address.townCity",class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"]),"state-model":"city","state-module":e.stateModule,type:"text","label-text":a.cityLabel,validation:s.evaluateCity,"is-valid":a.isValidCity,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.errorMsgCity},null,8,["class","state-module","label-text","validation","is-valid","is-disabled","is-required","error-msg"]),u("div",{class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"])},[u("div",be,[s.selectedCountry==="US"||s.selectedCountry==="CA"?(d(),l("div",Se,[(d(),S(f,{id:"address.region","state-model":"state","state-module":e.stateModule,type:"text","label-text":a.stateLabel,validation:s.evaluateState,"is-valid":a.isValidState,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.errorMsgState,"my-account-page":this.myAccountPage,key:e.forceUpdateBillingGMap,"address-country":this.addressCountry,billing:t.billing},null,8,["state-module","label-text","validation","is-valid","is-disabled","is-required","error-msg","my-account-page","address-country","billing"]))])):h("",!0),s.removePostalCode?h("",!0):(d(),l("div",{key:1,class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21",{halfcell:s.selectedCountry==="US"||s.selectedCountry==="CA"}])},[g(o,{id:"address.postcode","state-model":"postcode","state-module":e.stateModule,type:"text","label-text":a.postcodeLabel,validation:s.evaluatePostcode,"is-valid":a.isValidPostcode,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.errorMsgPostcode},null,8,["state-module","label-text","validation","is-valid","is-disabled","is-required","error-msg"])],2))])],2)])}const Vt=_(_e,[["render",Le],["__scopeId","data-v-e0d112fa"]]),Re={components:{TextInputGroup:P},emits:["updateFirstName","updateLastName"],props:{isDisabled:Boolean,columnWidthLg:{type:Number,default:5},firstNameValue:{type:String,default:""},lastNameValue:{type:String,default:""},disableStateUpdate:{type:Boolean,default:!1},stateModelFirstName:{type:String,default:"first_name"},stateModelSurname:{type:String,default:"surname"},stateModule:{type:String,required:!1,default:""},billing:{type:Boolean,default:!1},profile:{type:Boolean,default:!1},isRequired:Boolean},computed:{...y(p,["country","locale"]),firstNameErrorMsg(){if(this.profile)return this.$t("i18n.userProfileFirstNameError");switch(this.firstNameErrorType){case"missing":return this.billing?this.$t("i18n.errorBillingFirstNameMissing"):this.$t("i18n.errorFirstName");case"maxLength":return this.$t("i18n.errorBillingMaxLength30");case"invalid":return this.$t("i18n.errorBillingNameInvalid");default:return""}},surnameErrorMsg(){if(this.profile)return this.$t("i18n.userProfileLastNameError");switch(this.surnameErrorType){case"missing":return this.billing?this.$t("i18n.errorBillingSurnameMissing"):this.$t("i18n.errorSurname");case"maxLength":return this.$t("i18n.errorBillingMaxLength30");case"invalid":return this.$t("i18n.errorBillingNameInvalid");default:return""}}},data(){return{isValidFirstName:!0,isValidSurname:!0,firstNameErrorType:"",surnameErrorType:"",firstNameLabel:this.$t("i18n.formFirstNameLabel"),surnameLabel:this.profile?this.$t("i18n.userProfileLastNameLabel"):this.$t("i18n.formSurnameLabel")}},methods:{evaluateFirstName(t,i=!0){const e=B(t,this.country,this.billing);return i&&(this.firstNameErrorType=e.errorType,this.isValidFirstName=e.isValid),e.isValid},evaluateSurname(t,i=!0){const e=B(t,this.country,this.billing);return i&&(this.surnameErrorType=e.errorType,this.isValidSurname=e.isValid),e.isValid}}};function Ve(t,i,e,c,a,s){const o=v("TextInputGroup");return d(),l("div",{class:m(["name-grid",{profileGrid:e.profile},"lsco-row","lsco-row-xs--between"])},[g(o,{id:"first_name",class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"]),"state-model":e.stateModelFirstName,"state-module":e.stateModule,value:e.firstNameValue,"disable-state-update":e.disableStateUpdate,"label-text":a.firstNameLabel,validation:s.evaluateFirstName,"is-valid":a.isValidFirstName,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.firstNameErrorMsg,onCallback:i[0]||(i[0]=r=>t.$emit("updateFirstName",r))},null,8,["class","state-model","state-module","value","disable-state-update","label-text","validation","is-valid","is-disabled","is-required","error-msg"]),g(o,{id:"surname",class:m([`lsco-col-lg-${e.columnWidthLg}`,"lsco-col-xs-21"]),"state-model":e.stateModelSurname,"state-module":e.stateModule,value:e.lastNameValue,"disable-state-update":e.disableStateUpdate,"label-text":a.surnameLabel,validation:s.evaluateSurname,"is-valid":a.isValidSurname,"is-disabled":e.isDisabled,"is-required":e.isRequired,"error-msg":s.surnameErrorMsg,onCallback:i[1]||(i[1]=r=>t.$emit("updateLastName",r))},null,8,["class","state-model","state-module","value","disable-state-update","label-text","validation","is-valid","is-disabled","is-required","error-msg"])],2)}const xt=_(Re,[["render",Ve]]);function xe(t){const i=t.replace(/\D/g,"");return i.length===10?t.startsWith("+")?`+${i}`:`(${i.substr(0,3)}) ${i.substr(3,3)}-${i.substr(6,4)}`:t.startsWith("+")?t:i}const Ae={emits:["callback"],components:{SvgIcon:C},props:{id:{type:String,default:""},stateModel:{type:String,required:!1,default:""},stateModule:{type:String,required:!1,default:""},disableStateUpdate:{type:Boolean,default:!1},value:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isRequired:{type:Boolean,default:!1},isPhoneNumberEmpty:{type:Boolean,default:!1,required:!1},validateOnKeyUp:{type:Boolean,default:!0},isFormatPhoneUSORInternationalStandard:{type:Boolean,default:!1,required:!1}},computed:{...y(p,["locale","country"]),...x("auth",["loggedIn"]),...y(L,["clickCollectModalShow"]),mappedValue:{get(){return this.disableStateUpdate?this.value:this.$store.getters[`${this.stateModule}/${this.stateModel}`]},set(t){let i=t;(this.country==="US"||this.country==="CA")&&(i=this.isFormatPhoneUSORInternationalStandard?xe(i):J(i),this.$refs.phoneNumber.value=i),this.isValid||this.evaluate(i),this.disableStateUpdate?this.$emit("callback",i):this.$store.commit(`${this.stateModule}/updateState`,{property:this.stateModel,value:i})}},isFilled(){return!!this.mappedValue},isPhoneEmpty(){return this.isPhoneNumberEmpty&&this.mappedValue===""}},data(){return{isValid:!0,errorMsg:"default error message",addOutline:!1}},methods:{keyupValidation(t){this.validateOnKeyUp&&this.evaluate(t.target.value)},blurValidation(t){this.addOutline=!1,this.evaluate(t.target.value)},clickLabel(t){t.target.previousElementSibling.focus()},evaluate(t,i=!0){let e=6,c=20;if(this.country==="US"||this.country==="CA")e=10,c=15;else if(this.clickCollectModalShow){this.country==="GB"&&(e=11,c=11),this.country==="FR"&&(e=10,c=12);const s=z(t,this.country,!1);if(i||this.isPhoneEmpty){if(s.errorMsg==="i18n.errorPhoneEmpty"&&!this.isRequired)return s.isValid;this.errorMsg=this.$t(s.errorMsg,{_minLength_:e,_maxLength_:c}),this.isValid=s.isValid}return s.isValid}const a=Q(t,this.country,!1);if(i||this.isPhoneEmpty){if(a.errorMsg==="i18n.errorPhone"&&!this.isRequired)return a.isValid;this.errorMsg=this.$t(a.errorMsg,{_minLength_:e,_maxLength_:c}),this.isValid=a.isValid}return a.isValid}}},ke=["id","name","disabled"],Ce=["for"],Me={key:0,class:"error-msg",role:"alert"};function qe(t,i,e,c,a,s){const o=v("SvgIcon");return d(),l("div",{class:m(["form-group hasFloatLabel",[{invalid:!a.isValid}]])},[N(u("input",{id:e.id,name:e.id,class:m(["form-control",{isFilled:s.isFilled},{invalid:!a.isValid},{"outlined-on-focus":a.addOutline}]),"onUpdate:modelValue":i[0]||(i[0]=r=>s.mappedValue=r),type:"tel",ref:"phoneNumber",onFocus:i[1]||(i[1]=r=>a.addOutline=!0),onKeyup:i[2]||(i[2]=(...r)=>s.keyupValidation&&s.keyupValidation(...r)),onBlur:i[3]||(i[3]=(...r)=>s.blurValidation&&s.blurValidation(...r)),disabled:e.isDisabled,"aria-required":"true","aria-labelledby":"phoneNumber"},null,42,ke),[[E,s.mappedValue]]),u("label",{class:m(["control-label",{disabled:e.isDisabled,required:e.isRequired}]),for:e.id,onClick:i[4]||(i[4]=(...r)=>s.clickLabel&&s.clickLabel(...r)),onKeyup:i[5]||(i[5]=R((...r)=>s.clickLabel&&s.clickLabel(...r),["enter"])),id:"phoneNumber"},n(t.$t("i18n.formPhoneLabel")),43,Ce),!a.isValid&&!e.isDisabled?(d(),l("div",Me,[g(o,{name:"error",class:"error-icon",title:"error","set-aria-hidden":!0}),u("span",null,n(a.errorMsg),1)])):h("",!0)],2)}const At=_(Ae,[["render",qe],["__scopeId","data-v-d9d8ec76"]]);const Be={computed:{...x("userNewAddressState",["first_name","surname"]),...y(V,["isAVSRedesignsEnabled"])},props:{addressLine1:{type:String,required:!0},addressLine2:{type:String,default:""},city:{type:String,required:!0},state:{type:String,required:!0},postcode:{type:String,required:!0},usFormat:{type:Boolean,default:!0}}},Te={key:0,class:"fullname"},Ne={class:"line1"},Ee={key:1,class:"line2"},Ie={key:2,class:"city-state-zip"},we={key:3,class:"city-state-zip"};function Fe(t,i,e,c,a,s){return d(),l("div",{class:m([{"formatted-address":!t.isAVSRedesignsEnabled}])},[t.isAVSRedesignsEnabled?(d(),l("div",Te,n(t.first_name)+" "+n(t.surname),1)):h("",!0),u("div",Ne,n(e.addressLine1),1),e.addressLine2?(d(),l("div",Ee,n(e.addressLine2),1)):h("",!0),e.usFormat?(d(),l("div",Ie,n(e.city)+", "+n(e.state)+" "+n(e.postcode),1)):(d(),l("div",we,n(e.city)+", "+n(e.state)+" "+n(e.postcode),1))],2)}const D=_(Be,[["render",Fe],["__scopeId","data-v-1191fa47"]]);const Pe={emits:["radioChanged"],props:{address:{type:Object,required:!0},onlyOne:{type:Boolean,default:!1},addressIndex:{type:String,required:!0},selectedIndex:{type:String,default:null}},components:{FormattedAddress:D,SvgIcon:C,RadioButton:X},computed:{state(){var t;return((t=this.address)==null?void 0:t.region)??""},addressHeader(){let t=this.$t("i18n.avsRecheader");return this.onlyOne||(t=this.$t("i18n.avsVerified")),t},...y(V,["isAVSRedesignsEnabled"])},methods:{clickRadio(){this.addressIndex!==this.selectedIndex&&this.$emit("radioChanged",this.addressIndex)}}},De=t=>(I("data-v-3491a644"),t=t(),w(),t),Ue={class:"radio-text"},Oe={id:"avsRecommendedHeader",class:"recommended-head"},Ge={key:1},$e={id:"avsRecommendedHeader",class:"recommended-head"},We=De(()=>u("span",null,": ",-1));function je(t,i,e,c,a,s){const o=v("svg-icon"),r=v("radio-button"),f=v("formatted-address");return d(),l("div",{class:m(t.isAVSRedesignsEnabled?"avs-recommendation-address":"avs-recommendation")},[t.isAVSRedesignsEnabled?h("",!0):(d(),S(r,{key:0,"no-show":e.onlyOne,"selected-value":e.selectedIndex,value:e.addressIndex,name:"avsRecommendation",onClickRadio:s.clickRadio,"set-aria-label-id":"avsRecommendedHeader"},{"radio-text":G(()=>[u("div",Ue,[u("div",Oe,[q(n(s.addressHeader),1),g(o,{"set-aria-hidden":!1,name:"checkmark",class:"verified-check"})])])]),_:1},8,["no-show","selected-value","value","onClickRadio"])),t.isAVSRedesignsEnabled?(d(),l("div",Ge,[u("div",$e,[q(n(s.addressHeader),1),We])])):h("",!0),g(f,{"address-line1":e.address.line1,"address-line2":e.address.line2,city:e.address.town,state:s.state,postcode:e.address.postalCode},null,8,["address-line1","address-line2","city","state","postcode"])],2)}const Ke=_(Pe,[["render",je],["__scopeId","data-v-3491a644"]]);const He={data(){return{selectedRecommendation:null}},props:{recError:{type:Boolean,default:!1}},computed:{...x("userNewAddressState",["recommendations"]),...y(V,["isAVSRedesignsEnabled"]),onlyOne(){return this.recommendations.length===1}},components:{AvsRecommendedAddress:Ke},methods:{changeSelected(t){this.selectedRecommendation=t}}},ze={key:0,class:"avs-rec-error"};function Qe(t,i,e,c,a,s){const o=v("avs-recommended-address");return d(),l("div",{class:m({"recommended-addresses-container":!t.isAVSRedesignsEnabled})},[e.recError?(d(),l("div",ze,n(t.$t("i18n.avsError")),1)):h("",!0),(d(!0),l(A,null,k(t.recommendations,(r,f)=>(d(),S(o,{key:`avsRecAddress_${f}`,address:r,"only-one":s.onlyOne,"address-index":`${f}`,"selected-index":a.selectedRecommendation,onRadioChanged:s.changeSelected},null,8,["address","only-one","address-index","selected-index","onRadioChanged"]))),128))],2)}const Je=_(He,[["render",Qe],["__scopeId","data-v-313d5a52"]]);const Xe={props:{noRecs:{type:Boolean,default:!1}},computed:{...x("userNewAddressState",["address_line1","address_line2","city","state","postcode"]),...y(V,["isAVSRedesignsEnabled"]),headerText(){return this.noRecs?this.$t("i18n.avsUnableVerify"):this.$t("i18n.avsEntryHeader")},headerAvsModalText(){return this.noRecs?"":`${this.$t("i18n.avsEntryHeader")}:`},strippedState(){const t=this.state.split("-");return t.length>1?t[1]:this.state}},components:{FormattedAddress:D},methods:{}},Ze={key:0,class:"entered-subhead"},Ye={key:1,class:"entered-subhead"};function et(t,i,e,c,a,s){const o=v("formatted-address");return d(),l("div",{class:m(t.isAVSRedesignsEnabled?"AvsRecModal-address-container":"entered-address-container")},[t.isAVSRedesignsEnabled?h("",!0):(d(),l("div",Ze,n(s.headerText),1)),t.isAVSRedesignsEnabled&&!e.noRecs?(d(),l("div",Ye,n(s.headerAvsModalText),1)):h("",!0),g(o,{"address-line1":t.address_line1,"address-line2":t.address_line2,city:t.city,state:s.strippedState,postcode:t.postcode},null,8,["address-line1","address-line2","city","state","postcode"])],2)}const tt=_(Xe,[["render",et],["__scopeId","data-v-ec4fd036"]]);const st={emits:["closeModal","useEntered","useRecommendation"],props:{isCheckout:{type:Boolean,default:!0}},data(){return{recError:!1}},computed:{...x("userNewAddressState",["recommendations","parentAddressCommercialFlag"]),...T(L,["useRecommendation","skipAvs"]),multipleRecommendations(){return this.recommendations.length>1},singleRecommendations(){return this.recommendations.length===1},noRecommendations(){return this.recommendations.length===0},questionText(){let t=this.$t("i18n.avsSingleRecQuestion");return this.noRecommendations?t=this.$t("i18n.avsNoRecQuestion"):this.multipleRecommendations&&(t=this.$t("i18n.avsMultiRecQuestion")),t},buttonText(){let t=this.$t("i18n.avsUseRecButton");return this.noRecommendations?t=this.$t("i18n.avsNoRecButtonTxt"):this.multipleRecommendations&&(t=this.$t("i18n.avsUseVerifiedButton")),t},linkText(){let t=this.$t("i18n.avsUseEntered");return this.noRecommendations&&(t=this.$t("i18n.avsNoRecLinkTxt")),t}},mounted(){this.recommendations&&b("AVS Modal Opened",this.recommendations.length),b("AVS Modal Opened",0)},components:{Recommendations:Je,EnteredAddress:tt},methods:{actionLinkClicked(){if(this.recError=!1,b("AVS Edit Address",this.recommendations.length),this.useRecommendation=!1,this.noRecommendations){this.$emit("closeModal");return}this.isCheckout?this.skipAvs=!0:this.$store.commit("userNewAddressState/updateState",{property:"skipAvs",value:!0}),this.$emit("useEntered")},actionBtnClicked(){if(this.noRecommendations?(b("AVS Use Entered Address",this.recommendations.length),this.$store.commit("userNewAddressState/updateState",{property:"commercial",value:this.parentAddressCommercialFlag}),this.useRecommendation=!1):(b("AVS Use Recommended",this.recommendations.length),this.useRecommendation=!0),this.noRecommendations)return this.recError=!1,this.isCheckout?this.skipAvs=!0:this.$store.commit("userNewAddressState/updateState",{property:"skipAvs",value:!0}),this.$emit("useRecommendation"),!0;let t=this.$refs.recommendations.selectedRecommendation;return!t&&this.multipleRecommendations?(this.recError=!0,!1):(this.singleRecommendations&&(t=0),this.$store.dispatch("userNewAddressState/useRecommendedAddress",{address:this.recommendations[parseInt(t,10)]}).then(()=>{this.recError=!1,this.isCheckout?this.skipAvs=!0:this.$store.commit("userNewAddressState/updateState",{property:"skipAvs",value:!0}),this.$emit("useRecommendation")}),!0)}}},U=t=>(I("data-v-1af5fe8a"),t=t(),w(),t),it={class:"avs-modal-body"},at={key:0},rt=U(()=>u("hr",null,null,-1)),dt={class:"question-text"},lt={key:1},nt=U(()=>u("hr",null,null,-1)),ot={class:"question-text"},ut=["aria-label"],ct=["aria-label"];function mt(t,i,e,c,a,s){const o=v("entered-address"),r=v("recommendations");return d(),l("div",it,[g(o,{"no-recs":s.noRecommendations},null,8,["no-recs"]),s.singleRecommendations?(d(),l("span",at,[g(r,{class:"single-rec",ref:"recommendations","rec-error":a.recError},null,8,["rec-error"]),rt,u("div",dt,n(s.questionText),1)])):h("",!0),s.singleRecommendations?h("",!0):(d(),l("span",lt,[nt,u("div",ot,n(s.questionText),1),g(r,{ref:"recommendations","rec-error":a.recError},null,8,["rec-error"])])),u("div",{class:"avs-action-btn",onClick:i[0]||(i[0]=(...f)=>s.actionBtnClicked&&s.actionBtnClicked(...f)),onKeyup:i[1]||(i[1]=R((...f)=>s.actionBtnClicked&&s.actionBtnClicked(...f),["enter"])),tabindex:"0","aria-label":s.buttonText},n(s.buttonText),41,ut),u("div",{class:"avs-action-link",onClick:i[2]||(i[2]=(...f)=>s.actionLinkClicked&&s.actionLinkClicked(...f)),onKeyup:i[3]||(i[3]=R((...f)=>s.actionLinkClicked&&s.actionLinkClicked(...f),["enter"])),tabindex:"0","aria-label":s.linkText},n(s.linkText),41,ct)])}const kt=_(st,[["render",mt],["__scopeId","data-v-1af5fe8a"]]);export{Vt as A,tt as E,D as F,ve as L,xt as N,At as P,ae as R,Je as a,kt as b};
