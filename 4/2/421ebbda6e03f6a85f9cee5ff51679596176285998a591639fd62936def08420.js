"use strict";(self.webpackChunklrg5kdak_zp696mkypqj=self.webpackChunklrg5kdak_zp696mkypqj||[]).push([[324],{57446:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=t.cnMenu=void 0;var o=n(57838),a=o.__importStar(n(87363)),r=n(99431),i=n(62254),s=n(17163),l=n(46465),c=n(92264),m=n(86590),d=n(4716);n(40326);var u=function(e){return m.flatMap((function(e){return e.items?e.items:e}),e)},p=function(e){return void 0!==e.items},h=function(e){return void 0===e&&(e=0),function(){return e++}};t.cnMenu=r.cn("Menu");var g=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hoveredIndex:t.props.focused?0:-1},t.innerRef=a.createRef(),t.itemsRef=[],t.uniqId=s.IS_TESTING?"0":String(Date.now())+Math.floor(1e4*Math.random()),t.mapChildren=function(e,n){var r=e.Item,i=e.Group,s=n.getNextItemCount,l=n.getNextGroupCount,c=n.disabled;return function(e){if(p(e)){var n=l();return a.default.createElement(i,o.__assign({title:e.title,key:"group-"+n},e.unsafe_props),e.items.map(t.mapChildren({Item:r,Group:i},{getNextItemCount:s,getNextGroupCount:l,disabled:c})))}var m=t.props,d=m.value,u=m.view,h=t.state.hoveredIndex,g=[].concat(d),f="default"===u&&void 0!==d,b=s();return t.itemsRef[b]=a.createRef(),a.default.createElement(r,o.__assign({},e.unsafe_props,{id:e.id||"item-"+t.uniqId+"-"+b,key:"item-"+b,"data-key":"item-"+b,needIconGlyph:f,checked:-1!==g.indexOf(e.value),disabled:e.disabled||c,hovered:!c&&h===b,onMouseEnter:t.setHoveredOnMouseEnter,onMouseLeave:t.setHoveredOnMouseLeave,onClick:t.onMenuItemClick,type:void 0===d?d:"option",innerRef:t.itemsRef[b],value:e.value,index:b}),e.content)}},t.onKeyDown=function(e){if(!e.shiftKey&&l.isKeyCode(e.keyCode,[l.Keys.UP,l.Keys.DOWN])){e.preventDefault();var o=e.keyCode-39,a=t.getNextNotDisabledIndex(o);t.triggerOnMenuItemChange(a),n.scrollToItem(t.innerRef,t.itemsRef[a]),t.setState({hoveredIndex:a})}l.isKeyCode(e.keyCode,[l.Keys.ENTER,l.Keys.SPACE])&&(e.preventDefault(),t.triggerOnChange())},t.onMenuItemClick=function(e,n){t.setState({hoveredIndex:n},(function(){t.triggerOnChange()}))},t.setHoveredOnMouseEnter=function(e,n){t.setState({hoveredIndex:n})},t.setHoveredOnMouseLeave=function(e,n){t.setState({hoveredIndex:-1})},t}return o.__extends(n,e),n.prototype.componentDidMount=function(){this.forwardRefs(),this.props.focused&&(this.subscribeToEvents(),this.hoverAndScrollToFirstSelectedElement())},n.prototype.componentDidUpdate=function(e){this.forwardRefs(),!e.focused&&this.props.focused?(this.subscribeToEvents(),this.hoverAndScrollToFirstSelectedElement()):e.focused&&!this.props.focused?(this.setState({hoveredIndex:-1}),this.unsubscribeFromEvents()):this.props.focused&&e.items.length!==this.props.items.length&&this.hoverAndScrollToFirstSelectedElement()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var e=this,n=this.props,r=n.className,s=n.disabled,l=(n.focused,n.items),c=(n.onChange,n.onActiveItemChange,n.value),m=(n.innerRef,n.renderItem),u=o.__rest(n,["className","disabled","focused","items","onChange","onActiveItemChange","value","innerRef","renderItem"]);return a.default.createElement(i.ComponentRegistryConsumer,{id:t.cnMenu()},(function(n){var i=n.Item,p=n.Group;return a.default.createElement(d.RenderOverrideProvider,{component:i,render:m},(function(n){var i=h(),m=h();return a.default.createElement("div",o.__assign({},u,{ref:e.innerRef,"aria-disabled":s,"aria-multiselectable":Array.isArray(c),role:void 0!==c?"listbox":void 0,className:t.cnMenu(null,[r])}),l.map(e.mapChildren({Item:n,Group:p},{getNextItemCount:i,getNextGroupCount:m,disabled:s})))}))}))},n.prototype.forwardRefs=n.scrollToItem=function(e,t){if(null!==e.current&&void 0!==t&&null!==t.current){var n,o=e.current.getBoundingClientRect().top,a=t.current.getBoundingClientRect().top;a<o?n=a-o:(n=a+t.current.offsetHeight-o-e.current.offsetHeight)<0&&(n=0),e.current.scrollTop=e.current.scrollTop+n}},n.prototype.subscribeToEvents=function(){document.addEventListener("keydown",this.onKeyDown,!0)},n.prototype.unsubscribeFromEvents=function(){document.removeEventListener("keydown",this.onKeyDown,!0)},n.prototype.hoverAndScrollToFirstSelectedElement=function(){var e=[].concat(this.props.value),t=u(this.props.items).reduce((function(t,n,o){return t<0&&-1!==e.indexOf(n.value)?o:t}),-1);n.scrollToItem(this.innerRef,this.itemsRef[t]),this.setState({hoveredIndex:t<0?0:t})},n.prototype.getNextNotDisabledIndex=function(e){for(var t=this.state.hoveredIndex,n=0,o=u(this.props.items);n<o.length&&(n++,(t+=e)<0&&(t=o.length-1),t>=o.length&&(t=0),o[t].disabled););return t},n.prototype.triggerOnMenuItemChange=function(e){var t=this.props.onActiveItemChange;if(void 0!==t&&null!==this.innerRef.current){var n=this.innerRef.current.querySelector('[data-key="item-'+e+'"]');n&&t(n.id)}},n.prototype.triggerOnChange=function(){var e=this.props,t=e.onChange,n=e.value,a=this.state.hoveredIndex;if(void 0!==t){var r=u(this.props.items),i=-1===a?"":r[a].value;if(Array.isArray(n)){var s=o.__spread(n);-1!==s.indexOf(i)?s=s.filter((function(e){return e!==i})):s.push(i),i=s}t({target:{value:i}})}},n.displayName=t.cnMenu(),n}(a.PureComponent);t.Menu=g},17163:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IS_PRODUCTION=t.IS_TESTING=void 0,t.IS_TESTING=!1,t.IS_PRODUCTION=!0},86590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;t.flatMap=function(e,t){return t.reduce((function(t,n){return t.concat(e(n))}),[])}},33706:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Jm});var o=n(95326),a=n(87363),r=n.n(a),i=n(4481),s=n(65233);const l=e=>{let{children:t}=e;const{isStub:n}=(0,s.D)(),o=n?s.w:r().Fragment;return r().createElement(o,null,t)};var c=n(44452),m=(n(37297),n(18941),n(21711),n(90476)),d=n(64634),u=n(64405),p=n(47526),h=n(89105),g=n.n(h),f=n(19788),b=n(92070),C=n(72226),v=n(21540),y=n.n(v),w=n(38249),_=n.n(w),E=n(98504);let k=new(y())({id:"arrow-clockwise-16_9fd1--inline",use:"arrow-clockwise-16_9fd1--inline-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="arrow-clockwise-16_9fd1--inline"><path d="M8 0.755756C8 0.157875 8.66535 -0.199648 9.16393 0.130325L12.555 2.37462C13.0031 2.67119 13.0031 3.32893 12.555 3.62549L9.16392 5.86973C8.66534 6.1997 8 5.84218 8 5.2443V4.00003C5.23858 4.00003 3 6.23861 3 9.00003C3 11.7615 5.23858 14 8 14C10.7614 14 13 11.7615 13 9.00003C13 8.44775 13.4477 8.00003 14 8.00003C14.5523 8.00003 15 8.44775 15 9.00003C15 12.866 11.866 16 8 16C4.13401 16 1 12.866 1 9.00003C1 5.13404 4.13401 2.00003 8 2.00003V0.755756Z" fill="currentColor" /></symbol>'});const I=(0,E.Z)(_(),k);let x=new(y())({id:"headphones_9379--inline",use:"headphones_9379--inline-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" id="headphones_9379--inline">\n<path d="M12 1C6.47715 1 2 5.47715 2 11V18C2 20.2091 3.79086 22 6 22C7.10457 22 8 21.1046 8 20V15C8 13.8954 7.10457 13 6 13H4V11C4 6.58172 7.58172 3 12 3C16.4183 3 20 6.58172 20 11V13H18C16.8954 13 16 13.8954 16 15V20C16 21.1046 16.8954 22 18 22C20.2091 22 22 20.2091 22 18V11C22 5.47715 17.5228 1 12 1Z" fill="currentColor" />\n</symbol>'});const S=(0,E.Z)(_(),x);var R=n(70130),M=n(26899);onst T={headline:{ru:"ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð½Ðµ Ñ€Ð¾Ð±Ð¾Ñ‚",_context:""},label:{ru:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð´ Ñ ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸",_context:""},placeholder:{ru:"Ð¡Ñ‚Ñ€Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð¿Ð¸ÑÐ½Ñ‹Ðµ Ð±ÑƒÐºÐ²Ñ‹",_context:""},button:{ru:"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ",_context:""}},L=((0,R.Wh)(T),(0,R.bN)(T)),B="captcha__captcha-1Q",P="captcha__headline-1f",D="captcha__image-2V",O="captcha__label-1T",U="captcha__actions-2_",A="captcha__playing-1b",Z="captcha__button-Vc",z=(0,a.memo)((e=>{let{onCaptchaSend:t,captchaData:n,generateCaptchaBasePath:o}=e;const{handleChange:i,value:s,handleClick:l,imageUrl:c,handleAudioClick:d,handleRefreshClick:u,isLoading:p,isAudioPaused:h,locale:v}=(e=>{let{onCaptchaSend:t,captchaData:n,generateCaptchaBasePath:o=""}=e;const[r,i]=(0,a.useState)(""),[s,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(n.imageUrl),[u,p]=(0,a.useState)(!0),h=(0,R.bU)(),g=(0,m.Z)(r),f=(0,a.useRef)({captchaData:n,generateCaptchaBascument.createElement("audio")}),b=(0,a.useCallback)((e=>{i(e.target.value)}),[]),C=(0,a.useCallback)((()=>t({captchaKey:f.current.captchaData.key,captchaRep:g.current})),[t,g]),v=(0,a.useCallback)((()=>{const{audioElement:e,captchaData:{voiceUrl:t}}=f.current;if(!e.paused)return e.pause(),void p(!0);e.src=t,e.currentTime=0,e.play(),p(!1)}),[f]),y=(0,a.useCallback)((async()=>{const{generateCaptchaBasePath:e,captchaData:{generatePath:t}}=f.current;try{l(!0);const{captchaData:n}=await(0,M.eJ)(`${e}${t}`);f.current.captchaData=n,d(n.imageUrl),i("")}finally);return(0,a.useEffect)((()=>{const{areturn e.addEventListener("ended",t),()=>{e.removeEventListener("ended",t)}}),[]),(0,a.useEffect)((()=>{f.current.captchaData=n,d(n.imageUrl)}),[n]),{value:r,handleChange:b,handleClick:C,imageUrl:c,handleAudioClick:v,handleRefreshClick:y,isLoading:s,isAudioPaused:u,locale:h}})({onCaptchaSend:t,captchaData:n,generateCaptchaBasePath:o});return r().createElement("div",{className:B},r().createElement("div",{className:P},L.headline(v)),r().createElement("div",{className:D},r().createElement("img",{src:c})),r().createElement("div",null,r().createElement(C.I,{label:r().createElement("div",{className:O},L.label(v)),placeholder:L.placeholder(v),onChange:i,value:s,isDisabled:p})),r().createElement("div",{className:U},r().createElement(f.z,{variant:"ghost",size:"s",onClick:u,isDisabled:p},r().createElement(b.P,{symbol:I,width:18})),r().createElement(f.z,{variant:"ghost",size:"s",className:g()(!h&&A),onClick:d,isDisabled:p},r().createElement(b.P,{symbol:S,width:20})),r().createElement("div",{className:Z},r().createElement(f.z,{variant:"accentPrimary",onClick:l,isDisabled:p||!s},L.button(v)))))})),F="captcha-modal__content-Hs",j=(0,a.memo)((e=>{let{onCaptchaSend:t,visible:n,onClose:o,captchaData:a,generateCaptchaBasePath:i}=e;return r().createElement(p.u,{visible:n,onClose:o},r().createElement("div",{className:g()(F)},r().createElement(z,{onCaptchaSend:t,captchaData:a,generateCaptchaBasePath:i})))})),H=(0,a.createContext)({showCaptchaModal:()=>{}}),W=e=>{let{children:t,generateCaptchaBasePath:n=""}=e;const[o,i,s]=(0,d.zj)(!1),[l,c]=(0,a.useState)(),p=(0,a.useRef)(u.f),h=(0,a.useRef)((()=>{})),g=(0,a.useCallback)((()=>{c(void 0),p.current=u.f,h.current(),s()}),[s]),f=(0,a.useCallback)((e=>{let{data:t,handleCaptchaSubmit:n,onCloseModal:o}=e;c(t),p.current=n,h.current=o||h.current,i()}),[i]),b=(0,m.Z)({captchaData:l,makeRequestRef:p,generateCaptchaBasePath:n,setCaptchaData:c,closeCaptchaModal:g,isVisible:o}),C=(0,a.useCallback)((async e=>{const{setCaptchaData:t,closeCaptchaModal:n,makeRequestRef:{current:o}}=b.current;try{await o(e),n()}catch(e){const o=e;if(!(o instanceof N))throw n(),e;t(o.data)}}),[b]),v=l?r().createElement(j,{visible:o,onClose:g,captchaData:l,onCaptchaSend:C,generateCaptchaBasePath:n}):null,y=(0,a.useMemo)((()=>({showCaptchaModal:f})),[f]);return r().createElement(H.Provider,{value:y},t,v)},V=e=>{let{makeRequest:t,showCaptchaModal:n}=e;return async()=>{try{return await t()}catch(e){const o=e;if(!(o instanceof N))throw e;return new Promise((a,handleCaptchaSubmit:async n=>{e(await t(n))},onCloseModal:()=>{e(void 0)}})))}}},$=()=>(0,a.useContext)(H);var q=n(50672),K=n(92933),G=n(590);const Q=r().createContext(null),J=e=>{let{children:t,paramsMemoRef:n,configMemoRef:o,publicationChannelOwnerUid:i,publicationPublisherId:s,logger:l,statsLogger:c,publicationLink:m,commentsVisibility:d,documentId:u,openCommentsImageViewer:p,onFocusChange:h,viewType:g,onSubscribeh,viewType:g,onSubscribe:f,inputPublicApiRef:b,isSubscriptionInProgress:C})),[n,o,i,l,c,m,d,s,u,p,h,g,f,b,C]);return r().createElement(Q.Provider,{value:v},t)},X=()=>{const e=(0,a.useContext)(Q);if(null===e)throw new Error("CommentsContext not configured");return e},Y=r().createContext(null),ee=e=>{let{subthreadByCommentId:t,children:n}=e;const o=(0,a.useMemo)((()=>({subthreadByCommentId:t})),[t]);return r().createElement(Y.Provider,{value:o},n)},te=r().createContext(null),ne=e=>{let{children:t,mutableData:n}=e;return r().createElement(te.Provider,{value:n},t)},oe=()=>{const e=(0,a.useContext)(te);if(null===e)throw new Error("MutableDataContext not configured");return e};var ae=n(73976),re=n(70757),ie=n(51579),se=n(85983),le=n(72533);const ce=["spam_or_fraud","obscene","inappropriate"],me=ae.opaque("CommentId",ae.number()),de=ae.opaque("DocumentId",ae.string()),ue=ae.opaque("Uid",ae.number()),pe=ae.stringUnion("ok","error","captcha-required");let he,ge;!functione",e.onlySubscribersCanComment="subscribe-visible",e.invisible="invisible"}(ge||(ge={}));const fe=ae.stringUnion("owner","moderator","none"),be=ae.stringUnion.apply(ae,["oldest","newest","top"]),Ce=["like","dislike"],ve=ae.stringUnion.apply(ae,Ce.concat(["none"])),ye=ae.stringUnion.apply(ae,Ce.concat(["cancel_like","cancel_dislike"],(0,K.Z)(ce))),we=ae.object({childBatchSize:ae.number(),rootBatchSize:ae.number(),maxCommentLength:ae.number(),cutAfterLines:ae.number(),cutAfterChars:ae.number(),defaultRootSorting:ae.withFallback(be,"top"),attachmentMimeTypes:ae.withFallback(ae.array(ae.string()),["image/jpeg","image/png","image/bmp","image/webp","image/x-ms-bmp"])}),_e=ae.object({childCommentsCount:ae.number(),rootCommentsCount:ae.number(),totalCommentsCount:ae.number(),commentsVisibility:ae.enumValue(ge),appliedSorting:be});class Ee extends((0,se.Cz)(ae.object({uid:(0,se.QU)(ue),uidSafe:ae.maybe(ae.string()),publicId:ae.string(),publicationChannelRole:ae.maybe(fe),hasPublicProfile:ae.boolean(),isSubscribedToPublicationChannel:ae.maybe(ae.boolean()),bannedTs:ae.maybe(ae.number()),name:ae.string(),displayName:ae.string(),mainColor:ae.string(),avatarLink:ae.maybe(ae.string()),publisher:ae.maybe(ae.object({id:ae.string(),name:ae.string(),logoLink:ae.string(),channelPath:ae.string(),isVerified:ae.boolean(),mainColor:ae.maybe(ae.string())}))}))){}class ke extends((0,se.Cz)(ae.object({commentId:(0,se.TG)(me),editedTs:ae.maybe(ae.number()),hasCurrentUserComplain:ae.boolean(),isPinned:ae.maybe(ae.boolean()),isHighlighted:ae.maybe(ae.boolean()),childrenCount:ae.number(),likes:ae.number(),dislikes:ae.number(),publicationChannelOwnerReaction:ve,currentUserReaction:ve,state:ae.withFallback(ae.enumValue(he),he.deleted)}))){}class Ie extends((0,se.Cz)(ae.object({id:(0,se.QU)(me),documentId:de,createdTs:ae.number(),editableUntilTs:ae.maybe(ae.number()),authorUid:ue,publishedByChannel:ae.boolean(),text:ae.maybe(ae.string()),rootCommentId:ae.maybe(me),replyToCommentId:ae.maybe(me),mediaItems:ae.maybe(ae.array(le.$w))}))){}const xe=ae.object({entity:ae.literal("comment"),entityData:ae.model(Ie)}),Se=ae.object({uid:ue,defaultRootSorting:ae.withFallback(ae.maybe(be),void 0),consents:ae.maybe(ae.object({rejected:ae.maybe(ae.boolean()),emailAccepted:ae.maybe(ae.boolean()),phoneAccepted:ae.maybe(ae.boolean()),unknown:ae.maybe(ae.boolean())}))}),Re=ae.object({status:pe,serverTs:ae.number()}),Me=ae.intersection(Re,ae.object({csrfToken:ae.maybe(ae.string()),captchaData:ae.maybe(ae.object({key:ae.string(),imageUrl:ae.string(),voiceUrl:ae.string(),generatePath:ae.string()})),currentUserPublicationReaction:ae.maybe(ve),usersById:ae.map(ae.model(Ee)),currentUser:ae.maybe(Se)})),Ne=ae.map(ae.array(xe)),Te=ae.intersection(Me,ae.object({publicationChannelOwnerUid:ue,config:ae.maybe(we),meta:_e,items:ae.array(xe),subthreadByCommentId:Ne,metaByCommentId:ae.map(ae.model(ke)),moreItemsQueryString:ae.maybe(ae.string())})),Le=ae.intersection(Me,ae.object({items:ae.array(xe),metaByCommentId:ae.map(ae.model(ke))})),Be=ae.object({clid:ae.maybe(ae.number()),partner:ae.maybe(ae.string()),integration:ae.maybe(ae.string()),product:ae.maybe(ae.string()),place:ae.maybe(ae.string()),rid:ae.maybe(ae.string())}),Pe=ae.intersection(Be,ae.object({csrfToken:ae.maybe(ae.string())})),De=ae.intersection(Pe,ae.object({publisherByChannel:ae.maybe(ae.boolean()),documentId:ae.string(),publicationPublisherId:ae.string(),text:ae.maybe(ae.string()),imageIds:ae.maybe(ae.array(ae.string())),lang:ae.maybe(ae.string()),sessionTs:ae.maybe(ae.number()),flightId:ae.maybe(ae.string()),deviceId:ae.maybe(ae.string())}));n(99562);const Oe=JSON.parse('{"ky":22,"rm":26,"eQ":16,"_V":20}'),Ue=JSON.parse('{"$A":16,"KS":20,"Cd":16,"Sf":20,"IB":14,"h4":18}');var Ae=n(89328);const Ze=new(y())({id:"exclamation_circle_filled_00a5--react",use:"exclamation_circle_filled_00a5--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="exclamation_circle_filled_00a5--react"><path fill="currentColor" fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2Zm1 5.187V12c0 1.333-2 1.333-2 0V7.188c0-1.333 2-1.333 2 0v-.001ZM13.4 16c0 1.867-2.8 1.867-2.8 0s2.8-1.867 2.8 0Z" clip-rule="evenodd" /></symbol>'});function ze(e){return _().add(Ze),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#exclamation_circle_filled_00a5--react"}))}ze.displayName="SpriteSymbolComponent(exclamation_circle_filled_00a5--react)";var Fe=n(37312);const je=["text-10-12","text-12-16","text-13-16","text-14-18","text-15-20","text-16-20","text-18-24","text-24-28","text-34-36","headline-22-26","headline-18-22","headline-20-24","headline-22-26"],He="text-15-20",We=`text-${Ue.$A}-${Ue.KS}`,Ve=(je.includes(We),`text-${Ue.Cd}-${Ue.Sf}`),$e=`text-${Ue.IB}-${Ue.h4}`,qe=je.includes(Ve)?Ve:He,Ke=je.includes($e)?$e:He,Ge=`headline-${Oe.ky}-${Oe.rm}`,Qe=je.includes(Ge)?Ge:"headline-22-26",Je=`headline-${Oe.eQ}-${Oe._V}`,Xe=(je.includes(Je),1),Ye={leftContent:{type:"icon",Icon:ze}},et=(Fe.Z,function(e,t,n){let{overrideKeys:o=!0}=void 0===n?{}:n;t.forEach(((t,n)=>{!o&&e.get(n)||e.set(n,t)}))}),tt=e=>{return t=(e=>{var t;return(null==e||null==(t=e.publisher)?void 0:t.logoLink)||(null==e?void 0:e.avatarLink)||"https://avatars.dzeninfra.ru/get-yapic/0/0-0/islands-retina-middle"})(e),t?`url(${t})`:void 0;var t},nt=e=>{let{forceIsSubscribedToChannel:t,currentUser:n,commentsVisibility:o}=e;const a=ot({forceIsSubscribedToChannel:t,currentUser:n});return o===ge.onlySubscribersCanComment&&!a&&"owner"!==(null==n?void 0:n.publicationChannelRole)},ot=e=>{let{forceIsSubscribedToChannel:t,currentUser:n}=e;return Boolean(null!=t?t:null==n?void 0:n.isSubscribedToPublicationChannel)},at=3,rt=e=>e?e.split("&").reduce(((e,t)=>{const[n,o]=t.split("=");return n&&o&&(e[n]=o),e}),{}):void 0,it=e=>{let{clid:t,place:n,partner:o,integration:a,product:r,csrfToken:i,captchaKey:s,captchaRep:l}=e;return Object.assign({},i&&{"X-Csrf-Token":i},t&&{"X-Zen-Comments-Clid":`${t}`},o&&{"X-Zen-Comments-Partner":o},a&&{"X-Zen-Comments-Integration":a},r&&{"X-Zen-Comments-Product":r},n&&{"X-Zen-Comments-Place":n},l&&{"captcha-rep":encodeURIComponent(l)},s&&{"captcha-key":s})},st=e=>{if("error"===(null==e?void 0:e.status))throw new Error("Request failed with status 200");if("captcha-required"===(null==e?void 0:e.status))throw new N(e.captchaData);return e},lt=(e,t)=>{let{headersData:n,params:o,rid:a}=t;return(0,M.eJ)(`/api/comments/v2/${e}`,{headers:it(n),params:Object.assign({},o,{rid:a})}).then(st)},ct=(e,t)=>{let{headersData:n,body:o,rid:a}=t;const r=it(n);return(0,M.C1)(`/api/comments/v2/${e}`,{body:JSON.stringify(o),headers:r,params:{rid:a}}).then(st)},mt=(e,t)=>{let{body:n,rid:o,params:a,headersData:r}=t;const i=it(r);return(0,M.XV)(`/api/comments/v2/${e}`,{body:JSON.stringify(n),headers:i,params:Object.assign({},a,{rid:o})}).then(st)},dt=ae.intersection(Be,ae.object({documentId:ae.string(),publicationPublisherId:ae.string(),withCurrentUser:ae.maybe(ae.boolean()),withConfig:ae.maybe(ae.boolean()),updateDefaultSorting:ae.maybe(ae.boolean()),batchSize:ae.maybe(ae.number()),subscriptionStateFor:ae.maybe(ae.stringUnion("currentUser","allUsers","none")),sessionTs:ae.maybe(ae.number()),flightId:ae.maybe(ae.string()),deviceId:ae.maybe(ae.string()),moreItemsOverrideParams:ae.maybe(ae.record(ae.string()))})),ut=ae.intersection(dt,ae.object({sorting:ae.maybe(be)})),pt=ae.intersection(ut,ae.object({shownRootCommentIds:ae.maybe(ae.array(ae.number()))})),ht=(0,re.P)({name:"rootCommentsEndpoint",params:ut,res:Te,req:e=>{let{sessionTs:t,withCurrentUser:n,withConfig:o,flightId:a,deviceId:r,batchSize:i,publicationPublisherId:s,documentId:l,rid:c,sorting:m,updateDefaultSorting:d,moreItemsOverrideParams:u,place:p,clid:h,partner:g,integration:f,product:b,subscriptionStateFor:C}=e;return lt("root-comments",{headersData:{place:p,clid:h,partner:g,integration:f,product:b},rid:c,params:Object.assign({documentId:l,publicationPublisherId:s,sorting:m,batchSize:i,withConfig:o,sessionTs:t,clientTs:Date.now(),deviceId:r,flightId:a,subscriptionStateFor:C,updateDefaultSorting:d,withCurrentUser:n},u)})}}),gt=(0,re.P)({name:"popularCommentsEndpoint",params:pt,res:Te,req:e=>{let{sessionTs:t,withCurrentUser:n,withConfig:o,flightId:a,deviceId:r,batchSize:i,publicationPublisherId:s,documentId:l,rid:c,sorting:m,updateDefaultSorting:d,moreItemsOverrideParams:u,place:p,clid:h,partner:g,integration:f,product:b,subscriptionStateFor:C,shownRootCommentIds:v}=e;return mt("popular-root-comments",{headersData:{place:p,clid:h,partner:g,integration:f,product:b},rid:c,params:Object.assign({documentId:l,publicationPublisherId:s,sorting:m,batchSize:i,withConfig:o,sessionTs:t,clientTs:Date.now(),deviceId:r,flightId:a,subscriptionStateFor:C,updateDefaultSorting:d,withCurrentUser:n},u),body:{shownRootCommentIds:v||[]}})}}),ft=ae.intersection(ut,ae.object({highlightCommentId:ae.number()})),bt=(0,re.P)({name:"highlightCommentEndpoint",params:ft,res:Te,req:e=>{let{place:t,clid:n,partner:o,integration:a,product:r,highlightCommentId:i,sessionTs:s,withCurrentUser:l,withConfig:c,flightId:m,deviceId:d,batchSize:u,publicationPublisherId:p,documentId:h,rid:g,sorting:f,updateDefaultSorting:b,moreItemsOverrideParams:C,subscriptionStateFor:v}=e;return lt(`highlight-comment/${i}`,{rid:g,headersData:{place:t,clid:n,partner:o,integration:a,product:r},params:Object.assign({documentId:h,publicationPublisherId:p,sorting:f,batchSize:u,withConfig:c,sessionTs:s,clientTs:Date.now(),deviceId:d,flightId:m,subscriptionStateFor:v,updateDefaultSorting:b,withCurrentUser:l},C)}).then((async e=>{if(f)return e;const y=e,w=(0,K.Z)(Object.values(y.subthreadByCommentId)).find((e=>Array.from(e||[]).find((e=>{let{entityData:{id:t}}=e;return t===i})))),_=Array.isArray(w)?w[0]:void 0;if(!_)return e;if(y.items.some((e=>{let{entityData:{id:t}}=e;return _.entityData.rootCommentId===t})))return e;const{rootCommentId:E}=_.entityData;let k=await lt(`highlight-comment/${E}`,{rid:g,headersData:{place:t,clid:n,partner:o,integration:a,product:r},params:Object.assign({documentId:h,publicationPublisherId:p,sorting:f,batchSize:u,withConfig:c,sessionTs:s,clientTs:Date.now(),deviceId:d,flightId:m,subscriptionStateFor:v,updateDefaultSorting:b,withCurrentUser:l},C)});if(!k)return e;const I=Object.assign({},y.metaByCommentId,k.metaByCommentId),x=Object.assign({},y.usersById,k.usersById);return k=Object.assign({},y,{items:k.items,metaByCommentId:Object.assign({},I,{[E]:Object.assign({},I[E],{isHighlighted:!1})}),moreItemsQueryString:k.moreItemsQueryString,usersById:x}),k}))}}),Ct=ae.intersection(dt,ae.object({rootCommentId:me})),vt=(0,re.P)({name:"childCommentsEndpoint",params:Ct,res:Te,req:e=>{let{rootCommentId:t,sessionTs:n,flightId:o,deviceId:a,publicationPublisherId:r,documentId:i,rid:s,withCurrentUser:l,withConfig:c,moreItemsOverrideParams:m,place:d,clid:u,partner:p,integration:h,product:g}=e;return lt("child-comments",{rid:s,headersData:{place:d,clid:u,partner:p,integration:h,product:g},params:Object.assign({rootCommentId:t,documentId:i,publicationPublisherId:r,sessionTs:n,clientTs:Date.now(),deviceId:a,flightId:o,withCurrentUser:l,withConfig:c},m)})}}),yt=function(e,t,n){let{mergeAppliedSorting:o=!0}=void 0===n?{}:n;et(e.usersById,t.usersById),et(e.metaByCommentId,t.metaByCommentId);const{totalCommentsCount:a,childCommentsCount:r,commentsVisibility:i,rootCommentsCount:s,appliedSorting:l}=t.meta;Object.assign(e.meta,Object.assign({totalCommentsCount:a,childCommentsCount:r,commentsVisibility:i,rootCommentsCount:s},o?{appliedSorting:l}:void 0)),t.currentUser&&(e.currentUser=e.currentUser?Object.assign(e.currentUser,t.currentUser):t.currentUser)};var wt=n(26230),_t=n(2620),Et=n(77995);const kt=r().createContext({newCommentsUseDeepWatchTrigger:!1,isOneTapButtonAuthEnabled:!0}),It=e=>{let{newCommentsUseDeepWatchTrigger:t=!1,isOneTapButtonAuthEnabled:n=!0,children:o}=e;const i=(0,a.useMemo)((()=>({newCommentsUseDeepWatchTrigger:t,isOneTapButtonAuthEnabled:n})),[t,n]);return r().createElement(kt.Provider,{value:i},o)},xt=()=>(0,a.useContext)(kt),St=(0,a.createContext)({isVisible:!1,handleClose:()=>{},showLoginModal:()=>{},type:_t.D.COMMENTS,shouldShowLoginModal:!1,isOneTapButtonAuthEnabled:!0,logEvents:{prevEvent:void 0,onShow(){},onClose(){},onButtonClick(){}}}),Rt=e=>{let{user:t,rid:n,place:o,pageType:i,clid:s,children:l,redirectAfterLoginUrl:c}=e;const[m,d]=(0OMMENTS}),u=(0,a.useCallback)((()=>d((e=>Object.assign({},e,{isVisible:!1})))),[]),{isOneTapButtonAuthEnabled:p}=xt(),h=!(null!=t&&t.uid),g=(0,a.useCallback)((function(e){void 0===e&&(e=_t.D.COMMENTS),h&&d({isVisible:!0,type:e})}),[h]),f=(0,a.useMemo)((()=>{const e="comment:create",t={prev_event:e,rid:n,place:o,page_type:i,clid:s};return{clid:s,prevEvent:e,onShow:()=>{(0,Et.vo)("login_popup:show",t,{maxHold:500})},onClose:()=>{(0,Et.vo)("login_popup:later",t,{})},onButtonClick:e=>{(0,Et.vo)("login_popup:enter",Object.assign({},t,{data:{uid_type:e}}),{maxHold:0})}}}),[s,i,o,n]),b=(0,a.useMemo)((()=>Object.assign({showLoginModal:g,handleClose:u,logEvents:f,shouldShowLoginModal:h,documentUrl:c,isOneTapButtonAuthEnabled:p},m)),[g,u,f,h,c,m,p]);return r().createElement(St.Provider,{value:b},l)},Mt=()=>(0,a.useContext)(St);var Nt=n(47133),Tt=n(30356);const Lt=(0,Tt.Z>Promise.resolve().then(n.bind(n,61584))),{resolveComponent:e=>e.LoginModal})),Bt=()=>{const e=Mt();return r().createElement(Lt,e)};var Pt=n(6rror("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}var jt=r().n{loadable:s,lazy:function(e,t){reultReso,render:function(e){var t=e.result,n=e.pronction":function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),Xt=Jt.loadable,Yt=Jt.lazy;var en=Gt;en.lib=Xt,Qt.lib=Yt;const tn=en;var nn=n(56997),on=n(16933);const an=(0,a.createContext)(void 0);let rn=!0;const sn=()=>{rn=!1},ln=()=>r().createElement(an.Consumer,null,(e=>e?(rn=!0,InFullscreen:!1}))):null)),cn=tn((()=>Promise.resolve().then(neateElement(ln,null),resolveComponent:e=>{let{ZenImageViewer:t}=e;return t}}),mn=(0,Tt.Z)(cn,{errorView:null}),dn=(0,a.memo)((e=>{const{isFullscreen:t,closeFunc:n,fullscreenElementRef:o,canShowImageViewer:i}=(0,on.x)(e),s=(0,a.useMemo)((()=>Object.assign({},e,{handleClose:n,isParentInFullscreen:t})),[t,n,e]);return r().createElement("div",{ref:o},r().createElement(an.Provider,{value:s},i&&r().createElement(mn,(0,Ae.Z)({},e,{isAfterLoadingComponent:rn,handleClose:n,isParentInFullscreen:t,onInitializationDone:sn,openInFullscreen:!1}))))}));var un=n(34400);var pn=n(87817),hn=n(75982),gn=n(39538);const fn=(0,pn.N)({url:"/api/v4/launcher/stats/bulk",sendBeaconOnUnload:!0}),bn=e=>{let{rid:t,clid:n,deviceId:o,flightId:r,pageType:i,place:s,itemId:l,itemType:c,documentId:d,sessionTs:u,disableNewCommentsStatsLogging:p,publicationChannelOwnerUid:h,partner:g,integration:f,product:b}=e;const C=(0,a.useRef)([]),v=(0,m.Z)({clid:n,partner:g,integration:f,product:b,rid:t,device_id:o,flight_id:r,page_type:i,place:s,parent_id:l,parent_type:c,session_ts:u,data:{publication_owner_uid:h,document_type:c,document_id:d}}),y=(0,a.useCallback)((function(e,t){void 0===t&&(t={}),p&&-1!==e.indexOf("comments:")||(((e,t,n)=>{n&&fn.configure(n),fn((0,gn.q)(e),t).catch(hn.i)})(e,Object.assign({},v.current,t,{data:Object.assign({},v.current.data,t.data)}),{parameters:{clid:v.current.clid}}),C.current.push(e))}),[v,p]),w=(0,a.useCallback)((function(e,t){void 0===t&&(t={}),p&&-1!==e.indexOent.includes(e)||y(e,t)}),[y,p]);return(0,a.useMemo)((()=>({push:y,once:w})),[y,w])};n(46713);const Cn=850,vn=250,yn=function(e,t){void 0===e&&(e=!1);let{loaderDelayMs:n=Cn,minLoaderShowingMs:o=vn}=void 0===t?{}:t;const r=(0,wt.Z)(),[i,s]=(0,a.useState)(e),l=(0,a.useRef)(e),c=(0,a.useRef)(void 0),d=(0,a.useRef)(void 0),u=(0,m.Z)({loaderDelayMs:n,isMounted:r,isShowingLoader:i,minLoaderShowingMs:o}),p=(0,a.useCallback)((()=>{d.current&&clearTimeout(d.current),l.current&&u.current.isShowingLoader||(l.current=!0,c.current=setTimeout((()=>{l.current=!0,u.current.isMounted()&&s(!0)}),u.current.loaderDelayMs))}),[u]),h=(0,a.useCallback)((async()=>{c.current&&clearTimeout(c.current),l.current&&(u.current.isShowingLoader?await new Promise((e=>{d.current=setTimeout((()=>{l.current=!1,u.current.isMounted()&&s(!1),e()}),u.current.minLoaderShowingMs)})):l.current=!1)}),[u]);return{isLoadInProgressRef:l,showLoader:p,stopShowingLoader:h,isShowingLoader:i}};var wn=n(48392),_n=n(15954),En=n(736),kn=n(73898);const In=new(y())({id:"chevron_up_d2ad--react",use:"chevron_up_d2ad--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="chevron_up_d2ad--react"><path fill="currentColor" d="m12 9.414-6.293 6.293a1 1 0 0 1-1.414-1.414l6.646-6.647a1.5 1.5 0 0 1 2.122 0l6.646 6.647a1 1 0 0 1-1.414 1.414L12 9.414Z" /></symbol>'});function xn(e){return _().add(In),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#chevron_up_d2ad--react"}))}xn.displayName="SpriteSymbolComponent(chevron_up_d2ad--react)";const Sn="more-comments-button__block-3z",Rn="more-comments-button__text-1C",Mn="more-comments-button__spinner-2W",Nn=(0,a.memo)((e=>{var t;let{isEndlessScrollEnabled:n,moreCommentsEndpoint:o,moreItemsQueryParams:i,createdRootComments:l,setMoreItemsQueryParams:d,onMoreRootCommentsFetched:u,requestParamsRef:p,totalRootCommentsCount:h,itemsCount:b}=e;const C=(0,R.bU)(),{showSnackbar:v}=(0,s.D)(),{isLoadInProgressRef:y,showLoader:w,stopShowingLoader:_,isShowingLoader:E}=yn(),{paramsMemoRef:k,publicationPublisherId:I,documentId:x,viewType:S,configMemoRef:M}=X(),N=oe(),T=(0,c.JC)(o),L="video-chat"===S,B=M.current&&Number.isFinite(null==(t=M.current)?void 0:t.rootBatchSize)?M.current.rootBatchSize:50,P=h&&b?h-b:0,D=P>B?B:P,O=(0,m.Z)({fetchMoreComments:T,mutableData:N,setMoreItemsQueryParams:d,moreItemsQueryParams:i,showLoader:w,showSnackbar:v,createdRootComments:l,stopShowingLoader:_}),U=(0,a.useCallback)((async()=>{if(y.current)return;const{moreItemsQueryParams:e,setMoreItemsQueryParams:t,showLoader:n,stopShowingLoader:o,showSnackbar:a,createdRootComments:i,fetchMoreComments:s}=O.current,{shownRootCommentIds:l}=p.current;try{n();const a=await s(Object.assign({},k.current,{publicationPublisherId:I,documentId:x,withConfig:!1,moreItemsOverrideParams:e,withCurrentUser:!0,shownRootCommentIds:l}));if(await o(),t(rt(a.moreItemsQueryString)),!a.items.length)return;const{mutableData:r}=O.current;!function(e,t,n){let{excludeComments:o}=void 0===n?{}:n;(0,ie.runInAction)((()=>{if(yt(e,t),!t.items.length)return;const n=Object.create(null);if(null!=o&&o.length)for(let e=0;e<o.length;e++)n[o[e].entityData.id]=!0;for(let o=0;o<t.items.length;o++){const a=t.items[o];n[a.entityData.id]||e.items.push(a)}}))}(r,a,{excludeComments:i}),p.current.shownRootCommentIds="top"===a.meta.appliedSorting?(0,K.Z)(new Set([].concat((0,K.Z)(p.current.shownRootCommentIds),(0,K.Z)(a.items.map((e=>{let{entityData:{id:t}}=e;return t})))))):[]}catch(e){kn.kg.error(e),a(Object.assign({id:"failedToLoadComments",title:r().createElement(_n.oc.failedToLoadComments,null)y,O,k,I,x,p]),A=(0,a.usll==u?void 0:u()))}),[U,u]),Z=(0,En.S)((e=>{let[t]=e;t.isIntersecting&&A()}),{rootMargin:"350px"}),z=D===B?_n.ag.showMoreCommentsWithTotal(C,{count:D,total:P}):_n.ag.showMoreComments(C,{count:D});return L?r().createElement("div",{ref:n?Z:void 0,className:Sn},r().createElement(f.z,{variant:"tertiary",onClick:A,isLoading:E,"aria-label":_n.ag.showMoreCommentsStatic(C),rightContent:{type:"icon",Icon:xn}},_n.oc.showMoreCommentsStatic)):r().createElement("div",{ref:n?Z:void 0,className:g()(Sn,Rn)},r().createElement("span",{onClick:A},z),E&&r().createElement(r().Fragment,null,"Â ",r().createElement(wn.$,{size:16,className:Mn})))})),Tn=(0,re.P)({name:"createCommentEndpoint",params:ae.intersection(De,ae.object({rootCommentId:ae.maybe(me),replyToCommentId:ae.maybe(me),captchaKey:ae.maybe(ae.string()),captchaRep:ae.maybe(ae.string())})),res:Le,req:e=>{let{csrfToken:t,rid:n,captchaKey:o,captchaRep:a,clid:r,partner:i,integration:s,product:l,place:c,publisherByChannel:m,documentId:d,publicationPublisherId:u,text:p,imageIds:h,lang:g,sessionTs:f,flightId:b,deviceId:C,rootCommentId:v,replyToCommentId:y}=e;return mt("create-comment",{rid:n,headersData:{csrfToken:t,clid:r,captchaKey:o,captchaRep:a,partner:i,integration:s,product:l,place:c},body:{publisherByChannel:m,documentId:d,publicationPublisherId:u,text:p,imageIds:h,lang:g,sessionTs:f,flightId:b,deviceId:C,rootCommentId:v,replyToCommentId:y,clientTs:Date.now()}})}});var Ln=n(15665),Bn=n(21680);const Pn=function(e){let{shouldMergeResponse:t=!0}=void 0===e?{}:e;const n=(0,wt.Z)(),{paramsMemoRef:o,publicationPublisherId:r,documentId:i}=X(),s=oe(),l=(0,c.JC)(Tn),d=(0,R.bU)(),u=(0,m.Z)({createCommentRequest:l,paramsMemoRef:o,publicationPublisherId:r,documentId:i,lang:d,isMounted:n,shouldMergeResponse:t,mutableData:s});return(0,a.useCallback)((async e=>{let{replyToCommentId:t,rootCommentId:n,text:o,attachments:a,captchaKey:r,captchaRep:i}=e;const{createCommentRequest:s,paramsMemoRef:l,publicationPublisherId:c,documentId:m,lang:d,isMounted:p,shouldMergeResponse:h}=u.current,g=await s(Object.assign({},l.current,{publicationPublisherId:c,documentId:m,text:o.trim(),lang:d,replyToCommentId:t,imageIds:a,rootCommentId:n||t,captchaKey:r,captchaRep:i}));return(0,Bn.Qo)(Ln.ZU.dzenComment),p()&&h?(((e,t)=>{(0,ie.runInAction)((()=>{((e,t)=>{const[n]=t.items,o=null==n?void 0:n.entityData.rootCommentId;if(!n||!o)return;const a=e.subthreadByCommentId.get(`${o}`);a?a.push(n):(e.subthreadByCommentId.set(`${o}`,[n]),e.meta.totalCommentsCount+=1)})(e,t),et(e.metaByCommentId,t.metaByCommentId),et(e.usersById,t.usersById)}))})(u.current.mutableData,g),g):g}),[u])};var Dn=n(52837),On=n(90516),Un=n(86801);const An={"Smileys & Emotion":["ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ˜‚","ðŸ˜‰","ðŸ˜Š","ðŸ˜‡","ðŸ˜","ðŸ˜˜","ðŸ˜š","ðŸ˜‹","ðŸ˜œ","ðŸ˜","ðŸ˜","ðŸ˜¶","ðŸ˜","ðŸ˜’","ðŸ˜Œ","ðŸ˜”","ðŸ˜ª","ðŸ˜·","ðŸ˜µ","ðŸ˜Ž","ðŸ˜²","ðŸ˜³","ðŸ˜¨","ðŸ˜°","ðŸ˜¥","ðŸ˜¢","ðŸ˜­","ðŸ˜±","ðŸ˜–","ðŸ˜£","ðŸ˜ž","ðŸ˜“","ðŸ˜©","ðŸ˜«","ðŸ˜¤","ðŸ˜¡","ðŸ˜ ","ðŸ˜ˆ","ðŸ‘¿","ðŸ’€","â˜ ï¸","ðŸ’©","ðŸ‘¹","ðŸ‘º","ðŸ‘»","ðŸ‘½","ðŸ‘¾","ðŸ˜º","ðŸ˜¸","ðŸ˜¹","ðŸ˜»","ðŸ˜¼","ðŸ˜½","ðŸ™€","ðŸ˜¿","ðŸ˜¾","ðŸ™ˆ","ðŸ™‰","ðŸ™Š","ðŸ’‹","ðŸ’Œ","ðŸ’˜","ðŸ’","ðŸ’–","ðŸ’—","ðŸ’“","ðŸ’ž","ðŸ’•","ðŸ’Ÿ","â£ï¸","ðŸ’”","â¤ï¸","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ’¯","ðŸ’¢","ðŸ’¥","ðŸ’«","ðŸ’¦","ðŸ’¨","ðŸ’£","ðŸ’¬","ðŸ’­","ðŸ’¤"],"People & Body":["ðŸ‘‹","âœ‹","ðŸ‘Œ","âœŒï¸","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ‘‡","â˜ï¸","ðŸ‘","ðŸ‘Ž","âœŠ","ðŸ‘Š","ðŸ‘","ðŸ™Œ","ðŸ‘","ðŸ™","âœï¸","ðŸ’…","ðŸ’ª","ðŸ‘‚","ðŸ‘ƒ","ðŸ‘€","ðŸ‘…","ðŸ‘„","ðŸ‘¶","ðŸ‘¦","ðŸ‘§","ðŸ‘¨","ðŸ‘©","ðŸ‘±â€â™€ï¸","ðŸ‘´","ðŸ‘µ","ðŸ™â€â™‚ï¸","ðŸ™â€â™€ï¸","ðŸ™Žâ€â™‚ï¸","ðŸ™Žâ€â™€ï¸","ðŸ™…â€â™‚ï¸","ðŸ™…â€â™€ï¸","ðŸ™†â€â™‚ï¸","ðŸ™†â€â™€ï¸","ðŸ’â€â™‚ï¸","ðŸ’â€â™€ï¸","ðŸ™‹â€â™‚ï¸","ðŸ™‹â€â™€ï¸","ðŸ™‡â€â™‚ï¸","ðŸ™‡â€â™€ï¸","ðŸ‘¨â€âš•ï¸","ðŸ‘©â€âš•ï¸","ðŸ‘¨â€ðŸŽ“","ðŸ‘©â€ðŸŽ“","ðŸ‘¨â€ðŸ«","ðŸ‘©â€ðŸ«","ðŸ‘¨â€âš–ï¸","ðŸ‘©â€âš–ï¸","ðŸ‘¨â€ðŸŒ¾","ðŸ‘©â€ðŸŒ¾","ðŸ‘¨â€ðŸ³","ðŸ‘©â€ðŸ³","ðŸ‘¨â€ðŸ”§","ðŸ‘©â€ðŸ”§","ðŸ‘¨â€ðŸ­","ðŸ‘©â€ðŸ­","ðŸ‘¨â€ðŸ’¼","ðŸ‘©â€ðŸ’¼","ðŸ‘¨â€ðŸ”¬","ðŸ‘©â€ðŸ”¬","ðŸ‘¨â€ðŸ’»","ðŸ‘©â€ðŸ’»","ðŸ‘¨â€ðŸŽ¤","ðŸ‘©â€ðŸŽ¤","ðŸ‘¨â€ðŸŽ¨","ðŸ‘©â€ðŸŽ¨","ðŸ‘¨â€âœˆï¸","ðŸ‘©â€âœˆï¸","ðŸ‘¨â€ðŸš€","ðŸ‘©â€ðŸš€","ðŸ‘¨â€ðŸš’","ðŸ‘©â€ðŸš’","ðŸ‘®â€â™‚ï¸","ðŸ‘®â€â™€ï¸","ðŸ’‚â€â™‚ï¸","ðŸ’‚â€â™€ï¸","ðŸ‘·â€â™‚ï¸","ðŸ‘·â€â™€ï¸","ðŸ‘¸","ðŸ‘³â€â™‚ï¸","ðŸ‘³â€â™€ï¸","ðŸ‘²","ðŸ‘°","ðŸ‘¼","ðŸŽ…","ðŸ’†â€â™‚ï¸","ðŸ’†â€â™€ï¸","ðŸ’‡â€â™‚ï¸","ðŸ’‡â€â™€ï¸","ðŸš¶â€â™‚ï¸","ðŸš¶â€â™€ï¸","ðŸƒâ€â™‚ï¸","ðŸƒâ€â™€ï¸","ðŸ’ƒ","ðŸ‘¯â€â™‚ï¸","ðŸ‘¯â€â™€ï¸","ðŸ‡","â›·ï¸","ðŸ‚","ðŸ„â€â™‚ï¸","ðŸ„â€â™€ï¸","ðŸš£â€â™‚ï¸","ðŸš£â€â™€ï¸","ðŸŠâ€â™‚ï¸","ðŸŠâ€â™€ï¸","â›¹ï¸â€â™‚ï¸","â›¹ï¸â€â™€ï¸","ðŸš´â€â™‚ï¸","ðŸš´â€â™€ï¸","ðŸšµâ€â™‚ï¸","ðŸšµâ€â™€ï¸","ðŸ›€","ðŸ‘­","ðŸ‘«","ðŸ‘¬","ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨","ðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨","ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘©","ðŸ‘©â€â¤ï¸â€ðŸ‘¨","ðŸ‘¨â€â¤ï¸â€ðŸ‘¨","ðŸ‘©â€â¤ï¸â€ðŸ‘©","ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§","ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§","ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘§","ðŸ‘©â€ðŸ‘©â€ðŸ‘¦","ðŸ‘©â€ðŸ‘©â€ðŸ‘§","ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦","ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§","ðŸ‘¨â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘§","ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦","ðŸ‘¨â€ðŸ‘§â€ðŸ‘§","ðŸ‘©â€ðŸ‘¦","ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦","ðŸ‘©â€ðŸ‘§","ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ‘©â€ðŸ‘§â€ðŸ‘§","ðŸ‘¤","ðŸ‘¥","ðŸ‘£"],"Animals & Nature":["ðŸµ","ðŸ’","ðŸ¶","ðŸ•","ðŸ©","ðŸº","ðŸ±","ðŸˆ","ðŸ¯","ðŸ…","ðŸ†","ðŸ´","ðŸŽ","ðŸ®","ðŸ‚","ðŸƒ","ðŸ„","ðŸ·","ðŸ–","ðŸ—","ðŸ½","ðŸ","ðŸ‘","ðŸ","ðŸª","ðŸ«","ðŸ˜","ðŸ­","ðŸ","ðŸ€","ðŸ¹","ðŸ°","ðŸ‡","ðŸ»","ðŸ¨","ðŸ¼","ðŸ¾","ðŸ”","ðŸ“","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¦","ðŸ§","ðŸ¸","ðŸŠ","ðŸ¢","ðŸ","ðŸ²","ðŸ‰","ðŸ³","ðŸ‹","ðŸ¬","ðŸŸ","ðŸ ","ðŸ¡","ðŸ™","ðŸš","ðŸŒ","ðŸ›","ðŸœ","ðŸ","ðŸž","ðŸ’","ðŸŒ¸","ðŸ’®","ðŸŒ¹","ðŸŒº","ðŸŒ»","ðŸŒ¼","ðŸŒ·","ðŸŒ±","ðŸŒ²","ðŸŒ³","ðŸŒ´","ðŸŒµ","ðŸŒ¾","ðŸŒ¿","â˜˜ï¸","ðŸ€","ðŸ","ðŸ‚","ðŸƒ"],"Food & Drink":["ðŸ‡","ðŸˆ","ðŸ‰","ðŸŠ","ðŸ‹","ðŸŒ","ðŸ","ðŸŽ","ðŸ","ðŸ","ðŸ‘","ðŸ’","ðŸ“","ðŸ…","ðŸ†","ðŸŒ½","ðŸ„","ðŸŒ°","ðŸž","ðŸ–","ðŸ—","ðŸ”","ðŸŸ","ðŸ•","ðŸ³","ðŸ²","ðŸ±","ðŸ˜","ðŸ™","ðŸš","ðŸ›","ðŸœ","ðŸ","ðŸ ","ðŸ¢","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¡","ðŸ¦","ðŸ§","ðŸ¨","ðŸ©","ðŸª","ðŸŽ‚","ðŸ°","ðŸ«","ðŸ¬","ðŸ­","ðŸ®","ðŸ¯","ðŸ¼","â˜•","ðŸµ","ðŸ¶","ðŸ·","ðŸ¸","ðŸ¹","ðŸº","ðŸ»","ðŸ´","ðŸ”ª"],"Travel & Places":["ðŸŒ","ðŸŒŽ","ðŸŒ","ðŸŒ","ðŸ—¾","â›°ï¸","ðŸŒ‹","ðŸ—»","ðŸ ","ðŸ¡","ðŸ¢","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¦","ðŸ¨","ðŸ©","ðŸª","ðŸ«","ðŸ¬","ðŸ­","ðŸ¯","ðŸ°","ðŸ’’","ðŸ—¼","ðŸ—½","â›ª","â›©ï¸","â›²","â›º","ðŸŒ","ðŸŒƒ","ðŸŒ„","ðŸŒ…","ðŸŒ†","ðŸŒ‡","ðŸŒ‰","â™¨ï¸","ðŸŽ ","ðŸŽ¡","ðŸŽ¢","ðŸ’ˆ","ðŸŽª","ðŸš‚","ðŸšƒ","ðŸš„","ðŸš…","ðŸš†","ðŸš‡","ðŸšˆ","ðŸš‰","ðŸšŠ","ðŸš","ðŸšž","ðŸš‹","ðŸšŒ","ðŸš","ðŸšŽ","ðŸš","ðŸš‘","ðŸš’","ðŸš“","ðŸš”","ðŸš•","ðŸš–","ðŸš—","ðŸš˜","ðŸš™","ðŸšš","ðŸš›","ðŸšœ","ðŸš²","ðŸš","â›½","ðŸš¨","ðŸš¥","ðŸš¦","ðŸš§","âš“","â›µ","ðŸš¤","â›´ï¸","ðŸš¢","âœˆï¸","ðŸ’º","ðŸš","ðŸšŸ","ðŸš ","ðŸš¡","ðŸš€","âŒ›","â³","âŒš","â°","â±ï¸","â²ï¸","ðŸ•›","ðŸ•§","ðŸ•","ðŸ•œ","ðŸ•‘","ðŸ•","ðŸ•’","ðŸ•ž","ðŸ•“","ðŸ•Ÿ","ðŸ•”","ðŸ• ","ðŸ••","ðŸ•¡","ðŸ•–","ðŸ•¢","ðŸ•—","ðŸ•£","ðŸ•˜","ðŸ•¤","ðŸ•™","ðŸ•¥","ðŸ•š","ðŸ•¦","ðŸŒ‘","ðŸŒ’","ðŸŒ“","ðŸŒ”","ðŸŒ•","ðŸŒ–","ðŸŒ—","ðŸŒ˜","ðŸŒ™","ðŸŒš","ðŸŒ›","ðŸŒœ","â˜€ï¸","ðŸŒ","ðŸŒž","â­","ðŸŒŸ","ðŸŒ ","ðŸŒŒ","â˜ï¸","â›…","â›ˆï¸","ðŸŒ€","ðŸŒˆ","ðŸŒ‚","â˜‚ï¸","â˜”","â›±ï¸","âš¡","â„ï¸","â˜ƒï¸","â›„","â˜„ï¸","ðŸ”¥","ðŸ’§","ðŸŒŠ"],Activities:["ðŸŽƒ","ðŸŽ„","ðŸŽ†","ðŸŽ‡","âœ¨","ðŸŽˆ","ðŸŽ‰","ðŸŽŠ","ðŸŽ‹","ðŸŽ","ðŸŽŽ","ðŸŽ","ðŸŽ","ðŸŽ‘","ðŸŽ€","ðŸŽ","ðŸŽ«","ðŸ†","âš½","âš¾","ðŸ€","ðŸˆ","ðŸ‰","ðŸŽ¾","ðŸŽ³","â›³","â›¸ï¸","ðŸŽ£","ðŸŽ½","ðŸŽ¿","ðŸŽ¯","ðŸŽ±","ðŸ”®","ðŸŽ®","ðŸŽ°","ðŸŽ²","â™ ï¸","â™¥ï¸","â™¦ï¸","â™£ï¸","â™Ÿï¸","ðŸƒ","ðŸ€„","ðŸŽ´","ðŸŽ­","ðŸŽ¨"],Objects:["ðŸ‘“","ðŸ‘”","ðŸ‘•","ðŸ‘–","ðŸ‘—","ðŸ‘˜","ðŸ‘™","ðŸ‘š","ðŸ‘›","ðŸ‘œ","ðŸ‘","ðŸŽ’","ðŸ‘ž","ðŸ‘Ÿ","ðŸ‘ ","ðŸ‘¡","ðŸ‘¢","ðŸ‘‘","ðŸ‘’","ðŸŽ©","ðŸŽ“","â›‘ï¸","ðŸ’„","ðŸ’","ðŸ’Ž","ðŸ”‡","ðŸ”ˆ","ðŸ”‰","ðŸ”Š","ðŸ“¢","ðŸ“£","ðŸ“¯","ðŸ””","ðŸ”•","ðŸŽ¼","ðŸŽµ","ðŸŽ¶","ðŸŽ¤","ðŸŽ§","ðŸ“»","ðŸŽ·","ðŸŽ¸","ðŸŽ¹","ðŸŽº","ðŸŽ»","ðŸ“±","ðŸ“²","â˜Žï¸","ðŸ“ž","ðŸ“Ÿ","ðŸ“ ","ðŸ”‹","ðŸ”Œ","ðŸ’»","âŒ¨ï¸","ðŸ’½","ðŸ’¾","ðŸ’¿","ðŸ“€","ðŸŽ¥","ðŸŽ¬","ðŸ“º","ðŸ“·","ðŸ“¹","ðŸ“¼","ðŸ”","ðŸ”Ž","ðŸ’¡","ðŸ”¦","ðŸ®","ðŸ“”","ðŸ“•","ðŸ“–","ðŸ“—","ðŸ“˜","ðŸ“™","ðŸ“š",","ðŸ“ƒ","ðŸ“œ","ðŸ“„","ðŸ“°","ðŸ“‘","ðŸ”–","ðŸ’°","ðŸ’´","ðŸ’µ","ðŸ’¶","ðŸ’·","ðŸ’¸","ðŸ’³","ðŸ’¹","ðŸ’±","ðŸ’²","âœ‰ï¸","ðŸ“§","ðŸ“¨","ðŸ“©","ðŸ“¤","ðŸ“¥","ðŸ“¦","ðŸ“«","ðŸ“ª","ðŸ“¬","ðŸ“­","ðŸ“®","âœï¸","âœ’ï¸","ðŸ“","ð","ðŸ“‚","ðŸ“…","ðŸ“†","ðŸ“‡","ðŸ“ˆ","ðŸ“‰","ðŸ“Š","ðŸ“‹","ðŸ“Œ","ðŸ“","ðŸ“Ž","ðŸ“","ðŸ“","âœ‚ï¸","ðŸ”’","ðŸ”“","ðŸ”","ðŸ”","ðŸ”‘","ðŸ”¨","â›ï¸","âš’ï¸","âš”ï¸","ðŸ”«","ðŸ”§","ðŸ”©","âš™ï¸","âš–ï¸","ðŸ”—","â›“ï¸","âš—ï¸","ðŸ”¬","ðŸ”­","ðŸ“¡","ðŸ’‰","ðŸ’Š","ðŸšª","ðŸš½","ðŸš¿","ðŸ›","ðŸš¬","âš°ï¸","âš±ï¸","ðŸ—¿"],Symbols:["ðŸ§","ðŸš®","ðŸš°","â™¿","ðŸš¹","ðŸšº","ðŸš»","ðŸš¼","ðŸš¾","ðŸ›‚","ðŸ›ƒ","ðŸ›„","ðŸ›…","âš ï¸","ðŸš¸","â›”","ðŸš«","ðŸš³","ðŸš­","ðŸš¯","ðŸš±","ðŸš·","ðŸ“µ","ðŸ”ž","â˜¢ï¸","â˜£ï¸","â¬†ï¸","â†—ï¸","âž¡ï¸","â†˜ï¸","â¬‡ï¸","â†™ï¸","â¬…ï¸","â†–ï¸","â†•ï¸","â†”ï¸","â†©ï¸","â†ªï¸","â¤´ï¸","â¤µï¸","ðŸ”ƒ","ðŸ”„","ðŸ”™","ðŸ”š","ðŸ”›","ðŸ”œ","ðŸ”","âš›ï¸","âœ¡ï¸","â˜¸ï¸","â˜¯ï¸","âœï¸","â˜¦ï¸","â˜ªï¸","â˜®ï¸","ðŸ”¯","â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™Ž","â™","â™","â™‘","â™’","â™“","â›Ž","ðŸ”€","ðŸ”","ðŸ”‚","â–¶ï¸","â©","â­ï¸","â¯ï¸","â—€ï¸","âª","â®ï¸","ðŸ”¼","â«","ðŸ”½","â¬","âï¸","ðŸŽ¦","ðŸ”…","ðŸ”†","ðŸ“¶","ðŸ“³","ðŸ“´","â™€ï¸","â™‚ï¸","âš•ï¸","â™¾ï¸","â™»ï¸","âšœï¸","ðŸ”±","ðŸ“›","ðŸ”°","â­•","âœ…","â˜‘ï¸","âœ”ï¸","âœ–ï¸","âŒ","âŽ","âž•","âž–","âž—","âž°","âž¿","ã€½ï¸","âœ³ï¸","âœ´ï¸","â‡ï¸","â€¼ï¸","â‰ï¸","â“","â”","â•","â—","ã€°ï¸","Â©ï¸","Â®ï¸","â„¢ï¸","#ï¸âƒ£","*ï¸âƒ£","0ï¸âƒ£","1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£","9ï¸âƒ£","ðŸ”Ÿ","ðŸ” ","ðŸ”¡","ðŸ”¢","ðŸ”£","ðŸ”¤","ðŸ…°ï¸","ðŸ†Ž","ðŸ…±ï¸","ðŸ†‘","ðŸ†’","ðŸ†“","â„¹ï¸","ðŸ†”","â“‚ï¸","ðŸ†•","ðŸ†–","ðŸ…¾ï¸","ðŸ†—","ðŸ…¿ï¸","ðŸ†˜","ðŸ†™","ðŸ†š","ðŸˆ","ðŸˆ‚ï¸","ðŸˆ·ï¸","ðŸˆ¶","ðŸˆ¯","ðŸ‰","ðŸˆ¹","ðŸˆš","ðŸˆ²","ðŸ‰‘","ðŸˆ¸","ðŸˆ´","ðŸˆ³","ãŠ—ï¸","ãŠ™ï¸","ðŸˆº","ðŸˆµ","ðŸ”´","ðŸ”µ","âš«","âšª","â¬›","â¬œ","â—¼ï¸","â—»ï¸","â—¾","â—½","â–ªï¸","â–«ï¸","ðŸ”¶","ðŸ”·","ðŸ”¸","ðŸ”¹","ðŸ”º","ðŸ”»","ðŸ’ ","ðŸ”˜","ðŸ”³","ðŸ”²"],Flags:["ðŸ","ðŸš©","ðŸŽŒ","ðŸ‡¦ðŸ‡¨","ðŸ‡¦ðŸ‡©","ðŸ‡¦ðŸ‡ª","ðŸ‡¦ðŸ‡«","ðŸ‡¦ðŸ‡¬","ðŸ‡¦ðŸ‡®","ðŸ‡¦ðŸ‡±","ðŸ‡¦ðŸ‡²","ðŸ‡¦ðŸ‡´","ðŸ‡¦ðŸ‡¶","ðŸ‡¦ðŸ‡·","ðŸ‡¦ðŸ‡¸","ðŸ‡¦ðŸ‡¹","ðŸ‡¦ðŸ‡º","ðŸ‡¦ðŸ‡¼","ðŸ‡¦ðŸ‡½","ðŸ‡¦ðŸ‡¿","ðŸ‡§ðŸ‡¦","ðŸ‡§ðŸ‡§","ðŸ‡§ðŸ‡©","ðŸ‡§ðŸ‡ª","ðŸ‡§ðŸ‡«","ðŸ‡§ðŸ‡¬","ðŸ‡§ðŸ‡­","ðŸ‡§ðŸ‡®","ðŸ‡§ðŸ‡¯","ðŸ‡§ðŸ‡±","ðŸ‡§ðŸ‡²","ðŸ‡§ðŸ‡³","ðŸ‡§ðŸ‡´","ðŸ‡§ðŸ‡¶","ðŸ‡§ðŸ‡·","ðŸ‡§ðŸ‡¸","ðŸ‡§ðŸ‡¹","ðŸ‡§ðŸ‡»","ðŸ‡§ðŸ‡¼","ðŸ‡§ðŸ‡¾","ðŸ‡§ðŸ‡¿","ðŸ‡¨ðŸ‡¦","ðŸ‡¨ðŸ‡¨","ðŸ‡¨ðŸ‡©","ðŸ‡¨ðŸ‡«","ðŸ‡¨ðŸ‡¬","ðŸ‡¨ðŸ‡­","ðŸ‡¨ðŸ‡®","ðŸ‡¨ðŸ‡°","ðŸ‡¨ðŸ‡±","ðŸ‡¨ðŸ‡²","ðŸ‡¨ðŸ‡³","ðŸ‡¨ðŸ‡´","ðŸ‡¨ðŸ‡µ","ðŸ‡¨ðŸ‡·","ðŸ‡¨ðŸ‡º","ðŸ‡¨ðŸ‡»","ðŸ‡¨ðŸ‡¼","ðŸ‡¨ðŸ‡½","ðŸ‡¨ðŸ‡¾","ðŸ‡¨ðŸ‡¿","ðŸ‡©ðŸ‡ª","ðŸ‡©ðŸ‡¬","ðŸ‡©ðŸ‡¯","ðŸ‡©ðŸ‡°","ðŸ‡©ðŸ‡²","ðŸ‡©ðŸ‡´","ðŸ‡©ðŸ‡¿","ðŸ‡ªðŸ‡¦","ðŸ‡ªðŸ‡¨","ðŸ‡ªðŸ‡ª","ðŸ‡ªðŸ‡¬","ðŸ‡ªðŸ‡­","ðŸ‡ªðŸ‡·","ðŸ‡ªðŸ‡¸","ðŸ‡ªðŸ‡¹","ðŸ‡ªðŸ‡º","ðŸ‡«ðŸ‡®","ðŸ‡«ðŸ‡¯","ðŸ‡«ðŸ‡°","ðŸ‡«ðŸ‡²","ðŸ‡«ðŸ‡´","ðŸ‡«ðŸ‡·","ðŸ‡¬ðŸ‡¦","ðŸ‡¬ðŸ‡§","ðŸ‡¬ðŸ‡©","ðŸ‡¬ðŸ‡ª","ðŸ‡¬ðŸ‡«","ðŸ‡¬ðŸ‡¬","ðŸ‡¬ðŸ‡­","ðŸ‡¬ðŸ‡®","ðŸ‡¬ðŸ‡±","ðŸ‡¬ðŸ‡²","ðŸ‡¬ðŸ‡³","ðŸ‡¬ðŸ‡µ","ðŸ‡¬ðŸ‡¶","ðŸ‡¬ðŸ‡·","ðŸ‡¬ðŸ‡¸","ðŸ‡¬ðŸ‡¹","ðŸ‡¬ðŸ‡º","ðŸ‡¬ðŸ‡¼","ðŸ‡¬ðŸ‡¾","ðŸ‡­ðŸ‡°","ðŸ‡­ðŸ‡²","ðŸ‡­ðŸ‡³","ðŸ‡­ðŸ‡·","ðŸ‡­ðŸ‡¹","ðŸ‡­ðŸ‡º","ðŸ‡®ðŸ‡¨","ðŸ‡®ðŸ‡©","ðŸ‡®ðŸ‡ª","ðŸ‡®ðŸ‡±","ðŸ‡®ðŸ‡²","ðŸ‡®ðŸ‡³","ðŸ‡®ðŸ‡´","ðŸ‡®ðŸ‡¶","ðŸ‡®ðŸ‡·","ðŸ‡®ðŸ‡¸","ðŸ‡®ðŸ‡¹","ðŸ‡¯ðŸ‡ª","ðŸ‡¯ðŸ‡²","ðŸ‡¯ðŸ‡´","ðŸ‡¯ðŸ‡µ","ðŸ‡°ðŸ‡ª","ðŸ‡°ðŸ‡¬","ðŸ‡°ðŸ‡­","ðŸ‡°ðŸ‡®","ðŸ‡°ðŸ‡²","ðŸ‡°ðŸ‡³","ðŸ‡°ðŸ‡µ","ðŸ‡°ðŸ‡·","ðŸ‡°ðŸ‡¼","ðŸ‡°ðŸ‡¾","ðŸ‡°ðŸ‡¿","ðŸ‡±ðŸ‡¦","ðŸ‡±ðŸ‡§","ðŸ‡±ðŸ‡¨","ðŸ‡±ðŸ‡®","ðŸ‡±ðŸ‡°","ðŸ‡±ðŸ‡·","ðŸ‡±ðŸ‡¸","ðŸ‡±ðŸ‡¹","ðŸ‡±ðŸ‡º","ðŸ‡±ðŸ‡»","ðŸ‡±ðŸ‡¾","ðŸ‡²ðŸ‡¦","ðŸ‡²ðŸ‡¨","ðŸ‡²ðŸ‡©","ðŸ‡²ðŸ‡ª","ðŸ‡²ðŸ‡«","ðŸ‡²ðŸ‡¬","ðŸ‡²ðŸ‡­","ðŸ‡²ðŸ‡°","ðŸ‡²ðŸ‡±","ðŸ‡²ðŸ‡²","ðŸ‡²ðŸ‡³","ðŸ‡²ðŸ‡´","ðŸ‡²ðŸ‡µ","ðŸ‡²ðŸ‡¶","ðŸ‡²ðŸ‡·","ðŸ‡²ðŸ‡¸","ðŸ‡²ðŸ‡¹","ðŸ‡²ðŸ‡º","ðŸ‡²ðŸ‡»","ðŸ‡²ðŸ‡¼","ðŸ‡²ðŸ‡½","ðŸ‡²ðŸ‡¾","ðŸ‡²ðŸ‡¿","ðŸ‡³ðŸ‡¦","ðŸ‡³ðŸ‡¨","ðŸ‡³ðŸ‡ª","ðŸ‡³ðŸ‡«","ðŸ‡³ðŸ‡¬","ðŸ‡³ðŸ‡®","ðŸ‡³ðŸ‡±","ðŸ‡³ðŸ‡´","ðŸ‡³ðŸ‡µ","ðŸ‡³ðŸ‡·","ðŸ‡³ðŸ‡º","ðŸ‡³ðŸ‡¿","ðŸ‡´ðŸ‡²","ðŸ‡µðŸ‡¦","ðŸ‡µðŸ‡ª","ðŸ‡µðŸ‡«","ðŸ‡µðŸ‡¬","ðŸ‡µðŸ‡­","ðŸ‡µðŸ‡°","ðŸ‡µðŸ‡±","ðŸ‡µðŸ‡²","ðŸ‡µðŸ‡³","ðŸ‡µðŸ‡·","ðŸ‡µðŸ‡¸","ðŸ‡µðŸ‡¹","ðŸ‡µðŸ‡¼","ðŸ‡µðŸ‡¾","ðŸ‡¶ðŸ‡¦","ðŸ‡·ðŸ‡ª","ðŸ‡·ðŸ‡´","ðŸ‡·ðŸ‡¸","ðŸ‡·ðŸ‡º","ðŸ‡·ðŸ‡¼","ðŸ‡¸ðŸ‡¦","ðŸ‡¸ðŸ‡§","ðŸ‡¸ðŸ‡¨","ðŸ‡¸ðŸ‡©","ðŸ‡¸ðŸ‡ª","ðŸ‡¸ðŸ‡¬","ðŸ‡¸ðŸ‡­","ðŸ‡¸ðŸ‡®","ðŸ‡¸ðŸ‡¯","ðŸ‡¸ðŸ‡°","ðŸ‡¸ðŸ‡±","ðŸ‡¸ðŸ‡²","ðŸ‡¸ðŸ‡³","ðŸ‡¸ðŸ‡´","ðŸ‡¸ðŸ‡·","ðŸ‡¸ðŸ‡¸","ðŸ‡¸ðŸ‡¹","ðŸ‡¸ðŸ‡»","ðŸ‡¸ðŸ‡½","ðŸ‡¸ðŸ‡¾","ðŸ‡¸ðŸ‡¿","ðŸ‡¹ðŸ‡¦","ðŸ‡¹ðŸ‡¨","ðŸ‡¹ðŸ‡©","ðŸ‡¹ðŸ‡«","ðŸ‡¹ðŸ‡¬","ðŸ‡¹ðŸ‡­","ðŸ‡¹ðŸ‡¯","ðŸ‡¹ðŸ‡°","ðŸ‡¹ðŸ‡±","ðŸ‡¹ðŸ‡²","ðŸ‡¹ðŸ‡³","ðŸ‡¹ðŸ‡´","ðŸ‡¹ðŸ‡·","ðŸ‡¹ðŸ‡¹","ðŸ‡¹ðŸ‡»","ðŸ‡¹ðŸ‡¼","ðŸ‡¹ðŸ‡¿","ðŸ‡ºðŸ‡¦","ðŸ‡ºðŸ‡¬","ðŸ‡ºðŸ‡²","ðŸ‡ºðŸ‡³","ðŸ‡ºðŸ‡¸","ðŸ‡ºðŸ‡¾","ðŸ‡ºðŸ‡¿","ðŸ‡»ðŸ‡¦","ðŸ‡»ðŸ‡¨","ðŸ‡»ðŸ‡ª","ðŸ‡»ðŸ‡¬","ððŸ‡»ðŸ‡º","ðŸ‡¼ðŸ‡«","ðŸ‡¼ðŸ‡¸","ðŸ‡½ðŸ‡°","ðŸ‡¾ðŸ‡ª","ðŸ‡¾ðŸ‡¹","ðŸ‡¿ðŸ‡¦","ðŸ‡¿ðŸ‡²","ðŸ‡¿ðŸ‡¼"]};var Zn=n(57658);const zn=["isOpen","onEmojiClick","suggestedEmojis","categoriesTitles","theme"],Fn=["Smileys & Emotion","People & Body","Animals & Nature","Food & Drink","Travel & Places","Activities","Objects","Symbols","Flags"],jn=(0,Zn.N)("emoji-picker"),Hn=e=>{let{onEmojiClick:t,suggestedEmojis:n,categoriesTitles:o,theme:i}=e;const s=(0,a.useCallback)((e=>()=>t(e)),[t]);return r().createElement("div",{className:jn("content")},n&&n.length?r().createElement("div",{className:jn("category-icons")},n.map(((e,n)=>r().createElement("div",{tabIndex:0,key:n,className:jn("icon",{theme:i}),onClick:()=>t(e),"aria-label":e},e)))):null,Object.keys(An).map((e=>{const t=An[e],n=(a=e,Fn.includes(a)&&o[e]);var a;return n?r().createElement("div",{key:e,className:jn("category")},r().createElement("div",{className:jn("category-title")},n),r().createElement("div",{className:jn("category-icons")},t.map(((t,n)=>r().createElement("div",{tabIndex:0,key:`${e}${n}`,className:jn("icon",{theme:i}),onClick:s(t),"aria-label":t},t))))):null})))},Wn=e=>{const{isOpen:t,onEmojiClick:n,suggestedEmojis:a,categoriesTitles:i,theme:s}=e,l=(0,o.Z)(e,zn);return r().createElement(Un.z,(0,Ae.Z)({isOpen:t,isWhiteBackground:!0,withCloseButton:!1,containerClassName:jn(),theme:s},l),r().createElement(Hn,{onEmojiClick:n,suggestedEmojis:a,categoriesTitles:i,theme:s}))},Vn=new(y())({id:"arrow_up_83ee--react",use:"arrow_up_83ee--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="arrow_up_83ee--react"><path fill="currentColor" d="M17.793 10.207a1 1 0 0 0 1.414-1.414l-6.494-6.494a.997.997 0 0 0-1.427 0L4.794 8.793a1 1 0 0 0 1.414 1.414L11 5.414V21a1 1 0 1 0 2 0V5.414l4.793 4.793Z" /></symbol>'});function $n(e){return _().add(Vn),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#arrow_up_83ee--react"}))}$n.displayName="SpriteSymbolComponent(arrow_up_83ee--react)";const qn=new(y())({id:"camera_11b3--react",use:"camera_11b3--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="camera_11b3--react"><path fill="currentColor" d="M10.51 3h2.98c.794 0 1.077.045 1.385.144.308.1.574.253.815.469.24.215.423.438.823 1.123L17.25 6h1.545c1.114 0 1.519.116 1.926.334.407.218.727.538.945.945.218.407.334.811.334 1.926v7.59c0 1.114-.116 1.519-.334 1.926a2.272 2.272 0 0 1-.945.945c-.407.218-.811.334-1.926.334H5.205c-1.115 0-1.519-.116-1.926-.334a2.272 2.272 0 0 1-.945-.945C2.116 18.314 2 17.91 2 16.795v-7.59c0-1.115.116-1.519.334-1.926.218-.407.538-.727.945-.945C3.686 6.116 4.09 6 5.205 6H6.75l.737-1.264c.4-.685.582-.908.823-1.123.24-.216.507-.37.815-.469C9.433 3.045 9.716 3 10.51 3Zm0 2c-.546 0-.664.013-.771.048a.222.22 0-.124.124.353.353 0 0 0-.049.134c-.03.155-.049.422-.049.849v7.59c0 .427.019.694.049.849.012.06.017.074.049.134a.275.275 0 0 0 .124.125c.06.031.073.036.134.048.155.03.422.049.849.049h13.59c.427 0 .694-.019.849-.049a.353.353 0 0 0 .134-.049.275.275 0 0 0 .125-.124.353.353 0 0 0 .048-.134c.03-.155.049-.422.049-.849v-7.59c0-.427-.019-.694-.049-.849a.353.353 0 0 0-.049-.134.275.275 0 0 0-.124-.124.353.353 0 0 0-.134-.049c-.155-.03-.422-.049-.849-.049H17.25a2 2 0 0 1-1.728-.992l-.737-1.264c-.275-.472-.346-.567-.43-.642a.222.222 0 0 0-.094-.054c-.107-.035-.225-.048-.77-.048H10.51ZM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" /></symbol>'});function Kn(e){return _().add(qn),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#camera_11b3--react"}))}Kn.displayName="SpriteSymbolComponent(camera_11b3--react)";const Gn=new(y())({id:"smile_1647--react",use:"smile_1647--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="smile_1647--react"><path fill="currentColor" d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10Zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm4.58-7.22a1 1 0 0 0-1.296.563C14.8 14.572 13.64 15.505 12 15.505s-2.798-.932-3.283-2.16a1 1 0 0 0-1.86.735c.766 1.94 2.612 3.425 5.143 3.425 2.533 0 4.38-1.487 5.145-3.428a1 1 0 0 0-.564-1.297Zm-1.33-2.03a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm-5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" /></symbol>'});function Qn(e){return _().add(Gn),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#smile_1647--react"}))}Qn.displayName="SpriteSymbolComponent(smile_1647--react)";const Jn="comment-controls__block-lM",Xn="comment-controls__rightButtons-1W",Yn="comment-controls__button-2n",eo="comment-controls__sendButton-3u",to="comment-controls__isMinified-2R",no=(0,a.memo)((e=>{let{isSendDisabled:t,onSend:n,isMinifiedInput:o=!1,isMediaAttachmentDisabled:i,onEmojiClick:s,onImageClick:l,isDisabled:c,isEditing:m,hasAttachment:d,isAttachmentNotReady:u,hasTextValue:p}=e;const h=(0,Dn.tD)(),{viewType:b}=X(),[C,v]=(0,a.useState)(!1),y=(0,a.useCallback)((()=>v((e=>!e))),[]),w=(0,a.useCallback)((e=>{s(e)}),[s]),_=(0,a.useRef)(null),E=(0,a.useCallback)((async()=>{v(!1),n()}),[n]),k=(0,R.bU)(),I=(0,:_n.ag.smileysEmotion(k),"People & Body":_n.ag.peopleBody(k).animalsNature(k),"Food & Drink":_n.ag.foodDrink(k),"Travel & Places":_n.ag.travelPlaces(k),Activities:_n.ag.activities(k),Objects:_n.ag.objects(k),Symbols:_n.ag.symbols(k),Flags:_n.ag.flags(k)})),[k]),x="compact"!==b||(p||d),S="video-chat"===b;return r().createElement("div",{className:g()(Jn,{[to]:o})},r().createElement("div",{className:Xn},r().createElement(f.z,{controlRef:_,className:Yn,leftContent:{type:"icon",Icon:Qn},isDisabled:c,onClick:y,variant:"ghost","aria-label":_n.ag.smileysEmotion(k)}),!i&&r().createElement(f.z,{className:g()(Yn),leftContent:{type:"icon",Icon:Kn},isDisabled:c||d,variant:"ghost",onClick:l,"aria-label":_n.ag.addMedia(k)}),x&&r().createElement(f.z,{className:g()(eo,Yn),isDisabled:t||c||d&&u,leftContent:{type:"icon",Icon:m?Fe.Z:$n},variant:"accentPrimary",onClick:E,"aria-label":_n.ag.sendComment(k),form:S?"standard":"rounded"})),r().createElement(Wn,{isOpen:C,targetElem:_.current,close:y,onEmojiClick:w,shouldCloseOnOuterClick:!0,shouldCloseOnEscClick:!0,shouldCloseOnScroll:!1,side:S?On.PR.bottom:On.PR.right,position:S?On.tc.right:On.tc.top,shifts:{y:0},categoriesTitles:I,theme:h}))}));var oo=n(41502);const ao=new(y())({id:"cross_circle_628c--react",use:"cross_circle_628c--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="cross_circle_628c--react"><path fill="currentColor" d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0ZM7.756 9.167a1 1 0 1 1 1.415-1.414L12 10.585l2.828-2.828a1 1 0 1 1 1.414 1.414L13.415 12l2.828 2.83a1 1 0 1 1-1.415 1.414L12 13.414l-2.83 2.83a1 1 0 0 1-1.414-1.414l2.83-2.83-2.83-2.833Z" /></symbol>'});function ro(e){return _().add(ao),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#cross_circle_628c--react"}))}ro.displayName="SpriteSymbolComponent(cross_circle_628c--react)";var io=n(36177);const so="upload-spin__back-1Z",lo="upload-spin__spin-3S",co=(0,a.memo)((e=>{let{cl},r().createElement("div",{className:;var mo=n(26645);const uo="comment-attachment-preview__block-1v",po="comment-attachment-preview__previewContainer-2k",ho="comment-attachment-preview__localPreview-e2",go="comment-attachment-preview__preview-2W",fo="comment-attachment-preview__remove-1U",bo="comment-attachment-preview__imageFade-3q",Co="comment-attachment-preview__isLoading--a",vo="comment-attachment-preview__spin-1k",yo="comment-attachment-preview__spinBlock-3F",wo="comment-attachment-preview__closeButton-37",_o=(0,a.memo)((e=>{let{attachmentState:t,file:n,onRemove:o}=e;const{status:i}=t,s=(e=>{const t=(0,a.useMemo)((()=>e&&URL.createObjectURL(e)||void 0),[e]);return(0,a.useEffect)((()=>()=>{t&&URL.revokeObjectURL(t)}),[t]),t})(n),l="done"===t.status?`url(${t.previewSrc})`:void 0,c=s?`url(${s})`:void 0;return r().createElement("div",{className:g()(uo,{[Co]:"done"!==i})},r().createElement("div",{className:po},r().createElement("div",{className:ho,style:{backgroundImage:c}}),r().createElement("div",{className:go,style:{backgroundImage:l}}),r().createElement("div",{className:bo})),r().createElement("div",{className:vo},r().createElement(co,{className:yo})),r().createElement("div",{className:fo},r().createElement(Dn.jG,{theme:io.Y8.light},r().createElement(f.z,{variant:"regular",size:"xs",form:"rounded",leftContent:{type:"icon",Icon:mo.Z},className:wo,onClick:o,"aria-label":"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ"}))))})),Eo="comment-textarea__block-2m",ko="comment-textarea__isMinified-2y",Io="comment-textarea__hasAttach-1J",xo="comment-textarea__fake-1X",So="comment-textarea__real-Em",Ro="comment-textarea__disabledInput-3d",Mo="comment-textarea__hasText-2M",No="comment-textarea__control-3O",To="comment-textarea__isReply-3N",Lo="comment-textarea__attachments-2H",Bo="comment-textarea__cancelButton-38",Po="comment-textarea__hasCancelButton-D5",Do="comment-textarea__chat-jI",Oo="comment-textarea__animatedBorder-k0",Uo="comment-textarea__wrapper-1G",Ao="comment-textarea__isInputBlocked-3l";var Zo=n(17999);const zo="only-for-subscribers-panel__wrap-3J",Fo="only-for-subscribers-panel__container-Or",jo="only-for-subscribers-panel__isMobile-2Q",Ho="only-for-subscribers-panel__square-30",Wo="only-for-subscribers-panel__description-10",Vo="only-for-subscribers-panel__cross-1Z",$o="only-for-subscribers-panel__wrapperHiddenisSubscriptionInProgress:n,onSubscribe:o,onHide:a}=e;const i="video-chat"===t,[s,l]=(0,d.zj)(!1);return r().createElement("div",{onTransitionEnd:a,className:g()(zo,r().createElement("div",{className:g()(Fo,{[Ho]:i,[jo]:!1}),onTransitionEnd:Zo.UW},r().createElement("div",{className:Wo},i&&r().createElement(f.z,{size:"s",variant:"ghostMedia",leftContent:{type:"icon",Icon:mo.Z},onClick:l,className:Vo}),r().createElement(_n.oc.onlySubsCan),r().createElement(f.z,{variant:"primary",isLoading:n,onClick:o},r().createElement(_n.oc.subscribe,null))))})),Ko={forceIsSubscribedToChannel:void 0},Go=r().createContext(Ko),Qo=e=>{let{forceIsSubscribedToChannel:t,children:n}=e;const o=(0,a.useMemo)((()=>({forceIsSubscribedToChannel:t})),[t]);return r().createElement(Go.Provider,{value:o},n)},Jo=()=>(0,a.useContext)(Go),Xo=e=>{let{children:t,onClick:n,className:o}=e;return r().createElement("div",{onClick:n,className:o},t)},Yo=e=>{let{value:t,onChange:n,onSend:o,onImageClick:i,isDisabled:l,maxCommentLength:u,isRoot:p=!1,isMain:h=!1,attachmentState:b,file:C,onRemove:v,onCancel:y,autoFocus:w,onFocus:_,onBlur:E,isMediaAttachmentDisabled:k,readOnly:I=!1}=e;const x=(0,R.bU)(),{onFocusChange:S,viewType:M,statsLogger:N,inputPublicApiRef:T,isSubscriptionInProgress:L,onSubscribe:B}=X(),{currentUser:P}=oe(),{showSnackbar:D}=(0,s.D)(),O=(0,m.Z)({onChange:n,statsLogger:N,maxCommentLength:u,value:t,showS((()=>{if(!w)return;const e=H.current;e&&e.value.length&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))}));const q=(0,a.useCallback)((e=>{var t;let{target:o}=e;n(null!=(t=o.value)?t:"")}),[n]),K=(0,a.useCallback)((e=>{const{onChange:t,statsLogger:n,maxCommentLength:o,value:a,showSnackbar:i}=O.current,s=a+e;o>s.length?t(s):i(Object.assign({id:"exceededMaxCharacters",title:r().createElement(_n.oc.exceededMaxCharacters,null)},Ye)),n.push("comments:emoji_click",{data:{emoji:e}})}),[O]),G=Boolean(t),Q=Boolean(b),J=h&&(!G||t.length<11)&&!b&&!y&&!t.includes("\n"),Y="video-chat"===M,ee=["compact","video-chat"].includes(M)?_n.ag.addCommentCompact(x):_n.ag.addComment(x),te=p?ee:_n.ag.yourReply(x),ne=A||j||I||l||Boolean(!t.trim()&&!b),ae=(0,a.useCallback)((e=>{let{metaKey:t,ctrlKey:n,key:a}=e;ne||"Enter"===a&&(n||t)&&o()}),[o,ne]);(0,a.useImperatin null==(e=H.current)?void 0:e.focus()}})),[]);const re=Y?ea:r().Fragment,ie=()=>{var e;Y&&(null==(e=H.current)||e.focus())},se=g()(Eo,{[Mo]:G,[Io]:Q,[Po]:Boolean(y),[ko]:A||j||J,[Do]:Y,[Ao]:Z||j});return j?r().createElement(Xo,{className:se,onClick:ie},r().createElement("div",{className:g()(Ro,{[To]:!p})},r().createElement(_n.oc.restrictedCommentCreation,null))):Z?r().createElement(Xo,{className:se,onClick:ie},r().createElement(qo,{viewType:M,isSubscriptionInProgress:Boolean(L),onSubscribe:B,onHide:F})):r().createElement(Xo,{className:se,onClick:ie},r().createElement(re,null,r().createElement("div",{className:xo},t,"â "),r().createElement("textarea",{maxLength:u,ref:H,className:So,disabled:l,onChange:q,value:t,"aria-label":_n.ag.commentField(x),placeholder:te,autoFocus:w,onFocus:V,onBlur:$,readOnly:I,onKeyDown:ae}),Y&&r().createElement("div",{className:Oo}),r().createElement("div",{ref:W,className:No},r().createElement(no,{isMinifiedInput:J,isSendDisabled:ne,onEmojiClick:K,onImageClick:i,onSend:o,isDisabled:l||I||A,isEditing:Boolean(y),hasAttachment:Q,isAttachmentNotReady:Boolean(b&&"done"!==b.status),hasTextValue:G,isMediaAttachmentDisabled:k})),b&&r().createElement("div",{className:Lo},r().createElement(_o,{attachmentState:b,file:C,onRemove:v})),y&&r().createElement(f.z,{className:Bo,leftContent:{type:"icon",Icon:ro},isDisabled:l,onClick:y,variant:"ghost"})))},ea=e=>{let{children:t}=e;return r().createElement("div",{className:Uo},t)},ta="comment-input__block-3B",na="comment-input__isNotVideoChat-2r",oa="comment-input__isMain-14",aa="comment-input__loginPrompt-1J",ra="comment-input__commentLink-31";var ia=n(65382),sa=n(81262),la=n(25476),ca=n(51490);const ma=async(e,t)=>{let{csrfToken:n,rid:o,documentId:a,deviceId:r,flightId:i,sessionTs:s,publicationPublisherId:l}=t;const c=new FormData;c.append("image",e);const m=await((e,t)=>{let{headersData:n,body:o,params:a,rid:r}=t;const i=it(n);return(0,M.XV)(`/api/comments/v2/${e}`,{body:o,params:Object.assign({},a,{rid:r}),headers:i}).then(st)})("upload-image",{headersData:{csrfToken:n},rid:o,params:{documentId:a,deviceId:r,flightId:i,sessionTs:s,publicationPublisherId:l,clientTs:Date.now()},body:c});return(0,ia.Hj)(le.UI.parser,m,"uploadImageRequest",(e=>{kn.kg.error(e)}))},da=e=>{const[t,n]=(0,a.useState)(void 0),o=(0,a.useRef)(void 0),[r,i]=(0,a.useState)(e?{status:"done",id:e.image.id,previewSrc:(0,sa.o4)(e.image,"upload-preview")}:void 0);(0,ca.Z)((()=>null==o.current?void 0:o.current()));const s=(0,a.useCallback)(((e,t)=>{null==o.current||o.current(),n(e),(e=>{let{file:t,uploadImageParams:n,setAttachmentState:o,onCancelUpload:a}=e,r=!1;a.current=()=>{r=!0},o({status:"loading"});const i=async()=>{try{const e=await ma(t,n);if(r)return;const a=(0,sa.o4)(e,"upload-preview");o({status:"done",id:e.id,previewSrc:a})}catch(e){if(r)return;kn.kg.error("useUploadCommentImage: image upload failed"),o({status:"error"}),(0,la.D)(5e3).then((()=>{r||i()}))}};i()})({file:e,uploadImageParams:t,setAttachmentState:i,onCancelUpload:o})}),[]);return{uploadImage:s,onRemoveAttachment:(0,a.useCallback)((()=>{null==o.current||o.current(),i(void 0)}),[o]),attachmentState:r,file:t}},ua=e=>{var t,n;let{onSave:o,onCancel:i,initialText:s,initialMediaItem:l,isDisabled:c,documentId:d,autoFocus:u,inputImperativeHandleRef:p,isRoot:h=!1,isMain:f=!1}=e;const b=(0,wt.Z)(),[C,v]=(0,a.useState)(!0),{configMemoRef:y,paramsMemoRef:w,publicationPublisherId:_,viewType:E}=X(),k=(null==(t=y.current)?void 0:t.maxCommentLength)||2500,[I,x]=(0,a.useState)(s||""),{showLoginModal:S,shouldShowLoginModal:R}=Mt(),{onRemoveAttachment:M,uploadImage:N,attachmentState:T,file:L}=da(l),B=(0,m.Z)({isLoginModalAllowed:C,text:I,attachmentState:T}),P=u&&!R,D=(0,a.useCallback)((()=>{const{text:e,attachmentState:t}=B.current;o(e,"done"===(null==t?void 0:t.status)?[t.id]:[])}),[o,B]),O=(null==(n=y.current)?void 0:n.attachmentMimeTypes)||[],U=((e,t)=>{const n=(0,a.useRef)();(0,a.useEffect)((()=>{n.current=document.createElement("input"),n.current.setAttribute("type","file")}),[]);const o=e.join(",");(0,a.useEffect)((()=>{n.current&&n.current.setAttribute("accept",o)}),[o]);const r=(0,a.useCallback)((e=>{if(!e||!e.length)return;const n=e[0];t(n)}),[t]);return(0,a.useEffect)((()=>{const e=n.current;if(!e)return;const t=()=>{r(e.files)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}),[r]),(0,a.useCallback)((()=>{const e=n.current;e&&(e.value="",e.click())}),[])})(O,(e=>{const{csrfToken:t,rid:n,sessionTs:o,deviceId:a,flightId:r}=w.current;N(e,{csrfToken:t,rid:n,sessionTs:o,publicationPublisherId:_,documentId:d,deviceId:a,flightId:r})})),A=(0,a.useCallback)((e=>{B.current.isLoginModalAllowed&&(S(),v(!1),R&&e.target.blur())}),[S,B,v,R]),Z=(0,a.useCallback)((()=>v(!0)),[v]);return(0,a.useImperativeHandle)(p,(()=>({clearInput:()=>{b()&&(x(""),M())}})),[b,M]),r().createElement("div",{className:g()(ta,{[oa]:f&&"video-chat"!==E,[na]:"video-chat"!==E})},r().createElement(Yo,{maxCommentLength:k,isRoot:h,isMain:f,onImageClick:U,value:I,onChange:x,onSend:D,isDisabled:c,attachmentState:T,file:L,onRemove:M,documentId:d,autoFocus:P,onCancel:i,onFocus:A,onBlur:Z,readOnly:R,isMediaAttachmentDisabled:!O.length}),R&&"video-chat"!==E&&r().createElement("div",{className:g()(aa)},r().createElement("span",{className:g()(ra),onClick:()=>{B.current.isLoginModalAllowed&&S()},"data-testid":"comments-auth-entry"},r().createElement(_n.oc.login,null)),", ",r().createElement(_n.oc.toComment,null)))},pa=(0,a.memo)((e=>{let{setCreatedRootComments:t}=e;const n=(0,wt.Z)(),{documentId:o}=X(),i=oe(),{isShowingLoader:l,isLoadInProgressRef:c,stopShowingLoader:d,showLoader:u}=yn(),p=(0,a.useRef)(),{showCaptchaModal:h}=$(),g=Pn({shouldMergeResponse:!1}),f=(0,R.bU)(),{showSnackbar:b}=(0,s.D)(),C=(0,m.Z)({showLoader:u,isLoadInProgressRef:c,createCommentRequest:g,lang:f,mutableData:i,stopShowingLoader:d,isMounted:n,showSnackbar:b,setCreatedRootComments:t,showCaptchaModal:h}),v=(0,a.useCallback)((async(e,t)=>{const{showLoader:n,isLoadInProgressRef:o,createCommentRequest:a,stopShowingLoader:i,isMounted:s,setCreatedRootComments:l,showSnackbar:c,showCaptchaModal:m}=C.current;if(!o.current){n();try{var d;const n=V({showCaptchaModal:m,makeRequest:n=>a(Object.assign({text:e,attachments:t},n))}),o=await n();if(null==(d=p.current)||d.clearInput(),await i(),!o||!s())return;const[r]=o.items;s()&&l((e=>[r].concat((0,K.Z)(e)))),(0,ie.runInAction)((()=>{const{mutableData:e}=C.current;e.meta.totalCommentsCount+=1}))}catch(e){kn.kg.error(e),c(Object.assign({id:"commentCreateFail",title:r().createElement(_n.oc.commentCreateFail,null)},Ye))}finally{await i()}}}),[C]);return r().createElement(ua,{documentId:o,isRoot:!0,isMain:!0,autoFocus:!1,onSave:v,isDisabled:l,inputImperativeHandleRef:p})}));var ha=n(84094),ga=n(98680),fa=n(87700),ba=n(23088);const Ca=(0,re.P)({name:"editCommentEndpoint",params:ae.intersection(De,ae.object({commentId:ae.number()})),res:Le,req:e=>{let{commentId:t,csrfToken:n,rid:o,clid:a,partner:r,integration:i,product:s,place:l,publisherByChannel:c,documentId:m,publicationPublisherId:d,text:u,imageIds:p,lang:h,sessionTs:g,flightId:f,deviceId:b}=e;return mt(`edit-comment/${t}`,{rid:o,headersData:{csrfToken:n,clid:a,partner:r,integration:i,product:s,place:l},body:{publisherByChannel:c,documentId:m,publicationPublisherId:d,text:u,imageIds:p,lang:h,sessionTs:g,flightId:f,deviceId:b,clientTs:Date.now()}})}}),va=ae.intersection(Pe,ae.object({commentId:ae.number(),documentId:ae.string(),publicationPublisherId:ae.string(),sessionTs:ae.maybe(ae.number()),flightId:ae.maybe(ae.string()),deviceId:ae.maybe(ae.string())})),ya=(0,re.P)({name:"deleteCommentEndpoint",params:va,res:Le,req:e=>{let{commentId:t,csrfToken:n,rid:o,clid:a,partner:r,integration:i,product:s,place:l,documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p}=e;return mt(`delete-comment/${t}`,{rid:o,headersData:{csrfToken:n,clid:a,partner:r,integration:i,product:s,place:l},body:{documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p,clientTs:Date.now()}})}}),wa=(0,re.P)({name:"restoreCommentEndpoint",params:va,res:Le,req:e=>{let{commentId:t,csrfToken:n,rid:o,clid:a,partner:r,integration:i,product:s,place:l,documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p}=e;return mt(`restore-comment/${t}`,{rid:o,headersData:{csrfToken:n,clid:a,partner:r,integration:i,product:s,place:l},body:{documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p,clientTs:Date.now()}})}}),_a=new(y())({id:"pin_filled_c82a--react",use:"pin_filled_c82a--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="pin_filled_c82a--react"><path fill="currentColor" fill-rule="evenodd" d="M15.15 3.78a1.05 1.05 0 0 0-1.563.086L9.453 9.041l-4.559.917a1.05 1.05 0 0 0-.535 1.772l3.227 3.227-4.293 4.293a1 1 0 1 0 1.414 1.415L9 16.372l3.227 3.226a1.05 1.05 0 0 0 1.771-.535l.921-4.576 5.041-4.294a1.05 1.05 0 0 0 .062-1.542L15.15 3.779Z" clip-rule="evenodd" /></symbol>'});function Ea(e){return _().add(_a),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#pin_filled_c82a--react"}))}Ea.displayName="SpriteSymbolComponent(pin_filled_c82a--react)";const ka=new(y())({id:"pencpencil_filled_64bb--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="pencil_filled_64bb--react"><path fill="currentColor" d="m3.99 16.854-1.314 3.504a.75.75 0 0 0 .966.965l3.503-1.314a3 3 0 0 0 1.068-.687L18.36 9.175s-.353-1.061-1.414-2.122c-1.06-1.06-2.121-1.414-2.121-1 1.068Zm12.249-12.63 1.384-1.383c.248-.248.578-.406.924-.348.487.08 1.232.322 1.935 1.025.702.703.944 1.447 1.025 1.934.057.346-.1.677-.349.925L19.774 7.76s-.353-1.06-1.414-2.12c-1.06-1.063-2.12-1.416-2.12-1.416Z" /></symbol>'});function Ia(e){return _().add(ka),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#pencil_filled_64bb--react"}))}Ia.displayName="SpriteSymbolComponent(pencil_filled_64bb--react)";const xa={commentImage:{en:"Comment image",ru:"ÐšÐ°Ñ€Ñ‚Ð¸Ð½Ð½Ñ‚Ð°Ñ€Ð¸Ñ",_context:""},commentDeleted:{en:"Comment was deleted",ru:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ ÑƒÐ´Ð°Ð»ÐµÐ½",_context:""},moreText:{en:"more",ru:"ÐµÑ‰Ðµ",_context:""},commentHidden:{en:"Comment hidden.",ru:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ ÑÐºÑ€Ñ‹Ñ‚.",_context:""},reply:{en:"Reply",ru:"ÐžÑ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ",_context:""},show:{en:"Show",ru:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ",_context:""},restore:{en:"Restore",ru:"Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ",_context:""},likesCount:{en:"Likes count",ru:"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð»Ð°Ð¹ÐºÐ¾Ð²",_context:""},pinnedComment:{en:"Pinned comment",ru:"Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹",_context:""},pinned:{en:"Pinned",ru:"Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¾",_context:""},likedByAuthor:{en:"Liked by author",ru:"ÐŸÐ¾Ð½Ñ€Ð°Ð²Ð¸Ð»Ð¾ÑÑŒ Ð°Ð²Ñ‚Ð¾Ñ€Ñƒ",_context:""},edited:{en:"Edited",ru:"Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¾",_context:""},blockedUser:{en:"Blocked user",ru:"Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",_context:""}},Sa=(0,R.Wh)(xa),Ra=(0,R.bN)(xa);var Ma=n(59346),Na=n(79133),Ta=n(4538),La=n(65927);const Ba=function(e,t){void 0===t&&(t="ru");try{return e.toLocaleString(t,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})}catch(t){return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()} ${e.getHours()}:${e.getHours()}`}},Pa="common-date__greyText-3r",Da="common-date__date-vU",Oa=(0,a.memo)((e=>{let{timestamp:t,className:n}=e;const o=(0,R.bU)();return r().createElement(Na.x,{as:"div",typography:Ke,title:Ba(new Date(t),o),className:g()(Da,n)},r().createElement("span",{className:Pa},(0,La.sS)(t)))})),Ua="comment-header__block-2M",Aa="comment-header__desktop-3M",Za="comment-header__preview-5r",za="comment-header__additionalText-3H",Fa="comment-header__item-1O",ja="comment-header__pinIcon-oj",Ha="comment-header__leftRow-1o",Wa="comment-header__rightRow-nX",Va="comment-header__compact-1Z",$a="comment-header__avatar-2c",qa="comment-header__nameLink-3-",Ka="comment-header__clickable-3R",Ga="comment-header__text-3n",Qa="comment-header__name-16",Ja="comment-header__isPublicationAuthor-1I",Xa="comment-header__menuButton-2E",Ya="comment-header__greyedOut-3q",er=(0,a.memo)((e=>{var t,n,o,a,i;let{isPreview:s,maybeCommentMenu:l,maybePin:m,onCommentAuthorClick:d,comment:u,maybeEditedIcon:p,isCommentAuthorClickEnabled:h=!0}=e;const{viewType:f}=X(),b=(0,R.bU)(),C=(0,c.fz)(Ee,{uid:u.authorUid});if(!C)return kn.kg.error(`CommentHeaderPartial: no author was found for commentId ${u.id} and comment.authorUid ${u.authorUid}`),null;const v=Boolean(C.bannedTs),y=(null==(t=C.publisher)?void 0:t.isVerified)&&r().createElement(Ta.$,{className:Fa,size:12,withTooltip:!0});return r().createElement("div",{className:g()(Ua,{[Aa]:!0,[Za]:s})},r().createElement("div",{className:Ha},r().createElement(Ma.r,{href:null!=(n=null==(o=C.publisher)?void 0:o.channelPath)?n:`/user/${C.publicId}`,target:"_blank",rel:"noopener noreferrer",className:g()(qa,Ga,{[Ka]:h}),onClick:d},r().createElement("span",{title:Ra.likedByAuthor(b),className:$a,style:{backgroundImage:tt(C)}}),r().createElement(Na.x,{className:g()(Ga,Qa,{[Ya]:v,[Ja]:"owner"===C.publicationChannelRole}),maxLines:1,title:v?Ra.blockedUser(b):void 0,typography:qe},null!=(a=null==(i=C.publisher)?void 0:i.name)?a:C.displayName)),y,r().createElement(Oa,{className:Fa,timestamp:u.createdTs}),p),(m||l)&&r().createElement("div",{className:g()(Wa,{[Va]:"compact"===f})},m,l))})),tr=new(y())({id:"check_f782--react",use:"check_f782--react-usage",viewBox:"0 0 32 32",content:'<symbol viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" id="check_f782--react"><path d="m7 17 5.965 5.965c.02.02.05.02.07 0L26 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" /></symbol>'});function nr(e){return _().add(tr),r().createElement({viewBox:"0 0 32 32"},e),r().createElement("use",{xlinkHref:"#check_f782--react"}))}nr.displayName="SpriteSymbolComponent(check_f782--react)";var or=n(99431);const ar=(0,or.cn)("Menu"),rr=(0,a.memo)((e=>{let{needIconGlyph:t=!0,checked:n=!0,disabled:o=!1,type:i="menuitem",className:s,onKeyDown:l,tabIndex:c,children:m,onClick:d,title:u,item:p,"aria-label":h}=e;const g=(0,a.useCallback)((e=>d(e,p)),[p,d]);return r().createElement("li",{id:p.id,title:u,tabIndex:c,onClick:o?void 0:g,onKeyDown:(0,a.useCallback)((e=>l(e,p)),[p,l]),className:ar("Item",{checked:n,disabled:o,type:i,"no-padding":p.noPadding},[s]),"aria-selected":n,"aria-disabled":o,"aria-label":h},m,t&&n?r().createElement(nr,{className:"CheckMark"}):null)}));var ir=n(57446);const sr=(0,ir.cnMenu)("Item"),lr=(0,ir.cnMenu)("Group"),cr=(0,ir.cnMenu)("ItemInteractive"),mr=e=>e.className.includes(sr),dr=e=>e.className.includes(lr),ur=e=>{var t;const n=null==(t=e.parentNode)?void 0:t.parentNode;return n&&dr(n)?n:null},pr=e=>{var t;return"true"===(null==(t=e.attributes.getNamedItem("aria-disabled"))?void 0:t.value)};let hr=0;class gr extends a.PureComponent{constructor(){return super(...arguments),this.lastFocusedElement=null,this.idsMap=new WeakMap,this.handleMenuBlur=e=>{e.currentTarget.tabIndex=0},this.handleMenuFocus=e=>{var t,n;e.currentTarget.tabIndex=-1,e.currentTarget===e.target&&(null!=(t=this.lastFocusedElement)&&t.isConnected||(this.lastFocusedElement=(e=>{var t;const n=e.querySelector(`.${sr}[aria-disabled=false]`);return null!=(t=null==n?void 0:n.querySelector(`.${cr}`))?t:n})(e.currentTarget)),null==(n=this.lastFocusedElement)||n.focus())},this.handleClick=(e,t)=>{null==t.onClick||t.onClick(e);const{value:n,onChange:o}=this.props;if(o){let e;e=Array.isArray(n)?n.includes(t.value)?n.filter((e=>e!==t.value)):n.concat(t.value):t.value,o({target:{value:e}})}},this.handleKeyDown=(e,t)=>{if(!e.shiftKey)switch(e.key){case"ArrowUp":{e.preventDefault();const t=(e=>{var t,n;let o=e;do{var a;dr(o)&&o.children.length>0?o=o.lastChild:(o.previousSibling||(o=ur(o)),o=null==(a=o)?void 0:a.previousSibling)}while(o&&(!mr(o)||pr(o)));return null!=(t=null==(n=o)?void 0:n.querySelector(`.${cr}`))?t:o})(e.currentTarget);t&&(this.lastFocusedElement=t,t.focus());break}case"ArrowDown":{e.preventDefault();const t=(e=>{var t,n;let o=e;do{var a;dr(o)&&o.children.length>0?o=o.firstChild:(o.nextSibling||(o=ur(o)),o=null==(a=o)?void 0:a.nextSibling)}while(o&&(!mr(o)||pr(o)));return null!=(t=null==(n=o)?void 0:n.querySelector(`.${cr}`))?t:o})(e.currentTarget);t&&(this.lastFocusedElement=t,t.focus());break}case"Enter":case"Space":this.handleClick(e,t)}},this.renderItem=(e,t)=>this.props.renderItem?this.props.renderItem(e,t):r().createElement(t,e),this.renderItems=e=>{const{value:t}=this.props;return e.map((e=>{if("items"in e)return r().createElement("li",{key:this.getKey(e),title:e.title,className:ar("Group")},r().createElement("ul",{className:ar("GroupList")},this.renderItems(e.items)));const{title:n,content:o,disabled:i,value:s,type:l,ariaLabel:c}=e,m=Array.isArray(t)?t.includes(s):t===s;return r().createElement(a.Fragment,{key:this.getKey(e)},this.renderItem({"aria-label":c,item:e,title:n,disabled:i,type:l,tabIndex:-1,needIconGlyph:m,onKeyDown:this.handleKeyDown,onClick:this.handleClick,checked:m,children:o},rr))}))},this}getKey(e){var t;let n=null!=(t="id"in e&&e.id)?t:this.idsMap.get(e);return n||(hr=(hr+1)%1e8,n=`menu-item-${hr}`,this.idsMap.set(e,n)),n}render(){const{disabled:e,value:t,items:n,className:o,size:a,isShadowBoxDisabled:i,withFeedbackMenuStyles:s}=this.props,l=Array.isArray(t);return r().createElement("ul",{role:void 0!==t?"listbox":void 0,"area-disabled":e,"aria-multiselectable":l,className:ar({view:"default",isShadowBoxDisabled:i,withFeedbackMenuStyles:s,size:a||"m"},[o]),onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,tabIndex:0},this.renderItems(n))}}n(95387);var fr=n(21557);const br=ae.intersection(Pe,ae.object({uid:ae.string(),documentId:ae.string(),publicationPublisherId:ae.string(),sessionTs:ae.maybe(ae.number()),flightId:ae.maybe(ae.string()),deviceId:ae.maybe(ae.string())})),Cr=(0,re.P)({name:"banCommentUserEndpoint",params:ae.intersection(br,ae.object({shouldDeleteAllComments:ae.maybe(ae.boolean())})),res:Re,req:e=>{let{uid:t,csrfToken:n,rid:o,clid:a,partner:r,integration:i,product:s,place:l,documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p,shouldDeleteAllComments:h}=e;return mt(`ban-user/${t}`,{rid:o,headersData:{csrfToken:n,clid:a,partner:r,integration:i,product:s,place:l},body:{documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p,shouldDeleteAllComments:h,clientTs:Date.now()}})}}),vr=(0,re.P)({name:"unbanCommentUser",params:br,res:Re,req:e=>{let{uid:t,csrfToken:n,rid:o,clid:a,partner:r,integration:i,product:s,place:l,documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p}=e;return mt(`unban-user/${t}`,{rid:o,headersData:{csrfToken:n,clid:a,partner:r,integration:i,product:s,place:l},body:{documentId:c,publicationPublisherId:m,sessionTs:d,flightId:u,deviceId:p,clientTs:Date.now()}})}}),yr="confirm-ban-user__block-28",wr="confirm-ban-user__mobile-2Z",_r="confirm-ban-user__banModalItem-3Q",Er="confirm-ban-user__deleteCommentsField-3G",kr="confirm-ban-user__deleteAllMsg-35",Ir="confirm-ban-user__banModalFooter-19",xr="confirm-ban-user__btn-zg",Sr="confirm-ban-user__greyText-3d",Rr=e=>{let{commentId:t,onBanComplete:n}=e;const o=!1,{showSnackbar:i}=(0,s.D)(),[l,d]=(0,a.useState)(!1),u=(0,a.useCallback)((()=>d((e=>!e))),[]),p=(e=>{const t=(0,c.JN)(),{paramsMemoRef:n,publicationPublisherId:o,documentId:r}=X(),i=oe(),s=(0,c.JC)(Cr),l=t.getInstance(Ie,{id:e}),d=null==l?void 0:l.authorUid,u=d?t.getInstance(Ee,{uid:d}):void 0,p=null==u?void 0:u.uidSafe,h=(0,m.Z)({banUserRequest:s,zest:t,uid:d,uidSafe:p,commentId:e,publicationPublisherId:o,documentId:r,mutableData:i});return(0,a.useCallback)((async e=>{const{banUserRequest:t,zest:o,uid:a,uidSafe:r,commentId:i,publicationPublisherId:s,documentId:l}=h.current;if(!a)return void kn.kg.error(`useBanCommentUser: no comment or authorUid found for ${i}`);const{serverTs:c}=await t(Object.assign({},n.current,{publicationPublisherId:s,documentId:l,uid:r||String(a),shouldDeleteAllComments:e})),{mutableData:m}=h.current;e&&m.items.forEach((e:n}=e;if("comment"!==t)return;const r=o.getInstance(ke,{commentId:i});r&&n.authorUid===a&&(r.state=he.deleted)}));const d=o.getInstance(Ee,{uid:a});d?d.bannedTs=c:kn.kg.error(`useBanCommentUser: no author found for ${a} and commentId ${i}`)}),[h,n])})(t),{isShowingLoader:h,isLoadInProgressRef:b,stopShowingLoader:C,showLoader:v}=yn(),y=(0,m.Z)({shouldDeleteAllComments:l,showSnackbar:i,stopShowingLoader:C,showLoader:v,onBanComplete:n,banCommentUser:p}),w=(0,a.useCallback)((async()=>{if(b.current)return;const{shouldDeleteAllComments:e,stopShowingLoader:t,showLoader:n,showSnackbar:o,onBanComplete:a,banCommentUser:i}=y.current;n();try{await i(e),a()}catch(e){kn.kg.error(e),o(Object.assign({id:"failedToBlockUser",title:r().createElement(_n.oc.failedToBlockUser,null)},Ye))}finally{await t()}}),[y,b]);return r().createElement("div",{className:g()(yr,{[wr]:o})},r().createElement(Na.x,{as:"div",weight:"bold",typography:"headline-18-22",align:"start"},r().createElement(_n.oc.blockUserTitle,null),"?"),r().createElement(Na.x,{as:"div",typography:"text-16-20",className:g()(_r,{[wr]:o})},r().createElement(_n.oc.blockUserDescription,null)),r().createElement("div",{className:g()(_r,Er,{[wr]:o})},r().createElement(fr.X,{checked:l,onChange:u}),r().createElement("div",{className:g()(kr,{[wr]:o})},r().createElement(Na.x,{as:"div",typography:"text-16-20"},r().createElement(_n.oc.withCommentsDeleteTitle,null)),r().createElement(Na.x,{as:"div",typography:"text-13-16"},r().createElement("span",{className:Sr},r().createElement(_n.oc.withCommentsDeleteMsg,null))))),r().createElement("div",{className:g()(Ir,{[wr]:o})},r().createElement(f.z,{className:xr,onClick:n,variant:"secondary",size:"xl"},r().createElement(_n.oc.cancel,null)),r().createElement(f.z,{className:xr,onClick:w,size:"xl",variant:"primary",isLoading:h},r().createElement(Na.x,{color:void 0},r().createElement(_n.oc.block,null)))))},Mr=(0,re.P)({name:"reactToCommentEndpoint",params:ae.intersection(Pe,ae.object({commentId:ae.number(),documentId:ae.string(),publicationPublisherId:ae.string(),reaction:ye,flightId:ae.maybe(ae.string()),deviceId:ae.maybe(ae.string())})),res:Re,req:e=>{let{commentId:t,csrfToken:n,rid:o,clid:a,partner:r,integration:i,product:s,place:l,documentId:c,publicationPublisherId:m,reaction:d,flightId:u,deviceId:p}=e;return mt(`react-to-comment/${t}`,{rid:o,headersData:{csrfToken:n,clid:a,partner:r,integration:i,product:s,place:l},body:{documentId:c,publicationPublisherId:m,reaction:d,flightId:u,deviceId:p,clientTs:Date.now()}})}}),Nr=function(e,t,n){void 0===n&&(n=!0);const o=(0,c.JN)(),{showSnackbar:i}=(0,s.D)(),{paramsMemoRef:l,publicationPublisherId:d,publicationChannelOwnerUid:u}=X(),{currentUser:p}=oe(),{showLoginModal:h,shouldShowLoginModal:g}=Mt(),f=ce.includes(t),b=u===(null==p?void 0:p.uid),C=(0,c.JC)(Mr),v=(0,m.Z)({zest:o,reaction:t,showSnackbar:i,isCurrentUserChannelOwner:b,commentId:e,reactToCommentRequest:C,paramsMemoRef:l,publicationPublisherId:d,shouldShowLoginModal:g&&!f,isComplainReaction:f,showLoginModal:h,shouldCatchError:n});return(0,a.useCallback)((async()=>{const{zest:e,commentId:t,reaction:n,reactToCommentRequest:o,showSnackbar:a,paramsMemoRef:i,publicationPublisherId:s,isCurrentUserChannelOwner:l,shouldShowLoginModal:c,isComplainReaction:m,showLoginModal:d,shouldCatchError:u}=v.current;if(c)return void d(_t.D.COMMENT_REACTION);const p=e.getInstance(Ie,{id:t}),h=e.getInstance(ke,{commentId:t});if(!p)return void kn.kg.error(`useCommentReaction: no comment for ${t}`);if(!h)return void kn.kg.error(`useCommentReaction: no commentMeta for ${t}`);const{documentId:g}=p;h.currentUserReaction!==n&&(Tr({commentMeta:h,newReaction:n,isCurrentUserChannelOwner:l,isComplainReaction:m}),await o(Object.assign({},i.current,{reaction:n,documentId:g,commentId:t,publicationPublisherId:s})).catch((e=>{if(!u)throw e;kn.kg.error(e),a(Object.assign({id:"somethingWentWrong",title:r().createElement(_n.oc.somethingWentWrong,null)},Ye))})))}),[v])},Tr=e=>{let{commentMeta:t,newReaction:n,isCurrentUserChannelOwner:o,isComplainReaction:a}=e;const r=t.currentUserReaction;r!==n&&(0,ie.runInAction)((()=>{if(a)t.hasCurrentUserComplain=!0;else{switch("like"===r?t.likes--:"dislike"===r&&t.dislikes--,n){case"like":t.currentUserReaction="like",t.likes++;break;case"dislike":t.currentUserReaction="dislike",t.dislikes++;break;case"cancel_like":case"cancel_dislike":t.currentUserReaction="none"}o&&(t.publicationChannelOwnerReaction=t.currentUserReaction)}}))};var Lr=n(61495);const Br="comment-image__block-NC",Pr="comment-image__clickable-to",Dr="comment-image__image-3W",Or="comment-image__loaded-34",Ur="comment-image__placeholder-3l",Ar=(0,a.memo)((e=>{let{width:t,height:n,link:o,onClick:i,className:s="",maxAspectRatio:l}=e;const c=(0,R.bU)(),m=(0,a.useCallback)((e=>r().createElement("img",{alt:Ra.commentImage(c),width:`${t}px`,height:`${n}px`,className:g()(Dr,{[Or]:e}),onClick:i,src:e?o:void 0,draggable:!1})),[i,c,t,n,o]),d=n/t,u=l?Math.min(d,l):d,p=(0,a.useCallback)((e=>r().createElement("div",{className:g()(Ur,{[Or]:e}),style:{maxHeight:Math.min(n,600)}},r().createElement("div",{style:{paddingTop:100*u+"%"}}))),[n,u]);return r().createElement("div",{className:g()(Br,s,{[Pr]:Boolean(i)})},r().createElement(Lr.w,{imageUrl:o,renderImage:m,renderPlaceholder:p}))})),Zr="comment-image-block__block-2i",zr=(0,a.memo)((e=>{let{mediaItem:t,maxImageAspectRatio:n=Xe}=e;const{openCommentsImageViewer:o}=X(),i=(0,a.useCallback)((()=>{t&&o({mediaItems:[(0,sa.Gd)(t)]})}),[o,t]),s=(0,a.useCallback)(((e,t)=>{kn.kg.error(e,t)}),[]);if(null==t||!t.image)return null;const{link:l,width:c,height:m}=(0,sa.pn)(t.image,"scale_1200",void 0,s);return r().createElement("div",{className:Zr},r().createElement(Ar,{linkectRatio:n,onClick:i}))}));const jr={type:"p",key:"p-expand",children:[{type:"expand",children:[],key:"expand"}]},Hr={type:"expand-with-ellipsis",key:"expand",children:[]},Wr={type:"collapse",key:"e;var Vr=n(22581);const $r=(0,n(88237).N)("auto-height-transition-block"),qr=(0,a.memo)((e=>{let{children:t,duration:n="0.5s",delay:o="0s",functionName:i="linear",overflow:s="hidden"}=e;const l=(0,a.useRef)(null),c=(0,a.useRef)(null);(0,a.useEffect)((()=>{c.current&&l.current&&(c.current.style.height=`${l.current.scrollHeight}px`)}),[t]);const m={transitionProperty:"height",transitionDuration:n,transitionDelay:o,transitionTimingFunction:i,overflow:s};return r().createElement("div",{className:$r({overflow:s}),ref:c,style:m},r().createElement("div",{ref:l,className:$r("inner-block")},t))}));var Kr=n(73304);const Gr=e=>{let{containerCoords:t,expandButtonWidth:n,containerWidth:o,clampPos:a,maxLinesCount:r,range:i,textParams:s}=e;((e,t)=>{const n=t.ref.current;if(n)switch(t.type){case"text":if(!n.firstChild||"number"!=typeof t.offset)return;return e.setStart(n.firstChild,Math.max(t.offset-1,0)),void e.setEnd(n.firstChild,t.offset);case"space":e.setStartBefore(n),e.setEndAfter(n)}})(i,a);const l=i.getBoundingClientRect(),c=("space"===a.type?l.left:l.right)-t.left,m=l.top-t.top,d=n+c,u=s.spaceHeight*a.brLinesBefore,p=Math.floor((m-u)/s.lineHeight)+1+a.brLinesBefore;return{fitsInWidth:d<o,fitsInHeight:p<=r,isLastContainerLine:p===r}},Qr=e=>{let{basePos:t,expandButtonWidth:n,maxLinesCount:o,containerCoords:a,range:r,containerWidth:i,textParams:s}=e,{offset:l=0}=t;for(;l>0;){const e=Object.assign({},t,{offset:l}),c=Gr({range:r,expandButtonWidth:n,maxLinesCount:o,containerCoords:a,clampPos:e,containerWidth:i,textParams:s});if(c.isLastContainerLine&&c.fitsInWidth)return e;l--}return t},Jr=["star-tag","link"],Xr=e=>{const t=[];let n="",o=0;const a=e=>e.forEach((e=>{if("text"===e.type){if(""===e.data.trim())return;const a=Yr(e,o),r=a[a.length-1],i=Jr.includes(n)?[r]:a;return t.push.apply(t,(0,K.Z)(i)),void(n=e.type)}n=e.type,"space"!==e.type&&"newline"!==e.type||!e.ref||(t.push({type:"space",ref:e.ref,key:e.key,brLinesBefore:o}),o++),a(e.children)}));return a(e),t},Yr=(e,t)=>{const n=e.data.split(" ").reduce(((n,o)=>e.ref?(n.cWords.push(o),n.pos.push({type:"text",ref:e.ref,key:e.kset:n.cWords.join(" ").length,brLinesBefore:t}),n):n),{pos:[],cWords:[]});return(0,K.Z)(n.pos)},ei=e=>{let{dataWithRefs:t,dataWithoutSpaces:n,measuredDataWithRefs:o,containerRef:r,expandButtonRef:i,maxLinesCount:s,textStyle:l}=e;const[c,m]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{if(!r.current||!i.current)return;const e=(e=>{let{container:t,maxLinesCount:n,text:o,moreButtonWidth:a,textParams:r}=e;const i=Xr(o);if(0===i.length)return{shouldClamp:!1};const s=document.createRange(),l=t.getBoundingClientRect(),c=t.offsetWidth,m=i[i.length-1],d=Gr({range:s,expandButtonWidth:0,maxLinesCount:n,containerCoords:l,clampPos:m,containerWidth:c,textParams:r});if(d.fitsInWidth&&d.fitsInHeight)return{shouldClamp:!1};let u=!1,p=m;const h=i.reduce(((e,t)=>{if(u)return e;const o=Gr({range:s,expandButtonWidth:a,maxLinesCount:n,containerCoords:l,clampPos:t,containerWidth:c,textParams:r});return p=t,o.fitsInHeight&&o.fitsInWidth?{clampPos:t,pointInfo:o}:(o.isLastContainerLine&&!o.fitsInWidth&&(u=!0),o.fitsInHeight||(u=!0),e)}),null);return{point:!h||h&&!h.pointInfo.isLastContainerLine||!h?Qr({containerWidth:c,containerCoords:l,range:s,expandButtonWidth:a,maxLinesCount:n,basePos:p,textParams:r}):h.clampPos,shouldClainer:r.current,moreButtonWidth:i.current.offsetWidth,maxLinesCount:s,text:null!=o?o:n,textParams:{lineHeight:l.lineHeight,spaceHeight:l.spaceHeight}});if(!e.shouldClamp)return u(!1),void m(t);const a=((e,t)=>{let n=!1;const o=e=>e.reduce(((e,o)=>(n||(t.key===o.key?(n=!0,e.push(Object.assign({},o,{data:o.data.substring(0,t.offset)}))):e.push(o)),e)),[]),a=e=>e.reduce(((e,t)=>{if(n)return e;switch(t.type){case"text":e.push.apply(e,(0,K.Z)(o([t])));break;case"link":case"mention":case"star-tag":e.push(Object.assign({},t,{children:o(t.children)}));break;default:e.push(t)}return e}),[]);return e.reduce(((e,o)=>n?e:o.key===t.key?(n=!0,e):("p"===o.type?e.push(Object.assign({},o,{children:a(o.children)})):e.push(o),e)),[])})(n,e.point);((e,t)=>{if(t)return void e.push(jr);const n=e[e.length-1];"p"===n.type&&n.children.push(Hr)})(a,"space"===e.point.type),u(!0),m(a)}),[r,i,t,n,o,s,l]),{isClamped:d,clampedRichText:c}},ti=(0,Zn.N)("rich-text-clamp"),ni=(0,a.memo)((e=>{let{data:t,withoutSpaces:n=!1,maxLinesCount:o,shouldExpand:i,onClickLink:s,fullCommentText:l,hideCommentText:c,alwaysExpand:m=!1,theme:d,onClick:u,onClickFullText:p,textStyle:h=Vr.C8,withAnimation:g=!1,onClickClampedText:f,attributes:b,shouldConvertToRem:C,expandEllipsisPaddingRight:v,shouldUseNewlinesAsSpaces:y=!0,className:w="",onShowClampedText:_,animationDuration:E=250,ssrOnly:k=!1}=e;const I=(0,a.useRef)(null),x=(0,a.useRef)(null),[S,R]=(0,a.useState)(!1),M=(0,a.useMemo)((()=>(e=>{const t=e=>e.map((e=>Object.assign({},e,{ref:r().createRef()}))),n=e=>e.map((e=>{switch(e.type){case"text":return Object.assign({},t([e])[0]);case"link":case"mention":case"star-tag":return Object.assign({},e,{children:t(e.children)});default:return Object.assign({},e)}}));return(e=>e.map((e=>"space"===e.type||"newline"===e.type?Object.assign({},e,{ref:r().createRef()}):Object.assign({},e,{children:n(e.children)})),[]))(e)})(t)),[t]),N=(0,a.useMemo)((()=>n?(0,Kr.nM)(M):void 0),[n,M]),T=(0,a.useMemo)((()=>null!=N?N:M),[N,M]),L=null!=N?N:t,{isClamped:B,clampedRichText:P}=ei({dataWithRefs:M,dataWithoutSpaces:T,containerRef:I,expandButtonRef:x,maxLinesCount:o,textStyle:h});(0,a.useEffect)((()=>{!m&&B&&R(!0)}),[m,B]);const D=(0,a.useMemo)((()=>[Object.assign({},Hr,{ref:x})]),[]),O=r().createElement("div",{style:{WebkitLineClamp:o,maxHeight:o*h.lineHeight+"px"}},r().createElement(Fr.H,{containerRef:I,data:L,onClickLink:s,fullCommentText:l,hideCommentText:c,theme:d,textStyle:h,className:ti("ssr-text"),shouldConvertToRem:C,shouldUseNewlinesAsSpaces:y,expandEllipsisPaddingRight:v})),U=!P&&r().createElement("div",{className:ti("origin-text"),"aria-hidden":"true"},r().createElement(Fr.H,{containerRef:I,data:M,onClickLink:s,fullCommentText:l,theme:d,textStyle:h,shouldConvertToRem:C,shouldUseNewlinesAsSpaces:y,expandEllipsisht:v}),r().createElement("div",null,r().createElement(Fr.H,{data:D,onClickLink:s,fullCommentText:l,theme:d,textStyle:h,shouldConvertToRem:C,shouldUseNewlinesAsSpaces:y,expandEllipsisPaddingRight:v}))),A=g&&P,Z=A?qr:r().Fragment,z=A?{duration:`${E}ms`,functionName:"ease-in-out"}:{},F=S?f:void 0,j=((e,t)=>{if(t){const t=e[e.length-1];"p"===t.type&&t.children.push(Wr)}return e})(t,Boolean(c)&&i),H=r().createElement(Fr.H,{containerRef:I,data:j,onClickLink:s,onClick:p,fullCommentText:l,hideCommentText:c,theme:d,textStyle:h,shouldConvertToRem:C,shouldUseNewlinesAsSpaces:y,expandEllipsisPaddingRight:v,onShowClampedText:_}),W=i?H:k?O:P?r().createElement(Fr.H,{data:P,onClickLink:s,fullCommentText:l,theme:d,textStyle:h,onClick:F,shouldConvertToRem:C,shouldUseNewlinesAsSpaces:y,expandEllipsisPaddingRight:v,onShowClampedText:_}):O;return r().createElement("div",(0,Ae.Z)({className:Zn.N.mix(ti({alwaysExpand:m,isOpenable:S}),w),onClick:u,"aria-label":"ÐšÐ»Ð¸ÐºÐ°Ð±ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ Ð¿Ð¾ÑÑ‚Ð°"},b),r().createElement(Z,z,W),U)})),oi="comment-text__block-Il",ai={fontSize:Ue.$A,lineHeight:Ue.KS,spaceHeight:8,fontWeight:400,textColor:"primary"},ri=Object.assign({},ai,{textColor:"tertiary"}),ii=(0,a.memo)((e=>{var t;let{commentMeta:n,comment:o,canExpandText:i=!0,shouldParseTextLinks:s=!1,maxTextLinesCount:l,onCommentClick:c}=e;const m=(0,Dn.tD)(),[d,u]=(0,a.useState)(!1),p=(0,R.bU)(),h=(0,a.useCallback)((e=>{var t;c?c(`${o.id}`)(e):i&&null!=(t=window.getSelection())&&t.isCollapsed&&u((e=>!e))}),[i,c,o.id]),g="deleted"===(null==n?void 0:n.state)?Ra.commentDeleted(p):null==(t=o.text)?void 0:t.trim(),f=(0,a.useMemo)((()=>g&&(0,Kr.Ih)(g,void 0,{shouldParseLinks:s}).reduce(((e,t,n,o)=>{const a=o[n-1];return"space"===t.type&&"space"===(null==a?void 0:a.type)||e.push(t),e}),[])),[g,s]);return f?r().createElement(ni,{className:oi,data:f,withoutSpaces:!1,maxLinesCount:l,fullCommentText:Ra.moreText(p),withAnimation:!1,onClick:h,textStyle:"hidden"===(null==n?void 0:n.state)?ri:ai,theme:m,expandEllipsisPaddingRight:6,shouldExpand:d,shouldUseNewlinesAsSpaces:!1}):null})),si="comment-content__textWithButton--y",li="comment-content__btnContainer-2G",ci="comment-content__btnText-3X",mi="comment-content__greyText-Z8",di=(0,a.memo)((e=>{let{comment:t,shouldParseTextLinks:n,canExpandText:o=!0,wasCommentDeletedNow:i=!1,forceShowHiddenContent:s=!1,maxImageAspectRatio:l,commentMeta:c,mediaItem:d,restoreComment:u,maxTextLinesCount:p,onCommentClick:h}=e;const g=(0,R.bU)(),f="deleted"===(null==c?void 0:c.state),b=!s&&Boolean("hi?void 0:c.state)||(null==c?void 0:c.hasCurrentUserComplain)),[C,v]=(0,a.useState)(b),y=(0,m.Z)({isHidden:C});(0,a.useEffect)((()=>{y.current.isHidden!==b&&v(b)}),[b,y]);const w=(0,a.useCallback)((()=>{o&&v(!1)}),[o]);if(f){const e=i?{text:`${Ra.commentDeleted(g)}.`,buttonText:r().createElement(Sa.restore,null)}:{text:r().createElement(Sa.commentDeleted,null)};return r().createElement(ui,(0,Ae.Z)({},e,{onClick:u}))}return C?r().createElement(ui,{text:r().createElement(Sa.commentHidden,null),buttonText:r().createElement(Sa.show,null),onClick:w}):r().createElement(r().Fragment,null,r().createElement(ii,{canExpandText:o,commentMeta:c,comment:t,maxTextLinesCount:p,shouldParseTextLinks:n,onCommentClick:h}),d&&"deleted"!==(null==c?void 0:c.state)&&r().createElement(zr,{maxImageAspectRatio:l,mediaItem:d}))})),ui=e=>{let{onClick:t,text:n,buttonText:o}=e;return r().createElement("div",{className:si},r().createElement("span",{className:mi},n),o&&r().createElement("div",{className:li},r().createElement(f.z,{variant:"ghost",size:"xs",onClick:t},r().createElement("span",{className:g()(mi,ci)},o))))},pi="comment-preview__block-hz",hi=(0,a.memo)((e=>{let{id:t,maxImageAspectRatio:n,forceShowHiddenCommentContent:o,maxTextLinesCount:a,onCommentAuthorClick:i,onCommentClick:s,isCommentAuthorClickEnabled:l}=e;const m=(0,c.JN)(),d=(0,c.fz)(Ie,{id:t}),u=(0,c.fz)(ke,{commentId:t});if(!d)return kn.kg.error(`CommentPreview: no CommentEntityData for id: ${t}`),null;u||kn.kg.error(`CommentPreview: no CommentMeta for id: ${t}`);if(!((null==d?void 0:d.authorUid)&&m.getInstance(Ee,{uid:d.authorUid})))return kn.kg.error(`CommentPreview: no CommentsUser author for id: ${t} and uid: ${d.authorUid}`),null;const[p]=d.mediaItems||[];return r().createElement("div",{className:pi},r().createElement(er,{isPreview:!0,comment:d,isCommentAuthorClickEnabled:l,onCommentAuthorClick:i,maybePin:void 0,maybeCommentMenu:void 0,maybeEditedIcon:void 0}),r().createElement(di,{comment:d,forceShowHiddenContent:o,commentMeta:u,canExpandText:!1,shouldParseTextLinks:!1,onCommentClick:s,maxTextLinesCount:a||4,mediaItem:"image"===(null==p?void 0:p.type)?p:void 0,maxImageAspectRatio:n||1}))}));var gi=n(8286);const fi="comment-complain__commentComplainPreview-ii",bi="comment-complain__commentPreviewContainer-mx",Ci=e=>{let{isVisible:t,onClose:n,commentId:o,onComplainComplete:i}=e;const{showSnackbar:l}=(0,s.D)(),c=Nr(o,gi.tD,!1),d=Nr(o,gi.fz,!1),p=Nr(o,gi.Fn,!1),h=(0,m.Z)({reportSpam:c,onComplainComplete:i,showSnackbar:l,reportObscene:p,reportInappropriate:d}),g=(0,a.useCallback)((async e=>{const{showSnackbar:t,onComplainComplete:n,reportSpam:o,reportInappropriate:a,reportObscene:i}=h.current,[s]=e;try{switch(s){case gi.tD:await o();break;case gi.Fn:await i();break;case gi.fz:await a();break;default:throw new Error(`Unknown comment complain type: ${s}`)}n()}catch(e){kn.kg.error(e),t(Object.assign({id:"failedCommentComplain",title:r().createElement(_n.oc.failedCommentComplain,null)},Ye))}}),[h]),f=(0,a.useCallback)((e=>{g(e)}),[g]),b={preview:(0,a.useMemo)((()=>r().createElement("div",{className:bi},r().createElement("div",{className:fi},r().createElement(hi,{id:o,forceShowHiddenCommentContent:!0,maxTextLinesCount:2,maxImageAspectRatio:.5})))),[o]),onOpenSourceLink:u.c,onOpenPublicationLink:u.c};return r().createElement(gi.$H,{type:"comment",isVisible:t,onClose:n,onSubmit:f,previewItemProps:b})};var vi=n(28998),yi=n(8761);const wi=(0,a.memo)((e=>{let{text:t,hint:n,icon:o,color:a="full",hintColor:i="low",addonAfter:s,textMaxLines:l,hintMaxLines:c,details:m=!1,disabled:d=!1,isCell:u}=e;return u?r().createElement(vi.w,{title:String(t),subtitle:n?String(n):void 0,titleMaxLines:l,leftContent:o&&{type:"icon",Icon:o},shouldShowChevron:Boolean(m),isBigChevron:!0}):r().createElement("div",{className:ar("MenuItemContent",{disabled:d})},o?r().createElement(Na.x,{className:ar("MenuItemIcon"),color:a},r().createElement(o,null)):null,r().createElement("div",{className:ar("MenuItemTextContent")},r().createElement(Na.x,{className:ar("MenuItemText"),maxLines:l,overflow:"number"==typeof l?"ellipsis":void 0,color:a,typography:"text-16-20"},t),void 0!==n?r().createElement(Na.x,{className:ar("MenuItemHint"),maxLines:c,overflow:"number"==typeof c?"ellipsis":void 0,typography:"text-13-16"},n):null),!1!==m?r().createElement(Na.x,{as:"div",typography:"text-16-20",color:i,className:ar("MenuItemDetails")},"boolean"==typeof m?null:r().createElement("span",{className:ar("MenuItemDetailsText")},m),r().createElement(yi.Z,{className:ar("MenuItemDetailsIcon")})):null,s)})),_i=((0,a.memo)((e=>{let{text:t,hint:n,color:o="full",imageUrl:a,imageColor:i,details:s=!1,addonAfter:l,disabled:c=!1,textMaxLines:m,hintMaxLines:d}=e;return r().createElement("div",{className:ar("MenuItemContent",{disabled:c,mobile:!1})},r().createElement("div",{className:ar("MenuItemImage"),style:{backgroundImage:a&&`url(${a})`,backgroundColor:i}}),r().createElement("div",{className:ar("MenuItemTextContent")},r().createElement(Na.x,{className:ar("MenuItemText"),color:o,maxLines:m,overflow:"number"==typeof m?"ellipsis":void 0,typography:"text-16-20"},t),void 0!==n?r().createElement(Na.x,{className:ar("MenuItemHint"),maxLines:d,overflow:"number"==typeof d?"ellipsis":void 0,typography:"text-13-16"},n):null),!1!==s?r().createElement(Na.x,{as:"div",typography:"text-16-20",color:"low",className:ar("MenuItemDetails")},"boolean"==typeof s?null:r().createElement("span",{className:ar("MenuItemDetailsText")},s),r().createElement(yi.Z,{className:ar("MenuItemDetailsIcon")})):null,l)})),(e,t)=>e?[t]:[]),Ei=ae.intersection(Pe,ae.object({commentId:ae.number(),documentId:ae.string(),flightId:ae.maybe(ae.string()),sessionTs:ae.maybe(ae.number()),deviceId:ae.maybe(ae.string())})),ki=(0,re.P)({name:"pinCommentEndpoint",params:Ei,res:Le,req:e=>{let{place:t,clid:n,partner:o,integration:a,product:r,csrfToken:i,rid:s,commentId:l,documentId:c,flightId:m,sessionTs:d,deviceId:u}=e;return ct("pin-comment",{headersData:{csrfToken:i,place:t,clid:n,partner:o,integration:a,product:r},rid:s,body:{commentId:l,documentId:c,flightId:m,sessionTs:d,deviceId:u,clien:r,csrfToken:i,rid:s,commentId:l,documentId:c,flightId:m,sessionTs:d,deviceId:u}=e;return ct("unpin-comment",{rid:s,headersData:{csrfToken:i,place:t,clid:n,partner:o,integration:a,product:r},body:{commentId:l,documentId:c,flightId:m,sessionTs:d,deviceId:u,clientTs:Date.now()}})}});var xi=n(8448),Si=n.n(xi);var Ri=n(21375);const Mi=new(y())({id:"delete_20b3--react",use:"delete_20b3--react-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="delete_20b3--react"><path d="M12.663 1.5h-1.326c-1.069 0-1.49.09-1.921.27-.432.181-.792.453-1.084.82-.292.365-.493.746-.784 1.774L7.368 5H5a1 1 0 0 0 0 2h.5l.844 12.666A2.5 2.5 0 0 0 8.84 22h6.322a2.5 2.5 0 0 0 2.495-2.334L18.5 7.001V7h.5a1 1 0 1 0 0-2h-2.367l-.18-.636c-.292-1.028-.493-1.409-.785-1.775a2.694 2.694 0 0 0-1.084-.819c-.431-.18-.852-.27-1.92-.27zm1.89 3.5H9.447l.026-.09c.203-.717.29-.905.424-1.074a.696.696 0 0 1 .292-.221c.2-.084.404-.115 1.149-.115h1.326c.745 0 .95.031 1.149.115.122.05.21.118.292.221.135.169.221.357.424 1.074l.026.09zm1.943 2-.836 12.533a.5.5 0 0 1-.499.467H8.84a.5.5 0 0 1-.499-.467L7.505 7h8.99zM9.4 9.63l.272 7.796a.85.85 0 1 0 1.699-.06l-.272-7.795a.85.85 0 0 0-1.7.06zm4.381-.879a.85.85 0 0 0-.88.82l-.271 7.795a.85.85 0 1 0 1.699.06L14.6 9.63a.85.85 0 0 0-.82-.88z" fill="currentColor" /></symbol>'});function Ni(e){return _().add(Mi),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#delete_20b3--react"}))}Ni.displayName="SpriteSymbolComponent(delete_20b3--react)";const Ti=new(y())({id:"check_circle_outline_6205--react",use:"check_circle_outline_6205--react-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="check_circle_outline_6205--react">\n<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20ZM16.6607 8.25136C16.2451 7.88754 15.6134 7.92946 15.2496 8.34498L10.7332 13.5033L8.73739 11.3245C8.36434 10.9173 7.73178 10.8896 7.32454 11.2626C6.91729 11.6357 6.88957 12.2682 7.26262 12.6755L9.63551 15.2659C10.1951 15.8767 11.1439 15.9183 11.7548 15.3588C11.7847 15.3303 11.7997 15.3161 11.8141 15.3014C11.8285 15.2866 11.8424 15.2713 11.8701 15.2408L16.7543 9.66247C17.1181 9.24695 17.0762 8.61517 16.6607 8.25136Z" fill="currentColor" />\n</symbol>'});function Li(e){return _().add(Ti),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#check_circle_outline_6205--react"}))}Li.displayName="SpriteSymbolComponent(check_circle_outline_6205--react)";var Bi=n(60289);const Pi=new(y())({id:"pin_7591--react",use:"pin_7591--react-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" id="pin_7591--react">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.1502 3.78021C14.7075 3.33749 13.9782 3.37813 13.5874 3.86729L9.45308 9.0423L4.894 9.9595C4.07236 10.1248 3.76603 11.1387 4.35863 11.7313L7.58581 14.9585L3.29288 19.2516C2.90236 19.6421 2.90237 20.2752 3.2929 20.6658C3.68343 21.0563 4.3166 21.0563 4.70712 20.6658L9.00002 16.3727L12.2267 19.5994C12.8193 20.192 13.8332 19.8857 13.9985 19.064L14.9192 14.4876L19.9605 10.194C20.4271 9.79652 20.4556 9.08555 20.0221 8.65213L15.1502 3.78021ZM10.7998 10.5608L14.487 5.94545L17.8802 9.33864L13.3719 13.1783C13.1926 13.3311 13.0699 13.5397 13.0234 13.7706L12.3874 16.9317L7.02631 11.5706L10.1866 10.9348C10.4286 10.8861 10.6457 10.7537 10.7998 10.5608Z" />\n</symbol>'});function Di(e){return _().add(Pi),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#pin_7591--react"}))}Di.displayName="SpriteSymbolComponent(pin_7591--react)";const Oi=new(y())({id:"pencil-24_f721--react",use:"pencil-24_f721--react-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="pencil-24_f721--react">\n<path d="M14.7924 7.36822L6.43158 15.7279C6.25184 15.9076 6.10801 16.1199 6.00777 16.3535L4.27968 19.5202L7.64409 17.9896C7.87724 17.8894 8.08919 17.7457 8.26862 17.5663L16.6285 9.20483C16.4373 8.87512 16.1675 8.53321 15.8151 8.18083C15.4632 7.8289 15.1217 7.55933 14.7924 7.36822ZM16.2382 5.92257C16.5737 6.15939 16.9039 6.44114 17.2294 6.76662C17.5552 7.09246 17.8372 7.42302 18.0742 7.75885L19.5453 6.28741C19.6874 6.14534 19.7306 5.93204 19.6551 5.74588C19.5484 5.48305 19.3574 5.2083 19.073 4.92388C18.7886 4.63947 18.5138 4.44848 18.251 4.34182C18.0648 4.26627 17.8515 4.30949 17.7095 4.45155L16.2382 5.92257ZM4.16985 15.5648C4.37032 15.0977 4.65799 14.673 5.01746 14.3136L16.2953 3.03724C17.0057 2.32696 18.0722 2.11086 19.0031 2.48861C19.529 2.70203 20.023 3.04541 20.4872 3.50967C20.9515 3.97394 21.2949 4.46791 21.5083 4.99385C21.886 5.92464 21.6699 6.99112 20.9597 7.70149L9.68297 18.9803C9.32411 19.3393 8.90021 19.6266 8.43391 19.8271L4.99111 21.3069C4.10317 21.6886 3.07394 21.2782 2.69226 20.3903C2.50276 19.9494 2.50261 19.4501 2.69184 19.0091L4.16985 15.5648Z" fill="currentColor" />\n</symbol>'});function Ui(e){return _().add(Oi),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#pencil-24_f721--react"}))}var Ai;Ui.displayName="SpriteSymbolComponent(pencil-24_f721--react)",function(e){e.complain="complain",e.copyLink="link",e.banOrUnban="banOrUnban",e.delete="delete",e.edit="edit",e.pinOrUnpin="pinOrUnpin"}(Ai||(Ai={}));const Zi=e=>{let{isRoot:t,commentId:n,closeMenu:o,openBanModal:i,closeBanModal:l,handleEditClick:d,onCommentDeleted:u,openComplainModal:p,closeComplainModal:h}=e;const g=(0,R.bU)(),{showSnackbar:f}=(0,s.D)(),{statsLogger:b,publicationLink:C}=X(),{currentUser:v,meta:{commentsVisibility:y}}=oe(),{forceIsSubscribedToChannel:w}=Jo(),_=(e=>{const t=(0,c.JN)(),{paramsMemoRef:n,publicationPublisherId:o,documentId:r}=X(),i=oe(),s=(0,c.JC)(vr),l=t.getInstance(Ie,{id:e}),d=null==l?void 0:l.authorUid,u=d?t.getInstance(Ee,{void 0:u.uidSafe,h=(0,m.Z)({banUserRequest:s,uid:d,uidSafe:p,author:u,commentId:e,publicationPublisherId:o,documentId:r,mutableData:i});return(0,a.useCallback)((async()=>{const{banUserRequest:e,author:t,cokg.error(`useUnbanCommauthorUid found for ${o}`found for ${a} and commentIatus:l}=await e(Object.assi),s=(0,m.Z)({publicationPublisherId:n,mutableData:r,deleteCommentRequest:i,paramsMemoRef:t,id:e,documentId:o});return(0,a.useCallback)((async()=>{const{publicationPublisherId:e,documentId:t,deleteCommentRequest:n,mutableData:o,paramsMemoRef:a,id:r}=s.current;await n(Object.assign({},a.current,{documentId:t,publicationPublisherId:e,commentId:r})),o.meta.totalCommentsCount-=1}),[s])})(n),k=(e=>{const{paramsMemoRef:t,documentId:n}=X(),o=(0,c.JC)(ki),r=(0,c.JC)(Ii),i=(0,m.Z)({pinCommentRequest:o,unpinCommentRequest:r,id:e});return(0,a.useCallback)((async e=>{const{pinCommentRequest:o,unpinCommentRequest:a,id:r}=i.current,s="pin"===e?o:a;await s(Object.assign({},t.current,{documentId:n,commentId:r}))}),[i,t,n])})(n),I=((e,t)=>(0,a.useCallback)((()=>t&&Si()(`${t}#comment_${e}`)),[e,t]))(n,C),{authorUid:x,editableUntilTs:S=0}=(0,c.fz)(Ie,{id:n})||{},M=(0,c.fz)(Ee,x?{uid:x}:null),N=(0,c.fz)(Ee,v?{uid:v.uid}:null),T=(0,c.fz)(ke,{commentId:n}),{isShowingLoader:L,isLoadInProgressRef:B,stopShowingLoader:P,showLoader:D}=yn(),{isShowingLoader:O,isLoadInProgressRef:U,stopShowingLoader:A,showLoader:Z}=yn(),{isShowingLoader:z,isLoadInProgressRef:F,stopShowingLoader:j,showLoader:H}=yn(),W=(0,m.Z)({stopDeleteLoading:P,showLoadingDelete:D,stopPinOrUnpinLoading:j,showLoadingPinOrUnpin:H,copyLink:I,closeBanModal:l,stopUnbanLoading:A,showLoadingUnban:Z,unbanUserRequest:_,closeComplainModal:h,closeMenu:o,statsLogger:b,commentId:n,deleteCommentRequest:E,pinOrUnpinCommentRequest:k,showSnackbar:f,onCommentDeleted:u}),V=(0,a.useCallback)((async()=>{if(U.current)return;const{unbanUserRequest:e,showLoadingUnban:t,stopUnbanLoading:n,closeMenu:o,showSnackbar:a}=W.current;t();try{await e(),o()}catch(e){kn.kg.error(e),a(Object.assign({id:"failedToUnblockUser",title:r().createElement(_n.oc.failedToUnblockUser,null)},Ye))}finally{await n()}}),[W,U]),$=(0,a.useCallback)((async()=>{if(B.current)return;const{deleteCommentRequest:e,onCommentDeleted:t,closeMenu:n,showSnackbar:o,showLoadingDelete:a,stopDeleteLoading:i}=W.current;a();try{await e(),null==t||t(),n()}catch(e){kn.kg.error(e),o(Object.assign({id:"commentDeletionFail",title:r().createElement(_n.oc.commentDeletionFail,null)},Ye))}finally{await i()}}),[B,W]),q=(0,a.useCallback)((async e=>{if(F.current)pinOrUnpinCommentRequest:t,clshowSnackbar:o,stopPinOrUnpinLoading:a,showLoadingPinOrUnpin:i}=W.current;i();try{await t(e?"unpin":"pin"),n()}catch(t){kn.kg.error(t);const n=e?{id:"commentUnpinFail",title:r().createElement(_n.oc.commentUnpinFail,null)}:{id:"commentPinFail",title:r().createElement(_n.oc.commentPinFail,null)};o(Object.assign({},n,Ye))}finally{await a()}}),[F,W]),G=Boolean(null==M?void 0:M.bannedTs),Q=Boolean(null==T?void 0:T.isPinned),J=nt({forceIsSubscribedToChannel:w,currentUser:N,commentsVisibility:y}),Y=(0,a.useCallback)((e=>{const{showSnackbar:t}=W.current,n=null==e?void 0:e.target.value;switch(n){case Ai.complain:return p();case Ai.banOrUnban:return G?V():i();case Ai.delete:return $();case Ai.edit:return null==d?void 0:d();case Ai.pinOrUnpin:return q(Q);default:kn.kg.error(`useCommentMenuItems: unknown targetValue: ${n}`),t(Object.assign({id:"somethingWentWrong",title:r().createElement(_n.oc.somethingWentWrong,null)},Ye))}}),[V,p,G,Q,$,d,i,W,q]),ee=Boolean(["owner","moderator"].includes((null==N?void 0:N.publicationChannelRole)||"")),te=null==N?void 0:N.uid,ne=Boolean(x&&x===te);return{handleDropdownClick:Y,items:(0,a.useMemo)((()=>{const e=G?Li:Ri.Z,n=[].concat((0,K.Z)(_i(ee&&Boolean(t),{value:Ai.pinOrUnpin,content:r().createElement(wi,{text:Q?_n.ag.unpin(g):_n.ag.pin(g),icon:z?wn.$:Di,isCell:!0})})),(0,K.Z)(_i(!ne,{value:Ai.complain,content:r().createElement(wi,{text:_n.ag.complain(g),icon:Bi.Z,isCell:!0,details:!0})})),(0,K.Z)(_i(ee&&!ne,{value:Ai.banOrUnban,content:r().createElement(wi,{icon:O?wn.$:e,text:G?_n.ag.unblockUserTitle(g):_n.ag.blockUserTitle(g),hint:!G&&_n.ag.blockUserShortDescription(g),hintMaxLines:30,isCell:!0})})),(0,K.Z)(_i(Boolean(S>Date.now()&&d&&ne&&!G&&!J),{value:Ai.edit,content:r().createElement(wi,{text:_n.ag.edit(g),icon:Ui,isCell:!0})})),(0,K.Z)(_i(ee||ne,{value:Ai.delete,content:r().createElement(wi,{text:_n.ag.delete(g),icon:L?wn.$:Ni,color:"accent-red",isCell:!0})})));return(0,K.Z)(_i(Boolean(n.length),{items:n}))}),[t,g,Q,G,ne,ee,O,z,L,S,d,J])}};var zi=n(58752),Fi=n(23578);const ji="comment-menu__menuIcon-2K";var Hi=n(39721),Wi=n(49522);const Vi="custom-popup__popup-3P",$i="custom-popup__visiable-2L",qi=(0,a.memo)((e=>{let{isVisible:t,onClose:n,onTransitionEnd:o,anchorRef:i,children:s,isAnimatingRef:l,currentScreen:c,zIndex:d}=e;const[u,p]=(0,a.useState)({visibility:"hidden",position:"absolute"}),[h,f]=(0,a.useState)(!1),[b,C]=(0,a.useState)(!1),v=(0,a.useRef)(null),y=(0,a.useRef)(null),w=(0,ha.Z)(t),_=(0,a.useCallback)((e=>{b||(C(!0),setTimeout((()=>{null==e||e(),C(!1)}),200))}),[b]),E=(0,m.Z)({onClose:n,onTransitionEnd:o,startAnimation:_}),k=(0,a.useCallback)((()=>{const{onClose:e,onTransitionEnd:t,startAnimation:n}=E.current;n(t),f(!1),e()}),[E]);return(0,a.useEffect)((()=>{const e=document.getElementById("scroll-snap-infinity-slider-container");e&&(y.current=e)}),[]),(0,a.useEffect)((()=>{l&&(l.current=b)}),[l,b]),(0,a.useEffect)((()=>{t&&"visible"===u.visibility&&(0,Wi.W)().then((()=>f(!0)))}),[k,t,u]),(0,a.useEffect)((()=>{!t&&w&&k()}),[k,t,w]),(0,a.useEffect)((()=>{(0,Wi.W)().then((()=>{if(!v.current||!i.current||!t)return null;const e=Gi(v.current,i.current);p((t=>Object.assign({},t,e))),(0,Wi.W)().then((()=>{p((e=>Object.assign({},e,{visibility:"visible"})))}))}))}),[i,t]),(0,a.useEffect)((()=>{(0,Wi.W)().then((()=>{p((e=>{if(!v.current)return e;const{bottom:t,height:n}=v.current.getBoundingClientRect(),{innerHeight:o,scrollY:a}=window;return t>o-Ki?Object.assign({},e,{top:a+o-Ki-n+"px"}):e}))}))}),[c]),r().createElement(Hi.G,{className:g()(Vi,{[$i]:h}),innerRef:v,style:u,onClose:k,visible:t,hideOnScroll:!0,scrollContainerRef:y,keepMounted:!1,zIndex:d},s)})),Ki=24,Gi=(e,t)=>{const n=e.getBoundingClientRect(),{innerHeight:o,innerWidth:a,scrollY:r,scrollX:i}=window,s=t.getBoundingClientRect(),l={top:{y:s.top-12-n.height,xByLeftSide:s.right-n.width,xByRightSide:s.left},center:{y:o-Ki-n.height,xByLeftSide:s.left-12-n.width,xByRightSide:s.right+12},bottom:{y:s.bottom+12,xByLeftSide:s.right-n.width,xByRightSide:s.left}},c={y:0,x:0},m=e=>{let{xByLeftSide:t,xByRightSide:o}=e;return o+n.width<=a-Ki?o:t};switch(!0){case l.bottom.y+n.height<=o-Ki:c.y=l.bottom.y,c.x=m(l.bottom);break;case l.center.y+n.height>=s.top+s.height&&n.height<o:c.y=l.center.y,c.x=m(l.center);break;case l.top.y>=o-(s.top+s.height):c.y=l.top.y,c.x=m(l.top);break;default:c.y=l.bottom.y,c.x=l.bottom.xByLeftSide}return{top:`${r+c.y}px`,left:`${i+c.x}px`}},Qi=(0,a.memo)((e=>{let{isRoot:t,menuButtonClassName:n,commentId:o,handleEditClick:i,onCommentDeleted:l}=e;const c=(0,wt.Z)(),h=!1,b=(0,R.bU)(),[C,,v,y]=(0,d.zj)(!1),w=(0,a.useRef)(null),{statsLogger:_}=X(),{hideCurrentlyShownSnackbars:E}=(0,s.D)(),k=(0,m.Z)({isDrawerOpen:C,toggleDrawer:y,statsLogger:_,commentId:o}),I=(0,a.useCallback)((()=>{const{statsLogger:e,isDrawerOpen:t,commentId:n}=k.current;t?e.push("comments:menu_tip:close",{data:{comment_id:n}}):e.push("comments:menu_tip:show",{data:{comment_id:n}}),y()}),[k,y]),x=(0,a.useCallback)((()=>{_.push("comments:menu_tip:close",{data:{comment_id:o}}),v()}),[v,_,o]),S=(0,a.useCallback)((()=>{var e;c()&&(null==(e=w.current)||e.click(),x())}),[x,c]),[M,N,T]=(0,d.zj)(!1),[L,B,P]=(0,d.zj)(!1),D=(0,a.useCallback)((()=>{c()&&(T(),S())}),[T,c,S]),O=(0,a.useCallback)((()=>{c()&&(P(),S())}),[P,S,c]),U=(0,a.useCallback)((()=>{B()}),[B]),{items:A,handleDropdownClick:Z}=Zi({isRoot:t,commentId:o,closeMenu:S,openBanModal:N,closeBanModal:T,handleEditClick:i,onCommentDeleted:l,openComplainModal:U,closeComplainModal:P});(0,a.useEffect)((()=>{L&&S()}),[S,L,h]);(0,a.useCallback)((()=>{E()}),[E]);const z=r().createElement(f.z,{controlRef:w,variant:"ghost",leftContent:{type:"icon",Icon:zi.Z},size:"s",onClick:I,className:g()(ji,n),"aria-label":_n.ag.commentMenu(b)}),F=r().createElement(gr,{items:A,onChange:Z,withFeedbackMenuStyles:!0}),j=r().createElement(Ci,{isVisible:L,onClose:P,commentId:o,onComplainComplete:O}),H=r().createElement(p.u,{visible:M,onClose:T},r().createElement(Rr,{commentId:o,onBanComplete:D})),W=r().createElement(r().Fragment,null,z,H,j),V=r().createElement(r().Fragment,null,W,r().createElement(qi,{isVisible:C,onClose:u.c,onTransitionEnd:u.c,anchorRef:w,zIndex:Fi.gk},F));return A.length?V:null})),Ji=e=>{let{commentMeta:t,isRoot:n,handleEditClick:o,onCommentDeleted:i,commentId:s,position:l,menuButtonClassName:c}=e;return(0,a.useMemo)((()=>"footer"===l&&"visible"===(null==t?void 0:t.state)&&r().createElement(Qi,{menuButtonClassName:c,isRoot:n,handleEditClick:o,onCommentDeleted:i,commentId:s})),[s,null==t?void 0:t.state,o,false,n,c,i,l])},Xi=(0,a.memo)((e=>{let{onCommentDeleted:t,handleEditClick:n,commentMeta:o,comment:i,isRoot:s}=e;const l=(0,R.bU)(),{viewType:c}=X(),m=!1,{id:d}=i,{editedTs:u,isPinned:p}=o||{},h=Ji({isRoot:s,commentMeta:o,handleEditClick:n,onCommentDeleted:t,commentId:d,position:"header",menuButtonClassName:g()(Xa,Fa)}),{maybeEditedIcon:f,maybePin:b}=(0,a.useMemo)((()=>({maybePin:p&&r().createElement("span",{className:Fa,title:Ra.pinnedComment(l)},r().createElement(Ea,{className:ja}),"compact"!==c&&r().createElement(Na.x,{className:za,maxLines:1,typography:"text-13-16"},r().createElement(Sa.pinned,null))),maybeEditedIcon:m})),[u,m,p,l,c]);return r().createElement(er,{comment:i,maybeCommentMenu:h,maybePin:b,maybeEditedIcon:f})}));var Yi=n(20482);const es={like:{en:"Like",ru:"ÐÑ€Ð°Ð²Ð¸Ñ‚ÑÑ",_context:"Like button label"},dislike:{en:"Dislike",ru:"ÐÐµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ",_context:"Dislike button label"}},ts=((0,R.Wh)(es),(0,R.bN)(es)),ns=new(y())({id:"like_6d23--react",use:"like_6d23--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="like_6d23--react"><path fill="currentColor" fill-rule="evenodd" d="M12.457.938a1.02 1.02 0 0 0-.997.79c-1.196 5.159-4.292 7.189-4.368 7.239a1.02 1.02 0 0 0-.462.944l.872 10.032c.038.433.396.932 1.015.932h7.414a1.002 1.002 0 0 0 .382-.073c.246-.096 1.555-.66 2.833-2.242 1.35-1.673 2.6-4.404 2.604-8.726a1.02 1.02 0 0 0-1.02-1.022h-5.68l.035-.119c.071-.24.148-.501.228-.784.24-.847.492-1.831.582-2.77.087-.913.041-1.965-.502-2.816-.595-.933-1.62-1.381-2.936-1.385Zm5.133 16.365c.42-1.864 1.572h-6.31l-.746-8.591c1.028-.826 3.33-3.062 4.518-7.252.302.095.44.244.52.367.177.279.27.776.196 1.55-.071.747-.28 1.584-.515 2.414-.062.218-.127.441-.193.663-.168.571-.333 1.132-.421 1.563-.146.712.438 1.223 1 1.223h5.95c-.172 3.318-1.189 5.319-2.135 6.491Z" clip-rule="evenodd" /><path fill="currentColor" d="M4.996 9.913a1 1 0 1 0-1.992.174l.875 10.062a1 1 0 1 0 1.992-.173L4.996 9.913Z" /></symbol>'});function os(e){return _().add(ns),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#like_6d23--react"}))}os.displayName="SpriteSymbolComponent(like_6d23--react)";const as=new(y())({id:"like_filled_b599--react",use:"like_filled_b599--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="like_filled_b599--react"><path fill="currentColor" d="M11.947 1.84a.521.521 0 0 1 .509-.403c1.2.004 2.038.406 2.516 1.155.451.708.509 1.621.425 2.499-.085.891-.325 1.84-.565 2.682-.075.265-.149.516-.219.753-.083.284-.161.548-.226.786h6.343a.52.52 0 0 1 .52.521c-.004 4.22-1.222 6.837-2.493 8.412-1.215 1.505-2.45 2.023-2.628 2.092a.522.522 0 0 1-.195.038H8.517A.519.519 0 0 1 8 19.9L7.128 9.868a.52.52 0 0 1 .235-.482c.143-.092 3.35-2.218 4.584-7.546Zm-6.964 8.447a1 1 0 0 0-1.993.17l.781 9.216a1 1 0 1 0 1.993-.17l-.78-9.216Z" /></symbol>'});function rs(e){return _().add(as),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#like_filled_b599--react"}))}rs.displayName="SpriteSymbolComponent(like_filled_b599--react)";const is=new(y())({id:"dislike_d4b7--react",use:"dislike_d4b7--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dislike_d4b7--react"><path fill="currentColor" fill-rule="evenodd" d="M11.543 23.063c.447.001.884-.3.997-.79 1.196-5.16 4.292-7.19 4.368-7.24a1.02 1.02 0 0 0 .462-.944l-.872-10.032c-.038-.433-.396-.932-1.015-.932H8.07a1.001 1.001 0 0 0-.383.073c-.246.096-1.555.66-2.833 2.243-1.35 1.672-2.6 4.403-2.604 8.725a1.02 1.02 0 0 0 1.02 1.022h5.68l-.035.118c-.071.241-.148.502-.228.785-.24.846-.493 1.831-.582 2.77-.087.913-.041 1.965.502 2.816.595.933 1.62 1.381 2.936 1.386ZM6.41 6.697c.784-.97 1.557-1.42 1.864-1.572h6.31l.746 8.591c-1.028.826-3.33 3.062-4.518 7.252-.302-.095-.44-.244-.52-.367-.177-.279-.27-.776-.196-1.55.071-.747.28-1.584.515-2.414.062-.218.127-.441.193-.663.168-.571.333-1.132.421-1.563.146-.712-.438-1.223-1-1.223h-5.95C4.447 9.87 5.464 7.869 6.41 6.697Z" clip-rule="evenodd" /><path fill="currentColor" d="M19.004 14.087a1 1 0 0 0 1.992-.174l-.875-10.062a1 1 0 0 0-1.992.173l.875 10.063Z" /></symbol>'});function ss(e){return _().add(is),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#dislike_d4b7--react"}))}ss.displayName="SpriteSymbolComponent(dislike_d4b7--react)";const ls=new(y())({id:"dislike_filled_8eec--react",use:"dislike_filled_8eec--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dislike_filled_8eec--react"><path fill="currentColor" d="M12.052 22.16a.52.52 0 0 1-.509.403c-1.2-.004-2.038-.406-2.516-1.155-.451-.708-.509-1.621-.425-2.499.085-.89.326-1.84.565-2.682.075-.265.15-.516.219-.753a40.1 40.1 0 0 0 .226-.786H3.27a.52.52 0 0 1-.52-.521c.004-4.22 1.222-6.837 2.493-8.412C6.457 4.25 7.692 3.732 7.87 3.663a.497.497 0 0 1 .195-.038h7.417c.315 0 .498.254.517.475l.872 10.032a.52.52 0 0 1-.235.482c-.143.092-3.349 2.218-4.584 7.546Zm6.964-8.447a1 1 0 0 0 1.993-.17l-.78-9.215a1 1 0 1 0-1.994.168l.781 9.217Z" /></symbol>'});function cs(e){return _().add(ls),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#dislike_filled_8eec--react"}))}cs.displayName="SpriteSymbolComponent(dislike_filled_8eec--react)";const ms="mitten-button__block--X",ds="mitten-button__active-DO",us={like:{active:{type:"icon",Icon:rs},passive:{type:"icon",Icon:os}},dislike:{active:{type:"icon",Icon:cs},passive:{type:"icon",Icon:ss}}},ps=(0,a.memo)((e=>{let{type:t,isActive:n,onActive:o,onCancel:i}=e;const s=(0,m.Z)({isActive:n,onActive:o,onCancel:i}),l=(0,a.useRef)(!1),c=(0,a.useCallback)((async()=>{if(l.current)return;const{isActive:e,onActive:t,onCancel:n}=s.current;l.current=!0;try{e?await n():await t()}finally{l.current=!1}}),[s]),d=(0,R.bU)();return r().createElement(f.z,{variant:"ghost",onClick:c,className:g()(ms,{[ds]:n}),size:"s",leftContent:us[t][n?"active":"passive"],"aria-label":"like"===t?ts.like(d):ts.dislike(d),"aria-pressed":n})})),hs="comment-footer__block-23",gs="comment-footer__desktop-Nb",fs="comment-footer__commentMenuBtn-1s",bs="comment-footer__btnWithHover-2T",Cs="comment-footer__leftFooterContent-1y",vs="comment-footer__rightFooterContent-vh",ys="comment-footer__feedbackCount-2E",ws="comment-footer__empty-3u",_s="comment-footer__avatarContainer-mm",Es="comment-footer__visible-FX",ks="comment-footer__avatar-35",Is="comment-footer__pencilIcon-3z",xs="comment-footer__additionalText-kb",Ss="comment-footer__pencilContainer-Vk",Rs=(0,a.memo)((e=>{var t;let{id:n,isRoot:o,handleEditClick:i,onCommentDeleted:s,commentMenuBtnClassName:l,handleReplyClick:m}=e;const{publicationChannelOwnerUid:d,viewType:u}=X(),{shouldShowLoginModal:p,showLoginModal:h}=Mt(),b=(0,R.bU)(),C=(0,c.JN)(),v=(0,c.fz)(ke,{commentId:n}),y=C.getInstance(Ee,{uid:d}),w="like"===(null==v?void 0:v.currentUserReaction),_=Nr(n,"like"),E=Nr(n,"cancel_like"),k=Nr(n,"dislike"),I=Nr(n,"cancel_dislike"),x=(0,a.useCallback)((()=>{p?h():m()}),[h,m,p]),S=Ji({isRoot:o,onCommentDeleted:s,handleEditClick:i,commentMeta:v,position:"footer",commentId:n,menuButtonClassName:g()(fs,l)}),M=r().createElement("div",{className:g()(_s,{[Es]:"like"===(null==v?void 0:v.publicationChannelOwnerReaction)})},r().createElement("span",{title:Ra.likedByAuthor(b),className:ks,style:{backgroundImage:tt(y)}})),N=Boolean(null==v?void 0:v.editedTs)&&r().createElement("span",{className:Ss,title:Ra.edited(b)},r().createElement(Ia,{className:Is}),"compact"!==u&&r().createElement(Na.x,{className:xs,maxLines:1,typography:"text-13-16"},r().createElement(Sa.edited,null))),T=M;return r().createElement("div",{className:g()(hs,{[gs]:!0}),"data-testid":"comments-footer"},r().createElement("div",{className:Cs},r().createElement(f.z,{className:bs,variant:"ghost",size:"xs","aria-label":Ra.reply(b),onClick:x},r().createElement(Sa.reply,null))),r().createElement("div",{className:vs},false,r().createElement(ps,{type:"like",isActive:w,onActive:_,onCancel:E}),r().createElement(Na.x,{as:"div",typography:"text-14-18",className:g()(ys,{[ws]:!(null!=v&&v.likes)}),title:Ra.likesCount(b)},(0,Yi.BX)(null!=(t=null==v?void 0:v.likes)?t:0)),r().createElement(ps,{type:"dislike",isActive:"dislike"===(null==v?void 0:v.currentUserReaction),onActive:k,onCancel:I}),T,N,S))})),Ms="comment__block-34",Ns="comment__root-wu",Ts="comment__footerCommentMenu-3d",Ls="comment__commentContent-3-",Bs="comment__formContainer-31",Ps="comment__highlightedArea-PK",Ds="comment__chat-3h",Os=(0,a.memo)((e=>{var t,n;let{id:o,rootRef:i,highlightedAreaRef:l,isRoot:u}=e;const p=(0,wt.Z)(),{newCommentsUseDeepWatchTrigger:h}=xt(),f=(0,c.JN)(),{showSnackbar:b}=(0,s.D)(),C=(0,c.fz)(Ie,{id:o}),v=(0,c.fz)(ke,{commentId:o}),{statsLogger:y,viewType:w}=X(),{config:_}=oe(),E=null!=_&&_.cutAfterLines?_.cutAfterLines:6,[k,I,x]=(0,d.zj)(!1),[S,,M,N]=(0,d.zj)(!1),[T,L,B]=(0,d.zj)(!1),[P,D,O]=(0,d.zj)(!1),{showCaptchaModal:U}=$(),A=Pn(),Z r(Object.assign({},t.current,{publicationPublisherId:n,documentId:o,commentId:e,text:s.trim(),lang:i,imageIds:l}))}),[n,o,e,r,t,i])})(o),z=(e=>{const{paramsMemoRef:t,publicationPublisherId:n,documentId:o}=X(),r=oe(),i=(0,c.JC)(wa),s=(0,m.Z)({publicationPublisherId:n,mutableData:r,restoreCommentRequest:i,paramsMemoRef:t,id:e,documentId:o});return(0,a.useCallback)((async()=>{const{publicationPublisherId:e,restoreCommentRequest:t,mutableData:n,paramsMemoRef:o,id:a,documentId:r}=s.current;await t(Object.assign({},o.current,{documentId:r,publicationPublisherId:e,commentId:a})),n.meta.totalCommentsCount+=1}),[s])})(o),F=(0,m.Z)({comment:C,startLoading:I,isMounted:p,isLoading:k,showSnackbar:b,createCommentRequest:A,rootCommentId:null==C?void 0:C.rootCommentId,id:o,setWasRestored:O,hideReplyInput:M,stopLoading:x,editCommentRequest:Z,hideEditInput:B,restoreCommentRequest:z,showCaptchaModal:U,statsLogger:y}),j=(0,a.useCallback)((()=>{const{statsLogger:e,id:t,comment:n,rootCommentId:o}=F.current;e.push("comments:show",{item_id:t,item_type:"comment",data:{comment_id:t,root_comment_id:o,author_uid:null==n?void 0:n.authorUid,reply_to_comment_id:null==n?void 0:n.replyToCommentId}}),e.once("comments:interface_show")}),[F]),[H,W]=(0,ga.O)();(0,fa.D)(Object.assign({isVisible$:W},h?{onDeepwatch:j}:{onShow:j}));const q=(0,ba.l)([i,H].filter(Boolean)),K=(0,a.useRef)(!1),G=(0,a.useCallback)((async()=>{if(K.current)return;const{restoreCommentRequest:e,setWasRestored:t,isMounted:n,showSnackbar:o}=F.current;K.current=!0;try{await e(),n()&&t()}catch(e){kn.kg.error(e),o(Object.assign({id:"commentCreateFail",title:r().createElement(_n.oc.commentRestoreFail,null)},Ye))}finally{K.current=!1}}),[F]),Q=(0,a.useCallback)((()=>{M(),L()}),[M,L]),J=(0,a.useCallback)((async(e,t)=>{const{startLoading:n,isLoading:o,createCommentRequest:a,rootCommentId:i,id:s,hideReplyInput:l,stopLoading:c,showSnackbar:m,isMounted:d,showCaptchaModal:u}=F.current;if(!o){n();try{const n=V({showCaptchaModal:u,makeRequest:n=>a(Object.assign({rootCommentId:i,replyToCommentId:s,text:e,attachments:t},n))});await n(),d()&&l()}catch(e){kn.kg.error(e),m(Object.assign({id:"commentCreateFail",title:r().createElement(_n.oc.commentCreateFail,}}}),[F]),Y=(0,a.useCallback)((async(e,t)=>{const{startLoading:n,showSnackbar:o,editCommentRequest:a,isLoadintopLoading:l,isMounted:c}=F.current;if(!i){n();try{await a({text:e,attachments:t}),c()&&s()}catch(e){kn.kg.error(e),o(Object.assign({id:"commentEditFail",title:r().createElement(_n.oc.commentEditFail,null)},Ye))}finally{l()}}}),[F]);if(!C)return kn.kg.error(`Comment: no CommentEntityData for id: ${o}`),null;const ee=f.getInstance(Ee,C.authorUid&&{uid:C.authorUid});if(v||kn.kg.error(`Comment: no CommentMeta for id: ${o}`),!ee)return kn.kg.error(`Comment: no CommentsUser author for id: ${o} and uid: ${C.authorUid}`),null;const te=P||"deleted"===(null==v?void 0:v.state),ne="video-chat"===w,[ae]=C.mediaItems||[];return r().createElement("div",{className:g()(Ms,{[Ns]:u,[Ds]:ne}),ref:q},r().createElement("div",{className:Ps,ref:l}),T?r().createElement("div",{className:Bs},r().createElement(ua,{isRoot:u,initialText:C.text,initialMediaItem:ae,onSave:Y,isDisabled:k,documentId:C.documentId,autoFocus:!0,onCancel:B})):r().createElement("div",{className:Ls},r().createElement(Xi,{isRoot:u,onCommentDeleted:D,comment:C,commentMeta:v,handleEditClick:Q}),r().createElement(di,{restoreComment:G,wasCommentDeletedNow:P,canExpandText:!0,commentMeta:v,comment:C,maxTextLinesCount:E,mediaItem:"image"===(null==ae?void 0:ae.type)?ae:void 0,maxleEditClick:Q,commentMenuBtnClassName:Ts})),!T&&S&&r().createElement("div",{className:Bs},r().createElement(ua,{initialText:`${null!=(t=null==(n=ee.publisher)?void 0:n.name)?t:ee.displayName}, `,onSave:J,isDisabled:k,documentId:C.documentId,autoFocus:!0})))})),Us="text-button-spinner__spinner-1Y",As=(0,a.memo)((()=>r().createElement(wn.$,{size:16,className:Us}))),Zs={showMoreRepliesLabel:{en:"Show more replies",ru:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹",_context:""},showReplies:{en:"Show {countLabel} {count, plural, one {reply} other {replies} }",ru:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ {countLabel} {count, plural, one {Ð¾Ñ‚Ð²ÐµÑ‚} few {Ð¾Ñ‚Ð²ÐµÑ‚Ð°} other {Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²} }",_context:""},showMoreReplies:{en:"Show {countLabel} {count, plural, one {more reply} other {more replies} }",ru:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ {countLabel} {count, plural, one {Ð¾Ñ‚Ð²ÐµÑ‚} few {Ð¾Ñ‚Ð²ÐµÑ‚Ð°} other {Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²} }",_context:""},show:{en:"Show",ru:"ÐŸÐ¾ÐºÐÑ‚Ð²ÐµÑ‚",_context:""},twoMoreReplies:{en:"more replies",ru:"Ð¾Ñ‚Ð²ÐµÑ‚Ð°",_context:""},fiveMoreReplies:{en:"more replies",ru:"Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²",_context:""},oneReply:{en:"reply",ru:"Ð¾Ñ‚Ð²ÐµÑ‚",_context:""},twoReplies:{en:"replies",ru:"Ð¾Ñ‚Ð²ÐµÑ‚Ð°",_context:""},fiveReplies:{en:"replies",ru:"Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²",_context:""}},zs=((0,R.Wh)(Zs),(0,R.bN)(Zs));var Fs=n(610);const js=e=>{let{elRef:t,highlightedAreaRef:n}=e;return(0,a.useCallback)((function(e){let{t)return;o|document.ttom+8+window.e:n,type:o}=e;const{firstPart:a,format:r}="initial"===o?{firstPart:zs.show(n),format:{one:zs.oneReply(n),two:zs.twoReplies(n),five:zs.fiveReplies(n)}}:{firstPart:zs.showMore(n),format:{one:zs.oneMoreReply(n),two:zs.tng:n,format:r})}`},Vs="root-comment__childrenContainer-Bv",$s="root-comment__btnWithSpinner-2w",qs="root-comment__textBtn-14",Ks="root-comment__dividerText-1Z",Gs=(0,a.memo)((e=>{let{id:t}=e;const n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=js({elRef:n,highlightedAreaRef:o}),l=(0,wt.Z)(),d=(0,R.bU)(),{showSnackbar:u}=(0,s.D)(),[p,h]=(0,a.useState)([]),[g,b]=(0,a.useState)(),{paramsMemoRef:C,documentId:v,publicationPublisherId:y,viewType:w}=X(),_=oe(),E=(0,c.fz)(Ie,{id:t}),k=(0,c.fz)(ke,{commentId:t}),I="video-chat"===w?"div":r().Fragment;(0,oo.Z)((()=>{null!=k&&k.isHighlighted&&n.current&&i()}));const{isLoadInProgressRef:x,showLoader:S,stopShowingLoader:M,isShowingLoader:N}=yn(),T=(0,c.JC)(vt),L=(0,m.Z)({documentId:v,publicationPublisherId:y,isMounted:l,childComments:p,fetchChildrenEndpoint:T,id:t,showSnackbar:u,mutableData:_,showLoader:S,moreItemsQueryParams:g,stopShowingLoader:M}),B=(0,a.useCallback)((async()=>{if(x.current)return;const{moreItemsQueryParams:e,showSnackbar:t,fetchChildrenEndpoint:n,id:o,showLoader:a,stopShowingLoader:i,documentId:s,publicationPublisherId:l}=L.current;a();try{const t=await n(Object.assign({},C.current,{documentId:s,publicationPublisherId:l,rootCommentId:o,withConfig:!1,moreItemsOverrideParams:e,withCurrentUser:!0}));if(await i(),!L.current.isMounted()||!t.items.length)return;const{mutableData:a}=L.current;b(rt(t.moreItemsQueryString)),function(e,t,n){let{filterReceivedItemsInSubthreadId:o}=void 0===n?{}:n;(0,ie.runInAction)((()=>{yt(e,t,{mergeAppliedSorting:!1});const n=o&&e.subthreadByCommentId.get(`${o}`);if(null==n||!n.length||!t.items.length)return;const a=Object.create(null);for(let e=0;e<t.items.length;e++)a[t.items[e].entityData.id]=!0;const r=n.filter((e=>!a[e.entityData.id]));r.length!==n.length&&e.subthreadByCommentId.set(`${o}`,r)}))}(a,t,{filterReceivedItemsInSubthreadId:o}),h((e=>e.concat(t.items)))}catch(e){kn.kg.error(e),t(Object.assign({id:"failedToLoadComments",title:r().createElement(_n.oc.failedToLoadComments,null)},Ye))}finally{await i()}}),[x,C,L]);if(!E)return kn.kg.error(`RootComment: no CommentEntityData for id: ${t}`),null;k||kn.kg.error(`RootComment: no CommentMeta for id: ${t}`);const P=(null==k?void 0:k.childrenCount)||0,D=Boolean(P&&!p.length);return r().createElement(I,null,r().createElement(Os,{rootRef:n,highlightedAreaRef:o,id:t,isRoot:!0}),r().createElement(Qs,{childComments:p}),g||D?r().createElement("div",{className:$s},r().createElement(f.z,{variant:"ghost",size:"xs",ota:{id:t}}=e;return r().createElement(Os,{key:t,id:t,isRoot:!1})}))):null})),Js=(0,a.memo)((e=>{let{id:t}=e;const n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=js({elRef:n,highlightedAreaRef:o}),{subthreadByCommentId:s}=(()=>{const e=(0,a.useContext)(Y);if(null===e)throw new Error("CommentsContext not configured");return e})(),l=s.get(`${t}`),c=(0,m.Z)((0,ha.Z)(l));return(0,a.useEffect)((()=>{var e;const t=n.current;null!=l&&l.length&&t&&(c.current&&l.length<=(null==(e=c.current)?void 0:e.length)||i({withBackgroundColor:!0}))}),[l,c,i]),null!=l&&l.length?r().createElement("div",{className:g()(Vs)},l.map(((e,t)=>{let{entityData:{id:a}}=e;createElement(Os,(0,Ae.Z)({key:a,id:a,isRoot:!1},i))}))):null})),Xs=(0,a.memo)((e=>{nt(ntityData:n}=e;return"comment"===t?r().createElement(Gs,{key:n.id,id:n.id}):null})):null)})),Ys=(0,a.memo)((e=>{let{createdRootComments:t,setCreatedRootComments:n}=e;return r().createElement(r().Fragment,null,r().createElement(pa,{setCreatedRootComments:n}),r().createElement(Xs,{items:t}))}));var el,tl=n(62254),nl=n(55738),ol=(n(60120),n(57838)),al=n(69402),rl=n(43444),il=function(e){var t=e.side,n=e.provider,o=(0,ol.__rest)(e,["side","provider"]);return n(ll("Icon",{side:t},[o.className]))},sl=function(e){var t=e.children,n=e.className,o=(0,ol.__rest)(e,["children","className"]);return r().createElement("span",(0,ol.__assign)({},o,{className:ll("Text",null,[n])}),t)},ll=(0,or.cn)("Button2"),cl={autoComplete:"off",pressKeys:[rl.R.SPACE,rl.R.ENTER],prvntKeys:[],as:"button",type:"button"},ml=((el=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=(0,a.createRef)(),t.onKeyDown=function(e){(0,rl.S)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),(0,rl.S)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){(0,rl.S)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),(0,rl.S)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/setState({pressed:!0}),void 0e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){!1}),void 0!==t.props.onBlur&&t.props.onBlur(e)},t}return(0,ol.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,o=e.autoComplete,a=e.checked,i=e.children,s=e.icon,l=e.iconLeft,c=e.iconRight,m=e.progress,d=e.disabled,u=e.as,p=e.type,h=e.className,g=e.innerRef,f=e.controlRef,b=e.title,C=e.role,v=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,(0,ol.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),y=this.state.pressed,w=u;v["string"==typeof u?"ref":"innerRef"]=(0,al.Q)(this.internalInnerRef,g,f);var _=l||s,E=Boolean(i)&&!0!==i||0===i;return r().createElement(w,(0,ol.__assign)({},v,{type:p,disabled:Boolean(m||d),className:ll({checked:a,progress:m,pressed:y},[h]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onBlur:this.onBlur,"aria-pressed":a,"aria-disabled":d,autoComplete:o,title:b,role:C,"aria-busy":m}),n,_&&r().createElement(il,{provider:_,side:E&&l?"left":void 0}),c&&r().createElement(il,{provider:c,side:E?"right":void 0}),E&&r().createElement(sl,null,i),t)},t}(a.PureComponent)).displayName=ll(),el.defaultProps=cl,el),dl=(0,nl.withBemMod)(ll(),{baseline:!0}),ul=(0,nl.withBemMod)(ll(),{pin:"brick-brick"}),pl=(0,nl.withBemMod)(ll(),{pin:"brick-circle"}),hl=(0,nl.withBemMod)(ll(),{pin:"brick-clear"}),gl=(0,nl.withBemMod)(ll(),{pin:"brick-round"}),fl=(0,nl.withBemMod)(ll(),{pin:"circle-brick"}),bl=(0,nl.withBeme-clear"}),vl=(0,nl.withBemMod)(ll(),{pin:"clear-brick"}),yl=(0,nl.withBemMod)(ll(),{pin:"clear-circle"}),wl=(0,nl.withBemMod)(ll(),{pin:"clear-clear"}),_l=(0,nl.withBemMod)(ll(),{pin:"clear-round"}),El=(0,nl.withBemMod)(ll(),{pin:"round-brick"}),kl=(0,nl.withBemMod)(ll(),{pin:"round-clear"}),Il=(0,nl.withBemMod)(ll(),{size:"l"}),xl=(0,nl.withBemMod)(ll(),{size:"m"}),Sl=(0,nl.withBemMod)(ll(),{size:"s"}),Rl=(0,nl.withBemMod)(ll(),{theme:"action"}),Ml=(0,nl.withBemMod)(ll(),{theme:"clear"}),Nl=(0,nl.withBemMod)(ll(),{theme:"link"}),Tl=(0,nl.withBemMod)(ll(),{theme:"normal"}),Ll=(0,nl.withBemMod)(ll(),{theme:"pseudo"}),Bl=(0,nl.withBemMod)(ll(),{theme:"raised"}),Pl=(0,nl.withBemMod)(ll(),{theme:"websearch"}),Dl=(0,nl.withBemMod)(ll(),{type:"link"},(function(e){return function(t){t.type;var n=t.target,o=t.rel,a=t.url,i=t.disabled,s=t.tabIndex,l=(0,ol.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),c=o;!==o&&-1===o.indexOf("noopener")&&(c=o+" noopener"),r().createElement(e,(0,ol.__assign)({},l,{rel:c,target:)(ll(),{width:"auto"}),Wl=(0,nl.withBemMod)(ll(),{width:"max"}),Vl=(0,nl.compose)((0,nl.composeU)((0,nl.composeU)(ul,pl,hl,gl,fl,bl,Cl,vl),yl,wl,_l,El,kl),(0,nl.composeU)(Il,xl,Sl),(0,nl.composeU)(Rl,Ml,Nl,Tl,Ll,Bl,Pl),(0,nl.composeU)(Dl,Ol),(0,nl.composeU)(Hl,Wl),(0,nl.composeU)(Ul,Al,Zl,zl,Fl,jl),dl)(ml),$l=n(70478),ql=function(e,t){return t.reduce((function(t,n){return t.concat(e(n))}),[])},Kl=n(75212),Gl=function(e){return ql((function(e){return e.items?e.items:e}),e)},Ql=function(e){return void 0!==e.items},Jl=function(e){return void 0===e&&(e=0),function(){return e++}},Xl=(0,or.cn)("Menu"),Yl=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={hoveredIndex:n.props.focused?0:-1},n.innerRef=(0,a.createRef)(),n.itemsRef=[],n.uniqId=String(Date.now())+Math.floor(1e4*Math.random()),n.mapChildren=function(e,t){var o=e.Item,i=e.Group,s=t.getNextItemCount,l=t.getNextGroupCount,c=t.disabled;return function(e){if(Ql(e)){var t=l();return r().createElement(i,(0,ol.__assign)({title:e.title,key:"group-"+t},e.unsafe_props),e.items.map(n.mapChildren({Item:o,Group:i},{getNextItemCount:s,getNextGroupCount:l,disabled:c})))}var m=n.props,d=m.value,u=m.view,p=n.state.hoveredIndex,h=[].concat(d),g="default"===u&&void 0!==d,f=s();return n.itemsRef[f]=(0,a.createRef)(),r().createElement(o,(0,ol.__assign)({},e.unsafe_props,{id:e.id||"item-"+n.uniqId+"-"+f,keyitem-"+f,needIconGlyph:g,checked:-1!==h.indexOf(e.value),disabled:e.disabled||c,hovered:!c&&p===f,onMouseEnter:n.setHoveredOnMouseEnter,onMouseLeave:n.setHoveredOnMouseLeave,onClick:n.onMenuItemClick,type:void 0===d?d:"option",innerRef:n.itemsRef[f],value:e.value,index:f}),e.content)}},n.onKeyDown=function(e){if(!e.shiftKey&&(0,rl.S)(e.keyCode,[rl.R.UP,rl.R(0,rl.S)(e.keyCode,[rl.R.ENTER,rl.R.SPACE])&&(e.preventDefault(),n.triggerOnChange())},n.onMenuItemClick=function(e,t){n.setState({hoveredIndex:t},(function(){n.triggerOnChange()}))},n.setHoveredOnMouseEnter=function(e,t){n.setState({hoveredIndex:t})},n.setHoveredOnMouseLeave=function(e,t){n.setState({hoveredIndex:-1})},n}return(0,ol.__extends)(t,e),t.prototype.componentDidMount=function(){this.forwardRefs(),this.props.focused&&(this.subscribeToEvents(),this.hoverAndScrollToFirstSelectedElement())},t.prototype.componentDidUpdate=function(e){this.forwardRefs(),!e.focused&&this.props.focused?(this.subscribeToEvents(),this.hoverAndScrollToFirstSelectedElement()):e.focused&&!this.props.focused?(this.setState({hoveredIndex:-1}),this.unsubscribeFromEvents()):this.props.focused&&e.items.length!==this.props.items.length&&this.hoverAndScrollToFirstSelectedElement()},t.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},t.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.disabled,a=(t.focused,t.items),i=(t.onChange,t.onActiveItemChange,t.value),s=(t.innerRef,t.renderItem),l=(0,ol.__rest)(t,["className","disabled","focused","items","onChange","onActiveItemChange",rItem"]);return r().createElement(tl.ComponentRegistryConsumer,{id:Xl()},(function(t){var c=t.Item,m=t.Group;return r().createElement(Kl.CU,{component:c,render:s},(function(t){var s=Jl(),c=Jl();return r().createElement("div",(0,ol.__assign)({},l,{ref:e.innerRef,"aria-disabled":o,"aria-multiselectable":Array.isArray(i),role:void 0!==i?"listbox":void 0,className:Xl(null,[n])}),a.map(e.mapChildren({Item:t,Group:m},{getNextItemCount:s,getNextGroupCount:c,disabled:o})))}))}))},t.prototype.forwardRefs=function(){(0,al.l)(this.innerRef,this.props.innerRef)},t.scrollToItem=function(e,t){if(null!==e.current&&void 0!==t&&null!==t.current){var n,o=e.current.getBoundingClientRect().top,a=t.current.getBoundingClientRect().top;a<o?n=a-o:(n=a+t.current.offsetHeight-o-e.current.offsetHeight)<0&&(n=0),e.current.scrollTop=e.current.scrollTop+n}},t.prototype.subscribeToEvents=function(){document.addEventListener("keydown",this.onKeyDown,!0)},t.prototype.unsubscribeFromEvents=function(){document.removeEventListener("keydown",this.onKeyDown,!0)},t.prototype.hoverAndScrollToFirstSelectedElement=function(){var e=[].concat(this.props.value),n=Gl(this.props.items).reduce((function(t,n,o){return t<0&&-1!==e.indexOf(n.value)?o:t}),-1);t.scrollToItem(this.innerRef,this.itemsRef[n]),this.setState({hoveredIndex:n<0?0:n})},t.prototype.getNextNotDisabledIndex=function(e){for(var t=this.state.hoveredIndex,n=0,o=Gl(this.props.items);n<o.length&&(n++,(t+=e)<0&&(t=o.length-1),t>=o.length&&(t=0),o[t].disabled););return t},t.prototype.triggerOnMenuItemChange=function(e){var t=this.props.onActiveItemChange;if(void 0!==t&&null!==this.innerRef.current){var n=this.innerRef.current.querySelector('[data-key="item-'+e+'"]');n&&t(n.id)}},t.prototype.triggerOnChange=function(){var e=this.props,t=e.onChange,n=e.value,o=this.state.hoveredIndex;if(void 0!==t){var a=Gl(this.props.items),r=-1===o?"":a[o].value;if(Array.isArray(n)){var i=(0,ol.__spread)(n);-1!==i.indexOf(r)?i=i.filter((function(e){return e!==r})):i.push(r),r=i}t({target:{value:r}})}},t.displayName=Xl(),t}(a.PureComponent);var ec=(0,or.cn)("Icon"),tc=function(e){var t=e.direction,n=e.size,o=e.url,a=e.style,i=void 0===a?{}:a,s=e.children,l=e.title,c=e.onClick,m=(e.type,e.glyph,(0,ol.__rest)(e,["direction","size","url","style","children","title","onClick","type","glyph"])),d=ec({direction:t,size:n},[m.className]);return void 0!==o&&(i.backgroundImage="url('"+o+"')"),r().createElement("span",(0,ol.__assign)({},m,{"aria-hidden":!0,className:d,style:i,title:l,onClick:c}),s)};tc.displayName=ec();var nc=(0,nl.withBemMod)(ec(),{glyph:"type-check"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"10"},r().createElement("path",{d:"M7.207 7.506L3.629 3.81 2.343 4.939l4.841 5.002 8.462-8.428L14.382.362z"})))}})),oc=new tl.Registry({id:Xl()});oc.set("Group",(function(e){var t=e.children,n=e.className,o=e.title,a=(0,ol.__rest)(e,["children","className","title"]),i=(0,tl.useComponentRegistry)(Xl()).Title;return r().createElement("div",(0,ol.__assign)({},a,{role:"group",className:Xl("Group",null,[n])}),o&&r().createElement(i,null,o),t)})).set("Item",(function(e){var t=e.needIconGlyph,n=e.children,o=e.innerRef,i=(e.value,(0,ol.__rest)(e,["needIconGlyph","children","innerRef","value"])),s=(0,tl.useComponentRegistry)(Xl()),l=s.Text,c=s.Icon,m=function(e){var t=e.checked,n=e.className,o=e.disabled,r=e.hovered,i=e.type,s=void 0===i?"menuitem":i,l=e.id,c=e.index,m=e.onClick,d=e.onMouseEnter,u=e.onMouseLeave,p=(0,ol.__rest)(e,["checked","className","disabled","hovered","type","id","index","onClick","onMouseEnter","onMouseLeave"]),h=(0,a.useCallback)((function(e){m&&m(e,c)}),[c,m]),g=(0,a.useCallback)((function(e){d&&d(e,c)}),[c,d]),f=(0,a.useCallback)((function(e){u&&u(e,c)}),[c,u]);return(0,ol.__assign)((0,ol.__assign)({},p),{"aria-selected":t,"aria-disabled":o,id:l,role:s,className:Xl("Item",{checked:t,disabled:o,hovered:r,type:s},[n]),onClick:h,onMouseEnter:g,onMouseLeave:f})}(i);return r().createElement("div",(0,ol.__assign)({ref:o},m),t&&r().createElement(c,{glyph:"type-check"}),r().createElement(l,null,n))})).set("Text",(function(e){var t=e.children,n=e.className,o=(0,ol.__rest)(e,["children","className"]);return r().createElement("span",(0,ol.__assign)({},o,{className:Xl("Text",null,[n])}),t)})).set("Title",(function(e){var t=e.children,n=e.className,o=(0,ol.__rest)(e,["children","className"]);return r().createElement("div",(0,ol.__assign)({},o,{"aria-hidden":!0,className:Xl("Title",null,[n])}),t)})).set("Icon",nc(tc));var ac=(0,tl.withRegistry)(oc)(Yl),rc=(0,nl.withBemMod)(Xl(),{size:"m"}),ic=(0,nl.withBemMod)(Xl(),{size:"s"}),sc=(0,nl.withBemMod)(Xl(),{theme:"normal"}),lc=(0,nl.withBemMod)(Xl(),{view:"default"}),cc=(0,nl.withBemMod)(Xl(),{width:"auto"}),mc=(0,nl.withBemMod)(Xl(),{width:"max"}),dc=n(52982);function uc(e){var t=[],n={createCollection:uc};return a.Children.forEach(e,(function(e){if(function(e){return(0,a.isValidElement)(e)&&e.type===aion(e){if((0,a.isValidElement)(e)){var t=e.type;return"function"==typeof t&&"function"==typeof t.getCollectionNode}return!1}(e))t.push(e.type.getCollectionNode(e.props,n));else if(e)throw new Error("Unknown element of the children")})),t}var pc,hc,gc=(0,nl.compose)((0,nl.composeU)(rc,ic),(0,nl.composeU)(cc,mc),lc,sc)((pc=ac,(hc=function(e){var t=e.items,n=(e.children,(0,ol.__rest)(e,["items","children"])),o=function(e){var t=e.children;return(0,a.useMemo)((function(){return uc(t)}),[t])}(e);return r().createElement(pc,(0,ol.__assign)({},n,{items:t||o}))}).displayName="withJsxContent("+(0,dc.G)(pc)+")",hc)),fc=(0,nl.withBemMod)(ec(),{glyph:"carets-v"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14"},r().createElement("path",{d:"M4 0l4 6H0l4-6zm0 14l4-6H0l4 6z"})))}})),bc=(0,nl.withBemMod)(ec(),{glyph:"type-arrow"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),"xs"===o.size?r().createElement("svg",{focusable:"false",width:"11",height:"7",xmlns:"http://www.w3.org/2000/svg"},r().createElement("path",{d:"M9.25 1L5.5 4.6 1.75 1 1 1.72 5.5 6 10 1.72 9.25 1z"})):r().createElement("svg",{focusable:"false",width:"13",height:"8",xmlns:"http://www.w3.org/2000/svg"},r().createElement("path",{d:"M11.3 1L6.5 5.7 1.7 1l-.7.7L6.5 7 12 1.7l-.7-.7z"})))}})),Cc=(0,nl.withBemMod)(ec(),{glyph:"type-close"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},r().createElement("polygon",{points:"10,0.714 9.287,0 5,4.286 0.714,0 0,0.714 4.286,5 0,9.285 0.714,10 5,5.714 9.287,10 10,9.285 5.714,5"})))}})),vc=(0,nl.withBemMod)(ec(),{glyph:"type-cross"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),"xs"===o.size?r().createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},r().creat0.7 9.3,0 5,4.3 0.7,0 0,0.7 4.3,5 0,9.3 0.7,10 5,5.7 9.3,10 10,9.3 5.7,5"})):r().createElement("svg",{focusable:"false",xmlns:"http://www4"},r().crea7,6.3 014,13.3 7.7,7"})))}})),yc=(0,nl.withBemMod)(ec(),{glyph:"type-cross-websearch"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},r().createElement("path",{d:"M6.586 8L.93 2.343 2.342.93 8 6.585 13.657.93l1.414 1.413L9.42 8l5.657 5.657-1.413 1.414L8 9.42l-5.657 5.65L.93 13.658 6.585 8z"})))}})),wc=(0,nl.withBemMod)(ec(),{glyph:"type-filter"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 16",width:"20",height:"16"},r().createElement("path",{d:"M7.17 12H0v2h7.17c.413 1.165 1.524 2 2.83 2s2.417-.835 2.83-2H20v-2h-7.17c-.413-1.165-1.524-2-2.83-2s-2.417.835-2.83 2zm-7-10H0v2h.17C.584 5.165 1.695 6 3 6s2.417-.835 2.83-2H20V2H5.83C5.416.835 4.305 0 3 0S.583.835.17 2z"})))}})),_c=(0,nl.withBemMod)(ec(),{glyph:"type-indeterminate"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r().createElement("path",{fill:"#fff",d:"M4 7h9v3H4z"})))}})),Ec=(0,nl.withBemMod)(ec(),{glyph:"type-tick"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{width:"14",height:"10",viewBox:"0 0 14 10"},r().createElement("path",{d:"M1.49 4.885l1.644-1.644 4.385 4.385L5.874 9.27 1.49 4.885zm4.384 1.096L11.356.5 13 2.144 7.519 7.626 5.874 5.98v.001z"})))}})),kc=(0,nl.withBemMod)(ec(),{glyph:"x-sign"},(function(e){return function(t){var n=t.className,o=(0,ol.__rest)(t,["className"]);return r().createElement(e,(0,ol.__assign)({},o,{className:ec({hasGlyph:!0},[n])}),r().createElement("svg",{viewBox:"0 0 20 20"},r().createElement("path",{focusable:"false",width:"0",height:"0",d:"M10,20 C4.5,20 0,15.5 0,10 C0,4.5 4.5,0 10,0 C15.5,0 20,4.5 20,10 C20,15.5 15.5,20 10,20 L10,20 L10,20 L10,20 Z M15,6.4 L13.6,5 L10,8.6 L6.4,5 L5,6.4 L8.6,10 L5,13.6 L6.4,15 L10,11.4 L13.6,15 L15,13.6 L11.4,10 L15,6.4 L15,6.4 L15,6.4 L15,6.4 Z"})))}})),Ic=(0,nl.withBemMod)(ec(),{type:"arrow"}),xc=(0,nl.withBemMod)(ec(),{type:"close"}),Sc=(0,nl.withBemMod)(ec(),{type:"cross"}),Rc=(0,nl.withBemMod)(ec(),{type:"cross-websearch"Nc=(0,nl.compose)((0,nl.composeU)((0,nl.composeU)(fc,bc,nc,Cc,vc,yc,wc),_c,Ec,kc),(0,nl.composeU)(Ic,xc,Sc,Rc,Mc))(tc),Tc={},Lc={zIndexGroupLevel:0},Bc={name:"applyMinWidth",enabled:!0,fn:function(e){var t=e.state;t.styles.popper.minWidth=t.rects.reference.width+"px"},effect:function(e){var t=e.state;t.elements.reference instanceof HTMLElement&&(t.elements.popper.style.minWidth=t.elements.reference.offsetWidth+"px")},phase:"beforeWrite",requires:["computeStyMaxHeight",enabled:!0,fn:function(e){var t=e.state,n=e.options,o=n.maxHeight,a=n.padding,r=void 0===a?16:a,i=(0,Dc.Z)(t,{padding:r}),s=(t.modifiersData.preventOverflow||{y:0}).y,l=t.rects.popper.height,c=(0,ol.__read)(t.placement.split("-"),1)[0],m=l-i["top"===c?"top":"bottom"]-s,d=o?Math.min(m-s,o):m;t.styles.popper=(0,ol.__assign)((0,ol.__assign)({},t.styles.popper),{maxHeight:d+"px"})},phase:"main",requires:["computeStyles"]};var Uc=(0,or.cn)("Select2"),Ac=(Pc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.innerRef=(0,a.createRef)(),t.triggerRef=(0,a.createRef)(),t}return(0,ol.__extends)(t,e),t.prototype.componentDidMount=function(){this.forwardRefs()},t.prototype.componentDidUpdate=function(){this.forwardRefs()},t.prototype.render=function(){var e=this,t=this.props,n=t.addonAfter,o=t.addonBefore,a=t.className,i=t.disabled,s=t.onBlur,l=t.onClick,c=t.onKeyDown,m=t.opened,d=t.size,u=t.theme,p=t.value,h=t.view,g=t.style,f=t.checkable,b=void 0===f||f,C=t.iconProps,v=t.renderTrigger,y=t.renderTriggerIcon,w=t.activeDescendant,_=!(!b||!Array.isArray(p))&&p.length>0,E=h||C&&C.glyph?void 0:"arrow",k=!h||C&&C.type?void 0:"carets-v";return r().createElement(tl.ComponentRegistryConsumer,{id:Uc()},(function(t){var f=t.Trigger,b=t.Icon;return r().createElement(Kl.Up,{components:[[f,v],[b,y]]},(function(t,f){return r().createElement("span",{ref:(0,al.Q)(e.innerRef,e.props.innerRef),className:Uc({disabled:i},[a])},o,r().createElement(t,{width:"max",role:"listbox","aria-haspopup":"true",disabled:i,className:Uc("Button"),innerRef:e.triggerRef,style:g,size:d,theme:u,checked:_,view:h,onClick:l,onKeyDown:c,onBlur:s,pressKeys:[rl.R.SPACE],iconRight:function(e){return r().createElement(f,(0,ol.__assign)({size:d,className:e,direction:m?"top":"bottom",type:E,glyph:k},C))},"aria-activedescendant":w,"aria-expanded":m,"aria-multiselectable":Array.isArray(p)},e.getButtonText()),n)}))}))},t.prototype.forwardRefs=function(){(0,al.Q)(this.props.triggerRef)(this.triggerRef.current)},t.prototype.getButtonText=function(){var e=this.props,t=e.value,n=e.options,o=e.showAlwaysPlaceholder,a=e.placeholder,r=[].concat(t).filter((function(e){return void 0!==e}));if(!o&&r.length>0){var i=this.getOptionsText(n,r);if(i.length>0)return i}retunction(e){return e.items?e.iteion(e){return e.checkedText||e.content})).join(", ")},t}(a.PureComponent),Pc.displayName=Uc(),Pc.defaultProps={placeholder:"â€”",value:""},Pc),Zc=new tl.Registry({id:Uc()});Zc.set("Trigger",(function(){throw new Error('Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ "Select" Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ "Trigger" Ð² Ñ€ÐµÐµÑÑ‚Ñ€ "'+Uc()+'".')})).set("Icon",(function(){throw new Error('Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ "Select" Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ "Icon" Ð² Ñ€ÐµÐµÑÑ‚Ñ€ "'+Uc()+'".')})).set("Popup",(function(){throw new Error('Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ "Select" Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ "Popup" Ð² Ñ€ÐµÐµÑÑ‚Ñ€ "'+Uc()+'".')})).set("Menu",(function(){throw new Error('Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ "Select" Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ "Menu" Ð² Ñ€ÐµÐµÑÑ‚Ñ€ "'+Uc()+'".')}));var zc,Fc=function(e){return void 0!==e.items?r().createElement("optgroup",{key:e.title,label:e.title},e.items.map(Fc)):r().createElement("option",{key:e.value,value:e.value,disabled:e.disabled},e.content)},jc=["bottom-start","bottom-end","top-start","top-end"],Hc=(zc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeDescendant:void 0},t.innerRef=(0,a.createRef)(),t.controlRef=(0,a.createRef)(),t.triggerRef=(0,a.createRef)ef)(),t.preventClosable=!1,t.subscribeToEvents=function(){document.addEventListener("mousedown",t.onDocumentMouseDown,!0),window.addEventListener("resize",t.onWindowChange),window.addEventListener("orientationchange",t.onWindowChange)},t.unsubscribeFromEvents=function(){document.removeEventListener("mousedown",t.onDocumentMouseDown,!0),window.removeEventListener("resize",t.onWindowChange),window.removeEventListener("orientationchange",t.onWindowChange)},t.onDocumentMouseDown=function(e){var n=t.popupRef.current;null!==n&&n.contains(e.target)&&(t.preventClosable=!0)},t.onClosePopup=function(){void 0!==t.props.setOpened&&t.props.setOpened(!1)},t.onWindowChange=function(){void 0!==t.props.setOpened&&t.props.setOpened(!1)},t.onBlur=function(e){t.preventClosable?t.preventClosable=!1:(requestAnimationFrame((function(){var e=t.popupRef.current;t.props.setOpened&&e&&!e.contains(document.activeElement)&&t.props.setOpened(!1)})),void 0!==t.props.onBlur&&t.props.onBlur(e))},t.onClick=function(e){6!==e.nativeEvent.mozInputSource&&(void 0!==t.props.setOpened&&t.props.setOpened(!t.props.opened),void 0!==t.props.onClick&&t.props.onClick(e))},t.onKeyDown=function(e){(0,rl.S)(e.keyCode,[rl.R.ENTER])&&e.preventDefault(),(0,rl.S)(e.keyCode,[rl.R.UP,rl.R.DOWN])&&(e.preventDefault(),void 0!==t.props.setOpened&&t.props.setOpened(!0)),(0,rl.S)(e.keyCode,[rl.R.SPACE])&&(void 0===t.props.setOpened||e.defaultPrevented||(e.preventDefault(),t.props.opened||t.props.setOpened(!0))),t.props.opened&&void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onActiveItemChange=function(e){t.setState({activeDescendant:e})},t.onMenuChange=function(e){if(t.controlRef.current){var n=e.target.value;e.target=t.controlRef.current,e.target.value=n}(0,Pt.unstable_batchedUpdates)((function(){void 0!==t.props.onChange&&t.props.onChange(e),void 0!==t.props.setOpened&&(Array.isArray(t.props.value)||t.props.setOpened(!1))})),t.preventClosable&&(t.preventClosable=!1)},t}return(0,ol.__extends)(t,e),t.prototype.componentDidMount=function(){this.forwardRefs()},t.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},t.prototype.componentDidUpdate=function(e){this.forwardRefs(),!e.opened&&this.props.opened?this.subscribeToEvents():e.opened&&!this.props.opened&&this.unsubscribeFromEvents()},t.prototype.render=function(){var e=this,t=this.props,n=t.addonAfter,o=(t.maxHeight,t.opened),a=t.setOpened,i=t.options,s=(t.popupRef,t.size),l=t.theme,c=t.unsafe_scope,m=void 0===c?this.innerRef:c,d=t.value,u=t.view,p=t.renderControl,h=void 0!==p&&p,g=t.renderMenu,f=(0,ol.__rest)(t,["addonAfter","maxHeight","opened","setOpened","options","popupRef","size","theme","unsafe_scope","value","view","renderControl","renderMenu"]);return r().createElement(tl.ComponentRegistryConsumer,{id:Uc()},(function(t){var c=t.Popup,p=t.Menu;return r().createElement(Kl.CU,{component:p,render:g},(function(t){return r().createElement(Ac,(0,ol.__assign)({},f,{triggerRef:e.triggerRef,activeDescendant:e.state.activeDescendant,innerRef:(0,al.Q)(e.innerRef,e.props.innerRef),onBlur:e.onBlur,onClick:e.onClick,onKeyDown:e.onKeyDown,options:i,size:s,theme:l,value:d,view:u,opened:o,setOpened:a,addonAfter:r().createElement(r().Fragment,null,h&&r().createElement("select",(0,ol.__assign)({},f,{multiple:Array.isArray(d),tabIndex:-1,value:d,ref:e.controlRef,style:{display:"none"}}),i.map(Fc)),r().createElement(c,{target:"anchor",anchor:e.triggerRef,className:Uc("Popup"),direction:jc,view:u,theme:l,visible:o,innerRef:(0,al.Q)(e.popupRef,e.props.popupRef),onClose:e.onClosePopup,scope:m,modifiers:[Bc,(0,ol.__assign)((0,ol.__assign)({},Oc),{options:{maxHeight:e.props.maxHeight}})]},r().createElement(t,{width:"max",className:Uc("Menu"),focused:o,items:i,onChange:e.onMenuChange,onActiveItemChange:e.onActiveItemChange,size:s,theme:l,value:d,view:u})),n)}.forwardRefs=function(){(0,al.Q)(this.props.triggerRef)(this.triggerRef.current)},t}(a.PureComponent),zc.displayName=Uc()+"@desktop",zc),Wc=(0,tl.withRegistry)(Zc)(Hc),Vc=(0,nl.withBemMod)(Uc(),{baseline:!0}),$c=(0,nl.withBemMod)(Uc(),{width:"max"}),qc=new tl.Registry({id:Uc()}).set("Trigger",Vl).set("Popup",(0,nl.compose)((function(e){var t;return t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentZIndex=0,e.innerRef=(0,a.createRef)(),e}return(0,ol.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.updateZIndexPosition()},n.prototype.componentDidUpdate=function(e){e.visible!==this.props.visible&&this.updateZIndexPosition()},n.prototype.componentWillUnmount=function(){0!==this.currentZIndex&&this.releaseZIndex(this.props.zIndexGroupLevel,this.currentZIndex)},n.prototype.render=function(){var t=this.props,n=(t.zIndexGroupLevel,(0,ol.__rest)(t,["zIndexGroupLevel"]));return r().createElement(e,(0,ol.__assign)({},n,{innerRef:(0,al.Q)(this.innerRef,this.props.innerRef)}))},n.prototype.updateZIndexPosition=function(){var e=this;requestAnimationFrame((function(){var t=e.props,n=t.visible,o=t.zIndexGroupLevel;n&&0===e.currentZIndex?e.currentZIndex=e.captureZIndex(o):n||(e.currentZIndex=e.releaseZIndex(o,e.currentZIndex)),n&&(null!==e.innerRef.current?e.innerRef.current.style.zIndex=String(e.currentZIndex):e.updateZIndexPosition())}))},n.prototype.captureZIndex=function(e){var t=Tc[e];void 0===t&&(t=[1e3*(e+1)],Tc[e]=t);var n=t[t.length-1]+1;return t.push(n),n},n.prototype.releaseZIndex=function(e,t){var n=Tc[e];return void 0!==n&&n.length>1&&n.splice(n.indexOf(t),1),0},n}(a.PureComponent),t.displayName="withZIndex("+(0,dc.G)(e)+")",t.defaultProps=Lc,t}))($l.GI)).set("Menu",gc).set("Icon",Nc),Kc=(0,nl.compose)((function(e){var t=(0,a.memo)((function(t){var n=t.opened,o=t.setOpened,i=(0,ol.__read)((0,a.useState)(Boolean(n)),2),s=i[0],l=i[1];(0,a.useEffect)((function(){"boolean"==typeof n&&s!==n&&l(n)}),[s,n]);var c=(0,a.useCallback)((function(e){l(e),o&&o(e)}),[o]);return r().createElement(e,(0,ol.__assign)({},t,{opened:s,setOpened:c}))}));return t}),Vc,$c,(0,tl.withRegistry)(qc))(Wc);const Gc=Kc;var Qc=n(48149);const Jc=new(y())({id:"chevron_down_cbc4--react",use:"chevron_down_cbc4--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="chevron_down_cbc4--react"><path fill="currentColor" d="m12 14.586 6.293-6.293a1 1 0 1 1 1.414 1.414l-6.646 6.647a1.5 1.5 0 0 1-2.122 0L4.293 9.707a1 1 0 0 1 1.414-1.414L12 14.586Z" /></symbol>'});function Xc(e){return _().add(Jc),r().createElement("svg",(0,Ae.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#chevron_down_cbc4--react"}))}Xc.displayName="SpriteSymbolComponent(chevron_down_cbc4--react)";const Yc="select-trigger__rootElement-1w",em="select-trigger__outline-2b",tm="select-trigger__rightIcon-10",nm="select-trigger__rightIconRotated-1t",om=e=>{let{className:t,childrenContentClassName:n,variant:o="outline",size:a="m",isDisabled:i,isLoading:s,innerRef:l,children:c,onFocus:m,onBlur:d,onClick:u,isFluid:p,role:h,"aria-expanded":f,"aria-label":b}=e;return r().createElement(Qc.Y,{as:"button",asProps:{type:"button",onClick:u,onFocus:m,onBlur:d,role:h},size:a,variant:o,RightIcon:Xc,isFluid:p,innerRef:l,isDisabled:i,isLoading:s,"aria-label":b,classNames:{rootElement:g()(Yc,t),rightIconContainer:g()(tm,{[nm]:f}),outline:em,childrenContent:n}},c)},am=["variant","size","renderTrigger","isShadowBoxDisabled","isLoading","childrenContentClassName","aria-label","withVerticalOverflow","className"],rm=e=>{let{variant:t="outline",size:n="m",renderTrigger:a,isShadowBoxDisabled:i,isLoading:s,childrenContentClassName:l,"aria-label":c,withVerticalOverflow:m,className:d}=e,u=(0,o.Z)(e,am);return r().createElement(Gc,(0,Ae.Z)({"aria-label":c,renderTrigger:e=>a?a(Object.assign({},e,{isDisabled:e.disabled,isLoading:s,isFluid:"max"===e.width})):r().createElement(om,(0,Ae.Z)({},e,{"aria-label":c,isDisabled:e.disabled,size:"l"===n?"xl":n,variant:t,isLoading:s,isFluid:"max"===e.width,childrenContentClassName:l})),renderMenu:e=>r().createElement(gr,(0,Ae.Z)({},e,{isShadowBoxDisabled:i,size:"m",view:"default"})),view:"default",size:n,className:g()(d,{"Select2_popup-with-overflow-y":m,"Select2_popup-is-shadow-disabled":i})},u))},im={comments:{ru:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸",en:"Comments",_context:""},commentsDisabled:{ru:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹",en:"Comments are disabled",_context:""},newestFirst:{ru:"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð½Ð¾Ð²Ñ‹Ðµ",en:"Newest first",_context:""},oldestFirst:{ru:"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° ÑÑ‚Ð°Ñ€Ñ‹Ðµ",en:"Oldest first",_context:""},topFirst:{ru:"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ",en:"Popular first",_context:""},showAll:{ru:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²ÑÐµ",en:"Show all",_context:""},addComment:{en:"Add a comment",ru:"ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹",_context:""},authorDisabledComments:{en:"Author has disabled comments for this publication",ru:"ÐÐ²Ñ‚Ð¾Ñ€ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð» Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ",_context:""}},sm=(0,R.Wh)(im),lm=(0,R.bN)(im),cm="comments-header-block__block-22",mm="comments-header-block__header-OT",dm="comments-header-block__chatView-GT",um="comments-header-block__disabledText-IZ",pm="comments-header-block__leftItems-3B",hm="comments-header-block__commentsTitle-1z",gm="comments-header-block__commentsCount-2P",fm="comments-header-block__select-2O",bm=e=>[{value:"top",content:lm.topFirst(e)},{value:"newest",content:lm.newestFirst(e)},{value:"oldest",content:lm.oldestFirst(e)}],Cm=(0,a.memo)((e=>{let{totalCommentsCount:t,sorting:n,setSorting:o,shouldScrollToComments:i,onCommentsCounterChange:s,shouldShowHeaderCommentsCount:l}=e;const c=(0,R.bU)(),m=(0,a.useRef)(null),{commentsVisibility:d,statsLogger:u,viewType:p}=X(),h=d===ge.invisible,f="video-chat"===p,b=t>4;(0,oo.Z)((()=>{i&&m.current&&m.current.scrollIntoView({behavior:"smooth"}),u.once("comments:interface_ready")}));const C=(0,a.useCallback)((e=>o(e.target.value)),[o]),v=r().createElement("div",{className:g()(mm,{[dm]:f}),ref:m},l&&r().createElement("div",{className:pm},r().createElement(Na.x,{as:"div",typography:Qe},r().createElement("span",{className:hm},h?r().createElement(sm.commentsDisabled,null):r().createElement(sm.comments,null))),Boolean(!h&&t)&&r().createElement(Na.x,{as:"div",typography:Qe},r().createElement("span",{className:gm},(0,Yi.BX)(Math.max(0,t))||""))),!h&&b&&r().createElement(rm,{size:"xs",variant:"ghost",className:fm,options:bm(c),value:n,onChange:C,isShadowBoxDisabled:f}));return(0,a.useEffect)((()=>{null==s||s({totalCommentsCount:t})}),[t,s]),r().createElement("div",{className:cm},v,h&&r().createElement(Na.x,{weight:"regular",typography:"text-15-20"},r().createElement("span",{className:um},r().createElement(sm.authorDisabledComments,null))))})),vm=(0,a.memo)((e=>{let{createdRootComments:t,setCreatedRootComments:n,items:o,isEndlessScrollEnabled:a,moreCommentsEndpoint:i,setMoreItemsQueryParams:s,requestParamsRef:l,onMoreRootCommentsFetched:c,moreItemsQueryParams:m,sorting:d,setSorting:u,totalCommentsCount:p,shouldScrollToComments:h,onCommentsCounterChange:g,shouldShowHeaderCommentsCount:f,totalRootCommentsCount:b}=e;const{commentsVisibility:C}=X(),v=C===ge.invisible;return r().createElement(r().Fragment,null,r().createElement(Cm,{sorting:d,setSorting:u,totalCommentsCount:p,shouldScrollToComments:h,onCommentsCounterChange:g,shouldShowHeaderCommentsCount:f}),!v&&r().createElement(r().Fragment,null,r().createElement(Ys,{createdRootComments:t,setCt(Xs,{items:o}),m&&r().createElement(Nn,{moreCommentsEndpoint:i,isEndlessScrollEnabled:a,createdRootComments:t,setMoreItemsQueryParams:s,moreItemsQueryParams:m,requestParamsRef:l,onMoreRootCommentsFetched:c,totalRootCommentsCount:b,itemsCount:Array.isArray(o)?o.length:0})))}));var ym=n(62287);const wm={emptyTitle:{ru:"ÐŸÐ¾ÐºÐ° Ð·Ð´ÐµÑÑŒ Ñ‚Ð¸Ñ…Ð¾",_context:""},emptySubtitle:{ru:"ÐžÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹, Ð° Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð´Ñ‚ÑÐ½ÑƒÑ‚ÑÑ Ð²ÑÐ»ÐµÐ´ Ð·Ð° Ð²Ð°Ð¼Ð¸",_context:""}},_m=(0,R.Wh)(wm),Em=((0,R.bN)(wm),"comments-empty-info__container-1s"),km="comments-empty-info__title-1Z",Im="comments-empty-info__subtitle-i5",xm=(0,a.memo)((e=>{let{title:t=r().createElement(_m.emptyTitle,null),subtitle:n=r().createElement(_m.emptySubtitle,null)}=e;return r().createElement("div",{className:Em},r().createElement("span",{className:km},t),r().createElement("span",{className:Im},n))})),Sm="chat-layout__content-3U",Rm="chat-layout__scrollWrapper-2l",Mm="chat-layout__commentsRenderer-2M",Nm="chat-layout__commentsInOrder-1u",Tm="chat-layout__reverseComments-1O",Lm="chat-layout__overflowTrigger-13",Bm=(0,a.memo)((e=>{let{createdRootComments:t,setCreatedRootComments:n,items:o,overflow:i,isEndlessScrollEnabled:s,moreCommentsEndpoint:l,setMoreItemsQueryParams:c,requestParamsRef:m,onMoreRootCommentsFetched:d,moreItemsQueryParams:u,sorting:p,setSorting:h,totalCommentsCount:f,shouldScrollToComments:b,onCommentsCounterChange:C,shouldShowHeaderCommentsCount:v,hasEmptyStateText:y,withReversedOrder:w}=e;const _=(0,ym.O)(),E=(0,a.useRef)(null),k=(0,a.useRef)(0),{commentsVisibility:I}=X(),x=I===ge.invisible,S=(0,a.useCallback)((()=>{const{current:e}=E;e&&(e.scrollTop=e.scrollHeight-k.current),null==d||d()}),[d]),R=(0,a.useCallback)((e=>{const t=e.target;k.current=t.scrollHeight-t.scrollTop}),[]);(0,a.useEffect)((()=>{(0,Wi.W)().then((()=>{if(E.current&&_&&w){const e=E.current.scrollHeig.scrollTop=e}}))}),[f,_,w]);const M=y&&!(null!=o&&o.length)&&!(null!=t&&t.length);return r().createElement(r().Fragment,null,r().createElement("div",{className:Sm},r().createElement(Cm,{sorting:p,setSorting:h,totalCommentsCount:f,shouldScrollToComments:b,onCommentsCounterChange:C,shouldShowHeaderCommentsCount:v}),!x&&r().createElement(r().Fragment,null,r().createElement("div",{className:Rm,ref:E,onScroll:R},M?r().createElement(xm,null):null,r().createElement("div",{className:Mm},r().createElement("div",{className:g()(Nm,{[Tm]:w})},r().createElement(Xs,{items:t}),r().createElement(Xs,{items:o}),u?r().createElement(Nn,{moreCommentsEndpoint:l,isEndlessScrollEnabled:s,createdRootComments:t,setMoreItemsQueryParams:c,requestParamsRef:m,onMoreRootCommentsFetched:S,moreInull)),null!=i&&i.trigger?r().createElement("div",{className:Lm},i.trigger):null),(null==i?void 0:i.element)||null)),!x&&r().createElement(pa,{setCreatedRootComments:n}))})),Pm=["as"],Dm=e=>{let{as:t}=e,n=(0,o.Z)(e,Pm);return r().createElement(t,n)},Om="comments-content__chatView-2e",Um=["shownRootCommentIds"],Am={rootCommentsEndpoint:Object.assign({},ht),highlightCommentEndpoint:Object.assign({},bt)},Zm=(0,a.memo)((e=>{let{logger:t,initialCommentsBatchSize:n=at,disableNewCommentsStatsLogging:i,publicationPublisherId:s,highlightCommentId:l,rid:d,deviceId:u,publicationLink:p,flightId:h,documentId:g,pageType:f,place:b,itemId:C,itemType:v,onMoreRootCommentsFetched:y,ImageViewer:w,shouldScrollToComments:_,onCommentsLoad:E,onFocusChange:k,onCommentsCounterChange:I,isEndlessScrollEnabled:x,shouldShowHeaderCommentsCount:S=!0,viewType:R="default",canUseHistory:M=!0,clid:N,partner:T,integration:L,product:B,onSubscribe:P,redirectAfterLoginUrl:D,overflow:O,inputPublicApiRef:U,hasEmptyStateText:A,isSubscriptionInProgress:Z}=e;const z=(0,wt.Z)(),[F,j]=(0,a.useState)([]),[H,W]=(0,a.useState)(),[V,$]=(0,a.useState)(void 0),[q,Q]=(0,a.useState)(void 0),X=(0,m.Z)(!V),Y=(0,m.Z)(!(null!=X&&X.current)),{imageViewerElement:teViewer:t=dn,canUseHistory:n}=e;const{isImageViewerOpen:o,closeImageViewer:i,openImageViewer:s}=(0,Dt.z)(un.t.desktop),l=(0,a.useRef)({openImageViewer:s,closeImageViewer:i,imageViewerProps:null,isMobile:!1});return{openCommentsImageViewer:(0,a.useCallback)((e=>{l.current.imageViewerProps=Object.assign({handleClose:l.current.closeImageViewer,isMobile:l.current.isMobile},e),l.current.openImageViewer()}),[l]),imageViewerElement:(0,a.useMemo)((()=>o&&t&&l.current.imageViewerProps&&(0,Pt.createPortal)(r().createElement(t,(0,Ae.Z)({},l.current.imageViewerProps,{handleClose:l.current.closeImageViewer,shouldUseHistoryClose:n})),document.body)),[o,t,n])}})({ImageViewer:w,canUseHistory:M}),ae="video-chat"===R,re=(0,m.Z)({newSorting:V,defaultSorting:q}),ie=(0,a.useRef)({highlightCommentId:l,deviceId:u,sessionTs:Date.now(),flightId:h,rid:d,csrfToken:"",subscriptionStateFor:"currentUser",place:b,clid:N,partner:T,integration:L,product:B,shownRootCommentIds:[]}),{endpoint:se,endpointParams:le}=(0,a.useMemo)((()=>{const e=ie.current,t=(0,o.Z)(e,Um),a=Object.assign({},t,{publicationPublisherId:s,documentId:g,updateDefaultSorting:Y.current,batchSize:t.highlightCommentId?4:n,withConfig:!0,withCurrentUser:!0,sorting:V}),r=(e,t)=>({get endpoint(){const n=Object.assign({},Am[t]),o=e;return Object.keys(e).reduce(((e,t)=>(Object.defineProperty(e,t,{get(){const{newSorting:e,defaultSorting:o}=re.current;return(("top"!==o||e&&"top"!==e?void 0:Object.assign({},a,{shownRootCommentIds:ie.current.shownRootCommentIds}))?gt:n)[t]},configurable:!0}),e)),o)},endpointParams:a});return a.highlightCommentId?r(bt,"highlightCommentEndpoint"):r(ht,"rootCommentsEndpoint")}),[V,n,g,s,Y,re]),[ce]=(0,c.aM)(se,le,{onFetched:e=>{z()&&(Q(e.meta.appliedSorting),X.current&&(null==E||E()),W(rt(e.moreItemsQueryString)),j((e=>e.length?[]:e)),e.serverTs&&(ie.current.sessionTs=e.serverTs),e.csrfToken&&(ie.current.csrfToken=e.csrfToken),ie.current.shownRootCommentIds="top"===e.meta.appliedSorting?(0,K.Z)(new Set([].concat((0,K.Z)(ie.current.shownRootCommentIds),(0,K.Z)(e.items.map((e=>{let{entityData:{id:t}}=e;return t})))))):[])}}),me=(0,a.useRef)();null!=ce&&ce.config&&(me.current=ce.config);const de=bn({disableNewCommentsStatsLogging:i,rid:d,clid:N,deviceId:u,flightId:h,pageType:f,place:b,documentId:g,sessionTs:ie.current.sessionTs,publicationChannelOwnerUid:null==ce?void 0:ce.publicationChannelOwnerUid,itemId:C,itemType:v,partner:T,integration:L,product:B}),ue=ce&&(0,G.B)(ce);return ue?r().createElement(J,{configMemoRef:me,publicationPublisherId:s,publicationChannelOwnerUid:ce.publicationChannelOwnerUid,paramsMemoRef:ie,logger:t,statsLogger:de,commentsVisibility:ce.meta.commentsVisibility,publicationLink:p,documentId:g,openCommentsImageViewer:oe,onFocusChange:k,viewType:R,onSubscribe:P,inputPublicApiRef:U,isSubscriptionInProgress:Z},r().createElement(ne,{mutableData:ue},r().createElement(Rt,{user:ue.currentUser,rid:d,place:b,pageType:f,clid:N,redirectAfterLoginUrl:D},r().createElement(Bt,null),r().createElement(ee,{subthreadByCommentId:ce.subthreadByCommentId},r().createElement("div",{className:ae?Om:""},r().createElement(Dm,{as:ae?Bm:vm,items:ce.items,createdRootComments:F,setCreatedRootComments:j,overflow:O,moreCommentsEndpoint:se,hasEmptyStateText:A,isEndlessScrollEnabled:x,setMoreItemsQueryParams:W,requestParamsRef:ie,moreItemsQueryParams:H,onMoreRootCommentsFetched:y,sorting:ce.meta.appliedSorting,setSorting:$,totalCommentsCount:ce.meta.totalCommentsCount,totalRootCommentsCount:ce.meta.rootCommentsCount,shouldScrollToComments:_,onCommentsCounterChange:I,shouldShowHeaderCommentsCount:S}),te))))):null}));var zm=n(93992),Fm=n(78918),jm=n(92853),Hm=n(7600),Wm=n(61864);const Vm="comments-loading-boundary__error-2_",$m="comments-loading-boundary__isVideoChat-1U",qm="comments-loading-boundaryi",Gm=(0,Fm.A)((e=>{let{loadingCount:t,contentReady:n,errors:o,retry:i,children:s,ownProps:{shouldHideContentWhenLoading:l,viewType:c}}=e;const[m]=o;(0,a.useEffect)((()=>{m&&kn.kg.error(m)}),[m]);const d=t>0,u=!!m,p=l?g()(qm,{[Km]:d}):void 0;return r().createElement(jm.v,{isLoading:d,isError:u,noLoadingTransition:d&&!n,loadingContent:d&&r().createElement(Wm.d,null),contentClassName:p,errorContent:u&&r().createElement("div",{className:g()(Vm,{[$m]:"video-chat"===c})},r().createElement(Hm.RS,{retry:i,isRetrying:d,buttonVariant:"regular",text:r().createElement(q.y,null),retryText:r().createElement(q.BO,null)}))},s)})),Qm=["forceIsSubscribedToChannel","shouldHideContentWhenLoading","className","newCommentsUseDeepWatchTrigger","isOneTapButtonAuthEnabled"],Jm=(0,a.memo)((e=>{let{forceIsSubscribedToChannel:t,shouldHideContentWhenLoading:n,className:s,newCommentsUseDeepWatchTrigger:m,isOneTapButtonAuthEnabled:d}=e,u=(0,o.Z)(e,Qm);const p=(0,a.useCallback)((e=>{kn.kg.error(e)}),[]);return r().createElement(zm.c,{className:s},r().createElement(i.S,{onCatch:p,errorView:r().createElement(q.GO,null)},r().createElement(c.$N,null,r().createElement(l,null,r().createElement(Qo,{forceIsSubscribedToChannel:t},r().createElement(It,{newCommentsUseDeepWatchTrigger:m,isOneTapButtonAuthEnabled:d},r().createElement(Gm,{viewType:u.viewType,shouldHideContentWhenLoading:n},r().createElement(W,{generateCaptchaBasePath:"/api/comments/v2/captcha/generate"},r().createElement(Zm,u)))))))))}))},8286:(e,t,n)=>{n.d(t,{$H:()=>ye,fz:()=>be,Fn:()=>fe,tD:()=>ge});var o=n(89328),a=(n(37297),n(18941),n(21711),n(87363)),r=n.n(a),i=n(65233),s=(n(95387),n(47526)),l=n(89105),c=n.n(l);const m="feedback-modal__additionalModal-2t",d="feedback-modal__header-1g",u="feedback-modal__isContentScrolled-3i",p="feedback-modal__spacer-rW",h="feedback-modal__content-eq",g="feedback-modal__footer-2i",f=e=>{let{isVisible:t,handleClose:n,title:o,content:i,footer:l}=e;const[f,b]=(0,a.useState)(!1);return r().createElement(s.u,{visible:t,onClose:n,overflowHidden:!0,autoFocus:!1,hasCloseButton:!0},r().createElement("div",{className:m},r().createElement("h3",{className:c()(d,{[u]:f})},o),r().createElement("div",{className:h,onScroll:e=>{b(Boolean(e.currentTarget.scrollTop))}},i,r().createElement("div",{className:p})),r().createElement("div",{className:g},l)))};n(67060);var b=n(70130),C=n(52287),v=n(19788);const y="feedback-submit-button__button-3A",w="feedback-submit-button__isDisabled-3x",_=e=>{let{children:t,onSubmit:n,isDisabled:o}=e;return r().createElement(v.z,{className:c()(y,{[w]:o}),isDisabled:o,onClick:n,size:"xl",variant:"widePrimary","aria-label":"ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ñ„Ð¸Ð´Ð±ÐµÐºÐ° Ð² Ñ‚Ñ€ÐµÑ… Ñ‚Ð¾Ñ‡ÐºÐ°Ñ…"},t)};var E=n(5),I=n(92070),x=n(55666),S=n(4538),R=n(57658),M=n(88237),N=n(78604);const T=(0,R.N)("common-layer-meta"),L=(0,a.memo)((e=>{let{creationTime:t,views:n,viewsLabel:o="",className:a,l10n:i,lang:s,type:l,isCompact:c,isPromoPublication:m,isTextCard:d,isSubscribed:u,labelText:p,"aria-label":h,format:g=N.gv.VIEWS}=e;const f=" â€¢ ";if(!n&&!o&&!t)return null;const b=n&&i?(0,N.Oo)({l10n:i,lang:s,count:n,format:g}):o,C=m?u?null==p?void 0:p.channelInfoSubscribed:null==p?void 0:p.channelInfoUnsubscribed:void 0,v=(0,M.C)(T({type:l,isCompact:c,isTextCard:d}),a);if(!b)return rturn r().createElement("div,"aria-label":h},y,y&&w&&f,w,C&&f,C)}));var B=n(71247);const P="publication-preview__preview-3b",D="publication-preview__preview_withBigPaddings-2F",O="publication-preview__preview_withMarginTop-3Q",U="publication-preview__preview_withoutMargin-1P",A="publication-preview__avatar-27",Z="publication-preview__sourceTitle-Cl",z="publication-preview__date-1o",F="publication-preview__verificationMark-2e",j="publication-preview__sourceLink-2s",H="publication-preview__publicationLink-1K",W="publication-preview__inWebview-3V",V="publication-preview__title-i6",$="publication-preview__title_withoutText-35",q="publication-preview__text-2G",K="puview__imgContainer-1u",J="publication-preview__imgContainer_withIcon-2a",X="publication-pnk:a,isMobi|!m)return null;const p=Boolean(l.title),h=Boolean(l.text),g="gif"===l.type;return r().createElement("div",{className:c()(P,!i&&!s&&D,i&&!s&&O,u&&U,d),"data-testid":"ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸"},r().createElement(x.P,{href:m.feedLink,onClick:o,className:c()(j,{[W]:s})},r().createElement(k.qE,{src:m.logo,iconSize:24,backgroundColor:m.logoBackgroundColor,className:A}),r().createElement("div",{className:Z},m.title),m.isVerified&&r().createElement(S.$,{size:12,className:F,shouldUseAutoIcon:!0}),r().createElement(L,{l10n:t,lang:n,type:"modal",creationTime:l.creationTime,className:z})),r().createElement(x.P,{href:l.link,className:c()(H,{[W]:s}),onClick:a},r().createElement("div",null,p&&r().createElement("div",{className:c()(V,!h&&$)},l.title),h&&r().createElement("div",{className:c()(q,p&&K)},l.text)),l.image&&r().createElement("div",{className:c()(Q,g&&J)},g&&r().createElement(I.P,{symbol:B.Z,className:X,width:16,height:16}),r().createElement("img",{width:60,height:60,src:l.image,className:G,alt:l.title}))))})),ee={violence:C.ag.complainViolence,fake:C.ag.fake,insulting:C.ag.insulting,porno:C.ag.porno,other:C.ag.other,old:C.ag.old,misleading:C.ag.misleading,advertising:C.ag.advertising,video:C.ag.video,audio:C.ag.audio,tragic:C.ag.tragic,hatespeech:C.ag.hatespeech,adult:C.ag.adult,clickbait:C.ag.clickbait,spam:C.ag.spam,medicine:C.ag.medicine,bad_comments:C.ag.badComments},te={publisher:["violence","tragic","hatespeech","adult","clickbait","spam","medicine","bad_comments"],socialProfile:["hatespeech","spam"],interest:["violence","fake","insulting","porno","other"],publication:["violence","tragic","hatespeech","adult","clickbait","spam","medicine"]},ne=e=>te[e].map((e=>({id:e,getTranslationText:ee[e]}))),oe="complain-content__wrapper-2E",ae="complain-content__isDesktop-o7",re="complain-content__askFeedback-38",ie="complain-content__multiChoiceWrapper-1l",se="complain-content__checkboxItem-2j",le="complain-content__expandCheckbox-2n",ce=(0,a.memo)((e=>{let{checkedItems:t,handleCheckboxChange:n,onOpenSourceLink:o,onOpenPublicationLink:i,item:s,type:l,l10n:m,preview:d,commentCompaintList:u,multiChoiceWrapperClassName:p}=e;const h=(0,b.bU)(),g=!1,f=(e=>{const t=(0,a.use{text:null==e?void 0:e.text,link:null==e?void 0:e.link,title:null==e?void 0:e.title,creationTime:null==e?void 0:e.creationTime,publicationDate:null==e?void 0:e.publicationDate,image:null==e?void 0:e.image,type:null==e?void 0:e.type})),[null==e?void 0:e.text,null==e?void 0:e.link,null==e?void 0:e.title,null==e?void 0:e.creationTime,null==e?void 0:e.publicationDate,null==e?void 0:e.image,null==e?void 0:e.type]);return e?t:void 0})(s),v=(e=>{const t=(0,a.useMemo)((()=>({title:null==e?void 0:e.title,description:null==e?void 0:e.description,isVerified:null==e?void 0:e.isVerified,logo:null==e?void 0:e.logo,logoBackgroundColor:null==e?void 0:e.logoBackgroundColor,feedLink:null==e?void 0:e.feedLink})),[null==e?void 0:e.title,null==e?void 0:e.description,null==e?void 0:e.isVerified,null==e?void 0:e.logo,null==e?void 0:e.logoBackgroundColor,null==e?void 0:e.feedLink]);return e?t:void 0})(null==s?void 0:s.source),y=(0,a.useMemo)((()=>d||s&&r().createElement(Y,{item:f,source:v,onOpenSourceLink:o,onOpenPublicationLink:i,l10n:m,lang:h,isMobile:g,inWebview:!1,withoutMargin:!0})),[s,g,f,v,m,o,i,h,d]);return r().createElement("div",{className:c()(oe,{[ae]:!0})},y,r().createElement("h3",{className:re},((e,t)=>"comment"===e?C.ag.askCommentFeedback(t):"publisher"===e?C.ag.askChannelFeedback(t):"socialProfile"===e?C.ag.askSocialProfileFeedback(t):"publication"===e?C.ag.askPublicationFeedback(t):void 0)(l,h)),r().createElement("div",{className:c()(ie,p),"aria-label":"ÐœÐµÐ½ÑŽ Ð¶Ð°Ð»Ð¾Ð± Ð² Ñ‚Ñ€ÐµÑ… Ñ‚Ð¾Ñ‡ÐºÐ°Ñ…"},"comment"===l?u:ne(l).map((e=>{let{id:o,getTranslationText:a}=e;return r().createElement("div",{key:o,"aria-label":a(h),"aria-pressed":null==t?void 0:t.has(o),className:c()(se,{[le]:!0})},r().createElement(E.bL.Checkbox,{id:o,value:null==t?void 0:t.has(o),onChange:null==n?void 0:n(o),title:a(h)}))}))))}));var me=n(64405),de=n(14811);const ue="complaint-form__commentMultiChoiceWrapper-1w",pe="complaint-form__radioItem-2o",he="complaint-form__expandCheckbox-10",ge="spam_or_fraud",fe="obscene",be="inappropriate",Ce=new Set,ve=void 0,ye=e=>{let{isVisible:t,onClose:n,onSubmit:s,previewItemProps:l,type:m}=e;const d=!1,u=(0,b.bU)(),{showSnackbar:p}=(0,i.D)(),h="comment"===m,[g,v]=(0,a.useState)(Ce),[y,w]=(0,a.useState)(ve),E=(0,a.useCallback)((()=>{v(Ce),w(ve)}),[]),k=(0,a.useCallback)((()=>{s(h&&y?[y]:Array.from(g)),p({title:r().createElement(C.oc.complainReceived,null)}),E()}),[h,y,p,E,s,g]),I=(0,a.useMemo)((()=>[{id:ge,title:C.ag.spamComment(u)},{id:fe,title:C.ag.obsceneComment(u)},{id:be,title:C.ag.inappropriateComment(u)}]),[u]),x=(0,a.useMemo)((()=>I.map((e=>r().createElement("div",{className:c()(pe,{[he]:!0}),key:e.id,"aria-pressed":y===e.id},r().createElement(de.e,{title:e.title,value:e.id,isChecked:y===e.id,onChange:w,inputName:"complaintOption"}))))),[I,d,y]),S=h?Boolean(!y):0===g.size,R=(0,a.useCallback)((e=>()=>{v((t=>{const n=t.has(e),o=new Set(t);return n?o.delete(e):o.add(e),o}))}),[]),M=(0,a.useCallback)((()=>{n(),E()}),[n,E]),N=C.ag.complain(u),T=r().createElement(ce,(0,o.Z)({},l,{commentCompaintList:x,checkedItems:g,handleCheckboxChange:R,type:m,onOpenSourceLink:me.c,onOpenPublicationLink:me.c,multiChoiceWrapperClassName:h?ue:void 0})),L=r().createElement(_,{isDisabled:S,onSubmit:k},r().createElement(C.oc.sendComplain,null));return r().createElement(f,{isVisible:t,handleClose:M,title:N,content:T,footer:L})}},4481:(e,t,n)=>{n.d(t,{S:()=>a});var o=n(87363);class a extends o.Component{constructor(){return super(...arguments),this.state={hasError:!1},this}componentDidCatch(e){const{onCatch:t=console.error}=this.props;t(e),this.setState({hasError:!0})}render(){const{children:e,errorVs.props,{hasError:n}=this.state;return n?t:e}}},90516:(e,t,n)=>{n.d(t,{tc:()=>a,PR:()=>r,w:()=>i});const o=parseFloat("45px");let a,r;!function(e){e.bottom="bottom",e.center="center",e.left="left",e.right="right",e.top="top"}(a||(a={})),function(e){e.bottom="bottom",e.left="left",e.right="right",e.top="top"}(r||(r={}));const i=e=>{let{side:t,position:n,shifts:i={},triggerElem:s,popupElem:l}=e;const{x:c=0,y:m=0}=i,d={left:c,top:m};if(!s)return d;const u=s.getBoundingClientRect(),p=l.getBoundingClientRect(),h=((e,t)=>({top:e.top-t.top,right:t.right-e.right,bottom:t.bottom-e.botteft-t.left}))(p,(l.offsetParent||document.body||document.createElement("div")).getBoundingClientRect()),g=((e,t,n)=>{const o={top:0,left:0,right:0,bottom:0};return e===r.top?(o.top=t.bottom-n.top,o.bottom=o.top+n.height):e===r.right?(o.right=t.left-n.left,o.left=o.right-n.width)+n.width),o})(t,u,p),f=((e,t,n,i)=>{let s=0;const l={top:0,right:0,bottom:0,left:0};if(s="center"===t?50s/100,l.bottom=l.top+i.height}return l})(t,n,u,p);return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.reduce(((e,t)=>{const n={};return void 0!==e.top&&(n.top=e.top+t.top),void 0!==e.right&&(n.right=e.right+t.right),void 0!==e.bottom&&(n.bottom=e.bottom+t.bottom),void 0!==e.left&&(n.left=e.left+t.left),n}),e)}(d,h,g,f)}},86801:(e,t,n)=>{n.d(t,{z:()=>p});var o=n(89328),a=n(95326),r=n(87363),i=n.n(r),s=n(57658),l=n(88237),c=n(54861),m=n(90516);const d=["side","close","position","fixPosition","shifts","targetElem","children","isWhiteBackground","getTriggerElem","className","containerClassName","isOpen","withCloseButton","withTail","setPopupBaseRef","tailPosition","containerStyle","tailShift","viewType","theme"],u=(0,s.N)("popup-element"),p=e=top,close:n,position:s=m.tc.center,fixPosition:p,shifts:h,targetElem:g,children:f,isWhiteBackground:b=!1,getTriggerElem:C,className:v,containerClassName:y,isOpen:w,withCloseButton:_=!0,withTail:E=!0,setPopupBaseRef:k,tailPosition:I=s,containerStyle:x={},tailShift:S=0,viewType:R,theme:M}=e,N=(0,a.Z)(e,d),T=C||(()=>g||null),L=Boolean(w&&T()),B=(0,r.useCallback)(((e,n)=>{const o=(0,m.w)({side:t,position:s,shifts:h,triggerElem:e,popupElem:n});return p?p(o):o}),[t,s,h,p]),P=Object.assign({close:n},N,{setRef:k,isOpen:L,getTriggerElem:T,getPosition:B}),D={},O={};return S&&(t!==m.PR.top&&t!==m.PR.bottom||(s===m.tc.left&&(D.marginLeft=S),s===m.tc.right&&(O.marginRight=S)),t!==m.PR.left&&t!==m.PR.right||(s===m.tc.top&&(D.marginTop=S),s===m.tc.bottom&&(O.marginBottom=S))),i().createElement(c.G,(0,o.Z)({},P,{className:(0,l.C)(u({isWhiteBackground:b,theme:M}),v)}),i().createElement("div",{className:u("content-wrapper",{side:t,position:s})},i().createElement("div",{className:(0,l.C)(u("tailed-content",{viewType:R}),y),style:x},_&&i().createElement("div",{className:u("close"),onClick:n}),f),E&&i().createElement("div",{className:u("tail-container",{side:t,position:I})},i().createElement("div",{className:u("tail-before"),style:D}),i().createElement("div",{className:u("t:t,shadow:!0})}),i().createElement("div",{className:u("tail",{side:t})}),i().createElement("div",{className:u("tail-after"),style:O}))))}},22581:(e,t,n)=>{n.d(t,{C8:()=>o,UO:()=>a,oQ:()=>r});const o={fontSize:14,lineHeight:18,spaceHeight:8,fontWeight:400,textColor:"default"},a=(Object.assign({},o,{textColor:"primary",fontSize:15,lineHeight:20,spaceHeight:8,fontWeight:400}),e=>{let{fontSize:t,lineHeight:n,fontWeight:o}=e;return{fontSize:`${t}px`,lineHeight:`${n}px`,fontWeight:o}}),r=e=>{let{fontSize:t,lineHeight:n,fontWeight:o}=e;return{fontSize:t/16+"rem",lineHeight:n/16+"rem",fontWeight:o}}},59232:(e,t,n)=>{n.d(t,{H:()=>p});var o=n(92933),a=(n(25427),n(87363)),r=n.n(a),i=n(55666),s=n(57658),l=n(36177),c=n(22581),m=n(35265);const d=(0,s.N)("rich-text"),u=10,p=(0,a.memo)((e=>{let{data:t,containerRef:n,onClickLink:o,fullCommentText:a,hideCommentText:i,theme:m=l.DD.white,textStyle:p,onClick:f,className:b,shouldConvertToRem:C,expandEllipsisPaddingRight:v=u,shouldUseNewlinesAsSpaces:y=!0,shouldRenderFirstParagraphAsHeader:w=!1,onShowClampedText:_}=e;return r().createElement("div",{className:s.N.mix(d({theme:m}),b),ref:n,style:C?(0,c.oQ)(p):(0,c.UO)(p),onClick:f},(e=>{let{data:t,onClickLink:n,fullCommentText:o,hideCommentText:a,textStyle:i,expandEllipsisPaddingRight:s,shouldUseNewlinesAsSpaces:l,shouldRenderFirstParagraphAsHeader:c,onShowClampedText:m}=e;const{textColor:u}=i;let p=!0;const f=(e,t)=>{switch(e.type){case"link":case"mention":ret).createElement(g,{key:e.key,item:e,onClick:n},b(e.children,!0));case"p":return p&&(p=!1,c)?r().createElement("h1",{key:e.key,className:d("p")},b(e.children)):r().createElement("div",{key:e.key,className:d("p")},b(e.children));case"text":return r().createElement("span",{key:e.key,ref:e.ref,className:d("text",t?void 0:{color:u}),style:e.textStyle},e.data);case"space":return l?null:r().createElement("div",{key:e.key,ref:e.ref,style:{height:`${i.spaceHeight}px`},className:d("space")},r().createElement("br",null));case"newline":return l?r().createElement("div",{key:e.key,ref:e.ref,style:{height:`${i.spaceHeight}px`},className:d("space")},r().createElement("br",null)):null;case"expand":return r().createElement("spanName:dd-word")},o);case"collapse":return r().createElement("span",{key:e.key,className:d("expand-word")},r().createElement("span",{style:{paddingRight:s}}),a);case"expand-with-ellipsis":return null==m||m(),r().createElement("span",{key:e.key,className:d("expand"),ref:e.ref},r().createElement("span",{className:d("expand-ellipsis",{color:u}),style:{paddingRight:s}},"..."),r().createElement("span",{className:d("expand-word")},o));default:return null}},b=(e,t)=>h(e).map((e=>f(e,t)));return Array.isArray(t)?b(t):f(t)})({data:t,onClickLink:o,fullCommentText:a,hideCommentText:i,textStyle:p,expandEllipsisPaddingRight:v,shouldUseNewlinesAsSpaces:y,shouldRenderFirstParagraphAsHeader:w,onShowClampedText:_}))})),h=e=>e.reduce(((e,t)=>"star-tag"===t.type?[].concat((0,o.Z)(e),(0,o.Z)(t.children)):[].concat((0,o.Z)(e),[t])),[]),g=(0,a.memo)((e=>{let{item:t,children:n,onClick:o}=e;const s=(0,m.u)(t.href),l=(0,a.useCallback)(((e,n)=>{n&&window.open(s,"_blank"),o&&(e.stopPropagation(),o(t.href))}),[t.href,o,s]);return t.isBadSeoLink?r().createElement("span",{onClick:e=>l(e,!0),className:d("link",{pointer:!0}),key:t.key},n):r().createElement(i.P,{onClick:l,className:d("link"),key:t.key,href:s},n)}))},30356:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(87363),a=n.n(o),r=n(94060),i=n(73898);const s=(e,t)=>{const{errorView:n}=t||{},o=t=>a().createElement(l,{onCatch:e=>{e.request?i.kg.error("Chunk failed to load",{additional:{reason:e.message,url:e.request}}):i.kg.error(e)},errorView:n},a().createElement(e,t));return o.displayName=(0,r.S)("WithChunkLoadingErrorBounding",e),o};class l extends o.Component{constructor(){return super(...arguments),this.state={hasError:!1},this}componentDidCatch(e){const{onCatch:t=console.error}=this.props;t(e),this.setState({hasError:!0})}render(){const{children:e,errorView:t}=this.props,{hasError:n}=this.state;return n?t||null:e}}},56997:(e,t,n)=>{n.d(t,{G:()=>f});n(37297),n(18941),n(21711);var o=n(87363),a=n.n(o),r=n(20754),i=n(84094),s=n(48392),l=n(80534),c=n(57658),m=n(13950),d=n(51307),u=n(64405),p=n(21032),h=n(43467);const g=(0,c.N)("loading-zen-image-viewer"),f=(0,o.memo)((e=>{let{mediaItems:t,handleClose:n,startingMediaIndex:c=0,isMobile:f=!0,isParentInFullscreen:b=!1}=e;const[C,v]=(0,o.useState)(!1),[y,w]=(0,o.useState)(!1),{backdropRef:_,uiRef:E}=(0,m.I)(),k=(0,o.useCallback)((()=>{w(!0),(0,l.am)(E,{opacity:0,animationDuration:100}),(0,l.am)(_,{animationDuration:100,opacity:0,onFinish:n})}),[_,n,E]),I=t[c],x=(0,h.Cx)(I)?(null==I?void 0:I.data.src)||"":void 0,S=(0,h.Cx)(I)?(null==I?void 0:I.data.scaleSrc)||"":void 0;(0,r.V)({condition:!!S,src:S}),(0,r.V)({condition:!!x,src:x});const R=!!(0,i.Z)(b);(0,o.useEffect)((()=>{!R||b||y||n()}),[y,R,b,n]),(0,o.useEffect)((()=>{(0,l.am)(_,{animationDuration:200,opacity:1,onFinish:()=>{(0,l.am)(E,{opacity:1,animationDuration:100,nonAnimatedStyles:{pointerEvents:"all"}}),v(!0)}})}),[_,E]);const M=C&&!y;return a().createElement("div",{tabIndex:-1,role:"dialog","aria-hidden":"true",className:g()},a().createElement("div",{ref:_,className:g("backdrop",{isMobile:f})}),a().createElement("div",{className:g("item")},M&&a().createElement("div",{className:g("loading-indicator")},a().createElement(s.$,{className:g("spinner"),withAnimation:!0}))),f?a().createElement(p.T,{rootRef:E,handleClose:k,currentCaption:void 0,isAfterLoader:!1}):a().createElement(d.E,{rootRef:E,handleClose:k,currentCaption:void 0,isAfterLoader:!1,changeSlideTo:u.c,imagesCount:1,currentIndex:c}))}))},16933:(e,t,n)=>{n.d(t,{x:()=>s});n(37297),n(18941),n(21711);var o=n(87363),a=n(26230),r=n(28234),i=n(51181);const s=e=>{let{handleClose:t,openInFullscreen:n=!1}=e;const s=(0,a.Z)(),{fullscreenElementRef:l,isFullscreen:c,isSupportedFullscreen:m,requestFullscreen:d,exitFullscreen:u}=(0,r.W)(n),p=n&&m,[h,g]=(0,o.useState)(!p),f=(0,o.useCallback)((()=>{c?(0,i.Y)(u,{cb:t,isMounted:s,timeoutMs:1500}):t()}),[c,u,t,s]),b=(0,o.useRef)(!0);return(0,o.useEffect)((()=>{b.current&&p&&(c||(0,i.Y)(d,{cb:()=>g(!0),isMounted:s,timeoutMs:1500}),b.current=!1)}),[p,c,d,s]),{closeFunc:f,canShowImageViewer:h,isFullscreen:c,fullscreenElementRef:l}}},71247:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(21540),a=n.n(o),r=n(38249),i=n.n(r),s=n(98504);let l=new(a())({id:"play-brief_3c2f--inline",use:"play-brief_3c2f--inline-usage",viewBox:"0 0 29 32",content:'<symbol viewBox="0 0 29 32" xmlns="http://www.w3.org/2000/svg" id="play-brief_3c2f--inline">\n<path clip-rule="evenodd" d="M4.16581 0.40801C2.34468 -0.707873 0 0.596776 0 2.72599L0 29.274C0 31.4033 2.34477 32.7079 4.1659 31.5919L27.6992 18.3174C29.4336 17.2546 29.4336 14.7442 27.6992 13.6815L4.16581 0.40801Z" />\n</symbol>'});const c=(0,s.Z)(i(),l)},58752:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(89328),a=n(87363),r=n.n(a),i=n(21540),s=n.n(i),l=n(38249),c=n.n(l);const m=new(s())({id:"dots_vertical_298c--react",use:"dots_vertical_298c--react-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dots_vertical_298c--react"><path fill="currentColor" d="M12 6.75a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 14a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM13.75 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Z" /></symbol>'});function d(e){return c().add(m),r().createElement("svg",(0,o.Z)({viewBox:"0 0 24 24"},e),r().createElement("use",{xlinkHref:"#dots_vertical_298c--react"}))}d.displayName="SpriteSymbolComponent(dots_vertical_298c--react)"},8761:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(89328),a=n(87363),r=n.n(a),i=n(21540),s=n.n(i),l=n(38249),c=n.n(l);const m=new(s())({id:"arrow_short_forward_9fb7--react",use:"arrow_short_forward_9fb7--react-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="arrow_short_forward_9fb7--react"><path d="M4.796 12.793 9.586 8l-4.79-4.793a1 1 0 0 1 1.415-1.414l5.496 5.5a1 1 0 0 1 0 1.414l-5.496 5.5a1 1 0 0 1-1.415-1.414z" fill="currentColor" /></symbol>'});function d(e){return c().add(m),r().createElement("svg",(0,o.Z)({viewBox:"0 0 16 16"},e),r().createElement("use",{xlinkHref:"#arrow_short_forward_9fb7--react"}))}d.displayName="SpriteSymbolComponent(arrow_short_forward_9fb7--react)"},40326:(e,t,n)=>{n.r(t)},25427:()=>{}}]);
//# sourceMappingURL=https://s3-zen.mds.yandex.net/zen-eb/source-maps/prod/content/1.198.2/content-comments.modern.ru.bundle.js.map