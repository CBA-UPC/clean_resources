"use strict";var defaultConfig={domain:"sso.dev.accounts.dowjones.com",clientID:"KXsHbKPkIYfKhVmamO52fKl1NZjb1KCf",callbackURL:"https://dev.accounts.dowjones.com/callback",popup:!1,callbackOnLocationHash:!1,env:"dev"};indow.DowJones=window.DowJones||{},DowJones.AnalyticsMappingConfig={languageMapping:{en:"en-US",ja:"ja-JP",zhcn:"zh-CN",zhtw:"zh-TW"},pageViewNameMapping:{signin:{page_subsection:"Form",page_topic:""},error:{page_subsection:"Error",page_topic:""},"forgot-password":{page_subsection:"Help",page_topic:"Forgot Password"},"forgot-username":{page_subsection:"Help",page_topic:"Forgot Username"},"forgot-password-confirm":{page_subsection:"Help",page_topic:"Forgot Password Confirm"},"forgot-username-confirm":{page_subsection:"Help",page_topic:"Forgot Username Confirm"},"reset-password":{page_subsection:"Help",page_topic:"Reset Password"},"reset-password-expired-token":{page_subsection:"Help",page_topic:"Reset Password Expired Token"},"reset-password-valid-token":{page_subsection:"Help",page_topic:"Reset Password Valid Token"},"password-reset-confirmation":{page_subsection:"Help",page_topic:"Password Reset Confirmation"},"email-code-confirmation":{page_subsection:"Help",page_topic:"OTP Code Request"},"temp-password-update":{page_subsection:"Help",page_topic:"Temp Password Update"},"temp-password-expired":{page_subsection:"Help",page_topic:"Temp Password Expired"},"verify-registration":{page_subsection:"Help",page_topic:"Verify Registration"},"email-verification":{page_subsection:"Help",page_topic:"Email Verification"},"email-link":{page_subsection:"Help",page_topic:"Email Link"},"email-link-confirmation":{page_subsection:"Help",page_topic:"Email Link Confirmation"}},brandMapping:{wsj:{pageSite:"Online Journal",pageSiteProduct:"WSJ"},cventwsj:{pageSite:"WSJ CEO Council Conference",pageSiteProduct:"CEOC"},mw:{pageSite:"MarketWatch",pageSiteProduct:"MW"},barrons:{pageSite:"Barrons Online",pageSiteProduct:"BOL"},barronsadvisor:{pageSite:"Barrons Online",pageSiteProduct:"BOL"},dowjones:{pageSite:"Dow Jones",pageSiteProduct:"DJ"},wsjpro:{pageSite:"wsjpro",pageSiteProduct:"WSJPro"},wsjprosmi:{pageSite:"wsjpro",pageSiteProduct:"WSJPro"},bc:{pageSite:"Brand Council",pageSiteProduct:"BC"},efn:{pageSite:"FN London",pageSiteProduct:"FN"},pen:{pageSite:"Private Equity News",pageSiteProduct:"PEN"},jwsj:{pageSite:"Japan WSJ",pageSiteProduct:"WSJJP"},cwsj:{pageSite:"Chinese WSJ",pageSiteProduct:"CWSJ"},ctxwsj:{pageSite:"WSJ Education Context",pageSiteProduct:"CXT"},mg:{pageSite:"",pageSiteProduct:""},topicalb:{pageSite:"Barrons Topical Education",pageSiteProduct:"TOPICALB"},wrtopicalb:{pageSite:"Barrons Topical Weekly Review",pageSiteProduct:"WRTOPICALB"},astopicalb:{pageSite:"Barrons Topical Assessments",pageSiteProduct:"ASTOPICALB"},assessment:{pageSite:"WSJ Assessment Tool",pageSiteProduct:"WSJAST"},ibd:{pageSite:"Investors business daily",pageSiteProduct:"IBD"}}},window.DowJones=window.DowJones||{},DowJones.Analytics=function(e){var o="//tags.tiqcdn.com/utag/wsjdn/oneidentity-consumer/"+(e.env||"dev")+"/utag.js",e=(this.pageViewNameMapping=e.pageViewNameMapping,this.analyticsDataDefault={page_site_product:e.pageSiteProduct,page_site:e.pageSite,page_content_language:e.language,user_ref:"",user_type:"",user_tags:"",user_exp:"default",page_content_type:"Login",page_content_type_detail:"",page_content_region:"Global",page_content_source:"DJ Identity",page_access:"free",cms_name:"ONEIDENTITY",page_section:"Login",page_id:"Login",page_subsection:"",page_topic:"",page_error_id:"",page_error_description:"",event_name:""},this.getEventData(e.viewName,{})),e=(window.utag_data=e,document.createElement("script"));e.id="tealium-script",e.setAttribute("async","true"),e.setAttribute("type","text/javascript"),e.setAttribute("src",o),document.getElementsByTagName("body")[0].appendChild(e)},DowJones.Analytics.prototype={trackEvent:function(e,o,t){"view"!==t&&"link"!==t||(e=this.getEventData(e,o),window.utag&&window.utag[t](e))},getEventData:function(e,o){var t,i={};for(t in this.analyticsDataDefault)i[t]=(o&&o[t]?o:this.analyticsDataDefault)[t];return this.setSubsectionAndTopic(e,i),i},setSubsectionAndTopic:function(e,o){e=this.pageViewNameMapping[e];void 0!==e?(o.page_subsection=e.page_subsection,o.page_topic=e.page_topic):(o.page_subsection="Unknown",o.page_topic="")}},function(){var r,n,s,a,o,l,c,d,e,u;window.DowJones=window.DowJones||{},DowJones.OneIdentity=(r="",n={},s=null,a={},o=new idtokenVerifier,c="POLICY_NOTICE",u={oneIdentityState:l=null,initialViewTrackSkipped:!(e={name:"hideOnPopperBlur",defaultValue:!0,fn:function(o){return{onCreate:function(){o.popper.addEventListener("focusout",}}}}),showCookieOverlay:!(d="COOKIE_NOTICE"),run:function(e){$(window).on("pageshow",;var o=this.parseUrlQuery(window.location.search.substr(1)),t=this.noticeUpdatedFactory({startDateTimestamp:DowJones.Config.updatedPolicyMsgStartUTCLastTimezone,endDateTimestamp:DowJones.Config.updatedPolicyMsgEndUTCLastTimezone},c),i=this.noticeUpdatedFactory({startDateTimestamp:DowJones.Config.updatedCookieMsgStartUTCLastTimezone,endDateTimestamp:DowJones.Config.updatedCookieMsgEndUTCLastTimezone},d),e=(l=e||defaultConfig,this.initLocale(l),this.translate(),this.getBrand()),t=(u.checkPolicyCookieNotices([t,i]),u.configureRoutes(o),u.modifyLayout(window.location),u.showGlobalMessaging(),this.applyBrand(e),this.getAnalyticsBrandData(e.name)),i={pageViewNameMapping:this.getAnalyticPageViewNameMapping(),pageSite:t.pageSite,pageSiteProduct:t.pageSiteProduct,viewName:this.getCurrentRoute(window.location),language:this.getAnalyticsLanguage(),env:this.getPageEnvironment(window.location)},o=(s=new DowJones.Analytics(i),tippy.setDefaultProps({popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","left","right"]}}]}}),this.createTooltips(),this.configureLoginLayout(),document.documentElement.lang=i.language,$(".navigate-back").on("click",this.navigateBack),$(".card-container, .header-content").show(),$(".footer-skeleton, .header-skeleton, .card-skeleton").hide(),document.querySelectorAll("button"));Array.prototype.forEach.call(o,function(e){e.addEventListener("keyup",function(e){"Enter"===e.key&&this===document.activeElement&&this.click()})})},configureRoutes:function(e){n.forgotPasswordComponent=new DowJones.ForgotPasswordForm(l),n.forgotUsernameComponent=new DowJones.ForgotUsernameForm(l),n.forgotPasswordConfirmComponent=new DowJones.ForgotPasswordConfirmation,n.forgotUsernameConfirmComponent=new DowJones.ForgotUsernameConfirmation,n.loginComponent=new DowJones.LoginForm(l),n.emailLinkConfirmComponent=new DowJones.EmailLinkConfirmation,n.verifyRegistration=new DowJones.VerifyRegistration,n.emailVerification=new DowJones.EmailVerification,n.resetPasswordTokenValidation=new DowJones.PasswordResetTokenValidation(l),n.resetPasswordValidToken=new DowJones.PasswordResetForm(l),n.resetPasswordExpiredTokenComponent=new DowJones.ResetPasswordExpiredTokenForm(l),n.passwordResetConfirm=new DowJones.PasswordResetConfirm,n.tempPasswordUpdate=new DowJones.TempPasswordUpdate,n.loginPassword=new DowJones.LoginPassword,$("input").on("focus",.on("blur",function(){$(this).parent("div").removeClass("focus"),$(this).hasClass("error")&&$(this).next(".input-error-icon").show()});var o=this.uiLocales&&this.uiLocales.lo?parseInt(this.uiLocales.lo,10):0,o=(page("/forgot-password",function(e){u.showPageById("forgot-password",!0),n.forgotPasswordComponent.run(e.state.username),document.title=u.getTitleWithBrand("Forgot Password")}),page("/forgot-username",function(e){u.showPageById("forgot-username",!0),n.forgotUsernameComponent.run(),document.title=u.getTitleWithBrand("Forgot Username")}),page("/forgot-password-confirm",function(e){u.showPageById("forgot-password-confirmation",!0)}),page("/forgot-username-confirm",,page("/reset-password",function(e){(window.sessionStorage.getItem("userData")?(u.showPageById("reset-password-valid-token"),n.resetPasswordValidToken):(u.showPageById("spinner"),n.resetPasswordTokenValidation)).run()}),page("/password-reset-confirmation",function(e){u.showPageById("password-reset-confirm")}),page("/reset-password-expired-token",function(e){u.showPageById("reset-password-expired-token"),n.resetPasswordExpiredTokenComponent.focusInput(),document.title=u.getTitleWithBrand("Expired Token")}),page("/signin",function(e){document.title=u.getTitleWithBrand();var o=DowJones.OneIdentity.getQueryVariable("account_found"),t=u.getBrand(),i=u.getQueryVariable("redirect_uri"),i=(i&&-1<i.indexOf("/iios")&&("wsj"===t.name||"barrons"===t.name||"mw"===t.name||"efn"===t.name)&&u.showIOSLoginNote(),u.getQueryVariable("social_login_error"));i&&"swg_user_not_found"===i&&u.showNotSWGText(),("true"===o?(u.showPageById("password-login"),n.loginPassword):(u.showPageById("basic-login"),n.loginComponent)).run(e)}),page("/signin-password",,page("/email-link-confirmation",function(e){u.showPageById("email-link-confirmation",!0),n.emailLinkConfirmComponent.run(e.state)}),page("/email-code-confirmation",function(e){u.showPageById("email-code-confirmation",!0),n.emailLinkConfirmComponent.run(e.state)}),2&o||(page("/verify-registration",function(e){u.showPageById("verify-registration"),n.verifyRegistration.run()}),page("/email-verification",),page("/temp-password-update",function(e){u.showPageById("temp-password-update")}),page("/temp-password-expired",,page("*",function(e){u.showPageById("basic-login"),n.loginComponent.run(e),document.title=u.getTitleWithBrand()}),"/signin"),t=u.getTitleWithBrand(),e=(null!=e&&null!=e.p&&""!=e.p&&0<e.p.trim().length&&(window.history.pushState("object or string","Title",window.location.pathname+(window.location.search&&1<window.location.search.length?"?"+this.removeQueryParameter(window.location.search,"p"):"")),o="/"+e.p),page.start({hashbang:!0,dispatch:!1,click:!1,decodeURLComponents:!1}),window.location.hash&&"#_=_"!==window.location.hash&&(o="/"+window.location.hash.replace(/[#!\/]/g,"")),window.history.state);window.history.replaceState(e,t,"#!"+o),page.show(o,{initialPage:!0},!0,!1)},showGlobalMessaging:function(){var e=this.getQueryVariable("message");e&&$("#global-info").html(e).show()},getTitleWithBrand:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Log In",o=this.getBrand().displayName;return o?"".concat(e," - ").concat(o):e},getEdition:function(){var e=this.getBrand();switch(e.name){case"assessment":return"WSJ-EN_US";case"mw":return"MARKETWATCH-EN_US";case"barrons":case"topicalb":return"BARRONS-EN_US";case"wsjpro":return"WSJPRO-EN_US";case"wsjprosmi":return"WSJPROSMI-EN_US";case"bc":return"BRANDCOUNCIL-EN_US";case"dowjones":return"DOWJONES-EN_US";case"wsj":return"WSJ-EN_US";case"efn":return"EFN-EN_US";case"pen":return"PEN-EN_US";case"jwsj":return"WSJ-JA_JP";case"cwsj":return"zhtw"===this.uiLocales.language?"WSJ-ZH_TW":"WSJ-ZH_CN";case"ctxwsj":return"WSJ-EN_US";case"ibd":return"IBD-EN_US";default:return e.templateCode||"WSJ-EN_US"}},getBrand:function(){var e=this.uiLocales?this.uiLocales.brand:"dowjones",o=DowJones.Config[e],t=o&&o.baseBrand?DowJones.Config[o.baseBrand]:null;if(Object.hasOwnProperty("assign"))t&&(o=Object.assign(t,o));else for(var i in t)o[i]||(o[i]=t[i]);return o},initLocale:function(e){var e=e?e.extraParams:void 0,e=(e?e.ui_locales:void 0)||this.getQueryVariable("ui_locales");(e=!e&&this.getQueryVariable("device")&&"mktw-mobile-app"===this.getQueryVariable("device")?"en-us-x-mw-0":e)?(e=(Array.isArray(e)?e[0]:e).split("-"),this.uiLocales={language:e[0]||"en",countryCode:e[1]||"us",brand:e[3]||"dowjones",opts:e[4]||"0",lo:e[5]||"0"}):this.uiLocales=void 0},initializeOneIdentity:function(){var e=l.extraParams&&l.extraParams.response_type||"code",o=l.callbackURL,e=$.extend(!0,{},{responseType:e,redirectUri:o},l);if(e.auth0Domain&&(e.domain=e.auth0Domain),e.extraParams&&e.extraParams.state&&!$.isEmptyObject(e.extraParams.state)?this.oneIdentityState=e.extraParams.state:this.oneIdentityState="brand%3Dmw","undefined"!=typeof auth0)return new auth0.WebAuth(e);console.log("Auth not present")},getOptions:function(){var e=this.uiLocales?this.uiLocales.opts:0;return parseInt(e)},getLoginOptions:function(e){e=e.location.search.substring(1),this.uiLocales||(this.uiLocales={brand:"dowjones",countryCode:"us",language:"en",lo:"7",opts:"15"}),e=this.getOptions(e);return{google:0<(1&e),facebook:0<(2&e),passwordField:0<(8&e),apple:0<(8&e),subscribe:0<(16&e),oneTimeLink:0<(32&e),activatePrintSubscription:0<(64&e),continueToIntroducePassword:0<(128&e)}},getLowPartUiLocals:showOneDJBrands:function(e){return!!e&&("ibd"===e.name&&($(".product-images-row").hide(),$(".product-images-row-ibd").show()),["wsj","jwsj","cwsj","mw","barrons","ibd"].includes(e.name))},applyBrand:function(e){var o=this.uiLocales?this.uiLocales.language:"en",t=DowJones.languages?DowJones.languages[o][e.newMemeberLinkText]:"register here.";this.linkifyBrandLogo(e,!0),$(".customer-service-link").attr("href",e.customerCenter),"efn"==e.name&&$("#logo-title").text(e.fullName).show(),e.newMemeberLinkText&&$(".not-a-member-link").text(this.capitalizeFirstLetter(t)),"mw"!==e.name&&"ibd"!==e.name||($(".dt-job-title-for-reg").hide(),16!==parseInt(this.uiLocales.lo)&&(t=DowJones.languages?DowJones.languages[o][e.createFreeAccountText]:"create free account",$(".create-free-acc-link").show(),e.createFreeAccountText&&$(".create-free-acc-link").text(t).css("text-transform","capitalize"),$("#activate-print-subscription").hide(),e.createFreeAccountLink)&&((o=this.getQueryVariable("resource"))&&(e.createFreeAccountLink=e.createFreeAccountLink+"&resource="+decodeURIComponent(o)),$("#create-free-account-url").attr("href",e.createFreeAccountLink),$("#create-free-account").show())),e.newMemberLink&&(t=this.getNewMemberLink(e),$(".not-a-member-link").attr("href",t)),(e.forgotLink?($(".forgot-link").attr("href",e.forgotLink),$(".internal-forgot-routing")):$("#external-forgot-routing")).hide(),e.cookiePolicyLink&&$("#cookiePolicyLink").attr("href",e.cookiePolicyLink),e.privacyPolicyLink&&$("#privacyPolicyLink").attr("href",e.privacyPolicyLink),$("body").addClass(e.name)},getNewMemberLink:function(e){var o=e.newMemberLink;return"mw"===e.name&&(o+="?ui_locales="+this.getQueryVariable("ui_locales"),24&this.uiLocales.lo&&24===parseInt(this.uiLocales.lo)?($("#not-a-member").show(),$(".create-free-acc-link").attr("href",o+="&type=marketwatchvseapp"),$(".mw-label-or, .subscribe-link").hide(),$(".call-to-action #free-account-button").hide()):(16&this.uiLocales.lo&&(o+="&type=marketwatchapp"),this.matchesVSERequirements()&&(o+="&type=mw-vse"))),o},matchesVSERequirements:function(){try{var e,o,t,i,n=this.getQueryVariable("resource");return null===n?!1:(e=decodeURIComponent(n),!1!==this.isValidUrl(e)&&(o=this.parseUrl(e),t=!!o.path.match(/^\/game/i),i=/.*\.marketwatch.com/i.test(o.host),t)&&i)}catch(e){return!1}},parseUrl:isValidUrl:function(e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},isValidEmail:function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)},getCookieByName:function(e){e=document.cookie.match(new RegExp(e+"=([^;]+)"));return e?e[1]:null},capitalizeFirstLetter:parseUrlQuery:function(e){var i={};return"[object String]"===Object.prototype.toString.call(e)&&(e.replace(/([\w\d]+)=([^&]+)/g,function(e,o,t){i[o.toLowerCase()]=decodeURIComponent(t)}),a=i),i},removeQueryParameter:function(e,i){var n;return"[object String]"!==Object.prototype.toString.call(e)||void 0===i||""===i?e:(n=[],e.replace(/([\w\d]+)=([^&]+)/g,function(e,o,t){o.toLowerCase()!==i.toLowerCase()&&n.push(e)}),n.join("&"))},getQueryVariable:function(e,o){if(!o&&a[e])return a[e];for(var t=(o||window.location.search.substring(1)).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");if(decodeURIComponent(n[0].toLowerCase())==e.toLowerCase())return decodeURIComponent(n[1])}return""},subscribeInputForErrorClearing:function(e,o){e.on("keypress",function(){this.classList.contains("error")&&o()})},showProductsCard:function(){this.showOneDJBrands(this.getBrand())&&$("#products-card").fadeIn(150)},showPageById:function(e,o){$("#products-card").hide();var t=r?u.getPageIndex(r):-1,i=u.getPageIndex(e),n=$(".page-"+t),s=$(".page-"+i);$(".page").hide(),n.fadeOut(150),o&&u.showHelpMsg(),this.showProductsCard(),s.fadeIn(150),$(window).width()<=640&&$("html,body").animate({scrollTop:0},200),-1===t&&($(".page-"+i).show(),this.showProductsCard(),o)&&u.showHelpMsg(),r=e,setTimeout(function(){u.trackViewChangeEvent(u.getCurrentRoute(window.location)),s=n=null},500)},getPageIndex:function(e){e=$("#"+e).attr("class");if(e)for(var o=e.split(" "),t=0;t<o.length;t++)if(0===o[t].indexOf("page-"))return parseInt(o[t].substr(5,o[t].length));return-1},onPageUnload:function(){for(var e in n)n[e].destroy&&"function"==typeof n[e].destroy&&n[e].destroy();$("a.navigate-back").off("click"),n=null},trackEvent:trackViewChangeEvent:function(e){this.initialViewTrackSkipped?this.trackEvent(e,{},"view"):this.initialViewTrackSkipped=!0},getCurrentRoute:function(e){return e&&e.hash&&"[object String]"===Object.prototype.toString.call(e.hash)?e.hash.replace(/^[^\w]+/,""):""},modifyLayout:function(e,o){var t=this.getBrand();var i=[this.hideFooter,this.hideRegistration,bind(this),function(){},this.setMobileDesign.bind(this)],n=this.uiLocales?parseInt(this.uiLocales.lo||0,10):0;this.runFunctionOnBitmap(n,i)},setRegistrationPopupEnabled:runFunctionOnBitmap:function(e,o){if(e&&"[object Number]"===Object.prototype.toString.call(e)){var t=e;if(t&&t<65)for(var i=0;t;)1&t&&"function"==typeof o[i]&&o[i](),i++,t>>=1}},hideFooter:function(){},hideRegistration:function(){$("#user-registration").remove(),$("#not-a-member").hide()},hideKeepLoggedIn:getPageEnvironment:function(e){if("sso.accounts.dowjones.com"===e.hostname)return"prod";if("localhost"===e.hostname)return"dev";e=e.hostname.match(/(\w+\.)?(\w+)\.accounts\.dowjones\.com/);if(!e)throw new Error("invalid URL pattern detected");switch(e[2]){case"int":return"qa";case"dev":return"dev";case"stg":return"qa";default:throw new Error("invalid environment detected")}},getLanguage:function(){if(!this.uiLocales)return"en";var e=this.uiLocales.language.toLowerCase(),o=this.uiLocales.countryCode.toLowerCase();if("zh"===e)switch(o){case"cn":e=this.uiLocales.language="zhcn";break;case"tw":e=this.uiLocales.language="zhtw";break;default:e=this.uiLocales.language="zhcn"}return-1<["en","ja","zhcn","zhtw"].indexOf(e)?e:"en"},getAnalyticsLanguage:getAnalyticsBrandData:getAnalyticPageViewNameMapping:translate:function(){var e=this.getLanguage(),o=$("*[data-token]"),t=$("*[token-title]"),i=DowJones.languages[e];o.each(function(){if(0===$(this)[0].childNodes.length)$(this).text(i[$(this).attr("data-token")]);else for(var e=0;e<$(this)[0].childNodes.length;e++)if("#text"===$(this)[0].childNodes[e].nodeName){$(this)[0].childNodes[e].nodeValue=i[$(this).attr("data-token")];break}}),t.each(},getTranslationFromToken:function(e,o){o=o||"";var t=this.getLanguage();return DowJones.languages&&e in DowJones.languages[t]?DowJones.languages[t][e]:o},navigateBack:goToLogin:function(){var e=this.getQueryVariable("state");0<page.len?page.back("/signin"):e?window.history.back(-1):window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},showFullHelpMsg:showLinkHelpMsg:function(){$('p[data-token="helpMsg-msg2"]').hide(),$('p[data-token="helpMsg-msg3"]').hide(),$('p[data-token="helpMsg-msg4"]').hide(),$('p[data-token="helpMsg-msg5"]').hide(),$("#help-msg").fadeIn(150)},showIOSLoginNote:function(){setTimeout(function(){$("#login-title-note").show();var e=u.getBrand(),o=$("#login-title-note").text();$("#login-title-note").text(o.replace("WSJ",e.displayName))},500)},showNotSWGText:function(){$("#sign-in-title").attr("data-token","notYetRegisteredThroughGoogleTitle"),$("#sign-in-title").attr("token-title",null);var e=this.getTranslationFromToken("notYetRegisteredThroughGoogleTitle"),e=($("#sign-in-title").text(e),$("#sign-in-title").attr("title",e),$("#login-title-note").attr("data-token","notYetRegisteredThroughGoogleText"),this.getBrand()),o=this.getTranslationFromToken("notYetRegisteredThroughGoogleText");$("#login-title-note").text(o.replace("WSJ",e.displayName)),$("#login-title-note").show(),this.hideRegistration()},selectHelpMsgConfig:function(){var e=this.getBrand();"link-message"===((null==e?void 0:e.helpMsgType)||"full-message")?this.showLinkHelpMsg():this.showFullHelpMsg()},showHelpMsg:function(){DowJones.OneIdentity.selectHelpMsgConfig()},hideHelpMsg:function(){$("#help-msg").remove()},createTooltips:function(){tippy("#emailOrUsernameTooltip",{allowHTML:!0,interactive:!0,plugins:[e],placement:"right",content:this.getTranslationFromToken("forgotUserNameToolTip")+'<br /><button type="button" class="dj-link no-accent forgot-username-link-tooltip">'.concat(this.getTranslationFromToken("forgotUserName"),"</button>"),onShown:function(){n.loginComponent.bindForgetUsernameTooltipListener()},onHide:function(){var e=$(".forgot-username-link-tooltip");null!=e&&e.off("click")}})},checkPolicyCookieNotices:function(e){e.filter(this.todayInsideDisplayWindow).forEach(bind(this))},changePolicyToNotice:function(e){e===d?(o="cookieNotice",t="a#cookiePolicyLink"):e===c&&(o="privacyNotice",t="a#privacyPolicyLink");var o,t,e=this.getTranslationFromToken(o);$(t).text(e)},noticeUpdatedFactory:function(e,o){var t,i={type:o};for(t in e=e||{})e.hasOwnProperty(t)&&(i[t]=e[t]);return i},todayInsideDisplayWindow:function(e){var o=Date.now(),t=e.startDateTimestamp,e=e.endDateTimestamp;return t<=o&&o<=e},attachUpdatedNotice:function(e){var o,t=this.createUpdateNoticeElement(e),e=(e.type===d?o="a#cookiePolicyLink":e.type===c&&(o="a#privacyPolicyLink"),$(o).closest("a"));$(t).insertAfter(e)},createUpdateNoticeElement:function(e){var o="en-US",e=new Date(e.startDateTimestamp),t=this.uiLocales?this.uiLocales.language:o,t=("ja"===t?o="ja":"zhcn"!==t&&"zhtw"!==t||(o="zh"),e.toLocaleDateString(o,{day:"2-digit",month:"long",year:"numeric"})),e=this.getTranslationFromToken("updatedPPText"),o=document.createElement("span");return o.appendChild(document.createTextNode(e)),o.classList.add("tooltip-label"),o.setAttribute("tabindex","0"),tippy(o,{allowHTML:!0,placement:"bottom",content:"".concat(this.getTranslationFromToken("updatedTkn")," <strong>").concat(t,"</strong>")}),o},hideCustomerService:hideSignInHeader:function(){$(".sign-in-title.hide-if-one-time-linking").hide()},hideElementsForMobile:function(){this.hideCustomerService(),this.hideSignInHeader()},setMobileHeaders:setCreateFreeAccountButton:setMobileLinksDesign:setMobileDesign:configureLoginLayout:isAppleNewsDevice:isObject:isString:stringStartsWith:function(e,o,t){return e.substring(t=!t||t<0?0:+t,t+o.length)===o},emailIsValid:linkifyBrandLogo:function(e,o){(o=o&&!0)?($("#logo-link").attr("href",e.homePage),$("#logo-link").attr("aria-label",e.fullName+" Logo")):($("#logo-link").attr("href","#"),$("#logo-link").prop("disabled",!0),$("#logo-link").attr("onclick","return false;"),$("#logo-link").addClass("inactive-link"),$("#logo-link").attr("aria-label","Logo"))},dec2bin:bin2dec:mergeObjectProperties:function(e,o){var t,i={};return[e,o].forEach(function(e){for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t])}),i},decodeJwt:,window.addEventListener("unload",u.onPageUnload),u)}(),window.DowJones=window.DowJones||{},DowJones.EmailLinkConfirmation=function(){this.$container=$("#email-code-confirmation"),this.oneIdentityClient=DowJones.OneIdentity.initializeOneIdentity(),this.$emailConfirmationForm=this.$container.find("form"),this.$emailContainer=this.$container.find("#email-link-confirmation-email"),this.$code=this.$container.find("#email-code"),this.$codeLabel=this.$container.find('label[for="email-code"]'),this.$emailCodeError=this.$container.find(".email-code-confirmation-error"),this.$emailCodeExpired=this.$container.find(".email-code-confirmation-error-expired"),this.$codeErrorIcon=this.$container.find("#email-code-confirmation-input-error-icon"),this.$fpwSubmit=this.$container.find(".email-code-submit"),this.$fpwSubmit.on("click",this.onCodeSubmit.bind(this)),this.$navigateBack=this.$container.find(".navigate-back"),this.$signWithOtherOptions=this.$container.find("#email-confirmation-return-to-sign-in"),this.$signWithOtherOptions.on("click",this.returnToSignIn),DowJones.OneIdentity.subscribeInputForErrorClearing(this.$code,this.clearErrors.bind(this))},DowJones.EmailLinkConfirmation.prototype={run:function(e){e&&(this.id=e.id,this.email=e.email,this.user=e.user,this.from=e.from||"email-link"),this.clearErrors(),this.$code.val(""),this.showCorrespondingBack(),setTimeout(function(){this.$code.trigger("focus")}.bind(this),500)},onCodeSubmit:function(e){e.preventDefault(),this.clearErrors();var e=this.$code.val().trim(),o=this;this.toggleLoadingStatus(!0),e&&this.email&&this.user?(this.trackOTPCodeSubmission("OTP-submit"),this.oneIdentityClient.passwordlessLogin({id:this.id,send:"code",connection:"email",email:this.email,username:this.user,verificationCode:e,nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",state:DowJones.OneIdentity.getQueryVariable("state")||"",response_mode:DowJones.OneIdentity.getQueryVariable("response_mode")||""},function(e){e&&o.handleOTPError(e),o.toggleLoadingStatus(!1)})):setTimeout(500)},handleOTPError:function(e){this.$code.addClass("error"),this.$codeLabel.addClass("error"),this.$code.trigger("focus"),e&&e.description&&"The verification code has expired. Please try to login again."===e.description?(this.$emailCodeExpired.show(),this.$code.attr("aria-describedby",this.$emailCodeExpired.attr("id"))):(this.$emailCodeError.show(),this.$code.attr("aria-describedby",this.$emailCodeError.attr("id"))),e&&this.trackOTPErrorEvent(e)},toggleLoadingStatus:function(e){e?(this.$code.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$fpwSubmit.addClass("loading")):(this.$code.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$fpwSubmit.removeClass("loading"))},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$emailCodeError.hide(),this.$codeErrorIcon.hide(),this.$emailCodeExpired.hide(),this.$code.removeAttr("aria-describedby")},trackOTPCodeSubmission:function(e){window.DowJones.OneIdentity.trackEvent("email-code-confirmation",{event_name:e},"link")},trackOTPErrorEvent:function(e){var o="OTP-"+e.code,t=e.description;e&&e.description||(o="OTP CATCHALL",t="Blank OTP or Incorrect Email Address"),window.DowJones.OneIdentity.trackEvent("error",{page_error_id:o,page_error_description:t},"view")},showCorrespondingBack:function(){"signin"===this.from?(this.$navigateBack.hide(),this.$signWithOtherOptions.show()):(this.from,this.$navigateBack.show(),this.$signWithOtherOptions.hide())},returnToSignIn:function(){page.back("/signin")},destroy:function(){this.oneIdentityClient=null,this.$container=null,this.$emailConfirmationForm=null,this.$code.off("keypress"),this.$code=null,this.$codeLabel=null,this.$emailError=null,this.$fpwSubmit.off("click"),this.$fpwSubmit=null,this.$emailCodeExpired=null,this.$emailCodeError=null,this.$codeErrorIcon=null,this.$emailContainer=null,this.$navigateBack=null,this.$signWithOtherOptions.off("click"),this.$signWithOtherOptions=null}},window.DowJones=window.DowJones||{},DowJones.EmailVerification=function(){this.conf={emailVerification:"/uap/api/v1/users/verification"},this.$container=$("#email-verification"),this.$regError=this.$container.find(".errors"),this.$cardTitle=this.$container.find(".card-title"),this.$sentEmailVerificationContainer=this.$container.find(".sent-verification-email"),this.$resendVerificationEmailContainer=this.$container.find(".resend-verification-email"),this.$rtlSubmit=this.$container.find(".reg-rtl-btn"),this.$regOkBtn=this.$container.find(".reg-ok-btn"),this.$sendEmailBtn=this.$container.find(".reg-rve-btn"),this.$brandLabel=$("#brand-label"),this.$rtlSubmit.on("click",this.continueLogin.bind(this)),this.$regOkBtn.on("click",this.continueLogin.bind(this)),this.$sendEmailBtn.on("click",this.onSendEmailBtnClick.bind(this)),this.lang=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en"},DowJones.EmailVerification.prototype={run:function(){this.applyBrand()},onRTLSubmitClick:function(e){_returnToSignIn()},onRegOkBtnClick:applyBrand:function(){var e=DowJones.OneIdentity.getBrand(),o=DowJones.languages[this.lang]["continue-portal"];"cventwsj"===e.name?this.$brandLabel.text(o):(o=e.displayName,e.hasOwnProperty("displayAltName")&&(o=e.displayAltName),this.$brandLabel.text(this.$brandLabel.text()+" "+o.toUpperCase()))},getQueryParam:function(e){e=e.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");e=location.search.match(new RegExp("[?&]"+e+"=([^&]+)(&|$)"));return e&&decodeURIComponent(e[1].replace(/\+/g," "))},returnToSignIn:function(){this.clearErrors();var e=DowJones.OneIdentity.getBrand().loginRedirect,o=DowJones.OneIdentity.getQueryVariable("state");o&&o.url&&(e=e.split("?")[0]+"?target="+encodeURIComponent(o.url)+"&opts="+o.opts),window.location.href=window.location.protocol+"//"+window.location.host+"/v2/logout?returnTo="+encodeURIComponent(e)},continueLogin:function(e){var o=this.getQueryParam("state");window.location.href="/continue?state="+o},onSendEmailBtnClick:function(e){var o=DowJones.OneIdentity.getQueryVariable("uuid"),i="Sorry, we are unable to process your request currently. Please try again.";this.toggleLoadingStatus(!0),o&&""!=o.trim()?this.postToCaps(this.createVerificationObj(o),this.conf.emailVerification,o).done(function(e,o,t){this.toggleLoadingStatus(!1),this.$resendVerificationEmailContainer.hide(),this.$sentEmailVerificationContainer.show()}.bind(this)).fail(function(e,o,t){e=e.responseJSON;e&&e.errorReasonCodes&&this.handleCapsError(e.errorReasonCodes),this.showErrors(i)}.bind(this)):this.showErrors(i)},createVerificationObj:function(e){e=e||1;return{data:{attributes:{payload:{verifyUser:{identityUUID:e,type:"VE",editionId:DowJones.OneIdentity.getEdition()}}},id:e,type:"verification"}}},postToCaps:function(e,o,t){var i="one-identity",o={url:o,method:"POST",contentType:"application/json",data:JSON.stringify(e),headers:{"X-REQUEST-SCHEME":"HTTPS","X-HTTP-Method-Override":"POST","origin-application-name":i,"source-application-name":i,"source-application-request-identifier":t,"origin-application-request-identifier":t}};return $.ajax(o)},toggleLoadingStatus:function(e){e?(this.$rtlSubmit.prop("disabled",!0),this.$sendEmailBtn.prop("disabled",!0),this.$sendEmailBtn.addClass("loading")):(this.$rtlSubmit.prop("disabled",!1),this.$sendEmailBtn.prop("disabled",!1),this.$sendEmailBtn.removeClass("loading"))},handleCapsError:function(e){var o,t=[];if(Array.isArray(e)){for(;o=e.shift();)switch(o){case"x-request-scheme-invalid":case"x-request-scheme-required":case"respType-invalid":case"respType-required":t.push("Some of the information does not match. Please contact customer service to correct your account.");break;case"user-notfound":t.push("We are unable to locate your account. Please contact customer service for further assistance.");break;case"no-pending-verification":t.push("Your account appears to have been verified. Please go back to Sign in.");break;case"X-REMOTE-UUID-required":case"X-REMOTE-UUID-minlength":case"X-REMOTE-UUID-maxlength":t.push("Some of the information does not match. Please contact customer service to correct your account.");break;default:t.push("Sorry, we are unable to process your request. Please contact customer service to correct your account.")}this.showErrors(t)}},showErrors:function(e){this.toggleLoadingStatus(!1),this.$resendVerificationEmailContainer.show(),this.$sentEmailVerificationContainer.hide(),this.$regError.addClass("error");var o=Object.prototype.toString.call(e),o="[object String]"===o?"<ul><li>"+e+"</li></ul>":"[object Array]"===o?"<ul><li>"+e.join("</li><li>")+"</li></ul>":e;this.$regError.html(o),this.$regError.show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$container.find(".input-error").hide(),this.$regError.text(""),this.$regError.hide(),this.$cardTitle.show()},destroy:function(){this.clearErrors(),this.conf=null,this.$container=null,this.$regError=null,this.$rtlSubmit.off("click"),this.$rtlSubmit=null,this.$regOkBtn.off("click"),this.$regOkBtn=null,this.$sendEmailBtn.off("click"),this.$sendEmailBtn=null,this.$cardTitle=null,this.$resendVerificationEmailContainer=null,this.$sentEmailVerificationContainer=null,this.$brandLabel=null,this.lang=null}},window.DowJones=window.DowJones||{},DowJones.ForgotPasswordForm=function(e){this.conf={usernameServiceForgotPW:"/forgot-credentials/start",usernameServiceRoles:"/auth/roles/forgotpassword",usernameServiceServiceRoles:"/auth/roles/forgotpasswordWithUsername",checkUserPath:"/getuser"},this.oneIdentityClient=DowJones.OneIdentity.initializeOneIdentity(),this.$container=$("#forgot-password"),this.$fpwForm=this.$container.find("form"),this.loginAttempts=0,this.chatLoginCount=0,this.invalidEntitlements=0,this.$email=this.$container.find("#fpw-email"),this.$emailLabel=this.$container.find('label[for="fpw-email"]'),this.$emailError=this.$container.find(".fpw-email-error"),this.$errors=this.$container.find(".errors"),this.$emailErrorIcon=this.$container.find("#fpw-email-input-error-icon"),this.$fpwSubmit=this.$container.find(".fpw-submit"),this.$fpwSubmit.on("click",this.onEmailSubmit.bind(this)),this.$emailOTPSubmit=this.$container.find(".email-OTP-submit"),this.$emailOTPSubmit.on("click",this.onOTPRequest.bind(this)),this.$emailLinkSubmit=this.$container.find(".email-link-submit"),this.$emailLinkSubmit.on("click",this.onMagicLinkRequest.bind(this)),this.$backToLogin=this.$container.find(".return-to-login"),this.$backToLogin.on("click",this.goToLogin.bind(this)),this.$emailNotFound=!1,this.$cardTitle=this.$container.find(".card-title > h2"),this.$cardMessage=this.$container.find(".form__full .centered-padded p"),this.oneIdentityConfig=e,DowJones.OneIdentity.subscribeInputForErrorClearing(this.$email,this.clearErrors.bind(this))},DowJones.ForgotPasswordForm.prototype={run:function(e){this.focusInput(),this.conditionallyRenderPasswordless(),this.clearErrors(),this.$email.val(e)},conditionallyRenderPasswordless:function(){var e=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.opts:0,o=DowJones.OneIdentity.getBrand(),t=this.getCookieByName("venus");o&&0<e&&(o=this.getTranslationFromToken("forgotPasswordQuestion"),e=this.getTranslationFromToken("forgotPwdMsg"),this.$cardTitle.text(o),this.$cardMessage.text(e),this.$emailOTPSubmit.parent().show(),"-1"===t&&this.$emailOTPSubmit.parent().show(),"-2"===t&&(this.$emailLinkSubmit.parent().show(),this.$emailOTPSubmit.parent().hide()),"-3"===t)&&(this.$emailOTPSubmit.parent().show(),this.$emailLinkSubmit.parent().show())},getCookieByName:function(e){e=document.cookie.match(new RegExp(e+"=([^;]+)"));return e?e[1]:null},getPayloadObj:function(e){return{username:e,csrf:(null==(e=this.oneIdentityConfig)||null==(e=e.extraParams)?void 0:e._csrf)||"",client_id:DowJones.OneIdentity.getQueryVariable("client"),ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",template_code:DowJones.OneIdentity.getEdition()}},handleErrorOnSubmit:function(e){e="&forgotPasswordError="+(e.status||"")+"true&cookieEnabled="+DowJones.LoginForm.prototype.areCookiesEnabled();DowJones.LoginForm.prototype.sendDataToLog("/error/forgot-password-error?",e),this.unsetLoadingStatus()},onEmailSubmit:function(e){e.preventDefault(),this.clearErrors();var o=this,e=this.$email.val();!1!==this.validateForm()&&(this.setLoadingStatus(this.$fpwSubmit),this.postToUserNameService(this.getPayloadObj(e),this.conf.usernameServiceForgotPW).done(.fail(function(e){403===e.status||429===e.status?(console.log("Expired csrf token",e),o.handleErrorOnSubmit(e),o.$errors.text("An unknown error occurred during the forgot password process. Please "),o.$errors.append('<a href="javascript:void()" onclick="window.location.reload(true)">Refresh</a>')):(console.log("Username/Email not found",e),o.handleErrorOnSubmit(e),o.$errors.text("Username or Email not found")),o.showErrors()}))},onOTPRequest:function(e){var n,s,r;e.preventDefault(),this.clearErrors(),!1!==this.validateForm()&&(n=this.$email.val(),(r=this).setLoadingStatus(this.$emailOTPSubmit),this.checkUser(n,this.conf.checkUserPath).done(function(e,o,t){var i;e.email?(s=e.email,i=e.id,e=DowJones.OneIdentity.getQueryVariable("ui_locales").split("-")[3],r.oneIdentityClient.passwordlessStart({send:"code",connection:"email",email:s,authParams:{nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",username:n,state:DowJones.OneIdentity.getQueryVariable("state")||"",current_brand:e,code_challenge:DowJones.OneIdentity.getQueryVariable("code_challenge")||"",code_challenge_method:DowJones.OneIdentity.getQueryVariable("code_challenge_method")||"",id:i,ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",response_mode:DowJones.OneIdentity.getQueryVariable("response_mode")||""}},function(e){var o={id:i,email:s,user:n};page.show("/email-code-confirmation",o),r.unsetLoadingStatus()})):(page.show("/email-code-confirmation",context),r.unsetLoadingStatus())}).fail(function(e,o,t){!e||429!==e.status&&403!==e.status?page.show("/email-code-confirmation"):(r.$errors.text("An unknown error occurred during the forgot password process. Please "),r.$errors.append('<a href="javascript:void()" onclick="window.location.reload(true)">Refresh</a>'),r.showErrors()),r.unsetLoadingStatus()}))},onMagicLinkRequest:function(e){var i,n,s;e.preventDefault(),this.clearErrors(),!1!==this.validateForm()&&(i=this.$email.val(),(s=this).setLoadingStatus(this.$emailLinkSubmit),this.checkUser(i,this.conf.checkUserPath).done(function(e,o,t){e.email?(n=e.email,e=e.id||"",s.oneIdentityClient.passwordlessStart({send:"link",connection:"email",email:n,authParams:{nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",username:i,code_challenge:DowJones.OneIdentity.getQueryVariable("code_challenge")||"",code_challenge_method:DowJones.OneIdentity.getQueryVariable("code_challenge_method")||"",id:e,ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",response_mode:DowJones.OneIdentity.getQueryVariable("response_mode")||""}},function(e){var o={email:n,user:i};page.show("/email-link-confirmation",o),s.unsetLoadingStatus()})):(page.show("/email-link-confirmation",context),s.unsetLoadingStatus())}).fail(function(e,o,t){page.show("/email-link-confirmation"),s.unsetLoadingStatus()}))},checkUser:function(e,o){var t={username:e,csrf:(null==(t=this.oneIdentityConfig)||null==(t=t.extraParams)?void 0:t._csrf)||""},o={method:"POST",url:o,contentType:"application/json",data:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json","X-REQUEST-SCHEME":"https","X-REQUEST-EDITIONID":DowJones.OneIdentity.getEdition(),"X-REMOTE-USER":e}};return $.ajax(o)},validateForm:function(){return 0!==this.$email.val().length||(this.$email.addClass("error"),this.$emailLabel.addClass("error"),this.$emailError.show(),this.$email.attr("aria-describedby",this.$emailError.attr("id")),this.$email.trigger("focus"),!1)},postToUserNameService:function(e,o){var t="one-identity",o={type:"POST",url:o,data:JSON.stringify(e),contentType:"application/json",headers:{"X-REQUEST-SCHEME":"HTTPS","X-HTTP-Method-Override":"POST","origin-application-name":t,"source-application-name":t}};return $.ajax(o)},handleErrorFromUserNameService:function(e){e&&((e=e.responseJSON||(e.responseText?JSON.parse(e.responseText):void 0))?e.errorReasonCodes&&0<=$.inArray("username-format",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,3<=this.loginAttempts&&this.loginAttempts,this.$errors.text("Invalid Username Format"),pageName="Error_password_forgot_UsernameDoesNotExists"):e.errorReasonCodes&&0<=$.inArray("emailAddress-duplicate",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("emailAddress-duplicate","There are more than one accounts with this email address. Please contact Customer Service for assistance.")),pageName="Error_password_forgot_MultipleAccounts"):e.errorReasonCodes&&0<=$.inArray("authorization-failed",e.errorReasonCodes)?(this.invalidEntitlements++,this.invalidEntitlements,this.$errors.text(this.getTranslationFromToken("oneIdAuthorizationFailed","We are unable to process your request as your authorization has failed. Please contact Customer Service for further assistance.")),pageName="Error_no_email_associated"):e.errorReasonCodes&&0<=$.inArray("emailAddress-notfound",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$emailNotFound=!0,this.$errors.text(this.getTranslationFromToken("oneIdEmailNotFound","We could not locate the email address provided. Please contact Customer Service for further assistance.")),pageName="Error_password_forgot_EmailAddressDoesNotExists"):e.errorReasonCodes&&0<=$.inArray("emailAddress-notassociated",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdEmailNotAssociated","The email address is not associated with a user. Please contact Customer Service for further assistance.")),pageName="Error_password_forgot_EmailAddressNotAssociated"):e.errorReasonCodes&&0<=$.inArray("username-notfound",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdUserNotLocated","We could not locate the user provided. Please contact Customer Service for further assistance.")),pageName="Error_no_email_associated"):e.errorReasonCodes&&0<=$.inArray("account-locked",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdAccountLocked","Your account is locked. Please contact Customer Service for further assistance.")),pageName="Error_account-locked"):e.errorReasonCodes&&0<=$.inArray("emailAddress-format",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdInvalidEmailFormat","The email address format is invalid. Please correct and resubmit.")),this.$emailNotFound=!0,pageName="Error_password_forgot_EmailAddressDoesNotExists"):e.errorReasonCodes&&0<=$.inArray("validationfailure",e.errorReasonCodes)?pageName="Forgot Password Scrim ValidationFailure Error":this.clearErrors():this.clearErrors())},getTranslationFromToken:function(e,o){return DowJones.OneIdentity.getTranslationFromToken(e,o)},showErrors:function(){this.toggleLoadingStatus(!1),this.$errors.addClass("error"),this.$errors.show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$emailError.hide(),this.$emailErrorIcon.hide(),this.$errors.hide(),this.$email.removeAttr("aria-describedby")},disableForm:function(){this.resetFormStatus(),this.$email.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$emailOTPSubmit.prop("disabled",!0),this.$emailLinkSubmit.prop("disabled",!0)},enableForm:function(){this.resetFormStatus(),this.$email.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$emailOTPSubmit.prop("disabled",!1),this.$emailLinkSubmit.prop("disabled",!1),this.$email.trigger("focus")},resetFormStatus:setLoadingStatus:function(e){this.resetFormStatus(),this.disableForm(),e.addClass("loading")},unsetLoadingStatus:function(){this.resetFormStatus(),this.enableForm()},toggleLoadingStatus:function(e){e?(this.$email.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$emailOTPSubmit.prop("disabled",!0),this.$emailLinkSubmit.prop("disabled",!0),this.$fpwForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$emailOTPSubmit.prop("disabled",!1),this.$emailLinkSubmit.prop("disabled",!1),this.$fpwForm.removeClass("loading"))},goToLogin:function(){DowJones.OneIdentity.goToLogin()},focusInput:function(){setTimeout(function(){this.$email.trigger("focus")}.bind(this),300)},destroy:function(){this.oneIdentityClient=null,this.$container=null,this.$fpwForm.off("keypress"),this.$fpwForm=null,this.$email.off("keypress"),this.$email=null,this.$emailLabel=null,this.$emailError=null,this.$emailErrorIcon=null,this.$errors=null,this.$fpwSubmit.off("click"),this.$fpwSubmit=null,this.$emailOTPSubmit.off("click"),this.$emailOTPSubmit=null,this.$backToLogin.off("click"),this.$backToLogin=null,this.conf=null,this.$emailLinkSubmit.off("click"),this.$emailLinkSubmit=null,this.$cardTitle=null,this.$cardMessage=null,this.oneIdentityConfig=null}},window.DowJones=window.DowJones||{},DowJones.ForgotUsernameForm=function(e){this.conf={usernameServiceForgotPW:"/forgot-credentials/start",usernameServiceRoles:"/auth/roles/forgotpassword",usernameServiceServiceRoles:"/auth/roles/forgotpasswordWithUsername"},this.$container=$("#forgot-username"),this.$funForm=this.$container.find("form"),this.loginAttempts=0,this.chatLoginCount=0,this.invalidEntitlements=0,this.$email=this.$container.find("#fun-email"),this.$emailLabel=this.$container.find('label[for="fun-email"]'),this.$emailError=this.$container.find(".fun-email-error"),this.$emailErrorIcon=this.$container.find("#fun-email-input-error-icon"),this.$errors=this.$container.find(".errors"),this.$funSubmit=this.$container.find(".fun-submit"),this.$funSubmit.on("click",this.onEmailSubmit.bind(this)),this.$backToLogin=this.$container.find(".return-to-login"),this.$backToLogin.on("click",this.goToLogin.bind(this)),this.$emailNotFound=!1,this.oneIdentityConfig=e,DowJones.OneIdentity.subscribeInputForErrorClearing(this.$email,this.clearErrors.bind(this))},DowJones.ForgotUsernameForm.prototype={run:function(){setTimeout(function(){this.$email.trigger("focus")}.bind(this),300)},getPayloadObj:function(e){return{username:e,csrf:(null==(e=this.oneIdentityConfig)||null==(e=e.extraParams)?void 0:e._csrf)||"",client_id:DowJones.OneIdentity.getQueryVariable("client"),ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",template_code:DowJones.OneIdentity.getEdition()}},onEmailSubmit:function(e){e.preventDefault(),this.clearErrors();var o=this,e=this.$email.val();!1!==this.validateForm()&&(this.toggleLoadingStatus(!0),this.postToUserNameService(this.getPayloadObj(e),this.conf.usernameServiceForgotPW).done(function(e){page.show("/forgot-username-confirm"),o.toggleLoadingStatus(!1)}).fail(function(e){403===e.status||429===e.status?(console.log("Expired csrf token",e),o.$errors.text("An unknown error occurred during the forgot username process. Please "),o.$errors.append('<a href="javascript:void()" onclick="window.location.reload(true)">Refresh</a>')):(console.log("Username/Email not found",e),o.toggleLoadingStatus(!1),o.$errors.text("Username or Email not found")),o.showErrors()}))},postToUserNameService:function(e,o){var t="one-identity",o={type:"POST",url:o,data:JSON.stringify(e),contentType:"application/json",headers:{"X-REQUEST-SCHEME":"HTTPS","X-HTTP-Method-Override":"POST","origin-application-name":t,"source-application-name":t}};return $.ajax(o)},handleErrorFromUserNameService:function(e){e&&((e=e.responseJSON||(e.responseText?JSON.parse(e.responseText):void 0))?e.errorReasonCodes&&0<=$.inArray("username-format",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,3<=this.loginAttempts&&this.loginAttempts,this.$errors.text("Invalid Username Format"),pageName="Error_password_forgot_UsernameDoesNotExists"):e.errorReasonCodes&&0<=$.inArray("emailAddress-duplicate",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("emailAddress-duplicate","There are more than one accounts with this email address. Please contact Customer Service for assistance.")),pageName="Error_password_forgot_MultipleAccounts"):e.errorReasonCodes&&0<=$.inArray("authorization-failed",e.errorReasonCodes)?(this.invalidEntitlements++,this.invalidEntitlements,this.$errors.text(this.getTranslationFromToken("oneIdAuthorizationFailed","We are unable to process your request as your authorization has failed. Please contact Customer Service for further assistance.")),pageName="Error_no_email_associated"):e.errorReasonCodes&&0<=$.inArray("emailAddress-notfound",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$emailNotFound=!0,this.$errors.text(this.getTranslationFromToken("oneIdEmailNotFound","We could not locate the email address provided. Please contact Customer Service for further assistance.")),pageName="Error_password_forgot_EmailAddressDoesNotExists"):e.errorReasonCodes&&0<=$.inArray("emailAddress-notassociated",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdEmailNotAssociated","The email address is not associated with a user. Please contact Customer Service for further assistance.")),pageName="Error_password_forgot_EmailAddressNotAssociated"):e.errorReasonCodes&&0<=$.inArray("username-notfound",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdUserNotLocated","We could not locate the user provided. Please contact Customer Service for further assistance.")),pageName="Error_no_email_associated"):e.errorReasonCodes&&0<=$.inArray("account-locked",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdAccountLocked","Your account is locked. Please contact Customer Service for further assistance.")),pageName="Error_account-locked"):e.errorReasonCodes&&0<=$.inArray("emailAddress-format",e.errorReasonCodes)?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdInvalidEmailFormat","The email address format is invalid. Please correct and resubmit.")),this.$emailNotFound=!0,pageName="Error_password_forgot_EmailAddressDoesNotExists"):e.errorReasonCodes&&0<=$.inArray("validationfailure",e.errorReasonCodes)?pageName="Forgot Password Scrim ValidationFailure Error":this.clearErrors():this.clearErrors())},getTranslationFromToken:showErrors:function(){this.toggleLoadingStatus(!1),this.$errors.addClass("error"),this.$errors.show()},validateForm:function(){return 0!==this.$email.val().length||(this.$email.addClass("error"),this.$emailLabel.addClass("error"),this.$emailError.show(),this.$email.attr("aria-describedby",this.$emailError.attr("id")),this.$email.trigger("focus"),!1)},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$emailError.hide(),this.$emailErrorIcon.hide(),this.$errors.hide(),this.$email.removeAttr("aria-describedby")},toggleLoadingStatus:function(e){e?(this.$email.prop("disabled",!0),this.$funSubmit.prop("disabled",!0),this.$funSubmit.addClass("loading")):(this.$email.prop("disabled",!1),this.$funSubmit.prop("disabled",!1),this.$funSubmit.removeClass("loading"))},goToLogin:function(){DowJones.OneIdentity.goToLogin()},destroy:function(){this.$container=null,this.$funForm=null,this.$email.off("keypress"),this.$email=null,this.$emailLabel=null,this.$emailError=null,this.$errors=null,this.$emailErrorIcon=null,this.$funSubmit.off("click"),this.$funSubmit=null,this.$backToLogin.off("click"),this.$backToLogin=null,this.conf=null,this.oneIdentityConfig=null}},window.DowJones=window.DowJones||{},DowJones.ForgotPasswordConfirmation=function(){this.$container=$("#forgot-password-confirmation"),this.$resendEmailBtn=this.$container.find(".resend-email"),this.$resendEmailBtn.on("click",this.onResendEmail.bind(this))},DowJones.ForgotPasswordConfirmation.prototype={run:function(){setTimeout(function(){this.$backToSignIn.trigger("focus")}.bind(this),100)},onResendEmail:function(e){e.preventDefault(),this.clearErrors(),DowJones.OneIdentity.getQueryVariable("state")?window.history.go(-2):window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},clearErrors:function(){this.$container.find(".error").removeClass("error")},destroy:function(){this.$container=null,this.$resendEmailBtn.off("click"),this.$resendEmailBtn=null}},window.DowJones=window.DowJones||{},DowJones.ForgotUsernameConfirmation=function(){this.$container=$("#forgot-username-confirmation"),this.$resendEmailBtn=this.$container.find(".resend-email"),this.$resendEmailBtn.on("click",this.onResendEmail.bind(this))},DowJones.ForgotUsernameConfirmation.prototype={run:function(){setTimeout(function(){this.$backToSignIn.trigger("focus")}.bind(this),100)},onResendEmail:function(e){e.preventDefault(),this.clearErrors(),DowJones.OneIdentity.getQueryVariable("state")?window.history.go(-2):window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},clearErrors:function(){this.$container.find(".error").removeClass("error")},destroy:function(){this.$container=null,this.$resendEmailBtn.off("click"),this.$resendEmailBtn=null}},window.DowJones=window.DowJones||{},DowJones.languages={en:{"helpMsg-msg2":"1-800-JOURNAL (1-800-568-7625)","social-login-already-have-post":"account","social-login-create-a-post":"account","otl-sign-in-using-post":"account","otl-able-connect-post":"account and social accounts for quick and easy log in. To connect, log into your account once.","social-login-account-not-found":"Account Not Found",oneIdActivateSubscription:"Activate your digital subscription","social-login-already-have-pre":"Already have a","social-login-already-have-account":"Already have an account?",oneIdPwAlreadyUpdatedMsg:"Already updated your password?",anEmailWasSentToYou:"An email was sent to you with instructions on how to sign in.",emailVerificationSent:"An email with a verification link has been sent to the registered email address. Please check your email and verify your email address.",anEmailWithYourUsernameAndPassword:"An email with your username and password reset instructions has been sent. If you don't receive the email within a few minutes, please check your spam folder.",smsSent:"An SMS was sent with the access code.","unknown-error-refresh-pre":"An unknown error occurred during the sign in process. Please",and:"and",backToStep:"Back to previous step",backToSignIn:"Back to Sign In",byRegistering:"By registering, you agree to receive updates and special offers from other Dow Jones products and services.",chooseNewCorrectLengthPassword:"Choose a new password that is between 5 and 32 characters and only contains letters and numbers.",clickHereToLearnMore:"Click here to learn more!",confirmPassword:"Confirm Password","otl-connect-continue":"Connect and continue","social-login-connect-using-account":"Connect using your account.",connectYour:"Connect your","contact-customer-service":"contact customer service.",continue:"Continue",oneIdContinueTo:"Continue to",continueToProduct:"Continue to product",continuewithpassword:"Continue With Password",cookieNotice:"Cookie Notice",cookiePolicy:"Cookie Policy","cookie-message":"Cookies allow us to sign you into Dow Jones products. Please enable cookies in your browser settings. After enabling cookies, come back to this page to sign in.",FPFUI_CountryCode:"Country Code","social-login-create-a-pre":"Create a","social-login-create-limited-account":"Create a limited access account.",createFreeAccount:"create free account",customerService:"Customer Service",didNotReceiveAnEmail:"Didn't receive an email? Contact",copyRightPhraseDJ:"Dow Jones, Inc. All rights reserved.",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",errorForUser210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",updatedTkn:"Effective",enterEmail:"Email",userEmail:"Email",emailLink:"email link",usernameOrEmail:"Email or username","enable-cookies":"Enable Cookies",enterCode:"Enter",enterSms:"Enter SMS code",enterEmailForUsername:"Enter the email address associated with your account. We'll email your username to this address if it matches our records.",forgotPwdMsg:"Enter the email address or username associated with your account and let us know how you want to log in today.",instructionsOTP:"Enter the email address or username associated with your account. We'll email a one time passcode if it matches our records",enterEmailForPassword:"Enter the email address or username associated with your account. We'll email you with the instructions on how to reset your password.",bulkFirstName:"First Name",proPEVCBKMsg3:"For further assistance, please contact wsjprocustomerservice@dowjones.com.",forLimitedAccessCreateFreeReg:"For limited access, create a free registration account",forLoggingInWith:"for logging in with",securityLogInAgainAllDevices:"For security reasons, you will need to log in again on all devices.",forgotPasswordQuestion:"Forgot password?",forgotUserName:"Forgot username?",forgotYour:"Forgot your",forgotYourPre:"Forgot your","helpMsg-msg1":"Forgot your email address? Login issues? Did not receive email?",goToSignIn:"Go to Sign In","radarShareEmail-1":"Hello",help:"Help",hereLabel:"here",hide:"Hide",hidePasswordLabel:"Hide Password",IAgreeToThe:"I agree to the",forgotUserNameToolTip:"If you cannot log in with an email address, you may have to log in with a username.",iOSLoginNote:"If you do not know your password, please request a One-time password.",ifYouDontReceive:"If you don't receive the email within a few minutes, check your spam folder.",proPEVCBKMsg2:"If you have an existing WSJ.com account under the same email address as your WSJ Pro membership, please use those login credentials below. If you do not have an existing WSJ.com account or you have forgotten your password, please click the forgot username/password link below and enter the email address you use to access your WSJ Pro membership. Follow the directions provided to reset your password and access your account.",proPEVCBKMsg1:"If you joined WSJ Pro on or before July 12, 2018 and you are having trouble logging in, your account has been transitioned to the new member platform with a new sign-in process.",anEmailWithYourUsernameAndPasswordEmailAddress1:"If your email address matches an account in our record then we've sent you a message with further instructions.","enterCodeMsg-1":"If your email address or username",anEmailWithYourUsernameAndPassword1:"If your email address or username matches an account in our records then we've sent you a message with further instructions.","wrong-password-general":"Incorrect Password. Your password does not match our records. Please try again or",invalidAccessCode:"Invalid access code",invalidPhoneNumber:"Invalid phone number",keepMeSignedIn:"Keep me signed in",bulkLastName:"Last Name",lastNameColumn:"Last Name",oneIdLogIn:"Log in",loginLowerCase:"login",notYetRegisteredThroughGoogleText:"Looks like you haven't registered your WSJ account through Google. Please continue with other login options below","checkEmailforMagicLink-2":"matches with a WSJ account, youll receive a magic link in your inbox. If you dont get the link, check your spam folder.","enterCodeMsg-2":"matches with an account, you'll receive a one time passcode (OTP) in your inbox. If you don't get the code, check your spam folder.","social-login-member-sign-in":"MEMBER SIGN IN","helpMsg-msg4":"Monday - Friday: 7AM to 10PM EST",passwordLength:"Must be between 5 and 32 characters in length.","additional-help":"Need Additional Help?",newPassword:"New Password",oneIdNewTo:"New to",nextTitle:"Next",noRegisterAndSignMeIn:"NO, REGISTER AND SIGN ME IN",notAMember:"Not a member?",notASubscriber:"Not a subscriber?",notYetRegisteredThroughGoogleTitle:"Not Yet Registered through Google",ok:"OK",oneTimePasscode:"One Time Passcode (OTP)",oneTimePassword:"One Time Password (OTP)",passwordCharacters:"Only letters and numbers are permitted.",orLabel:"Or",orTkn:"or",optionGoBack:"Or go back to",signInSocial:"Or sign in with a social account:",password:"Password",passwordPre:"password",oneIdPwExpired:"Password Expired",phoneNumberLabel:"Phone Number",regPolicyError:"Please agree to the Privacy and Cookie policies",oneIdTempPwCall:"Please call customer service to reset your password:",pleaseCheckYourEmail:"Please Check Your Email",registrationCompleteMsg2:"Please check your email and complete your registration by clicking on the link in the email.",registrationConfirmationMsg:"Please check your email and verify your email address to ensure we can send important information about your subscription.",errorOTP:"Please check your one time passcode again.",chooseNewPassword:"Please choose a new password.",oneIdTempPwWarnMsg2:"Please click below to update your password.",confirmPasswordError:"Please confirm your new password",regPasswordError:"Please enter a proper password length.",enterOTPCode:"Please Enter the Code",regEmailError:"Please enter your email address",pleaseEnterYourEmailAddressOrUsername:"Please enter your email address or username.",enterEmailForResetPassword:"Please enter your email below to generate a new link to reset your password. Once your password is reset, you will be logged out across all devices.",regFirstNameError:"Please enter your first name",regLastNameError:"Please enter your last name",enterNewPassword:"Please enter your new password",plsEntPassword:"Please enter your password",signInBelow:"Please sign in below",invalidPassword:"Please try again. You've entered a password that contains invalid characters.","create-account-later":"Please try creating an account later.",resendVerificationEmailMsg:"Please verify your email address to ensure you are able to receive important information regarding your account.",previousStep:"previous step",oneIdPrintSubscriber:"Print subscriber?",privacyNotice:"Privacy Notice",privacyPolicy:"Privacy Policy","recover-username":"recover your username.","unknown-error-refresh":"refresh",registerHere:"register here.",registerNow:"Register Now",anEmailWithYourUsernameAndPassword2:"Remember to check your spam folder just in case.","request-password":"request a new password.",requestEmailLink:"Request email link",requestPasswordReset:"Request Password Reset",loginSMSRequest:"Request SMS code",requestUsernameReset:"Request Username",resendEmail:"RESEND EMAIL",resetPassword:"Reset Password","reset-password-general":"reset your password.",returnToSignInOptions:"Return to more sign-in options","helpMsg-msg5":"Saturday: 7AM to 5PM EST",sendL:"Send Link",singInMagicLink:"Send Magic Link",signInMagicLink:"Send One Time Link",sendOTP:"Send One-Time Passcode",sendSmsCode:"Send SMS Code",resendVerificationEmail:"Send Verification Email","service-unavailable":"Service is currently unavailable.","try-again-later":"Service is currently unavailable. Please try again later.",show:"Show",showPasswordLabel:"Show Password",signIn:"Sign In","otl-sign-in-using-pre":"Sign in using your",signInWith:"Sign in with",signInWithA:"Sign in with a",signInOTP:"SIGN IN WITH A TEMPORARY PASSCODE",signInWithAn:"Sign in with an",signInWithApple:"Sign in with Apple",signInWithFacebook:"Sign in with Facebook",signInWithGoogle:"Sign in with Google",signOut:"Sign out",sms:"SMS",smsCode:"SMS Code",socialSignHeader:"Social Sign-in",passwordMinLength:"Sorry, password must be at least 5 characters in length.",passwordMaxLength:"Sorry, password must be less than 32 characters.",resetPasswordExpiredToken:"Sorry, the Reset Password link is expired or invalid. Please enter your email or username below to generate a new link to reset your password.",invalidToken:"Sorry, this operation cannot be completed as the token is invalid or expired. Please resend the email to complete the operation.",submit:"Submit",subscribe:"Subscribe",success:"Success!",oneIdTempPwLbl:"Temporary Password",thankYou:"Thank You",thankYouExcl:"Thank You!",oneIdInvalidEmailFormat:"The email address format is invalid. Please correct and resubmit.",oneIdEmailNotAssociated:"The email address is not associated with a user. Please contact Customer Service for further assistance.",emailInUse:"The email you are trying to register with has already been used or connected to a different account, please try a different one.","unknown-error-refresh-post":"the page or return to your previous screen to try again.",regConfirmPwdError:"The passwords you entered do not match. Please try again.","emailAddress-duplicate":"There are more than one accounts with this email address. Please contact Customer Service for assistance.",toYourExistingSubscription:"to your existing subscription and preferences to sign in quickly in the future, and more easily share articles and comments with your friends.","helpMsg-msg3":"Toll: 1-609-627-1351",oneIdTempPwUpdate:"Update password",updatedPPText:"UPDATED",emailOrUserName:"User ID or Email Address",usernamePre:"username",usernameOrPassword:"username or password?",resetPasswordTokenIsValidating:"Validating your reset password link...",verifyCode:"VERIFY CODE",registrationConfirmationTitle:"Verify your Email Address","view-cookie-policy":"View cookie policy",proPEVCBKMsg:"We are in the process of transitioning to a new member platform. If you have previously logged into WSJ.com, please use those credentials here.\r\nif you do not remember your password or you do not have an account with WSJ.com, please click the forgot username or password link below",oneIdAuthorizationFailed:"We are unable to process your request as your authorization has failed. Please contact Customer Service for further assistance.","social-login-cannot-find-account":"We cannot find an account associated with the social email you entered.",oneIdEmailNotFound:"We could not locate the email address provided. Please contact Customer Service for further assistance.",oneIdUserNotLocated:"We could not locate the user provided. Please contact Customer Service for further assistance.",unableToFindUser:"We were unable to find this email/username and password combination.",weWillEmailYou:"We will email you a link that you can use to sign in.",loginSMSMsg:"We will send you an SMS with the access code.",welcomeWelcome:"WELCOME","welcome-message":"Welcome",welcomeBack:"Welcome Back! Sign in to Continue Reading WSJ",yesConnect:"Yes, connect","otl-able-connect-pre":"You are now able to connect your","multiple-accounts":"You have multiple accounts with the same email. Please try logging in with your username or",oneIdAccountLocked:"Your account is locked. Please contact Customer Service for further assistance.","no-digital-subscription":"Your Dow Jones subscription does not include digital products. Please","no-email-match-correct":"Your email does not match our records. Please try correcting your email or try a username.","no-email-match":"Your email does not match our records. Please try logging in with a username, or",expiredOTP:"Your passcode has expired","wrong-password-email-newline":"Your password is incorrect for the email you entered. \r\n\r\nPlease try again or","wrong-password-email":"Your password is incorrect for the email you entered. Please try again or","wrong-password-username-newline":"Your password is incorrect for the username you entered. \r\n\r\nPlease try again or","wrong-password-username":"Your password is incorrect for the username you entered. Please try again or",passwordChanged:"Your password was successfully changed.",registrationCompleteMsg:"Your registration is complete. We sent a confirmation email.",regVerifComplete:"Your registration verification is complete.",signinDisclaimer:"Your sign in credentials (email address and password) are universal and will be used to provide you with access across Dow Jones branded products.",oneIdTempPwExpired:"Your temporary password has expired.","no-username-match":"Your username does not match our records. Please try logging in with your email, or we can help you",oneIdTempPwWarnMsg1:"You've logged in using a temporary password."},ja:{"helpMsg-msg4":" ","helpMsg-msg5":" ","social-login-create-a-pre":" ","otl-sign-in-using-pre":" ","otl-able-connect-pre":" ",resetPasswordExpiredToken:"","helpMsg-msg2":"0120 779 868",oneTimePasscode:"1OTP",signInOTP:"1",errorOTP:"1",sendOTP:"1",oneTimePassword:"1OTP",signInMagicLink:"1",passwordLength:"532",and:"and","view-cookie-policy":"Cookies","enable-cookies":"Cookies",cookieNotice:"Cookie",didNotReceiveAnEmail:"Didn't receive an email? Contact",copyRightPhraseDJ:"Dow Jones, Inc. All rights reserved.","cookie-message":"Dow JonesCookiesCookies","no-digital-subscription":"Dow Jones",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",userEmail:"E",requestEmailLink:"E",emailLink:"E",signInWithFacebook:"Facebook",signInWithGoogle:"Google",ok:"OK",orLabel:"Or",sms:"SMS",smsCode:"SMS",loginSMSRequest:"SMS",enterSms:"SMS",sendSmsCode:"SMS",proPEVCBKMsg2:"WSJ ProWSJ.comWSJ.comWSJ Pro",proPEVCBKMsg1:"WSJ Pro2018712",notYetRegisteredThroughGoogleText:"WSJGoogle","social-login-already-have-post":"",oneIdAccountLocked:"","otl-able-connect-post":"",forgotPwdMsg:"",instructionsOTP:"1",resendVerificationEmailMsg:"",enterEmailForPassword:"",enterEmailForUsername:"","create-account-later":"","social-login-account-not-found":"","social-login-create-a-post":"","otl-sign-in-using-post":"",smsSent:"SMS",invalidAccessCode:"",loginSMSMsg:"SMS","social-login-create-limited-account":"",signInWithApple:"",thankYou:"",thankYouExcl:"",noRegisterAndSignMeIn:"",signinDisclaimer:"Dow Jones","checkEmailforMagicLink-2":"WSJ","enterCodeMsg-2":"1OTP)",customerService:"",oneIdTempPwCall:"","contact-customer-service":"",cookiePolicy:"",enterOTPCode:"",verifyCode:"",registerHere:"",hereLabel:"",unableToFindUser:"/","multiple-accounts":"","emailAddress-duplicate":"1","social-login-connect-using-account":"","try-again-later":"","service-unavailable":"",signOut:"",signIn:"",keepMeSignedIn:"",backToSignIn:"","unknown-error-refresh-pre":"",goToSignIn:"",anEmailWasSentToYou:"",weWillEmailYou:"","unknown-error-refresh-post":"",toYourExistingSubscription:"",securityLogInAgainAllDevices:"",socialSignHeader:"","additional-help":"",returnToSignInOptions:"",yesConnect:"",expiredOTP:"",password:"",passwordPre:"",iOSLoginNote:"",passwordChanged:"","wrong-password-general":"",continuewithpassword:"",requestPasswordReset:"",oneIdPwExpired:"",passwordMaxLength:"32","request-password":"",resetPassword:"",resetPasswordTokenIsValidating:"",enterEmailForResetPassword:"",plsEntPassword:"","reset-password-general":"",forgotPasswordQuestion:"",oneIdTempPwUpdate:"",oneIdPwAlreadyUpdatedMsg:"",confirmPassword:"",showPasswordLabel:"",hidePasswordLabel:"","radarShareEmail-1":"",regPolicyError:"Cookie",privacyNotice:"",continueToProduct:"",help:"",singInMagicLink:"",notYetRegisteredThroughGoogleTitle:"Google",orTkn:"",signInSocial:"",optionGoBack:"",enterEmail:"","no-email-match":"",anEmailWithYourUsernameAndPasswordEmailAddress1:"",oneIdEmailNotFound:"",forgotUserNameToolTip:"",oneIdInvalidEmailFormat:"",anEmailWithYourUsernameAndPassword1:"",usernameOrEmail:"","enterCodeMsg-1":"",pleaseEnterYourEmailAddressOrUsername:"",regEmailError:"","helpMsg-msg1":"",registrationConfirmationTitle:"","no-email-match-correct":"",resendEmail:"",registrationCompleteMsg2:"",pleaseCheckYourEmail:"","social-login-member-sign-in":"",emailOrUserName:"ID",usernamePre:"","no-username-match":"",requestUsernameReset:"","recover-username":"",forgotUserName:":",oneIdEmailNotAssociated:"",oneIdUserNotLocated:"",anEmailWithYourUsernameAndPassword:"",usernameOrPassword:"",welcomeWelcome:"","welcome-message":"",welcomeBack:"WSJ","unknown-error-refresh":"",sendL:"",loginLowerCase:"",oneIdLogIn:"",errorForUser210988:"5",forgotYourPost:"",oneIdTempPwWarnMsg2:"",registerNow:"",signInBelow:"",oneIdTempPwLbl:"",oneIdTempPwWarnMsg1:"",oneIdTempPwExpired:"",notAMember:"",success:"",privacyPolicy:"",enterCode:"","wrong-password-email":"","wrong-password-email-newline":"","wrong-password-username":"","wrong-password-username-newline":"","social-login-cannot-find-account":"",regConfirmPwdError:"",invalidPassword:"",forgotYour:"",forgotYourPre:"",oneIdNewTo:"",previousStep:"",backToStep:"",oneIdPrintSubscriber:"",bulkFirstName:"",regFirstNameError:"",FPFUI_CountryCode:"",bulkLastName:"",lastNameColumn:"",regLastNameError:"",submit:"",anEmailWithYourUsernameAndPassword2:"","otl-connect-continue":"",ifYouDontReceive:"",chooseNewCorrectLengthPassword:"532",enterNewPassword:"",confirmPasswordError:"",chooseNewPassword:"",proPEVCBKMsg:"WSJ.comWSJ.com",newPassword:"","social-login-already-have-pre":"","social-login-already-have-account":"",updatedPPText:"","helpMsg-msg3":" - : 9:00am to 5:30pm JPT",updatedTkn:"",signInWith:"",signInWithA:"",signInWithAn:"",forLoggingInWith:"",connectYour:"",IAgreeToThe:"",continue:"",nextTitle:"",oneIdContinueTo:"",regPasswordError:"",createFreeAccount:"",forLimitedAccessCreateFreeReg:"",invalidToken:"",passwordMinLength:"5",registrationCompleteMsg:"",emailVerificationSent:"",emailInUse:"",byRegistering:"Dow Jones",regVerifComplete:"",passwordCharacters:"",show:"",proPEVCBKMsg3:"wsjprocustomerservice@dowjones.com",clickHereToLearnMore:"",resendVerificationEmail:"",oneIdAuthorizationFailed:"",registrationConfirmationMsg:"",notASubscriber:"",subscribe:"",hide:"",oneIdActivateSubscription:"",phoneNumberLabel:"",invalidPhoneNumber:""},zhtw:{"helpMsg-msg2":"1-800-JOURNAL (1-800-568-7625)",cookiePolicy:"Cookie ",cookieNotice:"Cookie ",didNotReceiveAnEmail:"Didn't receive an email? Contact",copyRightPhraseDJ:"Dow Jones, Inc. ",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",forLimitedAccessCreateFreeReg:"For limited access, create a free registration account",hereLabel:"here",notASubscriber:"Not a subscriber?",signinDisclaimer:"Your sign in credentials (email address and password) are universal and will be used to provide you with access across Dow Jones branded products.",oneTimePassword:"OTP",oneTimePasscode:"OTP",nextTitle:"",noRegisterAndSignMeIn:"",signInWithApple:" Apple ","social-login-connect-using-account":"",signInWithFacebook:"",signInOTP:"",signInWithGoogle:"",keepMeSignedIn:"",previousStep:"",securityLogInAgainAllDevices:"",oneIdPrintSubscriber:"","unknown-error-refresh":"",oneIdNewTo:"","social-login-create-a-pre":"","social-login-create-limited-account":"",createFreeAccount:"",anEmailWithYourUsernameAndPassword:"",invalidAccessCode:"",passwordCharacters:"",bulkFirstName:"",submit:"",and:"","enable-cookies":"",oneIdActivateSubscription:"",clickHereToLearnMore:"",FPFUI_CountryCode:"",registerHere:"",iOSLoginNote:"",proPEVCBKMsg1:"2018712WSJ Pro ",ifYouDontReceive:"",forgotUserNameToolTip:"",proPEVCBKMsg2:"WSJ.comWSJ ProWSJ.com/WSJ Pro","enterCodeMsg-1":"",anEmailWithYourUsernameAndPassword1:"",anEmailWithYourUsernameAndPasswordEmailAddress1:"",proPEVCBKMsg3:" wsjprocustomerservice@dowjones.com",bulkLastName:"",lastNameColumn:"",customerService:"",password:"",passwordPre:"",oneIdPwExpired:"","wrong-password-general":"",passwordMaxLength:"32",passwordMinLength:"5",invalidToken:"",resetPasswordExpiredToken:"",notYetRegisteredThroughGoogleTitle:" Google ",success:"",updatedPPText:"","social-login-already-have-pre":"","social-login-already-have-account":"","cookie-message":"",forgotPasswordQuestion:"?",forgotYour:"",forgotYourPre:"","helpMsg-msg1":"",forgotUserName:"","recover-username":"",notYetRegisteredThroughGoogleText:" Google  WSJ  ","radarShareEmail-1":"",oneIdTempPwWarnMsg1:"",regConfirmPwdError:" ","wrong-password-username":"","wrong-password-username-newline":"","wrong-password-email-newline":"","wrong-password-email":"","multiple-accounts":"","otl-able-connect-pre":"",toYourExistingSubscription:"",emailInUse:"",passwordChanged:"",expiredOTP:"",oneIdAccountLocked:"","no-username-match":"",registrationCompleteMsg:"",regVerifComplete:"",oneIdTempPwExpired:"","no-digital-subscription":"","no-email-match":"","no-email-match-correct":"",loginSMSMsg:"",weWillEmailYou:"",oneIdUserNotLocated:"",oneIdEmailNotFound:"","social-login-cannot-find-account":"",proPEVCBKMsg:"WSJ.com WSJ.com ",unableToFindUser:"/",oneIdAuthorizationFailed:"",IAgreeToThe:"",orLabel:"",orTkn:"",signInSocial:"",optionGoBack:"","otl-able-connect-post":"","social-login-already-have-post":"","social-login-create-a-post":"","otl-sign-in-using-post":"","social-login-account-not-found":"",help:"","helpMsg-msg3":": 1-609-627-1351",newPassword:"",oneIdPwAlreadyUpdatedMsg:"",yesConnect:"",oneIdTempPwUpdate:"","social-login-member-sign-in":"","view-cookie-policy":"",welcomeWelcome:"","welcome-message":"",welcomeBack:" WSJ",resetPasswordTokenIsValidating:"",oneIdEmailNotAssociated:"",oneIdInvalidEmailFormat:"",registerNow:"",updatedTkn:"",usernamePre:"",usernameOrPassword:"",emailOrUserName:"",errorForUser210988:"5",signOut:"",signIn:"",loginLowerCase:"",oneIdLogIn:"",signInWith:"",signInWithA:"",signInWithAn:"",forLoggingInWith:"","unknown-error-refresh-pre":"",sendOTP:"",signInMagicLink:"",sendSmsCode:"",singInMagicLink:"",sendL:"",resendVerificationEmail:"","try-again-later":"","service-unavailable":"",sms:"",smsCode:"",ok:"",registrationConfirmationTitle:"",confirmPassword:"",socialSignHeader:"","create-account-later":"",continue:"",continuewithpassword:"","contact-customer-service":"",oneIdTempPwLbl:"","enterCodeMsg-2":"OTP","request-password":"",subscribe:"",errorOTP:"",invalidPassword:"",regPolicyError:"",signInBelow:"",enterEmailForResetPassword:"",pleaseCheckYourEmail:"",registrationConfirmationMsg:"",registrationCompleteMsg2:"",requestPasswordReset:"",requestUsernameReset:"",loginSMSRequest:"",requestEmailLink:"","otl-sign-in-using-pre":"",confirmPasswordError:"",oneIdTempPwCall:"",anEmailWithYourUsernameAndPassword2:"",enterOTPCode:"",regFirstNameError:"",regLastNameError:"",plsEntPassword:"",enterNewPassword:"",regEmailError:"",pleaseEnterYourEmailAddressOrUsername:"",regPasswordError:"",forgotPwdMsg:"",chooseNewPassword:"",resendVerificationEmailMsg:"",oneIdTempPwWarnMsg2:"",thankYou:"",thankYouExcl:"",enterCode:"",enterSms:"",enterEmailForPassword:"",instructionsOTP:"",enterEmailForUsername:"",goToSignIn:"",oneIdContinueTo:"",continueToProduct:"",backToStep:"",returnToSignInOptions:"",backToSignIn:"","emailAddress-duplicate":"",byRegistering:"","otl-connect-continue":"",connectYour:"","helpMsg-msg4":"710","helpMsg-msg5":"75",chooseNewCorrectLengthPassword:"532 ","checkEmailforMagicLink-2":" WSJ ",resendEmail:"",resetPassword:"","reset-password-general":"",passwordLength:"532",smsSent:"",anEmailWasSentToYou:"",emailVerificationSent:"",priePasswordLabel:"",phoneNumberLabel:"",invalidPhoneNumber:"",enterEmail:"",userEmail:"",usernameOrEmail:"",emailLink:"","additional-help":"",notAMember:"","unknown-error-refresh-post":"",show:"",showPasswordLabel:"",verifyCode:""},zhcn:{"helpMsg-msg2":"1-800-JOURNAL (1-800-568-7625)",cookiePolicy:"Cookie ",cookieNotice:"Cookie ",didNotReceiveAnEmail:"Didn't receive an email? Contact",copyRightPhraseDJ:"Dow Jones, Inc. ",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",oneTimePassword:"OTP",oneTimePasscode:"OTP",nextTitle:"",noRegisterAndSignMeIn:"",notASubscriber:"","enterCodeMsg-2":"OTP",oneIdTempPwLbl:"","social-login-member-sign-in":"",signInWithApple:" Apple ",signInOTP:"","social-login-connect-using-account":"",signInWithFacebook:"",signInWithGoogle:"",keepMeSignedIn:"",previousStep:"",securityLogInAgainAllDevices:"",oneIdNewTo:"","social-login-create-a-pre":"","social-login-create-limited-account":"",createFreeAccount:"","unknown-error-refresh":"",anEmailWithYourUsernameAndPassword:"",clickHereToLearnMore:"",sendOTP:"",signInMagicLink:"",sendSmsCode:"",singInMagicLink:"",sendL:"",resendVerificationEmail:"",invalidAccessCode:"",passwordCharacters:"",bulkFirstName:"","enable-cookies":"",oneIdActivateSubscription:"",submit:"","helpMsg-msg4":"710","helpMsg-msg5":"75",registerHere:"",iOSLoginNote:"",proPEVCBKMsg1:"2018712WSJ Pro ",ifYouDontReceive:"",forgotUserNameToolTip:"",proPEVCBKMsg2:"WSJ.comWSJ Pro/WSJ Pro",anEmailWithYourUsernameAndPasswordEmailAddress1:"","enterCodeMsg-1":"",anEmailWithYourUsernameAndPassword1:"",proPEVCBKMsg3:" wsjprocustomerservice@dowjones.com",bulkLastName:"",lastNameColumn:"",customerService:"",password:"",passwordPre:"",oneIdPwExpired:"","wrong-password-general":" ",passwordMaxLength:"32",passwordMinLength:"5",invalidToken:" ",resetPasswordExpiredToken:"",notYetRegisteredThroughGoogleTitle:" Google ",success:"",updatedPPText:"","social-login-already-have-pre":"","social-login-already-have-account":"","cookie-message":"",forgotPasswordQuestion:":"","helpMsg-msg1":" ",forgotUserName:"","recover-username":"",notYetRegisteredThroughGoogleText:" Google  WSJ  ","radarShareEmail-1":"",oneIdTempPwWarnMsg1:"",regConfirmPwdError:" ","wrong-password-username":"word-username-newline":"","wrong-password-email":"","wrong-password-email-newline":"","multiple-accounts":"","otl-able-connect-pre":"",toYourExistingSubscription:"",emailInUse:"",oneIdTempPwExpired:"",oneIdAccountLocked:"","no-username-match":":" ",signinDisclaimer:" Dow Jones ",registrationCompleteMsg:"",regVerifComplete:"","no-digital-subscription":" ",loginSMSMsg:"",weWillEmailYou:"","social-login-cannot-find-account":"",oneIdUserNotLocated:"",oneIdEmailNotFound:"",oneIdAuthorizationFailed:"",unableToFindUser:"/",proPEVCBKMsg:"WSJ.com WSJ.com ",IAgreeToThe:"",orLabel:"",orTkn:"",signInSocial:"",optionGoBack:"","social-login-already-have-post":"","social-login-create-a-post":"","otl-sign-in-using-post":"","otl-able-connect-post":"",oneIdPrintSubscriber:"","social-login-account-not-found":"",help:"","helpMsg-msg3":": 1-609-627-1351",newPassword:"",oneIdPwAlreadyUpdatedMsg:"",yesConnect:"",show:"",showPasswordLabel:"",oneIdTempPwUpdate:"","view-cookie-policy":"",welcomeWelcome:"","welcome-message":"",welcomeBack:"  WSJ",resetPasswordTokenIsValidating:"",oneIdEmailNotAssociated:"",oneIdInvalidEmailFormat:"",registerNow:"",updatedTkn:"",usernamePre:"",usernameOrPassword:"",emailOrUserName:"",errorForUser210988:"5",phoneNumberLabel:"",invalidPhoneNumber:"",enterEmail:"",userEmail:"",usernameOrEmail:"",emailLink:"",signOut:"",signIn:"",loginLowerCase:"",oneIdLogIn:"",signInWith:"",signInWithA:"",signInWithAn:"",forLoggingInWith:"","unknown-error-refresh-pre":" ","try-again-later":" ","service-unavailable":"",sms:"",smsCode:"",ok:"",registrationConfirmationTitle:"",confirmPassword:"",socialSignHeader:"","create-account-later":"",continue:"",continuewithpassword:"","contact-customer-service":"","request-password":"",subscribe:"",forLimitedAccessCreateFreeReg:"",errorOTP:"",invalidPassword:" ",regPolicyError:"",signInBelow:"",enterEmailForResetPassword:"",pleaseCheckYourEmail:"",registrationCompleteMsg2:"",registrationConfirmationMsg:"",requestPasswordReset:"",requestUsernameReset:"",requestEmailLink:"",loginSMSRequest:"",oneIdTempPwWarnMsg2:"","otl-sign-in-using-pre":"",confirmPasswordError:"",oneIdTempPwCall:"",anEmailWithYourUsernameAndPassword2:"",forgotPwdMsg:"",enterOTPCode:"",regFirstNameError:"",regLastNameError:"",plsEntPassword:"",enterNewPassword:"",regEmailError:"",pleaseEnterYourEmailAddressOrUsername:"",regPasswordError:"",chooseNewPassword:"",resendVerificationEmailMsg:"",thankYou:"",thankYouExcl:"",goToSignIn:"",oneIdContinueTo:"",continueToProduct:"",enterCode:"",enterEmailForUsername:" ",instructionsOTP:"",enterEmailForPassword:" ",enterSms:"",backToStep:"",returnToSignInOptions:"",backToSignIn:"","emailAddress-duplicate":"",hereLabel:"","otl-connect-continue":"",connectYour:"",chooseNewCorrectLengthPassword:"532",byRegistering:"","checkEmailforMagicLink-2":" WSJ .",resendEmail:"",resetPassword:"","reset-password-general":"",passwordLength:"532",smsSent:"",anEmailWasSentToYou:"",emailVerificationSent:"",privacyPolicy:"",privacyNotice:"",hide:"",hidePasswordLabel:"","additional-help":"",notAMember:"","unknown-error-refresh-post":"",verifyCode:""}},window.DowJones=window.DowJones||{},DowJones.LoginForm=function(e){this.conf={registrationPath:"/consumeraccess/svc/registration/user.json?mode=create",updateUserPath:"/consumeraccess/svc/registration/user.json?mode=update",oneIdentityPath:"/oauth/ro",checkProUserPath:"/consumeraccess/svc/verifyPeVcProUser.json",checkAccess:"/check-access",checkUserPath:"/getuser"},this.socialComponent=new DowJones.SocialLogins,this.oneIdentityClient=DowJones.OneIdentity.initializeOneIdentity();var o,t,i,n=DowJones.OneIdentity.getLoginOptions(window),s=n.google||n.facebook||n.apple,r=n.subscribe,a=n.activatePrintSubscription,n=n.oneTimeLink;this.context={},this.brand=DowJones.OneIdentity.getBrand(),this.passwordAttempts=0,this.$container=$("#basic-login"),this.$title=this.$container.find(".sign-in-title"),this.$email=this.$container.find("#username"),this.$emailLabel=this.$container.find('label[data-token="usernameOrEmail"]'),this.$emailError=this.$container.find(".username-error"),this.$emailErrorIcon=this.$email.next("#username-input-error-icon"),this.$password=this.$container.find("#password"),this.$passwordLabel=this.$container.find('label[data-token="password"]'),this.$passwordContainer=this.$container.find("#password-card-container"),this.$passwordError=this.$container.find(".password-error"),this.$brandLabels=this.$container.find(".brand-label"),this.$tooltip=this.$container.find(".tooltip-trigger"),this.$errorContainer=this.$container.find(".error-container"),this.$errors=this.$container.find("#login-errors"),this.$usernameErrorContainer=this.$container.find(".username-error-container"),this.$usernameErrors=this.$container.find("#username-login-errors"),this.$recaptchaError=this.$container.find("#recaptcha-error"),this.$loginForm=this.$container.find("form"),this.$connectButton=this.$container.find(".one-time-linking-connect .solid-button"),this.$loginForm.on("submit",this.submitForm.bind(this)),this.$connectButton.on("click",this.connectAccounts.bind(this)),iner.find(".forgot-username-link"),this.$forgotUserNameLink.on("click",this.jumpToForgetUsername.bind(this,"forgot_username_footer")),this.$forgotPasswordLink=this.$container.find(".forgot-password-link"),thPassword.bind(this,"forgot_password_footer")),s?this.socialComponent.toggleSocialLogins():this.socialComponent.removeSocialCard(),this.$loginOptionsContainer=this.$container.find("#login-options-container"),this.$newMemberContainer=this.$container.find("#not-a-member"),this.$newMemberLink=this.$container.find(".not-a-member-link"),this.$newMemberLink.on("cthis.$registrationPopupEnabled=!1,this.$passwordEyeToggle=this.$container.find(".eye-show"),this.$passwordEyeToggle.on("click",(t=(o=this).setClosedEyeIcon,i=this.setOpenedEye,function(e){o.onTogglePasswordShow.call(o,e,t.bind(o),i.bind(o))})),this.$activatePrintSubscription=this.$container.find("#activate-print-subscription"),this.$activatePrintSubscription.toggle(a),this.$subscribeCard=this.$container.find("#subscribe-card"),this.$subscribeCard.toggle(r),this.$subscribeButton=this.$container.find("#go-to-subscribe"),this.$subscribeButton.on("click",this.goToSubscribe.bind(this)),this.showIfOneTimeLinkingElements=this.$container.find(".show-if-one-time-linking"),this.hideIfOneTimeLinkingElements=this.$container.find(".hide-if-one-time-linking"),this.showIfOneTimeLinkingElements.toggle(n),this.hideIfOneTimeLinkingElements.toggle(!n),this.$cookieOverlay=this.$container.find(".cookie-overlay"),this.$activateSubscriptionLink=this.$container.find("#activate-subscription"),this.$activateSubscriptionLink.on("click",this.goToActivateSubscription.bind(this)),this.$subscriberBrandLabel=this.$container.find("#subscribe-brand"),this.$subscriberBraiberBrandAlertLabel2=this.$container.find("#subscribe-brand-alert2"),this.$subscriberBrandAlertLabel3=this.$container.find("#subscribe-brand-alert3"),this.$executiveHeader1=this.$container.find("#executive-header1"),this.$executiveHeader2=this.$container.find("#executive-header2"),tive-header"),this.$recaptchaContainer=this.$container.find("#recaptcha-container"),this.$submitButton=this.$container.find(".solid-button.basic-login-submit"),this.$nextButton=this.$container.fid(".solid-button.continue.bind(this)),this.$sendOTP=this.$container.find(".solid-button.sendOTP"),this.$sendOTP.on("click",this.onOTPRequest.bind(this)),this.$freeAccountButton=this.$container.find("#free-account-button"),this.$freeAccountButton.on("click",this.goToCreateFreeAccount.bind(this)),this.oneIdentityConfig=e,this.lang=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en",DowJones.OneIdentity.subscribeInputForErrorClearing(this.$email,this.clearErrors.bind(this))},DowJones.LoginForm.prototype={run:function(e){this.context=e||{},this.$errors.detach(),this.applyBrandLabels(),this.applyBrandToSubscribeCard(),this.applyExecutiveHeaders(),this.autoPopulateUsername(),this.context.state&&this.context.state.clearEmail&&this.clearUsername(),/Mobi/.test(navigator.userAgent)||setTimeout(function(){this.$email.trigger("focus")}.bind(this),500);var o=this;window.onloadCallback=function(){grecaptcha.render("recaptcha-container",{sitekey:DowJones.Config.grecaptchaSitekey,hl:o.getLanguageForRecaptcha(),callback:function(){o.enableSubmitButton()}})},this.detectCookies()},detectCookies:function(){this.areCookiesEnabled()?!0===DowJones.OneIdentity.showCookieOverlay&&(this.sendCookiesReenabledtoLogs(),setTimeout(this.refreshBrowser.bind(this),300)):(!1===DowJones.OneIdentity.showCookieOverlay&&(this.sendCookiesDisabledtoLogs(),this.$cookieOverlay.removeClass("hidden"),this.$cookieOverlay.addClass("flex"),DowJones.OneIdentity.showCookieOverlay=!0),this.disableInputs(),DowJones.OneIdentity.cookieTimer=setTimeout(this.detectCookies.bind(this),500))},hideOverlay:function(){this.$cookieOverlay.css("display","none"),clearTimeout(DowJones.OneIdentity.cookieTimer)},refreshBrowser:function(){window.location.reload()},disableInputs:function(){$("input").prop("disabled",!0)},jumpToForgetUsername:function(e,o){o.preventDEvent(e),page.show("d:function(e,o){o.preventDefault(),this.trackHelpLinkClickedEvent(e),page.show("/forgot-password"),this.clearErrors()},bindForgetUsernameTooltipListener:function(e){this.$forgotUserNameTooltipLink=$("#basic-login, #password-login").find(".forgot-username-link-tooltip"),this.$forgotUserNameTooltipLink.on("click",this.jumpToForgetUsUsernameInputTipLink=$("#basic-login, #password-login").find("#forgot-username-link-input-tip"),this.$forgotUsernameInputTipLink.on("click",this.jumpToForgetUsername.bind(this,"forgot_username_input_tip"))},bindForgetPasswordInputTipListener:function(e){this.$forgotPasswordInputTipLink=$("#basic-login, #password-login").find("#forgot-password-link-input-tip"),this.$forgotPasswordInputTipLink.on("click",this.jumpToForgetPassword.bind(this,"forgot_password_input_tip"))},bindRefreshPageInputTipListener:function(e){this.$refreshPageInputTipLink=$("#basic-login, #password-login").find("#refresh-page-link-input-tip"),this.$refreshPageInputTipLink.on("click",function(){this.sendCookiesCatchAllWindowRefreshedToLogs(),this.refreshBrowser()}.bind(this))},getDecodedState:function(){var e=DowJones.OneIdentity.getQueryVariable("state"),e=JSON.stringify(e);return JSON.parse(e)},autoPopulateUsername:function(){var o=DowJones.OneIdentity.getQueryVariable("login_hint"),t=DowJones.OneIdentity.getQueryVariable("id_token_hint");if(o)try{var e=DowJones.OneIdentity.decodeJwt(o).value.email;this.$email.val(e)}catch(e){this.$email.val(o);o="true"===DowJones.OneIdentity.getQueryVariable("otponly");this.brand&&"wsj"===this.brand.name&&!o&&this.showWelcomeBackHeader()}else if(t)try{e=DowJones.OneIdentity.decodeJwt(t).email;this.$email.val(e)}catch(e){this.$email.val(t)}},showWelcomeBackHeader:function(){var e=DowJones.OneIdentity.getTranslationFromToken("welcomeBack");this.$title.text(e)},clearUsername:function(){this.$email.val("")},createOneIdentity:function(e){e={client_id:DowJones.Config&&DowJones.Config.resource_owner_client_id?DowJones.Config.resource_owner_client_id:DowJones.OneIdentity.getQueryVariable("client"),username:e.username,password:e.password,connection:"DJldap",grant_type:"password",scopCaps(e,this.conf.oneIdentityPath)},login:function(e){var o;return e.preventDefault(),this.disaorm()?(e=this.$email.val(),o=this.$password.val(),this.toggleLoadingSl(function(){this.enableSubmitButton()}.bind(this))):(this.enableSubmitButton(),null)},enableFormEnterButton:function(){this.$loginForm.off("keypress")},configureLoginLayout:function(e){this.applyPasswordlessDesign(),this.showOTP(),"true"===DowJones.OneIdentity.getQueryVariable("otponly")?this.setOnlyOTPDesign():this.showContinueButton()},setOnlyOTPDesign:function(){var e=$("#basic-login");e.find(".instructions-otp").show(),e.find(".sign-in.hide-if-one-time-linking").css("margin-top","0px"),e.find(".sendOTP.new-design").removeClass("secondary-button margin-top-20")},showOTP:function(){$([".sendOTP"].join(",")).show()},showContinueButton:function(){$(".continue-submit").show()},applyPasswordlessDesign:function(){$(["#social-separator",".eye-show"].join(",")).show(),$([".eye-show"].join(",")).attr("tabindex","0"),$(["#basic-login .basic-login-submit"].join(",")).hide(),$(["#basic-login .socialbtn.socialbtn-apple","#basic-login .socialbtn.socialbtn-facebook","#basic-login .socialbtn.socialbtn-google"].join(",")).parent().removeClass("form__half").addClass("form__full"),$("#social-card").insertAfter($("#login-options-container"))},onOTPRequest:function(){this.disableForm(),this.clearErrors();var r=this.$email.val(),a=this;this.setLoadingStatus(this.$sendOTP),this.validateUser(r)?this.checkUser(r,this.conf.checkUserPath).done(function(e,o,t){var i,n,s;void 0===e.email?(page.show("/email-code-confirmation"),a.unsetLoadingStatus()):(s="&methodName=OTP&cookieEnabled="+DowJones.LoginForm.prototype.areCookiesEnabled(),a.sendDataToLog("/error/login-html-onload?",s),i=e.email,n=e.id,s=DowJones.OneIdentity.getQueryVariable("ui_locales").split("-")[3],a.oneIdentityClient.passwordlessStart({send:"code",connection:"email",email:i,authParams:{nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",username:r,state:DowJones.OneIdentity.getQueryVariable("state")||"",current_brand:s,code_challenge:DowJones.OneIdentity.getQueryVariable("code_challenge")||"",code_challenge_method:DowJones.OneIdentity.getQueryVariable("code_challenge_method")||"",id:n,ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",response_mode:DowJones.OneIdentity.getQueryVariable("response_mode")||""}},function(){page.show("/email-code-confirmation",{id:n,email:i,user:r,from:"signin"})}))}).fail(function(e,o,t){a.handleNotFoundUser(r,e.status)}).always(function(){a.resetFormStatus(),a.enableForm()}):this.unsetLoadingStatus(this.$sendOTP)},checkUser:function(e,o){var t={username:e,csrf:null==(t=this.oneIdentityConfig)||null==(t=t.extraParams)?void 0:t._csrf},o={method:"POST",url:o,contentType:"application/json",data:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json","X-REQUEST-SCHEME":"https","X-REQUEST-EDITIONID":DowJones.OneIdentity.getEdition(),"X-REMOTE-USER":e}};return $.ajax(o)},submitForm:function(e){e.preventDefault(),this.$isableForm(),this.cl.val();this.setLoadingStatus(this.$continueButton),this.validateUser(s)?(t={username:s},(n=this).checkUser(s,this.conf.checkUserPath).then(function(e){var o="&methodName=ContinueWithEmail&cookieEnabled="+DowJones.LoginForm.prototype.areCookiesEnabled();n.sendDataToLog("/error/login-html-onload?",o),e&&e.sso_url&&(window.location.href=e.sso_url),page.show("/signin-password",t),DowJones.OneIdentity.modifyLayout()}).fail(function(e,o,t){var i=e.responseJSON,i=i&&"ERR007"===i.code?400:e.status;n.handleNotFoundUser(s,i)}).always(function(){n.resetFormStatus(),n.enableForm()})):this.unsetLoadingStatus(this.$continueButton)},resetFormStatus:function(){this.$continueButton.removeClass("loading"),this.$sendOTP.removeClass("loading")},enableForm:function(){this.$email.prop("disabled",!1),this.$password.prop("disabled",!1),this.$continueButton.prop("disabled",!1),this.$sendOTP.prop("disabled",!1)},disableForm:function(){this.$email.prop("disabled",!0),this.$password.prop("disabled",!0),this.$continueButton.prop("disabled",!0),this.$sendOTP.prop("disabled",!0)},setLoadingStatus:function(e){this.resetFormStatus(),this.disableForm(),e.addClass("loading")},unsetLoadingStatus:function(){this.resetFormStatus(),this.enableForm()},connectAccounts:function(e){if(e.preventDefault(),this.clearErrors(),this.disableButton(this.$connectButton),!this.validateForm())return this.enableButton(this.$connectButton),null;var e=DowJones.OneIdentity.getQueryVariable("id_token_hint"),o=DowJones.OneIdentity.getQueryVariable("login_hint");e?this.connectToExistingAccount(e):o&&this.runOldConnectToExistingAccount(o)},connectToExistingAccount:function(e){try{var o,t,i=DowJones.OneIdentity.decodeJwt(e),n=i.idp_id,s="",r="",a=this,l=this.$email.val(),c=this.$password.val(),d=new RegExp(n+"\\|","gi"),u=i.sub.replace(d,"");switch(n){case"facebook":s="http://www.facebook.com/profile.php?id=",r="FACEBOOK";break;case"google-oauth2":s="https://www.google.com/profiles/",r="GOOGLE"}if(o=s+u)return this.toggleLoadingStatus(!0),t={idTokenHint:e},this.createOneIdentity({username:l,password:c}).always(function(e){return e&&e.id_token&&(e=DowJones.OneIdentity.decodeJwt(e.id_token)).djid&&a.linkIdentityInLdap(e.djid,o,r),a.postToAuthEndpoint(l,c,"socialLogin",t)})}catch(e){i=$.Deferred();return i.reject(e),i.promise()}},linkIdentityInLdap:function(e,o,t){o={method:"POST",url:this.conf.updateUserPath,contentType:"application/json",data:JSON.stringify({externalIdentityKey:o,externalSystemId:t,displayContextId:"SOCIAL_CONNECT",editionId:"WSJ-EN_US"}),headers:{"Content-Type":"application/json",Accept:"application/json","X-REQUEST-SCHEME":"https","X-REMOTE-UUID":e}};return $.ajax(o)},validateForm:function(){var e=this.$email.val(),o=this.$password.val(),e=this.validateUser(e),o=this.validatePassword(o);return e&&o},validateUser:function(e){return 0!==e.length||(this.$tooltip.addClass("error"),this.$email.addClass("error"),this.$emailLabel.addClass("error"),this.$emailError.show(),this.$email.attr("aria-describedby",this.$emailError.attr("id")),setTimeout(function(){this.$email.trigger("focus")}.bind(this),0),!1)},validatePassword:function(e){return 0!==e.length||(this.$passwordError.show(),this.$password.attr("aria-describedby",this.$passwordError.attr("id")),this.$password.addClass("error"),this.$passwordLabel.addClass("error"),this.$passwordEyeToggle.addClass("error"),this.$email.hasClass("error")||this.$password.trigger("focus"),!1)},clearErrors:function(){this.$errors.hide(),this.$container.find(".error").removeClass("error"),this.clearEmailUsernameErrors(),this.clearPasswordErrors()},clearEmailUsernameErrors:function(){this.$emailLabel.removeClass("error"),this.$tooltip.removeClass("error"),this.$email.removeClass("error"),this.$usernameErrors.hide(),this.$usernameErrorContainer.hide(),this.$emailError.hide(),this.$emailErrorIcon.hide(),this.$email.removeAttr("aria-describedby")},clearPasswordErrors:function(){this.$passwordLabel.removeClass("error"),this.$passwordEyeToggle.removeClass("error"),this.$password.removeClass("error"),this.$passwordError.hide(),this.$errorContainer.hide(),this.$password.removeAttr("aria-describedby")},toggleLoadingStatus:function(e){this.clearErrors(),e?(this.$email.prop("disabled",!0),this.$password.prop("disabled",!0),this.$connectButton.prop("disabled",!0),this.$nextButton.prop("disabled",!0),this.$submitButton.prop("disabled",!0),this.$connectButton.addClass("loading"),this.$submitButton.addClass("loading")):(this.$submitButton.prop("disabled",!1),this.$email.prop("disabled",!1),this.$password.prop("disabled",!1),this.$connectButton.prop("disabled",!1),this.$nextButton.prop("disabled",!1),this.$connectButton.removeClass("loading"),this.$submitButton.removeClass("loading"))},setCookies:function(){var e="",e="djcs_kli=1;path=/;domain=.dowjones.com";return this.oneIdentityConfig&&this.oneIdentityConfig.maxKli&&(e+=";expires="+this.getMaxKliExpirationDateString()+";max-age="+this.oneIdentityConfig.maxKli),document.cookie=e},getMaxKliExpirationDateString:function(){var e=new Date;return e.setTime(e.getTime()+1e3*this.oneIdentityConfig.maxKli),e.toUTCString()},isEmailAlreadyUsed:function(e){return 0<=e.indexOf("emailAddress-notAvailable")||0<=e.indexOf("emailAddress-duplicate")},obtainErrorElement:function(e,o){var t=DowJones.OneIdentity.getBrand().customerCenter,t={CATCHALL:["unknown-error-refresh-pre","unknown-error-refresh","id","refresh-page-link-input-tip"],ERR005:["no-username-match","recover-username","id","forgot-username-link-input-tip"],ERR006:["no-email-match-correct","",null,null],ERR007:["multiple-accounts","contact-customer-service","href",t],ERR008:["wrong-password-general","reset-password-general","id","forgot-password-link-input-tip"],ERR009:["wrong-password-general","reset-password-general","id","forgot-password-link-input-tip"],ERR015:["no-digital-subscription","contact-customer-service","href",t],ERR016:["wrong-password-general","reseERR099:["unknown-error-refresh-pre","unknown-error-refresh","id","refresh-page-link-input-tip"]},i=t[e=t[e]?e:"CATCHALL"][0],n=t[e][1],i=DowJones.languages[this.lang][i]+" ",n=n?DowJones.languages[this.lang][n]+" ":"",s=document.createElement("div"),i=(s.appendChild(document.createTextNode(i)),document.createElement("button")),n=(i.setAttribute("type","button"),document.createTextNode(n));return i.appendChild(n),t[e]&&i.setAttribute(t[e][2],t[e][3]),i.classList.add("error-link","dj-link"),s.appendChild(i),"CATCHALL"===e&&(n=DowJones.OneIdentity.getTranslationFromToken("unknown-error-refresh-post"),s.appendChild(documenvar o={};rle to find this email/username and password combination."},trackHelpLinkClickedEvent:function(e){window.DowJones.OneIdentity.trackEvent("signin",{event_name:e},"link")},trackErrorEvent:function(e){var o={nd",ERR007:"Duplicate email found",ERR008:"Username found but password incorrect",ERR009:"Email found in mail field but password incorrect",ERR015:"Missing entitlements",ERR016:"Email found in djUsername or djLegacyUuid field but password incorrect",ERR021:"We were unable to find this email/username and password combination."}[e];o||(e="CATCHALL",o="Other error"),window.DowJones.OneIdentity.trackEvent("error",{page_error_id:e,page_error_description:o},"view")},onLoginError:function(e){this.$errorContainer.hide(),this.$usernameErrorContainer.hide(),this.$recaptchaError.detach(),this.$errorContainer.append(this.$errors),this.$errorContainer.append(this.$recaptchaError),this.trackErrorEvent(e.code);var o=0,t=parseInt(this.getCookieByName("LF")),i=this.$email.val();t&&(o=t),o+=1,document.cookie="LF="+o,this.toggleLoadingStatus(!1),DowJones.Config&&DowJones.Config.enableErrorDetails&&e&&0<i.length&&this.sendErrorDetails(e),DowJones.Config&&DowJones.Config.alertUrl&&e&&403===e.statusCode&&i.match(/(dowjones|wsj|newscorp).com$/)&&this.sendErrorAlert(e,i),this.handleNonEnvError(e.code,e.statusCode),this.deleteCookie("djcs_kli")},handleNonEnvError:function(e,o){var t=this.$email.val(),o=this.obtainErrorElement(e,o),i=DowJones.Config.wrongPasswordAttemtps;"ERR005"==e||"ERR006"==e||"ERR007"==e?(this.$usernameErrors.html(o),this.$usernameErrors.show(),this.$email.attr("aria-describedby",this.$usernameErrors.attr("id")),this.$usernameErrorContainer.show(),this.$tooltip.addClass("error"),this.$email.addClass("error"),this.$emailLabel.addClass("error"),this.$email.trigger("focus")):(this.$errors.html(o),this.$errors.show(),this.$password.addClass("error"),this.$passwordLabel.addClass("error"),this.$passwordEyeToggle.addClass("error"),this.$password.trigger("focus"),this.$errorContainer.show(),this.$password.attr("aria-describedby",this.$errors.attr("id"))),this.bindForgetUsernameInputTipListener(),this.bindForgetPasswordInputTipListener(),this.bindRefreshPageInputTipListener(),DowJones.OneIdentity.isAppleNewsDevice()||-1!==["ERR008","ERR009","ERR016"].indexOf(e)&&(this.passwordAttempts+=1,this.passwordAttempts>i)&&(o="&userRedirectedToForgotPassword=true&cookieEnabled="+this.areCookiesEnabled(),this.clearErrors(),page.show("/forgot-password",{username:t}),this.sendDataToLog("/error/wrong-password-threshold-exceeded?attempts="+this.passwordAttempts,o,t),this.resetPasswordAttemptsAfter())},handleNotFoundUser:function(e,o){DowJones.OneIdentity.isValidEmail(e)?!o||403!==o&&429!==o?o&&400===o?this.onLoginError({code:"ERR007"}):this.onLoginError({code:"ERR006"}):this.gStatus()},sendErrorDetails:function(e){var o,t;e&&(e.original&&e.original.response&&e.original.response.req&&e.original.response.req._data&&(e.original.response.req._data.password=null),403!==e.statusCode&&(e.original=null),e=JSON.stringify(e),e=window.location.origin+"/error/usernamepassword-login?error="+encodeURIComponent(e),t=DowJones.OneIdentity.getQueryVariable("nonce"),o=DowJones.OneIdentity.getQueryVariable("state"),e+="&onError=true&regularLogin=true&cookieEnabled="+this.areCookiesEnabled()+(t&&0<t.length?"&nonce="+t:"")+(o&&0<o.length?"&state="+o:""),(t=new XMLHttpRequest).open("get",e,!0),t.setRequestHeader("X-REMOTE-USER",this.$email.val()),t.send())},sendErrorAlert:function(e,o){o={text:":looking: "+o+" received a "+e.statusCode+" error :looking:"},e=new XMLHttpRequesto))},resetPasswordAttemptsAfter:function(){var e=DowJones.Config.resetAttemptsTime;window.setTimeout(function(){this.passwordAttempts=0}.bind(this),e)},generateParamForQueryVariable:function(e){var o=DowJones.OneIdentity.getQueryVariable(e);return o?"&"+e+"="+o:""},generateParamsFromQueryVariables:function(e){var o="",t=this;return e.forEach(function(e){o+=t.generateParamForQueryVariable(e)}),o},sendDataToLog:function(e,o,t){var i;DowJones.Config&&DowJones.Config.enableErrorDetails&&(i=this.generateParamsFromQueryVariables(["nonce","state","client","protocol","response_type","redirect_uri","ui_locales"]),e=window.location.origin+e+o+i,(o=new XMLHttpRequest).open("get",e,!0),t&&o.setRequestHeader("X-REMOTE-USER",t),o.send())},areCookiesEnabled:function(){return!!navigator.cookieEnabled},sendDataBeforeAuthToLog:function(e,o,t,i){var n="&cookieEnabled="+this.areCookiesEnabled(),s="",s="&internalState="+(s=this.oneIdentityConfig&&this.oneIdentityConfig.internalOptions&&this.oneIdentityConfig.internalOptions.state?this.oneIdentityConfig.internalOptions.state:s);this.sendDataToLog("/error/login-html-onload?","&onSubmission=true"+("&"+o+"=true")+n+("&methodName="+e)+("&savedState="+(i||""))+s,t)},sendCookiesDisabledtoLogs:function(){var e="&onRender=true&regularLogin=true&cookieEnabled="+this.areCookiesEnabled();this.sendDataToLog("/error/login-html-onload?",e)},sendCookiesReenabledtoLogs:function(){var e="&cookiesReenabled=true&cookieEnabled="+this.areCookiesEnabled();this.sendDataToLog("/error/cookies-reenabled?",e)},sendCookiesCatchAllWindowRefreshedToLogs:function(){var e="&catchAllWindowRefreshed=true&cookieEnabled="+this.areCookiesEnabled();this.sendDataToLog("/error/catch-all-window-refreshed?",e)},onNewMemberLinkClick:function(e){e.preventDefault(),this.$newMemberLink.attr("href")&&""!==this.$newMemberLink.attr("href")?self.location.href=this.$newMemberLink.attr("href"):page.show("/user-registration")},onSocialLogin:function(e){e.prevenshowLoginOpt("-"));0<o.length&&this.$container.find(e).show()},setOpenedEye:function(){this.$passwordEyeToggle.removeClass("input-password-icon-closed").addClass("input-password-icon-opened")},setClosedEyeIcon:function(){this.$passwordEyeToggle.removeClass("input-password-icon-opened").addClass("input-password-icon-closed")},onTogglePasswordShow:function(e,o,t){e.preventDefault(),"password"==this.$password.attr("type")?(t(),this.$password.attr("type","text")):(o(),this.$password.attr("type","password"))},isFNTenant:function(){return window.location.hostname.match(/fnauth(.dev|.int|.stg)?.accounts.dowjones.com/)},getDefaultConnection:function(){return this.isFNTenant()?"FNAuth":"DJldap"},postToAuthEndpoi:e,password:o,realm:DowJones.OneIdentity.getQueryVariable("connection")||this.getDefaultConnection(),scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",state:DowJones.OneIdentity.oneIdentityState,clientId:DowJones.OneIdentity.getQueryVariable("client")};if(i.idTokenHint&&(n.idTokenHint=i.idTokenHint),this.oneIdentityConfig&&this.oneIdentityConfig.extraParams)for(var s in this.oneIdentityConfig.extraParams)this.oneIdentityConfig.extraParams.hasOwnProperty(s)&&(n[s]=this.oneIdentityConfig.extraParams[s]);n.headers={"X-REMOTE-USER":e,"X-DJ-CLIENT_ID":n.clientId},"/login-page"===window.location.pathname&&(n.headers["X-OIDC-PROVIDER"]="localop"),this.sendDataBeforeAuthToLog("postToAuthEndpoint",t,e);var r=this,a=$.Deferred();return this.oneIdentityClient.login(n,function(e){e?(r.onLoginError(e),a.reject(e)):(document.cookie="LF=0",a.resolve(n))}),a.promise()},postToAuthEndpointWithState:function(e,o,t){var i={username:e,password:o,realm:DowJones.OneIdentity.getQueryVariable("coe")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts"};if(this.oneIdentityConfig&&this.oneIdentityConfig.internalOptions)for(var n in this.oneIdentityConfig.internalOptions)this.oneIdentityConfig.internalOptions.hasOwnProperty(n)&&(i[n]=thisEndpointWithState","socialLogin",e,t),i.headers={"X-REMOTE-USER":e},"/login-page"===window.location.pathname&&(i.headers["X-OIDC-PROVIDER"]="localop"),i.state=t;var s=this;this.oneIdentityClient.login(i,function(e){e&&s.onLoginError(e)})},getRandomPassword:function(){return Math.random().toString(36).slice(2,12)},getPartner:function(e){return 0<=e.toLowerCase().indexOf("google")?"GOOGLE":0<=e.toLowerCase().indexOf("facebook")?"FACEBOOK":e},postToCaps:function(e,o){o={method:"POST",url:o,contentType:"application/json",data:JSON.stringify(e),headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS"}};return $.ajax(o)},deleteCookie:function(e){document.cookie=e+"=; Path=/; max-age=Thu, 01 Jan 1970 00:00:01 GMT; Domain=.dowjones.com;"},goToSubscribe:function(e){var o;e.preventDefault(),this.$registrationPopupEnabled&&this.brand.newSubscriberLink?(e=screen.width/2-250,o=screen.height/2-300,window.open(this.brand.newSubscriberLink,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,width=500, height=600, top="+o+", left="+e)):window.location.href=this.brand.newSubscriberLink},goToActivateSubscription:function(e){e.preventDefault(),window.location.href=this.brand.activateSubscriptionLink},goToCreateFreeAccount:function(e){e.preventDefault();e=DowJones.OneIdentity.getNewMemberLink(this.brand);window.location.href=e},applyBrandToSubscribeCard:function(){var e=this.brand?this.brand.displayName||this.brand.fullName:"WSJ";this.$subscriberBrandLabel.text(" "+e)},applyBrandLabels:function(){var e=this.brand?this.brand.displayName||this.brand.fullName:"WSJ";this.$brandLabels.length&&this.$brandLabels.text(" "+e)},applyExecutiveHeaders:function(){var e,o,t=DowJones.languages[this.lang]["create-account"],i=this.brand?(e=DowJones.OneIdentity.getTranslationFromToken(this.brand.executiveText.text1,""),o=DowJones.OneIdentity.getTranslationFromToken(this.brand.executiveText.text2,""),DowJones.OneIdentity.getTranslationFromToken(this.brand.executiveText.text3,"")):o=e=" ";this.$executiveHeader1.text(e),this.$executiveHeader2.text(o),this.$executiveHeader3.text(i),"cventwsj"===this.brand.name?this.$subscribeButton.text(t):this.$executiveHeaders.hide()},getLanguageForRecaptcha:function(){var e=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en";return"zhtw"===e?"zh-TW":"zhcn"===e?"zh-CN":e},invokeRecaptcha:function(e,o,t){var i=this;window.onloadCallback=function(){grecaptcha.render("recaptcha-container",{sitekey:DowJones.Config.grecaptchaSitekey,hl:i.getLanguageForRecaptcha(),callback:function(){i.enableSubmitButton()}})}},disableSubmitButton:function(){this.$submitButton.prop("disabled",!0)},enableSubmitButton:function(){this.$submitButton.prop("disabled",!1)},disableButton:function(e){return e.prop("disabled",!0)},enableButton:function(e){return e.prop("disabled",!1)},getCookieByName:function(e){e=document.cookie.match(new RegExp(e+"=([^;]+)"));return e?e[1]:null},showRecaptchaIfNeeded:function(){5<=parseInt(this.getCookieByName("LF"))&&(this.$recaptchaError.show(),this.$recaptchaContainer.is(":visible")?(this.disableSubmitButton(),grecaptcha.reset()):(this.$recaptchaContainer.show(),this.disableSubmitButton(),this.invokeRecaptcha(DowJones.Config.recaptchaUrl,DowJones.Config.recaptchaSitekey)))},destroy:function(){this.oneIdentityClient=null,this.autoPopulateUsername=null,this.context=null,this.passwordAttempts=null,this.$container=null,this.$title=null,this.$emailErrorIcon=null,this.$email.off("keypress"),this.$email=null,this.$emailLabel=null,this.$emailError=null,this.$password.off("keypress"),this.$password=null,this.$passwordLabel=null,this.$passwordContainer=null,this.$passwordError=null,this.$errorContainer=null,this.$submitButton=null,this.$usernameErrorContainer=null,this.$brandLabels=null,this.$tooltip=null,this.$nextButton.off("click"),this.$nextButton=null,this.$forgotUserNameLink.off("click"),this.$forgotUserNameLink=null,this.$usernameErrors=null,this.$forgotPasswordLink.off("click"),this.$forgotPasswordLink=null,this.showIfOneTimeLinkingElements=null,this.hideIfOneTimeLinkingElements=null,this.$cookieOverlay=null,this.$errors=null,this.$loginForm.off("submit"),this.$loginForm=null,this.$connectButton.off("click"),this.$connectButton=null,this.socialComponent.destroy(),this.socialComponent=null,this.$newMemberContainer=null,this.$newMemberLink.off("click"),this.$newMemberLink=null,this.$registrationPopupEnabled=null,this.$loginOptionsContainer=null,this.$passwordEyeToggle.off("click"),this.$passwordEyeToggle=null,this.oneIdentityConfig=null,this.$activatePrintSubscription=null,this.$subscribeCard=null,this.$subscribeButton.off("click"),this.$subscribeButton=null,this.$activateSubscriptionLink.off("click"),this.$activateSubscriptionLink=null,this.$subscriberBrandLabel=null,this.$subscriberBrandAlertLabel1=null,this.$subscriberBrandAlertLabel2=null,this.$subscriberBrandAlertLabel3=null,this.$executiveHeader1=null,this.$executiveHeader2=null,this.$executiveHeader3=null,this.$execu=null,this.$recaptchaContainer=null,this.$forgotUsernameInputTipLink=null,this.$forgotPasswordInputTipLink=null,this.$refreshPageInputTipLink=null,this.hidePasswordField=null,this.$continueButton.off("click"),this.$continueButton=null,this.$sendOTP.off("click"),this.$sendOTP=null,this.$freeAccountButton.off("click"),this.$freeAccountButton=null,this.conf=null,this.lang=null,this.brand=null}},window.DowJones=window.DowJones||{},DowJones.LoginPassword=function(){this.run=function(e){DowJones.LoginForm.prototype.run.call(this,e),this.$email.val(e.state.username||""),e.state.username?this.focusInput(this.$password):this.focusInput(this.$email),this.toggleOneTimeLink=this.options.oneTimeLink,this.showIfOneTimeLinkingElements.toggle(a),this.hideIfOneTimeLinkingElements.toggle(!a),this.enableFormEnterButton()},this.focusInput=function(e){setTimeout(function(){e.trigger("focus"function(){page.back("/signin")},this.conf={registrationPath:"/consumeraccess/svc/registration/user.json?mode=create",updateUserPath:"/consumeraccess/svc/registration/user.json?mode=update",oneIdentityPath:"/oauth/ro",checkProUserPath:"/consumeraccess/svc/verifyPeVcProUser.json",checkAccess:"/check-access"},this.oneIdentityClient=DowJones.OneIdentity.initializeOneIdentity();var o,t,i,e=DowJones.OneIdentity.getLoginOptions(window),n=e.google||e.facebook||e.apple,s=e.subscribe,r=e.activatePrintSubscription,a=e.oneTimeLink;this.options=e,this.toggleOneTimeLink=a,this.context={},this.brand=DowJony.getBrand(),this.passwordAttempts=0,this.$container=$("#password-login"),this.$title=this.$container.find(".sign-in-title"),this.$email=this.$container.find("#password-login-username"),this.$emailLabel=this.$container.find('label[data-token="usernameOrEmail"]'),this.$emailError=this.$container.find(".username-error"),this.$emailErrorIcon=this.$email.next("#password-login-username-input-error-icon"),this.$password=this.$container.find("#password-login-password"),this.$passwordLabel=this.$container.find('label[data-token="password"]'),this.$passwordContainer=this.$container.find("#password-login-card-container"),this.$passwordError=this.$container.find(".password-error"),this.$brandLabels=this.$container.find(".brand-label"),this.$tooltip=this.$container.find(".tooltip-trigger"),this.$errorContainer=this.$container.find(".error-container"),this.$errors=this.$container.find("#password-login-errors"),this.$usernameErrorContainer=this.$container.find(".username-error-container"),this.$usernameErrors=this.$container.find("#password-login-username-login-errors"),this.$recaptchaError=this.$container.find("#password-login-recaptcha-error"),this.$loginForm=this.$container.find("form"),this.$connectButton=this.$container.find(".one-time-linking-connect .solid-button"),this.$loginForm.on("submiton("click",this.connectAccounts.bind(this)),this.$forgotUserNameLink=this.$container.find(".forgot-username-link"),this.$forgotUserNameLink.on("click",this.jumpToForgetUsername.bind(this,"forgot_username_footer")),this.$forgotPasswordLink=this.$container.find(".forgot-password-link"),this.$forgotPasswordLink.on("click",this.jumpToForgetPassword.bind(this,"forgot_password_footer")),this.$loginOptionsContainer=this.$container.find("#password-login-options-container"),this.$newMemberContainer=this.$container.find("#not-a-member"),this.$newMemberLink=this.$container.find(".not-a-member-link"),this.$newMemberLink.on("click",this.onNewMemberLinkClick.bind(this)),this.$registrationPopupEnabled=!1,this.$passwordEyeToggle=this.$container.find(".eye-show"),this.$passwordEyeToggle.on("click",(t=(o=this).setClosedEyeIcon,i=this.setOpenedEye,function(e){o.onTogglePasswordShow.call(o,e,t.bind(o),i.bind(o))}));var l=this.$passwordEyeToggle,e=(this.$passwordEyeToggle.on("keyup",function(e){"Enter"===e.key&&l.trigger("click")}),this.showLoginOptions(n),this.$activatePrintSubscription=this.$container.find("#activate-print-subscription"),this.$activatePrintSubscription.toggle(r),this.$subscribeCard=this.$container.find("#subscribe-card"),this.$subscribeCard.toggle(s),this.$subscribeButton=this.$container.find("#go-to-subscribe"),this.$subscribeButton.on("click",this.goToSubscribe.bind(this)),this.showIfOneTimeLinkingElements=this.$container.find(".show-if-one-time-linking"),this.hideIfOneTimeLinkingElements=this.$container.find(".hide-if-one-time-linking"),this.$cookieOverlay=this.$container.find(".cookie-overlay"),this.$activateSubscriptionLink=this.$container.find("#activate-subscription"),this.$activateSubscriptionLink.on("click",this.goToActivateSubscription.bind(this)),this.$subscriberBrandLabel=this.$container.find("#subscribe-brand"),this.$subscriberBrandAlertLabel1=this.$container.find("#subscribe-brand-alert1"),this.$subscriberBrandAlertLabel2=this.$container.find("#subscribe-brand-alert2"),this.$subscriberBrandAlertLabel3=this.$container.find("#subscribe-brand-alert3"),this.$executiveHeader1=this.$container.find("#executive-header1"),this.$executiveHeader2=this.$container.find("#executive-header2"),this.$executiveHeader3=this.$container.find("#executive-header3"),this.$executiveHeaders=this.$container.find(".executive-header"),this.$recaptchaContainer=this.$container.find("#recaptcha-container"),this.$submitButton=this.$container.find(".solid-button.basic-login-submit"),this.$nextButton=this.$container.find(".next-step .solid-button"),this.$continueButton=this.$container.find(".solid-button.continue-submit"),this.$returnToSignIn=this.$container.find("#return-to-sign-in"),this.$returnToSignIn.text().toLowerCase());this.$returnToSignIn.text(e),this.$continueButton.on("click",this.continue.bind(this)),this.$nextButton.toggle(!1),this.$freeAccountButton=this.$container.find("#free-account-button"),this.$freeAccountButton.on("click",this.goToCreateFreeAccount.bind(this)),this.oneIdentityConfig=config,this.lang=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en",this.$returnToSignIn.on("click",this.returnToSignIn),DowJones.OneIdentity.subscribeInputForErrorClearing(this.$email,this.clearEmailUsernameErrors.bind(this)),DowJones.OneIdentity.subscribeInputForErrorClearing(this.$password,this.clearPasswordErrors.bind(this))},DowJones.LoginPassword.prototype=DowJones.LoginForm.prototype,window.DowJones=window.DowJones||{},DowJones.PasswordResetTokenValidation=function(e){this.oneIdentityConfig=e;var e=(null==(e=this.oneIdentityConfig)||null==(e=e.extraParams)?void 0:e._csrf)||"",o=DowJones.OneIdentity.getQueryVariable("rptoken"),o=(this.resetToken=DowJones.OneIdentity.getQueryVariable("requestId"),o?"?rptoken="+o:"?token="+this.resetToken);this.conf={userInfoPath:"/forgot-credentials/verify"+o+"&csrf="+e},this.spinnerToken="resetPasswordTokenIsValidating"},DowJones.PasswordResetTokenValidation.prototype={run:function(){window.DowJones.spinner.setTextWithToken(this.spinnerToken),this.getUserInfoFromToken()},postToCaps:function(e,o,t,i){var n={"X-HTTP-Method-Override":e=e?e.toUpperCase():"GET","X-REQUEST-SCHEME":"HTTPS"},s={},s=i?DowJones.OneIdentity.mergeObjectProperties(n,i):n,i={method:e,url:t,contentType:"application/json",data:JSON.stringify(o),headers:s};return $.ajax(i)},getHeaders:function(){var e="one-identity";return{"origin-application-name":e,"source-application-name":e}},getUserInfoFromToken:function(){this.postToCaps("GET",void 0,this.conf.userInfoPath,this.getHeaders()).done(function(e){e=e.username;e&&window.sessionStorage.setItem("userData",JSON.stringify({username:e})),page.show("/reset-password")}).fail(function(e,o){page.show("/reset-password-expired-token")})},destroy:function(){this.resetToken=null,this.conf=null,this.spinnerToken=null,this.oneIdentityConfig=null}},window.DowJones=window.DowJones||{},DowJones.PasswordResetForm=function(e){function o(o,t,i,n,s){return function(e){o.onTogglePasswordShow.call(o,e,t.bind(o,s),i.bind(o,s),n)}}function t(o){o.on("keyup",function(e){"Enter"===e.key&&o.trigger("click")})}this.resetToken=DowJones.OneIdentity.getQueryVariable("requestId"),this.conf={passwordResetPath:"/forgot-credentials/reset-password"},this.$container=$("#reset-password-valid-token"),this.$password=this.$container.find("#new-password"),this.$passwordLabel=this.$container.find('label[for="new-password"]'),this.$passwordEyeToggle=this.$container.find("#password-eye-show"),this.$passwordEyeToggle.on("click",o(this,this.setClosedEyeIcon,this.setOpenedEye,this.$password,this.$passwordEyeToggle)),t(this.$passwordEyeToggle),this.$confirmPassword=this.$container.find("#confirm-new-password"),this.$confirmPasswordLabel=this.$container.find('label[for="confirm-new-password"]'),this.$confirmPasswordEyeToggle=this.$container.find("#confirm-password-eye-show"),this.$confirmPasswordEyeToggle.on("click",o(this,this.setClosedEyeIcon,this.setOpenedEye,this.$confirmPassword,this.$confirmPasswordEyeToggle)),t(this.$confirmPasswordEyeToggle),this.$passwordResetForm=this.$container.find("form"),this.$passwordResetForm.on("submit",this.resetPassword.bind(this)),this.$resetButton=this.$container.find("button.fpw-submit"),this.$errors=this.$container.find(".errors"),this.lang=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en",DowJones.OneIdentity.subscribeInputForErrorClearing(this.$password,this.clearPasswordErrors.bind(this)),DowJones.OneIdentity.subscribeInputForErrorClearing(this.$confirmPassword,this.clearConfirmPasswordErrors.bind(this)),this.oneIdentityConfig=e},DowJones.PasswordResetForm.prototype={run:function(){setTimeout(function(){this.$password.trigger("focus")}.bind(this),100);var e=window.sessionStorage.getItem("userData");e?this.userData=JSON.parse(e):page.show("/reset-password-expired-token")},postToCaps:function(e,o,t,i){var n={"X-HTTP-Method-Override":e=e?e.toUpperCase():"GET","X-REQUEST-SCHEME":"HTTPS","X-REMOTE-USER":o.username},s={},s=i?DowJones.OneIdentity.mergeObjectProperties(n,i):n,i={method:e,url:t,contentType:"application/json",data:JSON.stringify(o),headers:s};return $.ajax(i)},resetPassword:function(e){var n;if(e.preventDefault(),this.clearErrors(),this.validateForm())return(n=this).toggleLoadingStatus(!0),e={username:this.userData.username,new_password:this.$password.val(),confirm_password:this.$confirmPassword.val(),csrf:(null==(e=this.oneIdentityConfig)||null==(e=e.extraParams)?void 0:e._csrf)||"",token:this.resetToken,rptoken:DowJones.OneIdentity.getQueryVariable("rptoken"),client_id:DowJones.OneIdentity.getQueryVariable("client")},this.postToCaps("post",e,this.conf.passwordResetPath).done(function(e){page.show("/password-reset-confirmation"),n.toggleLoadingStatus(!1)}).fail(function(e){var o=e.responseJSON,e=e.status,t={title:"try-again-later",status:e,code:null},i=500<=e?t:null!=(i=o.error)&&i.attributes&&null!=(i=o.error)&&i.attributes.payload?{title:o.error.attributes.payload.errorMessage,status:e,code:o.error.attributes.payload.errorCode}:429===e||403===e?{title:"csrf-expired",status:e,code:null}:t;n.onApiError(i),n.toggleLoadingStatus(!1)})},toggleLoadingStatus:function(e){e?(this.$password.prop("disabled",!0),this.$confirmPassword.prop("disabled",!0),this.$confirmPassword.prop("disabled",!0),this.$resetButton.prop("disabled",!0).addClass("loading")):(this.$password.prop("disabled",!1),this.$confirmPassword.prop("disabled",!1),this.$confirmPassword.prop("disabled",!1),this.$resetButton.prop("disabled",!1).removeClass("loading"))},onApiError:function(e){this.handleCapsError(e),this.toggleLoadingStatus(!1)},getLangTokens:function(e){switch(e){case"csrf-expired":return"unknown-error-refresh-pre";case"token-invalid":case"token-expired":case"token-missing":return"invalidToken";case"password-minlength":return"passwordMinLength";case"password-maxlength":return"passwordMaxLength";case"password-invalid":return"invalidPassword";default:return e}},getMessageFromToken:function(e,o){return o=o||this.lang,window.DowJones.languages?window.DowJones.languages[o][e]:""},handleCapsError:function(e){if(!e)return"";var o=[],t=this.getLangTokens(e.title),t=this.getMessageFromToken(t,this.lang)||null;429!==e.status&&403!==e.status||"csrf-expired"!==e.title||(t+=' <a href="javascript:void()" onclick="window.location.reload(true)">Refresh</a>'),o.push(t),this.showErrors(o.join("<br>"))},validateForm:function(){var e=!0,o=[],t=this.$password.val(),i=this.$confirmPassword.val();return t?t.length<5?(this.addErrorClassToPasswordInput(),o.push(this.getMessageFromToken("passwordMinLength")),e=!1):32<t.length?(this.addErrorClassToPasswordInput(),o.push(this.getMessageFromToken("passwordMaxLength")),e=!1):(t&&!i||t&&t!==i)&&(this.addErrorClassToConfirmPasswordInput(),o.push(this.getMessageFromToken("regConfirmPwdError")),e=!1):(this.addErrorClassToPasswordInput(),o.push(this.getMessageFromToken("regPasswordError")),e=!1),this.showErrors(o.join("<br>")),e},addErrorClassToPasswordInput:function(){this.$password.addClass("error"),this.$passwordLabel.addClass("error"),this.$passwordEyeToggle.addClass("error"),setTimeout(function(){this.$password.attr("aria-describedby",this.$errors.attr("id")),this.$password.trigger("focus")}.bind(this),0)},addErrorClassToConfirmPasswordInput:function(){this.$confirmPassword.addClass("error"),this.$confirmPasswordLabel.addClass("error"),this.$confirmPasswordEyeToggle.addClass("error"),setTimeout(function(){this.$confirmPassword.attr("aria-describedby",this.$errors.attr("id")),this.$confirmPassword.trigger("focus")}.bind(this),0)},showErrors:function(e){this.$errors.html(e),this.$errors.show()},clearErrors:function(){this.clearPasswordErrors(),this.clearConfirmPasswordErrors()},clearOtherErrors:function(){this.$container.find(".input-error").hide(),this.$errors.html(""),this.$errors.hide()},clearPasswordErrors:function(){this.$password.hasClass("error")&&this.clearOtherErrors(),this.$passwordLabel.removeClass("error"),this.$passwordEyeToggle.removeClass("error"),this.$password.removeClass("error")},clearConfirmPasswordErrors:function(){this.$confirmPassword.hasClass("error")&&this.clearOtherErrors(),this.$confirmPasswordLabel.removeClass("error"),this.$confirmPasswordEyeToggle.removeClass("error"),this.$confirmPassword.removeClass("error")},setOpenedEye:function(e){e.removeClass("input-password-icon-closed").addClass("input-password-icon-opened")},setClosedEyeIcon:function(e){e.removeClass("input-password-icon-opened").addClass("input-password-icon-closed")},onTogglePasswordShow:function(e,o,t,i){e.preventDefault(),"password"==i.attr("type")?(t(),i.attr("type","text")):(o(),i.attr("type","password"))},destroy:function(){this.clearErrors(),this.resetToken=null,this.conf=null,this.$password.off("keypress"),this.$password=null,this.$passwordLabel=null,this.$passwordEyeToggle.off("click"),this.$passwordEyeToggle=null,this.$confirmPassword.off("keypress"),this.$confirmPassword=null,this.$confirmPasswordLabel=null,this.$confirmPasswordEyeToggle.off("click"),this.$confirmPasswordEyeToggle=null,this.$passwordResetForm.off("submit"),this.$passwordResetForm=null,this.$resetButton=null,this.$errors=null,this.lang=null,this.$container=null,this.oneIdentityConfig=null}},window.DowJones=window.DowJones||{},DowJones.PasswordResetConfirm=function(){this.$container=$("#password-reset-confirm"),this.$signInButton=this.$container.find(".prc-signin-button"),this.$signInButton.on("click",this.goToSignIn)},DowJones.PasswordResetConfirm.prototype={goToSignIn:function(){window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},destroy:function(){this.$signInButton.off("click"),this.$signInButton=null,this.$container=null}},window.DowJones=window.DowJones||{},DowJones.ResetPasswordExpiredTokenForm=function(e){this.conf={usernameServiceForgotPW:"/forgot-credentials/start",usernameServiceRoles:"/auth/roles/forgotpassword",usernameServiceServiceRoles:"/auth/roles/forgotpasswordWithUsername"},this.goToLogin=function(){window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},this.$container=$("#reset-password-expired-token"),this.$fpwForm=this.$container.find("form"),this.loginAttempts=0,this.chatLoginCount=0,this.invalidEntitlements=0,this.$email=this.$container.find("#fpwet-email"),this.$emailLabel=this.$container.find('label[for="fpwet-email"]'),this.$emailError=this.$container.find(".fpw-email-error"),this.$emailErrorIcon=this.$container.find("#fpwet-input-error-icon"),this.$errors=this.$container.find(".errors"),this.$fpwSubmit=this.$container.find(".fpw-submit"),this.$fpwSubmit.on("click",this.onEmailSubmit.bind(this)),this.$backToLogin=this.$container.find(".return-to-login"),this.$backToLogin.on("click",this.goToLogin.bind(this)),this.$emailOTPSubmit=this.$container.find(".email-OTP-submit"),this.$emailLinkSubmit=this.$container.find(".email-link-submit"),this.$emailNotFound=!1,this.$cardTitle=this.$container.find(".card-title > h2"),this.$cardMessage=this.$container.find(".form__full .centered-padded p"),this.oneIdentityConfig=e,DowJones.OneIdentity.subscribeInputForErrorClearing(this.$email,this.clearErrors.bind(this))},DowJones.ResetPasswordExpiredTokenForm.prototype=DowJones.ForgotPasswordForm.prototype,window.DowJones=window.DowJones||{},DowJones.SocialLogins=function(){var e=DowJones.OneIdentity.getLoginOptions(window),o=e.google,t=e.facebook,e=e.apple;this.brand=DowJones.OneIdentity.getBrand(),this.oneIdentityClient=DowJones.OneIdentity.initializeOneIdentity(),this.$container=$("#social-card"),this.$googleLogin=this.$container.find(".socialbtn-google"),this.$googleLogin.toggle(o),this.$googleLogin.on("click",this.onGoogleLogin.bind(this)),this.$googleLoginWrapper=this.$container.find("#socialbtn-google-wrapper"),this.$googleLoginWrapper.toggle(o),this.$facebookLogin=this.$container.find(".socialbtn-facebook"),this.$facebookLogin.toggle(t),this.$facebookLogin.on("click",this.onFacebookLogin.bind(this)),this.$facebookLoginWrapper=this.$container.find("#socialbtn-facebook-wrapper"),this.$facebookLoginWrapper.toggle(t),this.$appleLogin=this.$container.find(".socialbtn-apple"),this.$appleLogin.toggle(e),this.$appleLogin.on("click",this.onAppleLogin.bind(this)),this.$appleLoginWrapper=this.$container.find("#socialbtn-apple-wrapper"),this.$appleLoginWrapper.toggle(e)},DowJones.SocialLogins.prototype={onGoogleLogin:function(e){e.preventDefault(),this.trackSocialLoginEvent("login_via_google"),DowJones.LoginForm.prototype.sendDataBeforeAuthToLog("onGoogleLogin","socialLogin");e=this.brand?this.brand["social-signin-connection-mapping"]:null;this.oneIdentityClient.authorize({connection:(null==e?void 0:e.google)||"google-oauth2",state:DowJones.OneIdentity.oneIdentityState,scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",device:DowJones.OneIdentity.getQueryVariable("device")||"heimdall-rp-login",ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",code_challenge:DowJones.OneIdentity.getQueryVariable("code_challenge")||"",code_challenge_method:DowJones.OneIdentity.getQueryVariable("code_challenge_method")||""})},onFacebookLogin:function(e){e.preventDefault(),this.trackSocialLoginEvent("login_via_facebook"),DowJones.LoginForm.prototype.sendDataBeforeAuthToLog("onFacebookLogin","socialLogin");e=this.brand?this.brand["social-signin-connection-mapping"]:null;this.oneIdentityClient.authorize({connection:(null==e?void 0:e.facebook)||"facebook",state:DowJones.OneIdentity.oneIdentityState,scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",device:DowJones.OneIdentity.getQueryVariable("device")||"heimdall-rp-login",ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",code_challenge:DowJones.OneIdentity.getQueryVariable("code_challenge")||"",code_challenge_method:DowJones.OneIdentity.getQueryVariable("code_challenge_method")||""})},onAppleLogin:function(e){e.preventDefault(),this.trackSocialLoginEvent("login_via_apple"),DowJones.LoginForm.prototype.sendDataBeforeAuthToLog("onAppleLogin","socialLogin");e=this.brand?this.brand["social-signin-connection-mapping"]:null;this.oneIdentityClient.authorize({connection:(null==e?void 0:e.apple)||"apple",state:DowJones.OneIdentity.oneIdentityState,scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid idp_id roles email given_name family_name djid djUsername djStatus trackid tags prts",device:DowJones.OneIdentity.getQueryVariable("device")||"heimdall-rp-login",ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||"",nonce:DowJones.OneIdentity.getQueryVariable("nonce")||"",code_challenge:DowJones.OneIdentity.getQueryVariable("code_challenge")||"",code_challenge_method:DowJones.OneIdentity.getQueryVariable("code_challenge_method")||""})},toggleSocialLogins:function(){this.$container.toggleClass("show")},removeSocialCard:function(){this.$container.remove()},trackSocialLoginEvent:function(e){window.DowJones.OneIdentity.trackEvent("signin",{event_name:e},"link")},destroy:function(){this.oneIdentityClient=null,this.$container=null,this.brand=null,this.$googleLogin.off("click"),this.$googleLogin=null,this.$googleLoginWrapper=null,this.$facebookLogin.off("click"),this.$facebookLogin=null,this.$facebookLoginWrapper=null,this.$appleLogin.off("click"),this.$appleLogin=null,this.$appleLoginWrapper=null}},window.DowJones=window.DowJones||{},window.jQuery&&window.$&&(window.DowJones.spinner={element:$("#spinner"),tokenContainer:$(".spinner__token"),text:"",lang:window.DowJones.OneIdentity&&window.DowJones.OneIdentity.uiLocales?window.DowJones.OneIdentity.uiLocales.language:"en"},window.DowJones.spinner.setText=function(e){(this.tokenContainer.length?this.tokenContainer:$(".spinner__token")).text(e)},window.DowJones.spinner.clearText=function(){this.setText("")},window.DowJones.spinner.setTextWithToken=function(e){window.DowJones.languages&&e in window.DowJones.languages[this.lang]&&(e=window.DowJones.languages[this.lang][e],this.setText(e))}),window.DowJones=window.DowJones||{},DowJones.TempPasswordUpdate=function(){this.$container=$("#temp-password-update"),this.$updatePasswordBtn=this.$container.find(".temp-pw-update"),this.$updatePasswordBtn.on("click",this.onUpdatePasswordClick.bind(this)),this.$signInBtn=this.$container.find(".temp-pw-signin"),this.$signInBtn.on("click",this.onSignInClick.bind(this))},DowJones.TempPasswordUpdate.prototype={run:function(){},onSignInClick:function(e){e.preventDefault(),window.location.href=DowJones.OneIdentity.getBrand().redirectUri},onUpdatePasswordClick:function(){var e=DowJones.OneIdentity.getQueryVariable("state");window.location.href="/continue?state="+e},destroy:function(){this.$updatePasswordBtn.off("click"),this.$updatePasswordBtn=null,this.$signInBtn.off("click"),this.$signInBtn=null,this.$container=null}},window.DowJones=window.DowJones||{},DowJones.VerifyRegistration=function(){this.conf={verifyRegistration:"/uap/api/v1/users/verification"},this.$container=$("#verify-registration"),this.$regError=this.$container.find(".errors"),this.$cardTitle=this.$container.find(".card-title"),this.$rtlSubmit=this.$container.find(".ver-reg-rtl-btn"),this.$rtlSubmit.on("click",this.onRTLSubmitClick.bind(this))},DowJones.VerifyRegistration.prototype={run:function(){var e=DowJones.OneIdentity.getQueryVariable("requestId"),o=DowJones.OneIdentity.getQueryVariable("uuid"),o=o||1;e&&""!=e.trim()?(this.toggleLoadingStatus(!0),this.postToCaps(this.createVerificationObj(e),this.conf.verifyRegistration,o).done(function(e,o,t){this.toggleLoadingStatus(!1)}.bind(this)).fail(function(e,o,t){e=e.responseJSON;e&&e.errorReasonCodes&&this.handleCapsError(e.errorReasonCodes),this.toggleLoadingStatus(!1)}.bind(this)),setTimeout(function(){this.$rtlSubmit.trigger("focus")}.bind(this),100)):this.showErrors("Sorry, the token has expired or is invalid. The tokens in the email are one-time use and expire in 7 days. Please register again or use Forgot password to retrieve your information.")},onRTLSubmitClick:function(e){e.preventDefault(),this.clearErrors();var e=DowJones.OneIdentity.getBrand().registrationRedirect,o=DowJones.OneIdentity.getQueryVariable("target");o&&(e=e.split("?")[0]+"?target="+encodeURIComponent(o)),window.location.href=e},createVerificationObj:function(e){return{data:{attributes:{payload:{tokenDetails:{token:e,tokenType:"VE"}}},id:"string",type:"verification"}}},postToCaps:function(e,o,t){var i="one-identity",o={url:o,method:"PUT",contentType:"application/json",data:JSON.stringify(e),headers:{"X-REQUEST-SCHEME":"HTTPS","X-HTTP-Method-Override":"POST","origin-application-name":i,"source-application-name":i,"source-application-request-identifier":t,"origin-application-request-identifier":t}};return $.ajax(o)},toggleLoadingStatus:function(e){e?(this.$rtlSubmit.prop("disabled",!0),this.$rtlSubmit.addClass("loading")):(this.$rtlSubmit.prop("disabled",!1),this.$rtlSubmit.removeClass("loading"))},handleCapsError:function(e){var o,t=[];if(Array.isArray(e)){for(;o=e.shift();)switch(o){case"token-invalid":case"token-expired":t.push("Sorry, your token has expired or is invalid. The tokens in the email are one-time use and expire in 7 days. Please register");break;case"token-minlength":t.push("The submitted token appears to be truncated. Please copy and paste the entire URL into your browser/s URL bar.");break;case"password-required":t.push("Your account does not appear to have a password. Please contact customer service to correct your account.");break;default:t.push("Error code - "+o)}this.showErrors(t)}},showErrors:function(e){this.toggleLoadingStatus(!1),this.$rtlSubmit.hide(),this.$cardTitle.hide(),this.$regError.addClass("error");var o=Object.prototype.toString.call(e),o="[object String]"===o?"<ul><li>"+e+"</li></ul>":"[object Array]"===o?"<ul><li>"+e.join("</li><li>")+"</li></ul>":e;this.$regError.html(o),this.$regError.show(),this.$container.find("div.call-to-action a").show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$container.find(".input-error").hide(),this.$regError.text(""),this.$regError.hide(),this.$cardTitle.show()},destroy:function(){this.clearErrors(),this.conf=null,this.$container=null,this.$regError=null,this.$rtlSubmit.off("click"),this.$rtlSubmit=null,this.$cardTitle=null}};