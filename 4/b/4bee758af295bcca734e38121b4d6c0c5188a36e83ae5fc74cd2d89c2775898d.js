((self||this)["webpackJsonp@sprinklrjs/chat-web-client"]=(self||this)["webpackJsonp@sprinklrjs/chat-web-client"]||[]).push([[89],{1068:function(e,t,n){"use strict";n.d(t,"a",(function(){return Et})),n.d(t,"c",(function(){return It})),n.d(t,"b",(function(){return wt}));var r,a=n(128),c=n(357),o=n.n(c),i=n(375),s=n(13),u=n(358),l=n(365),f=n(360),b=n(752),d=n.n(b),p=n(400),v=n(84),O=n.n(v),j=n(27),h=n(550),g=n(359),m=(n(127),n(202)),x=n.n(m),y=n(364),I=n(572),w=n(910),k=n(361),E=n(564),C=n(499);var T=Object(j.a)({},"PULSE",(function(e){var t=Object(k.f)("trigger.borderColor")({theme:e}),n=Object(u.keyframes)(r||(r=Object(h.a)(["0%{box-shadow:0 0 0 0 ","}100%{box-shadow:0 0 0 10px ","}"])),Object(E.k)(t,.6),Object(E.k)(t,0));return Object(u.css)("animation:",n," 2s ease infinite;")})),S=function(e){var t=e.triggerAnimationInfo,n=e.theme,r=x()(t,"effect"),a=T[r];return a?a(n):""},_=function(e){var t=Object(k.f)("trigger.size")(e);return Math.min(Object(k.f)("trigger.borderRadius",t/2)(e),t/2)*(1-Math.pow(2,-.5))},A=function(e){return.13*Object(k.f)("trigger.overlayIconButton.button.height")(e)},N=function(e){return Object(k.f)("trigger.size")(e)-.5*Object(k.f)("trigger.overlayIconButton.button.height")(e)-(_(e)-A(e))},R=function(e){var t=e.direction,n=e.theme,r=t===C.b.LTR?"right":"left",a=-.5*Object(k.f)("trigger.overlayIconButton.button.height")({theme:n})+_({theme:n})-A({theme:n});return"".concat(r,": ").concat(a,"px")},P=Object(g.a)("div",{target:"eg0frzz0"})("width:",(function(e){return Object(k.f)("trigger.overlayIconButton.button.width")(e)}),"px;height:",(function(e){return Object(k.f)("trigger.overlayIconButton.button.height")(e)}),"px;border-radius:",(function(e){return Object(k.a)("trigger.overlayIconButton.borderRadius","".concat(Object(k.f)("trigger.overlayIconButton.button.height")(e)/2,"px"))(e)}),";background-color:",Object(k.f)("trigger.removeIcon.backgroundColor"),";position:absolute;bottom:",(function(e){return N(e)}),"px;",(function(e){return R(e)}),";cursor:pointer;display:flex;align-items:center;justify-content:center;visibility:hidden;transform:translatez(",Object(k.f)("frame.translateZ"),"px);z-index:",Object(k.f)("frame.zIndex"),";",y.m,"{visibility:visible;}"),L=Object(g.a)("div",{target:"eg0frzz1"})({name:"l1tuuh",styles:"width:100%;height:100%;display:flex;align-items:center;justify-content:center;"}),M=Object(g.a)(w.a,{target:"eg0frzz2"})("width:",(function(e){return Object(k.f)("trigger.overlayIconButton.icon.width")(e)}),"px;height:",(function(e){return Object(k.f)("trigger.overlayIconButton.icon.height")(e)}),"px;fill:",Object(k.f)("trigger.removeIcon.fill"),";"),D="\n  ".concat(P," {\n    visibility: visible;\n  }\n  & ~ .notification-container {\n    visibility: hidden;\n  }\n"),U=Object(g.a)("div",{target:"eg0frzz3"})((function(e){return e.enableTriggerHideIcon&&"\n    &:hover {\n      ".concat(e.applyRemoveIconStyles&&D,";\n    }\n  ")}),";"),F=Object(g.a)("div",{target:"eg0frzz4"})("background:transparent;overflow:hidden;box-shadow:",Object(k.f)("trigger.boxShadow"),";border-radius:",(function(e){return Object(k.a)("trigger.borderRadius","".concat(Object(k.f)("trigger.size")(e)/2,"px}"))(e)}),";height:",Object(k.f)("trigger.size"),"px;position:relative;transition:",(function(e){return e.enableTriggerWidthTransition?"width 0.08s":"none"}),";visibility:",(,";width:",(function(e){return function(e){var t=e.showTrigger,n=e.showLabel,r=e.labelWidth,a=e.theme;return n&&t?r+Object(k.f)("trigger.icon.width")({theme:a})+8+48:Object(k.f)("trigger.size")({theme:a})}(e)}),"px;&:focus{",y.k,";}&:active:focus,&:focus:hover{",y.f,";}",y.m,"{&:focus{",y.f,";}}"),B=Object(g.a)(I.a,{target:"eg0frzz5"})("border-radius:",(function(e){return Object(k.a)("trigger.borderRadius","".concat(Object(k.f)("trigger.size")(e)/2,"px}"))(e)}),";border:0 none;height:100%;width:100%;"),G=function(e,t){var n=!((Object(k.f)("trigger.backgroundUrls")({theme:e})||Object(k.f)("trigger.icon.url")({theme:e}))&&t.isMinimized);return Object(u.css)("body{background-color:",n?Object(k.f)("trigger.backgroundColor")({theme:e}):"transparent",";}")},V=Object(g.a)("div",{target:"eg0frzz6"})({name:"gztsdx",styles:"position:absolute;top:0;left:0;height:100%;width:100%;cursor:pointer;-webkit-touch-callout:none !important;-webkit-user-select:none !important;background:transparent;"}),H=n(1093),z=n(392),W=n.n(z),q=n(615);var K=Object(g.a)("div",{target:"e1t174p80"})("cursor:pointer;position:relative;overflow:hidden;border-radius:",(function(e){return Object(k.a)("trigger.borderRadius","".concat(Object(k.f)("trigger.size")(e)/2,"px"))(e)}),";height:",(function(e){return Object(k.f)("trigger.size")(e)}),"px;background-color:transparent;"),Y=Object(g.a)(K,{target:"e1t174p81"})("border:",(function(e){return"".concat(Object(k.f)("trigger.borderWidth")(e),"px solid ").concat(Object(k.f)("trigger.borderColor")(e))}),";background-size:cover;"),X=Object(g.a)(K,{target:"e1t174p82"})("background-color:",Object(k.f)("trigger.backgroundColor"),";"),Q={name:"15vzngf",styles:"bottom:0;top:0;transform:translate3d(-50%,-50%,0);transition:transform 0.16s linear,opacity 0.08s linear,-webkit-transform 0.16s linear;width:100%;"},Z={name:"w8476o",styles:"transform:rotate(90deg) scale(0);opacity:0;"},$={name:"12ovxee",styles:"transform:scale(0);opacity:0;"},J={name:"k4n0ja",styles:"transform:rotate(0deg) scale(1);opacity:1;"},ee={name:"20dbs8",styles:"transform:scale(1);opacity:1;"},te=Object(g.a)(q.a,{target:"e1t174p83"})("fill:",Object(k.f)("trigger.closeIcon.color"),";height:",Object(k.f)("trigger.closeIcon.height"),"px;width:",Object(k.f)("trigger.closeIcon.width"),"px;"),ne=Object(g.a)("div",{target:"e1t174p84"})(Q,";"),re=Object(g.a)("div",{target:"e1t174p85"})(Q,";"),ae=Object(g.a)("h2",{target:"e1t174p86"})("color:",Object(k.f)("trigger.icon.color"),";",(function(e){return Object(y.b)("font-size",Object(k.e)("lg")(e),Object(k.e)("xl")(e))(e)})," font-weight:600;margin-bottom:0;margin-top:0;line-height:1.4;white-space:nowrap;",Object(y.c)("margin-left: 8px","margin-right: 8px;"),";"),ce=Object(g.a)(q.a,{target:"e1t174p87"})("height:",Object(k.f)("trigger.icon.height"),"px;width:",Object(k.f)("trigger.icon.width"),"px;fill:",Object(k.f)("trigger.icon.color"),";"),oe=n(954),ie=n(523);n(362);function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}var ve=n(844);function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}var je,he=n(384),ge=n(845),me=["customTriggerIconUrls","onLoad","onError"];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}var ye,Ie=function(e){return Object(k.f)("trigger.backgroundUrls")({theme:e})||Object(k.f)("trigger.icon.url")({theme:e})},we=o.a.memo((function(e){var t=e.customTriggerIconUrls,n=e.onLoad,r=e.onError,a=Object(he.a)(e,me),o=Object(c.useRef)(null),i=je||(je=Object(ge.a)(t,1)[0]);return Object(c.useEffect)((function(){if(o.current){var e=new Image,t=function(){o.current.style.backgroundImage='url("'.concat(i,'")'),n(!0)};return e.addEventListener("load",t),e.addEventListener("error",r),e.src=i,function(){e.removeEventListener("load",t),e.removeEventListener("error",r)}}}),[i,r,n]),Object(u.jsx)(Y,xe({},a,{ref:o}))})),ke=n(843),Ee="MINIMIZED",Ce="MAXIMIZED",Te=(ye={},Object(j.a)(ye,ke.a.BOX,{Icon:function(e){return Object(u.jsx)("svg",se({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerBox",focusable:"false"},e),Object(u.jsx)("path",{d:"M12.7,0.3L12.7,0.3H1.3C-0.2,0.3,0,1.7,0,1.7v7.7c0,1.1,0.9,1.2,1.2,1.2c0.1,0,0.1,0,0.1,0h3.6c0.5,0,0.7,0.2,0.7,0.2 l4.5,2.9c0.1,0.1,0.2,0.1,0.3,0.1c0.6,0,0.7-0.8,0.7-0.8v-2.3h1.6c1.3,0,1.4-1.2,1.4-1.2V1.5C14.1,0.4,12.9,0.3,12.7,0.3z M8.2,7.4 H2.5C2.2,7.4,2,7.2,2,6.9c0-0.3,0.2-0.5,0.5-0.5h5.7c0.3,0,0.5,0.2,0.5,0.5S8.5,7.4,8.2,7.4z M11.2,4.4H2.5C2.2,4.4,2,4.2,2,3.9 c0-0.3,0.2-0.5,0.5-0.5h8.8c0.3,0,0.5,0.2,0.5,0.5C11.7,4.2,11.5,4.4,11.2,4.4z"}))},Component:ce}),Object(j.a)(ye,ke.a.BUBBLE,{Icon:function(e){return Object(u.jsx)("svg",ue({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerBubble",focusable:"false"},e),Object(u.jsx)("path",{d:"M12.9,2.5c-0.9-1.1-2.5-2-3.8-2.3C3.5-0.9,0.7,3.3,0.3,4.9c-0.9,4.9,1.2,7.6,2.5,8.9C2.9,14,3.1,14,3.1,13.9 c-0.2-3,1.7-3.5,5.6-3.3c1.4,0.1,4.7-1.1,5-3.7C14,5.3,14.1,4.1,12.9,2.5z M3.1,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8 s0.8,0.4,0.8,0.8C3.9,6.1,3.5,6.5,3.1,6.5z M6.9,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8s0.8,0.4,0.8,0.8 C7.7,6.1,7.3,6.5,6.9,6.5z M10.7,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8C11.6,6.1,11.2,6.5,10.7,6.5z"}))},Component:ce}),Object(j.a)(ye,ke.a.COLLABORATORS,{Icon:function(e){return Object(u.jsx)("svg",le({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerCollaborators",focusable:"false"},e),Object(u.jsx)("path",{d:"M12.103 7.498c.077 0 .145 0 .216.005l.11.013-.02-.157a5.233 5.233 0 00-2.392-3.729l-.247-.148A2.925 2.925 0 017.22 5.37l-.224.008A2.944 2.944 0 014.3 3.673l-.078-.192-.212.126a5.236 5.236 0 00-2.445 3.908 1.823 1.823 0 01.325-.018 2.893 2.893 0 012.945 2.836A2.797 2.797 0 014.11 12.2l-.155.16.114.072a5.598 5.598 0 002.625.822l.322.01.336-.01a5.591 5.591 0 002.724-.894 2.744 2.744 0 01-.88-2.026 2.86 2.86 0 012.907-2.836z"}),Object(u.jsx)("path",{d:"M1.893 8.51a1.934 1.934 0 00-1.087.332l-.015.011a1.801 1.801 0 00-.792 1.481 1.858 1.858 0 001.72 1.816l.174.008.17-.008a1.856 1.856 0 001.723-1.816A1.889 1.889 0 001.893 8.51zm10.214 0a1.864 1.864 0 00-1.893 1.824 1.837 1.837 0 001.248 1.715 1.936 1.936 0 00.477.102l.168.007.17-.008a1.822 1.822 0 00-.17-3.64zM6.998 4.366a1.864 1.864 0 001.894-1.824A1.848 1.848 0 006.998.737 1.864 1.864 0 005.105 2.56a1.849 1.849 0 001.893 1.805z"}))},Component:ce}),Object(j.a)(ye,ke.a.CLOUD,{Icon:function(e){return Object(u.jsx)("svg",fe({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerCloud",focusable:"false"},e),Object(u.jsx)("path",{d:"M7.1,0C3.2,0,0.1,3.1,0.1,6.9c0,1.7,0.5,3,1.5,4.2l-1,2.5C0.5,13.8,0.6,14,0.8,14h0.1l3.7-0.6C5.4,13.7,6,13.8,7,13.8h0.1 c3.8,0,6.8-3.1,6.8-6.9C13.9,3.1,10.9,0,7.1,0z M3.2,7.8C2.8,7.8,2.4,7.4,2.4,7s0.4-0.8,0.8-0.8S4,6.6,4,7C4,7.5,3.7,7.8,3.2,7.8z M7.2,7.8C6.7,7.8,6.4,7.4,6.4,7s0.4-0.8,0.8-0.8S8,6.6,8,7C7.9,7.5,7.6,7.8,7.2,7.8z M11,7.8c-0.4,0-0.8-0.4-0.8-0.8 s0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8C11.8,7.5,11.5,7.8,11,7.8z"}))},Component:ce}),Object(j.a)(ye,ke.a.MIC,{Icon:function(e){return Object(u.jsx)("svg",pe({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerMic",focusable:"false"},e),Object(u.jsx)("path",{id:"Shape-Copy-3",d:"M7.1,0C4.5,0,2.5,2,2.5,4.5V6H2.3c-1.1,0-2,0.9-2,2v1.2c0,1.1,0.9,2,2,2h1.5c0.3,0,0.5-0.2,0.5-0.5V6.4 C4.3,6.2,4.1,6,3.9,6H3.4V4.5c0-2,1.6-3.6,3.7-3.6s3.7,1.6,3.7,3.6V6h-0.5C9.9,6,9.8,6.2,9.8,6.4v4.2c0,0.3,0.2,0.5,0.5,0.5h0.4 c-0.1,0.3-0.3,0.5-0.6,0.7c-0.4,0.3-1,0.5-1.9,0.6c-0.2-0.4-0.6-0.7-1.1-0.7c-0.7,0-1.2,0.5-1.2,1.2C5.8,13.5,6.3,14,7,14 c0.5,0,0.9-0.3,1.1-0.8c1-0.1,1.9-0.3,2.4-0.8c0.5-0.4,0.8-0.9,0.9-1.4h0.2c1.1,0,2-0.9,2-2V7.9c0-1.1-0.9-2-2-2h-0.2V4.5 C11.6,2,9.6,0,7.1,0z"}))},Component:ce}),Object(j.a)(ye,ke.a.ELLIPSIS,{Icon:function(e){return Object(u.jsx)("svg",be({viewBox:"0 0 32 32","data-icon-name":"ChatTriggerEllipsis",focusable:"false"},e),Object(u.jsx)("path",{id:"Combined-Shape",fillRule:"evenodd",clipRule:"evenodd",d:"M28.28387,3.51813C30.33623,3.51813,32,5.1819,32,7.23426 v14.45782c0,2.05236-1.66377,3.71613-3.71613,3.71613l-1.29445-0.00002l0.61046,3.88583 c0.02475,0.1576,0.00841,0.31823-0.04651,0.46661l-0.04838,0.10876c-0.21984,0.41951-0.71518,0.60119-1.14754,0.43933 l-0.10658-0.04768l-9.26093-4.85285L3.71613,25.40821C1.66377,25.40821,0,23.74444,0,21.69208V7.23426 C0,5.1819,1.66377,3.51813,3.71613,3.51813H28.28387z M16,11.3664c-1.7103,0-3.09677,1.38647-3.09677,3.09677 S14.2897,17.55995,16,17.55995s3.09678-1.38647,3.09678-3.09678S17.7103,11.3664,16,11.3664z M7.52941,12.639 c-1.03959,0-1.88235,0.81671-1.88235,1.82417s0.84276,1.82417,1.88235,1.82417s1.88235-0.81671,1.88235-1.82417 S8.56901,12.639,7.52941,12.639z M24.47059,12.639c-1.0396,0-1.88235,0.81671-1.88235,1.82417s0.84276,1.82417,1.88235,1.82417 c1.03959,0,1.88235-0.81671,1.88235-1.82417S25.51018,12.639,24.47059,12.639z"}))},Component:ce}),Object(j.a)(ye,ke.a.ELLIPSIS_STROKE,{Icon:function(e){return Object(u.jsx)("svg",de({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerEllipsisStroke",focusable:"false"},e),Object(u.jsx)("path",{d:"M2.4,13.8c-0.2-0.1-0.3-0.2-0.3-0.4v-2.6H1.7C0.7,10.8,0,10,0,9.1V1.9c0-1,0.8-1.7,1.7-1.7h10.5c1,0,1.7,0.8,1.7,1.7v7.2 c0,1-0.8,1.7-1.7,1.7H5.7l-2.8,2.8C2.7,13.8,2.5,13.9,2.4,13.8L2.4,13.8z M0.8,1.9v7.2c0,0.5,0.4,0.9,0.9,0.9h0.8 C2.8,10,3,10.2,3,10.5v2l2.2-2.3C5.3,10.1,5.4,10,5.5,10h6.8c0.5,0,0.9-0.4,0.9-0.9V1.9c0-0.5-0.4-0.9-0.9-0.9H1.7 C1.2,1,0.8,1.4,0.8,1.9z M6.2,5.5C6.2,5,6.6,4.7,7,4.7c0.5,0,0.8,0.4,0.8,0.8C7.8,6,7.5,6.3,7,6.3S6.2,6,6.2,5.5L6.2,5.5z M9.3,5.5 c0-0.5,0.4-0.8,0.8-0.8c0.5,0,0.8,0.4,0.8,0.8c0,0.5-0.3,0.8-0.8,0.8S9.3,6,9.3,5.5L9.3,5.5z M3,5.5C3,5,3.4,4.7,3.8,4.7 c0.5,0,0.8,0.4,0.8,0.8c0,0.5-0.4,0.8-0.8,0.8l0,0C3.4,6.3,3,6,3,5.5L3,5.5z"}))},Component:ce}),Object(j.a)(ye,ke.a.CROSS,{Icon:function(e){return Object(u.jsx)("svg",Oe({viewBox:"0 0 14 14","data-icon-name":"Close",focusable:"false"},e),Object(u.jsx)("path",{d:"M12.8 12.7c.3-.3.3-.8 0-1L8 7l4.6-4.7c.3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0L6.9 6 2.3 1.3C2 1 1.5 1 1.2 1.3s-.3.7 0 1L5.9 7l-4.7 4.7c-.3.3-.3.8 0 1.1.3.3.8.3 1 0l4.7-4.7 4.7 4.6c.3.3.8.3 1.2 0z"}))},Component:te}),Object(j.a)(ye,ke.a.CHEVRON,{Icon:ve.a,Component:te}),ye),Se=o.a.memo((function(e){var t=e.className,n=e.minimizedIconClassName,r=e.maximizedIconClassName,s=e.triggerIconName,l=void 0===s?ke.a.BUBBLE:s,f=e.label,b=e.innerLabelRef,d=e.mode,p=void 0===d?Ee:d,v=e.closeIconName,j=void 0===v?ke.a.CROSS:v,h=e.onLoad,g=void 0===h?W.a:h,m=Te[l],x=m.Icon,y=m.Component,I=Te[j],w=I.Icon,k=I.Component,E=Object(i.b)(),C=Object(c.useState)(!1),T=Object(a.a)(C,2),S=T[0],_=T[1],A=Object(c.useMemo)((function(){return Ie(E)}),[E]),N=Object(oe.a)(),R=Object(ie.a)(),P=p===Ee,L=!O()(A)&&P&&!S,M=!N,D=M||P;Object(c.useEffect)((function(){return L||g(!0),),[g,L]);var U=Object(c.useCallback)((function(){_(!0)}),[]);return L?Object(u.jsx)(we,{className:t,theme:E,customTriggerIconUrls:A,onLoad:g,onError:U}):Object(u.jsx)(X,{className:t,theme:E},Object(u.jsx)(o.a.Fragment,null,M&&Object(u.jsx)(ne,{className:"center-x-y ".concat(r),css:P?Z:J},Object(u.jsx)(k,{alt:w})),D&&Object(u.jsx)(re,{className:"center-x-y ".concat(n),css:P?ee:$,"data-testid":"default-trigger"},Object(u.jsx)(y,{alt:x}),f?Object(u.jsx)(ae,{ref:b,className:"m-b-0",direction:R,isPhone:N,theme:E},f):null)))})),_e=n(430),Ae=n(374),Ne=n(698),Re=n(377),Pe=n(401),Le=n(413),Me=n(370),De=n(394),Ue=n(571),Fe=n(519),Be=n(440),Ge=n(81),Ve=n(134),He=n(395),ze=n(380),We=n(503),qe=n(140),Ke=function(e){return Object(We.g)(Object(ze.b)(e))},Ye=n(506),Xe=n(382),Qe=n(410),Ze=n(439),$e=n(477),Je=et=function(){var e;!function(){var e=Object(Re.a)(He.h),t=Object(De.a)(),n=Fe.a.getNoDisplayConfigFilter(t),r=Object(Ue.a)(n,{defaultValue:!1,logOnSuccess:!0}).hasPassed,a=Object(l.d)(Ke);Object(c.useEffect)((function(){!O()(n)&&a&&(r&&Object(qe.a)("Sprinklr Chat hidden by display criteria"),e({value:r}))}),[n,a,r])}();var t=Object(Re.a)(He.c),n=null===(e=Object(Ae.a)().trigger)||void 0===e?void 0:e.hideTimeout,r=Object(l.c)(),a=Object(c.useRef)(null),o=Object(c.useRef)(!n),i=Object(l.d)(Je),s=Object(l.d)(Xe.h),u=Object(Qe.d)(s),f=Object(Le.a)();o.current||(o.current=!0,Object(Ye.c)(u).then((function(e){e&&Date.now()<=e?a.current=window.setTimeout((function(){r({type:Ze.n,payload:{}})}),e-Date.now()):r({type:Ze.n,payload:{}})})));var b=Object(c.useCallback)(Object(Ve.a)(Object(Ge.a)().mark((function e(){return Object(Ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,Object(Ye.m)(u,Date.now()+n);case 3:a.current=window.setTimeout((function(){r({type:Ze.n,payload:{}})}),n);case 4:f({action:$e.a.CHAT_TRIGGER_REMOVED}),t();case 6:case"end":return e.stop()}}),e)}))),[n,t,r,u]);return Object(c.useEffect)((function(){i||(Object(Ye.j)(u),a.current&&(window.clearTimeout(a.current),a.current=null))}),[i]),b},tt=n(371),nt=n(387),rt=n(511),at=n(372),ct=function(e){return Object(We.g)(Object(ze.b)(e))},ot=function(e){return Object(We.f)(Object(ze.b)(e))},it=function(e){return Object(ze.d)(e)},st=ut=o.a.memo(Object(f.h)((function(e){var t=Object(c.useRef)(null),n=Object(tt.a)().direction,r=e.showTrigger,o=e.handleShowTriggerStateChange,f=Object(Ae.a)(),b=Object(i.b)(),v=Object(Me.a)(),j=Object(c.useRef)(),h=Object(c.useRef)(null),g=Object(Pe.a)()(Be.a.getTriggerConfig(f),"label"),m=et(),y=Object(c.useState)(!0),I=Object(a.a)(y,2),w=I[0],E=I[1],C=Object(c.useState)(g),T=Object(a.a)(C,2),_=T[0],A=T[1],N=Object(c.useState)(!1),R=Object(a.a)(N,2),D=R[0],z=R[1],W=Object(c.useState)(0),q=Object(a.a)(W,2),K=q[0],Y=q[1],X=Object(l.d)(ct),Q=Object(l.d)(ot),Z=Object(l.d)(it),$=Object(Re.a)(He.g),J=Object(Le.a)(),ee=Be.a.getAnimationInfoOfTrigger(f),te=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(De.a)(),i=Fe.a.getTriggerAnimationConfigFilter(o),s=Object(Ue.a)(i,{defaultValue:!1,logOnSuccess:!0}).hasPassed,u=Be.a.getAnimationInfoOfTrigger(Fe.a.getCustomizationConfig(o)),l=x()(u,"effect");return Object(c.useEffect)((function(){!O()(i)&&l&&r(s)}),[i,l,s]),{showChatTriggerAnimation:n}}(),ne=te.showChatTriggerAnimation,re=d()(Q),ae=d()(r),ce=d()(_);Object(c.useEffect)((function(){(re||!ae)&&!(Q||!r)&&J({action:$e.a.TRIGGER_VISIBLE})}),[r,ae,Q,re,J]),Object(c.useEffect)((function(){return r&&!v&&(j.current=window.requestAnimationFrame(()),function(){j.current&&window.cancelAnimationFrame(j.current)}}),[r,v]),Object(c.useEffect)((function(){var e=v?"":g;ce!==e&&A(e)}),[v,g,ce]);var oe=e.intl.formatMessage,ie=Be.a.canTriggerBeManuallyRemoved(f)&&X&&O()(Z),se=Object(c.useMemo)((function(){return Object(k.f)("trigger.icon.type")({theme:b})}),[b]),ue=Object(c.useMemo)((function(){return Object(k.f)("trigger.closeIcon.type")({theme:b})}),[b]),le=Object(Ne.a)(),fe=Object(c.useMemo)((function(){return Ie(b)}),[b]),be=Object(c.useCallback)((function(){$(!X),X&&J(Object(s.a)({action:$e.a.CHAT_TRIGGER_CLICKED},(null===fe||void 0===fe?void 0:fe.length)>1?{additional:{triggerImageUrl:je}}:{}))}),[X,$]),de=Object(c.useCallback)((function(){r&&Y(st(h.current)),le(t)}),[r,le]),pe=Object(c.useCallback)((,[]),ve=Object(c.useCallback)((function(e){o(e),Y(st(h.current))}),[]),Oe=Object(c.useCallback)((function(e){E(e)}),[]),he=Q||v&&!X,ge=oe(X?nt.a.openChat:nt.a.closeChat),me=Object(c.useRef)(),xe=function(){me.current&&window.clearTimeout(me.current)};return he?null:Object(u.jsx)(U,{enableTriggerHideIcon:ie,applyRemoveIconStyles:w,"data-testid":"triggerContainer"},Object(u.jsx)(_e.a,{component:F,showTrigger:r,showLabel:X&&!!_,css:ne?S({triggerAnimationInfo:ee,theme:b}):"",labelWidth:K,enableTriggerWidthTransition:D,theme:b,className:"spr-chat__trigger-box spr-live-chat-frame",id:"spr-chat__trigger-button",onClick:be,ariaLabel:ge,onTouchStart:function(){Oe(!1),me.current=window.setTimeout((,700)},onTouchEnd:xe,onTouchCancel:xe,onContextMenu:,Object(u.jsx)(B,{"aria-label":oe(nt.a.liveChat),name:"spr-chat__trigger-frame",contentDidMount:de,shouldHideLocaleLoader:!0,title:oe(nt.a.liveChat)},Object(u.jsx)(u.Global,{styles:G(b,{isMinimized:X})}),Object(u.jsx)("div",{className:"full-height full-width",ref:t},Object(u.jsx)(p.FrameContextConsumer,null,(function(e){var t=e.window;return Object(u.jsx)(H.a,{window:t,onResize:pe,resizeRefs:h},(function(e){return Object(u.jsx)(Se,{className:"full-width",label:_,triggerIconName:se,closeIconName:ue,mode:X?Ee:Ce,onLoad:ve,innerLabelRef:e,minimizedIconClassName:"spa",maximizedIconClassName:"spa"})}))})))),Object(u.jsx)(V,null)),ie&&r&&Object(u.jsx)(P,{onClick:m,"data-testid":"triggerCloseIconContainer",direction:n},Object(u.jsx)(L,null,Object(u.jsx)(M,{alt:rt.a,name:at.b.CLOSE}))))}))),lt=n(692),ft=n(904);var bt=Object(g.a)("div",{target:"e5qlxka0"})("display:flex;background:transparent;overflow:hidden;border-radius:",(function(e){return Object(k.a)("trigger.overlayIconButton.borderRadius","".concat(Object(k.f)("trigger.overlayIconButton.button.height")(e)/2,"px"))(e)}),";position:absolute;bottom:",(function(e){return N(e)}),"px;",(function(e){return R(e)}),";height:",Object(k.f)("trigger.overlayIconButton.button.height"),"px;width:",Object(k.f)("trigger.overlayIconButton.button.width"),"px;transform:translatez(",Object(k.f)("frame.translateZ"),"px);z-index:",Object(k.f)("frame.zIndex"),";box-shadow:var(--spr-lc-bxs-3);"),dt=Object(g.a)(I.a,{target:"e5qlxka1"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),pt=Object(g.a)(ft.a,{target:"e5qlxka2"})("font-size:",Object(k.f)("trigger.overlayIconButton.fontSize"),";height:",Object(k.f)("trigger.overlayIconButton.button.height"),"px;width:",Object(k.f)("trigger.overlayIconButton.button.width"),"px;line-height:",Object(k.f)("trigger.overlayIconButton.button.height"),"px;border-radius:",(function(e){return Object(k.a)("trigger.overlayIconButton.borderRadius","".concat(Object(k.f)("trigger.overlayIconButton.button.height")(e)/2,"px"))(e)}),";"),vt="spr-chat-proactive-box-anim",Ot=Object(u.css)(".",vt,"-enter{opacity:0;}.",vt,"-enter.",vt,"-enter-active{opacity:1;transition:opacity 0.3s ease,transform 0.15s ease;}.",vt,"-enter-done,.",vt,"-appear{}.",vt,"-exit{opacity:1;}.",vt,"-exit.",vt,"-exit-active{opacity:0;transition:opacity 0s ease,transform 0s ease;}"),jt=Object(g.a)("div",{target:"e5qlxka3"})({name:"79elbk",styles:"position:relative;"}),ht=n(627),gt=n(699),mt=n(386),xt=Object(lt.a)((function(e){return Object(We.g)(Object(ze.b)(e))}),(function(e){return Object(We.f)(Object(ze.b)(e))}),(function(e){return Object(mt.x)(Object(mt.q)(Object(ze.c)(e)))}),(),yt=o.a.memo(Object(f.h)((function(e){var t=Object(l.d)(xt),n=t.isMinimized,r=t.totalUnreadCount,a=t.isChatTriggerHidden,c=Object(i.b)(),s=Object(tt.a)().direction,f=e.isTriggerLoaded,b=e.intl.formatMessage;return a?null:Object(u.jsx)(o.a.Fragment,null,Object(u.jsx)(u.Global,{styles:Ot}),Object(u.jsx)(gt.CSSTransition,{in:n,timeout:{enter:300,exit:0},classNames:vt,mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(u.jsx)(jt,{className:"notification-container"},Object(u.jsx)(ht.a,{unreadCount:r,shouldPlay:!0}),r>0&&f?Object(u.jsx)(bt,{className:"spr-chat__notification-box spr-live-chat-frame","data-testid":"notification-frame-container",theme:c,direction:s},Object(u.jsx)(dt,{name:"spr-chat__notification-frame","aria-label":b(nt.a.liveChatNotification),title:b(nt.a.liveChatNotification)},Object(u.jsx)(pt,{className:"center-x-y",count:r}))):null)))}))),It=function(e){return Object(k.f)("trigger.xPadding",20)({theme:e})},wt=function(e){return Object(k.f)("trigger.yPadding",20)({theme:e})},kt=Object(g.a)("div",{target:"ezg1tqb0"})("position:fixed;bottom:",(,"px;",(function(e){return function(e){var t=Object(k.f)("trigger.align","right")({theme:e}),n=It(e);return"".concat(t,": ").concat(n,"px")}(e.theme)}),";z-index:",(function(e){return Object(k.f)("frame.zIndex")(e)}),";transform:translatez(",(function(e){return Object(k.f)("frame.translateZ")(e)}),"px);"),Et=function(){var e=Object(i.b)(),t=Object(c.useState)(!1),n=Object(a.a)(t,2),r=n[0],o=n[1];return Object(u.jsx)(kt,{theme:e},Object(u.jsx)(ut,{showTrigger:r,handleShowTriggerStateChange:o}),Object(u.jsx)(yt,{isTriggerLoaded:r}))}},1091:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return _}));var r=n(13),a=n(81),c=n(134),o=(n(127),n(419),n(54),n(138)),i=n.n(o),s=n(1629),u=n.n(s),l=n(21),f=n.n(l),b=n(84),d=n.n(b),p=n(543),v=n.n(p),O=n(433),j=n(11),h=n(443),g="x-chat-token",m=function(e){var t=e.data,n=e.url,r="";return d()(t)||i()(t,(function(e,t){t!==g&&(r+="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(f()(e)?JSON.stringify(e):e),"&"))})),r?"".concat(n,"?").concat(r.slice(0,-1)):n};function x(e){var t=e.url,n=e.data,r=e.method,a=void 0===r?h.a.POST:r,c=e.contentType,o=v()(),i=document.createElement("form"),s=document.body,l=m({data:n,url:t});return i.setAttribute("id","spr-chat-download-form-".concat(o)),i.setAttribute("target","_top"),i.setAttribute("action",l),i.setAttribute("method",a),i.style.display="none",c&&(i.enctype=c),null!==n&&void 0!==n&&n[g]&&(i.innerHTML='<input type="hidden" id="'.concat(g,'" name="').concat(g,'" value="').concat(u()(n[g]),'">')),s.appendChild(i),i}var y=function I(e){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(Object(a.a)().mark((function e(t){var n,c,o,i,s,u,l,f,b,d,p,v,h;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(j.a)(),c=n.webview,o=t,!c){e.next=19;break}return i=t.url,s=t.data,u=void 0===s?{}:s,l=m({url:i,data:Object(r.a)(Object(r.a)({},u),{},{generateUrl:!0})}),e.next=7,O.a.post(l);case 7:f=e.sent,b=f.data,d=b.fileName,p=b.url,(v=document.createElement("a")).setAttribute("href","livechat-app:url=".concat(p,"&fileName=").concat(d)),v.style.display="none",document.body.appendChild(v),v.click(),setTimeout((function(){return y(v)}),3e4),e.next=22;break;case 19:(h=x(o)).submit(),setTimeout((function(){return y(h)}),3e4);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(506),E=n(493),C=n(474);function T(e){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://prod2-live-chat.sprinklr.com","/api/livechat/conversation/downloadChatTranscript"),e.next=3,Object(k.a)(E.a.getAppId(Object(j.a)()));case 3:r=e.sent,c=Object(C.f)(),I({url:n,data:{timeZone:c,"x-chat-token":r,conversationId:t}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(Object(a.a)().mark((function e(t){var n,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://prod2-live-chat.sprinklr.com","/api/livechat/conversation/downloadAttachment"),e.next=3,Object(k.a)(E.a.getAppId(Object(j.a)()));case 3:c=e.sent,o=Object(C.f)(),I({url:n,data:Object(r.a)({timeZone:o,"x-chat-token":c},t)});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1093:function(e,t,n){"use strict";var r=n(379),a=(n(127),n(357)),c=n.n(a),o=n(504),i=n.n(o),s=n(653),u=n(408),l=n(358),f=function(e){var t=Object(s.a)(e.window,e.onResize),n=Object(a.useMemo)((function(){return[].concat(Object(r.a)(i()(e.resizeRefs||[])),[t])}),[t,e.resizeRefs]),o=u.a.apply(void 0,Object(r.a)(n));return Object(l.jsx)(c.a.Fragment,null,e.children(o))};t.a=f},1128:1129:1157:function(e,t,n){"use strict";var r=n(128),a=n(357),c=n(833),o=n.n(c),i=n(8),s=n.n(i),u=n(84),l=n.n(u),f=n(135),b=n.n(f),d=n(504),p=n.n(d),v=n(943),O=n.n(v),j=n(944),h=n.n(j),g=n(241),m=n.n(g),x=n(56),y=n.n(x),I=n(402),w=n(1439),k=n(140);t.a=function(e,t){var n=Object(a.useRef)(!1);n.current=s()(e);var c=t.getValue,i=t.defaultValue,u=void 0===i||i,f=t.logOnFailure,d=void 0!==f&&f,v=t.logOnSuccess,j=void 0!==v&&v,g=t.subscribe,x=Object(a.useState)(0),E=Object(r.a)(x,2),C=E[0],T=E[1],S=Object(a.useRef)([void 0]),_=Object(a.useRef)(null);Object(a.useEffect)((function(){return function(){_.current&&b()(_.current,(function(e){return e&&e.clear()}))}}),[]),_.current=Object(a.useMemo)((function(){return l()(e)?null:(_.current&&b()(_.current,(),S.current=n.current?O()(h()(e),m()(void 0)):[],b()(p()(e),(function(e,t){if(y()(e))return null;var n=function(e){S.current[t]=I.a.getField(e),T(()};return w.a.createFilterAction(e,{subscribe:function(e,t){return g(e,o()(n,e),t)},getFilterBuilder:w.a.createFilterAction})})))}),[e,g,T]);var A=Object(a.useMemo)((function(){return _.current?b()(_.current,(function(e,t){return e?(Object(k.a)("--- Filter ".concat(t," match start ---"),Date.now()),e.matches(c(),{logOnFailure:d,logOnSuccess:j})):!!u})):[!!u]}),[e,c,u,C]);return Object(a.useMemo)((function(){return n.current?b()(A,():{hasPassed:!!A[0],changeSource:S.current[0]}}),[A,S.current])}},1158:function(e,t,n){"use strict";n(7),n(82),n(85),n(19),n(203),n(55);var r=n(56),a=n.n(r),c=t.a=function(e,t){if(a()(t))return!1;try{return new RegExp("^".concat(e.split(/\*+/).map(c).join(".*"),"$")).test(t)}catch(n){return console.warn("Wrong wild card string in filter"),!1}}},1159:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(128),a=n(27),c=n(379),o=(n(127),n(357)),i=n.n(o),s=n(438),u=n.n(s),l=n(481),f=n.n(l),b=n(944),d=n.n(b),p=n(685),v=n(358),O=i.a.createContext({}),j=Object(o.memo)((function(e){var t=Object(p.a)(),n=t.getValue,i=t.subscribe,s=n(),l=Object(o.useState)((function(){return{pagesMetaData:Object(a.a)({},s,[{startTime:Date.now(),endTime:void 0}]),currentPageUrl:s}})),b=Object(r.a)(l,2),j=b[0],h=b[1];return Object(o.useEffect)((function(){var e=i("page-context-subscriber",(function(e){var t=e.currentUrl,n=e.previousUrl;h((function(e){return function(e){var t,n=e.prevPageContextValue,r=e.previousUrl,o=e.currentUrl,i=Date.now(),s=n.pagesMetaData,l=f()(u()(s[r]),{endTime:{$set:i}});return f()(n,{pagesMetaData:(t={},Object(a.a)(t,r,{$splice:[[d()(s[r])-1,1,l]]}),Object(a.a)(t,o,{$set:[].concat(Object(c.a)(s[o]||[]),[{startTime:i,endTime:void 0}])}),t),currentPageUrl:{$set:o}})}({prevPageContextValue:e,previousUrl:n,currentUrl:t})}))}));return function(){e()}}),[]),Object(v.jsx)(O.Provider,{value:j},e.children)}));t.b=O},1160:function(e,t,n){"use strict";var r=n(368),a=n(367),c=(n(12),n(130),n(441),Object(r.a)((function e(t,n){var r,c=this;if(Object(a.a)(this,e),this.poll=function(){c.isActive&&(c.timeoutId=window.setTimeout((function(){c.handler().finally((function(){c.enableBackOff&&(c.interval+=c.baseInterval),c.poll()}))}),c.interval))},this.start=function(){c.isActive||(c.isActive=!0,c.timeoutId=window.setTimeout((,0))},this.stop=function(){c.isActive=!1,c.timeoutId&&(window.clearTimeout(c.timeoutId),c.timeoutId=void 0),c.enableBackOff&&(c.interval=c.baseInterval)},!t)throw new Error("No poll handler defined");this.handler=(r=t,function(){return r().catch((function(){}))}),this.baseInterval=n.pollInterval,this.enableBackOff=n.enableBackOff,this.interval=n.pollInterval,this.timeoutId=void 0,this.isActive=!1})));t.a=c},1161:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1162),a=/^\/logout$/,c=function(e){var t=e.searchParams,n=e.callback;Object(r.a)({route:a,searchParams:t,callback:n})}},1162:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(7),n(139),n(141),n(210);var r=n(357),a=n(445),c=n(651),o=function(e){var t=e.route,n=e.searchParams,o=e.callback,i=Object(a.a)(),s=Object(c.a)(o);Object(r.useEffect)((function(){var e=i.listen((function(e){!t.test(e.pathname)||n&&!e.search.includes(n)||s.current()}));return function(){e()}}),[])}},1163:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(13),a=n(128),c=n(357),o=n.n(c),i=n(358),s=o.a.createContext(void 0),u=Object(c.memo)((function(e){var t=e.children,n=e.history,o=Object(c.useState)(n),u=Object(a.a)(o,2),l=u[0],f=u[1];return Object(c.useEffect)((function(){var e=n.listen((function(){f(Object(r.a)({},n))}));return function(){return e()}}),[]),Object(i.jsx)(s.Provider,{value:l},t)}))},1164:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(27),a=n(13),c=n(357),o=n(135),i=n.n(o),s=n(398),u=n.n(s),l=n(596),f=n.n(l),b=n(1165),d=n(402),p=function(){var e=Object(b.b)(b.a.VERTICAL),t=Object(c.useRef)({}),n=Object(c.useRef)(e);n.current=e,f()((function(){i()(t.current,(function(e){e()}))}),[e.scrollDepth,e.scrollPercent]);var o=Object(c.useCallback)((function(e,n){var c=d.a.getId(e);return t.current=Object(a.a)(Object(a.a)({},t.current),{},Object(r.a)({},c,n)),function(){t.current=u()(t.current,c)}}),[]);return{getValue:Object(c.useCallback)((function(){return{scrollDepth:n.current.scrollDepth,scrollPercent:n.current.scrollPercent}}),[]),subscribe:o}}},1165:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(128),a=n(357),c=n(549),o=n.n(c),i=n(392),s=n.n(i),u=n(415),l={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},f=function(e){var t,n,r=e.clientWindow,a=e.scrollDirection,c=r.document;if(a===l.HORIZONTAL){var o=c.documentElement.scrollWidth;t=c.documentElement.scrollLeft+c.documentElement.clientWidth,n=o?Math.round(t/o*100):100}else{var i=c.documentElement.scrollHeight;t=c.documentElement.scrollTop+c.documentElement.clientHeight,n=i?Math.round(t/i*100):100}return{scrollDepth:t,scrollPercent:n}},b=function(e){var t=Object(u.b)(),n=Object(a.useState)((function(){return function(e){var t=e.clientWindow,n=e.scrollDirection;return Object(u.c)(t)?f({clientWindow:t,scrollDirection:n}):{scrollDepth:0,scrollPercent:0}}({clientWindow:t,scrollDirection:e})})),c=Object(r.a)(n,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){if(Object(u.c)(t)){var n=o()((function(){var n=f({clientWindow:t,scrollDirection:e});l(n)}),1e3);return t.addEventListener("scroll",n),return s.a}),[]),i}},1166:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(27),a=n(13),c=n(357),o=n(135),i=n.n(o),s=n(398),u=n.n(s),l=n(596),f=n.n(l),b=n(1165),d=n(402),p=function(){var e=Object(b.b)(b.a.HORIZONTAL),t=Object(c.useRef)({}),n=Object(c.useRef)(e);n.current=e,f()((function(){i()(t.current,(function(e){e()}))}),[e.scrollDepth,e.scrollPercent]);var o=Object(c.useCallback)((function(e,n){var c=d.a.getId(e);return t.current=Object(a.a)(Object(a.a)({},t.current),{},Object(r.a)({},c,n)),function(){t.current=u()(t.current,c)}}),[]);return{getValue:Object(c.useCallback)((,[]),subscribe:o}}},1167:function(e,t,n){"use strict";var r=n(357),a=n.n(r),c=n(392),o=n.n(c),i=a.a.createContext([null,o.a]);t.a=i},1168:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(53),n(12),n(130),n(129),n(80);var r=n(383),a=Object(r.a)((function(){return Promise.all([n.e(0),n.e(28)]).then(n.bind(null,2019))}))},1170:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(359),a=n(530),c=n(364),o=Object(r.a)(a.a,{target:"e1yw42fw0"})("position:absolute;top:40px;height:20px;width:20px;",(function(e){return e.isPhone&&"\n    height: 14px;\n    width: 14px;\n    top: 20px;\n   "}),";padding:0;&:focus{",c.h,";}&:active{",c.f,";}",c.m,"{&:focus{",c.f,";}&:active{",c.h,";}}")},1171:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(81),a=n(134),c=n(229),o=n.n(c),i=n(433),s=o()(function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(t);case 2:return n=e.sent,a=n.data,e.abrupt("return",(new DOMParser).parseFromString(a,"image/svg+xml"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},1173:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(359),a=n(446),c=n(601),o=Object(r.a)("div",{target:"e1kwqiqk0"})("width:100%;position:relative;height:",(function(e){return Object(a.a)(Object(c.c)(e))}),";")},1174:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));var r=n(357),a=n.n(r),c=n(392),o=n.n(c),i=n(948),s=n(358),u={debug:o.a,info:o.a,error:o.a,warning:o.a,cleanup:o.a},l=a.a.createContext(u),f=function(e){var t=e.videoConversationId,n=e.conversationId,r=e.isAudioCall,a=e.children,c=Object(i.a)({videoConversationId:t,conversationId:n,isAudioCall:r});return Object(s.jsx)(l.Provider,{value:c},a)}},1175:function(e,t,n){"use strict";var r=n(128),a=n(357),c=n(365),o=n(421),i=n(602),s=n(382),u=n(410),l=n(443),f=n(822),b=(new o.a).setUrl("/video-chat/conversation/log/event").setType(l.a.POST).build();t.a=function(e){var t=e.videoConversationId,n=e.conversationId,o=Object(i.a)(b,{ignoreResults:!0}),l=Object(r.a)(o,1)[0],d=Object(c.d)(s.h),p=Object(u.d)(d),v=Object(a.useCallback)((function(e){var n=e.eventType,r=e.activityAdditionalDetails;return{videoConversationId:t,loggerSnUserId:p,eventType:n,loggerSnType:"SPRINKLR_LIVE_CHAT",offsetTime:0,activityAdditionalDetails:r}}),[n,t,p]);return Object(a.useMemo)((function(){return new f.a(l,{adapter:v,skip:!t})}),[l,v,t])}},1176:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f}));var r=n(13),a=(n(54),n(127),n(361)),c=n(626),o=n(1068),i=200,s=function(e){var t=e.theme,n=e.triggerWidth,r=e.triggerHeight,o=e.triggerXpadding,i=e.triggerYpadding,s=e.isTriggerHiddenWhenMaximised,u=Object(a.f)("frame.align")({theme:t}),l=Object(a.f)("frame.sXMargin")({theme:t}),f=Object(a.f)("frame.sYMargin")({theme:t}),b="L"===u.slice(-1)?c.f.LEFT:c.f.RIGHT,d=function(e){var t=e.alignType,n=e.frameSXMargin,r=e.triggerWidth,a=e.triggerXpadding;switch(t){case c.b.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT:case c.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT:case c.b.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT:case c.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT:return r+a+n;case c.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT:case c.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT:default:return a+n}}({alignType:u,frameSXMargin:l,triggerWidth:n,triggerXpadding:o}),p=function(e){var t=e.isTriggerHiddenWhenMaximised,n=e.alignType,r=e.frameSYMargin,a=e.triggerHeight,o=e.triggerYpadding;return t?o:n===c.b.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT||n===c.b.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT?o+r:a+o+r}({isTriggerHiddenWhenMaximised:s,alignType:u,frameSYMargin:f,triggerHeight:r,triggerYpadding:i});return{xEdgeToAlign:b,xOffset:d,bottomOffset:p}},u=function(e){var t=e.bottomOffset,n=e.xEdgeToAlign,r=e.xOffset,c=e.theme,o=e.isMaximized,i="calc(100% - ".concat(t,"px)");return"\n    bottom: ".concat(t,"px;\n    height: ").concat(i,";\n    max-height: ").concat(o?i:Object(a.f)("frame.height")({theme:c}),";\n    ").concat(n,": ").concat(r,"px;\n    max-width: ","calc(100% - ".concat(r,"px)"),";\n    min-width: 200px;\n    width: ").concat("".concat(o?Object(a.f)("frame.maximizedWidth")({theme:c}):Object(a.f)("frame.width")({theme:c}),"px"),";\n    ")},l=function(e){var t=e.isTriggerHiddenWhenMaximised,n=e.theme,c=e.isMaximized;if(e.isPhone)return"\n    height: 100%;\n    width: 100vw;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    max-height: 100vh;\n    max-width: 100vw;\n    min-width: 100vw;\n  ";var i=Object(a.f)("trigger.size")({theme:n}),l=s({theme:n,isTriggerHiddenWhenMaximised:t,triggerHeight:i,triggerWidth:i,triggerXpadding:Object(o.c)(n),triggerYpadding:Object(o.b)(n)});return u(Object(r.a)(Object(r.a)({},l),{},{theme:n,isMaximized:c}))},f=function(e){var t=e.isTriggerHiddenWhenMaximised,n=e.theme,r=e.isMaximized,o=e.isPhone,i=e.customTriggerPosition,l="L"===Object(a.f)("frame.align")({theme:n}).slice(-1)?c.f.LEFT:c.f.RIGHT,f=s({theme:n,isTriggerHiddenWhenMaximised:t,triggerHeight:i.height,triggerWidth:i.width,triggerXpadding:"left"===l?i.left:i.right,triggerYpadding:i.bottom}),b=f.xOffset,d=f.bottomOffset;if(o){var p="left"===l?"right":"left";return"\n      top: 0;\n      bottom: ".concat(d,"px;\n      ").concat(l,": ").concat(b,"px;\n      ").concat(p,": 0;\n      width: calc(100vw - ").concat(b,"px);\n      height: calc(100% - ").concat(d,"px);\n      min-width: calc(100vw - ").concat(b,"px);\n      max-width:  100vh;\n      max-height: 100vh;\n    ")}return u({xEdgeToAlign:l,xOffset:b,bottomOffset:d,theme:n,isMaximized:r})}},1177:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(357),a=n.n(r),c=n(358),o=a.a.createContext("MOBILE");t.b=function(e){return Object(c.jsx)(o.Provider,{value:e.device},e.children)}},1178:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(357),a=n.n(r),c=n(358),o=a.a.createContext("ltr");t.b=,1179:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(128),a=(n(127),n(357)),c=n(494),o=n.n(c),i=n(392),s=n.n(i),u=n(602),l=n(822),f=n(443),b=n(421),d=n(11),p=n(474),v=(new b.a).setUrl("/livechat/logging/log").setType(f.a.POST).build(),O=function(e){var t=e.message,n=e.userId,r=Object(d.a)().appId,a="UI_".concat(r,"_").concat(n,"_").concat(o.a.v4());return{message:t,timeStamp:Date.now(),clientId:a,url:Object(p.b)()}},j={debug:s.a,info:s.a,error:s.a,warning:s.a,cleanup:s.a},h=function(e){var t=e.category,n=e.batch,c=e.log,o=e.skip,i=e.adapter,s=e.userId,f=Object(u.a)(v,{ignoreResults:!0}),b=Object(r.a)(f,1)[0],d=Object(a.useRef)(j);return d.current=Object(a.useMemo)((function(){return new l.a(c||b,{batch:n,skip:o,adapter:i||O})}),[b,O]),Object(a.useEffect)((,[]),Object(a.useMemo)((function(){return{debug:function(e){return d.current.debug({message:e,category:t,userId:s})},error:function(e){return d.current.error({message:e,category:t,userId:s})},info:function(e){return d.current.info({message:e,category:t,userId:s})},warning:}),[t,s])}},1180:function(e,t,n){"use strict";n(201),n(393),n(131),n(363),n(127),t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=n(429)),a=i(n(357)),c=i(n(520)),o=n(1181);n(1182);function i(e){return e&&e.__esModule?e:{default:e}}var s="unmounted";t.UNMOUNTED=s;var u="exited";t.EXITED=u;var l="entering";t.ENTERING=l;var f="entered";t.ENTERED=f;var b="exiting";t.EXITING=b;var d=a.default.Component);.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var v=(0,o.polyfill)(d);t.default=v},1181:1182:1183:function(e,t,n){"use strict";n(131),n(363),n(362),n(578),n(203),t.__esModule=!0,t.default=void 0;var r=i(n(429)),a=i(n(357)),c=n(1181),o=n(1622);function i(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}ar l=Object.values||f=a.default.Component);f.childContextTypes={transitionGroup:r.default.object.isRequired},f.propTypes={},f.defaultProps={component:"div",childFactory:function(e){return e}};var b=(0,c.polyfill)(f);t.default=b,e.exports=t.default},1184:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(357),a=Object(r.createContext)({setIsFrameMaximized:isFrameMaximized:!1,isFrameManuallyResized:!1})},1187:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return h}));var r=n(13),a=n(128),c=n(27),o=(n(478),n(12),n(357)),i=n(481),s=n.n(i),u=n(84),l=n.n(u),f=n(825),b=n(956),d=n(439),p=n(358),v={byIds:{}},O=Object(o.createContext)(v),j=function(e,t){if(t.type===d.q){var n=t.payload,r=n.id,a=n.details;return l()(e.byIds[r])?s()(e,{byIds:{$merge:Object(c.a)({},r,a)}}):s()(e,{byIds:Object(c.a)({},r,{$merge:a})})}return e},h=function(e){var t=e.children,n=Object(o.useReducer)(j,v),c=Object(a.a)(n,2),i=c[0],s=c[1],u=Object(b.a)(),l=Object(o.useCallback)((function(e){var t=e.type,n=e.payload,a=null===u||void 0===u?void 0:u.find((function(e){var t,r;return(null===e||void 0===e||null===(t=e.provider)||void 0===t||null===(r=t.details)||void 0===r?void 0:r.id)===n.id}));a&&s({type:t,payload:Object(r.a)(Object(r.a)({},n),{},{id:a.id})})}),[u]);return Object(f.a)(d.q,l),Object(p.jsx)(O.Provider,{value:i},t)}},1188:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(381),n(12),n(7),n(55);var r=function(e){return e.split("").reduce((,0)}},1189:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(53),n(12),n(130),n(129),n(80);var r=function(){return n.e(65).then(n.bind(null,1802))}},1190:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(27),a=(n(381),n(12),n(647)),c=n(957),o=n(958),i=n(624),s=n(396),u=Object(r.a)({},s.c.CONTACT_DETAILS_FORM,{NAME:FIRST_NAME:function(e){return e.user.firstName},LAST_NAME:function(e){return e.user.lastName},EMAIL:function(e){return e.user.email},PHONE_NO:function(e){return e.user.phoneNo}}),l=Object(r.a)({},s.c.CONTACT_DETAILS_FORM,(function(e,t){var n=c.a.getFields(o.a.getForm(e)),r=u[s.c.CONTACT_DETAILS_FORM];return n.reduce((function(e,n){var a=n.id,c=r[a];return c&&(e[a]=c(t)),e}),{})})),f=function(e,t){var n=l[a.a.getType(e)];return n?n(e,t):{}}},1191:function(e,t,n){n(85),n(7),n(19),n(54),n(82),n(12),n(703),n(419),n(53),n(80),n(133);var r=n(1628);e.exports=d,e.exports.parse=c,e.exports.compile=e.exports.tokensToFunction=i,e.exports.tokensToRegExp=b;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");ction s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}2:function(e,t,n){"use strict";t.a={PDF:"PDF",EXCEL:"EXCEL",DOCUMENT:"DOCUMENT",WORD_DOCUMENT:"DOC",PRESENTATION:"PRESENTATION",ONENOTE:"ONENOTE"}},1193:1194:1195:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(81),a=n(134),c=n(433),o=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((,e)})));return function(){return e.apply(this,arguments)}}()},1439:function(e,t,n){"use strict";var r=n(368),a=n(367),c=(n(362),n(127),n(208),n(56)),o=n.n(c),i=n(483),s=n.n(i),u=n(834),l=n.n(u),f=function(e,t){return l()(e)&&l()(t)?e-t:s()(e)&&s()(t)?e.localeCompare(t):s()(e)&&l()(t)?parseInt(e,10)-t:l()(e)&&s()(t)?e-parseInt(t,10):-1},b=function(e,t){return!o()(t)&&f(t,e)<=-1},d=function(e,t){return!o()(t)&&f(t,e)>=1},p=function(e,t){return!o()(t)&&0===f(t,e)},v=n(405),O=n.n(v),j=n(84),h=n.n(j),g=n(548),m=n(140),x=n(402),y=n(622),I=Object(r.a)((function e(t){var n=this;Object(a.a)(this,e),this.matches=function(e,t){var r,a=t.logOnSuccess,c=t.logOnFailure,o=x.a.getField(n._filter),i=O()(x.a.getValues(n._filter)),s=Object(g.c)({currentValueMap:e,filter:n._filter});switch(x.a.getFilterType(n._filter)){case y.a.LT:r=b(i,s);break;case y.a.LTE:r=b(i,s)||p(i,s);break;case y.a.GT:r=d(i,s);break;case y.a.GTE:r=d(i,s)||p(i,s);break;case y.a.EQUALS:r=p(i,s);break;case y.a.NOT_EQUALS:r=!p(i,s);break;case y.a.EXISTS:r=!h()(s);break;case y.a.MISSING:r=h()(s);break;default:r=!1}return r&&a&&Object(m.a)("Range Filter succeed for ".concat(o," with value ").concat(s)),!r&&c&&Object(m.a)("Range Filter failed for ".concat(o," with value ").concat(s)),r},this.clear=function(){},this._filter=t})),w=(n(7),n(85),n(19),function(e,t){if(o()(t))return!1;try{return!!new RegExp(e).test(t)}catch(n){return Object(m.a)("Wrong regex in filter"),!1}}),k=n(1158),E=n(202),C=n.n(E),T=n(595),S=n.n(T),_=Object(r.a)((function e(t){var n=this;Object(a.a)(this,e),this.matches=function(e,t){var r=t.logOnSuccess,a=t.logOnFailure,c=x.a.getField(n._filter),o=x.a.getValues(n._filter),i=Object(g.c)({currentValueMap:e,filter:n._filter}),s=C()(x.a.getDetails(n._filter),"valueAdditional.isJsRegex"),u=S()(o,(function(e){return s?w(e,i):Object(k.a)(e,i)}));return u&&r&&Object(m.a)("Regex Filter succeed for ".concat(c," with value ").concat(i)),!u&&a&&Object(m.a)("Regex Filter failed for ".concat(c," with value ").concat(i)),u},this.clear=function(){},this._filter=t})),A=(n(139),n(141),function(e,t){return!o()(t)&&!!e.includes(t)}),N=Object(r.a)((function e(t){var n=this;Object(a.a)(this,e),this.matches=function(e,t){var r=t.logOnSuccess,a=t.logOnFailure,c=x.a.getField(n._filter),o=x.a.getValues(n._filter),i=Object(g.c)({currentValueMap:e,filter:n._filter}),s=A(o,i);return s&&r&&Object(m.a)("In Filter succeed for ".concat(c," with value ").concat(i)),!s&&a&&Object(m.a)("In Filter failed for ".concat(c," with value ").concat(i)),s},this.clear=function(){},this._filter=t})),R=function(e,t){return!o()(t)&&!e.includes(t)},P=Object(r.a)((function e(t){var n=this;Object(a.a)(this,e),this.matches=function(e,t){var r=t.logOnSuccess,a=t.logOnFailure,c=x.a.getField(n._filter),o=x.a.getValues(n._filter),i=Object(g.c)({currentValueMap:e,filter:n._filter}),s=R(o,i);return s&&r&&Object(m.a)("NotIn Filter succeed for ".concat(c," with value ").concat(i)),!s&&a&&Object(m.a)("NotIn Filter failed for ".concat(c," with value ").concat(i)),s},this.clear=function(){},this._filter=t})),L=Object(r.a)((function e(){Object(a.a)(this,e)}));L.createFilterAction=function(e){switch(x.a.getFilterType(e)){case y.a.LTE:case y.a.LT:case y.a.GT:case y.a.GTE:case y.a.NOT_EQUALS:case y.a.EXISTS:case y.a.MISSING:return new I(e);case y.a.REGEX:return new _(e);case y.a.CONTAINS:case y.a.IN:return new N(e);case y.a.NIN:return new P(e);default:return new I(e)}};var M=L,D=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){return r._filterAction.matches(e,t)},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null},this._filter=t,this._unSubscribeFn=c?c(t):null,this._filterAction=M.createFilterAction(this._filter)})),U=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){return r._filterAction.matches(e,t)},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null},this._filter=t,this._unSubscribeFn=c?c(t):null,this._filterAction=M.createFilterAction(t)})),F=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){return r._filterAction.matches(e,t)},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null},this._filter=t,this._unSubscribeFn=c?c(t):null,this._filterAction=M.createFilterAction(t)})),B=n(27),G=n(476),V=n.n(G),H=n(535),z=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){var n=x.a.getDetails(r._filter),a=Object(g.c)({currentValueMap:e,filter:r._filter}),c=Object(B.a)({},H.a.BUSINESS_HOURS,a);return!n||h()(n)||V()(n.timeToBusinessHours)||(c=Object(B.a)({},H.a.BUSINESS_HOURS,n.timeToBusinessHours)),r._filterAction.matches(c,t)},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null};var o=function(e){return x.a.getFilterType(e)===y.a.IN?O()(x.a.getValues(e))?Object.assign(Object.assign({},e),{filterType:y.a.LTE,values:[0]}):Object.assign(Object.assign({},e),{filterType:y.a.GT,values:[0]}):e}(t);this._filter=o,this._unSubscribeFn=c?c(o):null,this._filterAction=M.createFilterAction(o)})),W=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null};var o=function(e){return x.a.getFilterType(e)===y.a.IN?O()(x.a.getValues(e))?Object.assign(Object.assign({},e),{filterType:y.a.GTE,values:[1]}):Object.assign(Object.assign({},e),{filterType:y.a.LTE,values:[0]}):e}(t);this._filter=o,this._unSubscribeFn=c?c(o):null,this._filterAction=M.createFilterAction(o)})),q=Object(r.a)((function e(t,n){var r=this,c=n.subscribe,o=n.parentFilter;Object(a.a)(this,e),this.matches=function(e,t){var n,a,c,o,i=e;switch(r._parentFilter&&x.a.getField(r._parentFilter)){case H.a.INTERCEPT_ENGAGED_IN_SESSION_KEY:var s=O()(x.a.getValues(r._parentFilter)),u=null!==(a=null===(n=e[H.a.INTERCEPT_ENGAGED_IN_SESSION_KEY][s])||void 0===n?void 0:n.variants)&&void 0!==a?a:[],l=Date.now()-(u[u.length-1].actionTime||0);i=Object.assign(Object.assign({},i),Object(B.a)({},H.a.DEPENDENT_DURATION_KEY,l));break;case H.a.INTERCEPT_CLOSED_IN_SESSION_KEY:var f=O()(x.a.getValues(r._parentFilter)),b=null!==(o=null===(c=e[H.a.INTERCEPT_CLOSED_IN_SESSION_KEY][f])||void 0===c?void 0:c.variants)&&void 0!==o?o:[],d=Date.now()-(b[b.length-1].actionTime||0);i=Object.assign(Object.assign({},i),Object(B.a)({},H.a.DEPENDENT_DURATION_KEY,d))}return r._filterAction.matches(i,t)},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null},this._filter=t,this._parentFilter=o,this._unSubscribeFn=c?c(t,o):null,this._filterAction=M.createFilterAction(t)})),K=Object(r.a)((function e(t,n){var r=this;Object(a.a)(this,e),this.matches=function(e,t){var n=O()(x.a.getValues(r._filter)),a=e[H.a.INTERCEPT_ENGAGED_IN_SESSION_KEY],c=r._filterAction.matches(Object(B.a)({},H.a.INTERCEPT_ENGAGED_IN_SESSION_KEY,a[n]?n:""),t);if(c){var o=x.a.getDetails(r._filter);if(o&&!h()(o.dependentFilter))return null===r._dependentFilterAction&&(r._dependentFilterAction=r._filterOptions.getFilterBuilder(o.dependentFilter,Object.assign(Object.assign({},r._filterOptions),{parentFilter:r._filter}))),r._dependentFilterAction.matches(e,t)}return c},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._dependentFilterAction&&r._dependentFilterAction.clear(),r._unSubscribeFn=null};var c=n.subscribe;this._filter=t,this._filterOptions=n,this._unSubscribeFn=c?c(t):null,this._filterAction=M.createFilterAction(t),this._dependentFilterAction=null})),Y=Object(r.a)((function e(t,n){var r=this;Object(a.a)(this,e),this.matches=function(e,t){var n=O()(x.a.getValues(r._filter)),a=e[H.a.INTERCEPT_CLOSED_IN_SESSION_KEY],c=r._filterAction.matches(Object(B.a)({},H.a.INTERCEPT_CLOSED_IN_SESSION_KEY,a[n]?n:""),t);if(c){var o=x.a.getDetails(r._filter);if(o&&!h()(o.dependentFilter))return null===r._dependentFilterAction&&(r._dependentFilterAction=r._filterOptions.getFilterBuilder(o.dependentFilter,Object.assign(Object.assign({},r._filterOptions),{parentFilter:r._filter}))),r._dependentFilterAction.matches(e,t)}return c},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._dependentFilterAction&&r._dependentFilterAction.clear(),r._unSubscribeFn=null};var c=n.subscribe;this._filter=t,this._filterOptions=n,this._unSubscribeFn=c?c(t):null,this._filterAction=M.createFilterAction(t),this._dependentFilterAction=null})),X=n(403),Q="PIXEL",Z=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){var n=C()(x.a.getDetails(r._filter),"valueAdditional.valueType"),a=x.a.getField(r._filter),c=e[a]||X.a,o=c.scrollDepth,i=c.scrollPercent,s=Object(B.a)({},a,n===Q?o:i);return r._filterAction.matches(s,t)},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._filterAction.clear(),r._unSubscribeFn=null},this._filter=t,this._unSubscribeFn=c?c(t):null,this._filterAction=M.createFilterAction(t)})),$=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){return 0===Object(g.c)({currentValueMap:e,filter:r._filter})},this.clear=function(){r._unSubscribeFn&&r._unSubscribeFn(),r._unSubscribeFn=null},this._filter=t,this._unSubscribeFn=c?c(t):null})),J=Object(r.a)((function e(t,n){var r=this,c=n.subscribe;Object(a.a)(this,e),this.matches=function(e,t){return 0===Object(g.c)({currentValueMap:e,filter:r._filter})},this.clear=this._filter=t,this._unsubscribeFn=c?c(t):null})),ee=Object(r.a)((function e(){Object(a.a)(this,e)}));ee.createFilterAction=function(e,t){switch(x.a.getField(e)){case H.a.AVAILABLE_AGENTS:return new U(e,t);case H.a.AGENT_OUT_OF_CAPACITY:return new F(e,t);case H.a.BUSINESS_HOURS:return new z(e,t);case H.a.IS_CONVERSATION_OPEN:return new W(e,t);case H.a.DEPENDENT_DURATION_KEY:return new q(e,t);case H.a.INTERCEPT_CLOSED_IN_SESSION_KEY:return new Y(e,t);case H.a.INTERCEPT_ENGAGED_IN_SESSION_KEY:return new K(e,t);case H.a.CURRENT_URL:case H.a.TOTAL_TIME_SPENT:case H.a.ACTIVE_TIME_SPENT:case H.a.INACTIVE_TIME_SPENT:case H.a.DEVICE_TYPE:case H.a.USER_IP_DETAILS_COUNTRY:case H.a.USER_IP_DETAILS_CITY:case H.a.USER_IP_DETAILS_REGION:return new D(e,t);case H.a.HORIZONTAL_PAGE_SCROLL_DEPTH:case H.a.VERTICAL_PAGE_SCROLL_DEPTH:return new Z(e,t);case H.a.TIME_SPENT_ON_SESSION:return new $(e,t);case H.a.NUM_SNOOZE_ALLOWED:return new J(e,t);default:return Object(g.e)(x.a.getField(e))?new D(e,t):void 0}};var te=ee,ne=n(135),re=n.n(ne),ae=n(138),ce=n.n(ae),oe=Object(r.a)((function e(t,n){var r=this;Object(a.a)(this,e),this.matches=function(e,t){var n=!0;return ce()(r._filterActions,(function(r){return!!r.matches(e,t)||(n=!1,!1)})),n},this.clear=function(){ce()(r._filterActions,(function(e){return e.clear()})),r._filterActions=[]},this._filterActions=re()(x.a.getFilters(t),(function(e){return n.getFilterBuilder(e,n)}))})),ie=Object(r.a)((function e(t,n){var r=this;Object(a.a)(this,e),this.matches=function(e,t){var n=!1;return ce()(r._filterActions,(),n},this.clear=function(){ce()(r._filterActions,(),r._filterActions=[]},this._filterActions=re()(x.a.getFilters(t),()})),se=0,ue=Object(r.a)((function e(){Object(a.a)(this,e)}));ue.createFilterAction=function(e,t){var n=function(e){var t,n;return se+=1,Object.assign(Object.assign({},e),{id:null!==(n=null===(t=null===e||void 0===e?void 0:e.details)||void 0===t?void 0:t.id)&&void 0!==n?n:se})}(e),r=te.createFilterAction(n,t);if(r)return r;switch(x.a.getFilterType(n)){case y.a.AND:return new oe(e,t);case y.a.OR:return new ie(e,t);default:return M.createFilterAction(n)}};t.a=ue},1450:function(e,t,n){"use strict";var r,a=n(357),c=n.n(a),o=(n(422),n(360)),i=n(401),s=n(359),u=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}unction b(e,t){var n=e.title,c=e.titleId,o=f(e,u);return a.createElement("svg",l({"data-spaceweb":"icon",viewBox:"0 0 14 14","data-icon-name":"SolidCobrowsing",className:"sw--bx sw--by sw--mw sw--mx",ref:t,"aria-labelledby":c},o),n?a.createElement("title",{id:c},n):null,r||(r=a.createElement("path",{d:"M12.752 0H1.248A1.328 1.328 0 00.024 1.416v8.66a1.328 1.328 0 001.224 1.416h11.504a1.328 1.328 0 001.224-1.416v-8.66A1.328 1.328 0 0012.752 0zM5.648 5.19a.362.362 0 01-.11-.263c0-.005-.006-.01-.006-.015v-.525h-1.05a.896.896 0 00-.895.895v.928a.889.889 0 00.262.633.918.918 0 00.632.263.5.5 0 010 1 1.914 1.914 0 01-1.34-.556 1.882 1.882 0 01-.554-1.34v-.928A1.896 1.896 0 014.48 3.387h1.051v-.52c0-.005.006-.01.006-.016a.343.343 0 01.11-.268.361.361 0 01.517.01l.996 1.038c.005.01.015.016.02.027a.369.369 0 01.08.179.2.2 0 010 .079.34.34 0 01-.095.221v.005H7.16L6.165 5.18a.361.361 0 01-.517.01zm5.765 1.02A1.897 1.897 0 019.52 8.106h-.88v.519c0 .005-.005.01-.005.016a.343.343 0 01-.111.268.361.361 0 01-.516-.01l-.996-1.038c-.005-.01-.016-.016-.021-.026a.369.369 0 01-.08-.18.2.2 0 010-.079.34.34 0 01.096-.22V7.35h.005l.996-1.038a.364.364 0 01.627.253c0 .005.005.01.005.016v.525h.879a.896.896 0 00.894-.896v-.928a.891.891 0 00-.263-.634.918.918 0 00-.631-.26.5.5 0 010-1 1.914 1.914 0 011.34.554 1.885 1.885 0 01.554 1.34zM10.3 12.584H3.597a.7.7 0 000 1.4H10.3a.7.7 0 100-1.4z"})))}var d=a.forwardRef(b);n.p;var p=Object(s.a)(d,{target:"ewwkyww0"})({name:"ta0e1",styles:"width:48px;height:48px;margin-bottom:18px;fill:var(--spr-lc-d-1);"}),v=n(1456),O=n(756),j=n(624),h=n(358);var g={name:"19cy8uy",styles:"max-width:218px;"},m=c.a.memo(Object(o.h)((function(e){var t=e.onStopSession,n=e.brandUser,r=e.intl,c=Object(i.a)(),o=Object(a.useMemo)((function(){return{agentName:Object(j.a)(n,c)}}),[n,c]),s=Object(a.useMemo)((,[o,r]),u=Object(a.useMemo)((function(){return g}),[]);return Object(h.jsx)(v.a,{onClose:t,Icon:p,description:s,descriptionStyles:u})}))),x=n(620);t.a=function(e){var t=e.sessionState;return t!==x.c.INITIATED&&t!==x.c.SETUP&&t!==x.c.RESUMED?null:Object(h.jsx)(m,e)}},1453:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n(13),a=n(128),c=(n(516),n(53),n(12),n(130),n(129),n(80),n(357)),o=n.n(c),i=n(84),s=n.n(i),u=n(138),l=n.n(u),f=n(546),b=n.n(f),d=n(392),p=n.n(d),v=n(365),O=n(489),j=n(435),h=function(){return function(e){var t={eventId:e.label,eventType:e.action.id,additional:Object(r.a)(Object(r.a)({},e.additional),{},{conversationId:e.conversationId,page:e.page,appId:e.appId})};Object(O.a)({topic:j.e,payload:{data:t}})}},g=n(81),m=n(134),x=(n(209),n(433)),y=n(477),I=n(132),w=new Set([y.a.AGENT_ASSIGNED.id,y.a.VIDEO_CALL_OUTGOING_STARTING.id,y.a.AUDIO_CALL_OUTGOING_STARTING.id,y.a.CALL_ENDED.id,y.a.CALL_MISSED.id,y.a.CALL_DECLINED.id,y.a.CALL_FAILED.id,y.a.CALL_PAGE_MAXIMISED.id,y.a.CALL_PAGE_MINIMISED.id,y.a.ATTACHMENT_BUTTON_CLICKED.id,y.a.SEND_BUTTON_CLICKED.id,y.a.SESSION_ACTIVE.id]),k=function(){return function(){var e=Object(m.a)(Object(g.a)().mark((function e(t){var n;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.has(t.action.id)){e.next=2;break}return e.abrupt("return");case 2:return n=Object(r.a)({page:t.page,userAgent:t.userAgent,device:t.device,timeZone:t.timeZone,eventType:t.action.label,eventId:t.label,conversationId:t.conversationId,sourceType:"LIVE_CHAT",sourceSubType:t.sourceSubType},t.additional),e.prev=3,e.next=6,x.a.post("/livechat/prompt/browse/event",n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),Object(I.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},E=n(521),C=n(374),T=n(377),S=n(496),_=n(382),A=n(547),N=n(11),R=n(4),P=n(909),L=n(642),M=n(358),D=o.a.createContext(p.a),U=[],F=function(e){return Object(A.c)(Object(_.e)(e))},B=function(e){var t,o=Object(E.a)(),i=Object(C.a)(),u=Object(c.useRef)(U),f=Object(c.useState)(!s()(u.current)),d=Object(a.a)(f,2),p=d[0],O=d[1],j=Object(T.a)(S.c),g=Object(T.a)(S.b),m=Object(v.d)(F),x=Object(R.S)(),I=null===(t=Object(C.a)().settings)||void 0===t?void 0:t.sendSessionActiveEvent;return Object(c.useEffect)((function(){if(p&&m.length){var e=Object(r.a)(Object(r.a)({},m[0]),{},{category:"Sprinklr Widget",device:o.device,page:o.pageUrl,userAgent:o.userAgent,timeZone:o.timeZone,appId:Object(N.a)().appId});!function(e,t){Object(P.c)((function(){l()(e,()}))}(u.current,e),g()}}),[m,p]),Object(c.useEffect)((function(){x||p||function(e){var t,r,a,c,o,i,s=[],u=null===(t=e.settings)||void 0===t||null===(r=t.analyticsSettings)||void 0===r||null===(a=r.googleAnalytics)||void 0===a?void 0:a.trackerId,l=null===(c=e.settings)||void 0===c||null===(o=c.analyticsSettings)||void 0===o||null===(i=o.sprinklrAnalytics)||void 0===i?void 0:i.enabled;return null!==u&&void 0!==u&&u.startsWith("UA-")?s.push(n.e(137).then(n.bind(null,2125)).then((function(e){return e.default.createTracker({trackerId:u},{canAccessParent:Object(R.Q)()})})).catch((function(){}))):null!==u&&void 0!==u&&u.startsWith("G-")&&s.push(n.e(75).then(n.bind(null,2126)).then((function(e){return e.default.createTracker({trackerId:u},{canAccessParent:Object(R.Q)()})})).catch((function(){}))),l&&s.push(k()),s.push(h()),Promise.all(s)}(i).then((function(e){u.current=b()(e),U=u.current,O(!0)}))}),[]),Object(c.useEffect)((function(){var e;return I&&(e=L.d.on((function(e){if(e.type===L.e)j({label:y.a.SESSION_ACTIVE.label,action:y.a.SESSION_ACTIVE})}))),),[I]),Object(M.jsx)(D.Provider,{value:j},e.children)};t.b=o.a.memo(B)},1456:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));n(204),n(366),n(357);var r=n(360),a=n(359),c=(n(127),n(358)),o=n(361),i=n(364),s=n(572),u=n(530);var l=Object(a.a)("div",{target:"e1ryo3a50"})("position:fixed;top:0px;left:0px;width:100%;height:100%;z-index:",(function(e){return Object(o.f)("frame.zIndex")(e)}),";transform:translateZ(",(function(e){return Object(o.f)("frame.translateZ")(e)}),"px);"),f=Object(a.a)(s.a,{target:"e1ryo3a51"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),b={name:"1egabj8",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:transparent;}"},d=Object(a.a)("div",{target:"e1ryo3a52"})("width:100%;height:100%;position:relative;",(function(e){return e.isPhone&&"backdrop-filter: blur(2px);"}),""),p=Object(a.a)("div",{target:"e1ryo3a53"})("position:absolute;padding:",(function(e){var t=+Object(o.f)("confirmationBox.paddingTop")(e),n=+Object(o.f)("confirmationBox.paddingRight")(e),r=+Object(o.f)("confirmationBox.paddingLeft")(e),a=+Object(o.f)("confirmationBox.paddingBottom")(e);return"".concat(t,"px ").concat(n,"px ").concat(a,"px ").concat(r,"px")}),";",(function(e){return e.isPhone?"\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 100%;\n      opacity: 0.95;\n      ":"\n      box-shadow: ".concat(Object(o.f)("frame.boxShadow")(e),";\n      border-radius: ").concat(Object(o.a)("frame.borderRadius")(e),";\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      max-width: 312px;\n      width: 85%;\n  ")})," color:var(--spr-lc-d-1);background-color:",Object(o.f)("confirmationBox.backgroundColor"),";"),v=Object(a.a)("div",{target:"e1ryo3a54"})("font-size:",Object(o.f)("confirmationBox.header.title.fontSize"),"px;font-family:",Object(o.d)("confirmationBox.header.title.fontFamily"),";font-weight:",Object(o.f)("confirmationBox.header.title.fontWeight"),";padding-bottom:",Object(o.f)("confirmationBox.header.paddingBottom"),"px;"),O=Object(a.a)("div",{target:"e1ryo3a55"})("font-size:",Object(o.f)("confirmationBox.description.fontSize"),"px;font-weight:normal;color:var(--spr-lc-d-1);text-align:center;"),j=Object(a.a)(u.a,{target:"e1ryo3a56"})("position:absolute;top:var(--spr-lc-safe-area-top);",Object(i.c)("right: var(--spr-lc-safe-area-right);","left: var(--spr-lc-safe-area-left);"),""),h=function(e){return Object(c.css)({height:"".concat(Object(o.f)("confirmationBox.header.iconButton.icon.height")({theme:e}),"px"),width:"".concat(Object(o.f)("confirmationBox.header.iconButton.icon.width")({theme:e}),"px"),fill:"var(--spr-lc-d-1)"},"")},g=function(e){return Object(c.css)({height:"".concat(Object(o.f)("confirmationBox.header.iconButton.button.height")({theme:e}),"px"),width:"".concat(Object(o.f)("confirmationBox.header.iconButton.button.width")({theme:e}),"px")},"")},m=n(511),x=n(370),y=n(371),I=n(375),w=n(756),k=Object(r.h)((function(e){var t=e.onClose,n=e.title,r=e.description,a=e.descriptionStyles,o=e.Icon,i=e.intl,s=Object(I.b)(),u=Object(x.a)(),k=Object(y.a)().direction;return Object(c.jsx)(l,{className:"spr-chat__cobrowseInfo-box spr-live-chat-frame __cbio_ignored"},Object(c.jsx)(f,{name:"spr-chat__cobrowseInfo-frame","aria-label":i.formatMessage(w.a.coBrowseInformation),title:i.formatMessage(w.a.coBrowseInformation)},Object(c.jsx)(c.Global,{styles:b}),Object(c.jsx)(d,{isPhone:u},Object(c.jsx)(p,{isPhone:u},Object(c.jsx)("div",{className:"flex-column-container center-x-y spr full-width full-height"},Object(c.jsx)(j,{direction:k,iconName:"closeIcon",Icon:m.a,onClick:t,iconCss:h(s),css:g(s)}),Object(c.jsx)(o,null),n&&Object(c.jsx)(v,null,n),r&&Object(c.jsx)(O,{css:a},r))))))}))},1461:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(53),n(12),n(130),n(129),n(80),n(441),n(19);var r=n(392),a=n.n(r),c=n(1188);function o(e,t){return new Promise((function(n,r){setTimeout((,t)}))}var i={},s=function(e,t){i[t]=e,e.catch(a.a).finally(()};var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxAttempts,r=void 0===n?5:n;function a(e){return 1e3*(e?Math.pow(2,Math.min(e-1,r)):0)}function u(e,t){return o(e,a(t)).catch((function(n){if(t===r)throw n;return u(e,t+1)}))}var l=Object(c.a)(e.toString());if(i[l])return i[l];var f=u(e,0);return s(f,l),f},l=function(){return u((function(){return n.e(46).then(n.bind(null,2094))}),{maxAttempts:3})}},1535:1538:1605:1606:function(e,t,n){n(85),n(7),n(19);var r="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+a+"|"+c+")"+"?",l="[\\ufe0e\\ufe0f]?",f=l+u+("(?:\\u200d(?:"+[o,i,s].join("|")+")"+l+u+")*"),b="(?:"+[o+a+"?",a,i,s,r].join("|")+")",d=RegExp(c+"(?="+c+")|"+b+f,"g");e.exports=,1612:function(e,t,n){var r={"./classic/pages":[2018,13,102],"./modern/pages":[2017,13,103]};.keys=a.id=1612,e.exports=a},1613:function(e,t,n){"use strict";n(201),Object.defineProperty(t,"__esModule",{value:!0});var r=n(536),a=r.__importStar(n(357)),c=n(357),o=r.__importDefault(n(1614)),i=r.__importDefault(n(1615));t.default=function(e){return function(t){var n,s;s=a.isValidElement(t)?(n=t).props:t;var u=o.default({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1}),l=u[0],f=u[1],b=c.useRef(null),d=p=function(){return f({paused:!1})},v=O=j=function(){var e=b.current;if(e){var t=e.duration,n=e.buffered;f({duration:t,buffered:i.default(n)})}},h=g=function(){var e=b.current;e&&f({buffered:i.default(e.buffered)})};n=n?a.cloneElement(n,r.__assign(r.__assign({controls:!1},s),{ref:b,onPlay:d(s.onPlay,p),onPause:d(s.onPause,v),onVolumeChange:d(s.onVolumeChange,O),onDurationChange:d(s.onDurationChange,j),onTimeUpdate:d(s.onTimeUpdate,h),onProgress:d(s.onProgress,g)})):a.createElement(e,r.__assign(r.__assign({controls:!1},s),{ref:b,onPlay:d(s.onPlay,p),onPause:d(s.onPause,v),onVolumeChange:d(s.onVolumeChange,O),onDurationChange:d(s.onDurationChange,j),onTimeUpdate:d(s.onTimeUpdate,h),onProgress:d(s.onProgress,g)}));var m=!1,x={play:pause:seek:volume:mute:function(){var e=b.current;e&&(e.muted=!0)},unmute:;return c.useEffect((,[s.src]),[n,l,x,b]}}},1614:function(e,t,n){"use strict";n(201),n(362),Object.defineProperty(t,"__esModule",{value:!0});var r=n(357);t.default=function(e){void 0===e&&(e={});var t=r.useState(e),n=t[0],a=t[1];return[n,r.useCallback((,[a])]}},1615:function(e,t,n){"use strict";n(201),Object.defineProperty(t,"__esModule",{value:!0});t.default=,1616:function(e,t,n){"use strict";n(201),n(393),n(362),n(12),n(83),n(7),n(55),n(127),t.__esModule=!0,t.default=void 0;!n(429));var r=i(n(1617)),a=i(n(1620)),c=i(n(357)),o=i(n(1180));n(1182);function i(e){return e&&e.__esModule?e:{default:e}}ar u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},l=f=c.default.Component);f.defaultProps={classNames:""},f.propTypes={};var b=f;t.default=b,e.exports=t.default},1617:1618:1619:function(e,t,n){"use strict";n(363),t.__esModule=!0,t.default=e.exports=t.default},1620:function(e,t,n){"use strict";(7),n(82),n(85),n(19),e.exports=,1621:function(e,t,n){"use strict";n(131),n(363),n(127),n(12),n(130),t.__esModule=!0,t.default=void 0;o(n(429));var r=o(n(357)),a=n(520),c=o(n(1183));ar i=r.default.Component);i.propTypes={};var s=i;t.default=s,e.exports=t.default},1622:function(e,t,n){"use strict";n(12),n(83),n(203),n(131),t.__esModule=!0,t.getChildMapping=a,t.mergeChildMappings=c,t.getInitialChildMapping=t.getNextChildMapping=var r=n(357);625:1626:1627:1628:1629:function(e,t,n){n(85),n(7),n(19),n(82);var r=n(1630),a=n(86),c=/[&<>"']/g,o=RegExp(c.source);e.exports=,1630:1631:1632:1633:2120:function(e,t,n){"use strict";var r=n(517),a=(n(54),n(127),n(689)),c=n(741),o=n(812),i=(n(1632),n(206),Number.isInteger||,s=n(1111),u=n(1583),l=Object(a.a)((function e(t,n,r){if(0===t.length)return n;var a=t[0];if(t.length>1){var l=!Object(u.a)(r)&&Object(c.a)(a,r)?r[a]:i(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,l)}if(i(a)&&Object(o.a)(r)){var f=[].concat(r);return f[a]=n,f}return Object(s.a)(a,n,r)})),f=n(1452),b=n(1110),d=Object(r.a)((function(e){return Object(f.a)(Object(b.a)(e),l(e))}));t.a=d},355:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return Ok}));var r=n(379),a=n(81),c=n(134),o=(n(127),n(926)),i=n.n(o),s=n(820),u=n.n(s),l=n(202),f=n.n(l),b=n(84),d=n.n(b),p=n(11),v=n(4),O=n(368),j=n(367),h=(n(12),n(83),Object(O.a)((function e(){var t=this;Object(j.a)(this,e),this.queue=void 0,this.buffer=void 0,this._isFlushingInProgress=void 0,this._isReFlushPending=void 0,this.getQueue=function(){return t.queue},this.getBufferQueue=function(){return t.buffer},this.isFlushingInProgress=function(){return t._isFlushingInProgress},this.setIsFlushingInProgress=function(e){t._isFlushingInProgress=e},this.isReFlushPending=function(){return t._isReFlushPending},this.setIsReFlushPending=this.addCmdToQueue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d()(n)||e.push.apply(e,n)},this.move=function(e,n){e.forEach(()},this.isEmpty=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.queue;return d()(e)},this.popNextCmd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.queue;return e.shift()},this.queue=[],this.buffer=[],this._isFlushingInProgress=!1,this._isReFlushPending=!1}))),g=new h,m=n(193),x=n(1097),y=n(169),I=n(194);n(54),n(139),n(141);var w=n(821),k=n(140),E="AVAILABLE",C="UN_AVAILABLE",T="PENDING",S=T,_=A=function(){return S===C},N=function(){return S===T},R="PENDING",P="SUCCESS",L="FAIL",M="EXPIRED",D=R,U=function(e){D=e},F=function(){return D===R},B=function(){return D===L},G=V=n(544),H=n(27),z=n(481),W=n.n(z),q=n(508),K="APP_AVAILABLE",Y="APP_IN_SESSION";function X(e,t){var n=Object(v.R)(t);if(!d()(n)){var r=W()(Object(p.a)(),{userContext:{$merge:n}});Object(p.f)(r),e({type:q.g,payload:n})}}X.dependecies=[Y];var Q="@user/UPDATE_USER_SETTINGS";function Z(e,t){e({type:Q,payload:t})}Z.dependecies=[Y];var $=n(439),J=n(403);e.dependecies=[Y];n(130);function te(e,t,n){new Promise((function(n,r){e({type:$.l,payload:null!==t&&void 0!==t?t:J.a,promise:{resolve:n,reject:r}})})).then((function(e){null===n||void 0===n||n({data:e})})).catch((function(e){null===n||void 0===n||n({error:e})}))}te.dependecies=[K];n(136);var ne=n(574),re=n.n(ne),ae=n(392),ce=n.n(ae),oe=n(907),ie=function(e){var t=e.topic,n=e.legacySubscriberMap,r=e.legacySubscriber,a=e.newSubscriber;return Object(oe.b)(ce.a,{topic:t,subscriber:a}),n.push({legacySubscriber:r,newSubscriber:a}),n},se=function(e){var t=e.topic,n=e.legacySubscriberMap,r=e.legacySubscriber,a=re()(n,(function(e){return e.legacySubscriber===r}));return-1!==a&&(Object(oe.c)(ce.a,{topic:t,subscriber:n[a].newSubscriber}),n.splice(a,1)),n},ue=n(435);function le(e){Object(v.Q)()&&e({type:$.b,payload:J.a})}le.dependecies=[K];var fe=[];var be=[];var de=[];var pe=n(744);function ve(e,t){e({type:pe.a,payload:t})}function Oe(e,t){e({type:pe.b,payload:{promptId:t.id}})}ve.dependecies=[Y,K],Oe.dependecies=[Y];var je=[];var he=n(13),ge=n(8),me=n.n(ge),xe=n(21),ye=n.n(xe),Ie=n(489),we=n(745),ke="sendExternalEvent",Ee="openNewConversation",Ce="updateConversationContext",Te="getAvailableAgents";function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=me()(t)?t:f()(t,"initialMessages");new Promise((function(r,a){e(Object(we.b)({initialMessages:n,conversationContext:f()(t,"conversationContext"),assignToUser:f()(t,"assignToUser"),createCase:!!f()(t,"autoInitiateConversation"),additional:!me()(t)&&ye()(t)?Object(he.a)(Object(he.a)({},t.additional),{},{externalCaseId:t.id}):void 0,silent:!!f()(t,"silent")})({resolve:r,reject:a}))})).then((function(e){Object(Ie.a)({topic:Ee,payload:{data:{conversationId:e},request:t}})})).catch((function(e){Object(Ie.a)({topic:Ee,payload:{error:e,request:t}})}))}Se.dependecies=[Y,K];var _e=n(563);function Ae(e,t){var n=Object(_e.b)();0!==n.index?(n.goBack(),t(!0)):t(!1)}Ae.dependecies=[K];var Ne=n(476),Re=n.n(Ne),Pe=n(416);function Le(e,t){Re()(t.payload)?Object(Ie.a)({topic:ke,payload:{error:V.a.INCORRECT_PAYLOAD,request:t}}):e({type:Pe.z,payload:t})}Le.dependecies=[Y,K];var Me=n(927);function De(e,t){var n=Object(he.a)(Object(he.a)({},t),{},{context:Object(v.R)(t.context)});new Promise((function(r,a){var c=t.conversationId;Me.a.info({chatConversationId:c,message:"".concat(c,": updateConversationContext SDK called"),additionalDetails:{params:n}}),e({type:Pe.k,payload:n,promise:{resolve:r,reject:a}})})).then((function(e){Object(Ie.a)({topic:Ce,payload:{data:e,request:Object(he.a)(Object(he.a)({},n),{},{conversationId:n.conversationId||e.conversationId}),shouldLogEvent:!0}})})).catch((function(e){Object(Ie.a)({topic:Ce,payload:{error:e,request:n,shouldLogEvent:!0}})}))}function Ue(e,t){var n=Object(v.R)(t);if(!d()(n)){var r=W()(Object(p.a)(),{clientContext:{$merge:n}});Object(p.f)(r),e({type:Pe.e,payload:{context:n}})}}De.dependecies=[Y],Ue.dependecies=[K];var Fe=[];var Be=[];var Ge=[];var Ve=[];function He(e){Object(v.Q)()&&e({type:$.i,payload:J.a})}function ze(e){Object(v.Q)()&&e({type:$.h,payload:J.a})}He.dependecies=[Y],ze.dependecies=[K];var We=[];var qe="@commerce/ADD_TO_CART",Ke="@commerce/UPDATE_CART",Ye="@commerce/REMOVE_FROM_CART";function Xe(e,t){e({type:Ke,payload:t})}e.dependecies=[Y],Qe.dependecies=[Y];var Ze=n(219),$e=n.n(Ze),Je=n(433),et=(n(362),n(690));et.a.validators.type.types.MobileClientType=var tt={mobileClientType:{type:"MobileClientType",presence:!0},appVersion:{type:"number",presence:!0},deviceId:{type:"string",presence:!0},deviceName:{type:"string"}},nt=Object.assign(Object.assign({},tt),{deviceToken:{type:"string",presence:!0}});function rt(e,t){if(t.appVersion=$e()(t.appVersion),n=t,Object(et.a)(n,nt))throw Object(k.a)("Invalid device registration payload",t),new Error(V.a.INCORRECT_PAYLOAD);var n;return Je.a.post("".concat("/livechat/event","/push/register-device"),t).then((function(){return{}})).catch((function(){throw new Error(V.a.NETWORK_FAILURE)}))}rt.dependecies=[Y];var at=[];function ct(e,t){if(t.appVersion=$e()(t.appVersion),n=t,Object(et.a)(n,tt))throw Object(k.a)("Invalid device unregistration payload",t),new Error(V.a.INCORRECT_PAYLOAD);var n;return Je.a.post("".concat("/livechat/event","/push/unregister-device"),t).then(().catch(()}ct.dependecies=[Y];var ot=[];var it=[];var st=n(384),ut="NEW_MESSAGE",lt="MESSAGE_UPDATED",ft="EXTERNAL_EVENT",bt="CHAT_USER_UPDATED",dt="CHAT_USER_START_TYPING",pt="CHAT_USER_STOP_TYPING",vt="LOCK_CONVERSATIONS",Ot="UNLOCK_CONVERSATIONS",jt="CONVERSATION_UPDATED",ht="VIDEO_CALL_STARTING",gt="VIDEO_CALL_ENDED",mt="VIDEO_CALL_TOGGLE",xt="VIDEO_CALL_OFFER_ACCEPTED",yt="VIDEO_CALL_DECLINED",It="VIDEO_CALL_MISSED",wt="CO_BROWSE_STATUS",kt="ADD_TO_CART",Et="USER_SESSION_EXPIRED",Ct="VIDEO_PARTICIPANT_UPDATED",Tt=n(132),St=["type"];function _t(e,t){var n=t.type,r=Object(st.a)(t,St);if(n===ut){var a=r.cId;new Promise((function(t,n){e(Object(we.a)({conversationId:a},{resolve:t,reject:n}))})).catch((function(e){Object(Tt.b)(e)}))}}_t.dependecies=[Y,K];var At=n(88),Nt=n.n(At),Rt=Pt=null,Lt=Rt;function Mt(e,t){Nt()(t)&&(Lt=t)}function Dt(e,t){Pt&&(Pt(t),Pt=null)}Object(oe.b)(ce.a,{topic:ue.j,subscriber:function(e){var t=(e.response||{}).data,n=void 0===t?{}:t,r=n.callBack,a=n.permissions;Pt=r,Lt(a)}});var Ut=function(e,t,n){e({type:$.a,payload:{id:t.id,filters:t.filters,cb:n}})};Ut.dependecies=[Y];var Ft=function(e,t){e({type:$.m,payload:{id:t.id}})};Ft.dependecies=[Y];var Bt=function(e){Je.a.post("".concat("/livechat/conversation","/fetchAgentAvailabilityDetails")).then((function(e){Object(Ie.a)({topic:Te,payload:{data:e.data}})})).catch((function(){Object(Ie.a)({topic:Te,payload:{error:V.a.NETWORK_FAILURE}})}))};Bt.dependecies=[Y];var Gt=n(96);function Vt(e,t){new Promise((function(n,r){var a=ye()(t)?t:{conversationId:t};a.externalCaseId&&a.conversationId?r(Gt.a.NOT_ACCEPTABLE):e(Object(we.a)(a,{resolve:n,reject:r}))})).catch((function(e){Object(Tt.b)(e)}))}Vt.dependecies=[Y,K];var Ht=n(1129);function zt(e,t,n){new Promise((function(n,r){e({type:q.f,payload:{locale:t},promise:{resolve:n,reject:r}})})).then((function(e){null===n||void 0===n||n({data:e})})).catch((function(e){null===n||void 0===n||n({error:e})}))}zt.dependecies=[Y,K];var Wt,qt=n(45);var Kt=(Wt={},Object(H.a)(Wt,"updateUserContext",[X]),Object(H.a)(Wt,"updateUserSettings",[Z]),Object(H.a)(Wt,"open",[te]),Object(H.a)(Wt,"close",[le]),Object(H.a)(Wt,"onUnreadCountChange",[function(e,t){be=ie({topic:ue.m,legacySubscriberMap:be,legacySubscriber:t,newSubscriber:function(e){var n=e.response.data;t(f()(n,"count"))}})}]),Object(H.a)(Wt,"offUnreadCountChange",[function(e,t){be=se({topic:ue.m,legacySubscriberMap:be,legacySubscriber:t})}]),Object(H.a)(Wt,"onExternalEvent",[function(e,t){de=ie({topic:ue.g,legacySubscriberMap:de,legacySubscriber:t,newSubscriber:function(e){var n=e.response.data;t(n)}})}]),Object(H.a)(Wt,"offExternalEvent",[function(e,t){de=se({topic:ue.g,legacySubscriberMap:de,legacySubscriber:t})}]),Object(H.a)(Wt,"onClose",[function(e,t){fe=ie({topic:ue.d,legacySubscriberMap:fe,legacySubscriber:t,newSubscriber:function(){t()}})}]),Object(H.a)(Wt,"offClose",[function(e,t){fe=se({topic:ue.d,legacySubscriberMap:fe,legacySubscriber:t})}]),Object(H.a)(Wt,"enable",[He]),Object(H.a)(Wt,"disable",[ze]),Object(H.a)(Wt,"onAvailabilityChange",[function(e,t){it=ie({topic:ue.c,legacySubscriberMap:it,legacySubscriber:t,newSubscriber:)}]),Object(H.a)(Wt,"offAvailabilityChange",[function(e,t){it=se({topic:ue.c,legacySubscriberMap:it,legacySubscriber:t})}]),Object(H.a)(Wt,"subscribeToUpdate",[oe.b]),Object(H.a)(Wt,"unsubscribeToUpdate",[oe.c]),Object(H.a)(Wt,"addFilterToEvaluate",[Ut]),Object(H.a)(Wt,"removeFilterToEvaluate",[Ft]),Object(H.a)(Wt,"openNewPrompt",[ve]),Object(H.a)(Wt,"clearPrompt",[Oe]),Object(H.a)(Wt,"onPromptAction",[function(e,t){je=ie({topic:ue.k,legacySubscriberMap:je,legacySubscriber:t,newSubscriber:function(e){var n=e.response.data;t(n)}})}]),Object(H.a)(Wt,"offPromptAction",[function(e,t){je=se({topic:ue.k,legacySubscriberMap:je,legacySubscriber:t})}]),Object(H.a)(Wt,Ee,[Se]),Object(H.a)(Wt,ke,[Le]),Object(H.a)(Wt,"clearSession",[ee]),Object(H.a)(Wt,Ce,[De]),Object(H.a)(Wt,"updateClientContext",[Ue]),Object(H.a)(Wt,"updateThemeMode",[function(e,t,n){new Promise((function(n,r){var a=Object(p.a)().skin===qt.a;!t||!v.a.includes(t)||a&&"DARK"===t?r(V.a.INCORRECT_PAYLOAD):(Object(p.f)({themeMode:t}),e({type:$.p,payload:{themeMode:t},promise:{resolve:n,reject:r}}))})).then((function(e){null===n||void 0===n||n({data:e})})).catch((function(e){null===n||void 0===n||n({error:e})}))}]),Object(H.a)(Wt,"onShowMedia",[function(e,t){Ge=ie({topic:ue.i,legacySubscriberMap:Ge,legacySubscriber:t,newSubscriber:function(){t()}})}]),Object(H.a)(Wt,"offShowMedia",[function(e,t){Ge=se({topic:ue.i,legacySubscriberMap:Ge,legacySubscriber:t})}]),Object(H.a)(Wt,"onCloseMedia",[function(e,t){Ve=ie({topic:ue.h,legacySubscriberMap:Ve,legacySubscriber:t,newSubscriber:function(){t()}})}]),Object(H.a)(Wt,"offCloseMedia",[function(e,t){Ve=se({topic:ue.h,legacySubscriberMap:Ve,legacySubscriber:t})}]),Object(H.a)(Wt,"onEvent",[function(e,t){We=ie({topic:ue.e,legacySubscriberMap:We,legacySubscriber:t,newSubscriber:function(e){var n=e.response.data;t(n)}})}]),Object(H.a)(Wt,"offEvent",[function(e,t){We=se({topic:ue.e,legacySubscriberMap:We,legacySubscriber:t})}]),Object(H.a)(Wt,Te,[Bt]),Object(H.a)(Wt,"openExistingConversation",[Vt]),Object(H.a)(Wt,"updateWidget",[function(e,t){var n=t.details.status;Ht.a[n]?e({type:$.q,payload:t}):(Object(k.a)("Invaild status code",n),Object(Ie.a)({topic:$.q,payload:{data:t,error:V.a.INCORRECT_PAYLOAD}}))}]),Object(H.a)(Wt,"updateLocale",[zt]),Object(H.a)(Wt,"updateCart",[Xe]),Object(H.a)(Wt,"removeFromCart",[Qe]),Object(H.a)(Wt,"registerDevice",[rt,function(e,t){Object(Ie.a)({topic:ue.l,payload:{data:t,error:e}})}]),Object(H.a)(Wt,"onDeviceRegister",[function(e,t){at=ie({topic:ue.l,legacySubscriberMap:at,legacySubscriber:t,newSubscriber:function(e){var n=e.response.error;t(n)}})}]),Object(H.a)(Wt,"offDeviceRegister",[function(e,t){at=se({topic:ue.l,legacySubscriberMap:at,legacySubscriber:t})}]),Object(H.a)(Wt,"unregisterDevice",[ct,function(e,t){Object(Ie.a)({topic:ue.n,payload:{data:t,error:e}})}]),Object(H.a)(Wt,"onUnregisterDevice",[function(e,t){ot=ie({topic:ue.n,legacySubscriberMap:ot,legacySubscriber:t,newSubscriber:function(e){var n=e.response.error;t(n)}})}]),Object(H.a)(Wt,"offUnregisterDevice",[function(e,t){ot=se({topic:ue.n,legacySubscriberMap:ot,legacySubscriber:t})}]),Object(H.a)(Wt,"onLoad",[function(e,t){Fe=ie({topic:ue.a,legacySubscriberMap:Fe,legacySubscriber:t,newSubscriber:function(){t()}})}]),Object(H.a)(Wt,"offLoad",[function(e,t){Fe=se({topic:ue.a,legacySubscriberMap:Fe,legacySubscriber:t})}]),Object(H.a)(Wt,"onLoadComplete",[function(e,t){Be=ie({topic:ue.b,legacySubscriberMap:Be,legacySubscriber:t,newSubscriber:)}]),Object(H.a)(Wt,"offLoadComplete",[function(e,t){Be=se({topic:ue.b,legacySubscriberMap:Be,legacySubscriber:t})}]),Object(H.a)(Wt,"goBack",[Ae]),Object(H.a)(Wt,"onNotification",[_t]),Object(H.a)(Wt,"onSeekPermission",[Mt]),Object(H.a)(Wt,"offSeekPermission",[),Object(H.a)(Wt,"grantPermission",[Dt]),Wt),Yt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.isEmpty()){e.next=6;break}return t=g.popNextCmd(),a=t,n=Object(m.a)(a)||Object(x.a)(a)||Object(y.a)(a)||Object(I.a)(),c=n[0],o=n.slice(1),e.next=4,$t.apply(void 0,[g.getBufferQueue(),c].concat(Object(r.a)(o)));case 4:return e.next=6,Yt();case 6:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.isFlushingInProgress()){e.next=4;break}g.setIsReFlushPending(!0),e.next=13;break;case 4:return g.setIsFlushingInProgress(!0),e.next=7,Yt();case 7:if(g.setIsFlushingInProgress(!1),g.isEmpty(g.getBufferQueue())||g.move(g.getBufferQueue(),g.getQueue()),!g.isReFlushPending()){e.next=13;break}return g.setIsReFlushPending(!1),e.next=13,Xt();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();unction Zt(){return Zt=Object(c.a)(Object(a.a)().mark((function e(t,n,c){var o,i,s,u,l,f=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:for(o=f.length,i=new Array(o>3?o-3:0),s=3;s<o;s++)i[s-3]=f[s];return u=[w.a.emit.bind(w.a)].concat(i),e.prev=4,e.next=7,n.apply(void 0,Object(r.a)(u));case 7:l=e.sent,c&&c(void 0,l),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),Object(k.a)(e.t0),c&&c(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])}))),Zt.apply(this,arguments)}unction Jt(){return Jt=Object(c.a)(Object(a.a)().mark((function e(){var t,n,r,c,o,i,s,u,l,f=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=f.length>0&&void 0!==f[0]?f[0]:g.getQueue(),n=f.length>1?f[1]:void 0,r=Kt[n]&&Kt[n][0],c=Kt[n]&&Kt[n][1],o=r&&r.dependecies&&r.dependecies.includes(K),i=r&&r.dependecies&&r.dependecies.includes(Y),s=f.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=f[l];if(i||o){e.next=8;break}return Qt.apply(void 0,[n,r,c].concat(u)),e.abrupt("return");case 8:if(!o||i){e.next=17;break}if(!A()){e.next=12;break}return c&&c(V.a.CHAT_UNAVAILABLE),e.abrupt("return");case 12:if(!N()){e.next=15;break}return g.addCmdToQueue(t,[n].concat(u)),e.abrupt("return");case 15:return Qt.apply(void 0,[n,r,c].concat(u)),e.abrupt("return");case 17:if(!i||o){e.next=26;break}if(!B()&&!G()){e.next=21;break}return c&&c(V.a.CHAT_UNAVAILABLE),e.abrupt("return");case 21:if(!F()){e.next=24;break}return g.addCmdToQueue(t,[n].concat(u)),e.abrupt("return");case 24:return Qt.apply(void 0,[n,r,c].concat(u)),e.abrupt("return");case 26:if(!(B()||G()||A())){e.next=29;break}return c&&c(V.a.CHAT_UNAVAILABLE),e.abrupt("return");case 29:if(!F()&&!N()){e.next=32;break}return g.addCmdToQueue(t,[n].concat(u)),e.abrupt("return");case 32:Qt.apply(void 0,[n,r,c].concat(u));case 33:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}var en=n(128),tn=(n(53),n(129),n(80),n(7),n(55),n(911),n(398)),nn=n.n(tn),rn=n(1128),an=n.n(rn),cn=n(679),on=n(519),sn=n(440),un=n(506),ln=n(899),fn=n(474),bn=(n(441),n(133),function(e){var t=screen.width/2,n=screen.height/2,r=t-t/2,a=n-n/2;return window.open(e,"_blank","height=".concat(n,",width=").concat(t,",top=").concat(a,",left=").concat(r))}),dn=n(509),pn=n(643),vn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o,i,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ssoId,r=t.conversationId,c=t.messageId,o=Object(p.a)(),i=o.appId,e.t0={key:"idpId",value:n},e.next=6,Object(un.a)(i);case 6:return e.t1=e.sent,e.t2={key:"x-chat-token",value:e.t1},s=[e.t0,e.t2],r&&s.push({key:"conversationId",value:r}),c&&s.push({key:"messageId",value:c}),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),On="".concat("https://prod2-live-chat.sprinklr.com","/api"),jn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ssoId,r=t.conversationId,c=t.messageId,e.next=3,vn({ssoId:n,conversationId:r,messageId:c});case 3:return o=e.sent,i=Object(dn.e)(o),e.abrupt("return","".concat(On,"/livechat/authenticate/begin?").concat(i));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hn=function(e){var t,n,r;return(null===(t=Object(p.a)().user)||void 0===t?void 0:t.isSSOAuthorized)&&!(null===(n=e.otherConfigs)||void 0===n||null===(r=n.settings)||void 0===r||!r.autoLoginSSOId)},gn=function(){var e=window.document.createElement("iframe");e.id="subscriberIframe",e.src="".concat("https://live-chat-static.sprinklr.com","/api/livechat/authenticate/listener.html?appId=").concat(Object(p.a)().appId),e.style.visibility="hidden",window.document.body.appendChild(e)},mn=xn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,o,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ssoId,r=t.conversationId,o=t.messageId,e.t0=bn,e.next=4,jn({ssoId:n,conversationId:r,messageId:o});case 4:return e.t1=e.sent,i=(0,e.t0)(e.t1),gn(),e.abrupt("return",new Promise((function(e,t){var n,r;r=Object(pn.d)("/logout",(),n=setInterval((function(){i&&i.closed&&(s(),t())}),1500);var o=function(){var n=Object(c.a)(Object(a.a)().mark((function n(r){var c,o;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.origin.match(/(sprinklr\.com)/g)){n.next=15;break}return n.prev=1,c=JSON.parse(r.data),o=c.params,n.next=5,Object(un.l)(Object(p.a)().appId,o.authToken);case 5:e(o),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),t(),Object(Tt.b)(n.t0);case 12:return n.prev=12,s(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,8,12,15]])})));return function(e){return n.apply(this,arguments)}}(),s=function(){clearInterval(n),r&&r(),window.removeEventListener("message",o)};window.addEventListener("message",o)})).finally(());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yn=n(434),In=n(415),wn=["id","hash"],kn=function(e){var t=e.handshakeDetails,n=e.applicationConfig,r=e.getSessionToken;if(r&&Object(Je.b)({getSessionToken:r}),t&&Object(Je.b)({userId:t.chatUser.userId}),n){var a=on.a.getAutoExpireUserSessionTimeInMinutes(n),c=f()(n,"otherConfigs.settings.autoExpiryConfig.alertTime");Object(Je.b)({sessionExpiryTimeInMinutes:a,sessionExpiryAlertTime:c})}},En=function(e){if(e)try{return JSON.parse(atob(e.split(".")[1]))}catch(t){console.error("Unable to parse user token when isSSOAuthorized",e)}return J.a},Cn=function(e){var t=!sn.a.isDebugModeDisabled(e.otherConfigs);window.sprDebugLog=,Tn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.appId,r=t.user,c=null===r||void 0===r?void 0:r.authToken,!an()(r,"isSSOAuthorized")){e.next=10;break}return e.t0=En,e.next=5,Object(un.a)(n);case 5:if(e.t1=e.sent,o=(0,e.t0)(e.t1),!Object(yn.b)(o.chatUserId)){e.next=10;break}return e.next=10,Object(un.h)(n);case 10:if(!c){e.next=15;break}return e.next=13,Object(un.h)(n);case 13:return e.next=15,Object(un.l)(n,c);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Sn(e){return _n.apply(this,arguments)}function _n(){return(_n=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(un.e)(t);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,e.next=12,Object(un.b)(t,ln.a);case 12:r=e.sent,e.next=18;break;case 15:e.prev=15,e.t1=e.catch(9),console.warn(e.t1);case 18:return e.prev=18,e.next=21,Object(un.b)(t,ln.b);case 21:c=e.sent,e.next=27;break;case 24:e.prev=24,e.t2=e.catch(18),console.warn(e.t2);case 27:return i=(i=c||n)===(o=r||c||n)?void 0:i,e.abrupt("return",{primaryToken:o,secondaryToken:i});case 31:case"end":return e.stop()}}),e,null,[[0,6],[9,15],[18,24]])})))).apply(this,arguments)}function An(e){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o,i,s,u,l,b,p,v,O,j,h,g,m,x,y,I;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.appId,r=t.user,c=t.userContext,o=t.sessionOrigin,i=t.customUser,s=t.otp,u=t.locale,l=t.meetingId,b=nn()(r,["authToken","isSSOAuthorized","oneTimeToken"]),!!!o){e.next=12;break}return e.next=5,Sn(n);case 5:O=e.sent,j=O.primaryToken,h=O.secondaryToken,p=j,v=h,e.next=15;break;case 12:return e.next=14,Object(un.e)(n);case 14:p=e.sent;case 15:return g={appId:n,oneTimeToken:f()(r,"oneTimeToken"),chatSessionToken:p,secondaryChatToken:v,page:Object(fn.b)(),pageTitle:Object(fn.c)(),referralPage:Object(fn.d)(),timezone:Object(fn.f)(),userAgent:Object(fn.e)(),enforcedLocale:u,fallbackLocales:Object(In.a)(),meetingId:l,otp:s,customUser:i},d()(b)||(x=(m=b).id,y=m.hash,I=Object(st.a)(m,wn),Object.assign(g,{chatUser:Object(he.a)({userId:x},I),chatUserSignature:y})),d()(c)||Object.assign(g,{customContext:c}),e.abrupt("return",g);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((,e)})));return function(t){return e.apply(this,arguments)}}(),Pn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(un.i)(t,ln.d);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0);case 8:return e.prev=8,e.next=11,Object(un.i)(t,ln.b);case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(8),console.warn(e.t1);case 16:case"end":return e.stop()}}),e,null,[[0,5],[8,13]])})));return function(t){return e.apply(this,arguments)}}(),Ln=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=cn.a,e.next=3,An(t);case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:if(n=e.sent,!!!t.sessionOrigin){e.next=11;break}return e.next=11,Pn(t.appId);case 11:return e.next=13,Object(un.l)(t.appId,n.chatSessionToken);case 13:if(n.userPreferences){e.next=18;break}return e.next=16,Object(un.g)(n.chatUser.userId);case 16:return r=e.sent,e.abrupt("return",Object(he.a)(Object(he.a)({},n),{},{userPreferences:r}));case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o,i,s,u,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([Rn(t),Ln(t)]);case 2:if(n=e.sent,r=Object(en.a)(n,2),c=r[0],o=r[1],"rejected"!==c.status&&"rejected"!==o.status){e.next=8;break}return e.abrupt("return",[c,o]);case 8:if(i=c.value,o.value.chatUser.locale=o.value.chatUser.locale||i.defaultLocale,!Object(v.Q)()&&hn(i)){e.next=12;break}return e.abrupt("return",[c,o]);case 12:if(e.prev=12,!(u=null===(s=i.otherConfigs.settings)||void 0===s?void 0:s.autoLoginSSOId)){e.next=17;break}return e.next=17,xn({ssoId:u});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),Object(Tt.b)(e.t0);case 22:return e.next=24,Ln(t);case 24:return(l=e.sent).chatUser.locale=l.chatUser.locale||i.defaultLocale,e.abrupt("return",[c,{value:l,status:"fulfilled"}]);case 27:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(t){return e.apply(this,arguments)}}(),Dn=Un=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(L),_(!1),e.next=4,Xt();case 4:Object(Ie.a)({topic:ue.b,payload:{error:!0}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fn=n(493),Bn=n(2123),Gn=n(2021),Vn=n(2124),Hn=Object(Bn.a)("isSSOAuthorized"),zn=Object(Bn.a)("authToken"),Wn=Object(Bn.a)("oneTimeToken"),qn=Object(O.a)((function e(){Object(j.a)(this,e)}));qn.isSSOAuthorized=Object(Gn.a)(Hn),qn.getAuthToken=Object(Gn.a)(zn),qn.hasIsSSOAuthorized=function(e){return e&&Object(Vn.a)("isSSOAuthorized",e)},qn.getOneTimeToken=Object(Gn.a)(Wn);var Kn=n(144),Yn=n(747),Xn=n.n(Yn);function Qn(e){var t=Object(Tt.a)();t&&t.setUser&&t.setUser({id:e.userId,username:Xn()("".concat(e.firstName||""," ").concat(e.lastName||"")),email:e.email||""})}var Zn=function(e,t){var n=Object(p.a)().appId,r=e.chatUser;if(f()(t,"otherConfigs.settings.enableSentry")&&!Object(Tt.a)()){var a=window.document.createElement("script");a.src="https://".concat("live-chat-static.sprinklr.com","/sentry/sentry.min.js"),a.crossOrigin="anonymous",a.onload=function(){Object(Tt.a)().onLoad((function(){Object(Tt.a)().init({tunnel:"".concat("https://prod2-live-chat.sprinklr.com","/sentry"),ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","Network Error"],denyUrls:[/extension:\/\//i]}),Object(Tt.a)().setTag("appId",n),Object(Tt.a)().setTag("appVersion","yPhlOkCSr"),Qn(r)}))},window.document.body.appendChild(a)}},$n=n(357),Jn=n.n($n),er=n(520),tr=n.n(er),nr=n(496),rr=n(358),ar=n(365),cr=n(1453),or=n(1131),ir=n(596),sr=n.n(ir),ur=n(394),lr=n(579),fr=n(571),br=n(503),dr=n(380),pr=function(e){return Object(br.c)(Object(dr.b)(e))},vr=function(e){var t=Object(lr.a)(),n=Object(ur.a)(),r=Object(ar.d)(pr),o=Object(v.P)(),i=on.a.getVisibilityConfigFilter(n),s=Object(fr.a)(o?void 0:i,{logOnSuccess:!0,defaultValue:!1}).hasPassed,u=!s&&r;return Object($n.useEffect)((function(){s&&Object(k.a)("Sprinklr Chat hidden by visibility criteria"),r||Object(k.a)("Sprinklr Chat disabled by sdk"),_(u),Object(Ie.a)({topic:ue.c,payload:{data:{isChatVisible:u}}})}),[s,r,u]),Object($n.useEffect)((function(){var e=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt();case 2:Object(Ie.a)({topic:ue.a,payload:{}}),Object(Ie.a)({topic:ue.b,payload:{error:!1}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){Object(Ie.a)({topic:ue.c,payload:{data:{isChatVisible:!1}}})}}),[]),sr()((function(){Xt()}),[t]),u?e.children:null},Or=Jn.a.memo(vr),jr=n(835),hr=n(942),gr=function(e){return Object(rr.jsx)(hr.a,{history:e.history},Object(rr.jsx)(jr.b,null,e.children))},mr=n(619),xr=n(369),yr=n(360),Ir=(n(210),n(445)),wr=n(375),kr=n(1168),Er=n(511),Cr=n(359),Tr=n(564),Sr=n(572),_r=n(1170),Ar=n(839),Nr=n(361),Rr=n(364);var Pr=function(e){return Object(rr.css)("fill:",Object(Nr.b)("white")({theme:e}),";height:100%;width:100%;")},Lr=Object(Cr.a)("div",{target:"e12trxni0"})("position:fixed;top:0;left:0;z-index:",(function(e){return Object(Nr.f)("frame.zIndex")(e)}),";transform:translatez(",(function(e){return Object(Nr.f)("frame.translateZ")(e)}),"px) !important;height:100%;width:100%;"),Mr=Object(Cr.a)(Sr.a,{target:"e12trxni1"})({name:"774i4t",styles:"height:100%;width:100%;border-width:0px;"}),Dr=function(e){return Object(rr.css)(".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:",Object(Tr.l)(.2,Object(Nr.b)("charcoal")({theme:e})),";}")},Ur=Object(Cr.a)(Ar.c,{target:"e12trxni2"})({name:"hgqvtn",styles:"width:48px;height:48px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"}),Fr=Object(Cr.a)(Ar.c,{target:"e12trxni3"})({name:"uwwqev",styles:"width:100%;height:100%;"}),Br=Object(Cr.a)(_r.a,{target:"e12trxni4"})("margin-top:var(--spr-lc-safe-area-top);",(function(e){var t=e.isPhone,n=e.direction;return"".concat(t?Object(Rr.c)("right: calc(20px + var(--spr-lc-safe-area-right))","left: calc(20px + var(--spr-lc-safe-area-left))")({direction:n}):Object(Rr.c)("right: calc(40px + var(--spr-lc-safe-area-right))","left: calc(40px + var(--spr-lc-safe-area-left))")({direction:n}),";")}),""),Gr=n(370),Vr=n(371),Hr=n(372),zr=n(652),Wr=Object(yr.g)({preview:{id:"preview",defaultMessage:"Preview"}}),qr=Object(yr.h)((function(e){var t=e.previewItem,n=e.intl,r=Object(wr.b)(),a=Object(Gr.a)(),c=Object(Ir.a)(),o=!!t&&t.type!==zr.a.DIALOGUE,i=Object(Vr.a)().direction,s=Object($n.useCallback)((,[c]);return Object(rr.jsx)(Lr,{className:"spr-chat__modal-box spr-live-chat-frame"},Object(rr.jsx)(Mr,{name:"spr-chat__modal-frame","aria-label":n.formatMessage(Wr.preview),title:n.formatMessage(Wr.preview)},Object(rr.jsx)(rr.Global,{styles:Dr(r)}),Object(rr.jsx)($n.Suspense,{fallback:Object(rr.jsx)(Ur,null,Object(rr.jsx)(Fr,{className:"center-x center-y"}))},Object(rr.jsx)(kr.a,{previewItem:t})),o&&Object(rr.jsx)(Br,{Icon:Er.a,iconCss:Pr(r),iconName:Hr.b.CLOSE,"aria-label":Hr.b.CLOSE,direction:i,isPhone:a,onClick:s})))})),Kr=function(e){if(!e.search.includes("preview=1"))return null;var t=f()(e.state,"sprPreview.type");switch(t){case zr.a.DIALOGUE:return{type:t,message:f()(e.state,"sprPreview.message"),title:f()(e.state,"sprPreview.title"),cancelLabel:f()(e.state,"sprPreview.cancelLabel"),confirmationLabel:f()(e.state,"sprPreview.confirmationLabel"),onConfirm:f()(e.state,"sprPreview.onConfirm"),onCancel:f()(e.state,"sprPreview.onCancel")};case zr.a.IMAGE:case zr.a.VIDEO:return{type:t,url:f()(e.state,"sprPreview.url"),downloadParams:f()(e.state,"sprPreview.downloadParams")};default:return null}},Yr=function(){var e=Object(Ir.a)().location,t=Object($n.useMemo)((function(){return Kr(e)}),[e.search,e.state]);return t?Object(rr.jsx)(qr,{previewItem:t}):null},Xr=n(383),Qr=function(){return n.e(18).then(n.bind(null,2099))},Zr=function(e){return n(1612)("./".concat(e.toLowerCase(),"/pages"))},$r=Object(Xr.a)(Qr);$r.preload=function(e){return Promise.all([Zr(e),Qr()])};var Jr=$r,ea=Object(Cr.a)("div",{target:"e1kt7r8v0"})("@media screen and (min-width:",649,"px) and (min-height:",601,"px){border-radius:8px;}"),ta=n(841),na=n(1173),ra=n(385),aa=function(){return Object(rr.jsx)(ta.b,{className:"flex-column-container full-height"},Object(rr.jsx)(na.a,null),Object(rr.jsx)("div",{className:"flex-item-1 p-x-4 p-y-4 p-t-6"},Object(rr.jsx)(ta.a,{className:"full-height"},Object(rr.jsx)(ra.c,{className:"flex-row-container center-x-y full-height"}))))},ca=n(842),oa=function(){return Object(rr.jsx)("div",{className:"flex-column-container full-height"},Object(rr.jsx)(ca.c,null,Object(rr.jsx)(ca.b,null)),Object(rr.jsx)("div",{className:"flex-item-1 spr"},Object(rr.jsx)(ra.c,{className:"flex-row-container center-x-y full-height"})))},ia=n(947),sa=n(601),ua=n(521),la=function(){var e=Object(ua.a)().isDarkMode;return Object(rr.jsx)("div",{className:"flex-column-container full-height"},Object(rr.jsx)(sa.b,null,Object(rr.jsx)(sa.a,null)),Object(rr.jsx)(ia.a,{isDarkMode:e,className:"flex-item-1 spr"},Object(rr.jsx)(ra.c,{className:"flex-row-container center-x-y full-height"})))},fa=function(){var e=Object(v.z)()===qt.b;return"/home"===Object(Ir.a)().location.pathname&&!Object(v.F)()?e?Object(rr.jsx)(oa,null):Object(rr.jsx)(aa,null):Object(rr.jsx)(la,null)},ba=n(697),da=function(){var e=Object(ba.a)(),t=Object($n.useState)(),n=Object(en.a)(t,2),r=n[0],a=n[1];return Object($n.useLayoutEffect)((function(){Jr.preload(e).then(()}),[]),Object(rr.jsx)(ea,{className:"flex-column-container full-height full-width spr ovf-hidden"},r?Object(rr.jsx)($n.Suspense,{fallback:null},Object(rr.jsx)(Jr,{pages:r})):Object(rr.jsx)(fa,null))},pa=n(377),va=n(752),Oa=n.n(va),ja=n(522),ha=n(949),ga=n(1174),ma=n(950),xa=n(382),ya=n(573),Ia=n(428),wa=n(395),ka=function(e){return Object(ya.d)(Object(xa.b)(e))},Ea=function(e){return Object(ya.f)(Object(xa.b)(e))},Ca=function(e){return Object(br.g)(Object(dr.b)(e))},Ta=function(e){return Object(ya.r)(Object(xa.b)(e))},Sa=function(e){return Object(ya.i)(Object(xa.b)(e))},_a=function(e){var t=Object(Gr.a)(),n=Object(ar.d)(Ea),r=Object(ar.d)(ka),a=Object(ar.d)(Ta),c=Object(ar.d)(Ca),o=Object(pa.a)(wa.g),i=Object(ar.d)(Sa),s=Object(ja.a)(),u=n.state,l=r.state,f=Oa()(u),b=Oa()(l);return Object($n.useEffect)((function(){c&&(t&&u&&u!==f||l===Ia.f.WAITING)&&o(!1)}),[c,u,f,o,l,b]),Object($n.useEffect)((function(){var e=function(){s.info({message:"Currently on live chat tab: ".concat(!document.hidden)})};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[s]),d()(n)&&(a||d()(r))||t&&c&&!i?null:Object(rr.jsx)($n.Suspense,{fallback:null},Object(rr.jsx)(ha.a,Object(xr.a)({},e,{outgoingCallDetails:n,incomingCallDetails:r})))},Aa=function(e){return Object(ya.c)(Object(xa.b)(e))},Na=function(e){return Object(ya.n)(Object(xa.b)(e))},Ra=function(e){var t=Object(ar.d)(Aa),n=Object(ar.d)(Na);return Object(rr.jsx)(ma.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId},Object(rr.jsx)(ga.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId,isAudioCall:n},Object(rr.jsx)(_a,e)))},Pa=Jn.a.memo(Ra),La=n(1450),Ma=n(951),Da=n(757),Ua=n(410),Fa=n(952);var Ba=Object(Xr.a)((function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,2095))})),Ga={endCobrowseSession:Da.c,resumeCobrowseSession:Da.n,markCobrowseSessionFailed:Da.e},Va=function(){var e=Object(ar.d)(dr.f),t=Object($n.useMemo)((function(){return function(t){return Object(Ua.g)(Object(xa.h)(t),e.agentId)}}),[e.agentId]),n=Object(ar.d)(t),r=Object(pa.a)(Ga),o=r.endCobrowseSession,i=r.resumeCobrowseSession,s=r.markCobrowseSessionFailed,u=!Object(lr.a)()),l=Object($n.useCallback)((,[e.messageId]),f=Object($n.useMemo)((,[]).appId;return Object($n.useEffect)((function(){if(u){var e=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,r,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma.a.get(f);case 2:t=e.sent;try{t&&(n=t.conversationId,r=t.messageId,c=t.agentId,i({state:{conversationId:n,messageId:r,agentId:c}}))}catch(a){s({reason:Fa.a.RESUME_SESSION_FAILED})}case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[i,f,u]),d()(e)?null:Object(rr.jsx)($n.Suspense,{fallback:Object(rr.jsx)(La.a,{sessionState:e.sessionState,onStopSession:l,brandUser:n})},Object(rr.jsx)(Ba,{cobrowseState:e}))},Ha=Object(Xr.a)((function(){return Promise.all([n.e(0),n.e(122)]).then(n.bind(null,2113))})),za=function(){var e=Object(ur.a)();return null!==e&&void 0!==e&&e.autoExpireUserSessionTimeInMinutes?Object(rr.jsx)($n.Suspense,{fallback:null},Object(rr.jsx)(Ha,null)):null},Wa=n(405),qa=n.n(Wa),Ka=n(549),Ya=n.n(Ka),Xa=n(471),Qa=n(653),Za=n(374),$a=n(617),Ja=Jn.a.createContext(null),ec=function(e,t){if(!e)return null;var n=e.getBoundingClientRect(),r=n.width,a=n.height,c=n.left,o=n.top;return{width:r,height:a,left:c,right:t.innerWidth-c-r,bottom:t.innerHeight-o-a}},tc=function(e){var t,n=e.children,r=window.parent,a=!(null===(t=Object(Za.a)().trigger)||void 0===t||!t.useCustomTrigger),c=Object(p.a)().triggerContainer,o=Object($n.useRef)(!0),i=Object($a.a)(),s=Object($n.useMemo)((function(){return a&&c?r.document.querySelector(c):null}),[c]),u=Object($n.useState)((function(){return ec(s,r)})),l=Object(en.a)(u,2),f=l[0],b=l[1],d=Object($n.useCallback)(Ya()((,200),[]),v=Object(Xa.a)(r,d),O=Object(Qa.a)(r,d);return o.current&&(o.current=!1,s&&(v(s),O(s))),Object($n.useLayoutEffect)((,[i]),a&&!s?(Object(k.a)('Error in Sprinklr Live Chat. "triggerContainer" missing in window.sprChatSettings.'),null):Object(rr.jsx)(Ja.Provider,{value:f},n)},nc=rc=n(386),ac=Object(Xr.a)((),cc=function(e){return Object(br.f)(Object(dr.b)(e))},oc=function(e){return Object(rc.b)(Object(rc.q)(Object(xa.c)(e)))},ic=function(e){var t,n=Object(ar.d)(dr.d),r=Object(ar.d)(cc),a=Object(ar.d)(oc),c=Object(Za.a)(),o=nc(),i=!(null===c||void 0===c||null===(t=c.proactivePrompt)||void 0===t||!t.showWithBoxOpen),s=Object($n.useRef)();s.current=Object($n.useMemo)((,[n]);var u=r&&!o&&!i;return d()(s.current)||u||!a?null:Object(rr.jsx)($n.Suspense,{fallback:null},Object(rr.jsx)(ac,Object(xr.a)({},e,{visiblePrompt:s.current,customTriggerPosition:o,showWithBoxOpen:i})))},sc=n(618);var uc=Object(Cr.a)(Sr.a,{target:"ewsnucf0"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),lc=Object(Cr.a)("div",{target:"ewsnucf1"})("height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-image:",Object(Nr.f)("page.gradients"),";background-color:",Object(Nr.f)("page.backgroundColor"),";"),fc=Object(Cr.a)("div",{target:"ewsnucf2"})("height:calc( 100% - ",(function(e){var t=Object(Nr.c)("page.minPadding",{defaultUnit:"px"})(e);return 2*t.absoluteValue+t.unit})," );width:calc( 100% - ",(function(e){var t=Object(Nr.c)("page.minPadding",{defaultUnit:"px"})(e);return 2*t.absoluteValue+t.unit})," );border-radius:",(function(e){return Object(Nr.c)("page.minPadding",{defaultUnit:"px"})(e).absoluteValue?"8px":"0px"}),";box-shadow:",(function(e){return Object(Nr.f)("frame.boxShadow")(e)}),";overflow:hidden;background-color:var(--spr-lc-bgc-1);",(function(e){return!e.isPhone&&!Object(sc.a)()&&"max-width: ".concat(Object(Nr.f)("page.maxWidth")(e),";\n    max-height: ").concat(Object(Nr.f)("page.maxHeight")(e),";")}),""),bc={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"},dc=n(413),pc=n(698),vc=(n(205),n(603)),Oc=["/conversation/"],jc={survey:vc.a.SURVEY,401:vc.a[401],home:vc.a.HOME,"guided-workflow":vc.a.GUIDED_WORKFLOW,logout:vc.a.LOGOUT},hc=function(e){var t,n=null===e||void 0===e?void 0:e.split("/");if(n&&n.length>1)switch(n[1]){case"knowledge-base":n.length>2&&(t="article"===n[2]?vc.a.KNOWLEDGE_BASE:vc.a.KNOWLEDGE_BASE_LIST);break;case"conversation":n.length>3&&"survey"===n[3]?t=vc.a.SURVEY:n.length>2&&(t="all"===n[2]?vc.a.CONVERSATION_LIST:vc.a.CONVERSATION);break;default:t=jc[n[1]]}return t},gc=n(431),mc=function(){var e,t=Object(dc.a)(),n=Object(Ir.a)(),r=null===n||void 0===n||null===(e=n.location)||void 0===e?void 0:e.pathname,a=null===n||void 0===n?void 0:n.action,c=Object($n.useMemo)((function(){return hc(r)}),[r]);Object($n.useEffect)((function(){c&&function(e,t){return!("REPLACE"===t&&Oc.filter(().length)}(r,a)&&t({action:gc.a.PAGE_OPENED,additional:{value:c}})}),[c,r])},xc=n(387),yc=function(e){var t=Object(Gr.a)(),n=Object(dc.a)();return mc(),Object($n.useEffect)((function(){return n({action:gc.a.CONVERSATION_WINDOW_OPENED}),),[]),Object(rr.jsx)(lc,null,Object(rr.jsx)(fc,{ref:e.pageBoxRef,className:"spr",isPhone:t},Object(rr.jsx)(da,null)))},Ic=Object(yr.h)((function(e){var t,n,r,a=Object(ur.a)(),c=Object($n.useRef)(),o=e.intl.formatMessage,i=Object(pc.a)(),s=Object(pa.a)(nr.e),u=!(null===(t=a.otherConfigs.trigger)||void 0===t||!t.useCustomTrigger),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(rr.css)("html,body{height:100%;}body{margin:0;}",e,"")}(null===(n=a.otherConfigs)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.pageGlobalStyles),f=Object($n.useCallback)((function(){i(c),s()}),[i,s]);return Object(rr.jsx)(Jn.a.Fragment,null,Object(rr.jsx)(rr.Global,{styles:l}),Object(rr.jsx)(uc,{"aria-label":o(xc.a.liveChat),name:"spr-chat__page-frame",contentDidMount:f,title:o(xc.a.liveChat)},Object(rr.jsx)(rr.Global,{styles:bc}),Object(rr.jsx)(za,null),Object(rr.jsx)(yc,Object(xr.a)({},e,{pageBoxRef:c}))),u?Object(rr.jsx)(tc,null,Object(rr.jsx)(ic,null)):null,Object(rr.jsx)(Pa,{parentFrameRef:c}),Object(rr.jsx)(Va,null),Object(rr.jsx)(Yr,null))})),wc=n(625),kc=n(699),Ec=n(595),Cc=n.n(Ec),Tc=n(446),Sc=n(1176);var _c=Object(Cr.a)("div",{target:"e19bzbh60"})("transition:width ",Sc.a,"ms ease,max-height ",Sc.a,"ms ease;position:fixed;box-sizing:border-box;z-index:",(function(e){return Object(Nr.f)("frame.zIndex")(e)}),";padding:",(function(e){return Object(Nr.h)("frame.margin")(e)}),";transform:",(function(e){return"translateZ(".concat(Object(Nr.f)("frame.translateZ")(e),"px)")}),";",(function(e){return function(e){var t=Object(Tc.b)(Object(Nr.f)("frame.marginTop")({theme:e})),n=Object(Tc.b)(Object(Nr.f)("frame.marginBottom")({theme:e})),r=Object(Tc.b)(Object(Nr.f)("frame.marginLeft")({theme:e})),a=Object(Tc.b)(Object(Nr.f)("frame.marginRight")({theme:e}));return Cc()([t,n,r,a],()}(e.theme)&&"background-color: ".concat(Object(Tr.j)(Object(Nr.f)("frame.overlay.opacity")(e),Object(Nr.f)("frame.overlay.backgroundColour")(e)),";")}),";"),Ac=Object(Cr.a)(_c,{target:"e19bzbh61"})((,""),Nc=Object(Cr.a)(_c,{target:"e19bzbh62"})((function(e){var t=e.isTriggerHiddenWhenMaximised,n=e.theme,r=e.isMaximized,a=e.isPhone,c=e.customTriggerPosition;return Object(Sc.b)({isTriggerHiddenWhenMaximised:t,theme:n,isMaximized:r,isPhone:a,customTriggerPosition:c})}),""),Rc=Object(Cr.a)("div",{target:"e19bzbh63"})("height:100%;width:100%;position:relative;overflow:hidden;box-shadow:",(function(e){return Object(Nr.f)("frame.boxShadow")(e)}),";border-radius:",(function(e){return Object(Nr.a)("frame.borderRadius")(e)}),";",(function(e){var t=Object(Tc.b)(Object(Nr.f)("frame.marginTop")(e))>0?Object(Nr.f)("frame.borderRadius")(e):0,n=Object(Tc.b)(Object(Nr.f)("frame.marginBottom")(e))>0?Object(Nr.f)("frame.borderRadius")(e):0;return e.isPhone&&"\n    border-top-left-radius: ".concat(t,";\n    border-top-right-radius: ").concat(t,";\n    border-bottom-left-radius: ").concat(n,";\n    border-bottom-right-radius: ").concat(n,";\n    box-shadow: none;")}),";"),Pc="spr-chat-box-anim",Lc=Object(Cr.a)(Sr.a,{target:"e19bzbh64"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),Mc={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"},Dc=n(1184),Uc=n(477),Fc=function(e){return Object(br.g)(Object(dr.b)(e))},Bc=Object(yr.h)((function(e){var t,n=Object(ar.d)(Fc),r=e.intl.formatMessage,a=Object(Za.a)(),c=!(null===a||void 0===a||null===(t=a.trigger)||void 0===t||!t.hideWhenOpen),o=Object(dc.a)(),i=Object(Gr.a)(),s=Object($n.useRef)(null),u=Object(pc.a)(),l=Object(pa.a)(nr.e),f=Object($n.useState)(!1),b=Object(en.a)(f,2),d=b[0],p=b[1],v=Object($n.useState)(!1),O=Object(en.a)(v,2),j=O[0],h=O[1],g=Object(wr.b)(),m=Object(ar.d)(xa.h),x=Object(Ua.d)(m);mc();var y=Object($n.useCallback)((,[]),I=nc(),w=I?Nc:Ac;sr()((function(){var e=n?Uc.a.CONVERSATION_WINDOW_CLOSED:Uc.a.CONVERSATION_WINDOW_OPENED;o({action:e})}),[n]);var k=Object($n.useCallback)((,[u]);sr()((function(){l()}),[x]);var E,C=Object($n.useMemo)((,[y,d]),T=(E={theme:g},Object(rr.css)("\n  .spr-chat__box.".concat(Pc,"-enter {\n    opacity: 0;\n    transform: translateZ(").concat(Object(Nr.f)("frame.translateZ")(E),"px) translateY(20px) ;\n  }\n\n  .spr-chat__box.").concat(Pc,"-enter.").concat(Pc,"-enter-active {\n    opacity: 1;\n    transform: translateZ(").concat(Object(Nr.f)("frame.translateZ")(E),"px) translateY(0px) ;\n    transition: opacity 0.16s linear, transform 0.08s linear;\n  }\n\n  .spr-chat__box.").concat(Pc,"-enter-done {\n    transform: translateZ(").concat(Object(Nr.f)("frame.translateZ")(E),"px) ;\n  }\n\n  .spr-chat__box.").concat(Pc,"-exit {\n    opacity: 1;\n    transform: translateZ(").concat(Object(Nr.f)("frame.translateZ")(E),"px) translateY(0);\n  }\n\n  .spr-chat__box.").concat(Pc,"-exit.").concat(Pc,"-exit-active {\n    opacity: 0;\n    transform: translateZ(").concat(Object(Nr.f)("frame.translateZ")(E),"px) translateY(20px);\n    transition: opacity 0.16s linear, transform 0.08s linear;\n  }\n"),""));return Object(rr.jsx)(Jn.a.Fragment,null,Object(rr.jsx)(rr.Global,{styles:T}),Object(rr.jsx)(kc.CSSTransition,{in:!n,classNames:Pc,timeout:{enter:500,exit:500},mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(rr.jsx)(Dc.a.Provider,{value:C},Object(rr.jsx)(w,{className:"spr-chat__box spr-live-chat-frame",ref:e.frameRef,isPhone:i,customTriggerPosition:I,isTriggerHiddenWhenMaximised:c,isMaximized:d},Object(rr.jsx)(Rc,{isPhone:i},Object(rr.jsx)(Lc,{"aria-label":r(xc.a.liveChat),name:"spr-chat__box-frame",isPhone:i,contentDidMount:k,title:r(xc.a.liveChat)},Object(rr.jsx)(rr.Global,{styles:Mc}),Object(rr.jsx)("div",{className:"full-height full-width",ref:s},Object(rr.jsx)(za,null),Object(rr.jsx)(da,null))))))))})),Gc=Jn.a.forwardRef((),Vc=n(1068),Hc=function(){var e=Object($n.useRef)(null);return Object(rr.jsx)(tc,null,Object(rr.jsx)(ic,{chatBoxFrameRef:e}),Object(rr.jsx)(Vc.a,null),Object(rr.jsx)(Gc,{ref:e}),Object(rr.jsx)(Pa,{parentFrameRef:e}),Object(rr.jsx)(Va,null),Object(rr.jsx)(Yr,null))},zc=n(735),Wc=n(684),qc=n(1167),Kc=function(e){var t=Object($n.useState)(null);return Object(rr.jsx)(qc.a.Provider,{value:t},e.children)},Yc=n(551),Xc=n(1159),Qc=n(903),Zc=n(1163),$c=n(803),Jc=Jn.a.createContext("MODERN"),eo=function(e){return Object(rr.jsx)(Jc.Provider,{value:e.skin},e.children)},to=n(1177),no=n(1178),ro=n(39),ao=n.n(ro);var co=function(e){var t=e.isDarkMode,n=e.theme,r=e.targetDocument,a=e.container,c=e.children,o=Object($n.useMemo)((function(){var e=r&&a?r.querySelector(a):null,c=ao()(t?n.tokens.dark:nn()(n.tokens,"dark"),(function(e,t,n){return"".concat(e).concat(n,":").concat(t,";")}),"");return{targetElement:e,cssVariables:e?t?".spr-lc-dark{".concat(c,"}"):".spr-lc-light{".concat(c,"}"):":root {".concat(c,"}")}}),[n.tokens,t,r,a]),i=o.targetElement,s=o.cssVariables;return Object($n.useLayoutEffect)((function(){i&&function(e,t){t?e.classList.contains("spr-lc-dark")||(e.classList.add("spr-lc-dark"),e.classList.remove("spr-lc-light")):e.classList.contains("spr-lc-light")||(e.classList.add("spr-lc-light"),e.classList.remove("spr-lc-dark"))}(i,t)}),[i,t]),Object(rr.jsx)(Jn.a.Fragment,null,Object(rr.jsx)(rr.Global,{styles:Object(rr.css)(s,"","")}),c)},oo=n(1069),io=function(e){var t=e.theme,n=e.isDarkMode,r=e.targetDocument,a=e.container,c=e.skipAutoGenerate,o=e.children,i=Object($n.useContext)(Jc),s=Object($n.useMemo)((function(){if(c)return t;var e=Object(oo.a)({appColors:t.colors,appTypography:t.typography,appIcons:t.icons,appTokens:t.tokens});return Object(oo.c)({appBase:e,styles:t.styles,skin:i})}),[t,i,c]);return Object(rr.jsx)(wr.a,{theme:s},Object(rr.jsx)(co,{isDarkMode:n,targetDocument:r,container:a,theme:s},o))};function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},so.apply(this,arguments)}var uo={direction:"ltr",device:"DESKTOP",skin:"CLASSIC",intl:{locale:"en",messages:{},defaultLocale:"en"},ownerDocument:window.document},lo=function(e){var t=e.direction,n=e.device,r=e.skin,a=e.ownerDocument,c=e.intl,o=e.children,i=e.themeConfig,s=Object($n.useMemo)((function(){return e=a,Object($c.a)({container:e.head});var e}),[a]);return Object(rr.jsx)(rr.CacheProvider,{value:s},Object(rr.jsx)(yr.e,c,Object(rr.jsx)(eo,{skin:r},Object(rr.jsx)(io,so({},i,{targetDocument:a}),Object(rr.jsx)(no.b,{direction:t},Object(rr.jsx)(to.b,{device:n},o))))))};lo.defaultProps=uo;var fo=lo,bo=(n(203),n(147)),po=n.n(bo),vo=n(138),Oo=n.n(vo),jo=n(1625),ho=n.n(jo),go=n(1147),mo=n.n(go),xo=n(646),yo=n.n(xo),Io=n(135),wo=n.n(Io),ko=n(548),Eo=n(626),Co=function e(t){return t?ao()(t,(function(t,n,r){return"filters"===r?(t[r]=wo()(n,(function(e){return null!==e&&void 0!==e&&e.filter&&(e.filter=Object(ko.a)(e.filter)),e})),t):(t[r]=e(n),t)}),t):t},To=function e(t,n){var a=[];return Oo()(t,(function(t,c){"filters"===c?Oo()(t,(function(e){var t=e.filter,r=e.value;d()(t)||d()(r)||a.push({field:t.field,filterType:t.fieldType||t.filterType,filters:t.filters,values:t.values,details:Object(he.a)(Object(he.a)({},t.details),{},{path:n,value:r})})})):a.push.apply(a,Object(r.a)(e(t,n?"".concat(n,".").concat(c):c)))})),a},So=function(e){var t=e.triggerAlign,n=e.frameAlign;if(t===Eo.f.LEFT)switch(n){case Eo.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT:return Eo.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT;case Eo.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT:return Eo.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT;case Eo.b.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT:return Eo.b.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT;default:return n||Eo.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT}switch(n){case Eo.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT:return Eo.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT;case Eo.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT:return Eo.b.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT;case Eo.b.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT:return Eo.b.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT;default:return n||Eo.b.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT}},_o=function(e){var t=e.framePath,n=e.passedStyleFilters,r=!1,a=!1;return Oo()(n,(function(e){var n,c,o,i,s,u,l,f,b,d;(null!==(n=e.value)&&void 0!==n&&null!==(c=n[t])&&void 0!==c&&c.align||(null===(o=e.details)||void 0===o?void 0:o.path)===t&&null!==(i=e.details)&&void 0!==i&&null!==(s=i.value)&&void 0!==s&&s.align)&&(a=!0),(null!==(u=e.value)&&void 0!==u&&null!==(l=u.trigger)&&void 0!==l&&l.align||"trigger"===(null===(f=e.details)||void 0===f?void 0:f.path)&&null!==(b=e.details)&&void 0!==b&&null!==(d=b.value)&&void 0!==d&&d.align)&&(r=!0)})),r&&!a},Ao=function(e){var t=e.styles,n=e.passedStyleFilters;if(!_o({framePath:"frame",passedStyleFilters:n}))return{styles:t,passedStyleFilters:n};var r=So({triggerAlign:Object(Nr.f)("trigger.align",Eo.f.RIGHT)({theme:{styles:t}}),frameAlign:Object(Nr.f)("frame.align")({theme:{styles:t}})});return{styles:Object(he.a)(Object(he.a)({},t),{},{frame:Object(he.a)(Object(he.a)({},(null===t||void 0===t?void 0:t.frame)||J.a),{},{align:r})}),passedStyleFilters:n}},No=function(e){var t,n=e.styles,r=e.passedStyleFilters;if(!!(null===(t=n.proactivePrompt)||void 0===t||!t.align)||!_o({framePath:"proactivePrompt",passedStyleFilters:r}))return{styles:n,passedStyleFilters:r};var a=So({triggerAlign:Object(Nr.f)("trigger.align",Eo.f.RIGHT)({theme:{styles:n}}),frameAlign:Object(Nr.f)("proactivePrompt.align")({theme:{styles:n}})});return{styles:Object(he.a)(Object(he.a)({},n),{},{proactivePrompt:Object(he.a)(Object(he.a)({},n.proactivePrompt),{},{align:a})}),passedStyleFilters:r}},Ro=function(e){var t=e.children,n=Object(ur.a)(),r=Object(ba.a)(),a=Object($n.useMemo)((function(){return po()(n.otherConfigs.theme,Object(p.a)().theme)}),[Object(p.a)().theme]),c=Object($n.useMemo)((function(){var e=Object(oo.a)({appColors:a.colors,appTypography:a.typography,appIcons:a.icons,appTokens:a.tokens});return{appBase:e,appStyleFilters:Object(oo.b)({appBase:e,legacyStyleFilters:Co(n.otherConfigs.theme.styleFilters),modernStyleFilters:n.configFilters,skin:r})}}),[a,r]),o=c.appBase,i=c.appStyleFilters,s=Object($n.useMemo)((function(){return i?me()(i)?i.map((function(e){return e.filter})):To(i,""):[]}),[i]),u=Object(fr.a)(s),l=Object($n.useMemo)((function(){var e=(me()(i)?i:s).filter((),t=function(e){var t,n=e.styles,r=e.passedStyleFilters,a=ho()(n);return null!==(t=r[0])&&void 0!==t&&t.value?ao()(r,(function(e,t){var n=t.value;return po()(e,n)}),a):(Oo()(r,(function(e){e.details&&mo()(a,e.details.path,Object(he.a)(Object(he.a)({},f()(a,e.details.path)),e.details.value))})),a)}({styles:a.styles,passedStyleFilters:e});return t=function(e){var t=e.styles,n=e.passedStyleFilters;return yo()([Ao,No])({styles:t,passedStyleFilters:n}).styles}({styles:t,passedStyleFilters:e}),Object(oo.c)({appBase:o,styles:t,skin:r})}),[a,s,u,r]);return Object(rr.jsx)(wr.a,{theme:l},t)},Po=Object(yr.h)((function(e){var t=e.intl,n=e.children,r=Object(ua.a)(),a=Object(Vr.a)(),c=Object(ba.a)(),o=Object(wr.b)(),i=Object($n.useMemo)((,[t]),s=Object($n.useMemo)((function(){return{theme:o,isDarkMode:r.isDarkMode,skipAutoGenerate:!0,container:"#spr-live-chat-app"}}),[o,r.isDarkMode]);return Object(rr.jsx)(fo,{ownerDocument:Object(p.b)().document,direction:a.direction,device:r.device,skin:c,intl:i,themeConfig:s},n)})),Lo=function(e){var t=e.children;return Object(rr.jsx)(Ro,null,Object(rr.jsx)(Po,null,t))},Mo=Jn.a.memo(Lo),Do=n(838),Uo=function(e){var t=e.id,n=e.filters,r=e.cb,a=Object(fr.a)(n);return Object($n.useEffect)((function(){r({data:{id:t,filters:n,results:me()(a)?wo()(a,():{passed:a.hasPassed}}})}),[a,n,r]),null},Fo=function(e){return Object(br.b)(Object(dr.b)(e))},Bo=Jn.a.memo((function(e){var t=Object(ar.d)(Fo);return Object(rr.jsx)(Jn.a.Fragment,null,wo()(t,(function(e,t){var n=e.filters,r=e.cb;return Object(rr.jsx)(Uo,{key:t,id:t,filters:n,cb:r})})),e.children)})),Go=n(1187),Vo=n(696);var Ho=function(e){var t=e.applicationConfig,n=e.store,r=e.history,a=Object(p.b)(),c=Object(v.P)()?Ic:Hc,o=Object($n.useCallback)((function(e){return Object(Ua.f)(Object(dr.g)(n.getState()),e)}),[]),i=Object($n.useMemo)((function(){return Object(Vo.a)(a.document)}),[a.document]);return Object($n.useEffect)((,[n]),Object(rr.jsx)(rr.CacheProvider,{value:i},Object(rr.jsx)(Qc.a,{window:a},Object(rr.jsx)(ar.a,{store:n},Object(rr.jsx)(mr.c.Provider,{value:t},Object(rr.jsx)(Kc,null,Object(rr.jsx)(or.b,null,Object(rr.jsx)(zc.a,null,Object(rr.jsx)(Do.b,null,Object(rr.jsx)(gr,{history:r},Object(rr.jsx)(Yc.b,null,Object(rr.jsx)(Wc.b,null,Object(rr.jsx)(Xc.a,null,Object(rr.jsx)(Zc.b,{history:r},Object(rr.jsx)(Bo,null,Object(rr.jsx)(Go.b,null,Object(rr.jsx)(Or,null,Object(rr.jsx)(Mo,null,Object(rr.jsx)(wc.b.Provider,{value:o},Object(rr.jsx)(cr.b,null,Object(rr.jsx)(c,null))))))))))))))))))))},zo=n(560),Wo=(n(131),,qo=Wo("CANCEL_PROMISE"),Ko=Wo("CHANNEL_END"),Yo=Wo("IO"),Xo=Wo("MATCH"),Qo=Wo("MULTICAST"),Zo=Wo("SAGA_ACTION"),$o=Wo("SELF_CANCELLATION"),Jo=Wo("TASK"),ei=Wo("TASK_CANCEL"),ti=Wo("TERMINATE"),ni=Wo("LOCATION"),ri=n(623),ai=n(848),ci=(n(204),n(366),n(391),,oi=ii=function(e){return"function"===typeof e},si=ui=Array.isArray,li=fi=function(e){return e&&ii(e.next)&&ii(e.throw)},bi=di=pi=vi=n(532),n(363),n(1626),n(201),n(743);var Oi=ji=!0),hi=function(){};var gi=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var mi=r Ii=wi=r Ci=Ti=Si=function(e){return e===ti},_i=function(e){return e===ei},Ai= Li={isEmpty:ji,put:hi,take:hi};ar Di=function(){return Li},Ui=function(e){return Mi(e,3)},Fi=function(e){return Mi(e,4)},Bi=Object.freeze({__proto__:null,none:Di,fixed:function(e){return Mi(e,1)},dropping:function(e){return Mi(e,2)},sliding:Ui,expanding:Fi}),Gi="TAKE",Vi="PUT",Hi="ALL",zi="RACE",Wi="CALL",qi="FORK",Ki="CANCEL",Yi="SELECT",Xi="ACTION_CHANNEL",Qi="CANCELLED",Zi=$i=nction ts(e){var t=Zi(Hi,e);return t.combinator=!0,t}nction as(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zi(Wi,rs(e,n))}s=as.bind(null,Oi);ar bs=fs,ds=[],ps=0;=ys=Is=ws=function(e){return function(t){return t.type===e}},ks=function(){return ji};ar Cs={type:Ko},Ts=Rs,Ps=0,Ls=ar Ds=((Rs={}).TAKE=Rs.PUT=Rs.ALL=Rs.RACE=Rs.CALL=Rs.CPS=Rs.FORK=Rs.JOIN=Rs.CANCEL=Rs.SELECT=Rs.ACTION_CHANNEL=Rs.CANCELLED=Rs.FLUSH=Rs.GET_CONTEXT=Rs.SET_CONTEXT=Rs); Gs=null,Vs=[],Hs=zs= Ys=Xs=Ys,Qs=n(545),Zs=n.n(Qs),$s=n(576),Js=n(470),eu=function(){eturn Object(O.a)(e,[{key:"setReducer",value:function(e){return this.data.reducer=e,this}},{key:"setSaga",value:function(e){return this.data.saga=e,this}},{key:"setPreloadedState",value:function(e){return this.data.preloadedState=e,this}},{key:"setHTTPClient",value:,{key:"setApplicationConfig",value:function(e){return e&&(this.data.applicationConfig=e),this}},{key:"setHandshakeDetails",value:function(e){return e&&(this.data.handshakeDetails=e),this}},{key:"setChatSettings",value:,{key:"build",value:function(){var e=this.data,t=e.applicationConfig,n=e.handshakeDetails,r=e.chatSettings,a=e.httpClient,c=e.reducer,o=e.preloadedState,i=e.saga,s=r.clientContext;Zs()(a,"HTTP Client is not configured"),Object($s.b)(a),Zs()(c,"Reducer is not configured");var u=[],l=Xs();u.push(l);var f=Object(zo.e)(c,o,zo.a.apply(void 0,u));i&&l.run(i);var b={payload:{applicationConfig:t,handshakeDetails:n,clientContext:s},type:Js.a};return f.dispatch(b),this.data.store=f,f}}]),e}(),tu=nu={};nction cu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var c,o={done:!1,value:Ji(e)},i=function(e){return{done:!1,value:cs.apply(void 0,[t].concat(r,[e]))}},s=function(e){return c=e};return au({q1:function(){return{nextState:"q2",effect:o,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:i(c)}}},"q1","takeEvery("+ru(e)+", "+t.name+")")}nction su(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return cs.apply(void 0,[cu,e,t].concat(r))}function uu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return cs.apply(void 0,[ou,e,t].concat(r))}ar fu=n(497),bu=Object(a.a)().mark(Ou),du=Object(a.a)().mark(ju),pu=Object(a.a)().mark(hu);unction Ou(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(vu).map((function(e){return es(e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),bu,null,[[0,5]])}function ju(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.events,n.next=4,as(Ou,t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),du,null,[[0,6]])}function hu(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.j,ju);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),pu,null,[[0,5]])}var gu=Object(a.a)().mark(yu),mu=Object(a.a)().mark(Iu),xu=Object(a.a)().mark(wu);function yu(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ls(e);case 3:return t.next=5,es(Object(nr.h)());case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 10:case"end":return t.stop()}}),gu,null,[[0,7]])}function Iu(){var e,t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,us([vt,Ot]);case 2:t=r.sent;case 3:return r.prev=4,r.next=7,Ji(t);case 7:if(n=r.sent,!e||e.isCancelled()){r.next=11;break}return r.next=11,is(e);case 11:if(n.type!==vt){r.next=17;break}return r.next=14,cs(yu,n.payload.waitTime);case 14:return e=r.sent,r.next=17,es(Object(nr.f)({waitTime:n.payload.waitTime,reason:n.payload.reason}));case 17:if(n.type!==Ot){r.next=20;break}return r.next=20,es(Object(nr.h)());case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(4),Object(Tt.b)(r.t0);case 25:r.next=3;break;case 27:case"end":return r.stop()}}),mu,null,[[4,22]])}function wu(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Iu)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),xu,null,[[0,5]])}var ku=Object(a.a)().mark(Eu);function Eu(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(hu),cs(wu)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),ku,null,[[0,5]])}var Cu=n(546),Tu=n.n(Cu),Su=n(944),_u=n.n(Su),Au=n(412),Nu=n.n(Au),Ru=n(423),Pu=n(404),Lu=n(492),Mu=n(510),Du=n(654),Uu=n(442),Fu=Object(a.a)().mark(Vu),Bu=Object(a.a)().mark(zu),Gu=Object(a.a)().mark(Wu);function Vu(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Mu.k)(e)){t.next=3;break}return t.next=3,es(Object(Uu.p)(e));case 3:case"end":return t.stop()}}),Fu)}function Hu(e){return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function t(){var n,r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,Object(Mu.j)(e)||(n=nn()(e,"id")),t.next=4,Object(Du.u)(n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))}function zu(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,as(Hu,e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),Object(Tt.b)(t.t0),t.abrupt("return",void 0);case 10:case"end":return t.stop()}}),Bu,null,[[0,6]])}function Wu(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,n=Pu.a.getConversationId(e),c=f()(Lu.a.getAttachment(Pu.a.getMessagePayload(e)),"messageId"),a.prev=3,a.next=6,as(Hu,e);case 6:r=a.sent,a.next=16;break;case 9:return a.prev=9,a.t0=a.catch(3),a.next=13,es({type:Pe.K,payload:{chatMessage:new Pu.a(e).setCreationTime(Date.now()).build(),conversationId:Pu.a.getConversationId(e)}});case 13:return a.next=15,es({payload:{conversationId:n,transientId:t,postbackParentMessageId:c},type:Pe.H});case 15:throw a.t0;case 16:if(!Object(Mu.k)(r)){a.next=19;break}return a.next=19,es({payload:{chatMessage:r,conversationId:n,transientId:t},type:Pe.I});case 19:case"end":return a.stop()}}),Gu,null,[[3,9]])}var qu=n(1461),Ku=function(){return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qu.a)();case 2:return t=e.sent,e.abrupt("return",t.default);case 4:case"end":return e.stop()}}),e)})))},Yu=Object(a.a)().mark(Qu),Xu=Object(a.a)().mark(Zu);function Qu(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ku();case 3:return t=r.sent,n=t.makeTextMessage(e.payload),r.next=7,as(Vu,n);case 7:return r.next=9,as(Wu,n);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 14:case"end":return r.stop()}}),Yu,null,[[0,11]])}function Zu(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.bb,Qu);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Xu,null,[[0,5]])}var $u,Ju=n(396),el=Object(a.a)().mark(il),tl=Object(a.a)().mark(sl),nl=Object(a.a)().mark(ul),rl=function(e,t){var n=Lu.a.getAttachment(Pu.a.getMessagePayload(e));return W()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{clickedButtonId:t.buttonId}:{}),{submitted:!n.reSubmittable})}}})},al=function(e,t){var n=Lu.a.getAttachment(Pu.a.getMessagePayload(e));return W()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{filledForm:t.filledForm}:{}),{submitted:!0})}}})},cl=($u={},Object(H.a)($u,Ju.c.CARD,rl),Object(H.a)($u,Ju.c.CAROUSEL,rl),Object(H.a)($u,Ju.c.CO_BROWSE_INVITE,rl),Object(H.a)($u,Ju.c.PRODUCT_CARD,rl),Object(H.a)($u,Ju.c.PRODUCT_SHOWCASE_CARD,rl),Object(H.a)($u,Ju.c.INFO_CARD,rl),Object(H.a)($u,Ju.c.PRODUCT_BANNER,rl),Object(H.a)($u,Ju.c.PRODUCT_LIST,rl),Object(H.a)($u,Ju.c.FORM,al),Object(H.a)($u,Ju.c.CONTACT_DETAILS_FORM,al),Object(H.a)($u,Ju.c.SECURE_FORM,al),Object(H.a)($u,Ju.c.APPOINTMENT,(function(e,t){return W()(e,{messagePayload:{attachment:{$merge:{selectedDate:t.selectedDate,selectedSlot:t.selectedSlot,submitted:!0}}}})})),Object(H.a)($u,Ju.c.SURVEY,(function(e,t){return W()(e,{messagePayload:{attachment:{$merge:{opened:!!t.opened,submitted:!!t.submitted}}}})})),Object(H.a)($u,Ju.c.VIDEO_CHAT,(function(e,t){return W()(e,{messagePayload:{attachment:{currentState:{$merge:{state:t.state,createdTime:Date.now()}},previousStates:{$push:[e.messagePayload.attachment.currentState]}}}})})),Object(H.a)($u,Ju.c.RICH_TEXT_CAROUSEL,rl),$u),ol=function(e,t){var n,r;if(!e||!t)return{};switch(null===(r=null===(n=e.messagePayload)||void 0===n?void 0:n.attachment)||void 0===r?void 0:r.type){case Ju.c.CAROUSEL:case Ju.c.CO_BROWSE_INVITE:case Ju.c.PRODUCT_CARD:case Ju.c.PRODUCT_SHOWCASE_CARD:case Ju.c.INFO_CARD:case Ju.c.PRODUCT_BANNER:case Ju.c.PRODUCT_LIST:case Ju.c.CARD:return{buttonId:t.messagePayload.attachment.buttonId};case Ju.c.SURVEY:return{submitted:!t.messagePayload.attachment.reSubmittable,opened:!0};case Ju.c.SECURE_FORM:case Ju.c.FORM:case Ju.c.CONTACT_DETAILS_FORM:return{filledForm:t.messagePayload.attachment.filledForm};case Ju.c.APPOINTMENT:var a=t.messagePayload.attachment;return{selectedDate:a.selectedDate,selectedSlot:a.selectedSlot};default:return{}}};function il(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.chatMessage,n=e.conversationId,r=e.params,t){a.next=3;break}return a.abrupt("return",null);case 3:if(!(c=cl[Lu.a.getAttachment(Pu.a.getMessagePayload(t)).type])){a.next=9;break}return o=c(t,r),a.next=8,es({type:Pe.K,payload:{chatMessage:o,conversationId:n}});case 8:return a.abrupt("return",o);case 9:return a.abrupt("return",null);case 10:case"end":return a.stop()}}),el)}function sl(e){var t,n,r,c,o,i,s,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.postback.messageId,r=t.conversationId,a.next=3,ss(xa.c);case 3:return o=a.sent,i=Object(rc.k)(Object(rc.m)(o,r),n),a.prev=5,a.next=8,Ku();case 8:return s=a.sent,u=s.makeTemplatePostbackAttachmentMessage(e.payload),a.next=12,as(il,{chatMessage:i,conversationId:r,params:ol(i,u)});case 12:if(c=a.sent,!u){a.next=19;break}return a.next=16,as(Vu,u);case 16:return a.next=18,as(Wu,u);case 18:e.promise.resolve();case 19:a.next=28;break;case 21:if(a.prev=21,a.t0=a.catch(5),!c){a.next=26;break}return a.next=26,es({type:Pe.K,payload:{chatMessage:i,conversationId:r}});case 26:e.promise.reject(),Object(Tt.b)(a.t0);case 28:case"end":return a.stop()}}),tl,null,[[5,21]])}function ul(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.ab,sl);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),nl,null,[[0,5]])}var ll=Object(a.a)().mark(bl),fl=Object(a.a)().mark(dl);function bl(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ku();case 3:if(t=r.sent,!(n=t.makeQuickReplyPostbackAttachmentMessage(e.payload))){r.next=10;break}return r.next=8,as(Vu,n);case 8:return r.next=10,as(Wu,n);case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 15:case"end":return r.stop()}}),ll,null,[[0,12]])}function dl(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.T,bl);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),fl,null,[[0,5]])}var pl=n(504),vl=n.n(pl),Ol=n(600),jl=n(444),hl=Object(a.a)().mark(Il),gl=Object(a.a)().mark(wl),ml=Object(a.a)().mark(kl),xl=yl=function(e,t){var n={};return ao()(t,(function(t,r){var a=r.sender;return n[a]||!!Object(Ua.g)(e,a)||(n[a]=a,t.push(r)),t}),[])};function Il(e){var t,n,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=wo()(e,(function(e){return e.sender})),a.next=4,as(Ol.b,e);case 4:return n=a.sent,c=wo()(n,(function(e){return jl.a.getId(e)})),o=[],Oo()(t,(function(e){!c.includes(e)&&Object(yn.c)(e)&&(o=[].concat(Object(r.a)(o),[xl(e)]))})),a.next=10,es({type:q.h,payload:{users:[].concat(Object(r.a)(n),Object(r.a)(o))}});case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 15:case"end":return a.stop()}}),hl,null,[[0,12]])}function wl(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,0!==(t=vl()(e)).length){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,ss(xa.h);case 6:if(n=a.sent,0!==(r=yl(n,t)).length){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,as(Il,r);case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 17:case"end":return a.stop()}}),gl,null,[[0,14]])}function kl(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,as(Il,vl()(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),ml,null,[[0,5]])}var El="/co-browse/conversation",Cl=function(e){var t=e.messageId,n=e.markCompletedSession;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(El,"/").concat(n?"completed":"cancelled","?messageId=").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))},Tl=function(e){var t=e.messageId,n=e.actionPayload;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(El,"/push?messageId=").concat(t),{type:"CO_BROWSE",payload:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))},Sl=function(e){var t=e.messageId,n=e.payload;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(El,"/push/status?messageId=").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))},_l=function(e){var t=e.messageId,n=e.otp,r=e.additionalInfo;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl({messageId:t,payload:{status:"SUCCESS",otp:n,additionalInfo:r}}));case 1:case"end":return e.stop()}}),e)})))},Al=function(e){var t=e.messageId,n=e.reason;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl({messageId:t,payload:{status:"FAILED",reason:n}}));case 1:case"end":return e.stop()}}),e)})))},Nl=function(e){var t=e.messageId,n=e.payload;return $s.a.post("".concat(El,"/event?messageId=").concat(t),n)},Rl=function(e){var t=e.messageId;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var n;return Object(a.a)().wrap((,e)})))},Pl=n(832),Ll=Object(a.a)().mark(tf),Ml=Object(a.a)().mark(nf),Dl=Object(a.a)().mark(rf),Ul=Object(a.a)().mark(af),Fl=Object(a.a)().mark(cf),Bl=Object(a.a)().mark(of),Gl=Object(a.a)().mark(sf),Vl=Object(a.a)().mark(uf),Hl=Object(a.a)().mark(lf),zl=Object(a.a)().mark(ff),Wl=Object(a.a)().mark(bf),ql=Object(a.a)().mark(df),Kl=Object(a.a)().mark(pf),Yl=Object(a.a)().mark(vf),Xl=Object(a.a)().mark(Of),Ql=Object(a.a)().mark(jf),Zl=Object(a.a)().mark(hf),$l=Object(a.a)().mark(gf),Jl=Object(a.a)().mark(mf),ef=Object(a.a)().mark(xf);function tf(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ss(xa.f);case 3:return t=r.sent,n=t.messageId,r.next=7,as(Tl,{messageId:n,actionPayload:e.payload});case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 12:case"end":return r.stop()}}),Ll,null,[[0,9]])}function nf(e){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ss(xa.f);case 2:return t=a.sent,n=t.messageId,r=t.conversationId,c=t.agentId,a.prev=6,o=e.payload,i=o.otp,s=o.additionalInfo,a.next=10,as(_l,{messageId:n,otp:i,additionalInfo:s});case 10:return a.next=12,es(Object(Da.i)({state:{messageId:n,conversationId:r,agentId:c}}));case 12:a.next=26;break;case 14:return a.prev=14,a.t0=a.catch(6),a.prev=16,a.next=19,es(Object(Da.e)({reason:Fa.a.OTP_SEND_FAILED}));case 19:return a.next=21,as(Al,{messageId:n,reason:Fa.a.OTP_SEND_FAILED});case 21:a.next=26;break;case 23:a.prev=23,a.t1=a.catch(16),Object(Tt.b)(a.t0);case 26:case"end":return a.stop()}}),Ml,null,[[6,14],[16,23]])}function rf(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.messageId,r=t.reason,a.next=4,es(Object(Da.e)({reason:r}));case 4:return a.next=6,as(Al,{messageId:n,reason:r});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 11:case"end":return a.stop()}}),Dl,null,[[0,8]])}function af(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.messageId,a.next=3,ns([Ji((function(e){var n=e.type,r=e.payload;return n===Pe.I&&f()(r,"chatMessage.messagePayload.attachment.messageId")===t})),Ji((function(e){var n=e.type,r=e.payload;return n===Pe.H&&f()(r,"postbackParentMessageId")===t})),Ji(Pl.g),Ji(Pl.h)]);case 3:if(n=a.sent,r=Object(en.a)(n,2),c=r[0],o=r[1],!c){a.next=10;break}return a.next=10,es(Object(Da.p)());case 10:if(!o){a.next=13;break}return a.next=13,es(Object(Da.e)({reason:Fa.a.POSTBACK_SEND_FAILED}));case 13:case"end":return a.stop()}}),Ul)}function cf(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ss(xa.f);case 3:return t=r.sent,n=t.messageId,r.next=7,as(Nl,{messageId:n,payload:e.payload});case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 12:case"end":return r.stop()}}),Fl,null,[[0,9]])}function of(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.messageId,r=t.endedByAgent,c=t.markCompletedSession,!r&&n){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,as(Cl,{messageId:n,markCompletedSession:c});case 6:return a.abrupt("return");case 9:a.prev=9,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 12:case"end":return a.stop()}}),Bl,null,[[0,9]])}function sf(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.shouldNotifyAgent,r=t.mode,!n){a.next=5;break}return a.next=5,es(Object(Da.j)({type:r,payload:{status:"ACCEPT"}}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 10:case"end":return a.stop()}}),Gl,null,[[0,7]])}function uf(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.mode,n.next=4,es(Object(Da.j)({type:t,payload:{status:"REJECT"}}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),Vl,null,[[0,6]])}function lf(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.mode,n.next=4,es(Object(Da.j)({type:t,payload:{status:"STOP"}}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),Hl,null,[[0,6]])}function ff(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.state,n=t.messageId,r=t.conversationId,c=t.agentId,a.prev=1,a.next=4,ts([as(Rl,{messageId:n}),as(wl,{sender:c,conversationId:r})]);case 4:if(o=a.sent,i=Object(en.a)(o,1),!i[0]){a.next=12;break}return a.next=10,es(Object(Da.o)({state:{conversationId:r,messageId:n,agentId:c}}));case 10:a.next=14;break;case 12:return a.next=14,es(Object(Da.e)({reason:Fa.a.RESUME_SESSION_FAILED}));case 14:a.next=21;break;case 16:return a.prev=16,a.t0=a.catch(1),a.next=20,es(Object(Da.f)({messageId:n,reason:Fa.a.RESUME_SESSION_FAILED}));case 20:Object(Tt.b)(a.t0);case 21:case"end":return a.stop()}}),zl,null,[[1,16]])}function bf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.g,of);case 2:case"end":return e.stop()}}),Wl)}function df(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.o,nf);case 2:case"end":return e.stop()}}),ql)}function pf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.p,rf);case 2:case"end":return e.stop()}}),Kl)}function vf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.a,sf);case 2:case"end":return e.stop()}}),Yl)}function Of(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.d,uf);case 2:case"end":return e.stop()}}),Xl)}function jf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.b,lf);case 2:case"end":return e.stop()}}),Ql)}function hf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.e,tf);case 2:case"end":return e.stop()}}),Zl)}function gf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(Pl.k,ff);case 2:case"end":return e.stop()}}),$l)}function mf(){return Object(a.a)().wrap((,Jl)}function xf(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ts([cs(df),cs(pf),cs(bf),cs(vf),cs(Of),cs(jf),cs(hf),cs(gf),cs(mf)]);case 2:case"end":return e.stop()}}),ef)}var yf=n(594),If=Object(a.a)().mark(wf);function wf(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==(t=e?vl()(e):yf.a).length){a.next=3;break}return a.abrupt("return");case 3:return n=Pu.a.getConversationId(t[0]),r=wo()(t,(),a.next=7,as(wl,r);case 7:case"end":return a.stop()}}),If)}n(478),n(419);var kf=n(483),Ef=n.n(kf),Cf=n(56),Tf=n.n(Cf),Sf=n(957),_f=n(958),Af=n(1189),Nf=n(142),Rf=n(701),Pf=n(1190),Lf=function(e){var t=e.messageId,n=e.messagePayload,r=e.creationTime,a=e.conversationId,c=e.sender,o=e.clientMessageId,i=e.deleted;if(n&&(!Lu.a.isEmpty(n)||i))return(new Pu.a).setId(t).setMessagePayload(n).setConversationId(a).setCreationTime(r||+new Date).setSender(c).setClientMessageId(o).setDeleted(i).build()},Mf=function(e,t){var n=jl.a.getId(t),r=Lu.a.getAttachment(Pu.a.getMessagePayload(e)),a=Object(Pf.a)(r,{user:t}),c=Cc()(Sf.a.getFields(_f.a.getForm(r)),(function(e){var t=e.id;return"EQUALITY"!==e.validator&&d()(a[t])}));return!Object(yn.b)(n)&&c},Df=function(e){return{resolve:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.promise.resolve(Object.assign(Object.assign({},e),t))},reject:e.promise.reject}},Uf=function(e,t,n,r){var a;return a="string"===typeof e?(new Pu.a).setMessagePayload((new Lu.a).setMessageType(Rf.b).setMessageText(e).setMessageDisableManualResponse(!!r).build()).build():e,Lf(Object.assign({messageId:n,conversationId:t,sender:Nf.b},a))},Ff=function(e){if(Ef()(e))return e;switch(Object(Kn.f)(e)?f()(e,"response.status",404):-1){case 401:case 404:return Gt.a.NOT_FOUND;case 406:return Gt.a.NOT_ACCEPTABLE;default:return Gt.a.UNEXPECTED_ERROR}},Bf=function(e){var t=e.encryptedData,n=e.unencryptedData,r=e.publicKeyForEncryption,c=e.formFields;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var o,i,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=ao()(t,(function(e,t,n){return e[n]={eData:t,externallyEncrypted:!0},e}),{}),n){e.next=3;break}return e.abrupt("return",o);case 3:return e.next=5,Object(Af.a)();case 5:return i=e.sent,s=i.dataEncrypter,e.abrupt("return",ao()(c,(function(e,t){var a=t.fieldName,c=null===n||void 0===n?void 0:n[a];if(!Tf()(c)&&""!==c){var o=Ef()(c)?c:JSON.stringify(c);e[a]=s(o,r)}return e}),o));case 8:case"end":return e.stop()}}),e)})))},Gf=function(e){var t=e.values,n=e.publicKeyForEncryption;e.multiSubmitResponseUrl;return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function e(){var r,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.unencryptedData,c=t.encryptedData,o=t.originalData,e.next=3,Bf({encryptedData:c,unencryptedData:d()(c)&&d()(r)?o.values:r,formFields:o.fields,publicKeyForEncryption:n});case 3:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 5:case"end":return e.stop()}}),e)})))},Vf=n(678),Hf=n(500),zf=n(533),Wf=Object(a.a)().mark(eb),qf=Object(a.a)().mark(tb),Kf=Object(a.a)().mark(nb),Yf=Object(a.a)().mark(rb),Xf=Object(a.a)().mark(cb),Qf=Object(a.a)().mark(ob),Zf=Object(a.a)().mark(ib),$f=Object(a.a)().mark(sb),Jf={};function eb(e){var t,n,r,c,o,i,s,u,l,b,d,p,v,O,j,h,g,m,x;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload.conversationId,!Jf[t]){a.next=16;break}case 3:return a.next=6,ns([Ji(Pe.N),Ji(Pe.O)]);case 6:if(n=a.sent,r=Object(en.a)(n,2),c=r[0],o=r[1],f()(c||o,"payload.transientConversationId")!==t){a.next=13;break}return e.promise&&(c&&e.promise.resolve({conversationId:c.payload.conversationResponse.id,caseNumber:c.payload.conversationResponse.caseNumber}),o&&e.promise.reject(o.payload.error)),a.abrupt("break",15);case 13:a.next=3;break;case 15:return a.abrupt("return");case 16:return a.prev=16,Jf[t]=!0,a.next=20,ss(xa.c);case 20:return i=a.sent,a.next=23,ss(xa.d);case 23:return s=a.sent,u=qa()(s),l=Object(rc.m)(i,t),b=Object(rc.q)(i),d=Object(rc.h)(b,t),p=f()(Object(rc.g)(b,t),"assignToUser"),v=Object(rc.y)(l),O=Object(rc.f)(Object(rc.q)(i),t)||{},j=O.clickedOnPrompt,a.next=34,as(Du.p,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v?{chatMessages:Object(rc.l)(l).map(()}:void 0),{createCase:Object(rc.C)(Object(rc.q)(i),t),startedByContext:d}),O),e.payload.appContext),!j&&u?{creativeId:u.additional.creativeId,interceptId:u.additional.interceptId,clickedOnPrompt:!1}:{}),{assignToUser:p}));case 34:return h=a.sent,a.next=37,ss(xa.h);case 37:return g=a.sent,m=Object(Ua.b)(g),x=Object(Ua.d)(g),a.next=42,es({payload:{transientConversationId:t,conversationResponse:h,botUserIds:m,userId:x},type:Pe.N});case 42:e.promise&&e.promise.resolve({conversationId:h.id,caseNumber:h.caseNumber}),a.next=51;break;case 45:return a.prev=45,a.t0=a.catch(16),a.next=49,es({type:Pe.O,payload:{transientConversationId:e.payload.conversationId,error:Ff(a.t0)}});case 49:e.promise&&e.promise.reject(Ff(a.t0)),Object(Tt.b)(a.t0);case 51:return a.prev=51,delete Jf[e.payload.conversationId],a.finish(51);case 54:a.next=58;break;case 56:a.prev=56,a.t1=a.catch(0);case 58:case"end":return a.stop()}}),Wf,null,[[0,56],[16,45,51,54]])}function tb(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=Tu()(vl()(sn.a.getDefaultMessages(on.a.getCustomizationConfig(e)))),!(n=Tu()(t.map((function(e,t){return Uf(e,Nf.e,"".concat(Nf.d).concat(t))})))).length){a.next=10;break}return a.next=6,ss(xa.h);case 6:return r=a.sent,c=n.map((function(e){var t=Object(Vf.e)(r,Pu.a.getSender(e));return es(Object(Hf.g)(e,t))})),a.next=10,ts(c);case 10:return a.abrupt("return",n);case 13:a.prev=13,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 16:return a.abrupt("return",void 0);case 17:case"end":return a.stop()}}),qf,null,[[0,13]])}function nb(e,t){var n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=sn.a.getContactDetailsMessage(on.a.getCustomizationConfig(e)),r=[],!n||!Mf(n,zf.a.getChatUser(t))){a.next=12;break}return c=Uf(n,Nf.e,Nf.c),a.next=7,ss(xa.h);case 7:return o=a.sent,i=Object(Vf.e)(o,Pu.a.getSender(c)),r.push(c),a.next=12,es(Object(Hf.g)(c,i));case 12:return a.abrupt("return",r);case 15:a.prev=15,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 18:return a.abrupt("return",void 0);case 19:case"end":return a.stop()}}),Kf,null,[[0,15]])}function rb(e,t){var n,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,as(tb,e);case 3:return n=a.sent,a.next=6,as(nb,e,t);case 6:return c=a.sent,a.abrupt("return",[].concat(Object(r.a)(n),Object(r.a)(c)));case 10:a.prev=10,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 13:return a.abrupt("return",void 0);case 14:case"end":return a.stop()}}),Yf,null,[[0,10]])}unction cb(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(Object(a.a)().mark((function e(){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.a,e.t1=Ua.c,e.next=4,ss(xa.h);case 4:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),t=(0,e.t0)(e.t3,"userId");case 7:return e.prev=8,e.next=11,ss(xa.c);case 11:if(n=e.sent,r=Object(rc.m)(n,Nf.e),c=Object(rc.k)(r,Nf.c)){e.next=16;break}return e.abrupt("break",31);case 16:return e.next=18,Ji(q.h);case 18:if(o=e.sent,i=o.payload.users,!(s=i.find(())||Mf(c,s)){e.next=24;break}return e.next=24,es(Object(Hf.h)(Nf.e,Nf.c));case 24:e.next=29;break;case 26:e.prev=26,e.t4=e.catch(8),Object(Tt.b)(e.t4);case 29:e.next=7;break;case 31:case"end":return e.stop()}}),e,null,[[8,26]])}))(),"t0",2);case 2:e.next=7;break;case 4:e.prev=4,e.t1=e.catch(0),Object(Tt.b)(e.t1);case 7:case"end":return e.stop()}}),Xf,null,[[0,4]])}function ob(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Js.c,ab);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Qf,null,[[0,5]])}function ib(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.M,eb);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Zf,null,[[0,5]])}function sb(){var e,t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ji(Js.a);case 3:return e=a.sent,t=e.payload,n=t.applicationConfig,r=t.handshakeDetails,a.next=9,as(rb,n,r);case 9:return a.next=11,ts([cs(cb),cs(ib),cs(ob)]);case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 16:case"end":return a.stop()}}),$f,null,[[0,13]])}var ub=n(597),lb=Object(a.a)().mark(db),fb=Object(a.a)().mark(pb),bb=Object(a.a)().mark(vb);function db(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=e.payload,n=t.actionParams,n.actionType!==ub.a){r.next=6;break}return r.next=6,es(Object(Hf.i)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId}}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 11:case"end":return r.stop()}}),lb,null,[[0,8]])}function pb(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=e.payload,n=t.actionParams,n.actionType!==ub.b){r.next=6;break}return r.next=6,es(Object(Hf.j)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId}}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 11:case"end":return r.stop()}}),fb,null,[[0,8]])}function vb(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts([as(db,e),as(pb,e)]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),bb,null,[[0,5]])}var Ob=Object(a.a)().mark(jb);function jb(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.actionParams,r=ce.a,new Promise((function(e,t){var n=setTimeout((,6e4);r=function(r,a){return clearTimeout(n),a?t(a):e(r)}})).then((function(t){var n=W()(e,{payload:{actionParams:{values:{$merge:t}}}});e.promise.resolve(n)})).catch((),a.next=7,es(Object(Hf.k)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId},callback:r}));case 7:a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),e.promise.reject(a.t0),Object(Tt.b)(a.t0);case 13:case"end":return a.stop()}}),Ob,null,[[0,9]])}var hb=Object(a.a)().mark(xb),gb=Object(a.a)().mark(yb),mb=Object(a.a)().mark(Ib);function xb(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.messageId,r=t.conversationId,a.next=3,ss(xa.c);case 3:return c=a.sent,o=Object(rc.k)(Object(rc.m)(c,r),n),a.prev=5,a.next=8,as(il,{chatMessage:o,conversationId:r,params:{opened:!0}});case 8:return i=a.sent,a.next=11,as(Du.s,n);case 11:a.next=19;break;case 13:if(a.prev=13,a.t0=a.catch(5),!i){a.next=18;break}return a.next=18,es({type:Pe.K,payload:{chatMessage:o,conversationId:r}});case 18:Object(Tt.b)(a.t0);case 19:case"end":return a.stop()}}),hb,null,[[5,13]])}function yb(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=e.payload.attachment,f()(t,"opened")){n.next=6;break}return n.next=6,as(xb,e);case 6:return n.abrupt("return");case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),gb,null,[[0,9]])}function Ib(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.X,yb);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),mb,null,[[0,5]])}var wb=n(552),kb=n(754),Eb=n(622),Cb=n(534),Tb=n(960),Sb=n(694),_b=n(1120),Ab=n(753),Nb=n(1439),Rb=n(547),Pb="/livechat/event";function Lb(e){return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",$s.a.post("".concat(Pb,"/publish"),Object.assign({type:e.type},e.payload)));case 1:case"end":return t.stop()}}),t)})))}var Mb=n(749),Db=Object(a.a)().mark(zd),Ub=Object(a.a)().mark(qd),Fb=Object(a.a)().mark(Kd),Bb=Object(a.a)().mark(Yd),Gb=Object(a.a)().mark(Xd),Vb=Object(a.a)().mark(Qd),Hb=Object(a.a)().mark(Zd),zb=Object(a.a)().mark($d),Wb=Object(a.a)().mark(Jd),qb=Object(a.a)().mark(ep),Kb=Object(a.a)().mark(tp),Yb=Object(a.a)().mark(np),Xb=Object(a.a)().mark(rp),Qb=Object(a.a)().mark(ap),Zb=Object(a.a)().mark(cp),$b=Object(a.a)().mark(op),Jb=Object(a.a)().mark(ip),ed=Object(a.a)().mark(sp),td=Object(a.a)().mark(up),nd=Object(a.a)().mark(lp),rd=Object(a.a)().mark(fp),ad=Object(a.a)().mark(bp),cd=Object(a.a)().mark(dp),od=Object(a.a)().mark(pp),id=Object(a.a)().mark(vp),sd=Object(a.a)().mark(Op),ud=Object(a.a)().mark(jp),ld=Object(a.a)().mark(hp),fd=Object(a.a)().mark(gp),bd=Object(a.a)().mark(mp),dd=Object(a.a)().mark(xp),pd=Object(a.a)().mark(yp),vd=Object(a.a)().mark(Ip),Od=Object(a.a)().mark(wp),jd=Object(a.a)().mark(kp),hd=Object(a.a)().mark(Ep),gd=Object(a.a)().mark(Cp),md=Object(a.a)().mark(Tp),xd=Object(a.a)().mark(_p),yd=Object(a.a)().mark(Ap),Id=Object(a.a)().mark(Np),wd=Object(a.a)().mark(Rp),kd=Object(a.a)().mark(Pp),Ed=Object(a.a)().mark(Lp),Cd=Object(a.a)().mark(Mp),Td=Object(a.a)().mark(Dp),Sd=Object(a.a)().mark(Up),_d=nction Rd(e){return e===kb.a.OPEN_URL}function Pd(e){return e===kb.a.DIAL}function Ld(e){return e===kb.a.SURVEY_POST_BACK}function Md(e){return e===kb.a.FETCH_APPOINTMENT_TIME_SLOTS}function Dd(e){return e===kb.a.RESERVE_APPOINTMENT_TIME_SLOT}function Ud(e){return e===kb.a.START_VIDEO_CALL}function Fd(e){return e===kb.a.START_AUDIO_CALL}function Bd(e){return e===kb.a.REJOIN_CALL}function Gd(e){return e===kb.a.ACCOUNT_LINK}nction zd(e,t){var n,r,c=arguments;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:3,a.prev=1,a.next=4,ss(_d);case 4:if(a.sent){a.next=15;break}case 6:return a.next=9,Ji(fu.d);case 9:if(r=a.sent,r.payload.status!==Mb.a.CONNECTED){a.next=13;break}return a.abrupt("break",15);case 13:a.next=6;break;case 15:return a.next=17,as(e,t);case 17:return a.abrupt("return",a.sent);case 20:if(a.prev=20,a.t0=a.catch(1),!(Object(Kn.c)(a.t0)&&n>1)){a.next=26;break}return a.next=25,as(zd,e,t,n-1);case 25:return a.abrupt("return",a.sent);case 26:throw a.t0;case 27:case"end":return a.stop()}}),Db,null,[[1,20]])}function Wd(e,t){return Lf({messageId:e.id,messagePayload:Pu.a.getMessagePayload(e),conversationId:t,sender:Pu.a.getSender(e),creationTime:Pu.a.getCreationTime(e),clientMessageId:Pu.a.getClientMessageId(e),deleted:Pu.a.getDeleted(e)})}function qd(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.cursor,a.next=5,as(Du.g,n,{size:t.size,cursor:r});case 5:return c=a.sent,o=Tu()(c.results.map((function(e){return Wd(e,n)}))),a.next=9,as(wf,o);case 9:return a.next=11,es({payload:{conversationMessagesResponse:Object.assign(Object.assign({},c),{results:o}),conversationId:n,cursor:r},type:Pe.m});case 11:e.promise&&e.promise.resolve(),a.next=20;break;case 14:return a.prev=14,a.t0=a.catch(0),e.promise&&e.promise.reject(),a.next=19,es({type:Pe.n,payload:{conversationId:e.payload.conversationId}});case 19:Object(Tt.b)(a.t0);case 20:case"end":return a.stop()}}),Ub,null,[[0,14]])}function Kd(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=e.promise,r=t.conversationId,!(c=t.includeAll)){a.next=9;break}return a.next=6,as(Du.c,n);case 6:a.t0=a.sent,a.next=12;break;case 9:return a.next=11,as(Du.d,r,n);case 11:a.t0=a.sent;case 12:return o=a.t0,a.next=15,es(Object(Hf.a)({conversationId:r,includeAll:c,deleted:!0,surveyUrl:null===o||void 0===o?void 0:o.surveyUrl}));case 15:a.next=20;break;case 17:a.prev=17,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 20:case"end":return a.stop()}}),Fb,null,[[0,17]])}function Yd(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.i,Kd);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Bb,null,[[0,5]])}function Xd(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=e.promise,r=t.conversationId,!(c=t.includeAll)){a.next=9;break}return a.next=6,as(Du.a,n);case 6:a.t0=a.sent,a.next=12;break;case 9:return a.next=11,as(Du.b,r,n);case 11:a.t0=a.sent;case 12:return o=a.t0,a.next=15,es(Object(Hf.a)({conversationId:r,includeAll:c,closed:!0,surveyUrl:null===o||void 0===o?void 0:o.surveyUrl}));case 15:a.next=20;break;case 17:a.prev=17,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 20:case"end":return a.stop()}}),Gb,null,[[0,17]])}function Qd(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.h,Xd);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Vb,null,[[0,5]])}function Zd(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.l,qd);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Hb,null,[[0,5]])}function $d(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.query,r=t.conversationId,c=t.faqAttachment,o=t.locale,a.next=4,as(Du.k,r,n,c,o);case 4:i=a.sent,e.promise&&e.promise.resolve(i),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),e.promise&&e.promise.reject(),Object(Tt.b)(a.t0);case 12:case"end":return a.stop()}}),zb,null,[[0,8]])}function Jd(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.B,$d);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Wb,null,[[0,5]])}function ep(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=ao()(e,(function(e,t){var n=Cb.a.getParticipants(t);return Oo()(n,(),e}),[]),n.next=4,as(wl,t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),qb,null,[[0,6]])}function tp(){var e,t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;case 1:return a.prev=2,a.next=5,Ji(Pe.f);case 5:return e=a.sent,a.next=8,as(Du.e,e.payload);case 8:return t=a.sent,a.next=11,as(ep,t.results);case 11:return a.next=13,ss(xa.h);case 13:return n=a.sent,r=Object(Ua.b)(n),c=Object(Ua.d)(n),a.next=18,es({payload:{conversationResponse:t,botUserIds:r,chatUserId:c},type:Pe.g});case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(2),Object(Tt.b)(a.t0);case 23:a.next=1;break;case 25:a.next=30;break;case 27:a.prev=27,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 30:case"end":return a.stop()}}),Kb,null,[[0,27],[2,20]])}function np(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,r.next=4,as(Du.n,t);case 4:n=r.sent,e.promise.resolve(n),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),e.promise.reject(r.t0),Object(Tt.b)(r.t0);case 12:case"end":return r.stop()}}),Yb,null,[[0,8]])}function rp(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.D,np);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Xb,null,[[0,5]])}function ap(){var e,t,n,r,c,o,i,s,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;case 1:return e=void 0,t=void 0,n=void 0,a.next=5,Ji(Pe.s);case 5:return r=a.sent,t=r.payload.caseId,e=r.payload.conversationId,n=r.payload.context,a.next=11,ss(xa.h);case 11:return c=a.sent,o=Object(Ua.b)(c),i=Object(Ua.d)(c),a.prev=14,a.next=17,as(Du.h,r.payload.caseId);case 17:return s=a.sent,a.next=20,es({payload:{caseId:t,conversationResponse:s,botUserIds:o,chatUserId:i},type:Pe.t});case 20:a.next=40;break;case 22:if(a.prev=22,a.t0=a.catch(14),a.prev=24,Object(Kn.a)(a.t0)){a.next=33;break}return a.next=28,as(Du.p,Object.assign({createCase:!0,caseId:t},n));case 28:return u=a.sent,a.next=31,es({payload:{caseId:t,conversationResponse:u,botUserIds:o,chatUserId:i,loaded:!0},type:Pe.t});case 31:a.next=34;break;case 33:throw a.t0;case 34:a.next=40;break;case 36:return a.prev=36,a.t1=a.catch(24),a.next=40,es({payload:{conversationId:e,error:Ff(a.t1)},type:Pe.u});case 40:a.next=1;break;case 42:a.next=47;break;case 44:a.prev=44,a.t2=a.catch(0),Object(Tt.b)(a.t2);case 47:case"end":return a.stop()}}),Qb,null,[[0,44],[14,22],[24,36]])}function cp(){var e,t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;case 1:return e=void 0,t=void 0,n=void 0,a.prev=3,a.next=6,Ji(Pe.v);case 6:if(r=a.sent,e=r.payload.conversationId,t=r.payload.externalCaseId,!e){a.next=15;break}return a.next=12,as(Du.j,e);case 12:n=a.sent,a.next=19;break;case 15:if(!t){a.next=19;break}return a.next=18,as(Du.i,t);case 18:n=a.sent;case 19:return a.next=21,ss(xa.h);case 21:return c=a.sent,o=Object(Ua.b)(c),i=Object(Ua.d)(c),a.next=26,es({payload:{conversationResponse:n,botUserIds:o,chatUserId:i},type:Pe.w});case 26:a.next=33;break;case 28:return a.prev=28,a.t0=a.catch(3),a.next=32,es({payload:Object.assign(Object.assign(Object.assign({},e?{conversationId:e}:{}),t?{externalCaseId:t}:{}),{error:Ff(a.t0)}),type:Pe.x});case 32:Object(Tt.b)(a.t0);case 33:a.next=1;break;case 35:a.next=40;break;case 37:a.prev=37,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 40:case"end":return a.stop()}}),Zb,null,[[0,37],[3,28]])}function op(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;case 1:return a.next=4,ss(_d);case 4:if(t=a.sent,a.prev=5,!t){a.next=16;break}return n=e.payload,r=n.conversationId,a.next=11,as(Du.l,r,n.messageId);case 11:return c=a.sent,o=Wd(c,r),a.next=15,as(wf,o);case 15:return a.abrupt("return",o);case 16:return a.next=18,Ji(fu.d);case 18:a.next=25;break;case 20:if(a.prev=20,a.t0=a.catch(5),Object(Tt.b)(a.t0),Object(Kn.c)(a.t0)){a.next=25;break}return a.abrupt("break",27);case 25:a.next=1;break;case 27:return a.abrupt("return",null);case 30:return a.prev=30,a.t1=a.catch(0),Object(Tt.b)(a.t1),a.abrupt("return",null);case 34:case"end":return a.stop()}}),$b,null,[[0,30],[5,20]])}function ip(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload,n.next=4,es(Object(Hf.l)({type:t.actionType,payload:nn()(e.payload,["actionType"])}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),Jb,null,[[0,6]])}function sp(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,as(op,e);case 3:if(!(t=n.sent)){n.next=7;break}return n.next=7,es({type:Pe.K,payload:{chatMessage:t,conversationId:Pu.a.getConversationId(t)}});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),ed,null,[[0,9]])}function up(e){var t,n,r,c,o,i,s,u,l,f,b;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ss(xa.c);case 3:return t=a.sent,n=Object(rc.q)(t),a.t0=Ua.c,a.next=8,ss(xa.h);case 8:if(a.t1=a.sent,r=(0,a.t0)(a.t1),c=e.payload,o=c.sender,i=c.deleted,s=c.closed,u=c.caseNumber,l=c.conversationId,f=c.requestClientId,b=Object(rc.g)(n,l),!(o!==r.userId||f&&f!==_b.a.get()||u&&b&&!b.caseNumber&&!i&&!s)){a.next=18;break}return a.next=15,es(Object(Hf.a)(e.payload));case 15:if(!u||!b||b.caseNumber){a.next=18;break}return a.next=18,es(Object(nr.c)({action:gc.a.NEW_CONVERSATION_CREATED,conversationId:l,additional:{caseNumber:u}}));case 18:a.next=23;break;case 20:a.prev=20,a.t2=a.catch(0),Object(Tt.b)(a.t2);case 23:case"end":return a.stop()}}),td,null,[[0,20]])}function lp(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.videoCallEnabled,c=t.audioCallEnabled,a.next=4,es({type:Pe.d,payload:{conversationId:n,videoCallEnabled:r,audioCallEnabled:c}});case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 9:case"end":return a.stop()}}),nd,null,[[0,6]])}function fp(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=e.payload,!Ad(t.actionParams.actionType)){n.next=7;break}return n.next=6,as(vb,e);case 6:e.promise.resolve(e);case 7:n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),e.promise.reject(),Object(Tt.b)(n.t0);case 13:case"end":return n.stop()}}),rd,null,[[0,9]])}function bp(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=e.payload,!Nd(t.actionParams.actionType)){n.next=6;break}return n.next=6,as(jb,e);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 11:case"end":return n.stop()}}),ad,null,[[0,8]])}function dp(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.actionParams,r=t.conversationId,!Gd(n.actionType)){a.next=6;break}return c=Object(Ab.a)(n.actionId,n.attachment),a.next=6,es(Object(nr.a)({ssoId:c.accountLinkUrl,conversationId:r,messageId:n.messageId})(Df(e)));case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),e.promise.reject(),Object(Tt.b)(a.t0);case 12:case"end":return a.stop()}}),cd,null,[[0,8]])}function pp(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload.actionParams,n=t.attachment,r=t.values,c=n,a.next=5,as(Gf,{values:r,publicKeyForEncryption:c.publicKeyForEncryption,multiSubmitResponseUrl:c.multiSubmitResponseUrl});case 5:return o=a.sent,a.next=8,as(Du.v,c,o);case 8:return i=a.sent,a.abrupt("return",{fieldNameVsToken:i,originalData:r.originalData});case 12:return a.prev=12,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.abrupt("return",null);case 16:case"end":return a.stop()}}),od,null,[[0,12]])}function vp(e){var t,n,r,c,o,i,s,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.actionParams,r=n.messageId,c=n.actionType,o=n.values,i=t.conversationId,c!==kb.a.ACCEPT_CO_BROWSE){a.next=11;break}return a.next=5,ss((function(e){return Object(rc.k)(Object(rc.m)(Object(xa.c)(e),i),r)}));case 5:return s=a.sent,u=Pu.a.getSender(s),a.next=9,es(Object(Da.d)({messageId:r,conversationId:i,agentId:u}));case 9:return a.next=11,os(af,{messageId:r});case 11:return a.abrupt("return",o);case 14:return a.prev=14,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.abrupt("return",null);case 18:case"end":return a.stop()}}),id,null,[[0,14]])}function Op(e){var t,n,r,c,o,i,s,u,l,b;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.actionParams,r=n.attachment,c=n.actionId,o=n.values,i=n.messageId,s=t.conversationId,u=f()(Object(Ab.a)(c,r),"surveyUrl",""),a.next=5,es(Object(Hf.e)({surveyUrl:u,conversationId:s}));case 5:return a.next=7,es({type:Pe.X,payload:{messageId:i,conversationId:s,attachment:r}});case 7:return a.next=9,ns([Ji(Pe.Y),Ji(Pe.V),Ji(Pe.Z)]);case 9:if(l=a.sent,b=Object(en.a)(l,1),b[0]){a.next=14;break}return a.abrupt("return",null);case 14:return a.abrupt("return",o);case 17:return a.prev=17,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.abrupt("return",null);case 21:case"end":return a.stop()}}),sd,null,[[0,17]])}function jp(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload.actionParams,n=t.actionType,r=t.values,!Vd(n)){a.next=6;break}return a.next=5,as(pp,e);case 5:case 9:case 13:return a.abrupt("return",a.sent);case 6:if(!Hd(n)){a.next=10;break}return a.next=9,as(vp,e);case 10:if(!Ld(n)){a.next=14;break}return a.next=13,as(Op,e);case 14:return a.abrupt("return",r);case 17:return a.prev=17,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.abrupt("return",null);case 21:case"end":return a.stop()}}),ud,null,[[0,17]])}function hp(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.actionParams,r=t.appContext,Ad(o=n.actionType)||Rd(o)||Pd(o)||Md(o)||Dd(o)||Fd(o)||Ud(o)||Bd(o)||Gd(o)||Nd(o)){a.next=20;break}return a.prev=4,a.next=7,as(jp,e);case 7:if(c=a.sent,u()(c)){a.next=13;break}return a.next=11,es(Object(Hf.p)({conversationId:t.conversationId,sender:t.sender,postback:{attachment:n.attachment,values:c,additional:n.additional,appContext:r,messageId:n.messageId,postbackId:n.actionId,postbackType:n.actionType},inReplyToChatMessageId:t.inReplyToChatMessageId})(Df(e)));case 11:a.next=14;break;case 13:e.promise&&e.promise.resolve(e);case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(4),e.promise.reject(),Object(k.a)(a.t0);case 20:a.next=26;break;case 22:a.prev=22,a.t1=a.catch(0),e.promise.reject(),Object(Tt.b)(a.t1);case 26:case"end":return a.stop()}var o}),ld,null,[[0,22],[4,16]])}function gp(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=e.payload,!Rd((n=t.actionParams).actionType)){r.next=6;break}return r.next=6,es(Object(Hf.f)({attachment:n.attachment,actionId:n.actionId})(Df(e)));case 6:r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),e.promise.reject(),Object(Tt.b)(r.t0);case 12:case"end":return r.stop()}}),fd,null,[[0,8]])}function mp(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=e.payload,!Pd((n=t.actionParams).actionType)){r.next=6;break}return r.next=6,es(Object(Hf.d)({attachment:n.attachment,actionId:n.actionId})(Df(e)));case 6:r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),e.promise.reject(),Object(Tt.b)(r.t0);case 12:case"end":return r.stop()}}),bd,null,[[0,8]])}function xp(e){var t,n,r,c,o,i,s,u,l,b,d,p,v,O,j,h,g;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=e.payload,c=r.actionParams,o=c.actionId,i=c.actionType,s=c.attachment,u=c.messageId,l=c.values,b=r.conversationId,d=r.appContext,!Bd(i)){a.next=13;break}return l.callMode&&l.participantPermissions||Object(Tt.b)("Call mode (".concat(l.callMode,") or participant permissions (").concat(l.participantPermissions,") unset")),l.participantInfos||Object(Tt.b)("Participant infos is unset"),p=l.audioOnly?Ia.c.AUDIO:Ia.c.VIDEO,v=null!==(t=l.callMode)&&void 0!==t?t:Object(Sb.b)(p),a.next=10,es(Object(wb.p)({conversationId:b,isPhone:d.isPhone,type:p,isIncomingCall:l.isIncomingCall,videoConversationId:l.videoChatConversationId,participantPermissions:null!==(n=l.participantPermissions)&&void 0!==n?n:Object(Sb.c)(v),callMode:v,participantInfos:l.participantInfos,prevState:Object(Tb.a)(l.currentState,l.isIncomingCall)}));case 10:e.promise&&e.promise.resolve(e),a.next=28;break;case 13:if(!Ud(i)&&!Fd(i)){a.next=28;break}return a.next=16,ss(xa.b);case 16:if(O=a.sent,!Object(ya.a)(O)){a.next=21;break}return e.promise&&e.promise.reject(),a.abrupt("return");case 21:return j=Ud(i)?Ia.c.VIDEO:Ia.c.AUDIO,h=f()(Object(Ab.a)(o,s),"title",""),g={},o&&(g={sourceButtonId:o,messageId:u,messageText:h}),a.next=27,es(Object(wb.i)(Object.assign({conversationId:b,isPhone:d.isPhone,type:j},g)));case 27:e.promise&&e.promise.resolve(e);case 28:a.next=34;break;case 30:a.prev=30,a.t0=a.catch(0),e.promise.reject(),Object(Tt.b)(a.t0);case 34:case"end":return a.stop()}}),dd,null,[[0,30]])}function yp(e){var t,n,r,c,o,i,s,u,l,f;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.actionParams,r=t.conversationId,c=t.appContext,o=Md(n.actionType),i=Dd(n.actionType),!o&&!i){a.next=34;break}return a.prev=6,a.next=9,ss(xa.c);case 9:if(l=a.sent,s=Object(rc.k)(Object(rc.m)(l,r),n.messageId),!o){a.next=19;break}return a.next=14,es({type:Pe.K,payload:{chatMessage:W()(s,{messagePayload:{attachment:{$merge:{slots:void 0}}}}),conversationId:r}});case 14:return a.next=16,as(Du.f,{selectedDate:n.values.selectedDate,slotDefinitionId:n.attachment.slotDefinitionConfigId,timeZone:c.timeZone,appointmentAssetParams:n.attachment.params,messageId:n.messageId});case 16:return u=a.sent,a.next=19,es({type:Pe.K,payload:{chatMessage:W()(s,{messagePayload:{attachment:{$merge:{slots:u}}}}),conversationId:r}});case 19:if(!i){a.next=27;break}return a.next=22,as(Du.t,{selectedDate:n.values.selectedDate,selectedSlot:n.values.selectedSlot,timeZone:c.timeZone,slotDefinitionId:n.attachment.slotDefinitionConfigId,appointmentAssetParams:n.attachment.params,messageId:n.messageId});case 22:if(u=a.sent,f=u.reservationId){a.next=27;break}return a.next=27,es({type:Pe.K,payload:{chatMessage:W()(s,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},u.slots?{slots:u.slots}:{}),u.availableDates?{availableDates:u.availableDates}:{})}}}),conversationId:r}});case 27:e.promise.resolve({actionType:n.actionType,response:{reservationId:f,selectedSlot:n.values.selectedSlot,selectedDate:n.values.selectedDate,visibleSlots:n.values.visibleSlots}}),a.next=34;break;case 30:a.prev=30,a.t0=a.catch(6),Object(Tt.b)(a.t0),e.promise.reject({actionType:n.actionType,response:{error:u}});case 34:a.next=40;break;case 36:a.prev=36,a.t1=a.catch(0),e.promise.reject(),Object(Tt.b)(a.t1);case 40:case"end":return a.stop()}}),pd,null,[[0,36],[6,30]])}function Ip(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts([as(fp,e),as(bp,e),as(hp,e),as(gp,e),as(mp,e),as(dp,e),as(yp,e),as(xp,e)]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),vd,null,[[0,5]])}function wp(e,t){var n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=W()(e,{payload:{actionParams:{$set:Object.assign(Object.assign({},nn()(e.payload.actionParams,["actionTypes"])),{actionType:t})}}}),r=new Promise((),a.next=5,as(Ip,n);case 5:return a.next=7,r;case 7:return a.abrupt("return",a.sent);case 10:throw a.prev=10,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.t0;case 14:case"end":return a.stop()}}),Od,null,[[0,10]])}function kp(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0,t=e.payload.actionParams.actionTypes,n=e,r=0;case 4:if(!(r<_u()(t))){a.next=11;break}return a.next=7,as(wp,n,t[r]);case 7:n=a.sent;case 8:r+=1,a.next=4;break;case 11:e.promise.resolve(n),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),e.promise.reject(a.t0),Object(Tt.b)(a.t0);case 18:case"end":return a.stop()}}),jd,null,[[0,14]])}function Ep(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.c,kp);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),hd,null,[[0,5]])}function Cp(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.prev=1,r=e.payload.disclaimerStatus,a.next=5,ss(xa.c);case 5:return c=a.sent,o=Object(rc.q)(c),t=e.payload.conversationId,n=f()(Object(rc.i)(o,t),"disclaimerStatus"),a.next=11,es({type:Pe.r,payload:{conversationId:t,disclaimerStatus:r}});case 11:return a.next=13,as(Du.x,t,r);case 13:e.promise.resolve(),a.next=22;break;case 16:return a.prev=16,a.t0=a.catch(1),e.promise.reject(),a.next=21,es({type:Pe.r,payload:{conversationId:t,disclaimerStatus:n}});case 21:Object(Tt.b)(a.t0);case 22:a.next=27;break;case 24:a.prev=24,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 27:case"end":return a.stop()}}),gd,null,[[0,24],[1,16]])}function Tp(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.q,Cp);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),md,null,[[0,5]])}var Sp={field:"closed",values:[!0],filterType:Eb.a.NIN};function _p(e){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.context,r=t.filters,a.next=4,ss(xa.c);case 4:if(c=a.sent,o=Object(rc.w)(c),i=r||Sp,!(s=Nu()(o.ids,(function(e){var t=!1;return!!d()(i)||(Nb.a.createFilterAction(i,{getFilterBuilder:Nb.a.createFilterAction}).matches(o.byId[e],{logOnFailure:!0})&&(t=!0),t)})))){a.next=14;break}return a.next=11,as(zd,Du.w,{context:n,conversationId:s,payload:e.payload});case 11:e.promise.resolve({conversationId:s}),a.next=15;break;case 14:e.promise.reject(Gt.a.NOT_FOUND);case 15:a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),e.promise.reject(Ff(a.t0)),Object(Tt.b)(a.t0);case 21:case"end":return a.stop()}}),xd,null,[[0,17]])}function Ap(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ji(Pe.g);case 3:return t.next=5,as(_p,e);case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.promise.reject(Ff(t.t0)),Object(Tt.b)(t.t0);case 11:case"end":return t.stop()}}),yd,null,[[0,7]])}function Np(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.context,r=t.conversationId,c=t.includeDeleted,!r){a.next=7;break}return a.next=5,as(zd,Du.w,{context:n,conversationId:r,payload:e.payload});case 5:return e.promise.resolve({conversationId:r}),a.abrupt("return");case 7:if(!c){a.next=12;break}return a.next=10,as(zd,Du.y,{context:n,updateLatest:c,payload:e.payload});case 10:return e.promise.resolve({conversationId:r}),a.abrupt("return");case 12:return a.next=14,ss(xa.c);case 14:if(o=a.sent,i=Object(rc.q)(o),!Object(rc.b)(i)){a.next=21;break}return a.next=20,as(_p,e);case 20:return a.abrupt("return");case 21:return a.next=23,cs(Ap,e);case 23:a.next=29;break;case 25:a.prev=25,a.t0=a.catch(0),e.promise.reject(Ff(a.t0)),Object(Tt.b)(a.t0);case 29:case"end":return a.stop()}}),Id,null,[[0,25]])}function Rp(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.k,Np);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),wd,null,[[0,5]])}function Pp(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.lastReadMessageId,n.next=4,as(Lb,{type:"MESSAGE_READ",payload:{messageId:t}});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),kd,null,[[0,6]])}function Lp(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.Q,Pp);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Ed,null,[[0,5]])}function Mp(e){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,as(Du.m);case 3:return t=e.sent,e.next=6,es({payload:{openConversationCount:t},type:Pe.cb});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 11:case"end":return e.stop()}}),Cd,null,[[0,8]])}function Dp(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lu(Pe.C,Mp);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Td,null,[[0,5]])}function Up(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(tp),cs(rp),cs(cp),cs(Jd),cs(sb),cs(Zd),cs(Yd),cs(Qd),cs(Zu),cs(ul),cs(dl),cs(Ep),cs(Rp),cs(ap),cs(Tp),cs(Lp),cs(Ib),cs(Dp)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Sd,null,[[0,5]])}var Fp=Object(a.a)().mark(Yp),Bp=Object(a.a)().mark(Xp),Gp=Object(a.a)().mark(Qp),Vp=Object(a.a)().mark(Zp),Hp=Object(a.a)().mark($p),zp=Object(a.a)().mark(Jp),Wp={},qp="START_TYPING",Kp="STOP_TYPING";function Yp(e,t){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,as(Lb,{type:e,payload:{conversationId:t}});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 8:case"end":return n.stop()}}),Fp,null,[[0,5]])}function Xp(e,t){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,n.next=4,cs(Yp,qp,e);case 4:return n.next=6,ls(25e3);case 6:return n.next=8,Ji(t);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),Object(Tt.b)(n.t0);case 13:n.next=0;break;case 15:case"end":return n.stop()}}),Bp,null,[[1,10]])}function Qp(e,t){var n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=Ss(Bi.dropping(1)),a.next=4,cs(Xp,e,n);case 4:r=a.sent;case 5:return a.next=8,Ji(t);case 8:if((c=a.sent).type!==Pe.db){a.next=13;break}n.put(c),a.next=14;break;case 13:return a.abrupt("break",16);case 14:a.next=5;break;case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 21:return a.prev=21,a.next=24,cs(Yp,Kp,e);case 24:return n&&n.close(),r&&r.cancel(),a.finish(21);case 27:case"end":return a.stop()}}),Gp,null,[[0,18,21,27]])}function Zp(e,t){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,void 0,n.next=5,Ji(t);case 5:if(n.sent.type===Pe.db){n.next=8;break}return n.abrupt("continue",0);case 8:return n.next=10,as(Qp,e,t);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),Object(Tt.b)(n.t0);case 15:n.next=0;break;case 17:case"end":return n.stop()}}),Vp,null,[[1,12]])}function $p(){var e,t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;case 1:return a.prev=2,a.next=5,ns([Ji(Pe.db),Ji(Pe.eb)]);case 5:if(e=a.sent,t=Tu()(e)[0],n=t.payload.conversationId,r=Wp[n]){a.next=14;break}return r=Ss(Bi.sliding(1)),Wp[n]=r,a.next=14,cs(Zp,n,r);case 14:r.put(t),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(2),Object(Tt.b)(a.t0);case 20:a.next=1;break;case 22:a.next=27;break;case 24:a.prev=24,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 27:case"end":return a.stop()}}),Hp,null,[[0,24],[2,17]])}function Jp(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cs($p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),zp,null,[[0,5]])}var ev=n(420),tv=n.n(ev),nv=n(494),rv=n.n(nv),av=(n(381),n(577)),cv=n.n(av),ov=Object(a.a)().mark(pv),iv=Object(a.a)().mark(vv),sv=Object(a.a)().mark(Ov),uv=Object(a.a)().mark(jv),lv=Object(a.a)().mark(hv),fv=Object(a.a)().mark(gv),bv={};unction pv(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(3e4);case 2:throw new Error("");case 3:case"end":return e.stop()}}),ov)}function vv(e,t,n,r){var c,o,i,s,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,es({type:Pe.a,payload:{conversationId:t,userId:n,actionTime:r}});case 3:return a.next=5,cs(pv);case 5:c=a.sent;case 6:return a.next=9,Ji(e);case 9:if((o=a.sent).type!==dt){a.next=21;break}if(c.isCancelled()){a.next=14;break}return a.next=14,is(c);case 14:return a.next=16,cs(pv);case 16:return c=a.sent,a.next=19,es({type:Pe.a,payload:{conversationId:t,userId:n,actionTime:o.payload.actionTime}});case 19:a.next=28;break;case 21:return a.next=23,ss(xa.c);case 23:if(i=a.sent,s=Object(rc.m)(i,t),!((u=Object(rc.u)(s,n))&&Pu.a.getCreationTime(u)<o.payload.actionTime)){a.next=28;break}return a.abrupt("break",30);case 28:a.next=6;break;case 30:a.next=35;break;case 32:a.prev=32,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 35:return a.prev=35,a.next=38,es({type:Pe.b,payload:{conversationId:t,userId:n}});case 38:if(!c||c.isCancelled()){a.next=41;break}return a.next=41,is(c);case 41:return a.finish(35);case 42:case"end":return a.stop()}}),iv,null,[[0,32,35,42]])}function Ov(e,t,n){var r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,r=void 0,a.next=5,Ji(e);case 5:if((r=a.sent).type===dt){a.next=8;break}return a.abrupt("continue",0);case 8:return a.next=10,as(vv,e,t,n,r.payload.actionTime);case 10:a.next=14;break;case 12:a.prev=12,a.t0=a.catch(1);case 14:a.next=0;break;case 16:case"end":return a.stop()}}),sv,null,[[1,12]])}function jv(e){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.sender,a.next=4,ss(xa.h);case 4:if(c=a.sent,o=qa()(Object(Vf.e)(c,r)),i=dv(n,o),s=bv[i]){a.next=13;break}return s=Ss(Bi.sliding(1)),bv[i]=s,a.next=13,cs(Ov,s,n,o);case 13:s.put(e),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 19:case"end":return a.stop()}}),uv,null,[[0,16]])}function hv(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.map((function(e){return as(jv,e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),lv,null,[[0,5]])}function gv(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.map((function(e){return as(jv,e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),fv,null,[[0,5]])}var mv=Object(a.a)().mark(wv),xv=Object(a.a)().mark(kv),yv=Object(a.a)().mark(Ev),Iv=["AGENT_ASSIGNED","AGENT_UNASSIGNED","AGENT_ASSIGNMENT_CHANGED","WORK_QUEUE_ASSIGNED"];function wv(e,t,n){var r,c,o,i,s,u,l,f;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(b=e)||!Iv.includes(b.type)){a.next=21;break}return r=e.newAgentId,c=e.oldAgentId,o=e.queueId,i=[],s=[],c&&(i.push({conversationId:t,sender:c}),s.push(c)),r&&(i.push({conversationId:t,sender:r}),s.push(r)),a.next=9,as(wl,i);case 9:return a.next=11,es(Object(Hf.a)({conversationId:t,agentAssigned:!!r,participants:s,workQueueAssigned:!!o}));case 11:return a.next=13,ss((function(e){return r?Object(Ua.g)(Object(xa.h)(e),r):void 0}));case 13:return u=a.sent,a.next=16,ss((function(e){return c?Object(Ua.g)(Object(xa.h)(e),c):void 0}));case 16:if(l=a.sent,f={currentlyAssignedUser:u,previouslyAssignedUser:l,assignmentTime:n},!r){a.next=21;break}return a.next=21,es(Object(nr.c)({conversationId:t,additional:f,action:gc.a.AGENT_ASSIGNED}));case 21:a.next=26;break;case 23:a.prev=23,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 26:case"end":return a.stop()}var b}),mv,null,[[0,23]])}function kv(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.conversationId,n=e.messagePayload,r=e.creationTime,c=n.events,a.next=5,ts(c.map(());case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 10:case"end":return a.stop()}}),xv,null,[[0,7]])}function Ev(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=e.data,!Object(Mu.f)(t)){n.next=5;break}return n.next=5,ts([as(kv,t)]);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 10:case"end":return n.stop()}}),yv,null,[[0,7]])}n(209);var Cv=function(){var e=new Set;return{add:function(t){return e.add(t)},has:function(t){return e.has(t)},delete:clear:}(),Tv=function(){var e=[];return{set:get:function(){return e},push:function(t){e=[].concat(Object(r.a)(e),Object(r.a)(vl()(t)))},clear:}(),Sv=Object(a.a)().mark(Hv),_v=Object(a.a)().mark(zv),Av=Object(a.a)().mark(Wv),Nv=Object(a.a)().mark(qv),Rv=Object(a.a)().mark(Kv),Pv=Object(a.a)().mark(Yv),Lv=Object(a.a)().mark(Xv),Mv=Object(a.a)().mark(Qv),Dv=Object(a.a)().mark(Zv),Uv=Object(a.a)().mark($v),Fv=Object(a.a)().mark(Jv);function Bv(e){return e.type===ut}function Gv(e){return e.type===dt}function Vv(e){return e.type===pt}function Hv(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(t=e.data)){a.next=11;break}return a.next=5,as(Ev,e);case 5:return a.next=7,ss(xa.h);case 7:return n=a.sent,r=Object(Vf.e)(n,Pu.a.getSender(t)),a.next=11,es(Object(Hf.g)(t,r));case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 16:case"end":return a.stop()}}),Sv,null,[[0,13]])}function zv(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.filter(Bv),r.next=4,ts(t.map((function(e){return as(Hv,e)})));case 4:if(n=t.reduce((function(e,t){var n=t.data;return n&&e.push(Pu.a.getId(n)),e}),[]),d()(n)){r.next=8;break}return r.next=8,as(Du.r,n);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 13:case"end":return r.stop()}}),_v,null,[[0,10]])}function Wv(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,(t=e.filter(Gv)).length){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,as(hv,t);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 11:case"end":return n.stop()}}),Av,null,[[0,8]])}function qv(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,(t=e.filter(Vv)).length){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,as(gv,t);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 11:case"end":return n.stop()}}),Nv,null,[[0,8]])}function Kv(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts([as(zv,e),as(Wv,e),as(qv,e)]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),Rv,null,[[0,5]])}function Yv(e){var t,n,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.id,n=e.data,Cv.add(t),Oo()(Tv.get(),(),t!==f()(qa()(Tv.get()),"id")){a.next=9;break}return c=ao()(Tv.get(),(function(e,t){return Cv.has(t.id)&&d()(e.unresolvedEvents)?(Cv.delete(t.id),Object.assign(Object.assign({},e),{resolvedEvents:[].concat(Object(r.a)(e.resolvedEvents),[t])})):Object.assign(Object.assign({},e),{unresolvedEvents:[].concat(Object(r.a)(e.unresolvedEvents),[t])})}),{resolvedEvents:[],unresolvedEvents:[]}),o=c.resolvedEvents,i=c.unresolvedEvents,Tv.set(i),a.next=9,cs(Kv,o);case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 14:case"end":return a.stop()}}),Pv,null,[[0,11]])}function Xv(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!Bv(e)){n.next=7;break}return n.next=4,as(op,e);case 4:return t=n.sent,n.next=7,as(Yv,{id:e.id,data:t});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),Lv,null,[[0,9]])}function Qv(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!Gv(e)){n.next=7;break}return t=cv()(e.payload,["conversationId","sender"]),n.next=5,as(wl,t);case 5:return n.next=7,as(Yv,{id:e.id,data:{}});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),Mv,null,[[0,9]])}function Zv(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!Vv(e)){t.next=4;break}return t.next=4,as(Yv,{id:e.id,data:{}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 9:case"end":return t.stop()}}),Dv,null,[[0,6]])}function $v(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts([as(Xv,e),as(Qv,e),as(Zv,e)]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),Uv,null,[[0,5]])}function Jv(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Tv.push(e),t.next=4,ts(e.map((function(e){return cs($v,e)})));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 9:case"end":return t.stop()}}),Fv,null,[[0,6]])}var eO=n(1100),tO=n.n(eO),nO=Object(a.a)().mark(dO),rO=Object(a.a)().mark(pO),aO=Object(a.a)().mark(vO),cO=Object(a.a)().mark(OO),oO=Object(a.a)().mark(jO),iO=Object(a.a)().mark(hO);function sO(e){return e.type===lt}function uO(e){return e.type===mt}function lO(e){return e.type===bt}function fO(e){return e.type===ft}unction dO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(fO).map((function(e){return as(ip,e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),nO,null,[[0,5]])}function pO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(sO).map((function(e){return as(sp,e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),rO,null,[[0,5]])}function vO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(tO()(e.filter(lO).map((function(e){return[as(kl,{sender:e.payload.chatUserId,conversationId:e.payload.conversationId}),es(Object(nr.c)({conversationId:e.payload.conversationId,action:gc.a.USER_PROFILE_UPDATED,additional:{sender:e.payload.chatUserId}}))]}))));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),aO,null,[[0,5]])}function OO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(bO).map((function(e){return as(up,e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),cO,null,[[0,5]])}function jO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(uO).map(());case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),oO,null,[[0,5]])}function hO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts([as(dO,e),as(pO,e),as(vO,e),as(OO,e),as(jO,e)]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),iO,null,[[0,5]])}var gO=Object(a.a)().mark(wO),mO=Object(a.a)().mark(kO),xO=Object(a.a)().mark(EO),yO=Object(a.a)().mark(CO),IO=[ut,dt,pt];function wO(e){var t,n,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload.events,n=[],c=[],Oo()(t,(function(e){tv()(IO,e.type)?n=[].concat(Object(r.a)(n),[Object.assign(Object.assign({},e),{id:rv()()})]):c=[].concat(Object(r.a)(c),[e])})),a.next=7,as(Jv,n);case 7:return a.next=9,as(hO,c);case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 14:case"end":return a.stop()}}),gO,null,[[0,11]])}function kO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.j,wO);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),mO,null,[[0,5]])}function EO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji(Js.c);case 3:Cv.clear(),Tv.clear(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 9:case"end":return e.stop()}}),xO,null,[[0,6]])}function CO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(kO),cs(EO)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),yO,null,[[0,5]])}n(516);var TO=n(535),SO=Object(a.a)().mark(PO),_O=Object(a.a)().mark(LO),AO=Object(a.a)().mark(MO),NO=Object(a.a)().mark(DO),RO=function(e){var t=on.a.getNoDisplayConfigFilter(e);return!d()(t)&&Object(ko.d)(t,TO.a.IS_CONVERSATION_OPEN)};function PO(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ss(xa.c);case 3:if(t=r.sent,n=Object(rc.q)(t),Object(rc.b)(n)){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,es(Object(Hf.b)({shouldFetchNumberOfOpenConversation:RO(e.applicationConfig),size:n.ids.length}));case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 14:case"end":return r.stop()}}),SO,null,[[0,11]])}function LO(){var e,t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ss(xa.c);case 3:if(e=a.sent,t=Object(rc.q)(e),n=Object(rc.o)(e),!(r=ao()(n,(function(e,n,r){var a=n.messages;if(!r.startsWith(Nf.e)&&Object(rc.a)(a)&&!Object(rc.A)(t,r)){var c=Object(Hf.c)(r,{size:Object(rc.l)(a).length})();e.push(es(c))}return e}),[])).length){a.next=10;break}return a.next=10,ts(r);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 15:case"end":return a.stop()}}),_O,null,[[0,12]])}function MO(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ts([cs(PO,e),cs(LO)]);case 2:case"end":return t.stop()}}),AO)}function DO(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ji(Js.a);case 2:return e=n.sent,t=e.payload.applicationConfig,n.next=6,su(fu.k,MO,{applicationConfig:t});case 6:case"end":return n.stop()}}),NO)}var UO=Object(a.a)().mark(FO);function FO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Up),cs(Jp),cs(CO),cs(DO)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),UO,null,[[0,5]])}var BO=Object(a.a)().mark(VO),GO=Object(a.a)().mark(HO);function VO(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,r.t0=Ua.c,r.next=5,ss(xa.h);case 5:return r.t1=r.sent,n=(0,r.t0)(r.t1),r.next=9,as(Ol.e,Object.assign(Object.assign({},n),{customContext:t}));case 9:return r.next=11,es(Object(nr.c)({action:gc.a.USER_PROFILE_UPDATED}));case 11:r.next=16;break;case 13:r.prev=13,r.t2=r.catch(0),Object(Tt.b)(r.t2);case 16:case"end":return r.stop()}}),BO,null,[[0,13]])}function HO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(q.g,VO);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),GO,null,[[0,5]])}var zO=Object(a.a)().mark(qO),WO=Object(a.a)().mark(KO);function qO(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,a.next=4,as(Ol.d,t);case 4:return n=a.sent,e.promise.resolve(n),r=n.results,a.next=9,es({type:q.h,payload:{users:r}});case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),e.promise.reject(a.t0),Object(Tt.b)(a.t0);case 15:case"end":return a.stop()}}),zO,null,[[0,11]])}function KO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(q.e,qO);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),WO,null,[[0,5]])}var YO=Object(a.a)().mark(QO),XO=Object(a.a)().mark(ZO);function QO(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload.userId,r.next=4,as(Ol.a,t);case 4:return n=r.sent,e.promise.resolve(n),r.next=8,es({type:q.h,payload:{users:[n]}});case 8:r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),e.promise.reject(r.t0),Object(Tt.b)(r.t0);case 14:case"end":return r.stop()}}),YO,null,[[0,10]])}function ZO(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(q.b,QO);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),XO,null,[[0,5]])}var $O=Object(a.a)().mark(ej),JO=Object(a.a)().mark(tj);function ej(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,a.next=4,as(Ol.c,t);case 4:return n=a.sent,e.promise.resolve(n),r=n.results,a.next=9,es({type:q.h,payload:{users:r}});case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),e.promise.reject(a.t0),Object(Tt.b)(a.t0);case 15:case"end":return a.stop()}}),$O,null,[[0,11]])}function tj(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(q.d,ej);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),JO,null,[[0,5]])}var nj=Object(a.a)().mark(rj);function rj(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(HO),cs(KO),cs(tj),cs(ZO)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),nj,null,[[0,5]])}var aj=n(751),cj=n(693),oj=Object(a.a)().mark(mj),ij=Object(a.a)().mark(xj),sj=Object(a.a)().mark(yj),uj=Object(a.a)().mark(Ij),lj=Object(a.a)().mark(wj),fj=Object(a.a)().mark(kj),bj=Object(a.a)().mark(Ej),dj=Object(a.a)().mark(Cj);function pj(e){return e.type===ht}function vj(e){return e.type===gt}function Oj(e){return e.type===yt}function jj(e){return e.type===It}function hj(e){return e.type===xt}function gj(e){return e.type===Ct}function mj(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=Ua.c,n.next=4,ss(xa.h);case 4:return n.t1=n.sent,t=(0,n.t0)(n.t1),n.next=8,ts(e.filter(pj).map((function(e){var n,r,a=e.payload.participantInfos.find((function(e){return e.snId===t.userId})),c=e.payload.type,o=null!==(n=null===a||void 0===a?void 0:a.callMode)&&void 0!==n?n:Object(Sb.b)(c),i=null!==(r=null===a||void 0===a?void 0:a.permissions)&&void 0!==r?r:Object(Sb.c)(o);return es(Object(wb.o)({conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId,callMode:o,permissions:i,participantInfos:e.payload.participantInfos,type:c}))})));case 8:n.next=13;break;case 10:n.prev=10,n.t2=n.catch(0),Object(Tt.b)(n.t2);case 13:case"end":return n.stop()}}),oj,null,[[0,10]])}function xj(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ss(xa.b);case 3:return t=n.sent,n.next=6,ts(e.filter(vj).map((function(e){var n=Object(aj.a)(t,e.payload.videoConversationId),r=n.callDetails,a=n.isIncomingCall,c=n.isOutgoingCall,o=a&&r.state===Ia.f.WAITING;if((a||c)&&!Object(Sb.e)({isIncomingCall:a,state:r.state}))return es(o?Object(wb.q)({videoConversationId:e.payload.videoConversationId}):Object(wb.m)({callDetails:r,isIncomingCall:a,notifyAgent:!1,notifyUser:!0,videoConversationId:e.payload.videoConversationId}))})).filter((function(e){return e})));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 11:case"end":return n.stop()}}),ij,null,[[0,8]])}function yj(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ss(xa.b);case 3:return t=n.sent,n.next=6,ts(e.filter(jj).map((function(e){var n=Object(aj.a)(t,e.payload.videoConversationId),r=n.callDetails,a=n.isIncomingCall,c=n.isOutgoingCall;if((a||c)&&!Object(Sb.e)({isIncomingCall:a,state:r.state}))return es(Object(wb.h)({isIncomingCall:a,conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId}))})).filter((function(e){return e})));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 11:case"end":return n.stop()}}),sj,null,[[0,8]])}function Ij(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ss(xa.b);case 3:return t=r.sent,n=e.filter(Oj).map((function(e){var n=Object(aj.a)(t,e.payload.videoConversationId),r=n.callDetails;if(n.isOutgoingCall&&!Object(Sb.e)({isIncomingCall:!1,state:r.state}))return es(Object(wb.c)({isIncomingCall:!1,conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId}))})).filter((function(e){return e})),r.next=7,ts(n);case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 12:case"end":return r.stop()}}),uj,null,[[0,9]])}function wj(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(hj).map((function(e){return es(Object(wb.v)({videoConversationId:e.payload.videoConversationId,callInfo:{conversation:e.payload.conversation,participant:e.payload.participant}}))})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),lj,null,[[0,5]])}function kj(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(gj).map((function(e){return es({type:cj.x,payload:{videoConversationId:e.payload.videoConversationId,participantPermissions:e.payload.permissions,callMode:e.payload.callMode}})})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),fj,null,[[0,5]])}function Ej(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.events,n.next=4,ts([as(xj,t),as(mj,t),as(Ij,t),as(wj,t),as(yj,t),as(kj,t)]);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),bj,null,[[0,6]])}function Cj(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.j,Ej);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),dj,null,[[0,5]])}var Tj="video-chat/conversation";function Sj(e){var t=e.videoConversationId,n=e.shouldWaitForConnection;return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function e(){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(Tj,"/accept/").concat(t,"?shouldWaitForConnection=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))}function _j(e){var t=e.videoConversationId;return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$s.a.post("".concat(Tj,"/leave/").concat(t)));case 1:case"end":return e.stop()}}),e)})))}function Aj(e){var t=e.conversationId,n=e.audioOnly,r=e.messageText,c=e.sourceButtonId,o=e.postBackChatMessageId,i=e.shouldWaitForConnection,s=e.videoConversationId,u=e.activityEventType;return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function e(){var l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(Tj,"/initiate/").concat(t),{audioOnly:n,messageText:r,clickedButtonId:c,postBackChatMessageId:o,shouldWaitForConnection:i,videoChatConversationId:s,activityEventType:u});case 2:return l=e.sent,e.abrupt("return",l.data);case 4:case"end":return e.stop()}}),e)})))}function Nj(e){var t=e.videoConversationId,n=e.meetingId;return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function e(){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(Tj,"/participant/connected/").concat(t,"?meetingId=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))}function Rj(e){return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function t(){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$s.a.post("".concat(Tj,"/fetch/ongoing/conversation?caseId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function Pj(e){var t=e.videoConversationId,n=e.reason,r=e.subReason;return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function e(){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s.a.post("".concat(Tj,"/callFailed/").concat(t),{reason:n,subReason:r});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})))}var Lj=n(831),Mj=Object(a.a)().mark($j),Dj=Object(a.a)().mark(Jj),Uj=Object(a.a)().mark(eh),Fj=Object(a.a)().mark(th),Bj=Object(a.a)().mark(nh),Gj=Object(a.a)().mark(rh),Vj=Object(a.a)().mark(ah),Hj=Object(a.a)().mark(ch),zj=Object(a.a)().mark(oh),Wj=Object(a.a)().mark(ih),qj=Object(a.a)().mark(sh),Kj=Object(a.a)().mark(uh),Yj=Object(a.a)().mark(lh),Xj=Object(a.a)().mark(fh),Qj=Object(a.a)().mark(bh),Zj=Object(a.a)().mark(dh);function $j(e,t,n){var r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ss(xa.c);case 2:if(r=a.sent,!(c=Object(Tb.b)(r,e,t))){a.next=7;break}return a.next=7,as(il,{chatMessage:c,conversationId:e,params:{state:n}});case 7:case"end":return a.stop()}}),Mj)}function Jj(e){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.notifyAgent,r=t.notifyUser,c=t.callDetails,o=t.videoConversationId,i=t.isIncomingCall,s=c.conversationId,a.next=5,es(Object(nr.c)({conversationId:s,action:gc.a.CALL_ENDED,additional:{videoConversationId:o,userInitiated:!r}}));case 5:return a.next=7,as($j,s,o,Lj.a.CALL_ENDED);case 7:if(n){a.next=9;break}return a.abrupt("return");case 9:if(i||c.hasInitiateSucceeded||c.state!==Ia.h.WAITING){a.next=15;break}return a.next=12,Ji(Object(Tb.g)(o));case 12:if(a.sent.type!==cj.e){a.next=15;break}return a.abrupt("return");case 15:if(!i||c.state!==Ia.f.ACCEPTED){a.next=21;break}return a.next=18,Ji(Object(Tb.c)(o));case 18:if(a.sent.type!==cj.e){a.next=21;break}return a.abrupt("return");case 21:return a.next=23,as(_j,{videoConversationId:o});case 23:a.next=28;break;case 25:a.prev=25,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 28:case"end":return a.stop()}}),Dj,null,[[0,25]])}function eh(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.payload.isOutgoingWaiting){t.next=4;break}return t.next=4,as(Jj,e);case 4:return t.next=6,es({type:Pe.bb,payload:{text:e.payload.text,sender:e.payload.sender,conversationId:e.payload.conversationId}});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 11:case"end":return t.stop()}}),Uj,null,[[0,8]])}function th(e){var t,n,r,c,o,i,s,u,l,f;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.actionParams,r=n.messageId,c=n.actionId,o=t.conversationId,a.next=4,ss(xa.b);case 4:if(i=a.sent,s=Object(ya.f)(i),!(u=s.messageId)||r!==u||c===s.sourceButtonId){a.next=15;break}return a.next=10,ss(xa.c);case 10:if(l=a.sent,!(f=Object(rc.k)(Object(rc.m)(l,o),r))||Lu.a.getAttachment(Pu.a.getMessagePayload(f)).reSubmittable){a.next=15;break}return a.next=15,es(Object(wb.m)({notifyAgent:!0,notifyUser:!1,callDetails:s,isIncomingCall:!1,videoConversationId:s.videoConversationId}));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 20:case"end":return a.stop()}}),Fj,null,[[0,17]])}function nh(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,es(Object(wb.r)({conversationId:e.payload.conversationId,controls:Object(Tb.h)(e.payload.isPhone),type:e.payload.type,messageText:e.payload.messageText,messageId:e.payload.messageId,sourceButtonId:e.payload.sourceButtonId,videoConversationId:rv.a.v4()}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),Bj,null,[[0,5]])}function rh(e){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.error,n=e.videoConversationId,r=e.reason,c=e.isIncomingCall,a.next=3,ss(xa.b);case 3:if(o=a.sent,i=c?Object(ya.d)(o):Object(ya.f)(o),!d()(i)&&i.videoConversationId===n&&!Object(Sb.e)({isIncomingCall:c,state:i.state})){a.next=7;break}return a.abrupt("return");case 7:if(!Object(Kn.f)(t)){a.next=15;break}if((s=f()(t,"response.data.error"))!==Ia.a.CALL_ALREADY_ENDED){a.next=13;break}return a.next=12,es({type:cj.c,payload:{videoConversationId:n,notifyAgent:!1,notifyUser:!0,callDetails:i,isIncomingCall:c}});case 12:return a.abrupt("return");case 13:return a.next=15,es({type:cj.e,payload:{videoConversationId:n,reason:r,subReason:s}});case 15:case"end":return a.stop()}}),Gj)}function ah(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload.videoConversationId,r.next=4,es(Object(wb.b)({videoConversationId:t,controls:Object(Tb.h)(e.payload.isPhone)}));case 4:return r.next=6,as(Sj,{videoConversationId:t,shouldWaitForConnection:!0});case 6:return n=r.sent,r.next=9,es({type:cj.x,payload:{callMode:n.participant.callMode,participantPermissions:n.participant.permissions,participantInfos:n.conversation.participantInfos,videoConversationId:n.conversation.id}});case 9:return r.next=11,es(Object(wb.u)({videoConversationId:t}));case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(0),Object(Tt.b)(r.t0),r.next=18,as(rh,{videoConversationId:e.payload.videoConversationId,isIncomingCall:!0,error:r.t0,reason:Ia.e.ACCEPT_FAILED});case 18:case"end":return r.stop()}}),Vj,null,[[0,13]])}function ch(e){var t,n,r,c,o,i,s,u,l;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=e.payload.videoConversationId,a.next=4,ss(xa.b);case 4:return r=a.sent,c=Object(ya.f)(r),o=c.messageId,i=c.conversationId,s=Object(ya.h)(r,n),a.next=9,es(Object(nr.c)({conversationId:i,action:s?gc.a.AUDIO_CALL_OUTGOING_STARTING:gc.a.VIDEO_CALL_OUTGOING_STARTING,additional:{videoConversationId:n}}));case 9:if(!o){a.next=16;break}return a.next=12,ss(xa.c);case 12:return u=a.sent,t=Object(rc.k)(Object(rc.m)(u,i),o),a.next=16,as(il,{chatMessage:t,conversationId:i,params:{buttonId:c.sourceButtonId}});case 16:return a.next=18,as(Aj,{conversationId:i,audioOnly:s,messageText:c.messageText,sourceButtonId:c.sourceButtonId,postBackChatMessageId:o,shouldWaitForConnection:!0,videoConversationId:n,activityEventType:"CALL_STARTED"});case 18:return l=a.sent,a.next=21,es({type:cj.x,payload:{agentWaitTime:l.conversation.agentWaitTime,callMode:l.participant.callMode,participantInfos:l.conversation.participantInfos,participantPermissions:l.participant.permissions,videoConversationId:l.conversation.id}});case 21:a.next=31;break;case 23:if(a.prev=23,a.t0=a.catch(0),!t){a.next=28;break}return a.next=28,es({type:Pe.K,payload:{chatMessage:t,conversationId:e.payload.conversationId}});case 28:return a.next=30,as(rh,{videoConversationId:e.payload.videoConversationId,reason:Ia.g.INITIATE_FAILED,error:a.t0,isIncomingCall:!1});case 30:Object(Tt.b)(a.t0);case 31:case"end":return a.stop()}}),Hj,null,[[0,23]])}function oh(e){var t,n,r,c,o,i,s,u,l,f,b,p,v,O;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.type,c=t.isPhone,o=t.prevState,i=t.videoConversationId,s=t.participantInfos,u=t.participantPermissions,l=t.callMode,a.next=4,ss(xa.b);case 4:if(f=a.sent,b=Object(ya.c)(f),!Object(Tb.i)({callDetails:b})){a.next=8;break}return a.abrupt("return",void 0);case 8:return p=r===Ia.c.AUDIO,v=Object(Tb.d)(o),a.next=12,es(Object(nr.c)({conversationId:n,action:Object(Tb.e)(p,v),additional:{videoConversationId:i}}));case 12:return a.next=14,es(Object(wb.s)({conversationId:n,videoConversationId:i,state:v?Ia.f.ACCEPTED:Ia.f.SETUP,controls:Object(Tb.h)(c),type:r,participantPermissions:u,callMode:l,participantInfos:s}));case 14:return a.next=16,as(Rj,n);case 16:if(O=a.sent,!d()(O)){a.next=21;break}return a.next=20,es({type:cj.c,payload:{videoConversationId:e.payload.videoConversationId,notifyAgent:!1,notifyUser:!0,isIncomingCall:!0}});case 20:case 37:case 47:case 48:return a.abrupt("return",void 0);case 21:return a.next=23,es({type:cj.x,payload:{callMode:O.participant.callMode,participantPermissions:O.participant.permissions,participantInfos:O.conversation.participantInfos,videoConversationId:O.conversation.id}});case 23:if(!v){a.next=40;break}return a.prev=24,a.next=27,as(Sj,{videoConversationId:O.conversation.id,shouldWaitForConnection:!0});case 27:return O=a.sent,a.next=30,es({type:cj.x,payload:{callMode:O.participant.callMode,participantPermissions:O.participant.permissions,participantInfos:O.conversation.participantInfos,videoConversationId:O.conversation.id}});case 30:a.next=38;break;case 32:return a.prev=32,a.t0=a.catch(24),Object(Tt.b)(a.t0),a.next=37,as(rh,{videoConversationId:e.payload.videoConversationId,reason:Ia.e.ACCEPT_FAILED,error:a.t0,isIncomingCall:!0});case 38:return a.next=40,es(Object(wb.u)({videoConversationId:O.conversation.id}));case 40:a.next=48;break;case 42:return a.prev=42,a.t1=a.catch(0),Object(Tt.b)(a.t1),a.next=47,as(rh,{videoConversationId:e.payload.videoConversationId,reason:Ia.e.REJOIN_FAILED,error:a.t1,isIncomingCall:!0});case 49:case"end":return a.stop()}}),zj,null,[[0,42],[24,32]])}function ih(e){var t,n,r,c,o,i,s,u,l,f,b,p,v;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.type,c=t.isPhone,o=t.prevState,i=t.videoConversationId,s=t.participantInfos,u=t.participantPermissions,l=t.callMode,a.next=4,ss(xa.b);case 4:if(f=a.sent,b=Object(ya.c)(f),!Object(Tb.i)({callDetails:b})){a.next=8;break}return a.abrupt("return",void 0);case 8:return p=r===Ia.c.AUDIO,a.next=11,es(Object(nr.c)({conversationId:n,action:Object(Tb.e)(p),additional:{videoConversationId:i}}));case 11:return a.next=13,es(Object(wb.t)({conversationId:n,videoConversationId:i,state:Object(Tb.f)(o),controls:Object(Tb.h)(c),type:r,participantPermissions:u,callMode:l,participantInfos:s}));case 13:return a.next=15,as(Rj,e.payload.conversationId);case 15:if(v=a.sent,!d()(v)){a.next=20;break}return a.next=19,es({type:cj.c,payload:{videoConversationId:e.payload.videoConversationId,notifyAgent:!1,notifyUser:!0}});case 19:case 29:return a.abrupt("return",void 0);case 20:return a.next=22,es({type:cj.x,payload:{agentWaitTime:v.conversation.agentWaitTime,callMode:v.participant.callMode,participantPermissions:v.participant.permissions,participantInfos:v.conversation.participantInfos,videoConversationId:v.conversation.id}});case 22:a.next=29;break;case 24:return a.prev=24,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.next=29,as(rh,{videoConversationId:e.payload.videoConversationId,reason:Ia.g.REJOIN_FAILED,error:a.t0,isIncomingCall:!1});case 30:case"end":return a.stop()}}),Wj,null,[[0,24]])}function sh(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.isIncomingCall,r=Object(Ru.__rest)(t,["isIncomingCall"]),!n){a.next=7;break}return a.next=5,es(Object(wb.f)(r));case 5:a.next=9;break;case 7:return a.next=9,es(Object(wb.k)(r));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 14:case"end":return a.stop()}}),qj,null,[[0,11]])}function uh(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ss(xa.b);case 2:return t=a.sent,n=e.payload.videoConversationId,r=Object(aj.a)(t,n),c=r.isOutgoingCall,a.prev=5,o=c?wb.l:wb.g,a.next=9,es(o({videoConversationId:n}));case 9:return a.next=11,as(Nj,e.payload);case 11:a.next=18;break;case 13:return a.prev=13,a.t0=a.catch(5),a.next=17,as(rh,{videoConversationId:n,reason:c?Ia.g.JOIN_FAILED:Ia.e.JOIN_FAILED,error:a.t0,isIncomingCall:!c});case 17:Object(Tt.b)(a.t0);case 18:case"end":return a.stop()}}),Kj,null,[[5,13]])}function lh(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ss(xa.b);case 3:if(t=a.sent,n=Object(aj.a)(t,e.payload.videoConversationId),r=n.callDetails,c=n.isIncomingCall,!r.reason||r.reason===e.payload.reason){a.next=7;break}return a.abrupt("return");case 7:return o=r.conversationId,i=r.videoConversationId,a.next=11,es(Object(nr.c)({conversationId:o,action:gc.a.CALL_FAILED,additional:{videoConversationId:e.payload.videoConversationId}}));case 11:return a.next=13,as($j,o,i,Lj.a.CALL_FAILED);case 13:if(c||r.hasInitiateSucceeded){a.next=19;break}return a.next=16,Ji(Object(Tb.g)(i));case 16:if(a.sent.type!==cj.e){a.next=19;break}return a.abrupt("return");case 19:return a.next=21,as(Pj,{videoConversationId:e.payload.videoConversationId,reason:e.payload.reason,subReason:e.payload.subReason});case 21:a.next=26;break;case 23:a.prev=23,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 26:case"end":return a.stop()}}),Yj,null,[[0,23]])}function fh(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.isIncomingCall,r=t.conversationId,c=t.videoConversationId,a.next=4,es(Object(nr.c)({conversationId:r,action:gc.a.CALL_DECLINED,additional:{videoConversationId:c,userInitiated:n}}));case 4:return a.next=6,as($j,r,c,Lj.a.CALL_DECLINED);case 6:return a.next=8,as(_j,{videoConversationId:c});case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 13:case"end":return a.stop()}}),Xj,null,[[0,10]])}function bh(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.videoConversationId,c=t.isIncomingCall,a.next=4,es(Object(nr.c)({conversationId:n,action:gc.a.CALL_MISSED,additional:{videoConversationId:r,userInitiated:c}}));case 4:return a.next=6,as($j,n,r,Lj.a.CALL_MISSED);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 11:case"end":return a.stop()}}),Qj,null,[[0,8]])}function dh(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(cj.g,ah);case 3:return e.next=5,su(cj.c,Jj);case 5:return e.next=7,su(cj.o,nh);case 7:return e.next=9,su(cj.u,ch);case 9:return e.next=11,su(cj.d,eh);case 11:return e.next=13,su(cj.v,sh);case 13:return e.next=15,su(cj.k,oh);case 15:return e.next=17,su(cj.r,ih);case 17:return e.next=19,su(Pe.c,th);case 19:return e.next=21,su(cj.y,uh);case 21:return e.next=23,su(cj.e,lh);case 23:return e.next=25,su(cj.b,fh);case 25:return e.next=27,su(cj.n,bh);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 32:case"end":return e.stop()}}),Zj,null,[[0,29]])}var ph=Object(a.a)().mark(vh);function vh(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ts([cs(Cj),cs(dh)]);case 2:case"end":return e.stop()}}),ph)}var Oh=Object(a.a)().mark(mh),jh=Object(a.a)().mark(xh),hh=Object(a.a)().mark(yh);function gh(e){return e.type===wt}function mh(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ss(xa.f);case 3:if(e=t.sent,d()(e)){t.next=7;break}return t.next=7,es(Object(Da.g)());case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),Oh,null,[[0,9]])}function xh(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.events,n.next=4,ts(t.filter(gh).map((function(e){var t=e.payload.status;return"LIVE"===t?as(mh):"COMPLETED"===t?es(Object(Da.c)({endedByAgent:!0})):null})));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),jh,null,[[0,6]])}function yh(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.j,xh);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),hh,null,[[0,5]])}var Ih=Object(a.a)().mark(wh);function wh(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ts([cs(xf),cs(yh)]);case 2:case"end":return e.stop()}}),Ih)}var kh=Object(a.a)().mark(Sh),Eh=Object(a.a)().mark(_h),Ch=Object(a.a)().mark(Ah);function Th(e){return e.type===kt}function Sh(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(Th).map(());case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),kh,null,[[0,5]])}function _h(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.events,n.next=4,ts([as(Sh,t)]);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),Eh,null,[[0,6]])}function Ah(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.j,_h);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Ch,null,[[0,5]])}var Nh=n(810),Rh=new Nh.a,Ph="/livechat/cart",Lh=function(e){return Object(Ru.__awaiter)(void 0,void 0,void 0,Object(a.a)().mark((function t(){var n,r,c,o,i,s,u,l,f,b,d,p;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.params,r=n.httpMethod,c=void 0===r?"GET":r,o=n.httpUrl,i=void 0===o?"":o,s=n.httpPayload,u=void 0===s?J.a:s,l=n.actionIdentifier,f=n.requestId,t.prev=1,"POST"!==c&&"PUT"!==c){t.next=8;break}return t.next=5,Rh[c.toLowerCase()](i,u,{withCredentials:!0});case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,Rh[c.toLowerCase()](i,{withCredentials:!0});case 10:t.t0=t.sent;case 11:p=t.t0,b=p.request.status,d=p.request.responseText,t.next=20;break;case 16:t.prev=16,t.t1=t.catch(1),Object(Tt.b)(t.t1),Object(Kn.f)(t.t1)?(b=t.t1.request.status,d=t.t1.request.responseText):(b=500,d="");case 20:return t.prev=20,t.next=23,a={status:b,responseText:d,actionIdentifier:l,requestId:f},v=e.conversationId,$s.a.post("".concat(Ph,"/on-add-to-cart/").concat(v),a);case 23:return t.finish(20);case 24:case"end":return t.stop()}var a,v}),t,null,[[1,16,20,24]])})))},Mh=function(e){return $s.a.post("".concat(Ph,"/update-cart"),e)},Dh=Uh=Object(a.a)().mark(Bh),Fh=Object(a.a)().mark(Gh);function Bh(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.type,r=t.params,c=t.conversationId,"HTTP_REQUEST"!==n){a.next=5;break}return a.next=5,as(Lh,{params:r,conversationId:c});case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 10:case"end":return a.stop()}}),Uh,null,[[0,7]])}function Gh(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(qe,Bh);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Fh,null,[[0,5]])}var Vh={presence:!0,format:{pattern:"^(?!\\s*$).+",message:"can only be non-empty string"}},Hh={modifiedTime:{type:"number"},productItems:{array:{each:{sku:Vh,productCategory:{type:"string"},quantity:{type:"number"},standardPrice:{type:"number"},standardCurrency:{type:"string"},title:{type:"string"},description:{type:"string"}}}}},zh={modifiedTime:{type:"number"},productItems:{array:{each:{sku:Vh,quantity:{type:"number"}}}}},Wh=Object(a.a)().mark(Kh),qh=Object(a.a)().mark(Yh);function Kh(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=e.payload,!(t=Object(et.a)(r,Hh))){n.next=5;break}return Object(k.a)("Invalid payload passed to update cart, please check",t),n.abrupt("return");case 5:return n.next=7,as(Mh,e.payload);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}var r}),Wh,null,[[0,9]])}function Yh(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Ke,Kh);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),qh,null,[[0,5]])}var Xh=Object(a.a)().mark(Zh),Qh=Object(a.a)().mark($h);function Zh(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=e.payload,!(t=Object(et.a)(r,zh))){n.next=5;break}return Object(k.a)("Invalid payload passed to remove from cart, please check",t),n.abrupt("return");case 5:return n.next=7,as(Dh,e.payload);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}var r}),Xh,null,[[0,9]])}function $h(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Ye,Zh);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Qh,null,[[0,5]])}var Jh=Object(a.a)().mark(eg);function eg(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ts([cs(Ah),cs(Gh),cs(Yh),cs($h)]);case 2:case"end":return e.stop()}}),Jh)}var tg=Object(a.a)().mark(rg),ng=Object(a.a)().mark(ag);function rg(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Eu),cs(FO),cs(rj),cs(vh),cs(wh),cs(eg)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),tg,null,[[0,5]])}function ag(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,cs(rg);case 3:return e=t.sent,t.next=6,Ji(Js.c);case 6:return t.next=8,is(e);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 13:case"end":return t.stop()}}),ng,null,[[0,10]])}n(82);var cg=n(582),og=n(702),ig=Object(a.a)().mark(ug);function sg(e,t){var n=Object(og.a)(e,{path:"/conversation/:conversationId/:transientId?"});if(!n)return{};var r=f()(n.params,"conversationId"),a=f()(n.params,"transientId");return"all"===r?{isConversationPath:!1,matchedConversationId:void 0}:"new"===r?{isConversationPath:!0,matchedConversationId:t?t.slice(1):a}:{isConversationPath:!0,matchedConversationId:r}}function ug(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=Ua.e,t.next=4,ss(dr.g);case 4:return t.t1=t.sent,e=(0,t.t0)(t.t1),t.abrupt("return",Object(he.a)(Object(he.a)({},Object(fn.a)()),{},{locale:e}));case 9:return t.prev=9,t.t2=t.catch(0),Object(Tt.b)(t.t2),t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),ig,null,[[0,9]])}var lg=n(1091),fg=Object(a.a)().mark(Sg),bg=Object(a.a)().mark(_g),dg=Object(a.a)().mark(Ag),pg=Object(a.a)().mark(Ng),vg=Object(a.a)().mark(Rg),Og=Object(a.a)().mark(Pg),jg=Object(a.a)().mark(Lg),hg=Object(a.a)().mark(Mg),gg=Object(a.a)().mark(Dg),mg=Object(a.a)().mark(Ug),xg=Object(a.a)().mark(Fg),yg=Object(a.a)().mark(Bg),Ig=Object(a.a)().mark(Gg),wg=Object(a.a)().mark(Vg),kg=Object(a.a)().mark(Hg),Eg=Object(a.a)().mark(zg);function Cg(e,t){return!(Pu.a.getSender(e)===t)&&!Object(Mu.f)(e)}var Tg=function(e,t,n){return n?[{conversationId:n,count:Object(cg.b)(e[n],t)}]:ao()(e,(function(e,n){var r=Object(cg.b)(n,t);return e.push({conversationId:n.id,count:r}),e}),[])};function Sg(e){var t,n,r,c,o,i,s,u,l,f,b,p,O,j,h,g;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,r=t.chatMessage,a.t0=Ua.d,a.next=5,ss(dr.g);case 5:return a.t1=a.sent,c=(0,a.t0)(a.t1),a.next=9,ss(dr.c);case 9:if(o=a.sent,!(i=Object(rc.g)(o.conversations,n))){a.next=35;break}if(s=wo()(i.defaultMessages,"id"),u=Pu.a.getId(r),!s.includes(u)){a.next=18;break}return a.next=17,es({type:Pe.Q,payload:{conversationId:n,lastReadMessageId:u}});case 17:return a.abrupt("return");case 18:if(!Cg(r,c)){a.next=35;break}return a.next=21,ss(cg.c);case 21:return l=a.sent,f=l.isConversationPath,b=l.conversationId,a.next=26,ss(dr.b);case 26:if(p=a.sent,O=p.isMinimized,j=Object(_e.b)(),h=!!f,g=!d()(i),!(Object(v.E)()?g&&n===b:g)){a.next=35;break}return a.next=34,es({type:Pe.R,payload:{conversationId:n,count:1}});case 34:O&&!h&&j.push("/conversation/".concat(n));case 35:a.next=40;break;case 37:a.prev=37,a.t2=a.catch(0),Object(Tt.b)(a.t2);case 40:case"end":return a.stop()}}),fg,null,[[0,37]])}function _g(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.F,Sg);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),bg,null,[[0,5]])}function Ag(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{n=Object(In.b)(),Object(In.c)(n)?n.open(Object(dn.c)(e.payload.url),e.payload.target):window.open(Object(dn.c)(e.payload.url)),null===(t=e.promise)||void 0===t||t.resolve()}catch(c){null===(r=e.promise)||void 0===r||r.reject(),Object(Tt.b)(c)}case 1:case"end":return a.stop()}}),dg)}function Ng(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.S,Ag);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),pg,null,[[0,5]])}function Rg(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{window.open(Object(dn.b)(e.payload.phoneNumber)),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){null===(n=e.promise)||void 0===n||n.reject(),Object(Tt.b)(a)}case 1:case"end":return r.stop()}}),vg)}function Pg(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.p,Rg);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Og,null,[[0,5]])}function Lg(e){var t,n,r,c,o,i,s;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.surveyUrl,r=t.shouldReplace,c=t.conversationId,o=Object(_e.b)(),i=Object(v.F)()||Object(v.K)()?"".concat(n,"&showCancel=true"):n,s="/survey/".concat(encodeURIComponent("".concat(i,"&hideThankYouPage=true"))),a.abrupt("return",r?o.replace(s):o.push(c?"/conversation/".concat(c).concat(s):s));case 6:return a.prev=6,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.abrupt("return",void 0);case 10:case"end":return a.stop()}}),jg,null,[[0,6]])}function Mg(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.W,Lg);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),hg,null,[[0,5]])}function Dg(e){var t,n,r,c,o,i,s,u,l;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.payload,n=t.deleted,r=t.closed,c=t.surveyUrl,o=t.conversationId,a.prev=2,!n&&!r){a.next=13;break}if(i=Object(_e.b)(),s=sg(i.location.pathname,i.location.hash),u=s.matchedConversationId,l=n&&!!o&&u===o&&!Object(v.F)(),!c){a.next=12;break}return a.next=10,es(Object(Uu.n)({surveyUrl:c,shouldReplace:l,conversationId:o}));case 10:a.next=13;break;case 12:l&&i.goBack();case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(2),Object(Tt.b)(a.t0);case 18:a.next=23;break;case 20:a.prev=20,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 23:case"end":return a.stop()}}),gg,null,[[0,20],[2,15]])}function Ug(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.j,Dg);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),mg,null,[[0,5]])}function Fg(){var e,t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ji(Js.a);case 3:if(e=a.sent,t=e.payload,t.applicationConfig,!t.handshakeDetails){a.next=24;break}if(!Object(v.J)()){a.next=12;break}return n=Object(v.i)(),a.next=12,es(Object(Uu.b)({conversationId:n}));case 12:if(!Object(v.I)()){a.next=20;break}return r=Object(v.h)(),c=Object(v.e)(r),a.next=17,as(ug);case 17:return o=a.sent,a.next=20,es(Object(Uu.a)(r,c,o));case 20:return a.next=22,ls(1e3);case 22:return a.next=24,es(Object(Uu.g)());case 24:a.next=29;break;case 26:a.prev=26,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 29:case"end":return a.stop()}}),xg,null,[[0,26]])}function Bg(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=e.promise,r=t.conversationId,a.next=5,as(lg.b,r);case 5:n&&n.resolve(),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),e.promise&&e.promise.reject(),Object(Tt.b)(a.t0);case 12:case"end":return a.stop()}}),yg,null,[[0,8]])}function Gg(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.o,Bg);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Ig,null,[[0,5]])}function Vg(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ss(dr.g);case 3:return t=a.sent,n=Object(Ua.d)(t),a.next=7,ss(dr.c);case 7:if(r=a.sent,c=Object(rc.q)(r),o=Tg(c.byId,n,e),d()(o)){a.next=13;break}return a.next=13,es({type:Pe.P,payload:o});case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),console.warn(a.t0);case 18:case"end":return a.stop()}}),wg,null,[[0,15]])}function Hg(){var e,t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!Object(v.E)()){a.next=25;break}if(!Object(v.M)()){a.next=14;break}case 3:return a.next=6,Ji(Pe.g);case 6:return a.next=8,ss(cg.c);case 8:return e=a.sent,t=e.conversationId,a.next=12,as(Vg,t);case 12:a.next=3;break;case 14:if(!Object(v.J)()&&!Object(v.I)()){a.next=24;break}return a.next=17,ns([Ji(Pe.t),Ji(Pe.u),Ji(Pe.w),Ji(Pe.x)]);case 17:return a.next=19,ss(cg.c);case 19:return n=a.sent,r=n.conversationId,a.next=23,as(Vg,r);case 23:case 24:return a.abrupt("return");case 25:if(!Object(v.J)()&&!Object(v.I)()){a.next=31;break}return a.next=28,ts([ns([Ji(Pe.t),Ji(Pe.w),Ji(Pe.u),Ji(Pe.x)]),Ji(Pe.g)]);case 28:return a.next=30,as(Vg);case 30:return a.abrupt("return");case 31:if(!(Object(v.O)()||Object(v.L)()||Object(v.M)())){a.next=39;break}case 32:return a.next=35,Ji(Pe.g);case 35:return a.next=37,as(Vg);case 37:a.next=32;break;case 39:a.next=44;break;case 41:a.prev=41,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 44:case"end":return a.stop()}}),kg,null,[[0,41]])}function zg(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Fg),cs(_g),cs(Ng),cs(Pg),cs(Gg),cs(Mg),cs(Ug),cs(Hg)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Eg,null,[[0,5]])}var Wg=Object(a.a)().mark(em),qg=Object(a.a)().mark(tm),Kg=Object(a.a)().mark(nm),Yg=Object(a.a)().mark(rm),Xg=Object(a.a)().mark(am),Qg=Object(a.a)().mark(cm),Zg=Object(a.a)().mark(om),$g=Object(a.a)().mark(im),Jg=Object(a.a)().mark(sm);function em(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.action,a.prev=1,n=t.payload,(o=n).type===ub.i||o.type===ub.j){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,ss(dr.c);case 7:if(r=a.sent,c=Object(rc.e)(Object(rc.w)(r)),n.type!==ub.i){a.next=12;break}return a.next=12,as(un.n,n.payload.contextId||c,n.payload.abortedProcessContext,[]);case 12:if(n.type!==ub.j){a.next=15;break}return a.next=15,as(un.k,n.payload.contextId||c);case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 20:case"end":return a.stop()}var o}),Wg,null,[[1,17]])}function tm(e){var t,n,c,o,i,s,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,c=t.chatMessage,a.next=4,as(un.f,n);case 4:if(!(o=a.sent)){a.next=12;break}if(i=Lu.a.getAttachment(Pu.a.getMessagePayload(c)),!(Object(yn.c)(Pu.a.getSender(c))&&i&&Object(Ab.d)(i))){a.next=12;break}return s=Pu.a.getId(c),u=o.messageIds,a.next=12,as(un.n,n,o.context,[].concat(Object(r.a)(u),[s]));case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 17:case"end":return a.stop()}}),qg,null,[[0,14]])}function nm(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.conversationId,t.chatMessage,a.next=4,as(un.f,n);case 4:if(!(r=a.sent)){a.next=8;break}return a.next=8,as(un.n,n,r.context,[]);case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 13:case"end":return a.stop()}}),Kg,null,[[0,10]])}function rm(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.F,tm);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Yg,null,[[0,5]])}function am(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.I,nm);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Xg,null,[[0,5]])}function cm(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,as(un.f,e);case 3:if(!(t=n.sent)){n.next=11;break}return n.next=7,ts(t.messageIds.map(());case 7:return n.next=9,as(Du.w,{context:t.context,conversationId:e});case 9:return n.next=11,as(un.k,e);case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 16:case"end":return n.stop()}}),Qg,null,[[0,13]])}function om(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.conversationResponse.results,n.next=4,ts(t.map(());case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),Zg,null,[[0,6]])}function im(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.g,om);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),$g,null,[[0,5]])}function sm(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(rm),cs(am),cs(im)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Jg,null,[[0,5]])}var um=n(543),lm=n.n(um),fm=n(498),bm=n.n(fm),dm=n(962),pm=n(823),vm=Object(a.a)().mark(Em),Om=Object(a.a)().mark(Cm),jm=Object(a.a)().mark(Tm),hm=Object(a.a)().mark(Sm),gm=Object(a.a)().mark(_m),mm=Object(a.a)().mark(Am),xm=Object(a.a)().mark(Nm),ym=Object(a.a)().mark(Rm),Im=function(e){return function(t){return t.type===Pe.w&&f()(t,"payload.conversationResponse.externalCaseId")===e}},wm=function(e){return function(t){return t.type===Pe.x&&f()(t,"payload.externalCaseId")===e}},km=function(e){return e.map((function(e){return Ef()(e)?{message:{text:e},isSentByUser:!1}:Ef()(e.message)?Object(he.a)(Object(he.a)({},e),{},{message:{text:e.message}}):e}))};function Em(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ss(dr.b);case 3:if(e=t.sent,!e.isMinimized){t.next=8;break}return t.next=8,es({type:$.d,payload:{}});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 13:case"end":return t.stop()}}),vm,null,[[0,10]])}function Cm(){var e,t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ss(dr.c);case 3:return e=a.sent,t=Object(rc.e)(Object(rc.w)(e)),a.next=7,as(_e.b);case 7:return n=a.sent,r="/conversation/".concat(t),c=sg(n.location.pathname,n.location.hash),c.isConversationPath?n.replace(r):n.push(r),a.next=13,as(Em);case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 18:case"end":return a.stop()}}),Om,null,[[0,15]])}function Tm(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji(Pe.g);case 3:return e.next=5,as(Cm);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 10:case"end":return e.stop()}}),jm,null,[[0,7]])}function Sm(e){var t,n,r,c,o,i,s,u,l,f,b,p,v,O,j,h;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.initialMessages,n=e.conversationContext,r=e.createCase,c=e.additional,o=e.assignToUser,i=e.conversationId,s=e.applicationConfig,a.prev=1,a.next=4,ss(dr.g);case 4:if(u=a.sent,l=Object(Ua.d)(u),p=bm()(t,(function(e){var t=Ef()(e)?e:e.message;return!d()(Xn()(t))})),d()(p)){a.next=16;break}return v=km(p),a.next=11,Ku();case 11:O=a.sent,f=Tu()(v.map((function(e,t){if(!e.isSentByUser)return e.message.text?Uf(e.message.text,i,"".concat(t),e.message.disableManualResponse):void 0;var n=Object(dm.a)({text:e.message.text,maskingConfigs:s.maskingConfigs}),r=n.maskedText,a=n.maskedValues;return O.makeTextMessage({text:r||"",conversationId:i,sender:l,maskingDetails:a,disableManualResponse:e.message.disableManualResponse})}))),b=!0,a.next=27;break;case 16:if(!d()(t)||!me()(t)){a.next=21;break}b=!0,f=[],a.next=27;break;case 21:return a.next=23,ss(dr.c);case 23:j=a.sent,h=Object(rc.m)(j,Nf.e),f=Object(rc.l)(h),b=Object(rc.y)(h);case 27:return a.next=29,es({type:Pe.L,payload:{conversationId:i,messages:f,conversationContext:n,hasInitialItems:b,createCase:r,assignToUser:o,additional:c}});case 29:a.next=35;break;case 31:throw a.prev=31,a.t0=a.catch(1),Object(Tt.b)(a.t0),a.t0;case 35:case"end":return a.stop()}}),hm,null,[[1,31]])}function _m(e,t){var n,r,c,o,i,s,u,l,b,d,p,v,O,j,h;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.payload.silent,r=t.promise,a.prev=1,a.next=4,ss((function(e){return e}));case 4:if(c=a.sent,o=on.a.getCustomizationConfig(e),i=function(e,t){return f()(e,t)},s=Object(rc.q)(Object(dr.c)(c)),!Re()(Object(rc.v)(s))){a.next=16;break}return a.next=11,es({type:Pe.C,payload:{}});case 11:return a.next=13,Ji(Pe.cb);case 13:return a.next=15,ss((function(e){return e}));case 15:c=a.sent;case 16:if(u=Object(cg.e)(c,o,i),!u.isLocked){a.next=23;break}if(n){a.next=22;break}return l=Object(rc.b)(s),a.next=22,as(l?Cm:Tm);case 22:throw Gt.a.LIMIT_REACHED;case 23:return b="".concat(Nf.e,"_").concat(lm()()),a.next=26,as(Sm,Object(he.a)(Object(he.a)({},t.payload),{},{conversationId:b,applicationConfig:e}));case 26:return a.next=28,as(ug);case 28:if(d=a.sent,!n){a.next=32;break}return a.next=32,es({type:Pe.M,payload:{conversationId:b,appContext:d},promise:r});case 32:if(n){a.next=40;break}return p=Object(_e.b)(),v=sg(p.location.pathname,p.location.hash),O=v.isConversationPath,j=!!O,h="/conversation/new/".concat(b),j?p.replace(h):p.push(h),a.next=40,as(Em);case 40:a.next=46;break;case 42:a.prev=42,a.t0=a.catch(1),r&&r.reject(Ff(a.t0)),Object(Tt.b)(a.t0);case 46:case"end":return a.stop()}}),gm,null,[[1,42]])}function Am(e){var t,n,r,c,o,i,s,u,l,b,p,O,j,h,g,m,x,y,I,w,k,E,C,T,S,_,A;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=e.promise,a.prev=1,a.next=4,ss(dr.c);case 4:if(o=a.sent,i=Object(rc.q)(o),r=t.conversationId,c=t.externalCaseId,r){a.next=37;break}if(Object(rc.b)(i)){a.next=16;break}return a.next=12,Ji(Pe.g);case 12:return a.next=14,ss(dr.c);case 14:o=a.sent,i=Object(rc.q)(o);case 16:if(!c){a.next=36;break}if((r=Object(rc.d)(Object(rc.w)(o),c))||!o.conversations.hasMore){a.next=34;break}return a.next=21,es(Object(Uu.b)({externalCaseId:c}));case 21:return a.next=23,ns([Ji(Im(c)),Ji(wm(c))]);case 23:if(s=a.sent,u=Object(en.a)(s,2),l=u[0],!(b=u[1])){a.next=29;break}throw b.payload.error;case 29:return r=f()(l,"payload.conversationResponse.id"),a.next=32,ss(dr.c);case 32:o=a.sent,i=Object(rc.q)(o);case 34:a.next=37;break;case 36:r=Object(rc.e)(Object(rc.w)(o));case 37:if(r){a.next=40;break}return n&&n.reject(Gt.a.NOT_FOUND),a.abrupt("return");case 40:if(p=Object(_e.b)(),O=sg(p.location.pathname,p.location.hash),j=O.isConversationPath,h=O.matchedConversationId,g=!!j,m="/conversation/".concat(r),x=r,y=[],h===r){a.next=78;break}if(!Object(v.C)(r)){a.next=60;break}if(I=Object(v.f)(r),w=Object(v.e)(I),k=Object(rc.j)(i,I),x=w,tv()(i.ids,k)){a.next=58;break}return a.next=54,as(ug);case 54:return E=a.sent,a.next=57,es(Object(Uu.a)(I,w,E));case 57:y=[Pe.t,Pe.u];case 58:a.next=64;break;case 60:if(tv()(i.ids,r)){a.next=64;break}return a.next=63,es(Object(Uu.b)({conversationId:r}));case 63:y=[Pe.w,Pe.x];case 64:if(d()(y)){a.next=78;break}return a.next=67,ns([Ji(y[0]),Ji(y[1])]);case 67:if(C=a.sent,T=Object(en.a)(C,2),S=T[0],_=T[1],A=f()(S,"payload.conversationResponse.id")||f()(_,"payload.conversationId"),x!==A){a.next=76;break}if(!_){a.next=75;break}throw _.payload.error;case 75:return a.abrupt("break",78);case 76:a.next=64;break;case 78:return g?p.replace(m):p.push(m),a.next=81,as(Em);case 81:n&&n.resolve(r),a.next=87;break;case 84:a.prev=84,a.t0=a.catch(1),n?n.reject(Ff(a.t0)):Object(Tt.b)(a.t0);case 87:return a.prev=87,a.next=90,Zi(Qi,{});case 90:return a.sent&&n&&n.reject(Gt.a.UNEXPECTED_ERROR),a.finish(87);case 93:case"end":return a.stop()}}),mm,null,[[1,84,87,93]])}function Nm(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ji(Js.a);case 3:return e=n.sent,t=e.payload.applicationConfig,n.next=7,su(pm.c,_m,t);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),xm,null,[[0,9]])}function Rm(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,uu(pm.a,Am);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),ym,null,[[0,5]])}var Pm,Lm=n(849),Mm=Object(H.a)({},Ju.c.PROGRESS_BAR,(),Dm=function(e){var t=e.messagePayload.attachment,n=t&&Mm[t.type];return n&&n(t)},Um=Object(a.a)().mark(Hm),Fm=Object(a.a)().mark(zm),Bm=Object(a.a)().mark(Wm),Gm=function(){function e(){Object(j.a)(this,e),this.queueItems=void 0,this.queueItems=[]}return Object(O.a)(e,[{key:"isEmpty",value:function(){return 0===this.queueItems.length}},{key:"put",value:function(e){var t=re()(this.queueItems,(function(t){return Pu.a.getId(e.message)===Pu.a.getId(t.message)}));-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}},{key:"take",value:function(){return this.queueItems.shift()}},{key:"flush",value:function(){return this.queueItems}}]),e}(),Vm="EXTERNAL_MESSAGE_SEND";function Hm(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.message,n=e.externalMessageId,a.next=4,as(zu,t);case 4:if(!(r=a.sent)){a.next=8;break}return a.next=8,es({type:Vm,payload:{id:n,message:r}});case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 13:case"end":return a.stop()}}),Um,null,[[0,10]])}function zm(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.next=4,Ji(e);case 4:if(t=n.sent,Dm(t.message)){n.next=8;break}return n.next=8,as(Hm,t);case 8:n.next=1;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 15:case"end":return n.stop()}}),Fm,null,[[0,12]])}function Wm(e,t){var n,r,c,o,i,s,u,l,f,b,d,p,v,O;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,Pm){a.next=7;break}return a.next=4,as(Ss,new Gm);case 4:return Pm=a.sent,a.next=7,os(zm,Pm);case 7:return a.next=9,ss(dr.c);case 9:return r=a.sent,c=Object(rc.e)(Object(rc.w)(r)),a.next=13,ss(dr.g);case 13:return o=a.sent,i=Object(Ua.d)(o),s=e.message.text,u=e.isSentByUser?Object(dm.a)({text:s,maskingConfigs:null===t||void 0===t?void 0:t.maskingConfigs}):{text:s},a.next=19,Ku();case 19:if(l=a.sent,f=l.makeDynamicMessage({externalMessageId:e.id,messageId:e.sprMsgId,messagePayload:Object(he.a)(Object(he.a)({},e.message),{},{text:null!==(n=u.maskedText)&&void 0!==n?n:u.text,maskingDetails:u.maskedValues}),conversationId:e.contextId||c,messageContext:e.messageContext,sender:e.isSentByUser?i:Nf.b})){a.next=23;break}return a.abrupt("return",void 0);case 23:if(b={externalMessageId:e.id,message:f},e.sprMsgId&&!Dm(f)){a.next=29;break}return a.next=27,cs(Hm,b);case 27:a.next=31;break;case 29:return a.next=31,es(Pm,b);case 31:return a.next=33,Ji(Vm);case 33:return d=a.sent,p=d.payload,v=p.id,O=p.message,a.abrupt("return",{id:v,message:O});case 40:return a.prev=40,a.t0=a.catch(0),Object(Tt.b)(a.t0),a.abrupt("return",void 0);case 44:case"end":return a.stop()}}),Bm,null,[[0,40]])}var qm=Object(a.a)().mark(Km);function Km(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.action,n=e.applicationConfig,a.prev=1,t.payload.type===ub.e){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,as(Wm,t.payload.payload,n);case 6:if(r=a.sent){a.next=10;break}return Object(Ie.a)({topic:ke,payload:{error:V.a.INCORRECT_PAYLOAD,request:t.payload}}),a.abrupt("return");case 10:return c=r.id,o=r.message,a.next=13,es(Object(Hf.m)({id:c,conversationId:null===o||void 0===o?void 0:o.conversationId,messageId:null===o||void 0===o?void 0:o.id}));case 13:Object(Ie.a)({topic:ke,payload:{data:{id:c,conversationId:null===o||void 0===o?void 0:o.conversationId,messageId:null===o||void 0===o?void 0:o.id},request:t.payload}}),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 19:case"end":return a.stop()}}),qm,null,[[1,16]])}var Ym=Object(a.a)().mark(Xm);function Xm(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.action,a.prev=1,t.payload.type===ub.d){a.next=4;break}return a.abrupt("return");case 4:return n=t.payload.payload,a.next=7,Ku();case 7:if(r=a.sent,c=r.makeDynamicMessage({externalMessageId:n.id,messagePayload:{events:vl()(n.event)},conversationId:n.contextId,sender:Nf.b})){a.next=11;break}return a.abrupt("return");case 11:return a.next=13,as(zu,c);case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 18:case"end":return a.stop()}}),Ym,null,[[1,15]])}var Qm,Zm=n(941),$m=n.n(Zm),Jm=n(850),ex=n.n(Jm),tx=/\$\{(\w+)\}/g,nx=function(e,t){var n=Object.keys(t);return ex()(e,tx,()},rx=function(e,t){var n=t.totalUnits,r=t.completedUnits,a=t.action,c=t.status,o=e["progress.".concat(a,".").concat(c,".title")];return nx(o,{completedUnits:r,totalUnits:n})},ax=function(e,t){var n=t.totalUnits,r=t.completedUnits,a=t.action,c=t.status,o=e["progress.".concat(a,".").concat(c,".description")];return nx(o,{completedUnits:r,totalUnits:n})},cx=Object(a.a)().mark(lx),ox=Object(a.a)().mark(fx),ix=function(){eturn Object(O.a)(e,[{key:"isEmpty",value:,{key:"put",value:function(e){var t=re()(this.queueItems,();-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}},{key:"take",value:,{key:"flush",value:]),e}(),sx=ux=$m()((function(){var e={};return{get:function(t){return e[t]},set:function(t,n){e[t]=n},remove:}));function lx(e){var t,n,r,c,o,i,s,u,l,f,b,d,p;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,a.next=4,Ji(e);case 4:return t=a.sent,n=t.action,r=t.localeData,c=n.payload,o=c.contextId,i=c.id,s=c.data,u=c.progressContext,l={type:Ju.c.PROGRESS_BAR,title:rx(r,s),description:ax(r,s),progress:s.progress,status:s.status,action:s.action,enableCancel:s.enableCancel,enableRetry:s.enableRetry},f={attachment:l,disableManualResponse:s.disableManualResponse},a.next=12,as(Wm,{contextId:o,id:i,sprMsgId:ux().get(sx(o,l.action)),message:f,messageContext:u});case 12:if(b=a.sent){a.next=16;break}return Object(Ie.a)({topic:ke,payload:{error:V.a.INCORRECT_PAYLOAD,request:n}}),a.abrupt("return");case 16:return d=b.id,p=b.message,a.next=19,es(Object(Hf.n)({id:d,conversationId:null===p||void 0===p?void 0:p.conversationId,messageId:null===p||void 0===p?void 0:p.id}));case 19:Object(Ie.a)({topic:ke,payload:{data:{id:i,conversationId:null===p||void 0===p?void 0:p.conversationId,messageId:null===p||void 0===p?void 0:p.id},request:n}}),(v=l).status!==Lm.a.COMPLETED&&(v.status!==Lm.a.ABORTED&&v.status!==Lm.a.ERROR||v.enableRetry)?ux().set(sx(o,l.action),null===p||void 0===p?void 0:p.id):ux().remove(sx(o,l.action)),a.next=26;break;case 23:a.prev=23,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 26:a.next=0;break;case 28:case"end":return a.stop()}var v}),cx,null,[[1,23]])}function fx(e){var t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.action,n=e.localeData,r.prev=1,t.payload.type===ub.g){r.next=4;break}return r.abrupt("return");case 4:if(Qm){r.next=10;break}return r.next=7,as(Ss,new ix);case 7:return Qm=r.sent,r.next=10,os(lx,Qm);case 10:return r.next=12,es(Qm,{action:t.payload,localeData:n});case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(1),Object(Tt.b)(r.t0);case 17:case"end":return r.stop()}}),ox,null,[[1,14]])}var bx=Object(a.a)().mark(vx),dx=Object(a.a)().mark(Ox),px=Object(a.a)().mark(jx);function vx(e,t,n){return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ts([as(Km,{action:n,applicationConfig:t}),as(Xm,{action:n}),as(fx,{action:n,localeData:e}),as(em,{action:n})]);case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 8:case"end":return r.stop()}}),bx,null,[[0,5]])}function Ox(e,t,n){return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!e){r.next=4;break}return r.next=4,su(e,vx,t,n);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 9:case"end":return r.stop()}}),dx,null,[[0,6]])}function jx(){var e,t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ji(Js.a);case 3:return e=a.sent,t=e.payload.applicationConfig,a.next=7,us(Pe.z);case 7:n=a.sent;case 8:return a.prev=9,a.next=12,Ji(q.c);case 12:if(c=a.sent,o=c.payload.data,!r){a.next=17;break}return a.next=17,is(r);case 17:return a.next=19,cs(Ox,n,o,t);case 19:r=a.sent,a.next=25;break;case 22:a.prev=22,a.t0=a.catch(9),Object(Tt.b)(a.t0);case 25:a.next=8;break;case 27:a.next=32;break;case 29:a.prev=29,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 32:case"end":return a.stop()}}),px,null,[[0,29],[9,22]])}var hx=Object(a.a)().mark(mx),gx=Object(a.a)().mark(xx);function mx(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(p.a)(),t.next=3,Object(un.h)(e.appId);case 3:case"end":return t.stop()}}),hx)}function xx(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su($.f,mx);case 2:case"end":return e.stop()}}),gx)}var yx=n(621),Ix=n(581),wx=Object(a.a)().mark(Ex),kx=Object(a.a)().mark(Cx);function Ex(e,t){var n,r,c,o,i,s,u,l,f;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.payload,r=t.promise,a.prev=1,d()(n)){a.next=17;break}a.t0=n.landingScreen,a.next=a.t0===vc.a.KNOWLEDGE_BASE_LIST?6:15;break;case 6:if(s=null!==(c=null===(o=e.cardConfigs)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.cards)&&void 0!==c?c:e.cards,u=Object(_e.b)(),l=null===s||void 0===s?void 0:s.find((),f=hc(u.location.pathname),l){a.next=13;break}return r.reject({error:Gt.a.NOT_FOUND}),a.abrupt("return");case 13:return f!==vc.a.KNOWLEDGE_BASE_LIST&&u.push(yx.b),a.abrupt("break",17);case 15:return r.reject({error:Gt.a.NOT_FOUND}),a.abrupt("return");case 17:if(!Object(v.Q)()){a.next=20;break}return a.next=20,es({type:$.d,payload:{}});case 20:r.resolve(void 0),a.next=27;break;case 23:a.prev=23,a.t1=a.catch(1),Object(Tt.b)(a.t1),r.reject({error:Gt.a.UNEXPECTED_ERROR});case 27:case"end":return a.stop()}}),wx,null,[[1,23]])}function Cx(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ji(Js.a);case 3:return e=n.sent,t=e.payload.applicationConfig,n.next=7,su($.l,Ex,t);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),kx,null,[[0,9]])}var Tx=Object(a.a)().mark(Sx);function Sx(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Nm),cs(Rm),cs(jx),cs(xx),cs(Cx)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Tx,null,[[0,5]])}var _x=Object(a.a)().mark(Mx),Ax=Object(a.a)().mark(Dx),Nx=Object(a.a)().mark(Ux),Rx=Object(a.a)().mark(Bx),Px=Object(a.a)().mark(Gx),Lx=function(e){var t=Object(rc.q)(Object(dr.c)(e));return{totalCount:Object(rc.x)(t),byExternalCaseIds:Object(rc.t)(t)}};function Mx(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ss(Lx);case 3:e=n.sent;case 4:return n.prev=5,n.next=8,ns({notificationReceived:Ji(Pe.R),notificationRead:Ji(Pe.Q),notificationsReceived:Ji(Pe.P)});case 8:return n.sent,n.next=11,ss(Lx);case 11:t=n.sent,e.totalCount!==t.totalCount&&(Object(Ie.a)({topic:ue.m,payload:{data:{count:t.totalCount,additional:Object(he.a)({},d()(t.byExternalCaseIds)?{}:{byExternalCaseIds:t.byExternalCaseIds})}}}),e=t),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),Object(Tt.b)(n.t0);case 18:n.next=4;break;case 20:n.next=25;break;case 22:n.prev=22,n.t1=n.catch(0),Object(Tt.b)(n.t1);case 25:case"end":return n.stop()}}),_x,null,[[0,22],[5,15]])}function Dx(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=Ie.a,t.t1=ue.g,t.t2=e.payload.type,t.t3=he.a,t.t4=Object(he.a)({},e.payload.payload),t.t5={},t.next=9,Object(un.a)(Fn.a.getAppId(Object(p.a)()));case 9:t.t6=t.sent,t.t7={userAuthToken:t.t6},t.t8=(0,t.t3)(t.t4,t.t5,t.t7),t.t9={type:t.t2,payload:t.t8},t.t10={data:t.t9},t.t11={topic:t.t1,payload:t.t10},(0,t.t0)(t.t11),t.next=21;break;case 18:t.prev=18,t.t12=t.catch(0),Object(Tt.b)(t.t12);case 21:case"end":return t.stop()}}),Ax,null,[[0,18]])}function Ux(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.A,Dx);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Nx,null,[[0,5]])}function Fx(e){try{Object(Ie.a)({topic:ue.f,payload:{data:e.payload.payload},callback:e.payload.callback})}catch(t){Object(Tt.b)(t)}}function Bx(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pe.y,Fx);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Rx,null,[[0,5]])}function Gx(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Mx),cs(Ux),cs(Bx)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Px,null,[[0,5]])}n(616),n(562);var Vx=n(241),Hx=n.n(Vx);function zx(e){return Wx.apply(this,arguments)}function Wx(){return(Wx=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.a.post("/livechat/upload/policy?fileName=".concat(encodeURIComponent(t)));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qx=new Nh.a;unction Yx(){return(Yx=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.bucket,c=t.domainName,e.next=3,qx.post("https://".concat(r,".").concat(null!==c&&void 0!==c?c:"s3.amazonaws.com","/"),n);case 3:return o=e.sent,e.abrupt("return",decodeURIComponent(o.headers.location));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xx(e){return Qx.apply(this,arguments)}function Qx(){return(Qx=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.a.post("/livechat/upload",{file:t,fileName:t.name},{multipart:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zx=Object(a.a)().mark(ry),$x=Object(a.a)().mark(ay),Jx=[{key:"Cache-Control",value:Hx()("max-age=".concat(31536e3,", no-transform, public"))},{key:"Content-Type",value:function(e){return e.type}}],ey=["key","acl","x-amz-credential","x-amz-algorithm","x-amz-date","policy","x-amz-signature","x-amz-security-token","x-amz-server-side-encryption"];function ty(e,t){var n=new FormData;return ey.forEach((),Jx.forEach((),n.append("file",t),n}unction ry(e,t){var r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!ny(e)){a.next=9;break}return a.next=4,Promise.all([n.e(5),n.e(16)]).then(n.bind(null,2078));case 4:return r=a.sent,c=r.uploadFileOnAzure,a.next=8,as(c,e,t);case 8:case 11:return a.abrupt("return",a.sent);case 9:return a.next=11,as(Kx,e,ty(e,t));case 14:return a.prev=14,a.t0=a.catch(0),a.abrupt("return",void 0);case 17:case"end":return a.stop()}}),Zx,null,[[0,14]])}function ay(e,t){var n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"SPR"!==t){r.next=6;break}return r.next=4,as(Xx,e);case 4:return r.t0=r.sent,r.abrupt("return",{token:r.t0});case 6:return r.next=8,as(zx,e.name);case 8:if(!(n=r.sent)){r.next=14;break}return r.next=12,as(ry,n,e);case 12:return r.t1=r.sent,r.abrupt("return",{url:r.t1});case 14:return r.abrupt("return",{});case 17:return r.prev=17,r.t2=r.catch(0),r.abrupt("return",{});case 20:case"end":return r.stop()}}),$x,null,[[0,17]])}var cy=n(733),oy=n(704),iy=Object(a.a)().mark(uy);function sy(e){return new Promise((function(t){if(e){var n=document.createElement("img");n.onload=function(e){var n=e.target;n&&t({height:n.naturalHeight,width:n.naturalWidth})},n.src=e}else t({})}))}function uy(e){var t,n,r,c,o,i,s,u,l,f,b,d,p,v,O,j;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.conversationId,n=e.chatUserId,r=e.file,c=e.inReplyToChatMessageId,o=e.uploadPolicy,i=e.isAttachmentMasked,a.prev=1,h=r.type,!tv()(oy.c,h)){a.next=31;break}return s=i?void 0:URL.createObjectURL(r),a.next=6,as(sy,s);case 6:return u=a.sent,l=u.height,f=u.width,a.next=11,Ku();case 11:return b=a.sent,a.next=14,as(Uu.p,b.makeImageAttachmentMessage({attachmentProperties:{height:l,width:f,url:s,title:r.name},conversationId:t,sender:n,inReplyToChatMessageId:c}));case 14:return d=a.sent,a.next=17,es(d);case 17:return a.next=19,as(ay,r,o);case 19:if(p=a.sent,v=p.token,O=p.url,!v&&!O){a.next=29;break}return j=Object(cy.f)({chatMessage:d.payload.chatMessage,token:v,url:O}),a.next=26,as(Wu,j);case 26:s&&URL.revokeObjectURL(s),a.next=31;break;case 29:return a.next=31,es({payload:{conversationId:t,transientId:d.payload.chatMessage.id},type:Pe.H});case 31:a.next=36;break;case 33:a.prev=33,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 36:case"end":return a.stop()}var h}),iy,null,[[1,33]])}var ly=Object(a.a)().mark(dy),fy=Object(a.a)().mark(py);function by(e){return new Promise((function(t){var n=document.createElement("video");n.onloadeddata=n.onseeked=function(e){var r=document.createElement("canvas");r.height=n.videoHeight,r.width=n.videoWidth;var a=r.getContext("2d");a&&(a.drawImage(n,0,0,r.width,r.height),(r.toBlob||r.msToBlob).bind(r)((function(e){var r=e?new File([e],"image.jpg",{type:"image/jpeg"}):null;t({previewImageFile:r,height:n.videoHeight,width:n.videoWidth})})))},n.src=e,n.load()}))}function dy(e,t){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,as(ay,e,t);case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0),n.abrupt("return",void 0);case 10:case"end":return n.stop()}}),ly,null,[[0,6]])}function py(e){var t,n,r,c,o,i,s,u,l,f,b,d,p,v,O,j,h,g,m,x,y,I,w;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.conversationId,n=e.chatUserId,r=e.file,c=e.inReplyToChatMessageId,o=e.uploadPolicy,i=e.isAttachmentMasked,a.prev=1,k=r.type,!tv()(oy.e,k)){a.next=39;break}return s=URL.createObjectURL(r),a.next=6,as(by,s);case 6:return u=a.sent,l=u.previewImageFile,f=u.height,b=u.width,d=URL.createObjectURL(l),a.next=13,Ku();case 13:return p=a.sent,a.next=16,as(Uu.p,p.makeVideoAttachmentMessage({attachmentProperties:{height:f,width:b,previewImageUrl:i?null:d,url:i?null:s,title:r.name},conversationId:t,sender:n,inReplyToChatMessageId:c}));case 16:return v=a.sent,a.next=19,es(v);case 19:return a.next=21,ts([as(ay,r,o),as(dy,l,o)]);case 21:if(O=a.sent,j=Object(en.a)(O,2),h=j[0],g=h.token,m=h.url,x=j[1],y=x.token,I=x.url,!g&&!m){a.next=37;break}return w=Object(cy.g)({chatMessage:Object(cy.f)({chatMessage:v.payload.chatMessage,token:g,url:m}),token:y,url:I}),a.next=33,as(Wu,w);case 33:URL.revokeObjectURL(s),URL.revokeObjectURL(d),a.next=39;break;case 37:return a.next=39,es({payload:{conversationId:t,transientId:v.payload.chatMessage.id},type:Pe.H});case 39:a.next=44;break;case 41:a.prev=41,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 44:case"end":return a.stop()}var k}),fy,null,[[1,41]])}var vy=n(1192),Oy=Object(a.a)().mark(hy),jy={"application/pdf":vy.a.PDF,"text/plain":vy.a.DOCUMENT,"application/msword":vy.a.WORD_DOCUMENT,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":vy.a.WORD_DOCUMENT,"application/vnd.ms-excel":vy.a.EXCEL,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":vy.a.EXCEL,"application/vnd.ms-powerpoint":vy.a.PRESENTATION,"application/vnd.openxmlformats-officedocument.presentationml.presentation":vy.a.PRESENTATION,"application/onenote":vy.a.ONENOTE,"application/json":vy.a.DOCUMENT};function hy(e){var t,n,r,c,o,i,s,u,l,f,b,d,p;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.conversationId,n=e.chatUserId,r=e.file,c=e.inReplyToChatMessageId,o=e.uploadPolicy,i=e.isAttachmentMasked,a.prev=1,v=r.type,!tv()(oy.b,v)){a.next=26;break}return s=i?null:URL.createObjectURL(r),a.next=6,Ku();case 6:return u=a.sent,a.next=9,as(Uu.p,u.makeDocumentAttachmentMessage({attachmentProperties:{url:s,title:r.name,documentType:jy[r.type]},conversationId:t,sender:n,inReplyToChatMessageId:c}));case 9:return l=a.sent,a.next=12,es(l);case 12:return a.next=14,as(ay,r,o);case 14:if(f=a.sent,b=f.token,d=f.url,!b&&!d){a.next=24;break}return p=Object(cy.f)({chatMessage:l.payload.chatMessage,token:b,url:d}),a.next=21,as(Wu,p);case 21:s&&URL.revokeObjectURL(s),a.next=26;break;case 24:return a.next=26,es({payload:{conversationId:t,transientId:l.payload.chatMessage.id},type:Pe.H});case 26:a.next=31;break;case 28:a.prev=28,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 31:case"end":return a.stop()}var v}),Oy,null,[[1,28]])}var gy=Object(a.a)().mark(my);function my(e){var t,n,r,c,o,i,s,u,l,f,b,d,p;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.conversationId,n=e.chatUserId,r=e.file,c=e.inReplyToChatMessageId,o=e.uploadPolicy,i=e.isAttachmentMasked,a.prev=1,v=r.type,!tv()(oy.a,v)){a.next=26;break}return s=i?null:URL.createObjectURL(r),a.next=6,Ku();case 6:return u=a.sent,a.next=9,as(Uu.p,u.makeAudioAttachmentMessage({attachmentProperties:{url:s,mimeType:r.type,title:r.name},conversationId:t,sender:n,inReplyToChatMessageId:c}));case 9:return l=a.sent,a.next=12,es(l);case 12:return a.next=14,as(ay,r,o);case 14:if(f=a.sent,b=f.token,d=f.url,!b&&!d){a.next=24;break}return p=Object(cy.f)({chatMessage:l.payload.chatMessage,token:b,url:d}),a.next=21,as(Wu,p);case 21:s&&URL.revokeObjectURL(s),a.next=26;break;case 24:return a.next=26,es({payload:{conversationId:t,transientId:l.payload.chatMessage.id},type:Pe.H});case 26:a.next=31;break;case 28:a.prev=28,a.t0=a.catch(1),Object(Tt.b)(a.t0);case 31:case"end":return a.stop()}var v}),gy,null,[[1,28]])}var xy=Object(a.a)().mark(Iy),yy=Object(a.a)().mark(wy);function Iy(e,t){var n,r,c,o,i,s,u,l;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=e.uploadPolicy,r=e.isAttachmentMasked,c=t.payload,o=c.conversationId,i=c.chatUserId,s=c.file,u=c.inReplyToChatMessageId,l={conversationId:o,chatUserId:i,file:s,inReplyToChatMessageId:u,uploadPolicy:n,isAttachmentMasked:r},a.next=6,ts([as(uy,l),as(py,l),as(my,l),as(hy,l)]);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 11:case"end":return a.stop()}}),xy,null,[[0,8]])}function wy(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ji(Js.a);case 3:return e=n.sent,t=e.payload.applicationConfig,n.next=7,su(pm.b,Iy,{uploadPolicy:t.uploadPolicy,isAttachmentMasked:!!t.maskAttachment});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 12:case"end":return n.stop()}}),yy,null,[[0,9]])}var ky,Ey=wy,Cy=n(932),Ty=Object(a.a)().mark(_y),Sy=Object(a.a)().mark(Ay);function _y(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,t=void 0,n.next=5,Ji(fu.b);case 5:return ky=Date.now(),n.next=8,Ji(fu.a);case 8:if(t=Date.now(),!(e||ky&&t-ky>=3e5)){n.next=14;break}return ky=void 0,n.next=14,es({type:fu.k,payload:{}});case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),Object(Tt.b)(n.t0);case 19:n.next=0;break;case 21:case"end":return n.stop()}}),Ty,null,[[1,16]])}function Ay(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=Object(Cy.a)(),t.next=4,ts([cs(_y,e)]);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 9:case"end":return t.stop()}}),Sy,null,[[0,6]])}var Ny=n(1171),Ry=Object(a.a)().mark(Dy),Py=Object(a.a)().mark(Uy),Ly=Object(a.a)().mark(Fy),My=Object(a.a)().mark(By);function Dy(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.prev=2,e.next=5,Ji($.g);case 5:if(e.sent,!Object(v.P)()){e.next=10;break}Object(Ie.a)({topic:ue.d}),e.next=12;break;case 10:return e.next=12,es(Object(wa.b)());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),Object(Tt.b)(e.t0);case 17:e.next=1;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(0),Object(Tt.b)(e.t1);case 24:case"end":return e.stop()}}),Ry,null,[[0,21],[2,14]])}function Uy(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:return t.prev=2,t.next=5,Ji($.k);case 5:e=t.sent,e.payload.isMediaOpen?Object(Ie.a)({topic:ue.i}):Object(Ie.a)({topic:ue.h}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),Object(Tt.b)(t.t0);case 13:t.next=1;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(0),Object(Tt.b)(t.t1);case 20:case"end":return t.stop()}}),Py,null,[[0,17],[2,10]])}function Fy(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ji(Js.a);case 3:e=n.sent,t=e.payload.applicationConfig,setTimeout((function(){var e=f()(t,"otherConfigs.theme.icons",{});Oo()(e,()}),1e4),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 11:case"end":return n.stop()}}),Ly,null,[[0,8]])}function By(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Dy),cs(Uy),cs(Fy)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),My,null,[[0,5]])}var Gy=Object(a.a)().mark(Ky),Vy=Object(a.a)().mark(Yy),Hy=Object(a.a)().mark(Xy),zy=Object(a.a)().mark(Qy),Wy=Object(a.a)().mark(Zy),qy=Object(a.a)().mark($y);function Ky(e){var t,n,r,c,o,i,s,u,l,f,b;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload||{},n=t.user,r=t.userContext,c=t.customUser,a.t0=Ua.c,a.next=5,ss(xa.h);case 5:if(a.t1=a.sent,o=(0,a.t0)(a.t1),i=jl.a.getId(o),s=Object(v.R)(r),!(!Tf()(c)&&Object(yn.b)(i)||Tf()(c)&&Object(yn.a)(n)&&!Object(yn.b)(i)||Object(yn.b)(i)&&Object(yn.e)(n,o))){a.next=21;break}return u=W()(Object(p.a)(),{userContext:{$merge:s},user:{$set:Object(he.a)(Object(he.a)({},Object(p.a)().user||{}),n||{})},customUser:{$set:c}}),Object(p.f)(u),a.next=14,as(Ol.e,Object(he.a)(Object(he.a)(Object(he.a)({},o),n),{},{customContext:s,customUser:c}));case 14:return l=a.sent,f=l.data,a.next=18,es(Object(nr.c)({action:gc.a.USER_PROFILE_UPDATED}));case 18:return a.next=20,es({type:q.h,payload:{users:[f]}});case 20:return a.abrupt("return");case 21:return b=W()(Object(p.a)(),{userContext:{$set:s},user:{$set:n},customUser:{$set:c}}),Object(p.f)(b),Object(pn.e)({shouldReboot:!0,shouldContinueSession:(!Tf()(c)||!Object(yn.a)(n))&&!Object(yn.b)(i)}),a.abrupt("return");case 27:a.prev=27,a.t2=a.catch(0),Object(Tt.b)(a.t2);case 30:case"end":return a.stop()}}),Gy,null,[[0,27]])}function Yy(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Q,Ky);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Vy,null,[[0,5]])}function Xy(e,t){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,es(Object(wa.i)(e,t));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 8:case"end":return n.stop()}}),Hy,null,[[0,5]])}function Qy(e,t,n){var r,c,o,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ss(dr.b);case 3:return r=t.sent,c=Object(br.e)(r),t.t0=Ua.c,t.next=8,ss(xa.h);case 8:return t.t1=t.sent,o=(0,t.t0)(t.t1).userId,i={},Oo()(c,(function(e,t){i=Object(he.a)(Object(he.a)({},i),{},Object(H.a)({},t,e.enabled))})),t.next=14,Object(un.o)(o,i);case 14:t.next=21;break;case 16:return t.prev=16,t.t2=t.catch(0),t.next=20,as(Xy,e,n);case 20:Object(Tt.b)(t.t2);case 21:case"end":return t.stop()}}),zy,null,[[0,16]])}function Zy(){var e,t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0;case 1:return a.next=4,Ji($.r);case 4:return e=a.sent,t=e.payload,n=t.userPreferenceKey,r=t.newValue,c=t.oldValue,a.next=8,as(Xy,n,r);case 8:return a.next=10,as(Qy,n,r,c);case 10:a.next=1;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 17:case"end":return a.stop()}}),Wy,null,[[0,14]])}function $y(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(Yy),cs(Zy)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),qy,null,[[0,5]])}var Jy=Object(a.a)().mark(tI),eI=Object(a.a)().mark(nI);function tI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",_s((function(e){var t=function(){e(Object(nr.g)(!0))},n=return window.addEventListener("online",t),window.addEventListener("offline",n),)));case 4:e.prev=4,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 7:case"end":return e.stop()}}),Jy,null,[[0,4]])}function nI(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,as(tI);case 3:e=n.sent;case 4:return n.next=7,Ji(e);case 7:return t=n.sent,n.next=10,es(t);case 10:n.next=4;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 17:return n.prev=17,e&&e.close(),n.finish(17);case 20:case"end":return n.stop()}}),eI,null,[[0,14,17,20]])}var rI=Object(a.a)().mark(cI);function aI(){return _s((function(e){var t=Object(p.b)();if(!t)return ce.a;var n=function(){var t=Object(In.d)();t||e({type:fu.b}),t&&e({type:fu.a})};return t.document.addEventListener("visibilitychange",n),))}function cI(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,as(aI);case 3:e=n.sent;case 4:return n.next=7,Ji(e);case 7:return t=n.sent,n.next=10,es(t);case 10:n.next=4;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 17:return n.prev=17,e&&e.close(),n.finish(17);case 20:case"end":return n.stop()}}),rI,null,[[0,14,17,20]])}var oI=Object(a.a)().mark(uI),iI=Object(a.a)().mark(lI),sI=Object(a.a)().mark(fI);function uI(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.ssoId,r=t.conversationId,c=t.messageId,a.next=4,xn({ssoId:n,conversationId:r,messageId:c});case 4:e.promise&&e.promise.resolve(),Object(pn.e)({shouldReboot:!0,shouldContinueSession:!0}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),e.promise&&e.promise.reject();case 11:case"end":return a.stop()}}),oI,null,[[0,8]])}function lI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.c,uI);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),iI,null,[[0,5]])}function fI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(lI)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),sI,null,[[0,5]])}var bI=Object(a.a)().mark(hI),dI=Object(a.a)().mark(gI),pI=Object(a.a)().mark(mI),vI=Object(a.a)().mark(xI),OI=Object(a.a)().mark(yI),jI=!0;function hI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.prev=2,e.next=5,Ji($.b);case 5:return e.next=7,es({type:$.c,payload:{}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(Tt.b)(e.t0);case 12:e.next=1;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),Object(Tt.b)(e.t1);case 19:case"end":return e.stop()}}),bI,null,[[0,16],[2,9]])}function gI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.prev=2,e.next=5,Ji($.d);case 5:return e.next=7,es({type:$.e,payload:{}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(Tt.b)(e.t0);case 12:e.next=1;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),Object(Tt.b)(e.t1);case 19:case"end":return e.stop()}}),dI,null,[[0,16],[2,9]])}function mI(e){var t,n,r,c,o;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,jI=!1,o=new Promise((),a.next=5,es(Object(nr.a)({ssoId:null===(t=e.otherConfigs)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.autoLoginSSOId})({resolve:r,reject:c}));case 5:return a.next=7,o;case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 12:return a.prev=12,a.next=15,cs(gI);case 15:return a.next=17,es({type:$.d,payload:{}});case 17:return a.finish(12);case 18:case"end":return a.stop()}}),pI,null,[[0,9,12,18]])}function xI(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ji(Js.a);case 3:if(e=n.sent,t=e.payload.applicationConfig,!Object(v.P)()){n.next=7;break}return n.abrupt("return");case 7:if(jI&&hn(t)){n.next=11;break}return n.next=10,cs(gI);case 10:return n.abrupt("return");case 11:return n.next=13,Ji($.d);case 13:return n.next=15,as(mI,t);case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 20:case"end":return n.stop()}}),vI,null,[[0,17]])}function yI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(xI),cs(hI)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),OI,null,[[0,5]])}ar wI=n(1193),kI=n(1194),EI=Object(a.a)().mark(TI),CI=Object(a.a)().mark(SI);function TI(e){var t,n,c,o,i,s,u;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.type,c=t.buttonId,o=t.promptId,a.next=7,ss(dr.d);case 7:if(i=a.sent,s=Nu()(i,(function(e){return e.id===o}))){a.next=11;break}return a.abrupt("return");case 11:if(n===kI.a.TRIGGERED){a.next=14;break}return a.next=14,es(II(o));case 14:if(u=Nu()(s.buttons,(function(e){return e.id===c})),n!==kI.a.ENGAGED||!u||u.type!==kI.b.URL||!u.value){a.next=19;break}window.open(Object(dn.c)(u.value)),a.next=22;break;case 19:if(n!==kI.a.ENGAGED||u&&u.type===kI.b.CLOSE){a.next=22;break}return a.next=22,es(Object(we.b)({initialMessages:Tu()([].concat(Object(r.a)(wo()(s.messages,(function(e){var t=e.text,n=e.disableManualResponse;return{message:{text:t,disableManualResponse:void 0!==n&&n}}}))),[u?{isSentByUser:!0,message:u.label}:void 0])),createCase:!!f()(s.additional,"createCase"),additional:Object(he.a)(Object(he.a)({},cv()(s.additional,["interceptId","creativeId"])),{},{interceptTargetId:c,clickedOnPrompt:!0})})());case 22:Object(Ie.a)({topic:ue.k,payload:{data:{type:n,id:o,button:u}}}),a.next=28;break;case 25:a.prev=25,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 28:case"end":return a.stop()}}),EI,null,[[0,25]])}function SI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(wI.a,TI);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),CI,null,[[0,5]])}var _I=n(1195),AI=Object(a.a)().mark(PI),NI="CANCEL_ACTION_TYPE",RI=function(e){var t=Object(a.a)().mark(o),n=Object(a.a)().mark(i),r=e.sessionManagedByClient,c=null;function o(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:return t.next=4,es(Object(nr.c)({label:gc.a.SESSION_ACTIVE.label,action:gc.a.SESSION_ACTIVE}));case 4:return t.next=6,ns({delay:ls(15e3),cancel:Ji(NI)});case 6:if(e=t.sent,!e.cancel){t.next=10;break}return t.abrupt("break",12);case 10:t.next=1;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])}function i(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c&&clearTimeout(c),e.next=4,es({type:NI,payload:{}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 9:case"end":return e.stop()}}),n,null,[[0,6]])}return{startHandler:r?o:function e(t){var n=t.sessionExpiryTimeInMinutes,r=t.sessionExpiryAlertTime;try{Object(_I.a)(),c=setTimeout((,function(e,t){var n=60*e*1e3-t,r=60*e*1e3/3;return n<=r?Math.max(n-2e3,0):r}(n,r))}catch(a){Object(Tt.b)(a)}},stopHandler:i}};function PI(e){var t,n,r,c,o,i,s,u,l,f,b,d,p,v,O,j;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.startEvents,n=e.stopEvents,a.prev=1,a.next=4,Ji(Js.a);case 4:if(i=a.sent,s=i.payload.applicationConfig,u=s.autoExpireUserSessionTimeInMinutes,l=null===(r=s.otherConfigs.settings)||void 0===r||null===(c=r.autoExpiryConfig)||void 0===c?void 0:c.alertTime,f=u&&l,b=null===(o=s.otherConfigs.settings)||void 0===o?void 0:o.sendSessionActiveEvent,f||b){a.next=12;break}return a.abrupt("return");case 12:return d=t.map((function(e){return Ji(e)})),p=n.map((function(e){return Ji(e)})),a.next=16,as(RI,{sessionManagedByClient:b});case 16:v=a.sent,O=v.startHandler,j=v.stopHandler,a.prev=19;case 20:return a.next=23,ns(d);case 23:return a.next=25,cs(O,{sessionExpiryTimeInMinutes:u,sessionExpiryAlertTime:l});case 25:return a.next=27,ns(p);case 27:return a.next=29,as(j);case 29:a.next=20;break;case 31:a.next=36;break;case 33:a.prev=33,a.t0=a.catch(19),Object(Tt.b)(a.t0);case 36:return a.prev=36,a.next=39,as(j);case 39:return a.finish(36);case 40:a.next=45;break;case 42:a.prev=42,a.t1=a.catch(1),Object(Tt.b)(a.t1);case 45:case"end":return a.stop()}}),AI,null,[[1,42],[19,33,36,40]])}var LI=Object(a.a)().mark(BI),MI=Object(a.a)().mark(GI),DI=Object(a.a)().mark(VI),UI=Object(a.a)().mark(HI),FI=Object(a.a)().mark(zI);function BI(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=Object(p.a)(),t=e.appId,n.next=4,as(Ma.a.remove,t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),LI,null,[[0,6]])}function GI(e){var t,n,r,c,o,i;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload.state,n=t.conversationId,r=t.messageId,c=t.agentId,o=Object(p.a)(),i=o.appId,a.next=5,as(Ma.a.set,i,{conversationId:n,messageId:r,agentId:c});case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 10:case"end":return a.stop()}}),MI,null,[[0,7]])}function VI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su([Pl.g,Pl.h],BI);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),DI,null,[[0,5]])}function HI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(Pl.j,GI);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),UI,null,[[0,5]])}function zI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(PI,{startEvents:[Pl.i,Pl.m,Pl.o,Pl.n,Pl.j,Pl.k,Pl.l],stopEvents:[Pl.h,Pl.p,Pl.g]}),cs(VI),cs(HI)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),FI,null,[[0,5]])}var WI=Object(a.a)().mark(qI);function qI(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(PI,{startEvents:[cj.g,cj.u,cj.v],stopEvents:[cj.e,cj.c,cj.n,cj.b]})]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),WI,null,[[0,5]])}var KI=n(642),YI=Object(a.a)().mark(ZI),XI=Object(a.a)().mark($I);function QI(e){return e.type===Et}function ZI(e){var t,n,r;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload.events,a.next=4,ss(dr.g);case 4:return n=a.sent,r=Object(Ua.c)(n),a.next=8,ts(t.filter(QI).map((function(e){return Object(yn.d)(r)||KI.d.emit({type:KI.a,payload:{shouldReboot:e.payload.shouldReboot}}),null})));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 13:case"end":return a.stop()}}),YI,null,[[0,10]])}function $I(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(fu.j,ZI);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),XI,null,[[0,5]])}n(19);var JI=n(963);function ew(e){var t=function(){Object(JI.a)().disconnect().then((function(){Object(k.a)("MQTT Client | Disconnected")})).catch((function(e){Object(Kn.f)(e)?console.warn(e):console.error("MQTT Client | Disconnection Error ".concat(e))}))};try{Object(JI.a)().connect().catch((function(e){Object(Kn.f)(e)?console.warn(e):console.error("MQTT Client | Connection Error ".concat(e))})),function(){var e=Object(JI.a)();e.on("error",(function(){Object(k.a)("MQTT Client | Error")})),e.on("offline",(function(){Object(k.a)("MQTT Client | Offline")})),e.on("reconnect",(function(){Object(k.a)("MQTT Client | Reconnect")})),e.on("close",()}(),Object(JI.a)().subscribe().catch((function(e){Object(Kn.f)(e)?console.warn(e):console.error("MQTT client | Subscribe Error ".concat(e))})),Object(JI.a)().on("message",(function(t,n){try{var r=JSON.parse(n.toString());e(r)}catch(a){Object(Tt.b)(a)}}))}catch(n){Object(Tt.b)(n),t()}return t}var tw=n(1160),nw=function(){return"A_".concat((e=Date.now(),"".concat(Math.floor(e/1e3).toString(16),"0000000000000000")));var e},rw=$m()((function(){var e=nw();return{set:get:function(){return e}}})),aw=!0;function cw(e,t){var n=rw();return new tw.a((function(){return function(e){return Object(Ru.__awaiter)(this,void 0,void 0,Object(a.a)().mark((function t(){var n,r,c,o,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||J.a,r=n.cursor,c=n.lastActiveDiff,o=n.active,t.next=3,$s.a.post("".concat(Pb,"/fetch-notifications").concat(r?"?cursor=".concat(r):""),{lastActiveDiff:c,active:o},{headers:{"x-chat-auto":!0},backoff:!0});case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t)})))}({cursor:n.get(),lastActiveDiff:t.getLastActiveTimeDifference()}).then((function(t){var r=t.results,a=t.afterCursor;e(null,r,{isFirstCall:aw}),aw=!1,n.set(a)})).catch((function(t){e(Object(Kn.c)(t)?t:null,[],{})}))}),Object(he.a)(Object(he.a)({},t||{}),{},{pollInterval:15e3}))}var ow,iw=n(2120),sw=Object(iw.a)(["payload","type"]),uw=Object(Bn.a)("conversationId"),lw=Object(Bn.a)("sender"),fw=Object(Bn.a)("payload"),bw=Object(Bn.a)("creationTime"),dw=Object(O.a)((function e(){Object(j.a)(this,e)}));dw.getMessageType=Object(Gn.a)(sw),dw.getConversationId=Object(Gn.a)(uw),dw.getSender=Object(Gn.a)(lw),dw.getCreationTime=Object(Gn.a)(bw),dw.getPayload=var pw=(ow={},Object(H.a)(ow,ut,(function(e){return{payload:{conversationId:dw.getConversationId(e),messageId:dw.getPayload(e).messageId},type:ut}})),Object(H.a)(ow,lt,(function(e){return{payload:{conversationId:dw.getConversationId(e),messageId:dw.getPayload(e).messageId},type:lt}})),Object(H.a)(ow,ft,(function(e){return{payload:Object(he.a)(Object(he.a)({},nn()(e.payload.externalEvent,["type","action","conversationId","payload"])),{},{actionType:dw.getPayload(e).externalEvent.action,externalParams:dw.getPayload(e).externalEvent.payload,contextId:dw.getConversationId(e)}),type:ft}})),Object(H.a)(ow,"UI_CONTROL",(function(e){return{type:dw.getPayload(e).event.action,payload:dw.getPayload(e).event.payload?JSON.parse(dw.getPayload(e).event.payload):{}}})),Object(H.a)(ow,bt,(function(e){return{payload:{conversationId:dw.getConversationId(e),chatUserId:dw.getPayload(e).chatUserId},type:bt}})),Object(H.a)(ow,dt,(function(e){return{payload:{conversationId:dw.getConversationId(e),sender:dw.getSender(e),actionTime:dw.getCreationTime(e)},type:dt}})),Object(H.a)(ow,pt,(function(e){return{payload:{conversationId:dw.getConversationId(e),sender:dw.getSender(e),actionTime:dw.getCreationTime(e)},type:pt}})),Object(H.a)(ow,jt,(function(e){return{payload:{conversationId:dw.getConversationId(e),sender:dw.getSender(e),closed:dw.getPayload(e).closed,deleted:dw.getPayload(e).deleted,caseNumber:dw.getPayload(e).caseNumber,caseId:dw.getPayload(e).caseId,expireAssetUntilLastMessageId:dw.getPayload(e).lastMessageId,requestClientId:null===e||void 0===e?void 0:e.requestClientId},type:jt}})),Object(H.a)(ow,ht,(function(e){var t=dw.getPayload(e).audioOnly;return{payload:{videoConversationId:dw.getPayload(e).videoConversationId,conversationId:dw.getConversationId(e),participantInfos:dw.getPayload(e).participantInfos,type:t?Ia.c.AUDIO:Ia.c.VIDEO},type:ht}})),Object(H.a)(ow,gt,(function(e){return{payload:{conversationId:dw.getConversationId(e),videoConversationId:dw.getPayload(e).videoConversationId},type:gt}})),Object(H.a)(ow,mt,(function(e){return{payload:{conversationId:dw.getConversationId(e),videoCallEnabled:dw.getPayload(e).videoEnabled,audioCallEnabled:dw.getPayload(e).audioEnabled},type:mt}})),Object(H.a)(ow,Ct,(function(e){return{payload:{conversationId:dw.getConversationId(e),permissions:dw.getPayload(e).permissions,callMode:dw.getPayload(e).callMode,videoConversationId:dw.getPayload(e).videoConversationId},type:Ct}})),Object(H.a)(ow,xt,(function(e){return{payload:{conversationId:dw.getConversationId(e),videoConversationId:dw.getPayload(e).conversation.id,conversation:dw.getPayload(e).conversation,participant:dw.getPayload(e).participant},type:xt}})),Object(H.a)(ow,yt,(function(e){return{payload:{conversationId:dw.getConversationId(e),videoConversationId:dw.getPayload(e).videoConversationId},type:yt}})),Object(H.a)(ow,It,(function(e){return{payload:{conversationId:dw.getConversationId(e),videoConversationId:dw.getPayload(e).videoConversationId},type:It}})),Object(H.a)(ow,wt,(function(e){return{payload:{status:dw.getPayload(e).status},type:wt}})),Object(H.a)(ow,kt,(function(e){var t=dw.getPayload(e).action;return{payload:{params:t.params,conversationId:dw.getConversationId(e),type:t.actionType},type:kt}})),Object(H.a)(ow,Et,(function(e){return{payload:{shouldReboot:dw.getPayload(e).shouldReboot},type:Et}})),ow);function vw(e){try{var t=dw.getMessageType(e),n=pw[t];if(n)return n(e)}catch(r){Object(Tt.b)(r)}}var Ow=function(){var e=new Set;return{add:function(t){return e.add(t)},clear:function(){return e.clear()},has:function(t){return e.has(t)}}}(),jw=Object(a.a)().mark(Dw),hw=Object(a.a)().mark(Uw),gw=Object(a.a)().mark(Fw),mw=Object(a.a)().mark(Bw),xw=Object(a.a)().mark(Gw),yw=Object(a.a)().mark(Vw),Iw=Object(a.a)().mark(Hw),ww=Object(a.a)().mark(zw),kw=Object(a.a)().mark(Ww),Ew=Object(a.a)().mark(qw),Cw=Object(a.a)().mark(Kw),Tw=Object(a.a)().mark(Yw),Sw=function(){var e=0,t=!0;return{getLastActiveTimeDifference:function(){return t||Object(In.d)()?0:Date.now()-e},setAppActive:function(n){t=n,n||(e=Date.now())}}}(),_w=function(e,t){return function(e,t){var n;ry{(n=cw(e,t)).start()}catch(a){r()}return r}((function(t,n,r){var a=r.isFirstCall;if(e(Object(nr.g)(!t)),!t){var c=n.filter(().map(vw).filter(().filter((function(e){return!a||!e)}));e(c),Ow.clear()}}),Object(he.a)(Object(he.a)({},t),{},{getLastActiveTimeDifference:Sw.getLastActiveTimeDifference}))};function Aw(){return _s((function(e){var t=function(e){return ew((function(t){var n=vw(t);n&&(Ow.add(t.id),e(n))}))}(e);return function(){t()}}))}function Nw(){return _s((function(e){var t=_w(e);return function(){t()}}))}function Rw(){return _s((function(e){var t,n=_w(e,{enableBackOff:!0});return t=window.setTimeout((function(){n()}),432e5),))}var Pw=Lw=Mw=function(e,t,n){var r=f()(e.payload,"contextId")||f()(e.payload,"conversationId");return!!t&&(!r||!n||n.startsWith(Nf.e)||r===n)};function Dw(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ts(e.filter(Pw).map((function(e){return es(e)})));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 8:case"end":return t.stop()}}),jw,null,[[0,5]])}function Uw(e){var t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.filter(Lw),!Object(v.E)()){a.next=9;break}return a.next=5,ss(cg.c);case 5:n=a.sent,r=n.isConversationPath,c=n.conversationId,t=t.filter(();case 9:if(d()(t)){a.next=14;break}return a.next=12,es({type:fu.j,payload:{events:t}});case 12:return a.next=14,es(Object(nr.e)());case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),Object(Tt.b)(a.t0);case 19:case"end":return a.stop()}}),hw,null,[[0,16]])}function Fw(e){var t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=vl()(e),n.next=4,ts([as(Dw,t),as(Uw,t)]);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 9:case"end":return n.stop()}}),gw,null,[[0,6]])}function Bw(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.prev=1,n.next=4,as(Rw);case 4:return e=n.sent,n.next=7,su(e,Fw);case 7:return t=n.sent,n.next=10,Ji(fu.a);case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(1);case 14:if(n.prev=14,e&&e.close(),!t||t.isCancelled()){n.next=19;break}return n.next=19,is(t);case 19:return n.finish(14);case 20:n.next=25;break;case 22:n.prev=22,n.t1=n.catch(0),Object(Tt.b)(n.t1);case 25:case"end":return n.stop()}}),mw,null,[[0,22],[1,12,14,20]])}function Gw(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.next=4,Ji(fu.b);case 4:return n.next=6,ns([Ji(fu.a),ls(18e5)]);case 6:if(e=n.sent,t=Object(en.a)(e,2),t[0],!t[1]){n.next=12;break}return n.abrupt("break",14);case 12:n.next=1;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 19:case"end":return n.stop()}}),xw,null,[[0,16]])}function Vw(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.prev=1,n.next=4,as(Nw);case 4:return e=n.sent,n.next=7,su(e,Fw);case 7:return t=n.sent,n.next=10,as(Gw);case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(1);case 14:if(n.prev=14,e&&e.close(),!t||t.isCancelled()){n.next=19;break}return n.next=19,is(t);case 19:return n.finish(14);case 20:n.next=25;break;case 22:n.prev=22,n.t1=n.catch(0),Object(Tt.b)(n.t1);case 25:case"end":return n.stop()}}),yw,null,[[0,22],[1,12,14,20]])}function Hw(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.next=4,Ji(fu.b);case 4:return n.next=6,ns([Ji(fu.a),ls(108e5)]);case 6:if(e=n.sent,t=Object(en.a)(e,2),t[0],!t[1]){n.next=12;break}return n.abrupt("break",14);case 12:n.next=1;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),Object(Tt.b)(n.t0);case 19:case"end":return n.stop()}}),Iw,null,[[0,16]])}function zw(){var e,t;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.prev=2,n.next=5,ns([Ji(fu.h),Ji(fu.a)]);case 5:return n.next=7,as(Aw);case 7:return e=n.sent,n.next=10,su(e,Fw);case 10:return t=n.sent,n.next=13,as(Hw);case 13:n.next=17;break;case 15:n.prev=15,n.t0=n.catch(2);case 17:if(n.prev=17,e&&e.close(),!t||t.isCancelled()){n.next=22;break}return n.next=22,is(t);case 22:return n.finish(17);case 23:n.next=1;break;case 25:n.next=30;break;case 27:n.prev=27,n.t1=n.catch(0),Object(Tt.b)(n.t1);case 30:case"end":return n.stop()}}),ww,null,[[0,27],[2,15,17,23]])}function Ww(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ns([Ji(fu.g),Ji(fu.a)]);case 3:return e.next=6,as(Vw);case 6:return e.next=8,as(Bw);case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 15:case"end":return e.stop()}}),kw,null,[[0,12]])}function qw(){var e,t,n;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0;case 1:return r.next=4,ns([Ji(fu.a),Ji(fu.b)]);case 4:e=r.sent,t=Object(en.a)(e,2),n=t[0],t[1],Sw.setAppActive(!!n),r.next=1;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),Object(Tt.b)(r.t0);case 16:case"end":return r.stop()}}),Ew,null,[[0,13]])}function Kw(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji(Js.c);case 3:Ow.clear(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 9:case"end":return e.stop()}}),Cw,null,[[0,6]])}function Yw(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(zw),cs(Ww),cs(qw),cs(Kw)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),Tw,null,[[0,5]])}var Xw=n(58),Qw=n.n(Xw),Zw=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var r,c,o,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.applicationConfig,c=t.preloadedState,e.prev=1,w.a.reset(),U(R),e.next=6,Ln(Object(p.a)());case 6:o=e.sent,kn({handshakeDetails:o}),Qn(o.chatUser),r.hasPrompts&&n.e(52).then(n.bind(null,2091)).then((function(e){(0,e.default)(r,o)})),pk(null,{applicationConfig:r,handshakeDetails:o,chatSettings:Object(p.a)(),subscribeToEvent:Dn,preloadedState:c}),e.next=22;break;case 13:if(e.prev=13,e.t0=e.catch(1),i=Fn.a.getUserSettings(Object(p.a)()),!(Object(Kn.e)(e.t0)&&i&&qn.getOneTimeToken(i))){e.next=20;break}pk(e.t0,{applicationConfig:r,handshakeDetails:o,chatSettings:Object(p.a)(),subscribeToEvent:Dn,preloadedState:c}),e.next=22;break;case 20:return e.next=22,Un();case 22:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),$w=Zw,Jw=Object(a.a)().mark(ak),ek=Object(a.a)().mark(ck),tk=Object(a.a)().mark(ok),nk=Object(a.a)().mark(ik),rk=Object(a.a)().mark(sk);function ak(){var e,t,n,r,c;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ji(Js.a);case 3:e=a.sent,t=e.payload.applicationConfig;case 5:return a.prev=6,a.next=9,Ji(Js.b);case 9:if(n=a.sent,r=n.payload.shouldContinueSession,c=void 0,!r){a.next=16;break}return a.next=15,ss(Qw.a);case 15:c=a.sent;case 16:return a.next=18,$w({applicationConfig:t,preloadedState:c});case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(6),Object(Tt.b)(a.t0);case 23:a.next=5;break;case 25:a.next=30;break;case 27:a.prev=27,a.t1=a.catch(0),Object(Tt.b)(a.t1);case 30:case"end":return a.stop()}}),Jw,null,[[0,27],[6,20]])}function ck(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(zg),cs(SI),cs(Sx),cs(Gx),cs(Ey),cs(nI),cs(cI),cs(Ay),cs($y),cs(sm),cs(zI),cs(qI),cs($I),cs(Yw)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),ek,null,[[0,5]])}function ok(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ji(Js.c);case 3:U(M),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 9:case"end":return e.stop()}}),tk,null,[[0,6]])}function ik(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(By),cs(ak),cs(yI),cs(fI),cs(ok)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(Tt.b)(e.t0);case 8:case"end":return e.stop()}}),nk,null,[[0,5]])}function sk(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,cs(ik);case 3:return t.next=5,cs(ck);case 5:return e=t.sent,t.next=8,Ji(Js.c);case 8:return t.next=10,is(e);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),Object(Tt.b)(t.t0);case 15:case"end":return t.stop()}}),rk,null,[[0,12]])}var uk=Object(a.a)().mark(lk);function lk(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ts([cs(ag),cs(sk)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),uk,null,[[0,5]])}var fk=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(new eu).setReducer(dr.a).setSaga(lk).setPreloadedState(r).setHTTPClient(Je.a).setApplicationConfig(e).setHandshakeDetails(t).setChatSettings(n).build()};function bk(e){var t=e.applicationConfig,n=e.store,r=e.history,a=Object(p.b)().document,c=Object(v.P)()?v.b:v.c;tr.a.render(Object(rr.jsx)(Ho,{applicationConfig:t,history:r,store:n}),c(a,"spr-live-chat-app"))}function dk(e,t){var n=t.applicationConfig,r=t.handshakeDetails,a=t.chatSettings,c=t.subscribeToEvent,o=fk(n,r,a),i=Object(_e.b)({isUnauthorized:!!e});Object(JI.b)(r,n);c((function(t){e||o.dispatch(t)})),bk({applicationConfig:n,store:o,history:i})}function pk(e,t){var n=t.applicationConfig,r=t.handshakeDetails,a=t.chatSettings,c=t.subscribeToEvent,o=t.preloadedState,i=fk(n,r,a,o),s=Object(_e.b)({isUnauthorized:!!e,reset:!o});Object(JI.b)(r,n);c((),bk({applicationConfig:n,store:i,history:s}),o?s.goBack():s.go(s.entries.length-1)}function vk(){return(vk=Object(c.a)(Object(a.a)().mark((function e(){var t,r,c,o,i,s,u,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(p.a)(),e.prev=1,!d()(t)){e.next=4;break}throw new Error;case 4:return e.next=6,Tn(t);case 6:return kn({getSessionToken:function(){return Object(un.a)(t.appId)}}),e.next=9,Mn(t);case 9:if(o=e.sent,i=Object(en.a)(o,2),s=i[0],u=i[1],"rejected"!==s.status){e.next=15;break}throw new Error;case 15:if(r=s.value,"rejected"!==u.status){e.next=18;break}throw u.reason;case 18:c=u.value,Zn(c,r),Cn(r),kn({applicationConfig:r,handshakeDetails:c}),r.hasPrompts&&n.e(52).then(n.bind(null,2091)).then((),dk(null,{applicationConfig:r,handshakeDetails:c,chatSettings:t,subscribeToEvent:Dn}),e.next=35;break;case 26:if(e.prev=26,e.t0=e.catch(1),l=Fn.a.getUserSettings(t),!(Object(Kn.e)(e.t0)&&l&&qn.getOneTimeToken(l))){e.next=33;break}dk(e.t0,{applicationConfig:r,handshakeDetails:c,chatSettings:t,subscribeToEvent:Dn}),e.next=35;break;case 33:return e.next=35,Un();case 35:case"end":return e.stop()}}),e,null,[[1,26]])})))).apply(this,arguments)}var Ok=function(){if(function(){function e(e){return t.apply(this,arguments)}function t(){return t=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=o[c];$t.apply(void 0,[g.getQueue(),t].concat(r));case 2:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}var n=Object(p.e)();e.q=n?n.q:[],e.loaded=!0,Object(p.b)().sprChat=e}(),Object(v.P)()){var e=Object(v.z)();Jr.preload(e)}var t=Object(p.e)();g.addCmdToQueue.apply(g,[g.getQueue()].concat(Object(r.a)(t.q))),);var n=Object(p.a)(),o=n.meetingId,s=n.user,l=n.otp,b=f()(s,"oneTimeToken");d()(o)&&d()(b)&&d()(l)||t("open");var O,j=Object(p.a)().autoTrigger;O=!0===j?0:i()(j)?1e3*Math.max(j,0):null,u()(O)||setTimeout((function(){t("openNewConversation")}),O)}},371:function(e,t,n){"use strict";var r=n(357),a=n(684);t.a=function(){return Object(r.useContext)(a.a)}},372:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.a})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));var r=n(910),a=n(369),c=n(384),o=n(357),i=n(840),s=n(358),u=["url","onLoad","onError","className"],l=function(e){var t=e.url,n=e.onLoad,r=e.onError,l=e.className,f=Object(c.a)(e,u),b=Object(o.useRef)(null);return Object(o.useEffect)((function(){b.current&&Object(i.a)({svgContainer:b.current,url:t,onSvgLoad:n,onSvgError:r,className:l})}),[t,r,n,l]),Object(s.jsx)("div",Object(a.a)({ref:b,key:t,id:t},f))},f={OPEN_LINK:"openLink",AUDIO:"audio",ATTACHMENT:"attachment",BOT_USER:"botUser",CAMERA:"camera",CHAT_USER:"chatUser",CHEVRON:"chevron",CLOSE:"close",CLOSE_CIRCLE:"closeCircle",CLOSE_CONVERSATION:"closeConversation",DELETE:"delete",DOCUMENT:"document",UNKNOWN_DOC:"unknownDoc",DOWNLOAD:"download",EMOJI:"emoji",ERROR:"error",EXCEL:"excel",IMAGE_PLACEHOLDER:"imagePlaceholder",INTERNET_DISCONNECTED:"internetDisconnected",MORE:"more",PDF:"pdf",PLAY:"play",PAUSE:"pause",PRESENTATION:"presentation",SEND:"send",SOUND_OFF:"soundOff",SOUND_ON:"soundOn",VIDEO:"video",VIDEO_ON:"videoOn",VIDEO_OFF:"videoOff",AUDIO_ON:"audioOn",AUDIO_OFF:"audioOff",END_CALL:"endCall",FULL_SCREEN:"fullScreen",EXIT_FULL_SCREEN:"exitFullScreen",ONENOTE:"onenote",LINE_LIST:"lineList",TEXT:"text",TIMER:"timer",LANGUAGE:"language",MINIMIZE:"minimize",MAXIMIZE:"maximize",SNACKBAR_SUCCESS:"snackbarSuccess",SNACKBAR_FAILURE:"snackbarFailure",TEXT_TO_SPEECH:"textToSpeech"}},374:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(357),a=n(619);function c(){return Object(r.useContext)(a.c).otherConfigs}},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(357),a=n(560),c=n(365);function o(e){var t=Object(c.c)();return Object(r.useMemo)((,[e,t])}},387:function(e,t,n){"use strict";var r=n(360);t.a=Object(r.g)({goBack:{id:"goBack",defaultMessage:"Go back"},liveChatBox:{id:"liveChatBox",defaultMessage:"Live chat box"},liveChatNotification:{id:"liveChatNotification",defaultMessage:"Live chat notification"},closeChat:{id:"closeChat",defaultMessage:"Close chat"},liveChat:{id:"liveChat",defaultMessage:"Live chat"},conversationClosed:{id:"conversationClosed",defaultMessage:"Conversation closed"},submit:{id:"submit",defaultMessage:"Submit"},textArea:{id:"textArea",defaultMessage:"Send your message here"},attachment:{id:"attachment",defaultMessage:"Attachment"},moreActions:{id:"moreActions",defaultMessage:"More actions"},sendingMessage:{id:"sendingMessage",defaultMessage:"Sending message"},sentMessage:{id:"sentMessage",defaultMessage:"Sent message"},receivedMessage:{id:"receivedMessage",defaultMessage:"Received message"},unreadMessages:{id:"unreadMessages",defaultMessage:"{count} Unread messages"},unreadMessage:{id:"unreadMessage",defaultMessage:"{count} Unread message"},newNotifications:{id:"newNotifications",defaultMessage:"New notifications"},newNotification:{id:"newNotification",defaultMessage:"New notification"},agentImage:{id:"agentImage",defaultMessage:"Agent Image"},brandImage:{id:"brandImage",defaultMessage:"Brand Image"},homeScreen:{id:"homeScreen",defaultMessage:"Live chat home screen"},newConversationCard:{id:"newConversationCard",defaultMessage:"New conversation"},existingConversationCard:{id:"existingConversationCard",defaultMessage:"Existing conversations"},conversationScreen:{id:"conversationScreen",defaultMessage:"Conversation Screen"},conversationListScreen:{id:"conversationListScreen",defaultMessage:"Conversation List Screen"},persistentMenu:{id:"persistentMenu",defaultMessage:"Menu"},brandLogo:{id:"brandLogo",defaultMessage:"Logo of {name}"},messageDeleteDescription:{id:"messageDeleteDescription",defaultMessage:"This message was deleted"},confirmationDialog:{id:"confirmationDialog",defaultMessage:"Confirmation dialog"},close:{id:"close",defaultMessage:"Close"},openChat:{id:"openChat",defaultMessage:"Open chat"}})},394:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(357),a=n(619);function c(){return Object(r.useContext)(a.c)}},395:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"i",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return v}));var r=n(833),a=n.n(r),c=n(439),o=n(508);function i(e){return{type:e?c.b:c.d,payload:{}}}function s(){return{type:c.j,payload:{}}}var u=a()(i,!0);a()(i,!1);function l(){return{type:c.g,payload:{}}}function f(e){return{type:c.k,payload:e}}unction d(e,t){return{type:c.s,payload:{userPreferenceKey:e,value:t}}}var p=function(e){return{type:o.c,payload:e}},v=,401:function(e,t,n){"use strict";var r=n(357),a=n(412),c=n.n(a),o=n(21),i=n.n(o),s=n(202),u=n.n(s),l=n(371),f=n(599);t.a=function(){var e=Object(l.a)(),t=e.locale,n=e.language;return Object(r.useCallback)((function(e,r){var a=u()(e,"langVsTranslatedFieldValues");if(!i()(a))return u()(e,r);var o=u()(a,t)||u()(a,n);return o||(o=c()(a,(function(e,t){return Object(f.b)(t)===n}))),u()(o,r)||u()(e,r)}),[t,n])}},402:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(368),a=n(367),c=n(2123),o=n(2021),i=Object(c.a)("field"),s=Object(c.a)("values"),u=Object(c.a)("filterType"),l=Object(c.a)("filters"),f=Object(c.a)("details"),b=Object(c.a)("id"),d=Object(r.a)((function e(){Object(a.a)(this,e)}));d.getField=Object(o.a)(i),d.getValues=Object(o.a)(s),d.getFilterType=Object(o.a)(u),d.getFilters=Object(o.a)(l),d.getDetails=Object(o.a)(f),d.getId=Object(o.a)(b)},405:408:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(12),n(83),n(127);var r=n(357),a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.useCallback)((function(e){t.forEach(()}),[].concat(t))}},413:function(e,t,n){"use strict";var r=n(357),a=n(1453);t.a=function(){return Object(r.useContext)(a.a)}},426:function(e,t,n){"use strict";.d(t,"a",(function(){return o}));var a=n(171);427:435:440:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(368),a=n(367),c=n(2123),o=n(2105),i=n(2021),s=Object(c.a)("conversationScreen"),u=Object(c.a)("callScreen"),l=Object(c.a)("videoCall"),f=Object(c.a)("audioCall"),b=Object(c.a)("settings"),d=Object(c.a)("trigger"),p=Object(c.a)("proactivePrompt"),v=Object(c.a)("minimizeChatBoxOnCloseInPhone"),O=Object(c.a)("header"),j=Object(c.a)("label"),h=Object(c.a)("openInFullScreen"),g=Object(c.a)("label"),m=Object(c.a)("defaultHidden"),x=Object(c.a)("initiallyHidden"),y=Object(c.a)("hideWhenOpen"),I=Object(c.a)("canManuallyRemove"),w=Object(c.a)("invisibilityCriteria"),k=Object(c.a)("animation"),E=Object(c.a)("contactDetailsMessage"),C=Object(c.a)("maximumOpenConversations"),T=Object(c.a)("autoLoginSSOId"),S=Object(c.a)("hour12"),_=Object(c.a)("disableDebugMode"),A=Object(c.a)("externalLocaleData"),N=Object(c.a)("homeScreen"),R=Object(c.a)("conversationCard"),P=Object(c.a)("hideWavingHandIcon"),L=Object(c.a)("shouldShow"),M=Object(c.a)("agents"),D=Object(c.a)("button"),U=Object(c.a)("enableIndividualMessageDismissal"),F=Object(c.a)("infoCard"),B=Object(c.a)("existingConversationCard"),G=Object(c.a)("showHeader"),V=Object(r.a)((function e(){Object(a.a)(this,e)}));V.getDefaultMessages=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.lastMessage},V.getWaitTimeConfig=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.waitTimeConfig},V.getSurveyActionsToShowByVariant=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.surveyScreen)||void 0===t?void 0:t.actionsToShowByVariant},V.getActionsToShowByVariant=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.actionsToShowByVariant},V.getConversationActionOnPageCloseByScope=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.actionOnPageCloseByScope},V.shouldShowAgentInitial=function(e){var t;return null===(t=e.allScreens)||void 0===t?void 0:t.showAgentInitial},V.shouldShowSenderNameInConversationScreen=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.showSenderName},V.getFooterActionsToShow=function(e){var t,n;return null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.actionsToShow},V.getActionOnPageCloseByScope=function(e){var t;return null===(t=e.allScreens)||void 0===t?void 0:t.actionOnPageCloseByScope},V.getAnalyticsSettings=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.settings)||void 0===t?void 0:t.analyticsSettings},V.hour12Enabled=Object(o.a)(Object(i.a)(S),Object(i.a)(b)),V.conversationTagsEnabled=function(e){var t;return null===(t=e.allScreens)||void 0===t?void 0:t.conversationTagsEnabled},V.showCaseNumberEnabled=V.isSprinklrAnalyticsEnabled=function(e){var t,n,r;return null===(r=null===(n=null===(t=e.settings)||void 0===t?void 0:t.analyticsSettings)||void 0===n?void 0:n.sprinklrAnalytics)||void 0===r?void 0:r.enabled},V.getGoogleTrackerId=V.getMaximumOpenConversations=Object(o.a)(Object(i.a)(C),Object(i.a)(b)),V.getDisableManualNewConversation=V.getUserPreferences=Object(i.a)(b),V.getContactDetailsMessage=Object(o.a)(Object(i.a)(E),Object(i.a)(s)),V.getTriggerConfig=Object(i.a)(d),V.getInvisibilityCriteriaOfTrigger=Object(o.a)(Object(i.a)(w),V.getTriggerConfig),V.getAnimationInfoOfTrigger=Object(o.a)(Object(i.a)(k),V.getTriggerConfig),V.getTriggerLabel=Object(o.a)(Object(i.a)(g),V.getTriggerConfig),V.isChatTriggerHidden=Object(o.a)(Object(i.a)(m),Object(i.a)(d)),V.isChatTriggerInitiallyHidden=Object(o.a)(Object(i.a)(x),Object(i.a)(d)),V.isTriggerHiddenWhenMaximised=Object(o.a)(Object(i.a)(y),Object(i.a)(d)),V.canTriggerBeManuallyRemoved=Object(o.a)(Object(i.a)(I),Object(i.a)(d)),V.getAutoLoginSSOId=Object(o.a)(Object(i.a)(T),Object(i.a)(b)),V.isDebugModeDisabled=Object(o.a)(Object(i.a)(_),Object(i.a)(b)),V.getExternalLocaleData=Object(o.a)(Object(i.a)(A),Object(i.a)(b)),V.shouldHideWavingHandIcon=Object(o.a)(Object(i.a)(P),Object(i.a)(R),Object(i.a)(N)),V.shouldShowAgents=Object(o.a)(Object(i.a)(L),Object(i.a)(M),Object(i.a)(R),Object(i.a)(N)),V.getAgents=Object(o.a)(Object(i.a)(M),Object(i.a)(R),Object(i.a)(N)),V.shouldShowHeaderInExistingConversationCard=Object(o.a)(Object(i.a)(G),Object(i.a)(B),Object(i.a)(N)),V.isMinimizeOnCloseInPhoneForVideoCall=Object(o.a)(Object(i.a)(v),Object(i.a)(l)),V.getNewConversationButton=Object(o.a)(Object(i.a)(D),Object(i.a)(R),Object(i.a)(N)),V.isMinimizeOnCloseInPhoneForAudioCall=Object(o.a)(Object(i.a)(v),Object(i.a)(f)),V.shouldCallOpenInFullScreen=Object(o.a)(Object(i.a)(h),Object(i.a)(u)),V.getVideoCallHeaderLabel=Object(o.a)(Object(i.a)(j),Object(i.a)(O),Object(i.a)(l)),V.getAudioCallHeaderLabel=Object(o.a)(Object(i.a)(j),Object(i.a)(O),Object(i.a)(f)),V.getPromptEnableIndividualMessageDismissal=Object(o.a)(Object(i.a)(U),Object(i.a)(p)),V.getChatMessageComposerMaxCharacters=function(e){var t,n,r;return null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===r?void 0:r.maxCharacters},V.getChatMessageComposerSendButton=function(e){var t,n,r;return null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===r?void 0:r.sendButton},V.shouldHideOnDisableManualResponse=function(e){var t,n,r;return null===(r=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===r?void 0:r.hideOnDisableManualResponse},V.getInfoCard=Object(o.a)(Object(i.a)(F),Object(i.a)(s))},441:442:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"s",(function(){return d})),n.d(t,"p",(function(){return p})),n.d(t,"B",(function(){return v})),n.d(t,"A",(function(){return O})),n.d(t,"w",(function(){return j})),n.d(t,"v",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"u",(function(){return m})),n.d(t,"x",(function(){return x})),n.d(t,"y",(function(){return y})),n.d(t,"o",(function(){return I})),n.d(t,"l",(function(){return w})),n.d(t,"n",(function(){return k})),n.d(t,"E",(function(){return E})),n.d(t,"C",(function(){return C})),n.d(t,"D",(function(){return T})),n.d(t,"F",(function(){return S})),n.d(t,"z",(function(){return _})),n.d(t,"k",(function(){return A})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return R})),n.d(t,"q",(function(){return P})),n.d(t,"c",(function(){return L})),n.d(t,"r",(function(){return M})),n.d(t,"m",(function(){return D})),n.d(t,"j",(function(){return U}));n(53),n(12),n(80),n(362);var r=n(416),a=n(597),c=n(753),o=n(404),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shouldFetchNumberOfOpenConversation,n=void 0!==t&&t,a=e.size,c=e.cursor;return{payload:{shouldFetchNumberOfOpenConversation:n,size:a,cursor:c},type:r.f}},s=function(e,t){var n=t.cursor,a=t.size;return function(t){return{payload:{conversationId:e,cursor:n,size:a},type:r.l,promise:t}}},u=function(e){var t=e.conversationId,n=e.query,a=e.faqAttachment,c=e.locale;return function(e){return{payload:{conversationId:t,query:n,faqAttachment:a,locale:c},type:r.B,promise:e}}},l=function(e){var t=e.conversationId,n=e.includeAll;return function(e){return{payload:{conversationId:t,includeAll:n},type:r.i,promise:e}}},f=function(e){var t=e.conversationId,n=e.includeAll;return function(e){return{payload:{conversationId:t,includeAll:n},type:r.h,promise:e}}},b=function(e){return{type:r.j,payload:e}},d=function(e){return function(t){return{payload:{conversationId:e},type:r.o,promise:t}}},p=function(e){return{type:r.J,payload:{chatMessage:e,conversationId:o.a.getConversationId(e)}}},v=O=function(e){var t=e.postback,n=e.conversationId,a=e.sender,c=e.inReplyToChatMessageId;return function(e){return{type:r.ab,payload:{postback:t,conversationId:n,sender:a,inReplyToChatMessageId:c},promise:e}}},j=function(e){return{type:r.A,payload:e}},h=function(e){var t=e.action,n=e.conversationId,o=e.callback,i=Object(c.a)(t.actionId,t.attachment),s=Object(c.c)(t);return {type:a.c,payload:{contextId:n,actionId:i.externalCallParams,actionPayload:s},callback:o})},g=function(e){var t=e.action,n=e.conversationId,r=Object(c.a)(t.actionId,t.attachment);return j({type:a.a,payload:{contextId:n,actionId:r.params,actionPayload:t.values}})},m=function(e){var t=e.action,n=e.conversationId,r=Object(c.a)(t.actionId,t.attachment);return j({type:a.b,payload:{contextId:n,actionId:r.params,actionPayload:t.values}})},x=function(e){var t=e.id,n=e.conversationId,r=e.messageId;return j({type:a.f,payload:{id:t,contextId:n,sprMsgId:r}})},y=function(e){var t=e.id,n=e.conversationId,r=e.messageId;return j({type:a.h,payload:{id:t,contextId:n,sprMsgId:r}})},I=function(e){var t=e.attachment,n=e.actionId;return function(e){var a=Object(c.a)(n,t);return{type:r.S,payload:{url:a.url,target:a.target},promise:e}}},w=function(e){var t=e.attachment,n=e.actionId;return function(e){var a=Object(c.a)(n,t);return{type:r.p,payload:{phoneNumber:a.phoneNumber},promise:e}}},k=E=function(){return{type:r.Y,payload:{}}},C=function(){return{type:r.V,payload:{}}},T=S=function(e){var t=e.actionParams,n=e.conversationId,a=e.sender,o=e.appContext,i=e.inReplyToChatMessageId;return function(e){return{type:r.c,payload:{actionParams:Object.assign(Object.assign({},t),{actionTypes:Object(c.b)(t)}),conversationId:n,sender:a,appContext:o,inReplyToChatMessageId:i},promise:e}}},_=A=function(e,t){return function(n){return{type:r.M,payload:{conversationId:e,appContext:t},promise:n}}},N=R=P=function(e,t){return{type:r.F,payload:{chatMessage:e,conversationId:o.a.getConversationId(e),alternateUserIds:t}}},L=function(e,t){return function(n){return{type:r.q,payload:{conversationId:e,disclaimerStatus:t},promise:n}}},M=unction U(){return{type:r.C,payload:{}}}},445:471:function(e,t,n){"use strict";var r=n(128),a=(n(12),n(357)),c={childList:!0,subtree:!0,attributes:!0};t.a=function(e,t){var n=Object(a.useState)(),o=Object(r.a)(n,2),i=o[0],s=o[1];return Object(a.useLayoutEffect)((function(){var n=[];if(i){if(e.MutationObserver){var r=new e.MutationObserver(t);r.observe(i,c),n.push((function(){return r.disconnect()}))}else e.document.addEventListener("DOMSubtreeModified",t),n.push((function(){return e.document.removeEventListener("DOMSubtreeModified",t)}));n.push((,()}return ),[i,t]),Object(a.useCallback)((,[])}},489:function(e,t,n){"use strict";var r=n(907),a=new(n(917).a);a.on((function(e){var t=e.topic,n=e.payload,a=void 0===n?{}:n,c=e.callback;t&&Object(r.a)({topic:t,payload:{response:{data:a.data,error:a.error},request:a.request,shouldLogEvent:a.shouldLogEvent},callback:c})})),t.a=,496:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return b}));var r=n(497),a=n(749),c=function(e){var t=e.ssoId,n=e.conversationId,a=e.messageId;return function(e){return{type:r.c,payload:{ssoId:t,conversationId:n,messageId:a},promise:e}}};function o(){return{type:r.g,payload:{}}}function i(e){return{type:r.d,payload:{status:e?a.a.CONNECTED:a.a.DISCONNECTED}}}unction u(){return{type:r.l,payload:{}}}function l(e){return{type:r.f,payload:e}}function f(){return{type:r.e,payload:{}}},500:function(e,t,n){"use strict";var r=n(442);n.d(t,"a",(function(){return r.f})),n.d(t,"b",(function(){return r.g})),n.d(t,"c",(function(){return r.h})),n.d(t,"d",(function(){return r.l})),n.d(t,"e",(function(){return r.n})),n.d(t,"f",(function(){return r.o})),n.d(t,"g",(function(){return r.q})),n.d(t,"h",(function(){return r.r})),n.d(t,"i",(function(){return r.t})),n.d(t,"j",(function(){return r.u})),n.d(t,"k",(function(){return r.v})),n.d(t,"l",(function(){return r.w})),n.d(t,"m",(function(){return r.x})),n.d(t,"n",(function(){return r.y})),n.d(t,"o",(function(){return r.z})),n.d(t,"p",(function(){return r.A})),n.d(t,"q",(function(){return r.C})),n.d(t,"r",(function(){return r.D})),n.d(t,"s",(function(){return r.E})),n.d(t,"t",(function(){return r.F}));n(959)},509:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return s}));n(7),n(133),n(203),n(127),n(516),n(53),n(12),n(129),n(80),n(616),n(562),n(83),n(19);var r=/^https?:\/\//i,a=c=o=i=s=function(e,t){var n=new URL(e);return t.forEach((),n.toString()}},519:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(368),a=n(367),c=n(202),o=n.n(c),i=n(2123),s=n(2021),u=n(2105),l=Object(i.a)("otherConfigs"),f=Object(i.a)("workQueueId"),b=Object(i.a)("cards"),d=Object(i.a)("partnerId"),p=Object(i.a)("name"),v=Object(i.a)("id"),O=Object(i.a)("accountUserId"),j=Object(i.a)("filter"),h=Object(i.a)("visibilityConfig"),g=Object(i.a)("noDisplayConfig"),m=Object(i.a)("triggerAnimationConfig"),x=Object(i.a)("defaultLocale"),y=Object(i.a)("supportedLocales"),I=Object(i.a)("callConfiguration"),w=Object(i.a)("autoExpireUserSessionTimeInMinutes"),k=Object(r.a)(();k.getCustomizationConfig=Object(s.a)(l),k.getWorkQueueId=Object(s.a)(f),k.getCards=Object(s.a)(b),k.getParnterId=Object(s.a)(d),k.getAppId=Object(s.a)(v),k.getAccountUserId=Object(s.a)(O),k.getVisibilityConfigFilter=Object(u.a)(Object(s.a)(j),Object(s.a)(h)),k.getNoDisplayConfigFilter=Object(u.a)(Object(s.a)(j),Object(s.a)(g)),k.getTriggerAnimationConfigFilter=Object(u.a)(Object(s.a)(j),Object(s.a)(m)),k.getDefaultLocale=Object(s.a)(x),k.getSupportedLocales=Object(s.a)(y),k.getAccountDisplayName=Object(s.a)(p),k.getCallConfiguration=Object(s.a)(I),k.getAutoExpireUserSessionTimeInMinutes=Object(s.a)(w),k.getAudioCallConfiguration=function(e){var t=k.getCallConfiguration(e);return o()(t,"audioConfig")||e.audioChatConfiguration},k.getVideoCallConfiguration=function(e){var t=k.getCallConfiguration(e);return o()(t,"videoConfig")||e.videoChatConfiguration},k.getCallAccountId=function(e){var t=k.getCallConfiguration(e);return o()(t,"accountId")||e.videoChatProviderAccountId}},522:523:530:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(369),a=n(384),c=n(357),o=n.n(c),i=n(376),s=n.n(i),u=n(399),l=n(372),f=n(359),b=n(358),d=n(364);var p=Object(f.a)("button",{target:"e1nedcse0"})("background-color:transparent;border-radius:4px;border:0;cursor:pointer;height:40px;position:relative;width:40px;:before{content:'';display:block;opacity:0;position:absolute;transition-duration:0.15s;transition-timing-function:cubic-bezier(0.4,0,0.2,1);bottom:0;left:0;right:0;top:0;background:none;border-radius:4px;box-sizing:border-box;transform:scale(0);transition-property:transform,opacity;}&:hover:before,&:focus:before{border:none;opacity:1;transform:scale(1);}",d.m,"{&:hover:before,&:focus:before{opacity:0;transform:scale(0);}&:active:before{border:none;opacity:1;transform:scale(1);}}"),v={name:"1qlyuxe",styles:"position:relative;height:12px;width:12px;flex:0 0 auto;"},O=["iconName","iconCss","Icon","onLoad","onClick"],j=o.a.forwardRef((function(e,t){var n=e.iconName,o=e.iconCss,i=e.Icon,f=e.onLoad,d=e.onClick,j=Object(a.a)(e,O),h=Object(u.a)().isKeyboardEventLast,g=Object(c.useCallback)((function(e){h||e.currentTarget.blur(),d&&d(e)}),[h,d]),m=Object(c.useMemo)((function(){return o?[v,o]:[v]}),[o]);return Object(b.jsx)(p,Object(r.a)({},j,{ref:t,className:s()("center-x-y",e.className),onClick:g}),Object(b.jsx)(l.c,{alt:i,name:n,css:m,onLoad:f,"aria-hidden":!0,focusable:!1}),e.children)}))},535:544:548:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return j}));n(7),n(133),n(205),n(12),n(362);var r=n(494),a=n.n(r),c=n(138),o=n.n(c),i=n(88),s=n.n(i),u=n(135),l=n.n(u),f=n(402),b=n(535),d=function e(t,n){var r=f.a.getField(t);if(r)return r===n;var a=!1;return o()(f.a.getFilters(t),(function(t){return!e(t,n)||(a=!0,!1)})),a},p=v=O=function(e){var t=e.currentValueMap,n=e.filter,r=f.a.getField(n);return r&&p(r)?t[b.a.PROFILE_CUSTOM_FIELD](n):s()(t[r])?t[r](n):t[r]},j=function e(t){var n,r;if(t)return(null===t||void 0===t?void 0:t.filters)?Object.assign(Object.assign({},t),{details:Object.assign({id:a()()},null!==(r=null===t||void 0===t?void 0:t.details)&&void 0!==r?r:{}),filters:l()(null===t||void 0===t?void 0:t.filters,()}):Object.assign(Object.assign({},t),{details:Object.assign({id:a()()},null!==(n=null===t||void 0===t?void 0:t.details)&&void 0!==n?n:{})})}},551:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(128),a=n(357),c=n.n(a),o=n(392),i=n.n(o),s=n(836),u=n.n(s),l=n(358),f={SUCCESS:"SUCCESS",FAILURE:"FAILURE"},b=c.a.createContext({notification:void 0,setNotification:i.a}),d=function(e){var t=Object(a.useState)(void 0),n=Object(r.a)(t,2),c=n[0],o=n[1],i=u()(),s=Object(a.useCallback)((,[i]),f=Object(a.useMemo)((,[c,s]);return Object(l.jsx)(b.Provider,{value:f},e.children)};t.c=b},552:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"x",(function(){return l})),n.d(t,"q",(function(){return f})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return p})),n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"i",(function(){return h})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return m})),n.d(t,"r",(function(){return x})),n.d(t,"w",(function(){return y})),n.d(t,"s",(function(){return I})),n.d(t,"t",(function(){return w})),n.d(t,"p",(function(){return k})),n.d(t,"f",(function(){return E})),n.d(t,"k",();var r=n(693);function a(e){return{type:r.g,payload:e}}function c(e){return{type:r.h,payload:e}}function o(e){return{type:r.m,payload:e}}function i(e){return{type:r.t,payload:e}}function s(e){return{type:r.i,payload:e}}function u(e){return{type:r.p,payload:e}}function l(e){return{type:r.y,payload:e}}function f(e){return{type:r.w,payload:e}}function b(e){return{type:r.c,payload:e}}function d(e){return{type:r.d,payload:e}}function p(e){return{type:r.f,payload:e}}function v(e){return{type:r.e,payload:e}}function O(e){return{type:r.n,payload:e}}function j(e){return{type:r.b,payload:e}}function h(e){return{type:r.o,payload:e}}function g(e){return{type:r.l,payload:e}}function m(e){return{type:r.s,payload:e}}function x(e){return{type:r.u,payload:e}}function y(e){return{type:r.a,payload:e}}function I(e){return{type:r.j,payload:e}}function w(e){return{type:r.q,payload:e}}function k(e){return{type:r.v,payload:e}}function E(e){return{type:r.k,payload:e}},571:function(e,t,n){"use strict";var r=n(13),a=n(357),c=n(1157),o=n(27),i=n(685),s=n(402),u=function(){var e=Object(i.a)(),t=e.subscribe,n=e.getValue;return{subscribe:Object(a.useCallback)((function(e,n){var r=s.a.getId(e);return t(r,n)}),[t]),getValue:n}},l=n(398),f=n.n(l),b=n(405),d=n.n(b),p=n(202),v=n.n(p),O=n(438),j=n.n(O),h=n(138),g=n.n(h),m=n(596),x=n.n(m),y=(n(369),n(1159));n(358);var I=w=n(403),k=function(e,t){return(j()(v()(e,t))||w.a).startTime||0},E=function(e){var t,n=e.startTime,r=e.expectedElapsedTime,a=e.onTimeout,c=r-(n?Date.now()-n:0);return c>0&&(t=window.setTimeout((function(){a()}),c)),t},C=function(){var e=I(),t=e.pagesMetaData,n=e.currentPageUrl,c=Object(a.useRef)(k(t,n));c.current=k(t,n);var i=Object(a.useRef)({}),u=Object(a.useCallback)((function(e,t){var n=s.a.getId(e),a=d()(s.a.getValues(e));return i.current=Object(r.a)(Object(r.a)({},i.current),{},Object(o.a)({},n,{timeoutId:E({startTime:c.current,expectedElapsedTime:a,onTimeout:t}),onChangeCallback:t,filterValue:a})),function(){clearTimeout(v()(i.current,"".concat(n,".timeoutId"))),i.current=f()(i.current,n)}}),[]);return x()((function(){g()(i.current,(function(e){var t=e.timeoutId,n=e.onChangeCallback,r=e.filterValue;clearTimeout(t),n(),e.timeoutId=E({startTime:c.current,expectedElapsedTime:r,onTimeout:n})}))}),[n]),{subscribe:u,getValue:Object(a.useCallback)((function(){return c.current?Date.now()-c.current:0}),[])}},T=n(365),S=n(752),_=n.n(S),A=n(135),N=n.n(A),R=n(476),P=n.n(R),L=n(386),M=n(380),D=n(377),U=n(442),F=n(496),B=function(e){return Object(L.v)(Object(L.q)(Object(M.c)(e)))},G={fetchOpenConversationCount:U.j,initPusherConnection:F.e},V=function(){var e=Object(a.useRef)(),t=Object(a.useRef)({}),n=Object(D.a)(G),c=n.fetchOpenConversationCount,i=n.initPusherConnection,u=Object(T.d)(B);e.current=u;var l=_()(u);return Object(a.useEffect)((function(){P()(e.current)&&c()}),[]),x()((function(){N()(t.current,(function(e){e()}))}),[e.current]),x()((function(){P()(l)&&u&&i()}),[u,l,i]),{subscribe:Object(a.useCallback)((function(e,n){var a=s.a.getId(e);return t.current=Object(r.a)(Object(r.a)({},t.current),{},Object(o.a)({},a,n)),function(){t.current=f()(t.current,a)}}),[]),getValue:Object(a.useCallback)((function(){return e.current}),[])}},H=n(579),z=n(533),W=function(){var e=Object(a.useRef)(0),t=Object(H.a)();e.current=z.a.getTimeToAvailability(t);var n=Object(a.useRef)({}),c=Object(a.useCallback)((function(){return e.current}),[]);return{subscribe:Object(a.useCallback)((function(t,a){var c,i=s.a.getId(t),u=v()(t,"details.timeToBusinessHours"),l=-1;return!P()(u)&&u>0?l=u:!P()(e.current)&&e.current>0&&(l=e.current),l>=0&&(c=window.setTimeout(a,l)),n.current=Object(r.a)(Object(r.a)({},n.current),{},Object(o.a)({},i,c)),function(){clearTimeout(v()(n.current,"".concat(i,".timeoutId"))),n.current=f()(n.current,i)}}),[]),getValue:c}},q=n(392),K=n.n(q),Y=n(56),X=n.n(Y),Q=n(81),Z=n(134),$=n(368),J=n(367),ee=(n(131),n(381),n(12),n(205),n(83),n(743),n(433)),te=n(1160),ne=Object($.a)((function e(){var t=this;Object(J.a)(this,e),this.subscribers={},this.filterPoller=void 0,this.visibilitychangeHandler=function(){var e;if(document.hidden)null===(e=t.filterPoller)||void 0===e||e.stop();else if(Object.keys(t.subscribers).length>0){var n;null===(n=t.filterPoller)||void 0===n||n.start()}},this.startPolling=function(){var e;window.document.addEventListener("visibilitychange",t.visibilitychangeHandler),null===(e=t.filterPoller)||void 0===e||e.start()},this.stopPolling=function(){var e;window.document.removeEventListener("visibilitychange",t.visibilitychangeHandler),null===(e=t.filterPoller)||void 0===e||e.stop()},this.subscribe=function(e,n){var r=e.id;return t.subscribers[r]={cb:n,filter:{field:e.field,filterType:e.filterType,details:e.details}},1===Object.keys(t.subscribers).length&&t.startPolling(),function(){delete t.subscribers[r],0===Object.keys(t.subscribers).length&&t.stopPolling()}},this.subscribers={};var n=function(){var e=Object(Z.a)(Object(Q.a)().mark((function e(){var n,r;return Object(Q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.a.post("livechat/conversation/process-filters",{filterDetails:Object.keys(t.subscribers).reduce((function(e,n){return e.push({id:n,filter:t.subscribers[n].filter}),e}),[])},{headers:{"x-chat-auto":!0}});case 3:n=e.sent,r=n.data,Object.keys(r).forEach((),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return ();this.filterPoller=new te.a(n,{pollInterval:15e3})})),re=new ne,ae=Object.freeze(re),ce=n(374),oe=n(1161),ie=),se=function(e){var t,n,r=null===(t=Object(ce.a)().settings)||void 0===t||null===(n=t.filterPoll)||void 0===n?void 0:n.enable;return Object(oe.a)({callback:),{getValue:Object(a.useCallback)((function(){return ),[]),subscribe:Object(a.useCallback)((function(t,n){X()(ie.get(t.id))&&ie.set(t.id,e(t));var a=r?ae.subscribe(t,(function(r){var a=e({details:r});ie.get(t.id)!==a&&(ie.set(t.id,a),n())})):K.a;return ),[r])}},ue=function(){var e=Object(H.a)(),t=z.a.getNoOfAgentsAvailable(e),n=Object(a.useCallback)((function(e){var n,r;return null!==(n=null===(r=e.details)||void 0===r?void 0:r.noOfAgentsAvailable)&&void 0!==n?n:t}),[t]);return se(n)},le=function(){var e=Object(H.a)(),t=z.a.getNumberOfPendingCases(e),n=Object(a.useCallback)((,[t]);return se(n)},fe=n(521),be=function(){var e=Object(fe.a)().device,t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,x()((function(){N()(t.current,(function(e){e()}))}),[n.current]);var c=Object(a.useCallback)((function(e,n){var a=s.a.getId(e);return t.current=Object(r.a)(Object(r.a)({},t.current),{},Object(o.a)({},a,n)),function(){t.current=f()(t.current,a)}}),[]);return{getValue:Object(a.useCallback)((,[]),subscribe:c}},de=n(535),pe="city",ve="countryLong",Oe="region",je=function(){var e=Object(a.useRef)(),t=Object(H.a)();e.current=z.a.getUserIPDetails(t);var n=Object(a.useRef)({});return x()((function(){N()(n.current,(function(e){e()}))}),[e.current]),{subscribe:Object(a.useCallback)((function(e,t){var a=s.a.getId(e);return n.current=Object(r.a)(Object(r.a)({},n.current),{},Object(o.a)({},a,t)),function(){n.current=f()(n.current,a)}}),[]),getValue:Object(a.useCallback)((function(){return function(t){var n=s.a.getField(t),r=e.current;switch(n){case de.a.USER_IP_DETAILS_CITY:return null===r||void 0===r?void 0:r[pe];case de.a.USER_IP_DETAILS_COUNTRY:return null===r||void 0===r?void 0:r[ve];case de.a.USER_IP_DETAILS_REGION:return null===r||void 0===r?void 0:r[Oe];default:return}}}),[])}},he=n(548),ge=n(11),me=n(4),xe=function(){var e=Object(ge.a)(),t=Object(a.useRef)(e.userContext),n=Object(a.useRef)({}),c=Object(a.useCallback)((function(e){t.current=e,N()(n.current,()}),[]);return Object(a.useEffect)((function(){return Object(me.T)("userContext",c),),[]),{subscribe:Object(a.useCallback)((function(e,t){var a=e.id;return n.current=Object(r.a)(Object(r.a)({},n.current),{},Object(o.a)({},a,t)),function(){n.current=f()(n.current,a)}}),[]),getValue:Object(a.useCallback)((function(){return function(e){var n,r,a=e.field,c=Object(he.b)(a);return null===(n=t.current)||void 0===n||null===(r=n[c])||void 0===r?void 0:r[0]}}),[])}},ye=n(1164),Ie=n(1166),we=n(474),ke=function(){var e=u(),t=e.getValue,n=e.subscribe,r=C(),c=r.getValue,i=r.subscribe,l=V(),f=l.getValue,b=l.subscribe,d=W(),p=d.getValue,v=d.subscribe,O=ue(),j=O.getValue,h=O.subscribe,g=le(),m=g.getValue,x=g.subscribe,y=be(),I=y.getValue,w=y.subscribe,k=je(),E=k.getValue,T=k.subscribe,S=xe(),_=S.getValue,A=S.subscribe,N=Object(ye.a)(),R=N.getValue,P=N.subscribe,L=Object(Ie.a)(),M=L.getValue,D=L.subscribe;return{getValue:Object(a.useCallback)((function(){var e;return e={},Object(o.a)(e,de.a.CURRENT_URL,t()),Object(o.a)(e,de.a.TOTAL_TIME_SPENT,c()),Object(o.a)(e,de.a.IS_CONVERSATION_OPEN,f()),Object(o.a)(e,de.a.AVAILABLE_AGENTS,j()),Object(o.a)(e,de.a.AGENT_OUT_OF_CAPACITY,m()),Object(o.a)(e,de.a.BUSINESS_HOURS,p()),Object(o.a)(e,de.a.DEVICE_TYPE,I()),Object(o.a)(e,de.a.USER_IP_DETAILS_CITY,E()),Object(o.a)(e,de.a.USER_IP_DETAILS_COUNTRY,E()),Object(o.a)(e,de.a.USER_IP_DETAILS_REGION,E()),Object(o.a)(e,de.a.USER_AGENT,Object(we.e)()),Object(o.a)(e,de.a.PROFILE_CUSTOM_FIELD,_()),Object(o.a)(e,de.a.VERTICAL_PAGE_SCROLL_DEPTH,R()),Object(o.a)(e,de.a.HORIZONTAL_PAGE_SCROLL_DEPTH,M()),e}),[t,c,f,p,j,m,I,E,_,R,M]),subscribe:Object(a.useCallback)((function(e,t){if(Object(he.e)(s.a.getField(e)))return A(e,t);switch(s.a.getField(e)){case de.a.TOTAL_TIME_SPENT:return i(e,t);case de.a.CURRENT_URL:return n(e,t);case de.a.IS_CONVERSATION_OPEN:return b(e,t);case de.a.AVAILABLE_AGENTS:return h(e,t);case de.a.AGENT_OUT_OF_CAPACITY:return x(e,t);case de.a.BUSINESS_HOURS:return v(e,t);case de.a.DEVICE_TYPE:return w(e,t);case de.a.USER_IP_DETAILS_CITY:case de.a.USER_IP_DETAILS_COUNTRY:case de.a.USER_IP_DETAILS_REGION:return T(e,t);case de.a.VERTICAL_PAGE_SCROLL_DEPTH:return P(e,t);case de.a.HORIZONTAL_PAGE_SCROLL_DEPTH:return D(e,t);default:return null}}),[n,i,b,v,h,x,w,T,A,P,D])}};t.a=function(e,t){var n=ke(),o=n.getValue,i=n.subscribe,s=Object(a.useCallback)((function(){var e,n;return Object(r.a)(Object(r.a)({},null!==(e=null===t||void 0===t||null===(n=t._getStaticValueMap)||void 0===n?void 0:n.call(t))&&void 0!==e?e:w.a),o())}),[o,null===t||void 0===t?void 0:t._getStaticValueMap]);return Object(c.a)(e,Object(r.a)(Object(r.a)({},t),{},{getValue:s,subscribe:i}))}},572:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(369),a=n(384),c=(n(127),n(357),n(39)),o=n.n(c),i=n(1442),s=n(385),u=n(359);var l=Object(u.a)("div",{target:"ex7k1ut0"})({name:"1txt44t",styles:"top:0;left:0;margin:0;padding:0;overflow:hidden;position:absolute;width:100%;height:100%;background-color:var(--spr-lc-bgc-9);"}),f=Object(u.a)("div",{target:"ex7k1ut1"})({name:"3f9jy3",styles:"top:50%;left:50%;position:absolute;transform:translate(-50%,-50%);"}),b=n(358),d=function(){return Object(b.jsx)(l,null,Object(b.jsx)(f,null,Object(b.jsx)(s.c,null)))},p=n(371),v=n(374),O=["shouldHideLocaleLoader"],j=function(e){var t,n=Object(p.a)(),c=n.direction,s=n.localeDataLoading,u=Object(v.a)(),l=function(e){return o()(e,(function(e,t,n){return e[n]=o()(t,(function(e,t){var n=t.type,r=t.src;return"SCRIPT"===n?"".concat(e,' <script defer src="').concat(r,'"><\/script>'):"CSS"===n?"".concat(e,' <link rel="stylesheet" href="').concat(r,'">'):e}),""),e}),{})}(null===u||void 0===u||null===(t=u.settings)||void 0===t?void 0:t.externalResources),f=e.shouldHideLocaleLoader,j=Object(a.a)(e,O);return Object(b.jsx)(i.a,Object(r.a)({},j,{direction:c,externalResources:l}),e.children,!f&&s&&Object(b.jsx)(d,null))}},576:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n(12),n(130);var r=new(n(1077).a)({middlewares:[],getContext:),a=function(e){r.clone(e)};t.a=r},581:function(e,t,n){"use strict";t.a={CONVERSATION:"CONVERSATION",BANNER:"BANNER",KNOWLEDGE_BASE:"KNOWLEDGE_BASE",INFO_CARD:"INFO_CARD",STATUS_CARD:"STATUS_CARD",CONVERSATION_HISTORY:"CONVERSATION_HISTORY"}},582:function(e,t,n){"use strict";n.d(t,"f",(function(){return k})),n.d(t,"a",(function(){return E})),n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return S})),n.d(t,"g",(function(){return _})),n.d(t,"d",(function(){return A}));n(7),n(133),n(55),n(516),n(84);var r=n(202),a=n.n(r),c=n(412),o=n.n(c),i=n(476),s=n.n(i),u=n(1627),l=n.n(u),f=n(138),b=n.n(f),d=n(702),p=n(440),v=n(547),O=n(382),j=n(386),h=n(563),g=n(534),m=n(142),x=n(4),y=/^CASE_(\w+)/,I=/^CONVERSATION_(\w+)/,w=function(e){return e&&!!e.match(I)},k=E=function(e){return k(e)?e.match(y)[0].split("_")[1]:void 0};function C(e,t,n){var r,c=Object(O.e)(e),o=Object(j.q)(Object(O.c)(e)),i=Object(v.a)(c),u=Object(v.d)(c),l=p.a.getMaximumOpenConversations(t),f=a()(l,"limit"),b=Object(j.v)(o),d=!!f&&!s()(b)&&f<=b,h=!!a()(l,"replaceNewConversationButton");return i?r=u:d&&(r=h?void 0:n(l,"label")),{isLocked:i||d,lockReason:r}}var T=function(e,t){var n=o()(g.a.getReadStatusList(e),(function(e){return e.userId===t}));return a()(n,"unreadCount",0)},S=function(e){var t=Object(O.c)(e),n=Object(j.q)(t),r=Object(h.b)().location.pathname,a=Object(d.a)(r,{path:"/conversation/:conversationId/:transientId?"});if(!a)return{isConversationPath:!1,conversationId:void 0};var c=null===a||void 0===a?void 0:a.params.conversationId,o=null===a||void 0===a?void 0:a.params.transientId;if("survey"===o)return{isConversationPath:!0,conversationId:c};if("all"===c)return{isConversationPath:!1,conversationId:void 0};if("new"===c)return{isConversationPath:!0,conversationId:o||m.e};if("last"===c)return{isConversationPath:!0,conversationId:Object(j.b)(n)?Object(j.e)(Object(j.w)(t))||m.e:void 0};if(w(c))return{isConversationPath:!0,conversationId:c};var i=E(c);return k(c)&&i?{isConversationPath:!0,conversationId:Object(j.j)(n,i)}:{isConversationPath:!0,conversationId:c}},_=function(e,t){return-1===l()(Object(j.r)(e),t)},A=function(e){var t=e.chatConversations.conversations.byId,n=e.chatConversations.conversations.ids;if(Object(x.E)()){var r=S(e).conversationId;if(!r)return!1;n=[r]}var a=!1;return b()(n,(function(e){if(!t[e].closed&&!t[e].deleted&&t[e].agentAssigned)return a=!0,!1})),a}},592:function(e,t,n){"use strict";var r=n(128),a=n(357),c=n(836),o=n.n(c),i=n(1167);var s=function(){return Object(a.useContext)(i.a)};t.a=function(e){var t=s(),n=Object(r.a)(t,2),c=n[0],i=n[1],u=o()(),l=Object(a.useCallback)((function(t){u()&&i({stateKey:e,state:t})}),[e,i,u]);return Object(a.useEffect)((function(){return ),[]),[c&&c.stateKey===e?c.state:null,l]}},597:598:function(e,t,n){"use strict";var r=n(357),a=n(551);t.a=function(){return Object(r.useContext)(a.c)}},600:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(81),a=(n(127),n(423)),c=n(576),o=n(577),i=n.n(o),s="/livechat/conversation",u="/livechat/user";function l(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("".concat(s,"/chatUsers"),e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}var f=function(e){return Object(a.__awaiter)(void 0,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("".concat(s,"/chatUser"),i()(e,["userId","userType","firstName","lastName","fullName","profileImageUrl","email","phoneNo","customContext","locale","customUser"]));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))};function b(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n,a,o,i,s,l,f;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,a=void 0===n?"":n,o=e.size,i=void 0===o?10:o,s=e.pageNum,l=void 0===s?0:s,t.next=3,c.a.post("".concat(u,"/search-users?query=").concat(a,"&size=").concat(i,"&pageNum=").concat(l));case 3:return f=t.sent,t.abrupt("return",f.data);case 5:case"end":return t.stop()}}),t)})))}function d(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n,a,o,i,s,l,f,b,d;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,a=void 0===n?"":n,o=e.size,i=void 0===o?10:o,s=e.pageNum,l=void 0===s?0:s,f=e.roleIds,b=void 0===f?[]:f,t.next=3,c.a.post("".concat(u,"/spy/search-users"),{query:a,size:i,pageNum:l,roleIds:b});case 3:return d=t.sent,t.abrupt("return",d.data);case 5:case"end":return t.stop()}}),t)})))}function p(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("".concat(u,"/fetch/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}},601:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(359),a=n(361),c="header.lg",o="".concat(c,".logo"),i="".concat(c,".description"),s=Object(r.a)("div",{target:"e6slia10"})("min-height:",(function(e){return Object(a.f)("header.minHeight")(e)}),";padding:",(function(e){return Object(a.h)("header.padding")(e)}),";display:flex;justify-content:flex-end;align-items:center;"),u=Object(r.a)("div",{target:"e6slia11"})("width:100%;",(function(e){return!e.isContained&&{backgroundColor:"".concat(Object(a.f)("header.backgroundColor")(e)),backgroundImage:"".concat(Object(a.f)("header.gradients")(e)),borderBottom:"".concat(Object(a.f)("header.borderBottom")(e)),padding:"var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) 0 var(--spr-lc-safe-area-left)"}}),""),l=function(e){return Object(a.f)("".concat(c,".paddingTop"),0)(e)+Object(a.f)("".concat(c,".paddingBottom"),0)(e)+Object(a.f)("".concat(o,".height"),0)(e)+Object(a.f)("".concat(o,".marginTop"),0)(e)+Object(a.f)("".concat(o,".marginBottom"),0)(e)+Object(a.f)("".concat(i,".marginTop"),0)(e)+Object(a.f)("".concat(i,".marginBottom"),0)(e)+52}},602:function(e,t,n){"use strict";var r=n(81),a=n(134),c=n(128),o=n(357),i=n(421),s=n(433);t.a=function(e,t){var n=t.onSuccess,u=t.onFailure,l=t.ignoreResults,f=Object(o.useRef)(0),b=Object(o.useState)(),d=Object(c.a)(b,2),p=d[0],v=d[1],O=i.a.getType(e),j=i.a.getUrl(e),h=Object(o.useCallback)((,[]),g=Object(o.useCallback)((function(e){return f.current===e}),[]),m=Object(o.useCallback)(function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h(),e.prev=1,e.next=4,s.a[O](j,t);case 4:return c=e.sent,!l&&g(a)&&v(c.data),n&&n(c.data),e.abrupt("return",c.data);case 10:throw e.prev=10,e.t0=e.catch(1),u&&u(e.t0),!l&&g(a)&&v(void 0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),[O,j,h,g]);return[m,{data:p}]}},603:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={CONVERSATION:"CONVERSATION",CONVERSATION_LIST:"CONVERSATION_LIST",HOME:"HOME",KNOWLEDGE_BASE:"KNOWLEDGE_BASE",KNOWLEDGE_BASE_LIST:"KNOWLEDGE_BASE_LIST",SURVEY:"SURVEY",GUIDED_WORKFLOW:"GUIDED_WORKFLOW",401:"401",LOGOUT:"LOGOUT"}},616:619:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(369),a=n(357),c=n.n(a),o=n(358),i=c.a.createContext(void 0),s=function(e){return function(t){return Object(o.jsx)(i.Consumer,null,(function(n){return Object(o.jsx)(e,Object(r.a)({},t,{applicationConfig:n}))}))}},u=function(e){return function(t){return Object(o.jsx)(i.Consumer,null,(function(n){return Object(o.jsx)(e,Object(r.a)({},t,{customization:n.otherConfigs}))}))}};t.c=i},622:624:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(127);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n=t(e,"fullName"),r=t(e,"firstName"),a=t(e,"lastName");if(n)return n;var c=a?" ".concat(a):"",o=r||"";return"".concat(o).concat(c)}},625:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(369),a=n(357),c=n.n(a),o=n(644),i=n(358),s=c.a.createContext((function(){return o.c})),u=function(e){return function(t){return Object(i.jsx)(s.Consumer,null,(function(n){return Object(i.jsx)(e,Object(r.a)({},t,{getUserType:n}))}))}};t.b=s},627:function(e,t,n){"use strict";var r=n(357),a=n.n(r),c=n(752),o=n.n(c),i=n(476),s=n.n(i),u=n(846),l=n(358),f=function(e){var t=e.shouldPlay,n=e.unreadCount,c=e.children,i=Object(u.b)().play,f=o()(n);return Object(r.useEffect)((function(){!s()(f)&&n&&t&&n>f&&i(u.a.MESSAGE)}),[n,i,f,t]),Object(l.jsx)(a.a.Fragment,null,c)};t.a=a.a.memo(f)},649:650:651:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(357),a=,652:653:function(e,t,n){"use strict";var r=n(128),a=(n(12),n(357)),c=n(471);t.a=function(e,t){var n=Object(a.useState)(),o=Object(r.a)(n,2),i=o[0],s=o[1],u=Object(c.a)(e,t);return Object(a.useLayoutEffect)((function(){var n=[];if(i)if(e.ResizeObserver){var r=new e.ResizeObserver(t);r.observe(i),n.push((function(){return r.disconnect()}))}else u(i);return function(){n.forEach((function(e){return e()}))}}),[i,t]),Object(a.useCallback)((function(e){e&&s(e)}),[])}},654:function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"v",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return O})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return x})),n.d(t,"x",(function(){return y})),n.d(t,"l",(function(){return I})),n.d(t,"u",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"t",(function(){return E})),n.d(t,"p",(function(){return C})),n.d(t,"k",(function(){return T})),n.d(t,"y",(function(){return S})),n.d(t,"w",(function(){return _})),n.d(t,"q",(function(){return A})),n.d(t,"s",(function(){return N})),n.d(t,"m",(function(){return R})),n.d(t,"r",(function(){return P})),n.d(t,"o",(function(){return L}));var r=n(81),a=(n(127),n(362),n(203),n(423)),c=n(576),o=n(810),i=n(927),s=n(144),u=new o.a,l="/livechat/conversation";function f(e){var t=e.shouldFetchNumberOfOpenConversation,n=e.size,o=e.cursor;return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function e(){var a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(l,"/fetch?fetchNumberOfOpenConversations=").concat(t,"&sortKey=lastInteractionTime"),n&&(a="".concat(a,"&size=").concat(n)),o&&o.after&&(a="".concat(a,"&after=").concat(o.after)),o&&o.before&&(a="".concat(a,"&before=").concat(o.before)),e.next=6,c.a.post(a);case 6:return i=e.sent,e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})))}function b(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n,a,o,i,s,u,f,b,d;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(l,"/spy-conversations"),a=e.userIds,o=void 0===a?[]:a,i=e.roleIds,s=void 0===i?[]:i,u=e.pageNum,f=e.size,b=void 0===f?10:f,t.next=4,c.a.post(n,{userIds:o,roleIds:s,page:{page:u,size:b}});case 4:return d=t.sent,t.abrupt("return",d.data);case 6:case"end":return t.stop()}}),t)})))}function d(e,t){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function n(){var a,c,o;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.httpHeaders,c=e.multiSubmitResponseUrl,n.next=3,u.post(c,t,{headers:Object.assign(Object.assign({},a),{"Content-Type":"application/json"}),baseURL:""});case 3:return o=n.sent,n.abrupt("return",o.data);case 5:case"end":return n.stop()}}),n)})))}function p(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("".concat(l,"/fetch/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function v(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("".concat(l,"/fetch/case/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function O(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("".concat(l,"/fetch/externalCase/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function j(e,t){var n=t.size,o=t.cursor;return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var a,i,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[{key:"conversationId",value:e}],n&&a.push({key:"size",value:n}),o&&a.push({key:"cursor",value:o}),a.push({key:"includeMaskedDeletedMessages",value:!0}),i=a.map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&"),t.next=7,c.a.post("".concat(l,"/fetchMessages?").concat(i));case 7:return s=t.sent,t.abrupt("return",s.data);case 9:case"end":return t.stop()}}),t)})))}function h(e,t){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function n(){var a;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.a.post("".concat(l,"/closeConversation?conversationId=").concat(e));case 3:return a=n.sent,null===t||void 0===t||t.resolve(),n.abrupt("return",a.data);case 8:if(n.prev=8,n.t0=n.catch(0),!Object(s.d)(n.t0)){n.next=12;break}return n.abrupt("return",null===t||void 0===t?void 0:t.resolve());case 12:throw null===t||void 0===t||t.reject(n.t0),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,8]])})))}function g(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.post("".concat(l,"/closeAll"));case 3:return n=t.sent,null===e||void 0===e||e.resolve(),t.abrupt("return",n.data);case 8:if(t.prev=8,t.t0=t.catch(0),!Object(s.d)(t.t0)){t.next=12;break}return t.abrupt("return",null===e||void 0===e?void 0:e.resolve());case 12:throw null===e||void 0===e||e.reject(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,8]])})))}function m(e,t){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function n(){var a;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.a.post("".concat(l,"/delete?conversationId=").concat(e));case 3:return a=n.sent,null===t||void 0===t||t.resolve(),n.abrupt("return",a.data);case 8:if(n.prev=8,n.t0=n.catch(0),!Object(s.d)(n.t0)){n.next=12;break}return n.abrupt("return",null===t||void 0===t?void 0:t.resolve());case 12:throw null===t||void 0===t||t.reject(n.t0),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,8]])})))}function x(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.post("".concat(l,"/deleteAll"));case 3:return n=t.sent,null===e||void 0===e||e.resolve(),t.abrupt("return",n.data);case 8:if(t.prev=8,t.t0=t.catch(0),!Object(s.d)(t.t0)){t.next=12;break}return t.abrupt("return",null===e||void 0===e?void 0:e.resolve());case 12:throw null===e||void 0===e||e.reject(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,8]])})))}function y(e,t){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function n(){var a;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.post("".concat(l,"/updateDisclaimer/").concat(e,"?disclaimerStatus=").concat(t));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}),n)})))}function I(e,t){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function n(){var a,o;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={conversationId:e,messageId:t},n.next=3,c.a.post("".concat(l,"/fetchMessage"),void 0,{params:a,backoff:!0});case 3:return o=n.sent,n.abrupt("return",o.data);case 5:case"end":return n.stop()}}),n)})))}function w(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("".concat(l,"/send"),e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function k(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("/livechat/appointment/slots",{slotDefinitionId:e.slotDefinitionId,startTime:e.selectedDate.getTime(),timeZone:e.timeZone,params:e.appointmentAssetParams,messageId:e.messageId});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function E(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("/livechat/appointment/reserve",{startTime:e.selectedDate.getTime(),selectedSlot:e.selectedSlot,slotDefinitionId:e.slotDefinitionId,timeZone:e.timeZone,params:e.appointmentAssetParams,messageId:e.messageId});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))}function C(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((,t)})))}function T(e,t,n,o){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function a(){var i;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.post("".concat(l,"/suggestions"),Object.assign({conversationId:e,query:t,locale:o},n));case 2:return i=r.sent,r.abrupt("return",i.data);case 4:case"end":return r.stop()}}),a)})))}function S(e){var t=e.context,n=e.updateLatest,r=e.payload;return i.a.info({chatConversationId:null===r||void 0===r?void 0:r.conversationId,message:"".concat(null===r||void 0===r?void 0:r.conversationId,": Update latest conversation context service called"),additionalDetails:{actionPayload:r}}),c.a.post("".concat(l,"/updateConversationDetails?updateLatest=").concat(n),t)}function _(e){var t=e.conversationId,n=e.context,r=e.payload;return i.a.info({chatConversationId:t,message:"".concat(t,": Update conversation context service called"),additionalDetails:{actionPayload:r}}),c.a.post("".concat(l,"/updateConversationDetails?conversationId=").concat(t),n)}function A(e){return c.a.post("".concat(l,"/cancelAsset/").concat(e))}function N(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){return Object(r.a)().wrap((,t)})))}function R(){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((,e)})))}function P(e){return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.a.post("".concat(l,"/markTimeOfDelivery?messageIds=").concat(e.join(","))));case 1:case"end":return t.stop()}}),t)})))}function L(e){var t=e.messageId,n=e.conversationId,o=e.text,i=e.language,s=e.additional;return Object(a.__awaiter)(this,void 0,void 0,Object(r.a)().mark((function e(){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("".concat(l,"/generateVoiceNote"),{messageId:t,tempConversationId:n,text:o,language:i,additional:s});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))}},684:function(e,t,n){"use strict";n.d(t,"a",(function(){return ee})),n.d(t,"c",(function(){return ae})),n.d(t,"b",(function(){return re}));var r=n(369),a=n(81),c=n(13),o=n(134),i=n(128),s=n(379),u=(n(127),n(357)),l=n.n(u),f=n(365),b=n(360),d=n(39),p=n.n(d),v=n(202),O=n.n(v),j=n(580),h=n.n(j),g=n(412),m=n.n(g),x=n(392),y=n.n(x),I=n(476),w=n.n(I),k=n(377),E=n(394),C=n(598),T=n(1072),S=n(825),_=n(600),A=n(410),N=n(380),R=n(395),P=n(4),L=n(37),M=n(594),D=n(695),U=n(599),F=n(132),B=n(420),G=n.n(B),V=n(138),H=n.n(V),z=n(11),W=n(415),q=Object(U.a)(),K=n(499),Y=n(551),X=n(508),Q=n(544),Z=n(358),$=Object(U.a)(),J=[X.f],ee=l.a.createContext({locale:$,language:Object(U.b)($),defaultLocale:$,direction:K.b.LTR,localeDataLoading:!0,changeLocale:y.a}),te={onLocaleDataLoaded:R.d},ne=function(e){return m()(function(e,t){return h()(p()(t,(function(t,n){var r=O()(e,"".concat(n,".actionsToShowByVariant")),a=Object(P.A)();return[].concat(Object(s.a)(t),Object(s.a)(a&&(O()(r,a)||O()(r,L.a))||M.a))}),[]),"type")}(e,["allScreens","homeScreen","conversationScreen"]),{type:D.a.CHANGE_LOCALE})},re=function(e){var t,n,r=Object(f.d)(N.g),l=Object(A.c)(r)||{},d=Object(E.a)(),p=(null===l||void 0===l?void 0:l.locale)||function(e){var t=(null===e||void 0===e?void 0:e.defaultLocale)||q,n=(null===e||void 0===e?void 0:e.supportedLocales)||[],r=Object(z.a)().locale,a=Object(W.a)(),c=[].concat(Object(s.a)(n),[t]),o=r?[r].concat(Object(s.a)(a)):a,i=t;return H()(o,(function(e){return G()(c,e)?(i=e,!1):G()(c,Object(U.b)(e))?(i=Object(U.b)(e),!1):null})),i}(d),v=Object(u.useState)({localeDataLoading:!0,localeData:void 0}),O=Object(i.a)(v,2),j=O[0],h=O[1],g=Object(u.useRef)(!1),m=Object(C.a)().setNotification,x=Object(k.a)(te).onLocaleDataLoaded,y=d.defaultLocale||$,I=null===(t=d.otherConfigs)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.externalLocaleData,R=ne(d.otherConfigs)||{},P=R.errorNotificationMessage,L=R.successNotificationMessage,M=Object(T.a)({externalLocaleData:I}),D=Object(u.useCallback)(function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){var n,r,o,i,s,u,f,b;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.locale,r=t.shouldSyncWithBackend,o=void 0===r||r,i=t.userInitiated,s=void 0===i||i,u=t.promise,s&&h((function(e){return Object(c.a)(Object(c.a)({},e),{},{localeDataLoading:!0})})),e.prev=2,e.next=5,M(n);case 5:if(f=e.sent,b=f.localeData,!o){e.next=14;break}return e.next=10,Object(_.e)(Object(c.a)(Object(c.a)({},l),{},{locale:n}));case 10:if(e.sent.data.locale!==l.locale){e.next=13;break}throw new Error(Q.a.INCORRECT_PAYLOAD);case 13:s&&L&&m({message:L,type:Y.a.SUCCESS});case 14:x({locale:n,data:b.messages}),b&&h((),null===u||void 0===u||u.resolve({locale:n}),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(2),o&&s&&P&&m({message:P,type:Y.a.FAILURE}),null===u||void 0===u||u.reject(e.t0.message===Q.a.INCORRECT_PAYLOAD?Q.a.INCORRECT_PAYLOAD:Q.a.NETWORK_FAILURE),Object(F.b)(e.t0);case 24:h(();case 25:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),[M,x,L,P,l]),B=Object(u.useCallback)((function(e){var t=e.payload.locale,n=e.promise;D({locale:t,userInitiated:!1,promise:n})}),[D]);Object(S.a)(J,B),g.current||(g.current=!0,D({locale:p,shouldSyncWithBackend:!1}));var V=Object(u.useMemo)((function(){var e,t=Object(T.b)(p),n=t.language,r=t.direction;return Object(c.a)(Object(c.a)({},null!==(e=j.localeData)&&void 0!==e?e:{}),{},{defaultLocale:y,locale:p,language:n,direction:r,localeDataLoading:j.localeDataLoading,changeLocale:D})}),[y,p,D,j]);return w()(j.localeData)?null:Object(Z.jsx)(ee.Provider,{value:V},Object(Z.jsx)(b.e,{defaultLocale:y,locale:V.reactIntlLocale,messages:V.messages},e.children))},ae=function(e){return function(t){return Object(Z.jsx)(ee.Consumer,null,()}};ee.Consumer},697:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4);,698:function(e,t,n){"use strict";var r=n(357),a=n(953);t.a=function(){var e=Object(r.useContext)(a.a),t=Object(r.useRef)(null);return Object(r.useEffect)((,[]),Object(r.useCallback)((function(n){t.current=n.current,t.current&&e.addPublisher(t.current)}),[e])}},699:701:702:function(e,t,n){"use strict";n(53),n(12),n(80),n(7),n(54),n(381);var r=n(1191),a=n.n(r),c={},o=0,i=t.a=,703:function(e,t,n){n(3)({target:"String",proto:!0},{repeat:n(961)})},704:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));n(127);var r=["video/mp4","video/quicktime"],a=["audio/mp3","audio/x-mp3","audio/mpeg","audio/x-mpeg","audio/mpeg3","audio/x-mpeg-3"],c=[].concat(a,["audio/wav","audio/x-wav","audio/wave","audio/x-wave","audio/vnd.wave"]),o=["image/jpeg","image/png","image/gif"],i=["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/onenote","application/json"]},733:function(e,t,n){"use strict";n.d(t,"f",(function(){return U})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return T})),n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return D}));var r=n(396),a=n(492),c=n(404),o=n(647),i=n(367),s=n(368),u=n(427),l=n(426),f=n(2123),b=n(2021),d=Object(f.a)("height"),p=Object(f.a)("width"),v=Object(f.a)("url"),O=Object(f.a)("fileToken"),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);eturn Object(s.a)(n,[{key:"setHeight",value:function(e){return this.set(d,e)}},{key:"setWidth",value:function(e){return this.set(p,e)}},{key:"setUrl",value:function(e){return this.set(v,e)}},{key:"setFileToken",value:function(e){return e?this.set(O,e):this}}]),n}(o.a);j.getUrl=Object(b.a)(v);var h=n(420),g=n.n(h),m=Object(f.a)("title"),x=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setType(r.c.IMAGE),a}return Object(s.a)(n,[{key:"setTitle",value:function(e){return this.set(m,e)}}]),n}(j);function y(e){return(new x).setHeight(e.height).setWidth(e.width).setUrl(e.url).setTitle(e.title).build()}var I=Object(f.a)("previewImageUrl"),w=Object(f.a)("title"),k=Object(f.a)("previewFileToken"),E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setType(r.c.VIDEO),a}return Object(s.a)(n,[{key:"setPreviewImageUrl",value:function(e){return this.set(I,e)}},{key:"setTitle",value:function(e){return this.set(w,e)}},{key:"setPreviewImageToken",value:function(e){return e?this.set(k,e):this}}]),n}(j);function C(e){return(new E).setUrl(e.url).setHeight(e.height).setWidth(e.width).setPreviewImageUrl(e.previewImageUrl).setTitle(e.title).build()}function T(e){var t,n=e.chatMessage,r=e.url,o=e.token,i=a.a.getAttachment(c.a.getMessagePayload(n));t=o?new E(i).setPreviewImageToken(o).build():new E(i).setPreviewImageUrl(r).build();var s=new a.a(c.a.getMessagePayload(n)).setAttachment(t).build();return new c.a(n).setMessagePayload(s).build()}function S(e){return(new x).setHeight(e.height).setWidth(e.width).setUrl(e.previewImageUrl).build()}E.getPreviewImageUrl=Object(b.a)(I);var _=Object(f.a)("title"),A=Object(f.a)("documentType"),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setType(r.c.DOCUMENT),a}return Object(s.a)(n,[{key:"setTitle",value:function(e){return this.set(_,e)}},{key:"setDocumentType",value:function(e){return this.set(A,e)}}]),n}(j);function R(e){return(new N).setUrl(e.url).setTitle(e.title).setDocumentType(e.documentType).build()}var P=Object(f.a)("title"),L=Object(f.a)("mimeType"),M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setType(r.c.AUDIO),a}return Object(s.a)(n,[{key:"setTitle",value:function(e){return this.set(P,e)}},{key:"setMimeType",value:]),n}(j);function D(e){return(new M).setUrl(e.url).setTitle(e.title).setMimeType(e.mimeType).build()}function U(e){var t=e.chatMessage,n=e.url,i=e.token,s=a.a.getAttachment(c.a.getMessagePayload(t));if(!function(e){return g()(r.b,o.a.getType(e))}(s))return t;var u=new j(s);i&&u.setFileToken(i),u.setUrl(i?void 0:n);var l=new a.a(c.a.getMessagePayload(t)).setAttachment(u.build()).build();return new c.a(t).setMessagePayload(l).build()}},735:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return _}));var r,a=n(128),c=n(27),o=(n(12),n(130),n(127),n(357)),i=n.n(o),s=n(955),u=n.n(s),l=n(365),f=n(392),b=n.n(f),d=n(953),p=n(847),v=n(202),O=n.n(v),j=n(374),h=n(440),g=function(){var e=Object(j.a)();return!!O()(h.a.getUserPreferences(e),"enableSoundNotification")},m=n(380),x=n(503),y=function(e){return Object(x.e)(Object(m.b)(e))},I=n(1179),w=n(382),k=n(410),E=n(358),C={MESSAGE:"MESSAGE",AGENT_ASSIGNMENT:"AGENT_ASSIGNMENT",CALL:"CALL"},T=i.a.createContext({play:b.a,pause:b.a}),S=(r={},Object(c.a)(r,C.MESSAGE,"https://sprcdn-assets.sprinklr.com/738/notification-4de93778-e7e2-403b-9035-46fddfe6df16-1610394477.mp3"),Object(c.a)(r,C.AGENT_ASSIGNMENT,"https://sprcdn-assets.sprinklr.com/787/6279cf0d-c15c-4f6b-8889-d1be2f9c0264-2132784780.mp3"),Object(c.a)(r,C.CALL,"https://sprcdn-assets.sprinklr.com/787/64639b8e-faae-45ad-b7c5-450884c15e2f-2786217496.mp3"),r),_=function(e){var t=e.children,n=Object(l.d)(w.h),r=Object(k.d)(n),c=Object(I.a)({category:"LIVE_CHAT",userId:r}),i=u()({src:"","data-testid":"messageAudio",preload:"none"}),s=Object(a.a)(i,4),f=s[0],b=s[2],v=s[3],O=u()({src:"","data-testid":"callPickedByAgentNotifAudio",preload:"none"}),j=Object(a.a)(O,4),h=j[0],m=j[2],x=j[3],_=u()({src:"",loop:!0,"data-testid":"callAudio",preload:"none"}),A=Object(a.a)(_,4),N=A[0],R=A[2],P=A[3],L=Object(p.a)(),M=function(){var e=Object(l.d)(y).enableSoundNotification.enabled,t=g();return e&&t}(),D=g(),U=Object(o.useCallback)((function(){v.current&&(v.current.src=S.MESSAGE),x.current&&(x.current.src=S.AGENT_ASSIGNMENT),P.current&&(P.current.src=S.CALL)}),[]),F=Object(o.useCallback)((function(e){switch(e){case C.MESSAGE:return M?b.play():Promise.resolve();case C.AGENT_ASSIGNMENT:return m.play();case C.CALL:return R.play()}return Promise.resolve()}),[b,m,R,M]),B=Object(o.useCallback)((function(e){var t=F(e);"object"===typeof t&&t.catch(()}),[F]),G=Object(o.useCallback)((function(e){switch(e){case C.MESSAGE:return b.pause();case C.AGENT_ASSIGNMENT:return m.pause();case C.CALL:return R.pause()}}),[b,m,R]),V=Object(o.useMemo)((function(){return{play:B,pause:G}}),[B,G]);return Object(E.jsx)(T.Provider,{value:V},Object(E.jsx)(d.b,{onClick:U},D&&f,L&&h,L&&N,t))};t.c=T},745:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n(823),a=function(e){var t=e.file,n=e.conversationId,a=e.sender,c=e.inReplyToChatMessageId;return{type:r.b,payload:{file:t,conversationId:n,chatUserId:a,inReplyToChatMessageId:c}}},c=function(e){var t=e.initialMessages,n=e.createCase,a=e.conversationContext,c=e.silent,o=e.assignToUser,i=e.additional;return function(e){return{type:r.c,payload:{initialMessages:t,createCase:n,assignToUser:o,silent:c,conversationContext:a,additional:i},promise:e}}},o=function(e,t){var n=e.conversationId,a=e.externalCaseId;return{type:r.a,payload:{conversationId:n,externalCaseId:a},promise:t}}},747:753:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return C}));var r,a,c=n(27),o=(n(53),n(12),n(80),n(138)),i=n.n(o),s=n(412),u=n.n(s),l=n(650),f=n(396),b=n(754),d=n(597),p=function(e){return function(t){return t.type===e}},v=O=j=h=function(e,t){return j(t,v(e))},g=function(e,t){var n,r=e.cardAttachmentList;return i()(r,(function(e){var r=j(e,t);if(r)return n=r,!1})),n},m=function(e,t){return g(t,v(e))},x=(r={},Object(c.a)(r,l.a.POST_BACK,(function(e,t){var n=e;return n.makeExternalCall?[d.c,n.postBackHandlerType]:[n.postBackHandlerType]})),Object(c.a)(r,l.a.EXTERNAL,(function(e,t){var n=t.attachment;return n.type===f.c.PROGRESS_BAR?["CANCEL"===t.actionId?d.b:d.a]:n.type===f.c.FORM?[b.a.FORM_POST_BACK,d.a]:[b.a.TEXT_POST_BACK,d.a]})),Object(c.a)(r,l.a.CLIENT_ONLY,(function(e,t){return t.attachment.type===f.c.VIDEO_CHAT?[t.actionId]:t.attachment.type===f.c.APPOINTMENT?"FETCH_SLOTS"===t.values.type?[b.a.FETCH_APPOINTMENT_TIME_SLOTS]:"RESERVE_SLOT"===t.values.type?[b.a.RESERVE_APPOINTMENT_TIME_SLOT]:[b.a.APPOINTMENT_POST_BACK]:[]})),r),y=(a={},Object(c.a)(a,f.c.CONTACT_DETAILS_FORM,(function(e,t){return t.submit})),Object(c.a)(a,f.c.FORM,(function(e,t){return t.submit})),Object(c.a)(a,f.c.SECURE_FORM,(function(e,t){return t.submit})),Object(c.a)(a,f.c.FEEDBACK_FORM,(function(e,t){return t.submit})),Object(c.a)(a,f.c.PROGRESS_BAR,(function(e,t){var n=t;return{id:"",title:"",type:l.a.EXTERNAL,params:n.action}})),Object(c.a)(a,f.c.PERSISTENT_MENU,(function(e,t){return j(t,v(e))})),Object(c.a)(a,f.c.CARD,(function(e,t){return j(t,v(e))})),Object(c.a)(a,f.c.RICH_TEXT_CAROUSEL,m),Object(c.a)(a,f.c.PRODUCT_CARD,(function(e,t){return j(t,v(e))})),Object(c.a)(a,f.c.PRODUCT_SHOWCASE_CARD,(function(e,t){return j(t,v(e))})),Object(c.a)(a,f.c.INFO_CARD,(function(e,t){return j(t,v(e))})),Object(c.a)(a,f.c.PRODUCT_BANNER,(function(e,t){return function(e,t){if(e.buttons){var n=O(e.buttons,t);if(n)return n}return g(e,t)}(t,v(e))})),Object(c.a)(a,f.c.PRODUCT_LIST,(function(e,t){return j(t,v(e))})),Object(c.a)(a,f.c.CO_BROWSE_INVITE,(),Object(c.a)(a,f.c.QUICK_SELECT_CARD,h),Object(c.a)(a,f.c.QUICK_SELECT_PILLS,h),Object(c.a)(a,f.c.CAROUSEL,m),Object(c.a)(a,f.c.APPOINTMENT,(function(){return{type:l.a.CLIENT_ONLY,id:"",title:""}})),Object(c.a)(a,f.c.VIDEO_CHAT,(),Object(c.a)(a,f.c.SURVEY,(),a);function I(e,t){var n=y[t.type];if(n)return n(e,t)}function w(e){var t=I(e.actionId,e.attachment);if(t)return function(e,t){var n=x[e.type];return n?n(e,t):[e.type]}(t,e)}var k=function(e){switch(e.type){case f.c.CARD:return!!j(e,p(l.a.EXTERNAL));case f.c.CAROUSEL:return!!g(e,p(l.a.EXTERNAL));case f.c.FORM:return e.submit.type===l.a.EXTERNAL;default:return!1}},E=Object(c.a)({},f.c.SECURE_FORM,(),C=function(e){var t=E[e.attachment.type];if(t)return t(e)}},754:756:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(360),a=Object(r.g)({coBrowseControl:{id:"coBrowseControl",defaultMessage:"Co-browse control"},coBrowseInformation:{id:"coBrowseInformation",defaultMessage:"Co-browse information"},agentViewingYourScreen:{id:"agentViewingYourScreen",defaultMessage:"{agentName} is viewing your screen"},agentControllingYourScreen:{id:"agentControllingYourScreen",defaultMessage:"{agentName} is controlling your screen"},screenSharing:{id:"screenSharing",defaultMessage:"Screen Sharing"},screenInControl:{id:"screenInControl",defaultMessage:"Screen in Control"},stopScreenControl:{id:"stopScreenControl",defaultMessage:"Stop Screen Control"},stopScreenShare:{id:"stopScreenShare",defaultMessage:"Stop Screen Share"},stopCobrowsing:{id:"stopCobrowsing",defaultMessage:"Stop Co-browsing"},allowScreenControl:{id:"allowScreenControl",defaultMessage:"Allow Screen Control"},allowScreenShare:{id:"allowScreenShare",defaultMessage:"Allow Screen Share"},cobrowseRemoteControlConfirmationMessage:{id:"cobrowseRemoteControlConfirmationMessage",defaultMessage:"{agentName} is requesting permission to control your screen. Accepting this will allow them to interact with your screen."},cobrowseFullScreenControlConfirmationMessage:{id:"cobrowseFullScreenControlConfirmationMessage",defaultMessage:"{agentName} is requesting you to share your screen. Accepting this will share your screen."},accept:{id:"accept",defaultMessage:"Accept"},deny:{id:"deny",defaultMessage:"Deny"},settingUpCobrowsing:{id:"settingUpCobrowsing",defaultMessage:"Setting up Co-browsing with {agentName}"},cobrowsingFailed:{id:"cobrowsingFailed",defaultMessage:"Co-browsing Failed"},settingUpWentWrong:{id:"settingUpWentWrong",defaultMessage:"Sorry, something went wrong while setting up. Please try again in sometime."}})},757:function(e,t,n){"use strict";n.d(t,"p",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"m",(function(){return u})),n.d(t,"k",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"l",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return v})),n.d(t,"f",(function(){return O})),n.d(t,"n",(function(){return j})),n.d(t,"o",(function(){return h})),n.d(t,"i",(function(){return g}));var r=n(832);function a(){return{type:r.m,payload:{}}}unction o(){return{type:r.n,payload:{}}}function i(e){return{type:r.g,payload:{messageId:e.messageId,endedByAgent:e.endedByAgent,markCompletedSession:e.markCompletedSession}}}function s(e){return{type:r.h,payload:e}}function u(e){return{type:r.c,payload:e}}function l(e){return{type:r.f,payload:e}}function f(e){return{type:r.a,payload:e}}function b(e){return{type:r.d,payload:e}}function d(e){return{type:r.b,payload:e}}function p(e){return{type:r.e,payload:e}}function v(e){return{type:r.o,payload:e}}function O(e){return{type:r.p,payload:e}}function j(e){return{type:r.k,payload:e}}function h(e){return{type:r.l,payload:e}}var g=function(e){return{type:r.j,payload:e}}},758:820:822:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(368),a=n(367),c=(n(127),n(362),n(140)),o=n(132),i="debug",s="info",u="warning",l="error",f=Object(r.a)((function e(t,n){var r=this,f=n.batch,b=n.skip,d=n.adapter;Object(a.a)(this,e),this.batchLogs=function(){r.batchTimeoutId&&clearTimeout(r.batchTimeoutId),r.batchTimeoutId=window.setTimeout((function(){r.logQueue.length&&(r.logFn(r.logQueue),r.logQueue=[]),r.batchLogs()}),5e3)},this.log=function(e){if(!r.skip){var t=r.adapter(e);return function(e){var t=e.level,n=e.message,r=e.category,a="timeStamp: ".concat(Date.now()," category: ").concat(r," message: ").concat(n);switch(t){case i:Object(c.a)(a);break;case l:Object(o.b)(a);break;case s:console.info(a);break;case u:console.warn(a)}}(t),r.batch?(r.batchTimeoutId||r.batchLogs(),void r.logQueue.push(t)):r.logFn(t)}},this.debug=function(e){r.log(Object.assign(Object.assign({},e),{level:i}))},this.info=function(e){r.log(Object.assign(Object.assign({},e),{level:s}))},this.warning=function(e){r.log(Object.assign(Object.assign({},e),{level:u}))},this.error=this.cleanup=function(){r.batchTimeoutId&&(clearTimeout(r.batchTimeoutId),r.logQueue.length&&r.logFn(r.logQueue))},this.logFn=t,this.logQueue=[],this.batch=!!f,this.skip=b,this.adapter=d,this.batchTimeoutId=null}))},823:833:835:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p}));var r=n(128),a=n(357),c=n.n(a),o=n(365),i=n(592),s=n(642),u=n(439),l=n(4),f=n(358),b="sessionExpiryModal",d=c.a.createContext(null),p=Object(a.memo)((function(e){var t=Object(a.useState)(null),n=Object(r.a)(t,2),c=n[0],p=n[1],v=Object(i.a)(b),O=Object(r.a)(v,2),j=O[0],h=O[1],g=Object(o.c)(),m=Object(l.Q)();return Object(a.useEffect)((function(){var e=s.d.on((function(e){switch(e.type){case s.c:p(e.payload.targetDate);break;case s.b:p(null)}}));return ),[m]),Object(a.useEffect)((function(){if(c)return m&&g({type:u.d}),void h(!0);j&&h(!1)}),[c]),Object(f.jsx)(d.Provider,{value:c},e.children)}));t.c=d},836:function(e,t,n){"use strict";n(201),Object.defineProperty(t,"__esModule",{value:!0});var r=n(357);t.default=function(){var e=r.useRef(!1),t=r.useCallback((function(){return e.current}),[]);return r.useEffect((),t}},840:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(81),a=n(134),c=n(1171);unction i(){return(i=Object(a.a)(Object(r.a)().mark((function e(t){var n,a,o,i,s,u,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,a=t.svgContainer,o=t.onSvgLoad,i=t.onSvgError,s=t.className,e.prev=1,e.next=4,Object(c.a)(n);case 4:u=e.sent,l=u.documentElement.cloneNode(!0),s&&l.setAttribute("class",s),l.setAttribute("style","top:0px;left:0px"),a.appendChild(l),null===o||void 0===o||o(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),null===i||void 0===i||i();case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}},841:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(359),a=n(361),c="header.lg",o=Object(r.a)("div",{target:"e13xym9v0"})((function(e){return{backgroundColor:Object(a.f)("".concat(c,".backgroundColor"),Object(a.f)("header.backgroundColor")(e))(e),backgroundImage:Object(a.f)("".concat(c,".gradients"))(e)}}),";padding:var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) var(--spr-lc-safe-area-bottom) var(--spr-lc-safe-area-left);"),i=Object(r.a)("div",{target:"e13xym9v1"})("border-radius:",Object(a.a)("card.borderRadius"),";background-color:var(--spr-lc-bgc-16);")},842:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(359),a=n(361),c=n(601);var o=32,i="header.lg",s=Object(r.a)("div",{target:"e1b8encq0"})("background-color:",(function(e){return Object(a.f)("".concat(i,".backgroundColor"),Object(a.f)("header.backgroundColor")(e))(e)}),";background-image:",Object(a.f)("".concat(i,".gradients")),";padding:",Object(a.h)("".concat(i,".padding")),";padding-bottom:",(function(e){return o+Object(a.f)("".concat(i,".paddingBottom"))(e)}),"px;height:",(function(e){return e.height||function(e){return Object(c.c)(e)+o}(e)}),"px;transition:",(,";"),u=Object(r.a)("div",{target:"e1b8encq1"})({name:"anqr8i",styles:"width:100%;height:100%;padding:var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) var(--spr-lc-safe-area-bottom) var(--spr-lc-safe-area-left);"})},844:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(362),n(357);var r=n(358);unction c(e){return Object(r.jsx)("svg",a({viewBox:"0 0 14 14","data-icon-name":"Chevron",focusable:"false"},e),Object(r.jsx)("path",{d:"M13.728 4.935a.931.931 0 00-1.316 0L7 10.346l-5.41-5.41a.932.932 0 00-1.318 0 .929.929 0 000 1.315l6.07 6.07a.931.931 0 001.316 0l6.07-6.07a.931.931 0 000-1.315z"}))}},845:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,a=n(379),c=(n(203),n(504)),o=n.n(c);function i(e,t){var n=o()(e);return function(e,t,n){return Object(a.a)(Array(n)).map((function(n,r){return(r+t)%e.length})).map((function(t){return e[t]}))}(n,function(e){return r||(r=Math.floor(Math.random()*e.length)),r}(n),t)}},846:function(e,t,n){"use strict";var r=n(357),a=n(735);n.d(t,"a",(function(){return a.b})),t.b=function(){return Object(r.useContext)(a.c)}},847:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(394),a=n(519),c=function(){var e=Object(r.a)();return!!e&&!!a.a.getCallAccountId(e)}},848:849:850:function(e,t,n){n(7),n(82);var r=n(86);e.exports=,904:function(e,t,n){"use strict";var r=n(359),a=(n(357),n(361)),c=n(387),o=n(369),i=n(360),s=n(358),u=function(e){return Object(s.jsx)("div",{className:"sr-only"},Object(s.jsx)(i.b,Object(o.a)({},e.message,{values:{count:"".concat(e.unreadCount)}})))},l=Object(r.a)("div",{target:"eobaybk0"})("background:var(--spr-lc-bgc-15);color:var(--spr-lc-c-15);font-size:",Object(a.e)("xs"),";font-weight:600;border-radius:50%;");t.a=function(e){return Object(s.jsx)(l,{"aria-live":"polite",className:"center-x-y ".concat(e.className)},Object(s.jsx)(u,{message:1===e.count?c.a.newNotification:c.a.newNotifications,unreadCount:e.count}),(t=e.count)>=10?"9+":t);var t}},907:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return y}));var r=n(379),a=(n(127),n(136),n(574)),c=n.n(a),o=n(138),i=n.n(o),s=n(88),u=n.n(s),l=n(483),f=n.n(l),b=n(140),d=n(927),p=(n(139),n(141),n(435)),v=n(1128),O=n.n(v),j=[p.c,p.m,p.b],h=function(){var e={};return{shouldStoreInCache:function(e){return j.includes(e)},shouldCallSubscriberOnSubscribe:function(t){return j.includes(t)&&t)},setCache:function(t,n){e[t]=n},getCache:function(t){return e[t]}}}(),g={};function m(e,t){var n=t.topic,a=t.subscriber;if(f()(n)&&u()(a)){var c=g[n];g[n]=c?[].concat(Object(r.a)(c),[a]):[a]}h.shouldCallSubscriberOnSubscribe(n)&&a(h.getCache(n))}function x(e,t){var n=t.topic,r=t.subscriber;if(f()(n)&&u()(r)){var a=g[n],o=c()(a,();-1!==o&&(a.splice(o,1),g[n]=a)}}function y(e){var t=e.topic,n=e.payload,r=e.callback,a=g[t];if(n.shouldLogEvent){var c,o,s,u,l=null===n||void 0===n||null===(c=n.request)||void 0===c?void 0:c.conversationId;d.a.info({chatConversationId:l,message:"".concat(l?"".concat(l," : "):"").concat(null!==n&&void 0!==n&&null!==(o=n.response)&&void 0!==o&&o.error?"Error":"Success"," event published - ").concat(t),additionalDetails:{params:null===n||void 0===n?void 0:n.request,result:(null===n||void 0===n||null===(s=n.response)||void 0===s?void 0:s.error)||(null===n||void 0===n||null===(u=n.response)||void 0===u?void 0:u.data),subscriberCount:(null===a||void 0===a?void 0:a.length)||0}})}h.shouldStoreInCache(t)&&h.setCache(t,n),i()(a,(function(e,t){try{e(n,r)}catch(a){Object(b.a)(a)}}))}},910:function(e,t,n){"use strict";var r=n(369),a=n(128),c=n(384),o=(n(127),n(357)),i=n(494),s=n.n(i),u=n(400),l=n(202),f=n.n(l),b=n(375),d=n(840),p=n(359),v=Object(p.a)("div",{target:"e4dggv00"})("border-radius:20px;background-color:",(,";"),O=n(358),j=["name","className","theme","window","css","onLoad"],h=function(e){var t=e.name,n=e.className,i=e.theme,u=(e.window,e.css),l=e.onLoad,b=Object(c.a)(e,j),p=Object(o.useMemo)((function(){return"".concat(t,"_").concat(s()())}),[t]),h=Object(o.useState)(!1),g=Object(a.a)(h,2),m=g[0],x=g[1],y=Object(o.useRef)(null);return Object(o.useEffect)((,[m,l]),Object(o.useEffect)((function(){var e=f()(i,["icons",t]);y.current&&Object(d.a)({svgContainer:y.current,url:e,onSvgLoad:className:"spa full-height full-width"})}),[p,t]),Object(O.jsx)(v,Object(r.a)({ref:y,key:p,className:"spr ".concat(n),css:u,id:p,svgLoaded:m,"data-testid":"Custom header icon"},b))},g=function(e){var t=e.name,n=e.className,r=e.theme,a=e.css,c=e.onClick,i=e.onKeyPress,s=e.alt,u=e.onLoad,l=f()(r,"icons.".concat(t));if(Object(o.useEffect)((,[l,u]),l)return Object(O.jsx)(h,e);var b=s;return Object(O.jsx)(b,{className:n,css:a,onClick:c,onKeyPress:i,"aria-hidden":e["aria-hidden"],focusable:!!e.focusable})};t.a=Object(o.memo)(Object(b.c)((function(e){return Object(O.jsx)(u.FrameContextConsumer,null,(function(t){var n=t.window;return Object(O.jsx)(g,Object(r.a)({},e,{window:n}))}))})))},926:927:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(81),a=n(423),c=n(822),o=n(576),i=new c.a((function(e){return Object(a.__awaiter)(void 0,void 0,void 0,Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((,t)})))}),{batch:!0,adapter:function(e){var t=e.message,n=e.chatConversationId,r=e.additionalDetails;return{logMessage:t,logTime:Date.now(),additionalDetails:r,chatConversationId:n}}})},928:929:943:944:947:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(359),a=n(364),c=Object(r.a)("div",{target:"e18hq32b0"})((,";")},948:function(e,t,n){"use strict";var r=n(128),a=(n(12),n(83),n(357)),c=n(365),o=n(421),i=n(602),s=n(382),u=n(410),l=n(443),f=n(822),b=(new o.a).setUrl("/video-chat/conversation/log/event").setType(l.a.POST).build(),d="AUDIO_CALL",p="VIDEO_CALL";t.a=function(e){var t=e.videoConversationId,n=e.conversationId,o=e.isAudioCall,l=Object(i.a)(b,{ignoreResults:!0}),v=Object(r.a)(l,1)[0],O=Object(a.useCallback)((function(e){var t=Date.now();return e.forEach((function(e){e.offsetTime=t-e.logTime})),v(e)}),[v]),j=Object(c.d)(s.h),h=Object(u.d)(j),g=o?d:p,m=Object(a.useCallback)((function(e){var r=e.message;return{videoConversationId:t,logMessage:"USER: ".concat(r),loggerSnUserId:h,category:g,loggerSnType:"SPRINKLR_LIVE_CHAT",logTime:Date.now(),additionalDetails:{conversationId:n}}}),[n,t,h,g]),x=Object(a.useMemo)((function(){return new f.a(O,{batch:!0,adapter:m,skip:!t})}),[O,m,t]);return Object(a.useEffect)((,[]),x}},949:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(53),n(12),n(130),n(129),n(80);var r=n(383),a=Object(r.a)(()},950:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));var r=n(357),a=n.n(r),c=n(392),o=n.n(c),i=n(1175),s=n(358),u={debug:o.a,info:o.a,error:o.a,warning:o.a},l=a.a.createContext(u),f=function(e){var t=e.videoConversationId,n=e.conversationId,r=e.children,a=Object(i.a)({videoConversationId:t,conversationId:n});return Object(s.jsx)(l.Provider,{value:a},r)}},951:function(e,t,n){"use strict";var r=n(81),a=n(134),c=n(899),o=n(493),i=n(11),s=u=!!o.a.getSessionOrigin(Object(i.a)());t.a={get:function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=s(t),u){e.next=4;break}return e.abrupt("return",c.d.getItem(n));case 4:return e.next=6,c.c.getItem(n);case 6:if(a=e.sent){e.next=16;break}return e.next=10,c.d.getItem(n);case 10:if(!(o=e.sent)){e.next=16;break}return c.d.removeItem(n),e.next=15,c.c.setItem(n,o);case 15:return e.abrupt("return",o);case 16:return e.abrupt("return",a);case 19:return e.prev=19,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",void 0);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return (),set:function(e,t){return u?c.c.setItem(s(e),t):c.d.setItem(s(e),t)},remove:function(e){return u?c.c.removeItem(s(e)):c.d.removeItem(s(e))}}},952:953:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(379),a=(n(12),n(83),n(127),n(205),n(357)),c=n.n(a),o=n(392),i=n.n(o),s=n(415),u=n(358),l=c.a.createContext({addPublisher:i.a,removePublisher:i.a}),f=!1,b="sprappinteract",d=function(e){var t=e.onClick,n=e.children,c=Object(a.useRef)([]),o=Object(a.useCallback)((,[]);Object(a.useEffect)((function(){var e=function(){f=!0,null===t||void 0===t||t(),c.current.forEach((),c.current=[]};return window.addEventListener(b,e),),[t]);var i=Object(a.useMemo)((function(){return{addPublisher:function(e){f||(c.current=[].concat(Object(r.a)(c.current),[e]),e.addEventListener("click",o,{capture:!0}))},removePublisher:function(e){f||(e.removeEventListener("click",o,{capture:!0}),c.current=c.current.filter(())}}}),[o]);return Object(a.useEffect)((function(){var e=Object(s.b)();return Object(s.c)(e)&&i.addPublisher(e.document),function(){Object(s.c)(e)&&i.removePublisher(e.document)}}),[]),Object(u.jsx)(l.Provider,{value:i},n)};t.b=c.a.memo(d)},954:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(357),a=n(1177),c=,955:function(e,t,n){"use strict";n(201),Object.defineProperty(t,"__esModule",{value:!0});var r=n(536).__importDefault(n(1613)).default("audio");t.default=r},956:function(e,t,n){"use strict";var r=n(379),a=n(13),c=(n(53),n(12),n(209),n(129),n(80),n(127),n(205),n(357)),o=n(394),i=n(4),s=n(581),u=new Set([s.a.CONVERSATION,s.a.KNOWLEDGE_BASE,s.a.CONVERSATION_HISTORY]);t.a=function(){var e,t,n,l,f=Object(o.a)(),b=Object(i.j)(),d=null===(e=f.cardConfigs)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.cards,p=(null===(n=f.otherConfigs)||void 0===n||null===(l=n.homeScreen)||void 0===l?void 0:l.conversationCard)||{},v=(null===f||void 0===f?void 0:f.cards)||[],O=Object(c.useMemo)((function(){return[Object(a.a)({type:s.a.CONVERSATION,id:s.a.CONVERSATION},p)].concat(Object(r.a)(v))}),[p,v]);return Object(c.useMemo)((function(){return b?(null!==d&&void 0!==d?d:O).filter((function(e){return u.has(e.type)})):null!==d&&void 0!==d?d:O}),[b,d,O])}},959:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(416),a=function(e,t){var n={conversationId:t};return e?{type:r.db,payload:n}:{type:r.eb,payload:n}}},960:function(e,t,n){"use strict";n.d(t,"h",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return x})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return I}));var r=n(27),a=(n(478),n(12),n(84)),c=n.n(a),o=n(202),i=n.n(o),s=n(694),u=n(428),l=n(396),f=n(831),b=n(431),d=n(693),p=n(386),v=function(e){var t;return t={},Object(r.a)(t,s.a.MIC,!1),Object(r.a)(t,s.a.CAMERA,!1),Object(r.a)(t,s.a.DRAG,!e),Object(r.a)(t,s.a.FULL_SCREEN,e),t},O=j=h=function(e,t){return function(e,t){switch(e.state){case f.a.CALL_INITIATED:case f.a.CALL_STARTING:return t.WAITING;case f.a.CALL_OFFER_ACCEPTED:return t.SETUP;default:return t.JOINED}}(e,t?u.f:u.h)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e?b.a.AUDIO_CALL_JOIN_CTA_CLICKED:b.a.VIDEO_CALL_JOIN_CTA_CLICKED:e?b.a.AUDIO_CALL_JOIN_BACK_CTA_CLICKED:b.a.VIDEO_CALL_JOIN_BACK_CTA_CLICKED},m=x=function(e){return function(t){return(t.type===d.x||t.type===d.e)&&i()(t,"payload.videoConversationId")===e}},y=function(e){return function(t){return(t.type===d.l||t.type===d.e)&&i()(t,"payload.videoConversationId")===e}},I=function(e,t,n){return Object(p.m)(e,t).items.find((function(e){var t;return(null===(t=e.messagePayload.attachment)||void 0===t?void 0:t.type)===l.c.VIDEO_CHAT&&e.messagePayload.attachment.videoChatConversationId===n}))}},961:962:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(13),a=n(128),c=(n(703),n(7),n(82),n(12),n(83),n(1631),n(85),n(19),n(84)),o=n.n(c),i=n(39),s=n.n(i),u=function(e,t){return s()(t,(function(e,t){if(!t)return e;var n="*".repeat(null===t||void 0===t?void 0:t.length);return e.replace(t,n)}),e)},l=function(e){var t=e.text,n=e.maskingConfigs;if(!t)return{};var c=s()(n,(function(e,t){var n;try{n=new RegExp(t.jsRegex,"g")}catch(s){return e}var c=function(e,t,n,c){for(var o=e.exec(t),i=t,s={};o&&0!==o[0].length;)n&&o.groups&&Object.entries(o.groups).forEach((function(e){var t,n=Object(a.a)(e,2),i=n[0],u=n[1];s[i]=null!==(t=s[i])&&void 0!==t?t:[];var l={};if(c){var f=o.index;l={startIndex:f,endIndex:f+u.length-1}}s[i].push(Object(r.a)(Object(r.a)({},l),{},{value:u}))})),i=u(i,o),o=e.exec(i);return{capturedGroups:s,updatedText:i}}(n,e.maskedText,t.saveMaskedData,t.showAgentUnmaskedData),o=c.updatedText,i=c.capturedGroups;return{maskedText:o,maskedValues:Object(r.a)(Object(r.a)({},e.maskedValues),i)}}),{maskedText:t,maskedValues:{}}),i=c.maskedText,l=c.maskedValues;return{maskedText:i,maskedValues:o()(l)?void 0:l}}},963:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));n(12),n(19),n(127);var r,a=n(1084),c=n(533),o=n(444),i=n(519),s=function(e,t){return"".concat(i.a.getParnterId(t),"_").concat(i.a.getAppId(t),"_").concat(o.a.getId(c.a.getChatUser(e)),"_").concat(Date.now(),"_").concat(Math.random().toString(16).substr(2,8))},u=function(e,t){var n=c.a.getChatSessionToken(e),o=s(e,t),i=c.a.getInboxServerUrl(e),u=c.a.getUserInbox(e),l=null===e||void 0===e?void 0:e.fanPublishTopic;return r=new a.a({userName:n,clientId:o,inboxServerUrl:i,userInbox:u,fanPublishTopic:l})},l=function(){return r}}}]);