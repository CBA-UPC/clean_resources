(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([[758],{56463:67074:(e,t,r)=>{var n={"./add_member_controller.js":93008,"./admin_controller.js":32960,"./admin_sidebar_controller.js":84619,"./admin_tabs_controller.js":16216,"./auth_providers_controller.js":5312,"./authentication_form_controller.js":37428,"./autocomplete_controller.js":70507,"./back_controller.js":79374,"./bottom_bar_controller.js":14522,"./browser_notifications_controller.js":94431,"./clipboard_controller.js":16187,"./collapsible_controller.js":94033,"./colorpicker_controller.js":69113,"./comment_controller.js":86840,"./custom_domain_form_controller.js":50721,"./daterange_controller.js":77706,"./download_controller.js":19441,"./dropdown_controller.js":71826,"./emoji_controller.js":84932,"./flash_controller.js":24062,"./form_controller.js":6e4,"./infinity_scroll_controller.js":83723,"./lazy_load_controller.js":22010,"./like_controller.js":62505,"./member_settings_controller.js":72567,"./mobile_controller.js":80916,"./mobile_sidebar_controller.js":72089,"./monthrange_controller.js":17830,"./multiselect_controller.js":46614,"./notification_preferences_controller.js":45344,"./onboardingform_controller.js":42382,"./otp_controller.js":72802,"./popup_controller.js":88643,"./post_controller.js":45593,"./post_form_controller.js":11922,"./profile_image_controller.js":11192,"./profilecard_controller.js":99375,"./react_mount_controller.js":40539,"./recaptcha_controller.js":64023,"./reorder_controller.js":22998,"./reorderparent_controller.js":43522,"./richtext_controller.js":84979,"./select_controller.js":64230,"./share_controller.js":16267,"./signin_controller.js":14746,"./spaces_sidebar_controller.js":13186,"./standard_layout_controller.js":99859,"./stimulus-tabs/tabs_controller.js":69230,"./stripe_controller.js":92254,"./time_controller.js":28277,"./toggle_controller.js":75467,"./trix_attachment_preview_controller.js":25040,"./unread_posts_count_controller.js":18251,"./unsaved_changes_controller.js":84633,"./validation_controller.js":87169,"controllers/add_member_controller.js":93008,"controllers/admin_controller.js":32960,"controllers/admin_sidebar_controller.js":84619,"controllers/admin_tabs_controller.js":16216,"controllers/auth_providers_controller.js":5312,"controllers/authentication_form_controller.js":37428,"controllers/autocomplete_controller.js":70507,"controllers/back_controller.js":79374,"controllers/bottom_bar_controller.js":14522,"controllers/browser_notifications_controller.js":94431,"controllers/clipboard_controller.js":16187,"controllers/collapsible_controller.js":94033,"controllers/colorpicker_controller.js":69113,"controllers/comment_controller.js":86840,"controllers/custom_domain_form_controller.js":50721,"controllers/daterange_controller.js":77706,"controllers/download_controller.js":19441,"controllers/dropdown_controller.js":71826,"controllers/emoji_controller.js":84932,"controllers/flash_controller.js":24062,"controllers/form_controller.js":6e4,"controllers/infinity_scroll_controller.js":83723,"controllers/lazy_load_controller.js":22010,"controllers/like_controller.js":62505,"controllers/member_settings_controller.js":72567,"controllers/mobile_controller.js":80916,"controllers/mobile_sidebar_controller.js":72089,"controllers/monthrange_controller.js":17830,"controllers/multiselect_controller.js":46614,"controllers/notification_preferences_controller.js":45344,"controllers/onboardingform_controller.js":42382,"controllers/otp_controller.js":72802,"controllers/popup_controller.js":88643,"controllers/post_controller.js":45593,"controllers/post_form_controller.js":11922,"controllers/profile_image_controller.js":11192,"controllers/profilecard_controller.js":99375,"controllers/react_mount_controller.js":40539,"controllers/recaptcha_controller.js":64023,"controllers/reorder_controller.js":22998,"controllers/reorderparent_controller.js":43522,"controllers/richtext_controller.js":84979,"controllers/select_controller.js":64230,"controllers/share_controller.js":16267,"controllers/signin_controller.js":14746,"controllers/spaces_sidebar_controller.js":13186,"controllers/standard_layout_controller.js":99859,"controllers/stimulus-tabs/tabs_controller.js":69230,"controllers/stripe_controller.js":92254,"controllers/time_controller.js":28277,"controllers/toggle_controller.js":75467,"controllers/trix_attachment_preview_controller.js":25040,"controllers/unread_posts_count_controller.js":18251,"controllers/unsaved_changes_controller.js":84633,"controllers/validation_controller.js":87169};keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=67074},28729:(e,t,r)=>{var n=r(56463);n.keys().forEach(n)},93008:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"toggleSpaceGroupMemberSelect",value:function(){this.spaceGroupMemberSelectTarget.classList.toggle("disable-element")}},{key:"toggleSpaceMemberSelect",value:function(){this.spaceMemberSelectTarget.classList.toggle("disable-element")}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["spaceMemberSelect","spaceGroupMemberSelect"]},32960:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"toggle",value:function(){this.sendEmailTarget.classList.toggle("hidden")}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["sendEmail"]},84619:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"toggle",value:function(){this.submenuTarget.classList.toggle("hidden"),this.caretTarget.classList.toggle("rotate-90"),this.caretTarget.classList.contains("text-gray-400")?(this.caretTarget.classList.remove("text-gray-400"),this.caretTarget.classList.add("text-gray-300")):this.caretTarget.classList.contains("text-gray-300")&&(this.caretTarget.classList.remove("text-gray-300"),this.caretTarget.classList.add("text-gray-400"))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["submenu","caret"]},16216:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"initialize",value:function(){this.showTab(this.element.dataset.currentTabIndex||0)}},{key:"change",value:function(e){e.preventDefault(),this.index=this.tabTargets.indexOf(e.target.dataset.adminTabsIndex),this.showTab(e.target.dataset.adminTabsIndex)}},{key:"showTab",value:function(e){this.tabPanelTargets.forEach((function(t){t.dataset.adminTabsIndex==e?t.classList.remove("hidden"):t.classList.add("hidden")})),this.tabTargets.forEach((function(t){t.dataset.adminTabsIndex==e?(t.classList.remove("border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300"),t.classList.add("active","border-indigo-500","text-indigo-600")):(t.classList.remove("active","border-indigo-500","text-indigo-600"),t.classList.add("border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300"))}))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["tab","tabPanel"]},5312:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){}},{key:"toggleCustomSignUp",value:function(e){e.target.checked&&!this.customSignUpTarget.checked&&(this.customSignUpTarget.checked=!0,this.customSignUpTarget.dispatchEvent(new Event("change")))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["customSignUp"]},37428:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(67931),i=r(86281);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c="form-control--has-error-v2",u="invisible",d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,n,l=s(d);function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=l.call.apply(l,[this].concat(r))).onFieldKeyUp=function(){var t=e.checkPasswordAreEqual(),r=e.checkPasswordFormat();e.updateFieldsErrorClasses({passwordHasError:!r,confirmationHasError:!t})},e.checkPasswordFormat=function(){return!e.passwordField.value||i.zU.test(e.passwordField.value)},e.checkPasswordAreEqual=e.updateFieldsErrorClasses=function(t){var r=t.passwordHasError,n=void 0!==r&&r,i=t.confirmationHasError,o=void 0!==i&&i,a=e.passwordField,s=e.passwordConfirmationField,l=e.passwordFormatError,d=e.passwordConfirmationError;n&&a.value.length>0?(a.classList.add(c),l.classList.remove(u)):(a.classList.remove(c),l.classList.add(u)),o&&s.value.length>0?(s.classList.add(c),d.classList.remove(u)):(s.classList.remove(c),d.classList.add(u)),n||o?e.saveButton.setAttribute("disabled",!0):e.saveButton.removeAttribute("disabled")},e}return t=d,(r=[{key:"connect",value:function(){this.passwordField=document.getElementById("user_password"),this.passwordConfirmationField=document.getElementById("user_password_confirmation"),this.saveButton=document.getElementById("save-button"),this.passwordField.addEventListener("keyup",this.onFieldKeyUp),this.passwordConfirmationField.addEventListener("keyup",this.onFieldKeyUp),this.passwordFormatError=document.getElementById("password-format-error"),this.passwordConfirmationError=document.getElementById("password-confirmation-error")}},{key:"disconnect",value:])&&o(t.prototype,r),n&&o(t,n),d}(n.Qr)},70507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(91296),i=r.n(n);function o(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,r,n,a=c(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.apply(this,arguments)}return t=u,(r=[{key:"connect",value:function(){this.resultsTarget.hidden=!0,this.inputTarget.setAttribute("autocomplete","off"),this.inputTarget.setAttribute("spellcheck","false"),this.mouseDown=!1,this.onInputChange=i()(this.onInputChange.bind(this),300),this.onResultsClick=this.onResultsClick.bind(this),this.onResultsMouseDown=this.onResultsMouseDown.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onWindowClick=this.onWindowClick.bind(this),this.onKeydown=this.onKeydown.bind(this),this.inputTarget.addEventListener("keydown",this.onKeydown),this.inputTarget.addEventListener("blur",this.onInputBlur),this.inputTarget.addEventListener("input",this.onInputChange),this.resultsTarget.addEventListener("mousedown",this.onResultsMouseDown),this.resultsTarget.addEventListener("mouseover",this.onResultsMouseDown),this.resultsTarget.addEventListener("click",this.onResultsClick),window.addEventListener("click",this.onWindowClick)}},{key:"disconnect",value:function(){this.inputTarget.removeEventListener("keydown",this.onKeydown),this.inputTarget.removeEventListener("focus",this.onInputFocus),this.inputTarget.removeEventListener("blur",this.onInputBlur),this.inputTarget.removeEventListener("input",this.onInputChange),this.resultsTarget.removeEventListener("mousedown",this.onResultsMouseDown),this.resultsTarget.removeEventListener("click",this.onResultsClick),window.removeEventListener("click",this.onInputBlur)}},{key:"sibling",value:function(e){var t=Array.from(this.resultsTarget.querySelectorAll('[role="option"]')),r=this.resultsTarget.querySelector('[aria-selected="true"]'),n=t.indexOf(r),i=e?t[n+1]:t[n-1],o=e?t[0]:t[t.length-1];return i||o}},{key:"select",value:function(e){var t,r=o(this.resultsTarget.querySelectorAll('[aria-selected="true"]'));try{for(r.s();!(t=r.n()).done;){var n=t.value;n.removeAttribute("aria-selected"),n.classList.remove("active")}}catch(i){r.e(i)}finally{r.f()}e.setAttribute("aria-selected","true"),e.classList.add("active"),this.inputTarget.setAttribute("aria-activedescendant",e.id)}},{key:"unselectAll",value:function(){for(var e=this.resultsTarget.getElementsByClassName("search-results__item"),t=0;t<e.length;t++)e[t].classList.remove("active")}},{key:"onKeydown",value:function(e){switch(e.key){case"Escape":this.resultsTarget.hidden||(this.hideAndRemoveOptions(),e.stopPropagation(),e.preventDefault());break;case"ArrowDown":var t=this.sibling(!0);this.unselectAll(),t&&this.select(t),e.preventDefault();break;case"ArrowUp":var r=this.sibling(!1);this.unselectAll(),r&&this.select(r),e.preventDefault();break;case"Tab":var n=this.resultsTarget.querySelector('[aria-selected="true"]');n&&this.commit(n);break;case"Enter":e.preventDefault();var i=this.resultsTarget.querySelector('[aria-selected="true"]');i&&!this.resultsTarget.hidden&&this.commit(i)}}},{key:"onInputBlur",value:,{key:"onWindowClick",value:function(){this.resultsTarget.hidden=!0}},{key:"commit",value:function(e){if("true"!==e.getAttribute("aria-disabled")){e.getElementsByTagName("a")[0].click(),this.resultsTarget.hidden=!0;var t=e.textContent.trim(),r=e.getAttribute("data-autocomplete-value")||t;this.inputTarget.focus(),this.hideAndRemoveOptions(),this.element.dispatchEvent(new CustomEvent("autocomplete.change",{bubbles:!0,detail:{value:r,textValue:t}}))}}},{key:"onResultsClick",value:function(e){if(e.target instanceof Element){var t=e.target.closest('[role="option"]');t&&this.commit(t)}}},{key:"onResultsMouseDown",value:function(e){var t=this;this.mouseDown=!0,this.unselectAll(),e.target.parentNode.classList.add("active"),this.resultsTarget.addEventListener("mouseup",(,{once:!0})}},{key:"clear",value:function(){var e=this.inputTarget.value;e&&""!==e&&(this.inputTarget.value="",this.clearTarget.classList.add("hidden"))}},{key:"onInputChange",value:function(){var e=this.inputTarget.value,t=this.clearTarget.classList.contains("hidden");"v2-search"===this.inputTarget.getAttribute("data-name")&&this.removeAmountEl(),e&&""!==e&&t?this.clearTarget.classList.remove("hidden"):""===e&&this.clearTarget.classList.add("hidden"),this.element.removeAttribute("value"),this.fetchResults()}},{key:"identifyOptions",value:function(){var e,t=0,r=o(this.resultsTarget.querySelectorAll('[role="option"]:not([id])'));try{for(r.s();!(e=r.n()).done;)e.value.id="".concat(this.resultsTarget.id,"-option-").concat(t++)}catch(n){r.e(n)}finally{r.f()}}},{key:"hideAndRemoveOptions",value:,{key:"removeAmountEl",value:function(){var e=this.resultsTarget.parentNode.parentNode.getElementsByClassName("search-results__amount");e.length>0&&e[0].remove()}},{key:"fetchResults",value:function(){var e=this,t=this.inputTarget.value.trim();if(!t||t.length<this.minLength)this.hideAndRemoveOptions();else if(this.src){var r=new URL(this.src,window.location.href),n=new URLSearchParams(r.search.slice(1));n.append("q",t),r.search=n.toString(),this.element.dispatchEvent(new CustomEvent("loadstart"));var i,o=this.inputTarget.getAttribute("data-name"),a=this.element.parentElement,s=a.lastElementChild.firstElementChild,l=document.createElement("div");l.classList.add("trix-preloader","search-preloader"),"v1-search"===o?(i=a.lastElementChild).classList.add("hidden"):"v2-search"===o&&(s.nextSibling.classList.add("search-loading"),this.toggleV2SearchIcon()),a.appendChild(l),fetch(r.toString()).then((function(e){return e.text()})).then((function(t){if(e.resultsTarget.innerHTML=t,"v1-search"===o)i.classList.remove("hidden"),a.getElementsByTagName("svg")[0].classList.remove("hidden");else if("v2-search"===o){s.firstElementChild.classList.remove("search-loading");var r=document.createElement("div");r.classList.add("search-results__amount");var n=(u=t,d=document.createElement("div"),d.innerHTML=u,d).getElementsByTagName("li"),c=n.length;c>=1&&"No results"!==n[0].innerText?(e.resultsTarget.classList.add("has-results"),r.innerHTML=1===c?c+" Result":c+" Results",e.resultsTarget.parentNode.parentNode.appendChild(r)):c<1&&"No results"===n[0].innerText&&e.resultsTarget.classList.remove("has-results")}var u,d;l.remove(),"v2-search"===o&&e.toggleV2SearchIcon();var f=e.resultsTarget.getElementsByTagName("li")[0];f.classList.add("active"),f.setAttribute("aria-selected","true"),e.inputTarget.setAttribute("aria-activedescendant",f.id),e.identifyOptions(),e.resultsTarget.hidden=!1,e.element.dispatchEvent(new CustomEvent("load")),e.element.dispatchEvent(new CustomEvent("loadend"))})).catch(()}}},{key:"toggleV2SearchIcon",value:function(){var e=this.element.parentElement.lastElementChild.firstElementChild.getElementsByClassName("search-modal__search-icon")[0].getElementsByClassName("icon-search")[0];e&&e.classList.toggle("opacity-0")}},{key:"open",value:function(){this.resultsTarget.hidden&&(this.resultsTarget.hidden=!1,this.element.setAttribute("aria-expanded","true"),this.element.dispatchEvent(new CustomEvent("toggle",{detail:{input:this.input,results:this.results}})))}},{key:"close",value:function(){this.resultsTarget.hidden||(this.resultsTarget.hidden=!0,this.inputTarget.removeAttribute("aria-activedescendant"),this.element.setAttribute("aria-expanded","false"),this.element.dispatchEvent(new CustomEvent("toggle",{detail:{input:this.input,results:this.results}})))}},{key:"src",get:function(){return this.data.get("url")}},{key:"minLength",get:function(){var e=this.data.get("min-length");return e?parseInt(e,10):0}}])&&s(t.prototype,r),n&&s(t,n),u}(r(67931).Qr);d.targets=["input","hidden","results","clear"]},79374:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"goBack",value:function(e){e.preventDefault();var t=this.element.dataset.fallbackUrl||"/",r=window.location.href;window.location.href=t,setTimeout((function(){window.location.href==r&&(window.location.href=t)}),500)}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=[]},14522:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){this.homeTarget.classList.contains("active")}},{key:"openHome",value:function(e){e.preventDefault(),this.homeTarget.classList.contains("active")?this.scrollToTop():this.homeTarget.classList.add("active"),this.closeAllDropdowns(),this.markAllExceptInactive(this.homeTarget),this.removeMobileBodyNoscroll()}},{key:"openSearch",value:function(e){e.preventDefault(),this.closeAllDropdowns(),this.searchTarget.classList.add("active"),document.getElementById("search-window-dropdown").classList.remove("hidden"),this.focusSearchInput(),this.markAllExceptInactive(this.searchTarget),this.addMobileBodyNoscroll()}},{key:"openAddPost",value:function(e){this.openHome(e);var t=document.getElementById("sidebar--right__btn-quick-post"),r=document.getElementById("space__action__btn-new-post");t?t.click():r&&r.click()}},{key:"openNotifications",value:function(e){e.preventDefault(),this.closeAllDropdowns(),this.notificationsTarget.classList.add("active"),this.markAllExceptInactive(this.notificationsTarget),this.addMobileBodyNoscroll()}},{key:"openMessages",value:function(e){e.preventDefault(),this.messagesTarget.classList.add("active"),this.markAllExceptInactive(this.messagesTarget),this.addMobileBodyNoscroll()}},{key:"addMobileBodyNoscroll",value:function(){document.body.classList.add("fixed")}},{key:"removeMobileBodyNoscroll",value:,{key:"markAllExceptInactive",value:function(e){var t=[this.searchTarget,this.notificationsTarget,this.homeTarget,this.addPostTarget];this.hasMessagesTarget&&t.push(this.messagesTarget);for(var r=0;r<t.length;r++)t[r]!==e&&t[r].classList.remove("active")}},{key:"scrollToTop",value:,{key:"closeAllDropdowns",value:,{key:"focusSearchInput",value:])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["home","notifications","search","messages","addPost"]},94431:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:,{key:"seekPermission",value:function(){var e=this;"Notification"in window?"granted"===Notification.permission?this.addServiceWorker():"denied"!==Notification.permission&&this.enableNotificationTarget.addEventListener("click",(function(){Notification.requestPermission().then(e.addServiceWorker()),e.notificationPopupTarget.classList.add("hide-notification-popup")})):console.error("This browser does not support desktop notification")}},{key:"addServiceWorker",value:function(){"serviceWorker"in navigator&&(navigator.serviceWorker.register("/serviceworker.js"),navigator.serviceWorker.ready.then((function(e){e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:window.vapidPublicKey}).then((function(e){fetch("/desktop_browsers",{body:JSON.stringify({browser:e.toJSON()}),method:"POST",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}))})).catch((function(e){console.error("Registration failed",":^(",e)})))}},{key:"hideNotificationPermissionPopup",value:function(){this.notificationPopupTarget.classList.add("hide-notification-popup"),fetch("/members/browser_notifications",{method:"PUT",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(){window.location.reload()})).catch(()}},{key:"showNotificationPermissionPopup",value:function(){"Notification"in window?"default"!==Notification.permission||window.location.href.includes("profile?new_state=true")||this.notificationPopupTarget.classList.remove("hide-notification-popup"):console.warn("This browser does not support desktop notifications.")}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["notificationPopup","enableNotification"]},16187:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"copy",value:function(e){e.preventDefault(),this.sourceTarget.select(),document.execCommand("copy")}},{key:"copyText",value:function(){var e=document.createElement("input");e.style="position: absolute; left: -1000px; top: -1000px",e.value=this.element.dataset.source,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"copyWithPrefix",value:function(){var e=document.createElement("input");e.style="position: absolute; left: -1000px; top: -1000px",e.value=(this.element.dataset.prefix?this.element.dataset.prefix:"")+this.sourceTarget.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.sourceTarget.select(),event.preventDefault()}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["source"]},94033:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(67931);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l="group-open",c="group-closed",u=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,r,n,s=a(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),s.apply(this,arguments)}return t=u,(r=[{key:"connect",value:function(){"true"==this.element.dataset.communityMember&&this.blockChildrenTarget.childElementCount>0?"true"==this.element.dataset.collapsed?(this.triangleTarget.classList.remove(l),this.triangleTarget.classList.add(c)):(this.triangleTarget.classList.add(l),this.triangleTarget.classList.remove(c)):(this.triangleTarget.classList.remove(l),this.triangleTarget.classList.add(c))}},{key:"toggleChildrenVisibility",value:function(e){e.preventDefault(),this.blockChildrenTarget.childElementCount>0&&"true"==this.element.dataset.communityMember&&(this.blockChildrenTarget.classList.toggle("hidden"),this.blockChildrenTarget.classList.contains("hidden")?(this.triangleTarget.classList.remove(l),this.triangleTarget.classList.add(c)):(this.triangleTarget.classList.add(l),this.triangleTarget.classList.remove(c)),this.postToggleEndpoint())}},{key:"postToggleEndpoint",value:function(){fetch(this.element.dataset.collapsibleUrl,{body:JSON.stringify(),method:"POST",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}}])&&i(t.prototype,r),n&&i(t,n),u}(n.Qr);u.targets=["trigger","blockChildren","triangle"]},69113:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(42202),i=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:,{key:"initializeColorPicker",value:function(){this.colorPicker=new(i()),this.colorPicker.setColor(this.colorInputTarget.value),this.colorPicker.onChange(this.updateColors.bind(this))}},{key:"loadColorPicker",value:function(){this.colorPicker.appendTo(this.colorPickerTarget)}},{key:"focusColorPickerInput",value:function(){this.colorInputTarget.focus()}},{key:"updateColors",value:function(){this.colorHex=this.colorPicker.getHexString(),this.colorPreviewTarget.style.background=this.colorHex,this.colorInputTarget.value=this.colorHex}},{key:"removeColorPicker",value:function(){this.colorPreviewTarget.style.background=this.colorInputTarget.value,this.colorPicker.remove(),this.initializeColorPicker()}}])&&o(t.prototype,r),n&&o(t,n),c}(r(67931).Qr);c.targets=["colorPicker","colorPreview","colorInput"]},86840:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931),i=r(22837);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"validate",value:function(e){this.element.dataset.buttonClicked=!0,!this.isRichTextProcessing&&this.bodyValue.length||(this.element.dataset.buttonClicked=!1,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},{key:"success",value:function(e){this.bodyTarget.value="";var t,r=e.detail[0].comment_html,n=e.detail[0].post_id,i=e.detail[0].comment.id,o=e.detail[0].parent_comment_id,a=document.querySelector(".post__comments[data-post-id='".concat(n,"'] .infinity_scroll"));if(o){var s=a.getElementsByClassName("comment--".concat(o))[0];s.getElementsByClassName("post__replies")[0]?(t=s.getElementsByClassName("post__replies")[0].lastChild.previousElementSibling).insertAdjacentHTML("afterend",r):(t=s.getElementsByClassName("post__content")[0]).insertAdjacentHTML("afterend","<div class='post__replies'>"+r+"</div>")}else 0!=a.childElementCount?(t=a.lastChild.previousElementSibling).insertAdjacentHTML("afterend",r):((t=a).parentElement.classList.remove("hidden"),t.innerHTML=r);this.element.dataset.buttonClicked=!1;var l=this.bodyTarget.parentNode.parentNode.parentNode;l.classList.add("short"),!o&&l.classList.contains("fixed-bottom")&&(location.hash="#comment_"+i),a.getElementsByClassName("comment--".concat(i))[0].classList.add("just-added"),window.loadOembed()}},{key:"isRichTextProcessing",get:,{key:"bodyValue",get:function(){return this.bodyTarget.value}},{key:"addFixedClass",value:function(){var e=document.getElementsByClassName("main__footer")[0];if(e){var t=e.getElementsByClassName("post__reply")[0],r=document.getElementsByClassName("post__post")[0];e.getBoundingClientRect().top+t.clientHeight-18>=window.innerHeight?(t.classList.add("fixed-bottom"),t.style.width=r.offsetWidth+"px"):(t.classList.remove("fixed-bottom"),t.style.width=null)}else window.removeEventListener("resize",this.addFixedClass),window.removeEventListener("scroll",this.addFixedClass)}},{key:"openShortForm",value:function(e){if("true"==this.element.dataset.isLoggedIn){var t=e.target.parentNode.parentNode.parentNode;t.classList.remove("short"),t.getElementsByTagName("trix-editor")[0].focus()}else window.location=this.element.dataset.signInPath+"?alert=Hey,+there!+%20+You+need+to+sign+in+to+write+a+comment."}},{key:"closeShortForm",value:function(e){this.element.dataset.buttonClicked||setTimeout((function(){document.activeElement.classList.contains("btn-primary")||document.activeElement.classList.contains("trix-content")||document.activeElement.parentElement.classList.contains("trix-content")||document.activeElement.classList.contains("trix-button")||-1!=document.activeElement.parentElement.className.indexOf("trix-dialog")||e.target.parentNode.parentNode.parentNode.classList.add("short")}),1)}},{key:"toggleReplyForm",value:function(e){var t,r;if(e.preventDefault(),e.target.parentElement.dataset.parentCommentId?(t=document.getElementById("form-reply-to-parent-"+e.target.parentElement.dataset.parentCommentId),r=e.target.parentElement.dataset.replyToName):e.target.dataset.parentCommentId?(t=document.getElementById("form-reply-to-parent-"+e.target.dataset.parentCommentId),r=e.target.dataset.replyToName):t=this.replyFormTarget,t.classList.contains("hidden")){t.classList.remove("hidden");var n=t.getElementsByTagName("trix-editor")[0],i=n.getBoundingClientRect().top+window.pageYOffset-200;window.scrollTo({top:i,behavior:"smooth"}),n.editor.setSelectedRange([0,1e4]),n.editor.deleteInDirection("backward"),n.focus(),n.editor.setSelectedRange([0,0]),r&&""!=r&&this.initializeReplyFormWithMention(n,r)}else t.classList.add("hidden")}},{key:"initializeReplyFormWithMention",value:function(e,t){fetch("/users/mentions.json?query=".concat(t,"&is_private_space=").concat(e.dataset.isPrivateSpace,"&space_id=").concat(e.dataset.spaceId)).then((function(e){return e.json()})).then((function(r){var n;r.forEach(();var o=new i.default.Attachment({content:n.content,contentType:"mention",sgid:n.sgid});e.editor.insertAttachment(o),e.editor.insertString(" ")}))}}])&&o(t.prototype,r),n&&o(t,n),c}(n.Qr);c.targets=["replyForm","body"]},50721:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=r(16244),c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,n,s=a(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).validateDomain=function(){var t=l.parse(e.customDomainTarget.value);l.isValid(e.customDomainTarget.value)?(e.customDomainTarget.classList.remove("invalid-cname"),e.customDomainTarget.classList.add("valid-cname"),e.customHostTarget.classList.remove("host-placeholder"),null==t.subdomain?(e.customHostTarget.innerText="www",e.rootDomainWarningTarget.style.display="block"):(e.customHostTarget.innerText=t.subdomain,e.rootDomainWarningTarget.style.display="none")):(e.customDomainTarget.classList.remove("valid-cname"),e.customDomainTarget.classList.add("invalid-cname"),e.rootDomainWarningTarget.style.display="none",e.customHostTarget.classList.add("host-placeholder"),e.customHostTarget.innerText="my-custom-subdomain")},e}return t=c,(r=[{key:"connect",value:])&&i(t.prototype,r),n&&i(t,n),c}(n.Qr);c.targets=["customDomain","customHost","rootDomainWarning"]},77706:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(78527),i=r(67931),o=r(82255);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,r,i,c=l(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return t=u,(r=[{key:"connect",value:function(){this.element.dataset.timeSelect?(0,n.default)(this.element,{enableTime:!0,dateFormat:"F j, Y G:i K",maxDate:"today"}):(0,n.default)(this.element,{mode:"range",dateFormat:"j M Y",maxDate:"today",onClose:function(e){if("URLSearchParams"in window){var t=new URLSearchParams(window.location.search);t.set(this.element.dataset.minDateParam,(0,o.L)(e[0]).replace(/\//g,"-")),t.set(this.element.dataset.maxDateParam,(0,o.L)(e[1]).replace(/\//g,"-")),window.location.search=t.toString()}}.bind(this)})}}])&&a(t.prototype,r),i&&a(t,i),u}(i.Qr);u.targets=["dateInput"]},19441:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){var e=this,t=this.element,r=this.element,n=r.href,i=r.dataset.fileName;t.addEventListener("click",()}},{key:"download",value:function(e,t){fetch(e).then((function(e){return e.blob()})).then((function(e){var r=document.createElement("a");r.href=URL.createObjectURL(e),r.setAttribute("download",t),r.click()}))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},71826:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931),i=r(34128);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:,{key:"toggle",value:function(){this.menuTarget.classList.toggle(this.toggleClass)}},{key:"show",value:function(){this.menuTarget.classList.remove(this.toggleClass)}},{key:"hide",value:function(e){!1!==this.element.contains(e.target)||this.menuTarget.classList.contains(this.toggleClass)||this.menuTarget.classList.add(this.toggleClass)}},{key:"hideModal",value:function(e){this.menuTarget.firstElementChild.contains(e.target)||this.menuTarget.classList.add(this.toggleClass)}},{key:"optionSelect",value:function(e){var t,r,n,o=this,a=(t={},r=this.element.dataset.fieldName,n=e.target.dataset.sort,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t);(0,i.t5)(this.element.dataset.onOptionChangeUrl,{method:"PATCH",body:JSON.stringify(a)}).then(()}}])&&o(t.prototype,r),n&&o(t,n),c}(n.Qr);c.targets=["menu"]},84932:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r(67294),i=r(48386),o=r(80792),a=r(73935),s=r(67931),l=r(20695),c=r(93583),u=r(85893);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,s,b=h(y);function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=b.call.apply(b,[this].concat(r))).unmountComponent=e}return t=y,r=[{key:"connect",value:function(){var e=this,t=(0,c.z)(),r=t.emojiUseNative,s=t.emojiSetName,m=[{name:"Hash Prefix",short_names:["hash_prefix"],text:"#",native:"#",emoticons:["#"],keywords:["hash"],imageUrl:(0,l.aP)("app-assets/hash.svg"),customCategory:"Hash"},{name:"None",short_names:["none"],text:"",native:"",emoticons:["<span class='emoji-picker__placeholder'>Select icon \ud83d\udc47</span>"],keywords:[""],imageUrl:(0,l.aP)("app-assets/no-entry.png"),customCategory:"None"}],p=function(t){return(0,n.createElement)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({custom:m,data:i,emoji:e.element.dataset.defaultEmoji,native:r,set:s,onSelect:e.onSelect.bind(e),title:e.element.dataset.title,showPreview:!0,showSkinTones:!0,theme:"light",recent:[e.element.dataset.defaultEmoji],i18n:{categories:{recent:"Default"}}},t))};this.picker=document.createElement("emoji-picker"),this.picker.setAttribute("class","hidden"),this.pickerElement=this.element.appendChild(this.picker),this.toggleClass=this.data.get("class")||"hidden",a.render((0,u.jsx)(p,{}),this.pickerElement),document.addEventListener("turbolinks:before-cache",this.unmountComponent)}},{key:"disconnect",value:function(){document.removeEventListener("turbolinks:before-cache",this.unmountComponent)}},{key:"toggle",value:function(){this.pickerElement.classList.toggle(this.toggleClass),this.element.getElementsByClassName("emoji-mart-search")[0].getElementsByTagName("input")[0].focus()}},{key:"hide",value:function(){!1!==this.element.contains(event.target)||this.pickerElement.classList.contains(this.toggleClass)||this.pickerElement.classList.add(this.toggleClass)}},{key:"onSelect",value:function(e){var t=e.native?e.native:e.emoticons[0];this.selectorTarget.innerHTML=t,e.native?this.inputTarget.value=t:this.inputTarget.value="",this.pickerElement.classList.add(this.toggleClass)}}],r&&m(t.prototype,r),s&&m(t,s),y}(s.Qr);y.targets=["selector","input"]},24062:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(76030);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,s,l=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:function(){var e=this,t=document.querySelector(this.data.get("height"));t&&(this.element.style.height="".concat(t.clientHeight,"px"));var r=this.element.clientHeight,i=location.href.split("?")[0];window.history.pushState("object",document.title,i),(0,n.Z)({targets:this.element,translateY:[{value:-r,duration:0},{value:0,duration:400,easing:"easeOutElastic"},{value:-r,duration:350,delay:2500,easing:"easeInQuad"}],complete:)}}])&&i(t.prototype,r),s&&i(t,s),c}(r(67931).Qr)},6e4:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(31304),i=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"previewImage",value:function(){var e=this.fileTarget.files[0],t=this.previewTarget,r=new FileReader;t.style.display="block",r.onloadend=function(){t.src=r.result},e?r.readAsDataURL(e):t.src="",this.buttonTarget.innerHTML=this.buttonTarget.dataset.buttonText}},{key:"nameToSlug",value:function(){this.outputSlugTarget.value=i()(this.inputNameTarget.value,{replacement:"-",remove:/[*+~.;()'"!:@]/g,lower:!0})}},{key:"selfToSlug",value:function(){this.outputSlugTarget.value=i()(this.outputSlugTarget.value,{replacement:"-",remove:/[*+~.;()'"!:@]/g,lower:!0})}},{key:"deleteImage",value:function(e){var t=this;e.preventDefault(),fetch(this.element.dataset.deleteImagePath,{method:"DELETE",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.success&&(t.previewTarget.src="",t.previewTarget.classList.add("hidden"),t.removeImageButtonTarget.remove(),t.buttonTarget.innerHTML=t.element.dataset.btnUpdateText,t.buttonTarget.parentElement.classList.remove("btn-half"),t.buttonTarget.parentElement.classList.add("btn-full"))}))}}])&&o(t.prototype,r),n&&o(t,n),c}(r(67931).Qr);c.targets=["preview","file","inputName","outputSlug","button","removeImageButton"]},83723:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(91296),i=r.n(n),o=r(67931);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,r,n,o=l(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o.apply(this,arguments)}return t=c,(r=[{key:"initialize",value:function(){this.page=2,this.url=new URL(this.element.dataset.url)}},{key:"connect",value:function(){var e=this;this.debouncedScrollHandler=i()((function(){if(!e.loading&&e.hasFooterTarget){var t=e.footerTarget.getBoundingClientRect(),r=window.innerHeight,n=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;r-t.top>-1e3&&!n&&e.fetchNewPage()}}),50),this.debouncedScrollHandler(),document.addEventListener("turbolinks:load",this.debouncedScrollHandler),document.addEventListener("turbolinks:click",this.debouncedScrollHandler),window.addEventListener("scroll",this.debouncedScrollHandler,{passive:!0})}},{key:"disconnect",value:function(){this.hasFooterTarget&&(window.removeEventListener("scroll",this.debouncedScrollHandler),document.removeEventListener("turbolinks:load",this.debouncedScrollHandler),document.removeEventListener("turbolinks:click",this.debouncedScrollHandler),this.footerTarget.classList.add("invisible"))}},{key:"loadMore",value:,{key:"getUrl",value:function(){return this.url.searchParams.set("page",this.page),this.url.href}},{key:"setLoadingState",value:function(){this.loading=!0,this.buttonTarget.classList.add("invisible"),this.loaderTarget.classList.remove("invisible")}},{key:"resetLoadingState",value:,{key:"fetchNewPage",value:function(){var e=this;this.loading||this.element.dataset.lastPageReached||(this.setLoadingState(),fetch(this.getUrl()).then((function(e){return e.json()})).then((function(t){var r=t.content,n=t.hasNextPage;e.hasContentTarget?e.contentTarget.insertAdjacentHTML("beforeend",r):e.footerTarget.insertAdjacentHTML("beforebegin",r),e.page++,n?e.resetLoadingState():(e.element.dataset.lastPageReached=!0,e.disconnect())})))}}])&&a(t.prototype,r),n&&a(t,n),c}(o.Qr);u.targets=["footer","loader","button","content"]},22010:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(64687),i=r.n(n);function o(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,l,"next",e)}function l(e){o(a,n,i,s,l,"throw",e)}s(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,r,n,o=c(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).loadData=a(i().mark((function t(){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.data.get("url"),t.next=3,fetch(r);case 3:if(!(n=t.sent).ok){t.next=8;break}return t.next=7,n.text();case 7:e.element.innerHTML=t.sent;case 8:case"end":return t.stop()}}),t)}))),e}return t=u,(r=[{key:"connect",value:function(){this.loadData()}}])&&s(t.prototype,r),n&&s(t,n),u}(r(67931).Qr)},62505:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931),i=r(79253);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"like",value:function(e){e.preventDefault(),this.likeCount=parseInt(this.element.dataset.likeCount),this.incremented="true"==this.element.dataset.incremented,this.type=this.element.dataset.type,this.id=parseInt(this.element.dataset.id),this.incremented?(this.likeCount--,"comment"==this.element.dataset.context?(this.performCommentDecrements(),this.removeUserAvatar()):"list"==this.element.dataset.context?this.performListDecrements():(this.performPostDecrements(),this.likeCount<3&&this.removeUserAvatar()),this.postDecrementLike(this.id,this.type),this.removeLikedClass()):(this.likeCount++,"comment"==this.element.dataset.context?(this.performCommentIncrements(),this.showUserAvatar()):"list"==this.element.dataset.context?this.performListIncrements():(this.performPostIncrements(),this.likeCount<4&&this.showUserAvatar()),this.postIncrementLike(this.id,this.type),this.addLikedClass()),this.element.dataset.incremented=!this.incremented,this.element.dataset.likeCount=this.likeCount}},{key:"postIncrementLike",value:function(e,t){fetch(this.element.dataset.likeUrl,{body:JSON.stringify({user_like:{user_likeable_id:e,user_likeable_type:t}}),method:"POST",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}},{key:"postDecrementLike",value:function(e,t){fetch(this.element.dataset.likeUrl,{body:JSON.stringify({user_like:{user_likeable_id:e,user_likeable_type:t}}),method:"DELETE",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}},{key:"performCommentIncrements",value:function(){1==this.likeCount?this.incrementOneCommentLike():this.likeCount>1&&this.incrementCommentLikes()}},{key:"performCommentDecrements",value:,{key:"performPostIncrements",value:function(){1==this.likeCount?this.addLikedByCurrentUser():2==this.likeCount?this.addAndOther():this.likeCount>2&&this.incrementAndOther()}},{key:"performPostDecrements",value:function(){0==this.likeCount?this.resetLikeWrapperContent():1==this.likeCount?this.removeAndOther():this.likeCount>1&&this.decrementAndOther()}},{key:"performListIncrements",value:function(){this.incrementCount()}},{key:"performListDecrements",value:function(){this.decrementCount()}},{key:"addLikedClass",value:function(){for(var e=0;e<this.likeButtonTargets.length;e++)this.likeButtonTargets[e].classList.add("liked")}},{key:"removeLikedClass",value:,{key:"showUserAvatar",value:function(){this.currentUserAvatarTarget.style.display="inline"}},{key:"removeUserAvatar",value:,{key:"resetLikeWrapperContent",value:,{key:"resetLikeCountContent",value:,{key:"addLikedByCurrentUser",value:function(){this.likedByStringTarget.style.display="inline",this.likedByWrapperTarget.classList.remove("no-padding"),this.likedByStringTarget.innerHTML=this.element.dataset.likedByString+" "+this.element.dataset.currentUserName}},{key:"addAndOther",value:function(){this.likedByStringTarget.style.display="inline",this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML="and 1 "+this.element.dataset.otherString,this.likeCountTarget._tippy||(0,i.ZP)(this.likeCountTarget),-1==this.likedByStringTarget.innerHTML.indexOf(this.element.dataset.currentUserName)&&this.updateTooltip(this.likeCountTarget,this.likeCountTarget.dataset.tippyContent+this.element.dataset.currentUserName,this.element.dataset.currentUserName)}},{key:"removeAndOther",value:function(){this.likedByStringTarget.style.display="none",this.likeCountTarget.innerHTML="Liked by 1 "+this.element.dataset.otherString,this.likeCountTarget._tippy.destroy()}},{key:"incrementAndOther",value:function(){var e=this.likeCount-1;this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML=this.element.dataset.andString+" "+e+" "+this.element.dataset.othersString,this.likeCountTarget._tippy||(0,i.ZP)(this.likeCountTarget),this.updateTooltip(this.likeCountTarget,this.likeCountTarget.dataset.tippyContent+this.element.dataset.currentUserName,this.element.dataset.currentUserName)}},{key:"decrementAndOther",value:function(){var e=this.likeCount-1;this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML=this.element.dataset.andString+" "+e+" "+this.element.dataset.othersString,this.updateTooltip(this.likeCountTarget,this.likeCountTarget.dataset.tippyContent.replace(this.element.dataset.currentUserName+"<br>",""))}},{key:"incrementOneCommentLike",value:function(){this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML="1 like",this.updateTooltip(this.likeCountTarget,this.likeCountTarget.dataset.tippyContent+this.element.dataset.currentUserName,this.element.dataset.currentUserName)}},{key:"incrementCommentLikes",value:function(){this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML=this.likeCount+" likes",this.updateTooltip(this.likeCountTarget,this.likeCountTarget.dataset.tippyContent+this.element.dataset.currentUserName,this.element.dataset.currentUserName)}},{key:"decrementCommentLikes",value:function(){this.likeCountTarget.style.display="inline",this.updateTooltip(this.likeCountTarget,this.likeCountTarget.dataset.tippyContent.replace(this.element.dataset.currentUserName+"<br>",""),this.element.dataset.currentUserName),this.likeCountTarget.innerHTML=this.likeCount+" likes"}},{key:"updateTooltip",value:function(e,t,r){if(-1==e.dataset.tippyContent.indexOf(r)){var n=e._tippy;n&&n.setContent(t)}}},{key:"incrementCount",value:function(){var e=this.likeCount;this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML=e}},{key:"decrementCount",value:function(){var e=this.likeCount;this.likeCountTarget.style.display="inline",this.likeCountTarget.innerHTML=e}},{key:"expandCommentForm",value:function(){var e=document.getElementById("comment-form"),t=e.querySelector("trix-editor"),r=e.classList.contains("short");e.scrollIntoView(),setTimeout((,100),r&&e.classList.remove("short")}}])&&o(t.prototype,r),n&&o(t,n),c}(n.Qr);c.targets=["likeButton","likeCount","likeWrapper","likedByString","currentUserAvatar","likedByWrapper"]},72567:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"memberPublicUid",get:function(){return this.data.get("member-publicuid")}},{key:"openMemberProfileEdit",value:function(){var e=this.memberPublicUid;this.element.dispatchEvent(new CustomEvent("open-member-profile-edit",{detail:{memberPublicUid:e},bubbles:!0}))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},80916:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:,{key:"toggleNav",value:function(e){e.preventDefault(),this.sidebar.classList.contains(this.isOpenClass)?this.closeNav():this.openNav()}},{key:"openNav",value:function(){this.sidebar.classList.add(this.isOpenClass),document.body.classList.add(this.isOpenClass),document.querySelector(".mobile-overlay").addEventListener("click",this.closeNav)}},{key:"closeNav",value:function(){document.querySelector("[data-target='nav']").classList.remove("is-open"),document.body.classList.remove("is-open"),document.querySelector(".mobile-overlay").removeEventListener("click",this.closeNav)}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},72089:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(29933),i=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:function(){var e=this;this.slideout=new(i())({touch:!1,panel:this.panelTarget,menu:this.menuTarget,padding:window.outerWidth-50,tolerance:70}),window.mobileDrawer=this.slideout,this.menuZIndex=this.menuTarget.style.zIndex;var t=this.slideout.on("beforeopen",(function(){this.panel.classList.add("panel-open")})).on("open",(function(){this.panel.addEventListener("click",t)})).on("beforeclose",(function(){this.panel.classList.remove("panel-open")})).on("close",()}},{key:"disconnect",value:,{key:"onOverlayOpen",value:function(e){e.preventDefault(),this.menuTarget.style.zIndex=1e3}},{key:"onOverlayClose",value:function(e){e.preventDefault(),this.menuTarget.style.zIndex=this.menuZIndex,this.close()}},{key:"close",value:,{key:"toggle",value:function(e){e.preventDefault(),this.slideout.toggle()}},{key:"open",value:])&&o(t.prototype,r),n&&o(t,n),c}(r(67931).Qr);c.targets=["menu","panel"]},17830:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(78527),i=r(70592),o=r.n(i),a=r(67931),s=r(82255);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,r,i,a=m(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){var e={mode:"range",dateFormat:"j M Y",maxDate:"today",plugins:[new(o())({shorthand:!0,dateFormat:"M Y",altFormat:"F Y"})]};(0,n.default)(this.monthInputRangeToTarget,c(c({},e),{},{onClose:function(e){if("URLSearchParams"in window){var t=(0,s.q)(e[0]),r=(0,s.L)(new Date(this.monthInputRangeFromTarget.value)).replace(/\//g,"-"),n=(0,s.L)(t).replace(/\//g,"-");this.setURLParams(this.monthInputRangeToTarget,r,n)}}.bind(this)})),(0,n.default)(this.monthInputRangeFromTarget,c(c({},e),{},{onClose:function(e){if("URLSearchParams"in window){var t=(0,s.q)(new Date(this.monthInputRangeToTarget.value)),r=(0,s.L)(e[0]).replace(/\//g,"-"),n=(0,s.L)(t).replace(/\//g,"-");this.setURLParams(this.monthInputRangeFromTarget,r,n)}}.bind(this)}))}},{key:"setURLParams",value:function(e,t,r){var n=new URLSearchParams(window.location.search);n.set(e.dataset.minDateParam,t),n.set(e.dataset.maxDateParam,r),window.location.search=n.toString()}}])&&d(t.prototype,r),i&&d(t,i),l}(a.Qr);h.targets=["monthInputRangeTo","monthInputRangeFrom"]},46614:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(49466);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,s,l=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:function(){new n.Z({select:this.slimSelectTarget,placeholder:this.element.dataset.placeholder,searchText:this.element.dataset.searchText,searchPlaceholder:this.element.dataset.searchPlaceholder?this.element.dataset.searchPlaceholder:"",showContent:this.element.dataset.direction?this.element.dataset.direction:"up",addable:function(e){return!!this.element.dataset.addable&&{text:e,value:e}}.bind(this),allowDeselect:!0,closeOnSelect:!!this.element.dataset.disableAutoReopen&&this.element.dataset.disableAutoReopen,limit:!!this.element.dataset.limit&&this.element.dataset.limit})}}])&&i(t.prototype,r),s&&i(t,s),c}(r(67931).Qr);l.targets=["slimSelect"]},45344:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"setAllInAppNotificationSetting",value:function(e){var t=e.target.value;this.inAppNotificationSettingTargets.map((function(e){""!=t&&(e.value=t)}))}},{key:"setAllMobileNotificationSetting",value:function(e){var t=e.target.value;this.mobileNotificationSettingTargets.map((function(e){""!=t&&(e.value=t)}))}},{key:"setAllEmailNotificationType",value:function(e){var t=e.target.value;this.emailNotificationTypeTargets.map(()}},{key:"setAllToggleEmailNotifications",value:function(e){var t=e.target.checked;this.toggleEmailNotificationsTargets.map((function(e){e.checked!=t&&(e.checked=t)}))}},{key:"setAllToggleInAppNotifications",value:function(e){var t=e.target.checked;this.toggleInAppNotificationsTargets.map((function(e){e.checked!=t&&(e.checked=t)}))}},{key:"setAllToggleMobileNotifications",value:function(e){var t=e.target.checked;this.toggleMobileNotificationsTargets.map((function(e){e.checked!=t&&(e.checked=t)}))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["inAppNotificationSetting","emailNotificationType","mobileNotificationSetting","toggleInAppNotifications","toggleEmailNotifications","toggleMobileNotifications"]},42382:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){this.updateModal()}},{key:"updateModal",value:function(){""!=this.titleTarget.value&&(document.getElementsByClassName("modal__title")[0].innerHTML=this.replaceCustomStrings(this.titleTarget.value)),""!=this.descriptionTarget.innerHTML.length&&(document.querySelectorAll(".modal__description .trix-content")[0].innerHTML=this.replaceCustomStrings(this.descriptionTarget.innerHTML)),""!=this.buttonLabelTarget.value.length&&(document.getElementsByClassName("modal__button-label")[0].innerHTML=this.buttonLabelTarget.value),""!=this.buttonUrlTarget.value.length&&(document.getElementsByClassName("modal__button-label")[0].href=this.buttonUrlTarget.value)}},{key:"replaceCustomStrings",value:function(e){return e=e.replace("{first_name}",this.element.dataset.userFirstName).replace("{community_name}",this.element.dataset.communityName)}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["title","description","buttonLabel","buttonUrl"]},72802:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"keyup",value:function(e){e.target.selectionStart>5&&(this.setCursorPos(e.target,0),this.buttonTarget.click())}},{key:"setCursorPos",value:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",t),r.select()}e.scrollLeft=0}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["field","button"]},88643:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).open=function(t){t&&t.preventDefault(),e.lockScroll(),document.body.insertAdjacentHTML("beforeend",e._modalContentHTML()),e.modal=document.querySelector("#".concat(e.modalContainerId)),e.modal.querySelectorAll("[data-action='click->popup#close']").forEach((),e.data.get("disable-backdrop")||(document.body.insertAdjacentHTML("beforeend",e.backgroundHtml),e.background=document.querySelector("#".concat(e.backgroundId)))},e.closeBackground=function(t){if(e.modal){var r=document.querySelector(".modal__inner");r&&e.allowBackgroundClose&&e.modal.contains(t.target)&&!r.contains(t.target)&&!e.element.contains(t.target)&&e.close(t)}},e.close=function(t){(e.background||e.modal)&&(t.preventDefault(),e.unlockScroll(),e.background&&e.background.remove(),e.modal&&e.modal.remove())},e.closeWithKeyboard=function(t){27!==t.keyCode||e.containerTarget.classList.contains(e.toggleClass)||e.close(t)},e.lockScroll=function(){var t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight="".concat(t,"px"),e.saveScrollPosition(),document.body.classList.add("fixed","inset-x-0","overflow-hidden"),document.body.style.top="-".concat(e.scrollPosition,"px")},e.unlockScroll=function(){document.body.style.paddingRight=null,document.body.classList.remove("fixed","inset-x-0","overflow-hidden"),e.restoreScrollPosition(),document.body.style.top=null},e.saveScrollPosition=function(){e.scrollPosition=window.pageYOffset||document.body.scrollTop},e.restoreScrollPosition=e}return t=l,(r=[{key:"connect",value:function(){this.toggleClass="hidden",this.backgroundHtml=this._backgroundHTML(),this.backgroundId="modal-background",this.modalContainerId="modal-container-",this.modalInnerHtml=this.containerTarget.innerHTML,this.containerTarget.innerHTML="",this.allowBackgroundClose="true"===(this.data.get("allowBackgroundClose")||"true"),this.element.dataset.open&&this.open(),window.addEventListener("click",this.closeBackground)}},{key:"disconnect",value:,{key:"_backgroundHTML",value:function(){return'<div id="modal-background" class="modal-background"></div>'}},{key:"_modalContentHTML",value:])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["container"]},45593:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=r(86254),i=r(56163),o=r.n(i);unction s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,r,i,s=u(d);function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),s.apply(this,arguments)}return t=d,(r=[{key:"connect",value:,{key:"convertNonLinksToLinks",value:function(){var e=this.element.getElementsByClassName("post__inside")[0],t="";void 0!==e&&(t=e.innerHTML,t=o()(t,{defaultProtocol:"https",target:{url:"_blank"},ignoreTags:["a","style","script","img","iframe","action-text-attachment","video","audio"],validate:{url:function(e){return/^[^A-Z]/.test(e)}}}),e.innerHTML=t)}},{key:"addNoDownloadAttrToVideo",value:function(){var e=this.element.getElementsByTagName("video");if(e.length>0)for(var t=0;t<e.length;t++)e[t].setAttribute("controlsList","nodownload")}},{key:"enableTruncation",value:function(){var e=this.element.getElementsByClassName("post__inside")[0],t=this.element.getElementsByClassName("post__expand")[0];t&&new n.do((function(r){var n,i=a(r);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.target.scrollHeight>o.contentRect.height;o.target.classList[s?"add":"remove"]("truncated"),t.innerHTML=s?t.dataset.showMore:t.dataset.showLess,0!==o.contentRect.height&&o.contentRect.height||(e.style["-webkit-line-clamp"]="unset")}}catch(l){i.e(l)}finally{i.f()}})).observe(e)}},{key:"toggleExpandClass",value:function(e){var t=!e.target.classList.contains("expanded");e.target.classList[t?"add":"remove"]("expanded"),e.target.innerHTML=t?e.target.dataset.showMore:e.target.dataset.showLess}},{key:"makeAllLinksOpenInNewWindow",value:function(){var e=this.element.getElementsByTagName("a");if(e.length>0)for(var t=0;t<e.length;t++){var r=e[t];"A"!==r.tagName||r.isContentEditable||r.host===window.location.host||r.setAttribute("target","_blank")}}},{key:"openDownloadLinksInNewWindow",value:function(){var e=this.element.getElementsByClassName("attachment__link");if(e.length>0)for(var t=0;t<e.length;t++)e[t].setAttribute("target","_blank")}},{key:"transformDataBackgroundImage",value:function(){this.element.querySelectorAll("[data-background-image]").forEach((function(e){var t=document.createElement("img");t.src=e.dataset.backgroundImage,e.style.backgroundImage='url("'.concat(e.dataset.backgroundImage,'")'),t.onload=function(){var t=e.parentElement;t.classList.add("show"),t.classList.remove("hide")}}))}},{key:"downloadAttachment",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.dataset,r=t.url,n=t.fileName,i=t.logUrl;this.download(r,n),this.trackDownload(i)}},{key:"download",value:function(e,t){var r=document.createElement("a");r.href=e,r.download=t,r.setAttribute("download",t),r.click()}},{key:"trackDownload",value:])&&l(t.prototype,r),i&&l(t,i),d}(r(67931).Qr)},11922:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){this.submitFormShortcut()}},{key:"submitFormShortcut",value:function(){var e=this.element;document.addEventListener("keydown",(function(t){"Enter"===t.key&&(t.metaKey||t.ctrlKey)&&e.submit()}))}},{key:"validate",value:function(e){this.isRichTextProcessing&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},{key:"isRichTextProcessing",get:function(){return JSON.parse(this.element.querySelector("trix-editor").getAttribute("data-richtext-processing"))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},11192:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(67142);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,s,l=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:function(){var e=this.element.dataset.name;if(!this.element.querySelector(".user__initials")){var t=document.createElement("div");t.classList.add("user__initials","text-white"),t.style="background-color: ".concat((0,n.DX)(e),";"),t.innerText=(0,n.Qe)(e),this.element.appendChild(t)}}}])&&i(t.prototype,r),s&&i(t,s),c}(r(67931).Qr)},99375:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"toggle",value:function(){document.querySelectorAll(".view-space .post__reply form").forEach((function(e){e.style.zIndex="-1000"})),document.querySelectorAll(".view-post .post__reply").forEach((function(e){e.style.zIndex="-1000"}))}},{key:"hide",value:function(){document.querySelectorAll(".view-space .post__reply form").forEach((function(e){e.style.zIndex=null})),document.querySelectorAll(".view-post .post__reply").forEach(()}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},40539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Jle});var n=r(67294),i=r(73935),o=r(67931),a=r(86013),s=r.n(a),l=r(48267),c=r(85893),u=function(e){var t=e.data;return(0,c.jsx)("div",{children:(0,c.jsx)("pre",{children:JSON.stringify(t,null,2)})})},d="success",f=r(88767),m=r(81535),p=r(75752),h=new f.QueryClient(p.Vr),b=r(43422),y=r(89992),v=r(5167),g=r(35990),x=r(81217),_=r(31714),j=function(e){var t=e.postSlug,r=e.spaceId,n=(0,x.t)({spaceId:r,postSlug:t}),i=n.isLoading,o=n.post;return i||!o?(0,c.jsx)(l.aN,{}):(0,c.jsx)(v.mE,{spaceId:r,children:(0,c.jsx)(g._x,{perPagePostIds:[[o.id]],children:(0,c.jsx)(v.DW,{post:o,children:(0,c.jsx)(_.l,{})})})})},w=r(6645),O=r(44410),P=r(59393),S=r(76752),k={AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",GB:"United Kingdom",CH:"Switzerland"};function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(){var e,t=!(null===(e=window.webview)||void 0===e||!e.isComingFromReactNativeWebview),r=C((0,w.Z)([P.nV]),2),i=r[0],o=r[1],s=C((0,n.useState)(!0),2),u=s[0],d=s[1],f=C((0,n.useState)(window.CLOUDFLARE_COUNTRY_CODE),2),m=f[0],p=f[1],h=i[P.nV],b=function(e){var t;o(P.nV,e,{expires:(t=new Date,t.setTime(t.getTime()+31536e6),t),domain:window.location.hostname.includes(P.eG)?P.eG:window.location.hostname,path:"/",sameSite:"None",secure:["production","staging"].includes(window.RAILS_ENV)})};return(0,n.useEffect)((function(){h||null!==m&&void 0!==m&&m.length||fetch("https://cloudflare-quic.com/b/headers").then((function(e){return e.json()})).then(().catch((function(e){console.error(e)}))})),(0,n.useEffect)((function(){var e;e=Object.keys(k),d(!e.includes(m))}),[m]),!document.cookie||u||h||t?null:["production","staging"].includes(window.RAILS_ENV)?(0,c.jsx)(O.Z,{children:(0,c.jsxs)("div",{className:"border-primary bg-primary fixed bottom-0 z-[1060] w-full gap-4 border p-4 shadow-lg md:bottom-8 md:right-8 md:flex md:w-auto md:max-w-2xl md:rounded",children:[(0,c.jsx)("div",{className:"mb-4 leading-4 md:mb-0",children:(0,c.jsxs)("p",{className:"text-dark text-sm",children:[(0,a.t)(["gdpr.cookie_banner.description"]),(0,c.jsx)("br",{}),(0,a.t)("gdpr.cookie_banner.privacy_policy.prefix"),(0,c.jsx)("a",{href:S.ae.privacy_policy(),target:"_blank",rel:"noreferrer",children:(0,a.t)("gdpr.cookie_banner.privacy_policy.link")}),(0,a.t)("gdpr.cookie_banner.privacy_policy.suffix")]})}),(0,c.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,c.jsx)(l.zx,{onClick:function(){return b(!1)},variant:"secondary",children:(0,a.t)("gdpr.cookie_banner.decline_button")}),(0,c.jsx)(l.zx,{onClick:function(){return b(!0)},variant:"primary",children:(0,a.t)("gdpr.cookie_banner.accept_button")})]})]})}):null},A=r(36911),E=r(45697),I=r.n(E),D=r(80151),L=function(e){var t=(0,D.l)(),r=t.mergeConfig,i=t.resetToDefault;return(0,n.useEffect)((,[]),null};L.propTypes={disableRightSidebar:I().bool.isRequired,renderLeftSidebar:I().func,disableSidebar:I().func};var M=r(1293),R=r(66365),F=r(49942),B=r(98929);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z=function(e){var t=e.pageTitle,r=e.layoutConfigProps,n=e.pageMetaProps,i=e.rightContent,o=e.leftContent,a=e.filters,s=e.headline,l=e.hasBorder,u=window.innerWidth<=768?".no-header":".header__inside",d=(0,v.wh)().currentCommunity,f=!(0,B.Aq)(d);return(0,M.$)(u),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(A.S,z({title:t},n)),(0,c.jsx)(L,z({disableRightSidebar:!1},r)),f&&(0,c.jsx)(R.n,{children:(0,c.jsx)(b.b,{leftContent:o||(0,c.jsx)(F.y,{children:t}),rightContent:i,filters:a,headline:s,hasBorder:l})})]})},H=r(92232),q=r(38014),G=r(67144),W=r(86078),Q=r(59651),K=r(94184),J=r.n(K),$=function(e){var t=e.maxWidth,r=void 0===t?"md":t,n=e.className,i=e.children,o={md:"max-w-4xl",lg:"max-w-[1152px]",xl:"max-w-8xl",none:"max-w-none"}[r]||"";return(0,c.jsx)("main",{"aria-label":(0,a.t)("main_content"),className:J()("settings-app text-dark mx-auto p-4 lg:px-6 lg:py-4",o,n),children:i})},Y=r(24702),X=r(9778),ee=function(){return(0,c.jsx)(X.iA,{className:"mb-7",variant:"default",children:(0,c.jsxs)("div",{className:"flex h-96 flex-col items-center justify-center gap-2","data-testid":"live-settings-empty-state",children:[(0,c.jsx)(l.ZT.TitleLg,{children:(0,a.t)("live_streams.dashboard.table.no_live_records")}),(0,c.jsx)(l.ZT.BodyLg,{color:"text-gray-600",textAlign:"text-center",children:(0,a.t)("live_streams.dashboard.table.engage_with_live")}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)(Y.h,{variant:"circle",small:!1})})]})})},te=r(31256),re=r(65771),ne=r(45275),ie=r(40492),oe=r(68185),ae=r(64687),se=r.n(ae),le=r(86599),ce=r(10617),ue=r(63802),de=["serverErrors"];function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var be=function(e){var t=e.serverErrors,r=he(e,de),n=t.title,i=t.errors,o=t.topExtraInfo,a=t.bottomExtraInfo;return(0,c.jsx)("div",me(me({className:"server-errors"},r),{},{children:(0,c.jsxs)("div",{className:"server-errors__wrapper",children:[(0,c.jsx)("div",{className:"server-errors__close-icon",children:(0,c.jsx)(ue.oOx,{className:"server-errors__icon-svg"})}),(0,c.jsxs)("div",{className:"server-errors__container",children:[n&&(0,c.jsx)("h3",{className:"server-errors__title",children:n}),o&&(0,c.jsx)("p",{className:"server-errors__extra-info",children:o}),i&&Array.isArray(i)&&(0,c.jsx)("div",{className:"server-errors__content",children:(0,c.jsx)("ul",{className:"server-errors__list",children:i.map((function(e){return(0,c.jsxs)("li",{children:[(0,c.jsx)("span",{className:"server-errors__error-title",children:e.title}),":"," ",(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})]},e.title)}))})}),a&&(0,c.jsx)("p",{className:"server-errors__extra-info",children:a})]})]})}))},ye=r(4992),ve=function(e,t,r,n){return n?e?t:0:e*t/r};function ge(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function xe(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ge(o,n,i,a,s,"next",e)}function s(e){ge(o,n,i,a,s,"throw",e)}a(void 0)}))}}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pe=(0,n.createContext)();Pe.displayName="AddOnsSettingsContext";var Se=function(e){var t=e.onSuccess,r=e.onCloseModal,i=e.children,o=e.refetchCurrentPlan,u=void 0===o?null:o,d=we((0,n.useState)(),2),m=d[0],p=d[1],h=we((0,n.useState)([]),2),b=h[0],y=h[1],v=we((0,n.useState)(),2),g=v[0],x=v[1],_=we((0,n.useState)(),2),j=_[0],w=_[1],O=we((0,n.useState)(!0),2),P=O[0],S=O[1],k=we((0,n.useState)(),2),C=k[0],N=k[1],T=we((0,n.useState)(),2),A=T[0],E=T[1],I=function(e){var t=e.handleOnSuccess,r=void 0===t?null:t,n=e.setServerErrors,i=void 0===n?null:n,o=e.onCloseModal,s=void 0===o?null:o,c=e.refetchCurrentPlan,u=void 0===c?null:c,d=(0,l.pm)();return{handleAddonsMutation:(0,f.useMutation)((function(e){return ye.z.create(e)}),{onSuccess:function(){r?r():(u&&u(),d.success((0,a.t)("settings.billing.add_ons.changes_succeeded")),s&&s())},onError:function(e){console.error(e),i&&i({title:null===e||void 0===e?void 0:e.message,errors:null===e||void 0===e?void 0:e.errorDetails})}})}}({handleOnSuccess:t,setServerErrors:N,onCloseModal:r,refetchCurrentPlan:u}),D=I.handleAddonsMutation,L=M=function(e){return e.map((function(e){return e.step=e.unit_size,e.toggleable=L(e.quantity),e}))},R=function(e){var t={};return e.map((function(e){t[e.slug]=ve(e.quantity,e.base_amount,e.unit_size,L(e.quantity))})),t},F=B=U=z=function(){var e=xe(se().mark((function e(){var t,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.z.index();case 2:if(!(t=e.sent).ok){e.next=14;break}return e.next=6,t.json();case 6:r=e.sent,x(B(r)),y(M(r)),E(F(r)),w(R(r)),S(!1),e.next=15;break;case 14:N({title:s().t("something_went_wrong")});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=xe(se().mark((function e(t){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},Object.keys(t).forEach((function(e){var n=U(e);r[n.id.toString()]=t[e]})),D.mutate(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){z()}),[]),(0,n.useEffect)((function(){!function(){var e=0;j&&(Object.keys(j).forEach((),p(e))}()}),[j]);var Z={getPlanInterval:function(){return b[0].interval},getPlanCurrency:total:m,addOnsData:b,defaultValues:g,isLoading:P,handleAddonsMutation:D,serverErrors:C,getAddOnPrice:function(e,t){var r=U(e);return ve(t,r.base_amount,r.unit_size,r.toggleable)},updateTotalPrice:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},j);r[e]=t,w(r)},onSubmit:V,grandfatheredAddonNames:A};return(0,c.jsx)(Pe.Provider,{value:Z,children:i})},ke=function(){return(0,n.useContext)(Pe)},Ce=r(45833),Ne=r(97803),Te=["name","interval","monthlyAmount","step","toggleable","maxPurchasableQuantity","priceCurrency","unitSize"];function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Re=function(e){var t=e.name,r=e.interval,i=e.monthlyAmount,o=e.step,s=void 0===o?1:o,u=e.toggleable,d=void 0!==u&&u,f=e.maxPurchasableQuantity,m=e.priceCurrency,p=e.unitSize,h=Me(e,Te),b=ke(),y=b.defaultValues,v=b.getAddOnPrice,g=b.updateTotalPrice,x=De((0,n.useState)(),2),_=x[0],j=x[1],w=O=function(e){var r=v(t,e);return j(r),r};return(0,n.useEffect)((function(){O(y[t])}),[]),(0,c.jsx)(l.l0.Item,Ee(Ee({name:t,hideBorder:!0,isFirstChild:!0,label:(0,a.t)("settings.billing.add_ons.manage.".concat(t)),description:(0,a.t)("settings.billing.add_ons.manage.".concat(r,".").concat(t,"_description"),{amount:i,quantity:p})},h),{},{children:(0,c.jsxs)("div",{className:"form-input manage-add-ons__item",children:[d&&(0,c.jsx)("div",{className:"manage-add-ons__item-button",children:(0,c.jsx)(Ce.R,{name:t,onChange:w})}),!d&&(0,c.jsx)("div",{className:"manage-add-ons__item-button",children:(0,c.jsx)(Ne.A,{name:t,step:s,onChange:w,max:f})}),(0,c.jsx)("div",{className:"manage-add-ons__item-price",children:(0,c.jsxs)("span",{children:[(0,c.jsx)("b",{children:m+_})," ",(0,a.t)("separator_slash")," ",r.charAt(0)]})})]})}))};function Fe(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var Be=function(e){var t=e.onAfterSubmit,r=ke(),n=r.isLoading,i=r.handleAddonsMutation,o=r.addOnsData,s=r.defaultValues,u=r.onSubmit,d=r.total,f=r.serverErrors,m=r.getPlanInterval,p=r.getPlanCurrency,h=r.grandfatheredAddonNames,b=function(){var e,r=(e=se().mark((function e(){var r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.apply(void 0,r),t&&t();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Fe(o,n,i,a,s,"next",e)}function s(e){Fe(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[n&&(0,c.jsx)("div",{className:"manage-add-ons__loader",children:(0,c.jsx)(l.aN,{})}),!n&&(0,c.jsxs)("div",{children:[h&&(0,c.jsx)("div",{className:"mt-6 rounded-md border border-l-8 border-amber-500 p-5",children:(0,c.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,a.t)("settings.billing.add_ons.manage.grandfathered_addons",{addons:h})}})}),(0,c.jsx)(ce.l,{onSubmit:b,defaultValues:s,children:(0,c.jsxs)("div",{className:"manage-add-ons__fields-wrapper text-dark",children:[f&&(0,c.jsx)(be,{serverErrors:f}),o.map((function(e){return(0,c.jsx)("div",{className:"mb-1",children:(0,c.jsx)(Re,{name:e.slug,step:e.step,monthlyAmount:e.formatted_base_monthly_amount,toggleable:e.toggleable,interval:e.interval,maxPurchasableQuantity:e.max_purchasable_quantity,unitSize:e.unit_size,priceCurrency:e.price_currency})},e.slug)})),(0,c.jsxs)("div",{className:"manage-add-ons__total",children:[(0,c.jsx)("div",{className:"manage-add-ons__total-label",children:(0,a.t)("settings.billing.add_ons.manage.total_purchase")}),(0,c.jsxs)("div",{className:"manage-add-ons__total-value",children:[(0,c.jsx)("b",{children:p()+d})," ",(0,a.t)("separator_slash")," ",m().charAt(0)]})]}),(0,c.jsx)("div",{className:"form-actions",children:(0,c.jsx)(le._,{type:"submit",variant:"primary",full:!0,submitting:i.isLoading,children:(0,a.t)("settings.billing.add_ons.manage.apply_changes")})})]})})]})]})},Ue=new f.QueryClient,ze=function(e){var t=e.onSuccess,r=void 0===t?null:t,n=e.refetchCurrentPlan,i=void 0===n?null:n,o=(0,oe.p)(),s=(0,ne.yT)(),l=function(){s.hide(),s.remove()};return(0,c.jsx)(f.QueryClientProvider,{client:Ue,children:(0,c.jsx)(Se,{onSuccess:r,onCloseModal:l,refetchCurrentPlan:i,children:(0,c.jsxs)(ie.u_,{isOpen:s.visible,onClose:l,className:"manage-add-ons__modal",title:(0,a.t)("settings.billing.add_ons.manage_addons"),children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"lg",children:[(0,c.jsx)(ie.u_.Header,{children:(0,c.jsx)(ie.u_.Title,{size:"sm",children:(0,a.t)("settings.billing.add_ons.manage_addons")})}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsx)(Be,{onAfterSubmit:function(){r&&(l(),o&&o.success((0,a.t)("settings.billing.add_ons.changes_succeeded")))}})})]})]})})})},Ve=ne.uc.create((function(e){var t=e.onSuccess,r=void 0===t?null:t,n=e.refetchCurrentPlan,i=void 0===n?null:n;return(0,c.jsx)(ze,{onSuccess:r,refetchCurrentPlan:i})})),Ze=function(){return(0,ne.yT)(Ve)},He=function(e){var t=e.title,r=e.children,n=e.isLoading,i=e.canPurchaseMore,o=void 0===i||i,s=e.onPurchase,u=(0,re.E)().isCommunityOnTrial,d=Ze();return(0,c.jsx)("div",{className:"bg-primary border-primary relative shrink-0 grow rounded-lg border px-5 py-4","data-testid":"live-main-status",children:n?(0,c.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,c.jsx)(l.aN,{})}):(0,c.jsxs)("div",{className:"flex h-full flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,c.jsx)(y.Z.LabelSm,{children:t}),!u&&o&&(0,c.jsx)("button",{type:"button",className:"cursor-pointer text-sm",onClick:function(){d.show({onSuccess:s})},children:(0,a.t)("live_streams.dashboard.limits.add_more")})]}),(0,c.jsx)("div",{className:"relative grow",children:r})]})})},qe=function(e){var t=e.hosts,r=e.participants,n=e.onPurchase,i=e.isLoading,o=(0,re.E)().isCommunityOnEnterprise;return(0,c.jsx)(He,{isLoading:i,canPurchaseMore:!o,onPurchase:n,title:(0,a.t)("live_streams.dashboard.limits.hosts"),children:(0,c.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"text-dark text-base font-bold",children:t})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(y.Z.LabelSm,{children:(0,a.t)("live_streams.dashboard.limits.participants")}),(0,c.jsx)("div",{className:"text-dark text-base font-bold",children:r})]})]})})},Ge=We=function(e){var t=e.usage,r=e.limit,n=e.color,i=void 0===n?"red":n,o=e.label,a={width:"".concat(r?Math.min(t/r*100,100):0,"%"),backgroundColor:i},s="".concat(Ge(t)," / ").concat(Ge(r));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"relative mb-2 h-1 w-full rounded-sm bg-gray-300",children:(0,c.jsx)("div",{className:"absolute h-full rounded-sm",style:a})}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[o&&(0,c.jsx)(y.Z.LabelXs,{children:o}),(0,c.jsx)(y.Z.LabelXs,{children:s})]})]})},Qe=function(e){var t=e.limit,r=e.usage,n=e.onPurchase,i=e.isLoading;if(!t)return null;var o=r/t*100;return(0,c.jsxs)(He,{isLoading:i,canPurchaseMore:!0,onPurchase:n,title:(0,a.t)("live_streams.dashboard.limits.video_storage"),children:[(0,c.jsx)("div",{className:"mb-5",children:(0,c.jsx)(y.Z.TitleMd,{children:Ge(r)})}),(0,c.jsx)(We,{usage:r,limit:t,label:(0,a.t)("live_streams.dashboard.limits.storage_limit"),color:o>75?"red":"green"})]})},Ke=function(e){var t=e.limit,r=e.usage,n=e.onPurchase,i=e.isLoading;if(!t)return null;var o=r/t*100;return(0,c.jsxs)(He,{isLoading:i,canPurchaseMore:!0,onPurchase:n,title:(0,a.t)("live_streams.dashboard.limits.hours_this_month"),children:[(0,c.jsx)("div",{className:"mb-5",children:(0,c.jsx)(y.Z.TitleMd,{children:Ge(r)})}),(0,c.jsx)(We,{usage:r,limit:t,label:(0,a.t)("live_streams.dashboard.limits.monthly_limit"),color:o>75?"red":"green"})]})},Je=function(){var e=(0,v.wh)().currentCommunity,t=(0,te.lQ)(),r=t.monthlyHourLimit,n=t.monthlyHourUsage,i=t.storageLimit,o=t.storageUsage,a=t.hostLimit,s=t.participantLimit,l=t.isLoading,u=t.refetchAddons;return e.supports_live_streams?(0,c.jsxs)("div",{className:"mb-4 flex w-full flex-col gap-4 md:flex-row",children:[(0,c.jsx)(Ke,{isLoading:l,limit:r,usage:n,onPurchase:u}),(0,c.jsx)(Qe,{isLoading:l,limit:i,usage:o,onPurchase:u}),(0,c.jsx)(qe,{isLoading:l,hosts:a,participants:s,onPurchase:u})]}):null},$e=r(55675),Ye=function(e){var t=e.startRecordNumber,r=e.endRecordNumber,n=e.totalRecordCount,i=e.page,o=e.fetchPrevPage,s=e.hasNextPage,l=e.fetchNextPage;return(0,c.jsxs)("div",{className:"flex flex-row-reverse items-center justify-end space-x-4 space-x-reverse ",children:[(0,c.jsxs)("div",{className:"text-dark text-sm font-medium",children:[t,"-",r," ",(0,a.t)("live_streams.dashboard.pagination.of")," ",n]}),(0,c.jsxs)("div",{className:"ml-2 space-x-2",children:[(0,c.jsx)($e.z,{variant:"secondary",disabled:1===i,onClick:o,type:"button",children:(0,a.t)("live_streams.dashboard.pagination.prev")}),(0,c.jsx)($e.z,{variant:"secondary",disabled:!s,onClick:l,type:"button",children:(0,a.t)("live_streams.dashboard.pagination.next")})]})]})},Xe=r(40427),et=r(61005),tt=r(3108),rt=r(42590),nt=r(87678),it=r(11909),ot=r(88526),at=function(e,t){var r=(0,oe.p)(),n=r.error,i=r.success;return{deleteRecording:(0,f.useMutation)((function(){return ot.Q.deleteRoomRecording({roomId:null===e||void 0===e?void 0:e.id,id:null===e||void 0===e?void 0:e.recording_id})}),{onSuccess:function(){i((0,a.t)("live_streams.delete_recording.success"),{duration:"short",shouldUseProgress:!1}),t()},onError:function(){n((0,a.t)("live_streams.delete_recording.error"))}}).mutate}},st=r(22837),lt=r(48885);function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ft=function(e){var t=e.room,r=(0,v.wh)().currentCommunitySettings,i=null===r||void 0===r?void 0:r.tiptap_post_enabled;return{trixBodyWithRecording:(0,n.useMemo)((function(){if(i||!t.recording_url)return"";var e=t.recording_blob,r=new st.default.Attachment(ut(ut({},e),{},{url:t.recording_url,sgid:e.attachable_sgid,filesize:e.byte_size,contentType:"video/mp4",content:t.video_container_tag})),n=st.default.Text.textForAttachmentWithAttributes(r),o=[new st.default.Block(n)];if(t.description){var a=new st.default.StringPiece(t.description),s=new st.default.Text([a]);o.unshift(new st.default.Block(s))}var l=new st.default.Document(o),c=new st.default.DocumentView(l).render(),u="";return c.forEach((function(e){var t=e.pop();u+=t.outerHTML})),u}),[i,t]),tiptapBodyWithRecording:i&&t.recording_attachment?(0,lt.Ln)({bodyContent:[t.description?(0,lt.Z9)({text:t.description}):(0,lt.H9)(),(0,lt.Om)({file:t.recording_attachment})],inlineAttachments:[t.recording_attachment]}):null}},mt=function(e){var t=e.room,r=e.refetch,n=e.setCurrentRoom,i=function(e,t){var r=(0,oe.p)(),n=r.error,i=r.success;return{endRoom:(0,f.useMutation)((function(){return ot.Q.endStream({id:null===e||void 0===e?void 0:e.id})}),{onSuccess:function(){i((0,a.t)("live_streams.room.".concat((0,it.vX)(e),".end_success")),{duration:"short",shouldUseProgress:!1}),t()},onError:function(){return n((0,a.t)("live_streams.room.".concat((0,it.vX)(e),".end_error")))}}).mutate}}(t,r),o=i.endRoom,s=(0,it.vX)(t),l=at(t,r).deleteRecording,u=function(e,t){var r=(0,oe.p)(),n=r.error,i=r.success,o=(0,v.wh)().currentUser;return{chatTranscript:(0,f.useMutation)((function(){return ot.Q.chatTranscript({id:null===e||void 0===e?void 0:e.id})}),{onSuccess:function(){i((0,a.t)("live_streams.room.chat_transcript_success",{name:null===e||void 0===e?void 0:e.name,email:null===o||void 0===o?void 0:o.email})),t()},onError:function(){return n((0,a.t)("live_streams.room.chat_transcript_error"))}}).mutate}}(t,r),d=u.chatTranscript,m=(0,nt.tv)({title:(0,a.t)("live_streams.".concat(s,"_ended.confirm")),onConfirm:o}),p=m.confirmModal,h=m.onConfirmButtonClick,b=(0,nt.tv)({title:(0,a.t)("live_streams.chat_transcript.confirm"),onConfirm:d,sentiment:"primary"}),y=b.confirmModal,g=b.onConfirmButtonClick,x=(0,nt.tv)({title:(0,a.t)("live_streams.delete_recording.confirm"),onConfirm:l,description:(0,a.t)("live_streams.delete_recording.confirm_description")}),_=x.confirmModal,j=x.onConfirmButtonClick,w=ft({room:t}),O=w.trixBodyWithRecording,P=w.tiptapBodyWithRecording,S=[{key:"view-details",label:(0,a.t)("live_streams.dashboard.table.actions.view_details"),onClick:function(){return n(t)}}];if((0,it.UT)(t)||S.unshift({key:"end-stream",label:(0,a.t)("live_streams.dashboard.table.actions.".concat(s,".end")),onClick:h}),t.recording_url&&S.push({key:"post-to-space",linkComponent:function(e){return(0,c.jsx)(rt.h,{hasIcon:!1,isButton:!1,render:function(e){var t=e.onClick;return(0,c.jsx)(Q.w.Actions.Item,{onClick:t,children:(0,a.t)("live_streams.dashboard.table.actions.post_to_space")})},bodyForEditor:O,tiptapBodyForEditor:P,title:t.name},e)},label:(0,a.t)("live_streams.dashboard.table.actions.post_to_space")}),t.chat_transcript&&S.push({key:"chat-transcript",label:(0,a.t)("live_streams.dashboard.table.actions.chat_transcript"),onClick:g}),t.recording_url){S.push({key:"download-recording",label:(0,a.t)("live_streams.dashboard.table.actions.download_recording"),onClick:function(){window.open(t.recording_url,"_blank")}})}if(t.transcript_url){S.push({key:"download-transcript",label:(0,a.t)("live_streams.dashboard.table.actions.download_transcript"),onClick:function(){window.open(t.transcript_url,"_blank")}})}return t.recording_url&&S.push({key:"delete-recording",label:(0,a.t)("live_streams.dashboard.table.actions.delete_recording"),hasDanger:!0,onClick:j}),(0,c.jsxs)(c.Fragment,{children:[p,_,y,(0,c.jsx)(Q.w.Actions,{children:S.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick,o=e.linkComponent;return"post-to-space"===t?o(t):(0,c.jsx)(Q.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))})]})},pt=r(14907),ht=r(90846),bt=r(30887),yt=r(8795),vt=r(87775),gt=r(86112),xt=function(){return(0,c.jsx)(yt.Y,{content:(0,a.t)("live_streams.dashboard.details.actions"),children:(0,c.jsx)(bt.JO,{type:"menu-dots-vertical"})})},_t=function(e){var t=e.room,r=e.refetch,n=(0,v.wh)().currentCommunitySettings,i=at(t,r).deleteRecording,o=ft({room:t}),s=o.trixBodyWithRecording,l=o.tiptapBodyWithRecording,u=(0,nt.tv)({title:(0,a.t)("live_streams.delete_recording.confirm"),onConfirm:i,description:(0,a.t)("live_streams.delete_recording.confirm_description"),maxIndex:!0}),d=u.confirmModal,f=u.onConfirmButtonClick,m=[{key:"download",label:(0,a.t)("live_streams.dashboard.details.download"),href:t.recording_url},{key:"delete",label:(0,a.t)("live_streams.dashboard.details.delete"),onClick:f},{key:"post-to-space",linkComponent:(0,c.jsx)(rt.h,{hasIcon:!1,isButton:!1,linkName:(0,a.t)("live_streams.dashboard.table.actions.post_to_space"),bodyForEditor:s,tiptapBodyForEditor:l,title:t.name,maxZIndexEnabled:!0}),label:(0,a.t)("live_streams.dashboard.table.actions.post_to_space")}];if(t.transcript_url){m.splice(1,0,{key:"download-transcript",label:(0,a.t)("live_streams.dashboard.details.download_transcript"),onClick:)}return(0,c.jsxs)("div",{children:[(0,c.jsx)(gt.Y,{rounded:!0,src:t.recording_url,type:"video/mp4",mediaTranscriptId:t.transcript_id,variant:null!==n&&void 0!==n&&n.community_ai_settings_enabled?"enhanced":"default"}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("div",{className:"text-dark mb-1 mt-4 text-lg font-semibold",children:t.recording_name}),d,(0,c.jsx)(vt.t,{renderButton:function(){return(0,c.jsx)(xt,{})},menuItems:m,dropdownSide:"left",shouldCloseOnClickItem:!0})]})]})},jt=function(e){var t=e.recording_duration;return(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("div",{className:"stream-details__details__label",children:(0,a.t)("live_streams.dashboard.details.duration")}),(0,c.jsx)("p",{children:t})]})},wt=function(e){var t=e.room,r=e.refetch,n=(0,Xe.mH)(t.created_at,{year:"numeric",month:"short",day:"numeric"});return(0,c.jsxs)("div",{className:"stream-details__details",children:[t.recording_url&&(0,c.jsx)(_t,{room:t,refetch:r}),t.description&&(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)("p",{className:"break-words pr-12",children:t.description})}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("div",{className:"stream-details__details__label",children:(0,a.t)("live_streams.dashboard.details.room_id")}),(0,c.jsx)("p",{children:t.id})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("div",{className:"stream-details__details__label",children:(0,a.t)("live_streams.dashboard.details.created_at")}),(0,c.jsx)("p",{children:n})]}),t.recording_duration&&(0,c.jsx)(jt,{recording_duration:t.recording_duration}),(0,it.L6)(t)&&(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("div",{className:"text-darkest font-medium",children:(0,a.t)("live_streams.dashboard.details.guests_count")}),(0,c.jsx)("p",{children:t.guests_count})]})]})},Ot=function(e){var t=e.onClickDownload;return(0,c.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium",children:[(0,c.jsx)("p",{className:"pr-1",children:I18n.t("live_streams.dashboard.participants.csv")}),(0,c.jsx)(bt.JO,{type:"download",className:J()("cursor-pointer"),onClick:t})]})},Pt=r(67142),St=function(e){var t=e.name,r=e.src,n=e.size,i=void 0===n?"sm":n,o=e.variant,a=void 0===o?"rounded-square":o,s="10";return"lg"===i&&(s="16"),"md"===i&&(s="7"),(0,c.jsx)("div",{className:J()("participant-avatar relative",{"participant-avatar--lg":"lg"===i,"participant-avatar--md":"md"===i,"participant-avatar--sm":"sm"===i,"participant-avatar--circle":"circle"===a,"participant-avatar--full":"full"===a,"participant-avatar--rounded-square":"rounded-square"===a}),children:(0,c.jsx)(Pt.sJ,{name:t,src:r,size:s})})},kt=function(e){var t=e.record;return(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsxs)("div",{className:"stream-details__participants__participant w-1/2",children:[(0,c.jsx)("div",{className:"stream-details__participants__participant__avatar-container",children:(0,c.jsx)(St,{name:t.name,src:t.avatar_url})}),(0,c.jsx)("div",{className:"stream-details__participants__participant__name",children:t.name})]}),(0,c.jsx)("div",{className:"w-1/2",children:t.email})]})},Ct=function(e){var t=e.onSearchChange;return(0,c.jsxs)("div",{className:"grow",children:[(0,c.jsx)(bt.JO,{type:"search"}),(0,c.jsx)("input",{type:"text",name:"textSearch",placeholder:I18n.t("live_streams.dashboard.participants.placeholder"),onChange:t,className:"bg-primary placeholder:text-light mr-2 w-10/12 border-transparent placeholder:opacity-100 focus:border-transparent focus:ring-0"})]})};function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var At=function(e){var t=e.onClickSort,r=Nt((0,n.useState)(!1),2),i=r[0],o=r[1];return(0,c.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium text-gray-800",children:[(0,c.jsx)("p",{className:"pr-1",children:I18n.t("live_streams.dashboard.participants.sort")}),(0,c.jsx)(bt.JO,{type:"caret-down",className:J()("cursor-pointer fill-gray-800",{"rotate-180":i}),onClick:)]})};function Et(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mt=function(e){var t=e.roomId,r=e.participantsCount,i=function(e){var t={per_page:2e3,sort:"oldest"},r=(0,f.useQuery)(S.av.liveStreams.participants({roomId:e,params:t})),n=r.data,i=r.isLoading,o=null===n||void 0===n?void 0:n.records;return{records:o&&Et(new Map(o.map(()).values()),isLoading:i}}(t),o=i.records,s=i.isLoading,u=Dt((0,n.useState)(""),2),d=u[0],m=u[1],p=Dt((0,n.useState)(!1),2),h=p[0],b=p[1],y=function(e){var t=(0,l.pm)(),r=t.success,n=t.error,i=(0,v.wh)().currentCommunityMember,o=null===i||void 0===i?void 0:i.email;return{onDownloadCSV:function(){return fetch(S.av.liveStreams.downloadParticipantsCSV({roomId:e})).then((function(e){e.ok?r((0,a.t)("export_member_csv.message",{email:o})):n((0,a.t)("export_member_csv.error_message"))})).catch((function(e){n((0,a.t)("export_member_csv.error_message")),console.error(null===e||void 0===e?void 0:e.message)}))}}}(t),g=y.onDownloadCSV,x=o&&o.filter(()||[];return x=h?x.sort((function(e,t){return t.name.localeCompare(e.name)})):x.sort((),(0,c.jsxs)("div",{className:"stream-details__participants",children:[(0,c.jsxs)("div",{className:"border-primary mb-6 flex items-center justify-between border-b-[1px] pb-1.5",children:[(0,c.jsx)(Ct,{onSearchChange:function(e){m(e.target.value)}}),(0,c.jsx)(At,{onClickSort:),(0,c.jsx)(Ot,{onClickDownload:g})]}),!s&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"stream-details__participants__label",children:(0,a.t)("live_streams.dashboard.participants.participant_count",{count:r})}),x&&x.length>0&&(0,c.jsx)("div",{className:"stream-details__participants__list",children:x.map((function(e){return(0,c.jsx)(kt,{record:e},e.id)}))})]})]})};function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bt=function(e){var t=e.isOpen,r=e.onClose,i=e.room,o=e.refetch,s=Object.freeze({DETAILS:(0,a.t)("live_streams.dashboard.details.tabs.details"),PARTICIPANTS:(0,a.t)("live_streams.dashboard.details.tabs.participants")}),l=Object.values(s).map((function(e){return{label:e}})),u=Rt((0,n.useState)(s.DETAILS),2),d=u[0],f=u[1],m=(null===i||void 0===i?void 0:i.room_type)||it.H0.STREAM;return i?(0,c.jsxs)(pt.u,{variant:"large",show:t,onClose:r,className:"stream-details",children:[(0,c.jsx)("div",{className:"stream-details__title",children:(0,a.t)("live_streams.dashboard.details.".concat(m,".title"))}),(0,c.jsx)(ht.m,{controlled:!0,activeTab:d,onClick:f,options:l,variant:"underline"}),d===s.DETAILS&&(0,c.jsx)(wt,{room:i,refetch:o}),d===s.PARTICIPANTS&&(0,c.jsx)(Mt,{roomId:null===i||void 0===i?void 0:i.id,participantsCount:null===i||void 0===i?void 0:i.total_participants})]}):null};function Ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zt=function(e){var t,r=e.status,n=(Ut(t={},it.LV.INITIALIZING,(0,a.t)("live_streams.status.initializing")),Ut(t,it.LV.BACKSTAGE,(0,a.t)("live_streams.status.backstage")),Ut(t,it.LV.LIVE,(0,a.t)("live_streams.status.live")),Ut(t,it.LV.ENDED,(0,a.t)("live_streams.status.finished")),Ut(t,it.LV.CLOSING,(0,a.t)("live_streams.status.closing")),t);return(0,c.jsxs)("div",{className:"live-stream-status",children:[[it.LV.BACKSTAGE,it.LV.LIVE,it.LV.ENDED].includes(r)?(0,c.jsx)("div",{className:J()("live-stream-status__icon",{"live-stream-status__icon--backstage":r===it.LV.BACKSTAGE,"live-stream-status__icon--live":r===it.LV.LIVE,"live-stream-status__icon--ended":r===it.LV.ENDED}),children:(0,c.jsx)(bt.JO,{size:6,type:"middot"})}):null,n[r]||""]})};function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){Ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wt=function(e){var t=e.records,r=e.refetch,i=e.className,o=qt((0,n.useState)(null),2),s=o[0],l=o[1],u=[{title:(0,a.t)("live_streams.dashboard.table.name"),dataIndex:"name",key:"name",variant:"uppercase"},{title:(0,a.t)("live_streams.dashboard.table.status"),dataIndex:"status",key:"status",variant:"uppercase",className:et.M.sm,tdClassName:et.M.sm},{title:(0,a.t)("live_streams.dashboard.table.date"),dataIndex:"created_at",key:"created_at",variant:"uppercase",className:et.M.xl,tdClassName:et.M.xl},{title:(0,a.t)("live_streams.dashboard.table.recording"),dataIndex:"recording",key:"recording",variant:"uppercase"},{title:(0,a.t)("live_streams.dashboard.table.participants"),dataIndex:"total_participants",key:"total_participants",variant:"uppercase",className:et.M.md,tdClassName:et.M.md},{title:(0,a.t)("live_streams.dashboard.table.type"),dataIndex:"type",key:"type",variant:"uppercase",className:et.M.xl,tdClassName:et.M.xl},{title:" ",dataIndex:"actions",key:"actions",variant:"actions"}],d=(null===t||void 0===t?void 0:t.map((function(e){return Zt(Zt({},e),{},{key:e.id,name:(0,c.jsx)("button",{type:"button",className:"max-w-[240px] cursor-pointer truncate",title:e.name,onClick:function(){l(e)},children:e.name}),status:(0,c.jsx)(zt,{status:e.status}),created_at:(0,Xe.mH)(e.created_at,{year:"numeric",month:"short",day:"numeric"}),recording:(0,c.jsx)("a",{className:J()("text-dark inline max-w-sm truncate hover:text-black",{"cursor-text":!e.recording_url}),title:(0,a.t)("live_streams.dashboard.table.actions.download"),href:e.recording_url,download:!0,target:"_blank",rel:"noreferrer",children:e.recording_url?(0,a.t)("live_streams.dashboard.table.actions.download"):"-"}),type:"conference"==e.room_type?(0,a.t)("live_streams.dashboard.table.room"):(0,a.t)("live_streams.dashboard.table.stream"),actions:(0,c.jsx)(mt,{room:e,refetch:r,setCurrentRoom:l}),rowClassName:"group"})})))||[];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Bt,{isOpen:!!s,onClose:function(){l(null)},room:s,refetch:r}),(0,c.jsx)(tt.w,{columns:u,dataSource:d,className:i,hasStickyHeader:!0,headerClassName:"top-16"})]})},Qt=r(69717);function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $t=function(e){var t=e.hideHeader,r=void 0!==t&&t,i=(0,v.wh)().currentCommunity,o=(i=void 0===i?{}:i).supports_live_streams,s=(0,G.R)().liveStreamsLimitsEnabled,l=function(){var e=Kt((0,n.useState)(1),2),t=e[0],r=e[1],i=(0,f.useQuery)(Qt.a.liveStreams.index({params:{page:t,per_page:10}}),{keepPreviousData:!0}),o=i.isLoading,a=i.isFetching,s=i.data,l=i.refetch,c=(null===s||void 0===s?void 0:s.records)||[],u=null===s||void 0===s?void 0:s.count,d=null===s||void 0===s?void 0:s.page_count,m=u?Math.ceil(u/10):0,p=!(null===s||void 0===s||!s.has_next_page),h=10*(t-1)+1;return{page:t,records:c,totalRecordCount:u,pageRecordCount:d,pageCount:m,hasNextPage:p,startRecordNumber:h,endRecordNumber:h+d-1,isLoading:o,isFetching:a,refetch:l,fetchNextPage:fetchPrevPage:function(){r(Math.max(t-1,1))}}}(),u=l.records,d=l.page,m=l.hasNextPage,p=l.totalRecordCount,h=l.startRecordNumber,b=l.endRecordNumber,y=l.isLoading,g=l.refetch,x=l.fetchNextPage,_=l.fetchPrevPage,j=p>0;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[r?(0,c.jsx)(A.S,{title:(0,a.t)("live_streams_settings")}):(0,c.jsx)(Z,{pageTitle:(0,a.t)("live_streams_settings"),rightContent:(0,c.jsx)(q.G,{inSettings:!0}),hasBorder:!0}),(0,c.jsxs)($,{maxWidth:"none",children:[o&&(0,c.jsx)(c.Fragment,{children:y?(0,c.jsx)(W.m,{}):(0,c.jsxs)(c.Fragment,{children:[s&&j&&(0,c.jsx)(Je,{}),p>0&&(0,c.jsx)(Q.w.Headline,{className:"!px-0",children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("live_streams.count",{count:p})})}),j?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Wt,{records:u,refetch:g,className:"live-stream-settings__table",totalRecordCount:p}),(0,c.jsx)(Ye,{startRecordNumber:h,endRecordNumber:b,totalRecordCount:p,page:d,fetchPrevPage:_,hasNextPage:m,fetchNextPage:x})]}):(0,c.jsx)(ee,{})]})}),!o&&(0,c.jsx)("div",{className:"border-primary bg-primary border p-6 text-center lg:rounded-lg lg:p-36",children:(0,c.jsx)(H.s,{})})]})]})},Yt=r(97529),Xt=r(24880),er=r(34974),tr=["notice","alert","display_community_switcher","children"];function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ar=new f.QueryClient(p.Vr),sr=(0,er.P)((function(e){var t=e.notice,r=e.alert,n=e.display_community_switcher,i=e.children,o=or(e,tr);return(0,c.jsx)(f.QueryClientProvider,{client:ar,children:(0,c.jsx)(Xt.i,{backendProps:nr({notice:t,alert:r,display_community_switcher:n},o),children:(0,c.jsx)(v.HB,{children:(0,c.jsx)(l.VW,{children:(0,c.jsx)(D.S,{children:i})})})})})}),(function(){return(0,c.jsx)(Yt.D,{})})),lr=r(74238),cr=r(78819),ur=r(73377),dr=r(24185),fr=r(63099),mr=r(71362),pr=r(87536),hr=r(61149),br=/^((0?0?\.([1-9]\d*|0[1-9]\d*))|(([1-9]|0[1-9])\d*(\.\d+)?))$/,yr=r(81208),vr=r(649),gr=r(89761),xr=r(91741),_r=function(){var e=(0,v.wh)(),t=e.currentCommunitySettings,r=e.isLoading,n=(0,xr.K)(),i=n.data,o=n.isLoading,s=(0,pr.Gc)().watch;if(r||o)return(0,c.jsx)(l.aN,{});var u=i.find((function(e){return e.is_default})),d=s("currency_id"),f=i.find((function(e){return e.id===parseInt(d||u.id)})),m=(0,vr.Bj)(f);return(0,c.jsxs)(c.Fragment,{children:[t.currencies_enabled&&(0,c.jsx)(gr.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_coupons.form",formItemRules:{required:!0}}),(0,c.jsx)(l.l0.Item,{fullWidth:!1,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,name:"amount",rules:{required:!0,validate:{inputMinAmount:function(e){return!((0,vr.Mz)(e)<=0)||(0,a.t)("settings.paywall_coupons.alerts.error.amount_not_zero")}}},transformValue:m,translationRoot:"settings.paywall_coupons.form",variant:"extra-bottom-margin",children:(0,c.jsx)(yr.a,{currency:f,name:"amount","data-testid":"coupon_amount"})})]})},jr=function(e){var t=e.paywallCoupon,r=(0,(0,pr.Gc)().watch)("type");return(0,c.jsxs)(c.Fragment,{children:[!t&&(0,c.jsx)(l.l0.Item,{name:"code",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",tooltipText:s().t("settings.paywall_coupons.form.code_description"),hideDescription:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.Input,{"data-testid":"coupon_code"})}),(0,c.jsx)(l.l0.Item,{name:"name",translationRoot:"settings.paywall_coupons.form",label:s().t("settings.paywall_coupons.form.name_label"),rules:{required:s().t("settings.paywall_coupons.alerts.error.name_is_required"),maxLength:40},hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",hideDescription:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.Input,{maxLength:"40","data-testid":"coupon_name"})}),t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.l0.Item,{name:"active",inline:!0,hideBorder:!0,hideDescription:!0,label:s().t("settings.paywall_coupons.form.active"),children:(0,c.jsx)(l.l0.ToggleSwitch,{variant:"small"})}),(0,c.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,c.jsx)("label",{children:s().t("settings.paywall_coupons.form.code_info")}),(0,c.jsx)("p",{children:t.code})]}),(0,c.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,c.jsx)("label",{children:s().t("settings.paywall_coupons.form.terms")}),(0,c.jsx)("p",{children:t.terms})]}),t.max_redemptions&&(0,c.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,c.jsx)("label",{children:s().t("settings.paywall_coupons.form.max_redemptions")}),(0,c.jsx)("p",{children:t.max_redemptions})]}),(0,c.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,c.jsx)("label",{children:s().t("settings.paywall_coupons.form.redemptions")}),(0,c.jsx)("p",{children:t.redemptions_count})]})]}),!t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.l0.Item,{name:"type",hideDescription:!0,translationRoot:"settings.paywall_coupons.form",rules:{required:s().t("settings.paywall_coupons.alerts.error.type_is_required")},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,c.jsx)(l.l0.SelectNative,{name:"type",options:[{label:s().t("settings.paywall_coupons.form.type_options.fixed"),value:hr.V5.fixed},{label:s().t("settings.paywall_coupons.form.type_options.percent"),value:hr.V5.percent}],"data-testid":"coupon_type"})}),(0,hr.Dh)(r)&&(0,c.jsx)(_r,{}),(0,hr.hU)(r)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"paywall-coupons-form__input_percent_symbol",children:"%"}),(0,c.jsx)(l.l0.Item,{name:"amount",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:s().t("settings.paywall_coupons.alerts.error.amount_not_zero"),pattern:{value:br,message:s().t("settings.paywall_coupons.alerts.error.amount_not_zero")}},variant:"extra-bottom-margin",hideDescription:!0,children:(0,c.jsx)(l.l0.Input,{"data-testid":"coupon_amount"})})]})]})]})},wr=r(4039);function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sr=function(){var e=(0,pr.Gc)().watch,t=(0,wr.g)(),r=t.activePaywalls,i=t.isLoading,o=t.isSuccess,a=e("type"),u=e("currency_id"),d=e("all_paywalls"),f=Or((0,n.useState)(""),2),m=f[0],p=f[1];(0,n.useEffect)((function(){p("")}),[]);var h=(0,n.useMemo)((function(){return r.filter((function(e){return(0,hr.hU)(a)||e.currency.id==u})).filter((function(e){var t=e.display_name;return!m||-1!==t.toLowerCase().search(m.toLowerCase())})).map((function(e){return{value:e.id,text:e.display_name}}))}),[r,u,a,m]);if(i||!o)return(0,c.jsx)(l.aN,{});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.l0.Item,{name:"all_paywalls",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.SelectNative,{name:"all_paywalls",options:[{label:s().t("settings.paywall_coupons.form.paywall_options.all"),value:!0},{label:s().t("settings.paywall_coupons.form.paywall_options.specific"),value:!1}],"data-testid":"coupon_applies_to"})}),"false"==d&&(0,c.jsx)(l.l0.Item,{name:"paywall_ids",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.Select,{name:"paywall_ids",variant:"tags",data:h,onSearch:function(e){p(e)},minSearchValueLength:0,showArrow:!1})})]})},kr=r(15830),Cr=function(e){var t=e.paywallCoupon,r=(0,(0,pr.Gc)().watch)(),n=r.duration,i=r.enable_start_date,o=r.enable_end_date,a=r.enable_max_redemptions,u=(0,Xe.ED)(Xe.tq),d="F d, Y G:i K (\\".concat(u.split("").join("\\"),")");return(0,c.jsxs)(c.Fragment,{children:[!t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.l0.Item,{name:"duration",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,tooltipText:s().t("settings.paywall_coupons.form.duration_description"),children:(0,c.jsx)(l.l0.SelectNative,{options:[{label:s().t("settings.paywall_coupons.form.duration_options.forever"),value:"forever"},{label:s().t("settings.paywall_coupons.form.duration_options.once"),value:"once"},{label:s().t("settings.paywall_coupons.form.duration_options.repeating"),value:"repeating"}],"data-testid":"coupon_duration"})}),"repeating"==n&&(0,c.jsx)(l.l0.Item,{name:"duration_in_months",label:s().t("settings.paywall_coupons.form.duration_in_months"),hideDescription:!0,hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",rules:{required:s().t("settings.paywall_coupons.alerts.error.duration_in_monts_not_zero")},children:(0,c.jsx)(l.l0.Input,{type:"number",min:"1","data-testid":"coupon_duration_in_months"})})]}),(0,c.jsx)(l.l0.Item,{name:"enable_start_date",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:s().t("settings.paywall_coupons.form.redeemable_date"),children:(0,c.jsx)(l.l0.SelectNative,{options:[{label:s().t("settings.paywall_coupons.form.date_options.immediately"),value:!1},{label:s().t("settings.paywall_coupons.form.date_options.set_date"),value:!0}],"data-testid":"coupon_start_date"})}),"true"==i&&(0,c.jsx)(l.Wr,{dateFormat:d,name:"starts_at",fullWidth:!0,minuteIncrement:5,dataTestId:"redeemable_from_date",locale:(0,kr.bS)()}),(0,c.jsx)(l.l0.Item,{name:"enable_end_date",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:s().t("settings.paywall_coupons.form.redeemable_until_date"),children:(0,c.jsx)(l.l0.SelectNative,{options:[{label:s().t("settings.paywall_coupons.form.date_options.disable"),value:!1},{label:s().t("settings.paywall_coupons.form.date_options.until"),value:!0}],"data-testid":"coupon_end_date"})}),"true"==o&&(0,c.jsx)(l.Wr,{dateFormat:d,name:"ends_at",fullWidth:!0,minuteIncrement:5,dataTestId:"redeemable_until_date"}),(0,c.jsx)("div",{className:"!hidden",children:(0,c.jsx)(l.l0.Item,{name:"enable_max_redemptions",hideBorder:!0,hideDescription:!0,fullWidth:!0,label:s().t("settings.paywall_coupons.form.max_redemptions"),tooltipText:s().t("settings.paywall_coupons.form.max_redemptions_description"),children:(0,c.jsx)(l.l0.SelectNative,{options:[{label:s().t("settings.paywall_coupons.form.limit_options.disable"),value:!1},{label:s().t("settings.paywall_coupons.form.limit_options.enable"),value:!0}]})})}),"true"==a&&(0,c.jsx)("div",{className:"paywall-coupons-form__fields__no_margin",children:(0,c.jsx)(l.l0.Item,{name:"max_redemptions",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:s().t("settings.paywall_coupons.form.max_redemptions_placeholder"),variant:"extra-bottom-margin",rules:{required:s().t("settings.paywall_coupons.alerts.error.max_redemptions_not_zero"),min:1},children:(0,c.jsx)(l.l0.Input,{type:"number",min:"1"})})})]})},Nr={DETAILS:"Details",PAYWALLS:"Paywalls",USAGE:"Usage"};function Tr(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}const Ar=function(e){var t=e.activeTab,r=e.setActiveTab,n=(0,pr.Gc)().trigger,i=function(){var e,i=(e=se().mark((function e(i){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(t!=Nr.DETAILS||i!=Nr.USAGE){e.next=7;break}return e.abrupt("return");case 7:r(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Tr(o,n,i,a,s,"next",e)}function s(e){Tr(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return i.apply(this,arguments)}}();return(0,c.jsx)(l.mQ,{wrapperClassName:"px-6",controlled:!0,activeTab:t,onClick:i,options:Object.values(Nr).map((),variant:"underline"})};var Er=r(34128),Ir=r(88116),Dr=function(e){var t=e.refetchCoupons,r=void 0===t?null:t,n=e.onClose,i=void 0===n?null:n,o=e.paywallCoupon,a=void 0===o?null:o,c=(0,l.pm)(),u=c.success,d=c.error;return{useListPaywallCoupons:function(){return(0,f.useQuery)("paywall-coupons",(function(){return(0,Er.UT)(S.av.paywallCoupons.index())}))},updateMutation:(0,f.useMutation)((,{onSuccess:function(){u(s().t("settings.paywall_coupons.alerts.success.updated")),i(),r()},onError:function(e){console.error(e.errorDetails),d(e.errorDetails,{duration:"long"})}}),createMutation:(0,f.useMutation)((function(e){return Ir.p.createPaywallCoupon(e)}),{onSuccess:function(){u(s().t("settings.paywall_coupons.alerts.success.created")),i(),r()},onError:function(e){console.error(e.errorDetails),d(e.errorDetails,{duration:"long"})}}),destroyMutation:(0,f.useMutation)((,{onSuccess:function(){u(s().t("settings.paywall_coupons.alerts.success.deleted")),r()},onError:function(e){console.error(e.message),d(e.message,{duration:"long"})}})}};function Lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ur=function(e){var t=e.refetchCoupons,r=e.onClose,i=e.paywallCoupon,o=function(e){var t=e.paywallCoupon,r=e.refetchCoupons,i=e.onClose,o=Fr((0,n.useState)(Nr.DETAILS),2),a=o[0],s=o[1],l=Dr({refetchCoupons:r,onClose:i,paywallCoupon:t}),c=l.createMutation,u=l.updateMutation,d=t?u:c;return{getFormDefaults:function(e){var t,r;return e?{name:e.name,currency_id:null!==(t=null===(r=e.currency)||void 0===r?void 0:r.id)&&void 0!==t?t:"",active:e.active,starts_at:e.starts_at,ends_at:e.ends_at,paywall_ids:e.paywall_ids,all_paywalls:e.all_paywalls.toString(),enable_start_date:(!!e.starts_at).toString(),enable_end_date:(!!e.ends_at).toString(),type:e.type}:{type:hr.V5.fixed,currency_id:""}},handleSubmit:function(e){if(a==Nr.DETAILS)s(Nr.PAYWALLS);else if(a==Nr.PAYWALLS)s(Nr.USAGE);else if(a==Nr.USAGE){var t=e.amount;return(0,hr.Dh)(e.type)&&(t=(0,vr.Mz)(t)),d.mutate(Mr(Mr({},e),{},{amount:t}))}},setActiveTab:s,mutation:d,activeTab:a}}({paywallCoupon:i,refetchCoupons:t,onClose:r}),a=o.getFormDefaults,u=o.handleSubmit,d=o.setActiveTab,f=o.mutation,m=o.activeTab,p=function(){switch(m){case Nr.DETAILS:return(0,c.jsx)(jr,{paywallCoupon:i});case Nr.USAGE:return(0,c.jsx)(Cr,{paywallCoupon:i});case Nr.PAYWALLS:return(0,c.jsx)(Sr,{})}};return(0,c.jsx)(l.l0,{onSubmit:u,className:"paywall-coupons-form",defaultValues:a(i),children:function(e){var t=e.formState.isSubmitting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ar,{activeTab:m,setActiveTab:d}),(0,c.jsx)("div",{className:"paywall-coupons-form__fields h-0 overflow-y-auto",children:p()}),(0,c.jsx)(mr.d.Footer,{sticky:!0,children:(0,c.jsxs)(l.zx,{type:"submit",variant:"primary",full:!0,disabled:t||f.isLoading,children:[m!=Nr.USAGE&&s().t("settings.paywall_coupons.buttons.next"),m==Nr.USAGE&&!i&&s().t("settings.paywall_coupons.buttons.create"),m==Nr.USAGE&&i&&s().t("settings.paywall_coupons.buttons.update")]})})]})}})};function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zr=function(e){var t=e.refetchCoupons,r=zr((0,fr.k)(!1),2),n=r[0],i=r[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.zx,{variant:"circle",onClick:children:s().t("settings.paywall_coupons.buttons.new")}),(0,c.jsx)(mr.d,{open:n,title:s().t("settings.paywall_coupons.new_title"),onClose:i,noWrapperPadding:!0,children:(0,c.jsx)(Ur,{refetchCoupons:t,onClose:i})})]})},Hr=r(72855),qr=r(84834),Gr=r(61533),Wr=function(e){var t=e.paywallCoupon,r=e.refetchCoupons,n=e.isDrawerVisible,i=e.toggleDrawer;return(0,c.jsx)(mr.d,{open:n,title:I18n.t("settings.paywall_coupons.edit_title"),onClose:i,noWrapperPadding:!0,children:(0,c.jsx)(Ur,{refetchCoupons:r,onClose:i,paywallCoupon:t})})};function Qr(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Kr(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Qr(o,n,i,a,s,"next",e)}function s(e){Qr(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yr=function(e){var t,r,i=e.paywallCoupon,o=e.refetchCoupons,s=Jr((0,n.useState)(!1),2),l=s[0],u=s[1],d=Jr((0,fr.k)(!1),2),f=d[0],m=d[1],p=(0,qr.x)().handleClose,h=Dr({refetchCoupons:o,paywallCoupon:i}).destroyMutation,b=h.mutateAsync,y=h.isLoading,v=Boolean(null===i||void 0===i||null===(t=i.policies)||void 0===t?void 0:t.can_edit),g=Boolean(null===i||void 0===i||null===(r=i.policies)||void 0===r?void 0:r.can_destroy),x=(0,n.useMemo)((function(){var e=[];return v&&e.push({key:"edit-coupon",label:(0,a.t)("settings.paywall_coupons.buttons.edit"),onClick:function(){p(),m()}}),g&&e.push({key:"delete-coupon",label:(0,a.t)("settings.paywall_coupons.buttons.delete"),hasDanger:!0,onClick:function(){p(),u(!0)}}),e}),[v,g,p,m]);return(0,c.jsxs)(c.Fragment,{children:[v&&(0,c.jsx)(Wr,{paywallCoupon:i,refetchCoupons:o,isDrawerVisible:f,toggleDrawer:m}),(0,c.jsx)(Q.w.Actions,{children:x.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick;return(0,c.jsx)(Q.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))}),g&&(0,c.jsx)(Gr.cV,{title:(0,a.t)("settings.paywall_coupons.alerts.confirmation.delete_title"),confirmText:(0,a.t)("confirm"),cancelText:(0,a.t)("cancel"),confirmVariant:"danger",isOpen:l,disabled:y,onCancel:function(){return u(!1)},onClose:function(){return u(!1)},onConfirm:Kr(se().mark(()),children:(0,c.jsx)("p",{children:(0,a.t)("settings.paywall_coupons.alerts.confirmation.delete")})})]})},Xr=function(e){var t=e.canCreate,r=e.shouldHideHeader,n=(0,Dr({}).useListPaywallCoupons)(),i=n.data,o=n.refetch,a=[{title:s().t("settings.paywall_coupons.form.code_info").toUpperCase(),dataIndex:"code",key:"code"},{title:s().t("settings.paywall_coupons.form.terms").toUpperCase(),dataIndex:"terms",key:"terms"},{title:s().t("settings.paywall_coupons.form.redemptions").toUpperCase(),dataIndex:"redemptions",key:"redemptions",className:et.M.lg,tdClassName:et.M.lg},{title:s().t("settings.paywall_coupons.form.status").toUpperCase(),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"}],l=null===i||void 0===i?void 0:i.map((function(e){return{key:e.id,name:e.name,redemptions:e.redemptions_count,terms:e.terms,code:e.code,status:(0,c.jsx)(Hr.O,{variant:e.active?"success":"danger",textTransform:"capitalize",children:e.status}),action:(0,c.jsx)(Yr,{paywallCoupon:e,refetchCoupons:o}),rowClassName:"group"}}));return(0,c.jsxs)(c.Fragment,{children:[!r&&(0,c.jsx)("div",{className:"table-wrapper",children:(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("h3",{children:s().t("settings.paywall_coupons.title")}),t&&(0,c.jsx)(Zr,{refetchCoupons:o})]})}),(0,c.jsx)("div",{className:"paywall-coupons-list","data-testid":"coupon-list",children:(0,c.jsx)(tt.w,{columns:a,className:"paywall-coupons-list__table",dataSource:l||[],hasStickyHeader:!0,headerClassName:"top-[116px]"})})]})},en=function(){var e=(0,v.wh)().currentCommunityMember,t=(0,Dr({}).useListPaywallCoupons)(),r=t.refetch,n=t.data,i=e.policies.can_create_paywall_coupon,o=(null===n||void 0===n?void 0:n.length)||0;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.coupons.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-plans"},rightContent:i&&(0,c.jsx)(Zr,{refetchCoupons:r}),headline:o>0&&(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.coupons.count",{count:o})})})}),(0,c.jsx)("div",{className:"px-6",children:(0,c.jsx)(Xr,{shouldHideHeader:!0})})]})},tn=r(66007),rn=r(23560),nn=r.n(rn),on=function(e){var t=e.errorMessage,r=e.onLoad,i=window.location.href,o=(0,dr.k6)(),a=(0,f.useQuery)(i,{retry:0}),s=a.data,u=a.isLoading,d=a.error;return(0,n.useEffect)((function(){!u&&nn()(r)&&r()}),[u,r]),u?(0,c.jsx)(l.aN,{}):d&&t?(o.push("/settings?error=".concat(t)),(0,c.jsx)("div",{})):(0,c.jsx)(tn.Z,{html:null===s||void 0===s?void 0:s.html_content})},an=function(e){var t=e.pageTitle;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:t||(0,a.t)("settings.members.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-manage-members"}}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"view-plans"}),(0,c.jsx)($,{children:(0,c.jsx)(on,{})})]})},sn=r(40160),ln=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{layoutConfigProps:{disableRightSidebar:!0},leftContent:(0,c.jsx)(F.y,{children:(0,c.jsx)(sn.rU,{to:"/members/invitation_links",className:"text-dark",children:(0,a.t)("settings.edit_invitation_links.title")})}),pageMetaProps:{bodyClassNames:"view-manage-members"}}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"view-plans"}),(0,c.jsx)($,{children:(0,c.jsx)(on,{})})]})},cn=function(){var e=(0,v.wh)().currentCommunitySettings||{};return{isReactifiedSettingsHomeEnabled:e.reactified_settings_home_enabled,isReactifiedSettingsInvitationLinksEnabled:e.reactified_settings_invitation_links_enabled,isReactifiedSettingsModerationEnabled:e.reactified_settings_moderation_enabled}},un=function(e){var t=e.title,r=e.subtitle,n=e.children;return(0,c.jsxs)("div",{className:"form-content",children:[!!t&&(0,c.jsx)("h1",{children:t}),!!r&&(0,c.jsx)("div",{className:"subtitle",children:r}),n]})},dn=function(e){var t=e.children;return(0,c.jsx)("div",{className:"form-wrapper",children:t})},fn=r(96486),mn=r.n(fn),pn=r(23694),hn=r(24901),bn=function(e){var t=e.children;return(0,c.jsx)("div",{className:"w-full",children:t})},yn=function(e){var t=e.name,r=e.translationRoot,n=e.id,i=e.label,o=e.description,a=e.childrenWrapper,s=void 0===a?bn:a,l=e.isHorizontal,u=void 0!==l&&l,d=e.hideLabel,f=void 0!==d&&d,m=e.placeholder,p=e.hidePlaceholder,h=void 0!==p&&p,b=e.hideDescription,y=void 0!==b&&b,v=e.rules,g=e.className,x=e.fullWidth,_=e.children;return(0,c.jsx)(ce.l.Item,{id:null!==n&&void 0!==n?n:(0,fn.uniqueId)("".concat(t,"-")),name:t,translationRoot:r,label:i,description:o,className:J()("flex gap-4",{"flex-col":!u},g),labelWrapperClassName:"!w-full !order-none !p-0",placeholder:m,hidePlaceholder:h,hideBorder:!0,hideLabel:f,hideDescription:y,childrenWrapper:s,rules:v,fullWidth:x,children:_})},vn=r(1320),gn=r(20695),xn=r(44133);function _n(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){On(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function On(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pn="settings.general.messages",Sn=["name","locale","slug","is_private","allow_signups_to_public_community","private_signup_link_label","private_signup_link_url","prefs","logo","icon","default_og_image","reply_to_email","community_switcher_enabled","white_label","default_existing_member_space_id","default_logged_out_space_id","default_new_member_space_id","custom_cta_for_share_links","locked_post_cta_heading","locked_post_cta_body","locked_post_cta_button_text","locked_post_cta_button_url","custom_tos_enabled","custom_tos"],kn=["default_space_ids","ios_app_enabled","show_ios_app_banner","deactivate_account_enabled","browser_notifications_enabled","allow_profile_search_indexing","truncate_post_body_in_email_notifications","hide_emails_on_member_profiles","allow_members_to_go_live","enforce_otp_for_signup"],Cn="".concat(String(gn.hz),"-PunditUserContext"),Nn=function(){var e,t,r=(0,l.pm)(),i=(0,f.useQueryClient)(),o=(0,v.wh)(),s=o.isLoading,c=o.currentCommunity,u=void 0===c?{}:c,d=o.currentCommunitySettings,m=void 0===d?{}:d,p=o.currentUser,h=void 0===p?{}:p,b=(0,xn._)(Cn).resetValue,y=(h||{}).email,g=(0,n.useMemo)((function(){var e=(u||{}).reply_to_email;return wn(wn({},(0,fn.pick)(u,[].concat(Sn,kn))),{},{reply_to_email:e||y})}),[u,y]),x=(0,f.useMutation)((function(e){var t=(0,fn.pick)(e,Sn),r=(0,fn.pick)(e,kn);return vn.$.update({community:t,community_setting:r})}),{onSuccess:(e=se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.invalidateQueries(["pundit-user"]);case 2:r.success((0,a.t)([Pn,"success"]),{onComplete:function(){var e,r,n,i,o,a,s,l,c;r=(e=t||{}).slug,n=e.full_url,i=e.prefs,a=(o=u||{}).slug,s=o.prefs,l=(i||{}).brand_color,c=(s||{}).brand_color,(0,fn.isEqual)(l,c)?r!==a&&n&&(b(),window.location.replace("".concat(n,"settings"))):window.location.reload()}});case 3:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){_n(o,n,i,a,s,"next",e)}function s(e){_n(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return t.apply(this,arguments)}),onError:function(){r.error((0,a.t)([Pn,"error"]))}}),_=x.mutate;return{isLoading:s,isSaving:x.isLoading,defaultValues:g,currentCommunity:u,currentCommunitySettings:m,handleSubmit:function(e,t){var r=t.setError;_(e,{onError:function(e){var t=e||{},n=t.message,i=t.errorDetails;i&&Object.keys(i).forEach((function(e){r(e,{message:(0,a.t)(["settings.validation",e],{defaultValue:n})})}))}})}}},Tn=function(e){var t=e.name,r=e.hasEmbeds,n=void 0!==r&&r,i=e.hasVideoUpload,o=void 0!==i&&i,a=e.hasFileUploadLink,s=void 0!==a&&a,u=e.hasGiphyPicker,d=void 0!==u&&u,f=e.hasMentions,m={embeds:n,videoUpload:o,fileUploadLink:s,giphyPicker:d,mentions:void 0!==f&&f};return(0,c.jsx)(l.OP,{id:"editor-".concat(t),name:t,className:"rounded-lg ring-current focus-within:ring-1",preventAccidentalLeave:!1,featureFlags:m})},An=function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("bg-tertiary my-4 flex flex-col gap-5 rounded-lg p-5",t),children:r})},En="settings.validation",In=function(e){var t=null!==e&&void 0!==e?e:{},r=t.isRequired,n=void 0===r||r,i=t.maxLength,o=void 0===i?255:i,s=t.requiredText,l=void 0===s?(0,a.t)([En,"this_field_is_required"]):s,c=t.maxLengthText;return{required:{value:n,message:l},maxLength:{value:o,message:void 0===c?(0,a.t)([En,"maximum_number_of_characters_allowed"],{count:o}):c}}},Dn="settings.general.defaults",Ln=function(){var e=In({isRequired:!1});return(0,c.jsxs)(An,{children:[(0,c.jsx)(yn,{className:"!py-0",name:"locked_post_cta_heading",translationRoot:Dn,hideLabel:!0,hidePlaceholder:!1,rules:e,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(Tn,{name:"locked_post_cta_body"}),(0,c.jsx)(yn,{className:"!py-0",name:"locked_post_cta_button_text",translationRoot:Dn,hideLabel:!0,hidePlaceholder:!1,rules:e,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(yn,{className:"!py-0",name:"locked_post_cta_button_url",translationRoot:Dn,hideDescription:!0,hideLabel:!0,hidePlaceholder:!1,rules:e,children:(0,c.jsx)(l.l0.Input,{})})]})},Mn=function(){var e=In();return(0,c.jsx)(An,{children:(0,c.jsx)(yn,{name:"custom_tos",translationRoot:"settings.general.defaults",className:"!py-0",hidePlaceholder:!1,rules:e,children:(0,c.jsx)(l.l0.Input,{})})})};function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(r),!0).forEach((function(t){Bn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Un="settings.general.defaults",zn={containerClassname:"relative",dropdownClassName:"!top-12 !max-h-72 z-20",variant:"form-input"},Vn=function(){var e=Nn().currentCommunity,t=(0,v.nT)().records,r=void 0===t?[]:t,i=(0,pr.Gc)().getValues,o=e||{},s=o.name,u=o.allow_white_label,d=o.subscription,f=o.home_page_enabled,m=o.supports_live_streams,p=o.has_plus_plan,h=o.policies,b=(h=void 0===h?{custom_login_enabled:!1}:h).custom_login_enabled,y=(d||{}).on_grace_period,g=i("custom_cta_for_share_links"),x=i("custom_tos_enabled");return(0,c.jsx)(pn.z,{title:(0,a.t)("section_defaults"),noPadding:!0,defaultOpen:!0,children:(0,c.jsxs)("div",{className:"pb-4",children:[(0,c.jsx)(yn,{name:"community_switcher_enabled",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"community_switcher_enabled",variant:"small"})}),(0,c.jsx)(yn,{name:"ios_app_enabled",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,description:(0,c.jsx)(tn.Z,{html:(0,a.t)([Un,"ios_app_enabled_description"])}),children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"ios_app_enabled",variant:"small"})}),(0,c.jsx)(yn,Fn(Fn({name:"show_ios_app_banner",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0},p&&{description:(0,c.jsx)(tn.Z,{html:(0,a.t)([Un,"show_ios_app_banner_description_for_plus"],{community_name:s})})}),{},{children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"show_ios_app_banner",variant:"small"})})),(0,c.jsx)(yn,{name:"deactivate_account_enabled",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"deactivate_account_enabled",variant:"small"})}),(0,c.jsx)(yn,{name:"allow_profile_search_indexing",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"allow_profile_search_indexing",variant:"small"})}),(0,c.jsx)(yn,{name:"truncate_post_body_in_email_notifications",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"truncate_post_body_in_email_notifications",variant:"small"})}),!f&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(yn,{name:"default_new_member_space_id",translationRoot:Un,isHorizontal:!0,children:(0,c.jsx)(hn.M,Fn({spaces:r},zn))}),(0,c.jsx)(yn,{name:"default_existing_member_space_id",translationRoot:Un,isHorizontal:!0,children:(0,c.jsx)(hn.M,Fn({spaces:r},zn))}),(0,c.jsx)(yn,{name:"default_logged_out_space_id",translationRoot:Un,isHorizontal:!0,children:(0,c.jsx)(hn.M,Fn({spaces:r},zn))})]}),(u||y)&&(0,c.jsx)(yn,{name:"white_label",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"white_label",variant:"small"})}),(0,c.jsx)(yn,{name:"custom_cta_for_share_links",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"custom_cta_for_share_links",variant:"small"})}),g&&(0,c.jsx)(Ln,{}),(0,c.jsx)(yn,{name:"custom_tos_enabled",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"custom_tos_enabled",variant:"small"})}),x&&(0,c.jsx)(Mn,{}),(0,c.jsx)(yn,{name:"hide_emails_on_member_profiles",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"hide_emails_on_member_profiles",variant:"small"})}),m&&(0,c.jsx)(yn,{name:"allow_members_to_go_live",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"allow_members_to_go_live",variant:"small"})}),!b&&(0,c.jsx)(yn,{name:"enforce_otp_for_signup",translationRoot:Un,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"enforce_otp_for_signup",variant:"small"})})]})})};function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(r),!0).forEach((function(t){qn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qn="landing-page-settings",Kn=function(){var e,t,r=(0,l.pm)(),i=r.success,o=r.error,s=(0,f.useQueryClient)(),c=(0,v.nT)(),u=c.records,d=void 0===u?[]:u,m=c.isLoading,p=Gn((0,n.useState)([]),2),h=p[0],b=p[1],y=Gn((0,n.useState)([]),2),g=y[0],x=y[1],_=(0,f.useQuery)([Qn],vn.oM.get),j=_.isLoading,w=_.data||{},O=w.logged_in_user_space_options,P=w.logged_out_user_space_options,S=w.post_sort_options,k=w.settings,C=null===k||void 0===k||null===(e=k.community_setting)||void 0===e||null===(t=e.meta_tags)||void 0===t?void 0:t.id,N=(0,f.useMutation)({mutationFn:function(e){var t,r,n,i,o,a=null===e||void 0===e||null===(t=e.community)||void 0===t?void 0:t.logged_in_user_home_page_banner_media,s=null!==(r=null===a||void 0===a?void 0:a.signedId)&&void 0!==r?r:a,l=null===e||void 0===e||null===(n=e.community)||void 0===n?void 0:n.logged_out_user_home_page_banner_media,c=null!==(i=null===l||void 0===l?void 0:l.signedId)&&void 0!==i?i:l,u=null===e||void 0===e||null===(o=e.community_setting)||void 0===o?void 0:o.meta_tags.opengraph_image,d=null!==u&&void 0!==u&&u.signedId?{file:u.signedId}:u,f=Hn(Hn({},e),{},{community:Hn(Hn({},e.community),{},{logged_in_user_home_page_banner_media:s,logged_out_user_home_page_banner_media:c}),community_setting:Hn(Hn({},e.community_setting),{},{meta_tags:Hn(Hn({},e.community_setting.meta_tags),{},{opengraph_image:d})})});return Boolean(!u&&C)?Promise.all([vn.oM.update({landing_page_settings:f}),vn.oM.deleteOpenGraphImage(C)]):vn.oM.update({landing_page_settings:f})},onSuccess:function(){s.invalidateQueries(Qn),i((0,a.t)(["settings.messages.success"]))},onError:function(){return o((0,a.t)(["settings.messages.error"]))}}),T=N.mutate,A=N.isLoading,E=(0,n.useCallback)((function(e){return d.filter(()}),[d]),I=(0,f.useMutation)({mutationFn:function(){return vn.oM.resetBannerPreferences()},onSuccess:function(){return i((0,a.t)(["settings.home.customize_home_banner.reset_member_closed_banner_preferences_success"]))},onError:),D=I.mutate,L=I.isLoading;return(0,n.useEffect)((function(){j||m||(b(E(O)),x(E(P)))}),[j,m,O,P,d,E]),{isLoading:j||m,isSaving:A,defaultValues:k,postSortOptions:S,loggedInUserSpaces:h,loggedOutUserSpaces:g,isSavingWelcomeBannerPreferences:L,resetWelcomeBannerPreferences:D,handleSubmit:T}},Jn=r(20640),$n=r.n(Jn),Yn=function(){var e=(0,l.pm)(),t=return{getInvitationUrl:t,copyInvitation:function(r){var n=t(r);$n()(n),e.success((0,a.t)(["settings.invitation_links","invitation_link_copied"]),{duration:"short",shouldUseProgress:!1})}}};function Xn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ti(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ri=function(){var e=(0,f.useQueryClient)(),t=Ui(),r=t.mutate,i=t.mutateAsync,o=t.isLoading,s=t.isError,l=(0,pr.Gc)(),c=l.watch,u=l.setValue,d=l.formState,m=c("id"),p=c("name"),h=c("schedule"),b=ei((0,n.useState)(p),2),y=b[0],v=b[1],g=Boolean(p),x=(0,a.t)("settings.workflows.form.untitled_workflow"),_=function(){var t,r=(t=se().mark((function t(r){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==y){t.next=2;break}return t.abrupt("return");case 2:if(""!==r.trim()){t.next=5;break}return u("name",y),t.abrupt("return");case 5:return t.next=7,i({name:r});case 7:e.invalidateQueries({queryKey:["workflows",m]}),v(r);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Xn(o,n,i,a,s,"next",e)}function s(e){Xn(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),j=d.defaultValues,w=null===j||void 0===j?void 0:j.workflow_type,O="dynamic"===w,P="bulk_action"===w,S="scheduled"===w,k=(null===j||void 0===j?void 0:j.runs_count)>0;return{id:m,hasRuns:k,name:p,type:w,placeholderName:x,hasName:g,saveWorkflowName:_,updateWorkflow:r,updateWorkflowAsync:i,isBulkAction:P,isDynamic:O,isScheduled:S,schedule:h,isSavingWorkflow:o,isWorkflowError:s}};function ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ii(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(){return(0,Xe.Cp)(vn.nH.activate({id:r,params:t}),500)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(r),!0).forEach((function(t){ii(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ni(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){console.error(e)}},e))};function ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function si(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(){return(0,Xe.Cp)(vn.nH.createRun({workflowId:t}),500)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(r),!0).forEach((function(t){si(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ai(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){console.error(e)}},e))};function ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function di(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function fi(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){di(o,n,i,a,s,"next",e)}function s(e){di(o,n,i,a,s,"throw",e)}a(void 0)}))}}var mi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ri().isBulkAction,r=(0,l.pm)(),n=oi().mutateAsync,i=li().mutateAsync;return(0,f.useMutation)(fi(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!t){e.next=5;break}return e.next=5,i();case 5:case"end":return e.stop()}}),e)}))),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(r),!0).forEach((function(t){ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){r.error(e.message)}},e))};function pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.pm)();return(0,f.useMutation)((function(e){return vn.nH.create({body:e})}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(r),!0).forEach((function(t){hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){t.error(e.message)}},e))},yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(e){return t,e)}),e)},vi=["templateId"];function gi(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ji=function(e){var t=e.id,r=e.options,n=void 0===r?{}:r;return(0,f.useQuery)(["member-tag",t],(function(){return(0,Er.UT)(S.av.memberTags.show({id:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(r),!0).forEach((function(t){_i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!t},n))},wi=r(37609),Oi=["per_page","location_type"];function Pi(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Si=function(e){var t=e.per_page,r=e.location_type,n=void 0===r?"":r,i=Pi(e,Oi);return(0,f.useQuery)(["workflows","list","upcomingEvents"],(function(){return wi.S.fetchUpcomingEvents({params:{per_page:t,location_type:n}})}),i)},ki=["eventId"];function Ci(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ni=function(e){var t=e.eventId,r=Ci(e,ki);return(0,f.useQuery)(["event",t],(function(){return wi.S.fetchEvent({id:t})}),r)},Ti=["workflowId"];function Ai(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ei=function(e){var t=e.workflowId,r=Ai(e,Ti);return(0,f.useQuery)(["workflows",t],(function(){return(0,Xe.Cp)(vn.nH.fetch({id:t}))}),r)},Ii=function(){var e=function(e){var t=e.api,r=(0,f.useInfiniteQuery)(["un-paginate","tags",t],(function(e){var r=e.pageParam,n=void 0===r?1:r;return(0,Er.UT)(t({params:{page:n}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),i=r.data,o=r.fetchNextPage,a=r.hasNextPage,s=r.isLoading;return(0,n.useEffect)((,[i]),{records:(0,fn.flatten)(null===i||void 0===i?void 0:i.pages.map((function(e){return e.records})))||[],isLoading:s||a,hasNextPage:a}}({api:S.av.memberTags.index}),t=e.records;return{memberTags:void 0===t?[]:t,isLoading:e.isLoading}};function Di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Li(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(0,(0,pr.Gc)().watch)("id"),n=(0,l.pm)();return(0,f.useMutation)((function(){return(0,Xe.Cp)(vn.nH.createRun({workflowId:r,params:t}),500)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(r),!0).forEach((function(t){Li(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){n.error(e.message)}},e))},Ri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(e){return function(e,t){var r=t.id,n=t.action_type,i=t.api_params,o=t.position,a=void 0===o?1:o;return!r||r.startsWith("action")?vn.nH.createAction({workflowId:e,body:{action_type:n,api_params:i,position:a}}):vn.nH.updateAction({workflowId:e,id:r,body:{action_type:n,api_params:i,position:a}})}(t,e)}),e)};function Fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ui=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,pr.Gc)().watch,r=(0,l.pm)(),n=t("id");return(0,f.useMutation)((,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(r),!0).forEach((function(t){Bi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onError:function(e){console.error(e),r.error(e.message)}},e))},zi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(e){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(e){var t={action_type:e.action_type,api_params:e.api_params};return e.id&&!e.id.startsWith("action")&&(t.id=e.id),t}));return vn.nH.upsertActions({workflowId:e,body:{actions:t}})}(t,e)}),e)},Vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(e){return function(e,t,r){var n=t.id,i=t.filter_rules;return n?vn.nH.updateAudience({workflowId:e,id:n,body:{filter_rules:i},params:r}):vn.nH.createAudience({workflowId:e,body:{filter_rules:i},params:r})}(t,e)}),e)},Zi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,pr.Gc)().watch)("id");return(0,f.useMutation)((function(e){return function(e,t){var r=t.id,n=t.trigger_type,i=t.resource_id,o=t.resource_type;return r?vn.nH.updateTrigger({workflowId:e,id:r,body:{trigger_type:n,resource_id:i,resource_type:o}}):vn.nH.createTrigger({workflowId:e,body:{trigger_type:n,resource_id:i,resource_type:o}})}(t,e)}),e)},Hi=r(4796),qi="settings.invitation_links.form",Gi=function(){var e=function(){var e=(0,pr.Gc)(),t=e.watch,r=e.setValue,i=t("paywall_id"),o=t("paywall_coupon_id"),a=(0,f.useQuery)(["paywalls"],(function(){return(0,Er.UT)(S.av.paywalls.index({params:{status:Hi.dl}}))})),s=a.data,l=void 0===s?[]:s,c=a.isLoading,u=(0,f.useQuery)(["paywalls-coupons",i],(function(){return(0,Er.UT)(S.av.paywallCoupons.index({params:{paywall_id:i,skip_date_validation:!1,status:"active"}}))}),{enabled:!!i}),d=u.data,m=void 0===d?[]:d,p=u.isLoading,h=(0,n.useMemo)((function(){return m.map((function(e){return{value:e.id,label:e.name}}))}),[m]),b=(0,n.useMemo)((function(){return l.map((function(e){return{value:e.id,label:e.display_name}}))}),[l]),y=(0,n.useMemo)((function(){var e,t,r=l.find((function(e){var t=e.id;return String(t)===String(i)}));return null!==(e=null===r||void 0===r||null===(t=r.prices)||void 0===t?void 0:t.map(())&&void 0!==e?e:[]}),[l,i]);return(0,n.useEffect)((function(){var e,t=null===(e=m.find(())||void 0===e?void 0:e.code;r("paywall_coupon_code",t)}),[m,o,r]),{selectedPaywallId:i,paywallsData:b,isLoadingPaywalls:c,isLoadingCoupons:p,couponsData:h,termsData:y}}(),t=e.paywallsData,r=e.couponsData,i=e.termsData,o=e.selectedPaywallId,s=e.isLoadingPaywalls,u=e.isLoadingCoupons,d=!o;return s?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)("div",{className:"form-section mt-4",children:(0,c.jsxs)(pn.z,{title:(0,a.t)([qi,"paywall_trial"]),noPadding:!0,defaultOpen:!0,children:[(0,c.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-6",children:[(0,c.jsx)(yn,{name:"paywall_id",translationRoot:qi,hideDescription:!0,fullWidth:!0,className:"!md:pt-1 !gap-1",children:(0,c.jsx)(ce.l.SelectNative,{name:"paywall_id",options:t,prompt:(0,a.t)([qi,"paywall_id_placeholder"]),isPromptDisabled:!1})}),(0,c.jsx)(yn,{name:"paywall_price_id",translationRoot:qi,hideDescription:!0,fullWidth:!0,className:"!md:pt-1 !gap-1",rules:{required:!d&&(0,a.t)(["settings.validation.this_field_is_required"])},children:(0,c.jsx)(ce.l.SelectNative,{name:"paywall_price_id",options:i,prompt:(0,a.t)([qi,"paywall_price_id_placeholder"]),disabled:d,isPromptDisabled:!1})})]}),(0,c.jsx)(ce.l.Input,{type:"hidden",name:"paywall_coupon_code",className:"hidden"}),(0,c.jsxs)("div",{className:"flex flex-col pb-4 md:flex-row md:gap-6",children:[(0,c.jsx)(yn,{name:"paywall_coupon_id",translationRoot:qi,hideDescription:!0,fullWidth:!0,className:"!gap-1",children:(0,c.jsx)(ce.l.SelectNative,{name:"paywall_coupon_id",options:r,prompt:(0,a.t)([qi,"paywall_coupon_id_placeholder"]),disabled:d||u,isPromptDisabled:!1})}),(0,c.jsx)(yn,{name:"paywall_trial_days",translationRoot:qi,hideDescription:!0,fullWidth:!0,className:"!gap-1",rules:{required:!d&&(0,a.t)(["settings.validation.this_field_is_required"])},children:(0,c.jsx)(ce.l.Input,{type:"number",min:"1",max:"365",disabled:d,suffix:(0,a.t)([qi,"days"]),customOpacity:"100",className:J()("form-control !w-full",{"!bg-secondary":d})})})]})]})})};function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(r),!0).forEach((function(t){Ki(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ki(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ji="settings.invitation_links.form",$i=function(e){var t,r=e.defaultValues,i=e.onSubmit,o=e.isSaving,s=(0,dr.k6)(),u=Yn().copyInvitation,d=function(){var e=(0,v.nT)().records,t=void 0===e?[]:e,r=(0,v.e2)().records,i=void 0===r?[]:r,o=Ii().memberTags,a=(0,n.useMemo)((function(){return t.map((function(e){var t=e.id,r=e.name;return{value:String(t),text:r}}))}),[t]),s=(0,n.useMemo)((function(){return i.map((function(e){var t=e.id,r=e.name;return{value:String(t),text:r}}))}),[i]),l=(0,n.useMemo)((function(){return o.map(()}),[o]);return{spaces:t,spacesData:a,spaceGroupsData:s,memberTagsData:l}}(),f=d.spaces,m=d.spacesData,p=d.spaceGroupsData,h=d.memberTagsData,b=Kn().defaultValues,y=null===b||void 0===b||null===(t=b.community)||void 0===t?void 0:t.home_page_enabled,g=In(),x=(r||{}).token,_=Boolean(x);return(0,c.jsxs)(ce.l,{onSubmit:i,defaultValues:r,children:[(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)(yn,{name:"name",translationRoot:Ji,rules:g,children:(0,c.jsx)(ce.l.Input,{autoFocus:!0})}),_&&(0,c.jsxs)("div",{className:"flex flex-col gap-2 pt-3",children:[(0,c.jsx)("span",{className:"form-group_label text-dark flex font-semibold",children:(0,a.t)([Ji,"token"])}),(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.zx,{type:"button",variant:"circle",onClick:function(){x&&u(x)},children:(0,a.t)([Ji,"copy"])})}),(0,c.jsx)(ce.l.TextArea,{name:"token",rows:2,className:"!bg-selector-active break-all font-mono !text-sm",readOnly:!0,onFocus:function(e){return e.target.select()}})]})]}),(0,c.jsx)(yn,{name:"space_ids",translationRoot:Ji,children:(0,c.jsx)(ce.l.Select,{name:"space_ids",data:m,variant:"tags",onSearch:fn.noop,shouldFilterSelectedItems:!0})}),(0,c.jsx)(yn,{name:"space_group_ids",translationRoot:Ji,children:(0,c.jsx)(ce.l.Select,{name:"space_group_ids",data:p,variant:"tags",onSearch:fn.noop,shouldFilterSelectedItems:!0})}),(0,c.jsx)(yn,{name:"member_tag_ids",translationRoot:Ji,children:(0,c.jsx)(ce.l.Select,{name:"member_tag_ids",data:h,variant:"tags",onSearch:fn.noop,shouldFilterSelectedItems:!0})}),(0,c.jsx)(yn,{name:"redirect_space_id",translationRoot:Ji,children:(0,c.jsx)(hn.M,Qi(Qi({spaces:f},zn),{},{shouldDisplayHomepage:y}))}),(0,c.jsx)(Gi,{})]}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)(l.zx,{variant:"secondary",large:!0,onClick:function(){s.push(S.lA.members.invitation_links)},children:(0,a.t)("cancel")}),(0,c.jsx)(l.zx,{variant:"circle",disabled:o,large:!0,children:o?(0,a.t)("saving"):(0,a.t)("save")})]})})]})},Yi=["name","space_ids","space_group_ids","member_tag_ids","redirect_space_id"],Xi=["paywall_id","paywall_price_id","paywall_trial_days","paywall_coupon_code"];function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach((function(t){ro(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ro(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var no=function(e){var t,r,i,o,a,s=null!==e&&void 0!==e?e:{},l=s.query,c=void 0===l?"":l,u=s.perPage,d=void 0===u?20:u,m=s.initialPage,p=void 0===m?1:m,h=s.options,b=["settings","invitation-links",c,d,p],y=to({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===h?{}:h),v=(0,f.useInfiniteQuery)(b,(function(e){var t=e.pageParam,r=void 0===t?p:t,n=1;r>0&&(n=r);var i=to({page:n,per_page:d},c&&{query:c});return vn.bC.list({params:i})}),y),g=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=v.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=v.data)||void 0===t?void 0:t.pages]),x=null!==(r=null===(i=g[0])||void 0===i?void 0:i.count)&&void 0!==r?r:0,_=null!==(o=null===(a=g[0])||void 0===a?void 0:a.per_page)&&void 0!==o?o:d;return to(to({},v),{},{queryKey:b,totalInvitationLinks:x,pageSize:_,pages:g})},io="settings.invitation_links",oo="settings.invitation_links",ao=function(){var e=function(){var e=(0,l.pm)(),t=e.success,r=e.error,n=(0,dr.k6)(),i=no().queryKey,o=(0,f.useMutation)({mutationFn:function(e){var t={invitationLink:(0,fn.pick)(e,Yi),paywall:(0,fn.pick)(e,Xi)};return vn.bC.create(t)},onSuccess:function(){lr.Eh.invalidateQueries([i]),n.push(S.lA.members.invitation_links),t((0,a.t)([io,"success_saving"]))},onError:function(){return r((0,a.t)([io,"error_saving"]))}}),s=o.mutate;return{defaultValues:{name:""},isSaving:o.isLoading,handleSubmit:s}}(),t=e.defaultValues,r=e.isSaving,n=e.handleSubmit;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([oo,"new_invitation_link"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,c.jsx)(tn.Z,{html:(0,a.t)([oo,"new_invitation_link_title"])}),children:(0,c.jsx)($i,{defaultValues:t,isSaving:r,onSubmit:function(e){return n(e)}})})})})]})};function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){co(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function co(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uo(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function fo(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){uo(o,n,i,a,s,"next",e)}function s(e){uo(o,n,i,a,s,"throw",e)}a(void 0)}))}}var mo="settings.invitation_links",po="settings.invitation_links",ho=function(){var e=function(){var e,t=(0,dr.UO)().id,r=(0,l.pm)(),n=r.success,i=r.error,o=(0,dr.k6)(),s=Yn().getInvitationUrl,c=(0,f.useQuery)(["invitation-links",t],fo(se().mark((function e(){var r,n,i,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn.bC.get({id:t});case 2:return r=e.sent,n=r.paywall,i=lo(lo({},n),{},{paywall_trial_days:null===n||void 0===n?void 0:n.trial_days,paywall_coupon_id:null===n||void 0===n?void 0:n.coupon_id}),o=lo(lo(lo({},r),i),{},{token:s(r.token)}),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)}))),{enabled:!!t}),u=c.data,d=c.isLoading,m=(0,f.useMutation)({mutationFn:function(e){var r={invitationLink:(0,fn.pick)(e,Yi),paywall:(0,fn.pick)(e,Xi)};return vn.bC.update(lo({id:t},r))},onSuccess:(e=fo(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr.Eh.invalidateQueries(["invitation-links",t]);case 2:o.push(S.lA.members.invitation_links),n((0,a.t)([mo,"success_saving"]));case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),onError:function(){return i((0,a.t)([mo,"error_saving"]))}}),p=m.mutate;return{defaultValues:u,isSaving:m.isLoading,isLoading:d,handleSubmit:p}}(),t=e.defaultValues,r=e.isLoading,n=e.isSaving,i=e.handleSubmit;return r||!t?(0,c.jsx)(l.aN,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([po,"edit_invitation_link"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,c.jsx)(tn.Z,{html:(0,a.t)([po,"edit_invitation_link_title"])}),children:(0,c.jsx)($i,{defaultValues:t,isSaving:n,onSubmit:function(e){return i(e)}})})})})]})},bo=r(92615),yo="settings.invitation_links.table",vo=function(e){var t=(0,dr.k6)(),r=(0,f.useQueryClient)(),n=(0,l.pm)(),i=no().queryKey,o=Yn().copyInvitation;return{copyInvitationUrl:function(e){o(e)},edit:function(){t.push("".concat(S.lA.members.invitation_links,"/").concat(e,"/edit"))},revoke:(0,f.useMutation)({mutationFn:function(){return vn.bC.revoke({id:e})},onSuccess:function(){r.invalidateQueries(i),n.success((0,a.t)([yo,"invitation_link_revoked"]),{duration:"short",shouldUseProgress:!1})},onError:function(){n.error((0,a.t)([yo,"error_revoking"]))}}).mutate,reactivate:(0,f.useMutation)({mutationFn:function(){return vn.bC.reactivate({id:e})},onSuccess:function(){r.invalidateQueries(i),n.success((0,a.t)([yo,"invitation_link_reactivated"]),{duration:"short",shouldUseProgress:!1})},onError:function(){return n.error((0,a.t)([yo,"error_reactivating"]))}}).mutate,destroy:(0,f.useMutation)({mutationFn:function(){return vn.bC.destroy({id:e})},onSuccess:function(){r.invalidateQueries(i),n.success((0,a.t)([yo,"invitation_link_deleted"]),{duration:"short",shouldUseProgress:!1})},onError:function(){return n.error((0,a.t)([yo,"error_deleting"]))}}).mutate}},go=function(e){var t=e.id,r=e.token,n=vo(t).copyInvitationUrl;return(0,c.jsx)("span",{className:"flex h-6 w-20 justify-center",children:(0,c.jsxs)("button",{type:"button",onClick:function(){return n(r)},className:"text-dark flex items-center gap-1 text-xs font-medium",children:[(0,c.jsx)(bt.JO,{type:"16-copy",size:16}),(0,a.t)("settings.invitation_links.table.copy_link")]})})},xo="settings.invitation_links.table.revoke_modal",_o=function(e){var t=e.invitationLinkId,r=e.isOpen,n=e.onClose,i=vo(t).destroy;return(0,c.jsx)(Gr.cV,{isOpen:r,onClose:n,confirmVariant:"danger",onConfirm:function(){i(),n()},title:(0,a.t)([xo,"title"]),confirmText:(0,a.t)("delete"),children:(0,a.t)([xo,"description"])})},jo="settings.invitation_links.table.reactivate_modal",wo=function(e){var t=e.invitationLinkId,r=e.isOpen,n=e.onClose,i=vo(t).reactivate;return(0,c.jsx)(Gr.cV,{isOpen:r,onClose:n,confirmVariant:"circle",onConfirm:function(){i(),n()},title:(0,a.t)([jo,"title"]),confirmText:(0,a.t)("reactivate"),children:(0,a.t)([jo,"description"])})},Oo="settings.invitation_links.table.revoke_modal",Po=function(e){var t=e.invitationLinkId,r=e.isOpen,n=e.onClose,i=vo(t).revoke;return(0,c.jsx)(Gr.cV,{isOpen:r,onClose:n,confirmVariant:"danger",onConfirm:function(){i(),n()},title:(0,a.t)([Oo,"title"]),confirmText:(0,a.t)("revoke"),children:(0,a.t)([Oo,"description"])})};function So(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ko(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ko(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Co=function(e){var t=e.invitationLinkId,r=e.isActive,i=So((0,n.useState)(!1),2),o=i[0],s=i[1],l=So((0,n.useState)(!1),2),u=l[0],d=l[1],f=So((0,n.useState)(!1),2),m=f[0],p=f[1],h=vo(t).edit;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Q.w.Actions,{children:[(0,c.jsx)(Q.w.Actions.Item,{linkType:"button",onClick:h,children:(0,a.t)("edit")}),r?(0,c.jsx)(Q.w.Actions.Item,{linkType:"button",onClick:function(){return s(!0)},children:(0,a.t)("revoke")}):(0,c.jsx)(Q.w.Actions.Item,{linkType:"button",onClick:function(){return d(!0)},children:(0,a.t)("reactivate")}),(0,c.jsx)(Q.w.Actions.Item,{linkType:"button",hasDanger:!0,onClick:function(){return p(!0)},children:(0,a.t)("delete")})]}),(0,c.jsx)(Po,{isOpen:o,onClose:function(){return s(!1)},invitationLinkId:t}),(0,c.jsx)(wo,{isOpen:u,onClose:function(){return d(!1)},invitationLinkId:t}),(0,c.jsx)(_o,{isOpen:m,onClose:function(){return p(!1)},invitationLinkId:t})]})},No=r(90724),To=r(75301),Ao="settings.invitation_links",Eo=[{accessorKey:"name",header:(0,a.t)([Ao,"table.name"])},{accessorKey:"is_active",header:(0,a.t)([Ao,"table.is_active"]),cell:function(e){return(0,c.jsx)(Hr.O,{variant:e.row.original.is_active?"success":"default",children:e.row.original.is_active?(0,a.t)([Ao,"table.active"]):(0,a.t)([Ao,"table.disabled"])})}},{accessorKey:"members_joined_count",header:(0,a.t)([Ao,"table.members_joined_count"]),thClassName:et.M.md,cellClassName:et.M.md},{accessorKey:"space_ids",header:(0,a.t)([Ao,"table.space_count"]),cell:function(e){return e.getValue("space_ids",[]).length},thClassName:et.M.lg,cellClassName:et.M.lg},{accessorKey:"space_group_ids",header:(0,a.t)([Ao,"table.space_group_count"]),cell:function(e){return e.getValue("space_group_ids",[]).length},thClassName:et.M.xl,cellClassName:et.M.xl},{accessorKey:"member_tag_ids",header:(0,a.t)([Ao,"table.member_tags"]),cell:function(e){return e.getValue("member_tag_ids",[]).length},thClassName:et.M.xl,cellClassName:et.M.xl},{accessorKey:"token",header:"",cell:function(e){return(0,c.jsx)(go,{id:e.row.original.id,token:e.getValue("token","")})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",cell:function(e){return(0,c.jsx)(Co,{invitationLinkId:e.row.original.id,isActive:e.row.original.is_active})}}],Io=function(){var e=(0,dr.k6)(),t=function(){var e,t=(0,To.Xt)().queryParams,r=(0,No.v)(),n=r.setPage,i=r.initialPage,o=String(null!==(e=null===t||void 0===t?void 0:t.query)&&void 0!==e?e:""),a=no({perPage:20,initialPage:i,query:o,options:{keepPreviousData:!1}});return{infiniteQuery:a,totalInvitationLinks:null===a||void 0===a?void 0:a.totalInvitationLinks,isLoading:null===a||void 0===a?void 0:a.isLoading,initialPage:i,defaultPageSize:20,setPage:n}}(),r=t.infiniteQuery,n=t.totalInvitationLinks,i=t.defaultPageSize,o=t.initialPage,s=t.setPage;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([Ao,"title"]),hasBorder:!1,rightContent:(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){e.push(S.lA.members.new_invitation_link)},children:(0,a.t)([Ao,"new_invitation_link"])})}),(0,c.jsxs)(bo.J,{columns:Eo,infiniteQuery:r,pageSize:i,initialPage:o,onChangePage:function(e){return s(e)},children:[(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)([Ao,"table.total"],{count:n})})}),(0,c.jsxs)("div",{className:"px-6",children:[(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsx)(Q.w.Header,{isSticky:!0}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})]})]})},Do=function(){return(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.members.invitation_links,component:Io}),(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.members.new_invitation_link,component:ao}),(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.members.edit_invitation_link,component:ho})]})},Lo=function(){var e=(0,dr.k6)(),t=cn().isReactifiedSettingsInvitationLinksEnabled,r=(0,n.useCallback)((function(){var e=document.querySelector("#invitation-header-top");return e&&(e.style.display="none"),),[]);return t?(0,c.jsx)(Do,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.invitation_links.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-manage-members"},rightContent:(0,c.jsx)(l.zx,{type:"button",variant:"circle",onClick:function(){e.push(S.lA.members.new_invitation_link)},children:(0,a.t)("invitation_links.create_title")}),hasBorder:!1}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"view-plans"}),(0,c.jsx)($,{children:(0,c.jsx)(on,{onLoad:r})})]})},Mo=r(61562),Ro=r(1475),Fo=r(69779),Bo=r(40281),Uo=r(17260),zo=r(63367),Vo=r(40166),Zo=r(37461),Ho=r(31889),qo=r(16580);function Go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qo=function(){var e,t,r=(0,lr.ww)().isAdminUsageContext,n=(0,v.wh)(),i=n.currentCommunitySettings,o=n.currentCommunityMember,a=n.isLoading,s=(null===i||void 0===i?void 0:i.member_directory_settings)||{sort:qo.aP[0],exclude_empty_profiles:!0},l={exclude_empty_name:!r,exclude_empty_profiles:!r&&s.exclude_empty_profiles},c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(r),!0).forEach((function(t){Wo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({visible_in_member_directory:!0},l),u=(0,Ho.vb)(o)?l:c;return{defaultSort:s.sort,scope:u,view:(t=qo.nk.CARDS,null!==i&&void 0!==i&&null!==(e=i.member_directory_settings)&&void 0!==e&&e.view&&(t=i.member_directory_settings.view),t),isLoading:a}},Ko=r(57956),Jo=["order","filter"];function $o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(r),!0).forEach((function(t){Xo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ta(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ra(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var na=function(e){var t,r=(0,dr.k6)(),i=(0,dr.TH)(),o=Qo(),a=(0,Ko.ov)(),s=(0,n.useCallback)((function(){return 1===e?{created_at:"desc"}:a?{activity_score:"desc"}:{profile_confirmed_at:"desc"}}),[a,e]),l=(0,Bo.k)().queryParams,c=l.order,u=l.filter;return Yo(Yo({},ra(l,Jo)),{},{query:null!==(t=null===u||void 0===u?void 0:u.query)&&void 0!==t?t:"",onSort:function(e){var t=ea(e,1)[0],n=new URLSearchParams(i.search);c&&Object.keys(c).forEach((),t&&n.append("order[".concat(t.id,"]"),t.desc?"desc":"asc"),r.push({search:n.toString()})},order:null!==c&&void 0!==c?c:s(),filters:Yo(Yo(Yo({},function(e){return 0===e?{role:"Member",status:qo.vC.ACTIVE}:1===e?{status:qo.vC.INACTIVE}:2===e?{role:"Admin",status:qo.vC.ACTIVE}:3===e?{role:"Moderator",status:qo.vC.ACTIVE}:void 0}(e)),u),o.scope)})},ia=r(74492),oa=ia.f2.SpaceGroupsFilter,aa=ia.f2.SpacesFilter,sa=ia.f2.StatusFilter,la=ia.f2.MemberTagsFilter,ca=ia.f2.PaywallsFilter,ua=ia.f2.EventsFilter,da=ia.f2.HasPastDueSubscriptionFilter,fa=ia.f2.JoinedCommunityDaysAgoFilter,ma=ia.f2.LastLoggedInDaysAgoFilter,pa=ia.f2.AvatarSet,ha=ia.f2.ActivityScoreFilter,ba=ia.xs.HeadlineFilter,ya=ia.xs.NameFilter,va=ia.xs.LocationFilter,ga=ia.xs.BioFilter,xa=ia.xs.EmailFilter,_a=[{name:"joined_community_days_ago",component:fa,label:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago"),availableLabel:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:ma,label:(0,a.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],ja=[{name:"name",component:ya,label:(0,a.t)("members_directory.header.search.filters.name")},{name:"email",component:xa,label:(0,a.t)("members_directory.header.search.filters.email")},{name:"spaces",component:aa,label:(0,a.t)("members_directory.header.search.filters.spaces.title")},{name:"space_groups",component:oa,label:(0,a.t)("members_directory.header.search.filters.space_groups.title")},{name:"online_status",component:sa,label:(0,a.t)("members_directory.header.search.filters.online_status")},{name:"headline",component:ba,label:(0,a.t)("members_directory.header.search.filters.headline")},{name:"bio",component:ga,label:(0,a.t)("members_directory.header.search.filters.bio")},{name:"location",component:va,label:(0,a.t)("members_directory.header.search.filters.location")},{name:"tags",component:la,label:(0,a.t)("members_directory.header.search.filters.tags.title")},{name:"paywalls",component:ca,label:(0,a.t)("members_directory.header.search.filters.paywalls.title")},{name:"events",component:ua,label:(0,a.t)("members_directory.header.search.filters.events.title")},{name:"has_past_due_subscription",component:da,label:(0,a.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(_a,[{name:"is_avatar_set",component:pa,label:(0,a.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:ha,label:(0,a.t)("members_directory.header.search.filters.activity_score")}]),wa=function(){var e,t=(0,Ko.rV)();return(0,c.jsx)(ia.YP,{platformFilters:ja,defaultFilterNames:(e=["name","spaces","tags","events"],t?[].concat(e,["activity_score"]):e)})},Oa=Pa=r(36843),Sa=r(43591);function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ca(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Na=function(e){var t=e.memberId,r=e.options,n=void 0===r?{}:r,i=(0,l.pm)();return(0,f.useMutation)((function(){return(0,Er.pC)(S.av.communityMember.delete({memberId:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Ca(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSuccess:function(){i.success((0,a.t)("account.delete.success"),{duration:"short",shouldUseProgress:!1}),window.location.reload()},onError:function(e){var t=e.errorDetails,r=e.message;(0,fn.isString)(t)?i.error(t):i.error(r)}},n))};function Ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ea=function(e){var t,r,n=e.member,i=void 0===n?{}:n,o=e.isOpen,s=void 0!==o&&o,l=e.onClose,u=Na({memberId:i.id}),d=u.mutate,f=u.isLoading;return(0,c.jsx)(Gr.cV,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(r),!0).forEach((function(t){Aa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isOpen:s,onClose:l},(t=i.name,r=i.email,i.has_active_paywall_subscriptions?{title:(0,a.t)("account.delete.cannot_be_deleted",{name:t||r}),children:(0,a.t)("account.delete.has_active_subscriptions"),confirmText:(0,a.t)("account.delete.go_to_billing_dashboard"),disabled:f,onConfirm:function(){window.open(r),"_blank"),(0,fn.isFunction)(l)&&l()}}:{title:(0,a.t)("delete_member_confirmation",{name:t||r}),confirmVariant:"danger",onConfirm:function(){d(),(0,fn.isFunction)(l)&&l()}})))},Ia=r(48656),Da=r(1002),La=function(e){var t=e.memberPublicId,r=void 0===t?"":t,n=(0,Ia.H)().showMemberProfileEdit;return r?(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(){n({memberPublicId:r})},children:(0,a.t)("edit")}):null},Ma=function(e){var t=e.memberId,r=e.onClick,n=void 0===r?fn.noop:r,i=(0,v.wh)().currentCommunity;return t?t===i.owner_id?null:(0,c.jsx)(Da.Lt.ItemWithLink,{hasDanger:!0,onClick:n,children:(0,a.t)("delete")}):null},Ra=r(63001),Fa=function(e){var t=e.memberPublicId,r=void 0===t?"":t,n=(0,Ra.r)().show;return r?(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(){n({memberPublicId:r})},children:(0,a.t)("view_profile")}):null},Ba=r(84495);function Ua(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var za=function(e){var t=e.member,r=void 0===t?{}:t,n=(0,dr.k6)(),i=(0,Ba.pB)().findOrCreateChatRoom,o=(0,v.wh)(),s=o.currentCommunityMember,l=void 0===s?{}:s,u=o.currentCommunity,d=void 0===u?{}:u,f=r.id,m=r.messaging_enabled,p=void 0===m||m,h=(null===l||void 0===l?void 0:l.id)===f,b=null===d||void 0===d?void 0:d.messaging_enabled;if(!Boolean(f&&p&&b&&!h))return null;var y=function(){var e,t=(e=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({kind:P.g8,community_member_ids:[f]});case 2:t=e.sent,n.push((0,S.so)({uuid:t}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ua(o,n,i,a,s,"next",e)}function s(e){Ua(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:y,children:(0,a.t)("message")})},Va=function(e){var t=e.userId,r=void 0===t?"":t;return r?(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(){window.location.href=(0,S.o5)({userId:r})},children:(0,a.t)("resend_invitation")}):null},Za=r(83749);function Ha(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var qa=function(e){var t=e.member,r=(0,v.wh)().currentCommunityMember.id!=t.id,n=function(){var e,r=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Za.g)({entityId:t.id,entityType:"CommunityMember"}).then((function(e){return window.open(e.masquerade_url,"_self")})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Ha(o,n,i,a,s,"next",e)}function s(e){Ha(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return r?(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:n,children:(0,a.t)("view_as")}):null};function Ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qa=function(e){var t=e.member,r=void 0===t?{}:t,i=Ga((0,n.useState)(!1),2),o=i[0],a=i[1],s=r.public_uid,l=void 0===s?"":s,u=r.id,d=r.user_id;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Q.w.Actions,{children:[(0,c.jsx)(Va,{userId:d}),(0,c.jsx)(La,{memberPublicId:l}),(0,c.jsx)(Fa,{memberPublicId:l}),(0,c.jsx)(qa,{member:r}),(0,c.jsx)(Ma,{memberId:u,onClick:function(){return a(!0)}})]}),(0,c.jsx)(Ea,{member:r,isOpen:o,onClose:function(){return a(!1)}})]})};function Ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ja(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ja(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $a=function(e){var t=e.member,r=void 0===t?{}:t,i=Ka((0,n.useState)(!1),2),o=i[0],a=i[1],s=r.public_uid,l=void 0===s?"":s,u=r.id;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Q.w.Actions,{children:[(0,c.jsx)(La,{memberPublicId:l}),(0,c.jsx)(Fa,{memberPublicId:l}),(0,c.jsx)(qa,{member:r}),(0,c.jsx)(za,{member:r}),(0,c.jsx)(Ma,{memberId:u,onClick:function(){return a(!0)}})]}),(0,c.jsx)(Ea,{member:r,isOpen:o,onClose:function(){return a(!1)}})]})},Ya=["infiniteQuery","initialSort","countLabel","onSort"];function Xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(r),!0).forEach((function(t){ts(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ts(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ns(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ns(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function is(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var os=function(e){var t=e.infiniteQuery,r=e.initialSort,i=e.countLabel,o=e.onSort,s=is(e,Ya),l=(0,Ko.rV)(),u=(0,n.useMemo)((function(){return r?Object.entries(r).map((function(e){var t=rs(e,2);return{id:t[0],desc:"desc"===t[1]}})):null}),[r]),d=(0,n.useMemo)((function(){return(0,fn.compact)([{accessorKey:"name",header:(0,a.t)("settings.manage_members.name"),accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)(Sa.QB,{member:e.getValue()})}},l&&{accessorKey:"activity_score",header:(0,a.t)("settings.manage_members.activity_score"),accessorFn:function(e){return e.id},cell:function(e){return(0,c.jsx)(Sa.z4,{shortDisabledLabel:!0,memberId:e.getValue()})}},{accessorKey:"email",header:(0,a.t)("settings.manage_members.email"),canSort:!1},{accessorKey:"roles",header:(0,a.t)("settings.manage_members.role"),cell:function(e){return(0,Sa.cY)(e.getValue())},canSort:!1},{accessorKey:"profile_confirmed_at",header:(0,a.t)("settings.manage_members.joined"),cell:function(e){return(0,Sa.p6)(e.getValue())}},{accessorKey:"last_seen_at",header:(0,a.t)("settings.manage_members.last_active"),cell:function(e){return(0,Sa.p6)(e.getValue())},canSort:!1},{id:"actions",header:"",accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)($a,{member:e.getValue()})},canSort:!1}])}),[l]),f=(0,n.useMemo)((function(){var e,r;return(null===(e=t.data)||void 0===e||null===(r=e.pages)||void 0===r?void 0:r.flatMap((function(e){return e.records})).map((function(e){return e.id})))||[]}),[t]);return(0,c.jsx)(Pa.XR,{ids:f,children:(0,c.jsx)(bo.J,es(es({columns:d,infiniteQuery:t,initialSort:u,onChangeSorting:o},s),{},{children:(0,c.jsxs)("div",{className:"flex h-full flex-col",children:[(0,c.jsx)(Q.w.Headline,{className:"!px-0",children:(0,c.jsx)(Q.w.Headline.Title,{children:i})}),(0,c.jsxs)("div",{className:"max-w-full overflow-x-auto","data-testid":"settings-members-list",children:[(0,c.jsxs)(Q.w.Table,{className:"w-full min-w-[800px]",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-3/12","data-testid":"name-column"}),l&&(0,c.jsx)("col",{className:"min-w-[2rem]","data-testid":"score-column"}),(0,c.jsx)("col",{className:"w-3/12","data-testid":"email-column"}),(0,c.jsx)("col",{className:"min-w-[4rem]","data-testid":"role-column"}),(0,c.jsx)("col",{className:"min-w-[6rem]","data-testid":"joined-column"}),(0,c.jsx)("col",{className:"min-w-[6rem]","data-testid":"last-active-column"}),(0,c.jsx)("col",{className:"min-w-[2rem]","data-testid":"actions-column"})]}),(0,c.jsx)(Q.w.SortableHead,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)("settings.manage_members.no_members_found")}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})]})}))})},as=["infiniteQuery","initialSort","onSort"];function ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ls(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(r),!0).forEach((function(t){cs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ss(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function us(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ds(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ds(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ds(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fs(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ms=[{accessorKey:"name",header:(0,a.t)("settings.manage_members.name"),accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)(Sa.QB,{member:e.getValue(),isAvatarHidden:!0})}},{accessorKey:"email",header:(0,a.t)("settings.manage_members.email"),canSort:!1},{accessorKey:"roles",header:(0,a.t)("settings.manage_members.role"),cell:function(){return(0,a.t)("invitation_status")},canSort:!1},{accessorKey:"created_at",header:(0,a.t)("settings.manage_members.invited"),cell:function(e){return(0,Sa.p6)(e.getValue())}},{id:"actions",header:"",accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)(Qa,{member:e.getValue()})},canSort:!1}],ps=function(e){var t=e.infiniteQuery,r=e.initialSort,i=e.onSort,o=fs(e,as),s=(0,n.useMemo)((function(){return r?Object.entries(r).map((function(e){var t=us(e,2);return{id:t[0],desc:"desc"===t[1]}})):null}),[r]);return(0,c.jsx)(bo.J,ls(ls({infiniteQuery:t,columns:ms,initialSort:s,onChangeSorting:i},o),{},{children:(0,c.jsxs)("div",{className:"flex h-full flex-col",children:[(0,c.jsx)(Q.w.Headline,{className:"!px-0",children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.manage_members.invited_count",{count:t.totalQueryMembers})})}),(0,c.jsxs)("div",{className:"max-w-full overflow-x-auto","data-testid":"settings-members-list",children:[(0,c.jsxs)(Q.w.Table,{className:"w-full min-w-[800px]",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-3/12","data-testid":"name-column"}),(0,c.jsx)("col",{className:"w-3/12","data-testid":"email-column"}),(0,c.jsx)("col",{className:"min-w-[4rem]","data-testid":"role-column"}),(0,c.jsx)("col",{className:"min-w-[6rem]","data-testid":"invited-column"}),(0,c.jsx)("col",{className:"min-w-[6rem]","data-testid":"last-active-column"}),(0,c.jsx)("col",{className:"min-w-[2rem]","data-testid":"actions-column"})]}),(0,c.jsx)(Q.w.SortableHead,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)("settings.manage_members.no_members_found")}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})]})}))};function hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return bs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ys=["all","invited","admins","moderators"],vs=function(){var e=(0,To.Xt)().queryParams.active||ys[0],t=ys.indexOf(e),r=-1===t?0:t,i=hs((0,n.useState)(r),2),o=i[0],a=i[1];return(0,n.useEffect)((function(){var t=ys.indexOf(e);a(-1===t?0:t)}),[a,e]),o},gs=function(){var e=(0,No.v)(),t=e.setPage,r=e.initialPage,n=vs(),i=na(n),o=i.query,a=i.order,s=i.onSort,l=i.filters,u=(0,Vo.fd)({perPage:Vo.L8,order:a,initialPage:r,query:o,options:{keepPreviousData:!1},filters:l,adminScope:!0});return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[(0,c.jsx)(wa,{}),(0,c.jsx)("div",{className:"isolate overflow-auto px-6",children:(0,c.jsx)(os,{infiniteQuery:u,initialPage:r,initialSort:a,onSort:s,countLabel:(0,zo.t)(["settings.manage_members","admin_count"],{count:(0,Zo.V)(u.totalQueryMembers)}),pageSize:Vo.L8,onChangePage:function(e){t(e)}})})]})},xs=function(){var e=(0,No.v)(),t=e.setPage,r=e.initialPage,n=vs(),i=na(n),o=i.query,a=i.order,s=i.filters,l=i.onSort,u=(0,Vo.fd)({perPage:Vo.L8,order:a,initialPage:r,query:o,options:{keepPreviousData:!1},filters:s,adminScope:!0});return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[(0,c.jsx)(wa,{}),(0,c.jsx)("div",{className:"isolate overflow-auto px-6",children:(0,c.jsx)(os,{infiniteQuery:u,countLabel:(0,zo.t)(["settings.manage_members","member_count"],{count:(0,Zo.V)(u.totalQueryMembers)}),pageSize:Vo.L8,initialPage:r,initialSort:a,onChangePage:function(e){t(e)},onSort:l})})]})};function _s(e){return function(e){if(Array.isArray(e))return js(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return js(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return js(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ws=ia.f2.RoleFilter,Os=ia.xs.EmailFilter,Ps=[{name:"name",component:ia.xs.NameFilter,label:(0,zo.t)("members_directory.header.search.filters.name")},{name:"email",component:Os,label:(0,zo.t)("members_directory.header.search.filters.email")},{name:"role",component:ws,label:(0,zo.t)("members_directory.header.search.filters.role")}],Ss=function(){var e=(0,No.v)(),t=e.setPage,r=e.initialPage,i=vs(),o=na(i),a=o.order,s=o.filters,l=o.onSort,u=(0,n.useMemo)((function(){var e=[].concat(_s(Ps.map((function(e){return e.name}))),["profile_fields","exclude_empty_name","exclude_empty_profiles","role","status"]);return(0,fn.pick)(s,e)}),[s]),d=(0,Vo.fd)({perPage:Vo.L8,order:a,initialPage:r,options:{keepPreviousData:!1},filters:u,adminScope:!0});return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[(0,c.jsx)(Oa,{filters:Ps}),(0,c.jsx)("div",{className:"isolate overflow-auto px-6",children:(0,c.jsx)(ps,{infiniteQuery:d,pageSize:Vo.L8,initialPage:r,onChangePage:function(e){t(e)},initialSort:a,onSort:l})})]})},ks=function(){var e=(0,No.v)(),t=e.setPage,r=e.initialPage,n=vs(),i=na(n),o=i.query,a=i.order,s=i.filters,l=i.onSort,u=(0,Vo.fd)({perPage:Vo.L8,order:a,initialPage:r,query:o,options:{keepPreviousData:!1},filters:s,adminScope:!0});return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[(0,c.jsx)(wa,{}),(0,c.jsx)("div",{className:"isolate overflow-auto px-6",children:(0,c.jsx)(os,{infiniteQuery:u,countLabel:(0,zo.t)(["settings.manage_members","moderator_count"],{count:(0,Zo.V)(u.totalQueryMembers)}),initialPage:r,pageSize:Vo.L8,onChangePage:function(e){t(e)},initialSort:a,onSort:l})})]})};function Cs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ns(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ns(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ts=["all","invited","admins","moderators"],As="active",Es=function(){var e=(0,dr.k6)(),t=(0,Bo.k)().queryParams,r={adminCount:(0,Vo.fd)({filters:{role:"Admin",status:qo.vC.ACTIVE},adminScope:!0}).totalQueryMembers,memberCount:(0,Vo.fd)({filters:{role:"Member",status:qo.vC.ACTIVE},adminScope:!0}).totalQueryMembers,moderatorCount:(0,Vo.fd)({filters:{role:"Moderator",status:qo.vC.ACTIVE},adminScope:!0}).totalQueryMembers,invitedCount:(0,Vo.fd)({filters:{status:qo.vC.INACTIVE},adminScope:!0}).totalQueryMembers},i=r.adminCount,o=r.memberCount,s=r.moderatorCount,l=r.invitedCount,u=t[As]||Ts[0],d=Ts.indexOf(u),f=-1===d?0:d,m=Cs((0,n.useState)(f),2),p=m[0],h=m[1];(0,n.useEffect)((function(){var e=Ts.indexOf(u);h(-1===e?0:e)}),[h,u]);return(0,c.jsxs)(Uo.O.Group,{className:"flex flex-col",selectedIndex:p,onChange:function(r){var n=(0,fn.pick)(t,["page","active","query","status","filter"]),i=Ts[r];n[As]=i,n.page="1";var o=(0,S.UK)(n);e.push({search:o})},children:[(0,c.jsxs)(Uo.O.List,{className:"block flex-none border-b px-6",children:[(0,c.jsxs)(Uo.O,{children:[(0,a.t)("roles.members"),(0,c.jsx)(Uo.O.Counter,{children:o})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("roles.invited"),(0,c.jsx)(Uo.O.Counter,{children:l})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("roles.admins"),(0,c.jsx)(Uo.O.Counter,{children:i})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("roles.moderators"),(0,c.jsx)(Uo.O.Counter,{children:s})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(xs,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(Ss,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(gs,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(ks,{})})]})]})},Is=function(){var e=(0,Mo.k)().shouldShowTrialBanner,t=(0,Fo.a)().is_v2_1_header_rendered;return(0,Ro.t)(),(0,c.jsx)("div",{className:J()("bg-primary relative overflow-auto",{"lg:h-[calc(100vh-4rem)]":!e&&!t,"lg:h-[calc(100vh-7rem)]":e&&!t||!e&&t,"lg:h-[calc(100vh-10rem)]":e&&t}),children:(0,c.jsx)("div",{className:"h-full overflow-auto",children:(0,c.jsx)(Es,{})})})},Ds=r(2347),Ls=r(85117);function Ms(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(r),!0).forEach((function(t){Fs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ms(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Us(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Us(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zs=function(e){var t=e.onResendInvitationsClick,r=(0,dr.k6)(),i=(0,l.pm)(),o=Bs((0,n.useState)(!1),2),s=o[0],u=o[1],d=(0,v.N3)().email,m=vs(),p=na(m);(0,f.useQuery)({queryFn:function(){return(0,Er.UT)(S.av.communityMembers.export({params:Rs(Rs({},p),{},{filters:(0,Ls.p4)(p.filters),onSort:null})}))},enabled:s,onSuccess:function(){i.success((0,a.t)("export_member_csv.message",{email:d}))},onError:function(){i.error((0,a.t)("request_failure_message"))},onSettled:function(){u(!1)}});var h=[{label:(0,a.t)("import_csv"),onClick:function(){r.push("/members/bulk_import")}},{label:(0,a.t)("export_csv"),onClick:function(){u(!0)}},{label:(0,a.t)("resend_invitations"),onClick:t}];return(0,c.jsxs)("div",{className:"flex w-full items-center justify-center gap-4",children:[(0,c.jsx)("div",{className:"mr-2",children:(0,c.jsx)(Da.Lt,{direction:"bottom-start",button:(0,c.jsxs)(Da.Lt.MenuButton,{children:[(0,c.jsx)("div",{className:"text-dark",children:(0,c.jsx)(y.Z.LabelSm,{children:(0,a.t)("settings.manage_members.actions")})}),(0,c.jsx)(bt.JO,{size:16,type:"caret-down-bold",className:"text-dark",useWithFillCurrentColor:!0})]}),children:h.map((function(e){return(0,c.jsx)(Da.Lt.ItemLink,{onClick:e.onClick,forceClose:!0,children:e.label},e.label)}))})}),(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){return r.push("/members/new")},children:(0,a.t)("invite")})]})};function Vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hs=function(){var e=Vs((0,fr.k)(!1),2),t=e[0],r=e[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ds.f,{isOpen:t,onClose:r}),(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.manage_members.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-manage-members"},rightContent:(0,c.jsx)(zs,{onResendInvitationsClick:r})})]})},qs=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Hs,{}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"no-border-header"}),(0,c.jsx)(Is,{})]})},Gs=function(){var e=(0,Fo.a)().is_v2_1_header_enabled;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{layoutConfigProps:{disableRightSidebar:!0},leftContent:(0,c.jsx)(F.y,{children:e?(0,a.t)("settings.new_invitation_links.title_v2_1"):(0,c.jsx)(sn.rU,{to:"/members/invitation_links",className:"text-dark",children:(0,a.t)("settings.new_invitation_links.title")})}),pageMetaProps:{bodyClassNames:"view-manage-members"}}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"view-plans"}),(0,c.jsx)($,{children:(0,c.jsx)(on,{})})]})},Ws=r(87658),Qs=r(95095),Ks=r(46068),Js=r(94645),$s=r(49546),Ys=r(54559),Xs=r(83894),el=r(76649),tl=r(17563),rl=r(72114),nl=r(50427);function il(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ol(){var e=(0,l.pm)().success,t=function(){var t,r=(t=se().mark((function t(r){var n;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Er.Cu)(S.av.settings.analytics.analyticsExport(),{export_type:r});case 2:(n=t.sent).message&&e(n.message);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){il(o,n,i,a,s,"next",e)}function s(e){il(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),r=[{value:"download_30_day_new_members",label:(0,zo.t)("settings_nav_v3.analytics_v2.download_30_day_new_members"),onClick:function(){return t("download_30_day_new_members")}},{value:"download_30_day_active_members",label:(0,zo.t)("settings_nav_v3.analytics_v2.download_30_day_active_members"),onClick:function(){return t("download_30_day_active_members")}},{value:"download_30_day_inactive_members",label:(0,zo.t)("settings_nav_v3.analytics_v2.download_30_day_inactive_members"),onClick:];return(0,c.jsx)(l.Lt,{options:r,className:"py-[3px]",button:(0,c.jsxs)(nl.j,{children:[(0,c.jsx)("div",{className:"text-dark",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,zo.t)("header.header_csv.csv")})}),(0,c.jsx)(bt.JO,{type:"16-chevron-down","aria-hidden":!0,useWithStrokeCurrentColor:!0,className:"text-dark",size:16})]})})}var al=r(15953),sl=r(38776);function ll(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(r),!0).forEach((function(t){ul(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ll(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ul(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dl=(0,n.forwardRef)((function(e,t){return(0,c.jsx)("input",cl(cl({},e),{},{className:"text-darkest placeholder:text-light min-w-[12rem] cursor-pointer border-none bg-transparent p-0 text-sm font-medium placeholder:opacity-100 focus:outline-none focus:ring-0",ref:t}))}));dl.displayName="DatePickerInput";var fl=r(64729),ml=r(47031),pl=r(7069),hl=r(77982),bl=r(43703),yl=r(57899),vl=r(38148),gl="date_range",xl=[{label:(0,a.t)([gl,"last_7_days"]),value:"last_7_days",onSelect:function(){return[(0,pl.default)(new Date,7),new Date]}},{label:(0,a.t)([gl,"last_4_weeks"]),value:"last_4_weeks",onSelect:function(){return[(0,hl.default)(new Date,4),new Date]}},{label:(0,a.t)([gl,"last_3_months"]),value:"last_3_months",onSelect:function(){return[(0,Ys.default)(new Date,3),new Date]}},{label:(0,a.t)([gl,"last_12_months"]),value:"last_12_months",onSelect:function(){return[(0,Ys.default)(new Date,12),new Date]}},{label:(0,a.t)([gl,"month_to_date"]),value:"month_to_date",onSelect:function(){return[(0,bl.default)(new Date),new Date]}},{label:(0,a.t)([gl,"quarter_to_date"]),value:"quarter_to_date",onSelect:function(){return[(0,yl.default)(new Date),new Date]}},{label:(0,a.t)([gl,"year_to_date"]),value:"year_to_date",onSelect:function(){return[(0,vl.default)(new Date),new Date]}}],_l={label:(0,a.t)([gl,"custom"]),value:"custom",onSelect:,jl=xl[2];function wl(e){var t=e.value,r=e.onChange;return(0,c.jsx)(fl.R,{value:t,onChange:r,children:function(e){var r=e.open;return(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)(fl.R.Button,{className:J()("focus-within:bg-secondary border-dark flex min-w-[11rem] items-center justify-center gap-x-0 rounded-s-md border px-3 py-2",{"bg-secondary":r}),children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:t.label}),(0,c.jsx)(bt.JO,{type:"16-chevron-down",size:16,className:J()(r?"text-darkest":"text-default")})]}),(0,c.jsx)(ml.u,{as:n.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,c.jsx)(fl.R.Options,{className:"bg-primary absolute mt-1 max-h-96 w-full overflow-auto rounded-md py-2 shadow-2xl",children:xl.map((function(e){return(0,c.jsx)(fl.R.Option,{value:e,className:"hover:text-dark hover:bg-secondary cursor-pointer list-none px-5 py-2",children:function(t){var r=t.selected;return(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:r?"medium":void 0,color:r?"text-selector-active":void 0,children:e.label}),r&&(0,c.jsx)(bt.JO,{type:"20-checkmark",className:"text-selector-active"})]})}},e.value)}))})})]})}})}function Ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(r),!0).forEach((function(t){Sl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ol(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nl=function(e){var t=e.defaultDateRange,r=e.onChange,i=e.maxDate,o=(0,lr.ww)().section,a=(0,n.useRef)(null),s=kl((0,n.useState)(t?_l:jl),2),l=s[0],u=s[1];return(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(wl,{value:l,onChange:function(e){var t,n=kl(e.onSelect(),2),i=n[0],o=n[1],s=null===(t=a.current)||void 0===t?void 0:t.flatpickr;(0,sl.Z)(s,"flatPickrInstance is null"),s.setDate([i,o],!1),r([i,o]),u(e)}}),(0,c.jsx)(al.Z,{ref:a,options:{mode:"range",dateFormat:"Y-m-d",defaultDate:t||(l?l.onSelect():void 0),maxDate:i,onReady:function(){o!==lr.kS.USER&&(0,fn.defer)((function(){var e,t=null===(e=a.current)||void 0===e?void 0:e.flatpickr;(0,sl.Z)(t,"flatPickrInstance is null"),t.calendarContainer.classList.add("settings-app")}))}},render:function(e,t){return(0,c.jsxs)("div",{className:"border-dark focus-within:bg-secondary flex cursor-pointer items-center justify-center gap-x-2 rounded-r-md border border-l-0 px-3 py-2",onClick:function(){var e,t,r;null===(e=a.current)||void 0===e||null===(t=e.flatpickr)||void 0===t||null===(r=t.open)||void 0===r||r.call(t)},children:[(0,c.jsx)(bt.JO,{type:"16-calendar",size:16,className:"text-default"}),(0,c.jsx)(dl,Pl({ref:t},e))]})},onChange:function(e){var t=kl(e,2),n=t[0],i=t[1];n&&i&&(r([n,i]),u(_l))}})]})},Tl=r(23984);function Al(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Il=[{label:(0,a.t)("analytics.member"),value:"member"},{label:(0,a.t)("analytics.admin"),value:"admin"}],Dl=function(e){var t,r=e.isInitialOpen,n=e.onApply,i=e.changeUrl,o=void 0===i||i,s=e.value,l=(0,To.Xt)(),u=l.queryParams,d=l.updateUrl,f=null!==(t=null!==s&&void 0!==s?s:u.type)&&void 0!==t?t:"member";return(0,c.jsx)(To.wn,{chip:(0,a.t)(["analytics","type"]),title:(0,a.t)(["analytics","type"]),selectedText:f,renderSelectedText:function(e){return(0,c.jsx)(To.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(r),!0).forEach((function(t){El(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Al(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:Il},e))},isInitialOpen:r,onApply:function(e){o&&d("type",e),(0,fn.isFunction)(n)&&n(e)},shouldShowClearButton:!1,children:(0,c.jsx)(To.l6,{options:Il,legend:(0,a.t)("analytics.type"),name:"type-filter",activeText:f})})},Ll=function Ml(e){var t=e.className,r=e.children;return(0,c.jsx)("header",{className:J()("border-primary flex items-center justify-between border-b px-6 py-3",t),children:r})}function Rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bl,Ul=function(e){return(0,$s.default)(e,"yyyy-MM-dd")},zl={overview:(0,zo.t)("settings_nav_v3.analytics_v2.overview"),members:(0,zo.t)("settings_nav_v3.analytics_v2.members"),post_comments:(0,zo.t)("settings_nav_v3.analytics_v2.post_comments"),messages:(0,zo.t)("settings_nav_v3.analytics_v2.messages"),spaces:(0,zo.t)("settings_nav_v3.analytics_v2.spaces")},Vl=function(){var e,t=(0,dr.UO)().action,r=void 0===t?"overview":t,n=(0,lr.TC)().currentAppearance,i=(0,dr.k6)(),o=(0,rl.t)(),a=(0,v.wh)().currentCommunitySettings.v2_analytics_enabled,s=new Date;new Date(s).setMonth(s.getMonth()-3);var u=o.end_date||Ul(new Date),d=o.start_date||Ul((0,Ys.default)(new Date,3)),m=null!==(e=o.type)&&void 0!==e?e:"member",p=(0,f.useQuery)(S.av.settings.analytics.analyticsIframe({params:{dashboard_type:r,start_date:d,end_date:u,member_roles:m,theme:n}})),h=p.data,b=void 0===h?{}:h,y=p.isLoading;if(!a)return(0,c.jsx)(dr.l_,{to:"/settings"});var g=b.iframe_url;return(0,c.jsxs)("div",{className:"bg-primary min-h-screen",children:[(0,c.jsxs)(Ml,{children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:zl[r]}),"overview"===r?(0,c.jsx)(ol,{}):(0,c.jsx)(Nl,{defaultDateRange:function(){var e=o.start_date,t=o.end_date;if(t&&e)return[e,t]}(),onChange:function(e){var t=Rl(e,2),r=t[0],n=t[1],a=Ul(r),s=Ul(n);o.start_date=a,o.end_date=s,i.push({search:tl.stringify(o)})},maxDate:(0,Xs.default)(new Date)})]}),(0,c.jsx)(Ll,{}),y?(0,c.jsx)(l.aN,{}):(0,c.jsx)(el.Z,{checkOrigin:!1,src:g,style:{width:"1px",minWidth:"100%"}},g)]})},Zl=r(91183);function Hl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ql={COMMUNITY_TOKENS:(0,a.t)("create_token.tabs.community_tokens"),MY_TOKENS:(0,a.t)("create_token.tabs.my_tokens")},Gl=(Hl(Bl={},ql.COMMUNITY_TOKENS,"community_tokens"),Hl(Bl,ql.MY_TOKENS,"my_tokens"),Bl),Wl=["zapier","headless"],Ql=function(e){var t=e.dateTime;if(!t)return null;var r=(0,Xe.wc)({dateTime:new Date(t),format:"long_date"});return(0,c.jsx)("time",{dateTime:t,children:r})},Kl=function(){return{list:function(e){var t=e.params,r=void 0===t?{}:t;return(0,Er.UT)(S.av.apiTokens.index({params:r}))},create:function(e){return(0,Er.Cu)(S.av.apiTokens.create(),e)},destroy:function(e){return(0,Er.pC)(S.av.apiTokens.destroy({id:e}))},refresh:function(e){return(0,Er.gN)(S.av.apiTokens.refresh({id:e}))}}},Jl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,dr.TH)().search;return new URLSearchParams(t).get(e)};function $l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(r),!0).forEach((function(t){Xl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ec=function(e){var t,r,i,o,a,s=Kl().list,l=Jl("type"),c=null!==e&&void 0!==e?e:{},u=c.query,d=void 0===u?"":u,m=c.perPage,p=void 0===m?20:m,h=c.initialPage,b=void 0===h?1:h,y=c.options,v=["settings","api",d,p,b],g=Yl({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===y?{}:y),x=(0,f.useInfiniteQuery)(v,(function(e){var t=e.pageParam,r=void 0===t?b:t,n=1;r>0&&(n=r);var i=Yl({page:n,per_page:p,user_tokens:"my_tokens"===l},d&&{query:d});return s({params:i})}),g),_=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=x.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=x.data)||void 0===t?void 0:t.pages]),j=null!==(r=null===(i=_[0])||void 0===i?void 0:i.count)&&void 0!==r?r:0,w=null!==(o=null===(a=_[0])||void 0===a?void 0:a.per_page)&&void 0!==o?o:p;return(0,n.useEffect)((function(){x.refetch()}),[l,x]),Yl(Yl({},x),{},{queryKey:v,totalApiTokens:j,pageSize:w,pages:_})},tc="settings.api.table",rc=function(e){var t=e.apiTokenId,r=e.isOpen,n=e.onClose,i=(0,f.useQueryClient)(),o=(0,l.pm)(),s=o.success,u=o.error,d=ec().queryKey,m=Kl().refresh,p=(0,f.useMutation)({mutationFn:function(){return m(t)},onSuccess:function(){i.invalidateQueries(d),n(),s((0,a.t)([tc,"success_refreshing"]),{duration:"short",shouldUseProgress:!1})},onError:function(){n(),u((0,a.t)([tc,"error_refreshing"]))}}).mutate;return(0,c.jsx)(Gr.cV,{isOpen:r,onClose:n,confirmVariant:"circle",onConfirm:p,title:(0,a.t)([tc,"confirm_refresh.title"]),children:(0,a.t)([tc,"confirm_refresh.content"])})},nc="settings.api.table",ic=function(e){var t=e.apiTokenId,r=e.isOpen,n=e.onClose,i=(0,f.useQueryClient)(),o=(0,l.pm)(),s=o.success,u=o.error,d=ec().queryKey,m=Kl().destroy,p=(0,f.useMutation)({mutationFn:function(){return m(t)},onSuccess:function(){i.invalidateQueries(d),n(),s((0,a.t)([nc,"success_revoking"]),{duration:"short",shouldUseProgress:!1})},onError:function(){n(),u((0,a.t)([nc,"error_revoking"]))}}).mutate;return(0,c.jsx)(Gr.cV,{isOpen:r,onClose:n,confirmVariant:"danger",onConfirm:p,title:(0,a.t)([nc,"confirm_revoke.title"])})};function oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ac(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ac(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sc=function(e){var t=e.apiTokenId,r=e.canBeRefreshed,i=e.canBeRevoked,o=oc((0,n.useState)(!1),2),s=o[0],l=o[1],u=oc((0,n.useState)(!1),2),d=u[0],f=u[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Q.w.Actions,{children:[r&&(0,c.jsx)(Q.w.Actions.Item,{onClick:function(){f(!0)},children:(0,a.t)("refresh")}),i&&(0,c.jsx)(Q.w.Actions.Item,{hasDanger:!0,onClick:function(){l(!0)},children:(0,a.t)("revoke")})]}),i&&(0,c.jsx)(ic,{apiTokenId:t,isOpen:s,onClose:function(){return l(!1)}}),r&&(0,c.jsx)(rc,{apiTokenId:t,isOpen:d,onClose:function(){return f(!1)}})]})},lc=function(e){var t=e.first_name,r=e.last_name;return t||r?(0,c.jsxs)("span",{children:[t," ",r]}):(0,c.jsx)(Zl.n,{})},cc=function(){var e,t=(0,To.Xt)().queryParams,r=(0,No.v)(),n=r.setPage,i=r.initialPage,o=String(null!==(e=null===t||void 0===t?void 0:t.query)&&void 0!==e?e:""),a=ec({perPage:20,initialPage:i,query:o,options:{keepPreviousData:!1}});return{infiniteQuery:a,totalApiTokens:null===a||void 0===a?void 0:a.totalApiTokens,isLoading:null===a||void 0===a?void 0:a.isLoading,initialPage:i,defaultPageSize:20,setPage:n}},uc="settings.api",dc=[{accessorKey:"name",header:(0,a.t)([uc,"table.name"])},{accessorKey:"token",header:(0,a.t)([uc,"table.token"]),cell:function(e){var t=e.getValue();return(0,c.jsx)("span",{className:"font-mono",children:t})}},{accessorKey:"creator",cell:function(e){var t=e.getValue(),r=t.first_name,n=t.last_name;return(0,c.jsx)(lc,{first_name:r,last_name:n})},thClassName:et.M.md,cellClassName:et.M.md,header:(0,a.t)([uc,"table.creator"])},{accessorKey:"last_used_at",header:(0,a.t)([uc,"table.last_used"]),thClassName:et.M.lg,cellClassName:et.M.lg,cell:function(e){var t=e.getValue();return t?(0,c.jsx)(Ql,{dateTime:t}):(0,a.t)([uc,"table.never"])}},{accessorKey:"created_at",header:(0,a.t)([uc,"table.created_on"]),thClassName:et.M.xl,cellClassName:et.M.xl,cell:function(e){return e.getValue()?(0,c.jsx)(Ql,{dateTime:e.getValue()}):(0,c.jsx)(Zl.n,{})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",cell:function(e){var t=Wl.includes(e.row.original.name.toLocaleLowerCase());return(0,c.jsx)(sc,{apiTokenId:e.row.original.id,canBeRefreshed:t,canBeRevoked:!t})}}],fc=function(){var e=cc(),t=e.infiniteQuery,r=e.totalApiTokens,n=e.defaultPageSize,i=e.initialPage,o=e.setPage;return(0,c.jsxs)(bo.J,{columns:dc,infiniteQuery:t,pageSize:n,initialPage:i,onChangePage:function(e){return o(e)},children:[(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)([uc,"table.total"],{count:r})})}),(0,c.jsxs)("div",{className:"px-6","data-testid":"api-tokens-list",children:[(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsx)(Q.w.Header,{isSticky:!0}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})]})},mc="settings.api",pc={name:""},hc=function(){var e=(0,l.pm)(),t=(0,dr.k6)(),r=ec().queryKey,n=Kl().create,i=(0,f.useMutation)({mutationFn:function(e){return n(e)},onSuccess:function(){lr.Eh.invalidateQueries(r),t.push(S.lA.settings.api),e.success((0,a.t)([mc,"success_saving"]))},onError:function(){return e.error((0,a.t)([mc,"error_saving"]))}}),o=i.mutate,s=i.isLoading;return{defaultValues:pc,isSaving:s,handleSubmit:o}},bc=function(){var e=hc(),t=e.defaultValues,r=e.isSaving,n=e.handleSubmit,i=(0,dr.k6)(),o=In();return(0,c.jsxs)(l.l0,{onSubmit:function(e){return n(e)},defaultValues:t,children:[(0,c.jsx)(yn,{id:"api-token-name",name:"name",translationRoot:"settings.api.new_token",isHorizontal:!0,rules:o,children:(0,c.jsx)(l.l0.Input,{autoFocus:!0})}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)(l.zx,{type:"button",variant:"secondary",large:!0,onClick:function(){i.push(S.lA.settings.api)},children:(0,a.t)("cancel")}),(0,c.jsx)(l.zx,{variant:"circle",disabled:r,large:!0,children:r?(0,a.t)("saving"):(0,a.t)("save")})]})})]})},yc=function(){return(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)("settings.api.new_token_subtitle"),children:(0,c.jsx)(bc,{})})})},vc=function(){return(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.settings.api,component:fc}),(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.settings.new_api,component:yc})]})},gc=r(69900),xc=r(57367),_c=r(97346),jc=function(){var e=(0,dr.k6)(),t=_c.X.professional,r=t.title,n=t.features,i=function(){e.push(S.lA.plans.general)};return(0,c.jsxs)("div",{children:[(0,c.jsx)("header",{className:"bg-primary border-primary flex w-full items-center justify-between border-b px-6 py-4",children:(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,a.t)("settings.api.title")})}),(0,c.jsx)("section",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,c.jsxs)("div",{className:"max-w-8xl border-primary bg-primary mx-auto flex w-full flex-col gap-y-4 rounded-lg border p-4 text-center lg:p-12",children:[(0,c.jsx)(xc.x,{title:(0,a.t)("community.feature.no_api_access.title"),subtitle:(0,a.t)("community.feature.no_api_access.description_no_fullstop"),onClick:i}),(0,c.jsx)(gc.K,{title:r,features:n,onClick:i})]})})]})};function wc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Oc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pc=function(){var e,t=(0,v.wh)().currentCommunityMember,r=(0,dr.k6)(),i=Jl("type"),o=(null!==(e=(0,dr.$B)(S.lA.settings.api))&&void 0!==e?e:{}).isExact,s=wc((0,n.useState)(ql.COMMUNITY_TOKENS),2),u=s[0],d=s[1];(0,n.useEffect)((function(){d("my_tokens"===i?ql.MY_TOKENS:ql.COMMUNITY_TOKENS)}),[i]);var m,p=(m=Gl[ql.MY_TOKENS],(0,f.useQuery)("/settings/api?type=".concat(m),{retry:0})),h=p.isLoading,b=p.isError,y=(0,dr.$B)(S.lA.settings.new_api),g=u===ql.MY_TOKENS,x=!y&&!h&&!b,_=function(){var e=(0,v.wh)().currentCommunity,t=null!==e&&void 0!==e?e:{},r=t.api_access_feature_flag_enabled,n=t.allow_api_access_for_trials,i=t.is_on_trial,o=cc(),a=o.totalApiTokens;return!o.isLoading&&(Number(a)>0||r&&(!i||n))}();return _?(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("api"),pageMetaProps:{bodyClassNames:"view-api"},hasBorder:!1,filters:t.policies.can_create_api_token&&x&&(0,c.jsx)(l.mQ,{controlled:!0,activeTab:u,onClick:function(e){r.push("?type=".concat(Gl[e])),d(e)},options:[{label:ql.COMMUNITY_TOKENS},{label:ql.MY_TOKENS}],variant:"underline",wrapperClassName:"px-6 py-0"}),rightContent:!g&&o&&(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){return r.push(S.lA.settings.new_api)},children:(0,a.t)("create_an_api_token")})}),(0,c.jsx)(vc,{})]}):(0,c.jsx)(jc,{})},Sc=r(24897),kc=r(83856),Cc=function(e){var t,r,n,i,o,a=e.columns,s=e.asyncTaskQuery,l=e.onChangePage;return(0,c.jsxs)(Q.w,{columns:a,data:null!==(t=null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.records)&&void 0!==t?t:[],isLoading:null===s||void 0===s?void 0:s.isLoading,initialPage:null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.page,pageSize:null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.per_page,totalRecordsCount:null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count,onChangePage:l,children:[(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsx)(Q.w.Header,{}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})},Nc=function(){return(0,c.jsxs)("div",{className:"pt-[30vh] text-center",children:[(0,c.jsx)(l.ZT.TitleLg,{weight:"bold",children:(0,a.t)("async_task.settings.empty_state.title")}),(0,c.jsx)(l.ZT.BodyLg,{children:(0,a.t)("async_task.settings.empty_state.subtitle")})]})},Tc=function(e){var t=e.row.original,r=(0,Xe.TF)(t.created_at),n=(0,Xe.wc)({dateTime:new Date(t.created_at),format:Xe.fK.date_time_with_fractional_digits_and_short_timezone});return(0,c.jsx)(yt.Y,{className:"cursor-help",content:n,children:(0,c.jsx)("time",{dateTime:t.created_at,children:r})})},Ac=function(e){var t=e.row.original;return(0,c.jsxs)("div",{className:"flex flex-col",children:[(null===t||void 0===t?void 0:t.input_file)&&(0,c.jsx)(yt.Y,{className:"cursor-help",content:(0,a.t)(["async_task.settings.input_file","tooltip"]),children:(0,c.jsx)("a",{href:null===t||void 0===t?void 0:t.input_file_url,children:(0,a.t)(["async_task.settings.input_file","title"])})}),(null===t||void 0===t?void 0:t.output_file)&&(0,c.jsx)(yt.Y,{className:"cursor-help",content:(0,a.t)(["async_task.settings.output_file","tooltip"]),children:(0,c.jsx)("a",{href:null===t||void 0===t?void 0:t.output_file_url,children:(0,a.t)(["async_task.settings.output_file","title"])})})]})},Ec={completed:"success",failed:"danger",partial_success:"warning",processing:"default",pending:"default"},Ic=function(e){var t=e.row.original;return(0,c.jsx)(yt.Y,{className:"cursor-help",content:(0,a.t)(["async_task.settings.status",t.status,"tooltip"]),children:(0,c.jsx)(Hr.O,{variant:Ec[t.status],children:(0,a.t)(["async_task.settings.status",t.status,"title"])})})},Dc="async_task.settings",Lc={PaywallBulkLogs:[{header:(0,a.t)([Dc,"columns","type"]),accessorKey:"name",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.name},canSort:!1},{header:(0,a.t)([Dc,"columns","status"]),accessorKey:"status",cell:Ic,thClassName:et.M.sm,cellClassName:et.M.sm,canSort:!1},{header:(0,a.t)([Dc,"columns","progress"]),accessorKey:"progress",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.progress},thClassName:et.M.xl,cellClassName:et.M.xl,canSort:!1},{header:(0,a.t)([Dc,"columns","results"]),accessorKey:"results",cell:Ac,canSort:!1},{header:(0,a.t)([Dc,"columns","performed"]),accessorKey:"createdAt",cell:Tc,thClassName:et.M.xl,cellClassName:et.M.xl,canSort:!1}],BulkImportLogs:[{header:(0,a.t)([Dc,"columns","type"]),accessorKey:"name",cell:function(e){var t;return null===(t=e.row.original)||void 0===t?void 0:t.name},canSort:!1},{header:(0,a.t)([Dc,"columns","status"]),accessorKey:"status",cell:Ic,thClassName:et.M.sm,cellClassName:et.M.sm,canSort:!1},{header:(0,a.t)([Dc,"columns","progress"]),accessorKey:"progress",cell:thClassName:et.M.xl,cellClassName:et.M.xl,canSort:!1},{header:(0,a.t)([Dc,"columns","results"]),accessorKey:"results",cell:Ac,canSort:!1},{header:(0,a.t)([Dc,"columns","message"]),accessorKey:"message",cell:function(e){var t=e.row.original;return null!==t&&void 0!==t&&t.message?(0,c.jsx)(yt.Y,{className:"cursor-help",content:t.message,children:(0,c.jsxs)("p",{className:"break-normal",children:[(0,fn.truncate)(t.message,{length:30}),t.message.length>30&&(0,c.jsx)(bt.JO,{type:"info"})]})}):null},thClassName:et.M,cellClassName:et.M,canSort:!1},{header:(0,a.t)([Dc,"columns","performed"]),accessorKey:"createdAt",cell:Tc,thClassName:et.M.xl,cellClassName:et.M.xl,canSort:!1}]};function Mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(r),!0).forEach((function(t){Fc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Uc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zc=function(e){var t,r,i=e.asyncTaskTypes,o=void 0===i?["AsyncTasks::BulkCommunityMemberImportTask"]:i,s=e.columnsVariant,u=void 0===s?"BulkImportLogs":s,d=e.emptyStateComponentRender,m=void 0===d?Nc:d,p=(0,f.useQueryClient)(),h=Bc((0,n.useState)(1),2),b=h[0],y=h[1],g=(0,f.useQuery)({queryKey:o,queryFn:function(){return(0,Er.UT)(S.av.asyncTasks.index({params:{type:o,page:b,per_page:10}}))}}),x=(0,v.N3)()||{},_=(0,l.pm)(),j=_.error,w=_.success,O=function(e){p.setQueryData(o,(function(t){return Rc(Rc({},t),{},{records:null===t||void 0===t?void 0:t.records.map(()})}))};(0,Sc.s)({channel:"AsyncTaskChannel",onMessageReceive:function(e){var t=e.event,r=e.record,n=JSON.parse(r);if(o.includes(null===n||void 0===n?void 0:n.type))if("asyncTaskUpdated"===t)O(n);else if("asyncTaskFinished"===t){O(n);var i=(0,a.t)("async_task.settings.status.".concat(n.status,".toast_message"));"completed"===n.status?w(i):j(i)}},canCreateConnection:!!x.id,community_member_id:x.id});var P=(null===g||void 0===g||null===(t=g.data)||void 0===t?void 0:t.count)||0,k=Lc[u];return null!==g&&void 0!==g&&g.isLoading?(0,c.jsx)(l.aN,{}):(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("async_task.settings.title"),hasBorder:!0,layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-plans"},headline:P>0&&(0,c.jsx)(kc.s,{children:(0,c.jsx)(kc.s.Title,{children:(0,a.t)("async_task.settings.count",{count:P})})})}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)("div",{className:"px-6",children:(0,c.jsx)(dn,{children:(0,fn.isEmpty)((null===g||void 0===g||null===(r=g.data)||void 0===r?void 0:r.records)||[])?m():(0,c.jsx)(Cc,{columns:k,asyncTaskQuery:g,onChangePage:)})})]})},Vc=r(54132);function Zc(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(r),!0).forEach((function(t){Gc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wc=function(){var e,t,r=(0,l.pm)(),n=r.success,i=r.error,o=(0,f.useQueryClient)(),s=(0,v.wh)(),c=s.isLoading,u=s.currentCommunity,d=(void 0===u?{}:u)||{},m={v2_head_js_code:d.v2_head_js_code,v2_head_snippet_code:d.v2_head_snippet_code},p=(0,f.useMutation)({mutationFn:function(e){return vn.$.update({community:qc({},e)})},onSuccess:(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.invalidateQueries(["pundit-user"]);case 2:n((0,a.t)(["settings.messages.success"]));case 3:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Zc(o,n,i,a,s,"next",e)}function s(e){Zc(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return t.apply(this,arguments)}),onError:function(){return i((0,a.t)(["settings.messages.error"]))}}),h=p.mutate;return{isLoading:c,isSaving:p.isLoading,defaultValues:m,handleSubmit:h}},Qc="settings.code_snippets",Kc=function(){var e=Wc(),t=e.isLoading,r=e.isSaving,n=e.defaultValues,i=e.handleSubmit;return t?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)(l.l0,{onSubmit:function(e){return i(e)},defaultValues:n,children:(0,c.jsxs)("div",{className:J()("form-section"),children:[(0,c.jsx)(Vc.b,{showIcon:!1,type:"warning",description:(0,a.t)([Qc,"warning_message"])}),(0,c.jsx)(yn,{name:"v2_head_snippet_code",translationRoot:Qc,children:(0,c.jsx)(l.l0.TextArea,{name:"v2_head_snippet_code",rows:7})}),(0,c.jsx)(yn,{name:"v2_head_js_code",translationRoot:Qc,children:(0,c.jsx)(l.l0.TextArea,{name:"v2_head_js_code",rows:7})}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:r,large:!0,children:r?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})})},Jc=function(){var e=(0,dr.k6)(),t=_c.X.professional,r=t.title,n=t.features,i=function(){e.push(S.lA.plans.general)};return(0,c.jsxs)("div",{children:[(0,c.jsx)("header",{className:"bg-primary border-primary flex w-full items-center justify-between border-b px-6 py-4",children:(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,a.t)("settings.code_snippets.title")})}),(0,c.jsx)("section",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,c.jsxs)("div",{className:"max-w-8xl border-primary bg-primary mx-auto flex w-full flex-col gap-y-4 rounded-lg border p-4 text-center lg:p-12",children:[(0,c.jsx)(xc.x,{title:(0,a.t)("community.feature.no_custom_css.title"),subtitle:(0,a.t)("community.feature.no_custom_css.description"),onClick:i}),(0,c.jsx)(gc.K,{title:r,features:n,onClick:i})]})})]})},$c="settings.code_snippets",Yc=function(){var e;return(e=((0,v.wh)().currentCommunity||{}).code_snippets_feature_flag_enabled,Boolean(e))?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([$c,"title"]),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"code_snippets"}}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([$c,"subtitle"]),children:(0,c.jsx)(Kc,{})})})})]}):(0,c.jsx)(Jc,{})};function Xc(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function eu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Xc(o,n,i,a,s,"next",e)}function s(e){Xc(o,n,i,a,s,"throw",e)}a(void 0)}))}}function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ru(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nu="community-ai-setting",iu=function(){var e=S.av.communities.communityAiSettings.show();return(0,Er.UT)(e)},ou=function(){var e=S.av.communities.communityAiSettings.languages();return(0,Er.UT)(e)},au=function(e){var t=e.updates,r=S.av.communities.communityAiSettings.update(),n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(r),!0).forEach((function(t){ru(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);return(0,Er.gN)(r,n)},su=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.onMutate,i=r.onSuccess,o=r.onError,a=r.onSettled,s=(0,v.wh)().refetch,l=(0,f.useQueryClient)();return(0,f.useMutation)(au,{onMutate:(t=eu(se().mark((function e(t){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.cancelQueries(nu);case 2:return r=l.getQueryData(nu),l.setQueryData(nu,t),n&&n(),e.abrupt("return",{previousData:r,newData:t});case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onSuccess:(e=eu(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:l.setQueryData(nu,t),i&&i();case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:o,onSettled:a})},lu=r(39834),cu=function(e){var t=e.title,r=e.description,n=e.kbArticle,i=e.children,o=e.fieldName,s=(0,c.jsxs)(y.Z.TitleSm,{weight:"font-semibold",children:[(0,c.jsx)(bt.JO,{type:"16-artificial-intelligence",className:"mr-2 "}),t,(0,c.jsx)("div",{className:"ml-2 inline",children:(0,c.jsx)(lu.g,{label:(0,a.t)("settings.community_ai.beta").toUpperCase(),square:!0})})]});return(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("div",{children:(0,c.jsx)(ce.l.Item,{name:"community_ai_setting[".concat(o,"]"),label:s,hideDescription:!0,hideBorder:!0,fullWidth:!0,isToggle:!0,inline:!0,children:(0,c.jsx)(ce.l.ToggleSwitch,{variant:"small"})})}),(0,c.jsxs)(y.Z.BodyMd,{color:"text-default",children:[r,"\xa0",(0,c.jsx)("a",{className:"text-inherit underline",href:n,target:"_blank",rel:"noreferrer",children:(0,a.t)("settings.community_ai.learn_more")})]})]}),i]})},uu=function(){var e="activity_scores_enabled",t=!(0,(0,pr.Gc)().watch)("community_ai_setting[".concat(e,"]")),r=function(e){return e.map((function(e){return(0,c.jsx)(l.l0.Item,{name:"community_ai_setting[".concat(e.name,"]"),label:e.label,tooltipText:e.tooltip,className:"!py-2",hideBorder:!0,hideDescription:!0,inlineReverse:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{disabled:t,variant:"small"})},e.name)}))}([{name:"activity_scores_presence_enabled",label:(0,a.t)("settings.community_ai.activity_scores.presence.label"),tooltip:(0,a.t)("settings.community_ai.activity_scores.presence.tooltip")},{name:"activity_scores_participation_enabled",label:(0,a.t)("settings.community_ai.activity_scores.participation.label"),tooltip:(0,a.t)("settings.community_ai.activity_scores.participation.tooltip")},{name:"activity_scores_contribution_enabled",label:(0,a.t)("settings.community_ai.activity_scores.contribution.label"),tooltip:(0,a.t)("settings.community_ai.activity_scores.contribution.tooltip")},{name:"activity_scores_connection_enabled",label:(0,a.t)("settings.community_ai.activity_scores.connection.label"),tooltip:(0,a.t)("settings.community_ai.activity_scores.connection.tooltip")}]);return(0,c.jsx)(cu,{title:(0,a.t)("settings.community_ai.activity_scores.title"),description:(0,a.t)("settings.community_ai.activity_scores.description"),fieldName:e,kbArticle:"https://help.circle.so/c/community-ai/how-do-member-activity-scores-work",children:r})},du=function(e){var t=e.languageOptions,r="automatic_video_transcriptions_enabled",n=!(0,(0,pr.Gc)().watch)("community_ai_setting[".concat(r,"]")),i=Object.keys(t).map((function(e){return{value:t[e],label:e.charAt(0).toUpperCase()+e.slice(1)}}));return(0,c.jsx)(cu,{title:(0,a.t)("settings.community_ai.automatic_video_transcriptions.title"),description:(0,a.t)("settings.community_ai.automatic_video_transcriptions.description"),fieldName:r,kbArticle:"https://help.circle.so/c/community-ai/how-do-automated-transcriptions-work",children:(0,c.jsx)(l.l0.Item,{name:"community_ai_setting[automatic_video_transcriptions_language]",label:(0,a.t)("settings.community_ai.automatic_video_transcriptions.language"),hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(l.l0.SelectNative,{className:"w-full max-w-sm",disabled:n,options:i,defaultValues:0})})})},fu=function(){var e="content_copilot_enabled",t=!(0,(0,pr.Gc)().watch)("community_ai_setting[".concat(e,"]"));return(0,c.jsx)(cu,{title:(0,a.t)("settings.community_ai.content_co_pilot.title"),description:(0,a.t)("settings.community_ai.content_co_pilot.description"),fieldName:e,kbArticle:"https://help.circle.so/c/community-ai/how-does-content-co-pilot-work",children:(0,c.jsx)(l.l0.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:(0,a.t)("settings.community_ai.content_co_pilot.textarea.placeholder"),name:"community_ai_setting[content_copilot_description]",rules:{maxLength:{value:255,message:(0,a.t)("settings.community_ai.content_co_pilot.textarea.max_length_validation")}},children:(0,c.jsx)(l.l0.TextArea,{disabled:t})})})};function mu(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var pu="settings.community_ai",hu=function(e){var t=e.settingsData,r=e.languagesData,n=(0,l.pm)(),i=su({onSuccess:function(){n.success(I18n.t("".concat(pu,".save.success")))},onError:function(){n.error(I18n.t("".concat(pu,".save.error")))}}),o=t,s=function(){var e,t=(e=se().mark((function e(t){return se().wrap((,e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){mu(o,n,i,a,s,"next",e)}function s(e){mu(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,c.jsxs)(l.l0,{onSubmit:s,defaultValues:o,children:[(0,c.jsx)(fu,{}),(0,c.jsx)(uu,{}),(0,c.jsx)(du,{languageOptions:r}),(0,c.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,c.jsx)("span",{className:"text-dark text-sm font-semibold normal-case leading-5"}),(0,c.jsx)(l.zx,{variant:"circle",medium:!0,disabled:i.isLoading,children:(0,a.t)("settings.community_ai.save_button")})]})]})},bu=r(25807),yu=function(){return(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsxs)(bu.mw,{md:!0,full:!0,children:[(0,c.jsxs)(bu.RN,{full:!0,children:[(0,c.jsx)(bu.X2,{lg:!0,half:!0}),(0,c.jsx)(bu.X2,{lg:!0,almostFull:!0})]}),(0,c.jsx)(bu.qE,{})]})})},vu=function(){return(0,c.jsxs)(bu.RN,{full:!0,children:[(0,c.jsx)(bu.X2,{lg:!0}),(0,c.jsx)(bu.X2,{lg:!0,full:!0}),(0,c.jsx)(bu.X2,{lg:!0,almostFull:!0}),(0,c.jsx)(bu.X2,{lg:!0,half:!0})]})},gu=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"px-5 py-6",children:[(0,c.jsx)(yu,{}),(0,c.jsx)(vu,{})]}),(0,c.jsxs)("div",{className:"px-5 py-6",children:[(0,c.jsx)(yu,{}),(0,c.jsx)(vu,{}),(0,c.jsx)("div",{className:"pt-6",children:(0,c.jsxs)(bu.RN,{full:!0,children:[(0,c.jsx)(bu.X2,{lg:!0,half:!0}),(0,c.jsx)(bu.X2,{lg:!0,half:!0}),(0,c.jsx)(bu.X2,{lg:!0,half:!0}),(0,c.jsx)(bu.X2,{lg:!0,half:!0})]})})]}),(0,c.jsxs)("div",{className:"px-5 py-6",children:[(0,c.jsx)(yu,{}),(0,c.jsx)(vu,{}),(0,c.jsx)("div",{className:"pt-6",children:(0,c.jsx)(bu.RN,{full:!0,children:(0,c.jsx)(bu.X2,{lg:!0,half:!0})})})]})]})},xu=r(73164),_u=r(49498),ju=function(e){var t=e.localeItem,r="settings.community_ai.marketing";return(0,c.jsxs)("li",{className:"mb-4 flex items-start justify-start last:mb-0",children:[(0,c.jsx)("div",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded-full bg-blue-200 dark:bg-gray-800",children:(0,c.jsx)(bt.JO,{className:"text-blue-700 dark:text-gray-400",useWithFillCurrentColor:!0,size:16,type:"check"})}),(0,c.jsx)("span",{className:"ml-3 text-blue-100",children:(0,c.jsxs)(y.Z.BodyMd,{color:"text-default",children:[(0,c.jsx)("b",{children:(0,a.t)("".concat(r,".").concat(t,".title"))})," ",(0,a.t)("".concat(r,".").concat(t,".description"))]})})]})},wu=r(15610),Ou=function(){var e=(0,v.wh)(),t=e.currentCommunity;return!(e.isLoading||null===t||void 0===t||!t.community_ai_feature_flag_enabled)};function Pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Su(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(r),!0).forEach((function(t){ku(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ku(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cu(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Nu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Cu(o,n,i,a,s,"next",e)}function s(e){Cu(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Tu=function(){var e=(0,l.pm)(),t=(0,v.wh)().refetch,r=(0,xu.w)(),n=(0,re.E)().changePlanModalParams,i="settings.community_ai",o=Ou(),s=su({onError:function(){e.error(I18n.t("".concat(i,".save.error")))}}),u=function(){var e=Nu(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Nu(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Nu(se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o?s.mutate({updates:{saw_welcome_message:!0}}):(t=n(wu.o),r.show(Su(Su({},t),{},{onSuccess:u,onCloseModal:d,source:_u.f.COMMUNITY_AI_SPLASH_SCREEN,subheading:(0,a.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,a.t)("settings.community_ai.feature_name")}),successButtonLabel:(0,a.t)("pricing_plans.upgrade_modal.actions.go_to_community_ai"),showPlanDetails:!0})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)("div",{className:"my-16 flex items-center justify-center text-center",children:(0,c.jsxs)("div",{children:[(0,c.jsx)(l.ZT.BodyLg,{children:(0,a.t)("".concat(i,".magic"))}),(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsx)(l.ZT.TitleXxl,{children:(0,a.t)("settings.community_ai.title")})}),(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsxs)(l.ZT.BodyLg,{color:"text-default",tracking:"tracking-normal",children:[(0,a.t)("settings.community_ai.marketing.build_and_scale")," ",(0,c.jsx)("a",{href:"https://circle.so/ai",target:"_blank",rel:"noreferrer",className:"text-inherit underline",children:(0,a.t)("settings.community_ai.marketing.learn_more")})]})}),(0,c.jsx)("div",{className:"dark:bg-tertiary mx-auto mb-10 max-w-lg rounded-lg bg-blue-50 p-6 text-left",children:(0,c.jsx)("ul",{children:["copilot","transcriptions","activity_score"].map(()})}),(0,c.jsx)(l.zx,{onClick:f,variant:"circle",extraLarge:!0,children:o?(0,a.t)("settings.community_ai.marketing.explore"):(0,a.t)("settings.community_ai.marketing.upgrade")})]})})},Au=function(){var e=(0,v.wh)().currentCommunity,t=(0,f.useQuery)(nu,iu),r=t.data,n=t.settingsIsLoading,i=(r||{}).community_ai_setting,o=(i=void 0===i?{}:i).saw_welcome_message,s=(0,f.useQuery)("community-ai-setting-languages",ou),l=s.data,u=(l=void 0===l?{}:l).available_languages,d=s.languagesIsLoading,m=!r||n||!u||d||!e||"undefined"===typeof o,p=Ou()&&o,h=m||p?"max-w-[720px]":"max-w-[800px]",b=m||p?"p-8 pt-2":"p-12",y=m||p?"my-12":"mt-6 md:mt-16 mx-6 md:mx-0";return(0,c.jsxs)("div",{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.community_ai.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"onboarding"}}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"onboarding"}),(0,c.jsx)("div",{className:y,children:(0,c.jsx)("div",{className:"my-0 justify-center",children:(0,c.jsx)("div",{className:"mx-auto my-0 w-full ".concat(h," bg-primary border-primary rounded border ").concat(b),children:m?(0,c.jsx)(gu,{}):p?(0,c.jsx)(hu,{settingsData:r,languagesData:u}):(0,c.jsx)(Tu,{})})})})]})},Eu=r(16244);function Iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Du(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Du(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Du(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lu="custom-domain",Mu="settings.custom_domain",Ru=function(){var e=(0,oe.p)(),t=(0,f.useQueryClient)(),r=Iu((0,n.useState)(!1),2),i=r[0],o=r[1],s=(0,f.useQuery)(Lu,vn.$.getCustomDomain),l=s.data,c=s.isLoading,u=(0,f.useMutation)({mutationFn:function(e){return vn.$.updateCustomDomain(e)},onSuccess:function(){t.invalidateQueries(Lu),t.invalidateQueries("pundit-user"),e.success((0,a.t)([Mu,"custom_domain_added"]))},onError:function(t){var r,n,i,s,l,c,u=null===t||void 0===t||null===(r=t.body)||void 0===r||null===(n=r.errors)||void 0===n||null===(i=n.custom_domain)||void 0===i?void 0:i[0],d=null===t||void 0===t||null===(s=t.body)||void 0===s||null===(l=s.errors)||void 0===l||null===(c=l.custom_domain)||void 0===c?void 0:c[1];o(!!d),e.error(d||u||(0,a.t)("something_went_wrong"))}}),d=u.mutate,m=u.isLoading,p=(0,f.useMutation)({mutationFn:function(){return vn.$.removeCustomDomain()},onSuccess:function(){t.invalidateQueries(Lu),t.invalidateQueries("pundit-user"),e.success((0,a.t)([Mu,"custom_domain_removed"]))},onError:),h=p.mutate;return{customDomain:l,isLoading:c,isSaving:m,isRemoving:p.isLoading,hasCAAError:i,handleSubmit:d,onRemove:h}},Fu=r(42432),Bu="settings.custom_domain",Uu=function(e){var t=e.type,r=e.host,n=e.target;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Fu.i,{className:"border-primary mt-4 hidden rounded-lg border md:table",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-2/12"}),(0,c.jsx)("col",{className:"w-5/12"}),(0,c.jsx)("col",{className:"w-5/12"})]}),(0,c.jsx)(Fu.i.TableHead,{children:(0,c.jsxs)(Fu.i.Tr,{className:"border-none",children:[(0,c.jsx)(Fu.i.Th,{className:"first:pl-4",children:(0,c.jsx)(Fu.i.TableHeaderText,{children:(0,a.t)([Bu,"table.type"])})}),(0,c.jsx)(Fu.i.Th,{children:(0,c.jsx)(Fu.i.TableHeaderText,{children:(0,a.t)([Bu,"table.host_name"])})}),(0,c.jsx)(Fu.i.Th,{children:(0,c.jsx)(Fu.i.TableHeaderText,{children:(0,a.t)([Bu,"table.target_value"])})})]})}),(0,c.jsx)(Fu.i.TableBody,{children:(0,c.jsxs)(Fu.i.Tr,{children:[(0,c.jsx)(Fu.i.Td,{className:"border-none first:pl-4",children:t}),(0,c.jsx)(Fu.i.Td,{className:"border-none",children:r}),(0,c.jsx)(Fu.i.Td,{className:"border-none",children:n})]})})]}),(0,c.jsxs)("div",{className:"border-primary mt-4 flex flex-col gap-4 rounded-lg border p-4 md:hidden",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelXxs,{leading:"leading-tight",color:"text-default",children:(0,a.t)([Bu,"table.type"])})}),t]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelXxs,{leading:"leading-tight",color:"text-default",children:(0,a.t)([Bu,"table.host_name"])})}),r]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelXxs,{leading:"leading-tight",color:"text-default",children:(0,a.t)([Bu,"table.target_value"])})}),n]})]})]})};function zu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zu="settings.custom_domain",Hu=(0,a.t)([Zu,"table.custom_host_placeholder"]),qu=function(){var e=(0,v.wh)().currentCommunity,t=void 0===e?{}:e,r=(0,pr.Gc)().watch,i=zu((0,n.useState)(Hu),2),o=i[0],s=i[1],l=zu((0,n.useState)(!1),2),u=l[0],d=l[1],f=r("custom_domain"),m=(t||{}).root_url;return(0,n.useEffect)((function(){if(f){var e=Eu.isValid(f),t=Eu.parse(f);e?t.subdomain?s(t.subdomain):s("www"):s(Hu),d(e&&!(null!==t&&void 0!==t&&t.subdomain))}}),[f]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Uu,{type:(0,a.t)([Zu,"table.cname"]),host:o,target:m}),u&&(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(Vc.b,{showIcon:!1,type:"warning",description:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("p",{children:(0,a.t)([Zu,"redirect_warning.text"])}),(0,c.jsx)("a",{href:"https://help.circle.so/c/custom-domains/how-do-i-set-up-a-custom-root-domain",target:"_blank",rel:"noreferrer",children:(0,a.t)([Zu,"redirect_warning.see_instructions"])})]})})})]})},Gu=function(e){var t=e.number,r=e.title,n=e.children;return(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"border-primary flex h-8 w-8 items-center justify-center rounded-full border",children:(0,c.jsx)(y.Z.LabelMd,{weight:"semibold",children:t})}),(0,c.jsx)("div",{className:"flex-1",children:(0,c.jsx)(y.Z.BodyLg,{children:r})})]}),(0,c.jsx)("div",{className:"lg:ml-12",children:n})]})};function Wu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(r),!0).forEach((function(t){Ku(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ku(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ju="settings.custom_domain",$u=function(){var e=Ru(),t=e.handleSubmit,r=e.isLoading,n=e.isSaving,i=e.hasCAAError,o=Qu(Qu({},In()),{},{validate:function(e){if(!Eu.isValid(e))return(0,a.t)([Ju,"custom_domain.name_invalid"])}});return r?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)(un,{subtitle:(0,a.t)([Ju,"to_use_a_custom_domain"]),children:(0,c.jsxs)(ce.l,{onSubmit:function(e){return t(e)},mode:"all",children:[(0,c.jsxs)("div",{className:J()("flex flex-col gap-6","form-section"),children:[(0,c.jsx)(Gu,{number:1,title:(0,a.t)([Ju,"enter_you_custom_domain"]),children:(0,c.jsx)(yn,{name:"custom_domain",translationRoot:Ju,hideLabel:!0,hideDescription:!0,placeholder:(0,a.t)([Ju,"custom_domain.name_placeholder"]),className:"!pt-2",rules:o,children:(0,c.jsx)(ce.l.Input,{})})}),(0,c.jsxs)(Gu,{number:2,title:(0,a.t)([Ju,"set_up_a_cname"]),children:[(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)(y.Z.BodySm,{color:"text-default",children:(0,a.t)([Ju,"to_configure_your_custom_domain"])})}),(0,c.jsx)(qu,{})]}),i&&(0,c.jsxs)(Gu,{number:3,title:(0,a.t)([Ju,"add_caa_record"]),children:[(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)(y.Z.BodySm,{color:"text-default",children:(0,a.t)([Ju,"you_have_a_dns_caa_record_setup"])})}),(0,c.jsx)(Uu,{type:(0,a.t)([Ju,"table.caa"]),host:(0,a.t)([Ju,"table.caa_entry"]),target:'0 issue "pki.goog"'})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-1 lg:ml-12",children:[(0,c.jsx)("a",{target:"_blank",href:"https://help.circle.so/c/custom-domains/how-do-i-set-up-a-custom-subdomain",rel:"noreferrer",children:(0,a.t)([Ju,"check_our_guide"])}),(0,c.jsx)("a",{target:"_blank",href:"https://mxtoolbox.com/CNAMELookup.aspx",rel:"noreferrer",children:(0,a.t)([Ju,"use_this_tool_to_validate"])})]}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:n,large:!0,children:n?(0,a.t)("saving"):(0,a.t)([Ju,"setup_domain"])})})]})})},Yu="settings.custom_domain",Xu=function(e){var t=e.isOpen,r=e.onConfirm,n=e.onClose;return(0,c.jsx)(Gr.cV,{isOpen:t,onConfirm:r,onClose:n,title:(0,a.t)([Yu,"confirm_remove_domain"]),confirmVariant:"danger",confirmText:(0,a.t)([Yu,"remove"])})};function ed(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return td(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return td(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rd="settings.custom_domain",nd=function(){var e=ed((0,n.useState)(!1),2),t=e[0],r=e[1],i=(0,v.wh)().currentCommunity,o=Ru(),s=o.customDomain,u=o.onRemove,d=o.isRemoving,f=null!==s&&void 0!==s?s:{},m=f.circle_domain,p=f.custom_domain,h=f.status,b=(null!==i&&void 0!==i?i:{}).policies,y=(null!==b&&void 0!==b?b:{}).custom_login_enabled,g=h===yd.Pending||h===yd.GeneratingCertificate,x=h===yd.Approved,_="".concat((0,a.t)([rd,"redirecting_to"])," ").concat(String(p)),j=g?(0,c.jsx)(tn.Z,{html:(0,a.t)([rd,"your_custom_domain_is_pending"])}):(0,c.jsx)(tn.Z,{html:(0,a.t)([rd,"your_custom_domain_is_active"])});return g||x?(0,c.jsxs)(un,{subtitle:j,children:[(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(l.ZT.LabelXxs,{weight:"semibold",color:"text-default",children:(0,a.t)([rd,"custom_domain.name"])}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(l.ZT.BodyMd,{weight:"semibold",children:p}),(0,c.jsx)("span",{className:J()("text-xxs rounded-full px-2 py-1 font-semibold uppercase text-white",{"bg-v2-warning":g,"bg-v2-success":!g}),children:g?(0,a.t)([rd,"pending"]):(0,a.t)([rd,"active"])})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(l.ZT.LabelXxs,{weight:"semibold",color:"text-default",children:(0,a.t)([rd,"circle_domain"])}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(l.ZT.BodyMd,{weight:"semibold",children:m}),(0,c.jsx)("span",{className:"bg-tertiary text-xxs rounded-full px-2 py-1 font-semibold uppercase",children:_})]})]}),y&&(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(Vc.b,{showIcon:!1,type:"warning",description:(0,a.t)([rd,"remember_to_update_sso_callback"])})}),(0,c.jsx)("div",{className:"mt-5",children:(0,c.jsx)(l.zx,{type:"button",variant:"danger",onClick:function(){return r(!0)},disabled:d,children:d?(0,a.t)([rd,"removing"]):(0,a.t)([rd,"remove_custom_domain"])})})]}),(0,c.jsx)(Xu,{isOpen:t,onClose:function(){return r(!1)},onConfirm:)]}):null};function id(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var od,ad,sd,ld,cd,ud,dd,fd,md,pd,hd,bd,yd={SetupDomain:"setup",Pending:"pending",GeneratingCertificate:"generating_certificate",Approved:"approved"},vd=function(){var e,t,r=Ru().customDomain,n=(null!==r&&void 0!==r?r:{}).status,i=void 0===n?yd.SetupDomain:n,o=null!==(t=(id(e={},yd.SetupDomain,$u),id(e,yd.Pending,nd),id(e,yd.GeneratingCertificate,nd),id(e,yd.Approved,nd),e)[i])&&void 0!==t?t:$u;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)(["settings.custom_domain","title"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(o,{})})})]})},gd=r(5295),xd=r(30176),_d=r(55825),jd=r(17220);function wd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Od="logo",Pd="icon",Sd="dark_logo",kd="dark_icon",Cd=Od,Nd=Pd,Td=Sd,Ad=kd,Ed="brand_color",Id="brand_text_color",Dd="default_appearance",Ld="current_theme",Md="sidebar_background_color",Rd="header_background_color",Fd="header_text_color",Bd="sidebar_text_color",Ud="active_item_color",zd="active_item_text_color",Vd="sidebar_hover_color",Zd="online_indicator_color",Hd="mention_badge_color",qd="is_custom",Gd=Dd,Wd=Ed,Qd=Id,Kd=Ld,Jd=Md,$d=Bd,Yd=Ud,Xd=zd,ef=Vd,tf=Zd,rf=Hd,nf=qd,of=Rd,af=Fd,sf=[Md,Rd,Bd,Ud,zd,Vd,Zd,Hd,Fd],lf=(wd(bd={},Dd,"light"),wd(bd,Ed,(wd(od={},jd.O.LIGHT,"#506CF0"),wd(od,jd.O.DARK,"#506CF0"),od)),wd(bd,Id,(wd(ad={},jd.O.LIGHT,"#ffffff"),wd(ad,jd.O.DARK,"#ffffff"),ad)),wd(bd,Ld,"default"),wd(bd,Md,(wd(sd={},jd.O.LIGHT,"#2B2E33"),wd(sd,jd.O.DARK,"#2B2E33"),sd)),wd(bd,Rd,(wd(ld={},jd.O.LIGHT,"#2B2E33"),wd(ld,jd.O.DARK,"#2B2E33"),ld)),wd(bd,Bd,(wd(cd={},jd.O.LIGHT,"#545861"),wd(cd,jd.O.DARK,"#545861"),cd)),wd(bd,Fd,(wd(ud={},jd.O.LIGHT,"#545861"),wd(ud,jd.O.DARK,"#545861"),ud)),wd(bd,Ud,(wd(dd={},jd.O.LIGHT,"#42464D"),wd(dd,jd.O.DARK,"#42464D"),dd)),wd(bd,zd,(wd(fd={},jd.O.LIGHT,"#FFFFFF"),wd(fd,jd.O.DARK,"#FFFFFF"),fd)),wd(bd,Vd,(wd(md={},jd.O.LIGHT,"#717680"),wd(md,jd.O.DARK,"#717680"),md)),wd(bd,Zd,(wd(pd={},jd.O.LIGHT,"#22BB22"),wd(pd,jd.O.DARK,"#22BB22"),pd)),wd(bd,Hd,(wd(hd={},jd.O.LIGHT,"#E02F2F"),wd(hd,jd.O.DARK,"#E02F2F"),hd)),wd(bd,Od,null),wd(bd,Pd,null),wd(bd,Sd,null),wd(bd,kd,null),wd(bd,qd,!1),bd),cf=r(52530),uf=r(83660),df=r(37345),ff=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(",");return t.length===e&&t.every(df.K)};function mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hf=function(){var e=(0,pr.Gc)(),t=e.watch,r=e.setValue,i=(0,uf.PN)(),o=t(Ld),a=t(Dd),s=t(qd),l="".concat(Ed,".").concat(a),c="".concat(Id,".").concat(a),u=mf((0,n.useState)(s),2),d=u[0],f=u[1],m=(0,pr.Gc)().formState.touchedFields,p=(0,n.useCallback)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=lr.v[e]||lr.v.default;return sf.map((function(e){var r=lr.o8[e];return{name:e,color:{light:t.light[r],dark:t.dark[r]}}}))}(o);e.forEach((function(e){var t=e.name,n=e.color,i=n.light,o=n.dark;r("".concat(t,".light"),i),r("".concat(t,".dark"),o)}))}),[r,o]),h=(0,n.useCallback)((,[r,p]);return(0,n.useEffect)((function(){var e="custom"===o;r(qd,e),f(e)}),[r,o,a]),(0,n.useEffect)((function(){if("custom"!==o&&m[Ld]){var e,t,n,i,a=(e=o,i=lr.v[e]||lr.v.default,{light:null!==(t=i.light["--brand"])&&void 0!==t?t:"#000000",dark:null!==(n=i.dark["--brand"])&&void 0!==n?n:"#000000"}),s=a.light,l=a.dark,c=function(e){var t,r,n=lr.v[e]||lr.v.default;return{light:null!==(t=n.light["--brand-button-text"])&&void 0!==t?t:"#ffffff",dark:null!==(r=n.dark["--brand-button-text"])&&void 0!==r?r:"#ffffff"}}(o),u=c.light,d=c.dark;r("".concat(Ed,".light"),s),r("".concat(Ed,".dark"),l),r("".concat(Id,".light"),u),r("".concat(Id,".dark"),d)}}),[r,o]),{appearance:a,brandColorName:l,brandTextColorName:c,hasCustomizeCommunity:i,isCustom:s,isColorsPanelOpen:d,onClickOpenColorsPanel:h}},bf=function(e){var t=e.children;return(0,c.jsx)("div",{className:"flex flex-col gap-2",children:t})},yf=Gd,vf="customize_theme",gf="current_default_appearance",xf=function(){var e=(0,pr.Gc)().setValue,t=hf().appearance,r="".concat(gf,".").concat(t);return(0,c.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,c.jsxs)(bf,{children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([vf,"theme_tab.appearance"])}),(0,c.jsx)(cf.v,{name:yf})]}),(0,c.jsx)(l.l0.Item,{id:(0,fn.uniqueId)(),name:r,translationRoot:vf,inlineReverse:!0,hideDescription:!0,hideBorder:!0,className:"!py-0",labelClassName:"!text-xs !font-normal",label:(0,a.t)([vf,"theme_tab.set_light_mode_as_default_appearance"],{appearance:t}),children:(0,c.jsx)(l.l0.ToggleSwitch,{name:r,variant:"small",onToggleChange:function(r){e("".concat(gf,".").concat(t===lr.OR.LIGHT?lr.OR.DARK:lr.OR.LIGHT),!r)}})},r),(0,c.jsx)("hr",{className:"border-primary border-t"}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-default",as:"p",children:(0,a.t)([vf,"theme_tab.the_following_styles_will_be_applied"],{appearance:t})})]})},_f=r(25153),jf=Cd,wf=Nd,Of=Td,Pf=Ad,Sf=function(){var e=hf().appearance,t=(0,_d.eW)().setIsSaveButtonDisabled;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:J()("flex flex-col gap-6",{hidden:e===jd.O.DARK}),children:[(0,c.jsx)(_f.Y,{isCropEnabled:!1,label:(0,a.t)("customize_theme.logo_tab.community_logo"),tooltip:(0,a.t)("customize_theme.logo_tab.community_logo_tooltip"),title:(0,a.t)("customize_theme.logo_tab.upload_community_logo"),name:jf,aspectRatio:4,onProcessing:function(e){return t(!!e)}}),(0,c.jsx)(_f.Y,{label:(0,a.t)("customize_theme.logo_tab.community_icon"),title:(0,a.t)("customize_theme.logo_tab.upload_community_icon"),tooltip:(0,a.t)("customize_theme.logo_tab.community_icon_tooltip"),name:wf,aspectRatio:1,onProcessing:function(e){return t(!!e)}})]}),(0,c.jsxs)("div",{className:J()("flex flex-col gap-6",{hidden:e===jd.O.LIGHT}),children:[(0,c.jsx)(_f.Y,{isCropEnabled:!1,label:(0,a.t)("customize_theme.logo_tab.community_logo"),title:(0,a.t)("customize_theme.logo_tab.upload_community_logo"),tooltip:(0,a.t)("customize_theme.logo_tab.community_logo_tooltip"),name:Of,aspectRatio:4,onProcessing:function(e){return t(!!e)}}),(0,c.jsx)(_f.Y,{label:(0,a.t)("customize_theme.logo_tab.community_icon"),title:(0,a.t)("customize_theme.logo_tab.upload_community_icon"),tooltip:(0,a.t)("customize_theme.logo_tab.community_icon_tooltip"),name:Pf,aspectRatio:1,onProcessing:)]})]})},kf=r(22988),Cf=r(14578);function Nf(e){return function(e){if(Array.isArray(e))return Tf(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Tf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tf(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Af=of,Ef=af,If=Jd,Df=$d,Lf=Yd,Mf=Xd,Rf=ef,Ff=tf,Bf=rf,Uf=r(92445),zf=r(61729),Vf=["onSuccess","onError"];function Zf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qf(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gf(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Wf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Gf(o,n,i,a,s,"next",e)}function s(e){Gf(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Qf=function(e){var t,r,n=e.onSuccess,i=e.onError,o=qf(e,Vf),s=(0,oe.p)(),l=function(){var e=(0,Uf.w)().data,t=void 0===e?{}:e,r=(0,Uf.K)().mutateAsync,n=(0,zf.d)().mutateAsync,i=function(){var e=Wf(se().mark((function e(i){var o,a,s,l,c,u,d,f,m,p,h,b,y,v,g,x,_;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.brand_color,a=i.brand_text_color,s=i.current_theme,l=i.dark_icon,c=i.dark_logo,u=i.current_default_appearance,d=i.icon,f=i.is_custom,m=i.logo,p={community:{logo:m,icon:d,dark_logo:c,dark_icon:l,prefs:{brand_color:o,brand_text_color:a}}},b=(h=[Ud,zd,Hd,Zd,Md,Rd,Fd,Vd,Bd]).reduce((function(e,t){var r;return e[t]=null===(r=i[t])||void 0===r?void 0:r.light,e}),{}),y=h.reduce((function(e,t){var r;return e[t]=null===(r=i[t])||void 0===r?void 0:r.dark,e}),{}),v=u[lr.OR.LIGHT]?lr.OR.LIGHT:lr.OR.DARK,g={theme_settings:{default_appearance:v,current_theme:s,is_custom:f,custom_colors:{light:b,dark:y}}},x=n(p),_=r({data:t,updates:g}),e.abrupt("return",Promise.all([x,_]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{updateCustomizationAsync:i}}(),c=l.updateCustomizationAsync;return(0,f.useMutation)(c,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zf(Object(r),!0).forEach((function(t){Hf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSuccess:(r=Wf(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,fn.isFunction)(n),!e.t0){e.next=4;break}return e.next=4,n();case 4:s.success((0,a.t)("customize_theme.save_success"));case 5:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),onError:(t=Wf(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,fn.isFunction)(i),!e.t0){e.next=4;break}return e.next=4,i();case 4:console.error("Error updating community",t),s.error((0,a.t)("customize_theme.save_error"));case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},o))};function Kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $f=of,Yf=Jd,Xf=$d,em=Yd,tm=Xd,rm=ef,nm=tf,im=rf,om=af,am=Gd,sm=Ad,lm=Td,cm=Nd,um=Cd;function dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(r),!0).forEach((function(t){mm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bm=Gd,ym=Wd,vm=Qd,gm=Kd,xm=of,_m=af,jm=Jd,wm=$d,Om=Yd,Pm=Xd,Sm=ef,km=tf,Cm=rf,Nm=nf,Tm={active_item_color:"",active_item_text_color:"",header_background_color:"",header_text_color:"",mention_badge_color:"",online_indicator_color:"",sidebar_background_color:"",sidebar_hover_color:"",sidebar_text_color:""};function Am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Em(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(r),!0).forEach((function(t){Im(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Am(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Im(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dm=Wd,Lm=Gd,Mm=function(e){var t=e.previewValues,r=(0,pr.Gc)().watch,n=(0,_d.eW)().screenSize,i=function(){var e=(0,pr.Gc)(),t=e.watch,r=e.getValues,n=pm(t([bm,gm,Nm,ym,vm]),5),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=[Om,Pm,Cm,km,jm,xm,_m,Sm,wm];return{default_appearance:i,current_theme:o,is_custom:a,brand_color:s,brand_text_color:l,custom_colors:{light:c.reduce((function(e,t){var n=r(t);return e[t]=null===n||void 0===n?void 0:n.light,e}),fm({},Tm)),dark:c.reduce((function(e,t){var n=r(t);return e[t]=null===n||void 0===n?void 0:n.dark,e}),fm({},Tm))}}}(),o=function(){var e=(0,pr.Gc)().watch,t=e(am),r=e(um),n=e(lm),i=e(cm),o=e(sm),a=r&&(0,S.C9)({signed_id:r}),s=n&&(0,S.C9)({signed_id:n}),l=i&&(0,S.C9)({signed_id:i}),c=o&&(0,S.C9)({signed_id:o}),u=null,d="icon";return s&&"dark"===t?(u=s,d="logo"):c&&"dark"===t?(u=c,d="icon"):a?(u=a,d="logo"):l&&(u=l,d="icon"),{communityLogoUrl:u,communityLogoType:d}}(),a=o.communityLogoType,s=o.communityLogoUrl,l=r(Dm),u=r(Lm);return(0,c.jsx)("div",{className:J()("flex h-full w-full items-center justify-center",{"min-w-[1100px]":"desktop"===n}),children:(0,c.jsx)(kf.C,Em(Em({},t),{},{theme:i,screenSize:n,brandColor:l[u],sidebarLogoType:a,sidebarLogoUrl:s,communityLogoUrl:s,switcherIconUrl:s}))})},Rm=["name","label","disabled","tooltipText","className"];function Fm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(r),!0).forEach((function(t){Um(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Um(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zm(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Vm=function(e){var t=e.name,r=e.label,n=void 0===r?"":r,i=e.disabled,o=void 0!==i&&i,a=e.tooltipText,s=void 0===a?"":a,l=e.className,u=void 0===l?"":l,d=zm(e,Rm);return(0,c.jsx)(ce.l.Item,Bm(Bm({name:t,label:n,placeholder:"#000000",tooltipText:s,className:u,hideBorder:!0,hideDescription:!0},d),{},{children:(0,c.jsx)(ce.l.ColorPicker,{name:t,disabled:o})}))},Zm=r(80843);function Hm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gm=function(){var e,t,r,i,o,s,l,u,d,f,m,p=(e=(0,pr.Gc)().watch,t=e(Af),r=e(Ef),i=e(If),o=e(Df),s=e(Lf),l=e(Mf),u=e(Rf),d=e(Ff),f=e(Bf),m=(0,Fo.a)().is_v2_1_header_enabled,[].concat(Nf(m?[t,r]:[]),[i,o,s,l,u,d,f]).map(().join(",")),h=function(){var e=(0,pr.Gc)().setValue;return function(t){var r=Kf(t.split(","),18),n=r[0],i=void 0===n?"":n,o=r[1],a=void 0===o?"":o,s=r[2],l=void 0===s?"":s,c=r[3],u=void 0===c?"":c,d=r[4],f=void 0===d?"":d,m=r[5],p=void 0===m?"":m,h=r[6],b=void 0===h?"":h,y=r[7],v=void 0===y?"":y,g=r[8],x=void 0===g?"":g,_=r[9],j=void 0===_?"":_,w=r[10],O=void 0===w?"":w,P=r[11],S=void 0===P?"":P,k=r[12],C=void 0===k?"":k,N=r[13],T=void 0===N?"":N,A=r[14],E=void 0===A?"":A,I=r[15],D=void 0===I?"":I,L=r[16],M=void 0===L?"":L,R=r[17],F=void 0===R?"":R;e($f,{light:i,dark:a},{shouldDirty:!0}),e(om,{light:l,dark:u},{shouldDirty:!0}),e(Yf,{light:f,dark:p},{shouldDirty:!0}),e(Xf,{light:b,dark:v},{shouldDirty:!0}),e(em,{light:x,dark:j},{shouldDirty:!0}),e(tm,{light:O,dark:S},{shouldDirty:!0}),e(rm,{light:C,dark:T},{shouldDirty:!0}),e(nm,{light:E,dark:D},{shouldDirty:!0}),e(im,{light:M,dark:F},{shouldDirty:!0})}}(),b=Hm((0,n.useState)(p),2),y=b[0],v=b[1],g=2*sf.length;return(0,n.useEffect)((function(){v(p)}),[p]),(0,c.jsx)(ce.l.Item,{name:"",hideBorder:!0,hideDescription:!0,label:(0,a.t)("customize_theme.theme_tab.copy_colors"),tooltipText:(0,a.t)("customize_theme.theme_tab.copy_colors_tooltip"),className:"!py-0",children:(0,c.jsx)(Zm.k,{name:"",value:y,onChange:function(e){var t=e.target.value;v(t),ff(g,t)&&h(t)},onBlur:function(){ff(g,y)?h(y):v(p)},className:J()("form-control","uppercase")})})},Wm=function(e){var t=e.theme,r=void 0===t?"default":t,i=e.appearance,o=void 0===i?"light":i,s=(0,n.useMemo)((function(){return function(e,t){var r=lr.v[e][t];return[r["--color-community-sidebar-text"],r["--color-community-sidebar-active-background"],r["--color-community-sidebar-background"]]}(r,o)}),[r,o]);return(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"flex items-center",children:s.map((function(e){return(0,c.jsx)("span",{style:{backgroundColor:e},className:"border-primary -ml-0.5 inline-block h-3 w-3 rounded-full border first:ml-0"},e)}))}),(0,c.jsx)("span",{children:(0,a.t)("customize_theme.theme_names.".concat(r))})]})};function Qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Km(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(r),!0).forEach((function(t){Jm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $m=Kd,Ym=function(e){var t=(0,uf.PN)(),r=(0,pr.Gc)().watch,n=hf(),i=n.isColorsPanelOpen,o=n.onClickOpenColorsPanel,s=r(Dd),l=lr.Kt.map((function(e){return{value:e,label:(0,c.jsx)(Wm,{theme:e,appearance:s},"".concat(e,".").concat(s))}}));return t&&l.push({label:(0,c.jsx)(c.Fragment,{children:(0,a.t)("customize_theme.theme_names.custom")}),value:"custom"}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(ce.l.Item,Km(Km({},e),{},{hideBorder:!0,hideDescription:!0,label:(0,a.t)("customize_theme.theme_tab.theme"),className:"!py-0",name:$m,children:(0,c.jsx)(ce.l.AnimatedSelect,{name:$m,options:l,fullWidth:!0,rules:{}})})),!i&&(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"button",onClick:o,className:"text-circle text-sm font-medium","data-testid":"customize-ui-open-colors-panel",children:(0,a.t)("customize_theme.theme_tab.create_a_custom_theme")})})]})},Xm=r(95623),ep=Jd,tp=of,rp=$d,np=Yd,ip=Xd,op=ef,ap=tf,sp=rf,lp=af,cp=function(){var e=hf(),t=e.appearance,r=e.hasCustomizeCommunity,n=e.isColorsPanelOpen,i=(0,Fo.a)().is_v2_1_header_enabled;return r?n?(0,c.jsxs)("div",{className:"flex flex-col gap-6","data-testid":"customize-ui-theme-colors",children:[i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Vm,{name:"".concat(tp,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.header_background"),className:"!py-0"},"".concat(tp,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(lp,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.header_text_color"),className:"!py-0"})]}),(0,c.jsx)(Vm,{name:"".concat(ep,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.sidebar_background"),className:"!py-0"},"".concat(ep,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(rp,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.sidebar_text_color"),className:"!py-0"},"".concat(rp,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(np,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.active_item"),className:"!py-0"},"".concat(np,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(ip,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.active_item_text"),className:"!py-0"},"".concat(ip,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(op,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.hover_item"),className:"!py-0"},"".concat(op,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(ap,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.online_indicator"),className:"!py-0"},"".concat(ap,".").concat(t)),(0,c.jsx)(Vm,{name:"".concat(sp,".").concat(t),label:(0,a.t)("customize_theme.theme_tab.mention_badge"),className:"!py-0"},"".concat(sp,".").concat(t)),(0,c.jsx)(Gm,{})]}):null:(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)(Xm.r,{href:"/settings/plans",children:(0,a.t)("customize_theme.theme_tab.upgrade_your_plan")})})},up=function(){var e=hf(),t=e.brandColorName,r=e.brandTextColorName;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ym,{}),(0,c.jsx)(bf,{children:(0,c.jsx)(Vm,{name:t,label:(0,a.t)("customize_theme.theme_tab.brand_color"),tooltipText:(0,a.t)("customize_theme.theme_tab.brand_color_tooltip"),className:"!py-0"},t)}),(0,c.jsx)(bf,{children:(0,c.jsx)(Vm,{name:r,label:(0,a.t)("customize_theme.theme_tab.brand_text_color"),tooltipText:(0,a.t)("customize_theme.theme_tab.brand_text_color_tooltip"),className:"!py-0"},r)}),(0,c.jsx)(cp,{})]})};function dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(r),!0).forEach((function(t){mp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pp="customize-community-form",hp=function(e){var t=e.onExit,r=e.onSave,n=e.isSaving,i=void 0!==n&&n,o=e.defaultFormValues,s=void 0===o?lf:o,l=e.previewValues;return(0,c.jsx)(ce.l,{id:pp,className:"h-full w-full",formClassName:"w-full h-full",defaultValues:fp(fp({},s),{},{current_default_appearance:mp({},s.default_appearance,!0)}),onSubmit:function(e){r(e)},children:(0,c.jsxs)(_d.MW,{title:(0,a.t)("customize_theme.title"),onExit:t,formId:pp,isSaving:i,children:[(0,c.jsxs)(_d.Ar,{className:"hidden lg:grid",children:[(0,c.jsx)(_d.Ar.Header,{children:(0,c.jsx)(_d.yR,{})}),(0,c.jsx)(_d.Ar.Main,{children:(0,c.jsx)(Mm,{previewValues:l})}),(0,c.jsxs)(_d.Ar.Sidebar,{className:"flex flex-col gap-6 p-6",children:[(0,c.jsx)(xf,{}),(0,c.jsx)(Sf,{}),(0,c.jsx)(up,{})]})]}),(0,c.jsxs)("div",{className:"flex h-full flex-col lg:hidden",children:[(0,c.jsx)(_d.Ar.Header,{className:"!h-auto",children:(0,c.jsx)(_d.yR,{shouldShowActions:!1})}),(0,c.jsx)(xd.R,{className:"lg:hidden",title:(0,a.t)("customize_theme.mobile_unsupported.title"),description:(0,a.t)("customize_theme.mobile_unsupported.description")})]})]})})};function bp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yp=Gd,vp=Wd,gp=Qd,xp=Kd,_p=Jd,jp=$d,wp=Yd,Op=Xd,Pp=ef,Sp=tf,kp=rf,Cp=nf,Np=of,Tp=af,Ap=Cd,Ep=Nd,Ip=Td,Dp=Ad,Lp="#".concat("customize-community-modal"),Mp=function(){var e,t,r,n,i,o,s,l,u,d,f,m,p,h,b,y,g,x,_,j,w,O,P,S,k,C,N,T,A,E,I,D,L,M,R,F,U,z,V,Z,H,q,G,W,Q,K,J,$,Y,X,ee,te,re,ne,oe=(t=(0,v.wh)(),r=t.currentCommunity,n=void 0===r?{}:r,i=t.currentCommunityMember,o=void 0===i?{}:i,s=t.currentCommunitySettings,l=void 0===s?{}:s,u=t.isLoading,d=t.refetch,f=(0,Cf.U)(),m=f.isLoadingCommunities,p=f.refetchCommunities,h=(0,B._v)(n),b=h.url,y=void 0===b?"":b,g=h.type,x=void 0===g?"icon":g,_=o.headline,j=void 0===_?"":_,w=o.name,O=void 0===w?"":w,P=o.avatar_url,S=void 0===P?"":P,k=n.prefs,C=void 0===k?{}:k,N=n.logo_url,T=void 0===N?"":N,A=n.name,E=void 0===A?"":A,I=n.dark_icon,D=void 0===I?null:I,L=n.dark_logo,M=void 0===L?null:L,R=n.icon,F=void 0===R?null:R,U=n.logo,z=void 0===U?null:U,V=n.icon_url,Z=void 0===V?"":V,H=C.brand_color,q=void 0===H?lf.brand_color:H,G=C.brand_text_color,W=void 0===G?lf.brand_text_color:G,Q=l.theme_settings,J=(K=void 0===Q?{}:Q).custom_colors,$=void 0===J?{active_item_color:lf.active_item_color,mention_badge_color:lf.mention_badge_color,sidebar_background_color:lf.sidebar_background_color,sidebar_hover_color:lf.sidebar_hover_color,sidebar_text_color:lf.sidebar_text_color,active_item_text_color:lf.active_item_text_color,online_indicator_color:lf.online_indicator_color,header_background_color:lf.header_background_color,header_text_color:lf.header_text_color}:J,Y=K.default_appearance,X=void 0===Y?lf.default_appearance:Y,ee=K.current_theme,te=void 0===ee?lf.current_theme:ee,re=K.is_custom,ne=void 0===re?lf.is_custom:re,{data:{brandColor:q,brandTextColor:W,communityLogoUrl:T,communityName:E,currentTheme:te,darkIcon:D,darkLogo:M,defaultAppearance:X,headerSpaceEmoji:"\ud83d\ude80",headerSpaceTitle:(0,a.t)("space"),headline:j,icon:F,isCustom:ne,logo:z,name:O,sidebarLogoType:x,sidebarLogoUrl:y,switcherIconUrl:Z,userImageUrl:S,custom_colors:$},isLoading:u||m,refetch:function(){d(),p()}}),ae=oe.data,se=oe.isLoading,le=Qf({onSuccess:oe.refetch,onError:fn.noop}),ce=le.mutate,ue=le.isLoading;if(se)return(0,c.jsx)(gd.a,{center:!0});var de=function(e){var t,r,n,i;return{light:(null===ae||void 0===ae||null===(t=ae.custom_colors)||void 0===t||null===(r=t.light)||void 0===r?void 0:r[e])||lr.v.default.light[lr.o8[e]]||"",dark:(null===ae||void 0===ae||null===(n=ae.custom_colors)||void 0===n||null===(i=n.dark)||void 0===i?void 0:i[e])||lr.v.default.dark[lr.o8[e]]||""}},fe=(bp(e={},yp,ae.defaultAppearance),bp(e,vp,ae.brandColor),bp(e,gp,ae.brandTextColor),bp(e,xp,ae.currentTheme),bp(e,_p,de(_p)),bp(e,Np,de(Np)),bp(e,Tp,de(Tp)),bp(e,jp,de(jp)),bp(e,wp,de(wp)),bp(e,Op,de(Op)),bp(e,Pp,de(Pp)),bp(e,Sp,de(Sp)),bp(e,kp,de(kp)),bp(e,Ap,ae.logo),bp(e,Ep,ae.icon),bp(e,Ip,ae.darkLogo),bp(e,Dp,ae.darkIcon),bp(e,Cp,ae.isCustom),e);return(0,c.jsx)(lr.JX,{selector:Lp,children:(0,c.jsx)(ie.u_,{isOpen:!0,id:"modalId",children:(0,c.jsx)(ie.u_.Content,{size:"screen",children:(0,c.jsx)(hp,{onExit:function(){window.location.href="/"},onSave:ce,isSaving:ue,defaultFormValues:fe,previewValues:ae})})})})};const Rp=function(e){var t=e.title,r=(0,rl.t)().error,i=(0,l.pm)().error,o=(0,dr.TH)().pathname,s=(0,dr.k6)(),u=(0,dr.UO)(),d=u.action,f=u.component,m=(0,a.t)("settings.".concat(f,".title")),p=t||m||(0,a.t)("settings_title");return(0,n.useEffect)((,[r]),(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:p}),(0,c.jsx)("div",{className:"my-4 lg:my-12",children:(0,c.jsx)(on,{},"".concat(d,"-").concat(f))})]})};var Fp=function(e){var t=e.name,r=e.rows,n=void 0===r?12:r;return(0,c.jsx)(l.l0.TextArea,{name:t,rows:n,className:"!bg-selector-active break-all !text-xs",readOnly:!0,onFocus:function(e){return e.target.select()}})};function Bp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Up(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Up(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zp="settings.embed",Vp=function(e){var t,r,n,i,o=null!==e&&void 0!==e?e:{},a=o.full_url,s=o.public_uid,l=o.prefs,c=null!==(t=null===l||void 0===l||null===(r=l.brand_color)||void 0===r?void 0:r.dark)&&void 0!==t?t:"#506CF0",u=null!==(n=null===l||void 0===l||null===(i=l.brand_color)||void 0===i?void 0:i.light)&&void 0!==n?n:"#506CF0";return a&&s?"<script>\n  (function (w,d,s,o,f,js,fjs) {\n      w['circleWidget']=o;w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };\n      js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];\n      js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);\n  }(window, document, 'script', 'mw', '".concat(a,"external/widget.js'));\n\n  mw('init', {\n    community_public_uid: '").concat(s,'\',\n    brand_color: \'{"dark"=>"').concat(c,'", "light"=>"').concat(u,"\"}'\n  });\n\n  // Optional: pass in a default space slug and/or post slug\n  // mw('setDefaults', {\n  //   space_slug: '',\n  //   post_slug: ''\n  // });\n<\/script>"):""},Zp=function(e){var t=(null!==e&&void 0!==e?e:{}).full_url;return t?'<script>const metaTag=document.createElement("meta");metaTag.name="viewport",metaTag.content="width=device-width, initial-scale=1",document.getElementsByTagName("head")[0].appendChild(metaTag),window.addEventListener("message",function(e){const t=document.getElementById("iframe"),n=e.data[1];t.style.height=n+"px"},!1),document.write(\'<iframe id="iframe" style="max-width:800px;border:0;box-shadow:none;outline:0;" src="'.concat(t,'c/[SPACE_SLUG_GOES_HERE]/[POST_SLUG_GOES_HERE]?iframe=true&?post=true" scrolling="no" width="100%"></iframe>\');<\/script>'):""},Hp=function(e){var t=(null!==e&&void 0!==e?e:{}).full_url;return t?'<iframe style="border: 0; box-shadow: none; width: 800px; height: 80vh;" src="'.concat(t,'c/[SPACE_SLUG_GOES_HERE]?iframe=true"></iframe>'):""},qp=function(){var e=(0,v.wh)(),t=e.currentCommunity,r=e.isLoading,i=Bp((0,n.useState)(),2),o=i[0],s=i[1];return(0,n.useEffect)((function(){t&&!r&&s({community_widget:Vp(t),post_widget:Zp(t),space_widget:Hp(t)})}),[t,r]),r||!o?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([zp,"title"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([zp,"subtitle"]),children:(0,c.jsxs)(l.l0,{defaultValues:o,onSubmit:fn.noop,children:[(0,c.jsx)(yn,{translationRoot:zp,name:"community_widget",description:(0,c.jsx)(tn.Z,{html:(0,a.t)([zp,"community_widget_description"])}),children:(0,c.jsx)(Fp,{name:"community_widget",rows:18})}),(0,c.jsx)(yn,{translationRoot:zp,name:"post_widget",children:(0,c.jsx)(Fp,{name:"post_widget",rows:6})}),(0,c.jsx)(yn,{translationRoot:zp,name:"space_widget",children:(0,c.jsx)(Fp,{name:"space_widget",rows:2})})]})})})})]})},Gp=r(69853),Wp="settings.general.branding",Qp=function(){return(0,c.jsx)(pn.z,{title:(0,a.t)("section_branding"),noPadding:!0,defaultOpen:!0,children:(0,c.jsxs)("div",{className:"pb-4",children:[(0,c.jsx)(yn,{name:"prefs.brand_color.light",translationRoot:Wp,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ColorPicker,{name:"prefs.brand_color.light"})}),(0,c.jsx)(yn,{name:"prefs.brand_color.dark",translationRoot:Wp,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ColorPicker,{name:"prefs.brand_color.dark"})}),(0,c.jsx)(_f.Y,{name:"logo",isHorizontal:!0,className:"pb-2 pt-5",isCropEnabled:!1,label:(0,a.t)([Wp,"logo"]),title:(0,a.t)([Wp,"logo_title"]),description:(0,a.t)([Wp,"logo_description"]),aspectRatio:P.pI.COMMUNITY_LOGO}),(0,c.jsx)(_f.Y,{name:"icon",isHorizontal:!0,className:"pb-2 pt-5",isCropEnabled:!1,label:(0,a.t)([Wp,"icon"]),title:(0,a.t)([Wp,"icon_title"]),description:(0,a.t)([Wp,"icon_description"]),aspectRatio:P.pI.COMMUNITY_ICON}),(0,c.jsx)(_f.Y,{name:"default_og_image",isHorizontal:!0,className:"pb-2 pt-5",isCropEnabled:!1,label:(0,a.t)([Wp,"default_og_image"]),title:(0,a.t)([Wp,"default_og_image_title"]),description:(0,a.t)([Wp,"default_og_image_description"]),aspectRatio:P.pI.OPEN_GRAPH}),(0,c.jsx)(yn,{name:"reply_to_email",isHorizontal:!0,translationRoot:"".concat(Wp,".reply_to_email"),children:(0,c.jsx)(l.l0.Input,{})})]})})},Kp=r(87561),Jp=r(86281);function $p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$p(Object(r),!0).forEach((function(t){Xp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eh="settings.messages",th=Kp.Ry({sign_in_with_circle_link_label:Kp.Z_().when("allow_sign_in_using_circle",{is:!0,then:Kp.Z_().required((0,a.t)("settings.validation.this_field_is_required"))}),custom_sign_up_link_url:Kp.Z_().when("custom_sign_up",{is:!0,then:Kp.Z_().matches(Jp.Wh,(0,a.t)("settings.validation.invalid_url_format")).required((0,a.t)("settings.validation.this_field_is_required"))})}),rh=function(){var e={get:function(){return(0,Er.UT)(S.av.authProviders.index())},update:function(e){return(0,Er.gN)(S.av.authProviders.update(),{auth_provider:e})},getStrategies:function(){return(0,Er.UT)(S.av.authProviders.getStrategies())}},t=e.get,r=e.update,n=e.getStrategies,i=(0,l.pm)(),o=i.success,s=i.error,c=(0,f.useQueryClient)(),u=(0,f.useQuery)(["auth-provider"],t,{select:),d=u.data,m=u.isLoading,p=(0,f.useQuery)(["auth-providers-strategies"],n),h=p.data,b=void 0===h?[]:h,y=p.isLoading,v=(0,f.useMutation)({mutationFn:function(e){var t=Yp(Yp({},e),{},{auth_provider_strategy_id:e.strategy.id,status:e.status?"enabled":"disabled"});return r(t)},onSuccess:function(){c.invalidateQueries("auth-provider"),o((0,a.t)([eh,"success"]))},onError:function(){return s((0,a.t)([eh,"error"]))}}).mutate;return{strategies:b,isLoading:m||y,isSaving:!1,defaultValues:d,validationSchema:th,handleSubmit:v}},nh="settings.general.visibility",ih=function(){var e=In({isRequired:!1});return(0,c.jsxs)(An,{children:[(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)([nh,"private_signup_title"])}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([nh,"private_signup_description"])})]}),(0,c.jsx)(yn,{className:"!py-0",name:"private_signup_link_label",translationRoot:nh,hideLabel:!0,hidePlaceholder:!1,rules:e,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(yn,{className:"!py-0",name:"private_signup_link_url",translationRoot:nh,hideLabel:!0,hidePlaceholder:!1,rules:e,children:(0,c.jsx)(l.l0.Input,{})})]})};function oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ah(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(r),!0).forEach((function(t){sh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lh="settings.general.visibility",ch=function(){var e=(0,v.wh)().currentCommunity,t=void 0===e?{}:e,r=(0,pr.Gc)().getValues,i=(rh()||{}).defaultValues,o=r("is_private"),s=ah(ah({},In()),{},{validate:function(e){if(!e))return(0,a.t)([lh,"slug.invalid_format"])}}),u=t||{},d=u.custom_domain_status,f=u.custom_domain,m="approved"===d,p=m?f:(0,a.t)("circle_so"),h=(null!==i&&void 0!==i?i:{}).status,b=(0,c.jsx)(sn.OL,{to:S.lA.settings.custom_domain,children:(0,a.t)([lh,"slug.setup_custom_domain"])});return(0,c.jsx)(pn.z,{title:(0,a.t)("section_visibility"),noPadding:!0,defaultOpen:!0,children:(0,c.jsxs)("div",{className:"pb-4",children:[(0,c.jsx)(yn,{name:"slug",isHorizontal:!0,translationRoot:"".concat(lh,".slug"),description:b,rules:s,children:m?(0,c.jsx)(l.l0.Input,{disabled:!0,value:p}):(0,c.jsx)(l.l0.Input,{"data-testid":"community_slug",suffix:p})}),(0,c.jsx)(yn,{name:"is_private",isHorizontal:!0,translationRoot:lh,childrenWrapper:n.Fragment,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"is_private",variant:"small"})}),o&&(0,c.jsx)(ih,{}),!o&&!h&&(0,c.jsx)(yn,{name:"allow_signups_to_public_community",isHorizontal:!0,translationRoot:lh,childrenWrapper:n.Fragment,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"allow_signups_to_public_community",variant:"small"})})]})})},uh=function(){var e=Nn(),t=e.handleSubmit,r=e.defaultValues,n=e.isLoading,i=e.isSaving,o=(0,v.wh)().currentCommunity,s=void 0===o?{}:o,u=null===s||void 0===s?void 0:s.community_member_locale_setting_enabled,d=In();return n?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.general.title")}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)("settings.general.manage_general_settings"),children:(0,c.jsxs)(ce.l,{onSubmit:t,defaultValues:r,children:[(0,c.jsxs)("div",{className:J()("form-section","border-primary border-t"),children:[(0,c.jsx)(yn,{name:"name",translationRoot:"settings.general.name",isHorizontal:!0,rules:d,children:(0,c.jsx)(ce.l.Input,{autoFocus:!0,"data-testid":"community_name"})}),u&&(0,c.jsx)(yn,{name:"locale",translationRoot:"settings.general.locale",isHorizontal:!0,children:(0,c.jsx)(ce.l.SelectNative,{name:"locale",options:Gp.h})})]}),(0,c.jsx)(ch,{}),(0,c.jsx)(Qp,{}),(0,c.jsx)(Vn,{}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:i,large:!0,children:i?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})})})})]})},dh=r(56202),fh=r(74442),mh=r(50119),ph=r(53225),hh=r(25067),bh=r(70993);function yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yh(Object(r),!0).forEach((function(t){gh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xh=(0,n.forwardRef)((function(e,t){return(0,c.jsx)("div",{children:(0,c.jsx)(bh.y,vh(vh({},e),{},{ref:t}))})}));xh.displayName="RichTextInput";const _h=xh;var jh=r(85785),wh=r(55593),Oh=r(39816),Ph=r(42156);function Sh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ch="landing_page.settings.welcome_banner",Nh=function(e){var t=e.keyField,r=e.title,i=e.media,o=e.description,s=e.allowClose,l=e.enabled,u=e.onTitleChange,d=e.onBannerDescriptionChange,f=e.displayAllowClose,m=e.onAllowCloseChange,p=e.onRemoveMedia,h=e.onEnabledChange,b=e.setMediaSettings,y=(0,dh.o)().reSetWelcomeBannerPreference,v=Sh((0,n.useState)(!1),2),g=v[0],x=v[1],_=Sh((0,n.useState)({}),2),j=_[0],w=_[1],O=Sh((0,n.useState)(0),2),P=O[0],S=O[1],k=Sh((0,n.useState)(!1),2),C=k[0],N=k[1];(0,Oh.a)(g);var T=function(e){N(!0),S(e)},A=function(e,t,r,n){w({url:e,type:r}),N(!1);var i=n.split("community")[1].replace(/^\[(.+)\]$/,"$1");b(i,t)},E=function(){w({}),p()},I=function(){return(0,c.jsxs)("div",{className:"form-group full-width media-uploader",id:"field-".concat(t),children:[(0,c.jsx)(fh.Q,{field:t,label:(0,a.t)("".concat(Ch,".media")),description:(0,a.t)("".concat(Ch,".media_description"))}),(0,c.jsx)(wh.o,{id:t,name:t,media:i,previewMedia:j,onMediaUpload:function(e){return function(e,t){try{new Ph.Q(e.target.files[0],A,"media-uploader",t,T).start()}catch(r){console.error(r)}}(e,"community[".concat(t,"_media]"))},isLoading:C,progress:P,onRemoveMedia:E})]})},D=function(){x(!1)},L=function(){x(!0)},M=return(0,c.jsxs)("div",{className:"form-section__content",children:[(0,c.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-show-banner"),children:[(0,c.jsx)(fh.Q,{field:t,label:(0,a.t)("".concat(Ch,".header")),description:(0,a.t)("".concat(Ch,".header_description"))}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)("div",{className:"form-meta-button",children:(0,c.jsx)(hh.Z,{field:"field-".concat(t,"-enabled"),value:l,onToggleChange:h})})})]}),l&&(0,c.jsxs)("div",{className:"form-section__background",children:[I(),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)(fh.Q,{field:"".concat(t,"-title"),label:(0,a.t)("".concat(Ch,".title"))}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:r||"",onChange:u})})]}),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)(fh.Q,{field:"".concat(t,"-description"),label:(0,a.t)("".concat(Ch,".description"))}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)(_h,{id:"rich-text-description-".concat(t),placeholder:(0,a.t)("".concat(Ch,".write_a_description")),name:"rich-text-description-".concat(t),value:o||"",onChange:d,is_private_space:!1,preventAccidentalLeave:!1},"rich-text-description-".concat(t))})]}),f&&(0,c.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-allow-close"),children:[(0,c.jsxs)("div",{className:"form-meta",children:[(0,c.jsx)("label",{htmlFor:"".concat(t,"-allow-close"),children:(0,a.t)("".concat(Ch,".allow_close_title"))}),(0,c.jsxs)("div",{className:"field-description",children:[(0,a.t)("".concat(Ch,".allow_close_title_description")),"\xa0",(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{onClick:L,className:"homepage-reset-banner-link",children:(0,a.t)("".concat(Ch,".reset_preference_title"))}),Boolean(g)&&(0,c.jsx)(jh.c,{show:g,closeOnEscape:!0,closeOnOutsideClick:!0,onClose:D,onConfirmation:M,headerText:(0,a.t)("".concat(Ch,".reset_preference_title")),bodyText:(0,a.t)("".concat(Ch,".reset_preference_description")),className:"reset-banner-modal"})]})]})]}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)("div",{className:"form-meta-button",children:(0,c.jsx)(hh.Z,{field:"allow_close",value:s,onToggleChange:m})})})]})]})]})},Th=function(e){var t=e.fieldName,r=e.displayAllowClose,n=void 0===r||r,i=e.community,o=e.community_setting,a=e.setMediaSettings,s=e.onBannerDescriptionChange,l=e.onCommunitySettingChange,u=e.onRemoveMedia,d=o[t],f=d.enabled,m=d.title,p=d.allow_close;return(0,c.jsx)(Nh,{keyField:t,title:m,enabled:f||!1,description:i["".concat(t,"_description")],media:i["".concat(t,"_media")],setMediaSettings:a,onBannerDescriptionChange:function(e){return s(e,"".concat(t,"_description"))},allowClose:p||!1,onTitleChange:onAllowCloseChange:function(e){return l(t,"allow_close",e)},onEnabledChange:displayAllowClose:n,onRemoveMedia:)},Ah=(0,a.t)("landing_page.settings"),Eh=function(e){var t=e.fieldName,r=e.options,n=e.community,i=e.onOptionSelect,o="".concat(t,"_id");return(0,c.jsxs)("div",{className:"form-group",id:"field-".concat(o),children:[(0,c.jsx)(fh.Q,{field:o,label:Ah[t],description:Ah["".concat(t,"_description")]}),(0,c.jsx)(ph.K,{options:r,selected:n[o],customKey:o,onOptionSelect:function(e){return i(e,o,"community")}})]})};function Ih(e){return function(e){if(Array.isArray(e))return zh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Uh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dh(Object(r),!0).forEach((function(t){Mh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rh(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Fh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Rh(o,n,i,a,s,"next",e)}function s(e){Rh(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Bh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Uh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uh(e,t){if(e){if("string"===typeof e)return zh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zh(e,t):void 0}}function zh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vh=function(){var e=Bh((0,n.useState)(!1),2),t=e[0],r=e[1],i=Bh((0,n.useState)({logged_in:!0,logged_out:!0,meta_details:!0}),2),o=i[0],s=i[1],l=Bh((0,n.useState)(new Set),2),u=l[0],d=l[1],f=(0,dh.o)(),m=f.dataLoaded,p=f.settings,h=f.metaData,b=f.loggedInUserSpaceOptions,y=f.loggedOutUserSpaceOptions,v=f.setSettings,g=f.fetchLandingPageSettings,x=f.setLoggedInUserSpaceOptions,_=f.setLoggedOutUserSpaceOptions,j=p.community,w=p.community_setting,O=j.home_page_enabled,P=j.default_existing_member_space_id,k=j.default_new_member_space_id,C=j.default_logged_out_space_id,N=w.trending_posts_window_in_days,T=w.include_non_member_space_posts,A=w.meta_tags,E=h.postSortOptions,I=h.trendingPostWindowLimit,D=h.homePageOption,L=(0,a.t)("landing_page.settings");(0,n.useEffect)((function(){g()}),[]);var M=function(){var e=new Set;return N>I&&e.add((0,a.t)("landing_page.settings.trending_posts_window_limit_exceed",{limit:I})),["logged_in_user_home_page_banner","logged_out_user_home_page_banner"].forEach((function(t){var r=w[t],n=r.enabled,i=r.title;if(n){var o=j["".concat(t,"_media")],a=o.url&&o.url.length>0||o.length>0;0!==i.length||0!==j["".concat(t,"_description")].length||a||e.add(L.welcome_banner.errors.blank_welcome_banner)}})),!(e.size>0)||(d(e),!1)},R=function(){var e=Fh(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),M()?(r(!0),n=(0,Er.wG)({landing_page_settings:p}),fetch((0,S.H5)(),{method:"POST",body:n,credentials:"same-origin",mode:"no-cors",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then(().catch((function(e){console.error(e)}))):window.scrollTo(0,0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Fh(se().mark((function e(t,n){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,fetch((0,S._E)(),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({field_name:n})});case 3:e.sent.ok&&(i={community:Lh(Lh({},j),{},Mh({},n,{})),community_setting:w},v(i),r(!1));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B=function(e,t){var r={community:Lh(Lh({},j),{},Mh({},e,t)),community_setting:w};v(r)},U=function(e,t,r){var n={community:j,community_setting:Lh(Lh({},w),{},Mh({},e,t?Lh(Lh({},w[e]),{},Mh({},t,r)):r))};v(n)},z=function(e,t){var r={community:Lh(Lh({},j),{},Mh({},t,e.target.innerHTML)),community_setting:w};v(r)},V=function(e,t,r){var n=p;n="community"===r?{community:Lh(Lh({},j),Mh({},t,e.value)),community_setting:w}:{community:j,community_setting:Lh(Lh({},w),Mh({},t,e.value))},v(n)},Z=function(e){var t=D.value;if(!0===e){var r={home_page_enabled:e,default_existing_member_space_id:t,default_new_member_space_id:t,default_logged_out_space_id:t},n={community:Lh(Lh({},j),r),community_setting:w};x([D].concat(Ih(b))),_([D].concat(Ih(y))),v(n)}else{var i={home_page_enabled:e},o=b.filter((function(e){return e.value!==t})),a=y.filter((function(e){return e.value!==t}));P===D.value&&(i.default_existing_member_space_id=o[0].value),k===D.value&&(i.default_new_member_space_id=o[0].value),C===D.value&&(i.default_logged_out_space_id=o[0].value);var s={community:Lh(Lh({},j),i),community_setting:w};v(s),x(o),_(a)}},H=function(){return(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(fh.Q,{field:"trending_posts_window_in_days_title",label:L.trending_posts_window_in_days_title,description:L.trending_posts_window_in_days_description}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:N,onChange:function(e){return U("trending_posts_window_in_days",null,e.target.value)}})})]})},q=["logged_in","logged_out"].map((function(e){var t="default_post_sort_".concat(e,"_user");return(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(fh.Q,{field:t,label:L[t],description:L["".concat(t,"_description")]}),(0,c.jsx)(ph.K,{options:E,selected:w[t],customKey:t,onOptionSelect:searchable:!1})]},t)})),G=function(){return(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)(fh.Q,{field:"include_non_member_space_posts",label:L.include_non_member_space_posts_title,description:L.include_non_member_space_posts_description}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)("div",{className:"form-meta-button",children:(0,c.jsx)(hh.Z,{field:"include_non_member_space_posts",value:T,onToggleChange:)})})]})},Q=["logged_in","logged_out"].map((function(e){var t=o[e];return(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("div",{className:"form-section__header has-toggle",children:(0,c.jsx)("button",{type:"button",className:"block-toggle ".concat(t?"open":"hidden"),onClick:function(r){r.preventDefault(),s(Lh(Lh({},o),{},Mh({},e,!t)))},children:L["".concat(e,"_defaults_title")]})}),t&&("logged_in"===e?(0,c.jsxs)("div",{className:"form-section__content",children:[(0,c.jsx)(Eh,{fieldName:"default_existing_member_space",options:b,community:j,onOptionSelect:V}),(0,c.jsx)(Eh,{fieldName:"default_new_member_space",options:b,community:j,onOptionSelect:V}),O&&(0,c.jsx)(Th,{fieldName:"logged_in_user_home_page_banner",community:j,community_setting:w,setMediaSettings:B,onBannerDescriptionChange:z,onCommunitySettingChange:U,onRemoveMedia:F})]}):(0,c.jsxs)("div",{className:"form-section__content",children:[(0,c.jsx)(Eh,{fieldName:"default_logged_out_space",options:y,community:j,onOptionSelect:V}),O&&(0,c.jsx)(Th,{fieldName:"logged_out_user_home_page_banner",community:j,community_setting:w,setMediaSettings:B,onBannerDescriptionChange:z,onCommunitySettingChange:U,onRemoveMedia:F})]}))]},"".concat(e,"-section"))}));return m?(0,c.jsxs)("form",{onSubmit:R,children:[u.size>0&&(0,c.jsx)("div",{className:"form-errors",children:u}),(0,c.jsx)("div",{className:"form-section",children:(0,c.jsxs)("div",{className:"form-section__content border-top",children:[(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("div",{className:"form-group__toggle",children:(0,c.jsxs)("div",{className:"form-group full-width",id:"field-home_page_enabled",children:[(0,c.jsx)(fh.Q,{field:"home_page_enabled",label:L.home_page_enabled,description:L.home_page_enabled_description}),(0,c.jsx)("div",{className:"form-input",children:(0,c.jsx)("div",{className:"form-meta-button",children:(0,c.jsx)(hh.Z,{field:"home_page_enabled",value:O,onToggleChange:Z})})})]})}),O&&(0,c.jsxs)("div",{className:"form-group__hidden ",children:[H(),q,G()]})]}),Q,O&&(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("div",{className:"form-section__header has-toggle",children:(0,c.jsx)("button",{type:"button",className:"block-toggle ".concat(o.meta_details?"open":"hidden"),onClick:function(e){e.preventDefault(),s(Lh(Lh({},o),{},{meta_details:!o.meta_details}))},children:L.meta_tag.meta_tag_section_title})}),o.meta_details&&(0,c.jsx)(mh.p,{metaTagDetails:A,localizedData:L,onCommunitySettingChange:U})]},"meta-data-section")]})}),(0,c.jsx)("div",{className:"flex justify-end",children:(0,c.jsx)($e.z,{variant:"circle",type:"submit",disabled:t,children:t?(0,a.t)("submitting"):(0,a.t)("save_changes")})})]}):(0,c.jsx)(W.m,{})},Zh="settings.home",Hh=function(){var e=Kn(),t=e.isLoading,r=e.postSortOptions;return t?null:(0,c.jsxs)(An,{children:[(0,c.jsx)(yn,{name:"community_setting.trending_posts_window_in_days",translationRoot:Zh,isHorizontal:!0,className:"!py-0",children:(0,c.jsx)(l.l0.Input,{type:"number",name:"community_setting.trending_posts_window_in_days",min:0,max:365,className:"form-control !w-full"})}),(0,c.jsx)(yn,{name:"community_setting.default_post_sort_logged_in_user",translationRoot:Zh,isHorizontal:!0,children:(0,c.jsx)(l.l0.AnimatedSelect,{name:"community_setting.default_post_sort_logged_in_user",options:r,fullWidth:!0})}),(0,c.jsx)(yn,{name:"community_setting.default_post_sort_logged_out_user",translationRoot:Zh,isHorizontal:!0,children:(0,c.jsx)(l.l0.AnimatedSelect,{name:"community_setting.default_post_sort_logged_out_user",options:r,fullWidth:!0})}),(0,c.jsx)(yn,{name:"community_setting.include_non_member_space_posts",translationRoot:Zh,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"community_setting.include_non_member_space_posts",variant:"small"})})]})};function qh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wh="media-uploader",Qh=function(e){var t=e.name,r=e.label,i=e.description,o=e.i18nRoot,s=e.media,u=e.isHorizontal,d=e.className,f=e.onUploadMedia,m=e.onRemoveMedia,p=(0,l.pm)().error,h=qh((0,n.useState)({}),2),b=h[0],y=h[1],v=qh((0,n.useState)(!1),2),g=v[0],x=v[1],_=qh((0,n.useState)(0),2),j=_[0],w=_[1],O=(0,n.useCallback)((function(e,t,r){var n={url:e,type:r,signedId:t};y({}),f(n),x(!1)}),[f]),P=(0,n.useCallback)((function(e){try{new Ph.Q(e.target.files[0],O,Wh,t,S).start()}catch(r){p((0,a.t)("exception_handler.unknown_error"))}}),[t,p,O]),S=return(0,c.jsxs)("div",{className:J()(Wh,"flex flex-col gap-2",{"!grid gap-4 lg:grid-cols-2":u},d),children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:null!==r&&void 0!==r?r:(0,a.t)([o,t])}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:null!==i&&void 0!==i?i:(0,a.t)([o,"".concat(t,"_description")])})]}),(0,c.jsx)("div",{className:"flex-1",children:(0,c.jsx)(wh.o,{id:"field-media-uploader-".concat(t),name:t,media:null!==s&&void 0!==s?s:{},previewMedia:b,isLoading:g,progress:j,onMediaUpload:P,onRemoveMedia:)})]})},Kh="settings.home.customize_home_banner",Jh=function(e){var t=e.isOpen,r=e.onClose,n=Kn(),i=n.isSavingWelcomeBannerPreferences,o=n.resetWelcomeBannerPreferences;return(0,c.jsx)(Gr.cV,{isOpen:t,onClose:r,onConfirm:function(){o(),r()},disabled:i,confirmVariant:"circle",title:(0,a.t)([Kh,"reset_member_closed_banner_preferences"]),children:(0,c.jsx)(l.ZT.BodyMd,{children:(0,a.t)([Kh,"reset_member_closed_banner_preferences_description"])})})};function $h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Yh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xh="settings.home.customize_home_banner",eb=function(){var e=$h((0,n.useState)(!1),2),t=e[0],r=e[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:(0,a.t)([Xh,"allow_close_description"])})," ",(0,c.jsx)(l.zx,{type:"button",variant:"text",className:"underline",onClick:function(){return r(!0)},"arial-label":(0,a.t)([Xh,"reset_member_closed_banner_preferences"]),children:(0,a.t)([Xh,"reset_member_closed_banner_preferences"])}),(0,c.jsx)(Jh,{isOpen:t,onClose:function(){return r(!1)}})]})},tb="settings.home.customize_home_banner",rb=function(e){var t=e.formFieldsNames,r=t.banner_media_name,i=t.banner_title_name,o=t.banner_description_name,s=t.banner_allow_close_name,u=(0,pr.Gc)(),d=u.setValue,f=(0,u.watch)(r);return(0,c.jsxs)(An,{children:[(0,c.jsx)(Qh,{name:r,label:(0,a.t)([tb,"media"]),description:(0,a.t)([tb,"media_description"]),onUploadMedia:function(e){d(r,e)},onRemoveMedia:function(){d(r,null)},i18nRoot:tb,media:f}),(0,c.jsx)(yn,{translationRoot:tb,label:(0,a.t)([tb,"title"]),placeholder:(0,a.t)([tb,"title_placeholder"]),hideDescription:!0,className:"!gap-1 !pt-0",name:i,children:(0,c.jsx)(l.l0.Input,{name:i})}),(0,c.jsx)(yn,{translationRoot:tb,label:(0,a.t)([tb,"description"]),placeholder:(0,a.t)([tb,"description_placeholder"]),hideDescription:!0,className:"!gap-1 !pt-0",name:o,children:(0,c.jsx)(Tn,{name:o,hasEmbeds:!0,hasVideoUpload:!0,hasFileUploadLink:!0,hasGiphyPicker:!0,hasMentions:!0})}),(0,c.jsx)(yn,{translationRoot:tb,label:(0,a.t)([tb,"allow_close"]),isHorizontal:!0,name:s,className:"!pt-0",childrenWrapper:n.Fragment,description:(0,c.jsx)(eb,{}),children:(0,c.jsx)(l.l0.ToggleSwitch,{name:s,variant:"small"})})]})};function nb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(r),!0).forEach((function(t){ob(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ob(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ab="settings.home",sb="community_setting.logged_in_user_home_page_banner.enabled",lb={banner_media_name:"community.logged_in_user_home_page_banner_media",banner_title_name:"community_setting.logged_in_user_home_page_banner.title",banner_description_name:"community.logged_in_user_home_page_banner_description",banner_allow_close_name:"community_setting.logged_in_user_home_page_banner.allow_close"},cb={variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12"},ub=function(){var e=(0,pr.Gc)().watch,t=Kn().loggedInUserSpaces,r=e(sb),i=e("community.home_page_enabled");return(0,c.jsxs)(pn.z,{title:(0,a.t)([ab,"logged_in_defaults"]),noPadding:!0,defaultOpen:!0,children:[i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(yn,{translationRoot:ab,isHorizontal:!0,childrenWrapper:n.Fragment,name:sb,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:sb,variant:"small"})}),r&&(0,c.jsx)(rb,{formFieldsNames:lb})]}),(0,c.jsx)(yn,{name:"community.default_existing_member_space_id",translationRoot:ab,isHorizontal:!0,children:(0,c.jsx)(hn.M,ib({name:"community.default_existing_member_space_id",spaces:t,shouldDisplayHomepage:i},cb))}),(0,c.jsx)(yn,{name:"community.default_new_member_space_id",translationRoot:ab,isHorizontal:!0,className:"!pb-5",children:(0,c.jsx)(hn.M,ib({name:"community.default_new_member_space_id",spaces:t,shouldDisplayHomepage:i},cb))})]})},db="settings.home",fb="community_setting.logged_out_user_home_page_banner.enabled",mb={banner_media_name:"community.logged_out_user_home_page_banner_media",banner_title_name:"community_setting.logged_out_user_home_page_banner.title",banner_description_name:"community.logged_out_user_home_page_banner_description",banner_allow_close_name:"community_setting.logged_out_user_home_page_banner.allow_close"},pb=function(){var e=(0,pr.Gc)().watch,t=Kn().loggedOutUserSpaces,r=e(fb),i=e("community.home_page_enabled");return(0,c.jsxs)(pn.z,{title:(0,a.t)([db,"logged_out_defaults"]),noPadding:!0,defaultOpen:!0,children:[i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(yn,{translationRoot:db,isHorizontal:!0,childrenWrapper:n.Fragment,name:fb,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:fb,variant:"small"})}),r&&(0,c.jsx)(rb,{formFieldsNames:mb})]}),(0,c.jsx)(yn,{name:"community.default_logged_out_space_id",translationRoot:db,isHorizontal:!0,className:"!pb-5",children:(0,c.jsx)(hn.M,{name:"community.default_logged_out_space_id",spaces:t,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",shouldDisplayHomepage:i})})]})},hb=function(e){var t=e.name,r=e.i18nRoot,n=e.label,i=e.description,o=e.isHorizontal,a=e.className,s=(0,pr.Gc)(),l=s.setValue,u=(0,s.watch)(t);return(0,c.jsx)(Qh,{name:t,isHorizontal:o,label:n,description:i,i18nRoot:r,media:u,onUploadMedia:function(e){l(t,e)},onRemoveMedia:className:a})},bb="settings.home",yb=function(){return(0,c.jsxs)(pn.z,{title:(0,a.t)([bb,"meta_tags"]),noPadding:!0,defaultOpen:!0,children:[(0,c.jsx)(yn,{name:"community_setting.meta_tags.meta_title",translationRoot:bb,isHorizontal:!0,children:(0,c.jsx)(l.l0.Input,{name:"community_setting.meta_tags.meta_title"})}),(0,c.jsx)(yn,{name:"community_setting.meta_tags.meta_description",translationRoot:bb,isHorizontal:!0,children:(0,c.jsx)(l.l0.Input,{name:"community_setting.meta_tags.meta_description"})}),(0,c.jsx)(yn,{name:"community_setting.meta_tags.opengraph_title",translationRoot:bb,isHorizontal:!0,description:(0,c.jsx)(tn.Z,{html:(0,a.t)([bb,"community_setting.meta_tags.opengraph_title_description"])}),children:(0,c.jsx)(l.l0.Input,{name:"community_setting.meta_tags.opengraph_title"})}),(0,c.jsx)(yn,{name:"community_setting.meta_tags.opengraph_description",translationRoot:bb,isHorizontal:!0,children:(0,c.jsx)(l.l0.Input,{name:"community_setting.meta_tags.opengraph_description"})}),(0,c.jsx)(hb,{name:"community_setting.meta_tags.opengraph_image",className:"py-5",i18nRoot:bb,isHorizontal:!0})]})},vb=function(){var e=(0,(0,pr.Gc)().watch)("community.home_page_enabled");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"border-primary border-t",children:(0,c.jsx)(yn,{name:"community.home_page_enabled",translationRoot:"settings.home",childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"home_page_enabled",variant:"small"})})}),e&&(0,c.jsx)(Hh,{}),(0,c.jsx)(ub,{}),(0,c.jsx)(pb,{}),e&&(0,c.jsx)(yb,{})]})},gb="settings.home",xb=function(){var e=cn().isReactifiedSettingsHomeEnabled,t=Kn(),r=t.isLoading,n=t.isSaving,i=t.defaultValues,o=t.handleSubmit;return r?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([gb,"title"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([gb,"subtitle"]),children:e?(0,c.jsxs)(l.l0,{defaultValues:i,onSubmit:function(e){return o(e)},children:[(0,c.jsx)(vb,{}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:n,large:!0,children:n?(0,a.t)("saving"):(0,a.t)("save_changes")})})]}):(0,c.jsx)(Vh,{})})})})]})},_b=r(61079),jb=wb=["children","hideAppBar"],Ob=["children"],Pb=["shouldHideMainHeader","children"];function Sb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(r),!0).forEach((function(t){Cb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nb(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Tb=function(e){var t=e.children,r=e.hideAppBar,i=Nb(e,wb),o=(0,D.l)(),a=o.config,s=o.setConfig;(0,n.useEffect)((,[r,s]);var l=(0,Fo.a)().is_v2_1_settings_nav_enabled;return jb(),(0,c.jsx)(_b.a,kb(kb({},i),{},{disableRightSidebar:a.disableRightSidebar,renderLeftSidebar:a.renderLeftSidebar,disableSidebar:a.disableSidebar,isSettingsV2_1Screen:l,hideAppBar:a.hideAppBar,children:t}))},Ab=function(e){var t=e.children,r=Nb(e,Ob);return(0,M.$)("#mainHeader"),(0,c.jsx)(Tb,kb(kb({},r),{},{children:t}))},Eb=function(e){var t=e.shouldHideMainHeader,r=void 0===t||t,n=e.children,i=Nb(e,Pb);return r?(0,c.jsx)(D.S,{children:(0,c.jsx)(Ab,kb(kb({},i),{},{children:n}))}):(0,c.jsx)(D.S,{children:(0,c.jsx)(Tb,kb(kb({},i),{},{children:n}))})},Ib=function(){var e,t=(0,rl.t)(),r=null!==(e={billing:"paymentMethods"}[null===t||void 0===t?void 0:t.tab])&&void 0!==e?e:"subscriptions";return(0,c.jsx)(dr.l_,{to:"".concat(S.G3.billing,"?tab=").concat(r)})},Db=r(78718),Lb=r.n(Db);function Mb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Rb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fb="settings.member_tags.design",Bb=function(e){var t=e.defaultValues,r=Mb((0,n.useState)(!1),2),i=r[0],o=r[1],s=(0,pr.Gc)().watch,u=s("display_format"),d=s("custom_emoji"),f=s("emoji"),m=s("is_background_enabled"),p=Lb()(t,["emoji","custom_emoji_url","custom_emoji_dark_url"]);return(0,n.useEffect)((function(){o("icon"===u&&!(null!==d&&void 0!==d&&d.emoji_type)&&!f)}),[u,d,f]),(0,c.jsx)(pn.z,{title:(0,a.t)([Fb,"title"]),noPadding:!0,defaultOpen:!0,children:(0,c.jsxs)("div",{className:"pb-4",children:[(0,c.jsx)(yn,{name:"emoji",translationRoot:Fb,isHorizontal:!0,rules:{validate:{required:function(){if(i)return(0,a.t)(["settings.validation.this_field_is_required"])}}},hideDescription:i,children:(0,c.jsx)(l.l0.Input,{type:"hidden",focusRequired:!1,prefixWrapperClassName:"!block !border !border-primary rounded-lg relative z-10",prefix:(0,c.jsx)(l.l0.EmojiPickerV3Wrapper,{record:p,shouldEmojiPickerRenderAsPortal:!1,resetToDefaultIcon:!1})})}),(0,c.jsxs)("div",{className:"pb-4",children:[(0,c.jsx)(yn,{name:"is_background_enabled",translationRoot:Fb,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"is_background_enabled",variant:"small"})}),m&&(0,c.jsx)(yn,{name:"color",translationRoot:Fb,isHorizontal:!0,children:(0,c.jsx)(l.l0.ColorPicker,{name:"color"})})]})]})})},Ub="settings.member_tags.members",zb=function(){return(0,c.jsx)(pn.z,{title:(0,a.t)([Ub,"title"]),noPadding:!0,defaultOpen:!0,children:(0,c.jsx)("div",{className:"pb-4",children:(0,c.jsx)(yn,{name:"members",translationRoot:Ub,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.CommunityMemberSelect,{name:"members",hideIcon:!0,variant:"tags",addable:!0})})})})},Vb=r(50768),Zb=r(47230);function Hb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(r),!0).forEach((function(t){Gb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wb="settings.member_tags.visibility",Qb={className:"flex flex-row-reverse items-center justify-end gap-4 py-0",labelClassName:"!m-0 !font-medium !text-sm",hiddenField:!0,hideDescription:!0},Kb=function(){var e=(0,(0,pr.Gc)().getValues)("is_public"),t=[{label:(0,a.t)([Wb,"display_format.icon"]),value:"icon"},{label:(0,a.t)([Wb,"display_format.label"]),value:"label"}];return(0,c.jsxs)(An,{children:[e&&(0,c.jsxs)("div",{className:"flex gap-6",children:[(0,c.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([Wb,"display_locations.title"])}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([Wb,"display_locations.title_description"])})]}),(0,c.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,c.jsx)(l.l0.Item,qb(qb({name:"display_locations.post_bio",label:(0,a.t)([Wb,"display_locations.post_bio"])},Qb),{},{children:(0,c.jsx)(l.l0.Checkbox,{name:"display_locations.post_bio",isFormItem:!1})})),(0,c.jsx)(l.l0.Item,qb(qb({name:"display_locations.profile_page",label:(0,a.t)([Wb,"display_locations.profile_page"])},Qb),{},{children:(0,c.jsx)(l.l0.Checkbox,{name:"display_locations.profile_page",isFormItem:!1})})),(0,c.jsx)(l.l0.Item,qb(qb({name:"display_locations.member_directory",label:(0,a.t)([Wb,"display_locations.member_directory"])},Qb),{},{children:(0,c.jsx)(l.l0.Checkbox,{name:"display_locations.member_directory",isFormItem:!1})}))]})]}),(0,c.jsxs)("div",{className:"flex gap-6",children:[(0,c.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([Wb,"display_format.title"])}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([Wb,"display_format.title_description"])})]}),(0,c.jsx)("div",{className:"flex flex-1 flex-col gap-2",children:(0,c.jsx)(l.l0.Item,qb(qb({name:"display_format"},Qb),{},{children:(0,c.jsx)(l.l0.RadioGroup,{variant:"radio",name:"display_format",options:t,verticalSpacing:"none",renderOption:function(e){var t=e.name,r=e.label,n=e.value,i=e.description;return(0,c.jsx)(Vb.E.Option,{value:n,className:"mb-2",children:function(e){var o=e.checked;return(0,c.jsx)(Zb.Y,{id:"".concat(t,"-radio-").concat(n),label:r,description:i,checked:o,className:"!text-darkest !ring-secondary",labelClassName:"m-0 !font-medium text-sm",labelWrapperClassName:"ml-4 w-full"})}},r)}})}))})]})]})},Jb="settings.member_tags.visibility",$b=function(){return(0,c.jsx)(pn.z,{title:(0,a.t)([Jb,"title"]),noPadding:!0,defaultOpen:!0,children:(0,c.jsxs)("div",{className:"pb-4",children:[(0,c.jsx)(yn,{name:"is_public",translationRoot:Jb,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"is_public",variant:"small"})}),(0,c.jsx)(Kb,{})]})})},Yb="settings.member_tags",Xb=function(e){var t=e.defaultValues,r=e.onSubmit,n=e.isSaving,i=(0,dr.k6)();return(0,c.jsxs)(l.l0,{onSubmit:r,defaultValues:t,children:[(0,c.jsx)("div",{className:"form-section",children:(0,c.jsx)(yn,{name:"name",translationRoot:Yb,isHorizontal:!0,hideDescription:!0,rules:{required:(0,a.t)("settings.validation.this_field_is_required"),maxLength:{value:255,message:(0,a.t)([Yb,"settings.validation.maximum_number_of_characters_allowed"],{count:255})}},children:(0,c.jsx)(l.l0.Input,{autoFocus:!0})})}),(0,c.jsx)(Bb,{defaultValues:t}),(0,c.jsx)($b,{}),(0,c.jsx)(zb,{}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)(l.zx,{variant:"secondary",large:!0,onClick:function(){i.push(S.lA.members.member_tags)},children:(0,a.t)("cancel")}),(0,c.jsx)(l.zx,{variant:"circle",disabled:n,large:!0,children:n?(0,a.t)("saving"):(0,a.t)("save")})]})})]})};function ey(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ty(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ey(o,n,i,a,s,"next",e)}function s(e){ey(o,n,i,a,s,"throw",e)}a(void 0)}))}}var ry=function(){var e=function(){var e=ty(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Er.UT)(S.av.settings.memberTags.show({uuid:t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=ty(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Er.Cu)(S.av.settings.memberTags.create(),{member_tag:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=ty(se().mark((function e(t,r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Er.aU)(S.av.settings.memberTags.update({uuid:t}),r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),n=function(){var e=ty(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Er.pC)(S.av.settings.memberTags.destroy({uuid:t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{listMemberTags:function(e){var t=e.params,r=void 0===t?{}:t;return(0,Er.UT)(S.av.settings.memberTags.index({params:r}))},getMemberTag:e,createMemberTag:t,deleteMemberTag:n,updateMemberTag:r}};function ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ny(Object(r),!0).forEach((function(t){oy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ny(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ay=function(e){var t,r,i,o,a,s=ry().listMemberTags,l=null!==e&&void 0!==e?e:{},c=l.query,u=void 0===c?"":c,d=l.perPage,m=void 0===d?20:d,p=l.initialPage,h=void 0===p?1:p,b=l.options,y=["settings","member-tags",u,m,h],v=iy({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===b?{}:b),g=(0,f.useInfiniteQuery)(y,(function(e){var t=e.pageParam,r=void 0===t?h:t,n=1;r>0&&(n=r);var i=iy({page:n,per_page:m},u&&{query:u});return s({params:i})}),v),x=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=g.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=g.data)||void 0===t?void 0:t.pages]),_=null!==(r=null===(i=x[0])||void 0===i?void 0:i.count)&&void 0!==r?r:0,j=null!==(o=null===(a=x[0])||void 0===a?void 0:a.per_page)&&void 0!==o?o:m;return iy(iy({},g),{},{queryKey:y,totalMemberTags:_,pageSize:j,pages:x})},sy="settings.member_tags",ly={name:"",emoji:"",color:"#ffffff",is_public:!0,is_background_enabled:!1,display_locations:{post_bio:!0,profile_page:!0,member_directory:!0},display_format:"label",members:[]},cy="settings.member_tags",uy=function(){var e=function(){var e=(0,l.pm)(),t=(0,dr.k6)(),r=ay().queryKey,n=ry().createMemberTag,i=(0,f.useMutation)({mutationFn:function(e){return n(e)},onSuccess:function(){lr.Eh.invalidateQueries(r),t.push(S.lA.members.member_tags),e.success((0,a.t)([sy,"success_saving"]))},onError:function(){return e.error((0,a.t)([sy,"error_saving"]))}}),o=i.mutate,s=i.isLoading;return{defaultValues:ly,isSaving:s,handleSubmit:o}}(),t=e.defaultValues,r=e.isSaving,n=e.handleSubmit;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([cy,"new_member_tag"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([cy,"new_member_tag_title"]),children:(0,c.jsx)(Xb,{defaultValues:t,isSaving:r,onSubmit:n})})})})]})};function dy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dy(Object(r),!0).forEach((function(t){my(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function my(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function py(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function hy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return by(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return by(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function by(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yy="settings.member_tags",vy=function(){var e,t,r=(0,dr.UO)().id,i=(0,dr.k6)(),o=(0,l.pm)(),s=ry(),c=s.getMemberTag,u=s.updateMemberTag,d=hy((0,n.useState)(),2),m=d[0],p=d[1],h=ay().queryKey,b=(0,f.useMutation)({mutationFn:function(){return c(r)},onSuccess:function(e){return p(e)},onError:function(){i.push(S.lA.members.member_tags),o.error((0,a.t)([yy,"error_loading"]))}}),y=b.mutate,v=b.isLoading,g=(0,f.useMutation)({mutationFn:(e=se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={member_tag:fy({},t)},e.next=3,u(r,fy({},n));case 3:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){py(o,n,i,a,s,"next",e)}function s(e){py(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return t.apply(this,arguments)}),onSuccess:function(){lr.Eh.invalidateQueries(h),i.push(S.lA.members.member_tags),o.success((0,a.t)([yy,"success_saving"]))},onError:function(){o.error((0,a.t)([yy,"error_saving"]))}}),x=g.mutate,_=g.isLoading;return(0,n.useEffect)((function(){y()}),[y]),{defaultValues:m,isSaving:_,isLoading:v,onSubmit:x}},gy="settings.member_tags",xy=function(){var e=vy(),t=e.defaultValues,r=e.isLoading,n=e.isSaving,i=e.onSubmit;return r||!t?(0,c.jsx)(l.aN,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([gy,"edit_member_tag"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([gy,"edit_member_tag_title"]),children:(0,c.jsx)(Xb,{defaultValues:t,onSubmit:i,isSaving:n})})})})]})},_y=jy=function(e){var t=e.color,r=e.isBackgroundEnabled;return t&&r?(0,c.jsx)("div",{className:"flex h-6 items-center",children:(0,c.jsx)("div",{className:"border-secondary h-3 w-3 rounded-full border",style:{backgroundColor:t}})}):(0,c.jsx)(_y,{})},wy=r(31403),Oy=function(e){var t=e.emoji,r=e.customEmojiUrl,n=e.customEmojiDarkUrl,i=(0,lr.TC)().currentAppearance;return t||r||n?(0,c.jsx)("span",{children:(0,c.jsx)(wy.S,{className:"mr-2 !h-4 !w-4",emoji:t,appearance:i,customEmojiUrl:r,customEmojiDarkUrl:n})}):(0,c.jsx)(_y,{})},Py="settings.member_tags",Sy=function(e){var t=e.memberTagId,r=e.isOpen,n=e.onClose,i=(0,f.useQueryClient)(),o=(0,l.pm)(),s=ay().queryKey,u=ry().deleteMemberTag,d=(0,f.useMutation)({mutationFn:function(){return u(t)},onSuccess:function(){i.invalidateQueries(s),n(),o.success((0,a.t)([Py,"success_deleting"]),{duration:"short",shouldUseProgress:!1})},onError:function(){n(),o.error((0,a.t)([Py,"error_deleting"]))}}).mutate;return(0,c.jsx)(Gr.cV,{isOpen:r,onClose:n,confirmVariant:"danger",onConfirm:d,title:(0,a.t)([Py,"table.confirm_delete.title"]),confirmText:(0,a.t)([Py,"table.confirm_delete.body"]),children:(0,a.t)([Py,"table.confirm_delete.description"])})};function ky(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ny=function(e){var t=e.memberTagId,r=(0,dr.k6)(),i=ky((0,n.useState)(!1),2),o=i[0],s=i[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Q.w.Actions,{children:[(0,c.jsx)(Q.w.Actions.Item,{onClick:function(){var e="".concat(S.lA.members.member_tags,"/").concat(t,"/edit");r.push({pathname:e})},children:(0,a.t)("edit")}),(0,c.jsx)(Q.w.Actions.Item,{hasDanger:!0,onClick:function(){s(!0)},children:(0,a.t)("delete")})]}),(0,c.jsx)(Sy,{memberTagId:t,isOpen:o,onClose:function(){return s(!1)}})]})},Ty=function(e){var t=e.children,r=(0,Mo.k)().shouldShowTrialBanner,n=(0,Fo.a)().is_v2_1_header_rendered;return(0,c.jsx)("div",{className:J()("overflow-y-auto",{"lg:h-[calc(100vh-7.5rem)]":!r&&!n,"lg:h-[calc(100vh-10.5rem)]":r&&!n||!r&&n,"lg:h-[calc(100vh-13.5rem)]":r&&n}),children:(0,c.jsx)("div",{className:"flex h-full flex-col overflow-auto",children:t})})},Ay="settings.member_tags",Ey=[{accessorKey:"name",header:(0,a.t)([Ay,"table.name"])},{accessorKey:"emoji",header:(0,a.t)([Ay,"table.icon"]),cell:function(e){return(0,c.jsx)(Oy,{emoji:e.getValue(),customEmojiUrl:e.row.original.custom_emoji_url,customEmojiDarkUrl:e.row.original.custom_emoji_dark_url})}},{accessorKey:"is_background_enabled",header:(0,a.t)([Ay,"table.is_background_enabled"]),thClassName:et.M.lg,cellClassName:et.M.lg,cell:function(e){return(0,a.t)([Ay,"table.is_background_enabled_values",String(e.getValue())])}},{accessorKey:"color",header:(0,a.t)([Ay,"table.color"]),thClassName:et.M.md,cellClassName:et.M.md,cell:function(e){return(0,c.jsx)(jy,{color:e.getValue(),isBackgroundEnabled:e.row.original.is_background_enabled})}},{accessorKey:"is_public",header:(0,a.t)([Ay,"table.is_public"]),thClassName:et.M.lg,cellClassName:et.M.lg,cell:function(e){return(0,a.t)([Ay,"table.is_public_values",String(e.getValue())])}},{accessorKey:"display_format",header:(0,a.t)([Ay,"table.display_format"]),thClassName:et.M.xl,cellClassName:et.M.xl,cell:function(e){return(0,a.t)([Ay,"table.display_format_values",String(e.getValue())])}},{accessorKey:"tagged_members_count",header:(0,a.t)([Ay,"table.tagged_members_count"]),thClassName:et.M.xl,cellClassName:et.M.xl,cell:,{accessorKey:"actions",header:"",cellClassName:"cursor-default",cell:function(e){return(0,c.jsx)(Ny,{memberTagId:e.row.original.id})}}],Iy=function(){var e=(0,dr.k6)(),t=function(){var e,t=(0,To.Xt)().queryParams,r=(0,No.v)(),n=r.setPage,i=r.initialPage,o=String(null!==(e=null===t||void 0===t?void 0:t.query)&&void 0!==e?e:""),a=ay({perPage:20,initialPage:i,query:o,options:{keepPreviousData:!1}});return{infiniteQuery:a,totalMemberTags:null===a||void 0===a?void 0:a.totalMemberTags,isLoading:null===a||void 0===a?void 0:a.isLoading,setPage:n,initialPage:i,defaultPageSize:20}}(),r=t.infiniteQuery,n=t.totalMemberTags,i=t.defaultPageSize,o=t.initialPage,s=t.setPage;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([Ay,"title"]),hasBorder:!1,rightContent:(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){e.push(S.lA.members.new_member_tags)},children:(0,a.t)([Ay,"new_member_tag"])})}),(0,c.jsxs)(bo.J,{columns:Ey,infiniteQuery:r,pageSize:i,initialPage:o,onChangePage:function(e){return s(e)},children:[(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)([Ay,"table.total"],{count:n})})}),(0,c.jsx)(Ty,{children:(0,c.jsxs)("div",{className:"px-6","data-testid":"member-tag-list",children:[(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsx)(Q.w.Header,{isSticky:!0}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})})]})]})},Dy=function(){var e=(0,dr.$B)().path;return(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{exact:!0,path:e,component:Iy}),(0,c.jsx)(dr.AW,{exact:!0,path:"".concat(e,"/new"),component:uy}),(0,c.jsx)(dr.AW,{exact:!0,path:"".concat(e,"/:id/edit"),component:xy})]})},Ly=function(){var e=(0,dr.k6)(),t=(0,dr.$B)("/settings/member_tags"),r=((0,v.wh)().currentCommunitySettings||{}).reactified_settings_member_tags;return(0,c.jsx)(c.Fragment,{children:r?(0,c.jsx)(Dy,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.member_tags.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"member_tags"},rightContent:(null===t||void 0===t?void 0:t.isExact)&&(0,c.jsx)($e.z,{variant:"circle",onClick:function(){e.push("/settings/member_tags/new")},children:(0,a.t)("member_tags.create_title")})}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"member_tags"}),(0,c.jsx)($,{children:(0,c.jsx)(on,{})})]})})},My=function(){return(0,Er.UT)(S.av.chatPreferences.index())},Ry=["settings","messaging"],Fy=function(){var e=(0,l.pm)(),t=e.success,r=e.error,n=(0,f.useQueryClient)(),i=(0,f.useQuery)(Ry,My),o=i.data,s=i.isLoading,c=(0,f.useMutation)({mutationFn:function(e){return t={chat_preference:e},(0,Er.gN)(S.av.chatPreferences.update({params:t}));var t},onSuccess:function(){n.invalidateQueries(Ry),t((0,a.t)("settings.messages.success"))},onError:function(){return r((0,a.t)("settings.messages.error"))}}),u=c.mutate;return{isLoading:s,isSaving:c.isLoading,defaultValues:o,handleSubmit:u}},By="settings.messaging",Uy=function(){var e=Fy(),t=e.isLoading,r=e.isSaving,i=e.defaultValues,o=e.handleSubmit;return t?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([By,"title"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([By,"subtitle"]),children:(0,c.jsxs)(l.l0,{defaultValues:i,onSubmit:function(e){return o(e)},children:[(0,c.jsx)(yn,{id:"checkbox-messaging-enabled",name:"messaging_enabled",translationRoot:By,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"messaging_enabled",variant:"small"})}),(0,c.jsx)(yn,{id:"checkbox-group-messaging-enabled",name:"group_messaging_enabled",translationRoot:By,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"group_messaging_enabled",variant:"small"})}),(0,c.jsx)(yn,{id:"checkbox-voice-messages-enabled",name:"voice_messages_enabled",translationRoot:By,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"voice_messages_enabled",variant:"small"})}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:r,large:!0,children:r?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})})})})]})},zy=r(63528),Vy="settings.moderation",Zy=function(e){var t=e.flagged_contentable,r=null!==t&&void 0!==t?t:{},n=r.title,i=r.type;return n?(0,c.jsx)(c.Fragment,{children:n}):(null===i||void 0===i?void 0:i.toLowerCase())===zy.GI.COMMENT?(0,c.jsx)(c.Fragment,{children:(0,a.t)([Vy,"comment_in_a_post"])}):(0,c.jsx)("span",{className:"text-lightest",children:(0,a.t)([Vy,"review_flagged_content_modal.empty"])})},Hy=r(25362),qy=r(24170),Gy=function(e){var t=e.trixBody,r=e.tiptapBody,n=e.isImagePost,i=e.postSlug,o=e.spaceId;return n&&i&&o?(0,c.jsxs)("div",{className:"flex flex-col gap-4",children:[r&&(0,c.jsx)(qy.G,{tiptapBody:r}),(0,c.jsx)("div",{className:"-mt-5",children:(0,c.jsx)(j,{postSlug:i,spaceId:o})})]}):t?(0,c.jsx)(tn.Z,{html:t}):r?(0,c.jsx)(qy.G,{tiptapBody:r}):(0,c.jsx)(l.ZT.LabelSm,{color:"text-lightest",children:(0,a.t)(["settings.moderation.review_flagged_content_modal","empty"])})},Wy=r(76747),Qy=r(70297),Ky=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,Qy.Z)(new Date(e),new Date,{addSuffix:t})};function Jy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jy(Object(r),!0).forEach((function(t){Yy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xy="settings.moderation.review_flagged_content_modal",ev=function(e){var t=e.communityMember,r=e.contentType,n=void 0===r?"":r,i=e.reportedAt,o=void 0===i?"":i,s=e.reportsCount,u=void 0===s?1:s,d=e.slug,f=void 0===d?"":d,m=e.postSlug,p=void 0===m?"":m,h=e.spaceSlug,b=void 0===h?"":h,y=e.onNavigate,v=void 0===y?function(){}:y,g=null!==t&&void 0!==t?t:{},x=g.first_name,_=g.last_name,j=g.avatar_url,w=g.public_uid,O="".concat(x," ").concat(_),P=n.toLowerCase()===zy.GI.POST,S=n.toLowerCase()===zy.GI.COMMENT,k=P?f:p,C="/c/".concat(b),N="".concat(C,"/").concat(k),T="/admin/members/".concat(w,"/info"),A={onClick:v,className:"flex font-semibold leading-5 text-dark"};return(0,c.jsxs)("div",{className:"flex items-center gap-4 p-8 pb-4",children:[t&&(0,c.jsx)(sn.OL,{to:T,onClick:v,children:(0,c.jsx)(Pt.sJ,{name:O,src:j,size:"10"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[t?(0,c.jsx)(sn.OL,$y($y({to:T},A),{},{children:O})):(0,c.jsx)(l.ZT.LabelMd,{children:(0,a.t)([Xy,"deleted_user"])}),P&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sn.OL,$y($y({to:N},A),{},{children:(0,a.t)([Xy,"posted"])})),(0,c.jsx)(l.ZT.LabelMd,{children:(0,a.t)([Xy,"on_a"])}),(0,c.jsx)(sn.OL,$y($y({to:C},A),{},{children:(0,a.t)([Xy,"space"])}))]}),S&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.ZT.LabelMd,{children:(0,a.t)([Xy,"commented"])}),(0,c.jsx)(l.ZT.LabelMd,{children:(0,a.t)([Xy,"on_a"])}),(0,c.jsx)(sn.OL,$y($y({to:N},A),{},{children:(0,a.t)([Xy,"post.title"])}))]})]}),(0,c.jsxs)("div",{className:"text-default flex items-center gap-1.5 font-semibold",children:[(0,c.jsxs)("span",{className:"flex h-4 items-center gap-1",children:[(0,c.jsx)(bt.JO,{className:"!w-3",type:"flag",size:24}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-default",children:u})]}),(0,c.jsx)(Wy.G,{className:"flex h-4 items-center"}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-default",children:(0,a.t)([Xy,"last_reported"],{time:Ky(o)})})]})]})]})},tv="settings.moderation.review_flagged_content_modal",rv=function(e){var t=e.reports,r=void 0===t?[]:t;return(0,c.jsxs)("div",{className:"flex flex-col gap-6 px-8 py-6",children:[r.map((function(e){var t=e.id,r=e.reported_reason_type,n=void 0===r?"":r,i=e.reported_reason_body,o=e.reported_at,s=void 0===o?"":o,u=e.reporter;return(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[u&&(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)(Pt.sJ,{name:"".concat(u.first_name," ").concat(u.last_name),src:u.avatar_url,size:"8"}),(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:"".concat(u.first_name," ").concat(u.last_name)}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-dark",children:Ky(s)})]})]}),(0,c.jsxs)("div",{className:J()("bg-tertiary flex flex-col gap-1.5 rounded-lg px-4 py-3",{"ml-12":!!u}),children:[n&&(0,c.jsxs)("div",{children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([tv,"reason"])}),"\xa0",(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([tv,"report_reasons",n])})]}),i&&(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"p",children:i})]})]},t)})),0===r.length&&(0,c.jsx)(l.ZT.LabelSm,{color:"text-lightest",children:(0,a.t)([tv,"empty"])})]})},nv=r(15789),iv="settings.moderation.review_flagged_content_modal",ov="settings.moderation.review_flagged_content_modal",av=function(e){var t=null!==e&&void 0!==e?e:{},r=t.flaggedContentId,n=t.isReadOnly,i=(0,ne.yT)(),o=function(e){var t=(0,l.pm)(),r=t.success,n=t.error,i=(0,nv.M)(),o=i.get,s=i.approve,c=i.reject,u=(0,f.useQueryClient)(),d=(0,f.useQuery)(["flagged-content",e],(function(){return o(e)}),{enabled:!!e}),m=d.data,p=d.isLoading,h=function(){u.invalidateQueries({queryKey:["flagged-content"]})},b=(0,f.useMutation)({mutationFn:function(){return s(e)},onSuccess:function(){h(),r((0,a.t)([iv,"success_approving"]))},onError:function(){return n((0,a.t)([iv,"error_approving"]))}}),y=b.mutate,v=b.isLoading,g=(0,f.useMutation)({mutationFn:function(){return c(e)},onSuccess:function(){h(),r((0,a.t)([iv,"success_rejecting"]))},onError:function(){return n((0,a.t)([iv,"error_rejecting"]))}});return{approveFlaggedContent:y,isApproving:v,rejectFlaggedContent:g.mutate,isRejecting:g.isLoading,isLoading:p,flaggedContent:m}}(r),s=o.approveFlaggedContent,u=o.rejectFlaggedContent,d=o.flaggedContent,m=o.isApproving,p=o.isRejecting,h=null!==d&&void 0!==d?d:{},b=h.author,y=h.flagged_contentable,v=h.reported_at,g=h.reports,x=void 0===g?[]:g,_=null!==y&&void 0!==y?y:{},j=_.body_trix_content,w=void 0===j?"":j,O=_.type,P=void 0===O?"":O,S=_.tiptap_body,k=_.slug,C=_.is_image_post,N=_.post_slug,T=_.space_slug,A=_.space_id,E=P.toLowerCase(),I=null===x||void 0===x?void 0:x.length;return E!==zy.GI.POST&&E!==zy.GI.COMMENT?null:(0,c.jsxs)(ie.u_,{isOpen:i.visible,onClose:i.hide,contentPortalId:"review-modal-content",children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"lg",children:[(0,c.jsx)(ie.u_.Header,{className:"!py-0",children:(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:i.hide})})}),(0,c.jsxs)(ie.u_.Body,{className:"flex flex-col !p-0",children:[(0,c.jsx)(ev,{communityMember:b,contentType:E,reportedAt:v,reportsCount:I,slug:k,postSlug:N,spaceSlug:T,onNavigate:function(){i.hide()}}),(0,c.jsxs)(Uo.O.Group,{className:"!px-0",children:[(0,c.jsxs)(Uo.O.List,{className:"border-primary border-b px-8",children:[(0,c.jsx)(Uo.O,{children:(0,a.t)([ov,"details"])}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)([ov,"reports"]),(0,c.jsx)(Uo.O.Counter,{children:I})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{className:"px-8 py-6",children:(0,c.jsx)(Gy,{trixBody:w,tiptapBody:S,postSlug:k,spaceId:A,isImagePost:C})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(rv,{reports:x})})]})]})]}),(0,c.jsx)(ie.u_.Footer,{className:"border-primary flex items-center justify-end gap-4 border-t",children:n?(0,c.jsx)(l.zx,{variant:"secondary",onClick:i.hide,children:(0,a.t)("close")}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.zx,{variant:"secondary",onClick:function(){s(),i.hide()},disabled:m,children:m?(0,a.t)([ov,"approving"]):(0,a.t)([ov,E,"approve"])}),(0,c.jsx)(l.zx,{variant:"danger",onClick:disabled:p,children:p?(0,a.t)([ov,"rejecting"]):(0,a.t)([ov,E,"reject"])})]})})]})]})},sv=ne.uc.create((function(e){var t=e.flaggedContentId,r=e.isReadOnly;return(0,c.jsx)(av,{flaggedContentId:t,isReadOnly:r})})),lv=function(e){var t,r=e.flaggedContentId,n=e.isReadOnly,i=((t="review-flagged-content")&&Hy.ZP.register(t,sv),(0,ne.yT)(null!==t&&void 0!==t?t:sv));return(0,c.jsx)(Q.w.Actions,{children:(0,c.jsx)(Q.w.Actions.Item,{onClick:function(){i.show({flaggedContentId:r,isReadOnly:n})},children:(0,a.t)("settings.moderation.table.review")})})},cv=function(e){var t=e.children,r=(0,Mo.k)().shouldShowTrialBanner;return(0,c.jsx)("div",{className:J()("overflow-y-auto",{"lg:h-[calc(100vh-15.8rem)]":r,"lg:h-[calc(100vh-12.8rem)]":!r}),children:(0,c.jsx)("div",{className:"flex h-full flex-col overflow-auto",children:t})})},uv=function(e){var t=e.first_name,r=e.last_name,n=e.avatar_url;return t||r?(0,c.jsxs)("span",{className:"flex items-center gap-3",children:[(0,c.jsx)(Pt.sJ,{name:"".concat(t," ").concat(r),src:n}),(0,c.jsxs)(l.ZT.LabelSm,{children:[t," ",r]})]}):(0,c.jsx)(Zl.n,{})},dv=r(32799),fv="settings.moderation",mv=[{accessorKey:"flagged_contentable.title",header:(0,a.t)([fv,"table.title"]),cell:function(e){return(0,c.jsx)(Zy,{flagged_contentable:e.row.original.flagged_contentable})}},{accessorKey:"author",header:(0,a.t)([fv,"table.author"]),thClassName:et.M.lg,cellClassName:et.M.lg,cell:function(e){var t,r=null!==(t=e.getValue())&&void 0!==t?t:{},n=r.first_name,i=r.last_name,o=r.avatar_url;return(0,c.jsx)(uv,{first_name:n,last_name:i,avatar_url:o})}},{accessorKey:"reporter",header:(0,a.t)([fv,"table.reported_by"]),thClassName:et.M.xl,cellClassName:et.M.xl,cell:function(e){var t,r=null!==(t=e.getValue())&&void 0!==t?t:{},n=r.first_name,i=r.last_name,o=r.avatar_url;return(0,c.jsx)(uv,{first_name:n,last_name:i,avatar_url:o})}},{accessorKey:"reported_at",header:(0,a.t)([fv,"table.published"]),thClassName:et.M.md,cellClassName:et.M.md,cell:function(e){return(0,c.jsx)(Ql,{dateTime:e.getValue()})}},{accessorKey:"reports_count",header:(0,a.t)([fv,"table.reports"])},{accessorKey:"actions",header:"",cell:function(e){return(0,c.jsx)(lv,{flaggedContentId:e.row.original.id,isReadOnly:e.row.original.status===zy.vC.APPROVED||e.row.original.status===zy.vC.REJECTED})}}],pv=function(e){var t=function(e){var t,r=e.status,n=(0,To.Xt)().queryParams,i=(0,No.v)(),o=i.setPage,a=i.initialPage,s=String(null!==(t=null===n||void 0===n?void 0:n.query)&&void 0!==t?t:""),l=(0,dv.D)({perPage:dv.L,initialPage:a,status:r,query:s,options:{keepPreviousData:!1}});return{infiniteQuery:l,totalRecords:null===l||void 0===l?void 0:l.totalRecords,isLoading:null===l||void 0===l?void 0:l.isLoading,initialPage:a,defaultPageSize:dv.L,setPage:o}}({status:e.status}),r=t.infiniteQuery,n=t.totalRecords,i=t.defaultPageSize,o=t.initialPage,s=t.setPage;return(0,c.jsxs)(bo.J,{columns:mv,infiniteQuery:r,pageSize:i,initialPage:o,onChangePage:function(e){return s(e)},children:[(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)([fv,"table.total"],{count:n})})}),(0,c.jsx)(cv,{children:(0,c.jsxs)("div",{className:"px-6","data-testid":"moderation-list",children:[(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsx)(Q.w.Header,{isSticky:!0,className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})})]})},hv=r(75152),bv="settings.moderation",yv=function(){var e,t,r=(0,dr.k6)(),n=(0,hv.O)(),i=n.inboxCount,o=n.approvedCount,s=n.rejectedCount,l=(0,To.Xt)().queryParams,u=null!==(e=null===(t=l[zy.V9])||void 0===t?void 0:t.toString())&&void 0!==e?e:zy.dW[0],d=zy.dW.indexOf(u),f=-1===d?0:d;return(0,c.jsxs)(Uo.O.Group,{selectedIndex:f,onChange:function(e){var t=(0,fn.pick)(l,["page","status","query"]),n=zy.dW[e];t[zy.V9]=n,t.page="1";var i=(0,S.UK)(t);r.push({search:i})},className:"!h-auto",children:[(0,c.jsxs)(Uo.O.List,{className:"block flex-none border-b px-6",children:[(0,c.jsxs)(Uo.O,{children:[(0,a.t)([bv,"tabs.inbox"]),(0,c.jsx)(Uo.O.Counter,{children:i})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)([bv,"tabs.approved"]),(0,c.jsx)(Uo.O.Counter,{children:o})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)([bv,"tabs.rejected"]),(0,c.jsx)(Uo.O.Counter,{children:s})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(pv,{status:zy.vC.INBOX})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(pv,{status:zy.vC.APPROVED})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(pv,{status:zy.vC.REJECTED})})]})]})},vv=function(){var e=(0,dr.k6)();return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("flagged_contents.moderation"),hasBorder:!1,rightContent:(0,c.jsx)(l.zx,{variant:"secondary",onClick:function(){e.push(S.lA.content.moderation_edit)},children:(0,a.t)("settings_title")})}),(0,c.jsx)(yv,{})]})},gv=function(){return null},xv=function(){return(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.content.moderation,component:vv}),(0,c.jsx)(dr.AW,{exact:!0,path:S.lA.content.moderation_edit,component:gv})]})},_v=function(){var e,t,r=(0,v.wh)().currentCommunityMember,n=(0,dr.k6)(),i=(null!==(e=(0,dr.$B)(S.lA.content.moderation))&&void 0!==e?e:{isExact:!1}).isExact,o=(null!==(t=(0,dr.$B)(S.lA.content.edit_moderation))&&void 0!==t?t:{isExact:!1}).isExact;return cn().isReactifiedSettingsModerationEnabled&&!o?(0,c.jsx)(xv,{}):(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("flagged_contents.moderation"),pageMetaProps:{bodyClassNames:"view-moderation"},hasBorder:!1,layoutConfigProps:{disableRightSidebar:!0},rightContent:i&&r.is_admin&&(0,c.jsx)(l.zx,{variant:"secondary",onClick:children:(0,a.t)("settings_title")})}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(A.S,{bodyClassNames:"no-border-header"}),(0,c.jsx)("main",{"aria-label":(0,a.t)("main_content"),className:"settings-app",children:(0,c.jsx)(on,{})})]})},jv=r(84146),wv=function(e){var t=e.children;return(0,c.jsx)(dn,{children:(0,c.jsx)("div",{className:J()("form-content","flex flex-col gap-6 border-none px-8 xl:!px-0 xl:!py-8"),children:t})})},Ov=r(89001),Pv="settings.general.messages",Sv="settings.onboarding",kv=function(){var e=function(){var e=(0,v.wh)(),t=e.isLoading,r=e.currentCommunity,n=void 0===r?{}:r,i=(0,l.pm)(),o=(0,f.useQueryClient)(),s={default_space_ids:(n||{}).default_space_ids,default_space_group_ids:[]},c=(0,Ov.zo)({serializeSpaceGroup:Ov.Bb,serializeSpace:Ov.lV}),u=c.options,d=c.isLoading,m=(0,f.useMutation)({mutationFn:function(e){var t=e.default_space_ids;return vn.$.update({community:n,community_setting:{default_space_ids:t}})},onSuccess:function(){o.invalidateQueries(["pundit-user"]),i.success((0,a.t)([Pv,"success"]))},onError:function(){return i.error((0,a.t)([Pv,"error"]))}}),p=m.mutate;return{defaultValues:s,isLoading:t||d,isSaving:m.isLoading,options:u,onSubmitHandler:p}}(),t=e.defaultValues,r=e.isLoading,n=e.isSaving,i=e.options,o=void 0===i?[]:i,s=e.onSubmitHandler;return r?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(wv,{children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)([Sv,"tabs.access.title"])}),(0,c.jsx)(l.ZT.BodySm,{color:"text-default",children:(0,a.t)([Sv,"tabs.access.description"])}),(0,c.jsxs)(l.l0,{defaultValues:t,onSubmit:function(e){return s(e)},children:[(0,c.jsxs)(jv.i,{options:o,className:"lg:max-h-[calc(100vh-27rem)]",childFieldName:"default_space_ids",parentFieldName:"default_space_group_ids",children:[(0,c.jsx)(jv.i.Header,{children:(0,c.jsx)(jv.i.SearchBar,{})}),(0,c.jsxs)(jv.i.Body,{className:"overflow-y-auto",children:[(0,c.jsxs)(jv.i.ListHeader,{children:[(0,c.jsx)(jv.i.ListHeaderColumnNoAccess,{}),(0,c.jsx)(jv.i.ListHeaderColumnAccessGranted,{})]}),(0,c.jsxs)(jv.i.ListContainer,{children:[(0,c.jsx)(jv.i.ListMobile,{}),(0,c.jsx)(jv.i.ListNoAccess,{}),(0,c.jsx)(jv.i.ListAccessGranted,{})]})]})]}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:n,large:!0,children:n?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})]})},Cv=function(e){var t=null===e||void 0===e?void 0:e.replace(/\s/g,"");return(0,fn.isEmpty)(e)||'<divclass="trix-content"></div>'===t},Nv="custom-email",Tv="settings.onboarding",Av="onboarding",Ev="settings.onboarding";function Iv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(r),!0).forEach((function(t){Lv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mv(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Rv(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Mv(o,n,i,a,s,"next",e)}function s(e){Mv(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Fv=function(){var e,t,r,n,i,o,s,c,u,d,m,p,h,b,y,g,x,_,j,w,O,P=(0,l.pm)(),S=P.success,k=P.error,C=(0,f.useQueryClient)(),N=function(){var e=(0,f.useMutation)({mutationFn:function(e){var t=(0,fn.pick)(e,["onboarding_popup","onboarding_popup_description","onboarding_email","onboarding_email_message"]);return vn.$.updateOnboardingSettings({community_onboarding_setting:t})}});return{updateOnboarding:e.mutate,isSavingOnboarding:e.isLoading}}(),T=N.updateOnboarding,A=N.isSavingOnboarding,E=function(){var e=(0,f.useMutation)({mutationFn:function(e){var t=(0,fn.pick)(e,["custom_invitation_email","custom_invitation_email_body","custom_invitation_email_for_existing_circle_users","custom_invitation_email_for_existing_circle_users_body"]);return vn.$.updateCustomInvitationEmail({custom_invitation_email_setting:t})}});return{updateCustomInvitationEmail:e.mutate,isSavingCustomInvitationEmail:e.isLoading}}(),I=E.updateCustomInvitationEmail,D=E.isSavingCustomInvitationEmail,L=(0,f.useMutation)({mutationFn:(t=Rv(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([T(t),I(t)]);case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onSuccess:(e=Rv(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.invalidateQueries([Nv,Av]);case 2:S((0,a.t)(["settings.messages.success"]));case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),onError:function(){return k((0,a.t)(["settings.messages.error"]))}}),M=L.mutate,R=(r=vn.$.getOnboarding,n=(0,f.useQuery)(Av,r),i=n.data,o=n.isLoading,c=(s=null!==i&&void 0!==i?i:{}).onboarding_popup,u=s.onboarding_popup_description,d=s.onboarding_email,m=s.onboarding_email_message,h=(p=null!==c&&void 0!==c?c:{}).enabled,b=p.title,y=p.button_label,g=p.button_url,_=(x=null!==d&&void 0!==d?d:{}).enabled,j=x.subject,w=x.button_label,O=x.button_url,{defaultValues:{onboarding_popup:{enabled:h,title:(0,fn.isEmpty)(b)?(0,a.t)([Ev,"onboarding_popup.title_default"]):b,button_label:null!==y&&void 0!==y?y:"",button_url:null!==g&&void 0!==g?g:""},onboarding_popup_description:Cv(u)?(0,a.t)([Ev,"onboarding_popup.description_default"]):u,onboarding_email:{enabled:_,subject:(0,fn.isEmpty)(j)?(0,a.t)([Ev,"onboarding_email.subject_default"]):j,button_label:null!==w&&void 0!==w?w:"",button_url:null!==O&&void 0!==O?O:""},onboarding_email_message:Cv(m)?(0,a.t)([Ev,"onboarding_email.message_default"]):m},isLoading:o}),F=R.defaultValues,B=R.isLoading,U=function(){var e=(0,v.wh)(),t=e.isLoading,r=e.currentCommunity,n=(null!==r&&void 0!==r?r:{}).name,i=vn.$.getCustomInvitationEmail,o=(0,f.useQuery)(Nv,i),s=o.data,l=o.isLoading,c=null!==s&&void 0!==s?s:{},u=c.email,d=c.body,m=c.for_existing_circle_users,p=c.for_existing_circle_users_body,h=null!==u&&void 0!==u?u:{},b=h.enabled,y=h.subject,g=null!==m&&void 0!==m?m:{},x=g.enabled,_=g.subject;return{isLoading:l||t,defaultValues:{custom_invitation_email:{enabled:b,subject:(0,fn.isEmpty)(y)?(0,a.t)([Tv,"custom_invitation_email.subject_default"],{community:n}):y},custom_invitation_email_body:Cv(d)?(0,a.t)([Tv,"custom_invitation_email.body_default"]):d,custom_invitation_email_for_existing_circle_users:{enabled:x,subject:(0,fn.isEmpty)(_)?(0,a.t)([Tv,"custom_invitation_email_for_existing_circle_users.subject_default"],{community:n}):_},custom_invitation_email_for_existing_circle_users_body:Cv(p)?(0,a.t)([Tv,"custom_invitation_email_for_existing_circle_users.body_default"]):p}}}(),z=U.defaultValues,V=U.isLoading;return{isLoading:B||V,isSaving:A||D,defaultValues:Dv(Dv({},F),z),handleSubmit:M}},Bv=function(){return(0,c.jsxs)(An,{children:[(0,c.jsx)(yn,{translationRoot:"settings.onboarding",name:"custom_invitation_email.subject",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(Tn,{name:"custom_invitation_email_body"})]})},Uv=function(){return(0,c.jsxs)(An,{children:[(0,c.jsx)(yn,{translationRoot:"settings.onboarding",name:"custom_invitation_email_for_existing_circle_users.subject",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(Tn,{name:"custom_invitation_email_for_existing_circle_users_body"})]})},zv="settings.onboarding",Vv=function(){return(0,c.jsxs)(An,{children:[(0,c.jsx)(yn,{translationRoot:zv,name:"onboarding_email.subject",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(Tn,{name:"onboarding_email_message"}),(0,c.jsx)(yn,{translationRoot:zv,name:"onboarding_email.button_label",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(yn,{translationRoot:zv,name:"onboarding_email.button_url",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})})]})},Zv="settings.onboarding",Hv=function(e){var t=e.title,r=e.body,n=e.buttonText,i=e.isOpen,o=e.onClose;return(0,c.jsxs)(ie.u_,{isOpen:i,onClose:o,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",children:(0,fn.isEmpty)(t)?(0,a.t)([Zv,"onboarding_popup.title_default"]):t}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:o})})]}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsx)(tn.Z,{html:Cv(r)?(0,a.t)([Zv,"onboarding_popup.description_default"]):r})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)(l.zx,{variant:"primary",onClick:fn.noop,large:!0,children:(0,fn.isEmpty)(n)?(0,a.t)([Zv,"onboarding_popup.button_label_default"]):n})})]})]})};function qv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wv="settings.onboarding",Qv=function(){var e=qv((0,n.useState)(!1),2),t=e[0],r=e[1],i=(0,pr.Gc)().watch,o=i("onboarding_popup.title"),s=i("onboarding_popup_description"),u=i("onboarding_popup.button_label");return(0,c.jsxs)(An,{children:[(0,c.jsx)("div",{className:"flex items-center justify-end",children:(0,c.jsx)(l.zx,{variant:"circle-text",type:"button",onClick:function(){return r(!0)},children:(0,a.t)([Wv,"preview"])})}),(0,c.jsx)(yn,{translationRoot:Wv,name:"onboarding_popup.title",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(Tn,{name:"onboarding_popup_description"}),(0,c.jsx)(yn,{translationRoot:Wv,name:"onboarding_popup.button_label",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(yn,{translationRoot:Wv,name:"onboarding_popup.button_url",className:"!py-0",hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(Hv,{title:o,body:s,buttonText:u,isOpen:t,onClose:function(){return r(!1)}})]})};function Kv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $v="settings.onboarding",Yv=function(){var e=Kv((0,(0,pr.Gc)().getValues)(["custom_invitation_email.enabled","custom_invitation_email_for_existing_circle_users.enabled","onboarding_popup.enabled","onboarding_email.enabled"]),4),t=e[0],r=e[1],i=e[2],o=e[3];return(0,c.jsxs)("div",{className:J()("form-section","!pt-0"),children:[(0,c.jsx)(yn,{name:"custom_invitation_email.enabled",translationRoot:$v,childrenWrapper:n.Fragment,isHorizontal:!0,className:"!pt-0",children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"custom_invitation_email.enabled",variant:"small"})}),t&&(0,c.jsx)(Bv,{}),(0,c.jsx)(yn,{name:"custom_invitation_email_for_existing_circle_users.enabled",translationRoot:$v,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"custom_invitation_email_for_existing_circle_users.enabled",variant:"small"})}),r&&(0,c.jsx)(Uv,{}),(0,c.jsx)(yn,{name:"onboarding_popup.enabled",translationRoot:$v,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"onboarding_popup.enabled",variant:"small"})}),i&&(0,c.jsx)(Qv,{}),(0,c.jsx)(yn,{name:"onboarding_email.enabled",translationRoot:$v,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"onboarding_email.enabled",variant:"small"})}),o&&(0,c.jsx)(Vv,{})]})},Xv=Kp.Ry({onboarding_email:Kp.Ry().shape({button_url:Kp.Z_().url((0,a.t)("settings.onboarding.invalid_url_format"))}),onboarding_popup:Kp.Ry().shape({button_url:Kp.Z_().url((0,a.t)("settings.onboarding.invalid_url_format"))})}),eg=function(){var e=Fv(),t=e.isLoading,r=e.isSaving,n=e.handleSubmit,i=e.defaultValues;return t?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(l.l0,{onSubmit:function(e){return n(e)},defaultValues:i,validationSchema:Xv,children:[(0,c.jsx)(Yv,{}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:r,large:!0,children:r?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})},tg=function(){return(0,c.jsxs)(wv,{children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)(["settings.onboarding","tabs.customize.title"])}),(0,c.jsx)(eg,{})]})},rg=function(){return(0,c.jsx)(wv,{children:(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)(["settings.onboarding","tabs.workflows.title"])})})})};function ng(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ig(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ig(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var og="settings.onboarding",ag=[{id:"customize",title:(0,a.t)([og,"tabs.customize.title"])},{id:"access",title:(0,a.t)([og,"tabs.access.title"])}],sg=function(){var e=(0,dr.TH)(),t=(0,dr.k6)(),r=ng((0,n.useState)(0),2),i=r[0],o=r[1],a=new URLSearchParams(e.search).get("tab");(0,n.useEffect)((function(){var e,t=null!==(e=ag.findIndex((function(e){return e.id===a})))&&void 0!==e?e:0;o(t)}),[a]);return(0,c.jsxs)(Uo.O.Group,{selectedIndex:i,onChange:function(e){t.push("?tab=".concat(ag[e].id))},className:J()("bg-primary flex flex-col","lg:max-h-[calc(100vh-7rem)]"),children:[(0,c.jsx)(Uo.O.List,{className:"flex-none border-b px-6 lg:sticky",children:ag.map((function(e){var t=e.id,r=e.title;return(0,c.jsx)(Uo.O,{children:r},t)}))}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(tg,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(kv,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(rg,{})})]})]})},lg=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.onboarding.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"onboarding"},hasBorder:!1}),(0,c.jsx)(sg,{})]})},cg=function(){return(0,c.jsxs)("div",{className:"pt-[30vh] text-center",children:[(0,c.jsx)(l.ZT.TitleLg,{weight:"bold",children:(0,a.t)("export_paywall_csv.list.empty_state.title")}),(0,c.jsx)(l.ZT.BodyLg,{children:(0,a.t)("export_paywall_csv.list.empty_state.subtitle")})]})},ug=function(){return(0,c.jsx)(zc,{asyncTaskTypes:["AsyncTasks::ExportCsv::Paywalls::CommunityMemberCharge","AsyncTasks::ExportCsv::Paywalls::CommunityMemberSubscription"],columnsVariant:"PaywallBulkLogs",emptyStateComponentRender:cg})},dg=r(73839),fg="settings.paywalls_admin_dashboard.filters.empty_page",mg=function(){var e=(0,a.t)([fg,"title"]),t=(0,a.t)([fg,"subtitle"]);return(0,c.jsx)("div",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,c.jsxs)("div",{className:"bg-primary border-primary border p-6 text-center lg:rounded-lg lg:p-36 ",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"bold",children:e}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)(y.Z.BodyMd,{color:"text-default",children:t})})]})})},pg=r(16221),hg=r(66674);function bg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bg(Object(r),!0).forEach((function(t){vg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gg=function(e){var t=e.chargesData,r=e.activeFilterTab,i=e.refetchAllCharges,o=function(e){var t=e.chargesData;(0,n.useEffect)((function(){var e;0===(null===t||void 0===t||null===(e=t.charges)||void 0===e?void 0:e.length)&&(null===t||void 0===t?void 0:t.totalCharges)>0&&t.setPage(1)}));var r=(0,pg.a)(),i=function(e){var t=e.cell,n=t.column.id,i=t.row.original;"customer"!==n&&r.show({charge:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){t.setPage(e)},columnsToRender:hg.sK.map((function(e){return yg(yg({},e),{},{onClick:i})}))}}({chargesData:t}),a=o.onClickPagination,s=o.columnsToRender;return t.hasFilters&&0===t.totalCharges&&!t.isLoadingCharges?(0,c.jsx)(mg,{}):(0,c.jsx)(dg.OA,{shouldOpenAdminMemberEdit:!0,refetchAllCharges:i,children:(0,c.jsx)(dg.uo,{columnsToRender:s,chargesData:t,onClickPagination:a,className:"px-6"},r)})},xg=r(10159),_g=function(e){var t=e.totalChargesCount,r=(0,xg.Q)().show,n=t<=0;return(0,c.jsx)($e.z,{variant:"circle",onClick:function(){r({relation:"charges"})},type:"button",disabled:n,children:(0,a.t)("export_paywall_csv.modal.export_cta")})},jg=function(e){var t=e.totalChargesCount;return t<=0?null:(0,c.jsx)(Q.w.Headline,{className:"flex flex-row",children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.paywalls_admin_dashboard.charges.count",{count:(0,Zo.V)(t)})})})},wg=r(82887),Og=function(){var e,t=(0,l.pm)().error,r={isChargeStatsLoading:(e=(0,f.useQuery)(S.av.admin.paywalls.charges.stats.index())).isLoading,chargeStats:e.data,chargeStatsError:e.error},i=r.isChargeStatsLoading,o=r.chargeStats,s=r.chargeStatsError;if((0,n.useEffect)((,[s]),!i&&s)return null;var u=[{label:(0,a.t)("settings.paywall_charge_stats.total_revenue.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.total_revenue.tooltip"),value:null===o||void 0===o?void 0:o.total_revenue_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.total_refunded.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.total_refunded.tooltip"),value:null===o||void 0===o?void 0:o.total_refunded_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.sales_taxes.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.sales_taxes.tooltip"),value:null===o||void 0===o?void 0:o.sales_taxes_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.affiliate_earnings.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.affiliate_earnings.tooltip"),value:null===o||void 0===o?void 0:o.affiliate_earnings_as_currency}];return(0,c.jsx)(c.Fragment,{children:i?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)("div",{className:"my-3 grid grid-cols-1 px-6 md:grid-cols-4 md:gap-6",children:u.map((function(e){return(0,c.jsx)(wg.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},Pg=r(95813),Sg=r(59933),kg=r(27296);function Cg(e){return function(e){if(Array.isArray(e))return Ag(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Tg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ng(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Tg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tg(e,t){if(e){if("string"===typeof e)return Ag(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ag(e,t):void 0}}function Ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eg=function(e){var t=e.filters,r=e.defaultFilterItems,i=(0,To.Xt)(),o=i.queryParams,a=i.removeQueryParams,s=(0,fn.flatten)(t.map((function(e){return e.filterKeys}))),l=Ng((0,kg.$)((function(){var e=new Set(r);return t.forEach((function(t){Object.keys(o).includes(t.name)&&e.add(t.name),void 0!=t.value&&e.add(t.name)})),e})),2),c=l[0],u=l[1],d=u.add,f=u.remove,m=u.clear,p=(0,n.useMemo)((function(){var e,t=0,n=r);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(Object.prototype.hasOwnProperty.call(o,i))return!0;c.has(i)&&(t+=1)}}catch(a){n.e(a)}finally{n.f()}return c.size>t}),[c,o,r]),h=(0,n.useCallback)((function(e){var t=Cg(c);return t.length?{availableFilters:e.filter((),displayedFilters:e.filter(()}:{availableFilters:e,displayedFilters:[]}}),[c]);return{isClearFiltersShown:p,getSplitAndAvailableFilters:h,onClearFilters:function(){a(Cg(s)),m(),r.forEach(d)},onAddFilter:function(e){d(e)},onRemoveFilter:},Ig=["isClearFiltersShown","onClearFilters"];function Dg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dg(Object(r),!0).forEach((function(t){Mg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rg(e){return function(e){if(Array.isArray(e))return Fg(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Fg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fg(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bg(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ug=function(e){var t=e.defaultFilters,r=void 0===t?[]:t,n=e.customFilters,i=void 0===n?[]:n,o=e.defaultFilterItems,a=void 0===o?[]:o,s=e.className,l=e.showClearButton,u=void 0===l||l,d=e.label,f=Eg({filters:[].concat(Rg(r),Rg(i)),defaultFilterItems:a}),m=f.isClearFiltersShown,p=f.onClearFilters,h=Bg(f,Ig);return(0,c.jsxs)(Sg.I,{className:J()("w-full",s),children:[(0,c.jsx)(Pg.S,Lg({defaultFilters:r,customFilters:i,label:d},h)),u&&(0,c.jsx)(To.Cd,{isVisible:m,onClick:p})]})},zg=r(87228),Vg=function(e){var t=e.filterNames,r=e.customFilterNames,n=(0,zg.mN)(t,r).defaultFilters;return(0,c.jsx)(Ug,{label:(0,a.t)([zg.po,"add_filter"]),defaultFilterItems:t,defaultFilters:n})},Zg=r(75381);function Hg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gg,Wg=function(e){var t,r,i=e.perPage,o=void 0===i?10:i,a=e.page,s=e.setPage,l=e.searchKeyParams,c=void 0===l?"":l,u=e.filters,d=void 0===u?{}:u,m=e.orderParam,p=void 0===m?{created_at:"desc"}:m,h=e.enabled,b=void 0===h||h,y=Hg((0,n.useState)(p),2),v=y[0],g=y[1],x={filters:d,order:v,page:a,perPage:o,searchKey:c},_=Zg.W.index(x),j=(0,f.useQuery)({queryKey:["paywall-charges",{filters:d,order:v,page:a,perPage:o,searchKeyParams:c}],queryFn:_,enabled:b}),w=j.data,O=j.refetch,P=j.isLoading,S=j.remove;return{hasFilters:Object.keys(d).length>0,charges:null!==(t=null===w||void 0===w?void 0:w.records)&&void 0!==t?t:[],totalCharges:null!==(r=null===w||void 0===w?void 0:w.count)&&void 0!==r?r:0,refetchCharges:O,removeChargesFromCache:S,isLoadingCharges:P,order:v,setOrder:function(e){g(e),s(1)},perPage:o,page:a,setPage:s}},Qg=r(56874);function Kg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jg={ALL:(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.all"),PAID:(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.paid"),REFUNDED:(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.refunded"),FAILED:(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.failed")},$g=(Kg(Gg={},Jg.ALL,null),Kg(Gg,Jg.PAID,[Qg.Q_.PAID,Qg.Q_.PARTIAL_REFUNDED].join(",")),Kg(Gg,Jg.REFUNDED,Qg.Q_.REFUNDED),Kg(Gg,Jg.FAILED,Qg.Q_.FAILED),Gg);function Yg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ex=["community_member_name","community_member_email","community_member_id","charge_status","paywalls","amount","created_at","subscription_id"],tx=["currency","transaction_id","invoice_processor_id"],rx=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=e.setSearchKey,i=function(e,t,r){var n=Wg({filters:{display_status:$g[Jg.ALL]},perPage:1}),i=Wg({filters:{display_status:$g[Jg.PAID]},perPage:1}),o=Wg({filters:{display_status:$g[Jg.REFUNDED]},perPage:1}),a=Wg({filters:{display_status:$g[Jg.FAILED]},perPage:1}),s=[[Jg.ALL,n],[Jg.PAID,i],[Jg.REFUNDED,o],[Jg.FAILED,a]].map((function(e){var t=Yg(e,2);return{label:t[0],badge:{value:t[1].totalCharges}}})),l=(0,pr.Gc)().reset;return{tabOptions:s,changeTabAndResetForm:function(n){l({searchKey:""}),t(""),e(n),r()}}}(t,n,e.resetAllChargesToFirstPage),o=i.tabOptions,a=i.changeTabAndResetForm,s=o.findIndex((function(e){return e.label===r}));return(0,c.jsxs)("div",{className:"border-primary",children:[(0,c.jsx)(Uo.O.Group,{selectedIndex:s,children:(0,c.jsx)(Uo.O.List,{className:"border-primary border-b px-6 py-0",children:o.map((function(e){return(0,c.jsxs)(Uo.O,{onClick:function(){return a(e.label)},children:[e.label,(0,c.jsx)(Uo.O.Counter,{children:e.badge.value})]},e.value)}))})}),(0,c.jsx)(Vg,{setSearchKey:n,filterNames:ex,customFilterNames:tx})]})};function nx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ix(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nx(Object(r),!0).forEach((function(t){ox(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ox(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ax(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lx={created_at:"desc"},cx=function(){var e,t=function(){var e,t=(0,dr.k6)(),r=(0,rl.t)(),i=r.tab,o=void 0===i?Jg.ALL:i,a=r.search_key,s=void 0===a?"":a,l=r.page,c=void 0===l?1:l,u=r.status,d=ax((0,n.useState)((0,vr.EW)(c)),2),m=d[0],p=d[1],h=ax((0,n.useState)(null!==o&&void 0!==o?o:Jg.ALL),2),b=h[0],y=h[1],v=ax((0,n.useState)(s),2),g=v[0],x=v[1],_=function(e,t,r){return e===t?r:""},j=function(e,r){var n=(0,S.m_)(e,r);t.push("?".concat(n))},w=function(e){j("page",String(e)),p(e)};(0,n.useEffect)((function(){j("tab",b),u||j("status",$g[b])}),[]);var O=Wg({searchKeyParams:_(b,Jg.ALL,g),orderParam:lx,filters:(0,zg.oq)(ix({},r),zg.lO.charges),page:m,setPage:w,enabled:b===Jg.ALL}),P=Wg({searchKeyParams:_(b,Jg.PAID,g),orderParam:lx,filters:(0,zg.oq)(ix({},r),zg.lO.charges),page:m,setPage:w,enabled:b===Jg.PAID}),k=Wg({searchKeyParams:_(b,Jg.REFUNDED,g),orderParam:lx,filters:(0,zg.oq)(ix({display_status:$g[Jg.REFUNDED]},r),zg.lO.charges),page:m,setPage:w,enabled:b===Jg.REFUNDED}),C=Wg({searchKeyParams:_(b,Jg.FAILED,g),orderParam:lx,filters:(0,zg.oq)(ix({display_status:$g[Jg.FAILED]},r),zg.lO.charges),page:m,setPage:w,enabled:b===Jg.FAILED}),N=(0,f.useQueryClient)();return{chargesDataByTab:(ox(e={},Jg.ALL,O),ox(e,Jg.PAID,P),ox(e,Jg.REFUNDED,k),ox(e,Jg.FAILED,C),e),activeFilterTab:b,setActiveFilterTab:function(e){y(e),j("tab",e),j("status",$g[e]),x("")},defaultValues:{searchKey:g},setSearchKey:x,refetchAllCharges:resetAllChargesToFirstPage:function(){w(1),O.setOrder(lx),P.setOrder(lx),k.setOrder(lx),C.setOrder(lx)},showStats:function(){var e=r;return delete e.status,delete e.page,delete e.tab,Object.keys(e).length<=0}}}(),r=t.chargesDataByTab,i=t.activeFilterTab,o=t.setActiveFilterTab,s=t.setSearchKey,u=t.defaultValues,d=t.refetchAllCharges,m=t.resetAllChargesToFirstPage,p=t.showStats,h=null===(e=r[Jg.ALL])||void 0===e?void 0:e.totalCharges,y=(0,v.wh)().currentCommunity,g=null===y||void 0===y?void 0:y.payment_processor;return(0,c.jsxs)(l.l0,{onSubmit:function(e){var t=e.searchKey;return s(t)},defaultValues:u,children:[(0,c.jsx)(b.b,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("settings.paywalls_admin_dashboard.charges.title")}),rightContent:(0,c.jsx)(_g,{totalChargesCount:h}),filters:(0,c.jsx)(rx,{setActiveFilterTab:o,activeFilterTab:i,setSearchKey:s,resetAllChargesToFirstPage:m}),hasBorder:!1,headline:(0,c.jsx)(jg,{totalChargesCount:h})}),g&&p()&&(0,c.jsx)(Og,{}),(0,c.jsx)(gg,{chargesData:r[i],refetchAllCharges:d})]})},ux=new f.QueryClient(p.Vr),dx=function(){return(0,c.jsx)(l.VW,{children:(0,c.jsx)(f.QueryClientProvider,{client:ux,children:(0,c.jsx)(cx,{})})})},fx=function(){var e=(0,a.t)("settings.paywalls_admin_dashboard.charges.title");return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(A.S,{title:e,bodyClassNames:"view-plans"}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(dx,{})]})},mx=r(51548),px=function(e){var t=e.paywallGroup,r=void 0===t?null:t,n=e.refetchPaywallGroups,i=void 0===n?null:n,o=(0,ne.yT)(),a=function(e){var t=e.modal,r=e.refetchPaywallGroups,n=e.paywallGroup,i=(0,mx.W)({closeModal:t.hide,refetchPaywallGroups:r}),o=i.createMutation,a=i.updateMutation,s=!!n;return{getFormDefaults:function(){var e;return{name:(null===n||void 0===n?void 0:n.name)||"",id:(null===n||void 0===n?void 0:n.id)||"",currency_id:(null===n||void 0===n||null===(e=n.currency)||void 0===e?void 0:e.id)||""}},editionMode:s,mutation:s?a:o}}({modal:o,refetchPaywallGroups:i,paywallGroup:r}),u=a.getFormDefaults,d=a.mutation,f=a.editionMode;return(0,c.jsx)(pt.u,{show:o.visible,title:f?s().t("settings.paywall_groups.headings.edit"):s().t("settings.paywall_groups.headings.create"),onClose:o.hide,children:(0,c.jsx)(l.l0,{onSubmit:d.mutate,defaultValues:u(),className:"paywall-group-form",children:function(e){var t,n=e.formState.isSubmitting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.l0.Item,{name:"name",translationRoot:"settings.paywall_groups.fields",hideBorder:!0,hideDescription:!0,fullWidth:!1,rules:{required:!0,maxLength:255},hidePlaceholder:!0,children:(0,c.jsx)(l.l0.Input,{})}),(!r||(null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.requires_currency))&&(0,c.jsx)(gr.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_groups.fields",formItemRules:{required:s().t("settings.paywall_groups.fields.currency_id_is_required")},formItemTooltipText:s().t("settings.paywall_groups.fields.currency_id_tooltip"),disabled:r&&!r.policies.can_change_currency}),(0,c.jsx)(l.zx,{type:"submit",variant:"circle",disabled:n||d.isLoading,className:"paywall-group-form__submit-button",children:f?s().t("settings.paywall_groups.actions.update"):s().t("settings.paywall_groups.actions.create")})]})}})})},hx=ne.uc.create((function(e){var t=e.paywallGroup,r=e.refetchPaywallGroups;return(0,c.jsx)(px,{paywallGroup:t,refetchPaywallGroups:r})})),bx=function(){return(0,ne.yT)(hx)},yx=function(){return(0,c.jsxs)("div",{className:"paywall-groups-list__info table-wrapper",children:[(0,c.jsx)("div",{children:(0,c.jsx)(bt.JO,{type:"question-mark",className:"icon--sm paywall-groups-list__info__icon"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{children:s().t("settings.paywall_groups.headings.what_is")}),(0,c.jsxs)("p",{className:"paywall-groups-list__info__explanation text-dark",children:[s().t("settings.paywall_groups.alerts.info.what_is"),"\xa0",(0,c.jsx)("a",{href:"https://community.circle.so/c/paywalls/",target:"_blank",rel:"noreferrer",children:s().t("settings.paywall_groups.actions.learn_more")})]})]})]})},vx=[{title:s().t("settings.paywall_groups.table.name"),dataIndex:"name",key:"name"},{title:s().t("settings.paywall_groups.table.paywalls"),dataIndex:"paywalls",key:"paywalls"},{title:" ",dataIndex:"actions",key:"actions"}],gx=function(e){var t=e.shouldHideHeader,r=void 0!==t&&t,n=bx(),i=(0,(0,mx.W)({}).useListPaywallGroups)(),o=i.data,s=i.isLoading,u=i.refetch,d=function(e){var t=e.paywallGroup,r=void 0===t?null:t;return n.show({refetchPaywallGroups:u,paywallGroup:r})},f=null===o||void 0===o?void 0:o.map((function(e){return{key:e.id,name:(0,c.jsx)("div",{className:"whitespace-normal",children:e.name}),paywalls:(0,c.jsx)("div",{className:"whitespace-normal",children:e.paywalls_summary_text}),actions:(0,c.jsx)("button",{type:"button",onClick:function(){return d({paywallGroup:e})},className:"paywall-groups-list__link",children:(0,a.t)("settings.paywall_groups.actions.edit")})}}));return(0,c.jsxs)("div",{className:"paywall-groups-list",children:[!r&&(0,c.jsx)("div",{className:"table-wrapper",children:(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("h3",{children:(0,a.t)("settings.paywall_groups.title")}),(0,c.jsx)(l.zx,{variant:"circle",onClick:d,children:(0,a.t)("settings.paywall_groups.actions.create_group")})]})}),(0,c.jsx)(yx,{}),(0,c.jsx)("div",{children:s?(0,c.jsx)(l.aN,{}):(null===o||void 0===o?void 0:o.length)>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(kc.s,{className:"!px-0",children:(0,c.jsx)(kc.s.Title,{children:(0,a.t)("settings.paywall_groups.count",{count:o.length})})}),(0,c.jsx)(tt.w,{columns:vx,dataSource:f||[],hasStickyHeader:!0,headerClassName:"top-[63px]"})]})})]})},xx=function(){var e=bx(),t=(0,(0,mx.W)({}).useListPaywallGroups)().refetch;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.paywall_groups.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-paywall-groups"},rightContent:(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){return e.show({refetchPaywallGroups:t})},children:I18n.t("settings.paywall_groups.actions.create_group")})}),(0,c.jsx)($,{maxWidth:"none",children:(0,c.jsx)(gx,{shouldHideHeader:!0})})]})},_x=function(e){var t=e.totalSubscriptionsCount,r=(0,xg.Q)().show,n=t<=0;return(0,c.jsx)($e.z,{variant:"circle",onClick:function(){r({relation:"subscriptions"})},type:"button",disabled:n,children:(0,a.t)("export_paywall_csv.modal.export_cta")})},jx=function(e){var t=e.totalSubscriptionsCount;return t<=0?null:(0,c.jsx)(Q.w.Headline,{className:"flex flex-row",children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.paywalls_admin_dashboard.subscriptions.count",{count:(0,Zo.V)(t)})})})},wx=function(){var e,t=(0,l.pm)().error,r={isSubscriptionStatsLoading:(e=(0,f.useQuery)(S.av.admin.paywalls.subscriptions.stats.index())).isLoading,subscriptionStats:e.data,subscriptionStatsError:e.error},i=r.isSubscriptionStatsLoading,o=r.subscriptionStats,s=r.subscriptionStatsError;if((0,n.useEffect)((function(){s&&t(s.message)}),[s]),!i&&s)return null;var u=[{label:(0,a.t)("settings.paywall_subscription_stats.mrr.label"),tooltip:(0,a.t)("settings.paywall_subscription_stats.mrr.tooltip"),value:null===o||void 0===o?void 0:o.mrr_as_currency},{label:(0,a.t)("settings.paywall_subscription_stats.arr.label"),tooltip:(0,a.t)("settings.paywall_subscription_stats.arr.tooltip"),value:null===o||void 0===o?void 0:o.arr_as_currency},{label:(0,a.t)("settings.paywall_subscription_stats.avg_mrr_per_member.label"),tooltip:(0,a.t)("settings.paywall_subscription_stats.avg_mrr_per_member.tooltip"),value:null===o||void 0===o?void 0:o.avg_mrr_per_member_as_currency},{label:(0,a.t)("settings.paywall_subscription_stats.churn_rate.label"),tooltip:(0,a.t)("settings.paywall_subscription_stats.churn_rate.tooltip"),value:null===o||void 0===o?void 0:o.churn_rate_as_percentage}];return(0,c.jsx)(c.Fragment,{children:i?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)("div",{className:"my-3 grid grid-cols-1 px-6 md:grid-cols-4 md:gap-6",children:u.map((function(e){return(0,c.jsx)(wg.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},Ox=r(17881),Px=r(9491),Sx=r(52277);function kx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kx(Object(r),!0).forEach((function(t){Nx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tx=function(e){var t=e.activeFilterTab,r=e.subscriptionsDataByTab,i=e.refetchAllSubscriptions,o=r[t],a=function(e){var t=e.subscriptionData;(0,n.useEffect)((function(){var e;0===(null===t||void 0===t||null===(e=t.subscriptions)||void 0===e?void 0:e.length)&&(null===t||void 0===t?void 0:t.totalSubscriptions)>0&&(null===t||void 0===t||t.setPage(1),null===t||void 0===t||t.refetchSubscriptions())}));var r=(0,Px.X)(),i=function(e){var t=e.cell,n=t.column.id,i=t.row.original;"customer"!==n&&r.show({subscription:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){null===t||void 0===t||t.setPage(e),null===t||void 0===t||t.refetchSubscriptions()},columnsToRender:Sx.sK.map((function(e){return Cx(Cx({},e),{},{onClick:i})}))}}({subscriptionData:o}),s=a.onClickPagination,l=a.columnsToRender;return o.hasFilters&&0===o.totalSubscriptions&&!o.isLoadingSubscriptions?(0,c.jsx)(mg,{}):(0,c.jsx)(Ox.nN,{shouldOpenAdminMemberEdit:!0,refetchAllSubscriptions:i,children:(0,c.jsx)(Ox.sD,{columnsToRender:l,subscriptionData:o,onClickPagination:s,className:"px-6"},t)})},Ax=r(35144),Ex=r(99815),Ix={ALL:(0,a.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.all"),ACTIVE:(0,a.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.active"),CANCELED:(0,a.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.canceled")};function Dx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mx,Rx=["community_member_name","community_member_email","community_member_id","subscription_status","paywalls","start_date","subscription_id"],Fx=["total_amount_paid","currency"],Bx=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=e.setSearchKey,i=function(e,t,r){var n=(0,Ex.p)({perPage:1}),i=(0,Ex.p)({filters:{status:Ax.vC.join(",")},perPage:1}),o=(0,Ex.p)({filters:{status:Ax.Q_.CANCELED},perPage:1}),a=[[Ix.ALL,n],[Ix.ACTIVE,i],[Ix.CANCELED,o]].map((function(e){var t=Dx(e,2);return{label:t[0],badge:{value:t[1].totalSubscriptions}}})),s=(0,pr.Gc)().reset;return{tabOptions:a,changeTabAndResetSearchForm:function(n){s({searchKey:""}),t(""),r(),e(n)}}}(t,n,e.resetAllSubscriptionToFirstPage),o=i.tabOptions,a=i.changeTabAndResetSearchForm,s=o.findIndex((function(e){return e.label===r}));return(0,c.jsxs)("div",{className:"border-primary",children:[(0,c.jsx)(Uo.O.Group,{selectedIndex:s,children:(0,c.jsx)(Uo.O.List,{className:"border-primary border-b px-6 py-0",children:o.map((function(e){return(0,c.jsxs)(Uo.O,{onClick:function(){return a(e.label)},children:[e.label,(0,c.jsx)(Uo.O.Counter,{children:e.badge.value})]},e.value)}))})}),(0,c.jsx)(Vg,{setSearchKey:n,filterNames:Rx,customFilterNames:Fx})]})};function Ux(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ux(Object(r),!0).forEach((function(t){Hx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ux(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qx={created_at:"desc"},Gx=(Hx(Mx={},Ix.ALL,null),Hx(Mx,Ix.ACTIVE,Ax.vC.join(",")),Hx(Mx,Ix.CANCELED,Ax.Q_.CANCELED),Mx),Wx=function(){var e,t=function(){var e,t=(0,dr.k6)(),r=(0,rl.t)(),i=r.tab,o=void 0===i?Ix.ALL:i,a=r.search_key,s=void 0===a?"":a,l=r.page,c=void 0===l?1:l,u=r.status,d=Vx((0,n.useState)(o),2),m=d[0],p=d[1],h=Vx((0,n.useState)(s),2),b=h[0],y=h[1],v=Vx((0,n.useState)((0,vr.EW)(c)),2),g=v[0],x=v[1],_=function(e,r){var n=(0,S.m_)(e,r);t.push("?".concat(n))},j=function(e){_("page",String(e)),x(e)},w=function(e,t,r){return e===t?r:""};(0,n.useEffect)((function(){_("tab",m),u||_("status",Gx[m])}),[]);var O=(0,Ex.p)({pageParam:g,perPage:10,orderParam:qx,searchKeyParams:w(m,Ix.ALL,b),filters:(0,zg.oq)(r,zg.lO.subscriptions),enabled:m===Ix.ALL,page:g,setPage:j}),P=(0,Ex.p)({pageParam:g,perPage:10,orderParam:qx,searchKeyParams:w(m,Ix.ACTIVE,b),filters:(0,zg.oq)(zx({},r),zg.lO.subscriptions),enabled:m===Ix.ACTIVE,page:g,setPage:j}),k=(0,Ex.p)({pageParam:g,perPage:10,orderParam:qx,searchKeyParams:w(m,Ix.CANCELED,b),filters:(0,zg.oq)(zx({},r),zg.lO.subscriptions),enabled:m===Ix.CANCELED,page:g,setPage:j}),C=(0,f.useQueryClient)();return{subscriptionsDataByTab:(Hx(e={},Ix.ALL,O),Hx(e,Ix.ACTIVE,P),Hx(e,Ix.CANCELED,k),e),resetAllSubscriptionToFirstPage:function(){j(1),O.setOrder(qx),P.setOrder(qx),k.setOrder(qx)},refetchAllSubscriptions:activeFilterTab:m,setActiveFilterTab:function(e){p(e),_("status",Gx[e])},defaultValues:{searchKey:b},setSearchKey:y,onSubmit:function(e){var t=e.searchKey;y(void 0===t?"":t)},showStats:function(){var e=r;return delete e.status,delete e.page,delete e.tab,Object.keys(e).length<=0}}}(),r=t.subscriptionsDataByTab,i=t.resetAllSubscriptionToFirstPage,o=t.activeFilterTab,s=t.setActiveFilterTab,u=t.defaultValues,d=t.refetchAllSubscriptions,m=t.setSearchKey,p=t.onSubmit,h=t.showStats,y=(0,v.wh)().currentCommunity,g=null===y||void 0===y?void 0:y.payment_processor,x=null===(e=r[o])||void 0===e?void 0:e.totalSubscriptions;return(0,c.jsxs)(l.l0,{onSubmit:p,defaultValues:u,children:[(0,c.jsx)(b.b,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("settings.paywalls_admin_dashboard.subscriptions.title")}),rightContent:(0,c.jsx)(_x,{totalSubscriptionsCount:x}),filters:(0,c.jsx)(Bx,{setActiveFilterTab:s,activeFilterTab:o,subscriptionsDataByTab:r,setSearchKey:m,resetAllSubscriptionToFirstPage:i}),hasBorder:!1,headline:(0,c.jsx)(jx,{totalSubscriptionsCount:x})}),g&&h()&&(0,c.jsx)(wx,{}),(0,c.jsx)(Tx,{activeFilterTab:o,subscriptionsDataByTab:r,refetchAllSubscriptions:d})]})},Qx=new f.QueryClient(p.Vr),Kx=function(){return(0,c.jsx)(l.VW,{children:(0,c.jsx)(f.QueryClientProvider,{client:Qx,children:(0,c.jsx)(Wx,{})})})},Jx=function(){var e=(0,a.t)("settings.paywalls_admin_dashboard.subscriptions.title");return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(A.S,{title:e,bodyClassNames:"view-plans"}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(Kx,{})]})},$x=r(15523),Yx=function(e){var t=e.className,r=e.children,n=e.dataTestId;return(0,c.jsx)($x.W,{className:J()(t,"border-primary bg-primary mt-8 rounded-lg border px-8 py-6"),maxWidth:"md",children:(0,c.jsx)("div",{className:"flex flex-col","data-testid":n,children:r})})},Xx="enabled",e_="disabled",t_={inclusive:"inclusive",exclusive:"exclusive"},r_="https://stripe.com/tax#pricing",n_={compliance:"https://stripe.com/docs/tax/compliance",monitoring:"https://site-admin.stripe.com/docs/tax/monitoring",registering:"https://stripe.com/docs/tax/registering",reports:"https://stripe.com/docs/tax/reports"},i_={connectedAccount:{tax:function(e){return"https://dashboard.stripe.com/".concat(e,"/tax")},settings:{tax:}},o_=function(e){var t=e.href,r=e.label;return(0,c.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,c.jsx)(bt.JO,{type:"16-external-link",size:16}),(0,c.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:r})})]})},a_=[{labelKey:"understanding_sales_tax_compliance",href:n_.compliance},{labelKey:"monitoring_tax_thresholds",href:n_.monitoring},{labelKey:"registering_for_sales_tax_and_vat_and_gst",href:n_.registering},{labelKey:"tax_reporting",href:n_.reports},{labelKey:"how_much_does_stripe_tax_cost",href:r_}],s_=function(){return(0,c.jsxs)(Yx,{children:[(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:s().t("settings.paywall_taxes.faqs.title")}),(0,c.jsx)("div",{className:"flex flex-col gap-y-3 pt-3",children:a_.map((function(e){var t=e.labelKey,r=e.href;return(0,c.jsx)(o_,{label:s().t("settings.paywall_taxes.faqs.links.".concat(t)),href:r},t)}))})]})},l_=function(e){var t=e.className,r=e.label,n=e.variant,i=e.dataTestId;return(0,c.jsx)("div",{className:J()(t,"-ml-1 mb-2"),"data-testid":i,children:(0,c.jsx)(l.Ct,{variant:"enabled"===n?"success":"default",children:(0,c.jsx)(l.ZT.LabelXs,{color:"enabled"===n?"text-green-600":"text-secondary",weight:"semibold",children:r})})})},c_=function(){return(0,Er.UT)(S.av.admin.paywalls.taxSettings.show())},u_=function(e){return(0,Er.gN)(S.av.admin.paywalls.taxSettings.update(),{tax_settings:e})},d_=(0,n.createContext)({taxSettings:{processor_status:"disabled",platform_status:"disabled"}});d_.displayName="TaxSettingsContext";function f_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p_=function(){var e=(0,l.pm)().error,t=(0,n.useContext)(d_).taxSettings,r=f_((0,n.useState)(null===t||void 0===t?void 0:t.processor_status),2),i=r[0],o=r[1],a=f_((0,n.useState)(null===t||void 0===t?void 0:t.platform_status),2),s=a[0],c=a[1],u=f_((0,n.useState)(null===t||void 0===t?void 0:t.default_tax_behavior),2),d=u[0],m=u[1],p=(0,f.useMutation)((function(e){return u_(e)}),{onSuccess:function(e){!e)},onError:),h=p.mutate;return{processorStatus:i,platformStatus:s,defaultTaxBehavior:d,isChangingTaxSettings:p.isLoading,handlePlatformStatusChange:function(e){h({platform_status:e})},handleDefaultTaxBehaviorChange:};function h_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y_=function(){var e=p_(),t=e.processorStatus,r=e.platformStatus,i=e.defaultTaxBehavior,o=e.isChangingTaxSettings,a=e.handlePlatformStatusChange,u=e.handleDefaultTaxBehaviorChange,d=h_((0,n.useState)(i),2),f=d[0],m=d[1];if(t===e_)return null;var p=o||f===i,h=o;return(0,c.jsxs)(Yx,{dataTestId:"tax-settings-card",children:[(0,c.jsx)(l_,{variant:r,label:s().t("settings.paywall_taxes.platform_config.badge_".concat(r)),dataTestId:"tax-collection-badge"}),(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:s().t("settings.paywall_taxes.platform_config.title")}),(0,c.jsxs)("div",{className:"mt-2 flex flex-col gap-y-6",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsx)(l.ZT.BodyMd,{as:"div",children:(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:s().t("settings.paywall_taxes.platform_config.body_part1")}})}),(0,c.jsx)(l.ZT.BodyMd,{children:s().t("settings.paywall_taxes.platform_config.body_part2")})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsx)("div",{className:"flex flex-row items-center",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:s().t("settings.paywall_taxes.platform_config.tax_behavior_label")})}),(0,c.jsx)(l.pg,{legend:"Default Tax Behavior Radio Group",verticalSpacing:"tight",children:Object.values(t_).map((function(e){return(0,c.jsx)(l.Y8,{id:"default_tax_behavior_".concat(e),name:"default_tax_behavior",label:s().t("settings.paywall_taxes.platform_config.tax_behavior_option_".concat(e)),value:e,checked:f===e,onChange:function(){return m(e)}},e)}))})]}),(0,c.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,c.jsx)(l.zx,{variant:"secondary",onClick:disabled:p,children:(0,c.jsx)(l.ZT.LabelMd,{color:"text-primary",weight:"medium",children:s().t("settings.paywall_taxes.platform_config.button_tax_behavior")})}),(0,c.jsx)(l.zx,{variant:r===Xx?"danger":"circle",onClick:disabled:h,children:(0,c.jsx)(l.ZT.LabelMd,{color:"text-primary",weight:"medium",children:s().t("settings.paywall_taxes.platform_config.button_platform_status_".concat(r))})})]})]})]})},v_=function(){var e=(0,v.wh)().currentCommunity;return p_().processorStatus===e_?null:(0,c.jsxs)(Yx,{children:[(0,c.jsx)(l_,{variant:"enabled",label:s().t("settings.paywall_taxes.processor_config.badge")}),(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:s().t("settings.paywall_taxes.processor_config.title")}),(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)(l.ZT.BodyMd,{as:"div",children:(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:s().t("settings.paywall_taxes.processor_config.body",{stripe_account_id:e.payment_processor.id})}})})})]})},g_=r(6809),x_=r(62223),__=function(e){var t=e.isOpen,r=e.onClose;return(0,c.jsxs)(ie.u_,{title:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.title"),isOpen:t,onClose:r,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"lg",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.title")}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:r})})]}),(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)("div",{className:"mb-1 mt-4",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.subtitle")})}),(0,c.jsxs)("ul",{className:"flex list-disc flex-col gap-y-3 pt-3",children:[(0,c.jsx)("li",{children:(0,c.jsx)(l.ZT.BodyMd,{as:"span",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.bullet1")})}),(0,c.jsxs)("li",{children:[(0,c.jsx)(l.ZT.BodyMd,{as:"span",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.bullet2")}),(0,c.jsxs)("ul",{className:"list-none pl-4",children:[(0,c.jsx)("li",{children:(0,c.jsx)(l.ZT.BodyMd,{as:"span",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.bullet2a")})}),(0,c.jsx)("li",{children:(0,c.jsx)(l.ZT.BodyMd,{as:"span",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.bullet2b")})}),(0,c.jsx)("li",{children:(0,c.jsx)(l.ZT.BodyMd,{as:"span",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.bullet2c")})})]})]}),(0,c.jsx)("li",{children:(0,c.jsx)(l.ZT.BodyMd,{as:"span",children:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.bullet3")})})]}),(0,c.jsx)("div",{className:"border-secondary mt-4 rounded-lg border drop-shadow-md",children:(0,c.jsx)("img",{src:x_,alt:(0,a.t)("settings.paywall_taxes.processor_setup.info_modal.image_alt")})})]})]})]})};function j_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O_=function(){var e=(0,v.wh)().currentCommunity,t=p_().processorStatus,r=j_((0,n.useState)(!1),2),i=r[0],o=r[1];if(t===Xx)return null;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(__,{isOpen:i,onClose:function(){return o(!1)}}),(0,c.jsxs)(Yx,{children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:s().t("settings.paywall_taxes.processor_setup.title")}),(0,c.jsxs)("div",{className:"mt-2 flex flex-col gap-y-2",children:[(0,c.jsx)(l.ZT.BodyMd,{as:"div",children:(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:s().t("settings.paywall_taxes.processor_setup.body1")}})}),(0,c.jsx)(l.ZT.BodyMd,{children:s().t("settings.paywall_taxes.processor_setup.body2")}),(0,c.jsx)(l.ZT.BodyMd,{children:s().t("settings.paywall_taxes.processor_setup.body3")})]}),(0,c.jsxs)("div",{className:"mt-5 flex flex-row",children:[(0,c.jsxs)(g_.Q,{className:"flex flex-row items-center gap-2",variant:"circle",href:i_.connectedAccount.tax(e.payment_processor.id),target:"_blank",children:[(0,c.jsx)(bt.JO,{type:"share-support-widget",size:16,stroke:"text-primary"}),(0,c.jsx)(l.ZT.LabelMd,{color:"text-primary",weight:"bold",children:s().t("settings.paywall_taxes.processor_setup.button1")})]}),(0,c.jsx)(l.zx,{className:"ml-4",variant:"secondary",onClick:function(){return o(!0)},children:(0,c.jsx)(l.ZT.LabelMd,{weight:"medium",children:s().t("settings.paywall_taxes.processor_setup.button2")})})]})]})]})},P_=function(){var e,t={isLoadingTaxSettings:(e=(0,f.useQuery)("admin/paywalls/taxSettings",(function(){return c_()}))).isLoading,taxSettings:e.data},r=t.taxSettings;return t.isLoadingTaxSettings||!r?(0,c.jsx)(l.aN,{center:!0,variant:"default"}):(0,c.jsxs)(d_.Provider,{value:{taxSettings:r},children:[(0,c.jsx)(O_,{}),(0,c.jsx)(v_,{}),(0,c.jsx)(y_,{}),(0,c.jsx)(s_,{})]})},S_=function(){var e=(0,v.wh)().currentCommunity,t=e.payment_processor;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:s().t("settings.paywall_taxes.title")}),(0,c.jsx)($,{maxWidth:"xl",children:(0,c.jsx)(P_,{community:e,paymentProcessor:t})})]})},k_=r(62456),C_=r(18116),N_=r(44179),T_=r(241),A_=r(83024);function E_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E_(Object(r),!0).forEach((function(t){D_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L_=[{accessorKey:"created_at",header:(0,a.t)("settings.paywalls_affiliates_commissions.date"),cell:function(e){return(0,Sa.p6)(e.getValue())}},{accessorKey:"community_member",header:(0,a.t)("settings.paywalls_affiliates_commissions.affiliate"),cell:function(e){return(0,c.jsx)(A_.k,{customer:e.getValue(),shouldOpenAdminMemberEdit:!0})}},{accessorKey:"community_member_charge",header:(0,a.t)("settings.paywalls_affiliates_commissions.referral"),cell:function(e){return(0,c.jsx)(A_.k,{customer:e.getValue().community_member,shouldOpenAdminMemberEdit:!0})}},{accessorKey:"paywall",header:(0,a.t)("settings.paywalls_affiliates_commissions.sale"),accessorFn:function(e){return e},cell:,{accessorKey:"community_member_charge",header:(0,a.t)("settings.paywalls_affiliates_commissions.amount"),thClassName:"!text-right",thInnerClassName:"justify-end",cellClassName:"!text-right",cell:,{accessorKey:"earned_amount_as_currency",header:(0,a.t)("settings.paywalls_affiliates_commissions.commission"),thClassName:"!text-right",thInnerClassName:"justify-end",cellClassName:"!text-right",cell:function(e){return e.getValue()}},{accessorKey:"status",header:(0,a.t)("settings.paywalls_affiliates_commissions.status"),cell:function(e){return(0,c.jsx)(T_.g,{status:e.getValue()})}}],M_=function(e){return(0,c.jsx)(bo.J,I_(I_({columns:L_},e),{},{children:(0,c.jsx)("div",{className:"flex h-full flex-col",children:(0,c.jsxs)("div",{className:"settings-paywalls-affiliates-commissions-list max-w-full overflow-x-auto","data-testid":"settings-paywalls-affiliates-commissions-list",children:[(0,c.jsxs)(Q.w.Table,{className:"w-full min-w-[800px]",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-[12%]","data-testid":"date-column"}),(0,c.jsx)("col",{className:"w-[19%]","data-testid":"affiliate-column"}),(0,c.jsx)("col",{className:"w-[19%]","data-testid":"referral-column"}),(0,c.jsx)("col",{className:"w-[19%]","data-testid":"sale-column"}),(0,c.jsx)("col",{className:"w-[15%]","data-testid":"amount-column"}),(0,c.jsx)("col",{className:"w-[13%]","data-testid":"commission-column"}),(0,c.jsx)("col",{className:"w-[1%]","data-testid":"status-column"})]}),(0,c.jsx)(Q.w.Header,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)("settings.paywalls_affiliates_commissions.no_commissions_found")}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})})}))},R_=function(e){var t=e.count;return(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.paywalls_affiliates_commissions.count",{count:t})})})},F_=function(e){var t=e.indexRoute,r=e.status,n=(0,N_.v)(t,r),i=n.commissionsInfiniteQuery,o=n.initialPage,a=n.setPage,s=i.totalQueryCommissions,l=i.pageSize;return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[s>0&&(0,c.jsx)(R_,{count:s}),(0,c.jsx)("div",{className:"isolate overflow-auto px-6",children:(0,c.jsx)(M_,{infiniteQuery:i,initialPage:o,pageSize:l,onChangePage:function(e){a(e)}})})]})};function B_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z_=["all","pending","due","processing","paid"],V_="active",Z_=function(){var e=(0,dr.k6)(),t=(0,To.Xt)().queryParams,r=S.av.search.paywallsAffiliatesCommissions.index,i=(0,C_.n)(r),o=i.allCount,s=i.pendingCount,l=i.dueCount,u=i.processingCount,d=i.paidCount,f=t[V_]||z_[0],m=z_.indexOf(f),p=-1===m?0:m,h=B_((0,n.useState)(p),2),b=h[0],y=h[1];(0,n.useEffect)((function(){var e=z_.indexOf(f);y(-1===e?0:e)}),[y,f]);return(0,c.jsxs)(Uo.O.Group,{className:"flex h-full flex-col overflow-auto",selectedIndex:b,onChange:function(r){var n=(0,fn.pick)(t,["page","active","query","status"]),i=z_[r];n[V_]=i,n.page="1";var o=(0,S.UK)(n);e.push({search:o})},children:[(0,c.jsxs)(Uo.O.List,{className:"border-primary block flex-none border-b px-6",children:[(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls_affiliates_commissions.tabs.all"),(0,c.jsx)(Uo.O.Counter,{children:o})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls_affiliates_commissions.tabs.pending"),(0,c.jsx)(Uo.O.Counter,{children:s})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls_affiliates_commissions.tabs.due"),(0,c.jsx)(Uo.O.Counter,{children:l})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls_affiliates_commissions.tabs.processing"),(0,c.jsx)(Uo.O.Counter,{children:u})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls_affiliates_commissions.tabs.paid"),(0,c.jsx)(Uo.O.Counter,{children:d})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(F_,{indexRoute:r})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(F_,{indexRoute:r,status:k_.$.PENDING})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(F_,{indexRoute:r,status:k_.$.DUE})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(F_,{indexRoute:r,status:k_.$.PROCESSING})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(F_,{indexRoute:r,status:k_.$.PAID})})]})]})},H_=function(){var e=(0,Mo.k)().shouldShowTrialBanner,t=(0,Fo.a)().is_v2_1_header_rendered;return(0,Ro.t)(),(0,c.jsx)("div",{className:J()("bg-primary relative overflow-auto",{"lg:h-[calc(100vh-4rem)]":!e&&!t,"lg:h-[calc(100vh-7rem)]":e&&!t||!e&&t,"lg:h-[calc(100vh-10rem)]":e&&t}),children:(0,c.jsx)(Z_,{})})},q_=function(){return(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.paywalls_affiliates_commissions.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-paywalls-affiliates-commissions"}})},G_=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(A.S,{bodyClassNames:"no-border-header",title:(0,a.t)("settings.paywalls_affiliates_commissions.title")}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(q_,{}),(0,c.jsx)(H_,{})]})},W_=r(27258),Q_=r(45157),K_=r(24128),J_=S.av.paywallsAffiliatesSettings.show(),$_=function(){return(0,Er.UT)(J_)},Y_=function(){var e=(0,f.useQuery)("PAYWALLS_AFFILIATES_SETTINGS",$_),t=e.data,r=void 0===t?{}:t;return{isLoading:e.isLoading,paywallsAffiliatesSettings:r}},X_=r(82575),ej=r(50308),tj=r.n(ej),rj=(0,n.createContext)({hide:tj(),invite:tj()});rj.displayName="InviteModalContext";var nj=function(){return(0,n.useContext)(rj)};function ij(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var oj=function(e){var t=e.hide,r=e.children,i=(0,l.pm)(),o=function(){var e,t=(e=se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X_.r.invite({existing_member_ids:t.filter(().map((function(e){return parseInt(e)})),new_member_emails:t.filter((function(e){return!(0,fn.isNumber)(e)}))}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ij(o,n,i,a,s,"next",e)}function s(e){ij(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),s=(0,f.useMutation)(o),u=(0,n.useCallback)((function(e){s.mutateAsync(e).then((function(e){i.success((0,a.t)("settings.paywalls_affiliates_invite.modal.alerts.success",{count:e.invites_sent})),t()})).catch((function(e){console.error(e),i.error(e.message)}))}),[t,i,s]);return(0,c.jsx)(rj.Provider,{value:{hide:t,invite:u},children:r})},aj=r(51948),sj=lj=function(e){var t=e.formId,r=e.memberIdsFieldName,n=e.isSubmittingForm,i=nj().hide,o=(0,ie.UV)().contentPortalElement,s=(0,pr.Gc)(),u=s.watch,d=s.setValue,f=u(r,[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ie.u_.Body,{className:J()({"pb-32":0===f.length,"pb-16":1===f.length,"pb-8":2===f.length,"pb-0":f.length>2}),children:[(0,c.jsx)(ce.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,a.t)("settings.paywalls_affiliates_invite.modal.form.member_entries_label"),id:r,name:r,children:(0,c.jsx)(ce.l.CommunityMemberSelect,{name:r,variant:"tags",direction:"down",addable:!0,appendTo:o,hideSelectedItems:!0,hideIcon:!0,placeholder:(0,a.t)("settings.paywalls_affiliates_invite.modal.form.member_entries_placeholder"),getCommunityMemberText:sj,filters:{exclude_ids:f}})}),(0,c.jsx)(aj.Y,{memberIds:f,onRemove:function(e){var t=f.filter((function(t){return t!==e}));d(r,t,{shouldTouch:!0})}})]}),(0,c.jsxs)(ie.u_.Footer,{className:"flex flex-row items-center justify-between",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"regular",children:(0,a.t)("settings.paywalls_affiliates_invite.modal.footer.inviting_members",{count:f.length})}),(0,c.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,c.jsx)(l.zx,{variant:"secondary",onClick:i,disabled:n,children:(0,a.t)("settings.paywalls_affiliates_invite.modal.footer.cancel")}),(0,c.jsx)(l.zx,{form:t,type:"submit",variant:"circle",disabled:n||0===f.length,children:(0,a.t)("settings.paywalls_affiliates_invite.modal.footer.submit")})]})]})]})};var cj,uj,dj,fj="invite_form",mj="member_ids",pj=(dj=[],(uj=mj)in(cj={})?Object.defineProperty(cj,uj,{value:dj,enumerable:!0,configurable:!0,writable:!0}):cj[uj]=dj,cj),hj=function(){var e=nj(),t=e.hide,r=e.invite;return(0,c.jsx)(ce.l,{id:fj,onSubmit:function(e){r(e[mj])},defaultValues:pj,children:function(e){var r=e.formState.isSubmitting;return(0,c.jsxs)(ie.u_,{isOpen:!0,contentPortalId:"invite_modal_portal",onClose:t,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{children:(0,a.t)("settings.paywalls_affiliates_invite.modal.title")}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:t})})]}),(0,c.jsx)(lj,{formId:fj,memberIdsFieldName:mj,isSubmittingForm:r})]})]})}})},bj=function yj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gj=function(){var e,t,r=Y_().paywallsAffiliatesSettings,i=yj((0,n.useState)(!1),2),o=i[0],s=i[1],u=(0,n.useCallback)((function(){return s(!0)}),[s]),d=(0,n.useCallback)((function(){return s(!1)}),[s]);return null!==r&&void 0!==r&&null!==(e=r.campaign)&&void 0!==e&&null!==(t=e.commission_setting)&&void 0!==t&&t.commission?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.zx,{variant:"circle",onClick:u,children:(0,a.t)("settings.paywalls_affiliates_invite.button.label")}),o&&(0,c.jsx)(bj,{hide:d})]}):null},xj=r(31677);function _j(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var jj=function(){return(0,Er.UT)(S.av.paywalls.affiliates.payouts.controls())},wj=function(e){return(0,Er.Cu)(S.av.paywalls.affiliates.payouts.start(),{community_member_ids:e})},Oj=function(e){return fetch(S.av.paywalls.affiliates.payouts.export({community_member_ids:e})).then(function(){var e,t=(e=se().mark((function e(t){var r,n,i,o,a,s;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.next=3,t.blob();case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,t.json();case 6:throw r=e.sent,n=r.message,i=r.error_details,o=void 0===i?r.message:i,a=t.status,s=t.statusText,new xj.M({message:n,status:a,statusText:s,errorDetails:o,body:r});case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){_j(o,n,i,a,s,"next",e)}function s(e){_j(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}())},Pj=function(e){return(0,Er.Cu)(S.av.paywalls.affiliates.payouts.markAsPaid(),{community_member_ids:e})},Sj=(0,n.createContext)({selectedCommunityMemberIds:[],setSelectedCommunityMemberIds:tj(),clearSelectedCommunityMemberIds:tj(),toggleCommunityMemberId:tj(),canStartPayouts:!1,startPayouts:tj(),isStartingPayouts:!1,canExportPayoutsCSV:!1,exportPayoutsCSV:tj(),isExportingPayoutsCSV:!1,canMarkPayoutsAsPaid:!1,markPayoutsAsPaid:tj(),isMarkingPayoutsAsPaid:!1,refetchPayoutsRequests:0,bumpRefetchPayoutsRequests:tj()});Sj.displayName="PaywallsAffiliatesPayoutsActionsContext";var kj=function(){return(0,n.useContext)(Sj)};function Cj(e){return function(e){if(Array.isArray(e))return Ij(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ej(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nj(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Tj(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Nj(o,n,i,a,s,"next",e)}function s(e){Nj(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Aj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Ej(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ej(e,t){if(e){if("string"===typeof e)return Ij(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ij(e,t):void 0}}function Ij(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dj=function(e){var t,r,i,o=e.children,s=(0,l.pm)(),u=Aj((0,n.useState)(0),2),d=u[0],m=u[1],p=(0,n.useCallback)((,[m]),h=(0,f.useQuery)("paywallsAffiliatesPayoutsControls",jj),b=h.data,y=h.refetch,v=Aj((0,n.useState)([]),2),g=v[0],x=v[1],_=(0,n.useCallback)((,[x]);(0,n.useEffect)((function(){_(),y()}),[d,_,y]);var j=function(){var e=Tj(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wj(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=(0,f.useMutation)(j),O=w.isLoading,P=(0,n.useCallback)((function(e){w.mutateAsync(e).then((function(e){var t=e.processing;s.success((0,a.t)("settings.paywalls_affiliates_directory.actions.start_payouts.success",{count:t})),p()})).catch((function(e){console.error(e),s.error(e.message)}))}),[s,p,w]),S=function(){var e=Tj(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oj(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=(0,f.useMutation)(S),C=k.isLoading,N=(0,n.useCallback)((function(e){k.mutateAsync(e).then((function(e){var t=URL.createObjectURL(e),r=document.createElement("a");r.download="payouts.csv",r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),s.success((0,a.t)("settings.paywalls_affiliates_directory.actions.export_payout_csv.success"))})).catch((function(e){console.error(e),s.error(e.message)}))}),[s,k]),T=),A=(0,f.useMutation)(T),E=A.isLoading,I=(0,n.useCallback)((function(e){A.mutateAsync(e).then((function(e){var t=e.paid;s.success((0,a.t)("settings.paywalls_affiliates_directory.actions.mark_paid.success",{count:t})),p()})).catch((function(e){console.error(e),s.error(e.message)}))}),[s,p,A]),D=(0,n.useCallback)((function(e){x((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Cj(t),[e])}))}),[x]);return(0,c.jsx)(Sj.Provider,{value:{selectedCommunityMemberIds:g,setSelectedCommunityMemberIds:x,clearSelectedCommunityMemberIds:_,toggleCommunityMemberId:D,canStartPayouts:null!==(t=null===b||void 0===b?void 0:b.can_start_payouts)&&void 0!==t&&t,startPayouts:P,isStartingPayouts:O,canExportPayoutsCSV:null!==(r=null===b||void 0===b?void 0:b.can_export_payouts)&&void 0!==r&&r,exportPayoutsCSV:N,isExportingPayoutsCSV:C,canMarkPayoutsAsPaid:null!==(i=null===b||void 0===b?void 0:b.can_mark_payouts_as_paid)&&void 0!==i&&i,markPayoutsAsPaid:I,isMarkingPayoutsAsPaid:E,refetchPayoutsRequests:d,bumpRefetchPayoutsRequests:p},children:o})},Lj=function(e){var t=e.hide,r=e.payoutProvider,n=kj(),i=n.selectedCommunityMemberIds,o=n.startPayouts,s=n.isStartingPayouts,u=(0,a.t)("settings.paywalls_affiliates_directory.quantifier",{count:i.length});return(0,c.jsx)(Gr.cV,{isOpen:!0,title:(0,a.t)("settings.paywalls_affiliates_directory.start_payouts_modal.title",{quantifier:u}),onClose:t,onCancel:t,onConfirm:disabled:s,size:"lg",children:(0,c.jsx)("div",{className:"flex flex-col gap-8",children:(0,c.jsx)(l.ZT.BodyMd,{children:(0,a.t)("settings.paywalls_affiliates_directory.start_payouts_modal.body",{quantifier:u,provider:r})})})})};function Mj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Rj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fj=function(){var e,t=Y_().paywallsAffiliatesSettings,r=kj().canStartPayouts,i=Mj((0,n.useState)(!1),2),o=i[0],s=i[1],u=(0,n.useCallback)((function(){return s(!0)}),[s]),d=(0,n.useCallback)((function(){return s(!1)}),[s]);if(null===t||void 0===t||null===(e=t.program)||void 0===e||!e.payout_type)return null;var f=(0,a.t)(["member_profile_modal.affiliate_dashboard.payout_provider_label",t.program.payout_type]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.zx,{variant:"secondary",disabled:!r,onClick:u,children:(0,a.t)("settings.paywalls_affiliates_directory.actions.start_payouts.label")}),o&&(0,c.jsx)(Lj,{hide:d,payoutProvider:f})]})},Bj=r(84038),Uj=r(59941),zj=(0,n.createContext)({affiliateName:"",targetStatus:Bj._.disabled,changeStatus:tj(),isChangingStatus:!1,hide:tj()});zj.displayName="ChangeStatusModalContext";var Vj=function(){var e=(0,n.useContext)(zj),t=e.affiliateName,r=e.targetStatus,i=e.changeStatus,o=e.isChangingStatus,s=e.hide;return(0,c.jsx)(Gr.cV,{isOpen:!0,confirmVariant:r===Bj._.disabled?"danger":"primary",title:(0,a.t)(["settings.paywalls_affiliates_directory.change_status_modal.title",r]),onClose:s,onCancel:s,onConfirm:i,disabled:o,size:"lg",children:(0,c.jsx)("div",{className:"flex flex-col gap-8",children:(0,c.jsx)(l.ZT.BodyMd,{children:(0,a.t)(["settings.paywalls_affiliates_directory.change_status_modal.body",r],{name:t})})})})},Zj=function(e,t){return(0,Er.gN)(S.av.admin.paywalls.affiliates.update(e),{affiliate:t})};function Hj(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var qj=function(e){var t,r=e.affiliate,i=e.hide,o=e.children,s=(0,l.pm)(),u=r.manual_update_target_status,d=function(){var e,t=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zj(r.id,{status:u}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Hj(o,n,i,a,s,"next",e)}function s(e){Hj(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),m=(0,f.useMutation)(d),p=(0,n.useCallback)((function(){m.mutateAsync().then((function(){s.success((0,a.t)(["settings.paywalls_affiliates_directory.change_status_modal.success",u])),i()})).catch((function(e){console.error(e),s.error(e.message)}))}),[u,i,s,m]);return(0,c.jsx)(zj.Provider,{value:{affiliateName:null!==(t=r.community_member.name)&&void 0!==t?t:"",targetStatus:u,changeStatus:p,isChangingStatus:m.isLoading,hide:i},children:o})},Gj=function(e){var t=e.affiliate,r=e.hide;return(0,c.jsx)(qj,{affiliate:t,hide:r,children:(0,c.jsx)(Vj,{})})};function Wj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kj=function(e){var t=e.affiliate,r=Wj((0,n.useState)(!1),2),i=r[0],o=r[1],s=(0,n.useCallback)((function(){return o(!0)}),[o]),l=(0,n.useCallback)((function(){return o(!1)}),[o]),u=[];return t.manual_update_target_status&&u.push({key:"change_affiliate_status",label:(0,a.t)(["settings.paywalls_affiliates_directory.actions.change_status",t.manual_update_target_status]),onClick:),0===u.length?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.w.Actions,{children:u.map((function(e){var t=e.key,r=e.label,n=e.onClick;return(0,c.jsx)(Q.w.Actions.Item,{onClick:n,children:r},t)}))}),i&&(0,c.jsx)(Gj,{affiliate:t,hide:l})]})},Jj=function(e){var t,r=e.amountEntry,n=e.amountColor,i=void 0===n?"text-secondary":n;return t=r&&r.amount?(0,c.jsx)("div",{className:"flex flex-col items-end",children:(0,c.jsx)(l.ZT.LabelSm,{color:i,children:r.amount_as_currency})}):(0,c.jsx)(l.ZT.LabelSm,{color:"text-secondary",children:"-"}),(0,c.jsx)("div",{className:"flex grow flex-col items-center justify-center",children:t})},$j=function(e){var t=e.affiliate,r=kj(),n=r.selectedCommunityMemberIds,i=r.toggleCommunityMemberId;return(0,c.jsx)("input",{type:"checkbox",className:"text-dark bg-primary hover:bg-tertiary hover:border-secondary disabled:bg-tertiary disabled:border-selector-inactive border-secondary focus:bg-tertiary focus:border-secondary placeholder:text-light h-4 w-4 cursor-pointer rounded placeholder:opacity-100 focus:ring-0 focus:ring-offset-0",id:"community-member-".concat(t.community_member_id,"-box"),checked:n.includes(t.community_member_id),onChange:function(){return i(t.community_member_id)},disabled:!1})},Yj=function(e){var t,r=e.getValue,n=parseInt(r());return t=n?"".concat(n):"-",(0,c.jsx)("div",{className:"flex grow flex-col items-center justify-center",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-secondary",children:t})})},Xj=function(e){var t=e.hide,r=e.payoutsCount,n=e.markPayoutsAsPaid,i=(0,a.t)("settings.paywalls_affiliates_directory.quantifier",{count:r});return(0,c.jsx)(Gr.cV,{isOpen:!0,title:(0,a.t)("settings.paywalls_affiliates_directory.mark_payouts_as_paid_modal.title",{quantifier:i}),onClose:t,onCancel:t,onConfirm:function(){n(),t()},size:"lg",children:(0,c.jsx)("div",{className:"flex flex-col gap-8",children:(0,c.jsx)(l.ZT.BodyMd,{children:(0,a.t)("settings.paywalls_affiliates_directory.mark_payouts_as_paid_modal.body",{quantifier:i})})})})};function ew(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rw=function(e){var t=e.disabled,r=void 0!==t&&t,i=e.payoutsCount,o=e.markPayoutsAsPaid,s=ew((0,n.useState)(!1),2),u=s[0],d=s[1],f=(0,n.useCallback)((function(){return d(!0)}),[d]),m=(0,n.useCallback)((function(){return d(!1)}),[d]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.zx,{variant:"secondary",small:!0,disabled:r,onClick:f,children:(0,c.jsx)(l.ZT.LabelXs,{weight:"medium",children:(0,a.t)("settings.paywalls_affiliates_directory.actions.mark_paid.label")})}),u&&(0,c.jsx)(Xj,{hide:m,payoutsCount:i,markPayoutsAsPaid:o})]})},nw=function(e){var t=e.affiliate,r=kj().markPayoutsAsPaid;return!t.processing_payouts||t.processing_payouts.amount<=0?null:(0,c.jsx)("div",{className:"flex grow flex-col items-center justify-center",children:(0,c.jsx)(rw,{payoutsCount:1,markPayoutsAsPaid:)})};function iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ow(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iw(Object(r),!0).forEach((function(t){aw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function aw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sw="justify-center",lw="!align-middle",cw=[{accessorKey:"toggle",header:"",cellClassName:lw,cell:function(e){var t=e.row.original;return(0,c.jsx)($j,{affiliate:t})}},{accessorKey:"community_member",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.affiliate"),cell:function(e){var t=e.row.original,r=(0,a.t)(["settings.paywalls_affiliates_directory.table.rows.affiliate",t.status],{name:t.community_member.name}),n=[Bj._.enrolled,Bj._.invited,Bj._.disabled].includes(t.status);return(0,c.jsx)(Uj.D,{customer:ow(ow({},t.community_member),{},{name:r}),shouldOpenAdminMemberEdit:n})}},{accessorKey:"visitors_count",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.visitors_count"),thInnerClassName:sw,cellClassName:lw,cell:function(e){return(0,c.jsx)(Yj,ow({},e))}},{accessorKey:"leads_count",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.leads_count"),thInnerClassName:sw,cellClassName:lw,cell:function(e){return(0,c.jsx)(Yj,ow({},e))}},{accessorKey:"conversions_count",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.conversions_count"),thInnerClassName:sw,cellClassName:lw,cell:function(e){return(0,c.jsx)(Yj,ow({},e))}},{accessorKey:"paid_payouts",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.paid"),thInnerClassName:sw,cellClassName:lw,cell:function(e){var t=e.getValue();return(0,c.jsx)(Jj,{amountEntry:t})}},{accessorKey:"pending_commissions",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.pending"),thInnerClassName:sw,cellClassName:lw,cell:function(e){var t=e.getValue();return(0,c.jsx)(Jj,{amountEntry:t})}},{accessorKey:"due_payout",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.due"),thInnerClassName:sw,cellClassName:lw,cell:function(e){var t=e.getValue();return(0,c.jsx)(Jj,{amountEntry:t,amountColor:"text-red-600"})}},{accessorKey:"processing_payouts",header:(0,a.t)("settings.paywalls_affiliates_directory.table.columns.processing"),thInnerClassName:sw,cellClassName:lw,cell:function(e){var t=e.getValue();return(0,c.jsx)(Jj,{amountEntry:t})}},{accessorKey:"mark_paid_action",header:"",thInnerClassName:sw,cellClassName:lw,cell:function(e){var t=e.row.original;return(0,c.jsx)(nw,{affiliate:t})}},{accessorKey:"actions_menu",header:"",thInnerClassName:sw,cellClassName:lw,cell:],uw=function(e){return(0,c.jsx)(bo.J,ow(ow({columns:cw},e),{},{children:(0,c.jsx)("div",{className:"flex h-full flex-col","data-testid":"settings-paywalls-affiliates-directory-list",children:(0,c.jsxs)("div",{className:"max-w-full overflow-x-auto",children:[(0,c.jsxs)(Q.w.Table,{className:"w-full min-w-[800px]",children:[(0,c.jsx)(Q.w.Header,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)("settings.paywalls_affiliates_directory.table.empty_state")}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})})}))},dw=function(e){var t=e.recordsCount,r=e.records,n=kj(),i=n.canExportPayoutsCSV,o=n.canMarkPayoutsAsPaid,s=n.selectedCommunityMemberIds,u=n.exportPayoutsCSV,d=n.markPayoutsAsPaid;if(!t)return null;var f,m=r.filter((function(e){return!s||s.includes(e.community_member.id)})).length;return f=m>0?(0,a.t)("settings.paywalls_affiliates_directory.table.headline.with_selection",{count:m,total:t}):(0,a.t)("settings.paywalls_affiliates_directory.table.headline.without_selection",{count:t}),(0,c.jsxs)(Q.w.Headline,{children:[(0,c.jsx)(Q.w.Headline.Title,{children:f}),(0,c.jsx)(l.zx,{variant:"secondary",small:!0,disabled:!i,onClick:function(){u(s)},children:(0,c.jsx)(l.ZT.LabelXs,{weight:"medium",children:(0,a.t)("settings.paywalls_affiliates_directory.actions.export_payout_csv.label")})}),(0,c.jsx)(rw,{disabled:!o,payoutsCount:m,markPayoutsAsPaid:function(){d(s)}})]})},fw=r(85564),mw=r.n(fw);function pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pw(Object(r),!0).forEach((function(t){bw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gw=function(){var e,t,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.query,l=void 0===s?"":s,c=a.filters,u=a.perPage,d=void 0===u?30:u,m=a.initialPage,p=void 0===m?1:m,h=a.options,b=["paywalls_affiliates",l,c,d],y=hw({getNextPageParam:function(e){return e.has_next_page?parseInt(e.page)+1:void 0},getPreviousPageParam:function(e){return e.page>1?parseInt(e.page)-1:void 0},keepPreviousData:!0},void 0===h?{}:h),v=(0,f.useInfiniteQuery)(b,(function(e){var t=e.pageParam,r=void 0===t?p:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,per_page:d,query:l};return c&&(i.filters=function(e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var i=yw(n[r],2),o=i[0],a=i[1];t[o]=a}return t}(c)),(0,Er.UT)(S.av.search.paywallsAffiliates.index({params:i}))}),y),g=(0,n.useMemo)((function(){var e;return(null===(e=v.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=v.data)||void 0===e?void 0:e.pages]),x=(null===(t=g[0])||void 0===t||null===(r=t.meta)||void 0===r?void 0:r.total_count)||0,_=(null===(i=g[0])||void 0===i?void 0:i.count)||0,j=(null===(o=g[0])||void 0===o?void 0:o.per_page)||d,w=(0,n.useMemo)((function(){return mw()(g.map((function(e){return e.records})))}),[g]);return hw(hw({},v),{},{queryKey:b,totalCount:x,pageCount:_,records:w,pageSize:j,pages:g})};function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jw=function(e){var t=(0,To.Xt)().queryParams,r=(0,No.v)(),n=r.setPage,i=r.initialPage,o=(0,fn.get)(t,"query",""),a=(0,fn.omit)(t,["page","active","query","status"]),s=(0,fn.isNil)(e)?a:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xw(Object(r),!0).forEach((function(t){_w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({status:[e]},a);return{directoryInfiniteQuery:gw({perPage:30,initialPage:i,query:o,options:{keepPreviousData:!1},filters:s}),initialPage:i,setPage:n}},ww=function(e){var t=e.status,r=kj().refetchPayoutsRequests,i=jw(t),o=i.directoryInfiniteQuery,a=i.initialPage,s=i.setPage;(0,n.useEffect)((function(){o.refetch()}),[r,o]);var l=o.pageCount,u=o.records,d=o.pageSize;return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[(0,c.jsx)(dw,{recordsCount:l,records:u}),(0,c.jsx)("div",{className:"isolate overflow-auto px-6",children:(0,c.jsx)(uw,{infiniteQuery:o,initialPage:a,pageSize:d,onChangePage:function(e){s(e)}})})]})};function Ow(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sw=["all"],kw="active",Cw=function(){var e=(0,dr.k6)(),t=(0,To.Xt)().queryParams,r={allCount:gw().totalCount}.allCount,i=t[kw]||Sw[0],o=Sw.indexOf(i),s=-1===o?0:o,l=Ow((0,n.useState)(s),2),u=l[0],d=l[1];(0,n.useEffect)((function(){var e=Sw.indexOf(i);d(-1===e?0:e)}),[d,i]);var f=(0,n.useCallback)((function(r,n){var i=(0,fn.pick)(t,["page","active","query","status"]),o=Sw[r];i[kw]=o,n&&(i.page="".concat(n));var a=(0,S.UK)(i);e.push({search:a})}),[e,t]),m=(0,n.useCallback)((,[f]);return(0,c.jsxs)(Uo.O.Group,{className:"flex h-full flex-col overflow-auto",selectedIndex:u,onChange:m,children:[(0,c.jsx)(Uo.O.List,{className:"border-primary block flex-none border-b px-6",children:(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls_affiliates_directory.tabs.all"),(0,c.jsx)(Uo.O.Counter,{children:r})]})}),(0,c.jsx)(Uo.O.Panels,{children:(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(ww,{})})})]})},Nw=function(){var e=(0,v.wh)().currentCommunity.payment_processor,t=(0,Q_.l)({paymentProcessor:e}).paymentProcessorStatus,r=(0,Mo.k)().shouldShowTrialBanner,n=(0,Fo.a)().is_v2_1_header_rendered;return(0,Ro.t)(),(0,c.jsxs)(Dj,{children:[(0,c.jsx)(A.S,{bodyClassNames:"no-border-header",title:(0,a.t)("settings.paywalls_affiliates_directory.title")}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.paywalls_affiliates_directory.title"),layoutConfigProps:{disableRightSidebar:!0},rightContent:(0,c.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,c.jsx)(Fj,{}),(0,c.jsx)(gj,{})]})}),t===W_.J6.ENABLED?(0,c.jsx)("div",{className:J()("bg-primary relative overflow-auto",{"lg:h-[calc(100vh-4rem)]":!r&&!n,"lg:h-[calc(100vh-7rem)]":r&&!n||!r&&n,"lg:h-[calc(100vh-10rem)]":r&&n}),children:(0,c.jsx)(Cw,{})}):(0,c.jsx)(K_.Q,{})]})},Tw=r(36762),Aw=Object.freeze({fixed:"Paywalls::Affiliates::CommissionSettings::Fixed",percent:"Paywalls::Affiliates::CommissionSettings::Percent"}),Ew=function(e){return e===Aw.fixed},Iw=Object.freeze({paypal:"paypal",wise:"wise"}),Dw=Object.freeze({id:1,code:"usd",symbol:"$",direction:Tw.RV.ltr,smallest_unit:Tw.Wo.decimal,min_charge_amount:50,max_charge_amount:99999999,is_default:!0}),Lw=function(e){var t=e.name,r=e.handleChange,n=void 0===r?fn.noop:r;return(0,c.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,c.jsxs)("div",{className:"pb-2",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_setting_type")}),(0,c.jsx)(yt.Y,{className:"inline-flex",content:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_setting_type_tooltip"),children:(0,c.jsx)(bt.JO,{type:"question-mark",className:"icon icon--xs ml-2"})})]}),(0,c.jsx)(l.l0.Item,{name:t,hideDescription:!0,rules:{required:(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.commission_setting_type_is_required")},hideBorder:!0,addFormGroupClass:!1,children:(0,c.jsx)(l.l0.TextSelect,{name:t,options:[{label:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_setting_type_options.fixed"),value:Aw.fixed},{label:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_setting_type_options.percent"),value:Aw.percent}],label:null,onChange:n})})]})},Mw=r(61666),Rw=Dw,Fw=(0,vr.Bj)(Rw),Bw=function(e){var t=e.name,r=e.handleChange,i=void 0===r?fn.noop:r,o=(0,pr.Gc)(),s=o.watch,u=o.setValue,d=s(t);(0,n.useEffect)((function(){u(t,(0,Mw.I)(Dw,(0,vr.Mz)(d),{amountInCents:!1,includeCurrencyCode:!1,forceMaxFractionDigits:!0}))}),[d,t,u]);return(0,c.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,c.jsx)("div",{className:"pb-2",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_amount")})}),(0,c.jsx)(l.l0.Item,{hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,name:t,rules:{required:(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.commission_not_zero"),validate:{inputMinCommission:function(e){var t=(0,vr.Mz)(e);return!(!t||t<=0)||(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.commission_not_zero")}}},transformValue:Fw,addFormGroupClass:!1,children:(0,c.jsx)(yr.a,{currency:Rw,"data-testid":"fixed-commission",onChange:i})})]})},Uw=function(e){return!(e<=0||e>100)||(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.commission_percent_valid")},zw=function(e){var t=e.name,r=e.handleChange,n=void 0===r?fn.noop:r;return(0,c.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,c.jsx)("div",{className:"pb-2",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_percent")})}),(0,c.jsx)(l.l0.Item,{name:t,hideBorder:!0,placeholder:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_percent_placeholder"),rules:{required:(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.commission_percent_valid"),validate:{inputMinAndMaxCommissionPercent:Uw}},hideDescription:!0,addFormGroupClass:!1,children:(0,c.jsx)(l.l0.Input,{type:"number",inputMode:"decimal",step:"0.01",suffix:"%",className:"form-control ![-moz-appearance:textfield] [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none","data-testid":"percentage-commission",onChange:n})})]})},Vw=function(e){var t=e.enableRecurringFrequencyCapField,r=e.recurringFrequencyCapField,n=e.handleEnableRecurringFrequencyCapChange,i=void 0===n?fn.noop:n,o=e.handleCommissionFieldChange,s=void 0===o?fn.noop:o,u=(0,pr.Gc)().watch,d=Boolean(u(t));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"pt-6",children:(0,c.jsxs)("div",{className:"flex w-full gap-x-5",children:[(0,c.jsx)(l.l0.ToggleSwitch,{name:t,variant:"small",value:String(d),onToggleChange:i}),(0,c.jsx)("div",{children:(0,a.t)("settings.paywalls_affiliates_settings.form.recurring_frequency_cap")})]})}),(0,c.jsx)("div",{className:J()("flex flex-col gap-x-5 md:w-[50%] md:flex-row md:pr-3",{hidden:!d}),children:(0,c.jsx)("div",{className:"flex w-full flex-col pt-2",children:(0,c.jsx)(l.l0.Item,{fullWidth:!1,hideBorder:!0,hideDescription:!0,name:r,rules:{validate:{inputMinRecurringFrequencyCap:function(e){return!(d&&e<=0)||(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.recurring_frequency_cap_not_zero")}}},addFormGroupClass:!1,isDisabled:!d,children:(0,c.jsx)(l.l0.Input,{type:"number",inputMode:"numeric",className:"form-control ![-moz-appearance:textfield] [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none","data-testid":"recurring-frequency-cap",disabled:!d,onChange:s})})})})]})};function Zw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Hw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qw=function(e){var t=e.formType,r=void 0===t?"campaign":t,n=e.handleCommissionFieldChange,i=void 0===n?fn.noop:n,o=e.handleCommissionTypeChange,a=void 0===o?fn.noop:o,s=e.handleEnableRecurringFrequencyCapChange,l=void 0===s?fn.noop:s,u=(0,pr.Gc)().watch,d=Zw("campaign"===r?["campaign[commission_setting_attributes][type]","campaign[commission_setting_attributes][fixed_commission]","campaign[commission_setting_attributes][percent_commission]","campaign[commission_setting_attributes][enable_recurring_frequency_cap]","campaign[commission_setting_attributes][recurring_frequency_cap]"]:["type","fixed_commission","percent_commission","enable_recurring_frequency_cap","recurring_frequency_cap"],5),f=d[0],m=d[1],p=d[2],h=d[3],b=d[4],y=u(f);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,c.jsx)(Lw,{name:f,handleChange:a}),Ew(y)?(0,c.jsx)(Bw,{name:m,handleChange:i}):(0,c.jsx)(zw,{name:p,handleChange:i})]}),(0,c.jsx)(Vw,{enableRecurringFrequencyCapField:h,recurringFrequencyCapField:b,handleEnableRecurringFrequencyCapChange:l,handleCommissionFieldChange:i})]})},Gw=(0,n.createContext)({paywalls:[],campaignCommissionSettingsOverridesAttributes:{},setCampaignCommissionSettingsOverridesAttributes:fn.noop});Gw.displayName="PaywallsAffiliatesSettingsContext";var Ww=function(e){var t=e.paywalls,r=e.campaignCommissionSettingsOverridesAttributes,n=e.setCampaignCommissionSettingsOverridesAttributes,i=e.children,o={paywalls:t,campaignCommissionSettingsOverridesAttributes:r,setCampaignCommissionSettingsOverridesAttributes:n};return(0,c.jsx)(Gw.Provider,{value:o,children:i})},Qw=function(){return(0,n.useContext)(Gw)};function Kw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kw(Object(r),!0).forEach((function(t){$w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yw=function(e,t,r){return r.find(()},Xw=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.paywall,a=void 0===o?null:o,s=i.isForceOverride,l=void 0!==s&&s,c=i.isForceReset,u=void 0!==c&&c,d=t.map((function(e){return e.record_type!==r.record_type||e.record_id!==r.record_id||!l&&!u&&e.overridden?e:Jw(Jw({},n),{},{record_type:r.record_type,record_id:r.record_id,overridden:l&&!u})}));if("Paywall"===r.record_type){var f=Yw(a,"Paywall",d);return(0,fn.reduce)(null===a||void 0===a?void 0:a.prices,(,d)}return d},eO=function(e,t){return"Paywall"===t?(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.prices_count_description",{count:e.prices.length}):e.short_description},tO=function(e,t){return(e||0)===(t||0)},rO=function(e,t){return function(e,t){return e.type===t.type&&(Ew(e.type)?tO((0,vr.Mz)(e.fixed_commission),(0,vr.Mz)(t.fixed_commission)):tO(parseFloat(e.percent_commission),parseFloat(t.percent_commission)))}(e,t)&&function(e,t){var r=!(e.enable_recurring_frequency_cap||t.enable_recurring_frequency_cap),n=e.enable_recurring_frequency_cap&&t.enable_recurring_frequency_cap&&tO(parseFloat(e.recurring_frequency_cap),parseFloat(t.recurring_frequency_cap));return r||n}(e,t)},nO=function(){var e=(0,(0,pr.Gc)().watch)("campaign[commission_setting_attributes]"),t=Qw(),r=t.paywalls,n=t.campaignCommissionSettingsOverridesAttributes,i=t.setCampaignCommissionSettingsOverridesAttributes,o=function(t,o){return i(function(e,t,r,n,i){var o=Jw(Jw({},t),{},$w({},n,i));return(0,fn.reduce)(r,(function(e,t){return Xw(e,{record_type:"Paywall",record_id:t.id},o,{paywall:t})}),e)}(n,e,r,t,o))},s=(0,fn.debounce)(o,500);return(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("div",{className:"form-section__header",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_rate_section.title")})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(l.ZT.LabelMd,{color:"text-default",children:(0,a.t)("settings.paywalls_affiliates_settings.form.commission_rate_section.description")}),(0,c.jsxs)("div",{className:"flex flex-col pb-6",children:[(0,c.jsx)(qw,{formType:"campaign",handleCommissionTypeChange:function(e){return o("type",e)},handleCommissionFieldChange:function(e){var t=(0,fn.replace)((0,fn.replace)(e.target.getAttribute("name"),"campaign[commission_setting_attributes][",""),"]",""),r=e.target.value;"fixed_commission"===t?o(t,r):s(t,r)},handleEnableRecurringFrequencyCapChange:function(e){return o("enable_recurring_frequency_cap",e)}}),(0,c.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,c.jsxs)("div",{className:"pb-2",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.days_until_commissions_become_due")}),(0,c.jsx)(yt.Y,{className:"inline-flex",content:(0,a.t)("settings.paywalls_affiliates_settings.form.days_until_commissions_become_due_tooltip"),children:(0,c.jsx)(bt.JO,{type:"question-mark",className:"icon icon--xs ml-2"})})]}),(0,c.jsx)(l.l0.Item,{fullWidth:!1,hideBorder:!0,hideDescription:!0,placeholder:(0,a.t)("settings.paywalls_affiliates_settings.form.days_until_commissions_become_due_placeholder"),name:"campaign[days_until_commissions_become_due]",rules:{required:(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.days_until_commissions_become_due_not_zero"),validate:{inputMinDaysUntilCommissionsBecomeDue:function(e){return!(e<=0)||(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.days_until_commissions_become_due_not_zero")}}},addFormGroupClass:!1,children:(0,c.jsx)(l.l0.Input,{type:"number",inputMode:"numeric",suffix:(0,a.t)("settings.paywalls_affiliates_settings.form.days_until_commissions_become_due_input_suffix"),className:"form-control ![-moz-appearance:textfield] [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none","data-testid":"pending-commission-length"})})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,c.jsxs)("div",{className:"pb-2",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.payout_type")}),(0,c.jsx)(yt.Y,{className:"inline-flex",content:(0,a.t)("settings.paywalls_affiliates_settings.form.payout_type_tooltip"),children:(0,c.jsx)(bt.JO,{type:"question-mark",className:"icon icon--xs ml-2"})})]}),(0,c.jsx)(l.l0.Item,{name:"program[payout_type]",hideDescription:!0,rules:{required:(0,a.t)("settings.paywalls_affiliates_settings.alerts.error.payout_type_is_required")},hideBorder:!0,addFormGroupClass:!1,children:(0,c.jsx)(l.l0.TextSelect,{name:"program[payout_type]",options:[{label:(0,a.t)("settings.paywalls_affiliates_settings.form.payout_type_options.paypal"),value:Iw.paypal},{label:(0,a.t)("settings.paywalls_affiliates_settings.form.payout_type_options.wise"),value:Iw.wise}],label:null})})]})]})]})]})]})},iO="!px-0 !text-light border-none",oO="h-9 group !px-0 !py-0 border-none",aO=[{accessorKey:"paywalls",header:(0,c.jsx)("span",{className:"text-light",children:(0,a.t)("settings.paywalls_affiliates_settings.form.table_columns.paywalls")}),thClassName:J()(iO,"w-[38%]"),cellClassName:J()(oO,"w-[38%]"),cell:function(e){return e.getValue()}},{accessorKey:"pricing",header:(0,c.jsx)("span",{className:"text-light",children:(0,a.t)("settings.paywalls_affiliates_settings.form.table_columns.pricing")}),thClassName:J()(iO,"w-[38%]"),cellClassName:J()(oO,"w-[38%]"),cell:function(e){return(0,c.jsx)("span",{className:"text-default",children:e.getValue()})}},{accessorKey:"commission",header:(0,c.jsx)("span",{className:"text-light",children:(0,a.t)("settings.paywalls_affiliates_settings.form.table_columns.commission")}),thClassName:J()(iO,"w-[20%]"),cellClassName:J()(oO,"w-[20%]"),cell:function(e){return(0,c.jsx)("span",{className:"text-default",children:e.getValue()})}},{accessorKey:"actions",header:" ",thClassName:J()(iO,"w-16 !text-right"),cellClassName:J()(oO,"w-16 !text-right !py-0"),cell:function(e){return e.getValue()}}],sO=r(87958),lO=function(e){var t=e.record,r=e.paywall,n=e.commissionSetting,i=function(e,t,r,n){var i=(0,ne.yT)(),o=function(){i.hide(),i.remove()};return{onClose:o,handleSubmit:function(i){n(Xw(r,t,i,{paywall:e,isForceOverride:!0})),o()},modal:i}}(r,n,e.campaignCommissionSettingsOverridesAttributes,e.setCampaignCommissionSettingsOverridesAttributes),o=i.onClose,s=i.handleSubmit,u=i.modal;return(0,c.jsxs)(ie.u_,{isOpen:u.visible,onClose:o,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"lg",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.override_commission_form.title")}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:o})})]}),(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsxs)("div",{className:J()("flex flex-col space-y-1 rounded-lg border bg-gray-50 px-5 py-4"),children:[(0,c.jsxs)("div",{className:"flex flex-row justify-between space-x-4",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:r.display_name})}),"Paywall"===n.record_type&&(0,c.jsx)("div",{className:"text-primary leading-3",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-gray-600",children:eO(t,n.record_type)})})]}),"PaywallPrice"===n.record_type&&(0,c.jsxs)("div",{className:"flex flex-row justify-between space-x-4",children:[(0,c.jsx)("div",{className:"text-primary leading-3",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-gray-600",children:t.interval_qualifier})}),(0,c.jsx)("div",{className:"text-primary leading-3",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-gray-600",children:eO(t,n.record_type)})})]})]}),(0,c.jsx)(dn,{children:(0,c.jsx)(un,{children:(0,c.jsx)(l.l0,{onSubmit:s,defaultValues:n,children:function(e){var t=e.formState.isSubmitting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-section",children:(0,c.jsx)("div",{className:"flex flex-col pb-6",children:(0,c.jsx)(qw,{formType:"override"})})}),(0,c.jsxs)("div",{className:"form-button pb-4",children:[(0,c.jsx)($e.z,{type:"button",variant:"secondary",className:"mr-4",onClick:o,children:(0,a.t)("cancel")}),(0,c.jsx)($e.z,{type:"submit",variant:"circle",disabled:t,children:(0,a.t)("save")})]})]})}})})})]})]})]})},cO=ne.uc.create((function(e){var t=e.record,r=e.paywall,n=e.commissionSetting,i=e.campaignCommissionSettingsOverridesAttributes,o=e.setCampaignCommissionSettingsOverridesAttributes;return(0,c.jsx)(lO,{record:t,paywall:r,commissionSetting:n,campaignCommissionSettingsOverridesAttributes:i,setCampaignCommissionSettingsOverridesAttributes:o})})),uO=function(e){var t=e.record,r=e.paywall,n=e.commissionSetting,i=Qw(),o=i.campaignCommissionSettingsOverridesAttributes,s=i.setCampaignCommissionSettingsOverridesAttributes,l=(0,ne.yT)(cO);return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),l.show({record:t,paywall:r,commissionSetting:n,campaignCommissionSettingsOverridesAttributes:o,setCampaignCommissionSettingsOverridesAttributes:s})},children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.actions.override_commission")})},dO=function(e){var t=e.paywall,r=(0,pr.Gc)(),n=r.watch,i=r.setValue,o=n("campaign[paywall_ids]");return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),i("campaign[paywall_ids]",o.filter(())},children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.actions.remove_paywall")})},fO=function(e){var t=e.commissionSetting,r=e.parentCommissionSetting,n=e.paywall,i=Qw(),o=i.campaignCommissionSettingsOverridesAttributes,s=i.setCampaignCommissionSettingsOverridesAttributes;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),s(Xw(o,t,r,{paywall:n,isForceReset:!0}))},children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.actions.reset_commission")})},mO=function(e){var t=e.record,r=e.paywall,n=e.commissionSetting,i=e.parentCommissionSetting,o=e.isCommissionSettingOverridden,a=(0,(0,pr.Gc)().watch)("campaign[apply_to_all_paywalls]");return(0,c.jsxs)(Q.w.Actions,{children:[o?(0,c.jsx)(fO,{commissionSetting:n,parentCommissionSetting:i,paywall:r}):(0,c.jsx)(uO,{record:t,paywall:r,commissionSetting:n}),!a&&"Paywall"===n.record_type&&(0,c.jsx)(dO,{paywall:t})]})},pO=function(e,t){return"Paywall"===t?(0,c.jsx)("span",{className:"font-medium",children:e.display_name}):(0,c.jsx)("span",{className:"text-default",children:e.interval_qualifier})},hO=function(e,t){var r=Ew(e.type)?(0,Mw.I)(Dw,(0,vr.Mz)(e.fixed_commission),{amountInCents:!1}):"".concat(parseFloat(e.percent_commission)||0,"%");return t?(0,c.jsxs)(c.Fragment,{children:[r,(0,c.jsx)(sO.T,{content:(0,c.jsx)("div",{className:"text-center",children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.commission_override_tooltip.".concat((0,fn.snakeCase)(e.record_type)))}),maxWidth:175,children:(0,c.jsx)(bt.JO,{type:"16-info",size:16,className:"ml-0.5"})})]}):r},bO=function(e,t,r,n){var i=!rO(r,n);return{id:"".concat((0,fn.snakeCase)(r.record_type),"-").concat(e.id),paywalls:pO(e,r.record_type),pricing:eO(e,r.record_type),commission:hO(r,i),actions:(0,c.jsx)(mO,{record:e,paywall:t,commissionSetting:r,parentCommissionSetting:n,isCommissionSettingOverridden:i})}},yO=function(e){var t,r,n,i=e.paywall,o=(0,(0,pr.Gc)().watch)("campaign[commission_setting_attributes]"),a=Qw().campaignCommissionSettingsOverridesAttributes;return(0,c.jsx)(Q.w,{columns:aO,data:(t=Yw(i,"Paywall",a),r=bO(i,i,t,o),n=i.prices.map((function(e){var r=Yw(e,"PaywallPrice",a);return bO(e,i,r,t)})),(0,fn.concat)(r,n)),children:(0,c.jsx)(Q.w.Table,{className:"mt-6 border-b pb-3 lg:mt-6",children:(0,c.jsx)(Q.w.Body,{})})})},vO=function(e){var t=e.paywalls;return 0===t.length?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.w,{columns:aO,data:[],children:(0,c.jsx)(Q.w.Table,{className:"mt-2 border-b lg:mt-2",children:(0,c.jsx)(Q.w.Header,{})})}),t.map(()]})};function gO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _O=function(){var e=(0,pr.Gc)().watch,t=e("campaign[apply_to_all_paywalls]"),r=e("campaign[paywall_ids]"),i=Qw().paywalls,o=gO((0,n.useState)(""),2),s=o[0],u=o[1];(0,n.useEffect)((function(){u("")}),[]);var d=(0,n.useMemo)((function(){return(0,fn.isEmpty)(i)?[]:i.filter((function(e){var t=e.display_name,n=!s;return!r.includes(e.id)&&(n||-1!==t.toLowerCase().search(s.toLowerCase()))})).map((function(e){return{value:e.id,text:e.display_name}}))}),[i,r,s]);return(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("div",{className:"form-section__header",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.title")})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(l.ZT.LabelMd,{color:"text-default",children:(0,a.t)("settings.paywalls_affiliates_settings.form.paywalls_section.description")}),(0,c.jsxs)("div",{className:"flex flex-col pb-6","data-testid":"affiliates-paywalls-list",children:[(0,c.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,c.jsx)("div",{className:"flex flex-col gap-y-4 pt-6",children:(0,c.jsxs)("div",{className:"flex flex-row gap-x-4 pb-3",children:[(0,c.jsx)(l.l0.Item,{name:"campaign[apply_to_all_paywalls]",hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,addFormGroupClass:!1,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"campaign[apply_to_all_paywalls]",variant:"small"})}),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("span",{className:"tighter text-default text-base font-normal normal-case  leading-7",children:(0,a.t)("settings.paywalls_affiliates_settings.form.apply_to_all_paywalls")})})]})})}),(0,c.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row","data-testid":"paywalls-field",children:!t&&(0,c.jsx)(l.l0.Item,{name:"campaign[paywall_ids]",hideBorder:!0,hideDescription:!0,fullWidth:!0,placeholder:(0,a.t)("settings.paywalls_affiliates_settings.form.apply_to_all_paywalls_placeholder"),addFormGroupClass:!1,children:(0,c.jsx)(l.l0.Select,{name:"campaign[paywall_ids]",variant:"tags",data:d,onSearch:function(e){u(e)},minSearchValueLength:0,showArrow:!1,hideSelectedItems:!0,showSearchIcon:!0,inputContainerClassName:"gap-3"})})}),(0,c.jsx)(vO,{paywalls:t?i:i.filter((function(e){return r.includes(e.id)}))})]})]})]})};function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jO(Object(r),!0).forEach((function(t){OO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function OO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PO=function(e,t){var r=function(e,t){if((0,fn.isNil)(e))return wO(wO({},t.parentCommissionSettingAttributes),{},{record_type:t.recordType,record_id:t.record.id,overridden:!1});var r=e.type,n=e.commission,i=e.recurring_frequency_cap,o=Ew(r)?{fixedCommission:n,percentCommission:0}:{fixedCommission:0,percentCommission:n},a=o.fixedCommission,s=o.percentCommission;return{record_type:e.record_type,record_id:e.record_id,type:r,fixed_commission:a,percent_commission:s,recurring_frequency_cap:i||1,enable_recurring_frequency_cap:!(0,fn.isNil)(i),overridden:!0}};return{getFormDefaults:function(){var n,i,o,a=function(){if((0,fn.isEmpty)(t))return{campaign:{apply_to_all_paywalls:!0,paywall_ids:[],commission_setting_attributes:{type:Aw.fixed}},program:{payout_type:Iw.paypal}};var e=t.campaign,n=e.days_until_commissions_become_due,i=e.apply_to_all_paywalls,o=e.paywall_ids,a=e.commission_setting,s=t.program.payout_type;return{campaign:{days_until_commissions_become_due:n,apply_to_all_paywalls:i,paywall_ids:o,commission_setting_attributes:r(a)},program:{payout_type:s}}}();return wO(wO({},a),{},{campaign:wO(wO({},a.campaign),{},{commission_settings_overrides_attributes:(n=a.campaign.commission_setting_attributes,i=t.campaign,o=(i=void 0===i?{commission_settings_overrides:[]}:i).commission_settings_overrides,(0,fn.flatten)(e.map((function(e){var t=Yw(e,"Paywall",o),i=r(t,{record:e,recordType:"Paywall",parentCommissionSettingAttributes:n}),a=e.prices.map((function(e){var t=Yw(e,"PaywallPrice",o);return r(t,{record:e,recordType:"PaywallPrice",parentCommissionSettingAttributes:i})}));return(0,fn.concat)(i,a)}))))})})}}},SO=function(e){return(0,Er.gN)(S.av.paywallsAffiliatesSettings.update(),e)};function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kO(Object(r),!0).forEach((function(t){NO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TO=function(e){var t=e.type,r=e.fixed_commission,n=e.percent_commission,i=e.recurring_frequency_cap,o=e.enable_recurring_frequency_cap,a=Ew(t)?(0,vr.Mz)(r):n,s=o?i:null;return CO(CO({},e),{},{commission:a,recurring_frequency_cap:s})};function AO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return EO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IO=function(e){var t=e.paywalls,r=e.paywallsAffiliatesSettings,i=(0,PO(t,r).getFormDefaults)(),o=AO((0,n.useState)(i.campaign.commission_settings_overrides_attributes),2),s=o[0],u=o[1],d=function(e,t){var r=(0,l.pm)(),n=r.success,i=r.error,o=(0,f.useMutation)((function(e){return SO(e)}),{onSuccess:function(){n((0,a.t)("settings.paywalls_affiliates_settings.alerts.success.updated"))},onError:function(e){i(e.errorDetails,{duration:"long"})}}),s=function(r){var n=r.apply_to_all_paywalls,i=r.paywall_ids,o=r.commission_setting_attributes,a=n?e:e.filter(();return(0,fn.flatten)(a.map((function(e){var r=Yw(e,"Paywall",t),n=rO(r,o)?null:TO(r),i=e.prices.map((function(e){var n=Yw(e,"PaywallPrice",t);return rO(n,r)?null:TO(n)}));return(0,fn.compact)((0,fn.concat)(n,i))})))};return{handleSubmit:function(e){var t=e.campaign,r=CO(CO({},e),{},{campaign:CO(CO({},t),{},{commission_setting_attributes:TO(t.commission_setting_attributes),commission_settings_overrides_attributes:s(t)})});return o.mutate(r)},updateMutation:o}}(t,s),m=d.handleSubmit,p=d.updateMutation;return(0,c.jsx)(Ww,{paywalls:t,campaignCommissionSettingsOverridesAttributes:s,setCampaignCommissionSettingsOverridesAttributes:u,children:(0,c.jsx)(l.l0,{onSubmit:m,defaultValues:i,children:function(e){var t=e.formState.isSubmitting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nO,{}),(0,c.jsx)(_O,{}),(0,c.jsx)("div",{className:"form-button",children:(0,c.jsx)($e.z,{type:"submit",variant:"circle",disabled:t||p.isLoading,children:(0,a.t)("save_changes")})})]})}})})},DO=function(){var e=(0,wr.g)(),t=e.activePaywalls,r=e.isLoading,n=Y_(),i=n.isLoading,o=n.paywallsAffiliatesSettings;return r||i?(0,c.jsx)(l.aN,{}):(0,c.jsx)(dn,{children:(0,c.jsx)(un,{children:(0,c.jsx)(IO,{paywalls:t,paywallsAffiliatesSettings:o})})})},LO=function(){var e=(0,v.wh)().currentCommunity.payment_processor,t=(0,Q_.l)({paymentProcessor:e}).paymentProcessorStatus;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:s().t("settings.paywalls_affiliates_settings.title")}),t===W_.J6.ENABLED?(0,c.jsx)($,{children:(0,c.jsx)(DO,{})}):(0,c.jsx)(K_.Q,{})]})},MO=r(43629);function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RO(Object(r),!0).forEach((function(t){BO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function BO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var VO=function(){var e,t,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.query,l=void 0===s?"":s,c=a.filters,u=void 0===c?{}:c,d=a.perPage,m=void 0===d?30:d,p=a.initialPage,h=void 0===p?1:p,b=a.options,y=["paywalls",l,u,m],v=FO({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===b?{}:b),g=(0,f.useInfiniteQuery)(y,(function(e){var t=e.pageParam,r=void 0===t?h:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,filters:function(e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var i=UO(n[r],2),o=i[0],a=i[1];t[o]=a}return t}(u),per_page:m};return l&&(i.query=l),(0,Er.UT)(S.av.search.paywalls.index({params:i}))}),v),x=(0,n.useMemo)((function(){var e;return(null===(e=g.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=g.data)||void 0===e?void 0:e.pages]),_=(null===(t=x[0])||void 0===t||null===(r=t.meta)||void 0===r?void 0:r.total_count)||0,j=(null===(i=x[0])||void 0===i?void 0:i.count)||0,w=(null===(o=x[0])||void 0===o?void 0:o.per_page)||m,O=(0,n.useMemo)((function(){return mw()(x.map((function(e){return e.records})))}),[x]);return FO(FO({},g),{},{queryKey:y,totalPaywalls:_,totalQueryPaywalls:j,paywalls:O,pageSize:w,pages:x})},ZO=function(){var e=(0,v.wh)(),t=e.currentCommunity,r=e.currentCommunitySettings,n=VO({filters:{status:[Hi.Tl.DRAFT,Hi.Tl.ACTIVE]}}).totalQueryPaywalls,i=VO({filters:{status:[Hi.Tl.INACTIVE]}}).totalQueryPaywalls,o=t.payment_processor;return{activeCount:n,archivedCount:i,shouldShowPaywallList:o&&o.status===MO.Q.ENABLED&&(!o.is_restricted_for_application_fees||(null===r||void 0===r?void 0:r.paywalls_for_restricted_country_enabled))}},HO=r(20633),qO=r(99741);function GO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WO="settings.paywalls.processor_status_v2.onboarding",QO=function(e){var t,r,n,i,o,s,l,u,d=e.status,m=(t=d,r=(0,f.useQuery)("community-onboarding",vn.$.getOnboarding),n=r.isError,i=r.isLoading,o=r.data,s=r.refetch,l=(0,f.useMutation)((function(e){return vn.$.completeOnboardingStep({onboarding:GO({},e,!0)})})).mutate,u=t===MO.Q.ENABLED,{shouldHideBanner:function(){return!u||n||i||(null===o||void 0===o?void 0:o.setup_paywall_creation)},closeBanner:function(){l("setup_paywall_creation",{onSuccess:function(){s()}})}}),p=m.shouldHideBanner,h=m.closeBanner,b=ZO(),v=b.activeCount,g=b.archivedCount,x=b.shouldShowPaywallList;if(p()||!x)return null;var _=v>=1||g>=1;return(0,c.jsxs)("div",{className:"bg-secondary border-primary flex w-full flex-col border-b md:flex-row",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-4 p-6 md:flex-row md:items-center md:gap-x-14 md:py-6 md:pl-12 md:pr-7",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col gap-y-4 md:w-2/3 md:gap-y-2",children:[(0,c.jsxs)("div",{className:"flex flex-row justify-between gap-x-2",children:[(0,c.jsx)(y.Z.TitleMd,{children:(0,a.t)([WO,"title"])}),_&&(0,c.jsx)(HO.h,{name:"20-close",buttonSize:28,iconSize:20,variant:"primary",iconClassName:"!text-dark",ariaLabel:(0,a.t)("close"),className:"block md:hidden",onClick:h})]}),(0,c.jsx)(y.Z.BodySm,{color:"text-default",children:(0,a.t)([WO,"subtitles"])[0]}),(0,c.jsx)(y.Z.BodySm,{color:"text-default",children:(0,a.t)([WO,"subtitles"])[1]}),(0,c.jsx)("div",{className:"pt-2",children:(0,c.jsx)($e.z,{variant:"secondary",onClick:function(){window.open("https://help.circle.so/c/paywall-setup/","_blank")},children:(0,a.t)("learn_more")})})]}),(0,c.jsxs)("a",{className:"text-dark hover:text-default focus:text-default grid justify-items-center md:w-1/3",href:"https://community.circle.so/c/tutorials/create-a-paywall",target:"_blank",rel:"noreferrer",children:[(0,c.jsx)("img",{alt:"",src:qO,className:"col-start-1 row-start-1 rounded-lg object-cover"}),(0,c.jsx)("div",{className:"col-start-1 row-start-1 flex flex-row",children:(0,c.jsx)("div",{className:"bg-primary self-center rounded-full p-2 drop-shadow-xl",children:(0,c.jsx)(bt.JO,{type:"arrow-right",className:"!w-10",useWithFillCurrentColor:!0})})})]})]}),_&&(0,c.jsx)("div",{className:"hidden pr-6 pt-6 md:block",children:(0,c.jsx)(HO.h,{name:"20-close",buttonSize:28,iconSize:20,variant:"primary",iconClassName:"!text-dark",ariaLabel:(0,a.t)("close"),onClick:h})})]})},KO=r(2394);function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JO(Object(r),!0).forEach((function(t){YO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function YO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var XO=function(e){var t=(0,To.Xt)().queryParams,r=(0,No.v)(),n=r.setPage,i=r.initialPage,o=(0,fn.omit)(t,["page","active","query","status"]),a=(0,fn.get)(t,"query","");return{paywallsInfiniteQuery:VO({perPage:30,initialPage:i,query:a,options:{keepPreviousData:!1},filters:$O({status:e},o)}),initialPage:i,setPage:n}},eP=function(){return XO([Hi.Tl.DRAFT,Hi.Tl.ACTIVE])},tP=function(){return XO([Hi.Tl.INACTIVE])},rP=nP=function(e){var t,r=e.status,n={active:{label:(0,a.t)("settings.paywalls.status.active"),variant:"success"},inactive:{label:(0,a.t)("settings.paywalls.status.inactive"),variant:"default"},draft:{label:(0,a.t)("settings.paywalls.status.draft"),variant:"default"},notIdentified:{label:"",variant:"default"}},i=null!==(t=n[r])&&void 0!==t?t:n.notIdentified;return(0,c.jsx)(Hr.O,{variant:i.variant,children:i.label})},iP=r(43037),oP=function(e){var t=e.checkoutPath,r=(0,oe.p)();return(0,c.jsx)("div",{className:"flex h-6 w-20 items-center",children:(0,c.jsxs)("button",{type:"submit",className:"text-dark flex items-center text-xs font-medium",onClick:function(){(0,iP.p)(t,".settings-paywalls-list"),r.success((0,a.t)("settings.paywalls.list.form.copy_url_toast"),{duration:"short",shouldUseProgress:!1})},children:[(0,c.jsx)("span",{className:"flex h-5 w-5",children:(0,c.jsx)(bt.JO,{type:"20-copy",size:20,className:"mr-2"})}),(0,c.jsx)("span",{children:(0,a.t)("settings.paywalls.list.form.copy_url")})]})})},aP=function(e){var t=e.paywall,r=S.qk.paywallsAdminDashboard.subscriptions({params:{paywalls:t.id}});return(0,c.jsx)(sn.rU,{className:"text-dark hover:text-dark visited:text-dark",to:r,children:t.total_active_recurring_subscribers})},sP=function(e){var t=e.paywall,r=S.qk.paywallsAdminDashboard.charges({params:{paywalls:t.id}});return(0,c.jsx)(sn.rU,{className:"text-dark hover:text-dark visited:text-dark",to:r,children:t.total_active_onetime_subscribers})},lP=r(75122),cP=function(e){var t=e.paywall,r=e.refetchPaywalls,n=(0,v.wh)().currentCommunityMember,i=(0,KO.I)();return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:children:(0,a.t)("settings.paywalls.list.form.edit")})},uP=function(e){var t=e.onClick;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:t,children:(0,a.t)("settings.paywalls.list.form.archive")})},dP=function(e){var t=e.paywall,r=e.onClick,n=(0,Hi._h)(t)?(0,a.t)("settings.paywalls.list.form.unarchive"):(0,a.t)("settings.paywalls.list.form.publish");return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:r,children:n})},fP=function(e){var t=e.onClick;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:t,hasDanger:!0,children:(0,a.t)("settings.paywalls.list.form.delete")})},mP=function(e){var t=e.onClick;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:t,children:(0,a.t)("settings.paywalls.list.form.view_as")})},pP=r(93826);function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hP(Object(r),!0).forEach((function(t){yP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vP=function(e){var t=e.paywall,r=e.action,i=e.onConfirm,o=(0,ne.yT)(),s=(0,n.useMemo)((function(){return function(e,t,r,n){return{title:(0,a.t)("settings.paywalls.confirmation_modal.".concat(t,".title"),{paywall_name:rP(e)}),confirmVariant:"danger",onConfirm:function(){r(),n.hide()}}}(t,r,i,o)}),[t,r,i,o]);return(0,c.jsx)(Gr.cV,bP(bP({isOpen:o.visible,onClose:o.hide},s),{},{children:(0,c.jsx)(pP.w,{content:(0,a.t)("settings.paywalls.confirmation_modal.".concat(r,".description"))})}))},gP=ne.uc.create((),xP=function(e){var t=e.paywall,r=e.refetchPaywalls,n=(0,v.wh)().currentCommunitySettings,i=function(e){var t=e.paywall,r=e.refetchPaywalls,n=(0,lP.B)({updateCallback:r,paywall:t}),i=n.publishMutation,o=n.archiveMutation,a=n.deleteMutation;return{publishPaywall:function(){return i.mutate()},archivePaywall:function(){return o.mutate()},deletePaywall:function(){return a.mutate()}}}({paywall:t,refetchPaywalls:r}),o=i.publishPaywall,a=i.archivePaywall,s=i.deletePaywall,l=(0,ne.yT)(gP),u=(0,Hi.zh)(t);return(0,c.jsxs)(Q.w.Actions,{children:[!(0,Hi._h)(t)&&(0,c.jsx)(cP,{paywall:t,refetchPaywalls:r}),u&&(0,c.jsx)(uP,{onClick:function(){return l.show({paywall:t,action:"archive",onConfirm:a})}}),!u&&(0,c.jsx)(dP,{paywall:t,onClick:o}),t.destroyable&&(0,c.jsx)(fP,{onClick:function(){return l.show({paywall:t,action:"delete",onConfirm:s})}}),n.masquerading_entities_enabled&&(0,c.jsx)(mP,{onClick:function(){return(0,Za.g)({entityId:t.id,entityType:"Paywall"}).then((function(e){return window.open(e.masquerade_url,"_self")})).catch((function(e){return console.error(e)}))}})]})},_P=["noRecordsText"];function jP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jP(Object(r),!0).forEach((function(t){OP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function OP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PP(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var SP=function(e){return[{accessorKey:"name",header:(0,a.t)("settings.paywalls.list.form.display_name_label"),accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)("span",{className:"font-medium",children:rP(e.getValue())})}},{accessorKey:"status",header:(0,a.t)("settings.paywalls.list.form.status_label"),cell:function(e){return(0,c.jsx)(nP,{status:e.getValue()})}},{accessorKey:"preferred_price",header:(0,a.t)("settings.paywalls.list.form.amount_label"),accessorFn:function(e){return e},cell:function(e){return t=e.getValue(),r=function(e){var t;return null!==(t=e.prices_attributes.find((function(e){return e.preferred})))&&void 0!==t?t:e.prices_attributes[0]}(t),r?r.short_description:(0,a.t)("settings.paywalls.list.form.no_preferred_price_selected");var t,r}},{accessorKey:"total_recurring_subscribers",header:(0,a.t)("settings.paywalls.list.form.subscribers"),accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)(aP,{paywall:e.getValue()})}},{accessorKey:"total_active_onetime_subscribers",header:(0,a.t)("settings.paywalls.list.form.purchases"),accessorFn:function(e){return e},cell:function(e){return(0,c.jsx)(sP,{paywall:e.getValue()})}},{accessorKey:"checkout_path",header:"",cellClassName:et.M.sm,cell:function(e){return(0,c.jsx)(oP,{checkoutPath:e.getValue()})}},{id:"actions",header:"",accessorFn:function(e){return e},cell:function(t){return(0,c.jsx)(xP,{paywall:t.getValue(),refetchPaywalls:e})}}]},kP=function(e){var t,r,n=e.noRecordsText,i=PP(e,_P),o=(t=eP().paywallsInfiniteQuery.refetch,r=tP().paywallsInfiniteQuery.refetch,{refetchPaywalls:function(){t(),r()}}).refetchPaywalls;return(0,c.jsx)(bo.J,wP(wP({columns:SP(o)},i),{},{children:(0,c.jsx)("div",{className:"flex h-full flex-col",children:(0,c.jsxs)("div",{className:"settings-paywalls-list max-w-full overflow-x-auto","data-testid":"settings-paywalls-list",children:[(0,c.jsxs)(Q.w.Table,{className:"w-full min-w-[800px]",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"md:w-80","data-testid":"name-column"}),(0,c.jsx)("col",{className:"md:w-40","data-testid":"preferred-price-column"}),(0,c.jsx)("col",{className:"min-w-[8rem]","data-testid":"status-column"}),(0,c.jsx)("col",{className:J()("min-w-[4rem]",et.M.sm),"data-testid":"copy-link-column"}),(0,c.jsx)("col",{className:"min-w-[2rem]","data-testid":"actions-column"})]}),(0,c.jsx)(Q.w.Header,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,c.jsx)("div",{className:"space__gated locked-pane no-shadow !border-0",children:n})}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})})}))},CP=function(e){var t=e.count;return(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.paywalls.count",{count:t})})})},NP=function(){var e,t=(0,l.pm)().error,r={isPaywallStatsLoading:(e=(0,f.useQuery)(S.av.admin.paywalls.stats.index())).isLoading,paywallStats:e.data,paywallStatsError:e.error},i=r.isPaywallStatsLoading,o=r.paywallStats,s=r.paywallStatsError;if((0,n.useEffect)((function(){s&&t(s.message)}),[s]),!i&&s)return null;var u=[{label:(0,a.t)("settings.paywall_snapshots.total_sales.label"),value:null===o||void 0===o?void 0:o.total_sales_display,tooltip:(0,a.t)("settings.paywall_snapshots.total_sales.tooltip")},{label:(0,a.t)("settings.paywall_snapshots.total_onetime_paywalls.label"),value:null===o||void 0===o?void 0:o.total_onetime_sales_amount_as_currency,tooltip:(0,a.t)("settings.paywall_snapshots.total_onetime_paywalls.tooltip")},{label:(0,a.t)("settings.paywall_snapshots.total_subscription_paywalls.label"),value:null===o||void 0===o?void 0:o.total_subscription_sales_amount_as_currency,tooltip:(0,a.t)("settings.paywall_snapshots.total_subscription_paywalls.tooltip")},{label:(0,a.t)("settings.paywall_snapshots.total_subscribers.label"),value:null===o||void 0===o?void 0:o.total_recurring_subscribers_display,tooltip:(0,a.t)("settings.paywall_snapshots.total_subscribers.tooltip")}];return(0,c.jsx)(c.Fragment,{children:i?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)("div",{className:"my-3 grid grid-cols-1 md:grid-cols-4 md:gap-6",children:u.map((function(e){return(0,c.jsx)(wg.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},TP=function(){var e,t,r=eP(),n=r.paywallsInfiniteQuery,i=r.initialPage,o=r.setPage,s=null===(e=n.data)||void 0===e||null===(t=e.pages[0].meta)||void 0===t?void 0:t.total_count,u=n.refetch,d=(0,v.wh)(),f=d.currentCommunity,m=d.currentCommunityMember,p=(0,Q_.l)({paymentProcessor:f.payment_processor}).paymentProcessorStatus,h=(0,KO.I)(),b=function(){return h.show({paywall:void 0,refetchPaywalls:u,paywallGroupsEnabled:m.policies.paywall_group_enabled})};return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[s>0&&(0,c.jsx)(CP,{count:s}),(0,c.jsxs)("div",{className:"isolate overflow-auto px-6",children:[(0,c.jsx)(NP,{}),(0,c.jsx)(kP,{infiniteQuery:n,initialPage:i,pageSize:30,onChangePage:function(e){o(e)},noRecordsText:p===W_.J6.ENABLED?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h3",{children:(0,a.t)("settings.paywalls.empty_collection_title")}),(0,c.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,a.t)("settings.paywalls.empty_collection_text")}}),(0,c.jsx)("br",{}),(0,c.jsx)(l.zx,{variant:"circle",onClick:b,children:(0,a.t)("settings.paywalls.buttons.new")})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h3",{children:(0,a.t)("settings.paywalls.empty_collection_title")}),(0,c.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,a.t)("settings.paywalls.not_enabled_empty_collection_text")}})]})})]})]})},AP=function(){var e,t,r=tP(),n=r.paywallsInfiniteQuery,i=r.initialPage,o=r.setPage,s=null===(e=n.data)||void 0===e||null===(t=e.pages[0].meta)||void 0===t?void 0:t.total_count;return(0,c.jsxs)("div",{className:"flex h-full flex-col overflow-auto",children:[s>0&&(0,c.jsx)(CP,{count:s}),(0,c.jsxs)("div",{className:"isolate overflow-auto px-6",children:[(0,c.jsx)(NP,{}),(0,c.jsx)(kP,{infiniteQuery:n,initialPage:i,pageSize:30,onChangePage:function(e){o(e)},noRecordsText:(0,c.jsx)("h3",{children:(0,a.t)("settings.paywalls.archived.empty_collection_title")})})]})]})};function EP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return IP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var DP=["active","archived"],LP="active",MP=function(e){var t=e.children,r=(0,dr.k6)(),i=(0,To.Xt)().queryParams,o=ZO(),s=o.activeCount,l=o.archivedCount,u=o.shouldShowPaywallList,d=i[LP]||DP[0],f=DP.indexOf(d),m=-1===f?0:f,p=EP((0,n.useState)(m),2),h=p[0],b=p[1];(0,n.useEffect)((function(){var e=DP.indexOf(d);b(-1===e?0:e)}),[b,d]);var y=u&&(l>0||"archived"==DP[h]);return(0,c.jsxs)(Uo.O.Group,{className:J()("flex h-full flex-col overflow-auto",{"border-primary border-t":!y}),selectedIndex:h,onChange:function(e){var t=(0,fn.pick)(i,["page","active","query","status"]),n=DP[e];t[LP]=n,t.page="1";var o=(0,S.UK)(t);r.push({search:o})},children:[y&&(0,c.jsxs)(Uo.O.List,{className:"block flex-none border-b px-6",children:[(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls.tabs.active"),(0,c.jsx)(Uo.O.Counter,{children:s})]}),(0,c.jsxs)(Uo.O,{children:[(0,a.t)("settings.paywalls.tabs.archived"),(0,c.jsx)(Uo.O.Counter,{children:l})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[t,u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(TP,{})}),y&&(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(AP,{})})]})]})]})},RP=function(){var e=(0,Mo.k)().shouldShowTrialBanner,t=(0,Fo.a)().is_v2_1_header_rendered;(0,Ro.t)();var r=(0,v.wh)().currentCommunity.payment_processor;return(0,c.jsx)("div",{className:J()("bg-primary relative overflow-auto",{"lg:h-[calc(100vh-4rem)]":!e&&!t,"lg:h-[calc(100vh-7rem)]":e&&!t||!e&&t,"lg:h-[calc(100vh-10rem)]":e&&t}),children:(0,c.jsxs)(MP,{children:[(0,c.jsx)(K_.Q,{}),(0,c.jsx)(QO,{status:null===r||void 0===r?void 0:r.status})]})})};function FP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return BP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var UP=function(){var e=eP().paywallsInfiniteQuery.refetch,t=(0,v.wh)(),r=t.currentCommunity,i=t.currentCommunityMember,o=t.currentCommunitySettings,s=r.payment_processor,u=(0,Q_.l)({paymentProcessor:s}).paymentProcessorStatus,d=(0,KO.I)(),f=u===W_.J6.ENABLED||u===W_.J6.RESTRICED_FOR_APPLICATION_FEES&&(null===o||void 0===o?void 0:o.paywalls_for_restricted_country_enabled),m=FP((0,n.useState)(!1),2),p=m[0],h=m[1];return f&&(0,c.jsxs)("div",{className:"flex w-full flex-row items-center justify-center gap-x-6","data-testid":"paywalls-header-right",children:[(0,c.jsxs)("div",{className:"hidden flex-row items-end justify-center gap-x-1 align-middle sm:flex",children:[(0,c.jsx)(sO.T,{placement:"bottom",delay:400,interactive:!0,animation:!1,onTrigger:function(){return h(!0)},onUntrigger:function(){return h(!1)},dataTestId:"stripe-icon-status",render:function(){return(0,c.jsx)(ml.u,{show:p,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"bg-primary border-primary w-96 rounded-lg border px-5 py-3 drop-shadow-xl",tabIndex:0,children:(0,c.jsx)(pP.w,{content:(0,a.t)("settings.paywalls.processor_status_v2.enabled.description",{account_email:s.email}),dataTestId:"processor-enabled-description"})})},children:s.is_restricted_soon?(0,c.jsx)(bt.JO,{type:"20-alert",className:"text-v2-warning"}):(0,c.jsx)(bt.JO,{type:"20-checkmark-circle",className:"text-v2-success"})}),(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)("settings.paywalls.processor_status_v2.enabled.title")})]}),(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){return d.show({paywall:void 0,refetchPaywalls:e,paywallGroupsEnabled:i.policies.paywall_group_enabled})},children:(0,a.t)("settings.paywalls.buttons.new")})]})},zP=function(){return(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.paywalls.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"view-paywalls"},rightContent:(0,c.jsx)(UP,{})})},VP=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(A.S,{bodyClassNames:"no-border-header",title:(0,a.t)("settings.paywalls.title")}),(0,c.jsx)(L,{disableRightSidebar:!0}),(0,c.jsx)(zP,{}),(0,c.jsx)(RP,{})]})},ZP=function(e){var t,r=e.currentPlan,n=e.refetchCurrentPlan,i=Ze(),o=r.plan_addons_total_amount_with_interval;return(0,c.jsxs)("div",{className:"bg-primary my-6 rounded-lg border border-gray-200 px-8 py-7",children:[(0,c.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"bold",children:(0,a.t)("settings.billing.add_ons.my_addons")}),(0,c.jsx)(l.ZT.TitleSm,{weight:"bold",children:o})]}),null===r||void 0===r||null===(t=r.plan_addons)||void 0===t?void 0:t.map((function(e){return(0,c.jsxs)("div",{className:"flex justify-between gap-3 pb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)(l.ZT.LabelSm,{children:[e.value," ",e.label]}),"number"==typeof e.remaining_resources&&(0,c.jsx)(l.ZT.LabelSm,{color:"text-light pl-2",children:(0,a.t)("settings.billing.add_ons.remaining_resources",{count:e.remaining_resources})})]}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:e.amount_with_interval})})]},e.community_plan_addon_id)})),(0,c.jsx)("button",{type:"button",onClick:function(){return i.show({refetchCurrentPlan:n})},children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-messaging-info-blue",children:(0,a.t)("settings.billing.add_ons.manage_add_ons")})})]})},HP=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,f.useQuery)(["community-current-plan"],(function(){return(0,Er.UT)(S.av.communities.plans.show({forceFromSubscription:e}))}),{retry:10});return{currentPlan:t.data,isCurrentPlanLoading:t.isLoading,errorFecthingCurrentPlan:t.error,refetchCurrentPlan:t.refetch,isRefetchingCurrentPlan:t.isRefetching}},qP=function(e){var t=e.item,r=e.labelTranslation,n=e.label,i=e.amountColor,o=void 0===i?"text-dark":i,s=e.labelColor,u=void 0===s?"text-dark":s;return(0,c.jsx)(c.Fragment,{children:t&&(0,c.jsxs)("div",{className:"flex justify-between pb-2",children:[(0,c.jsx)(l.ZT.LabelSm,{color:u,children:r?(0,a.t)("settings.billing.preview_invoice.".concat(r)):n}),(0,c.jsx)(l.ZT.LabelSm,{color:o,children:t})]})})},GP=r(82606),WP=Object.freeze({PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging"}),QP=function(){return(0,Er.Cu)(S.av.accountPaymentProcessors.billingPortal.create(),{})},KP=function(e){var t,r,n=e.cancellingMetadata,i=(t=(0,l.pm)().error,{onGenerateBillingPortalUrl:function(){r.mutate()},isCreatingBillingPortal:(r=(0,f.useMutation)(QP,{onSuccess:function(e){e.url?window.location.replace(e.url):t((0,a.t)("pricing_plans.payment_processor.errors.billing_portal"))},onError:function(e){console.error(e),t((0,a.t)("pricing_plans.payment_processor.errors.billing_portal"))}})).isLoading}),o=i.onGenerateBillingPortalUrl,s=i.isCreatingBillingPortal,u=window.RAILS_ENV===WP.PRODUCTION?"UJB6AB55":"nH21fEOM";return(0,c.jsxs)("div",{className:"border-t border-gray-200 py-5",children:[s&&(0,c.jsx)(l.aN,{variant:"fullscreen"}),["view_invoices","manage_card","manage_billing_address"].map((function(e){return(0,c.jsx)("div",{className:"mb-2",children:(0,c.jsx)("button",{type:"button",onClick:o,children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-messaging-info-blue",children:(0,a.t)("pricing_plans.".concat(e))})})},e)})),n&&(0,c.jsx)(GP.PopupButton,{id:u,size:66,medium:"demo-test",hidden:n,children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-messaging-info-blue",children:(0,a.t)("pricing_plans.cancel_plan")})})]})},JP=function(e){var t=e.currentPlan,r=e.showBillingPortal;return t?(0,c.jsxs)("div",{className:"bg-primary my-6 rounded-lg border border-gray-200 px-8 py-7",children:[(0,c.jsx)("div",{className:"mb-6 flex justify-between",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"bold",children:(0,a.t)("settings.billing.billing_cycle.title")})}),t.upcoming_invoice_next_payment_date&&(0,c.jsxs)("div",{className:"mb-5 flex justify-between border-b border-gray-200 pb-5",children:[(0,c.jsx)(l.ZT.LabelSm,{color:"text-light",children:(0,a.t)("settings.billing.preview_invoice.next_billing_date")}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-light",children:t.upcoming_invoice_next_payment_date})]}),t.upcoming_invoice_subtotal!=t.upcoming_invoice_amount_due&&(0,c.jsx)(qP,{item:t.upcoming_invoice_subtotal,labelTranslation:"subtotal"}),t.upcoming_invoice_coupon_amount&&(0,c.jsx)(qP,{item:t.upcoming_invoice_coupon_amount,label:(0,a.t)("settings.billing.preview_invoice.coupon_terms",{coupon_name:t.upcoming_invoice_coupon_name,discount:t.upcoming_invoice_coupon_terms}),labelColor:"text-light",amountColor:"text-v2-success"}),t.upcoming_invoice_tax&&(0,c.jsx)(qP,{item:t.upcoming_invoice_tax,labelTranslation:"tax"}),t.upcoming_invoice_balance&&(0,c.jsx)(qP,{item:t.upcoming_invoice_balance,labelTranslation:"balance",amountColor:"text-v2-success"}),(0,c.jsx)(qP,{item:t.upcoming_invoice_amount_due,labelTranslation:"amount_due"}),r&&(0,c.jsx)(KP,{cancellingMetadata:t.cancelling_metadata})]}):null},$P=r(95295),YP=function(e){var t=e.count,r=e.remainingValue;return(0,c.jsxs)("div",{className:"flex gap-3 pb-2",children:[(0,c.jsx)(bt.JO,{type:"check",size:16}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-dark",children:t}),"number"==typeof r&&(0,c.jsx)(l.ZT.LabelSm,{color:"text-light",children:(0,a.t)("pricing_plans.features_with_values.remaining_resources",{count:r})})]})},XP=function(e){var t=e.currentPlan;return(0,c.jsxs)("div",{className:"bg-primary border-primary rounded-lg border px-8 py-7",children:[(0,c.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,a.t)("settings.billing.plans.".concat(t.tier))}),(0,c.jsx)(l.ZT.TitleSm,{weight:"bold","data-testid":"plan-price",children:(0,$P.gR)(t.tier)?t.annual_base_amount_with_interval:t.base_amount_with_interval})]}),(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)("settings.billing.your_plan")})}),(0,c.jsx)(YP,{count:t.max_space_count,remainingValue:t.remaining_max_space_count}),(0,c.jsx)(YP,{count:t.max_admin_count,remainingValue:t.remaining_max_admin_count}),(0,c.jsx)(YP,{count:t.max_moderator_count,remainingValue:t.remaining_max_moderator_count}),(0,c.jsx)(YP,{count:t.max_member_count,remainingValue:t.remaining_max_member_count}),(0,c.jsx)(YP,{count:t.live_stream_max_host_capacity}),(0,c.jsx)(YP,{count:t.live_stream_max_spectator_capacity}),(0,c.jsx)(YP,{count:t.live_stream_monthly_stream_hours,remainingValue:t.remaining_live_stream_monthly_stream_hours}),(0,c.jsx)(YP,{count:t.live_stream_recording_hours,remainingValue:t.remaining_live_stream_recording_hours}),(0,c.jsx)(YP,{count:t.live_room_participants_capacity})]})},eS=function(e){var t=e.showBillingPortal,r=e.showAddons,n=e.forceFromSubscription,i=void 0===n||n,o=e.showBillingDetails,s=void 0===o||o,l=HP(i),u=l.currentPlan,d=l.isCurrentPlanLoading,f=l.errorFecthingCurrentPlan,m=l.refetchCurrentPlan;return d?(0,c.jsx)(gd.a,{center:!0}):f||!u?(0,c.jsx)(Vc.b,{title:(0,a.t)("settings.billing.plans.errors.plan_not_found"),type:"alert"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(XP,{currentPlan:u}),r&&(0,c.jsx)(ZP,{currentPlan:u,refetchCurrentPlan:m}),s&&(0,c.jsx)(JP,{currentPlan:u,showBillingPortal:t})]})},tS=function(e){var t=e.name,r=e.email,n=e.image;return(0,c.jsxs)("div",{className:"inline-block rounded-lg border border-gray-200",children:[(0,c.jsx)("img",{alt:"",src:n,className:"rounded-t-lg"}),(0,c.jsxs)("div",{className:"p-5",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:t})}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{children:(0,a.t)("settings.billing.account_manager.contact")})}),(0,c.jsx)("div",{className:"pt-6",children:(0,c.jsx)(g_.Q,{href:"mailto:".concat(r),variant:"circle",children:(0,a.t)("settings.billing.account_manager.message")})})]})]})},rS=function(e){var t=e.isExpired,r=(0,v.wh)().currentCommunity.csm,n=!t;return(0,c.jsxs)("div",{className:"bg-primary h-full pb-10",children:[(0,c.jsxs)("div",{className:"bg-secondary px-5 py-20 xl:px-40",style:{backgroundColor:"#191B1F"},children:[(0,c.jsx)(lu.g,{label:(0,a.t)("settings.billing.your_membership"),inverted:!0,square:!0}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.TitleXxl,{color:"text-white",children:(0,a.t)("settings.billing.plans.plus")})})]}),t&&(0,c.jsx)("div",{className:"mt-20 px-5 xl:flex xl:px-40",children:(0,c.jsx)(Vc.b,{className:"!w-full",title:(0,a.t)("settings.billing.plans.errors.canceled_plus_subscription"),type:"warning"})}),(0,c.jsxs)("div",{className:"mt-20 px-5 xl:flex xl:px-40",children:[(0,c.jsx)("div",{className:"grow pr-6",children:(0,c.jsx)(eS,{showBillingDetails:n,forceFromSubscription:!1})}),r&&(0,c.jsx)("div",{children:(0,c.jsx)(tS,{name:r.name,email:r.email,image:r.profile_image})})]})]})},nS=r(26953),iS=r(46770),oS=r(42373);function aS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lS=(0,n.createContext)(void 0);lS.displayName="PlansContext";var cS=function(){var e=(0,n.useContext)(lS);if(!e)throw new Error("usePlans must be used within a PlansProvider");return e},uS=function(e){var t=e.currentCommunity,r=e.isAffiliatesPhase1Enabled,i=e.children,o=(0,dr.TH)(),s=HP(),u=s.currentPlan,d=s.isCurrentPlanLoading,m=s.refetchCurrentPlan,p=(0,re.E)(),h=p.isCommunityOnTrial,b=p.isExpiredTrial,y=(0,n.useCallback)((function(){return h||b?iS.ff.year:!d&&u?u.interval:iS.ff.year}),[h,d,u,b]),v=aS((0,n.useState)(null),2),g=v[0],x=v[1],_=function(){var e=(0,l.pm)(),t=e.success,r=e.error,n=(0,dr.k6)(),i=(0,f.useMutation)((function(e){return oS.b.renew(e)}),{onSuccess:function(){n.push((0,S.f$)()),t((0,a.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,a.t)("pricing_plans.errors.renew_error"))}}),o=i.mutate,s=i.isLoading,c=(0,f.useMutation)((function(e){return oS.b.update(e)}),{onSuccess:function(){n.push((0,S.f$)()),t((0,a.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,a.t)("pricing_plans.errors.update_subscription_error"))}});return{renewSubscription:o,isRenewLoading:s,updateSubscription:c.mutate,isUpdatingSubscription:c.isLoading}}(),j=_.renewSubscription,w=_.isRenewLoading,O=_.updateSubscription,P=_.isUpdatingSubscription,k=function(e){var t,r=e.billing_cycle,n=(0,f.useQuery)(["plans",r],(function(){return vn.Q2.fetchPlans({billing_cycle:r})}),{enabled:!!r}),i=n.data,o=n.isLoading,a=n.error,s=n.refetch,l=n.isRefetching;return{plans:null!==(t=null===i||void 0===i?void 0:i.plans)&&void 0!==t?t:[],isPlansLoading:o,errorFetchingPlans:a,refetchPlans:s,isRefetchingPlans:l}}({billing_cycle:g}),C=k.plans,N=k.isPlansLoading,T=k.refetchPlans;(0,n.useEffect)((function(){var e=new URLSearchParams(o.search).get("billing_cycle");e?x(e):u&&x(y())}),[o,y,u]);var A=N||d;return(0,c.jsx)(lS.Provider,{value:{plans:C,isPlansLoading:N,currentPlan:u,isCurrentPlanLoading:d,billingCycle:g,renewSubscription:j,isRenewLoading:w,updateSubscription:O,isUpdatingSubscription:P,refetchPlans:T,refetchCurrentPlan:m,isListingPlans:A,currentCommunity:t,isAffiliatesPhase1Enabled:r},children:i})},dS=function(e){var t=e.interval,r=e.isSelected,n=e.label,i=(0,S.ho)(t),o=r(t)?"bg-primary !text-dark":"";return(0,c.jsx)(sn.rU,{to:i,className:"hover:text-darkest text-dark w-1/2 rounded-lg p-2 text-center align-baseline md:p-1 ".concat(o),children:n})},fS=function(){var e=cS(),t=e.billingCycle,r=e.currentPlan,n=e.currentCommunity,i=function(e){return!t&&r&&r[e]?!n.is_on_trial:t===e};return(0,iS.Km)(r)?(0,c.jsxs)("div",{className:"mb-8 md:mb-0 md:mr-2 md:pr-2",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,a.t)("pricing_plans.billing_cycle.title")}),(0,c.jsxs)("div",{className:"bg-tertiary mt-6 flex w-full flex-row space-x-1 rounded-lg p-1 text-sm",children:[(0,c.jsx)(dS,{interval:"month",isSelected:i,label:(0,a.t)("pricing_plans.billing_cycle.monthly")}),(0,c.jsx)(dS,{interval:"year",isSelected:i,label:(0,a.t)("pricing_plans.billing_cycle.annually")})]})]}):(0,c.jsx)("div",{})},mS=function(){return(0,c.jsx)("div",{className:"mr-2",children:(0,c.jsx)(bt.JO,{type:"check",size:16})})},pS=function(e){return e.value?(0,c.jsx)(mS,{}):(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:"\u2013"})},hS=function(e){var t=e.children;return(0,c.jsx)("div",{className:"border-primary flex items-center border-y border-t-0 py-4",children:t})},bS=function(e){var t=e.value,r=e.hideCheckIcon,n=void 0!==r&&r,i=e.className;return(0,c.jsxs)("div",{className:J()("flex items-center",i),children:[!n&&(0,c.jsx)(mS,{}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:t})]})};function yS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gS=function(e){var t=e.title,r={basic:e.basic,professional:e.professional,business:e.business,enterprise:e.enterprise};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(hS,{children:(0,c.jsx)(bS,{className:"pr-5",value:t,hideCheckIcon:!0})}),Object.entries(r).map((function(e){var t=yS(e,2),r=t[0],n=t[1];return(0,c.jsx)(hS,{children:"string"===typeof n?(0,c.jsx)(bS,{value:n}):(0,c.jsx)(pS,{value:!!n})},r)}))]})},xS=function(e){var t=e.value,r=e.suffix,n=void 0===r?"":r,i=0===t||!t;return(0,c.jsx)("div",{className:"flex items-center",children:i?(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:"-"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(mS,{}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,iS.tL)(t)?(0,a.t)("settings.billing.unlimited"):"".concat(t).concat(n)})]})})},_S=function(e){var t=e.title,r=e.feature,n=e.suffix,i=cS().plans;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(hS,{children:(0,c.jsx)(bS,{className:"pr-5",value:t,hideCheckIcon:!0})}),i.map((function(e){var t=e.plan_feature_flags[r],i="number"===typeof t;return(0,c.jsx)(hS,{children:i?(0,c.jsx)(xS,{value:t,suffix:n}):(0,c.jsx)(pS,{value:!!t})},e.id)}))]})},jS="grid-cols-".concat(5),wS="pricing_plans.annual_only",OS=function(e){var t=e.sectionName,r=e.children;return(0,c.jsxs)("div",{className:"bg-primary mb-12",children:[(0,c.jsx)("div",{className:"grid ".concat(jS," bg-primary sticky top-64"),children:(0,c.jsx)("div",{className:"mb-2",children:(0,c.jsx)(y.Z.LabelMd,{color:"text-light",weight:"bold",textTransform:"uppercase",children:t})})}),(0,c.jsx)("div",{className:"grid ".concat(jS),children:r})]})};function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function SS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PS(Object(r),!0).forEach((function(t){kS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var CS=function(){var e=cS(),t=e.currentPlan,r=e.isAffiliatesPhase1Enabled;return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.features"),children:[(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.custom_domain"),feature:iS.GY.custom_domain}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.private_spaces"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.bulk_import_export"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.notifications"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.member_profiles_directory"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.moderation_basic"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.direct_messaging"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.group_chat"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.email_digest"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.events"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.gdpr_compliant"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.ios_app"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.chat_spaces"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.scheduled_posts"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.custom_snippets"),feature:iS.GY.custom_css}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.zapier"),feature:iS.GY.zapier_token_automatic_creation}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.integrately"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.embed"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.white_labelling"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.moderation_automated"),feature:iS.GY.automated_moderation}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.advanced_reporting"),feature:iS.GY.advanced_reporting}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.color_themes"),basic:!1,professional:!0,business:!0,enterprise:!0}),function(e){var t={title:(0,a.t)("pricing_plans.feature.courses")};return e.show_pro_grandfathered_for_courses?(0,c.jsx)(gS,SS(SS({},t),{},{basic:!1,professional:!0,business:!0,enterprise:!0})):(0,c.jsx)(_S,SS(SS({},t),{},{feature:iS.GY.courses}))}(t),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.conversion_tracking_code"),feature:iS.GY.paywall_conversion_tracking_code}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.automated_workflows"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.custom_profile_fields"),feature:iS.GY.profile_fields_enabled}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.api_access"),feature:iS.GY.api_access}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.sender_email_customization"),basic:!1,professional:!1,business:!0,enterprise:!0}),r&&(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.affiliates"),feature:iS.GY.affiliates})]})},NS=function(e){var t=e.tooltipKey,r=e.tooltipProps;return(0,c.jsx)(sO.T,{className:"flex items-center",content:(0,a.t)(t,r),children:(0,c.jsx)(bt.JO,{type:"16-info",size:16,className:"ml-2"})})},TS=function(e){var t=e.plan,r=e.feature,n=t.plan_feature_flags[r],i=t.legacy_limits_info[r],o=i&&i.is_legacy_limit,s=null===i||void 0===i?void 0:i.current_plan_value,l=(0,a.t)("settings.billing.".concat(r)),u=r===iS.GY.max_member_count&&t.unlimited_members;return(0,c.jsxs)(hS,{children:[u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(bS,{value:(0,a.t)("settings.billing.unlimited")}),(0,c.jsx)(NS,{tooltipKey:"settings.billing.unlimited_members_tooltip",tooltipProps:{total:s,resource:l}})]}):(0,c.jsx)(xS,{value:n}),o&&(0,c.jsx)(NS,{tooltipKey:"settings.billing.legacy_limits_tooltip",tooltipProps:{total:s,resource:l}})]})},AS=function(e){var t=e.featureFlagKeys,r=cS().plans;return(0,c.jsx)(c.Fragment,{children:t.map((function(e){return(0,iS.FV)(e)?null:(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(hS,{children:(0,c.jsx)(bS,{hideCheckIcon:!0,value:(0,a.t)("pricing_plans.feature.".concat(e)),className:"pr-5"})}),r.map((function(t){return(0,c.jsx)(TS,{plan:t,feature:e},t.id)}))]},e)}))})},ES=function(){return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.community"),children:[(0,c.jsx)(AS,{featureFlagKeys:[iS.GY.max_member_count,iS.GY.max_admin_count,iS.GY.max_moderator_count,iS.GY.max_space_count]}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.transaction_fees"),feature:iS.GY.payments_fee_percentage,suffix:"%"}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.total_storage"),basic:(0,a.t)("pricing_plans.feature.total_storage_basic"),professional:(0,a.t)("pricing_plans.feature.total_storage_professional"),enterprise:(0,a.t)("pricing_plans.feature.total_storage_enterprise"),business:(0,a.t)("pricing_plans.feature.total_storage_business")})]})},IS=DS=function(e,t){return function(r){if(Array.isArray(null===r||void 0===r?void 0:r.plan_addons_info)){var n=r.plan_addons_info.find(();return n&&n[e]?n[e][t]:void 0}}},LS=function(e,t,r){var n=e.find(IS(t)),i=function(e){return DS(e,"value")}(r)(n);return null!==i&&void 0!==i?i:""},MS=function(e,t,r){var n=e.find(IS(t)),i=function(e){return DS(e,"monthly_amount")}(r)(n);return null!==i&&void 0!==i?i:""},RS=function(){var e=cS(),t=e.plans;if(e.isPlansLoading)return(0,c.jsx)(l.aN,{center:!0});var r="settings.billing.add_ons.manage",n="settings.billing.add_ons.included";return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.community"),children:[(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.manage.admins"),professional:(0,a.t)("".concat(r,".admins_description"),{amount:MS(t,$P.Gb.professional,iS.GY.max_admin_count)}),business:(0,a.t)("".concat(r,".admins_description"),{amount:MS(t,$P.Gb.business,iS.GY.max_admin_count)}),enterprise:(0,a.t)("".concat(r,".admins_description"),{amount:MS(t,$P.Gb.enterprise,iS.GY.max_admin_count)})}),(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.manage.moderators"),professional:(0,a.t)("".concat(r,".moderators_description"),{quantity:LS(t,$P.Gb.professional,iS.GY.max_moderator_count),amount:MS(t,$P.Gb.professional,iS.GY.max_moderator_count)}),business:(0,a.t)("".concat(r,".moderators_description"),{quantity:LS(t,$P.Gb.business,iS.GY.max_moderator_count),amount:MS(t,$P.Gb.business,iS.GY.max_moderator_count)}),enterprise:(0,a.t)("".concat(r,".moderators_description"),{quantity:LS(t,$P.Gb.enterprise,iS.GY.max_moderator_count),amount:MS(t,$P.Gb.enterprise,iS.GY.max_moderator_count)})}),(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.manage.spaces"),professional:(0,a.t)("".concat(r,".spaces_description"),{quantity:LS(t,$P.Gb.professional,iS.GY.max_space_count),amount:MS(t,$P.Gb.professional,iS.GY.max_space_count)}),business:(0,a.t)("".concat(r,".spaces_description"),{quantity:LS(t,$P.Gb.business,iS.GY.max_space_count),amount:MS(t,$P.Gb.business,iS.GY.max_space_count)}),enterprise:(0,a.t)("".concat(r,".spaces_description"),{quantity:LS(t,$P.Gb.enterprise,iS.GY.max_space_count),amount:MS(t,$P.Gb.enterprise,iS.GY.max_space_count)})}),(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.manage.email_white_labeling"),professional:(0,a.t)("settings.billing.add_ons.manage.email_white_labeling_description",{amount:MS(t,$P.Gb.professional,iS.GY.email_whitelist)}),business:(0,a.t)(n),enterprise:(0,a.t)(n)}),(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.manage.profile_fields"),professional:(0,a.t)("settings.billing.add_ons.manage.profile_fields_description",{amount:MS(t,$P.Gb.professional,iS.GY.profile_fields_enabled)}),business:(0,a.t)(n),enterprise:(0,a.t)(n)})]})},FS=function(){return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.community_ai"),children:[(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.content_co_pilot"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.automated_transcriptions"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.activity_scores"),basic:!1,professional:!1,business:!0,enterprise:!0})]})},BS=function(e){var t=e.children;return(0,c.jsx)("div",{className:"grid ".concat(jS),children:(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)(y.Z.TitleSm,{weight:"bold",children:t})})})},US=function(){return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.live_streams"),children:[(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.live_stream_max_spectator_capacity"),feature:iS.GY.live_stream_max_spectator_capacity}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.live_room_participants"),feature:iS.GY.live_room_participants_capacity}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.live_stream_hosts"),feature:iS.GY.live_stream_max_host_capacity}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.live_stream_monthly_stream_hours"),feature:iS.GY.live_stream_monthly_stream_hours}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.live_stream_recording_storage"),professional:(0,a.t)("pricing_plans.feature.live_stream_recording_storage_professional"),enterprise:(0,a.t)("pricing_plans.feature.live_stream_recording_storage_enterprise"),business:(0,a.t)("pricing_plans.feature.live_stream_recording_storage_business")})]})},zS=function(){var e=cS(),t=e.plans;return e.isPlansLoading?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(OS,{sectionName:(0,a.t)("settings.billing.add_ons.live_stream.title"),children:[(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.live_stream.live_attendees"),professional:(0,a.t)("settings.billing.add_ons.live_stream.live_attendees_professional",{amount:MS(t,$P.Gb.professional,iS.GY.live_stream_max_spectator_capacity)}),enterprise:(0,a.t)("settings.billing.add_ons.live_stream.live_attendees_enterprise"),business:(0,a.t)("settings.billing.add_ons.live_stream.live_attendees_business",{amount:MS(t,$P.Gb.business,iS.GY.live_stream_max_spectator_capacity)})}),(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.live_stream.hours"),professional:(0,a.t)("settings.billing.add_ons.live_stream.hours_professional",{amount:MS(t,$P.Gb.professional,iS.GY.live_stream_recording_hours)}),enterprise:(0,a.t)("settings.billing.add_ons.live_stream.hours_enterprise",{amount:MS(t,$P.Gb.enterprise,iS.GY.live_stream_recording_hours)}),business:(0,a.t)("settings.billing.add_ons.live_stream.hours_business",{amount:MS(t,$P.Gb.business,iS.GY.live_stream_recording_hours)})}),(0,c.jsx)(gS,{title:(0,a.t)("settings.billing.add_ons.live_stream.video_storage"),professional:(0,a.t)("settings.billing.add_ons.live_stream.video_storage_professional",{amount:MS(t,$P.Gb.professional,iS.GY.live_stream_recording_hours)}),enterprise:(0,a.t)("settings.billing.add_ons.live_stream.video_storage_enterprise",{amount:MS(t,$P.Gb.enterprise,iS.GY.live_stream_recording_hours)}),business:(0,a.t)("settings.billing.add_ons.live_stream.video_storage_business",{amount:MS(t,$P.Gb.business,iS.GY.live_stream_recording_hours)})})]})},VS=function(){return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.services"),children:[(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.concierge"),basic:!1,professional:!1,enterprise:(0,a.t)(wS),business:!1}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.support_dedicated"),basic:!1,professional:!1,enterprise:(0,a.t)(wS),business:!1}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.business_review"),basic:!1,professional:!1,enterprise:(0,a.t)(wS),business:!1}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.payments_migration"),basic:!1,professional:!1,enterprise:(0,a.t)(wS),business:(0,a.t)(wS)}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.courses_migration"),basic:!1,professional:!1,enterprise:(0,a.t)(wS),business:(0,a.t)(wS)})]})};function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function HS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZS(Object(r),!0).forEach((function(t){qS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GS=function(){var e=[{title:(0,a.t)("pricing_plans.feature.facebook"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.twitter"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.memberstack"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.memberspace"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.teachable"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.memberful"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.wordpress"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.bubble"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.outseta"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.auth0"),basic:!1,professional:!1,business:!1,enterprise:!0},{title:(0,a.t)("pricing_plans.feature.custom_oauth"),basic:!1,professional:!1,business:!1,enterprise:!0}];return(0,c.jsx)(OS,{sectionName:(0,a.t)("pricing_plans.section.sso"),children:e.map((function(e){return(0,n.createElement)(gS,HS(HS({},e),{},{key:e.title}))}))})},WS=function(){return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.support"),children:[(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.circle_community"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.support_basic"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.support_priority"),basic:!1,professional:!1,business:!1,enterprise:(0,a.t)(wS)}),(0,c.jsx)(gS,{title:(0,a.t)("pricing_plans.feature.beta_features"),basic:!1,professional:!1,business:!1,enterprise:(0,a.t)(wS)})]})},QS=function(){return(0,c.jsxs)(OS,{sectionName:(0,a.t)("pricing_plans.section.workflows"),children:[(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.workflows.automations"),feature:iS.GY.max_dynamic_workflows_count}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.workflows.scheduled_workflows"),feature:iS.GY.max_scheduled_workflows_count}),(0,c.jsx)(_S,{title:(0,a.t)("pricing_plans.feature.workflows.bulk_actions"),feature:iS.GY.max_bulk_action_workflows_count,suffix:(0,a.t)("pricing_plans.per_month")})]})},KS=function(){return(0,c.jsxs)("div",{children:[(0,c.jsx)(BS,{children:(0,a.t)("plans.index.usage")}),(0,c.jsx)(ES,{}),(0,c.jsx)(QS,{}),(0,c.jsx)(US,{}),(0,c.jsx)(CS,{}),(0,c.jsx)(FS,{}),(0,c.jsx)(BS,{children:(0,a.t)("settings.billing.add_ons.title")}),(0,c.jsx)(RS,{}),(0,c.jsx)(zS,{}),(0,c.jsx)(GS,{}),(0,c.jsx)(WS,{}),(0,c.jsx)(VS,{})]})};function JS(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function $S(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){JS(o,n,i,a,s,"next",e)}function s(e){JS(o,n,i,a,s,"throw",e)}a(void 0)}))}}var YS=function(e){var t=e.plan,r=cS(),n=r.renewSubscription,i=r.updateSubscription,o=r.refetchPlans,s=r.refetchCurrentPlan,l=(0,dr.k6)(),u=(0,xu.w)(),d=f=function(){o(),s()},m=function(){var e=$S(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.push("/home"),e.next=3,u.hide();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=$S(se().mark((function e(){var t,r=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,e.next=3,u.show({planId:d(),onSuccess:m,successButtonLabel:(0,a.t)("pricing_plans.change_plan.go_to_community"),showPlanDetails:!1,onCloseModal:f,couponId:t});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=$S(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=$S(se().mark((function e(){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(null===(r=t.plan_coupon)||void 0===r?void 0:r.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){i(d())},v=function(){n(d())},g=function(){return null};if((0,iS.Kj)(t.plan_action))return(0,c.jsx)("button",{type:"button",onClick:function(){window.open("mailto:support@circle.so","emailWindow")},children:(0,a.t)("pricing_plans.actions.contact_cx")});var x,_,j=(0,a.t)((x=t.plan_action,"pricing_plans.actions.".concat(x)));return(0,c.jsx)($e.z,{variant:(_=t.plan_action,(0,iS.sR)(_)||(0,iS.NU)(_)?"primary":(0,iS.q2)(_)||(0,iS.s5)(_)||(0,iS.sq)(_)?"circle":(0,iS._D)(_)?"secondary":void 0),full:!0,large:!0,onClick:function(e){return(0,iS.sR)(e)||(0,iS.NU)(e)||(0,iS._D)(e)?h:(0,iS.q2)(e)?y:(0,iS.s5)(e)?v:(0,iS.sq)(e)?g:(0,iS.KC)(e)?b:void 0}(t.plan_action),disabled:(0,iS.sq)(t.plan_action),"data-testid":"submit-button-".concat(t.plan_action),children:j})},XS=function(e){var t=e.plan,r=t.strike_through_price;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,c.jsx)(l.ZT.BodyLg,{color:"text-default",children:t.display_name}),t.fetch_discount&&!t.is_on_offer&&(0,iS.sR)(t.plan_action)&&(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(lu.g,{square:!0,inverted:!0,label:t.fetch_discount})}),t.is_on_offer&&t.discount_percentage&&(0,c.jsxs)("div",{className:"ml-2",children:[(0,c.jsx)("style",{children:"\n                .plan-coupon-badge {\n                  border-color: yellow;\n                }\n                .plan-coupon-badge > span {\n                  color: black !important;\n                }\n              "}),(0,c.jsx)(lu.g,{square:!0,label:t.discount_percentage,inverted:!0,className:"plan-coupon-badge bg-yellow-500"})]})]}),(0,c.jsxs)("div",{className:"flex items-start justify-start",children:[(0,c.jsx)("div",{className:"mr-1",children:(0,c.jsx)(l.ZT.TitleLg,{children:t.is_on_offer?t.discounted_base_monthly_amount:t.display_base_monthly_amount})}),(0,c.jsx)(l.ZT.BodyMd,{children:(0,a.t)("pricing_plans.interval.abbreviation.month")})]}),(0,c.jsxs)("div",{children:[r&&(0,c.jsx)("div",{className:"mr-2 inline-block line-through",children:(0,c.jsxs)(l.ZT.BodySm,{color:"text-light",children:[r,(0,a.t)("pricing_plans.interval.abbreviation.month")]})}),(0,c.jsx)("div",{className:"inline-block",children:(0,c.jsx)(l.ZT.BodySm,{color:"text-light",children:(0,iS.AX)(t)})})]}),(0,c.jsx)("div",{className:"mt-6 pr-4",children:(0,c.jsx)(YS,{plan:t})})]})},ek=function(){var e=cS().currentPlan,t=e.display_name,r=e.friendly_base_amount,n=e.display_interval,i=(0,a.t)("pricing_plans.current_plan_message",{preview_name:t,friendly_base_amount:r,interval:n.toLowerCase()});return(0,c.jsxs)("div",{children:[(0,c.jsx)(lu.g,{square:!0,label:(0,a.t)("pricing_plans.current_plan")}),(0,c.jsx)("div",{className:"my-1",children:(0,c.jsx)(y.Z.TitleSm,{weight:"bold",children:t})}),(0,c.jsx)(y.Z.BodyMd,{color:"text-default",children:i})]})},tk=rk=function(){var e=cS().currentCommunity;return(0,c.jsxs)(tk,{children:[(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("subscription.expired_trial_title")}),(0,c.jsxs)(l.ZT.BodyMd,{color:"text-default",children:[(0,a.t)("pricing_plans.to_access_upgrade",{community_name:e.name}),(0,c.jsx)(pP.w,{content:(0,a.t)("pricing_plans.please_reach_out")})]})]})},nk=function(e){var t=e.currentPlan,r=(0,$P.kw)(t.tier)&&!t.public?"enterprise_downgrade_warning":t.show_pro_grandfathered_for_courses?"professional_downgrade_warning":"";return(0,c.jsx)(tk,{children:(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,c.jsx)(pP.w,{content:(0,a.t)(r,{price:t.base_amount,interval:t.interval})})})})},ik=function(e){var t=e.shouldRenderCurrentPlan,r=void 0!==t&&t,n=(0,re.E)(),i=n.isExpiredTrial,o=n.isCommunityOnTrial,s=o||i?(0,a.t)("pricing_plans.marketing_campaign.banner.trials.title"):r?(0,a.t)("pricing_plans.marketing_campaign.banner.subscribers.title"):void 0,u=o||i?(0,a.t)("pricing_plans.marketing_campaign.banner.trials.description"):r?(0,a.t)("pricing_plans.marketing_campaign.banner.subscribers.description"):void 0;return s||u?(0,c.jsxs)(tk,{children:[s&&(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:s}),u&&(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:u})]}):null},ok=r(63187),ak=function(){var e=cS().currentCommunity;return(0,c.jsxs)(tk,{children:[(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("pricing_plans.banner.title")}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,a.t)("pricing_plans.banner.subtitle",{expires_in:(0,ok.T)(e.trial_ends_at)})})]})},sk=function(){var e=cS().currentCommunity;return(0,c.jsxs)(tk,{children:[(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("pricing_plans.plan_cancelled")}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,a.t)("pricing_plans.to_access",{community_name:e.name})})]})},lk=function(){return(0,c.jsxs)(tk,{children:[(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("subscription.incomplete_expired_title")}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,a.t)("subscription.incomplete_expired_description")})]})},ck=function(){var e,t,r=cS().currentCommunity;return null!==r&&void 0!==r&&null!==(e=r.subscription)&&void 0!==e&&e.ends_at?(0,c.jsxs)(tk,{children:[(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("subscription.subscription_on_grace_period.title")}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,a.t)("subscription.subscription_on_grace_period.description",{date:(0,ok.T)(null===r||void 0===r||null===(t=r.subscription)||void 0===t?void 0:t.ends_at)})})]}):null};function uk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return dk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fk=function(){var e,t,r,i,o=(e=uk((0,n.useState)(!1),2),t=e[0],r=e[1],{latestInvoice:(i=(0,f.useQuery)(S.av.accountPaymentProcessors.invoice.show(),{enabled:t})).data,isLoadingInvoice:i.isLoading,onRetrieveLatestInvoice:shouldRetrieveInvoice:t}),s=o.isLoadingInvoice,u=o.onRetrieveLatestInvoice,d=o.latestInvoice;return null!==d&&void 0!==d&&d.hosted_invoice_url&&window.location.replace(d.hosted_invoice_url),(0,c.jsxs)(tk,{children:[s&&(0,c.jsx)(l.aN,{variant:"fullscreen"}),(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("subscription.incomplete_reactified.title")}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:(0,a.t)("subscription.incomplete_reactified.description")}),(0,c.jsx)("div",{className:"inline-block",children:(0,c.jsx)($e.z,{variant:"secondary",disabled:s,onClick:u,children:(0,a.t)("subscription.incomplete_reactified.action")})})]})},mk=function(){var e=cS(),t=e.currentPlan,r=e.currentCommunity,n=(0,re.E)(),i=n.isExpiredTrial,o=n.isCommunityOnTrial,a=n.isCommunitySubscriptionIncompleteExpired,s=n.isCommunitySubscriptionFullyCancelled,l=n.isCommunitySubscriptionOnGracePeriod,u=n.hasCommunityIncompletePayment,d=n.isPromoCodeEnabledForCommunity,f=n.hasActiveOffer,m=Boolean(!o&&!i&&r.subscription&&!a&&!s),p=f?(0,c.jsx)(ik,{shouldRenderCurrentPlan:m}):null,h=i?(0,c.jsx)(rk,{}):!o||d||f?u?(0,c.jsx)(fk,{}):a?(0,c.jsx)(lk,{}):s?(0,c.jsx)(sk,{}):l?(0,c.jsx)(ck,{}):null:(0,c.jsx)(ak,{}),b=(t.show_pro_grandfathered_for_courses||(0,$P.kw)(t.tier)&&!t.public)&&!i&&!o;return(0,c.jsxs)("div",{className:"grid gap-10",children:[b&&(0,c.jsx)(nk,{currentPlan:t}),h,p,m&&(0,c.jsx)(ek,{}),(0,c.jsx)("hr",{className:"mb-4 h-px border-0 bg-gray-200 dark:bg-gray-700"})]})},pk=function(e){var t=e.plans;return(0,c.jsxs)("div",{className:"bg-primary mx-auto p-8","data-testid":"plans-table-desktop",children:[(0,c.jsx)(mk,{}),(0,c.jsxs)("div",{className:"bg-primary sticky top-16 z-10 mb-2 grid pb-2 ".concat("grid-cols-5"," grid-rows-1 pt-2"),children:[(0,c.jsx)(fS,{}),t.map((function(e){return(0,c.jsx)(XS,{plan:e},e.id)}))]}),(0,c.jsx)(KS,{})]})},hk=function(e){var t=e.plans,r=cS().isAffiliatesPhase1Enabled,n=i={basic:{total:7,total_annual:0},professional:{total:r?9:8,total_annual:0},business:{total:r?9:8,total_annual:1},enterprise:{total:r?7:6,total_annual:3}},o=function(e,t,r){return Array.from({length:t}).map((function(t,n){return(0,c.jsx)("div",{className:"mb-1",children:(0,c.jsx)(YP,{count:(0,a.t)("pricing_plans.main_features.".concat(e,".").concat(r).concat(n+1))})},"".concat(e,"-").concat(r).concat(n+1))}))};return(0,c.jsxs)("div",{className:"pb-12",children:[(0,c.jsx)(mk,{}),(0,c.jsx)(fS,{}),t.map((function(e){return(0,c.jsxs)("div",{className:"bg-primary border-primary mb-4 rounded border p-4",children:[(0,c.jsx)(XS,{plan:e}),(0,c.jsx)("div",{className:"my-4",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)("pricing_plans.main_features.title.".concat(e.tier))})}),o(e.tier,i[e.tier].total,"feature_"),n(e)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)("pricing_plans.annual_plan_only")})}),o(e.tier,i[e.tier].total_annual,"annual_feature_")]})]},e.id)}))]})},bk=function(){var e=(0,nS.ef)(),t=cS(),r=t.plans,n=t.isRenewLoading,i=t.isUpdatingSubscription;return t.isListingPlans?(0,c.jsx)(l.aN,{variant:"fullscreen"}):(0,c.jsxs)(c.Fragment,{children:[(n||i)&&(0,c.jsx)(l.aN,{variant:"fullscreen"}),e?(0,c.jsx)(hk,{plans:r}):(0,c.jsx)(pk,{plans:r})]})},yk=function(e){var t=e.isExpired,r=(0,dr.k6)(),n=(0,v.wh)(),i=n.currentCommunity,o=n.currentCommunitySettings,s=(0,re.E)().isPromoCodeEnabledForCommunity,u=i.subscription&&!i.subscription_cancelled,d=(o||{}).affiliates_phase1_enabled,f=null!==i&&void 0!==i&&i.subscription_cancelled||s?"lg":"none";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("pricing_plans.title"),layoutConfigProps:{key:t,disableRightSidebar:!0,disableSidebar:t},rightContent:u&&(0,c.jsx)(l.zx,{variant:"secondary",onClick:function(){return r.push((0,S.f$)())},children:(0,a.t)("pricing_plans.manage_billing")})}),(0,c.jsx)($,{className:"bg-primary md:bg-inherit md:!p-0",maxWidth:f,children:(0,c.jsx)(uS,{currentCommunity:i,isAffiliatesPhase1Enabled:d,children:(0,c.jsx)(bk,{})})})]})},vk=function(){var e=(0,re.E)().isCommunityOnPlus,t=(0,v.wh)().currentCommunity,r=(0,B.Z1)(t)||(0,B.Aq)(t);return(0,n.useEffect)((function(){!function(e){var t=e.isExpired,r=e.isCommunityOnPlus,n=document.querySelector(".pricing-plans-table__header"),i=document.querySelector(".standard-layout-v2__sidebar");if(n&&(n.style.display=t?"block":"none"),i){var o=t&&!r;i.style.display=o?"none":"block"}}({isExpired:r,isCommunityOnPlus:e})}),[r,e]),(0,c.jsx)(c.Fragment,{children:e?(0,c.jsx)(rS,{isExpired:r}):(0,c.jsx)(yk,{isExpired:r})})},gk=function(){var e=(0,dr.k6)(),t=(0,v.wh)().currentCommunity,r=HP().currentPlan,n=(0,rl.t)();return t.subscription_cancelled&&!(0,iS.UU)(n)?(0,c.jsx)(dr.l_,{to:(0,S.xn)()}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.billing.title"),layoutConfigProps:{disableRightSidebar:!0},pageMetaProps:{bodyClassNames:"billing"},rightContent:(0,c.jsx)($e.z,{variant:"secondary",onClick:function(){return e.push((0,S.xn)())},children:(0,a.t)("settings.community_member_billing.headings.change_plan")})}),(0,c.jsx)($,{children:(0,c.jsx)(eS,{showBillingPortal:!0,showAddons:null===r||void 0===r?void 0:r.allow_addons})})]})},xk=r(65998),_k=r(2470),jk=r(61345),wk="title",Ok="author",Pk="spaces",Sk=Object.freeze([wk,Ok,Pk]),kk="settings.posts.filters";function Ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tk="members_directory.header.search.filters.spaces",Ak=function(e){var t=e.filter,r=e.updateFilter,n=(0,v.nT)().helpers,i=(0,_k.S)({spaces:n.basicOrImageSpacesWithPostCreationAllowed().filter(jk.k8)});return(0,c.jsx)(To.wn,{chip:(0,a.t)([Tk,"title"]),title:(0,a.t)([Tk,"title"]),selectedText:t.spaces,renderSelectedText:function(e){return(0,c.jsx)(To.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ck(Object(r),!0).forEach((function(t){Nk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:i},e))},onApply:function(e){return r({value:e,filterName:Pk})},children:n.isDataLoading()?(0,c.jsx)(l.aN,{}):(0,c.jsx)(To.l6,{options:i,legend:(0,a.t)([Tk,"legend"]),name:"spaces-filter",activeText:t.spaces,hasSearch:!0,searchProps:{placeholder:(0,a.t)([Tk,"search_placeholder"])}})})};function Ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ek(Object(r),!0).forEach((function(t){Dk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ek(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lk,Mk=function(e){var t=e.filter,r=(0,dr.k6)(),n=function(e){var n,i=e.value,o=e.filterName;n=i?Ik(Ik({},t),{},Dk({},o,i)):(0,fn.omit)(t,o);var a=S.qk.postsDashboard.index({params:Ik({page:1},n)});r.push(a)},i=(0,fn.intersection)(Sk,Object.keys(t)).length>0;return(0,c.jsxs)("div",{className:J()("bg-primary border-primary items-center justify-between gap-x-1 border-b px-6 py-3","hidden md:flex"),children:[(0,c.jsxs)(Tl.x,{children:[(0,c.jsx)(To.wn,{chip:(0,a.t)([kk,"title"]),title:(0,a.t)([kk,"title_title"]),selectedText:t.title,onApply:function(e){return n({value:e,filterName:wk})},children:(0,c.jsx)(To.xo,{name:"title-filter",placeholder:(0,a.t)([kk,"title_placeholder"])})}),(0,c.jsx)(To.wn,{chip:(0,a.t)([kk,"author"]),title:(0,a.t)([kk,"author_title"]),selectedText:t.author,onApply:function(e){return n({value:e,filterName:Ok})},children:(0,c.jsx)(To.xo,{name:"author-filter",placeholder:(0,a.t)([kk,"author_placeholder"])})}),(0,c.jsx)(Ak,{updateFilter:n,filter:t})]}),(0,c.jsx)(To.Cd,{isVisible:i,onClick:function(){return n({filterName:Sk})}})]})},Rk=r(96563),Fk=r(48177),Bk=r(45034);function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uk(Object(r),!0).forEach((function(t){Vk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zk="settings.posts.table",Hk=Object.freeze({TITLE:"title",STATUS:"status",UPDATED:"updated_at",AUTHOR:"author",SPACE:"space",LIKES:"likes",COMMENTS:"comments",ACTION_MENU:"actionMenu",SCHEDULED:"scheduled"}),qk=Object.freeze({className:"first:pl-0 last:pr-0 px-4",tdClassName:"first:pl-0 last:pr-0 px-4"}),Gk=Object.freeze([zk({title:(0,a.t)("".concat(Zk,".headers.title")),dataIndex:Hk.TITLE,key:Hk.TITLE,shouldWrap:!1},qk),zk({title:(0,a.t)("".concat(Zk,".headers.status")),dataIndex:Hk.STATUS,key:Hk.STATUS},qk),zk({title:(0,a.t)("".concat(Zk,".headers.author")),dataIndex:Hk.AUTHOR,key:Hk.AUTHOR,shouldWrap:!1},qk),zk({title:(0,a.t)("".concat(Zk,".headers.space")),dataIndex:Hk.SPACE,key:Hk.SPACE,shouldWrap:!1},qk),zk({title:(0,a.t)("".concat(Zk,".headers.updated")),dataIndex:Hk.UPDATED,key:Hk.UPDATED},qk),zk({title:" ",dataIndex:Hk.ACTION_MENU,key:Hk.ACTION_MENU},qk)]),Wk=Object.freeze((Vk(Lk={},Fk.Iq,{label:(0,a.t)("".concat(Zk,".badge_status.published")),variant:Bk.o.success}),Vk(Lk,Fk.N$,{label:(0,a.t)("".concat(Zk,".badge_status.draft")),variant:Bk.o.default}),Vk(Lk,Fk.lU,{label:(0,a.t)("".concat(Zk,".badge_status.scheduled")),variant:Bk.o.default}),Lk)),Qk="".concat(Zk,".empty_state"),Kk=function(e){var t=e.filter,r=(0,v.wh)().currentCommunityMember,n=(0,xk.T)().invalidatePostsApiQueries,i=function(e){var t,r=e.currentCommunityMember,n=e.filter;if((0,fn.isEmpty)(n)||(0,fn.isEqual)(n,{status:Fk.MG})){var i=(0,Ho.vb)(r)?"admin":"moderator";t="".concat(Qk,".all.").concat(i)}else t=(0,fn.isEqual)(n,{status:Fk.N$})?"".concat(Qk,".draft"):(0,fn.isEqual)(n,{status:Fk.lU})?"".concat(Qk,".scheduled"):"".concat(Qk,".no_results");return(0,a.t)(t)}({currentCommunityMember:r,filter:t}),o=i.title,s=i.subtitle,u=(0,fn.isEmpty)((0,fn.omit)(t,"status"));return(0,c.jsxs)("div",{className:"bg-primary border-primary border p-6 text-center lg:rounded-lg lg:p-36",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"bold",children:o}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)(l.ZT.BodyMd,{color:"text-default",children:s})}),u&&(0,c.jsx)(rt.h,{render:function(e){var t=e.onClick;return(0,c.jsx)(l.zx,{variant:"circle",className:"mt-4",onClick:t,children:(0,a.t)("create_post")})},onSubmitSuccess:n})]})};function Jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jk(Object(r),!0).forEach((function(t){Yk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xk(e){return function(e){if(Array.isArray(e))return eC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return eC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tC=r(44611),rC=r(33552),nC=r(68375),iC=r(62704),oC=r(88896),aC=r(25388);function sC(e){return function(e){if(Array.isArray(e))return uC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||cC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||cC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cC(e,t){if(e){if("string"===typeof e)return uC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uC(e,t):void 0}}function uC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dC="".concat(Zk,".menu_actions"),fC=function(e){var t=e.post,r=(0,l.pm)(),i=r.success,o=r.error,s=lC((0,n.useState)(!1),2),u=s[0],d=s[1],m=lC((0,n.useState)(!1),2),p=m[0],h=m[1],b=lC((0,n.useState)(!1),2),y=b[0],g=b[1],x=(0,v.wh)().currentCommunityMember,_=(0,xk.T)().invalidatePostsApiQueries,j=(0,v.wh)().currentCommunitySettings,w=null===j||void 0===j?void 0:j.quick_post_v2_enabled,O=(0,aC.L)().show,P=(0,tC.e0)(),S=(0,rC.h)(),k=(0,f.useMutation)((function(){return vn.Fv.destroy({post:t})}),{onSuccess:function(){i((0,a.t)("".concat(dC,".toast.delete_successful"))),g(!1),_()},onError:function(){o((0,a.t)("".concat(dC,".toast.delete_failed"))),g(!1)}}),C=[{key:"edit-post",label:(0,a.t)("".concat(dC,".edit_post")),onClick:function(){return(0,nC.Fr)(t)?P.show({spaceId:t.space_id,onClose:function(){return P.remove()},currentPost:t,shouldSkipRedirectAfterSubmit:!0}):w?O({post:t,onSubmitSuccess:_,shouldSkipRedirectAfterSubmit:!0}):d(!0)}}].concat(sC((0,Ho.vb)(x)?[{key:"duplicate-post",label:(0,a.t)("".concat(dC,".duplicate_post")),onClick:function(){return(0,nC.Fr)(t)?S.show({post:t,onSuccess:_}):h(!0)}}]:[]),[{key:"delete-post",label:(0,a.t)("".concat(dC,".delete_post")),hasDanger:!0,onClick:function(){return g(!0)}}]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.w.Actions,{children:C.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick;return(0,c.jsx)(Q.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))}),(0,c.jsx)(oC.u,{show:u,closeModal:function(){return d(!1)},post:t,onChange:fn.noop,onSubmitSuccess:_,shouldSkipRedirectAfterSubmit:!0}),(0,c.jsx)(iC.Z,{spaceId:t.space_id,postId:t.id,postSlug:t.slug,postTitle:t.title,hasNoteAboutExceptions:t.status===Fk.Iq,isOpen:p,onClose:function(){return h(!1)},onDuplicateSuccess:_}),(0,c.jsx)(Gr.cV,{isOpen:y,title:(0,a.t)("delete_post_confirmation"),onClose:function(){return g(!1)},onCancel:function(){return g(!1)},onConfirm:k.mutate,confirmVariant:"danger",disabled:k.isLoading,confirmText:k.isLoading?(0,a.t)("deleting"):(0,a.t)("confirm"),children:(0,a.t)("delete_post_descriptor")})]})};function mC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hC=function(e){var t=e.post,r=(0,v.wh)().currentCommunitySettings,i=null===r||void 0===r?void 0:r.quick_post_v2_enabled,o=(0,aC.L)().show,s=(0,tC.e0)(),l=(0,nC.Fr)(t)?"image":"post",u=t.title?t.title:(0,nC.Fr)(t)&&t.display_title&&t.display_title!==t.space_name?t.display_title:(0,a.t)([Zk,"rows","untitled_".concat(l)]),d=(0,c.jsx)(y.Z.LabelSm,{color:"text-dark",weight:"medium",children:u}),f=mC((0,n.useState)(!1),2),m=f[0],p=f[1],h=(0,xk.T)().invalidatePostsApiQueries;if(t.status===Fk.Iq){var b=(0,S.LM)({spaceSlug:t.space_slug,slug:t.slug});return(0,c.jsx)(sn.rU,{to:b,children:d})}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:function(){return(0,nC.Fr)(t)?s.show({spaceId:t.space_id,onClose:function(){return s.remove()},currentPost:t,shouldSkipRedirectAfterSubmit:!0}):i?o({post:t,onSubmitSuccess:h}):p(!0)},className:"text-left",type:"button",children:d}),(0,c.jsx)(oC.u,{show:m,closeModal:function(){return p(!1)},post:t,onChange:fn.noop,onSubmitSuccess:h,shouldSkipRedirectAfterSubmit:!0})]})},bC=r(32224);function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yC(Object(r),!0).forEach((function(t){gC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xC=function(e){var t=e.name,r=e.publicUid,n=e.imageUrl,i=(0,bC.O)({public_uid:r});return(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)("a",vC(vC({},i),{},{children:(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsx)("div",{className:"mr-3",children:(0,c.jsx)(Pt.sJ,{name:t,src:n,size:"5"})}),(0,c.jsx)(y.Z.LabelSm,{color:"text-dark",children:t})]})}))})};function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_C(Object(r),!0).forEach((function(t){wC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var OC=function(e,t){var r=e.space_emoji,n=e.space_custom_emoji_url,i=e.space_custom_emoji_dark_url,o=e.space_name;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(wy.S,{className:"mr-1 inline !h-5 !w-5 align-top",emoji:r,customEmojiUrl:n,customEmojiDarkUrl:i,appearance:t}),(0,c.jsx)("span",{children:o})]})},PC=function(e){var t=new Date(e);return(0,Xe.wc)({dateTime:t,format:"short_date_at_short_time"})};function SC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SC(Object(r),!0).forEach((function(t){CC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function CC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NC=function(e){var t=e.posts,r=e.postsCount,n=e.filter,i=e.page,o=e.isLoadingPosts,s=(0,dr.k6)(),u=(0,lr.TC)().currentAppearance,d=function(e){var t=Xk(Gk);switch(e){case Fk.N$:break;case Fk.lU:t.splice(4,0,$k({title:(0,a.t)("".concat(Zk,".headers.scheduled")),dataIndex:Hk.SCHEDULED,key:Hk.SCHEDULED},qk));break;default:t.splice(4,0,$k({title:(0,a.t)("".concat(Zk,".headers.likes")),dataIndex:Hk.LIKES,key:Hk.LIKES},qk),$k({title:(0,a.t)("".concat(Zk,".headers.comments")),dataIndex:Hk.COMMENTS,key:Hk.COMMENTS},qk))}return t}(n.status),f=t.map((function(e){return function(e,t,r){var n,i,o=Wk[e.status],a=(wC(n={key:e.id},Hk.TITLE,(0,c.jsx)(hC,{post:e})),wC(n,Hk.STATUS,(0,c.jsx)(Hr.O,{variant:o.variant,textTransform:"capitalize",children:o.label})),wC(n,Hk.UPDATED,PC(e.updated_at)),wC(n,Hk.AUTHOR,(0,c.jsx)(xC,{name:e.community_member.name,publicUid:e.community_member.public_uid,imageUrl:e.community_member.avatar_url})),wC(n,Hk.SPACE,OC(e,r)),wC(n,Hk.LIKES,e.user_likes_count),wC(n,Hk.COMMENTS,e.comments_count),wC(n,Hk.ACTION_MENU,(0,c.jsx)(fC,{post:e})),wC(n,"rowClassName","align-top group"),n);switch(t){case Fk.N$:return a;case Fk.lU:return jC(jC({},a),{},wC({},Hk.SCHEDULED,PC(e.published_at)));default:return jC(jC({},a),{},(wC(i={},Hk.LIKES,e.user_likes_count),wC(i,Hk.COMMENTS,e.comments_count),i))}}(e,n.status,u)})),m=Object.entries(n).flat().join("-");return o?(0,c.jsx)(l.aN,{}):f.length?(0,c.jsx)(tt.w,{columns:d,dataSource:f,className:J()("px-6","react-table--settings-posts-table","react-table--settings-posts-table-".concat(n.status)),hasStickyHeader:!0,headerClassName:"top-[205px]",footer:(0,c.jsx)(Rk.n,{colSpan:d.length,currentPage:i,customKey:"".concat(i,"-").concat(m),dataSourceSize:r,onClickPagination:function(e){var t=S.qk.postsDashboard.index({params:kC({page:e},n)});s.push(t)},resultsPerPage:Fk.ij,resourceName:"",align:"left",direction:"reverse"})}):(0,c.jsx)("div",{className:"p-6",children:(0,c.jsx)(Kk,{filter:n})})};function TC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return AC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var EC=function(e){var t=e.filter,r=(0,dr.k6)(),n=(0,xk.D)({filter:{status:Fk.MG}}).postsCount,i=(0,xk.D)({filter:{status:Fk.N$}}).postsCount,o=(0,xk.D)({filter:{status:Fk.lU}}).postsCount,a=[[Fk.MG,n],[Fk.N$,i],[Fk.lU,o]].map((function(e){var t=TC(e,2),n=t[0],i=t[1];return{value:n,label:Fk.G7[n],count:i,onClick:function(){var e=S.qk.postsDashboard.index({params:{page:1,status:n}});r.push(e)}}})),s=Object.keys(Fk.G7).indexOf(t.status);return(0,c.jsx)(Uo.O.Group,{selectedIndex:s,children:(0,c.jsx)(Uo.O.List,{className:"bg-primary border-primary border-b px-6",children:a.map((function(e){return(0,c.jsxs)(Uo.O,{onClick:e.onClick,children:[e.label,(0,c.jsx)(Uo.O.Counter,{children:e.count})]},e.value)}))})})},IC=["page"];function DC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DC(Object(r),!0).forEach((function(t){MC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function MC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RC(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var FC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,rl.t)(),r=t.page,n=RC(t,IC),i=Number(r)||1,o=LC(LC({status:Fk.MG},n),e),a=(0,xk.D)({page:i,filter:o});return{posts:a.posts,postsCount:a.postsCount,isLoadingPosts:a.isLoadingPosts,filter:o,page:i}},BC=function(){var e=FC(),t=e.posts,r=e.postsCount,n=e.isLoadingPosts,i=e.filter,o=e.page,s=(0,xk.T)().invalidatePostsApiQueries;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.posts.title"),rightContent:(0,c.jsx)(rt.h,{render:function(e){var t=e.onClick;return(0,c.jsx)(l.zx,{variant:"circle",onClick:t,children:(0,a.t)("new_post")})},onSubmitSuccess:s}),filters:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(EC,{filter:i}),(0,c.jsx)(Mk,{filter:i})]}),headline:r>0&&(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.posts.table.headline.posts",{count:r})})}),hasBorder:!1}),(0,c.jsx)(NC,{posts:t,postsCount:r,filter:i,page:o,isLoadingPosts:n})]})},UC=r(6065),zC=r(43719),VC=r(81790),ZC=r(53564),HC=r(11865),qC=r.n(HC);function GC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var QC,KC=r(19873),JC=r.n(KC),$C=r(3085);function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function XC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YC(Object(r),!0).forEach((function(t){eN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tN=255,rN=function(){var e,t=eN({},zC.PX[zC.Z9.NUMBER].NUMBER_OPTIONS,{position:"right",text:"",format:zC.av.NUMBER,decimal:zC.FW[0]}),r=eN({},zC.PX[zC.Z9.SELECT].CHOICES_ATTRIBUTES,[{value:""}]);return XC(XC((eN(e={},zC.AZ.LABEL,""),eN(e,zC.AZ.FIELD_TYPE,"text"),eN(e,zC.AZ.KEY,""),eN(e,zC.AZ.DESCRIPTION,""),eN(e,zC.AZ.PLACEHOLDER,""),eN(e,zC.xg.REQUIRED,!1),eN(e,zC.xg.HIDDEN,!1),eN(e,zC.k_,JC()(Array(3),{visible:!0})),e),t),r)},nN="profile_fields.field_modal",iN=Kp.IX().when(zC.AZ.FIELD_TYPE,{is:function(e){return $C.KJ.includes(e)},then:Kp.IX().min(1,(0,a.t)("profile_fields.field_modal.choice_required")).of(Kp.Ry().shape({value:Kp.Z_().trim().max(tN,(0,a.t)([nN,"is_required",{fieldName:(0,a.t)([nN,"choices"])}])).required((0,a.t)("profile_fields.field_modal.choice_required"))}))}),oN=Kp.Ry().nullable().when(zC.AZ.FIELD_TYPE,{is:function(e){return e===zC.Z9.NUMBER},then:Kp.Ry().shape({format:Kp.Z_().required(),text:Kp.Z_().when("format",{is:then:Kp.Z_().trim().max(tN).required((0,a.t)([nN,"numeric_custom_text_required"]))})})}),aN=Kp.Ry((eN(QC={},zC.AZ.LABEL,Kp.Z_().required((0,a.t)([nN,"is_required"],{fieldName:(0,a.t)([nN,"label"])})).trim().max(tN,(0,a.t)([nN,"is_max_length"],{fieldName:(0,a.t)([nN,"label"])}))),eN(QC,zC.AZ.FIELD_TYPE,Kp.Z_().required((0,a.t)([nN,"is_required"],{fieldName:(0,a.t)([nN,"field_type"])})).max(tN,(0,a.t)([nN,"is_max_length"],{fieldName:(0,a.t)([nN,"field_type"])}))),eN(QC,zC.AZ.KEY,Kp.Z_().required((0,a.t)([nN,"is_required"],{fieldName:(0,a.t)([nN,"key"])})).matches(/^[a-zA-Z0-9_]*$/,{message:(0,a.t)([nN,"key_matches_error"])}).trim().max(tN,(0,a.t)([nN,"is_max_length"],{fieldName:(0,a.t)([nN,"key"])}))),eN(QC,zC.AZ.DESCRIPTION,Kp.Z_().trim().max(tN,(0,a.t)([nN,"is_max_length"],{fieldName:(0,a.t)([nN,"description_name"])}))),eN(QC,zC.AZ.PLACEHOLDER,Kp.Z_().trim().max(tN,(0,a.t)([nN,"is_max_length"],{fieldName:(0,a.t)([nN,"placeholder_name"])}))),eN(QC,zC.PX[zC.Z9.SELECT].CHOICES_ATTRIBUTES,iN),eN(QC,zC.PX[zC.Z9.NUMBER].NUMBER_OPTIONS,oN),eN(QC,zC.k_,Kp.IX().when(zC.xg.HIDDEN,{is:!1,then:Kp.IX().test("atleast-one-is-true",(0,a.t)("profile_fields.field_modal.pages_required"),()}).when(zC.xg.HIDDEN,{is:!0,then:Kp.IX().transform(()})),eN(QC,zC.xg.HIDDEN,Kp.O7()),QC)),sN="number_options_attributes.format",lN="number_options_attributes.text",cN="number_options_attributes.position",uN="number_options_attributes.decimal",dN="profile_fields.field_modal",fN=Object.values(zC.av).map((function(e){return{label:(0,a.t)([dN,"numeric_formats",e]),value:e}})),mN=zC.FW.map((function(e){return{label:e,value:e}})),pN=[{label:(0,a.t)([dN,"numeric_positions.left"]),value:"left"},{label:(0,a.t)([dN,"numeric_positions.right"]),value:"right"}],hN=function(){var e=(0,pr.Gc)().resetField,t=(0,pr.qo)({name:sN}),r=(0,pr.qo)({name:lN}),i=(0,pr.qo)({name:cN}),o=(0,pr.qo)({name:uN});return(0,n.useEffect)((function(){t!==zC.av.CUSTOM&&(e(lN,{defaultValue:""}),e(cN,{defaultValue:pN[0].value}))}),[t,e]),{numericFormatName:sN,numericCustomName:lN,numericPositionName:cN,numericDecimalsName:uN,numericOptions:fN,decimalOptions:mN,positionOptions:pN,numericFormatValue:t,numericCustomNameValue:r,numericPositionValue:i,numericDecimalsValue:o}},bN=function(e){var t=e.format,r=e.decimals,n=e.position,i=e.label;if(t===zC.av.UNFORMATTED)return(0,c.jsx)(c.Fragment,{children:1e3});var o="1,000";if(r>0){var a="0".padEnd(r,"0");o+=".".concat(a)}return t===zC.av.PERCENT&&(o+="%"),n&&i&&(o="left"===n?"".concat(i," ").concat(o):"".concat(o," ").concat(i)),(0,c.jsx)(c.Fragment,{children:o})};bN.propTypes={format:I().string,decimals:I().string,position:I().string,label:I().string};var yN="profile_fields.field_modal",vN="profile_fields.field_modal",gN=function(e){var t=e.name,r=e.className,n=e.onRemove,i=e.onNew;return(0,c.jsxs)("div",{className:J()("relative isolate",r),children:[(0,c.jsx)(l.l0.Item,{name:t,hideLabel:!0,hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.Input,{className:"form-control !pr-8",onKeyPress:)}),(0,c.jsx)("button",{type:"button",title:(0,a.t)([vN,"remove_choice"]),"aria-label":(0,a.t)([vN,"remove_choice"]),className:"text-default absolute right-0 top-5 flex items-center border border-transparent p-3",onClick:n,children:(0,c.jsx)(bt.JO,{type:"20-close-sm",size:20,"aria-hidden":!0})})]})};function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xN(Object(r),!0).forEach((function(t){jN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wN,ON,PN="profile_fields.field_modal",SN=function(e){var t=e.name,r=(0,pr.Gc)().register,i=(0,pr.Dq)({name:t}),o=i.fields,s=i.append,u=i.remove;(0,n.useEffect)((function(){0===o.length&&s({value:""})}),[s,o]);var d=return(0,c.jsxs)("fieldset",{className:"mt-2",children:[(0,c.jsxs)("div",{className:"flex gap-x-1",children:[(0,c.jsx)("legend",{className:"text-dark text-sm font-medium",children:(0,a.t)([PN,"choices"])}),(0,c.jsx)(yt.Y,{content:(0,a.t)([PN,"choices_tooltip"]),className:"inline-flex",children:(0,c.jsx)(bt.JO,{type:"question-mark","aria-label":(0,a.t)([PN,"choices_tooltip"]),className:"!w-3"})})]}),o.map((function(e,i){var o=Boolean(e.created_at);return(0,c.jsxs)(n.Fragment,{children:[o&&(0,c.jsx)("input",_N({type:"hidden"},r("".concat(t,".").concat(i,".id"),{valueAsNumber:!0,value:e.id}))),(0,c.jsx)(gN,{name:"".concat(t,".").concat(i,".value"),onNew:d,onRemove:function(){return u(i)},className:"-mt-2.5"})]},e.id)})),(0,c.jsx)("div",{className:"mt-1",children:(0,c.jsxs)("button",{type:"button",className:"flex w-full items-center gap-1.5",onClick:d,children:[(0,c.jsx)("span",{className:"text-default flex","aria-hidden":!0,children:(0,c.jsx)(bt.JO,{type:"20-plus-v2",size:20})}),(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)([PN,"add_another_option"])})]})})]})},kN=function(e){var t=e.name,r=void 0===t?"choices_attributes":t;return(0,c.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:(0,c.jsx)(SN,{name:r})})};function CN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NN=(CN(wN={},zC.Z9.SELECT,zC.PX[zC.Z9.SELECT].CHOICES_ATTRIBUTES),CN(wN,zC.Z9.CHECKBOX,zC.PX[zC.Z9.CHECKBOX].CHOICES_ATTRIBUTES),wN),TN=(CN(ON={},zC.Z9.SELECT,kN),CN(ON,zC.Z9.CHECKBOX,kN),CN(ON,zC.Z9.NUMBER,(function(){var e=hN(),t=e.numericFormatName,r=e.numericCustomName,n=e.numericPositionName,i=e.numericDecimalsName,o=e.numericOptions,s=e.decimalOptions,u=e.positionOptions,d=e.numericFormatValue,f=e.numericCustomNameValue,m=e.numericPositionValue,p=e.numericDecimalsValue;return(0,c.jsxs)("div",{className:"grid-cols-12 gap-x-6 md:grid",children:[(0,c.jsx)("div",{className:"col-span-4",children:(0,c.jsx)(l.l0.Item,{label:(0,a.t)([yN,"format"]),name:t,hideBorder:!0,hidePlaceholder:!0,hideDescription:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.SelectNative,{options:o})})}),d===zC.av.CUSTOM&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"col-span-2",children:(0,c.jsx)(l.l0.Item,{name:r,emptyLabel:!0,hideBorder:!0,hidePlaceholder:!0,hideDescription:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{maxLength:4})})}),(0,c.jsx)("div",{className:"col-span-2",children:(0,c.jsx)(l.l0.Item,{name:n,label:(0,a.t)([yN,"position"]),hideBorder:!0,hidePlaceholder:!0,hideDescription:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.SelectNative,{options:u})})})]}),d!==zC.av.UNFORMATTED&&(0,c.jsx)("div",{className:"col-span-2",children:(0,c.jsx)(l.l0.Item,{label:(0,a.t)([yN,"decimal"]),name:i,hideBorder:!0,hidePlaceholder:!0,hideDescription:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.SelectNative,{options:s})})}),(0,c.jsx)("div",{className:"col-span-3",children:(0,c.jsx)(l.l0.Item,{label:(0,a.t)([yN,"preview"]),name:"",hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,children:(0,c.jsx)("div",{className:"flex h-11 items-center",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,c.jsx)(bN,{format:d,decimals:p,position:m,label:f})})})})})]})})),ON),AN="profile_fields.field_modal",EN=Object.values(zC.xg),IN=r(27361),DN=r.n(IN);function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LN(Object(r),!0).forEach((function(t){RN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FN="profile_fields.field_modal",BN=function(e){var t=e.index,r=e.field,n=e.isDisabled,i=(0,pr.Gc)().register,o="".concat(zC.k_,".").concat(t),s="".concat(o,".visible"),u=n?{checked:!1}:{};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",MN({type:"hidden"},i("".concat(o,".id")))),(0,c.jsx)("input",MN({type:"hidden"},i("".concat(o,".name"),{value:r}))),(0,c.jsx)(l.l0.Item,{hiddenField:!0,name:s,id:s,label:(0,a.t)(["profile_fields.sections",r,"title"]),tooltipText:(0,a.t)("".concat(FN,".").concat(r,"_tooltip")),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,className:"flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0 font-normal text-base",labelWrapperClassName:"flex items-center",translationRoot:FN,children:(0,c.jsx)(l.l0.Checkbox,MN({id:s,name:s,isFormItem:!1},u))})]})},UN=Object.values($C.Nd),zN=function(e){var t,r=e.name,n=void 0===r?zC.AZ.FIELD_TYPE:r,i=(0,pr.qo)({name:n}),o=TN[i]||function(){return null};return(0,c.jsx)(o,{name:null!==(t=NN[i])&&void 0!==t?t:i})};zN.DefaultFields=function(){return(0,c.jsx)("div",{className:"mt-7 flex flex-col gap-2.5",children:EN.map((function(e){return(0,c.jsx)(l.l0.Item,{hiddenField:!0,name:e,label:(0,a.t)([AN,e]),hideDescription:!0,hideBorder:!0,className:"flex flex-row-reverse justify-end py-0",labelClassName:"ml-4 mb-0 font-normal text-base",labelWrapperClassName:"flex items-center",translationRoot:AN,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:e,variant:"small"})},e)}))})},zN.DisplayOptions=function(){var e=(0,pr.qo)({name:"hidden"}),t=(0,pr.Gc)().formState.errors,r=DN()(t,zC.k_);return(0,c.jsxs)("fieldset",{className:J()("mt-7",{"pointer-events-none cursor-not-allowed opacity-60":e}),disabled:e,children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)(["profile_fields.field_modal","display"])}),(0,c.jsx)("div",{className:"mt-2.5 flex flex-col gap-3.5",children:UN.map(()}),r&&(0,c.jsx)("p",{className:"form-group__error",children:r.message})]})},zN.Select=kN;var VN=Object.values(zC.Z9).map((function(e){return{label:(0,a.t)(["profile_fields.field_types",e]),value:e}})),ZN="profile_fields.field_modal",HN=function(e){var t,r=e.isFieldTypeDisabled,n=void 0!==r&&r,i=e.isKeyDisabled,o=void 0!==i&&i,s=(0,pr.qo)({name:zC.AZ.FIELD_TYPE}),u=function(e){var t=e.isEdit,r=(0,pr.Gc)(),n=r.getValues,i=r.setValue,o=r.formState.dirtyFields;return function(e){var r=e.target.value,a=GC(n([zC.AZ.KEY]),1)[0];if((!o[zC.AZ.KEY]||!a)&&(!t||!a)){var s=qC()(r);i(zC.AZ.KEY,s)}}}({isEdit:n});return(0,c.jsxs)("div",{className:"pb-3 pt-2.5",children:[(0,c.jsxs)("div",{className:"block gap-6 md:flex",children:[(0,c.jsx)(l.l0.Item,{name:zC.AZ.LABEL,hideDescription:!0,hideBorder:!0,translationRoot:ZN,placeholder:(0,a.t)("".concat(ZN,".label_placeholder")),tooltipText:(0,a.t)("".concat(ZN,".label_tooltip")),fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{onBlur:u})}),(0,c.jsx)(l.l0.Item,{name:zC.AZ.FIELD_TYPE,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,translationRoot:ZN,tooltipText:n?(0,a.t)([ZN,"field_type_disabled_tooltip"]):void 0,fullWidth:!0,children:(0,c.jsx)(l.l0.SelectNative,{options:VN,disabled:n})})]}),(0,c.jsxs)("div",{className:"mt-1 block gap-6 md:flex",children:[(0,c.jsx)(l.l0.Item,{name:zC.AZ.KEY,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,translationRoot:ZN,tooltipText:o?(0,a.t)([ZN,"platform_field_key_tooltip"]):(0,a.t)([ZN,"key_tooltip"]),fullWidth:!0,isDisabled:o,children:(0,c.jsx)(l.l0.Input,{disabled:o})}),(t=s,[zC.Z9.TEXT,zC.Z9.TEXTAREA,zC.Z9.LINK].includes(t)&&(0,c.jsx)(l.l0.Item,{name:zC.AZ.PLACEHOLDER,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,translationRoot:ZN,tooltipText:(0,a.t)([ZN,"placeholder_tooltip"]),fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{})}))]}),(0,c.jsx)("div",{className:"mt-1",children:(0,c.jsx)(l.l0.Item,{name:zC.AZ.DESCRIPTION,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,translationRoot:ZN,tooltipText:(0,a.t)([ZN,"description_tooltip"]),fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{})})}),(0,c.jsx)(zN,{}),(0,c.jsx)(zN.DefaultFields,{}),(0,c.jsx)(zN.DisplayOptions,{})]})};function qN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function GN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qN(Object(r),!0).forEach((function(t){WN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function WN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QN=rN(),KN="profile_fields.field_modal",JN=function(e){var t=e.onSubmit,r=void 0===t?tj():t,n=(0,ne.yT)();return(0,c.jsxs)(ie.u_,{isOpen:n.visible,onClose:n.hide,contentPortalId:"profile-fields-new-field-portal",title:(0,a.t)([KN,"new_title"]),children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsx)(ie.u_.Content,{size:"xl",children:(0,c.jsx)("div",{className:"h-full overflow-y-auto",children:(0,c.jsxs)(l.l0,{validationSchema:aN,onSubmit:function(e){r(GN(GN({},e),{},{hidden:void 0}),(function(){return n.hide()}))},defaultValues:QN,children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",children:(0,a.t)([KN,"new_title"])}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:n.hide})})]}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsx)(HN,{})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)("div",{className:"flex justify-end",children:(0,c.jsx)(l.zx,{type:"submit",large:!0,variant:"circle",children:(0,a.t)([KN,"add_field"])})})})]})})})]})},$N=ne.uc.create((function(e){return(0,c.jsx)(JN,GN({},e))})),YN=r(40535);function XN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return eT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tT=function(e){var t=e.data,r=e.onClose,n=XN((0,fr.k)(),2),i=n[0],o=n[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.zx,{type:"button",large:!0,variant:"secondary",onClick:o,children:(0,a.t)("profile_fields.archive_field")}),(0,c.jsx)(UC.Aw,{isVisible:i,fieldRow:t,onClose:function(){o(),r()}})]})};function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rT(Object(r),!0).forEach((function(t){iT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oT,aT=rN(),sT="profile_fields.field_modal",lT=function(e){var t=e.data.id,r=e.onSubmit,n=(0,ne.yT)(),i=(0,YN.Yw)({fieldId:t}).getOptions,o=i.data,s=i.isLoading;return(0,c.jsxs)(ie.u_,{title:(0,a.t)([sT,"edit_title"]),isOpen:n.visible,onClose:n.hide,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsx)(ie.u_.Content,{size:"xl",children:(0,c.jsx)("div",{className:"h-full overflow-y-auto",children:s?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(l.l0,{validationSchema:aN,onSubmit:function(e){var t,i,a,s,l,c,u,d=e[zC.AZ.FIELD_TYPE],f={};$C.KJ.includes(d)&&(i={prevData:o.choices_attributes,newData:e.choices_attributes},a=i.prevData,s=i.newData,l=i.param,c=void 0===l?"id":l,u=(0,fn.differenceBy)(a,s,c).map((function(e){return nT(nT({},e),{},{_destroy:!0})})),f=s.concat(u)),r(o.id,nT(nT({},e),{},(iT(t={},zC.xg.HIDDEN,void 0),iT(t,"choices_attributes",f),iT(t,"pages_attributes",e.pages_attributes),t)),(function(){return n.hide()}))},defaultValues:nT(nT({},aT),o),children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",children:(0,a.t)([sT,"edit_title"])}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:n.hide})})]}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsx)(HN,{isFieldTypeDisabled:!0,isKeyDisabled:o.platform_field})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsxs)("div",{className:"flex justify-end gap-x-4",children:[(0,c.jsx)(tT,{data:o,onClose:n.hide}),(0,c.jsx)(l.zx,{type:"submit",large:!0,variant:"circle",children:(0,a.t)("save_changes")})]})})]})})})]})},cT=ne.uc.create((function(e){return(0,c.jsx)(lT,nT({},e))})),uT=function(){var e=(0,ZC.or)(),t=e.onNewProfileField,r=e.onEditProfileField,n=(0,ne.yT)($N),i=(0,ne.yT)(cT);return{onNewButtonClick:onEditButtonClick:};function dT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fT=(dT(oT={},zC.G7.ACTIVE,(0,a.t)("profile_fields.empty_state.active.title")),dT(oT,zC.G7.ARCHIVED,(0,a.t)("profile_fields.empty_state.archived.title")),oT),mT=function(e){var t=e.activeTab,r=uT().onNewButtonClick,n=t===zC.G7.ACTIVE;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-1 text-center",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"bold",children:fT[t]}),n&&(0,c.jsx)(l.zx,{variant:"plain",onClick:r,children:(0,a.t)("profile_fields.add_new_field")})]})},pT=r(75937),hT=["activeTab"];function bT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vT(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var gT="profile_fields",xT=function(e){var t=e.fieldRow,r=e.onUnarchive,n=e.onDelete,i=e.dataTestId,o=!t.platform_field;return(0,c.jsxs)("div",{"data-testid":i,children:[(0,c.jsx)(l.Lt.Item,{onClick:r,children:(0,c.jsx)(l.Lt.ItemLink,{type:"button",children:(0,a.t)([gT,"unarchive"])})}),o&&(0,c.jsx)(l.Lt.Item,{onClick:n,children:(0,c.jsx)(l.Lt.ItemLink,{type:"button",children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([gT,"delete"])})})})]})},_T=function(e){var t=e.onEdit,r=e.onArchive,n=e.dataTestId;return(0,c.jsxs)("div",{"data-testid":n,children:[(0,c.jsx)(l.Lt.Item,{onClick:t,children:(0,c.jsx)(l.Lt.ItemLink,{type:"button",children:(0,a.t)([gT,"edit"])})}),(0,c.jsx)(l.Lt.Item,{onClick:r,children:(0,c.jsx)(l.Lt.ItemLink,{type:"button",children:(0,a.t)([gT,"archive"])})})]})},jT=function(e){var t=e.activeTab,r=vT(e,hT),n=t===zC.G7.ARCHIVED?xT:_T;return(0,c.jsx)(n,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bT(Object(r),!0).forEach((function(t){yT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r))};function wT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return OT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var PT,ST=function(e){var t=e.activeTab,r=e.data,i=uT().onEditButtonClick,o=(0,pT.l)().unarchiveFieldMutations.mutate,s=wT((0,fr.k)(),2),u=s[0],d=s[1],f=wT((0,fr.k)(),2),m=f[0],p=f[1],h=(0,n.useMemo)((function(){var e=r.pages.filter((function(e){return e.visible}));return e.length?e.map((function(e){var t=e.name;return(0,a.t)(["profile_fields.sections",t,"title"])})).join(", "):(0,a.t)("profile_fields.field_modal.hidden")}),[r]);return(0,c.jsxs)(X.SC,{className:"group align-top",children:[(0,c.jsx)(X.pj,{shouldWrap:!1,children:(0,c.jsx)("button",{type:"button",className:"w-full text-left",disabled:t===zC.G7.ARCHIVED,onClick:function(){return i(r)},children:r.label})}),(0,c.jsx)(X.pj,{children:(0,a.t)(["profile_fields.field_types",r.field_type])}),(0,c.jsx)(X.pj,{shouldWrap:!1,children:h}),(0,c.jsxs)(X.pj,{variant:"actions",className:"!py-4",children:[(0,c.jsx)(l.Lt,{dataTestId:"profile-field-actions-menu",direction:"bottom-end",button:(0,c.jsx)(l.Lt.MenuButton,{className:"group-hover:visible lg:invisible",children:(0,c.jsx)("div",{className:"hover:bg-tertiary flex h-6 w-6 justify-center rounded",children:(0,c.jsx)(bt.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})})}),children:(0,c.jsx)(jT,{activeTab:t,fieldRow:r,onEdit:function(){return i(r)},onArchive:d,onDelete:p,onUnarchive:dataTestId:"field-options"})}),(0,c.jsx)(UC.Aw,{fieldRow:r,isVisible:u,onClose:d}),(0,c.jsx)(UC.L3,{fieldRow:r,isVisible:m,onClose:p})]})]})},kT=function(e){var t=e.activeTab,r=e.getOptions,n=r.data,i=r.isLoading,o=r.isError,s=r.error,u=(0,Mo.k)().shouldShowTrialBanner;return i?(0,c.jsx)("section",{className:"h-72",children:(0,c.jsx)(l.aN,{center:!0})}):o?(0,c.jsx)("section",{className:"flex w-full items-center justify-center",children:(0,c.jsx)("p",{children:s.message})}):0===n.length?(0,c.jsx)("section",{className:"flex h-96 flex-col items-center justify-center",children:(0,c.jsx)(mT,{activeTab:t})}):(0,c.jsx)("section",{className:"relative mx-auto w-full overflow-y-auto px-6",style:{height:"calc(100vh - ".concat(66,"px - ").concat(41,"px - ").concat(48,"px - ").concat(52,"px - ").concat(u?"3rem":"0px",")")},children:(0,c.jsxs)(X.iA,{dataTestId:"profile-field-list",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-4/12"}),(0,c.jsx)("col",{className:"w-3/12"}),(0,c.jsx)("col",{className:"w-4/12"}),(0,c.jsx)("col",{className:"w-1/12"})]}),(0,c.jsxs)(X.FE,{isSticky:!0,children:[(0,c.jsx)(X.dc,{variant:"uppercase",children:(0,a.t)("profile_fields.field_label")}),(0,c.jsx)(X.dc,{variant:"uppercase",children:(0,a.t)("profile_fields.field_type")}),(0,c.jsx)(X.dc,{variant:"uppercase",children:(0,a.t)("profile_fields.displays_on")}),(0,c.jsx)(X.dc,{children:(0,c.jsx)("span",{className:"sr-only",children:(0,a.t)("profile_fields.options")})})]}),(0,c.jsx)(X.RM,{children:n.map((function(e){return(0,c.jsx)(ST,{data:e,activeTab:t},e.id)}))})]})})},CT=function(){var e=(0,ZC.or)().getOptions;return(0,c.jsx)(kT,{activeTab:zC.G7.ACTIVE,getOptions:e})},NT=function(){var e=(0,VC.i)().getArchivedQueryOptions;return(0,c.jsx)(kT,{activeTab:zC.G7.ARCHIVED,getOptions:e})},TT="profile_fields",AT=function(e){var t=e.showManageButton,r=void 0===t||t,n=(0,dr.k6)(),i=uT().onNewButtonClick;return(0,c.jsxs)("div",{className:"bg-primary flex w-full items-center justify-between px-6 py-4",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)([TT,"title"])}),(0,c.jsxs)("div",{className:"flex gap-x-4",children:[r&&(0,c.jsx)(l.zx,{onClick:function(){n.push(S.Gp.profileFieldManage())},variant:"secondary",children:(0,a.t)([TT,"manage.button"])}),(0,c.jsx)(l.zx,{onClick:i,variant:"circle",children:(0,a.t)([TT,"add_new_field"])})]})]})},ET=function(e){var t=e.count,r=void 0===t?"":t;return(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("profile_fields.count",{count:r})})})};function IT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return DT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MT=(LT(PT={},zC.G7.ACTIVE,(0,a.t)("profile_fields.active")),LT(PT,zC.G7.ARCHIVED,(0,a.t)("profile_fields.archived")),PT),RT=Object.values(zC.G7),FT=function(){var e=IT((0,n.useState)(RT.indexOf("active")),2),t=e[0],r=e[1],i=(0,VC.i)().getArchivedQueryOptions,o=i.data,a=i.isLoading,s=i.isError,l=(0,ZC.or)().getOptions.data,u=!a&&!s&&o.length>0||t==RT.indexOf("archived"),d=null===l||void 0===l?void 0:l.length,f=null===o||void 0===o?void 0:o.length;return(0,c.jsxs)("div",{className:"bg-primary h-full",children:[(0,c.jsx)(AT,{}),(0,c.jsx)("main",{children:(0,c.jsxs)(Uo.O.Group,{selectedIndex:t,onChange:function(e){return r(e)},children:[(0,c.jsx)(Uo.O.List,{className:"bg-primary border-primary border-b px-6",children:RT.filter(().map((function(e){return(0,c.jsxs)(Uo.O,{children:[MT[e],(0,c.jsx)(Uo.O.Counter,{children:e===zC.G7.ACTIVE?d:f})]},e)}))}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsxs)(Uo.O.Panel,{children:[(0,c.jsx)(ET,{count:d}),(0,c.jsx)(CT,{})]}),u&&(0,c.jsxs)(Uo.O.Panel,{children:[(0,c.jsx)(ET,{count:f}),(0,c.jsx)(NT,{})]})]})]})})]})},BT=r(18085),UT=r(12939),zT="page",VT=Object.values($C.Nd).map((function(e){return{label:(0,a.t)(["profile_fields","sections",e,"title"]),value:e}})),ZT=function(){var e=(0,dr.k6)(),t=(0,rl.t)()[zT],r=void 0===t?$C.Nd.SIGNUP:t;return(0,c.jsx)(_d.h4.Actions,{children:(0,c.jsx)(UT.S,{value:r,onChange:function(t){e.push({search:(0,S.m_)(zT,t)})},options:VT})})},HT=function(){return(0,c.jsxs)("div",{className:"bg-primary flex h-full w-full items-center justify-between",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)(["profile_fields.manage","title"])}),(0,c.jsx)(ZT,{}),(0,c.jsx)("div",{"aria-hidden":!0})]})},qT=r(19017),GT=r(95974),WT=r(65554),QT=function(e){var t=e.key,r=e.field_type,n=zC.D9[r];return n?(zC._i.includes(t)&&(n=zC.D9[t]),n):zC.D9.text},KT="profile_fields.actions",JT=function(e){var t=e.onClick;return{key:"edit",tooltip:(0,a.t)("".concat(KT,".edit")),icon:"pencil",onClick:t}},$T=function(e){var t=e.onClick;return{key:"hide",tooltip:(0,a.t)("".concat(KT,".hide")),icon:"16-eye-closed",onClick:t}};function YT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function XT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YT(Object(r),!0).forEach((function(t){eA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tA=function(e){var t=e.onHide,r=void 0===t?tj():t,n=e.isDragOverlay,i=(0,WT.dw)().useDragHandle,o=(0,WT.dI)(),a=o.item,s=o.listeners,l=uT().onEditButtonClick,u=[JT({onClick:function(){return l(a)}}),$T({onClick:r})];return(0,c.jsx)(GT.TR,{item:XT(XT({},a),{},{icon:n?"16-drag-handle":QT(a)}),actions:n?[]:u,dragEventListeners:s,useDragHandle:i})},rA=r(66946),nA=function(e){var t=e.title,r=e.children;return(0,c.jsx)("div",{className:"bg-primary",children:(0,c.jsxs)("div",{className:"mx-auto max-w-xs",children:[t&&(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:t})}),(0,c.jsx)("div",{className:"flex flex-col gap-y-2",children:r})]})})},iA=r(45587);function oA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||uA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aA(Object(r),!0).forEach((function(t){lA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cA(e){return function(e){if(Array.isArray(e))return dA(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||uA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uA(e,t){if(e){if("string"===typeof e)return dA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dA(e,t):void 0}}function dA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fA,mA=pA="WITHIN_CONTAINER",hA="BETWEEN_CONTAINERS",bA="RESET",yA=function(e,t){switch(t.type){case pA:var r=t.activeId,n=t.overId,i=t.containerId,o=e[i],a=mA(o,r),s=mA(o,n);return sA(sA({},e),{},lA({},i,(0,iA.Rp)(o,a,s)));case hA:var l,c=t.activeId,u=t.overId,d=t.activeContainerId,f=t.overContainerId,m=t.indexModifier,p=e[d],h=p.find((function(e){return e.id===c})),b=mA(e[f],u),y=b>=0?b+m:e[f].length+1;return lA(l={},d,p.filter(()),lA(l,f,(v=e[f],g=y,x=h,(_=cA(v)).splice(g,0,x),_)),l;case bA:return t.fields;default:return new Error}var v,g,x,_};function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vA(Object(r),!0).forEach((function(t){OA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||jA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _A(e){return function(e){if(Array.isArray(e))return wA(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||jA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jA(e,t){if(e){if("string"===typeof e)return wA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wA(e,t):void 0}}function wA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PA="visibleFields",SA="hiddenFields",kA=(OA(fA={},PA,"unhideProfileField"),OA(fA,SA,"hideProfileField"),fA),CA=[].concat(_A(UC.Sr),_A(UC.Os)).map((function(e){return e.id})),NA=function(e){var t=e.currentFields,r=e.reorderFieldsMutation,i=function(e){var t=e.currentFields,r=oA((0,n.useReducer)(yA,t),2),i=r[0],o=r[1];return(0,n.useEffect)((,[t]),[i,o]}({currentFields:t}),o=xA(i,2),a=o[0],s=o[1],l=a.visibleFields,c=a.hiddenFields;return{fields:a,handleHideField:function(e){var t=e.item;r({hideProfileField:t,reorderedProfileFields:[].concat(_A(l.filter((function(e){return e.id!==t.id}))),[t],_A(c))})},handleUnhideField:function(e){var t=e.item;r({unhideProfileField:t,reorderedProfileFields:[].concat(_A(l),[t],_A(c.filter((function(e){return e.id!==t.id}))))})},handleDragOver:function(e){var t=AA(e),r=t.activeContainerId,n=t.overContainerId,i=t.activeId,o=t.overId,a=e.over,l=e.active;if(void 0!=o&&i!==o)if(r===n)s({type:pA,containerId:r,activeId:i,overId:o});else{if(!r||!n)return;var c=a&&l.rect.current.translated&&l.rect.current.translated.top>a.rect.top+a.rect.height;s({type:hA,activeContainerId:r,overContainerId:n,activeId:i,overId:o,indexModifier:c?1:0})}},handleDragEnd:function(e){var t=AA(e),n=t.overContainerId,i=t.overId,o=t.activeId;if(void 0!=i){var a=kA[n];r(gA(gA({},CA.includes(i)?OA({},a,{id:o}):i&&a?OA({},a,{id:i}):{}),{},{reorderedProfileFields:[].concat(_A(l),_A(c))}))}}}};unction AA(e){var t=e.active,r=e.over;return{activeContainerId:TA(t),overContainerId:TA(r),activeId:t.id,overId:r.id}}var EA,IA=function(e){var t=e.section;return(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsx)(l.ZT.BodySm,{children:(0,a.t)(["profile_fields.empty_state",t,"title"])})})},DA=LA=function(e){var t=e.id,r=e.title,n=e.fields,i=e.dummyList,o=void 0===i?null:i,a=e.children,s=e.dataTestId;return(0,c.jsx)(nA,{title:r,children:(0,c.jsxs)("div",{"data-testid":s,children:[(0,c.jsxs)(rA.cm.List,{id:t,items:n,children:[o,n.map((function(e){return(0,c.jsx)(rA.cm.Item,{item:e,placeholder:DA,children:a},e.id)}))]}),0===n.length&&(0,c.jsx)(IA,{section:t})]})})},MA=function(e){var t=e.item,r=e.dataTestId,n=t||{},i=n.icon,o=n.getLabel;return(0,c.jsx)(l.cm.Item,{disabled:!0,item:t,children:(0,c.jsx)(sO.T,{content:(0,a.t)("profile_fields.system_field"),children:(0,c.jsxs)("div",{className:J()(GT.W2,"cursor-not-allowed"),"data-testid":r,children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[i&&(0,c.jsx)(bt.JO,{className:"flex",type:i,size:16,useWithFillCurrentColor:!0}),(0,c.jsx)("span",{className:"truncate",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:null===o||void 0===o?void 0:o()})})]}),(0,c.jsx)("div",{className:"inline-flex items-center",children:(0,c.jsx)(bt.JO,{type:"16-lock",size:16,useWithFillCurrentColor:!0,"aria-label":(0,a.t)("profile_fields.system_field")})})]})})})};function RA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RA(Object(r),!0).forEach((function(t){BA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function BA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UA="VISIBLE",zA="NOT_VISIBLE",VA=(BA(EA={},UA,UC.Sr),BA(EA,zA,UC.Os),EA),ZA=function(e){var t=e.currentPage,r=e.currentList,n=VA[r];return(0,c.jsx)("div",{className:"grid gap-y-2",children:n.map((function(e){var r=e.id,n=e.item;return(0,e.show)(t)?(0,c.jsx)(MA,{item:FA({id:r},n),dataTestId:"default-field"},r):null}))})};function HA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HA(Object(r),!0).forEach((function(t){GA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function GA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WA=function(e){var t=e.onHide,r=void 0===t?tj():t,n=(0,WT.dw)().useDragHandle,i=(0,WT.dI)(),o=i.item,a=i.listeners,s=uT().onEditButtonClick,l=[JT({onClick:function(){return s(o)}}),$T({onClick:r})];return(0,c.jsx)(GT.TR,{item:qA(qA({},o),{},{icon:QT(o)}),actions:l,dragEventListeners:a,useDragHandle:n,dataTestId:"visible-sortable-field"})};function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QA(Object(r),!0).forEach((function(t){JA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $A=function(e){var t,r,n=e.onShow,i=void 0===n?tj():n,o=(0,WT.dw)().useDragHandle,s=(0,WT.dI)(),l=s.item,u=s.listeners,d=uT().onEditButtonClick,f=[JT({onClick:function(){return d(l)}}),(t={onClick:i},r=t.onClick,{key:"show",tooltip:(0,a.t)("".concat(KT,".show")),icon:"16-eye-open",onClick:r})];return(0,c.jsx)(GT.TR,{item:KA(KA({},l),{},{icon:QT(l)}),actions:f,dragEventListeners:u,useDragHandle:o,dataTestId:"hidden-sortable-field"})},YA=function(e){var t=e.fields,r=e.onHide,n=e.currentPage;return(0,c.jsx)(LA,{id:PA,title:(0,a.t)("profile_fields.visible"),fields:t,dummyList:(0,c.jsx)(ZA,{currentList:UA,currentPage:n}),dataTestId:"visible-sortable-list",children:(0,c.jsx)(WA,{onHide:r})})},XA=function(e){var t=e.fields,r=e.onShow,n=e.currentPage;return(0,c.jsx)(LA,{id:SA,title:(0,a.t)("profile_fields.not_visible"),fields:t,dummyList:(0,c.jsx)(ZA,{currentList:zA,currentPage:n}),dataTestId:"hidden-sortable-list",children:(0,c.jsx)($A,{onShow:r})})};function eE(e){return function(e){if(Array.isArray(e))return tE(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return tE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rE=function(e){var t=e.currentPage,r=e.currentFields,n=e.dataTestId,i=(0,ie.UV)().contentPortalElement,o=(0,qT.k)({currentPage:t}).reorderFields,a=o.mutateAsync,s=o.isLoading,u=NA({currentFields:r,reorderFieldsMutation:a}),d=u.fields,f=u.handleHideField,m=u.handleUnhideField,p=u.handleDragOver,h=u.handleDragEnd,b=d.visibleFields,y=d.hiddenFields;return(0,c.jsxs)("div",{className:J()("bg-primary border-primary relative h-full w-full overflow-y-auto px-6",{"pointer-events-none opacity-70":s}),children:[(0,c.jsx)("div",{className:"flex flex-col gap-6","data-testid":n,children:(0,c.jsxs)(l.cm,{items:[].concat(eE(b),eE(y)),onDragOver:p,onDragEnd:h,lockedVerticalAxis:!0,children:[(0,c.jsx)(YA,{fields:b,onHide:f,currentPage:t}),(0,c.jsx)(XA,{fields:y,onShow:m,currentPage:t}),(0,c.jsx)(l.cm.DragOverlay,{portalTo:i,children:(0,c.jsx)(tA,{isDragOverlay:!0})})]})}),s&&(0,c.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,c.jsx)(l.aN,{})})]})},nE=function(e){var t=e.currentPage,r=e.currentFields;return(0,c.jsxs)("section",{className:"border-primary flex h-full w-80 flex-col gap-y-6 border-r py-6",children:[(0,c.jsx)("div",{className:"px-6",children:(0,c.jsxs)(l.vD,{className:"flex flex-col gap-y-2",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)(["profile_fields.sections",t,"title"])}),(0,c.jsx)(l.ZT.BodySm,{children:(0,a.t)(["profile_fields.sections",t,"preview_info"])})]})}),(0,c.jsx)(rE,{currentPage:t,currentFields:r,dataTestId:"profile-fields-interactive-list"})]})},iE=["className","children","dataTestId"];function oE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oE(Object(r),!0).forEach((function(t){sE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lE(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var cE=function(e){var t=e.className,r=e.children,n=e.dataTestId,i=lE(e,iE);return(0,c.jsx)("div",aE(aE({className:J()("bg-primary mx-auto box-content max-w-[624px] rounded-lg px-8 py-7 pb-8",t),"data-testid":n},i),{},{children:r}))};function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uE(Object(r),!0).forEach((function(t){fE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mE=r(21138);function pE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bE=[{icon:"16-calendar",text:(0,a.t)("profile_fields.sections.profile_view.member_since"),label:(0,a.t)("profile_fields.form.member_join_date")}],yE=function(e){var t=e.icon,r=e.text,n=e.label;return(0,c.jsxs)("div",{className:"flex items-center gap-x-3",title:n,children:[t&&(0,c.jsx)(bt.JO,{type:t,size:16,"aria-label":n}),(0,c.jsx)(l.ZT.LabelSm,{children:r})]})},vE=function(){return(0,c.jsx)("div",{className:"flex flex-col gap-y-5",children:bE.map((function(e){return(0,c.jsx)(yE,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pE(Object(r),!0).forEach((function(t){hE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),e.label)}))})};function gE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gE(Object(r),!0).forEach((function(t){_E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jE,wE=function(){return null};function OE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}wE.SignUpForm=function(e){return(0,c.jsx)(cE,{dataTestId:"profile-fields-signup-form",children:(0,c.jsx)(UC.WS,xE({},e))})},wE.ProfileForm=function(e){return(0,c.jsxs)(cE,{dataTestId:"profile-fields-edit-profile-form",children:[(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)(l.ZT.TitleMd,{children:(0,a.t)("profile_fields.sections.edit_profile.form_title")})}),(0,c.jsx)(UC.r8,dE({},e))]})},wE.ProfileView=function(e){var t=e.fields,r=(void 0===t?{}:t).visibleFields,n=void 0===r?[]:r;return(0,c.jsxs)(cE,{dataTestId:"profile-fields-view-profile",children:[(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)(l.ZT.TitleMd,{children:(0,a.t)("profile_fields.sections.profile_view.profile")})}),(0,c.jsxs)("div",{className:"mb-4 flex gap-6",children:[(0,c.jsx)("div",{children:(0,c.jsx)(mE.Ph,{size:"lg"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:(0,a.t)("profile_fields.form.member_name")})}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelXs,{color:"text-light",weight:"medium",children:(0,a.t)("profile_fields.form.headline")})})]})]}),(0,c.jsx)("div",{className:"border-primary -mx-8 mb-6 mt-8 border-t","aria-hidden":!0}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-9",children:[(0,c.jsx)(vE,{}),(0,c.jsx)(UC.so,{fields:n,isPreview:!0})]})]})};var PE=(OE(jE={},$C.Nd.SIGNUP,wE.SignUpForm),OE(jE,$C.Nd.EDIT_PROFILE,wE.ProfileForm),OE(jE,$C.Nd.PROFILE_VIEW,wE.ProfileView),jE),SE=function(e){var t=e.currentPage,r=e.fields,n=PE[t]||function(){return null};return(0,c.jsx)("div",{className:"h-full flex-1 overflow-auto p-10",children:(0,c.jsx)(n,{fields:r})})},kE=function(){var e=(0,rl.t)()[zT],t=void 0===e?$C.Nd.SIGNUP:e,r=(0,qT.k)({currentPage:t}).getOptions,n=r.data;return r.isLoading?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)("div",{className:"flex h-[calc(100%-77px)]",children:[(0,c.jsx)(nE,{currentPage:t,currentFields:n}),(0,c.jsx)(SE,{currentPage:t,fields:n})]})},CE=(0,fn.uniqueId)(),NE=function(){var e=(0,dr.k6)();return(0,c.jsxs)(BT.x,{isOpen:!0,onClose:function(){e.push(S.Gp.profileFieldList())},shouldShowCloseButton:!0,contentPortalId:CE,children:[(0,c.jsx)(BT.x.Header,{children:(0,c.jsx)(HT,{})}),(0,c.jsx)(kE,{})]})},TE=r(11932),AE=function(e){var t=e.onSuccess,r=e.tier,n=e.successButtonLabel,i=e.onCloseModal;return(0,c.jsxs)("div",{children:[(0,c.jsx)("header",{className:"bg-primary border-primary flex w-full items-center justify-between border-b px-6 py-4",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)("profile_fields.title")})}),(0,c.jsx)("section",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,c.jsx)(TE.w,{title:(0,a.t)("community.feature.no_profile_fields.title"),subtitle:(0,a.t)("community.feature.no_profile_fields.description"),tier:r,onSuccess:t,onCloseModal:i,successButtonLabel:n,source:_u.f.PROFILE_FIELDS_SPLASH_SCREEN})})]})};function EE(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function IE(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){EE(o,n,i,a,s,"next",e)}function s(e){EE(o,n,i,a,s,"throw",e)}a(void 0)}))}}var DE=function(){var e=(0,dr.$B)().path,t=(0,UC.aL)(),r=(0,v.wh)().refetch,n=function(){var e=IE(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=IE(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(dr.AW,{path:"/",children:(0,c.jsx)(FT,{})}),(0,c.jsx)(dr.AW,{path:"".concat(e,"/manage"),exact:!0,children:(0,c.jsx)(NE,{})})]}):(0,c.jsx)(AE,{onSuccess:n,onCloseModal:i,tier:$P.Gb.business,successButtonLabel:(0,a.t)("pricing_plans.upgrade_modal.actions.go_to_profile_fields")})},LE=r(55259),ME="auth_providers",RE=In(),FE=function(e){var t=e.provider;return(0,c.jsx)(yn,{id:"field-auth-provider-name",name:"name",translationRoot:ME,className:"!gap-2 !py-0",description:(0,a.t)([ME,"name_description"],{provider:t}),rules:RE,children:(0,c.jsx)(l.l0.Input,{name:"name"})})},BE=In(),UE=function(){return(0,c.jsx)(yn,{id:"field-auth-provider-client-id",name:"client_id",translationRoot:"auth_providers",className:"!gap-2 !py-0",rules:BE,children:(0,c.jsx)(l.l0.Input,{name:"client_id"})})},zE=In(),VE=function(){return(0,c.jsx)(yn,{id:"field-auth-provider-client-secret",name:"client_secret",translationRoot:"auth_providers",className:"!gap-2 !py-0",rules:zE,children:(0,c.jsx)(l.l0.Input,{name:"client_secret"})})},ZE=function(){return(0,c.jsx)(yn,{name:"scope",translationRoot:"auth_providers",className:"!gap-2 !py-0",children:(0,c.jsx)(l.l0.Input,{name:"scope"})})},HE="auth_providers",qE=In(),GE=function(){return(0,c.jsx)(yn,{translationRoot:HE,name:"authorization_url",label:(0,a.t)([HE,"authorization_url"]),description:(0,a.t)([HE,"authorization_url_description"]),className:"!gap-2 !py-0",rules:qE,children:(0,c.jsx)(l.l0.Input,{name:"authorization_url"})})},WE=In(),QE=function(){return(0,c.jsx)(yn,{translationRoot:"auth_providers",name:"token_url",className:"!gap-2 !py-0",rules:WE,children:(0,c.jsx)(l.l0.Input,{name:"token_url"})})},KE=In(),JE=function(){return(0,c.jsx)(yn,{translationRoot:"auth_providers",name:"user_info_url",className:"!gap-2 !py-0",rules:KE,children:(0,c.jsx)(l.l0.Input,{name:"user_info_url"})})},$E=In(),YE=function(){return(0,c.jsx)(yn,{name:"user_id_path",translationRoot:"auth_providers",className:"!gap-2 !py-0",rules:$E,isHorizontal:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{name:"user_id_path"})})},XE=In(),eI=function(){return(0,c.jsx)(yn,{name:"user_name_path",translationRoot:"auth_providers",className:"!gap-2 !py-0",rules:XE,isHorizontal:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{name:"user_name_path"})})},tI=In(),rI=function(){return(0,c.jsx)(yn,{name:"user_profile_image_src_path",translationRoot:"auth_providers",className:"!gap-2 !py-0",rules:tI,isHorizontal:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{name:"user_profile_image_src_path"})})},nI=In(),iI=function(){return(0,c.jsx)(yn,{name:"user_email_path",translationRoot:"auth_providers",className:"!gap-2 !py-0",rules:nI,isHorizontal:!0,fullWidth:!0,children:(0,c.jsx)(l.l0.Input,{name:"user_email_path"})})},oI="auth_providers",aI=In(),sI=function(e){var t=e.provider,r=void 0===t?"":t,n=e.providerParameterized,i=void 0===n?"":n,o=null!==i&&void 0!==i?i:r.toLocaleLowerCase();return(0,c.jsx)(yn,{id:"field-auth-provider-auth-provider-base-url",translationRoot:oI,name:"auth_provider_base_url",label:(0,a.t)([oI,"auth_provider_base_url"],{provider:r}),description:(0,a.t)([oI,"auth_provider_base_url_description"],{provider:r,provider_parameterized:o}),className:"!gap-2 !py-0",rules:aI,children:(0,c.jsx)(l.l0.Input,{name:"auth_provider_base_url"})})},lI="MemberSpace",cI="Memberful",uI="Wordpress (WP-OAuth)",dI="Bubble",fI="Outseta",mI="Teachable",pI="Doorkeeper (localhost)",hI="Auth0",bI="MemberStack 2.0",yI="Wordpress (MiniOrange)",vI={1:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:"Facebook"}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(ZE,{}),(0,c.jsx)(GE,{}),(0,c.jsx)(QE,{}),(0,c.jsx)(JE,{}),(0,c.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,c.jsx)(YE,{}),(0,c.jsx)(iI,{}),(0,c.jsx)(eI,{}),(0,c.jsx)(rI,{})]})]})},2:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:lI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:lI})]})},3:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"bg-primary rounded-lg",children:(0,c.jsx)(Vc.b,{showIcon:!1,type:"warning",description:(0,a.t)("settings.sso.memberstack_alert")})}),(0,c.jsx)(FE,{provider:"MemberStack"}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{})]})},4:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:cI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:cI})]})},5:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:uI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:uI,providerParameterized:"wordpress-wp-oauth"})]})},6:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:dI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:dI})]})},7:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:fI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:fI})]})},8:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:mI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:mI})]})},9:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:"Thinkific"}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{})]})},10:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:pI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:pI,providerParameterized:"doorkeeper-localhost"})]})},11:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:hI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:hI})]})},12:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:bI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:bI,providerParameterized:"memberstack-2-0"})]})},13:function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(FE,{provider:yI}),(0,c.jsx)(UE,{}),(0,c.jsx)(VE,{}),(0,c.jsx)(sI,{provider:yI,providerParameterized:"wordpress-miniorange"})]})}},gI=function(){var e=(0,(0,pr.Gc)().watch)("strategy.id"),t=(0,n.useMemo)((,[e]);return t?(0,c.jsx)(An,{className:"gap-6",children:(0,c.jsx)(t,{})}):null},xI=function(e){var t=e.isCustom,r=e.provider,n=(0,dr.k6)(),i=_c.X.enterprise,o=i.title,s=i.features,l=return(0,c.jsxs)("div",{className:"border-primary flex flex-col gap-6 rounded-lg border p-4 text-center lg:p-8",children:[(0,c.jsx)(xc.x,{title:t?(0,a.t)("community.feature.sso.custom_title"):(0,a.t)("community.feature.sso.title",{provider:r}),onClick:l}),(0,c.jsx)(gc.K,{title:o,features:s,onClick:l})]})},_I="verify-sso-form",jI=function(){return(0,c.jsx)("form",{id:_I,action:S.lA.settings.single_sign_on_verify_connection,method:"POST",target:"_blank",children:(0,c.jsx)(l.X1,{})})},wI=["client_id","client_secret","name","authorization_url","auth_provider_base_url","scope","token_url","user_id_path","user_info_url","user_email_path","user_name_path","user_profile_image_src_path"];function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SI=function(e){var t,r=e.defaultValues,i=e.strategies,o=(0,pr.Gc)(),a=o.watch,s=o.setValue,l=o.reset,c=o.formState,u=(0,v.wh)().currentCommunity,d=(null!==(t=null===u||void 0===u?void 0:u.policies)&&void 0!==t?t:{}).custom_login_enabled,f=!!c.dirtyFields.strategy,m=a("allow_sign_in_using_circle"),p=a("custom_sign_up"),h=a("strategy.id"),b=(0,n.useMemo)((,[i]),y=(0,n.useMemo)((function(){return i.find(()}),[i,h]),g=(0,n.useCallback)((function(){l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OI(Object(r),!0).forEach((function(t){PI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r))}),[r,l]),x=(0,n.useCallback)((function(){wI.forEach((function(e){return s(e,"")}))}),[s]),_=null!==y&&void 0!==y?y:{},j=_.title,w=_.is_custom_login_strategy_enabled_for_admin,O=void 0!==w&&w,P=_.is_custom,S=void 0!==P&&P;return(0,n.useEffect)((function(){var e;f&&(String(h)===String(null===r||void 0===r||null===(e=r.strategy)||void 0===e?void 0:e.id)?g():x())}),[h,f,r,g,x,l]),{strategiesOptions:b,shouldAllowSignInUsingCircle:m,isCustomSignUp:p,isCustomLoginEnabled:d,selectedStrategyTitle:j,isSelectedStrategyEnabled:O,isSelectedStrategyCustom:S}},kI="settings.sso",CI=function(e){var t=e.defaultValues,r=e.strategies,i=e.isSaving,o=SI({defaultValues:t,strategies:r}),s=o.strategiesOptions,u=o.shouldAllowSignInUsingCircle,d=o.isCustomSignUp,f=o.isCustomLoginEnabled,m=o.selectedStrategyTitle,p=o.isSelectedStrategyEnabled,h=o.isSelectedStrategyCustom;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(yn,{id:"field-auth-provider-enabled",name:"status",translationRoot:kI,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"status",variant:"small"})}),(0,c.jsx)(yn,{name:"enable_state_param",translationRoot:kI,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"enable_state_param",variant:"small"})}),(0,c.jsx)(yn,{name:"allow_sign_in_using_circle",translationRoot:kI,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"allow_sign_in_using_circle",variant:"small"})}),u&&(0,c.jsx)(An,{children:(0,c.jsx)(yn,{name:"sign_in_with_circle_link_label",className:"!py-0",translationRoot:kI,children:(0,c.jsx)(l.l0.Input,{name:"sign_in_with_circle_link_label"})})}),(0,c.jsx)(yn,{id:"field-auth-provider-custom-sign-up",name:"custom_sign_up",translationRoot:kI,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"custom_sign_up",variant:"small"})}),d&&(0,c.jsx)(An,{children:(0,c.jsx)(yn,{id:"field-auth-provider-custom-sign-up-link-url",name:"custom_sign_up_link_url",className:"!py-0",translationRoot:kI,children:(0,c.jsx)(l.l0.Input,{name:"custom_sign_up_link_url"})})}),(0,c.jsx)(yn,{name:"skip_profile_confirmation",translationRoot:kI,childrenWrapper:n.Fragment,isHorizontal:!0,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"skip_profile_confirmation",variant:"small"})}),(0,c.jsx)(yn,{name:"strategy.id",translationRoot:kI,hidePlaceholder:!0,children:(0,c.jsx)(l.l0.SelectNative,{name:"strategy.id",options:s})}),p?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(gI,{}),(0,c.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[f&&(0,c.jsx)(l.zx,{type:"submit",variant:"secondary",form:_I,children:(0,a.t)([kI,"verify_sso_connection"])}),(0,c.jsx)(l.zx,{variant:"circle",disabled:i,large:!0,children:i?(0,a.t)("saving"):(0,a.t)("save_changes")})]})]}):(0,c.jsx)(xI,{isCustom:h,provider:m})]})},NI="settings.sso",TI=function(){var e=rh(),t=e.strategies,r=e.isLoading,n=e.isSaving,i=e.defaultValues,o=e.validationSchema,s=e.handleSubmit;return r||!i?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([NI,"title"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsxs)(un,{subtitle:(0,c.jsx)(tn.Z,{html:(0,a.t)([NI,"subtitle"])}),children:[(0,c.jsxs)(l.l0,{onSubmit:function(e){return s(e)},defaultValues:i,validationSchema:o,children:[(0,c.jsx)(Vc.b,{type:"warning",description:(0,c.jsx)(tn.Z,{html:(0,a.t)([NI,"custom_domain_warning"])}),showIcon:!1}),(0,c.jsx)(CI,{defaultValues:i,strategies:t,isSaving:n})]}),(0,c.jsx)(jI,{})]})})})]})},AI=r(72231),EI=r(47171),II=r(43185),DI=r(78769),LI="spaces.duplicate.complete.failure_notice",MI=function(){return(0,c.jsx)("div",{className:"bg-tertiary rounded-lg p-5",children:(0,c.jsx)("div",{className:"flex flex-col gap-5",children:(0,c.jsxs)("div",{className:"flex gap-2.5",children:[(0,c.jsx)("div",{children:(0,c.jsx)(bt.JO,{type:"20-alert",size:20,className:"!text-default !h-5 !w-5 align-top"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z.LabelSm,{color:"text-default",weight:"semibold",children:(0,a.t)([LI,"content_not_duplicated"])}),(0,c.jsx)(y.Z.BodySm,{color:"text-default",children:(0,a.t)([LI,"content_not_duplicated_description"])})]})]})})})},RI="spaces.duplicate.complete",FI=function(e){var t=e.duplicatedSpace,r=e.duplicationStatus,n=e.onClose,i=(0,dr.k6)(),o=(0,a.t)([RI,"duplicated_space_status","course"===t.post_type?"draft_mode":"secret_mode"]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ie.u_.Body,{className:"!pb-4 !pt-16",children:(0,c.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,c.jsx)(DI.u,{variant:"success",title:(0,a.t)([RI,"space_duplicated"]),subtitle:(0,c.jsxs)(c.Fragment,{children:[(0,a.t)([RI,"duplicated_space_name.part_1"])," ",(0,c.jsxs)(y.Z.LabelMd,{color:"text-default",weight:"bold",children:[t.name," "]}),(0,a.t)([RI,"duplicated_space_name.part_2"])," ",(0,c.jsx)(pP.w,{content:o})]})}),"failed"===r&&(0,c.jsx)(MI,{})]})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)($e.z,{onClick:function(){i.push(S.RZ.show({spaceSlug:t.slug})),n()},type:"button",variant:"circle",full:!0,large:!0,children:(0,a.t)([RI,"go_to_space"])})})]})},BI={basic:["posts","members"],event:["members"],chat:["members"],course:["lessons","members"],members:["members"],image:["members","posts"]},UI="spaces.duplicate.form.duplication_note",zI=function(e){var t=e.space;return(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsxs)(y.Z.BodySm,{color:"text-default",children:[(0,a.t)([UI,"part_1"])," ",(0,c.jsxs)(y.Z.LabelSm,{color:"text-default",weight:"bold",children:[t.name," "]}),(0,a.t)([UI,"part_2"])," ",(0,c.jsxs)(y.Z.LabelSm,{color:"text-default",weight:"bold",children:[t.space_group.name," "]}),(0,a.t)([UI,"part_3"])]})})},VI=r(60680),ZI="spaces.duplicate.form",HI=function(e){var t=e.space,r=e.spaceGroups,n=e.initialFocusRef,i=(0,ie.UV)().contentPortalElement,o=BI[t.post_type].map((function(e){return{label:(0,a.t)([ZI,"content_types",e]),value:e}})),s=t)?(0,a.t)([ZI,"content_types_tooltip",t.post_type]):"";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ce.l.Item,{name:"space.name",variant:"extra-bottom-margin",rules:{required:(0,a.t)([ZI,"errors.name.required"])},translationRoot:"".concat(ZI,".fields"),hideDescription:!0,hideBorder:!0,fullWidth:!0,isFirstChild:!0,children:(0,c.jsx)(ce.l.Input,{ref:n,prefix:(0,c.jsx)(ce.l.EmojiPickerV3Wrapper,{record:t}),maxLength:255})}),(0,c.jsx)(ce.l.Item,{name:"space.space_group_id",variant:"extra-bottom-margin",rules:{required:(0,a.t)([ZI,"errors.space_group_id.required"])},translationRoot:"".concat(ZI,".fields"),hideDescription:!0,hideBorder:!0,fullWidth:!0,children:(0,c.jsx)(VI.V,{name:"space.space_group_id",variant:"form-input",spaceGroups:r,appendTo:i})}),(0,c.jsx)(ce.l.Item,{name:"content_types",className:"!pb-1",labelClassName:"!mb-3.5",translationRoot:"".concat(ZI,".fields"),tooltipText:s,hideDescription:!0,hideBorder:!0,fullWidth:!0,children:(0,c.jsx)(ce.l.CheckboxGroup,{name:"content_types",itemClassName:"!mt-2",itemLabelClassName:"!font-normal",options:o})})]})},qI="spaces.duplicate.form",GI=function(e){var t=e.space,r=e.spaceGroups,i=(0,pr.Gc)(),o=i.watch,s=i.setValue,l=o("space.space_group_id"),u=l&&r.find((function(e){return e.id===l})),d=Boolean(null===u||void 0===u?void 0:u.automatically_add_members_to_new_spaces);return(0,n.useEffect)((,[d,s]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ce.l.Label,{fieldId:"",label:(0,a.t)([qI,"space_access_label"]),className:"!pb-0",hideBorder:!0}),(0,c.jsx)(y.Z.BodySm,{color:"text-default",children:(0,c.jsx)(pP.w,{content:(0,a.t)([qI,"space_access_note","course"===t.post_type?"draft_mode":"secret_mode"])})}),(0,c.jsx)(ce.l.Item,{name:"add_members_from_space_group",className:"!mt-4 !py-0",labelClassName:"!font-normal",translationRoot:"".concat(qI,".fields"),hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,c.jsx)(ce.l.ToggleSwitch,{name:"add_members_from_space_group",variant:"small"})}),(0,c.jsx)(ce.l.Item,{name:"add_members_from_all_access_paywalls",className:"!mt-4 !py-0",labelClassName:"!font-normal",translationRoot:"".concat(qI,".fields"),tooltipText:(0,a.t)([qI,"add_members_from_all_access_paywalls_tooltip"]),hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,c.jsx)(ce.l.ToggleSwitch,{name:"add_members_from_all_access_paywalls",variant:"small"})})]})};function WI(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var QI="spaces.duplicate.form",KI=function(e){var t=e.space,r=e.spaceGroups,n=e.isSubmitting,i=void 0!==n&&n,o=e.onSubmit,s=e.onClose,l=e.initialFocusRef,u={space:{name:t.name,space_group_id:t.space_group.id},content_types:BI[t.post_type],add_members_from_space_group:!1,add_members_from_all_access_paywalls:!0};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",children:(0,a.t)([QI,"title"])}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:s})})]}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsxs)(ce.l,{id:"duplicate-space-form",defaultValues:u,onSubmit:function(){var e,t=(e=se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){WI(o,n,i,a,s,"next",e)}function s(e){WI(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),children:[(0,c.jsx)(zI,{space:t}),(0,c.jsx)(HI,{space:t,spaceGroups:r,initialFocusRef:l}),(0,c.jsx)(GI,{space:t,spaceGroups:r})]})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)($e.z,{type:"submit",form:"duplicate-space-form",variant:"circle",disabled:i,full:!0,large:!0,children:i?(0,a.t)([QI,"actions.duplicating"]):(0,a.t)([QI,"actions.duplicate"])})})]})},JI="spaces.duplicate.loader",$I=function(e){var t=e.onClose;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ie.u_.Body,{className:"!pb-4 !pt-16",children:(0,c.jsx)(DI.u,{variant:"loading",title:(0,a.t)([JI,"duplicating_your_space"]),subtitle:(0,a.t)([JI,"duplicating_your_space_description"])})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)($e.z,{onClick:t,variant:"circle",full:!0,large:!0,children:(0,a.t)([JI,"got_it"])})})]})},YI=function(e){var t=e.space,r=e.spaceGroups,i=e.duplicatedSpace,o=e.duplicationStatus,a=void 0===o?"pending":o,s=e.isOpen,l=void 0!==s&&s,u=e.isLoading,d=void 0!==u&&u,f=e.isSubmitting,m=void 0!==f&&f,p=e.onSubmit,h=e.onClose,b=(0,n.useRef)(null),y=i&&("succeeded"===a||"failed"===a);return(0,c.jsxs)(ie.u_,{isOpen:l,onClose:h,initialFocus:b,contentPortalId:"duplicate-space-modal",children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"md",children:[d&&(0,c.jsx)(gd.a,{center:!0}),!d&&"pending"===a&&(0,c.jsx)(KI,{space:t,spaceGroups:r,isSubmitting:m,onSubmit:p,onClose:h,initialFocusRef:b}),!d&&"started"===a&&(0,c.jsx)($I,{onClose:h}),!d&&y&&(0,c.jsx)(FI,{duplicatedSpace:i,duplicationStatus:a,onClose:h})]})]})},XI=function(e){var t=e.enabled,r=void 0===t||t,n=e.spaceId,i=e.onCompleted;(0,Sc.s)({channel:"Spaces::DuplicationChannel",canCreateConnection:r&&Boolean(n),onMessageReceive:function(e){if("duplicationStatusUpdate"===e.event){var t=e.json_message.status;"succeeded"!==t&&"failed"!==t||i({status:t})}},space_id:n})};function eD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iD=function(e){var t=e.space,r=e.onDuplicationStarted,i=e.onDuplicationCompleted,o=(0,ne.yT)(),s=(0,v.e2)(),l=s.helpers.isDataLoading,u=s.records,d=function(e){var t=e.space,r=e.onDuplicationStarted,i=e.onDuplicationCompleted,o=eD((0,n.useState)(),2),s=o[0],l=o[1],c=eD((0,n.useState)("pending"),2),u=c[0],d=c[1],m=(0,oe.p)().error;XI({enabled:"started"===u,spaceId:null===s||void 0===s?void 0:s.id,onCompleted:function(e){var t=e.status;d(t),nn()(i)&&i({status:t})}});var p=(0,f.useMutation)((function(e){return(0,Er.Cu)(S.av.spaces.duplicate({id:t.id}),e)}),{onSuccess:function(e){l(e),d("started"),nn()(r)&&r()},onError:function(){return m((0,a.t)("spaces.duplicate.alerts.failure"))}});return{duplicatedSpace:s,duplicationStatus:u,isStartingDuplication:p.isLoading,startDuplication:p.mutateAsync}}({space:t,onDuplicationStarted:r,onDuplicationCompleted:i}),m=d.duplicatedSpace,p=d.duplicationStatus,h=d.isStartingDuplication,b=d.startDuplication;return(0,c.jsx)(YI,{space:t,spaceGroups:u,duplicatedSpace:m,duplicationStatus:p,isOpen:o.visible,isLoading:l(),isSubmitting:h,onSubmit:b,onClose:o.remove})},oD=ne.uc.create((),aD=sD=function lD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uD=function(e){var t=e.space,r=e.refetch,i=(0,ne.yT)(oD),o=lD((0,n.useState)(!1),2),s=o[0],l=o[1],c=(0,v.wh)().currentCommunitySettings,u=(0,v.nT)().actions.refresh,d=(0,oe.p)().success,f=Boolean(null===c||void 0===c?void 0:c.spaces_duplication_enabled),m=aD(t);XI({enabled:m,spaceId:t.id,onCompleted:function(){l(!0),i.visible||d((0,a.t)(["settings.spaces.duplicate.alerts.completed"])),nn()(r)&&r()}}),(0,n.useEffect)((function(){if(m&&!s&&nn()(r)){var e=setTimeout((function(){return r()}),1e3);return function(){return clearTimeout(e)}}}),[m,s,r]);return{canDuplicateSpace:f,isSpaceDuplicating:m,showDuplicationModal:function(){return i.show({space:t,onDuplicationStarted:function(){nn()(r)&&r(),u()},onDuplicationCompleted:r})}}},dD=function(e){var t=e.space,r=e.refetch,n=(0,EI.u)().show,i=(0,II.Y)(),o=uD({space:t,refetch:r}),s=o.canDuplicateSpace,l=o.isSpaceDuplicating,u=o.showDuplicationModal;return l?null:(0,c.jsxs)(Q.w.Actions,{children:[(0,c.jsx)(Q.w.Actions.Item,{to:S.RZ.show({spaceSlug:t.slug}),children:(0,a.t)("settings.spaces.view_space")}),(0,c.jsx)(Q.w.Actions.Item,{onClick:function(){return n({spaceId:t.id,refetch:r,initialSection:(0,a.t)("customize_space.customize"),shouldRedirectOnSlugChange:!1})},children:(0,a.t)("settings.spaces.edit")}),s&&(0,c.jsx)(Q.w.Actions.Item,{onClick:u,children:(0,a.t)("settings.spaces.duplicate.title")}),(0,c.jsx)(Q.w.Actions.Item,{hasDanger:!0,onClick:children:(0,a.t)("settings.spaces.delete")})]})},fD="settings.spaces.space_name",mD=function(e){var t=e.space,r=(0,lr.TC)().currentAppearance;return aD(t)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(bt.JO,{type:"loader",className:"mr-2 !inline !h-4 !w-4 align-text-top",size:16,useWithFillCurrentColor:!0}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:(0,a.t)([fD,"duplicating"],{space_name:t.name})})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(sn.rU,{to:S.RZ.show({spaceSlug:t.slug}),children:[(0,c.jsx)(wy.S,{className:"!text-dark mr-2 inline !h-5 !w-5",emoji:t.emoji,appearance:r,customEmojiUrl:t.custom_emoji_url,customEmojiDarkUrl:t.custom_emoji_dark_url}),(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:t.name})]}),sD(t)&&(0,c.jsx)("span",{className:"ml-2",children:(0,c.jsx)(sO.T,{content:(0,a.t)([fD,"content_not_duplicated_tooltip"]),placement:"top-start",interactive:!1,children:(0,c.jsx)(bt.JO,{type:"20-alert",className:"!text-v2-danger !inline !h-4 !w-4 align-text-top",size:20,useWithFillCurrentColor:!0})})})]})},pD=Object.freeze({BASIC:"basic",EVENT:"event",CHAT:"chat",COURSE:"course",MEMBERS:"members",IMAGE:"image"}),hD=Object.freeze(["secret","private","open","draft"]),bD="query",yD="access_type",vD="space_type",gD="space_group",xD=Object.freeze([bD,yD,vD,gD]),_D=["settings-spaces"],jD="settings.spaces.columns",wD="md:w-1/2 2xl:w-1/3",OD="hidden sm:table-cell min-w-[9rem]",PD="hidden sm:table-cell min-w-[6rem]",SD="hidden xl:table-cell w-[5rem] !text-right",kD="hidden xl:table-cell w-[6rem] !text-right",CD="hidden md:table-cell min-w-[5rem]",ND="hidden 2xl:table-cell min-w-[7rem]",TD="hidden 2xl:table-cell",AD="hidden 2xl:table-cell",ED=function(e){return function(t){return aD(t.row.original)?null:e(t)}};function ID(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ID(Object(r),!0).forEach((function(t){LD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ID(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function LD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MD=function(e){var t=e.spaces,r=e.spacesCount,n=e.filter,i=e.page,o=e.isLoadingSpaces,s=e.refetch,u=(0,dr.k6)(),d=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,a.t)([jD,"name"]),thClassName:wD,cellClassName:wD,cell:aggregatedCell:function(e){var t=e.row;return(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:t.groupingValue})}},{accessorKey:"space_group.name",header:(0,a.t)([jD,"space_group"]),thClassName:OD,cellClassName:OD,cell:ED((function(e){return e.getValue()}))},{accessorKey:"post_type",header:(0,a.t)([jD,"space_type"]),thClassName:PD,cellClassName:PD,cell:ED((function(e){return(0,a.t)("settings.spaces.space_types.".concat(e.getValue()))}))},{accessorKey:"space_members_count",header:(0,a.t)([jD,"members"]),thClassName:SD,cellClassName:SD,cell:ED((function(e){return e.getValue()})),aggregationFn:fn.noop},{accessorKey:"moderators_count",header:(0,a.t)([jD,"moderators"]),thClassName:kD,cellClassName:kD,cell:ED((function(e){return e.getValue()})),aggregationFn:fn.noop},{accessorKey:"visibility",header:(0,a.t)([jD,"access_type"]),thClassName:CD,cellClassName:CD,cell:ED((function(e){return(0,a.t)("settings.spaces.visibility.".concat(e.getValue()))}))},{accessorKey:"is_post_disabled",header:(0,a.t)([jD,"who_can_post"]),thClassName:ND,cellClassName:ND,cell:ED((function(e){if("basic"===e.row.original.post_type){var t=e.getValue()?"admin_only":"members";return(0,a.t)("settings.spaces.who_can_post.".concat(t))}return"\u2014"}))},{accessorKey:"prevent_members_from_adding_others",header:(0,a.t)([jD,"members_can_invite"]),thClassName:TD,cellClassName:TD,cell:ED((function(e){return["basic","event"].includes(e.row.original.post_type)?e.getValue()?(0,a.t)("no"):(0,a.t)("yes"):"\u2014"}))},{accessorKey:"hide_members_count",header:(0,a.t)([jD,"hide_members_count"]),thClassName:AD,cellClassName:AD,cell:ED((function(e){return e.getValue()?(0,a.t)("yes"):(0,a.t)("no")}))},{accessorKey:"actions",header:"",cell:function(e){var r=e.row;return(0,c.jsx)(dD,{space:r.original,refetch:t})}}]}({refetch:s}),f=(0,fn.isEmpty)(n)?["space_group_name"]:[];return(0,c.jsx)(Q.w,{data:t,totalRecordsCount:r,isLoading:o,pageSize:100,columns:d,initialPage:i,onChangePage:function(e){var t=S.qk.spacesDashboard.index({params:DD({page:e},n)});u.push(t)},grouping:f,groupingEnabled:!0,expanded:!0,children:(0,c.jsx)("div",{className:"flex h-full flex-col",children:(0,c.jsxs)("div",{className:"max-w-full overflow-x-auto px-6","data-testid":"settings-spaces-list",children:[(0,c.jsxs)(Q.w.Table,{className:"w-full",children:[(0,c.jsx)(Q.w.Header,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)("settings.spaces.empty.title")}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})})})},RD=function(e){var t=e.children,r=(0,Mo.k)().shouldShowTrialBanner,n=(0,Fo.a)().is_v2_1_header_rendered;return(0,c.jsx)("div",{className:J()("bg-primary relative overflow-auto",{"lg:h-[calc(100vh-4rem)]":!r&&!n,"lg:h-[calc(100vh-7rem)]":r&&!n||!r&&n,"lg:h-[calc(100vh-10rem)]":r&&n}),children:(0,c.jsx)("div",{className:"flex h-full flex-col overflow-auto",children:t})})};function FD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FD(Object(r),!0).forEach((function(t){UD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function UD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zD=ia.f2.SpaceGroupsFilter,VD=function(e){var t=e.filter,r=e.updateFilter,n=(0,a.t)("settings.spaces.filters.name");return(0,c.jsx)(To.wn,{chip:n,title:n,selectedText:t.query,onApply:function(e){return r({value:e,filterName:bD})},children:(0,c.jsx)(To.xo,{name:"name-filter",placeholder:n})})},ZD=function(e){var t=e.filter,r=e.updateFilter,n=Object.values(pD).map((function(e){return{name:e,label:(0,a.t)("settings.spaces.space_types.".concat(e)),value:e}})),i=(0,a.t)("settings.spaces.filters.space_type");return(0,c.jsx)(To.wn,{deleteButtonEnabled:!1,chip:i,title:i,selectedText:t.space_type,renderSelectedText:function(e){return(0,c.jsx)(To.L2,BD({items:n},e))},onApply:function(e){return r({value:e,filterName:vD})},children:(0,c.jsx)(To.l6,{options:n,legend:i,name:"checkbox-filter-space-type",activeText:t.space_type})})},HD=function(e){var t=e.filter,r=e.updateFilter,n=hD.map((function(e){return{name:e,label:(0,a.t)("settings.spaces.visibility.".concat(e)),value:e}})),i=(0,a.t)("settings.spaces.filters.access_type");return(0,c.jsx)(To.wn,{chip:i,title:i,selectedText:t.access_type,renderSelectedText:onApply:function(e){return r({value:e,filterName:yD})},children:(0,c.jsx)(To.dQ,{options:n,legend:i,name:"access-type-filter"})})},qD=function(e){var t=e.filter,r=(0,dr.k6)(),n=function(e){var n,i=e.value,o=e.filterName;n=i?BD(BD({},t),{},UD({},o,i)):(0,fn.omit)(t,o);var a=S.qk.spacesDashboard.index({params:BD({page:1},n)});r.push(a)},i=(0,fn.intersection)(xD,Object.keys(t)).length>0;return(0,c.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-between gap-x-1 border-b px-6 py-3",children:[(0,c.jsxs)(Tl.x,{children:[(0,c.jsx)(VD,{updateFilter:n,filter:t}),(0,c.jsx)(ZD,{updateFilter:n,filter:t}),(0,c.jsx)(HD,{updateFilter:n,filter:t}),(0,c.jsx)(zD,{changeUrl:!1,value:t.space_group,onApply:function(e){return n({value:e,filterName:gD})}})]}),(0,c.jsx)(To.Cd,{isVisible:i,onClick:function(){return n({filterName:xD})}})]})};function GD(e){return function(e){if(Array.isArray(e))return WD(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return WD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QD(Object(r),!0).forEach((function(t){JD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $D(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var YD=function(e){var t,r,n=e.page,i=e.filter,o=void 0===i?{}:i,a=function(){var e,t=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Er.UT)(S.av.search.spaces.index({params:KD(KD({},o),{},{page:n,per_page:100,sort:"sidebar"})})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){$D(o,n,i,a,s,"next",e)}function s(e){$D(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),s=(0,f.useQuery)([].concat(GD(_D),[o,n]),a),l=s.data,c=s.isLoading,u=s.refetch;return{spaces:null!==(t=null===l||void 0===l?void 0:l.records)&&void 0!==t?t:[],spacesCount:null!==(r=null===l||void 0===l?void 0:l.count)&&void 0!==r?r:0,isLoading:c,refetch:u}},XD=["page"];function eL(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var tL=function(){var e=function(){var e=(0,rl.t)(),t=e.page,r=eL(e,XD),n=Number(t)||1,i=r,o=YD({page:n,filter:i});return{spaces:o.spaces,spacesCount:o.spacesCount,isLoading:o.isLoading,filter:i,page:n,refetch:o.refetch}}(),t=e.spaces,r=e.spacesCount,n=e.isLoading,i=e.filter,o=e.page,s=e.refetch,u=(0,AI.G)();return(0,c.jsxs)("div",{className:"bg-primary flex h-full flex-col",children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)("settings.spaces.title"),rightContent:(0,c.jsx)(l.zx,{variant:"circle",onClick:function(){u.show()},children:(0,a.t)("settings.spaces.create")}),hasBorder:!0}),(0,c.jsxs)(RD,{children:[(0,c.jsx)(qD,{filter:i}),!n&&(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)("settings.spaces.total",{count:r})})}),(0,c.jsx)("div",{className:"bg-primary isolate overflow-auto",children:(0,c.jsx)(MD,{spaces:t,spacesCount:r,isLoadingSpaces:n,filter:i,page:o,refetch:s})})]})]})},rL="settings.weekly_digest",nL=function(){var e=(0,(0,pr.Gc)().watch)("weekly_digest_enabled");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(yn,{name:"weekly_digest_enabled",translationRoot:rL,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"weekly_digest_enabled",variant:"small"})}),e&&(0,c.jsxs)("div",{className:"bg-tertiary my-4 rounded-lg p-5",children:[(0,c.jsx)(Tn,{name:"digest_intro"}),(0,c.jsx)(yn,{name:"digests_hide_posts",translationRoot:rL,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"digests_hide_posts",variant:"small"})}),(0,c.jsx)(yn,{name:"digests_hide_comments",translationRoot:rL,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"digests_hide_comments",variant:"small"})}),(0,c.jsx)(yn,{name:"digests_hide_stats",translationRoot:rL,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"digests_hide_stats",variant:"small"})}),(0,c.jsx)(yn,{name:"digests_hide_members",translationRoot:rL,childrenWrapper:n.Fragment,isHorizontal:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{name:"digests_hide_members",variant:"small"})})]})]})};function iL(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var oL=function(){var e,t,r=(0,v.wh)(),n=r.isLoading,i=r.currentCommunity,o=(0,l.pm)(),s=o.success,c=o.error,u=(0,f.useQueryClient)(),d=(0,fn.pick)(i,["weekly_digest_enabled","digest_intro","digests_hide_posts","digests_hide_comments","digests_hide_stats","digests_hide_members"]),m=(0,f.useMutation)({mutationFn:function(e){return vn.$.update({community:e})},onSuccess:(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.invalidateQueries(["pundit-user"]);case 2:s((0,a.t)(["settings.general.messages.success"]));case 3:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){iL(o,n,i,a,s,"next",e)}function s(e){iL(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return t.apply(this,arguments)}),onError:function(){return c((0,a.t)(["settings.general.messages.error"]))}}),p=m.mutate;return{isLoading:n,isSaving:m.isLoading,defaultValues:d,handleSubmit:p}},aL="settings.weekly_digest",sL=function(){var e=oL(),t=e.isLoading,r=e.isSaving,n=e.defaultValues,i=e.handleSubmit;return t?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Z,{pageTitle:(0,a.t)([aL,"title"])}),(0,c.jsx)($,{children:(0,c.jsx)(dn,{children:(0,c.jsx)(un,{subtitle:(0,a.t)([aL,"subtitle"]),children:(0,c.jsxs)(l.l0,{defaultValues:n,onSubmit:function(e){return i(e)},children:[(0,c.jsx)(nL,{}),(0,c.jsx)("div",{className:"mt-6 flex justify-end",children:(0,c.jsx)(l.zx,{variant:"circle",disabled:r,large:!0,children:r?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})})})})]})},lL=function(e){var t=e.children,r=e.className;return(0,c.jsx)("main",{className:J()("bg-primary flex h-full flex-col",r),children:t})},cL=r(52353),uL=r.n(cL),dL="all",fL="active",mL="inactive",pL="draft",hL="archived",bL="in_progress",yL="dynamic",vL="bulk_action",gL="scheduled",xL="all",_L="one_time",jL="recurring",wL="dynamic",OL="bulk_action",PL="scheduled",SL="archived",kL={member:"user"},CL={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped",FAILED:"failed"},NL=function(){return{action_type:"",id:(0,fn.uniqueId)("action_"),api_params:{}}},TL={SPACE:"Space",PAYWALL:"Paywall",EVENT:"Posts::Event",MEMBER_TAG:"MemberTag",SPACE_GROUP:"SpaceGroup",POST_BASIC:"Posts::Basic",COMMUNITY:"Community",COURSE:"Space",PROFILE_FIELD:"ProfileField",RECURRING_EVENT_SETTING:"RecurringEventSetting"},AL="basic",EL="event",IL=[$P.Gb.enterprise,$P.Gb.plus],DL=function(e){var t=e.title,r=e.showAddNewButton,n=void 0===r||r,i=e.showBottomBorder,o=void 0===i||i,s=(0,dr.k6)();return(0,c.jsxs)("div",{className:J()("bg-primary border-primary flex h-16 w-full items-center justify-between px-6 py-4",{"border-primary border-b":o}),children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:t}),n&&(0,c.jsx)(l.zx,{onClick:function(){s.push(S.o0.new())},variant:"circle",children:(0,a.t)(["settings.workflows","new_workflow"])})]})},LL=r(22900),ML=r(37004),RL=r(36584),FL=r(90312),BL=r(5375),UL=r(67764),zL=r(74402),VL=r(84731),ZL=r(31842),HL=r(6897),qL="settings.workflows.landing_page",GL=function(){return(0,c.jsxs)(LL.e.FeatureCards.Container,{children:[(0,c.jsx)(LL.e.FeatureCards.Card,{srcSet:"".concat(FL," 663w, ").concat(ML," 812w, ").concat(RL," 2000w"),src:FL,bgColor:"#CFD8FE",imgClassName:"max-w-full max-h-full xl:max-w-[406px]",children:(0,c.jsx)(LL.e.FeatureCards.CardDescription,{mainIconEl:(0,c.jsx)(bt.JO,{type:"20-lightning",size:20}),title:(0,a.t)([qL,"card_1.title"]),subtitle:(0,a.t)([qL,"card_1.subtitle"]),checkedList:[(0,a.t)([qL,"card_1.bullet_1"]),(0,a.t)([qL,"card_1.bullet_2"]),(0,a.t)([qL,"card_1.bullet_3"])],bgColor:"#F4F6FF",accentColor:"#CFD8FE"})}),(0,c.jsx)(LL.e.FeatureCards.Card,{srcSet:"".concat(zL," 663w, ").concat(BL," 812w, ").concat(UL," 2000w"),src:zL,bgColor:"#B0EBD9",imgClassName:"max-w-full max-h-full xl:max-w-[423px]",children:(0,c.jsx)(LL.e.FeatureCards.CardDescription,{mainIconEl:(0,c.jsx)(bt.JO,{type:"20-rocket",size:20}),title:(0,a.t)([qL,"card_2.title"]),subtitle:(0,a.t)([qL,"card_2.subtitle"]),checkedList:[(0,a.t)([qL,"card_2.bullet_1"]),(0,a.t)([qL,"card_2.bullet_2"]),(0,a.t)([qL,"card_2.bullet_3"])],bgColor:"#EBFAF5",accentColor:"#B0EBD9"})}),(0,c.jsx)(LL.e.FeatureCards.Card,{srcSet:"".concat(HL," 663w, ").concat(VL," 812w, ").concat(ZL," 2000w"),src:HL,bgColor:"#FFC9D3",imgClassName:"max-w-full max-h-full xl:max-w-[360px] self-end mb-[-7px]",children:(0,c.jsx)(LL.e.FeatureCards.CardDescription,{mainIconEl:(0,c.jsx)(bt.JO,{type:"20-clock",size:20}),title:(0,a.t)([qL,"card_3.title"]),subtitle:(0,a.t)([qL,"card_3.subtitle"]),checkedList:[(0,a.t)([qL,"card_3.bullet_1"]),(0,a.t)([qL,"card_3.bullet_2"]),(0,a.t)([qL,"card_3.bullet_3"])],bgColor:"#FFF1F3",accentColor:"#FFC9D3"})})]})},WL="settings.workflows.landing_page",QL=function(){var e=(0,dr.k6)(),t=(0,re.E)(),r=t.isCommunityOnTrial,n=t.isCommunityOnBasic,i=t.isCommunityOnProfessional,o=r||n||i,s=function(){e.push(S.o0.new())};return(0,c.jsxs)(c.Fragment,{children:[o&&(0,c.jsx)(LL.e.HelloBar,{to:(0,S.xn)(),children:(0,a.t)([WL,"upgrade_your_plan_to_start_using_workflows"])}),(0,c.jsx)(DL,{title:(0,a.t)("settings.workflows.workflows")}),(0,c.jsx)(LL.e.HeroSection,{title:(0,a.t)([WL,"hero_title"]),subtitle:(0,a.t)([WL,"hero_subtitle"]),buttonText:(0,a.t)([WL,"action_button"]),onActionButtonClick:s,children:(0,a.t)([WL,"hero_description"])}),(0,c.jsx)(GL,{}),(0,c.jsx)(LL.e.FooterAction,{title:(0,a.t)([WL,"hero_title"]),buttonText:(0,a.t)([WL,"action_button"]),onActionButtonClick:s,children:(0,a.t)([WL,"footer_description"])})]})},KL=function(e){var t=e.ids,r=e.withDeleted,n=e.enabled,i=(0,l.pm)();return(0,f.useQuery)(["COMMUNITY_MEMBERS_LIST",t,r],(function(){return(0,Er.UT)(S.av.communityMembers.list({params:{ids:t,with_deleted:r}}))}),{enabled:n,onError:function(e){i.error(e.message)}})};function JL(e){return function(e){if(Array.isArray(e))return $L(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var YL=(0,n.createContext)(null);YL.displayName="CommunityMembersListContext";var XL=function(){var e=(0,n.useContext)(YL);return console.assert(e,"useCommunityMembersListContext is being used outside context provider."),e},eM=function(e){var t=e.ids,r=e.children,n=KL({ids:JL(new Set(t)),withDeleted:!0,enabled:!(null===t||void 0===t||!t.length)});return(0,c.jsx)(YL.Provider,{value:n,children:r})},tM=function(e){var t=e.id,r=e.isAvatarHidden,n=e.isLastNameHidden,i=XL();if(!i)return(0,c.jsx)(l.aN,{center:!0,className:"p-0"});var o=i.data;if(i.isLoading)return(0,c.jsx)(l.aN,{center:!0,className:"!p-0"});var s=null===o||void 0===o?void 0:o.records.find((function(e){return e.id===t}));if(!s)return(0,c.jsx)("span",{className:"break-normal text-sm",children:(0,a.t)("deactivated_member")});var u=s.first_name,d=s.name,f=s.avatar_url;return(0,c.jsxs)(c.Fragment,{children:[!r&&(0,c.jsx)("span",{className:"pl-3",children:(0,c.jsx)("div",{className:"float-left",children:(0,c.jsx)(Pt.sJ,{size:"6",src:f,name:d})})}),(0,c.jsx)("span",{className:"break-normal text-sm",children:n?u:d})]})},rM={md:"w-8 h-8",lg:"min-w-[2.5rem] h-10"},nM=function(e){var t=e.tooltipContent,r=e.size,n=void 0===r?"lg":r,i=e.className,o=e.children,a=function(){return(0,c.jsx)("div",{className:J()("border-dark text-default bg-primary flex items-center justify-center rounded-full border",rM[n],i,{"cursor-pointer":t}),children:o})};return t?(0,c.jsx)(yt.Y,{placement:"top",content:t,children:(0,c.jsx)(a,{})}):(0,c.jsx)(a,{})},iM=r(70313),oM=r(54581);function aM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lM=function(e){var t=e.setIsTestingWebhook,r=e.setIsWebhookTestSuccessful,n=e.setIsWebhookTested,i=e.setTestWebhookResult,o=e.setIsWebhookUrlChanged,a=e.options,s=void 0===a?{}:a,l=(0,oe.p)();return(0,f.useMutation)((function(e){return vn.nH.testWebhook({body:e})}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aM(Object(r),!0).forEach((function(t){sM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSuccess:function(e){r(null===e||void 0===e?void 0:e.success),t(!1),n(!0),i(e),o(!1)},onError:function(e){console.error(e),l.error(e.message)}},s))};function cM(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function uM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return dM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fM=function(e,t){var r,i=uM((0,n.useState)(!1),2),o=i[0],a=i[1],s=uM((0,n.useState)(!1),2),l=s[0],c=s[1],u=uM((0,n.useState)(!1),2),d=u[0],f=u[1],m=uM((0,n.useState)(!1),2),p=m[0],h=m[1],b=uM((0,n.useState)(null),2),y=b[0],v=b[1],g=lM({setIsTestingWebhook:a,setIsWebhookTestSuccessful:c,setIsWebhookTested:f,setTestWebhookResult:v,setIsWebhookUrlChanged:h}).mutate;(0,n.useEffect)((function(){var t;h(d&&(null===e||void 0===e||null===(t=e.api_params)||void 0===t?void 0:t.url)!==(null===y||void 0===y?void 0:y.url))}),[null===e||void 0===e||null===(r=e.api_params)||void 0===r?void 0:r.url]);var x=function(){var e,r=(e=se().mark((function e(r){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:a(!0),g(r);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){cM(o,n,i,a,s,"next",e)}function s(e){cM(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{isTestingWebhook:o,isWebhookTestSuccessful:l,isWebhookTested:d,isWebhookUrlChanged:p,testWebhookResult:y,handleTestWebhook:x}},mM=r(10179),pM=r(79599),hM=function(){var e=(0,v.wh)().currentCommunity,t=(void 0===e?{}:e).current_plan_tier,r=IL.includes(t);return(0,c.jsxs)("div",{className:"relative w-full",children:[(0,a.t)("settings.workflows.form.actions.send_to_webhook"),!r&&(0,c.jsx)("div",{className:"absolute right-0 inline pl-6",children:(0,c.jsx)(lu.g,{label:(0,a.t)("upgrade"),square:!0})})]})},bM=r(43934),yM=Object.assign((function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("flex flex-col gap-6",t),children:r})}),{Section:function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("flex flex-col gap-2",t),children:r})},Title:function(e){var t=e.children;return(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:t})})}}),vM="settings.workflows.view",gM={label:(0,c.jsx)(hM,{}),textLabel:(0,a.t)("settings.workflows.form.action_groups.webhook.send_to_webhook"),value:"send_to_webhook",group:(0,a.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=zU().paramsPath;return(0,c.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,c.jsx)(ce.l.Item,{name:"".concat(e,".url"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,a.t)("settings.workflows.form.webhook_path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,a.t)("settings.workflows.form.webhook_path.placeholder"),rules:{pattern:{value:pM.lu,message:(0,a.t)("settings.workflows.form.webhook_path.error")}},children:(0,c.jsx)(ce.l.Input,{})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.optional_description")}),(0,c.jsx)(mM._,{placeholder:(0,a.t)("settings.workflows.form.optional_description_placeholder"),name:"".concat(e,".description.body"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",type:"workflow"})]})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.url,n=t.description;return(0,c.jsxs)(yM,{children:[r&&(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([vM,"webhook.url"])}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{children:r})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([vM,"webhook.description"])}),n?(0,c.jsx)("div",{className:"text-default text-sm",children:(0,c.jsx)(bM.T,{rich_text_body:n,editable:!1})}):(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([vM,"webhook.empty_description"])})]})]})},historyDetailViewComponent:function(e){var t=e.url;return(0,c.jsx)("div",{className:"flex flex-col gap-2",children:(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.send_to_webhook.url")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:t})})]})})},availability:["dynamic"],eligiblePlanTiers:IL},xM=function(e){var t,r,n=e.handleTestWebhook,i=e.isDisabled,o=e.isTestingWebhook,s=e.isWebhookTestSuccessful,u=e.isWebhookUrlChanged,d=e.isWebhookTested,f=e.triggerType;return(0,c.jsx)(l.zx,{disabled:i,onClick:n,large:!0,variant:"circle",type:"button",children:(t=!f||""===f,r=(!s||u)&&d,o?(0,a.t)("settings.workflows.form.testing_webhook"):r?(0,a.t)("settings.workflows.form.test_again"):t?(0,a.t)("settings.workflows.form.select_entry_rule"):(0,a.t)("settings.workflows.form.test_webhook"))})};function _M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_M(Object(r),!0).forEach((function(t){wM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var OM=(0,n.forwardRef)((function(e,t){var r=e.isExpanded,n=void 0!==r&&r,i=e.isTruncationEnabled,o=void 0!==i&&i,a=e.children;return(0,c.jsx)("div",{ref:t,className:J()("w-full",{"max-h-56 overflow-hidden":!n}),style:jM({},o&&!n&&{WebkitMaskImage:"linear-gradient(180deg,#000 80%,transparent)",maskImage:"linear-gradient(180deg,#000 80%,transparent)"}),children:a})}));OM.displayName="Container";var PM=r(64593);function SM(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var kM=function(){var e,t=(e=se().mark((function e(){var t,n,i,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve().then(r.bind(r,30837));case 3:return t=e.sent,n=t.default,e.next=7,r.e(262).then(r.bind(r,54766));case 7:i=e.sent,o=i.default,n.registerLanguage("json",o),n.configure({languages:["json"]}),n.highlightAll(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){SM(o,n,i,a,s,"next",e)}function s(e){SM(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),CM=function(){var e=(0,lr.TC)().isDarkAppearance;return(0,n.useEffect)((function(){kM()}),[e]),e?(0,c.jsx)(PM.q,{children:(0,c.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css",integrity:"sha512-rO+olRTkcf304DQBxSWxln8JXCzTHlKnIdnMUwYvQa9/Jd4cQaNkItIUj6Z4nvW1dqK0SKXLbn9h4KwZTNtAyw==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"})}):(0,c.jsx)(PM.q,{children:(0,c.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css",integrity:"sha512-0aPQyyeZrWj9sCA46UlmWgKOP0mUipLQ6OZXu8l4IcAmD2u31EPEy9VcIMvl7SoAaKe8bLXZhYoMaE/in+gcgA==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"})})},NM=["children","className"];function TM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function AM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TM(Object(r),!0).forEach((function(t){EM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function EM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IM(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var DM=function(e){var t=e.children,r=e.className,n=IM(e,NM);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(CM,{}),(0,c.jsx)("pre",{className:"bg-tertiary m-0 !rounded-md border-none px-4 py-3",children:(0,c.jsx)("code",AM(AM({className:J()("!bg-transparent !p-0 text-xs leading-4",r)},n),{},{children:t}))})]})};function LM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return MM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var RM,FM=function(e){var t=e.code,r=e.className,i=(0,n.useRef)(null),o=function(e){var t=e.containerRef,r=LM((0,n.useState)(!1),2),i=r[0],o=r[1],a=LM((0,n.useState)(!1),2),s=a[0],l=a[1];return(0,n.useLayoutEffect)((function(){var e=null===t||void 0===t?void 0:t.current;if(e){var r=e.querySelector("pre");if(r){var n=e.clientHeight;r.clientHeight>n&&l(!0)}}}),[t]),{isTruncationEnabled:s,isExpanded:i,toggleExpand:function(){o((function(e){return!e}))}}}({containerRef:i}),s=o.isTruncationEnabled,l=o.isExpanded,u=o.toggleExpand;return(0,c.jsxs)("div",{className:J()("flex flex-col items-start gap-1",r),children:[(0,c.jsx)(OM,{ref:i,isExpanded:l,isTruncationEnabled:s,children:(0,c.jsx)(DM,{children:t})}),s&&(0,c.jsx)("div",{className:"px-1",children:(0,c.jsx)("button",{type:"submit",className:"text-default hover:text-dark text-xs transition-colors",onClick:u,children:l?(0,a.t)("show_less"):(0,a.t)("show_more")})})]})},BM=r(97268);function UM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UM(Object(r),!0).forEach((function(t){VM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function VM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ZM=(VM(RM={},CL.SUCCESS,"success"),VM(RM,CL.PARTIAL_SUCCESS,"warning"),VM(RM,CL.FAILED,"danger"),RM),HM=function(e){var t=e.result,r=e.isBadge,n=void 0===r||r,i=Object.values(CL).includes(t),o=ZM[t],s=n?Hr.O:BM.r;return(0,c.jsx)(s,zM(zM({variant:o},!i&&{textTransform:"capitalize"}),{},{children:(0,a.t)(["settings.workflows.table.result",t],{defaultValue:t||"\u2500"})}))},qM=function(e){var t=e.testResult,r=e.onClose,i=function(e){try{return JSON.stringify(e,null,2)}catch(t){return console.error("Error parsing JSON:",t),""}},o=(0,n.useMemo)((function(){return{request:i(t.request_body),response:i(t.response_body)}}),[t]),s=(0,Xe.wc)({dateTime:new Date(t.date_time),format:"short_date_at_short_time"});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{children:(0,a.t)("settings.workflows.action_messages.send_to_webhook.webhook_test_result")}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:r})})]}),(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("div",{className:"border-dark rounded-lg border",children:(0,c.jsxs)(Uo.O.Group,{children:[(0,c.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 pt-5",children:[(0,c.jsx)("div",{className:"flex flex-col gap-1",children:(0,c.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,c.jsx)(HM,{result:null!==t&&void 0!==t&&t.success?"success":"failed",isBadge:!1}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"time",children:s})]})}),(0,c.jsxs)(Uo.O.List,{children:[(0,c.jsx)(Uo.O,{children:(0,a.t)("settings.workflows.action_messages.send_to_webhook.webhook_url")}),(0,c.jsx)(Uo.O,{children:(0,a.t)("settings.workflows.action_messages.send_to_webhook.request_body")}),(0,c.jsx)(Uo.O,{children:(0,a.t)("settings.workflows.action_messages.send_to_webhook.response_body")})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{className:"px-6 py-5",children:t.url}),(0,c.jsx)(Uo.O.Panel,{className:"p-2",children:(0,c.jsx)(FM,{code:o.request})}),(0,c.jsx)(Uo.O.Panel,{className:"p-2",children:(0,c.jsx)(FM,{code:o.response})})]})]})})}),(0,c.jsx)("div",{className:"mt-5"})]})]})};function GM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function WM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QM=function(e){var t=e.testResult,r=(0,ne.yT)();return(0,c.jsxs)(ie.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsx)(ie.u_.Content,{size:"lg",children:(0,c.jsx)(qM,{testResult:t,onClose:r.hide})})]})},KM=ne.uc.create((function(e){return(0,c.jsx)(QM,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GM(Object(r),!0).forEach((function(t){WM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}));function JM(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var $M={type:"success",title:(0,a.t)("settings.workflows.action_messages.send_to_webhook.test_success"),description:(0,a.t)("settings.workflows.action_messages.send_to_webhook.success_support_text")},YM={type:"alert",title:(0,a.t)("settings.workflows.action_messages.send_to_webhook.test_failed"),description:(0,a.t)("settings.workflows.action_messages.send_to_webhook.error_support_text")},XM=function(e){var t=e.isWebhookTestSuccessful,r=e.webhookTestResult,n=(0,ne.yT)(KM),i=function(){var e,t=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.show({testResult:r});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){JM(o,n,i,a,s,"next",e)}function s(e){JM(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),o=t?$M:YM,s=o.type,u=o.title,d=o.description,f=(0,c.jsxs)("span",{className:"flex gap-x-1",children:[(0,c.jsx)(l.ZT.LabelSm,{children:d}),(0,c.jsx)("button",{type:"button",className:"border-light hover:border-darkest border-b border-dashed",onClick:i,children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)("settings.workflows.action_messages.send_to_webhook.show_test_data_output")})})]});return(0,c.jsx)("div",{className:"mb-9",children:(0,c.jsx)(Vc.b,{type:s,title:u,description:f})})},eR=["onClick","children"];function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tR(Object(r),!0).forEach((function(t){nR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iR(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var oR=function(e){var t=e.onClick,r=e.children,n=iR(e,eR);return(0,c.jsx)($e.z,rR(rR({large:!0,variant:"circle",type:"button",onClick:,n),{},{children:r}))},aR=r(10042),sR=function(e){var t=e.icon,r=e.text,n=e.isLoading;return(0,c.jsxs)("span",{className:J()("inline-flex h-6 items-center gap-1 rounded-full border px-2",{"bg-tertiary border-tertiary w-20 animate-pulse":n,"border-dark":!n}),children:[t&&(0,c.jsx)("span",{className:"flex",children:t}),r&&(0,c.jsx)(y.Z.LabelXs,{weight:"medium",color:"text-default",children:r})]})},lR=function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("flex flex-col gap-6",t),children:r})};lR.Section=function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("flex flex-col gap-2",t),children:r})},lR.Title=function(e){var t=e.children;return(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:t})})};var cR=function(e){var t=e.label,r=e.value,n=e.isLoading,i=e.shouldRepresentAsBadge,o=void 0!==i&&i;return(0,c.jsx)(lR,{children:(0,c.jsxs)(lR.Section,{children:[(0,c.jsx)(lR.Title,{children:t}),(0,c.jsx)("div",{children:o?(0,c.jsx)(uR,{value:r,isLoading:n}):(0,c.jsx)(dR,{value:r,isLoading:n})})]})})},uR=function(e){var t=e.value;return e.isLoading?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(sR,{text:t})},dR=function(e){var t=e.value;return e.isLoading?(0,c.jsx)(l.aN,{}):(0,c.jsx)(l.ZT.LabelSm,{children:t})},fR=function(e){var t=e.resourceId,r=(0,v.T4)({spaceId:t}),n=r.data,i=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.space"),value:null===n||void 0===n?void 0:n.name,isLoading:i})},mR=["per_page"];function pR(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var hR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{per_page:100},t=e.per_page,r=pR(e,mR),n=(0,l.pm)().error;return(0,f.useQuery)(["workflows","list","spaces"],(function(){return vn.rb.list({params:{per_page:t}})}),{onError:function(){return n((0,a.t)(["settings.workflows.form","errors","spaces","fetch_failed"]))}},r)};function bR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bR(Object(r),!0).forEach((function(t){vR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gR,xR="settings.workflows.form",_R={label:(0,a.t)("settings.workflows.form.events.community_member_completed_course.title"),value:"community_member_completed_course",group:(0,a.t)("settings.workflows.form.event_groups.courses"),description:(0,a.t)("settings.workflows.form.events.community_member_completed_course.description"),resource:TL.COURSE,formComponent:function(){var e=(0,pr.Gc)().register,t=hR(),r=t.data,n=t.isLoading,i=(r||{}).records,o=(void 0===i?[]:i).filter((function(e){return"course"===e.post_type}));return n?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",yR({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,c.jsx)(l.l0.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,a.t)([xR,"choose_course"]),labelClassName:"!mb-2 !text-sm",placeholder:(0,a.t)([xR,"search_course"]),className:"!py-0",children:n?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)(hn.M,{spaces:o,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",defaultButtonLabel:(0,a.t)([xR,"select_course"]),placeholder:(0,a.t)([xR,"search_course"]),name:"space-select"})})]})},viewComponent:fR,icon:"course"},jR=function(e){var t=e.resourceId,r=String(t);return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.form.events.community_member_joined_community.community_id"),value:r})},wR=function(e){var t=e.resourceId,r=(0,f.useQuery)(S.av.workflows.events.show({id:t})),n=r.data,i=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.event"),value:null===n||void 0===n?void 0:n.name,isLoading:i})},OR=function(e){var t=e.resourceId,r=(0,v.p7)(t),n=r.data,i=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.space_group"),value:null===n||void 0===n?void 0:n.name,isLoading:i})},PR=["resourceType"];function SR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SR(Object(r),!0).forEach((function(t){NR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function CR(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function NR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TR=(NR(gR={},TL.COMMUNITY,jR),NR(gR,TL.SPACE_GROUP,OR),NR(gR,TL.SPACE,fR),NR(gR,TL.POST_BASIC,(function(e){var t=e.resourceId,r=(0,f.useQuery)(S.av.workflows.posts.show({id:t})),n=r.data,i=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.post"),value:null===n||void 0===n?void 0:n.name,isLoading:i})})),NR(gR,TL.EVENT,wR),gR),AR=function(e){var t=e.resourceType,r=CR(e,PR),n=TR[t]||null;return(0,c.jsx)(c.Fragment,{children:n&&(0,c.jsx)(n,kR({resourceType:t},r))})};function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function IR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(r),!0).forEach((function(t){DR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var LR=function(){var e=(0,pr.Gc)(),t=e.register,r=e.getValues,i=e.setValue,o=(0,v.wh)(),a=o.currentCommunity,s=o.isLoading,l=r("trigger.resource_id");return(0,n.useEffect)((function(){s||l||(i("trigger.resource_type","Community"),i("trigger.resource_id",a.id))}),[a,s,i,l]),s?null:(0,c.jsxs)("div",{className:"hidden",children:[(0,c.jsx)("input",IR({type:"hidden"},t("trigger.resource_type"))),(0,c.jsx)("input",IR({type:"hidden"},t("trigger.resource_id")))]})};function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MR(Object(r),!0).forEach((function(t){FR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function FR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BR=r(23279),UR=r.n(BR);function zR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return VR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ZR=function(e){return{label:e.display_title,value:e.id,description:"".concat(e.space_name," \u2022 ").concat(e.community_member.name)}},HR=function(e){var t,r,i=e.selectedPostId,o=zR((0,n.useState)(""),2),a=o[0],s=o[1],l=FC({title:a}),c=l.posts,u=l.isLoadingPosts,d=(t=i,{post:(r=(0,f.useQuery)(["post",t],(function(){return(0,Er.UT)(S.av.workflows.posts.show({id:t}))}),{enabled:!!t})).data,isLoadingPost:r.isLoading,isPostLoaded:r.isSuccess}),m=d.post,p=d.isLoadingPost,h=d.isPostLoaded,b=c.map(ZR);return m&&!p&&h&&b.push(ZR(m)),{isLoading:u||p,postOptions:b,handlePostTitleChange:UR()((function(e){return s(e)}),500)}};function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function GR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qR(Object(r),!0).forEach((function(t){WR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function WR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QR(Object(r),!0).forEach((function(t){JR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $R="settings.workflows.form",YR=function(e){var t=e.resourceType,r=void 0===t?"":t,n=(0,pr.Gc)().register,i=hR(),o=i.data,s=i.isLoading,u=(o||{}).records,d=(void 0===u?[]:u).filter(();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",KR({type:"hidden",className:"hidden"},n("trigger.resource_type"))),(0,c.jsx)(ce.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,a.t)([$R,"choose_space"]),labelClassName:"!mb-2 !text-sm",placeholder:(0,a.t)([$R,"search_space"]),rules:{required:(0,a.t)("settings.workflows.form.errors.required")},className:"!py-0",children:s?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)(hn.M,{spaces:d,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,a.t)("settings.workflows.form.errors.required")}})})]})};function XR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XR(Object(r),!0).forEach((function(t){tF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rF,nF="settings.workflows.form",iF=function(){var e=(0,pr.Gc)().register,t=(0,v.e2)(),r=t.records,n=t.isLoading;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",eF({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,c.jsx)(ce.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,a.t)([nF,"choose_space_group"]),labelClassName:"!mb-2 !text-sm",placeholder:(0,a.t)([nF,"search_space_group"]),className:"!py-0",children:n?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)(VI.V,{spaceGroups:r,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,a.t)("settings.workflows.form.errors.required")}})})]})},oF=function(){return(0,c.jsx)(v.CM,{children:(0,c.jsx)(iF,{})})},aF=["entityTypeOptions"];function sF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sF(Object(r),!0).forEach((function(t){uF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cF(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function uF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dF=(uF(rF={},TL.COMMUNITY,LR),uF(rF,TL.SPACE_GROUP,oF),uF(rF,TL.SPACE,YR),uF(rF,TL.POST_BASIC,(function(){var e,t=(0,pr.Gc)(),r=t.formState.touchedFields,n=t.register,i=t.getValues,o=(null===(e=r.trigger)||void 0===e?void 0:e.resource_type)?null:i("trigger.resource_id"),s=HR({selectedPostId:o}),u=s.isLoading,d=s.postOptions,f=s.handlePostTitleChange;return u?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",GR({type:"hidden",className:"hidden"},n("trigger.resource_type"))),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)(["settings.workflows.form","choose_post"])}),options:d,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.posts.not_found"),onSearchChange:f})]})})),uF(rF,TL.EVENT,(function(){var e,t=(0,pr.Gc)().register,r=Si({per_page:100}),n=r.data,i=r.isLoading,o=r.isError,s=null===n||void 0===n||null===(e=n.records)||void 0===e?void 0:e.map((function(e){var t=e.name,r=e.space_name,n=e.start_date,i=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,a.t)("settings.workflows.form.recurring_label")):e.name,value:i,description:"".concat(String(r)," \u2022 ").concat(String(n))}}));return i?(0,c.jsx)(l.aN,{center:!0}):o?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",RR({type:"hidden"},t("trigger.resource_type")))}),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.which_event")}),options:s,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})})),rF),fF=function(e){var t,r,n,i=e.entityTypeOptions,o=cF(e,aF),s=(t=(0,pr.Gc)(),r=t.watch,n=t.setValue,{resourceType:r("trigger.resource_type"),handleEntitySelectorChange:),u=s.handleEntitySelectorChange,d=dF[s.resourceType]||null;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(oM.N,{name:"trigger.resource_type",options:i,label:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)(["settings.workflows.form","choose_entity"])}),onChange:u}),d&&(0,c.jsx)(d,lF({},o))]})},mF="settings.workflows.form.entity_type.event",pF=[{value:TL.COMMUNITY,label:(0,a.t)([mF,"community.title"]),description:(0,a.t)([mF,"community.description"])},{value:TL.SPACE_GROUP,label:(0,a.t)([mF,"space_group.title"]),description:(0,a.t)([mF,"space_group.description"])},{value:TL.SPACE,label:(0,a.t)([mF,"space.title"]),description:(0,a.t)([mF,"space.description"])}];function hF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bF,yF="settings.workflows.form.entity_type.event",vF=[].concat(function(e){if(Array.isArray(e))return hF(e)}(bF=pF)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(bF)||bF)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{value:TL.EVENT,label:(0,a.t)([yF,"event.title"]),description:(0,a.t)([yF,"event.description"])}]),gF=function(){return(0,c.jsx)(fF,{entityTypeOptions:vF,resourceType:EL})},xF={label:(0,a.t)("settings.workflows.form.events.community_member_rsvps_to_event.title"),value:"community_member_rsvps_to_event",group:(0,a.t)("settings.workflows.form.event_groups.events"),description:(0,a.t)("settings.workflows.form.events.community_member_rsvps_to_event.description"),formComponent:gF,viewComponent:AR,icon:"event"},_F={label:(0,a.t)("settings.workflows.form.events.event_starts_in_an_hour.title"),value:"event_starts_in_an_hour",group:(0,a.t)("settings.workflows.form.event_groups.events"),description:(0,a.t)("settings.workflows.form.events.event_starts_in_an_hour.description"),formComponent:gF,viewComponent:AR,icon:"event"},jF={label:(0,a.t)("settings.workflows.form.events.event_ended_for_member.title"),value:"event_ended_for_member",group:(0,a.t)("settings.workflows.form.event_groups.events"),description:(0,a.t)("settings.workflows.form.events.event_ended_for_member.description"),formComponent:gF,viewComponent:AR,icon:"event",released:!0};function wF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wF(Object(r),!0).forEach((function(t){PF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SF={label:(0,a.t)("settings.workflows.form.events.community_member_attended_live_event.title"),value:"community_member_attended_live_event",group:(0,a.t)("settings.workflows.form.event_groups.events"),description:(0,a.t)("settings.workflows.form.events.community_member_attended_live_event.description"),resource:TL.EVENT,formComponent:function(){var e,t=(0,pr.Gc)().register,r=Si({per_page:100,location_type:"live"}),n=r.data,i=r.isLoading,o=r.isError,s=null===n||void 0===n||null===(e=n.records)||void 0===e?void 0:e.map((function(e){var t=e.name,r=e.space_name,n=e.start_date,i=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,a.t)("settings.workflows.form.recurring_label")):e.name,value:i,description:"".concat(String(r)," \u2022 ").concat(String(n))}}));return i?(0,c.jsx)(l.aN,{center:!0}):o?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",OF({type:"hidden"},t("trigger.resource_type")))}),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.which_event")}),options:s,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:wR,icon:"event",released:!0};function kF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kF(Object(r),!0).forEach((function(t){NF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TF={label:(0,a.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.title"),value:"community_member_rsvps_to_recurring_event",group:(0,a.t)("settings.workflows.form.event_groups.events"),description:(0,a.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.description"),resource:TL.RECURRING_EVENT_SETTING,formComponent:function(){var e,t=(0,pr.Gc)().register,r=Si({per_page:100,location_type:"recurring"}),n=r.data,i=r.isLoading,o=r.isError,s=null===n||void 0===n||null===(e=n.records)||void 0===e?void 0:e.map((function(e){var t=e.name,r=e.space_name,n=e.start_date;return{label:t,value:e.recurring_event_setting_id,description:"".concat(String(r)," \u2022 ").concat(String(n))}}));return i?(0,c.jsx)(l.aN,{center:!0}):o?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",CF({type:"hidden"},t("trigger.resource_type")))}),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.which_event")}),options:s,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:function(e){var t=e.resourceId,r=(0,f.useQuery)(S.av.workflows.recurringEventSettings.show({id:t})),n=r.data,i=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.event"),value:null===n||void 0===n?void 0:n.name,isLoading:i})},icon:"event"},AF=r(41609),EF=r.n(AF),IF="settings.workflows.view",DF=function(e){var t=e.resourceId,r=ji({id:t}),n=r.data,i=void 0===n?{}:n,o=r.isLoading;if(!i)return null;var s=EF()(i)?(0,a.t)([IF,"deleted_member_tag"]):i.name;return(0,c.jsx)(cR,{label:(0,a.t)([IF,"resources.member_tag"]),value:s,isLoading:o,shouldRepresentAsBadge:!0})};function LF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LF(Object(r),!0).forEach((function(t){RF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FF=function(){var e=(0,pr.Gc)().register,t=Ii(),r=t.memberTags;if(t.isLoading)return(0,c.jsx)(l.aN,{center:!0});var n=r.map((function(e){return{label:e.name,value:e.id}}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",MF({type:"hidden"},e("trigger.resource_type")))}),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.which_tag")}),options:n,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.member_tags.not_found")})]})},BF={label:(0,a.t)("settings.workflows.form.events.community_member_tagged.title"),value:"community_member_tagged",group:(0,a.t)("settings.workflows.form.event_groups.tags"),description:(0,a.t)("settings.workflows.form.events.community_member_tagged.description"),resource:TL.MEMBER_TAG,formComponent:FF,viewComponent:DF,icon:"tag"},UF={label:(0,a.t)("settings.workflows.form.events.community_member_untagged.title"),value:"community_member_untagged",group:(0,a.t)("settings.workflows.form.event_groups.tags"),description:(0,a.t)("settings.workflows.form.events.community_member_untagged.description"),resource:TL.MEMBER_TAG,formComponent:FF,viewComponent:DF,icon:"tag"},zF=r(93655),VF=function(e){var t=e.resourceId,r=(0,zF.a)(t),n=r.data,i=void 0===n?{}:n,o=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.paywall"),value:i.display_name,isLoading:o})};function ZF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function HF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZF(Object(r),!0).forEach((function(t){qF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GF=function(){var e=(0,pr.Gc)().register,t=(0,wr.g)(),r=t.activePaywalls,n=t.isLoading,i=t.isSuccess,o=r.map((function(e){return{label:e.display_name,value:e.id}}));return n?(0,c.jsx)(l.aN,{center:!0}):i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",HF({type:"hidden"},e("trigger.resource_type")))}),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,a.t)("settings.workflows.form.which_paywall"),options:o,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.paywalls.not_found")})]}):(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)("settings.workflows.form.errors.paywalls.fetch_failed")})})},WF={label:(0,a.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.title"),value:"community_member_ended_trial_without_subscription",group:(0,a.t)("settings.workflows.form.event_groups.paywalls"),description:(0,a.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.description"),resource:TL.PAYWALL,formComponent:GF,viewComponent:VF,icon:"paywall"},QF={label:(0,a.t)("settings.workflows.form.events.community_member_purchases_paywall.title"),value:"community_member_purchases_paywall",group:(0,a.t)("settings.workflows.form.event_groups.paywalls"),description:(0,a.t)("settings.workflows.form.events.community_member_purchases_paywall.description"),resource:TL.PAYWALL,formComponent:GF,viewComponent:VF,icon:"paywall"},KF={label:(0,a.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.title"),value:"community_member_subscribed_to_paywall",group:(0,a.t)("settings.workflows.form.event_groups.paywalls"),description:(0,a.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.description"),resource:TL.PAYWALL,formComponent:GF,viewComponent:VF,icon:"paywall"},JF={label:(0,a.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.title"),value:"community_member_unsubscribed_from_paywall",group:(0,a.t)("settings.workflows.form.event_groups.paywalls"),description:(0,a.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.description"),resource:TL.PAYWALL,formComponent:GF,viewComponent:VF,icon:"paywall"},$F={label:(0,a.t)("settings.workflows.form.events.community_member_started_paywall_trial.title"),value:"community_member_started_paywall_trial",group:(0,a.t)("settings.workflows.form.event_groups.paywalls"),description:(0,a.t)("settings.workflows.form.events.community_member_started_paywall_trial.description"),resource:TL.PAYWALL,formComponent:GF,viewComponent:VF,icon:"paywall"},YF="settings.workflows.form.entity_type.post",XF=[{value:TL.COMMUNITY,label:(0,a.t)([YF,"community.title"]),description:(0,a.t)([YF,"community.description"])},{value:TL.SPACE_GROUP,label:(0,a.t)([YF,"space_group.title"]),description:(0,a.t)([YF,"space_group.description"])},{value:TL.SPACE,label:(0,a.t)([YF,"space.title"]),description:(0,a.t)([YF,"space.description"])}],eB={label:(0,a.t)("settings.workflows.form.events.post_published.title"),value:"post_published",group:(0,a.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,a.t)("settings.workflows.form.events.post_published.description"),formComponent:function(){return(0,c.jsx)(fF,{entityTypeOptions:XF,resourceType:AL})},viewComponent:AR,icon:"post"},tB="settings.workflows.form.entity_type.comment",rB=[{value:TL.COMMUNITY,label:(0,a.t)([tB,"community.title"]),description:(0,a.t)([tB,"community.description"])},{value:TL.SPACE_GROUP,label:(0,a.t)([tB,"space_group.title"]),description:(0,a.t)([tB,"space_group.description"])},{value:TL.SPACE,label:(0,a.t)([tB,"space.title"]),description:(0,a.t)([tB,"space.description"])},{value:TL.POST_BASIC,label:(0,a.t)([tB,"post.title"]),description:(0,a.t)([tB,"space.description"])}],nB={label:(0,a.t)("settings.workflows.form.events.post_comment_created.title"),value:"post_comment_created",group:(0,a.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,a.t)("settings.workflows.form.events.post_comment_created.description"),formComponent:function(){return(0,c.jsx)(fF,{entityTypeOptions:rB,resourceType:AL})},viewComponent:AR,icon:"post"};function iB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oB,aB="settings.workflows.form.entity_type.post",sB=[].concat(function(e){return function(e){if(Array.isArray(e))return iB(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return iB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iB(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(XF),[{value:TL.POST_BASIC,label:(0,a.t)([aB,"specific_post.title"]),description:(0,a.t)([aB,"specific_post.description"])}]),lB={label:(0,a.t)("settings.workflows.form.events.post_liked.title"),value:"post_liked",group:(0,a.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,a.t)("settings.workflows.form.events.post_liked.description"),formComponent:function(){return(0,c.jsx)(fF,{entityTypeOptions:sB,resourceType:AL})},viewComponent:AR,icon:"post"},cB={label:(0,a.t)("settings.workflows.form.events.community_member_joined_space.title"),value:"community_member_joined_space",group:(0,a.t)("settings.workflows.form.event_groups.space"),description:(0,a.t)("settings.workflows.form.events.community_member_joined_space.description"),resource:TL.SPACE,formComponent:YR,viewComponent:fR,icon:"space"},uB={label:(0,a.t)("settings.workflows.form.events.community_member_leaves_space.title"),value:"community_member_leaves_space",group:(0,a.t)("settings.workflows.form.event_groups.space"),description:(0,a.t)("settings.workflows.form.events.community_member_leaves_space.description"),resource:TL.SPACE,formComponent:YR,viewComponent:fR,icon:"space"},dB={label:(0,a.t)("settings.workflows.form.events.event_published.title"),value:"event_published",group:(0,a.t)("settings.workflows.form.event_groups.events"),description:(0,a.t)("settings.workflows.form.events.event_published.description"),formComponent:function(){return(0,c.jsx)(fF,{entityTypeOptions:pF,resourceType:EL})},viewComponent:AR,icon:"event",released:!0},fB={label:(0,a.t)("settings.workflows.form.events.community_member_joined_space_group.title"),value:"community_member_joined_space_group",group:(0,a.t)("settings.workflows.form.event_groups.space_group"),description:(0,a.t)("settings.workflows.form.events.community_member_joined_space_group.description"),resource:TL.SPACE_GROUP,formComponent:oF,viewComponent:OR,icon:"space"},mB={label:(0,a.t)("settings.workflows.form.events.community_member_leaves_space_group.title"),value:"community_member_leaves_space_group",group:(0,a.t)("settings.workflows.form.event_groups.space_group"),description:(0,a.t)("settings.workflows.form.events.community_member_leaves_space_group.description"),resource:TL.SPACE_GROUP,formComponent:oF,viewComponent:OR,icon:"space"};function pB(e){return function(e){if(Array.isArray(e))return hB(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return hB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hB(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yB="event",vB="space",gB="space_group",xB="member_tag",_B="post",jB=["paywall","paywall_price","currency"],wB=(bB(oB={},xF.value,[yB]),bB(oB,TF.value,[yB]),bB(oB,_F.value,[yB]),bB(oB,dB.value,[yB]),bB(oB,jF.value,[yB]),bB(oB,SF.value,[yB]),bB(oB,cB.value,[vB]),bB(oB,uB.value,[vB]),bB(oB,_R.value,[vB]),bB(oB,fB.value,[gB]),bB(oB,mB.value,[gB]),bB(oB,BF.value,[xB]),bB(oB,UF.value,[xB]),bB(oB,eB.value,[_B]),bB(oB,lB.value,[_B]),bB(oB,nB.value,["comment"]),bB(oB,QF.value,jB),bB(oB,KF.value,jB),bB(oB,JF.value,jB),bB(oB,$F.value,jB),bB(oB,WF.value,jB),oB),OB=function(e){var t=e.children,r=(0,ne.yT)();return(0,c.jsxs)(ie.u_,{title:(0,a.t)("settings.workflows.form.preview_message.modal_title"),isOpen:r.visible,onClose:r.hide,contentPortalId:"",children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"lg",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{className:"text-left",children:(0,a.t)("settings.workflows.form.preview_message.modal_title")}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:r.hide})})]}),(0,c.jsxs)(ie.u_.Body,{className:"pt-0",children:[(0,c.jsx)("p",{className:"text-default mb-6 text-sm",children:(0,a.t)("settings.workflows.form.preview_message.modal_description")}),(0,c.jsx)("div",{className:"border-primary mb-6 flex rounded border px-4 py-6",children:t})]})]})]})};function PB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function SB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kB=function(e){var t=function(e){var t=e.communityMemberId,r=e.body,n=e.resourceAttributes,i=(0,f.useQuery)(["workflows-fetch-interpolated-preview-message",t,r,n],(function(){return vn.nH.fetchInterpolatedPreviewMessage({body:{rich_text_body:r,mappings:n}})}),{enabled:!(0,fn.isEmpty)(n)}),o=i.data,a=(o=void 0===o?{}:o).interpolated_body,s=void 0===a?{}:a,l=i.isLoading,c=(0,f.useQuery)(S.av.communityMembers.show({id:t}),{enabled:!!t}),u=c.data;return{isLoadingPreviewMessageBody:l,isLoadingCommunityMember:c.isLoading,interpolatedBody:s,communityMember:u}}({body:e.body,communityMemberId:e.communityMemberId,resourceAttributes:e.resourceAttributes}),r=t.interpolatedBody,n=t.isLoadingCommunityMember,i=t.isLoadingPreviewMessageBody,o=t.communityMember;if(n||i||!o)return(0,c.jsx)(OB,{children:(0,c.jsx)(l.aN,{})});var s=o.name,u=o.avatar_url;return(0,c.jsxs)(OB,{children:[(0,c.jsx)("div",{className:"px-2",children:(0,c.jsx)(Pt.sJ,{size:"10",src:u,name:s})}),Object.keys(r).length>0&&(0,c.jsxs)("div",{className:"max-w-[calc(100%-3rem)] px-2",children:[(0,c.jsxs)("div",{className:"mb-2 flex items-center gap-x-2",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:s}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-light",weight:"medium",children:(0,a.t)("settings.workflows.form.preview_message.placeholder_time")})]}),(0,c.jsx)(bM.T,{value:r,editable:!1})]})]})},CB=ne.uc.create((function(e){return(0,c.jsx)(kB,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PB(Object(r),!0).forEach((function(t){SB(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PB(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),NB=function e(t,r){return Object.values(t||{}).some((function(t){return"object"===typeof t?Array.isArray(t)?t.some(():e(t,r):"string"===typeof t&&r.test(t)}))},TB=function(){var e=(0,pr.Gc)(),t=e.watch,r=e.getValues,n=zU().paramsPath,i=(0,ne.yT)(CB),o=(0,iM.Z)(),a=r("trigger.trigger_type"),s=function(e){var t=e.triggerType,r=e.shouldSupportTriggerVariables,n=["dynamic_variables",t];return(0,f.useQuery)(n,(function(){return(0,Er.UT)(S.av.workflows.fetchDynamicVariables({params:{trigger_type:t,support_trigger_variables:r}}))}))}({triggerType:a,shouldSupportTriggerVariables:o}),l=s.data,c=(l=void 0===l?{}:l).supported_variables,u=void 0===c?[]:c,d=s.isLoading,m=t("".concat(n,".rich_text_body.body")),p=function(e){var t=e.triggerType,r=[].concat(["community_member","community"],pB(wB[t]||"")).filter(Boolean);return(0,f.useQuery)(["workflows-fetch-preview-attributes",t],(function(){return vn.nH.fetchPreviewAttributes({params:{resource_names:r}})}))}({triggerType:a}),h=p.data,b=p.isSuccess,y=NB(m||{},/{{[^{}]+}}/g)&&b;return{paramsPath:n,triggerType:a,dynamicVariables:u,isLoadingDynamicVariables:d,shouldShowPreviewDmButton:y,handlePreviewDmClick:function(){i.show({body:r("".concat(n,".rich_text_body.body")),communityMemberId:r("".concat(n,".from")),resourceAttributes:h})}}},AB=function(){var e=TB(),t=e.paramsPath,r=e.triggerType,n=e.isLoadingDynamicVariables,i=e.dynamicVariables,o=e.shouldShowPreviewDmButton,s=e.handlePreviewDmClick;return n?(0,c.jsx)(l.aN,{}):(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.message_body")}),(0,c.jsx)(mM._,{placeholder:(0,a.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(t,".rich_text_body.body"),submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",menuBarComponent:aR.D,menubarProps:{dynamicVariables:i},type:"workflow"},r),o&&(0,c.jsx)(l.zx,{variant:"circle-plain",type:"button",className:"max-w-fit !px-2",onClick:s,children:(0,a.t)("settings.workflows.form.preview_message.button_label")})]})};function EB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function IB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EB(Object(r),!0).forEach((function(t){DB(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var LB=function(e,t){var r=(0,pr.Gc)(),i=r.getValues,o=r.setValue;(0,n.useEffect)((function(){var r=i(e);((0,fn.isNil)(r)||(0,fn.isEmpty)(r))&&o(e,t)}),[e,o,i,t])},MB=function(e){var t=e.communityMemberId,r=e.withDeleted,n=KL({ids:[t],withDeleted:void 0===r||r,enabled:!!t}),i=n.data,o=(n.isLoading,(0,fn.head)(null===i||void 0===i?void 0:i.records));if(!o)return(0,c.jsx)("span",{className:"text-sm",children:(0,a.t)("deactivated_member")});var s=o.name,l=o.avatar_url;return o.is_deleted?(0,c.jsxs)("span",{className:"break-normal text-sm",children:[(0,a.t)("deactivated_member")," (",s,")"]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"pl-2",children:(0,c.jsx)("div",{className:"float-left",children:(0,c.jsx)(Pt.sJ,{size:"6",src:l,name:s})})}),(0,c.jsx)("span",{className:"break-normal text-sm",children:s})]})},RB="settings.workflows.view",FB={label:(0,a.t)("settings.workflows.form.actions.send_dm"),value:"send_dm",group:(0,a.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-messages",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=zU().paramsPath,t=(0,pr.Gc)().register,r=ri().isBulkAction,n=(0,v.N3)().id,i=r?void 0:"initiator";return LB("".concat(e,".from"),n),LB("".concat(e,".to"),i),(0,c.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,c.jsx)(ce.l.Item,{name:"".concat(e,".from"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,a.t)("settings.workflows.form.from"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,c.jsx)(ce.l.CommunityMemberSelect,{defaultValue:n,name:"".concat(e,".from"),filters:{role:"admin_or_moderator",messaging_enabled:!0}})}),(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",IB({type:"hidden"},t("".concat(e,".to"))))}),(0,c.jsx)(AB,{})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.from,n=t.rich_text_body;return r&&n?(0,c.jsxs)(yM,{children:[(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([RB,"from"])}),(0,c.jsx)("div",{children:(0,c.jsx)(MB,{communityMemberId:r})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([RB,"to"])}),(0,c.jsx)("div",{children:(0,c.jsx)(sR,{icon:(0,c.jsx)(bt.JO,{type:"12-lightning",size:12,className:"!text-default !h-3 !w-3"}),text:(0,a.t)("settings.workflows.view.initiator")})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([RB,"message_body"])}),(0,c.jsx)("div",{className:"text-default text-sm",children:(0,c.jsx)(bM.T,{rich_text_body:n,editable:!1},(0,fn.uniqueId)("tiptap_"))})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=t.executor_member_id,n=t.receiver_member_id,i=t.rich_text_body;return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.send_dm.from")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:r})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.send_dm.to")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:n})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.send_dm.message")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(bM.T,{editable:!1,rich_text_body:i,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"chat"},BB={label:(0,a.t)("settings.workflows.form.actions.remove_community_member_from_community"),value:"remove_community_member_from_community",group:(0,a.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-workflow-user-remove-outline",size:16,className:"!h-4 !w-4"}),formComponent:function(){return null},viewComponent:function(){return null},historyDetailViewComponent:function(e){var t=e.url,r=new URL(t).pathname.split("/").pop();return(0,c.jsx)("div",{className:"flex flex-col gap-2",children:(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:r})})]})})},icon:"user-remove"},UB="settings.workflows.view",zB={label:(0,a.t)("settings.workflows.form.actions.send_notification_to_member"),value:"send_notification_to_member",group:(0,a.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-mobile",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=zU().paramsPath,t=(0,v.wh)().currentCommunity.root_url,r=(0,pr.Gc)(),i=r.getValues,o=r.setValue,s=i("".concat(e,".path"));(0,n.useEffect)((function(){if(s)if(s.match(/^\//)){var t=s.replace(/^\//,"");o("".concat(e,".path"),t)}else{var r=s.split("://");if(!(r.length<=1)){var n=r[1].split("/");if(n.length<=1)o("".concat(e,".path"),"");else{var i=n.slice(1).join("/");o("".concat(e,".path"),i)}}}}),[s]);var l="".concat(t,"/");return(0,c.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,c.jsx)(ce.l.Item,{name:"".concat(e,".path"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,a.t)("settings.workflows.form.path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,a.t)("settings.workflows.form.path.placeholder"),rules:{pattern:{value:pM.i4,message:(0,a.t)("settings.workflows.form.path.error")}},children:(0,c.jsx)(ce.l.Input,{prefix:(0,c.jsx)("div",{className:"whitespace-nowrap pl-4 pr-2",children:(0,c.jsx)(y.Z.LabelMd,{children:l})})})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.message_body")}),(0,c.jsx)(mM._,{placeholder:(0,a.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(e,".message.body"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",maxLength:150,type:"workflow"})]})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.path,n=t.message,i=(0,v.wh)().currentCommunity.root_url;return n?(0,c.jsxs)(yM,{children:[r&&(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([UB,"path"])}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{children:"https://".concat(i,"/").concat(r)})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([UB,"message_body"])}),(0,c.jsx)("div",{className:"text-default text-sm",children:(0,c.jsx)(bM.T,{rich_text_body:n,editable:!1},(0,fn.uniqueId)("tiptap_"))})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=t.path,n=t.message,i=(0,v.wh)().currentCommunity.root_url;return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.send_notification_to_member.path")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(l.ZT.LabelSm,{children:"https://".concat(i,"/").concat(r)})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.send_notification_to_member.message")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(bM.T,{editable:!1,rich_text_body:n,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"notification"},VB="settings.workflows.form",ZB=function(e){var t=e.id,r=(0,zF.a)(t),n=r.data,i=void 0===n?{}:n;return r.isLoading?(0,c.jsx)(sR,{isLoading:!0}):EF()(i)?(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)("settings.workflows.view.deleted_paywall")}):(0,c.jsx)(l.ZT.LabelSm,{children:i.name||i.display_name})},HB={label:(0,a.t)("settings.workflows.form.actions.cancel_community_member_paywall_subscription"),value:"cancel_community_member_paywall_subscription",group:(0,a.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-remove-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=zU().paramsPath,t=(0,wr.g)(),r=t.activePaywalls,n=t.isLoading,i=t.isSuccess,o=r.map((function(e){var t=e.id,r=e.name,n=e.display_name;return{value:t,label:r||n}}));return n?(0,c.jsx)(l.aN,{center:!0}):i?(0,c.jsx)(oM.N,{name:"".concat(e,".paywall_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([VB,"select_paywall"])}),options:o,rules:{required:(0,a.t)([VB,"errors.required"])},emptyMessage:(0,a.t)([VB,"errors.paywalls.not_found"])}):(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([VB,"paywalls.fetch_failed"])})})},viewComponent:function(e){var t=((e.action||{}).api_params||{}).paywall_id,r=(0,zF.a)(t),n=r.data,i=void 0===n?{}:n,o=r.isLoading;return i||o?(0,c.jsx)(yM,{children:(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)(["settings.workflows.view","resources.paywall"])}),(0,c.jsx)("div",{children:o?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:i.name||i.display_name})})]})}):null},historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,n=t.community_member_id,i=r.paywall_id;return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.paywall")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(ZB,{id:i})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:n})})]})]})}},qB="settings.workflows.form",GB=function(){var e=zU().paramsPath;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([qB,"notify_member"])}),(0,c.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,c.jsx)(ce.l.ToggleSwitch,{name:"".concat(e,".send_notification_subscription_created_by_admin"),variant:"small"}),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("span",{children:(0,a.t)([qB,"send_notification_subscription_created_by_admin"])})})]})]})},WB=r(9242),QB="settings.workflows.form",KB=function(e){var t=e.paywallPrices,r=zU().paramsPath,n=(0,WB.PI)(t).map((function(e){return{value:e.id,label:e.display_name}}));return(0,c.jsx)(oM.N,{name:"".concat(r,".paywall_price_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([QB,"select_paywall_price"])}),options:n,hidePlaceholder:!0,rules:{required:(0,a.t)([QB,"errors.required"])},emptyMessage:(0,a.t)([QB,"errors.paywalls.not_found"])})},JB=r(28028),$B="settings.workflows.form",YB=function(e){var t=e.disabled,r=e.name,n={pattern:{value:/^[0-9]+$/,message:(0,a.t)("create_paywall_subscription_modal.warning.only_number_are_allowed")},required:(0,a.t)("create_paywall_subscription_modal.warning.only_number_are_allowed"),min:{value:JB.dy,message:(0,a.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:JB.ut,message:(0,a.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}};return(0,c.jsx)(l.l0.Item,{name:r,hideDescription:!0,label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([$B,"trial_days"])}),hideBorder:!0,isFirstChild:!0,hiddenField:!0,className:"flex flex-1 flex-col gap-1",errorClassName:"text-red-500 text-xs",rules:n,placeholder:(0,a.t)([$B,"trial_days_placeholder"]),children:(0,c.jsx)(l.l0.Input,{name:"trial_days",inputMode:"numeric",suffix:(0,a.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:t})})};function XB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tU="settings.workflows.form",rU=function(e){var t=e.paywallId,r=e.priceId,n=(0,f.useQuery)(S.av.workflows.paywallPrices.show({paywallId:t,id:r})),i=n.data;return{paywallPrice:void 0===i?{}:i,isLoading:n.isLoading,isSuccess:n.isSuccess}},nU=function(e){var t=e.paywallId,r=e.paywallPriceId,n=rU({paywallId:t,priceId:r}),i=n.paywallPrice,o=void 0===i?{}:i;return n.isLoading?(0,c.jsx)(sR,{isLoading:!0}):EF()(o)?(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)("settings.workflows.view.deleted_paywall_price")}):(0,c.jsxs)(l.ZT.LabelSm,{children:[o.paywall_name," - ",o.display_name]})},iU="settings.workflows.view",oU=function(e){return e?(0,a.t)("yes"):(0,a.t)("no")},aU={label:(0,a.t)("settings.workflows.form.actions.subscribe_community_member_to_paywall_trial"),value:"subscribe_community_member_to_paywall_trial",group:(0,a.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=zU().paramsPath,t=(0,wr.g)(),r=t.isLoading,n=t.isSuccess,i=t.activePaywalls,o=(0,(0,pr.Gc)().watch)("".concat(e,".paywall_id")),s=[],u={};return(0,Hi.Jy)(i).forEach((function(e){s.push({value:e.id,label:e.name||e.display_name}),u[e.id]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XB(Object(r),!0).forEach((function(t){eU(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XB(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)})),r?(0,c.jsx)(l.aN,{center:!0}):n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(oM.N,{name:"".concat(e,".paywall_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([tU,"select_paywall"])}),options:s,rules:{required:(0,a.t)([tU,"errors.required"])},emptyMessage:(0,a.t)([tU,"errors.paywalls.not_found"])}),o&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,c.jsx)(KB,{paywallPrices:u[o].prices}),(0,c.jsx)(YB,{name:"".concat(e,".trial_days"),disabled:r})]}),(0,c.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,c.jsx)(GB,{})})]})]}):(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([tU,"errors.paywall_prices.fetch_failed"])})})},viewComponent:function(e){var t=(e.action||{}).api_params,r=(t=void 0===t?{}:t).paywall_price_id,n=t.paywall_id,i=t.trial_days,o=t.send_notification_subscription_created_by_admin,s=rU({paywallId:n,priceId:r}),u=s.paywallPrice,d=s.isLoading;return u||d?(0,c.jsxs)(yM,{children:[(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([iU,"resources.paywall"])}),(0,c.jsx)("div",{children:d?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:EF()(u)?(0,a.t)("settings.workflows.view.deleted_paywall"):u.paywall_name||u.paywall_display_name})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([iU,"resources.paywall_price"])}),(0,c.jsx)("div",{children:d?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:EF()(u)?(0,a.t)("settings.workflows.view.deleted_paywall_price"):u.display_name})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([iU,"trial_days"])}),(0,c.jsx)("div",{children:d?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:i})})]}),(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([iU,"send_notification_subscription_created_by_admin"])}),(0,c.jsx)("div",{children:d?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:oU(o)})})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,n=void 0===r?{}:r,i=t.community_member_id,o=t.trial_days,s=n.paywall_id,u=n.paywall_price_id;return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.paywall_price")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(nU,{paywallId:s,paywallPriceId:u})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:i})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.trial_days")})}),(0,c.jsx)("div",{className:"w-3/4",children:o})]})]})}},sU=function e(t){return(0,fn.isObject)(t)?!(0,fn.isEmpty)(t)&&Object.values(t).every((function(t){return e(t)})):Boolean(t)},lU=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.action_type,i=void 0===n?"":n,o=r.api_params,a=void 0===o?{}:o;return i===FB.value?cU(a):i===BB.value||(i===zB.value?uU(null===a||void 0===a||null===(e=a.message)||void 0===e||null===(t=e.body)||void 0===t?void 0:t.content):sU(i===gM.value?null===a||void 0===a?void 0:a.url:i===aU.value?(0,fn.omit)(a,"send_notification_subscription_created_by_admin"):a))},cU=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!(0,fn.isNumber)(null===r||void 0===r?void 0:r.from)||(0,fn.isEmpty)(null===r||void 0===r?void 0:r.rich_text_body))&&uU(null===r||void 0===r||null===(e=r.rich_text_body)||void 0===e||null===(t=e.body)||void 0===t?void 0:t.content)},uU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(0,fn.isEmpty)(e)&&e.some((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t,n=e.content,i=void 0===n?[]:n,o=e.text,a=void 0===o?"":o;return"text"===r?!(0,fn.isEmpty)(a):"paragraph"===r?i.some((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text,t=void 0===e?"":e;return!(0,fn.isEmpty)(t)})):void 0}))};function dU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(r),!0).forEach((function(t){mU(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bU=function e(t){return Object.entries(t).reduce((function(t,r){var n=pU(r,2),i=n[0],o=n[1];if((0,fn.isNil)(o))return t;if((0,fn.isObjectLike)(o)&&(0,fn.isEmpty)(o))return t;if((0,fn.isString)(o)&&(0,fn.isEmpty)(o))return t;if(Array.isArray(o))return(0,fn.isEmpty)(o)?t:fU(fU({},t),{},mU({},i,o));if((0,fn.isObject)(o)){var a=e(o);return(0,fn.isEmpty)(a)?t:fU(fU({},t),{},mU({},i,a))}return fU(fU({},t),{},mU({},i,o))}),{})},yU=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).filter_rules,t=bU(void 0===e?{}:e);return!(0,fn.isEmpty)(t)},vU=function e(t){return(0,fn.isObject)(t)?Object.values(t).some((function(t){return e(t)})):Boolean(t)},gU=function(e){var t=(0,pr.Gc)(),r=t.getFieldState,n=t.formState,i=(0,t.watch)(e),o=r(e,n).error,a=n.dirtyFields,s=n.touchedFields,l=(0,fn.get)(a,e,null),c=vU(l),u=(0,fn.get)(s,e,null),d=vU(u),f=Boolean(null===i||void 0===i?void 0:i.id),m=Boolean(o),p=function(e,t){return e.startsWith("actions")?lU(t):e.startsWith("audience")?yU(t):sU(t)}(e,i);return{isDirty:c,isTouched:d,hasError:m,hasValue:p,hasId:f,value:i}},xU=function(e){var t=(0,pr.Gc)().trigger,r=gU(e),n=r.isDirty,i=r.isTouched,o=r.hasError,s=r.hasValue,l=r.hasId,c=r.value,u=l&&s&&!n&&!i&&!o;return{hasError:o,hasValue:s,isCompleted:u,revalidate:function(){return t(e)},statusMessage:o?(0,a.t)("settings.workflows.form.step_incomplete"):u?(0,a.t)("settings.workflows.form.step_complete"):"",wasSaved:l,value:c}},_U=r(30586),jU="settings.workflows.form",wU=function(e){var t=e.hasError;return(0,c.jsx)("span",{className:"flex items-center",children:t?(0,c.jsx)(bt.JO,{type:"20-alert",size:20,className:"!text-v2-danger","aria-label":(0,a.t)([jU,"step_incomplete"])}):(0,c.jsx)(bt.JO,{type:"20-checkmark-circle-fill-thin",size:20,"aria-label":(0,a.t)([jU,"step_complete"])})})},OU=function(e){var t=e.hasError,r=void 0!==t&&t,n=e.hasSuccess,i=void 0!==n&&n,o=e.statusMessage;return r||i?o?(0,c.jsx)(sO.T,{content:o,className:"cursor-pointer",children:(0,c.jsx)(wU,{hasError:r})}):(0,c.jsx)(wU,{hasError:r}):null},PU=function(e){var t=e.hasSuccess,r=e.hasError,n=e.statusMessage,i=e.actions;return(0,c.jsxs)("div",{className:"flex items-center gap-5 px-8 py-6",children:[(0,c.jsx)(OU,{hasSuccess:t,hasError:r,statusMessage:n}),i&&(0,c.jsx)(Da.Lt,{buttonWrapperClassName:"flex",linkType:"button",button:(0,c.jsx)(Da.Lt.MenuButton,{className:"hover:bg-tertiary rounded !p-0.5 transition-colors",children:(0,c.jsx)("span",{className:"flex items-center",children:(0,c.jsx)(bt.JO,{type:"20-menu-dots-horizontal",size:20,className:"text-default"})})}),options:i})]})},SU=function(e){var t=e.title,r=e.description;return(0,c.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:r})}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:t})})]})},kU=["title","description","actions","hasSuccess","hasError","statusMessage","children"];function CU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function NU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CU(Object(r),!0).forEach((function(t){TU(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function TU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AU(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var EU=function(e){var t=e.title,r=e.description,n=e.actions,i=e.hasSuccess,o=e.hasError,a=e.statusMessage,s=e.children,l=AU(e,kU);return(0,c.jsxs)(_U.h.Item,NU(NU({},l),{},{children:[(0,c.jsxs)(_U.h.Content,{children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)(_U.h.Button,{children:(0,c.jsx)(SU,{title:t,description:r})}),(0,c.jsx)(PU,{actions:n,hasSuccess:i,hasError:o,statusMessage:a})]}),(0,c.jsx)(_U.h.Panel,{children:s})]}),(0,c.jsx)(_U.h.Connector,{})]}))},IU=function(e){var t=e.items,r=void 0===t?[]:t,n=e.children;return(0,c.jsx)(_U.h,{items:r,children:n})},DU=["id","children","onAddClick","onDeleteClick","hasBottomConnection","actionType"];function LU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LU(Object(r),!0).forEach((function(t){RU(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FU(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var BU=function(e){var t=e.id,r=e.children,n=e.onAddClick,i=e.onDeleteClick,o=e.hasBottomConnection,s=void 0===o||o,l=e.actionType,u=FU(e,DU),d=(0,a.t)(["settings.workflows.view.actions",l,"title"],{defaultValue:(0,a.t)("settings.workflows.form.add_an_action")});return(0,c.jsx)(EU,MU(MU({id:t,title:d,description:(0,a.t)("settings.workflows.action"),onAddNewConnection:n,hasBottomConnection:s,className:"m-auto",actions:[{label:(0,a.t)("settings.workflows.delete_step"),onClick:i}]},u),{},{children:r}))},UU=(0,n.createContext)(null);UU.displayName="CurrentActionContext";var zU=function(){var e=(0,n.useContext)(UU);if(!e)throw new Error("useCurrentAction must be used within a Action");return e},VU=function(e){var t=e.action,r=e.index,n=e.children,i="actions.".concat(r),o="".concat(i,".api_params"),a=Boolean(null===t||void 0===t?void 0:t.id);return(0,c.jsx)(UU.Provider,{value:{action:t,index:r,isSaved:a,paramsPath:o,path:i},children:n})};function ZU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return HU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qU=function(e){var t=e.index,r=void 0===t?0:t,i="actions.".concat(r,".action_type"),o="actions.".concat(r,".api_params"),s=(0,pr.Gc)(),u=s.watch,d=s.setValue,f=s.clearErrors,m=s.resetField,p=ZU((0,n.useState)(!1),2),h=p[0],b=p[1],y=(0,n.useMemo)((function(){return Bz.reduce((function(e,t){var r=t.value,n=t.formComponent;return e.set(r,n),e}),new Map)}),[]),g=u(i),x=y.get(g),_=Uz().eligibleActions,j=(0,xu.w)(),w=(0,v.wh)().currentCommunity,O=(void 0===w?{}:w).current_plan_tier;(0,n.useEffect)((function(){var e=Bz.find((function(e){return e.value===g}));e&&k(e,O)&&S(g,e),b(!0)}),[g,O]);var P=S=function(e,t){"string"!==typeof t.label&&(t.label=(0,a.t)("settings.workflows.form.actions.".concat(e)))},k=function(e,t){return!e.eligiblePlanTiers||e.eligiblePlanTiers.includes(t)};return(0,c.jsxs)("div",{className:"mb-9 flex flex-col gap-9",children:[h&&(0,c.jsx)(oM.N,{name:i,groupBy:function(e){return e.group},label:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.form.choose_an_action")}),labelClassName:"!mb-2 !text-sm",rules:{required:(0,a.t)("settings.workflows.form.errors.required")},options:_,onChange:function(e){f(i),f(o),d(o,{});var t=Bz.find((function(t){return t.value===e}));if(k(t,O))S(e,t);else{var r=t.eligiblePlanTiers[0];j.show({planTier:r,subheading:(0,a.t)("settings.workflows.view.actions.".concat(e,".plan_upgrade.subheader"),{planName:P(r)}),onSuccess:function(){j.hide()},successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.done"),usedForWorkflows:!0,showPlanDetails:!0}),(0,fn.delay)((function(){m(i)}))}}}),x&&(0,c.jsx)(x,{})]})},GU=r(6202);function WU(e){return function(e){if(Array.isArray(e))return QU(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return QU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QU(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var KU={id:"0"};function JU(e){return function(e){if(Array.isArray(e))return tz(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ez(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $U(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function YU(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){$U(o,n,i,a,s,"next",e)}function s(e){$U(o,n,i,a,s,"throw",e)}a(void 0)}))}}function XU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||ez(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ez(e,t){if(e){if("string"===typeof e)return tz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tz(e,t):void 0}}function tz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rz="actions",nz=function(){var e=XU((0,n.useState)(!0),2),t=e[0],r=e[1],i=(0,GU.d)(),o=i.onCloseItemAndOpenNext,a=i.setActiveItemId,s=(0,l.pm)(),c=(0,pr.Gc)(),u=c.watch,d=c.setError,f=c.trigger,m=c.setValue,p=c.resetField,h=c.formState,b=function(){var e=(0,(0,pr.Gc)().watch)(rz,[]).map((function(e,t){return{id:(null===e||void 0===e?void 0:e.id)||t+1}}));return{itemsIds:[KU].concat(WU(e)),actionsIds:e}}(),y=b.actionsIds,v=b.itemsIds,g=h.dirtyFields,x=h.touchedFields,_=h.defaultValues,j=u(rz,[]),w=j.length>0,O=(0,pr.Dq)({name:rz}),P=O.remove,S=O.replace,k=u("id"),C=Ei({workflowId:k}).refetch;(0,n.useEffect)((function(){t&&!w&&(r(!1),S(null===_||void 0===_?void 0:_.actions))}),[null===_||void 0===_?void 0:_.actions,w,t,S]);var N=yi().mutateAsync,T=Ri(),A=T.mutateAsync,E=T.isLoading,I=T.isError,D=function(){var e=arguments.length>1?arguments[1]:void 0,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(();S(t),p(rz,{defaultValue:t}),nn()(e)?e():o(),C()},L=function(e){var t,r;((null===e||void 0===e||null===(t=e.body)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.actions)||[]).forEach((function(e,t){for(var r in e)d("".concat(rz,"[").concat(t,"].").concat(r),{type:"server",message:e[r]})})),s.error(e.message)},M=zi({onSuccess:D,onError:L}),R=M.mutateAsync,F=M.isLoading,B=M.isError,U=function(){var e=YU(se().mark((function e(){var t,r,n,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=NL(),r=u(rz,[]),n=[t].concat(JU(r)),e.prev=3,e.next=6,R(n);case 6:i=e.sent,D(i,(function(){var e,t=null===(e=i[0])||void 0===e?void 0:e.id;a(t)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),L(e.t0),P(0);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=YU(se().mark((function e(t){var r,n,i,o;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=NL(),n=u(rz,[]),i=[].concat(JU(n.slice(0,t+1)),[r],JU(n.slice(t+1))),e.prev=3,e.next=6,R(i);case 6:o=e.sent,D(o,(function(){var e,r=null===(e=o[t+1])||void 0===e?void 0:e.id;a(r)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),L(e.t0),P(t+1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=YU(se().mark((function e(t){var r,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=u(rz,[]),n=r[t],(0,fn.isString)(null===n||void 0===n?void 0:n.id)&&!n.id.startsWith("action")){e.next=7;break}return P(t),e.abrupt("return");case 7:return e.next=9,N(n.id);case 9:P(t),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),s.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),Z=j.some((function(e,t){var r="".concat(rz,"[").concat(t,"]"),n=(0,fn.get)(g,r,null);return vU(n)})),H=j.some((function(e,t){var r="".concat(rz,"[").concat(t,"]"),n=(0,fn.get)(x,r,null);return vU(n)})),q=j.every((function(e){return lU(e)})),G=j.every((function(e){return(0,fn.isString)(null===e||void 0===e?void 0:e.id)&&!e.id.startsWith("action")})),W=q&&!Z&&G,Q=function(){var e=YU(se().mark((function e(){var t,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(rz);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,t=u(rz)||[],e.next=9,R(t);case 9:r=e.sent,D(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),L(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=YU(se().mark((function e(t){var r,n,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.action,e.prev=1,e.next=4,A(n);case 4:i=e.sent,m(r,i),p(r,{defaultValue:i}),o(),C(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),s.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return{actionsIds:y,addActionAfterPosition:z,addActionAtStart:U,formActions:j,hasActions:w,isActionError:I,isActionsError:B,isSavingActions:F,isUpdatingAction:E,itemsIds:v,removeActionAtPosition:V,saveAction:K,saveActions:Q,areAllActionsFilled:q,areSomeActionsDirty:Z,areSomeActionsTouched:H,areAllActionsWithServerIds:G,areAllActionsSaved:W}};function iz(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function oz(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){iz(o,n,i,a,s,"next",e)}function s(e){iz(o,n,i,a,s,"throw",e)}a(void 0)}))}}var az=function(e){var t,r=e.hasBottomConnection,n=void 0===r||r,i=e.onAddClick,o=e.onDeleteClick,s=nz(),l=s.saveAction,u=s.isUpdatingAction,d=zU(),f=d.index,m=d.action,p=d.path,h=xU(p),b=h.isCompleted,y=h.hasError,v=h.statusMessage,g=h.revalidate,x=h.hasValue,_=null===m||void 0===m?void 0:m.action_type,j=u?(0,a.t)("settings.workflows.form.saving"):x?(0,a.t)("settings.workflows.form.continue"):(0,a.t)("settings.workflows.form.fill_all_fields_to_continue"),w=(0,(0,pr.Gc)().getValues)("trigger.trigger_type"),O={webhook_test:{url:null===m||void 0===m||null===(t=m.api_params)||void 0===t?void 0:t.url,trigger_type:w}},P=fM(m,g),S=P.isTestingWebhook,k=P.isWebhookTestSuccessful,C=P.isWebhookTested,N=P.isWebhookUrlChanged,T=P.testWebhookResult,A=P.handleTestWebhook;return(0,c.jsxs)(BU,{id:(null===m||void 0===m?void 0:m.id)||f+1,actionType:_,hasBottomConnection:n,onAddClick:function(){i(f)},onDeleteClick:function(){o(f)},hasError:y,hasSuccess:b,statusMessage:v,children:[(0,c.jsx)(qU,{index:f}),C&&T&&(0,c.jsx)(XM,{isWebhookTestSuccessful:k,webhookTestResult:T}),_!==gM.value||k&&!N?(0,c.jsx)(oR,{disabled:u||!x,onClick:oz(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:l({path:p,action:m});case 6:case"end":return e.stop()}}),e)}))),children:j}):(0,c.jsx)(xM,{handleTestWebhook:function(){return A(O)},isDisabled:u||!x||S||!w||""===w,isTestingWebhook:S,isWebhookTestSuccessful:k,isWebhookUrlChanged:N,isWebhookTested:C,triggerType:w})]},m.id)},sz=function(){var e=nz(),t=e.formActions,r=e.addActionAfterPosition,n=e.removeActionAtPosition;return(0,c.jsx)(c.Fragment,{children:t.map((function(e,i){return(0,c.jsx)(VU,{action:e,index:i,children:(0,c.jsx)(az,{onAddClick:r,onDeleteClick:n,hasBottomConnection:i!==t.length-1})},e.id)}))})},lz="settings.workflows.form",cz=function(e){var t=e.id,r=Ni({eventId:t}),n=r.data;return r.isLoading?(0,c.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,c.jsx)("span",{children:n.name})},uz={label:(0,a.t)("settings.workflows.form.actions.rsvp_member_to_event"),value:"rsvp_member_to_event",group:(0,a.t)("settings.workflows.form.action_groups.events"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-calendar-join-date",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=zU().paramsPath,t=Si({per_page:100}),r=t.data,n=t.isLoading,i=t.isError,o=(r||{}).records,s=(void 0===o?[]:o).map((function(e){return{label:e.recurring?"".concat(e.name," ").concat((0,a.t)([lz,"recurring_label"])):e.name,value:e.id,description:"".concat(e.space_name," \u2022 ").concat(e.start_date)}}));return n?(0,c.jsx)(l.aN,{center:!0}):i?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([lz,"errors.upcoming_events.fetch_failed"])})}):(0,c.jsx)(oM.N,{name:"".concat(e,".event_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([lz,"which_event"])}),options:s,rules:{required:(0,a.t)([lz,"errors.required"])},emptyMessage:(0,a.t)([lz,"errors.upcoming_events.not_found"])})},viewComponent:function(e){var t=((e.action||{}).api_params||{}).event_id,r=Ni({eventId:t}),n=r.data,i=r.isLoading;return n||i?(0,c.jsx)(yM,{children:(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)(["settings.workflows.view","event"])}),(0,c.jsx)("div",{children:i?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:n.name})})]})}):null},historyDetailViewComponent:function(e){var t=e.body,r=t.event_id,n=t.community_member_id;return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.event")})}),(0,c.jsx)(cz,{id:r})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:n})})]})]})},icon:"event"},dz="settings.workflows.form",fz=function(){var e=zU().paramsPath,t=Ii(),r=t.memberTags,n=void 0===r?[]:r,i=t.isLoading,o=t.isError,s=n.map((function(e){return{value:e.id,label:e.name}}));return i?(0,c.jsx)(l.aN,{center:!0}):o?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([dz,"member_tags.fetch_failed"])})}):(0,c.jsx)(oM.N,{name:"".concat(e,".member_tag_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([dz,"select_tag"])}),options:s,rules:{required:(0,a.t)([dz,"errors.required"])},emptyMessage:(0,a.t)([dz,"errors.member_tags.not_found"])})},mz=function(e){var t=e.memberTagId,r=ji({id:t}),n=r.data;return r.isLoading?(0,c.jsx)(sR,{isLoading:!0}):EF()(n)?(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)("settings.workflows.view.deleted_member_tag")}):(0,c.jsx)(l.ZT.LabelSm,{children:n.name})},pz=function(e){var t=e.body,r=t.member_tag_id,n=t.community_member_id;return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.tag")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(mz,{memberTagId:r})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:n})})]})]})},hz="settings.workflows.view",bz=function(e){var t=((e.action||{}).api_params||{}).member_tag_id,r=ji({id:t}),n=r.data,i=void 0===n?{}:n,o=r.isLoading;if(!i)return null;var s=EF()(i)?(0,a.t)([hz,"deleted_member_tag"]):i.name;return(0,c.jsx)(yM,{children:(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)([hz,"member_tag"])}),(0,c.jsx)("div",{children:o?(0,c.jsx)(sR,{isLoading:!0}):i&&(0,c.jsx)(sR,{text:s})})]})})},yz={label:(0,a.t)("settings.workflows.form.actions.add_tag"),value:"add_tag_to_community_member",group:(0,a.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-tag",size:16,className:"!h-4 !w-4"}),formComponent:fz,viewComponent:bz,historyDetailViewComponent:pz,icon:"tag"},vz={label:(0,a.t)("settings.workflows.form.actions.remove_tag"),value:"remove_tag_from_community_member",group:(0,a.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-remove-tags",size:16,className:"!h-4 !w-4"}),formComponent:fz,viewComponent:bz,historyDetailViewComponent:pz,icon:"tag"},gz="settings.workflows.form",xz=function(){var e=zU().paramsPath,t=hR(),r=t.data,n=t.isLoading,i=t.isError,o=(r||{}).records,s=(void 0===o?[]:o).map((function(e){return{value:e.id,label:e.name}}));return n?(0,c.jsx)(l.aN,{center:!0}):i?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([gz,"spaces.fetch_failed"])})}):(0,c.jsx)(oM.N,{name:"".concat(e,".space_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([gz,"select_space"])}),options:s,rules:{required:(0,a.t)([gz,"errors.required"])},emptyMessage:(0,a.t)([gz,"errors.spaces.not_found"])})};function _z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wz=function(e){var t=e.id,r=e.options,n=void 0===r?{}:r;return(0,f.useQuery)(["space",t],(function(){return(0,Er.UT)(S.av.spaces.show({id:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_z(Object(r),!0).forEach((function(t){jz(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!t},n))},Oz=function(e){var t=e.id,r=wz({id:t}),n=r.data;return r.isLoading?(0,c.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,c.jsxs)("div",{className:"post__space",children:[(0,jk.xt)(n)&&(0,c.jsx)("span",{children:n.emoji}),(0,c.jsx)("span",{children:n.name})]})},Pz=function(e){var t=e.body,r=e.url,n=t.executor_member_id,i=new URL(r).pathname.split("/")[5];return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.space")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(Oz,{id:i})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:n})})]})]})},Sz=function(e){var t=((e.action||{}).api_params||{}).space_id,r=(0,v.T4)({spaceId:t}),n=r.data,i=r.isLoading;return n||i?(0,c.jsx)(yM,{children:(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)(["settings.workflows.view","space"])}),(0,c.jsx)("div",{children:i?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:n.name})})]})}):null},kz={label:(0,a.t)("settings.workflows.form.actions.add_community_member_to_space"),value:"add_community_member_to_space",group:(0,a.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:xz,viewComponent:Sz,historyDetailViewComponent:Pz,icon:"user"},Cz={label:(0,a.t)("settings.workflows.form.actions.remove_community_member_from_space"),value:"remove_community_member_from_space",group:(0,a.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-space-directory-remove",size:16,className:"!h-4 !w-4"}),formComponent:xz,viewComponent:Sz,historyDetailViewComponent:Pz,icon:"user-remove"},Nz="settings.workflows.form",Tz=function(){var e=zU().paramsPath,t=(0,v.e2)(),r=t.records,n=t.isLoading,i=t.isError,o=r.map((function(e){return{value:e.id,label:e.name}}));return n?(0,c.jsx)(l.aN,{center:!0}):i?(0,c.jsx)(y.Z.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)([Nz,"space_groups.fetch_failed"])})}):(0,c.jsx)(oM.N,{name:"".concat(e,".space_group_id"),label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([Nz,"select_space_group"])}),options:o,rules:{required:(0,a.t)([Nz,"errors.required"])},emptyMessage:(0,a.t)([Nz,"errors.space_groups.not_found"])})};function Az(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ez(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Iz=function(e){var t=e.id,r=e.options,n=void 0===r?{}:r;return(0,f.useQuery)(["space-group",t],(function(){return(0,Er.UT)(S.av.spaceGroups.show({id:t}))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Az(Object(r),!0).forEach((function(t){Ez(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:!!t},n))},Dz=function(e){var t=e.id,r=Iz({id:t}),n=r.data;return r.isLoading?(0,c.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,c.jsx)("span",{children:n.name})},Lz=function(e){var t=e.body,r=e.url,n=t.executor_member_id,i=new URL(r).pathname.split("/")[5];return(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.space_group")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(Dz,{id:i})})]}),(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.action_messages.member")})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:n})})]})]})},Mz=function(e){var t=((e.action||{}).api_params||{}).space_group_id,r=(0,v.p7)(t),n=r.data,i=void 0===n?{}:n,o=r.isLoading;return i||o?(0,c.jsx)(yM,{children:(0,c.jsxs)(yM.Section,{children:[(0,c.jsx)(yM.Title,{children:(0,a.t)(["settings.workflows.view","space_group"])}),(0,c.jsx)("div",{children:o?(0,c.jsx)(sR,{isLoading:!0}):(0,c.jsx)(l.ZT.LabelSm,{children:i.name})})]})}):null},Rz={label:(0,a.t)("settings.workflows.form.actions.add_community_member_to_space_group"),value:"add_community_member_to_space_group",group:(0,a.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-folder",size:16,className:"!h-4 !w-4"}),formComponent:Tz,viewComponent:Mz,historyDetailViewComponent:Lz,icon:"user"},Fz={label:(0,a.t)("settings.workflows.form.actions.remove_community_member_from_space_group"),value:"remove_community_member_from_space_group",group:(0,a.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,c.jsx)(bt.JO,{type:"16-folder-remove",size:16,className:"!h-4 !w-4"}),formComponent:Tz,viewComponent:Mz,historyDetailViewComponent:Lz,icon:"user-remove"},Bz=[FB,yz,vz,BB,kz,Cz,Rz,Fz,gM,HB,aU,uz,zB],Uz=function(){var e=(0,iM.Z)(),t=ri().type,r=e?Bz:Bz.filter((function(e){return!1!==e.released}));return{eligibleActions:r=r.filter(()}},zz=Bz.reduce((function(e,t){return e.set(t.value,t.icon),e}),new Map),Vz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return zz.get(e)||t},Zz="settings.workflows",Hz={md:16,lg:24},qz=function(e){var t=e.actions,r=void 0===t?[]:t,i=e.size,o=void 0===i?"lg":i,s=e.truncationLimit,u=void 0===s?2:s,d=e.className,f=function(e){var t=e.actions,r=e.truncationLimit,i="".concat((0,a.t)([Zz,"action"]),": "),o=(0,n.useMemo)((function(){return t.filter(().map((function(e){var t=Vz(e);return{title:"".concat(i).concat((0,a.t)([Zz,"action_types",e],{defaultValue:(0,a.t)([Zz,"action_types","unknown"])})),icon:t}}))}),[t,i]),s=(0,n.useMemo)((function(){return t.slice(r).map((function(e){return"".concat(i).concat((0,a.t)([Zz,"action_types",e],{defaultValue:(0,a.t)([Zz,"action_types","unknown"])}))})).join(", ")}),[t,r,i]),l=t.length-r;return{actions:l>1?o.slice(0,r):o,remainingActionsCount:l,remainingItemsTooltip:s}}({actions:r,truncationLimit:u}),m=f.actions,p=f.remainingActionsCount,h=f.remainingItemsTooltip,b=Hz[o]||Hz.lg;if(0===r.length||u<1){return(0,c.jsx)("div",{className:"py-[25px] leading-none",children:"\u2500"})}var y="+".concat(p);return(0,c.jsxs)("div",{className:J()("flex items-center",{"gap-1":"md"===o,"gap-2":"lg"===o},d),children:[m.map((function(e,t){var r=e.title,n=e.icon;return(0,c.jsx)(nM,{tooltipContent:r,size:o,children:(0,c.jsx)(bt.JO,{type:"".concat(b,"-workflow-").concat(n),size:b,useWithFillCurrentColor:!0,className:J()({"!w-4":"md"===o,"!w-6":"lg"===o})})},"".concat(n,"-").concat(t))})),p>1&&(0,c.jsx)(nM,{tooltipContent:h,size:o,children:(0,c.jsx)("div",{className:"flex items-center",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,c.jsx)("span",{className:J()("text-default flex",{"text-xxs":"md"===o}),children:y})})})})]})},Gz=function(e){var t=e.className,r=e.children,n=(0,Mo.k)().shouldShowTrialBanner;return(0,c.jsx)("div",{className:J()("overflow-auto",t,{"lg:max-h-[calc(100vh-13rem)]":!n,"lg:max-h-[calc(100vh-16rem)]":n}),children:r})},Wz=r(67642);function Qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qz(Object(r),!0).forEach((function(t){Jz(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $z="alphabetical",Yz="latest",Xz=function(e){var t=e.workflowType,r=e.status,i=(0,To.Xt)().queryParams,o=(0,No.v)(),a=o.setPage,s=o.initialPage,l=DN()(i,"query",""),c=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.query,a=void 0===o?"":o,s=i.sort,l=void 0===s?$z:s,c=i.filters,u=void 0===c?{}:c,d=i.perPage,m=void 0===d?20:d,p=i.status,h=i.workflowType,b=i.initialPage,y=void 0===b?1:b,v=i.options,g=["all-workflows",a,l,u,m,p,h,y],x=Kz({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===v?{}:v),_=(0,f.useInfiniteQuery)(g,(function(e){var t=e.pageParam,r=void 0===t?y:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,sort:l,filters:u,status:p,workflow_type:h,per_page:m};return a&&(i.query=a),Wz.n.list({params:i})}),x),j=(0,n.useMemo)((function(){var e;return(null===(e=_.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=_.data)||void 0===e?void 0:e.pages]),w=(null===(t=j[0])||void 0===t?void 0:t.total_count)||0,O=(null===(r=j[0])||void 0===r?void 0:r.per_page)||m,P=(0,n.useMemo)((function(){return mw()(j.map((function(e){return e.records})))}),[j]);return Kz(Kz({},_),{},{queryKey:g,totalWorkflows:w,workflows:P,pageSize:O,pages:j})}({perPage:20,sort:Yz,workflowType:t,status:r,initialPage:s,query:l,options:{keepPreviousData:!1}});return{infiniteQuery:c,totalWorkflows:DN()(null===c||void 0===c?void 0:c.pages[0],"total_count",0),isLoading:null===c||void 0===c?void 0:c.isLoading,setPage:a,initialPage:s,defaultPageSize:20}},eV="settings.workflows.table",tV=function(e){var t=e.columns,r=e.colgroup,i=e.workflowType,o=e.status,s=Xz({workflowType:i,status:o}),l=s.infiniteQuery,u=s.isLoading,d=s.totalWorkflows,f=s.initialPage,m=s.defaultPageSize,p=s.setPage,h=(0,dr.k6)(),b=(0,n.useMemo)((function(){var e=l.isLoading,t=l.workflows,r=l.isError;return e||r?null:t.map((function(e){return e.created_by_community_member_id}))}),[l]);return(0,c.jsx)(eM,{ids:b,children:(0,c.jsxs)(bo.J,{columns:t({refetch:l.refetch}),infiniteQuery:l,pageSize:m,initialPage:f,totalCountPath:"total_count",onChangePage:function(e){p(e)},onClickRow:function(e){var t=e.original||{},r=t.id,n=t.status;if(r){var i={pathname:n===pL?S.o0.edit({workflowId:r}):S.o0.view({workflowId:r}),state:{from:{path:h.location.pathname,query:h.location.search}}};h.push(i)}},children:[!u&&(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)([eV,"workflows_count"],{count:d})})}),(0,c.jsxs)(Gz,{className:"px-6",children:[(0,c.jsxs)(Q.w.Table,{children:[r&&(0,c.jsx)(c.Fragment,{children:r}),(0,c.jsx)(Q.w.Header,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)([eV,"no_workflows_found"])}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})]})})},rV=function(e){var t=e.className;return(0,c.jsx)("div",{className:J()("border-dark m-1 h-4 w-[1px] border-l",t)})},nV=Bz.reduce((function(e,t){return e.set(t.value,t.historyDetailViewComponent),e}),new Map),iV=function(e){var t=e.message,r=t.action,n=t.request_details,i=n.body,o=void 0===i?{}:i,a=n.url,s=void 0===a?"":a,l=(r||{}).api_params,u=void 0===l?{}:l,d=nV.get(null===r||void 0===r?void 0:r.action_type)||function(){return null};return(0,c.jsx)(d,{body:o,url:s,apiParams:u})},oV=function(e){var t,r=e.log,i=r.message,o=void 0===i?{}:i,s=r.created_at,u=void 0===s?"":s,d=o.request_details,f=void 0===d?{}:d,m=o.response_details,p=void 0===m?{}:m,h=(0,n.useMemo)((function(){var e=(0,fn.omit)(f,["url"]);return{request:JSON.stringify(e,null,2),response:JSON.stringify(p,null,2)}}),[f,p]);if(null===o||void 0===o||null===(t=o.action)||void 0===t||!t.action_type)return null;var b,y,v,g=(0,Xe.wc)({dateTime:new Date(u),format:"short_date_at_short_time"});return(0,c.jsx)("div",{className:"border-dark rounded-lg border",children:(0,c.jsxs)(Uo.O.Group,{children:[(0,c.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 pt-5",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(v=Bz.find((),null!==(b=null===v||void 0===v?void 0:v.label)&&void 0!==b?b:null===o||void 0===o||null===(y=o.action)||void 0===y?void 0:y.action_type)})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,c.jsx)(HM,{result:null===o||void 0===o?void 0:o.status,isBadge:!1,textSize:"text-sm"}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"time",dateTime:u,children:g})]})]}),(0,c.jsxs)(Uo.O.List,{children:[(0,c.jsx)(Uo.O,{children:(0,a.t)("settings.workflows.history.info")}),(0,c.jsx)(Uo.O,{children:(0,a.t)("settings.workflows.history.data_in")}),(0,c.jsx)(Uo.O,{children:(0,a.t)("settings.workflows.history.data_out")})]})]}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{className:"px-6 py-5",children:(0,c.jsx)(iV,{message:o})}),(0,c.jsx)(Uo.O.Panel,{className:"p-2",children:(0,c.jsx)(FM,{code:null===h||void 0===h?void 0:h.request})}),(0,c.jsx)(Uo.O.Panel,{className:"p-2",children:(0,c.jsx)(FM,{code:null===h||void 0===h?void 0:h.response})})]})]})})},aV=function(e){var t=e.log,r=t.action_to_s,n=void 0===r?"":r,i=t.created_at,o=void 0===i?"":i,a=t.message,s=void 0===a?{}:a,u=(0,Xe.wc)({dateTime:new Date(o),format:"short_date_at_short_time"});return(0,c.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,c.jsx)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 py-5",children:(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:n})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,c.jsx)(HM,{result:"failed",isBadge:!1}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"time",dateTime:o,children:u})]})]})}),(0,c.jsx)("div",{className:"px-6 py-5",children:(0,c.jsx)(l.ZT.LabelSm,{children:null===s||void 0===s?void 0:s.error})})]})},sV=function(e){var t=e.log,r=e.noMessage,n=void 0!==r&&r,i=t.action_to_s,o=void 0===i?"":i,a=t.created_at,s=void 0===a?"":a,u=t.message,d=void 0===u?{}:u,f=(0,Xe.wc)({dateTime:new Date(s),format:"short_date_at_short_time"});return(0,c.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,c.jsx)("div",{className:J()("bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg px-6 py-5",{"border-b":!n,"rounded-b-lg":n}),children:(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:o})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,c.jsx)(HM,{result:(null===d||void 0===d?void 0:d.status)||"success",isBadge:!1,textSize:"text-sm"}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"time",dateTime:s,children:f})]})]})}),!n&&(0,c.jsx)("div",{className:"p-2",children:(0,c.jsx)(FM,{code:JSON.stringify(d,null,2)})})]})},lV=function(e){var t=e.log,r=t.action_to_s,n=void 0===r?"":r,i=t.created_at,o=void 0===i?"":i,a=t.message,s=void 0===a?{}:a,u=(0,Xe.wc)({dateTime:new Date(o),format:"short_date_at_short_time"});return(0,c.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,c.jsx)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 py-5",children:(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:n})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,c.jsx)(HM,{result:"skipped",isBadge:!1}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"time",dateTime:o,children:u})]})]})}),(0,c.jsx)("div",{className:"px-6 py-5",children:(0,c.jsx)(l.ZT.LabelSm,{children:null===s||void 0===s?void 0:s.reason})})]})},cV={label:(0,a.t)("settings.workflows.form.events.community_member_joined_community.title"),value:"community_member_joined_community",group:(0,a.t)("settings.workflows.form.event_groups.member"),description:(0,a.t)("settings.workflows.form.events.community_member_joined_community.description"),formComponent:LR,resource:TL.COMMUNITY,viewComponent:jR,icon:"user"},uV={label:(0,a.t)("settings.workflows.form.events.community_member_email_changed.title"),value:"community_member_email_changed",group:(0,a.t)("settings.workflows.form.event_groups.member"),description:(0,a.t)("settings.workflows.form.events.community_member_email_changed.description"),formComponent:LR,resource:TL.COMMUNITY,viewComponent:jR,icon:"email"},dV=r(91566);function fV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fV(Object(r),!0).forEach((function(t){pV(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fV(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hV={label:(0,a.t)("settings.workflows.form.events.community_member_profile_field_updated.title"),value:"community_member_profile_field_updated",group:(0,a.t)("settings.workflows.form.event_groups.member"),description:(0,a.t)("settings.workflows.form.events.community_member_profile_field_updated.description"),formComponent:function(){var e=(0,pr.Gc)().register,t=(0,dV.N)().getOptions,r=t.data;if(t.isLoading)return(0,c.jsx)(l.aN,{center:!0});var n=null===r||void 0===r?void 0:r.map((function(e){return{value:e.id,label:e.label}}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",mV({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,c.jsx)(oM.N,{name:"trigger.resource_id",label:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)(["settings.workflows.form","choose_profile_field"])}),options:n,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},emptyMessage:(0,a.t)("settings.workflows.form.errors.profile_fields.not_found")})]})},viewComponent:function(e){var t=e.resourceId,r=(0,YN.Yw)({fieldId:t}).getOptions,n=r.data,i=void 0===n?{}:n,o=r.isLoading;return(0,c.jsx)(cR,{label:(0,a.t)("settings.workflows.view.resources.profile_field"),value:i.label,isLoading:o})},resource:TL.PROFILE_FIELD,icon:"user",released:!0},bV=[cV,xF,TF,cB,uB,fB,mB,QF,BF,UF,jF,eB,nB,lB,_R,KF,JF,$F,WF,_F,dB,SF,hV,uV],yV=bV.reduce((,new Map),vV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return yV.get(e)||t},gV=function(e){var t,r,n=e.log,i=e.text,o=n.action_to_s,a=void 0===o?"":o,s=n.created_at,u=void 0===s?"":s,d=n.message,f=void 0===d?{}:d,m=(0,Xe.wc)({dateTime:new Date(u),format:"short_date_at_short_time"});return(0,c.jsxs)("div",{className:"border-dark rounded-lg border",children:[(0,c.jsx)("div",{className:"border-dark bg-secondary flex flex-col gap-3.5 rounded-t-lg border-b px-6 py-5",children:(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(r=bV.find((function(e){return e.value===(null===f||void 0===f?void 0:f.trigger_type)})),null!==(t=null===r||void 0===r?void 0:r.label)&&void 0!==t?t:a)})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,c.jsx)(HM,{result:"success",isBadge:!1}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",as:"time",dateTime:u,children:m})]})]})}),(0,c.jsx)("div",{className:"px-6 py-5",children:(0,c.jsxs)("div",{className:"md:flex",children:[(0,c.jsx)("div",{className:"w-1/4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:i})}),(0,c.jsx)("div",{className:"w-3/4",children:(0,c.jsx)(MB,{communityMemberId:null===f||void 0===f?void 0:f.initiator_id})})]})})]})},xV=function(e){var t=e.log;switch(t.action){case"event_triggered":return(0,c.jsx)(gV,{log:t,text:(0,a.t)("settings.workflows.trigger.event")});case"run_triggered":return(0,c.jsx)(gV,{log:t,text:(0,a.t)("settings.workflows.trigger.run")});case"task_execution_completed":case"run_completed":case"trigger_execution_check_failed":return(0,c.jsx)(sV,{log:t,noMessage:!0});case"task_action_completed":case"task_action_failed":return(0,c.jsx)(oV,{log:t});case"fetching_audience_members_failed":case"run_failed":case"task_execution_failed":return(0,c.jsx)(aV,{log:t});case"task_skipped":return(0,c.jsx)(lV,{log:t});default:return(0,c.jsx)(sV,{log:t})}},_V=r(97957);function jV(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var wV="settings.workflows.history",OV=function(e){var t=e.task,r=t.status,n=t.id,i=t.workflow.id,o=(0,l.pm)(),s=function(){var e,t=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n);case 3:o.success((0,a.t)([wV,"copy_success"])),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o.error((0,a.t)([wV,"copy_error"]));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){jV(o,n,i,a,s,"next",e)}function s(e){jV(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),u="".concat((0,a.t)([wV,"task_id"]),": ").concat(n);return(0,c.jsxs)("div",{className:"mt-3 flex flex-col items-start gap-3 md:flex-row md:items-center",children:[(0,c.jsx)(HM,{result:r}),(0,c.jsxs)("span",{className:"flex max-w-[15rem] cursor-pointer items-center",children:[(0,c.jsx)(_V.Y,{tooltipOptions:{content:n},children:(0,c.jsx)(l.ZT.LabelSm,{children:u})}),(0,c.jsxs)("button",{className:"hover:bg-secondary rounded-md transition",type:"button",onClick:s,children:[(0,c.jsx)("span",{className:"sr-only",children:(0,a.t)("copy")}),(0,c.jsx)("span",{className:"flex h-6 w-6 items-center justify-center",children:(0,c.jsx)(bt.JO,{type:"16-copy",size:16})})]})]}),(0,c.jsxs)(sn.rU,{to:S.o0.view({workflowId:i}),className:"text-default hover:text-dark flex items-center",children:[(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([wV,"view_workflow"])}),(0,c.jsx)(bt.JO,{type:"16-arrow",useWithFillCurrentColor:!0,viewBox:"0 0 16 16","aria-hidden":!0})]})]})},PV=function(e){var t,r=e.taskId,n=e.onClose,i=(0,f.useQuery)(["task-detail",r],(function(){return vn.nH.taskDetail({taskId:r})})),o=i.data;if(i.isLoading)return(0,c.jsx)(l.aN,{center:!0});var s=o.workflow,u=o.logs;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{children:null!==(t=s.name)&&void 0!==t?t:(0,a.t)("settings.workflows.detailed_history")}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:n})})]}),(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)(OV,{task:o}),(0,c.jsx)("div",{className:"mt-5 flex flex-col",children:u.map((function(e,t){return(0,c.jsxs)("div",{children:[(0,c.jsx)(xV,{log:e}),t<u.length-1&&(0,c.jsx)(rV,{className:"ml-[3.3rem]"}),t===u.length-1&&(0,c.jsx)("div",{className:"m-1 h-4"})]},t)}))})]})]})},SV=function(e){var t=e.taskId,r=(0,ne.yT)();return(0,c.jsxs)(ie.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsx)(ie.u_.Content,{size:"lg",children:(0,c.jsx)(PV,{taskId:t,onClose:r.hide})})]})},kV=ne.uc.create((function(e){var t=e.taskId;return(0,c.jsx)(SV,{taskId:t})})),CV=function(){return(0,ne.yT)(kV)},NV=function(e){var t=e.className,r=e.children,n=(0,Mo.k)().shouldShowTrialBanner;return(0,c.jsx)("div",{className:J()("overflow-auto",t,{"lg:max-h-[calc(100vh-16rem)]":!n,"lg:max-h-[calc(100vh-19rem)]":n}),children:r})},TV=["perPage","initialPage","options","workflowType"];function AV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function EV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AV(Object(r),!0).forEach((function(t){IV(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AV(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function IV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DV(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var LV=["member_id"];function MV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MV(Object(r),!0).forEach((function(t){FV(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MV(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function FV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var UV=function(e){var t=e.workflowType,r=(0,To.Xt)().queryParams,i=(0,No.v)(),o=i.setPage,a=i.initialPage,s=r.member_id,l=RV(RV({},BV(r,LV)),{},{perPage:20,initialPage:a,workflowType:t,options:{keepPreviousData:!1}});s&&(l.community_member_ids=s);var c=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.perPage,a=void 0===o?20:o,s=i.initialPage,l=void 0===s?1:s,c=i.options,u=void 0===c?{}:c,d=i.workflowType,m=DV(i,TV),p=["workflows-history",d,a,m],h=EV({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},u),b=(0,f.useInfiniteQuery)(p,(function(e){var t=e.pageParam,r=void 0===t?l:t,n=1;"number"===typeof r&&r>0&&(n=r);var i=EV(EV({},m),{},{page:n,workflow_type:d,per_page:a});return vn.nH.listHistory({params:i})}),h),y=(0,n.useMemo)((function(){var e;return(null===(e=b.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=b.data)||void 0===e?void 0:e.pages]),v=(null===(t=y[0])||void 0===t?void 0:t.total_count)||0,g=(null===(r=y[0])||void 0===r?void 0:r.per_page)||a,x=(0,n.useMemo)((function(){return mw()(y.map((function(e){return e.records})))}),[y]);return EV(EV({},b),{},{queryKey:p,totalTasks:v,tasks:x,pageSize:g,pages:y})}(l);return{infiniteQuery:c,totalWorkflows:DN()(null===c||void 0===c?void 0:c.pages[0],"total_count",0),isLoading:null===c||void 0===c?void 0:c.isLoading,setPage:o,initialPage:a,defaultPageSize:20}},zV="settings.workflows.table",VV=function(e){var t=e.columns,r=e.workflowType,i=UV({workflowType:r}),o=i.infiniteQuery,s=i.isLoading,l=i.totalWorkflows,u=i.initialPage,d=i.defaultPageSize,f=i.setPage,m=CV(),p=(0,n.useMemo)((function(){var e=o.isLoading,t=o.tasks,r=o.isError;return e||r?null:t.map((function(e){return e.community_member_id}))}),[o]);return(0,c.jsx)(eM,{ids:p,children:(0,c.jsxs)(bo.J,{columns:t,infiniteQuery:o,pageSize:d,initialPage:u,totalCountPath:"total_count",onChangePage:f,onClickRow:children:[!s&&(0,c.jsx)(Q.w.Headline,{children:(0,c.jsx)(Q.w.Headline.Title,{children:(0,a.t)([zV,"workflows_runs"],{count:l})})}),(0,c.jsxs)(NV,{className:"px-6",children:[(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{"data-testid":"workflow-history-name-column"}),(0,c.jsx)("col",{"data-testid":"workflow-history-member-column"}),(0,c.jsx)("col",{"data-testid":"workflow-history-status-column",className:"min-w-[10rem]"}),(0,c.jsx)("col",{"data-testid":"workflow-history-steps-column"}),(0,c.jsx)("col",{"data-testid":"workflow-history-run-at-column"})]}),(0,c.jsx)(Q.w.Header,{className:"z-10"}),(0,c.jsx)(Q.w.Loader,{}),(0,c.jsx)(Q.w.NoRecords,{text:(0,a.t)([zV,"no_runs_found"])}),(0,c.jsx)(Q.w.Body,{})]}),(0,c.jsx)(Q.w.Pagination,{align:"left",direction:"reverse"})]})]})})},ZV=function(e){var t=e.dateTime;if(!t)return null;var r=(0,Xe.wc)({dateTime:new Date(t),format:"short_date_at_short_time"});return(0,c.jsx)("time",{dateTime:t,className:"break-normal",children:r})},HV=function(e){return function(){return(0,Er.UT)(S.av.communityMember.show({memberId:e}))}},qV=r(46854),GV=r(59729);function WV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QV=function(){var e="member-filter",t=(0,GV.j)(),r=t.selectedText,n=t.onApply,i=(0,qV.r)();return(0,c.jsx)(ce.l,{defaultValues:WV({},e,+r),onSubmit:children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-4 p-4",children:[(0,c.jsx)(ce.l.CommunityMemberSelect,{name:e,includeInactive:!0,direction:"down",autoFocus:!0}),(0,c.jsx)($e.z,{variant:i,type:"submit",full:!0,children:(0,a.t)("filters.apply")})]})})},KV="settings.workflows.history.filters",JV="member_id",$V="settings.workflows.history.filters",YV="settings.workflows.history.filters",XV="settings.workflows",eZ=[{label:(0,a.t)([XV,"table.result.success"]),value:"success"},{label:(0,a.t)([XV,"table.result.failed"]),value:"failed"},{label:(0,a.t)([XV,"table.result.partial_success"]),value:"partial_success"},{label:(0,a.t)([XV,"table.result.skipped"]),value:"skipped"},{label:(0,a.t)([XV,"table.result.in_progress"]),value:"in_progress"},{label:(0,a.t)([XV,"table.result.duplicate_skipped"]),value:"duplicate_skipped"}],tZ=function(e){var t=e.filtersConfig;return(0,c.jsx)(Tl.x,{className:"border-stroke-background relative z-20 border-b px-6 py-3",children:t.map((function(e){var t=e.name,r=e.component;return(0,c.jsx)(r,{},t)}))})},rZ=function(e){var t=e.isInitialOpen,r=e.onApply,n=e.changeUrl,i=void 0===n||n,o=e.value,s=(0,To.Xt)(),l=s.queryParams,u=s.updateUrl;return(0,c.jsx)(To.wn,{chip:(0,a.t)([$V,"name"]),title:(0,a.t)([$V,"name_title"]),selectedText:o||l.workflow_name,isInitialOpen:t,onApply:function(e){i&&u("workflow_name",e),(0,fn.isFunction)(r)&&r(e)},children:(0,c.jsx)(To.xo,{name:"name-filter",placeholder:(0,a.t)([$V,"name_placeholder"])})})},nZ=function(e){var t=e.onApply,r=(0,To.Xt)(),n=r.queryParams,i=r.updateUrl;return(0,c.jsx)(To.wn,{chip:(0,a.t)([XV,"history.filters.status"]),title:(0,a.t)([XV,"history.filters.status"]),selectedText:n.status,renderSelectedText:function(e){var t,r=e.selectedText;if(!r)return null;var n=eZ.find((function(e){return e.value===r}));return null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:r},onApply:function(e){i("status",e),(0,fn.isFunction)(t)&&t(e)},children:(0,c.jsx)(To.dQ,{options:eZ,legend:(0,a.t)([XV,"history.filters.status_legend"]),name:"status-filter"})})},iZ=function(e){var t=e.onApply,r=(0,To.Xt)(),n=r.queryParams,i=r.updateUrl;return(0,c.jsx)(To.wn,{chip:(0,a.t)([YV,"run_id"]),title:(0,a.t)([YV,"run_id_title"]),selectedText:n.run_id,onApply:function(e){i("run_id",e),(0,fn.isFunction)(t)&&t(e)},children:(0,c.jsx)(To.xo,{name:"run-id-filter",placeholder:(0,a.t)([YV,"run_id_placeholder"])})})},oZ=function(e){var t=e.onApply,r=(0,To.Xt)(),n=r.queryParams,i=r.updateUrl,o=n[JV],s=function(e){var t=e.memberId;return{communityMemberQuery:(0,f.useQuery)(["community-member-show",t],HV(t),{enabled:!!t})}}({memberId:o}),l=s.communityMemberQuery.data;return(0,c.jsx)(To.wn,{chip:(0,a.t)([KV,"member"]),title:(0,a.t)([KV,"member_title"]),selectedText:o,renderSelectedText:onApply:function(e){i(JV,null===e||void 0===e?void 0:e.toString()),(0,fn.isFunction)(t)&&t(e)},children:(0,c.jsx)(QV,{defaultValue:l})})},aZ=function(e){var t=e.onClick;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:t,children:(0,a.t)("settings.workflows.table.actions.archive")})},sZ=function(e){var t=e.onClick;return(0,c.jsx)(Da.Lt.ItemWithLink,{hasDanger:!0,onClick:t,children:(0,a.t)("settings.workflows.table.actions.delete")})},lZ=function(e){var t=e.onClick;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:t,children:(0,a.t)(["settings.workflows.table.actions","duplicate"])})},cZ=function(e){var t=e.workflowId,r=(0,dr.k6)();return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(){r.push({pathname:S.o0.edit({workflowId:t}),state:{from:{path:r.location.pathname,query:r.location.search}}})},children:(0,a.t)(["settings.workflows.table.actions","edit"])})},uZ=dZ=r(90438);function fZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fZ(Object(r),!0).forEach((function(t){pZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hZ={filter_rules:{filters:{role:"Member"}}},bZ=function(e){var t,r,n=e.workflow,i=void 0===n?{}:n,o=e.children,a=e.debug,s=void 0!==a&&a,l=!(0,fn.isEmpty)(null===i||void 0===i?void 0:i.actions)?i.actions:[NL()],u="bulk_action"===(null===i||void 0===i?void 0:i.workflow_type),d="scheduled"===(null===i||void 0===i?void 0:i.workflow_type),f=!(0,fn.isEmpty)(null===i||void 0===i||null===(t=i.audience)||void 0===t||null===(r=t.filter_rules)||void 0===r?void 0:r.filters)&&Object.values(i.audience.filter_rules.filters).some(Boolean),m=(u||d)&&f?i.audience:hZ,p=d?i.schedule:{},h=(0,pr.cI)({mode:"onSubmit",revalidateMode:"onChange",defaultValues:mZ(mZ({},i),{},{actions:l,audience:m,schedule:p})});return(0,c.jsxs)(pr.RV,mZ(mZ({},h),{},{children:[o,s&&(0,c.jsx)(dZ.DevTool,{control:h.control})]}))},yZ=["totalQueryMembers"];function vZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vZ(Object(r),!0).forEach((function(t){xZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var jZ=function(e){var t=(0,(0,pr.Gc)().watch)("audience.filter_rules")||{},r=bU(t).filters,n=!(0,fn.isEmpty)(r)&&vU(r),i=(0,Vo.fd)({query:e,filters:gZ({status:qo.vC.ACTIVE,exclude_empty_name:!1,exclude_empty_profiles:!1},r),options:{disabled:!n,keepPreviousData:!0}}),o=i.totalQueryMembers,a=_Z(i,yZ);return gZ({hasFilters:n,formattedCount:(0,Zo.V)(o),count:o},a)},wZ=function(){var e=((0,(0,pr.Gc)().watch)("actions")||[]).map(().filter(Boolean).map((function(e){return{title:(0,a.t)(["settings.workflows.view.actions",e,"title"],{defaultValue:(0,a.t)("settings.workflows.form.add_an_action")}),icon:Vz(e)}}));return(0,c.jsx)(c.Fragment,{children:e.map((function(e,t){var r=e.title,n=e.icon;return(0,c.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,c.jsx)(bt.JO,{type:"24-workflow-".concat(n),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"}),(0,c.jsx)(y.Z.BodySm,{children:r})]},t)}))})},OZ=function(){var e=jZ(),t=e.count,r=e.formattedCount,n=(0,a.t)("settings.workflows.confirm_modal.members_match_right_now",{count:t}),i=t>0?"".concat(r," ").concat(n):n;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,c.jsx)(bt.JO,{type:"24-workflow-audience",size:24,className:"!h-6 !w-6"}),(0,c.jsx)(y.Z.BodySm,{children:i})]}),(0,c.jsx)(wZ,{})]})},PZ=function(){var e=jZ(),t=e.isLoading,r=e.hasFilters,n=nz().formActions.find((function(e){return e.action_type===BB.value})),i=n?(0,a.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_title"):(0,a.t)("settings.workflows.confirm_modal.workflow_summary");return(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)(y.Z.LabelMd,{weight:"semibold",children:i}),(0,c.jsx)("div",{className:"pt-5",children:(0,c.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:r&&(0,c.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[t&&(0,c.jsx)("div",{className:"flex flex-row items-center gap-3",children:(0,c.jsx)(bt.JO,{type:"loader",size:16,className:"!h-4 !w-4"})}),(0,c.jsx)(OZ,{})]})})}),n&&(0,c.jsx)("div",{className:"pt-5",children:(0,c.jsx)(y.Z.LabelSm,{children:(0,a.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_description")})})]})},SZ=function(){return(0,c.jsx)(ie.u_.Body,{className:"text-center",children:(0,c.jsx)(y.Z.BodyMd,{children:(0,a.t)("settings.workflows.confirm_modal.are_you_sure_you_want_to_publish_your_workflow")})})},kZ=function(e){var t=e.rerunParams,r="true"==(null===t||void 0===t?void 0:t.do_not_skip_tasks)?(0,a.t)("settings.workflows.rerun_modal.all_members"):(0,a.t)("settings.workflows.rerun_modal.only_new_members");return(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,c.jsx)("div",{className:"pt-5",children:(0,c.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:(0,c.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[(0,c.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,c.jsx)("div",{children:(0,c.jsx)(bt.JO,{type:"24-workflow-audience",size:24,className:"!h-6 !w-6"})}),(0,c.jsx)(l.ZT.BodySm,{children:r})]}),(0,c.jsx)(wZ,{})]})})})]})},CZ=function(e){var t=e.isBulkAction,r=e.isScheduled,n=e.isRerun,i=e.rerunParams;return t&&n?{title:(0,a.t)("settings.workflows.confirm_modal.rerun_summary"),body:(0,c.jsx)(kZ,{rerunParams:i}),successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.rerun_this_workflow")}:t?{title:(0,a.t)("settings.workflows.confirm_modal.run_this_workflow"),body:(0,c.jsx)(PZ,{}),successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.run_this_workflow")}:r?{title:(0,a.t)("settings.workflows.confirm_modal.schedule_this_workflow"),body:(0,c.jsx)(PZ,{}),successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.schedule_this_workflow")}:{title:(0,a.t)("settings.workflows.confirm_modal.publish_your_workflow"),body:(0,c.jsx)(SZ,{}),successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.activate_this_workflow")}},NZ=function(e){var t=e.onCancel,r=e.onPublish,n=e.isLoading,i=void 0!==n&&n,o=e.isRerun,s=e.rerunParams,l=e.onBack,u=ri(),d=u.isBulkAction,f=u.isScheduled;if(i)return(0,c.jsx)(ie.u_.Content,{children:(0,c.jsx)(ie.u_.Body,{className:"w-full !px-10 !py-16",children:(0,c.jsx)(DI.u,{title:(0,a.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,a.t)("settings.workflows.we_are_preparing")})})});var m=CZ({isBulkAction:d,isScheduled:f,isRerun:o,rerunParams:s}),p=m.title,h=m.body;return(0,c.jsxs)(ie.u_.Content,{size:"md",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",className:"text-center",children:p}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:t})}),(0,fn.isFunction)(l)&&(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,c.jsx)(ie.u_.BackButton,{onClick:l})})]}),h,(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)($e.z,{variant:d?"danger":"circle",onClick:r,full:!0,large:!0,children:d?(0,a.t)("settings.workflows.confirm_modal.confirm_and_run"):f?(0,a.t)("settings.workflows.confirm_modal.schedule"):(0,a.t)("settings.workflows.confirm_modal.publish_and_enable")})})]})},TZ=r(27027);function AZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function EZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var IZ="settings.workflows.rerun_modal.form",DZ=[{value:"true",label:(0,a.t)([IZ,"include_all_members.title"]),description:(0,a.t)([IZ,"include_all_members.description"])},{value:"false",label:(0,a.t)([IZ,"only_new_members.title"]),description:(0,a.t)([IZ,"only_new_members.description"])}],LZ=function(){var e=(0,pr.Gc)().register;return(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)([IZ,"title"])}),(0,c.jsx)("div",{className:"flex flex-col pt-5",children:(0,c.jsx)(TZ.p,{children:DZ.map((function(t){var r=t.value,n=t.label,i=t.description;return(0,c.jsx)(Zb.Y,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AZ(Object(r),!0).forEach((function(t){EZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"rerunbody-radio-".concat(r),label:n,description:i,value:r},e("do_not_skip_tasks")),r)}))})})]})},MZ=function(e){var t=e.doNotSkipTasks,r=e.onCancel,n=e.onSubmit,i=e.onBack;return(0,c.jsxs)(ie.u_.Content,{onClose:r,children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{className:"text-center",children:(0,a.t)("settings.workflows.recurring_schedule_modal.rerun_settings")}),(0,c.jsx)(ie.u_.CloseButton,{onClick:r}),(0,fn.isFunction)(i)&&(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,c.jsx)(ie.u_.BackButton,{onClick:i})})]}),(0,c.jsx)(l.l0,{defaultValues:{do_not_skip_tasks:null!==t&&void 0!==t?t:"false"},onSubmit:n,children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,c.jsx)(LZ,{}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)(l.zx,{variant:"circle",full:!0,large:!0,type:"submit",children:(0,a.t)("settings.workflows.rerun_modal.continue")})})]})})]})},RZ=["name"];function FZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UZ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zZ(e){var t=e.name,r=UZ(e,RZ),i=(0,n.useRef)((0,fn.uniqueId)("date-time-picker-portal-")).current;return(0,c.jsx)(l.xZ,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FZ(Object(r),!0).forEach((function(t){BZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:t,portalId:i,popperClassName:"!z-[1080] !w-auto",minDate:new Date},r))}var VZ="settings.workflows.one_time_schedule_modal",ZZ=function(){var e=(0,pr.Gc)().watch,t=Boolean(e("scheduler.last_run_at")),r=e("scheduler.last_run_at");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ie.u_.Body,{children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)([VZ,"date_and_time"])}),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)(l.l0.Item,{name:"scheduler.last_run_at",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:" ",children:(0,c.jsx)(zZ,{name:"scheduler.last_run_at",datePlaceholder:(0,a.t)([VZ,"date"]),timePlaceholder:(0,a.t)([VZ,"time"]),minDate:new Date,dataTestId:"last_run_at"})})}),r&&(0,c.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)("".concat(VZ,".summary"),{runAt:(0,Xe.wc)({dateTime:new Date(r),format:"date_time_with_short_timezone"})})})})]}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)(l.zx,{variant:"circle",full:!0,large:!0,disabled:!t,children:(0,a.t)("".concat(VZ,".submit"))})})]})};function HZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HZ(Object(r),!0).forEach((function(t){GZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function GZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return QZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QZ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var KZ=function(e){var t,r,i=e.workflowId,o=e.onCancel,s=e.setIsConfirmContent,u=e.hasRuns,d=e.schedule,m=(0,l.pm)(),p="settings.workflows.one_time_schedule_modal",h=WZ((0,n.useState)(!1),2),b=h[0],y=h[1],v=WZ((0,n.useState)({}),2),g=v[0],x=v[1],_=d.id,j=d.isReschedule,w=(0,f.useMutation)((function(e){return function(e,t,r){var n=new Date(r.scheduler.last_run_at).toISOString();return _?j?vn.nH.reschedule({workflowId:e,id:_,body:{last_run_at:n,schedule_type:"one_time",do_not_skip_tasks:r.do_not_skip_tasks}}):vn.nH.updateOneTimeSchedule({workflowId:e,id:_,body:{last_run_at:n,do_not_skip_tasks:r.do_not_skip_tasks}}):vn.nH.createOneTimeSchedule({workflowId:e,body:{last_run_at:n}})}(i,0,e)}),{onSuccess:function(){s(!0)},onError:function(e){"message"in e&&m.error(null===e||void 0===e?void 0:e.message)}}),O=w.mutate,P=j?"":null===d||void 0===d?void 0:d.last_run_at;return b?(0,c.jsx)(MZ,{onSubmit:doNotSkipTasks:null!==(t=null===d||void 0===d||null===(r=d.do_not_skip_tasks)||void 0===r?void 0:r.toString())&&void 0!==t?t:"false",onCancel:o}):(0,c.jsxs)(ie.u_.Content,{size:"md",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",className:"text-center",children:(0,a.t)([p,"title"])}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:o})})]}),(0,c.jsx)(l.l0,{defaultValues:{scheduler:{last_run_at:P}},validationSchema:Kp.Ry().shape({scheduler:Kp.Ry().shape({last_run_at:Kp.hT().required().min(new Date,(0,a.t)([p,"past_error"],{currentDateTime:(0,Xe.wc)({dateTime:new Date,format:"date_time_with_short_timezone"})}))})}),onSubmit:function(e){x(e),u?y(!0):O(e)},children:(0,c.jsx)(ZZ,{})})]})};function JZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JZ(Object(r),!0).forEach((function(t){YZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function YZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XZ(e){var t=e.name,r=e.label,n=e.value,i=(0,pr.Gc)().register;return(0,c.jsxs)("label",{children:[(0,c.jsx)("input",$Z({type:"checkbox",value:n,className:"peer sr-only"},i(t))),(0,c.jsx)("span",{className:"border-disabled peer-checked:border-secondary peer-checked:bg-secondary flex flex-wrap items-center justify-center rounded-md border px-3 py-2 uppercase",children:(0,c.jsx)(l.ZT.LabelXxs,{weight:"semibold",children:r})})]})}function eH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nH(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iH=function(e){var t=e.days,r=rH((0,n.useState)(!1),2),i=r[0],o=r[1];return(0,n.useEffect)((function(){o(!0)}),[]),i?(0,c.jsx)(l.l0.Item,{name:"days_of_week",label:(0,a.t)(["settings.workflows.recurring_schedule_modal","repeats_every"]),hideBorder:!0,hideDescription:!0,labelClassName:"mb-2",children:(0,c.jsx)("div",{className:"flex flex-wrap justify-between gap-y-2",children:t.map((function(e){return(0,c.jsx)(XZ,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(r),!0).forEach((function(t){tH(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eH(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:"days_of_week"},e),e.value)}))})}):null},oH=r(9198),aH=r.n(oH),sH=r(20342),lH=["minDate","maxDate","name","disabled","placeholder"],cH=["value","ref"];function uH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uH(Object(r),!0).forEach((function(t){fH(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uH(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mH(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pH(e){var t=e.minDate,r=e.maxDate,i=e.name,o=e.disabled,a=e.placeholder,s=mH(e,lH),l=(0,n.useRef)(null),u=(0,n.useRef)((0,fn.uniqueId)("date-picker-portal-"));return(0,c.jsx)(pr.Qr,{name:i,render:function(e){var n=e.field,i=n.value,d=n.ref,f=mH(n,cH),m=i?new Date(i):null,p=(0,sH.l)([d,l]);return(0,c.jsxs)("div",{className:"relative mr-1",children:[(0,c.jsx)(aH(),dH(dH({selected:m,dateFormat:"MMM d, yyyy",minDate:t,maxDate:r,disabled:o,placeholderText:a,ref:p,portalId:u,popperClassName:"!z-[1080] !w-auto",className:J()({"!bg-secondary !border-primary":o})},f),s)),(0,c.jsx)(bt.JO,{type:"cheveron-down",className:"hover:text-darkest absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer",onClick:)]})}})}var hH="settings.workflows.recurring_schedule_modal",bH="never",yH=[{label:(0,a.t)([hH,bH]),value:bH},{label:(0,a.t)([hH,"on"]),value:"on"}];function vH(){var e,t=(0,pr.Gc)(),r=t.watch,i=t.setValue,o=r("first_run_at"),s=r("last_run_at"),u=r("ends_on"),d=r("has_schedule_run_before"),f=(0,n.useMemo)((function(){return o?new Date(o):new Date}),[o]);return(0,n.useEffect)((function(){u===bH&&i("last_run_at",null)}),[u,i]),(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)(l.l0.Item,{name:"first_run_at",label:(0,a.t)([hH,"first_run"]),isDisabled:d,hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(zZ,{name:"first_run_at",datePlaceholder:(0,a.t)([hH,"select_date"]),timePlaceholder:(0,a.t)([hH,"select_time"]),maxDate:s?new Date(s):void 0,disabled:d})}),(0,c.jsxs)("div",{className:"flex gap-x-2",children:[(0,c.jsx)(l.l0.Item,{name:"ends_on",label:(0,a.t)("settings.workflows.recurring_schedule_modal.ends"),hideDescription:!0,hideBorder:!0,className:"flex-1",children:(0,c.jsx)(oM.N,{name:"ends_on",label:null,options:yH})}),(0,c.jsx)(l.l0.Item,{name:"last_run_at",emptyLabel:!0,hideDescription:!0,hideBorder:!0,placeholder:(0,a.t)([hH,"select_date"]),className:"flex-1",children:(0,c.jsx)(pH,{name:"last_run_at",minDate:f,disabled:u===(null===(e=(0,fn.head)(yH))||void 0===e?void 0:e.value)})})]})]})}var gH="settings.workflows.recurring_schedule_modal",xH=[{value:"monday",label:(0,a.t)([gH,"mon"])},{value:"tuesday",label:(0,a.t)([gH,"tue"])},{value:"wednesday",label:(0,a.t)([gH,"wed"])},{value:"thursday",label:(0,a.t)([gH,"thu"])},{value:"friday",label:(0,a.t)([gH,"fri"])},{value:"saturday",label:(0,a.t)([gH,"sat"])},{value:"sunday",label:(0,a.t)([gH,"sun"])}];var _H={daily:"every_day_at_until",weekly:"every_week_on_until",monthly:"every_month_on_until",yearly:"every_year_on_until"},jH={daily:"every_day_at",weekly:"every_week_on",monthly:"every_month_on",yearly:"every_year_on"},wH=function(e){var t=e.data,r=e.onBack,n=e.onCancel,i=e.onPublish,o="true"==(null===t||void 0===t?void 0:t.do_not_skip_tasks)?(0,zo.t)("settings.workflows.rerun_modal.all_members"):(0,zo.t)("settings.workflows.rerun_modal.only_new_members"),a=[{message:function(){var e=t.ends_on,r=t.frequency,n=t.first_run_at,i=t.last_run_at,o=t.days_of_week,a=("on"===e?_H:jH)[r];(0,sl.Z)(a,"Message by frequency should be selected.");var s=null;if("weekly"===r){var l=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),c=o.map((function(e){var t,r=null===(t=xH.find((function(t){return t.value===e})))||void 0===t?void 0:t.label;return(0,fn.capitalize)(r)}));s=l.format(c)}return(0,zo.t)(["settings.workflows.recurring_schedule_modal",a],{start_time_at:(0,Xe.wc)({dateTime:new Date(n),format:"date_time_with_short_timezone"}),end_time_at:(0,Xe.wc)({dateTime:new Date(i),format:"long_date"}),day_of_month:n?(0,$s.default)(new Date(n),"do"):null,repeat_days:s,recurring_time:n?(0,Xe.wc)({dateTime:new Date(n),format:"short_month_and_date"}):null})}(),icon:"16-clock"},{message:o,icon:"16-members"}];return(0,c.jsxs)(ie.u_.Content,{size:"md",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",className:"text-center",children:(0,zo.t)("settings.workflows.confirm_modal.schedule_summary")}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:n})}),(0,fn.isFunction)(r)&&(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,c.jsx)(ie.u_.BackButton,{onClick:r})})]}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-5 pt-5",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,zo.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,c.jsx)("ul",{className:"flex list-none flex-col gap-y-4",children:a.map((function(e){var t=e.message,r=e.icon;return(0,c.jsxs)("li",{className:"text-default flex items-center gap-x-2",children:[(0,c.jsx)(bt.JO,{type:r,size:16,className:"mt-1 !h-4 !w-4 shrink-0 !self-start"}),(0,c.jsx)(l.ZT.BodySm,{weight:"font-medium",children:t})]},t)}))})]})}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)(l.zx,{variant:"circle",onClick:i,full:!0,large:!0,children:(0,zo.t)("settings.workflows.confirm_modal.schedule")})})]})};function OH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OH(Object(r),!0).forEach((function(t){SH(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OH(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=e.i18n,r=e.isMessageVisible,n=e.variables,i=void 0===n?{}:n,o=(0,pr.Gc)().watch,s=o("first_run_at"),u=o("last_run_at"),d=o("ends_on"),f=null!==r&&void 0!==r?r:!!s&&!("on"===d&&!u);return(0,c.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,c.jsx)(vH,{}),f&&(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)(t,PH({start_time_at:(0,Xe.wc)({dateTime:new Date(s),format:"date_time_with_short_timezone"}),end_time_at:(0,Xe.wc)({dateTime:new Date(u),format:"long_date"})},i))})]})}var CH=function(e,t){return"on"===(0,(0,pr.Gc)().watch)("ends_on")?e:t};var NH={daily:function(){var e=CH("every_day_at_until","every_day_at");return(0,c.jsx)(kH,{i18n:["settings.workflows.recurring_schedule_modal",e]})},weekly:function(){var e=(0,pr.Gc)().watch,t=e("first_run_at"),r=e("last_run_at"),i=e("days_of_week"),o=e("ends_on"),s="on"===o?"every_week_on_until":"every_week_on",u=(0,n.useMemo)((function(){if(null===i||void 0===i||!i.length)return"";var e=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),t=i.map((function(e){var t,r=null===(t=xH.find((function(t){return t.value===e})))||void 0===t?void 0:t.label;return(0,fn.capitalize)(r)}));return e.format(t)}),[i]);return(0,c.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)(iH,{days:xH}),(0,c.jsx)(vH,{})]}),!!t&&!!i.length&&!("on"===o&&!r)&&(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)([gH,s],{start_time_at:(0,Xe.wc)({dateTime:new Date(t),format:"date_time_with_short_timezone"}),end_time_at:(0,Xe.wc)({dateTime:new Date(r),format:"long_date"}),repeat_days:u})})]})},monthly:function(){var e=(0,(0,pr.Gc)().watch)("first_run_at"),t=CH("every_month_on_until","every_month_on");return(0,c.jsx)(kH,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{day_of_month:e?(0,$s.default)(new Date(e),"do"):null}})},yearly:function(){var e=(0,(0,pr.Gc)().watch)("first_run_at"),t=CH("every_year_on_until","every_year_on");return(0,c.jsx)(kH,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{recurring_time:e?(0,Xe.wc)({dateTime:new Date(e),format:"short_month_and_date"}):null}})}};function TH(){var e=(0,(0,pr.Gc)().watch)("frequency"),t=NH[e];return(0,c.jsx)(t,{})}var AH=[{value:"daily",label:(0,a.t)("settings.workflows.recurring_schedule_modal.every_day")},{value:"weekly",label:(0,a.t)("settings.workflows.recurring_schedule_modal.every_week")},{value:"monthly",label:(0,a.t)("settings.workflows.recurring_schedule_modal.every_month")},{value:"yearly",label:(0,a.t)("settings.workflows.recurring_schedule_modal.every_year")}];function EH(){var e=(0,pr.Gc)().watch,t=e("frequency"),r=e("first_run_at"),i=e("last_run_at"),o=e("days_of_week"),s=e("ends_on"),u=(0,n.useMemo)((function(){return!!t&&(!("weekly"===t&&!o.length)&&(!("on"===s&&!i)&&Boolean(r)))}),[t,r,i,s,o]);return(0,c.jsxs)("div",{className:"flex flex-col gap-y-10",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(l.l0.Item,{name:"frequency",label:(0,a.t)("settings.workflows.recurring_schedule_modal.frequency"),hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(oM.N,{name:"frequency",label:null,options:AH})}),(0,c.jsx)(TH,{})]}),(0,c.jsx)(l.zx,{type:"submit",full:!0,large:!0,variant:"circle",disabled:!u,children:(0,a.t)("continue")})]})}var IH=function(e){var t=e.schedule,r=e.formState,i=e.onSubmit,o=e.onCancel,s=t.isReschedule,u=(0,n.useMemo)((function(){return Kp.Ry().shape({first_run_at:Kp.Vo((function(){return null!==t&&void 0!==t&&t.has_run_but_not_completed?Kp.hT().required():Kp.hT().required().min(new Date,(0,a.t)(["settings.workflows.one_time_schedule_modal","past_error"],{currentDateTime:(0,Xe.wc)({dateTime:new Date,format:"date_time_with_short_timezone"})}))}))})}),[null===t||void 0===t?void 0:t.has_run_but_not_completed]);return(0,c.jsxs)(ie.u_.Content,{onClose:o,children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{className:"text-center",children:(0,a.t)("settings.workflows.recurring_schedule_modal.title")}),(0,c.jsx)(ie.u_.CloseButton,{onClick:o})]}),(0,c.jsx)(ie.u_.Body,{className:"pb-6",children:(0,c.jsx)(l.l0,{defaultValues:s?{frequency:"weekly",days_of_week:[],ends_on:"never"}:r||{frequency:(null===t||void 0===t?void 0:t.frequency)||"weekly",days_of_week:(null===t||void 0===t?void 0:t.days_of_week)||[],ends_on:null!==t&&void 0!==t&&t.last_run_at?"on":"never",first_run_at:null===t||void 0===t?void 0:t.first_run_at,last_run_at:null===t||void 0===t?void 0:t.last_run_at,has_schedule_run_before:null===t||void 0===t?void 0:t.has_run_but_not_completed},onSubmit:i,validationSchema:u,children:(0,c.jsx)(EH,{})})})]})};function DH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function LH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DH(Object(r),!0).forEach((function(t){MH(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DH(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function MH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return FH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FH(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BH(e){var t,r,i,o=e.workflowId,a=e.onCancel,s=e.schedule,u=e.onPublish,d=e.isLoading,m=(0,l.pm)(),p=(0,f.useQueryClient)(),h=(0,pr.Gc)(),b=s.id,y=s.isReschedule,v=RH((0,n.useState)(!1),2),g=v[0],x=v[1],_=RH((0,n.useState)(null),2),j=_[0],w=_[1],O=RH((0,n.useState)(null),2),P=O[0],S=O[1],k=RH((0,fr.k)(!1),2),C=k[0],N=k[1],T=(0,f.useMutation)((function(e){return function(e,t){var r=t.last_run_at?(0,Xs.default)(new Date(t.last_run_at)).toISOString():null,n=new Date(t.first_run_at).toISOString(),i=Intl.DateTimeFormat().resolvedOptions().timeZone,o=t.frequency,a=t.days_of_week,s=t.do_not_skip_tasks;return b?y?vn.nH.reschedule({workflowId:e,id:b,body:{last_run_at:r,first_run_at:n,frequency:o,days_of_week:a,schedule_type:"recurring",do_not_skip_tasks:s,tz:i}}):vn.nH.updateRecurringSchedule({workflowId:e,id:b,body:{last_run_at:r,first_run_at:n,frequency:o,days_of_week:a,do_not_skip_tasks:s,tz:i}}):vn.nH.createRecurringSchedule({workflowId:e,body:{last_run_at:r,first_run_at:n,frequency:o,days_of_week:a,do_not_skip_tasks:s,tz:i}})}(o,e)}),{onSuccess:function(e){N(),h.setValue("schedule",e),p.invalidateQueries(["workflows",o])},onError:function(e){"message"in e&&m.error(null===e||void 0===e?void 0:e.message)}}).mutate;return d?(0,c.jsx)(ie.u_.Content,{children:(0,c.jsx)(ie.u_.Body,{className:"w-full !px-10 !py-16",children:(0,c.jsx)(DI.u,{title:(0,zo.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,zo.t)("settings.workflows.we_are_preparing")})})}):C&&P&&j?(0,c.jsx)(wH,{onCancel:a,onBack:N,onPublish:u,data:LH(LH({},j),P)}):g&&j?(0,c.jsx)(MZ,{doNotSkipTasks:null!==(t=null!==(r=null===P||void 0===P?void 0:P.do_not_skip_tasks)&&void 0!==r?r:null===(i=s.do_not_skip_tasks)||void 0===i?void 0:i.toString())&&void 0!==t?t:"false",onCancel:a,onSubmit:function(e){S(e),(0,sl.Z)(j,"formData should be defined on rerun submit"),T(LH(LH({},j),e))},onBack:):(0,c.jsx)(IH,{schedule:s,formState:j,onCancel:a,onSubmit:)}var UH=function(e){var t=e.onCancel,r=e.onPublish,n=e.rerunParams,i=e.onBack,o=ri(),s=o.isBulkAction,l=o.isScheduled,u=CZ({isBulkAction:s,isScheduled:l,isRerun:!0,rerunParams:n}),d=u.title,f=u.body;return(0,c.jsxs)(ie.u_.Content,{size:"md",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",className:"text-center",children:d}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:t})}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,c.jsx)(ie.u_.BackButton,{onClick:i})})]}),f,(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)($e.z,{variant:"danger",onClick:r,full:!0,large:!0,children:(0,a.t)("settings.workflows.confirm_modal.confirm_and_run")})})]})},zH="settings.workflows.rerun_modal",VH=function(e){var t=e.onCancel;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{size:"md",className:"text-center",children:(0,a.t)([zH,"title"])}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:t})})]}),(0,c.jsx)(LZ,{}),(0,c.jsx)(ie.u_.Footer,{children:(0,c.jsx)($e.z,{variant:"circle",type:"submit",full:!0,large:!0,children:(0,a.t)([zH,"continue"])})})]})};function ZH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function HH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZH(Object(r),!0).forEach((function(t){qH(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZH(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WH(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var QH=function(e){var t=e.hasRuns,r=e.onPublish,i=e.onCancel,o=e.additionalRerunParams,a=GH((0,n.useState)(null),2),s=a[0],u=a[1],d=GH((0,fr.k)(!1===t),2),f=d[0],m=d[1],p=Mi({onError:fn.noop},HH(HH({},s),o)),h=p.mutateAsync;return p.isLoading?(0,c.jsx)(ie.u_.Content,{children:(0,c.jsx)(ie.u_.Body,{className:"w-full !px-10 !py-16",children:(0,c.jsx)(DI.u,{title:(0,zo.t)("settings.workflows.rerunning_your_workflow"),subtitle:(0,zo.t)("settings.workflows.we_are_preparing")})})}):f?(0,c.jsx)(UH,{rerunParams:s,onBack:m,onCancel:i,onPublish:function(){return r(h)}}):(0,c.jsx)(ie.u_.Content,{size:"md",children:(0,c.jsx)(l.l0,{defaultValues:{do_not_skip_tasks:(null===s||void 0===s?void 0:s.do_not_skip_tasks)||"false"},onSubmit:children:(0,c.jsx)(VH,{onCancel:i})})})};function KH(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function JH(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){KH(o,n,i,a,s,"next",e)}function s(e){KH(o,n,i,a,s,"throw",e)}a(void 0)}))}}function $H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return YH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YH(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var XH="dismissed",eq="error",tq="closed_after_success",rq=function(e){var t=e.isRerun,r=void 0!==t&&t,i=(0,ne.yT)(),o=ri(),a=o.saveWorkflowName,s=o.hasName,u=o.placeholderName,d=o.isBulkAction,f=o.isScheduled,m=o.schedule,p=o.hasRuns,h=o.id,b=$H((0,n.useState)(!(r||f)),2),y=b[0],g=b[1],x=mi({onError:fn.noop}),_=x.mutateAsync,j=x.isLoading,w=(0,v.wh)().currentCommunity.current_plan_tier,O=(0,xu.w)(),P=(0,l.pm)(),S=CZ({isBulkAction:d,isRerun:r}).successButtonLabel,k=C=N=function(){var e=JH(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:i.resolve(tq),e.next=16;break;case 6:if(e.prev=6,e.t0=e.catch(0),!uZ(e.t0)){e.next=14;break}return i.hide(),e.next=12,r=e.t0,O.show({planTier:(0,$P.gq)(w),subheading:r.body.message,onSuccess:C,successButtonLabel:S,usedForWorkflows:!0,showPlanDetails:!0});case 12:e.next=15;break;case 14:P.error(e.t0.message);case 15:i.resolve(eq);case 16:return e.prev=16,i.hide(),e.finish(16);case 19:case"end":return e.stop()}var r}),e,null,[[0,6,16,19]])})));return function(t){return e.apply(this,arguments)}}();return(0,c.jsxs)(ie.u_,{isOpen:i.visible,onClose:k,children:[(0,c.jsx)(ie.u_.Overlay,{}),y?(0,c.jsx)(NZ,{isLoading:j,onPublish:function(){return N(JH(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return e.next=3,a(u);case 3:return e.next=5,_();case 5:case"end":return e.stop()}}),e)}))))},onCancel:k,setIsConfirmContent:g}):f?function(){switch(null===m||void 0===m?void 0:m.schedule_type){case _L:return(0,c.jsx)(KZ,{workflowId:h,setIsConfirmContent:g,onCancel:k,schedule:m,hasRuns:p});case jL:return(0,c.jsx)(BH,{workflowId:h,onCancel:k,schedule:m,isLoading:j,onPublish:function(){return N(JH(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return e.next=3,a(u);case 3:return e.next=5,_();case 5:case"end":return e.stop()}}),e)}))))}});case"run_now":return(0,c.jsx)(QH,{hasRuns:p,onCancel:k,onPublish:N,additionalRerunParams:{schedule_run_now:!0}})}}():r?(0,c.jsx)(QH,{onPublish:N,onCancel:k}):void 0]})},nq=function(e){var t=e.isRerun;return(0,ne.yT)(function(e){var t=e.isRerun;return ne.uc.create((function(e){var r=e.workflow;return(0,c.jsx)(bZ,{workflow:r,children:(0,c.jsx)(rq,{isRerun:t})})}))}({isRerun:t}))};function iq(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var oq=function(e){var t=e.isRerun,r=(0,dr.k6)(),n=nq({isRerun:t}),i=(0,f.useQueryClient)(),o=(0,l.pm)(),s=(0,pr.Gc)(),c=s.handleSubmit,u=s.getValues,d=function(){var e,t=(e=se().mark((function e(){var t,o,a,s,l,c,d,f=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,n.show({workflow:u()});case 3:if((o=e.sent)!==XH&&o!==eq){e.next=6;break}return e.abrupt("return");case 6:if(a=t.id,s=t.workflow_type,l=t.schedule,c=s===vL,d="run_now"===(null===l||void 0===l?void 0:l.schedule_type),i.removeQueries(["workflows",a]),!c&&!d){e.next=13;break}return r.push(S.o0.runs({workflowId:a})),e.abrupt("return");case 13:r.push(S.o0.view({workflowId:a}));case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){iq(o,n,i,a,s,"next",e)}function s(e){iq(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return{submitWorkflow:c(d,(function(){o.error((0,a.t)("settings.workflows.form.errors.fill_all_required_fields"))}))}},aq=(0,n.forwardRef)((function(e,t){var r=e.children,n=e.isRerun,i=oq({isRerun:n}).submitWorkflow;return(0,c.jsx)("form",{ref:t,className:"flex h-full flex-col",onSubmit:i,children:r})}));aq.displayName="Form";var sq=function(e){var t=e.workflow,r=void 0===t?{}:t,n=e.formRef,i=e.children,o=e.isRerun;return(0,c.jsx)(bZ,{workflow:r,children:(0,c.jsx)(aq,{ref:n,isRerun:o,children:i})})},lq=function(e){var t=e.workflowId,r=e.hideRerunModal,i=(0,n.useRef)(null),o=(0,f.useQuery)(["workflow-detail",t],(function(){return vn.nH.fetch({id:t})}),{onSuccess:function(){(0,fn.defer)((function(){i.current&&i.current.dispatchEvent(new Event("submit",{cancelable:!0}))}))}}),a=o.data,s=o.isLoading;return(0,n.useEffect)((,[r]),s?null:(0,c.jsx)(sq,{formRef:i,workflow:a,isRerun:!0})},cq=function(e){var t=e.showRerunConfirmation;return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:t,children:(0,a.t)("settings.workflows.table.actions.rerun")})},uq=function(e){var t=e.workflowId,r=(0,dr.k6)();return(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:function(){r.push({pathname:S.o0.view({workflowId:t}),state:{from:{path:r.location.pathname,query:r.location.search}}})},children:(0,a.t)(["settings.workflows.table.actions","view"])})},dq=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,ne.yT)();return(0,c.jsx)(Gr.cV,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",confirmText:(0,a.t)("settings.workflows.table.actions.archive"),title:(0,a.t)("settings.workflows.table.actions.archive_confirm_active_workflow_title"),onConfirm:r,disabled:n,children:(0,a.t)("settings.workflows.table.actions.archive_confirm_active_workflow_description",{name:t||(0,a.t)("settings.workflows.table.untitled_workflow")})})},fq=ne.uc.create((function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,c.jsx)(dq,{name:t,onConfirm:r,disabled:n})})),mq=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,ne.yT)(),o=(0,a.t)("settings.workflows.table.actions.archive_confirm_description",{name:t||(0,a.t)("settings.workflows.table.untitled_workflow")}),s=(0,c.jsx)(pP.w,{content:o});return(0,c.jsx)(Gr.Ww,{isOpen:i.visible,onClose:i.hide,actionVariant:"danger",actionText:(0,a.t)("settings.workflows.table.actions.archive"),title:(0,a.t)("settings.workflows.table.actions.archive_confirm_title"),onAction:r,disabled:n,children:s})},pq=ne.uc.create((),hq=function(e){var t=e.onConfirm,r=e.disabled,n="settings.workflows.table.actions.cancel",i=(0,ne.yT)();return(0,c.jsx)(Gr.Ww,{isOpen:i.visible,onClose:i.hide,actionVariant:"danger",actionText:(0,a.t)("".concat(n,".title")),title:(0,a.t)("".concat(n,".confirm_title")),onAction:t,disabled:r,children:(0,a.t)("".concat(n,".description"))})},bq=ne.uc.create((function(e){var t=e.onConfirm,r=e.disabled;return(0,c.jsx)(hq,{onConfirm:t,disabled:r})})),yq=function(e){var t=e.onConfirm,r=e.disabled,n=(0,ne.yT)();return(0,c.jsx)(Gr.Ww,{isOpen:n.visible,onClose:n.hide,actionVariant:"danger",actionText:(0,a.t)("settings.workflows.table.actions.delete"),title:(0,a.t)("settings.workflows.table.actions.delete_confirm_title"),onAction:t,disabled:r,children:(0,a.t)("settings.workflows.table.actions.delete_confirm_description")})},vq=ne.uc.create((function(e){var t=e.onConfirm,r=e.disabled;return(0,c.jsx)(yq,{onConfirm:t,disabled:r})})),gq="settings.workflows.table.actions",xq=function(e){var t=e.workflowId,r=e.type,n=e.status,i=e.name,o=e.refetch,s=(0,dr.k6)(),c=(0,l.pm)(),u=c.success,d=c.error,m=(0,f.useQueryClient)(),p=(0,rl.t)(),h=(0,ne.yT)(vq),b=(0,ne.yT)(bq),y=(0,ne.yT)(pq),g=(0,ne.yT)(fq),x=(0,xu.w)(),_=(0,v.wh)().currentCommunity.current_plan_tier,j=n===fL?g:y,w=(0,f.useMutation)((function(){return vn.nH.createRun({workflowId:t})}),{onSuccess:function(){u((0,a.t)([gq,"run_in_progress"]),{messageComplete:(0,a.t)([gq,"run_success"]),onComplete:function(){return s.push({pathname:S.o0.history(),search:"workflow_type=bulk_action"})}})},onError:function(e){uZ(e)?O(e):d(e.message)}}).mutate,O=function(e){return x.show({planTier:(0,$P.gq)(_),subheading:e.body.message,onSuccess:function(){x.hide(),w()},successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.run_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0})},P=(0,f.useMutation)((function(){return vn.nH.deleteWorkflow({id:t})}),{onSuccess:function(){h.hide(),u((0,a.t)([gq,"deleting_workflow"]),{messageComplete:(0,a.t)([gq,"deletion_successful"])}),o()},onError:function(e){return d(e.message)}}),k=P.mutate,C=P.isLoading,N=(0,f.useMutation)((function(){return vn.nH.inactivate({id:t})}),{onSuccess:function(){b.hide(),u((0,a.t)([gq,"cancel","cancelling_schedule"]),{messageComplete:(0,a.t)([gq,"cancel","cancellation_successful"])}),o()},onError:function(e){return d(e.message)}}),T=N.mutate,A=N.isLoading,E=(0,f.useMutation)((function(){return vn.nH.archiveWorkflow({id:t})}),{onSuccess:function(){j.hide(),u((0,a.t)([gq,"archiving_workflow"]),{messageComplete:(0,a.t)([gq,"archive_successful"]),onComplete:),o()},onError:function(e){return d(e.message)}}),I=E.mutate,D=E.isLoading,L=p.page,M=p.status,R=(0,f.useMutation)((function(){return vn.nH.duplicateWorkflow({id:t})}),{onSuccess:function(){u((0,a.t)([gq,"duplicating_workflow"]),{messageComplete:(0,a.t)([gq,"duplication_successful"])}),M===hL||1!==Number(L)?s.push({pathname:S.o0.index(),search:"workflow_type=".concat(r,"&page=1")}):o()},onError:function(e){return d(e.message)}}).mutate;return{onDelete:k,onDuplicate:R,handleDeleteWithConfirmation:handleArchiveWithConfirmation:function(){j.show({name:i,disabled:D,onConfirm:I})},handleCancelWithConfirmation:};function _q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wq=function(e){var t=e.workflow,r=e.refetch,i=t.id,o=t.name,a=t.workflow_type,s=t.status,l=t.steps,u=void 0===l?[]:l,d=xq({workflowId:i,name:o,type:a,status:s,refetch:r}),f=d.onDuplicate,m=d.handleArchiveWithConfirmation,p=d.handleDeleteWithConfirmation,h=_q((0,n.useState)(!1),2),b=h[0],y=h[1];if(s===hL)return(0,c.jsx)("div",{className:"min-w-[2rem]",children:(0,c.jsx)(Q.w.Actions,{children:(0,c.jsx)(lZ,{onClick:f})})});var v=a===vL,g=s===pL,x=s===bL,_=u.length>0,j=v&&!x&&_&&!g;return(0,c.jsxs)("div",{className:"min-w-[2rem]",children:[(0,c.jsxs)(Q.w.Actions,{children:[(0,c.jsx)(uq,{workflowId:i}),j&&(0,c.jsx)(cq,{showRerunConfirmation:function(){y(!0)}}),g&&(0,c.jsx)(cZ,{workflowId:i}),!g&&(0,c.jsx)(aZ,{onClick:m}),(0,c.jsx)(lZ,{onClick:f}),g&&(0,c.jsx)(sZ,{onClick:p})]}),b&&(0,c.jsx)(lq,{workflowId:i,hideRerunModal:function(){return y(!1)}})]})},Oq=function(e){var t=e.date,r=e.shouldIncludeTime,n="MMM dd, yyyy '".concat((0,a.t)("time_format.at"),"' HH:mm");return(0,c.jsx)("span",{className:"break-normal",children:r?(0,Sa.p6)(t,n):(0,Sa.p6)(t)})},Pq=function(e){var t=e.children;return(0,c.jsx)(y.Z.LabelSm,{weight:"medium",children:(0,c.jsx)("span",{className:"break-normal",children:t})})},Sq="md:w-1/2 xl:w-1/3",kq="hidden xl:table-cell min-w-[11rem]",Cq="hidden md:table-cell min-w-[9rem]",Nq="min-w-[9rem]",Tq="min-w-[8rem]",Aq="min-w-[8rem]",Eq="hidden 2xl:table-cell min-w-[8rem]",Iq="hidden 2xl:table-cell min-w-[12rem]",Dq="hidden xl:table-cell min-w-[6rem]",Lq="2xl:max-w-auto 2xl:min-w-[6rem]",Mq="hidden 2xl:table-cell max-w-[12rem]",Rq="settings.workflows.table",Fq=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,a.t)([Rq,"name"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)([Rq,"untitled_workflow"])})}},{accessorKey:"workflow_type",header:(0,a.t)([Rq,"type.title"]),thClassName:Tq,cellClassName:Tq,cell:function(e){return(0,c.jsx)("span",{className:"break-normal",children:(0,a.t)([Rq,"type",e.getValue()||"unknown"])})}},{accessorKey:"steps",header:(0,a.t)([Rq,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){return(0,c.jsx)(qz,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,a.t)([Rq,"created_by"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,a.t)([Rq,"created_on"]),thClassName:Eq,cellClassName:Eq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue()})}},{accessorKey:"last_run_at",header:(0,a.t)([Rq,"last_run"]),thClassName:Iq,cellClassName:Iq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,c.jsx)(wq,{workflow:r.original,refetch:t})}}]},Bq=function(){return(0,c.jsx)(tV,{columns:Fq,workflowType:xL,status:hL})};function Uq(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function zq(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Uq(o,n,i,a,s,"next",e)}function s(e){Uq(o,n,i,a,s,"throw",e)}a(void 0)}))}}var Vq="settings.workflows.view.header",Zq=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.workflowId,i=r.isActive,o=(0,f.useQueryClient)(),s=(0,l.pm)(),c=s.success,u=s.error,d=function(){var e=zq(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.invalidateQueries(["workflows",n]);case 2:return e.next=4,o.invalidateQueries(["all-workflows"]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=(0,v.wh)().currentCommunity.current_plan_tier,p=(0,xu.w)(),h=(0,f.useMutation)((function(){return(0,Xe.Cp)(vn.nH.activate({id:n}))}),{onSuccess:(e=zq(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:c((0,a.t)([Vq,"workflow_activated"]));case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),onError:function(e){return uZ(e)?function(e){p.show({planTier:(0,$P.gq)(m),subheading:e.body.message,onSuccess:successButtonLabel:(0,a.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0})}(e):u((0,a.t)([Vq,"workflow_activation_error"]))}}),b=h.mutate,y=h.isLoading,g=(0,f.useMutation)((function(){return vn.nH.inactivate({id:n})}),{onSuccess:(t=zq(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:c((0,a.t)([Vq,"workflow_deactivated"]));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onError:function(){return u((0,a.t)([Vq,"workflow_deactivation_error"]))}}),x=g.mutate,_=g.isLoading;return{onActivateWorkflow:b,onDeactivateWorkflow:x,onChangeActiveStatus:function(){i?x():b()},isLoading:y||_}},Hq="settings.workflows.view.header",qq=function(e){var t=e.workflow,r=t.id,n=t.status,i=n===fL,o=n===pL,s=Zq({workflowId:r,isActive:i}),u=s.onChangeActiveStatus,d=s.isLoading;return(0,c.jsx)(l.Jf,{isChecked:i,checkedLabel:(0,a.t)([Hq,"on_value"]),uncheckedLabel:(0,a.t)([Hq,"off_value"]),tooltipCheckedLabel:(0,a.t)([Hq,"on_tooltip"]),tooltipUncheckedLabel:(0,a.t)([Hq,o?"disabled_tooltip":"off_tooltip"]),isLoading:d,isDisabled:o,onChange:u,containerClassName:"mx-auto"})},Gq="settings.workflows.table",Wq=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,a.t)([Gq,"name"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)([Gq,"untitled_workflow"])})}},{accessorKey:"steps",header:(0,a.t)([Gq,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){return(0,c.jsx)(qz,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,a.t)([Gq,"created_by"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,a.t)([Gq,"created_on"]),thClassName:Eq,cellClassName:Eq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue()})}},{accessorKey:"last_run_at",header:(0,a.t)([Gq,"last_run"]),thClassName:Iq,cellClassName:Iq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,a.t)([Gq,"total_runs"]),thClassName:Dq,thInnerClassName:"justify-end",cellClassName:J()("text-right",Dq),cell:function(e){return(0,c.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{header:(0,a.t)([Gq,"active"]),thClassName:Lq,thInnerClassName:"justify-center",cellClassName:J()("!py-4 cursor-default",Lq),onClick:function(e){return e.event.stopPropagation()},cell:,{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,c.jsx)(wq,{workflow:r.original,refetch:t})}}]},Qq=function(){return(0,c.jsx)(tV,{columns:Wq,workflowType:yL,status:dL})},Kq=function(e){var t=e.status;return(0,c.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,c.jsx)("span",{className:"break-normal capitalize",children:(0,a.t)(["settings.workflows.table.status",t],{defaultValue:t||"\u2500"})})})},Jq="settings.workflows.table",$q=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,a.t)([Jq,"name"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)([Jq,"untitled_workflow"])})}},{accessorKey:"status",header:(0,a.t)([Jq,"status.title"]),thClassName:Nq,cellClassName:Nq,cell:function(e){return(0,c.jsx)(Kq,{status:e.getValue()})}},{accessorKey:"steps",header:(0,a.t)([Jq,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){return(0,c.jsx)(qz,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,a.t)([Jq,"created_by"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,a.t)([Jq,"created_on"]),thClassName:Eq,cellClassName:Eq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue()})}},{accessorKey:"last_run_at",header:(0,a.t)([Jq,"last_run"]),thClassName:Iq,cellClassName:Iq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,a.t)([Jq,"total_runs"]),thClassName:Dq,thInnerClassName:"justify-end",cellClassName:J()("text-right",Dq),cell:function(e){return(0,c.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,c.jsx)(wq,{workflow:r.original,refetch:t})}}]},Yq=function(){return(0,c.jsx)(tV,{columns:$q,workflowType:vL,status:dL})};function Xq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eG=function(e){var t,r=e.scheduleType,n="settings.workflows.schedule_types",i=(Xq(t={},_L,(0,a.t)("".concat(n,".one_time"))),Xq(t,jL,(0,a.t)("".concat(n,".recurring"))),t);return(0,c.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,c.jsx)("span",{className:"break-normal",children:i[r]})})},tG="settings.workflows.table",rG=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,a.t)([tG,"name"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)([tG,"untitled_workflow"])})}},{accessorKey:"steps",header:(0,a.t)([tG,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){return(0,c.jsx)(qz,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"schedule_type",header:(0,a.t)([tG,"schedule_type"]),thClassName:Aq,cellClassName:Aq,cell:function(e){return(0,c.jsx)(eG,{scheduleType:e.getValue()})}},{accessorKey:"created_by_community_member_id",header:(0,a.t)([tG,"created_by"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,a.t)([tG,"created_on"]),thClassName:Eq,cellClassName:Eq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue()})}},{accessorKey:"last_run_at",header:(0,a.t)([tG,"last_run"]),thClassName:Iq,cellClassName:Iq,cell:function(e){return(0,c.jsx)(Oq,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,a.t)([tG,"total_runs"]),thClassName:Dq,thInnerClassName:"justify-end",cellClassName:J()("text-right",Dq),cell:function(e){return(0,c.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,c.jsx)(wq,{workflow:r.original,refetch:t})}}]},nG=iG=r(84860);function oG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oG(Object(r),!0).forEach((function(t){sG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lG=function(e){var t=e.filters,r=void 0===t?{}:t;return vn.nH.list({params:aG({per_page:1},r)})},cG=function uG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uG(Object(r),!0).forEach((function(t){fG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hG="workflow_type",bG="status",yG=function(){var e,t,r=(0,iG.K)(),i=(0,rl.t)(),o=(0,dr.k6)(),s=mG((0,n.useState)(),2),l=s[0],c=s[1],u=mG((0,n.useState)(0),2),d=u[0],m=u[1],p=(0,f.useQuery)("totalWorkflows",cG),h=p.data,b=(h=void 0===h?{}:h).total_count,y=p.isLoading,v=(0,f.useQuery)("totalArchivedWorkflows",(),g=v.data,x=(g=void 0===g?{}:g).total_count,_=v.isLoading,j=(0,f.useQuery)("totalAutomationWorkflows",(function(){return lG({filters:{workflow_type:yL,status:dL}})})).data,w=(j=void 0===j?{}:j).total_count,O=(0,f.useQuery)("totalBulkActionWorkflows",(function(){return lG({filters:{workflow_type:vL,status:dL}})})).data,P=(O=void 0===O?{}:O).total_count,k=(0,f.useQuery)("totalScheduledWorkflows",().data,C=(k=void 0===k?{}:k).total_count,N=(fG(e={},wL,w),fG(e,OL,P),fG(e,PL,C),fG(e,SL,x),e),T=[wL,OL,PL,SL],A=(fG(t={},wL,(0,a.t)("settings.workflows.table.type.automations")),fG(t,OL,(0,a.t)("settings.workflows.table.type.bulk_actions")),fG(t,PL,(0,a.t)("settings.workflows.table.type.scheduled")),fG(t,SL,(0,a.t)("settings.workflows.table.type.archived")),t),E=i.status,I=i.workflow_type;return(0,n.useEffect)((function(){if(!_){var e=x>0,t=E===hL&&e?SL:I||wL,r=T.findIndex((function(e){return e===t}));c(e),m(r)}}),[l,E,I,_,x]),{isWorkflowExecutionEnabled:r,hasArchivedWorkflows:l,isLoading:y||_,totalWorkflows:b,tabsCountersMap:N,selectedTabIndex:d,handleTabChange:function(e){m(e);var t=e===T.length-1,r=dG(dG({},t&&fG({},bG,hL)),!t&&fG({},hG,T[e]));o.push({search:(0,S.WB)(r)})},tabNames:T,tabLabels:A}},vG=function(){var e=yG(),t=e.isLoading,r=e.totalWorkflows,n=e.hasArchivedWorkflows,i=e.isWorkflowExecutionEnabled,o=e.tabsCountersMap,s=e.selectedTabIndex,u=e.handleTabChange,d=e.tabNames,f=e.tabLabels;return t||uL()(s)?(0,c.jsx)(l.aN,{}):t||0!==r&&i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(DL,{showBottomBorder:!1,title:(0,a.t)("settings.workflows.workflows")}),(0,c.jsx)("main",{children:(0,c.jsxs)(Uo.O.Group,{selectedIndex:s,onChange:u,className:"overflow-hidden",children:[(0,c.jsx)(Uo.O.List,{className:"bg-primary border-primary border-b px-6",children:d.map((function(e){return(0,c.jsxs)(Uo.O,{className:J()({hidden:e===SL&&!n}),children:[f[e],(0,c.jsx)(Uo.O.Counter,{children:o[e]})]},e)}))}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(Qq,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(Yq,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(nG,{})}),n&&(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(Bq,{})})]})]})})]}):(0,c.jsx)(QL,{})},gG=(0,n.createContext)({});gG.displayName="WorkflowsData";var xG=function(e){var t=e.children;return(0,c.jsx)(gG.Provider,{value:{},children:t})},_G=function(){return(0,c.jsx)(xG,{children:(0,c.jsx)(lL,{children:(0,c.jsx)(vG,{})})})},jG=function(e){var t=e.onClick;return(0,c.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,c.jsxs)("button",{type:"button",onClick:t,className:"ext-default hover:bg-secondary flex h-8 w-8 items-center justify-center rounded-full border-none text-xs transition-colors",children:[(0,c.jsx)("span",{className:"sr-only",children:(0,a.t)("back")}),(0,c.jsx)(bt.JO,{type:"20-arrow-left",size:20})]}),(0,c.jsx)("div",{className:"border-primary h-7 border-l"})]})};function wG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wG(Object(r),!0).forEach((function(t){PG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SG="settings.workflows.form.schedule_button",kG=function(e){var t=e.isDisabled,r=void 0!==t&&t,n=e.title,i=e.runNow,o=void 0!==i&&i,s=e.isReschedule,u=void 0!==s&&s,d=(0,pr.Gc)(),f=d.register,m=d.setValue,p=(0,d.getValues)("schedule_type");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(l.Lt,{button:(0,c.jsxs)(l.zx,{type:"submit",variant:"circle",disabled:r,"data-testid":"save-and-close-button",className:"flex items-center justify-center",children:[n,(0,c.jsx)(bt.JO,{type:"caret-down-bold",size:16,className:"ml-1"})]}),size:"extra_large",children:[o&&(0,c.jsxs)(l.Lt.ItemWithLink,{onClick:function(){m("schedule.isReschedule",u),m("schedule.schedule_type","run_now")},children:[(0,c.jsxs)(l.Lt.IconContainer,{children:[(0,c.jsx)(bt.JO,{type:"lightning",size:16}),(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([SG,"run_now.title"])})]}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([SG,"run_now.description"])})]}),(0,c.jsxs)(l.Lt.ItemWithLink,{onClick:function(){m("schedule.isReschedule",u||!!p&&p!==_L),m("schedule.schedule_type",_L)},children:[(0,c.jsxs)(l.Lt.IconContainer,{children:[(0,c.jsx)(bt.JO,{type:"16-clock",size:16,"aria-hidden":!0}),(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([SG,"one_time.title"])})]}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([SG,"one_time.description"])})]}),(0,c.jsxs)(l.Lt.ItemWithLink,{onClick:function(){m("schedule.isReschedule",u||!!p&&p!==jL),m("schedule.schedule_type",jL)},children:[(0,c.jsxs)(l.Lt.IconContainer,{children:[(0,c.jsx)(bt.JO,{type:"16-repeat",size:16,"aria-hidden":!0}),(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)([SG,"recurring.title"])})]}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)([SG,"recurring.description"])})]})]}),(0,c.jsx)("div",{className:"hidden",children:(0,c.jsx)("input",OG({type:"hidden"},f("schedule.schedule_type")))})]})},CG=["isEditing","onBlur"];function NG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NG(Object(r),!0).forEach((function(t){AG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function AG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EG(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var IG=function(e){var t=e.isEditing,r=e.onBlur,n=EG(e,CG),i=(0,pr.Gc)().register;return(0,c.jsx)("input",TG(TG({},n),{},{type:"text",className:J()("placeholder:text-light w-full min-w-[6rem] max-w-full border-0 bg-transparent p-0 text-xl font-semibold placeholder:opacity-100 focus:outline-none focus:ring-0",{hidden:!t})},i("name",{onBlur:r})))},DG=["isEditing","text"];function LG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LG(Object(r),!0).forEach((function(t){RG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FG(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var BG=function(e){var t=e.isEditing,r=e.text,n=FG(e,DG);return(0,c.jsx)("div",MG(MG({},n),{},{className:J()("flex h-7 min-w-0 flex-col",{hidden:t}),children:(0,c.jsx)("span",{className:J()("hover:border-dark focus:border-dark truncate border-b border-dashed border-transparent text-xl font-semibold"),children:r})}))};function UG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var VG=function(){var e=function(){var e=UG((0,n.useState)(!1),2),t=e[0],r=e[1],i=ri(),o=i.saveWorkflowName,a=i.name,s=i.placeholderName,l=(0,pr.Gc)().setFocus;return(0,n.useEffect)((,[t,l]),{name:a,placeholderName:s,isEditing:t,onClickLabelHandler:function(){r(!0)},onBlurHandler:}(),t=e.name,r=e.placeholderName,i=e.isEditing,o=e.onClickLabelHandler,a=e.onBlurHandler;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(BG,{isEditing:i,text:t||r,onClick:o}),(0,c.jsx)(IG,{isEditing:i,placeholder:r,onBlur:a})]})},ZG=function(e){var t=e.title,r=void 0===t?(0,a.t)("save_and_close"):t,n=e.isEdit,i=void 0!==n&&n,o=e.isScheduled,s=void 0!==o&&o,l=(0,dr.k6)(),u=xU("trigger").isCompleted,d=xU("audience").isCompleted,f=nz(),m=f.areAllActionsSaved,p=f.hasActions,h=ri().isDynamic,b=!p||!(h?u:d)||!m,y=s?(0,c.jsx)(kG,{isDisabled:b,title:r}):(0,c.jsx)($e.z,{type:"submit",variant:"circle",disabled:b,"data-testid":"save-and-close-button",children:r});return(0,c.jsx)(BT.x.Header,{children:(0,c.jsxs)("div",{className:"flex w-full flex-1 flex-row justify-between gap-4",children:[(0,c.jsxs)("div",{className:"flex w-full flex-row items-center gap-5 truncate",children:[(0,c.jsx)(jG,{onClick:function(){i?l.goBack():l.push(S.o0.select_type())}}),(0,c.jsx)(VG,{})]}),(0,c.jsx)("div",{className:"flex shrink-0 flex-row",children:y})]})})};function HG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qG="settings.workflows.view",GG=function(e){var t,r=e.workflowType,n=(HG(t={},yL,(0,a.t)([qG,"dynamic_workflow"])),HG(t,vL,(0,a.t)([qG,"bulk_action"])),HG(t,gL,(0,a.t)([qG,"scheduled"])),t)[r]||(0,a.t)([qG,"unknown"]);return(0,c.jsx)("div",{className:"mb-8 flex flex-col",children:(0,c.jsx)(y.Z.TitleLg,{color:"text-darkest !font-bold",children:n})})},WG=bV.reduce((function(e,t){var r=t.value,n=t.resource,i=t.formComponent;return e.set(r,{resource:n,formComponent:i}),e}),new Map),QG="trigger.trigger_type",KG=function(){var e=(0,pr.Gc)(),t=e.watch,r=e.clearErrors,n=e.setValue,i=t(QG),o={releasedEvents:(0,iM.Z)()?bV:bV.filter(()}.releasedEvents,s=(WG.get(i)||{}).formComponent;return(0,c.jsxs)("div",{className:"mb-9 flex flex-col gap-9",children:[(0,c.jsx)(oM.N,{name:QG,groupBy:function(e){return e.group},label:(0,a.t)("settings.workflows.form.choose_event"),labelClassName:"!mb-2 !text-sm",options:o,rules:{required:(0,a.t)("settings.workflows.form.errors.required")},onChange:function(e){var t;r("trigger"),n("trigger.resource_type",(null===(t=WG.get(e))||void 0===t?void 0:t.resource)||null),n("trigger.resource_id",null)}}),s&&(0,c.jsx)(s,{})]})};function JG(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var $G="trigger",YG=function(){var e=(0,GU.d)().onCloseItemAndOpenNext,t=(0,pr.Gc)(),r=t.watch,n=t.resetField,i=t.setError,o=t.trigger,s=(0,l.pm)(),c=(0,f.useQueryClient)(),u=r("id"),d=Zi({onError:function(e){i("trigger.trigger_type",{type:"server",message:e.message}),s.error(e.message)},onSuccess:function(t){n($G,{defaultValue:t}),e(),c.invalidateQueries(["workflows",u]),s.success((0,a.t)("settings.workflows.tooltip.updated"))}}),m=d.mutate,p=d.isLoading,h=function(){var e,t=(e=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o($G);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t=r($G),m(t);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){JG(o,n,i,a,s,"next",e)}function s(e){JG(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return{isSavingTrigger:p,saveTrigger:h}},XG=function(){var e,t=nz(),r=t.itemsIds,n=t.hasActions,i=t.addActionAtStart,o=(null===(e=r[0])||void 0===e?void 0:e.id)||"0",s=YG(),l=s.isSavingTrigger,u=s.saveTrigger,d=xU("trigger"),f=d.isCompleted,m=d.hasValue,p=d.hasError,h=d.statusMessage,b=(0,(0,pr.Gc)().watch)("trigger.trigger_type"),y=(0,a.t)(["settings.workflows","form.events",b,"title"],{defaultValue:(0,a.t)("settings.workflows.form.entry_rule")}),v=l||p||!m,g=l?(0,a.t)("settings.workflows.form.saving"):m?(0,a.t)("settings.workflows.form.continue"):(0,a.t)("settings.workflows.form.fill_all_fields_to_continue");return(0,c.jsxs)(EU,{id:o,title:y,description:(0,a.t)("settings.workflows.form.entry_rule"),onAddNewConnection:i,className:"m-auto",hasBottomConnection:n,hasError:p,hasSuccess:f,statusMessage:h,children:[(0,c.jsx)(KG,{}),(0,c.jsx)(oR,{disabled:v,onClick:u,children:g})]})},eW=function(){var e=nz().itemsIds,t=(0,pr.Gc)().watch;return(0,c.jsx)(BT.x.Body,{wrapperClassName:"max-w-7xl p-6",children:(0,c.jsxs)(IU,{items:e,children:[(0,c.jsx)("div",{className:"m-auto max-w-[45rem]",children:(0,c.jsx)(GG,{workflowType:t("workflow_type")})}),(0,c.jsx)(XG,{}),(0,c.jsx)(sz,{})]})})},tW=function(e){var t=e.workflow,r=void 0===t?{}:t,n=e.isEdit,i=void 0!==n&&n;return(0,c.jsxs)(sq,{workflow:r,children:[(0,c.jsx)(ZG,{title:(0,a.t)("settings.workflows.activate"),isEdit:i}),(0,c.jsx)(eW,{})]})},rW=function(e){var t=e.children,r=(0,dr.UO)().id,n=Ei({workflowId:r,enabled:!!r}),i=n.data,o=n.isLoading,s=n.isError,l=n.isFetching,u=n.error;if(!r)return null;if(o)return(0,c.jsx)(DI.u,{title:(0,a.t)("settings.workflows.preparing_your_workflow"),subtitle:(0,a.t)("settings.workflows.take_a_few_seconds")});if(s){var d=(0,a.t)("settings.workflows.there_was_an_error_loading_your_workflow");return 404===(null===u||void 0===u?void 0:u.status)&&(d=(0,a.t)("settings.workflows.workflow_not_found")),(0,c.jsx)("div",{className:"bg-primary flex h-full w-full flex-col items-center justify-center",children:(0,c.jsx)("div",{className:"flex h-full w-full max-w-xl flex-col items-center justify-center gap-4",children:(0,c.jsx)(y.Z.TitleXl,{children:d})})})}return t({workflow:i,isFetching:l})},nW=r(58533),iW=r(40284);function oW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return aW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aW(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sW=function(){var e=oW((0,n.useState)(""),2),t=e[0],r=e[1],i=jZ(t),o=i.members,s=i.fetchNextPage,l=i.hasNextPage,u=i.count;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"border-primary overflow-hidden rounded-lg border px-3 py-2",children:(0,c.jsx)(iW.h,{onSearch:r,placeholder:(0,a.t)("settings.workflows.form.search_people"),withIcon:!1})}),(0,c.jsx)(nW.Z,{next:s,height:"22rem",className:"my-4",hasMore:l,loader:(0,c.jsx)(W.m,{}),dataLength:u,children:(0,c.jsx)("div",{className:"flex w-full flex-col gap-5",children:o.map((function(e){var t=e.id,r=e.avatar_url,n=e.name;return(0,c.jsxs)("div",{className:"group flex h-8 items-center rounded-md",children:[(0,c.jsx)("div",{className:"mr-3",children:(0,c.jsx)(Pt.sJ,{src:r,name:n,size:"8"})}),(0,c.jsx)("div",{className:"truncate",children:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:n})})]},t)}))})})]})},lW=function(e){var t=e.isVisible,r=e.onCancel,n=jZ(),i=n.count,o=n.formattedCount;return(0,c.jsxs)(ie.u_,{title:(0,a.t)("settings.workflows.form.viewing_x_members",{count:i,formattedCount:o}),isOpen:t,onClose:r,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{size:"md",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{className:"text-center",children:(0,a.t)("settings.workflows.form.viewing_x_members",{count:i,formattedCount:o})}),(0,c.jsx)(ie.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,c.jsx)(ie.u_.CloseButton,{onClick:r})})]}),(0,c.jsx)(ie.u_.Body,{children:(0,c.jsx)(sW,{})})]})]})};function cW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return uW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uW(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dW=function(){var e,t,r,i=jZ(),o=i.count,s=i.formattedCount,u=i.isError,d=i.hasFilters,f=i.isLoading,m=(e=cW((0,n.useState)(!1),2),t=e[0],r=e[1],{isOpen:t,onOpen:function(){return r(!0)},onClose:function(){return r(!1)}}),p=m.isOpen,h=m.onOpen,b=m.onClose;if(u||!d)return null;var y=(0,a.t)("settings.workflows.members_match_these_rules",{count:o}),v=o>0?"".concat(s," ").concat(y):y;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"text-dark h-4",children:f?(0,c.jsx)(bt.JO,{type:"loader",size:16,className:"!h-4 !w-4"}):(0,c.jsxs)("button",{disabled:o<1,type:"button",onClick:h,className:J()("hover:bg-secondary text-default hover:border-dark flex flex-row gap-2 rounded border border-transparent px-1.5 py-1 transition-colors",{"cursor-pointer":o>0,"cursor-not-allowed":o<1}),children:[(0,c.jsx)(bt.JO,{type:"16-members",size:16,className:"!h-4 !w-4"}),(0,c.jsx)(l.ZT.LabelXs,{weight:"medium",children:v})]})}),(0,c.jsx)(lW,{isVisible:p,onCancel:b})]})},fW=r(88948),mW=r(35844),pW=r(85009),hW=r(26825),bW=r(88382),yW=r(85792);function vW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vW(Object(r),!0).forEach((function(t){xW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _W=r(53099).f.ActivityScoreFilter,jW=function(e){var t=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:t,name:"audience.filter_rules.filters.activity_score",render:function(t){var r=t.field;return(0,c.jsx)(_W,gW(gW({},e),{},{changeUrl:!1,value:r.value,onApply:r.onChange}))}})},wW=["name","onApply"];function OW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OW(Object(r),!0).forEach((function(t){SW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kW(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var CW=ia.f2.AvatarSet,NW=function(e){var t=e.name,r=e.onApply,n=kW(e,wW),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.is_avatar_set",render:function(e){var i=e.field;return(0,c.jsx)(CW,PW(PW({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},TW=["name","onApply"];function AW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function EW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AW(Object(r),!0).forEach((function(t){IW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function IW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DW(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var LW=ia.f2.BioFilter,MW=function(e){var t=e.name,r=e.onApply,n=DW(e,TW),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.bio",render:function(e){var i=e.field;return(0,c.jsx)(LW,EW(EW({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},RW=["name","onApply"];function FW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FW(Object(r),!0).forEach((function(t){UW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function UW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var VW=ia.f2.EventsFilter,ZW=function(e){var t=e.name,r=e.onApply,n=zW(e,RW),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.events",render:function(e){var i=e.field;return(0,c.jsx)(VW,BW(BW({},n),{},{changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},HW=["name","onApply"];function qW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function GW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qW(Object(r),!0).forEach((function(t){WW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function WW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QW(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var KW=ia.f2.HasPastDueSubscriptionFilter,JW=function(e){var t=e.name,r=e.onApply,n=QW(e,HW),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.has_past_due_subscription",render:function(e){var i=e.field;return(0,c.jsx)(KW,GW(GW({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},$W=["name","onApply"];function YW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function XW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YW(Object(r),!0).forEach((function(t){eQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var rQ=ia.f2.HeadlineFilter,nQ=function(e){var t=e.name,r=e.onApply,n=tQ(e,$W),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.headline",render:function(e){var i=e.field;return(0,c.jsx)(rQ,XW(XW({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},iQ=["name","onApply"];function oQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oQ(Object(r),!0).forEach((function(t){sQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var cQ=ia.f2.JoinedCommunityDaysAgoFilter,uQ=function(e){var t=e.name,r=e.onApply,n=lQ(e,iQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.joined_community_days_ago",render:function(e){var i=e.field;return(0,c.jsx)(cQ,aQ(aQ({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},dQ=["name","onApply"];function fQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fQ(Object(r),!0).forEach((function(t){pQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var bQ=ia.f2.LastLoggedInDaysAgoFilter,yQ=function(e){var t=e.name,r=e.onApply,n=hQ(e,dQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.last_logged_in_days_ago",render:function(e){var i=e.field;return(0,c.jsx)(bQ,mQ(mQ({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},vQ=["name","onApply"];function gQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gQ(Object(r),!0).forEach((function(t){_Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var wQ=ia.f2.LocationFilter,OQ=function(e){var t=e.name,r=e.onApply,n=jQ(e,vQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.location",render:function(e){var i=e.field;return(0,c.jsx)(wQ,xQ(xQ({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},PQ=["name","onApply"];function SQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SQ(Object(r),!0).forEach((function(t){CQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function CQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var TQ=ia.f2.MemberTagsFilter,AQ=function(e){var t=e.name,r=e.onApply,n=NQ(e,PQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.tags",render:function(e){var i=e.field;return(0,c.jsx)(TQ,kQ(kQ({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},EQ=["name","onApply"];function IQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IQ(Object(r),!0).forEach((function(t){LQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function LQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var RQ=ia.f2.NameFilter,FQ=function(e){var t=e.name,r=e.onApply,n=MQ(e,EQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.name",render:function(e){var i=e.field;return(0,c.jsx)(RQ,DQ(DQ({},n),{},{value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},BQ=["name","onApply"];function UQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UQ(Object(r),!0).forEach((function(t){VQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function VQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZQ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var HQ=ia.f2.PaywallsFilter,qQ=function(e){var t=e.name,r=e.onApply,n=ZQ(e,BQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.paywalls",render:function(e){var i=e.field;return(0,c.jsx)(HQ,zQ(zQ({},n),{},{changeUrl:!1,name:t,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},GQ=r(44389);function WQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function QQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WQ(Object(r),!0).forEach((function(t){KQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var JQ="audience.filter_rules.filters.profile_fields",$Q=function(e){var t=e.id,r=e.value,i=e.onApply,o=(0,pr.Gc)(),a=o.register,s=o.setValue,l=o.watch;(0,n.useEffect)((function(){a(JQ,{value:{}})}),[a]);var u=l(JQ)||{};return(0,c.jsx)(GQ.L,QQ(QQ({},e),{},{selectedText:r,onApply:function(e){if(null===i||void 0===i||i(e,t),null==e)return s(JQ,(0,fn.omit)(u,t));s(JQ,QQ(QQ({},u),{},KQ({},t,e)))}}))},YQ=["name","onApply"];function XQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XQ(Object(r),!0).forEach((function(t){tK(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rK(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var nK=ia.f2.RoleFilter,iK=function(e){var t=e.name,r=e.onApply,n=rK(e,YQ),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.role",render:function(e){var i=e.field;return(0,c.jsx)(nK,eK(eK({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},oK=["name","onApply"];function aK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aK(Object(r),!0).forEach((function(t){lK(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cK(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var uK=ia.f2.SpaceGroupsFilter,dK=function(e){var t=e.name,r=e.onApply,n=cK(e,oK),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.space_groups",render:function(e){var i=e.field;return(0,c.jsx)(uK,sK(sK({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},fK=["name","onApply"];function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mK(Object(r),!0).forEach((function(t){hK(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bK(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var yK=ia.f2.SpacesFilter,vK=function(e){var t=e.name,r=e.onApply,n=bK(e,fK),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.spaces",render:function(e){var i=e.field;return(0,c.jsx)(yK,pK(pK({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},gK=["name","onApply"];function xK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xK(Object(r),!0).forEach((function(t){jK(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var OK=ia.f2.StatusFilter,PK=function(e){var t=e.name,r=e.onApply,n=wK(e,gK),i=(0,pr.Gc)().control;return(0,c.jsx)(pr.Qr,{control:i,name:"audience.filter_rules.filters.online_status",render:function(e){var i=e.field;return(0,c.jsx)(OK,_K(_K({},n),{},{name:t,changeUrl:!1,value:i.value,onApply:function(e){i.onChange(e),null===r||void 0===r||r(e,t)}}))}})},SK=["id","label"];function kK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var TK=function(){var e=(0,pr.Gc)(),t=e.watch,r=e.getValues,n=i=[{name:"name",component:FQ,label:(0,a.t)("members_directory.header.search.filters.name"),value:t("audience.filter_rules.filters.name"),isInitialOpen:n("audience.filter_rules.filters.name")},{name:"bio",component:MW,label:(0,a.t)("members_directory.header.search.filters.bio"),value:t("audience.filter_rules.filters.bio"),isInitialOpen:n("audience.filter_rules.filters.bio")},{name:"headline",component:nQ,label:(0,a.t)("members_directory.header.search.filters.headline"),value:t("audience.filter_rules.filters.headline"),isInitialOpen:n("audience.filter_rules.filters.headline")},{name:"location",component:OQ,label:(0,a.t)("members_directory.header.search.filters.location"),value:t("audience.filter_rules.filters.location"),isInitialOpen:n("audience.filter_rules.filters.location")},{name:"role",component:iK,label:(0,a.t)("members_directory.header.search.filters.role"),value:t("audience.filter_rules.filters.role"),isInitialOpen:n("audience.filter_rules.filters.role")},{name:"spaces",component:vK,label:(0,a.t)("members_directory.header.search.filters.spaces.title"),value:t("audience.filter_rules.filters.spaces"),isInitialOpen:n("audience.filter_rules.filters.spaces")},{name:"space_groups",component:dK,label:(0,a.t)("members_directory.header.search.filters.space_groups.title"),value:t("audience.filter_rules.filters.space_groups"),isInitialOpen:n("audience.filter_rules.filters.space_groups")},{name:"online_status",component:PK,label:(0,a.t)("members_directory.header.search.filters.online_status"),value:t("audience.filter_rules.filters.online_status"),isInitialOpen:n("audience.filter_rules.filters.online_status")},{name:"tags",component:AQ,label:(0,a.t)("members_directory.header.search.filters.tags.title"),value:t("audience.filter_rules.filters.tags"),isInitialOpen:n("audience.filter_rules.filters.tags")},{name:"paywalls",component:qQ,label:(0,a.t)("members_directory.header.search.filters.paywalls.title"),value:t("audience.filter_rules.filters.paywalls"),isInitialOpen:n("audience.filter_rules.filters.paywalls")},{name:"events",component:ZW,label:(0,a.t)("members_directory.header.search.filters.events.title"),value:t("audience.filter_rules.filters.events"),isInitialOpen:n("audience.filter_rules.filters.events")},{name:"has_past_due_subscription",component:JW,label:(0,a.t)("members_directory.header.search.filters.has_past_due_subscription"),value:t("audience.filter_rules.filters.has_past_due_subscription")},{name:"joined_community_days_ago",component:uQ,label:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago"),availableLabel:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago_available"),value:t("audience.filter_rules.filters.joined_community_days_ago")},{name:"last_logged_in_days_ago",component:yQ,label:(0,a.t)("members_directory.header.search.filters.last_logged_in_days_ago"),value:t("audience.filter_rules.filters.last_logged_in_days_ago")},{name:"is_avatar_set",component:NW,label:(0,a.t)("members_directory.header.search.filters.avatar_set"),value:t("audience.filter_rules.filters.is_avatar_set")},{name:"activity_score",component:jW,label:(0,a.t)("members_directory.header.search.filters.activity_score"),value:t("audience.filter_rules.filters.activity_score")}],o=(0,hW.C)({platformFilters:i,filtersSelect:function(e){return e.map((function(e){var r=e.id,n=e.label,i=NK(e,SK),o="".concat(JQ,"[").concat(r,"]");return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kK(Object(r),!0).forEach((function(t){CK(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:o,label:n,component:$Q,id:r,value:t(o)||null},i)}))}}),s=o.filteredDefaultFilters,l=o.isLoadingProfileFields,u=o.customProfileFields,d=(0,Ko.ov)(),f=(0,pW.h)(s),m=(0,fW.$)(f),p=(0,yW.x)(m),h=(0,bW.c)({filters:p,canShowActivityScoreDisabled:d});return l?null:(0,c.jsx)("div",{onSubmit:children:(0,c.jsx)(mW.d,{defaultFilters:h,customFilters:u,className:"!border-0 !p-0",showClearButton:!1,label:(0,a.t)("settings.workflows.form.add_audience_rule")})})},AK=Kp.Ry().shape({filter_rules:Kp.Ry().required().shape({filters:Kp.Ry(),query:Kp.nK().nullable()})}),EK=function(e){var t=e);return!!t&&yU(e)},IK="audience",DK="settings.workflows.form",LK=function(){var e,t=nz(),r=t.itemsIds,n=t.hasActions,i=t.addActionAtStart,o=(null===(e=r[0])||void 0===e?void 0:e.id)||"0",s=function(){var e=(0,GU.d)().onCloseItemAndOpenNext,t=(0,pr.Gc)(),r=t.watch,n=t.resetField,i=(0,l.pm)(),o=Vi({onError:function(e){i.error(e.message)},onSuccess:function(t){n(IK,{defaultValue:t}),lr.Eh.invalidateQueries(["workflows",t.workflow_id]),e(),i.success((0,a.t)("settings.workflows.tooltip.updated"))}}),s=o.mutate,c=o.isLoading,u=r(IK),d=EK(u);return{audience:u,isAudienceValid:d,isSavingAudience:c,saveAudience:}(),u=s.isSavingAudience,d=s.saveAudience,f=s.isAudienceValid,m=xU("audience"),p=m.isCompleted,h=m.statusMessage;return(0,c.jsxs)(EU,{title:(0,a.t)([DK,"audience"]),description:(0,a.t)([DK,"entry_rule"]),onAddNewConnection:i,id:o,className:"m-auto",hasBottomConnection:n,hasError:!f,hasSuccess:p,statusMessage:f?h:(0,a.t)("settings.workflows.form.step_incomplete"),children:[(0,c.jsxs)("div",{className:"mb-10 flex flex-col gap-5",children:[(0,c.jsx)(TK,{}),!f&&(0,c.jsx)(l.ZT.LabelXs,{children:(0,c.jsx)("span",{className:"text-v2-danger",children:(0,a.t)("settings.workflows.form.errors.required")})}),(0,c.jsx)(dW,{})]}),(0,c.jsx)(oR,{disabled:u||!f,onClick:d,children:u?(0,a.t)("settings.workflows.form.saving"):(0,a.t)("settings.workflows.form.continue")})]})},MK=function(){var e=nz().itemsIds,t=(0,pr.Gc)().watch;return(0,c.jsx)(BT.x.Body,{wrapperClassName:"max-w-7xl p-6",children:(0,c.jsxs)(IU,{items:e,children:[(0,c.jsx)("div",{className:"m-auto max-w-[45rem]",children:(0,c.jsx)(GG,{workflowType:t("workflow_type")})}),(0,c.jsx)(LK,{}),(0,c.jsx)(sz,{})]})})},RK=function(e){var t=e.workflow,r=void 0===t?{}:t,n=e.isEdit,i=void 0!==n&&n,o=e.isScheduled,s=void 0!==o&&o,l=s?(0,a.t)("settings.workflows.schedule"):(0,a.t)("settings.workflows.run_now");return(0,c.jsxs)(sq,{workflow:r,children:[(0,c.jsx)(ZG,{title:l,isEdit:i,isScheduled:s}),(0,c.jsx)(MK,{})]})},FK=function(e){var t,r=(null===(t=e.location.state)||void 0===t?void 0:t.from)||{},n=r.path,i=void 0===n?"":n,o=r.query,a=void 0===o?"":o,s=S.o0.index();i!==s||!i&&!a?e.push(s):e.push({pathname:s,search:a})},BK=function(){var e=(0,dr.k6)();return(0,c.jsx)(BT.x,{isOpen:!0,onClose:function(){FK(e)},shouldShowCloseButton:!0,contentPortalId:"workflows-view-workflow-modal",children:(0,c.jsx)(rW,{children:function(e){var t=e.workflow,r=t.workflow_type,n="bulk_action"===r,i="scheduled"===r;return"draft"===t.status?"dynamic"===r?(0,c.jsx)(tW,{workflow:t,isEdit:!0}):n?(0,c.jsx)(RK,{workflow:t,isEdit:!0}):i?(0,c.jsx)(RK,{workflow:t,isEdit:!0,isScheduled:!0}):null:null}})})},UK=function(){return(0,c.jsx)(BK,{})},zK="settings.workflows.history",VK=[{accessorKey:"workflow.name",header:(0,a.t)([zK,"bulk_action.tasks"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)("settings.workflows.table.untitled_workflow")})}},{accessorKey:"community_member_id",header:(0,a.t)([zK,"bulk_action.member"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"status",header:(0,a.t)([zK,"status"]),thClassName:Nq,cellClassName:Nq,cell:function(e){return(0,c.jsx)(HM,{result:e.getValue()})}},{accessorKey:"task_action_logs",header:(0,a.t)([zK,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){var t,r=null!==(t=e.getValue())&&void 0!==t?t:[];return(0,c.jsx)(qz,{actions:r.map((function(e){return e.action_type})),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"run_id",header:(0,a.t)([zK,"bulk_action.run_id"]),thClassName:Mq,cellClassName:Mq,cell:function(e){return(0,c.jsx)(l.Ys,{tooltipOptions:{content:e.getValue(),className:"inline-grid min-w-[8rem]"},children:e.getValue()})}},{accessorKey:"created_at",header:(0,a.t)([zK,"run_at"]),thClassName:Iq,cellClassName:Iq,cell:function(e){return(0,c.jsx)(ZV,{dateTime:e.getValue()})}}],ZK=[{name:"name",component:rZ},{name:"status",component:nZ},{name:"run_id",component:iZ},{name:"member",component:oZ}],HK=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tZ,{filtersConfig:ZK}),(0,c.jsx)(VV,{columns:VK,workflowType:vL})]})},qK="settings.workflows.history",GK=[{accessorKey:"workflow.name",header:(0,a.t)([qK,"dynamic.name"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)("settings.workflows.table.untitled_workflow")})}},{accessorKey:"community_member_id",header:(0,a.t)([qK,"dynamic.member"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"status",header:(0,a.t)([qK,"status"]),thClassName:Nq,cellClassName:Nq,cell:function(e){return(0,c.jsx)(HM,{result:e.getValue()})}},{accessorKey:"task_action_logs",header:(0,a.t)([qK,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){var t,r=null!==(t=e.getValue())&&void 0!==t?t:[];return(0,c.jsx)(qz,{actions:r.map((function(e){return e.action_type})),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_at",header:(0,a.t)([qK,"run_at"]),thClassName:Iq,cellClassName:Iq,cell:function(e){return(0,c.jsx)(ZV,{dateTime:e.getValue()})}}],WK=[{name:"name",component:rZ},{name:"status",component:nZ},{name:"member",component:oZ}],QK=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tZ,{filtersConfig:WK}),(0,c.jsx)(VV,{columns:GK,workflowType:yL})]})},KK="settings.workflows.history",JK=[{accessorKey:"workflow.name",header:(0,a.t)([KK,"scheduled.tasks"]),thClassName:Sq,cellClassName:Sq,cell:function(e){return(0,c.jsx)(Pq,{children:e.getValue()||(0,a.t)("settings.workflows.table.untitled_workflow")})}},{accessorKey:"community_member_id",header:(0,a.t)([KK,"scheduled.member"]),thClassName:Cq,cellClassName:Cq,cell:function(e){return(0,c.jsx)(tM,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"status",header:(0,a.t)([KK,"status"]),thClassName:Nq,cellClassName:Nq,cell:function(e){return(0,c.jsx)(HM,{result:e.getValue()})}},{accessorKey:"task_action_logs",header:(0,a.t)([KK,"steps"]),thClassName:kq,cellClassName:J()("!py-0",kq),cell:function(e){var t,r=null!==(t=e.getValue())&&void 0!==t?t:[];return(0,c.jsx)(qz,{actions:r.map((function(e){return e.action_type})),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"run_id",header:(0,a.t)([KK,"scheduled.run_id"]),thClassName:Mq,cellClassName:Mq,cell:function(e){return(0,c.jsx)(l.Ys,{tooltipOptions:{content:e.getValue(),className:"inline-grid min-w-[8rem]"},children:e.getValue()})}},{accessorKey:"created_at",header:(0,a.t)([KK,"run_at"]),thClassName:Iq,cellClassName:Iq,cell:],$K=[{name:"name",component:rZ},{name:"status",component:nZ},{name:"run_id",component:iZ},{name:"member",component:oZ}],YK=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tZ,{filtersConfig:$K}),(0,c.jsx)(VV,{columns:JK,workflowType:gL})]})};function XK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eJ="workflow_type",tJ=function(){var e=function(){var e,t,r,n=(0,dr.k6)(),i=(0,rl.t)(),o=UV({workflowType:yL}).totalWorkflows,s=UV({workflowType:vL}).totalWorkflows,l=UV({workflowType:gL}).totalWorkflows,c=[yL,vL,gL],u=(XK(e={},yL,(0,a.t)("settings.workflows.table.type.automations")),XK(e,vL,(0,a.t)("settings.workflows.table.type.bulk_actions")),XK(e,gL,(0,a.t)("settings.workflows.table.type.scheduled")),e),d=(XK(t={},yL,o),XK(t,vL,s),XK(t,gL,l),t),f=null!==(r=i[eJ])&&void 0!==r?r:yL;return{defaultSelectedIndex:c.findIndex((function(e){return e===f})),handleTabChange:function(e){var t;n.push({search:(0,S.WB)((t={},XK(t,eJ,c[e]),XK(t,"page",1),t))})},tabNames:c,tabLabels:u,taskCounts:d}}(),t=e.defaultSelectedIndex,r=e.handleTabChange,n=e.tabNames,i=e.tabLabels,o=e.taskCounts;return(0,c.jsx)("main",{children:(0,c.jsxs)(Uo.O.Group,{defaultIndex:t,onChange:r,className:"overflow-hidden",children:[(0,c.jsx)(Uo.O.List,{className:"bg-primary border-primary border-b px-6",children:n.map((function(e){return(0,c.jsxs)(Uo.O,{children:[i[e],(0,c.jsx)(Uo.O.Counter,{children:o[e]})]},e)}))}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(QK,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(HK,{})}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(YK,{})})]})]})})},rJ=function(){return(0,c.jsx)(xG,{children:(0,c.jsxs)(lL,{children:[(0,c.jsx)(DL,{title:(0,a.t)("settings.workflows.history.title"),showBottomBorder:!1}),(0,c.jsx)(tJ,{})]})})},nJ=function(e){var t=e.workflow,r=void 0===t?{}:t,n=e.isEdit,i=void 0!==n&&n;return(0,c.jsxs)(sq,{workflow:r,children:[(0,c.jsx)(ZG,{title:(0,a.t)("settings.workflows.schedule"),isEdit:i,isScheduled:!0}),(0,c.jsx)(MK,{})]})},iJ=r(12643),oJ=function(e){var t=e.value,r=e.title,n=e.description;return(0,c.jsxs)(iJ.R,{value:t,children:[(0,c.jsx)(Vb.E.Label,{as:"span",className:"block",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:r})}),(0,c.jsx)(Vb.E.Description,{as:"span",className:"mt-3 flex items-center",children:(0,c.jsx)(l.ZT.BodySm,{color:"text-default",children:n})})]})},aJ=function(e){var t=e.value,r=e.onChange,n=J()("grid grid-cols-1 gap-y-6","sm:grid-cols-3","sm:gap-x-4");return(0,c.jsx)(Vb.E,{value:t,onChange:r,children:(0,c.jsxs)("div",{className:n,children:[(0,c.jsx)(oJ,{value:"dynamic",title:(0,a.t)("settings.workflows.form.dynamic_workflow"),description:(0,a.t)("settings.workflows.form.dynamic_workflow_description")}),(0,c.jsx)(oJ,{value:"bulk_action",title:(0,a.t)("settings.workflows.form.one_time_bulk_action"),description:(0,a.t)("settings.workflows.form.one_time_bulk_action_description")}),(0,c.jsx)(oJ,{value:"scheduled",title:(0,a.t)("settings.workflows.form.scheduled_workflow"),description:(0,a.t)("settings.workflows.form.scheduled_workflow_description")})]})})};function sJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return lJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lJ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cJ=function(){var e=(0,dr.k6)(),t=sJ((0,n.useState)("dynamic"),2),r=t[0],i=t[1],o=bi({onSuccess:function(t){"dynamic"!==r?("bulk_action"===r&&e.push(S.o0.oneTime({workflowId:t.id})),"scheduled"===r&&e.push(S.o0.scheduled({workflowId:t.id}))):e.push(S.o0.dynamic({workflowId:t.id}))}}),s=o.mutate,u=o.isLoading;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(BT.x.Header,{children:(0,c.jsxs)("div",{className:"flex w-full flex-row items-center gap-5",children:[(0,c.jsx)(jG,{onClick:),(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)("settings.workflows.custom_workflow")})]})}),(0,c.jsx)(BT.x.Body,{className:"!h-auto",children:(0,c.jsxs)("div",{className:"flex flex-col gap-8 p-6 md:my-14",children:[(0,c.jsx)(l.ZT.TitleXl,{children:(0,a.t)("settings.workflows.choose_workflow_type")}),(0,c.jsx)(aJ,{value:r,onChange:i})]})}),(0,c.jsx)(BT.x.Footer,{className:"!border-t-0 !p-6",children:(0,c.jsxs)("div",{className:"flex w-full flex-row justify-end gap-3",children:[(0,c.jsx)($e.z,{large:!0,type:"button",variant:"secondary",onClick:function(){e.push(S.o0.new())},children:(0,a.t)("cancel")}),(0,c.jsx)($e.z,{large:!0,type:"button",variant:"circle",onClick:disabled:u,children:u?(0,a.t)("settings.workflows.creating_workflow"):(0,a.t)("settings.workflows.create_workflow")})]})})]})};function uJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uJ(Object(r),!0).forEach((function(t){fJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mJ=function(e){var t=(0,dr.k6)();return(0,c.jsxs)($e.z,dJ(dJ({},e),{},{onClick:function(){t.push(S.o0.select_type())},variant:"circle",large:!0,className:"flex items-center justify-center gap-1",children:[(0,c.jsx)("span",{className:"flex h-5 w-5",children:(0,c.jsx)(bt.JO,{type:"20-plus-v2",size:20})}),(0,c.jsx)("span",{children:(0,a.t)("settings.workflows.custom_workflow")})]}))},pJ=function(e){var t=e.children,r=e.className;return(0,c.jsx)("div",{className:J()("flex gap-12 pb-24 md:pb-0",r),children:t})};pJ.Sidebar=function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("hidden w-full max-w-[15rem] md:block",t),children:r})},pJ.Content=function(e){var t=e.className,r=e.children;return(0,c.jsx)("div",{className:J()("w-full",t),children:r})};var hJ=function(e){var t=e.text,r=e.onClick,n=e.isHighlighted;return(0,c.jsx)("li",{children:(0,c.jsx)("button",{type:"submit",onClick:r,className:J()("text-default focus:text-default active:text-dark hover:text-dark block w-full cursor-pointer rounded-md px-4 py-2 text-left text-sm transition-colors",{"!text-dark bg-tertiary font-medium":n}),children:t})})},bJ=function(){var e=(0,iM.Z)(),t=(0,f.useInfiniteQuery)("workflow-templates-list",(function(e){var t,r=e.pageParam;return t=void 0===r?1:r,vn.nH.templates({params:{page:t,per_page:100}})}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),r=t.data,n=t.isLoading,i=t.fetchNextPage,o=(null===r||void 0===r?void 0:r.pages)||[],a=mw()(o.map((function(e){return e.records})));return{templates:e?a:a.filter((function(e){return e.released})),isLoading:n,fetchNextPage:i}},yJ=(0,n.createContext)({templates:[],isLoadingTemplates:!1,selectedTemplateId:void 0});yJ.displayName="WorkflowFormData";var vJ=function(e){var t=e.children,r=bJ(),n=r.templates,i=r.isLoading;return(0,c.jsx)(yJ.Provider,{value:{templates:n,isLoadingTemplates:i},children:t})},gJ=function(){return(0,n.useContext)(yJ)};function xJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jJ=function(){var e=function(){var e=xJ((0,n.useState)(),2),t=e[0],r=e[1],i=gJ().templates,o=(0,n.useMemo)((function(){return i.reduce((function(e,t){var r=t.category;return e.includes(r)||e.push(r),e}),["recommended"])}),[i]);return{categories:o,activeId:t||"category-".concat(o[0]),onClickNavItem:function(e){r(e);var t=document.querySelector("#".concat(e));t&&t.scrollIntoView({behavior:"smooth"})}}}(),t=e.categories,r=e.activeId,i=e.onClickNavItem;return(0,c.jsxs)("div",{className:"flex flex-col gap-3.5",children:[(0,c.jsx)("div",{className:"px-4",children:(0,c.jsx)(y.Z.LabelMd,{weight:"semibold",children:(0,a.t)("settings.workflows.worflow_templates")})}),(0,c.jsx)("nav",{children:(0,c.jsx)("ul",{className:"list-none",children:t.map((function(e,t){return(0,c.jsx)(hJ,{text:(0,a.t)(["settings.workflows.templates","categories",e],{defaultValue:e}),isHighlighted:r==="category-".concat(e),onClick:,"".concat(e,"-").concat(t))}))})})]})},wJ=function(e){var t=e.isSticky,r=void 0===t||t;return(0,c.jsxs)("div",{className:J()("flex flex-col gap-8",{"sticky top-12":r}),children:[(0,c.jsx)(mJ,{}),(0,c.jsx)(jJ,{})]})};function OJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OJ(Object(r),!0).forEach((function(t){SJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kJ,CJ="settings.workflows.form",NJ=function(){var e,t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.workflowType,s=i.trigger,l=i.audience,c=o===yL,u=o===vL,d=(s||{}).trigger_type,f=null===l||void 0===l||null===(e=l.filter_rules)||void 0===e||null===(t=e.filters)||void 0===t||null===(r=t.role)||void 0===r?void 0:r.toLowerCase();if(!(c&&!d||u&&!f)){var m={iconType:vV(d),title:(0,a.t)([CJ,"events",d,"title"]),description:(0,a.t)([CJ,"events",d,"description"])};if(c)return PJ(PJ({},m),{},{title:"".concat((0,a.t)([CJ,"event"]),": ").concat(m.title)});var p=(null===l||void 0===l||null===(n=l.filter_rules)||void 0===n?void 0:n.filters)||{},h=Object.keys(p).map((function(e){return(0,a.t)(["settings.workflows.view","audience_filters",e])})).join(", "),b={iconType:kL[f]||"user",title:h,description:(0,a.t)([CJ,"audience_types","default"])};return u?PJ(PJ({},b),{},{title:"".concat((0,a.t)([CJ,"audience_filters"]),": ").concat(b.title)}):void 0}},TJ=function(e){var t=e.trigger,r=e.audience,n=e.workflowType,i=NJ({trigger:t,audience:r,workflowType:n});if(!i)return null;var o=i||{},a=o.title,s=o.iconType,l=o.size,u=void 0===l?"lg":l;return(0,c.jsx)(nM,{size:u,tooltipContent:a,children:(0,c.jsx)(bt.JO,{type:"24-workflow-".concat(s),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"})})},AJ=r(1469),EJ=r.n(AJ),IJ=function(e){return EJ()(e)?e.filter((function(e){return e.action_type})).map((function(e){return e.action_type})):[]},DJ=function(e){var t=e.shouldTruncate,r=void 0===t||t,n=e.children,i=r?{display:"-webkit-box",WebkitLineClamp:"3",WebkitBoxOrient:"vertical",overflow:"hidden"}:{};return(0,c.jsx)("div",{style:i,children:(0,c.jsx)(l.ZT.LabelLg,{weight:"semibold",children:n})})};function LJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MJ="settings.workflows.templates",RJ=(LJ(kJ={},yL,{color:"text-[#9F15E0]",backgroundColor:"bg-[#9F15E00F]"}),LJ(kJ,vL,{color:"text-[#0A7A9D]",backgroundColor:"bg-[#0A7A9D14]"}),LJ(kJ,"default",{color:"text-default",backgroundColor:"bg-tertiary"}),kJ),FJ=function(e){var t=e.type,r=void 0===t?"":t,n=RJ[r]||RJ.default,i=n.color,o=n.backgroundColor;return(0,c.jsx)(sO.T,{content:"".concat((0,a.t)([MJ,"workflow_type"]),": ").concat((0,a.t)([MJ,r],{defaultValue:r})),placement:"top",children:(0,c.jsxs)("span",{className:J()("inline-flex items-center gap-1 rounded py-0.5 pl-1 pr-1.5",o),children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"12-lightning",size:12,className:J()("!h-3 !w-3",i)})}),(0,c.jsx)("span",{className:J()("flex items-center text-[0.7rem] font-semibold uppercase",i),children:(0,a.t)([MJ,r],{defaultValue:r})})]})})};function BJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function UJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BJ(Object(r),!0).forEach((function(t){zJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VJ=function(e){var t=e.name,r=e.templateType,n=e.trigger,i=e.audience,o=e.actions,a=void 0===o?[]:o,s=e.onClick,l=IJ(a),u=nn()(s),d=l.length>0,f=u?{role:"button",onClick:s}:{};return(0,c.jsxs)("div",UJ(UJ({className:J()("bg-primary border-primary hover:shadow-xs hover:border-secondary flex h-[205px] w-full max-w-xs flex-col gap-5 rounded-lg border p-5 transition-colors duration-75",{"cursor-pointer":u})},f),{},{children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(TJ,{trigger:n,audience:i,workflowType:r}),d&&(0,c.jsx)(qz,{actions:l})]}),(0,c.jsxs)("div",{className:"flex h-full flex-col justify-between gap-2",children:[(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)(DJ,{children:t})}),r&&(0,c.jsx)("div",{className:"flex h-5",children:(0,c.jsx)(FJ,{type:r})})]})]}))};function ZJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function HJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZJ(Object(r),!0).forEach((function(t){qJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GJ=function(e){var t=e.id,r=e.title,n=e.description,i=e.templates,o=void 0===i?[]:i,a=e.className,s=(0,dr.k6)();return(0,c.jsxs)("div",{id:t,className:J()("flex max-w-[62rem] flex-col gap-7",a),children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.TitleMd,{children:r})}),n&&(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelMd,{color:"text-default",children:n})})]}),(0,c.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:o.map((function(e){return(0,c.jsx)(VJ,HJ(HJ({},e),{},{templateType:e.template_type,onClick:function(){return t=e.id,void s.push("/settings/workflows/new/preview/".concat(t));var t}}),e.id)}))})]})},WJ="settings.workflows.templates";function QJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var JJ=function(){var e,t=(e=gJ().templates,{templateGroups:(0,n.useMemo)((function(){var t=e.filter((function(e){return e.recommended})),r={id:"category-recommended",title:(0,a.t)([WJ,"categories","recommended"]),templates:t};return e.reduce((function(e,t){var r=t.category,n=e.find(();return n?n.templates.push(t):e.push({id:"category-".concat(r),title:(0,a.t)([WJ,"categories",r],{defaultValue:r}),templates:[t]}),e}),[r])}),[e])}).templateGroups;return(0,c.jsx)("div",{className:"flex flex-col pb-12",children:t.map((function(e){return(0,c.jsx)(GJ,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QJ(Object(r),!0).forEach((function(t){KJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:"pt-8 md:pt-16 md:first:pt-12"},e),e.id)}))})},$J=function(){return(0,c.jsx)(vJ,{children:(0,c.jsxs)(pJ,{children:[(0,c.jsx)(pJ.Sidebar,{className:"pt-12",children:(0,c.jsx)(wJ,{})}),(0,c.jsx)(pJ.Content,{children:(0,c.jsx)(JJ,{})}),(0,c.jsx)("div",{className:"bg-primary border-primary absolute bottom-0 left-0 w-full border-t p-6 md:hidden",children:(0,c.jsx)(mJ,{full:!0})})]})})},YJ=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(BT.x.Header,{children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)(["settings.workflows","create_new_workflow"])})}),(0,c.jsx)(BT.x.Body,{wrapperClassName:"max-w-7xl px-6",children:(0,c.jsx)($J,{})})]})},XJ=function(e){var t=e.children,r=(0,dr.UO)().id,n=function(e){var t=e.templateId,r=gi(e,vi);return(0,f.useQuery)(["workflows-templates",t],(function(){return(0,Xe.Cp)(vn.nH.fetchTemplate({templateId:t}))}),r)}({templateId:r}),i=n.data,o=n.isLoading,s=n.isError;return r?o?(0,c.jsx)(DI.u,{title:(0,a.t)("settings.workflows.loading_template_preview"),subtitle:(0,a.t)("settings.workflows.take_a_few_seconds")}):s?(0,c.jsx)("div",{className:"bg-primary flex h-full w-full flex-col items-center justify-center",children:(0,c.jsx)("div",{className:"flex h-full w-full max-w-xl flex-col items-center justify-center gap-4",children:(0,c.jsx)(y.Z.TitleXl,{children:(0,a.t)("settings.workflows.there_was_an_error_loading_your_workflow")})})}):t({template:i}):null},e$=function(e){var t=e.className,r=e.isArrow,n=void 0===r||r;return(0,c.jsx)("span",{className:J()("mx-auto",t),children:n?(0,c.jsx)(bt.JO,{type:"40-arrow-down",size:40,className:"text-lightest !h-10 !w-10"}):(0,c.jsx)(bt.JO,{type:"32-line-vertical",size:32,className:"text-light !h-8 !w-8"})})},t$=function(e){var t=e.title,r=e.description,n=e.iconType;return(0,c.jsxs)("div",{className:"border-dark bg-primary flex items-center gap-4 rounded-lg border px-5 py-4",children:[n&&(0,c.jsx)(nM,{size:"lg",children:(0,c.jsx)(bt.JO,{type:"24-workflow-".concat(n),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-0.5",children:[t&&(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:t}),r&&(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:r})]})]})},r$=function(e){var t=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).templateId,t=(0,l.pm)().error,r=(0,dr.k6)(),n=(0,f.useMutation)((,{onSuccess:function(e){var t=e.id;r.push("/settings/workflows/edit/".concat(t))},onError:function(){return t((0,a.t)(["settings.workflows.template_summary","there_was_an_error_creating_your_workflow"]))}});return{createFromTemplate:n.mutate,isLoading:n.isLoading}}({templateId:e.templateId}),r=t.createFromTemplate;return(0,c.jsx)(l.zx,{variant:"circle",large:!0,full:!0,onClick:r,className:"flex items-center justify-center",children:(0,a.t)(["settings.workflows.template_summary","use_this_template"])})};function n$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o$=function(e){var t=e.trigger,r=e.audience,n=e.workflowType,i=NJ({trigger:t,audience:r,workflowType:n});return(0,c.jsx)(t$,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n$(Object(r),!0).forEach((function(t){i$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i))},a$=function(e){var t=e.title,r=(0,dr.k6)();return(0,c.jsxs)("div",{className:"flex max-w-2xl flex-col gap-5",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("button",{type:"submit",onClick:className:"hover:bg-secondary -mx-1 inline-flex items-center gap-2 rounded-lg py-1.5 pl-1 pr-2 transition-colors duration-200",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"20-arrow-left",size:20,className:"!text-default !h-5 !w-5"})}),(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"medium",color:"text-default",children:(0,a.t)(["settings.workflows.template_summary","back"])})})]})}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.TitleLg,{children:t})})]})},s$=function(e){var t=e.template||{},r=t.id,n=t.template_type,i=t.actions,o=void 0===i?[]:i,s=t.trigger,u=t.audience,d=IJ(o),f=d.length>0;return(0,c.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,c.jsx)("div",{className:"flex flex-col gap-4",children:(0,c.jsx)(r$,{templateId:r})}),(0,c.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("settings.workflows.templates.workflow_type")})}),(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:(0,a.t)(["settings.workflows.templates",n])})})]}),f&&(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)(["settings.workflows.template_summary","triggers_and_actions_involved"])})}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,c.jsx)(TJ,{trigger:s,audience:u,workflowType:n}),f&&(0,c.jsx)(qz,{actions:d})]})]})]})]})},l$=function(e){var t=e.template,r=t||{},n=r.id,i=r.name,o=r.template_type,s=r.actions,l=void 0===s?[]:s,u=r.trigger,d=r.audience,f=IJ(l),m=f.length>0;return(0,c.jsxs)("div",{className:"mx-auto flex max-w-5xl flex-col gap-10 py-6 lg:py-14",children:[(0,c.jsx)(a$,{title:i}),(0,c.jsxs)(pJ,{children:[(0,c.jsx)(pJ.Content,{children:(0,c.jsxs)("div",{className:"bg-secondary rounded-lg p-4 lg:p-14",children:[(0,c.jsx)(o$,{trigger:u,audience:d,workflowType:o}),m&&(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)(e$,{})}),f.map((function(e,t){return(0,c.jsxs)("div",{children:[(0,c.jsx)(t$,{title:(0,a.t)(["settings.workflows.action_types",e]),iconType:Vz(e)}),t!==f.length-1&&(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)(e$,{})})]},"".concat(e,"-").concat(t))}))]})}),(0,c.jsx)(pJ.Sidebar,{children:(0,c.jsx)(s$,{template:t})}),(0,c.jsx)("div",{className:"bg-primary border-primary absolute bottom-0 left-0 w-full border-t p-6 md:hidden",children:(0,c.jsx)(r$,{templateId:n})})]})]})},c$=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(BT.x.Header,{children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)(["settings.workflows","create_new_workflow"])})}),(0,c.jsx)(BT.x.Body,{wrapperClassName:"max-w-7xl px-6 h-full",children:(0,c.jsx)(XJ,{children:function(e){var t=e.template;return(0,c.jsx)(l$,{template:t})}})})]})},u$=function(){var e=(0,dr.k6)(),t=(0,dr.$B)().path;return(0,c.jsx)(BT.x,{isOpen:!0,onClose:shouldShowCloseButton:!0,contentPortalId:"workflows-new-workflow-form-modal",children:(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{path:t,exact:!0,children:(0,c.jsx)(YJ,{})}),(0,c.jsx)(dr.AW,{path:"".concat(t,"/preview/:id"),exact:!0,children:(0,c.jsx)(c$,{})}),(0,c.jsx)(dr.AW,{path:"".concat(t,"/select_type"),exact:!0,children:(0,c.jsx)(cJ,{})}),(0,c.jsx)(dr.AW,{path:"".concat(t,"/dynamic/:id"),exact:!0,children:(0,c.jsx)(rW,{children:function(e){var t=e.workflow;return(0,c.jsx)(tW,{workflow:t})}})}),(0,c.jsx)(dr.AW,{path:"".concat(t,"/one_time/:id"),exact:!0,children:(0,c.jsx)(rW,{children:function(e){var t=e.workflow;return(0,c.jsx)(RK,{workflow:t})}})}),(0,c.jsx)(dr.AW,{path:"".concat(t,"/scheduled/:id"),exact:!0,children:(0,c.jsx)(rW,{children:)}),(0,c.jsx)(dr.AW,{render:function(){return(0,c.jsx)(dr.l_,{to:t})}})]})})},d$=function(){return(0,c.jsx)(u$,{})},f$=function(e){var t=e.isDynamic,r=e.className,n=e.children;return t?(0,c.jsx)("div",{className:J()("flex w-full justify-between",r),children:n}):(0,c.jsx)(BT.x.HeaderContent,{children:n})},m$=r(47037),p$=r.n(m$);function h$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h$(Object(r),!0).forEach((function(t){y$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x$=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=v$((0,n.useState)(!1),2),i=r[0],o=r[1],a=t.query,s=void 0===a?"":a,l=t.workflowId,c=t.perPage,u=void 0===c?20:c,d=t.initialPage,m=void 0===d?1:d,p=t.options,h=["workflows",l,"runs",s,u],b=b$({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===p?{refetchInterval:!i&&5e3}:p),y=(0,f.useInfiniteQuery)(h,(function(e){var t=e.pageParam,r=void 0===t?m:t,n=1;mn()(r)&&r>0&&(n=r);var i={page:n,per_page:u};return s&&(i.query=s),vn.nH.fetchRuns({workflowId:l,params:i})}),b),v=(0,n.useMemo)((,[null===(e=y.data)||void 0===e?void 0:e.pages]),g=(0,n.useMemo)((function(){return mw()(v.map((function(e){return e.records})))}),[v]);return(0,n.useEffect)((function(){if(!y.isLoading){var e=g.every(();o(e)}}),[g,y.isLoading]),b$(b$({},y),{},{queryKey:h,runs:g,areAllRunsCompleted:i})},_$=function(e){var t=e.workflow,r=t.id,n=t.status,i=t.workflow_type,o=function(e){var t=e.workflowId;return x$({workflowId:t}).areAllRunsCompleted}({workflowId:r});return!(n===pL)&&i===vL&&o?(0,c.jsx)(sq,{workflow:t,isRerun:!0,children:(0,c.jsx)(l.zx,{type:"submit",variant:"circle",children:(0,a.t)("settings.workflows.rerun_this_workflow")})}):null},j$=function(e){var t=e.workflow,r=t.schedule,n=t.workflow_type===gL,i=!1===(null===r||void 0===r?void 0:r.enabled);return n&&i?(0,c.jsx)(sq,{workflow:t,children:(0,c.jsx)(kG,{title:(0,a.t)("settings.workflows.rerun"),runNow:!0,isReschedule:!0})}):null},w$="settings.workflows.view.header",O$=function(e){var t=e.workflow,r=void 0===t?{}:t,n=(0,dr.k6)(),i=r.id,o=r.name,s=r.status,u=r.workflow_type,d=s===fL,f=s===pL,m=!f&&!(u===vL||u===gL),p=f,h=Zq({workflowId:i,isActive:d}),b=h.onChangeActiveStatus,y=h.isLoading;return(0,c.jsxs)("div",{className:"flex items-center justify-end gap-5",children:[(0,c.jsxs)("button",{type:"button",className:"text-dark flex items-center gap-1",onClick:function(){var e=p$()(o)?o:(0,a.t)("settings.workflows.view.untitled_workflow"),t=encodeURIComponent(e);n.push("".concat(S.o0.history(),"?page=1&workflow_type=").concat(u,"&workflow_name=").concat(t))},children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)([w$,"history"])}),(0,c.jsx)(bt.JO,{type:"16-arrow-top-right",size:16})]}),(0,c.jsx)(_$,{workflow:r}),m&&(0,c.jsx)(l.Jf,{isChecked:d,checkedLabel:(0,a.t)([w$,"on_value"]),uncheckedLabel:(0,a.t)([w$,"off_value"]),tooltipCheckedLabel:(0,a.t)([w$,"on_tooltip"]),tooltipUncheckedLabel:(0,a.t)([w$,"off_tooltip"]),isLoading:y,onChange:b}),p&&(0,c.jsx)(l.zx,{onClick:function(){n.push(S.o0.edit({workflowId:i}))},variant:"circle",children:(0,a.t)([w$,"edit"])}),!p&&(0,c.jsx)(j$,{workflow:r})]})},P$=r(30870),S$=function(e){var t=e.state;return ;function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k$(Object(r),!0).forEach((function(t){N$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T$="settings.workflows.view",A$=function(e){var t=e.workflow,r=t.id,n=t.tasks_count,i=t.workflow_type,o=(0,dr.TH)(),s=S$(o),l=i!==gL||n>0;return(0,c.jsx)("div",{className:"flex items-center gap-4",children:l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sn.OL,C$(C$({},P$.O),{},{to:s(S.o0.view({workflowId:r})),exact:!0,replace:!0,children:(0,a.t)([T$,"overview"])})),(0,c.jsx)(sn.OL,C$(C$({},P$.O),{},{to:s(S.o0.runs({workflowId:r})),exact:!0,replace:!0,children:(0,a.t)([T$,"runs"])}))]})})};function E$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E$(Object(r),!0).forEach((function(t){D$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L$=function(e){var t=e.workflow,r=e.onClose,n=t||{},i=n.id,o=n.name,a=n.workflow_type,s=(0,pr.cI)({defaultValues:{name:o,id:i}}),l=a===yL,u=a===vL,d=a===gL;return(0,c.jsxs)(f$,{isDynamic:l,className:"gap-5",children:[(0,c.jsxs)("div",{className:"flex w-full flex-row items-center gap-6 truncate",children:[(0,c.jsx)(jG,{onClick:r}),(0,c.jsx)(pr.RV,I$(I$({},s),{},{children:(0,c.jsx)(VG,{})}))]}),(u||d)&&(0,c.jsx)(BT.x.HeaderContent.Navigation,{children:(0,c.jsx)(A$,{workflow:t})}),(0,c.jsx)(O$,{workflow:t})]})},M$=function(e){var t=e.title,r=e.description,n=e.hasSeparator,i=void 0===n||n,o=e.children;return(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"border-dark w-full overflow-hidden rounded-lg border",children:[(0,c.jsxs)("div",{className:"bg-secondary flex flex-col gap-1 px-8 py-5",children:[r&&(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.BodySm,{weight:"semibold",children:r})}),(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:t})})]}),o&&(0,c.jsx)("div",{className:"border-dark border-t px-8 py-6",children:o})]}),i&&(0,c.jsx)(e$,{})]})},R$=Bz.reduce((function(e,t){var r=t||{},n=r.value,i=r.viewComponent;return e.set(n,i),e}),new Map),F$=function(e){var t=e.action,r=e.hasSeparator,n=(t||{}).action_type,i=R$.get(n),o=(0,a.t)(["settings.workflows.view.actions",n,"title"],{defaultValue:(0,a.t)("settings.workflows.view.unknown")});return(0,c.jsx)(M$,{title:o,description:(0,a.t)("settings.workflows.action"),hasSeparator:r,children:i?(0,c.jsx)(i,{action:t}):null})},B$=function(e){var t=e.actions,r=e.className;return(0,c.jsx)("div",{className:r,children:t.map((function(e,r){return(0,c.jsx)(F$,{action:e,hasSeparator:r!==t.length-1},e.id)}))})},U$=function(e){var t=e.name,r=e.value;return(0,c.jsxs)("span",{className:"border-dark flex h-7 items-center gap-1.5 rounded-full border px-3",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(y.Z.LabelXs,{weight:"medium",children:t})}),(0,c.jsx)("span",{className:"flex max-w-xs",children:(0,c.jsx)(y.Z.LabelXs,{truncate:!0,color:"text-default",children:(0,c.jsx)(_V.Y,{className:"py-1",tooltipOptions:{content:r,className:"cursor-pointer"},children:(0,c.jsx)("span",{children:r})})})})]})},z$=function(){return(0,c.jsx)("span",{className:"flex items-center",children:(0,c.jsx)(y.Z.LabelXs,{color:"text-default",children:(0,a.t)("settings.workflows.view.and")})})},V$=r(44907),Z$=r(57615),H$=r(50343),q$=r(85096),G$=r(69055),W$=function(e){var t=function(e){var t=e.ids;return(0,f.useQuery)(["workflows","events","list",t],(function(){return vn.S1.listEvents({params:{ids:t}})}),{enabled:!(0,fn.isEmpty)((0,fn.compact)(t))})}({ids:null===e||void 0===e?void 0:e.split(",")}).data,r=void 0===t?{}:t;return(0,n.useMemo)((function(){var e;return(null===(e=r.records)||void 0===e?void 0:e.reduce((function(e,t){return e[t.id]=t.name,e}),{}))||{}}),[r])},Q$=r(6630),K$="settings.workflows.view",J$=function(){var e,t,r,i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(e=(0,v.nT)().helpers.spaceWithViewContentAccess(),(0,n.useMemo)((function(){return e.map(().reduce((function(e,t){return e[t.value]=t.label,e}),{})}),[e])),c=(t=Ii().memberTags,(0,n.useMemo)((function(){return t.map((function(e){return{id:e.id,name:e.name}})).reduce((function(e,t){return e[t.id]=t.name,e}),{})}),[t])),u=(r=(0,Q$.t)().visibleSpaceGroups,i=void 0===r?[]:r,(0,n.useMemo)((function(){return i.reduce((function(e,t){return e[t.value]=t.label,e}),{})}),[i])),d=W$(s.events),f=(o=(0,wr.g)().allPaywalls,(0,n.useMemo)((,[o]));return(0,n.useMemo)((function(){var e=(0,fn.omit)(s,"profile_fields");return(0,fn.isEmpty)(e)?[]:Object.keys(e).filter((function(t){return e[t]})).map((function(e){return function(e){var t=e.object,r=void 0===t?{}:t,n=e.key,i=void 0===n?"":n,o=e.spaceNameMap,s=void 0===o?{}:o,l=e.tagsIdMap,c=void 0===l?{}:l,u=e.spaceGroupNameMap,d=void 0===u?{}:u,f=e.eventNameMap,m=void 0===f?{}:f,p=e.paywallsNameMap,h=void 0===p?{}:p,b=r[i]||"",y=(0,a.t)([K$,"audience_filters",i],{defaultValue:(0,a.t)([K$,"unknown"])}),v={name:V$.d1,headline:V$.d1,spaces:function(e){return e.split(",").map((function(e){return s[e]})).filter(Boolean).join(", ")},tags:function(e){return e.split(",").map(Number).map((function(e){return c[e]})).filter(Boolean).join(", ")},space_groups:function(e){return e.split(",").map((function(e){return d[e]})).filter(Boolean).join(", ")},events:function(e){return e.split(",").map((function(e){return m[e]})).filter(Boolean).join(", ")},paywalls:function(e){return e.split(",").map((function(e){return h[e]})).filter(Boolean).join(", ")},joined_community_days_ago:q$.P,last_logged_in_days_ago:G$.$,activity_score:Z$.cR,is_avatar_set:H$.c};return(0,fn.isFunction)(v[i])?{name:y,value:v[i](b)}:{name:y,value:b}}({object:s,key:e,spaceNameMap:l,tagsIdMap:c,spaceGroupNameMap:u,eventNameMap:d,paywallsNameMap:f})}))}),[s,l,c,u,d,f])},$$=r(99394),Y$=function(e,t){var r=t.label,n=t.field_type,i=t.choices,o=void 0===i?[]:i,a=e;if([$C.Z9.TEXT,$C.Z9.NUMBER,$C.Z9.TEXTAREA,$C.Z9.LINK].includes(n))a=(0,$$.d)(e);else if([$C.Z9.SELECT,$C.Z9.CHECKBOX].includes(n)){if(Array.isArray(e)){var s=e.map((function(e){var t,r=o.find((function(t){return t.id===Number(e)}));return null!==(t=null===r||void 0===r?void 0:r.value)&&void 0!==t?t:e}));return{name:r,value:s.join(", ")}}var l=o.find(();a=l?l.value:e}return{name:r,value:a}};function X$(e){return function(e){if(Array.isArray(e))return eY(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return eY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eY(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tY=function(){var e,t,r=null!==(e=null===(t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).filter_rules)||void 0===t?void 0:t.filters)&&void 0!==e?e:{},i=J$(r),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,hW.C)({platformFilters:[]}),r=t.customProfileFields,i=t.isLoadingProfileFields,o=(0,VC.i)().getArchivedQueryOptions,s=o.data,l=void 0===s?[]:s,c=o.isLoading;return(0,n.useMemo)((function(){if((0,fn.isEmpty)(e)||i||c)return[];var t=e.profile_fields,n=void 0===t?{}:t;return Object.keys(n).filter((function(e){return n[e]})).map((function(e){var t=n[e],i=r.find((function(t){return t.id===Number(e)}));if(i)return Y$(t,i);var o=l.find((function(t){return t.id===Number(e)}));return o?Y$(t,o):{name:(0,a.t)("settings.workflows.view.deleted_profile_field"),value:""}}))}),[e,i,c,r,l])}(r),s=(0,n.useMemo)((function(){return[].concat(X$(i),X$(o))||[]}),[i,o]);return{filters:s,hasFilters:s.length>0}};function rY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rY(Object(r),!0).forEach((function(t){iY(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rY(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oY="settings.workflows.form",aY=function(e){var t=e.audience,r=e.hasSeparator,n=tY(t),i=n.filters,o=n.hasFilters;return(0,c.jsx)(M$,{title:(0,a.t)([oY,"audience"]),description:(0,a.t)([oY,"entry_rule"]),hasSeparator:r,children:o&&(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)([oY,"audience"])})}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map((function(e,t){return(0,c.jsxs)("span",{className:"inline-flex gap-2",children:[(0,c.jsx)(U$,nY({},e)),t<i.length-1&&(0,c.jsx)(z$,{})]},e.name)}))})]})})},sY=function(e){var t=e.trigger||{},r=t.trigger_type,i=t.resource_type,o=t.resource_id,a=(0,n.useMemo)((,[r]);return a&&o?(0,c.jsx)(a,{resourceType:i,resourceId:o}):null},lY="settings.workflows",cY=function(e){var t=e.trigger,r=e.hasSeparator,n=t||{},i=n.trigger_type,o=n.resource_type,s=(0,a.t)([lY,"form.events",i,"title"],{defaultValue:(0,a.t)([lY,"view.unknown"])}),l=Object.values(TL).includes(o);return(0,c.jsx)(M$,{title:s,description:(0,a.t)([lY,"view.entry_rule"]),hasSeparator:r,children:l&&(0,c.jsx)(sY,{trigger:t})})},uY="settings.workflows.schedule_details",dY=function(e){var t=e.schedule,r=e.hasRuns,n=null!==t&&void 0!==t&&t.last_run_at?(0,Xe.wc)({dateTime:new Date(t.last_run_at),format:"date_time_with_short_timezone"}):"",i=null!==t&&void 0!==t&&t.do_not_skip_tasks?(0,a.t)([uY,"rerun_criteria.all_members"]):(0,a.t)([uY,"rerun_criteria.new_members"]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex gap-2.5",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"16-clock",size:16})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:(0,a.t)([uY,"scheduled_for"])}),(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(l.ZT.BodySm,{children:n})})]})]}),r&&(0,c.jsxs)("div",{className:"mt-2 flex gap-2.5",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"16-members",size:16})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:(0,a.t)([uY,"rerun_criteria.title"])}),(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(l.ZT.BodySm,{children:i})})]})]})]})},fY="settings.workflows.schedule_details",mY=function(e){var t=e.schedule,r=null!==t&&void 0!==t&&t.last_run_at?(0,Xe.wc)({dateTime:new Date(t.last_run_at),format:"short_month_and_date_with_year"}):"",n=null!==t&&void 0!==t&&t.has_run_but_not_completed?(0,a.t)([fY,"next_run"]):(0,a.t)([fY,"first_run"]),i=null!==t&&void 0!==t&&t.next_run_at?(0,Xe.wc)({dateTime:new Date(t.next_run_at),format:"date_time_with_short_timezone"}):"",o=null!==t&&void 0!==t&&t.do_not_skip_tasks?(0,a.t)([fY,"rerun_criteria.all_members"]):(0,a.t)([fY,"rerun_criteria.new_members"]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex gap-2.5",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"16-clock",size:16})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:n}),(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(l.ZT.BodySm,{children:i})})]})]}),(0,c.jsxs)("div",{className:"flex gap-2.5",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"16-clear",size:16})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:(0,a.t)([fY,"then"])}),(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(l.ZT.BodySm,{children:t.display_frequency})})]})]}),(0,c.jsxs)("div",{className:"flex gap-2.5",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"16-clear",size:16})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:(0,a.t)([fY,"ends_on"])}),(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(l.ZT.BodySm,{children:r||(0,a.t)("settings.workflows.recurring_schedule_modal.never")})})]})]}),(0,c.jsxs)("div",{className:"mt-2 flex gap-2.5",children:[(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"16-members",size:16})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"bold",children:(0,a.t)([fY,"rerun_criteria.title"])}),(0,c.jsx)("div",{className:"ml-2",children:(0,c.jsx)(l.ZT.BodySm,{children:o})})]})]})]})};function pY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hY=function(e){var t,r=e.postAction,n=(0,ne.yT)(),i=(0,l.pm)(),o=ri(),s=o.id,u=o.schedule,d=o.hasRuns,f=u.schedule_type,m=function(){r(),i.success((0,a.t)("settings.workflows.schedule_details.updated")),n.hide()},p=function(){n.hide()},h=(pY(t={},_L,(0,c.jsx)(KZ,{setIsConfirmContent:m,workflowId:s,schedule:u,onSubmit:m,onCancel:p,hasRuns:d})),pY(t,jL,(0,c.jsx)(BH,{workflowId:s,schedule:u,onPublish:m,onCancel:p})),t);return(0,c.jsxs)(ie.u_,{isOpen:n.visible,onClose:p,children:[(0,c.jsx)(ie.u_.Overlay,{}),h[f]]})},bY=function(e){var t=e.workflow,r=e.postAction;return(0,ne.yT)(function(e){var t=e.workflow,r=e.postAction;return ne.uc.create((function(){return(0,c.jsx)(bZ,{workflow:t,children:(0,c.jsx)(hY,{postAction:r})})}))}({workflow:t,postAction:r}))};function yY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vY="settings.workflows.schedule_details",gY=function(e){var t,r=e.workflow,n=e.status,i=(0,f.useQueryClient)(),o=r.schedule,s=r.id,u=o.schedule_type,d=function(){return i.refetchQueries({queryKey:["workflows",s]})},m=xq({workflowId:s,refetch:d}).handleCancelWithConfirmation,p=bY({workflow:r,postAction:d}),h=r.runs_count>0;if(n==mL||n==hL||null==(null===o||void 0===o?void 0:o.next_run_at))return null;var b=(yY(t={},_L,(0,c.jsx)(dY,{schedule:o,hasRuns:h})),yY(t,jL,(0,c.jsx)(mY,{schedule:o})),t);return(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("div",{className:"mb-4 flex",children:[(0,c.jsx)(l.ZT.TitleSm,{color:"text-darkest !font-bold",children:(0,a.t)([vY,"title"])}),(0,c.jsxs)("div",{className:"ml-auto flex",children:[(0,c.jsx)(l.zx,{variant:"plain",className:"!text-dark !px-1 !py-0.5 font-normal underline decoration-dashed decoration-1 underline-offset-2",onClick:function(){return p.show()},children:(0,a.t)([vY,"modify"])}),(0,c.jsx)(l.zx,{variant:"plain",className:"!text-dark !px-1 !py-0.5 font-normal underline decoration-dashed decoration-1 underline-offset-2",onClick:m,children:(0,a.t)([vY,"cancel"])})]})]}),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("div",{className:"border-dark w-full rounded-lg border px-8 py-5",children:b[u]})})]})},xY=function(e){var t=e.workflow,r=t.workflow_type,n=t.trigger,i=t.audience,o=t.actions,s=void 0===o?[]:o,l=t.schedule,u=t.status,d=s.length>0,f=r===vL||r===gL;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(GG,{workflowType:r}),r===gL&&l&&(0,c.jsx)(gY,{workflow:t,status:u}),(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)(y.Z.TitleSm,{color:"text-darkest !font-bold",children:(0,a.t)("settings.workflows.view.workflow_details")})}),r===yL&&(0,c.jsx)(cY,{trigger:n,hasSeparator:d}),f&&(0,c.jsx)(aY,{audience:i,hasSeparator:d}),(0,c.jsx)(B$,{actions:s})]})},_Y=function(e){var t=e.id,r=e.isAvatarHidden,i=XL(),o=(0,n.useMemo)((function(){return{isSomethingLoading:i.some((function(e){return e.isLoading})),data:(0,fn.compact)(i.reduce((function(e,t){var r=t.data;return e.concat(null===r||void 0===r?void 0:r.records)}),[]))}}),[i]),s=o.data,l=o.isSomethingLoading,u=null===s||void 0===s?void 0:s.find((function(e){return e.id===t}));if(!u)return l?null:(0,c.jsx)("span",{className:"break-normal text-sm",children:(0,a.t)("deactivated_member")});var d=u.name,f=u.avatar_url;return(0,c.jsxs)(c.Fragment,{children:[!r&&(0,c.jsx)("span",{className:"pl-3",children:(0,c.jsx)("div",{className:"float-left",children:(0,c.jsx)(Pt.sJ,{size:"6",src:f,name:d})})}),(0,c.jsx)("span",{className:"break-normal text-sm",children:d})]})},jY=function(e){var t=e.idCollection,r=void 0===t?[]:t,n=e.children,i=(0,f.useQueries)(r.map((function(e){return{queryKey:["COMMUNITY_MEMBERS_LIST",e],queryFn:function(){return(0,Er.UT)(S.av.communityMembers.list({params:{ids:e,with_deleted:!0}}))},enabled:!(null===e||void 0===e||!e.length)}})));return(0,c.jsx)(YL.Provider,{value:i,children:n})};function wY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wY(Object(r),!0).forEach((function(t){PY(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wY(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SY=(0,fn.uniqueId)(),kY="settings.workflows.view.run",CY=function(e){var t=e.workflowId,r=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.perPage,a=void 0===o?20:o,s=i.initialPage,l=void 0===s?1:s,c=i.workflowId,u=i.runId,d=i.options,m=["workflow-run-tasks",a,c,u],p=OY({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===d?{}:d),h=(0,f.useInfiniteQuery)(m,(function(e){var t=e.pageParam,r=void 0===t?l:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,per_page:a};return vn.nH.fetchTasksInRun({workflowId:c,runId:u,params:i})}),p),b=(0,n.useMemo)((function(){var e;return(null===(e=h.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=h.data)||void 0===e?void 0:e.pages]),y=(null===(t=b[0])||void 0===t?void 0:t.total_count)||0,v=(null===(r=b[0])||void 0===r?void 0:r.per_page)||a,g=(0,n.useMemo)((function(){return mw()(b.map((function(e){return e.records})))}),[b]);return OY(OY({},h),{},{queryKey:m,totalTasks:y,tasks:g,pageSize:v,pages:b})}({runId:e.runId,workflowId:t}),i=r.fetchNextPage,o=r.hasNextPage,s=r.tasks,u=r.pages,d=r.isLoading,m=r.isError,p=CV(),h=(0,n.useMemo)((function(){if(!d&&!m)return u.map((function(e){return e.records.map((function(e){return e.community_member_id}))}))}),[d,m,u]);return d?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)("div",{className:"flex flex-col gap-y-7",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)([kY,"tasks"])}),(0,c.jsx)(jY,{idCollection:h,children:(0,c.jsx)(nW.Z,{next:i,hasMore:o,dataLength:s.length,scrollableTarget:SY,children:(0,c.jsxs)(Fu.i,{children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{"data-testid":"workflow-runs-member-column"}),(0,c.jsx)("col",{"data-testid":"workflow-runs-status-column",className:"min-w-[10rem]"}),(0,c.jsx)("col",{"data-testid":"workflow-runs-view-column",className:"min-w-[6rem]"})]}),(0,c.jsx)(Fu.i.TableHead,{children:(0,c.jsxs)(Fu.i.Tr,{children:[(0,c.jsx)(Fu.i.Th,{children:(0,c.jsx)(Fu.i.TableHeaderText,{children:(0,a.t)([kY,"member"])})}),(0,c.jsx)(Fu.i.Th,{children:(0,c.jsx)(Fu.i.TableHeaderText,{children:(0,a.t)([kY,"status_header"])})}),(0,c.jsx)(Fu.i.Th,{})]})}),(0,c.jsx)(Fu.i.TableBody,{children:s.map((function(e){return(0,c.jsxs)(Fu.i.Tr,{children:[(0,c.jsx)(Fu.i.Td,{children:(0,c.jsx)(_Y,{id:e.community_member_id})}),(0,c.jsx)(Fu.i.Td,{children:(0,c.jsx)(HM,{result:e.status})}),(0,c.jsx)(Fu.i.Td,{children:(0,c.jsx)("button",{type:"submit",onClick:function(){return t={taskId:e.id},r=t.taskId,void p.show({taskId:r});var t,r},children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",color:"default",children:(0,a.t)([kY,"view_task"])})})})]},e.id)}))})]})})})]})},NY=function(e){var t=e.label,r=e.amount,n=e.tooltipContent;return(0,c.jsxs)("div",{className:"flex gap-1",children:[n&&(0,c.jsx)(sO.T,{content:n,className:"flex cursor-help",placement:"top",children:(0,c.jsx)("span",{className:"flex",children:(0,c.jsx)(bt.JO,{type:"12-question-mark",size:12,className:"!text-default !h-3 !w-3"})})}),(0,c.jsx)(y.Z.LabelSm,{weight:"medium",children:t}),(0,c.jsx)(y.Z.LabelSm,{color:"text-default",children:r})]})},TY=r(11699);function AY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return EY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EY(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IY=function(e){var t=AY((0,n.useState)((0,Xe.qG)(e)),2),r=t[0],i=t[1];return(0,n.useEffect)((function(){var t=setInterval((,1e3);return function(){return clearInterval(t)}}),[]),(0,Xe.He)(r)},DY="settings.workflows.view.run",LY=function(e){var t=e.createdAt,r=IY(t),n="".concat((0,a.t)([DY,"time_elapsed"]),": ").concat(r);return(0,c.jsx)(l.ZT.LabelXs,{color:"default",children:n})},MY=function(e){var t=e.createdAt,r=e.updatedAt,n=new Date(r),i=new Date(t),o=(0,TY.Z)(n,i),s=(0,Xe.He)(o),u="".concat((0,a.t)([DY,"time_elapsed"]),": ").concat(s);return(0,c.jsx)(l.ZT.LabelXs,{color:"default",children:u})},RY="settings.workflows.view.run",FY=function(e){var t=e.run,r=t.completion_percentage,n=t.created_at,i=t.completion_ratio,o=t.updated_at,s=100===r;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,c.jsxs)("div",{className:"flex gap-x-3",children:[(0,c.jsxs)(l.ZT.TitleXl,{color:"text-darkest",children:[r,"%"]}),(0,c.jsx)("div",{className:"self-end",children:(0,c.jsx)(l.ZT.LabelXs,{weight:"medium",color:"text-default",children:s?(0,a.t)([RY,"completed"]):(0,a.t)([RY,"running"])})})]}),(0,c.jsx)(l.Nv,{progress:r})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[s?(0,c.jsx)(MY,{createdAt:n,updatedAt:o}):(0,c.jsx)(LY,{createdAt:n}),(0,c.jsxs)(l.ZT.LabelXs,{color:"default",children:[i," ",(0,a.t)([RY,"members"])]})]})]})},BY="settings.workflows.view.run",UY=function(e){var t=e.run,r=t||{},n=r.created_at,i=r.status_count,o=i.partial_success,s=i.success,l=i.failed,u=i.skipped,d=(0,Xe.wc)({dateTime:new Date(n),format:"short_date_at_short_time"});return(0,c.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,c.jsx)(y.Z.TitleSm,{color:"text-darkest",weight:"semibold",children:d}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-8 lg:gap-y-4",children:[(0,c.jsx)(FY,{run:t}),(0,c.jsx)("div",{className:"flex justify-between",children:(0,c.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row",children:[(0,c.jsx)(NY,{label:"".concat((0,a.t)([BY,"succeeded"]),":"),amount:s}),(0,c.jsx)(NY,{label:"".concat((0,a.t)([BY,"failed"]),":"),amount:l}),(0,c.jsx)(NY,{label:"".concat((0,a.t)([BY,"partial_success"]),":"),amount:o,tooltipContent:(0,a.t)([BY,"partial_success_tooltip"])}),(0,c.jsx)(NY,{label:"".concat((0,a.t)([BY,"skipped"]),":"),amount:u,tooltipContent:(0,a.t)([BY,"skipped_tooltip"])})]})})]})]})};function zY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return VY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VY(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ZY=function(e){var t=e.runId,r=e.workflowId,i=function(e){var t=e.workflowId,r=e.runId,i=zY((0,n.useState)(!1),2),o=i[0],s=i[1],c=(0,l.pm)();return(0,f.useQuery)(["workflow-run",t,r],(,{refetchInterval:!o&&5e3,onSuccess:onError:function(e){var t=e.errorDetails,r=e.message;if((0,fn.isString)(t))return c.error(t);c.error(null!==r&&void 0!==r?r:(0,a.t)("something_went_wrong"))}})}({runId:t,workflowId:r}),o=i.data,s=i.isLoading,u=i.isError;if(s)return(0,c.jsx)(l.aN,{center:!0});if(u)return null;var d=100===o.completion_percentage;return(0,c.jsx)("div",{className:"h-full overflow-y-auto p-6 xl:px-4 xl:py-9",id:SY,children:(0,c.jsxs)("div",{className:"mx-auto flex max-w-2xl flex-col gap-y-12",children:[(0,c.jsx)(UY,{run:o}),d&&(0,c.jsx)(CY,{runId:t,workflowId:r})]})})},HY=function(e){var t=e.status,r="text-default";return t===CL.IN_PROGRESS&&(r="text-v2-info"),(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",color:r,children:(0,a.t)(["settings.workflows.table.result",t],{defaultValue:t||"\u2500"})})},qY=function(e){var t=e.run,r=e.onSelect,n=t.created_at,i=t.initiated_by_community_member_id,o=t.status,a=(0,Xe.wc)({dateTime:new Date(n),format:"short_date_at_short_time"});return(0,c.jsx)("button",{type:"submit",onClick:function(){return r(t.id)},className:"w-full px-6 py-4",children:(0,c.jsxs)("div",{className:"flex justify-between gap-x-4",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-1 truncate",children:[(0,c.jsx)(_V.Y,{children:(0,c.jsx)(l.ZT.LabelSm,{as:"time",dateTime:n,weight:"medium",color:"dark",truncate:!0,children:a})}),(0,c.jsx)(_V.Y,{children:(0,c.jsx)(l.ZT.LabelXs,{truncate:!0,children:(0,c.jsx)(tM,{id:i,isAvatarHidden:!0})})})]}),(0,c.jsx)("div",{className:"text-right",style:{flexBasis:"6rem"},children:(0,c.jsx)(HY,{status:o})})]})})},GY=(0,fn.uniqueId)(),WY=function(e){var t=e.fetchNextPage,r=e.hasNextPage,i=e.runs,o=e.selectedRunId,s=e.onSelectRun,u=(0,n.useMemo)((function(){var e;return null!==(e=null===i||void 0===i?void 0:i.map((function(e){return e.initiated_by_community_member_id})))&&void 0!==e?e:[]}),[i]);return(0,c.jsx)(eM,{ids:u,children:(0,c.jsxs)("div",{className:"border-r-primary hidden h-full flex-col overflow-y-auto border-r lg:flex",children:[(0,c.jsx)("div",{className:"px-6 py-4",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)("settings.workflows.view.run.title")})}),(0,c.jsx)("div",{style:{height:"calc(100% - 60px)"},className:"overflow-y-auto",id:GY,children:(0,c.jsx)(nW.Z,{next:t,hasMore:r,dataLength:i.length,scrollableTarget:GY,children:(0,c.jsx)("ul",{className:"list-none",children:i.map((function(e){return(0,c.jsx)("li",{className:J()("hover:bg-tertiary",{"bg-tertiary":o===e.id}),children:(0,c.jsx)(qY,{run:e,onSelect:s})},e.id)}))})})})]})})};function QY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QY(Object(r),!0).forEach((function(t){JY(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QY(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return YY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YY(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var XY=function(e){var t=e.workflow,r=$Y((0,n.useState)(null),2),i=r[0],o=r[1],s=t||{},u=s.id,d=s.workflow_type,f=x$({workflowId:u}),m=f.runs,p=f.isLoading;(0,n.useEffect)((function(){var e=(0,fn.head)(m);!i&&e&&o(e.id)}),[m,i]);return d!==vL&&d!==gL?(0,c.jsx)(dr.l_,{to:S.o0.view({workflowId:u})}):p?(0,c.jsx)(l.aN,{center:!0}):p||0!==m.length?(0,c.jsxs)("div",{className:"grid h-full items-start lg:grid-cols-[minmax(320px,1fr)_5fr]",children:[(0,c.jsx)(WY,KY(KY({},f),{},{selectedRunId:i,onSelectRun:function(e){o(e)}})),i&&(0,c.jsx)(ZY,{runId:i,workflowId:u})]}):(0,c.jsx)("div",{className:"p-6 text-center",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:(0,a.t)(["settings.workflows.view.run","no_workflow_runs_found"])})})},eX=function(){var e=(0,dr.k6)(),t=(0,dr.$B)().path,r=function(){FK(e)};return(0,c.jsx)(BT.x,{isOpen:!0,onClose:r,shouldShowCloseButton:!0,contentPortalId:"workflows-view-workflow-modal",children:(0,c.jsx)(rW,{children:function(e){var n=e.workflow;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(BT.x.Header,{className:"items-center justify-between",children:(0,c.jsx)(L$,{workflow:n,onClose:r})}),(0,c.jsx)(BT.x.Body,{wrapperClassName:"max-w-none h-full",children:(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{path:"".concat(t),exact:!0,children:(0,c.jsx)("div",{className:"mx-auto max-w-[45rem] p-6",children:(0,c.jsx)(xY,{workflow:n})})}),(0,c.jsx)(dr.AW,{path:"".concat(t,"/runs"),exact:!0,children:(0,c.jsx)(XY,{workflow:n})})]})})]})}})})},tX=function(){return(0,c.jsx)(eX,{})},rX=function(){var e=(0,dr.$B)().path;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{path:e,exact:!0,children:(0,c.jsx)(_G,{})}),(0,c.jsx)(dr.AW,{path:"".concat(e,"/new"),children:(0,c.jsx)(d$,{})}),(0,c.jsx)(dr.AW,{path:"".concat(e,"/history"),exact:!0,children:(0,c.jsx)(rJ,{})}),(0,c.jsx)(dr.AW,{path:"".concat(e,"/view/:id"),children:(0,c.jsx)(tX,{})}),(0,c.jsx)(dr.AW,{path:"".concat(e,"/edit/:id"),exact:!0,children:(0,c.jsx)(UK,{})}),(0,c.jsx)(dr.AW,{render:)]}),(0,c.jsx)(A.S,{title:(0,a.t)("settings.workflows.title")})]})},nX="settings-layout",iX="#".concat(nX),oX=function(){var e=(0,v.wh)(),t=e.isLoading,r=e.currentCommunitySettings,i=e.currentCommunity,o=(0,B.Aq)(i),s=(0,dr.k6)(),u=(0,dr.TH)().pathname,d=(0,lr.wC)().display_community_switcher,f=(0,Js.I)(),m=(r||{}).affiliates_phase1_enabled,p=LE.s.some((function(e){return u.startsWith(e)})),h=(0,Ws.x)();if((0,n.useEffect)((function(){var e=s.listen(();return function(){return e()}})),(0,n.useEffect)((function(){LE.s.some(()?document.body.classList.remove("has-community-switcher"):d&&document.body.classList.add("has-community-switcher")}),[u,d]),t)return(0,c.jsx)(l.aN,{});if(!p)return null;var b=m&&i.affiliates_feature_flag_enabled;return(0,c.jsx)(lr.JX,{selector:iX,children:(0,c.jsx)(Qs._p,{section:Qs.kS.ADMIN,children:(0,c.jsx)(Eb,{shouldHideMainHeader:!1,id:nX,hideAppBar:o,children:(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(Ks.i,{path:"/settings",exact:!0,children:(0,c.jsx)(uh,{})}),(0,c.jsx)(Ks.i,{path:"/settings/custom_domain",exact:!0,children:(0,c.jsx)(vd,{})}),(0,c.jsx)(Ks.i,{path:"/settings/home",exact:!0,children:(0,c.jsx)(xb,{})}),(0,c.jsx)(Ks.i,{path:"/settings/onboarding",exact:!0,children:(0,c.jsx)(dr.l_,{to:"/members/onboarding"})}),(0,c.jsx)(Ks.i,{path:"/settings/community_ai",exact:!0,children:(0,c.jsx)(Au,{})}),(0,c.jsx)(Ks.i,{path:"/settings/spaces",exact:!0,children:(0,c.jsx)(tL,{})}),(0,c.jsx)(Ks.i,{path:"/settings/code_snippets",exact:!0,children:(0,c.jsx)(Yc,{})}),(0,c.jsx)(Ks.i,{path:"/settings/weekly_digest",exact:!0,children:(0,c.jsx)(sL,{})}),(0,c.jsx)(Ks.i,{path:"/settings/messaging",exact:!0,children:(0,c.jsx)(Uy,{})}),(0,c.jsx)(Ks.i,{path:"/settings/sso",exact:!0,children:(0,c.jsx)(TI,{})}),(0,c.jsx)(Ks.i,{path:"/settings/embed",exact:!0,children:(0,c.jsx)(qp,{})}),(0,c.jsx)(Ks.i,{path:"/settings/posts",exact:!0,children:(0,c.jsx)(BC,{})}),(0,c.jsx)(dr.AW,{path:"/settings/plans",exact:!0,children:(0,c.jsx)(vk,{})}),(0,c.jsx)(dr.AW,{path:"/settings/billing",children:(0,c.jsx)(gk,{})}),(0,c.jsx)(Ks.i,{path:"/settings/api",children:(0,c.jsx)(Pc,{})}),(0,c.jsx)(Ks.i,{path:"/settings/moderation",children:(0,c.jsx)(_v,{})}),(0,c.jsx)(Ks.i,{path:"/settings/paywall_groups",exact:!0,children:(0,c.jsx)(xx,{})}),h&&(0,c.jsx)(Ks.i,{path:"/settings/paywall_tax_settings",exact:!0,children:(0,c.jsx)(S_,{})}),(0,c.jsx)(Ks.i,{path:"/settings/paywalls",exact:!1,children:(0,c.jsx)(VP,{})}),b&&(0,c.jsx)(Ks.i,{path:"/settings/affiliates_directory",exact:!0,children:(0,c.jsx)(Nw,{})}),b&&(0,c.jsx)(Ks.i,{path:"/settings/affiliates_commissions",exact:!0,children:(0,c.jsx)(G_,{})}),b&&(0,c.jsx)(Ks.i,{path:"/settings/affiliates_settings",exact:!0,children:(0,c.jsx)(LO,{})}),(0,c.jsx)(Ks.i,{path:"/settings/member_billing",children:(0,c.jsx)(Ib,{})}),(0,c.jsx)(Ks.i,{path:S.qk.paywallsAdminDashboard.subscriptions(),exact:!1,children:(0,c.jsx)(Jx,{})}),(0,c.jsx)(Ks.i,{path:S.qk.paywallsAdminDashboard.charges(),exact:!1,children:(0,c.jsx)(fx,{})}),(0,c.jsx)(Ks.i,{path:S.lA.paywalls.bulk_logs,exact:!0,children:(0,c.jsx)(ug,{})}),(0,c.jsx)(Ks.i,{path:"/settings/member_tags",exact:!1,children:(0,c.jsx)(Ly,{})}),(0,c.jsx)(Ks.i,{path:"/settings/coupons",exact:!0,children:(0,c.jsx)(en,{})}),(0,c.jsx)(Ks.i,{path:"/settings/theme",exact:!0,children:(0,c.jsx)(Mp,{})}),(0,c.jsx)(dr.AW,{path:"/settings/live_streams",exact:!1,children:(0,c.jsx)($t,{})}),(0,c.jsx)(Ks.i,{path:"/members/manage",exact:!0,children:(0,c.jsx)(qs,{})}),(0,c.jsx)(Ks.i,{path:"/members/new",exact:!0,children:(0,c.jsx)(an,{pageTitle:(0,a.t)("settings.new_member.title")})}),(0,c.jsx)(Ks.i,{path:"/members/edit/:id",exact:!1,children:(0,c.jsx)(an,{pageTitle:(0,a.t)("settings.edit_member.title")})}),(0,c.jsx)(Ks.i,{path:"/members/invitation_links",children:(0,c.jsx)(Lo,{})}),(0,c.jsx)(Ks.i,{path:"/members/invitation_links/:id/edit",exact:!0,children:(0,c.jsx)(ln,{})}),(0,c.jsx)(Ks.i,{path:"/members/invitation_links/new",exact:!0,children:(0,c.jsx)(Gs,{})}),(0,c.jsx)(Ks.i,{path:"/members/invitation_links/:action",exact:!0,children:(0,c.jsx)(an,{pageTitle:(0,a.t)("settings.invitation_links.title")})}),(0,c.jsx)(Ks.i,{path:"/members/invitation_links/:id/:action",exact:!0,children:(0,c.jsx)(an,{pageTitle:(0,a.t)("settings.invitation_links.title")})}),(0,c.jsx)(Ks.i,{path:"/members/onboarding",exact:!0,children:(0,c.jsx)(lg,{})}),(0,c.jsx)(Ks.i,{path:"/members/bulk_import",exact:!0,children:(0,c.jsx)(an,{pageTitle:(0,a.t)("settings.import_members.title")})}),(0,c.jsx)(Ks.i,{path:"/members/bulk_import",exact:!0,children:(0,c.jsx)(an,{pageTitle:(0,a.t)("settings.import_members.title")})}),(0,c.jsx)(Ks.i,{path:"/settings/members/bulk_import_tasks",exact:!0,children:(0,c.jsx)(zc,{})}),(0,c.jsx)(Ks.i,{path:"/members/profile_fields",children:(0,c.jsx)(DE,{})}),(0,c.jsx)(Ks.i,{path:"/settings/analytics/:action?",children:(0,c.jsx)(Vl,{})}),f&&(0,c.jsx)(Ks.i,{path:"/settings/workflows",children:(0,c.jsx)(rX,{})}),(0,c.jsx)(Ks.i,{path:"/settings/:component/:action/",exact:!0,children:(0,c.jsx)(Rp,{})}),(0,c.jsx)(Ks.i,{path:"/settings/:component",exact:!0,children:(0,c.jsx)(Rp,{})}),(0,c.jsx)(Ks.i,{path:"/settings",exact:!0,children:(0,c.jsx)(Rp,{title:(0,a.t)("general")})})]})})})})},aX=r(81967),sX=r(1669),lX=r(56091),cX=r(19300),uX=r(83878),dX=r(393),fX=function(){var e=(0,v.wh)(),t=e.currentCommunityMember,r=e.isViewOnlyMasquerading,n=e.masqueradingEntity,i=(0,lr.wC)().masquerade_referrer_url,o=(0,dX.D)(),s=!!i&&!o,l=(0,uX.Vu)(),u=l.isBannerVisible,d=l.openSearch,f=l.hideBanner;if(!s&&!u)return null;var m=(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)("div",{className:"mr-2",children:(0,c.jsx)(cX.Di,{weight:"semibold",color:"text-feature-dark",children:t&&s?(0,a.t)("view_only_masquerading.banner.title_selected"):(0,a.t)("view_only_masquerading.banner.title_not_selected")})}),(0,c.jsxs)("button",{type:"button",onClick:d,className:"flex","aria-label":(0,a.t)("view_only_masquerading.banner.title_selected"),children:[(0,c.jsx)("div",{className:"border-dark dark:border-secondary border-b border-dashed",children:(0,c.jsx)(cX.Di,{color:"text-feature-dark",children:t&&s?n?(0,fn.truncate)(n.name,{length:50}):(0,fn.truncate)(t.name,{length:50}):(0,a.t)("view_only_masquerading.banner.placeholder")})}),(0,c.jsx)("div",{children:(0,c.jsx)(bt.JO,{type:"20-chevron-down-sm",className:"text-feature-dark ml-[3px]","aria-hidden":!0})})]})]}),p=(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)("div",{className:"mr-2",children:(0,c.jsx)(cX.Di,{weight:"semibold",color:"text-feature-dark",children:(0,a.t)("masquerade.banner.title",{name:null===t||void 0===t?void 0:t.name})})})});return(0,c.jsxs)("div",{className:"flex h-12 items-center justify-between bg-gray-900 px-6 dark:bg-gray-700",children:[(0,c.jsx)("div",{})," ",r||u?m:p,(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"button",onClick:function(){f(),i&&(window.location.href=i)},children:(0,c.jsx)(cX.Di,{color:"text-feature-dark",weight:"semibold",children:(0,a.t)("view_only_masquerading.banner.exit")})})})]})},mX=r(64624),pX=[Ba.Cz,mX.Rl,Ba.x3,ne.DQ,uX.hg],hX=function(e){var t=e.children;return pX.reduceRight((,t)},bX="COMMUNITY_MEMBER_SETTINGS",yX=function(e){var t=e.member,r=e.params,n=void 0===r?{}:r,i=t.id,o=t.is_deleted,a=[bX,i,n],s=(0,l.pm)();return(0,f.useQuery)(a,(function(){return(0,Er.UT)(S.av.communityMember.settings({memberId:i}))}),{enabled:!o&&Boolean(i),onError:function(e){s.error(e.message)}})},vX=r(41457),gX=r(15130),xX=r(88291),_X={page_name:gX.$q.EDIT_PROFILE},jX=(0,n.createContext)({profileInfoQuery:{data:{member:{}}}});jX.displayName="AdminMemberEditModalContext";var wX=function(e){var t=e.children,r=(0,dr.UO)().memberPublicId,n=(0,xX.P)({memberPublicId:r,params:_X}).getProfileInfoQuery;return(0,c.jsx)(jX.Provider,{value:{memberPublicId:r,profileInfoQuery:n},children:t})},OX=function(){return(0,n.useContext)(jX)},PX=r(65193),SX=["space_groups","spaces","member_tags","moderator","messaging_disabled","community_member_profile_fields_attributes"];function kX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kX(Object(r),!0).forEach((function(t){NX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TX(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function AX(e){return function(e){if(Array.isArray(e))return EX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return EX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IX="account.profile_form",DX=Kp.Z_().required((0,a.t)([IX,"is_required"],{fieldName:(0,a.t)([IX,"name"])})).trim().max(255,(0,a.t)([IX,"is_max_length"],{fieldName:(0,a.t)([IX,"name"])})),LX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,r=void 0===t?[]:t,n=e.not_visible,i=void 0===n?[]:n;return[].concat(AX(r),AX(i))},MX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{name:e.name,headline:e.headline,messaging_disabled:!e.messaging_enabled_by_admin,member_tags:(e.member_tags||[]).map((function(e){return e.id})),is_flagged:t.is_flagged,admin:e.admin,spaces:t.space_ids.map((function(e){return Number(e)})),space_groups:t.space_group_ids.map((function(e){return Number(e)})),moderator:{spaces:t.moderating_space_ids.map((function(e){return Number(e)})),space_groups:t.moderating_space_group_ids.map((function(e){return Number(e)}))},community_member_profile_fields_attributes:(0,PX.gj)(LX(e.profile_fields))}},RX=r(74),FX=r(29572),BX=r(95725),UX=function(e){var t=e.member,r=e.skipAccessUpdates,n=(0,l.pm)(),i=(0,f.useQueryClient)();return(0,f.useMutation)((function(e){return(0,Er.aU)(S.av.communityMember.update({memberId:t.id}),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.space_groups,i=e.spaces,o=e.member_tags,a=e.moderator,s=e.messaging_disabled,l=e.community_member_profile_fields_attributes,c=TX(e,SX),u={space_group_ids:n,space_ids:i,member_tag_ids:o,moderator_space_ids:a.spaces,moderator_space_group_ids:a.space_groups,messaging_disabled:s,skip_access_updates:r},d=CX({preferences:{messaging_enabled_by_admin:!s},community_member_profile_fields_attributes:function(){if(l){var e=LX(t.profile_fields);return(0,PX.oj)(l,e)}}()},c);return CX({community_member:d},u)}(e,t,r))}),{onSuccess:function(){n.success(I18n.t("profile_saved_successfully")),i.invalidateQueries(xX.W),i.invalidateQueries(bX),i.invalidateQueries(BX.K),i.invalidateQueries(RX.Z),i.removeQueries(FX.i)},onError:function(e){var r=e.errorDetails,i=e.message;if((0,fn.isString)(r))return n.error(r);n.error(i),(0,aX.d)({err:e,member:t})}})},zX=r(60905),VX=function(){var e=(0,v.wh)(),t=e.currentCommunityMember,r=(t=void 0===t?{}:t).is_admin,i=e.isLoading,o=(0,zX.o)().redirectBack,s=r,l=(0,dr.k6)(),c=(0,dr.TH)(),u=OX(),d=u.memberPublicId,f=u.profileInfoQuery,m=(0,dr.$B)(S.WF.index()).isExact,p=(0,dr.$B)(S.WF.billing()),h=!(null===p||void 0===p||!p.isExact),b=f.data,y=f.isLoading,g=f.isError,x=(0,n.useMemo)((function(){var e=S$(c);return[{label:(0,a.t)("admin_member_edit_modal.nav.info"),href:e(S.WF.info(d)),replace:!0},{label:(0,a.t)("admin_member_edit_modal.nav.access"),href:e(S.WF.access(d)),replace:!0},{label:(0,a.t)("admin_member_edit_modal.nav.billing"),href:e(S.WF.billing(d)),replace:!0}]}),[d,c]);return(0,n.useEffect)((,[i,s,o]),(0,n.useEffect)((function(){if(m){var e=c.state;l.replace({pathname:S.WF.info(d),state:e})}}),[m,l,d,c]),{handleClose:function(){o()},sidebarNavItems:x,profileData:b,isLoading:y||i,isError:g,memberPublicId:d,allowedToRender:s,isBillingPath:h}},ZX=function(e){var t=e.title,r=e.cancelText,n=e.confirmVariant,i=void 0===n?"primary":n,o=e.confirmText,a=e.action,s=e.children,l=(0,ne.yT)(),u=return(0,c.jsx)(Gr.cV,{isOpen:l.visible,title:t,onClose:u,cancelText:r,onConfirm:function(){a(),u()},confirmVariant:i,confirmText:o,disabled:!1,children:s})};function HX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GX="admin_member_edit_modal.access.access.add_access_confirmation",WX=ne.uc.create((function(e){return(0,c.jsx)(ZX,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HX(Object(r),!0).forEach((function(t){qX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({cancelText:(0,a.t)([GX,"cancel"]),confirmText:(0,a.t)([GX,"confirm"])},e))}));function QX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function KX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var JX="admin_member_edit_modal.access.access.remove_access_confirmation",$X=ne.uc.create((function(e){return(0,c.jsx)(ZX,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QX(Object(r),!0).forEach((function(t){KX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({cancelText:(0,a.t)([JX,"cancel"]),confirmVariant:"danger",confirmText:(0,a.t)([JX,"confirm"])},e))})),YX="admin_member_edit_modal.access",XX=function(e,t){return{title:(0,a.t)([YX,"access.add_access_confirmation.add_space_group.title"]),children:(0,c.jsx)(y.Z.BodyMd,{children:(0,a.t)([YX,"access.add_access_confirmation.add_space_group.description"],{count:e.length,community_member_name:t,space_groups:e.map((function(e){return e.name})).join(", ")})})}},e0=r(28803),t0=function(e){return{id:e.id,name:e.name,properties:{automatically_add_members_to_new_spaces:e.automatically_add_members_to_new_spaces},spaces:[]}};function r0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r0(Object(r),!0).forEach((function(t){i0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o0=function(e){var t=e.member,r=function(e){var t=e.spaceGroupMembers,r=e.spaceMembers,n=(0,Ov.zo)({serializeSpaceGroup:t0,serializeSpace:Ov.lV}),i=n.options,o=n.spaceGroupIndex,a=n.spaceGroupRecords,s=n.spaceRecords,l=function(e){return r.some((function(t){return t.space_id===e&&(0,jk.wQ)(t.access_type)}))};return{spaceGroupRecords:a,spaceRecords:s,spaceGroupOptions:i,spaceGroupIndex:o,isSpaceCreatedByPaywall:l,isSpaceGroupCreatedByPaywall:function(e){return t.some((function(t){return t.space_group_id===e&&(0,e0.TO)(t.access_type)}))},isSpaceGroupAddMembersToNewSpaces:showSpacesIdsWithinSpaceGroupCreatedByPaywall:function(e){return e.filter((function(e){return l(e.id)}))}}}({spaceGroupMembers:e.spaceGroupMembers,spaceMembers:e.spaceMembers}),n=r.spaceRecords,i=r.spaceGroupOptions,o=r.isSpaceCreatedByPaywall,s=r.isSpaceGroupCreatedByPaywall,l=r.isSpaceGroupAddMembersToNewSpaces,u=r.showSpacesIdsWithinSpaceGroupCreatedByPaywall,d=(0,pr.Gc)().watch,f=d("spaces"),m=d("space_groups"),p=(0,ne.yT)($X).show,h=(0,ne.yT)(WX).show;return{options:i,addAllCallback:function(e){var r=i.filter((function(e){return!m.includes(e.id)&&e.properties.automatically_add_members_to_new_spaces}));r.length>0?h(n0({action:e},XX(r,t.name))):e()},addSpaceGroupCallback:function(e,r){l(r.id)?h(n0({action:e},XX([r],t.name))):e()},removeSpaceCallback:function(e,r){var n,i;o(r.id)?p(n0({action:e},(n=r.name,i=t.name,{title:(0,a.t)([YX,"access.remove_access_confirmation.title"],{name:n}),children:(0,c.jsx)(y.Z.BodyMd,{children:(0,a.t)([YX,"access.remove_access_confirmation.removing_space"],{community_member_name:i})})}))):e()},removeSpaceGroupCallback:function(e,r){if(s(r.id)){var n=u(r.spaces);p(n0({action:e},function(e,t,r){return{title:(0,a.t)([YX,"access.remove_access_confirmation.title"],{name:e}),children:(0,c.jsx)(y.Z.BodyMd,{children:(0,a.t)([YX,"access.remove_access_confirmation.removing_space_group"],{count:t.length,space_names:t.map((function(e){return e.name})).join(", "),community_member_name:r})})}}(r.name,n,t.name)))}else e()},removeAllCallback:function(e){var r,i,s=n.filter((function(e){return f.includes(e.id)&&o(e.id)}));s.length>0?p(n0({action:e},(r=s,i=t.name,{title:(0,a.t)([YX,"access.remove_access_confirmation.remove_all.title"]),children:(0,c.jsx)(y.Z.BodyMd,{children:(0,a.t)([YX,"access.remove_access_confirmation.remove_all.description"],{community_member_name:i,spaces:r.map((function(e){return e.name})).join(", ")})})}))):e()}}},a0=function(){var e=OX().profileInfoQuery.data,t=yX({member:e}),r=t.data,n=t.isLoading,i=o0({member:e,spaceGroupMembers:null===r||void 0===r?void 0:r.space_group_members,spaceMembers:null===r||void 0===r?void 0:r.space_members}),o=i.options,a=i.addAllCallback,s=i.addSpaceGroupCallback,u=i.removeSpaceCallback,d=i.removeSpaceGroupCallback,f=i.removeAllCallback;return n?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)(jv.i,{options:o,className:"h-[calc(100%_-_9rem)] flex-auto",parentFieldName:"space_groups",childFieldName:"spaces",children:[(0,c.jsx)(jv.i.Header,{children:(0,c.jsx)(jv.i.SearchBar,{})}),(0,c.jsxs)(jv.i.Body,{className:"overflow-y-auto overscroll-contain",children:[(0,c.jsxs)(jv.i.ListHeader,{children:[(0,c.jsx)(jv.i.ListHeaderColumnNoAccess,{onAddAll:a}),(0,c.jsx)(jv.i.ListHeaderColumnAccessGranted,{onRemoveAll:f})]}),(0,c.jsxs)(jv.i.ListContainer,{children:[(0,c.jsx)(jv.i.ListMobile,{onRemoveChild:u,onRemoveParent:d,onAddParent:s}),(0,c.jsx)(jv.i.ListNoAccess,{onAddParent:s}),(0,c.jsx)(jv.i.ListAccessGranted,{onRemoveChild:u,onRemoveParent:d})]})]})]})},s0=function(){return(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 text-center",children:[(0,c.jsx)("h2",{className:"text-xl font-bold",children:(0,a.t)("admin_member_edit_modal.error.title")}),(0,c.jsx)("p",{className:"text-sm",children:(0,a.t)("admin_member_edit_modal.error.subtitle")})]})},l0=function(e){var t=e.getValue;return(0,c.jsx)("div",{className:"flex",children:(0,Xe.wc)({dateTime:new Date(t()),format:Xe.fK.long_date})})},c0=function(e){var t=(0,e.getValue)();return t?(0,c.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)(bt.JO,{type:"20-payments",className:"text-selector-active !w-4",size:20})}),(0,c.jsx)(y.Z.LabelSm,{color:"text-selector-active max-w-full",truncate:!0,children:t})]}):"-"},u0=function(e){var t=(0,e.getValue)(),r=t.spaceName,n=t.spaceGroupName;return(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:r}),(0,c.jsx)(y.Z.LabelSm,{color:"text-default",children:n})]})},d0=function(){var e=function(){var e=OX().profileInfoQuery.data,t=yX({member:e}),r=t.data,i=t.isLoading,o=(0,v.nT)().records,s=(0,v.e2)().records,l=(0,n.useMemo)((function(){var e;return(null!==(e=null===r||void 0===r?void 0:r.space_members)&&void 0!==e?e:[]).map((function(e){var t,r=null===e||void 0===e||null===(t=e.community_member_paywall_content_granted)||void 0===t?void 0:t.paywall,n=o.find((function(t){return t.id===e.space_id})),i=s.find(();return n&&i?{date:e.created_at,space:{spaceName:null===n||void 0===n?void 0:n.name,spaceGroupName:null===i||void 0===i?void 0:i.name},paywall:(null===r||void 0===r?void 0:r.name)||(null===r||void 0===r?void 0:r.display_name)}:null})).filter((function(e){return e}))}),[null===r||void 0===r?void 0:r.space_members,o,s]),c="!align-middle !py-3";return{columns:[{accessorKey:"date",header:(0,a.t)("admin_member_edit_modal.access.logs.list.headers.date"),cell:l0,cellClassName:c},{accessorKey:"space",cell:u0,header:(0,a.t)("admin_member_edit_modal.access.logs.list.headers.space"),cellClassName:c},{accessorKey:"paywall",header:(0,a.t)("admin_member_edit_modal.access.logs.list.headers.paywall"),cell:c0,cellClassName:"".concat(c," max-w-[180px]")}],spaceMembers:l,isLoadingSettings:i}}(),t=e.columns,r=e.spaceMembers,i=e.isLoadingSettings;return 0===r.length?(0,c.jsx)("div",{className:"text-dark max-w-8xl mx-auto",children:(0,c.jsxs)("div",{className:"bg-primary border-primary border p-6 text-center lg:rounded-lg lg:p-36 ",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"bold",children:(0,a.t)("admin_member_edit_modal.access.logs.list.empty_state.title")}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)(y.Z.BodyMd,{color:"text-default",children:(0,a.t)("admin_member_edit_modal.access.logs.list.empty_state.subtitle")})})]})}):(0,c.jsx)(Q.w,{columns:t,data:r,isLoading:i,children:(0,c.jsx)(Q.w.ScrollableContainer,{children:(0,c.jsxs)(Q.w.Table,{children:[(0,c.jsx)(Q.w.Header,{}),(0,c.jsx)(Q.w.Body,{})]})})})},f0=function(e){return{id:e.id,name:e.name}},m0=function(e){return{id:e.id,name:e.name,spaces:[]}},p0="moderator.spaces",h0="moderator.space_groups",b0=function(e){var t=function(e){var t=e.spaceGroupMembers,r=e.spaceMembers,n=(0,Ov.zo)({serializeSpace:f0,serializeSpaceGroup:m0}),i=n.spaceRecords,o=n.spaceGroupRecords,a=n.options,s=n.spaceGroupIndex,l=function(e){return r.some((function(t){return t.space_id===e&&(0,jk.wQ)(t.access_type)}))};return{spaceGroupRecords:o,spaceRecords:i,spaceGroupOptions:a,spaceGroupIndex:s,isSpaceCreatedByPaywall:l,isSpaceGroupCreatedByPaywall:function(e){return t.some((function(t){return t.space_group_id===e&&(0,e0.TO)(t.access_type)}))},showSpacesIdsWithinSpaceGroupCreatedByPaywall:}({spaceGroupMembers:e.spaceGroupModerators,spaceMembers:e.spaceModerators}),r=t.spaceGroupOptions,n=(0,pr.Gc)().setValue,i=[],o=[];r.forEach((function(e){i.push(e.id),e.spaces.forEach((function(e){o.push(e.id)}))}));return{options:r,addAllCallback:removeAllCallback:function(){n(h0,[]),n(p0,[])},parentFieldName:h0,childFieldName:p0}},y0="admin_member_edit_modal.access.moderation",v0=function(){var e=OX().profileInfoQuery.data,t=yX({member:e}),r=t.data,n=t.isLoading,i=b0({spaceGroupModerators:null===r||void 0===r?void 0:r.moderating_space_group_ids,spaceModerators:null===r||void 0===r?void 0:r.moderating_space_ids}),o=i.options,s=i.addAllCallback,l=i.removeAllCallback,u=i.parentFieldName,d=i.childFieldName;return n?(0,c.jsx)(gd.a,{center:!0}):(0,c.jsxs)(jv.i,{options:o,className:"h-[calc(100%_-_9rem)]",parentFieldName:u,childFieldName:d,children:[(0,c.jsx)(jv.i.Header,{children:(0,c.jsx)(jv.i.SearchBar,{})}),(0,c.jsxs)(jv.i.Body,{className:"overflow-y-auto overscroll-contain",children:[(0,c.jsxs)(jv.i.ListHeader,{children:[(0,c.jsx)(jv.i.ListHeaderColumn,{onClick:s,title:(0,a.t)([y0,"list_header.no_moderation"])}),(0,c.jsx)(jv.i.ListHeaderColumn,{onClick:l,title:(0,a.t)([y0,"list_header.moderation_granted"]),actionText:(0,a.t)([y0,"list_header.remove_all"])})]}),(0,c.jsxs)(jv.i.ListContainer,{children:[(0,c.jsx)(jv.i.ListMobile,{}),(0,c.jsx)(jv.i.ListNoAccess,{}),(0,c.jsx)(jv.i.ListAccessGranted,{})]})]})]})};function g0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g0(Object(r),!0).forEach((function(t){_0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var w0=(0,fn.uniqueId)(),O0=(0,fn.uniqueId)(),P0=function(){var e=OX().profileInfoQuery.data,t=yX({member:e}),r=t.data,n=t.isLoading,i=t.isError,o=VX().handleClose,s=UX({member:e,skipAccessUpdates:!1}).mutateAsync;if(n)return(0,c.jsx)(gd.a,{center:!0});var l=function(t){return{id:t,defaultValues:MX(e,r),onSubmit:(n=se().mark((),i=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){j0(o,r,i,a,s,"next",e)}function s(e){j0(o,r,i,a,s,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)}),className:"h-full",formClassName:"h-full"};var n,i};return(0,c.jsx)(vX.Z2.Root,{title:(0,a.t)("admin_member_edit_modal.access.title"),children:(0,c.jsxs)(vX.Z2.Body,{className:"h-full",children:[i&&(0,c.jsx)(s0,{}),e.is_deleted&&!i&&(0,c.jsx)(vX.d8,{}),!e.is_deleted&&!i&&(0,c.jsxs)(Uo.O.Group,{className:"mt-3 overflow-hidden md:mt-0",children:[(0,c.jsxs)(Uo.O.List,{className:"border-b",children:[(0,c.jsx)(Uo.O,{className:"!text-sm md:!text-base",children:(0,a.t)("admin_member_edit_modal.access.tabs.access")}),(0,c.jsx)(Uo.O,{className:"!text-sm md:!text-base",children:(0,a.t)("admin_member_edit_modal.access.tabs.moderation")}),(0,c.jsx)(Uo.O,{className:"!text-sm md:!text-base",children:(0,a.t)("admin_member_edit_modal.access.tabs.log")})]}),(0,c.jsxs)(Uo.O.Panels,{className:"overflow-hidden pb-12 pt-6",children:[(0,c.jsx)(Uo.O.Panel,{className:"overflow-hidden",children:(0,c.jsxs)(ce.l,x0(x0({},l(w0)),{},{children:[(0,c.jsx)(a0,{}),(0,c.jsx)(vX.$k,{formId:w0,onClose:o})]}))}),(0,c.jsx)(Uo.O.Panel,{className:"overflow-hidden",children:(0,c.jsxs)(ce.l,x0(x0({},l(O0)),{},{children:[(0,c.jsx)(v0,{}),(0,c.jsx)(vX.$k,{formId:O0,onClose:o})]}))}),(0,c.jsx)(Uo.O.Panel,{children:(0,c.jsx)(d0,{})})]})]})]})})};function S0(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function k0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C0(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N0=function(){var e=OX(),t=e.memberPublicId,r=e.profileInfoQuery,n=r.data,i=r.isLoading,o=k0((0,fr.k)(!1),2),s=o[0],c=o[1],u=(0,l.pm)().success,d=(0,dr.k6)(),f=(0,S.zd)({public_uid:t||""}),m=(0,Ba.pB)().findOrCreateChatRoom,p=function(){var e,t=(e=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({kind:P.g8,community_member_ids:[n.id]});case 2:t=e.sent,d.push((0,S.co)({url:(0,S.so)({uuid:t})}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){S0(o,n,i,a,s,"next",e)}function s(e){S0(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),h=[{label:(0,a.t)("admin_member_edit_modal.actions_dropdown.message"),onClick:p,isDanger:!1},{label:(0,a.t)("admin_member_edit_modal.actions_dropdown.copy_profile_link"),onClick:function(){$n()(window.location.origin+f),u((0,a.t)("post.share.link_copied"),{duration:"short",shouldUseProgress:!1})},isDanger:!1},{label:(0,a.t)("admin_member_edit_modal.actions_dropdown.view_as",{member_first_name:null===n||void 0===n?void 0:n.first_name}),onClick:function(){return(0,Za.g)({entityId:n.id,entityType:"CommunityMember"}).then(().catch((function(e){return console.error(e)}))},isDanger:!1},{label:(0,a.t)("admin_member_edit_modal.actions_dropdown.delete"),onClick:function(){c()},isDanger:!0}];return{profileData:n,isLoading:i,ACTIONS_DROPDOWN_LINKS:h,isShowingDeleteConfirmation:s,toggleIsShowingDeleteConfirmation:c}},T0=function(){var e=N0(),t=e.profileData,r=e.isLoading,n=e.ACTIONS_DROPDOWN_LINKS,i=e.isShowingDeleteConfirmation,o=e.toggleIsShowingDeleteConfirmation;return r||null!==t&&void 0!==t&&t.is_deleted?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Lt,{menuButtonEl:"div",className:"hidden md:block",direction:"bottom-end",button:(0,c.jsx)(l.Lt.MenuButton,{className:"!py-0",children:(0,c.jsxs)(l.zx,{variant:"secondary",type:"button",className:"!border-primary flex items-center",children:[(0,c.jsx)("div",{className:"mr-2",children:(0,a.t)("admin_member_edit_modal.actions_dropdown.button_label")}),(0,c.jsx)(bt.JO,{type:"20-chevron-down-sm",size:20,useWithStrokeCurrentColor:!0,"aria-hidden":!0})]})}),children:n.map((function(e){var t=e.label,r=e.onClick,n=e.isDanger;return(0,c.jsx)(l.Lt.ItemLink,{onClick:r,hasDanger:n,children:t},t)}))}),(0,c.jsx)(Ea,{member:t,isOpen:i,onClose:o})]})},A0=r(55391),E0=r(17986),I0=r(55389);function D0(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function L0(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){D0(o,n,i,a,s,"next",e)}function s(e){D0(o,n,i,a,s,"throw",e)}a(void 0)}))}}var M0="admin_member_edit_modal.billing.address",R0=function(){var e,t,r=OX().profileInfoQuery,n={id:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.id,name:null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.name},i=(0,E0.X)(),o=(0,I0.r)(n),s=o.billingInfo,u=o.isLoadingBillingInfo,d=o.refetchBillingInfo;if(u||!n.id)return(0,c.jsx)(l.aN,{});var f=function(){var e=L0(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.show({communityMember:n,onSuccess:),localeRoot:"admin_member_edit_modal.billing.address.billing_info_modal"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:"flex flex-col space-y-4 py-4",children:[(0,c.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,c.jsx)(y.Z.TitleMd,{children:s?(0,a.t)([M0,"title_with_address"]):(0,a.t)([M0,"title_without_address"])}),(0,c.jsx)(l.zx,{variant:"secondary",onClick:f,children:s?(0,a.t)([M0,"button_update"]):(0,a.t)([M0,"button_confirm"])})]}),s&&(0,c.jsx)(A0.Ec,{billingInfo:s})]})},F0=r(86646),B0=r(45560),U0=function(e){var t,r,n=e.subscriptionLength,i=(0,v.wh)().currentCommunity,o=(i=void 0===i?{}:i).has_payment_processor_enabled,s=(0,B0.E)(),u=OX().profileInfoQuery,d=null===u||void 0===u?void 0:u.data,f=null===(t=null===u||void 0===u||null===(r=u.data)||void 0===r?void 0:r.is_deleted)||void 0===t||t,m=(0,F0.O)({communityMemberId:null===d||void 0===d?void 0:d.id,queryParams:{enabled:Boolean(o&&(null===d||void 0===d?void 0:d.id))}}).paywallsListQuery,p=m.isLoading,h=m.data,b=o&&!f&&!p&&h.length>0;return u.isLoading||p?(0,c.jsx)(l.aN,{}):(0,c.jsxs)("div",{className:"flex flex-row justify-between py-4",children:[(0,c.jsx)(l.ZT.TitleMd,{children:(0,a.t)("admin_member_edit_modal.billing.subscriptions.header",{subscription_length:n})}),b&&(0,c.jsx)(l.zx,{variant:"secondary",onClick:function(){return s.show({communityMember:d})},children:(0,a.t)("admin_member_edit_modal.billing.subscriptions.create_subscription_button")})]})};function z0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z0(Object(r),!0).forEach((function(t){Z0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q0(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G0=function(){var e=function(){var e=H0((0,n.useState)(1),2),t=e[0],r=e[1],i=OX().memberPublicId,o=(0,Ex.p)({filters:{community_member_public_uid:i},page:t,setPage:r}),s=[V0(V0({},Sx.Qp.paywall),{},{header:(0,a.t)("admin_member_edit_modal.billing.subscriptions.columns.product")}),V0(V0({},Sx.Qp.status),{},{header:(0,a.t)("admin_member_edit_modal.billing.subscriptions.columns.status")}),V0(V0({},Sx.Qp.term),{},{header:(0,a.t)("admin_member_edit_modal.billing.subscriptions.columns.price")}),Sx.Qp.couponCode,V0(V0({},Sx.Qp.renewalDate),{},{header:(0,a.t)("admin_member_edit_modal.billing.subscriptions.columns.renews_on")}),Sx.Qp.actionMenu],l=(0,Px.X)("admin-member-edit-subscription-list"),c=function(e){var t=e.cell,r=t.column.id,n=t.row.original;"customer"!==r&&n&&l.show({subscription:n,shouldOpenAdminMemberEdit:!1})};return{columnsToRender:s.map((function(e){return V0(V0({},e),{},{onClick:c})})),onClickPagination:function(e){o.setPage(e)},onSuccess:function(){o.refetchSubscriptions()},subscriptionData:o}}(),t=e.columnsToRender,r=e.onClickPagination,i=e.onSuccess,o=e.subscriptionData;return o.isLoadingSubscriptions?(0,c.jsx)(l.aN,{}):(0,c.jsxs)("div",{children:[(0,c.jsx)(U0,{subscriptionLength:o.totalSubscriptions}),(null===o||void 0===o?void 0:o.subscriptions.length)>0&&(0,c.jsx)(Ox.nN,{shouldOpenAdminMemberEdit:!1,refetchAllSubscriptions:i,variant:"admin-member-edit-subscription-list",children:(0,c.jsx)(Ox.sD,{columnsToRender:t,subscriptionData:o,onClickPagination:r})})]})},W0=function(){return(0,c.jsx)(G0,{})},Q0=function(e){var t=e.transactionLength;return(0,c.jsx)("div",{className:"flex flex-row py-4",children:(0,c.jsx)(l.ZT.TitleMd,{children:(0,a.t)("admin_member_edit_modal.billing.transactions.header",{transaction_length:t})})})};function K0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K0(Object(r),!0).forEach((function(t){$0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X0(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var e1,t1=function(){var e=function(){var e=OX().memberPublicId,t=Y0((0,n.useState)(1),2),r=t[0],i=t[1],o=Wg({filters:{community_member_public_uid:e},page:r,setPage:i}),a=[hg.Qp.paywall,hg.Qp.status,hg.Qp.term,hg.Qp.createdAt,hg.Qp.amount,hg.Qp.actionMenu],s=(0,pg.a)("admin-member-edit-charge-list"),l=function(e){var t=e.cell,r=t.column.id,n=t.row.original;"customer"!==r&&n&&s.show({charge:n,shouldOpenAdminMemberEdit:!1})};return{columnsToRender:a.map((),onClickPagination:function(e){o.setPage(e)},onSuccess:function(){o.refetchCharges()},chargesData:o}}(),t=e.columnsToRender,r=e.onClickPagination,i=e.chargesData,o=e.onSuccess;return i.isLoadingCharges?(0,c.jsx)(l.aN,{}):(0,c.jsxs)("div",{children:[(0,c.jsx)(Q0,{transactionLength:i.totalCharges}),(null===i||void 0===i?void 0:i.charges.length)>0&&(0,c.jsx)(dg.OA,{shouldOpenAdminMemberEdit:!1,refetchAllCharges:o,variant:"admin-member-edit-charges-list",children:(0,c.jsx)(dg.uo,{columnsToRender:t,chargesData:i,onClickPagination:r})})]})},r1=function(){return(0,c.jsx)(t1,{})};function n1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i1={SUBSCRIPTIONS_TAB:(0,a.t)("admin_member_edit_modal.billing.tabs.subscriptions"),TRANSACTIONS_TAB:(0,a.t)("admin_member_edit_modal.billing.tabs.transactions"),ADDRESS_TAB:(0,a.t)("admin_member_edit_modal.billing.tabs.address")},o1=(n1(e1={},(0,a.t)("admin_member_edit_modal.billing.tabs.subscriptions"),"subscriptions"),n1(e1,"subscriptions","SUBSCRIPTIONS_TAB"),n1(e1,(0,a.t)("admin_member_edit_modal.billing.tabs.transactions"),"transactions"),n1(e1,"transactions","TRANSACTIONS_TAB"),n1(e1,(0,a.t)("admin_member_edit_modal.billing.tabs.address"),"address"),n1(e1,"address","ADDRESS_TAB"),e1);function a1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c1=function(){var e=function(){var e,t,r=(0,rl.t)().tab,i=i1[null!==(e=o1[r])&&void 0!==e?e:o1.subscriptions],o=(0,v.wh)().currentCommunity,a=(o=void 0===o?{}:o).policies,s=s1((0,n.useState)(i),2),l=s[0],u=s[1],d=(0,n.useMemo)((function(){var e=[{label:i1.SUBSCRIPTIONS_TAB},{label:i1.TRANSACTIONS_TAB}];return a.is_paywall_tax_enabled&&e.push({label:i1.ADDRESS_TAB}),e}),[a.is_paywall_tax_enabled]),f=(a1(t={},i1.SUBSCRIPTIONS_TAB,(0,c.jsx)(W0,{})),a1(t,i1.TRANSACTIONS_TAB,(0,c.jsx)(r1,{})),a1(t,i1.ADDRESS_TAB,(0,c.jsx)(R0,{})),t),m=(0,dr.k6)();return(0,n.useEffect)((,[l,m]),{currentTab:l,setCurrentTab:u,options:d,tabToRender:f}}(),t=e.currentTab,r=e.setCurrentTab,i=e.options,o=e.tabToRender;return(0,c.jsx)(vX.Z2.Root,{title:(0,a.t)("admin_member_edit_modal.billing.title"),children:(0,c.jsxs)(vX.Z2.Body,{children:[(0,c.jsx)(l.mQ,{variant:"underline-sm",controlled:!0,activeTab:t,onClick:r,options:i}),o[t]]})})},u1=function(e){var t=e.member,r=(0,Ko.rV)();return(0,c.jsx)(c.Fragment,{children:r&&(0,c.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("activity_score.activity_score_title")}),(0,c.jsx)(Pa.XR,{ids:[t.id],children:(0,c.jsx)(Sa.z4,{memberId:t.id})})]})})};function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m1(){return m1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m1.apply(this,arguments)}var p1=function(e){var t=m1({},e);return(0,c.jsx)(l.l0.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d1(Object(r),!0).forEach((function(t){f1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({hideDescription:!0,hideBorder:!0,translationRoot:"account.member_edit_profile_form"},t))},h1=function(e){var t=e.member;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-0 md:gap-y-9",children:[(0,c.jsx)(p1,{name:"name",children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsx)(p1,{name:"headline",children:(0,c.jsx)(l.l0.Input,{})}),(0,c.jsxs)("div",{className:"mt-2 flex flex-col gap-y-1 md:mt-0",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("account.member_edit_profile_form.email")}),(0,c.jsx)(l.ZT.LabelMd,{children:t.email})]})]})};function b1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v1=function(e){var t=e.member,r=b1((0,fr.k)(),2),n=r[0],i=r[1],o=(0,nS.kK)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-7",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,c.jsx)(l.ZT.TitleMd,{children:(0,a.t)("account.member_edit_profile_form.delete_member_account")}),(0,c.jsx)(l.ZT.BodyMd,{children:(0,a.t)("account.member_edit_profile_form.delete_member_account_description")})]}),(0,c.jsx)("div",{children:(0,c.jsx)(l.zx,{full:o,type:"button",variant:"danger-outline",onClick:i,children:(0,a.t)("account.member_edit_profile_form.delete_member")})})]}),(0,c.jsx)(Ea,{member:t,isOpen:n,onClose:i})]})},g1=r(8428);function x1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O1="member_tags",P1=function(){var e=(0,lr.TC)().currentAppearance,t=j1((0,n.useState)(""),2),r=t[0],i=t[1],o=function(e){var t,r,n,i,o=e.query,a=void 0===o?"":o,s=e.ids,l=void 0===s?[]:s,c=x1((0,f.useQueries)([{queryKey:["member-tags",a],queryFn:function(){return(0,Er.UT)(S.av.memberTags.index({params:{query:a,except_ids:l,per_page:60}}))}},{queryKey:["member-tags",l],queryFn:function(){return(0,Er.UT)(S.av.memberTags.index({params:{ids:l,per_page:100}}))},enabled:!!l.length}]),2),u=c[0],d=c[1];return{tags:(0,fn.concat)(null!==(t=null===u||void 0===u||null===(r=u.data)||void 0===r?void 0:r.records)&&void 0!==t?t:[],null!==(n=null===(i=d.data)||void 0===i?void 0:i.records)&&void 0!==n?n:[]),isLoading:u.isLoading||d.isLoading}}({query:r,ids:(0,(0,pr.Gc)().getValues)(O1)}),s=o.tags,l=o.isLoading,u=(0,n.useCallback)((0,fn.debounce)(i,300),[i]),d=m=(s||[]).map((function(t){return{id:t.id,name:(0,c.jsxs)("span",{className:"flex items-center gap-1.5",children:[d(t)&&(0,c.jsx)("span",{children:(0,c.jsx)(wy.S,{className:"mr-2 !h-5 !w-5",emoji:t.emoji,appearance:e,customEmojiUrl:t.custom_emoji_url,customEmojiDarkUrl:t.custom_emoji_dark_url})}),(0,c.jsx)("span",{children:t.name})]})}}));return(0,c.jsx)(p1,{name:"member_tags",hideDescription:!0,labelWrapperClassName:"mb-1",children:(0,c.jsx)(g1.N,{name:O1,data:m,placeholder:(0,a.t)("account.member_edit_profile_form.member_tags_placeholder"),direction:"down",onSearch:u,isLoading:l})})},S1=function(e){var t=e.section;return(0,c.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,c.jsx)(l.ZT.BodySm,{children:(0,a.t)(["profile_fields.empty_state",t,"title"])})})},k1=function(e){var t=e.profileFields,r=t.visible,n=t.not_visible;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-2 md:gap-y-7",children:[(0,c.jsx)(l.ZT.TitleMd,{children:(0,a.t)("account.member_edit_profile_form.profile_fields")}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-8 px-1",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsx)(UC.uc,{fields:r}),0===r.length&&(0,c.jsx)(S1,{section:"visible"})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsxs)("div",{className:"flex gap-x-1",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"semibold",children:(0,a.t)("profile_fields.not_visible")}),(0,c.jsx)(bt.JO,{type:"16-eye-closed",size:14,"aria-hidden":!0,useWithFillCurrentColor:!0})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsx)(UC.uc,{fields:n,indexUpdate:r.length}),0===n.length&&(0,c.jsx)(S1,{section:"hidden"})]})]})]})]})};function C1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T1=function(e){return(0,c.jsx)(p1,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C1(Object(r),!0).forEach((function(t){N1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({shouldToggleValueOnLabelClick:!0,inline:!0,inlineReverse:!0,isToggle:!0},e))},A1=function(){return(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)(T1,{name:"admin",tooltipText:s().t("account.member_edit_profile_form.admin_tooltip"),children:(0,c.jsx)(l.l0.ToggleSwitch,{variant:"small"})}),(0,c.jsx)(T1,{name:"is_flagged",tooltipText:s().t("account.member_edit_profile_form.is_flagged_tooltip"),children:(0,c.jsx)(l.l0.ToggleSwitch,{variant:"small"})}),(0,c.jsx)(T1,{name:"messaging_disabled",tooltipText:s().t("account.member_edit_profile_form.messaging_disabled_tooltip"),children:(0,c.jsx)(l.l0.ToggleSwitch,{variant:"small"})})]})},E1=function(e){var t=e.member,r=(0,UC.aL)(),i=(0,UC.R1)(),o=(0,pr.Gc)(),s=o.formState.isSubmitSuccessful,u=o.reset;return(0,n.useEffect)((function(){s&&u({},{keepValues:!0})}),[s,u]),(0,c.jsxs)("div",{className:"isolate flex flex-col gap-y-6 pb-12 md:gap-y-16",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-2 md:gap-y-9",children:[(0,c.jsx)(h1,{member:t}),(0,c.jsx)(u1,{member:t}),i&&(0,c.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("profile_fields.upgrade_flow.title")}),(0,c.jsx)(UC.IA,{})]}),(0,c.jsx)(A1,{}),(0,c.jsx)(P1,{})]}),r&&(0,c.jsx)(k1,{profileFields:t.profile_fields}),(0,c.jsx)(v1,{member:t})]})},I1=(0,fn.uniqueId)(),D1=function(){var e,t,r=OX().profileInfoQuery,n=r.data,i=r.dataUpdatedAt,o=VX().handleClose,a=yX({member:n}),s=a.data,u=a.isLoading,d=a.isError,f=UX({member:n,skipAccessUpdates:!0}).mutateAsync;return d?null:u?(0,c.jsx)(l.aN,{center:!0}):n.is_deleted?(0,c.jsx)(vX.d8,{}):(0,c.jsxs)(l.l0,{id:I1,defaultValues:MX(n,s),noValidate:!0,validationSchema:(e=n,t=e.profile_fields,t?Kp.Ry().shape({name:DX,community_member_profile_fields_attributes:(0,PX.YU)({fields:LX(t),isAdmin:!0})}):Kp.Ry().shape({name:DX})),onSubmit:f,children:[(0,c.jsx)(E1,{member:n}),(0,c.jsx)(vX.$k,{formId:I1,onClose:o})]},i)},L1=function(){return(0,c.jsx)(vX.Z2.Root,{title:(0,a.t)("admin_member_edit_modal.info.title"),children:(0,c.jsx)(vX.Z2.Body,{children:(0,c.jsx)(D1,{})})})},M1=r(14955),R1=function(){var e,t=VX(),r=t.handleClose,n=t.sidebarNavItems,i=t.profileData,o=t.isLoading,a=t.isError,s=o||a?[]:n,l=(0,dr.TH)().pathname;return(0,c.jsxs)("div",{className:"flex w-full flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between px-5",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(Pt.sJ,{name:null===i||void 0===i?void 0:i.name,src:null!==(e=null===i||void 0===i?void 0:i.avatar_url)&&void 0!==e?e:void 0,size:"8"}),(0,c.jsx)(y.Z.LabelMd,{children:(0,c.jsx)("span",{className:"!text-dark !font-semibold",children:null===i||void 0===i?void 0:i.name})})]}),(0,c.jsx)(M1.o,{onClick:r})]}),(0,c.jsx)(Uo.O.Group,{selectedIndex:Object.values(s).findIndex((function(e){return e.href.pathname===l})),children:(0,c.jsx)("div",{className:"border-primary border-b px-5",children:(0,c.jsx)(Uo.O.List,{children:Object.values(s).map((function(e){return(0,c.jsx)(sn.OL,{to:e.href.pathname,exact:!0,replace:null===e||void 0===e?void 0:e.replace,children:(0,c.jsx)(Uo.O,{className:"text-sm",children:(0,c.jsx)("div",{className:"flex items-center gap-1",children:e.label})})},e.label)}))})})})]})},F1=function(){return(0,c.jsx)(vX.Z2.Root,{title:(0,a.t)("admin_member_edit_modal.overview.title"),children:(0,c.jsx)(vX.Z2.Body,{})})},B1=function(){var e=VX(),t=e.handleClose,r=e.sidebarNavItems,n=e.profileData,i=e.isLoading,o=e.isError,s=e.memberId,l=e.allowedToRender,u=e.isBillingPath,d=(0,nS.kK)();if(!i&&!l)return null;var f=Boolean(i||o),m=!f;return(0,c.jsxs)(BT.x,{isOpen:!0,contentPortalId:"admin-member-edit-modal",onClose:t,shouldShowCloseButton:!0,children:[(0,c.jsxs)(BT.x.Header,{className:"!px-0 !pb-0 !pt-4 md:!px-6 md:!py-5",children:[d?(0,c.jsx)(R1,{}):(0,c.jsx)(BT.x.HeaderNav,{titleNode:m&&(0,c.jsx)(Pt.sJ,{name:null===n||void 0===n?void 0:n.name,src:null===n||void 0===n?void 0:n.avatar_url,size:"8"}),items:f?[]:r}),(0,c.jsx)(T0,{})]}),(0,c.jsx)(BT.x.Body,{wrapperClassName:J()("h-full",{"max-w-screen-lg":u,"max-w-screen-md":!u}),children:i?(0,c.jsx)(BT.x.Body,{children:(0,c.jsx)(gd.a,{})}):o?(0,c.jsxs)("div",{className:"py-[20vh] text-center",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"bold",children:(0,a.t)("admin_member_edit_modal.error.title")}),(0,c.jsx)(y.Z.BodySm,{children:(0,a.t)("admin_member_edit_modal.error.subtitle")})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(dr.AW,{path:S.WF.overview(s),children:(0,c.jsx)(F1,{})}),(0,c.jsx)(dr.AW,{path:S.WF.info(s),children:(0,c.jsx)(L1,{})}),(0,c.jsx)(dr.AW,{path:S.WF.access(s),children:(0,c.jsx)(P0,{})}),(0,c.jsx)(dr.AW,{path:S.WF.billing(s),children:(0,c.jsx)(c1,{})})]})})]})},U1=function(){return(0,c.jsx)(Ks.i,{exact:!0,path:[S.WF.index(),S.WF.overview(),S.WF.info(),S.WF.access(),S.WF.billing()],children:(0,c.jsx)(wX,{children:(0,c.jsx)(B1,{})})})},z1=r(28474),V1=function(){return(0,c.jsx)(Ks.i,{path:S.G3.profile,children:(0,c.jsx)(z1.h,{})})},Z1=r(17182),H1=r(4979),q1=r(12110),G1=r(21722),W1=r(82567),Q1=r(76040),K1="upcoming",J1="past",$1="posts",Y1="thumbnail",X1=[{icon:"16-thumbnail-layout",label:(0,a.t)("all_events.views.default_layout_thumbnail"),value:Y1},{icon:"bullet-list-text",label:(0,a.t)("all_events.views.default_layout_list"),value:$1}],e2={posts:"list",thumbnail:"thumbnail"},t2=function(e){var t=e.activeTab,r=e.setActiveTab,n=[{name:(0,a.t)("events.upcoming"),active:t===K1,onClick:function(){return r(K1)}},{name:(0,a.t)("events.past"),active:t===J1,onClick:function(){return r(J1)}}];return(0,c.jsx)("div",{className:"mx-6 mb-8 grid grid-cols-2 py-1.5 pt-3 sm:flex sm:flex-row md:mx-0 md:max-w-2xl md:gap-2",children:n.map((function(e){var t=e.name,r=e.active,n=e.onClick;return(0,c.jsx)("button",{type:"button",className:J()("text-dark flex items-center justify-center rounded-md px-5 py-2.5",{"bg-overlay-dark":r}),onClick:n,children:(0,c.jsx)(l.ZT.LabelXs,{weight:"medium",color:r?"text-selector-active":"text-default",children:t})},t)}))})},r2=r(91894),n2=r(94360);function i2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o2(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a2=function(e){var t=e.eventsByMonth,r=void 0===t?new Map:t,i=e.nextEvent,o=e.onEventDestroy,a=e.onEventChange,s=e.isThumbnailView;return(0,c.jsx)(c.Fragment,{children:Array.from(r.keys()).map((function(e){var t=i2(r.keys(),1)[0],u=r.get(e);return e===t&&i&&(u=u.filter((function(e){return e.id!==i.id}))),u.length?(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)("div",{className:"mx-6 mt-3 md:mx-0",children:(0,c.jsx)(l.ZT.TitleSm,{weight:"bold",children:e})}),(0,c.jsx)("div",{className:"bg-primary border-primary mb-9 mt-6 border-y sm:rounded-lg sm:border",children:u.map((function(e){return(0,c.jsx)(W1.D,{event:e,onDestroy:function(){return o(e.id)},onRsvp:function(){return a(e)},isThumbnailView:s},e.id)}))})]},e):null}))})},s2=function(e){var t=e.events,r=e.onEventDestroy,n=e.onEventChange,i=e.isThumbnailView,o=(0,r2.k)(t,!0),s=o.liveEvents,l=o.filteredEvents,u=(0,r2.Y)(l,"asc"),d=l[0],f=s.length>0;return(0,c.jsxs)(c.Fragment,{children:[f&&(0,c.jsxs)("div",{className:"mb-9",children:[(0,c.jsxs)("div",{className:"mx-6 my-3 flex items-center space-x-4 md:mx-0",children:[(0,c.jsx)("div",{className:"flex h-[18px] w-[18px] items-center rounded-full bg-[#96F8B7]",children:(0,c.jsx)("div",{className:"m-auto h-[6px] w-[6px] rounded-full bg-[#008A2F]"})}),(0,c.jsx)(y.Z.TitleSm,{weight:"bold",children:(0,a.t)("events.live_now")})]}),(0,c.jsx)("div",{className:"border-primary bg-primary border-y sm:rounded-lg sm:border",id:"live-events-list",children:s.map((function(e){return(0,c.jsx)("div",{className:"border-primary border-b last:border-none",children:(0,c.jsx)(W1.D,{event:e,onRsvp:function(){return n(e)},onDestroy:function(){return n(e.id)},isThumbnailView:i},e.id)},e.id)}))})]}),d&&(0,c.jsx)(n2.b,{onRsvp:function(){return n(d)},onDestroy:function(){return n(d.id)},event:d,isThumbnailView:i,isNextEvent:!0},d.id),(0,c.jsx)(a2,{eventsByMonth:u,nextEvent:d,onEventDestroy:r,onEventChange:n,isThumbnailView:i})]})},l2=r(58216);function c2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u2(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d2=function(e){var t=e.activeView,r=c2((0,n.useState)(K1),2),i=r[0],o=r[1],a=i===K1,s=i===J1,l=t===Y1,u=(0,l2.v)({params:{past_events:s}}),d=u.events,f=u.isLoading,m=u.fetchNextPage,p=u.hasNextPage,h=u.perPageEventIds,b=u.onEventDestroy,y=u.onEventChange;return(0,c.jsxs)("div",{className:"mx-auto max-w-2xl p-0",children:[(0,c.jsx)(t2,{activeTab:i,setActiveTab:o}),f&&(0,c.jsx)(Q1.gi,{variant:"new-events-list-view",disableCoverImage:!a}),0===d.length&&!f&&(0,c.jsx)(G1.u,{isPastEvents:s,isDraft:!1}),(0,c.jsx)(g._x,{perPagePostIds:h,children:(0,c.jsx)(nW.Z,{style:{overflow:"initial"},scrollThreshold:.5,next:m,hasMore:p,loader:(0,c.jsx)(W.m,{}),dataLength:(null===d||void 0===d?void 0:d.length)||0,scrollableTarget:"panel",className:"pb-6",children:a?(0,c.jsx)(s2,{events:d,onEventDestroy:b,onEventChange:y,isThumbnailView:l}):(0,c.jsx)("div",{className:"border-primary bg-primary border-y sm:rounded-lg sm:border ",children:d.map((function(e){return(0,c.jsx)("div",{className:"border-primary border-b last:border-none",children:(0,c.jsx)(W1.D,{event:e,onDestroy:function(){return b(e.id)},onRsvp:function(){return y(e)},isThumbnailView:l},e.id)},e.id)}))})})})]})},f2=r(53388),m2=r(97395);function p2(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var h2=function(e){var t=e.communityData,r=e.isPublicEventsPage,n=(0,Uf.K)(),i="all_events.actions.".concat(r?"public":"private"),o=function(){var e,i=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.mutateAsync({data:t,updates:{public_events_page:!r}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p2(o,n,i,a,s,"next",e)}function s(e){p2(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return i.apply(this,arguments)}}();return n.isLoading?(0,c.jsx)(l.aN,{}):(0,c.jsxs)(l.J2,{buttonTitle:(0,a.t)("".concat(i,".title")),children:[(0,c.jsx)("p",{children:(0,a.t)("".concat(i,".description"))}),(0,c.jsx)(l.zx,{variant:"primary",onClick:o,children:(0,a.t)("".concat(i,".revert_button"))})]})},b2=function(e){var t=e.activeView,r=e.communityData,n=e.isPublicEventsPage,i=(0,v.wh)().currentCommunityMember,o=(0,Uf.K)(),s=(0,oe.p)();return(0,Ho.vb)(i)?(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[o.isLoading?(0,c.jsx)(gd.a,{}):(0,c.jsx)(m2.P,{value:t,onChange:function(e){o.mutateAsync({data:r,updates:{public_events_view:e}}).then((function(){s.success((0,a.t)("all_events.view_changed_success",{layout:e2[e]}))})).catch((function(e){console.error(e),s.error((0,a.t)("all_events.view_changed_failure"))}))},options:X1}),(0,c.jsx)(h2,{communityData:r,isPublicEventsPage:n}),(0,c.jsx)(f2.H,{})]}):null},y2=function(){var e=(0,v.wh)().currentCommunitySettings,t=(0,Uf.w)().data,r=(null===t||void 0===t?void 0:t.community_settings)||e;if(!r)return null;var n=r.public_events_view,i=r.public_events_page;return(0,c.jsx)(_b.a,{disableRightSidebar:!0,children:(0,c.jsxs)(q1.W,{fullWidth:!0,noPadding:!0,children:[(0,c.jsx)(Z1.F.Breadcrumb,{}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(y.Z.TitleSm,{as:"h1",weight:"semibold",children:(0,a.t)("all_events.title")}),rightContent:(0,c.jsx)(b2,{activeView:n,communityData:t,isPublicEventsPage:i})}),(0,c.jsxs)(Z1.F.Body,{hasPaddingTopMobile:!1,wrapperClassName:"!mx-0",children:[(0,c.jsx)(A.S,{title:(0,a.t)("all_events.title")}),(0,c.jsx)(Z1.F.Content,{children:(0,c.jsx)(d2,{activeView:n})})]})]})})},v2=function(e){var t=e.course,r=t.is_new;return(0,jk.H)(t)?(0,c.jsx)("span",{className:"bg-badge text-xxs text-badge absolute left-2 top-2 z-10 rounded px-2 py-0.5 font-bold uppercase",children:(0,a.t)("courses.admin_summary.draft")}):r?(0,c.jsx)("span",{className:"text-xxs text-badge bg-c-sidebar-badge absolute left-2 top-2 z-10 rounded px-2 py-0.5 font-bold uppercase",children:(0,a.t)("spaces_directory.card.new")}):null},g2=r(98843);function x2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x2(Object(r),!0).forEach((function(t){j2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w2=["courses","directory"],O2=["all","joined"];var P2=function(){var e,t,r=(0,rl.t)().filter,n=(0,dr.k6)(),i=function(e){return"string"===typeof e&&O2.some(()}(r)?r:"all",o=(0,f.useInfiniteQuery)([].concat(w2,[i]),(function(e){var t=e.pageParam,r={page:void 0===t?1:t,space_type:"course",sort:"directory",per_page:30,only_joined:"joined"===i};return(0,Er.UT)(S.av.search.spaces.index({params:r}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),a=(null===(e=o.data)||void 0===e?void 0:e.pages)||[],s=(null===(t=a[0])||void 0===t?void 0:t.count)||0,l=mw()(a.map((function(e){return e.records})));return _2(_2({},o),{},{dataLength:s,courses:l,filter:i,handleFilterClick:function(e){n.push({search:tl.stringify({filter:e})})}})};function S2(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var k2=function(e){var t=e.space,r=(0,g2.B_)({space:t}),n=r.isSubmitting,i=r.joinSpace,o=t.is_private,s=(0,v.EU)(),l=(0,f.useQueryClient)(),u=P2().refetch,d=function(){var e,r=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:l.removeQueries([v.Xe,t.id]),u();case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){S2(o,n,i,a,s,"next",e)}function s(e){S2(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return t.joined||!s||o?null:(0,c.jsx)("div",{onClick:function(e){return e.preventDefault()},children:(0,c.jsx)("button",{type:"submit",className:"bg-primary text-darkest disabled:text-light !border-dark hover:bg-secondary w-full rounded-md border px-4 py-2 text-sm font-medium leading-5 transition-colors duration-150 ease-in-out disabled:cursor-not-allowed",onClick:d,children:(0,c.jsx)("span",{children:(0,a.t)(n?"courses.enrolling":"courses.enroll")})})})},C2=r(42824),N2=function(e){var t=e.course,r=t.lessons_count,n=t.joined?t.completed_lessons_count:0,i=function(e){var t=e.completedLessons,r=e.totalLessons;return 0===r?0:Math.round(t/r*100)}({completedLessons:n,totalLessons:r}),o=n===r,s=(0,a.t)("courses.directory.progress.completed");return o?(0,c.jsxs)("div",{className:"text-default flex items-center gap-x-1 pt-2",children:[(0,c.jsx)(bt.JO,{"aria-hidden":!0,type:"20-checkmark-circle",size:16}),(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)("courses.directory.progress.completed")})]}):(0,c.jsx)("div",{className:"flex flex-col gap-y-2 px-1 pt-2",children:(0,c.jsx)(C2.k,{percentageLabel:s,progress:i,completedCount:n,totalCount:r})})},T2=function(e){var t=e.course,r=t.students_count,n=(0,jk.WB)(t);return(0,c.jsx)(c.Fragment,{children:!n&&(0,c.jsxs)("div",{className:"text-default flex items-center gap-x-2 px-1",title:(0,a.t)("courses.admin_summary.students"),"aria-label":(0,a.t)("courses.admin_summary.students"),children:[(0,c.jsx)(bt.JO,{type:"20-members",size:16}),(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",weight:"medium",children:r})]})})},A2=function(e){var t=e.course;return t.joined?(0,c.jsx)(N2,{course:t}):(0,c.jsx)(k2,{space:t})},E2=function(e){var t=e.course,r=e.communityMember,n=t.name,i=t.emoji,o=t.custom_emoji_url,s=t.custom_emoji_dark_url,u=t.space_group.name,d=(0,lr.TC)().currentAppearance,f=(0,jk.WB)(t),m=(0,jk.$n)(t)?(0,a.t)("courses.directory.gated_course"):(0,a.t)("courses.directory.private_course");return(0,c.jsxs)("div",{className:"flex flex-col gap-y-2 pb-1 pt-4",children:[(0,c.jsxs)("div",{className:"flex h-20 flex-col gap-y-2",children:[(0,c.jsx)("div",{className:"flex items-start",children:(0,c.jsx)(l.ZT.TitleSm,{as:"h1",weight:"semibold",children:(0,c.jsxs)("span",{title:n,className:"ml-1 line-clamp-2 min-w-0 overflow-hidden text-base font-bold leading-tight",children:[(0,c.jsx)(wy.S,{className:"-mt-1 mr-1 inline-flex !h-5 !w-5",emoji:i,appearance:d,customEmojiUrl:o,customEmojiDarkUrl:s}),n]})})}),(0,c.jsx)(l.ZT.BodySm,{weight:"medium",children:(0,c.jsx)("span",{className:"text-default truncate px-1 text-sm font-medium",children:u})})]}),(0,Ho.vb)(r)?(0,c.jsx)(T2,{course:t}):(0,c.jsx)(A2,{course:t}),f&&(0,c.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,c.jsxs)("div",{"aria-label":m,title:m,className:"text-default flex items-center gap-x-1",children:[(0,c.jsx)(bt.JO,{type:"16-lock",size:16,useWithFillCurrentColor:!0,"aria-hidden":!0}),(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:m})]})})]})},I2=function(e){var t=e.course,r=e.communityMember,n=t.thumbnail_image_url;return(0,c.jsxs)("div",{className:"bg-primary hover:shadow-c-card border-input group h-full w-full overflow-hidden rounded-lg border p-2.5",children:[(0,c.jsxs)("div",{className:"aspect-video w-full overflow-hidden rounded-md bg-gray-200","aria-hidden":!0,children:[(0,c.jsx)("div",{className:"relative",children:(0,c.jsx)(v2,{course:t})}),n&&(0,c.jsx)("img",{src:n,alt:"",loading:"lazy",className:"block h-full w-full object-cover"})]}),(0,c.jsx)(E2,{course:t,communityMember:r})]})},D2=r(25011),L2=function(){var e=(0,tC.GQ)(),t=(0,v.e2)().records;return function(){e.show({postType:"course",spaceGroupId:null===t||void 0===t?void 0:t[0].id})}},M2=function(e){var t=e.filter,r=(0,v.wh)().currentCommunityMember,n=(0,Ho.vb)(r),i=L2();return"joined"===t?(0,c.jsx)(D2.j,{title:(0,a.t)("courses.directory.empty.joined_title"),description:(0,a.t)("courses.directory.empty.joined_description")}):n?(0,c.jsx)(D2.j,{title:(0,a.t)("courses.directory.empty.admin_title"),description:(0,a.t)("courses.directory.empty.admin_description"),children:(0,c.jsx)(l.zx,{variant:"primary",className:"mt-4",onClick:i,children:(0,a.t)("courses.create_course")})}):(0,c.jsx)(D2.j,{title:(0,a.t)("courses.directory.empty.member_title"),description:(0,a.t)("courses.directory.empty.member_description")})},R2=function(){return null};R2.ListCourses=function(e){var t=e.communityMember,r=e.courses,n=void 0===r?[]:r,i=e.fetchNextPage,o=e.hasNextPage,a=e.isLoading,s=void 0!==a&&a,u=e.filter;return s?(0,c.jsx)(l.aN,{}):0===n.length?(0,c.jsx)(M2,{filter:u}):(0,c.jsx)(nW.Z,{style:{overflow:"initial"},scrollThreshold:.8,next:i,hasMore:!!o,loader:(0,c.jsx)(W.m,{}),dataLength:n.length,scrollableTarget:"panel",children:(0,c.jsx)("ol",{className:"grid-cols-course-directory m-4 grid max-w-full list-none auto-rows-fr gap-6 lg:m-auto",children:n.map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(sn.rU,{to:(0,S._v)({spaceSlug:e.slug}),children:(0,c.jsx)(I2,{course:e,communityMember:t})})},e.id)}))})})};var F2=function(e){var t=e.filter,r=e.onClickHandler,n=[{value:"all",label:(0,a.t)("courses.directory.filters.all_courses")},{value:"joined",label:(0,a.t)("courses.directory.filters.my_courses")}];return(0,c.jsx)(Tl.x,{className:"bg-primary border-primary border-b px-6 py-3",children:(0,c.jsx)(To.Og,{selectedText:t,options:n,label:(0,a.t)("courses.directory.filters.header"),onChange:r})})},B2=function(e){var t=e.isDragOverlay,r=void 0!==t&&t,n=(0,l.dI)().item,i=n.name,o=n.emoji,a=n.custom_emoji_url,s=n.custom_emoji_dark_url,u=(0,lr.TC)().currentAppearance;return(0,c.jsxs)("div",{className:J()("group flex gap-2 p-4",{"bg-primary border-primary border":r}),children:[(0,c.jsx)("div",{className:J()("group-hover:bg-secondary flex h-6 w-6 items-center justify-center rounded",{"bg-secondary":r}),children:(0,c.jsx)(bt.JO,{type:"16-reorder",size:16})}),(0,c.jsx)(l.ZT.LabelMd,{truncate:!0,children:(0,c.jsxs)("div",{className:"flex min-w-0 items-center gap-x-1",children:[(0,c.jsx)(wy.S,{className:"!h-6 !w-6",emoji:o,appearance:u,customEmojiUrl:a,customEmojiDarkUrl:s}),(0,c.jsx)("span",{className:"min-w-0 truncate",children:i})]})})]})},U2=function(e){var t=e.courses,r=e.onSort,n=(0,ie.UV)().contentPortalElement;return(0,c.jsxs)("div",{className:"border-primary bg-primary mt-6 overflow-hidden rounded-lg border",children:[(0,c.jsx)("div",{className:"bg-secondary border-primary border-b px-5 py-2",children:(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("courses.directory.reorder_modal.count",{count:t.length})})}),(0,c.jsxs)(rA.cm,{items:t,onSort:r,lockedVerticalAxis:!0,distance:10,children:[(0,c.jsx)(rA.cm.List,{className:"divide-primary max-h-96 divide-y overflow-y-scroll",gap:0,children:t.map((function(e){return(0,c.jsx)(rA.cm.Item,{item:e,className:"h-14",children:(0,c.jsx)(B2,{})},e.id)}))}),(0,c.jsx)(rA.cm.DragOverlay,{portalTo:n,shouldRestrictToParent:!0,children:(0,c.jsx)(B2,{isDragOverlay:!0})})]})]})};function z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z2(Object(r),!0).forEach((function(t){Z2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H2(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function q2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G2(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W2=["courses","directory","reorder"],Q2=function(){return(0,Er.UT)(S.av.search.spaces.index({params:{space_type:"course",sort:"directory",per_page:250}}))},K2=function(){var e,t=q2((0,n.useState)(),2),r=t[0],i=t[1],o=(0,v.wh)().currentCommunitySettings,s=function(){var e=(0,f.useQueryClient)();return{invalidateCourseQueries:}(),c=s.invalidateCourseQueries,u=(0,l.pm)(),d=u.success,m=u.error,p=(0,f.useQueryClient)(),h=(0,f.useQuery)(W2,Q2),b=h.data,y=h.isLoading,g=(0,Uf.K)({onSuccess:function(){c(),d((0,a.t)("courses.directory.reorder_modal.saved"))},onError:function(){m((0,a.t)("courses.directory.reorder_modal.save_error"))}}),x=g.mutateAsync,_=g.isLoading,j=null!==(e=null===b||void 0===b?void 0:b.records)&&void 0!==e?e:[],w=null!==r&&void 0!==r?r:j,O=!(0,fn.isEqual)(w,j),P=function(){var e,t=(e=se().mark((function e(){var t;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.map((),e.next=3,x({data:{community_settings:o},updates:{courses_order:t}});case 3:p.setQueryData(W2,V2(V2({},b),{},{records:w}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){H2(o,n,i,a,s,"next",e)}function s(e){H2(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return{courses:w,isLoading:y,isUpdating:_,isDirty:O,update:P,reorder:i}};function J2(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var $2=function(){var e=(0,ne.yT)(),t=K2(),r=t.courses,n=t.isLoading,i=t.isUpdating,o=t.isDirty,s=t.update,u=t.reorder,d=function(){var t,r=(t=se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:e.remove();case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){J2(o,n,i,a,s,"next",e)}function s(e){J2(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,c.jsx)(Gr.cV,{isOpen:e.visible,onClose:e.remove,onConfirm:d,title:(0,a.t)("courses.directory.reorder_modal.title"),disabled:i||!o,confirmText:i?(0,a.t)("saving"):(0,a.t)("confirm"),confirmVariant:"circle",contentPortalId:"reorder-modal-content-portal",children:n?(0,c.jsx)(l.aN,{}):(0,c.jsx)(U2,{courses:r,onSort:u})})},Y2=ne.uc.create(();function X2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X2(Object(r),!0).forEach((function(t){t6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function t6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r6(){return r6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r6.apply(this,arguments)}var n6=function(e){var t,r=r6({},e),n=(0,dr.k6)(),i=L2(),o=(t=(0,v.wh)().currentCommunity.courses_feature_flag_enabled,{canCreateCourses:Boolean(t)}).canCreateCourses;return(0,c.jsx)(l.zx,e6(e6({variant:"primary",onClick:,r),{},{children:o?(0,a.t)("courses.create_your_first_course_space"):(0,a.t)("courses.upgrade_to_create_your_courses")}))};n6.protoTypes={classNames:I().string};var i6=r(72551),o6=r(83349),a6=r(35860),s6=r(26334),l6=r(92003),c6=function(e){var t=e.as,r=void 0===t?"h2":t,n=e.size,i=void 0===n?"lg":n,o=e.className,a=e.children,s={xl:"text-5xl xl:text-[3rem] 2xl:text-[4rem] leading-11 xl:leading-12",lg:"text-3xl leading-8 lg:text-4xl lg:leading-10 xl:text-6xl xl:leading-12"}[i];return(0,c.jsx)(r,{className:J()("text-dark font-bold normal-case tracking-normal",s,o),children:a})},u6=[{title:(0,a.t)("courses.landing_page.features.title_1"),subtitle:(0,a.t)("courses.landing_page.features.subtitle_1"),image:i6},{title:(0,a.t)("courses.landing_page.features.title_2"),subtitle:(0,a.t)("courses.landing_page.features.subtitle_2"),image:o6},{title:(0,a.t)("courses.landing_page.features.title_3"),subtitle:(0,a.t)("courses.landing_page.features.subtitle_3"),image:a6},{title:(0,a.t)("courses.landing_page.features.title_4"),subtitle:(0,a.t)("courses.landing_page.features.subtitle_4"),image:s6},{title:(0,a.t)("courses.landing_page.features.title_5"),subtitle:(0,a.t)("courses.landing_page.features.subtitle_5"),image:l6}],d6=function(){return(0,c.jsx)("section",{className:"bg-secondary px-4 py-12 sm:px-6 lg:px-8 lg:py-24",children:(0,c.jsxs)("div",{className:"mx-auto flex max-w-7xl flex-col gap-y-10 xl:gap-y-20",children:[(0,c.jsx)("div",{className:"mx-auto text-center sm:space-y-4 md:max-w-xl xl:max-w-2xl",children:(0,c.jsx)(c6,{children:(0,a.t)("courses.landing_page.features.call_to_action_title")})}),(0,c.jsx)("ul",{className:"mx-auto flex max-w-6xl list-none flex-col gap-y-16",children:u6.map((function(e){return(0,c.jsxs)("li",{className:"mx-auto flex max-w-[440px] flex-col gap-x-4 md:gap-x-8 2xl:max-w-none 2xl:flex-row 2xl:gap-x-32",children:[(0,c.jsx)("div",{className:"w-full md:w-[440px]",children:(0,c.jsx)("img",{src:e.image,className:"block w-full rounded-lg",alt:""})}),(0,c.jsxs)("div",{className:"mt-6 flex max-w-lg flex-col justify-center gap-y-5 2xl:mt-0",children:[(0,c.jsx)("h3",{className:"text-dark text-2xl font-bold leading-8 2xl:text-4xl 2xl:leading-10",children:e.title}),(0,c.jsx)("p",{className:"text-default text-base lg:text-xl xl:leading-8",children:e.subtitle})]})]},e.title)}))})]})})},f6=function(){return(0,c.jsx)("section",{children:(0,c.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8 lg:py-24",children:(0,c.jsxs)("div",{className:"space-y-12",children:[(0,c.jsx)("div",{className:"mx-auto space-y-5 text-center sm:space-y-4 md:max-w-xl lg:w-[48rem] xl:max-w-none",children:(0,c.jsx)(c6,{children:(0,a.t)("courses.landing_page.faqs.call_to_action_title")})}),(0,c.jsxs)("div",{className:"mx-auto max-w-2xl",children:[(0,c.jsx)(pn.z,{noPadding:!0,title:(0,c.jsx)("div",{className:"text-dark pr-3 font-medium",children:(0,a.t)("courses.landing_page.faqs.title_1")}),children:(0,c.jsxs)("div",{className:"text-default py-4",children:[(0,c.jsx)(tn.Z,{html:(0,a.t)("courses.landing_page.faqs.answer_1")}),(0,c.jsx)("a",{href:"https://community.circle.so/c/product-updates/courses-beta-announcement",target:"_blank",rel:"noreferrer",className:"text-darkest font-semibold",children:(0,a.t)("courses.landing_page.faqs.read_more")})]})}),(0,c.jsx)(pn.z,{noPadding:!0,title:(0,c.jsx)("div",{className:"text-dark pr-3 font-medium",children:(0,a.t)("courses.landing_page.faqs.title_2")}),children:(0,c.jsx)("div",{className:"text-default py-4",children:(0,a.t)("courses.landing_page.faqs.answer_2")})}),(0,c.jsx)(pn.z,{noPadding:!0,title:(0,c.jsx)("div",{className:"text-dark pr-3 font-medium",children:(0,a.t)("courses.landing_page.faqs.title_3")}),children:(0,c.jsx)("div",{className:"text-default py-4",children:(0,c.jsx)(tn.Z,{html:(0,a.t)("courses.landing_page.faqs.answer_3")})})}),(0,c.jsx)(pn.z,{noPadding:!0,title:(0,c.jsx)("div",{className:"text-dark pr-3 font-medium",children:(0,a.t)("courses.landing_page.faqs.title_4")}),children:(0,c.jsxs)("div",{className:"text-default py-4",children:[(0,a.t)("courses.landing_page.faqs.answer_4"),(0,c.jsx)("a",{href:"https://vimeo.com/750437964?embedded=true&source=video_title&owner=121536978",target:"_blank",rel:"noreferrer",className:"text-darkest font-semibold",children:(0,a.t)("courses.landing_page.faqs.learn_more_video")})]})}),(0,c.jsx)(pn.z,{noPadding:!0,title:(0,c.jsx)("div",{className:"text-dark pr-3 font-medium",children:(0,a.t)("courses.landing_page.faqs.title_5")}),children:(0,c.jsx)("div",{className:"text-default py-4",children:(0,a.t)("courses.landing_page.faqs.answer_5")})}),(0,c.jsx)(pn.z,{noPadding:!0,title:(0,c.jsx)("div",{className:"text-dark pr-3 font-medium",children:(0,a.t)("courses.landing_page.faqs.title_6")}),children:(0,c.jsx)("div",{className:"text-default py-4",children:(0,a.t)("courses.landing_page.faqs.answer_6")})})]})]})})})},m6=function(){return(0,c.jsxs)("footer",{className:"bg-secondary relative isolate mb-[-4rem] w-full overflow-hidden px-4 py-24 sm:px-6 lg:px-8",children:[(0,c.jsxs)("div",{"aria-hidden":!0,children:[(0,c.jsx)("div",{className:"absolute left-[144px] top-[-100px] z-[-1] h-[177px] w-[177px] rounded-full bg-[#16F5A5]"}),(0,c.jsx)("div",{className:"absolute bottom-[-175px] right-[-160px] z-[-1] h-[370px] w-[370px] rounded-full border-[80px] border-[#FFED4C] bg-transparent"}),(0,c.jsx)("div",{className:"absolute bottom-[180px] right-[180px] z-[-1] h-[32px] w-[32px] rounded-full bg-[#FAB8C4]"})]}),(0,c.jsx)("div",{className:"m-auto max-w-[46rem] text-center",children:(0,c.jsx)(c6,{children:(0,a.t)("courses.landing_page.footer.call_to_action_title")})}),(0,c.jsx)("div",{className:"mt-10 flex items-center justify-center gap-4",children:(0,c.jsx)(n6,{extraLarge:!0})})]})},p6=r(96986),h6=function(){return(0,c.jsxs)("div",{className:"relative isolate overflow-hidden",children:[(0,c.jsxs)("div",{className:"relative h-[923px] overflow-hidden bg-[#22223B] pb-16 sm:pb-24",children:[(0,c.jsxs)("div",{"aria-hidden":!0,children:[(0,c.jsx)("div",{className:"absolute right-[-210px] top-[180px] z-0 h-[230px] w-[230px] rounded-full bg-[#16F5A5] 2xl:right-[-50px]"}),(0,c.jsx)("div",{className:"absolute bottom-[-175px] left-[-190px] z-0 h-[486px] w-[486px] rounded-full border-[80px] border-[#FAB8C4] bg-transparent"}),(0,c.jsx)("div",{className:"2xl:[10%] absolute left-6 top-[397px] z-0 h-[32px] w-[32px] rounded-full bg-[#FFED4C]"})]}),(0,c.jsx)("div",{className:"relative z-10 mx-auto flex min-h-[461px] max-w-7xl items-center justify-center px-6",children:(0,c.jsxs)("div",{className:"text-center xl:mt-16",children:[(0,c.jsx)(c6,{as:"h1",size:"xl",className:"text-white",children:(0,a.t)("courses.landing_page.hero.call_to_action_title")}),(0,c.jsx)("p",{className:"text-feature-light mx-auto mt-3 max-w-md text-base sm:text-lg md:mt-5 md:max-w-2xl md:text-xl",children:(0,a.t)("courses.landing_page.hero.text")}),(0,c.jsx)("div",{className:"mt-14 flex items-center justify-center gap-4",children:(0,c.jsx)(n6,{extraLarge:!0,className:"!py-[1.1rem] text-lg"})})]})})]}),(0,c.jsx)("div",{className:"mt-[-473px]",children:(0,c.jsx)("div",{className:"mx-auto flex max-w-7xl items-center justify-center px-4 sm:px-6",children:(0,c.jsx)("img",{className:"relative rounded-lg",src:p6,alt:""})})})]})},b6=r(22004),y6=function(){return(0,c.jsx)("section",{children:(0,c.jsx)("div",{className:"mx-auto px-4 py-12 sm:px-6 lg:px-8 lg:py-24",children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-16",children:[(0,c.jsx)("div",{className:"mx-auto space-y-5 text-center sm:space-y-4 md:max-w-xl lg:max-w-3xl xl:max-w-none",children:(0,c.jsx)(c6,{children:(0,a.t)("courses.landing_page.info_video.call_to_action_title")})}),(0,c.jsx)("div",{className:"flex flex-row items-center justify-center",children:(0,c.jsx)("div",{className:"relative w-full max-w-[974px]",style:{aspectRatio:"16/9"},children:(0,c.jsx)(b6.Z,{url:"https://player.vimeo.com/video/754312710",className:"absolute left-0 top-0",controls:!0,width:"100%",height:"100%"})})})]})})})},v6=r(75629),g6=r(28780),x6=r(12350),_6=r(55028),j6=r(12349),w6=r(68405),O6=r(91247),P6=[{name:(0,a.t)("courses.landing_page.whats_new.title_1"),description:(0,a.t)("courses.landing_page.whats_new.subtitle_1"),imageUrl:v6},{name:(0,a.t)("courses.landing_page.whats_new.title_2"),description:(0,a.t)("courses.landing_page.whats_new.subtitle_2"),imageUrl:g6},{name:(0,a.t)("courses.landing_page.whats_new.title_3"),description:(0,a.t)("courses.landing_page.whats_new.subtitle_3"),imageUrl:x6},{name:(0,a.t)("courses.landing_page.whats_new.title_4"),description:(0,a.t)("courses.landing_page.whats_new.subtitle_4"),imageUrl:_6},{name:(0,a.t)("courses.landing_page.whats_new.title_5"),description:(0,a.t)("courses.landing_page.whats_new.subtitle_5"),imageUrl:j6},{name:(0,a.t)("courses.landing_page.whats_new.title_6"),description:(0,a.t)("courses.landing_page.whats_new.subtitle_6"),imageUrl:w6}],S6=function(){return(0,c.jsx)("section",{children:(0,c.jsxs)("div",{className:"mx-auto flex max-w-7xl flex-col gap-y-28 px-4 py-12 sm:px-6 lg:px-8 lg:py-16",children:[(0,c.jsxs)("div",{className:"space-y-12",children:[(0,c.jsxs)("div",{className:"mx-auto space-y-4 text-center md:max-w-xl lg:max-w-3xl xl:max-w-none xl:space-y-8",children:[(0,c.jsx)(c6,{children:(0,a.t)("courses.landing_page.whats_new.call_to_action_title")}),(0,c.jsx)("p",{className:"text-dark mx-auto max-w-xl text-xl",children:(0,c.jsx)(l.ZT.TitleSm,{color:"text-dark",children:(0,c.jsx)(tn.Z,{html:(0,a.t)("courses.landing_page.whats_new.call_to_action_subtitle")})})})]}),(0,c.jsx)("ul",{className:"mx-auto grid max-w-[50rem] list-none grid-cols-1 gap-x-8 gap-y-12 md:grid-cols-2 xl:gap-y-16 2xl:max-w-full 2xl:grid-cols-3 2xl:gap-y-24",children:P6.map((function(e){return(0,c.jsx)("li",{className:"flex justify-center",children:(0,c.jsxs)("div",{className:"max-w-[369px] space-y-4 xl:space-y-6",children:[(0,c.jsx)("div",{className:"",children:(0,c.jsx)("img",{src:e.imageUrl,className:"rounded-lg",alt:""})}),(0,c.jsx)("div",{className:"space-y-2.5",children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-5 text-lg font-medium leading-6",children:[(0,c.jsxs)(l.ZT.TitleMd,{color:"text-dark",children:[e.name,e.nameAppendix&&(0,c.jsxs)("span",{className:"text-default opacity-50",children:["\xa0",e.nameAppendix]})]}),(0,c.jsx)("div",{className:"mt-0.5 max-w-xs tracking-tight",children:(0,c.jsx)(l.ZT.LabelLg,{color:"text-default",children:e.description})})]})})]})},e.name)}))})]}),(0,c.jsxs)("div",{className:"mx-auto flex max-w-3xl flex-col items-center gap-y-10",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-5 text-center text-lg font-medium leading-6",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,c.jsx)("div",{className:"opacity-50",children:(0,c.jsx)(l.ZT.TitleMd,{color:"text-default",children:(0,a.t)("courses.landing_page.whats_new.comming_soon")})}),(0,c.jsx)("h3",{children:(0,c.jsx)(l.ZT.TitleXxl,{children:(0,a.t)("courses.landing_page.whats_new.advanced_video_analytics")})})]}),(0,c.jsx)(l.ZT.LabelLg,{color:"text-default",children:(0,a.t)("courses.landing_page.whats_new.analytics_description")})]}),(0,c.jsx)("img",{src:O6,className:"block rounded-xl",alt:""})]})]})})},k6=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("courses.directory.title")}),rightContent:(0,c.jsx)(n6,{})}),(0,c.jsxs)("main",{className:"bg-primary flex flex-col gap-y-10",children:[(0,c.jsx)(h6,{}),(0,c.jsx)(S6,{}),(0,c.jsx)(d6,{}),(0,c.jsx)(y6,{}),(0,c.jsx)(f6,{}),(0,c.jsx)(m6,{})]})]})},C6=function(){var e=P2(),t=e.courses,r=e.fetchNextPage,n=e.hasNextPage,i=e.isLoading,o=e.filter,s=e.handleFilterClick,u=(0,v.wh)().currentCommunityMember,d=(0,Ho.vb)(u),f=(0,ne.yT)(Y2);if(d&&!i&&0===(null===t||void 0===t?void 0:t.length))return(0,c.jsx)(k6,{});var m=[{icon:"16-refresh",label:(0,a.t)("courses.directory.reorder_modal.title"),onClick:function(){return f.show()},value:"reorder"}];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(F.y,{children:d&&t?(0,c.jsx)(l.Lt,{direction:"bottom-start",button:(0,c.jsxs)(l.Lt.MenuButton,{children:[(0,c.jsx)(l.ZT.TitleSm,{as:"h1",weight:"semibold",children:(0,a.t)("courses.directory.title")}),(0,c.jsx)(bt.JO,{type:"caret-down-bold",size:16,className:"text-dark"})]}),options:m}):(0,a.t)("courses.directory.title")})}),u&&(0,c.jsx)(F2,{onClickHandler:s,filter:o}),(0,c.jsxs)(Z1.F.Body,{hasPaddingTopMobile:!1,children:[(0,c.jsx)(A.S,{title:(0,a.t)("courses.directory.title"),bodyClassNames:"view-courses-directory"}),(0,c.jsx)(Z1.F.Content,{className:"!max-w-7xl md:!min-w-0",children:(0,c.jsx)(R2.ListCourses,{communityMember:u,courses:t,isLoading:i,fetchNextPage:r,hasNextPage:n,filter:o})})]})]})},N6=N6.Directory=function(){return(0,c.jsx)(_b.a,{disableRightSidebar:!0,children:(0,c.jsx)(q1.W,{fullWidth:!0,children:(0,c.jsx)(C6,{})})})};var T6=function(e){var t=e.children;return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,c.jsx)(l.aN,{})}),children:t})},A6=(0,n.lazy)((),E6=I6=r(14834),D6=r(15704),L6=function(){var e=(0,I6.f)().markAllAsRead;return(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsx)(q1.W,{fullWidth:!0,fullHeight:!1,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{title:(0,a.t)("notifications.page_title")}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("notifications.page_title")}),rightContent:(0,c.jsxs)("div",{className:"space-x-3",children:[(0,c.jsx)(yt.Y,{content:(0,a.t)("notifications.mark_all_as_read"),children:(0,c.jsx)("button",{type:"submit",onClick:e,children:(0,c.jsx)(bt.JO,{type:"mark-all-read",className:"icon--mark-all-read"})})}),(0,c.jsx)(yt.Y,{content:(0,a.t)("notifications.notification_settings"),children:(0,c.jsx)("a",{href:S.G3.notifications,children:(0,c.jsx)(bt.JO,{type:"settings",className:"icon--settings"})})})]}),hasBorder:!0}),(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:(0,c.jsx)("div",{className:"bg-primary m-4 mx-auto max-w-4xl overflow-auto lg:h-[calc(100vh-160px)]",children:(0,c.jsx)(D6.u,{containerElement:"page",isFullPage:!0},"notifications-page")})})]})})})},M6=Object.freeze({YOUTUBE:"https://www.youtube.com/embed/f4S0lxImK5k?autoplay=1",VIMEO:"https://player.vimeo.com/video/683128266"}),R6=(0,c.jsx)("div",{className:"onboarding-video-full",children:(0,c.jsx)("iframe",{src:M6.YOUTUBE,title:(0,a.t)("community_onboarding.youtube_video_player"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),F6=(0,c.jsx)("div",{className:"onboarding-video-wrapper",children:(0,c.jsx)(b6.Z,{url:M6.VIMEO,className:"onboarding-video-wrapper__react-player",controls:!0,width:"100%",height:"100%"})}),B6=function(e){var t=e.previewImage;return(0,c.jsx)("div",{className:"onboarding__vid-banner-preview",children:(0,c.jsx)("img",{alt:"",src:t,className:"onboarding__vid-banner-preview-img"})})},U6=Object.freeze({YOUTUBE:"YOUTUBE",VIMEO:"VIMEO"}),z6=function(e){var t=e.title,r=e.modalTitle,n=e.description,i=e.videoSource,o=void 0===i?U6.VIMEO:i,a=e.previewImage,s=o===U6.VIMEO?F6:R6;return(0,c.jsx)(l.fj,{title:t,videoFull:s,videoPreview:modalTitle:r,children:n})},V6=r(45810),Z6=r(20761),H6=function(e){var t=e.onEventScheduled,r=e.source,n=e.url,i=e.name,o=void 0===i?"":i,a=e.email,s={name:o,email:void 0===a?"":a};return(0,c.jsx)("div",{className:"h-full w-full",style:{paddingBottom:33},children:(0,c.jsx)(Z6.IU,{onEventScheduled:t,children:(0,c.jsx)(Z6.KS,{prefill:s,url:n,utm:{utmSource:r}})})})},q6=r(86950),G6=function(e){var t=e.onClickSchedule,r=e.onClose,n=e.sdr,i=void 0!==n&&n?"_sdr":"";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"schedule-demo-modal__content",children:[(0,c.jsxs)("div",{className:"schedule-demo-modal__welcome-text",children:[(0,c.jsx)("span",{className:"mr-3",children:(0,a.t)("schedule_modal.wave")})," ",(0,a.t)("schedule_modal.welcome")]}),(0,c.jsx)("div",{className:"schedule-demo-modal__title",children:(0,a.t)("schedule_modal.title".concat(i))}),(0,c.jsx)("div",{className:"schedule-demo-modal__text",children:(0,a.t)("schedule_modal.body".concat(i))}),(0,c.jsxs)("div",{className:"schedule-demo-modal__button-container",children:[(0,c.jsx)(l.zx,{variant:"primary",onClick:t,children:(0,a.t)("schedule_modal.pick_a_time")}),(0,c.jsx)(l.zx,{onClick:r,children:(0,a.t)("schedule_modal.no_thanks")})]})]}),(0,c.jsx)("div",{className:"schedule-demo-modal__images",children:(0,c.jsx)("img",{src:q6,alt:""})})]})},W6=function(){var e=(0,v.wh)().currentCommunityMember;return{shouldShowScheduleDemoModal:!1,setUserHasClosedScheduleModal:totalOnboardingQuestionsPoint:(0,n.useMemo)((,[e])}},Q6=function(e){var t=e.onRedirect;return(0,c.jsxs)("div",{className:"schedule-demo-modal__success-message-content",children:[(0,c.jsx)("div",{className:"schedule-demo-modal__title schedule-demo-modal__title--full",children:(0,a.t)("schedule_modal.calendly.title")}),(0,c.jsx)("div",{className:"schedule-demo-modal__text schedule-demo-modal__text--full",children:(0,a.t)("schedule_modal.calendly.description")}),(0,c.jsx)("div",{children:(0,c.jsx)(l.zx,{variant:"primary",onClick:t,children:(0,a.t)("schedule_modal.calendly.button_text")})})]})};function K6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K6(Object(r),!0).forEach((function(t){$6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K6(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y6=Object.freeze({community_created:"FE - New community",getting_started_page_view:"FE - Getting started page"}),X6=e3=function(e){var t=e.community,r=e.user;return{community_id:t.id,community_name:t.name,community_slug:t.slug,trial_ends_at:t.trial_ends_at,email:r.email||"",user_id:r.id}},t3=function(e){var t=e.community,r=e.communityMember,n=e.eventName;return X6({eventName:n,properties:J6({},e3({community:t,user:r}))})},r3=function(e){var t=e.community,r=e.communityMember,n=e.eventName,i=e.calendar,o=e.source;return X6({eventName:n,properties:J6(J6(J6({},e3({community:t,user:r})),{calendar:i}),{source:o})})};function n3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a3=Object.freeze({IDLE:"IDLE",SCHEDULE:"SCHEDULE",SUCCESS_SCHEDULE:"SUCCESS_SCHEDULE"}),s3=function(e){var t=e.source,r=e.afterClose,i=(0,ne.yT)(),o=W6().totalOnboardingQuestionsPoint,s=l=(0,v.wh)(),u=l.currentUser,d=l.currentCommunity,f=l.currentCommunityMember,m=i3((0,n.useState)(a3.IDLE),2),p=m[0],h=m[1],b="true"===(0,S.Ph)("watch"),y=o>=2,g=y);(0,n.useEffect)((function(){r3({community:d,communityMember:f,eventName:"FE - Schedule Demo Modal Shown",source:t,calendar:u.has_company_email?"Account Executive":"Sales Development Representative"})}),[t,d,f,u]);var x,_=p===a3.SCHEDULE;return(0,c.jsx)(pt.u,{title:(0,a.t)("schedule_modal.title"),hideCloseButton:!0,show:!b&&i.visible,containerClassName:_?"react-modal--typeform":"react-modal--schedule",onClose:s,className:"schedule-demo-modal",children:(0,c.jsx)("div",{className:"flex h-full w-full",children:(n3(x={},a3.IDLE,(function(){return(0,c.jsx)(G6,{onClose:s,onClickSchedule:function(){return h(a3.SCHEDULE),void r3({community:d,communityMember:f,eventName:"FE - Pick A Time Clicked",source:t,calendar:u.has_company_email?"Account Executive":"Sales Development Representative"})},sdr:!y})})),n3(x,a3.SCHEDULE,(function(){return(0,c.jsx)(H6,{url:g,source:t,name:u.name,email:u.email,onEventScheduled:function(){return h(a3.SUCCESS_SCHEDULE)}})})),n3(x,a3.SUCCESS_SCHEDULE,(function(){return(0,c.jsx)(Q6,{onRedirect:s})})),x)[p]()})})},l3=ne.uc.create((),c3=r(99465),u3=function(e){var t=e.children,r=e.icon,i=e.title,o=e.activeStepTitle,a=(0,n.useMemo)((function(){return t.find(()}),[t,o]);return(0,c.jsxs)("div",{className:"checklist-segment",children:[(0,c.jsxs)("div",{className:"checklist-segment__header",children:[(0,c.jsxs)("h3",{className:"checklist-segment__title",children:[(0,c.jsx)(bt.JO,{type:r,size:24}),(0,c.jsx)("div",{children:i})]}),t]}),(0,c.jsx)("div",{className:"checklist-segment__content",children:a.props.children})]})};function d3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}(u3.Step=function(e){var t=e.title,r=e.onClick,n=e.activeStepTitle,i=e.onboardingKey,o=(0,c3.kc)().isStepCompleted;return(0,c.jsxs)("button",{type:"button",className:J()("checklist-segment__step-title",{"checklist-segment__step-title--active":t===n}),onClick:r,children:[(0,c.jsx)(bt.JO,{type:o(i)?"success-circle":"circle-empty",className:"checklist-segment__step-title-icon",size:16}),(0,c.jsx)("div",{children:t})]},t)}).displayName="ChecklistSegment.Step",u3.Step.propTypes={activeStepTitle:I().string.isRequired,children:I().node.isRequired,isDone:I().bool,onClick:I().func,title:I().string.isRequired,onboardingKey:I().string.isRequired},u3.Step.defaultProps={isDone:!1,onClick:fn.noop};var m3=function(e){var t,r=e.defaultStepTitle,i=e.onboarding,o=e.renderContentProps,s=void 0===o?{}:o,l=e.steps,u=void 0===l?[]:l,d=d3((0,n.useState)(null===(t=u[0])||void 0===t?void 0:t.title),2),f=d[0],m=d[1],p=(0,v.wh)(),h=p.currentCommunity,b=p.currentCommunityMember;(0,n.useEffect)((function(){r&&(t3({eventName:"FE - ".concat((0,fn.startCase)(r)," Clicked"),community:h,communityMember:b}),m(r))}),[r,i,h,b]);return(0,c.jsx)(u3,{title:(0,a.t)("community_onboarding.setup_checklist"),icon:"checklist",activeStepTitle:f,children:u.map((function(e){var t=e.title,n=e.renderContent;return(0,c.jsx)(u3.Step,{title:t,onClick:function(){return function(e){t3({eventName:"FE - ".concat((0,fn.startCase)(r)," Clicked"),community:h,communityMember:b}),m(e)}(t)},onboardingKey:e.onboardingKey,onboarding:i,activeStepTitle:f,children:n(s)},t)}))})},p3=r(75116),h3=Object.freeze({community_created:"Community created"}),b3=function(){return e=h3.community_created,void((t=window.ORIBI)&&t.api("track",e));var e,t},y3={name:"SUF_REORDER_TEMPLATES_QUESTIONS",variants:{questions_templates:{name:"QUESTIONS_TEMPLATES",weight:5},templates_questions:{name:"TEMPLATES_QUESTIONS",weight:5}}},v3={name:"SUF_FULL_WIDTH_BUTTONS",variants:{regular_width:{name:"REGULAR_WIDTH",weight:5},full_width:{name:"FULL_WIDTH",weight:5}}},g3=function(e){var t=e.content,r=e.buttonText,n=e.onboardingKey,i=(0,c3.kc)(),o=i.isStepCompleted,s=i.updateStep,u=o(n),d=(0,v.wh)(),f=d.currentCommunity,m=d.currentCommunityMember,p=r===(0,a.t)("community_onboarding.mark_complete")?"Completed":"Clicked";return(0,c.jsxs)("div",{className:"accordion-content",children:[(0,c.jsx)("span",{className:"accordion-content__text",children:t}),r&&!u&&(0,c.jsx)("div",{className:"accordion-content__button-container",children:(0,c.jsx)(l.zx,{variant:"primary",onClick:function(){t3({eventName:"FE - ".concat((0,fn.startCase)(n)," ").concat(p),community:f,communityMember:m}),s({step:n,skipMutation:(0,c3.zU)(n)})},children:r})})]})},x3=function(e){var t=e.title,r=e.subtitle,n=e.defaultOpenItem,i=e.items,o=void 0===i?[]:i,a=e.isItemDone,s=void 0===a?function(e){return e.done}:a;return(0,c.jsxs)("div",{className:"accordion-section",children:[(0,c.jsxs)("div",{className:"accordion-section--title-section",children:[(0,c.jsx)("div",{className:"accordion-section--title-section--title",children:t}),r&&(0,c.jsx)("div",{className:"accordion-section--title-section--subtitle",children:r})]}),(0,c.jsx)(l.UQ,{defaultActiveItemTitle:null===n||void 0===n?void 0:n.title,children:o.map((function(e){return(0,c.jsx)(l.UQ.Item,{isDone:s(e),title:e.title,showIcon:!0,children:e.content},e.title)}))})]})},_3=function(e){var t=e.title,r=e.subtitle,n=e.items,i=void 0===n?[]:n,o=(0,c3.kc)().isStepCompleted,a=i.find(();return(0,c.jsx)(x3,{title:t,subtitle:r,items:i,isItemDone:function(e){var t=e.key;return o(t)},defaultOpenItem:a})},j3={onboardingKey:c3.iD.basic_group,title:(0,a.t)("community_onboarding.basic.section_title"),renderContent:function(){return(0,c.jsx)(_3,{title:(0,a.t)("community_onboarding.basic.title"),subtitle:(0,a.t)("community_onboarding.basic.subtitle"),items:[{key:c3.iD.profile_completed,title:(0,a.t)("community_onboarding.basic.items.complete_profile_title"),content:(0,c.jsx)(g3,{onboardingKey:c3.iD.profile_completed,content:(0,c.jsx)("span",{children:(0,a.t)("community_onboarding.basic.items.complete_profile_content")}),buttonText:(0,a.t)("continue")})},{title:(0,a.t)("community_onboarding.basic.items.customize_branding_title"),key:c3.iD.customize_branding,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.customize_branding,content:(0,c.jsxs)("span",{children:[(0,a.t)("community_onboarding.basic.items.customize_branding_content")," ",(0,c.jsx)("a",{href:"https://help.circle.so/c/getting-started/customize-your-branding",children:(0,a.t)("community_onboarding.basic.learn_more")})]}),buttonText:(0,a.t)("continue")})},{title:(0,a.t)("community_onboarding.basic.items.confirm_community_access_title"),key:c3.iD.confirm_community_access,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.confirm_community_access,content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-2",children:(0,a.t)("community_onboarding.basic.two_types")}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,a.t)("community_onboarding.basic.section_1"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.basic.public")}),(0,c.jsx)("div",{className:"mt-2",children:(0,a.t)("community_onboarding.basic.public_description")})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,a.t)("community_onboarding.basic.section_2"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.basic.private")}),(0,c.jsx)("div",{className:"mt-2",children:(0,a.t)("community_onboarding.basic.private_description")})]}),(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.basic.you_can_review")})]}),buttonText:(0,a.t)("community_onboarding.mark_complete")})}]},c3.iD.basic_group)}},w3={onboardingKey:c3.iD.invite_member_group,title:(0,a.t)("community_onboarding.invite_first_members.section_title"),renderContent:function(){return(0,c.jsx)(_3,{title:(0,a.t)("community_onboarding.invite_first_members.title"),items:[{title:(0,a.t)("community_onboarding.invite_first_members.customize_onboarding_experience_title"),key:c3.iD.customize_onboarding,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.customize_onboarding,content:(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.invite_first_members.first_impression")}),buttonText:(0,a.t)("community_onboarding.mark_complete")})},{title:(0,a.t)("community_onboarding.invite_first_members.items.invite_first_member_title"),key:c3.iD.invite_first_member,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.invite_first_member,content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tn.Z,{className:"mb-4",html:(0,a.t)("community_onboarding.invite_first_members.inviting_people")}),(0,c.jsxs)("ul",{className:"list-none",children:[(0,c.jsxs)("li",{className:"mb-4",children:[(0,a.t)("community_onboarding.invite_first_members.section_1"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.invite_first_members.manual_invitations")}),(0,c.jsx)(tn.Z,{className:"mt-2",html:(0,a.t)("community_onboarding.invite_first_members.send_email_invitations")})]}),(0,c.jsxs)("li",{className:"mb-4",children:[(0,a.t)("community_onboarding.invite_first_members.section_2"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.invite_first_members.import_csv")}),(0,c.jsx)(tn.Z,{className:"mt-2",html:(0,a.t)("community_onboarding.invite_first_members.bulk_import")})]}),(0,c.jsxs)("li",{className:"mb-4",children:[(0,a.t)("community_onboarding.invite_first_members.section_3"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.invite_first_members.invitation_links")}),(0,c.jsx)(tn.Z,{className:"mt-2",html:(0,a.t)("community_onboarding.invite_first_members.create_unique_links")})]}),(0,c.jsxs)("li",{className:"mb-4",children:[(0,a.t)("community_onboarding.invite_first_members.section_4"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.invite_first_members.share_paywall")}),(0,c.jsx)("div",{className:"mt-2",children:(0,a.t)("community_onboarding.invite_first_members.link_members")})]}),(0,c.jsxs)("li",{className:"mb-4",children:[(0,a.t)("community_onboarding.invite_first_members.section_5"),(0,c.jsx)(y.Z.LabelMd,{weight:"medium",children:(0,a.t)("community_onboarding.invite_first_members.zapier_automations")}),(0,c.jsx)("div",{className:"mt-2",children:(0,a.t)("community_onboarding.invite_first_members.setup_automations")})]})]})]}),buttonText:(0,a.t)("continue")})}]},c3.iD.invite_member_group)}},O3={title:(0,a.t)("community_onboarding.join_circle.title"),onboardingKey:c3.iD.join_circle_community_group,renderContent:function(e){var t=e.isCommunityOnTrial;return(0,c.jsx)(_3,{title:(0,a.t)("community_onboarding.join_circle.not_alone"),items:[{title:(0,a.t)("community_onboarding.join_circle.title"),key:c3.iD.join_circle_community_group,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.join_circle_community_group,content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-4",children:(0,a.t)("community_onboarding.join_circle.description_1")}),(0,c.jsx)("div",{children:(0,a.t)("community_onboarding.join_circle.description_2")}),t&&(0,c.jsx)(tn.Z,{className:"mb-4",html:(0,a.t)("community_onboarding.join_circle.description_3")})]}),buttonText:t?(0,a.t)("community_onboarding.upgrade"):(0,a.t)("community_onboarding.visit_community")})}]},c3.iD.join_circle_community_group)}},P3={onboardingKey:c3.iD.engage_community_group,title:(0,a.t)("community_onboarding.engage_community.kickstart_engagement"),renderContent:function(){var e=(0,a.t)("community_onboarding.mark_complete");return(0,c.jsx)(_3,{title:(0,a.t)("community_onboarding.engage_community.members_are_in"),subtitle:(0,c.jsx)("div",{className:"mb-4",children:(0,a.t)("community_onboarding.engage_community.engagement_description")}),items:[{title:(0,a.t)("community_onboarding.engage_community.download_circle_app"),key:c3.iD.download_app,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.download_app,content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tn.Z,{className:"mb-4",html:(0,a.t)("community_onboarding.engage_community.download_circle_app_description_1")}),(0,c.jsxs)("div",{className:"bg-tertiary flex p-4",children:[(0,c.jsx)("div",{className:"mr-1",children:(0,a.t)("community_onboarding.engage_community.lightbulb_emoji")}),(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.engage_community.download_circle_app_description_2")})]})]}),buttonText:e})},{title:(0,a.t)("community_onboarding.engage_community.customize_community_home"),key:c3.iD.customize_home,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.customize_home,content:(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.engage_community.customize_community_home_description")}),buttonText:e})},{title:(0,a.t)("community_onboarding.engage_community.create_event"),key:c3.iD.create_event,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.create_event,content:(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.engage_community.create_event_description")}),buttonText:e})},{title:(0,a.t)("community_onboarding.engage_community.pick_action"),key:c3.iD.first_week_action,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.first_week_action,content:(0,c.jsx)("div",{children:(0,a.t)("community_onboarding.engage_community.pick_action_description")}),buttonText:e})},{title:(0,a.t)("community_onboarding.engage_community.start_conversations"),key:c3.iD.start_conversation,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.start_conversation,content:(0,c.jsx)("div",{children:(0,a.t)("community_onboarding.engage_community.start_conversations_description")}),buttonText:e})},{title:(0,a.t)("community_onboarding.engage_community.be_clear"),key:c3.iD.engagement_means,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.engagement_means,content:(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.engage_community.be_clear_description")}),buttonText:e})}]},c3.iD.engage_community_group)}},S3={onboardingKey:c3.iD.setup_paywall_group,title:(0,a.t)("community_onboarding.setup_paywall.section_title"),renderContent:function(){return(0,c.jsx)(_3,{title:(0,a.t)("community_onboarding.setup_paywall.title"),subtitle:(0,a.t)("community_onboarding.setup_paywall.subtitle"),items:[{title:(0,a.t)("community_onboarding.setup_paywall.items.create_paywall_title"),key:c3.iD.create_paywall,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.create_paywall,content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-4",children:(0,a.t)("community_onboarding.setup_paywall.description_1")}),(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.setup_paywall.description_2")})]}),buttonText:(0,a.t)("continue")})}]},c3.iD.setup_paywall_group)}},k3=[j3,{onboardingKey:c3.iD.setup_spaces_group,title:(0,a.t)("community_onboarding.setup_your_spaces.section_title"),renderContent:function(){return(0,c.jsx)(_3,{title:(0,a.t)("community_onboarding.setup_your_spaces.title"),subtitle:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"mb-4",children:(0,a.t)("community_onboarding.setup_your_spaces.subtitle")}),(0,c.jsx)("a",{href:"https://help.circle.so/c/community-access/what-are-the-different-ways-to-configure-community-access-and-visibility",target:"_blank",rel:"noreferrer",children:(0,a.t)("community_onboarding.setup_your_spaces.learn_more")})]}),items:[{title:(0,a.t)("community_onboarding.setup_your_spaces.items.browse_examples_title"),key:c3.iD.browse_examples,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.browse_examples,content:(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.setup_your_spaces.browse_examples_description")}),(0,c.jsxs)("ul",{className:"my-4",children:[(0,c.jsx)("li",{className:"mb-2",children:(0,c.jsx)("a",{href:"https://community.circle.so/c/spaces-design/",target:"_blank",rel:"noreferrer",children:(0,a.t)("community_onboarding.setup_your_spaces.space_design_contest")})}),(0,c.jsx)("li",{className:"mb-2",children:(0,c.jsx)("a",{href:"https://community.circle.so/c/spaces-design/welcome-to-the-space-design-contest-space",target:"_blank",rel:"noreferrer",children:(0,a.t)("community_onboarding.setup_your_spaces.circle_expert_tips")})}),(0,c.jsx)("li",{className:"mb-2",children:(0,c.jsx)("a",{href:"https://community.circle.so/c/tutorials/2-nail-your-circle-setup-spaces",target:"_blank",rel:"noreferrer",children:(0,a.t)("community_onboarding.setup_your_spaces.nail_setup")})})]}),(0,c.jsxs)("div",{className:"bg-tertiary mb-4 flex p-4",children:[(0,c.jsx)("div",{className:"mr-1",children:(0,a.t)("community_onboarding.setup_your_spaces.lightbulb_emoji")}),(0,c.jsx)("div",{children:(0,a.t)("community_onboarding.setup_your_spaces.tip_1")})]}),(0,c.jsxs)("div",{className:"bg-tertiary mb-4 flex p-4",children:[(0,c.jsx)("div",{className:"mr-1",children:(0,a.t)("community_onboarding.setup_your_spaces.lightbulb_emoji")}),(0,c.jsx)("div",{children:(0,a.t)("community_onboarding.setup_your_spaces.tip_2")})]})]}),buttonText:(0,a.t)("community_onboarding.mark_complete")})},{title:(0,a.t)("community_onboarding.setup_your_spaces.items.default_space_title"),key:c3.iD.default_space,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.default_space,content:(0,c.jsx)(tn.Z,{className:"mb-4",html:(0,a.t)("community_onboarding.setup_your_spaces.default_space_description")}),buttonText:(0,a.t)("community_onboarding.mark_complete")})},{title:(0,a.t)("community_onboarding.setup_your_spaces.items.update_notifications_title"),key:c3.iD.update_notifications,content:(0,c.jsx)(g3,{onboardingKey:c3.iD.update_notifications,content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-4",children:(0,a.t)("community_onboarding.setup_your_spaces.update_notification_description")}),(0,c.jsx)("a",{href:"https://community.circle.so/c/spaces/how-do-notifications-work",target:"_blank",rel:"noreferrer",children:(0,a.t)("community_onboarding.setup_your_spaces.learn_more")})]}),buttonText:(0,a.t)("community_onboarding.mark_complete")})}]},c3.iD.setup_spaces_group)}},S3,w3,P3,O3];function C3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T3=function(){var e=(0,f.useMutation)((function(e){var t=e.experiment;return(0,Er.Cu)(S.av.experiments.finish(),{experiment:t})})).mutateAsync,t=(0,re.E)().isCommunityOnTrial,r=W6(),i=r.setUserHasClosedScheduleModal,o=r.shouldShowScheduleDemoModal,s=(0,ne.yT)(l3),u=(0,v.wh)(),d=u.currentCommunity,m=u.currentCommunityMember,p=(0,rl.t)().item,h=(0,c3.kc)(),b=h.onboardingData,y=h.isLoading,g=h.isStepCompleted,x=C3((0,fr.k)(!0),2),_=x[0],j=x[1],w=function(){var e=(0,v.wh)(),t=e.currentUser,r=e.currentCommunityMember,i=e.currentCommunity;return(0,n.useCallback)((function(){(null===r||void 0===r?void 0:r.is_admin)&&t&&i&&r&&"production"===window.RAILS_ENV&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({marketingData:{ownerEmail:t.email,ownerName:t.name,communityName:i.name,communitySlug:i.slug,isMql:r.marketing_data.is_mql,mqlScore:r.marketing_data.mql_score,persona:r.marketing_data.persona}}))}),[t,r,i])}();(0,n.useEffect)((function(){e({experiment:y3.name}),e({experiment:v3.name})}),[e]),(0,n.useEffect)((function(){o&&(b3(),setTimeout((,600))}),[o]),(0,n.useEffect)((function(){var e,t,r;d&&m&&_&&(t=(e={community:d,communityMember:m}).community,r=e.communityMember,X6({eventName:Y6.getting_started_page_view,properties:J6({},e3({community:t,user:r}))}),j(!1))}),[d,m,_]),(0,n.useEffect)((function(){w()}),[w]);var O,P,k=p?null===(O=k3.find(())||void 0===O?void 0:O.title:null===(P=k3.find(())||void 0===P?void 0:P.title,C=(0,c.jsx)(tn.Z,{html:(0,a.t)("community_onboarding.product_description_text")});return m?(0,c.jsx)(q1.W,{fullWidth:!0,children:(0,c.jsxs)(Z1.F.Body,{hasPaddingTopMobile:!1,children:[(0,c.jsx)(A.S,{title:(0,a.t)("community_onboarding.page_title")}),(0,c.jsx)(Z1.F.Content,{children:(0,c.jsxs)("div",{className:"onboarding",children:[(0,c.jsx)("div",{className:"onboarding__img-banner-wrapper",children:(0,c.jsx)(l.A,{title:(0,a.t)("community_onboarding.page_title"),imgSrc:p3})}),(0,c.jsxs)("div",{className:"onboarding__content",children:[(0,c.jsxs)("div",{className:"bg-primary mb-6 block space-y-3 rounded-lg p-4 shadow-md lg:hidden",children:[(0,c.jsx)(l.ZT.TitleSm,{weight:"semibold",children:(0,a.t)("getting_started_switch_to_desktop_title")}),(0,c.jsx)(l.ZT.BodyMd,{color:"text-dark",children:(0,a.t)("getting_started_switch_to_desktop_description")})]}),(0,c.jsx)("div",{className:"onboarding__checklist-wrapper hidden md:block",children:y?(0,c.jsx)(l.aN,{}):(0,c.jsx)(m3,{defaultStepTitle:k,steps:k3,onboarding:b,renderContentProps:{isCommunityOnTrial:t}})}),(0,c.jsx)(z6,{title:(0,a.t)("community_onboarding.video_modal_title_vimeo"),modalTitle:(0,a.t)("community_onboarding.look_inside_circle"),description:C,previewImage:V6})]})]})}),(0,c.jsx)(Z1.F.Right,{hidden:!0})]})}):null},A3=r(43023),E3=r(57954),I3=["active","autoWidth","children","disabled","noMargin","onClick","tooltipPlacement","tooltipText","variant"];function D3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D3(Object(r),!0).forEach((function(t){M3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R3(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var F3=function(e){var t=e.active,r=void 0!==t&&t,n=e.autoWidth,i=void 0!==n&&n,o=e.children,a=e.disabled,s=void 0!==a&&a,l=e.noMargin,u=void 0!==l&&l,d=e.onClick,f=e.tooltipPlacement,m=void 0===f?"top":f,p=e.tooltipText,h=e.variant,b=void 0===h?"default":h,y=R3(e,I3);return(0,c.jsx)(sO.T,{placement:m,content:p,enabled:Boolean(p)&&!s,className:"inline-block",children:(0,c.jsx)("button",L3(L3({type:"button",disabled:s,className:J()("icon-button focus-visible:!outline-secondary focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"icon-button--default":"default"===b,"icon-button--dark-background":"dark-background"===b,"icon-button--auto-width":i,"icon-button--no-margin":u,"icon-button--active":r,"icon-button--disabled":s}),onClick:function(e){!s&&d&&d(e)}},y),{},{children:o}))})},B3=r(95071),U3=r(21681),z3=function(e){var t=e.devices,r=e.onChange,n=e.placeholder,i=void 0===n?"":n,o=e.value,a=e.label;return(0,c.jsxs)(c.Fragment,{children:[a&&(0,c.jsx)("h4",{className:"settings-form__device-label text-dark",children:a}),(0,c.jsx)("select",{className:"settings-form__device-select",placeholder:i,onChange:value:o,children:null===t||void 0===t?void 0:t.map(()})]})},V3=function(e){var t=e.show,r=e.isHost,n=e.onClose,i=(0,U3.w)(r),o=i.videoInputDevices,s=i.audioInputDevices,u=i.audioOutputDevices,d=(0,E3.I3)(E3.iZ),f=(0,E3.I3)(E3.tS),m=(0,E3.I3)(E3.I7),p=(0,E3.I3)(E3.zl),h=(0,E3.I3)(E3.IQ),b=(0,E3.I3)(E3.ZL),y=(0,E3.Ft)(),v=y.setVideoInputId,g=y.setAudioInputId,x=y.setAudioOutputId,_=y.toggleBlur,j=y.toggleMirror,w=y.toggleNoiseSuppression;return(0,c.jsx)(pt.u,{show:t,onClose:n,children:(0,c.jsxs)("div",{className:"settings-form",children:[(0,c.jsx)("h3",{className:"settings-form__title text-dark",children:(0,a.t)("live_streams.settings.title")}),r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(z3,{label:(0,a.t)("live_streams.settings.camera"),devices:o,placeholder:(0,a.t)("live_streams.settings.camera"),onChange:v,value:d}),(0,c.jsxs)("div",{className:"mb-6 flex w-full items-center",children:[(0,c.jsx)(l.Zh,{field:"blur",value:p,onChange:_}),(0,c.jsx)("label",{children:(0,a.t)("live_streams.settings.blur")})]}),(0,c.jsxs)("div",{className:"mb-6 flex w-full items-center",children:[(0,c.jsx)(l.Zh,{field:"mirror",value:h,onChange:j}),(0,c.jsx)("label",{children:(0,a.t)("live_streams.settings.mirror")})]}),(0,c.jsx)(z3,{label:(0,a.t)("live_streams.settings.microphone"),devices:s,placeholder:(0,a.t)("live_streams.settings.microphone"),onChange:g,value:f}),(0,B3.CB)()&&(0,c.jsxs)("div",{className:"mb-6 flex w-full items-center",children:[(0,c.jsx)(l.Zh,{field:"noiseSuppression",value:b,onChange:w}),(0,c.jsx)("label",{children:(0,a.t)("live_streams.settings.noiseSuppression")})]})]}),!(null===u||void 0===u||!u.length)&&(0,c.jsx)("div",{className:"w-full items-center",children:(0,c.jsx)(z3,{label:(0,a.t)("live_streams.settings.audio_output"),devices:u,placeholder:(0,a.t)("live_streams.settings.audio_output"),onChange:x,value:m})})]})})};function Z3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q3=function(e){var t=e.isHost,r=e.noMargin,n=Z3((0,fr.k)(!1),2),i=n[0],o=n[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.settings"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.settings"),onClick:o,noMargin:r,children:(0,c.jsx)(bt.JO,{type:"video-settings",viewBox:"0 0 24 24"})}),(0,c.jsx)(V3,{show:i,isHost:t,onClose:o})]})},G3=function(e){var t=e.disabled;return(0,c.jsxs)("div",{className:J()({"camera-disabled":t}),children:[!t&&(0,c.jsx)(bt.JO,{type:"camera",size:24}),t&&(0,c.jsx)(bt.JO,{type:"camera-disabled",size:"24"})]})},W3=function(){var e=(0,E3.I3)(E3.YK),t=(0,E3.Ft)().toggleCamera,r=(0,B3.P4)()?(0,a.t)("live_streams.room.button_tooltips.camera_mobile"):(0,a.t)("live_streams.room.button_tooltips.camera");return(0,c.jsx)(F3,{tooltipText:r,onClick:t,"aria-label":r,children:(0,c.jsx)(G3,{disabled:!e})})},Q3=function(e){var t=e.muted;return(0,c.jsxs)("div",{className:J()({"microphone-muted":t}),children:[!t&&(0,c.jsx)(bt.JO,{type:"microphone",viewBox:"0 0 24 24"}),t&&(0,c.jsx)(bt.JO,{type:"microphone-muted",viewBox:"0 0 24 24"})]})},K3=function(){var e=(0,E3.I3)(E3.wV),t=(0,E3.Ft)().toggleMicrophone,r=(0,B3.P4)()?(0,a.t)("live_streams.room.button_tooltips.microphone_mobile"):(0,a.t)("live_streams.room.button_tooltips.microphone");return(0,c.jsx)(F3,{tooltipText:r,onClick:t,"aria-label":r,children:(0,c.jsx)(Q3,{muted:!e})})},J3=r(59248),$3=r(92516),Y3=function(e){var t=e.children,r=e.variant,n=e.onClick;return(0,c.jsx)("button",{type:"submit",onClick:n,className:J()("text-button",{"text-button--primary":"primary"===r,"text-button--danger":"danger"===r}),children:t})},X3=function(e){var t=e.variant,r=void 0===t?"icon":t,n=(0,$3.S)(),i=(0,nt.B0)().roomType,o=(0,J3.t)({title:(0,a.t)("live_streams.pre_join.".concat(i,".hang_up_confirmation")),onConfirm:n}),s=o.confirmModal,l=o.onConfirmButtonClick;return"text"===r?(0,c.jsxs)(c.Fragment,{children:[s,(0,c.jsx)(Y3,{variant:"danger",onClick:l,children:(0,a.t)("live_streams.room.leave")})]}):(0,c.jsxs)(c.Fragment,{children:[s,(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.leave"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.leave"),onClick:l,children:(0,c.jsx)(bt.JO,{type:"exit-session",size:"24"})})]})},e4=r(63515),t4=function(){var e=(0,e4.so)(),t=e.toggleScreenSharing,r=e.isSomeoneScreenSharing,n=e.screenSharingEnabled;return(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.screensharing"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.screensharing"),onClick:t,active:n,disabled:r&&!n,children:(0,c.jsx)(bt.JO,{type:"screen",viewBox:"0 0 24 24"})})},r4=function(){var e=(0,E3.if)(),t=e.isFullscreen,r=e.toggleFullscreen;return(0,c.jsxs)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.fullscreen"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.fullscreen"),tooltipPlacement:"left",onClick:r,variant:"dark-background",noMargin:!0,children:[!t&&(0,c.jsx)(bt.JO,{type:"fullscreen",size:"24"}),t&&(0,c.jsx)(bt.JO,{type:"exit-fullscreen",size:"24"})]})},n4=r(84840),i4=function(){var e=(0,E3.if)(),t=e.isSidebarOpen,r=e.isParticipantsSelected,n=e.toggleParticipants,i=((0,n4.C)().count||0)+((0,nt.Nc)({refetchInterval:1e4}).count||0);return(0,c.jsxs)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.participants"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.participants"),onClick:n,active:t&&r,autoWidth:!0,noMargin:!0,children:[(0,c.jsx)(bt.JO,{type:"people",viewBox:"0 0 24 24"}),(0,c.jsx)("span",{className:"icon-button__label",children:i})]})},o4=function(){var e=(0,E3.if)(),t=e.isSidebarOpen,r=e.isChatSelected,n=e.hasUnseenChatMessages,i=e.toggleChat;return(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.chat"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.chat"),onClick:i,active:t&&r,children:n?(0,c.jsx)(bt.JO,{type:"chat-activity",viewBox:"0 0 25 24"}):(0,c.jsx)(bt.JO,{type:"chat",viewBox:"0 0 24 24"})})},a4=function(){var e=(0,E3.if)(),t=e.isRoomInfoOpen,r=e.toggleIsRoomInfoOpen,n=(0,nt.B0)().roomType;return(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.".concat(n,".info")),"aria-label":(0,a.t)("live_streams.room.button_tooltips.".concat(n,".info")),onClick:r,active:t,children:(0,c.jsx)(bt.JO,{type:"session-info",viewBox:"0 0 24 24"})})};function s4(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function l4(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s4(o,n,i,a,s,"next",e)}function s(e){s4(o,n,i,a,s,"throw",e)}a(void 0)}))}}var c4=function(){var e=(0,nt.Qs)(),t=(0,A3.cy)().room,r=(0,te.tm)(),n=r.streamingHoursAvailable,i=r.recordingHoursAvailable,o=r.streamingTotalPlanHours,s=r.recordingTotalPlanHours,u=(0,te.Yq)(),d=u.currentQuantity,f=u.purchaseAsync,m=u.unitSize,p=(0,te.$v)(),h=p.currentQuantity,b=p.purchaseAsync,v=p.unitSize,g=function(){var e=l4(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.recording_enabled){e.next=2;break}return e.abrupt("return");case 2:if(!i){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,f(m);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=l4(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b(v);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=(null===t||void 0===t?void 0:t.recording_enabled)&&!i,j=!n||_,w=(0,l.pm)(),O=w.success,P=w.error,S=function(){var t=l4(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g();case 3:return t.next=5,x();case 5:j&&O((0,a.t)("settings.billing.add_ons.changes_succeeded")),e(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),P((0,a.t)("settings.billing.add_ons.changes_not_succeeded")),console.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),k=j?(0,c.jsxs)("div",{className:"mt-12",children:[_&&(0,c.jsx)("div",{className:"px-1 text-justify",children:(0,c.jsx)(y.Z.BodyXs,{children:(0,a.t)("live_streams.form.upgrade_recording_hours_label",{hours:s+d})})}),!n&&(0,c.jsx)("div",{className:"px-1 text-justify",children:(0,c.jsx)(y.Z.BodyXs,{children:(0,a.t)("live_streams.form.upgrade_streaming_hours_label",{hours:o+h})})})]}):null,C=(0,a.t)("live_streams.pre_join.".concat(t.space_visibility,".go_live_").concat(t.access_type,"_confirmation")),N=(0,nt.tv)({title:C,onConfirm:S,bodyElement:k,buttonLabel:j?(0,a.t)("live_streams.form.submit_button_with_upgrade_label"):(0,a.t)("confirm")}),T=N.confirmModal,A=N.onConfirmButtonClick;return(0,c.jsxs)(c.Fragment,{children:[T,(0,c.jsx)(Y3,{variant:"primary",onClick:A,children:(0,a.t)("live_streams.room.go_live")})]})},u4=function(){var e=(0,nt.wA)(),t=(0,nt.B0)().roomType,r=(0,nt.tv)({title:(0,a.t)("live_streams.".concat(t,"_ended.confirm")),onConfirm:e}),n=r.confirmModal,i=r.onConfirmButtonClick;return(0,c.jsxs)(c.Fragment,{children:[n,(0,c.jsx)(Y3,{variant:"danger",onClick:i,children:(0,a.t)("live_streams.room.".concat(t,".end"))})]})},d4=function(){var e=(0,nt.sv)(),t=e.isHandRaised,r=e.toggleHand;return t?(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.lower_hand"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.lower_hand"),onClick:r,active:t,children:(0,c.jsx)(bt.JO,{type:"raise-hand",viewBox:"0 0 24 24"})},"lower_hand"):(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.raise_hand"),"aria-label":(0,a.t)("live_streams.room.button_tooltips.raise_hand"),onClick:r,active:t,children:(0,c.jsx)(bt.JO,{type:"raise-hand",viewBox:"0 0 24 24"})},"raise_hand")},f4=function(e){var t=e.strDate,r=IY(t);return(0,c.jsx)("div",{className:"text-dark mr-4 text-sm font-medium",children:r})},m4=function(){var e=(0,e4.bf)().localPeerDownlinkQuality,t=!e||-1===e;return(0,c.jsxs)("div",{className:"signal-indicator",children:[(0,c.jsx)("div",{className:J()("signal-indicator__bar",{active:e>=0||t})}),(0,c.jsx)("div",{className:J()("signal-indicator__bar",{active:e>=3||t})}),(0,c.jsx)("div",{className:J()("signal-indicator__bar",{active:e>=4||t})})]})},p4=function(e){var t=e.liveAt;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex w-40 shrink-0 items-center justify-start",children:[(0,c.jsx)(a4,{}),(0,c.jsx)(q3,{isHost:!0})]}),(0,c.jsxs)("div",{className:"flex grow flex-row items-center justify-center",children:[(0,c.jsx)(K3,{}),(0,c.jsx)(W3,{}),(0,c.jsx)(X3,{variant:"text"}),(0,c.jsx)(t4,{}),(0,c.jsx)(d4,{})]}),(0,c.jsxs)("div",{className:"flex w-40 shrink-0 items-center justify-end",children:[t&&(0,c.jsx)(f4,{strDate:t}),(0,c.jsx)(m4,{}),(0,c.jsx)(o4,{}),(0,c.jsx)(i4,{})]})]})},h4=function(e){var t=e.isBackstage,r=e.isLive,n=e.liveAt;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex w-40 shrink-0 items-center justify-start",children:[(0,c.jsx)(X3,{}),(0,c.jsx)(a4,{}),(0,c.jsx)(q3,{isHost:!0})]}),(0,c.jsxs)("div",{className:"flex grow flex-row items-center justify-center",children:[(0,c.jsx)(K3,{}),(0,c.jsx)(W3,{}),t&&(0,c.jsx)(c4,{}),!t&&(r?(0,c.jsx)(u4,{}):(0,c.jsx)(X3,{variant:"text"})),(0,c.jsx)(t4,{}),(0,c.jsx)(d4,{})]}),(0,c.jsxs)("div",{className:"flex w-40 shrink-0 items-center justify-end",children:[n&&(0,c.jsx)(f4,{strDate:n}),(0,c.jsx)(m4,{}),(0,c.jsx)(o4,{}),(0,c.jsx)(i4,{})]})]})},b4=function(e){var t=e.liveAt;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"footer-left",children:(0,c.jsx)(a4,{})}),(0,c.jsxs)("div",{className:"footer-center",children:[(0,c.jsx)(X3,{variant:"text"}),(0,c.jsx)(d4,{})]}),(0,c.jsxs)("div",{className:"footer-right",children:[t&&(0,c.jsx)(f4,{strDate:t}),(0,c.jsx)(o4,{}),(0,c.jsx)(i4,{})]})]})},y4=function(e){var t=e.peer,r=(0,nt.aV)(t),n=r.name,i=r.avatarUrl,o=r.participant,s=r.isHost,l=r.isCohost;return(0,c.jsxs)("div",{className:"mr-14 flex w-56 shrink-0 flex-col items-stretch",style:{scrollSnapAlign:"start"},children:[(0,c.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,c.jsx)("div",{className:"relative mr-4 h-10 w-10",children:(0,c.jsx)(St,{name:n,src:i,size:"sm",variant:"rounded-square"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-darkest truncate text-lg font-semibold",children:n}),(0,c.jsx)("div",{className:"text-dark text-sm font-semibold",children:s?(0,a.t)("live_streams.room.host"):l?(0,a.t)("live_streams.room.cohost"):null})]})]}),(0,c.jsx)("div",{className:"text-dark text-sm font-normal",children:null===o||void 0===o?void 0:o.headline})]})},v4=r(86254);function g4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x4(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _4=function(e){var t=(0,n.useRef)(null),r=g4((0,n.useState)(!1),2),i=r[0],o=r[1];(0,n.useLayoutEffect)((function(){var e=t.current;if(e){var r=new v4.do((function(t){t[0]&&o(e.scrollWidth>e.clientWidth)}));return r.observe(e),function(){r.disconnect()}}}),[]);return{hasScroll:i,scrollRef:t,scrollLeft:function(){var r=t.current;r&&(r.scrollLeft-=e)},scrollRight:function(){var r=t.current;r&&(r.scrollLeft+=e)}}},j4=function(){var e=(0,nt.C3)().hosts,t=_4(280),r=t.hasScroll,n=t.scrollRef,i=t.scrollLeft,o=t.scrollRight;return(0,c.jsxs)("div",{className:"flex flex-col overflow-hidden px-6 pb-4 pt-12",children:[(0,c.jsx)("div",{className:"live-stream-room-info-hosts-container flex w-full flex-1 flex-nowrap items-start overflow-x-auto",ref:n,style:{scrollBehavior:"smooth",scrollSnapType:"x mandatory"},children:null===e||void 0===e?void 0:e.map((function(e){return(0,c.jsx)(y4,{peer:e},e.id)}))}),r&&(0,c.jsxs)("div",{className:"flex justify-end gap-x-2 px-4",children:[(0,c.jsx)("button",{type:"submit",onClick:i,children:(0,c.jsx)(bt.JO,{type:"live-streams-arrow-left",size:"24"})}),(0,c.jsx)("button",{type:"submit",onClick:o,children:(0,c.jsx)(bt.JO,{type:"live-streams-arrow-right",size:"24"})})]})]})},w4=r(7253),O4=function(e){var t=e.room,r="".concat(window.location.origin).concat(S.dE.publicRoom({roomSlug:t.slug}));return(0,it.Hq)(t)?(0,c.jsxs)("div",{children:[(0,c.jsx)(y.Z.LabelSm,{weight:"semibold",children:(0,a.t)("live_streams.room.notifications.event_url_label")}),(0,c.jsx)(w4.B,{label:"",placeholder:(0,a.t)("live_streams.room.notifications.share_public_link_label"),link:r,className:"!mb-5"})]}):null},P4=function(){var e=(0,nt.NW)(),t=e.name,r=e.description,n=(0,E3.if)().toggleIsRoomInfoOpen;return(0,c.jsxs)("div",{className:"live-stream-room-info",children:[(0,c.jsx)("button",{type:"submit",className:"live-stream-room-info__close",onClick:n,children:(0,c.jsx)(bt.JO,{type:"close",size:24})}),(0,c.jsx)("div",{className:"bg-secondary flex h-full w-1/4 shrink-0 flex-col rounded-sm px-6 py-5 pt-12",children:(0,c.jsxs)("div",{className:"overflow-y-scroll",children:[(0,c.jsx)(O4,{room:e}),(0,c.jsx)("div",{className:"text-darkest text-2xl font-bold",children:t}),r&&(0,c.jsx)("div",{className:"text-dark mt-2",children:r})]})}),(0,it.ee)(e)&&(0,c.jsx)(j4,{})]})},S4=function(e){var t=e.isHost,r=e.hidden,n=(0,A3.cy)().room,i=n.live_at,o=(0,it.HN)(n),a=(0,it.SS)(n),s=(0,it.fN)(n),l=(0,E3.if)().isRoomInfoOpen;return(0,c.jsxs)("footer",{className:J()("live-stream-room-footer",{"live-stream-room-footer--hidden":r}),children:[l&&(0,c.jsx)(P4,{}),t&&o&&(0,c.jsx)(h4,{isBackstage:a,isLive:s,liveAt:i}),t&&!o&&(0,c.jsx)(p4,{liveAt:i}),!t&&(0,c.jsx)(b4,{liveAt:i})]})},k4=r(21491);function C4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N4(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T4=function(e){var t=e.closingSeconds,r=(0,nt.B0)().roomType,i=(0,n.useRef)(null),o=C4((0,n.useState)(t),2),s=o[0],l=o[1];return(0,n.useEffect)((function(){return i.current=setTimeout((function(){l(Math.max(s-1,0)),i.current=null}),1e3),),[s]),(0,c.jsx)("div",{className:"absolute left-6 top-6 z-20 flex w-52 items-center rounded-md bg-gray-800/80 px-3 py-2 text-xs text-gray-100",children:s?(0,a.t)("live_streams.room.".concat(r,".closing"),{seconds:s}):(0,a.t)("live_streams.room.".concat(r,".closing_now"))})},A4=function(){var e=(0,k4.N)();return(0,it.B8)(e)?(0,c.jsx)(T4,{closingSeconds:15}):null},E4=function(){return(0,c.jsx)("div",{className:"room-fullscreen-toggle",children:(0,c.jsx)("div",{className:"room-fullscreen-toggle__wrapper",children:(0,c.jsx)(r4,{})})})},I4=r(9607);function D4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L4(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M4=function(e){var t=e.hlsUrl,r=e.onDoubleClick,i=void 0===r?fn.noop:r,o=e.showControls,s=void 0!==o&&o,u=(0,n.useRef)(null),d=(0,n.useRef)(null),f=D4((0,n.useState)((0,B3.G6)()),2),m=f[0],p=f[1];return(0,n.useEffect)((function(){if(t){var e={autoplay:!0,playsinline:!0,controls:s,muted:(0,B3.G6)(),html5:{vhs:{overrideNative:!0},nativeAudioTracks:!1,nativeVideoTracks:!1},sources:[{src:t,type:"application/x-mpegURL"}]};if(d.current){var r=d.current;r.autoplay(e.autoplay),r.src(e.sources),r.controls(e.controls)}else{var n=document.createElement("video-js");n.classList.add("vjs-big-play-centered"),u.current.appendChild(n),d.current=(0,I4.Z)(n,e,()}}}),[t,u,s]),(0,n.useEffect)((,[d]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"relative flex h-full w-full flex-col justify-center",onDoubleClick:i,"data-vjs-player":!0,children:(0,c.jsx)("div",{className:"hls-player",ref:u})}),m&&(0,c.jsx)("div",{className:"bg-modal-overlay fixed left-0 top-0 flex h-screen w-full items-center justify-center",children:(0,c.jsx)(l.zx,{onClick:function(){p(!1),d.current.play(),d.current.muted(!1)},children:(0,a.t)("live_streams.play_with_audio")})})]})},R4=function(e){var t=e.hlsUrl,r=(0,A3.y4)().toggleFullscreen;return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(M4,{hlsUrl:t,onDoubleClick:r}),!t&&(0,c.jsx)(gd.a,{className:"absolute flex h-full w-full justify-center align-middle"})]})},F4=function(){var e=(0,k4.N)(),t=(0,e4.uZ)().isHlsRunning;return t||!(0,it.fN)(e)||(0,it.B8)(e)||!t&&(0,it.$e)(e)&&!(0,it.Gi)(e)?null:(0,c.jsx)("div",{className:"absolute left-6 top-6 z-20 flex w-40 items-center rounded-md bg-gray-800/80 px-3 py-2 text-xs text-gray-100",children:(0,a.t)("live_streams.room.initializing")})},B4=function(e){var t=e.children,r=e.onClose;return(0,c.jsxs)("div",{className:"bg-primary relative mb-6 w-full rounded-md px-4 pb-6 pt-5 shadow-sm",children:[r&&(0,c.jsx)("button",{type:"button",className:"focus-visible:!outline-secondary absolute right-3.5 top-4 flex focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:r,children:(0,c.jsx)(bt.JO,{type:"close",size:24,className:"h-6 w-6"})}),t]})},U4=function(e){var t=e.onClose;return(0,c.jsx)(B4,{onClose:t,children:(0,c.jsxs)("div",{className:"backstage-notification",children:[(0,c.jsx)("div",{className:"backstage-notification__icon",children:(0,c.jsx)(bt.JO,{type:"notification-info",size:"24"})}),(0,c.jsxs)("div",{className:"backstage-notification__info",children:[(0,c.jsx)("h4",{className:"text-darkest",children:(0,a.t)("live_streams.room.notifications.backstage_title")}),(0,c.jsx)("p",{className:"text-dark",children:(0,a.t)("live_streams.room.notifications.backstage_message")})]})]})})},z4=function(e){var t=e.name,r=e.participant,n=e.onAccept,i=e.onCancel;return(0,c.jsx)(B4,{children:(0,c.jsxs)("div",{className:"cohost-invite-notification",children:[(0,c.jsx)("div",{className:"cohost-invite-notification__info-wrapper",children:(0,c.jsxs)("div",{className:"cohost-invite-notification__info",children:[(0,c.jsx)("div",{className:"cohost-invite-notification__info__avatar",children:(0,c.jsx)(St,{name:t,src:null===r||void 0===r?void 0:r.avatar_url,size:"sm"})}),(0,c.jsxs)("div",{className:"cohost-invite-notification__info__message-wrapper",children:[(0,c.jsx)("div",{className:"cohost-invite-notification__info__name",children:t}),(0,c.jsx)("div",{className:"cohost-invite-notification__info__message",children:(0,a.t)("live_streams.room.notifications.cohost_invite_message")})]})]})}),(0,c.jsxs)("div",{className:"cohost-invite-notification__actions",children:[(0,c.jsx)("button",{type:"submit",className:"cohost-invite-notification__actions__decline",onClick:i,children:(0,a.t)("live_streams.room.notifications.decline")}),(0,c.jsx)("button",{type:"submit",className:"cohost-invite-notification__actions__accept",onClick:n,children:(0,a.t)("live_streams.room.notifications.accept")})]})]})})},V4=function(e){var t=e.name,r=e.participant,n=e.onClose;return(0,c.jsx)(B4,{onClose:n,children:(0,c.jsx)("div",{className:"moderator-invite-notification",children:(0,c.jsx)("div",{className:"moderator-invite-notification__info-wrapper",children:(0,c.jsxs)("div",{className:"moderator-invite-notification__info",children:[(0,c.jsx)("div",{className:"moderator-invite-notification__info__avatar",children:(0,c.jsx)(St,{name:t,src:null===r||void 0===r?void 0:r.avatar_url,size:"sm"})}),(0,c.jsxs)("div",{className:"moderator-invite-notification__info__message-wrapper",children:[(0,c.jsx)("div",{className:"moderator-invite-notification__info__name",children:t}),(0,c.jsx)("div",{className:"moderator-invite-notification__info__message",children:(0,a.t)("live_streams.room.notifications.moderator_invite_message")})]})]})})})})},Z4=function(e){var t=e.onClose,r=(0,nt.NW)(),n="".concat(window.location.origin).concat(S.dE.publicRoom({roomSlug:r.slug}));return(0,c.jsx)(B4,{onClose:t,children:(0,c.jsxs)("div",{className:"px-4",children:[(0,c.jsx)(y.Z.TitleMd,{children:(0,a.t)("live_streams.room.notifications.share_public_link")}),(0,c.jsx)(w4.B,{label:"",placeholder:(0,a.t)("live_streams.room.notifications.share_public_link_label"),link:n,className:"!my-5"}),(0,c.jsx)(y.Z.LabelSm,{children:(0,a.t)("live_streams.room.notifications.share_public_link_message")})]})})};function H4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q4(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W4(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q4=function(){var e=(0,A3.NA)(),t=e.data.room,r=e.actions,i=r.refetchRoom,o=r.onEndStream,s=function(){var e=G4((0,n.useState)(!0),2),t=e[0],r=e[1],i=(0,nt.NW)();return{isPublicStreamNotificationVisible:(0,it.L6)(i)&&(null===i||void 0===i?void 0:i.can_manage)&&t,hidePublicStreamNotification:function(){return r(!1)}}}(),l=s.isPublicStreamNotificationVisible,c=s.hidePublicStreamNotification,u=function(e){var t=H4((0,n.useState)(!1),2),r=t[0],i=t[1];return(0,n.useEffect)((function(){(0,it.SS)(e)?i(!0):r&&i(!1)}),[null===e||void 0===e?void 0:e.status]),{backstageNotificationVisible:r,hideBackstageNotification:function(){return i(!1)}}}(t),d=u.backstageNotificationVisible,m=u.hideBackstageNotification,p=function(){var e=(0,oe.p)().error,t=(0,e4.Kr)(),r=t.hasRoleChangeRequest,n=t.requestedByPeer,i=t.acceptRoleChange,o=t.rejectRoleChange,s=(0,e4.Hy)(),l=s.roleChangedToModerator,c=s.hideModeratorNotification,u=(0,A3.NA)(),d=u.data,m=d.room,p=d.currentParticipant,h=u.actions.refetchParticipants,b=(0,f.useMutation)((function(){return vn.Qk.changeRole({roomId:null===m||void 0===m?void 0:m.id,participantId:null===p||void 0===p?void 0:p.id,role:it.VM.HOST,forReactQuery:!0})}),{onSuccess:function(){i(),h()},onError:function(){o(),e((0,a.t)("live_streams.room.notifications.cohost_invite_error"))}}),y=(0,nt.aV)(n||{}),v=y.participant;return{roleChangeNotificationVisible:r,roleChangeRequestedByName:y.name,roleChangeRequestedByParticipant:v,acceptRoleChange:b.mutate,rejectRoleChange:o,roleChangedToModerator:l,hideModeratorNotification:c}}(),h=p.roleChangeNotificationVisible,b=p.roleChangeRequestedByName,y=p.roleChangeRequestedByParticipant,v=p.acceptRoleChange,g=p.rejectRoleChange,x=p.roleChangedToModerator,_=p.hideModeratorNotification;return(0,e4.rH)({onRoomUpdate:i,onEndStream:o}),{isPublicStreamNotificationVisible:l,hidePublicStreamNotification:c,backstageNotificationVisible:d,hideBackstageNotification:m,roleChangeNotificationVisible:h,roleChangeRequestedByName:b,roleChangeRequestedByParticipant:y,acceptRoleChange:v,rejectRoleChange:g,roleChangedToModerator:x,hideModeratorNotification:_}},K4=function(){var e=Q4(),t=e.isPublicStreamNotificationVisible,r=e.hidePublicStreamNotification,n=e.backstageNotificationVisible,i=e.hideBackstageNotification,o=e.roleChangeNotificationVisible,a=e.roleChangeRequestedByName,s=e.roleChangeRequestedByParticipant,l=e.acceptRoleChange,u=e.rejectRoleChange,d=e.roleChangedToModerator,f=e.hideModeratorNotification,m=[];return t&&m.push((0,c.jsx)(Z4,{onClose:r},"public-stream-notification")),n&&m.push((0,c.jsx)(U4,{onClose:i},"backstage-notification")),o&&m.push((0,c.jsx)(z4,{name:a,participant:s,onAccept:l,onCancel:u},"cohost-invite-notification")),d&&m.push((0,c.jsx)(V4,{name:a,participant:s,onClose:f},"moderator-invite-notification")),m.length?(0,c.jsx)("div",{className:"absolute right-0 top-0 z-20 flex w-1/3 flex-col items-stretch p-6",children:m.map(()}):null},J4=function(){var e=(0,nt.NW)();return!(0,e4.uZ)().isRecording||(0,it.B8)(e)?null:(0,c.jsxs)("div",{className:"absolute left-6 top-6 z-20 flex w-28 items-center rounded-md bg-gray-800/80 px-3 py-2 text-xs text-gray-100",children:[(0,c.jsx)(bt.JO,{type:"recording",className:"mr-1 block h-4 w-4",viewBox:null}),(0,c.jsx)("span",{children:(0,a.t)("live_streams.room.recording")})]})},$4=16/9,Y4=function(e){var t=e.shouldUseContentPositioning,r=(0,nt.NW)(),i=(0,e4.uZ)().isHlsRunning,o=function(e){var t=(0,n.useRef)(null),r=(0,E3.if)().isSidebarOpen,i=function(){var e=t.current;if(e){var r,n,i=e.parentElement,o=i.offsetWidth,a=i.offsetHeight;if(o/a>$4)r=.0125*(a-o)+.04*a+48,n=(o-a*$4)/2+24;else{n=24;var s=o/$4;r=(a-s)/2+(.02*(s-a)+.025*s)+48}e.style.bottom="".concat(r,"px"),e.style.right="".concat(n,"px")}};return(0,n.useLayoutEffect)((,[e,r]),t}(t),s=((0,it.fN)(r)||(0,it.B8)(r))&&i;return s||(0,it.Zo)(r)?(0,it.$e)(r)?null:(0,c.jsx)("div",{className:J()("status-badge",{"status-badge--live":s,"status-badge--backstage":!s}),ref:o,children:(0,c.jsx)("div",{className:"status-badge__label",children:s?(0,a.t)("live_streams.room.live"):(0,a.t)("live_streams.room.backstage")})}):null},X4=function(e){var t=e.hlsUrl,r=(0,e4.RW)().peers;return(0,nt.rs)(r),(0,c.jsx)("main",{className:"hls-layout",children:(0,c.jsxs)("div",{className:"hls-content",children:[(0,c.jsx)(F4,{}),(0,c.jsx)(A4,{}),(0,c.jsx)(R4,{hlsUrl:t}),(0,c.jsx)(E4,{}),(0,c.jsx)(K4,{}),(0,c.jsx)(Y4,{shouldUseContentPositioning:!0}),(0,c.jsx)(J4,{})]})})},e8=function(){return(0,c.jsxs)("div",{className:"flex h-screen w-screen flex-col items-center justify-center",children:[(0,c.jsx)("div",{className:"override-live-loader-svg-width mb-5",children:(0,c.jsx)(gd.a,{})}),(0,c.jsx)("div",{className:"mb-4 text-center",children:(0,c.jsx)(y.Z.TitleXl,{children:(0,a.t)("live_streams.room.loading.title")})}),(0,c.jsx)("div",{className:"mb-4 text-center",children:(0,c.jsx)(y.Z.LabelMd,{children:(0,a.t)("live_streams.room.loading.subtitle")})})]})},t8=r(31795),r8=r.n(t8),n8=function(){var e=(0,oe.p)(),t=e.success,r=e.error,n=(0,A3.cy)(),i=n.room,o=n.currentParticipant,s=(0,nt.B0)().roomType,u=(0,f.useMutation)((function(e){return vn.Qk.leaveFeedback({id:null===i||void 0===i?void 0:i.id,participantId:null===o||void 0===o?void 0:o.id,formData:e,forReactQuery:!0})}),{onSuccess:function(){var e,r;t((0,a.t)("live_streams.feedback_form.success_message"),{duration:"short",shouldUseProgress:!1}),null===(e=window.webview)||void 0===e||null===(r=e.onEndLiveStream)||void 0===r||r.call(e)},onError:);if(null===i||void 0===i||!i.id||null===o||void 0===o||!o.id||u.isSuccess)return null;var d=r8().name,m=r8().version,p=r8().os,h=r8().description,b=JSON.stringify({deviceType:"browser",data:{userAgent:navigator.userAgent,name:d,version:m,os:null===p||void 0===p?void 0:p.toString(),description:h}});return(0,c.jsxs)(l.l0,{className:"live-streams-feedback-form",onSubmit:u.mutate,children:[(0,c.jsx)("div",{className:"live-streams-feedback-form__feedback-message",children:(0,a.t)("live_streams.feedback_form.".concat(s,".feedback_message"))}),(0,c.jsxs)("div",{className:"live-streams-feedback-form__fields",children:[(0,c.jsx)("div",{className:"live-streams-feedback-form__title",children:(0,a.t)("live_streams.feedback_form.title")}),(0,c.jsx)(l.l0.Item,{hideBorder:!0,fullWidth:!0,hideLabel:!0,hideDescription:!0,translationRoot:"live_streams.feedback_form",name:"score",rules:{required:I18n.t("live_streams.feedback_form.score_required_error")},children:(0,c.jsx)(l.l0.ScorePicker,{})}),(0,c.jsx)(l.l0.Item,{hideBorder:!0,fullWidth:!0,hideLabel:!0,hideDescription:!0,translationRoot:"live_streams.feedback_form",name:"message",children:(0,c.jsx)(l.l0.Input,{variant:"textarea"})}),(0,c.jsx)(l.l0.Input,{type:"hidden",name:"device_info",value:b})]}),(0,c.jsx)("div",{className:"live-streams-feedback-form__submit",children:(0,c.jsx)(l.zx,{variant:"primary",disabled:u.isLoading,children:(0,a.t)("live_streams.feedback_form.submit_label")})})]})},i8=function(e){var t=e.streamEnded,r=(0,nt.NW)(),n=(0,nt.B0)().roomType,i=t?null!==r&&void 0!==r&&r.inactive?(0,a.t)("live_streams.".concat(n,"_ended.title_inactive")):(0,a.t)("live_streams.".concat(n,"_ended.title")):(0,a.t)("live_streams.".concat(n,"_ended.title_left"));return(0,c.jsxs)("div",{className:"stream-ended",children:[(0,c.jsx)("h3",{children:i}),(0,c.jsx)(n8,{}),(0,c.jsx)($e.z,{variant:"link",onClick:function(){var e,t;null===(e=window.webview)||void 0===e||null===(t=e.onEndLiveStream)||void 0===t||t.call(e),window.location.href="/"},className:"text-default",children:(0,a.t)("live_streams.stream_ended.back_to_community_button_label")})]})},o8=function(e){var t=e.size,r=void 0===t?"md":t,n=(0,v.N3)();return n?(0,c.jsx)(St,{name:n.name,src:n.avatar_url,size:r}):null},a8=function(){var e=(0,v.wh)().currentCommunity,t=(e=void 0===e?{}:e).logo_url,r=e.icon_url,n=e.name,i=window.webview.isComingFromReactNativeWebview,o=function(){var e,t;i?null===(e=window.webview)||void 0===e||null===(t=e.onEndLiveStream)||void 0===t||t.call(e):window.location.href="/"};return(0,c.jsxs)("header",{className:"flex h-16 items-center justify-between px-4 py-5",children:[t&&(0,c.jsx)("img",{alt:"",className:"max-h-full cursor-pointer",src:t,title:n,onClick:o}),!t&&(0,c.jsxs)("div",{className:"text-brand flex h-full cursor-pointer items-center text-xl",onClick:o,children:[r&&(0,c.jsx)("img",{alt:"",src:r,className:"mr-3 max-h-full py-4"}),n]}),!i&&(0,c.jsx)("div",{className:"relative h-full w-12",children:(0,c.jsx)(o8,{size:"sm"})})]})},s8=r(58730),l8=function(e){var t=e.room,r=e.labelType,i=void 0===r?"text":r,o=e.size,s=void 0===o?"md":o,l=t.participants_preview,u=(0,n.useMemo)((function(){if(null===l||void 0===l||!l.count)return"";var e=l.records[0].name;switch(l.count){case 1:return"".concat(e," ").concat((0,a.t)("live_streams.pre_join.participants_preview_text_singular"));case 2:return"".concat(e," ").concat((0,a.t)("live_streams.pre_join.participants_preview_text_1_other"));default:return"".concat(e," & ").concat(l.count-1," ").concat((0,a.t)("live_streams.pre_join.participants_preview_text_plural"))}}),[l]);return(0,c.jsx)("div",{title:"title"===i?u:"",className:J()("participants-preview",{"participants-preview--sm":"sm"===s,"participants-preview--empty":0===(null===l||void 0===l?void 0:l.count)}),children:(null===l||void 0===l?void 0:l.count)>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s8.v,{users:l.records,totalCount:l.count,size:"md"}),"text"===i&&(0,c.jsx)("div",{className:"participants-preview__label",children:u})]})})},c8=function(e){var t=e.room,r=e.joinAsHost,n=(0,nt.h5)(r),i=n.addonPurchaseNotAllowed,o=n.isLoadingUsage,s=n.onClickHandler,l=n.boxMessage,u=n.backstageButtonLabel,d=(0,G.R)().liveMobileWebRTCEnabled,f=(0,nt.B0)().roomType;return!(0,it.Zo)(t)||(0,it.$e)(t)&&!(0,it.HN)(t)?(0,c.jsx)("p",{className:"stream-info-box__message",children:(0,a.t)("live_streams.pre_join.".concat(f,".room_has_not_started_message"))}):(0,B3.P4)()&&!d?null:(0,c.jsxs)(c.Fragment,{children:[(0,it._V)(t)&&!(0,it.jN)(t)&&(0,c.jsx)(w4.B,{}),!o&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($e.z,{variant:"primary",onClick:s,disabled:(0,it.kx)(t)||i,full:!0,children:u()}),(0,c.jsx)("p",{className:"stream-info-box__message",children:l()})]})]})},u8=function(e){var t=e.room,r=e.joinAsHost,n=e.joinAsParticipant,i=(0,nt.h5)(r),o=i.addonPurchaseNotAllowed,s=i.isLoadingUsage,l=i.onClickHandler,u=i.boxMessage,d=i.liveButtonLabel,f=(0,G.R)().liveMobileWebRTCEnabled,m=(0,B3.P4)()&&!f;return(0,c.jsxs)(c.Fragment,{children:[(0,it._V)(t)&&!(0,it.jN)(t)&&(0,c.jsx)(w4.B,{}),s&&(0,it.$e)(t)&&(0,c.jsx)(gd.a,{}),!s&&(0,it.$e)(t)&&!m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($e.z,{variant:"primary",onClick:l,full:!0,disabled:(0,it.kx)(t)||o,children:d()}),(0,c.jsx)("p",{className:"stream-info-box__message",children:u()})]}),!(0,it.$e)(t)&&(0,c.jsxs)(c.Fragment,{children:[(0,it.HN)(t)&&!m&&(0,c.jsx)($e.z,{variant:"primary",onClick:r,disabled:(0,it.kx)(t),full:!0,children:(0,a.t)("live_streams.pre_join.host_button_label")}),(0,it.HN)(t)&&(0,it.Zo)(t)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($e.z,{variant:(0,it.Zo)(t)?"plain":"primary",onClick:n,disabled:(0,it.If)(t),children:(0,a.t)("live_streams.pre_join.participant_button_label")}),(0,it.If)(t)&&(0,c.jsx)("div",{className:"stream-info-box__message",children:(0,a.t)("live_streams.pre_join.spectator_capacity_reached_message")})]}),!(0,it.HN)(t)&&(0,it.Zo)(t)&&!m&&(0,c.jsx)($e.z,{variant:"primary",onClick:r,disabled:(0,it.kx)(t),full:!0,children:(0,a.t)("live_streams.pre_join.cohost_button_label")}),(0,it.ee)(t)&&(0,it.kx)(t)&&(0,it.Zo)(t)&&(0,c.jsx)("div",{className:"stream-info-box__message",children:(0,a.t)("live_streams.pre_join.stream.host_capacity_reached_message")}),!(0,it.HN)(t)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($e.z,{variant:(0,it.Zo)(t)?"plain":"primary",onClick:n,disabled:(0,it.If)(t),children:(0,a.t)("live_streams.pre_join.participant_button_label")}),(0,it.If)(t)&&(0,c.jsx)("div",{className:"stream-info-box__message",children:(0,a.t)("live_streams.pre_join.spectator_capacity_reached_message")})]})]})]})},d8=r(37933),f8=function(){var e=(0,v.wh)(),t=e.currentCommunity,r=e.isLoading,n=(0,d8.C)().goToCommunityRootPath;return r?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"stream-info-box__message",children:(0,a.t)("live_streams.pre_join.public_error_message",{community_name:null===t||void 0===t?void 0:t.name})}),(0,c.jsx)($e.z,{variant:"link",onClick:n,children:(0,a.t)("live_streams.pre_join.back_to_community_button_label")})]})},m8=function(){var e,t=(0,v.wh)().currentCommunityMember,r=(0,nt.NW)(),n=(r||{}).recording_enabled,i=(0,A3.y4)(),o=i.joinAsHost,s=i.joinAsParticipant;return(0,c.jsxs)("div",{className:"stream-info-box grow",children:[(0,c.jsx)("div",{className:"stream-info-box__title",children:null===r||void 0===r?void 0:r.name}),(0,c.jsxs)("div",{className:"stream-info-box__host-name",children:[(0,a.t)("live_streams.pre_join.hosted_by")," ",null===r||void 0===r||null===(e=r.creator)||void 0===e?void 0:e.name]}),((0,it.fN)(r)||(0,it.Zo)(r))&&(0,c.jsx)(l8,{room:r}),t&&(0,it.SS)(r)&&(0,c.jsx)(c8,{room:r,joinAsHost:o}),t&&(0,it.fN)(r)&&(0,c.jsx)(u8,{room:r,joinAsHost:o,joinAsParticipant:s}),!t&&(0,c.jsx)(f8,{}),n&&(0,c.jsxs)("div",{children:[(0,c.jsx)(bt.JO,{type:"middot",size:6,className:"text-gray-500"}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-gray-500",children:(0,a.t)("live_streams.pre_join.event_is_being_recorded")})]})]})},p8=function(){var e=(0,A3.cy)(),t=e.canHost,r=e.isConferenceRoom,n=(0,E3.I3)(E3.YK),i=(0,nt.PP)(),o=i.videoRef,a=i.hasVideo,s=(0,E3.I3)(E3.IQ);return t||r?(0,c.jsxs)("div",{className:"video-preview grow rounded-none md:rounded-lg",children:[(0,c.jsx)("video",{ref:o,autoPlay:!0,muted:!0,playsInline:!0,className:J()("video-preview__player",{mirror:s})}),(!n||!a)&&(0,c.jsx)(o8,{}),(0,c.jsx)("div",{className:"video-preview__controls",children:(0,c.jsxs)("div",{className:"video-preview__controls__wrapper",children:[(0,c.jsx)(W3,{smallMargin:!0}),(0,c.jsx)(K3,{smallMargin:!0}),(0,c.jsx)(q3,{isHost:!!t,noMargin:!0})]})})]}):null},h8=function(){return(0,c.jsxs)("div",{className:"bg-primary flex h-screen flex-col",children:[(0,c.jsx)(a8,{}),(0,c.jsxs)("div",{className:"mx-4 flex grow flex-col items-center justify-start gap-x-20 md:flex-row md:justify-center",children:[(0,c.jsx)(p8,{}),(0,c.jsx)(m8,{})]})]})},b8=function(e){if(!e||!e.length)return"";var t=e.map((function(e){return e.name}));return t.length>3?function(e){if(!e||!e.length)return"";var t=e.slice(0,3).join(", "),r=e.length-3;return(0,a.t)("live_streams.room.raised_hand_many",{participants:t,hiddenParticipantsCount:r})}(t):function(e){if(!e||!e.length)return"";var t=e.join(", ").replace(/,([^,]*)$/," and$1");return(0,a.t)("live_streams.room.raised_hand_few",{participants:t})}(t)};function y8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v8(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g8=function(){var e=y8((0,n.useState)(null),2),t=e[0],r=e[1],i=(0,e4.RW)().peersWithHandRaised,o=(0,n.useRef)(null);return(0,n.useEffect)((function(){return 0===(null===i||void 0===i?void 0:i.length)?r(null):(clearTimeout(o.current),r(b8(i)),o.current=setTimeout((,1e4)),),[i]),t?(0,c.jsx)("div",{className:"absolute bottom-5 left-5 z-10 w-auto rounded-md bg-gray-800/80 px-3 py-2 text-xs text-gray-100",children:t}):null},x8=r(30588),_8=function(e){var t=e.children;jb(),(0,x8.w)(),(0,Ro.t)(),(0,nt.c9)();var r=(0,A3.NA)(),n=r.status,i=r.data,o=(n||{}).isLoading,a=(i||{}).room;return o||!a?(0,c.jsx)(e8,{}):t},j8=r(28462),w8=r(98174),O8=r(79004),P8=r(37803),S8=function(e){var t=e.hide,r=(0,A3.NA)().data,n=r.currentParticipant,i=r.room,o=r.roles,a=(0,E3.if)().onNewChatMessage;return(0,c.jsx)("div",{className:J()("standard-layout-v2 live-stream-chat",{"live-stream-chat--hide":t}),children:!!n&&(0,c.jsx)(er.S,{renderFunc:O8.$,children:(0,c.jsxs)(P8.G,{isLiveStream:!0,children:[(0,c.jsx)(j8.x,{uuid:i.chat_room_uuid,displayDayChange:!1,displayRoomName:!1,maxRows:1,onNewChatMessage:a,isLiveStream:!0,roles:o,messageBodyClassName:"mr-4"}),(0,c.jsx)("div",{id:"rail-bar-header"}),(0,c.jsx)(w8.I,{})]})})})},k8=function(e){var t=e.show,r=e.onClose,n=e.muteAllPeersMicrophone,i=(0,e4.RW)().hosts.length-1;return(0,c.jsx)(Gr.Ww,{title:(0,a.t)("live_streams.room.mute_all.modal_title"),isOpen:t,onAction:function(){n(),r()},onClose:r,actionText:(0,a.t)("confirm"),actionVariant:"danger",size:"sm",children:(0,c.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:(0,a.t)("live_streams.room.mute_all.modal_body",{totalParticipants:i})})})},C8=function(){var e=(0,e4.Wg)(),t=e.areAllPeersMuted,r=e.muteAllPeersMicrophone,n=(0,E3.if)(),i=n.isMuteParticipantsModalOpen,o=n.displayMuteParticipantsModal,s=n.hideMuteParticipantsModal;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($e.z,{variant:"secondary-light",disabled:t,onClick:o,className:"!border-primary !py-2 !pl-2.5 !pr-3",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(bt.JO,{type:t?"16-microphone-muted":"16-microphone",size:16,className:"mr-2"}),(0,c.jsx)(l.ZT.LabelXs,{weight:"medium",children:t?(0,a.t)("live_streams.room.mute_all.all_muted"):(0,a.t)("live_streams.room.mute_all.header")})]})}),(0,c.jsx)(k8,{show:i,onClose:s,muteAllPeersMicrophone:r})]})},N8=function(e){var t=e.title,r=e.onClick,n=e.isChat,i=e.isHost,o=(0,e4.RW)().hosts,s=(0,A3.cy)().room.can_manage,l=o.length>1,u=!n&&l&&i&&s;return(0,c.jsxs)("div",{className:"border-primary flex h-16 items-center justify-between border-b px-6 py-3",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:t}),(0,c.jsxs)("div",{className:"flex space-x-3",children:[u&&(0,c.jsx)(C8,{}),(0,c.jsx)("button",{type:"button",onClick:r,"aria-label":(0,a.t)("live_streams.room.close_sidebar_button_aria_label"),children:(0,c.jsx)(bt.JO,{type:"20-close-md",className:"text-dark"})})]})]})},T8=r(75333),A8=function(e){var t=e.title;return(0,c.jsx)("div",{className:"mx-3 px-3 py-2",children:(0,c.jsx)(y.Z.LabelXs,{weight:"semibold",color:"text-default",textTransform:"uppercase",children:t})})},E8=function(e){var t=e.guest.name;return(0,c.jsxs)("div",{className:"mx-3 flex items-center justify-start rounded-md px-3 py-2",children:[(0,c.jsx)("div",{className:"relative mr-4 h-10 w-10",children:(0,c.jsx)(St,{name:t,size:"sm"})}),(0,c.jsx)("div",{className:"text-darkest mr-2 truncate font-medium",children:t})]})},I8=r(94778),D8=function(e){var t=e.setIsLimitReached,r=e.cohostsIds,i=void 0===r?[]:r,o=e.removeCohost,s=(0,pr.qo)({name:"cohosts_community_member_ids"}),l=(null===s||void 0===s?void 0:s.length)+1||1,u=(0,nt.NW)(),d=null===u||void 0===u?void 0:u.host_capacity,f=l>=d;return(0,n.useEffect)((function(){d&&t(!(l<=d))}),[l,d]),(0,n.useEffect)((function(){s&&null!==i&&void 0!==i&&i.length&&i.filter(().forEach((function(e){return o(e)}))}),[s]),(0,c.jsx)("div",{className:"mb-4 text-center",children:(0,c.jsx)("div",{children:(0,c.jsx)(y.Z.LabelSm,{weight:f?"medium":"normal",children:(0,a.t)("live_streams.room.cohosts_counter_message",{count:Math.min(l,d),hostCapacity:d})})})})};function L8(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function M8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R8(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F8=function(e){var t=e.onSubmit,r=e.isLoading,i=e.defaultValues,o=void 0===i?{}:i,s=e.cohostsIds,u=e.removeCohost,d=M8((0,n.useState)(!1),2),f=d[0],m=d[1],p=function(){var e,r=(e=se().mark((function e(r,n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r&&void 0!==r&&r.cohosts_community_member_ids&&r.cohosts_community_member_ids.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t(r,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){L8(o,n,i,a,s,"next",e)}function s(e){L8(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();return(0,c.jsx)(l.l0,{onSubmit:p,defaultValues:o,children:function(e){var t=e.formState.isSubmitting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ie.u_.Body,{className:"!overflow-visible",children:(0,c.jsx)(l.l0.Item,{name:"cohosts_community_member_ids",translationRoot:"live_streams.room",hideLabel:!0,hideBorder:!0,fullWidth:!0,hideDescription:!0,children:(0,c.jsx)(I8.lH,{variant:I8.ZC.SIMPLE,selectionLabel:(0,a.t)("live_streams.form.cohosts_selection_label"),searchPlaceholder:(0,a.t)("live_streams.form.cohosts_placeholder")})})}),(0,c.jsxs)(ie.u_.Footer,{children:[(0,c.jsx)(D8,{setIsLimitReached:m,cohostsIds:s,removeCohost:u,shouldDisplayDisabledSearchMessage:f}),(0,c.jsx)(l.zx,{type:"submit",variant:"primary",disabled:t||r||f,full:!0,large:!0,children:(0,a.t)("live_streams.room.invite")})]})]})}})},B8=function(e){var t=e.show,r=e.onClose,n=(0,nt.eR)(r),i=n.cohosts,o=n.isLoadingCohosts,s=n.addCohosts,l=n.isAddingCohosts,u=n.removeCohost,d=(null===i||void 0===i?void 0:i.map((function(e){return e.id})))||[],f={cohosts_community_member_ids:d};return(0,c.jsxs)(ie.u_,{title:(0,a.t)("live_streams.room.add_cohosts"),isOpen:t,onClose:r,children:[(0,c.jsx)(ie.u_.Overlay,{}),(0,c.jsxs)(ie.u_.Content,{className:"!overflow-visible",children:[(0,c.jsxs)(ie.u_.Header,{children:[(0,c.jsx)(ie.u_.Title,{className:"text-center",size:"md",children:(0,a.t)("live_streams.room.add_cohosts")}),(0,c.jsx)(ie.u_.HeaderActions,{children:(0,c.jsx)(ie.u_.CloseButton,{onClick:r})})]}),!o&&(0,c.jsx)(F8,{onSubmit:s,isLoading:l,defaultValues:f,cohostsIds:d,removeCohost:u})]})]})},U8=function(){var e=(0,E3.if)(),t=e.isCohostsModalOpen,r=e.displayCohostsModal,n=e.hideCohostsModal;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{type:"submit",className:"mx-3 mb-3 flex items-center justify-start px-3",onClick:r,"aria-label":(0,a.t)("live_streams.room.invite_cohosts"),children:[(0,c.jsx)("div",{className:"text-darkest bg-secondary relative mr-4 flex h-10 w-10 items-center justify-center rounded-lg",children:(0,c.jsx)(bt.JO,{type:"add-participants",viewBox:"0 0 20 18"})}),(0,c.jsx)("div",{className:"text-darkest font-medium",children:(0,a.t)("live_streams.room.invite_cohosts")})]}),(0,c.jsx)(B8,{show:t,onClose:n})]})},z8=r(65830),V8=r(29700),Z8=function(e){var t=(0,V8.a)(e),r=t.isCurrentParticipant,n=t.isHost,i=t.isCohost,o=t.inviteToCohost,a=(0,A3.cy)(),s=a.room.can_manage,l=a.room,c=(0,T8.j)().isCurrentParticipantModerator,u=s||c,d=i&&(0,it.ee)(l)&&r,f=!n&&(u||d),m=(0,z8.e)().canInviteMoreHosts,p=(0,E3.if)().displayCohostsModal;return{isParticipantMenuVisible:f,isStream:(0,it.ee)(l),isCurrentParticipantHostOrModerator:u,handleInviteToCohost:function(){m?o():p()},isMainHost:s}},H8=function(e){var t=e.peer,r=e.isMicrophoneEnabled,n=e.muteMicrophone,i=e.customButton,o=(0,nt.aV)(t),s=o.isCurrentParticipant,l=o.isHandRaised,u=o.isCohost,d=o.isModerator,f=o.removeAsCohost,m=o.lowerHand,p=o.removeParticipant,h=o.removeAsModerator,b=o.inviteToModerator,y=(0,nS.en)(),v=Z8(t),g=v.isStream,x=v.isCurrentParticipantHostOrModerator,_=v.handleInviteToCohost,j=u&&!s&&r,w=[],O=u?{key:"remove-as-cohost",label:(0,a.t)("live_streams.room.remove_as_cohost"),onClick:f}:{key:"invite-to-cohost",label:(0,a.t)("live_streams.room.invite_to_cohost"),onClick:_},P=d?{key:"remove-as-moderator",label:(0,a.t)("live_streams.room.remove_as_moderator"),onClick:h}:{key:"invite-to-moderator",label:(0,a.t)("live_streams.room.invite_to_moderator"),onClick:b};return g&&w.push(O),x&&w.push(P),j&&w.push({key:"toggle-microphone",label:(0,a.t)("live_streams.room.mute"),onClick:n}),l&&!s&&w.push({key:"lower-hand",label:(0,a.t)("live_streams.room.lower_hand"),onClick:m}),s||w.push({key:"remove-participant",label:(0,a.t)("live_streams.room.remove_participant"),onClick:p}),w.length?(0,c.jsx)(c.Fragment,{children:i?(0,c.jsx)(Da.Lt,{options:w,direction:"bottom-start",button:i,isDark:!0}):(0,c.jsx)("div",{className:J()({"inline-block":!y,"hidden group-hover:inline-block":y}),children:(0,c.jsx)(Da.Lt,{menuButtonEl:"div",options:w,direction:"bottom-start",button:(0,c.jsx)(HO.h,{name:"20-menu-dots-vertical",iconSize:20,ariaLabel:(0,a.t)("live_streams.particpant_options")})})})}):null},q8=function(e){var t=e.peer,r=(0,nt.aV)(t),n=function(e){var t=e.isHost,r=e.isCohost,n=e.isModerator;return t?it.iD.HOST:n?it.iD.MODERATOR:r?it.iD.COHOST:void 0}({isHost:r.isHost,isCohost:r.isCohost,isModerator:r.isModerator});return n?(0,c.jsx)(yt.Y,{placement:"top",content:(0,a.t)("live_roles.".concat(n)),children:(0,c.jsx)(bt.JO,{type:n,size:16,className:"-mt-1 ml-1"})}):null},G8=function(e){var t=e.peer,r=e.isCurrentParticipantMainHost,n=e.isCurrentParticipantModerator,i=(0,nt.aV)(t),o=i.name,s=i.avatarUrl,l=i.isCurrentParticipant,u=i.isHandRaised,d=i.isHost,f=i.isCohost,m=i.isModerator,p=i.participant,h=(0,nt.NW)(),b=(0,e4.WB)(t),y=b.audioEnabled,v=b.muteMicrophone,g=(0,bC.O)({public_uid:null===p||void 0===p?void 0:p.public_uid,params:{show_back_link:!0,shouldOpenInNewTab:!0}}).onClick,x=r||n,_=f&&(0,it.ee)(h)&&l,j=!d&&(x||_),w=return(0,c.jsxs)("div",{className:J()("group mx-3 flex items-center justify-start rounded-md px-3 py-2",{"hover:bg-tertiary focus-visible:bg-tertiary":j}),children:[(0,c.jsx)("button",{type:"button",className:"relative mr-4 h-10 w-10 self-start",onClick:w,children:(0,c.jsx)(St,{name:o,src:s,size:"sm"})}),(0,c.jsxs)("button",{type:"button",className:"text-darkest mr-2 cursor-pointer truncate font-medium",title:o,onClick:w,children:[o,((0,it.ee)(h)||m||d)&&(0,c.jsx)(q8,{peer:t})]}),(0,c.jsx)("div",{className:"grow text-xl",children:u&&(0,a.t)("live_streams.room.raise_hand_emoji")}),j&&(0,c.jsx)(H8,{peer:t,isMicrophoneEnabled:y,muteMicrophone:v})]})},W8=Object.freeze({PARTICIPANT:"participant",GUEST:"guest"}),Q8=function(e){var t=e.isHost,r=(0,A3.cy)(),i=r.room.can_manage,o=r.room,s=(0,n4.C)(),l=s.peers,u=s.moderators,d=s.cohosts,f=s.spectators,m=(0,T8.j)().isCurrentParticipantModerator,p=(0,nt.Nc)().guests,h=[{group:u,title:(0,a.t)("live_roles.moderators"),type:W8.PARTICIPANT},{group:d,title:(0,it.ee)(o)?(0,a.t)("live_roles.cohosts"):(0,a.t)("live_roles.participants"),type:W8.PARTICIPANT},{group:f,title:(0,a.t)("live_roles.participants"),type:W8.PARTICIPANT},{group:p,title:(0,a.t)("live_roles.guests"),type:W8.GUEST}];if(!l)return null;var b=t&&i;return(0,c.jsxs)("div",{className:"mt-5 flex grow flex-col items-stretch justify-start overflow-auto",children:[b&&(0,it.ee)(o)&&(0,c.jsx)(U8,{}),h.map((function(e,t){var r=e.group,i=e.title,o=e.type;return(0,fn.isEmpty)(r)?null:(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(A8,{title:i}),o===W8.PARTICIPANT&&r.filter(().map((function(e){return(0,c.jsx)(G8,{peer:e,isCurrentParticipantMainHost:b,isCurrentParticipantModerator:m},e.id)})),o===W8.GUEST&&r.map((function(e){return(0,c.jsx)(E8,{guest:e},e.id)}))]},t)}))]})},K8=function(e){var t=e.isOpen,r=e.isHost,n=(0,E3.if)(),i=n.isChatSelected,o=n.isParticipantsSelected,s=n.hideSidebar;return(0,c.jsxs)("div",{className:J()("border-primary bg-primary flex w-96 shrink-0 flex-col items-stretch border-l",{hidden:!t}),children:[(0,c.jsx)(N8,{title:(0,a.t)(i?"live_streams.room.chat":"live_streams.room.participants"),onClick:s,isHost:r,isChat:i}),(0,c.jsx)(S8,{hide:!i}),o&&(0,c.jsx)(Q8,{isHost:r})]})};function J8(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function $8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y8(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var X8=function(){var e=$8((0,n.useState)(!1),2),t=e[0],r=e[1],i=(0,e4.$I)(),o=i.isAudioBlocked,s=i.unblockAudio,l=function(){var e,t=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(),r(!0);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){J8(o,n,i,a,s,"next",e)}function s(e){J8(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return t||!o?null:(0,c.jsxs)("div",{className:"fixed bottom-0 left-0 z-50 flex h-3/6 w-full flex-col items-center justify-center gap-4 rounded-t-md bg-black/95 text-center",children:[(0,c.jsx)(y.Z.TitleSm,{color:"text-light",children:(0,a.t)("live_streams.room.unblock_audio_explanation")}),(0,c.jsx)($e.z,{onClick:l,children:(0,a.t)("live_streams.room.unblock_audio")})]})},e5=r(85783),t5=r(16025),r5=function(e){var t=e.children,r=(0,nt.NW)();return(0,it.mP)(r)?(0,c.jsx)(t5.B,{children:t}):(0,c.jsx)(e5.dx,{children:t})},n5=r(93083),i5=r.n(n5),o5=function(e){var t=e.peer,r=(0,e4.fx)(t).peerDownlinkQuality,n="";return n=r>=4?"text-[#22c55e]":r>=2?"text-[#fde047]":r>=0?"text-[#dc2626]":"text-[#22c55e]",(0,c.jsx)("div",{className:"pr-1 text-[10px] ".concat(n),children:(0,a.t)("signal_indicator")})},a5=function(e){var t=e.name,r=e.size,n=void 0===r?"lg":r,i=e.tilesCount,o=void 0===i?1:i,s=e.peer,l=e.gridMode,u=void 0!==l&&l;return(0,c.jsx)("div",{className:J()("speaker-badge",{"speaker-badge--sm":"sm"===n,"speaker-badge--md":"md"===n,"speaker-badge--lg":"lg"===n,"bottom-3 left-3":u}),children:(0,c.jsxs)("div",{className:J()("speaker-badge__label",{"text-xxs":u&&o>10,"text-xs":u&&o>4&&o<=10,"text-sm":u&&o<=4}),children:[s&&(0,c.jsx)(o5,{peer:s}),null!==s&&void 0!==s&&s.isLocal?(0,a.t)("you"):t]})})},s5=function(e){var t=e.type,r=void 0===t?"list":t,n=e.avatarSize,i=void 0===n?"sm":n,o=e.peer,s=e.isSpeaking,l=e.displayNameVisible,u=void 0!==l&&l,d=e.recalculateLayout,f=e.tilesCount,m=(0,e4.iF)(o),p=m.videoRef,h=m.hasVideo,b=(0,e4.WB)(o),y=b.audioEnabled,v=b.muteMicrophone,g=(0,nt.aV)(o),x=g.name,_=g.avatarUrl,j=g.isCurrentParticipant,w=g.isHandRaised,O=(0,E3.I3)(E3.IQ),P=Z8(o).isParticipantMenuVisible;return(0,c.jsx)("div",{className:J()("grid-host-tile",{"host-tile--speaker":s,"host-tile--grid-item":"grid"===r}),title:x,children:(0,c.jsxs)("div",{className:"host-tile__container group/item",children:[(0,c.jsx)("video",{ref:p,autoPlay:!0,muted:!0,playsInline:!0,className:J()({mirror:j&&O}),onPlay:),!h&&(0,c.jsx)(St,{name:x,src:_,size:i,variant:"rounded-square",showActionsDropdown:!0}),u&&(0,c.jsx)(a5,{name:x,size:i,tilesCount:f,peer:o,gridMode:!0}),P&&(0,c.jsx)("div",{className:"invisible absolute right-4 top-4 h-6 w-6 cursor-pointer rounded-md border border-[#34373D] bg-[#1F2123] group-hover/item:visible",children:(0,c.jsx)(H8,{peer:o,isMicrophoneEnabled:y,muteMicrophone:v,customButton:(0,c.jsx)(bt.JO,{type:"16-menu-dots-horizontal",className:"mb-[5px] ml-[1px] text-[#D2D7DB]",size:16})})}),w&&(0,c.jsx)("div",{className:"absolute right-6 top-6 z-10 text-xl",children:(0,a.t)("raise_hand_indicator")}),!y&&(0,c.jsx)("div",{className:"absolute bottom-6 right-6 z-10 text-xl",children:(0,c.jsx)(Q3,{muted:!y})})]},o.id)})},l5=function(e){var t=e.iconType,r=e.label,n=e.checked,i=e.onClick;return(0,c.jsxs)("button",{type:"button",className:"view-type-menu-button",onClick:function(e){return i&&i(e)},children:[t&&(0,c.jsx)("div",{className:"view-type-menu-button__icon",children:(0,c.jsx)(bt.JO,{type:t,size:"16"})}),(0,c.jsx)("div",{className:"view-type-menu-button__label",children:r}),n&&(0,c.jsx)("div",{className:"view-type-menu-button__check",children:(0,c.jsx)(bt.JO,{type:"menu-check",size:"12"})})]})},c5=function(){var e=(0,E3.if)(),t=e.isFullscreen,r=e.toggleFullscreen,n=t?"exit-fullscreen":"fullscreen";return(0,c.jsx)(l5,{iconType:n,label:(0,a.t)("live_streams.room.view_type.fullscreen"),onClick:r})},u5=function(){var e=(0,nt.F5)(),t=e.isGridView,r=e.setGridView;return(0,c.jsx)(l5,{iconType:"gallery-view",label:(0,a.t)("live_streams.room.view_type.gallery"),checked:t,onClick:r})};function d5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m5=function(){var e=(0,nt.F5)().isSpeakerView,t=(0,e4.so)().isSomeoneScreenSharing,r=(0,E3.I3)(E3.oe),n=(0,E3.I3)(E3.Sl),i=(0,E3.Ft)(),o=i.setGridLayoutPageSize,s=i.setSpeakerLayoutPageSize,u=e||t?{value:n,min:E3.fm,max:E3.nX,onChange:s,label:(0,a.t)("live_streams.settings.speaker_layout_page_size")}:{value:r,min:E3.CH,max:E3.O_,onChange:o,label:(0,a.t)("live_streams.settings.grid_layout_page_size")},d=u.value,f=u.min,m=u.max,p=u.onChange,h=u.label;return(0,c.jsxs)("button",{type:"button",className:"rounded-md px-3 py-2 text-left hover:bg-gray-800",onClick:function(e){e.stopPropagation()},children:[(0,c.jsx)("div",{className:"mb-3",children:h}),(0,c.jsxs)(l.iR.Root,{value:[d],max:m,min:f,step:1,onValueChange:function(e){var t=d5(e,1)[0];t!==d&&p(t)},className:"cursor-pointer",children:[(0,c.jsx)(l.iR.Track,{children:(0,c.jsx)(l.iR.Range,{className:"!bg-badge"})}),(0,c.jsx)(l.iR.Thumb,{className:"before:!bg-badge"})]})]})},p5=h5=function(){var e=(0,nt.F5)(),t=e.isSpeakerView,r=e.setSpeakerView;return(0,c.jsx)(l5,{iconType:"speaker-view",label:(0,a.t)("live_streams.room.view_type.speaker"),checked:t,onClick:r})};function b5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v5=function(){var e=b5((0,n.useState)(!1),2),t=e[0],r=e[1];return(0,c.jsx)("div",{className:"view-type-menu",children:(0,c.jsxs)("button",{type:"button",className:"view-type-menu__button",onClick:children:[(0,c.jsx)(bt.JO,{type:"speaker-view",size:16,className:"view-type-menu__button__icon"}),(0,a.t)("live_streams.room.view_type.view"),t&&(0,c.jsxs)("div",{className:"view-type-menu__button__dropdown",children:[(0,c.jsx)(u5,{}),(0,c.jsx)(h5,{}),(0,c.jsx)(p5,{}),(0,c.jsx)(m5,{}),(0,c.jsx)(p5,{}),(0,c.jsx)(c5,{})]})]})})},g5=function(e){var t=e.onClick;return(0,c.jsx)("div",{className:"absolute right-0 top-0 z-10 flex h-full w-20 flex-col items-center justify-center opacity-0 transition-all focus-within:opacity-100 group-hover:opacity-100",children:(0,c.jsx)("button",{"aria-label":(0,a.t)("next"),type:"button",className:"rounded-lg bg-gray-800 p-2 text-center leading-5 text-gray-100",onClick:t,children:(0,c.jsx)(bt.JO,{type:"20-chevron-right",size:20})})})},x5=function(e){var t=e.page,r=e.totalPages;if(!r||r<2)return null;for(var n=[],i=1;i<=r;i++)n.push(t===i);return(0,c.jsx)("div",{className:"absolute inset-x-0 bottom-0 z-10 flex h-20 items-center justify-center opacity-0 transition-all group-hover:opacity-100",children:(0,c.jsx)("div",{className:"flex leading-none text-gray-600",children:n.map((function(e,t){return(0,c.jsx)("div",{className:J()("leading-none",{"text-gray-100":e}),children:(0,c.jsx)(bt.JO,{type:"6-ellipse",size:6})},"page-".concat(t))}))})})},_5=function(e){var t=e.onClick;return(0,c.jsx)("div",{className:"absolute left-0 top-0 z-10 flex h-full w-20 flex-col items-center justify-center opacity-0 transition-all focus-within:opacity-100 group-hover:opacity-100",children:(0,c.jsx)("button",{"aria-label":(0,a.t)("previous"),type:"button",className:"rounded-lg bg-gray-800 p-2 text-center leading-5 text-gray-100",onClick:t,children:(0,c.jsx)(bt.JO,{type:"20-chevron-left",size:20})})})};function j5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O5=function(e){var t=e.hosts,r=e.isSpeaking,i=e.isSidebarOpen,o=e.isRecorder,a=(0,n.useRef)(null),s=(0,n.useRef)(null),l=j5((0,n.useState)(null),2),u=l[0],d=l[1],f=(0,nt.NW)(),m=(0,nt.B0)().isLiveRoom,p=null===f||void 0===f?void 0:f.can_manage,h=(0,E3.I3)(E3.oe),b=(0,e4.l9)(t,{pageSize:h}).orderedPeers,y=(0,nt._F)(b,1,h),v=y.currentPagePeers,g=y.page,x=y.totalPages,_=y.next,j=y.prev,w=y.isFirstPage,O=y.isLastPage,P=p||m&&!o;(0,n.useEffect)((function(){if(null!==a&&void 0!==a&&a.current){var e=i5()(a.current,{fixedRatio:!1,maxRatio:9/16,scaleLastRow:!1,bigFixedRatio:!1,bigScaleLastRow:!1});d(e)}}),[a]),(0,n.useEffect)((,[t,u,i,g,h]);var S=function(){s.current=setTimeout((,20)};return(0,n.useEffect)((function(){return window.addEventListener("resize",S),),[u]),(0,c.jsx)("main",{className:"grid-layout",children:(0,c.jsxs)("div",{className:"grid-wrapper group",children:[!o&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(F4,{}),(0,c.jsx)(A4,{}),(0,c.jsx)(J4,{}),!w&&(0,c.jsx)(_5,{onClick:j}),!O&&(0,c.jsx)(g5,{onClick:_}),(0,c.jsx)(x5,{page:g,totalPages:x})]}),(0,c.jsx)("div",{className:"host-grid-container",ref:a,children:v.map((function(e){return(0,c.jsx)("div",{className:J()("host-grid-container__item",{"host-grid-container__item--speaker":r(e.id)}),children:(0,c.jsx)(s5,{peer:e,isSpeaking:r(e.id),type:"grid",displayNameVisible:!0,avatarSize:"lg",recalculateLayout:u,tilesCount:v.length})},e.id)}))}),P?(0,c.jsx)(v5,{}):(0,c.jsx)(E4,{}),(0,c.jsx)(K4,{}),(0,c.jsx)(Y4,{})]})})},P5=function(e){var t=e.type,r=void 0===t?"list":t,n=e.avatarSize,i=void 0===n?"sm":n,o=e.peer,s=e.isSpeaking,l=e.displayNameVisible,u=void 0!==l&&l,d=(0,e4.iF)(o),f=d.videoRef,m=d.hasVideo,p=(0,e4.WB)(o),h=p.audioEnabled,b=p.muteMicrophone,y=(0,nt.aV)(o),v=y.name,g=y.avatarUrl,x=y.isCurrentParticipant,_=y.isHandRaised,j=(0,E3.I3)(E3.IQ),w=Z8(o).isParticipantMenuVisible;return(0,c.jsxs)("div",{className:J()("host-tile",{"host-tile--speaker":s,"host-tile--grid-item":"grid"===r}),title:v,children:[s&&(0,c.jsx)("div",{className:"host-tile__speaker-indicator"}),(0,c.jsxs)("div",{className:"host-tile__container group/item",children:[(0,c.jsx)("video",{ref:f,autoPlay:!0,muted:!0,playsInline:!0,className:J()({mirror:x&&j})}),!m&&(0,c.jsx)(St,{name:v,src:g,size:i,variant:"rounded-square"}),u&&(0,c.jsx)(a5,{name:v,size:i}),w&&(0,c.jsx)("div",{className:"invisible absolute right-2 top-2 h-6 w-6 cursor-pointer rounded-md border border-[#34373D] bg-[#1F2123] group-hover/item:visible",children:(0,c.jsx)(H8,{peer:o,isMicrophoneEnabled:h,muteMicrophone:b,customButton:(0,c.jsx)(bt.JO,{type:"16-menu-dots-horizontal",className:"mb-[5px] ml-[1px] text-[#D2D7DB]",size:16})})}),_&&(0,c.jsx)("div",{className:"absolute right-2 top-2 z-10 text-xl",children:(0,a.t)("raise_hand_indicator")}),!h&&(0,c.jsx)("div",{className:"absolute bottom-2 right-2 z-[5] text-xl",children:(0,c.jsx)(Q3,{muted:!h})})]},o.id)]})},S5=function(){var e=(0,e4.so)().toggleScreenSharing;return(0,c.jsxs)("div",{className:"own-screen-overlay",children:[(0,c.jsxs)("div",{className:"own-screen-overlay__prompt",children:[(0,c.jsx)("span",{className:"own-screen-overlay__prompt__message",children:(0,a.t)("live_streams.room.sharing_screen_message")}),(0,c.jsx)($e.z,{variant:"link",onClick:e,children:(0,a.t)("live_streams.room.stop_sharing_screen_button_label")})]}),(0,c.jsx)("div",{className:"mt-4 text-xs text-white",children:(0,a.t)("live_streams.room.sharing_screen_greyed_out_explanation")})]})},k5=function(){var e=(0,E3.if)().toggleFullscreen,t=(0,e4.Hg)(),r=t.peer,n=t.videoRef,i=t.hasVideo,o=(0,nt.aV)(r),a=o.name,s=o.avatarUrl,l=o.isCurrentParticipant;return(0,c.jsxs)("div",{className:"screen-share",onDoubleClick:e,children:[(0,c.jsx)("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0}),a&&(0,c.jsx)(a5,{name:a}),(0,c.jsx)(Y4,{}),!i&&(0,c.jsx)(St,{name:a,src:s,size:"lg"}),l&&(0,c.jsx)(S5,{})]})},C5=function(e){var t=e.peer,r=(0,E3.if)().toggleFullscreen,n=(0,e4.iF)(t),i=n.videoRef,o=n.hasVideo,a=(0,nt.aV)(t),s=a.name,l=a.avatarUrl,u=a.isCurrentParticipant,d=(0,E3.I3)(E3.IQ);return(0,c.jsxs)("div",{className:"selected-speaker",onDoubleClick:r,children:[(0,c.jsx)("video",{ref:i,autoPlay:!0,muted:!0,playsInline:!0,className:J()({mirror:u&&d})}),s&&(0,c.jsx)(a5,{name:s,peer:t}),(0,c.jsx)(Y4,{}),!o&&(0,c.jsx)(St,{name:s,src:l,size:"lg"})]})},N5=function(e){var t=e.onClick;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"shrink grow"}),(0,c.jsx)("button",{type:"button","aria-label":(0,a.t)("live_streams.view_participants_on_next_page"),className:"focus-visible:!outline-secondary relative mt-2 w-[100px] rounded-lg bg-gray-800 p-2 text-center font-medium leading-5 text-gray-100 transition-colors duration-150 ease-in-out hover:bg-gray-700 focus-visible:outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:t,children:(0,c.jsx)(bt.JO,{type:"20-chevron-down",size:20})})]})},T5=function(e){var t=e.onClick;return(0,c.jsx)("button",{type:"button","aria-label":(0,a.t)("live_streams.view_participants_on_last_page"),className:"focus-visible:!outline-secondary relative my-2 w-[100px] rounded-lg bg-gray-800 p-2 text-center font-medium leading-5 text-gray-100 transition-colors duration-150 ease-in-out hover:bg-gray-700 focus-visible:outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:t,children:(0,c.jsx)(bt.JO,{type:"20-chevron-up",size:20})})},A5=function(e){var t=e.hosts,r=e.selectedSpeaker,n=e.isSomeoneScreenSharing,i=e.isSpeaking,o=e.hideFooter,a=void 0!==o&&o,s=e.isRecorder,l=(0,nt.NW)(),u=(0,nt.B0)().isLiveRoom,d=(0,E3.I3)(E3.Sl),f=null===l||void 0===l?void 0:l.can_manage,m=s?7:d,p=(0,e4.l9)(t,{pageSize:m}).orderedPeers,h=(0,nt._F)(p,1,m),b=h.currentPagePeers,y=h.next,v=h.prev,g=h.isFirstPage,x=h.isLastPage,_=(f||u&&!s)&&!n;return(0,c.jsxs)("main",{className:J()("speaker-layout",{"speaker-layout--no-footer":a}),children:[(0,c.jsxs)("div",{className:"host-list",children:[!s&&!g&&(0,c.jsx)(T5,{onClick:v}),b.map((function(e){return(0,c.jsx)(P5,{peer:e,isSpeaking:i(e.id)},e.id)})),!s&&!x&&(0,c.jsx)(N5,{onClick:y})]}),(0,c.jsx)("div",{className:"pinned-content",children:(0,c.jsxs)("div",{className:"pinned-content__wrapper",children:[!s&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(F4,{}),(0,c.jsx)(A4,{}),(0,c.jsx)(J4,{})]}),r&&!n&&(0,c.jsx)(C5,{peer:r}),n&&(0,c.jsx)(k5,{}),_?(0,c.jsx)(v5,{}):(0,c.jsx)(E4,{}),(0,c.jsx)(K4,{})]})})]})},E5=function(e){var t=e.isSomeoneScreenSharing,r=e.isSidebarOpen,n=void 0!==r&&r,i=(0,nt.F5)(),o=i.isGridView,a=i.isSpeakerView,s=(0,e4.I0)(),l=s.peers,u=s.hosts,d=s.selectedSpeaker,f=s.isSpeaking;return(0,nt.rs)(l),(0,nt.k1)(),(0,c.jsxs)(c.Fragment,{children:[(o||1===(null===u||void 0===u?void 0:u.length))&&!t&&(0,c.jsx)(O5,{hosts:u,isSpeaking:f,isSidebarOpen:n}),(a&&(null===u||void 0===u?void 0:u.length)>1||t)&&(0,c.jsx)(A5,{hosts:u,isSomeoneScreenSharing:t,selectedSpeaker:d,isSpeaking:f})]})},I5=["token"];function D5(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var L5=function(){(0,nt.Xc)(),(0,nt.u7)(),(0,nt.aL)(),(0,nt.bF)(),(0,nt.e4)(),(0,nt.uH)();var e=(0,A3.NA)(),t=e.status,r=e.data,i=e.actions,o=t||{},s=o.isJoining,l=o.streamEnded,u=r||{},d=u.currentParticipant,f=u.room,m=(0,E3.if)(),p=m.isSidebarOpen,h=m.isFullscreen,b=(null===f||void 0===f?void 0:f.name)||(0,a.t)("live_streams.room.default_title"),y=i.leave,v=d||{},g=v.token,x=D5(v,I5),_=(0,e4.tO)(g,{onJoinError:y,participantData:x},l),j=_.isConnected,w=_.isJoining,O=_.isHost,P=_.isHlsSpectator,S=_.isSomeoneScreenSharing,k=(0,e4.uZ)().hlsUrl;(0,e4.tz)(O),(0,nt.nH)(j,d);var C=(0,nt.H9)(h).uiHidden;return(0,n.useEffect)((function(){return C?document.body.classList.add("cursor-none"):document.body.classList.remove("cursor-none"),),[C]),l||(0,it.a_)(d)?(0,c.jsx)(A.S,{title:b,children:(0,c.jsx)(i8,{streamEnded:l})}):s||w?(0,c.jsx)(e8,{}):null!==d&&void 0!==d&&d.token?(0,c.jsx)(A.S,{title:b,bodyClassNames:"overflow-hidden",children:(0,c.jsxs)("div",{className:J()("live-stream-room",{"live-stream-room--fullscreen":h}),children:[(0,c.jsxs)("div",{className:"live-stream-room__main",children:[(0,c.jsxs)("div",{className:J()("live-stream-room__main__layout",{"live-stream-room__main__layout--with-sidebar":p}),children:[P?(0,c.jsx)(X4,{hlsUrl:k}):(0,c.jsx)(E5,{isSomeoneScreenSharing:S,isSidebarOpen:p}),O&&(0,c.jsx)(g8,{})]}),(0,c.jsx)(S4,{hidden:C,isHost:O})]}),(0,c.jsx)(K8,{isOpen:p,isHost:O}),(0,c.jsx)(X8,{})]})}):(0,c.jsx)(A.S,{title:b,children:(0,c.jsx)(h8,{})})},M5=(0,er.P)((function(){return(0,c.jsx)(A3.AO,{children:(0,c.jsx)(_8,{children:(0,c.jsx)(r5,{children:(0,c.jsx)(L5,{})})})})}),Yt.D,{handleNotFoundError:!0}),R5=function(){jb(),(0,x8.w)(),(0,Ro.t)(),(0,nt.ar)();var e=(0,A3.NA)(),t=(0,e4.LP)().recorderToken,r=e.status,n=e.data,i=r||{},o=i.isCreatingRecorder,a=i.streamEnded,s=n||{},l=s.recorder,u=s.room,d=(0,e4.tO)((null===l||void 0===l?void 0:l.token)||t,{onJoinError:participantData:{name:"Recorder"}}),f=d.isJoining,m=d.isSomeoneScreenSharing,p=(0,e4.I0)(),h=p.hosts,b=p.selectedSpeaker,y=p.isSpeaking;return a?null:o||f?(0,c.jsx)(gd.a,{variant:"fullscreen"}):(0,c.jsxs)("div",{className:"live-stream-room-recorder",children:[((0,it.lH)(u)||1===(null===h||void 0===h?void 0:h.length))&&!m&&(0,c.jsx)(O5,{hosts:h,isSpeaking:y,isRecorder:!0}),((0,it.eM)(u)&&(null===h||void 0===h?void 0:h.length)>1||m)&&(0,c.jsx)(A5,{hosts:h,selectedSpeaker:b,isSomeoneScreenSharing:m,isSpeaking:y,hideFooter:!0,isRecorder:!0})]})},F5=function(){return(0,c.jsx)(A3.AO,{children:(0,c.jsx)(_8,{children:(0,c.jsx)(r5,{children:(0,c.jsx)(R5,{})})})})},B5=["onClick","disabled","children"];function U5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U5(Object(r),!0).forEach((function(t){V5(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U5(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z5(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var H5=function(e){var t=e.onClick,r=e.disabled,n=void 0!==r&&r,i=e.children,o=Z5(e,B5);return(0,c.jsx)("button",z5(z5({type:"button",className:"text-light focus-visible:!outline-secondary cursor-pointer focus-visible:outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:disabled:n},o),{},{children:i}))},q5=function(){var e=(0,E3.I3)(E3.YK),t=(0,E3.Ft)().toggleCamera;return(0,c.jsxs)(H5,{onClick:t,"aria-label":(0,a.t)("live_streams.room.button_tooltips.camera_mobile"),children:[e&&(0,c.jsx)(bt.JO,{type:"camera",size:24}),!e&&(0,c.jsx)(bt.JO,{type:"camera-disabled",size:24})]})},G5=function(){var e=(0,E3.if)().toggleChat;return(0,c.jsx)(H5,{onClick:e,"aria-label":(0,a.t)("live_streams.room.button_tooltips.chat"),children:(0,c.jsx)(bt.JO,{type:"24-messages",size:24})})},W5=function(){var e=(0,E3.I3)(E3.wV),t=(0,E3.Ft)().toggleMicrophone;return(0,c.jsxs)(H5,{onClick:t,"aria-label":(0,a.t)("live_streams.room.button_tooltips.microphone_mobile"),children:[e&&(0,c.jsx)(bt.JO,{type:"microphone",size:24}),!e&&(0,c.jsx)(bt.JO,{type:"microphone-muted",size:24})]})},Q5=function(){var e=(0,E3.if)().toggleParticipants;return(0,c.jsx)(H5,{onClick:e,"aria-label":(0,a.t)("live_streams.room.button_tooltips.participants"),children:(0,c.jsx)(bt.JO,{type:"24-members",size:24})})},K5=function(){var e=(0,nt.sv)(),t=e.isHandRaised,r=e.toggleHand;return(0,c.jsxs)(H5,{onClick:r,"aria-label":(0,a.t)("live_streams.room.button_tooltips.raise_hand"),children:[!t&&(0,c.jsx)(bt.JO,{type:"raise-hand",size:24}),t&&(0,c.jsx)(bt.JO,{type:"raise-hand-filled",size:24})]})},J5=function(e){var t=e.isHost;return(0,c.jsxs)("div",{className:"flex w-full shrink-0 items-center justify-around px-5 py-3 text-gray-50",children:[t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(q5,{}),(0,c.jsx)(W5,{})]}),(0,c.jsx)(K5,{}),(0,c.jsx)(Q5,{}),(0,c.jsx)(G5,{})]})},$5=function(){var e=(0,nt.S2)();return(0,c.jsx)(H5,{onClick:e,"aria-label":(0,a.t)("live_streams.room.button_tooltips.leave"),children:(0,c.jsx)(bt.JO,{type:"24-close",size:24})})},Y5=function(){var e=(0,nt.C3)().count;return(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(bt.JO,{type:"16-eye-visible",size:16}),(0,c.jsx)("span",{className:"ml-1 text-sm font-medium",children:e})]})},X5=function(){return(0,c.jsxs)("div",{className:"flex w-full shrink-0 items-center justify-between px-5 py-3 text-gray-50",children:[(0,c.jsx)(Y5,{}),(0,c.jsx)($5,{})]})},e7=function(e){var t=e.hlsUrl,r=(0,e4.RW)().peers;return(0,nt.rs)(r),(0,c.jsx)("div",{className:"relative h-full w-full",children:(0,c.jsx)(R4,{hlsUrl:t})})},t7=function(e){var t=e.title,r=e.isOpen,n=e.onClose,i=e.bodyClassName,o=e.children;return(0,c.jsxs)(BT.x,{isOpen:r,onClose:n,contentPortalId:"live-".concat(null===t||void 0===t?void 0:t.replaceAll(" ","")),children:[(0,c.jsx)(BT.x.Header,{children:(0,c.jsxs)("div",{className:"flex w-full flex-row-reverse items-center justify-between",children:[(0,c.jsx)("button",{type:"button",className:"focus-visible:!outline-secondary focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:n,children:(0,c.jsx)(bt.JO,{type:"24-close",size:24})}),(0,c.jsx)(y.Z.TitleSm,{children:t})]})}),(0,c.jsx)(BT.x.Body,{className:i,children:o})]})},r7=function(){var e=(0,A3.NA)().data,t=e.currentParticipant,r=e.room,n=e.roles,i=(0,E3.if)().onNewChatMessage;return t?(0,c.jsx)("div",{className:"live-stream-chat standard-layout-v2",children:(0,c.jsx)(er.S,{renderFunc:O8.$,children:(0,c.jsxs)(P8.G,{isLiveStream:!0,children:[(0,c.jsx)(j8.x,{uuid:r.chat_room_uuid,displayDayChange:!1,displayRoomName:!1,maxRows:1,onNewChatMessage:i,isLiveStream:!0,roles:n,messageBodyClassName:"mr-4"}),(0,c.jsx)("div",{id:"rail-bar-header"}),(0,c.jsx)(w8.I,{})]})})}):null},n7=function(){var e=(0,E3.if)(),t=e.isSidebarOpen,r=e.isChatSelected,n=e.toggleChat,i=t&&r;return(0,c.jsx)(t7,{title:(0,a.t)("live_streams.room.chat"),isOpen:i,onClose:n,bodyClassName:"!px-0",children:(0,c.jsx)(r7,{})})},i7=function(e){var t=e.isStream,r=e.isHost,n=e.isCohost,i=e.isHandRaised,o=e.isMicrophoneEnabled,s=e.isCurrentParticipant,l=e.inviteToCohost,u=e.removeAsCohost,d=e.lowerHand,f=e.muteMicrophone,m=e.removeParticipant;if(r)return null;var p=[],h=n?{key:"remove-as-cohost",label:(0,a.t)("live_streams.room.remove_as_cohost"),onClick:u}:{key:"invite-to-cohost",label:(0,a.t)("live_streams.room.invite_to_cohost"),onClick:l};return t&&p.push(h),n&&!s&&o&&p.push({key:"toggle-microphone",label:(0,a.t)("live_streams.room.mute"),onClick:f}),i&&!s&&p.push({key:"lower-hand",label:(0,a.t)("live_streams.room.lower_hand"),onClick:d}),s||p.push({key:"remove-participant",label:(0,a.t)("live_streams.room.remove_participant"),onClick:m}),p.length?(0,c.jsx)("div",{className:"mx-2 pt-1.5",children:(0,c.jsx)(vt.t,{menuItems:p,dropdownSide:"left",shouldCloseOnClickItem:!0})}):null},o7=function(e){var t=e.peer,r=e.canManage,n=(0,G.R)().liveMobileWebRTCEnabled,i=(0,nt.aV)(t),o=i.name,s=i.avatarUrl,l=i.isCurrentParticipant,u=i.isHost,d=i.isCohost,f=i.inviteToCohost,m=i.removeAsCohost,p=i.lowerHand,h=i.isHandRaised,b=i.removeParticipant,v=(0,nt.NW)(),g=u?(0,a.t)("live_streams.room.host"):d?(0,a.t)("live_streams.room.cohost"):null,x=(0,nt.eR)().canInviteMoreHosts,_=(0,E3.if)().displayCohostsModal,j=(0,e4.WB)(t),w=j.audioEnabled,O=j.muteMicrophone,P=(0,it.ee)(v)&&g,S=(r||d&&l)&&n;return(0,c.jsxs)("div",{className:"flex w-full items-center justify-between p-2 first:mt-2 last:mb-2",children:[(0,c.jsxs)("div",{className:"relative flex items-center",children:[(0,c.jsx)("div",{className:"relative mr-2 h-10 w-10",children:(0,c.jsx)(St,{name:o,src:s,size:"sm"})}),(0,c.jsx)(y.Z.LabelSm,{children:o}),h&&(0,c.jsx)("div",{className:"ml-1",children:(0,a.t)("raise_hand_indicator")})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[P&&(0,c.jsx)(Bk.C,{children:g}),S&&(0,c.jsx)(i7,{isStream:(0,it.ee)(v),isHost:u,isCohost:d,isHandRaised:h,isMicrophoneEnabled:w,isCurrentParticipant:l,inviteToCohost:removeAsCohost:m,lowerHand:p,muteMicrophone:O,removeParticipant:b})]})]})},a7=function(){var e=(0,A3.cy)().room.can_manage,t=(0,nt.C3)().peers;return(0,c.jsx)(c.Fragment,{children:null===t||void 0===t?void 0:t.map(()})},s7=function(){var e=(0,E3.if)(),t=e.isSidebarOpen,r=e.isParticipantsSelected,n=e.toggleParticipants,i=t&&r;return(0,c.jsx)(t7,{title:(0,a.t)("live_streams.room.participants"),isOpen:i,onClose:n,children:(0,c.jsx)(a7,{})})},l7=function(e){var t=e.name,r=e.participant,n=e.onAccept,i=e.onCancel,o=(0,G.R)().liveMobileWebRTCEnabled;return(0,c.jsxs)("div",{className:"bg-primary absolute inset-x-2 top-2 z-10 rounded-lg p-4",children:[(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsx)("div",{className:"relative mr-4 h-10 w-10 shrink-0",children:(0,c.jsx)(St,{name:t,src:null===r||void 0===r?void 0:r.avatar_url,size:"sm"})}),(0,c.jsx)("div",{children:o?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"truncate text-lg font-semibold text-gray-900",children:t}),(0,c.jsx)(y.Z.BodySm,{color:"text-dark",children:(0,a.t)("live_streams.room.notifications.cohost_invite_message")})]}):(0,c.jsx)(y.Z.BodySm,{color:"text-dark",children:(0,a.t)("live_streams.room.notifications.cohost_invite_message_mobile",{name:t})})})]}),(0,c.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,c.jsx)($e.z,{variant:"primary",onClick:i,small:!0,className:"mr-2",children:(0,a.t)("live_streams.room.notifications.decline")}),o&&(0,c.jsx)($e.z,{variant:"primary",onClick:n,small:!0,className:"ml-2",children:(0,a.t)("live_streams.room.notifications.accept")})]})]})},c7=function(){var e=Q4(),t=e.roleChangeNotificationVisible,r=e.roleChangeRequestedByName,n=e.roleChangeRequestedByParticipant,i=e.acceptRoleChange,o=e.rejectRoleChange;return(0,c.jsx)(c.Fragment,{children:t&&(0,c.jsx)(l7,{name:r,participant:n,onAccept:i,onCancel:o})})},u7=(I().shape({id:I().any.isRequired,customerUserId:I().number.isRequired,roleName:I().string.isRequired}),function(e){var t=e.className;return(0,c.jsx)("div",{className:J()("absolute right-1 top-1 z-10 text-xl",t),children:(0,a.t)("raise_hand_indicator")})}),d7=function(e){var t=e.name;return t?(0,c.jsx)("div",{className:"absolute bottom-1 left-1 z-10 max-w-[60%] rounded-md px-2",style:{background:"rgba(0, 0, 0, 0.25)",backdropFilter:"blur(8px)"},children:(0,c.jsx)(_V.Y,{children:(0,c.jsx)(y.Z.LabelSm,{color:"text-gray-100",weight:"medium",children:t})})}):null},f7=function(e){var t=e.peer,r=e.isSpeaking,n=(0,e4.iF)(t),i=n.videoRef,o=n.hasVideo,a=(0,nt.aV)(t),s=a.name,l=a.avatarUrl,u=a.isHandRaised;return(0,c.jsx)("div",{className:J()("relative w-full overflow-hidden rounded-md border-4 border-transparent",{"border-brand":r}),style:{paddingBottom:"calc(100% - 8px)"},children:(0,c.jsxs)("div",{className:J()("absolute h-full w-full overflow-hidden bg-gray-800",{"rounded-md":!r}),children:[(0,c.jsx)("video",{className:J()("absolute h-full w-full object-cover",{hidden:!o}),ref:i,autoPlay:!0,muted:!0,playsInline:!0}),!o&&(0,c.jsx)(St,{name:s,src:l,size:"sm",variant:"rounded-square"}),(0,c.jsx)(d7,{name:s}),u&&(0,c.jsx)(u7,{})]})})},m7=function(e){var t=e.hosts,r=e.isSpeaking;return(0,c.jsx)("div",{className:"grid grid-cols-2 gap-1 px-5",children:null===t||void 0===t?void 0:t.map((function(e){return(0,c.jsx)(f7,{peer:e,isSpeaking:r(e.id)},e.id)}))})},p7=function(){var e=(0,e4.Hg)(),t=e.peer,r=e.videoRef,n=e.hasVideo,i=(0,nt.aV)(t),o=i.name,a=i.avatarUrl;return(0,c.jsxs)("div",{className:"absolute h-full w-full overflow-hidden bg-gray-800",children:[(0,c.jsx)("video",{className:J()("absolute h-full w-full object-contain",{hidden:!n}),ref:r,autoPlay:!0,muted:!0,playsInline:!0}),!n&&(0,c.jsx)(St,{name:o,src:a,size:"md",variant:"rounded-square"}),(0,c.jsx)(d7,{name:o})]})},h7=function(e){var t=e.peer,r=(0,e4.iF)(t),n=r.videoRef,i=r.hasVideo,o=(0,nt.aV)(t),a=o.name,s=o.avatarUrl,l=o.isHandRaised;return(0,c.jsxs)("div",{className:"absolute h-full w-full overflow-hidden bg-gray-800",children:[(0,c.jsx)("video",{className:J()("absolute h-full w-full object-cover",{hidden:!i}),ref:n,autoPlay:!0,muted:!0,playsInline:!0}),!i&&(0,c.jsx)(St,{name:a,src:s,size:"md",variant:"rounded-square"}),(0,c.jsx)(d7,{name:a}),l&&(0,c.jsx)(u7,{})]})},b7=function(e){var t=e.selectedSpeaker;return e.isSomeoneScreenSharing?(0,c.jsx)(p7,{}):(0,c.jsx)(h7,{peer:t})},y7=r(45338);function v7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x7=Object.freeze({SPEAKER:"speaker",GRID:"grid"}),_7=Object.values(x7);function j7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j7(Object(r),!0).forEach((function(t){O7(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j7(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P7=function(e){var t=e.isSomeoneScreenSharing,r=function(){var e=v7((0,n.useState)(x7.SPEAKER),2),t=e[0],r=e[1],i=(0,y7.QS)({onSwipedRight:function(){return r(x7.SPEAKER)},onSwipedLeft:function(){return r(x7.GRID)}}),o=_7.length;return{currentView:t,swipeableHandlers:i,page:(_7.indexOf(t)||0)+1,totalPages:o}}(),i=r.currentView,o=r.swipeableHandlers,a=r.page,s=r.totalPages,l=(0,e4.I0)(),u=l.peers,d=l.hosts,f=l.selectedSpeaker,m=l.isSpeaking;return(0,nt.rs)(u),(0,c.jsxs)("div",w7(w7({className:"group h-full w-full overflow-auto"},o),{},{children:[i===x7.SPEAKER&&(0,c.jsx)(b7,{selectedSpeaker:f,isSomeoneScreenSharing:t}),i===x7.GRID&&(0,c.jsx)(m7,{hosts:d,isSpeaking:m}),(0,c.jsx)(x5,{page:a,totalPages:s})]}))},S7=["token"];function k7(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var C7=function(){(0,nt.Xc)(),(0,nt.u7)(),(0,nt.uH)();var e=(0,A3.NA)(),t=e.status,r=e.data,n=e.actions,i=t||{},o=i.isJoining,s=i.streamEnded,l=r||{},u=l.currentParticipant,d=l.room,f=(null===d||void 0===d?void 0:d.name)||(0,a.t)("live_streams.room.default_title"),m=n.leave,p=u||{},h=p.token,b=k7(p,S7),y=(0,e4.tO)(h,{onJoinError:m,participantData:b},s),v=y.isConnected,g=y.isJoining,x=y.isHost,_=y.isHlsSpectator,j=y.isSomeoneScreenSharing,w=(0,e4.uZ)().hlsUrl;return(0,e4.tz)(x),(0,nt.nH)(v,u),Q4(),s||(0,it.a_)(u)?(0,c.jsx)(A.S,{title:f,children:(0,c.jsx)(i8,{streamEnded:s})}):o||g?(0,c.jsx)(gd.a,{variant:"fullscreen"}):null!==u&&void 0!==u&&u.token?(0,c.jsxs)("div",{className:"h-screen-dynamic relative flex w-screen select-none flex-col bg-gray-900",children:[(0,c.jsx)(X5,{}),(0,c.jsx)("div",{className:"relative grow",children:(0,c.jsx)("div",{className:"absolute inset-0 overflow-auto",children:_?(0,c.jsx)(e7,{hlsUrl:w}):(0,c.jsx)(P7,{isSomeoneScreenSharing:j})})}),(0,c.jsx)(J5,{isHost:x}),(0,c.jsx)(s7,{}),(0,c.jsx)(n7,{}),(0,c.jsx)(c7,{}),(0,c.jsx)(X8,{})]}):(0,c.jsx)(A.S,{title:f,children:(0,c.jsx)(h8,{})})},N7=function(){return(0,c.jsx)(A3.AO,{children:(0,c.jsx)(_8,{children:(0,c.jsx)(r5,{children:(0,c.jsx)(C7,{})})})})},T7=function(){jb(),(0,x8.w)();return(0,c.jsxs)("div",{className:"live-streams-not-supported",children:[(0,c.jsx)("div",{className:"live-streams-not-supported__icon",children:(0,a.t)("live_streams.not_supported.icon")}),(0,c.jsx)("div",{className:"live-streams-not-supported__title",children:(0,a.t)("live_streams.not_supported.title")}),(0,c.jsx)("div",{className:"live-streams-not-supported__message",children:(0,B3.qx)()?(0,a.t)("live_streams.not_supported.message_iphone"):(0,a.t)("live_streams.not_supported.message")}),(0,B3.qx)()&&(0,c.jsx)("div",{children:(0,c.jsx)($e.z,{variant:"primary",onClick:children:(0,a.t)("live_streams.not_supported.app_store_button_label")})})]})},A7=(r(37969),r(46520),r(48794)),E7=r(13553),I7=r(128),D7=function(e){var t=e.spaceGroup,r=(0,dr.k6)(),n=(0,Fo.a)().is_v2_1_header_enabled,i={space_groups:t.slug},o=(0,A7.g)(i),s=o.members,u=o.isLoading,d=o.canSeeMembersDirectory,f=function(e){var t=e.spaceGroup;return{spaceModal:(0,AI.G)(),canManage:(0,e0.wh)({spaceGroup:t})}}({spaceGroup:t}),m=f.spaceModal,p=f.canManage,h=t.hide_members_count;return(0,c.jsxs)("div",{className:"hidden items-center gap-5 lg:flex",children:[!h&&(0,c.jsx)(c.Fragment,{children:u?(0,c.jsx)(l.aN,{}):(0,c.jsx)(sO.T,{content:(0,a.t)("see_all_members"),disabled:!d,children:(0,c.jsx)("button",{type:"button",disabled:!d,onClick:children:(0,c.jsx)(I7.n,{members:s||[],amountToShow:3,totalCount:t.active_members_count})})})}),p&&(0,c.jsx)($e.z,{onClick:function(){return m.show({spaceGroupId:t.id,isEdit:!1})},children:(0,a.t)("add_space")}),!n&&(0,c.jsx)(E7.G,{})]})},L7=r(56750),M7=r(41762),R7=r(54032);function F7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U7=function(e){var t=e.spaceGroup,r=(0,e0.wh)({spaceGroup:t}),n=F7((0,fr.k)(!1),2),i=n[0],o=n[1],s=F7((0,fr.k)(!1),2),l=s[0],u=s[1],d=(0,AI.G)(),f=(0,M7.a)();return r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(R7.x,{spaceGroupId:t.id,show:i,onClose:o}),(0,c.jsx)(L7.O,{isOpen:l,onClose:u,spaceGroupId:t.id}),(0,c.jsxs)(Da.Lt,{direction:"bottom-start",button:(0,c.jsxs)(Da.Lt.MenuButton,{children:[(0,c.jsx)(F.y,{truncate:!0,children:t.name}),(0,c.jsx)(bt.JO,{size:16,type:"caret-down-bold",className:"text-dark transition-all duration-100 group-hover:mt-1"})]}),children:[(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:children:(0,a.t)("space_groups.edit_space_group")}),(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:children:(0,a.t)("add_space")}),(0,c.jsx)(Da.Lt.ItemWithLink,{onClick:u,children:(0,a.t)("space_groups.add_members")}),(0,c.jsx)(Da.Lt.Separator,{}),(0,c.jsx)(Da.Lt.ItemWithLink,{hasDanger:!0,onClick:o,children:(0,a.t)("space_groups.delete_space_group")})]})]}):(0,c.jsx)(F.y,{truncate:!0,children:t.name})},z7=r(87360),V7=r.n(z7),Z7=r(61892),H7=r(87710),q7=r(2194);function G7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q7(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var K7=function(e){var t=e.space,r=t.id,n=t.emoji,i=t.custom_emoji_url,o=t.custom_emoji_dark_url,s=t.name,u=t.hide_members_count,d=t.slug,f=t.is_space_member,m=t.is_private,p=t.locked_button_url,h=t.locked_button_label,b=t.show_lock_icon_for_non_members,y=(0,lr.TC)().currentAppearance,g=(0,v.wh)(),x=g.currentCommunityMember,_=g.currentUser,j=g.isViewOnlyMasquerading,w=(0,v.e2)().actions.refresh,O=(0,v.nT)().actions.refresh,P=(0,Ho.vb)(x),k=(0,H7.I)({spaceId:r,enabled:!u}),C=k.count,N=k.isLoading,T=k.refetch,A=(0,q7.$)({shouldShowLockIconForNonMembers:b&&!f,isPrivate:m,isAdmin:P}),E=function(){var e,t=(e=se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return",window.location.href=(0,S.j)());case 2:return e.next=4,(0,Er.t5)(S.av.spaceMembers.joinSpace({spaceId:r}),{method:"POST"});case 4:w(),O(),T();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Q7(o,n,i,a,s,"next",e)}function s(e){Q7(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,c.jsx)("div",{className:"space-card",children:(0,c.jsxs)("div",{className:"space-card__inside flex h-full flex-col justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)(sn.rU,{to:S.RZ.show({spaceSlug:d}),className:"space-card__name",children:[(0,c.jsx)("div",{className:"space-card__icon",children:(0,c.jsx)(wy.S,{className:"title-emoji mx-auto !h-10 !max-h-10 !w-10",emoji:n,appearance:y,customEmojiUrl:i,customEmojiDarkUrl:o,shouldUseLockIcon:A,lockIcon:(0,c.jsx)(bt.JO,{type:"lock"})})}),(0,c.jsx)("div",{className:"space-card__title truncate",children:(0,c.jsx)("span",{className:"title-name",children:s})})]}),!u&&(N?(0,c.jsx)(l.aN,{}):(0,c.jsxs)("div",{className:"space-card__members",children:[C," ",1===C?(0,a.t)("member"):(0,a.t)("members")]}))]}),(0,c.jsx)("div",{children:(0,c.jsx)(J7,{currentUser:_,isSpaceMember:f,isPrivate:m,isAdmin:P,lockedButtonLabel:h,lockedButtonURL:p,joinSpace:E,spaceAccessViaPaywall:(0,jk.D)(t),space:t,isViewOnlyMasquerading:j})})]})})},J7=function(e){var t=e.currentUser,r=e.isSpaceMember,n=e.isPrivate,i=e.isAdmin,o=e.lockedButtonLabel,a=e.lockedButtonURL,u=e.joinSpace,d=e.spaceAccessViaPaywall,f=e.space,m=e.isViewOnlyMasquerading,p=G7((0,fr.k)(!1),2),h=p[0],b=p[1];return t?r&&!d?(0,c.jsxs)("div",{className:"space-card__actions",children:[(0,c.jsx)(Z7.k,{show:h,onClose:b,space:f}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:m?fn.noop:b,children:s().t("leave_this_space")})]}):!d&&!n||i?(0,c.jsx)("div",{className:"space-card__actions",children:(0,c.jsx)(l.zx,{variant:"primary",onClick:m?fn.noop:u,className:J()({"cursor-not-allowed":m}),children:s().t("join_space")})}):null:n?o&&a?(0,c.jsx)("a",{className:"btn btn-secondary",href:a,children:o}):null:(0,c.jsx)(l.zx,{variant:"primary",onClick:u,children:s().t("join_space")})},$7=function(e){var t=e.spaceGroup,r=(0,AI.G)(),n=(0,v.wh)().isLoading,i=(0,dX.D)(),o=(0,rl.t)(),s=o.sort,u=o.search,d=t.spaces;return u&&(d=V7().go(u,d,{keys:["name"]}).map((function(e){return e.obj}))),null!==s&&void 0!==s&&s.length&&(d=(0,jk.E2)({spaces:d,sort:s})),n||i?null:0===d.length?(0,c.jsxs)("div",{className:"mt-40 flex flex-col items-center justify-center space-y-4",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,a.t)("you_have_no_spaces")}),(0,e0.yG)({spaceGroup:t})&&(0,c.jsx)(l.zx,{onClick:children:(0,a.t)("spaces.form.create.title")})]}):(0,c.jsx)("div",{className:"react-page-space-show",children:(0,c.jsx)("div",{className:"space-group__spaces",children:d.map((function(e){return(0,c.jsx)(K7,{space:e},e.id)}))})})},Y7=function(e){var t=e.spaceGroup;return(0,c.jsx)(dr.rs,{children:(0,c.jsx)(dr.AW,{exact:!0,path:"/s/:spaceGroupSlug",component:)})};function X7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function e9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X7(Object(r),!0).forEach((function(t){t9(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X7(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function t9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r9(){var e=(0,dr.UO)().spaceGroupSlug,t=(0,v.e2)().helpers,r=t.isDataLoading,n=t.isDataRefreshing,i=t.findBy,o=(0,v.nT)(),a=o.records,s=o.helpers.isDataLoading,l=i({slug:e}),u=null===l||void 0===l?void 0:l.id,d=(0,v.p7)(u).data,m=(0,f.useQuery)(S.av.spaces.index({params:{space_group_id:null===l||void 0===l?void 0:l.id,include_details:!0}}),{enabled:!(null===l||void 0===l||!l.id)}),p=m.data,h=m.isLoading,b=(null===p||void 0===p?void 0:p.records)||[];if(n()||r()||s()||h)return(0,c.jsx)(W.m,{});var y=(0,e0.iQ)({spaceGroup:e9(e9({},l),d),spaces:a,spacesWithDetails:b});return(0,c.jsx)(q1.W,{fullWidth:!0,children:(0,c.jsxs)(Z1.F.Body,{hasPaddingTopMobile:!1,children:[(0,c.jsx)(A.S,{title:y.name,bodyClassNames:"view-space view-space-group view-space-group--".concat(y.id)}),(0,c.jsx)(Z1.F.Breadcrumb,{}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(U7,{spaceGroup:y}),rightContent:(0,c.jsx)(D7,{spaceGroup:y})}),(0,c.jsx)(Z1.F.Content,{children:(0,c.jsx)(Y7,{spaceGroup:y})})]})})}var n9=function(e){var t=e.onClick,r=e.isActive,n=void 0!==r&&r;return(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.chat"),onClick:t,active:n,children:(0,c.jsx)(bt.JO,{type:"chat",viewBox:"0 0 24 24"})})},i9=function(e){var t=e.onClick,r=e.isActive,n=void 0!==r&&r;return(0,c.jsx)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.stream.info"),onClick:t,active:n,children:(0,c.jsx)(bt.JO,{type:"session-info",viewBox:"0 0 24 24"})})},o9=r(30270),a9=r(782),s9=r(32714),l9=Object.freeze({CHAT:"CHAT",PARTICIPANTS:"PARTICIPANTS"}),c9=(0,o9.Ue)((0,a9.tJ)((0,s9.n)((function(e){return{sidebarView:l9.CHAT,isGuestPromptOpen:!0,guest:{name:""},hasLeftStream:!1,isInfoBoxOpen:!1,isFullscreen:!1,actions:{setIsGuestPromptOpen:function(t){return e((function(e){e.isGuestPromptOpen=t}))},toggleGuestPrompt:function(){return e((function(e){e.isGuestPromptOpen=!e.isGuestPromptOpen}))},hideSidebar:setChatSidebar:function(){return e((function(e){e.sidebarView=l9.CHAT}))},setParticipantsSidebar:function(){return e(()},toggleChatSidebar:function(){return e((function(e){e.sidebarView===l9.CHAT?e.sidebarView=null:e.sidebarView=l9.CHAT}))},toggleParticipantsSidebar:function(){return e((function(e){e.sidebarView===l9.PARTICIPANTS?e.sidebarView=null:e.sidebarView=l9.PARTICIPANTS}))},toggleInfoBox:function(){return e(()},setGuestName:function(t){return e(()},leaveStream:function(){return e(()},setIsFullscreen:}})),{name:"circle-public-live-storage",version:0,partialize:)),u9=d9=function(){var e=u9().leaveStream,t=(0,nt.tv)({title:(0,a.t)("live_streams.pre_join.stream.hang_up_confirmation"),onConfirm:e}),r=t.confirmModal,n=t.onConfirmButtonClick;return(0,c.jsxs)(c.Fragment,{children:[r,(0,c.jsx)(Y3,{variant:"danger",onClick:n,children:(0,a.t)("live_streams.room.leave")})]})},f9=function(e){var t=e.onClick,r=e.isActive,n=void 0!==r&&r,i=e.count,o=void 0===i?0:i;return(0,c.jsxs)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.participants"),onClick:t,active:n,autoWidth:!0,noMargin:!0,children:[(0,c.jsx)(bt.JO,{type:"people",viewBox:"0 0 24 24"}),(0,c.jsx)("span",{className:"text-dark ml-2.5 text-sm font-medium",children:o})]})},m9=function(){var e=(0,S.j)({params:{post_login_redirect:window.location.href}});window.location.href=e},p9=["data","isLoading","isError","error","refetch"];function h9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y9(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function v9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g9(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x9=function(){var e=(0,dr.UO)().roomSlug,t=(0,v.wh)(),r=t.currentCommunity,i=void 0===r?{}:r,o=t.isLoading,a=v9((0,n.useState)(null),2),s=a[0],l=a[1],c=(0,f.useQuery)(["public-live-stream","room",e,null===i||void 0===i?void 0:i.id],(function(){return(0,Er.UT)(S.qi.rooms.show({slug:e,params:{community_id:null===i||void 0===i?void 0:i.id}}))}),{enabled:!o&&Boolean(e),refetchInterval:s}),u=c.data,d=c.isLoading,m=c.isError,p=c.error,h=c.refetch,b=y9(c,p9);return(0,n.useEffect)((function(){return l(function(e){return!e||!(0,it.SS)(e)&&null!==e&&void 0!==e&&e.hls_url?(0,it.fN)(e)?6e4:null:1e4}(u))}),[u]),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h9(Object(r),!0).forEach((function(t){b9(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h9(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({room:u,isLoading:d,isError:m,error:p,refetchRoom:h},b)},_9=function(){var e=(0,dr.UO)().roomSlug,t=(0,v.wh)(),r=t.currentCommunity,n=void 0===r?{}:r,i=t.isLoading,o=(0,f.useQuery)(["public-live-stream","participants",e,null===n||void 0===n?void 0:n.id],(function(){return(0,Er.UT)(S.qi.rooms.participants.index({slug:e,params:{community_id:null===n||void 0===n?void 0:n.id}}))}),{enabled:!i&&Boolean(e),refetchInterval:3e4}),a=o.data,s=void 0===a?[]:a,l=o.isLoading,c=o.isError,u=o.refetch,d=(s||[]).length,m=s.filter((function(e){return 1===e.status}));return{participants:s,hosts:m.filter((),activeParticipants:m,isLoading:l,isError:c,refetchParticipants:u,totalCount:d,activeCount:m.length}},j9=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).refetchInterval,t=void 0===e?null:e,r=(0,v.wh)(),n=r.currentCommunity,i=void 0===n?{}:n,o=r.isLoading,a=(0,dr.UO)().roomSlug,s=c9(),l=s.isGuestPromptOpen,c=s.guest,u=(c=void 0===c?{}:c).name,d=(0,f.useQuery)(["public-live-stream","guests",a,null===i||void 0===i?void 0:i.id],(function(){return(0,Er.UT)(S.qi.rooms.guests.index({slug:a,params:{community_id:null===i||void 0===i?void 0:i.id,name:u}}))}),{enabled:!o&&Boolean(a)&&!l,refetchInterval:t}),m=d.data,p=d.isLoading;return{guests:m,count:(null===m||void 0===m?void 0:m.length)||0,isLoading:p}},w9=function(e){var t=e.room,r=u9(),n=r.toggleChatSidebar,i=r.toggleParticipantsSidebar,o=r.toggleInfoBox,a=c9(),s=a.sidebarView,l=a.isInfoBoxOpen,u=!!s,d=s===l9.CHAT,f=_9().activeCount+j9({refetchInterval:3e4}).count;return(0,c.jsxs)("div",{className:"border-dark relative flex h-[88px] items-center justify-between border-t bg-[white] px-10 py-5",children:[(0,c.jsx)("div",{className:"z-10 flex shrink-0 items-center",children:(0,c.jsx)(i9,{onClick:o,isActive:l})}),(0,c.jsx)("div",{className:"absolute inset-0 flex items-center justify-center py-5",children:(0,c.jsx)(d9,{})}),(0,c.jsxs)("div",{className:"isolate flex shrink-0 items-center",children:[(null===t||void 0===t?void 0:t.live_at)&&(0,c.jsx)(f4,{strDate:null===t||void 0===t?void 0:t.live_at}),(0,c.jsx)(n9,{onClick:n,isActive:u&&d}),(0,c.jsx)(f9,{onClick:i,isActive:u&&!d,count:f})]})]})},O9=function(e){var t=e.host,r=t.name,n=t.avatar_url,i=t.headline;return(0,c.jsxs)("div",{className:"mr-14 flex w-56 shrink-0 flex-col items-stretch",style:{scrollSnapAlign:"start"},children:[(0,c.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,c.jsx)("div",{className:"relative mr-4 h-10 w-10",children:(0,c.jsx)(St,{name:r,src:n,size:"sm",variant:"rounded-square"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-darkest truncate text-lg font-semibold",children:r}),(0,c.jsx)("div",{className:"text-dark text-sm font-semibold",children:(0,a.t)("live_streams.room.host")})]})]}),(0,c.jsx)("div",{className:"text-dark text-sm font-normal",children:i})]})},P9=function(){var e=_9().hosts,t=_4(280),r=t.hasScroll,n=t.scrollRef,i=t.scrollLeft,o=t.scrollRight;return(0,c.jsxs)("div",{className:"flex flex-col overflow-hidden px-6 pb-4 pt-12",children:[(0,c.jsx)("div",{className:"flex w-full flex-1 flex-nowrap items-start overflow-x-auto",ref:n,style:{scrollBehavior:"smooth",scrollSnapType:"x mandatory"},children:null===e||void 0===e?void 0:e.map(()}),r&&(0,c.jsxs)("div",{className:"flex justify-end gap-x-2 px-4",children:[(0,c.jsx)("button",{type:"submit",onClick:i,children:(0,c.jsx)(bt.JO,{type:"live-streams-arrow-left",size:"24"})}),(0,c.jsx)("button",{type:"submit",onClick:o,children:(0,c.jsx)(bt.JO,{type:"live-streams-arrow-right",size:"24"})})]})]})},S9=function(e){var t=e.room,r=c9().actions.toggleInfoBox,n=t.name,i=t.description;return(0,c.jsxs)("div",{className:"bg-primary absolute bottom-0 left-0 z-20 flex h-[276px] w-full items-stretch",children:[(0,c.jsx)("button",{type:"submit",className:"absolute right-4 top-4 z-10 flex text-gray-600",onClick:children:(0,c.jsx)(bt.JO,{type:"close",size:24})}),(0,c.jsx)("div",{className:"bg-secondary flex h-full w-1/4 shrink-0 flex-col rounded-sm px-6 py-5 pt-12",children:(0,c.jsxs)("div",{className:"overflow-y-scroll",children:[(0,c.jsx)("div",{className:"text-darkest text-2xl font-bold",children:n}),i&&(0,c.jsx)("div",{className:"text-dark mt-2",children:i})]})}),(0,c.jsx)(P9,{})]})},k9=function(){return(0,c.jsxs)("div",{className:"flex items-center justify-center",children:[(0,c.jsx)(y.Z.LabelSm,{as:"span",children:(0,a.t)("public_live_stream.pre_join.already_a_member")}),(0,c.jsx)("button",{type:"submit",className:"ml-1",onClick:m9,children:(0,c.jsx)(y.Z.LabelSm,{as:"span",weight:"semibold",children:(0,a.t)("public_live_stream.pre_join.login")})})]})},C9=function(){var e=(0,v.wh)().currentCommunity,t=(e=void 0===e?{}:e).logo_url,r=e.icon_url,n=e.name;return(0,c.jsxs)("div",{className:"relative mb-20 flex h-24 items-center",children:[t&&(0,c.jsx)("img",{alt:"",className:"max-h-full",src:t,title:n}),!t&&(0,c.jsxs)("div",{className:"flex h-6 items-center",children:[r&&(0,c.jsx)("img",{alt:"",src:r,className:"mr-2 max-h-full"}),(0,c.jsx)(y.Z.TitleMd,{className:"text-brand",children:n})]})]})},N9=function(e){var t=e.room,r=e.hasLeftStream,n=!r&&((0,it.UT)(t)||(0,it.B8)(t)),i=!r&&(0,it.SS)(t),o=!t,s=r;return(0,c.jsxs)("div",{className:"flex h-screen w-screen flex-col items-center p-24",children:[(0,c.jsx)(C9,{}),(0,c.jsxs)("div",{className:"mb-10",children:[i&&(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)(l.ZT.TitleLg,{children:t.name})}),(0,c.jsx)(l.ZT.LabelLg,{children:(0,a.t)("live_streams.public.landing.not_started")})]}),n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-12 text-center text-7xl",children:(0,a.t)("live_streams.public.landing.wave")}),(0,c.jsx)(l.ZT.TitleLg,{children:(0,a.t)("live_streams.public.landing.ended")})]}),s&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mb-12 text-center text-7xl",children:(0,a.t)("live_streams.public.landing.hands_raised")}),(0,c.jsx)(l.ZT.TitleLg,{children:(0,a.t)("live_streams.public.landing.left")})]}),o&&(0,c.jsx)(l.ZT.TitleLg,{children:(0,a.t)("live_streams.public.landing.not_found")})]}),(0,c.jsx)(k9,{})]})},T9=function(){return(0,c.jsx)("div",{className:"bg-primary absolute",children:(0,c.jsxs)("div",{className:"flex h-screen w-screen flex-col items-center p-24 text-center",children:[(0,c.jsx)("div",{className:"mb-12 text-7xl",children:(0,a.t)("live_streams.public.landing.disappointed")}),(0,c.jsx)("div",{className:"max-w-2xl",children:(0,c.jsx)(l.ZT.TitleLg,{children:(0,a.t)("live_streams.public.landing.full")})}),(0,c.jsx)(l.zx,{variant:"circle",className:"mt-12",onClick:function(){window.location.reload()},children:(0,a.t)("retry")})]})})},A9=function(e){var t=e.onClick,r=void 0===t?fn.noop:t,n=e.isFullscreen;return(0,c.jsx)("div",{className:"absolute right-7 top-7 z-10",children:(0,c.jsxs)(F3,{tooltipText:(0,a.t)("live_streams.room.button_tooltips.fullscreen"),tooltipPlacement:"left",onClick:r,variant:"dark-background",noMargin:!0,children:[!n&&(0,c.jsx)(bt.JO,{type:"fullscreen",size:24}),n&&(0,c.jsx)(bt.JO,{type:"exit-fullscreen",size:24})]})})},E9=I9=function(e){var t=e.hlsUrl,r=c9().isGuestPromptOpen,i=!t||r,o=function(){var e=c9(),t=e.isFullscreen,r=e.actions.setIsFullscreen,i=(0,n.useRef)(null);return(0,n.useEffect)((,[r]),{elementRef:i,toggleFullscreen:function(){var e=i.current;e&&(E9()?document.exitFullscreen():e.requestFullscreen())},isFullscreen:t}}(),a=o.elementRef,s=o.toggleFullscreen,u=o.isFullscreen;return(0,c.jsxs)("div",{ref:a,className:"group h-full w-full",onDoubleClick:s,children:[!i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"opacity-0 transition-opacity group-hover:opacity-100",children:(0,c.jsx)(A9,{onClick:s,isFullscreen:u})}),(0,c.jsx)(M4,{hlsUrl:t})]}),i&&(0,c.jsx)(l.aN,{className:"absolute flex h-full w-full justify-center align-middle"})]})},D9=function(e){var t=e.isOpen,r=u9(),n=r.setGuestName,i=r.setIsGuestPromptOpen,o={name:c9().guest.name};return(0,c.jsxs)(Gr.Ww,{size:"sm",title:(0,a.t)("public_live_stream.pre_join.join_stream_title"),isOpen:t,contentPortalId:"prejoin-modal",children:[(0,c.jsxs)(l.l0,{onSubmit:defaultValues:o,className:"w-full",children:[(0,c.jsx)(l.l0.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,hideLabel:!0,name:"name",placeholder:(0,a.t)("public_live_stream.pre_join.your_name"),rules:{required:(0,a.t)("messaging.validations.room_name_required"),maxLength:{value:80,message:(0,a.t)("messaging.validations.room_name_max_length")}},children:(0,c.jsx)(l.l0.Input,{autoFocus:!0})}),(0,c.jsx)(l.zx,{full:!0,large:!0,className:"my-4",variant:"circle",children:(0,a.t)("public_live_stream.pre_join.join_stream")})]}),(0,c.jsx)("div",{className:"mb-6 mt-3 text-center",children:(0,c.jsx)(k9,{})})]})},L9=function(e){var t=e.role;return Object.values(it.iD).filter(().includes(t)?(0,c.jsx)(yt.Y,{placement:"top",content:(0,a.t)("live_roles.".concat(t)),children:(0,c.jsx)(bt.JO,{type:t,size:16,className:"-mt-1 ml-1"})}):null},M9=function(e){var t=e.message,r=e.participant,n=t||{},i=n.created_at,o=n.rich_text_body,a=r||{},s=a.avatar_url,u=a.name,d=a.role,f=(0,Xe.H8)(i).time;return o?(0,c.jsxs)("div",{className:"flex w-[98%] max-w-full justify-start py-1.5",children:[(0,c.jsx)("div",{className:"mr-3 pt-1",children:(0,c.jsx)(Pt.sJ,{src:s,name:u,size:"10"})}),(0,c.jsxs)("div",{className:"w-full",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",color:"text-darkest",children:u}),d&&(0,c.jsx)(L9,{role:d}),(0,c.jsx)("span",{className:"ml-2",children:(0,c.jsx)(l.ZT.LabelXs,{color:"text-light",children:f})})]}),(0,c.jsx)("div",{className:"text-dark mb-1 whitespace-pre-line text-sm font-normal",children:(0,c.jsx)(bM.T,{editable:!1,rich_text_body:o})})]})]}):null},R9=function(){var e,t,r,i,o,s,u,d=(e=(0,dr.UO)().roomSlug,t=(0,v.wh)(),r=t.currentCommunity,i=void 0===r?{}:r,o=t.isLoading,s=(0,f.useQuery)(["public-live-stream","messages",e,null===i||void 0===i?void 0:i.id],(function(){return(0,Er.UT)(S.qi.rooms.messages.index({slug:e,params:{community_id:null===i||void 0===i?void 0:i.id}}))}),{enabled:!o&&Boolean(e),refetchInterval:1e4}),{messages:void 0===(u=s.data)?[]:u,isLoading:s.isLoading,isError:s.isError,refetchMessages:s.refetch}),m=d.messages,p=d.isLoading,h=_9(),b=h.participants,y=h.isLoading,g=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).messages,t=void 0===e?null:e,r=(0,n.useRef)(null),i=(0,n.useRef)(!1);return(0,n.useEffect)((function(){var e=r.current,t=i.current,n=null;if(e){var o=e.scrollHeight-(e.scrollTop+e.clientHeight);(!t||o<500)&&(n=setTimeout((,200))}return function(){clearTimeout(n)}}),[t]),{chatContainerRef:r,onScroll:}({messages:m}),x=g.chatContainerRef,_=g.onScroll;return p||y?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsxs)("div",{ref:x,onScroll:_,className:"mb-6 mt-3 flex grow flex-col items-stretch justify-between overflow-auto px-6",children:[(0,c.jsx)("div",{id:"messages-container",children:m.map((function(e){var t=b.find(();return(0,c.jsx)(M9,{message:e,participant:t},e.id)}))}),(0,c.jsxs)("div",{className:"bg-secondary flex h-11 w-full shrink-0 items-center justify-center rounded-md",children:[(0,c.jsx)("button",{type:"submit",onClick:m9,className:"mr-1",children:(0,c.jsx)(l.ZT.LabelSm,{as:"span",weight:"semibold",children:(0,a.t)("public_live_stream.login")})}),(0,c.jsx)(l.ZT.LabelSm,{children:(0,a.t)("public_live_stream.to_chat")})]})]})},F9=function(e){var t=e.title,r=e.onClick;return(0,c.jsxs)("div",{className:"flex h-16 justify-between border-b px-6 py-5",children:[(0,c.jsx)(y.Z.TitleSm,{weight:"semibold",children:t}),(0,c.jsx)("button",{type:"submit",onClick:r,"aria-label":(0,a.t)("live_streams.room.close_sidebar_button_aria_label"),children:(0,c.jsx)(bt.JO,{type:"20-close-md"})})]})},B9=function(e){var t=e.participant,r=e.host;if(!t)return null;var n=t.name,i=t.avatar_url,o=t.id,a=t.role;return a===it.iD.HOST&&(null===r||void 0===r?void 0:r.id)!==o&&(a=it.iD.COHOST),(0,c.jsxs)("div",{className:"mx-3 flex items-center justify-start rounded-md px-3 py-2",children:[(0,c.jsx)("div",{className:"relative mr-4 h-10 w-10",children:(0,c.jsx)(St,{name:n,src:i,size:"sm"})}),(0,c.jsxs)("div",{className:"text-darkest mr-2 truncate font-medium",children:[n,Boolean(a)&&(0,c.jsx)(L9,{role:a})]})]})};function U9(e){return function(e){if(Array.isArray(e))return z9(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return z9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z9(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V9=function(){var e=_9(),t=e.activeParticipants,r=e.isLoading,i=function(e){var t=e.activeParticipants,r=void 0===t?[]:t,n=x9().room,i=r.find((function(e){return"host"===e.role&&e.id===(null===n||void 0===n?void 0:n.created_by_id)})),o=r.filter((function(e){return"host"===e.role&&e.id!==(null===n||void 0===n?void 0:n.created_by_id)})),a=(0,fn.groupBy)(r,"role"),s={moderators:i?[i].concat(U9(a.moderator||[])):a.moderator||[],cohosts:o,participants:a.hlsspectator||[]};return{host:i,participantsGroup:s||{}}}({activeParticipants:t}),o=i.host,s=i.participantsGroup,u=j9().guests,d=[{group:s.moderators,title:(0,a.t)("live_roles.moderators")},{group:s.cohosts,title:(0,a.t)("live_roles.cohosts")},{group:s.participants,title:(0,a.t)("live_roles.participants")},{group:u,title:(0,a.t)("live_roles.guests")}];return r?(0,c.jsx)(l.aN,{center:!0}):(0,c.jsx)("div",{className:"mt-2 flex grow flex-col items-stretch justify-start overflow-auto",children:d.map((function(e){var t=e.group,r=e.title;return(0,fn.isEmpty)(t)?null:(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(A8,{title:r}),t.map((function(e){return(0,c.jsx)(B9,{participant:e,host:o},"participant-".concat(r,"-").concat(e.id))}))]},"participant-group-".concat(r))}))})},Z9=function(){var e=u9().hideSidebar,t=c9().sidebarView,r=!!t,n=t===l9.CHAT;return(0,c.jsxs)("div",{className:J()("border-primary bg-primary flex w-96 shrink-0 flex-col items-stretch border-l",{hidden:!r}),children:[(0,c.jsx)(F9,{title:(0,a.t)(n?"live_streams.room.chat":"live_streams.room.participants"),onClick:e}),n?(0,c.jsx)(R9,{}):(0,c.jsx)(V9,{})]})},H9=function(){!function(){var e=(0,d8.C)().goToCommunityRootPath,t=(0,G.R)(),r=t.publicLiveStreamsEnabled,i=t.isLoading;(0,n.useEffect)((,[e,i,r])}(),function(){var e=(0,dr.UO)().roomSlug,t=(0,v.wh)(),r=t.currentCommunityMember,i=t.isLoading,o=(0,dr.k6)();(0,n.useEffect)((function(){!i&&r&&o.push(S.dE.room({roomSlug:e}))}),[r,o,i,e])}();var e=(0,v.wh)(),t=e.currentCommunityMember,r=e.isLoading,i=x9(),o=i.room,a=i.isLoading,s=i.isError,l=i.error,u=c9(),d=u.hasLeftStream,f=u.isGuestPromptOpen,m=u.isInfoBoxOpen,p=u.actions.setGuestName,h=a||r,b=!(0,it.fN)(o)||!o||d,y=s&&403===l.status;return(0,n.useEffect)((function(){r||(0,fn.isEmpty)(t)||p(t.name)}),[r,t,p]),h?(0,c.jsx)("div",{className:"bg-primary absolute",children:(0,c.jsx)(e8,{})}):y?(0,c.jsx)(T9,{}):b?(0,c.jsx)(N9,{room:o,hasLeftStream:d}):(0,c.jsxs)(A.S,{title:o.name,bodyClassNames:"overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex h-screen w-screen",children:[(0,c.jsxs)("div",{className:"flex grow flex-col",children:[(0,c.jsxs)("div",{className:"relative grow bg-[#191b1f]",children:[(0,c.jsx)(I9,{hlsUrl:o.hls_url}),m&&(0,c.jsx)(S9,{room:o})]}),(0,c.jsx)(w9,{room:o})]}),(0,c.jsx)(Z9,{})]}),f&&(0,c.jsx)(D9,{roomTitle:o.name,isOpen:f})]})},q9=r(59822),G9=function(e){var t=e.defaultValue,r=void 0===t?"oldest":t,n=[{value:"alphabetical",label:(0,a.t)("alphabetical")},{value:"oldest",label:(0,a.t)("oldest")},{value:"latest",label:(0,a.t)("latest")}];return(0,c.jsx)(l.l0.Item,{name:"member_directory_settings.sort",label:I18n.t("".concat("members_directory.header.settings.form",".sort")),hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(l.l0.SelectNative,{options:n,defaultValue:r})})},W9=function(){var e="members_directory.header.settings.form.exclude_empty_profiles";return(0,c.jsx)(l.l0.Item,{name:"member_directory_settings.exclude_empty_profiles",label:I18n.t("".concat(e,".title")),description:I18n.t("".concat(e,".description")),isToggle:!0,hideBorder:!0,inline:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{variant:"small"})})};function Q9(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var K9="members_directory.header.settings",J9=[{value:qo.nk.CARDS,label:(0,a.t)(["members_directory.header","views.cards"])},{value:qo.nk.LIST,label:(0,a.t)(["members_directory.header","views.list"])}],$9=function(e){var t=e.open,r=e.onClose,n=(0,l.pm)(),i=(0,v.wh)(),o=i.isLoading,a=i.currentCommunitySettings,u=(0,Uf.K)({onSuccess:function(){n.success(s().t("".concat(K9,".save.success"))),r()},onError:function(){n.error(s().t("".concat(K9,".save.error")))}});if(!a||o)return null;var d=a.member_directory_settings,f=void 0===d?{}:d,m=function(){var e,t=(e=se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.mutate({data:{community_settings:a},updates:t});case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Q9(o,n,i,a,s,"next",e)}function s(e){Q9(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,c.jsx)(l.dy,{open:t,onClose:r,title:s().t("".concat(K9,".title")),noWrapperPadding:!0,children:(0,c.jsxs)(l.l0,{onSubmit:m,defaultValues:{member_directory_settings:f},className:"h-full",formClassName:"flex flex-col h-full",children:[(0,c.jsxs)("div",{className:"grow px-6",children:[(0,c.jsx)(W9,{}),(0,c.jsx)(G9,{defaultValue:f.sort}),(0,c.jsx)(l.l0.Item,{name:"member_directory_settings.view",label:s().t([K9,"form.view"]),hideDescription:!0,hideBorder:!0,children:(0,c.jsx)(l.l0.SelectNative,{options:J9,defaultValue:qo.nk.CARDS})})]}),(0,c.jsx)(l.dy.Footer,{children:(0,c.jsx)(l.zx,{disabled:u.isLoading,type:"submit",variant:"primary",full:!0,children:s().t("".concat(K9,".save.button"))})})]})})};function Y9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X9(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var eee=function(e){var t=e.currentCommunityMember,r=e.memberCount,i=Y9((0,n.useState)(!1),2),o=i[0],s=i[1],l="".concat((0,a.t)("members_directory.header.title")," (").concat(r,")");return(0,Ho.vb)(t)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Da.Lt,{direction:"bottom-start",button:(0,c.jsxs)(Da.Lt.MenuButton,{children:[(0,c.jsx)(F.y,{children:l}),(0,c.jsx)(bt.JO,{size:16,type:"caret-down-bold",className:"text-dark"})]}),children:[(0,c.jsx)(Da.Lt.ItemLink,{to:S.Gp.index(),children:(0,a.t)("members_directory.header.manage_members")}),(0,c.jsx)(Da.Lt.ItemLink,{forceClose:!0,onClick:function(){s(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,c.jsx)($9,{open:o,onClose:function(){s(!1)}})]}):(0,c.jsx)(F.y,{children:l})},tee=r(30634),ree=ia.f2.RoleFilter,nee=ia.f2.SpaceGroupsFilter,iee=ia.f2.SpacesFilter,oee=ia.f2.StatusFilter,aee=ia.f2.MemberTagsFilter,see=ia.f2.PaywallsFilter,lee=ia.f2.EventsFilter,cee=ia.f2.HasPastDueSubscriptionFilter,uee=ia.f2.JoinedCommunityDaysAgoFilter,dee=ia.f2.LastLoggedInDaysAgoFilter,fee=ia.f2.AvatarSet,mee=ia.f2.ActivityScoreFilter,pee=ia.xs.HeadlineFilter,hee=ia.xs.LocationFilter,bee=ia.xs.BioFilter,yee=ia.xs.NameFilter,vee=[{name:"joined_community_days_ago",component:uee,label:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago"),availableLabel:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:dee,label:(0,a.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],gee=[{name:"name",component:yee,label:(0,a.t)("members_directory.header.search.filters.name")},{name:"bio",component:bee,label:(0,a.t)("members_directory.header.search.filters.bio")},{name:"headline",component:pee,label:(0,a.t)("members_directory.header.search.filters.headline")},{name:"location",component:hee,label:(0,a.t)("members_directory.header.search.filters.location")},{name:"role",component:ree,label:(0,a.t)("members_directory.header.search.filters.role")},{name:"spaces",component:iee,label:(0,a.t)("members_directory.header.search.filters.spaces.title")},{name:"space_groups",component:nee,label:(0,a.t)("members_directory.header.search.filters.space_groups.title")},{name:"online_status",component:oee,label:(0,a.t)("members_directory.header.search.filters.online_status")},{name:"tags",component:aee,label:(0,a.t)("members_directory.header.search.filters.tags.title")},{name:"paywalls",component:see,label:(0,a.t)("members_directory.header.search.filters.paywalls.title")},{name:"events",component:lee,label:(0,a.t)("members_directory.header.search.filters.events.title")},{name:"has_past_due_subscription",component:cee,label:(0,a.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(vee,[{name:"is_avatar_set",component:fee,label:(0,a.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:mee,label:(0,a.t)("members_directory.header.search.filters.activity_score")}]),xee=function(){var e,t=(0,Ko.rV)();return(0,c.jsx)("div",{className:"shadow-xs hidden md:flex",children:(0,c.jsx)(ia.YP,{platformFilters:gee,defaultFilterNames:(e=["name","spaces","tags","events"],t?[].concat(e,["activity_score"]):e)})})},_ee=function(){var e=(0,Uf.K)(),t=(0,Uf.w)().data,r=null===t||void 0===t?void 0:t.community_settings;if(e.isLoading||!r)return(0,c.jsx)(l.aN,{});var n=r.public_member_directory,i="members_directory.header.actions.".concat(n?"public":"private");return(0,c.jsxs)(l.J2,{buttonTitle:(0,a.t)("".concat(i,".title")),children:[(0,c.jsx)("p",{children:(0,a.t)("".concat(i,".description"))}),(0,c.jsx)(l.zx,{variant:"primary",onClick:function(){e.mutate({data:t,updates:{public_member_directory:!n}})},children:(0,a.t)("".concat(i,".revert_button"))})]})},jee=function(e){var t=e.activeView,r=e.setActiveView,n=(0,dr.k6)(),i=(0,v.wh)().currentCommunityMember,o=(0,c.jsx)(m2.P,{value:t,onChange:r});return(0,Ho.vb)(i)?(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[o,(0,c.jsx)(l.zx,{type:"button",className:"hidden md:block",onClick:children:(0,a.t)("manage")}),(0,c.jsx)(_ee,{})]}):o},wee=function(e){var t=e.memberCount,r=e.activeView,n=e.setShouldRenderMobileFiltersTransition,i=e.setActiveView,o=(0,v.wh)().currentCommunityMember;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(eee,{currentCommunityMember:o,memberCount:t}),rightContent:(0,c.jsx)(jee,{activeView:r,setActiveView:i})}),(0,c.jsx)(tee.M,{setShouldRenderMobileFiltersTransition:n}),(0,c.jsx)(xee,{})]})};function Oee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function See(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cee=function(e){var t=e.memberDirectorySettings,r=See((0,n.useState)(0),2),i=r[0],o=r[1],a=function(e){var t=(0,xn._)("members-directory-view-v2"),r=t.getValue,i=t.setValue,o=(0,n.useRef)(e),a=(0,n.useCallback)((function(){var e=r(),t=o.current;if(!e)return null!==t&&void 0!==t?t:qo.nk.LIST;var n=e.defaultCommunityView,i=e.defaultUserView;return n===t?i:null!==t&&void 0!==t?t:qo.nk.LIST}),[r]),s=Oee((0,n.useState)(a),2),l=s[0],c=s[1];return(0,n.useEffect)((,[l,i]),(0,n.useEffect)((function(){o.current=e,c(a())}),[e,a]),[l,c]}(t.view),l=See(a,2),u=l[0],d=l[1],f=See((0,n.useState)(!1),2),m=f[0],p=f[1];return(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsxs)(q1.W,{fullWidth:!0,children:[(0,c.jsx)(wee,{memberCount:i,activeView:u,setActiveView:d,setShouldRenderMobileFiltersTransition:p}),(0,c.jsxs)(Z1.F.Body,{hasPaddingTopMobile:!1,children:[(0,c.jsx)(A.S,{title:s().t("members_directory.title"),bodyClassNames:"view-members-directory"}),(0,c.jsxs)(Z1.F.Content,{className:J()("md:!min-w-0",{"!m-0 !max-w-none":u===qo.nk.GRID}),children:[(0,c.jsx)(Ls.x$,{shouldRenderMobileFiltersTransition:m,shouldBeHiddenOnMd:!0,shouldShowAdminFilters:!0}),(0,c.jsx)(Ls.Sk,{setMemberCount:o,scopeResults:t.scope,defaultSort:t.defaultSort,shouldShowHiddenMemberTooltip:!0,viewType:q9.c.MEMBER_DIRECTORY,activeView:u})]})]})]})})},Nee=function(){var e=Qo();return e.isLoading?null:(0,c.jsx)(Cee,{memberDirectorySettings:e})},Tee=Aee=Eee=function(e){var t=e.notificationMediums,r=e.newActivityRows;return(0,c.jsxs)("table",{className:"w-full",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-2/3"}),(0,c.jsx)("col",{className:"w-1/6"}),(0,c.jsx)("col",{className:"w-1/6"})]}),(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"font-medium",children:[(0,c.jsx)("th",{className:"text-lg font-semibold",children:(0,a.t)("member_profile_modal.notifications.new_activity")}),t.map((function(e){return(0,c.jsx)("th",{className:"text-center text-sm font-medium",children:(0,a.t)(["member_profile_modal.notifications",e])},e)}))]})}),(0,c.jsx)("tbody",{children:r.map((function(e){var r=e.notification_type,n=e.values;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"py-2",children:(0,a.t)(["member_profile_modal.notifications",r])}),t.map((function(e){return(0,c.jsx)("td",{className:"text-center",children:(0,c.jsx)(Tee,{children:(0,c.jsx)(l.l0.Checkbox,{disabled:null===n[e],name:Aee({notificationMedium:e,rowName:r}),id:Aee({notificationMedium:e,rowName:r}),isFormItem:!1})})},e)}))]},r)}))})]})},Iee={chat:(0,a.t)("member_profile_modal.notifications.chat_spaces_tooltip")},Dee=function(e){var t=e.space,r=Iee[t.space_type],n=Boolean(r);return(0,c.jsxs)("div",{className:"flex max-w-sm items-center gap-x-2",children:[(0,c.jsx)("p",{className:"truncate",title:t.name,children:t.name}),n&&(0,c.jsx)(yt.Y,{content:r,children:(0,c.jsx)(bt.JO,{type:"question-mark",className:"text-dark !w-3"})})]})},Lee=function(e){var t=e.getValues,r=e.checkboxNames,n=e.setIndeterminate,i=e.notificationMedium,o=e.setValue,a=new Set(t(r));return a.size>1?n(i,!0):a.has(!0)?(n(i,!1),o(!0)):(n(i,!1),o(!1))},Mee="all",Ree="spaceGroup",Fee="space",Bee={email:"notification_type",in_app:"in_app_notification_setting",mobile:"mobile_notification_setting"},Uee=zee=function(e){var t=e.notificationMedium,r=e.spaceGroup;return"".concat(Ree,"[").concat(r.space_group_name,"][").concat(t,"]")},Vee=function(e){var t=e.spaceConfig,r=e.notificationMedium;return"".concat(Fee,"[").concat(Fee).concat(String(t.id),"][").concat(Bee[r],"]")},Zee=Hee=function(e){var t=e.spaceConfig,r=e.notificationMedium;if("chat"===t.space.space_type&&"email"===r)return!0},qee=function(e){var t=e.spaces,r=e.notificationMediums,n=e.onChange,i=(0,pr.Gc)().setValue,o=function(e){var t=e.notificationMedium,r=e.event,o=e.spaceConfig;i(Vee({spaceConfig:o,notificationMedium:t}),r.target.checked),n(t)};return t.map((function(e){var t=e.id,n=e.space;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-4 py-2",children:(0,c.jsx)(Dee,{space:n})}),r.map((function(t){var r=Vee({spaceConfig:e,notificationMedium:t});return(0,c.jsx)("td",{className:"text-center",children:(0,c.jsx)(Tee,{children:(0,c.jsx)(l.l0.Checkbox,{name:r,id:r,isFormItem:!1,disabled:Hee({spaceConfig:e,notificationMedium:t}),onChange:)})},t)}))]},t)}))},Gee=function(e){var t=e.spaceGroup,r=e.notificationMediums,n=e.indeterminateState,i=void 0===n?{}:n,o=e.setGroupIndeterminate,a=e.onChange,s=(0,pr.Gc)(),u=s.setValue,d=s.getValues,f=t.space_members,m=function(e){var r=e.notificationMedium,n=e.event.target.checked;u(zee({notificationMedium:r,spaceGroup:t}),n),o({spaceGroup:t,notificationMedium:r,value:!1}),f.forEach((function(e){Hee({spaceConfig:e,notificationMedium:r})||u(Vee({spaceConfig:e,notificationMedium:r}),n)})),a(r)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"truncate py-2 font-semibold",title:t.space_group_name,children:t.space_group_name}),r.map((function(e){var r=zee({notificationMedium:e,spaceGroup:t});return(0,c.jsx)("td",{className:"text-center",children:(0,c.jsx)(Tee,{children:(0,c.jsx)(l.l0.Checkbox,{name:r,id:r,isFormItem:!1,indeterminate:i[e],onChange:function(t){return m({notificationMedium:e,event:t})}})})},e)}))]},t.space_group_name),(0,c.jsx)(qee,{spaces:f,notificationMediums:r,onChange:function(e){var r=t.space_members.filter((function(t){return!Hee({spaceConfig:t,notificationMedium:e})})).map(();Lee({checkboxNames:r,notificationMedium:e,setIndeterminate:getValues:d,setValue:function(r){u(zee({notificationMedium:e,spaceGroup:t}),r),a(e)}})}})]})};function Wee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kee(Object(r),!0).forEach((function(t){$ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yee=function(e,t){var r,n=t.label,i=t.medium,o=t.value,a=null!==(r=e[n])&&void 0!==r?r:{};return Jee(Jee({},e),{},$ee({},n,Jee(Jee({},a),{},$ee({},i,o))))},Xee=function(e){var t=e.notificationMediums,r=e.spaceGroups,i=(0,pr.Gc)(),o=i.setValue,s=i.getValues,u=function(e){var t=e.spaceGroups,r=e.notificationMediums,i=Wee((0,n.useReducer)(Yee,r.reduce((function(e,r){var n=Bee[r];return t.forEach((function(t){var i=t.space_members.filter((function(e){return!Hee({spaceConfig:e,notificationMedium:r})})).map((function(e){return e[n]}));if(1===new Set(i).size)return e;e=Yee(e,{label:Zee(t),medium:r,value:!0}),e=Yee(e,{label:Mee,medium:r,value:!0})})),e}),{})),2),o=i[0],a=i[1],s=return{indeterminateStates:o,setAllIndeterminate:s,setGroupIndeterminate:function(e){var r=e.spaceGroup,n=e.notificationMedium,i=e.value;if(a({label:Zee(r),medium:n,value:i}),i)s(n,!0);else{var l=t.some((function(e){var t;return r.space_group_name!==e.space_group_name&&(null===(t=o[Zee(e)])||void 0===t?void 0:t[n])}));s(n,l)}}}}({spaceGroups:r,notificationMediums:t}),d=u.indeterminateStates,f=u.setAllIndeterminate,m=u.setGroupIndeterminate,p=function(e){var t=r.reduce((function(t,r){return r.space_members.forEach((function(r){Hee({spaceConfig:r,notificationMedium:e})||t.push(Vee({spaceConfig:r,notificationMedium:e}))})),t}),[]);Lee({checkboxNames:t,notificationMedium:e,setIndeterminate:f,getValues:s,setValue:)};return(0,c.jsxs)("table",{className:"w-full",children:[(0,c.jsxs)("colgroup",{children:[(0,c.jsx)("col",{className:"w-2/3"}),(0,c.jsx)("col",{className:"w-1/6"}),(0,c.jsx)("col",{className:"w-1/6"})]}),(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"font-medium",children:[(0,c.jsx)("th",{className:"text-lg font-semibold",children:(0,a.t)("member_profile_modal.notifications.new_posts")}),t.map((function(e){return(0,c.jsx)("th",{className:"text-center text-sm font-medium",children:(0,a.t)(["member_profile_modal.notifications",e])},e)}))]})}),(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"py-2",children:(0,a.t)("member_profile_modal.notifications.apply_to_all_spaces")}),t.map((function(e){var t;return(0,c.jsx)("td",{className:"text-center",children:(0,c.jsx)(Tee,{children:(0,c.jsx)(l.l0.Checkbox,{name:Uee(e),id:Uee(e),isFormItem:!1,onChange:function(t){return function(e){var t=e.notificationMedium,n=e.event.target.checked;o(Uee(t),n),f(t,!1),r.forEach((function(e){o(zee({spaceGroup:e,notificationMedium:t}),n),m({spaceGroup:e,notificationMedium:t,value:!1}),e.space_members.forEach((function(e){Hee({spaceConfig:e,notificationMedium:t})||o(Vee({spaceConfig:e,notificationMedium:t}),n)}))}))}({notificationMedium:e,event:t})},indeterminate:null===(t=d[Mee])||void 0===t?void 0:t[e]})})},e)}))]}),r.map((function(e){return(0,c.jsx)(Gee,{indeterminateState:d[Zee(e)],notificationMediums:t,spaceGroup:e,setGroupIndeterminate:m,onChange:p},e.space_group_name)}))]})]})},ete=["email","in_app"],tte=[].concat(ete,["mobile"]);function rte(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nte(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rte(Object(r),!0).forEach((function(t){ite(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rte(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ite(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ote(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ate(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ate(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ate(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ste=function(e){var t=e.formId,r=e.data,n=e.onSubmit,i=r.show_mobile_notifications,o=r.space_groups,a=r.notification_types,s=i?tte:ete,u=function(e){var t=e.newActivityValues,r=e.notificationMediums;return t.reduce((function(e,t){return r.forEach((function(r){var n=t.notification_type,i=t.values;e[Aee({notificationMedium:r,rowName:n})]=i[r]})),e}),{})}({newActivityValues:a,notificationMediums:s}),d=function(e){var t=e.spaceGroups;return e.notificationMediums.reduce((function(e,r){return e[Uee(r)]=!0,t.forEach((function(t){var n=zee({spaceGroup:t,notificationMedium:r}),i=Bee[r];e[n]=!0,t.space_members.forEach((function(t){if(!Hee({spaceConfig:t,notificationMedium:r})){var o=Vee({spaceConfig:t,notificationMedium:r}),a=t[i];e[o]=a,!1===a&&(e[n]=!1,e[Uee(r)]=!1)}}))})),e}),{})}({spaceGroups:o,notificationMediums:s});return(0,c.jsx)(l.l0,{id:t,preventAccidentalLeave:!0,defaultValues:nte(nte({},u),d),onSubmit:function(e){var t=e.newActivity,r=e.space,i=void 0===r?{}:r,o=Object.entries(t).reduce((function(e,t){var r=ote(t,2),n=r[0],i=r[1];return Object.entries(i).forEach((function(t){var r=ote(t,2),i=r[0],o=r[1];null!==o&&e.push({notification_type:n,medium:i,value:o})})),e}),[]),a=Object.entries(i).map((function(e){var t=ote(e,2),r=t[0],n=t[1],i=r.replace(Fee,"");return nte(nte({},n),{},{id:i})}));n({notification_preferences:o,space_members:a})},children:(0,c.jsxs)("div",{className:"flex flex-col gap-y-10 pb-12",children:[(0,c.jsx)(Eee,{notificationMediums:s,newActivityRows:a}),(0,c.jsx)(Xee,{notificationMediums:s,spaceGroups:o})]})})};function lte(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return cte(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cte(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cte(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ute="member-profile-notifications-form",dte=function(){var e=window.location.search.replace("?","").split("&").reduce((,{}),t=function(e){var t=(0,l.pm)();return{get:(0,f.useQuery)(["notification-preferences"],(function(){return(0,Er.UT)(S.xI.notification_preferences.index({params:e}))}),{notifyOnChangeProps:["data","error","isLoading","refetch","isFetching"]}),update:{updatePreferences:(0,f.useMutation)((function(t){return(0,Er.gN)(S.xI.notification_preferences.update({params:e}),t)}),{onSuccess:function(){t.success((0,a.t)("changes_saved"))},onError:function(){t.error((0,a.t)("request_failure_message"))}}).mutateAsync}}}({token:e.token}),r=t.get,n=r.isFetching,i=r.error,o=r.data,s=t.update.updatePreferences;return n?(0,c.jsx)("div",{className:"flex min-h-[600px] flex-1 items-center justify-center",children:(0,c.jsx)(l.aN,{center:!0})}):i?(0,c.jsx)(vX.Z2.Root,{title:(0,a.t)("member_profile_modal.nav.notifications"),children:(0,c.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,c.jsx)("p",{children:(0,a.t)("member_profile_modal.notifications.loading_data_error")})})}):(0,c.jsx)("div",{className:"absolute inset-0 flex flex-col",children:(0,c.jsxs)(vX.Z2.Root,{title:(0,a.t)("member_profile_modal.nav.notifications"),titleClassName:"m-auto w-full max-w-screen-md",children:[(0,c.jsx)(vX.Z2.Body,{className:"grow overflow-auto",children:(0,c.jsx)("div",{className:"mx-auto w-full max-w-screen-md text-left md:px-6",children:(0,c.jsx)(ste,{formId:ute,data:o,onSubmit:s})})}),(0,c.jsx)(vX.Z2.FooterForm,{showFooter:!0,className:null,buttonsWrapperClassName:"flex justify-end",primaryButtonProps:{type:"submit",variant:"circle",form:ute,children:(0,a.t)("save_changes")}})]})})},fte=r(78077),mte=(0,er.P)((function(){var e=(0,dr.UO)().publicUid,t=(0,xX.P)({memberPublicId:e,params:{page_name:gX.$q.PROFILE_VIEW}}).getProfileInfoQuery,r=t.data,n=t.isLoading,i=t.isError,o=t.error;if(i&&404===o.status)throw new xj.d(o);var s=(0,v.wh)(),l=s.currentCommunity,u=s.currentUser,d=s.currentCommunityMember,f=s.isLoading,m=(0,nS.kK)();if(n||f)return(0,c.jsx)(W.m,{});if((0,B.v)(l)){if(!u)return window.location.href=S.$T.signIn({params:{post_login_redirect:window.location.href}}),(0,c.jsx)("div",{children:(0,a.t)("redirecting_sign_in")});if(!d)return window.location.href="/",(0,c.jsx)("div",{children:(0,a.t)("accessing_private_community")})}return r||(window.location.href="/"),(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{}),(0,c.jsx)(_b.a.Breadcrumb,{}),(0,c.jsx)(_b.a.Content,{noPadding:m,children:(0,c.jsx)(fte.N,{member:r,memberPublicId:e,isFullPageProfile:!0,shouldFixTabsTop:!0})})]})})}),Yt.D,{handleNotFoundError:!0}),pte=function(){var e=(0,v.wh)(),t=e.currentCommunitySettings,r=e.currentCommunity,n=[{label:(0,a.t)("spaces_directory.space_types.all"),value:null},{label:(0,a.t)("spaces.form.create.space_types.post_label"),value:"basic"},{label:(0,a.t)("spaces.form.create.space_types.event_label"),value:"event"},{label:(0,a.t)("spaces.form.create.space_types.chat_label"),value:"chat"}];return!(null===t||void 0===t||!t.courses_enabled)&&(null===r||void 0===r?void 0:r.courses_feature_flag_enabled)&&n.push({label:(0,a.t)("spaces.form.create.space_types.course_label"),value:"course"}),n},hte=ia.f2.SpaceGroupsFilter,bte=function(){var e=(0,To.Xt)(),t=e.queryParams,r=e.removeAllQueryParams,n=e.updateUrl,i=pte(),o=Object.keys(t).length>0;return(0,c.jsxs)("div",{className:J()("shadow-xs bg-primary border-primary items-center justify-between gap-x-1 border-b px-6 py-3","hidden md:flex"),children:[(0,c.jsxs)(Tl.x,{children:[(0,c.jsx)(To.Og,{selectedText:t.space_type,options:i.slice(1),label:(0,a.t)("spaces_directory.space_groups.header"),onChange:),(0,c.jsx)(hte,{})]}),(0,c.jsx)(To.Cd,{isVisible:o,onClick:r})]})};function yte(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var vte=function(e){var t=e.space,r=e.refetch,n=(0,v.wh)().isViewOnlyMasquerading,i=(0,v.EU)(),o=(0,f.useQueryClient)(),s=(0,g2.B_)({space:t}),u=s.joinSpace,d=s.isSubmitting,m=(0,nS.en)(),p=(0,v.e2)().actions.refresh,h=(0,v.nT)().actions.refresh,b=function(){var e,n=(e=se().mark((function e(n){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),n.preventDefault(),e.next=4,u();case 4:o.removeQueries([v.Xe,t.id]),p(),h(),r();case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){yte(o,n,i,a,s,"next",e)}function s(e){yte(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return i?(0,c.jsx)(c.Fragment,{children:m?(0,c.jsxs)("button",{type:"submit",className:"text-v2-info invisible flex items-center gap-x-1 text-sm font-medium group-hover:visible",onClick:n?fn.noop:b,children:[(0,c.jsx)(bt.JO,{type:"plus-v2",className:"fill-current",viewBox:"0 0 16 16",size:14}),(0,c.jsx)("span",{children:(0,a.t)(d?"joining":"join_space")})]}):(0,c.jsx)(l.zx,{variant:"secondary-light",small:!0,onClick:n?fn.noop:b,children:(0,c.jsx)("span",{children:(0,a.t)(d?"joining":"join_space")})})}):null};function gte(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xte(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xte(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xte(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _te=function(e){var t=e.space,r=e.refetch,n=(0,f.useQueryClient)(),i=(0,nS.en)(),o=gte((0,fr.k)(!1),2),s=o[0],u=o[1],d=return(0,c.jsxs)(c.Fragment,{children:[i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"text-default flex items-center justify-end text-sm group-hover:hidden",children:[(0,c.jsx)(bt.JO,{type:"check",size:16}),(0,c.jsx)("p",{children:(0,a.t)("spaces_directory.card.joined")})]}),(0,c.jsx)("button",{type:"submit",className:"text-v2-danger hidden items-center gap-x-1 text-sm font-medium group-hover:flex",onClick:d,children:(0,a.t)("spaces_directory.card.leave")})]}):(0,c.jsx)(l.zx,{variant:"secondary-light",small:!0,onClick:d,children:(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(bt.JO,{type:"check",size:16}),(0,c.jsx)("p",{children:(0,a.t)("spaces_directory.card.joined")})]})}),(0,c.jsx)(Z7.k,{show:s,onClose:function(){u(),n.removeQueries([v.Xe,t.id]),r()},space:t})]})};function jte(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wte(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jte(Object(r),!0).forEach((function(t){Ote(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jte(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ote(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pte=function(e){var t=e.space,r=e.refetch,n=t.joined,i=t.is_private,o=(0,v.wh)().currentCommunityMember,a=(0,Ho.vb)(o),s=(0,jk.D)(t);return i&&!a?null:n&&!s?(0,c.jsx)(_te,{space:t,refetch:r}):(0,c.jsx)(vte,{space:t,refetch:r})},Ste=function(e){var t=e.space,r=e.refetch;return t.is_private?null:(0,c.jsx)(vte,{space:t,refetch:r})},kte=function(e){return(0,v.wh)().currentUser?(0,c.jsx)(Pte,wte({},e)):(0,c.jsx)(Ste,wte({},e))},Cte=function(e){var t=e.children;return(0,c.jsx)("span",{className:"bg-badge text-badge text-xxs rounded px-1 py-[0.75px] font-bold uppercase",children:t})},Nte=function(e){var t=e.space,r=e.usersLimit,n=void 0===r?3:r,i=t.id,o=t.members,a=(0,H7.I)({spaceId:i}),s=a.count,l=a.isLoading;return(0,c.jsxs)("div",{className:"text-default flex text-xs",children:[(0,c.jsx)(s8.v,{users:o.slice(0,n),size:"sm"}),!l&&n<s&&(0,c.jsx)("div",{className:"flex items-center pl-1 text-xs",children:"+".concat((s-n).toString())})]})},Tte=function(e){var t=e.space,r=e.refetch,n=t.name,i=t.emoji,o=t.custom_emoji_url,s=t.custom_emoji_dark_url,u=t.space_group.name,d=t.is_new,f=t.is_private,m=t.joined,p=(0,lr.TC)().currentAppearance;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-4 px-3 py-4",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(l.ZT.TitleSm,{truncate:!0,as:"h2",weight:"semibold",title:n,children:(0,c.jsxs)("div",{className:"flex min-w-0 items-center gap-x-2",children:[(0,c.jsx)(wy.S,{className:"!h-6 !w-6",emoji:i,appearance:p,customEmojiUrl:o,customEmojiDarkUrl:s}),(0,c.jsx)("span",{className:"min-w-0 truncate",children:n})]})}),d&&(0,c.jsx)(Cte,{children:(0,a.t)("spaces_directory.card.new")})]}),(0,c.jsx)("p",{className:"text-default truncate text-sm font-medium",title:u,children:u})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[f&&!m?(0,c.jsxs)("div",{className:"text-light flex items-center gap-x-1 text-sm font-medium",children:[(0,c.jsx)(bt.JO,{type:"lock",useWithFillCurrentColor:!0}),(0,c.jsx)("p",{children:(0,a.t)("spaces_directory.card.private")})]}):(0,c.jsx)(Nte,{space:t}),(0,c.jsx)(kte,{space:t,refetch:r})]})]})},Ate=function(e){var t=e.space,r=e.refetch,n=t.thumbnail_image_url,i=t.name;return(0,c.jsxs)("div",{className:"bg-primary hover:shadow-c-card border-input group h-full w-full overflow-hidden rounded-lg border",children:[(0,c.jsx)("div",{className:"aspect-video w-full overflow-hidden bg-gray-200","aria-hidden":!0,children:n&&(0,c.jsx)("img",{src:n,alt:i,loading:"lazy",className:"block h-full w-full object-cover"})}),(0,c.jsx)(Tte,{space:t,refetch:r})]})},Ete=["query","sort","space_type","space_groups"];function Ite(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dte(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ite(Object(r),!0).forEach((function(t){Lte(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ite(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mte(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Rte=function(){var e=function(){var e,t,r,n,i=(0,rl.t)(),o=i.query,a=void 0===o?"":o,s=i.sort,l=void 0===s?"latest":s,c=i.space_type,u=i.space_groups,d=Mte(i,Ete),m=(0,f.useInfiniteQuery)(["spaces",a,l,c,u,d],(function(e){var t=e.pageParam,r={page:void 0===t?1:t,query:a,sort:l};return c&&(r.space_type=c),u&&(r.space_group=u),(0,Er.UT)(S.av.search.spaces.index({params:r}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),p=(null===(e=m.data)||void 0===e?void 0:e.pages)||[],h=(null===(t=p[0])||void 0===t?void 0:t.count)||0,b=(null===(r=p[0])||void 0===r||null===(n=r.meta)||void 0===n?void 0:n.total_count)||0,y=mw()(p.map((function(e){return e.records})));return Dte(Dte({},m),{},{dataLength:h,totalSpaces:b,spaces:y})}(),t=e.spaces,r=e.fetchNextPage,n=e.hasNextPage,i=e.isLoading,o=e.dataLength,s=e.refetch;return i?(0,c.jsx)(l.aN,{}):0===o?(0,c.jsx)(D2.j,{title:(0,a.t)("spaces_directory.empty.title"),description:(0,a.t)("spaces_directory.empty.description")}):(0,c.jsx)(nW.Z,{style:{overflow:"initial"},scrollThreshold:.5,next:r,hasMore:!!n,loader:(0,c.jsx)(W.m,{}),dataLength:t.length,scrollableTarget:"panel",children:(0,c.jsx)("ol",{className:"grid-cols-space-directory m-4 grid max-w-full list-none auto-rows-fr gap-6 lg:m-auto",children:t.map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(sn.rU,{to:(0,S._v)({spaceSlug:e.slug}),children:(0,c.jsx)(Ate,{space:e,refetch:s})})},e.id)}))})})},Fte=[{label:(0,a.t)("latest"),value:"latest"},{label:(0,a.t)("alphabetical"),value:"alphabetical"},{label:(0,a.t)("active_spaces"),value:"active_spaces"}],Bte=[{label:(0,a.t)("spaces_directory.space_groups.all"),value:null}],Ute=function(e){var t,r=e.heading,n=e.filterKey,i=e.options,o=(0,dr.k6)(),a=null!==(t=(0,rl.t)()[n])&&void 0!==t?t:i[0].value;return(0,c.jsxs)("section",{children:[(0,c.jsx)("header",{className:"px-5 py-2",children:(0,c.jsx)(l.ZT.LabelSm,{as:"h2",weight:"medium",children:r})}),(0,c.jsx)("div",{children:i.map((function(e){return(0,c.jsx)(l.Lt.Item,{children:(0,c.jsx)(l.Lt.ItemLink,{active:a===e.value,onClick:function(){return function(e){o.push({search:(0,S.m_)(n,e)})}(e.value)},children:e.label})},e.value)}))})]})},zte=function(){var e=(0,Q$.t)(),t=e.isLoading,r=e.visibleSpaceGroups;return t||!r.length?null:(0,c.jsx)(Ute,{heading:(0,a.t)("spaces_directory.space_groups.header"),filterKey:"space_groups",options:Bte.concat(r)})},Vte=function(){return(0,c.jsx)(l.ZT.TitleSm,{as:"h1",weight:"semibold",children:(0,a.t)("spaces_directory.title")})},Zte=function(){var e=(0,nS.Be)(),t=pte();return e?(0,c.jsx)(Vte,{}):(0,c.jsxs)(l.Lt,{direction:"bottom-start",button:(0,c.jsxs)(l.Lt.MenuButton,{children:[(0,c.jsx)(Vte,{}),(0,c.jsx)(bt.JO,{size:16,type:"caret-down-bold",className:"text-dark"})]}),children:[(0,c.jsx)(Ute,{heading:(0,a.t)("sort_order"),options:Fte,filterKey:"sort"}),(0,c.jsx)(l.Lt.Separator,{}),(0,c.jsx)(Ute,{heading:(0,a.t)("spaces_directory.space_types.header"),options:t,filterKey:"space_type"}),(0,c.jsx)(l.Lt.Separator,{}),(0,c.jsx)(zte,{})]})},Hte=function(e){var t,r=e.options,n=e.filterKey,i=null!==(t=(0,rl.t)()[n])&&void 0!==t?t:r[0].value,o=(0,dr.k6)();return(0,c.jsx)(l.Lt,{options:r,activeOptionValue:i,onChange:function(e){return o.push({search:(0,S.m_)(n,e)})}})},qte=function(){return(0,c.jsx)(Hte,{options:Fte,filterKey:"sort"})},Gte=function(){return(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsxs)(q1.W,{fullWidth:!0,children:[(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(Zte,{}),rightContent:(0,c.jsx)("div",{className:"hidden md:block",children:(0,c.jsx)(qte,{})})}),(0,c.jsx)(bte,{}),(0,c.jsxs)(Z1.F.Body,{hasPaddingTopMobile:!1,children:[(0,c.jsx)(A.S,{title:s().t("spaces_directory.title"),bodyClassNames:"view-spaces-directory"}),(0,c.jsx)(Z1.F.Content,{className:"!max-w-7xl md:!min-w-0",children:(0,c.jsx)(Rte,{})})]})]})})},Wte=r(19736),Qte=r(12936),Kte=function(){return(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsx)(q1.W,{fullWidth:!0,fullHeight:!1,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{title:(0,a.t)("header_v3.bookmarks")}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("header_v3.bookmarks")}),hasBorder:!0}),(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:(0,c.jsx)("div",{className:"bg-primary m-4 mx-auto max-w-4xl overflow-auto lg:h-[calc(100vh-160px)]",children:(0,c.jsx)(Qte.Q,{})})})]})})})},Jte=r(13243),$te=function(){return(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsx)(q1.W,{fullWidth:!0,fullHeight:!1,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{title:(0,a.t)("chat_threads")}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("chat_threads")}),hasBorder:!0}),(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:(0,c.jsx)(Jte.H,{})})]})})})},Yte=r(22895),Xte=r(70827),ere=r(76087),tre=r(23866),rre=r(18889),nre=r(51510),ire=r(71470),ore=r(68554);function are(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lre=function(e){var t=e.options,r=void 0===t?{}:t,n=(0,oe.p)();return(0,f.useMutation)((function(e){if(e.user.otp.length<6)throw new Error((0,a.t)("authentication_app.signin.form.otp_length_error"));return(0,Er.Cu)(rre.P.two_fa.emailOtpVerification(),e)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?are(Object(r),!0).forEach((function(t){sre(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):are(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSuccess:onError:,r))};function cre(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function ure(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){cre(o,n,i,a,s,"next",e)}function s(e){cre(o,n,i,a,s,"throw",e)}a(void 0)}))}}function dre(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fre(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fre(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fre(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mre=function(){var e=(0,ore.c)().userEmail,t=dre((0,n.useState)(""),2),r=t[0],i=t[1],o=lre({}),s=o.mutateAsync,u=o.isLoading,d=o.isSuccess;return(0,c.jsxs)(l.l0,{onSubmit:ure(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({user:{otp:r}});case 2:case"end":return e.stop()}}),e)}))),children:[(0,c.jsx)(l.l0.Item,{name:"user[otp]",hiddenField:!0,hideDescription:!0,hideBorder:!0,hideLabel:!0,children:(0,c.jsx)(ire.Z,{value:r,onChange:function(e){return i(e)},numInputs:6,separator:(0,c.jsx)("span",{style:{width:"8px"}}),isInputNum:!0,shouldAutoFocus:!0,inputStyle:{border:"1px solid var(--grey-200, #E4E7EB);",borderRadius:"8px",width:"54px",height:"64px",color:"#000",fontSize:"20px",fontStyle:"normal",fontWeight:"600",lineHeight:"28px"},focusStyle:{border:"1px solid #CFD3DB",outline:"none"}})}),(0,c.jsx)(l.l0.Item,{name:"user[email]",hiddenField:!0,hideDescription:!0,hideBorder:!0,hideLabel:!0,children:(0,c.jsx)(l.l0.Input,{type:"hidden",value:e})}),(0,c.jsx)("div",{className:"mt-6 w-full text-center",children:(0,c.jsx)("div",{className:"mx-auto mb-4 flex w-full",children:(0,c.jsx)(l.zx,{variant:"primary",type:"submit",full:!0,extraLarge:!0,disabled:u||d,children:(0,a.t)("".concat("two_fa.email_otp",".submit"))})})})]})};function pre(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bre=function(e){var t=e.options,r=void 0===t?{}:t,n=(0,oe.p)();return(0,f.useMutation)((function(){return(0,Er.Cu)(rre.P.two_fa.emailOtpResend())}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pre(Object(r),!0).forEach((function(t){hre(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pre(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSuccess:function(e){n.success(null===e||void 0===e?void 0:e.message)},onError:function(e){var t;console.error(e),n.error((null===(t=e.body)||void 0===t?void 0:t.error)||e.message)}},r))},yre=function(){var e=bre({}).mutateAsync;return(0,c.jsxs)(Yte.c,{children:[(0,a.t)("authentication_app.shared_links.resent_otp_code.prefix")," ",(0,c.jsx)(sn.rU,{to:"#",onClick:e,id:"back-link",replace:!0,children:(0,a.t)("authentication_app.shared_links.resent_otp_code.link")})]})},vre=function(){var e,t,r=(0,zo.t)("two_factor_authentication"),n=(0,v.wh)(),i=n.currentCommunity,o=n.currentUser,a=(0,nre.d)(i).shouldShowPoweredByCircle,s=(0,zo.t)("two_fa.email_otp.title"),l=!(null===(e=window.webview)||void 0===e||!e.isComingFromReactNativeAuthenticatedWebview)||window.webview.isInsideMobileWebview,u=!(null===(t=window.webview)||void 0===t||!t.isComingFromReactNativeWebview);if(l)return(0,c.jsx)(Xte.m,{});return(0,c.jsxs)(ere.z,{community:i,step:void 0,title:s,subtitle:(0,c.jsx)(pP.w,{content:(0,zo.t)("two_fa.email_otp.description",{email:null===o||void 0===o?void 0:o.email})}),isNarrow:!0,withCircleBranding:EF()(i),shouldShowPoweredByCircle:a,children:[(0,c.jsx)(tre.V,{title:r}),(0,c.jsx)("div",{children:(0,c.jsx)(mre,{})}),!u&&(0,c.jsxs)("div",{className:"mt-8 flex flex-col items-center justify-center",children:[(0,c.jsx)("div",{className:"mb-6",id:"back-link-container",children:(0,c.jsx)(Yte.c,{children:(0,c.jsx)(sn.rU,{to:"#",onClick:function(){var e=encodeURIComponent("".concat(window.location.origin).concat(rre.P.signIn(),"#email"));window.location.replace("".concat((0,S.jE)(),"?redirect_back_url=").concat(e))},id:"back-link",replace:!0,children:(0,zo.t)("authentication_app.shared_links.back")})})}),(0,c.jsx)(yre,{})]})]})},gre=r(97819),xre=r(95172),_re=r(20254),jre=r(6382),wre=r(31514),Ore=function(e){var t=e.community,r=e.token,i=e.index,o=(0,lr.TC)().isDarkAppearance,a=t.id,s=t.is_current_community,l=t.root_url,u=t.name,d=t.brand_color,f=t.community_member_id,m=t.dark_icon_url,p=t.light_icon_url,h=o?m||"":p||"",b=(0,I6.f)(),y=b.newNotificationCount,v=b.fetchNewNotificationsCount,g=b.onNotificationEventReceive,x=(0,jre.K)({community:t}).unreadChatCount,_=function(){var e=new URL(l);return e.searchParams.set("automatic_login","true"),e.searchParams.set("token",r),e.toString()};return(0,n.useEffect)((function(){v(a)}),[]),(0,_re.I)(f,g),(0,xre.y1)("alt+g+".concat(i+1),(,{enabled:i+1<9}),(0,c.jsx)(wre.M,{isActive:s,href:_(),icon_attachment_url:h,includeName:!1,brand_color:d,name:u,notificationCount:s?0:y+x,index:i})},Pre=r(80478),Sre=function(e){var t=e.isLoadingAppData,r=void 0!==t&&t,n=(0,Cf.U)(),i=n.communities,o=n.token,a=n.isLoadingCommunities,s=(0,gre.W)(),l=r||a;return(0,c.jsx)(Pre.b,{isLoading:l,isCustomColorTheme:s,id:"community-switcher",children:i.map(()})};function kre(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nre=function(e){var t=(0,dr.TH)().pathname;return t.startsWith("/settings")||t.startsWith("/members/")?null:(0,c.jsx)(Sre,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kre(Object(r),!0).forEach((function(t){Cre(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kre(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},Tre=function(){var e=(0,dX.D)();return(0,c.jsx)(Nre,{isLoadingAppData:e})},Are=r(62720),Ere=r(40754),Ire=r(37653),Dre=r(77329),Lre=r(77853),Mre=r(33869),Rre=r(3249),Fre=r(52263),Bre=function(e){var t=e.chatRoomUuid,r=e.userList,n=(0,Ba.uk)(t),i=n.chatParticipants,o=r||i;if(n.isLoading)return null;var s=(0,Fre.jo)(o);return(0,c.jsxs)("div",{className:"block px-5 py-4",children:[(0,c.jsx)("div",{className:"mb-2 flex space-x-2","data-testid":"participants",children:o.map((function(e){var t=e.name,r=e.avatar_url,n=e.id,i=e.status;return(0,c.jsx)(Rre.g,{src:r,name:t,size:"10",status:i},n)}))}),(0,c.jsx)(y.Z.LabelLg,{weight:"medium",color:"text-darkest",dataTestId:"start-conversation",children:(0,a.t)("messaging.start_conversation")}),(0,c.jsxs)(y.Z.BodyMd,{"data-testid":"start-conversation-message",children:[(0,a.t)("messaging.direct_message_history")," ",s]})]})};function Ure(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zre(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ure(Object(r),!0).forEach((function(t){Vre(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ure(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zre(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Hre(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hre(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hre(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ire.Mz,Ire.Q_;var qre=function(e){var t=e.chatRoom,r=e.chatUserSearchRef,i=e.displayDayChange,o=void 0===i||i,s=e.isChatPreview,l=void 0!==s&&s;(0,Ro.t)();var u=function(){var e=(0,dr.k6)();return function(){var t=e.location,r=t.pathname+t.search;e.push(r)}}(),d=(0,Fre.YQ)(),f=(0,dr.UO)().uuid,m=Zre((0,n.useState)(!0),2),p=m[0],h=m[1],b=Zre((0,n.useState)(!0),2),y=b[0],v=b[1],g=(0,nS.ef)(),x=(0,Ba.KR)().openThreadsRailbarOnThreadsNotification,_=(0,Are.U)().isMessagingModalOpen,j=Zre((0,n.useState)(!1),2),w=j[0],O=j[1],P=t.uuid,S=t.last_message,k=t.current_participant,C=void 0===k?{}:k,N=t.pinned_message,T=t.first_unread_message_id,A=(0,Ba.uk)(P).chatParticipants,E=(0,Ba.Lx)(t).canSendMessage,I=(0,n.createRef)(),D=(0,Ba.ub)(),L=D.chatRoomMessages,M=D.setChatRoomMessages,R=D.setScrollInfo,F=D.fetchChatMessagesFirstPage,B=D.adjustScroller,U=D.calculateScrollInfo,z=D.isLoading,V=D.isInitialPageLoaded,Z=D.messagesHasNextPage,H=D.shouldShowLatestMessageBtn,q=D.setShouldShowLatestMessageBtn,G=D.setFirstMessageId,W=D.setMessagesHasPrevPage,Q=D.setUnreadMessageFlow,K=(0,Ba.Bk)(L,M),$=0===L.length,Y=Zre((0,n.useState)(),2),X=Y[0],ee=Y[1],te=(0,n.useRef)(null),re=p&&y;(0,n.useEffect)((,[P,d,T]),(0,n.useEffect)((function(){d&&re&&!z&&((0,Fre.o7)(d),x({messageHashId:d,chatRoomMessages:L,chatRoom:t}))}),[d,z]),(0,n.useEffect)((,[L,V]),(0,n.useEffect)((function(){if(!Z){var e=(0,Fre.UT)({lastMessage:S,chatRoomMessages:L,currentParticipant:C,setScrollInfo:R,calculateScrollInfo:U,isInitialPageLoaded:V,setChatRoomMessages:M,setFirstMessageId:G,setMessagesHasPrevPage:W});e&&M(e)}}),[S]),(0,n.useEffect)((function(){var e=function(){var e,t,n=(0,Fre.cj)({searchInputClientHeight:null===r||void 0===r||null===(e=r.current)||void 0===e?void 0:e.clientHeight,footerClientHeight:null===te||void 0===te||null===(t=te.current)||void 0===t?void 0:t.clientHeight,isSmOrMdScreen:g,isMessagingModalOpen:_});ee(n)};return e(),window.addEventListener("resize",e),),[r,f,$,E,g,te]),(0,n.useEffect)((function(){O(!E)}),[E]);var ne=L.filter((),ie=(0,fn.uniqBy)(ne,"id"),oe=(0,fn.sortBy)(ie,"sent_at"),ae=H||Z&&V,se=(0,n.useMemo)((,[ie,A]);return(0,Ba.gJ)({uuid:t.uuid,ids:se,enabled:Boolean(A.length&&se.length)}),(0,c.jsxs)("div",zre(zre({id:"scrollWrapper",className:"flex grow flex-col overflow-y-auto border-r-0"},X&&{style:{height:"calc(100dvh - ".concat(X,"px)")}}),{},{children:[V?(0,c.jsxs)(c.Fragment,{children:[N&&(0,c.jsx)(Mre.R,{message:N,currentParticipant:C,isPinned:!0,chatRoom:t,chatThreadsEnabled:!l,isPinnedMessageAtTop:!0,participants:A,onBookmarkToggle:K,setUnreadMessageFlow:Q}),(0,c.jsx)(Lre.Qk,{isLastPage:p,isFirstPage:y,setIsLastPage:h,setIsFirstPage:v,chatRoomUuid:t.uuid,children:oe.map((function(e){var r;return(0,c.jsx)(Mre.R,{message:e,displayDayChange:o,ref:I,currentParticipant:C,isInitialPage:re,isLastMessage:(null===(r=(0,fn.last)(L))||void 0===r?void 0:r.id)===e.id,isPinned:(null===N||void 0===N?void 0:N.id)===e.id,unreadMessageId:T,disableUnreadMessageLine:w,chatRoom:t,chatThreadsEnabled:!l,messageHashId:d,participants:A,onBookmarkToggle:K,setUnreadMessageFlow:Q},e.id)}))})]}):(0,c.jsx)("div",{id:"message-scroll-view",className:"overflow-hidden pt-0",children:(0,c.jsx)(Q1.gi,{variant:"chat-room",hideMessageBox:!0})}),ae&&(0,c.jsx)("div",{className:"relative bottom-8 m-auto h-0",children:(0,c.jsx)(Lre.E0,{label:(0,a.t)("messaging.latest_messages"),onClick:)}),E?(0,c.jsxs)("div",{ref:te,className:J()("bg-primary fixed z-[9] w-full md:static md:bottom-auto md:z-auto md:w-auto md:bg-auto",{"bottom-0":!$,"bottom-16":$}),children:[!z&&$&&(0,c.jsx)(Bre,{chatRoomUuid:t.uuid}),(0,c.jsx)(Lre.Fx,{chatRoom:t,onClick:isChatPreview:l,portalTargetId:"fullscreen-modal-body"})]}):(0,c.jsx)(Dre.R,{children:(0,a.t)("community_member.messaging_disabled")})]}))},Gre=r(62829),Wre=function(e){var t=e.userList;return(0,c.jsxs)("div",{children:[(0,c.jsx)(Bre,{userList:t}),(0,c.jsx)(Lre.Fx,{userList:t,isChatPreview:!0,portalTargetId:"fullscreen-modal-body"})]})};function Qre(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kre(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qre(Object(r),!0).forEach((function(t){Jre(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qre(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $re(e){return function(e){if(Array.isArray(e))return Yre(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Yre(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yre(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yre(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xre=function(e){var t=e.chatRoom,r=e.chatUserSearchRef,i=e.displayDayChange,o=void 0===i||i,a=e.isChatPreview,s=void 0!==a&&a,l=e.isChatRoomLoading,u=void 0!==l&&l,d=e.userList,f=void 0===d?[]:d,m=(0,dr.UO)().uuid,p=(0,Gre._q)(),h=p.chatRooms,b=p.setChatRooms,y=p.fetchChatRoomForUuid,g=p.onEventReceive,x=y(h,null===t||void 0===t?void 0:t.uuid),_=(0,n.useRef)([]),j=(0,v.wh)().currentCommunityMember,w=(0,Ba.ub)(),O=w.onEventReceive,P=w.chatRoomMessages,S=(0,Ba.QP)().onReactionWebsocketEvent;return(0,n.useEffect)((,[h]),(0,n.useEffect)((function(){t&&b((0,fn.uniqBy)([t].concat($re(h)),"uuid"))}),[null===t||void 0===t?void 0:t.uuid]),(0,Sc.s)({channel:"Chats::RoomChannel",chat_room_uuid:null===t||void 0===t?void 0:t.uuid,onMessageReceive:function(e){"newMessage"===e.event&&g(e,null===j||void 0===j?void 0:j.id,_.current,m===(null===t||void 0===t?void 0:t.uuid)),O(e,P)},canCreateConnection:Boolean((null===t||void 0===t?void 0:t.uuid)&&(null===j||void 0===j?void 0:j.id))},[null===t||void 0===t?void 0:t.uuid,null===j||void 0===j?void 0:j.id]),(0,Sc.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){S(e),"newMessage"!==e.event&&g(e,null===j||void 0===j?void 0:j.id,_.current)},community_member_id:null===j||void 0===j?void 0:j.id,canCreateConnection:(null===t||void 0===t?void 0:t.uuid)&&(null===j||void 0===j?void 0:j.id)},[null===t||void 0===t?void 0:t.uuid,null===j||void 0===j?void 0:j.id]),x?(0,c.jsx)(qre,{chatRoom:Kre(Kre({},x),{},{first_unread_message_id:null===t||void 0===t?void 0:t.first_unread_message_id,current_participant:t?t.current_participant:x.current_participant,pinned_message:null===t||void 0===t?void 0:t.pinned_message}),displayDayChange:o,isChatPreview:s,chatUserSearchRef:r}):"new"!==m||0!==f.length&&!u?(0,c.jsx)(Wre,{userList:f}):(0,c.jsx)(Lre.Fx,{onClick:fn.noop,disabled:!0})},ene=function(e){var t=e.chatRoom,r=e.isLoading,n=e.refetchChatRoom,i=(0,dr.UO)().uuid,o=(0,P8.x)(),a=o.shouldShowRailBar,s=o.RailbarComponent;return(0,c.jsx)("div",{className:"h-full w-full",children:r?(0,c.jsx)(Q1.gi,{variant:"chat-room",hideMessageBox:!0,isModal:!0}):(0,c.jsxs)("div",{className:"bg-primary flex h-full grow flex-col p-0","data-testid":"chat-room-wrapper",children:[(0,c.jsx)(Xre,{chatRoom:t,displayDayChange:!0,isChatPreview:!1}),a&&(0,c.jsx)(s,{chatRoom:t,chatRoomUuid:i,refetchChatRoom:n})]})})},tne=r(98090),rne=r(18009),nne=function(e){var t=e.communityMember,r=e.isCurrentUserAdmin,n=void 0!==r&&r,i=t.name,o=t.avatar_url,a=t.status,s=t.email;return(0,c.jsxs)("span",{className:"mr-2 flex items-center space-x-2",children:[(0,c.jsx)(Rre.g,{src:o,name:i,status:a,size:"8"}),(0,c.jsx)(sO.T,{content:s,disabled:!n,children:(0,c.jsx)(l.ZT.LabelMd,{children:i})})]})},ine=function(e){var t=e.communityMembers,r=e.fetchNextPage,n=e.hasNextPage,i=e.activeOptionIndex,o=e.onMouseOver,s=e.onFocus,l=e.onMouseDown,u=(0,v.wh)().currentCommunityMember,d=(0,Ho.vb)(u);return 0===t.length?(0,c.jsx)("div",{className:"user-search__dropdown no-results",children:(0,a.t)("chat_rooms.members_search.not_found")}):(0,c.jsx)("div",{className:"user-search__dropdown",children:(0,c.jsx)(nW.Z,{style:{overflow:"initial"},scrollThreshold:.5,next:r,hasMore:!!n,loader:(0,c.jsx)(W.m,{}),dataLength:t.length,children:(0,c.jsx)("ul",{className:"m-0 list-none p-0",children:t.map((function(e,t){return(0,c.jsx)("li",{className:"w-full",children:(0,c.jsx)("button",{type:"button",onMouseDown:function(){return l(e)},onMouseOver:function(){return o(t)},onFocus:function(){return s(t)},className:J()("hover:bg-tertiary hover:text-dark w-full p-[0.625rem]",{"bg-tertiary text-dark":t===i}),"data-testid":"user-item",children:(0,c.jsx)(nne,{communityMember:e,isCurrentUserAdmin:d})})},e.id)}))})})})};function one(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ane(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?one(Object(r),!0).forEach((function(t){sne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):one(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lne(e){return function(e){if(Array.isArray(e))return dne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||une(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||une(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function une(e,t){if(e){if("string"===typeof e)return dne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dne(e,t):void 0}}function dne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fne=function(e){var t=e.onOptionSelectHandler,r=e.onChangeHandler,i=e.renderOptionFlag,o=void 0===i||i,a=e.noOfChars,s=void 0===a?2:a,l=e.placeHolderText,u=void 0===l?"Please type at least ".concat(s," characters"):l,d=e.tags,m=void 0===d?[]:d,p=e.onKeysPress,h=e.value,b=cne((0,n.useState)(""),2),y=b[0],g=b[1],x=cne((0,n.useState)(!1),2),_=x[0],j=x[1],w=cne((0,n.useState)(0),2),O=w[0],k=w[1],C=(0,v.wh)().currentCommunityMember,N=(0,Ho.vb)(C),T={exclude_ids:[null===C||void 0===C?void 0:C.id].concat(lne(m.map((function(e){return e.id}))))};N||(T.messaging_enabled=!0);var A=(0,rne.k)([m]);(0,n.useEffect)((function(){y.length?(j(!0),k(0)):j(!1)}),[y]);var E=(0,f.useInfiniteQuery)(["chat-members-search",y],(function(e){var t=e.pageParam,r=void 0===t?1:t;return(0,Er.UT)(S.av.search.communityMembers.index({params:{page:r,query:y,filters:ane({},T)}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),I=E.data,D=E.fetchNextPage,L=E.hasNextPage,M=(null===I||void 0===I?void 0:I.pages[0].count)||0,R=I&&M?(0,fn.flatten)(I.pages.map((function(e){return e.records}))):[],F=function(e){var r=lne(m);-1==r.findIndex((function(t){return t.id==e.id}))&&"undefined"!==typeof e&&(r.push(e),t&&t(r)),A.current&&(A.current.value="")},B=function(e){var r;if(e.keyCode!==P.Rv){if(e.keyCode===P.zy)return F(R[O]),void j(!1);if(e.keyCode!==P.Lf)if(e.keyCode!==P.zj){var n,i,o=e.keyCode===P.Zx,a=e.keyCode===P.I7,s=o||a,l=""===(null===(r=A.current)||void 0===r?void 0:r.value),c=0!==m.length;s&&l&&c&&(n=m[m.length-1],i=lne(m).filter((function(e){return e!==n})),t&&t(i))}else{if(O+1===R.length)return;k(O+1)}else{if(0===O)return;k(O-1)}}else j(!1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{id:"user-text-box",className:"user-search__input bg-primary placeholder:text-light placeholder:opacity-100",placeholder:u,onChange:function(e){var t=e.target.value;o&&t.length>s?g(t):(g(""),j(!1)),r&&r(t)},onKeyDown:onBlur:ref:A,autoFocus:!0,value:h,autoComplete:"off"}),_&&(0,c.jsx)(ine,{communityMembers:R,fetchNextPage:D,hasNextPage:!!L,activeOptionIndex:O,onMouseOver:k,onFocus:k,onMouseDown:F})]})};function mne(e){return function(e){if(Array.isArray(e))return bne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||hne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||hne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hne(e,t){if(e){if("string"===typeof e)return bne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bne(e,t):void 0}}function bne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yne="",vne=function(e){var t=e.chat_room_uuid,r=e.setTags,i=pne((0,n.useState)([]),2),o=i[0],s=i[1],u=pne((0,n.useState)(!0),2),d=u[0],f=u[1],m=pne((0,n.useState)([]),2),p=m[0],h=m[1],b=pne((0,n.useState)(""),2),y=b[0],v=b[1],g=pne((0,n.useState)(1),2),x=g[0],_=g[1];(0,n.useEffect)((function(){_(1),yne=(0,S.C0)(t)+"?query="+y+"&page=1",w((function(e){e.length<10&&f(!1),s(e)}))}),[y]);var j=function(e){h(e),r(e)},w=function(e){fetch(yne,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){console.error(e)}))};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"user-search__add-people-search",children:[(0,c.jsx)("div",{className:"user-search__label",children:(0,c.jsx)(bt.JO,{type:"search"})}),(0,c.jsx)(fne,{onChangeHandler:renderOptionFlag:!1,placeHolderText:(0,a.t)("search_for_a_member"),onKeysPress:!1,value:y})]}),(0,c.jsx)("div",{className:J()("selected-members-tag",{"mb-2":p.length>0}),children:p.map((function(e){return e&&(0,c.jsx)(l.Vp,{icon:(0,c.jsx)("div",{className:"pr-2",children:(0,c.jsx)(Pt.sJ,{src:e.avatar_url,name:e.name,size:"5"})}),label:e.name,onClose:function(){return t=e,r=mne(p).filter((function(e){return e!==t})),void j(r);var t,r},autoScrollIntoView:!0},e.id)}))}),(0,c.jsx)("div",{id:"scrollableDiv",children:(0,c.jsx)(nW.Z,{dataLength:o.length,next:function(){var e=mne(o);if(o.length>10)f(!1);else{_(x+1);var r=x+1;yne=(0,S.C0)(t)+"?query="+y+"&page="+r,w(()}},hasMore:d,loader:(0,c.jsx)("h4",{children:(0,a.t)("loading_ellipsis")}),useWindow:!1,height:300,scrollableTarget:"scrollableDiv",children:(0,c.jsx)("ul",{children:o.map((function(e){return(0,c.jsx)("li",{className:"hover:bg-tertiary focus-visible:bg-tertiary px-2 py-4",children:(0,c.jsxs)("button",{type:"submit",className:"member__tag flex w-full items-center",onClick:function(){return function(e){var t=mne(p);-1==t.findIndex((function(t){return t.id==e.id}))&&(t.push({id:e.id,name:e.name,avatar_url:e.avatar_url}),h(t),r(t),v(""))}(e)},children:[(0,c.jsx)(Pt.sJ,{src:e.avatar_url,name:e.name,size:"8"}),(0,c.jsx)("div",{className:"member_name ml-2 !pt-0",children:(0,c.jsx)(l.ZT.LabelMd,{children:e.name})}),(0,c.jsx)("input",{id:"member-select-checkbox-".concat(e.id),onChange:function(t){return function(e,t){var n=mne(p);!0===e.target.checked?-1==n.findIndex((function(e){return e.id==t.id}))&&(n.push({id:t.id,name:t.name,avatar_url:t.avatar_url}),h(n),r(n),v("")):(n=n.filter((),h(n),r(n),v(""))}(t,e)},type:"checkbox",checked:-1!==p.findIndex((),className:"checked:bg-brand member-checkbox !mt-0 checked:border-transparent"})]})},e.id)}))})})})]})};function gne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const wne=function(e){var t=e.isModalVisible,r=e.toggleModal,n=e.uuid,i=(0,l.pm)(),o=(0,d8.C)().goToMessagesRootPath,s=(0,f.useMutation)((function(){return vn.MS.destroy({uuid:n},{forReactQuery:!0})}),{onSuccess:function(){r(),i.success((0,a.t)("chat_room_deleted")),o()},onError:function(){i.error((0,a.t)("request_failure_message"))}}).mutateAsync;return(0,c.jsx)(Gr.Ww,{title:(0,a.t)("messaging.actions.delete_group"),isOpen:t,onClose:r,onAction:s,actionText:(0,a.t)("messaging.actions.delete_group"),actionVariant:"danger",children:(0,c.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:(0,a.t)("messaging.actions.delete_group_message")})})},One=function(e){var t=e.isModalVisible,r=e.toggleModal,n=e.chatRoom,i=e.refetchChatRoom,o=(0,l.pm)(),s=n.chat_room_name,u=n.chat_room_description,d=n.uuid,m={name:s,description:u},p=(0,f.useMutation)((function(e){return vn.MS.update({uuid:d,chat_room:e},{forReactQuery:!0})}),{onSuccess:function(){r(),i(),o.success((0,a.t)("messaging.actions.edit_room_info_success"))},onError:function(){o.error((0,a.t)("messaging.actions.edit_room_info_failure"))}}).mutateAsync;return(0,c.jsx)(Gr.Ww,{isOpen:t,title:(0,a.t)("messaging.actions.edit_room_info"),onClose:r,children:(0,c.jsxs)(l.l0,{onSubmit:p,defaultValues:m,children:[(0,c.jsx)(l.l0.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"name",label:(0,a.t)("messaging.room_name"),rules:{required:(0,a.t)("messaging.validations.room_name_required"),maxLength:{value:80,message:(0,a.t)("messaging.validations.room_name_max_length")}},children:(0,c.jsx)(l.l0.Input,{autoFocus:!0})}),(0,c.jsx)(l.l0.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"description",label:(0,a.t)("messaging.description"),rules:{maxLength:{value:255,message:(0,a.t)("messaging.validations.room_description_max_length")}},children:(0,c.jsx)(l.l0.TextArea,{})}),(0,c.jsx)("div",{className:"py-6",children:(0,c.jsx)(l.zx,{type:"submit",variant:"primary",full:!0,large:!0,children:(0,a.t)("messaging.update_info")})})]})})},Pne=function(e){var t=e.isModalVisible,r=e.toggleModal,n=e.uuid,i=e.currentParticipantId,o=(0,d8.C)().goToMessagesRootPath,s=(0,l.pm)().error,u=(0,f.useMutation)((function(){return vn.M.destroy({uuid:n,id:i},{forReactQuery:!0})}),{onSuccess:onError:).mutateAsync;return(0,c.jsx)(Gr.Ww,{title:(0,a.t)("messaging.actions.leave_group"),isOpen:t,onAction:u,onClose:r,actionText:(0,a.t)("messaging.actions.leave_group"),children:(0,c.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:(0,a.t)("messaging.actions.leave_group_message")})})},Sne=function(e){var t=e.isModalVisible,r=e.toggleModal,i=e.chatRoom,o=i.uuid,s=(0,l.pm)(),u=gne((0,n.useState)([]),2),d=u[0],m=u[1],p=(0,tne.u)(i.uuid).refetchChatParticipants,h=(0,f.useMutation)((function(){return vn.M.create({uuid:o,chat_room_participant:{community_member_ids:d.map((function(e){return e.id}))}},{forReactQuery:!0})}),{onSuccess:function(){r(),p(),s.success((0,a.t)("messaging.add_members_success"))},onError:).mutateAsync;return(0,c.jsx)(Gr.Ww,{isOpen:t,title:(0,a.t)("messaging.add_members"),onClose:r,onAction:h,actionText:(0,a.t)("add"),children:(0,c.jsx)("div",{className:"add-people-modal",children:(0,c.jsx)("div",{className:"member-list",children:(0,c.jsx)(vne,{chat_room_uuid:o,setTags:function(e){return m(e)}})})})})},kne=function(e){var t=e.isModalVisible,r=e.toggleModal,n=e.chatRoom,i=e.refetchChatRoom,o=(0,l.pm)(),s=n.chat_room_show_history,u=n.uuid,d={show_history:s},m=(0,f.useMutation)((function(e){return vn.MS.update({uuid:u,chat_room:e},{forReactQuery:!0})}),{onSuccess:function(){r(),i(),o.success((0,a.t)("messaging.actions.edit_room_info_success"))},onError:function(){o.error((0,a.t)("messaging.actions.edit_room_info_failure"))}}).mutateAsync;return(0,c.jsx)(Gr.Ww,{title:(0,a.t)("settings_title"),isOpen:t,onClose:r,children:(0,c.jsxs)(l.l0,{onSubmit:m,defaultValues:d,children:[(0,c.jsx)("div",{className:"text-left text-sm",children:(0,c.jsx)(l.l0.Item,{name:"show_history",label:(0,a.t)("messaging.settings.chat_room_show_history"),tooltipText:(0,a.t)("messaging.settings.chat_room_show_history_tooltip"),hideDescription:!0,hideBorder:!0,fullWidth:!0,inline:!0,children:(0,c.jsx)(l.l0.ToggleSwitch,{variant:"small"})})}),(0,c.jsx)("div",{className:"py-6",children:(0,c.jsx)(l.zx,{type:"submit",variant:"primary",full:!0,large:!0,children:(0,a.t)("save")})})]})})},Cne=function(e){var t=e.isModalVisible,r=e.toggleModal,i=e.uuid,o=_ne((0,n.useState)(!1),2),s=o[0],u=o[1],d=(0,n.useRef)(null);return(0,c.jsxs)(Gr.Ww,{title:(0,a.t)("messaging.share_room_link"),isOpen:t,onClose:r,children:[(0,c.jsx)("p",{className:"text-left font-bold",children:(0,a.t)("messaging.room_link")}),(0,c.jsx)("p",{className:"text-left",children:(0,a.t)("messaging.actions.share_room_message")}),(0,c.jsxs)("div",{className:"my-5 flex space-x-3",children:[(0,c.jsx)("input",{type:"text",id:"link",ref:d,className:"form-control placeholder:text-light placeholder:opacity-100",readOnly:!0,value:(0,S.g9)(i)}),(0,c.jsx)(l.zx,{variant:"secondary",onClick:function(){s||(d.current.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),u(!0))},children:s?(0,a.t)("copied"):(0,a.t)("copy")})]})]})},Nne=function(e){var t=e.isModalVisible,r=e.toggleModal;return(0,c.jsx)(Gr.Ww,{title:(0,a.t)("messaging.actions.make_admin_title"),isOpen:t,onAction:r,onClose:r,actionText:(0,a.t)("messaging.actions.got_it"),children:(0,c.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:(0,a.t)("messaging.actions.make_admin_message")})})};var Tne={isAddPeopleModalVisible:!1,isEditGroupModalVisible:!1,isSettingsModalVisible:!1,isRoomLinkModalVisible:!1,isMakeAdminModalVisible:!1,isLeaveGroupModalVisible:!1,isDeleteGroupModalVisible:!1},Ane="toggleIsEditGroupModal",Ene="toggleIsAddPeopleModal",Ine="toggleIsSettingsModal",Dne="toggleIsRoomLinkModal",Lne="toggleIsMakeAdminModal",Mne="toggleIsLeaveGroupModal",Rne="toggleIsDeleteGroupModal",Fne=function(e){var t=e.chatRoom,r=e.modalState,n=e.dispatch,i=e.refetchChatRoom,o=t.uuid,a=t.current_participant,s=r.isEditGroupModalVisible,l=r.isAddPeopleModalVisible,u=r.isSettingsModalVisible,d=r.isRoomLinkModalVisible,f=r.isMakeAdminModalVisible,m=r.isLeaveGroupModalVisible,p=r.isDeleteGroupModalVisible;return(0,c.jsxs)(c.Fragment,{children:[s&&(0,c.jsx)(One,{chatRoom:t,isModalVisible:s,toggleModal:function(){return n({type:Ane})},refetchChatRoom:i}),l&&(0,c.jsx)(Sne,{isModalVisible:l,toggleModal:function(){return n({type:Ene})},chatRoom:t}),u&&(0,c.jsx)(kne,{isModalVisible:u,toggleModal:function(){return n({type:Ine})},chatRoom:t,refetchChatRoom:i}),d&&(0,c.jsx)(Cne,{uuid:o,isModalVisible:d,toggleModal:),f&&(0,c.jsx)(Nne,{isModalVisible:f,toggleModal:function(){return n({type:Lne})}}),m&&(0,c.jsx)(Pne,{uuid:o,isModalVisible:m,toggleModal:function(){return n({type:Mne})},currentParticipantId:null===a||void 0===a?void 0:a.id}),p&&(0,c.jsx)(wne,{uuid:o,isModalVisible:p,toggleModal:function(){return n({type:Rne})}})]})},Bne=function(e){var t=e.chatRoom,r=e.dispatch,n=e.refetchChatRoom,i=t.uuid,o=t.current_participant,s=(0,Ba.uk)(i).chatParticipants,u=(0,l.pm)(),d=(0,f.useMutation)((function(){return vn.M.update({uuid:i,id:o.id,muted:!o.muted},{forReactQuery:!0})}),{onSuccess:function(){n(),u.success("".concat((0,a.t)("messaging.chat_room")," ").concat(o.muted?(0,a.t)("messaging.unmuted"):(0,a.t)("messaging.muted"),"."),{duration:"short",shouldUseProgress:!1})},onError:function(){u.error((0,a.t)("request_failure_message"))}}).mutateAsync,m=null===o||void 0===o?void 0:o.admin;return(0,c.jsxs)(c.Fragment,{children:[m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Da.Lt.ItemLink,{onClick:function(){return r({type:Ane})},children:(0,a.t)("messaging.actions.edit_room_info")}),(0,c.jsx)(Da.Lt.ItemLink,{onClick:function(){return r({type:Ene})},children:(0,a.t)("messaging.actions.invite_member")}),(0,c.jsx)(Da.Lt.ItemLink,{onClick:function(){return r({type:Ine})},children:(0,a.t)("messaging.actions.settings")}),(0,c.jsx)(Da.Lt.ItemLink,{onClick:function(){return r({type:Dne})},children:(0,a.t)("messaging.actions.copy_room_link")}),(0,c.jsx)(Da.Lt.Separator,{})]}),(0,c.jsx)(Da.Lt.ItemLink,{onClick:d,children:null!==o&&void 0!==o&&o.muted?I18n.t("chats_preference.unmute_room"):I18n.t("chats_preference.mute_room")}),(0,c.jsx)(Da.Lt.ItemLink,{onClick:function(){var e=s.filter((function(e){return e.id!==o.id})).some((function(e){return e.admin}));o.admin&&!e&&s.length>1?r({type:Lne}):r({type:Mne})},children:(0,a.t)("messaging.actions.leave_room")}),m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Da.Lt.Separator,{}),(0,c.jsx)(Da.Lt.ItemLink,{hasDanger:!0,onClick:function(){return r({type:Rne})},children:(0,a.t)("messaging.actions.delete_room")})]})]})},Une=function(e){var t=e.chatRoom,r=e.shouldShowRailBar,n=e.toggleShowRailBar,i=(0,l.pm)(),o=(0,d8.C)().goToMessagesRootPath,s=t.uuid,u=t.current_participant,d=(0,f.useMutation)((function(){return vn.M.update({uuid:s,id:u.id,archived:!0},{forReactQuery:!0})}),{onSuccess:function(){i.success((0,a.t)("messaging.actions.removed_conversation"),{duration:"short",shouldUseProgress:!1}),o()},onError:function(){i.error((0,a.t)("request_failure_message"))}}).mutateAsync;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Da.Lt.ItemLink,{onClick:n,children:r?(0,a.t)("messaging.actions.hide_profile"):(0,a.t)("messaging.actions.view_profile")}),(0,c.jsx)(Da.Lt.ItemLink,{onClick:d,children:(0,a.t)("messaging.actions.delete")})]})};function zne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zne(Object(r),!0).forEach((function(t){Zne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hne=function(e,t){switch(t.type){case Ane:return Vne(Vne({},e),{},{isEditGroupModalVisible:!e.isEditGroupModalVisible});case Ene:return Vne(Vne({},e),{},{isAddPeopleModalVisible:!e.isAddPeopleModalVisible});case Rne:return Vne(Vne({},e),{},{isDeleteGroupModalVisible:!e.isDeleteGroupModalVisible});case Lne:return Vne(Vne({},e),{},{isMakeAdminModalVisible:!e.isMakeAdminModalVisible});case Mne:return Vne(Vne({},e),{},{isLeaveGroupModalVisible:!e.isLeaveGroupModalVisible});case Dne:return Vne(Vne({},e),{},{isRoomLinkModalVisible:!e.isRoomLinkModalVisible});case Ine:return Vne(Vne({},e),{},{isSettingsModalVisible:!e.isSettingsModalVisible});default:throw new Error}};function qne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wne=function(e){var t=e.chatRoom,r=void 0===t?{}:t,i=e.refetchChatRoom,o=e.shouldShowRailBar,a=e.toggleShowRailBar,s=(0,dr.k6)(),l=(0,nS.ef)(),u=qne((0,n.useReducer)(Hne,Tne),2),d=u[0],f=u[1],m=r.chat_room_kind===P.g8;return(0,c.jsxs)("div",{className:"flex",children:[l&&(0,c.jsx)("button",{className:"mr-2",type:"button",onClick:function(){return s.push((0,S.yg)())},children:(0,c.jsx)(bt.JO,{type:"20-arrow-left",size:20})}),(0,c.jsx)(Da.Lt,{direction:"bottom-start",button:(0,c.jsxs)(Da.Lt.MenuButton,{children:[(0,c.jsx)(F.y,{children:r.chat_room_name}),(0,c.jsx)(bt.JO,{size:16,type:"caret-down-bold",useWithFillCurrentColor:!0,className:"text-dark"})]}),children:m?(0,c.jsx)(Une,{chatRoom:r,toggleShowRailBar:a,shouldShowRailBar:o}):(0,c.jsx)(Bne,{chatRoom:r,dispatch:f,refetchChatRoom:i})}),(0,c.jsx)(Fne,{chatRoom:r,modalState:d,refetchChatRoom:i,dispatch:f})]})},Qne=function(e){var t=e.chatRoom,r=e.isLoading,n=e.refetchChatRoom,i=(0,P8.x)(),o=i.shouldShowRailBar,s=i.toggleShowRailBar;return(0,c.jsx)("div",{className:"border-primary h-16 w-full border-b px-6 py-4",children:r?(0,c.jsx)(bu.RN,{full:!0,children:(0,c.jsx)(bu.X2,{xxl:!0,extraLong:!0})}):(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(Wne,{chatRoom:t,refetchChatRoom:n,toggleShowRailBar:s,shouldShowRailBar:o}),(0,c.jsx)("button",{type:"submit",className:"mt-0.5",onClick:s,children:(0,c.jsx)(bt.JO,{"aria-label":o?(0,a.t)("chat_space.header.collapse_railbar"):(0,a.t)("chat_space.header.expand_railbar"),className:"text-dark",useWithFillCurrentColor:!0,type:o?"rail-collapse-right":"rail-collapse-left"})})]})})},Kne=function(){var e=(0,dr.UO)().uuid,t=(0,Ere.m)(e),r=t.chatRoom,n=t.isLoading,i=t.refetchChatRoom,o=t.onEventReceive,a=(0,v.wh)().currentCommunityMember;return(0,Sc.s)({channel:"Chats::RoomChannel",chat_room_uuid:null===r||void 0===r?void 0:r.uuid,onMessageReceive:function(e){o(e)},canCreateConnection:Boolean((null===r||void 0===r?void 0:r.uuid)&&(null===a||void 0===a?void 0:a.id))},[null===r||void 0===r?void 0:r.uuid,null===a||void 0===a?void 0:a.id]),(0,c.jsxs)("div",{className:"flex h-[calc(100dvh-40px)] w-full flex-row",children:[(0,c.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,c.jsx)(Qne,{chatRoom:r,isLoading:n,refetchChatRoom:i}),(0,c.jsx)(ene,{chatRoom:r,isLoading:n,refetchChatRoom:i})]}),(0,c.jsx)("div",{id:"rail-bar-header",className:"h-full"})]})},Jne=r(36033),$ne=function(){var e=(0,Jne.z)(),t=(0,dr.k6)();return(0,c.jsxs)("div",{className:"h-18 flex items-center justify-between px-6 pb-[1px]",children:[(0,c.jsx)(y.Z.BodyLg,{weight:"semibold",children:(0,a.t)("sidebar_all_dms")}),e&&(0,c.jsx)(sO.T,{interactive:!1,content:(0,a.t)("new_message"),children:(0,c.jsx)(HO.h,{name:"20-add-lg",iconSize:20,onClick:function(){return t.push((0,S.W9)())},dataTestId:"new-message",iconClassName:"!text-dark",ariaLabel:(0,a.t)("new_message")})})]})},Yne=r(29229),Xne=r(12755),eie=function(){return(0,c.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:(0,c.jsx)(y.Z.LabelSm,{children:(0,a.t)("chat_space.error_message")})})},tie=function(){return(0,c.jsx)("div",{className:"flex h-full w-[320px] flex-col items-center justify-start pt-12",children:(0,c.jsx)(y.Z.LabelSm,{children:(0,a.t)("messaging.no_messages")})})},rie=r(26484),nie=function(e){var t,r=e.isDirect,n=e.chatRoomName,i=e.timestamp,o=e.lastMessage,s=e.currentCommunityMember;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("span",{className:"max-w-[130px]",children:(0,c.jsx)(y.Z.BodySm,{truncate:!0,weight:"font-medium",children:n})}),(0,c.jsx)("span",{className:"mt-[-1px] min-w-[64px]",children:(0,c.jsx)(y.Z.BodyXs,{as:"time",weight:"font-medium",color:"text-light",children:i})})]}),(0,c.jsx)("div",{className:"mt-0.5",children:(0,c.jsx)("p",{className:"text-default !line-clamp-1 flex items-center overflow-hidden hyphens-auto break-words text-sm",children:"".concat(o.sender.community_member_id===(null===s||void 0===s?void 0:s.id)?"".concat((0,a.t)("messaging.you"),": "):r?"":"".concat(o.sender.name,": ")).concat(o.body||(null===(t=o.rich_text_body)||void 0===t?void 0:t.circle_ios_fallback_text))})})]})},iie=function(e){var t=e.isDirect,r=e.otherParticipants,n=e.chatRoomName,i=e.timestamp,o=e.lastMessage,s=e.currentParticipant,l=e.unreadMessagesCount,u=e.currentCommunityMember;return(0,c.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)(rie.q,{isDirect:t,otherParticipants:r}),(0,c.jsx)(nie,{isDirect:t,chatRoomName:n,timestamp:i,lastMessage:o,currentCommunityMember:u})]}),(0,c.jsx)("div",{children:s.muted?(0,c.jsx)(bt.JO,{type:"mute-notifications","aria-label":(0,a.t)("header_v3.muted"),size:14}):l>0&&(0,c.jsx)("span",{className:"bg-messaging-info-blue inline-block h-2 w-2 rounded-full","data-testid":"unread-messages-count"})})]})},oie=function(e){var t=e.children,r=e.uuid;return(0,c.jsx)(sn.OL,{className:"hover:bg-tertiary focus-visible:bg-tertiary flex cursor-pointer items-start justify-between px-4 py-3",to:(0,S.so)({uuid:r}),"data-testid":"chat-room-dm-list",activeClassName:"bg-tertiary",children:t})},aie=function sie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sie(Object(r),!0).forEach((function(t){cie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uie=function(e){var t=e.unreadChatRoomUuids,r=(0,dr.k6)(),i=(0,dr.UO)().uuid,o=(0,v.wh)(),a=o.currentCommunityMember,s=o.isLoading,l=(0,Ba.TC)({openChatRoomUuid:i&&"new"!==i?i:null,uuids:t}),u=l.chatRooms,d=void 0===u?[]:u,f=l.hasNextPage,m=l.isLoading,p=l.onEventReceive,h=l.fetchNextPage;(0,Sc.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){p(e,null===a||void 0===a?void 0:a.id)},community_member_id:null===a||void 0===a?void 0:a.id,canCreateConnection:!0},[d]);var b=s||m,y=(0,n.useMemo)((,[d]);return(0,n.useEffect)((function(){if(!m&&!i)if(y.length>0){var e=y[0].uuid;r.push((0,S.so)({uuid:e}))}else r.push((0,S.W9)())}),[y,r,m,i]),b?(0,c.jsx)(aie,{children:(0,c.jsx)(Q1.gi,{variant:"chat-room-sidebar"})}):y.length?(0,c.jsx)(aie,{children:(0,c.jsx)(nW.Z,{scrollThreshold:.8,next:h,hasMore:f,dataLength:y.length,scrollableTarget:"scrollable-dms-div",className:"h-full overflow-auto",loader:(0,c.jsx)(gd.a,{center:!0}),children:y.map((function(e){var t=e.chat_room_name,r=e.chat_room_kind,n=e.last_message,i=e.current_participant,o=e.other_participants_preview,s=void 0===o?[]:o,l=e.id,u=e.unread_messages_count,d=e.uuid,f=r===P.g8;return(0,c.jsx)(oie,{uuid:d,children:(0,c.jsx)(iie,{chatRoomName:t,lastMessage:n,currentParticipant:i,otherParticipants:s,isDirect:f,unreadMessagesCount:u,timestamp:(0,Xe.TF)(n.created_at),currentCommunityMember:a})},l)}))})}):(0,c.jsx)(aie,{children:(0,c.jsx)(tie,{})})},die=function(e){return(0,c.jsx)(er.S,{renderFunc:eie,children:(0,c.jsx)(uie,lie({},e))})},fie=function(){var e=(0,jre.K)().unreadChatRoomUuids,t=void 0===e?[]:e,r=(0,dr.k6)(),n=t.length;return(0,c.jsxs)(Uo.O.Group,{className:"!h-auto",children:[(0,c.jsx)("div",{className:"border-primary border-b px-6",children:(0,c.jsxs)(Uo.O.List,{children:[(0,c.jsx)(Uo.O,{children:(0,a.t)("messaging.inbox")}),(0,c.jsx)(Uo.O,{onClick:function(){n&&r.push((0,S.so)({uuid:t[n-1]}))},children:(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.t)("messaging.unread"),(0,c.jsx)(Yne.T,{count:(0,Xne.o)(n)})]})})]})}),(0,c.jsxs)(Uo.O.Panels,{children:[(0,c.jsx)(Uo.O.Panel,{className:"overflow-x-hidden",children:(0,c.jsx)(die,{})}),(0,c.jsx)(Uo.O.Panel,{className:"overflow-x-hidden",children:0===n?(0,c.jsx)(tie,{}):(0,c.jsx)(die,{unreadChatRoomUuids:t})})]})]})},mie=function(){return(0,c.jsxs)("div",{className:"border-primary h-full w-[320px] border-r",children:[(0,c.jsx)($ne,{}),(0,c.jsx)(fie,{})]})};function pie(e){return function(e){if(Array.isArray(e))return hie(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return hie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bie=function(e){var t=e.userList,r=e.setUserList,n=function(e){r(e)};return(0,c.jsxs)("div",{className:"user-search__wrapper",children:[t.map((function(e){return e&&(0,c.jsx)(l.Vp,{icon:(0,c.jsx)("div",{className:"pr-2",children:(0,c.jsx)(Pt.sJ,{src:e.avatar_url,name:e.name,size:"5"})}),label:e.name,onClose:function(){return r=e,i=pie(t).filter((),void n(i);var r,i}},e.id)})),(0,c.jsx)(fne,{tags:t,onOptionSelectHandler:function(e){return n(e)},placeHolderText:(0,a.t)("chat_rooms.members_search.start_typing_a_name"),onKeysPress:!0})]})},yie=function(e){var t=e.chatRoom,r=e.isChatPreview,n=void 0!==r&&r,i=e.chatUserSearchRef,o=e.isNewConversation,s=void 0!==o&&o,l=e.userList,u=void 0===l?[]:l,d=e.isChatRoomLoading,f=(0,Mo.k)().shouldShowTrialBanner;return(0,c.jsx)("div",{id:"message-box-container",className:J()("bg-primary flex h-full grow flex-col p-0",{"lg:h-[calc(100vh-64px)]":!n&&!f,"lg:h-[calc(100vh-112px)]":!n&&f,"justify-end":s}),children:(0,c.jsx)(er.S,{renderFunc:function(){return(0,c.jsx)("div",{className:"chat-room__error",children:(0,a.t)("chat_space.error_message")})},children:(0,c.jsx)(Xre,{chatRoom:t,displayRoomName:!1,displayDayChange:!0,isChatPreview:n,chatUserSearchRef:i,userList:u,isChatRoomLoading:d})})})};function vie(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function gie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _ie=function(){var e=gie((0,n.useState)([]),2),t=e[0],r=e[1],i=gie((0,n.useState)(null),2),o=i[0],s=i[1],u=(0,Ba.pB)().findChatRoom,d=(0,Ere.m)(o),f=d.chatRoom,m=d.isLoading,p=(0,l.pm)().error,h=(0,v.Cc)().record.group_messaging_enabled,b=t.length>1?P.RN:P.g8,g=(0,Jne.z)()&&h,x=function(){var e,t=(e=se().mark((function e(){var t,r,n=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.length>0&&void 0!==n[0]?n[0]:[]).length){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,u({kind:b,community_member_ids:t.map((),body:""});case 6:r=e.sent,s(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),"object"===typeof e.t0&&e.t0&&"message"in e.t0&&"string"===typeof e.t0.message&&e.t0.message&&p(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){vie(o,n,i,a,s,"next",e)}function s(e){vie(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,n.useEffect)((function(){if(1===t.length)x(t);else if(t.length>1)if(g){var e=function(){var e=t.filter((function(e){return!(null===e||void 0===e||!e.messaging_enabled)}));return e.length!==t.length&&(p((0,a.t)("community_member.messaging_disabled")),r(e)),e}();x(e)}else p((0,a.t)("messaging.group_messaging_disabled"));else s(null)}),[t,g]);var _=(0,n.useRef)(null);return(0,c.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,c.jsx)("div",{className:"border-primary flex h-16 items-center justify-start border-b px-6 py-5",children:(0,c.jsx)(y.Z.LabelLg,{color:"text-darkest",weight:"semibold",children:(0,a.t)("new_message")})}),(0,c.jsxs)("div",{ref:_,className:"bg-primary border-primary z-[3] flex items-center justify-start border-b px-6 py-3 lg:sticky lg:h-12",children:[(0,c.jsx)("span",{className:"mr-2",children:(0,c.jsx)(y.Z.LabelLg,{color:"text-dark",children:(0,a.t)("messaging.to")})}),(0,c.jsx)(bie,{userList:t,setUserList:r})]}),(0,c.jsx)("div",{className:"bg-primary flex h-[calc(100vh-152px)] flex-col justify-between",children:(0,c.jsx)(yie,{chatRoom:f,chatUserSearchRef:_,isChatPreview:!0,isNewConversation:!0,userList:t,isChatRoomLoading:m})})]})},jie=function(){var e,t,r=(0,dr.UO)().uuid,i=(0,dr.k6)(),o=(0,dr.TH)(),a=(0,d8.C)().goToCommunityRootPath,s="new"===r,u=(0,n.useRef)(null===(e=o.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.path);return(0,c.jsx)(BT.x,{isOpen:!0,contentPortalId:P.vl,onClose:function(){u.current?i.push(u.current):a()},shouldShowCloseButton:!0,children:(0,c.jsx)(BT.x.Body,{wrapperClassName:"flex h-full w-full flex-row",children:(0,c.jsx)(P8.G,{children:(0,c.jsxs)(v.BD,{children:[(0,c.jsx)(mie,{}),r?s?(0,c.jsx)(_ie,{}):(0,c.jsx)(Kne,{}):(0,c.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,c.jsx)(l.aN,{center:!0})})]})})})})},wie=r(24587),Oie=r(47372);function Pie(e){return function(e){if(Array.isArray(e))return Sie(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Sie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kie=function(e){var t=e.chatRooms,r=void 0===t?[]:t,i=e.currentCommunityMemberId,o=e.chatRoomsHasNextPage,s=e.incrementPage,l=(0,n.useMemo)((,[r]),u=(0,n.useMemo)((function(){return function(e){return e.reduce((function(e,t){var r=(0,Xe.H8)(t.last_message.sent_at).day;return e.has(r)?e.set(r,[].concat(Pie(e.get(r)),[t])):e.set(r,[t]),e}),new Map)}(l)}),[l]);if(!l.length)return(0,c.jsx)("div",{className:"h-[calc(100vh-128px)]",children:(0,c.jsx)(Oie.t,{})});return(0,c.jsx)(nW.Z,{style:{overflow:"auto"},scrollThreshold:.8,next:s,hasMore:o,dataLength:l.length,className:"mb-14 px-3 py-6 md:px-6 lg:mb-0",scrollableTarget:"panel",loader:(0,c.jsx)(gd.a,{center:!0}),children:Array.from(u).map((function(e){var t=e[0],r=e[1];return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)("div",{className:"text-darkest mb-3 mt-7 border-none text-xs font-semibold uppercase first:mt-0",children:t}),(0,c.jsx)("div",{className:"bg-primary border-primary divide-y rounded-lg border shadow-sm",children:r.map((function(e){var t,r,n,o,s=e.uuid,l=e.chat_room_name,u=e.chat_room_kind,d=e.last_message,f=e.current_participant,m=void 0===f?{}:f,p=e.other_participants_preview,h=void 0===p?[]:p,b=e.id,y=e.unread_messages_count,v=u===P.g8,g=(0,Xe.H8)(d.sent_at).time;return(0,c.jsx)("div",{className:"border-primary hover:bg-tertiary group overflow-hidden first:rounded-t-lg last:rounded-b-lg",children:(0,c.jsx)(sn.rU,{className:"chat-room-item block cursor-pointer p-4",to:(0,S.so)({uuid:s}),"data-testid":"chat-room-dm-list",children:(0,c.jsxs)("div",{className:"flex items-start justify-between",children:[(0,c.jsxs)("div",{className:"flex",children:[v?(0,c.jsx)("div",{className:"isolate mr-3",children:(0,c.jsx)(Rre.g,{src:null===(t=h[0])||void 0===t?void 0:t.avatar_url,name:null===(r=h[0])||void 0===r?void 0:r.name,status:null===(n=h[0])||void 0===n?void 0:n.status,size:"10"})}):(0,c.jsx)(wie.C,{user1:h[0],user2:h[1]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-darkest text-sm font-medium",children:l}),(0,c.jsx)("div",{className:"mt-0.5",children:(0,c.jsxs)("p",{className:"message-body chat-message-word-wrap",children:[d.sender.community_member_id===i?(0,a.t)("messaging.you"):d.sender.name,": ",d.body||(null===(o=d.rich_text_body)||void 0===o?void 0:o.circle_ios_fallback_text)]})})]})]}),(0,c.jsxs)("div",{className:"flex h-full flex-col items-end justify-start",children:[(0,c.jsx)("p",{className:"text-dark ml-2 flex min-w-[68px] items-center text-sm",children:g}),(0,c.jsx)("div",{className:"mr-1 flex",children:m.muted?(0,c.jsx)("div",{className:"chat-room__mute",children:(0,c.jsx)(bt.JO,{type:"mute-notifications"})}):y>0&&(0,c.jsx)("span",{className:"rounded font-semibold leading-none text-white text-xxs bg-v2-danger p-[3px] min-w-[20px] text-center mt-1 mr-0.5","data-testid":"unread-messages-count",children:y})})]})]})},e.id)},b)}))})]},t)}))})},Cie=r(93101),Nie=function(e){var t=e.children,r=e.isDmsV3MobileViewEnabled,n=(0,dr.k6)();return(0,c.jsx)(_b.a,{disableRightSidebar:!0,disableScroll:!0,children:(0,c.jsx)(q1.W,{fullWidth:!0,fullHeight:!1,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{title:(0,a.t)("direct_messaging")}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(F.y,{children:(0,a.t)("direct_messaging")}),hasBorder:!r,rightContent:r&&(0,c.jsx)(sO.T,{content:(0,a.t)("new_message"),children:(0,c.jsx)(HO.h,{name:"16-add-new",onClick:function(){return n.push((0,S.W9)())},ariaLabel:(0,a.t)("new_message")})})}),t]})})})};function Tie(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Aie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Eie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Eie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Iie=function(){var e=(0,l.pm)().error,t=(0,Mo.k)().shouldShowTrialBanner,r=Aie((0,n.useState)([]),2),i=r[0],o=r[1],s=Aie((0,n.useState)(!1),2),u=s[0],d=s[1],f=Aie((0,n.useState)(null),2),m=f[0],p=f[1],h=(0,v.Cc)().record.group_messaging_enabled,b=void 0!==h&&h,y=(0,d8.C)().goToCommunityRootPath,g=(0,Are.U)().isDmsV3MobileViewEnabled,x=i.length>1?P.RN:P.g8,_=(0,v.wh)(),j=_.currentCommunityMember,w=_.isLoading,O=(0,Ba.TC)({}),S=O.chatRooms,k=O.hasNextPage,C=O.isLoading,N=O.onEventReceive,T=O.fetchNextPage,A=(0,Ba.pB)().findOrCreateChatRoom,E=(0,Ere.m)(m).chatRoom,I=w||C,D=(0,n.createRef)(),L=(0,Jne.z)(),M=L&&b,R=(0,Jne.g)();(0,Sc.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){N(e,null===j||void 0===j?void 0:j.id,S)},community_member_id:null===j||void 0===j?void 0:j.id,canCreateConnection:!0},[S]);var F=function(){var e,t=(e=se().mark((function e(){var t,r,n=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.length>0&&void 0!==n[0]?n[0]:[]).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A({kind:x,community_member_ids:t.map((function(e){return e.id})),body:""});case 5:(r=e.sent)?p(r):(t.pop(),o(t));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Tie(o,n,i,a,s,"next",e)}function s(e){Tie(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,n.useEffect)((function(){!function(){if(1===i.length)F(i);else if(i.length>1)if(M){var t=function(){var t=i.filter((function(e){return!(null===e||void 0===e||!e.messaging_enabled)}));return t.length!==i.length&&(e((0,a.t)("community_member.messaging_disabled")),o(t)),t}();F(t)}else e("Group messaging is disabled by admin.")}()}),[i]),R||y(),g?(0,c.jsx)(Nie,{isDmsV3MobileViewEnabled:g,children:(0,c.jsx)("div",{className:"bg-primary h-full w-full",children:(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:(0,c.jsx)(Cie.G,{})})})}):(0,c.jsxs)(Nie,{children:[L&&(0,c.jsxs)("div",{ref:D,className:"bg-primary border-primary text-dark flex items-center justify-start border-b px-6 py-3 lg:sticky lg:top-16 lg:z-[3] lg:h-12",children:[(0,c.jsx)("span",{className:"mr-2",children:(0,a.t)("messaging.to")}),(0,c.jsx)(bie,{userList:i,setUserList:o,setIsMessageBoxVisible:d,isMessageBoxVisible:u})]}),(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:I?(0,c.jsx)(Q1.gi,{variant:"messaging-list-page"}):m&&i.length>0?(0,c.jsx)("div",{className:J()("lg:h-[calc(100vh-112px)]",{"lg:h-[calc(100vh-160px)]":t}),children:(0,c.jsx)(yie,{chatRoom:E,isChatPreview:!0,chatUserSearchRef:D})}):(0,c.jsx)(kie,{chatRooms:S,currentCommunityMemberId:null===j||void 0===j?void 0:j.id,chatRoomsHasNextPage:k,incrementPage:T})})]})},Die=function(){return(0,c.jsx)(v.BD,{children:(0,c.jsx)(Iie,{})})},Lie=function(){var e=(0,dr.UO)().uuid,t=(0,Ere.m)(e),r=t.chatRoom,n=t.isLoading,i=t.refetchChatRoom,o=(0,P8.x)(),s=o.shouldShowRailBar,l=o.toggleShowRailBar,u=o.RailbarComponent;return(0,c.jsxs)(_b.a,{disableRightSidebar:!0,disableScroll:!0,children:[(0,c.jsx)(q1.W,{fullWidth:!0,fullHeight:!1,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{title:null===r||void 0===r?void 0:r.chat_room_name}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsx)(Wne,{chatRoom:r,refetchChatRoom:i,toggleShowRailBar:l,shouldShowRailBar:s}),rightContent:(0,c.jsx)("button",{type:"submit",className:"mt-0.5",onClick:l,children:(0,c.jsx)(bt.JO,{"aria-label":s?(0,a.t)("chat_space.header.collapse_railbar"):(0,a.t)("chat_space.header.expand_railbar"),className:"text-dark",useWithFillCurrentColor:!0,type:s?"rail-collapse-right":"rail-collapse-left"})}),hasBorder:!0}),(0,c.jsx)("div",{className:"p-0",children:(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:n?(0,c.jsx)(Q1.gi,{variant:"chat-room"}):(0,c.jsx)(yie,{chatRoom:r})})})]})}),s&&!n&&(0,c.jsx)(u,{chatRoom:r,chatRoomUuid:e,refetchChatRoom:i})]})},Mie=function(){return(0,c.jsx)(P8.G,{children:(0,c.jsx)(Lie,{})})},Rie=r(69010);function Fie(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Bie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Uie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zie=function(){var e=(0,Mo.k)().shouldShowTrialBanner,t=(0,l.pm)().error,r=Bie((0,n.useState)([]),2),i=r[0],o=r[1],s=Bie((0,n.useState)(!1),2),u=s[0],d=s[1],f=Bie((0,n.useState)(null),2),m=f[0],p=f[1],h=(0,Rie.p)().findOrCreateChatRoom,b=(0,Ere.m)(m).chatRoom,y=(0,dr.k6)(),g=(0,v.Cc)().record.group_messaging_enabled,x=void 0!==g&&g,_=i.length>1?P.RN:P.g8,j=(0,Are.U)().isDmsV3MobileViewEnabled,w=(0,Jne.z)()&&x,O=function(){var e,t=(e=se().mark((function e(){var t,r,n=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.length>0&&void 0!==n[0]?n[0]:[]).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h({kind:_,community_member_ids:t.map((function(e){return e.id})),body:""});case 5:(r=e.sent)?p(r):(t.pop(),o(t));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Fie(o,n,i,a,s,"next",e)}function s(e){Fie(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,n.useEffect)((function(){!function(){if(1===i.length)O(i);else if(i.length>1)if(w){var e=function(){var e=i.filter(();return e.length!==i.length&&(t((0,a.t)("community_member.messaging_disabled")),o(e)),e}();O(e)}else t("Group messaging is disabled by admin.");else p(null)}()}),[i]);var k=(0,n.createRef)();return(0,c.jsx)(_b.a,{fullWidth:!0,disableRightSidebar:!0,children:(0,c.jsx)(q1.W,{fullWidth:!0,fullHeight:!1,children:(0,c.jsxs)(_b.a.Body,{children:[(0,c.jsx)(A.S,{title:(0,a.t)("new_message")}),(0,c.jsx)(H1.Z,{leftContent:(0,c.jsxs)("div",{className:"flex space-x-2",children:[j&&(0,c.jsx)("button",{className:"flex",type:"button",onClick:children:(0,c.jsx)(bt.JO,{type:"20-arrow-left",size:20})}),(0,c.jsx)(F.y,{children:(0,a.t)("new_message")})]}),hasBorder:!0}),(0,c.jsxs)("div",{ref:k,className:"bg-primary border-primary text-dark flex items-center justify-start border-b px-6 py-3 lg:sticky lg:top-16 lg:z-[3] lg:h-12",children:[(0,c.jsx)("span",{className:"mr-2",children:(0,a.t)("messaging.to")}),(0,c.jsx)(bie,{userList:i,setUserList:o,setIsMessageBoxVisible:d,isMessageBoxVisible:u})]}),(0,c.jsx)(_b.a.Content,{fullWidth:!0,children:(0,c.jsx)("div",{className:J()("bg-primary flex h-[calc(100vh-177px)] flex-col justify-between",{"lg:h-[calc(100vh-112px)]":!e,"lg:h-[calc(100vh-160px)]":e}),children:(0,c.jsx)(yie,{chatRoom:b,isChatPreview:!0,chatUserSearchRef:k,isNewConversation:!0})})})]})})})},Vie=Zie=function(){var e=(0,Are.U)(),t=e.isDmsV3Enabled,r=e.isLoading,n=(0,dr.UO)().uuid;return r?null:t?(0,c.jsx)(jie,{}):n?"new"===n?(0,c.jsx)(Vie,{}):(0,c.jsx)(Mie,{}):(0,c.jsx)(Die,{})},Hie=r(87189),qie=r(20278),Gie=r(86903),Wie=r(75331),Qie=function(){var e=(0,Hie.U)(),t=(0,v.wh)().currentCommunitySettings,r=(null===t||void 0===t?void 0:t.tailwind_posts_enabled)?Wie.Z:Gie.Z,n=(0,v.nT)(),i=n.isLoading,o=n.helpers.findBy({slug:e});return i?null:(0,c.jsx)(v.mE,{spaceId:null===o||void 0===o?void 0:o.id,children:(0,c.jsx)(qie.O,{children:(0,c.jsx)(r.Show,{})})})},Kie=r(68374),Jie=function(e){var t=e.space;return(0,jk.EG)(t)?(0,c.jsx)(Kie.Z.CourseSpace,{},t.id):(0,jk.Ug)(t)?(0,c.jsx)(Kie.Z.ChatSpace,{},t.id):(0,jk.V5)(t)?(0,c.jsx)(Kie.Z.EventsSpace,{},t.id):(0,c.jsx)(Kie.Z.Show,{},t.id)},$ie=function(){var e=(0,Hie.U)(),t=(0,v.nT)().helpers.findBy({slug:e});return(0,fn.isEmpty)(t)?null:(0,c.jsx)(v.mE,{spaceId:null===t||void 0===t?void 0:t.id,children:(0,c.jsx)(qie.O,{disableScroll:(0,jk.Ug)(t),children:(0,c.jsx)(Jie,{space:t})})})},Yie=Xie=function(){var e,t=(0,dr.TH)(),r=(null!==(e=null===t||void 0===t?void 0:t.state)&&void 0!==e?e:{}).prevLocation;return(0,c.jsx)(er.S,{renderFunc:Yie,children:(0,c.jsxs)(dr.rs,{location:null!==r&&void 0!==r?r:t,children:[(0,c.jsx)(Ks.i,{path:"/live/:roomSlug/not_supported",children:(0,c.jsx)(T7,{})}),(0,c.jsx)(Ks.i,{path:"/live/:roomSlug/record",children:(0,c.jsx)(F5,{})}),(0,c.jsx)(Ks.i,{path:"/live/:roomSlug/mobile",children:(0,c.jsx)(N7,{})}),(0,c.jsx)(dr.AW,{path:"/live/:roomSlug/public",children:(0,c.jsx)(H9,{})}),(0,c.jsx)(Ks.i,{path:"/live/:roomSlug",children:(0,c.jsx)(M5,{})}),(0,c.jsx)(dr.AW,{path:"/public/unsubscribe",children:(0,c.jsx)(dte,{})}),(0,c.jsx)(dr.AW,{path:"/two_fa",children:(0,c.jsx)(vre,{})}),(0,c.jsx)(Ks.i,{path:Wte.Fy.onboarding(),exact:!0,children:(0,c.jsx)(_b.a,{disableRightSidebar:!0,children:(0,c.jsx)(T3,{})})}),(0,c.jsx)(Ks.i,{path:["/messages/:uuid","/messages"],children:(0,c.jsx)(Zie,{})}),(0,c.jsx)(Ks.i,{path:"/threads",children:(0,c.jsx)($te,{})}),(0,c.jsx)(Ks.i,{path:"/notifications",component:L6}),(0,c.jsx)(Ks.i,{path:"/bookmarks",component:Kte}),(0,c.jsx)(dr.AW,{path:"/",children:(0,c.jsxs)(dr.rs,{children:[(0,c.jsx)(dr.AW,{path:"/home",exact:!0,children:(0,c.jsx)(E6,{})}),(0,c.jsx)(Ks.i,{component:Nee,path:(0,Wte.UI)(),exact:!0}),(0,c.jsx)(Ks.i,{component:Gte,path:(0,Wte.K9)(),exact:!0}),(0,c.jsx)(Ks.i,{component:y2,path:(0,Wte.gE)(),exact:!0}),(0,c.jsx)(Ks.i,{component:N6.Directory,path:(0,Wte.l3)(),exact:!0}),(0,c.jsx)(Ks.i,{path:"/u/:publicUid",component:mte}),(0,c.jsx)(Ks.i,{path:"/s/:spaceGroupSlug",children:(0,c.jsx)(_b.a,{disableRightSidebar:!0,children:(0,c.jsx)(r9,{})})}),(0,c.jsx)(Ks.i,{exact:!0,component:$ie,path:["/c/:spaceSlug","/c/:spaceSlug/members","/c/:spaceSlug/customize","/c/:spaceSlug/customize/*","/c/:spaceSlug/sections/*","/c/:spaceSlug/edit-lesson/*"]}),(0,c.jsx)(Ks.i,{path:"/c/:spaceSlug/:postSlug",component:Qie}),(0,c.jsx)(Ks.i,{path:"/user",children:(0,c.jsx)(E6,{})})]})})]})})},eoe=["notice","alert","display_community_switcher","display_header","minimal_layout"];function toe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function roe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?toe(Object(r),!0).forEach((function(t){noe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):toe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function noe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ioe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(0,aX.b)();var ooe=(0,er.P)((function(e){var t=e.notice,r=e.alert,i=e.display_community_switcher,o=void 0!==i&&i,a=e.display_header,s=void 0===a||a,u=e.minimal_layout,d=void 0!==u&&u,f=ioe(e,eoe);(0,n.useEffect)((,[]);var m=window.location.pathname!==(0,S.hD)();return(0,c.jsx)(lr.e$,{backendProps:roe({notice:t,alert:r,display_community_switcher:o,minimal_layout:d},f),children:(0,c.jsx)("div",{id:l.BW,className:"bg-secondary","data-testid":"main-app-provider",children:(0,c.jsxs)(hX,{children:[(0,c.jsx)(ur.I,{notice:t,alert:r}),(0,c.jsx)(fX,{}),s&&!d&&m&&(0,c.jsx)(lX.G,{}),o&&(0,c.jsx)(er.S,{children:(0,c.jsx)(Tre,{})}),(0,c.jsx)(Xie,{}),(0,c.jsx)(oX,{}),(0,c.jsx)(V1,{}),(0,c.jsx)(U1,{}),(0,c.jsx)(T,{})]})})})}),Yt.D),aoe=r(22229),soe=r(45578),loe=r.n(soe);function coe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?coe(Object(r),!0).forEach((function(t){doe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):coe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function doe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function foe(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function moe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return poe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return poe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function poe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hoe=(0,n.forwardRef)((function(e,t){var r=e.space,i=e.post,o=e.parent_comment_id,s=e.communityMember,u=e.onNewComment,d=(0,n.useRef)(null),f=moe((0,n.useState)(0),2),m=f[0],p=f[1],h=moe((0,n.useState)(""),2),b=h[0],y=h[1],v=moe((0,n.useState)(!1),2),g=v[0],x=v[1];if(null===i||void 0===i||!i.is_comments_enabled||!s||null===r||void 0===r||!r.id)return null;var _=J()("post__reply",{"reply-to-parent":!!o,"reply-to-post":!o}),j=function(){var e,t=(e=se().mark((function e(t){var r,n,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),b&&!g){e.next=3;break}return e.abrupt("return");case 3:return x(!0),r={comment:{body:b,parent_comment_id:o,post_id:i.id}},e.next=7,(0,Er.t5)((0,S.k3)(),{method:"POST",body:JSON.stringify(r)});case 7:if(!(n=e.sent).ok){e.next=17;break}return y(""),e.next=12,n.json();case 12:a=e.sent,p(m+1),u&&u(uoe(uoe({},a.comment),{},{html:a.comment_html})),window.loadOembed(),x(!1);case 17:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){foe(o,n,i,a,s,"next",e)}function s(e){foe(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,c.jsxs)("div",{ref:d,className:_,onClick:function(){s||window.location.href((0,S.j)({params:{alert:"Hey, there! You need to sign in to write a comment."}}))},onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&j(e)},children:[(0,c.jsx)(Pt.sJ,{src:s.avatar_url,name:s.name,size:"10"}),(0,c.jsxs)("form",{onSubmit:j,children:[(0,c.jsx)(_h,{ref:t,id:"comment-body-".concat(i.id),placeholder:(0,a.t)("write_a_comment"),name:"body",is_private_space:r.is_private,space_id:r.id,dataIsPrivateSpace:r.is_private,dataSpaceId:r.id,value:b,onChange:,m),(0,c.jsx)("div",{className:"btn-post-reply absolute bottom-4 right-4",children:(0,c.jsx)(l.zx,{variant:"primary",type:"submit",disabled:!b,children:(0,a.t)("comments.post")})})]})]})}));hoe.displayName="Form";var boe=function(e){window.setTimeout((function(){var t=document.querySelector(voe(e));if(t){t.querySelector("input").setAttribute("checked",!0),t.classList.add("just-added"),t.parentNode.parentNode.classList.add("parent-just-added"),t.scrollIntoView()}}),500)},yoe=function(){return(window.location.hash||"").split("#comment_wrapper_")[1]},voe=function goe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?goe(Object(r),!0).forEach((function(t){_oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):goe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function joe(e){return function(e){if(Array.isArray(e))return Soe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Poe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function woe(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Ooe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Poe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Poe(e,t){if(e){if("string"===typeof e)return Soe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Soe(e,t):void 0}}function Soe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var koe=function(e){var t=Ooe((0,n.useState)(e.comments||[]),2),r=t[0],i=t[1],o=Ooe((0,n.useState)(e.parent_comment_id?0:1),2),s=o[0],l=o[1],u=!e.parent_comment||parseInt(e.parent_comment.replies_count,10)>r.length,d=Ooe((0,n.useState)(u),2),f=d[0],m=d[1],p=Ooe((0,n.useState)(!e.parent_comment_id&&f),2),h=p[0],b=p[1],y=Ooe((0,n.useState)(!1),2),v=y[0],g=y[1];(0,n.useEffect)((function(){var t=function(){var t,n=(t=se().mark((function t(){var n,o,a;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f){t.next=2;break}return t.abrupt("return");case 2:if(0!==s||!r.length){t.next=4;break}return t.abrupt("return");case 4:return n={page:s||1,per_page:10},e.parent_comment_id&&(n.parent_comment_id=e.parent_comment_id),t.next=10,fetch(S.av.comments.index({postId:e.post.id,params:n}));case 10:if(!(o=t.sent).ok){t.next=22;break}return t.next=14,o.json();case 14:a=t.sent,i(loe()([].concat(joe(r),joe(a.records)),"id")),m(a.has_next_page),b(!1),e.onPageChange&&e.onPageChange(s),setTimeout(window.initialiseTippy,300),t.next=23;break;case 22:b(!1);case 23:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){woe(o,n,i,a,s,"next",e)}function s(e){woe(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();t()}),[s]),(0,n.useEffect)((function(){var t;h||v||e.parent_comment_id||(g(!0),(t=yoe())&&boe(t))}),[h,v,e.parent_comment_id]);var x=e.parent_comment_id?(0,a.t)("comments.list.show_more_replies"):(0,a.t)("comments.list.show_more_comments"),_=e.parent_comment_id?"load-more__replies":"btn btn-secondary load-more__comments";return(0,c.jsxs)(c.Fragment,{children:[r.map((),h&&(0,c.jsx)(W.m,{}),!h&&f&&(0,c.jsx)("div",{className:"load-more",children:(0,c.jsx)("a",{href:"#load-more",onClick:className:_,children:x})}),Boolean(null===e||void 0===e?void 0:e.showReplyForm)&&(0,c.jsx)(hoe,{post:e.post,space:e.space,communityMember:e.communityMember,parent_comment_id:e.parent_comment_id,onNewComment:isPost:!0,ref:e.formRef})]})};function Coe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Noe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Toe=function(e){return e.post.is_comments_enabled?(0,c.jsx)(koe,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Coe(Object(r),!0).forEach((function(t){Noe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Coe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):null},Aoe=["comment","communityMember","defaultShowReplyForm"];function Eoe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ioe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eoe(Object(r),!0).forEach((function(t){Doe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eoe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Doe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Loe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Moe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Moe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Moe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Roe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Foe=function(e){var t=e.comment,r=e.communityMember,i=e.defaultShowReplyForm,o=void 0!==i&&i,a=Roe(e,Aoe),s=(0,n.useRef)(null),l=window.location.href,u=(0,n.useCallback)((function(e){null!==e&&(0,aoe.J)(e)}),[l]),d=Loe((0,n.useState)(o),2),f=d[0],m=d[1],p=Loe((0,n.useState)(),2),h=p[0],b=p[1],y=(0,n.useRef)(null);(0,n.useEffect)((function(){if(s.current){var e=function(e){if(e.preventDefault(),r){m(!0);var t=e.currentTarget.dataset,n=t.sgid,i=t.content,o=t.name;n&&setTimeout((function(){if(y.current.focus(),y.current.shouldInsert(n)){var e=y.current.editorRef.current.editor.composition;e.attachments.forEach((function(t){e.removeAttachment(t)})),y.current.insertMention({sgid:n,content:i,name:o})}}),100)}else window.location.push((0,S.j)({params:{notice:I18n.t("comments.log_in_to_add_a_comment")}}))};return s.current.querySelectorAll('[data-action="toggle-reply-box"]').forEach((function(t){t.addEventListener("click",e)})),}),[s,m,f,h,y,y.current]);var v=J()("post--comment comment--".concat(t.id)),g="comment_wrapper_".concat(t.id);return(0,c.jsxs)("div",{ref:s,className:v,id:g,children:[(0,c.jsx)("div",{"data-controller":"trix-attachment-preview",children:(0,c.jsx)("div",{className:"text-dark",ref:u})}),Boolean(!(null!==t&&void 0!==t&&t.parent_comment_id))&&(0,c.jsx)("div",{className:"post__replies",children:(0,c.jsx)(Toe,Ioe(Ioe({},a),{},{communityMember:r,comments:t.replies,hasNextPage:t.replies_count>1,parent_comment_id:t.id,parent_comment:t,showReplyForm:f,onPageChange:b,formRef:y}))})]})},Boe=["post"],Uoe=["post","id"];function zoe(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Voe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zoe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zoe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zoe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hoe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hoe(Object(r),!0).forEach((function(t){Goe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hoe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Goe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Woe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Qoe=function(e){var t=e.post,r=e.id,i=Woe(e,Uoe),o=Voe((0,n.useState)(!0),2),s=o[0],l=o[1],u=Voe((0,n.useState)(null),2),d=u[0],f=u[1];return(0,n.useEffect)((function(){var e=function(){var e,n=(e=se().mark((function e(){var n,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S.av.comments.commentHierarchy({postId:t.id,id:r}));case 2:if(!(n=e.sent).ok){e.next=13;break}return e.next=6,n.json();case 6:i=e.sent,f(i),l(!1),setTimeout(window.initialiseTippy,300),boe(r),e.next=14;break;case 13:l(!1);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){zoe(o,n,i,a,s,"next",e)}function s(e){zoe(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[]),s?(0,c.jsx)(W.m,{}):d?(0,c.jsx)(Foe,qoe({comment:d,defaultShowReplyForm:!0,post:t,id:r},i),d.id):(0,c.jsx)("div",{className:"post__comment-not-found alert alert-warning",children:(0,a.t)("comments.hierarchy.not_found")})},Koe=hoe,Joe=Toe;const $oe={Form:hoe,CommentsList:Joe,CommentHierarchy:function(e){var t=e.post,r=Woe(e,Boe);return null!==t&&void 0!==t&&t.is_comments_enabled?(0,c.jsx)(Qoe,qoe({post:t},r)):null}};var Yoe={zIndex:1e3},Xoe=function(e){var t=e.isThirdParty,r=void 0!==t&&t,n=r?(0,a.t)("cookie_warning.third_party_cookies_disabled"):(0,a.t)("cookie_warning.cookies_disabled"),i=r?(0,a.t)("cookie_warning.how_enable_third_party_cookies"):(0,a.t)("cookie_warning.how_enable_cookies");return(0,c.jsx)("div",{className:"h-full w-full",style:Yoe,children:(0,c.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,c.jsxs)("div",{className:"alert-wrapper",children:[(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",role:"img",className:"alert-icon flex-no-shrink fill-current",children:(0,c.jsx)("path",{d:"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2z"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{children:n}),(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:"https://www.whatismybrowser.com/guides/how-to-enable-cookies/auto",target:"_parent",children:i})})]})]})})})},eae=r(72622),tae=r(13997),rae=r(23322),nae=r(32917),iae=r(32373),oae=function(){return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"homepage__nav",children:(0,c.jsx)("h2",{className:"homepage__title","data-testid":"space-title-name",children:(0,a.t)("home_page.title")})}),(0,c.jsx)("div",{className:"space__gated locked-pane","data-testid":"post_section",children:(0,c.jsx)("h3",{children:(0,a.t)("landing_page.settings.empty_suggested_spaces_text")})})]})},aae=function(){var e=(0,rae.R)(),t=e.spaces,r=void 0===t?[]:t,i=e.fetchSpaceSuggestions,o=e.participatingSpacesIds,s=e.spacesHasNextPage,l=e.setParticipatingSpacesIds,u=(o||{}).size,d=void 0===u?0:u,f=(null===r||void 0===r?void 0:r.length)||0;(0,n.useEffect)((,[]);var m=p=(0,n.useMemo)((function(){return Math.max(3-d,0)}),[d]);return(0,n.useMemo)((,[f,p])?(0,c.jsxs)("div",{className:"suggested-spaces",children:[(0,c.jsxs)("div",{className:"suggested-spaces__header",children:[(0,c.jsxs)("div",{className:"header__left",children:[(0,c.jsx)("div",{className:"header__title",children:p>0?(0,c.jsx)("h2",{children:(0,a.t)("home_page.suggested_spaces.join_count_spaces",{count:p})}):(0,c.jsx)("h2",{children:(0,a.t)("home_page.suggested_spaces.you_are_ready")})}),(0,c.jsx)("div",{className:"header__subtitle",children:p>0?(0,a.t)("home_page.suggested_spaces.to_get_started"):(0,a.t)("home_page.suggested_spaces.click_continue")})]}),(0,c.jsx)("div",{className:"header__right",children:(0,c.jsx)("button",{type:"button",className:"btn btn-primary",disabled:o.size<3,onClick:function(){return window.location.reload()},children:(0,a.t)("home_page.suggested_spaces.continue")})})]}),(0,c.jsx)("div",{className:"suggested-spaces__listing",children:r.map((function(e){return(0,c.jsx)(iae.p,{id:e.id,url:e.url,emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,name:e.name,totalMembers:e.total_members,handleJoinSpace:m},e.id)}))}),s&&(0,c.jsx)(nae.C,{fetchNewPage:initialPage:2})]}):(0,c.jsx)(oae,{})},sae=function(e){var t=e.title,r=e.description;return(0,c.jsxs)("div",{className:J()("welcome-banner__content-wrapper",{"has-title":t.length>0}),children:[t&&(0,c.jsx)("h1",{className:"welcome-banner__title","data-testid":"welcome-banner-title",children:t}),r&&(0,c.jsx)("div",{className:"welcome-banner__content",children:(0,c.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})})]})},lae=r(98222),cae=function(e){var t=e.isVideo,r=void 0!==t&&t,n=e.mediaUrl;return r?(0,c.jsx)("div",{className:"welcome-banner__video",children:(0,c.jsx)("div",{className:"video-content",children:(0,c.jsx)(lae.n,{url:n})})}):(0,c.jsx)("div",{className:"welcome-banner__image",children:(0,c.jsx)("div",{className:"image-content",children:(0,c.jsx)("img",{alt:"",src:n})})})},uae=function(e){var t=e.community_member_id,r=(0,rae.R)(),i=r.isWelcomeBannerVisible,o=r.bannerData,a=r.fetchBannerData,s=r.setWelcomeBannerPreference,l=o.is_video,u=o.media_url,d=o.title,f=o.description,m=o.allow_close;(0,n.useEffect)((function(){a()}),[]);return i?(0,c.jsx)("div",{className:"welcome-banner",children:(0,c.jsxs)("div",{className:"welcome-banner__inside",children:[m&&(0,c.jsx)("button",{type:"button",className:"welcome-banner__close",onClick:children:(0,c.jsx)(bt.JO,{type:"close"})}),u&&(0,c.jsx)("div",{className:"welcome-banner__feature",children:(0,c.jsx)(cae,{isVideo:l,mediaUrl:u})}),(d||f)&&(0,c.jsx)(sae,{title:d,description:f})]})}):null},dae=r(29647),fae=r(72831);function mae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mae(Object(r),!0).forEach((function(t){hae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bae=function(){var e=(0,rae.R)(),t=e.posts,r=e.fetchPosts,i=(0,v.wh)(),o=(0,Ra.r)().show;return(0,n.useEffect)((function(){r()}),[]),t.length>0?(0,c.jsxs)("div",{className:"sidebar__block sidebar__right trending-posts block",children:[(0,c.jsx)("div",{className:"block__title",children:(0,c.jsx)("h4",{children:(0,a.t)("trending_posts")})}),(0,c.jsx)("div",{className:"block__content",children:(0,c.jsx)("ul",{className:"trending-posts__post-list",children:t.map((function(e){var t=(0,dae.H)({publicUid:e.author.public_uid,showMemberProfileDrawer:o,isProfileDrawerEnabled:(0,fae.i)(i)});return(0,c.jsx)("li",{children:(0,c.jsxs)("div",{className:"trending-posts__post",children:[!e.hide_meta_info&&(0,c.jsx)("div",{className:"trending-posts__avatar",children:(0,c.jsx)("a",pae(pae({},t),{},{children:(0,c.jsx)(Pt.sJ,{src:e.author.avatar_url,name:e.author.name,size:"10"})}))}),(0,c.jsxs)("div",{className:"trending-posts__content",children:[(0,c.jsx)("a",{href:e.show_path,className:"trending-posts__post-name",children:e.name}),!e.hide_meta_info&&(0,c.jsx)("a",pae(pae({},t),{},{className:"trending-posts__author-name",children:e.author.name}))]})]})},e.id)}))})})]}):null},yae=r(55797),vae=function(e){var t=e.tooltipText,r=e.text;return!e.hide&&(0,c.jsx)(sO.T,{content:t,className:"cursor-pointer pr-3",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-default",children:r})})},gae=r(85244),xae=r(6364),_ae=r(73097),jae=new f.QueryClient(p.Vr);const wae={List:function(e){var t=e.canCreate;return(0,c.jsx)(l.VW,{children:(0,c.jsx)(f.QueryClientProvider,{client:jae,children:(0,c.jsx)(Xr,{canCreate:t})})})}};var Oae=new f.QueryClient(p.Vr),Pae=r(86994),Sae=r(91980),kae=r(97991);function Cae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Nae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tae=(0,n.createContext)({});Tae.displayName="BulkImportTrialPaywallSubscriptionFormContext";var Aae=function(e){var t=e.paywallId,r=e.paywallPriceId,i=e.paywallTrialDays,o=e.paywallCouponCode,a=e.skipDateValidations,s=e.hideNotifyMemberForm,l=e.children,u=Cae((0,n.useState)(null!==t&&void 0!==t?t:""),2),d=u[0],f=u[1],m=Cae((0,n.useState)(null!==r&&void 0!==r?r:""),2),p=m[0],h=m[1],b=Cae((0,n.useState)(null!==i&&void 0!==i?i:""),2),y=b[0],v=b[1],g=Cae((0,n.useState)(null!==o&&void 0!==o?o:""),2),x={paywallId:d,setPaywallId:f,paywallPriceId:p,setPaywallPriceId:h,paywallTrialDays:y,setPaywallTrialDays:v,paywallCouponCode:g[0],setPaywallCouponCode:g[1],isPaywallLoading:(0,F0.O)({communityMemberId:null,status:a?kae.n:[Hi.Tl.ACTIVE]}).paywallsListQuery.isLoading,skipDateValidations:Boolean(a),hideNotifyMemberForm:s};return(0,c.jsx)(Tae.Provider,{value:x,children:l})},Eae=Iae=r(66019),Dae=function(e){var t=e.label,r=void 0===t?"":t,n=e.children;return(0,c.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,c.jsx)("div",{className:"pb-2",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:r})}),n]})},Lae=function(e){var t=e.name,r=e.options,n=e.onChange,i=void 0===n?fn.noop:n,o=e.disabled,a=void 0!==o&&o,s=e.value,l=void 0===s?"":s;return(0,c.jsx)("select",{className:"disabled:bg-secondary form-control w-full",name:t,onChange:i,disabled:a,value:l,children:r.map(()})},Mae=function(){var e=Eae(),t=e.paywallId,r=e.paywallCouponCode,i=e.setPaywallCouponCode,o=e.skipDateValidations,s=(0,Iae.n)({paywallId:t,selectCouponString:(0,a.t)("bulk_import_page.paywall.choose_coupon"),couponStatuses:o?Iae.m:[hr.DP.ACTIVE],skipDateValidations:o}).couponCodeOptions,l=(0,n.useRef)(t);return(0,n.useEffect)((function(){l.current!==t&&(i(""),l.current=t)}),[t,i]),(0,c.jsx)(Dae,{label:(0,a.t)("create_paywall_subscription_modal.form.coupon"),children:(0,c.jsx)(Lae,{name:"paywall[paywall_coupon_code]",options:s,disabled:1===s.length,onChange:function(e){var t;i(null!==(t=e.target.value)&&void 0!==t?t:r)},value:r})})};function Rae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bae=function(e){var t=e.disabled,r=void 0!==t&&t,i=Eae().hideNotifyMemberForm,o=Rae((0,n.useState)(!1),2),s=o[0],u=o[1];return i?null:(0,c.jsxs)("div",{className:"flex flex-col gap-y-4 pt-8",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:(0,a.t)("bulk_import_page.paywall.notify_member")}),(0,c.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,c.jsx)(l.Zh,{field:"paywall[paywall_send_notification_subscription_created_by_admin]",disabled:r,value:s,onChange:),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("span",{children:(0,a.t)("bulk_import_page.paywall.notify_member_description")})})]})]})};function Uae(e){return function(e){if(Array.isArray(e))return zae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return zae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vae={label:(0,a.t)("bulk_import_page.paywall.choose_paywall"),value:""},Zae=function(){var e=Eae(),t=e.paywallId,r=e.setPaywallId,n=e.skipDateValidations,i=(0,kae.h)({communityMemberId:null,paywallStatuses:n?kae.n:[Hi.Tl.ACTIVE]}).paywallOptions;return(0,c.jsx)(Dae,{label:(0,a.t)("create_paywall_subscription_modal.form.paywall_id"),children:(0,c.jsx)(Lae,{name:"paywall[paywall_id]",options:[Vae].concat(Uae(i)),onChange:function(e){var n;r(null!==(n=e.target.value)&&void 0!==n?n:t)},value:t})})},Hae=r(58447);function qae(e){return function(e){if(Array.isArray(e))return Gae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Gae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wae={label:(0,a.t)("bulk_import_page.paywall.choose_term"),value:""},Qae=function(){var e=Eae(),t=e.paywallId,r=e.paywallPriceId,n=e.setPaywallPriceId,i=(0,Sae.U)().paywallsIndex,o=(0,Hae.n)({paywall:i[t]}).paywallPriceOptions;return(0,c.jsx)(Dae,{label:(0,a.t)("create_paywall_subscription_modal.form.paywall_price_id"),children:(0,c.jsx)(Lae,{name:"paywall[paywall_price_id]",options:[Wae].concat(qae(o)),disabled:0===o.length,onChange:function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:r)},value:r})})},Kae=r(49729),Jae=function(){var e=Eae(),t=e.paywallId,r=e.paywallTrialDays,i=e.setPaywallTrialDays,o=""===t,s=(0,n.useRef)(t);return(0,n.useEffect)((function(){s.current!==t&&(i(""),s.current=t)}),[t,i]),(0,c.jsx)(Dae,{label:(0,a.t)("create_paywall_subscription_modal.form.trial_days_toggle"),children:(0,c.jsx)(Kae.I,{name:"paywall[paywall_trial_days]",suffix:(0,a.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:o,otherClassName:J()("",{"!opacity-100 !bg-secondary":o}),value:r,onChange:function(e){var t=""===e.target.value?NaN:Number(e.target.value);isNaN(t)?i(""):t<JB.dy?i(1):t>JB.ut?i(JB.ut):i(t)}})})},$ae=function(){return Eae().isPaywallLoading?(0,c.jsx)(gd.a,{}):(0,c.jsxs)("div",{className:"flex flex-col pb-6",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,c.jsx)(Zae,{}),(0,c.jsx)(Qae,{})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,c.jsx)(Mae,{}),(0,c.jsx)(Jae,{})]}),(0,c.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,c.jsx)(Bae,{})})]})},Yae=r(29710),Xae=r(86664),ese=r(81196),tse=r(88992),rse=r(43711),nse=r(57356),ise=function(e){var t=e.name,r=e.addon,n=e.className,i=e.children,o=e.optional;return(0,c.jsxs)("div",{className:J()(n,"flex flex-col"),children:[(0,c.jsxs)("div",{className:"mb-1 flex flex-row items-center",children:[(0,c.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",children:s().t("paywall_checkout.form.fields.".concat(t))}),o&&(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsx)(l.ZT.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(s().t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),i]})},ose={message:s().t("paywall_checkout.form.errors.payment_general_error")},ase={message:s().t("paywall_checkout.form.errors.stripe_connection_failed")},sse=lse=function(e,t){var r=t.loginUrl,n=t.billingUrl;return{USER_LOGIN_REQUIRED:{disablePayButton:!1,type:"warning",existingAccount:!0,message:s().t("paywall_checkout.form.errors.existing_account",{sign_in_url:r})},USER_FORM_ERROR:{message:s().t("paywall_checkout.form.errors.user_error"),disablePayButton:!1},PAYWALL_ALREADY_PURCHASED:{alreadyPurchased:!0,type:"warning",message:s().t("paywall_checkout.form.errors.already_purchased",{billing_url:n})},PROCESSOR_ERROR:{message:e.message||s().t("paywall_checkout.form.errors.payment_general_error")},INVALID_COUPON:{message:e.message}}[e.error_details]||ose},cse=function(e){return(0,Er.t5)(S.av.communityMemberCharge.show({processorId:e}),{method:"GET"})},use=r(95724);function dse(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function fse(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){dse(o,n,i,a,s,"next",e)}function s(e){dse(o,n,i,a,s,"throw",e)}a(void 0)}))}}function mse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mse(Object(r),!0).forEach((function(t){hse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bse(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yse(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yse(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yse(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vse=function(){var e=(0,pr.Gc)().watch,t=(0,rse.Y)(),r=t.currentUser,i=t.currentCommunity,o=t.alreadyPurchased,a=t.checkoutConfirmationUrl,l=t.loginUrl,c=t.communityRootUrl,u=t.paywall,d=t.couponsEnabled,f=t.getSelectedPrice,m=t.previewMutation,p=t.paymentError,h=t.setPaymentError,b=bse((0,n.useState)(!1),2),y=b[0],v=b[1],g=bse((0,n.useState)(!1),2),x=g[0],_=g[1],j=(0,Xae.useStripe)(),w=(0,Xae.useElements)(),O=e(),P=O.email,k=O.password,C=O.name,N=O.termsOfService,T=O.community_member_billing_info_address_attributes_complete,A=f(),E="active"==u.status,I=!A.trial_enabled||A.trial_requires_upfront_payment||u.trial_requires_card,D=!T||!r&&(!C||!P||!k||!N)||!(!I||y)||!E||p.disablePayButton||o&&!u.can_be_repurchased||m.isLoading||m.isError,L=function(e){var t=e.isPaywallActive,r=e.selectedPrice,n=e.preview;return t&&r?null!==r&&void 0!==r&&r.trial_enabled?null!==r&&void 0!==r&&r.trial_requires_upfront_payment?s().t("paywall_checkout.form.buttons.paid_trial"):s().t("paywall_checkout.form.buttons.trial"):0===(null===n||void 0===n?void 0:n.amount_due)&&null!==r&&void 0!==r&&r.display_interval?s().t("paywall_checkout.form.buttons.subscribe"):0!==(null===n||void 0===n?void 0:n.amount_due)||null!==r&&void 0!==r&&r.display_interval?(null===n||void 0===n?void 0:n.amount_due)>0?"".concat(s().t("paywall_checkout.form.buttons.pay")," ").concat(n.amount_due_as_currency):"".concat(s().t("paywall_checkout.form.buttons.pay")," ").concat(r.display_amount_with_currency):s().t("paywall_checkout.form.buttons.continue"):s().t("paywall_checkout.form.buttons.draft_pay")}({isPaywallActive:E,selectedPrice:A,preview:m.data}),M=function(e){var t=e.cardInfoComplete,r=e.checkoutConfirmationUrl,n=e.communityRootUrl,i=e.currentCommunity,o=e.currentUser,a=e.elements,s=e.handleError,l=e.isCardInfoRequired,c=e.loginUrl,u=e.selectedPrice,d=e.setCardInfoComplete,f=e.setProcessingPayment,m=e.stripe,p=h=function(){var e=fse(se().mark((function e(t,r){var n,i,o,a,l,c,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payment_intent_processor_id,i=t.invoice_processor_id,!(r>30)){e.next=5;break}return console.error("Error: Payment polling timed out"),s(ose),e.abrupt("return");case 5:return o=null!==n&&void 0!==n?n:i,e.next=8,cse(o);case 8:if(!(a=e.sent).ok){e.next=16;break}return e.next=12,a.json();case 12:if(l=e.sent,!(0,Qg.Om)(l)){e.next=16;break}return null===(c=window.webview)||void 0===c||null===(u=c.paymentSuccessful)||void 0===u||u.call(c),e.abrupt("return",window.open(p(o),"_self"));case 16:return e.next=18,new Promise(();case 18:return e.next=20,h(t,r+=1);case 20:case"end":return e.stop()}}),e)})));return (),b=function(){var e=fse(se().mark((function e(t){var r,n,i,o,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payment_intent_processor_id,n=t.payment_intent_client_secret,m&&a){e.next=4;break}return s(ase),e.abrupt("return");case 4:if(r||n){e.next=8;break}return e.next=7,h(t,0);case 7:case 23:return e.abrupt("return");case 8:return e.next=10,m.retrievePaymentIntent(n);case 10:if(!(i=e.sent).error){e.next=15;break}return console.error("Error: Payment intent error"),s({message:i.error.message,disablePayButton:!0}),e.abrupt("return");case 15:if("canceled"!==(o=i.paymentIntent).status){e.next=20;break}return console.error("Error: Payment intent canceled"),s(ose),e.abrupt("return");case 20:if("succeeded"!==o.status){e.next=24;break}return e.next=23,h(t,0);case 24:return e.next=26,m.confirmCardPayment(t.payment_intent_client_secret,{payment_method:{card:a.getElement(Xae.CardElement)}});case 26:if(!(l=e.sent).error){e.next=32;break}console.error("Error: Card payment confirmation error"),s({message:l.error.message,disablePayButton:!1}),e.next=39;break;case 32:if("succeeded"===l.paymentIntent.status){e.next=37;break}console.error("Error: Payment intent did not succeed"),s(ose),e.next=39;break;case 37:return e.next=39,h(t,0);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=fse(se().mark((function e(t){var r,o,d,h,y,v,g,x,_,j,w;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,sse()&&(r.referral_metadata=sse()),f(!0),e.prev=3,!l){e.next=33;break}return e.next=7,use.k.prepare(i.id);case 7:if((o=e.sent).ok){e.next=15;break}return e.next=11,o.json();case 11:return d=e.sent,s(lse(d,{sign_in_url:c,billingUrl:"".concat(n).concat(S.G3.billing.slice(1))})),f(!1),e.abrupt("return");case 15:return e.next=17,o.json();case 17:return h=e.sent,y=h.setup_intent.client_secret,e.next=21,m.retrieveSetupIntent(y);case 21:if((v=e.sent).setupIntent&&"succeeded"===v.setupIntent.status){e.next=26;break}return e.next=25,m.confirmCardSetup(y,{payment_method:{card:a.getElement(Xae.CardElement)}});case 25:v=e.sent;case 26:if(!v.error){e.next=31;break}return console.error("Error: card setup error"),s({message:v.error.message,disablePayButton:!1}),f(!1),e.abrupt("return");case 31:g=v.setupIntent.payment_method,r.payment_method_processor_id=g;case 33:return e.next=35,use.k.create({formData:r});case 35:if(!(x=e.sent).ok){e.next=47;break}return e.next=39,x.json();case 39:if(_=e.sent,!u.trial_enabled){e.next=43;break}return j=p(_.subscription_processor_id),e.abrupt("return",window.open(j,"_self"));case 43:return e.next=45,b(_);case 45:e.next=52;break;case 47:return e.next=49,x.json();case 49:w=e.sent,console.error("Error: checkout/create error"),s(lse(w,{loginUrl:c,billingUrl:"".concat(n).concat(S.G3.billing.slice(1))}));case 52:e.next=59;break;case 54:e.prev=54,e.t0=e.catch(3),(0,aX.d)(e.t0),console.error("Error: unexpected error occurred: ",e.t0),s(ose);case 59:f(!1);case 60:case"end":return e.stop()}}),e,null,[[3,54]])})));return function(t){return e.apply(this,arguments)}}();return{verifyPayment:h,processPaymentInStripe:b,onSubmit:y,handleOnChangeCard:function(e){e.complete?d(!0):t&&d(!1)},handleOnReadyCard:}({cardInfoComplete:y,checkoutConfirmationUrl:a,communityRootUrl:c,currentCommunity:i,currentUser:r,elements:w,handleError:function(e){h(pse(pse({},{disablePayButton:!0,type:"danger",existingAccount:!1,alreadyPurchased:!1,message:null}),e))},isCardInfoRequired:I,loginUrl:l,selectedPrice:A,setCardInfoComplete:v,setProcessingPayment:_,stripe:j});return{paymentError:p,processingPayment:x,submitDisabled:D,selectedPrice:A,currentUser:r,stripe:j,loginUrl:l,communityRootUrl:c,payButtonLabel:L,alreadyPurchased:o,couponsEnabled:d,isCardInfoRequired:I,handleOnChangeCard:M.handleOnChangeCard,handleOnReadyCard:M.handleOnReadyCard,onSubmit:M.onSubmit}},gse=function(){var e=(0,rse.Y)(),t=e.currentUser,r=e.currentCommunityMember||t;return t?(0,c.jsxs)("div",{className:"flex flex-row items-center gap-x-2 rounded border border-gray-200 bg-gray-50 px-3 py-4","data-testid":"checkout-form-account-details",children:[(0,c.jsx)(Pt.sJ,{src:r.avatar_url,name:r.name,size:"10"}),(0,c.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"medium","data-testid":"checkout-form-account-details-name",children:r.name}),(0,c.jsx)(l.ZT.LabelXs,{weight:"medium","data-testid":"checkout-form-account-details-email",children:r.email})]})]}):null},xse=["className","error"];function _se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_se(Object(r),!0).forEach((function(t){wse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ose(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Pse=(0,n.forwardRef)((function(e,t){var r=e.className,n=e.error,i=void 0!==n&&n,o=Ose(e,xse);return(0,c.jsx)("input",jse(jse({className:J()(r,{"border-red-600 focus:border-red-600":i},"placeholder:text-light h-11 grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0 placeholder:opacity-100 focus:border focus:border-gray-500 focus:shadow-none focus:outline-0 focus:ring-0")},o),{},{ref:t}))}));function Sse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sse(Object(r),!0).forEach((function(t){Cse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Pse.displayName="CheckoutFormInput";var Nse=function(e){var t=e.autoFocus,r=void 0!==t&&t,n=e.className,i=e.name,o=e.placeholder,s=e.options,u=void 0===s?{}:s,d=e.type,f=(0,pr.Gc)(),m=f.register,p=f.formState.errors[i];return(0,c.jsxs)("div",{className:J()(n,"flex flex-col"),children:[(0,c.jsx)(Pse,kse({autoFocus:r,type:d,error:!!p,placeholder:o},m(i,u))),p&&(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"semibold",color:"text-red-600",children:(0,a.t)("paywall_checkout.form.errors.".concat(i,"_").concat(String(p.type)))})})]})},Tse=function(){var e=(0,rse.Y)(),t=e.currentUser,r=e.loginUrl;return t?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ise,{name:"email",children:(0,c.jsx)(Nse,{type:"text",name:"email",autoFocus:!0,options:{required:!0,pattern:Jp.CU}})}),(0,c.jsx)(ise,{name:"password",children:(0,c.jsx)(Nse,{type:"password",name:"password",options:{required:!0,pattern:Jp.zU}})}),(0,c.jsxs)(l.ZT.BodyXs,{weight:"regular",children:[(0,a.t)("paywall_checkout.have_an_account"),(0,c.jsx)("a",{href:r,"data-testid":"checkout-form-sign-in-link",children:(0,a.t)("paywall_checkout.form.buttons.sign_in")})]})]})},Ase=function(){var e=(0,rse.Y)(),t=e.paywall,r=e.communityRootUrl,n=e.alreadyPurchased,i=e.paymentError,o="",s="";return n&&!t.can_be_repurchased?(o="warning",s=(0,a.t)("paywall_checkout.form.errors.already_purchased",{billing_url:"".concat(r).concat(S.G3.billing.slice(1))})):i&&i.message&&(o=i.type,s=i.message),o&&s?(0,c.jsx)("div",{className:J()("rounded border px-6 py-5",{"border-red-500 bg-red-50 text-red-800":"danger"===o,"border-yellow-500 bg-yellow-50 text-yellow-800":"warning"===o}),dangerouslySetInnerHTML:{__html:s},"data-testid":"checkout-alert"}):null},Ese=function(){var e=(0,rse.Y)(),t=e.currentUser,r=e.isMemberAddressRequired,n=e.paywall,i=e.getSelectedPrice,o=e.setMemberAddressAttributes;if(!r&&t)return null;if(r)return(0,c.jsx)(Xae.AddressElement,{options:nse.kl,onChange:o});var a="name_on_card";return i().trial_enabled&&!n.trial_requires_card&&(a="name"),(0,c.jsx)(ise,{name:a,children:(0,c.jsx)(Nse,{type:"text",name:"name",options:{required:!0}})})},Ise=function(e){var t=e.isCardInfoRequired,r=e.handleOnChangeCard,n=e.handleOnReadyCard,i=(0,(0,rse.Y)().getSelectedPrice)();return(0,c.jsx)(ise,{name:"card",addon:i.trial_enabled&&t&&(0,c.jsx)("span",{className:"inline-flex",children:(0,c.jsx)(yt.Y,{className:"inline-flex",content:s().t("paywall_checkout.payment_subtitle_tooltip"),children:(0,c.jsx)(bt.JO,{type:"12-question-mark",size:12,color:"text-primary"})})}),children:(0,c.jsx)("div",{"data-testid":"checkout-form-card-field-wrapper",children:(0,c.jsx)(Xae.CardElement,{options:nse.T4,onChange:r,onReady:n})})})},Dse=function(){var e=(0,pr.Gc)().watch,t=(0,rse.Y)().clearCouponCode,r=e("coupon_code");return(0,c.jsxs)("div",{className:"flex w-fit flex-row items-center rounded-lg bg-gray-100 px-4 py-2","data-testid":"checkout-form-coupon-code",children:[(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:r}),(0,c.jsxs)(l.zx,{small:!0,className:"p-0 text-gray-600",type:"button",variant:"plain",onClick:t,"data-testid":"checkout-form-remove-coupon",children:[(0,c.jsx)("span",{className:"sr-only",children:(0,a.t)("paywall_checkout.form.buttons.remove_coupon")}),(0,c.jsx)(bt.JO,{type:"16-close",size:16})]})]})},Lse=function(){var e=(0,pr.Gc)().watch,t=(0,rse.Y)().applyCouponCode,r=e("coupon_code");return(0,c.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,c.jsx)(Nse,{className:"grow",type:"text",name:"coupon_code"}),r&&(0,c.jsx)(l.zx,{large:!0,type:"button",variant:"secondary",onClick:t,"data-testid":"checkout-form-apply-coupon",children:(0,c.jsx)(l.ZT.LabelSm,{weight:"medium",children:(0,a.t)("paywall_checkout.form.buttons.apply_coupon")})})]})},Mse=function(){var e,t=(0,pr.Gc)().watch;return(0,rse.Y)().couponsEnabled?(e=t().coupon_code_applied?(0,c.jsx)(Dse,{}):(0,c.jsx)(Lse,{}),(0,c.jsx)(ise,{name:"coupon_code",optional:!0,children:e})):null},Rse=Fse=r(76742);function Bse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Use(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bse(Object(r),!0).forEach((function(t){zse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vse="termsOfService",Zse=function(e){var t=e.label,r=void 0===t?(0,a.t)("checkbox"):t,n=(0,pr.Gc)().register;return(0,rse.Y)().currentUser?null:(0,c.jsx)("div",{className:"flex",children:(0,c.jsxs)("div",{className:"inline-flex items-start gap-3",children:[(0,c.jsx)("input",Use({type:"checkbox",id:"terms",className:"bg-primary text-circle hover:bg-tertiary disabled:border-selector-inactive disabled:bg-tertiary mt-[3px] h-4 w-4 cursor-pointer rounded border-gray-300"},n(Vse,{required:!0}))),(0,c.jsxs)("label",{className:"text-dark mb-0 w-full cursor-pointer",htmlFor:Vse,children:[(0,c.jsx)("span",{className:"sr-only",children:r}),(0,c.jsx)(Fse.y,{caller:"paywallCheckout"})]})]})})},Hse=[{countryCode:"BR",country:(0,a.t)("tax_ids.brazil"),label:(0,a.t)("tax_ids.brazil_cnpj"),example:"01.234.456/5432-10",description:(0,a.t)("tax_ids.brazil_cnpj_description"),enum:"br_cnpj"},{countryCode:"BR",country:(0,a.t)("tax_ids.brazil"),label:(0,a.t)("tax_ids.brazil_cpf"),example:"123.456.789-87",description:(0,a.t)("tax_ids.brazil_cpf_description"),enum:"br_cpf"},{countryCode:"CA",country:(0,a.t)("tax_ids.canada"),label:(0,a.t)("tax_ids.canada_bn"),example:"123456789",description:(0,a.t)("tax_ids.canada_bn_description"),enum:"ca_bn"},{countryCode:"CA",country:(0,a.t)("tax_ids.canada"),label:(0,a.t)("tax_ids.canada_gst_hst"),example:"123456789RT0002",description:(0,a.t)("tax_ids.canada_gst_hst_description"),enum:"ca_gst_hst"},{countryCode:"CA",country:(0,a.t)("tax_ids.canada"),label:(0,a.t)("tax_ids.canada_pst_bc"),example:"PST-1234-5678",description:(0,a.t)("tax_ids.canada_pst_bc_description"),enum:"ca_pst_bc"},{countryCode:"CL",country:(0,a.t)("tax_ids.chile"),label:(0,a.t)("tax_ids.chile_rut"),example:"12.345.678-9",description:(0,a.t)("tax_ids.chile_rut_description"),enum:"cl_rut"},{countryCode:"CO",country:(0,a.t)("tax_ids.colombia"),label:(0,a.t)("tax_ids.colombia_nit"),example:"123.456.789-0",description:(0,a.t)("tax_ids.colombia_nit_description"),enum:"co_nit"},{countryCode:"MX",country:(0,a.t)("tax_ids.mexico"),label:(0,a.t)("tax_ids.mexico_rfc"),example:"ABCD010101ABC",description:(0,a.t)("tax_ids.mexico_rfc_description"),enum:"mx_rfc"},{countryCode:"PE",country:(0,a.t)("tax_ids.peru"),label:(0,a.t)("tax_ids.peru_ruc"),example:"12345678901",description:(0,a.t)("tax_ids.peru_ruc_description"),enum:"pe_ruc"},{countryCode:"US",country:(0,a.t)("tax_ids.united_states"),label:(0,a.t)("tax_ids.united_states_ein"),example:"12-3456789",description:(0,a.t)("tax_ids.united_states_ein_description"),enum:"us_ein"}],qse=(0,a.t)("tax_ids.europe_vat_description"),Gse=[{countryCode:"AT",country:(0,a.t)("tax_ids.austria"),label:(0,a.t)("tax_ids.austria_vat"),example:"ATU12345678",description:qse,enum:"eu_vat"},{countryCode:"BE",country:(0,a.t)("tax_ids.belgium"),label:(0,a.t)("tax_ids.belgium_vat"),example:"BE0123456789",description:qse,enum:"eu_vat"},{countryCode:"BG",country:(0,a.t)("tax_ids.bulgaria"),label:(0,a.t)("tax_ids.bulgaria_vat"),example:"BG0123456789",description:qse,enum:"eu_vat"},{countryCode:"HR",country:(0,a.t)("tax_ids.croatia"),label:(0,a.t)("tax_ids.croatia_vat"),example:"HR12345678912",description:qse,enum:"eu_vat"},{countryCode:"CY",country:(0,a.t)("tax_ids.cyprus"),label:(0,a.t)("tax_ids.cyprus_vat"),example:"CY12345678Z",description:qse,enum:"eu_vat"},{countryCode:"CZ",country:(0,a.t)("tax_ids.czech_republic"),label:(0,a.t)("tax_ids.czech_republic_vat"),example:"CZ1234567890",description:qse,enum:"eu_vat"},{countryCode:"DK",country:(0,a.t)("tax_ids.denmark"),label:(0,a.t)("tax_ids.denmark_vat"),example:"DK12345678",description:qse,enum:"eu_vat"},{countryCode:"EE",country:(0,a.t)("tax_ids.estonia"),label:(0,a.t)("tax_ids.estonia_vat"),example:"EE123456789",description:qse,enum:"eu_vat"},{countryCode:"FI",country:(0,a.t)("tax_ids.finland"),label:(0,a.t)("tax_ids.finland_vat"),example:"FI12345678",description:qse,enum:"eu_vat"},{countryCode:"FR",country:(0,a.t)("tax_ids.france"),label:(0,a.t)("tax_ids.france_vat"),example:"FRAB123456789",description:qse,enum:"eu_vat"},{countryCode:"DE",country:(0,a.t)("tax_ids.germany"),label:(0,a.t)("tax_ids.germany_vat"),example:"DE123456789",description:qse,enum:"eu_vat"},{countryCode:"GB",country:(0,a.t)("tax_ids.united_kingdom"),label:(0,a.t)("tax_ids.united_kingdom_vat"),example:"GB123456789",description:(0,a.t)("tax_ids.united_kingdom_vat_description"),enum:"gb_vat"},{countryCode:"GR",country:(0,a.t)("tax_ids.greece"),label:(0,a.t)("tax_ids.greece_vat"),example:"EL123456789",description:qse,enum:"eu_vat"},{countryCode:"HU",country:(0,a.t)("tax_ids.hungary"),label:(0,a.t)("tax_ids.hungary_vat"),example:"HU12345678912",description:qse,enum:"eu_vat"},{countryCode:"IE",country:(0,a.t)("tax_ids.ireland"),label:(0,a.t)("tax_ids.ireland_vat"),example:"IE1234567AB",description:qse,enum:"eu_vat"},{countryCode:"IT",country:(0,a.t)("tax_ids.italy"),label:(0,a.t)("tax_ids.italy_vat"),example:"IT12345678912",description:qse,enum:"eu_vat"},{countryCode:"LV",country:(0,a.t)("tax_ids.latvia"),label:(0,a.t)("tax_ids.latvia_vat"),example:"LV12345678912",description:qse,enum:"eu_vat"},{countryCode:"LT",country:(0,a.t)("tax_ids.lithuania"),label:(0,a.t)("tax_ids.lithuania_vat"),example:"LT123456789123",description:qse,enum:"eu_vat"},{countryCode:"LU",country:(0,a.t)("tax_ids.luxembourg"),label:(0,a.t)("tax_ids.luxembourg_vat"),example:"LU12345678",description:qse,enum:"eu_vat"},{countryCode:"MT",country:(0,a.t)("tax_ids.malta"),label:(0,a.t)("tax_ids.malta_vat"),example:"MT12345678",description:qse,enum:"eu_vat"},{countryCode:"NL",country:(0,a.t)("tax_ids.netherlands"),label:(0,a.t)("tax_ids.netherlands_vat"),example:"NL123456789B12",description:qse,enum:"eu_vat"},{countryCode:"PL",country:(0,a.t)("tax_ids.poland"),label:(0,a.t)("tax_ids.poland_vat"),example:"PL1234567890",description:qse,enum:"eu_vat"},{countryCode:"PT",country:(0,a.t)("tax_ids.portugal"),label:(0,a.t)("tax_ids.portugal_vat"),example:"PT123456789",description:qse,enum:"eu_vat"},{countryCode:"RO",country:(0,a.t)("tax_ids.romania"),label:(0,a.t)("tax_ids.romania_vat"),example:"RO1234567891",description:qse,enum:"eu_vat"},{countryCode:"SK",country:(0,a.t)("tax_ids.slovakia"),label:(0,a.t)("tax_ids.slovakia_vat"),example:"SK1234567891",description:qse,enum:"eu_vat"},{countryCode:"SI",country:(0,a.t)("tax_ids.slovenia"),label:(0,a.t)("tax_ids.slovenia_vat"),example:"SI12345678",description:qse,enum:"eu_vat"},{countryCode:"ES",country:(0,a.t)("tax_ids.spain"),label:(0,a.t)("tax_ids.spain_vat"),example:"ESA1234567Z",description:qse,enum:"eu_vat"},{countryCode:"ES",country:(0,a.t)("tax_ids.spain"),label:(0,a.t)("tax_ids.spain_cif"),example:"A12345678",description:(0,a.t)("tax_ids.spain_cif_description"),enum:"es_cif"},{countryCode:"SE",country:(0,a.t)("tax_ids.sweden"),label:(0,a.t)("tax_ids.sweden_vat"),example:"SE123456789123",description:qse,enum:"eu_vat"},{countryCode:"CH",country:(0,a.t)("tax_ids.switzerland"),label:(0,a.t)("tax_ids.switzerland_vat"),example:"CHE-123.456.789 MWST",description:(0,a.t)("tax_ids.switzerland_vat_description"),enum:"ch_vat"},{countryCode:"IE",country:(0,a.t)("tax_ids.ireland"),label:(0,a.t)("tax_ids.northern_ireland_vat"),example:"XI123456789",description:(0,a.t)("tax_ids.northern_ireland_vat_description"),enum:"eu_vat"},{countryCode:"NO",country:(0,a.t)("tax_ids.norway"),label:(0,a.t)("tax_ids.norway_vat"),example:"123456789MVA",description:(0,a.t)("tax_ids.norway_vat_description"),enum:"no_vat"},{countryCode:"IS",country:(0,a.t)("tax_ids.iceland"),label:(0,a.t)("tax_ids.iceland_vat"),example:"123456",description:(0,a.t)("tax_ids.iceland_vat_description"),enum:"is_vat"},{countryCode:"HU",country:(0,a.t)("tax_ids.hungary"),label:(0,a.t)("tax_ids.hungary_tin"),example:"12345678-1-23",description:(0,a.t)("tax_ids.hungary_tin_description"),enum:"hu_tin"},{countryCode:"EU",country:(0,a.t)("tax_ids.european_union"),label:(0,a.t)("tax_ids.european_union_oss_vat"),example:"EU123456789",description:(0,a.t)("tax_ids.european_union_oss_vat_description"),enum:"eu_oss_vat"},{countryCode:"BG",country:(0,a.t)("tax_ids.bulgaria"),label:(0,a.t)("tax_ids.bulgaria_uic"),example:"123456789",description:(0,a.t)("tax_ids.bulgaria_uic_description"),enum:"bg_uic"}],Wse=[{countryCode:"AU",country:(0,a.t)("tax_ids.australia"),label:(0,a.t)("tax_ids.australia_abn"),example:"12345678912",description:(0,a.t)("tax_ids.australia_abn_description"),enum:"au_abn"},{countryCode:"AU",country:(0,a.t)("tax_ids.australia"),label:(0,a.t)("tax_ids.australia_arn"),example:"123456789123",description:(0,a.t)("tax_ids.australia_arn_description"),enum:"au_arn"},{countryCode:"EG",country:(0,a.t)("tax_ids.egypt"),label:(0,a.t)("tax_ids.egypt_tin"),example:"123456789",description:(0,a.t)("tax_ids.egypt_tin_description"),enum:"eg_tin"},{countryCode:"GE",country:(0,a.t)("tax_ids.georgia"),label:(0,a.t)("tax_ids.georgia_vat"),example:"123456789",description:(0,a.t)("tax_ids.georgia_vat_description"),enum:"ge_vat"},{countryCode:"IN",country:(0,a.t)("tax_ids.india"),label:(0,a.t)("tax_ids.india_gst"),example:"12ABCDE3456FGZH",description:(0,a.t)("tax_ids.india_gst_description"),enum:"in_gst"},{countryCode:"ID",country:(0,a.t)("tax_ids.indonesia"),label:(0,a.t)("tax_ids.indonesia_npwp"),example:"12.345.678.9-012.345",description:(0,a.t)("tax_ids.indonesia_npwp_description"),enum:"id_npwp"},{countryCode:"IL",country:(0,a.t)("tax_ids.israel"),label:(0,a.t)("tax_ids.israel_vat"),example:"000012345",description:(0,a.t)("tax_ids.israel_vat_description"),enum:"il_vat"},{countryCode:"JP",country:(0,a.t)("tax_ids.japan"),label:(0,a.t)("tax_ids.japan_cn"),example:"1234567891234",description:(0,a.t)("tax_ids.japan_cn_description"),enum:"jp_cn"},{countryCode:"JP",country:(0,a.t)("tax_ids.japan"),label:(0,a.t)("tax_ids.japan_rn"),example:"12345",description:(0,a.t)("tax_ids.japan_rn_description"),enum:"jp_rn"},{countryCode:"JP",country:(0,a.t)("tax_ids.japan"),label:(0,a.t)("tax_ids.japan_trn"),example:"T1234567891234",description:(0,a.t)("tax_ids.japan_trn_description"),enum:"jp_trn"},{countryCode:"KE",country:(0,a.t)("tax_ids.kenya"),label:(0,a.t)("tax_ids.kenya_pin"),example:"P000111111A",description:(0,a.t)("tax_ids.kenya_pin_description"),enum:"ke_pin"},{countryCode:"LI",country:(0,a.t)("tax_ids.liechtenstein"),label:(0,a.t)("tax_ids.liechtenstein_uid"),example:"CHE123456789",description:(0,a.t)("tax_ids.liechtenstein_uid_description"),enum:"li_uid"},{countryCode:"MY",country:(0,a.t)("tax_ids.malaysia"),label:(0,a.t)("tax_ids.malaysia_frp"),example:"12345678",description:(0,a.t)("tax_ids.malaysia_frp_description"),enum:"my_frp"},{countryCode:"MY",country:(0,a.t)("tax_ids.malaysia"),label:(0,a.t)("tax_ids.malaysia_itn"),example:"C 1234567890",description:(0,a.t)("tax_ids.malaysia_itn_description"),enum:"my_itn"},{countryCode:"MY",country:(0,a.t)("tax_ids.malaysia"),label:(0,a.t)("tax_ids.malaysia_sst"),example:"A12-3456-78912345",description:(0,a.t)("tax_ids.malaysia_sst_description"),enum:"my_sst"},{countryCode:"NZ",country:(0,a.t)("tax_ids.new_zealand"),label:(0,a.t)("tax_ids.new_zealand_gst"),example:"123456789",description:(0,a.t)("tax_ids.new_zealand_gst_description"),enum:"nz_gst"},{countryCode:"PH",country:(0,a.t)("tax_ids.philippines"),label:(0,a.t)("tax_ids.philippines_tin"),example:"123456789012",description:(0,a.t)("tax_ids.philippines_tin_description"),enum:"ph_tin"},{countryCode:"RU",country:(0,a.t)("tax_ids.russia"),label:(0,a.t)("tax_ids.russia_inn"),example:"1234567891",description:(0,a.t)("tax_ids.russia_inn_description"),enum:"ru_inn"},{countryCode:"RU",country:(0,a.t)("tax_ids.russia"),label:(0,a.t)("tax_ids.russia_kpp"),example:"123456789",description:(0,a.t)("tax_ids.russia_kpp_description"),enum:"ru_kpp"},{countryCode:"SA",country:(0,a.t)("tax_ids.saudi_arabia"),label:(0,a.t)("tax_ids.saudi_arabia_vat"),example:"123456789012345",description:(0,a.t)("tax_ids.saudi_arabia_vat_description"),enum:"sa_vat"},{countryCode:"SG",country:(0,a.t)("tax_ids.singapore"),label:(0,a.t)("tax_ids.singapore_gst"),example:"M12345678X",description:(0,a.t)("tax_ids.singapore_gst_description"),enum:"sg_gst"},{countryCode:"SG",country:(0,a.t)("tax_ids.singapore"),label:(0,a.t)("tax_ids.singapore_uen"),example:"123456789F",description:(0,a.t)("tax_ids.singapore_uen_description"),enum:"sg_uen"},{countryCode:"SI",country:(0,a.t)("tax_ids.slovenia"),label:(0,a.t)("tax_ids.slovenia_tin"),example:"SI123456789",description:(0,a.t)("tax_ids.slovenia_tin_description"),enum:"si_tin"},{countryCode:"ZA",country:(0,a.t)("tax_ids.south_africa"),label:(0,a.t)("tax_ids.south_africa_vat"),example:"4123456789",description:(0,a.t)("tax_ids.south_africa_vat_description"),enum:"za_vat"},{countryCode:"KR",country:(0,a.t)("tax_ids.south_korea"),label:(0,a.t)("tax_ids.south_korea_brn"),example:"123-45-67890",description:(0,a.t)("tax_ids.korean_brn_description"),enum:"kr_brn"},{countryCode:"TW",country:(0,a.t)("tax_ids.taiwan"),label:(0,a.t)("tax_ids.taiwan_vat"),example:"12345678",description:(0,a.t)("tax_ids.taiwan_vat_description"),enum:"tw_vat"},{countryCode:"TH",country:(0,a.t)("tax_ids.thailand"),label:(0,a.t)("tax_ids.thailand_vat"),example:"1234567891234",description:(0,a.t)("tax_ids.thailand_vat_description"),enum:"th_vat"},{countryCode:"TR",country:(0,a.t)("tax_ids.turkey"),label:(0,a.t)("tax_ids.turkey_tin"),example:"0123456789",description:(0,a.t)("tax_ids.turkey_tin_description"),enum:"tr_tin"},{countryCode:"UA",country:(0,a.t)("tax_ids.ukraine"),label:(0,a.t)("tax_ids.ukraine_vat"),example:"123456789",description:(0,a.t)("tax_ids.ukraine_vat_description"),enum:"ua_vat"},{countryCode:"AE",country:(0,a.t)("tax_ids.united_arab_emirates"),label:(0,a.t)("tax_ids.united_arab_emirates_trn"),example:"123456789012345",description:(0,a.t)("tax_ids.united_arab_emirates_trn_description"),enum:"ae_trn"}];function Qse(e){return function(e){if(Array.isArray(e))return Kse(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Kse(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kse(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kse(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Jse=[].concat(Qse(Hse),Qse(Gse),Qse(Wse)).sort(();function $se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Yse(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yse(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yse(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ele(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xse(Object(r),!0).forEach((function(t){tle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tle(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rle=nle=Jse.reduce((,{}),ile=function(){var e=(0,pr.Gc)(),t=e.setValue,r=(0,e.watch)().community_member_billing_info_attributes.address_country,i=(0,rse.Y)().isMemberAddressRequired,o=$se((0,n.useState)(""),2),a=o[0],s=o[1],u=nle[a],d=(0,n.useCallback)((,[s]);(0,n.useEffect)((function(){u&&(t("community_member_billing_info_attributes[tax_id_type]",u.enum),i||t("community_member_billing_info_attributes[address_country]",u.countryCode))}),[t,i,u]),(0,n.useEffect)((function(){i&&u&&u.countryCode!==r&&s("")}),[t,i,r,u]);var f=Jse.filter((function(e){return!i||!r||e.countryCode===r})),m=$se((0,n.useState)(f.map(rle)),2),p=m[0],h=m[1],b=(0,n.useCallback)((function(e){var t=e.toLowerCase(),r=f.filter(().map(rle);h(r)}),[f,h]);return(0,c.jsxs)(ise,{name:"tax_id",optional:!0,children:[(0,c.jsx)(l.Ph,{variant:"single",name:"taxIdTypeLabel",data:p,value:a,onChange:d,onSearch:b,hideSelectedItems:!0}),a&&(0,c.jsx)(Nse,{className:"mt-2 grow",type:"text",name:"community_member_billing_info_attributes[tax_id_value]",placeholder:u.example})]})},ole=function(){var e=(0,(0,pr.Gc)().watch)().community_member_billing_info_attributes.address_country,t=(0,rse.Y)(),r=t.isTaxCollectionEnabled,n=t.isMemberAddressRequired,i=t.isTaxIdCollectionEnabled,o=t.enableTaxIdCollection;return!r||n&&!e?null:i?(0,c.jsx)(ile,{}):(0,c.jsx)("div",{className:"flex flex-row items-center gap-x-1",children:(0,c.jsxs)(l.ZT.LabelSm,{weight:"regular",children:[s().t("paywall_checkout.form.tax_id.message")," ",(0,c.jsx)("button",{type:"button",className:"cursor-pointer text-blue-600",onClick:o,children:s().t("paywall_checkout.form.tax_id.cta")})]})})},ale=function(){var e=(0,(0,rse.Y)().getSelectedPrice)(),t=null!==e&&void 0!==e&&e.trial_enabled?(0,a.t)(["paywall_checkout.get_started.trial_title",e.trial_requires_upfront_payment?"paid":"free"]):(0,a.t)("paywall_checkout.get_started.no_trial_title"),r=null!==e&&void 0!==e&&e.trial_enabled?(0,a.t)("paywall_checkout.get_started.trial_description"):(0,a.t)("paywall_checkout.get_started.no_trial_description");return(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsx)(y.Z.TitleMd,{children:t}),(0,c.jsx)(y.Z.LabelSm,{color:"text-secondary-500",children:r})]})},sle=function(e){var t=e.className,r=e.label,n=e.labelSize,i=void 0===n?"sm":n,o=e.labelWeight,a=void 0===o?"normal":o,s=e.tooltip,u=e.value,d=e.valueSize,f=void 0===d?"sm":d,m=e.valueColor,p=void 0===m?"text-primary":m,h=e.valueWeight,b=void 0===h?"normal":h,y=e.dataTestId,v="sm"===i?l.ZT.LabelSm:l.ZT.LabelMd,g="sm"===f?l.ZT.LabelSm:"md"===f?l.ZT.LabelMd:l.ZT.LabelLg;return(0,c.jsxs)("div",{className:J()(t,"flex flex-row items-center justify-between"),"data-testid":y,children:[(0,c.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,c.jsx)(v,{weight:a,children:r}),s&&(0,c.jsx)(yt.Y,{dataTestId:"checkout-form-preview-entry-tooltip",className:"inline-flex",content:s,children:(0,c.jsx)(bt.JO,{type:"16-question-mark",size:16,color:"text-primary"})})]}),(0,c.jsx)(g,{weight:b,color:p,children:u})]})},lle=function(e){var t=e.trialPeriod,r=e.formattedTotal,n=e.subtotal,i=e.formattedSubtotal,o=e.discountDurationTooltip,s=e.discount,l=e.formattedDiscount,u=e.tax,d=e.formattedTax,f=e.appliedBalance,m=e.formattedAppliedBalance;return 0===n?null:(0,c.jsxs)(Rse,{className:"gap-y-2 border-t",children:[(0,c.jsx)(sle,{label:(0,a.t)(["paywall_checkout.first_payment",t?"".concat(t.variant,"_trial"):"standard"],{trial_period:null===t||void 0===t?void 0:t.phrase}),labelWeight:"semibold",value:r,valueWeight:"semibold",dataTestId:"checkout-form-preview-amount-due"}),(s<0||u>0||0!==f)&&(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.coupon.subtotal"),value:i,dataTestId:"checkout-form-preview-subtotal"}),s<0&&(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.coupon.discount"),tooltip:o,value:l,valueColor:"text-green-600",dataTestId:"checkout-form-preview-discount"}),u>0&&(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.coupon.tax"),value:d,dataTestId:"checkout-form-preview-tax"}),0!==f&&(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.coupon.applied_balance"),value:m,valueColor:f<0?"text-green-600":"text-primary",dataTestId:"checkout-form-preview-applied-balance"})]})},cle=function(e){var t=e.goesAfterFirstPayment,r=e.trialPeriod,n=e.formattedTotal,i=e.subtotalLabel,o=e.subtotal,s=e.formattedSubtotal,l=e.discount,u=e.formattedDiscount,d=e.tax,f=e.formattedTax;if(0===o)return null;var m=["paywall_checkout.future_payments"];return r?(m.push("".concat(r.variant,"_trial")),r.variant===Tw.sJ.free&&(t?m.push("with_first_payment"):m.push("without_first_payment"))):m.push("standard"),(0,c.jsxs)(Rse,{className:"gap-y-2 border-t",children:[(0,c.jsx)(sle,{label:(0,a.t)(m,{trial_period:null===r||void 0===r?void 0:r.phrase}),labelWeight:"semibold",value:n,valueWeight:"semibold"}),(0,c.jsx)(sle,{label:i,value:s,dataTestId:"checkout-form-preview-future-payments-subtotal"}),l<0&&(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.coupon.discount"),value:u,valueColor:"text-green-600",dataTestId:"checkout-form-preview-future-payments-discount"}),d>0&&(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.coupon.tax"),value:f,dataTestId:"checkout-form-preview-future-payments-tax"})]})};function ule(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ule(Object(r),!0).forEach((function(t){fle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ule(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fle(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mle=function(){var e=(0,rse.Y)(),t=e.getSelectedPrice,r=e.previewMutation,n=t(),i=r.data;if(r.isIdle||r.isError)return null;if(r.isLoading)return(0,c.jsx)("div",{className:"py-2",children:(0,c.jsx)(gd.a,{variant:"default"})});var o=function(e){if(e.trial_enabled){var t=Tw.sJ.free;return e.trial_requires_upfront_payment&&(t=Tw.sJ.paid),{variant:t,phrase:(0,a.t)(["paywall_checkout.trial_period",t],{count:e.trial_days})}}}(n),s=function(e,t,r){var n,i,o,a,s,l,c,u,d,f,m,p=e.price_type!==Tw.E4.subscription&&e.price_type!==Tw.E4.installments||!e.trial_enabled||e.upfront_payment_amount?t:null;return{trialPeriod:r,total:null!==(n=null===p||void 0===p?void 0:p.amount_due)&&void 0!==n?n:0,formattedTotal:null!==(i=null===p||void 0===p?void 0:p.amount_due_as_currency)&&void 0!==i?i:"",subtotal:null!==(o=null===p||void 0===p?void 0:p.subtotal)&&void 0!==o?o:0,formattedSubtotal:null!==(a=null===p||void 0===p?void 0:p.subtotal_as_currency)&&void 0!==a?a:"",discountDurationTooltip:null!==(s=null===p||void 0===p?void 0:p.discount_duration_label)&&void 0!==s?s:"",discount:null!==(l=null===p||void 0===p?void 0:p.discount)&&void 0!==l?l:0,formattedDiscount:null!==(c=null===p||void 0===p?void 0:p.discount_as_currency)&&void 0!==c?c:"",tax:null!==(u=null===p||void 0===p?void 0:p.tax)&&void 0!==u?u:0,formattedTax:null!==(d=null===p||void 0===p?void 0:p.tax_as_currency)&&void 0!==d?d:"",appliedBalance:null!==(f=null===p||void 0===p?void 0:p.applied_balance)&&void 0!==f?f:0,formattedAppliedBalance:null!==(m=null===p||void 0===p?void 0:p.applied_balance_as_currency)&&void 0!==m?m:""}}(n,i,o),l=function(e,t,r){var n,i,o,a,s,l,c,u,d,f=t.future_payments||(!e.trial_enabled||e.price_type!==Tw.E4.subscription&&e.price_type!==Tw.E4.installments?null:t);return{trialPeriod:r,total:null!==(n=null===f||void 0===f?void 0:f.total)&&void 0!==n?n:0,formattedTotal:null!==(i=null===f||void 0===f?void 0:f.total_as_currency)&&void 0!==i?i:"",subtotalLabel:null!==(o=null===f||void 0===f?void 0:f.subtotal_label)&&void 0!==o?o:"",subtotal:null!==(a=null===f||void 0===f?void 0:f.subtotal)&&void 0!==a?a:0,formattedSubtotal:null!==(s=null===f||void 0===f?void 0:f.subtotal_as_currency)&&void 0!==s?s:"",discount:null!==(l=null===f||void 0===f?void 0:f.discount)&&void 0!==l?l:0,formattedDiscount:null!==(c=null===f||void 0===f?void 0:f.discount_as_currency)&&void 0!==c?c:"",tax:null!==(u=null===f||void 0===f?void 0:f.tax)&&void 0!==u?u:0,formattedTax:null!==(d=null===f||void 0===f?void 0:f.tax_as_currency)&&void 0!==d?d:""}}(n,i,o),u=o&&o.variant===Tw.sJ.free?(0,Mw.I)(i.currency,0,{amountInCents:!0,includeCurrencyCode:!0,includeCurrencySymbol:!0,forceMaxFractionDigits:!1}):i.amount_due_as_currency;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(lle,dle({},s)),(0,c.jsx)(cle,dle(dle({},l),{},{goesAfterFirstPayment:s.subtotal>0})),(0,c.jsx)(Rse,{className:"gap-y-3 border-t py-8",children:(0,c.jsx)(sle,{label:(0,a.t)("paywall_checkout.amount_due"),labelSize:"md",labelWeight:"semibold",value:u,valueSize:"lg",valueWeight:"semibold",dataTestId:"checkout-form-preview-amount-due"})})]})},ple=function(){var e=(0,pr.Gc)().handleSubmit,t=vse(),r=t.currentUser,n=t.handleOnChangeCard,i=t.handleOnReadyCard,o=t.isCardInfoRequired,s=t.onSubmit,u=t.payButtonLabel,d=t.processingPayment,f=t.stripe,m=t.submitDisabled;return(0,c.jsxs)("div",{"data-testid":"checkout-form-container",children:[d&&(0,c.jsx)(l.aN,{variant:"fullscreen"}),(0,c.jsxs)("form",{className:"flex flex-col",onSubmit:e(s),"data-testid":"checkout-form",children:[(0,c.jsx)(ale,{}),(0,c.jsx)(Rse,{className:"gap-y-5 border-b",children:r?(0,c.jsx)(gse,{}):(0,c.jsx)(Tse,{})}),(0,c.jsxs)(Rse,{className:"gap-y-5",children:[o&&(0,c.jsx)(Ise,{isCardInfoRequired:o,handleOnChangeCard:n,handleOnReadyCard:i}),(0,c.jsx)(Ese,{}),(0,c.jsx)(Mse,{}),(0,c.jsx)(ole,{})]}),(0,c.jsx)(mle,{}),(0,c.jsx)(Ase,{}),(0,c.jsxs)(Rse,{className:"gap-y-5",children:[(0,c.jsx)(Zse,{}),(0,c.jsx)(l.zx,{type:"submit",large:!0,variant:"primary",disabled:!f||m,"data-testid":"checkout-form-submit-button",children:u}),(0,c.jsxs)("div",{className:"flex flex-row items-center justify-center","data-testid":"checkout-form-secure-legend-container",children:[(0,c.jsx)(bt.JO,{color:"text-secondary-50",size:16,type:"lock-solid"}),(0,c.jsx)(l.ZT.LabelXs,{color:"text-secondary-50",children:(0,a.t)("paywall_checkout.payment_secure_legend")})]})]})]})]})},hle=function(){var e=(0,rse.Y)().currentCommunity;return(0,c.jsxs)("div",{className:"community-info",children:[e.logo_url&&(0,c.jsx)("img",{className:"community-info__logo",src:e.logo_url,alt:""}),!e.logo_url&&e.icon_url&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"community-info__icon",children:(0,c.jsx)("img",{src:e.icon_url,alt:""})}),(0,c.jsx)("span",{className:"community-info__name",children:e.name})]}),!e.logo_url&&!e.icon_url&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:{backgroundColor:e.prefs.brand_color},className:"community-info__icon",children:e.name[0]}),(0,c.jsx)("span",{className:"community-info__name",children:e.name})]})]})},ble=function(e){var t=e.id,r=e.title,n=e.subtitle,i=e.value,o=e.isSelected,a=e.onSelect;return(0,c.jsxs)("button",{type:"button","aria-pressed":o,className:J()("border-primary bg-primary focus-visible:!outline-secondary flex min-h-[4rem] cursor-pointer flex-row items-center justify-between rounded-md border px-5 py-3 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"border-secondary bg-secondary":o}),"data-testid":"checkout-paywall-price-option",onClick:children:[(0,c.jsxs)("div",{className:"flex flex-col justify-around gap-y-1 py-1 text-left",children:[(0,c.jsx)(l.ZT.LabelMd,{weight:"medium",children:r}),n&&(0,c.jsx)(l.ZT.LabelXs,{weight:"regular",children:n})]}),(0,c.jsx)("div",{className:"flex flex-col justify-center whitespace-nowrap",children:(0,c.jsx)(l.ZT.LabelMd,{weight:"regular",children:i})})]})},yle=function(){var e=(0,rse.Y)(),t=e.paywall,r=e.getSelectedPrice,n=e.setSelectedPrice,i=o=r(),a=return(0,c.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-3","data-testid":"checkout-paywall-detail",children:[(0,c.jsx)(l.ZT.TitleLg,{children:t.display_name}),(0,c.jsx)(l.ZT.BodyMd,{children:(0,c.jsx)("span",{className:"whitespace-pre-wrap",children:t.description})})]}),(0,c.jsx)("div",{className:"flex flex-col gap-4",children:(t.prices||[]).map((function(e){return(0,c.jsx)(ble,{id:e.id,title:e.title,subtitle:e.subtitle,value:e.value,isSelected:a(e),onSelect:i},"paywall_price-".concat(e.id))}))})]})};function vle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vle(Object(r),!0).forEach((function(t){xle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xle(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jle(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jle(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jle(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wle=function(e){var t=e.space,r=e.post,i=e.current_user,o=e.show_comments_on_load,s=void 0!==o&&o,l=e.is_shared_post,u=void 0!==l&&l,d=i,f=(0,n.useRef)(null),m=_le((0,n.useState)(s&&!u),2),p=m[0],h=m[1],b=_le((0,n.useState)(!s),2),y=b[0],v=b[1],g=yoe(),x=_le((0,n.useState)(g&&r.comments_count>10),2),_=x[0],j=x[1];(0,n.useEffect)((function(){if(f.current){var e=function(e){var n=f.current.querySelector('[data-action="toggle-comment-with-focus"]'),i=f.current.querySelector('[data-action="toggle-comment"]');if(n&&i){var o=n.contains(e.target);if(o||i.contains(e.target)){if(e.preventDefault(),u){var s=(0,S.LM)({slug:r.slug,spaceSlug:t.slug,params:{notice:(0,a.t)("comments.log_in_to_add_a_comment")}});return void(window.location.href=s)}h(!p),v(!!o)}}};return f.current.addEventListener("click",e),}),[f,h,p]);var w=J()("post post--parent",{"post--shared":u,"post--shared__truncated":u&&!d,"is-truncation-disabled":r.is_truncation_disabled,"is-pinned":r.pinned_at_top_of_space,"flagged-for-approval":r.flagged_for_approval_at,"post-name--empty":!r.name,"post-meta--hidden":r.hide_meta_info}),O=!d&&(null===r||void 0===r?void 0:r.is_comments_enabled)||u&&(null===r||void 0===r?void 0:r.show_post_teaser);return(0,c.jsxs)("div",{className:w,children:[(0,c.jsx)("div",{ref:f,children:(0,c.jsx)(tn.Z,{html:r.html})}),Boolean(!!p&&!u)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"post__comments trix-v2","data-controller":"comments",id:"all_comments","data-post-id":r.id,children:[Boolean(O&&(null===r||void 0===r?void 0:r.comments_count)>5)&&(0,c.jsx)(tn.Z,{html:r.gated_html}),Boolean(_)&&(0,c.jsxs)(c.Fragment,{children:[Boolean((null===r||void 0===r?void 0:r.comments_count)>1)&&(0,c.jsx)("div",{className:"show-all-comments__wrapper",children:(0,c.jsxs)("a",{className:"show-all-comments__link btn btn-secondary",href:"#all_comments",onClick:function(e){e.preventDefault(),j(!1),window.location.hash="#all_comments"},children:[(0,c.jsx)(bt.JO,{type:"arrow-solid-top-left"}),(0,a.t)("post.comments_section.show_all_count_comments",{count:r.comments_count})]})}),(0,c.jsx)($oe.CommentHierarchy,{id:g,post:r,space:t,communityMember:d,showReplyForm:!0,autofocusReplyForm:y})]}),Boolean(!_)&&(0,c.jsx)($oe.CommentsList,{post:r,space:t,communityMember:d,showReplyForm:!0,autofocusReplyForm:y})]}),Boolean(O&&(null===r||void 0===r?void 0:r.comments_count)<=5)&&(0,c.jsx)(tn.Z,{html:r.gated_html})]})]})};function Ole(e){return function(e){if(Array.isArray(e))return Cle(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||kle(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ple(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Sle(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||kle(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kle(e,t){if(e){if("string"===typeof e)return Cle(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cle(e,t):void 0}}function Cle(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Nle={PostViewList:function(e){var t=Sle((0,n.useState)(e.posts||[]),2),r=t[0],i=t[1],o=Sle((0,n.useState)(!1),2),a=o[0],s=o[1],l=Sle((0,n.useState)(1),2),u=l[0],d=l[1],f=e.space,m=e.current_user,p=function(){var t,n=(t=se().mark((function t(){var n,o;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(Qt.a.posts.index({spaceId:f.id,params:{page:u,sort:e.sort,iframe:!0}}));case 2:if(!(n=t.sent).ok){t.next=11;break}return t.next=6,n.json();case 6:o=t.sent,i((0,fn.uniqBy)([].concat(Ole(r),Ole(o.records)),"id")),s(o.has_next_page),d(o.page+1),window.loadOembed();case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Ple(o,n,i,a,s,"next",e)}function s(e){Ple(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,n.useEffect)((,[]),(0,c.jsx)(nW.Z,{style:{overflow:"initial"},scrollThreshold:.75,next:p,hasMore:a,loader:(0,c.jsx)(W.m,{}),dataLength:r.length,children:r.map(()})},Show:wle};var Tle=["currentSpaceId","postSlug","children","loaderVariant"];function Ale(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ele(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ale(Object(r),!0).forEach((function(t){Ile(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ale(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ile(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}unction Lle(e){var t=e.currentSpaceId,r=e.postSlug,n=e.children,i=e.loaderVariant,o=void 0===i?"fullscreen":i,a=Dle(e,Tle),s=(0,x.t)({spaceId:t,postSlug:r}),u=s.post;return s.isLoading?(0,c.jsx)(l.aN,{variant:o}):(0,c.jsx)(v.DW,Ele(Ele({post:u},a),{},{children:n}))}var Mle=r(8174);function Rle(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fle(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fle(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fle(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ble=r(20035),Ule=r(50015);function zle(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vle(e,t){return Vle=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vle(e,t)}function Zle(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Hle(e);if(t){var i=Hle(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Hle(e){return Hle=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hle(e)}function qle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qle(Object(r),!0).forEach((function(t){Wle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wle(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qle=function(e){return ,Kle={RichTextInput:_h,CommentsForm:Koe,CommentsList:Joe,Notifications:function(){var e=(0,gae.j)().prependTitle;return(0,n.useEffect)((function(){e("".concat(s().t("notifications.page_title")," "))})),(0,c.jsx)("div",{className:"notifications__page",children:(0,c.jsx)(D6.u,{})})},NotificationsDropdown:function(e){var t=e.containerElement,r=e.communityMemberId,i=e.newNotificationCount,o=(0,qr.x)(!1),s=o.open,l=o.handleClose,u=o.setOpen,d=(0,xae.j)().isMobileView,f=(0,I6.f)(gn.dL),m=f.newNotificationCount,p=f.setNewNotificationCount,h=f.resetNewNotificationsCount,b=f.onNotificationEventReceive,y=f.resizeNotificationWindow,v=(0,gae.j)(),g=v.prependTitle,x=v.resetTitleToOriginal;(0,n.useEffect)((function(){p(i)}),[i]),(0,_re.I)(r,b),(0,_ae.w)(y),(0,n.useEffect)((function(){document.title=m?g("(".concat(m,") ")):x()}),[m]);var _=function(){if(d()){var e=document.getElementsByClassName("dropdown-menu--bottom-bar bottomBarnotificationDropdown hidden");if(e.length>0&&s)return l(),e[0].classList.remove("hidden"),!1}return s};return(0,c.jsxs)("div",{className:"notifications__menu",children:[(0,c.jsxs)("button",{type:"button",className:"notifications__menu--icon","data-testid":"notifications-menu",onClick:function(){var e=_();d()&&e||(e?l():u(!0),h())},"data-action":"click->bottom-bar#openNotifications","data-target":"bottom-bar.notifications",children:[(0,c.jsx)(bt.JO,{type:"bell"}),m?(0,c.jsx)("span",{children:m}):""]}),(0,c.jsx)(qr.o,{open:s,handleClose:l,disableToggle:d()&&s,className:t+"notificationDropdown",children:(0,c.jsx)("div",{id:t+"NotificationWrapperOuter",className:"dropdown-menu dropdown-menu--right dropdown-menu__notifications",children:(0,c.jsxs)("div",{className:"dropdown-menu__inside",children:[(0,c.jsx)(D6.u,{loadPagination:!1,containerElement:t},"notification-".concat(s)),(0,c.jsx)("div",{className:"notifications__footer",children:(0,c.jsx)("span",{children:(0,c.jsx)("a",{href:(0,S.Rj)(),children:(0,c.jsx)("div",{children:(0,a.t)("view_all_notifications")})})})})]})})})]})},NotificationCount:function(e){var t=e.communityId,r=e.communityMemberId,i=(0,I6.f)(),o=i.newNotificationCount,a=i.fetchNewNotificationsCount;return(0,n.useEffect)((,[]),(0,_re.I)(r,onNotificationEventReceive),o?(0,c.jsx)("span",{className:"notifications__count",children:o}):null},CommunitySwitcher:Nre,CommunitySwitcherWithProviders:function(e){var t=e.isLoadingAppData,r=void 0!==t&&t;return(0,c.jsx)(lr.e$,{backendProps:{community_theme_settings:{default_appearance:"light"}},children:(0,c.jsx)(Nre,{isLoadingAppData:r})})},HomePage:function(e){var t=e.community_member_id,r=e.display_welcome_banner;return(0,c.jsxs)("div",{children:[r&&(0,c.jsx)(uae,{communityMemberId:t}),(0,c.jsx)(aae,{})]})},WelcomeBanner:uae,HomeRightSidebar:OpenQPModal:rt.h,QPEditPost:function(e){var t=e.currentSpaceId,r=e.postSlug,i=Rle((0,n.useState)(!1),2),o=i[0],s=i[1],l=Rle((0,n.useState)(!1),2)[1];var u=function(){s(!1)},d=new f.QueryClient(p.Vr);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{type:"button",onClick:children:[(0,c.jsx)("h4",{children:(0,a.t)("edit_post")}),(0,c.jsx)("div",{className:"dropdown-menu__descriptor",children:(0,a.t)("edit_post_description")})]}),(0,c.jsx)(f.QueryClientProvider,{client:d,children:(0,c.jsx)(v.HB,{children:o&&(0,c.jsx)(Lle,{currentSpaceId:t,postSlug:r,closeModal:u,onPostChange:children:(0,c.jsx)(Mle.Y,{show:!0,closeModal:u,currentSpaceId:t})})})})]})},SuggestedSpacesCarousel:function(){var e=(0,rae.R)(),t=e.spaces,r=e.fetchSpaceSuggestions,i=e.spacesHasNextPage;(0,n.useEffect)((,[]);return t.length>2?(0,c.jsx)("div",{className:"carousel carousel--suggested-spaces",children:(0,c.jsx)(yae.l,{cards:t,renderCardsOnpage:function(e){var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,o=void 0===i?2:i;return t.slice(n,o).map((function(e){return(0,c.jsx)(iae.p,{id:e.id,url:e.url,emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,name:e.name,totalMembers:e.total_members},e.id)}))},cardsPerPage:3,cardsHaveNextPage:i,fetchCards:r})}):(0,c.jsx)("div",{})},LandingPageSettings:Vh,CookieStatus:function(){return document.cookie?null:window.location!==window.parent.location?(0,c.jsx)(Xoe,{isThirdParty:!0}):(0,c.jsx)(Xoe,{})},SpaceCoverImage:Kie.Z.SpaceCoverImage,CreateSpaceButton:Kie.Z.CreateSpaceButton,EditSpaceButton:Kie.Z.EditSpaceButton,PostsPostViewList:Nle.PostViewList,ImagePostCarousel:Qle(j),SearchV2:tae._,"Spaces.New":Kie.Z.New,"Posts.Show":Nle.Show,"Events.New":eae.Z.New,MemberDirectory:Nee,App:ooe,CommunityMemberSelect:l.NG,PaywallPrices:yr.O,GDPRCookieBanner:T,Checkout:function(e){var t=e.paywall,r=e.currentCommunity,i=e.isTaxCollectionEnabled,o=e.currentCommunityMember,a=e.alreadyPurchased,s=e.currentUser,l=e.loginUrl,u=e.communityRootUrl,d=e.processorId,m=e.checkoutConfirmationUrl,h=e.processorKey,b=e.couponsEnabled,y=e.isMemberAddressRequired,v=(0,n.useMemo)((function(){return(0,tse.O)({stripeAccountId:d,stripePublicKey:h,locale:window.locale})}),[h,d]),g=t.prices[0],x=t.prices.find((function(e){return e.preferred}));x&&(g=x);var _=(0,pr.cI)({defaultValues:{community_id:r.id,user_id:null===s||void 0===s?void 0:s.id,paywall_price_id:g.id,coupon_code_applied:!1,community_member_billing_info_attributes:{},community_member_billing_info_address_attributes_complete:!y}}),j=new f.QueryClient(p.Vr);return(0,ese.H)("paywall-checkout"),(0,c.jsx)(Xae.Elements,{stripe:v,options:nse.jP,children:(0,c.jsx)(lr.hk,{theme:lr.v.default,children:(0,c.jsx)(f.QueryClientProvider,{client:j,children:(0,c.jsx)(pr.RV,gle(gle({},_),{},{children:(0,c.jsxs)(rse.G,{paywall:t,currentCommunity:r,isTaxCollectionEnabled:i,currentUser:s,currentCommunityMember:o,alreadyPurchased:a,loginUrl:l,communityRootUrl:u,checkoutConfirmationUrl:m,couponsEnabled:b,isMemberAddressRequired:y,children:[(0,c.jsx)(PM.q,{children:(0,c.jsx)("title",{children:t.display_name})}),(0,c.jsx)("div",{className:"paywall-checkout-wrapper",children:(0,c.jsxs)("div",{className:"paywall-checkout-container",children:[(0,c.jsx)("div",{className:"paywall-info",children:(0,c.jsxs)("div",{className:"paywall-info__content",children:[(0,c.jsx)(hle,{}),(0,c.jsx)(yle,{})]})}),(0,c.jsx)("div",{className:"user-info",children:(0,c.jsx)("div",{className:"paywall-info__content",children:(0,c.jsx)(ple,{})})})]})})]})}))})})})},"PaywallCoupons.List":wae.List,AppBarWrapper:function(){return(0,c.jsx)(f.QueryClientProvider,{client:p.Eh,children:(0,c.jsx)(Ble.Q,{children:(0,c.jsx)(v.HB,{includeSidebar:!0,children:(0,c.jsx)(l.VW,{children:(0,c.jsx)(sn.VK,{children:(0,c.jsx)(Ule.x,{})})})})})})},CommunityOnboardingGettingStartedSection:function(){return(0,c.jsx)(f.QueryClientProvider,{client:h,children:(0,c.jsx)(l.VW,{children:(0,c.jsx)(m.f,{})})})},StandaloneTipTapBlockEditor:Qle(cr.R),PaywallsAdmin:Yae.u,PaywallGroupsAdmin:function(){return(0,c.jsx)(l.VW,{children:(0,c.jsx)(f.QueryClientProvider,{client:Oae,children:(0,c.jsx)(ne.DQ,{children:(0,c.jsx)(gx,{})})})})},PaywallSubscriptionsAdminIndex:Kx,PaywallChargesAdminIndex:dx,BulkImportTrialPaywallSubscriptionFormRailsView:function(e){var t=e.paywall_id,r=e.paywall_price_id,n=e.paywall_trial_days,i=e.paywall_coupon_code,o=e.paywall_skip_date_validations,a=void 0===o||o,s=e.hide_notify_member_form,l=void 0!==s&&s;return(0,c.jsx)(Pae.aH,{children:(0,c.jsx)(Sae.X,{children:(0,c.jsx)(Aae,{paywallId:t,paywallPriceId:r,paywallTrialDays:n,paywallCouponCode:i,skipDateValidations:a,hideNotifyMemberForm:l,children:(0,c.jsx)($ae,{})})})})},InvitationLinkInformation:function(e){var t=e.invitationLinkName,r=e.invitationLinkActive,n=e.membersCount,i=e.spaces,o=e.spaceGroups,s=e.shouldShowPaywall,u=e.paywallString,d=e.paywallCouponString,f=r?"success":"default";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)(l.ZT.LabelLg,{children:t}),(0,c.jsx)(l.Ct,{variant:f,children:(0,c.jsx)("div",{className:"px-2 py-1",children:r?(0,a.t)("invitation_links.summary.badge.active"):(0,a.t)("invitation_links.summary.badge.revoked")})})]}),(0,c.jsx)("div",{className:"pt-1",children:(0,c.jsx)(l.ZT.LabelSm,{color:"text-dark",children:(0,a.t)("invitation_links.members_joined",{count:n})})}),(0,c.jsxs)("div",{className:"flex pt-2",children:[(0,c.jsx)(vae,{tooltipText:i.join(", "),text:(0,a.t)("invitation_links.summary.spaces",{count:i.length}),hide:i.length<=0}),(0,c.jsx)(vae,{tooltipText:o.join(", "),text:(0,a.t)("invitation_links.summary.space_groups",{count:o.length}),hide:o.length<=0}),(0,c.jsx)(vae,{tooltipText:u,text:(0,a.t)("invitation_links.summary.paywall"),hide:!s}),(0,c.jsx)(vae,{tooltipText:d,text:(0,a.t)("invitation_links.summary.paywall_coupon"),hide:!s||!d})]})]})},DebugSessions:function(e){var t=e.debug_session,r=e.debug_session_logs;return(0,c.jsx)("div",{className:"custom-login-debug-sessions",children:(0,c.jsx)("div",{className:"custom-login-debug-sessions-content",children:(0,c.jsxs)(l.s_,{children:[(0,c.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,c.jsx)("div",{className:"alert-wrapper",children:(0,c.jsx)("div",{children:(0,a.t)("custom_logins.debug_session_logs.experimental_feature_warning")})})}),(0,c.jsx)("br",{}),t.status===d&&(0,c.jsx)("div",{className:"alert alert-success",role:"alert",children:(0,c.jsx)("div",{className:"alert-wrapper",children:(0,c.jsx)("div",{children:(0,a.t)("custom_logins.debug_session_logs.success_sso")})})}),t.status!==d&&(0,c.jsx)("div",{className:"alert alert-error",role:"alert",children:(0,c.jsx)("div",{className:"alert-wrapper",children:(0,c.jsx)("div",{children:(0,a.t)("custom_logins.debug_session_logs.fail_sso")})})}),(0,c.jsx)("br",{}),(0,c.jsx)("h3",{children:(0,a.t)("custom_logins.debug_session_logs.logs")}),(0,c.jsx)("br",{}),r.map((function(e){var t=(0,a.t)("custom_logins.debug_session_logs.".concat(e.step)),r=e.status===d?null:t;return(0,c.jsx)(l.UQ,{defaultActiveItemTitle:r,children:(0,c.jsx)(l.UQ.Item,{title:t,showIcon:!0,isDone:e.status===d,children:e.context.map(()})},e)}))]})})})},VideoPlayer:gt.Y,LiveStreamSettings:function(){return(0,c.jsx)(sr,{children:(0,c.jsx)($t,{hideHeader:!0})})},AnalyticsHeader:function(){return(0,c.jsx)(b.b,{className:"lg:-mt-16",leftContent:(0,c.jsx)(y.Z.LabelMd,{weight:"semibold",children:(0,c.jsx)("a",{className:"text-dark",href:"/",children:(0,a.t)("settings.analytics.title")})})})},SsoInfoMessage:function(){return(0,c.jsxs)(l.vD,{className:"flex gap-x-4",children:[(0,c.jsx)("div",{children:(0,c.jsx)(bt.JO,{type:"20-info",size:24,"aria-hidden":"true"})}),(0,c.jsx)(tn.Z,{html:(0,a.t)("settings_sso_add_members_suggestion")})]})}},Jle=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vle(e,t)}(a,e);var t,r,n,o=Zle(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.apply(this,arguments)}return t=a,(r=[{key:"connect",value:function(){var e=this.element.dataset,t=e.component,r=e.props,n=r?JSON.parse(r):{},o=Kle[t];o?i.render((0,c.jsx)(o,Gle({},n)),this.element):console.error("Error: invalid component - ".concat(t))}},{key:"disconnect",value:])&&zle(t.prototype,r),n&&zle(t,n),a}(o.Qr)},64023:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"submitForm",value:function(e){"production"===window.RAILS_ENV||"staging"===window.RAILS_ENV?(e.preventDefault(),grecaptcha.execute()):this.formTarget.submit()}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},22998:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){this.excludeChildClass=["block-header","block-header__title","block-header__actions","block--space-group"]}},{key:"dragstart",value:function(e){this.excludeChildClass.some((function(t){return e.target.classList.contains(t)}))?this.currentTarget=null:this.currentTarget=e.target,this.currentTarget.classList.add("selected"),e.dataTransfer.effectAllowed="move"}},{key:"dragover",value:function(e){if(e.preventDefault(),!this.currentTarget)return!0;var t=e.target.closest(".nav-link");return this.draggableTargets.indexOf(e.target)<this.draggableTargets.indexOf(this.currentTarget)?t.classList.add("drag-over-top"):t.classList.add("drag-over-bottom"),!0}},{key:"dragenter",value:function(e){e.preventDefault()}},{key:"dragleave",value:function(e){e.preventDefault();var t=e.target.closest(".nav-link");t.classList.remove("drag-over-top"),t.classList.remove("drag-over-bottom")}},{key:"drop",value:function(e){if(!this.currentTarget)return!0;var t=e.target.closest(".nav-link"),r=this.currentTarget;if(!t||!r)return!0;var n=t.compareDocumentPosition(r);4&n?t.insertAdjacentElement("beforebegin",r):2&n&&t.insertAdjacentElement("afterend",r),e.preventDefault()}},{key:"dragend",value:function(){var e=[];if(!this.currentTarget)return!0;this.draggableTargets.forEach((function(t,r){t.classList.remove("drag-over-top"),t.classList.remove("drag-over-bottom"),e[r]=t.getAttribute("data-id")})),fetch(this.element.dataset.saveUrl,{body:JSON.stringify({order_array:e}),method:"POST",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;window.history.pushState({path:e},"",e)})),setTimeout(function(){this.currentTarget.classList.remove("selected")}.bind(this),500)}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["draggable"]},43522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=".block--space-group",c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,n,s=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return t=c,(r=[{key:"connect",value:,{key:"dragstart",value:function(e){var t=this;if(this.excludeChildClass.some((function(t){return e.target.classList.contains(t)}))?this.currentTarget=null:this.currentTarget=e.target.closest(l),this.excludeChildClass.some(())return!0;e.dataTransfer.setData("application/drag-key",this.currentTarget.getAttribute("data-id")),e.dataTransfer.effectAllowed="move",this.parentDraggableTargets.forEach((function(e,r){t.parentDraggableTargets.indexOf(t.currentTarget)!=r&&e.childNodes.forEach((function(e){"#text"!=e.nodeName&&(e.style.pointerEvents="none")}))}))}},{key:"dragover",value:function(e){return e.preventDefault(),!this.currentTarget||(-1==this.parentDraggableTargets.indexOf(this.currentTarget)||""!=e.dataTransfer.getData("application/drag-key")||this.parentDraggableTargets.indexOf(e.target.closest(l))==this.parentDraggableTargets.indexOf(this.currentTarget)||(this.parentDraggableTargets.indexOf(e.target.closest(l))<this.parentDraggableTargets.indexOf(this.currentTarget)?e.target.closest(l).classList.add("drag-over-top"):e.target.closest(l).classList.add("drag-over-bottom")),!0)}},{key:"dragenter",value:function(e){e.preventDefault()}},{key:"dragleave",value:function(e){if(e.preventDefault(),!this.currentTarget)return!0;e.target.closest(l).classList.remove("drag-over-top"),e.target.closest(l).classList.remove("drag-over-bottom")}},{key:"drop",value:function(e){if(!this.currentTarget)return!0;var t=e.target.closest(l),r=this.currentTarget;if(!t||!r)return!0;var n=t.compareDocumentPosition(r);4&n?t.insertAdjacentElement("beforebegin",r):2&n&&t.insertAdjacentElement("afterend",r),e.preventDefault()}},{key:"dragend",value:function(){var e=[];if(!this.currentTarget)return!0;this.parentDraggableTargets.forEach((function(t,r){t.childNodes.forEach((function(e){"#text"!=e.nodeName&&(e.style.pointerEvents="default")})),t.classList.remove("drag-over-top"),t.classList.remove("drag-over-bottom"),e[r]=t.getAttribute("data-id")})),fetch(this.element.dataset.saveUrl,{body:JSON.stringify({order_array:e}),method:"POST",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;Turbolinks.visit(e)})),this.currentTarget=null}}])&&i(t.prototype,r),n&&i(t,n),c}(n.Qr);c.targets=["parentDraggable"]},84979:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r(91296),i=r.n(n),o=r(67931),a=r(66577),s=r.n(a),l=r(22837),c=r(41431),u=r(79292),d=r(76752);function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.editor=r.editor,this.editorElement=r,this.afterCompleteCallback=n;var i=l.default.Attachment.attributesForFile(t);this.attachment=new l.default.Attachment(i),this.tempAttachment=new l.default.Attachment({content:this.tempAttachmentContent(),sgid:"".concat((new Date).getTime(),"-").concat(Math.random())}),this.directUpload=new u.DirectUpload(t,d.av.actionTextDirectUpload.create(),this)}var t,r,n;return t=e,r=[{key:"start",value:,{key:"insertTempAttachment",value:,{key:"removeTempAttachment",value:,{key:"insertAttachment",value:function(e){this.attachment.setAttributes({sgid:e.attachable_sgid,url:this.createBlobUrl(e.signed_id,e.filename)}),this.editor.insertAttachment(this.attachment)}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;e.upload.addEventListener("progress",(function(e){var r=e.loaded/e.total*100;t.tempAttachment.setAttributes({content:t.tempAttachmentContent(r)})}))}},{key:"directUploadDidComplete",value:function(e,t){if(e)throw this.afterCompleteCallback(),new Error("Direct upload failed: ".concat(e));this.editor.composition.attachments.includes(this.tempAttachment)&&(this.removeTempAttachment(),this.insertAttachment(t)),this.afterCompleteCallback()}},{key:"createBlobUrl",value:,{key:"tempAttachmentContent",value:function(){return parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0),this.file.name)}},{key:"directUploadUrl",get:function(){return this.editorElement.dataset.directUploadUrl}},{key:"blobUrlTemplate",get:],r&&f(t.prototype,r),n&&f(t,n),e}();function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v="trix-active",g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,r,n,o=b(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).removeAttachment=function(t){t.preventDefault();var r=t.target.closest("[data-trix-attachment]"),n=new c.f(e.editor);n.recordUndoEntry("remove attachment"),n.removeAttachmentById(parseInt(r.dataset.trixId,10))},e}return t=a,(r=[{key:"connect",value:function(){this.editor=this.fieldTarget.editor,this.uploadingFilesCount=0,this.processing=!1,this.element.dataset.mentionsEnabled&&this.initializeTribute(),this.element.dataset.embedsEnabled&&this.activateEmbed(),this.activeHr(),this.overrideTheAttachmentBehaviour()}},{key:"overrideTheAttachmentBehaviour",value:function(){var e=this;this.fieldTarget.addEventListener("trix-file-accept",(function(t){t.preventDefault(),e.incrementUploadingFileCount(),new m(t.file,e.fieldTarget,e.decrementUploadingFileCount.bind(e)).start()})),this.fieldTarget.addEventListener("trix-change",(function(e){var t=e.target.editor,r=t.getPosition()||0;t.composition.attachments.forEach((function(e){if(e.attributes.values.url&&e.attributes.values.url.startsWith("blob")){var n=t.getDocument().getRangeOfAttachment(e);t.setSelectedRange(n),t.deleteInDirection("backward"),r>n[1]&&r--}})),r=Math.max(r,0),t.setSelectedRange([r,r])}))}},{key:"processing",set:function(e){this.data.set("processing",e)}},{key:"incrementUploadingFileCount",value:function(){this.uploadingFilesCount++,this.processing=this.uploadingFilesCount>0}},{key:"decrementUploadingFileCount",value:function(){this.uploadingFilesCount--,this.processing=this.uploadingFilesCount>0}},{key:"initializeTribute",value:function(){this.tribute=new(s())({allowSpaces:!0,lookup:"just_name",values:this.fetchUsers.bind(this),menuItemTemplate:),this.tribute.attach(this.fieldTarget),this.fieldTarget.addEventListener("tribute-replaced",this.replaced),this.tribute.range.pasteHtml=this._pasteHtml.bind(this)}},{key:"disconnect",value:,{key:"fetchUsers",value:function(e,t){fetch("/users/mentions.json?query=".concat(e,"&is_private_space=").concat(this.element.dataset.isPrivateSpace,"&space_id=").concat(this.element.dataset.spaceId)).then((function(e){return e.json()})).then((function(e){return t(e)})).catch(()}},{key:"replaced",value:function(e){var t=e.detail.item.original,r=new l.default.Attachment({content:t.content,contentType:"mention",sgid:t.sgid});this.editor.insertAttachment(r),this.editor.insertString(" ")}},{key:"_pasteHtml",value:function(e,t,r){var n=this.editor.getPosition();this.editor.setSelectedRange([n-r,n]),this.editor.deleteInDirection("backward")}},{key:"activeHr",value:function(){var e=this;this.element.addEventListener("trix-initialize",(function(e){e.target.toolbarElement.querySelector("[data-trix-button-group=block-tools]").insertAdjacentHTML("afterbegin",'\n        <button type="button" class="trix-button" data-trix-action="x-horizontal-rule" title="Horizontal Rule" tabindex="-1">\u2501</button>\n      ')})),this.element.addEventListener("trix-action-invoke",(function(t){if("x-horizontal-rule"==t.actionName){var r=t.target.editor,n=new l.default.Attachment({content:"<hr>",contentType:"vnd.rubyonrails.horizontal-rule.html"});r.insertAttachment(n),e.fieldTarget.dispatchEvent(new Event("change"))}}))}},{key:"activateEmbed",value:function(){var e=this.fieldTarget.toolbarElement.querySelector(".trix-embed-button"),t=this.fieldTarget.toolbarElement.querySelector(".trix-dialog--embed");this.editor=this.fieldTarget.editor;var r=this.fieldTarget.toolbarElement.querySelector(".trix-button-group--block-tools"),n=this.fieldTarget.toolbarElement.querySelector(".trix-dialogs");e||t||(r.insertAdjacentHTML("beforeend",'<button type="button" class="trix-button trix-embed-button" data-trix-attribute="embed" data-trix-action="embed" title="Embed" tabindex="-1">Embed</button>'),n.insertAdjacentHTML("beforeend",'<div class="trix-dialog trix-dialog--link trix-dialog--embed" data-trix-dialog="embed" data-trix-dialog-attribute="embed">\n    <div class="trix-dialog__link-fields">\n    <input type="text" name="embed" class="trix-input trix-input--dialog" placeholder="Paste a YouTube, Vimeo, Twitter, Facebook, Instagram, or other URL" aria-label="embed code" required="" data-trix-input="" disabled="disabled">\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" data-trix-custom="add-embed" value="Add">\n      </div>\n    </div>\n  </div>')),this.element.parentElement.querySelector('[data-trix-action="embed"]').addEventListener("click",function(e){var t=this;this.debouncedScrollHandler=i()((function(){var r=t.element.parentElement.querySelector('[data-trix-dialog="embed"]'),n=t.element.parentElement.querySelector('[name="embed"]');e.target.classList.contains(v)?(e.target.classList.remove(v),r.classList.remove(v),r.dataset.trixActive=!1,n.blur(),r.removeAttribute("data-trix-active"),n.setAttribute("disabled","disabled")):(e.target.classList.add(v),r.classList.add(v),r.dataset.trixActive=!0,n.removeAttribute("disabled"),n.focus())}),50),this.debouncedScrollHandler()}.bind(this)),this.element.parentElement.querySelector('[data-trix-custom="add-embed"]').addEventListener("click",function(){var e=this,t=this.element.parentElement.querySelector('[name="embed"]').value;t&&fetch(this.element.parentElement.querySelector("[data-embeds-path]").dataset.embedsPath,{body:JSON.stringify({embed:{content:t,embed_format:"oembed"}}),method:"POST",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var r=new l.default.Attachment({content:t.content,contentType:"embed",sgid:t.sgid});e.editor.insertAttachment(r),e.editor.insertLineBreak(),e.fieldTarget.dispatchEvent(new Event("change"))}));var r=this.element.parentElement.querySelector('[data-trix-action="embed"]'),n=this.element.parentElement.querySelector('[data-trix-dialog="embed"]'),i=this.element.parentElement.querySelector('[name="embed"]');r.classList.contains(v)&&(r.classList.remove(v),n.classList.remove(v),delete n.dataset.trixActive,i.setAttribute("disabled","disabled"))}.bind(this))}},{key:"activateAutoLinker",value:function(){var e;document.execCommand("AutoUrlDetect",!1,!1),this.element.addEventListener("trix-change",(function(){if(!0!==e){var t=document.querySelector("trix-editor"),r=t.editor.getSelectedRange(),n=t.editor.getDocument().toString();if(null===n.substring(r[0]-1,r[0]).match(/\s/))return!0;var i=n.lastIndexOf(" ",r[0]-2),o=n.substring(i+1,r[0]-1);if(!o.match(/^(http:\/\/|https:\/\/)?[a-z0-9\-.]+?\.[a-z]+[/]?.*$/i)||["e.g.","i.e.","e.g","i.e"].includes(o))return!0;if(t.editor.setSelectedRange([i+1,r[0]-1]),!1!==t.editor.attributeIsActive("href"))return t.editor.setSelectedRange([r[0],r[1]]),!0;var a=o;-1==a.indexOf("://")&&(a="https://"+a);var s=o.replace("http://","").replace("https://","").replace(/^www\./,"");s.length>40&&(s=s.substr(0,37)+"...");var l=r[0]-(o.length-s.length);return e=!0,t.editor.recordUndoEntry("Auto Link"),t.editor.deleteInDirection("forward"),t.editor.insertString(s),t.editor.setSelectedRange([i+1,i+1+s.length]),t.editor.activateAttribute("href",a),t.editor.setSelectedRange([l-1,l-1]),t.editor.setSelectedRange([l,l]),e=!1,!0}}))}}])&&p(t.prototype,r),n&&p(t,n),a}(o.Qr);g.targets=["field"]},64230:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"redirectToParamPath",value:function(e){var t=new URLSearchParams(window.location.search);t.set(this.element.dataset.param,e.target.value),window.location.search=t}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},16267:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"updateButtonProps",value:function(){this.copyLinkButtonTarget.innerHTML=this.copyLinkButtonTarget.dataset.linkCopiedText,this.copyLinkButtonTarget.classList.contains("share-to-web-url__btn-copied")||this.copyLinkButtonTarget.classList.add("share-to-web-url__btn-copied")}},{key:"toggleFieldDescription",value:,{key:"setInputValueForShareUrl",value:,{key:"toggleCheckboxForMinimalLayout",value:,{key:"uncheckCheckboxForShowPostTeaser",value:,{key:"success",value:function(e){var t=e.detail[0],r=this.checkboxShareToWebTarget.dataset.shareToWebOnDescription,n=this.checkboxShareToWebTarget.dataset.shareToWebOffDescription,i=t.share_post_link,o=t.minimal_layout,a=t.post_id,s=t.share_post_enabled,l=document.querySelector(".share-to-web-".concat(a," .field-description"));s?(this.toggleFieldDescription(l,r),this.setInputValueForShareUrl(i),this.toggleCheckboxForMinimalLayout(o)):(this.uncheckCheckboxForShowPostTeaser(),this.toggleFieldDescription(l,n))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["copyLinkButton","checkboxShowTeaser","inputForShareUrl","checkboxShareToWeb","checkboxMinimalLayout"]},14746:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"focus",value:])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["email"]},13186:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(90161);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,s,l=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,(r=[{key:"connect",value:function(){this.linkTargets.forEach((function(e){document.location.href.startsWith("".concat(e.href,"/"))||document.location.href===e.href?(e.classList.add("nav-link--active"),e.classList.remove("nav-link--inactive"),(0,n.Z)(e,{scrollMode:"if-needed",block:"center",inline:"center"})):(e.classList.remove("nav-link--active"),e.classList.add("nav-link--inactive"))}))}}])&&i(t.prototype,r),s&&i(t,s),c}(r(67931).Qr);l.targets=["link"]},99859:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(67931);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l="sidebar--floating",c="has-sidebar",u="header--floating",d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(d,e);var t,r,n,s=a(d);function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),s.apply(this,arguments)}return t=d,(r=[{key:"connect",value:function(){this.hasLayoutTarget&&this.hasSidebarTarget&&this.hasSidebarBtnTarget&&this.initMenu(this.layoutTarget,this.sidebarTarget,this.sidebarBtnTarget),this.hideFloating()}},{key:"toggleSidebarIcon",value:function(){var e=this;function t(e,t,r){e.classList.contains(l)?(t.classList.add("hidden"),r.classList.remove("hidden")):(t.classList.remove("hidden"),r.classList.add("hidden"))}t(this.sidebarTarget,this.arrowIconTarget,this.menuIconTarget),window.addEventListener("resize",()}},{key:"initMenu",value:function(e,t,r){var n=window.matchMedia("(min-width: 992px)");window.addEventListener("resize",(function(){!n.matches&&t.classList.contains(l)?e.classList.remove(c):n.matches||t.classList.contains(l)?n.matches&&t.classList.remove("sidebar--mobile-open"):(e.classList.add(c),t.classList.remove("hidden")),!n.matches&&r.parentElement.classList.contains(u)?r.parentElement.classList.remove(u):n.matches&&t.classList.contains(l)&&r.parentElement.classList.add(u)}))}},{key:"toggleFloating",value:function(){var e,t,r;this.toggleSidebarIcon(),this.hasSidebarTarget&&this.hasLayoutTarget&&(this.layoutTarget.classList.toggle(c),e=this.sidebarTarget,t=this.sidebarBtnTarget,r=this.layoutTarget,window.matchMedia("(min-width: 992px)").matches?(e.classList.toggle(l),e.classList.remove("sidebar--mobile-open"),t.parentElement.classList.toggle(u)):(e.classList.remove(l),e.classList.toggle("sidebar--mobile-open"),t.parentElement.classList.remove(u),r.classList.remove(c)))}},{key:"showFloating",value:,{key:"hideFloating",value:function(){var e=this;this.toggleSidebarIcon(),window.addEventListener("mouseover",(function(t){e.sidebarTarget.contains(t.target)||e.sidebarBtnTarget.contains(t.target)?e.sidebarTarget.classList.remove("hidden"):e.layoutTarget.classList.contains(c)||e.sidebarTarget.classList.add("hidden")}))}}])&&i(t.prototype,r),n&&i(t,n),d}(n.Qr);d.targets=["layout","sidebar","sidebarBtn","arrowIcon","menuIcon"]},69230:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TabsController:()=>d,default:()=>d});var n=r(67931);function i(e){return"show"+((t=e).charAt(0).toUpperCase()+t.slice(1));var t}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){ar t,r,n;return t=e,r=[{key:"selectedContent",get:function(){return this.findContent(this.selectedTabName)}},{key:"previousContent",get:function(){return this.findContent(this.previousTabName)}},{key:"selectedTab",get:set:function(e){this.data.set("selectedTab",e)}},{key:"previousTab",get:function(){var e=this.previousTabName;return e&&this.findTab(e)},set:function(e){this.data.set("previousTab",e)}},{key:"setSelectedTab",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.previousTab=this.selectedTabName),this.selectedTab=e}},{key:"selectedTabName",get:function(){return this.data.get("selectedTab")}},{key:"previousTabName",get:,{key:"findContent",value:,{key:"findTab",value:,{key:"tabSelector",value:function(e){return"[data-action$='".concat(this.identifier,"#").concat(i(e),"']")}},{key:"identifier",get:function(){return this.controller.identifier}},{key:"element",get:function(){return this.controller.element}},{key:"data",get:function(){return this.controller.data}},{key:"targets",get:function(){return this.controller.targets}}],r&&o(t.prototype,r),n&&o(t,n),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,r,n,o=c(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.apply(this,arguments)}return t=u,(r=[{key:"initialize",value:function(){var e,t;t=(e=this).constructor.prototype,e._tabs.forEach((function(e){i(e)in t||(t[i(e)]=function(t){t&&t.preventDefault(),this._tabState.setSelectedTab(e),this.selectedTab!==this.previousTab&&(this._showSelectedTabContent(),this._addSelectedTabClass(),this.selected())})})),this._tabState=new a(this)}},{key:"connect",value:function(){this._tabs.length>0&&(this._hideTabs(),this._tabState.setSelectedTab(this._initialTabName,!1),this._showSelectedTabContent(),this._addSelectedTabClass())}},{key:"selected",value:function(){}},{key:"selectedContent",get:function(){return this._tabState.selectedContent}},{key:"previousContent",get:function(){return this._tabState.previousContent}},{key:"selectedTab",get:function(){return this._tabState.selectedTab}},{key:"previousTab",get:,{key:"_hideTabs",value:function(){var e=this;this._tabs.forEach((function(t){e._initialTabName!==t&&e._hideContent(e.targets.find(t))}))}},{key:"_initialTabName",get:,{key:"_tabs",get:function(){var e=this.element.dataset.tabs;return e?e.trim().split(/\s+/):this.constructor.tabs}},{key:"_selectedTabClass",get:,{key:"_showSelectedTabContent",value:,{key:"_hideContent",value:function(e){e&&(e.style.display="none")}},{key:"_showContent",value:,{key:"_addSelectedTabClass",value:,{key:"_removeSelectedTabClassFromPreviousTab",value:])&&s(t.prototype,r),n&&s(t,n),u}(n.Qr);d.tabs=[],d.selectedTabClass=""},92254:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(64687),i=r.n(n);function o(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,r,n,c,u,d=l(f);function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=d.call.apply(d,[this].concat(r))).isSubmitting=!1,e.setSubmitting=e}return t=f,r=[{key:"connect",value:function(){var e=document.querySelector('meta[name="stripe-key"]');if(null!==e){var t=e.getAttribute("content");this.stripe=Stripe(t);var r=this.stripe.elements();this.card=r.create("card"),this.card.mount(this.cardTarget),this.card.addEventListener("change",this.changed.bind(this))}}},{key:"changed",value:function(e){e.error?this.errorTarget.textContent=e.error.message:this.errorTarget.textContent=""}},{key:"submit",value:(c=i().mark((function e(t){var r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSubmitting){e.next=2;break}return e.abrupt("return");case 2:return this.setSubmitting(!0),t.preventDefault(),e.next=6,this.stripe.createToken(this.card).then((function(e){e.error?r.errorTarget.textContent=e.error.message:r.handleToken(e.token)}));case 6:this.setSubmitting(!1);case 7:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=c.apply(e,t);function a(e){o(i,r,n,a,s,"next",e)}function s(e){o(i,r,n,a,s,"throw",e)}a(void 0)}))},function(e){return u.apply(this,arguments)})},{key:"handleToken",value:function(e){this.addHiddenField("community[processor]","stripe"),this.addHiddenField("community[card_token]",e.id),Rails.fire(this.formTarget,"submit")}},{key:"addHiddenField",value:function(e,t){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",e),r.setAttribute("value",t),this.formTarget.appendChild(r)}}],r&&a(t.prototype,r),n&&a(t,n),f}(r(67931).Qr);u.targets=["card","error","form"]},28277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=r(36464),c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,n,s=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return t=c,(r=[{key:"connect",value:function(){var e=this.element.dataset.timestamp;this.element.innerHTML=l(new Date(e))}}])&&i(t.prototype,r),n&&i(t,n),c}(n.Qr);c.targets=["timestamp"]},75467:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:function(){var e=this;this.toggleClass=this.data.get("class")||"hidden",(window.location.hash==this.element.dataset.path||this.element.dataset.open)&&this.toggle(),this.toggleTriggerTarget.dataset.open&&("true"==this.toggleTriggerTarget.dataset.open?(this.toggleTriggerTarget.classList.add("open"),this.toggleableTargets.forEach((function(t){t.classList.remove(e.toggleClass)}))):(this.toggleTriggerTarget.classList.remove("open"),this.toggleableTargets.forEach((function(t){t.classList.add(e.toggleClass)}))))}},{key:"toggle",value:function(e){var t=this;e&&e.preventDefault(),e&&"change"==e.type&&"true"!=e.target.value||(history.pushState(null,null,this.element.dataset.path),this.toggleTriggerTarget.classList.add("hidden"),this.toggleTriggerTarget.classList.toggle("open"),this.element.dataset.inputFocus&&setTimeout(function(){document.getElementById(this.element.dataset.inputFocus).focus()}.bind(this),100),this.toggleableTargets.forEach(())}},{key:"done",value:])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr);s.targets=["toggleable","toggleTrigger"]},25040:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});r(67294);var n=r(73935),i=r(67931),o=r(91699),a=r(83729),s=r(85893);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,r,i,d=u(f);function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=d.call.apply(d,[this].concat(r))).hideAttachmentPreview=e}return t=f,(r=[{key:"connect",value:function(){this.contentPath=this.data.get("parentContentPath"),this.trixContentAttachmentPreviewHelperService=new o.W(this.element),this.showAttachmentPreview=this._showAttachmentPreview.bind(this),this.trixContentAttachmentPreviewHelperService.addAttachmentClickEventHandler(this.showAttachmentPreview)}},{key:"_showAttachmentPreview",value:function(e){var t=e.attachments,r=e.currentIndex;this.divElement=document.createElement("div"),document.querySelector("body").append(this.divElement),n.render((0,s.jsx)(a._,{attachments:t,currentIndex:r,onClose:this.hideAttachmentPreview,show:!0,path:this.contentPath}),this.divElement)}}])&&l(t.prototype,r),i&&l(t,i),f}(i.Qr)},18251:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r.r(t),r.d(t,{default:()=>s});var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,a,s=o(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(r=[{key:"connect",value:,{key:"updateSpaceLastSeenPost",value:function(){var e=this.element.dataset,t=e.url,r=e.readCount,n=e.totalCount,i=e.spaceId;t&&parseInt(n,10)>parseInt(r,10)&&fetch(t,{method:"PATCH",dataType:"script",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(().then((function(){var e=document.querySelectorAll(".unread_posts_count_".concat(i));if(e.length>0)for(var t=0;t<e.length;t++)e[t].remove()}))}}])&&n(t.prototype,r),a&&n(t,a),l}(r(67931).Qr)},84633:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(67931);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l="You have attempted to leave this page.  If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?",c=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,r,n,s=a(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return t=c,(r=[{key:"formIsChanged",value:function(){this.setChanged("true")}},{key:"leavingPage",value:function(e){if(this.isFormChanged()){if("turbolinks:before-visit"!=e.type)return e.returnValue=l,e.returnValue;window.confirm(l)||e.preventDefault()}}},{key:"allowFormSubmission",value:,{key:"setChanged",value:,{key:"isFormChanged",value:])&&i(t.prototype,r),n&&i(t,n),c}(n.Qr)},87169:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(67931),i=r(86281);nction s(e){var t=);return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return e)}(this,r)}}ar c="is-invalid",u=function(e){!u,e);var t,r,n,l=s(u);eturn t=u,(r=[{key:"checkPassword",value:,{key:"validatePassword",value:function(){this.checkPassword(this.passwordFieldTarget.value)||(this.passwordErrorMessageTarget.classList.remove("hidden"),this.passwordFieldTarget.classList.add(c))}},{key:"validateConfirmPassword",value:function(){this.passwordFieldTarget.value!=this.confirmPasswordFieldTarget.value&&(this.confirmPasswordErrorMessageTarget.classList.remove("hidden"),this.confirmPasswordFieldTarget.classList.add(c))}},{key:"resetPasswordValidation",value:function(){this.passwordErrorMessageTarget.classList.add("hidden"),this.passwordFieldTarget.classList.remove(c)}},{key:"resetConfirmPasswordValidation",value:function(){this.confirmPasswordErrorMessageTarget.classList.add("hidden"),this.confirmPasswordFieldTarget.classList.remove(c)}},{key:"resetNameValidation",value:function(){this.nameErrorMessageTarget.classList.add("hidden"),this.nameFieldTarget.classList.remove(c)}},{key:"submitForm",value:function(e){e.preventDefault(),document.getElementById("confirmPassword")?this.passwordFieldTarget.value==this.confirmPasswordFieldTarget.value?this.validateAndFormSubmit():(this.confirmPasswordErrorMessageTarget.classList.remove("hidden"),this.confirmPasswordFieldTarget.classList.add(c)):this.validateAndFormSubmit()}},{key:"validateAndFormSubmit",value:function(){this.checkPassword(this.passwordFieldTarget.value)?"production"===window.RAILS_ENV||"staging"===window.RAILS_ENV?grecaptcha.execute():this.formTarget.submit():(this.passwordErrorMessageTarget.classList.remove("hidden"),this.passwordFieldTarget.classList.add(c))}},{key:"validateName",value:function(){this.nameFieldTarget.value.length>0||(this.nameErrorMessageTarget.classList.remove("hidden"),this.nameFieldTarget.classList.add(c))}}])&&o(t.prototype,r),n&&o(t,n),u}(n.Qr);u.targets=["passwordField","confirmPasswordField","passwordErrorMessage","confirmPasswordErrorMessage","form","nameErrorMessage","nameField"]},31651:(e,t,r)=>{"use strict";var n=r(80812),i=r(76614),o=r.n(i),a=r(67931),s=r(99074),l=r(57328),c=r(69230),u=a.Mx.start(),d=r(67074);u.load((0,s.X)(d)),u.register("modal",l.u_),u.register("tabs",l.mQ),u.register("my-tabs",c.TabsController);var f=r(36808),m=r.n(f),p=r(44140),h=r.n(p);document.addEventListener("turbolinks:load",(function(){m().set("browser_time_zone",function(){var e=window.Intl;try{window.Intl=void 0;var t=h().determine().name();return window.Intl=e,t}catch(r){return h().determine().name()}}(),{expires:365,path:"/"})}));var b=r(79253);r(66337),window.Rails=r(18535),r(12918).start(),r(79292).start(),r(28729),r(22837),r(7552),window.I18n=n.Z,o().start();window.initialiseTippy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=(0,b.ZP)(e.querySelectorAll("[data-tippy-content]"),{allowHTML:!0});document.addEventListener("touchstart",(function e(){t.forEach((),document.removeEventListener("touchstart",e)}))},document.addEventListener("turbolinks:load",(function(){if(window.initialiseTippy(),document.querySelectorAll(".iframe-mode")[0])for(var e=document.getElementsByTagName("a"),t=0,r=e.length;t<r;t++)e[t].target="_blank";window.location.href.includes("show_back_link=true")&&window.history.replaceState({},document.title,location.href.split("?")[0])})),document.addEventListener("turbolinks:click",(function(e){var t=e.target;t.hash&&t.origin===window.location.origin&&t.pathname===window.location.pathname&&(Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(e.data.url,Turbolinks.uuid()),e.preventDefault())})),document.addEventListener("turbolinks:load",(function(){if(window.location.hash){var e=document.getElementById(window.location.hash.slice(1));if(e)return void e.scrollIntoView(!0);var t=document.getElementsByName(window.location.hash.slice(1));t.length&&t[0].scrollIntoView(!0)}})),window.loadOembed=function(){var e,t,r,n;null===(e=window.instgrm)||void 0===e||e.Embeds.process(),null===(t=window.FB)||void 0===t||t.init({xfbml:!0,version:"v12.0"}),null===(r=window.twttr)||void 0===r||null===(n=r.widgets)||void 0===n||n.load()},document.addEventListener("turbolinks:load",(),window.webview={isComingFromReactNativeWebview:!1,isComingFromReactNativeAuthenticatedWebview:!1,isInsideMobileWebview:!1},Rails.start()},75381:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var n=r(34128),i=r(76752);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={index:function(e){var t=e.filters,r=e.order,o=e.page,s=e.perPage,l=e.searchKey,c=l?{search_key:l}:{};return function(){return(0,n.UT)(i.av.admin.paywalls.charges.index({params:a({filters:t,page:o,per_page:s,order:r},c)}))}},refundCharge:function(e){var t=e.chargeProcessorId,r=e.params;return(0,n.Cu)(i.av.admin.paywalls.charges.refunds({chargeProcessorId:t}),r)}}},88116:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(34128),i=r(76752),o={index:function(e){var t=e.paywallId,r=e.skipDateValidations,o=e.couponStatuses;return function(){return(0,n.UT)(i.av.paywallCoupons.index({params:{paywall_id:t,skip_date_validations:r,status:o}}))}},createPaywallCoupon:function(e){var t=JSON.stringify({paywall_coupon:e});return(0,n.t5)(i.av.paywallCoupons.create(),{method:"POST",body:t,forReactQuery:!0})},updatePaywallCoupon:function(e,t){var r=JSON.stringify({paywall_coupon:t,forReactQuery:!0});return(0,n.t5)(i.av.paywallCoupons.update({paywallCouponId:e}),{method:"PATCH",body:r,forReactQuery:!0})},calculateDiscount:function(e){return(0,n.t5)(i.av.paywallCoupons.calculateDiscount({params:e}),{method:"GET",forReactQuery:!0})},destroyPaywallCoupon:function(e){return(0,n.t5)(i.av.paywallCoupons.destroy({paywallCouponId:e}),{method:"DELETE",forReactQuery:!0})}}},31772:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var n=r(34128),i=r(76752);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={index:function(e){var t=e.filters,r=e.order,o=e.page,s=e.perPage,l=e.searchKey,c=l?{search_key:l}:{};return function(){return(0,n.UT)(i.av.admin.paywalls.subscriptions.index({params:a({filters:t,order:r,page:o,per_page:s},c)}))}},create:function(e){var t=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.create(),t)},cancelAndRefundSubscription:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}),r)},resumeSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}))},refundOptionsSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.UT)(i.av.admin.paywalls.subscriptions.refundOptions({subscriptionProcessorId:t}))}}},82575:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var n=r(34128),i=r(76752),o={index:function(e){return(0,n.UT)(i.av.paywalls.affiliates.index(e))},invite:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.invite(),e)},attributions:{create:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.attributions.create(),e)}}}},74:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I,p:()=>M});var n=r(64687),i=r.n(n),o=r(96486),a=r(58533),s=r(88767),l=r(5167),c=r(35990),u=r(92863),d=r(86013),f=r(89992),m=r(48267),p=r(85893),h=function(){var e=(0,l.wh)(),t=e.isLoading,r=e.currentCommunityMember;return t?(0,p.jsx)(m.aN,{}):(0,p.jsxs)("div",{className:"space__gated locked-pane","data-testid":"post_section",children:[(0,p.jsx)(u.Z,{type:"home"}),(0,p.jsx)(f.Z.TitleLg,{as:"h2",children:(0,d.t)("no_posts_to_show")}),!(null===r||void 0===r||!r.is_admin)&&(0,p.jsxs)("p",{children:[(0,d.t)("homepage_admin_no_posts_description_part_1"),(0,p.jsx)("br",{}),(0,p.jsx)("a",{href:"https://community.circle.so/c/spaces/spaces",target:"_blank",rel:"noreferrer",children:I18n.t("homepage_admin_no_posts_description_part_2")})]})]})},b=r(169),y=r(1769),v=r(52968),g=r(34128),x=r(76752),_=r(31023),j=r(393),w=r(72114),O=r(72020),P=r(68375),S=r(86078),k=r(34974);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r I="home-page-posts",D=L=function(e){var t=A({},e),r=(0,l.wh)().currentCommunitySettings,n=(null===r||void 0===r?void 0:r.tailwind_posts_enabled)?v.Y:b.Y;return(0,P.HZ)(t.post)?(0,p.jsx)(O.W,N(N({},t),{},{event:t.post})):(0,p.jsx)(n,N(N({},t),{},{forcePostView:!0,usedIn:"home"}))},M=(0,k.P)((function(e){var t=e.defaultSort,r=(0,l.nT)(),n=(0,l.wh)(),u=(0,w.t)().sort,d=void 0===u?t:u,f=(0,_.d)(),m=f.removeRecord,b=f.findAndReplaceRecord,y=(0,s.useQueryClient)(),v=r.helpers.isDataLoading()||n.isLoading,O=[I,{sort:d}],P=(0,s.useInfiniteQuery)(O,(function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,g.UT)(x.av.homePagePosts.index({params:{page:t,sort:d}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),k=P.fetchNextPage,C=P.data,N=P.hasNextPage,T=P.isLoading,A=P.refetch,M=function(){var e,t=(e=i().mark((function e(t){var r,n,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(o.length>1&&void 0!==o[1]?o[1]:{}).refetch,n=t,void 0!==r&&!r){e.next=6;break}return e.next=5,y.fetchQuery(x.av.posts.show({spaceId:t.space_id,postSlug:t.slug}));case 5:n=e.sent;case 6:return e.abrupt("return",b(n,O));case 7:case"end":return e.stop()}}),e)})),;return (),R=F=(0,j.D)();if(v||T||F)return(0,p.jsx)(D,{});var B=(0,o.uniqBy)((0,o.flatten)(C.pages.map((function(e){return e.records}))),"id"),U=C.pages.map(();return B.length?(0,p.jsx)(c._x,{perPagePostIds:U,children:(0,p.jsx)("div",{className:"space__posts space__posts--posts !pb-16 lg:!pb-6","data-testid":"post_section",children:(0,p.jsx)(a.Z,{style:{overflow:"initial"},scrollThreshold:.5,next:k,hasMore:N,loader:(0,p.jsx)(S.m,{}),dataLength:B.length,scrollableTarget:"panel",children:B.map((function(e){return(0,p.jsx)(l.mE,{spaceId:e.space_id,children:(0,p.jsx)(L,{isRenderedOutsideTheSpace:!0,onPostChange:M,onPostDestroy:R,refetchPosts:A,post:e},e.id)},e.id)}))})})}):(0,p.jsx)(h,{})}),D)},87228:(e,t,r)=>{"use strict";r.d(t,{Oq:()=>Tt,lO:()=>At,po:()=>Nt,oq:()=>Et,mN:);var n=r(96486),i=r(86013),o=r(75301),a=r(46854),s=r(59729),l=r(55675),c=r(10617),u=r(85893);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){var t,r=e.lteValue,n=e.gteValue,o=e.localeRoot,f=e.queryParamsKey,m=(0,s.j)().onApply,p=h=Intl.NumberFormat("en-US",{minimumFractionDigits:2}),b=(0,a.r)(),y=function(e){if("0.0"===e||""===e||null===e||void 0===e)return"";var t=Number(p(e));return isNaN(t)?h.format(0):h.format(t/100)};return(0,u.jsx)(c.l,{defaultValues:(t={},d(t,f.lte,y(r)),d(t,f.gte,y(n)),t),onSubmit:function(e){var t,r=parseInt(p(e[f.lte])),n=parseInt(p(e[f.gte]));m((d(t={},f.lte,r),d(t,f.gte,n),t))},children:(0,u.jsxs)("div",{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",children:[(0,u.jsx)(c.l.Input,{name:f.gte,placeholder:(0,i.t)([o,"min_amount_placeholder"]),autoFocus:!0,transformValue:y}),(0,u.jsx)(c.l.Input,{name:f.lte,placeholder:(0,i.t)([o,"max_amount_placeholder"]),transformValue:y}),(0,u.jsx)(l.z,{variant:b,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})},m={amount:"amount",lte:"amount_lte",gte:"amount_gte"},p=function(e){var t=e.isInitialOpen,r=e.changeUrl,a=void 0===r||r,s=e.queryParamsKey,l=void 0===s?m:s,c=e.localeRoot,d=void 0===c?"settings.paywalls_admin_dashboard.filters.amount":c,p=(0,o.Xt)(),h=p.queryParams,b=p.updateUrl,y=h[l.lte],v=h[l.gte],g=Number(y)||0,x=Number(v)||0,_=isNaN(g)||isNaN(x)?"":(0,n.compact)([x/100,g/100]).join("-");return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"chip"]),title:(0,i.t)([d,"title"]),selectedText:_,isInitialOpen:t,onApply:function(e){var t=null!==e&&void 0!==e?e:{},r=t[l.lte],n=t[l.gte];a&&(b("page",1),b(l.lte,isNaN(r)?null:r),b(l.gte,isNaN(n)?null:n))},shouldShowRemoveButton:!0,children:(0,u.jsx)(f,{lteValue:y,gteValue:v,localeRoot:d,queryParamsKey:l})})};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={amount_paid:"amount",lte:"amount_lte",gte:"amount_gte"},v="settings.paywalls_admin_dashboard.filters.amount",g={name:"amount",filterKeys:Object.values(y),component:function(e){return(0,u.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryParamsKey:y,localeRoot:v},e))},label:(0,i.t)([v,"chip"])};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={total_amount_paid:"total_amount_paid",lte:"total_amount_paid_lte",gte:"total_amount_paid_gte"},w="settings.paywalls_admin_dashboard.filters.total_amount_paid",O={name:"total_amount_paid",filterKeys:Object.values(j),component:function(e){return(0,u.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryParamsKey:j,localeRoot:w},e))},label:(0,i.t)([w,"chip"])},P=r(56874);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C="settings.paywalls_admin_dashboard.filters.status",N="status",T={name:"charge_status",filterKeys:[N],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=P.mB.map((function(e){return{label:(0,i.t)([C,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([C,"chip"]),title:(0,i.t)([C,"title"]),selectedText:a||l[N],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(N,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([C,"legend"]),name:"subscription-statuses-filter",activeText:null!==a&&void 0!==a?a:l[N]})})},label:(0,i.t)([C,"chip"])},A=function(e){var t=e.isInitialOpen,r=e.onApply,a=e.changeUrl,s=void 0===a||a,l=e.value,c=e.localeRoot,d=void 0===c?"settings.paywalls_admin_dashboard.filters.community_member_email":c,f=(0,o.Xt)(),m=f.queryParams,p=f.updateUrl;return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"title"]),title:(0,i.t)([d,"title"]),selectedText:l||m.email,isInitialOpen:t,onApply:function(e){s&&p("email",e),(0,n.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.xo,{name:"email-filter",placeholder:(0,i.t)([d,"placeholder"])})})};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={name:"community_member_email",filterKeys:["email"],component:function(e){return(0,u.jsx)(A,I(I({},e),{},{onApply:n.noop}))},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.community_member_email","title"])},M=function(e){var t=e.isInitialOpen,r=e.onApply,a=e.changeUrl,s=void 0===a||a,l=e.value,c=e.localeRoot,d=void 0===c?"settings.paywalls_admin_dashboard.filters.community_member_name":c,f=(0,o.Xt)(),m=f.queryParams,p=f.updateUrl;return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"title"]),title:(0,i.t)([d,"title"]),selectedText:l||m.name,isInitialOpen:t,onApply:function(e){s&&p("name",e),(0,n.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.xo,{name:"name-filter",placeholder:(0,i.t)([d,"placeholder"])})})};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U={name:"community_member_name",filterKeys:["name"],component:label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.community_member_name","title"])},z=r(91741);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H="settings.paywalls_admin_dashboard.filters.currency",q="currency",G={name:"currency",filterKeys:["currency"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=(0,z.K)(),f=d.data;if(d.isLoading||!f)return null;var m=f.map(();return(0,u.jsx)(o.wn,{chip:(0,i.t)([H,"chip"]),title:(0,i.t)([H,"title"]),selectedText:a||l[q],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:m},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(q,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:m,legend:(0,i.t)([H,"legend"]),name:"paywalls-filter",activeText:null!==a&&void 0!==a?a:l[q]})})},label:(0,i.t)([H,"chip"])},W=r(67294),Q=r(40427),K=r(15953),J=r(87536),$=r(38776),Y=r(15830),X="settings.paywalls_admin_dashboard.filters.start_date",ee={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},te="date_range",re="last_seven_days",ne="last_four_weeks",ie="last_three_months",oe="last_twelve_months",ae="month_to_date",se="quarter_to_date",le="year_to_date";function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=(0,W.forwardRef)((function(e,t){return(0,u.jsx)("input",ue(ue({},e),{},{className:"placeholder:text-light min-w-[18rem] border-none bg-transparent p-0 text-center text-xs font-medium leading-4 placeholder:opacity-100 focus:outline-none focus:ring-0",ref:t}))}));function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}fe.displayName="DatePickerInput";var he=(0,W.createContext)(null);he.displayName="DateRangePickerContext";var be=function(e){var t=e.queryParamsKey,r=e.children,n=me((0,W.useState)(null!==t&&void 0!==t?t:{}),2),i={queryParamsKey:n[0],setQueryParamsKey:n[1]};return(0,u.jsx)(he.Provider,{value:i,children:r})},ye=function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var we,Oe=r(1002);function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=(Pe(we={},re,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),endDate:e}})),Pe(we,ne,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-28),endDate:e}})),Pe(we,ie,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-3,e.getDate()),endDate:e}})),Pe(we,oe,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-12,e.getDate()),endDate:e}})),Pe(we,ae,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),1),endDate:e}})),Pe(we,se,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=Math.floor(e.getMonth()/3),r=e.getFullYear();return{startDate:new Date(r,3*t,1),endDate:e}})),Pe(we,le,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear()-1,e.getMonth(),e.getDate()),endDate:e}})),we),ke=Object.assign((function(e){var t=e.children,r=e.className,n=void 0===r?"":r,i=e.defaultQueryParams,o=e.defaultValues,a=(0,s.j)().onApply;return(0,u.jsx)(be,{queryParamsKey:i,children:(0,u.jsx)(c.l,{onSubmit:a,defaultValues:o,children:(0,u.jsx)("div",{className:n,children:t})})})}),{RangePicker:function(){var e=ye().queryParamsKey,t=(0,J.Gc)(),r=t.watch,i=t.setValue,o=r(e.default),a=(0,W.useRef)(null);if(o!==te)return null;var s=new Date,l=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1);return(0,u.jsx)(K.Z,{ref:a,options:{mode:"range",dateFormat:"M j, Y",defaultDate:[l,s],maxDate:s,onReady:function(){(0,n.defer)((function(){var e,t=null===(e=a.current)||void 0===e?void 0:e.flatpickr;(0,$.Z)(t,"flatPickrInstance is null"),t.calendarContainer.classList.add("settings-app")}))},static:!0,locale:(0,Y.bS)()},className:"w-full",render:function(e,t){return(0,u.jsx)("button",{type:"button",className:"border-primary focus-within:bg-tertiary text-selector-active focus-visible:!outline-secondary flex flex-col items-center justify-center gap-x-2 rounded-md border px-3 py-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:function(){var e,t,r;null===(e=a.current)||void 0===e||null===(t=e.flatpickr)||void 0===t||null===(r=t.open)||void 0===r||r.call(t)},children:(0,u.jsx)(fe,ge({ref:t},e))})},onChange:function(t){var r=_e(t,2),n=r[0],o=r[1];n&&o&&(n.setHours(0,0,0,0),o.setHours(23,59,59,999),i(e.gte,n.getTime()),i(e.lte,o.getTime()))}})},DropdownOptions:function(){var e=ye().queryParamsKey,t=(0,J.Gc)(),r=t.watch,n=t.setValue,o=r(e.default);(0,W.useEffect)((function(){if(Se[o]){var t=Se[o](),r=t.startDate,i=t.endDate;r.setHours(0,0,0,0),i.setHours(23,59,59,999),n(e.gte,r.getTime()),n(e.lte,i.getTime())}}),[o,e.gte,e.lte,n]);var a=[re,ne,ie,oe,ae,se,le,te].map((function(e){return{value:e,label:(0,i.t)([X,"options",e])}}));return(0,u.jsx)(Oe.Lt,{onChange:options:a,size:"full",className:"w-full rounded-lg border px-4 py-2",buttonWrapperClassName:"flex flex-col",linkType:"button",popperOptions:{modifiers:[{name:"offset",options:{offset:[34,15]}}]},button:(0,u.jsx)(Oe.Lt.ActiveLabelButton,{className:"flex w-full justify-between",options:a,activeOptionValue:o||re})})}});function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}unction Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(e){var t,r=e.isInitialOpen,s=e.changeUrl,c=void 0===s||s,d=e.value,f=e.queryParamsKey,m=void 0===f?ee:f,p=e.localeRoot,h=void 0===p?X:p,b=(0,o.Xt)(),y=b.queryParams,v=b.updateUrl,g=Ne((0,W.useState)(re),2),x=g[0],_=g[1],j=(0,a.r)(),w=Number(y[m.lte]),O=Number(y[m.gte]),P=new Date(w),S=new Date(O),k=(0,n.compact)([isNaN(S.getTime())?null:(0,Q.wc)({dateTime:S,format:Q.fK.short_date}),isNaN(P.getTime())?null:(0,Q.wc)({dateTime:P,format:Q.fK.short_date})]).join("-");return(0,u.jsx)(o.wn,{chip:(0,i.t)([h,"chip"]),title:(0,i.t)([h,"title"]),selectedText:d||k,isInitialOpen:r,renderSelectedText:function(){return k},onApply:function(e){var t=null!==e&&void 0!==e?e:{},r=t[m.default],n=t[m.lte],i=t[m.gte];c&&(v("page",1),v(m.default,r),v(m.lte,n),v(m.gte,i)),_(r)},shouldShowRemoveButton:!0,children:(0,u.jsxs)(ke,{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",defaultQueryParams:m,defaultValues:(t={},Ce(t,m.default,x||re),Ce(t,m.lte,null===P||void 0===P?void 0:P.getTime()),Ce(t,m.gte,null===S||void 0===S?void 0:S.getTime()),t),children:[(0,u.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,u.jsx)(ke.DropdownOptions,{}),(0,u.jsx)(ke.RangePicker,{})]}),(0,u.jsx)(l.z,{variant:j,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})};function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le="settings.paywalls_admin_dashboard.filters.date",Me={default:"created_at",lte:"created_at_lte",gte:"created_at_gte"},Re={name:"created_at",filterKeys:Object.values(Me),component:function(e){return(0,u.jsx)(Ae,Ie(Ie({},e),{},{queryParamsKey:Me,localeRoot:Le}))},label:(0,i.t)([Le,"chip"])};function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ze="settings.paywalls_admin_dashboard.filters.start_date",Ve={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},Ze={name:"start_date",filterKeys:Object.values(Ve),component:function(e){return(0,u.jsx)(Ae,Be(Be({},e),{},{queryParamsKey:Ve,localeRoot:ze}))},label:(0,i.t)([ze,"chip"])},He=r(48108),qe=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=e.queryParamsKey,l=e.localeRoot,c=(0,o.Xt)(),d=c.queryParams,f=c.updateUrl,m=null!==a&&void 0!==a?a:d[s];return(0,u.jsx)(o.wn,{chip:(0,i.t)([l,"chip"]),title:(0,i.t)([l,"title"]),selectedText:a||d[s],renderSelectedText:isInitialOpen:t,onApply:function(e){f("page",1),n&&f(s,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(He.x,{name:s,placeholder:(0,i.t)([l,"input_placeholder"]),autoFocus:!0,autoComplete:"off"})})};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ke="settings.paywalls_admin_dashboard.filters.invoice_id",Je={name:"invoice_processor_id",filterKeys:["invoice_processor_id"],component:function(e){return(0,u.jsx)(qe,We(We({},e),{},{localeRoot:Ke,queryParamsKey:"invoice_processor_id"}))},label:(0,i.t)([Ke,"chip"])};function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et="settings.paywalls_admin_dashboard.filters.subscription_id",tt={name:"subscription_processor_id",filterKeys:["subscription_processor_id"],component:function(e){return(0,u.jsx)(qe,Ye(Ye({},e),{},{localeRoot:et,queryParamsKey:"subscription_processor_id"}))},label:(0,i.t)([et,"chip"])};function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}unction it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot="settings.paywalls_admin_dashboard.filters.transaction_id",at={name:"transaction_id",filterKeys:["transaction_id"],component:function(e){return(0,u.jsx)(qe,nt(nt({},e),{},{localeRoot:ot,queryParamsKey:"transaction_id"}))},label:(0,i.t)([ot,"chip"])},st=r(88767),lt=r(34128),ct=r(76752),ut=r(73203),dt="members_directory.header.search.filters.member_name_or_email",ft="community_member_id",mt={name:"community_member_id",filterKeys:["community_member_id"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=null!==a&&void 0!==a?a:l[ft],f=(0,st.useQuery)(["community-members-subscription-community-member-id",d],(function(){return(0,lt.UT)(ct.av.search.communityMembers.index({params:{page:1,per_page:10,filters:{id:d}}}))}),{enabled:!!d}).data,m=null===f||void 0===f?void 0:f.records[0];return(0,u.jsx)(o.wn,{chip:(0,i.t)([dt,"filter_chip"]),title:(0,i.t)([dt,"title"]),selectedText:d,renderSelectedText:function(){var e;return null!==(e=null===m||void 0===m?void 0:m.name)&&void 0!==e?e:d},isInitialOpen:t,onApply:shouldShowRemoveButton:!0,children:(0,u.jsx)(ut.R,{record:m,recordType:"CommunityMember",searchInputPlaceholder:(0,i.t)([dt,"placeholder"]),onApply:function(e){c("page",1),n&&c(ft,e)}})})},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.members","chip"])},pt=r(48267),ht=r(53828);function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vt="settings.paywalls_admin_dashboard.filters.paywalls",gt="paywalls",xt={name:"paywalls",filterKeys:["paywalls"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=(0,ht.k)(),f=d.paywalls,m=d.isPaywallsLoading;return(0,u.jsx)(o.wn,{chip:(0,i.t)([vt,"chip"]),title:(0,i.t)([vt,"title"]),selectedText:a||l[gt],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:f},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(gt,e)},shouldShowRemoveButton:!0,children:m?(0,u.jsx)(pt.aN,{}):(0,u.jsx)(o.l6,{options:f,legend:(0,i.t)([vt,"legend"]),name:"paywalls-filter",activeText:null!==a&&void 0!==a?a:l[gt],hasSearch:!0,searchProps:{placeholder:(0,i.t)([vt,"input_placeholder"])}})})},label:(0,i.t)([vt,"chip"])},_t=r(35144);r Ot="settings.paywalls_admin_dashboard.filters.status",Pt="status",St={name:"subscription_status",filterKeys:[Pt],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),l=s.queryParams,c=s.updateUrl,d=_t.mB.map((function(e){return{label:(0,i.t)([Ot,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([Ot,"chip"]),title:(0,i.t)([Ot,"title"]),selectedText:a||l[Pt],renderSelectedText:function(e){return(0,u.jsx)(o.L2,{items:d},e))},isInitialOpen:t,onApply:function(e){c("page",1),n&&c(Pt,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([Ot,"legend"]),name:"subscription-statuses-filter",activeText:null!==a&&void 0!==a?a:l[Pt]})})},label:(0,i.t)([Ot,"chip"])};r Nt="settings.paywalls_admin_dashboard.filters",Tt={community_member_id:mt,paywalls:xt,currency:G,created_at:Re,community_member_email:L,community_member_name:U,amount:g,charge_status:T,invoice_processor_id:Je,transaction_id:at,subscription_status:St,subscription_id:tt,total_amount_paid:O,start_date:Ze},At={subscriptions:{community_member_id:"community_member_id",currency:"currency",email:"email",paywalls:"paywall_ids",name:"query",start_date_gte:"created_at_gte",start_date_lte:"created_at_lte",status:"status",subscription_processor_id:"processor_id",total_amount_paid_gte:"total_amount_paid_gte",total_amount_paid_lte:"total_amount_paid_lte"},charges:{amount_gte:"amount_gte",amount_lte:"amount_lte",community_member_id:"community_member_id",created_at_gte:"created_at_gte",created_at_lte:"created_at_lte",currency:"currency",email:"email",invoice_processor_id:"invoice_processor_id",paywalls:"paywall_ids",name:"query",status:"display_status",subscription_processor_id:"subscription_processor_id",transaction_id:"processor_id"}},Et=function(e,t){var r={};return Object.keys(t).forEach((function(n){if(e[n]){var i=t[n];r[i]=e[n]}})),r},It=function(e,t){var r=(0,n.compact)((null!==e&&void 0!==e?e:[]).map((function(e){return Tt[e]}))),i=(0,n.compact)((null!==t&&void 0!==t?t:[]).map(());return{defaultFilters:[].concat(kt(r),kt(i))}}},44297:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var n=r(86013),i=r(72855),o=r(22322),a=r(85893),s=function(){var e="danger",t=(0,a.jsx)(i.O,{variant:e,children:(0,n.t)("settings.paywalls.processor_status_v2.rejected.status")}),r=(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,a.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.rejected.description")}}),(0,a.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.rejected.call_support")}})]});return(0,a.jsx)(o.t,{sentiment:e,badge:t,title:(0,n.t)("settings.paywalls.processor_status_v2.rejected.title"),description:r})}},61149:(e,t,r)=>{"use strict";r.d(t,{Dh:()=>i,hU:()=>o,V5:()=>a,DP:()=>s,vi:()=>l});var n=Object.freeze({fixed:"PaywallCoupons::Fixed",percent:"PaywallCoupons::Percent"}),i=function(e){return e===n.fixed},o=a=n,s=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"}),l=[s.ACTIVE,s.INACTIVE]},8161:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});var n=r(96486),i=,23322:(e,t,r)=>{"use strict";r.d(t,{R:()=>v});var n=r(64687),i=r.n(n),o=r(67294),a=r(48267),s=r(86013),l=r(88767),c=r(5167),u=r(34128),d=r(76752);unction m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}ction y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(){var e=(0,a.pm)(),t=(0,c.wh)().data.display_welcome_banner,r=h((0,o.useState)([]),2),n=r[0],m=r[1],b=h((0,o.useState)([]),2),y=b[0],v=b[1],g=h((0,o.useState)(!1),2),x=g[0],_=g[1],j=h((0,o.useState)(new Set),2),w=j[0],O=j[1],P=h((0,o.useState)({}),2),S=P[0],k=P[1],C=h((0,o.useState)([]),2),N=C[0],T=C[1],A=h((0,o.useState)(t),2),E=A[0],I=A[1],D=(0,l.useQuery)("BANNER_DATA",(function(){return(0,u.UT)((0,d.dm)())}),{onSuccess:function(e){k(e.banner)},onError:function(e){console.error(e)},enabled:!1}),L=D.refetch,M=D.isLoading,R={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},F=function(){var e=p(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.UT)((0,d.iL)());case 2:return t=e.sent,r=t.posts,m(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=(0,l.useMutation)((function(e){var t=e.communityMemberId,r=e.display;return(0,u.gN)(d.av.communityMembers.preference({id:t}),{display_home_welcome_banner:r})}),{onSuccess:function(){I(!1)},onError:).mutateAsync,U=function(){var e=p(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.UT)((0,d.lc)());case 2:return t=e.sent,r=t.events,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return ();return{posts:n,spaces:y,bannerData:S,memberActivityData:N,spacesHasNextPage:x,participatingSpacesIds:w,fetchPosts:F,fetchSpaceSuggestions:function(e){var t=e.page,r=e.perPage,n=void 0===r?9:r;fetch((0,d.J7)()+"?page=".concat(t,"&per_page=").concat(n),R).then((function(e){return e.json()})).then((function(e){v(1===t?e.spaces:[].concat(f(y),f(e.spaces))),_(e.has_next_page),O(new Set(e.participating_space_ids))})).catch((function(e){console.error(e)}))},fetchBannerData:L,fetchCommunityMemberActivityData:function(){fetch((0,d.j0)(),R).then((function(e){return e.json()})).then(().catch((function(e){console.error(e)}))},fetchUpcomingEvents:U,isWelcomeBannerVisible:E,setWelcomeBannerPreference:B,setParticipatingSpacesIds:O,isBannerDataLoading:M}}},56202:(e,t,r)=>{"use strict";r.d(t,{o:()=>v});var n=r(64687),i=r.n(n),o=r(67294),a=r(48267),s=r(86013),l=r(34128),c=r(76752),u=r(23322);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},v=function(){var e=h((0,o.useState)({community:{},community_setting:{}}),2),t=e[0],r=e[1],n=h((0,o.useState)(!1),2),d=n[0],m=n[1],b=h((0,o.useState)({postSortOptions:[],trendingPostWindowLimit:30,homePageOption:{}}),2),v=b[0],g=b[1],x=h((0,o.useState)([]),2),_=x[0],j=x[1],w=h((0,o.useState)([]),2),O=w[0],P=w[1],S=h((0,o.useState)(!1),2),k=S[0],C=S[1],N=(0,a.pm)(),T=N.error,A=N.success,E=(0,u.R)().fetchBannerData,I=function(){var e,t=(e=i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{C(!0),r=(0,l.wG)({landing_page_settings:t}),fetch((0,c.H5)(),f({method:"POST",body:r,mode:"no-cors"},y)).then((function(e){return e.json()})).then((function(){A((0,s.t)("changes_saved")),C(!1),E()})).catch((function(){T((0,s.t)("something_went_wrong")),C(!1)}))}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{dataLoaded:d,settings:t,metaData:v,loggedInUserSpaceOptions:_,loggedOutUserSpaceOptions:O,setSettings:r,fetchLandingPageSettings:function(){m(!1),fetch((0,c.H5)(),y).then((function(e){return e.json()})).then((function(e){r(e.settings),g({postSortOptions:e.post_sort_options,trendingPostWindowLimit:e.trending_post_window_limit,homePageOption:e.home_page_option}),j(e.logged_in_user_space_options),P(e.logged_out_user_space_options)})).finally(().catch(()},setLoggedInUserSpaceOptions:j,setLoggedOutUserSpaceOptions:P,reSetWelcomeBannerPreference:updateLandingPageSettings:I,isSaving:k}}},61992:(e,t,r)=>{"use strict";r.d(t,{V:()=>s});var n=r(88767),i=r(19338);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t=e.communityMemberId,r=e.queryParams,s=void 0===r?{}:r,l=i.z.admin,c=(0,n.useQuery)(["community-member-payment-method",t],l.index({community_member_id:t}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:Boolean(t)},s));return{communityMemberPaymentMethodsQuery:c}}},99815:(e,t,r)=>{"use strict";r.d(t,{D:()=>l,p:()=>c});var n=r(67294),i=r(88767),o=r(31772);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l="paywall-subscriptions",c=function(e){var t,r,s=e.orderParam,c=void 0===s?{created_at:"desc"}:s,u=e.perPage,d=void 0===u?10:u,f=e.searchKeyParams,m=void 0===f?"":f,p=e.filters,h=void 0===p?{}:p,b=e.enabled,y=void 0===b||b,v=e.page,g=e.setPage,x=a((0,n.useState)(c),2),_=x[0],j=x[1],w={filters:h,order:_,page:v,perPage:d,searchKey:m},O=o.Y.index(w),P=(0,i.useQuery)({queryKey:[l,{filters:h,order:_,page:v,perPage:d},m],queryFn:O,enabled:y}),S=P.data,k=P.refetch,C=P.isLoading,N=P.remove;return{hasFilters:Object.keys(h).length>0,subscriptions:null!==(t=null===S||void 0===S?void 0:S.records)&&void 0!==t?t:[],totalSubscriptions:null!==(r=null===S||void 0===S?void 0:S.count)&&void 0!==r?r:0,refetchSubscriptions:k,removeSubscriptionsFromCache:N,perPage:d,page:v,order:_,setOrder:setPage:g,isLoadingSubscriptions:C}}},31701:(e,t,r)=>{"use strict";r.d(t,{Y:()=>o});var n=r(88767),i=r(31772),o=function(){return{createPaywallSubscription:(0,n.useMutation)(()}}},61569:(e,t,r)=>{"use strict";r.d(t,{d:()=>s,Q:()=>l});var n=r(88767),i=r(88116);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s="paywall-coupon-applied",l=function(e){var t=e.paywallPriceId,r=e.communityId,l=e.couponCode,c=e.skipInactiveCouponValidation,u=void 0!==c&&c,d=e.queryParams,f=void 0===d?{}:d,m={paywall_price_id:t,community_id:r,coupon_code:l,skip_inactive_coupon_validation:u},p=(0,n.useQuery)([s,t,r,l,u],(,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},f));return{paywallCouponAppliedQuery:p}}},68930:(e,t,r)=>{"use strict";r.d(t,{_o:()=>l,pI:()=>u});var n=r(88767),i=r(88116),o=r(61149);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l="paywall-coupons-list",c=o.vi,u=function(e){var t=e.paywallId,r=e.couponStatuses,o=void 0===r?c:r,u=e.skipDateValidations,d=void 0===u||u,f=e.queryParams,m=void 0===f?{}:f,p=(0,n.useQuery)([l,t,{couponStatuses:o,skipDateValidations:d}],i.p.index({paywallId:t,skipDateValidations:d,couponStatuses:o}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:Boolean(t)},m));return{paywallCouponsListQuery:p}}},95691:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(88767),i=r(34128),o=r(76752),a=function(e){return(0,i.Cu)(o.av.admin.paywalls.exports.create(),e)},s=function(){return{createCsvExportMutation:(0,n.useMutation)(()}}},86646:(e,t,r)=>{"use strict";r.d(t,{o:()=>o,O:()=>s});var n=r(88767),i=r(13546),o="paywalls-list",a=[],s=function(e){var t=e.communityMemberId,r=e.status,s=void 0===r?a:r,l=e.queryParams,c=void 0===l?{}:l;return{paywallsListQuery:(0,n.useQuery)([o,t,{status:s}],i.i.index({community_member_id:t,status:s}),c)}}},61729:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var n=r(64687),i=r.n(n),o=r(88767),a=r(6917);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(){var e,t=(e=i().mark((),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,o.useMutation)(t,e)}},85398:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var n=r(67294),i=r(34623),o=r(50308),a=r.n(o);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.onFocusWithin,r=void 0===t?a():t,o=e.onBlurWithin,l=void 0===o?a():o,c=e.onFocusWithinChange,u=void 0===c?a():c,d=s((0,n.useState)(!1),2),f=d[0],m=d[1],p=(0,i.L_)({onFocusWithin:r,onBlurWithin:l,onFocusWithinChange:);return{isFocusWithin:f,focusWithinProps:p.focusWithinProps}}},82255:(e,t,r)=>{"use strict";function n(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()}.d(t,{L:()=>n,q:()=>i})},96986:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/courses-example-13ae939f589f2ce0b287.png"},72551:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/existing-1-03bbb0720c607884312c.jpg"},83349:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/existing-2-8b1b29102779ecfc1217.jpg"},35860:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/existing-3-98dae68340c8467c82d1.jpg"},26334:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/existing-4-2b29974c6dd1eaafab97.jpg"},92003:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/existing-5-463f1f69b48a825b51f4.jpg"},75629:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-1-0b0f1777eb71fe3c5f14.jpg"},28780:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-2-123a9927bef996c14bcf.jpg"},12350:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-3-26be05f1d46c7f35ff72.jpg"},55028:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-4-5a10111d24cbaf8805f0.jpg"},12349:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-5-dd9f0e362da9927f86fa.jpg"},68405:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-6-22bb9f302308d8cb3e9a.jpg"},91247:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/courses-landing/whats-new-7-e703b40e69e7ba740aae.jpg"},62223:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/paywalls/admin/tax_settings/more-info-f09bba9e70d558e044c2.png"},37004:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-1-2x-fe49e81302ad21822bc1.png"},36584:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-1-4x-09b7c0122878cf156b06.png"},90312:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-1-a2750d3d3a8671e19bf9.jpg"},5375:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-2-2x-a17a2a2a55bce8f26a53.png"},67764:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-2-4x-613308812aad6ac5d9f9.png"},74402:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-2-0f791108efab72e44a8c.jpg"},84731:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-3-2x-3124dc05b31b61bab647.png"},31842:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-3-4x-02dc9245e62484efb9e0.png"},6897:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/workflows-landing/feature-3-1e43652a68a35ba4df5c.jpg"},99741:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/paywall-setup-4ef249fa6a9e0081dfdf.png"},45810:(e,t,r)=>{"use strict";e.exports=r.p+"static/components/CommunityOnboarding/OnboardingVideo/assets/andypreview-ef3acbe97170654b3fd3.png"},86950:(e,t,r)=>{"use strict";e.exports=r.p+"static/components/CommunityOnboarding/ScheduleDemoModal/assets/people-a9dccf9060a0b2c51a87.png"},75116:17579:]);