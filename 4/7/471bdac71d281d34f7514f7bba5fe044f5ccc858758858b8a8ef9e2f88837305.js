!self,function(){return function(){var e={67463:function(){!function(e,t,i){"use strict";function n(i){if(s=t.documentElement,o=t.body,B(),et=this,er=(i=i||{}).constants||{},i.easing)for(var n in i.easing)G[n]=i.easing[n];ed=i.edgeStrategy||"set",es={beforerender:i.beforerender,render:i.render},(eo=!1!==i.forceHeight)&&(eM=i.scale||1),ea=i.mobileDeceleration||b,ec=!1!==i.smoothScrolling,eu=i.smoothScrollingDuration||T,eh={targetTop:et.getScrollTop()},(eR=(i.mobileCheck||())?((en=t.getElementById("skrollr-body"))&&ee(),U(),eC(s,[m,y],[g])):eC(s,[m,v],[g]),et.refresh(),em(e,"resize orientationchange",;var r=H();return ),et}var s,o,r={get:function(){return et},init:VERSION:"0.6.22"},a=Object.prototype.hasOwnProperty,l=e.Math,c=e.getComputedStyle,u="touchstart",h="touchmove",p="skrollable",d=p+"-before",f=p+"-between",_=p+"-after",m="skrollr",g="no-"+m,v=m+"-desktop",y=m+"-mobile",w="linear",b=.004,T=200,C="center",S="bottom",E="___skrollable_id",P=/^(?:input|textarea|button|select)$/i,I=/^\s+|\s+$/g,O=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,M=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,A=/^([a-z\-]+)\[(\w+)\]$/,D=/-([a-z])/g,N=k=/[\-+]?[\d]*\.?[\d]+/g,x=/\{\?\}/g,j=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,L=/[a-z\-]+-gradient/g,R="",V="",B=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(c){var t=c(o,null);for(var n in t)if(R=n.match(e)||+n==n&&t[n].match(e))break;if(!R)return R=V="",i;"-"===(R=R[0]).slice(0,1)?(V=R,R=({"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"})[R]):V="-"+R.toLowerCase()+"-"}},H=F=G={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:cubic:swing:sqrt:function(e){return l.sqrt(e)},outCubic:bounce:;n.prototype.refresh=function(e){var n,s,o=!1;for(e===i?(o=!0,ei=[],eL=0,e=t.getElementsByTagName("*")):e=[].concat(e),n=0,s=e.length;s>n;n++){var r=e[n],a=r,l=[],c=ec,u=ed;if(r.attributes){for(var h,d,f,_=0,m=r.attributes.length;m>_;_++){var g=r.attributes[_];if("data-anchor-target"!==g.name){if("data-smooth-scrolling"!==g.name){if("data-edge-strategy"!==g.name){var v=g.name.match(O);if(null!==v){var y={props:g.value,element:r};l.push(y);var w=v[1];w&&(y.constant=w.substr(1));var b=v[2];/p$/.test(b)?(y.isPercentage=!0,y.offset=(0|b.slice(0,-1))/100):y.offset=0|b;var T=v[3],C=v[4]||T;T&&"start"!==T&&"end"!==T?(y.mode="relative",y.anchors=[T,C]):(y.mode="absolute","end"===T?y.isEnd=!0:y.isPercentage||(y.offset=y.offset*eM))}}else u=g.value}else c="off"!==g.value}else if(null===(a=t.querySelector(g.value)))throw'Unable to find anchor target "'+g.value+'"'}l.length&&(!o&&E in r?(h=ei[f=r[E]].styleAttr,d=ei[f].classAttr):(f=r[E]=eL++,h=r.style.cssText,d=eT(r)),ei[f]={element:r,styleAttr:h,classAttr:d,anchorTarget:a,keyFrames:l,smoothScrolling:c,edgeStrategy:u},eC(r,[p],[]))}}for(ey(),n=0,s=e.length;s>n;n++){var S=ei[e[n][E]];S!==i&&(W(S),K(S))}return et},n.prototype.relativeToAbsolute=function(e,t,i){var n=s.clientHeight,o=e.getBoundingClientRect(),r=o.top,a=o.bottom-o.top;return t===S?r-=n:t===C&&(r-=n/2),i===S?r+=a:i===C&&(r+=a/2),0|(r+=et.getScrollTop())+.5},n.prototype.animateTo=function(e,t){t=t||{};var n=eP(),s=et.getScrollTop();return(el={startTop:s,topDiff:e-s,targetTop:e,duration:t.duration||1e3,startTime:n,endTime:n+(t.duration||1e3),easing:G[t.easing||w],done:t.done}).topDiff||(el.done&&el.done.call(et,!1),el=i),et},n.prototype.stopAnimateTo=n.prototype.isAnimatingTo=n.prototype.setScrollTop=n.prototype.getScrollTop=n.prototype.getMaxScrollTop=function(){return eO},n.prototype.on=n.prototype.off=function(e){return delete es[e],et},n.prototype.destroy=function(){F()(e_),ev(),eC(s,[g],[m,v,y]);for(var e=0,t=ei.length;t>e;e++)J(ei[e].element);s.style.overflow=o.style.overflow="auto",s.style.height=o.style.height="auto",en&&r.setStyle(en,"transform","none"),et=i,en=i,es=i,eo=i,eO=0,eM=1,er=i,ea=i,eA="down",eD=-1,ek=0,ex=0,ej=!1,el=i,ec=i,eu=i,eh=i,ep=i,eL=0,ed=i,eR=!1,eV=0,ef=i};var U=function(){var n,r,a,c,p,d,f,_,m,g,v;em(s,[u,h,"touchcancel","touchend"].join(" "),function(e){var s=e.changedTouches[0];for(c=e.target;3===c.nodeType;)c=c.parentNode;switch(p=s.clientY,d=s.clientX,m=e.timeStamp,P.test(c.tagName)||e.preventDefault(),e.type){case u:n&&n.blur(),et.stopAnimateTo(),n=c,r=f=p,a=d;break;case h:P.test(c.tagName)&&t.activeElement!==c&&e.preventDefault(),_=p-f,v=m-g,et.setScrollTop(eV-_,!0),f=p,g=m;break;default:var o=r-p,y=a-d;if(49>y*y+o*o){if(!P.test(n.tagName)){n.focus();var w=t.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,e.view,1,s.screenX,s.screenY,s.clientX,s.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(w)}return}n=i;var b=_/v;b=l.max(l.min(b,3),-3);var T=l.abs(b/ea),C=b*T+.5*ea*T*T,S=et.getScrollTop()-C,E=0;S>eO?(E=(eO-S)/C,S=eO):0>S&&(E=-S/C,S=0),T*=1-E,et.animateTo(0|S+.5,{easing:"outCubic",duration:T})}}),e.scrollTo(0,0),s.style.overflow=o.style.overflow="hidden"},z=function(){var e,t,i,n,o,r,a,c,u,h,p,d=s.clientHeight,f=ew();for(c=0,u=ei.length;u>c;c++)for(t=(e=ei[c]).element,i=e.anchorTarget,n=e.keyFrames,o=0,r=n.length;r>o;o++)h=(a=n[o]).offset,p=f[a.constant]||0,a.frame=h,a.isPercentage&&(h*=d,a.frame=h),"relative"===a.mode&&(J(t),a.frame=et.relativeToAbsolute(i,a.anchors[0],a.anchors[1])-h,J(t,!0)),a.frame+=p,eo&&!a.isEnd&&a.frame>eO&&(eO=a.frame);for(eO=l.max(eO,eb()),c=0,u=ei.length;u>c;c++){for(n=(e=ei[c]).keyFrames,o=0,r=n.length;r>o;o++)p=f[(a=n[o]).constant]||0,a.isEnd&&(a.frame=eO-a.offset+p);e.keyFrames.sort(eI)}},$=function(e,t){for(var i=0,n=ei.length;n>i;i++){var s,o,l=ei[i],c=l.element,u=l.smoothScrolling?e:t,h=l.keyFrames,m=h[0].frame,g=h[h.length-1].frame,v=m>u,y=u>g,w=h[v?0:h.length-1];if(v||y){if(v&&-1===l.edge||y&&1===l.edge)continue;switch(eC(c,[v?d:_],[d,f,_]),l.edge=v?-1:1,l.edgeStrategy){case"reset":J(c);continue;case"ease":u=w.frame;break;default:var b=w.props;for(s in b)a.call(b,s)&&(o=X(b[s].value),r.setStyle(c,s,o));continue}}else 0!==l.edge&&(eC(c,[p,f],[d,_]),l.edge=0);for(var T=0,C=h.length-1;C>T;T++)if(u>=h[T].frame&&h[T+1].frame>=u){var S=h[T],E=h[T+1];for(s in S.props)if(a.call(S.props,s)){var P=(u-S.frame)/(E.frame-S.frame);P=S.props[s].easing(P),o=X(o=Y(S.props[s].value,E.props[s].value,P)),r.setStyle(c,s,o)}break}}},q=function(){ej&&(ej=!1,ey());var e,t,n=et.getScrollTop(),s=eP();if(el?(s>=el.endTime?(n=el.targetTop,e=el.done,el=i):(t=el.easing((s-el.startTime)/el.duration),n=0|el.startTop+t*el.topDiff),et.setScrollTop(n,!0)):!ep&&(eh.targetTop-n&&(eh={startTop:eD,topDiff:n-eD,targetTop:n,startTime:eN,endTime:eN+eu}),eh.endTime>=s&&(t=G.sqrt((s-eh.startTime)/eu),n=0|eh.startTop+t*eh.topDiff)),eR&&en&&r.setStyle(en,"transform","translate(0, "+-eV+"px) "+ef),ep||eD!==n){eA=n>eD?"down":eD>n?"up":eA,ep=!1;var o={curTop:n,lastTop:eD,maxTop:eO,direction:eA};!1!==(es.beforerender&&es.beforerender.call(et,o))&&($(n,et.getScrollTop()),eD=n,es.render&&es.render.call(et,o)),e&&e.call(et,!1)}eN=s},W=function(e){for(var t=0,i=e.keyFrames.length;i>t;t++){for(var n,s,o,r,a=e.keyFrames[t],l={};null!==(r=M.exec(a.props));)o=r[1],s=r[2],null!==(n=o.match(A))?(o=n[1],n=n[2]):n=w,s=s.indexOf("!")?Q(s):[s.slice(1)],l[o]={value:s,easing:G[n]};a.props=l}},Q=K=Z=Y=X=J=function(e,t){e=[].concat(e);for(var i,n,s=0,o=e.length;o>s;s++)(i=ei[(n=e[s])[E]])&&(t?(n.style.cssText=i.dirtyStyleAttr,eC(n,i.dirtyClassAttr)):(i.dirtyStyleAttr=n.style.cssText,i.dirtyClassAttr=eT(n),n.style.cssText=i.styleAttr,eC(n,i.classAttr)))},ee=r.setStyle=function(e,t,i){var n=e.style;if("zIndex"===(t=t.replace(D,N).replace("-","")))n[t]=isNaN(i)?i:""+(0|i);else if("float"===t)n.styleFloat=n.cssFloat=i;else try{R&&(n[R+t.slice(0,1).toUpperCase()+t.slice(1)]=i),n[t]=i}catch(e){}};var et,ei,en,es,eo,er,ea,el,ec,eu,eh,ep,ed,ef,e_,em=r.addEvent=function(t,i,n){var s=function(t){return(t=t||e.event).target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),n.call(this,t)};i=i.split(" ");for(var o,r=0,a=i.length;a>r;r++)o=i[r],t.addEventListener?t.addEventListener(o,n,!1):t.attachEvent("on"+o,s),eB.push({element:t,name:o,listener:n})},eg=r.removeEvent=ev=function(){for(var e,t=0,i=eB.length;i>t;t++)eg((e=eB[t]).element,e.name,e.listener);eB=[]},ey=ew=eb=function(){var e=en&&en.offsetHeight||0;return l.max(e,o.scrollHeight,o.offsetHeight,s.scrollHeight,s.offsetHeight,s.clientHeight)-s.clientHeight},eT=eC=eS=eE=eP=Date.now||eI=eO=0,eM=1,eA="down",eD=-1,eN=eP(),ek=0,ex=0,ej=!1,eL=0,eR=!1,eV=0,eB=[];"function"==typeof define&&define.amd?define("skrollr",function(){return r}):e.skrollr=r}(window,document)},17187:26033:function(){!function(e,t,i){"use strict";var n,s=i.Modules,o=s.Suggest,r=s.SuggestView,a=i.Basic,l=a.Extend,c=a.typeOf,u=a.moduleOpts,h=a.getOptions,p="Suggest",d="SuggestView";e(".js-suggest").each(function(t,i){var s=e(i),a={needsInputAdjust:!1},f={},_=h(i)||n||{},m=_[p]||{},g=_[d]||{},v=m.mods,y=g.mods;if(0===t&&(n=_),c(v,"array")&&v.forEach(function(e){l(!0,f,u.get(p+"."+e))}),l(!0,f,m),c(y,"array")&&y.forEach(function(e){l(!0,a,u.get(d+"."+e))}),l(!0,a,g),!(s.data(d) instanceof r)){var w=new r(a,new o(f),s);s.data(d,w)}})}(window.jQuery,window,window.ru.mail.cpf)},87197:function(e,t,i){var n,s,o,r,a,l=i(3314);n=window,o=(s=window.ru.mail.cpf).Basic.moduleOpts.setParams,r=s.Tools.getTemplate,a=s.Modules.DataRouter(),o("Suggest",{options:{transport:function(e){var t=this._Opts.url;return e.length>2?a.getData(t,{q:e},{},!0).then(function(e){return e.items||[]}):Promise.resolve([])},findTerm:function(e,t){return(e||[]).reduce(function(e,t,i){return e.concat((t.item||[]).map(function(e,t){return e.id=e.id||"_"+i+"-"+t,e.title=e.name,e}))},[]).filter(function(e){return e.id==t})[0]}}}),o("SuggestView",{options:{placeholder:"Введите название фильма, сериала или телешоу",templates:{list:nput:function(e){if(e)return e.title},onSelect:function(e){e&&(n.location=e.url||"/")},cssClss:{itemActive:"p-fullsearch__suggest__item_active"},scrollToFitOffset:-80}}),o("Suggest.MockData",{options:{transport:function(e){var t=this._Opts.url;return e.length>2?a.getData(t,{q:e},{},!0).then(function(e){return e.subway||[]}):Promise.resolve([])},findTerm:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t)return e[i]},url:"/ajax/suggest/subway_cinema/?subway=1",_Handlers:{change:function(e){"add"==e.action&&1==e.termsCount&&(0,l.hitCounter)("22062151")}}}}),o("Suggest.Multiple",{options:{transport:function(e){var t=this._Opts.url;return e.length>2?a.getData(t,{q:e},{},!0).then(function(e){var t=[];return e.items.length&&e.items[0d,title:e.name,fieldName:"place_id"}})),t}):Promise.resolve([])},findTerm:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t)return e[i]}}}),o("SuggestView.Multiple",{options:{isMultiple:!0,useHiddenField:!0,placeholder:"Станции метро",templates:{list:r("ct-subway-list.xml"),enteredTerm:r("ct-subway-term.xml")}}})},45645:function(){var e,t,i,n,s,o,r,a,l,c,u,h,p,d,f,_,m;e=window.jQuery,t=window,window.ru.mail.cpf,o=t.requestAnimationFrame,r=!1,a=0,l=0,c=0,u=null,h=0,p=null,d=function(e){l+=e,h+=(l-c)*2,c=l},f=function(){if(p&&p.isAnimated){a=-i.scrollTop(),h=.1;return}(h<-.1||h>.1)&&((a+=h)>0?a=h=0:a<n&&(h=0,(a)),h*=.9,u&&u())},_=function e(){r&&(o(e),f())},m=function(e){e.preventDefault();var t=e.originalEvent,n=t.detail?-1*t.detail:t.wheelDelta/40,o=n<0?-1:1;o!=s&&(h=0,s=o),a=-i.scrollTop(),d(n)},e.fn.smoothWheel=function(){var s,o,h=jQuery.extend({},arguments[0]),d=null!==h.isTouchDevice?h.isTouchDevice:"ontouchstart"in t;return p=h.globalState||null,d||(s=(i=this.eq(0)).get(0),i.on("mousewheel",m).on("DOMMouseScroll",m),o=function(){n=s.clientHeight-s.scrollHeight},a=-(l=c=s.scrollTop),h.onRender&&(u=h.onRender),h.remove?(r=!1,i.off("mousewheel",m).off("DOMMouseScroll",m)):r||(o(),e(t).on("loadghtChange",function(){t.requestAnimationFrame(o)}),r=!0,_())),this}},58855:function(){!function(e,t,i){"use strict";var n=i.Tools.PubSub,s={Template:{votetext:i.Tools.getTemplate("ct-votetext-popup.xml")}};i.Basic.Constructors.addPlugin(i.Modules.jQuery.RatingView,{_Handlers:{rate:"onRate"},onRate:function(t){var i;t.data&&t.data.show_voting_rules&&Promise.resolve(this._Opts.Template.votetext).then(function(t){i=e(t()).Popup().data("_popupObj"),n.publish("beforeRatingRuleShow",{popup:i}),i.Show()})}},s,"Votetext")}(window.jQuery||window.$||window.$f,window,window.ru.mail.cpf)},70391:function(e,t,i){i(67463),i(45645),i(5328),i(34880)},19131:function(e,t,i){i(47067),i(81815),i(35415),i(72388)},42742:function(e,t,i){i(38493),i(60613),i(53102),i(19367),i(49739),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-event-trailer-popup/ct-event-trailer-popup.xml.js")},69082:function(e,t,i){i(91653),i(56632),i(93579),i(83967),i(1142),i(68082),i(42926),i(54921),i(70502),i(92807),i(21089),i(57376),i(48851),i(6258),i(32310),i(57270),i(29752),i(81993),i(19367),i(26556),i(50366),i(28699),i(85528),i(86403),i(60613),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-viewbox-popup/ct-viewbox-popup.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-viewbox-previews/ct-viewbox-previews.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-viewbox-slides/ct-viewbox-slides.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-viewbox-slide-content/ct-viewbox-slide-content.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-viewbox-more/ct-viewbox-more.xml.js")},59017:function(e,t,i){i(81042),i(23806),i(21938),i(56243(2211861),i(,i){i(60001),i(60949),i(27674),i(32895),i(58855)},7989:function(e,t,i){i(30810),i(31775),i(76132),i(4136),i(3118),i(49078),i(55266),i(75631),i(86078),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-dropdown/ct-dropdown.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/tv/web/web.bundles/ct-period-idx/ct-period-idx.xml.js")},5101:function(e,t,i){i(91046),i(40839),i(19738),i(26060)},76940:functioi(87197),i(26033)},6988:function(e,t,i){i(41058)},45829:functionction(e,t,i){i(81042),i(73960),i(57245),i(24556)},78155:function(){var e="HitCounterGoal",t=window.ru.mail.cpf,i=t.Basic,n=i.Constructors,s=i.moduleOpts.setParams,o=t.Tools.Counters.hitEvent,r=n.getView({_Handlers:{"dom:click:button":"_onButtonClick"},_fireCounter:function(e){void 0===e&&(e="");var t=this._opts.counterId;t&&!(e.length<3)&&o("topmail",{id:t,type:"reachGoal",goal:e})},_getGoalString:function(e,t){return void 0===e&&(e=""),void 0===t&&(t="0"),e=e.toLowerCase(),(t=t.replace(/\D+/g,""))||(t="0"),e+"_"+t},_onButtonClick:function(e){var t=e.currentTarget,i=this._opts.attrs,n=t.getAttribute(i.price),s=t.getAttribute(i.providerName),o=this._getGoalString(s,n);this._fireCounter(o)}},{attrs:{price:"data-price",providerName:"data-provider-name"},cssSels:{button:".js-hit-counter-goal__button"},counterId:null},null,e);s(e,{paramAttrs:{counterId:"data-counter-id"}}),window.getNameSpace("Modules",window.ru.mail.cpf)[e]=r},8812:function(e,t,i){var n=i(94697),s=i(3314),o=window.localStorage,r=window.ru.mail.cpf.Basic,a="Toggle";r.Constructors.addPlugin(window.ru.mail.cpf.Modules[a],{_Handlers:{toggle:"_onToggle"},_Init:function(){var e=this._opts,t=e.storageKey,i=e.useCookieOnBack;if(t){this._state.storageName=this._getStorageName(t);var n=this._state,s=n.shown,r=n.storageName,a=o.getItem(r);i||"hidden"!==a||!0!==s||this.toggleBlock()}},_onToggle:function(){var e=this._opts,t=e.counterId,i=e.expires,r=e.useCookieOnBack,a=this._state,l=a.shown,c=a.storageName,u=!0===l?"shown":"hidden";c&&(r?(0,n.setCookie)(c,u,{path:"/",expires:i}):o.setItem(c,u)),t&&(0,s.hitCounter)(t,"sb")},_getStorageName:function(e){return void 0===e&&(e=""),("ru.mail.kino."+a+"."+e).toLowerCase()}},{counterId:null,expires:null,storageKey:"",useCookieOnBack:!1},"Statefull"),r.moduleOpts.setParams(a,{paramAttrs:{counterId:"data-counter-id",storageKey:"data-storage-key"}})},24556:function(){var e=window.ru.mail.cpf;(0,e.Basic.moduleOpts.setParams)("AdvMarker",{options:{templates:{tooltip:(0,e.Tools.getTemplate)("ct-adv-marker-tooltip.xml")}}})},86403:function(){!function(e){"use strict";(0,e.Basic.moduleOpts.setParams)("GalleryControls.PopupGalleryView",{options:{cssClss:{disabledControl:"hidden_all"},cssSels:{Main:{Controls:".js-photo_ctrl"}}}})}(window.ru.mail.cpf)},50366:function(){var e=window.ru.mail.cpf.Basic,t=e.Extend,i=e.moduleOpts.setParams,n=window.ru.mail.cpf.Basic.Constructors._repo.get("GalleryPreviews");i("GalleryPreviews",{acceptTypes:["Gallery"],initializer:function(e,i,s,o){return o&&"images"in o&&(e.imagesSet=s.addImagesSet(t(!0,{},o))),new n(e,i,s)},options:{Attrs:{imageVersions:["data-original","data-preview"],imageProps:{description:"data-descr",title:"data-title"}},cssClss:{currentPreview:"cols__column_thumb_active"},cssSels:{Main:{Preview:".js-preview-list__item"}}}}),i("GalleryPreviews.Article",{options:{imagesSet:0}})},30473:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var s=n.imageId,o=n.setId,l=n.versionId;if(t&&e._state.visible&&e._isTargetImage(o,l)&&e._model.getCurrentImage().image===s){var c=t.galleryId||e._model._opts.id,u=!1;c||(c=s,u=!0);var h=a+(u?"photo":"")+c+"/";"function"==typeof r&&(h=r(h)),i({url:h})}};var i=window.ru.mail.cpf.Tools.Counters.hitCntrsBlck,n=window.location,s=n.origin,o=n.pathname,r=(window.UTMApi||{}).urlReplacer,a=""+s+o+"virtual_gallery/"},28699:function(e,t,i){var n=i(64836)(i(30473)),s=window.ru.mail.cpf,o=s.Basic.moduleOpts.setParams,r=s.Tools.getTemplate;o("PopupGalleryView",{options:{cssSels:{Main:{imageView:".js-photo",imageNum:".js-photo_num",imagesTotal:".js-photos_cnt",previewsCont:".js-photo_slider",sizeCont:".js-photo_container",sharesCont:".js-photo_shares"},sizeReference:".js-size-reference",setProps:{title:".js-photo_title",note:".js-photo_note"}},cssClss:{Loading:"viewbox__slide_loading",Error:"viewbox__slide_error",hasPreviews:"viewbox_list",hideShares:"viewbox__slides_hide-shares"},showOnChange:!0,templates:{block:r("ct-viewbox-popup.xml"),frames:r("ct-viewbox-slides.xml"),splash:r("ct-viewbox-more.xml")},showBanner:!0,setContSize:!1,imagesSet:null,imagesVersion:0,resizeView:!0,_Handlers:{model:{imageready:function(e,t,i,s){(0,n.default)(this,e,{imageId:t,setId:i,versionId:s})}}}}}),o("PopupGalleryView.Iframe",{options:{showBanner:!1,frameParams:{allow:"autoplay; encrypted-media; fullscreen; picture-in-picture",allowfullscreen:1}}}),o("PopupGalleryView.Iframe.Set",{options:{_Handlers:{model:{imagechange:function(){if(!0!==this._isPopupOpened){this._isPopupOpened=!0;return}this._elems.parent.get(0).querySelectorAll("iframe").forEach(function(e){var t=e.getAttribute("src"),i=new URL(t);i.searchParams.delete(Current.set=null,this._model._Current.image=null}}}}),o("WritableGalleryPreviews.PopupGalleryView",{options:{previewsVersion:1,Templates:{previews:r("ct-viewbox-previews.xml")},cssSels:{Main:{previewsCont:".js-photo_slider_cont",Preview:".js-photo_preview"}},cssClss:{currentPreview:"viewbox__preview_active"}}}),o("Swipe.ImageViewSlider",{options:{cssSels:{ignoredElems:".js-swipe-ignore"}}})},57482:function(){var e,t,i,n;window.jQuery||window.$,window,t=(ese.resolve(e.Tools.getTemplate("i().then(function(i){return i({layout:e,data:t})})},t("PlayerModel",{options:{_Handlers:{}}}),t("PlayerProvidersView",{options:{templates:{providers:function(e){return n("providers",e)},providerTypes:function(e){return n("priceModels",e)}}}}),t("PlayerInfoView",{options:{templates:{description:function(e){return n("description",e)},providerDescription:function(e){return n("providerDescription",e)}}}}),t("PlayerView",{options:{templates:{player:function(e){return n("player",e)}}}}),t("tes:{episodes:function(e){return n("episodes",e)}}}}),t("ShowPlayer",{options:{templates:{player:i}}})},57245:function(){var e=window.ru.mail.cpf.Basic.moduleOpts.setParams,t={options:{hide:{},show:null}};e("TooltipHint.watchMovie",t),e("TooltipHint.favProgramItem",t)},86030:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeFromCache=t.getFromCache=t.addToCache=void 0;var i,n={},s=function(e){if(void 0===e&&(e=""),"string"==typeof e)return e;var t=e,i=t.url,n=t.data,s=void 0===n?{}:n;return(void 0===i?"":i)+"_"+Object.keys(s).sort().reduce(function(e,t){re"")};t.addToCace)]=t},t.getFromCache=function(e){return n[s(e)]},t.removeFromCache=function(e){"function"==typeof e?Object.keys(n).filter(e).forEach(function(e){return n[e]=i}):n[s(e)]=i}},59961:function(e,t,i){var n,s,o,r,a,l,c,u,h,p,d=i(35345);window.jQuery||window.$,n=window,a=(s=window.ru.mail.cpf).Basic,l={},c="PlayerEpisodesView",u="episodesCont",h={canUpdateHistory:!0,cssSels:((o={})[u]=".js-player_episodes",o.episode=".js-player_episode",o.seasons=".js-player_seasons",o.episodesView=".js-player_episodes_view",o.titleEpisodeNum=".js-player_title-episode-num",o.titleSeasonNum=".js-player_title-season-num",o),cssClss:{activeEpisode:"filter__item_active"},attrs:{episodeNumber:"data-episode"},templates:{episodes:null},episodesViewName:"Slider"},p=a.Constructors.getView({_Handlers:{dom:{"click:episode":"_onEpisodeClick","change:episode":"_onEpisodeSelect","change:seasons":"_onSeasonSelected"},model:((r={})[d.EVENT_CHANGE_EPISODE]="_onEpisodeChanged",r[d.EVENT_CHANGE_SEASON]="_onSeasonChange",r[d.EVENT_RECIEVE_DATA]="_onPlayerDataRecieved",r)},_Init:function(){var e=n.location,t=e.href,i=e.origin;this._lastUrl=t.split(i)[1],this._updateUrl=a.debounce(this._updateUrl.bind(this))},_highlightEpisode:function(e){var t=this._elems,i=this._opts.episodesViewName;if("Slider"===i){var n=this._opts,s=n.attrs,o=n.cssClss.activeEpisode,r=n.cssSels,a=t.episodes;a||(a=this._getElement(u).find(r.episode),t.episodes=a),a.removeClass(o),a.filter("["+s.episodeNumber+'="'+e+'"]').addClass(o)}else if("SimpleSelect"===i){var l=this._getEpisodesView();l&&l.value(e)}},_getEpisodesView:function(){var e=this._opts,t=this._episodesView;return void 0===t&&(t=this._getElement(u).closest(e.cssSels.episodesView).data(e.episodesViewName),this._episodesView=t||null),t},_updateTitle:function(e){var t=e.season,i=e.episode,n=this._opts.cssSels,s=this._elems,o=s.titleEpisodeNum,r=s.titleSeasonNum;o||(o=s.parent.find(n.titleEpisodeNum),s.titleEpisodeNum=o),r||(r=s.parent.find(n.titleSeasonNum),s.titleSeasonNum=r),t&&r.html(t),i&&o.html(i)},_onEpisodeChanged:function(e){var t=this;(this._episodesPromise||Promise.resolve()).then(function(){return t._highlightEpisode(e)}),this._updateTitle({epi("episode.episode_info.url",e),this._updateUrl()},_onSeasonChange:function(e){var t=this._opts,i=this._elems,n=i.seasons;n||(n=i.parent.find(t.cssSels.seasons),i.seasons=n),n.val(e),n.trigger("change"),this._updateTitle({season:e}),this._updateEpisodes(e)},_onEpisodeClick:function(e){var t=e.currentTarget.getAttribute(this._opts.attrs.episodeNumber);t&&(this._model.setEpisode(t),e.preventDefault())},_onEpisodeSelect:function(e){var t=e.currentTarget.valu(e){this._model.setSeason(e.currentTarget.value)},_updateEpisodes:function(e){var t=this,i="htmlForSeason_"+e,n=this._opts,s=this._model,o=this._elems,r=l[i];this._episodesPromise=r?Promise.resolve(r):n.templates.episodes({currentEpisode:s.getCurrentEpisodeAndSeason().episode,eventType:s.getodesBySeason(e)}).then(function(e){return l[i]=e}),this._episodesPromise.then(function(e){t._getElement(u).html(e),o.episodes=null,t._episodesPromise=null,t._updateEpisodesView()})},_updateEpisodesView:function(){var e=this._getEpisodesView();if(e)switch(this._opts.episodesViewName){case"Slider":e.update(!0);break;case"SimpleSelect":e.updateState(),e.update();break;default:throw Error("Выбор эпизодов должен быть слайдером или селектом")}},_updateUrl:function(){if(this._opts.canUpdateHistory&&n.history){var e=this._lastUrl;n.history.replaceState(null,n.document.title,e)}}},h,null,c),a.moduleOpts.setParams(c,{acceptTypes:"PlayerModel"}),n.getNameSpace("Modules",s)[c]=p},35090:function(e,t,i){var n,s,o,r,a,l,c=i(35345);window.jQuery||window.$,n=window,r=(s=window.ru.mail.cpf).Basic,a={},l=r.Constructors.getView({_Events:[c.EVENT_RENDER_DESCRIPTION,c.EVENT_RENDER_PROVIDER_DESCRIPTION],_Handlers:{model:((o={})[c.EVENT_CHANGE_PROVIDERS_TYPE]="_onProvidersTypeChange",o[c.EVENT_CHANGE_LOADING]="_onLoadingStatusChange",o[c.EVENT_RECIEVE_DATA]="_onReceivePlayerData",o)},_Init:function(e){var t=e.eventInfo;this._state={descriptionVisible:!1,eventInfo:void 0===t?{}:t},this.updateProviderDescription(this._model.getPriceModelType())},updateProviderDescription:function(e){varolve(i)function(t){return a[e]=t,t})).then(function(e){return t._elems.providerDescription.html(e)}).then(function(){return t._trigger(c.EVENT_RENDER_PROVIDER_DESCRIPTION)})},toggleDescription:function(e){var t=this._state;t.descriptionVisible!==e&&(t.descriptionVisible=e,this._elems.description.toggleClass(this._opts.cssClss.hiddenDescription,!e))},_onLoadingStatusChange:function(e){var t=this._opts,i=t.cssClss.loading,n=this._elems.parent;e?n.addClass(i),t.loadingOffTimeout)},_onProvidersTypeChange:function(e){this.updateProviderDescription(e)},_onReceivePlayerData:function(e){var t=this,i=this._model._state,n=i.episode,s=i.season,o=this._state.eventInfo,r=e.episode.episode_info;if(!r){this.toggleDescription(!1);return}r.episode=n,r.season=s,r.name=o.name,this._opts.templates.description(r).then(function(e){e&&t._elems.description.html(e),t.toggleDescription(!!e)}).then(function(){return t._trigger(c.EVENT_RENDER_DESCRIPTION)})}},{cssSels:{Main:{freeModeLabel:".js-player_info_free",providerDescription:".js-player_info_type_description",description:".js-player_description"}},cssClss:{freeModeLabelHidden:"hidden",loading:"p-player_loading",hiddenDescription:"hidden"},template:{description:null,providerDescription:null},loadingOffTimeout:300},null,"PlayerInfoView"),r.moduleOpts.setParams("PlayerInfoView",{acceptTypes:"PlayerModel"}),n.getNameSpace("Modules",s).PlayerInfoView=l},33626:function(e,t,i){var n,s,o,r,a,l,c,u,h,p,d,f,_=i(86030),m=i(51396),g=i(35345);window.jQuery||window.$,n=window,a=(r=(s=window.ru.mail.cpf).Basic).getByPath,l=s.Types.String.Url.addParams,c=s.Modules.DataRouter(),u=[g.EVENT_CHANGE_PROVIDERS_TYPE,g.EVENT_CHANGE_PROVIDER,g.EVENT_CHANGE_SEASON,g.EVENT_CHANGE_EPENT_CHANGE_LOADING],h=null,p=!1,d=function(e){return e?e.find(function(e){return!!e.checked}):o},f=r.Constructors.getModel({_Events:u,_Init:function(e){var t=this;this._data=e;var i=d(e.priceModels)||{},s=(d(i.data)||{}).provider||{},o=e.currentEpisode,r=e.currentSeason;this._state={episodeId:this._getEpisodeId(r,o),episode:o,season:r,providersType:i.price_model,providerId:s.id},this._procesnd(this),this._opts.triggerOnInit&&n.requestAnimationFrame(function(){return t.activate(!0)})},activate:function(e){var t=this._state,i=t.episode,n=t.provrentEpisodeAndSeason:function(){var e=this._state;return{episode:e.episode,season:e.season}},getEpisodesBySeason:function(e){return a("seasons."+e+".episodes",thturn this._state.providersType},getPriceModels:function(){return this._data.priceModels||[]},getProvidersByType:function(e){var t=this._data.priceModels.find(function(t){return t.price_model===e});return t?t.data:[]},getDefaultProviderForType:function(e){return this.getProvidersByType(e||this._state.providersType)[0]},getEventType:function(){var e=this._eventType;return void 0===e&&(e=(0,m.getEventTypeByRubricId)(this._data.rubricId),this._eventType=e),e},getTvigleProxy:function(){var e=this;return h?Promise.resolve(h):new Promise(function(t){h=new(a("ru.mail.kino.modules.TviglePlayerProxy",n))({apiUrl:(0,m.getAbsoluteUrayerCallback)}),n[e._opts.tvigleProxyName]=h,e._loadTvigleApi().then(function(){return t(h)})})},setEpisode:function(e,t){var i=this._state;(i.episode!==e||t)&&(i.episode=e,this._trigger(g.EVENT_CHANGE_EPISODE,e),this.updatePlayerData(!0,!0))},setSeason:function(e,t){var i=this._state;(i.season!==e||t)&&(i.season=e,this._trigger(g.EVENT_CHANGE_SEASON,e),this.setEpisode(this._data.seasons[e].default_episode.num,!0))},setProvidersType:function(e,t,i){var n=this;if(void 0===e||-1===this._opts.providerTypes.indexOf(e)||this._state.providersType===e&&!i)return this;if(this._state.providersType=e,!t){var s=this._state.providerId;s||(s=(this.getDefaultProviderForType()||{}).provider.id),this.once(g.EVENT_CHANGE_PROVIDERS_TYPE,function(){return n.setProvider(s,!0)})}return this._trigger(g.EVENT_CHANGE_PROVIDERS_TYPE,e),this},setProvider:function(e,t){return void 0!==e&&(this._state.providerId!==e||t)&&(this._state.providerId=e,this._trigger(g.EVENT_CHANGE_PROVIDER,e),this.updatePlayerData()),this},updatePlayerData:function(e,t){var i=this,n=this._getRequestParams(t,e),s=n.url,o=n.baseUrl,r=n.params,l={url:(0,m.getAbsoluteUrl)("kino",o),data:r},u=(0,_.getFromCache)(l);return(u?Promise.resolve(u):new Promise(function(n,o){i._trigger(g.EVENT_CHANGE_LOADING,!0),c.getData(s).then(function(s){if(!a("most_prior_player.tariff",s)&&(!e||!t))return t?e=!0:t=!0,i.updatePlayerData(e,t);(0,_.addToCache)(l,s),n(s)},o)})).then(this._processResponse).then(function(e){return i._trigger(g.EVENT_CHANGE_LOADING,!1),i._trigger(g.EVENT_RECIEVE_DATA,e),e})},_comparePriceModels:function(e){var t=this,i=this._data.priceModels;return i.length===e.length&&i.every(function(i,n){var s=e[n];if(!s)return!1;var o=s.checked,r=s.price_model,a=t._state,l=a.providerId,c=a.providersType;if(i.price_model!==r||o&&r!==c)return!1;var u=s.data;return(i.data||[]).every(function(e,t){var i=u[t];return!!i&&e.provider.id===i.provider.id&&(!i.checked||l===i.provider.id)})})},_getRequestParams:function(e,t){var i=this._state,n=i.episode,s=i.season,o=i.providerId,r=i.providersType,a=this._opts.api,c={eid:this._getEpisodeId(n,s),pid:e?null:o,pm:t?null:r};Object.assign(c,a.staticParams);var u=a.getEpisode;return{url:(0,m.getAbsoluteUrl)("kino",l(c,u)),baseUrl:u,params:c}},_getEpisodeId:function(e,t){var i=this._data.seasons;return i?a(t+".episodes."+e+".episode_id",i):this._state.episode},_loadTvigleApi:function(){var e=this;return p?Promise.resolve():new Promise(function(t,i){var s=document.createElement("script");s.setAttribute("async","async"),s.onload=function(){p=!0,n.tvigle.removeListeners(),t()},s.onerror=i,s.src=e._opts.tvigleLibSrc,document.head.appendChild(s)})},_processResponse:function(e){var t=this,i=a(this._opts.playerParamsPath,e),n=e.video_by_price_model|ta.priceModels=n,(0,_.removeFromCache)(function(e){return -1!==e.indexOf("providersByType")}),n.some(function(e){if(e.checked)return t._state.providersType=e.price_model,e.data.some(function(e){if(e.provider.checked)return t._state.providerId=e.provider.id,!0}),!0}),s=!0),{episode:e,eventType:this.getEventType(),isTvigle:!!(i&&i.istvigle),providersType:this._state.providersType,wasProvidersChanged:s}}},{api:{getEpisode:"",playerCallback:"/api/player_callback/",staticParams:{autoplay:1}},playerParamsPath:"most_prior_player.tariff.0.data.0.player",providerTypes:["buy","free","subscr"],tvigleLibSrc:"https://cloud.tvigle.ru/static/player/player_builder.min.js",tvigleProxyName:"TviglePlayerProxy",triggerOnInit:!0},null,"PlayerModel"),n.getNameSpace("Modules",s).PlayerModel=f},11887:function(e,t,i){var n,s,o,r,a,l,c,u,h,p,d=i(35345);window.jQuery||window.$,n=window,a=(s=window.ru.mail.cpf).Basic,l="providersCont",c="providersType",u="providerTypesCont",h={cssSels:((o={})[l]=".js-player_providers_list",o[c]=".js-player_provider_type",o[u]=".js-player_provider_types_list",o.provider=".js-player_provider",o),cssClss:{activeProvider:"filter__item_active",activeProvidersType:"filter__item_active"},attrs:{providerId:"data-id",providersType:"data-type"},templates:{providers:null,providerTypes:null}},p=a.Constructors.getView({_Events:[d.EVENT_RENDER_PROVIDERS_LIST],_Handlers:{dom:{"click:providersType":"_onProvidersTypeClick","click:provider":"_onProviderClick","change:provider":"_onProviderChange"},model:((r={})[d.EVENT_CHANGE_PROVIDER]="_onProviderChangeByModel",r[d.EVENT_CHANGE_PROVIDERS_TYPE]="_onProvidersTypeChange",r[d.EVENT_RECIEVE_DATA]="_onReceivePlayerData",r)},_Init:function(){this._state={}},highlightControlById:function(e,t){if(e){var i,n,s,o=this._opts,r=this._elems;t?(r.providers||(r.providers=this._getElement(l).find(o.cssSels.provider)),i=r.providers,n=o.cssClss.activeProvider,s=o.attrs.providerId):(i=this._getElement(c),n=o.cssClss.activeProvidersType,s=o.attrs.providersType),n&&i.removeClass(n).filter("["+s+'="'+e+'"]').addClass(n)}},_onProviderClick:function(e){var t=e.currentTarget.getAttribute(this()},_onProviderChange:function(e){var t=e.currentTarget.value;t&&this._model.setProvider(t)},_onProvidersTypeClick:function(e){var t=e.currentTarget.getAttribute(this._opts.attrs.providersType);t&&this._model.setProvidersType(t),e.preventDefault()},_onProvidevidersRenderPromise||Promise.resolve()).then(function(){return t.highlightControlById(e,!0)})},_onProvidersTypeChange:function(e){var t=this._state.priceModelsTotal;void 0===t&&(t=this._model.getPriceModels().length,this._state.priceModelsTotal=t),this._renderProviders(e),this.highlightControlById(e)},_onReceivePlayerData:function(e){var t=this;e.wasProvidersChanged&&(this._opts.templates.providerTypes({priceModels:this._model.getPriceModels()}).then(function(e){t._elems[c]=null,t._getElement(u).html(e)}),this._renderProviders())},_renderProviders:function(){var e=this,t=this._model,i=t.getPriceModelType(),n={priceType:i,priceModelsTotal:t.getPriceModels().length,providers:t.getProvidersByType(i)};this._providersRenderPromise=this._opts.templates.providers(n).then(functividersRenderPromise=null}).then(function(){return e._trigger(d.EVENT_RENDER_PROVIDERS_LIST)})}},h,null,"PlayerProvidersView"),a.moduleOpts.setParams("PlayerProvidersView",{acceptTypes:"PlayerModel"}),n.getNameSpace("Modules",s).PlayerProvidersView=p},96602:function(e,t,i){var n,s,o,r,a,l,c=i(35345);window.jQuery||window.$,n=window,r=(s=window.ru.mail.cpf).Basic,a=0,l=r.Constructors.getView({_Handlers:{model:((o={})[c.EVENT_RECIEVE_DATA]="_onPlayerDataRecieved",o)},_Init:function(e){var t=e.eventInfo;e.isTvigle&&this._createTviglePlayer(),this._state={eventInfo:t}},_onPlayerDataRecieved:function(e){var t=this;Object.assign(e,this._state),this._opts.templates.player(e).then(function(i){t._elems.container.html(i),e.isTvigle&&t._createTviglePlayer()})},_createTviglePlayer:function(){var e=this._opts.cssSels,t=this._elems.container.find(e.Main.tviglePlayer);t.length&&this._model.getTvigleProxy().then(function(i){var s="tviglePlayer_"+a++,o=t.find(e.tvigleKey),rtParams({id:s,key:r}),n.tvigle.createPlayers(null,s)},function(e){return n.console.error(e)})}},{cssSels:{Main:{container:".js-player_player",tviglePlayer:".TviglePlayer"},tvigleKey:"param[name=kinomailkey]"},templates:{player:null}},null,"PlayerView"),r.moduleOpts.setParams("PlayerView",{acceptTypes:"PlayerModel"}),n.getNameSpace("Modules",s).PlayerView=l},95877:function(e,t,i){var n,s,o,r,a,l,c,u,h,p=i(86030),d=i(51396);window.jQuery||window.$,n=window,r=(o=(s=window.ru.mail.cpf).Basic).getByPath,a=s.Types.String.Url.addParams,l="_pageUrl_"+Math.round(1e11*Math.random()),c=function(e){var t=e.defaultEpisode,i=r("seasons."+e.defaultSeason+".episodes."+t+".episode_id",e)||t,n="",s="";return e.video_by_price_model.some(function(e){var t=!!e.checked;return t&&(s=e.price_model,e.data.some(function(e){var t=e.checked;return t&&(n=e.ino",e.apiUrl),data:{eid:i,pid:n,pm:s}}},u=function(e){void 0===e&&(e=""),n.location.hash=e},h=o.Constructors.getView({_Handlers:{"dom:click:playButton":"_onButtonClick"},getVideoParams:function(e){if(!e)throw TypeError("button should be an HTMLElement");var t=e._videoParams;if(!t){if(!(t=JSON.parse(e.getAttribute(this._opts.attrs.playerParams)||null))||!t.eid)throw Error("eid is required for the video player");e._videoParams=t}return t},getPlayerData:function(e){var t=this._opts,i=t.api,n=i.url,s=i.staticParams,o=Object.assign({},s,e),r=(0,d.getAbsoluteUrl)("kino",a(o,n)),l=(0,p.getFromCache)(r);return l?Promise.resolve(l):fetch(r).then(function(e){return e.json()}).then(function(e){var i=t.processData(e);(0,p.addToCache)(r,i);var n=i.apiUrl,o=i.most_prior_player,a=i.video_by_price_model,l=i.episode_info,u=i.defaultEpisode,h=i.defaultSeason,d=c(i);return Object.assign(d.data,s),(0,p.addToCache)(d,{apiUrl:n,defaultEpisode:u,defaultSeason:h,episode_info:l,most_prior_player:o,video_by_price_model:a}),i})},show:function(e){var t=e.eid;if(!t)throw Error("videoParams.eid is required");var i=this._opts,r=this._popups;if(r[t]){r[t].show();return}var a=Promise.all([this.getPlayerData(e),i.templates.player()]).then(funclate)),n.requestAnimationFrame(function(){s.Tools.initModules(a,i.init.options,i.init.data)})}),c=i.canUpdateHistory,h=i.cssSels,p=h.player,d=h.playerCont,f=i.hashKeys.autoplay,_={_Handlers:{show:function(){var e=n.location.href.replace(f,"");this[l]=e,u(f)},hide:function(){var e=this;if(this._elems.parent.find(d).get(0).innerHTML="",this.once("show",function(){e._elems.parent.find(p).data("PlayerModel").activate()}),c){;t&&t.replaceState(null,i.title,this[l])}u()}},templates:{parent:function(){return"<div />"}}};o.Extend(!0,_,i.popupOpts);var m=s.Tools.initModule(i.popupModuleName,null,_);r[t]=m,m.show(a)},_Init:function(){this._popups={};var e=this._opts,t=e.cssSels,i=e.hashKeys;if(e.autoShowOn||document.location.hash===i.autoplay){var n=this._elems.parent.find(t.playerButtonAutoplay);n.length&&this.show(this.getVideoParams(n.get(0)))}},_onButtonClick:function(e){e.preventDefault(),this.show(this.getVideoParams(e.currentTarget))}},{cssSels:{playButton:".js-player_play",player:".js-player",playerButtonAutoplay:".js-player_autoplay",playerCont:".js-player_player"},attrs:{playerParams:"data-player"},templates:{player:null},api:{url:"/ajax/event_player/",staticParams:{}},canUpdateHistory:!0,autoShowOn:!1,processData:function(e){var t=e.online_video_episodes,i=e.event_info,n=t.default_episode_data,s=n.video_by_price_model,o=t.default_episode,a=t.default_season,l=t.get_episode_ajax_url,c=t.seasons,u=void 0===c?null:c;return{template:{layout:"popup",data:{episodes:t,eventType:(0,d.getEventTypeByRubricId)(i.main_rubric_id),name:i.name,namingConfig:"",priceModels:s,url:(0,d.getAbsoluteUrl)("kino",i.url)}},init:{data:{PlayerModel:{currentEpisode:o,currentSeason:a,priceModels:s,rubricId:i.main_rubric_id,seasons:u},PlayerView:{eventInfo:i,isTvigle:!!r("most_prior_player.tariff.0.data.0.player.istvigle",n)}},options:{PlayerModel:{api:{getEpisode:l}}}},video_by_price_model:s,most_prior_player:n.most_prior_player,episode_info:n.episode_info||{},defaultEpisode:o,defaultSeason:a,apiUrl:l,seasons:u}},popupModuleName:"Popup.player",popupOpts:{},hashR_PROVIDER_DESCRIPTION="providerDescriptionRender",t.EVENT_RECIEVE_DATA="receivePlayerData"},51396:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getEventTypeByRubricId=t.getAbsoluteUrl=void 0;var i={kino:'meta[property="domain:kino"]',tv:'meta[property="domain:tv"]'},n={domains:{},urls:{}},s=function(e){var t=n.domains,s=t[e];if(!s){var o=document.querySelector(i[e]);t[e]=s=o&&o.content}return s};t.getAbsoluteUrl=function(e,t){var i=e+"_"+t,o=n.urls,r=o[i];return r||(r="//"+s(e)+(0!==t.indexOf("/")?"/":"")+t,o[i]=r),r},t.getEventTypeByRubricId=function(e){var t=e+"";return"1"===t?"movie":"11"===t?"series":"13"===t?"tvshow":""}},40895:function(){var e,t,i,n,s,o;e=window.ru.mail.cpf,t=window,s=(i=function(e){t.tvvigle.api.modules.APIModules.VIDEO_PLAYER).getDuration(function(t){e.duration=Math.round(t)})},{on_progress:function(e){var t=this._videoParams;isNaN(e=MathprevProgress===e||this.updateProgress(e)},metadata_received:function(){i(this._videoParams)},playback_start:n=function(){var e=this._videoP"))},start:n}),(o=function(e){this._params=e,this.eventHandler=this.eventHandler.bind(this)}).prototype.setParams=function(t){this._videoParams=e.Basic.Extend({},t,{isStarted:!1,progress:[{progress:25,action:"progress25"},{progress:50,action:"progress50"},{progress:75,action:"progress75"}]})},o.prototype.updateProgress=function(e){var t,i=this._videoParams,n=i.progress;i.prevProgress=e,n.length&&(i.progress=n.filter(function(i){var n=i.progress<=e;return n&&(t=i.action),!n}),t&&this.reportEvent(t))},o.prototype.reportEvent=function(t){var i={key:this._videoParams.key,action:t},n=e.Types.String.Url.addParams(i,this._params.apiUrl);document.createElement("img").src=n},o.prototype.eventHandler=function(e){var t=e.name;"function"==typeof s[t]&&s[t].apply(this,e.args)},o.prototype.onLoaded=function(){},t.getNameSpace("ru.mail.kino.modules").TviglePlayerProxy=o},41887:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={common:{},tv:{showOnlinePlayer:{rbmail:{id:"93720223",type:"display"}},showChannelPlayer:{rbmail:{id:"93720232",type:"display"}}}}},71470:function(e,t,i){var n=i(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.counterTrigger=void 0;var s=n(i(98177)),o=n(i(41887)),r=(0,s.default)({counters:o.default,debug:!1});t.counterTrigger=function(e,t,i){if("ALL"===e){r.triggerAll();return}r.counterTrigger({extendOptions:t,name:e,group:i})}},75127:function(e,t){Object.defineProperty(t 0;var i,n=t.getDWHLoggerof window?window.DWHLogger:null};t.attachChildrenToDWH=(i=function(e,t){e.attachChildren(t)},function(){var e=n();if(e){for(var t=arguments.length,s=Array(t),o=0;o<t;o++)s[o]=arguments[o];return i.call.apply(i,[null,e].concat(s))}console.error("Нет экземпляра DWHLogger")})},3314:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hitCounter=t.createHitCounter=void 0;var i=t.hitCounter=function(e,t){void 0===t&&(mail.ru/"+t+e+".gif?rnd="+Math.round(1e11*Math.random())};t.createHitCounter=function(e,t){return i(e,t)}},72388:function(){!function(e,t,i){"use strict";var n=i.Tools.PubSub,s=i.Basic.debounce;i.Basic.Constructors.addPlugin("LazyLoad",{_Init:function(){this._ids=[],this._publish=s(this._publish.bind(this),2e3)},display:function(e){var t=this._ids,i=e.elem.attr("data-id");return i&&(~t.indexOf(i)||(t.unshift(i),this._publish()),t.length>24&&t.splice(24,t.length-24)),!0},_publish:function(){n.publish("schedule.scroll",this._ids),this._ids=[]}},{cssSels:{lazy:".p-channels__item"},precede:1,immediate:!0},"Autoupdate")}(window.jQuery||window.$||window.$f,window,window.ru.mail.cpf)},47067:function()addPlugin(t.Modules.MylistBoxView,{onInit:function(){this._super.apply(this,arguments),this._setUpdate()},onMylistData:function(e){this._super.apply(this,arguments),this._Opts.items=e.data.data,this._setUpdate()},_setUpdate:function(){var t,n=this._Ms,a=Arrreturn e.schedule.map(function(e){return e.event})})).sort(function(e,t){return e.stop_ts<t.stop_ts?-1:1}),l=a[0]&&1e3*parseInt(a[0].stop_ts,10);e.clearTimeout(this._updateTm),l>0&&(t=l-s-(new Date().getTime()-o),this._updateTm=e.setTimeout(this._Model.fetchFavorite.bind(this._Model),t),i&&console.log("MylistBoxView.Autoupdate: fetchFavorite set to "+new Date(Date.now()+t)))}},{},"Autoupdate")}(window,window.ru.mail.cpf)},35415:function(){!function(e,t,i){"use strict";var n=i.Basic,s=n.getByPath,o=n.Extend;i.Basic.Constructors.addPlugin(i.Modules.Schedule,{_Handlers:unction(e){this._super.apply(this,arguments),this._onSchedule(e)},setIds:function(e){this._ids=e.slice()},_onSchedule:function(e){this._processRequest("initial"===e?this.getInitialData():e),this._setTimer()},_processRequest:function(e){var t=e.current_offset;void 0!==t&&(this._offset=1e3*t),this._servTsew Date().getTime(),this._filters=Object.keys(e.form).reduce(function(t,i){return t[i]=e.form[i].value,t},{}),delete this._filters.date,this._isAuto="now"===s("form.period.value",e)},_setTimer:function(){var e,i,n;t.clearTimeout(this._tm),this._isAuto?(e=this._opts.updateInterval)&&(this._tm=t.setTimeout(this.updateSchedule.bind(this),e)):this.getDaysBefore()>=0&&(n=(i=new Date(this._servTs)).getUTCHours(),i.setUTCMilliseconds(0),i.setUTCSeconds(0),i.setUTCMinutes(0),i.setUTCHours(5),n>=5&&i.setUTCDate(i.getUTCDate()+1),e=i.getTime()-this._servTs+(3e4+Math.floor(6e4*Math.random())),this._tm=t.setTimeout(this.updateSchedule.bind(this),e))},updateSchedule:function(e){var i=this,n=this._today,s=o({},this._filters);this._isAuto&&(s.in=e||this._ids),this.getDaysBefore()>0&&(s.date=this._selectedDate),this._fetchSchedule(s).then(function(e){"OK"===e.status&&(i._processRequest(e),i._trigger(i._isAuto?"scheduleUpdate":"schedule",e),n!==i._today&&(t.console.log(">>> Телесутки изменились с "+n+" наnction(e){return t.console.error(e)})},getTimes:function(){return{servTs:this._servTs,zeroTs:this._zeroTs,offset:this._offset}},_onVisibilityChange:function(){var e=this._lostVisibilityTime,i=Date.now()-e,n="visible"===document.visibilityState&&this._opts.updateInterval&&e;n&&i>864e5&&(t.location.reload(),this._log("...reload page")),n&&i>36e5&&(this.updateSchedule(),this._log("...update schedule")),this._super()}},{canReload:!1,updateInterval:12e4},"Autoupdate")}(window.jQuery||window.$||window.$f,window,window.ru.mail.cpf)},81815:function(){!function(e,t,i){"use strict";var n,s=e.DEBUG,o=t.Basic.Extend,r=t.Tools.PubSub,a={cssSels:{onair:".p-programms__item_onair"},cssClss:{onair:"p-programms__item_onair",passed:"p-programms__item_passed"},Template:{program:t.Tools.getTemplate("ct-programms_item.xml"),channelsLive:t.Tools.getTemplate("ct-channels-live.xml")}},l={_Handlers:{model:{scheduleUpdate:"onScheduleUpdate",visibilitychange:"onVisibilityChange"},"pubsub:schedule.scroll":"onScheduleScroll"},onInit:function(e){var t=this._Model.getTimes();this._updateParams={servTs:t.servTs,zeroTs:t.zeroTs,schedule:e.schedule,channelsLive:e.channels_live},i(document).ready(this._onAir.bind(this)),this._super.apply(this,arguments),this._reqTime={}},onInitControl:function(e){var t=e.data.name,i=e.data.value,n=this._updateParams;"period"===t?n.auto="now"===i:"date"===t&&(n.days=this._Model.getDaysBefore()),this._super.apply(this,arguments)},onScheduleData:function(e,t){this._super.apply(this,arguments),e=this._getUpdateParams(e),t?o(!0,this._updateParams,e):this._updateParams=e,this._channels=null,this._onAir()},onScheduleUpdate:function(e){o(!0,this._updateParams,this._getUpdateParams(e)),this._channels=null,this._onAir(),this._updateLiveChannels(),r.publish("schedule.autoupdate")},onScheduleScroll:function(e){var t,i,n=this._updateParams.schedule;this._updateParams.auto&&(i=new Date().getTime(),t=e.data.filter((function(e){var t=this._reqTime[e]||0;if(!(n[e]&&n[e].length>5||i-t<3e5))return this._reqTime[e]=i,!0}).bind(this)),this._model.setIds(e.data),t.length&&this._model.updateSchedule(t))},_getUpdateParams:function(e){var t=e.form&&e.form.period&&e.form.period.value,i=this._Model.getTimes();return{auto:"no.servTs,zeroTs:i.zeroTs,channelsLive:e.channels_live,schedule:e.schedule.reduce(function(e,t){return e[t.channel.id]=t.event,e},{})}},_getChannels:function(){var e=this._opts.cssSels,t=this._channels||{};return this._channels||(this._elems.parent.find(e.channel).each(function(){var n=i(this),s=n.attr("data-id"),o=n.find(e.programs);s&&o.length&&(t[s]=o)}),this._channels=t),t},_renderLiveChannels:function(e){if(e){var t=this._Opts.Template.channelsLive;if(!this._channelsLiveSlider){var n=i(".js-slider-onair");if(!n.length)return;this._channelsLiveSlider=n.data("Slider")}Promise.resolve(t).then((function(t){var n=this._channelsLiveSlider,s=i(t(e)),o=n._State.$currentFrame,r=n._State.$frames.index,_updateLiveChannels:function(){var e=this._updateParams.channelsLive||[],t=(e||[]).map(function(e){return e.event&&e.event.id});this._channelsLiveIds||(this._channelsLiveIds=t);var i=JSON.stringify(this._channelsLiveIds)===JSON.stringify(t);e.length&&!i&&"visible"===document.visibilityState&&(this._renderLiveChannels(e),this._channelsLiveIds=t)},_onAir:function(){var t,i=this._opts.cssSels.program,n=this._updateParams,o=this._Opts.programCount||5,r=this._getChannels(),a=new Date().getTime(),l=a+(s?1:10)*6e4;e.clearTimeout(this._tm),0===n.days&&(Object.keys(n.schedule||{}).forEach(function(e){var t=n.schedule[e],s=r[e];if(s){var c=s.find(i).first();if(!t||!t.length){this._shiftSchedule(s);return}if(n.auto)for(;t[1];)if(a>=this._getStartTime(t[1].start))t.shift();else break;n.auto&&t.length>=o&&c.length&&c.attr("data-id")!==t[0].id?this._replaceSchedule(c,t,o):this._shiftSchedule(s),t.some((function(e){var t=this._getStartTime(e.start);if(t>a&&t<l)return l=t}).bind(this))}},this),t=l-new Date().getTime(),this._tm=e.setTimeout(this._onAir.bind(this),t),s&&e.console.log("ScheduleView.Autoupdate#_onAir: _onAir set to "+new Date(Date.now()+t),"timeout: "+t))},_replaceSchedule:(n=function(e,t){t.each(function(t,n){var s=n.getAttribute("data-id"),o=e.filter(function(e,t){return t.getAttribute("data-id")==s});o.length&&i(n).addClass(o.get(0).className)})},function(e,t,s){var o,r=this._Opts.cssSels.programs,a=this._Opts.cssSels.programsItems,l=this._Opts.cssClss.onair,c=this._Opts.Template.program,u=e.parents(r),h=u.children(a);Promise.resolve(c).then((function(r){o=i(),t.slice(0,s).forEach(function(e){o=o.add(r(Object.assign({appearance:"grid"},e)))}),o.first().addClass(l),u.css("height",u.height()),e.css("height",e.height()).animateLeave().active(function(){e.css("height",0)}).done(function(){e.remove(),n(h.chil.animateCustom("resize",{duration:300}).active(function(){u.css("height",h.innerHeight())}).done(function(){u.css("height",!0)})})}).bind(this))}),_shiftSchedule:function(e){for(var t,i,n,s=this._Opts.cssSels.program,o=this._Opts.cssClss.onair,r=this._Opts.cssClss.passed,a=this._Opts.cssClss.program.favorite,l=new Date().getTime(),c=e.find(s).first();c&&c.length;)t=c.next(),n=0,!c.hasClass(r)&&(i=this._getStartTime(c.attr("data-start")),t.length&&(n=this._getStartTime(t.attr("data-start"))),n&&n<l?c.removeClass(o).removeClass(a).addClass(r):i<l&&(c.addClass(o),t=null)),c=t},_getStartTime:function(e){var t=this.n=new Date(i),s=i.getUTCHours(),o=t.days,r=this._updateParams.auto;return e=e.split(":").map(function(e){return parseInt(e,10)}),n.setUTCSeconds(0),n.setUTCHours(e[0]),n.setUTCMinn.getUTCDate()+o),n-i+t.zeroTs},onVisibilityChange:function(){"visible"===document.visibilityState&&this._updateLiveChannels()}};t.Basic.Constructors.addPlugin(t.Modules.ScheduleView,l,a,"Autoupdate")}(window,window.ru.mail.cpf,window.jQuery||window.$||window.$f)},40839:function(){var e,t,i,n=window.ru.mail.cpf,s=n.Tools.PubSub,o=n.Basic,r=(e=window.localStorage,t="tv.category",i=JSON.parse(e.getItem(t))||{},function(n){return n&&(i=n,e.setItem(t,JSON.stringify(n))),i});window.ru.mail.cpf.Modules.CustomGroup=o.Constructors.getView({_Events:["click","change","ready"],_Handlers:{"dom:change:items":"onChangeItem"},_Init:function(){var e=this._opts.cssSels,t=r();this._elems.parent.find(e.items).each(function(e,i){var n=i.value;n in t&&(i.checked=!0,s.publish("schedule.category",{category:n,isActive:!0}))})},onChangeItem:function(e){var t=this._opts,i=r(),n=e.currentTarget,a=n.checked,l=n.value;a?i[l]=1:delete i[l],r(i),s.publish("schedule.category",{category:l,isActive:a});var c=o.getByPath("counters.click."+l,t);c&&s.publish("ScheduleForm.Counters",{type:t.counters.type,counters:c})}},{cssSels:{Main:{},items:".js-button"},cssClss:{active:"button_active",disabled:"button_categorydisabled",hidden:"hidden"}},null,"Category"),o.moduleOpts.setParams("CustomGroup.Category",{acceptTypes:"Schedule"})},53102:function(e,t,i){var n=i(73751),s=i(75127),o=i(3314),r=window.ru.mail.tv.counters.event,a=window.fest._helpers,l=window.$||window.jQuery,c=a.getCounter,u=window.ru.mail.cpf,h=u.Basic,p=h.Extend,d=h.moduleOpts.setParams,f=h.typeOf,_=u.Tools,m=_.Counters.hitCntrsBlck,g=_.getTemplate,v=_.initModule,y=_.initModules,w=_.PubSub,b={cssSels:{Main:{},title:".p-event__title",container:".js-event-popup",content:".js-event-popup__content",trailer:".js-event-popup__trailer",favorite:".js-event_favorite",feedback:".js-feedback",date:".js-event__schedule-date"},cssClss:{loading:"loading-process",htmlMdfr:"popup-shown",mylist:{loading:"button_loading",favorite:"button_active"},activeBanner:"overlay_banner-active"},templateNames:{tooltip:"ct-tooltip-button-favorite.xml"},Template:{popup:g("ct-event-popup.xml"),event:g("ct-event.xml"),trailer:g("ct-event-trailer-popup.xml")},eventKey:"tv_event",tooltipOptsNamespace:"favProgramItem",tooltipHideTimeout:5e3,initMpfComponents:!0,prepareData:null};window.ru.mail.cpf.Modules.EventPopupView=window.ru.mail.cpf.Basic.Constructors.getView({_Events:["update","updateContent","close"],_Handlers:{update:"onUpdate",updateContent:function(){this.initMpfComponents(!0)},close:"onClose",model:{favorite:"onFavorite"},dom:{"click:favorite":"onFavoriteClick","click:date":"onDateClick","click:feedback":"onFeedback","click:trailer":"onTrailerClick"},pubsub:{"event.id":"onEvent"}},_Init:function(){this._popup=this._elems.Parent.Popup().data("_popupObj"),this._popup.bind({show:(function(){l("html").addClass(this._opts.cssClss.htmlMdfr),w.publish("popup","show");var e=c(r,"popup_show","show");(0,o.hitCounter)(e)}).bind(this),hide:(function(){this._isTemporaryClose||this._trigger("close"),w.publish("popup","hide")}).bind(this)}),w.subscribe("tip",this.onTip.bind(this),{async:!1}),w.subscribe("beforeRatingRuleShow",this.beforeHidePopup.bind(this),{async:!1})},onFavorite:function(e){var t=this._opts.cssClss.mylist,i=this._elems.parent.find(this._opts.cssSels.favorite).filter(function(t,i){return i.getAttribute("data-id")==e.id});i.length&&(i.toggleClass(t.favorite,e.favorite),i.attr("title",e.favorite?"Убрать передачу из списка просмотра":"Добавить передачу в список просмотра"),this._showButtonTip(i,!e.favorite),i.removeClass(t.loading))},onFavoriteClick:function(e){e.stopPropagation(),e.preventDefault();var t=this._opts,i=e.currentTarget||e.target,n=i.getAttribute("data-id"),s=t.cssClss.mylist,o=s.favorite,r=s.loading,a=i.classList,l=o.split(" ").every(function(e){return a.contains(e)});a.contains(r)||(a.add(r),this._Model.saveFavorite({id:n,type:"program",favorite:!l})),t.templateNames.tooltip&&this._getTemplate()},onEvent:function(e){var t=this,i=e.data,n=!1,o=!1,r=function(e){Promise.resolve(t._opts.Template.popup).then(function(n){var r={},a=n(t._proceedData(e)),c=t._elems.parent;c.empty().append(a);try{r=e.tv_event.afisha_event&&e.tv_event.afisha_event.rate}catch(e){window.console.error(e)}d("RatingView.EventPopup",{options:{rateData:r}}),d("AsyncForms.Feedback.Popup",{options:{templateParams:{userParams:{event_id:i}}}}),t._trigger("update",eger)();u&&u.attachChildren({root:c.get(0)})}),t.showBanner()},a=function(){throw t._isErrorClose=!0,Error()},l=function(){!n&&o&&(window.requestAnimationFrame((function(){y(t._elems.parent)}).bind(t)),n=!0)};this._popup.Show({beforeShow:(function(){return delete this._isErrorClose,this._Model.fetchEvent({id:i}).then(r,a)}).bind(this),onShow:l})},showBanner:function(){if(this._banner)this._banner.reload();else{var e=this._popup._overlay._elems.parent;this._banner=v("Banner.EventPopupView",e)}},_clearBanner:function(){this._banner&&(this._banner.hide(),this._banner=null,tanner",null))},initMpfComponents:function(e){((e=!0===e)||this._opts.initMpfComponents)&&(0,n.initAllComponents)(this._elems.parction(){this.initMpfComponents(),m()},onClose:function(){this._clearBanner(),this._elems.parent.find(this._opts.cssSels.container).detach(),this._getTooltip(!0).then(function(e){e&&e.hide()})},onFeedback:function(e){e.preventDefault(),y(l(e.currentTarget),null,null,{attrs:{moduleType:"data-module"}}).Show()},onTrailerClick:function(e){e.preventDefault();var t=l(e.currentTarget).attr("data-trailer-url"),i={templates:{parent:this._opts.Template.trailer},_Handlers:{hide:(function(){this._trailerPopup.destroy(),this._trailerPopup=null,this._popup._trigger("show")}).bind(this)}};t&&(this._trailerPopup=v(["Popup","TrailerView"],null,i,{trailerUrl:t}),this._trailerPopup.show())},beforeHidePopup:function(e){this._isTemporaryClose=!0,e.data.popup.once("hide",(function(){window.setTimeout(this._popup.Show.bind(this._popup)),delete this._isTemporaryClose}).bind(this))},onDateClick:function(e){var t,i,n,o=this,r=l(e.currentTarget||e.target).attr("data-id"),a=this._opts.cssClss.loading,c=this._elems.parent,u=this._popup,h=this._opts.Template.event;this._preventLoading||(this._preventLoading=!0,i=this._Model.fetchEvent({id:r}),n=function(){o._preventLoading=!1.animateLeave().done(function(){t.css("height",t.children().outerHeight()).empty();var e=window.setTimeout(function(){c.addClass(a)},40),n=function(){window.clearTimeout(e),c.removeClass(a)};i.then(n,n),i.then(function(e){Promise.resolve(h).then(function(i){var n=l(i(o._proceedData(e)));n.animateEnter().active(function(){t.append(uterHeight())}).done(function(){y(n),t.css("height",""),o._trigger("updateContent",e),o.showBanner();var i=(0,s.getDWHLogger)();i&&i.attachChildren({root:t.get(0)})})})},function(){u.Hide()})}))},onTip:function(e){var t="show"===e.data.state;this._popup._state.visible&&t?(this._isTemporaryClose=!0,this._popup.Hide()):(this._popup._visible||t||!this._isTemporaryClose||this._popup.Show(),delete this._isTemporaryClose)},_showButtonTip:function(e,t){var i=this;Promise.all([this._getTooltip(),this._getTemplate()]).then(function(n){var s=n[0],o=n[1];s.position(e).show(o({type:t?"del":"add"}),i._opts.tooltipHideTimeout)})},_getTooltip:function(e){var t=this,i=this._tooltipPromise;return i||e||(i=this._getTemplate().then(function(e){var i=("TooltipHint."+t._opts.tooltipOptsNamespace).replace(/\.\./g,"."),n=l(e());return document.body.appendChild(n.get(0)),v(i,n,{target:t._elems.parent})}),this._tooltipPromise=i),i||Promise.resolve()},_proceedData:function(e){var t=this._opts.onairSlot;return p(!0,{},this._prepareData(e),{onairSlot:t})},_prepareData:function(e){var t=this._opts.prepareData;return f(t,"function")&&t.call(this,e)||e},_getTemplate:function(){var e=this._opts.templateNames.tooltip;return e?Promise.resolve(g(e)):Promise.reject()}},b,null,"EventPopupView"),d("EventPopupView",{acceptTypes:["Schedule"],paramAttrs:{onairSlot:"data-onair-slot"}})},497f,n=i.Basic,s=n.Constructors,o=n.moduleOpts,r=i.Modules,a=i.Tools.PubSub,l=a.publish.bind(a,"history.save"),c=(window.UTMApi||{}).urlReplacer;function u(e){return"function"==typeof c?c(e):e}s.addPlugin(r.EventPopupView,{_Handlers:{self:{updateContent:"onUpdateContent"},"pubsub:history.state":function(e){var i,n=this._opts.redirectUrl,s=this._popup,o=e.data;if(n)window.history.go(0);else if(s._state.visible)this._isHistoryTransition=!0,s.Toggle(!1);else if(o.type===t){this._isHistoryTransition=!0;var r=u((i=JSON.parse(o.data)).url);a.publish("event.id",i.id),l({type:t,data:o.data,url:r})}}},_Init:function(i){if(this._opts.redirectUrl){if(window.history.state&&window.history.state.type===t)e=window.history.state.data;else{var n=u(i.url);l({type:t,data:e=JSON.stringify({id:i.id,url:n})})}}},onUpdate:function(i){var n=i[this._Opts.eventKey];if(e=JSON.stringify({id:n.id,url:n.url}),this._isHistoryTransition)this._isHistoryTransition=!1;else{var s=u(n.url);l({type:t,data:e,url:s,replace:!1})}o.set("AsyncForms.Feedback.Popup",{templateParams:{userParams:{referrer:n.url}}}),this._super.apply(this,arguments)},onUpdateContent:function(i){var n=u(i[this._Opts.eventKey].url);l({type:t,data:e,url:n}),o.set("AsyncForms.Feedback.Popup",{templateParams:{userParams:{referrer:n}}})},onClose:function(){var e=this._opts.redirectUrl;e=u(e),this._super(),e?window.location=e:this._isHistoryTransition?this._isHistoryTransition=!1:window.history.back()}},{},"UrlReplace")},56243:function(e,t,i){var n,s,o,r,a,l,c=i(68911);window.jQuery||window.$,window,s=(n=window.ru.mail.cpf).Basic.getView,o=n.Tools.getTemplate,r=n.Tools.PubSub,a={cssSels:{Main:{tooltipTarget:".js-guide__target"}},priority:null,type:null,templates:{tooltip:o("ct-tip.xml")},onShow:null,onHide:null,onClickOK:null,onClickBlock:null},s(((l={})[c.GUIDE_CALL]=function(e){e.data.priority===this._opts.priority&&(this._elems.parent.is(":visible")?setTimeout((function(){r.publish(c.GUIDE_CALL_OK,{priority:this._opts.priority}),this._show()}).bind(this),80):r.publish(c.GUIDE_CALL_FAIL,{priority:this._opts.priority}))},l[c.GUIDE_CANCEL]=function(){this._hide()},{_Init:function(){null!=this._opts.priority&&null!=this._opts.type&&(this._elems.tooltipTarget=this._elems.tooltipTarget||this._elems.parent,this._state={checkTimeout:null},r.subscribe(c.GUIDE_CALL,l[c.GUIDE_CALL].bind(this)),r.subscribe(c.GUIDE_CANCEL,l[c.GUIDE_CANCEL].bind(this)),r.publish(c.GUIDE_REGISTER_VIEW,{priority:this._opts.priority}))},_show:function(){r.publish(c.GUIDE_TOOLTIP_SHOW,{type:this._opts.type,element:this._elems.tooltipTarget}),"function"==typeof this._opts.onShow&&this._opts.onShow.call(this),clearInterval(this._state.checkTimeout),this._state.checkTimeout=setInterval((function(){this._elems.parent.is(":visible")||(clearInterval(this._state.checkTimeout),r.publish("GUIDE_CALL_FAIL",{priority:this._opts.priority}))}).bind(this),1e3)},_hide:function(){clearInterval(this._state.checkTimeout),r.publish(c.GUIDE_TOOLTIP_HIDE),"function"==typeof this._opts.onHide&&this._opts.onHide.call(this)}}),a,null,"Guide")},23806:function(e,t,i){var n,s,o,r,a,l,c,u,h=i(68911);window.jQuery||window.$,n=window,s=window.ru.mail.cpf,o="ru.mail.guide",r=s.Basic.getModel,a=n.localStorfunction(){return null!=a.getItem(o+".block")},{_Handlers:{pusterInstance(e.data.priority)},c[h.GUIDE_NEXT]=function(){this.next(!0)},c[h.GUIDE_BLOCK]=function(){this.block()},c[h.GUIDE_CALL_OK]=function(e){this._state.currentPriority=e.datata.priority)},c)},_getUsedPriorities:function(){return null!=a.getItem(o)?JSON.parse(a.getItem(o)||"[]"):[]},_checkIfPriorityUsed:function(e){return this._state.usedPriorities.indexOf(e)>-1},_getNextPriority:function(e){var t=this._state.instances;if(!t.length)return null;for(var i=0,n=t.length;i<n;++i)if(!this._checkIfPriorityUsed(t[i])&&(null==e||t[i]>e))return t[i];return null},_addPriorityToUsed:function(e){var t=this._state.usedPriorities;null!=e&&-1===t.indexOf(e)&&(t.push(e),t=t.sort(),a.setItem(o,JSON.stringify(t)))},_Init:function(){var e=this;u()||(this._state={instances:[],usedPriorities:this._getUsedPriorities(),currentPriority:null,pristine:!0,finished:!0},setTimeout(function(){return e.next(!1)},this._opts.autorun||0))},registerInstance:function(e){if(!(u()||this._checkIfPriorityUsed(e))){var t=this._state,i=t.instances;-1===i.indexOf(e)&&(i.push(e),i=i.sort()),!t.pristine&&t.finished&&this.go(e),e;if(i.pristine=!1,l.publish(h.GUIDE_CANCEL),t&&this._addPriorityToUsed(this._state.currentPriority),null==e){i.finished=!0;return}setTimeout(function(){l.publish(h.GUIDE_CALL,{priority:e})},10)},next:function(e,t){e&&this._addPriorityToUsed(this._state.currentPriority);var i=this._getNextPriority(t);this.go(i,e)},block:function(){a.setItem(o+".block",1),l.publish(h.GUIDE_CANCEL)}}),{autorun:100},null,"GuideModel")},21938:function(e,t,i){var n,s,o,r,a,l,c,u=i(68911);window.jQuery||window.$,window,s=(n=window.ru.mail.cpf).Basic.getView,o=n.Tools.getTemplate,r=n.Tools.initModule,a=n.Tools.PubSub,l={cssSels:{btnOk:".js-tooltip__ok",btnBlock:".js-tooltip__block"},templates:{tooltipContent:o("ct-tip.xml")},appendTo:document.body},s(((c={})[u.GUIDE_TOOLTIP_SHOW]=function(e){var t=this;Promise.resolve(this._opts.templates.tooltipContent).then(function(i){var n=t.toolt;t._getElements(t._opts.cssSels,t._elems.parent),n.position(o),n.setZIndex(o.closest(".popup").length?2e4:null),nthis.tooltip.hide()},{_Handlers:{pubsub:c,dom:{"click:btnOk":function(e){e.preventDefault(),a.publish(u.GUIDE_NEXT)},"click:btnBlock":function(e){e.preventDefault(),a.publish(u.GUIDE_BLOCK)}}},_Init:function(){this.tooltip=r("TooltipHint",this._elems.parent,{position:["bottom","center"],interactive:!0,hide:!1,zIndex:400,tipAlign:"center"})}}),l,null,"GuideTooltip")},68911:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GUIDE_TOOLTIP_SHOW=t.GUIDE_TOOLTIP_HIDE=t.GUIDE_REGISTER_VIEW=t.GUIDE_NEXT=t.GUIDE_CANCEL=t.GUIDE_CALL_OK=t.GUIDE_CALL_FAIL=t.GUIDE_CALL=t.GUIDE_BLOCK=void 0,t.GUIDE_REGISTER_VIEW="GUIDE_REGISTER_VIEW",t.GUIDE_NEXT="GUIDE_NEXT",t.GUIDE_CALL="GUIDE_CALL",t.GUIDE_CALL_OK="GUIDE_CALL_OK",t.GUIDE_CALL_FAIL="GUIDE_CALL_FAIL",t.GUIDE_CANCEL="GUIDE_CANCEL",t.GUIDE_BLOCK="GUIDE_BLOCK",t.GUIDE_TOOLTIP_SHOW="GUIDE_TOOLTIP_SHOW",t.GUIDE_TOOLTIP_HIDE="GUIDE_TOOLTIP_HIDE"},22118:function(){var e,t,i,n,s,o,r,a,l,c,u,h,p,d,f,_,m,g,v,y;e=window.jQuery||window.$,t=window,i=window.ru.mail.cpf,n="MylistBoxView",o=(s=i.Basic).Extend,r=s.getByPath,a=i.Tools.PubSub,l=i.Tools.getTemplate,c=s.Constructors.getView,u=s.moduleOpts.setParams,h={cssSels:{Main:{scrollParent:".js-mylist-box__scroll",container:".js-scrollable__view"},item:".js-mylist-box__item",remove:".js-mylist-box__remove",undo:".js-mylist-box__undo"},cssClss:{empty:"p-mylist-box_empty",deletedItem:"p-mylist-box__item_delete"},templates:{items:l("ct-mylist-box-items.xml")},attrs:{itemId:"data-id"},processDataItems:null,undoTimeout:5e3,maxListHeight:250,scrollLimit:300,nextPageUrlPath:"data.pager.next.url"},(p={})[n]=c((d=function(t){return new Promise((function(i){var n=this._elems.Parent,s=this._elems.container,o=this._opts,r=o.cssClss.empty,a=this._state.cachedData;Promise.resolve(o.templates.items).then((function(l){var c=e(l(a)),u=!!c.length;if(this._preventReplace){i("change");return}u?n.hasClass(r)?(this.clear(),this.add(c),this.show().then(i.bind(null,"new"))):t?(s.append(c),i("change")):(s.one(function(){s.empty(),s.animateEnter().active(function(){s.append(c),s.css("height",Math.min(o.maxListHeight,s.children().outerHeight()))}).done(functiide().then(i.bind(null,"delete"))}).bind(this))}).bind(this)).then((function(e){f(this._elems.container),a.publish("mylist",e)}).bind(this))},f=function(e){e.trigger("documentHeightChange")},_=function(e,t){return this._Model.saveFavorite({id:e,type:"program",favorite:!0===t})},m=function(e){e.scrollMaxY-e.scrollY<this._opts.scrollLimit&&g.call(this)},g=function(){var e=this._state;!e.loadingPage&&e.nextPageUrl&&(e.loadingPage=!0,this._Model.fetchFavorite({url:e.nextPageUrl}))},v=function(e,t){var i=this._state;t&&(i.loadingPage=!1),i.cachedData=e.data,i.nextPageUrl=r(this._opts.nextPageUrlPath,e),d.call(this,t)},{_Handlers:{init:"onInit",dom:{"click:remove":"onRemove","click:item":"onEventClick"},pubsub:{"mylist.data":"onMylistData","mylist.data.page":"onMyListDataPage","event.start":"onEventStarts"}},_Init:function(e){this._state=o(!0,{cachedData:null},e),this._scroll=i.Tools.initModule("CustomScroll",this._elems.scrollParent),this._scroll.on("scroll",m.bind(this))},onInit:function(){},onEventClick:function(t){var i=this._opts,n=e(t.currentTarget||t.target),s=n.attr(i.attrs.itemId);s&&!n.hasClass(i.cssClss.deletedItem)&&(t.preventDefault(),a.publish("event.id",s))},onRemove:(y=function(e){this._preventReplace=!1,e&&e.length&&f(e)},function(i){var n=this;i.preventDefault(),i.stopPropagation();var s=this._opts,o=e(i.currentTarget||i.target).closest(s.cssSels.item),r=o.attr("data-id"),a=y.bis);if(r){this._preventReplace=!0,o.addClass(s.cssClss.deletedItem);var u=new Promise(function(e,t){setTimeout(e,s.undoTimeout),o.on("click",s.cssSels.undo,function(e){e.preventDefault(),t()})});l(r,!1).then(function(){return u}).then(funct(),t=0===n._elems.parent.find(s.cssSels.item).length;o.off("click"),t?unction(){return o.off("click"),l(r,!0).then(function(){t.setTimeout(function(){a(),c()},0)})})}}),onMylistData:function(e){v.call(this,e,!1)},onMyListDataPage:function(e){v.call(this,e,!0)},show:function(){return neelems.parent;t.css("height",0),t.removeClass(this._opts.cssClss.empty),t.animateEnter().active(function(){t.css("height",t.children().outerHeight())}).done(function(){t.css("height",""),e()})}).bind(this))},hide:function(){return new Promise((function(e){var t=this._elems.parent,i=this._op().on(){t.css("height",0)}).done(function(){t.addClass(i),t.css("height",""),e()})}).bind(this))},clear:function(){this._elems.container.empty()},add:function(e){this._elems.container.append(e)}}),h,null,n),o(!0,i,{Modules:p}),u(n,{acceptTypes:["Schedule"]})},93743:function(){!function(e,t,i){"use strict";i.Basic.Constructors.getView({_Handlers:{init:function(){var e=this;this._Elems.checkbox.each(function(){e.onCheckboxChange({currentTarget:this})})},"dom:change:Main.checkbox":"onCheckboxChange"},onCheckboxChange:function(t){var i=t.currentTarget,n=e(t.currentTarget),s=n.closest(this._Opts.cssSels.checkbox.parent),o=this._Opts.cssClss.hidden,r=this._Opts.cssClss.checkbox.active;n.val(i.checked?1:0),s.toggleClass(r,i.checked),"is_phone_notify"===i.name&&this._Elems.phoneWrapper.toggleClass(o,!i.checked);var a=this._Elems.checkbox.get().some(function(e){return e.checked});this._Elems.segmentWrapper.toggleClass(o,!a)}},{cssSels:{Main:{form:"form",checkbox:"input[type=checkbox]",phoneWrapper:".js-notification__phone",segmentWrapper:".js-notification__segment"},checkbox:{parent:".checkbox"}},cssClss:{checkbox:{active:"checkbox_active"},hidden:"hidden"}},null,"NotificationView")}(window.jQuery||window.$||window.$f,window,window.ru.mail.cpf)},55439:function(){!function(e,t,i){"use stric,o=i.Modules.DataRouter(),r=i.Tools.getTemplate,a=r("ct-popup-setup.xml");i.Basic.moduleOpts.set("AsyncForms.Notification",null,{Templates:{form:r(function(e){return a(e.server.user_config)},a.ensureLoad)},_Handlers:{formSent:function(){this._Elems.Parent.removeClass(this._Opts.cssClss.sentSuccess),this.Hide()},show:function(){s.publish("popup","show")},hide:function(){this._Popup=null,this._Elems.Form=null,s.publish("popup","hide")},init:function(){location.hash===n&&this.Show()}},serverApi:{send:{url:"/ajax/config/set/",prepare:function(e){return e.is_phone_notify||(e.phone_notify=""),e.dataRouterOpts=e.daRouterOpts.method="POST",e.dataRouterOpts.secure=!0,e}},initial:{url:"/ajax/config/"}},transport:function(e){return new Promise(function(e,t){i.Tools.Auth.onGetStatus(function(i){i?e():t()})}).then(function(){var t=e.data||{},i={addParams:t.dataRouterOpts||{}};return delete t.dataRouterOpts,o.getData(e.url,t,i,!0)}).then(function(e){return i.Basic.typeOf(e,"object")&&"no auth"===e.status?Promise.reject():e})},onTransportFail:function(e){"initialData"===e&&(this._Popup._overlay.hide(),this._Popup.destroy(),this._Popup=null,t.setTimeout(function(){i.Tools.jQuery.showLoginPopup({returnPage:"/"+n,Descr:"Авторизуйтесь, чтобы настраивать уведомления"})}))},templateParams:{userParams:{}},clearOnShow:!1,closeTimeout:5,popupOpts:{cssClss:{ppShwn:"popup-shown",bannerShown:"overlay_banner",ppMdfr:"overlay_event-popup overlay_dark overlay_banner overlay_setting"},onShow:function(){setTimeout((function(){i.Tools.initModule("Banner.EventPopupView",this._overlay._elems.parent)}).bind(this),100)},onHide:function(){var e=this._overlay._elems.parent,t=e.data("Banner");t&&t.hide(),e.data("Banner",null)}}})}(window.jQuery||window.$||window.$f,window,window.ru.mail.cpf)},60613:function(){var e,t,i,n;e=window.jQuery||window.$,t=window,(i=window.ru.mail.cpf.Basic.moduleOpts.setParams)("Banner",{options:{showOnInit:!0,minReloadDelay:1500,bannerParams:{id:"1300828"},continuousMode:!1,bannerModuleName:"SlotView.mimic.1300828"}}),i("Banner.Page",{options:{cssSels:{Main:{container:".js-slot__content"}},bannerModuleName:"SlotView.mimic.1300828.page"}}),i("Banner.EventPopupView",{options:{bannerModuleName:"SlotView.mimic.1300841.eventPopup",bannerParams:{id:"1300841"},cssClss:{loading:"overlay_banner-active",show:"overlay_banner-active"},hasPlaceForBanner:function(){return(n=n||e(t)).width()>=1210}}}),i("Banner.PopupGalleryView.Autostart",{options:{hasPlaceForBanner:function(){return!0}}})},26556:function(){var e=window.ru.mail.cpf.Basic,t=e.getByPath,i=e.moduleOpts.setParams;e.Constructors._repo.get("Gallery"),i("Gallery",{options:{_plugins:["Ajax"],imageProps:["original","download","share_url","description","title","source","galleryId","currentIdx"],preloadDepth:2,urlSplash:"/ajax/gallery/sublist/",urlGallery:"/ajax/gallery/get/",urlParams:{galleryId:"gallery"},pnction(e){var t=e.imagesData.images,i=this._openedWithSplash;t&&(e.images=t),i&&(e.openedWithSplash=i)},prepareSplashData:function(e){return 6>(t("data.items.length",e)||0)?null:e},getUrlParams:function(e){return e?{gallery:e}:{}}}}),i("Gallery.NoSplash",{options:{_plugins:null,urlSplash:null}}),i("Gallery.ShotPage",{options:{_plugins:null,urlSplash:null}})},85528:function(){(0,window.ru.mail.cpf.Basic.moduleOpts.setParams)("PopupGalleryView.EventPopup",{options:{urlReplace:{canReplace:!1},_Handlers:{hide:function(){var e=this._popup.getOverlay();document.querySelector("html").classList.add(e._opts.cssClss.htmlModifier)}}}})},87408:function(){var e;window.jQuery||window.$||window.$f,window,(e=window.ru.mail.cpf.Basic.moduleOpts.setParams)("Guide.Program",{options:{onShow:function(){this._elems.pems.parent.removeClass("p-programms__item_hover")}}}),e("Guide.Channel",{options:{onShow:function(){this._elems.parent.addClass("p-channels__item_hover")},onHide:function(){this._elems.parent.removeClass("p-channels__item_hover")}}}),e("Guide.Watchlist",{options:{priority:2,type:"sms"}})},32895:function(){var e=window.ru.mail.cpf,t=e.Basic,i=t.moduleOpts.setParams,n=t.typeOf,s=e.Modules.DataRouter;i("RatingView",{options:{requestMethod:"POST",transport:function(e){return n(e.addParams,"object")||(e.addParams={}),e.addParams.secure=!0,e.addParams.credentials="include",s().getData(e.url,e.data,e)},cssClss:{curScore:"p-rating__item_rated voter__stars__item__cur",status:{success:"p-rates-rated voter__rated",fail:null,already_voted:null}}},paramAttrs:{rateUrl:"data-rateurl"}})},91046:function(){var e;window,(e=window.ru.mail.cpf.Basic.moduleOpts.setParams)("TabsView",{options:{cssClss:{curTab:"tab__content_active"}}}),e("TabsView.ChannelList",{options:{cssClss:{}}}),e("TabsView.Player",{options:{cssClss:{}}})},87237:function(e,t,i){var n,s,o,r,a,l,c=i(3314);n=window,s=window.ru.mail.cpf,o=n.ru.mail.tv.counters.event,r=n.fest._helpers.getCounter,(a=s.Basic.moduleOpts.setParams)("Toggle",{options:{_plugins:null,cssClss:{hidden:"hidden",active:"button_active"}}}),a("Toggle.EventPopup",(l=!0,{options:{cssClss:{hidden:"hidden-visibility"},cssSels:{sliderSelector:".js-slider-selector"},_Handlers:{toggle:function(){var e=this._elems.button,t=this._opts.cssClss;e.toggleClass(t.active,this._state.shown),l&&(l=!1,(0,c.hitCounter)(r(o,"button_show_gallery","show"),"sb"))}}}}))},4136:function(){var e,t,i,n,s,o,r,a,l,c,u,h,p,d,f,_,m,g,v,y,w,b,T,C,S,E,P,I,O;e=window.jQuery||window.$||window.$f,t=window,i=window.ru.mail.cpf,n=window.Sortable,s="ChannelListView",r=(o=i.Basic).getView,a=o.moduleOpts.setParams,c=(l=i.Tools).getTemplate,u=l.initModules,h=i.Modules.DataRouter(),p={cssSels:{Main:{},PopupContent:{favoriteList:".js-channel-list__favorite-list",favoriteItems:".js-channel-list__favorite-item",favoriteCount:".js-channel-list__favorite-count",channelTypeScroll:".js-channel-list__channel-type",channelList:".js-channel-list__channel-list",channelListGroup:".js-channel-list__group",channelListScroll:".js-channel-list__channel-list_scroll",favoritesScroll:".js-channel-list__channel-favorites_scroll",channelTypeItem:".js-channel-list__type",removeChannel:".js-channel-list__remove",filterNameInput:".js-channel-list__filter-input",filterNameClear:".js-channel-list__filter-clear",tabs:".js-channel-list__tabs",tabsBtnFav:".js-channel-list__tabs-btn_fav"},Popup:{PopupContent:".js-channel-list__content",submit:'button[type="submit"]',filterForm:".js-channel-list__form"},channelItems:".js-channel-list__channel-item",removeChannel:".js-channel-list__remove",channelTypeItem:".js-channel-list__type",filterNameInput:".js-channel-list__filter-input",filterNameClear:".js-channel-list__filter-clear",channelListGroupHdr:".hdr",setup:".js-channels__setup"},cssClss:{favoriteListDragging:"popup_favorite__selected",channelDragging:"p-channels__item_active",favoriteToggle:"p-channels__item_all_selected",channelTypeActive:"popup_favorite_linkactive",hiddenAll:"hidden_all"},serverAPI:{initial:{url:"/ajax/favorites/tune/"}},templates:{channels:c("ct-channels-tune.xml"),notification:c("ct-notification-save-result.xml"),popup:c("ct-popup-favorite.xml")},notificationRemoveDelay:3e3},r((d=function(e){this._getElements(this._Opts.cssSels.PopupContent,e),this._favoritesScroll=this._Elems.favoritesScroll.data("_customScroll"),this._sortable=g.call(this),this._favoritesScroll.Resize()},f=function(){Object.keys(this._Opts.cssSels.PopupContent).forEach((function(e){e in this._Elems&&(this._Elems[e]&&this._Elems[e].off(),delete this._Elems[e])}).bind(this)),this._sortable&&this._sortable.destroy(),this._sortable=null,this._channelListScroll=null,this._favoritesScroll=null,this._tabsModel=null,this._tabsView=null},_=function(t,i){return e(t(i||{}))},m=function(t){t=(t||"").toLowerCase();var i=this._Opts.cssClss.hiddenAll,n=this._Elems.channelTypeItem,s=this._channelListScroll,o=this._Opts.cssSels.channelItems;this._Elems.channelListGroup.toArray().forEach(function(r){var a=!e(r).find(o).toArray().reduce(function(e,n){var s=-1!==(n.getAttribute("data-name").toString().toLowerCase()||"").indexOf(t);return(n.classList[s?"remove":"add"](i),s)?e.concat(n):e},[]).length,l=r.getAttribute("data-id");r.classList[a?"add":"remove"](i),n.filt){var e=this._Elems.favoriteList,t=this._Opts.cssClss,i=this._favoritesScroll;return n.create(e.get(0),{animation:100,ghostClass:t.channelDragging,scroll:!0,onStart:function(){e.addClass(t.favoriteListDragging),i.toggleScroll(!1)},onEnd:(function(){e.removeClass(t.favoriteListDragging),i.toggleScroll(!0),i.Resize(),this._saveOrder()}).bind(this)})},v=function(){var t=this._Elems.channelList.scrollTop(),i=this._channelListScroll._Sizes[1].innerSize,n=this._Opts.cssClss.channelTypeActive,s=this._Opts.cssSels.channelListGroupHdr,o=this._Elems.channelListGroup.toArray().reduce(function(n,o){var r=e(o),a=r.height(),l=r.position(),c=r.find(s).height();return l.top+c<i&&t+c<l.top+t+a?n.concat(o.getAttribute("data-id")):n},[]);this._Elems.channelTypeItem.removeClass(n).toArray().forEach(function(e){var t=e.getAttribute("dassList.add(n)})},y=function(e){return(this._state.channelList||[]).filter(function(t){retur){return(this._state.favorites||[]).filter(function(t){return t.id===e})[0]},b=function(e){t.console.error(e)},T=function(e){var t=w.call(this,e);if(t)this._state.favorites=this._state.favorites.filter(function(t){return t.id!==e});else{var i=y.call(this,e);this._state.favorites=this._state.favorites.concat(i)}return Promise.resolve(this._Opts.templates.channels).then((function(e){var t=this._elems,i=t.favoriteCount,n=t.favoriteList,s=t.tabsBtnFav,o=this._state.favorites;i.text(o.length);var r=_(e,{type:"favorites",channels:o});this._sortable&&(e),s.toggleClass(this._Opts.cssClss.hiddenAll,!o.length),n.html(r.html()),this._sortable=g.call(this),this._favoritesScroll.Resize(),this._channelTypeScroll.Resize()}).bind(this)),!t},C=function(e){return e.id=parseInt(e.id,10),e},S=function(e,t){var i=-1;return(e||[]).some(function(e,n){return e.id==t&&(i=n),-1!==i}),i},E=function(e,t){var i=e.map(C);return t&&return -1!==n&&e.push(i[n]),e},[])),i},P=function(e){var t=e.data,i=void 0===t?[]:t,n=e.selected;return{channelTypeList:i.map(function(e){return e.type}).map(C),channelList:i.reduce(function(e,t){return e.concat(t.channel.map(C))},[]),favorites:E(n,this._state.favoritesOrder),channelGroups:i}},I=function(e){Promise.resolve(this._Opts.templates.channels).then((function(t){this._state=P.call(this,e);var i=_(t,this._state);f.call(thi(i),u(i),setTimeout(drn h.getData(this._Opts.serverAPI.initial.url,{},{},!0).then(I.bind(this),b)},{_Handlers:{"set:Popup":{"submit:Popup.filterForm":function(e){e.preventDefault()},"click:Popup.submit":function(){this._saveOrder(),this._popup.Hide()}},"set:PopupContent":{"click:channelItems":function(e){e.preventDefault();var t=e.currentTarget,i=t.getAttribute("data-id"),n=T.call(this,i);t.classList[n?"add":"remove"](this._Opts.cssClss.favoriteTog,this._Elems.filterNameInput.val(""),this._Elems.filterNameClear.addClass(this._Opts.cssClss.hiddenAll),m.call(this),setTimeout(v.bind(this),0)},"keydown:filterNameInput":function(e){if(13===e.keyCode)return e.preventDefault(),!1},"keyup:filterNameInput":function(){var e=this._Elems.filterNameInput.val();this._Elems.filterNameClear.toggleClass(this._Opts.cssClss.hiddenAll,!e.length),m.call(this,e),0===this._tabsModel.currentTab()&&this._tabsModel.currentTab(1),setTimeout(v.bind(this),0)},"click:channelTypeItem":function(e){var t=this;e.preventDefault();var i=e.currentTarget.getAttribute("data-id"),n=this._Elems.channelListScroll.find('[data-id="'+i+'"]');setTimeout(function(){var e=n.get(0).offsetTop;t._channelListScroll.setScrollsPos(e-20,!0),setTimeout(v.bind(t),0)},0)},"click:removeCheventDefault();var n=e(t.currentTarget).closest(this._opts.cssSels.PopupContent.favoriteItems).attr("data-id");n&&this._Model.saveFavorite({id:n,type:"channel",favorite:!1,updateSchedule:!0}).then(function(){O.call(i),i._notify()},b)}},dom:{"click:setup":function(e){var t=this;e.preventDefault(),Promise.resolve(this._Opts.templates.popup).then(function(e){if(!t._popup){var n=_(e);t._Elems.Popup=n,t._popup=n.Popup().data("_popupObj"),u(n),t._getElements(t._Opts.cssSels.Popup,n),t._bindHandlerSet("Popup"),t._bindHandlerSet("PopupContent")}t._popup.Show({onShow:function(){i.Tools.initModule("Banner.EventPopupView",this._overlay._elems.parent)},onHide:function(){var e=this._overlay._elems.panner",noad(!0,O.call(t))})}}},getFavoritesOrder:function(){return this._Elems.favoriteList.find(this._Opts.cssSels.PopupContent.favoriteItems).toArray().map(function(e){return e.getAttribute("data-id")})},_Init:function(e){this._state=e},_saveOrder:function(){var e=this,t=this.getFavoritesOrder();this._state.favoritesOrder=t,this._Model.setFavorite({ids:t,type:"channel",updateSchedule:!0}).then(function(){return e._notify()},b)},_notify:function(){var e=this._opts,t=e.templates,i=e.notificationRemoveDelay;Promise.resolve(t.notification).then(function(e){var t=_(e).get(0),n=document.body;n.appendChild(t),setTimeout(function(){return n.removeChild(t)},i)})}}),p,null,s),a(s,{acceptTypes:["Schedule"]})},55266:function(){var e,t,i,n;e=window.jQuery||window.$,i=(t=window.ru.mail.cpf).Tools.PubSub,n={cssSels:{Main:{period:".js-period-select",select:".js-date__item"},items:".js-group_date",active:".filter__item_active",periodPlaceholder:".js-placeholder-date"},cssClss:{active:"filter__item_active",hidden:"hidden_all",more:"js-more__item"ools.getTemplate("ct-date-idx.xml")},t.Basic.Constructors.addPlugin(t.Modules.CustomGroup,{_Handlers:{click:"_onDateSelect",pubsub:{"schedule.date.updateControl":"_onUpdateControl",periodListDraw:function(){this._trigger("ready")}},model:{formData:"_onFormData"}},_Init:function(){var e,t=this._Opts.value,i=this._Elems.select.val();this._pubsubChangeMsg="schedule."+this._Opts.name,this._initControl(t),t!==i&&(e=this._getItems(i),this._onDateSelect(e.active.eq(0)))},_initControl:function(e){i.publish("schedule.initControl",{SelectedDate();var t=this._Elems.Parent.find(this._Opts.cssSels.items),i=t.filter("[data-value="+e+"]");return{active:i,inactive:t.not(i)}},_highlightActive:function(){var e=this._getItems();this.toggleActive(e.active,e.inactive)},_onDateSelect:function(e){var t=e.attr("data-value");this._model.getSelectedDate()!==t&&(this._highlightActive(),this._Elems.select.val(t),this._trigger("change")),i.publish(this._pubsubChangeMsg,t)},_onFormData:function(i)te).then(function(s){var o=n._elems,r=o.parent,a=e(s(i));r.empty().append(a),o.period=r.find(n._opts.cssSels.Main.period),n._highlightActive(),t.Tools.initModules(a)})},_onUpdateControl:function(e){this._initControl(e.data.value)}},n,"Date"),t.Basic.moduleOpts.setParams("CustomGroup.Date",{acceptTypes:"Schedule"})},86078:function(){!function(e,t){"use strict";t.Basic.Constructors.addPlugin(t.Modules.CustomGroup,{_Handlers:{change:function(){this._preventPeriodShow=!0},ready:function(){this._preventPeriodShow=!1},dom:{"mouseover:items":"onMouseover","mouseout:items":"onMouseout"}},onMouseover:function(t){if(!this._preventPeriodShow){var i=this._Opts.cssClss,n=e(t.currentTarget);n.hasClass(i.active)&&!n.hasClass(i.rest)&&(!this._select||this._tm)&&(window.clearTimeout(this._tm),this._tm=null,this._select=this._Elems.period.data("CustomSelect"),this._select._Dropdown.Show())}},onMouseout:function(t){var i=this._Opts.cssClss,n=e(t.currentTarget);this._select&&n.hasClass(i.active)&&!n.hasClass(i.rest)&&(window.clearTimeout(this._tm),this._tm=window.setTimeout((function(){this._select._Dropdown.Hide(),this._select=this._tm=null}).bind(this),300))}},{},"PeriodOnFocus")}(window.jQuery||window.$,window.ru.mail.cpf)},75631:function(){!function(e,t,i){"use strict";var n=i.Tools.PubSub;i.Basic.moduleOpts.set("CustomGroup.ViewType",{cssSels:{Main:{items:".js-button"}},cssClss:{active:"button_active"},_Handlers:{click:function(e){var t=e.attr("data-type");this._type!==t&&(this._type=t,this.toggleActive(e,this._Elems.items.not(e)),n.publish("schedule.appearance",t),n.publish("ScheduleForm.Counters",{counters:e.attr("data-counter")}),n.publish("resize"))},init:function(){var e=this._Elems.items.filter("."+this._Opts.cssClss.active);e.length&&(this._type=e.attr("data-type"),n.publish("schedule.initControl",{name:"appearance",value:this._type}))}},lsKey:"schedule.viewf,window,window.ru.mail.cpf)},19738:function(){var e,t,i,n;window,tmoduleOpts,n=e.Basic.Extend,i.set("CustomSelect.Schedule",{_Handlers:{init:function(){this.nction(e){this._Opts._onChange.call(this,e)},select:function(e){this._Opts._onChange.call(this,e)}},"pubsub:tip":function(e){"show"===e.data.state&&this.toggleDropdown(!1)}},onUpdateControl:function(e){this._updateControl(e.data)},_initControl:function(){t.publish("schedule.initControl",{name:this._name,value:this._Opts.data.value})},_onInit:function(){var e=this._Opts.counters.type;this._name=this._Elems.Select.attr("name"),this._msg="schedule."+this._name,this._initControl=this._Opts._initControl,this._updateControl=this._Opts._updateControl,this._initControl(),t.subscribe(this._msg+".updateControl",this._Opts.onUpdateControl.bind(this));var i=this._Opts.counters&&this._Opts.counters.click;i&&this._Dropdown.on("toggle",function(n){n&&t.publish("ScheduleForm.Counters",{type:e,counters:i})})},_onChange:function(e){this._msg&&!this._preventChange&&(t.publish(this._msg,e.value),this._Opts.counters&&t.publish("ScheduleForm.Counters",{type:this._Opts.counters.type,counters:this._Opts._getCountersByValue.call(this,e.value)}))},_getCountersByValue:function(e){var t=this._Opts.counters.value;return t&&t[e]},_updateControl:function(e){this._preventChange=!0,this._Opts.data=e,this.setOptions(e.values),this.setValue(e.value),this._Elems.optionsCont.empty(),delete this._preventChange,this._initControl()}}),i.set("CustomSelect.Schedule.Period",{cssClss:{activeView:"tooltip_shown"},_Handlers:{init:function(){this._Opts._onInit.call(this);var e=this.getValue();e&&e!==this._Opts.data.value&&(this._Opts.datraw:function(){t.publish("periodListDraw")}}}),i.set("CustomSelect.Schedule.ChannelType",{onUpdateControl:function(e){var t=this._Opts.filterItems||[],i=n({},e.data);i.values=i.values.filter(function(e){return!~t.indexOf(e.value)}),this._updateControl(i)}})},3118:function(){!function(e,t,i){"use strict";var n=i.Tools.PubSub;i.Basic.Constructors.getView({_Handlers:{"dom:click:programLink":"onEvent","dom:click:thumb":"onEvent"},onEvent:function(t){var i=e(t.currentTarget||t.target).attr("data-id");i&&(t.preventDefault(),n.publish("event.id",i))}},{cssSels:{programLink:".p-recommended__item-link",thumb:".p-recommended__item__img"}},null,"RecommendedView")}(window.jQuery||window.$||window.$f,window,window.ru.||window.$||window.$f,window,(e=window.ru.mail.cpf).Basic.Constructors.addPlugin(e.Modules.Schedule,{fetchSchedule:function(e,t){var i=e.date;i===this._today&&(e=Object.keys(e).reduce(function(t,i){return"date"!==i&&(t[i]=e[i]),t},{}),i!==this._selectedDate&&(e.period="now")),this._super(e,t)}},{},"Schedule.Today"),e.Basic.moduleOpts.setParams("schedule.Today",{})},31775:function(){var e,t,i,n,s,o;e=window.jQuery||window.$,i=(t=window.ru.mail.cpf).Tools.PubSub,n=t.Tools.Layout,s=t.Basic.Extend,o=e("body"),t.Basic.Constructors.getView({_Handlers:{pubsub:{"stickyPanel.offset":"onStickyPanelOffset"},model:{formData:"onFormData",schedule:"onSchedule",favorite:"onFavoriteChannel"},"dom:click:nextPage":"onNextPage"},_Init:function(){this._filters={},this._subsc={},this._offsetTop=0,this._fetchSchedule=t.Basic.debounce(this._fetchSchedule.bind(this),300),i.subscribe("schedule.initControl",this.onInitControl.bind(this),{async:!1,memory:!0})},onStickyPanelOffset:function(e){this._offsetTop=Math.max(e.data.offset,this._offsetTop)},onInitControl:function(e){var t=e.data.name;this._filters[t]=e.data.value,this._subsc[t]||(this._subsc[t]=i.subscribe("schedule."+t,this.onChangeControl.bind(this,t),{memory:!0}))},onChangeControl:function(e,t,n){var s=t.data;(this._filters[e]!==s||n)&&(this._filters[e]=s,this._fetchSchedule()),i.publish("reload.springs",{type:"page"})},onFavoriteChannel:function(e){"chatchSchedule(),i.publish("reload.springs",{type:"page"}))},onNextPage:function(t){t.preventDefault();var i=e(t.currentTarget),n=this._elems.parent.find(this._opts.cssSels.channel).map(function(e,t){return t.getAttribute("data-id")}).get();i.addClass("buttn(){i.remove(),e(".js-track_visibility").initScrollCounter("data-counter",!0)}),this._model.fetchPage(s({ex:n},this._filters))},_fetchSchedule:function(){this._scrollTop().then((function(){this._Model.fetchSchedule(this._filters)}).bind(this))},_scrollTop:function(){return new Promise((function(e){n.getScroll().top>this._Elems.Parent.outerHeight()?o.animateScroll({duration:200,scrollTop:this._offsetTop}).done(e):e()}).bind(this))},onFormData:function(e){e&&Object.keys(e).forEach(function(t){i.publish("schedule."+t+".updateControl",e[t])})}},{cssSels:{channel:".p-channels__item",nextPage:".js-next-page"}},null,"ScheduleForm"),t.Basic.moduleOpts.setParams("ScheduleForm",{acceptTypes:["Schedule"]})},76132:function(e,t,i){var n,s,o,r,a,l,c,u,h=i(75127);n=window.jQuery||window.$||window.$f,s=window,a=(r=(o=window.ru.mail.cpf).Tools).initModules,l=r.PubSub,c=r.triggerResize,u={cssSels:{Main:{container:".js-schedule__channels"},favorite:{channel:".p-channels__item_favorite",button:".p-channels__item__info__favorite",program:".p-programms__item__favorite"},channel:".p-channels__item",programs:".p-programms",programsItems:".p-programms__items",program:".p-programms__item",programThumb:".p-programms__item__img",programName:".p-programms__item__inner, .js-schedule__program-item",nestedLink:".js-schedule__nested-link"},cssClss:{loading:"loading",channel:{loading:"p-channels__item_loading",favorite:"p-channels__item_favorite"},program:{loading:"p-programms__item_loading",favorite:"p-programms__item_favorite"},viewTypeList:"p-channels_list"},Template:{schedule:r.getTemplate("ct-channels_list.xml"),favTip:r.getTemplate("ct-tooltip-favorite.xml")}},o.Modules.ScheduleView=o.Basic.Constructors.getView({_Handlers:{model:{loading:"onScheduleLoading",schedule:"onScheduleData","schedule.page":"onSchedulePage",favorite:"onFavoriteSaved",event:"onEventData"},dom:{"click:favote.program":"onFavoriteProgram","click:programThumb":"onEventClick","click:programName":"onEventClick"},pubsub:{"stickyPanel.offset":"onStickyPanelOffset",viewType:"onViewType"}},_Init:function(){this.onInit.apply(this,arguments)},onInit:function(){this._sticthis.onInitControl.bind(this),{async:!1,memory:!0}),l.subscribe("schedule.category",this.onCategoryChange.bind(this),{memory:!0,take:1})},onInitControl:function(){},onStickyPanelOffset:function(e){this._stickyHeight=e.data.height},onViewType:function(e){var t=e.data;this._Elems.Parent.toggleClass(this._Opts.cssClss.viewTypeList,"list"===t)},onScheduleLoading:function(e){this._Elems.container&&this._Elems.container.toggleClass(this._Opts.cssClss.loading,e)},onScheduleData:function(e,t){var i=this._preprocessData(e),s=late.schedule;t||s.empty(),Promise.resolve(o).then((function(e){var t=n(e(i));if(t.length){s.append(t),a(t);var o=(0,h.getDWHLogger)();o&&o.attachChildren({root:t.get(0)})}}).bind(this)).then(function(){l.publish("schedule.page")})},onSchedulePage:function(e){t0),c()},onEventClick:function(e){var t=this._opts.cssSels,i=n(e.target).closest(t.program+","+t.nestedLink).attr("data-id");i&&(e.preventDefault(),e.stopPropagation(),l.publish("event.id",i))},_preprocessData:function(e){return e},_saveFavorite:function(e,t,i,s){var o=n(e.currentTarget||e.target).closest(this._Opts.cssSels[t]),r=!o.hasClass(s),a=o.attr("data-id");if((!e.target||"A"!==e.target.tagName)&&!o.hasClass(i)){e.preventDefault(),o.addClass(i);var l=(function(){o.removeClass(i),r&&this._setFavoriteTip(o)}).bind(this);this._Model.saveFavorite({id:a,type:t,favorite:r}).then(l,l)}},onFavoriteSaved:function(e){var t=this._opts.cssClss[e.type].favorite,i=this._elems.Parent.find('[data-id="'+e.id+'"]');i.length&&i.toggleClass(t,e.favorite),e.favorite&&l.publish("favorite",{type:e.type,channel:i})},_setFavoriteTip:function(e){var t=this._opts;Promise.resolve(t.Template.favTip).then((function(i){var o="pin_favorite",r=e.find(t.cssSels.favorite.button),a=this._favTip;a||(this._favTip=n(i({pageChannel:t.pageChannel})),a=this._favTip),this._elems.parent.find(t.cssSels.channel).removeClass(o),e.addClass(o),r.after(a),s.clearTimeout(this._ftm),this._ftm=s.setTimeout((function(){this._favTip.animateLeave().done(function(){this.remove(),e.removeClass(o)})}).bind(this),3e3)}).bind(this))},onFavoriteChannel:function(e){var t=this._opts.cssClss.channel;this._saveFavorite(e,"channel",t.loading,t.favorite)},onFavoriteProgram:function(e){this._saveFavorite(e,"program",this._Opts.cssClss.program.loading,this._Opts.cssClss.program.favorite)},onCategoryChange:function(e){var t=e.data,i=t.category,o=t.isActive,r=this._elems.parent;if(r.toggleClass("p-channels_category-"+i,o),o){var a=r.find(".js-category-"+i);if(a.length){var l,c=n(s).height();if(!a.get().some(function(e){var t=e.getBoundingClientRect();return l||(l=t),t.top>this._stickyHeight&&t.bottom<c},this)){var u=s.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;u=u+l.top-c/2,n(document.body).animateScroll({scrollTop:u,duration:300})}}}}},u,null,"ScheduleView"),o.Basic.moduleOpts.setPare"]})},49078:function(){var e,t,i;e=window.jQuery||window.$||window.$f,window,(i=window.ru.mail.cpf).Tools.PubSub,i.Basic.Constructors.getView({_Handlers:{"dom:click:link":"onExpand"},_Init:function(){this.updateLayout.call(this)},onExpand:function(t){var i=e(t.currentTargls.Maiontent);t.preventDefault(),t.stopPropagation(),i.addClass(this._Opts.cssClss.hidden),n.css("max-height",n.height()),n.animateEnter().active(function(){n.css("max-height",s.height())}).done(function(){n.css("max-height","inherit")})},updateLayout:function(){var t=this._Opts.cssSels.content,i=this._Opts.cssSels.link,n=this._Opts.cssClss.hidden,s=this._Elems.descr;s&&s.each(function(){var s=e(this),o=s.find(t);s.parent().find(i).toggleClass(n,s.height()>=o.height())})}},{cssSels:{Main:{descr:".js-show-more__container"},content:".js-show-more__content",link:".js-show-more__button"},cssClss:{hidden:"hidden"}},null,"ShowMore")},41058:funcn,s,o,r,a,l,c,u,h,p,d,f,_;e=window.jQuery,t=window,i=window.ru.mail.cpf,s=t.DEBUG,o=i.Basic.Extend,r=i.Tools.PubSub,a=i.e,c=i.Tounction(){n=!0}),u=[],h="detect:mouse",p=function(e,t,i){return!!e&&!!t&&((e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],i)?e.every(function(e){return~t.indexOf(e)}):e.some(function(e){return t.some(function(t){return e===t})}))},d={cssSels:{tip:".p-tip",tipSize:".p-tip__size",tipPosition:".p-tip__position",btnOk:".p-tip__button-ok",btnCancel:".p-tip__button-cancel",Main:{channels:".p-channels__items"},favChannel:">.p-channels__item_favorite"},cssClss:{target:"p-tip__target",targetBg:"p-tip__bg"},tips:{"favorite-channel":{event:"scroll-treshold",page:"schedule",hit:1,depends:h,excludes:["popup:show","favorite:channel","favorite-button"],counters:{show:"15681939",escape:"16113019"}},"favorite-button":{event:"favorite:channel",page:"schedule",maxHit:10,depends:h,excludes:"favorite:channel",counters:{show:"15682091",escape:"16113030"}},"favorite-programm":{event:"load",page:"schedule",hit:2,depends:h,excludes:["popup:show","favorite:program"],counters:{show:"15682336",escape:"16113059"}},mylist:{event:"favorite:program",depends:h,excludes:["popup:show","favorite:program","mylist-popup"],counters:{show:"15682456",escape:"16113067"}},"mylist-popup":{event:"favorite:program",depends:["popup:show",h],excludes:["favorite:program","mylist"],counters:{show:"15683755",escape:"16113086"}},"favorite-sort":{counters:{show:"15683868",escape:"16113108"}}},isTipsActive:!1,Template:{tip:l("ct-tip.xml")}},f=i.Basic.Constructors.getView({_Handlers:{dom:{"click:tip":"onEscape","click:btnOk":"onClose","click:btnCancel":"onCancel"},pubsub:{"stickyPanel.offset":"onStyckyPanelFix",favorite:"onFavorite",mylist:"onMylist",tip:"onTipState"}},_Init:function(){this._progress=this.getProgress(),this._stickyHeight=0,this._page=this._Opts.page||"noname",this.onScroll=this.onScroll.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onScrollTreshold=this.onScrollTreshold.bind(this),this.onResize=this.onResize.bind(this),r.subscribe("popup",this.onPopup.bind(this),{async:!1,memory:!0,take:1}),e(this.onLoad.bind(this)),r.subscribe(c("mouse").message,(function(){this._progress.then((function(e){~e.events.indexOf(h)||(e.events.push(h),this.saveProgress(e))}).bind(this))}).bind(this))},onLoad:function(){var i=this._page,n=this._Opts.tipDelayOnLoad||0;e(t).resize(this.onResize).scroll(this.onScrollTreshold),this._progress.then((function(e){var t,s="favorite:channel",o=this._Opts.cssSels.favChannel;t=e.hit["*"]||0,e.hit["*"]=++t,t=e.hit[i]||0,e.hit[i]=++t,!~e.events.indexOf(s)&&this._Elems.channels.find(o).length&&e.events.push(s),this.saveProgress(e),setTimeout((function(){this._processEvent({name:"load",storedName:"load:"+i})}).bind(this),n)}).bind(this))},onScrollTreshold:function(){var e=a.getScroll().top;void 0===this._initScroll&&(this._initScroll=e),Math.abs(e-this._initScroll)>=300&&(this._initScroll=e,this._processEvent({name:"scroll-treshold",storedName:"scroll-treshold:"+this._page}))},onFavorite:function(e){"channel"===e.data.type&&this._processEvent({name:"favorite:channel"})},onMylist:function(e){this._progress.then((function(t){var i="favorite:program";"new"===e.data?this._processEvent({name:i}):~t.events.indexOf(i)||(t.events.push(i),this.saveProgress||~i?"hide"===e.data&&~i&&u.splice(i,1):u.push(t)},onStyckyPanelFix:function(e){this._stickyHeight=e.data.offset||this._stickyHeight},onClose:function(e){e.stopPropagation(),e.preventDefault(),this._animationActive||this._close()},onEscape:function(){this._animationActive||(r.publish("ScheduleForm.Counters",{counters:this._Opts.tips[this._tipName].counters.escape}),this._close())},_close:function(){e("body").off("touchmove mousewheel DOMMouseScroll MozMousePixelScroll",this.onScroll).off("keydown",this.onKeyDown),this._tip&&this._tip.remove(),this._target&&this._target.removeClass(this._Opts.cssClss.targetBg).removeClass(this._Opts.cssClss.target),delete this._tlete this._preventScroll,delete this._processEventActive,r.publish("tip",{state:"hide"})},onCancel:function(e){e.stopPropagation(),e.preventDefault(),this._close(),this._progress.then((function(e){e.active=!1,this.saveProgress(e)}).bind(this))},onResize:function(){if(this._tip&&this._target){var e=this._getRect(this._target,this._tip);this._tip.find(this._Opts.cssSels.tipPosition).css({width:e.left,height:e.top}),this._tip.find(this._Opts.cssSels.tipSize).css({height:e.height,width:e.width})}},onKeyDown:function(e){27===(e=e||t.event).keyCode?this.onEscape():13===e.keyCode?this._close():~[32,37,38,39,40].indexOf(e.keyCode)&&(e.preventDefault(),e.returnValue=!1)},onScroll:function(t){var i,s,o,r=n?600:300,l=this,c=e(document.body);this._tip&&this._target&&(this._preventScroll?(t.preventDefault(),t.returnValue=!1):(o=this._target.get(0).getBoundin)+(o.top-this._stickyHeight),i>s&&(this._preventScroll=!0,i=i-this._stickyHeight+o.top,c.animateScroll({scrollTop:i-50,duration:r}).done(function(){c.animateScroll({scrollTop:i,duration:r}).done(function(){delete l._preventScroll})}))))},_processEvent:function(e){this._progress.then((function(t){var i,n,s=this._getCheckFn(e,t);this._Opts.isTipsActive&&t.active&&!this._processEventActive&&((i=Object.keys(this._Opts.tips).filter(s)[0])&&(this._processEventActive=!0,this._showTip(i,s).then((function(){this._tipName=i,t.tips.push(i),this.saveProgress(t)}).bind(this))),n=e.storedName||e.name,~t.events.indexOf(n)||(t.events.push(n),this.saveProgress(t)))}).bind(this))},_getCheckFn:function(e,t){return t=o(!0,{},t),(e=o({},e,{page:{"*":t.hit["*"]}})).page[this._page]=t.hit[this._page],(function(i){var n=u.concat(t.events).concat(t.tips),s=this._Opts.tips[i];return s.page=s.page||"*",!~t.tips.indexOf(i)&&p(s.event,e.name)&&p(s.page,Object.keysmaxHit||s.maxHit>=e.page[s.page])&&(!s.depends||p(s.depends,n,!0))&&(!s.excludes||!p(s.excludes,n))}).bind(this)},_showTip:function(t,i){var n=function(e){if(!i(t))throw Error("Tip does not correspond current condition");return e};return new Promise((function(i,s){var o=e(".tip__"+t).eq(0),a=o.get(0);o.length?(e(document.body).on("touchmove mousewheel DOMMouseScroll MozMousePixelScroll",this.onScroll).on("keydown",this.onKeyDown),this._ensureVisible(a).then(n).then(this._animateTip.bind(this,o,t)).then(n).then((function(e){this._tip=e,this._target=o,r.publish("tip",{state:"show",preventScroll:this._preventScroll}),r.publish("ScheduleForm.Counters",{counters:this._Opts.tips[t].counters.show})}).bind(this)).then(i,this._close.bind(this)).then(this._ensureVisible.bind(this,a))):s()}).bind(this))},_getRect:function(e,t){var i=t.find(this._Opts.cssSels.tipSize),n=i.position(),s=a.getClientRect(i),o=a.getClientRect(e),r={left:n.left+o.left-s.left,top:n.top+o.top-s.top,width:o.width,height:o.height};o.left<0&&(r.width-=s.left-o.left);var l=r.left-Math.floor(r.left);return l&&(r.left=Math.round(r.left),r.width=Math.floor(r.width+l)),r.left<=0&&(r.left=1),r},_animateTip:function(i,n,s){var o,r,a,l,c=this._Opts,u=c.cssSels,h=c.cssClss,p=u.tipSize,d=u.tipPosition,f=h.target,_=h.targetBg,m=c.Template.tip,g=this;Promise.resolve(m).then((function(c){return o=e(c({scrollTop:s||1,her=o.find(p),a=o.find(d),r.css({height:r.height(),width:r.width()}),a.css({height:s,width:0}),this._animationActive=!0,l=this._getRect(i,o),o.animateEnter(),r.animateEnter().active(function(){r.css({width:l.width,height:l.height})}),a.animateEnter().active(function(e){if(!e)return a.css({width:l.left,height:l.top})}).done(function(){i.addClass(f),i.animateEnter().done(function(){this.addClass(_),o.addClass("p-tip_"+n),delete g._animationActive,g.onResize()})}),o}).bind(this))},_ensureVisible:function(i){var n=this._stickyHeight;return new Promise((function(s){var o,r=a.getScroll().top,l=e(t).height(),c=a.getClientRectindexOf("noscroll")?(this._preventScroll=!0,s(r)):(n?c.top<n?o=r+c.top-n-20:c.bottom+20>l&&(o=r+c.bottom-l+20):o=0,"number"==typeof o?e(document.body).animateScroll({scrollTop:o,duration:oll().top)}).bind(this)):s(r))}).bind(this))}},d,null,"TipView"),_=function(){var e={active:!0,hit:{},tips:[],events:[]},n="tip:";function r(){return new Promise(function(e){i.Tools.Auth.onGetStatus(function(t){t?e(t):e("anonim")})})}return{getProgress:function(){var i=this;return new Promise(function(a,l){t.localStorage?r().then(function(r){var l,c=encodeURIComponent(n+r);try{l=JSON.parse(t.localStorage.getItem(c))}catch(e){}l||(l=o({},e),i.saveProgress(l)),s&&l.hit["*"]>=2&&l.active&&(l=o({},e),i.saveProgress(l),console.log("Renew tip's progress")),a(l)},l):l()})},saveProgress:function(i){return new Promise(function(s,o){t.localStorage?r().then(function(r){var a=encodeURIComponent(n+r);try{t.localStorage.setItem(a,JSON.stringify(i)),s(e)}catch(e){o()}},o):o()})}}}(),i.Basic.Constructors.addPlugin(f,_),i.Basic.moduleOpts.setParams("TipView.Schedule",{options:{page:"schedule",tipDelayOnLoad:1e3}}),i.Basic.moduleOpts.setParams("TipView.Channel",{options:{page:"channel",tipDelayOnLoad:1e3}})},26060:function(){var e;window,(e=window.ru.mail.cpf).Basic.Constructors.getView({_Handlers:{"model:schedule":"_onSchedule"},_onSchedule:function(e){var t=this._elems.text,i=e.layout,n=i.page_title,s=i.page_title_region;t&&t.html((void 0===n?"":n)+(void 0===s?"":s))},_Init:function(){}},{cssSels:{Main:{text:".js-page-title__text"}}},null,"PageTitle"),e.Basic.moduleOpts.setParams("PageTitle",{acceptTypes:"Schedule"})},30810:function(){var e,t,i,n,s,o,r;e=window.jQuery||window.$||window.$f,t=window,n=(i=window.ru.mail.cpf).Basic.Extend,s=i.Tools.PubSub,o=i.Types.String.supplant,r=i.Modules.DataRouter(),i.Modules.Schedule=i.Basic.Constructors.getModel({_Events:["loading","schedule","schedule.page","formData","program","favorite","scheduleUpdate","visibilitychange"],_Init:function(){this.onInit.apply(this,arguments)},onInit:function(t){var i=this,n=this._opts,s=n.resource,o=n.region_id,r=t.current_offset;void 0!==r&&(this._offset=1e3*r),o&&(s.schedule.params.region_id=o,s.program.params.region_id=o),s.schedule.params.channel_type=n.channel_type,this._selectedDate=this._today=this._Opts.today,this._servTs=1e3*t.current_ts+this._offset,this._lostVisibilityTime=0,e(document).on("visibilitychange",function(){return i._onVisibilityChange()})},_getUrl:function(e,t){var i,s=this._Opts.resource._prefix||"";return(e=this._Opts.resource[e])&&("string"==typeof e?i=e:e.uri&&(i=e.uri)),i&&(i=o(s+i,n({},e.uriParams,t))),i},_getQueryParams:function(e,t){return n({},(e=this._Opts.resource[e]||{}).params,t)},_onVisibilityChange:function(){var e=new Date().getTime(),i=this._lostVisibilityTime;"visible"===document.visibilityState?(this._lostVisibilityTime=0,this._opts.canReload&&i&&e-i>3e5&&this.getDaysBefore()>=0&&t.location.reload()):(this._lostVisibilityTime=e,this._log("invisible")),this._trigger("visibilitychange")},getDaysBefore:function(e){if(!e&&!this._selectedDate)return -1;var t=new Date(0),i=(e||this._selectedDate).split("-");return t.setUTCFullYear(i[0]),t.setUTCMonth(i[1]-1),t.setUTCDate(i[2]),t.setUTCHours(5),Math.ceil((t.getTime()-this._servTs)/864e5)},getSelectedDate:function(){return this._selectedDate},fetchEvent:function(e){var t=this._getUrl("event");return(e=this._getQueryParams("event",e)).region_id=this._Opts.region_id,r.getData(t,e,null,!0).then((function(e){if("OK"!==e.status)throw Error("error");return e}).bind(this))},setFavorite:function(e){var t=this._getUrl(e.type,{method:"set"});return r.getData(t,{id:e.ids},{addParams:{method:"POST",secure:!0}},!0).then((function(t){if("OK"!==t.status)throw Error("error");e.silent||this._trigger("favorite",e)}).bind(this))},saveFavorite:function(e,t){var i=this._Opts.mylistKey,n=this._Opts.tsKey,o=this._getUrl(e.type,{method:e.favorite?"add":"del"}),a=this._getQueryParams(e.type,{id:e.id});return r.getData(o,a,{addParams:{secure:!0},method:"POST"},!0).then((function(o){if("OK"!==o.status)throw Error("error");o.config&&(e.config=o.config),this._trigger("favorite",e,t),"program"===e.type&&s.publish("mylist.data",o[i]),o[n]&&s.publish("timestamp.current",o[n])}).bind(this))},fetchFavorite:function(e){e=e||{};var t="program",i=this._Opts.mylistKey,n=!!e.url,o=e.url||this._getUrl(t,{method:"get"});delete e.url;var a=this._getQueryParams(t,e);return r.getData(o,a,null,!0).then(function(e){if("OK"!==e.status)throw Error("error");n?s.publish("mylist.data.page",e[i]):s.publish("mylist.data",e[i])})},_preprocessData:function(e){var t,i=e.form.date;return i.values.some(function(e){return t||(t=e.today&&e.value),!!t}),this._selectedDate=i.value,this._today=t,e},_fetchSchedule:function(e,t){var i=t&&t.scheduleType||"schedule",n=this._getUrl(i),s=Math.random(),o=this._preprocessData.bind(this);Data(n,e,t,!0).then(function(e){if(s!=s)throw Error("reject by another request");return"OK"===e.status&&(e=o(e)),e})},fetchSchedule:function(e,t){this._trigger("loading",!0),e=n({},e);var i=(function(){this._trigger("loading",!1)}).bind(this),s=this._fetchSchedule(e,t).then((function(e){return"OK"===e.status&&(this._trigger("schedule",e),this._trigger("formData",e.form)),e}).bind(this),function(e){});return s.then(i,i),s},fetchPage:function(e){return this._fetchSchedule(e,{method:"POST"}).then((function(e){"OK"===e.status&&(this._trigger("schedule.page",e),this._trigger("formData",e.form))}).bind(this),function(){})},_log:function(){}},{canReload:!0,resource:{_prefix:"/ajax",channel:"/favorite/channel/${method}/",program:{uri:"/favorite/event/${method}/",params:{region_id:70}},event:"/event/",schedule:{uri:"/index/",params:{region_id:70}},channelSchedule:{uri:"/channel/",params:{region_id:70}}},region_id:70,channel_type:"",mylistKey:"favorite_event_block",tsKey:"current_ts",eventKey:"tv_event"},null,"Schedule"),i.Basic.moduleOpts.setParams("Schedule",{paramAttrs:{region_id:"data-region"}})},71841:function(){var e=window.ru.mail.cpf.Basic.moduleOpts.setParams;e("PlayerEpisodesView",{options:{canUpdateHistory:!1}}),e("ShowPlayer",{options:{api:{staticParams:{autoplay:1}}}})},18481:function(e,t,i){var n=i(71470),s=window.ru.mail.cpf.Basic.moduleOpts.setParams,o=null;s("Toggle",{options:{_plugins:null,cssClss:{hidden:"hidden"}}}),s("Toggle.HideButton",{options:{hideButton:!0}}),s("Toggle.Truncate",{options:{cssSels:{Main:{container:".js-toggle__truncate"},button:".js-toggle__truncate-button"},cssClss:{hidden:"p-truncate_expanded"}}}),s("Toggle.ChannelPlayer",{options:{_plugins:null,cssClss:{hidden:"hidden"},_Handlers:{toggle:function(){var e=this._state.shown,t=this._elems.block;!e&&o?(t.append(o),(0,n.counterTrigger)("showChannelPlayer",null,"tv")):(o||(o=t.find("iframe")),t.find("iframe").remove())}}}})},81042:function(){!function(e,t,i){"use strict";var n,s,o,r,a,l,c,u,h,p,d,f=i.Basic.getView,_=i.Basic.Extend,m=i.Basic.debounce,g=f((s={width:(n=e(t)).width(),height:n.height()},o={horizontal:["left","right"],vertical:["top","bottom"]},r={left:"right",right:"left",center:"center",top:"bottom",bottom:"top"},a=function(e){return o.horizontal.indexOf(e)>-1?o.vertical:o.horizontal},l=function(){var e=this._elems.parent.attr("class"),t=this._opts;if(e.indexOf(t.positionClassPrefix)>-1)return e.match(t.positionClassRegexp)},c=function(){var e=l.call(this);if(e)return e[0]},u=function(e){var t=c.call(this),i=[r[e[0]],e[1]];t&&this._elems.parent.removeClass(t),this._elems.parent.addClass(this._opts.positionClassPrefix+"_"+i.join("-"))},h=function(){var e=l.call(this);if(e)return[r[e[1]],e[2]]},p=function(e){var t={};return(t.left=n.scrollLeft(),t.right=t.left+s.width,t.top=n.scrollTop(),t.bottom=t.top+s.height,e.left<t.left||e.top<t.top||e.right>t.right||e.bottom>t.bottom)?{left:e.left-t.left,top:e.top-t.top,right:t.right-e.right,bottom:t.bottom-e.bottom}:null},{_Init:function(){var e=this._opts,t=this._elems,i=t.box;this.setZIndex(),this.timeout=null,this._resetState();var o=t.parent.children();o.length>1&&(e.target=o.not(i).first()),e.element=e.element||e.target;var r=h.call(this);r?e.position=r:u.call(this,e.position),["mouseenter","mouseleave"].forEach(function(t){"function"==typeof e.events[t]&&i.on(t,e.events[t].bind(this))},this),e.target&&(e.show&&e.target.on(e.show.event,this.show.bind(this,null,null)),e.hide&&e.hide.event&&e.target.on(e.hide.event,(function(){if(e.interactive)return this._setHideTimeout();this.hide()}).bind(this)),e.interactive&&e.target.on("mouseenter",this._resetHideTimeout.bind(this))),e.interactive&&(i.on("mouseenter",this._resetHideTimeout.bind(this)),e.hide&&i.on("mouseleave",this._setHideTimeout.bind(this,null))),n.on("scroll resize",(function(e){"resize"===e.type&&(s.width=n.width(),s.height=n.height()),this._state.active&&this._handleScroll()}).bind(this))},show:function(e,i){return this._state.active=!0,e=e||this._opts.content,i=i||this._opts.timeout,e&&this.content(e),this._toggleVisibility(!0),this._updatePosition(),i&&this._setHideTimeout(i),t.requestAnimationFrame((function(){this._setRepositionIntervalepositionInterval(),this._state.visible){var e=this._opts;this._toggleVisibility(!1),"function"==typeof e.onHide&&e.onHide.call(this)}return this},content:function(e){return this._elems.content.html(e),this._updatePosition(),this},position:function(t,i){return _(this._opts,{element:t?e(t):null,position:i}),this._updatePosition(),this},setZIndex:function(e){return null!==(e="number"==typeof e?e:this._opts.zIndex)&&this._elems.box.css("z-index",e),this},_toggleVisibility:function(e){return this._state.visible=!!e,e||(this._resetRepositionInterval(),this._resetState()),this._elems.parent.toggleClass(this._opts.cssClss.visible,e),this},_updatePosition:(d=function e(t,i,n,s){s=s||0;var o=i.element,l=o.offset(),c=o.outerWidth(),u=o.outerHeight(),h=i.flip,d=i.collisionGap,f=i.tipAlign,_=["top","bottom"].indexOf(n[0])>-1?[n[1],r[n[0]]]:[r[n[0]],n[1]],m=["top","bottom"].indexOf(n[0])>-1?[n[1],n[0]]:n,g=t.outerWidth(),v=t.outerHeight();if("right"===m[0]?l.left+=c:"center"===m[0]&&(l.left+=c/2),"bottom"===m[1]?l.top+=u:"center"===m[1]&&(l.top+=u/2),"right"===_[0]?l.left-=g:"center"===_[0]&&(l.left-=g/2),"bottom"===_[1]?l.top-=v:"center"===_[1]&&(l.top-=v/2),f&&("left"===n[0]||"right"===n[0]?"center"===f&&(l.top+=o.outerHeight()/2):"center"===f&&("left"===n[1]?l.left+=o.outerWidth()/2:"right"===n[1]&&(l.left-=o.outerWidth()/2))),"fit"===h){var y=p({left:l.left-d,right:l.left+g+d,top:l.top-d,bottom:l.top+v+d});if(y){if(0===s)return y[n[0]]>0?e(t,i,n,1):e(t,i,[r[n[0]],n[1]],1);if(1===s){var w=a(n[0]);return y[w[0]]>0?e(t,i,[n[0],w[1]],2):y[w[1]]>0?e(t,i,[n[0],w[0]],2):e(t,i,[n[0],"center"],2)}if(2===s)return e(t,i,[a(n[0])[0],"center"],3);if(3===s)return e(t,i,[r[n[0]],"center"],4)}}return{elemPosition:l,names:n}},function(){if(this._state.visible){if(!this._checkIfElementVisible())return this._toggleVisibilit){var t=e.position,i=d(this._elems.box,e,t,0);e.tipAlign&&this._elems.parent.toggleClass(e.cssClss.alignMode,-1===["left","right"].indexOf(i.names[0]));var n=i.elemPosition;Object.keys(n).forEach(function(e){n[e]=Math.round(n[e])}),u.call(this,i.names),this._elems.box.offset(i.elemPosition)}}}),_resetState:function(){this._state={active:!1,fixed:!1,visible:!1,elementPosition:{bottom:0,left:0,right:0,top:0}}},_setHideTimeout:function(e){this._resetHideTimeout();var t=this._opts;e=isNaN(e)?t.interactive&&t.interactiveTimeout:e,this.timeout=setTimeout(this.hide.bind(this),isNaN(e)?0:e)},_resetHideTimeout:function(){clearTimeout(this.timeout)},_checkIfElementVisible:function(){var e=this._opts.element,t=this._state.elementPosition;return!!e&&t.bottom>=0&&t.top<s.height&&t.right>=0&&t.left<s.width&&e.is(":visible")},_handleScroll:function(){if(this._opts.element){var e=this._opts.element[0].getBoundingClientRect(),t=this._state,i=e.top===t.elementPosition.top&&e.left===t.elementPosition.left;(i&&!1===t.fixed||!i&&!0===t.fixed)&&(t.fixed=!t.fixed,this._elems.box.css("position",t.fixed?"fixed":"absolute"),this._updatePosition()),i||(t.elementPosition=e)}this._repositionTooltip()},_repositionTooltip:m(function(){this._updatePosition()},100),_setRepositionInterval:function(){if(this._resetRepositionInterval(),!this._checkIfElementVisible())return this._toggleVisibility(!1);this._state.visible||this._toggleVisibility();var e=this._opts.element[0].getBoundingClientRect(),t={left:e.left,top:e.top};this.repositionInterval=setInterval((function(){var e=this._opts.element[0].getBoundingClientRect();(e.left!==t.left||e.top!==t.top)&&(this._repositionTooltip(),t.left=e.left,t.top=e.top)}).bind(this),this._opts.repositionInterval)},_resetRepositionInterval:function(){clearInterval(this.repositionInterval)}}),{cssSels:{Main:{box:".tooltip__box",content:".tooltip__inner"}},cssClss:{alignMode:"tooltip_align-arrow",visible:"tooltip_shown"},content:"",target:null,element:null,position:["right","center"],zIndex:null,tipAlign:"",repositionInterval:200,flip:"fit",collisionGap:20,show:{event:"mouseenter"},hide:{event:"mouseleave"},interactive:!0,interactiveTimeout:150,timeout:0,events:{mouseenter:null,mouseleave:null},onHide:null,positionClassPrefix:"tooltip_arrow",positionClassRegexp:/tooltip_arrow_([a-z]+)-([a-z]+)/i},null,"TooltipHint");i.Basic.Extend(t.getNameSpace("Modules",i),{TooltipHint:g})}(window.jQuery||window.$,window,window.ru.mail.cpf)},73960:function(){var e,t,i,n,s;e=window,t=window.jQuery||window.$,n=(i=window.ru.mail.cpf).Basic.getView,s=i.Tools.initModule,n({_Handlers:{dom:{"click:tooltipButton":function(i){var n=this._opts,s=n.attrs,o=s.adsLink,r=s.token,a=n.templates.tooltip,l=n.cssClss.tooltipShown,c=this._tooltip,u=c._opts,h=c._elems,p=i.currentTarget;u.element=t(p);var d=p.getAttribute(o),f=p.getAttribute(r);if("function"!=typeof a)return e.console.error("Отсутствует шаблон для тултипа"),null;a.asyncRender({adsLink:d,token:f}).then(function(w(e)}),(e){var t=this._opts,i=t.cssSels.tooltipTokenText,n=t.attrs.token,s=e.currentTarget,o=s.getAttribute(n),r=s.querySelector(i);navigator.clipboard.writeText(o).then(function(){r.innerHTML="Скопировано"}).catch(function(e){console.log("Токен не скопирован",e)}),e.stopPropagation()},"click:Main.layout":function(e){var i=this._tooltip,n=i._elems,s=n.parent.hasClass(this._opts.cssClss.tooltipShown),o=t(e.target).closest(n.box);s&&!o.length&&(i.hide(),i._resetState())}}},_Init:function(){this._tooltip=s("TooltipHint",this._elems.tooltipBlock,{position:["bottom","right"],show:null,interactive:!1,collisionGap:0})}},{cssSels:{Main:{layout:".js-adv-marker",tooltipBlock:".js-adv-marker__tooltip",tooltipContent:".js-adv-marker__tooltip-content"},tooltipToken:".js-adv-marker__tooltip-token",tooltipTokenText:".js-adv-marker__tooltip-token-text",tooltipButton:".js-adv-marker__tooltip-button"},cssClss:{tooltipShown:"tooltip_shown"},attrs:{adsLink:"data-ads-link",token:"data-token"},templates:{tooltip:null}},null,"AdvMarker")},86178:function(){var e,t,i,n;e=window.jQuery||window.$,t=window,(0,(n=(i=window.ru.mail.cpf).Basic).Extend)(!0,i,{Modules:{Toggle:n.getView(function(){function i(){var e=this._opts,t=e.cssClss.hidden;e.hideButton&&this._state.shown&&this._elems.button.addClass(t)}function n(){var e=this._opts,t=this._elems,i=e.cssClss,n=this._state.heights,o=this._state.shown,r=t.container;this._state.animate=!0,s.call(this).addClass(i.hidden),r.css({height:o?"0":n.container})}function s(){var e=this._elems.container;return this._opts.toggleParent||!e?this._elems.parent:e}return{_Events:["toggle","buttonClick"],_Handlers:{"dom:click:button":"_onClick","dom:webkitTransitionEnd msTransitionEnd oTransitionEnd transitionend:Main.container":"_onTransitionEnd"},toggleBlock:function(){var e=this._opts,o=this._elems,r=e.cssClss;if((o.container||{}).length){var a=this._state.shown;e.animate?n.call(this):(s.call(this).toggleClass(r.hidden),this._state.shown=!a,i.call(this),this._trigger("toggle"));var l=document.createEvent("HTMLEvents");l.initEvent("resize",!0,!0),t.dispatchEvent(l)}},_onClick:function(t){var i=this._opts.cssSels.preventToggle;i&&(e(t.target).is(i)||e(t.target).parents(i).length)||(t.preventDefault(),this.toggleBlock(),this._trigger("buttonClick",t))},_onTransitionEnd:function(t){var n=this._state.shown,o=this._state.animate;o&&e(t.target).is(this._opts.cssSels.Main.container)&&(this._state.shown=!n,i.call(this),s.call(this).toggleClass(this._opts.cssClss.hidden,n),this._trigger("toggle"),o=!1)},_Init:function(){var e=this._opts,t=this._elems,i=e.cssClss,n=t.container;if((n||{}).length){var o=t.container[0].scrollHeight,r=s.call(this).hasClass(i.hidden);this._state={shown:!r,animate:!1,heights:{container:o}},this._state.shown&&e.animate&&n.css("height",o)}}}}(),{cssSels:{Main:{block:".js-toggle",button:".js-toggle__button",container:".js-toggle__container"},button:".js-toggle__button",preventToggle:null},cssClss:{hidden:"hidden_all"},animate:!1,hideButton:!1,toggleParent:!1},nular e,t,i,n,s,o,r;e=window,n=(i=(t=window.ru.mail.cpf).Basic).typeOf,s=i.Extend,o=t.Tools.Images,r=i.Constructors.getModel(function(){var t=["title","source","description"],r={};function a(e){this.loading=!0,e&&(this.width=e.width,this.height=e.height)}function l(){delete this.loading}function c(e,t){var i=this._Current;return i.image===e&&i.set===t}function u(e,t){var i,n,s=this._opts.preloadDepth;if(s>0&&c.call(this,e,t)){i=this._getCurrentSetImages();for(var o=e+s;o>=e-s;o--)(n=this._getImageId(o))!=e&&this._startPreload(i[n],n,t)}}function h(e,t,i,n){if(c.call(this,t,i)){if(void 0!==n){var s=this._getCurrentSetImages();this._trigger("imageready",s[t],t,i,e)}else this._trigger("imagefail",t,i,e)}}function p(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.addImagesSet(e[t]);else n(e,"object")&&this.addImagesSet(e)}function d(e){var t,i,r=[],a=this._opts.urlSeparator,l=this._opts.imageType;Array.isArray(e)||(e=[e]);for(var c=0;c<e.length;c++)(i=n(t=e[c],"object")?s({type:l},t):n(t,"string")&&t.length>0?function(e,t,i){var n,r=e.split(t),a=r[2],l={src:r[0],type:a};return a&&o.isTypeCorrect(a)||(l.type=a=o.getImageTypeFromUrl(r[0])||i),a?(n=r[1])&&(n=n.split("x")).length>1&&s(l,{width:1*n[0],height:1*n[1]}):l=null,l}(t,a,l):null)&&r.push(i);return r}function f(e){for(var t,i,s,o,r=[],a=this.getImagePropsList(),l=0;l<e.length;l++){if(t=e[l],o={},n(t,"object")){i=t.url||t.image;for(var c=a.length;c--;)s=a[c],t.hasOwnProperty(s)&&(o[s]=t[s]);"source"in o&&function(e){var t=e.source;n(t,"object")&&(e.source=t=[t.name,t.href]),n(t,"string")&&(e.source=t=t.split("|")),Array.isArray(t)&&t[0]||delete e.source}(o)}else i=t;(i=d.call(this,i)).length&&(o.versions=i,r.push(o))}return r}function _(e,t,i,n){for(var s=this._isValidId(n),o=e.length;o--;){var r=h.bind(this,s?n:o,t,i);e[o].then(r,r)}}return{_Events:["setchange","setimageschange","imagechange","imageready","imagefail","imageloaded","imageloading","lastimage","message"],_Init:function(e){var i,n=this._opts.imageProps,o=this._aImageProps=t.slice(0);if(this._setsParams=[],this._setsImages=[],this._Current={set:null,image:null},Array.isArray(n))for(var r=n.length;r--;)i=n[r],-1===o.indexOf(i)&&o.push(i);if(e&&e.images)p.call(this,e);else if(e&&e.imageSets){var a=s({},e);p.call(this,a.imageSets)}},_getSetImages:function(e){var t=this._setsImages,i=null;return null===e&&(e=this._Current.set),this._isAvailableId(e,t)&&(i=this._setsImages[e]),i},_preloadCurImage:function(e,t){var i=this._Current.set,n=this._startPreload(t,e,i),s=u.bind(this,e,i);return _.call(this,n,e,i),Promise.all(n).then(s,s)},_startPreload:function(e,t,i,n){for(var s,r,c,u=this._opts.preloadTimeout,h=e.versions,p=[],d=0;d<h.length;d++)this._isValidId(n)&&d!==n||(c=!("loading"in(r=h[d])),s=Promise.resolve(function(e,t){var i;return"loading"in e||((i=o.canPreload(e.type))?(e.loading=o.preloadImage(e.src,t),e.loading.then(a.bind(e),l.bind(e))):e.loading=i),e.loading}(r,u)),c&&(then(this._trigger.bind(this,"imageloaded",e,t,i,d))),p.push(s));return p},_getImageId:function(e){var t,i=this._getCurrentSetImages(),n=(i&&i.length|<0&&(e+=t):e=Math.max(0,Math.min(e,n)),e},_isValidId:function(e){return null!==e&&!isNaN(e)},_isAvailableId:function(e,t){return this._isValidId(e)&&e in t},_getams:function(){return this.getSetParams(null)},getImageParams:function(e,t){return e=isNaN(e)?this._Current.set:+e,t=isNaN(t)?this._Current.image:+t,i.getByPath([e,t],this._setsImages)},getCurrentImageParams:function(){return this.getImageParams(this._Current.set,this._Current.image)},reloadImage:function(e,t,i){var n;this._isValidId(i)||(i=this._Current.set),this._isAvailableId(e,this._getCurrentSetImages())&&(n=this._startPreload(this.getImageParams(i,e),e,i,t),_.call(this,n,e,i,t))},addImagesSet:function(t){var i=t&&t.images,n=-1;if(Array.isArray(i)){var s=this._setsImages;n=s.length,(i=f.call(this,i,n)).length?(s.push(i),this._setsParams[n]=t):n=-1}return e.DEBUG&&-1===n&&e.console.warn("Новый сет изображений не добавлен:",t),n},addImages:function(e,t,i){var n,o,r,a=this._setsImages,l=!0;null===(t=this._isAvailableId(t,a)?t:this._Current.set)&&(t=this.addImagesSet({images:e}),l=!1);var c=a[t],u={imagesAdded:!1};return Array.isArray(e)&&(r=(e=f.call(this,e,t)).length)&&(i?(n="unshift",u.indexFirst=0,u.indexLast=r-1):(n="push",o=c.length,u.indexFirst=o,u.indexLast=o+r-1),l&&Array.prototype[n].apply(c,e),s(u,{imagesAdded:!0,setLength:c.length,setId:t,newImages:e}),this._trigger("setimageschange",u)),u},changeSet:function(e){var t=this._Current,i=this._isAvailableId(e,this._setsImages)&&e!=t.set;return i&&(t.set=1*e,t.image=null,this._trigger("setchange",this._setsParams[e],e)),i},changeImage:function(e){var t,in o&&this.(s.image=e,t=o[e],is._opts.Loop&&(i=e===o.length-1,n=0===e,(i||n)&&this._trigger("lastimage",i,n)),this._preloadCurImage(e,t))),r},nextImage:function(){return this.changeImage(this._Current.image+1)},prevImage:function(){return this.changeImage(this._Current.image-1)},getImagePropsList:function(){return this._aImageProps.slice(0)},getCurrentImage:function(){var e=this._Current,t=this._getCurrentSetImages();return{image:e.image,set:e.set,setLength:t&&t.length||0}},getImageProps:function(e,t){var i=this._Current,n=this._setsImages,o=null,r=this._isValidId,a=this._isAvailableId.bind(this);return e=r(e)?e:i.image,a(t=r(t)?t:i.set,n)&&a(e,n[t])&&(o=s(!0,{},n[t][e]),delete o.versions),o},getImage:function(e,t,i){var s=this._Current,o=!1;if(!this._isAvailableId(t,this._setsImages)&&null===(t=s.set))return null;var r=this._setsImages[t];this._isAvailableId(e,r)||(e=s.image);var a=r[e];return a&&this._isAvailableId(i,a.versions)&&(o=n(a.verso?a:null},gearams,i=null;return null===e&&(e=this._Current.set),this._isAvailableId(e,t)&&(i=s(!0,{},t[e])),i},addToCache:function(t,i){if(!i){e.DEBUG&&e.console.error("Для кэширования данных необходимо имя ключа!");return}r[i+""]=t},getFromCache:function(e){return r[e+""]},postMessage:function(e){this._trigger("message",e)}}}(),{_Handlers:null,preloadDepth:null,preloadTimeout:2e4,Loop:!1,imageProps:null,urlSeparator:"|",imageType:"pic"},null,"Gallery"),s(e.getNameSpace("Modules",t),{Gallery:r})},83967:function(){var e,t,i,n,s,o,r;window.jQuery||window.$,e=window,t=window.ru.mail.cpf,i=window.DEBUG,n="GalleryControls",s=t.Basic.Constructors.getView,o=t.Basic.Extend,r=t.Basic.moduleOpts.setParams,o(!0,t,{Modules:{GalleryControls:s({_Handlers:{"dom:click:Main.Controls":"_onControlClick",model:{lastimage:"_onLastImage",imagechange:"_onImageChange",message:"_onMessage"}},_Init:function(){null===this._elems.Controls&&i&&e.console.warn(n+": element 'Main.Controls' not found");var t=this._Model.getCurrentImage(),s=t.image,o=this._Model._opts.Loop,r=0===s,a=s===t.setLength-1;(!o&&null!==s||r&&a)&&(r||a)&&this._onLastImage(a,r)},toggle:function(e){e=e||{};var t=this._elems.Controls;if(t){var i=this._opts,n=i.cssClss.disabledControl,s=i.Attrs.switchDirection;n&&t.each(function(t,i){var o=i.getAttribute(s)||"";"boolean"==typeof e[o]&&i.classList[e[o]?"remove":"add"](n)})}},_onControlClick:function(e){var t=this._Model,i="next"===e.currentTarget.getAttribute(this._opts.Attrs.switchDirection),n=t.getCurrentImage(),===s&&(s=0,t.changeImage(s)),t.changeImage(s+(i?1:-1)),e.preventDefault()},_onLastImage:function(e,t){this.toggle({prev:e&&!t,next:t&&!e})},_onMessage:function(e){if("controls"===e.name){var t=e.value||{};"boolean"==typeof t.disable&&this.toggle(t.disable?{prev:!1,next:!1}:{prev:!0,next:!0})}},_onImageChange:function(){this.toggle({prev:!0,next:!0})}},{cssSels:{Main:{Controls:null}},cssClss:{disabledControl:null},Attrs:{switchDirection:"data-direction"}},null,n)}}),r(n,{acceptTypes:["Gallery"]})},1142:function(){var e,t,i,n,s,o;window.jQuery||window.$,window,i=(t=(e=window.ru.mail.cpf).Basic).Extend,n=t.typeOf,s=t.getOptions,o=t.Constructors.getView(function(){function e(e){for(var t,i,o,r,a,l,c=this._opts,u=c.Attrs,h=this._Model.getImagePropsList(),p=u.imageVersions,d=u.imageProps,f=[],_=null,m=0;m<p.length;m++){a=p[m].split("|");for(var g=0;g<a.length;g++)if(t=e.getAttribute(a[g])){f.push(t);break}}if(f.length&&(_={url:f},n(d,"object")))for(var v=h.length;v--;)(o=d[i=h[v]])&&(r=e.getAttribute(o))&&(_[i]=r);if(c.useOnclickData)for(var y in l=s(e))l.hasOwnProperty(y)&&-1!==h.indexOf(y)&&(_[y]=l[y]);return _}return{_Events:["previewClick"],_Handlers:{dom:{"click:Main.Preview":"_onPreviewClick"},model:{imagechange:"_onImageChange"}},_Init:function(){var e,t,n=thi,o=this._Model,r=n.imagesSet;this._imagesSet=r,s&&s.length&&(e=this.getImagesFromElems(s)).length&&(null!==r?o.addImages(e,r):(t=i({images:e},n.addSetParams),this._imagesSet=this._Model.addImagesSet(t)))},getSetId:function(){return this._imagesSet},getImagesFromElems:function(t){return t.toArray().map(e.bind(this)).filter(function(e){return null!==e})},_onPreviewClick:function(e){var t=e.currentTarget,i=this._opts.Attrs.imageId,n=this._opts.Attrs.imageSetId,s=t.getAttribute(i)||this._elems.Preview.index(t),o=t.getAttribute(n)||this._imagesSet;this._model.changeSet(o),this._model.changeImage(s),this._trigger("previewClick",{imageId:s,imageSetId:o}),e.preventDefault()},_onImageChange:function(e,t,i){var n=this._opts.cssClss.currentPreview,s=this._imagesSet,o=this._Elems.Preview;o&&(null===s||i===s)&&n&&o.removeClass(n).eq(t).addClass(n)}}}(),{cssSels:{Main:{Preview:".js-preview-list__item"}},cssClss:{currentPreview:null},Attrs:{imageVersions:null,imageProps:null,imageId:"data-image-id",imageSetId:"data-image-set"},imagesSet:null,addSetParams:null,useOnclickData:!1},null,"GalleryPreviews"),t.moduleOpts.setParams("GalleryPreviews",{acceptTypes:es:{GalleryPreviews:o}})},93579:function(){var e,t,i,n,s;e=window,i=(t=window.ru.mail.cpf).Basic.Constructors.getView,n=t.Basic.moduleOpts.setParams,s=t.Tools.initModule,i({_Init:function(){var t=s("PopupGalleryView",this._elems.parent),i=this._opts.backUrl;t&&i&&t.on("hide",function(){this.showLoading(),requestAnimationFrame(function(){e.location=i},this._Elems.Parent)});var n=this._opts.currentImg,o=this._opts.currentSet;n&&(this._Model.changeSet(parseInt(o,10)),this._Model.changeImage(parseInt(n,10)))}},{currentImg:null,currentSet:null,backUrl:null},null,"GalleryShot"),n("GalleryShot",{acceptTypes:"Gallery",paramAtturrentSet:"data-set-id",backUrl:"data-return-url"}})},56632:function(){var e,t,i,n,s,o,r;e=window.jQuery||window.$,t=window,s=(n=(i=window.ru.mail.cpf).Basic).typeOf,o=n.Extend,r=n.getView(function(){var i,n="background-size"in(i=document.createElement("div").style)||"backgroundSize"in i,r=["width","height"],a=r.reduce(function(e,t){return e[t]="",e},{});function l(t,i,n){var o,r,a,l,c,u,h=this._opts.infoAppend;Array.isArray(n)||(n=Object.keys(t));for(var p=n.length;p--;)(o=n[p])in t&&(s(r=t[o],"string")&&(r=this._getViewParent().find(r)),r instanceof e&&r.length&&(c=s(a=i[o]),u=h[o],"boolean"===c?r.toggle(a):s(u,"function")?u.call(this,r,a):(l=null!==a&&"undefined"!==c&&!("string"===c&&0===a.length),r.toggle(l),l&&("A"===r.get(0).tagName?r.attr("href",a):r.html(a)))))}function c(t,i){return i?"nodeType"in i?e(i):i:t}var u=function(e){this._state=o({},this._state,e||{})},h=function(){return o(!0,{},this._state)};return{_Handlers:{dom:{"click:Main.imageView":"_onImageClick","click:reloadImage":function(e){this._model.reloadImage(this._model.getCurrentImage().image,this._opts.imagesVersion),e.preventDefault()}},model:{imagechange:"_onImageChange",imageready:"_onImageReady",imagefail:"_onImageFail",setchange:"_onSetChange"}},_Init:function(){var e=this._opts,t=e.imagesSet;if(this._imagesSet=null===t?t:1*t,this._imagesVersion=+e.imagesVersion,isNaN(this._imagesSet)||isNaN(this._imagesVersion))throw TypeError("imagesSet");null!==t&&this._toggleSetInfo(this._Model.getSetParams(t),t)},_onSetChange:function(e,t){null===this._imagesSet&&this._toggleSetInfo(e,t)},_setImageToView:function(i,n,o){var r,a,l,c,u=this._opts,h=!0===u.resizeView,p=s(t.swfobject,"undefined")?null:t.swfobject,d=i.src;switch((o=this._getViewElement(o)).empty(),i.type){case"pic":"IMG"===o.get(0).tagName?o.attr("src")!==d&&(c=o.clone(!0).attr("src",d),o.replaceWith(c),this._setViewElement(c)):(l={"background-image":"url("+d+")"},h&&"cover"!==o.css("background-size")&&(l["background-size"]=n.width+"px "+n.height+"px"),o.css(l));break;case"flash":if(!p)break;(a=o.children()).length&&(r=a.attr("id"))||e('<div id="'+(r="flash_pic_"+new Date().getTime())+'"></div>').appendTo(o),p.embedSWF(d,r,n.width,n.height,"9.0.0",null,null,u.flashParams)}return c||o},_prepareViewElement:function(e,t){var i,n=null,s=1;(t=this._getViewElement(t)).css(a);for(var o=r.length;o--&&(i=r[o]);)s=Math.min(s,t[i]()/e[i]);if(s<1)for(n={},o=r.length;o--&&(i=r[o]);)n[i]=Math.round(e[i]*s);return n},_normilizeImageViewElem:function(t,i,s){var o,r=(s=this._getVie===t&&!a&&i&&!n;img>":"<div>").addClass(r.className),s.replaceWith(o),this._setViewElement(o)),o||s},_processViewSizes:function(e,t,i){(i=this._getViewElement(i)).css(t||a)},_getTargetElement:c,_getViewParent:function(e){return c(this._elems.parent,e)},_getViewElement:function(e){return c(this._elems.imageView,e)},_setViewElement:function(e){this._elems.imageView=e},_showImageVersion:function(e,t){var i=!0===this._opts.resizeView,n=this._prepareViewElement(e,t),s=n||{width:e.width,height:e.height};i&&(t=this._normilizeImageViewElem(e.type,null!==n,t)),t=this._setImageToView(e,s,t),i&&this._processViewSizes(e,s,t),this._zoomInit(t)},_zoomInit:function(e){var t=this._opts,i=t.cssSels,n=t.cssClss.ZoomSlide,s=t.zoom,o=t.attrs.zoom;if(!(!s||e.attr(o))){var r=e.closest(i.sliderItem);r.addClass(n);var a=e.parent(),l=e.width(),c=e.height();this._resetZoom(e),e.attr(o,"true"),e.height()>a.height()&&a.css(t.zoomBigImageCss),e.on("touchstart",(function(e){2===e.touches.length?(e.stopPropagation(),u.call(this,{scaling:!0,isDoubleFinger:!0,lastDist:this._getZoomDist(e)})):u.call(this,{isDoubleFinger:!1}),h.call(this).scaleSize>1&&(e.stopPropagation(),u.call(this,{isScrolling:!1}),h.call(this).scaling||u.call(this,{clientXprev:e.touches[0].clientX,clientYprev:e.touches[0].clientY}))}).bind(this)),e.on("touchmove",(function(t){var i=h.call(this);2===t.touches.length&&(t.preventDefault(),t.stopPropagation(),u.call(this,{isDoubleFinger:!0})),i.scaling&&this._pinchZoomMove(t,e,l,c,a),i.scaleSize>1&&(t.stopPropagation(),u.call(this,{isScrolling:!0}),i.scaling||u.call(this,{scrollLeft:(i.clientXprev-t.touches[0].clientX)/i.scaleSize,scrollTop:(i.clientYprev-t.touches[0].clientY)/i.scaleSize}))}).bind(this)),e.on("touchend",(function(i){var n=h.call(this);(n.isScrolling||n.isDoubleFinger)&&i.stopPropagation(),u.call(this,{scaling:!1,scrollTop:0,isScrolling:!1}),setTimeout((function(){r.hasClass(t.cssClss.ActiveSlide)||this._resetZoom(e)}).bind(this),0)}).bind(this))}},_resetZoom:function(e){u.call(this,{scaling:!1,isScrolling:!1,isDoubleFinger:!1,scaleSize:1,scrollLeft:0,scrollTop:0,clientXPrev:0,clientYPrev:0,lastDist:0}),e.css({transform:"scale(1)"})},_getZoomDist:function(e){return Math.round(Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY))},_pinchZoomMove:function(e,t,i,n,s){var o=this._opts,r=this._getZoomDist(e),a=h.call(this),l=a.scaleSize,c=o.zoomMinDeltaDist,p=o.zoomSpeed,d=o.maxZoomSize;if(Math.abs(r-a.lastDist)>c){var f=Number((r/(100*p)).toFixed(1)),_=r>a.lastDist?a.scaleSize+f:a.scaleSize-f;if(u.call(this,{scaleSize:_}),_<=1&&this._resetZoom(t),_>d&&u.call(this,{scaleSize:d}),(_=h.call(this).scaleSize)!==l){var m=(i*_-i*l)/2,g=(n*_-n*l)/2;t.css({transform:"scale("+_+")"}),s.scrollLeft((s.scrollLeft()+m)*(1+a.scrollLeft/i)),s.scrollTop((s.scrollTop()+g)*(1+a.scrollTop/n))}}u.call(this,{lastDist:r})},_switchViewState:function(e,t,i){var n=this._opts.cssClss;i=this._getViewParent(i),t=!e&&!0===t,n.Loading&&i.toggleClass(n.Loading,t),n.Error&&i.toggleClass(n.Error,e)},_onImageReady:function(e,t,i,n){this._isTargetImage(i,n)&&(this._switchViewState(!1,!1),this._showImageVersion(e.versions[n]))},_toggleImageInfo:function(e,t){var i=this._opts.cssSels.imageProps,n=this._Model.getImagePropsList(),o=this._elems.imageNum;o&&o.text(t+1),s(i,"object")&&l.call(this,i,e,n)},_toggleSetInfo:function(e,t){var i=o({total:this._Model._getSetImages(t).length},e),n=o({total:this._elems.imagesTotal},this._opts.cssSels.setProps);l.call(this,n,i)},_onImageChange:function(e,t,i){this._isTargetImage(i)&&(this._model.getImage(t,i,this._opts.imagesVersion)||this._switchViewState(!1,!0),this._toggleImageInfo(e,t))},_onImageFail:function(e,t,i){this._isTargetImage(t,i)&&this._switchViewState(!0)},_onImageClick:function(){var e=this._opts;e.useClickHandler&&(s(e.onImgClick,"function")?e.onImgClick.apply(this,arguments):(this._normalizeModelImage(),this._Model.nextImage()))},_isTargetImage:function(e,t){var i=this._imagesSet;return(null===i||e===i)&&(s(t,"undefined")||t===this._imagesVersion)},_normalizeModelImage:function(){var e=this._Model,t=e.getCurrentImage(),i=this._imagesSet;(null!==i&&t.set!=i||null===t.set)&&e.changeSet(i||0),null===t.image&&e.changeImage(0)},_createAdvertManager:function(){return null}}}(),{cssSels:{Main:{imageView:null,imageNum:null,imagesTotal:null},reloadImage:".js-photo_reload",imageProps:null,setProps:null,viewCell:".js-size-reference",sliderItem:".js-slider__item"},cssClss:{Loading:null,Error:null,ActiveSlide:"viewbox__slide_active",ZoomSlide:"viewbox__slide_zoom"},attrs:{zoom:"data-zoom"},useClickHandler:!0,onImgClick:null,infoAppend:{},resizeView:!0,imagesSet:0,imagesVersion:0,flashParams:null,zoom:!1,maxZoomSize:5,zoomSpeed:3,zoomMinDeltaDist:5,zoomBigImageCss:{alignItems:"flex-start"}},null,"ImageView"),n.Extend(!0,i,{Modules:{GalleryImageView:r}})},42926:function(){var e,t,i,n,s,o,r,a,l,c,u,h;e=window.$,t=window,s=(n=(i=window.ru.mail.cpf).Basic).typeOf,o=t.getNameSpace("Modules",i),r=e(t),a=e(t.document),l=i.Modules.GalleryImageView,c=n.moduleOpts.setParams,u="PopupGalleryView",h=n.Constructors.getView(function(){var o=["width","height"];function l(e,t){var i,n,s={};t=!0===t;for(var r=o.length;r--;)n=i=o[r],t&&(n="outer"+i.charAt(0).toUpperCase()+i.substring(1)),s[i]=e[n]();return s}function c(t,i){var s,o,r=this._opts.cssSels.sizeReference,a=this._elems,l=n.Extend({visibility:"hidden"},t),c=a.sizeReference;if(r&&!(c&&c.length)&&(c=i.parents(r).first()),c&&c.length)i.css(l);else{s=i.parents(),o=[];var u=s.filter(function(){var t="visible"!==e(this).css("overflow");return t&&o.push(this.scrollWidth-this.offsetWidth+this.scrollHeight-this.offsetHeight),t});i.css(l),c=u.filter(function(e){return o[e]<this.scrollWidth-this.offsetWidth+this.scrollHeight-this.offsetHeight}).first().children().filter(s),a.sizeReference=c}return c}function u(t){t=this._getViewElement(t);for(var i,n,u,h=this._opts.sizeLimits,p=l(r),d=l(c.call(this,p,t),!0),f={},_=o.length;_--;)u=Math["width"===(i=o[_])?"max":"min"](p[i],a[i]())-(d[i]-p[i]),n=h&&h.hasOwnProperty(i)?Math.max(n=function t(i,n){var o,r,a;switch(s(i)){case"object":a=i instanceof e;case"array":if(i.length>1)for(var l=i.length;l--;)r=t(a?i.eq(l):i[l],n),o&&o>r||(o=r);else o=a?i[n]():t(i[0],n);break;case"number":o=i;break;case"function":o=i()}return o}(h[i],i),u):u,f[i]=n;return t.css({visibility:""}),f}function p(e,t){for(var i,n=u.call(this,t),s=null,r=1,a=o.length;a--&&(i=o[a]);)r=Math.min(r,n[i]/e[i]);if(r<1)for(s={},a=o.length;a--&&(i=o[a]);)s[i]=Math.round(e[i]*r);return s}function d(e){this._elems.sizeCont&&this._elems.sizeCont.width(""),h.prototype._parent._showImageVersion.apply(this,e)}return{_Handlers:{"dom:keydown:document":function(e){var t=e.keyCode,i=this._Model;this._state.visible&&(37===t?i.prevImage():(39===t||32===t)&&i.nextImage())},model:{setchange:function(e){e.hasOwnProperty("showBanner")&&!!e.showBanner!==this._opts.showBanner&&this.addOptions({showBanner:!!e.showBanner})}}},_Events:["show","hide"],_parentElement:function(){var t=null,i=this._opts;return s(i.templates.block,"function")&&(t=e(i.templates.block.call(this,i.templatesData.block||{}))),t},_Init:function(){this._state=n.Extend(!0,this._state||{},{visible:!1}),this._popup=null,this._elems.sizeCont||!1===this._opts.setContSize||(this._elems.sizeCont=this._elems.parent)},_prepareViewElement:function(e,t){var i;return this._state.visible&&(this._hideBanner(),i=p.call(this,e,t)),i},_switchViewState:function(e,t){t=!e&&!0===t,this._state.visible&&(h.prototype._parent._switchViewState.apply(this,arguments),!1!==this._opts.usePopupLoading&&(t?this._popup.getOverlay().showLoading():this._popup.getOverlay().toggleBlock(this._elems.parent)))},_onImageReady:function(e,t,i,n){this._isTargetImage(i,n)&&(this._state.image=e.versions[n],this._state.visible&&(this._resetReadyStateFor(e.versions[this._opts.imagesVersion]),this._opts.showBanner&&this._showBanner(),h.prototype._parent._onImageReady.apply(this,arguments)))},_onImageChange:function(e,i,n){var s=!0===this._opts.showOnChange,o=this._state,r=o.visible;this._isTargetImage(n)&&(delete o.image,t.cancelAnimationFrame(o.showRequest),r?h.prototype._parent._onImageChange.apply(this,arguments):s&&this.Show())},_initPopup:function(){this._popup=i.Tools.initModule(["Popup",this._opts.popupExt],this._elems.parent,{_Handlers:{show:this._onPopupToggle.bind(this,!0),hide:this._onPopupToggle.bind(this,!1)}})},_getPopupInstance:function(){var e=this._popup;return e||(this._initPopup(),e=this._popup),e},_is._Model;s.visible=e,e?(i=(t=o.getCurrentImage()).image,n=t.set,this._toggleSetInfo(o.getSetParams(n),n),this._toggleImageInfo(o._getCurrentSetImages()[i],i),"image"in s?this._showCurrentImage():this._switchViewState(!1,!0)):this._clearImageView(),this._trigger(e?"show":"hide")},_showCurrentImage:function(){this._showImageVersion(this._state.image)},_clearImageView:function(){this._getViewElement().empty()},_showImageVersion:function(){this._state.showRequest=t.requestAnimationFrame(d.bind(this,Array.prototype.slice.call(arguments)))},_processViewSizes:function(e,t){h.prototype._parent._processViewSizes.apply(this,arguments),this._elems.sizeCont&&this._elems.sizeCont.width(t.width)},_onImageClthis.n(){vr&&e.hideBanhowBanner){var e=this._popup.getOverlay();e&&e.showBanner&&e.showBanner(this._opts.bannerId,!0)}},isVisible:function(){return!0===this._state.visible},Show:function(){this._normalizeModelImage(),this._getPopupInstance().show()},Hide:function(){this._getPopupInstance().hide()},showLoading:function(){this._getPopupInstance().getOverlay().showLoading()},addOptions:function(e){return s(e,"object")&&n.Extend(!0,this._opts,e),this}}}(),{cssSels:{sizeReference:null,Main:{sizeCont:null}},showOnChange:!1,showBanner:!0,sizeLimits:null,setContSize:!0,templates:{block:null},templatesData:{block:null},imagesVersion:1,imagesSet:null,Banner:null,bannerId:"default",usePopupLoading:!1,popupExt:"ImageView"},l,u),n.Constructors.getView({_Handlers:{"dom:click:showPopup":"_onShowClick"},_onShowClick:function(e){e.preventDefault();var t=this.getPopup();t&&t.Show()},getPopup:function(){var e=this._popupView;return e||(this._popupView=e=this._elems.Parent.data(u)),e}},{cssSels:{showPopup:".js-show_photo"}},null,"ShowGalleryPopup"),c("ShowGalleryPopup",{acceptTypes:"Gallery"}),c(u,{initializer:function(e,t,i){return new h(e,null,i)},acceptTypes:"Gallery"}),o[u]=h},68082:function(){var e,t,i,n,s,o;window.jQuery,e=window,i=(t=window.ru.mail.cpf).Basic,n=t.Modules,s="WritableGalleryPreviews",o=i.Constructors.getView(function(){function t(e){var t,i,n=this._previewsVersion,s=[];if(!isNaN(n)&&null!==n)for(var o=0;o<e.length;o++)t=e[o].versions[n],i=null,t?i=t.src:!0===this._opts.ignoreVersionMiss&&(i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),i&&s.push(i);return s}function i(i){var n=t.call(this,i),s=e.document.createElement("div");return s.innerHTML=this._opts.Templates.previews({previews:n,current:this._Model.getCurrentImage().image}),s.childNodes}function n(){var e=this._Model._getSetImages(this._imagesSet),t=this._elems,n=t.previewsCont;e&&e.length>1&&(n.html(i.call(this,e)),t.Preview=n.find(this._opts.cssSels.Main.Preview))}return{_Handlers:{model:{setchange:"_onSetChange"}},_Init:function(){var e=this._opts,t=e.imagesSet;if(this._imagesSet=t=null===t?t:1*t,this._drawnSet=t||this._Model.getCurrentImage().set,this._previewsVersion=1*e.previewsVersion,isNaN(this._imagesSet))throw TypeError('Wrong type of "imagesSet" option');n.call(this)},_onSetChange:function(e,t){var i=this._imagesSet;(null===i&&this._drawnSet!==t||i===t)&&(this._drawnSet=t,n.call(this))}}}(),{cssSels:{Main:{previewsCont:null}},previewsVersion:2,ignoreVersionMiss:!1,Templates:{previews:null}},n.GalleryPreviews,s),n[s]=o,i.moduleOpts.setParams(s,{acceptTypes:"Gallery"})},57270:function(){var e,t,i,n,s,o,r,a;e=window.$,t=window,i=window.ru.mail.cpf,n="ImageView",s=i.Basic.Constructors.addPlugin,o=i.Basic.Extend,r=i.Basic.debounce,a={cssSels:{Main:{slider:".js-image-slider"},slideContents:null},templates:{frames:i.Tools.getTemplate("ct-viewbox-slides.xml"),frameContents:i.Tools.getTemplate("ct-viewfunction n(e,t,i){this._switchViewState(!1,!1,i.all),this._showImageVersion(e.versions[t],i.contents.find(this._opts.cssSels.Main.imageView))}function s(e){e=e||this._model._getCurrentSetParams();var t=this._opts.imagesVersion;return{params:e,images:(this._model._getCurrentSetImages()||[]).map(function(e){return o({},e,{targetVersion:e.versions[t]})})}}var a=function(e){var i=t.document.createElement("div"),n=s.call(this,e);i.innerHTML=this._opts.templates.framest:[],imagesReady:{}}),this._slider.replaceFrames(i.children,0)};return{_Handlers:{model:{setchange:a,imageloaded:"_onImageLoaded",imageloading:function(e,t,i,n){var s=this._getImageFrames(t);this._isTargetImage(i,n)&&s&&this._switchViewState(!1,!0,s.all)}},dom:{"resize:window":r(function(){this._state&&(this._state.sliderSize=this._getSliderSizes())},100)}},_Init:function(){this._slider=i.Tools.initModule(["Slider",this._opts.imageSliderExt],this._elems.slider||this._elems.parent,{_Handlers:{beforeSlide:(function(e){this._advertManager&&this._advertManager.beforell,e)}).bind(this),slide:(function(e){null!=(e=this._advertManager?this._advertManager.slide(e):e)&&(this._model.changeImage(e),this._replaceImageFrames(e,null))}).bind(this),swipeEnd:(function(){this._state.sliderSwipe=!1}).bind(this),swipeStart:(function(){this._state.sliderSwipe=!0}).bind(this),slideControlTap:(function(){this._state.sliderTap=!0}).bind(this)}}),this._state=o(this._state||{},{imageFrames:[],setImages:s.call(this),sliderSwipe:!1,sliderTap:!1,sliderSize:this._getSliderSizes(),imagesReady:{}}),this._advertManager=this._createAdvertManager(),a.call(this)},_replaceImageFrames:function(e,t){var i,s,o,r=this._opts,a=this._model.getCurrentImage(),l=a.setLength,c=r.cssSels.slideContents,u=null!==e,h=r.imagesVersion;u&&(i=e-2,s=e+2);for(var p=0;p<l;p++){var d=this._getImageFrames(p),f=u&&p>=i&&p<=s||p===t;if(f){if("contents"in d){if((o=(o=this._Model.getImageParams(null,p))&&o.versions[h])&&"iframe"===o.type){var _=d.contents.find(r.cssSels.Main.imageView);_.length&&"IMG"!==_.prop("tagName")&&!_.children().length&&_.append(this._Model.getFromCache(o.src))}o=null}else d=this._getFramesWithContents(p,d)}var m=d.contents,g=d.all,v=m&&m.parent().length>0;f&&!v?(c&&(g=c.find(c)),m.each(function(e){g.eq(e).append(this)}),(o=this._model.getImage(p,a.setId,h))&&n.call(this,o,h,d)):u&&!f&&v&&m.detach()}},_getSliderSizes:function(){var e=this._elems.slider||this._elems.parent;return{width:e.width(),height:e.height()}},_getImageFrames:function(e){var t=this._state.imageFrames[e];return t||((t={frame:this._slider.getFrameByNo(e)}).clones=this._slider.getFrameClones(t.frame),t.all=t.frame.add(t.clones),this._state.imageFrames[e]=t),t},_getFramesWithContents:function(i,n){null==n&&(n=this._getImageFrames(i));var s=n.contents;if(!s){var r=this._opts.templates.frameContents,a=o({image:i},this._state.setImages),l=t.document.createElement("div");l.innerHTML=r(a),s=e(Array.from(l.childNodes)).detach();for(var c=0;c<n.all.length;c++)c>0&&(s=s.add(s.eq(0).clone()));n.contents=s}return n},_onImageClick:function(){this._state.sliderSwipe||this._super.apply(this,arguments)},_onImageLoaded:function(e,t,i,s){var o=this._model.getCurrentImage().image;if(this._isTargetImage(i,s)&&t!==o){var r=this._getFramesWithContents(t);r.contents.parent().length||this._replaceImageFrames(o,t),n.call(this,e,s,r)}},_onImageChange:function(e,t,i){var n;this._isTargetImais._getImageFrames(t),this._slider.goToFrame(n.frame))),this._super.apply(this,arguments)},_getViewElement:function(e){var t=this._slider.getCurrentFrame().find(this._opts.cssSels.Main.imageView);return this._getTargetElement(t,e)}on(e){return this._getTargetElement(this._slider.getCurrentFrame(),e)},_showImageVersion:function(e){var t=this._state.imagesReady[e.src],i=this._state.sliderSize;t&&t.height===i.height&&t.width===i.width||(this._super.apply(this,arguments),this._state.imagesReady[e.src]=o({},i))},_resetReadyStateFor:function(e){delete this._state.imagesReady[e.src]},_toggleImageInfo:function(){}}}(),a,"ImageViewSlider")},81993:function(){window.$,(0,window.ru.mail.cpf.Basic.Constructors.addPlugin)("ImageView",{_Handlers:{model:{showSplash:function(e){var t=this._slider;if(t){var i=e.imageId;i?(t.goToPage(i),t.getPagesCount()>i&&this._model.postMessage({name:"controls",value:{disable:!1}})):t.goToPage(t.getPagesCount()-1)}}}}},{},"ImageViewSliderSplash")},29752:function(){var e,t,i,n,s,o,r,a;e=window.$,t=window,s=(n=(i=window.ru.mail.cpf).Bat,a=["loadStart","loadFinish","loadError","showSplash","splash"],n.Constructors.addPlugin("Gallery",{_Handlers:{setchange:"_onSetChange"},_Init:function(){this._resetSplashFlags(),this._galleriesCache={},this._addEventTypes(a),this._Current.galleryId=this._opts.galleryId||null},setSplashUrl:function(e){this._opts.urlSplash=e,this._resetSplashFlags()},addImagesSet:function(){var e=this._super.apply(this,arguments);return -1!==e&&(this._setsParams[e].addLastFrame=!0),e},changeImage:function(e){var t,i,n=this._getCurrentSetImages();if(!n||!this._isValidId(e))return!1;var s=this._opts,o=this._Current,r=!1,a=!!s.Loop,l=this._opts.gallerySplashCount;e=+e;var c=this._getImageId(e),u=n[c];null===l?i=(t=this._showSplash&&e===n.length)||!this._showSplash&&c===n.length-1:(t=this._showSplash&&e>=n.length,i=l>0?t&&e===n.length-1+l:c===n.length-1);var h=0===c;return(r=e<=n.length+l?(t?e:c)!=o.image:a&&c!==o.image)&&(t?(o.image=e,this.getSplashData().then(this._trigger})):(o.image=c,this._trigger("imagechange",u,c,o.set),this._preloadCurImage(c,u),this._showSplash&&s.preloadSplash&&!this._splashDataPromise&&this.loadSplash().then((function(e){this._showSplash=!!e||s.showSplash}).bind(this)))),!a&&(i||h)&&this._trigger("lastimage",i,h),r},getSplashData:function(e){return this._splashDataPromise||this.loadSplash(e)},loadSplash:function(i){i=s(i,"undefined")?this._Current.galleryId:i;var n,a=this._optvar u=s(a.getUrlParams,"function")?a.getUrlParams.call(this,i):{};u=e.extend({},a.urlParamsStatic.splash||{},u),a.randomUrlParam&&(u[a.randomUrlParam]=(Math.random()+"").split(".")[1]),n=r({url:o(u,c)})}else n=Promise.resolve();return this._trigger("loadStart","splash",i),this._splashDataPromise=n.then(function(e){return l("loadFinish","splash",i),e}).then((function(e){return s(a.prepareSplashData,"function")&&(e=a.prepareSplashData.call(this,e)),e}).bind(this)).catch(function(e){t.console.error(e),l("loadError","splash",i)}),this._splashDataPromise},loadGallery:function(i){var n=this._opts,s={},a=nuCache[i]||{}).storage),s[n.urlParams.galleryId]=i,this._trigger("loadStart","gallery",i),(a?Promise.resolve(a):r({url:o(e.extend({},n.urlParamsStatic.gallery,s),n.urlGallery)}).then(function(e){return e}).catch((function(e){t.console.error(e),this._trigger("loadError","gallery",i)}).bind(this))).then((function(e){return this._onGetGalleryInfo(i,e),e}).bind(this))},_getImageId:function(e){var t,i=this._getCurrentSetImages(),n=i&&i.length-1||0;return!0===this._opts.Loop?(e%=t=n+1)<0&&(e+=t):e=Math.max(0,Math.min(e,n)),e},_onGetGalleryInfo:function(e,t){var i=this._opts,n=this._galleriesCache,o=(n[e]||{}).setId;isNaN(o)&&(s(i.prepareGalleryData,"function")&&i.prepareGalleryData.call(this,t),o=this.addImagesSet(t),n[e]={setId:o,storage:t}),this._trigger("loadFinish","gallery",o,t),this.changeSet(o)&&this.changeImage(0)},_resetSplashFlags:function(){this._showSplash=!!this._opts.urlSplash||this._opts.showSplash,this._splashDataPromise=null},_onSetChange:function(e){this._resetSplashFlags(),e.id&&(this._Current.galleryId=e.id)}},{showSplash:!1,galleryId:null,urlSplash:null,urlGallery:null,urlParams:{galleryId:"id"},urlParamsStatic:{splash:null,gallery:null},getUrlParams:null,randomUrlParam:"",useGalleriesCache:!0,preloadSplash:!1,prepareGalleryData:null,prepareSplashData:null,gallerySplashCount:null},"Ajax")},32310:function(){var e,t,i,n;e=window.jQuery||window.$,window,i=(t=window.ru.mail.cpf).Basic,n=t.Tools.Images,(0,i.Constructors.addPlugin)("ImageView",(n._addTypes({iframe:{exts:["html"],canPreload:!1}}),{_setImageToView:function(t,i,n){var s,o=this._opts;return n=this._super.apply(this,arguments),"iframe"===t.type&&((s=this._Model.getFromCache(t.src))||(s=e("<iframe />").attr(o.frameParams).attr("src",t.src),this._Model.addToCache(s,t.src)),s.css(i).appendTo(n)),n}}),{frameParams:{scrolling:"no",frameborder:0}},"Iframe")},54921:function(){var e,t,i;window.jQuery,window,t=(e=window.ru.mail.cpf).Basic,i="PopupGalleryView",t.Constructors.addPlugin(i,{_initPopup:fGalleryControls",this._opts.controlsExt],this._elems.parent,null,null,[{type:"Gallery",instance:this._model}]),this._super.apply(this,arguments)}},{controlsExt:i},"Controls")},57376:function(){!function(e,t,i){var n,s=i.Tools.initModule,o="BannerController";i.Basic.Constructors.addPlugin("PopupGalleryView",{_Init:function(){this._elems.sizeCont=null},_onImageLoaded:function(){this._state.visible&&this._super.apply(this,arguments)},_onImageChange:function(e,t,i){var n;this._isTargetImage(i)&&!this._state.visible&&this._opts.showOnChange&&(this.Show(),n=this._getImageFrames(t),this._slider.goToFrame(n.frame,!0)),this._super.apply(this,arguments)},_onPopupToggle:function(e){e&&(this._slider.update(!0,!1,!0),this._state.sliderSize=this._getSliderSizes()),this._super.apply(this,arguments),this._advertManager&&this._advertManager.reset()},_showCurrentImage:function(){var e=this._model.getCurrentImage().image;this._replaceImageFrames(e),this._slider.goToFrame(e,!0),this._super.apply(this,arguments)},_clearImageView:function(){var e,t=this._model.getCurrentImageParams();t&&(e=t.versions[this._opts.imagesVersion])&&delete this._state.imagesReady[e.src],this._super.apply(this,arguments)},_showBanner:function(){if(this._opts.showBanner){var e=this._model.getCurrentImage(),t=e&&this._getImageFrames(e.image);if(t){var i=this._model.getCurrentImageParams(),r=s(["Banner",this._opts.bannerExt],t.frame,null,null,[{instance:(n||(n=s(o)),n),type:o}]);this._resetReadyStateFor(i.versions[this._opts.imagesVersion]),r&&r.show()}}}},{usePopupLoading:!1,bannerExt:"PopupGalleryView"},"PopupImageSlider")}(window.$,window,window.ru.mail.cpf)},48851:function(){!function(e,t,i,n){"use strict";var s=i.Basic,o=s.getByPath,r=i.Tools.initModules,a=["splashShow"],l={singleSplash:"Не найден контейнер для вставки последнего, дополнительного кадра галереи",multipleSplash:"Не найден шаблонr e=this._elems.s._opts.cssSels.Main.splash)).length)return null;this._elems.splash=e}return e}s.Constructors.addPlugin("PopupGalleryView",{_Handlers:{dom:{"click:restart":"_onRestartClick","click:galleryLink":"_onGalleryLinkClick"},model:{splash:"_onSplash",loadStart:"_onLoadStart",loadFinish:"_onLoadFinish",loadError:"_onLoadError"}},_Init:function(){this._addEventTypes(a)},_onRestartClick:function(e){e.preventDefault(),this._Model.changeImage(0)},_onGalleryLinkClick:function(e){var t=e.currentTarget.getAttribute(this._opts.attrs.galleryId);t&&this._Model.loadGallery(t),e.preventDefault()},_onImageChange:function(){var e;this._state.splashActive&&(this._state.splashActive=!1,e=this._opts.cssClss,this._elems.parent.removeClass(e.showSplash+" "+e.showSplashBlock),null!==this._elems.splash&&(this._elems.splash.empty(),this._elems.splash=null)),this._super.apply(this,arguments)},_onPopupToggle:function(e){var t,i;e&&(t=this._Model).getCurrentImage().image>=(i=t._getCurrentSetImages().length)&&t.changeImage(i-1),this._super.apply(this,arguments)},_renderTemplate:function(i){var s=this._opts,a=s.attrs,u=s.cssClss,h=s.cssSels,p=this._elems.parent,d=c.call(this),f=this._slider.getCurrentFrame(),_=e(f).attr(a.splashType),m=o("_opts.templates.splash",this),g="function"==typeof m,v=g?m:m[_],y=g?i:i&&i[_];if(this._state.splashActive=!0,!v){n&&(g?t.console.error(l.singleSplash):t.console.error(l.multipleSplash+_));return}return Promise.resolve(v).then(function(i){g?d.append(i(y)):(e(h.Main.splash).not(f).addClass(u.splashLoading),e(f).html(i(y)),r(f),e(f).removeClass(u.splashLoading)),p.addClass(u.showSplash),u.showSplashBlock&&t.requestAnimationFrame(p.addClass.bind(p,u.showSplashBlock))})},_onSplash:function(e){if(this._state.visible){var t=this._opts,i=e,n=c.call(this);n&&("function"==typeof t.prepareSplashJSON&&(i=t.prepareSplashJSON(i)),this._renderTemplate(i).then(this._trigger.bind(this,"splashShow",n,!0)))}},_onLoadStart:function(){},_onLoadFinish:function(){},_onLoadError:function(){}},{cssSels:{Main:{splash:".js-splash"},restart:".js-splash__restart",galleryLink:".js-splash__item__link"},cssClss:{showSplash:"pbox_viewmore_preshown",showSplashBlock:"pbox_viewmore_shown",splashLoading:"splash_loading"},templates:{splash:null},attrs:{galleryId:"data-gallery-id",splashType:"data-splash-type"},prepareSplashJSON:null},"Splash")}(window.$,window,window.ru.mail.cpf,window.DEBUG)},6258:function(){var e,t,i,n,s;window.jQuery,e=window,i=(t=window.ru.mail.cpf).Basic,n=t.Tools.loadSlot,s=["splashBannerShow"],i.Constructors.addPlugin("PopupGalleryView",{_Handlers:{model:{loadStart:"_onLoadSplashStart",loadFinish:"_onLoadSplashFinish",loadError:"_onLoadSplashError"}},_Init:functthis._state={}),this._state.splashInited=!1,this.on("splashShow",this._onSplashShow.bind(this))},_onLoadSplashStart:function(e){if("splash"===e){var t=this._model.getCurrentImage(),i=t&&this._getImageFrames(t.image);if(i){var n=this._opts,s=n.cssSels,o=i.frame;o.is(s.splashParent)&&o.addClass(n.cssClss.Loading)}}},_onLoadSplashFinish:function(){},_onLoadSplashError:function(){},_onSplashShow:function(e,t){this._showSplashBanner(e,t)},_showSplashBanner:function(t,i){if(!this._state.splashInited||i){this._state.splashInited=!0;var s=this._opts,o=s.cssClss.Loading,r=s.attrs.slotId;return new Promise(function(e,i){var o=t.find(s.cssSels.splashSlot);o.length||i("cont");var a=o.eq(0),l=s.splashBannerParams.slotId||a.attr(r);l||i("slotId"),n({slot:l,container:a}).then(function(t){t?e():i("slotFail")},function(){i("slotFail")})}).then((function(){t.removeClass(o),this._trigger("splashBannerShow")}).bind(this),function(i){t.removeClass(o),function(t){var i;if(e.DEBUG){switch(t){case"cont":i="Не найден контейнер для слота";break;case"slotId":i="Не указан ID для слота для слота";break;case"slotFail":i="Не удалось получить данные из слота";break;default:i=t}e.console.warn(i)}}(i)})}}},{cssSels:{splashParent:".js-splash",splashSlot:".js-splash_slot"},attrs:{slotId:"data-slot-id"},splashBannerParams:{slotId:null}},"SplashBanner")},70502:function(){var e,t,i,n,s;window.jQuery,window,e=window.ru.mail.cpf,t="PopupGalleryView",i=e.Basic.Constructors.addPlugin,n=e.Basic.debounce,s=e.Tools.initModule,i(t,function(){function e(){var e=this._model.getCurrentImage().setLength>1&&this._previews&&this._previews._Elems.Preview.length>0;this._opts.ceClass(this._opts.cssClss.hasPreviews,e):this._elems.previewsCont.toggle(e)}function t(){var e=this._Elems.previewsCont,t=this._model.getCurrentImage(),i=this._previewsSlider;if(!i&&t.setLength>1&&e&&e.length&&(this._previews=s(["WritableGalleryPreviews",this._opts.previewExt],e,null,null,[{instance:this._model,type:"Gallery"}]),i=this._previewsSlider=s(["Slider",this._opts.previewSliderExt],e))){var o=n(i.update.bind(i,!0,!1,!0),500);o(nload=o)})}}return{_Handlers:{model:{imagechange:function(e,t,i){var n=this._previewsSlider;this._isTargetImage(i)&&!this._setChanged&&n&&n.goToFrame(t,!this._state.visible)},setchange:function(i){this._isTargetImage(i)&&null!==this._Popup&&(this._previewsSlider?this._previewsSlider.update():t.call(this),e.call(this),this._setChanged=!0)}}},_initPopup:function(){return t.call(this),e.call(this),this._super.apply(this,arguments)},_showImageVersion:function(){this._super.apply(this,arguments),this._setChanged=!1},_processViewSizes:function(){var e=this._previewsSlider;this._super.apply(this,arguments),e&&e.update()}}}(),{cssSels:{Main:{previewsCont:null}},cssClss:{hasPreviews:null},previewSliderExt:t+"Previews",previewExt:t},"SliderPreviews")},21089:function(){var e,t,i,n;window.jQuery,e=window,i=(t=window.ru.mail.cpf).Basic,n="PopupGalleryView",i.Constructors.addPlugin(n,function(){function n(t){var n,s,o,r=this._shareButtons,a=this._opts.viewShares;r&&(n=t[a.urlProp],(s=(o=i.typeOf(n,"string")&&n.length>0)||!0!==a.hideWhenNoUrl)&&(n=o?n:e.location.href,r.updateElementsSet(this._getViewParent()||this._elems.sharesCont),r.setUrl2Share(n,{Title:t.title||t.description},!1)),this._opts.cssClss.hideShares?this._elems.sharesCont.toggleClass(this._opts.cssClss.hideShares,!s):this._elems.sharesCont.toggle(s))}return{_Handlers:{model:{imageready:function(e,t,i,s){this._isTargetImage(i,s)&&this._state.visible&&n.call(this,e)}},show:function(){n.call(this,this._model.getImageProps())}},_initPopup:function(){var e=this._elems.sharesCont;return e&&e.length&&(this._shareButtons=t.Tools.initModule(["Shares",this._opts.sharesExt],e,{getCntOnInit:!1})),this._super.apply(this,arguments)}}}(),{cssSels:{Main:{sharesCont:null}},cssClss:{hideShares:"hidden"},sharesExt:n,viewShares:{urlProp:"share_url",hideWhenNoUrl:!0}},"Shares")},92807:function(){!function(e,t){"use strict";var i=e.history,n=t.Basic,s=n.typeOf,o=e.document.title,r=e.location.href;function a(e){var t=this._trigger.bind(this);s(e,"string")&&setTimeout(function(){i.replaceState(null,o,e),t("urlchange",e)},1)}function l(e,t){var i=this._opts.urlReplace,n=e[i.urlProp],s=n&&"#"!==n?n:r;i.canReplace&&(a.call(this,s),i.changeOriginalUrl&&0===t&&(r=s))}i.replaceState&&n.Constructors.addPlugin("PopupGalleryView",{_Events:["urlchange"],_Handlers:{model:{imagechange:function(e,t,i){this._isTargetImage(i)&&this._state.visible&&l.call(this,e,i)}},hide:function(){this._opts.urlReplace.canReplace&&a.call(this,r)},show:function(){this._opts.urlReplace.canReplace&&l.call(this,this._Model.getImageProps(),0)}}},{urlReplace:{urlProp:"share_url",canReplace:!0,changeOriginalUrl:!1}},"UrlReplace")}(window,window.ru.mail.cpf)},34880:function(){!function(e,t,i){"use strict";var n=i.Basic,s=n.getOptions,o=n.Extend,r=t.Modernizr,a=r.touch||r.touchevents,l=r.csstransforms3d,c=t.navigator.userAgent.toLowerCase(),u=".js-slot-parallax",h=e(u),p=e(t),d=!1,f=i.Modules.ParallaxBlock,_=i.Tools.PubSub;function m(i){if(!d){d=!0,i=n.typeOf(i,"boolean")?i:null;var r=o(!0,n.moduleOpts.getParams("ParallaxBlock")||{},{isTouchDevice:i});h.each(function(t,i){new f(o(!0,{},r,(s(i)||{}).parallaxOpts),e(i))}),l||-1!==c.indexOf("firefox")||t.promisifiedDomEvents.ready.then(function(){var n,s;(n=-1==navigator.userAgent.toLowerCase().indexOf("webkit")?"html":"body",(s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(s[2],10)>=61&&(n="html"),e(n)).smoothWheel({isTouchDevice:i,globalState:t.getNameSpace("ru.mail.auto").State||null})})}}h.length&&(l&&!a?m(!1):(i.Tools.checkDeviceType().then(function(e){m(a="tablet"==e)}),p.one("touchstart",m))),_&&_.subscribe("adqSlotAdded",function(t){e("["+t.data.idAttribute+'="'+t.data.id+'"]').find(u).length&&!d&&(d=!0,i.Tools.initModules(e(u),{cssSels:{module:u}}))})}(window.jQuery,window,window.ru.mail.cpf)},5328:function(){!function(e,t,i){"use strict";var n=i.Basic,s=n.typeOf,o=e(t),r=t.skrollr,a=t.Modernizr,l=a.touch||a.touchevents,c=a.csstransforms3d,u=/ipad|iphone|ipod/i.test(navigator.userAgent),h=t.requestAnimationFrame;function p(e,t){var i="top:"+e+"px;";return t&&(i+="left:"+t+"px;"),i}function d(t){var i=this._Elems.Parent,n=this._opts.Attrs,s=n.positionBottom,r=n.positionTop,a=i.offset().top,u=i.width(),h=i.height(),d=o.height(),f=e(document).height();this._layers.forEach(function(e){var t,i,n=e.layer,o=0;e.height=t=n.outerHeight(),e.width=i=n.outerWidth(),e.isCentered&&(o=Math.round((u-i)/2)),c||l?n.css("left",o):n.attr(s,p(h-t,o)).attr(r,p(0,o))}),this.bounds.min=Math.max(a-d,0),this.bounds.max=Math.min(a+h,Math.max(f-d,0)),this.bounds.range=this.bounds.max-this.bounds.min,c||!1===t||l||this._skrollr.refresh()}function f(){var e=this._opts.idPrefix+(Math.random()+"").replace(".","");return this._Elems.Parent.prop("id",e),"#"+e}function _(e,t){var i=o.scrollTop()+(isNaN(t)?0:t),n=this._opts.isSameScrollDirection?i-this.bounds.min:this.bounds.max-i,s=this.bounds.range&&n/this.bounds.range;s>=0&&s<=1&&s!==this.bounds.k&&(this._Elems.scrollCont.scrollTop(this._si(1-s)*100),this.bounds.k=s),isNaN(t)&&h(_.bind(this))}function m(e){var t,i=this._customLayers,n=i.length;if(n)for(var s=0;s<n;s++)(t=i[s]).handler&&t.handler.call(this,t.element,e,t.data)}var g=n.Constructors.getView({_Init:function(){var n=this,a=this._opts,h=this._Elems,p=a.Attrs,g=h.Parent,v=p.layerIndex,y=p.anchorTarget,w=p.layerCentered,b=p.scrollHandler,T=g.prop("id"),C=T?"#"+T:f.call(this),S=[],E=[],P=i.Tools.Images.preloadImage,I=d.bind(this),O=Array.from(g.find("img")).map(function(e){return P(e.src)});l=s(a.isTouchDevice,"boolean")?a.isTouchDevice:l,h.layer.each(function(t,i){S.push({layer:e(i),isCentered:!!i.getAttribute(w)}),i.setAttribute(y,C),i.setAttribute(v,t)}),h.customLayer&&h.customLayer.each(function(e,t){var i=t.getAttribute(b),n=i&&a.scrollHandlers[i];n&&E.push({element:t,data:{},handler:n})}),this._layers=S,this._customLayers=E,this._sizes={},this.bounds={},Promise.all(O).then(function(){var i,s=0,p=e(document),d=a.mouseWheelLimit;if(I(!1),c&&!u)h.baseLayer.each(function(){s=Math.max(s,this.offsetHeight)}),n._sizes.maxScroll=s-h.Parent.height(),_.call(n),p.on("mousewheel",function(e){var t,s=e.originalEvent,r=s.deltaY;isNaN(r)&&(i?r=-(s.wheelDelta/120)*i:(t=o.scrollTop(),p.one("scroll",function(){i=Math.abs(o.scrollTop()-t)}),r=-s.wheelDelta)),Math.abs(r)>d&&_.call(n,null,r)});else if(l)g.addClass(a.cssClss.touchDevice);else{var f=r.get(),v=a.skrollrOpts;n._customLayers.length&&(v.beforerender=function(e){var t,i=n.bounds,s=e.curTop;s>i.min&&s<i.max&&(t=100*(s-i.min)/i.range,m.call(n,t))}),f?f.refresh():f=r.init(v),n._skrollr=f}o.on("resize",t.requestAnimationFrame.bind(null,I)).on("load",I),a.heightChangeEvent&&p.on(a.heightChangeEvent,I)},function(){})}},{cssSels:{Main:{layer:".js-parallax__layer",customLayer:".js-parallax__custom",baseLayer:".js-parallax__layer_base",scrollCont:".js-parallax__scroll"}},cssClss:{touchDevice:"p-parallax_touch"},Attrs:{anchorTarget:"data-anchor-target",layerIndex:"data-layer-index",layerCentered:"data-layer-centered",positionTop:"data-top-bottom",positionBottom:"data-bottom-top",scrollHandler:"data-scroll-handler"},scrollHandlers:{},idPrefix:"parallaxBlock_",onBeforeRefresh:null,isTouchDevice:null,isSameScrollDirection:!1,heightChangeEvent:"documentHeightChange",mouseWheelLimit:60,skrollrOpts:{forceHeight:!1,smoothScrolling:!1}},null,"ParallaxBlock");t.getNameSpace(".ParallaxBlock=function(i){return t.DEBUG&&t.console.warn("Обнаружено старое подключение компонента.				Необходимо срочно сменить его на обычное, так как скоро старое перестанет работать"),this.each(function(){new g(i,e(this))})},n.moduleOpts.setParams("ParallaxBlock.Autoinit",{initializer:function(e,t){e.isTouchDevice.then(function(e){new g({isTouchDevice:e},t)})},options:{isTouchDevice:new Promise(function(e){e((!t.Modernizr.csstransforms3d||!!l)&&i.Tools.checkDeviceType().then(function(e){return"tablet"===e}))})}})}(window.jQuery,window,window.ru.mail.cpf)},60001:function(){var e,t,i,n,s,o;e=window,n=(i=(t=window.ru.mail.cpf).Basic).Extend,s=i.typeOf,o=i.Constructors.getModel(function(){function e(e){var t={};for(var i in Oon(e){var i=e.split("."),n=i[0],s=i[1]+"."+i[2];t[s]=t[s]||[],t[s].push(n)}),t)t.hasOwnProperty(i)&&(t[i]=t[i].join("."));return t}function t(e,t){var i,s=null;if(e){for(var o in e.data)if(e.data.hasOwnProperty(o)&&["event","place","review","person"].indexOf(o)>-1){for(var r in e.data[o])if(e.data[o].hasOwnProperty(r))for(var a in e.data[o][r])e.data[o][r].hasOwnProperty(a)&&(i="like"===a?"1"==e.data[o][r][a].is_plus?1:2:e.data[o][r][a].score,s=r+"."+o+"."+a,this._scores[s]={score:i})}}t&&(this._scores=n(t,this._scores))}return{_Events:["beforeRestore","beforeRate","restore","rate"],_Init:function(){this._scores={}},getScores:function(i,s){var o=this,r={},a={},l=n(!0,{},i);return Object.keys(this._scores).length&&!0!==s?Promise.resolve(this._scores):(Object.keys(l).forEach(function(e){void 0!==o._scores[e]?(a[e]=o._scores[e],delete l[e]):o._scores[e]=null}),0===Object.keys(l).length)?Promise.resolve(this._scl(this,l),o._opts.transport({data:r,dataType:"json",type:o._opts.requestMethod,url:o._opts.restoreUrl}).then(function(e){return o._trigger("restore",e),t.call(o,e,a),o._scores}).catch(function(e){}))},setScore:function(t,i){var o=this,r={},a={},l=o._opts.prepareResponseData;a[t]=null,r=e.call(this,a);var c="like"===t.split(".")[2]?{is_plus:i%2}:{score:i};return r=n(!0,r,c),o._trigger("beforeRate",r),o._opts.transport({data:r,dataType:"json",type:o._opts.requestMethod,url:o._opts.rateUrl,secure:!0},!0).then(function(e){return o._scores[t]=c,s(l,"function")&&(e=l.call(o,e)),o._trigger("rate",e),e}).catch(function(e){})}}}(),{rateUrl:"/ext/adm/add/",restoreUrl:"/ext/adm/",transport:null,requestMethod:"GET",prepareResponseData:null},null,"Rating"),n(e.getNameSpace("Modules",t),{Rating:o})},60949:function(){var e,t,i,n,s,o;e=window.jQuery||window.$,t=window,i=window.ru.mail.cpf,n="RatingView",s=i.Basic.Extend,o=(0,i.Basic.getView)(function(){function t(e){var t=this._opts.attrs;return e.getAttribute(t.entityId)+"."+e.getAttribute(t.entityType)+"."+e.getAttribute(t.ratingType)}return{_Handlers:{dom:{"click:star":"_onRateControlClick"},model:{}}s._opts.isRestoreScores&&this.restoreScores()},_onRateControlClick:function(i){i.preventDefault();var n=e(i.currentTarget),s=this._opts,o=s.cssSels,r=s.cssClss,a=n.parents(o.Main.container),l=t.call(this,a.get(0)),c=a.find(o.star),u=c.index(n)+1;this.setScore(l,u).then(function(e){var t=l.split(".")[2],i=a.find(o.votesNumber);a.addClass(r.status.success),c.removeClass(r.curScore),c.eq(u-1).addClass(r.curScore),a.find(o.value).html(u),e&&e.data&&(i.length&&i.html(e.data.count),"like"===t&&+e.data.total>0&&(e.data.total="+"+e.data.total),a.find(o.averageValue).html(e.data.total))},function(){a.addClass(r.status.fail)})},restoreScores:function(i){var n=this._opts.cssSels,s=this._opts.cssClss,o=this._elems,r=this;o.container&&(i&&(o.container=o.parent.find(n.Main.container)),o.container.each(function(e,i){var n=t.call(r,i);r._ratings[n]=i}),this.getScores(this._ratings,i).then(function(t){var i;for(var o in t)t[o]&&((i=e(r._ratings[o])).find(n.star).removeClass(s.curScore),i.find(n.star).eq(t[o].score-1).addClass(s.curScore),i.addClass(s.status.success),i.find(n.value).html(t[o].score))}))}}}(),{cssSels:{Main:{container:".js-rating__container"},value:".js-rating__value",star:".js-rating__star",votesNumber:".js-rating__votes--value"},cssClss:{curScore:null,status:{success:null,fail:null,already_voted:null}},attrs:{entityId:"data-entity-id",entityType:"data-entity-type",ratingType:"data-rating-type"},isRestoreScores:!1},i.Modules.Rating,ery",i),{RatingView:o}),e.fn.initRating=function(i){return t.DEBUG&&t.console.warn("Обнаружено старое подключение компонента.				Необходимо срочно сменить его на обычное, так как скоро старое перестанет работать"),this.each();t.data(n) instanceof o||t.data(n,new o(i,null,t))})},t.promisifiedDomEvents.ready.then(function(){e(".js-rating").initRating()})},27674:function(){!function(e,t,i){"use strict";var n=i.Tools.Auth.onGetStatus,s=i.Tools.jQuery.showLoginPopup;i.Basic.Constructors.addPlugin("RatingView",{restoreScores:function(){var e=arguments,t=this._super;n((function(i){i&&t.apply(this,e)}).bind(this))},_onRateControlClick:function(){var e=arguments,t=this._super;n((function(i){i?t.apply(this,e):s()}).bind(this))}},{},"ratingViewAuth")}(window.jQuery||window.$,window,window.ru.mail.cpf)},19367:function(e,t,i){var n=i(64836)(i(10434));!function(e,t,i){"use strict";var s="Banner",o=i.Basic,r=o.Extend,a=o.typeOf,l={};function c(){return!0}var u=function(){var e={};function t(){for(var e="m()).toString(36);return e}return function(){for(var i=t();e[i];)i=t();return e[i]=!0,i}}(),h=function(e){var t,i=this._opts.cssClss,n=!0,s="";if(this._state.stateName!==e){switch(e){case"load":t="loading",s=i.loading;break;case"show":t="show",s=i.show;break;case"fail":t="loadFail",s=i.loadFail;break;case"hide":t="hide";break;default:n=!1}n&&(this._state.stateName=e,this._elems.parent.removeClass([i.show,i.loading,i.loadFail].join(" ")).addClass(s),this._trigger(t,{type:t}))}},p=function(){var e=this._state,t=e.loadPromise;return h.call(this,"load"),t||(t=i.Tools.loadSlot(f.call(this)).then(function(){e.loaded=!0}),_.call(this)),t},d=function(){var e=this.once;return new Promise(f"loadFail",i)})},f=function(){var e,t,s,o=this._opts,l=(t=o.bannerModuleName.split("."),s="",t.forEach(function(t){t=s+t,e=r(!0,e||{},i.Basic.moduleOpts.get(t)),s=t+"."}),e),c=o.bannerParams,u=r({},l.slot,c.slot),h=u.params||{},p=Object.keys(u).reduce(function(e,t){var i=u[t];return a(i,"object")||a(i,"function")||(e[t]=i||""),e},{});return{slot:c.id,failTimeout:l.failTimeout,blockSel:"#"+this._state.id,slotParams:(0,n.default)({},p,{sz:u.sitezone||"",params:h}),dwhLogger:l.dwhLogger,mimic:l.mimic,afterRenderPromise:d.bind(this)}},_=function(){var e=this._state,t=l[e.cacheId];t|learTimeout(t.timeout),t.canReload=!1,t.timeout=setTimeout(function(){t.canReload=!0},this._opts.migetViefunction(){var e=this._opts,t={loaded:!1,canReload:!0,id:u()};e.continuousMode&&(t.cacheId=function(e){if(a(e,"string"))return e;var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=e[i]);return t}(e.bannerParams)),this._state=t,this._elems.container.prop("id",t.id),e.showOnInit&&this.show()},show:function(){if(!this.canShow()){this._opts.reloadOnRerun&&this.hide();return}var e=h.bind(this),t=this._state;t.loaded?this._opts.reloadOnRerun?this.reload():e("show"):p.call(this).then(function(){e(t.loaded?"show":"hide")},function(){e("fail")})},reload:function(){var e=this._state;e.loaded=!1,e.loadPromise=null,this.hide(),this.show()},hide:function(){h.call(this,"hide")},clear:function(){this._elems.container.children().detach()},canShow:function(){return!!this.hasPlaceForBanner()&&(!!this._state.loaded||!this._opts.continuousMode||this.canReload())},canReload:function(){return!this._opts.continuousMode||!l[this._state.cacheId]||l[this._state.cacheId].canReloadopts.hasPlaceForBanner;return a(e,"function")||(e=c),e.call(this)}},{cssSels:{Main:{container:".js-popup_banner"}},cssiewbox__slide_side_show",loading:"viewbox__slide_side_loading",loadFail:""},bannerParams:{},bannerModuleName:"Slot",hasPlaceForBanner:c,minReloadDelay:1e3,showOnInit:!1,reloadOnRerun:!0,continuousMode:!0},null,s);t.getNameSpace("Modules",i)[s]=m}(window.jQuery,window,window.ru.mail.cpf)},46482:function(){var e,t,i,n,s,o,r,a,l,c,u,h,p,d,f;window.jQuery,e=window,t=window.ru.mail.cpf,i="Suggest",n=t.Basic,s=t.Tools.transport,o=n.typeOf,r=n.Extend,a=n.Constructors.getModel,(l={})[i]=a((c=function(e){return o(this._State.enteredTerms[e.id],"undefined")},u=function(e){return e.filter(c.bind(this))},h=function(e){var t,i=this._State.dict,n=this.getCurString();i[n]=e,t=u.call(this,i[n]),this._trigger("getList",t)},p=function(){},d=function(){var e,t=this.getCurString(),i=this._State,n=i.dict,s=i.transportParamsDidUpdate;o(n[t],"array")&&!s?(e=u.call(this,n[t]),this._trigger("getList",e)):(s&&(n={}),s=!1,this._opts.transport.call(this,t,i.transportParams).then(h.bind(this),p.bind(this)))},f=function(e,t){var i={action:e||"",termtCurString(),s:["getList","urString:"",transpo.findTerm(this._State.dict[this._State.curString],e,this.getCurString())},setTermById:function(e){this._State.ennction(e){var t=this.getTermById(e);this._State.enteredTerms[t.id])},removeTerm:function(e){f.call(this,"remove",{term:this._State.enteredTerms[e]}),delete this._State.enteredTerms[e]},clearTerms:function(e){this._State.enteredTerms={},e||f.call(this,"clear")},getCurString:function(){return this._State.curString},setCurString:function(e){this._State.curString=e,d.call(this)},getTermsCount:function(){return Object.keys(this._State.enteredTerms).length},setTransportParams:function(e){this._State.transportParams=e,this._State.transportParamsDidUpdate=!0}}),{transport:function(e,t){var i=this._opts.url,n=e.trim();return n.length>2?s({url:i,data:r({},t,{q:n})}).then(function(e){return e.items||[]}):Promise.resolve([])},findTerm:function(e,t){return(e||[]).filter(function(e){return e.id===t})[0]},addParams:null,url:null},null,i),r(e.getNameSpace("Modules",t),l)},6042:function(){var e,t,i,n,s,o,r,a,l,c,u,h,p,d,f,_,m,g,v,y,w,b,T,C;e=window.jQuery||window.$,t=window,i=window.ru.mail.cpf,n="SuggestView",s={UP:38,DOWN:40,ENTER:13,ESC:27},r=(o=i.Basic).typeOf,a=o.Extend,l=o.Constructors.getView,c=o.moduleOpts.setParams,u=o.debounce,(h={})[n]=l((p=0,d=u(function(){var e=this._elems.input.val();e!==this._Model.getCurString()&&(this._state.lastSelected=-1),this._Model.setCurString(e)},500),f=function(i){this._elems.suggested.hide(),this._state.suggestedShown=!1,i&&this._elems.input.val(this.ff("click."+this._state.uid)},_=function(e){var t,i=this._state.lastSelected;this._state.suggestedShown?(i=(i+1+e+(t=this._elems.suggestedItem.length+1))%t-1,m.call(this,i,!0)):d.call(this)},m=function(t,i){var n,s,o;this._elems.suggestedItem.removeClass(this._opts.cssClss.itemActive),-1===t?s=this._Model.getCurString():((n=e(this._elems.suggestedItem[t])).addClass(this._opts.cssClss.itemActive),o=n.attr(this._opts.attrs.termId),s=this._opts.getValueForInput(this._Model.getTermById(o))),this._state.lastSelected=t,i&&this._elems.input.val(s)},g=function(){var t,i=this._elems.input,n=this._elems.inputWrap,s=this._elems.Parent.find(this._opts.cssSels.enteredItem),o=0;s&&s.length&&s.each(function(){o+=e(this).outerWidth(!0)}),n&&n.length&&(t=Math.max(n.width()-o,100),i.width(t))},v=function(e){var t=this._elems.input,i=this._opts.placeholder||t[0].placeholder;this._elems.Parent.toggleClass(this._opts.cssClss.empty,e),t.attr("placeholder",e?i:"")},y=function(){var e=this._elems.hiddenInput;return e||(e=this._elems.parent.find(this._opts.cssSels.hiddenInput)),e},w=function(e,t){var i;this._opts.useHiddenField?(i=y.call(this),this._opts.updateHiddenInput(i.get(0),e,t)):i=this._elems.entered.find('input[type="checkbox"]').prop("checked","clear"!=t&&t),i.change()},b=function(t){var i,n,s=this._opts,o=s.templates.enteredTerm,a=this._elems.input;(t=r(t,"undefined")?this._state.lastSelected:t)>-1&&(i=e(this._elems.suggestedItem[t]).attr(s.attrs.termId),n=this._Model.getTermById(i),Promise.resolve(o).then((function(){this._elems.entered.append(o(n)),w.call(this,i,!0),s.needsInputAdjust&&g.call(this),a.focus(),a.val(""),this._Model.addTerm(i),d.call(this),v.call(this,!1)}).bind(this)))},T=function(t,i){if((i=r(i,"undefined")?this._state.lastSelected:i)>-1){t&&t.preventDefault();var n=e(this._elems.suggestedItem[i]).attr(this._opts.attrs.termId),s=this._Model.getTermById(n);this._opts.insideBlur||f.call(this),this.insideBlur=!1},{_Events:["updateList","typeInInput"],_Handlers:{dom:{"focus:Main.input":function(){var i=this._opts;if(i.scrollToFit){var n=this._elems.input.offset().top+i.scrollToFitOffset;n-50>e(t).scrollTop()&&e("html, body").animate({scrollTop:n},i.scrollToFitTime)}this._state.suggestedShown||d.call(this)},"keydown:Main.input":function(e){e.keyCode===s.ENTER&&(this._opts.isMultiple?(b.call(this),e.preventDefault()):T.call(this,e))},"keyup:Main.input":function(e){switch(e.keyCode){case s.UP:_.call(this,-1);break;case s.DOWN:_.call(this,1);break;case s.ESC:f.call(this,!0);break;default:d.call(this),this._trigger("typeInInput")}},"blur:Main.input":function(){this.insideBlur||f.call(this)},"mouseover:Main.suggestedItem":function(t){var i=e(t.target).closest(this._opts.cssSels.Main.suggestedItem),n=this._elems.suggestedItem.index(i);m.call(this,n)},"click:Main.suggestedItem":function(t){var i=e(t.target).closest(this._opts.cssSels.Main.suggestedItem),n=this._elems.suggestedIple?b.call(this,n):T.call(this,t,n)},"click:Main.removeEnteredItem":function(t){var i=e(t.target).closest(this._opts.cssSels.enteredItem),n=i.attr(this._opts.attrs.termId);this._Model.removeTerm(n),w.call(this,n,!1),i.remove(),this._opts.needsInputAdjust&&g.call(this),this._Model.getTermsCount()||(this._elems.Parent.addClass(this._opts.cssClss.empty),this._elems.input.attr("placeholder",this._opts.placeholder))},"click:Main.clearEntered":function(){this._Model.clearTerms(),w.call(this,null,"clear"),this._elems.entered.empty(),this._opts.needsInputAdjust&&g.call(this),this._elems.Parent.addClass(this._opts.cssClss.empty),this._elems.input.attr("placeholder",this._opts.placeholder)},mousedown:function(){this.insideBlur=!0}},model:{getList:function(i){var n=this._opts.templates.list,s=this._elems,o=s.suggested,r=s.suggestedRender||o;Promise.resolve(n).then((function(){i.length?(r.html(n(i)),o.show(),this._state.suggestedShown=!0,s.suggestedItem=this._elems.suggested.find(this._opts.cssSels.Main.suggestaddClass(this._ll(this),e(t.document).on("click."+this._state.uid,C.bind(this)),this._trigger("updateList",i)}).bs._opts.templates.list,"function"))throw TypeError("No template for suggested list.");if(this._opts.isMultiple&&!r(this._opts.templates.enteredTerm,"function"))throw TypeError("No template for entered term.");this._aceholder:this._elems.input.attr("placeholder")||this._opts.placeholder||"",suggestedShown:!1,lastSelected:-1},this.update()},update:function(){var e=this._Model,t=this._opts;e.clearTerms(!0),this._elems.Parent.find(this._opts.cssSels.enteredItem).map(function(){return this.getAttribute(t.attrs.termId)}).get().forEach(function(t){e.setTermById(t)}),this._opts.needsInputAdjust&&g.call(this),v.call(this,0===this._Model.getTermsCount())},hideList:function(e){return f.call(this,e),this},setState:function(e){var t=this._opts.templates.enteredTerm;if(!r(e,"array")){if(isNaN(e=parseInt(e)))return;e=[e]}return Promise.resolve(t).then((function(){e.forEach((function(e){var i=this._Model._opts.data.find(function(t){return t.id==e});this._Model._state.enteredTerms[e]=i,this._elems.entered.append(t(i)),w.call(this,e,!0)}).bind(this)),this._opts.needsInputAdjust&&g.call_Model.gesSels:{Main:{input:".js-suggest__input",inputWrap:".js-suggest__input-wrap",suggested:".js-suggest__list",suggestedItem:".js-suggest__item",suggestedRender:".js-suggest__render",entered:".js-suggest__entered-list",removeEnteredItem:".js-suggest__remove-entered-item",clearEntered:".js-suggest__clear-entered"},hiddenInput:".js-suggest__hidden-input",enteredItem:".js-suggest__entered-item",body:"body"},cssClss:{empty:"",itemActive:"",submatch:""},attrs:{termId:"data-id",termTitle:"data-title"},isMultiple:!1,useHiddenField:!1,needsInputAdjust:!0,scrollToFit:!1,scrollToFitOffset:0,scrollToFitTime:500,templates:{list:null,enteredTerm:null},getValueForInput:function(e){return e.title},onSelect:function(e){t.location=e.url||"/"},updateHiddenInput:function(e,t,i){if("clear"==i){e.value="";return}var n=e.value.split(","),s=n.indexOf(t);1==n.length&&""===n[0]&&(n=[]),i?-1==s&&n.push(t):-1!==s&&n.splice(s,1),e.value=n.join()}},null,n),c(n,{acceptTypes:"Suggest"}),a(t.getNameSpace("Modules",i),h)},38493:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};Object.definue:!0}),function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)}(i(84077),t)},47get"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},enumerable:!1,configurable:!0}),e}();t.LazyBlock=n},84077:function(e,t,i){"use strict";var n,s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<i;t++)for(var o=arguments[t],r=0,a=o.length;r<a;r++,s++)n[s]=o[r];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.LazyItem=void 0;var r=i(73751),a=i(91091),l=i(52171),c=i(20523),u=i(47231),h=i(26942),p=["ready","pending","complete","error"],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pendingAF=!1,t._immortalsLazyBlocks=[],t._lazyBlocks={},t}return s(t,e),t.prototypgetScroll;return"function"==typeof e?e(this._viewport):c.getScroll(this._viewport)},t.prototype.destroy=function(){var e=this._viewport;window.removeEventListener("scroll",this._scrollHandler),window.removeEventListener("resize",this._resizeHandler),window.removeEventListener("load",this._resizeHandler),e.removeEventListener("documentHeightChange",this._resizeHandler),e.removeEventListener("lazyItemReset",this._resizeHandler),e!==document.body&&e.removeEventListener("scroll",this._scrollHandler),clearTimeout(this._resetTimeout),delete this._resetTimeout,delete this._viewport,delete this._content,delete this._lazyElems,delete this._lazyBlocks},t.prototype.getDefaultOptions=function(){return l.getDefaultOptions.call(this)},t.prototype.getInitialState=function(){var e=h.getWinSize();return{isInitRequired:!1,viewportRect:{height:0,left:0,top:0,width:0},winHeight:e.height,winWidth:e.width}},t.prototype.init=function(){var e=this.getElements("viewport")[0]||document.body;this._viewport=e,this._content=this.getElements("coHandler=a.debounce(this._scrollHandler.bind(this),100),this._reset=a.debounce(this._reset.bind(this),100),this._resizeHandler=a.debounce(this._resizeHandler.bind(this),100),window.addEventListener("resize",this._resizeHandler),window.addEventListener("load",this._resizeHandler),window.addEventListener("scroll",this._scrollHandler),e.addEventListener("documentHeightChange",this._scrollHandler),e.addEventListener("lazyItemReset",this._resizeHandler),e!==document.body&&e.addEventListener("scroll",this._scrollHandler),this._reset()},t.prototype._scrollHandler=function(){this.getState().isInitRequired&&this._recalculateBlocks(),this._requestAF(this._checkBlocks.bind(this))},t.prototype._resizeHandler=function(){this._reset()},t.prototype._reset=function(){var e,t=this,i=this.options,n=i.triggerZone,s=h.getWinSize(),o=this._viewport===document.body?{top:0,left:0,width:s.width,height:s.height}:c.getRect(this._viewport);Object.assign(o,{scrollHeight:this._content.scrollHeight,scrollWidth:this._content.scrollWidth,triggerHeight:n*o.height,triggerWidth:n*o.width}),this.setState(function(e){return Object.assign(e,{isInitRequired:!0,viewportRect:o,winHeight:s.height,winWidth:s.width})}),this._lazyElems=this.getElements("block"),this._rawLazyBlocks=this._lazyElems.map(function(e){var n=t.options.attrs.id,s=e.getAttribute(n);if(s&&t._lazyBlocks[s])return t._lazyBlocks[s];var o=new u.LazyBlock(e,i);return s=o.id,e.setAttribute(n,s),t._lazyBlocks[s]=o,o}),(e=this._rawLazyBlocks).push.ecalculateBlocks(),window.clearTimeout(this._resetTimeout),this._resetTimeout=window.setTimeout(this._reset.bind(this),this.options.resetDelay)},t.prototype._recalculateBlocks=function(){var e=this.getState().viewportRect,t=this.getViewportScroll(),i=this._rawLazyBlocks.splice(0,50);window.clearTimeout(this._recalcTimeout),i.forEach(function(i){var n=c.getRect(i.elem),s=n.left-e.left,o=s+n.width,r=n.top-e.top,a=r+n.height;i.widthIn=s-e.width+t.left,i.widthOut=o+t.left,i.heightIn=r-e.height+t.top,i.heightOut=a+t.top,i.viewState=0,i.width=n.width,i.height=n.height}),this._rawLazyBlocks.length?this._recacalculateBlocks.bind(this),30):this.setState(function(e){return e.isInitRequired=!1,e}),this._requestAF(this._checkBlocks.bind(this))},t.prototype._checkBlocks=function(){var e=this,t=this._lazyBlocks,i=this.getState().viewportRect,n=this.getViewportScroll(),s=this._getOutdent();Object.keys(t).forEach(function(o){var r=t[o];if(e._checkBlockVisibility(r)){var a=r.widthIn-s.right,l=r.widthOut+s.left,c=r.heightIn-s.bottom,u=r.heightOut+s.top,p=n.left>=a&&n.left<=l&&n.top>=c&&n.top<=u,d=i.triggerWidth||0,f=i.triggerHeight||0,_=p||n.left+d>=a&&n.left-d<=l&&n.top+f>=c&&n.top-f<=u,m=(3&r.viewState)==3,g=(1&r.viewState)==1;if(r.viewState=p?3:_?1:0,p){if(!m){var v=r.src;e._viewportEnter(r).then(function(){return e._showCopies(v)})}r.handlingMovesInViewport&&(r.xPercent=h.calcScrollPercent(n.left,a,l),r.yPercent=h.calcScrollPercent(n.top,c,u),e._viewportMove(r))}else m&&(r.handlingMovesInViewport&&(r.xPercent=n.left<a?0:100,r.yPercent=n.top<c?0:100,e._viewportMove(r)),e._viewportLeave()),_!==g&&(_?e._triggerZoneEnter(r):e._triggerZoneLeave())}})},t.prototype._showCopies=function(e){if(e){var t=this._lazyBlocks;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n.src!==e||n.viewportEnter||this._viewportEnter(nActionPromise("init",e)),e.initBlock},t.prototype._triggerZoneEnter=function(e){var t=this;return e.triggerZoneEnter?e.triggerZoneEnter:this._initBlock(e).nter||(e.triggerZoneEnter=t._getActionPromise("triggerZoneEnter",e).catch(function(){return t._complete(e,!1,null)}),e.state=1,t._toggleState(e)),e})},t.prototype._triggerZoneLeave=function(){return Promise.resolve()},t.prototype._viewportEnter=function(e){var t=this;return e.viewportEnter?e.viewportEnter:this._triggerZoneEnter(e).then(function(i){var n=t._getActionPromise("viewportEnter",e,i);return e.viewportEnter=n,e.state=2,t._toggleState(e),n.then(function(i){return t._complete(e,!0,i)},function(){return t._complete(e,!1,null)}),n})},t.prototype._viewportMove=function(e){var t=this.options.types[e.type].viewportMove;"function"==typeof t&&t.call(this,e)},t.prototype.Promise.resolve()},t.prototype._complete=function(e,t,i){e.state=t?2:3;var n=this.options.types[e.type];if(e.isImmortal&&t){this._immortalsLazyBlocks.push(e);var s=n?n.getElement:null,o="function"==typeof s?s.call(this,i,e):null;o&&(e.elem=o)}else delete this._lazyBlocks[e.id];if(this._toggleState(e),e.elem.removeAttribute("data-mp-el"),this._checkBlockSize(e),t){var r=n?n.complete:null;"function"==typeof r&&r.call(this,e)}},t.prototype._getActionPromise=function(e,t){for(var i=this,n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var r=this.options,a=r.types[t.type][e],l=r.onBlockChange,c=Promise.resolve("function"==typeof a?a.apply(this,o([t],n)):n);return"function"==typeof l&&c.then(function(){return l.call(i,e,t)}),c},t.prototype._checkBlockVisibility=function(e){var t=this.options.checkVisibility;if("function"==typeof t){var i=t(e);return!i&&window.DEBUG&&console.log("Кастомный checkVisibility определил блок, как невидимый",e),i}var n=e.elem.offsetParent;return void 0!==n?!!n:"IMG"===e.elem.tagName||"rbslot"===e.type||!!e.width&&!!e.heunction(e){var t=this.options.cssMods;p.forEach(function(i,n){t[i]&&e.elem.classList[n===e.state?"add":"remove"](t[i])})},t.prototype._getOutdent=function(){var e,t=this.getState();if(this._viewport===document.body)e={left:0,right:0,top:0,bottom:0};else{var i=c.getRect(this._viewport);e={bottom:Math.max(0,i.top+i.height-t.winHeight),left:Math.max(0,-i.left),right:Math.max(0,i.left+i.width-t.winWidth),top:Math.max(0,-i.top)}}return e},t.prototype._checkBlockSize=function(e){var t=c.getRect(e.elem);if(t.width!==ime.r("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.oault:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.contentroll=void 0;var l=i(94660),c=i(26942),u=(n=["article__item_html","article__item_keyphrase","article__item_text"],function(e,t,i){var s=e.classList,o=e.clientHeight,r=e.parentElement,a=r?r.offsetTop+r.clientHeight-e.offsetTop:o;return{isAllowed:s.contains(t)&&n.some(function(e){return s.contains(e)}),isAllowedHeight:o>i,targetHeight:o,isAllowedBottomHeight:a>i}}),h=function(){if(!s){var e=document.createElement("div"),t=document.createElement("img"),i=t.style;i.width="0",i.height="0",i.visibility="hidden",i.position="absolute",t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.appendChild(t),s={elem:e,pixel:t}}return s},p=function(e,t){var i=e.getBoundingClientRect(),n=i.bottom,s=i.left;return n+window.scrollY<t?Promise.resolve(!1):new Promise(function(t){var i=h();d(i.elem,e),window.requestAnimationFrame(function(){var e=i.pixel.getBoundingClientRect().left;i.elem.parentNode&&i.elem.parentNode.removeChild(i.elem),t(s===e)})})},d=function(e,t){var i=t.parentNode;e&&i&&(t.nextSibling?i.insertBefore(e,t.nextSibling):i.appendChild(e))};t.contentroll={params:{checkForProperTarget:u,minPartViewPortTargetHeight:.15,selArticleItem:".article__item",template:function(e){var t="article__item article__item_alignment_left article__item_slot",i=e.id,n="";if(i){window.console.warn("mpf-component-lazy-item: Проекту лучше бы перейти на подключение ct-шаблона для контент-ролла!");var s='data-mp-el="LazyBody.block" data-lazy-block-type="cpfModules" style="visibility: hidden"',o=e.attrs&&e.attrs["data-brandsafety"];n='<div class="'+t+'"><textarea '+s+">&lt;div class=&quot;js-module&quot; data-module=&quot;SlotModel&quot; data-view=&quot;SlotView."+i+"&quot; data-id=&quot;"+i+"&quot; siteid=&quot;"+e.siteid+"&quot; sitezone=&quot;"+e.sitezone+"&quot; data-brandsafety=&quot;"+o+"&quot;&gt;&lt;/div&gt;</textarea></div>"}else if(e.targetModule){var s='data-mp-el="LazyBody.block" data-lazy-block-type="rbslotContent" data-lazy-block-target='+e.targetModule+" data-lazy-block-is-global-target="+(e.isGlobalTarget||"");n='<div class="'+t+'" '+s+"></div>"}else{var s='data-mp-el="LazyBody.block" data-lazy-block-type="rbslot" data-lazy-block-src='+e;n='<div class="'+t+'" '+s+"></div>"}return n}},init:function(e){var t,i=this,n=this.options,s=n.types.contentroll.params,u=s.selArticleItem,h=s.template,f={checkForProperTarget:s.checkForProperTarget,itemSelector:u,minPartViewPortTargetHeight:s.minPartViewPortTargetHeight},_=e.elem,m=_.getBoundingClientRect().top+_.scrollHeight/5+window.scrollY,g=_.querySelector(u),v=c.getAbsOffset(_).top,y=0,w=Promise.resolve(g);try{var b=(JSON.parse(_.getAttribute(n.attrs.json)||"{}")||{}).contentroll;t="slot"in b?b.slot:b.url,Array.isArray(t)||(t=[t])}catch(e){t=[],console.error(e)}return t.forEach(function(e,t){w=w.then(function(n){return r(i,void 0,void 0,function(){var i,s,u;return a(this,function(g){switch(g.label){case 0:if(!n)return[2,null];return[4,function(e){return r(this,void 0,void 0,function(){var t,i,n,s,o,r,l,c,u,h,d,f,_,m,g,v,y,w;return a(this,function(a){switch(a.label){case 0:t=e.bottomEdge,i=e.checkelector,s=e.minPartViewPortTargetHeight,o=e.target,r=0,l=n.slice(1),c=Math.max(document.documentElement.clientHeight,windoo,l,c-r)).isAllowed,_=d.isAllowedHeight,m=d.targetHeight,!f)return[3,5];if(!_)return[3,3];return[4,p(o,t)];case 2:if(a.sent()){if(u)return o=u,[3,7];if(!(h=o.nextElementSibling))return[3,7];if(v=(g=i(h,l,c)).isAllowed,y=g.isAllowedHeight,w=g.isAllowedBottomHeight,v){if(y)return[3,7];u=h&&!w?h:o}}return[3,4];case 3:r+=m,a.label=4;case 4:return[3,6];case 5:r=0,u=null,a.label=6;case 6:return o=h||o.ne},f))];case 1:if(!(i=g.sent()))return[2,null];return 0===y&&(y=Math.abs(v-c.getAbsOffset(i).top)),[4,Promise.resolve(h).then(function(t){return t(e)})];case 2:if(!(s=g.sent()))return[2,null];return(u=document.createElement("div")).innerHTML=s,d(u.firstChild,i),setTimeout(function(){return l.triggerCustomEvent("lazyItemReset",_,{bubbles:!0})},0),[2,i]}){return e})}}},69413:function(e,t){"use striProperty(t,"__esModule",{value:!0}),t.cpfModules=void 0;var i=window.jQuery||window.$,n=window.ru.mail.cpf.Tools.initModules,s=function(e){void 0===e&&(e=window);var t=document.createEvent("HTMLEvents");t.initEvent(e==window?"resize":"documentHeightChange",!0,!1),e.dispatchEvent(t)},o=function(e,t){var i=e.parentNode;i&&(i.insertBefore(t,e),i.removeChild(e))},r=function(e){return e.triggerZoneEnter?e.triggerZoneEnter:new Promise(function(t){var r=e.elem,a=r.parentNode,l=document.createDocumentFragment(),c=document.createElement("div");c.innerHTML="TEXTAREA"===r.nodeName&&r instanceof HTMLTextAreaElement?r.value.replace(/__text_area__/g,"textarea"):r.innerHTML,Array.prototype.slice.call(c.children).forEach(function(e){l.appennc.embed=void 0;var n=i(77596),s=function(e){var t=this.options.types.embed.options;return e.triggerZoneEnter||n.activateEmbeds([e.elem],t)[0]};t.embed={triggerZoneEnter:s,viewportEnter:s}},43438:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.img=void 0;var n=i(26942),s=function(e){return e.triggerZoneEnter?e.triggerZoneEnter:n.preloadImage(e.elem.getAttribute(this.options.attrs.src)).then(function(t){var i=e.elem;return i.src!==t.src&&(i.src=t.src),e})};t.img={triggerZoneEnter:s,viewportEnter:s}},93717:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},s=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(88152),t),s(i(90708),t),s(i(39108),t),s(i(43438),t),s(i(69413),t),s(i(90026),t),s(i(92426),t),s(i(64278),t)},90026:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.picture=void 0;var i=function(e){var t=this;return e.triggerZoneEnter?e.triggerZoneEnter:new Promise(function(i,n){for(var s=e.elem.childNodes,o=0;o<s.length;o++)!function(e){var i=s.item(e),n=["srcset"];"IMG"===i.nodeName&&n.unshift("src"),n.forEach(function(e){var n=i.getAttribute(e),s=i.getAttribute(t.options.attrs[e]);n&&n!==s&&i.setAttribute(e,s)})}(o);i(e)})};t.picture={triggerZoneEnter:i,viewportEnter:i}},92426:functiObject.defineProperty(t,"__esModule",{value:!0}),t.rbslot=void 0;var i=function(e){void 0===e&&(e={});var t=e.target,i=e.scripts;if(t&&i&&i.length){var n=document.createDocumentFragment();i.forEach(function(e){var t=document.createElement("script"),i=!1;e.src?(t.src=e.src,i=!0):"textContent"in e&&(t.textContent=e.textContent,i=!0);var s=e.parentNode;s&&s.removeChild(e),i&&(t.type="text/javascript",n.appendChild(t))}),t.appendChild(n)}};t.rbslot={triggerZoneEnter:function(e){var t=e.elem,n=t.getAttribute(this.options.attrs.src);return(n?fetch(n,{credentials:"include",mode:"cors"}).then(function(e){return e.json()}).then(function(e){void 0===e&&(e=[]);var i=e[0]&&e[0].html;if(i)return t.innerHTML=i,{scripts:Array.from(t.querySelectorAll("script")),target:t}}).then(i):Promise.resolve()).then(function(){return e})}}},64278:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rbslotContent=void 0;var i=window.jQuery||window.$,n=window.promisifiedDomEvents.loaded;t.rbslotContent={viewportEnter:function(e){var t=this;return e.viewportEnter?e.viewportEnter:new Promise(function(s,o){var r,a=e.elem,l=t.options.attrs,c=l.target,u=l.isGlobalTarget,h=a.getAttribute(c),p=a.getAttribute(u),d='.js-module[data-view*="'+h+'"]';(r=p?i(window.document).find(d):i(a).parents(d))||o(),n.then(;t&&(t.renderTo,1)?(t.renderTo(a),s(e)):o()})})}}},52171:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=void 0;var n=i(93717);t.getDefaultOptions=function(){return{attrs:{id:"data-lazy-block-id",json:"data-lazy-block-json",src:"data-lazy-block-src",srcset:"data-lazy-block-srcset",target:"data-lazy-block-target",isGlobalTarget:"data-lazy-block-is-global-target",type:"data-lazy-block-type"},cssMods:{complete:"m-lazy-item_complete",error:"m-lazy-item_error",pending:"m-lazy-item_pending"},loadCopiesForTypes:["background","img","picture"],resetDelay:3e5,triggerZone:.5,types:n}}},20523:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRect=t.setScroll=t.getScroll=void 0;var i=document.documentElement;function n(){return document.body}t.getScroll=function(e){var t={top:0,left:0};return e!==op,t.leftindow.pageYOffset||i.scrollTop||n().scrollTop,t.lrollLeft||n().scrollLeft),t},t.setScroll=function(e,t){if(e){varop=e.top),isNaN(e.left)||(t&&t!==s?t.scrollLeft=e.left:i.scrollLeft=s.scrollLeft=e.left)}},t.getRect=function(e){var t=e.getBoundingClientRect();return{height:t.height||e.offsetHeight,left:t.left,top:t.top,width:t.width||e.offsetWidth}}},26942:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsOffset=t.calcScrollPercent=t.getWinSize=t.preloadImage=void 0,t.preloadImage=function(e,t){return void 0=nction(i,n){var s,o=new Image,r=function(){delete o.onload,delete o.onerror,n()},a=function(){clearTimeout(s),i(o)};o.onload=function(){return a()},o.onerror=r,s=setTimeout(r,t),o.src=e,setTimeout(function(){o.complete&&a()},0)}):Promise.reject(TypeError("src is required"))},t.getWinSize=function(){return{height:window.innerHeight,width:window.innerWidth}},t.calcScrollPercent=function(e,t,i){return t>=i?0:Math.max(1,Math.min(Math.round(100*(e-t)/(i-t)),99))},t.getAbsOffset=function(e){for(var t=0,i=0,n=e;n&&n!==document.body;)t+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return{left:t,top:i}}},23680:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataBinder=void 0;var n=i(4661),s=i(75352),o=i(32603),r=i(14992);function a(e,t){return e.split(t).map(function(e){return e.trim()})}t.dataBinder=function(e,t){var i=new n.Collector(e,t);return function(e,t,n){t(function(){for(var t=i.group(e.$,e.alias),l=Object.keys(t),c=0;c<l.length;c++)for(var u=l[c],h=a(function(e,t){var i=RegExp(t+"\\"+o.COMPONENT_DATA_BIND_DEF_DELIMITER,"g");return e.replace(i,"")}(u,e.alias),o.COMPONENT_DATA_BIND_PROP_DELIMITER),p=0;p<h.length;p++){var d=a(h[p],o.COMPONENT_DATA_BIND_EQ),f=d[0],_=d[1];if("function"!=typeof e[_])s.print.warn("Method '"+_+"' not found in '"+e.alias+"' for key '"+u+"'");else{var m=t[u],g=e[_].bind(e)(n());m.forEach(function(e,t){return function(i){if(e in r.DOM_ELEMENT_PROPERTIES)i[e]=t;else if(e in r.DOM_ELEMENT_ATTRIBUTES)switch(r.DOM_ELEMENT_ATTRIBUTES[e]){case r.MPFAttributeType.BOOLEAN:t?i.setAt;case r.MPFAttributeType.STRING:i.setAttribute(e,t)}else i.setAttribute(e,t)}}(f,g))}}})}}},26461:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventsBinder=void 0;var n=i(32603),s=["focus","blur"];t.eventsBinder=function(e,t){var i={};return function(o){for(var r=function(e){for(var t=Object.keys(e),i={},s=0;s<t.length;s++){var o=t[s],r=o.split(n.COMPONENT_EVENT_DELIMITER),a=r[0],l=r[1];i[a]||(i[a]=[]);var c={name:l,handler:e[o]};i[a]=i[a].concat(c)}return i}(o),a=Object.keys(r),l=function(n){var o=function(i){for(var s=0,o=r[n];s<o.length;s++){var a=o[s],l=a.name,c=a.handler,u=i.target;if(null===u)return;for(var h=t(l);u!==e;){if(-1!==h.indexOf(u)){c(i);return}u=u.parentNode}}},a=-1!==s.indexOf(n);e.addEventListener(n,o,a),i[n]={unbind:function(){e.removeEventListener(n,o)}}},c=0;c<a.length;c++)l(a[c]);return function(){for(var e=Object.keys(i),t=0;t<e.length;t++){var n=e[t];i[n].unbind(),delete i[n]}}}}},55852:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},s=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(23680),t),s(i(26461),t)},79039:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var n=i(78751),s=i(75352),o=i(91912),r=i(38609),a=!1;t.init=function(e){return nei){return a?(s.print.warn("MPF is already started"),t()):(e&&r.applicationSettings.update(e),a=!0,o.resolveConfigSetters().then(function(e){var i=function(){s.print.info("MPF init. Env: production"),n.initAllComponents(document.body),t()};"loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)}))})}},20802:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var n=i(96460),s=i(32603),o=i(69014),r=0,a=function(){function e(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),this._ns=e,this._id=++r,this._options=n.deepMerge({},this.getDefaultOptions(),t),this._initialState=n.deepMerge({},this.getInitialState(),i)}return e.prototype.init=function(){},eon(){return{}},e.prototype.getInitialState=function()otype,"alias",{get:function(){var e=this.constructor;return this._alias||e.regrable:!1,configurable:!0ion(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ns",{get:functionis.alias+s.COMPONEle:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"identity",{get:function(){return""+this.ns+s.COMPONENT_NS_DELIMITER+this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.getState()},enumerable:!1,configurable:!0}),e.prototype.setState=function(e){return this._store.put(e)},e.prototype.getState=function(){return this._store.read()},e.prototype.update=function(e,t){},e.prototype.canDispatch=function(){return!o.Store.hasEntity(this.identity)},e.prototype.dispatchStore=function(e,t){this.shouldUpdate(e,t)&&this.update(e,t)},e.prototype.shouldUpdate=function(e,t){return!0},e.prototype.reset=function(){this._store.destroy(),this.dispatch(this._alias)},e.prototype.preDispatch=function(){},e.prototype.postDispatch=function(){},e.prototype.dispatch=function(e){return this.canDispatch()&&(this._alias=e,this._store=new o.Store(this.identity,this._initialState,this.dispatchStore.beDispatch(),this._function(e,t,i){"use strict";var n,s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("functio"+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModu(20802),r=i(55852),a=i(4661),l=i(75352),c=i(32603),u=i(14992);t.DOMEvent=function(e){return function(e,t,i){}},t.DOMBind=function(e,t,i){};var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._events={},t}return s(t,e),Object.defineProperty(t.prototype,"$",{get:fun'+this.identity+'" not mounted').error().str());return this._$root},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$elements",{get:function(){return this._collector.group(this.$,this.alias)},enumerable:!1,configurable:!0}),t.prototype.reset=function(){null!==this._unbindEvents&&(this._unbindEvents(),this._unbindEvents=null),e.prototype.reset.call(this)},t.prototype.getElements=function(e){return this._collector.elements(this.$,e,this.alias)},t.prototype.mount=function(e){return this._$root||(this._$root=e),this},t.prototype.preDispatch=function(){var e,t,i=this;this._collector=new a.Collector((e=this.alias,"["+u.DOM_DATA_COMPONENT_EL_ATTR+'*="'+e+c.COMPONENT_EL_DELIMITER+'"]'),u.DOM_DATA_COMPONENT_EL_ATTR);var n=r.eventsBinder(this.$,function(e){return i._collector.elements(i.$,e,i.alias)});this._unbindEvents=n(this._events),r.dataBinder((t=this.alias,"["+u.DOM_DATA_COMPONENT_BIND_ATTR+'*="'+t+c.COMPONENT_DATA_BIND_DEF_DELIMITER+'"]'),u.DOM_DATA_COMPONENT_BIND_ATTR)(this,this._store.bind.bind(this._store),this.getState.bind(this))},t.prototype.postDispatch=function(){l.print.groups("Component ("+this.identity+")",{$:[this.$,this.$elements],options:[this.options],state:[this.getState()]})},t}(o.Component);t.DOMComponent=h},31100:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};Object.defineProperty(t,"__esModule",{value:!0}),t.DOMComponent=void 0;var s=i(78689);Object.defineProperty(t,"DOMComponent",{enumerable:!0,get:function(nction(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)}(i(23061),t)},23061:function(e,t,i){"use strict";var n,s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateComponent=t.resolveTemplate=void 0;var o=i(78689),r=i(75352),a=i(38609),l={},c={getPath:function(e,t,i){return e+"/"+t+"/"+t+i},getName:function(e){return e+".xml"}};t.resolveTemplate=function(e,t){return function(){return"function"==typeof e?Promise.resolve(e):"string"==typeof e?function(e,t){var i=t||{},n=a.applicationSettings.getSatesNS,u=n.templatesExt;if(!s)throw Error(r.format('Invalid application settings: "templatesPlication settings: "templatesNS"').error().str());var h=i.getName,p=i.getPath,d="function"==typeof h?h(e):c.getName(e),f="fu(l[f])r(e,t){var i=window[o];if(i&&i[d])return e(i[d]);var n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src=f,n.addEventListener("load",function(){i&&i[d]?e(i[d]):t(Error(r.format('Unable to read template "'+d+'"').error().str()))}),n.addEventListener("error",function(){t(Error(r.format('Unable to load template from "'+d+'"').error().str()))}),document.head.appendChild(n)});return l[f]=_,_.then(function(e){return delete l[f],e})}(e,t):Promise.reject(Error(r.format("Invalid template").error().str()))}};var u=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.update=function(t,i){var n=this;e.prototype.update.call(this,t,i),(0,this.options.template)().then(function(e){var t=n.getState();n.render(e,t)}).catch(function(e){r.print.warn(e.message)})},i.prototype.render=function(e,t){var i=e(t);this.$.innerHTML=i},i.getTemplate=t.resolveTemplate,i}(o.DOMComponent);t.TemplateComponent=u},91912:function(e,t,i){"use strict";var n=function(){retfig=l,t.setConfig=function(e,t){var i=function(){r[e]=n({},t)};return a.push(i),i},t.getConfigCollapsed=function(e){for(var t=e.split(o.COMPONENT_NS_DELIMITER),i=t[0],n=t.slice(1),r={},a=0;a<n.length;a++){var c=n[a];r=s.deepMerge({},r,l(i)),i=""+i+o.COMPONENT_NS_DELIMITER+c}return s.deepMerge({},r,l(i))}},32603:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT_DATA_BIND_PROP_DELIMITER=t.COMPONENT_DATA_BIND_EQ=t.COMPONENT_DATA_BIND_DEF_DELIMITER=t.COMPONENT_EL_DELIMITER=t.COMPONENT_NS_DELIMITER=t.COMPONENT_EVENT_DELIMITER=t.COMPONENT_DELIMITER=void 0,t.COMPONENT_DELIMITER=",",t.COMPONENT_EVENT_DELIMITER=":",t.COMPONENT_NS_DELIMITER=".",t.COMPONENT_EL_DELIMITER=".",t.COMPONENT_DATA_BIND_DEF_DELIMITER="|",t.COMPONENT_DATA_BIND_EQ="=",t.COMPONENT_DATA_BIND_PROP_DELIMITER=";"},14992:function(e,t){"use strict";var i,n,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.DOM_ELEMENT_PROPERTIES=t.DOM_ELEMENT_ATTRIBUTES=t.MPFAttributeType=t.MPFProperty=t.DOM_DATA_COMPONENT_BIND_ATTR=t.DOM_DATA_COMPONENT_STATE_ATTR=t.DOM_DATA_COMPONENT_EL_ATTR=t.DOM_DATA_COMPONENT_NAME_ATTR=t.DOM_DATA_COMPONENT_SEL=void 0,t.DOM_DATA_COMPONENT_SEL="[data-mp]",t.DOM_DATA_COMPONENT_NAME_ATTR="data-mp",t.DOM_DATA_COMPONENT_EL_ATTR="data-mp-el",t.DOM_DATA_COMPONENT_STATE_ATTR="data-mp-state",t.DOM_DATA_COMPONENT_BIND_ATTR="data-mp-bind",(s=i=t.MPFProperty||(t.MPFProperty={}))[s.STRING=0]="STRING",s[s.BOOLEAN=1]="BOOLEAN",s[s.NUMERIC=2]="NUMERIC",(o=n=t.MPFAttributeType||(t.MPFAttributeType={}))[o.STRING=0]="STRING",o[o.BOOLEAN=1]="BOOLEAN",t.DOM_ELEMENT_ATTRIBUTES={required:n.BOOLEAN,checked:n.BOOLEAN,disabled:n.BOOLEAN,selected:n.BOOLEAN},t.DOM_ELEMENT_PROPERTIES={alt:i.STRING,id:ile:i.STRING,textConING,colspan:i.NUMERIC,height:i.NUMERIC,maxlength:i.NUMERIC,rowspan:i.NUMERIC,width:i.NUMERIC}},42063:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DevToolsExtension=void 0;var i="function"==typeof __REDUX_DEVTOOLS_EXTENSION__,n=function(){function e(){var e=this;this.subscriptions={},i&&(this.devTools=__REDUX_DEVTOOLS_EXTENSION__.connect(),this.devTools.subscribe(function(t){if("DISPATCH"===t.type&&"Jngth;i++){var s=n[i];e.subscriptions[s](t)}}))}return e.prototype.subscribe=function(e,t){var i="handler_"+e;this.subscriptions[i]||(this.subscriptions[i]=t)},e.prototype.send=function(e,t){i&&this.devTools&&this.devTools.send(e,t)},e.prototype.remove=function(e){delete this.subscriptions["handler_"+e]},e}();t.DevToolsExtension=n},68615:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.def){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)}(i(42063),t)},75352:function(e,t){"use strict";var i=function(e,t){for(var i=0,n=t.length,eProperty(t,"__esatDescriptor=void 0;var n=console&&console.groupCollapsed&&console.groupEnd&&console.log&&!1,s=function(){function e(e){var t=new Date;this.state={messages:e,prefix:"["+t.getHours()+":"+a(t.getMinutes())+":"+a(t.getSeconds()prototype.toArray=function(){var e=this.state;return i([e.icon,e.prefix],e.messages)},e.prototype.str=function(){return this.toArray().join(" ")},e.prototype.prefix=function(e){return this.state.prefix=e,this},e.prototype.log=function(){return this.state.icon="\uD83E\uDD16",this},e.prototype.info=function(){return this.state.icon="\uD83D\uDC81‍♂️",this},e.prototype.error=function(){return this.state.icon="\uD83D\uDCA9",this},e.prototype.warn=function(){return this.state.icon="\uD83D\uDE22",this},e.prototype.icon=function(e){return this.state.icon=e,this},e}();function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new s(e)}function r(e,t){var s;return(void 0===t&&(t=[]),n)?(s=Function.prototype.bind).call.apply(s,i([console[e],console],t)):function(){}}function a(e){return(e>9?"":"0")+e}t.FormatDescriptor=s,t.format=o,t.print={log:r("log",o().log().toArray()),info:r("info",o().info().toArray()),warn:r("warn",o().warn().toArray()),error:r("error",o().error().toArray()),groups:function(e,t){if(n){console.groupCollapsed(o(e).str());for(var i=0,s=Object.keys(t);i<s.length;i++){var r=s[i];console.groupCollapsed(r),console.log.apply(console,t[r]),console.groupEnd()}console.groupEnd()}}}},78751:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAllComponents=t.initComponents=void 0;var n=i(96460),s=i(30002),o=i(32603),r=i(14992),a=i(75352),l=i(91912);function c(e){var t=e.getAttribute(r.DOM_DATA_COMPONENT_NAME_ATTR);if(!t)return[];for(var i=t.split(o.COMPONENT_DELIMITER),c=[],u=0;u<i.length;u++){var h=function(e,t){var i,c=null!==(i=/^([\w\.]+)\s+as\s+(\w+)$/gm.exec(t))?{name:i[1].trim(),alias:i[2].trim()}:{name:t.trim(),alias:null},u=c.name.split(o.COMPONENT_NS_DELIMITER),h=u[0],p=u.slice(1),d=l.getConfigCollapsed(c.name),f=s.getComponent(h);if(void 0===f)return a.print.warn("Component '"+h+"' was not found"),null;var _=function(e){var t=function(e){var t=e.getAttribute(r.DOM_DATA_COMPONENT_STATE_ATTR)||"{}";try{return JSON.parse(t)||{}}catch(e){return a.print.warn('Unable to parse data "'+t+'"'),{}}}(e);try{e.removeAttribute(r.DOM_DATA_COMPONENT_STATE_ATTR)}catch(e){a.print.warn('Unable to remove "'+r.DOM_DATA_COMPONENT_STATE_ATTR+'" attribute from node')}return t}(e)[h]||{},m=n.deepMerge({},d.initialState,_.state),g=n.deepMerge({},d.options,_.options);return new f(p.join(o.COMPONENT_NS_DELIMITER),g,m).mount(e).dispatch(c.alias||h)}(e,i[u]);null!==h&&c.push(h)}return c}t.initComponents=c,t.initAllComponents=function(e){if(!e)throw Error("$root element not found");varNENT_SEL),i=Array.prototype.slice.call(t);e.getME_ATTR)&&i.unshift(e);for(var n=[],s=0;s<i.length;s++){var o=c(i[s]);n=n.concat(o)}return n}},38609:function(e,t,i){"use strict";var n=function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.applicationSettings=t.ApplicationSettings=void 0;var s=i(69014),o={templatesExt:".xml.js",templatesPath:"/bem",templatesNS:"fest"},r=function(){function e(){this._store=new s.Store("MPF_GLOBAL",o,this.dispatchStore.bind(this)),this._store.dispatch()}return e.prototype.dispatchStore=function(){},e.prototype.getState=function(){return this._store.read()},e.prototype.update=function(e){this._store.put(function(t){return n(n({},t),e)}),this._store.dirict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};Object.defineProperty(t,"__esModule",{value:!0}),t.initAllComponents=t.registerComponent=t.setConfig=t.init=void 0;var s=i(79039);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return s.init}});var o=i(91912);Object.defineProperty(t,"setConfig",{enumerable:!0,get:function(){return o.setConfig}});var r=i(30002);Object.defineProperty(t,"registerComponent",{enumerable:!0,get:function(){return r.registerComponent i=(e.toString().match(/function (\w*)/)||[])[1];throw Error(n.format('Static property "registryName" is not defined for component "'+i+'"').error().str())}if(t in s)throw Error(n.format("Component with name '"+t+"' is already registered").error().str());n.print.log('Registering "'+t+'"'),s[t]=e},t.getComponent=function(e){return s[e]}},99773:function(e,t,i){"use strict";var n,s=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=void 0;var o=function(e){function t(){var t=e.call(this)||this;return t.emit("ready"),t}return s(t,e),t}(i(17187).EventEmitttion(e,t,i){"use strict";var n=function(){return(n=Object.assig<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;var s=i(75352),o=i(99773),r=i(68615),a={},l=new o.Emitter;function c(e){for(var t={},i={},n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];"@"===o.charAt(0)?t[o]=e[o]:i[o]=e[o]}return{component:i,shared:t}}new r.DevToolsExtension;var u=function(){function e(e,t,i){this._id=e,this._events=[],this._EVENT_CHANGE="CHANGE:"+e,this._EVENT_INIT="INIT:"+e;var n=c(t).component;if(a[e]){s.print.warn("'"+e+,a[e]=n,l.emit(this._EVENT_INIT,a[e])}return e.hasEntity=function(e){return e in a},e.prototype.destroy=function(){var e=this;this._events.forEach(function(t){l.removeListener(e._EVENT_CHANGE,t)}),delete a[this._id]},e.prototype.dispatch=function(){l.emit(this._EVENT_CHANGE,a[this._id])},e.prototype.put=function(e){var t=this.read(),i=e(this.read()),n=c(t).component,s=c(i).component,o=Object.keys(n),r=Object.keys(s);0===o.length&&0===r.length||(a[this._id]=s,l.emit(this._EVENT_CHANGE,s,t))his._id];return n({},e)},e.prototype.bind=function(e){this._events.push(e),l.on(this._EVENT_CHANGE,e)},e}();t.Store=u},4661:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collector=void 0;var n=i(32603),s=function(){function e(e,t){this.elSel=e,this.attrSel=t}return e.prototype.getName=function(e,t){var i=e.getAttribute(this.attrSel);return"string"==typeof i&&t?i.replace(""+t+n.COMPONENT_EL_DELIMITER,""):i},e.prototype.group=function(e,t){for(var i={},n=e.querySelectorAll(this.elSel),s=Array.prototype.slice.call(n),o=0;o<s.length;o++){var r=s[o],a=this.getName(r,t);null!==a&&(i[a]||(i[a]=[]),i[a]=i[a].concat(r))}return i},e.prototype.elements=function(e,t,i){var n=this,s=e.querySelectorAll(this.elSel);return Array.prototype.slice.call(s).filter(function(e){return n.getName(e,i)===t})},e}();t.Collector=s},22095:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.classNames=function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n=[],s=0;s<t.length;s++){var o=t[s];if(o){var r=typeof o;if("string"===r||"number"===r)n.push(""+o);else if(Array.isArray(o))n=n.concat(e.apply(void 0,o));else for(var a=0,l=Object.keys(o);a<l.length;a++){var c=l[a];o[c]&&n.push(""+c)}}}return n}},87066:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={bubbles:!1,cancelable:!1,composed:!1};t.triggerCustomEvent=function(e,t,n){void 0===n&&(n={}),n=Object.assign({},i,n);try{s=new Event(e,n)}catch(t){var s,o=n.bubbles,r=n.cancelable;(s=document.createEvent("Event")).initEvent(e,o,r)}t.dispatchEvent(s)}},95840:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(22612);function s(e){return Array.from(e.elements).redr||!/^(?:checkbox|radio)$/i.test(o);if(i&&!a&&l&&!c&&u){var h=n.getValue(t);if(null===h)return e;if(Array.isArray(h)){var p=h.map(function(e){return{name:i,value:e.replace(/\r?\n/g,"\r\n")}});return e.concat(p)}return e.concat({name:i,value:(h||"").replace(/\r?\n/g,"\r\n")})}return e},[])}t.serializeArray=s,t.serializeObject=function(e){for(var t=s(e),i={},n=0;n<t.length;n++){var o=t[n];i[o.name]||(i[o.name]=[]),i[o.name]=i[o.name].concat(o.value)}return i},t.serializeStr=function(e){return s(e).map(function(e){var t=e.name,i=e.vi?"":i)}).join("&")}},94660:function(e,t,i){"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(22095)),n(i(95840)),n(i(22612)),n(i(4455)),n(i(87066))},30025:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeName=function(e,t){return!!e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}},4455:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getText=function e(t){var i,n=t.nodeType,s="",o=0;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)s+=e(t)}else if(3===n||4===n)return t.nodeValue}else for(;i=t[o++];)s+=e(i);return s},t.stripAndCollapse=function(e){return(e.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}},22612:function(e,t,i){"use strict";Object.definePr=i(30025),s=i(4455),o={option:{getVal:function(e){var t=e.getAttribute("value");return null!==t?t:s.stripAndCollapse(s.getText(e))}},select:{getVal:function(e){for(var t=[],i=e.selectedIndex,s="select-one"===e.type,o=s?i+1:e.options.length,a=i<0?o:s?i:0;a<o;a++){var l=e.options[a],c=l.selected||a===i,u=l.disabled,h=l.parentNode,p=h.disabled,d=n.isNodeName(h,"optgroup");if(c&&!u&&(!p||!d)){var f=r(l);if(s)return f;t.push(f)}}return t},setVal:function(e,t){for(var i,n=[t],s=e.options.length;s--;){var r=e.options[s];(r.selected=-1!==n.indexOf(o.option.getVal(r)))&&(i=!0)}return i||(e.selectedIndex=-1),n}}};function r(e){var t,i=o[e.nodeName.toLowerCase()];return i&&void 0!==(t=i.getVal(e))?t:"string"==typeof(t=e.value)?t.replace(/\r/g,""):null===t?void 0:t}t.getValue=r,t.setValue=function(e){throw Error("to be done")}},18349:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multi=function(e){var t={},i=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s=e.apply(void 0,i),o=t[s];if(o)return o.apply(void 0,i);nction"!=typeof e)throw Error("Not a function");var t=e.length;return function i(){for(var n,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return s.length<t?(n=i,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(void 0,s.concat(e))}):e.apply(voon(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout(n):i&&e.apply(void 0,s),n=setTimeout(function(){i||e.apply(void 0,s),n=null},t)}}},91091:function(e,t,i){"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(18349)),n(i(19513)),n(i(84977))},84977:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t){void 0===t&&(t=100);var i,n=null;return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var r=Date.now();i&&r<i+t?(null!==n&&clearTimeout(n),n=setTimeout(function(){i=r,e.apply(void 0,s)},t)):(null!==n&&(clearTimeout(n),n=null),i=r,e.apply(void 0,s))}}},96460:function(e,t,i){"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(63811)),n(i(23968))},63811:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepMerge=function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n={},s=0;s<t.length;s++){var o=t[s];if("object"==typeof o&&null!==o)for(var r=Object.keys(o),a=0;a<r.length;a++){var l=r[a],c=o[l];if(c instanceof Date){var u=new Date;u.setTime(c.getTime()),n[l]=u}else c instanceof RegExp?n[l]=new RegExp(c):Array.isArray(c)?n[l]=Array.prototype.concat.call([],c):null==c|c instanceof Promise?n[l]=c:n[l]=e(n[l],c)}}return n}},23968:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIn=function(e,t){return function t(i,n){if(0===n.length)return i!==e?i:null;var s=i[n[0]];return null==s?null:t(s,n.slice(1))}(e,t)},t.setIn=function(e,t,i){return function e(t,i,n){return 1===i.length?(t[i[0]]=n,t[i[0]]):((null===t[i[0]]||void 0===t[i[0]])&&(t[i[0]]=t[i[0]]||{}),e(t[i[0]],i.slice(1),n))}(e,t,i),e}},77844:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={loadTimeout:5e3,closestParent:null,sourceAttributeName:"data-type",useScriptsCaching:!1,checkRawItems:{soundcloud:fuernizr||"boolean"!=typeof Modernizr[e]||Modernizr[e]}},loadCheckers:{various:function(){return!0}}}},77596:function(e,t,i){var n=i(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.activateEmbeds=function(e,t){void 0===t&&(t={}),Array.isArray(e)||(e=[e]);var i=[],n=[],r=s.deepMerge(o.default,t),a=r.checkRawItems||{};return e.forEach(function(e){var t=e.getAttribute(r.sourceAttributeName)||"",o=Promise.reso(null));return}var l=document.createDocumentFragment(),c=document.createElement("div");c.innerHTML="TEXTAREA"===e.nodeName&&e ame,r={element:a,type:t}.replaceElement(e,l),window.requestAnimationFrame(function(){return s.triggerResize(l.childNodes[0])})}),window.requestAnimationFrame(l.bind(this,i)),n},t.addInitializers=function(e){void 0===e&&(e={}),Object.assign(a,e)};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=r(t);if(i&&i.has(e))return i.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,i&&i.set(e,n),n}(i(65173)),o=n(i(77844));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(r=function(e){return e?i:t})(e)}var a={instagram:function(e){"object"==typeof instgrm&&instgrm.Embeds&&instgrm.Embeds.process(e)},facebook:function(e){"object"==typeof FB&&FB.XFBML&&FB.XFBML.parse(e)},twitter:function(e){"object"==typeof twttr&&twttr.widgets&&twttr.widgets.load(e)},apester:function(){"object"==typeof APESTER&&APESTER&&APESTER.reload&&APESTER.reload()}};function l(e){if(e&&e.length){e.forEach(function(e){e in a&&a[e]()});var t=function(){return s.triggerResize()};window.requestAnimationFrame(t),setTimeout(t,2e3)}}},65173:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deepMerge=function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n={},s=0;s<t.length;s++){var o=t[s];if("object"==typeof o&&null!==o)for(var r=Object.keys(o),a=0;a<r.length;a++){var l=r[a],c=o[l];if(c instanceof Date){var u=new Date;u.setTime(c.getTime()),n[l]=u}else c instanceof RegExp?n[l]=new RegExp(c):Array.isArray(c)?n[l]=Array.prototype.concat.call([],c):null==c||"object"!=typeof c||c instanceof Promise?n[l]=c:n[l]=e(n[l],c)}}return n},t.getClosestParent=function(e,t){for(;e;){if(e.classList.contains(t))return e;if(e==document.body)break;e=e.parentNode}return null},t.isIframe=function(e){return!!e&&("IFRAME"==e.tagName||!!e.querySelector("iframe"))},t.loadScript=function(ecreateElement("script");if(s.type="text/javascript",s.onload=n,s.onerror=n,e.src){var o=e.src.split("?")[0];if(-1!==i.indexOf(o)){n();return}i.push(o),s.setAttribute("defer","defer"),s.src=o+(t?"":"?"+(Math.random()+"").split(".")[1])}else s.textContent=e.textContent;document.head.appendChild(s)})},t.replaceElement=function(e,t){var i=e.parentNode;i&&(i.insertBefore(t,e),i.removeChild(e))},t.triggerResizow);var t=document.createEvent("HTMLEvents");t.initEvent(e==window?"resize":"documentHeightChange",!0,!1),e.dispatchEvent(t)};var i=[]},94697:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=t.getCookies=t.getCookie=t.deleteCookie=void 0;var i=t.getCookies=function(){var e=document.cookie.split("; ");return new Map(e.map(function(e){var t=e.split("=");return[t[0],t[1]]}))};t.getCookie=function(e){return i().get(e)||null};var n=t.setCookie=function(e,t,i){var n=encodeURIComponent(e)+"="+encodeURIComponent(t);void 0!==i&&(i.doma,{AnalyticCounters:function(){return g},default:function(){return v}});var n=function(e,t){if(void 0===t&&(t=!1),t){console.info("Comscore:",e);return}var i=e.referrer&&encodeURIComponent(e.referrer),n=e.url&&encodeURIComponent(e.url),s=document.characterSet||"UTF-8",o="http://b";e.url&&/^https/.exec(e.url)&&(o="https://sb");var r="".concat(o,".scorecardresearch.com/b?c1=2&c2=").concat(e.id||"","&ns__t=").concat(Date.now(),"&ns_c=").concat(s,"&c7=").concat(n||"","&c9=").concat(i||"");new Image().src=r},s=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i},o=function(e,t){void 0===t&&(t=!1);var i=e.command,n=e.type,o=s(e,["command","type"]);if(t){console.info("ga: ".concat(e.type),{});return}if(void 0!==window.ga){var r=e.location||window.location.href;e.referrer&&window.ga("set","referrer",e.referrer),r&&window.ga("set","location",r),e.url&&window.ga("set","url",e.url),window.ga(void 0===i?"event":i,n,o)}},r=function(e,t){if(void 0===t&&(t=!1),t){console.info("LiRu:",e);return}var i=e.referrer&&encodeURIComponent(e.referrer),n=e.url&&encodeURIComponent(e.url),s=e.domain||"counter.yadro.ru",o="/hit";e.personal&&(o+=";".concat(e.personal));var r="//".concat(s).concat(o,"?r").concat(i||"");window.screen&&(r+=";s".concat(screen.width,"*").concat(screen.height,"*").concat(screen.colorDepth||screen.pixelDepth)),n&&(r+=";u".concat(n)),r+=";".concat(Math.random()),new Image().src=r},a=function(e,t){if(void 0===t&&(t=!1),t){console.info("RB: ".concat(e.id||e.src," ").concat(e.type||"SHOW"));return}new Image().src=e.src?e.src:"https://rs.mail.ru/".concat("click"===e.type?"sb":"d").concat(e.id||"",".gif?r=").concat(Math.round(1e11*Math.random()))},l=function(e,t){void 0===t&&(t=!1),"undefined"!=typeof window&&"navigator"in window&&t||(new Image().src=e)},c=function(e,t){if(void 0===t&&(t=!1),t){console.info("TNS options",e);return}l(e.src)},u=function(e,t){if(void 0===t&&(t=!1),t){console.info("TopMail.Ru: ".concat(e.id||""," ").concat(e.type||""," ").concat(e.goal||""," ").concat(e.params||""));return}if("undefined"!=typeof window&&void 0!==window._tmr){var i={id:e.id,params:e.params,referrer:e.referrer,start:new Date().getTime(),type:e.type,url:e.url,userid:e.userid};e.goal&&(i.goal=e.goal),window._tmr.push(i)}},h=function(e){for(var t={},i=e.length,n=0;n<i;n++){var s=e[n];t[s.nodeName]=s.nodeValue}return t},p=function(e){var t=document.createElement("div");return e=e.trim().replace("mr_counter",""),t.innerHTML="<mr_counter ".concat(e," />"),h(t.firstElementChild.attributes)},d=function(e){var t;if(e&&"string"==typeof e&&""!==e)try{t=JSON.parse(e)}catch(e){window.console.error(e)}return t},f=function(e){return"#comment"===e.nodeName&&e.nodeValue&&e.nodeValue.indexOf("mr_counter")>=0&&-1===e.nodeValue.indexOf("/mr_counter")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},_=function(e){for(var t,i=[],n=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,f,!1);t=n.nextNode();)t&&t.nodeValue&&i.push(t.nodeValue);return i},m=function(){return(m=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},g=function(){function e(e){this.params={api:e.api,counters:e.counters||{},data:e.data,debug:e.debug};var t=this.params.data;this.data={referrer:t&&t.referrer||("undefined"!=typeof document?document.URL:void 0),url:t&&t.url||("undefined"!=typeof document?location.href:void 0),userid:t&&t.userid||""}}return e.prototype.counterTrigger=function(e){var t=e.name,i=e.extendOptions,n=e.group,s=void 0===n?"common":n,o=this.params.counters;"undefined"!=typeof window&&void 0!==t&&void 0!==o&&(o.common,"string"==typeof t&&"object"==typeof o.common&&void 0!==o.common[t]&&this.triggerCounters(o.common[t],i),"common"!==s&&"string"==typeof t&&void 0!==o[s]&&"object"==typeof o[s]&&void 0!==o[s][t]&&this.triggerCounters(o[s][t],i))},e.prototype.triggerAll=function(e,t){var i,s=this;if(void 0===e&&(e=".js-counters"),"undefined"!=typeof window){var l=document.querySelectorAll(e),h=this.params.api;i=l,(l=Array.prototype.slice.call(i)).forEach(function(e){_(e).forEach(function(e){var i=p(e),l=t&&t[i.type];if(h&&h[i.type]&&"function"==typeof h[i.type]){h[i.type](m(m({},i),{type:"pageview"}),l);return}switch(i.type){case"tns":c(m({src:i.src},l),s.params.debug);break;case"googl":o(m({command:"send",location:s.data.url,referrer:s.data.referrer,type:"pageview"},l),s.params.debug);break;case"rbmail":a(m({id:i.id,src:i.src,type:"pageview"},l),s.params.debug);break;case"topmail":u(m(eferrerpe.has({},e[.params.dethisfuncnts[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}return i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(76940),i(6988),i(69082),i(70897),i(12433),i(42742),i(62017),i(45829),i(7989),i(80601),i(87258),i(19131),i(21636),i(5101),i(59017),i(70391),{}}()});
//# sourceMappingURL=page-index.js.map