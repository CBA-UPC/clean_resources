/* GptMeasurement HouseHold LegacyLayer SignalsAbs SignalsAutoInsertion SignalsBsc SignalsIds SignalsTvp SignalsVlp TimeConfig */
(()=>{var de=Object.defineProperty,Hr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptor,Wr=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var ce=E=N=i=var ke=var s=var d=var T=var zt={queueAdRequest:defineSlot:getTargeting:;var me=i(me,"Core");var Bt=me;var ue=[],pe=ue;var c=i("moduleClass"),F=i("attachModule"),y=i((o,t)=>{var e;o.executeConfig=(e=o.executeConfig)!=null?e:[],o.executeConfig.push({method:t})},"executeMethod"),p=i("pluginMethod"),vt=i("apiMethod"),Ge=i("errorMethod");var Ht=["BSC","ABS"],Be=["IDS"],wt=["VLP","TVP"],Kr=[...Ht,...Be,...wt],Ve=i(o=>Kr.includes(o.toUpperCase()),"isSignal"),je=i(o=>wt.includes(o.toUpperCase()),"isSlotSignal"),qe=i(o=>Be.includes(o.toUpperCase()),"isUserSignal"),Qe=i("isPageSignal");var fe=i(fe,"AsyncQueue");var Yt=fe;var M=i(M,"AdRequestQueue"),s([vt("queueAdRequest")],M.prototype,"_queueAdRequest",1),M=s([c],M);var Wt,Jr=new Uint8Array(16);(Se,"rng");var x=[];for(let o=0;o<256;++o)x.push((o+256).toString(16).slice(1));($e,"unsafeStringify");var Xr=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),he={randomUUID:Xr};(Zr,"v4");var Te=Zr;var ut=i("uuid");var Ee=i(Ee,"Slot");var Vt=Ee;var to={getTargeting:()=>[],setTargeting:()=>{}},R=i(R,"SlotStore"),R=s([c],R);var eo=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],ro=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],ze=i("replaceByRules"),He=i("normalizeUrl");var Ye=i("stripUrlQuery");var We=i("parseInfo"),Ke=i("parseLegacyPagetagUrl");var oo=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,b=i(b,"Context"),s([y],b.prototype,"_initialize",1),b=s([c],b);var L=i(L,"DefinedVariables"),L=s([c],L);var G=i(G,"Fetch"),G=s([c],G);var Kt=i("getPositionSuffix");var no=/^(\d+)x(\d+)$/,Je=i("stringToSlotSizes"),_e=i("slotSizesToString"),Xe=i("slotSizesToStringIfSpecific");var Ae="https://pub.doubleverify.com/dvtag/signals/",B=i(B,"SignalsUrlBuilder"),B=s([c],B);var pt=i(pt,"PageSignals"),pt=s([c],pt);var ft=i(ft,"SlotSignals"),ft=s([c],ft);var St=i(St,"UserSignals"),St=s([c],St);var _=i(_,"Signals"),s([y],_.prototype,"_initialize",1),s([p(M,"adRequestQueued")],_.prototype,"_onAdRequestQueued",1),s([p(R,"slotDiscovered")],_.prototype,"_onSlotDiscovered",1),_=s([c],_);var yt=class{_getEnabledSignals(){return"IDS"}};i(yt,"SignalsIds"),s([p(_,"getEnabledSignals")],yt.prototype,"_getEnabledSignals",1),yt=s([c],yt);var Ct=class{_getEnabledSignals(){return"BSC"}};i(Ct,"SignalsBsc"),s([p(_,"getEnabledSignals")],Ct.prototype,"_getEnabledSignals",1),Ct=s([c],Ct);var Ot=class{_getEnabledSignals(){return"VLP"}};i(Ot,"SignalsVlp"),s([p(_,"getEnabledSignals")],Ot.prototype,"_getEnabledSignals",1),Ot=s([c],Ot);var Mt=class{_getEnabledSignals(){return"TVP"}};i(Mt,"SignalsTvp"),s([p(_,"getEnabledSignals")],Mt.prototype,"_getEnabledSignals",1),Mt=s([c],Mt);var Ut=i(Ut,"SignalsAbs"),s([p(_,"getEnabledSignals")],Ut.prototype,"_getEnabledSignals",1),Ut=s([c],Ut);var Pt=i("parseSlotSizes"),Ze=i("parseSlotSize");var tr=i("getGptSlotSize");var io="dvp_spos",Jt=i("gptSlotToAdUnit");var Xt=i("gptSlotToTargetable");var V=i(V,"LegacyPq"),V=s([c],V);var A=i(A,"Environment"),A=s([c],A);var er="https://vtrk.doubleverify.com";var rr=i("randomInt");var Re="qt_loaded",or="pts_pid",nr="pts_sid",be=i(be,"QtError");var Zt=be;var ir=i("formatSlotTargetingForTracking");var sr=i("getCacheStatus");var De=i("summarizeSlotTargeting");var ht=i("timeSpan");var ve=i(ve,"PendingEvent");var te=ve;var so=5,ao=["ids","bsc","vlp"],Z=i(Z,"LegacyTracking"),Z=s([c],Z);var ar=i("parseLegacyAdUnit");var gr=i("setUserTargetingOnPts"),lr=i("setPageTargetingOnPts"),cr=i("setSlotTargetingOnPts");var go={loadSignals:"load-signals",getTargeting:"load-signals",loadSignalsForSlots:"load-signals-slots"},lo="legacy-api",dr="gpt",q=i(q,"LegacyLayer"),s([y],q.prototype,"_initialize",1),s([p(Z,"getLegacyType")],q.prototype,"_getLegacyType",1),s([p(_,"userTargetingUpdated")],q.prototype,"_setUserTargetingOnPts",1),s([p(_,"pageTargetingUpdated")],q.prototype,"_setPageTargetingOnPts",1),s([p(_,"slotTargetingUpdated")],q.prototype,"_setSlotTargetingOnPts",1),q=s([c],q);var ee="gpt",mr="gpt-slot-reference",co=["impressionViewable","slotOnload","slotVisibilityChanged","rewardedSlotGranted","rewardedSlotClosed","rewardedSlotReady","slotRequested","slotRenderEnded","slotResponseReceived"],v=i(v,"Googletag"),s([y],v.prototype,"_initialize",1),s([p(M,"adRequestQueued")],v.prototype,"_onAdRequestQueued",1),s([p(R,"slotDiscovered")],v.prototype,"_onSlotDiscovered",1),s([p(R,"slotDestroyed")],v.prototype,"_onSlotDestroyed",1),v=s([c],v);var Ie=i("getGreenlightSignal");var H=i(H,"SignalsAutoInsertion"),s([y],H.prototype,"_autoInsertPageId",1),s([p(R,"slotDiscovered")],H.prototype,"_autoInsertSlotId",1),s([p(_,"userTargetingUpdated"),p(_,"pageTargetingUpdated")],H.prototype,"_autoInsertGlobalTargeting",1),s([p(_,"slotTargetingUpdated")],H.prototype,"_autoInsertSlotTargeting",1),H=s([c,F(v)],H);var ur=["GPT_MEASUREMENT","CREATIVE_WRAPPER","MEASUREMENT_INJECTION_TIMING","MEASUREMENT_INJECTION_STRATEGY","F9_AD_LOCATORS_SEPARATE_TASKS","AD_CONTAINER_LOCATION_STRATEGY"],pr={GPT_MEASUREMENT:["off","on"],CREATIVE_WRAPPER:["off","on"],MEASUREMENT_INJECTION_TIMING:["onAdRendered","onAdLoaded (deprecated)"],MEASUREMENT_INJECTION_STRATEGY:["rootPage (deprecated)","preferPiggyback"],F9_AD_LOCATORS_SEPARATE_TASKS:["off","on"],AD_CONTAINER_LOCATION_STRATEGY:["preferGptIframe","preferGptDiv","preferGptIframeBody","preferCwSpan"]};var f=i(f,"Logging"),f=s([c],f);var ye={GPT_MEASUREMENT:"off",CREATIVE_WRAPPER:"on",MEASUREMENT_INJECTION_TIMING:"onAdRendered",MEASUREMENT_INJECTION_STRATEGY:"preferPiggyback",F9_AD_LOCATORS_SEPARATE_TASKS:"off",AD_CONTAINER_LOCATION_STRATEGY:"preferGptIframeBody"},mo={featureFlags:ye,weight:1},re={variations:[mo],adServers:{}};var O=i(O,"ConfigModule"),O=s([c],O);var uo=i("scaledRandom"),fr=i("weightedRandom");var Q=i(Q,"VariationsModule"),s([y],Q.prototype,"_initialize",1),Q=s([c],Q);var w=i(w,"FeatureFlags"),w=s([c],w);var Sr="gpt-measurement-slot-params",I=i(I,"MeasurementUrlParams"),I=s([c],I);var tt=i(tt,"BuildTracking"),s([y],tt.prototype,"_trackBuildData",1),tt=s([c],tt);var Ce=i("stateToString");var hr=i("createScriptElement");var oe=i("addElement"),Tr=i("removeElement");var jt=i("setAttributeIfDefined");var Er=i("setIframeContent"),_r=i("createIframe"),qt=i("getIframeDocument"),Lt=i("getIframeDocumentBody"),Tt=i("isCrossOriginIframe");var Oe="google_ads_iframe_",Et=i("lookupGptIframe");var et=i(et,"GoogletagIframeOnload"),s([p(v,"slotRenderEnded")],et.prototype,"_setIframeOnloadCallback",1),et=s([c],et);var rt=i(rt,"GoogletagInferredEvents"),s([p(v,"googletagSlotDiscovered")],rt.prototype,"_detectSlotEmptied",1),rt=s([c],rt);var Nt=i("getNetworkCodeFromSlot");var Ar=i("parseSlotRenderEndedEvent"),Rr=i("parseSlotResponseReceivedEvent");var po={targetingSetForSlot:"targeted",disableMeasurementForSlot:"disabled"},fo={adRequestedForSlot:"measurable"},So={measurementInjected:"measured"},ho={adRequestedForSlot:"measurable"},To={empty:po,targeted:fo,measurable:So,measured:ho,disabled:{}},ie=i("updateState"),Eo=i("transition");var Ao={adRequestedForSlot:"adRequested",newSlotDetected:"new"},Ro={adRequestedForSlot:"adRequested",adReceivedForSlot:"adPending",slotEmptied:"adRequested"},bo={adRequestedForSlot:"adRequested",adEmptyForSlot:"adEmpty",adRenderedForSlot:"adRendered",slotEmptied:"adPending"},Do={adRequestedForSlot:"adRequested",adLoadedForSlot:"adLoaded",slotEmptied:"adEmpty"},vo={adRequestedForSlot:"adRequested",slotEmptied:"adEmpty"},Io={adRequestedForSlot:"adRequested"},yo={new:Ao,adRequested:Ro,adPending:bo,adRendered:Do,adLoaded:vo,adEmpty:Io},Dr=i("transitionState"),Co=i("transition"),Oo=i("updateMeasurementState");var vr="gpt-measurement-slot-state",Ir="gpt-measurement-creative",D=i(D,"SlotStateStore"),s([p(v,"googletagSlotDiscovered")],D.prototype,"_onGoogletagSlotDiscovered",1),s([p(v,"slotRequested")],D.prototype,"_onAdRequestedForSlot",1),s([p(v,"slotResponseReceived")],D.prototype,"_onSlotResponseReceived",1),s([p(v,"slotRenderEnded")],D.prototype,"_onSlotRenderEnded",1),s([p(v,"slotOnload")],D.prototype,"_onSlotOnload",1),s([p(et,"iframeOnload")],D.prototype,"_onSlotIframeOnload",1),s([p(rt,"slotEmptied")],D.prototype,"_onSlotEmptied",1),D=s([c],D);var ot=i(ot,"DuplicateMeasurement"),s([p(D,"newSlot")],ot.prototype,"_scheduleTargetingIfNeeded",1),ot=s([c],ot);var Cr="gpt-measurement-impression-count",Or="gpt-measurement-url-params",j=i(j,"ImpressionTopology"),s([p(D,"newSlot")],j.prototype,"_onNewSlotDetected",1),s([p(D,"adRequestedForSlot")],j.prototype,"_adRequestedForSlot",1),j=s([c],j);var Mr="gptm";var Ur=i("lookupCwSpan");var _t=i(_t,"LocateCwSpan"),_t=s([c],_t);var xr=i(o=>{if(o==null)return null;let t=o.querySelectorAll(`div[id^="${Oe}"]`);return t.length===1?t[0]:null},"lookupGptDiv");var At=i(At,"LocateGptDiv"),At=s([c],At);var nt=i(nt,"LocateGptIframe"),nt=s([c],nt);var W=i(W,"SlotAdLocator"),W=s([c],W);var it=i(it,"GptmCustomContext"),s([y],it.prototype,"_trackOriginalValues",1),it=s([c],it);var wr=i("truncate");var Mo="104",Pr=i("getAdServerTracking");var Rt=i(Rt,"TargetingCustomTracking"),Rt=s([c],Rt);var bt=i(bt,"CustomMetadataTracking"),bt=s([c],bt);var Lr=i("getCwTracking");var Nr=["hb_pb","hb_adid","hb_bidder","hb_size","hb_format","hb_deal","hb_uuid","hb_cache_id","hb_cache_host","hb_cache_path","hb_source","hb_adomain","hb_env"],Uo=i("hasAtLeastOnePrebidTargetingConfigured"),Fr=i("getPrebidTracking");var kr=i("getLocatedElementTracking");var se=i("parseCreativeSize");var Gr=i("getQtTracking");var Br=i("getAsQueryString");var xo="data-dv-gptm-ad-container",wo="dv-gptm-",Ue=i("getAdContainerMarker"),Vr=i("markAdContainer");var jr=i("escapeRegExp");var Po=["embed","object","link","img","span","iframe","div","canvas","svg"],xe=i("formatForBtreg"),qr=i("getBtParamsForAdContainer");var Lo="https://cdn.doubleverify.com/dvtp_src.js",Dt=i(Dt,"MeasurementScriptTag"),Dt=s([c],Dt);var K=i(K,"MeasurementInjectionBase"),K=s([c],K);var we="gpt-measurement-iframe-element",st=i(st,"IFrameWrappedMeasurement"),st=s([c],st);var Qr=i("canPiggyBackMeasurement"),Pe=i("getGptIframe");var at=i(at,"PiggybackMeasurement"),at=s([c],at);var $r={new:0,adRequested:1,adPending:2,adEmpty:3,adRendered:4,adLoaded:5};var gt=i(gt,"VariationTracking"),s([p(Q,"variationSelected")],gt.prototype,"_trackSelectedVariation",1),gt=s([c],gt);var lt=i(lt,"GptMeasurement"),s([y],lt.prototype,"_trackActivationPath",1),s([p(D,"adRenderedForSlot")],lt.prototype,"_maybeAddMeasurementOnSlot",1),s([p(D,"adRequestedForSlot"),p(D,"adEmptyForSlot")],lt.prototype,"_maybeRemoveMeasurementOnSlot",1),lt=s([c,F(tt),F(j),F(gt),F(ot)],lt);var zr="21226187",xt=class{_provideConfig(t){return t!==zr?(this.core.get(f).error(`Invalid ctx provided for TimeConfig, got ${t}, expected ${zr}`),{}):{variations:[{featureFlags:{GPT_MEASUREMENT:"on",CREATIVE_WRAPPER:"off"},weight:1},{featureFlags:{GPT_MEASUREMENT:"off",CREATIVE_WRAPPER:"on"},weight:99}],adServers:{21801468956:{adServerId:39,customTracking:{c1:{type:"targeting",key:"type"},c2:{type:"targeting",key:"ctype"},c3:{type:"targeting",key:"primarysection"},c4:{type:"targeting",key:"sections"},c5:{type:"targeting",key:"vidonpage"},c6:{type:"targeting",key:"category"},c7:{type:"targeting",key:"aid"},c8:{type:"targeting",key:"hb_bidder"},c9:{type:"targeting",key:"LyticsSegments"},c10:{type:"targeting",key:"tags"}}}}}}};i(xt,"TimeConfig"),s([p(O,"provideConfig")],xt.prototype,"_provideConfig",1),xt=s([c],xt);var ct=i(ct,"CommandBuffer"),s([y],ct.prototype,"_initialize",1),ct=s([c],ct);var Le="api",dt=i(dt,"DefineSlot"),s([vt("defineSlot")],dt.prototype,"_defineSlot",1),dt=s([c],dt);var k={TYPE:"b1",COMMIT_HASH:"b2",ENTRY_MODULES:"b3",HOSTNAME:"b4",CTX:"b5",CMP:"b6",VISIT_ID:"b7",FEATURE_FLAGS:"b8",SAMPLE_INTERVAL:"d1",FLUSH_TO_PXSRV:"d2",_PLACEHOLDER_BLOB_9:"b9",_PLACEHOLDER_BLOB_10:"b10",_PLACEHOLDER_DOUBLE_3:"d3",_PLACEHOLDER_DOUBLE_4:"d4",_PLACEHOLDER_DOUBLE_5:"d5"},ae=N(E({},k),{LOG_LEVEL:"b11",MESSAGE:"b12",TRACE:"b13"}),ge=N(E({},k),{AD_REQUEST_STATUS:"b11",AD_REQUEST_INDEX:"d6",AD_REQUEST_DELAY:"d7"});var Fo="https://pub.doubleverify.com/dvtag/metrics/event.png",ko=1,Go=1,J=i(J,"Events"),s([p(M,"adRequestCompleted")],J.prototype,"_onAdRequestCompleted",1),s([Ge],J.prototype,"_handleError",1),J=s([c],J);var mt=i(mt,"GetTargeting"),s([vt("getTargeting")],mt.prototype,"_getTargeting",1),mt=s([c],mt);var Ft=i(Ft,"HouseHold"),Ft=s([c,F(M),F(ct),F(dt),F(mt),F(J)],Ft);if(window.dvtag==null||window.dvtag._core==null)try{new Bt(pe,window)}catch(o){}})();
