"use strict";(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[2392],{25835:function(e,t,r){r.r(t),r.d(t,{default:);var n=r(4942),a=r(15861),o=r(87757),i=r.n(o),c=r(20629),s=r(89602),u=r(63616);ar f,l={data:mounted:function(){var e=this;return(0,a.Z)(i().mark((function t(){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$store.state.user.current_companyid||(null===(r=e.$store.state.user.corp)||void 0===r?void 0:r.id),e.companyId=e.$store.state.ui.useNewLayout?n:e.$route.params.cid,t.next=4,e.getCompanyInfo();case 4:!e.$ua.wpsDocumentEmbed&&e.initExpirePkgDialog();case 5:case"end":return t.stop()}}),t)})))()},computed:{},(0,c.rn)({user:"user",team:"team",company:"company"})),watch:{"$route.params.cid":{handler:(f=(0,a.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$store.state.ui.useNewLayout||!t){e.next=5;break}return this.companyId=t,e.next=4,this.getCompanyInfo();case 4:this.initExpirePkgDialog();case 5:case"end":return e.stop()}}),e,this)}))),}},methods:{throwError:function(e,t){if(this.$message.error(e),t)throw new Error(t)},getCompanyInfo:function(){var e=this;return(0,a.Z)(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.companyId){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$store.dispatch(s.FoG,e.companyId);case 4:(r=t.sent)&&r.info&&r.info.length>0&&(e.companyInfo=r.info[0],e.$store.commit(s.Nnz,{packageType:e.companyInfo.package_type}));case 6:case"end":return t.stop()}}),t)})))()},initExpirePkgDialog:function(){var e=this;return(0,a.Z)(i().mark((function t(){var r,n,a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("POST",{url:"/gql",host:"plus",data:{query:"{\n              business {\n                GetStrategyDialog(source: Kdocs, dialogs: [".concat(["ExpirePkgKDocsDialog","ExpireConfirmDialog","ExpirePrivilegePkg","ExpiredPrivInformPkg"],"], info: { companyID: ").concat(e.companyId,", userID: ").concat(e.user.id,", pkgInfo: { isBasic: ").concat(e.companyInfo.service_is_basic," }  }) {\n                  dialog\n                  dialogData\n                }\n              }\n            }")}}).then((function(e){return e.data.data.business.GetStrategyDialog.dialog?e:null}));case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return");case 6:n=r.data.data.business.GetStrategyDialog||{},a=n.dialog,o=n.dialogData,e.showDialog(a,o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},showDialog:function(e,t){(0,u.E)(t.epMethod,t.epMethodParams)}}},d=l,g=(0,r(51900).Z)(d,(,[],!1,null,null,null).exports}}]);
