/*! License: 59484.BaXvJChEUj.js.LICENSE.txt */
(self._cf=self._cf||[]).push([[59484],{986855:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(483719),s=n(730133);t.backOff=var a=)},393785:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(86496).Delay);t.AlwaysDelay=o},86496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(871292),i=);t.Delay=i},730133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(532325),i=n(393785);t.DelayFactory=function(e,t){var n=function(e){if(!e.delayFirstAttempt)return new r.SkipFirstDelay(e);return new i.AlwaysDelay(e)}(e);return n.setAttemptNumber(t),n}},532325:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=,o=this&&this.__awaiter||s=this&&this.__generator||Object.defineProperty(t,"__esModule",{value:!0});var a=n(86496).Delay);t.SkipFirstDelay=a},892862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullJitter=,871292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(892862),i=n(552894);t.JitterFactory=,552894:483719:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};t.getSanitizedOptions=,42441:function(e,t,n){var r=n(922213).Buffer;e.exports=function(){"use strict";var e=ar i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h={exports:{}};!function(e){!function(t,n){var r=Math.pow(2,-24),i=Math.pow(2,32),o=Math.pow(2,53),s={encode:decode:;e.exports?e.exports=s:t.CBOR||(t.CBOR=s)}(p)}(h);var f=h.exports,d={exports:{}};!function(e,t){!function(e){var t="0.1.0",n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};isUUID=i,r.VERSION=t,e.uuid=r,e.isUUID=i}(t),null!==e&&(e.exports=t.uuid)}(d,d.exports);var y=d.exports,g=b=function(){function e(e){var t,n,r,i=e.setup;if(this._PNSDKSuffix={},this.instanceId="pn-".concat(g()),this.secretKey=i.secretKey||i.secret_key,this.subscribeKey=i.subscribeKey||i.subscribe_key,this.publishKey=i.publishKey||i.publish_key,this.sdkName=i.sdkName,this.sdkFamily=i.sdkFamily,this.partnerId=i.partnerId,this.setAuthKey(i.authKey),this.setCipherKey(i.cipherKey),this.setFilterExpression(i.filterExpression),"string"!=typeof i.origin&&!Array.isArray(i.origin)&&void 0!==i.origin)throw new Error("Origin must be either undefined, a string or a list of strings.");if(this.origin=i.origin||Array.from({length:20},(),this.secure=i.ssl||!1,this.restore=i.restore||!1,this.proxy=i.proxy,this.keepAlive=i.keepAlive,this.keepAliveSettings=i.keepAliveSettings,this.autoNetworkDetection=i.autoNetworkDetection||!1,this.dedupeOnSubscribe=i.dedupeOnSubscribe||!1,this.maximumCacheSize=i.maximumCacheSize||100,this.customEncrypt=i.customEncrypt,this.customDecrypt=i.customDecrypt,this.fileUploadPublishRetryLimit=null!==(t=i.fileUploadPublishRetryLimit)&&void 0!==t?t:5,this.useRandomIVs=null===(n=i.useRandomIVs)||void 0===n||n,this.enableSubscribeBeta=null!==(r=i.enableSubscribeBeta)&&void 0!==r&&r,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=i.logVerbosity||!1,this.suppressLeaveEvents=i.suppressLeaveEvents||!1,this.announceFailedHeartbeats=i.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=i.announceSuccessfulHeartbeats||!1,this.useInstanceId=i.useInstanceId||!1,this.useRequestId=i.useRequestId||!1,this.requestMessageCountThreshold=i.requestMessageCountThreshold,this.setTransactionTimeout(i.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(i.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(i.useSendBeacon||!0),i.presenceTimeout?this.setPresenceTimeout(i.presenceTimeout):this._presenceTimeout=300,null!=i.heartbeatInterval&&this.setHeartbeatInterval(i.heartbeatInterval),"string"==typeof i.userId){if("string"==typeof i.uuid)throw new Error("Only one of the following configuration options has to be provided: `uuid` or `userId`");this.setUserId(i.userId)}else{if("string"!=typeof i.uuid)throw new Error("One of the following configuration options has to be provided: `uuid` or `userId`");this.setUUID(i.uuid)}}return e.prototype.getAuthKey=function(){return this.authKey},e.prototype.setAuthKey=function(e){return this.authKey=e,this},e.prototype.setCipherKey=function(e){return this.cipherKey=e,this},e.prototype.getUUID=function(){return this.UUID},e.prototype.setUUID=function(e){if(!e||"string"!=typeof e||0===e.trim().length)throw new Error("Missing uuid parameter. Provide a valid string uuid");return this.UUID=e,this},e.prototype.getUserId=function(){return this.UUID},e.prototype.setUserId=e.prototype.getFilterExpression=function(){return this.filterExpression},e.prototype.setFilterExpression=function(e){return this.filterExpression=e,this},e.prototype.getPresenceTimeout=function(){return this._presenceTimeout},e.prototype.setPresenceTimeout=e.prototype.setProxy=e.prototype.getHeartbeatInterval=function(){return this._heartbeatInterval},e.prototype.setHeartbeatInterval=function(e){return this._heartbeatInterval=e,this},e.prototype.getSubscribeTimeout=function(){return this._subscribeRequestTimeout},e.prototype.setSubscribeTimeout=function(e){return this._subscribeRequestTimeout=e,this},e.prototype.getTransactionTimeout=function(){return this._transactionalRequestTimeout},e.prototype.setTransactionTimeout=function(e){return this._transactionalRequestTimeout=e,this},e.prototype.isSendBeaconEnabled=function(){return this._useSendBeacon},e.prototype.setSendBeaconConfig=function(e){return this._useSendBeacon=e,this},e.prototype.getVersion=function(){return"7.3.1"},e.prototype._addPnsdkSuffix=e.prototype._getPnsdkSuffix=e}();ar m,_,O,S,P,w=w||Math);!Math),_=(m=w).enc.Utf8,m.algo.HMAC=m.lib.Base.extend({init:reset:update:function(e){return this._hasher.update(e),this},finalize:),S=(O=w).lib.WordArray,O.enc.Base64={stringify:parse:_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},Math),),w.lib.Cipher||),),w.mode.ECB=((P=w.lib.BlockCipherMode.extend()).Encryptor=P.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),P.Decryptor=P.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),P);var E=w;ar N=),T=),k=);r M={signPamFromParams:endsWith:createPromise:encodeString:A},U={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},j=function(){eturn e.prototype.adaptStateChange=function(e,t){var n=this,r=e.state,i=e.channels,o=void 0===i?[]:i,s=e.channelGroups,a=void 0===s?[]:s,u=e.withHeartbeat,c=void 0!==u&&u;if(o.forEach((function(e){e in n._channels&&(n._channels[e].state=r)})),a.forEach((),c){var l={};return o.forEach((function(e){return l[e]=r})),a.forEach((),this._heartbeatEndpoint({channels:o,channelGroups:a,state:l},t)}return this._setStateEndpoint({state:r,channels:o,channelGroups:a},t)},e.prototype.adaptPresenceChange=e.prototype.adaptSubscribeChange=e.prototype.adaptUnsubscribeChange=e.prototype.unsubscribeAll=e.prototype.getHeartbeatChannels=function(){return Object.keys(this._heartbeatChannels)},e.prototype.getHeartbeatChannelGroups=function(){return Object.keys(this._heartbeatChannelGroups)},e.prototype.getSubscribedChannels=function(){return Object.keys(this._channels)},e.prototype.getSubscribedChannelGroups=e.prototype.reconnect=e.prototype.disconnect=e.prototype._registerHeartbeatTimer=e.prototype._stopHeartbeatTimer=e.prototype._performHeartbeatLoop=e.prototype._startSubscribeLoop=e.prototype._processSubscribeResponse=function(e,t){var n=this;if(e.error){if(e.errorData&&"Aborted"===e.errorData.message)return;e.category===U.PNTimeoutCategory?this._startSubscribeLoop():e.category===U.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection((),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===U.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e)}else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=U.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var s=t.messages||[],a=this._config,u=a.requestMessageCountThreshold,c=a.dedupeOnSubscribe;if(u&&s.length>=u){var l={};l.category=U.PNRequestMessageCountExceededCategory,l.operation=e.operation,this._listenerManager.announceStatus(l)}s.forEach((function(e){var t=e.channel,r=e.subscriptionMatch,s=e.publishMetaData;if(t===r&&(r=null),c){if(n._dedupingManager.isDuplicate(e))return;n._dedupingManager.addEntry(e)}if(M.endsWith(e.channel,"-pnpres"))(y={channel:null,subscription:null}).actualChannel=null!=r?t:null,y.subscribedChannel=null!=r?r:t,t&&(y.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(y.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),y.action=e.payload.action,y.state=e.payload.data,y.timetoken=s.publishTimetoken,y.occupancy=e.payload.occupancy,y.uuid=e.payload.uuid,y.timestamp=e.payload.timestamp,e.payload.join&&(y.join=e.payload.join),e.payload.leave&&(y.leave=e.payload.leave),e.payload.timeout&&(y.timeout=e.payload.timeout),n._listenerManager.announcePresence(y);else if(1===e.messageType)(y={channel:null,subscription:null}).channel=t,y.subscription=r,y.timetoken=s.publishTimetoken,y.publisher=e.issuingClientId,e.userMetadata&&(y.userMetadata=e.userMetadata),y.message=e.payload,n._listenerManager.announceSignal(y);else if(2===e.messageType){if((y={channel:null,subscription:null}).channel=t,y.subscription=r,y.timetoken=s.publishTimetoken,y.publisher=e.issuingClientId,e.userMetadata&&(y.userMetadata=e.userMetadata),y.message={event:e.payload.event,type:e.payload.type,data:e.payload.data},n._listenerManager.announceObjects(y),"uuid"===e.payload.type){var a=n._renameChannelField(y);n._listenerManager.announceUser(i(i({},a),{message:i(i({},a.message),{event:n._renameEvent(a.message.event),type:"user"})}))}else if("channel"===e.payload.type)a=n._renameChannelField(y),n._listenerManager.announceSpace(i(i({},a),{message:i(i({},a.message),{event:n._renameEvent(a.message.event),type:"space"})}));else if("membership"===e.payload.type){var u=(a=n._renameChannelField(y)).message.data,l=u.uuid,p=u.channel,h=o(u,["uuid","channel"]);h.user=l,h.space=p,n._listenerManager.announceMembership(i(i({},a),{message:i(i({},a.message),{event:n._renameEvent(a.message.event),data:h})}))}}else if(3===e.messageType)(y={}).channel=t,y.subscription=r,y.timetoken=s.publishTimetoken,y.publisher=e.issuingClientId,y.data={messageTimetoken:e.payload.data.messageTimetoken,actionTimetoken:e.payload.data.actionTimetoken,type:e.payload.data.type,uuid:e.issuingClientId,value:e.payload.data.value},y.event=e.payload.event,n._listenerManager.announceMessageAction(y);else if(4===e.messageType){(y={}).channel=t,y.subscription=r,y.timetoken=s.publishTimetoken,y.publisher=e.issuingClientId;var f=e.payload;if(n._config.cipherKey){var d=n._crypto.decrypt(e.payload);"object"==typeof d&&null!==d&&(f=d)}e.userMetadata&&(y.userMetadata=e.userMetadata),y.message=f.message,y.file={id:f.file.id,name:f.file.name,url:n._getFileUrl({id:f.file.id,name:f.file.name,channel:t})},n._listenerManager.announceFile(y)}else{var y;(y={channel:null,subscription:null}).actualChannel=null!=r?t:null,y.subscribedChannel=null!=r?r:t,y.channel=t,y.subscription=r,y.timetoken=s.publishTimetoken,y.publisher=e.issuingClientId,e.userMetadata&&(y.userMetadata=e.userMetadata),n._config.cipherKey?y.message=n._crypto.decrypt(e.payload):y.message=e.payload,n._listenerManager.announceMessage(y)}})),this._region=t.metadata.region,this._startSubscribeLoop()}},e.prototype._stopSubscribeLoop=e.prototype._renameEvent=e.prototype._renameChannelField=e}(),D={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNAddMessageActionOperation:"PNAddActionOperation",PNRemoveMessageActionOperation:"PNRemoveMessageActionOperation",PNGetMessageActionsOperation:"PNGetMessageActionsOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNListFilesOperation:"PNListFilesOperation",PNGenerateUploadUrlOperation:"PNGenerateUploadUrlOperation",PNPublishFileOperation:"PNPublishFileOperation",PNGetFileUrlOperation:"PNGetFileUrlOperation",PNDownloadFileOperation:"PNDownloadFileOperation",PNGetAllUUIDMetadataOperation:"PNGetAllUUIDMetadataOperation",PNGetUUIDMetadataOperation:"PNGetUUIDMetadataOperation",PNSetUUIDMetadataOperation:"PNSetUUIDMetadataOperation",PNRemoveUUIDMetadataOperation:"PNRemoveUUIDMetadataOperation",PNGetAllChannelMetadataOperation:"PNGetAllChannelMetadataOperation",PNGetChannelMetadataOperation:"PNGetChannelMetadataOperation",PNSetChannelMetadataOperation:"PNSetChannelMetadataOperation",PNRemoveChannelMetadataOperation:"PNRemoveChannelMetadataOperation",PNSetMembersOperation:"PNSetMembersOperation",PNSetMembershipsOperation:"PNSetMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerGrantToken:"PNAccessManagerGrantToken",PNAccessManagerAudit:"PNAccessManagerAudit",PNAccessManagerRevokeToken:"PNAccessManagerRevokeToken",PNHandshakeOperation:"PNHandshakeOperation",PNReceiveMessagesOperation:"PNReceiveMessagesOperation"},x=),I=),F=I),G=I),K=I),L=),B=),H=),q=Error);ion $(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e.networking,s=e.config,a=e.telemetryManager,u=e.tokenManager,c=g(),l=null,p=null,h={};t.getOperation()===D.PNTimeOperation||t.getOperation()===D.PNChannelGroupsOperation?l=n[0]:(h=n[0],l=n[1]),"undefined"==typeof Promise||l||(p=M.createPromise());var f=t.validateParams(e,h);if(f)return l?l(z(f)):p?(p.reject(new q("Validation failed, check status for details",z(f))),p.promise):void 0;var d,y=t.prepareParams(e,h),b=Z(t,e,h),v={url:b,operation:t.getOperation(),timeout:t.getRequestTimeout(e),headers:t.getRequestHeaders?t.getRequestHeaders():{},ignoreBody:"function"==typeof t.ignoreBody&&t.ignoreBody(e),forceBuffered:"function"==typeof t.forceBuffered?t.forceBuffered(e,h):null,abortSignal:"function"==typeof t.getAbortSignal?t.getAbortSignal(e,h):null};y.uuid=s.UUID,y.pnsdk=W(s);var m=a.operationsLatencyForRequest();if(Object.keys(m).length&&(y=i(i({},y),m)),s.useInstanceId&&(y.instanceid=s.instanceId),s.useRequestId&&(y.requestid=c),t.isAuthSupported()){var _=u.getToken()||s.getAuthKey();_&&(y.auth=_)}s.secretKey&&J(e,b,y,h,t);var O=if(a.startLatencyMeasure(t.getOperation(),c),"POST"===V(e,t,h)){var S=t.postPayload(e,h);d=o.POST(y,S,v,O)}else"PATCH"===V(e,t,h)?(S=t.patchPayload(e,h),d=o.PATCH(y,S,v,O)):d="DELETE"===V(e,t,h)?o.DELETE(y,v,O):"GETFILE"===V(e,t,h)?o.GETFILE(y,v,O):o.GET(y,v,O);return t.getOperation()===D.PNSubscribeOperation?d:p?p.promise:void 0}var X=Object.freeze({__proto__:null,getOperation:function(){return D.PNAddChannelsToGroupOperation},validateParams:function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},getURL:function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(M.encodeString(n))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},handleResponse:function(){return{}}}),Q=Object.freeze({__proto__:null,getOperation:function(){return D.PNRemoveChannelsFromGroupOperation},validateParams:getURL:function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(M.encodeString(n))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(){return{}}}),Y=Object.freeze({__proto__:null,getOperation:function(){return D.PNRemoveGroupOperation},validateParams:function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},getURL:isAuthSupported:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},prepareParams:function(){return{}},handleResponse:function(){return{}}}),ee=Object.freeze({__proto__:null,getOperation:function(){return D.PNChannelGroupsOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(e){var t=e.config;return"/v1/channel-registration/sub-key/".concat(t.subscribeKey,"/channel-group")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(e,t){return{groups:t.payload.groups}}}),te=Object.freeze({__proto__:null,getOperation:function(){return D.PNChannelsForGroupOperation},validateParams:function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},getURL:function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(M.encodeString(n))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:),ne=Object.freeze({__proto__:null,getOperation:function(){return D.PNPushNotificationEnabledChannelsOperation},validateParams:function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,o=t.topic,s=e.config;return n?r?"apns2"!==r||o?i&&0!==i.length?s.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},getURL:function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"===r?"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n):"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n=t.pushGateway,r=t.channels,o=void 0===r?[]:r,s=t.environment,a=void 0===s?"development":s,u=t.topic,c={type:n,add:o.join(",")};return"apns2"===n&&delete(c=i(i({},c),{environment:a,topic:u})).type,c},handleResponse:function(){return{}}}),re=Object.freeze({__proto__:null,getOperation:function(){return D.PNPushNotificationEnabledChannelsOperation},validateParams:getURL:function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"===r?"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n):"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(){return{}}}),ie=Object.freeze({__proto__:null,getOperation:function(){return D.PNPushNotificationEnabledChannelsOperation},validateParams:function(e,t){var n=t.device,r=t.pushGateway,i=t.topic,o=e.config;return n?r?"apns2"!==r||i?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n=t.pushGateway,r=t.environment,o=void 0===r?"development":r,s=t.topic,a={type:n};return"apns2"===n&&delete(a=i(i({},a),{environment:o,topic:s})).type,a},handleResponse:),oe=Object.freeze({__proto__:null,getOperation:function(){return D.PNRemoveAllPushNotificationsOperation},validateParams:getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(){return{}}}),se=Object.freeze({__proto__:null,getOperation:function(){return D.PNUnsubscribeOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(M.encodeString(o),"/leave")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},handleResponse:function(){return{}}}),ae=Object.freeze({__proto__:null,getOperation:function(){return D.PNWhereNowOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:),ue=Object.freeze({__proto__:null,getOperation:function(){return D.PNHeartbeatOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(M.encodeString(o),"/heartbeat")},isAuthSupported:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},prepareParams:handleResponse:function(){return{}}}),ce=Object.freeze({__proto__:null,getOperation:function(){return D.PNGetStateOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:),le=Object.freeze({__proto__:null,getOperation:function(){return D.PNSetStateOperation},validateParams:getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{state:t.payload}}}),pe=Object.freeze({__proto__:null,getOperation:function(){return D.PNHereNowOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:handleError:),he=Object.freeze({__proto__:null,getOperation:function(){return D.PNAddMessageActionOperation},validateParams:usePost:function(){return!0},postURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},getRequestHeaders:isAuthSupported:function(){return!0},prepareParams:function(){return{}},postPayload:function(e,t){return t.action},handleResponse:function(e,t){return{data:t.data}}}),fe=Object.freeze({__proto__:null,getOperation:function(){return D.PNRemoveMessageActionOperation},validateParams:useDelete:function(){return!0},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(e,t){return{data:t.data}}}),de=Object.freeze({__proto__:null,getOperation:function(){return D.PNGetMessageActionsOperation},validateParams:getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:),ye={getOperation:function(){return D.PNListFilesOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"channel can't be empty"},getURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(M.encodeString(t.channel),"/files")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:,ge={getOperation:function(){return D.PNGenerateUploadUrlOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.name)?void 0:"name can't be empty":"channel can't be empty"},usePost:function(){return!0},postURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(M.encodeString(t.channel),"/generate-upload-url")},postPayload:function(e,t){return{name:t.name}},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:,be={getOperation:function(){return D.PNPublishFileOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.fileId)?(null==t?void 0:t.fileName)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},getURL:function(e,t){var n=e.config,r=n.publishKey,i=n.subscribeKey,o=e,{message:t.message,file:{name:t.fileName,id:t.fileId}});return"/v1/files/publish-file/".concat(r,"/").concat(i,"/0/").concat(M.encodeString(t.channel),"/0/").concat(M.encodeString(o))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:,ve=function(e){var t=function(e){var t=this,n=e.generateUploadUrl,r=e.publishFile,i=e.modules,o=i.PubNubFile,u=i.config,c=i.cryptography,l=i.networking;return function(e){var i=e.channel,p=e.file,h=e.message,f=e.cipherKey,d=e.meta,y=e.ttl,g=e.storeInHistory;return s(t,void 0,void 0,(function(){var e,t,s,b,v,m,_,O,S,P,w,E,C,N,T,k,A,R,M,U,j,D,x,I,F,G,K,L;return a(this,(function(a){switch(a.label){case 0:if(!i)throw new q("Validation failed, check status for details",z("channel can't be empty"));if(!p)throw new q("Validation failed, check status for details",z("file can't be empty"));return e=o.create(p),[4,n({channel:i,name:e.name})];case 1:return t=a.sent(),s=t.file_upload_request,b=s.url,v=s.form_fields,m=t.data,_=m.id,O=m.name,o.supportsEncryptFile&&(null!=f?f:u.cipherKey)?[4,c.encryptFile(null!=f?f:u.cipherKey,e,o)]:[3,3];case 2:e=a.sent(),a.label=3;case 3:S=v,e.mimeType&&(S=v.map(()),a.label=4;case 4:return a.trys.push([4,18,,22]),o.supportsFileUri&&p.uri?(E=(w=l).POSTFILE,C=[b,S],[4,e.toFileUri()]):[3,7];case 5:return[4,E.apply(w,C.concat([a.sent()]))];case 6:return P=a.sent(),[3,17];case 7:return o.supportsFile?(T=(N=l).POSTFILE,k=[b,S],[4,e.toFile()]):[3,10];case 8:return[4,T.apply(N,k.concat([a.sent()]))];case 9:return P=a.sent(),[3,17];case 10:return o.supportsBuffer?(R=(A=l).POSTFILE,M=[b,S],[4,e.toBuffer()]):[3,13];case 11:return[4,R.apply(A,M.concat([a.sent()]))];case 12:return P=a.sent(),[3,17];case 13:return o.supportsBlob?(j=(U=l).POSTFILE,D=[b,S],[4,e.toBlob()]):[3,16];case 14:return[4,j.apply(U,D.concat([a.sent()]))];case 15:return P=a.sent(),[3,17];case 16:throw new Error("Unsupported environment");case 17:return[3,22];case 18:return(x=a.sent()).response?[4,(B=x.response,new Promise(())]:[3,20];case 19:throw I=a.sent(),F=/<Message>(.*)<\/Message>/gi.exec(I),new q(F?"Upload to bucket failed: ".concat(F[1]):"Upload to bucket failed.",x);case 20:throw new q("Upload to bucket failed.",x);case 21:return[3,22];case 22:if(204!==P.status)throw new q("Upload to bucket was unsuccessful",P);G=u.fileUploadPublishRetryLimit,K=!1,L={timetoken:"0"},a.label=23;case 23:return a.trys.push([23,25,,26]),[4,r({channel:i,message:h,fileId:_,fileName:O,meta:d,storeInHistory:g,ttl:y})];case 24:return L=a.sent(),K=!0,[3,26];case 25:return a.sent(),G-=1,[3,26];case 26:if(!K&&G>0)return[3,23];a.label=27;case 27:if(K)return[2,{timetoken:L.timetoken,id:_,name:O}];throw new q("Publish failed. You may want to execute that operation manually using pubnub.publishFile",{channel:i,id:_,name:O})}var B}))}))}}(e);return ,me=_e={getOperation:function(){return D.PNDownloadFileOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.name)?(null==t?void 0:t.id)?void 0:"id can't be empty":"name can't be empty":"channel can't be empty"},useGetFile:function(){return!0},getFileURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(M.encodeString(t.channel),"/files/").concat(t.id,"/").concat(t.name)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},ignoreBody:function(){return!0},forceBuffered:function(){return!0},prepareParams:function(){return{}},handleResponse:,Oe={getOperation:function(){return D.PNListFilesOperation},validateParams:useDelete:function(){return!0},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:,Se={getOperation:function(){return D.PNGetAllUUIDMetadataOperation},validateParams:function(){},getURL:function(e){var t=e.config;return"/v2/objects/".concat(t.subscribeKey,"/uuids")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n,r,i,o,s,a,u,l,p,h={include:["status","type"]};return(null==t?void 0:t.include)&&(null===(n=t.include)||void 0===n?void 0:n.customFields)&&h.include.push("custom"),h.include=h.include.join(","),(null===(r=null==t?void 0:t.include)||void 0===r?void 0:r.totalCount)&&(h.count=null===(i=t.include)||void 0===i?void 0:i.totalCount),(null===(o=null==t?void 0:t.page)||void 0===o?void 0:o.next)&&(h.start=null===(s=t.page)||void 0===s?void 0:s.next),(null===(a=null==t?void 0:t.page)||void 0===a?void 0:a.prev)&&(h.end=null===(u=t.page)||void 0===u?void 0:u.prev),(null==t?void 0:t.filter)&&(h.filter=t.filter),h.limit=null!==(l=null==t?void 0:t.limit)&&void 0!==l?l:100,(null==t?void 0:t.sort)&&(h.sort=Object.entries(null!==(p=t.sort)&&void 0!==p?p:{}).map((function(e){var t=c(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),h},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,next:t.next,prev:t.prev}}},Pe={getOperation:function(){return D.PNGetUUIDMetadataOperation},validateParams:function(){},getURL:function(e,t){var n,r=e.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(M.encodeString(null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:r.getUUID()))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n,r,i=e.config,o={};return o.uuid=null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:i.getUUID(),o.include=["status","type","custom"],(null==t?void 0:t.include)&&!1===(null===(r=t.include)||void 0===r?void 0:r.customFields)&&o.include.pop(),o.include=o.include.join(","),o},handleResponse:function(e,t){return{status:t.status,data:t.data}}},we={getOperation:function(){return D.PNSetUUIDMetadataOperation},validateParams:function(e,t){if(!(null==t?void 0:t.data))return"Data cannot be empty"},usePatch:function(){return!0},patchURL:patchPayload:function(e,t){return t.data},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data}}},Ee={getOperation:function(){return D.PNRemoveUUIDMetadataOperation},validateParams:function(){},getURL:useDelete:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data}}},Ce={getOperation:function(){return D.PNGetAllChannelMetadataOperation},validateParams:function(){},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}},Ne={getOperation:function(){return D.PNGetChannelMetadataOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"Channel cannot be empty"},getURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(M.encodeString(t.channel))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n,r={include:["status","type","custom"]};return(null==t?void 0:t.include)&&!1===(null===(n=t.include)||void 0===n?void 0:n.customFields)&&r.include.pop(),r.include=r.include.join(","),r},handleResponse:function(e,t){return{status:t.status,data:t.data}}},Te={getOperation:function(){return D.PNSetChannelMetadataOperation},validateParams:usePatch:function(){return!0},patchURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(M.encodeString(t.channel))},patchPayload:function(e,t){return t.data},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data}}},ke={getOperation:function(){return D.PNRemoveChannelMetadataOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"Channel cannot be empty"},getURL:useDelete:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:,Ae={getOperation:function(){return D.PNGetMembersOperation},validateParams:getURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(M.encodeString(t.channel),"/uuids")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}},Re={getOperation:function(){return D.PNSetMembersOperation},validateParams:usePatch:function(){return!0},patchURL:patchPayload:function(e,t){var n;return(n={set:[],delete:[]})[t.type]=t.uuids.map((function(e){return"string"==typeof e?{uuid:{id:e}}:{uuid:{id:e.id},custom:e.custom,status:e.status}})),n},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(e,t){var n,r,i,o,s,a,u,l,p,h={include:["uuid.status","uuid.type","type"]};return(null==t?void 0:t.include)&&((null===(n=t.include)||void 0===n?void 0:n.customFields)&&h.include.push("custom"),(null===(r=t.include)||void 0===r?void 0:r.customUUIDFields)&&h.include.push("uuid.custom"),(null===(i=t.include)||void 0===i?void 0:i.UUIDFields)&&h.include.push("uuid")),h.include=h.include.join(","),(null===(o=null==t?void 0:t.include)||void 0===o?void 0:o.totalCount)&&(h.count=!0),(null===(s=null==t?void 0:t.page)||void 0===s?void 0:s.next)&&(h.start=null===(a=t.page)||void 0===a?void 0:a.next),(null===(u=null==t?void 0:t.page)||void 0===u?void 0:u.prev)&&(h.end=null===(l=t.page)||void 0===l?void 0:l.prev),(null==t?void 0:t.filter)&&(h.filter=t.filter),null!=t.limit&&(h.limit=t.limit),(null==t?void 0:t.sort)&&(h.sort=Object.entries(null!==(p=t.sort)&&void 0!==p?p:{}).map((function(e){var t=c(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),h},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}},Me={getOperation:function(){return D.PNGetMembershipsOperation},validateParams:function(){},getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}},Ue={getOperation:function(){return D.PNSetMembershipsOperation},validateParams:usePatch:function(){return!0},patchURL:patchPayload:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:,je=Object.freeze({__proto__:null,getOperation:function(){return D.PNAccessManagerAudit},validateParams:getURL:function(e){var t=e.config;return"/v2/auth/audit/sub-key/".concat(t.subscribeKey)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:handleResponse:),De=Object.freeze({__proto__:null,getOperation:function(){return D.PNAccessManagerGrant},validateParams:getURL:getRequestTimeout:isAuthSupported:prepareParams:handleResponse:);nction Fe(e,t){if(xe(t))return 0,t);var n=t.ttl,r=t.resources,i=t.patterns,o=t.meta,s=t.authorized_uuid,a={ttl:0,permissions:{resources:{channels:{},groups:{},uuids:{},users:{},spaces:{}},patterns:{channels:{},groups:{},uuids:{},users:{},spaces:{}},meta:{}}};if(r){var u=r.uuids,c=r.channels,l=r.groups;u&&Object.keys(u).forEach((function(e){a.permissions.resources.uuids[e]=Ie(u[e])})),c&&Object.keys(c).forEach((function(e){a.permissions.resources.channels[e]=Ie(c[e])})),l&&Object.keys(l).forEach((function(e){a.permissions.resources.groups[e]=Ie(l[e])}))}if(i){var p=i.uuids,h=i.channels,f=i.groups;p&&Object.keys(p).forEach((function(e){a.permissions.patterns.uuids[e]=Ie(p[e])})),h&&Object.keys(h).forEach((function(e){a.permissions.patterns.channels[e]=Ie(h[e])})),f&&Object.keys(f).forEach((function(e){a.permissions.patterns.groups[e]=Ie(f[e])}))}return(n||0===n)&&(a.ttl=n),o&&(a.permissions.meta=o),s&&(a.permissions.uuid="".concat(s)),a}var Ge=Object.freeze({__proto__:null,getOperation:function(){return D.PNAccessManagerGrantToken},extractPermissions:Ie,validateParams:postURL:function(e){var t=e.config;return"/v3/pam/".concat(t.subscribeKey,"/grant")},usePost:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:function(){return{}},postPayload:handleResponse:),Ke={getOperation:function(){return D.PNAccessManagerRevokeToken},validateParams:getURL:useDelete:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!1},prepareParams:handleResponse:function(e,t){return{status:t.status,data:t.data}}};ar Be=Object.freeze({__proto__:null,getOperation:function(){return D.PNPublishOperation},validateParams:function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},usePost:getURL:postURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},postPayload:prepareParams:function(e,t){var n=t.meta,r=t.replicate,i=void 0===r||r,o=t.storeInHistory,s=t.ttl,a={};return null!=o&&(a.store=o?"1":"0"),s&&(a.ttl=s),!1===i&&(a.norep="true"),n&&"object"==typeof n&&(a.meta=JSON.stringify(n)),a},handleResponse:function(e,t){return{timetoken:t[2]}}}),He=Object.freeze({__proto__:null,getOperation:function(){return D.PNSignalOperation},validateParams:getURL:function(e,t){var n,r=e.config,i=t.channel,o=(n=t.message,JSON.stringify(n));return"/signal/".concat(r.publishKey,"/").concat(r.subscribeKey,"/0/").concat(M.encodeString(i),"/0/").concat(M.encodeString(o))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:function(){return{}},handleResponse:function(e,t){return{timetoken:t[2]}}});ar ze=Object.freeze({__proto__:null,getOperation:function(){return D.PNHistoryOperation},validateParams:getURL:function(e,t){var n=t.channel,r=e.config;return"/v2/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(M.encodeString(n))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:),Ze=Object.freeze({__proto__:null,getOperation:function(){return D.PNDeleteMessagesOperation},validateParams:function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},useDelete:function(){return!0},getURL:function(e,t){var n=t.channel,r=e.config;return"/v3/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(M.encodeString(n))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return t.payload}}),We=Object.freeze({__proto__:null,getOperation:function(){return D.PNMessageCounts},validateParams:getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:function(e,t){return{channels:t.channels}}}),Ve=Object.freeze({__proto__:null,getOperation:function(){return D.PNFetchMessagesOperation},validateParams:getURL:getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:),Je=Object.freeze({__proto__:null,getOperation:function(){return D.PNTimeOperation},getURL:function(){return"/time/0"},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},prepareParams:function(){return{}},isAuthSupported:function(){return!1},handleResponse:function(e,t){return{timetoken:t[0]}},validateParams:function(){}}),$e=Object.freeze({__proto__:null,getOperation:function(){return D.PNSubscribeOperation},validateParams:function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},getURL:getRequestTimeout:function(e){return e.config.getSubscribeTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:),Xe={getOperation:function(){return D.PNHandshakeOperation},validateParams:getURL:function(e,t){var n=e.config,r=t.channels?t.channels.join(","):",";return"/v2/subscribe/".concat(n.subscribeKey,"/").concat(M.encodeString(r),"/0")},getRequestTimeout:function(e){return e.config.getSubscribeTimeout()},isAuthSupported:function(){return!0},prepareParams:handleResponse:,Qe={getOperation:function(){return D.PNReceiveMessagesOperation},validateParams:getURL:getRequestTimeout:function(e){return e.config.getSubscribeTimeout()},isAuthSupported:function(){return!0},getAbortSignal:function(e,t){return t.abortSignal},prepareParams:handleResponse:,Ye=),et=),tt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.describe=n.prototype.start=n.prototype.transition=function(e){var t,n,r,i,o,s;if(!this.currentState)throw new Error("Start the engine first");this.notify({type:"eventReceived",event:e});var a=this.currentState.transition(this.currentContext,e);if(a){var l=c(a,3),p=l[0],h=l[1],f=l[2];try{for(var d=u(this.currentState.exitEffects),y=d.next();!y.done;y=d.next()){var g=y.value;this.notify({type:"invocationDispatched",invocation:g(this.currentContext)})}}catch(e){t={error:e}}finally{try{y&&!y.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}var b=this.currentState;this.currentState=p;var v=this.currentContext;this.currentContext=h,this.notify({type:"transitionDone",fromState:b,fromContext:v,toState:p,toContext:h,event:e});try{for(var m=u(f),_=m.next();!_.done;_=m.next())g=_.value,this.notify({type:"invocationDispatched",invocation:g})}catch(e){r={error:e}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}try{for(var O=u(this.currentState.enterEffects),S=O.next();!S.done;S=O.next())g=S.value,this.notify({type:"invocationDispatched",invocation:g(this.currentContext)})}catch(e){o={error:e}}finally{try{S&&!S.done&&(s=O.return)&&s.call(O)}finally{if(o)throw o.error}}}},n}(Ye),nt=);r ot,st,at,ut=Error),ct=Ye),lt=(),pt=ht=it("HANDSHAKE",(function(e,t){return{channels:e,groups:t}})),ft=it("RECEIVE_EVENTS",(),dt=(st=function(e){return e},at=at.type=ot="EMIT_EVENTS",at),yt=it("RECONNECT",(function(e){return e})),gt=it("HANDSHAKE_RECONNECT",(function(e){return e})),bt=rt("SUBSCRIPTION_CHANGE",(function(e,t){return{channels:e,groups:t}})),vt=rt("DISCONNECT",(function(){return{}})),mt=rt("RECONNECT",(function(){return{}}));rt("RESTORE",();var _t=rt("HANDSHAKING_SUCCESS",(function(e){return e})),Ot=rt("HANDSHAKING_FAILURE",(function(e){return e})),St=rt("HANDSHAKING_RECONNECTING_SUCCESS",(),Pt=rt("HANDSHAKING_RECONNECTING_FAILURE",(function(e){return e})),wt=rt("HANDSHAKING_RECONNECTING_GIVEUP",(function(){return{}})),Et=rt("HANDSHAKING_RECONNECTING_RETRY",(function(){return{}})),Ct=rt("RECEIVING_SUCCESS",(function(e,t){return{cursor:e,events:t}})),Nt=rt("RECEIVING_FAILURE",(function(e){return e})),Tt=rt("RECONNECTING_SUCCESS",(),kt=rt("RECONNECTING_FAILURE",(function(e){return e})),At=rt("RECONNECTING_GIVEUP",(function(){return{}})),Rt=rt("RECONNECTING_RETRY",(function(){return{}})),Mt=nt),Ut=new et("STOPPED");Ut.on(bt.type,(function(e,t){return Ut.with({channels:t.payload.channels,groups:t.payload.groups})})),Ut.on(mt.type,(function(e){return Kt.with(i({},e))}));var jt=new et("HANDSHAKE_FAILURE");jt.on(Et.type,(function(e){return Gt.with(i(i({},e),{attempts:0}))})),jt.on(vt.type,(function(e){return Ut.with({channels:e.channels,groups:e.groups})}));var Dt=new et("STOPPED");Dt.on(bt.type,(),Dt.on(mt.type,();var xt=new et("RECEIVE_FAILURE");xt.on(Rt.type,(),xt.on(vt.type,(function(e){return Dt.with({channels:e.channels,groups:e.groups,cursor:e.cursor})}));var It=new et("RECEIVE_RECONNECTING");It.onEnter((function(e){return yt(e)})),It.onExit((function(){return yt.cancel})),It.on(Tt.type,(function(e,t){return Ft.with({channels:e.channels,groups:e.groups,cursor:t.payload.cursor},[dt(t.payload.events)])})),It.on(kt.type,(function(e,t){return It.with(i(i({},e),{attempts:e.attempts+1,reason:t.payload}))})),It.on(At.type,(),It.on(vt.type,(function(e){return Dt.with({channels:e.channels,groups:e.groups,cursor:e.cursor})}));var Ft=new et("RECEIVING");Ft.onEnter((),Ft.onExit((function(){return ft.cancel})),Ft.on(Ct.type,(),Ft.on(bt.type,(),Ft.on(Nt.type,(function(e,t){return It.with(i(i({},e),{attempts:0,reason:t.payload}))})),Ft.on(vt.type,(function(e){return Dt.with({channels:e.channels,groups:e.groups,cursor:e.cursor})}));var Gt=new et("HANDSHAKE_RECONNECTING");Gt.onEnter((function(e){return gt(e)})),Gt.onExit((function(){return yt.cancel})),Gt.on(Tt.type,(),Gt.on(kt.type,(),Gt.on(At.type,(),Gt.on(vt.type,(function(e){return Ut.with({channels:e.channels,groups:e.groups})}));var Kt=new et("HANDSHAKING");Kt.onEnter((),Kt.onExit((function(){return ht.cancel})),Kt.on(bt.type,(),Kt.on(_t.type,(),Kt.on(Ot.type,(),Kt.on(vt.type,();var Lt=new et("UNSUBSCRIBED");Lt.on(bt.type,();var Bt=),Ht=function(){function e(e){var t=this,n=e.networking,r=e.cbor,o=new b({setup:e});this._config=o;var s=new N({config:o}),a=e.cryptography;n.init(o);var u=new H(o,r);this._tokenManager=u;var p=new x({maximumSamplesCount:6e4});this._telemetryManager=p;var h={config:o,networking:n,crypto:s,cryptography:a,tokenManager:u,telemetryManager:p,PubNubFile:e.PubNubFile};this.File=e.PubNubFile,this.encryptFile=function(e,n){return a.encryptFile(e,n,t.File)},this.decryptFile=var f=$.bind(this,h,Je),d=$.bind(this,h,se),y=$.bind(this,h,ue),g=$.bind(this,h,le),v=$.bind(this,h,$e),m=new B;if(this._listenerManager=m,this.iAmHere=$.bind(this,h,ue),this.iAmAway=$.bind(this,h,se),this.setPresenceState=$.bind(this,h,le),this.handshake=$.bind(this,h,Xe),this.receiveMessages=$.bind(this,h,Qe),!0===o.enableSubscribeBeta){var _=new Bt({handshake:this.handshake,receiveEvents:this.receiveMessages});this.subscribe=_.subscribe.bind(_),this.unsubscribe=_.unsubscribe.bind(_),this.eventEngine=_}else{var O=new j({timeEndpoint:f,leaveEndpoint:d,heartbeatEndpoint:y,setStateEndpoint:g,subscribeEndpoint:v,crypto:h.crypto,config:h.config,listenerManager:m,getFileUrl:function(e){return me(h,e)}});this.subscribe=O.adaptSubscribeChange.bind(O),this.unsubscribe=O.adaptUnsubscribeChange.bind(O),this.disconnect=O.disconnect.bind(O),this.reconnect=O.reconnect.bind(O),this.unsubscribeAll=O.unsubscribeAll.bind(O),this.getSubscribedChannels=O.getSubscribedChannels.bind(O),this.getSubscribedChannelGroups=O.getSubscribedChannelGroups.bind(O),this.setState=O.adaptStateChange.bind(O),this.presence=O.adaptPresenceChange.bind(O),this.destroy=this.addListener=m.addListener.bind(m),this.removeListener=m.removeListener.bind(m),this.removeAllListeners=m.removeAllListeners.bind(m),this.parseToken=u.parseToken.bind(u),this.setToken=u.setToken.bind(u),this.getToken=u.getToken.bind(u),this.channelGroups={listGroups:$.bind(this,h,ee),listChannels:$.bind(this,h,te),addChannels:$.bind(this,h,X),removeChannels:$.bind(this,h,Q),deleteGroup:$.bind(this,h,Y)},this.push={addChannels:$.bind(this,h,ne),removeChannels:$.bind(this,h,re),deleteDevice:$.bind(this,h,oe),listChannels:$.bind(this,h,ie)},this.hereNow=$.bind(this,h,pe),this.whereNow=$.bind(this,h,ae),this.getState=$.bind(this,h,ce),this.grant=$.bind(this,h,De),this.grantToken=$.bind(this,h,Ge),this.audit=$.bind(this,h,je),this.revokeToken=$.bind(this,h,Ke),this.publish=$.bind(this,h,Be),this.fire=this.signal=$.bind(this,h,He),this.history=$.bind(this,h,ze),this.deleteMessages=$.bind(this,h,Ze),this.messageCounts=$.bind(this,h,We),this.fetchMessages=$.bind(this,h,Ve),this.addMessageAction=$.bind(this,h,he),this.removeMessageAction=$.bind(this,h,fe),this.getMessageActions=$.bind(this,h,de),this.listFiles=$.bind(this,h,ye);var S=$.bind(this,h,ge);this.publishFile=$.bind(this,h,be),this.sendFile=ve({generateUploadUrl:S,publishFile:this.publishFile,modules:h}),this.getFileUrl=this.downloadFile=$.bind(this,h,_e),this.deleteFile=$.bind(this,h,Oe),this.objects={getAllUUIDMetadata:$.bind(this,h,Se),getUUIDMetadata:$.bind(this,h,Pe),setUUIDMetadata:$.bind(this,h,we),removeUUIDMetadata:$.bind(this,h,Ee),getAllChannelMetadata:$.bind(this,h,Ce),getChannelMetadata:$.bind(this,h,Ne),setChannelMetadata:$.bind(this,h,Te),removeChannelMetadata:$.bind(this,h,ke),getChannelMembers:$.bind(this,h,Ae),setChannelMembers:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return $.call.apply($,l([t,h,Re,i({type:"set"},e)],c(n),!1))},removeChannelMembers:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return $.call.apply($,l([t,h,Re,i({type:"delete"},e)],c(n),!1))},getMemberships:$.bind(this,h,Me),setMemberships:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return $.call.apply($,l([t,h,Ue,i({type:"set"},e)],c(n),!1))},removeMemberships:,this.createUser=function(e){return t.objects.setUUIDMetadata({uuid:e.userId,data:e.data,include:e.include})},this.updateUser=this.createUser,this.removeUser=this.fetchUser=this.fetchUsers=this.objects.getAllUUIDMetadata,this.createSpace=this.updateSpace=this.createSpace,this.removeSpace=this.fetchSpace=this.fetchSpaces=this.objects.getAllChannelMetadata,this.addMemberships=this.updateMemberships=this.addMemberships,this.removeMemberships=this.fetchMemberships=this.time=f,this.stop=this.destroy,this.encrypt=s.encrypt.bind(s),this.decrypt=s.decrypt.bind(s),this.getAuthKey=h.config.getAuthKey.bind(h.config),this.setAuthKey=h.config.setAuthKey.bind(h.config),this.setCipherKey=h.config.setCipherKey.bind(h.config),this.getUUID=h.config.getUUID.bind(h.config),this.setUUID=h.config.setUUID.bind(h.config),this.getUserId=h.config.getUserId.bind(h.config),this.setUserId=h.config.setUserId.bind(h.config),this.getFilterExpression=h.config.getFilterExpression.bind(h.config),this.setFilterExpression=h.config.setFilterExpression.bind(h.config),this.setHeartbeatInterval=h.config.setHeartbeatInterval.bind(h.config),n.hasModule("proxy")&&(this.setProxy=}return e.prototype.getVersion=e.prototype._addPnsdkSuffix=function(e,t){this._config._addPnsdkSuffix(e,t)},e.prototype.networkDownDetected=e.prototype.networkUpDetected=e.notificationPayload=e.generateUUID=e.OPERATIONS=D,e.CATEGORIES=U,e}(),qt=);function zt(e){var t=if(!t(e))return e;var n={};return Object.keys(e).forEach((),n}var Zt=),Wt={exports:{}},Vt={exports:{}};!Vt);var Jt=tn;tn.default=tn,tn.stable=sn,tn.stableStringify=sn;var $t="[...]",Xt="[Circular]",Qt=[],Yt=[];tring.prototype.replace,ln=/%20/g,pn="RFC3986",hn={default:pn,formatters:{RFC1738:RFC3986:,RFC1738:"RFC1738",RFC3986:pn},fn=hn,dn=Object.prototype.hasOwnProperty,yn=Array.isArray,gn=),bn=vn={arrayToObject:bn,assign:combine:compact:decode:encode:isBuffer:isRegExp:maybeMap:merge:,mn=vn,_n=hn,On=Object.prototype.hasOwnProperty,Sn={brackets:comma:"comma",indices:repeat:,Pn=Array.isArray,wn=String.prototype.split,En=Array.prototype.push,Cn=Nn=Date.prototype.toISOString,Tn=_n.default,kn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:mn.encode,encodeValuesOnly:!1,format:Tn,formatter:_n.formatters[Tn],indices:!1,serializeDate:skipNulls:!1,strictNullHandling:!1},An=Rn=vn,Mn=Object.prototype.hasOwnProperty,Un=Array.isArray,jn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Rn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Dn=xn=In=Fn={formats:hn,parse:stringify:;function Gn(e){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(e)}var Kn=ar Bn=Kn,Hn=qn;n.prototype.clearTimeout=qn.prototype.parse=function(e){return this._parser=e,this},qn.prototype.responseType=function(e){return this._responseType=e,this},qn.prototype.serialize=qn.prototype.timeout=qn.prototype.retry=var zn=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),Zn=new Set([408,413,429,500,502,503,504,521,522,524]);qn.prototype._shouldRetry=qn.prototype._retry=qn.prototype.then=qn.prototype.catch=qn.prototype.use=qn.prototype.ok=function(e){if("function"!=typeof e)throw new Error("Callback required");return this._okCallback=e,this},qn.prototype._isResponseOK=qn.prototype.get=function(e){return this._header[e.toLowerCase()]},qn.prototype.getHeader=qn.prototype.get,qn.prototype.set=qn.prototype.unset=qn.prototype.field=qn.prototype.abort=qn.prototype._auth=qn.prototype.withCredentials=qn.prototype.redirects=function(e){return this._maxRedirects=e,this},qn.prototype.maxResponseSize=qn.prototype.toJSON=qn.prototype.send=qn.prototype.sortQuery=qn.prototype._finalizeQueryString=qn.prototype._appendQueryString=qn.prototype._timeoutError=qn.prototype._setTimeouts=var Wn={};unction Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Wn.type=Wn.params=Wn.parseLinks=Wn.cleanHeader=var $n=Wn,Xn=Qn;function Qn(e){if(e)return function(e){for(var t in Qn.prototype)Object.prototype.hasOwnProperty.call(Qn.prototype,t)&&(e[t]=Qn.prototype[t]);return e}(e)}prototype.get=Qn.prototype._setHeaderProperties=Qn.prototype._setStatusProperties=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((),tr.prototype._setDefaults=var nr=tr;!function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r;"undefined"!=typeof window?r=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),r=void 0):r=self;var i=Vt.exports,o=Jt,s=Fn,a=Hn,u=Kn,c=Xn,l=nr;function p(){}e.exports=var h=t=e.exports;t.Request=m,h.getXHR=var f="".trim?lizeObject=d,h.parseString=g,h.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":s.stringify,"application/json":o},h.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},c(v.prototype),v.prototype._parseBody=v.prototype.toError=h.Response=v,i(m.prototype),a(m.prototype),m.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},m.prototype.accept=m.prototype.auth=m.prototype.query=m.prototype.attach=m.prototype._getFormData=m.prototype.callback=m.prototype.crossDomainError=m.prototype.agent=m.prototype.ca=m.prototype.agent,m.prototype.buffer=m.prototype.ca,m.prototype.write=m.prototype.pipe=m.prototype.write,m.prototype._isHost=m.prototype.end=m.prototype._setUploadTimeout=m.prototype._end=h.agent=["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((),l.prototype.del=l.prototype.delete,h.get=function(e,t,n){var r=h("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},h.head=function(e,t,n){var r=h("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},h.options=function(e,t,n){var r=h("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},h.del=_,h.delete=_,h.patch=function(e,t,n){var r=h("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},h.post=function(e,t,n){var r=h("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},h.put=(Wt,Wt.exports);var rr=Wt.exports;ction ar(e,t,n){var r=rr.get(this.getStandardOrigin()+t.url).set(t.headers).query(e);return or.call(this,r,t,n)}function ur(e,t,n){var r=rr.get(this.getStandardOrigin()+t.url).set(t.headers).query(e);return or.call(this,r,t,n)}function cr(e,t,n,r){var i=rr.post(this.getStandardOrigin()+n.url).query(e).set(n.headers).send(t);return or.call(this,i,n,r)} fr,dr=function(){eturn Object.defineProperty(e.prototype,"algo",{get:function(){return"aes-256-cbc"},enumerable:!1,configurable:!0}),e.prototype.encrypt=function(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,this.getKey(e)];case 1:if(n=r.sent(),t instanceof ArrayBuffer)return[2,this.encryptArrayBuffer(n,t)];if("string"==typeof t)return[2,this.encryptString(n,t)];throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer")}}))}))},e.prototype.decrypt=e.prototype.encryptFile=e.prototype.decryptFile=e.prototype.getKey=e.prototype.encryptArrayBuffer=e.prototype.decryptArrayBuffer=e.prototype.encryptString=e.prototype.decryptString=function(e,t){return s(this,void 0,void 0,(function(){var n,i,o,s;return a(this,(function(a){switch(a.label){case 0:return n=r.from(t),i=n.slice(0,16),o=n.slice(16),[4,crypto.subtle.decrypt({name:"AES-CBC",iv:i},e,o)];case 1:return s=a.sent(),[2,r.from(s).toString("utf8")]}}))}))},e.IV_LENGTH=16,e}(),yr=(fr=),fr.supportsFile="undefined"!=typeof File,fr.supportsBlob="undefined"!=typeof Blob,fr.supportsArrayBuffer="undefined"!=typeof ArrayBuffer,fr.supportsBuffer=!1,fr.supportsStream=!1,fr.supportsString=!0,fr.supportsEncryptFile=!0,fr.supportsFileUri=!1,fr);ar br=function(e){function n(t){var n=this,r=t.listenToBrowserNetworkEvents,i=void 0===r||r;return t.sdkFamily="Web",t.networking=new qt({del:pr,get:ur,post:cr,patch:lr,sendBeacon:gr,getfile:ar,postfile:sr}),t.cbor=new Zt((,v),t.PubNubFile=yr,t.cryptography=new dr,n=e.call(this,t)||this,i&&(window.addEventListener("offline",(function(){n.networkDownDetected()})),window.addEventListener("online",()),n}return t(n,e),n}(Ht);return br}()},139550:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SpecialEventType:()=>s,default:()=>j});var r=n(615919),i=n(199009),o=n(131382);let s={}),a={}),u=function(e){return e.MESSAGE="MESSAGE",e.CONNECTED="CONNECTED",e.ACCESS_DENIED="ACCESS_DENIED",e.NETWORK_DOWN="NETWORK_DOWN",e.NETWORK_UP="NETWORK_UP",e.RECONNECT="RECONNECT",e}({});var c=n(42441),l=n.n(c);let p={}),h=!1;const f="[Frontend PubSub] ";function d(e,...t){h&&console.log(f+e,...t)}function y(e,...t){console.info(f+e,...t)}function g(e,...t){console.error(f+e,...t)}class b{constructor(e){(0,i.Z)(this,"pubNubClient",void 0),(0,i.Z)(this,"messageHandler",void 0),(0,i.Z)(this,"tooMuchHistoryHandler",void 0),(0,i.Z)(this,"historyFetched",((e,t)=>{if(e.error)return void g("Error fetching history,",e.statusCode);if(!this.pubNubClient)return;const n=[];for(let r in t.channels){const e=t.channels[r];for(let t of e)this.messageHandler(t);25===e.length&&n.push({channelName:r,timeToken:e[e.length-1].timetoken})}n.length>0&&this.tooMuchHistoryHandler()})),this.pubNubClient=e.pubNubClient,this.messageHandler=e.messageHandler,this.tooMuchHistoryHandler=e.tooMuchHistoryHandler}fetch(e,t){for(let n=0;n<e.length;n+=500){const r=e.slice(n,n+500);this.pubNubClient.fetchMessages({channels:r,count:25,end:t},this.historyFetched)}}}class v{constructor(e){(0,i.Z)(this,"pubNubClient",void 0),(0,i.Z)(this,"historyFetcher",void 0),(0,i.Z)(this,"eventEmitter",new o.EventEmitter2),(0,i.Z)(this,"lastTimeToken",void 0),(0,i.Z)(this,"lastTimeTokenBeforeNetworkDisconnection",void 0),(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"connectionState",void 0),(0,i.Z)(this,"featureFlags",void 0),(0,i.Z)(this,"onMessageEvent",(e=>{(!this.lastTimeToken||this.lastTimeToken<e.timetoken)&&(this.lastTimeToken=e.timetoken);const t=e.message;for(let n of t.messages)this.eventEmitter.emit(u.MESSAGE,n.type,n.payload)})),(0,i.Z)(this,"onStatusEvent",(e=>{switch(e.category){case"PNConnectedCategory":this.onConnected();break;case"PNNetworkIssuesCategory":case"PNNetworkDownCategory":this.onNetworkDown();break;case"PNAccessDeniedCategory":this.onAccessDenied();break;case"PNNetworkUpCategory":case"PNReconnectedCategory":this.onReconnect();break;case"PNRequestMessageCountExceededCategory":this.onMessageCountExceeded()}})),this.featureFlags=e,this.connectionState=p.OFFLINE}getType(){return"pubnub"}getCapabilities(){return["PUBNUB"]}subscribe(e){d("Subscribing"),this.connectionState=p.CONNECTING,this.pubNubClient&&e.subscribeKey===this.config.subscribeKey?this.updateClientConfig(e):this.pubNubClient=this.initializeClient(e),this.config=e;const t={channels:e.channels,channelGroups:e.channelGroups};this.pubNubClient.subscribe(t)}n(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}networkUp(){this.connectionState===p.OFFLINE&&this.pubNubClient&&(this.connectionState=p.CONNECTING,this.pubNubClient.reconnect())}networkDown(){this.pubNubClient&&this.pubNubClient.reconnect()}getLastTimeToken(){return this.lastTimeToken}pdateClientConfignitializeClient(e){const t=new(l())({subscribeKey:e.subscribeKey,authKey:e.authKey,uuid:e.userUuid,dedupeOnSubscribe:!0,restore:!0,ssl:!0,requestMessageCountThreshold:100});return this.historyFetcher=new b({pubNubClient:t,messageHandler:this.onMessageEvent,tooMuchHistoryHandler:),t.addListener({message:this.onMessageEvent,status:this.onStatusEvent}),t}onConnected(){d("Connected"),this.connectionState=p.CONNECTED,this.eventEmitter.emit(u.NETWORK_UP,{})}onNetworkDown(){if(this.connectionState===p.OFFLINE)return;d("Network down"),this.connectionState=p.OFFLINE;let e=this.lastTimeToken;e||(e=(new Date).getTime()+"0000"),this.lastTimeTokenBeforeNetworkDisconnection=e,d("Last time token: "+this.lastTimeTokenBeforeNetworkDisconnection),this.eventEmitter.emit(u.NETWORK_DOWN,{})}onAccessDenied(){this.connectionState!==p.ACCESS_DENIED&&(d("Access denied"),this.connectionState=p.ACCESS_DENIED,this.eventEmitter.emit(u.ACCESS_DENIED,{}))}onReconnect(){d("Reconnected"),this.eventEmitter.emit(u.NETWORK_UP,{})}onMessageCountExceeded(){d("Message count exceeded, fetching history"),this.historyFetcher&&this.historyFetcher.fetch(this.config.channels,this.lastTimeTokenBeforeNetworkDisconnection)}}class m{subscribeAll(){}n(e,t){}etworkUp(){}const _=var O=n(986855);class S{constructor(e){(0,i.Z)(this,"analyticsClient",void 0),(0,i.Z)(this,"isFallback",void 0),(0,i.Z)(this,"eventEmitter",void 0),(0,i.Z)(this,"baseUrl",void 0),(0,i.Z)(this,"lastSeenSequenceNumber",null),this.baseUrl=e.url,this.eventEmitter=e.eventEmitter,this.analyticsClient=e.analyticsClient,this.isFallback=e.isFallback}async connectWithBackoff(e){return(0,O.backOff)(e,(0,r.Z)((0,r.Z)({},{delayFirstAttempt:!1,startingDelay:200,timeMultiple:2,numOfAttempts:this.isFallback?5:3,maxDelay:6e5}),{},{retry:(e,t)=>(this.analyticsClient.sendEvent(this.analyticsSubject(),"retrying connect",{errorMessage:(null==e?void 0:e.message)||"unknown",count:t}),!0)}))}async reconnectWithBackoff(e){return this.lastSeenSequenceNumber||(this.lastSeenSequenceNumber=_()),(0,O.backOff)(e,(0,r.Z)((0,r.Z)({},{delayFirstAttempt:!0,startingDelay:500+3*Math.random()*60*1e3,timeMultiple:2,numOfAttempts:5,maxDelay:3e5}),{},{retry:(e,t)=>(this.analyticsClient.sendEvent(this.analyticsSubject(),"retrying reconnect",{errorMessage:(null==e?void 0:e.message)||"unknown",count:t}),!0)}))}analyticsSubject(){return`aps-${this.transportType()}`.toLowerCase()}}class P extends S{constructor(e){super(e),(0,i.Z)(this,"networkUp",!1),(0,i.Z)(this,"abortController",null)}ubscribe(e){if(null==e||0===e.size)return d("channel list is null or empty. HTTP request is not going to be sent."),Promise.resolve();const t=new URL(this.baseUrl);return t.searchParams.set(P.PARAM_SUBSCRIBE_TO_CHANNELS,[...e].join(",")),null!==this.abortController?this.connectWithBackoff((()=>this.reconnectWithNewSubscriptionSet(t))):this.connectWithBackoff((()=>this.makeHttpRequest(t)))}close(){var e;d("Connection was closed by client"),this.networkUp=!1,null===(e=this.abortController)||void 0===e||e.abort("CLOSED_BY_CLIENT")}reconnectWithNewSubscriptionSet(e){return this.abortController.abort("NEW_SUBSCRIPTION_SET"),new Promise((t=>{setTimeout((,0)}))}reconnect(e){var t;return null!==(t=this.abortController)&&void 0!==t&&null!==(t=t.signal)&&void 0!==t&&t.aborted?Promise.resolve():(this.lastSeenSequenceNumber&&e.searchParams.set(P.PARAM_REPLAY_FROM,this.lastSeenSequenceNumber.toString()),this.makeHttpRequest(e))}async makeHttpRequest(e){var t;this.abortController=new AbortController;const n=await fetch(e,{signal:null===(t=this.abortController)||void 0===t?void 0:t.signal});this.onFetchSuccessful(n);try{await this.processResponse(n)}catch(r){if(!this.isAbortError(r))return this.analyticsClient.sendEvent("aps-http","reconnecting"),this.reconnectWithBackoff(()}}onFetchSuccessful(e){return this.networkUp||(this.networkUp=!0,this.eventEmitter.emit(u.NETWORK_UP,{})),this.lastSeenSequenceNumber=_(),e}isAbortError(e){var t;return"AbortError"===e.name&&(d("Request was intentionally aborted. Reason: "+(null===(t=this.abortController)||void 0===t||null===(t=t.signal)||void 0===t?void 0:t.reason)),!0)}emitMessage(e){const t=JSON.parse(e);this.lastSeenSequenceNumber=t.sequenceNumber||null,this.eventEmitter.emit(u.MESSAGE,t.type,t.payload)}async processResponse(e){var t;const n=null==e||null===(t=e.body)||void 0===t?void 0:t.getReader();if(null==n)return this.analyticsClient.sendEvent("aps-http","null response"),void d("Response body from APS request was null");const r=new TextDecoder,i=e=>(r.decode(e.value||new Uint8Array,{stream:!e.done}).split(P.MSG_BOUNDARY).filter(().forEach((),e.done?void 0:o()),o=async()=>{const e=await n.read();return i(e)};return o()}}(0,i.Z)(P,"MSG_BOUNDARY","\n"),(0,i.Z)(P,"PARAM_SUBSCRIBE_TO_CHANNELS","subscribeToChannels"),(0,i.Z)(P,"PARAM_REPLAY_FROM","replayFrom");const w=class E{constructor(e){(0,i.Z)(this,"url",void 0),(0,i.Z)(this,"promise",void 0),(0,i.Z)(this,"onMessageSendError",void 0),this.url=e.url,this.onMessageSendError=e.onMessageSendError||w,this.promise=this.initializeClient(e)}async initializeClient({url:e,onMessage:t=w,onClose:n=w,onOpen:r=w,onError:i=w}){return new Promise(((o,s)=>{const a=new WebSocket(e.toString());a.addEventListener("open",(),a.addEventListener("message",(),a.addEventListener("error",(e=>{i(e)})),a.addEventListener("close",()}))}async send(e){const t=await this.promise;t.readyState===WebSocket.OPEN?t.send(JSON.stringify(e)):this.onMessageSendError(t.readyState)}async close(){const e=await this.promise;e.readyState!==WebSocket.OPEN&&e.readyState!==WebSocket.CONNECTING||e.close()}}var C=C||{});class N extends S{constructor(e){super(e),(0,i.Z)(this,"activeChannels",new Set),(0,i.Z)(this,"closedByClient",!1),(0,i.Z)(this,"state",C.CLOSED),(0,i.Z)(this,"websocketClient",void 0),(0,i.Z)(this,"url",void 0),this.url=N.toWssUrl(e.url)}transportType(){return a.WEBSOCKET}async initClient(e){return new Promise(((t,n)=>{const r=new E({url:this.url,onOpen:()=>{this.eventEmitter.emit(u.NETWORK_UP,{}),this.closedByClient=!1,r.send({type:"subscribe",channels:e,replayFrom:this.lastSeenSequenceNumber||void 0}),this.lastSeenSequenceNumber=_(),t(r)},onMessage:e=>{const t=JSON.parse(e.data);"CHANNEL_ACCESS_DENIED"!==t.type?(this.lastSeenSequenceNumber=t.sequenceNumber,this.eventEmitter.emit(u.MESSAGE,t.type,t.payload)):this.eventEmitter.emit(u.ACCESS_DENIED,t.payload)},onClose:e=>{this.closedByClient||(this.analyticsClient.sendEvent("aps-ws","close",{code:e.code,wasClean:e.wasClean,reason:e.reason}),this.eventEmitter.emit(u.NETWORK_DOWN,{}),this.state!==C.CONNECTING&&this.state!==C.RECONNECTING?this.state===C.OPEN&&this.reconnect([...this.activeChannels]).then(().catch(n):n("connection closed"))},onMessageSendError:e=>{this.analyticsClient.sendEvent("aps-ws","error sending message",{readyState:e})},onError:)}))}async connect(e){return this.state=C.CONNECTING,this.connectWithBackoff((async()=>this.initClient(e))).then((e=>(this.state=C.OPEN,e)))}async reconnect(e){return this.state=C.RECONNECTING,this.reconnectWithBackoff((async()=>this.initClient(e))).then((e=>(this.state=C.OPEN,e)))}async subscribe(e){const t=[...e].filter((),n=[...this.activeChannels].filter(();if(0===n.length&&0===t.length)return Promise.resolve();if(t.forEach((e=>this.activeChannels.add(e))),n.forEach((),this.websocketClient){var r,i;if(t.length>0)await(null===(r=this.websocketClient)||void 0===r?void 0:r.send({type:"subscribe",channels:Array.from(t)}));if(n.length>0)await(null===(i=this.websocketClient)||void 0===i?void 0:i.send({type:"unsubscribe",channels:Array.from(n)}))}else this.websocketClient=await this.connect(t)}close(){var e,t;this.activeChannels.size>0&&(null===(t=this.websocketClient)||void 0===t||t.send({type:"unsubscribe",channels:Array.from(this.activeChannels)}),this.activeChannels.clear());this.closedByClient=!0,this.lastSeenSequenceNumber=null,null===(e=this.websocketClient)||void 0===e||e.close(),this.websocketClient=void 0,this.state=C.CLOSED}}(0,i.Z)(N,"toWssUrl",(e=>{const t=new URL(e);return t.protocol="wss",t}));class T{lass k{sendEventclass A{constructor(e=A.getDefaultUrl(),t=a.WEBSOCKET,n=!1,s){(0,i.Z)(this,"url",void 0),(0,i.Z)(this,"eventEmitter",void 0),(0,i.Z)(this,"activeTransport",void 0),(0,i.Z)(this,"fallbackTransport",void 0),(0,i.Z)(this,"skipFallback",void 0),(0,i.Z)(this,"analyticsClient",void 0),this.url=e,this.eventEmitter=new o.EventEmitter2,this.skipFallback=n,this.analyticsClient=(e=>e?new T(e):new k)(s);const u={url:this.url,eventEmitter:this.eventEmitter,analyticsClient:this.analyticsClient},c=(0,r.Z)((0,r.Z)({},u),{},{isFallback:!1}),l=(0,r.Z)((0,r.Z)({},u),{},{isFallback:!0});t===a.WEBSOCKET?(this.activeTransport=new N(c),this.fallbackTransport=new P(l)):(this.activeTransport=new P(c),this.fallbackTransport=new N(l))}etType(){return"aps"}networkDown(){y("the 'networkDown()' method is not supported by the APS protocol")}ff(e,t){this.eventEmitter.off(e,t)}ubscribe(e){this.activeTransport.subscribe(new Set(e.channels)).catch((t=>{d(`Could not subscribe using primary transport: ${this.activeTransport.transportType()}. Will fallback? ${!this.skipFallback}`,t),this.skipFallback?d("Skipping subscription fallback"):(this.analyticsClient.sendEvent("aps-protocol","falling back"),this.activeTransport=this.fallbackTransport,d(`Retrying with fallback transport: ${this.fallbackTransport.transportType()}`),this.activeTransport.subscribe(new Set(e.channels)).catch((e=>{this.analyticsClient.sendEvent("aps-protocol","fall back failed",{error:e.message||"Unknown error"})})))}))}(0,i.Z)(A,"getDefaultUrl",(()=>new URL("/gateway/wss/fps",window.location.origin)));var R=n(599635);const M={};class U{constructor(e){(0,i.Z)(this,"flags",void 0),this.flags=(0,r.Z)((0,r.Z)({},M),e)}const j=class{constructor(e,t){var n,r,a,u;((0,i.Z)(this,"config",void 0),(0,i.Z)(this,"eventEmitter",new o.EventEmitter2({maxListeners:500,wildcard:!0,delimiter:":"})),(0,i.Z)(this,"currentChannels",new Set),(0,i.Z)(this,"capabilities",[]),(0,i.Z)(this,"protocols",new Map),(0,i.Z)(this,"currentProtocol",void 0),(0,i.Z)(this,"retryCount",0),(0,i.Z)(this,"subscribeDebounced",null),(0,i.Z)(this,"subscribedToBaseEvents",!1),(0,i.Z)(this,"subscribeBaseRequest",{clientInfo:{version:"0.0.0-use.local",platform:"WEB",capabilities:this.capabilities}}),(0,i.Z)(this,"featureFlags",void 0),(0,i.Z)(this,"onMessage",(),(0,i.Z)(this,"onAccessDenied",(()=>{if(d("Access denied"),!(this.retryCount>10))return new Promise(((e,t)=>{window.setTimeout((()=>{this.subscribeToCurrentChannels().then((()=>e(this))).catch(t)}),1e3*2**this.retryCount),this.retryCount++}));g("Retry count exceeded")})),(0,i.Z)(this,"onNetworkUp",(()=>{this.retryCount=0,this.eventEmitter.emit(s.CONNECTED)})),(0,i.Z)(this,"onReconnect",(),this.config=e,this.featureFlags=new U(this.config.featureFlags),t)||(t=[new v(this.featureFlags)],null!==(n=e.apsProtocol)&&void 0!==n&&n.enabled&&t.push(new A(null===(r=e.apsProtocol)||void 0===r?void 0:r.url,null===(a=e.apsProtocol)||void 0===a?void 0:a.preferredTransport,null===(u=e.apsProtocol)||void 0===u?void 0:u.skipFallback,e.analyticsClient)));this.subscribeBaseRequest.clientInfo.capabilities=this.registerProtocols(t)}on(e,t){return this.eventEmitter.on(e,t),this}oin(e){let t=!1;return e.forEach((e=>{this.currentChannels.has(e)||(this.currentChannels.add(e),t=!0)})),t?this.debouncedSubscribeToCurrentChannels():Promise.resolve(this)}leave(e){let t=!1;return e.forEach((e=>{this.currentChannels.has(e)&&(this.currentChannels.delete(e),t=!0)})),t?this.debouncedSubscribeToCurrentChannels():Promise.resolve(this)}bouncedSubscribeToCurrentChannels(){return new Promise(((e,t)=>{this.subscribeDebounced&&window.clearTimeout(this.subscribeDebounced),this.subscribeDebounced=window.setTimeout((()=>{this.subscribeToCurrentChannels().then(().catch(t)}),10)}))}registerProtocols(e){let t=[];return e.forEach((e=>{this.protocols.set(e.getType(),e),t=t.concat(e.getCapabilities())})),t}subscribeToCurrentChannels(){const e=Array.from(this.currentChannels.values());return 0===e.length?(this.currentProtocol=void 0,this.protocols.forEach((),this.eventEmitter.removeAllListeners(),this.subscribedToBaseEvents=!1,Promise.resolve()):(this.subscribedToBaseEvents||(this.protocols.forEach((e=>{e.on(u.MESSAGE,this.onMessage),e.on(u.ACCESS_DENIED,this.onAccessDenied),e.on(u.NETWORK_UP,this.onNetworkUp),e.on(u.RECONNECT,this.onReconnect)})),this.subscribedToBaseEvents=!0),this.fetchSubscribeProtocol(e).then((e=>{const t=e.protocol;t?(this.currentProtocol=this.protocols.get(t.type),this.currentProtocol||(y(`Unknown protocol ${t.type}, using noop one.`),this.currentProtocol=new m),this.currentProtocol.subscribe(t)):g("Failed to retrieve subscription configuration",e.errors)})))}fetchSubscribeProtocol(e){return R.P6.requestService(this.config,{path:"subscribe",requestInit:{method:"POST",body:JSON.stringify((0,r.Z)((0,r.Z)({},this.subscribeBaseRequest),{},{product:this.config.product,channels:e})),headers:{"Content-Type":"application/json"}}}).then(()}}},599635:(e,t,n)=>{"use strict";n.d(t,{a3:()=>o,P6:()=>l});var r={};n.r(r),n.d(r,{requestService:()=>c});var i=n(199009);class o{constructor(){(0,i.Z)(this,"lastResult",void 0),(0,i.Z)(this,"listeners",new Set)}subscribe(e){this.listeners.add(e),this.lastResult&&e.result(this.lastResult)}tifyError(e){this.listeners.forEach((t=>{t.error&&t.error(e)}))}ar s=n(615919);const a={},u=(e,t)=>{if(t)for(const n in t)if({}.hasOwnProperty.call(t,n)){const r=t[n];if(Array.isArray(r))for(let t=0;t<r.length;t++)e[n]=r[t];else e[n]=r}},c=(e,t)=>{const{url:n,securityProvider:r,refreshedSecurityProvider:i}=e,{path:o,queryParams:l,requestInit:p}=t||a,h=r&&r(),f=((e,t="",n,r)=>{const i=new URLSearchParams(new URL(e,"https://BASE_FALLBACK").search||void 0);if(e=e.split("?")[0],n)for(const a in n)({}).hasOwnProperty.call(n,a)&&i.append(a,n[a]);if(r&&r.params)for(const a in r.params)if({}.hasOwnProperty.call(r.params,a)){const e=r.params[a];if(Array.isArray(e))for(let t=0;t<e.length;t++)i.append(a,e[t]);else i.append(a,e)}let o="";t&&"/"!==e.substr(-1)&&!t.startsWith("/")&&(o="/");let s=i.toString();return s&&(s="?"+s),`${e}${o}${t}${s}`})(n,o,l,h),d=((e,t)=>{const n={};return u(n,t),e&&u(n,e.headers),n})(h,p&&p.headers),y=((h),g=(null==t?void 0:t.ignoreResponsePayload)||!1,b=(0,s.Z)((0,s.Z)({},p),{},{headers:d,credentials:y});return fetch(f,b).then((e=>204===e.status?Promise.resolve():e.ok?g?Promise.resolve():e.json():401===e.status&&i?i().then((e=>c({url:n,securityProvider:,t))):Promise.reject({code:e.status,reason:e.statusText})))},l=r}}]);
//# sourceMappingURL=59484.BaXvJChEUj.js.map