"use strict";(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[646],{1161:(t,e,n)=>{n.d(e,{M:()=>S,q:()=>q});var r=n(7022),s=n(2438),a={"%2C":",","%3A":":","%2F":"/","%40":"@","%24":"$","%3B":";"},o=(0,r.D)(a,(function(t){return t})),i=new RegExp(o.join("|"),"g");function c(t){return a[t]}function u(t){return null==t?"null":encodeURIComponent(t).replace(i,c)}function d(t,e){var n=0,a="";return(0,r.D)(t,(function(t,r){var o,i,c=[];if("string"==typeof r||!Array.isArray(r)&&null!=r&&r.toString().length)o="&"+t+"="+u(r),n+=o.length,a+=o;else if(Array.isArray(r)&&r.length){for(n+=9,i=0;i<r.length&&(o=u((0,s.P)(r[i])),n+=o.length,!(void 0!==e&&n>=e));i++)c.push(o);a+="&"+t+"=%5B"+c.join(",")+"%5D"}})),a}function h(t,e){return e&&"string"==typeof e?"&"+t+"="+u(e):""}var l=n(5673);function f(){return""+location}var y=n(880),g=n(4917),p=n(2053),v=n(8544),b=n(9226);function m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t&&"object"==typeof t?(Object.keys(t).forEach((s=>{"object"==typeof t[s]?m(t[s],e,n,r):typeof t[s]!==n||r.includes(s)||(t[s]=e(t[s]))})),t):t}var x=n(9557),w=n(1651),B=n(2374);const C=!!navigator.sendBeacon;class S extends x.w{constructor(t){super(t),this.tooManyRequestsDelay=(0,y.Mt)(this.sharedContext.agentIdentifier,"harvest.tooManyRequestsDelay")||60,this.obfuscator=new b.RR(this.sharedContext),this.getScheme=()=>!1===(0,y.Mt)(this.sharedContext.agentIdentifier,"ssl")?"http":"https",this._events={}}sendX(t){const{endpoint:e,opts:n}=t;var r=q(e,n);if(!r)return!1;var s={retry:r.method===l.T.xhr};const a=this.createPayload(e,s);return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))({...t,payload:a,submitMethod:r})}send(t){const{payload:e={}}=t;var n=j(),s=j();e.body&&(0,r.D)(e.body,n),e.qs&&(0,r.D)(e.qs,s);var a={body:n(),qs:s()};return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))({...t,payload:a})}obfuscateAndSend(t){var e=this;const{payload:n={}}=t;return m(n,(function(){return e.obfuscator.obfuscateString(...arguments)}),"string",["e"]),this._send({...t,payload:n})}_send(t){let{endpoint:e,payload:n={},opts:r={},submitMethod:a,cbFinished:o,customUrl:i,raw:c,includeBaseParams:u=!0}=t;var h=(0,y.C5)(this.sharedContext.agentIdentifier);if(!h.errorBeacon)return!1;var f=(0,y.OP)(this.sharedContext.agentIdentifier);if(!n.body&&!r?.sendEmptyBody)return o&&o({sent:!1}),!1;let g="";g=i||(c?"".concat(this.getScheme(),"://").concat(h.errorBeacon,"/").concat(e):"".concat(this.getScheme(),"://").concat(h.errorBeacon).concat("rum"!==e?"/".concat(e):"","/1/").concat(h.licenseKey));var p=!c&&u?this.baseQueryString():"",b=n.qs?d(n.qs,f.maxBytes):"";a||(a=q(e,r));var m,x=a.method,w=a.useBody,C="".concat(g,"?").concat(p).concat(b);"gzip"===n?.qs?.content_encoding?m=n.body:w&&"events"===e?m=n.body.e:w?m=(0,s.P)(n.body):C+=d(n.body,f.maxBytes),f.bytesSent[e]=(f.bytesSent[e]||0)+m?.length||0,f.queryBytesSent[e]=(f.queryBytesSent[e]||0)+C.split("?").slice(-1)[0]?.length||0;const S=[];S.push({key:"content-type",value:"text/plain"});var A=x({url:C,body:m,sync:r.unload&&B.v6,headers:S});o&&x===l.T.xhr&&A.addEventListener("load",(function(){var t={sent:!0,status:this.status};429===this.status?(t.retry=!0,t.delay=this.tooManyRequestsDelay):408!==this.status&&500!==this.status&&503!==this.status||(t.retry=!0),r.needResponse&&(t.responseText=this.responseText),o(t)}),(0,v.m$)(!1));return A||x!==l.T.beacon||(A=(x=l.T.img)({url:C+d(n.body,f.maxBytes)})),A}baseQueryString(){var t=(0,y.OP)(this.sharedContext.agentIdentifier),e=(0,y.C5)(this.sharedContext.agentIdentifier),n=(0,g.f)(f()),r=this.obfuscator.shouldObfuscate()?this.obfuscator.obfuscateString(n):n;return["a="+e.applicationID,h("sa",e.sa?""+e.sa:""),h("v",w.q4),A(e),h("ct",t.customTransaction),"&rst="+(0,p.z)(),"&ck=0","&s="+(t.session?.state.value||"0"),h("ref",r),h("ptid",t.ptid?""+t.ptid:"")].join("")}createPayload(t,e){for(var n=j(),s=j(),a=this._events[t]&&this._events[t]||[],o=0;o<a.length;o++){var i=a[o](e);i&&(i.body&&(0,r.D)(i.body,n),i.qs&&(0,r.D)(i.qs,s))}return{body:n(),qs:s()}}on(t,e){(this._events[t]||(this._events[t]=[])).push(e)}resetListeners(){(0,r.D)(this._events,(t=>{this._events[t]=[]}))}}function q(t,e){var n,r;return(e=e||{}).unload&&B.il?(r=C,n=C?l.T.beacon:l.T.img):(r=!0,n=l.T.xhr),{method:n,useBody:r}}function A(t){return t.transactionName?h("to",t.transactionName):h("t",t.tNamePlain||"Unnamed Transaction")}function j(){var t={},e=!1;return function(n,r){if(null!=r&&r.toString()?.length&&(t[n]=r,e=!0),e)return t}}},4917:(t,e,n)=>{n.d(e,{f:()=>a});var r=/([^?#]*)[^#]*(#[^?]*|$).*/,s=/([^?#]*)().*/;function a(t,e){return t.replace(e?r:s,"$1$2")}},9548:(t,e,n)=>{n.d(e,{V:()=>s});var r=n(2374);function s(){return Boolean("file:"===r._A?.location?.protocol)}},9226:(t,e,n)=>{n.d(e,{$c:()=>u,Ng:()=>d,RR:()=>c});var r=n(880),s=n(9557),a=n(9548),o=n(8610),i={regex:/^file:\/\/(.*)/,replacement:"file://OBFUSCATED"};class c extends s.w{shouldObfuscate(){return u(this.sharedContext.agentIdentifier).length>0}obfuscateString(t){if(!t||"string"!=typeof t)return t;for(var e=u(this.sharedContext.agentIdentifier),n=t,r=0;r<e.length;r++){var s=e[r].regex,a=e[r].replacement||"*";n=n.replace(s,a)}return n}}function u(t){var e=[],n=(0,r.Mt)(t,"obfuscate")||[];return e=e.concat(n),(0,a.V)()&&e.push(i),e}function d(t){for(var e=!1,n=!1,r=0;r<t.length;r++){"regex"in t[r]?"string"!=typeof t[r].regex&&t[r].regex.constructor!==RegExp&&((0,o.Z)('An obfuscation replacement rule contains a "regex" value with an invalid type (must be a string or RegExp)'),n=!0):((0,o.Z)('An obfuscation replacement rule was detected missing a "regex" value.'),n=!0);var s=t[r].replacement;s&&"string"!=typeof s&&((0,o.Z)('An obfuscation replacement rule contains a "replacement" value with an invalid type (must be a string)'),e=!0)}return!e&&!n}},5673:(t,e,n)=>{n.d(e,{T:()=>s});var r=n(2374);const s={jsonp:function(t){let{url:e,jsonp:n}=t;try{if(!r.v6){var a=document.createElement("script");a.type="text/javascript",a.src=e+"&jsonp="+n;var o=document.getElementsByTagName("script")[0];return o.parentNode.insertBefore(a,o),a}try{return importScripts(e+"&jsonp="+n)}catch(t){return s.xhrGet({url:e+"&jsonp="+n}),!1}}catch(t){}},xhrGet:function(t){let{url:e}=t;return s.xhr({url:e,sync:!1,method:"GET"})},xhr:function(t){let{url:e,body:n=null,sync:r,method:s="POST",headers:a=[{key:"content-type",value:"text/plain"}]}=t;var o=new XMLHttpRequest;o.open(s,e,!r);try{"withCredentials"in o&&(o.withCredentials=!0)}catch(t){}return a.forEach((t=>{o.setRequestHeader(t.key,t.value)})),o.send(n),o},img:function(t){let{url:e}=t;var n=new Image;return n.src=e,n},beacon:function(t){let{url:e,body:n}=t;const r=window.navigator.sendBeacon.bind(window.navigator);try{return r(e,n)}catch(t){return!1}}}},5330:(t,e,n)=>{n.d(e,{m:()=>c});var r=n(4045),s=n(1509),a=n(880),o=n(3975),i=n(6797);class c extends s.W{constructor(){super(...arguments),this.checkConfiguration()}waitForFlags(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(t.map((t=>new Promise((e=>{(0,r.X)("feat-".concat(t),(()=>{e({name:t,value:!0})}),this.featureName,this.ee),(0,r.X)("block-".concat(t),(()=>{e({name:t,value:!1})}),this.feature,this.ee)})))))}checkConfiguration(){if(!(0,a.lF)(this.agentIdentifier)){let t={...(0,i.gG)().info?.jsAttributes};try{t={...t,...(0,a.C5)(this.agentIdentifier)?.jsAttributes}}catch(t){}(0,o.j)(this.agentIdentifier,{...(0,i.gG)(),info:{...(0,i.gG)().info,jsAttributes:t},runtime:(0,a.OP)(this.agentIdentifier)})}}}}}]);