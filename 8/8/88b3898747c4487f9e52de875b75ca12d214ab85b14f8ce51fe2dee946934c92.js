(function(){var U="SDK_"+"6.27.0-6b00ae61-201901112137".replace(/[^\w]/g,"_"),w="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:this;w.tv=w.tv||{};w.tv.freewheel=w.tv.freewheel||{};w.tv.freewheel[U]=function(w){var a={version:"js-6.27.0-6b00ae61-201901112137"};"undefined"!==typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version);a.LOG_LEVEL_QUIET=0;a.LOG_LEVEL_INFO=1;a.LOG_LEVEL_DEBUG=2;a.setLogLevel=function(b){a.warn=a.log=a.debug=
function(){};if("undefined"!==typeof console){try{window.localStorage&&window.localStorage.getItem("fwLogLevel")&&-1<window.localStorage.getItem("fwLogLevel")&&(b=window.localStorage.getItem("fwLogLevel"))}catch(c){console.warn(">FW Common.setLogLevel"+c.description)}b>a.LOG_LEVEL_QUIET&&(a.log=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},a.warn=function(){console.warn(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},
b>a.LOG_LEVEL_INFO&&(a.debug=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))}))}};a.setLogLevel(a.LOG_LEVEL_INFO);a.log("FreeWheel Integration Runtime",a.version);a.proxyUrl=null;a.proxyAuthenticationParameter=null;a.setProxy=function(b){"string"===typeof b?("/"!==b.charAt(b.length-1)&&(b+="/"),a.proxyUrl=b):a.proxyUrl=null};a.setProxyAuthenticationParameter=a.checkUserAgent=function(b){a.PLATFORM_IS_WINDOWSPHONE=-1<b.search("windows phone");a.PLATFORM_IS_IPAD=-1<b.search("ipad");a.PLATFORM_IS_IPHONE_IPOD=-1<b.search("iphone")||-1<b.search("ipod");a.PLATFORM_IS_CHROMECAST=-1<b.search("crkey");var c=function(a){return(a=b.match(a))&&0<a.length?(a=a[0].match(/\d+/g),1*a[0]+.1*a[1]):0};a.PLATFORM_IE_MOBILE_VERSION=c(/iemobile\/\d+\.\d+/);a.PLATFORM_IOS_VERSION=c(/os \d+_\d+/);c=-1<b.indexOf("transformer")?3.2:c(/android \d+\.\d+/);a.PLATFORM_ANDROID_VERSION=
c;a.PLATFORM_IS_SAFARI=0<a.PLATFORM_IOS_VERSION&&-1<b.search("applewebkit")||0===a.PLATFORM_ANDROID_VERSION&&0>b.search("chrome")&&-1<b.search("safari");a.PLATFORM_IS_CHROME=0>b.search("edge")&&-1<b.search("chrome");a.PLATFORM_IS_FIREFOX=-1<b.search("firefox");a.PLATFORM_IS_MOBILE=0<a.PLATFORM_IOS_VERSION||0<a.PLATFORM_ANDROID_VERSION;a.PLATFORM_BROWSER_VERSION=b);a.PLATFORM_ID=a.PLATFORM_IS_MOBILE?0<a.PLATFORM_ANDROID_VERSION?"Android"+a.PLATFORM_ANDROID_VERSION:a.PLATFORM_IS_IPAD?"iPad"+a.PLATFORM_IOS_VERSION:a.PLATFORM_IS_IPHONE_IPOD?"iPhone"+a.PLATFORM_IOS_VERSION:"UnknownMobile":"Desktop";a.log("Device:",a.PLATFORM_ID,"PLATFORM_IS_SAFARI:",a.PLATFORM_IS_SAFARI,"PLATFORM_IS_CHROME:",a.PLATFORM_IS_CHROME)};a.checkUserAgent(navigator.userAgent.toLowerCase());a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?
"touchend":"click";a.MOBILE_EVENT_DRAG="touchmove";a.PLATFORM_SEND_REQUEST_BY_FORM=!1;a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_MOVE_POSITION=3.1<=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_SET_DISPLAY=!0;a.PLATFORM_SUPPORT_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=a.PLATFORM_IS_IPAD||a.PLATFORM_IS_IPHONE_IPOD;a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD;a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||0<a.PLATFORM_ANDROID_VERSION&&3.1>a.PLATFORM_ANDROID_VERSION||
a.PLATFORM_IS_WINDOWSPHONE;a.PLATFORM_FILL_VIDEO_POOL_FOR_MIDROLL=4.2<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=2.2<=a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION||9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_NOT_SUPPORT_VIDEO_AD=0<a.PLATFORM_ANDROID_VERSION&&2.1>=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_DETECT_FULL_SCREEN_FOR_MIDROLL=a.PLATFORM_IS_IPAD&&4.2<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD&&10>a.PLATFORM_IOS_VERSION||
a.PLATFORM_IS_WINDOWSPHONE||a.PLATFORM_IS_CHROMECAST;a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=3.1<=a.PLATFORM_ANDROID_VERSION||10<=a.PLATFORM_IOS_VERSION;a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT=0<a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=0<a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION&&4<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL=
!1;a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||4<=a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_OVERLAY_CLICK_WHEN_CONTROLS_IS_TRUE=a.PLATFORM_IS_IPAD;a.PLATFORM_BLOCKS_AUTOPLAY=a.PLATFORM_IS_MOBILE||a.PLATFORM_IS_SAFARI||a.PLATFORM_IS_CHROME&&(0<a.PLATFORM_ANDROID_VERSION||64<=a.PLATFORM_BROWSER_VERSION);a.RENDERER_STATE_INIT=1;a.RENDERER_STATE_STARTING=2;a.RENDERER_STATE_STARTED=3;a.RENDERER_STATE_COMPLETING=4;a.RENDERER_STATE_COMPLETED=
5;a.RENDERER_STATE_FAILED=6;a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT;a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING;a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED;a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING;a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED;a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED;a.EVENT_AD="adEvent";a.EVENT_AD_BUFFERING_START="adBufferingStart";a.EVENT_AD_BUFFERING_END="adBufferingEnd";a.EVENT_SLOT_IMPRESSION="slotImpression";a.EVENT_SLOT_END=
"slotEnd";a.EVENT_AD_INITIATED="adInitiated";a.EVENT_AD_IMPRESSION="defaultImpression";a.EVENT_AD_IMPRESSION_END="adEnd";a.EVENT_AD_QUARTILE="quartile";a.EVENT_AD_FIRST_QUARTILE="firstQuartile";a.EVENT_AD_MIDPOINT="midPoint";a.EVENT_AD_THIRD_QUARTILE="thirdQuartile";a.EVENT_AD_SKIPPED="adSkipped";a.EVENT_AD_COMPLETE="complete";a.EVENT_AD_CLICK="defaultClick";a.EVENT_AD_MUTE="_mute";a.EVENT_AD_UNMUTE="_un-mute";a.EVENT_AD_COLLAPSE="_collapse";a.EVENT_AD_EXPAND="_expand";a.EVENT_AD_PAUSE="_pause";a.EVENT_AD_RESUME=
"_resume";a.EVENT_AD_REWIND="_rewind";a.EVENT_AD_ACCEPT_INVITATION="_accept-invitation";a.EVENT_AD_CLOSE="_close";a.EVENT_AD_MINIMIZE="_minimize";a.EVENT_ERROR="_e_unknown";a.EVENT_RESELLER_NO_AD="resellerNoAd";a.EVENT_AD_MEASUREMENT="concreteEvent";a.EVENT_EXTENSION_LOADED="extensionLoaded";a.EVENT_AD_VOLUME_CHANGE="adVolumeChange";a.EVENT_AD_AUTO_PLAY_BLOCKED="videoAutoPlayBlocked";a.INFO_KEY_CUSTOM_ID="customId";a.INFO_KEY_MODULE_TYPE="moduleType";a.MODULE_TYPE_EXTENSION="extension";a.MODULE_TYPE_RENDERER=
"renderer";a.MODULE_TYPE_TRANSLATOR="translator";a.INFO_KEY_ERROR_CODE="errorCode";a.INFO_KEY_ERROR_INFO="errorInfo";a.INFO_KEY_ERROR_MODULE="errorModule";a.INFO_KEY_VAST_ERROR_CODE="vastErrorCode";a.ERROR_IO="_e_io";a.ERROR_TIMEOUT="_e_timeout";a.ERROR_NULL_ASSET="_e_null-asset";a.ERROR_ADINSTANCE_UNAVAILABLE="_e_adinst-unavail";a.ERROR_UNKNOWN="_e_unknown";a.ERROR_MISSING_PARAMETER="_e_missing-param";a.ERROR_NO_AD_AVAILABLE="_e_no-ad";a.ERROR_PARSE="_e_parse";a.ERROR_INVALID_VALUE="_e_invalid-value";
a.ERROR_INVALID_SLOT="_e_invalid-slot";a.ERROR_NO_RENDERER="_e_no-renderer";a.ERROR_DEVICE_LIMIT="_e_device-limit";a.ERROR_3P_COMPONENT="_e_3p-comp";a.ERROR_UNSUPPORTED_3P_FEATURE="_e_unsupp-3p-feature";a.ERROR_SECURITY="_e_security";a.ERROR_UNMATCHED_SLOT_SIZE="_e_slot-size-unmatch";a.INFO_KEY_URL="url";a.INFO_KEY_SHOW_BROWSER="showBrowser";a.INFO_KEY_CUSTOM_EVENT_NAME="customEventName";a.INFO_KEY_NEED_EMPTY_CT="needEmptyCT";a.INFO_KEY_CONCRETE_EVENT_ID="concreteEventId";a.EVENT_TYPE_CLICK_TRACKING=
"CLICKTRACKING";a.EVENT_TYPE_IMPRESSION="IMPRESSION";a.EVENT_TYPE_CLICK="CLICK";a.EVENT_TYPE_STANDARD="STANDARD";a.EVENT_TYPE_GENERIC="GENERIC";a.EVENT_TYPE_ERROR="ERROR";a.EVENT_VIDEO_VIEW="videoView";a.SHORT_EVENT_TYPE_IMPRESSION="i";a.SHORT_EVENT_TYPE_CLICK="c";a.SHORT_EVENT_TYPE_STANDARD="s";a.SHORT_EVENT_TYPE_ERROR="e";a.INIT_VALUE_ZERO="0";a.INIT_VALUE_ONE="1";a.INIT_VALUE_TWO="2";a.INFO_KEY_PARAMETERS="parameters";a.URL_PARAMETER_KEY_ET="et";a.URL_PARAMETER_KEY_CN="cn";a.URL_PARAMETER_KEY_INIT=
"init";a.URL_PARAMETER_KEY_CT="ct";a.URL_PARAMETER_KEY_METR="metr";a.URL_PARAMETER_KEY_CR="cr";a.URL_PARAMETER_KEY_KEY_VALUE="kv";a.URL_PARAMETER_KEY_ERROR_INFO="additional";a.URL_PARAMETER_KEY_ERROR_MODULE="renderer";a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID="reid";a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID="creid";a.CAPABILITY_SLOT_TEMPLATE="sltp";a.CAPABILITY_DISPLAY_REFRESH="rfnt";a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS="emcr";a.CAPABILITY_RECORD_VIDEO_VIEW="exvt";a.CAPABILITY_CHECK_COMPANION="cmpn";
a.CAPABILITY_CHECK_TARGETING="targ";a.CAPABILITY_RESET_EXCLUSIVITY="rste";a.CAPABILITY_FALLBACK_UNKNOWN_ASSET="unka";a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION="unks";a.CAPABILITY_FALLBACK_ADS="fbad";a.CAPABILITY_SLOT_CALLBACK="slcb";a.CAPABILITY_NULL_CREATIVE="nucr";a.CAPABILITY_AUTO_EVENT_TRACKING="aeti";a.CAPABILITY_RENDERER_MANIFEST="rema";a.CAPABILITY_REQUIRE_VIDEO_CALLBACK="vicb";a.CAPABILITY_SKIP_AD_SELECTION="skas";a.SLOT_TYPE_TEMPORAL="temporal";a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL="videoPlayerNonTemporal";
a.SLOT_TYPE_SITESECTION_NONTEMPORAL="siteSectionNonTemporal";a.TIME_POSITION_CLASS_PREROLL="PREROLL";a.TIME_POSITION_CLASS_MIDROLL="MIDROLL";a.TIME_POSITION_CLASS_POSTROLL="POSTROLL";a.TIME_POSITION_CLASS_OVERLAY="OVERLAY";a.TIME_POSITION_CLASS_DISPLAY="DISPLAY";a.TIME_POSITION_CLASS_PAUSE_MIDROLL="PAUSE_MIDROLL";a.EVENT_REQUEST_INITIATED="onRequestInitiated";a.EVENT_REQUEST_COMPLETE="onRequestComplete";a.EVENT_SLOT_STARTED="onSlotStarted";a.EVENT_SLOT_ENDED="onSlotEnded";a.EVENT_CONTENT_VIDEO_PAUSED=
"contentVideoPaused";a.EVENT_CONTENT_VIDEO_RESUMED="contentVideoResumed";a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST="contentVideoPauseRequest";a.EVENT_CONTENT_VIDEO_RESUME_REQUEST="contentVideoResumeRequest";a.CAPABILITY_STATUS_OFF=0;a.CAPABILITY_STATUS_ON=1;a.PARAMETER_LEVEL_PROFILE=0;a.PARAMETER_LEVEL_GLOBAL=1;a.PARAMETER_LEVEL_OVERRIDE=5;a.PARAMETER_ENABLE_FORM_TRANSPORT="sdk.enableFormTransport";a.PARAMETER_DESIRED_BITRATE="desiredBitrate";a.PARAMETER_VIDEO_POOL_SIZE="sdk.videoPoolSize";a.PARAMETER_PAGE_SLOT_CONTENT_TYPE=
"sdk.pageSlotContentType";a.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT="PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT";a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT="extension.ad.control.clickElement";a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED="extension.contentVideo.enabled";a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME="extension.contentVideo.respondPauseResume";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK="extension.contentVideo.autoSeekBack";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE=
"extension.contentVideo.autoSourceRestore";a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED="extension.videoState.enabled";a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT="renderer.video.startDetectTimeout";a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT="renderer.video.progressDetectTimeout";a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY="renderer.video.android.delay";a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE="renderer.video.displayControlsWhenPause";a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION=
"renderer.video.clickDetection";a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED="renderer.video.playAfterStalled";a.PARAMETER_EXTENSION_SURVEY_ENABLED="extension.survey.enabled";a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE="autoPauseAdOnVisibilityChange";a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME="renderer.html.coadScriptName";a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT="renderer.html.isBackgroundTransparent";a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION="renderer.html.shouldEndAfterDuration";
a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT="renderer.html.adLoadTimeout";a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE="renderer.html.placementType";a.PARAMETER_RENDERER_HTML_BOOTSTRAP="renderer.html.bootstrap";a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR="renderer.html.primaryAnchor";a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH="renderer.html.marginWidth";a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT="renderer.html.marginHeight";a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY="renderer.vpaid.creativeTimeoutDelay";a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS=
"translator.vast.timeoutInMilliseconds";a.PARAMETER_VAST_MAX_WRAPPER_COUNT="translator.vast.maxWrapperCount";a.VAST_DEFAULT_MAX_WRAPPER_COUNT=5;a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INLINE="inline";a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL="interstitial";a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL="app-interstitial";a.ID_TYPE_FW=1;a.ID_TYPE_CUSTOM=2;a.ID_TYPE_GROUP=3;a.VIDEO_STATE_PLAYING=1;a.VIDEO_STATE_PAUSED=2;a.VIDEO_STATE_STOPPED=3;a.VIDEO_STATE_COMPLETED=4;a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=
1;a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2;a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3;a.VIDEO_ASSET_AUTO_PLAY_TYPE_NON_AUTO_PLAY=3;a.VIDEO_ASSET_DURATION_TYPE_EXACT="exact";a.VIDEO_ASSET_DURATION_TYPE_VARIABLE="variable";a.ADUNIT_PREROLL="preroll";a.ADUNIT_MIDROLL="midroll";a.ADUNIT_POSTROLL="postroll";a.ADUNIT_OVERLAY="overlay";a.ADUNIT_STREAM_PREROLL="stream_preroll";a.ADUNIT_STREAM_POSTROLL="stream_postroll";a.SLOT_LOCATION_PLAYER="player";a.SLOT_LOCATION_EXTERNAL="external";a.SLOT_OPTION_INITIAL_AD_STAND_ALONE=
0;a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL=1;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY=2;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE=3;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE=4;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE=5;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE=6;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL=7;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL=8;a.REQUEST_MODE_ON_DEMAND="on-demand";a.REQUEST_MODE_LIVE="live";
a.MINIMUM_VAST_VERSION_SUPPORTED=2;a.MAXIMUM_VAST_VERSION_SUPPORTED=4;a.ERROR_VAST_XML_PARSING="100";a.ERROR_VAST_SCHEMA_VALIDATION="101";a.ERROR_VAST_VERSION_NOT_SUPPORTED="102";a.ERROR_VAST_TRACKING_ERROR="200";a.ERROR_VAST_LINEARITY_NOT_MATCH="201";a.ERROR_VAST_NO_AD="303";a.ERROR_VAST_WRAPPER_LIMIT_REACH="302";a.ERROR_VAST_URI_TIMEOUT="301";a.ERROR_VAST_GENERAL_LINEAR_ERROR="400";a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR="500";a.ERROR_VAST_COMPANION_GENERAL_ERROR="600";a.ERROR_VAST_GENERAL_VPAID_ERROR=
"901";a.Util={canPlayVideoType:function(b){if(a.PLATFORM_IS_SAFARI&&("video/ogg"===b||"video/webm"===b))return!1;if(1<a.PLATFORM_ANDROID_VERSION&&"video/m4v"===b)return!0;"video/3gp"===b&&(b="video/3gpp");if(3<=a.PLATFORM_ANDROID_VERSION&&"video/3gpp"===b)return!0;var c=document.createElement("video");return c.canPlayType?!(!c.canPlayType(b)&&!c.canPlayType(b.replace("/","/x-"))):!1},str2bool:
trim:isBlank:encodeToHex:forEachOnArray:mixin:copy:bind:getObject:buildNode:function(b,c,d,e,f){a.debug("Util.buildNode");d||(d=document);b.innerHTML=c||"";b=b.getElementsByTagName("script");var h=d.getElementsByTagName("head")[0];for(c=0;c<b.length;++c)if(a.PLATFORM_IS_FIREFOX||b[c].src){var g=d.createElement("script");b[c].charset&&(g.charset=b[c].charset);b[c].src&&(g.src=b[c].src);b[c].innerHTML&&(g.innerHTML=b[c].innerHTML);g.onload=g.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||h.removeChild(g)};
try{h.appendChild(g)}catch(k){a.warn("load script err: "+k)}}else g=b[c].innerHTML,e&&(g=g.replace(/var fw_scope = document;/,"var fw_scope="+e+";")),f&&(g=g.replace(/var fw_scope_window = window;/,"var fw_scope_window="+f+";")),eval(g)},replacePageSlot:function(b,c,d){var e=b;a.debug("Util.replacePageSlot("+Array.prototype.slice.call(arguments).join(",")+")");var f;try{var h=document.getElementById(e)?document:parent.document.getElementById(e)?parent.document:null;var g=document.getElementById(e)?
"window":parent.document.getElementById(e)?"parent":null}catch(m){g=h=null}if(!h)for(var k=0;k<window.frames.length;k++)try{window.frames[k].document.getElementById(e)&&(h=window.frames[k].document,g="window.frames["+k+"]")}catch(m){a.warn(m)}g&&(f=g+".document");a.log("replacing slot "+e+" in frame "+f);if(!h)throw"Slot element not found: "+e;e=d?h.getElementById(d):h.getElementById("_fw_container_"+e);a.Util.buildNode(e,c,h,f,g)},transformUrlToProxy:function(b){if(null==a.proxyUrl)return b;var c=
a.proxyUrl.replace("$","$$");b=b.replace(/https?:\/\//,c);a.proxyAuthenticationParameter&&(b=a.Util.setParameterInURL(b,a.proxyAuthenticationParameter.key,a.proxyAuthenticationParameter.value));return b},pingURLWithImage:pingURLWithForm:pingURLWithScript:pingURL:function(b){a.debug("send callback: "+b);b&&(a.PLATFORM_SEND_REQUEST_BY_FORM?a.Util.pingURLWithForm(b,null,!1):a.Util.pingURLWithImage(b))},pingURLs:setParameterInURL:getParameterInURL:isParameterInURL:flashVersion:xmlToJson:lazyJavaScriptLoad:getViewport:getAbsoluteUrl:secondsToHms:getFixedDigitRandomNumber:getDateStringInISOFormat:;a.MediaState=function(){};a.MediaState.prototype={};a.MediaState.prototype.constructor=a.MediaState;a.Util.mixin(a.MediaState.prototype,{play:function(b){a.debug(this._name+" play("+b+")")},pause:function(b){a.debug(this._name+" pause("+b+")")},complete:);a.MediaInitState=function(){this._name="MediaInitState"};a.MediaInitState.prototype=new a.MediaState;a.MediaInitState.prototype.constructor=a.MediaInitState;a.Util.mixin(a.MediaInitState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onStartPlaying)b.onStartPlaying()}});a.MediaInitState.instance=new a.MediaInitState;a.MediaPlayingState=function(){this._name="MediaPlayingState"};a.MediaPlayingState.prototype=
new a.MediaState;a.MediaPlayingState.prototype.constructor=a.MediaPlayingState;a.Util.mixin(a.MediaPlayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});a.MediaPlayingState.instance=new a.MediaPlayingState;
a.MediaPausedState=function(){this._name="MediaPausedState"};a.MediaPausedState.prototype=new a.MediaState;a.MediaPausedState.prototype.constructor=a.MediaPausedState;a.Util.mixin(a.MediaPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});
a.MediaPausedState.instance=new a.MediaPausedState;a.MediaReplayingState=function(){this._name="MediaReplayingState"};a.MediaReplayingState.prototype=new a.MediaState;a.MediaReplayingState.prototype.constructor=a.MediaReplayingState;a.Util.mixin(a.MediaReplayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaReplayPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");
b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayingState.instance=new a.MediaReplayingState;a.MediaReplayPausedState=function(){this._name="MediaReplayPausedState"};a.MediaReplayPausedState.prototype=new a.MediaState;a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState;a.Util.mixin(a.MediaReplayPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaReplayingState.instance);
if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayPausedState.instance=new a.MediaReplayPausedState;a.MediaEndState=function(){this._name="MediaEndState"};a.MediaEndState.prototype=new a.MediaState;a.MediaEndState.prototype.constructor=a.MediaEndState;a.Util.mixin(a.MediaEndState.prototype,{play:);a.MediaEndState.instance=new a.MediaEndState;a.RendererState=a.RendererState.prototype={};a.RendererState.prototype.constructor=a.RendererState;a.Util.mixin(a.RendererState.prototype,{start:function(b){a.debug(this._name+" start() rendererController = "+b)},notifyStarted:function(b){a.debug(this._name+" notifyStarted() rendererController = "+b)},stop:function(b){a.debug(this._name+
" stop() rendererController = "+b)},complete:function(b){a.debug(this._name+" complete() rendererController = "+b)},notifyCompleted:fail:);a.RendererInitState=function(){this._name="RendererInitState"};a.RendererInitState.prototype=new a.RendererState;a.RendererInitState.prototype.constructor=
a.RendererInitState;a.RendererInitState.instance=new a.RendererInitState;a.Util.mixin(a.RendererInitState.prototype,{start:function(b){a.debug(this._name+" start()");b.setRendererState(a.RendererStartingState.instance);b.getRenderer().start(b)},stop:);a.RendererStartingState=function(){this._name="RendererStartingState"};a.RendererStartingState.prototype=new a.RendererState;
a.RendererStartingState.prototype.constructor=a.RendererStartingState;a.RendererStartingState.instance=new a.RendererStartingState;a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted:function(b){a.debug(this._name+" notifyStarted()");b.setRendererState(a.RendererStartedState.instance);b.getAdInstance().play()},stop:);a.RendererStartedState=
function(){this._name="RendererStartedState"};a.RendererStartedState.prototype=new a.RendererState;a.RendererStartedState.prototype.constructor=a.RendererStartedState;a.RendererStartedState.instance=new a.RendererStartedState;a.Util.mixin(a.RendererStartedState.prototype,{complete:stop:);a.RendererCompletingState=function(){this._name="RendererCompletingState"};a.RendererCompletingState.prototype=new a.RendererState;a.RendererCompletingState.prototype.constructor=a.RendererCompletingState;a.RendererCompletingState.instance=new a.RendererCompletingState;a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted:);a.RendererCompletedState=function(){this._name="RendererCompletedState"};a.RendererCompletedState.prototype=new a.RendererState;a.RendererCompletedState.prototype.constructor=a.RendererCompletedState;a.RendererCompletedState.instance=new a.RendererCompletedState;a.RendererFailedState=function(){this._name="RendererFailedState"};a.RendererFailedState.prototype=new a.RendererState;a.RendererFailedState.prototype.constructor=a.RendererFailedState;a.RendererFailedState.instance=
new a.RendererFailedState;a.HTMLRenderer=a.HTMLRenderer.prototype={start:function(b){this._rendererController=b;this._rendererController.getAdInstance().getSlot().getBase()?this._setupParameters()&&(this._render(),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)):this._onRendererFailed(a.ERROR_INVALID_SLOT,"slot base is empty")},pause:function(){this.log("pause");this.shouldEndAfterDuration&&this.timer&&this.timer.pause()},resume:stop:_stop:resize:_cleanup:function(){this.log("_cleanup");this.timer&&(this.timer.stop(),this.timer=null);this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null);window.removeEventListener?(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),window.removeEventListener("message",this.messageHandlerFunc,!1),window.removeEventListener("resize",this.viewportChangeFunc,!1),window.removeEventListener("scroll",this.viewportChangeFunc,
!1)):window.detachEvent&&(window.detachEvent("onmessage",this.messageHandlerFunc),window.detachEvent("onresize",this.viewportChangeFunc),window.detachEvent("onscroll",this.viewportChangeFunc));if(this.isMRAIDAd&&(this.mraid.inExpandedState()&&(this.log("stopping with expanded state, invoke close()"),this._mraidClose()),this.mraid.inDefaultState())){this.log("stopping with default state, invoke close()");this._mraidClose();return}if(this.expandedAdElement){var a=this.expandedAdElement.parentNode;this.expandedAdElement._fw_closeButton&&
a.removeChild(this.expandedAdElement._fw_closeButton);a.removeChild(this.expandedAdElement);this.expandedAdElement===this.defaultAdElement&&(this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null);this.expandedAdElement=null}this.expandedLightbox&&(a=this.expandedLightbox.parentNode,a.removeChild(this.expandedLightbox),this.expandedLightbox=null);if(this.defaultAdElement){a=this.defaultAdElement.parentNode;var c=this.defaultAdElement;
c.style.display="none";a!==this._rendererController.getAdInstance().getSlot().getBase()&&window.setTimeout(200);this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null);this.defaultAdElement=null}this.defaultAdElementContainer&&(a=this.defaultAdElementContainer.parentNode,a.removeChild(this.defaultAdElementContainer),this.defaultAdElementContainer=null);(this.shouldPauseContentWhenStart||
this.isInterstitialNow&&!this.isMRAIDAd)&&this._rendererController.requestContentStateChange(!1)},_setupParameters:function(){var b=this._rendererController.getAdInstance(),c=b.getSlot().getTimePositionClass();this._tpc=c;var d=b.getActiveCreativeRendition();b=d.getBaseUnit();d=d.getCreativeApi();var e;if(a.PLATFORM_NOT_SUPPORT_OVERLAY_AD&&c===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Overlay not supported on this device."),!1;if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&
(c===a.TIME_POSITION_CLASS_MIDROLL||c===a.TIME_POSITION_CLASS_PAUSE_MIDROLL))return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Midroll, pause_midroll not supported on this device."),!1;if(a.PLATFORM_IS_IPHONE_IPOD)switch(c){case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_OVERLAY:return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Midroll, pause_midroll and overlay ads are not supported on iPod, iPhone."),!1;case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:this._rendererController.setCapability(a.EVENT_AD_CLICK,
a.CAPABILITY_STATUS_OFF)}this.adLoadTimeout=5;if(e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT))this.adLoadTimeout=0<Number(e)?Number(e):this.adLoadTimeout;this.shouldKeepInterstitial=!1;(e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE))?this.shouldKeepInterstitial=e===a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL:"string"===typeof b&&(this.shouldKeepInterstitial=b.toLowerCase()===a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL);
this.isInterstitialNow=this.shouldKeepInterstitial;this.shouldPauseContentWhenStart=!1;this.shouldPauseContentWhenExpandOrClick=!this.shouldKeepInterstitial&&(c===a.TIME_POSITION_CLASS_DISPLAY||c===a.TIME_POSITION_CLASS_OVERLAY);this.shouldBackgroundTransparent=!1;e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT);"undefined"!==typeof e&&null!=e&&(this.shouldBackgroundTransparent=a.Util.str2bool(e));this.shouldEndAfterDuration=c!==a.TIME_POSITION_CLASS_DISPLAY||
this.shouldKeepInterstitial;e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION);"undefined"!==typeof e&&null!=e&&(this.shouldEndAfterDuration=a.Util.str2bool(e));this.coadScriptName=this._rendererController.getParameter(a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME);this.coadScriptName||(this.coadScriptName=this._rendererController.getParameter("coad_script_name"));this.primaryAnchor=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR)||
"bc";this.marginWidth=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH)||0;this.marginHeight=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT)||0;this.bootstrap=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_BOOTSTRAP);b=a.Util.getViewport();this.defaultExpandWidth=b.width;this.defaultExpandHeight=b.height;this.isMRAIDAd="MRAID-1.0"===d;this.mraid=new function(b){this.STATELOADING="loading";this.STATEDEFAULT="default";this.STATEEXPANDED=
"expanded";this.STATEHIDDEN="hidden";this._renderer=b;this._state=this.STATELOADING;this._useCustomClose=!1;this.viewable=this.expandIsModal=!0;this._baseUrlExpanded=this._baseUrlDefault="";b=Object.defineProperty||b(this,"baseUrl",{get:set:);b(this,"useCustomClose",{get:function(){return this._useCustomClose},set:);b(this,"placementType",{get:);b(this,"expandWidth",{get:function(){return this._renderer.requestedExpandWidth&&this._renderer.requestedExpandWidth<this._renderer.defaultExpandWidth?this._renderer.requestedExpandWidth:this._renderer.defaultExpandWidth}});
b(this,"expandHeight",{get:);b(this,"state",{get:function(){return this._state},set:function(b){this.log("mraid.state change "+this.state+" => "+b);this.state!==b&&(this._renderer.shouldPauseContentWhenExpandOrClick&&(b===this.STATEEXPANDED?this._renderer._rendererController.requestContentStateChange(!0):
this.inExpandedState()&&this._renderer._rendererController.requestContentStateChange(!1)),b===this.STATEEXPANDED?(this._renderer.expandedAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION}):(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer._rendererController.processEvent({name:a.EVENT_AD_EXPAND})),this._renderer.presentInterstitial(),this._renderer.shouldEndAfterDuration&&this._renderer.timer.pause()):b===this.STATEDEFAULT&&
(this._renderer.shouldKeepInterstitial?(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer.presentInterstitial()):(this.inExpandedState()&&(this._renderer.expandedAdElement!==this._renderer.defaultAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_CLOSE}):this._renderer._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})),this._renderer.expandedAdElement=null,this._renderer.presentInline()),this._renderer.shouldEndAfterDuration&&this._renderer.timer.start()),
this._state=b,this.pushData(),b===this.STATEHIDDEN&&this._renderer.stop())}});this.inLoadingState=function(){return this.state===this.STATELOADING};this.inDefaultState=function(){return this.state===this.STATEDEFAULT};this.inExpandedState=function(){return this.state===this.STATEEXPANDED};this.inHiddenState=this.pushData=this.log=function(a){this._renderer.log(a)};
this.warn=function(a){this._renderer.warn(a)}}(this);this.onLoadFunc=a.Util.bind(this,;this.touchMoveDisabler=this.log("setting parameters, adLoadTimeout: "+this.adLoadTimeout+", isMRAIDAd: "+this.isMRAIDAd+", shouldKeepInterstitial: "+this.shouldKeepInterstitial+", shouldEndAfterDuration: "+this.shouldEndAfterDuration+
", shouldPauseContentWhenStart: "+this.shouldPauseContentWhenStart+", shouldPauseContentWhenExpandOrClick: "+this.shouldPauseContentWhenExpandOrClick+", shouldBackgroundTransparent: "+this.shouldBackgroundTransparent+", defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", coadScriptName: "+this.coadScriptName+", primaryAnchor: "+this.primaryAnchor+", marginWidth: "+this.marginWidth+", marginHeight: "+this.marginHeight+", bootstrap: "+this.bootstrap);
if(!this.shouldKeepInterstitial)!this.isMRAIDAd||a.PLATFORM_IS_IPHONE_IPOD&&c!==a.TIME_POSITION_CLASS_DISPLAY||(this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_COLLAPSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON));else if(c===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_INVALID_SLOT,
"Interstitial ad is not supported in overlay slot."),!1;return!0},_render:_layoutOverlayAd:_fillAdNode:presentInline:presentInterstitial:_onWindowMessageReceived:_mraidMethods:_mraidOpen:function(b,c){this.log("_mraidOpen("+b+"), baseUrl:"+this.mraid.baseUrl+", absolute Url"+(b=a.Util.getAbsoluteUrl(this.mraid.baseUrl,b)));b&&"string"===typeof b&&0<b.length?
((c||"undefined"===typeof c)&&window.open(b),this._rendererController.processEvent({name:a.EVENT_AD_CLICK,info:{showBrowser:!1,url:b}})):this.warn("_mraidOpen: url required for open")},_mraidClose:_mraidExpand:_onViewportResizeScroll:log:function(b){var c=this._rendererController.getAdInstance().getSlot();a.log("HTMLRenderer["+
c+"]\t"+b)},warn:info:getPlayheadTime:function(){return this.timer?this.timer.getPlayheadTime():-1},getDuration:_onRendererFailed:;a.HTMLRenderer.prototype.constructor=a.HTMLRenderer;a.Ad=a.Ad.prototype={isRequiredToShow:function(){return this._isRequiredToShow},parse:getSoAdUnit:function(){return this._soAdUnit},getId:function(){return this._id},getNoLoad:function(){return this._noLoad},getCreative:addCreativeRendition:;a.Ad.prototype.constructor=a.Ad;a.Creative=a.Creative.prototype={getId:function(){return this._id},getBaseUnit:function(){return this._baseUnit},getDuration:function(){return this._duration},getParameter:function(a){return this._parameters[a]},
setParameter:function(a,c){null==c?delete this._parameters[a]:this._parameters[a]=c},parse:getAllCreativeRenditions:function(){return this._creativeRenditions},addCreativeRendition:getEligibleCreativeRenditionsForAdInstance:cloneForTranslation:;a.Creative.prototype.constructor=a.Creative;a.CreativeRendition=function(){this._id=null;this._creativeApi="None";this._baseUnit=null;this._replicaId="";this._height=this._width=this._preference=
this._wrapperUrl=this._wrapperType=this._contentType=null;this._parameters={};this._primaryCreativeRenditionAsset=null;this._otherCreativeRenditionAssets=[];this._universalAdId=this._duration=null};a.CreativeRendition.prototype={getId:function(){return this._id},getCreativeApi:function(){return this._creativeApi},setCreativeApi:getReplicaId:function(){return this._replicaId},getContentType:setContentType:function(a){this._contentType=a},getWrapperType:function(){return this._wrapperType},setWrapperType:function(a){this._wrapperType=a},getWrapperUrl:function(){return this._wrapperUrl},setWrapperUrl:function(a){this._wrapperUrl=a},getBaseUnit:function(){return this._baseUnit},setBaseUnit:function(a){this._baseUnit=a},getPreference:function(){return this._preference},setPreference:function(a){this._preference=
a},getWidth:function(){return this._width},setWidth:function(a){this._width=a},getHeight:function(){return this._height},setHeight:function(a){this._height=a},getDuration:function(){return this._duration},setDuration:function(a){this._duration=a},getParameter:setParameter:getUniversalAdId:function(){return this._universalAdId},setUniversalAdId:getPrimaryCreativeRenditionAsset:
getOtherCreativeRenditionAssets:addCreativeRenditionAsset:parse:function(b){if(b){this._id=b.creativeRenditionId||null;this._creativeApi=b.creativeApi||"None";this._replicaId=b.hasOwnProperty("adReplicaId")?b.adReplicaId:"";this._contentType=b.contentType||null;this._wrapperType=b.wrapperType||
null;this._wrapperUrl=b.wrapperUrl||null;this._preference=1*b.preference;this._width=1*b.width;this._height=1*b.height;for(var c,d=0,e=b.parameters||[];d<e.length;d++)c=e[d],this._parameters[c.name]=c.value;this._primaryCreativeRenditionAsset=new a.CreativeRenditionAsset;this._primaryCreativeRenditionAsset.parse(b.asset);d=0;for(e=b.otherAssets||[];d<e.length;d++)c=e[d],b=new a.CreativeRenditionAsset,b.parse(c),this._otherCreativeRenditionAssets.push(b)}}};a.CreativeRendition.prototype.constructor=
a.CreativeRendition;a.CreativeRenditionAsset=a.CreativeRenditionAsset.prototype={getName:function(){return this._name},setName:function(a){this._name=a},getUrl:function(){return this._url},setUrl:function(a){this._url=a},getContent:function(){return this._content},setContent:function(a){this._content=a},getContentType:function(){return this._contentType},setContentType:function(a){this._contentType=
a},getMimeType:function(){return this._mimeType},setMimeType:function(a){this._mimeType=a},getBytes:function(){return this._bytes},setBytes:function(a){this._bytes=a},parse:function(a){a&&(this._id=a.id||null,this._name=a.name||null,this._url=a.url||null,this._content=a.content||null,this._contentType=a.contentType||null,this._mimeType=a.mimeType||null,this._bytes=1*a.bytes)}};a.CreativeRenditionAsset.prototype.constructor=a.CreativeRenditionAsset;a.AdInstance=function(b){this._context=b;this._creativeRenditionId=
this._creativeId=this._soAdUnit=this._adId=this._slot=null;this._replicaId="";this._primaryCreativeRendition=this._creative=null;this._creativeRenditions=[];this._noLoad=!1;this._companionAdInstances=[];this._eventCallbacks=[];this._externalEventCallbackUrlsDictionary={};this._rendererController=new a.RendererController(b,this);this._timer=new a.Timer;this._metr=0;this._state=a.MediaInitState.instance;this._isStartSuccessfully=this._translated=this._isImpressionSent=this._isInitiatedSent=!1;this._lastDurationFromRenderer=
-1;this._slotCustomId=this._parentAdInstancesGroup=null;this._isSkipped=!1;this._wrapperCount=0};a.AdInstance.prototype={};a.AdInstance.prototype.constructor=a.AdInstance;a.METR_MASK_QUARTILE=0;a.METR_MASK_MIDPOINT=1;a.METR_MASK_COMPLETE=2;a.METR_MASK_VOLUME=3;a.METR_MASK_SIZE=4;a.METR_MASK_CONTROL=5;a.METR_MASK_REWIND=6;a.METR_MASK_ACCEPT_INVITATION=7;a.METR_MASK_CLOSE=8;a.METR_MASK_MINIMIZE=9;a.METR_MASK_CLICK=10;a.AdInstance._metrDictionary={};a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=
a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=
1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND;a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION;a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE;a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=
1<<a.METR_MASK_MINIMIZE;a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK;a.Util.mixin(a.AdInstance.prototype,{getAdId:function(){return this._adId},getUniversalAdId:getSoAdUnit:function(){return this._soAdUnit},getEventCallbackUrls:addEventCallbackUrls:setClickThroughUrl:addCreativeRendition:getRendererController:function(){return this._rendererController},getSlot:getCompanionSlots:getActiveCreativeRendition:function(){return this._primaryCreativeRendition},setActiveCreativeRendition:getAllCreativeRenditions:getRenderableCreativeRenditions:getPlayheadTime:getDuration:parse:function(b){if(b){this._adId=b.adId||null;this._creativeId=b.creativeId||null;this._creativeRenditionId=
b.creativeRenditionId||null;this._replicaId=b.hasOwnProperty("replicaId")?b.replicaId:"";this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad();this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit();this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId);this._creativeRenditions=this._creative.getEligibleCreativeRenditionsForAdInstance(this);var c,d;var e=0;for(c=b.eventCallbacks||[];e<c.length;e++){var f=c[e];if(d=a.EventCallback.newEventCallback(this._context,
f.name,f.type))d._adInstance=this,d.parse(f),this._eventCallbacks.push(d)}e=0;for(c=b.companionAds||[];e<c.length;++e)(f=c[e])&&f.adSlotCustomId&&(d=new a.AdInstance(this._context),d._slotCustomId=f.adSlotCustomId,d.parse(f),this._companionAdInstances.push(d));e=0;for(c=b.fallbackAds||[];e<c.length;++e)f=c[e],d=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(d),d._slot=this._slot,d._parentAdInstancesGroup=this._parentAdInstancesGroup,d.parse(f);0<this._creativeRenditions.length&&
(this._primaryCreativeRendition=this._creativeRenditions[0])}},play:pause:function(){a.log("AdInstance.pause "+this._slotCustomId);this._isStartSuccessfully?this._rendererController&&this._rendererController.pause():a.log("Ad hasn't started yet. Ignore.")},resume:skip:function(){a.log("AdInstance.skip");"VPAID"!==this.getActiveCreativeRendition().getCreativeApi()?(this._isSkipped=!0,this.processEvent(a.EVENT_AD_SKIPPED,a.EVENT_TYPE_GENERIC),this.stop()):a.log("VPAID creative, skip has been implemented inside of VPAID")},stop:function(){a.log("AdInstance.stop");this._rendererController.stop()},fakeComplete:complete:isStarted:function(){return this._isStartSuccessfully},onStartPlaying:onCompletePlaying:function(){},onStartReplaying:function(){},onCompleteReplaying:function(){},getEventCallback:processEvent:function(b,c,d,e){var f=!0;c=this.getEventCallback(b,
c);b===a.EVENT_AD_IMPRESSION&&this._isStartSuccessfully&&(c=this.getEventCallback(a.EVENT_ERROR,a.EVENT_TYPE_ERROR),d={errorInfo:"Trying to send defaultImpression multiple times"},f=!1);c?e||c.process(d):f=!1;b===a.EVENT_AD_CLICK&&this._context.dispatchEvent(a.EVENT_AD_CLICK,{adInstance:this});if(b!==a.EVENT_AD_IMPRESSION&&b!==a.EVENT_AD_IMPRESSION_END||a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE])e={subType:b,adInstance:this,slot:this._slot},b===
a.EVENT_ERROR&&(e[a.INFO_KEY_ERROR_CODE]=d[a.INFO_KEY_ERROR_CODE],e[a.INFO_KEY_ERROR_INFO]=d[a.INFO_KEY_ERROR_INFO],e[a.INFO_KEY_ERROR_MODULE]=d[a.INFO_KEY_ERROR_MODULE]),b===a.EVENT_AD_MEASUREMENT&&(e[a.INFO_KEY_CONCRETE_EVENT_ID]=d[a.INFO_KEY_CONCRETE_EVENT_ID]),this._context.dispatchEvent(a.EVENT_AD,e);return f},setVolume:
setMetr:getExternalEventCallbackUrls:reset:cloneForTranslation:function(){var b=new a.AdInstance(this._context);b._adId=this._adId;b._creativeId=this._creativeId;b._creative=this._creative.cloneForTranslation();b._creativeRenditionId=this._creativeRenditionId;b._isInitiatedSent=this._isInitiatedSent;b._noLoad=this._noLoad;b._slot=this.getSlot();b._soAdUnit=this.getSoAdUnit();b._replicaId=this._replicaId;b._wrapperCount=this._wrapperCount;for(var c=0;c<this._eventCallbacks.length;c++){var d=this._eventCallbacks[c].copy();
d._adInstance=b;b._eventCallbacks.push(d)}b._externalEventCallbackUrlsDictionary=a.Util.copy(this._externalEventCallbackUrlsDictionary);for(c=0;c<this._companionAdInstances.length;c++)this._companionAdInstances[c].isPlaceholder()?b._companionAdInstances.push(this._companionAdInstances[c].cloneForTranslation()):b._companionAdInstances.push(this._companionAdInstances[c]);return b},isPlaceholder:function(){return this._noLoad},setMediaState:function(a){this._state=a},_isValidEventNameAndType:function(b,
c){return a.Util.isBlank(b)||a.Util.isBlank(c)?!1:c===a.EVENT_TYPE_CLICK||c===a.EVENT_TYPE_CLICK_TRACKING||c===a.EVENT_TYPE_IMPRESSION&&(b===a.EVENT_AD_IMPRESSION||b===a.EVENT_AD_FIRST_QUARTILE||b===a.EVENT_AD_MIDPOINT||b===a.EVENT_AD_THIRD_QUARTILE||b===a.EVENT_AD_COMPLETE)||c===a.EVENT_TYPE_STANDARD&&(b===a.EVENT_AD_PAUSE||b===a.EVENT_AD_RESUME||b===a.EVENT_AD_REWIND||b===a.EVENT_AD_MUTE||b===a.EVENT_AD_UNMUTE||b===a.EVENT_AD_COLLAPSE||b===a.EVENT_AD_EXPAND||b===a.EVENT_AD_MINIMIZE||b===a.EVENT_AD_CLOSE||
b===a.EVENT_AD_ACCEPT_INVITATION)||c===a.EVENT_TYPE_ERROR&&b===a.EVENT_ERROR},isPlayable:toString:getCompanionAdInstances:isRequiredToShow:incrementWrapperCount:getWrapperCount:function(){return this._wrapperCount}});a.AdManager=function(){var b=this;this._context=this.newContext();this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,;
this._networkId=this._serverURL="";this._onRequestComplete=this._location=null};a.AdManager.prototype={getVersion:setNetwork:function(b){a.debug("AdManager.setNetwork("+Array.prototype.slice.call(arguments).join(",")+
")");if(0<1*b){this._networkId=1*b;for(var c in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(c)){var d=a._instanceQueue[c];d&&d._videoAsset._videoPlayPending&&d._videoAsset.play()}}else a.warn("AdManager.setNetwork","valid networkId required")},setServerURL:function(b){a.debug("AdManager.setServerURL("+Array.prototype.slice.call(arguments).join(",")+")");a.warn("AdManager.setServerURL method is DEPRECATED, use AdManager.setServer instead.");this.setServer(b)},setServer:function(b){a.debug("AdManager.setServer("+
Array.prototype.slice.call(arguments).join(",")+")");if(b&&"string"===typeof b){this._serverURL=b;for(var c in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(c)){var d=a._instanceQueue[c];d&&d._videoAsset._videoPlayPending&&d._videoAsset.play()}}else a.warn("AdManager.setServer","server url required")},setLocation:newContext:function(){a.debug("AdManager.newContext("+Array.prototype.slice.call(arguments).join(",")+
")");return new a.Context(this)},newContextWithContext:function(b){a.debug("AdManager.newContextWithContext("+Array.prototype.slice.call(arguments).join(",")+")");var c=this.cloneContext(b);c._temporalSlotBase=b._temporalSlotBase;b.getContentVideoElement()&&(c.setContentVideoElement(b.getContentVideoElement()),delete c._temporalSlotBase["_fw_contentVideo_"+b._instanceId]);c._videoDisplaySize=b._videoDisplaySize;c._overriddenAdRenderers=b._overriddenAdRenderers;c._currentContentPlayheadTime=b._currentContentPlayheadTime;
c.startSubsession(b._adRequest._subsessionToken);c.setRequestMode(b._adRequest._requestMode);c._adRequest._compatibleDimensions=b._adRequest._compatibleDimensions;c._videoAsset._state=b._videoAsset._state;c._videoAsset._callbackTimer=b._videoAsset._callbackTimer;c._videoAsset._videoPlayPending=b._videoPlayPending;c._videoAsset._requestedVideoViewUrl=b._videoAsset._requestedVideoViewUrl;c._videoAsset._delay=b._videoAsset._delay;c._videoAsset._durationType=b._videoAsset._durationType;var d=b._extensionManager.extensions,
e;for(e in d)d.hasOwnProperty(e)&&c.loadExtension(d[e]);return this._context=c},setParameter:function(b,c,d){a.debug("AdManager.setParameter("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setParameter(b,c,d)},getParameter:submitRequest:function(b,c){a.debug("AdManager.submitRequest()");b&&"function"===typeof b?this._onRequestComplete=b:a.warn("AdManager.submitRequest(): callback function required");this._context.submitRequest(c/
1E3)},onRequestComplete:function(b){a.debug("AdManager.onRequestComplete("+Array.prototype.slice.call(arguments).join(",")+")");this._onRequestComplete&&(this._onRequestComplete({success:b.success,response:b.response}),this._onRequestComplete=null)},registerVideoDisplayBase:function(b){a.debug("AdManager.registerVideoDisplayBase("+Array.prototype.slice.call(arguments).join(",")+")");this._context.registerVideoDisplayBase(b)},setVideoAsset:function(b,c){a.debug("AdManager.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+
")");this._context.setVideoAsset(b,c)},setSiteSection:function(b){a.debug("AdManager.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setSiteSection(b)},addKeyValue:setVideoDisplayCompatibleSizes:function(b){a.debug("AdManager.setVideoDisplayCompatibleSizes("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setVideoDisplayCompatibleSizes(b)},
playSlots:function(b,c){var d=b;a.warn("AdManager.playSlots() has DEPRECATED, use tv.freewheel.SDK.Slot.Play() instead");a.debug("AdManager.playSlots("+b+")");"string"===typeof b&&(d=b.toUpperCase());this._playSlots(d,c)},_playSlots:function(b,c){var d=c;"function"!==typeof d&&(d=function(){});if(this._context._adResponse){var e=[];c=this._context.getTemporalSlots();for(var f=0;f<c.length;++f){var h=c[f];(.1>Math.abs(h.getTimePosition()-b)||b===h.getTimePositionClass())&&e.push(h)}if(0===e.length)a.warn("AdManager.playSlots",
"no slot matches",b),d();else if(b===a.TIME_POSITION_CLASS_OVERLAY)for(f=0;f<e.length;f++)(function(b){if(!b._onContentVideoTimeUpdate){var c=this._context.getContentVideoElement(),d=b._onContentVideoTimeUpdate=function(e){a.log("_onContentVideoTimeUpdate: event.type = "+e.type);!c.paused&&!0!==c._fw_videoAdPlaying&&0<=c.currentTime-b.getTimePosition()&&1>c.currentTime-b.getTimePosition()&&(c.removeEventListener("timeupdate",d,!1),b._play(function(){var a=setInterval(function(){!c.paused&&2<Math.abs(c.currentTime-
b.getTimePosition())&&(c.addEventListener("timeupdate",d,!1),clearInterval(a))},1E3)}))};c.addEventListener("timeupdate",d,!1)}})(e[f]);else(function(){var a=e.shift();a?a._play(d):d()})()}else a.warn("AdManager._playSlots","request is not completed"),d()},dispose:function(){a.debug("AdManager.dispose()");this._context.dispose();this._onRequestComplete=null},cloneContext:function(a){var b=this.newContext(),d=a._adRequest._capabilities._capabilities,e;for(e in d)d.hasOwnProperty(e)&&b.setCapability(e,
d[e]);b.setProfile(a._adRequest._playerProfile);b.setSiteSection(a._ss_id,a._ss_networkId,a._ss_pageViewRandom,a._ss_idType,a._ss_fallbackId);b.setVideoAsset(a._va_id,a._va_duration,a._va_networkId,a._va_location,a._va_autoPlayType,a._va_viewRandom,a._va_idType,a._va_fallbackId,a._va_durationType);b.setVisitor(a._adRequest._visitorCustomId,a._adRequest._visitorIpV4Address);return b}};a.AdManager.prototype.constructor=a.AdManager;a.AdRequest=a.AdRequest.prototype=
{setCapability:addKeyValue:setProfile:setVideoDisplayCompatibleSizes:setSiteSection:setVisitor:setRequestMode:setRequestDuration:addCandidateAd:addTemporalSlot:function(b,c,d,e,f,h,g,k,m){if(a.Util.isBlank(b)||a.Util.isBlank(c)||0>d)a.warn("AdRequest.addTemporalSlot:","invalid parameters");else{for(var n=0;n<this._temporalSlots.length;n++)if(this._temporalSlots[n].getCustomId()===b){a.warn("AdRequest.addTemporalSlot:","slot with custom Id: "+b+" is already added, ignoring the duplicate addition");return}n=new a.Slot(this._context);
n.setCustomId(b);n.setAdUnit(c);n.setTimePosition(d);n.setSlotProfile(e);n.setCuepointSequence(1*f);n.setMaxDuration(h);n.setMinDuration(g);n.setAcceptContentType(k);n.setSignalId(m);this._temporalSlots.push(n)}},setSubsessionToken:function(a){this._subsessionToken=a},scanPageSlots:generateTypeBRequestUrl:generateVideoViewRequestUrlWithDummyContextInstanceId:parseQueryStr:generateGlobalParametersQueryStr:function(){a.debug("AdRequest.generateGlobalParametersQueryStr");var b=this._context.getParameter("wrapperVersion");b=[["prof",this._playerProfile,"string"],["nw",this._context._adManager._networkId,"number"],["caid",this._context._videoAsset._customId,"string"],["asid",this._context._videoAsset._id,
"string"],["vdur",this._context._videoAsset._duration,"number"],["asnw",this._context._videoAsset._networkId,"number"],["asml",this._context._videoAsset._location,"string"],["vprn",this._context._videoAsset._viewRandom,"number"],["afid",this._context._videoAsset._fallbackId,"string"],["vdty",this._context._videoAsset._durationType,"string"],["vtpo",this._context._videoAsset._currentTpos,"number"],["csid",this._siteSectionCustomId,"string"],["ssid",this._siteSectionId,"string"],["ssnw",this._siteSectionNetworkId,
"number"],["pvrn",this._siteSectionViewRandom,"number"],["sfid",this._siteSectionFallbackId,"string"],["vcid",this._visitorCustomId,"string"],["mode",this._requestMode,"string"],["vrdu",this._requestDuration,"number"],["ssto",this._subsessionToken,"number"],["cd",this._compatibleDimensions||this.detectScreenDimension(),"string"],["vclr",a.version+(b?","+b:""),"string"],["resp",a.PLATFORM_SEND_REQUEST_BY_FORM?"json2":"json","string"],["orig",window.location.protocol+"//"+window.location.host,"string"],
["cbfn","tv.freewheel.SDK._instanceQueue['Context_"+this._context._instanceId+"'].requestComplete","string"],["vip",this._visitorIpV4Address,"string"],["cana",this._candidateAdIds.join(","),"string"]];for(var c=0;c<b.length;c++){var d=b[c];switch(d[2]){case "string":a.Util.isBlank(d[1])||(this._urlParams[d[0]]=encodeURIComponent(d[1]));break;case "number":0<d[1]&&(this._urlParams[d[0]]=d[1])}}b="";for(var e in this._urlParams)this._urlParams.hasOwnProperty(e)&&(b+=e+"="+this._urlParams[e]+"&");b=
b.substring(0,b.length-1);0<this._slotScanner._candidateAds.length&&(null==this._capabilities._capabilities[a.CAPABILITY_CHECK_COMPANION]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_COMPANION,a.CAPABILITY_STATUS_ON),null==this._capabilities._capabilities[a.CAPABILITY_CHECK_TARGETING]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_TARGETING,a.CAPABILITY_STATUS_OFF));this._context._videoAsset._eventCallback||this._context._videoAsset._requestedVideoViewUrl||!this._context._videoAsset._id&&
!this._context._videoAsset._customId||this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON);this._capabilities._capabilities[a.CAPABILITY_DISPLAY_REFRESH]&&this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_OFF);b=this._capabilities.parseCapabilities(b);this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET);switch(this._context._videoAsset._autoPlayType){case a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED:e=
"+play+uapl";break;case a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE:e="-play";break;default:e="+play-uapl"}return b=b.replace(/flag=/,"flag="+encodeURIComponent(e))},generateKeyValuesStr:generateSlotsTypeBStr:function(){a.debug("AdRequest.generateSlotsTypeBStr");for(var b="",c=[],d=0;d<this._temporalSlots.length;d++){var e=this._temporalSlots[d];e=[["slid",e.getCustomId(),"string"],["slau",e.getAdUnit(),"string"],["ptgt","a","string"],["tpos",e.getTimePosition(),"number"],["cpsq",
e.getCuepointSequence(),"number"],["envp",e.getSlotProfile(),"string"],["maxd",e.getMaxDuration(),"number"],["mind",e.getMinDuration(),"number"],["prct",e.getAcceptContentType(),"string"],["sgid",e.getSignalId(),"string"]];for(var f=[],h=0;h<e.length;h++){var g=e[h];switch(g[2]){case "string":a.Util.isBlank(g[1])||f.push(g[0]+"="+encodeURIComponent(g[1]));break;case "number":-1<["cpsq","maxd","mind"].indexOf(g[0])?0<g[1]&&f.push(g[0]+"="+g[1]):0<=g[1]&&f.push(g[0]+"="+g[1])}}c.push(f.join("&"))}0<
c.length&&(b=c.join(";")+";");return b+=this._slotScanner.slotsToTypeBStr()},detectScreenDimension:;a.AdResponse=function(a){this._context=a};a.AdResponse.prototype={};a.AdResponse.prototype.constructor=a.AdResponse;a.Util.mixin(a.AdResponse.prototype,{parse:getCreative:getAd:getTemporalSlots:function(){return this._temporalSlots},getSiteSectionNonTemporalSlots:function(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots:function(){return this._videoPlayerNonTemporalSlots},getSiteSectionCustomId:function(){return this._siteSectionCustomId},getSlotByCustomId:_initSlotData:);a.Capabilities=a.Capabilities.prototype={init:setCapability:getCapability:function(a){return this._capabilities[a]},parseCapabilities:;a.ContentVideoExtension=a.ContentVideoExtension.prototype={_isEnabled:_getBooleanParameter:function(b,c){b=this._context.getParameter(b);null==b&&(b=c);return a.Util.str2bool(b)},init:function(b){a.debug("ContentVideoExtension.init(context)");this._context=b;this._fixContentVideoCurrentTime=a.Util.bind(this,;this._pause=a.Util.bind(this,;this._resume=a.Util.bind(this,function(b){a.log("_resume: event = "+b.type);this._isEnabled()?this._respondPauseResume()&&(a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_RESUME_REQUEST resume content video",this._context.getContentVideoElement().src),!this._context._videoAsset||
null!=this._context._videoAsset._state&&this._context._videoAsset._state!==a.VIDEO_STATE_COMPLETED?(a.log("ContentVideoExtension: resume content video"),this._context.getContentVideoElement().play(),a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL&&!0===this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK,!0)&&this._context.getContentVideoElement().addEventListener("timeupdate",this._fixContentVideoCurrentTime,!1)):a.warn("ContentVideoExtension: video state is uninitialized or completed, skip resume.")):
a.debug("ContentVideoExtension: extension is not enabled, do nothing.")});this._onAttach=a.Util.bind(this,;this._onDetach=a.Util.bind(this,;a.debug("ContentVideoExtension: enabling content video pause resume request handling.");this._context.addEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause);this._context.addEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,
this._resume);a.debug("ContentVideoExtension: enabling content video source management.");this._context.addEventListener(a.EVENT_SLOT_STARTED,this._onAttach);this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onDetach)},_respondPauseResume:function(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0)},_autoSourceRestore:dispose:;a.ContentVideoExtension.prototype.constructor=a.ContentVideoExtension;a._instanceCounter=0;a._instanceQueue={};a.Context=function(b){this._adManager=b;this._eventDispatcher=
new a.EventDispatcher;this._adRequest=new a.AdRequest(this);this._adResponse=null;this._videoAsset=new a.VideoAsset(this);this._temporalSlotBase=null;this._videoDisplaySize={};this._globalLevelParameterDictionary={};this._overrideLevelParameterDictionary={};this._globalLevelParameterDictionary[a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE]=!0;this._rendererManifest={};this._overriddenAdRenderers=[];this._extensionManager=new a.ExtensionManager(this);this._totalSetDisplaySizeCount=this._autoSetDisplaySizeCount=
this._requestState=0;this._instanceId=a._instanceCounter;a._instanceQueue["Context_"+a._instanceCounter]=this;a._instanceCounter++;this._contentVideoAttached=!1;this._currentContentPlayheadTime=0;this._ss_id="";this._ss_networkId=this._ss_pageViewRandom=0;this._ss_idType=a.ID_TYPE_CUSTOM;this._va_location=this._va_networkId=this._va_duration=this._va_id=this._ss_fallbackId="";this._va_autoPlayType=a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED;this._va_fallbackId="";this._va_viewRandom=0;this._va_idType=a.ID_TYPE_CUSTOM;
this._va_durationType=a.VIDEO_ASSET_DURATION_TYPE_EXACT;this._isRefreshRequest=!1;this._refreshSlots=[];this._adVolume=1;this._onVolumeChange=this.__onVolumeChange.bind(this)};a.Context.prototype={getAdVolume:function(){return this._adVolume},setAdVolume:__onVolumeChange:addRenderer:setCapability:function(b,c){a.debug("Context.setCapability",b,c);this._adRequest.setCapability(b,c)},addKeyValue:setParameter:getParameter:setVideoState:function(b){a.debug("Context.setVideoState",b);this._videoAsset.setVideoState(b)},registerVideoDisplayBase:setContentVideoElement:getContentVideoElement:setVideoDisplaySize:getVideoDisplaySize:setVideoDisplayCompatibleSizes:resize:setProfile:function(b){a.debug("Context.setProfile",b);this._adRequest.setProfile(b)},setVideoAsset:setVideoAssetCurrentTimePosition:function(b){a.debug("Context.setVideoAssetCurrentTimePosition("+
b+")");this._videoAsset.setVideoAssetCurrentTimePosition(b)},setSiteSection:setVisitor:function(b,c){a.debug("Context.setVisitor("+Array.prototype.slice.call(arguments).join(",")+")");this._adRequest.setVisitor(b,c)},startSubsession:function(b){a.debug("Context.startSubsession("+
b+")");this._adRequest.setSubsessionToken(b)},setRequestMode:function(b){a.debug("Context.setRequestMode("+b+")");this._adRequest.setRequestMode(b)},setRequestDuration:function(b){a.debug("Context.setRequestDuration("+b+")");this._adRequest.setRequestDuration(b)},addCandidateAd:addTemporalSlot:function(b,c,d,e,f,h,g,k,m){a.debug("Context.addTemporalSlot("+Array.prototype.slice.call(arguments).join(",")+")");this._adRequest.addTemporalSlot(b,
c,d,e,f,h,g,k,m)},getTemporalSlots:getSlotByCustomId:getSlotsByTimePositionClass:submitRequest:function(b){a.debug("Context.submitRequest",k);this.dispatchEvent(a.EVENT_REQUEST_INITIATED,{});if(this._requestState)a.warn("Context.submitRequest: request already submitted");else if(a.Util.isBlank(this._adManager._serverURL))a.warn("Context.submitRequest: serverURL is not set");
else{this._requestState=1;this._adRequest.scanPageSlots();if(this._isRefreshRequest){var c={};k=[];var d,e;for(d=0;d<this._refreshSlots.length;d++){var f=this._refreshSlots[d];if(void 0!==this._adRequest._slotScanner._slots[f]){c[f]=this._adRequest._slotScanner._slots[f];var h=c[f].split("&");for(e=0;e<h.length;e++)-1!==h[e].search("flag")&&(h[e]="flag=-cmpn");c[f]=h.join("&")}for(e=0;e<this._adRequest._slotScanner._knownSlots.length;e++)this._adRequest._slotScanner._knownSlots[e].id===f&&(h=this._adRequest._slotScanner._knownSlots[e],
h.acceptCompanion=!1,h.initialAdOption=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,k.push(h))}this._adRequest._slotScanner._slots=c;this._adRequest._slotScanner._knownSlots=k}this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)&&(a.debug("Context.submitRequest: enabling Safari transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0);c=this._adManager._serverURL;".js"!==c.substring(c.length-3,c.length)&&(c=this._adRequest.generateTypeBRequestUrl());var g=this,k=b;if("number"!==typeof k||0>=k||!k)k=
5;setTimeout(function(){1===g._requestState&&(a.warn("Context.submitRequest: request timeout"),g.requestComplete(null))},1E3*k);a.log("Context.submitRequest: sending request to",c,"timeout",k);a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(c,this._instanceId,!0),g._onMessagePosted=function(a){"object"===typeof a.data&&a.data.hasOwnProperty("cbfn")&&-1<a.data.cbfn.indexOf("['Context_"+g._instanceId+"']")&&g.requestComplete(a.data.response)},window.addEventListener("message",
g._onMessagePosted,!1)):a.Util.pingURLWithScript(c)}},requestComplete:function(b){if(1!==this._requestState)a.warn("ad request complete after timeout"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1});else{this._requestState=2;a.debug("Context.requestComplete");if(a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var c=document.getElementById("_fw_request_iframe_"+this._instanceId);document.body.removeChild(c)}if(null!=b){a._instanceQueue["Context_"+
this._instanceId]=null;this._adResponse=new a.AdResponse(this);this._adResponse.parse(b,this._temporalSlotBase);a.log("Ad request succeeded");c=(this._adResponse._profileParameters.autoloadExtensions||"").split(",");for(var d=0;d<c.length;d++){var e=c[d].trim();a.log("Loading extension: "+e);this.loadExtension(e)}this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!0,response:b});c=this._adResponse.getSiteSectionNonTemporalSlots();for(b=0;b<c.length;++b)a.log("Auto play site section nonTemporal slots"),
c[b].play();c=this._adResponse.getVideoPlayerNonTemporalSlots();for(b=0;b<c.length;++b)a.log("Auto play video player nonTemporal slots"),c[b].play()}else a.warn("Ad request failed"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1})}},addEventListener:function(b,c){a.debug("Context.addEventListener",b);this._eventDispatcher.addEventListener(b,c)},removeEventListener:dispatchEvent:function(b,
c){a.log("Context.dispatchEvent",b);if(b===a.EVENT_SLOT_STARTED){var d=c.slot.getTimePositionClass();if(d===a.TIME_POSITION_CLASS_PREROLL||d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_POSTROLL)this._contentVideoAttached=!0,this._markCurrentContentPlayheadTime()}else b===a.EVENT_SLOT_ENDED&&(d=c.slot.getTimePositionClass(),d===a.TIME_POSITION_CLASS_PREROLL||d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_POSTROLL)&&(this._contentVideoAttached=!1);c=c||{};c.type=b;c.target=
this;this._eventDispatcher.dispatchEvent(c)},dispose:function(){a.debug("Context.dispose");this.setVideoState(a.VIDEO_STATE_STOPPED);if(this._adResponse){if(this._temporalSlotBase){for(var b=0,c=this._adResponse._temporalSlots||[];b<c.length;++b){var d=c[b];if(d._onContentVideoTimeUpdate){var e=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId];e&&e.removeEventListener("timeupdate",d._onContentVideoTimeUpdate,!1);d._onContentVideoTimeUpdate=null}}this.getContentVideoElement().removeEventListener("volumechange",
this._onVolumeChange);this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=null}this._isRefreshRequest=!1;this._refreshSlots=[];this._extensionManager.dispose();this._extensionManager=null}},loadExtension:_markCurrentContentPlayheadTime:function(){var a=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId].currentTime;0<a&&(this._currentContentPlayheadTime=a)},_getContentPlayheadTime:function(){var a=-1;!this._contentVideoAttached&&this._temporalSlotBase&&
this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]&&(a=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId].currentTime);return 0<a?a:this._currentContentPlayheadTime},_requestContentVideoToPauseBySlot:function(a){this._videoAsset.requestPauseBySlot(a)},_requestContentVideoToResumeBySlot:function(a){this._videoAsset.requestResumeBySlot(a)},_setVideoDisplaySizeByContentVideo:_replacePageSlot:;a.Context.prototype.constructor=a.Context;a.DisplayRefreshExtension=a.DisplayRefreshExtension.prototype={init:
_resetSubContext:_onAdStarted:_checkMissingCompanionForAd:_refreshSlots:dispose:;a.DisplayRefreshExtension.prototype.constructor=a.DisplayRefreshExtension;a.EventCallback=a.EventCallback.prototype={};a.EventCallback.prototype.constructor=a.EventCallback;a.EventCallback.getEventCallback=a.EventCallback.newEventCallback=function(b,c,d){if(d===a.EVENT_TYPE_GENERIC)b=new a.EventCallback(b);else if(d===a.EVENT_TYPE_ERROR)b=new a.ErrorEventCallback(b);else if(d===a.EVENT_TYPE_CLICK)b=new a.AdClickEventCallback(b);else if(d===a.EVENT_TYPE_STANDARD)b=
new a.AdStandardEventCallback(b);else if(c===a.EVENT_SLOT_IMPRESSION||c===a.EVENT_SLOT_END)b=new a.SlotImpressionEventCallback(b);else if(c===a.EVENT_AD_IMPRESSION||c===a.EVENT_AD_IMPRESSION_END)b=new a.AdImpressionEventCallback(b);else if(c===a.EVENT_VIDEO_VIEW)b=new a.VideoViewEventCallback(b);else if(c===a.EVENT_RESELLER_NO_AD)b=new a.ResellerNoAdEventCallback(b);else if(c===a.EVENT_AD_FIRST_QUARTILE||c===a.EVENT_AD_MIDPOINT||c===a.EVENT_AD_THIRD_QUARTILE||c===a.EVENT_AD_COMPLETE)b=new a.AdQuartileEventCallback(b);
else return null;b._name=c;b._type=d;return b};a.EventCallback.getShortType=a.Util.mixin(a.EventCallback.prototype,{parse:copy:getUrl:getTrackingUrls:process:_processTrackingUrls:
_shouldSkipSendingTrackingAndExternalUrls:_needEmptyCT:_getAdPlayheadTime:_getCreativeAssetLocation:_getParameter:_replaceVASTMacro:_replaceMacrosInUrl:function(b,c){if(a.Util.isBlank(b))return b;c&&c[a.INFO_KEY_VAST_ERROR_CODE]&&(b=this._replaceVASTMacro(b,
"ERRORCODE",c[a.INFO_KEY_VAST_ERROR_CODE]));this._getCreativeAssetLocation()&&(b=this._replaceVASTMacro(b,"ASSETURI",this._getCreativeAssetLocation()));var d=this._context._getContentPlayheadTime();this._adInstance&&(c=null!=d&&0<=Number(d)?a.Util.secondsToHms(d):"",b=this._replaceVASTMacro(b,"CONTENTPLAYHEAD",c),b=this._replaceVASTMacro(b,"CACHEBUSTING",a.Util.getFixedDigitRandomNumber(8)),b=this._replaceVASTMacro(b,"TIMESTAMP",a.Util.getDateStringInISOFormat(new Date)));b=b.replace(/#(ce?)\{([^\}]+)\}/g,
a.Util.bind(this,);c="";try{c=a.Util.getParameterInURL(b,a.URL_PARAMETER_KEY_CR)}catch(e){return a.warn(e),
b}a.Util.isBlank(c)||(b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(c)));return b}});a.AdClickEventCallback=function(b){a.EventCallback.call(this,b)};a.AdClickEventCallback.prototype=new a.EventCallback;a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback;a.Util.mixin(a.AdClickEventCallback.prototype,{getUrl:process:);a.AdImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.AdImpressionEventCallback.prototype=new a.EventCallback;
a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback;a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);
this._name!==a.EVENT_AD_IMPRESSION&&(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick()));return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:);a.AdQuartileEventCallback=function(b){a.EventCallback.call(this,b)};
a.AdQuartileEventCallback.prototype=new a.EventCallback;a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback;a.Util.mixin(a.AdQuartileEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick())},process:function(b){this._processed||(a.EventCallback.prototype.process.call(this,
b),this._processed=!0)}});a.AdStandardEventCallback=function(b){a.EventCallback.call(this,b)};a.AdStandardEventCallback.prototype=new a.EventCallback;a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback;a.ErrorEventCallback=function(b){a.EventCallback.call(this,b)};a.ErrorEventCallback.prototype=new a.EventCallback;a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback;a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl:);a.ResellerNoAdEventCallback=function(b){a.EventCallback.call(this,
b)};a.ResellerNoAdEventCallback.prototype=new a.EventCallback;a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback;a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{});a.SlotImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.SlotImpressionEventCallback.prototype=new a.EventCallback;a.SlotImpressionEventCallback.prototype.constructor=a.SlotImpressionEventCallback;a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:_getInitValue:getUrl:process:function(b){a.EventCallback.prototype.process.call(this,b);this._processed=!0}});a.VideoViewEventCallback=a.VideoViewEventCallback.prototype=new a.EventCallback;a.VideoViewEventCallback.prototype.constructor=
a.VideoViewEventCallback;a.Util.mixin(a.VideoViewEventCallback.prototype,{_getInitValue:_getCTValue:getUrl:_shouldSkipSendingTrackingAndExternalUrls:function(){return this._processed},
process:);a.EventDispatcher=a.EventDispatcher.prototype={addEventListener:dispatchEvent:removeEventListener:;a.EventDispatcher.prototype.constructor=a.EventDispatcher;a.ExtensionManager=function(b){this._extensions={};this._context=b;this._surveyExtension=new a.SurveyExtension;this._surveyExtension.init(b);this._videoStateExtension=new a.VideoStateExtension;
this._videoStateExtension.init(b);this._displayRefreshExtension=new a.DisplayRefreshExtension;this._displayRefreshExtension.init(b);this._contentVideoExtension=new a.ContentVideoExtension;this._contentVideoExtension.init(b)};a.ExtensionManager.prototype={_scriptLoaded:_getExtensionNameFromUrl:_loadFail:load:function(b){if(b){var c=this._getExtensionNameFromUrl(b);if(null==c)this._loadFail(c,"Extension name not exsit in the Url. Url: "+b);else if(this._extensions[c]===b)a.log("Extension is already loaded"),this._loadFail(c,"Extension is already loaded");else{var d=1*this._context.getParameter("moduleLoadTimeout")||6E4,e=!1,f=this,h=window.setTimeout(d);a.Util.lazyJavaScriptLoad(b,
function(){a.log("async load extension successful, URL:"+b);window.clearTimeout(h);e?(a.debug("Extension loaded after timeout, do nothing."),f._loadFail(c,"Timeout occured while loading extension. Url: "+b)):(f._extensions[c]=b,f._scriptLoaded(c))})}}else this._loadFail(c,"Url cannot be empty")},dispose:function(){this._extensions=null;this._surveyExtension.dispose();this._surveyExtension=null;this._displayRefreshExtension.dispose();this._displayRefreshExtension=null;this._videoStateExtension.dispose();
this._videoStateExtension=null;this._contentVideoExtension.dispose();this._context=this._contentVideoExtension=null}};a.ExtensionManager.prototype.constructor=a.ExtensionManager;a.HTMLAdGenerator={log:function(b){a.log("HTMLAdGenerator\t"+b)},getExtension:generateAd:generateImageHTML:generateFlashHTML:generateIFrameHTML:docLitToHTMLLit:
htmlLitToDocLit:function(b){a.HTMLAdGenerator.log("htmlLitToDocLit");return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Advertisement</title></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">'+b+"</body></html>"},wrapUnsafeHTML:wrapJSCode:generateScriptHTML:htmlLitToHTMLDocLitMobile:;a.NullRenderer=function(){this._rendererController=null};a.NullRenderer.prototype={start:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return-1},getDuration:function(){return-1}};
a.NullRenderer.prototype.constructor=a.NullRenderer;a.PageSlotScanner=a.PageSlotScanner.prototype={isSlotDuplicate:findPageSlotByScope:function(b){var c=b.document;if(c){var d=/(^|\s)_fwph(\s|$)/,
e=c.getElementsByTagName("span");b._fw_admanager||(b._fw_admanager={});b._fw_admanager.pageScanState=!0;for(b=0;b<e.length;++b){var f;var h=e[b];if(d.test(h.className)&&(h=h.getAttribute("id"),(f=c.getElementById("_fw_input_"+h))&&!this.isSlotDuplicate(h)&&(f=f.getAttribute("value")))){";"!==f.charAt(f.length-1)&&(f+=";");f=f.split(";");var g=f[f.length-2],k=!1;-1!==g.search("lo=i")&&(k=!0);var m=!1;-1!==g.search("prct=")&&(m=!0);0>g.search("flag=")&&(g+="&flag=");0>g.search("ptgt=")&&(g="ptgt=s&"+
g);f=[];var n=g.split("&"),y,R;g=!0;for(var t=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,P=0;P<n.length;++P){var l=n[P].split("=");if(2===l.length){l[1]=decodeURIComponent(l[1]);if("ssct"===l[0])if(m)continue;else m=!0,l[0]="prct";"flag"===l[0]?(-1===l[1].search(/[-\+]cmpn/)&&(l[1]+="+cmpn"),"+"!==l[1].charAt(0)&&"-"!==l[1].charAt(0)&&(l[1]="+"+l[1]),k&&-1===l[1].search("-init")&&(l[1]+="-init"),-1!==l[1].search("-nrpl")&&(l[1]=l[1].replace("-nrpl","+cmpn")),-1!==l[1].search("-cmpn")&&(g=!1),t=this._getInitialOption(l[1]),
this._slotOptionFound||(t=k?a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL:a.SLOT_OPTION_INITIAL_AD_STAND_ALONE)):"w"===l[0]?y=Number(l[1]):"h"===l[0]?R=Number(l[1]):"cana"===l[0]&&this._addCandidateAds(l[1]);l=encodeURIComponent(l[0])+"="+encodeURIComponent(l[1]);f.push(l)}}m||(k=this._context.getParameter(a.PARAMETER_PAGE_SLOT_CONTENT_TYPE)||"text/html_doc_lit_mobile,text/html_doc_ref",f.push("prct="+encodeURIComponent(k)));(k=c.getElementById("_fw_container_"+h))?(this._slots[h]=f.join("&")+";",this._knownSlots.push({id:h,
width:y,height:R,element:k,acceptCompanion:g,initialAdOption:t})):a.warn("Failed to find container for slot "+h)}}}},scanPageSlots:slotsToTypeBStr:_addCandidateAds:_parseFlags:_getInitialOption:;a.PageSlotScanner.prototype.constructor=a.PageSlotScanner;a.RendererController=function(b,c){var d=null,e=null,f={},h=a.RendererInitState.instance,g={},k=[],m=0;return{getAdInstance:function(){return c},getContext:function(){return b},getRendererState:function(){return h},processEvent:function(b){var d=b.name;if(d===a.RENDERER_STATE_STARTED||d===a.RENDERER_STATE_COMPLETING||d===a.RENDERER_STATE_COMPLETED||d===a.RENDERER_STATE_FAILED)this.handleStateTransition(d,
b.info);else{var e=this._inferEventType(d);if(e&&(e===a.EVENT_TYPE_CLICK&&b.info&&b.info[a.INFO_KEY_CUSTOM_EVENT_NAME]&&(d=b.info[a.INFO_KEY_CUSTOM_EVENT_NAME]),d!==a.EVENT_AD_MEASUREMENT||b.info[a.INFO_KEY_CONCRETE_EVENT_ID])){var f=d===a.EVENT_AD_INITIATED||d===a.EVENT_AD_BUFFERING_START||d===a.EVENT_AD_BUFFERING_END||d===a.EVENT_AD_VOLUME_CHANGE||b.info&&b.info.hasOwnProperty("apiOnly")&&b.info.apiOnly;c.processEvent(d,e,b.info,f)}}},handleStateTransition:function(b,d){switch(b){case a.RENDERER_STATE_STARTED:h.notifyStarted(this);
break;case a.RENDERER_STATE_COMPLETING:h.complete(this);break;case a.RENDERER_STATE_COMPLETED:h.complete(this);h.notifyCompleted(this);break;case a.RENDERER_STATE_FAILED:c.getSlot()._clearScheduledAdInstance();d||(d={});a.warn("FAIL",", FW ErrorModule:",d[a.INFO_KEY_ERROR_MODULE],", FW ErrorCode:",d[a.INFO_KEY_ERROR_CODE],", FW ErrorInfo:",d[a.INFO_KEY_ERROR_INFO],", VAST ErrorCode:",d[a.INFO_KEY_VAST_ERROR_CODE]);(b=c.processEvent(a.EVENT_ERROR,a.EVENT_TYPE_ERROR,d))||a.debug("No EVENT_ERROR callback found");
if(d)switch(d[a.INFO_KEY_ERROR_CODE]){case a.ERROR_NO_AD_AVAILABLE:case a.ERROR_PARSE:(b=c.processEvent(a.EVENT_RESELLER_NO_AD,a.EVENT_TYPE_IMPRESSION))||a.debug("No EVENT_RESELLER_NO_AD callback found.")}h.fail(this);break;default:a.debug("Unknown event received",b)}},setCapability:function(a,b){c.setMetr(a,b)},getVersion:getParameter:getCompanionSlots:createNullDrivingAdInstance:scheduleAdInstances:commitAdInstance:isRenderer:function(){return d&&a.MODULE_TYPE_RENDERER===d.info()[a.INFO_KEY_MODULE_TYPE]},isTranslator:playable:reset:
play:_actualPlay:function(b){(e=a.Util.getObject(b)||a.Util.getObject(w+"."+b))&&(d=new e);d?h.start(this):this.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Renderer class <"+b+"> not found"})},dispatchEvent:requestContentStateChange:getRenderer:function(){return d},setRenderer:function(a){d=a},setRendererState:function(a){h=a},getContentVideoElement:function(){return b.getContentVideoElement()},_restorePlaceholdersForHybrid:rendererMatch:_matchRendererClassName:function(d){ar g=d.getPrimaryCreativeRenditionAsset().getContentType(),h=d.getContentType(),k=d.getWrapperType(),
n=d.getCreativeApi(),F=d.getBaseUnit(),G=c.getSoAdUnit(),I=c.getSlot(),J=I.getType();I=I.getTimePositionClass();a.debug("match renderer for creativeRendition:"+d.getId());a.debug("slot type:"+J);if(a.Util.isBlank(h)&&a.Util.isBlank(k))return a.warn("renderer not match due to both contentType and wrapperType are empty"),null;var v=b._rendererManifest["*"];v||(v=b._rendererManifest[k]);v||(v=b._rendererManifest[h]);if(!v){J=b._overriddenAdRenderers.concat(b._adResponse._adRenderers);for(var L=0;L<J.length;L++){var q=
J[L],x=!q.contentType;x||(k?x=e(k,q.contentType,!0):(g&&(x=e(g,q.contentType,!0)),x||(x=e(h,q.contentType,!0))));if(x)if((x=!q.creativeApi)||(x=e(n,q.creativeApi)),x)if(q.baseUnit&&!e(F,q.baseUnit))a.debug("can't match renderer "+q.url+" due to baseUnit not match for creativeRendition:"+d.getId());else if(q.soAdUnit&&!e(G,q.soAdUnit))a.debug("can't match renderer "+q.url+" due to soAdUnit not match for creativeRendition:"+d.getId());else if(q.slotType&&!e(I.toUpperCase(),q.slotType.toUpperCase()))a.debug("can't match renderer "+
q.url+" due to slotType not match for creativeRendition:"+d.getId());else{if(a.debug("renderer "+q.url+" matched for creativeRendition:"+d.getId()),q.url){v=q.url;d=v.indexOf("?");-1!==d&&(v=v.substring(0,d));d=v.lastIndexOf("/");-1!==d&&(v=v.substring(d+1));d=v.lastIndexOf(".js");-1!==d&&(v=v.substring(0,d));var H={};if(q.parameter)for(d=[].concat(q.parameter),g=0;g<d.length;g++)if(d[g].hasOwnProperty("name"))H[d[g].name]=d[g].value;else for(var z in d[g])d[g].hasOwnProperty(z)&&(H[z]=d[g][z]);a.Util.getObject(w+
"."+v)&&(v=w+"."+v);if(a.Util.getObject(v))f=H,m=0;else{if(0<m)break;var r=this;z=1*this.getContext().getParameter("moduleLoadTimeout")||6E4;m=window.setTimeout(z);a.Util.lazyJavaScriptLoad(q.url,}break}}else a.debug("can't match renderer "+
q.url+" due to creative api not match for creativeRendition:"+d.getId());else a.debug("can't match renderer "+q.url+" due to contentType not match for creativeRendition:"+d.getId())}}return v?v:a.Util.isBlank(k)?"null/null"===h?w+".NullRenderer":null:null},_inferEventType:function(b){return b===a.EVENT_ERROR?a.EVENT_TYPE_ERROR:b===a.EVENT_AD_CLICK?a.EVENT_TYPE_CLICK:b===a.EVENT_AD_IMPRESSION||b===a.EVENT_AD_FIRST_QUARTILE||b===a.EVENT_AD_MIDPOINT||b===a.EVENT_AD_THIRD_QUARTILE||b===a.EVENT_AD_COMPLETE||
b===a.EVENT_RESELLER_NO_AD?a.EVENT_TYPE_IMPRESSION:b===a.EVENT_AD_PAUSE||b===a.EVENT_AD_RESUME||b===a.EVENT_AD_REWIND||b===a.EVENT_AD_MUTE||b===a.EVENT_AD_UNMUTE||b===a.EVENT_AD_COLLAPSE||b===a.EVENT_AD_EXPAND||b===a.EVENT_AD_MINIMIZE||b===a.EVENT_AD_CLOSE||b===a.EVENT_AD_ACCEPT_INVITATION?a.EVENT_TYPE_STANDARD:b===a.EVENT_AD_MEASUREMENT||b===a.EVENT_AD_VOLUME_CHANGE||b===a.EVENT_AD_BUFFERING_START||b===a.EVENT_AD_BUFFERING_END||a.EVENT_AD_INITIATED||a.EVENT_AD_AUTO_PLAY_BLOCKED?a.EVENT_TYPE_GENERIC:
null},pause:function(){a.log("RendererController.pause");d&&"function"===typeof d.pause?d.pause():a.log("Renderer.pause() is not implemented.")},resume:stop:};a.RenditionSelector=function(a,c,d,e){this._targetByterate=a;this._arWeight=c;this._pxWeight=d;this._conversionFactor=e};a.RenditionSelector.prototype=
{getBestFitRendition:function(b,c,d){var e=this;b.reverse();b=b.filter(.sort(;if(!b.length)return null;var f=Number.MAX_VALUE,h=b.filter(function(a){a=e.getBitrate(a);f=a<f?a:f;return a<=e._targetByterate});h.length||
(h=b.filter();return h.sort(.pop()},compareVisualMetrics:calculateVisualRatios:findDistance:getBitrate:function(a){var b=a.getDuration();return(a=a.getPrimaryCreativeRenditionAsset().getBytes())&&b&&
!isNaN(a)&&!isNaN(b)&&0<a&&0<b?8*a/1E3/b:-1}};a.RenditionSelector.prototype.constructor=a.RenditionSelector;a.Slot=function(b){var c="",d=null,e=null,f=null,h=null,g=[],k=[],m={},n=null,y=a.MediaInitState.instance,R=0,t=null,w,l,F,G,I,J,v=0,L=0,q=[],x=null,H=!1,z=!1,r=!0,E=[],K,B,N=!1;return{setAutoPlayBlocked:function(a){N=a},getSlotProfile:function(){return e},setSlotProfile:function(a){e=a},setMediaState:function(a){y=a},setParameter:getParameter:getAdCount:setCustomId:function(a){c=a},getCustomId:function(){return c},setAdUnit:function(a){I=a},getAdUnit:function(){return I},setType:function(a){d=a},getType:function(){return d},setTimePosition:function(a){l=a},getTimePosition:function(){return l},setTimePositionClass:getTimePositionClass:function(){return t},setWidth:function(a){F=a},getWidth:function(){return t!==a.TIME_POSITION_CLASS_DISPLAY?F?
F:b.getVideoDisplaySize().width:F},setHeight:getHeight:setBase:function(a){w=a},getBase:function(){return w},setCuepointSequence:function(a){J=1*a?1*a:0},getCuepointSequence:function(){return J},getVideoDisplaySize:setMaxDuration:function(a){v=1*a?1*a:0},getMaxDuration:function(){return v},setMinDuration:getMinDuration:function(){return L},
setAcceptContentType:setSignalId:getSignalId:function(){return x},getAcceptContentType:parse:function(d){if(d){c=d.customId;l=1*d.timePosition;t=d.timePositionClass&&d.timePositionClass.toUpperCase()||t;I=d.adUnit;x=d.signalId;if(void 0===x||null===x)x=d.outSignalId;for(var e,f=0,h=d.eventCallbacks||[];f<h.length;f++){e=h[f];var C=a.EventCallback.newEventCallback(b,
e.name,e.type);C&&(C._slot=this,C.parse(e),k.push(C))}f=0;for(h=d.selectedAds||[];f<h.length;f++)e=h[f],d=[],C=new a.AdInstance(b),d.push(C),C._slot=this,C._slotCustomId=c,C._parentAdInstancesGroup=d,C.parse(e),g.push(d)}},getCurrentAdInstance:function(){return f},isPauseSlot:play:stop:pause:function(){a.log("Slot.pause");t!==a.TIME_POSITION_CLASS_DISPLAY?f&&f.pause():a.log("Not a temporal slot. Ignore.")},resume:skipCurrentAd:setVisible:_play:onStartPlaying:function(){this._onStartPlaying()},onStartReplaying:function(){this._onStartPlaying()},onCompletePlaying:function(){this._onCompletePlaying()},onCompleteReplaying:function(){this._onCompletePlaying()},playNextAdInstance:scheduleAdInstance:_clearScheduledAdInstance:_onStartPlaying:dispatchSlotEvent:_onCompletePlaying:_playNextAdInstance:_commitScheduledAdInstance:_nextPlayableAdInstance:toString:getAdInstances:getPlayheadTime:getTotalDuration:playCompanionAds:getState:function(){return y},setAcceptCompanion:function(a){K=a},getAcceptCompanion:function(){return K},setInitialAdOption:getInitialAdOption:};a.SurveyExtension=a.SurveyExtension.prototype={init:dispose:_getParameters:;a.SurveyExtension.prototype.constructor=a.SurveyExtension;a.Timer=a.Timer.prototype={};a.Timer.prototype.constructor=a.Timer;a.Util.mixin(a.Timer.prototype,{tick:start:pause:stop:getPlayheadTime:getCTValue:getDuration:function(){return this._duration}});a.VastTranslator=a.VastTranslator.prototype={start:function(b){function c(b){a.log("VastTranslator\t"+b)} y(a){n.call(this,a)}function w(a){n.call(this,a)}tion G(b,d){c("initTrackingEvents()");d&&b&&(l(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.creativeView),l(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.start),l(b,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.firstQuartile),l(b,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,d.midpoint),l(b,a.EVENT_AD_THIRD_QUARTILE,
a.EVENT_TYPE_IMPRESSION,d.thirdQuartile),l(b,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,d.complete),l(b,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,d.mute),l(b,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,d.unmute),l(b,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,d.pause),l(b,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,d.resume),l(b,a.EVENT_AD_REWIND,a.EVENT_TYPE_STANDARD,d.rewind),l(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.fullscreen),l(b,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,d.collapse),l(b,a.EVENT_AD_EXPAND,
a.EVENT_TYPE_STANDARD,d.expand),l(b,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,d.stop),l(b,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,d.acceptInvitation))}unction J(a,
b){c("initTemporalAdInstance");a||d("initTemporalAdInstance: Invalid adInstance");if(b.selectedDrivingAd){b.surveyUrl&&a._creative.setParameter("_fw_survey_url",b.surveyUrl);var e=b.selectedDrivingAd,f=b.selectedDrivingRenditions;c("vastRenditions:"+f);for(var g=4===K,p=0;p<f.length;p++){var k=a.addCreativeRendition();var u=k.addCreativeRenditionAsset("VAST_CRA",!0);var l=f[p];a:{var m=l.creativeType;switch(m){case "video/mp4":m="video/mp4-h264";break a;case "video/3gp":m="video/3gpp"}}c("initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  "+
[l.creativeApi,e.duration,l.width,l.height,l.url,m,l.creativeType]);k.setCreativeApi(l.creativeApi);isNaN(e.duration)||k.setDuration(e.duration);l.width&&!isNaN(l.width)&&k.setWidth(l.width);l.height&&!isNaN(l.height)&&k.setHeight(l.height);e.universalAdId&&k.setUniversalAdId(e.universalAdId);l.url&&u.setUrl(l.url);l.code&&u.setContent(l.code);u.setMimeType(l.creativeType);"static"===l.resourceType&&"text/html"===l.creativeType?u.setContentType("text/html_doc_ref"):"application/x-javascript"===l.creativeType||
"application/javascript"===l.creativeType?u.setContentType("text/js_ref"):"iframe"===l.resourceType?u.setContentType("text/html_doc_ref"):"text/html"===l.creativeType||"text/html_doc_ref"===l.creativeType?u.setContentType("text/html_doc_ref"):"text/html_doc_lit_mobile"===l.creativeType?u.setContentType("text/html_doc_lit_mobile"):g||h(m)?(u.setContentType("text/html_doc_lit_mobile"),u.setUrl(null),u.setContent(v(a,E.getCustomId(),e,l,"text/html_doc_lit_mobile"))):u.setContentType(m);e.creativeData&&
0!==e.creativeData.length&&(c("initTemporalAdInstance(), set asset parameter creativeData:"+e.creativeData),k.setParameter("creativeData",e.creativeData));g||h(m)||(l=l.bitrate,!isNaN(l)&&0<l&&u.setBytes(1E3*l*e.duration/8));m=N;u=C;l=!1;if(k.getContentType()&&m){var n=k.getContentType().toLowerCase(),O=m.toLowerCase();if(n===O)l=!0;else if(0===n.indexOf("video/mp4")&&0===O.indexOf("video/mp4")||"application/javascript"===O&&"text/js_ref"===n)k.setContentType(m),l=!0}m=!1;k.getCreativeApi()&&u&&(n=
k.getCreativeApi().toLowerCase(),O=u.toLowerCase(),n===O?m=!0:0===n.indexOf("mraid")&&0===O.indexOf("mraid")&&(m=!0,k.setCreativeApi(u)));l&&m?k.setPreference(10):m?k.setPreference(6):l?k.setPreference(5):k.setPreference(0);c("adjustMatchedRendition "+k.getId()+", contentType "+k.getContentType()+", creativeAPI "+k.getCreativeApi()+", preference "+k.getPreference())}G(a,e.trackingEvents);F(a,b);I(a,g?f[0].clickThrough:e.clickThrough,e.clickTrackings,e.customClicks,e.impressions)}else k=a.addCreativeRendition(),
k.setContentType("null/null"),u=k.addCreativeRenditionAsset("VAST_CRA",!0),u.setContentType("null/null")}nction q(b){if(200===b.status)if(b.responseXML){var d=(new P).parseAdData(b.responseXML);if(d){c("scheduleVastAds");if(d&&0!==d.length)if(b=d[0].selectedPackage,d=d[0].redirectPackage,!b&&!d)if(c("scheduleVastAds(), no ads from vast response!!!"),H)if(4!==K)r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting linear ad but returned non-linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH);else r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting non-linear ad but returned linear ad",
a.ERROR_VAST_LINEARITY_NOT_MATCH);else r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+D);else if(!b&&d){c("scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server");c("scheduleRedirect");b=[];var e=[];b.push(E);e.push({});for(var f=B,g=d.selectedCompanionAds,h=0;h<f.length;h++){var p=f[h];g&&g[p.getCustomId()]&&(b.push(p),e.push(g[p.getCustomId()]))}(f=r._rendererController.scheduleAdInstances(b))&&0<f.length&&(g=f[0],h=g.addCreativeRendition(),h.setWrapperUrl(a.Util.transformUrlToProxy(d.tagUrl)),
h.setWrapperType(T),h.setContentType(N),h.setCreativeApi(C),G(g,d.getTrackingEventsOfWrapper()),F(g,d),I(g,d.getClickThroughOfWrapper(),d.getClickTrackingsOfWrapper(),d.getCustomClicksOfWrapper(),d.getImpressionOfWrapper()));c("scheduleRedirect, schedule companion for redirect ad "+d);for(h=1;h<f.length;h++)if(g=f[h])p=e[h],p instanceof t&&L(b[h],g,p,d)}else{if(b){c("scheduleVastAds(), ads returned from vast response, going to schedule them");b.selectedDrivingAd?(c("scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad"),
b.selectedDrivingAd.isDrivingAd=!0):c("scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad");c("scheduleAdPackage()");d=[];e=[];d.push(E);b.selectedDrivingAd&&e.push(b.selectedDrivingAd);f=B;g=b.selectedCompanionAds;for(h=0;h<f.length;h++)p=f[h],g&&g[p.getCustomId()]&&(d.push(p),e.push(g[p.getCustomId()]));g=r._rendererController.scheduleAdInstances(d);if(0<g.length){c("scheduleAdPackage, scheduled "+g.length+" ads"+b.selectedDrivingAd?"":", 1 of it is nullAd for pure companion ad schedule");
b.selectedDrivingAd||c("Driving ad is not selected, will create a dummy null ad.");b.selectedDrivingAd||(d.shift(),J(g.shift(),b));for(h=0;h<g.length;h++)if(p=g[h]){var k=e[h];k instanceof t?L(d[h],p,k,b):J(p,b)}!b.selectedDrivingAd&&0<f.length&&0<b.companionAds.length&&0===e.length&&(c("found empty companion slots and companion ads in package, but none of them matches slot size"),r.onTranslatorFailed(a.ERROR_UNMATCHED_SLOT_SIZE))}else c("scheduleAdPackage, no ad scheduled.")}}else c("no ads for scheduleVastAds");
r._request=null;r._rendererController.handleStateTransition(a.TRANSLATOR_STATE_STARTED);r._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else r.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+D,a.ERROR_VAST_XML_PARSING);else if(400<=b.status)r.onTranslatorFailed(a.ERROR_IO,"wrapperUrl="+D)}this._rendererController=b;var x="image/gif image/jpeg image/png text/html text/javascript text/html_doc_ref text/html_doc_lit_mobile application/x-javascript application/javascript".split(" "),
H=!1,z=this._rendererController.getAdInstance(),r=this,E=z.getSlot(),K=),B=this._rendererController.getCompanionSlots().filter(;c("Checking CompanionSlots, length = "+B.length+", this._rendererController.getCompanionSlots().length = "+this._rendererController.getCompanionSlots().length+", AdInstance.getCompanionSlots.length = "+z.getCompanionSlots().length);var N=z.getActiveCreativeRendition().getContentType(),C=z.getActiveCreativeRendition().getCreativeApi()||"None";this.log("ExpectedDrivingContentType:"+N+", ExpectedDrivingAPI:"+C);var T=z.getActiveCreativeRendition().getWrapperType();k.prototype={init:log:function(b){a.log("VastTranslator.VastRendition\t"+b)},toString:;k.prototype.constructor=k;n.prototype={parse:function(b){this.log("parse()");if(b.Duration)if(b.Duration.value){var c=/(\d+):(\d+):(\d+)/.exec(b.Duration.value);c?this.duration=3600*c[1]+60*c[2]+1*c[3]:this.warn("Failed to parse duration value for creative "+b)}else this.warn("No duration value set for creative "+b);b.VideoClicks&&(b.VideoClicks=[].concat(b.VideoClicks),a.Util.forEachOnArray(b.VideoClicks,this));b.MediaFiles&&
b.MediaFiles.MediaFile&&(b.MediaFiles.MediaFile=[].concat(b.MediaFiles.MediaFile),a.Util.forEachOnArray(b.MediaFiles.MediaFile,this));b.TrackingEvents&&this.parseTrackingEvents(b.TrackingEvents,this.setTrackingEvents());b.AdParameters&&(this.log("parse() got AdParameters:"+b.AdParameters.value),this.creativeData=b.AdParameters.value);b.Companion&&(b.Companion=[].concat(b.Companion),a.Util.forEachOnArray(b.Companion,this));b.NonLinear&&(b.NonLinear=[].concat(b.NonLinear),a.Util.forEachOnArray(b.NonLinear,
this))},parseLinears:function(a){2!==K?(this.log("TargetAdType != TARGET_LINEAR, skipping parse"),H=!0):this.parse(a)},parseNonLinears:parseCompanionAds:setTrackingEvents:parseTrackingEvents:function(b,c){this.log("parseTrackingEvents");b.Tracking&&(b.Tracking=[].concat(b.Tracking),
a.Util.forEachOnArray(b.Tracking,function(a){var b=a["@attributes"].event;if(a=g(a.value))switch(b){case "creativeView":case "start":case "firstQuartile":case "midpoint":case "thirdQuartile":case "complete":case "mute":case "unmute":case "pause":case "resume":case "rewind":case "replay":case "fullscreen":case "expand":case "collapse":case "acceptInvitation":case "stop":c[b].push(a);break;case "close":c.stop.push(a)}},this))},toString:
log:function(b){a.log("VastTranslator."+this.constructor.name+"\t"+b)},warn:;b=Object.defineProperty||function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)};b(n.prototype,"trackingEvents",{get:);b(n.prototype,"impressions",{set:function(a){this._impressions=a},
get:);n.prototype.constructor=n;y.prototype=new n;y.prototype.constructor=y;w.prototype=new n;w.prototype.constructor=w;t.prototype=new n;t.prototype.getPrimaryRendition=b(t.prototype,"impressions",{get:);t.prototype.constructor=t;var Q=function(){this.impressions=
[];this.errorTrackings=[];this.linearAds=[];this.nonLinearAds=[];this.companionAds=[];this.extensions=[];this.tagUrl="";this.isWrapper=!1;this.surveyUrl=null;this.selectedDrivingRenditions=[];this.selectedDrivingAd=null;this.selectedCompanionAds={}};Q.prototype={parse:function(a){this.log("parse("+a+")");if(a)if(this.isWrapper||a.Creatives&&a.Creatives.Creative){a.Creatives=a.Creatives||[];f(this.impressions,a.Impression);f(this.extensions,a.Extensions);f(this.errorTrackings,a.Error);this.isWrapper&&
a.VASTAdTagURI&&(this.tagUrl=a.VASTAdTagURI.value||"");a.Survey&&a.Survey.value&&0<a.Survey.value.length&&(this.surveyUrl=a.Survey.value);a.Creatives.Creative=a.Creatives.Creative?[].concat(a.Creatives.Creative):[];for(var b=0;b<a.Creatives.Creative.length;b++){var c=a.Creatives.Creative[b],d=-1;c["@attributes"]&&(d=c["@attributes"].sequence||-1,d*=1);if(c.Linear){var e=new y(this);e.sequence=d;e.parseLinears(c.Linear);this.linearAds.push(e)}else c.NonLinearAds?(e=new w(this),e.sequence=d,e.parseNonLinears(c.NonLinearAds)):
c.CompanionAds&&(e=new t(this),e.sequence=d,e.parseCompanionAds(c.CompanionAds));e&&c.UniversalAdId?(e.universalAdId={idRegistry:c.UniversalAdId["@attributes"].idRegistry,idValue:c.UniversalAdId["@attributes"].idValue},this.log("Universal Ad ID with idRegistry "+e.universalAdId.idRegistry+" and idValue "+e.universalAdId.idValue)):this.log("No Universal Ad ID is present in the VAST response.")}}else this.warn("parse(): no creative found!");else this.warn("parse(): empty adpackage")},testAndUpdatePackageForTemporalSlot:testAndUpdatePackageForPageSlots:renditionFitsInSlot:calcDeadSpaceRatio:matchAdsToSlots:getAllRenditions:findRenditionGroupByContentType:formalizeString:getAdsByTargetType:getImpressionOfWrapper:getTrackingEventsOfWrapper:getClickThroughOfWrapper:getClickTrackingsOfWrapper:function(){this.log("getClickTrackingsOfWrapper");
for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickTrackings&&0<d.clickTrackings.length&&(b=d.clickTrackings);d=d.vastRenditions;for(var e=0;e<d.length;e++){var f=d[e];if(f.clickTrackings&&0<f.clickTrackings.length){b=f.clickTrackings;break}}if(b)break}}return b},getCustomClicksOfWrapper:testWrapperForRedirect:log:function(b){a.log("VastTranslator.VastAdPackage\t"+b)},warn:function(b){a.warn("VastTranslator.VastAdPackage\t"+b)}};Q.prototype.constructor=Q;P.prototype={getVastVersion:parseAdData:selectUsableAdsForDrivingSlot:selectUsableAdsCompanionSlots:testAndUpdatePackageForTemporalSlot:function(a,b){this.log("testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = "+b);return a.testAndUpdatePackageForTemporalSlot(b)},testAndUpdatePackageForPageSlots:testWrapperForRedirect:
log:function(b){a.log("VastTranslator.VastParser\t"+b)},warn:function(b){a.warn("VastTranslator.VastParser\t"+b)}};var D=z.getActiveCreativeRendition().getWrapperUrl();b=z.getActiveCreativeRendition().getWrapperType();c("AdInstance.getActiveCreativeRendition().getWrapperUrl()="+D+", getWrapperType()="+b);if(0!==b.indexOf("external/vast-"))r.onTranslatorFailed(a.ERROR_NO_RENDERER,"wrapperType="+b+";wrapperUrl="+D,a.ERROR_VAST_TRACKING_ERROR);else if(D&&0!==D.length){var M=a.VAST_DEFAULT_MAX_WRAPPER_COUNT;
(b=this._rendererController.getParameter(a.PARAMETER_VAST_MAX_WRAPPER_COUNT))&&0<Number(b)&&(M=Number(b));if(z.getWrapperCount()>=M)r.onTranslatorFailed(a.ERROR_IO,"maximum wrapper limit is reached "+z.getWrapperCount(),a.ERROR_VAST_WRAPPER_LIMIT_REACH);else{M=this._rendererController.getParameter("translator.vast.asyncLoad");M=!0===a.Util.str2bool(M);c("will load vast xml, asyncAjax:"+M);var O=this._rendererController.getParameter("translator.vast.loadWithCookie");O=!0===a.Util.str2bool(O);var A=
null,V=5E3;(b=this._rendererController.getParameter(a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS))&&0<Number(b)&&(V=Number(b));try{window.XDomainRequest?(A=new XDomainRequest,M=!0):(A=new XMLHttpRequest,A.withCredentials=O),r._request=A,M?(A.open("GET",D),window.XDomainRequest?A.onload=(A.timeout=V,A.onreadystatechange=,A.ontimeout=A.onerror=A.send()):(A.open("GET",D,!1),A.send(),q(A))}catch(p){b=!1;if(!window.XMLHttpRequestException)p.code===DOMException.NETWORK_ERR&&(d("CORS in IE10"),b=!0);else if(p instanceof XMLHttpRequestException)switch(p.code){case XMLHttpRequestException.NETWORK_ERR:b=
!0}b?(d("CORS error:"+p),r.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+D)):(d("exception:"+p),r.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+D+";exception="+p))}}}else r.onTranslatorFailed(a.ERROR_NULL_ASSET,"wrapperUrl="+D,a.ERROR_VAST_TRACKING_ERROR)},info:function(){return{moduleType:a.MODULE_TYPE_TRANSLATOR}},log:function(b){a.log("VastTranslator\t"+b)},warn:function(b){a.warn("VastTranslator\t"+b)},getPlayheadTime:function(){return-1},getDuration:stop:onTranslatorFailed:;
a.VastTranslator.prototype.constructor=a.VastTranslator;a.VideoAsset=a.VideoAsset.prototype={setVideoAsset:setVideoAssetCurrentTimePosition:setVideoState:callback:getPlayheadTime:play:pause:function(){this._internalState.pause(this)},complete:onStartPlaying:function(){this.callback()},onStartReplaying:function(){this.callback()},onPausePlaying:onResumePlaying:function(){this._callbackTimer.start()},onCompletePlaying:onCompleteReplaying:function(){this.onCompletePlaying()},setMediaState:function(a){this._internalState=a},requestPauseBySlot:function(b){a.debug("requestPauseBySlot");this._internalState===a.MediaPlayingState.instance||this._internalState===a.MediaReplayingState.instance?
this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,{slot:b}):a.debug("Not sending content pause request because content video state is",JSON.stringify(this._internalState))},requestResumeBySlot:requestForVideoViewCallback:function(){var b=new a.Context(this._context._adManager);b._videoAsset=this;this._dummyInstanceId=b._instanceId;b=this._context._adRequest.generateVideoViewRequestUrlWithDummyContextInstanceId(b._instanceId);var c=this;a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(b,this._dummyInstanceId,!0),c._onMessagePosted=window.addEventListener("message",c._onMessagePosted,!1)):a.Util.pingURLWithScript(b)},requestComplete:parse:;a.VideoRenderer=function(){this._adVideo=null;this._duration=this._playheadTime=-1;this._dragging=this._stopInvoked=this._isEnded=!1;this._volume=1;this._rendererController=null;this._isBuffering=!1;this._autoPauseAdOnVisibilityChange=!0};a.VideoRenderer.prototype={pause:function(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this._adVideo&&!this._adVideo.paused&&this._adVideo.pause()},resume:function(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME});
this._adVideo&&this._adVideo.paused&&this._adVideo.play()},start:function(b){this._rendererController=b;b=this._rendererController.getAdInstance();var c=b.getSlot(),d=this,e=!1,f=!1,h=!1;this._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);if(a.PLATFORM_NOT_SUPPORT_VIDEO_AD)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,c.getTimePositionClass());else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&c.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,
"midroll");else{a.log("VideoRenderer.start",c.getTimePositionClass(),b);var g=this._rendererController.getContentVideoElement(),k=c.getVideoDisplaySize().width,m=c.getVideoDisplaySize().height,n=b.getRenderableCreativeRenditions(),y=(k=(new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getBestFitRendition(n,k,m))?k.getPrimaryCreativeRenditionAsset():
null;if(y&&n.length)if(y.getUrl()){b.setActiveCreativeRendition(k);a.log("VideoRenderer.start selected rendition is:",y.getUrl());this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);var w=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;w||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);
var t=a.PLATFORM_EVENT_CLICK,P=a.MOBILE_EVENT_DRAG;a.debug("VideoRenderer","use content video element");g.controls=!1;this._adVideo=g;var l=null,F=null,G=null;this._volume=this._rendererController.getContext().getAdVolume();this._adVideo.volume=this._volume;this._adVideo.muted=0===this._volume;var I=J=v=a.Util.bind(this,,L=q=b=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);var x=null;b&&(x=document.getElementById(b));x||(x=g);var H=a.Util.bind(this,,z=a.Util.bind(this,,r,E=K=B=0,N=function(b){a.debug("Ad video event "+b.type);0>=g.currentTime?a.debug("VideoRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):(J(),g.paused||(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8E3,F=setTimeout(I,b,b+"ms timeout when playing")),f||(f=!0,d._playheadTime=g.currentTime,
0>d._playheadTime&&(d._playheadTime=0),l&&(clearTimeout(l),l=null),d._quartileTimerId=setInterval(function(){var b=g.currentTime,c=g.duration;0<b&&(d._playheadTime=b);0<c&&(d._duration=c);"number"!==typeof b||"number"!==typeof c||G||(b>=.25*c&&1>B&&(d._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),B=1),b>=.5*c&&2>B&&(d._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),B=2),b>=.75*c&&3>B&&(clearInterval(d._quartileTimerId),d._quartileTimerId=null,d._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),
B=3))},1E3),d._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)))};this.dispose=a.Util.bind(this,;var C=function(b){var c=G;b&&b.type&&(a.debug("Ad video event "+b.type),"error"===b.type&&(a.warn(b.target.src),a.warn(b.target.currentSrc),q(b)));J();l&&(clearTimeout(l),l=null);w&&(x.removeEventListener(t,H,!1),x.removeEventListener(P,z,!1));r&&(clearTimeout(r),r=null);Q&&d._autoPauseAdOnVisibilityChange&&(document.removeEventListener("visibilitychange",Q,!1),Q=null);
g.removeEventListener("ended",C,!1);g.removeEventListener("error",C,!0);g.removeEventListener("pause",E,!1);g.removeEventListener("playing",K,!1);g.removeEventListener("timeupdate",N,!1);g.removeEventListener("stalled",v,!1);g.removeEventListener("waiting",L,!1);g.removeEventListener("canplay",q,!1);g.paused||(a.debug("try pausing video before complete"),g.pause());b&&"error"===b.type&&(c="video error",(b=g.error||b.target.error)&&(c="error:"+b+",code:"+b.code));c||(d._isEnded=!0);a.log("VideoRenderer.complete");
e||(e=!0,delete g._fw_videoAdPlaying,d._adVideo=null,d._quartileTimerId&&(clearInterval(d._quartileTimerId),d._quartileTimerId=null),c?d._onRendererFailed(null,c):(d._stopInvoked||(g.currentTime>=.25*g.duration&&1>B&&(d._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),B=1),g.currentTime>=.5*g.duration&&2>B&&(d._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),B=2),g.currentTime>=.75*g.duration&&3>B&&(d._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),
B=3),g.currentTime>=g.duration-.5&&4>B&&(d._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}),B=4)),d._stopInvoked=!1,d._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)));d._rendererController=null};var T=Q=function(b){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible"));document.hidden?g&&!g.paused&&(g.pause(),h=!0,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),
l&&(clearTimeout(l),l=null)):g&&g.paused&&h&&(g.play(),h=!1,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_RESUME}),f||!g._fw_fromVideoPool&&!a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT||(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5E3,l=setTimeout(T,b,b+"ms timeout before playing")))};g._fw_videoAdPlaying=!0;var D=!1,M=function(){if(!D){D=!0;w&&(x.addEventListener(t,H,!1),x.addEventListener(P,z,!1));g.addEventListener("ended",
C,!1);g.addEventListener("error",C,!0);g.addEventListener("pause",E,!1);g.addEventListener("playing",K,!1);g.addEventListener("timeupdate",N,!1);g.addEventListener("stalled",v,!1);g.addEventListener("waiting",L,!1);g.addEventListener("canplay",q,!1);g.src=y.getUrl();a.log("VideoRenderer play video ad "+g.src);g.load();if(g._fw_fromVideoPool||a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT){var b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5E3;l=setTimeout(T,
b,b+"ms timeout before playing")}a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE&&d._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED);b=100;0<a.PLATFORM_ANDROID_VERSION&&(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY)||100);setTimeout(function(){var b=g.play();b&&a.PLATFORM_BLOCKS_AUTOPLAY&&b.catch(;document.hidden&&g&&d._autoPauseAdOnVisibilityChange&&(a.log("VideoRenderer pause ad when tab is invisible."),g&&!g.paused&&(g.pause(),h=!0,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_PAUSE})),l&&(clearTimeout(l),l=null))},b);d._autoPauseAdOnVisibilityChange&&document.addEventListener("visibilitychange",Q,!1)}};a.VideoRenderer._fw_playedDummyVideo||
c.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||/\.webm$/.test(y.getUrl())?M():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug("play dummy video for iOS 3.2-4.1"),g.src="http://127.0.0.1:1/404.mp4",g.load(),g.play(),g._fw_videoAdPlaying=!0,g.addEventListener("error",!0),setTimeout(M,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL?500:5E3))}else this._onRendererFailed(a.ERROR_NULL_ASSET);
else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:function(){return this._duration},
setVolume:_onRendererFailed:;a.VideoRenderer.prototype.constructor=a.VideoRenderer;a.VideoStateExtension=function(){};a.VideoStateExtension.prototype={_enabled:init:dispose:function(){this._context=null}};a.VideoStateExtension.prototype.constructor=a.VideoStateExtension;a.VPAIDWrapper=function(){this._creative=null;this._timeoutInMs=0;this._eventHandlers={};this._timeoutTimer=null;this._timeoutOperation="";this.timeoutReached=!1;this._visibilityChangeListener=null;this._creativePausedByTabSwitch=
!1;this._autoPauseAdOnVisibilityChange=!0};a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable:checkVPAIDInterface:loadCreativeAsset:function(b){a.log("loadCreativeAsset("+b+")");var c=document.getElementById("vpaidFrame"),d=document.createElement("iframe");
d.id="vpaidFrame";null==c?document.body.appendChild(d):document.body.replaceChild(d,c);d.width=0;d.height=0;d.style.display="none";d.contentWindow.document.open();d.contentWindow.document.close();this._timeoutOperation="loadCreativeAsset";var e=this,f=new XMLHttpRequest;f.open("GET",b);f.timeout=e._timeoutInMs;f.onreadystatechange=f.ontimeout=f.onerror=f.send()},setCallbacksForCreative:removeCallbacksForCreative:handshakeVersion:initAd:startAd:stopAd:function(){a.log("VPAID Creative: stopAd()");"startAd"===this._timeoutOperation?(clearTimeout(this._timeoutTimer),this._timeoutOperation="startAd and stopAd"):this._timeoutOperation+="stopAd";this._creative&&(this._waitForTimeout(),this._creative.stopAd())},canPauseAd:function(){return this._isCreativeFunctionInvokable("pauseAd")},canResumeAd:function(){return this._isCreativeFunctionInvokable("resumeAd")},canResizeAd:pauseAd:function(){this.canPauseAd()&&
(a.log("VPAID Creative: pauseAd()"),this._creative.pauseAd())},resumeAd:resizeAd:getAdVolume:function(){return this._isCreativeFunctionInvokable("getAdVolume")?this._creative.getAdVolume():-1},setAdVolume:getAdExpanded:getAdRemainingTime:function(){return this._isCreativeFunctionInvokable("getAdRemainingTime")?this._creative.getAdRemainingTime():-1},getAdDuration:getAdLinear:function(){return this._creative.getAdLinear()},getAdCompanions:setTimeoutValueInMs:function(a){this._timeoutInMs=a},cancelTimeoutEvent:function(){var a="startAd and stopAd"!==this._timeoutOperation;clearTimeout(this._timeoutTimer);if(!a){this._timeoutOperation="startAd";var c=this;setTimeout(500)}},addEventListener:function(a,c){this._eventHandlers[a]=c},removeEventListener:_waitForTimeout:function(){a.log("Wait for "+
this._timeoutOperation+" for "+this._timeoutInMs+"ms");if(this._eventHandlers.timeout){var b=this;this._timeoutTimer=setTimeout(function(){b.timeoutReached||(b.timeoutReached=!0);"startAd"===b._timeoutOperation?b.stopAd():b._eventHandlers&&b._eventHandlers.timeout&&b._eventHandlers.timeout.call()},this._timeoutInMs)}},getTimeoutOperation:function(){return this._timeoutOperation}};a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper;a.VPAIDRenderer=function(){this.vpaidCreative=this._rendererController=
null;this.vpaidVolume=this.vpaidDuration=-1;this.creativeEventCallbacks={};this.isMuted=!1;this.adPlaybackState="";this.creativeTimeoutDelayInMs=1E4;this.vpaidDesiredBitrate=268;this.vpaidViewmode="normal";this.playheadTime=0;this.videoBase=document.createElement("div");this.videoParent=null;this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=this.PLAYER_VPAID_VERSION=2};a.VPAIDRenderer.prototype={};a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer;a.VPAIDRenderer.VastCompanion=a.VPAIDRenderer.VastCompanion.prototype={getWidth:function(){return this._width},getHeight:function(){return this._height},_isValidResource:hasValidRendtions:translateToAdInstance:;a.VPAIDRenderer.VastCompanion.prototype.constructor=
a.VPAIDRenderer.VastCompanion;a.VPAIDRenderer.VastAdSelect=function(){};a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio:matchAdsWithSlots:;a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect;
a.Util.mixin(a.VPAIDRenderer.prototype,{_initParams:function(){var b=this._rendererController.getParameter(a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY);b&&0<Number(b)&&(this.creativeTimeoutDelayInMs=Number(b));a.log("initParams(), creative timeout delay in miliseconds:"+this.creativeTimeoutDelayInMs);b=parseFloat(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE));this.vpaidDesiredBitrate=0<b?b:this.vpaidDesiredBitrate;a.log("initParams(), desired bitrate: "+this.vpaidDesiredBitrate)},
_failWithError:onCreativeLoadError:onCreativeTimeout:setVolume:onAdVolumeChange:onAdExpandedChange:onAdDurationChange:onAdClickThru:onCreativeAssetLoaded:function(){a.log("VPAIDRenderer: onCreativeAssetLoaded()");
this.vpaidCreative.cancelTimeoutEvent();var b=this,c=if()&&c()){b.creativeEventCallbacks={AdStarted:b.onAdStarted,AdStopped:b.onAdStopped,AdSkipped:b.onAdSkipped,AdLoaded:b.onAdLoaded,AdLinearChange:b.onAdLinearChange,AdSizeChange:b.onAdSizeChange,AdExpandedChange:b.onAdExpandedChange,AdDurationChange:b.onAdDurationChange,AdVolumeChange:b.onAdVolumeChange,AdImpression:b.onAdImpression,AdClickThru:b.onAdClickThru,AdVideoFirstQuartile:b.onAdVideoFirstQuartile,
AdVideoMidpoint:b.onAdVideoMidpoint,AdVideoThirdQuartile:b.onAdVideoThirdQuartile,AdVideoComplete:b.onAdVideoComplete,AdUserAcceptInvitation:b.onAdUserAcceptInvitation,AdUserMinimize:b.onAdUserMinimize,AdUserClose:b.onAdUserClose,AdPaused:b.onAdPaused,AdPlaying:b.onAdResumed,AdError:b.onAdError,AdLog:b.onAdLog};b.vpaidCreative.setCallbacksForCreative(b.creativeEventCallbacks,b);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,
a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON);(c=this.rendition?this.rendition.getParameter("creativeData"):
null)||(c=this.rendition?this.rendition.getParameter("VPAID_creativeData"):null);c&&(c=a.Util.trim(c));c={AdParameters:c};var d=this._rendererController.getAdInstance().getSlot();this.videoBase.style.width="0px";this.videoBase.style.height="0px";this.videoBase.style.zIndex="100000";this.videoBase.style.position="absolute";this.videoBase.style.left=this._rendererController.getContentVideoElement().style.left;this.videoBase.style.top=this._rendererController.getContentVideoElement().style.top;this.videoBase.className=
"fw_vpaid_slot";this.videoParent=d.getBase();var e=this._rendererController.getContentVideoElement();if("nodeType"in e&&0<e.nodeType)try{this.videoParent.insertBefore(this.videoBase,this._rendererController.getContentVideoElement())}catch(h){this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild)}else this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild);e={slot:this.videoBase,videoSlot:this._rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0};
var f=d.getWidth();d=d.getHeight();f&&d||!this.rendition||(f=this.rendition.getWidth(),d=this.rendition.getHeight());this.vpaidCreative.initAd(f,d,this.vpaidViewmode,this.vpaidDesiredBitrate,c,e)}},onAdLoaded:onVisibilityChange:onAdStarted:onAdStopped:onAdImpression:onAdLinearChange:
onAdSizeChange:onAdPaused:function(){a.log("VPAIDRenderer: onAdPaused()");"playing"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.adPlaybackState="paused"},onAdResumed:onAdSkipped:function(){a.log("VPAIDRenderer: onAdSkipped()");
this.dispose();this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},onAdVideoFirstQuartile:function(){a.log("VPAIDRenderer: onAdVideoFirstQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint:function(){a.log("VPAIDRenderer: onAdVideoMidpoint()");this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},onAdVideoThirdQuartile:function(){a.log("VPAIDRenderer: onAdVideoThirdQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},
onAdVideoComplete:function(){a.log("VPAIDRenderer: onAdVideoComplete");this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE})},onAdUserAcceptInvitation:function(){a.log("VPAIDRenderer: onAdUserAcceptInvitation()");this._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose:function(){a.log("VPAIDRenderer: onAdUserClose()");this._rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize:onAdLog:onAdError:start:function(b){a.log("VPAIDRenderer start()");this._rendererController=b;this.timePositionClass=this._rendererController.getAdInstance().getSlot().getTimePositionClass();this.rendition=this._rendererController.getAdInstance().getActiveCreativeRendition();
this._initParams();if(b=(b=this.rendition?this.rendition.getPrimaryCreativeRenditionAsset():null)?b.getUrl():null){this.vpaidCreative=new a.VPAIDWrapper;this.vpaidCreative._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);this.vpaidCreative.setTimeoutValueInMs(this.creativeTimeoutDelayInMs);this.vpaidCreative.addEventListener("loaderror",this.onCreativeLoadError.bind(this));this.vpaidCreative.addEventListener("timeout",this.onCreativeTimeout.bind(this));
this.vpaidCreative.addEventListener("CreativeAssetLoaded",this.onCreativeAssetLoaded.bind(this));try{this.vpaidCreative.loadCreativeAsset(b)}catch(c){a.warn(c),that._eventHandlers.loaderror(a.ERROR_UNKNOWN,"Error when loading creative: "+c)}}else this._failWithError(a.ERROR_NULL_ASSET,"Creative asset url cannot be null")},stop:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:pause:function(){a.log("VPAIDRenderer pause()");this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.vpaidCreative.canPauseAd()?"playing"===this.adPlaybackState&&(this.adPlaybackState="pausing",this.vpaidCreative.pauseAd()):a.log("The creative is not able to pause")},
resume:dispose:function(){a.log("VPAIDRenderer dispose()");this.vpaidCreative&&(this.videoParent&&(this.videoParent.removeChild(this.videoBase),this.videoParent=null),this._visibilityChangeListener&&this.vpaidCreative._autoPauseAdOnVisibilityChange&&
(a.log("remove visibilitychange listener"),document.removeEventListener("visibilitychange",this._visibilityChangeListener,!1)),this.vpaidCreative.removeCallbacksForCreative(this.creativeEventCallbacks),this.vpaidCreative.removeEventListener("timeout"),this.vpaidCreative.removeEventListener("loaderror"),this.vpaidCreative=null)},resize:function(){a.log("VPAIDAdRenderer resize()");var b=this._rendererController.getAdInstance().getSlot(),c=b.getWidth();b=b.getHeight();a.log("VPAIDRenderer new size width:"+
c+" height:"+b);this.vpaidCreative.resizeAd(c,b,this.vpaidViewmode)}});return a};w.tv.freewheel.SDK||(w.tv.freewheel.SDK=w.tv.freewheel[U]("tv.freewheel.SDK"));return w})();
