"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["bundle.Compose"],{751507:(e,t,n)=>{n.d(t,{$6:()=>a,eY:()=>c,zt:()=>i});var r=n(202784),o=r.createContext(!1);ar a=o.Consumer;,929279:(e,t,n)=>{n.d(t,{Z:()=>r});n(315735),n(73439),n(906886),n(202784);const r=(0,n(656499).Z)({loader:)},506800:(e,t,n)=>{n.d(t,{o:()=>o});var r=n(316742),o=(0,r.Z)([]);(0,r.Z)({})},173738:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(133028),o=n(256666),i=n(196234),a=(n(73439),n(477950),n(621850),n(222836)),c=n(829122),s=n(791191),l=(0,c.ZP)({namespace:"topics"}),u=(0,c.tb)(l,{context:"FETCH_TOPIC",endpoint:function(e){return e.withEndpoint(a.ZP).fetchOneTopic},params:function(e,t){return{topicId:(0,i.Z)(e,1)[0]}}}),d={addTopic:updateFollowingStatus:function(e,t){return function(n,r){return n(l.updateOne(e,{following:t})),Promise.resolve()}}},p=function(e,t,n){var i=t.meta.entityId,a=e.entities[i];return a?function(e,t,n,i){return/_REQUEST$/.test(t.type)?(0,r.Z)((0,r.Z)({},e),{},{entities:(0,r.Z)((0,r.Z)({},e.entities),{},(0,o.Z)({},n.id,(0,r.Z)((0,r.Z)({},n),i())))}):e}(e,t,a,n):e},f={follow:(0,c.Tx)(l,"follow",{getParams:function(e){return{topicId:e}},getApiMethod:function(e){return e.withEndpoint(a.ZP).follow},reducer:function(e,t){return p(e,t,(function(){return{following:!0,not_interested:!1}}))},context:"FOLLOW_TOPIC"}),unfollow:(0,c.Tx)(l,"unfollow",{getParams:function(e){return{topicId:e}},getApiMethod:function(e){return e.withEndpoint(a.ZP).unfollow},reducer:function(e,t){return p(e,t,(function(){return{following:!1}}))},context:"UNFOLLOW_TOPIC"}),notInterested:(0,c.Tx)(l,"notInterested",{getParams:function(e){return{topicId:e}},getApiMethod:function(e){return e.withEndpoint(a.ZP).notInterested},reducer:function(e,t){return p(e,t,()},context:"NOT_INTERESTED_TOPIC"}),undoNotInterested:(0,c.Tx)(l,"undoNotInterested",{getParams:getApiMethod:reducer:context:"UNDO_NOT_INTERESTED_TOPIC"})},m=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},l),u),d),f),{},{customActionTypes:(0,c.X7)(f)});const h=s.Z.register(m)},61508:(e,t,n)=>{n.r(t),n.d(t,{PlacePickerScreen:()=>X,default:()=>$});var r=n(968079),o=n(709249),i=n(887371),a=n(545754),c=n(486906),s=(n(739529),n(231235),n(477950),n(94908),n(202784)),l=n(325686),u=n(3613),d=n(882392),p=n(527519),f=n(229496),m=n(322150),h=n(434411),_=n(973186),g=n(645184),v=n.n(g),y=n(711712),C=n(954170),S=n(511258),Z=n(872983),w=n(300292),b=n(335434),E=n(114615),R=n(823803),T=n(923335),P=n(392160),I=n(791670),L=n(944139),B=n(467935),x=n(924433),k=n(820288);const A=(0,P.Z)().propsFromState(().propsFromActions((function(){return{createLocalApiErrorHandler:(0,T.createLocalApiErrorHandlerWithContextFactory)("PLACE_PICKER"),loadGeoLocation:I.iG,fetchInitialPlacesIfNeeded:L.BJ,searchPlaces:L.k6,updateLastSelectedPlace:L.T5,updateSettings:x.VP,updateSingleComposer:k.zi}})).withAnalytics({page:"compose",section:"place_picker"});var D=function(){eturn(0,i.Z)(e,[{key:"format",value:function(e){var t=Math.round(10*e)/10;return t>0?this.formatter({distance:t}):this.fallbackFormatter({distance:Math.round(e*this.fallbackRatio)})}}]),e}(),M=new D(v().b01ed2db,v().i83e29e1,5280),F=new D(v().d4b7cff7,v().b211849f,1e3),H=["lr","mm","uk","us"],V=v().b772cd66,O=v().e7c766ee,U=v().ab68727a,N=v().ae4057a2,q=v().bf2923a6,z=v().d963d1b6,W=v().a893d602,G=v().e68b09b4,Q=v().be6cc44e,j=v().d8ef3232,J=v().cce30dcc,K=v().fa9adac1,X=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;(0,o.Z)(this,n),(i=t.call(this,e)).state={activeResultSet:E.Z0.initial,geoLocationError:void 0,query:"",selectedLocation:void 0,showSearchForButton:!1},i._appBarRef=s.createRef(),i._fetchInitialPlaces=function(){var e=i.props,t=e.createLocalApiErrorHandler,n=e.fetchInitialPlacesIfNeeded,r=e.taggedLocation;n().then((function(){var e=i.props.autotaggedLocation;r||i.setState({selectedLocation:e})})).catch(t())},i._getActiveResults=function(){var e=i.props,t=e.initialResults,n=e.lastSearchResults;return i.state.activeResultSet===E.Z0.initial?t:n},i._selectResults=function(){var e,t=i.state,n=t.query,o=t.selectedLocation,a=(null===(e=i._getActiveResults())||void 0===e?void 0:e.places)||[];return o&&(a=[o].concat((0,r.Z)(a.filter(()))),a.filter(()},i._goBack=i._setTaggedLocation=function(e){var t=i.props,n=t.updateLastSelectedPlace,r=t.updateSettings;(0,t.updateSingleComposer)({updates:{taggedLocation:e}}),n(e),r({shouldAutoTagLocation:!!e})},i._handleBack=i._handleDone=i._handleRemove=i._handleRetry=function(){var e=i.props.searchPlaces,t=i.state,n=t.activeResultSet,r=t.query;n===E.Z0.initial?i._fetchInitialPlaces():e(r)},i._handleLocationDisabledPromptDismiss=i._handleChange=function(e){var t=e.currentTarget.value,n=t.length?i.state.activeResultSet:E.Z0.initial;i.setState({activeResultSet:n,query:t,showSearchForButton:!!t.length})},i._handleClear=i._handleSubmit=function(){var e=i.state.query,t=i.props.searchPlaces;e.length&&(i.setState({activeResultSet:E.Z0.lastSearch,showSearchForButton:!1}),t(e))},i._handlePlaceClick=i._renderPlaceSubtext=function(e){var t,n,r,o,a,c,l=i.props,p=l.position,f=l.userCountry,m=e.place,h=m.attributes.street_address,_=m.centroid;if(h&&_&&2===_.length&&p){var g=(t={lat:p.coords.latitude,long:p.coords.longitude},n={lat:_[1],long:_[0]},r=t.lat*(Math.PI/180),o=n.lat*(Math.PI/180),a=o-r,c=(n.long-t.long)*(Math.PI/180),7917.6*Math.asin(Math.sqrt(Math.sin(a/2)*Math.sin(a/2)+Math.cos(r)*Math.cos(o)*Math.sin(c/2)*Math.sin(c/2))));return s.createElement(u.Z,null,s.createElement(d.ZP,null,h),s.createElement(d.ZP,null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"us";if(H.find(())return M.format(e);var n=1.609344*e;return F.format(n)}(g,f)))}},i._renderPlace=function(e){var t=i.state.selectedLocation;return s.createElement(p.Z,{actionSubText:i._renderPlaceSubtext(e),actionText:e.place.full_name,isSelected:e.place.id===(null==t?void 0:t.place.id),key:e.place.id,onClick:i._handlePlaceClick(e),selectable:!0})},i._renderPlaces=function(e){return e.length?e.map(():s.createElement(d.ZP,{align:"center",style:Y.noPlacesText},z)},i._renderAttributionIfNeeded=function(){var e=i._getActiveResults();return null!=e&&e.attributions.has(E.xt.foursquare)?s.createElement(y.default,{style:Y.foursquareIcon}):null},i._renderResults=function(){var e=i.state,t=e.query,n=e.showSearchForButton,r=i._selectResults();return s.createElement(l.Z,null,i._renderPlaces(r),n?s.createElement(p.Z,{actionText:K({query:t}),onClick:i._handleSubmit,textColor:"primary"}):null,i._renderAttributionIfNeeded())},i._renderRightControl=function(){return s.createElement(l.Z,{style:Y.actionButtonContainer},s.createElement(f.ZP,{onPress:i._handleRemove,size:"small",style:Y.actionButton,type:"primaryText"},G),s.createElement(f.ZP,{onPress:i._handleDone,size:"small",style:Y.actionButton,type:"primaryFilled"},V))},i._renderGeoPicker=function(){var e=i.props,t=e.history,n=e.initialFetchStatus,r=e.lastSearchFetchStatus,o=i.state.activeResultSet===E.Z0.initial?n:r;return s.createElement(w.Z,{appBarRef:i._appBarRef,history:t,onBackClick:i._handleBack,rightControl:i._renderRightControl(),title:J},s.createElement(m.Z,{Icon:C.default,onChange:i._handleChange,onClear:i._handleClear,onSubmitEditing:i._handleSubmit,placeholder:Q,style:Y.search,withClearButton:!0}),s.createElement(Z.Z,{fetchStatus:o===R.ZP.NONE?R.ZP.LOADING:o,onRequestRetry:i._handleRetry,render:i._renderResults,retryMessage:j}))},i._renderLocationDisabledPrompt=function(){var e=i.state.geoLocationError,t=N,n=q;return e&&e.code===b.M.PERMISSION_DENIED&&(t=O,n=U),s.createElement(h.Z,{actionLabel:W,graphic:S.default,headline:t,onAction:i._handleLocationDisabledPromptDismiss,onClose:i._handleLocationDisabledPromptDismiss,subtext:n})};var a=e.autotaggedLocation,c=e.initialResults,_=e.taggedLocation;return _?i.state.selectedLocation=_:c&&(i.state.selectedLocation=a),i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;return(0,this.props.loadGeoLocation)().then(this._fetchInitialPlaces,()}},{key:"render",value:]),n}(s.Component),Y=_.Z.create((function(e){return{search:{marginHorizontal:e.spaces.space16,flexGrow:0},actionButtonContainer:{flexDirection:"row"},actionButton:{marginStart:e.spaces.space12},noPlacesText:{marginVertical:e.spaces.space16},foursquareIcon:{marginVertical:e.spaces.space16,fill:e.colors.gray700}}}));const $=A(X)},11484:(e,t,n)=>{n.r(t),n.d(t,{Recipients:()=>D,default:()=>M});var r=n(968079),o=n(196234),i=n(202784),a=n(325686),c=n(123162),s=n(468591),l=n(796818),u=n(882392),d=n(229496),p=n(645184),f=n.n(p),m=n(503614),h=n(300292),_=n(142569),g=n(296688),v=n(506800),y=n(845855),C=n(759824),S=n(24949),Z=n(593477),w=n(392160),b=n(467935),E=n(820288),R=function(e,t){return t.location.state},T=function(e,t){var n=R(0,t);return n&&n.inReplyToStatus},P=function(e,t){var n=R(0,t);return n&&n.excludedRecipients||(0,v.o)()};const I=(0,w.Z)().propsFromState((function(){return{recipientIds:(0,S.P1)(T,b._h,(function(e,t){return e&&t?(0,Z.YT)({inReplyToStatus:e,viewerUserId:t,excludeReplyUser:!0}).map((function(e){return e.id_str})):(0,v.o)()})),initialExcludedRecipients:P,inReplyToStatus:T}})).propsFromActions(();var L=f().c55eed72,B=f().b772cd66,x=f().caca3102,k=f().c6a6dc2f,A={page:"compose",section:"recipients"},D=function(e){var t=e.history,n=e.inReplyToStatus,p=e.initialExcludedRecipients,f=e.recipientIds,S=e.updateExcludedRecipientsV2,Z=i.useState(p),w=(0,o.Z)(Z,2),b=w[0],E=w[1];if(!n)return i.createElement(C.Z,{to:"/compose/tweet"});var R=(n.retweeted_status||n).user,T=function(e){E(e?(0,v.o)():f)},P=function(e){return function(){var t=-1!==b.indexOf(e);E(t?b.filter(():(0,m.Z)([].concat((0,r.Z)(b),[e])))}},I=D=function(){return f.length>1?i.createElement(l.Z,{checked:0===b.length,onChange:T}):null},M=function(e){var t=e.isBlocking,n=e.screenName;return t?i.createElement(u.ZP,{color:"magenta500",size:"subtext2"},k({screenName:n})):null},F=function(e){if(!n)return null;var t=(n.retweeted_status||n).user,r=-1!==b.indexOf(e),o=e===t.id_str,a=i.createElement(l.Z,{checked:!r,disabled:o,onChange:P(e)});return i.createElement(_.ZP,{bottomControl:M,cellClickable:!o,decoration:a,key:e,onClick:P(e),promotedItemType:"users",userId:e,withLink:!1})};return i.createElement(y.nO,{namespace:A},i.createElement(h.Z,{backLocation:"/compose/tweet",history:t,onBackClick:I,rightControl:i.createElement(d.ZP,{onPress:I,size:"xSmall",type:"brandFilled"},B),title:L},F(R.id_str),f.length?i.createElement(a.Z,null,i.createElement(c.Z,null),i.createElement(s.ZP,{rightControl:D(),text:x}),i.createElement(g.Z,{renderUserCell:F,userIds:f})):null))};const M=I(D)},651909:(e,t,n)=>{n.r(t),n.d(t,{Compose:()=>ze,default:()=>Ge});var r=n(133028),o=n(709249),i=n(887371),a=n(545754),c=n(486906),s=(n(73439),n(136728),n(477950),n(385940),n(202784)),l=n(360917),u=n.n(l),d=n(928316),p=n(325686),f=n(229496),m=n(805252),h=n(854044),_=n(888990),g=n(870451),v=n(973186),y=n(645184),C=n.n(y),S=n(16587),Z=n(871768),w=n(196234),b=n(882392);function E(e){var t=e-(new Date).getTime(),n=1e3*Math.round(t<0?0:t/1e3),r=new Date(n).toLocaleString("default",{minute:"numeric",second:"numeric"}),o=r.split(":"),i=(0,w.Z)(o,2);return{minutes:+i[0],seconds:+i[1],formatted:r}}var R=function(e){var t=e.accessibilityLabel,n=e.expiration,r=e.getAccessibilityLiveLabel,o=e.onTimeElapsed,i=s.useRef(r),a=s.useRef(o);i.current=r,a.current=o;var c=s.useState((),l=(0,w.Z)(c,2),u=l[0],d=l[1],f=s.useState((),m=(0,w.Z)(f,2),h=m[0],_=m[1];s.useEffect((function(){var e=setInterval((function(){var t,r,o=E(+n),c=null===(t=i.current)||void 0===t?void 0:t.call(i,o);(_(c),d(o),"00:00"===o.formatted)&&(clearInterval(e),null===(r=a.current)||void 0===r||r.call(a))}),500);return function(){return clearInterval(e)}}),[n]);var g="function"==typeof t?t(u):t;return s.createElement(p.Z,{style:T.root},s.createElement(b.ZP,{accessibilityLabel:g&&"".concat(g),color:"gray900",testID:"displayedCountdown",weight:"medium"},u.formatted,h&&s.createElement(p.Z,{accessibilityLabel:h,accessibilityLiveRegion:"polite"})))},T=v.Z.create((function(e){return{root:{backgroundColor:e.colors.gray50,borderRadius:e.spaces.space2,paddingBottom:e.spaces.space4,paddingEnd:6,paddingStart:6,paddingTop:e.spaces.space4}}})),P=n(300292),I=n(929279),L=n(790611),B=n(120192),x=n(896889),k=n(470295),A=n(845855),D=n(781768),M=n(739581),F=n(877939),H=n(459740),V=n(24949),O=n(958955),U=n(923335),N=n(691335),q=n(392160),z=n(338030),W=n(240615),G=n(34556),Q=n(146202),j=n(741680),J=n(820288),K=n(407419),X=n(157659),Y=["cardUrl","mediaIds"],$=function(e){return J.tS(e,"")},ee=function(e){return J.WQ(e,"")},te=function(e){return J.Gz(e,"")},ne=re=oe=ie=ae=re((function(e){return e.inReplyToStatusId})),ce=function(e,t){var n=ie(0,t)||ae(e,t);return n?K.Z.selectHydrated(e,n):void 0},se=le=re((function(e){return e.defaultText})),ue=function(e,t){var n=le(e,t);return(0,N.Z)(t.location)||n},de=re((function(e){return e.quotedStatus})),pe=fe=re((function(e){return e.isSelfThreadReply})),me=re((function(e){return e.hideUnsentTweetsButton})),he=re((function(e){return e.headingSubtitle})),_e=re((function(e){return e.headingTitle})),ge=re((),ve=re((function(e){return e.editableUntil})),ye=re((function(e){return e.selectedCommunityId})),Ce=re((function(e){return e.trustedFriendsValue})),Se=re((function(e){return e.previousTweetId})),Ze=we=be=function(){return(0,V.P1)($,ue,pe,G.gz,se,(function(e,t,n,o,i){return e.map((function(e,a){var c,s=(0,O.Z)(e.mediaIds||[]),l=o.filter(();return(0,r.Z)((0,r.Z)({},((c=e).cardUrl,c.mediaIds,(0,H.Z)(c,Y))),{},{media:l,quotedStatus:0===a?n:void 0,text:0===a&&t&&!i?t:e.text})}))}))};const Ee=(0,q.Z)().propsFromState((function(){return{activeUser:oe,audienceControlsValue:(0,V.P1)(Ze,(function(e,t){return J.oN(e,"modal")}),j.Ln,(,(),broadcastCommunityTweet:ne,composerData:be(),composeSemanticCoreId:re((),draftTweets:z.Fq,editableUntil:ve,hideUnsentTweetsButton:me,inReplyToStatus:ce,inReplyToStatusId:ie,isEdit:ge,isIntentRoute:se,isSelfThreadReply:fe,isSending:ee,isAutoSaving:te,scheduledTweets:Q.yD,selectedCommunityIdFromLocationState:ye,selectedTrustedFriendsValue:Ce,sendingProgress:J.ZE,subtitle:he,shouldShowCommunityAudienceEducation:we,title:_e}})).propsFromActions((function(){return{createDraftTweetApiErrorHandler:(0,U.createLocalApiErrorHandlerWithContextFactory)(z.CA),createScheduledTweetApiErrorHandler:(0,U.createLocalApiErrorHandlerWithContextFactory)(Q.Hf),fetchScheduledTweets:Q.FP,fetchDraftTweets:z.Le,addCommunityAudienceEducationFlag:updateAudienceControlsValue:J.sU,setActiveParentKey:J.jr}}));var Re=C().e6042757,Te=C().a4e39717,Pe=3e5,Ie={"05:00":!0,"01:00":!0};function Le(e){var t=e.formatted,n=e.minutes;return Ie[t]&&Te({minutes:n})}function Be(e){var t=e.minutes,n=e.seconds;return Re({minutes:t,seconds:n})}function xe(e,t){var n,r,o,i=e-Date.now()-Pe,a=(n=i,r=0,o=2147483647,Math.min(Math.max(n,r),o)),c=setTimeout(t,a,e);return const ke="tweetButton";var Ae=C().a609edbe,De=C().d4ebc798,Me=C().df12a438,Fe=C().a516ab36,He=C().j24c37b2,Ve=C().cb817dae,Oe="compose",Ue={page:Oe},Ne={page:Oe,section:"reply"},qe={context:"compose_intent_logged_in"},ze=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isValid:!1,editCountdownShown:!1},e._handleEditCountdownTimeout=function(t){var n=t-Date.now()<=Pe;n!==e.state.editCountdownShown&&e.setState({editCountdownShown:n})},e._handleDismissCommunityAudienceEducation=e._handleAppBarHeight=(0,S.Z)((function(){var t=d.findDOMNode(e._appBarRef);return t&&t instanceof window.Element&&t.getBoundingClientRect().height||50})),e._handleBackClick=function(){e._composeContainerRef&&e._composeContainerRef.handleDismissComposer()},e._handleCloseComposer=function(){e._appBarRef&&e._appBarRef.goBack()},e._handleSendTweet=function(){e._composeContainerRef&&e._composeContainerRef.handleTweetOrRetweet()},e._handleSendTweetWithBoost=e._setValidity=e._getScribeNamespace=function(){return e.props.inReplyToStatus||e.props.inReplyToStatusId?Ne:Ue},e._getScribeData=function(){var t=e.props,n=t.activeUser;return t.isIntentRoute&&n?qe:u()},e._renderAppBarRightControl=function(){var t=e.state.isValid,n=e.context.isModal,r=e.props,o=r.activeUser,i=r.audienceControlsValue,a=r.composerData,c=r.inReplyToStatus,l=r.isEdit,u=r.isSelfThreadReply,d=r.isSending,m="all"===i.conversationControlsValue,h=!t||d||!o||e.is_uploading;return s.createElement(p.Z,{style:We.rightControlContainer},l?e._renderCountdownTimer():s.createElement(F.Z,{disabled:h,isAudienceAll:m,isComposerValid:t,isEdit:!!l,isModal:n,isQuote:e.isQuoteTweet,isReply:!!c,isRetweet:!!e.isRetweet,isScheduled:e.isScheduled,isSelfThreadReply:!!u,isThread:e.isThread,onTweetWithBoostPress:e._handleSendTweetWithBoost,renderFallback:e._renderDraftsHeading,shouldShow:!n,tweetText:a[0].text,viewer:o}),n?null:s.createElement(f.ZP,{disabled:h,onPress:e._handleSendTweet,size:"small",testID:ke,type:"brandFilled"},(0,B.of)({inReplyToStatus:!!c,isSelfThreadReply:!!u,isQuoteTweet:!!e.isQuoteTweet,isRetweet:!!e.isRetweet,isScheduled:!!e.isScheduled,isThread:e.isThread,isEdit:!!l})))},e._renderHeaderWithProgressBar=function(t){var n=e.context.isModal,r=e.props,o=r.isAutoSaving,i=r.isSending,a=r.sendingProgress;return s.createElement(s.Fragment,null,s.createElement(m.Z,{progress:i&&!o?Math.max(a,.02):0,style:[We.progressBar,n&&We.progressBarModal]}),t)},e._renderDraftsHeading=function(){if(!e.props.hideUnsentTweetsButton)return s.createElement(f.ZP,{onPress:e._handleOpenUnsent,size:"small",testID:"unsentButton",type:"brandText"},De)},e._renderCountdownTimer=function(){var t=e.props.editableUntil;if(!e.state.editCountdownShown||!t)return null;return s.createElement(R,{accessibilityLabel:Be,expiration:t,getAccessibilityLiveLabel:Le,onTimeElapsed:)},e._handleOpenUnsent=function(){var t=e.props.history;(0,M.n9)((0,r.Z)((0,r.Z)({},e._getScribeNamespace()),{},{element:"unsent_tweets",action:"click"})),t.push("/compose/tweet/unsent/drafts")},e._setAppBarRef=function(t){e._appBarRef=t},e._handleComposeContainerRef=e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.activeUser,n=e.broadcastCommunityTweet,r=e.createDraftTweetApiErrorHandler,o=e.createScheduledTweetApiErrorHandler,i=e.editableUntil,a=e.fetchDraftTweets,c=e.fetchScheduledTweets,s=e.history,l=e.inReplyToStatus,u=e.isEdit,d=e.location,p=e.selectedCommunityIdFromLocationState,f=e.selectedTrustedFriendsValue,m=e.updateAudienceControlsValue;this._unlockReload=k.Z.acquire(),s.setModalRouteBreakpoint(s.location),t&&(c().catch(o()),a().catch(r())),p&&(m({_type:"community_members",communityIdValue:p,conversationControlsValue:"community_members",broadcast:n},"modal"),s.replace({pathname:d.pathname,state:(0,Z.Z)(d.state||{},"selectedCommunityId")})),f&&(m({_type:"trusted_friends_tweet",trustedFriendsValue:f,conversationControlsValue:"trusted_friends_tweet"},"modal"),s.replace({pathname:d.pathname,state:(0,Z.Z)(d.state||{},"trustedFriendsValue")})),null!=l&&l.exclusivity_info?m({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}):null!=l&&l.community_id_str?m({_type:"community_members",communityIdValue:l.community_id_str,conversationControlsValue:"community_members"}):null!=l&&l.trusted_friends_info&&m({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsValue:{trusted_friends_list_id:"1482057446797373440"}});var h=+i;u&&!this._cancelEditTimeout&&h>=0&&(this._handleEditCountdownTimeout(h),this._cancelEditTimeout=xe(h,this._handleEditCountdownTimeout))}},{key:"componentWillUnmount",value:function(){var e,t=this.props.history;t.setModalRouteBreakpoint(t.location),this._unlockReload(),null===(e=this._cancelEditTimeout)||void 0===e||e.call(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeUser,r=t.composeHeader,o=t.composeSemanticCoreId,i=t.history,a=t.isEdit,c=t.isIntentRoute,l=t.location,u=t.quotedStatus,d=t.subtitle,p=t.title,f=c&&!n,m=this.context.isModal;return s.createElement(A.nO,{data:this._getScribeData(),namespace:this._getScribeNamespace()},s.createElement(h.ZP,null,(function(t){var c=t.containerWidth,h=x.Z.shouldRenderAsModal(c),g=(f||e.showCommunityAudienceEducation)&&h;return s.createElement(s.Fragment,null,e.showCommunityAudienceEducation?s.createElement(_.Z,{actionLabel:He,graphicDisplayMode:"none",headline:Me,onAction:e._handleDismissCommunityAudienceEducation,onClose:e._handleDismissCommunityAudienceEducation,subtext:Fe,withCloseButton:!1}):null,f&&s.createElement(I.Z,{history:i,location:l}),g?null:s.createElement(P.Z,{appBarRef:e._setAppBarRef,documentTitle:Ae,hideBackButton:!1,history:i,onBackClick:e._handleBackClick,renderHeader:e._renderHeaderWithProgressBar,rightControl:e._renderAppBarRightControl(),subtitle:d,title:a?Ve:p},s.createElement(L.Z,{activeUser:n,composeHeader:r,composeSemanticCoreId:o,containerWidth:c,history:i,isModal:m,location:l,onCloseComposer:e._handleCloseComposer,onHandleAppBarHeight:e._handleAppBarHeight,onRef:e._handleComposeContainerRef,quotedStatus:u,setValidity:e._setValidity})))})))}},{key:"showCommunityAudienceEducation",get:function(){var e=this.props,t=e.inReplyToStatus,n=e.selectedCommunityIdFromLocationState,r=e.shouldShowCommunityAudienceEducation,o=!!(null!=t&&t.community_id_str||n);return r&&o}},{key:"isThread",get:,{key:"isRetweet",get:function(){var e=this.props.composerData,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}},{key:"isQuoteTweet",get:function(){var e=this.props.composerData;return!this.isThread&&!!e[0].quotedStatus}},{key:"isScheduled",get:function(){var e=this.props.composerData;return(0,D.TO)(e[0].scheduledFor)}},{key:"is_uploading",get:]),n}(s.Component);ze.contextType=g.Z;var We=v.Z.create((function(e){return{progressBar:{position:"fixed",borderTopStartRadius:e.borderRadii.small,borderTopEndRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},rightControlContainer:{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:e.spaces.space12}}}));const Ge=Ee(ze)},703655:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(133028),o=n(202784),i=n(890601),a=n(783427),c=n(493987),s=n(473569),l=l.metadata={width:24,height:24};const u=l},447636:]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.Compose.828d6dfa.js.map