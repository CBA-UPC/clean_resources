<!doctype html><html lang=en><head><script>const trackanchors=["section/Overview","section/Use-our-Postman-collection","section/Authentication","group/Track-v2-API","tag/track_v2","operation/entity","operation/batch","tag/Person-Schemas","section/Identify-a-person","section/Delete-a-person","section/Send-events-for-a-person","section/Send-page-events-for-a-person","section/Send-screen-events-for-a-person","section/Add-relationships-to-a-person","section/Remove-relationships-from-a-person","section/Add-a-person's-devices","section/Delete-a-person's-devices","section/Merge-duplicate-people","section/Suppress-a-person","section/Unsuppress-a-person","tag/Object-Schemas","section/Identify-object","section/Delete-object","section/Add-relationships-to-an-object","section/Remove-relationships-from-an-object","group/Track-v1-API","tag/Track-v1-Overview","section/Web-SDK-vs-Backend-Integrations","section/Client-libraries","section/Track-API-Limits","tag/trackRegion","operation/getRegion","tag/Track-Customers","operation/identify","operation/delete","operation/add_device","operation/delete_device","operation/suppress","operation/unsuppress","operation/unsubscribe","operation/merge","tag/Track-Events","operation/track","operation/trackAnonymous","operation/pushMetrics","tag/Forms","operation/submitForm","tag/Track-Segments","operation/add_to_segment","operation/remove_from_segment","tag/trackLimit"],appanchors=["section/Overview","section/Use-our-Postman-collection","section/Authentication","section/App-API-limits","group/Send-Messages","tag/Send-Messages","operation/triggerBroadcast","operation/sendEmail","tag/Message-sending-limits","group/App-API","tag/Activities","operation/listActivities","tag/Broadcasts","operation/broadcastStatus","operation/broadcastErrors","operation/listBroadcasts","operation/getBroadcast","operation/broadcastMetrics","operation/broadcastLinks","operation/broadcastActions","operation/broadcastMessages","operation/getBroadcastAction","operation/updateBroadcastAction","operation/broadcastActionMetrics","operation/broadcastActionLinks","operation/listBroadcastTriggers","tag/Campaigns","operation/listCampaigns","operation/getCampaigns","operation/campaignMetrics","operation/campaignLinkMetrics","operation/listCampaignActions","operation/getCampaignMessages","operation/getCampaignAction","operation/updateCampaignAction","operation/campaignActionMetrics","operation/campaignActionLinks","operation/campaignJourneyMetrics","tag/Collections","operation/addCollection","operation/getCollections","operation/getCollection","operation/deleteCollection","operation/updateCollection","operation/getCollectionContents","operation/updateCollectionContents","tag/Customers","operation/getPeopleEmail","operation/getPeopleFilter","operation/getPersonAttributes","operation/getPeopleById","operation/getPersonSegments","operation/getPersonMessages","operation/getPersonActivities","tag/ESP-Suppression","operation/getSuppression","operation/getSuppressionByType","operation/deleteSuppression","operation/postSuppression","tag/Exports","operation/listExports","operation/getExport","operation/downloadExport","operation/exportPeopleData","operation/exportDeliveriesData","tag/Imports","operation/import","operation/getImport","tag/Info","operation/getCioAllowlist","tag/Messages","operation/listMessages","operation/getMessage","operation/getArchivedMessage","tag/Newsletters","operation/listNewsletters","operation/getNewsletters","operation/getNewsletterMetrics","operation/getNewsletterLinks","operation/listNewsletterVariants","operation/getNewsletterMsgMeta","operation/getNewsletterVariant","operation/updateNewsletterVariant","operation/getVariantMetrics","operation/getVariantLinks","tag/Reporting-Webhooks","operation/createWebhook","operation/listWebhooks","operation/getWebhook","operation/updateWebhook","operation/deleteWebhook","operation/reportingWebhook","tag/Segments","operation/createManSegment","operation/listSegments","operation/getSegment","operation/deleteManSegment","operation/getSegmentDependencies","operation/getSegmentCount","operation/getSegmentMembership","tag/Sender-Identities","operation/listSenders","operation/getSender","operation/getSenderUsage","tag/Snippets","operation/listSnippets","operation/updateSnippets","operation/deleteSnippet","tag/Transactional","operation/listTransactional","operation/getTransactional","operation/updateTransactional","operation/transactionalMetrics","operation/transactionalLinks","operation/transactionalMessages"];var hash=window.location.hash.substring(1);console.log(hash),hash&&hash.includes("section/Track-API-Customer-limits")&&(hash="tag/trackLimit"),hash&&trackanchors.includes(hash)?window.location.replace("/docs/api/track/#"+hash):hash&&appanchors.includes(hash)&&window.location.replace("/docs/api/app/#"+hash)</script><script>window.dataLayer=window.dataLayer||[];function gtag(){window.dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L97TR1N1TG")</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://customer.io/docs/images/cio-dark-logo.ico type=image/x-icon><link rel=stylesheet type=text/css href="/docs/docstyles/fly-components.min.css"><link rel=stylesheet type=text/css href=/docs/docstyles/sparkles.css><link rel=stylesheet type=text/css href=/docs/docstyles/custom.css><link rel=stylesheet type=text/css href=/docs/docstyles/site-header.css><link rel=stylesheet type=text/css href=/docs/docstyles/syntax.css><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/algolia-min.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel=stylesheet><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><script src=https://identity.netlify.com/v1/netlify-identity-widget.js></script>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script id=Cookiebot src="https://consent.cookiebot.com/uc.js?cbid=580961ad-eb88-4e7e-9110-fa057e88f072" type=text/javascript async></script>
<script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NRGKPHX")</script><script>!function(){var t,n,e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(t=0;t<e.methods.length;t++)n=e.methods[t],e[n]=e.factory(n);e.load=function(t,n){var o,s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://cdp.customer.io/v1/analytics-js/snippet/"+t+"/analytics.min.js",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(s,o),e._writeKey=t,e._loadOptions=n},e.SNIPPET_VERSION="4.15.3",e.load("0219aec78b936697c335"),e.page({anchor:location.hash.substring(1)})}}()</script><title>Customer.io APIs | Customer.io Docs</title><meta property="og:image" content="https://customer.io/docs/images/Customerio-1200x630.png"><meta name=description content="Check out the latest features and fixes in Customer.io, to help you use behaviorial data to personalize customer communications and drive engagement."><meta property="og:title" content="Customer.io Updates: Customer.io APIs"><meta property="og:description" content="Check out the latest features and fixes in Customer.io, to help you use behaviorial data to personalize customer communications and drive engagement."><meta property="og:url" content="/docs/api/"><meta name=twitter:card content="summary_large_image"><meta property="og:type" content="website"><script src=https://cdn.jsdelivr.net/npm/leader-line-new@1.1.9/leader-line.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js></script></head><body class=mrg-auto><header id=docs-header class=fly-flex><div class=site-nav-container><nav class="fly-flex mrg-auto"><div id=head-menu-container class="pad-b-none pad-t-none fly-flex"><a id=site-logo href=/docs class=site-nav-pad><img class=hidden-sm-down width=200 alt=Customer.io src=/docs/images/customerio-docs-logo.svg>
<img class=hidden-sm-up alt=Customer.io style=max-width:60px src=/docs/images/cio-logo.png></a>
<button class="navbar-toggler fly-flex__item--right hidden-md-up" type=button data-toggle=site-nav data-target=#site-nav aria-controls=site-nav aria-expanded=false aria-label="Toggle navigation" onclick=toggleNav(this)>
<span class=navbar-toggler-icon><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><rect y="9" width="20" height="2"/><rect y="3" width="20" height="2"/><rect y="15" width="20" height="2"/></svg></span></button><div class="docs-main-nav grid-lg-4 pad-none"><div id=search-box class="search-box display-inline-block"></div><a href=/docs/ai-helper id=aiHelperLink onclick=aiHelperLink(this) class="fly-btn fly-btn--outline hidden-lg-down text-no-underline hidden" style="height:30px;line-height:29.8667px;top:-2px;border-radius:0 5px 5px 0;border-left:none">Search with AI ✨</a><div id=searchhits class="bordered border-dark border-top-none" style=display:none><a id=try-ai href=/docs/ai-helper onclick=aiHelperLink(this) class="display-block text-center text-no-underline hidden" style=width:100%;margin-top:18px><span class="fly-label is-success mrg-r-none">&#127881 New!</span> Click here to switch to AI-powered search and get answers to your questions.</a>
<button id=controls-facets class="fly-flex__item--right mrg-r-md fly-nav-strip__item hidden-sm-up" type=button data-toggle=facets data-target=#facets aria-controls=facets aria-expanded=false aria-label="Toggle facets" onclick=toggleFacets(this) style=left:27px;position:absolute;background-color:#fff>
<span class="navbar-toggler-icon fly-flex"><span class=navbar-toggler-text style=color:unset;font-size:initial;top:2px;font-weight:500>Filters</span><svg class="mrg-r-xs" width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><use href="#filter"/></span></button><div class=fly-flex style=align-items:baseline><div id=facets class=hidden-sm-down></div><div id=hits></div></div></div></div></div><div class="pad-b-none hidden-md-down pad-t-none"><div class=fly-flex><ul class="site-nav list-unstyled"><li><a href=https://fly.customer.io/login id=app-sign-in class="menu-item menu-item-type-post_type menu-item-object-page uk-padding-remove-right" onclick=clickEvent(this) data-mtitle="Sign In">Sign
In</a></li></ul><div class="textwidget custom-html-widget site-nav-pad"><a class="fly-btn request-demo-button" role=button href=https://customer.io/demo/ onclick=clickEvent(this) data-mtitle="Request Demo">Request Demo</a></div></div></div></div></nav></div></header><div class="collapse hidden-md-up" id=site-nav><ul class="mobile-site-nav list-unstyled"><li class="mrg-b-none nav-item__link"><a href=https://customer.io/features/ class="menu-item menu-item-type-post_type menu-item-object-page" onclick=clickEvent(this) data-mtitle="Marketing Site Platform">Platform</a></li><li class="mrg-b-none nav-item__link"><a href=https://customer.io/pricing/ class="menu-item menu-item-type-post_type menu-item-object-page" onclick=clickEvent(this) data-mtitle="Marketing Site Pricing">Pricing</a></li><li class="mrg-b-none nav-item__link"><a href=https://customer.io/customers/ class="menu-item menu-item-type-post_type menu-item-object-page" onclick=clickEvent(this) data-mtitle="Marketing Site Customers">Customers</a></li><li class=nav-item__link><a href=https://customer.io/docs/ class="menu-item menu-item-type-post_type menu-item-object-page">Docs</a></li></ul><hr><div class=mobile-menu-buttons><a class=fly-btn role=button href=https://customer.io/demo/ onclick=clickEvent(this) data-mtitle="Request Demo">Request Demo</a>
<a class=mobile-btn role=button href=https://fly.customer.io/login id=app-sign-in onclick=clickEvent(this) data-mtitle="Sign In">Sign In</a></div></div><div class=page-stuff><div class="page-header sticky fly-flex"><button id=controls-header-menu class="header-menu-mobile hidden-sm-up" type=button data-toggle=header-menu data-target=#header-menu aria-controls=header-menu aria-expanded=false aria-label="Toggle site navigation" onclick=toggleHeaderNav()></button><ul class="header-menu fly-nav-strip fly-flex fly-flex__item--left hide-mobile" id=header-menu-list><li class="fly-nav-strip__item header-link pad-r-md fly-flex" id=start-link><a class="hover-label fly-flex hidden-mdl-down" href=/docs/get-started data-href=/docs/get-started><svg class="header-icon hidden-sm-down"><use href="#tip"/></svg><span class="header-menu-text hidden-sm-down">Get Started</span></a>
<input type=checkbox id=start-menu-check class=header-menu__toggle>
<label for=start-menu-check class="mobile-menu-label fly-flex pad-l-none hidden-mdl-up"><svg class="header-icon hidden-mdl-down"><use href="#tip"/></svg><span class="header-menu-text fly-flex__item--left" style=text-transform:capitalize>Get Started</span></label><ul class="header-submenu pad-l-sm pad-r-sm" id=start-menu><li><a href=/docs/get-started/welcome/>Welcome to Customer.io</a></li><li><a href=/docs/get-started/quick-start-guide/>Quick start guide</a></li><li><a href=/docs/get-started/create-workspace/>1. Create your workspace</a></li><li><a href=/docs/get-started/set-up-messages/>2. Set up message channels</a></li><li><a href=/docs/get-started/integrate/>3. Integrate with Customer.io</a></li><li><a href=/docs/get-started/add-people/>4. Add people</a></li><li><a href=/docs/get-started/segments-and-people-data/>5. Send events and make segments</a></li><li><a href=/docs/get-started/send-messages/>6. Start sending campaigns and workflows</a></li></ul></li><li class="fly-nav-strip__item header-link pad-r-md fly-flex" id=doc-link><a class="hover-label fly-flex hidden-mdl-down" href=/docs/journeys/journeys-overview data-href=/docs/journeys-overview><svg class="header-icon hidden-sm-down"><use href="#journeys-logo"/></svg><span class="header-menu-text hidden-sm-down">Journeys</span></a>
<input type=checkbox id=doc-menu-check class=header-menu__toggle>
<label for=doc-menu-check class="mobile-menu-label fly-flex pad-l-none hidden-mdl-up"><svg class="header-icon hidden-mdl-down"><use href="#journeys-logo"/></svg><span class="header-menu-text fly-flex__item--left" style=text-transform:capitalize>Journeys</span></label><ul class="header-submenu pad-l-sm pad-r-sm" id=doc-menu><li><a href=/docs/journeys/journeys-overview/>Introduction to Journeys</a></li><li><a href=/docs/journeys/people/>People & Events</a></li><li><a href=/docs/journeys/objects-data/>Objects & non-people data</a></li><li><a href=/docs/journeys/segmentation/>Segmentation</a></li><li><a href=/docs/journeys/campaigns-and-workflows/>Campaigns & Workflows</a></li><li><a href=/docs/journeys/messages-and-webhooks/>Message Channels</a></li><li><a href=/docs/journeys/liquid/>Liquid & Personalization</a></li><li><a href=/docs/journeys/metrics/>Metrics</a></li><li><a href=/docs/journeys/integration/>Integrations</a></li></ul></li><li class="fly-nav-strip__item header-link pad-r-md fly-flex" id=cdp-link><a class="hover-label fly-flex hidden-mdl-down" href=/docs/cdp/getting-started/ data-href=/docs/cdp><svg class="header-icon hidden-sm-down"><use href="#connection"/></svg><span class=header-menu-text>Data Pipelines</span></a>
<input type=checkbox id=cdp-menu-check class=header-menu__toggle>
<label for=cdp-menu-check class="mobile-menu-label fly-flex pad-l-none hidden-mdl-up"><svg class="header-icon hidden-mdl-down"><use href="#connection"/></svg><span class="header-menu-text fly-flex__item--left">Data Pipelines</span></label><ul class="header-submenu pad-l-md pad-r-md" style=max-width:unset id=cdp-menu><li><a href=/docs/cdp/getting-started/>Get Started</a></li><li><a href=/docs/cdp/sources/>Sources</a></li><li><a href=/docs/cdp/destinations>Destinations</a></li></ul></li><li class="header-link pad-r-md fly-flex fly-nav-strip__item" id=account-link><a class="hover-label fly-flex hidden-mdl-down" href=/docs/accounts-and-workspaces/ data-href=/docs/accounts-and-workspaces><svg class="header-icon hidden-sm-down"><use href="#manage"/></svg><span class=header-menu-text>Account & Settings
           </span></a>
<input type=checkbox id=account-menu-check class=header-menu__toggle>
<label for=account-menu-check class="mobile-menu-label fly-flex pad-l-none hidden-mdl-up"><svg class="header-icon hidden-mdl-down"><use href="#manage"/></svg><span class="header-menu-text fly-flex__item--left">Account & Settings
           </span></label><ul class="header-submenu pad-l-md pad-r-md" style=max-width:unset;width:203px id=account-menu><li><a href=/docs/accounts-and-workspaces/account-verification>Account Verification</a></li><li><a href=/docs/accounts-and-workspaces/billing/>Billing</a></li><li><a href=/docs/accounts-and-workspaces/your-account/>Your Account</a></li><li><a href=/docs/workspaces/>Workspaces</a></li><li><a href=/docs/accounts-and-workspaces/privacy-and-security/>Privacy & Security</a></li></ul></li><li id=controls-latest-features class="header-link fly-flex fly-nav-strip__item"><a class="hover-label fly-flex" href=/docs/release-notes data-href=/docs/release-notes><span class="header-menu-text pad-r-xs hidden-sm-up">Release notes</span><div class="pad-l-xs fly-flex hidden-sm-down" data-toggle=latest-features data-target=#latest-features aria-controls=latest-features aria-expanded=false aria-label="Toggle latest features"><div id=latest-features-icon class="navbar-toggler-icon mrg-auto fly-label pad-r-md" style=display:flex!important;padding-left:0!important;align-items:center><div id=sparklediv class=fly-flex style=display:flex!important><svg class="header-icon hidden-mdl-down" style="margin-left:8px"><use href="#setup-guide"/></svg><span class="header-menu-text pad-r-xs">Release notes</span><svg class="sparkles-wrapper__star sparkles-wrapper__star--st1" viewBox="0 0 122.88 122.88" xmlns="http://www.w3.org/2000/svg"><path d="M62.43 122.88h-1.98c0-16.15-6.04-30.27-18.11-42.34C30.27 68.47 16.16 62.43.0 62.43v-1.98c16.16.0 30.27-6.04 42.34-18.14C54.41 30.21 60.45 16.1 60.45.0h1.98c0 16.15 6.04 30.27 18.11 42.34 12.07 12.07 26.18 18.11 42.34 18.11v1.98c-16.15.0-30.27 6.04-42.34 18.11-12.07 12.07-18.11 26.18-18.11 42.34z"/></svg><svg class="sparkles-wrapper__star sparkles-wrapper__star--st2" viewBox="0 0 122.88 122.88" xmlns="http://www.w3.org/2000/svg"><path d="M62.43 122.88h-1.98c0-16.15-6.04-30.27-18.11-42.34C30.27 68.47 16.16 62.43.0 62.43v-1.98c16.16.0 30.27-6.04 42.34-18.14C54.41 30.21 60.45 16.1 60.45.0h1.98c0 16.15 6.04 30.27 18.11 42.34 12.07 12.07 26.18 18.11 42.34 18.11v1.98c-16.15.0-30.27 6.04-42.34 18.11-12.07 12.07-18.11 26.18-18.11 42.34z"/></svg><svg class="sparkles-wrapper__star sparkles-wrapper__star--st3" viewBox="0 0 122.88 122.88" xmlns="http://www.w3.org/2000/svg"><path d="M62.43 122.88h-1.98c0-16.15-6.04-30.27-18.11-42.34C30.27 68.47 16.16 62.43.0 62.43v-1.98c16.16.0 30.27-6.04 42.34-18.14C54.41 30.21 60.45 16.1 60.45.0h1.98c0 16.15 6.04 30.27 18.11 42.34 12.07 12.07 26.18 18.11 42.34 18.11v1.98c-16.15.0-30.27 6.04-42.34 18.11-12.07 12.07-18.11 26.18-18.11 42.34z"/></svg><svg class="sparkles-wrapper__star sparkles-wrapper__star--st4" viewBox="0 0 122.88 122.88" xmlns="http://www.w3.org/2000/svg"><path d="M62.43 122.88h-1.98c0-16.15-6.04-30.27-18.11-42.34C30.27 68.47 16.16 62.43.0 62.43v-1.98c16.16.0 30.27-6.04 42.34-18.14C54.41 30.21 60.45 16.1 60.45.0h1.98c0 16.15 6.04 30.27 18.11 42.34 12.07 12.07 26.18 18.11 42.34 18.11v1.98c-16.15.0-30.27 6.04-42.34 18.11-12.07 12.07-18.11 26.18-18.11 42.34z"/></svg><svg class="sparkles-wrapper__star sparkles-wrapper__star--st5" viewBox="0 0 122.88 122.88" xmlns="http://www.w3.org/2000/svg"><path d="M62.43 122.88h-1.98c0-16.15-6.04-30.27-18.11-42.34C30.27 68.47 16.16 62.43.0 62.43v-1.98c16.16.0 30.27-6.04 42.34-18.14C54.41 30.21 60.45 16.1 60.45.0h1.98c0 16.15 6.04 30.27 18.11 42.34 12.07 12.07 26.18 18.11 42.34 18.11v1.98c-16.15.0-30.27 6.04-42.34 18.11-12.07 12.07-18.11 26.18-18.11 42.34z"/></svg></div></div></div><div id=latest-features class=pad-sm><h4 class="pad-t-xs pad-sm border-bottom mrg-b-sm">Latest features at Customer.io</h4><div data-date="2024-01-29 00:00:00 +0000 UTC" class="latest-feature-item pad-l-sm pad-r-sm pad-t-xs pad-b-sm mrg-b-sm"><a href=/docs/release-notes/#2024-01-29-new-campaign-ux class=release-note-link><div class=fly-flex style=align-items:baseline><h5>New and improved setup for campaign triggers</h5><span style=white-space:nowrap>2024-01-29</span></div><p class=release-note-content>We revamped our campaign creation experience so that it is easier for you to find and refine the triggers you need. Go to <strong>Campaigns</strong> in the left hand …</p></a></div><div data-date="2024-01-29 00:00:00 +0000 UTC" class="latest-feature-item pad-l-sm pad-r-sm pad-t-xs pad-b-sm mrg-b-sm"><a href=/docs/release-notes/#2024-01-29-object-campaigns class=release-note-link><div class=fly-flex style=align-items:baseline><h5>Trigger campaigns by objects and relationships</h5><span style=white-space:nowrap>2024-01-29</span></div><p class=release-note-content>Your toolbox in Customer.io just expanded! You can now trigger campaigns based on an update to an object, an update to a relationship, or the addition …</p></a></div><div data-date="2024-01-26 00:00:00 +0000 UTC" class="latest-feature-item pad-l-sm pad-r-sm pad-t-xs pad-b-sm mrg-b-sm"><a href=/docs/release-notes/#2024-01-26-import-objects class=release-note-link><div class=fly-flex style=align-items:baseline><h5>Import objects via CSV</h5><span style=white-space:nowrap>2024-01-26</span></div><p class=release-note-content>You can now import a CSV of objects or relationships through our UI or API. This is helpful if the data is not available through an integration or you …</p></a></div></div></a></li><li class="fly-nav-strip__item header-link pad-r-md fly-flex hidden-mdl-up" id=api-link><input type=checkbox id=api-menu-check class=header-menu__toggle>
<label for=api-menu-check class="mobile-menu-label fly-flex pad-l-none"><svg class="header-icon hidden-mdl-down"><use href="#editor-code"/></svg><span class="header-menu-text fly-flex__item--left">APIs</span></label><ul class="header-submenu pad-l-md pad-r-md" style=max-width:unset id=api-menu><li><a href=/docs/api/track/>Journeys Track API</a></li><li><a href=/docs/api/app/>Journeys App API</a></li><li><a href=/docs/api/cdp/>Data Pipelines API</a></li><li><a href=/docs/api/webhooks>Reporting Webhooks</a></li></ul></li><li class="fly-nav-strip__item header-link pad-r-md fly-flex hidden-mdl-up" id=sdk-link><input type=checkbox id=sdk-menu-check class=header-menu__toggle>
<label for=sdk-menu-check class="mobile-menu-label fly-flex pad-l-none"><svg class="header-icon hidden-mdl-down"><use href="#mobile"/></svg><span class="header-menu-text fly-flex__item--left">SDKs</span></label><ul class="header-submenu pad-r-sm pad-l-sm" style=max-width:unset id=sdk-menu><li class=fly-flex><a href=/docs/sdk/web style=width:100%><svg class="header-icon hidden-sm-down"><use href="#javascript-light"/></svg>Web</a></li><li class=fly-flex><a href=/docs/sdk/ios style=width:100%><svg class="header-icon hidden-sm-down"><use href="#apple-logo"/></svg>iOS</a></li><li class=fly-flex><a href=/docs/sdk/android style=width:100%><svg class="header-icon hidden-sm-down"><use href="#android-logo"/></svg>Android</a></li><li class=fly-flex><a href=/docs/sdk/react-native style=width:100%><svg class="header-icon header-icon-rn hidden-sm-down"><use href="#react-native-white"/></svg>React Native</a></li><li class=fly-flex><a href=/docs/sdk/expo style=width:100%><svg class="header-icon header-icon-expo hidden-sm-down"><use href="#expo-light"/></svg>Expo Plugin</a></li><li class=fly-flex><a href=/docs/sdk/flutter style=width:100%><svg class="header-icon hidden-sm-down"><use href="#flutter-logo-light"/></svg>Flutter</a></li></ul></li></ul><ul class="header-menu header-menu-right fly-nav-strip fly-flex fly-flex__item--right hidden-mdl-down hide-mobile" style=margin-bottom:14px><li class="fly-nav-strip__item header-link pad-r-md fly-flex" id=api-link><a class="hover-label fly-flex hidden-sm-down" href=/docs/api/ data-href=/docs/api><svg class="header-icon hidden-sm-down"><use href="#editor-code"/></svg><span class=header-menu-text>APIs</span></a><ul class="header-submenu pad-l-md pad-r-md" style="max-width:unset;right:calc(50% + 4px);width:220px" id=api-menu><li><a href=/docs/api/cdp/><svg class="header-icon hidden-sm-down mrg-l-none"><use href="#connection"/></svg>Data Pipelines API</a></li><li class=no-highlight><svg class="header-icon hidden-sm-down mrg-l-none"><use href="#journeys-logo"/></svg><span>Journeys</span><ul class="header-sub-submenu pad-l-sm mrg-b-sm"><li class="pad-l-md mrg-b-none" style="border-left:1px #4b4b60 solid"><a href=/docs/api/track/ style=white-space:nowrap>Track API</a></li><li class="pad-l-md mrg-t-none mrg-b-none" style="border-left:1px #4b4b60 solid"><a href=/docs/api/app/>App API</a></li><li class="pad-l-md mrg-t-none" style="border-left:1px #4b4b60 solid;overflow:hidden"><a href=/docs/api/webhooks style=white-space:nowrap>Reporting Webhooks</a></li></ul></li></ul></li><li class="fly-nav-strip__item header-link pad-r-md fly-flex" style=margin-bottom:0 id=sdk-link><a class="hover-label hidden-sm-down fly-flex" href=/docs/sdk data-href=/docs/sdk><svg class="header-icon hidden-sm-down"><use href="#mobile"/></svg><span class=header-menu-text>SDKs</span></a><ul class="header-submenu pad-r-sm pad-l-sm" style=max-width:unset id=sdk-menu><li class=fly-flex><a href=/docs/sdk/web style=width:100%><svg class="header-icon hidden-sm-down"><use href="#javascript-light"/></svg>Web</a></li><li class=fly-flex><a href=/docs/sdk/ios style=width:100%><svg class="header-icon hidden-sm-down"><use href="#apple-logo"/></svg>iOS</a></li><li class=fly-flex><a href=/docs/sdk/android style=width:100%><svg class="header-icon hidden-sm-down"><use href="#android-logo"/></svg>Android</a></li><li class=fly-flex><a href=/docs/sdk/react-native style=width:100%><svg class="header-icon header-icon-rn hidden-sm-down"><use href="#react-native-white"/></svg>React Native</a></li><li class=fly-flex><a href=/docs/sdk/expo style=width:100%><svg class="header-icon header-icon-expo hidden-sm-down"><use href="#expo-light"/></svg>Expo Plugin</a></li><li class=fly-flex><a href=/docs/sdk/flutter style=width:100%><svg class="header-icon hidden-sm-down"><use href="#flutter-logo-light"/></svg>Flutter</a></li></ul></li></ul></div><div id=searchhits class="bordered border-dark border-top-none" style=display:none><div id=facets class=hidden-md-down></div><div id=hits></div></div><main class="flex flex-even"><div id=mobile-homepage-container class="hidden-md-up mrg-auto mrg-t-lg mrg-b-xl mrg-r-md mrg-l-md"><h1>Data Pipelines</h1><p>These APIs send source events—identify, track, group, etc—into Customer.io, where you can route them to downstream destinations. The Data Pipelines API even supports Journeys.</p><ul class="fly-list-group list-unstyled"><li class="border-bottom grid-container"><a id=mobile-cdp-api class=text-no-underline href=/docs/api/cdp/><div class="grid-row pad-b-md" style=display:flex;align-items:center><span class=grid-sm-3><h4 class="mrg-t-none mrg-b-none display-inline">Source API</h4></span><span class=grid-sm-3><p class="text--medium mrg-t-none pad-r-md display-inline"><svg class="icon"><use href="#person"/></svg>&nbsp; Identify people</p></span><span class=grid-sm-3><p class="text--medium mrg-t-none pad-r-md display-inline"><svg class="icon"><use href="#event"/></svg>&nbsp; Send Events</p>uff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var t=h.prototype.getState.call(this);return t.buff=f(t.buff),t},h.ArrayBuffer.prototype.setState=function(t){return t.buff=l(t.buff,!0),h.prototype.setState.call(this,t)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(t,e){var n=a(u(new Uint8Array(t)));return e?d(n):n},h}()},94:function(t,e,n){"use strict";n.d(e,{G:function(){return i},s:function(){return o}});var r=n(204);function i(){return!(0,r.j)()||window.navigator.onLine}function o(){return!i()}},8404:function(t,e,n){"use strict";n.d(e,{_:function(){return u}});var r=n(5163),i=n(1494),o=n(6218),u=function(t){function e(e,n){return t.call(this,e,n,new o.j)||this}return(0,r.ZT)(e,t),e.system=function(){return new this({type:"track",event:"system"})},e}(i._)},204:function(t,e,n){"use strict";function r(){return"undefined"!=typeof window}function i(){return!r()}n.d(e,{j:function(){return r},s:function(){return i}})},6863:function(t,e,n){"use strict";function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}n.d(e,{a:function(){return r}})},6218:function(t,e,n){"use strict";n.d(e,{j:function(){return s}});var r,i=n(5163),o=n(417),u=n(449),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.initRemoteMetrics=function(t){r=new u.B(t)},e.prototype.increment=function(e,n,i){t.prototype.increment.call(this,e,n,i),null==r||r.increment(e,null!=i?i:[])},e}(o.s)},449:function(t,e,n){"use strict";n.d(e,{B:function(){return a}});var r=n(5163),i=n(7867),o=n(4278),u=n(5024);function s(t){console.error("Error sending performance metrics",t)}var a=function(){function t(t){var e,n,r,i,o=this;if(this.host=null!==(e=null==t?void 0:t.host)&&void 0!==e?e:"cdp.customer.io/v1",this.sampleRate=null!==(n=null==t?void 0:t.sampleRate)&&void 0!==n?n:1,this.flushTimer=null!==(r=null==t?void 0:t.flushTimer)&&void 0!==r?r:3e4,this.maxQueueSize=null!==(i=null==t?void 0:t.maxQueueSize)&&void 0!==i?i:20,this.queue=[],this.sampleRate>0){var u=!1,a=function(){u||(u=!0,o.flush().catch(s),u=!1,setTimeout(a,o.flushTimer))};a()}}return t.prototype.increment=function(t,e){if(t.includes("analytics_js.")&&0!==e.length&&!(Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize)){var n=function(t,e,n){var i=e.reduce((function(t,e){var n=e.split(":"),r=n[0],i=n[1];return t[r]=i,t}),{});return{type:"Counter",metric:t,value:1,tags:(0,r.pi)((0,r.pi)({},i),{library:"analytics.js",library_version:"web"===n?"next-".concat(o.i):"npm:next-".concat(o.i)})}}(t,e,(0,u.Bz)());this.queue.push(n),t.includes("error")&&this.flush().catch(s)}},t.prototype.flush=function(){return(0,r.mG)(this,void 0,Promise,(function(){var t=this;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch((function(e){s(e),t.sampleRate=0}))];case 1:return e.sent(),[2]}}))}))},t.prototype.send=function(){return(0,r.mG)(this,void 0,Promise,(function(){var t,e,n;return(0,r.Jh)(this,(function(r){return t={series:this.queue},this.queue=[],e={"Content-Type":"text/plain"},n="https://".concat(this.host,"/m"),[2,(0,i.h)(n,{headers:e,body:JSON.stringify(t),method:"POST"})]}))}))},t}()},8166:function(t,e,n){"use strict";n.d(e,{Nt:function(){return d},sV:function(){return h},n5:function(){return v},ZA:function(){return m}});var r=n(5163),i=n(2228),o=n(836),u=n(1268),s=n(8232),a={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},c=function(){function t(){this.cache={}}return t.prototype.get=function(t){return this.cache[t]},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},Object.defineProperty(t.prototype,"type",{get:function(){return"memory"},enumerable:!1,configurable:!0}),t}(),l=function(t){function e(n){void 0===n&&(n=e.defaults);var i=t.call(this)||this;return i.options=(0,r.pi)((0,r.pi)({},e.defaults),n),i}return(0,r.ZT)(e,t),e.available=function(){var t=window.navigator.cookieEnabled;return t||(o.Z.set("ajs:cookies","test"),t=document.cookie.includes("ajs:cookies"),o.Z.remove("ajs:cookies")),t},Object.defineProperty(e,"defaults",{get:function(){return{maxage:365,domain:(0,u.P)(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),e.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},e.prototype.get=function(t){try{var e=o.Z.get(t);if(!e)return null;try{return JSON.parse(e)}catch(t){return e}}catch(t){return null}},e.prototype.set=function(t,e){"string"==typeof e?o.Z.set(t,e,this.opts()):null===e?o.Z.remove(t,this.opts()):o.Z.set(t,JSON.stringify(e),this.opts())},e.prototype.remove=function(t){return o.Z.remove(t,this.opts())},Object.defineProperty(e.prototype,"type",{get:function(){return"cookie"},enumerable:!1,configurable:!0}),e}(c),f=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.available=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}},e.prototype.get=function(t){try{var e=localStorage.getItem(t);if(null===e)return null;try{return JSON.parse(e)}catch(t){return e}}catch(e){return f(t,"unavailable"),null}},e.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){f(t,"full")}},e.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){f(t,"unavailable")}},Object.defineProperty(e.prototype,"type",{get:function(){return"localStorage"},enumerable:!1,configurable:!0}),e}(c),d=function(){function t(t,e){this.storageOptions=e,this.enabledStores=t}return t.prototype.getStores=function(t){var e=this,n=[];return this.enabledStores.filter((function(e){return!t||(null==t?void 0:t.includes(e))})).forEach((function(t){var r=e.storageOptions[t];void 0!==r&&n.push(r)})),n},t.prototype.getAndSync=function(t,e){var n=this.get(t,e),r="number"==typeof n?n.toString():n;return this.set(t,r,e),r},t.prototype.get=function(t,e){for(var n=null,r=0,i=this.getStores(e);r<i.length;r++){if(n=i[r].get(t))return n}return null},t.prototype.set=function(t,e,n){for(var r=0,i=this.getStores(n);r<i.length;r++){i[r].set(t,e)}},t.prototype.clear=function(t,e){for(var n=0,r=this.getStores(e);n<r.length;n++){r[n].remove(t)}},t}();function h(t){return{cookie:l.available()?new l(t):void 0,localStorage:p.available()?new p:void 0,memory:new c}}var v=function(){function t(t,e){void 0===t&&(t=a);var n,r,o,u,c=this;this.options={},this.id=function(t){if(c.options.disable)return null;var e=c.identityStore.getAndSync(c.idKey);void 0!==t&&(c.identityStore.set(c.idKey,t),t!==e&&null!==e&&null!==t&&c.anonymousId(null));var n=c.identityStore.getAndSync(c.idKey);if(n)return n;var r=c.legacyUserStore.get(a.cookie.oldKey);return r?"object"==typeof r?r.id:r:null},this.anonymousId=function(t){var e,n;if(c.options.disable)return null;if(void 0===t){var r=null!==(e=c.identityStore.getAndSync(c.anonKey))&&void 0!==e?e:null===(n=c.legacySIO())||void 0===n?void 0:n[0];if(r)return r}return null===t?(c.identityStore.set(c.anonKey,null),c.identityStore.getAndSync(c.anonKey)):(c.identityStore.set(c.anonKey,null!=t?t:(0,i.v4)()),c.identityStore.getAndSync(c.anonKey))},this.traits=function(t){var e;if(!c.options.disable)return null===t&&(t={}),t&&c.traitsStore.set(c.traitsKey,null!=t?t:{}),null!==(e=c.traitsStore.get(c.traitsKey))&&void 0!==e?e:{}},this.options=t,this.cookieOptions=e,this.idKey=null!==(r=null===(n=t.cookie)||void 0===n?void 0:n.key)&&void 0!==r?r:a.cookie.key,this.traitsKey=null!==(u=null===(o=t.localStorage)||void 0===o?void 0:o.key)&&void 0!==u?u:a.localStorage.key,this.anonKey="ajs_anonymous_id";var l=!0===t.disable,f=!1!==t.persist,p=l?[]:f?["localStorage","cookie","memory"]:["memory"],v=h(e);t.localStorageFallbackDisabled&&(p=p.filter((function(t){return"localStorage"!==t}))),this.identityStore=new d(p,v),this.legacyUserStore=new d(p.filter((function(t){return"localStorage"!==t&&"memory"!==t})),v),this.traitsStore=new d(p.filter((function(t){return"cookie"!==t})),v);var y=this.legacyUserStore.get(a.cookie.oldKey);y&&"object"==typeof y&&(y.id&&this.id(y.id),y.traits&&this.traits(y.traits)),(0,s.Z)(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!=e?e:{};var n=this.id();null!==n&&n!==t||(e=(0,r.pi)((0,r.pi)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.defaults=a,t}(),y={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},m=function(t){function e(e,n){void 0===e&&(e=y);var r=t.call(this,e,n)||this;return r.anonymousId=function(t){},(0,s.Z)(r),r}return(0,r.ZT)(e,t),e}(v)},1268:function(t,e,n){"use strict";n.d(e,{P:function(){return i}});var r=n(836);function i(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0)return r;if(e.length<=1)return r;for(var i=e.length-2;i>=0;--i)r.push(e.slice(i).join("."));return r}(e),i=0;i<n.length;++i){var o="__tld__",u=n[i],s={domain:"."+u};try{if(r.Z.set(o,"1",s),r.Z.get(o))return r.Z.remove(o,s),u}catch(t){return}}}},4278:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="0.0.1"},8232:function(t,e,n){"use strict";function r(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var i=r[n];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);o&&"function"==typeof o.value&&(t[i]=t[i].bind(t))}}return t}n.d(e,{Z:function(){return r}})},584:function(t,e,n){"use strict";n.d(e,{M:function(){return r}});try{window.analyticsWriteKey="__WRITE_KEY__"}catch(t){}function r(){if(void 0!==window.analyticsWriteKey)return window.analyticsWriteKey!==["__","WRITE","_","KEY","__"].join("")?window.analyticsWriteKey:void 0}},7867:function(t,e,n){"use strict";function r(t,e){return e=e||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],u=[],s={},a=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}};for(var c in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),s[e]=s[e]?s[e]+","+n:n})),n(a())},i.onerror=r,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)}))}n.d(e,{h:function(){return o}});var i=n(3744),o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(0,i.R)();return(n&&n.fetch||r).apply(void 0,t)}},3744:function(t,e,n){"use strict";n.d(e,{R:function(){return r}});var r=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:null}},7070:function(t,e,n){"use strict";function r(t){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find((function(e){return e.src===t}))}function i(t,e){var n=r(t);if(void 0!==n){var i=null==n?void 0:n.getAttribute("status");if("loaded"===i)return Promise.resolve(n);if("loading"===i)return new Promise((function(t,e){n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(t){return e(t)}))}))}return new Promise((function(n,r){var i,o=window.document.createElement("script");o.type="text/javascript",o.src=t,o.async=!0,o.setAttribute("status","loading");for(var u=0,s=Object.entries(null!=e?e:{});u<s.length;u++){var a=s[u],c=a[0],l=a[1];o.setAttribute(c,l)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),n(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),r(new Error("Failed to load ".concat(t)))};var f=window.document.getElementsByTagName("script")[0];null===(i=f.parentElement)||void 0===i||i.insertBefore(o,f)}))}function o(t){var e=r(t);return void 0!==e&&e.remove(),Promise.resolve()}n.d(e,{v:function(){return i},t:function(){return o}})},5944:function(t,e,n){"use strict";n.d(e,{o:function(){return i}});var r=n(5163);function i(t,e){var n,i=Object.entries(null!==(n=e.integrations)&&void 0!==n?n:{}).reduce((function(t,e){var n,i,o=e[0],u=e[1];return"object"==typeof u?(0,r.pi)((0,r.pi)({},t),((n={})[o]=u,n)):(0,r.pi)((0,r.pi)({},t),((i={})[o]={},i))}),{});return Object.entries(t.integrations).reduce((function(t,e){var n,o=e[0],u=e[1];return(0,r.pi)((0,r.pi)({},t),((n={})[o]=(0,r.pi)((0,r.pi)({},u),i[o]),n))}),{})}},8044:function(t,e,n){"use strict";n.d(e,{x:function(){return i}});var r=n(5163),i=function(t,e){return(0,r.mG)(void 0,void 0,Promise,(function(){var n;return(0,r.Jh)(this,(function(i){return n=function(i){return(0,r.mG)(void 0,void 0,Promise,(function(){var o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return t(i)?(o=n,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[r.sent()])];case 2:return[2]}}))}))},[2,n(void 0)]}))}))}},7566:function(t,e,n){"use strict";n.d(e,{UH:function(){return u},Vl:function(){return s},Kg:function(){return a},YM:function(){return c}});var r,i=n(584),o=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,u=function(t){window.analytics&&(window.analytics._cdn=t),r=t},s=function(){var t,e=null!=r?r:null===(t=window.analytics)||void 0===t?void 0:t._cdn;if(e)return e;var n,i=(Array.prototype.slice.call(document.querySelectorAll("script")).forEach((function(t){var e,r=null!==(e=t.getAttribute("src"))&&void 0!==e?e:"",i=o.exec(r);i&&i[1]&&(n=i[1])})),n);return i||"https://cdp.customer.io"},a=function(){var t=s();return"".concat(t,"/v1/analytics-js/actions")};function c(){for(var t,e,n=null!==(t=(0,i.M)())&&void 0!==t?t:window.analytics._writeKey,r=void 0,u=0,s=Array.prototype.slice.call(document.querySelectorAll("script"));u<s.length;u++){var a=null!==(e=s[u].getAttribute("src"))&&void 0!==e?e:"",c=o.exec(a);if(c&&c[1]){r=a;break}}return r?r.replace("analytics.min.js","analytics.classic.js"):"https://cdp.customer.io/analytics.js/v1/".concat(n,"/analytics.classic.js")}},3061:function(t,e,n){"use strict";n.d(e,{$:function(){return p}});var r=n(5163),i=n(3098),o=n(8404),u=n(204),s={getItem:function(){},setItem:function(){},removeItem:function(){}};try{s=(0,u.j)()&&window.localStorage?window.localStorage:s}catch(t){console.warn("Unable to access localStorage",t)}function a(t){var e=s.getItem(t);return(e?JSON.parse(e):[]).map((function(t){return new o._(t.event,t.id)}))}function c(t){var e=s.getItem(t);return e?JSON.parse(e):{}}function l(t){s.removeItem(t)}function f(t,e,n){void 0===n&&(n=0);var r="persisted-queue:v1:".concat(t,":lock"),i=s.getItem(r),o=i?JSON.parse(i):null,u=null===o||function(t){return(new Date).getTime()>t}(o);if(u)return s.setItem(r,JSON.stringify((new Date).getTime()+50)),e(),void s.removeItem(r);!u&&n<3?setTimeout((function(){f(t,e,n+1)}),50):console.error("Unable to retrieve lock")}var p=function(t){function e(e,n){var i=t.call(this,e,[])||this,o="persisted-queue:v1:".concat(n,":items"),u="persisted-queue:v1:".concat(n,":seen"),p=[],d={};return f(n,(function(){try{p=a(o),d=c(u),l(o),l(u),i.queue=(0,r.ev)((0,r.ev)([],p,!0),i.queue,!0),i.seen=(0,r.pi)((0,r.pi)({},d),i.seen)}catch(t){console.error(t)}})),window.addEventListener("pagehide",(function(){if(i.todo>0){var t=(0,r.ev)((0,r.ev)([],i.queue,!0),i.future,!0);try{f(n,(function(){!function(t,e){var n=a(t),i=(0,r.ev)((0,r.ev)([],e,!0),n,!0).reduce((function(t,e){var n;return(0,r.pi)((0,r.pi)({},t),((n={})[e.id]=e,n))}),{});s.setItem(t,JSON.stringify(Object.values(i)))}(o,t),function(t,e){var n=c(t);s.setItem(t,JSON.stringify((0,r.pi)((0,r.pi)({},n),e)))}(u,i.seen)}))}catch(t){console.error(t)}}})),i}return(0,r.ZT)(e,t),e}(i.Z)},9950:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});var r=n(4122);function i(t,e){var n=new r.Facade(t,e);return"track"===t.type&&(n=new r.Track(t,e)),"identify"===t.type&&(n=new r.Identify(t,e)),"page"===t.type&&(n=new r.Page(t,e)),"alias"===t.type&&(n=new r.Alias(t,e)),"group"===t.type&&(n=new r.Group(t,e)),"screen"===t.type&&(n=new r.Screen(t,e)),Object.defineProperty(n,"obj",{value:t,writable:!0}),n}},5024:function(t,e,n){"use strict";n.d(e,{XP:function(){return f},Bz:function(){return p},Fv:function(){return h}});var r,i=n(5163),o=n(836),u=n(6863),s=n(1268),a=n(4278),c=n(8166);var l="npm";function f(t){l=t}function p(){return l}function d(t,e,n){var o=new c.Nt(n?[]:["cookie"],(0,c.sV)(function(){if(r)return r;var t=(0,s.P)(window.location.href);return r={expires:31536e6,secure:!1,path:"/"},t&&(r.domain=t),r}())),u=o.get("s:context.referrer"),a=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=(t=t.replace(/\?/g,"&")).split("&");n<r.length;n++){var i=r[n].split("="),o=i[0],u=i[1];if(e[o])return{id:u,type:e[o]}}}(t);(a=null!=a?a:u)&&(e&&(e.referrer=(0,i.pi)((0,i.pi)({},e.referrer),a)),o.set("s:context.referrer",a))}function h(t,e,n,r){var s,c,l,f,h=t.user(),v=window.location.search;e.context=null!==(c=null!==(s=e.context)&&void 0!==s?s:e.options)&&void 0!==c?c:{};var y=e.context;delete e.options,e.writeKey=null==n?void 0:n.apiKey,y.userAgent=window.navigator.userAgent;var m=navigator.userLanguage||navigator.language;if(void 0===y.locale&&void 0!==m&&(y.locale=m),!y.library){var g=p();y.library="web"===g?{name:"analytics.js",version:"next-".concat(a.i)}:{name:"analytics.js",version:"npm:next-".concat(a.i)}}v&&!y.campaign&&(y.campaign=function(t){return t.startsWith("?")&&(t=t.substring(1)),(t=t.replace(/\?/g,"&")).split("&").reduce((function(t,e){var n=e.split("="),r=n[0],i=n[1],o=void 0===i?"":i;if(r.includes("utm_")&&r.length>4){var s=r.substr(4);"campaign"===s&&(s="name"),t[s]=(0,u.a)(o)}return t}),{})}(v)),d(v,y,null!==(l=t.options.disableClientPersistence)&&void 0!==l&&l),e.userId=e.userId||h.id(),e.anonymousId=e.anonymousId||h.anonymousId(),e.sentAt=new Date;var b=t.queue.failedInitializations||[];b.length>0&&(e._metadata={failedInitializations:b});var w=[],_=[];for(var x in r){var P=r[x];"Customer.io Data Pipelines"===x&&w.push(x),"bundled"===P.bundlingStatus&&w.push(x),"unbundled"===P.bundlingStatus&&_.push(x)}for(var j=0,I=(null==n?void 0:n.unbundledIntegrations)||[];j<I.length;j++){var S=I[j];_.includes(S)||_.push(S)}var k=null!==(f=null==n?void 0:n.maybeBundledConfigIds)&&void 0!==f?f:{},A=[];w.sort().forEach((function(t){var e;(null!==(e=k[t])&&void 0!==e?e:[]).forEach((function(t){A.push(t)}))})),!1!==(null==n?void 0:n.addBundledMetadata)&&(e._metadata=(0,i.pi)((0,i.pi)({},e._metadata),{bundled:w.sort(),unbundled:_.sort(),bundledIds:A}));var O=function(){var t=o.Z.get("_ga");if(t&&t.startsWith("amp"))return t}();return O&&(y.amp={id:O}),e}},6338:function(t,e,n){"use strict";n.r(e),n.d(e,{applyDestinationMiddleware:function(){return u},sourceMiddlewarePlugin:function(){return s}});var r=n(5163),i=n(1494),o=n(9950);function u(t,e,n){return(0,r.mG)(this,void 0,Promise,(function(){function i(e,n){return(0,r.mG)(this,void 0,Promise,(function(){var i,u,s;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return i=!1,u=null,[4,n({payload:(0,o.D)(e,{clone:!0,traverse:!1}),integration:t,next:function(t){i=!0,null===t&&(u=null),t&&(u=t.obj)}})];case 1:return a.sent(),i||null===u||(u.integrations=(0,r.pi)((0,r.pi)({},e.integrations),((s={})[t]=!1,s))),[2,u]}}))}))}var u,s,a,c,l;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:u=(0,o.D)(e,{clone:!0,traverse:!1}).rawEvent(),s=0,a=n,t.label=1;case 1:return s<a.length?(c=a[s],[4,i(u,c)]):[3,4];case 2:if(null===(l=t.sent()))return[2,null];u=l,t.label=3;case 3:return s++,[3,1];case 4:return[2,u]}}))}))}function s(t,e){function n(n){return(0,r.mG)(this,void 0,Promise,(function(){var u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return u=!1,[4,t({payload:(0,o.D)(n.event,{clone:!0,traverse:!1}),integrations:null!=e?e:{},next:function(t){u=!0,t&&(n.event=t.obj)}})];case 1:if(r.sent(),!u)throw new i.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}}))}))}return{name:"Source Middleware ".concat(t.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(t){return Promise.resolve(t)},track:n,page:n,identify:n,alias:n,group:n}}},5163:function(t,e,n){"use strict";n.d(e,{ZT:function(){return i},pi:function(){return o},_T:function(){return u},mG:function(){return s},Jh:function(){return a},ev:function(){return c}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function u(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){u.label=s[1];break}if(6===s[0]&&u.label<i[1]){u.label=i[1],i=s;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(s);break}i[2]&&u.ops.pop(),u.trys.pop();continue}s=e.call(t,u)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}Object.create;function c(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},888:function(t,e,n){"use strict";function r(t,e){return new Promise((function(n,r){var i=setTimeout((function(){r(Error("Promise timed out"))}),e);t.then((function(t){return clearTimeout(i),n(t)})).catch(r)}))}function i(t,e,n){var i;return(i=n,new Promise((function(t){return setTimeout(t,i)}))).then((function(){return r(function(){try{return Promise.resolve(e(t))}catch(t){return Promise.reject(t)}}(),1e3)})).catch((function(e){null==t||t.log("warn","Callback Error",{error:e}),null==t||t.stats.increment("callback_error")})).then((function(){return t}))}n.d(e,{FJ:function(){return r},UI:function(){return i}})},1494:function(t,e,n){"use strict";n.d(e,{Y:function(){return a},_:function(){return c}});var r=n(2228),i=n(8168),o=n(5163),u=function(){function t(){this._logs=[]}return t.prototype.log=function(t,e,n){var r=new Date;this._logs.push({level:t,message:e,time:r,extras:n})},Object.defineProperty(t.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),t.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce((function(t,e){var n,r,i,u=(0,o.pi)((0,o.pi)({},e),{json:JSON.stringify(e.extras,null," "),extras:e.extras});delete u.time;var s=null!==(i=null===(r=e.time)||void 0===r?void 0:r.toISOString())&&void 0!==i?i:"";return t[s]&&(s="".concat(s,"-").concat(Math.random())),(0,o.pi)((0,o.pi)({},t),((n={})[s]=u,n))}),{});console.table?console.table(t):console.log(t)}else this.logs.forEach((function(t){var e=t.level,n=t.message,r=t.extras;"info"===e||"debug"===e?console.log(n,null!=r?r:""):console[e](n,null!=r?r:"")}));this._logs=[]},t}(),s=n(417),a=function(t){var e,n,r;this.retry=null===(e=t.retry)||void 0===e||e,this.type=null!==(n=t.type)&&void 0!==n?n:"plugin Error",this.reason=null!==(r=t.reason)&&void 0!==r?r:""},c=function(){function t(t,e,n,i){void 0===e&&(e=(0,r.v4)()),void 0===n&&(n=new s.i),void 0===i&&(i=new u),this.attempts=0,this.event=t,this._id=e,this.logger=i,this.stats=n}return t.system=function(){},t.prototype.isSame=function(t){return t.id===this.id},t.prototype.cancel=function(t){if(t)throw t;throw new a({reason:"Context Cancel"})},t.prototype.log=function(t,e,n){this.logger.log(t,e,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.updateEvent=function(t,e){var n;if("integrations"===t.split(".")[0]){var r=t.split(".")[1];if(!1===(null===(n=this.event.integrations)||void 0===n?void 0:n[r]))return this.event}return(0,i.N)(this.event,t,e),this.event},t.prototype.failedDelivery=function(){return this._failedDelivery},t.prototype.setFailedDelivery=function(t){this._failedDelivery=t},t.prototype.logs=function(){return this.logger.logs},t.prototype.flush=function(){this.logger.flush(),this.stats.flush()},t.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},t}()},7127:function(t,e,n){"use strict";n.d(e,{Q:function(){return r}});var r=function(){function t(){this.callbacks={}}return t.prototype.on=function(t,e){return this.callbacks[t]?this.callbacks[t].push(e):this.callbacks[t]=[e],this},t.prototype.once=function(t,e){var n=this,r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.off(t,r),e.apply(n,i)};return this.on(t,r),this},t.prototype.off=function(t,e){var n,r=(null!==(n=this.callbacks[t])&&void 0!==n?n:[]).filter((function(t){return t!==e}));return this.callbacks[t]=r,this},t.prototype.emit=function(t){for(var e,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(e=this.callbacks[t])&&void 0!==e?e:[];return o.forEach((function(t){t.apply(n,r)})),this},t}()},3098:function(t,e,n){"use strict";n.d(e,{M:function(){return o},Z:function(){return u}});var r=n(5163),i=n(7127);var o="onRemoveFromFuture",u=function(t){function e(e,n,r){var i=t.call(this)||this;return i.future=[],i.maxAttempts=e,i.queue=n,i.seen=null!=r?r:{},i}return(0,r.ZT)(e,t),e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e){return!(t.updateAttempts(e)>t.maxAttempts||t.includes(e))&&(t.queue.push(e),!0)}));return this.queue=this.queue.sort((function(e,n){return t.getAttempts(e)-t.getAttempts(n)})),r},e.prototype.pushWithBackoff=function(t){var e=this;if(0===this.getAttempts(t))return this.push(t)[0];var n=this.updateAttempts(t);if(n>this.maxAttempts||this.includes(t))return!1;var r=function(t){var e=Math.random()+1,n=t.minTimeout,r=void 0===n?500:n,i=t.factor,o=void 0===i?2:i,u=t.attempt,s=t.maxTimeout,a=void 0===s?1/0:s;return Math.min(e*r*Math.pow(o,u),a)}({attempt:n-1});return setTimeout((function(){e.queue.push(t),e.future=e.future.filter((function(e){return e.id!==t.id})),e.emit(o)}),r),this.future.push(t),!0},e.prototype.getAttempts=function(t){var e;return null!==(e=this.seen[t.id])&&void 0!==e?e:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||Boolean(this.queue.find((function(e){return e.id===t.id})))||Boolean(this.future.find((function(e){return e.id===t.id})))},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(i.Q)},6096:function(t,e,n){"use strict";n.d(e,{a:function(){return o},z:function(){return u}});var r=n(5163),i=n(1494);function o(t,e){t.log("debug","plugin",{plugin:e.name});var n=(new Date).getTime(),o=e[t.event.type];return void 0===o?Promise.resolve(t):function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}}))}))}((function(){return o.apply(e,[t])})).then((function(t){var r=(new Date).getTime()-n;return t.stats.gauge("plugin_time",r,["plugin:".concat(e.name)]),t})).catch((function(n){if(n instanceof i.Y&&"middleware_cancellation"===n.type)throw n;return n instanceof i.Y?(t.log("warn",n.type,{plugin:e.name,error:n}),n):(t.log("error","plugin Error",{plugin:e.name,error:n}),t.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),n)}))}function u(t,e){return o(t,e).then((function(e){if(e instanceof i._)return e;t.log("debug","Context canceled"),t.stats.increment("context_canceled"),t.cancel(e)}))}},417:function(t,e,n){"use strict";n.d(e,{s:function(){return i},i:function(){return o}});var r=n(5163),i=function(){function t(){this.metrics=[]}return t.prototype.increment=function(t,e,n){void 0===e&&(e=1),this.metrics.push({metric:t,value:e,tags:null!=n?n:[],type:"counter",timestamp:Date.now()})},t.prototype.gauge=function(t,e,n){this.metrics.push({metric:t,value:e,tags:null!=n?n:[],type:"gauge",timestamp:Date.now()})},t.prototype.flush=function(){var t=this.metrics.map((function(t){return(0,r.pi)((0,r.pi)({},t),{tags:t.tags.join(",")})}));console.table?console.table(t):console.log(t),this.metrics=[]},t.prototype.serialize=function(){return this.metrics.map((function(t){return{m:t.metric,v:t.value,t:t.tags,k:(e=t.type,{gauge:"g",counter:"c"}[e]),e:t.timestamp};var e}))},t}(),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.gauge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.increment=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.flush=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.serialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return[]},e}(i)}},o={};function u(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={exports:{}};return i[t].call(n.exports,n,n.exports,u),n.exports}u.m=i,u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,{a:e}),e},e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},u.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);u.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var s=2&r&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){o[t]=function(){return n[t]}}));return o.default=function(){return n},u.d(i,o),i},u.d=function(t,e){for(var n in e)u.o(e,n)&&!u.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},u.f={},u.e=function(t){return Promise.all(Object.keys(u.f).reduce((function(e,n){return u.f[n](t,e),e}),[]))},u.u=function(t){return({96:"queryString",119:"auto-track",150:"legacyVideos",214:"remoteMiddleware",288:"inAppPlugin",464:"ajs-destination",493:"schemaFilter",604:"tsub-middleware"}[t]||t)+".js"},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n={},r="@customerio/cdp-analytics-browser:",u.l=function(t,e,i,o){if(n[t])n[t].push(e);else{var s,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==r+i){s=f;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.setAttribute("data-webpack",r+i),s.src=t),n[t]=[e];var p=function(e,r){s.onerror=s.onload=null,clearTimeout(d);var i=n[t];if(delete n[t],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(r)})),e)return e(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),a&&document.head.appendChild(s)}},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.p="",function(){var t={610:0};u.f.j=function(e,n){var r=u.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=t[e]=[n,i]}));n.push(r[2]=i);var o=u.p+u.u(e),s=new Error;u.l(o,(function(n){if(u.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+e,e)}};var e=function(e,n){var r,i,o=n[0],s=n[1],a=n[2],c=0;for(r in s)u.o(s,r)&&(u.m[r]=s[r]);if(a)a(u);for(e&&e(n);c<o.length;c++)i=o[c],u.o(t,i)&&t[i]&&t[i][0](),t[o[c]]=0},n=self.webpackChunk_customerio_cdp_analytics_browser=self.webpackChunk_customerio_cdp_analytics_browser||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var s={};!function(){"use strict";u.r(s);var t=u(5163),e=u(7566),n=u(5024);function r(){return"undefined"!=typeof process&&process.env?process.env:{}}var i=u(7867);function o(t){return"string"==typeof t}function a(t){return"number"==typeof t}function c(t){return"function"==typeof t}function l(t){return"object"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var f=function(e){function n(t,n){var r=e.call(this,n)||this;return r.field=t,r}return(0,t.ZT)(n,e),n}(Error);function p(t){var e,n=t&&t.event&&t.event.type,r=t.event;if(void 0===r)throw new f("event","Event is missing");if(!o(n))throw new f("event","Event is not a string");if("track"===n&&!o(r.event))throw new f("event","Event is not a string");var i=null!==(e=r.properties)&&void 0!==e?e:r.traits;if("alias"!==n&&!l(i))throw new f("properties","properties is not an object");if(!function(t){var e,n,r;return o(null!==(r=null!==(n=null!==(e=t.userId)&&void 0!==e?e:t.anonymousId)&&void 0!==n?n:t.groupId)&&void 0!==r?r:t.previousId)}(r))throw new f("userId","Missing userId or anonymousId");return t}var d={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:p,identify:p,page:p,alias:p,group:p,screen:p};function h(t,e,n,r){var i,u=[t,e,n,r],s=l(t)?t.event:t;if(!s||!o(s))throw new Error("Event missing");var a=l(t)?null!==(i=t.properties)&&void 0!==i?i:{}:l(e)?e:{},f={};return c(n)||(f=null!=n?n:{}),l(t)&&!c(e)&&(f=null!=e?e:{}),[s,a,f,u.find(c)]}function v(t,e,n,r,i){var u,s,a=null,f=null,p=[t,e,n,r,i],d=p.filter(o);void 0!==d[0]&&void 0!==d[1]&&(a=d[0],f=d[1]),1===d.length&&(a=null,f=d[0]);var h=p.find(c),v=p.filter((function(t){return null===f?l(t):l(t)||null===t})),y=null!==(u=v[0])&&void 0!==u?u:{},m=null!==(s=v[1])&&void 0!==s?s:{};return[a,f,y,m,h]}var y=function(t){return function(){for(var e,n,r,i,u,s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];var p=null;p=null!==(r=null!==(e=s.find(o))&&void 0!==e?e:null===(n=s.find(a))||void 0===n?void 0:n.toString())&&void 0!==r?r:t.id();var d=s.filter((function(t){return null===p?l(t):l(t)||null===t})),h=null!==(i=d[0])&&void 0!==i?i:{},v=null!==(u=d[1])&&void 0!==u?u:{},y=s.find(c);return[p,h,v,y]}};function m(t,e,n,r){a(t)&&(t=t.toString()),a(e)&&(e=e.toString());var i=[t,e,n,r],u=i.filter(o),s=u[0],f=void 0===s?t:s,p=u[1],d=void 0===p?null:p,h=i.filter(l)[0];return[f,d,void 0===h?{}:h,i.find(c)]}var g=u(94),b=u(8404),w=u(888);function _(e,n,r,i){return(0,t.mG)(this,void 0,void 0,(function(){var o,u;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return r.emit("dispatch_start",e),o=Date.now(),n.isEmpty()?[4,n.dispatchSingle(e)]:[3,2];case 1:return u=t.sent(),[3,4];case 2:return[4,n.dispatch(e)];case 3:u=t.sent(),t.label=4;case 4:return(null==i?void 0:i.callback)?[4,(0,w.UI)(u,i.callback,(s=o,a=i.timeout,c=Date.now()-s,Math.max((null!=a?a:300)-c,0)))]:[3,6];case 5:u=t.sent(),t.label=6;case 6:return(null==i?void 0:i.debug)&&u.flush(),[2,u]}var s,a,c}))}))}var x=u(7127),P=u(2228),j=u(8168),I=u(4791),S=u.n(I),k=function(){function e(t){this.user=t}return e.prototype.track=function(e,n,r,i){return this.normalize((0,t.pi)((0,t.pi)({},this.baseEvent()),{event:e,type:"track",properties:n,options:(0,t.pi)({},r),integrations:(0,t.pi)({},i)}))},e.prototype.page=function(e,n,r,i,o){var u,s={type:"page",properties:(0,t.pi)({},r),options:(0,t.pi)({},i),integrations:(0,t.pi)({},o)};return null!==e&&(s.category=e,s.properties=null!==(u=s.properties)&&void 0!==u?u:{},s.properties.category=e),null!==n&&(s.name=n),this.normalize((0,t.pi)((0,t.pi)({},this.baseEvent()),s))},e.prototype.screen=function(e,n,r,i,o){var u={type:"screen",properties:(0,t.pi)({},r),options:(0,t.pi)({},i),integrations:(0,t.pi)({},o)};return null!==e&&(u.category=e),null!==n&&(u.name=n),this.normalize((0,t.pi)((0,t.pi)({},this.baseEvent()),u))},e.prototype.identify=function(e,n,r,i){return this.normalize((0,t.pi)((0,t.pi)({},this.baseEvent()),{type:"identify",userId:e,traits:n,options:(0,t.pi)({},r),integrations:(0,t.pi)({},i)}))},e.prototype.group=function(e,n,r,i){return this.normalize((0,t.pi)((0,t.pi)({},this.baseEvent()),{type:"group",traits:n,options:(0,t.pi)({},r),integrations:(0,t.pi)({},i),groupId:e}))},e.prototype.alias=function(e,n,r,i){var o={userId:e,type:"alias",options:(0,t.pi)({},r),integrations:(0,t.pi)({},i)};return null!==n&&(o.previousId=n),void 0===e?this.normalize((0,t.pi)((0,t.pi)({},o),this.baseEvent())):this.normalize((0,t.pi)((0,t.pi)({},this.baseEvent()),o))},e.prototype.baseEvent=function(){var t={integrations:{},options:{}},e=this.user;return e.id()&&(t.userId=e.id()),e.anonymousId()&&(t.anonymousId=e.anonymousId()),t},e.prototype.context=function(t){var e,n,r,i=["integrations","anonymousId","timestamp","userId"],o=null!==(e=t.options)&&void 0!==e?e:{};delete o.integrations;var u=Object.keys(o),s=null!==(r=null===(n=t.options)||void 0===n?void 0:n.context)&&void 0!==r?r:{},a={};return u.forEach((function(t){"context"!==t&&(i.includes(t)?(0,j.N)(a,t,o[t]):(0,j.N)(s,t,o[t]))})),[s,a]},e.prototype.normalize=function(e){var n,r,i;(null===(n=e.options)||void 0===n?void 0:n.anonymousId)&&this.user.anonymousId(e.options.anonymousId);var o=Object.keys(null!==(r=e.integrations)&&void 0!==r?r:{}).reduce((function(n,r){var i,o;return(0,t.pi)((0,t.pi)({},n),((i={})[r]=Boolean(null===(o=e.integrations)||void 0===o?void 0:o[r]),i))}),{}),u=(0,t.pi)((0,t.pi)({},o),null===(i=e.options)||void 0===i?void 0:i.integrations),s=this.context(e),a=s[0],c=s[1],l=(e.options,(0,t._T)(e,["options"])),f=(0,t.pi)((0,t.pi)((0,t.pi)({timestamp:new Date},l),{context:a,integrations:u}),c),p="ajs-next-"+S().hash(JSON.stringify(f)+(0,P.v4)());return(0,t.pi)((0,t.pi)({},f),{messageId:p})},e}(),A=u(3061);var O=u(3098),M=u(1494),E=u(6096);function F(){return"undefined"!=typeof window}function C(){return!(!F()||window.navigator.onLine)}var D=function(e){function n(t){var n,r,i,o=e.call(this)||this;return o.criticalTasks=(i=0,{done:function(){return n},run:function(t){var e,o=t();return"object"==typeof(e=o)&&null!==e&&"then"in e&&"function"==typeof e.then&&(1==++i&&(n=new Promise((function(t){return r=t}))),o.finally((function(){return 0==--i&&r()}))),o}}),o.plugins=[],o.failedInitializations=[],o.flushing=!1,o.queue=t,o.queue.on(O.M,(function(){o.scheduleFlush(0)})),o}return(0,t.ZT)(n,e),n.prototype.register=function(e,n,r){return(0,t.mG)(this,void 0,void 0,(function(){var i=this;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve(n.load(e,r)).then((function(){i.plugins.push(n)})).catch((function(t){if("destination"===n.type)return i.failedInitializations.push(n.name),console.warn(n.name,t),void e.log("warn","Failed to load destination",{plugin:n.name,error:t});throw t}))];case 1:return t.sent(),[2]}}))}))},n.prototype.deregister=function(e,n,r){return(0,t.mG)(this,void 0,void 0,(function(){var i;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(e,r))]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.plugins=this.plugins.filter((function(t){return t.name!==n.name})),[3,4];case 3:return i=t.sent(),e.log("warn","Failed to unload destination",{plugin:n.name,error:i}),[3,4];case 4:return[2]}}))}))},n.prototype.dispatch=function(e){return(0,t.mG)(this,void 0,void 0,(function(){var n;return(0,t.Jh)(this,(function(t){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.push(e),n=this.subscribeToDelivery(e),this.scheduleFlush(0),[2,n]}))}))},n.prototype.subscribeToDelivery=function(e){return(0,t.mG)(this,void 0,void 0,(function(){var n=this;return(0,t.Jh)(this,(function(t){return[2,new Promise((function(t){var r=function(i,o){i.isSame(e)&&(n.off("flush",r),t(i))};n.on("flush",r)}))]}))}))},n.prototype.dispatchSingle=function(e){return(0,t.mG)(this,void 0,void 0,(function(){var n=this;return(0,t.Jh)(this,(function(t){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.updateAttempts(e),e.attempts=1,[2,this.deliver(e).catch((function(t){return n.enqueuRetry(t,e)?n.subscribeToDelivery(e):(e.setFailedDelivery({reason:t}),e)}))]}))}))},n.prototype.isEmpty=function(){return 0===this.queue.length},n.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout((function(){e.flush().then((function(){setTimeout((function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)}),0)}))}),t))},n.prototype.deliver=function(e){return(0,t.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.criticalTasks.done()];case 1:t.sent(),n=Date.now(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.flushOne(e)];case 3:return e=t.sent(),r=Date.now()-n,this.emit("delivery_success",e),e.stats.gauge("delivered",r),e.log("debug","Delivered",e.event),[2,e];case 4:throw i=t.sent(),o=i,e.log("error","Failed to deliver",o),this.emit("delivery_failure",e,o),e.stats.increment("delivery_failed"),i;case 5:return[2]}}))}))},n.prototype.enqueuRetry=function(t,e){return!(t instanceof M.Y&&!t.retry)&&this.queue.pushWithBackoff(e)},n.prototype.flush=function(){return(0,t.mG)(this,void 0,void 0,(function(){var e,n;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:if(0===this.queue.length||C())return[2,[]];if(!(e=this.queue.pop()))return[2,[]];e.attempts=this.queue.getAttempts(e),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.deliver(e)];case 2:return e=t.sent(),this.emit("flush",e,!0),[3,4];case 3:return n=t.sent(),this.enqueuRetry(n,e)||(e.setFailedDelivery({reason:n}),this.emit("flush",e,!1)),[2,[]];case 4:return[2,[e]]}}))}))},n.prototype.isReady=function(){return!0},n.prototype.availableExtensions=function(e){var n,r,i=this.plugins.filter((function(t){var n,r,i;if("destination"!==t.type&&"Customer.io Data Pipelines"!==t.name)return!0;var o=void 0;return null===(n=t.alternativeNames)||void 0===n||n.forEach((function(t){void 0!==e[t]&&(o=e[t])})),null!==(i=null!==(r=e[t.name])&&void 0!==r?r:o)&&void 0!==i?i:!1!==("Customer.io Data Pipelines"===t.name||e.All)})),o=(n="type",r={},i.forEach((function(e){var i,o=void 0;if("string"==typeof n){var u=e[n];o="string"!=typeof u?JSON.stringify(u):u}else n instanceof Function&&(o=n(e));void 0!==o&&(r[o]=(0,t.ev)((0,t.ev)([],null!==(i=r[o])&&void 0!==i?i:[],!0),[e],!1))})),r),u=o.before,s=void 0===u?[]:u,a=o.enrichment,c=void 0===a?[]:a,l=o.destination,f=void 0===l?[]:l,p=o.after;return{before:s,enrichment:c,destinations:f,after:void 0===p?[]:p}},n.prototype.flushOne=function(e){var n,r;return(0,t.mG)(this,void 0,void 0,(function(){var i,o,u,s,a,c,l,f,p,d,h,v,y,m;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:if(!this.isReady())throw new Error("Not ready");e.attempts>1&&this.emit("delivery_retry",e),i=this.availableExtensions(null!==(n=e.event.integrations)&&void 0!==n?n:{}),o=i.before,u=i.enrichment,s=0,a=o,t.label=1;case 1:return s<a.length?(c=a[s],[4,(0,E.z)(e,c)]):[3,4];case 2:(d=t.sent())instanceof M._&&(e=d),this.emit("message_enriched",e,c),t.label=3;case 3:return s++,[3,1];case 4:l=0,f=u,t.label=5;case 5:return l<f.length?(p=f[l],[4,(0,E.a)(e,p)]):[3,8];case 6:(d=t.sent())instanceof M._&&(e=d),this.emit("message_enriched",e,p),t.label=7;case 7:return l++,[3,5];case 8:return h=this.availableExtensions(null!==(r=e.event.integrations)&&void 0!==r?r:{}),v=h.destinations,y=h.after,[4,new Promise((function(t,n){setTimeout((function(){var r=v.map((function(t){return(0,E.a)(e,t)}));Promise.all(r).then(t).catch(n)}),0)}))];case 9:return t.sent(),e.stats.increment("message_delivered"),this.emit("message_delivered",e),m=y.map((function(t){return(0,E.a)(e,t)})),[4,Promise.all(m)];case 10:return t.sent(),[2,e]}}))}))},n}(x.Q),T=function(e){function n(t){return e.call(this,null!=t?t:new A.$(4,"event-queue"))||this}return(0,t.ZT)(n,e),n}(D),J=u(8166),q=u(8232),G=u(4278),N=u(3744),L="This is being deprecated and will be not be available in future releases of Analytics JS",B=(0,N.R)(),R=null==B?void 0:B.analytics;function U(){console.warn(L)}var z=function(e){function n(n,r,i,o,u){var s,a,c,l=this;(l=e.call(this)||this)._debug=!1,l.initialized=!1,l.user=function(){return l._user},l.init=l.initialize.bind(l),l.log=U,l.addIntegrationMiddleware=U,l.listeners=U,l.addEventListener=U,l.removeAllListeners=U,l.removeListener=U,l.removeEventListener=U,l.hasListeners=U,l.add=U,l.addIntegration=U;var f=null==r?void 0:r.cookie,p=null!==(s=null==r?void 0:r.disableClientPersistence)&&void 0!==s&&s;return l.settings=n,l.settings.timeout=null!==(a=l.settings.timeout)&&void 0!==a?a:300,l.queue=null!=i?i:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=t?4:1,r=e?new O.Z(n,[]):new A.$(n,"event-queue");return new T(r)}(null==r?void 0:r.retryQueue,p),l._universalStorage=new J.Nt(p?["memory"]:["localStorage","cookie","memory"],(0,J.sV)(f)),l._user=null!=o?o:new J.n5(p?(0,t.pi)((0,t.pi)({},null==r?void 0:r.user),{persist:!1}):null==r?void 0:r.user,f).load(),l._group=null!=u?u:new J.ZA(p?(0,t.pi)((0,t.pi)({},null==r?void 0:r.group),{persist:!1}):null==r?void 0:r.group,f).load(),l.eventFactory=new k(l._user),l.integrations=null!==(c=null==r?void 0:r.integrations)&&void 0!==c?c:{},l.options=null!=r?r:{},(0,q.Z)(l),l}return(0,t.ZT)(n,e),Object.defineProperty(n.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),n.prototype.track=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i,o,u,s,a=this;return(0,t.Jh)(this,(function(t){return n=h.apply(void 0,e),r=n[0],i=n[1],o=n[2],u=n[3],s=this.eventFactory.track(r,i,o,this.integrations),[2,this._dispatch(s,u).then((function(t){return a.emit("track",r,t.event.properties,t.event.options),t}))]}))}))},n.prototype.page=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i,o,u,s,a,c=this;return(0,t.Jh)(this,(function(t){return n=v.apply(void 0,e),r=n[0],i=n[1],o=n[2],u=n[3],s=n[4],a=this.eventFactory.page(r,i,o,u,this.integrations),[2,this._dispatch(a,s).then((function(t){return c.emit("page",r,i,t.event.properties,t.event.options),t}))]}))}))},n.prototype.identify=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i,o,u,s,a=this;return(0,t.Jh)(this,(function(t){return n=y(this._user).apply(void 0,e),r=n[0],i=n[1],o=n[2],u=n[3],this._user.identify(r,i),s=this.eventFactory.identify(this._user.id(),this._user.traits(),o,this.integrations),[2,this._dispatch(s,u).then((function(t){return a.emit("identify",t.event.userId,t.event.traits,t.event.options),t}))]}))}))},n.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)return this._group;var r=y(this._group).apply(void 0,e),i=r[0],o=r[1],u=r[2],s=r[3];this._group.identify(i,o);var a=this._group.id(),c=this._group.traits(),l=this.eventFactory.group(a,c,u,this.integrations);return this._dispatch(l,s).then((function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e}))},n.prototype.alias=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i,o,u,s,a=this;return(0,t.Jh)(this,(function(t){return n=m.apply(void 0,e),r=n[0],i=n[1],o=n[2],u=n[3],s=this.eventFactory.alias(r,i,o,this.integrations),[2,this._dispatch(s,u).then((function(t){return a.emit("alias",r,i,t.event.options),t}))]}))}))},n.prototype.screen=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i,o,u,s,a,c=this;return(0,t.Jh)(this,(function(t){return n=v.apply(void 0,e),r=n[0],i=n[1],o=n[2],u=n[3],s=n[4],a=this.eventFactory.screen(r,i,o,u,this.integrations),[2,this._dispatch(a,s).then((function(t){return c.emit("screen",r,i,t.event.properties,t.event.options),t}))]}))}))},n.prototype.trackClick=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r;return(0,t.Jh)(this,(function(i){switch(i.label){case 0:return[4,u.e(119).then(u.bind(u,1956))];case 1:return n=i.sent(),[2,(r=n.link).call.apply(r,(0,t.ev)([this],e,!1))]}}))}))},n.prototype.trackLink=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r;return(0,t.Jh)(this,(function(i){switch(i.label){case 0:return[4,u.e(119).then(u.bind(u,1956))];case 1:return n=i.sent(),[2,(r=n.link).call.apply(r,(0,t.ev)([this],e,!1))]}}))}))},n.prototype.trackSubmit=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r;return(0,t.Jh)(this,(function(i){switch(i.label){case 0:return[4,u.e(119).then(u.bind(u,1956))];case 1:return n=i.sent(),[2,(r=n.form).call.apply(r,(0,t.ev)([this],e,!1))]}}))}))},n.prototype.trackForm=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r;return(0,t.Jh)(this,(function(i){switch(i.label){case 0:return[4,u.e(119).then(u.bind(u,1956))];case 1:return n=i.sent(),[2,(r=n.form).call.apply(r,(0,t.ev)([this],e,!1))]}}))}))},n.prototype.register=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i=this;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return n=b._.system(),r=e.map((function(t){return i.queue.register(n,t,i)})),[4,Promise.all(r)];case 1:return t.sent(),[2,n]}}))}))},n.prototype.deregister=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,t.mG)(this,void 0,Promise,(function(){var n,r,i=this;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return n=b._.system(),r=e.map((function(t){var e=i.queue.plugins.find((function(e){return e.name===t}));if(e)return i.queue.deregister(n,e,i);n.log("warn","plugin ".concat(t," not found"))})),[4,Promise.all(r)];case 1:return t.sent(),[2,n]}}))}))},n.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},n.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},n.prototype.timeout=function(t){this.settings.timeout=t},n.prototype._dispatch=function(e,n){return(0,t.mG)(this,void 0,Promise,(function(){var r;return(0,t.Jh)(this,(function(t){return r=new b._(e),(0,g.s)()&&!this.options.retryQueue?[2,r]:[2,_(r,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]}))}))},n.prototype.addSourceMiddleware=function(e){return(0,t.mG)(this,void 0,Promise,(function(){var n=this;return(0,t.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.queue.criticalTasks.run((function(){return(0,t.mG)(n,void 0,void 0,(function(){var n,r,i;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve().then(u.bind(u,6338))];case 1:return n=t.sent().sourceMiddlewarePlugin,r={},this.queue.plugins.forEach((function(t){if("destination"===t.type)return r[t.name]=!0})),i=n(e,r),[4,this.register(i)];case 2:return t.sent(),[2]}}))}))}))];case 1:return r.sent(),[2,this]}}))}))},n.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.queue.plugins.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return r.forEach((function(t){t.addMiddleware.apply(t,e)})),Promise.resolve(this)},n.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},n.prototype.queryString=function(e){return(0,t.mG)(this,void 0,Promise,(function(){return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return!1===this.options.useQueryString?[2,[]]:[4,u.e(96).then(u.bind(u,7473))];case 1:return[2,(0,t.sent().queryString)(this,e)]}}))}))},n.prototype.use=function(t){return t(this),this},n.prototype.ready=function(e){return void 0===e&&(e=function(t){return t}),(0,t.mG)(this,void 0,Promise,(function(){return(0,t.Jh)(this,(function(t){return[2,Promise.all(this.queue.plugins.map((function(t){return t.ready?t.ready():Promise.resolve()}))).then((function(t){return e(t),t}))]}))}))},n.prototype.noConflict=function(){return console.warn(L),window.analytics=null!=R?R:this,this},n.prototype.normalize=function(t){return console.warn(L),this.eventFactory.normalize(t)},Object.defineProperty(n.prototype,"failedInitializations",{get:function(){return console.warn(L),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"VERSION",{get:function(){return G.i},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){return(0,t.mG)(this,void 0,Promise,(function(){return(0,t.Jh)(this,(function(t){return console.warn(L),[2,Promise.resolve(this)]}))}))},n.prototype.pageview=function(e){return(0,t.mG)(this,void 0,Promise,(function(){return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return console.warn(L),[4,this.page({path:e})];case 1:return t.sent(),[2,this]}}))}))},Object.defineProperty(n.prototype,"plugins",{get:function(){var t;return console.warn(L),null!==(t=this._plugins)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Integrations",{get:function(){return console.warn(L),this.queue.plugins.filter((function(t){return"destination"===t.type})).reduce((function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),r=window[n];if(!r)return t;var i=r.Integration;return i?(t[e.name]=i,t):(t[e.name]=r,t)}),{})},enumerable:!1,configurable:!0}),n.prototype.push=function(t){var e=t.shift();e&&!this[e]||this[e].apply(this,t)},n}(x.Q),Z=u(5944);function K(){var t=document.getElementsByTagName("link"),e="";return Array.prototype.slice.call(t).forEach((function(t){"canonical"===t.getAttribute("rel")&&(e=t.getAttribute("href"))})),e}function V(){var t=K();if(!t)return window.location.pathname;var e=document.createElement("a");return e.href=t,e.pathname.startsWith("/")?e.pathname:"/"+e.pathname}function W(t){void 0===t&&(t="");var e=K();if(e)return e.includes("?")?e:"".concat(e).concat(t);var n=window.location.href,r=n.indexOf("#");return-1===r?n:n.slice(0,r)}function Y(){return{path:V(),referrer:document.referrer,search:location.search,title:document.title,url:W(location.search)}}function Q(t){var e,n=t.event;n.context=n.context||{};var r=Y(),i=null!==(e=n.properties)&&void 0!==e?e:{};return Object.keys(r).forEach((function(t){i[t]&&(r[t]=i[t])})),n.context.page&&(r=Object.assign({},r,n.context.page)),n.context=Object.assign({},n.context,{page:r}),t.event=n,t}var $={name:"Page Enrichment",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:function(t){return t.event.properties=Object.assign({},Y(),t.event.properties),t.event.name&&(t.event.properties.name=t.event.name),Q(t)},alias:Q,track:Q,identify:Q,group:Q},H=u(7070),X=u(6338),tt=function(){function e(t,e){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return e.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},e.prototype.transform=function(e){return(0,t.mG)(this,void 0,Promise,(function(){var n;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,X.applyDestinationMiddleware)(this.name,e.event,this.middleware)];case 1:return null===(n=t.sent())&&e.cancel(new M.Y({retry:!1,reason:"dropped by destination middleware"})),[2,new b._(n)]}}))}))},e.prototype._createMethod=function(e){var n=this;return function(r){return(0,t.mG)(n,void 0,Promise,(function(){var n;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return this.action[e]?(n=r,"destination"!==this.type?[3,2]:[4,this.transform(r)]):[2,r];case 1:n=t.sent(),t.label=2;case 2:return[4,this.action[e](n)];case 3:return t.sent(),[2,r]}}))}))}},e.prototype.isLoaded=function(){return this.action.isLoaded()},e.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},e.prototype.load=function(t,e){return this.action.load(t,e)},e.prototype.unload=function(t,e){var n,r;return null===(r=(n=this.action).unload)||void 0===r?void 0:r.call(n,t,e)},e}();function et(n,r,i,o,u){var s,a,c;return(0,t.mG)(this,void 0,Promise,(function(){var l,f,p,d,h=this;return(0,t.Jh)(this,(function(v){switch(v.label){case 0:return l=[],f=(0,e.Vl)(),p=null!==(a=null===(s=n.middlewareSettings)||void 0===s?void 0:s.routingRules)&&void 0!==a?a:[],d=(null!==(c=n.remotePlugins)&&void 0!==c?c:[]).map((function(e){return(0,t.mG)(h,void 0,void 0,(function(){var n,s,a,c,d,h,v,y,m;return(0,t.Jh)(this,(function(g){switch(g.label){case 0:if(function(t,e){var n=t[e.creationName],r=t[e.name];return!1===t.All&&!n&&!r||!1===n||!1===r}(r,e))return[2];g.label=1;case 1:if(g.trys.push([1,12,,13]),n=new RegExp("https://cdp.customer.io"),!o)return[3,7];s=e.url.split("/"),a=s[s.length-2],c=e.url.replace(a,btoa(a).replace(/=/g,"")),g.label=2;case 2:return g.trys.push([2,4,,6]),[4,(0,H.v)(c.replace(n,f))];case 3:return g.sent(),[3,6];case 4:return g.sent(),[4,(0,H.v)(e.url.replace(n,f))];case 5:return g.sent(),[3,6];case 6:return[3,9];case 7:return[4,(0,H.v)(e.url.replace(n,f))];case 8:g.sent(),g.label=9;case 9:return d=e.libraryName,"function"!=typeof window[d]?[3,11]:[4,(0,window[d])((0,t.pi)((0,t.pi)({},e.settings),i[e.name]))];case 10:h=g.sent(),function(t){if(!Array.isArray(t))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach((function(t){e.forEach((function(e){var n;if(void 0===t[e])throw new Error("Plugin: ".concat(null!==(n=t.name)&&void 0!==n?n:"unknown"," missing required function ").concat(e))}))}))}(v=Array.isArray(h)?h:[h]),y=p.filter((function(t){return t.destinationName===e.creationName})),v.forEach((function(t){var n=new tt(e.creationName,t);y.length&&u&&"destination"===t.type&&n.addMiddleware(u),l.push(n)})),g.label=11;case 11:return[3,13];case 12:return m=g.sent(),console.warn("Failed to load Remote Plugin",m),[3,13];case 13:return[2]}}))}))})),[4,Promise.all(d)];case 1:return v.sent(),[2,l.filter(Boolean)]}}))}))}var nt=u(9950);function rt(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}function it(e,n){var r,o,u,s,a,c=[],l=!1,f=null!==(r=null==n?void 0:n.size)&&void 0!==r?r:10,p=null!==(o=null==n?void 0:n.timeout)&&void 0!==o?o:5e3;function d(t){var n;if(0!==t.length){var r=null===(n=t[0])||void 0===n?void 0:n.writeKey;return(0,i.h)("".concat(e,"/b"),{keepalive:l,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({batch:t,writeKey:r})})}}function h(){return(0,t.mG)(this,void 0,Promise,(function(){var e;return(0,t.Jh)(this,(function(t){return c.length?(e=c,c=[],[2,d(e)]):[2]}))}))}return s=function(){if(l=!0,c.length){var t=function(t){var e=[],n=0;return t.forEach((function(t){rt(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]})),e}(c).map(d);Promise.all(t).catch(console.error)}},a=!1,window.addEventListener("pagehide",(function(){a||(a=!0,s())})),document.addEventListener("visibilitychange",(function(){if("hidden"==document.visibilityState){if(a)return;a=!0,s()}else a=!1})),{dispatch:function(e,n){return(0,t.mG)(this,void 0,Promise,(function(){var e;return(0,t.Jh)(this,(function(t){return c.push(n),e=c.length>=f||function(t){return rt(t)>=450}(c),[2,e||l?h():void(u||(u=setTimeout((function(){u=void 0,h().catch(console.error)}),p)))]}))}))}}}var ot=u(8044);function ut(e,n){return(0,t.mG)(this,void 0,Promise,(function(){var r,i=this;return(0,t.Jh)(this,(function(o){switch(o.label){case 0:return r=[],(0,g.s)()?[2,n]:[4,(0,ot.x)((function(){return n.length>0&&!(0,g.s)()}),(function(){return(0,t.mG)(i,void 0,void 0,(function(){var i,o;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return(i=n.pop())?[4,(0,E.a)(i,e)]:[2];case 1:return o=t.sent(),o instanceof b._||r.push(i),[2]}}))}))}))];case 1:return o.sent(),r.map((function(t){return n.pushWithBackoff(t)})),[2,n]}}))}))}function st(e,n,r,i){var o=this;e||setTimeout((function(){return(0,t.mG)(o,void 0,void 0,(function(){var e,o;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return e=!0,[4,ut(r,n)];case 1:return o=t.sent(),e=!1,n.todo>0&&i(e,o,r,i),[2]}}))}))}),5e3*Math.random())}function at(e,r,o){var u,s;window.addEventListener("pagehide",(function(){c.push.apply(c,Array.from(l)),l.clear()}));var a,c=e.options.disableClientPersistence?new O.Z(e.queue.queue.maxAttempts,[]):new A.$(e.queue.queue.maxAttempts,"dest-Customer.io-Data-Pipelines"),l=new Set,f=!1,p=null!==(u=null==r?void 0:r.apiHost)&&void 0!==u?u:"cdp.customer.io/v1",d=null!==(s=null==r?void 0:r.protocol)&&void 0!==s?s:"https",h="".concat(d,"://").concat(p),v=null==r?void 0:r.deliveryStrategy,y="batching"===(null==v?void 0:v.strategy)?it(h,v.config):(a=null==v?void 0:v.config,{dispatch:function(t,e){return(0,i.h)(t,{keepalive:null==a?void 0:a.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(e)})}});function m(i){return(0,t.mG)(this,void 0,Promise,(function(){var u,s;return(0,t.Jh)(this,(function(t){return(0,g.s)()?(c.push(i),st(f,c,b,st),[2,i]):(l.add(i),u=i.event.type.charAt(0),s=(0,nt.D)(i.event).json(),"track"===i.event.type&&delete s.traits,"alias"===i.event.type&&(s=function(t,e){var n,r,i,o,u=t.user();return e.previousId=null!==(i=null!==(r=null!==(n=e.previousId)&&void 0!==n?n:e.from)&&void 0!==r?r:u.id())&&void 0!==i?i:u.anonymousId(),e.userId=null!==(o=e.userId)&&void 0!==o?o:e.to,delete e.from,delete e.to,e}(e,s)),[2,y.dispatch("".concat(h,"/").concat(u),(0,n.Fv)(e,s,r,o)).then((function(){return i})).catch((function(){return c.pushWithBackoff(i),st(f,c,b,st),i})).finally((function(){l.delete(i)}))])}))}))}var b={name:"Customer.io Data Pipelines",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:m,identify:m,page:m,alias:m,group:m,screen:m};return c.todo&&st(f,c,b,st),b}var ct=function(t,e,n){n.getCalls(t).forEach((function(t){ht(e,t).catch(console.error)}))},lt=function(e,n){return(0,t.mG)(void 0,void 0,void 0,(function(){var r,i,o;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:r=0,i=n.getCalls("addSourceMiddleware"),t.label=1;case 1:return r<i.length?(o=i[r],[4,ht(e,o).catch(console.error)]):[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},ft=ct.bind(void 0,"on"),pt=ct.bind(void 0,"setAnonymousId"),dt=function(){function t(){this._value={}}return t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this._value))},t.prototype.getCalls=function(t){var e;return null!==(e=this._value[t])&&void 0!==e?e:[]},t.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){t._value[e.method]?t._value[e.method].push(e):t._value[e.method]=[e]})),this},t.prototype.clear=function(){return this._value={},this},t}();function ht(e,n){return(0,t.mG)(this,void 0,Promise,(function(){var r,i;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),n.called?[2,void 0]:(n.called=!0,r=e[n.method].apply(e,n.args),"object"==typeof(o=r)&&null!==o&&"then"in o&&"function"==typeof o.then?[4,r]:[3,2]);case 1:t.sent(),t.label=2;case 2:return n.resolve(r),[3,4];case 3:return i=t.sent(),n.reject(i),[3,4];case 4:return[2]}var o}))}))}var vt=function(){function t(t){var e=this;this._preInitBuffer=new dt,this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=G.i,this._promise=t(this._preInitBuffer),this._promise.then((function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r})).catch((function(){}))}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e.instance){var o=(n=e.instance)[t].apply(n,r);return Promise.resolve(o)}return new Promise((function(n,i){e._preInitBuffer.push({method:t,args:r,resolve:n,reject:i,called:!1})}))}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?((n=e.instance)[t].apply(n,r),e):(e._preInitBuffer.push({method:t,args:r,resolve:function(){},reject:console.error,called:!1}),e)}},t}();function yt(t){var e=t[0],n=t.slice(1);return{method:e,resolve:function(){},reject:console.error,args:n,called:!1}}var mt,gt,bt=function(){var t=window.analytics;if(!Array.isArray(t))return[];var e=t.splice(0,t.length);return e.map(yt)},wt=null!==(mt=(gt=(0,N.R)()).__INSPECTOR__)&&void 0!==mt?mt:gt.__INSPECTOR__={},_t=u(6218);function xt(e,n){return(0,t.mG)(this,void 0,Promise,(function(){return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return n.push.apply(n,bt()),[4,lt(e,n)];case 1:return t.sent(),n.push.apply(n,bt()),function(t,e){e.toArray().forEach((function(e){setTimeout((function(){ht(t,e).catch(console.error)}),0)}))}(e,n),n.clear(),[2]}}))}))}function Pt(e,n,i,o,s,a){var c,l,f,p;return(0,t.mG)(this,void 0,Promise,(function(){var h,v,y,m,g,b,w,_,x,P,j,I,S=this;return(0,t.Jh)(this,(function(k){switch(k.label){case 0:return function(t){var e,n,i;return"test"!==r().NODE_ENV&&(null!==(i=null===(n=null===(e=t.middlewareSettings)||void 0===e?void 0:e.routingRules)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>0}(e)?[4,Promise.all([u.e(870),u.e(604)]).then(u.bind(u,669)).then((function(t){return t.tsubMiddleware(e.middlewareSettings.routingRules)}))]:[3,2];case 1:return v=k.sent(),[3,3];case 2:v=void 0,k.label=3;case 3:return h=v,A=e,"test"!==r().NODE_ENV&&Object.keys(A.integrations).length>1||a.length>0?[4,u.e(464).then(u.bind(u,3162)).then((function(t){return t.ajsDestinations(e,n.integrations,i,h,a)}))]:[3,5];case 4:return m=k.sent(),[3,6];case 5:m=[],k.label=6;case 6:return y=m,e.legacyVideoPluginsEnabled?[4,u.e(150).then(u.bind(u,9141)).then((function(t){return t.loadLegacyVideoPlugins(n)}))]:[3,8];case 7:k.sent(),k.label=8;case 8:return(null===(c=i.plan)||void 0===c?void 0:c.track)?[4,u.e(493).then(u.bind(u,5081)).then((function(t){var n;return t.schemaFilter(null===(n=i.plan)||void 0===n?void 0:n.track,e)}))]:[3,10];case 9:return b=k.sent(),[3,11];case 10:b=void 0,k.label=11;case 11:return g=b,w=(0,Z.o)(e,o),[4,et(e,n.integrations,w,o.obfuscate,h).catch((function(){return[]}))];case 12:return _=k.sent(),(null===(l=o.integrations)||void 0===l?void 0:l["Customer.io In-App Plugin"])?[4,Promise.all([u.e(646),u.e(288)]).then(u.bind(u,398)).then((function(t){var e;return t.InAppPlugin(null===(e=o.integrations)||void 0===e?void 0:e["Customer.io In-App Plugin"])}))]:[3,14];case 13:return P=k.sent(),[3,15];case 14:P=void 0,k.label=15;case 15:return x=P,j=(0,t.ev)((0,t.ev)((0,t.ev)([d,$],s,!0),y,!0),_,!0),g&&j.push(g),x&&j.push(x),!1===(null===(f=i.integrations)||void 0===f?void 0:f.All)&&!i.integrations["Customer.io Data Pipelines"]||i.integrations&&!1===i.integrations["Customer.io Data Pipelines"]||j.push(at(n,w["Customer.io Data Pipelines"],e.integrations)),[4,n.register.apply(n,j)];case 16:return I=k.sent(),Object.entries(null!==(p=e.enabledMiddleware)&&void 0!==p?p:{}).some((function(t){return t[1]}))?[4,u.e(214).then(u.bind(u,9568)).then((function(r){var i=r.remoteMiddlewares;return(0,t.mG)(S,void 0,void 0,(function(){var r,u;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return[4,i(I,e,o.obfuscate)];case 1:return r=t.sent(),u=r.map((function(t){return n.addSourceMiddleware(t)})),[2,Promise.all(u)]}}))}))}))]:[3,18];case 17:k.sent(),k.label=18;case 18:return[2,I]}var A}))}))}function jt(n,r,o){var u,s,a,c,l,f,p;return void 0===r&&(r={}),(0,t.mG)(this,void 0,Promise,(function(){var d,h,v,y,m,g,b,w,_,x,P;return(0,t.Jh)(this,(function(j){switch(j.label){case 0:return n.cdnURL&&(0,e.UH)(n.cdnURL),null===(u=n.cdnSettings)||void 0===u?[3,1]:(h=u,[3,3]);case 1:return[4,(I=n.writeKey,S=n.cdnURL,k=null!=S?S:(0,e.Vl)(),(0,i.h)("".concat(k,"/v1/projects/").concat(I,"/settings")).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error(t)}))})).catch((function(t){throw console.error(t.message),t})))];case 2:h=j.sent(),j.label=3;case 3:return v=null===(a=null===(s=(d=h).integrations["Customer.io Data Pipelines"])||void 0===s?void 0:s.retryQueue)||void 0===a||a,y=(0,t.pi)({retryQueue:v},r),function(t){var e;null===(e=wt.attach)||void 0===e||e.call(wt,t)}(m=new z(n,y)),g=null!==(c=n.plugins)&&void 0!==c?c:[],b=null!==(l=n.classicIntegrations)&&void 0!==l?l:[],_t.j.initRemoteMetrics(d.metrics),function(t,e){e.push.apply(e,bt()),pt(t,e),ft(t,e)}(m,o),[4,Pt(d,m,y,r,g,b)];case 4:return w=j.sent(),_=null!==(f=window.location.search)&&void 0!==f?f:"",x=null!==(p=window.location.hash)&&void 0!==p?p:"",(P=_.length?_:x.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,m.queryString(P).catch(console.error)]:[3,6];case 5:j.sent(),j.label=6;case 6:return m.initialized=!0,m.emit("initialize",n,r),r.initialPageview&&m.page().catch(console.error),[4,xt(m,o)];case 7:return j.sent(),[2,[m,w]]}var I,S,k}))}))}var It=function(e){function n(){var t,n,r,i=this,o=(r=new Promise((function(e,r){t=e,n=r})),{resolve:t,reject:n,promise:r}),u=o.promise,s=o.resolve;return i=e.call(this,(function(t){return u.then((function(e){return jt(e[0],e[1],t)}))}))||this,i._resolveLoadStart=function(t,e){return s([t,e])},i}return(0,t.ZT)(n,e),n.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},n.load=function(t,e){return void 0===e&&(e={}),(new n).load(t,e)},n.standalone=function(t,e){return n.load({writeKey:t},e).then((function(t){return t[0]}))},n}(vt),St=u(584);function kt(){var e,n;return(0,t.mG)(this,void 0,Promise,(function(){var r,i,o;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return r=function(){var t;if((0,St.M)())return(0,St.M)();if(window.analytics._writeKey)return window.analytics._writeKey;for(var e=/http.*\/analytics\.js\/v1\/([^/]*)(\/platform)?\/analytics.*/,n=void 0,r=0,i=Array.prototype.slice.call(document.querySelectorAll("script"));r<i.length;r++){var o=null!==(t=i[r].getAttribute("src"))&&void 0!==t?t:"";if((u=e.exec(o))&&u[1]){n=u[1];break}}if(!n&&document.currentScript){var u;o=document.currentScript.src,(u=e.exec(o))&&u[1]&&(n=u[1])}return n}(),i=null!==(n=null===(e=window.analytics)||void 0===e?void 0:e._loadOptions)&&void 0!==n?n:{},r?(o=window,[4,It.standalone(r,i)]):(console.error("Failed to load Write Key. Make sure to use the latest version of the snippet, which can be found in your source settings."),[2]);case 1:return o.analytics=t.sent(),[2]}}))}))}var At=u(449),Ot=!1;var Mt=(0,e.Vl)();function Et(e){return(0,t.mG)(this,void 0,void 0,(function(){var n;return(0,t.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e()];case 1:return[2,r.sent()];case 2:return n=r.sent(),i=n,console.error("[analytics.js]","Failed to load Analytics.js",i),(new At.B).increment("analytics_js.invoke.error",(0,t.ev)((0,t.ev)(["type:initialization"],i instanceof Error?["message:".concat(null==i?void 0:i.message),"name:".concat(null==i?void 0:i.name)]:[],!0),["wk:".concat((0,St.M)())],!1)),[3,3];case 3:return[2]}var i}))}))}if((0,e.UH)(Mt),u.p=Mt?Mt+"/v1/analytics-js/":"https://cdp.customer.io/v1/analytics-js/",(0,n.XP)("web"),document.addEventListener("securitypolicyviolation",(function(n){(function(n){return(0,t.mG)(this,void 0,Promise,(function(){var r;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return"report"===n.disposition||!n.blockedURI.includes("cdp.customer.io")||Ot?[2]:(Ot=!0,console.warn("Your CSP policy is missing permissions required in order to run Analytics.js 2.0"),console.warn("Reverting to Analytics.js 1.0"),r=(0,e.YM)(),[4,(0,H.v)(r)]);case 1:return t.sent(),[2]}}))}))})(n).catch(console.error)})),function(){var t={Firefox:46,Edge:13},e=!!window.MSInputMethodContext&&!!document.documentMode,n=navigator.userAgent.split(" "),r=n[n.length-1].split("/"),i=r[0],o=r[1];return e||void 0!==t[i]&&t[i]>=parseInt(o)}()){var Ft=document.createElement("script");Ft.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.7.0/polyfill.min.js"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){return document.body.appendChild(Ft)})):document.body.appendChild(Ft),Ft.onload=function(){Et(kt)}}else Et(kt)}(),window.AnalyticsNext=s}();