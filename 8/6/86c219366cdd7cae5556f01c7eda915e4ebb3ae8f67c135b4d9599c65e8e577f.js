import{H as P,P as Q,L as I,A as i,B as a,I as d,J as o,G as c,_ as S,Z as E,V as O,W as T,X as k,O as v,N as f,D as _,ak as ie,q as ae}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import{a9 as U,O as L,a_ as b,ad as Y,a$ as W,u as X,c as D,k as N,b0 as j,b1 as J,b2 as w}from"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import{m as Z,a as G}from"./vuex.esm-bundler_aa359dca_r24-02-0_b0_t240129-161140.js";import{aj as R}from"./lsanalytics-cart_5cb2710b_r24-02-0_b0_t240129-161140.js";import{g as x}from"./formatCurrency_d08cd85e_r24-02-0_b0_t240129-161140.js";import{u as ee}from"./csrViewStoreTrackOrder_1e94aa9d_r24-02-0_b0_t240129-161140.js";import se from"./Modal_886b6642_r24-02-0_b0_t240129-161140.js";import{O as te,a as re}from"./OrderCancelConfirmModal_05576ce3_r24-02-0_b0_t240129-161140.js";import{_ as ne}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import"./orderHelpers_fd52d65a_r24-02-0_b0_t240129-161140.js";import"./trapFocus_6aa864f5_r24-02-0_b0_t240129-161140.js";import"./SpinnerSkeleton_362db941_r24-02-0_b0_t240129-161140.js";import"./i18n_4b81f106_r24-02-0_b0_t240129-161140.js";import"./csrGlobalStoreAppState_f9ff4bfa_r24-02-0_b0_t240129-161140.js";import"./SvgIcon_e55bd28a_r24-02-0_b0_t240129-161140.js";import"./RadioButton_aacab2f5_r24-02-0_b0_t240129-161140.js";const B={DETAILS:"view details",RETURN:"return",TRACKORDER:"track shipment"},q={CANCELED:"Canceled",PROCESSING:"DO Created"},z={SHIPPING:"shipping",RETURN:"return"},oe=({addr_line_1:e,city:s,state:n,zip:l})=>`${e}, ${s}, ${n} ${l}`,le={components:{Modal:se,orderCancelModal:te,orderCancelConfirmModal:re},data:()=>({allInStoreOrders:[],allOnlineOrders:[],paginationSize:10,maxOrdersShown:10,totalOrdersFromUser:0,loading:!0,showMoreLoading:!1,showOrderCancelByOrderCode:{},cancelOrderGuid:"",isOrderCancel:!1,isOrderCancelConfirm:!1,timeouts:[],erroredOrders:{},showInStoreOnly:!1,hrFeatureName:U.HAPPY_RETURNS}),computed:{...P(X,["locale","country","caOrUs","usOrEu","countryAllowsCancellation","isReturnLinkRestrictedEU"]),...P(D,["feature","toggle","isBopisEnabled","isCancelOrderOnline","paths","defaultCurrency"]),...Z("userProfileState",["showCancelOrderSuccess","showEmployeeRegisterSuccess"]),...G("userProfileState",["isRedTabCustomerEnabled","isRedTabGlobalCustomerEnabled","uid"]),...G("auth",["hardLoggedIn"]),...Q(ee,["returnOrderId","returnOrderUserId","narvarReturnLink"]),detailsByOrderCode(){return this.orders.reduce((e,s)=>(e[s.code]=s.details,e),{})},inStoreOrdersToOrderSchema(){return this.allInStoreOrders.map(s=>{var n;return{code:s.unique_transaction_id,details:{orderGrandTotalPriceValue:s.order_total_amount},orderTotalQuantity:s.order_total_quantity,storeName:s.store_info.name,storeAddressText:oe(s.store_info),entries:s.sales_line_items,placed:s.order_date,transactionSource:s.transaction_source||null,returnLineItems:this.hasReturnLineItems(s)?s.return_line_items:null,salesLineItems:(n=s.sales_line_items)!=null&&n[0]?this.transformLineItems(s.sales_line_items):null}}).sort((s,n)=>{const l=s.placed,u=n.placed;return l>u?-1:l<u?1:0})},mode(){return this.showInStoreOnly?L.IN_STORE:L.ONLINE},narvarGenericLink(){const e=N();switch(this.country){case"US":return this.isInStoreOrder?this.paths.return:`https://returns.narvar.com/${e}/returns/step-1?locale=en_US&init=true`;case"CA":return`https://returns.narvar.com/${e}/returns?locale=en_CA&init=true`;default:return this.paths.return}},returnExchangeText(){return this.usOrEu?this.$t("i18n.orderActionsReturns"):this.$t("i18n.return")},orders(){if(this.showInStoreOnly)return this.inStoreOrdersToOrderSchema;const e=this.allOnlineOrders.slice(0,this.maxOrdersShown);return e.forEach(s=>{s.details=s.details||{}}),e},showInStoreOrders(){return this.toggle(U.IN_STORE_ORDERS)&&this.allInStoreOrders.length},showMoreText(){return this.showMoreLoading?this.$t("i18n.loadingEllipsis"):this.$t("i18n.showMore")},isUs(){return this.country.toLowerCase()==="us"}},watch:{showInStoreOnly:{async handler(e){await this.getOrders(e)},immediate:!0},async hardLoggedIn(e,s){e&&!s&&(this.loading=!0,await this.fetchOnlineOrders(),await this.fetchInStoreOrders())}},created(){this.fetchInStoreOrders()},beforeUnmount(){this.timeouts.forEach(e=>clearTimeout(e)),this.$store.commit("userProfileState/updateState",{property:"showCancelOrderSuccess",value:!1}),this.$store.commit("userProfileState/updateState",{property:"showEmployeeRegisterSuccess",value:!1})},methods:{appendItemsSuffix(e){return e>1?`${e} ${this.$t("i18n.itemsText")}`:`${e} ${this.$t("i18n.item")}`},transformLineItems(e){return e.map(s=>({imageUrl:s.image_url,productUrl:s.product_url,skuCode:s.pc9,styleName:s.name||"",skuColor:s.color||"",skuSize:s.size||""}))},hasReturnLineItems(e){const s=(e==null?void 0:e.return_line_items)||null;return s!==null?s.filter(l=>l.return_date!=null).length>0:!1},fetchInStoreOrders(){return this.$store.dispatch("userProfileState/fetchInStoreOrders").then(e=>{this.allInStoreOrders=(e==null?void 0:e.purchase_history)||[]}).finally(()=>{this.loading=!1})},async fetchOnlineOrders(){var l;const{onlineOrders:e,errors:s,totalOrdersFromUser:n}=await this.$store.dispatch("userProfileState/getOnlineOrders",{startIndex:0,endIndex:this.maxOrdersShown-1});if(s){this.loading=!1;return}this.allOnlineOrders=e,this.totalOrdersFromUser=n||0,(l=this.allOnlineOrders)==null||l.forEach(u=>{this.mapErroredOrders(u),this.assignCancelProperty(u)})},getFullName(e){var l,u;const s=((l=e.shippingAddress)==null?void 0:l.firstName)||"",n=((u=e.shippingAddress)==null?void 0:u.lastName)||"";return[s,n].join(" ")},narvarReturnExchangeLink(e){const s=this.detailsByOrderCode[e];return(s.orderType===b.EXCHANGE||s.onHold)&&s.parentOrderReturnLink?s.parentOrderReturnLink:s.returnLink?s.returnLink:this.narvarGenericLink},trackAfterOrderClickFn(){R(B.DETAILS)},getOrderDetailsPath(e){const s=e.transactionSource==="oms_sco"?L.SELF_CHECKOUT:this.mode;return`${this.paths.myOrderDetails}/${s}/${e.code}`},orderTrackAction(e){var n;R(B.TRACKORDER);const s=((n=this.getTrackingUrlsInfo(e))==null?void 0:n.urls)||[];s.length===1?window.open(s[0],"_blank"):s.length>1&&this.$router.push(`${this.paths.myOrderDetails}/${this.mode}/${e}`)},orderReturnAction(e){R(B.RETURN);const s=this.detailsByOrderCode[e];let n=s.returnLink;(s.orderType===b.EXCHANGE||s.onHold)&&(n=s.parentOrderReturnLink),this.returnOrderId=e,this.returnOrderUserId=this.uid,this.narvarReturnLink=n},orderCancelAction(e){this.isOrderCancel=!0,this.cancelOrderGuid=e},orderPlaced(e){var s,n;return((n=(s=Y(e))==null?void 0:s.toLocaleDateString)==null?void 0:n.call(s,this.localeIntl,{month:"short",day:"numeric",year:"numeric"}))||""},orderGrandTotalPriceValue(e){var s;return this.getFormattedCurrency((s=e==null?void 0:e.details)==null?void 0:s.orderGrandTotalPriceValue)},calcOrderQty(e){var n,l,u,t,m;if(this.showInStoreOnly)return e.orderTotalQuantity;if(((n=e==null?void 0:e.details)==null?void 0:n.orderType)===b.EXCHANGE){const y=((u=(l=e.details.shippingGroup)==null?void 0:l.shippingGroupData)==null?void 0:u.length)??null,p=((m=(t=e.details.processingGroup)==null?void 0:t.processingGroupData)==null?void 0:m.length)??null;return y||p||0}let s=0;return e.entries.forEach(y=>{s+=y.quantity}),s},checkEntries(e){var s;return this.showInStoreOnly?!!(e!=null&&e.entries&&((s=e==null?void 0:e.entries)!=null&&s.length)):!0},checkSaleLineItems(e){var s;return!!(e!=null&&e.salesLineItems&&((s=e==null?void 0:e.salesLineItems)!=null&&s.length))},getProductImgUrls(e){var u,t,m,y,p,g,r,h,C,F,H,V;if(this.showInStoreOnly&&e!=null&&e.returnLineItems)return e.returnLineItems.map($=>$.image_url);const n=(((t=(u=e==null?void 0:e.details)==null?void 0:u.processingGroup)==null?void 0:t.processingGroupData)||[]).concat(((y=(m=e==null?void 0:e.details)==null?void 0:m.shippingGroup)==null?void 0:y.shippingGroupData)||[],((g=(p=e==null?void 0:e.details)==null?void 0:p.cancelledGroup)==null?void 0:g.cancelledGroupData)||[],((h=(r=e==null?void 0:e.details)==null?void 0:r.readyForPickupGroup)==null?void 0:h.readyForPickupData)||[],((F=(C=e==null?void 0:e.details)==null?void 0:C.pickedupGroup)==null?void 0:F.pickedupGroupData)||[],((V=(H=e==null?void 0:e.details)==null?void 0:H.returnGroup)==null?void 0:V.returnGroupData)||[]);if(n.length===0)return[];const l=[];return n.forEach($=>{(($==null?void 0:$.orderLineDetails)||[]).forEach(K=>{K.imageUrl&&l.push(K.imageUrl)})}),l},createTrackingUrlMap(e){var y,p;const s=this.detailsByOrderCode[e],n=(y=s==null?void 0:s.shippingGroup)==null?void 0:y.shippingGroupData,l=(p=s==null?void 0:s.returnGroup)==null?void 0:p.returnGroupData,u=n==null?void 0:n.length,t=l==null?void 0:l.length,m={shipping:[],return:[]};if(u>0){const r=n.map(h=>h.trackingUrl).filter(h=>h);m.shipping=r}if(t>0){const r=l.map(h=>h.trackingUrl).filter(h=>h);m.return=r}return m},getTrackingUrlsInfo(e){const s=this.createTrackingUrlMap(e);let n="",l=[];return s.shipping.length>0?(n=z.SHIPPING,l=s.shipping):s.return.length>0&&(n=z.RETURN,l=s.return),{type:n,urls:l}},assignCancelProperty(e){const s=this.detailsByOrderCode[e.code]||{};let n=0;if(s.enableCancellation){const l=W(s.orderDate);if(this.isBopisOrder(e)?n=j:n=J,l<n&&this.countryAllowsCancellation){this.showOrderCancelByOrderCode[e.code]=!0;const u=n-l,t=setTimeout(()=>{this.showOrderCancelByOrderCode[e.code]=!1},u*1e3);this.timeouts.push(t)}}},mapErroredOrders(e){var s,n;this.erroredOrders[e.code]=(n=(s=e==null?void 0:e.details)==null?void 0:s.errors)==null?void 0:n.length},getOrderType(e){let s="S";if(e&&e.entries.length&&this.isBopisEnabled){const n=e.entries,l=n.findIndex(t=>t.deliveryPointOfService===null||!t.deliveryPointOfService),u=n.findIndex(t=>t.deliveryPointOfService&&t.deliveryPointOfService!==null);u>-1&&l>-1?s="M":u>-1&&(s="B")}return s},deliveryName(e,s){let n="";if(e&&e.entries.length>0){const l=e.entries,u=l.findIndex(m=>m.deliveryPointOfService===null||!m.deliveryPointOfService),t=l.findIndex(m=>m.deliveryPointOfService&&m.deliveryPointOfService!==null);u>-1&&s==="S"?n=l[u].deliveryName:t>-1&&s==="B"&&(n=l[t].deliveryName)}else e&&e.details&&e.details.orderType===b.EXCHANGE&&(n=`${e.details.shippingAddress.firstName} ${e.details.shippingAddress.lastName}`);return n},onCloseConfirmCancelOrder(){this.isOrderCancelConfirm=!1,this.$store.commit("userProfileState/updateState",{property:"showCancelOrderSuccess",value:!0})},onShowMoreClick(){this.showMoreLoading=!0;const e=this.maxOrdersShown,s=e+this.paginationSize-1;return this.$store.dispatch("userProfileState/getOnlineOrders",{startIndex:e,endIndex:s}).then(({onlineOrders:n,errors:l,totalOrdersFromUser:u})=>{l||!(n!=null&&n.length)||(this.totalOrdersFromUser=u||0,this.allOnlineOrders.splice(e,this.paginationSize,...n))}).finally(()=>{this.maxOrdersShown+=this.paginationSize,this.showMoreLoading=!1})},showTrackOrder(e){var n,l;if(((l=(n=this.getTrackingUrlsInfo(e))==null?void 0:n.urls)==null?void 0:l.length)===0||this.showInStoreOnly)return!1;const s=this.detailsByOrderCode[e];return!(this.erroredOrders[e]||s.orderStatus===q.CANCELED||s.orderStatus===q.PROCESSING)},getFormattedCurrency(e){return this.defaultCurrency?x(e,this.locale,this.defaultCurrency.isocode):""},isGCProduct(e){return(e==null?void 0:e.entries.length)===1?(e==null?void 0:e.entries.filter(s=>{var n;return((n=s.product)==null?void 0:n.baseProduct.substring(0,4))==="9999"}).length)===1:!1},isExchangeOrder(e){var l;const s=e;let n=0;return(l=s.returnGroup)!=null&&l.returnGroupData&&s.returnGroup.returnGroupData.forEach(u=>{u.orderReturnType!=="Exchange"&&(n+=1)}),n},isBopisOrder(e){return this.getOrderType(e)==="B"},async getOrders(e){this.loading=!0,e?await this.fetchInStoreOrders():await this.fetchOnlineOrders(),this.loading=!1}}},de={class:"order-history","data-testid":"purchase-history"},ce={key:0,class:"success-msg",role:"status"},ue={class:"success-msg-content"},he={class:"order-history-title"},me={key:1,class:"order-type-select-wrapper"},Oe={class:"order-type-select-container lsco-row lsco-row-xs--center lsco-row-md--start",role:"tablist","aria-label":"$t('i18n.orderType')","aria-controls":"orders-tab"},ye=["aria-selected"],pe=["aria-selected"],fe={key:2,class:"lsco-col-xs-23 lsco-col-xs-offset-2 lsco-col-md-offset-0"},Ce={class:"cancel-header"},Se={class:"cancel-sent-msg"},ge={class:"cancel-email"},ke=["aria-label"],_e={key:0,class:"lsco-col-xs-offset-2 lsco-col-md-offset-0 lsco-row-md--between lsco-row"},Ie={key:0,class:"order-details order-lines"},ve={key:0,class:"return-status"},we={class:"return-status-text"},Ee={key:1,class:"return-status"},Te={class:"return-status-text"},Le={class:"order-title"},Re={class:"order-date-qty-price"},$e={class:"order-date"},Ae={class:"order-cost"},be={key:0,class:"order-shipped-to"},Ne={key:2,class:"order-error-msg"},Pe={class:"order-error-msg__header"},Ue={key:3,class:"order-date-qty-price ship-pickup-info"},Ge={key:0,class:"ship-to"},Be={key:1,class:"pickup-by"},Me={class:"order-products lsco-row-xs--wrap"},De=["src"],Fe={class:"order-actions lsco-col-xs-21"},He={key:0,class:"track-btn-container"},Ve=["onClick"],Ke={key:0,class:"order-actions-details"},qe={key:0,class:"order-actions-returns"},ze=["href"],Qe=["onClick","onKeyup"],Ye={key:1,class:"lsco-col-xs-offset-2 lsco-col-md-offset-0 lsco-row-md--between lsco-row"},We={class:"order-details sales-lineItems"},Xe={key:0,class:"return-status"},je={class:"return-status-text"},Je={class:"order-title"},Ze={class:"order-date-qty-price"},xe={class:"order-date"},es={class:"order-cost"},ss={key:0,class:"order-shipped-to"},ts={key:1,class:"order-shipped-to"},rs={key:1,class:"order-error-msg"},ns={class:"order-error-msg__header"},is={key:2,class:"order-date-qty-price ship-pickup-info"},as={key:0,class:"ship-to"},os={key:1,class:"pickup-by"},ls={class:"order-products lsco-row-xs--wrap"},ds=["src"],cs={class:"order-actions lsco-col-xs-21"},us={key:0,class:"track-btn-container"},hs=["onClick"],ms={class:"order-actions-details"},Os={key:0,class:"order-actions-returns"},ys={class:"action",target:"_blank",href:"https://help.levi.com/hc/en-us/articles/360052069852-Levi-s-Return-Policy-Overview#instore"},ps={key:0,class:"order-actions-returns"},fs=["href"],Cs=["onClick","onKeyup"],Ss={key:2,class:"order-spacer"},gs={key:3},ks={key:4,class:"order-spacer"},_s={key:0,class:"show-more__wrapper"},Is={class:"modal-title"},vs={class:"modal-title"};function ws(e,s,n,l,u,t){const m=I("router-link"),y=I("orderCancelModal"),p=I("Modal"),g=I("orderCancelConfirmModal");return i(),a("div",de,[e.showEmployeeRegisterSuccess?(i(),a("div",ce,[d("span",ue,o(e.$t("i18n.regEmployeeSuccessMsg")),1)])):c("",!0),d("div",{class:S(["order-history-title-box",{"cancelled-order":e.showCancelOrderSuccess,"order-types":e.isRedTabCustomerEnabled||e.isRedTabGlobalCustomerEnabled}])},[d("div",he,o(e.$t("i18n.purchaseText")),1)],2),(e.isRedTabCustomerEnabled||e.isRedTabGlobalCustomerEnabled)&&t.showInStoreOrders?(i(),a("div",me,[d("div",Oe,[d("div",{class:S(["order-type-select",{selected:!e.showInStoreOnly}]),role:"tab","aria-selected":!e.showInStoreOnly,onClick:s[0]||(s[0]=r=>e.showInStoreOnly=!1),onKeyup:s[1]||(s[1]=E(r=>e.showInStoreOnly=!1,["enter"])),tabindex:"0"},o(e.$t("i18n.online")),43,ye),d("div",{class:S(["order-type-select in-store",{selected:e.showInStoreOnly}]),role:"tab","data-testid":"in-store-tab","aria-selected":e.showInStoreOnly,onClick:s[2]||(s[2]=r=>e.showInStoreOnly=!0),onKeyup:s[3]||(s[3]=E(r=>e.showInStoreOnly=!0,["enter"])),tabindex:"0"},o(e.$t("i18n.inStore")),43,pe)])])):c("",!0),e.loading?(i(),a("div",fe,o(e.$t("i18n.loadingEllipsis")),1)):e.showCancelOrderSuccess?(i(),a(O,{key:3},[d("h1",Ce,o(e.$t("i18n.orderCancelHederText")),1),d("div",Se,o(e.$t("i18n.orderCancelSentText")),1),d("div",ge,o(e.uid),1)],64)):(i(),a("div",{key:4,id:"orders-tab",class:"orders",role:"tabpanel","aria-label":e.showInStoreOnly?e.$t("i18n.inStore"):e.$t("i18n.online")},[(i(!0),a(O,null,T(t.orders,r=>(i(),a("div",{key:r.code,class:"order"},[t.checkEntries(r)&&!e.showInStoreOnly?(i(),a("div",_e,[e.showInStoreOnly?c("",!0):(i(),a("div",Ie,[r.details.returnGroup?(i(),a(O,{key:0},[t.isExchangeOrder(r.details)>0&&t.isUs?(i(),a("div",ve,[d("div",we,o(r.details.returnStatus),1)])):c("",!0)],64)):c("",!0),r.returnLineItems&&e.showInStoreOnly?(i(),a("div",Ee,[d("div",Te,o(e.$t("i18n.returnCompleted")),1)])):c("",!0),d("div",Le,[k(o(e.$t("i18n.orderNumberText"))+" ",1),d("span",null,o(r.code),1)]),d("div",Re,[d("span",$e,o(t.orderPlaced(r.placed)),1),d("span",{class:S(["order-qty",{"last-item":e.erroredOrders[r.code]}])},o(t.appendItemsSuffix(t.calcOrderQty(r))),3),e.erroredOrders[r.code]?c("",!0):(i(),a(O,{key:0},[d("span",Ae,o(t.orderGrandTotalPriceValue(r)),1),e.isBopisEnabled?c("",!0):(i(),a("p",be,o(e.$t("i18n.orderShippedTo"))+" "+o(t.getFullName(r.details)),1))],64))]),e.erroredOrders[r.code]?(i(),a("div",Ne,[d("div",null,[d("div",Pe,o(e.$t("i18n.orderHistoryErrorHeader")),1)])])):e.isBopisEnabled?(i(),a("div",Ue,[t.getOrderType(r)!=="B"?(i(),a("div",Ge,o(e.$t("i18n.shipPersonName"))+" "+o(t.deliveryName(r,"S")),1)):c("",!0),t.getOrderType(r)!=="S"?(i(),a("div",Be,o(e.$t("i18n.pickupPersonName"))+" "+o(t.deliveryName(r,"B")),1)):c("",!0)])):c("",!0),d("div",Me,[(i(!0),a(O,null,T(t.getProductImgUrls(r),(h,C)=>(i(),a("div",{key:`${h}${C}`,class:"product"},[h?(i(),a("img",{key:0,class:"product__image",src:h,alt:"Product image"},null,8,De)):c("",!0)]))),128))])])),d("div",Fe,[t.showTrackOrder(r.code)&&t.getOrderType(r)!=="B"?(i(),a("div",He,[t.isGCProduct(r)?c("",!0):(i(),a("button",{key:0,class:"order-actions-track",onClick:h=>t.orderTrackAction(r.code)},o(e.$t("i18n.orderTrackLabel")),9,Ve))])):c("",!0),e.erroredOrders[r.code]?c("",!0):(i(),a(O,{key:1},[e.showInStoreOnly?c("",!0):(i(),a("div",Ke,[v(m,{to:t.getOrderDetailsPath(r),onClick:s[4]||(s[4]=h=>t.trackAfterOrderClickFn()),class:"action"},{default:f(()=>[k(o(e.$t("i18n.orderActionsDetails")),1)]),_:2},1032,["to"])])),e.showInStoreOnly?c("",!0):(i(),a(O,{key:1},[e.caOrUs&&!r.details.processingGroup&&!t.isGCProduct(r)&&!e.isReturnLinkRestrictedEU?(i(),a("div",qe,[t.isUs&&e.feature(e.hrFeatureName)?(i(),_(m,{key:0,class:"action",to:e.paths.authReturnsConsolidator,onClick:h=>t.orderReturnAction(r.code)},{default:f(()=>[k(o(t.returnExchangeText),1)]),_:2},1032,["to","onClick"])):(i(),a("a",{key:1,class:"action",href:t.narvarReturnExchangeLink(r.code),onClick:s[5]||(s[5]=h=>t.trackAfterOrderClickFn())},o(t.returnExchangeText),9,ze))])):c("",!0),e.showOrderCancelByOrderCode[r.code]&&e.isCancelOrderOnline?(i(),a("div",{key:1,class:"order-actions-cancel",onClick:h=>t.orderCancelAction(r.guid),onKeyup:E(h=>t.orderCancelAction(r.guid),["enter"])},o(e.$t("i18n.orderActionsCancel")),41,Qe)):c("",!0)],64))],64))])])):c("",!0),t.checkSaleLineItems(r)?(i(),a("div",Ye,[d("div",We,[r.returnLineItems&&e.showInStoreOnly?(i(),a("div",Xe,[d("div",je,o(e.$t("i18n.returnCompleted")),1)])):c("",!0),d("div",Je,o(r.storeName),1),d("div",Ze,[d("span",xe,o(t.orderPlaced(r.placed)),1),d("span",{class:S(["order-qty",{"last-item":e.erroredOrders[r.code]}])},o(t.appendItemsSuffix(t.calcOrderQty(r))),3),e.erroredOrders[r.code]?c("",!0):(i(),a(O,{key:0},[d("span",es,o(t.orderGrandTotalPriceValue(r)),1),e.showInStoreOnly?(i(),a("p",ss,o(r.storeAddressText),1)):e.isBopisEnabled?c("",!0):(i(),a("p",ts,o(e.$t("i18n.orderShippedTo"))+" "+o(t.getFullName(r.details)),1))],64))]),e.erroredOrders[r.code]?(i(),a("div",rs,[d("div",null,[d("div",ns,o(e.$t("i18n.orderHistoryErrorHeader")),1)])])):e.isBopisEnabled&&!e.showInStoreOnly?(i(),a("div",is,[t.getOrderType(r)!=="B"?(i(),a("div",as,o(e.$t("i18n.shipPersonName"))+" "+o(t.deliveryName(r,"S")),1)):c("",!0),t.getOrderType(r)!=="S"?(i(),a("div",os,o(e.$t("i18n.pickupPersonName"))+" "+o(t.deliveryName(r,"B")),1)):c("",!0)])):c("",!0),d("div",ls,[(i(!0),a(O,null,T(r.salesLineItems,(h,C)=>(i(),a("div",{key:`${e.imageUrl}${C}`,class:"product"},[h.imageUrl?(i(),a("img",{key:0,class:"product__image",src:h.imageUrl,alt:"Product image"},null,8,ds)):c("",!0)]))),128))])]),d("div",cs,[t.showTrackOrder(r.code)&&t.getOrderType(r)!=="B"?(i(),a("div",us,[t.isGCProduct(r)?c("",!0):(i(),a("button",{key:0,class:"order-actions-track",onClick:h=>t.orderTrackAction(r.code)},o(e.$t("i18n.orderTrackLabel")),9,hs))])):c("",!0),e.erroredOrders[r.code]?c("",!0):(i(),a(O,{key:1},[d("div",ms,[v(m,{to:t.getOrderDetailsPath(r),onClick:s[6]||(s[6]=h=>t.trackAfterOrderClickFn()),class:"action"},{default:f(()=>[k(o(e.$t("i18n.orderActionsDetails")),1)]),_:2},1032,["to"])]),e.showInStoreOnly?(i(),a("div",Os,[d("a",ys,o(e.$t("i18n.returnPolicy")),1)])):c("",!0),e.showInStoreOnly?c("",!0):(i(),a(O,{key:1},[e.caOrUs&&!r.details.processingGroup&&!t.isGCProduct(r)?(i(),a("div",ps,[t.isUs&&e.feature(e.hrFeatureName)?(i(),_(m,{key:0,class:"action",to:e.paths.authReturnsConsolidator,onClick:h=>t.orderReturnAction(r.code)},{default:f(()=>[k(o(t.returnExchangeText),1)]),_:2},1032,["to","onClick"])):(i(),a("a",{key:1,class:"action",href:t.narvarReturnExchangeLink(r.code),onClick:s[7]||(s[7]=h=>t.trackAfterOrderClickFn())},o(t.returnExchangeText),9,fs))])):c("",!0),e.showOrderCancelByOrderCode[r.code]?(i(),a("div",{key:1,class:"order-actions-cancel",onClick:h=>t.orderCancelAction(r.guid),onKeyup:E(h=>t.orderCancelAction(r.guid),["enter"])},o(e.$t("i18n.orderActionsCancel")),41,Cs)):c("",!0)],64))],64))])])):c("",!0),e.showInStoreOnly&&t.checkEntries(r)&&t.checkSaleLineItems(r)?(i(),a("div",Ss)):e.showInStoreOnly&&!t.checkEntries(r)&&!t.checkSaleLineItems(r)?(i(),a("div",gs)):(i(),a("div",ks))]))),128)),e.maxOrdersShown<e.totalOrdersFromUser?(i(),a("div",_s,[d("button",{class:"show-more__btn",onClick:s[8]||(s[8]=(...r)=>t.onShowMoreClick&&t.onShowMoreClick(...r))},o(t.showMoreText),1)])):c("",!0)],8,ke)),e.isOrderCancel?(i(),_(p,{key:5,"modal-name":"order-cancel-modal",class:"order-cancel-modal",onCloseModal:s[11]||(s[11]=r=>e.isOrderCancel=!1)},{header:f(()=>[d("h3",Is,o(e.$t("i18n.cancelOrderHeader")),1)]),body:f(()=>[d("div",null,[v(y,{onCloseModal:s[9]||(s[9]=r=>e.isOrderCancel=!1),onShowOrderCancelConfirm:s[10]||(s[10]=r=>e.isOrderCancelConfirm=!0)})])]),_:1})):c("",!0),e.isOrderCancelConfirm?(i(),_(p,{key:6,"modal-name":"order-cancelconfirm-modal",class:"order-cancelconfirm-modal",onCloseModal:s[12]||(s[12]=r=>e.isOrderCancelConfirm=!1)},{header:f(()=>[d("h3",vs,o(e.$t("i18n.cancelOrderHeader")),1)]),body:f(()=>[d("div",null,[v(g,{"cart-guid":e.cancelOrderGuid,onCloseModal:t.onCloseConfirmCancelOrder},null,8,["cart-guid","onCloseModal"])])]),_:1})):c("",!0)])}const Es=ne(le,[["render",ws],["__scopeId","data-v-a39ef11a"]]);const M={DETAILS:"view details",RETURN:"return",TRACKORDER:"track shipment"},A={ALLOCATED:"Allocated",CANCELED:"Canceled",PARTIALLY_ALLOCATED:"Partially Allocated",PARTIALLY_SHIPPED:"Partially Shipped",SHIPPED:"Shipped"},Ts=({addr_line_1:e,city:s,state:n,zip:l})=>`${e}, ${s}, ${n} ${l}`,Ls={components:{Modal:se,OrderCancelModal:te,OrderCancelConfirmModal:re},data:()=>({allInStoreOrders:[],allOnlineOrders:[],paginationSize:10,maxOrdersShown:10,totalOrdersFromUser:0,loading:!0,showMoreLoading:!1,showOrderCancelByOrderCode:{},cancelOrderGuid:"",isOrderCancel:!1,isOrderCancelConfirm:!1,timeouts:[],showInStoreOnly:!1,hrFeatureName:U.HAPPY_RETURNS,orderIdsNotFoundInEom:[]}),computed:{...P(X,["locale","country","caOrUs","usOrEu","countryAllowsCancellation"]),...P(D,["feature","toggle","isBopisEnabled","isCancelOrderOnline","paths","defaultCurrency"]),...Z("userProfileState",["showCancelOrderSuccess","showEmployeeRegisterSuccess"]),...G("userProfileState",["isRedTabCustomerEnabled","isRedTabGlobalCustomerEnabled","uid"]),...G("auth",["hardLoggedIn"]),...Q(ee,["returnOrderId","returnOrderUserId","narvarReturnLink"]),inStoreOrdersToOrderSchema(){return this.allInStoreOrders.map(s=>{var n,l;return{orderId:s.unique_transaction_id,priceOrderInfo:{grandTotal:s.order_total_amount},totalItemCount:s.order_total_quantity,storeName:((n=s.store_info)==null?void 0:n.name)||"",storeAddressText:Ts(s.store_info),orderLines:s.sales_line_items,orderCaptureDate:s.order_date,transactionSource:s.transaction_source||null,returnLineItems:this.hasReturnLineItems(s)?s.return_line_items:null,salesLineItems:(l=s.sales_line_items)!=null&&l[0]?this.transformLineItems(s.sales_line_items):null}}).sort((s,n)=>{const l=s.orderCaptureDate,u=n.orderCaptureDate;return l>u?-1:l<u?1:0})},mode(){return this.showInStoreOnly?L.IN_STORE:L.ONLINE},narvarGenericLink(){const e=N();switch(this.country){case"US":return`https://returns.narvar.com/${e}/returns/step-1?locale=en_US&init=true`;case"CA":return`https://returns.narvar.com/${e}/returns?locale=en_CA&init=true`;default:return this.paths.return}},returnExchangeText(){return this.usOrEu?this.$t("i18n.orderActionsReturns"):this.$t("i18n.return")},orders(){var e;return this.showInStoreOnly?this.inStoreOrdersToOrderSchema:((e=this.allOnlineOrders)==null?void 0:e.slice(0,this.maxOrdersShown))||[]},showInStoreOrders(){var e;return this.toggle(U.IN_STORE_ORDERS)&&((e=this.allInStoreOrders)==null?void 0:e.length)},showMoreText(){return this.showMoreLoading?this.$t("i18n.loadingEllipsis"):this.$t("i18n.showMore")},isUs(){return this.country.toLowerCase()==="us"}},watch:{async showInStoreOnly(e){await this.getOrders({orderScope:e?w.INSTORE:w.ONLINE})},async hardLoggedIn(e,s){e&&!s&&await this.getOrders({orderScope:w.ALL})}},async created(){await this.getOrders({orderScope:w.ALL})},beforeUnmount(){this.timeouts.forEach(e=>clearTimeout(e)),this.$store.commit("userProfileState/updateState",{property:"showCancelOrderSuccess",value:!1}),this.$store.commit("userProfileState/updateState",{property:"showEmployeeRegisterSuccess",value:!1})},methods:{appendItemsSuffix(e){return Number(e)===1?`${e} ${this.$t("i18n.item")}`:`${e} ${this.$t("i18n.itemsText")}`},transformLineItems(e){return e.map(s=>({imageUrl:s.image_url,productUrl:s.product_url,skuCode:s.pc9,styleName:s.name||"",skuColor:s.color||"",skuSize:s.size||""}))},hasReturnLineItems(e){const s=(e==null?void 0:e.return_line_items)||null;return s!==null?s.filter(l=>l.return_date!=null).length>0:!1},fetchInStoreOrders(){return this.$store.dispatch("userProfileState/fetchInStoreOrders").then(e=>{this.allInStoreOrders=(e==null?void 0:e.purchase_history)||[]})},async getOnlineOrderV2Data({startIndex:e,endIndex:s}={}){return this.$store.dispatch("userProfileState/getOnlineOrdersV2",{startIndex:e,endIndex:s})},async fetchOnlineOrders(){var u;const{onlineOrders:e,errors:s,totalOrdersFromUser:n,orderIdsNotFoundInEom:l}=await this.getOnlineOrderV2Data({startIndex:0,endIndex:this.maxOrdersShown-1});s||(this.allOnlineOrders=e,this.totalOrdersFromUser=n||0,this.orderIdsNotFoundInEom=l||[],(u=this.allOnlineOrders)==null||u.forEach(t=>{this.assignCancelProperty(t)}))},getFullName(e){var s;return((s=e==null?void 0:e.shippingAddress)==null?void 0:s.customerName)||""},narvarReturnExchangeLink(e){var l;if(!e)return"";const s=((l=e.shippingAddress)==null?void 0:l.shippingEmail)||e.customerEmail||"",n=N();return e.orderId&&s?`${this.envUtil("NGS_ENV_NARVAR_RETURN_PATH")}/${n}/returns?locale=${this.locale}&order=${e.orderId}&email=${s}&init=true`:this.narvarGenericLink},trackAfterOrderClickFn(){R(M.DETAILS)},getOrderDetailsPath(e){if(!e)return"";const s=e.transactionSource==="oms_sco"?L.SELF_CHECKOUT:this.mode;return`${this.paths.myOrderDetails}/${s}/${e.orderId}`},orderTrackAction(e){if(R(M.TRACKORDER),!e)return;const s=this.getTrackingUrlsInfo(e)||[];s.length===1?window.open(s[0],"_blank"):s.length>1&&this.$router.push(`${this.paths.myOrderDetails}/${this.mode}/${e==null?void 0:e.orderId}`)},orderReturnAction(e){R(M.RETURN),e&&(this.returnOrderId=e.orderId,this.returnOrderUserId=this.uid,this.narvarReturnLink=this.narvarReturnExchangeLink(e))},orderCancelAction(e){this.isOrderCancel=!0,this.cancelOrderGuid=e},orderPlaced(e){var s,n;return((n=(s=Y(e))==null?void 0:s.toLocaleDateString)==null?void 0:n.call(s,this.localeIntl,{month:"short",day:"numeric",year:"numeric"}))||""},orderGrandTotalPriceValue(e){return e!=null&&e.priceOrderInfo?this.getFormattedCurrency(e.priceOrderInfo.grandTotal)||e.priceOrderInfo.grandTotalWithCurrency:""},calcOrderQty(e){return e?e.totalItemCount:0},checkIfOrderLinesExist(e){var s;return this.showInStoreOnly?!!(e!=null&&e.orderLines&&((s=e==null?void 0:e.orderLines)!=null&&s.length)):!0},checkIfSaleLineItemsExist(e){var s;return!!(e!=null&&e.salesLineItems&&((s=e==null?void 0:e.salesLineItems)!=null&&s.length))},getProductImgUrls(e){var s,n;return e?this.showInStoreOnly&&e.returnLineItems?e.returnLineItems.map(l=>l.image_url):((n=(s=e.orderLines)==null?void 0:s.map(l=>l.imageUrl?`${l.imageUrl}?$grid_desktop_full$`:""))==null?void 0:n.filter(l=>l))||[]:[]},getTrackingUrlsInfo(e){var u;const s=N(),{locale:n}=this,l=[];return(u=e==null?void 0:e.packages)==null||u.forEach(t=>{const{carrier:m,trackingNumber:y}=t;if(m&&y){const p=`${this.envUtil("NGS_ENV_NARVAR_BASE_PATH")}/${s}/tracking/${m}?tracking_numbers=${y}&order_number=${e.orderId}&source=MyAccount&locale=${n}`;l.push(p)}}),l},assignCancelProperty(e){let s=0;if(e!=null&&e.isCancellationAllowed&&this.orderIsAllocated(e)){const n=W(e.orderCaptureDate);if(this.isBopisOrder(e)?s=j:s=J,n<s&&this.countryAllowsCancellation){this.showOrderCancelByOrderCode[e.orderId]=!0;const l=s-n,u=setTimeout(()=>{this.showOrderCancelByOrderCode[e.orderId]=!1},l*1e3);this.timeouts.push(u)}}},deliveryName(e,s){var n,l;return e?s==="B"?(n=e.bopisAddress)==null?void 0:n.bopisName:(l=e.shippingAddress)==null?void 0:l.customerName:""},onCloseConfirmCancelOrder(){this.isOrderCancelConfirm=!1,this.$store.commit("userProfileState/updateState",{property:"showCancelOrderSuccess",value:!0})},async onShowMoreClick(){this.showMoreLoading=!0;const e=this.maxOrdersShown,s=e+this.paginationSize-1,{onlineOrders:n,errors:l,totalOrdersFromUser:u,orderIdsNotFoundInEom:t}=await this.getOnlineOrderV2Data({startIndex:e,endIndex:s});l||!(n!=null&&n.length)||(this.allOnlineOrders.splice(e,this.paginationSize,...n),this.totalOrdersFromUser=u||0,this.maxOrdersShown+=this.paginationSize,this.orderIdsNotFoundInEom=t||[],this.showMoreLoading=!1)},showTrackOrder(e){var s;return!(!e||((s=this.getTrackingUrlsInfo(e))==null?void 0:s.length)===0||this.showInStoreOnly||!this.orderIsReadyToBeDisplayed(e)||this.orderIsCanceled(e)||!this.orderIsShipped(e))},getFormattedCurrency(e){return!this.defaultCurrency||e===void 0?"":x(e,this.locale,this.defaultCurrency.isocode)},isReturnOrder(e){return!!(e!=null&&e.returnStatus)},orderIsCanceled(e){return(e==null?void 0:e.orderStatusAlias)===A.CANCELED},orderIsShipped(e){return(e==null?void 0:e.orderStatusAlias)===A.SHIPPED||(e==null?void 0:e.orderStatusAlias)===A.PARTIALLY_SHIPPED},orderIsAllocated(e){return(e==null?void 0:e.orderStatusAlias)===A.ALLOCATED||(e==null?void 0:e.orderStatusAlias)===A.PARTIALLY_ALLOCATED},async getOrders({orderScope:e=w.ONLINE}={}){this.loading=!0,e===w.ALL?(await this.fetchOnlineOrders(),await this.fetchInStoreOrders()):e===w.INSTORE?await this.fetchInStoreOrders():await this.fetchOnlineOrders(),this.loading=!1},orderNotInEOM(e){return e?this.orderIdsNotFoundInEom.includes(e.orderId):!1},orderIsReadyToBeDisplayed(e){var s;return e?!this.orderNotInEOM(e)&&((s=e.orderLines)==null?void 0:s.length):!1},isGCProduct(e){var s;return e?((s=e.orderLines)==null?void 0:s.length)===1&&e.isGiftCardOrder:!1},getOrderType(e){var n;let s="S";if((n=e==null?void 0:e.orderLines)!=null&&n.length&&this.isBopisEnabled){const{orderLines:l}=e,u=l.findIndex(m=>!m.isBopisLine),t=l.findIndex(m=>m.isBopisLine);t>-1&&u>-1?s="M":t>-1&&(s="B")}return s},isBopisOrder(e){return this.getOrderType(e)==="B"},isShipOrder(e){return this.getOrderType(e)==="S"},isMixedOrder(e){return this.getOrderType(e)==="M"}}},Rs={class:"order-history","data-testid":"purchase-history"},$s={key:0,class:"success-msg",role:"status"},As={class:"success-msg-content"},bs={class:"order-history-title"},Ns={key:1,class:"order-type-select-wrapper"},Ps={class:"order-type-select-container lsco-row lsco-row-xs--center lsco-row-md--start",role:"tablist","aria-label":"$t('i18n.orderType')","aria-controls":"orders-tab"},Us=["aria-selected"],Gs=["aria-selected"],Bs={key:2,class:"lsco-col-xs-23 lsco-col-xs-offset-2 lsco-col-md-offset-0"},Ms={class:"cancel-header"},Ds={class:"cancel-sent-msg"},Fs={class:"cancel-email"},Hs=["aria-label"],Vs={key:0,class:"lsco-col-xs-offset-2 lsco-col-md-offset-0 lsco-row-md--between lsco-row"},Ks={key:0,class:"order-details order-lines"},qs={key:0,class:"return-status"},zs={class:"return-status-text"},Qs={class:"order-title"},Ys={class:"order-date-qty-price"},Ws={class:"order-date"},Xs={class:"order-cost"},js={key:0,class:"order-shipped-to"},Js={key:1,class:"order-error-msg"},Zs={class:"order-error-msg__header"},xs={key:2,class:"order-date-qty-price ship-pickup-info"},et={key:0,class:"ship-to"},st={key:1,class:"pickup-by"},tt={class:"order-products lsco-row-xs--wrap"},rt=["src"],nt={class:"order-actions lsco-col-xs-21"},it={key:0,class:"track-btn-container"},at=["onClick"],ot={key:0,class:"order-actions-details"},lt={key:0,class:"order-actions-returns"},dt=["href"],ct=["onClick","onKeyup"],ut={key:1,class:"lsco-col-xs-offset-2 lsco-col-md-offset-0 lsco-row-md--between lsco-row"},ht={class:"order-details sales-lineItems"},mt={key:0,class:"return-status"},Ot={class:"return-status-text"},yt={class:"order-title"},pt={class:"order-date-qty-price"},ft={class:"order-date"},Ct={class:S(["order-qty"])},St={class:"order-cost"},gt={key:0,class:"order-shipped-to"},kt={class:"order-products lsco-row-xs--wrap"},_t=["src"],It={class:"order-actions lsco-col-xs-21"},vt={class:"order-actions-details"},wt={key:0,class:"order-actions-returns"},Et={class:"action",target:"_blank",href:"https://help.levi.com/hc/en-us/articles/360052069852-Levi-s-Return-Policy-Overview#instore"},Tt={key:2,class:"order-spacer"},Lt={key:3},Rt={key:4,class:"order-spacer"},$t={key:0,class:"show-more__wrapper"},At={class:"modal-title"},bt={class:"modal-title"};function Nt(e,s,n,l,u,t){const m=I("router-link"),y=I("OrderCancelModal"),p=I("Modal"),g=I("OrderCancelConfirmModal");return i(),a("div",Rs,[e.showEmployeeRegisterSuccess?(i(),a("div",$s,[d("span",As,o(e.$t("i18n.regEmployeeSuccessMsg")),1)])):c("",!0),d("div",{class:S(["order-history-title-box",{"cancelled-order":e.showCancelOrderSuccess,"order-types":e.isRedTabCustomerEnabled||e.isRedTabGlobalCustomerEnabled}])},[d("div",bs,o(e.$t("i18n.purchaseText")),1)],2),(e.isRedTabCustomerEnabled||e.isRedTabGlobalCustomerEnabled)&&t.showInStoreOrders?(i(),a("div",Ns,[d("div",Ps,[d("div",{class:S(["order-type-select",{selected:!e.showInStoreOnly}]),role:"tab","aria-selected":!e.showInStoreOnly,onClick:s[0]||(s[0]=r=>e.showInStoreOnly=!1),onKeyup:s[1]||(s[1]=E(r=>e.showInStoreOnly=!1,["enter"])),tabindex:"0"},o(e.$t("i18n.online")),43,Us),d("div",{class:S(["order-type-select in-store",{selected:e.showInStoreOnly}]),role:"tab","data-testid":"in-store-tab","aria-selected":e.showInStoreOnly,onClick:s[2]||(s[2]=r=>e.showInStoreOnly=!0),onKeyup:s[3]||(s[3]=E(r=>e.showInStoreOnly=!0,["enter"])),tabindex:"0"},o(e.$t("i18n.inStore")),43,Gs)])])):c("",!0),e.loading?(i(),a("div",Bs,o(e.$t("i18n.loadingEllipsis")),1)):e.showCancelOrderSuccess?(i(),a(O,{key:3},[d("h1",Ms,o(e.$t("i18n.orderCancelHederText")),1),d("div",Ds,o(e.$t("i18n.orderCancelSentText")),1),d("div",Fs,o(e.uid),1)],64)):(i(),a("div",{key:4,id:"orders-tab",class:"orders",role:"tabpanel","aria-label":e.showInStoreOnly?e.$t("i18n.inStore"):e.$t("i18n.online")},[(i(!0),a(O,null,T(t.orders,r=>(i(),a("div",{key:r.orderId,class:"order"},[t.checkIfOrderLinesExist(r)&&!e.showInStoreOnly?(i(),a("div",Vs,[e.showInStoreOnly?c("",!0):(i(),a("div",Ks,[t.isReturnOrder(r)&&t.isUs?(i(),a("div",qs,[d("div",zs,o(r.returnStatus),1)])):c("",!0),d("div",Qs,[k(o(e.$t("i18n.orderNumberText"))+" ",1),d("span",null,o(r.orderId),1)]),d("div",Ys,[d("span",Ws,o(t.orderPlaced(r.orderCaptureDate)),1),d("span",{class:S(["order-qty",{"last-item":!t.orderIsReadyToBeDisplayed(r)}])},o(t.appendItemsSuffix(t.calcOrderQty(r))),3),t.orderIsReadyToBeDisplayed(r)?(i(),a(O,{key:0},[d("span",Xs,o(t.orderGrandTotalPriceValue(r)),1),e.isBopisEnabled?c("",!0):(i(),a("p",js,o(e.$t("i18n.orderShippedTo"))+" "+o(t.getFullName(r)),1))],64)):c("",!0)]),t.orderIsReadyToBeDisplayed(r)?e.isBopisEnabled?(i(),a("div",xs,[t.isBopisOrder(r)?c("",!0):(i(),a("div",et,o(e.$t("i18n.shipPersonName"))+" "+o(t.deliveryName(r,"S")),1)),t.isShipOrder(r)?c("",!0):(i(),a("div",st,o(e.$t("i18n.pickupPersonName"))+" "+o(t.deliveryName(r,"B")),1))])):c("",!0):(i(),a("div",Js,[d("div",null,[d("div",Zs,o(e.$t("i18n.orderHistoryErrorHeader")),1)])])),d("div",tt,[(i(!0),a(O,null,T(t.getProductImgUrls(r),(h,C)=>(i(),a("div",{key:`${h}${C}`,class:"product"},[h?(i(),a("img",{key:0,class:"product__image",src:h,alt:"Product image"},null,8,rt)):c("",!0)]))),128))])])),d("div",nt,[t.showTrackOrder(r)&&!t.isBopisOrder(r)?(i(),a("div",it,[t.isGCProduct(r)?c("",!0):(i(),a("button",{key:0,class:"order-actions-track",onClick:h=>t.orderTrackAction(r)},o(e.$t("i18n.orderTrackLabel")),9,at))])):c("",!0),t.orderIsReadyToBeDisplayed(r)?(i(),a(O,{key:1},[e.showInStoreOnly?c("",!0):(i(),a("div",ot,[v(m,{to:t.getOrderDetailsPath(r),onClick:s[4]||(s[4]=h=>t.trackAfterOrderClickFn()),class:"action"},{default:f(()=>[k(o(e.$t("i18n.orderActionsDetails")),1)]),_:2},1032,["to"])])),e.showInStoreOnly?c("",!0):(i(),a(O,{key:1},[e.caOrUs&&t.orderIsShipped(r)&&!t.isGCProduct(r)?(i(),a("div",lt,[t.isUs&&e.feature(e.hrFeatureName)?(i(),_(m,{key:0,class:"action",to:e.paths.authReturnsConsolidator,onClick:h=>t.orderReturnAction(r)},{default:f(()=>[k(o(t.returnExchangeText),1)]),_:2},1032,["to","onClick"])):(i(),a("a",{key:1,class:"action",href:t.narvarReturnExchangeLink(r),onClick:s[5]||(s[5]=h=>t.trackAfterOrderClickFn())},o(t.returnExchangeText),9,dt))])):c("",!0),e.showOrderCancelByOrderCode[r.orderId]&&e.isCancelOrderOnline?(i(),a("div",{key:1,class:"order-actions-cancel",onClick:h=>t.orderCancelAction(r.cartGuid),onKeyup:E(h=>t.orderCancelAction(r.cartGuid),["enter"])},o(e.$t("i18n.orderActionsCancel")),41,ct)):c("",!0)],64))],64)):c("",!0)])])):c("",!0),t.checkIfSaleLineItemsExist(r)?(i(),a("div",ut,[d("div",ht,[r.returnLineItems&&e.showInStoreOnly?(i(),a("div",mt,[d("div",Ot,o(e.$t("i18n.returnCompleted")),1)])):c("",!0),d("div",yt,o(r.storeName),1),d("div",pt,[d("span",ft,o(t.orderPlaced(r.orderCaptureDate)),1),d("span",Ct,o(t.appendItemsSuffix(t.calcOrderQty(r))),1),d("span",St,o(t.orderGrandTotalPriceValue(r)),1),e.showInStoreOnly?(i(),a("p",gt,o(r.storeAddressText),1)):c("",!0)]),d("div",kt,[(i(!0),a(O,null,T(r.salesLineItems,(h,C)=>(i(),a("div",{key:`${h.imageUrl}${C}`,class:"product"},[h.imageUrl?(i(),a("img",{key:0,class:"product__image",src:h.imageUrl,alt:"Product image"},null,8,_t)):c("",!0)]))),128))])]),d("div",It,[d("div",vt,[v(m,{to:t.getOrderDetailsPath(r),onClick:s[6]||(s[6]=h=>t.trackAfterOrderClickFn()),class:"action"},{default:f(()=>[k(o(e.$t("i18n.orderActionsDetails")),1)]),_:2},1032,["to"])]),e.showInStoreOnly?(i(),a("div",wt,[d("a",Et,o(e.$t("i18n.returnPolicy")),1)])):c("",!0)])])):c("",!0),e.showInStoreOnly&&t.checkIfOrderLinesExist(r)&&t.checkIfSaleLineItemsExist(r)?(i(),a("div",Tt)):e.showInStoreOnly&&!t.checkIfOrderLinesExist(r)&&!t.checkIfSaleLineItemsExist(r)?(i(),a("div",Lt)):(i(),a("div",Rt))]))),128)),e.maxOrdersShown<e.totalOrdersFromUser?(i(),a("div",$t,[d("button",{class:"show-more__btn",onClick:s[7]||(s[7]=(...r)=>t.onShowMoreClick&&t.onShowMoreClick(...r))},o(t.showMoreText),1)])):c("",!0)],8,Hs)),e.isOrderCancel?(i(),_(p,{key:5,"modal-name":"order-cancel-modal",class:"order-cancel-modal",onCloseModal:s[10]||(s[10]=r=>e.isOrderCancel=!1)},{header:f(()=>[d("h3",At,o(e.$t("i18n.cancelOrderHeader")),1)]),body:f(()=>[d("div",null,[v(y,{onCloseModal:s[8]||(s[8]=r=>e.isOrderCancel=!1),onShowOrderCancelConfirm:s[9]||(s[9]=r=>e.isOrderCancelConfirm=!0)})])]),_:1})):c("",!0),e.isOrderCancelConfirm?(i(),_(p,{key:6,"modal-name":"order-cancelconfirm-modal",class:"order-cancelconfirm-modal",onCloseModal:s[11]||(s[11]=r=>e.isOrderCancelConfirm=!1)},{header:f(()=>[d("h3",bt,o(e.$t("i18n.cancelOrderHeader")),1)]),body:f(()=>[d("div",null,[v(g,{"cart-guid":e.cancelOrderGuid,onCloseModal:t.onCloseConfirmCancelOrder},null,8,["cart-guid","onCloseModal"])])]),_:1})):c("",!0)])}const Pt=ne(Ls,[["render",Nt],["__scopeId","data-v-5951abc4"]]),Zt={__name:"OrderHistoryWrapper",setup(e){const{toggle:s}=ie(D()),n=ae(()=>s.value("orderHistoryV2Enabled"));return(l,u)=>n.value?(i(),_(Pt,{key:0})):(i(),_(Es,{key:1}))}};export{Zt as default};
