(function(){"use strict";var __webpack_modules__={940:function(e,t,i){function a(e){if("string"!=typeof e)throw new Error("htmlString must be a valid string");return e.replace(/\n|\r/g,"").replace(/\s\s+/g," ").replace(/<!--[\s\S]*?-->/g,"")}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}nction S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function l(e,t){return e.reduce((,[]).reduce((function(i,a){var o=t(e.map(());return r(r({},i),{},n({},a,o))}),{})}function u(e,t){var i=t.length,a=Math.floor(e/i),o=t.reduce((,{}),d=e%i;if(d)for(var s=d,S=0;s>0;s-=1,S+=1)S>=i&&(S=0),o[t[S]]+=1;return o}function c(e,t){var i,a,o,d=l([u(e,Object.keys(t)),t],(function(e){var t,i,a=(i=2,t=e)||t,i)||s(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return a[0]-a[1]})),S=Object.values(d);return function(e){return Object.keys(e).reduce((function(t,i){var a=e[i];return r(r({},t),{},n({},i,a<0?Math.abs(a):0))}),{})}(l([d,u((!0,o=S.filter((),o.reduce((function(e,t){return e+t}),0)),(i=d,a=Object.keys(i).filter(()))],())}nction f(e,t){return{cpm:e.response.cpm,remainingTTL:e.responseTimestamp+p(e.ttl)-t}}function O(e,t,i){var a=1e3*e.cpm/(1e3*t)+e.remainingTTL/i;return Number.isInteger(a)?a:parseFloat(a.toFixed(2))}function _(e){var t,i=Date.now(),a=function(e){for(var t=0,i=0;i<e.length;i+=1){var a=e[i];a>t&&(t=a)}return t}(e.map(()),o=function(e){for(var t=0,i=0;i<e.length;i+=1){var a=p(e[i].ttl)+e[i].responseTimestamp;a>t&&(t=a)}return t}(e)-i;return(t=e,t)||t)||t)||)).sort((function(e,t){var r=O(f(e,i),a,o);return O(f(t,i),a,o)-r}))}function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){A(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B(e,t,i){var o=Object.create({restoreFromStorage:function(){var t=e.getItem("spine_bid_pool")||{};Object.keys(t).forEach((function(e){n[e]=[],t[e].filter(i.filterBidsEligibleForRestoring).forEach((function(t){n[e].push(t)}))}))},saveToStorage:function(){var t,a=Object.keys(this).reduce((function(e,t){return b(b({},e),{},A({},t,e[t].filter(i.filterBidsEligibleForStorage)))}),this),o=c(160,(t=a,Object.keys(t).reduce((,{}))),r=Object.keys(a).reduce((function(e,t){var i,r=o[t];return e[t]=r?(i=r,_(a[t]).slice(0,-i)):a[t],e}),{});e.setItem("spine_bid_pool",r)}},{}),r={get:function(e,t,i){return"function"==typeof e[t]?Reflect.get(e,t,i)},set:function(e,i,o){return Reflect.set(e,i,function(e,t){return new Proxy(e,{get:set:function(e,i,o){try{"length"!==i&&Reflect.set(e,i,function(e){return e.response.ad?b(b({},e),{},{response:b(b({},e.response),{},{ad:a(e.response.ad)})}):e}(o))}catch(e){t(e)}return Reflect.set(e,i,o)}})}(o,t))}},n=new Proxy(o,r);return n}i.d(t,{Z:)}},__webpack_module_cache__={};_webpack_require__.d=__webpack_require__.o=var __webpack_exports__={};!function(){var _features_advertisement_bid_pool__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(940),_excluded=["idPath"];dow.debugOut||start_stamp)debugOut("Display Init v.2");else{var _debugOut=function(e,t){if(t=t||"",-1!=document.cookie.indexOf("gdbug=1")){var i=Date.now()-start_stamp;""!=t?console.log("%c["+i+"ms] %c"+e+"\n%c"+t,"color:orange","color:green","color:red"):console.log("%c["+i+"ms] %c"+e,"color:orange","color:green")}};console.log("%cSomething bad happened with time and space","color:red");var start_stamp=Date.now();window.debugOut=_debugOut,_debugOut("System Init",start_stamp)}var FALLBACK_ADX_FLOOR=.1,createDynamicSlot=function(e,t,i){var a=e(),o=[];return Object.freeze({runNextRound:function(){try{o.forEach((),o=[]}catch(e){SM_OBJ.ADS.debugLog("getInjectedSlots",e)}},prepareSlotForNextRound:function(){try{var e=t();if(!e)return null;var i=a.next(),r=e.elementId+"-"+i;return e.elementId=r,o.push(e),r}catch(e){SM_OBJ.ADS.debugLog("dynamicSlots.prepareSlotForNextRound",e)}return null},extractSlotPool:function(){var e=o.slice();return o=[],e}})},listeners,observedAds,adFoundEmitter;window.createDynamicSlot=createDynamicSlot,window.SM_OBJ.ADS={adsAllowedToRun:jQuery.Deferred(),parametersResolved:jQuery.Deferred(),auctionSetup:jQuery.Deferred(),initialize:function(){try{SM_OBJ.ADS.adDomain="undefined"!=typeof siteDomain&&""!=siteDomain?siteDomain:"definition.org",SM_OBJ.ADS.adPrefix="undefined"!=typeof adPrefix&&""!=adPrefix?adPrefix:"def",SM_OBJ.ADS.zone="string"==typeof ADZone?ADZone:SM_OBJ.SESSION.PAGE_TYPE,SM_OBJ.ADS.gptadslots={},SM_OBJ.ADS.creatives={},SM_OBJ.ADS.pbAds={},SM_OBJ.ADS.pbRefreshAds={},SM_OBJ.ADS.mainSlotIds=[],SM_OBJ.ADS.activeSlots=[],SM_OBJ.ADS.bidders=[],SM_OBJ.ADS.slots=[],SM_OBJ.ADS.experiments=[],SM_OBJ.ADS.mainSlotsLoaded=!1,SM_OBJ.ADS.injectedSlotIds=[],SM_OBJ.ADS.lazySlotIds=[],SM_OBJ.ADS.lazySlotQueue=[],SM_OBJ.ADS.expiredLazySlots=[],SM_OBJ.ADS.refreshSlotIds=[],SM_OBJ.ADS.allSlotIds=[],SM_OBJ.ADS.bidPool=SM_OBJ.ADS.bidPool||(0,_features_advertisement_bid_pool__WEBPACK_IMPORTED_MODULE_0__.Z)(window.storageManager,(,{filterBidsEligibleForStorage:function(e){var t=e.responseTimestamp+1e3*e.ttl,i=Date.now();return!e.bidUsed&&!e.expired&&t-i>0},filterBidsEligibleForRestoring:),SM_OBJ.ADS.dfpFloors={},SM_OBJ.ADS.device=void 0!==SM_OBJ.SESSION.DEVICE_TYPE?SM_OBJ.SESSION.DEVICE_TYPE.toLowerCase():"desktop",SM_OBJ.ADS.slotIdToAdUnitMap={},SM_OBJ.ADS.useRequestedSize=["appnexus","conversant","criteo","districtm","sharethrough","triplelift","sovrn","rubicon"],SM_OBJ.ADS.auctions={},SM_OBJ.ADS.auctionCount=0,SM_OBJ.ADS.refreshDelay=10,SM_OBJ.ADS.refreshViewable=!1,SM_OBJ.ADS.refreshViewableOnly=!1,SM_OBJ.ADS.refreshViewableInterval=30,SM_OBJ.ADS.refreshCount=0,SM_OBJ.ADS.tabInView=!0,SM_OBJ.ADS.bidderPlacementKeyMap={},SM_OBJ.ADS.placementIdToTagMap={},SM_OBJ.ADS.quantumCPMTargets={DEF_Desktop_InPost_Top:1.3,DEF_Desktop_InPost_Mid_Left:1.85,DEF_Desktop_InPost_Mid_Right:1.9,DEF_Desktop_InPost_Bottom:1.3,DEF_Desktop_Left_Rail:1.15,DEF_Desktop_Right_Rail_Top:1.75,DEF_Desktop_Right_Rail_Mid:1.5,DEF_Desktop_Adhesion:1.3,DEF_Desktop_Injected:1.4,DEF_Tablet_InPost_Top:2,DEF_Tablet_InPost_Mid_Left:3,DEF_Tablet_InPost_Mid_Right:4.5,DEF_Tablet_InPost_Bottom:2,DEF_Tablet_Adhesion:1.7,DEF_Table_Injected:.4,DEF_Mobile_InPost_Top:3.7,DEF_Mobile_InPost_Mid:7,DEF_Mobile_InPost_Bottom:4,DEF_Mobile_Adhesion:2,DEF_Mobile_Injected:2},SM_OBJ.ADS.singleRequestAuction=!0,SM_OBJ.ADS.quantumTimeout=1e4,SM_OBJ.ADS.useQuantumAuctionClose=!0,SM_OBJ.ADS.usePostAuction=!0,SM_OBJ.ADS.maxBidTTL=300,SM_OBJ.ADS.allSlotBidsDiscount=.05,SM_OBJ.ADS.adConfigLoaded=jQuery.Deferred(),SM_OBJ.ADS.blockthroughEnabled=!1,SM_OBJ.ADS.interstitialActive=!1,SM_OBJ.ADS.interstitialDisplayed=!1,SM_OBJ.ADS.interstitialLoaded=!1,SM_OBJ.ADS.useAmazon=!1,SM_OBJ.ADS.amzAds={},SM_OBJ.ADS.amzFloors={},SM_OBJ.ADS.lazySlotLoadTimes={},SM_OBJ.ADS.refreshBidders={},SM_OBJ.ADS.fetchConfig()}catch(e){SM_OBJ.ADS.debugLog("initialize",e)}},getBidPoolFromStorage:function(){try{console.log("getBidPoolFromStorage ....."),SM_OBJ.ADS.bidPool.restoreFromStorage()}catch(e){SM_OBJ.ADS.debugLog("bidPool.restoreFromStorage",e)}},configureCachedBidCreative:function(){try{pbjs.que.push((function(){SM_OBJ.ADS.originalPrebidRenderAd=SM_OBJ.ADS.originalPrebidRenderAd||window.pbjs.renderAd,window.pbjs.renderAd=function(e,t){try{if(e&&t)try{var i=SM_OBJ.ADS.getBidByAdId(t);if(i){var a=o=function(e,t,i){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t+20,e.defaultView.frameElement.height=i+20)},r=n=function(e,t,i){var a=t.querySelector(i);e.parentNode&&e.parentNode===a||r(e,t,i)},d=(A=0,,s=!0;if(i.hasOwnProperty("bidRendered")?i.bidRendered&&(s=!1):i.bidRendered=!1,s){var S=i.response;i.ad=a(S.ad,S.originalCpm||S.cpm),i.adUrl=a(S.adUrl,S.originalCpm||S.cpm);var l=S.height,u=S.width,c=S.ad,g=S.mediaType,p=S.adUrl,f=S.renderer,O=document.createComment("Creative ".concat(S.creativeId," served by ").concat(S.bidder," Prebid.js Header Bidding"));if(f))console.log("CUSTOM RENDER:::","RENDERER REQUIRED!!! NEED TO SET UP RENDERER");else if(e===document&&!)||"video"===g){var _="Error trying to write ad. Ad render call ad id ".concat(t," was prevented from writing to the main document.");console.log("CUSTOM RENDER:::",_)}else if(c)console.log("CUSTOM RENDER:::","RENDERING AD"),e.write(c),e.close(),o(e,u,l),n(O,e,"html");else if(p){var m=((b=document.createElement("iframe")).id=d()+Math.random().toString(16).substr(2),b.height=0,b.width=0,b.border="0px",b.hspace="0",b.vspace="0",b.marginWidth="0",b.marginHeight="0",b.style.border="0",b.scrolling="no",b.frameBorder="0",b.src="about:blank",b.style.display="none",b);m.height=l,m.width=u,m.style.display="inline",m.style.overflow="hidden",m.src=p,r(m,e,"body"),o(e,u,l),n(O,e,"html")}else"Error trying to write ad. No ad for bid response id: ".concat(t)}else SM_OBJ.ADS.debugLog("configureCachedBidCreative","ad rendered already")}else SM_OBJ.ADS.debugLog("configureCachedBidCreative","can't find bid via ad id")}catch(e){SM_OBJ.ADS.debugLog("configureCachedBidCreative",e)}else SM_OBJ.ADS.debugLog("configureCachedBidCreative","missing doc of ad id")}catch(e){SM_OBJ.ADS.debugLog("customPrebidRender",e)}var b,A}}))}catch(e){SM_OBJ.ADS.debugLog("configureCachedBidCreative",e)}},getPath:function(e,t,i){if(t){"string"==typeof t&&(t=t.split("."));for(var a=e,o=0;o<t.length;o++){var r=t[o];if(!a[r])return i;if(o===t.length-1)return a[r];a=a[r]}}},debugLog:fetchConfig:function(){try{SM_OBJ.ADS.configUrl="https://ac1.spinemedia.com/config/"+SM_OBJ.ADS.adPrefix+"/live/main-config.js";try{var e="spConf".getParamValue()||storageManager.getItem("spine_config_override");if(e){var t=decodeURI(e);-1===t.toString().indexOf("http")&&(t=SM_OBJ.ADS.getProtocol()+t),SM_OBJ.ADS.configUrl=t,SM_OBJ.ADS.debugLog("preview config URL",SM_OBJ.ADS.configUrl,!1),storageManager.setItem("spine_config_override",e,"","/")}}catch(e){SM_OBJ.ADS.debugLog("previewConfUrl",e)}var i=SM_OBJ.ADS.configUrl,a=new XMLHttpRequest;a.open("GET",i,!0),a.onreadystatechange=function(){if(4===a.readyState&&this.status>=200&&this.status<300){SM_OBJ.ADS.config=JSON.parse(a.responseText);try{SM_OBJ.ADS.debugLog("config URL",i,!1),parseInt(SM_OBJ.SESSION.SESSION_ID.slice(0,2),16)%100>=SM_OBJ.ADS.config.config.site.excludeExperiments&&(SM_OBJ.ADS.logTiming("experimentsStart","insights"),SM_OBJ.ADS.runExperiments(SM_OBJ.ADS.config),SM_OBJ.ADS.adConfigLoaded.resolve(),SM_OBJ.ADS.logTiming("experimentsComplete","insights"))}catch(e){SM_OBJ.ADS.debugLog("experiments",e)}SM_OBJ.ADS.adConfig=void 0===SM_OBJ.ADS.adConfig||"object"!==_typeof(SM_OBJ.ADS.adConfig)?SM_OBJ.ADS.config.config:SM_OBJ.ADS.adConfig,SM_OBJ.ADS.setupAuction(SM_OBJ.ADS.adConfig)}},a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send()}catch(e){SM_OBJ.ADS.debugLog("fetchConfig",e)}},setupNewAuction:function(e,t,i){try{if(e.length>0){var a=SM_OBJ.SESSION.guid();if(!SM_OBJ.ADS.auctions.hasOwnProperty(a)){SM_OBJ.ADS.auctionId=a,SM_OBJ.ADS.auctionCount++,SM_OBJ.SESSION.setAuctionCount(),SM_OBJ.ADS.auctions[a]={slots:e,bidRequests:[],bids:[],bidWins:[],lateBids:[],instance:SM_OBJ.ADS.auctionCount,sessionInstance:SM_OBJ.SESSION.AUCTION_COUNT,dataSent:!1,revenueCalculated:!1,adLoads:0,bidderRequestCounts:[],adserverRequestSent:!1,adserverResponseReceived:!1,timeouts:[],timing:{},highestBids:{},auctionTrigger:t,loadedSlots:[],bidsBack:{}},i&&(SM_OBJ.ADS.refreshCount++,SM_OBJ.ADS.auctions[a].refreshInstance=SM_OBJ.ADS.refreshCount);var o=SM_OBJ.SESSION.getTimestamp();return SM_OBJ.ADS.auctions[a].timing.clientTimestamp=o,e.forEach((),a}}}catch(e){SM_OBJ.ADS.debugLog("setupNewAuction",e)}},setupAuction:function(e){try{SM_OBJ.ADS.debugLog("final ad config",e,!1),SM_OBJ.ADS.debugLog("start AUCTION configuration",null,!1),e.site.customParams.hasOwnProperty("blockthrough")&&(SM_OBJ.ADS.blockthroughEnabled=e.site.customParams.blockthrough[SM_OBJ.ADS.device].isActive,SM_OBJ.ADS.blockthroughEnabled&&SM_OBJ.ADS.loadBlockthrough()),e.site.customParams.hasOwnProperty("quantumAuctionSettings")&&(SM_OBJ.ADS.useQuantumAuctionClose=e.site.customParams.quantumAuctionSettings.isActive[SM_OBJ.ADS.device],SM_OBJ.ADS.quantumTimeout=e.site.customParams.quantumAuctionSettings.timeout,SM_OBJ.ADS.quantumCPMTargets=e.site.customParams.quantumAuctionSettings.cpmTargets,SM_OBJ.ADS.allSlotBidsDiscount=e.site.customParams.quantumAuctionSettings.allSlotBidsDiscount),"undefined"!=typeof sm_adConfig_override&&sm_adConfig_override.cpmTargets&&sm_adConfig_override.cpmTargets.hasOwnProperty(window.location.hostname)&&(SM_OBJ.ADS.quantumCPMTargets=sm_adConfig_override.cpmTargets[window.location.hostname]),e.site.customParams.hasOwnProperty("singleRequestAuction")&&(SM_OBJ.ADS.singleRequestAuction=e.site.customParams.singleRequestAuction),jQuery.when(window.SM_OBJ.ADS.parametersResolved,window.SM_OBJ.ADS.adsAllowedToRun).done((function(){if(SM_OBJ.ADS.usePostAuction=void 0===e.site.customParams.usePostBid||e.site.customParams.usePostBid,SM_OBJ.ADS.maxBidTTL=void 0!==e.site.customParams.maxBidTTL?e.site.customParams.maxBidTTL:300,SM_OBJ.ADS.providerTimeout=SM_OBJ.ADS.getProviderTimeout(),SM_OBJ.ADS.adxMultiplier=SM_OBJ.ADS.getAdxMultiplier()||1,SM_OBJ.ADS.adxFloor=SM_OBJ.ADS.getAdxFloor(),SM_OBJ.ADS.activeZone=SM_OBJ.ADS.getActiveZone(e.site),SM_OBJ.ADS.bidCaching=SM_OBJ.ADS.enableBidCaching(),SM_OBJ.ADS.skipAdServerRequests=SM_OBJ.ADS.skipAdServerRequest(),SM_OBJ.ADS.customCacheCreative=SM_OBJ.ADS.enableCustomCacheCreative(),SM_OBJ.ADS.useLocalStorageCache=SM_OBJ.ADS.enableLocalStorageCache(),SM_OBJ.ADS.configureRefreshSettings(e),SM_OBJ.ADS.useLocalStorageCache&&SM_OBJ.ADS.getBidPoolFromStorage(),SM_OBJ.ADS.bidCaching&&SM_OBJ.ADS.useLocalStorageCache&&SM_OBJ.ADS.customCacheCreative&&SM_OBJ.ADS.configureCachedBidCreative(),SM_OBJ.ADS.activeZone)if(SM_OBJ.ADS.activeSlots=_objectSpread(_objectSpread({},SM_OBJ.ADS.activeSlots),SM_OBJ.ADS.getActiveZoneSlots(SM_OBJ.ADS.activeZone)),null!=SM_OBJ.ADS.activeSlots&&Object.keys(SM_OBJ.ADS.activeSlots).length>0){SM_OBJ.ADS.setupGPTSettings(),SM_OBJ.ADS.setPrebidSettings(),SM_OBJ.ADS.applyServerBidders(),SM_OBJ.ADS.applyAliasBidders(),e.bidders.amazon&&e.bidders.amazon.isActive&&SM_OBJ.ADS.setAmazonSettings(),SM_OBJ.ADS.defineLazyLoadScrollEvent(),SM_OBJ.ADS.debugLog("complete AUCTION configuration",null,!1),SM_OBJ.ADS.usePostAuction&&SM_OBJ.ADS.configurePostAuctionCreative();var t={slts:SM_OBJ.ADS.mainSlotIds,trigger:"main",timeout:SM_OBJ.ADS.providerTimeout,keyvals:{lazyload:"false",refresh:"false"},isRefresh:!1};pbjs.que.push((function(){if(status){var e={consentManagement:{}};"function"==typeof window.__uspapi&&(e.consentManagement.usp={timeout:100}),"function"==typeof window.__tcfapi&&(e.consentManagement.gdpr={cmpApi:"iab",timeout:8e3,defaultGdprScope:!0}),pbjs.setConfig(e)}try{SM_OBJ.ADS.auctionSetup.resolve()}catch(e){SM_OBJ.ADS.debugLog("fetchConfig",e)}SM_OBJ.ADS.startAuction(t)}))}else{SM_OBJ.ADS.debugLog("no active slots in current zone",SM_OBJ.ADS.activeZone,!1);try{SM_OBJ.SESSION.sendInsightsData("noActiveSlots")}catch(e){SM_OBJ.ADS.debugLog("issue sending insights",e)}}else SM_OBJ.ADS.debugLog("activeZone unknown",SM_OBJ.ADS.activeZone,!1)}))}catch(e){SM_OBJ.ADS.debugLog("setupAuction",e)}},configureRefreshSettings:function(e){try{var t=e.site.customParams.hasOwnProperty("refreshSettings")?e.site.customParams.refreshSettings[SM_OBJ.ADS.device]:null;t&&(SM_OBJ.ADS.refreshDelay=t.hasOwnProperty("refreshDelay")?t.refreshDelay:SM_OBJ.ADS.refreshDelay,SM_OBJ.ADS.refreshViewable=t.hasOwnProperty("isActive")?t.isActive:SM_OBJ.ADS.refreshViewable,SM_OBJ.ADS.refreshViewableOnly=t.hasOwnProperty("refreshViewableOnly")?t.refreshViewableOnly:SM_OBJ.ADS.refreshViewableOnly,SM_OBJ.ADS.refreshViewableInterval=t.hasOwnProperty("interval")?t.interval:SM_OBJ.ADS.refreshViewableInterval),SM_OBJ.ADS.refreshViewable&&SM_OBJ.ADS.handleTabInView()}catch(e){SM_OBJ.ADS.debugLog("configureRefreshSettings",e)}},startAuction:function(e){try{SM_OBJ.ADS.defineCustomTargeting(),t=e,(i=SM_OBJ.ADS.setupNewAuction(t.slts,t.trigger,t.isRefresh)||!1)&&(debugOut("Starting Auction: "+SM_OBJ.ADS.auctionCount+" With Slots",t.slts.toString()),pbjs.que.push((function(){SM_OBJ.ADS.debugLog("start setup prebid adunits - "+i,t.slts,!1),SM_OBJ.ADS.updateSlotRefreshEligibility(t.slts,!1);try{SM_OBJ.ADS.logTiming("auctionStart","auction",i)}catch(e){SM_OBJ.ADS.debugLog("logAuctionStart",e)}SM_OBJ.ADS.defineGPTSlots(t),t.slts.forEach((),SM_OBJ.ADS.sendBidRequests(t.slts,t.timeout,i,t.trigger)})))}catch(e){SM_OBJ.ADS.debugLog("startAuction",e)}var t,i},enableBidCaching:function(){try{var e=!1;return void 0!==SM_OBJ.ADS.adConfig.site.bidCaching?SM_OBJ.ADS.adConfig.site.bidCaching.hasOwnProperty("isActive")&&(e=SM_OBJ.ADS.adConfig.site.bidCaching.isActive):void 0!==SM_OBJ.ADS.adConfig.site.customParams.bidCaching&&SM_OBJ.ADS.adConfig.site.customParams.bidCaching.hasOwnProperty("isActive")&&(e=SM_OBJ.ADS.adConfig.site.customParams.bidCaching.isActive),e}catch(e){return SM_OBJ.ADS.debugLog("enableBidCaching",e),!1}},enableLocalStorageCache:function(){try{var e=!1;return void 0!==SM_OBJ.ADS.adConfig.site.bidCaching?SM_OBJ.ADS.adConfig.site.bidCaching.hasOwnProperty("localStorage")&&(e=SM_OBJ.ADS.adConfig.site.bidCaching.localStorage):void 0!==SM_OBJ.ADS.adConfig.site.customParams.bidCaching&&SM_OBJ.ADS.adConfig.site.customParams.bidCaching.hasOwnProperty("localStorage")&&(e=SM_OBJ.ADS.adConfig.site.customParams.bidCaching.localStorage),e}catch(e){return SM_OBJ.ADS.debugLog("enableLocalStorageCache",e),!1}},enableCustomCacheCreative:function(){try{var e=!1;return void 0!==SM_OBJ.ADS.adConfig.site.bidCaching?SM_OBJ.ADS.adConfig.site.bidCaching.hasOwnProperty("customCreative")&&(e=SM_OBJ.ADS.adConfig.site.bidCaching.customCreative):void 0!==SM_OBJ.ADS.adConfig.site.customParams.bidCaching&&SM_OBJ.ADS.adConfig.site.customParams.bidCaching.hasOwnProperty("customCreative")&&(e=SM_OBJ.ADS.adConfig.site.customParams.bidCaching.customCreative),e}catch(e){return SM_OBJ.ADS.debugLog("enableCustomCacheCreative",e),!1}},handleTabInView:function(){try{document.addEventListener("visibilitychange",(function(){SM_OBJ.ADS.tabInView=!document.hidden})),window.addEventListener("blur",(function(){SM_OBJ.ADS.tabInView=!1})),window.addEventListener("focus",()}catch(e){SM_OBJ.ADS.debugLog("handleTabInView",e)}},setupGPTSettings:function(){try{googletag.cmd.push((function(){SM_OBJ.ADS.debugLog("start GPT PAGE settings",null,!1),SM_OBJ.ADS.setupInjectedSlots(),SM_OBJ.ADS.setNRCustomAttributes(),SM_OBJ.ADS.defineImpressionViewableEvent(),SM_OBJ.ADS.defineSlotRequestedEvent(),SM_OBJ.ADS.defineSlotResponseReceivedEvent(),SM_OBJ.ADS.defineSlotLoadedEvent(),SM_OBJ.ADS.defineSlotHiddenEvent(),SM_OBJ.ADS.defineSlotRenderedEvent(),SM_OBJ.ADS.debugLog("complete GPT PAGE settings",null,!1)}))}catch(e){SM_OBJ.ADS.debugLog("setupGPTSettings",e)}},setPrebidSettings:function(){try{pbjs.que.push((function(){SM_OBJ.ADS.debugLog("start PREBID PAGE settings",null,!1),SM_OBJ.ADS.prebid={},SM_OBJ.ADS.prebid.version=pbjs.version,SM_OBJ.ADS.setupPrebidEventHandlers();var e=SM_OBJ.ADS.adConfig.site.prebidSettings.prebidServer;"disables2s".getParamValue()&&(e.enabled=!1),SM_OBJ.ADS.debugLog("prebid server settings",e,!1),e.enabled?(pbjs.setConfig({s2sConfig:e}),SM_OBJ.ADS.debugLog("prebid server","enabled",!1)):SM_OBJ.ADS.debugLog("prebid server","disabled",!1),pbjs.setConfig({priceGranularity:SM_OBJ.ADS.adConfig.site.prebidSettings.bidIncrements,bidderTimeout:SM_OBJ.ADS.providerTimeout,pageUrl:window.location.href.split("?")[0],enableSendAllBids:!1,userSync:{syncsPerBidder:5},maxRequestsPerOrigin:1,timeoutBuffer:400,disableAjaxTimeout:!0}),SM_OBJ.ADS.adConfig.site.customParams.hasOwnProperty("prebidBidderSequence")?(pbjs.setConfig({bidderSequence:SM_OBJ.ADS.adConfig.site.customParams.prebidBidderSequence}),SM_OBJ.ADS.debugLog("prebid bidder sequence",SM_OBJ.ADS.adConfig.site.customParams.prebidBidderSequence,!1)):(pbjs.setConfig({bidderSequence:"random"}),SM_OBJ.ADS.debugLog("prebid bidder sequence","random",!1));var t=SM_OBJ.ADS.adConfig.site.customParams.prebidUserSync;if(t.enabled){var i={syncDelay:t.syncDelay,syncsPerBidder:t.syncsPerBidder,userIds:t.userIds.map(()};pbjs.setConfig({userSync:i}),SM_OBJ.ADS.debugLog("prebid userSync","enabled",!1)}else SM_OBJ.ADS.debugLog("prebid userSync","disabled",!1);if(pbjs.bidderSettings={standard:{bidCpmAdjustment:function(e,t){try{var i=SM_OBJ.ADS.getBidderByCode(t.bidderCode),a=SM_OBJ.ADS.adConfig.bidders[i],o=e;if(a){var r=a.revShare||1;o=parseFloat(e*r).toFixed(2)}return o}catch(e){SM_OBJ.ADS.debugLog("bidCpmAdjustment",e)}}}},SM_OBJ.ADS.adConfig.site.customParams.hasOwnProperty("prebidBidderSettings")){var a=SM_OBJ.ADS.adConfig.site.customParams.prebidBidderSettings;pbjs.bidderSettings=_objectSpread(_objectSpread({},a),pbjs.bidderSettings)}SM_OBJ.ADS.setupPrebidAnalytics(),SM_OBJ.ADS.debugLog("complete PREBID PAGE settings",null,!1)}))}catch(e){SM_OBJ.ADS.debugLog("setPrebidSettings",e)}},setupPrebidAnalytics:function(){try{if(SM_OBJ.ADS.adConfig.site.customParams.hasOwnProperty("prebidAnalytics")&&SM_OBJ.ADS.adConfig.site.customParams.prebidAnalytics.isActive){var e=SM_OBJ.ADS.adConfig.site.customParams.prebidAnalytics.settings;pbjs.que.push(()}}catch(e){SM_OBJ.ADS.debugLog("setupPrebidAnalytics",e)}},setupPrebidEventHandlers:function(){try{pbjs.onEvent("beforeRequestBids",(function(e){SM_OBJ.ADS.debugLog("handleBeforeBidRequest",e,!1)})),pbjs.onEvent("bidRequested",(function(e){SM_OBJ.ADS.handleBidRequest(e)})),pbjs.onEvent("bidResponse",(function(e){SM_OBJ.ADS.handleBidderResponse(e)})),pbjs.onEvent("bidderDone",(function(e){SM_OBJ.ADS.handleBidderDone(e)})),pbjs.onEvent("auctionDebug",()}catch(e){SM_OBJ.ADS.debugLog("setupPrebidEventHandlers",e)}},handleBidRequest:function(e){try{var t=e.hasOwnProperty("bidderCode")?SM_OBJ.ADS.getBidderByCode(e.bidderCode):null;if(SM_OBJ.ADS.debugLog("PREBID EVENT - bidsRequested from "+t+" for "+e.bids.length.toString()+" placements",e,!1),!e)return!1;if(e.bids){e.bids.forEach((function(e){if(e){var t=e.hasOwnProperty("bidder")?SM_OBJ.ADS.getBidderByCode(e.bidder):null,i=e.params[SM_OBJ.ADS.bidderPlacementKeyMap[t]];"pubmatic"===t&&(i=e.params[SM_OBJ.ADS.bidderPlacementKeyMap[t]].split("@")[0]),"onetag"===t&&(i=(e.params[SM_OBJ.ADS.bidderPlacementKeyMap[t]]||{}).placement_name);var a=e.hasOwnProperty("adUnitCode")?e.adUnitCode:null,o=e.hasOwnProperty("auctionId")?e.auctionId:null,r=t+"||"+SM_OBJ.ADS.slotIdToAdUnitMap[e.adUnitCode]+"||"+i,n=SM_OBJ.ADS.placementIdToTagMap[r],d={auctionId:o,bidder:t,elementId:a,adUnit:n.slotName,size:n.banner.w+"x"+n.banner.h,alias:n.alias,placementId:i,ts:SM_OBJ.SESSION.getTimestamp(),requestId:e.hasOwnProperty("bidId")?e.bidId:null};o&&SM_OBJ.ADS.auctions.hasOwnProperty(o)&&SM_OBJ.ADS.auctions[o].bidRequests.push(d)}}));var i={auctionId:e.hasOwnProperty("auctionId")?e.auctionId:null,bidder:t,count:Array.isArray(e.bids)?e.bids.length:0,data:e};null!==i.auctionId&&SM_OBJ.ADS.auctions.hasOwnProperty(e.auctionId)&&SM_OBJ.ADS.bidders.indexOf(i.bidder)>-1&&SM_OBJ.ADS.auctions[i.auctionId].bidderRequestCounts.push({bidder:i.bidder,count:i.count})}debugOut("Bid Request")}catch(e){SM_OBJ.ADS.debugLog("setupPrebidEventHandlers - bidRequested",e)}},handleBidderResponse:function(e){try{if(SM_OBJ.ADS.debugLog("PREBID EVENT - bidResponse",e,!1),!e)return!1;if(parseFloat(e.cpm)<=0)return!1;var t,i,a,o,r=e.hasOwnProperty("auctionId")?e.auctionId:null,n=null!==r&&SM_OBJ.ADS.auctions.hasOwnProperty(r)?SM_OBJ.ADS.auctions[r]:null,d=e.hasOwnProperty("adUnitCode")&&SM_OBJ.ADS.activeSlots.hasOwnProperty(e.adUnitCode)?SM_OBJ.ADS.activeSlots[e.adUnitCode]:null,s=null!==d&&d.hasOwnProperty("name")?d.name:null,S=null!==d&&d.hasOwnProperty("elementId")?d.elementId:null,l=e.width+"x"+e.height,u=e.hasOwnProperty("bidderCode")?SM_OBJ.ADS.getBidderByCode(e.bidderCode):null,c=e.hasOwnProperty("cpm")?1*parseFloat(e.cpm).toFixed(2):null,g=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("advertiserDomains")?e.meta.advertiserDomains:null,p=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("advertiserName")?e.meta.advertiserName:null,f=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("agencyName")?e.meta.agencyName:null,O=e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("brandName")?e.meta.brandName:null,_=null!==c?1*parseFloat(SM_OBJ.ADS.getPriceBucket(c)).toFixed(2):null,m=u.toUpperCase()+"_"+s.toUpperCase()+"_"+SM_OBJ.ADS.device.toUpperCase()+"_"+l,b=e.adserverTargeting,A=null!==n&&n.hasOwnProperty("bidRequests")?n.bidRequests:null,B="bids",M=!1,h=A.find(();h&&(i=u+"||"+s+"||"+(t=h.placementId.toString()),o=(a=SM_OBJ.ADS.placementIdToTagMap[i]).banner.w+"x"+a.banner.h),b&&(b.bidAuctionId=r,b.placementId=t),"boolean"==typeof n.adserverRequestSent&&n.adserverRequestSent&&(B="lateBids",M=!0);var D=SM_OBJ.ADS.maxBidTTL||60,J={bidAuctionId:r,bidder:u,priceBucket:_,bid:c,adUnit:s,elementId:S,size:l,placementId:t,alias:m,type:B,ttl:e.hasOwnProperty("ttl")?Math.min(e.ttl-10,D):null,requestTimestamp:e.requestTimestamp||null,responseTimestamp:e.responseTimestamp||null,adId:e.hasOwnProperty("adId")?e.adId:null,requestId:e.hasOwnProperty("requestId")?e.requestId:null,requestedSize:o,advertiserName:p,advertiserDomains:g,agencyName:f,brandName:O,lateBid:M};SM_OBJ.ADS.debugLog("logging "+J.type+"($"+J.bid+" - "+(parseInt(J.responseTimestamp)-parseInt(J.requestTimestamp)).toString()+"ms) from "+J.bidder+" for "+J.elementId,J,!1),n[B].push(J);var v=JSON.parse(JSON.stringify(J));v.bidTargeting=b,v.request=h,v.response=e,v.tag=a,v.expired=!1,v.bidUsed=!1,v.postId=SM_OBJ.SESSION.POST_ID,SM_OBJ.ADS.bidPool[s].push(v),SM_OBJ.ADS.useQuantumAuctionClose&&SM_OBJ.ADS.calcQuantumStateNew(S,r),debugOut("Bid Response")}catch(e){SM_OBJ.ADS.debugLog("setupPrebidEventHandlers - bidResponse",e)}},handleBidderDone:function(e){try{if(!e)return!1;var t={auctionId:e.hasOwnProperty("auctionId")?e.auctionId:null,bidder:e.hasOwnProperty("bidderCode")?SM_OBJ.ADS.getBidderByCode(e.bidderCode):null,auctionStart:e.hasOwnProperty("auctionStart")?e.auctionStart:null,bidRequestStart:e.hasOwnProperty("start")?e.start:null,bidderRequestDone:SM_OBJ.SESSION.getTimestamp(),bidderRequestTime:e.hasOwnProperty("start")&&e.hasOwnProperty("auctionStart")?e.start-e.auctionStart:null,bidderResponseTime:e.hasOwnProperty("start")?SM_OBJ.SESSION.getTimestamp()-e.start:null,timeout:e.hasOwnProperty("timeout")?e.timeout:null,data:e};t.hasOwnProperty("auctionId")&&SM_OBJ.ADS.auctions.hasOwnProperty(t.auctionId)&&SM_OBJ.ADS.bidders.indexOf(t.bidder)>-1&&SM_OBJ.ADS.auctions[t.auctionId].timeouts.push({bidder:t.bidder,timeout:t.bidderResponseTime}),SM_OBJ.ADS.debugLog("PREBID EVENT - bidderDone from "+SM_OBJ.ADS.getBidderByCode(e.bidderCode)+" ("+(t.bidderResponseTime-t.bidderRequestTime)+"ms)",e,!1)}catch(e){SM_OBJ.ADS.debugLog("setupPrebidEventHandlers - bidderDone",e)}},calcQuantumStateNew:function(e,t){try{var i=SM_OBJ.ADS.auctions[t];if(!i.adserverRequestSent){i.quantumVars=i.quantumVars||{topBids:{},discount_rate:0,base_discount_rate:0,all_slots_have_bids:!1};var a=i.slots,o=0,r=0;a.forEach((function(e){var a=SM_OBJ.ADS.getHighestSlotBid(e,t),n=SM_OBJ.ADS.slotIdToAdUnitMap[e];if(null!==a){i.quantumVars.topBids[e]=null!==a?a.bid:0;var d=i.quantumVars.topBids[e];r+=d}SM_OBJ.ADS.quantumCPMTargets.hasOwnProperty(n)&&(o+=SM_OBJ.ADS.quantumCPMTargets[n])})),r=Math.floor(100*r)/100,i.quantumVars.base_discount_rate=i.bids.length/i.bidRequests.length;var n=Object.keys(i.quantumVars.topBids).reduce((function(e,t){return e.concat(i.quantumVars.topBids[t])}),[]);n.length===a.length&&(i.quantumVars.all_slots_have_bids=!0,i.quantumVars.discount_rate+=SM_OBJ.ADS.allSlotBidsDiscount);var d=Math.floor(100*(i.quantumVars.base_discount_rate+i.quantumVars.discount_rate))/100;o-=o*d,o=Math.floor(100*o)/100,debugOut("BidR_Calc QS("+SM_OBJ.ADS.auctionCount+") Topbids: "+n.toString()+" Sum of Bids: "+r+" >= RPM_Target: "+o+" | Discount: "+d+" | AdUnits W/ Bids: "+n.length+"/"+a.length),r>=o&&(debugOut("Auction "+SM_OBJ.ADS.auctionCount+" Closed By QuantumCalc"),SM_OBJ.ADS.sendAdserverRequest(a,"Waveform Collapse",t))}}catch(e){SM_OBJ.ADS.debugLog("calcQuantumStateNew",e)}},setAmazonSettings:function(){try{SM_OBJ.ADS.useAmazon=!0,"apstag",window,document,"script"),-1==SM_OBJ.ADS.bidders.indexOf("amazon")&&SM_OBJ.ADS.bidders.push("amazon"),apstag.init({pubID:SM_OBJ.ADS.adConfig.bidders.amazon.siteId,adServer:"googletag",deals:!0})}catch(e){SM_OBJ.ADS.debugLog("setAmazonSettings",e)}},setAmazonUnits:function(e,t){try{var i=[],a=SM_OBJ.ADS.adConfig.bidders.amazon.baseFloor;e.forEach((function(e){if(!SM_OBJ.ADS.amzAds.hasOwnProperty(e)){var t=SM_OBJ.ADS.activeSlots[e],o="/"+SM_OBJ.ADS.adConfig.site.dfpId+"/"+t.name,r={slotID:t.elementId,slotName:o,sizes:t.sizes};try{SM_OBJ.ADS.amzFloors[t.name]=0;var n,d=t.customParams;(n="object"===_typeof(d)&&null!==d&&d.hasOwnProperty("amzFloor")?d.amzFloor:a)>0&&(r.floor={value:100*parseFloat(parseFloat(n).toFixed(2)),currency:"USD"},SM_OBJ.ADS.amzFloors[t.name]=parseFloat(parseFloat(n).toFixed(2)))}catch(e){SM_OBJ.ADS.debugLog("setAmazonUnitFloors",e)}SM_OBJ.ADS.amzAds[e]=r,i.push(r)}})),SM_OBJ.ADS.debugLog("register new amazon adunits - "+t,i,!1)}catch(e){SM_OBJ.ADS.debugLog("setAmazonUnits",e)}},handleAmazonResponse:function(e,t){try{SM_OBJ.ADS.debugLog("amazon response",e,!1);var i=SM_OBJ.ADS.auctions[t],a=i.slots;i.amazonTiming.response=SM_OBJ.SESSION.getTimestamp();var o={bidder:"amazon",timeout:parseInt(i.amazonTiming.response)-parseInt(i.amazonTiming.request)};i.timeouts.hasOwnProperty("amazon")?i.timeouts.amazon=i.timeouts.amazon>o.timeout?i.timeouts.amazon:o.timeout:i.timeouts.amazon=o.timeout;var r=e,n=[];try{r.forEach((function(e){var a=e.targeting;if(""!==a.amzniid){var o,r,d=a.amznbid,s=a.amznsz,S=a.amzniid,l=a.amznp;SM_OBJ.ADS.adConfig.bidders.amazon.alias,SM_OBJ.ADS.device.substring(0,1).toLowerCase();var u=SM_OBJ.ADS.activeSlots[e.slotID];u&&(o=u.name,u.alias,r=u.elementId);var c=SM_OBJ.ADS.amzFloors[o]||.01,g="AMAZON_"+o.toUpperCase()+"_"+SM_OBJ.ADS.device.toUpperCase()+"_"+s,p={az_bid:d,amznbid:d,amzniid:S,amznp:l,amznsz:s,slotID:e.slotID},f="bids",O=!1;"boolean"==typeof i.adserverRequestSent&&i.adserverRequestSent&&(f="lateBids",O=!0);var _={bidAuctionId:t,bidder:"amazon",priceBucket:null,bid:c,adUnit:o,elementId:r,size:s,placementId:"amz_"+o+"_"+s,alias:g,type:f,ttl:30,requestTimestamp:i.amazonTiming.request,responseTimestamp:i.amazonTiming.response,adId:p.amzniid,requestId:t,requestedSize:null,lateBid:O};n.push(_),i[f].push(_),SM_OBJ.ADS.addSlotTargeting(_.elementId,p),SM_OBJ.ADS.debugLog("logging "+_.type+"($"+_.bid+" - "+(parseInt(_.responseTimestamp)-parseInt(_.requestTimestamp)).toString()+"ms) from "+_.bidder+" for "+_.elementId,_,!1);var m=JSON.parse(JSON.stringify(_));m.bidTargeting=p,m.request=null,m.response=e,m.tag=null,m.expired=!1,m.bidUsed=!1,SM_OBJ.ADS.bidPool[o].push(m)}}))}catch(e){SM_OBJ.ADS.debugLog("amazon parse bids",e)}SM_OBJ.ADS.auctions[t].bidsBack.amazon=!0,SM_OBJ.ADS.debugLog("amazon bids",n,!1),SM_OBJ.ADS.sendAdserverRequest(a,"amazon callback",t)}catch(e){SM_OBJ.ADS.debugLog("handleAmazonResponse",e)}},sendAmazonBidRequests:function(e,t,i){try{if(Array.isArray(e)&&e.length>0){SM_OBJ.ADS.auctions[i].amazonTiming={},SM_OBJ.ADS.auctions[i].bidsBack.amazon=!1,SM_OBJ.ADS.setAmazonUnits(e,i);var a=[];e.forEach((function(e){var t=SM_OBJ.ADS.amzAds[e];a.push(t);var o=t.slotName,r=t.sizes[0][0]+"x"+t.sizes[0][1],n={auctionId:i,bidder:"amazon",elementId:e,adUnit:o,size:r,alias:"AMAZON_"+o.toUpperCase()+"_"+SM_OBJ.ADS.device.toUpperCase()+"_"+r,placementId:"amz_"+o+"_"+r,ts:SM_OBJ.SESSION.getTimestamp(),requestId:i};i&&SM_OBJ.ADS.auctions.hasOwnProperty(i)&&SM_OBJ.ADS.auctions[i].bidRequests.push(n)})),SM_OBJ.ADS.debugLog("amazon requested slots",a,!1);var o=void 0!==t?t:SM_OBJ.ADS.providerTimeout;SM_OBJ.ADS.auctions[i].amazonTiming.request=SM_OBJ.SESSION.getTimestamp(),apstag.fetchBids({slots:a,timeout:o},()}}catch(e){SM_OBJ.ADS.debugLog("sendAmazonBidRequests",e)}},sendPrebidBidRequests:function(e,t,i,a){try{if(Array.isArray(e)&&e.length>0){SM_OBJ.ADS.auctions[i].prebidTiming={},SM_OBJ.ADS.setPrebidUnits(e,i,a);var o=void 0!==t?t:SM_OBJ.ADS.providerTimeout,r={timeout:o,adUnitCodes:e,auctionId:i,bidsBackHandler:function(a){SM_OBJ.ADS.auctions[i].adserverRequestSent||(debugOut("Auction "+SM_OBJ.ADS.auctionCount+" Closed By Prebid"),SM_OBJ.ADS.auctions[i].bidsBack.prebid=!0,SM_OBJ.ADS.auctions[i].prebidTiming.response=SM_OBJ.SESSION.getTimestamp(),SM_OBJ.ADS.debugLog("prebid auction complete for auction "+i,a,!1),SM_OBJ.ADS.sendAdserverRequest(e,"prebid callback - "+t,i))}};debugOut("Sending PBJS Bid Requests with Timeout",o),SM_OBJ.ADS.auctions[i].bidsBack.prebid=!1,SM_OBJ.ADS.auctions[i].prebidTiming.request=SM_OBJ.SESSION.getTimestamp(),SM_OBJ.ADS.debugLog("prebid requested slots",e,!1),pbjs.requestBids(r)}}catch(e){SM_OBJ.ADS.debugLog("sendPrebidBidRequests",e)}},sendBidRequests:function(e,t,i,a){try{if(Array.isArray(e)&&e.length>0){var o=void 0!==t?t:SM_OBJ.ADS.providerTimeout;googletag.cmd.push((function(){try{SM_OBJ.ADS.logTiming("bidStart","auction",i)}catch(e){SM_OBJ.ADS.debugLog("log BidStart",e)}SM_OBJ.ADS.debugLog("sendBidRequests - "+i+" - with timeout "+o,e,!1),SM_OBJ.ADS.useAmazon&&SM_OBJ.ADS.sendAmazonBidRequests(e,o,i),SM_OBJ.ADS.useQuantumAuctionClose||SM_OBJ.ADS.setFallbackAdserverRequest(e,o+500,i),SM_OBJ.ADS.sendPrebidBidRequests(e,o,i,a)}))}}catch(e){SM_OBJ.ADS.debugLog("sendBidRequests",e)}},setFallbackAdserverRequest:function(e,t,i){try{var a=void 0!==t?t:SM_OBJ.ADS.providerTimeout;setTimeout((function(){if(!SM_OBJ.ADS.auctions[i].adserverRequestSent){var a=[];e.forEach((function(e){-1===SM_OBJ.ADS.auctions[i].loadedSlots.indexOf(e)&&a.push(e)})),a.length>0&&!SM_OBJ.ADS.auctions[i].adserverRequestSent&&(debugOut("Fallback Auction Closed",SM_OBJ.ADS.auctions),SM_OBJ.ADS.sendAdserverRequest(a,"bid timeout - "+t,i))}}),a)}catch(e){SM_OBJ.ADS.debugLog("setFallbackAdserverRequest",e)}},setupInjectedSlots:function(){try{var e={include:!1,count:0};window.post&&void 0!==post.injectedAds&&post.injectedAds>0&&(e.include=!0,e.count=post.injectedAds),e.include&&SM_OBJ.ADS.getInjectedSlots(e.count)}catch(e){SM_OBJ.ADS.debugLog("setupInjectedSlots",e)}},getInjectedSlots:function(e){try{for(var t=SM_OBJ.ADS.adConfig.site.customParams.injectedSettings.injectedSlotNames[SM_OBJ.ADS.device],i=SM_OBJ.ADS.getAdUnit(t),a=e,o=1;o<=a;o++){var r=JSON.parse(JSON.stringify(i));r&&(r.sizes=r.sizes[SM_OBJ.ADS.device],r.bidProviders=r.bidProviders[SM_OBJ.ADS.device],r.elementId=i.elementId+"-"+o,SM_OBJ.ADS.bidPool.hasOwnProperty(r.name)||(SM_OBJ.ADS.bidPool[r.name]=[]),SM_OBJ.ADS.slotIdToAdUnitMap.hasOwnProperty(r.elementId)||(SM_OBJ.ADS.slotIdToAdUnitMap[r.elementId]=r.name),SM_OBJ.ADS.activeSlots.hasOwnProperty(r.elementId)||(SM_OBJ.ADS.activeSlots[r.elementId]=r,SM_OBJ.ADS.activeSlots[r.elementId].eligibleForRefresh=!1),-1===SM_OBJ.ADS.allSlotIds.indexOf(r.elementId)&&SM_OBJ.ADS.allSlotIds.push(r.elementId),-1===SM_OBJ.ADS.injectedSlotIds.indexOf(r.elementId)&&SM_OBJ.ADS.injectedSlotIds.push(r.elementId),-1===SM_OBJ.ADS.lazySlotIds.indexOf(r.elementId)&&SM_OBJ.ADS.lazySlotIds.push(r.elementId),document.getElementById(r.elementId).style.display="block")}}catch(e){SM_OBJ.ADS.debugLog("getInjectedSlots",e)}},dynamicSlots:{registry:{inpostTop:createDynamicSlot(window.utils.createCounter,(function(){if(SM_OBJ.ADS.adConfig){var e=function(e){return e.mobile&&e.tablet&&e.desktop},t=window.TEXTDOMAIN.toUpperCase(),i=window.utils.capitalize(SM_OBJ.ADS.device.toLowerCase()),a=t+"_"+i+"_InPost_Top/"+t+"_"+i+"_InPost_Top_Infinite",o=JSON.parse(JSON.stringify(SM_OBJ.ADS.getAdUnit(a)));return o.sizes=e(o.sizes)?o.sizes[SM_OBJ.ADS.device]:o.sizes,o.bidProviders=e(o.bidProviders)?o.bidProviders[SM_OBJ.ADS.device]:o.bidProviders,o}return null}),(function(e){SM_OBJ.ADS.registerSlotInCollections(e)})),injected:createDynamicSlot(window.utils.createCounter,(function(){if(SM_OBJ.ADS.adConfig){var e=function(e){return e.mobile&&e.tablet&&e.desktop},t=SM_OBJ.ADS.adConfig.site.customParams.injectedSettings.injectedSlotNames[SM_OBJ.ADS.device],i=JSON.parse(JSON.stringify(SM_OBJ.ADS.getAdUnit(t)));return i.sizes=e(i.sizes)?i.sizes[SM_OBJ.ADS.device]:i.sizes,i.bidProviders=e(i.bidProviders)?i.bidProviders[SM_OBJ.ADS.device]:i.bidProviders,i}return null}),(function(e){SM_OBJ.ADS.registerSlotInCollections(e)})),rightRail:createDynamicSlot(window.utils.createCounter,(function(){if(SM_OBJ.ADS.adConfig){var e=function(e){return e.mobile&&e.tablet&&e.desktop},t=window.TEXTDOMAIN.toUpperCase(),i=window.utils.capitalize(SM_OBJ.ADS.device.toLowerCase()),a=t+"_"+i+"_Right_Rail_Mid/"+t+"_"+i+"_Right_Rail_Mid_Infinite";if(!Object.values(SM_OBJ.ADS.activeSlots).find((function(e){return e.name===a})))return null;var o=JSON.parse(JSON.stringify(SM_OBJ.ADS.getAdUnit(a)));return o.sizes=e(o.sizes)?o.sizes[SM_OBJ.ADS.device]:o.sizes,o.bidProviders=e(o.bidProviders)?o.bidProviders[SM_OBJ.ADS.device]:o.bidProviders,o||null}return null}),(function(e){SM_OBJ.ADS.registerSlotInCollections(e)})),leftRail:createDynamicSlot(window.utils.createCounter,(function(){if(SM_OBJ.ADS.adConfig){var e=function(e){return e.mobile&&e.tablet&&e.desktop},t=window.TEXTDOMAIN.toUpperCase(),i=window.utils.capitalize(SM_OBJ.ADS.device.toLowerCase()),a=t+"_"+i+"_Left_Rail_Mid/"+t+"_"+i+"_Left_Rail_Mid_Infinite";if(!Object.values(SM_OBJ.ADS.activeSlots).find((function(e){return e.name===a})))return null;var o=JSON.parse(JSON.stringify(SM_OBJ.ADS.getAdUnit(a)));return o.sizes=e(o.sizes)?o.sizes[SM_OBJ.ADS.device]:o.sizes,o.bidProviders=e(o.bidProviders)?o.bidProviders[SM_OBJ.ADS.device]:o.bidProviders,o||null}return null}),(function(e){SM_OBJ.ADS.registerSlotInCollections(e)})),inpostMidLeft:createDynamicSlot(window.utils.createCounter,(function(){if(SM_OBJ.ADS.adConfig){var e,t=function(e){return e.mobile&&e.tablet&&e.desktop},i=window.utils.capitalize(SM_OBJ.ADS.device.toLowerCase()),a=window.TEXTDOMAIN.toUpperCase();if(e="Mobile"!==i?a+"_"+i+"_InPost_Mid_Left/"+a+"_"+i+"_InPost_Mid_Left_Infinite":a+"_"+i+"_InPost_Mid/"+a+"_"+i+"_InPost_Mid_Infinite",!Object.values(SM_OBJ.ADS.activeSlots).find((function(t){return t.name===e})))return null;var o=JSON.parse(JSON.stringify(SM_OBJ.ADS.getAdUnit(e)));return o.sizes=t(o.sizes)?o.sizes[SM_OBJ.ADS.device]:o.sizes,o.bidProviders=t(o.bidProviders)?o.bidProviders[SM_OBJ.ADS.device]:o.bidProviders,o||null}return null}),(function(e){SM_OBJ.ADS.registerSlotInCollections(e)})),inpostMidRight:createDynamicSlot(window.utils.createCounter,(function(){if(SM_OBJ.ADS.adConfig){var e=t=window.utils.capitalize(SM_OBJ.ADS.device.toLowerCase()),i=window.TEXTDOMAIN.toUpperCase();if("Mobile"!==t){var a=i+"_"+t+"_InPost_Mid_Right/"+i+"_"+t+"_InPost_Mid_Right_Infinite";if(!Object.values(SM_OBJ.ADS.activeSlots).find((function(e){return e.name===a})))return null;var o=JSON.parse(JSON.stringify(SM_OBJ.ADS.getAdUnit(a)));return o.sizes=e(o.sizes)?o.sizes[SM_OBJ.ADS.device]:o.sizes,o.bidProviders=e(o.bidProviders)?o.bidProviders[SM_OBJ.ADS.device]:o.bidProviders,o||null}return null}return null}),(function(e){SM_OBJ.ADS.registerSlotInCollections(e)}))},lazyGroups:[],runInGroup:function(){var e=[];for(var t in SM_OBJ.ADS.dynamicSlots.registry)e=e.concat(SM_OBJ.ADS.dynamicSlots.registry[t].extractSlotPool());var i=e.map((function(e){return e.elementId}));SM_OBJ.ADS.dynamicSlots.lazyGroups.push(i),e.forEach((function(e){SM_OBJ.ADS.registerSlotInCollections(e)}))}},registerSlotInCollections:function(e){SM_OBJ.ADS.bidPool.hasOwnProperty(e.name)||(SM_OBJ.ADS.bidPool[e.name]=[]),SM_OBJ.ADS.slotIdToAdUnitMap.hasOwnProperty(e.elementId)||(SM_OBJ.ADS.slotIdToAdUnitMap[e.elementId]=e.name),SM_OBJ.ADS.activeSlots.hasOwnProperty(e.elementId)||(SM_OBJ.ADS.activeSlots[e.elementId]=e,SM_OBJ.ADS.activeSlots[e.elementId].eligibleForRefresh=!1),-1===SM_OBJ.ADS.allSlotIds.indexOf(e.elementId)&&SM_OBJ.ADS.allSlotIds.push(e.elementId),-1===SM_OBJ.ADS.injectedSlotIds.indexOf(e.elementId)&&SM_OBJ.ADS.injectedSlotIds.push(e.elementId),-1===SM_OBJ.ADS.lazySlotIds.indexOf(e.elementId)&&SM_OBJ.ADS.lazySlotIds.push(e.elementId),e.refresh&&-1===SM_OBJ.ADS.refreshSlotIds.indexOf(e.elementId)&&SM_OBJ.ADS.refreshSlotIds.push(e.elementId)},obsoleteAdsWatcher:(observedAds=[],listeners=[],adFoundEmitter=Object.freeze({emit:subscribe:function(e){listeners.push(e)},unsubscribe:),Object.freeze({onObsoleteAdDetected:adFoundEmitter.subscribe,observeScrolledAds:function(){var e=document.documentElement,t=4*window.innerHeight,i=window.pageYOffset,a=i+window.innerHeight,o=i||e.scrollTop;observedAds.forEach((function(e){var r=document.getElementById(e);if(r){var n=r.getBoundingClientRect().top,d=Math.round(parseFloat(window.getComputedStyle(r).height)),s=n+o,S=s+d,l=i-t,u=a+t,c=SM_OBJ.ADS.lazySlotQueue.find(();(S<l||s>u)&&(!c||c&&!c.loading)&&SM_OBJ.SESSION.getTimestamp()-SM_OBJ.ADS.lazySlotLoadTimes[e]>=2e3&&adFoundEmitter.emit(e)}}))},addAdToObserve:)),logTiming:function(e,t,i,a){try{var o;"insights"===t?o=SM_OBJ.SESSION.INSIGHTS.timing:"performance"===t?o=SM_OBJ.SESSION.INSIGHTS.performance:"auction"===t&&(o=SM_OBJ.ADS.auctions[i].timing),o.hasOwnProperty(e)||(o[e]=a||SM_OBJ.SESSION.getTimestamp(),SM_OBJ.ADS.debugLog("LOG TIMING - "+e,o[e],!1))}catch(e){SM_OBJ.ADS.debugLog("logTiming",e)}},getBidderByCode:function(e){try{if(void 0===SM_OBJ.ADS.bidderCodeToBidderMap)for(var t in SM_OBJ.ADS.bidderCodeToBidderMap={},SM_OBJ.ADS.adConfig.bidders){var i=SM_OBJ.ADS.adConfig.bidders[t].bidderCode;i&&(SM_OBJ.ADS.bidderCodeToBidderMap[i]=t)}return SM_OBJ.ADS.bidderCodeToBidderMap[e]}catch(e){SM_OBJ.ADS.debugLog("getBidderByCode",e)}},getPriceBucket:function(e){try{var t=SM_OBJ.ADS.adConfig.site.prebidSettings.bidIncrements.buckets,i=0;if(e>=20)i=20..toFixed(2);else if(0==e)i=0;else{var a=t.find(();a&&(i=(Math.round(Math.round(e*(1/a.increment))/(1/a.increment)*100)/100).toFixed(a.precision))}return i.toString()}catch(e){SM_OBJ.ADS.debugLog("getPriceBucket",e)}},sendAdserverRequest:function(e,t,i){try{var a={ready:[],waiting:[],send:!1},o=void 0!==t?t:"bid timeout",r=SM_OBJ.ADS.auctions[i].auctionTrigger;SM_OBJ.ADS.auctions[i].adServerRequestTrigger=o;var n=pbjs&&pbjs.getUserIds?pbjs.getUserIds():{};SM_OBJ.ADS.adConfig.site.customParams.prebidUserSync&&SM_OBJ.ADS.adConfig.site.customParams.prebidUserSync.userIds&&(SM_OBJ.ADS.auctions[i].userIds=SM_OBJ.ADS.adConfig.site.customParams.prebidUserSync.userIds.reduce((function(e,t){var i=t.name,a=t.idPath,o=SM_OBJ.ADS.getPath(n,a);return o&&e.push({provider:i,id:o}),e}),[]));var d=Date.now()-SM_OBJ.ADS.auctions[i].timing.bidStart;for(var s in SM_OBJ.ADS.auctions[i].bidsBack)SM_OBJ.ADS.auctions[i].bidsBack[s]&&-1===a.ready.indexOf(s)?a.ready.push(s):SM_OBJ.ADS.auctions[i].bidsBack[s]||-1!==a.waiting.indexOf(s)||a.waiting.push(s);if(a.ready.length===Object.keys(SM_OBJ.ADS.auctions[i].bidsBack).length&&(a.send=!0),(a.send||o.indexOf("bid timeout")>-1)&&!SM_OBJ.ADS.auctions[i].adserverRequestSent){SM_OBJ.ADS.debugLog(o+" - all bids back from",a.ready,!1),SM_OBJ.ADS.auctions[i].adserverRequestSent=!0;try{SM_OBJ.ADS.logTiming("bidComplete","auction",i)}catch(e){SM_OBJ.ADS.debugLog("log BidComplete",e)}debugOut("Sending Ad Server Request For Auction "+SM_OBJ.ADS.auctionCount),SM_OBJ.ADS.debugLog("SENDING AD SERVER REQUEST for auction "+i+", "+o+" time since request sent = "+d+"ms",e,!1),SM_OBJ.ADS.debugLog("recorded bids for auction - "+i,SM_OBJ.ADS.auctions[i].bids,!1),googletag.cmd.push((function(){try{SM_OBJ.ADS.getHighestBids(e,i)}catch(e){SM_OBJ.ADS.debugLog("getHighestBids",e)}})),googletag.cmd.push((function(){SM_OBJ.ADS.setAdxExclusionTargeting(e,r),SM_OBJ.ADS.setAuctionTargeting(i,t),googletag.pubads().enableAsyncRendering(),SM_OBJ.ADS.singleRequestAuction&&googletag.pubads().enableSingleRequest(),googletag.enableServices()})),googletag.cmd.push((),googletag.cmd.push(()}else SM_OBJ.ADS.debugLog(o+" - Waiting for bids in auction "+i+",  time since request sent = "+d+"ms",[a.waiting,e],!1)}catch(e){SM_OBJ.ADS.debugLog("sendAdserverRequest",e)}},skipAdServerRequest:function(){try{var e=!1;return void 0!==SM_OBJ.ADS.adConfig.site.customParams.skipAdServerRequest&&SM_OBJ.ADS.adConfig.site.customParams.skipAdServerRequest[SM_OBJ.ADS.device].isActive&&(e=100*Math.random()<=SM_OBJ.ADS.adConfig.site.customParams.skipAdServerRequest[SM_OBJ.ADS.device].percent),e}catch(e){SM_OBJ.ADS.debugLog("skipAdServerRequest",e)}},setAdxExclusionTargeting:function(e,t){try{e.forEach((function(e){var i=SM_OBJ.ADS.getAdUnit(SM_OBJ.ADS.slotIdToAdUnitMap[e]),a=!1;if(i&&i.customParams){if(i.customParams.hasOwnProperty("excludeAdx")){var o=i.customParams.excludeAdx,r=!1,n=Math.round(100*Math.random());o.hasOwnProperty(SM_OBJ.SESSION.GEO_COUNTRY)&&o[SM_OBJ.SESSION.GEO_COUNTRY].hasOwnProperty(SM_OBJ.ADS.device)?r=n<=o[SM_OBJ.SESSION.GEO_COUNTRY][SM_OBJ.ADS.device]:"US"!==SM_OBJ.SESSION.GEO_COUNTRY&&o.hasOwnProperty("NON_US")&&o.NON_US.hasOwnProperty(SM_OBJ.ADS.device)?r=n<=o.NON_US[SM_OBJ.ADS.device]:o.hasOwnProperty(SM_OBJ.ADS.device)&&(r=n<=o[SM_OBJ.ADS.device]),a=r}if("interval"===t&&i.customParams.hasOwnProperty("excludeAdxFromRefresh")){var d=i.customParams.excludeAdxFromRefresh,s=!1;d.hasOwnProperty(SM_OBJ.SESSION.GEO_COUNTRY)&&d[SM_OBJ.SESSION.GEO_COUNTRY].hasOwnProperty(SM_OBJ.ADS.device)?s=d[SM_OBJ.SESSION.GEO_COUNTRY][SM_OBJ.ADS.device]:"US"!==SM_OBJ.SESSION.GEO_COUNTRY&&d.hasOwnProperty("NON_US")&&d.NON_US.hasOwnProperty(SM_OBJ.ADS.device)?s=d.NON_US[SM_OBJ.ADS.device]:d.hasOwnProperty(SM_OBJ.ADS.device)&&(s=d[SM_OBJ.ADS.device]),a=s||a}SM_OBJ.ADS.addSlotTargeting(e,{explicit:a.toString()})}}))}catch(e){SM_OBJ.ADS.debugLog("setAdxExclusionTargeting",e)}},getESTHour:function(){try{var e=new Date,t=new Date(e.getTime()+60*e.getTimezoneOffset()*1e3),i=e.isDstObserved()?-144e5:-18e6;return new Date(t.getTime()+i).getHours()}catch(e){SM_OBJ.ADS.debugLog("getESTHour",e)}},setAuctionTargeting:function(e,t){try{var i=SM_OBJ.ADS.getESTHour(),a=SM_OBJ.ADS.auctions[e],o=a.timing.bidComplete-a.timing.bidStart,r=t.replace(/ - /g,"-").replace(/ /,"-");[{key:"sm_target",value:r+"_"+SM_OBJ.SESSION.AUCTION_COUNT+"_"+SM_OBJ.ADS.auctions[e].instance+"_"+SM_OBJ.SESSION.PAGE_DEPTH},{key:"target_hour",value:r+"_"+SM_OBJ.SESSION.PAGE_DEPTH+"_"+o+"_"+i}].forEach((function(e){googletag.pubads().setTargeting(e.key,e.value.toString()),SM_OBJ.ADS.debugLog("defining auction targeting - "+e.key,e.value.toString(),!1)}))}catch(e){SM_OBJ.ADS.debugLog("setAuctionTargeting",e)}},getHighestSlotBid:function(e,t){try{var i=SM_OBJ.ADS.bidPool[SM_OBJ.ADS.slotIdToAdUnitMap[e]],a=null;if(i.length>0&&(i.sort((),i.forEach((function(e){e.responseTimestamp+1e3*e.ttl<Date.now()&&(e.expired=!0),e.bidAuctionId!==t&&e.lateBid&&SM_OBJ.ADS.bidCaching&&!e.bidUsed&&(e.lateBid=!1)})),i.length>0)){var o=i.findIndex((function(e){return SM_OBJ.ADS.bidCaching?!e.bidUsed&&!e.lateBid&&!e.expired:!e.bidUsed&&!e.lateBid&&!e.expired&&e.bidAuctionId===t}));o>-1&&(a=i[o])}return a}catch(e){SM_OBJ.ADS.debugLog("getHighestSlotBid",e)}},getHighestBids:function(e,t){try{if(Array.isArray(e)&&e.length>0){var i=SM_OBJ.ADS.auctions[t].highestBids,a=0;e.forEach((function(e){var a=SM_OBJ.ADS.getHighestSlotBid(e,t);null!==a?(a.bidUsed=!0,a.bidAuctionId!==t&&SM_OBJ.ADS.debugLog("USING CACHED BID FROM "+a.bidAuctionId+" FOR "+t,a,!1),a.auctionId=t,i[e]=a,a.bidTargeting&&SM_OBJ.ADS.addSlotTargeting(e,a.bidTargeting),SM_OBJ.ADS.debugLog("Highest Bid ($"+i[e].bid+") from "+i[e].bidder+" for "+e+" in auction "+t,i[e],!1),a.bid?SM_OBJ.ADS.setDfpFloor(e,t,a.bid):SM_OBJ.ADS.setDfpFloor(e,t),SM_OBJ.ADS.addSlotTargeting(e,{nobids:"n"})):(SM_OBJ.ADS.debugLog("Highest Bid",e+" has no bids",!1),SM_OBJ.ADS.addSlotTargeting(e,{nobids:"y"}),SM_OBJ.ADS.setDfpFloor(e,t)),SM_OBJ.ADS.addSlotTargeting(e,{auctionId:t})})),Object.values(i).forEach((),debugOut("Auction "+SM_OBJ.ADS.auctionCount+" RPM",Math.floor(100*a)/100)}}catch(e){SM_OBJ.ADS.debugLog("getHighestBids",e)}},addSlotTargeting:function(e,t){try{googletag.cmd.push((function(){for(var i in t){var a=i,o=t[i];SM_OBJ.ADS.gptadslots[e].setTargeting(a,o)}}))}catch(e){SM_OBJ.ADS.debugLog("addSlotTargeting",e)}},loadGoogleTagServices:function(){try{var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js",e.id="core-app-gpt-js";var t=document.getElementsByTagName("head")[0];SM_OBJ.ADS.logTiming("gptInit","insights"),t.insertBefore(e,t.firstChild)}catch(e){SM_OBJ.ADS.debugLog("loadGoogleTagServices",e)}},loadPrebid:function(){try{var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src=SM_OBJ.ADS.getProtocol()+document.location.hostname+"/wp-content/themes/genesiscoreapp/Assets/js/library/prebid/prebid.js",e.id="core-app-prebid-js";var t=document.getElementsByTagName("head")[0];SM_OBJ.ADS.logTiming("prebidInit","insights"),t.insertBefore(e,t.firstChild)}catch(e){SM_OBJ.ADS.debugLog("loadPrebid",e)}},loadBlockthrough:function(){try{var e=document.createElement("script"),t="//btloader.com/tag?o=5720506666844160&upapi=true";SM_OBJ.ADS.adConfig.site.customParams.blockthrough.hasOwnProperty("accountId")&&(t="//btloader.com/tag?o="+SM_OBJ.ADS.adConfig.site.customParams.blockthrough.accountId+"&upapi=true"),e.src=t,e.async=!0,document.head.appendChild(e)}catch(e){SM_OBJ.ADS.debugLog("loadBlockthrough",e)}},getProtocol:function(){try{return"https:"==window.location.protocol?"https://":"http://"}catch(e){SM_OBJ.ADS.debugLog("getProtocol",e)}},getProviderTimeout:function(){try{return SM_OBJ.ADS.useQuantumAuctionClose?SM_OBJ.ADS.quantumTimeout:SM_OBJ.ADS.adConfig.site.timeout[SM_OBJ.ADS.device]}catch(e){return SM_OBJ.ADS.debugLog("getProviderTimeout",e),2e3}},getAdxMultiplier:function(){try{return SM_OBJ.ADS.adConfig.site.adxMultiplier[SM_OBJ.ADS.device]}catch(e){return SM_OBJ.ADS.debugLog("getAdxMultiplier",e),1}},getAdUnitAdxMultiplier:function(e){try{var t=SM_OBJ.ADS.getAdUnit(SM_OBJ.ADS.slotIdToAdUnitMap[e]),i=SM_OBJ.ADS.adxMultiplier;if(t&&t.customParams.hasOwnProperty("adxMultiplier")){var a=t.customParams.adxMultiplier;a.hasOwnProperty(SM_OBJ.SESSION.GEO_COUNTRY)&&a[SM_OBJ.SESSION.GEO_COUNTRY].hasOwnProperty(SM_OBJ.ADS.device)?i=a[SM_OBJ.SESSION.GEO_COUNTRY][SM_OBJ.ADS.device]:"US"!==SM_OBJ.SESSION.GEO_COUNTRY&&a.hasOwnProperty("NON_US")&&a.NON_US.hasOwnProperty(SM_OBJ.ADS.device)?i=a.NON_US[SM_OBJ.ADS.device]:a.hasOwnProperty(SM_OBJ.ADS.device)&&(i=a[SM_OBJ.ADS.device])}return i}catch(e){return SM_OBJ.ADS.debugLog("getAdxMultiplier",e),1}},getAdxFloor:function(){try{return SM_OBJ.ADS.adConfig.site.adxFloor[SM_OBJ.ADS.device]||FALLBACK_ADX_FLOOR}catch(e){return SM_OBJ.ADS.debugLog("getAdxFloor",e),FALLBACK_ADX_FLOOR}},getAdUnitAdxFloor:function(e){try{var t,i;return(null===(t=e.customParams)||void 0===t||null===(i=t.adxFloor)||void 0===i?void 0:i[SM_OBJ.ADS.device])||SM_OBJ.ADS.adxFloor}catch(e){return SM_OBJ.ADS.debugLog("getAdxFloor",e),FALLBACK_ADX_FLOOR}},getActiveZone:function(e){try{var t,i=function(e){return e.conditions.reduce((function(e,t){return e>t.rules.length?e:t.rules.length}),0)},a=e.adZones;try{t=a.slice().sort(().find(()}catch(e){SM_OBJ.ADS.debugLog("getActiveZone",e)}return t||(t=a.find((function(e){return e.handle===SM_OBJ.ADS.zone}))),t}catch(e){SM_OBJ.ADS.debugLog("getActiveZone",e);var o=zones.findIndex(();return zones[o]}},getActiveZoneSlots:function(e){try{var t=e.units,i={};return SM_OBJ.ADS.adConfig.units.forEach((function(e){if(t.indexOf(e.alias)>-1&&e.isActive&&e.device.indexOf(SM_OBJ.ADS.device)>-1){var a=e.elementId;SM_OBJ.ADS.bidPool.hasOwnProperty(e.name)||(SM_OBJ.ADS.bidPool[e.name]=[]),SM_OBJ.ADS.slotIdToAdUnitMap.hasOwnProperty(a)||(SM_OBJ.ADS.slotIdToAdUnitMap[a]=e.name),i.hasOwnProperty(a)||(i[a]=e,i[a].sizes=e.sizes[SM_OBJ.ADS.device],i[a].bidProviders=e.bidProviders[SM_OBJ.ADS.device],i[a].eligibleForRefresh=!1),-1===SM_OBJ.ADS.allSlotIds.indexOf(a)&&SM_OBJ.ADS.allSlotIds.push(a),e.lazyLoad&&-1===SM_OBJ.ADS.lazySlotIds.indexOf(a)?SM_OBJ.ADS.lazySlotIds.push(a):e.lazyLoad||-1!==SM_OBJ.ADS.mainSlotIds.indexOf(a)||SM_OBJ.ADS.mainSlotIds.push(a),e.refresh&&-1===SM_OBJ.ADS.refreshSlotIds.indexOf(a)&&SM_OBJ.ADS.refreshSlotIds.push(a)}})),i}catch(e){SM_OBJ.ADS.debugLog("getActiveZoneSlots",e)}},getSlots:function(e){try{var t=[];return e.forEach((),t}catch(e){SM_OBJ.ADS.debugLog("getSlots",e)}},getAdUnit:function(e){try{return SM_OBJ.ADS.adConfig.units.find((function(t){return t.name===e}))}catch(e){SM_OBJ.ADS.debugLog("getAdUnit",e)}},clearSlotTargeting:function(e){try{(void 0!==e?e:SM_OBJ.ADS.allSlotIds).forEach((function(e){var t=e;googletag.cmd.push(()}))}catch(e){SM_OBJ.ADS.debugLog("clearSlotTargeting",e)}},lazySlotPositionCache:function(){var e={};function t(e){var t=0;if(e.offsetParent)do{t+=e.offsetTop,e=e.offsetParent}while(e);return t<0?0:t}function i(e){var i=jQuery("#".concat(e));return{height:i.height(),fromPageTopToElementTop:t(i.parent()[0])}}eturn{get:recalculate:function(){Object.keys(e).forEach((function(t){console.log("recalculating",t);try{e[t]=i(t)}catch(e){a(t)}}))},remove:a}}(),lazyLoadSlots:function(){try{if(!SM_OBJ.ADS.mainSlotsLoaded)return!1;var e=jQuery(window).height(),t=2*e,i=e,a=SM_OBJ.ADS.lazySlotIds,o=[];a.forEach((function(e){if(jQuery("#"+e).length>0){var a=SM_OBJ.ADS.lazySlotPositionCache.get(e),r=a.height,n=a.fromPageTopToElementTop,d=r,s=jQuery(window).scrollTop();if(n<=s+i+t&&n+d>=s-t&&!SM_OBJ.ADS.lazySlotQueue.find((function(t){return t.slotId===e}))){var S=SM_OBJ.ADS.dynamicSlots.lazyGroups.find(();S?S.forEach((function(e){SM_OBJ.ADS.lazySlotQueue.push({slotId:e,loading:!1,loaded:!1,cleared:!1}),SM_OBJ.ADS.obsoleteAdsWatcher.addAdToObserve(e),o.push(e)})):(SM_OBJ.ADS.lazySlotQueue.push({slotId:e,loading:!1,loaded:!1,cleared:!1}),SM_OBJ.ADS.obsoleteAdsWatcher.addAdToObserve(e),o.push(e))}}else SM_OBJ.ADS.debugLog("lazy loading",e+" NOT FOUND. Removing from lazySlots",!1),o.push(e)})),o.forEach((function(e){SM_OBJ.ADS.lazySlotIds.splice(SM_OBJ.ADS.lazySlotIds.indexOf(e),1)})),SM_OBJ.ADS.lazyLoadNextSlotInQueue()}catch(e){SM_OBJ.ADS.debugLog("lazyLoadSlots",e)}},removeLazySlotsThatAreNotOnThePage:function(){SM_OBJ.ADS.lazySlotIds.forEach((function(e){document.getElementById(e)||(console.log("to be removed",e),SM_OBJ.ADS.lazySlotIds.splice(SM_OBJ.ADS.lazySlotIds.indexOf(e),1),SM_OBJ.ADS.lazySlotPositionCache.remove(e))})),SM_OBJ.ADS.lazySlotPositionCache.recalculate()},lazyLoadNextSlotInQueue:function(){try{var e,t,i;!function(){var a=function(e,t){e.find(()||e.push(t)};e=SM_OBJ.ADS.adConfig.site.lazyLoadSettings.timeout[SM_OBJ.ADS.device],t=e||2500,i=SM_OBJ.ADS.lazySlotQueue.filter(();for(var o=[],r=function(e){var t=i[e],r=SM_OBJ.ADS.dynamicSlots.lazyGroups.findIndex((),n=SM_OBJ.ADS.dynamicSlots.lazyGroups[r];if(n?(i.forEach((function(e){n.includes(e.slotId)&&a(o,t)})),SM_OBJ.ADS.dynamicSlots.lazyGroups.splice(r,1)):a(o,t),o.length>=5)return"break"},n=0;n<i.length&&"break"!==r(n);n+=1);o.forEach((function(e){e.loading=!0,e.loadingTime=SM_OBJ.SESSION.getTimestamp()})),0!==o.length&&SM_OBJ.ADS.refreshSlots(o.map((),"lazy load",t)}()}catch(e){SM_OBJ.ADS.debugLog("lazyLoadNextSlotInQueue",e)}},defineInterstitialAdUnit:function(e){try{if(e.customParams.hasOwnProperty("interstitial")){var t=e.customParams.interstitial,i=t[SM_OBJ.ADS.device].isActive,a=t[SM_OBJ.ADS.device].startingSessionDepth<=SM_OBJ.SESSION.PAGE_DEPTH;if(i&&a){SM_OBJ.ADS.interstitialActive=!0;var o=t[SM_OBJ.ADS.device].adUnit,r="/"+e.dfpId+"/"+o;googletag.cmd.push((function(){var e=googletag.defineOutOfPageSlot(r,googletag.enums.OutOfPageFormat.INTERSTITIAL);e&&(SM_OBJ.ADS.gptadslots.interstitial=e,e.addService(googletag.pubads())),googletag.pubads().addEventListener("slotOnload",(function(e){SM_OBJ.ADS.gptadslots.interstitial,e.slot}))}))}}}catch(e){SM_OBJ.ADS.debugLog("defineInterstitialAdUnit",e)}},updateSlotViewability:function(e,t){try{SM_OBJ.ADS.debugLog("updateSlotViewability - ",e+" for auction "+t,!1);var i=SM_OBJ.ADS.auctions[t].bidWins.find(();i&&(i.viewable=!0)}catch(e){SM_OBJ.ADS.debugLog("updateSlotViewability",e)}},setPrebidUnits:function(e,t,i){try{var a=[];e.forEach((function(e){if(-1===pbjs.adUnits.findIndex((function(t){return t.code===e}))){var t=SM_OBJ.ADS.activeSlots[e],i={code:t.elementId,mediaTypes:{banner:{sizes:t.sizes}},bids:SM_OBJ.ADS.getBidderTagsForAdUnit(t),sizes:t.sizes};a.push(i),SM_OBJ.ADS.pbAds[t.elementId]=JSON.parse(JSON.stringify(i)),SM_OBJ.ADS.pbRefreshAds[t.elementId]=SM_OBJ.ADS.removeNonRefreshPrebidBidders(i)}})),pbjs.addAdUnits(a),SM_OBJ.ADS.debugLog("register new prebid adunits - "+t,a,!1),SM_OBJ.ADS.setPrebidUnitBidders(SM_OBJ.ADS.auctions[t].auctionTrigger)}catch(e){SM_OBJ.ADS.debugLog("setPrebidUnits",e)}},fetchEligiblePrebidRefreshBidders:function(e,t){try{var i=JSON.parse(JSON.stringify(e));for(var a in i){var o=i[a].bids;i[a].bids=o.filter(()}return i}catch(e){SM_OBJ.ADS.debugLog("fetchEligiblePrebidRefreshBidders",e)}},updateBidderRefreshIntervals:function(){try{var e=[];for(var t in SM_OBJ.ADS.refreshBidders)SM_OBJ.ADS.refreshBidders[t].hasOwnProperty("lastRefreshTS")?(SM_OBJ.ADS.refreshBidders[t].timeSinceLastRefresh=(Date.now()-SM_OBJ.ADS.refreshBidders[t].lastRefreshTS)/1e3,SM_OBJ.ADS.refreshBidders[t].timeSinceLastRefresh>=SM_OBJ.ADS.refreshBidders[t].interval?(e.push(t),SM_OBJ.ADS.debugLog("updateBidderRefreshIntervals - "+t+" is eligible for refresh",SM_OBJ.ADS.refreshBidders[t],!1),SM_OBJ.ADS.refreshBidders[t].lastRefreshTS=Date.now()):SM_OBJ.ADS.debugLog("updateBidderRefreshIntervals - "+t+" is NOT eligible for refresh",SM_OBJ.ADS.refreshBidders[t],!1)):(SM_OBJ.ADS.refreshBidders[t].lastRefreshTS=Date.now(),e.push(t),SM_OBJ.ADS.debugLog("updateBidderRefreshIntervals - "+t+" is eligible for refresh",SM_OBJ.ADS.refreshBidders[t],!1));return e}catch(e){SM_OBJ.ADS.debugLog("updateBidderRefreshIntervals",e)}},removeNonRefreshPrebidBidders:function(e){try{for(var t=JSON.parse(JSON.stringify(e)),i=t.bids.length-1;i>=0;i-=1){var a=t.bids,o=a[i],r=SM_OBJ.ADS.bidderCodeToBidderMap[o.bidder],n=SM_OBJ.ADS.adConfig.bidders[r].refresh,d=SM_OBJ.ADS.adConfig.bidders[r].customParams.hasOwnProperty("refreshSettings")?SM_OBJ.ADS.adConfig.bidders[r].customParams.refreshSettings[SM_OBJ.ADS.device]:null;d&&(n=d.hasOwnProperty("isActive")?d.isActive:n),n?SM_OBJ.ADS.refreshBidders.hasOwnProperty(r)||(SM_OBJ.ADS.refreshBidders[r]={interval:d&&d.hasOwnProperty("isActive")?d.interval:SM_OBJ.ADS.refreshViewableInterval}):a.splice(i,1)}return t}catch(e){SM_OBJ.ADS.debugLog("removeNonRefreshPrebidBidders",e)}},setPrebidUnitBidders:function(e){try{var t=SM_OBJ.ADS.pbAds,i=SM_OBJ.ADS.updateBidderRefreshIntervals();["interval","refresh all"].includes(e)&&(t=SM_OBJ.ADS.fetchEligiblePrebidRefreshBidders(SM_OBJ.ADS.pbRefreshAds,i)),pbjs.adUnits.forEach(()}catch(e){SM_OBJ.ADS.debugLog("setPrebidUnitBidders",e)}},updateBidderPlacementKeyMap:function(e,t){try{var i=SM_OBJ.ADS.getBidderByCode(e);SM_OBJ.ADS.bidderPlacementKeyMap.hasOwnProperty(i)||(SM_OBJ.ADS.bidderPlacementKeyMap[i]=t)}catch(e){SM_OBJ.ADS.debugLog("updateBidderPlacementKeyMap",e)}},updatePlacementIdToTagMap:function(e,t,i){try{i.bidder=e,i.alias=t;var a=e+"||"+i.slotName+"||"+i.id;SM_OBJ.ADS.placementIdToTagMap.hasOwnProperty(a)||(SM_OBJ.ADS.placementIdToTagMap[a]=i)}catch(e){SM_OBJ.ADS.debugLog("updatePlacementIdToTagMap",e)}},applyServerBidders:function(){var e=[],t=function(t){if(Object.hasOwnProperty.call(SM_OBJ.ADS.adConfig.bidders,t)){var i=SM_OBJ.ADS.adConfig.bidders[t],a=t+"_s2s";!i.customParams.s2s||SM_OBJ.ADS.adConfig.bidders[a]||SM_OBJ.ADS.adConfig.site.customParams.incompatibleS2SBidders&&-1!==SM_OBJ.ADS.adConfig.site.customParams.incompatibleS2SBidders.indexOf(t)||(SM_OBJ.ADS.adConfig.bidders[a]=JSON.parse(JSON.stringify(i)),SM_OBJ.ADS.adConfig.bidders[a].bidderCode=a,"prebid"===i.bidderType&&(e.push(a),pbjs.que.push(()))}};for(var i in SM_OBJ.ADS.adConfig.bidders)t(i);e.length>=0&&pbjs.que.push((function(){pbjs.setConfig({s2sConfig:_objectSpread(_objectSpread({},SM_OBJ.ADS.adConfig.site.prebidSettings.prebidServer),{bidders:e})})}))},applyServerBidProviders:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i];t.push(a),!SM_OBJ.ADS.adConfig.bidders[a].customParams.s2s||SM_OBJ.ADS.adConfig.site.customParams.incompatibleS2SBidders&&-1!==SM_OBJ.ADS.adConfig.site.customParams.incompatibleS2SBidders.indexOf(a)||t.push(a+"_s2s")}return t},applyAliasBidders:function(){SM_OBJ.ADS.adConfig.site.customParams.hasOwnProperty("prebidAliasBidders")&&SM_OBJ.ADS.adConfig.site.customParams.prebidAliasBidders.forEach((function(e){pbjs.que.push(()}))},getBidderTagsForAdUnit:function(e){try{var t=SM_OBJ.ADS.applyServerBidProviders(e.bidProviders),i=[];for(var a in SM_OBJ.ADS.bidders=SM_OBJ.ADS.bidders||[],t){var o=t[a],r=SM_OBJ.ADS.adConfig.bidders[o];if(r.isActive&&"prebid"==r.bidderType){-1===SM_OBJ.ADS.bidders.indexOf(o)&&SM_OBJ.ADS.bidders.push(o);var n=r.bidderCode,d=r.tags;for(var s in d)try{var S={bidder:n},l=d[s];if(l.isActive&&l.device==SM_OBJ.ADS.device&&l.slotName==e.name&&SM_OBJ.ADS.isActiveSize([l.banner.w,l.banner.h],e.sizes)){var u;switch(n){case"33across":case"33across_s2s":S.params={siteId:l.id.toString(),productId:r.customParams.productId.toString()},S.params.siteId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"siteId");break;case"aol":case"aol_s2s":S.params={placement:l.id.toString(),network:r.siteId.toString(),alias:s.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidFloor=u.toString()),SM_OBJ.ADS.adConfig.bidders.aol.bidFloorParam={param:"bidFloor",dataType:"string"},S.params.placement,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placement");break;case"onemobile":case"onemobile_s2s":S.params={pos:l.id.toString(),dcn:r.customParams.dcn[SM_OBJ.ADS.device].toString()},S.params.pos,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"pos");break;case"appnexus_s2s":case"appnexus":S.params={placementId:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.reserve=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.appnexus.bidFloorParam={param:"reserve",dataType:"float"},S.params.placementId,n.indexOf("s2s")>=0&&r.customParams.usePaymentRule?S.params.use_payment_rule=r.customParams.usePaymentRule:-1===n.indexOf("s2s")&&r.customParams.use_payment_rule&&(S.params.usePaymentRule=r.customParams.use_payment_rule),SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"airfind_s2s":case"airfind":S.params={placementId:l.id.toString(),member:r.siteId.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.reserve=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.airfind.bidFloorParam={param:"reserve",dataType:"float"},S.params.placementId,n.indexOf("s2s")>=0&&r.customParams.usePaymentRule?S.params.use_payment_rule=r.customParams.usePaymentRule:-1===n.indexOf("s2s")&&r.customParams.use_payment_rule&&(S.params.usePaymentRule=r.customParams.use_payment_rule),SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"conversant":case"conversant_s2s":S.params={site_id:r.siteId.toString(),secure:parseInt(r.customParams.secure),tag_id:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.conversant.bidFloorParam={param:"bidfloor",dataType:"float"},S.params.tag_id,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"tag_id");break;case"criteo":case"criteo_s2s":S.params={networkId:parseInt(l.id)},S.params.networkId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"networkId");break;case"districtm":case"districtm_s2s":case"kargo":case"kargo_s2s":S.params={placementId:l.id.toString()},S.params.placementId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"districtmDMX":case"districtmDMX_s2s":S.params={dmxid:parseInt(l.id),memberid:parseInt(r.siteId)},S.params.dmxid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"dmxid");break;case"emx_digital":case"emx_digital_s2s":S.params={tagid:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=u.toString()),SM_OBJ.ADS.adConfig.bidders.emx_digital.bidFloorParam={param:"bidfloor",dataType:"string"},S.params.tagid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"tagid");break;case"gumgum":case"gumgum_s2s":S.params={zone:l.customParams.trackingId.toString(),slot:parseInt(l.id)},S.params.inSlot,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"inSlot");break;case"ix":case"ix_s2s":S.params={siteId:l.id.toString(),sizes:[l.banner.w,l.banner.h]},S.params.siteId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"siteId");break;case"medianet":case"medianet_s2s":S.params={cid:r.siteId.toString(),crid:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.medianet.bidFloorParam={param:"bidfloor",dataType:"float"},S.params.crid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"crid");break;case"openx":case"openx_s2s":S.params={unit:l.id.toString(),delDomain:r.customParams.scriptPath.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.customFloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.openx.bidFloorParam={param:"customFloor",dataType:"float"},S.params.unit,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"unit");break;case"pubmatic":case"pubmatic_s2s":S.params={publisherId:r.siteId.toString(),adSlot:l.id+"@"+l.banner.w+"x"+l.banner.h},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.kadfloor=u.toString()),SM_OBJ.ADS.adConfig.bidders.pubmatic.bidFloorParam={param:"kadfloor",dataType:"string"},S.params.adSlot,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"adSlot");break;case"pulsepoint":case"pulsepoint_s2s":S.params={ct:parseInt(l.id),cf:l.banner.w+"x"+l.banner.h,cp:parseInt(r.siteId)},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.pulsepoint.bidFloorParam={param:"bidfloor",dataType:"float"},S.params.ct,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"ct");break;case"rubicon":case"rubicon_s2s":S.params={accountId:r.customParams.accountId.toString(),siteId:r.siteId.toString(),zoneId:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.floor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.rubicon.bidFloorParam={param:"floor",dataType:"float"},S.params.zoneId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"zoneId");break;case"sharethrough":case"sharethrough_s2s":S.params={pkey:l.id},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.sharethrough.bidFloorParam={param:"bidfloor",dataType:"float"},S.params.pkey,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"pkey");break;case"sonobi":case"sonobi_s2s":S.params={placement_id:l.id,ad_unit:"/"+SM_OBJ.ADS.adConfig.site.dfpId+"/"+e.name,sizes:[[l.banner.w,l.banner.h]]},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.floor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.sonobi.bidFloorParam={param:"floor",dataType:"float"},S.params.placement_id,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placement_id");break;case"sovrn":case"sovrn_s2s":S.params={tagid:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=u.toString()),SM_OBJ.ADS.adConfig.bidders.sovrn.bidFloorParam={param:"bidfloor",dataType:"string"},S.params.tagid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"tagid");break;case"nextMillennium":case"nextMillennium_s2s":S.params={placement_id:parseInt(l.id)},S.params.placement_id,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placement_id");break;case"teads":case"teads_s2s":S.params={pageId:parseInt(l.customParams.pageId),placementId:parseInt(l.id)},S.params.placementId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"taboola":case"taboola_s2s":S.params={publisherId:r.siteId.toString(),tagId:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.taboola.bidFloorParam={param:"bidfloor",dataType:"float"},S.params.inventoryCode,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"tagId");break;case"triplelift":case"triplelift_s2s":S.params={inventoryCode:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.floor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.triplelift.bidFloorParam={param:"floor",dataType:"float"},S.params.inventoryCode,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"inventoryCode");break;case"trustx":case"trustx_s2s":S.params={uid:parseInt(l.id)},S.params.uid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"uid");break;case"underdogmedia":case"underdogmedia_s2s":S.params={siteId:l.id.toString()},S.params.siteId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"siteId");break;case"undertone":case"undertone_s2s":S.params={placementId:l.id.toString(),publisherId:parseInt(r.siteId)},S.params.placementId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"vidazoo":case"vidazoo_s2s":S.params={cId:l.id.toString(),pId:r.siteId.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidFloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.vidazoo.bidFloorParam={param:"bidFloor",dataType:"float"},S.params.cId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"cId");break;case"yieldmo":case"yieldmo_s2s":S.params={placementId:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidFloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.yieldmo.bidFloorParam={param:"bidFloor",dataType:"float"},S.params.placementId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"amx":case"amx_s2s":S.params={adUnitId:l.id.toString(),tagId:r.siteId.toString()},"adaptmx"==="test".getParamValue()&&(S.params.testMode=!0,S.params.tagId="cHJlYmlkLm9yZw"),S.params.adUnitId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"adUnitId");break;case"adagio":case"adagio_s2s":S.params={placement:l.id.toString(),organizationId:r.siteId.toString(),site:r.customParams.site.toString(),adUnitElementId:e.elementId.toString()},SM_OBJ.SESSION&&(S.params.pagetype=SM_OBJ.SESSION.PAGE_TYPE,S.params.environment=SM_OBJ.SESSION.DEVICE_TYPE);try{var c=e.name.split("_"),g=c[c.length-1].toLowerCase();["paginated","dynamic","infinite"].indexOf(g)>-1?S.params.category=g:S.params.category="paginated"}catch(e){SM_OBJ.ADS.debugLog("getBidderTagsForAdUnit.adagio",e)}S.params.placement,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placement");break;case"grid":case"grid_s2s":S.params={uid:parseInt(l.id)},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidFloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.mediagrid.bidFloorParam={param:"bidFloor",dataType:"float"},S.params.uid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"uid");break;case"minutemedia":S.params={placementId:l.id.toString(),org:r.siteId.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.floorPrice=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.minutemedia.bidFloorParam={param:"floorPrice",dataType:"float"},S.params.placementId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"onetag":case"onetag_s2s":S.params={pubId:r.siteId.toString(),ext:{placement_name:l.id.toString()}},S.params.ext.placement_name,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"ext");break;case"consumable":case"consumable_s2s":S.params={siteId:parseInt(r.siteId),networkId:parseInt(r.customParams.networkId),unitId:parseInt(l.id),unitName:l.customParams.unitName.toString()},S.params.unitId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"unitId");break;case"kueezrtb":S.params={cId:l.id.toString(),pId:r.siteId.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidFloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.kueez.bidFloorParam={param:"bidFloor",dataType:"float"},S.params.cId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"cId");break;case"rise":S.params={placementId:l.id.toString(),org:r.siteId.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.floorPrice=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.rise.bidFloorParam={param:"floorPrice",dataType:"float"},S.params.placementId,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId");break;case"zeta_global_ssp":S.params={sid:r.siteId.toString(),shortname:r.customParams.shortname.toString(),tagid:l.id.toString()},u=parseFloat(l.baseFloor)>0?l.baseFloor:parseFloat(r.baseFloor)>0?r.baseFloor:0,parseFloat(u)>0&&(S.params.bidfloor=parseFloat(u)),SM_OBJ.ADS.adConfig.bidders.zeta.bidFloorParam={param:"bidfloor",dataType:"float"},S.params.tagid,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"tagid");break;default:S.params={},l.id,SM_OBJ.ADS.updateBidderPlacementKeyMap(n,"placementId")}SM_OBJ.ADS.updatePlacementIdToTagMap(o,s,l),i.push(S)}}catch(e){SM_OBJ.ADS.debugLog("getBidderTagsForAdUnit",e)}}}return SM_OBJ.ADS.activeBidders=SM_OBJ.ADS.bidders,i}catch(e){SM_OBJ.ADS.debugLog("getBidderTagsForAdUnit",e)}},isActiveSize:function(e,t){try{var i=JSON.stringify(e);return t.some(()}catch(e){SM_OBJ.ADS.debugLog("isActiveSize",e)}},defineGPTSlots:function(e){try{(e&&"main"===e.trigger||"refresh all"===e.trigger)&&SM_OBJ.ADS.defineInterstitialAdUnit(SM_OBJ.ADS.adConfig.site),googletag.cmd.push((function(){e.slts.forEach((function(e){-1===SM_OBJ.ADS.slots.indexOf(e)&&SM_OBJ.ADS.slots.push(e);var t=SM_OBJ.ADS.activeSlots[e];if(t&&!SM_OBJ.ADS.gptadslots.hasOwnProperty(e)){SM_OBJ.ADS.gptadslots[e]=googletag.defineSlot("/"+SM_OBJ.ADS.adConfig.site.dfpId+"/"+t.name,t.sizes,t.elementId).addService(googletag.pubads());var i={adUnit:t.name,elementId:t.elementId,gptSlot:SM_OBJ.ADS.gptadslots[e]};SM_OBJ.ADS.debugLog("defined GPT slot - "+t.elementId,i,!1)}}))}))}catch(e){SM_OBJ.ADS.debugLog("defineGPTSlots",e)}},loadAdUnits:function(e,t,i){try{if(Array.isArray(e)&&e.length>0){var a=[],o=[];e.forEach((function(e){-1===SM_OBJ.ADS.auctions[t].loadedSlots.indexOf(e)&&(SM_OBJ.ADS.auctions[t].loadedSlots.push(e),a.push(SM_OBJ.ADS.gptadslots[e]),o.push(e));try{!SM_OBJ.ADS.mainSlotsLoaded&&SM_OBJ.ADS.mainSlotIds.indexOf(e)>-1&&(SM_OBJ.ADS.mainSlotsLoaded=!0)}catch(e){SM_OBJ.ADS.debugLog("loadAdUnits - update lazySlotQueue",e)}SM_OBJ.ADS.updateQueuedLazySlotStatus(e)})),!SM_OBJ.ADS.interstitialLoaded&&SM_OBJ.ADS.interstitialActive&&(SM_OBJ.ADS.interstitialLoaded=!0,googletag.cmd.push((function(){a.push(SM_OBJ.ADS.gptadslots.interstitial),o.push("interstitial")}))),googletag.cmd.push((function(){SM_OBJ.ADS.debugLog("send ad server requests for "+o.toString()+" in auction "+t,a,!1),SM_OBJ.ADS.logTiming("gptRequestStart","auction",t),"refresh all"===i||e.length===SM_OBJ.ADS.allSlotIds.length?SM_OBJ.ADS.skipAdServerRequests?SM_OBJ.ADS.loadDisplay(t):googletag.pubads().refresh():SM_OBJ.ADS.skipAdServerRequests?SM_OBJ.ADS.loadDisplay(t,a):googletag.pubads().refresh(a)}))}}catch(e){SM_OBJ.ADS.debugLog("loadAdUnits",e)}},loadPrebidAd:function(e,t){try{var i=document.getElementById(e);if(i){var a=document.createElement("iframe");a.frameBorder="0",i.appendChild(a),pbjs.renderAd(a.contentWindow.document,t)}}catch(e){SM_OBJ.ADS.debugLog("loadPrebidAd",e)}},loadAmazonAd:function(e,t){try{var i=SM_OBJ.ADS.gptadslots[e].getTargetingMap()||{},a=JSON.stringify(i),o=document.getElementById(e);if(o){var r=document.createElement("iframe");r.frameBorder="0";var n=document.createElement("script"),d="var kvBidObject={kvMap:JSON.parse('"+a+"'),url:'"+document.location.href+"',bidType:'openAuction',cv:'v3.0.1'};function _apstagRenderCallback(a){for(var e=window,n=0;n<5;){if((e=a.ampEnv||a.sfEnv?window:e.parent).apstag)try{n=5,e.apstag.renderImp(document,'"+t+"',a)}catch(a){}n++}}function _isAmp(){return window.AMP_CONTEXT_DATA&&'AMP-AD'===window.AMP_CONTEXT_DATA.tagName}function _isSf(){try{return window.$sf&&typeof window.$sf.ext!=='undefined'}catch(e){return false}}kvBidObject.ampEnv=_isAmp();kvBidObject.sfEnv=_isSf();if(kvBidObject.ampEnv||kvBidObject.sfEnv){var apstagUrl='//c.amazon-adsystem.com/aax2/apstag.js',s=document.createElement('script');s.onload=function(){_apstagRenderCallback(kvBidObject)},s.src=apstagUrl,window.document.head.appendChild(s)}else _apstagRenderCallback(kvBidObject);";n.innerHTML=d,o.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.write("<html><head><title>Custom Amazon Render Code</title></head><body style='margin:0 !important'></body></html>"),r.contentWindow.document.getElementsByTagName("body")[0].appendChild(n),r.contentWindow.document.close()}}catch(e){SM_OBJ.ADS.debugLog("loadAmazonAd",e)}},loadDisplay:function(e,t){try{if(e){var i=SM_OBJ.ADS.auctions[e],a=t?t.map(():i.slots,o=i.highestBids;!1===i.adserverResponseReceived&&(i.adserverResponseReceived=!0,SM_OBJ.ADS.logTiming("gptRequestComplete","auction",e),SM_OBJ.ADS.resetRefreshInterval()),a.forEach((function(t){console.log("ADSERVERLESS RENDER FOR "+t),o.hasOwnProperty(t)?(SM_OBJ.ADS.renderWinningAd(t,o[t]),SM_OBJ.ADS.logWinningBid(e,t,o[t])):(SM_OBJ.ADS.renderFallbackAd(t),SM_OBJ.ADS.logWinningBid(e,t)),i.adLoads++,SM_OBJ.ADS.singleRequestAuction?i.adLoads===i.slots.length&&SM_OBJ.ADS.completeAndLogAuction(e):SM_OBJ.ADS.completeAndLogAuction(e)})),setTimeout((,1e3*SM_OBJ.ADS.refreshDelay)}}catch(e){SM_OBJ.ADS.debugLog("loadDisplay",e)}},logWinningBid:function(e,t,i){try{var a=SM_OBJ.ADS.auctions[e],o=SM_OBJ.ADS.activeSlots[t],r=i&&i.hasOwnProperty("bidder")?i.bidder:"isEmpty",n=i&&i.hasOwnProperty("adId")?i.adId:null,d=i&&i.hasOwnProperty("size")?i.size:o.sizes[0][0]+"x"+o.sizes[0][1],s=r.toUpperCase()+"_"+o.name.toUpperCase()+"_"+SM_OBJ.ADS.device.toUpperCase()+"_"+d,S=SM_OBJ.ADS.gptadslots[t].getTargetingMap(),l=SM_OBJ.ADS.convertBidTargetingToKeyValueArray(S),u=i&&i.hasOwnProperty("placementId")?i.placementId:null,c=i&&i.hasOwnProperty("bid")?i.bid:0,g=SM_OBJ.ADS.getAdUnitAdxMultiplier(t)||SM_OBJ.ADS.adxMultiplier,p=SM_OBJ.ADS.getAdUnitAdxFloor(SM_OBJ.ADS.activeSlots[t]),f=SM_OBJ.SESSION.guid(),O=i&&i.hasOwnProperty("bidAuctionId")?i.bidAuctionId:e,_=i&&i.hasOwnProperty("priceBucket")?parseFloat(i.priceBucket).toFixed(2):null,m=SM_OBJ.ADS.dfpFloors.hasOwnProperty(t)?SM_OBJ.ADS.dfpFloors[t]:"object"==_typeof(S)&&S.hasOwnProperty("dfpFloor")?S.dfpFloor:p,b=i&&i.hasOwnProperty("advertiserName")?i.advertiserName:null,A=i&&i.hasOwnProperty("advertiserDomains")?i.advertiserDomains:null,B=i&&i.hasOwnProperty("agencyName")?i.agencyName:null,M=i&&i.hasOwnProperty("brandName")?i.brandName:null,h={auctionId:e,bidder:r,bid:parseFloat(c).toFixed(2)/1,adUnit:o.name,elementId:t,size:d,placementId:u,alias:s,bidTargeting:l,type:"bidWins",value:parseFloat(c).toFixed(2)/1e3,isNative:!1,viewable:!1,dfpFloor:m,priceBucket:_,bidAuctionId:O,trigger:a.auctionTrigger,adId:n,cachedBid:O!==e,postBid:!1,id:f,ts:SM_OBJ.SESSION.getTimestamp(),advertiserName:b,advertiserDomains:A,agencyName:B,brandName:M,GAMAdvertiserId:null,GAMyieldGroupIds:null,adxMultiplier:g};SM_OBJ.ADS.debugLog("logging bidWins ($"+h.bid+") from "+h.bidder+" for "+h.elementId,h,!1),a.bidWins.push(h);var D=h.value,J=1;SM_OBJ.SESSION.hasOwnProperty("revCoeff")&&(J+=SM_OBJ.SESSION.revCoeff),h.rpsCoeff=J,SM_OBJ.ADS.revCoeffEnabled()&&(D*=J),SM_OBJ.SESSION.conversionTracker.updateRevenue(D),SM_OBJ.ADS.logNRPageAction("bidWin",h)}catch(e){SM_OBJ.ADS.debugLog("logWinningBid",e)}},renderFallbackAd:function(e){try{console.log("NO BIDS. RENDERING FALLBACK AD FOR "+e);var t=document.getElementById(e);if(t){var i=document.createElement("iframe");i.frameBorder="0",t.appendChild(i)}}catch(e){SM_OBJ.ADS.debugLog("renderFallbackAd",e)}},renderWinningAd:function(e,t){try{var i=t.bidder,a=t.adId;"amazon"===i?SM_OBJ.ADS.loadAmazonAd(e,a):SM_OBJ.ADS.loadPrebidAd(e,a)}catch(e){SM_OBJ.ADS.debugLog("renderWinningAd",e)}},isInViewport:function(e){try{var t=document.getElementById(e);if(t){var i=this.getOffset(t);return null!=e&&i.top<window.pageYOffset+window.innerHeight&&i.left<window.pageXOffset+window.innerWidth&&i.top+t.offsetHeight>window.pageYOffset&&i.left+t.offsetWidth>window.pageXOffset}return!1}catch(e){return SM_OBJ.ADS.debugLog("isInViewport",e),!1}},getOffset:function(e){try{return null===e?{left:0,top:0}:{left:(e=e.getBoundingClientRect()).left+window.pageXOffset,top:e.top+window.pageYOffset}}catch(e){SM_OBJ.ADS.debugLog("getOffset",e)}},updateSlotRefreshEligibility:function(e,t){try{e.forEach((function(e){SM_OBJ.ADS.activeSlots[e].eligibleForRefresh=t,SM_OBJ.ADS.debugLog("set refresh eligibility for "+e+" to "+t,null,!1)}))}catch(e){SM_OBJ.ADS.debugLog("updateSlotRefreshEligibility",e)}},updateQueuedLazySlotStatus:function(e){try{if(SM_OBJ.ADS.lazySlotQueue.length>0){var t=SM_OBJ.ADS.lazySlotQueue.findIndex((function(t){return t.slotId===e}));if(t>-1){var i=SM_OBJ.SESSION.getTimestamp();SM_OBJ.ADS.lazySlotQueue[t].loaded=!0,SM_OBJ.ADS.lazySlotQueue[t].loadTime=i,SM_OBJ.ADS.lazySlotLoadTimes[SM_OBJ.ADS.lazySlotQueue[t].slotId]=i,SM_OBJ.ADS.lazySlotQueue[t].loading=!1}SM_OBJ.ADS.lazySlotQueue=SM_OBJ.ADS.lazySlotQueue.filter(()}}catch(e){SM_OBJ.ADS.debugLog("updateQueuedLazySlotStatus",e)}},displayCreatives:function(e){try{if(Array.isArray(e)&&e.length>0){SM_OBJ.ADS.debugLog("displayCreatives",e,!1);var t=!1;e.forEach((function(e){var i=e;googletag.cmd.push((function(){googletag.display(SM_OBJ.ADS.gptadslots[i])}));var a="#"+e,o=document.querySelector(a);o?(o.classList.add("active"),a.indexOf("adhesion")>-1&&(t=!0),o.closest(".mvp_ad_widget")&&o.closest(".mvp_ad_widget").classList.add("active"),SM_OBJ.ADS.debugLog("displaying creative for "+e,null,!1)):SM_OBJ.ADS.debugLog("can't display missing div "+e,null)})),t&&SM_OBJ.ADS.addAdhesion(),!SM_OBJ.ADS.interstitialDisplayed&&SM_OBJ.ADS.interstitialActive&&(SM_OBJ.ADS.interstitialDisplayed=!0,googletag.cmd.push(())}}catch(e){SM_OBJ.ADS.debugLog("displayCreatives",e)}},defineCustomTargeting:function(){try{googletag.cmd.push((function(){var e=[{key:"sess_depth",value:SM_OBJ.SESSION.PAGE_DEPTH,fallback:"undefined"},{key:"utm_source",value:SM_OBJ.SESSION.SOURCE,fallback:"direct"},{key:"utm_camp",value:SM_OBJ.SESSION.CAMPAIGN,fallback:"undefined"},{key:"utm_medium",value:SM_OBJ.SESSION.MEDIUM,fallback:"undefined"},{key:"utm_term",value:SM_OBJ.SESSION.TERM,fallback:"undefined"},{key:"utm_cont",value:SM_OBJ.SESSION.CONTENT,fallback:"undefined"},{key:"test",value:SM_OBJ.SESSION.TEST,fallback:"undefined"},{key:"spadid",value:SM_OBJ.SESSION.spadid,fallback:"undefined"},{key:"spcid",value:SM_OBJ.SESSION.spcid,fallback:"undefined"},{key:"sppubid",value:SM_OBJ.SESSION.sppubid,fallback:"undefined"},{key:"pp",value:SM_OBJ.SESSION.pp,fallback:"undefined"},{key:"spadgid",value:SM_OBJ.SESSION.spadgid,fallback:"undefined"},{key:"spcampid",value:SM_OBJ.SESSION.spcampid,fallback:"undefined"},{key:"spir",value:SM_OBJ.SESSION.spir,fallback:"undefined"},{key:"spcardid",value:SM_OBJ.SESSION.spcardid,fallback:"undefined"},{key:"spacct",value:SM_OBJ.SESSION.spacct,fallback:"undefined"},{key:"spsecid",value:SM_OBJ.SESSION.spsecid,fallback:"undefined"},{key:"spap",value:SM_OBJ.SESSION.spap,fallback:"undefined"},{key:"page_type",value:SM_OBJ.SESSION.PAGE_TYPE,fallback:"undefined"},{key:"page_format",value:SM_OBJ.SESSION.PAGE_FORMAT,fallback:"undefined"},{key:"page_options",value:SM_OBJ.SESSION.PAGE_OPTIONS,fallback:"undefined"},{key:"tag",value:SM_OBJ.SESSION.TAGS,fallback:"undefined"},{key:"post_id",value:SM_OBJ.SESSION.POST_ID,fallback:"undefined"},{key:"explicit",value:SM_OBJ.SESSION.IS_EXPLICIT,fallback:"false"},{key:"post_slug",value:SM_OBJ.SESSION.POST_SLUG,fallback:"undefined"},{key:"site",value:SM_OBJ.SESSION.SITE,fallback:"undefined"},{key:"browser_size",value:SM_OBJ.SESSION.BROWSER_SIZE,fallback:"undefined"},{key:"fblogin",value:SM_OBJ.SESSION.FBLOGIN,fallback:"false"}];try{var t=[],i=[];SM_OBJ.ADS.experiments.forEach((),e.push({key:"variants",value:t,fallback:"no variant"}),e.push({key:"experiments",value:i,fallback:"no experiment"})}catch(e){SM_OBJ.ADS.debugLog("defineCustomExperimentTargeting",e)}try{var a=SM_OBJ.ADS.getESTHour();e.push({key:"hour",value:a.toString(),fallback:"undefined"}),e.push({key:"h_spcampid",value:a.toString()+"_"+SM_OBJ.SESSION.spcampid,fallback:"undefined"})}catch(e){SM_OBJ.ADS.debugLog("defineCustomCurrentHour",e)}e.forEach((function(e){void 0!==e.value?(googletag.pubads().setTargeting(e.key,e.value.toString()),SM_OBJ.ADS.debugLog("defining custom targeting - "+e.key,e.value.toString(),!1)):(googletag.pubads().setTargeting(e.key,e.fallback.toString()),SM_OBJ.ADS.debugLog("defining custom targeting - "+e.key,e.fallback.toString(),!1))})),SM_OBJ.ADS.debugLog("defining custom targeting",e,!1)}))}catch(e){SM_OBJ.ADS.debugLog("defineCustomTargeting",e)}},setDfpFloor:function(e,t,i){try{var a=0,o=SM_OBJ.ADS.getAdUnitAdxFloor(SM_OBJ.ADS.activeSlots[e]),r=SM_OBJ.ADS.getAdUnitAdxMultiplier(e)||SM_OBJ.ADS.adxMultiplier,n=SM_OBJ.ADS.auctions[t].bids,d=null!==(i=void 0!==i?i:null)&&i*r>o?i*r:o,s=SM_OBJ.ADS.activeSlots[e],S=SM_OBJ.ADS.getESTHour();try{a=d<=.01?1:d<=.05?Math.ceil(Math.ceil(100*d)/100*100):d<=3?Math.ceil(Math.ceil(d*(100/3))/(100/3)*100):d>3&&d<=6?Math.ceil(Math.ceil(d*(100/6))/(100/6)*100):d>6&&d<=10?Math.ceil(Math.ceil(5*d)/5*100):d>10&&d<=20?Math.ceil(Math.ceil(2*d)/2*100):d>20&&d<=40?5*Math.ceil(d/5)*100:d>40&&d<50?10*Math.ceil(d/10)*100:d>=50?5e3:100*o;var l={adUnit:s.name,elementId:e,highestBid:i,adxMultiplier:r,dfpFloor:a,adUnitBids:n,adxFloor:o};SM_OBJ.ADS.debugLog("dfpFloor set ($"+a/100+") for "+e+" in auction "+t,l,!1),SM_OBJ.ADS.dfpFloors[e]=a}catch(t){SM_OBJ.ADS.debugLog("dfpFloor error",t,!1),a=100*o,SM_OBJ.ADS.dfpFloors[e]=a}SM_OBJ.ADS.addSlotTargeting(s.elementId,{dfpFloor:a}),SM_OBJ.ADS.addSlotTargeting(s.elementId,{dfpfloor_hour:a+"_"+S})}catch(e){SM_OBJ.ADS.debugLog("setDfpFloor",e)}},addAdhesion:function(){try{var e=document.querySelector(".adhesion-container");document.querySelector(".adhesion-container #hide-btn").onclick=e.classList.add("show")}catch(e){SM_OBJ.ADS.debugLog("addAdhesion",e)}},defineLazyLoadScrollEvent:function(){try{var e=function(e){return function(t){var i=!0;return function(){i&&(t.apply(null,arguments),i=!1,setTimeout((,e))}}},t=e(400),i=e(200),a=t(SM_OBJ.ADS.obsoleteAdsWatcher.observeScrolledAds),o=i(SM_OBJ.ADS.lazyLoadSlots);jQuery(window).scroll((),SM_OBJ.ADS.lazyLoadSlots()}catch(e){SM_OBJ.ADS.debugLog("defineLazyLoadScrollEvent",e)}},defineSlotRenderedEvent:function(){try{googletag.pubads().addEventListener("slotRenderEnded",(function(e){if(e&&e.slot){var t=e.slot.getSlotElementId();SM_OBJ.ADS.debugLog("GPT slotRendered - "+t,e,!1);try{var i=e.slot.getTargetingMap();if(t&&setTimeout((function(){SM_OBJ.ADS.updateSlotRefreshEligibility([t],!0)}),1e3*SM_OBJ.ADS.refreshDelay),i.hasOwnProperty("auctionId")){var a=i.auctionId.toString()||SM_OBJ.ADS.auctionId;SM_OBJ.ADS.debugLog("ad server response for "+t+" in auction "+a,e,!1),!1===SM_OBJ.ADS.auctions[a].adserverResponseReceived&&(SM_OBJ.ADS.auctions[a].adserverResponseReceived=!0,SM_OBJ.ADS.logTiming("gptRequestComplete","auction",a),SM_OBJ.ADS.resetRefreshInterval());var o=SM_OBJ.ADS.auctions[a];o.adLoads++;try{SM_OBJ.ADS.handleWinningBid(e)}catch(e){SM_OBJ.ADS.debugLog("slotRenderEnded - testingresponse",e)}try{window.testingresponse=window.testingresponse||{},window.testingresponse[a]=window.testingresponse[a]||{},window.testingresponse[a][t]=e}catch(e){SM_OBJ.ADS.debugLog("storing testingresponse",e)}SM_OBJ.ADS.singleRequestAuction?o.adLoads==o.slots.length&&SM_OBJ.ADS.completeAndLogAuction(a):SM_OBJ.ADS.completeAndLogAuction(a)}}catch(e){SM_OBJ.ADS.debugLog("issue counting adLoads",e)}}}))}catch(e){SM_OBJ.ADS.debugLog("defineSlotRenderedEvent",e)}},completeAndLogAuction:function(e){try{if(SM_OBJ.ADS.logTiming("auctionComplete","auction",e),SM_OBJ.ADS.useLocalStorageCache)try{SM_OBJ.ADS.bidPool.saveToStorage()}catch(e){SM_OBJ.ADS.debugLog("bidPool.saveToStorage",e)}SM_OBJ.ADS.auctions[e].dataSent||(SM_OBJ.ADS.auctions[e].dataSent=!0,SM_OBJ.SESSION.sendInsightsData("auction",e))}catch(e){SM_OBJ.ADS.debugLog("completeAndLogAuction",e)}},getBidByAdId:function(e,t){var i;try{i=(void 0!==t?SM_OBJ.ADS.bidPool[t]:Object.keys(SM_OBJ.ADS.bidPool).reduce((,[])).find((function(t){return t.adId===e})),SM_OBJ.ADS.debugLog("getBidByAdId "+e,i,!1)}catch(e){SM_OBJ.ADS.debugLog("getBidByAdId",e)}return i},getHighestAndWinningBids:function(){try{var e=SM_OBJ.ADS.auctions,t={},i=function(e,t){if(e&&e.length>0)return e.find(()};for(var a in e){t[a]={};var o=e[a];o&&o.slots.forEach((function(e){t[a].hasOwnProperty(e)||(t[a][e]={bidWin:i(o.bidWins,e),highestBid:o.highestBids.hasOwnProperty(e)?o.highestBids[e]:null})}))}return t}catch(e){SM_OBJ.ADS.debugLog("getHighestAndWinningBids",e)}},convertBidTargetingToKeyValueArray:function(e){var t=[];if("object"==_typeof(e))for(var i in e)t.push({key:i,value:e[i].toString()});return t},handleWinningBid:function(e){try{var t=e;if(t){var i=t.slot.getTargetingMap();"object"==_typeof(i)&&(i=function(e){var t={};if("object"==_typeof(e))for(var i in e)t[i]=e[i].toString();return t}(i));var a,o,r,n,d,s,S=SM_OBJ.SESSION.guid(),l=i.auctionId,u=SM_OBJ.ADS.auctions[l],c=t.slot.getSlotElementId(),g=t.creativeId,p=SM_OBJ.ADS.adConfig.site.advertiserMap,f=t.advertiserId,O=t.yieldGroupIds,_=p.hasOwnProperty(t.advertiserId)?p[t.advertiserId]:"BidderNotInbdrMap",m=SM_OBJ.ADS.activeSlots[c],b=0,A=SM_OBJ.ADS.adxFloor,B=SM_OBJ.ADS.getAdUnitAdxMultiplier(c)||SM_OBJ.ADS.adxMultiplier,M=!1,h=null,D=null,J=null,v=!1,y=null,I=null,P=null,w=null,C=SM_OBJ.ADS.bidders.filter(();if(t.isEmpty)_="isEmpty";else{if("object"==_typeof(i)){h=null!==(D=i.hasOwnProperty("hb_adid")?i.hb_adid:null)&&m.hasOwnProperty("name")?SM_OBJ.ADS.getBidByAdId(D,m.name):null;var E=i.hasOwnProperty("bidAuctionId")?i.bidAuctionId:null;null!==E&&SM_OBJ.ADS.auctions.hasOwnProperty(E)&&SM_OBJ.ADS.auctions[E]}if(null!==h&&(r=h.hasOwnProperty("priceBucket")?parseFloat(h.priceBucket).toFixed(2):null,n=SM_OBJ.ADS.dfpFloors.hasOwnProperty(c)?SM_OBJ.ADS.dfpFloors[c]:"object"==_typeof(i)&&i.hasOwnProperty("dfpFloor")?i.dfpFloor:A),"prebid"==_.toLowerCase()||C.indexOf(_.toLowerCase())>-1)try{if(null!==h){var T=SM_OBJ.ADS.getPostAuctionWinner(h)||null;SM_OBJ.ADS.usePostAuction&&null!==T&&(v=!0,_=T.hasOwnProperty("bidder")?T.bidder:_,b=T.hasOwnProperty("bid")?T.bid.toFixed(2):b,a=SM_OBJ.ADS.useRequestedSize.indexOf(_)>-1?T.requestedSize:T.size,d=T.hasOwnProperty("adId")?T.adId:null,s=T.hasOwnProperty("placementId")?T.placementId:null,y=T.hasOwnProperty("advertiserName")?T.advertiserName:null,I=T.hasOwnProperty("advertiserDomains")?T.advertiserDomains:null,P=T.hasOwnProperty("agencyName")?T.agencyName:null,w=T.hasOwnProperty("brandName")?T.brandName:null),null===T&&(h.bidUsed=!0,h.bidWon=!0,_=h.hasOwnProperty("bidder")?h.bidder:_,b=h.hasOwnProperty("bid")?parseFloat(h.bid).toFixed(2):b,a=SM_OBJ.ADS.useRequestedSize.indexOf(_)>-1?h.requestedSize:h.size,d=h.hasOwnProperty("adId")?h.adId:null,s=h.hasOwnProperty("placementId")?h.placementId:null,y=h.hasOwnProperty("advertiserName")?h.advertiserName:null,I=h.hasOwnProperty("advertiserDomains")?h.advertiserDomains:null,P=h.hasOwnProperty("agencyName")?h.agencyName:null,w=h.hasOwnProperty("brandName")?h.brandName:null)}}catch(e){SM_OBJ.ADS.debugLog("logBidWin -  prebid",e)}else if(null!==h&&(h.bidUsed=!1,delete h.auctionId,J=h.bid),"adexchange"==_.toLowerCase())try{var F=null!==J?J*B:A;b=n?parseFloat(n).toFixed(2)/100:F<A?A:F<=.05?Math.ceil(Math.ceil(100*F)/100*100)/100:F<=3?Math.ceil(Math.ceil(F*(100/3))/(100/3)*100)/100:F>3&&F<=6?Math.ceil(Math.ceil(F*(100/6))/(100/6)*100)/100:F>6&&F<=10?Math.ceil(Math.ceil(5*F)/5*100)/100:F>10&&F<=20?Math.ceil(Math.ceil(2*F)/2*100)/100:F>20&&F<=40?5*Math.ceil(F/5):F>40&&F<50?10*Math.ceil(F/10):F>=50?50:A,b=parseFloat(b).toFixed(2),a=t.size[0]+"x"+t.size[1],M=!SM_OBJ.ADS.isActiveSize([t.size[0],t.size[1]],SM_OBJ.ADS.activeSlots[c].sizes)}catch(e){SM_OBJ.ADS.debugLog("logBidWin -  adexchange",e)}else if("googleeb"==_.toLowerCase())try{b=null!==r?r:A,b=parseFloat(b).toFixed(2),a=t.size[0]+"x"+t.size[1],M=!SM_OBJ.ADS.isActiveSize([t.size[0],t.size[1]],SM_OBJ.ADS.activeSlots[c].sizes)}catch(e){SM_OBJ.ADS.debugLog("logBidWin -  adexchange",e)}else if("amazon"==_.toLowerCase())try{var L=i.hasOwnProperty("amzniid")?i.amzniid:null,z=SM_OBJ.ADS.getBidByAdId(L),N=SM_OBJ.ADS.adConfig.bidders.amazon.customParams.pWeight||1,R=[];h&&R.push(parseFloat(parseFloat(h.bid).toFixed(2))+.01);var x=SM_OBJ.ADS.amzFloors[m.name];x&&R.push(parseFloat(parseFloat(x*N).toFixed(2))),a=z.size,s="amz_"+m.name+"_"+a,b=Math.max.apply(Math,R)||x}catch(e){SM_OBJ.ADS.debugLog("logBidWin -  amazon",e)}else if(["houseads","house"].indexOf(_.toLowerCase())>-1)try{a=t.size[0]+"x"+t.size[1]}catch(e){SM_OBJ.ADS.debugLog("logBidWin -  house",e)}else try{if("undefined"!=typeof sm_adConfig_override&&"airfind"===_&&null!==g)if(sm_adConfig_override.customBidderCPM_json&&sm_adConfig_override.customBidderCPM_json.hasOwnProperty("af")&&sm_adConfig_override.customBidderCPM_json.af.hasOwnProperty(g)){var U=sm_adConfig_override.customBidderCPM_json.af[g];b=U.cpm.toFixed(2),s=U.pid,a=t.size[0]+"x"+t.size[1]}else(k=SM_OBJ.ADS.adConfig.site.customParams.customBidderCPM).hasOwnProperty(_)&&(b=(j=k[_]).hasOwnProperty("desktop")||j.hasOwnProperty("tablet")||j.hasOwnProperty("mobile")?k[_][SM_OBJ.ADS.device].toFixed(2):k[_].toFixed(2),a=t.size[0]+"x"+t.size[1]);else if(SM_OBJ.ADS.adConfig.site.customParams.hasOwnProperty("customBidderCPM")){var k,j;(k=SM_OBJ.ADS.adConfig.site.customParams.customBidderCPM).hasOwnProperty(_)&&(b=(j=k[_]).hasOwnProperty("desktop")||j.hasOwnProperty("tablet")||j.hasOwnProperty("mobile")?k[_][SM_OBJ.ADS.device].toFixed(2):k[_].toFixed(2),a=t.size[0]+"x"+t.size[1])}}catch(e){SM_OBJ.ADS.debugLog("logBidWin -  custom bidder",e)}}try{o=_.toUpperCase()+"_"+m.name.toUpperCase()+"_"+SM_OBJ.ADS.device.toUpperCase()+"_"+a}catch(e){SM_OBJ.ADS.debugLog("logBidWin. bidAlias",e),o="undefined"}"object"==_typeof(i)&&(i=SM_OBJ.ADS.convertBidTargetingToKeyValueArray(i));var q={auctionId:l,bidder:_,bid:parseFloat(b).toFixed(2)/1,adUnit:m.name,elementId:c,size:a,placementId:s,alias:o,bidTargeting:i,type:"bidWins",value:parseFloat(b).toFixed(2)/1e3,isNative:M,viewable:!1,dfpFloor:n,priceBucket:r,bidAuctionId:E,trigger:u.auctionTrigger,adId:d,cachedBid:E!==l,postBid:v,id:S,ts:SM_OBJ.SESSION.getTimestamp(),advertiserName:y,advertiserDomains:I,agencyName:P,brandName:w,GAMAdvertiserId:f,GAMyieldGroupIds:O,adxMultiplier:B};SM_OBJ.ADS.debugLog("logging "+q.type+"($"+q.bid+") from "+q.bidder+" for "+q.elementId,q,!1),u[q.type].push(q);var G=q.value,V=1;SM_OBJ.SESSION.hasOwnProperty("revCoeff")&&(V+=SM_OBJ.SESSION.revCoeff),q.rpsCoeff=V,SM_OBJ.ADS.revCoeffEnabled()&&(G*=V),SM_OBJ.SESSION.conversionTracker.updateRevenue(G),SM_OBJ.ADS.logNRPageAction("bidWin",q)}else SM_OBJ.ADS.debugLog("logging bidWins","slot details not available")}catch(e){SM_OBJ.ADS.debugLog("handleWinningBid",e)}},revCoeffEnabled:function(){try{var e=!1;return SM_OBJ.ADS.adConfig.site.customParams.hasOwnProperty("rpsCoeff")&&(e=SM_OBJ.ADS.adConfig.site.customParams.rpsCoeff[SM_OBJ.ADS.device].isActive),e}catch(e){SM_OBJ.SESSION.debugLog("revCoeffEnabled",e)}},defineImpressionViewableEvent:function(){try{googletag.pubads().addEventListener("impressionViewable",(function(e){var t=e.slot.getSlotElementId(),i=e.slot.getTargetingMap(),a=i.hasOwnProperty("auctionId")?i.auctionId.toString():null;t&&a&&(SM_OBJ.ADS.updateSlotViewability(t,a),SM_OBJ.ADS.updateSlotRefreshEligibility([t],!0),SM_OBJ.ADS.debugLog("GPT impressionViewable - "+t+" in auction "+a,null,!1))}))}catch(e){SM_OBJ.ADS.debugLog("defineImpressionViewableEvent",e)}},defineSlotRequestedEvent:function(){try{googletag.pubads().addEventListener("slotRequested",(function(e){try{var t={advertiserId:e.advertiserId,campaignId:e.campaignId,contentUrl:e.slot.getContentUrl(),creativeId:e.creativeId,elementId:e.slot.getSlotElementId(),labelIds:e.labelIds,name:e.slot.getAdUnitPath().substr(e.slot.getAdUnitPath().indexOf("/",2)+1),serviceName:e.serviceName,slotId:e.slot.getAdUnitPath()};SM_OBJ.ADS.debugLog("GPT slotRequested - "+t.elementId,t,!1)}catch(e){SM_OBJ.ADS.debugLog("logNRPageAction - SLOT_REQUEST",e)}}))}catch(e){SM_OBJ.ADS.debugLog("defineSlotRequestedEvent",e)}},defineSlotResponseReceivedEvent:function(){try{googletag.pubads().addEventListener("slotResponseReceived",(function(e){try{var t={advertiserId:e.advertiserId,campaignId:e.campaignId,contentUrl:e.slot.getContentUrl(),creativeId:e.creativeId,elementId:e.slot.getSlotElementId(),labelIds:e.labelIds,name:e.slot.getAdUnitPath().substr(e.slot.getAdUnitPath().indexOf("/",2)+1),serviceName:e.serviceName,slotId:e.slot.getAdUnitPath()};SM_OBJ.ADS.debugLog("GPT slotResponseReceived - "+t.elementId,t,!1)}catch(e){SM_OBJ.ADS.debugLog("logNRPageAction - SLOT_RESPONSE",e)}}))}catch(e){SM_OBJ.ADS.debugLog("defineSlotResponseReceivedEvent",e)}},defineSlotLoadedEvent:function(){try{googletag.pubads().addEventListener("slotOnload",(function(e){try{var t={advertiserId:e.advertiserId,campaignId:e.campaignId,contentUrl:e.slot.getContentUrl(),creativeId:e.creativeId,elementId:e.slot.getSlotElementId(),labelIds:e.labelIds,name:e.slot.getAdUnitPath().substr(e.slot.getAdUnitPath().indexOf("/",2)+1),serviceName:e.serviceName,slotId:e.slot.getAdUnitPath()};SM_OBJ.ADS.debugLog("GPT slotOnload - "+t.elementId,t,!1)}catch(e){SM_OBJ.ADS.debugLog("logNRPageAction - SLOT_LOAD",e)}}))}catch(e){SM_OBJ.ADS.debugLog("defineSlotLoadedEvent",e)}},defineSlotHiddenEvent:function(){try{googletag.pubads().addEventListener("slotVisibilityChanged",(function(e){try{var t={advertiserId:e.advertiserId,campaignId:e.campaignId,contentUrl:e.slot.getContentUrl(),creativeId:e.creativeId,elementId:e.slot.getSlotElementId(),labelIds:e.labelIds,name:e.slot.getAdUnitPath().substr(e.slot.getAdUnitPath().indexOf("/",2)+1),serviceName:e.serviceName,slotId:e.slot.getAdUnitPath()};SM_OBJ.ADS.debugLog("GPT slotVisibilityChanged - "+t.elementId,t,!1)}catch(e){SM_OBJ.ADS.debugLog("logNRPageAction - SLOT_HIDDEN",e)}}))}catch(e){SM_OBJ.ADS.debugLog("defineSlotHiddenEvent",e)}},getBidderTimeout:function(e){try{if(SM_OBJ.ADS.adConfig.bidders[e].timeout.hasOwnProperty(SM_OBJ.ADS.device))var t=SM_OBJ.ADS.adConfig.bidders[e].timeout[SM_OBJ.ADS.device];else t=SM_OBJ.ADS.providerTimeout;return t}catch(e){SM_OBJ.ADS.debugLog("getBidderTimeout",e)}},logNRPageAction:function(e,t){try{var i={site:SM_OBJ.SESSION.SITE,source:SM_OBJ.SESSION.SOURCE,campaign:SM_OBJ.SESSION.CAMPAIGN,medium:SM_OBJ.SESSION.MEDIUM,term:SM_OBJ.SESSION.TERM,content:SM_OBJ.SESSION.CONTENT,auction_id:SM_OBJ.ADS.auctionId,is_mobile:SM_OBJ.SESSION.IS_MOBILE,device_type:SM_OBJ.SESSION.DEVICE_TYPE,browser_size:SM_OBJ.SESSION.BROWSER_SIZE,session_depth:SM_OBJ.SESSION.PAGE_DEPTH,page_type:SM_OBJ.SESSION.PAGE_TYPE,pageview_id:SM_OBJ.SESSION.PAGEVIEW_ID,session_id:SM_OBJ.SESSION.SESSION_ID,user_id:SM_OBJ.SESSION.USER_ID,adblock:SM_OBJ.SESSION.ADS_BLOCKED,spadgid:SM_OBJ.SESSION.spadgid,spadid:SM_OBJ.SESSION.spadid,spap:SM_OBJ.SESSION.spap,spcampid:SM_OBJ.SESSION.spcampid,spcid:SM_OBJ.SESSION.spcid,sppubid:SM_OBJ.SESSION.sppubid,spsecid:SM_OBJ.SESSION.spsecid};try{if(void 0!==t)if(Object.assign)Object.assign(i,t);else for(var a in t)t.hasOwnProperty(a)&&(i[a]=t[a])}catch(t){SM_OBJ.ADS.debugLog("logNRPageAction - "+e,t)}"undefined"!=typeof newrelic?(newrelic.addPageAction(e,i),SM_OBJ.ADS.debugLog("NR - "+e,i,!1)):SM_OBJ.ADS.debugLog("newrelic is undefined - "+e,i,!1)}catch(e){SM_OBJ.ADS.debugLog("logNRPageAction",e)}},setNRCustomAttributes:function(){try{"undefined"!=typeof newrelic&&(newrelic.setCustomAttribute("trackerName","gpt"),newrelic.setCustomAttribute("trackerVersion",googletag.getVersion()))}catch(e){SM_OBJ.ADS.debugLog("defineSlotLoadedEvent",e)}},runExperiments:function runExperiments(response){try{var checkOptimization=function(e){if(sp_new_session){sp_experiments={},storageManager.deleteItem("spine_experiments"),sp_experiments.spine_session_id=storageManager.getItem("spine_session_id");for(var t=100*Math.random(),i=0;i<SM_OBJ.ADS.adExperiments.length;i++){var a=SM_OBJ.ADS.adExperiments[i];if(t<a.opt){for(var o=100*Math.random(),r=0;r<a.variants.length&&!(a.variants[r].opt>=o);r++)o-=a.variants[r].opt;sp_experiments[a.exp_id]=r}else sp_experiments[a.exp_id]=-1}storageManager.setItem("spine_experiments",btoa(JSON.stringify(sp_experiments)),"","/")}else try{return(sp_experiments=JSON.parse(atob(storageManager.getItem("spine_experiments")))).hasOwnProperty(e)?sp_experiments[e]:-1}catch(e){return SM_OBJ.ADS.debugLog("Invalid base64 string for experiments cookie",e),!1}},updateConfig=function updateConfig(conf,actions,alias){for(var conf=conf,actions=actions,a=0;a<actions.length;a++)var runAction=doActionAccordingToObject(actions[a],conf);function addAdUnitToAdZone(e,t,i){var a=!1,o='Could not find adZone with handle of "'+i+'".\t\t\t\t\tFailed to add adUnit with alias of "'+t+'" to adZone with handle of "'+i+'".\n';return e.site.adZones.forEach((function(e){if(i===e.handle){var r=e.units.indexOf(t);o='The adUnit with alias of "'+t+'" already exists.\t\t\t\t\t\t\tFailed to add adUnit with alias of "'+t+'" to adZone with handle of "'+i+'".\n',-1===r&&(e.units.push(t),a=!0,o='Successfully added adUnit with alias of "'+t+'" to adZone with handle of "'+i+'".\n')}})),{done:a,msg:o}}function removeAdUnitFromAdZone(e,t,i){var a=!1,o='Could not find adZone with handle of "'+i+'".\t\t\t\t\tFailed to remove adUnit with alias of "'+t+'" from adZone with handle of "'+i+'".\n';return e.site.adZones.forEach((function(e){if(i===e.handle){var r=e.units.indexOf(t);o='The adUnit with alias of "'+t+'" does not exist.\t\t\t\t\t\t\tFailed to remove adUnit with alias of "'+t+'" from adZone with handle of "'+i+'".\n',-1!==r&&(e.units.splice(r,1),a=!0,o='Successfully removed adUnit with alias of "'+t+'" from adZone with handle of "'+i+'".\n')}})),{done:a,msg:o}}function addAdSizeToAdUnit(config,adSize,adUnitAlias){var res=!1,message='The adSize "'+adSize+'" is not an array.\t\t\t\t\tFailed to add adSize "'+adSize.toString()+'" to adUnit with alias of "'+adUnitAlias+'".\n';return adSize=eval(adSize),"[object Array]"===Object.prototype.toString.call(adSize)?(message='The adSize "'+adSize+'" has problems with length or type of elements.\t\t\t\t\t\tFailed to add adSize "'+adSize.toString()+'" to adUnit with alias of "'+adUnitAlias+'".\n',2===adSize.length&&"number"==typeof adSize[0]&&"number"==typeof adSize[1]&&(message='The adUnit with alias of "'+adSize+'" has problems with length or type of elements.\t\t\t\t\t\t\tFailed to add adSize "'+adSize.toString()+'" to adUnit with alias of "'+adUnitAlias+'".\n',config.units.forEach((function(e){adUnitAlias===e.alias&&(message='The adSize "'+adSize.toString()+'" already exists.\t\t\t\t\t\t\t\t\tFailed to add adSize "'+adSize.toString()+'" to adUnit with alias of "'+adUnitAlias+'".\n',-1===e.sizes.findIndex(()&&(e.sizes.push(adSize),res=!0,message='Successfully added adSize "'+adSize[0].toString()+"x"+adSize[1].toString()+'" to adUnit with alias of "'+adUnitAlias+'".\n'))})))):"object"==_typeof(adSize)&&config.units.forEach((function(e){if(adUnitAlias==e.alias){for(var t in adSize){for(var i=!1,a=adSize[t],o=e.sizes[t],r=0;r<o.length;r++)if(JSON.stringify(o[r])==a){i=!0;break}i||e.sizes[t].push(JSON.parse(a))}res=!0,message="Successfully added adSize to ad unit "+adUnitAlias+'".\n'}})),{done:res,msg:message}}function removeAdSizeFromAdUnit(config,adSize,adUnitAlias){var res=!1,message='The adSize "'+adSize+'" is not an array.\t\t\t\t\tFailed to remove adSize "'+adSize.toString()+'" from adUnit with alias of "'+adUnitAlias+'".\n';return adSize=eval(adSize),"[object Array]"===Object.prototype.toString.call(adSize)?(message='The adSize "'+adSize+'" has problems with length or type of elements.\t\t\t\t\t\tFailed to remove adSize "'+adSize.toString()+'" from adUnit with alias of "'+adUnitAlias+'".\n',2===adSize.length&&"number"==typeof adSize[0]&&"number"==typeof adSize[1]&&(message='The adUnit with alias of "'+adSize+'" has problems with length or type of elements.\t\t\t\t\t\t\tFailed to remove adSize "'+adSize.toString()+'" from adUnit with alias of "'+adUnitAlias+'".\n',config.units.forEach((function(e){adUnitAlias===e.alias&&(message='The adSize "'+adSize.toString()+'" does not exist.\t\t\t\t\t\t\t\t\tFailed to remove adSize "'+adSize.toString()+'" from adUnit with alias of "'+adUnitAlias+'".\n',e.sizes.forEach((function(t,i){t[0]===adSize[0]&&t[1]===adSize[1]&&(e.sizes.splice(i,1),res=!0,message='Successfully removed adSize "'+adSize.toString()+'" from adUnit with alias of "'+adUnitAlias+'".\n')})))})))):"object"==_typeof(adSize)&&config.units.forEach((function(e){if(adUnitAlias==e.alias){for(var t in adSize)for(var i=adSize[t],a=e.sizes[t],o=0;o<a.length;o++)if(JSON.stringify(a[o])==i){e.sizes[t].splice(o,1);break}res=!0,message="Successfully remove adSize to ad unit "+adUnitAlias+'".\n'}})),{done:res,msg:message}}function addBidderToAdUnit(e,t,i){var a=!1,o='Could not find adUnit with alias of "'+i+'".\t\t\t\t\tFailed to add bidder with handle of "'+t+'" as a bidProvider of adUnit with alias of "'+i+'".\n';return e.units.forEach((function(e){if(i===e.alias){for(device in o='The bidder with handle of "'+t+'" already exists.\t\t\t\t\t\t\tFailed to add bidder with handle of "'+t+'" as a bidProvider of adUnit with alias of "'+i+'".\n',t)t[device]&&e.bidProviders[device].indexOf(t[device])<0&&e.bidProviders[device].push(t[device]);a=!0,o='Successfully added bidder with handle of "'+t+'" as a bidProvider of adUnit with alias of "'+i+'".\n'}})),{done:a,msg:o}}function removeBidderFromAdUnit(e,t,i){var a=!1,o='Could not find adUnit with alias of "'+i+'".\t\t\t\t\tFailed to remove bidder with handle of "'+t+'" from bidProviders of adUnit with alias of "'+i+'".\n';return e.units.forEach((function(e){if(i===e.alias){for(device in o='The bidder with handle of "'+t+'" does not exist.\t\t\t\t\t\t\tFailed to remove bidder with handle of "'+t+'" from bidProviders of adUnit with alias of "'+i+'".\n',t)if(t[device]&&e.bidProviders[device].indexOf(t[device])>-1){var r=e.bidProviders[device].indexOf(t[device]);e.bidProviders[device].splice(r,1)}a=!0,o='Successfully removed bidder with handle of "'+t+'" from bidProviders of adUnit with alias of "'+i+'".\n'}})),{done:a,msg:o}}function enableTagOfBidder(e,t,i){var a=!1,o='Could not find bidder with handle of "'+i+'".\t\t\t\t\tFailed to enable tag with alias of "'+t+'" of bidder with handle of "'+i+'".\n';return void 0!==e.bidders[i]&&(o="Could not find tag with alias of "+t+'.\t\t\t\t\t\tFailed to enable tag with alias of "'+t+'" of bidder with handle of "'+i+'".\n',void 0!==e.bidders[i].tags[t]&&(e.bidders[i].tags[t].isActive=!0,a=!0,o='Successfully enabled tag with alias of "'+t+'" of bidder with handle of "'+i+'".\n')),{done:a,msg:o}}function disableTagOfBidder(e,t,i){var a=!1,o='Could not find bidder with handle of "'+i+'".\t\t\t\t\tFailed to disable tag with alias of "'+t+'" of bidder with handle of "'+i+'".\n';return void 0!==e.bidders[i]&&(o='Could not find tag with alias of "'+t+'".\t\t\t\t\t\tFailed to disable tag with alias of "'+t+'" of bidder with handle of "'+i+'".\n',void 0!==e.bidders[i].tags[t]&&(e.bidders[i].tags[t].isActive=!1,a=!0,o='Successfully disabled tag with alias of "'+t+'" of bidder with handle of "'+i+'".\n')),{done:a,msg:o}}function enableAdUnit(e,t){var i=!1,a='Could not find ad unit with the alias of "'+t+'".\t\t\t\t\tFailed to enable ad unit with the alias of "'+t+'".\n';return e.units.forEach((function(e){t===e.alias&&(e.isActive=!0,i=!0,a='Successfully enabled ad unit with the alias of "'+t+'".\n')})),{done:i,msg:a}}function disableAdUnit(e,t){var i=!1,a='Could not find ad unit with the alias of "'+t+'".\t\t\t\t\tFailed to disable ad unit with the alias of "'+t+'".\n';return e.units.forEach((function(e){t===e.alias&&(e.isActive=!1,i=!0,a='Successfully disabled ad unit with the alias of "'+t+'".\n')})),{done:i,msg:a}}function enableBidder(e,t){var i=!1,a='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to enable bidder with handle of "'+t+'".\n';return void 0!==e.bidders[t]&&(e.bidders[t].isActive=!0,i=!0,a='Successfully enabled bidder with handle of "'+t+'".\n'),{done:i,msg:a}}function disableBidder(e,t){var i=!1,a='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to disable bidder with handle of "'+t+'".\n';return void 0!==e.bidders[t]&&(e.bidders[t].isActive=!1,i=!0,a='Successfully disabled bidder with handle of "'+t+'".\n'),{done:i,msg:a}}function enableRefreshOfAdUnit(e,t){var i=!1,a='Could not find adUnit with alias of "'+t+'".\t\t\t\t\tFailed to enable refresh of adUnit with alias of "'+t+'".\n';return e.units.forEach((function(e){t===e.alias&&(e.refresh=!0,i=!0,a='Successfully enabled refresh of adUnit with alias of "'+t+'".\n')})),{done:i,msg:a}}function disableRefreshOfAdUnit(e,t){var i=!1,a='Could not find adUnit with alias of "'+t+'".\t\t\t\t\tFailed to disable refresh of adUnit with alias of "'+t+'".\n';return e.units.forEach((function(e){t===e.alias&&(e.refresh=!1,i=!0,a='Successfully disabled refresh of adUnit with alias of "'+t+'".\n')})),{done:i,msg:a}}function enableLazyLoadOfAdUnit(e,t){var i=!1,a='Could not find adUnit with alias of "'+t+'".\t\t\t\t\tFailed to enable lazyLoad of adUnit with alias of "'+t+'".\n';return e.units.forEach((function(e){t===e.alias&&(e.lazyLoad=!0,i=!0,a='Successfully enabled lazyLoad of adUnit with alias of "'+t+'".\n')})),{done:i,msg:a}}function disableLazyLoadOfAdUnit(e,t){var i=!1,a='Could not find adUnit with alias of "'+t+'".\t\t\t\t\tFailed to disable lazyLoad of adUnit with alias of "'+t+'".\n';return e.units.forEach((function(e){t===e.alias&&(e.lazyLoad=!1,i=!0,a='Successfully disabled refresh of adUnit with alias of "'+t+'".\n')})),{done:i,msg:a}}function enableRefreshOfBidder(e,t){var i=!1,a='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to enable refresh of bidder with handle of "'+t+'".\n';return void 0!==e.bidders[t]&&(e.bidders[t].refresh=!0,i=!0,a='Successfully enabled refresh of bidder with handle of "'+t+'".\n'),{done:i,msg:a}}function disableRefreshOfBidder(e,t){var i=!1,a='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to disable refresh of bidder with handle of "'+t+'".\n';return void 0!==e.bidders[t]&&(e.bidders[t].refresh=!1,i=!0,a='Successfully disabled refresh of bidder with handle of "'+t+'".\n'),{done:i,msg:a}}function modifyFloorPriceOfSite(e,t,i){return e.site.adxFloor[t]=i,{done:!0,msg:'Successfully modified floor price of device "'+t+'" of site by new value "'+i.toString()+'".\n'}}function modifyFloorPriceOfBidderTag(e,t,i,a){var o=!1,r='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to modify floor price of tag with alias "'+i+'" of bidder with handle of "'+t+'" by new value "'+a.toString()+'".\n';return void 0!==e.bidders[t]&&(r='Could not find tag with alias of "'+i+'".\t\t\t\t\t\tFailed to modify floor price of tag with alias "'+i+'" of bidder with handle of "'+t+'" by new value "'+a.toString()+'".\n',void 0!==e.bidders[t].tags[i]&&(e.bidders[t].tags[i].baseFloor=a,o=!0,r='Successfully modified floor price of tag with alias "'+i+'" of bidder with handle of "'+t+'" by new value "'+a.toString()+'".\n')),{done:o,msg:r}}function modifyTimeOutOfSite(e,t,i){return e.site.timeout[t]=i,{done:!0,msg:'Successfully modified timeout of device "'+t+'" of site by new value "'+i.toString()+'".\n'}}function modifyTimeOutOfBidder(e,t,i,a){var o=!1,r='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to modify timeout of device "'+i+'" of bidder with handle "'+t+'" by new value "'+a.toString()+'".\n';return void 0!==e.bidders[t]&&(e.bidders[t].timeout[i]=a,o=!0,r='Successfully modified timeout of device "'+i+'" of bidder with handle "'+t+'" by new value "'+a.toString()+'".\n'),{done:o,msg:r}}function modifyAdxMultiplierOfSite(e,t,i){return e.site.adxMultiplier[t]=i,{done:!0,msg:'Successfully modified adxMultiplier of device "'+t+'" of site by new value "'+i.toString()+'".\n'}}function swapBidderTagIds(e,t,i,a){var o=null,r=!1,n='Could not find bidder with handle of "'+t+'".\t\t\t\t\tFailed to swap id of tags "'+i+'" and "'+a+'" of bidder with handle "'+t+'".\n';return void 0!==e.bidders[t]&&(n='Could not swap bidder tags with same alias of "'+i+'".\t\t\t\t\t\tFailed to swap id of tags "'+i+'" and "'+a+'" of bidder with handle "'+t+'".\n',i!==a&&(n='Could not find bidder tag with alias of "'+i+'".\t\t\t\t\t\t\tFailed to swap id of tags "'+i+'" and "'+a+'" of bidder with handle "'+t+'".\n',void 0!==e.bidders[t].tags[i]&&(n='Could not find bidder tag with alias of "'+a+'".\t\t\t\t\t\t\t\tFailed to swap id of tags "'+i+'" and "'+a+'" of bidder with handle "'+t+'".\n',void 0!==e.bidders[t].tags[a]&&(n='Could not swap bidder tags "'+i+'" and "'+a+'" because of different sizes.\t\t\t\t\t\t\t\t\tFailed to swap id of tags "'+i+'" and "'+a+'" of bidder with handle "'+t+'".\n',e.bidders[t].tags[i].banner.w===e.bidders[t].tags[a].banner.w&&e.bidders[t].tags[i].banner.h===e.bidders[t].tags[a].banner.h&&(n='Successfully swapped id of tags "'+i+'" and "'+a+'" of bidder with handle "'+t+'".\n',o=e.bidders[t].tags[i].id,e.bidders[t].tags[i].id=e.bidders[t].tags[a].id,e.bidders[t].tags[a].id=o,r=!0))))),{done:r,msg:n}}function doActionAccordingToObject(e,t){try{var i={done:!1,msg:"Could not find matching function for action "+JSON.stringify(e)+".\n"};if("add"===e.action)"unit"===e.entity?i=addAdUnitToAdZone(t,e.params.unit,e.params.zone):"size"===e.entity?i=addAdSizeToAdUnit(t,e.params.size,e.params.unit):"bidder"===e.entity&&(i=addBidderToAdUnit(t,o=e.params.bidder,e.params.unit));else if("remove"===e.action)"unit"===e.entity?i=removeAdUnitFromAdZone(t,e.params.unit,e.params.zone):"size"===e.entity?i=removeAdSizeFromAdUnit(t,e.params.size,e.params.unit):"bidder"===e.entity&&(i=removeBidderFromAdUnit(t,o=e.params.bidder,e.params.unit));else if("enable"===e.action)"tag"===e.entity?i=enableTagOfBidder(t,a=e.params.tag,o=e.params.bidder):"bidder"===e.entity?i=enableBidder(t,o=e.params.bidder):"unit"===e.entity?i=enableAdUnit(t,e.params.unit):"refresh"===e.entity?void 0!==e.params.unit?i=enableRefreshOfAdUnit(t,e.params.unit):void 0!==e.params.bidder&&(i=enableRefreshOfBidder(t,o=e.params.bidder)):"lazyLoad"===e.entity&&e.params.unit&&(i=enableLazyLoadOfAdUnit(t,e.params.unit));else if("disable"===e.action)"tag"===e.entity?i=disableTagOfBidder(t,a=e.params.tag,o=e.params.bidder):"bidder"===e.entity?i=disableBidder(t,o=e.params.bidder):"unit"===e.entity?i=disableAdUnit(t,e.params.unit):"refresh"===e.entity?void 0!==e.params.unit?i=disableRefreshOfAdUnit(t,e.params.unit):void 0!==e.params.bidder&&(i=disableRefreshOfBidder(t,o=e.params.bidder)):"lazyLoad"===e.entity&&e.params.unit&&(i=disableLazyLoadOfAdUnit(t,e.params.unit));else if("modify"===e.action)if("baseFloor"===e.entity)if(void 0===e.params.tag)""!==e.params.floor.desktop&&null!==e.params.floor.desktop&&(i=modifyFloorPriceOfSite(t,"desktop",e.params.floor.desktop)),""!==e.params.floor.mobile&&null!==e.params.floor.mobile&&(i=modifyFloorPriceOfSite(t,"mobile",e.params.floor.mobile)),""!==e.params.floor.tablet&&null!==e.params.floor.tablet&&(i=modifyFloorPriceOfSite(t,"tablet",e.params.floor.tablet));else{var a=e.params.tag;i=modifyFloorPriceOfBidderTag(t,o=e.params.bidder,a,e.params.value)}else if("timeout"===e.entity)if(void 0===e.params.bidder)e.params.timeouts.desktop&&(i=modifyTimeOutOfSite(t,"desktop",e.params.timeouts.desktop)),e.params.timeouts.mobile&&(i=modifyTimeOutOfSite(t,"mobile",e.params.timeouts.mobile)),e.params.timeouts.tablet&&(i=modifyTimeOutOfSite(t,"tablet",e.params.timeouts.tablet));else{var o=e.params.bidder;e.params.timeouts.desktop&&(i=modifyTimeOutOfBidder(t,o,"desktop",e.params.timeouts.desktop)),e.params.timeouts.mobile&&(i=modifyTimeOutOfBidder(t,o,"mobile",e.params.timeouts.mobile)),e.params.timeouts.tablet&&(i=modifyTimeOutOfBidder(t,o,"tablet",e.params.timeouts.tablet))}else"adxMultiplier"===e.entity&&(e.params.adxMultiplier.desktop&&(i=modifyAdxMultiplierOfSite(t,"desktop",e.params.adxMultiplier.desktop)),e.params.adxMultiplier.mobile&&(i=modifyAdxMultiplierOfSite(t,"mobile",e.params.adxMultiplier.mobile)),e.params.adxMultiplier.tablet&&(i=modifyAdxMultiplierOfSite(t,"tablet",e.params.adxMultiplier.tablet)));else"swap"===e.action&&"tag"===e.entity&&(i=swapBidderTagIds(t,o=e.params.bidder,e.params.tag1,e.params.tag2));return i}catch(t){SM_OBJ.ADS.debugLog("runExperiments: failed to do action ".concat(JSON.stringify(e)),t)}}};SM_OBJ.ADS.adConfig=response.config,SM_OBJ.ADS.adExperiments=response.experiments;var conf=SM_OBJ.ADS.adConfig,subIds=response.config.site.subIds,sp_new_session=!1,sp_experiments=storageManager.getItem("spine_experiments");if(void 0!==sp_experiments&&""!==sp_experiments)try{sp_experiments=JSON.parse(atob(sp_experiments)),void 0!==sp_experiments.spine_session_id&&sp_experiments.spine_session_id!==storageManager.getItem("spine_session_id")&&(sp_new_session=!0,checkOptimization())}catch(e){SM_OBJ.ADS.debugLog("Invalid base64 string for experiments cookie",e),sp_new_session=!0,checkOptimization()}else sp_new_session=!0,checkOptimization();sp_new_session=!1;for(var x=0;x<SM_OBJ.ADS.adExperiments.length;x++){var exp=SM_OBJ.ADS.adExperiments[x],conditions=exp.conditions,variants=exp.variants,exp_id=exp.exp_id,name=exp.name,devices=exp.device,optimization=checkOptimization(exp_id),isGeoEnabled=window.utils.checkExperimentGeo(SM_OBJ.SESSION.GEO_COUNTRY,exp.geo),isActive=exp.isActive,activateExperiment=window.utils.checkConditions(conditions,subIds),isDeviceExperiment=devices.indexOf(SM_OBJ.ADS.device)>-1;isActive&&isDeviceExperiment&&isGeoEnabled&&(activateExperiment&&-1!==optimization?(updateConfig(conf,variants[optimization].actions,exp_id),SM_OBJ.ADS.experiments.push({exp_id:exp_id,var_id:variants[optimization].var_id})):activateExperiment&&-1===optimization&&isDeviceExperiment&&isActive&&SM_OBJ.ADS.experiments.push({exp_id:exp_id,var_id:exp_id+"_control"})),SM_OBJ.ADS.adConfig=conf}}catch(e){SM_OBJ.ADS.debugLog("runExperiments",e)}},refreshSlots:function(e,t,i){try{if("lazy load"!==t){if(!SM_OBJ.ADS.tabInView)return SM_OBJ.ADS.debugLog("refreshSlots - blocked","tabInView = false - blocking refresh",!1),!1;e.some(()&&$("#IL_INSEARCH").remove(),"refresh all"===t||e.length===SM_OBJ.ADS.allSlotIds.length?(SM_OBJ.ADS.clearSlotTargeting(SM_OBJ.ADS.allSlotIds),SM_OBJ.ADS.destroySlots()):(SM_OBJ.ADS.clearSlotTargeting(e),SM_OBJ.ADS.destroySlots(e))}var a=void 0!==i?i:SM_OBJ.ADS.providerTimeout,o=void 0!==t?t:"bid refresh",r={slotIds:e,trigger:o,timeout:a};SM_OBJ.ADS.debugLog("refreshing slotids "+e.toString()+" with timeout "+a+"ms triggered by "+o,r,!1);var n={refresh:"true",lazyload:"false"};"lazy load"===t&&(n.refresh="false",n.lazyload="true"),["unsold","interval","click","refresh all","viewable"].indexOf(t)>-1&&(n.refresh_type=t);var d={slts:e,trigger:t,timeout:a,keyvals:n,isRefresh:n.refresh};SM_OBJ.ADS.startAuction(d)}catch(e){SM_OBJ.ADS.debugLog("refreshSlots",e)}},destroySlots:function(e){try{googletag.cmd.push((function(){Array.isArray(e)?(SM_OBJ.ADS.debugLog("destroying GPT slots "+e.toString(),e,!1),e.forEach((function(e){SM_OBJ.ADS.clearSlotContainer(e),googletag.destroySlots([SM_OBJ.ADS.gptadslots[e]]),delete SM_OBJ.ADS.gptadslots[e]}))):(SM_OBJ.ADS.debugLog("destroying ALL GPT slots ",SM_OBJ.ADS.allSlotIds,!1),SM_OBJ.ADS.allSlotIds.forEach((),googletag.destroySlots(),SM_OBJ.ADS.gptadslots={})}))}catch(e){SM_OBJ.ADS.debugLog("destroySlots",e)}},clearSlotContainer:function(e){try{var t=document.getElementById(e);t.setAttribute("data-google-query-id",""),t.innerHTML=""}catch(e){SM_OBJ.ADS.debugLog("clearSlotContainers",e)}},refreshEligibleSlots:function(e,t){try{var i=[],a="boolean"==typeof e?e:SM_OBJ.ADS.refreshViewableOnly,o="string"==typeof t?t:"interval";("interval"===o?SM_OBJ.ADS.refreshSlotIds:SM_OBJ.ADS.allSlotIds).forEach((function(e){try{a?SM_OBJ.ADS.activeSlots[e].eligibleForRefresh&&SM_OBJ.ADS.isInViewport(e)&&i.push(e):SM_OBJ.ADS.activeSlots[e].eligibleForRefresh&&i.push(e)}catch(e){SM_OBJ.ADS.debugLog("refreshEligibleSlots slotIds.forEach",e)}})),i.length>0?(SM_OBJ.ADS.debugLog("slots eligible for refresh "+i.toString()+" "+t,null,!1),SM_OBJ.ADS.refreshSlots(i,o)):SM_OBJ.ADS.debugLog("no eligible slots for refresh "+t,null,!1)}catch(e){SM_OBJ.ADS.debugLog("refreshEligibleSlots",e)}},refreshAllSlots:function(){try{SM_OBJ.ADS.refreshSlots(SM_OBJ.ADS.allSlotIds,"refresh all")}catch(e){SM_OBJ.ADS.debugLog("refreshAllSlots",e)}},addRefreshInterval:function(){try{SM_OBJ.ADS.debugLog("addRefreshInterval- setting refresh interval!",null,!1),SM_OBJ.ADS.setRefreshInterval=setInterval((function(){try{SM_OBJ.ADS.refreshEligibleSlots(SM_OBJ.ADS.refreshViewableOnly,"interval")}catch(e){SM_OBJ.ADS.debugLog("setRefreshInterval",e)}}),1e3*SM_OBJ.ADS.refreshViewableInterval)}catch(e){SM_OBJ.ADS.debugLog("addRefreshInterval",e)}},resetRefreshInterval:function(){try{SM_OBJ.ADS.clearRefreshInterval(SM_OBJ.ADS.setRefreshInterval),SM_OBJ.ADS.addRefreshInterval()}catch(e){SM_OBJ.ADS.debugLog("resetRefreshInterval",e)}},clearRefreshInterval:function(e){try{SM_OBJ.ADS.debugLog("clearRefreshInterval- clearing refresh interval",null,!1),clearInterval(e)}catch(e){SM_OBJ.ADS.debugLog("clearRefreshInterval",e)}},getPostAuctionWinner:function(e){var t=SM_OBJ.ADS.bidPool[e.adUnit].findIndex(();return SM_OBJ.ADS.bidPool[e.adUnit][t]||!1},configurePostAuctionCreative:function(){try{pbjs.que.push((function(){SM_OBJ.ADS.originalPrebidRenderAd=SM_OBJ.ADS.originalPrebidRenderAd||window.pbjs.renderAd,window.pbjs.renderAd=function(e,t){if(e&&t){var i=t,a=SM_OBJ.ADS.getBidByAdId(i),o=a.bid,r=SM_OBJ.ADS.bidPool[a.adUnit],n=SM_OBJ.ADS.activeSlots[a.elementId].latestAuction,d=r.findIndex((function(e){return!e.bidUsed&&e.adId!==i&&!e.expired&&e.bid>o})),s=null,S=null;d>-1?(S=(s=r[d]).bid,null!==s.adId&&(t=s.adId,(l=a).bidUsed=!1,l.bidWon=!1,delete l.auctionId,function(e){e.bidUsed=!0,e.bidWon=!0,e.postAuctionWinner=!0,e.auctionId=n,e.replacedBidAdId=i}(s)),SM_OBJ.ADS.debugLog("USING POST AUCTION BID "+t+" ($"+S+") instead of "+i+" ($"+o+") FOR "+s.elementId+" in "+n,{oldWinner:a,newWinner:s,bidPool:r},!1)):SM_OBJ.ADS.debugLog("USING ORIGINAL WINNING BID "+t+" ($"+o+") FOR "+a.elementId+" in auction "+n,{originalWinner:a,bidPool:r},!1)}var l;SM_OBJ.ADS.originalPrebidRenderAd(e,t)}}))}catch(e){SM_OBJ.ADS.debugLog("configurePostAuctionCreative",e)}}},window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push((),window.pbjs=window.pbjs||{},pbjs.que=pbjs.que||[];var loadPrebidAndGPT=function(){SM_OBJ.ADS.loadGoogleTagServices(),SM_OBJ.ADS.loadPrebid(),SM_OBJ.ADS.logTiming("wrapperInit","insights"),SM_OBJ.ADS.logTiming("pageStart","insights",null,start_stamp),debugOut("SM_OBJ.ADS.INIT()"),SM_OBJ.ADS.initialize()};loadPrebidAndGPT(),debugOut("Display parsed")}()})();