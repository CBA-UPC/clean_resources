!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"},(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[1138],{43514:e=>{.exports=,15228:(e,t,r)=>{t.formatArgs=t.save=t.load=t.useColors=t.storage=),t.destroy=((),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(,e.exports=r(14307)(t);let{formatters:n}=e.exports;n.j=,14307:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,i;let a=null;function s(...e){if(!s.enabled)return;let n=Number(new Date),o=n-(r||n);s.diff=o,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,,t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:set:),"function"==typeof t.init&&t.init(s),s}turn t.debug=t,t.default=t,t.coerce=t.disable=t.enable=t.enabled=t.humanize=r(43514),t.destroy=Object.keys(e).forEach(,t.names=[],t.skips=[],t.formatters={},t.selectColor=t.enable(t.load()),t}},97806:(e,t,r)=>{"use strict";var n,o,i=r(50209),a=r.n(i),s=r(54138),c=r.n(s),l=function(e){return e.Development="development",e.Production="production",e}(l||{}),u=r(33970),d=r.n(u),p=f=(e,t)=>{if(!t)return e;var r=e.indexOf("?")>=0?"&":"?";return`${e}${r}${t}`};function h(e){return!!e&&"object"==typeof e&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e).isPrototypeOf(Object))}var m=e=>{var t=[];if(!e||!h(e))return"";for(var r=0,n=Object.entries(e);r<n.length;r++){var o=d()(n[r],2),i=o[0],a=o[1];if(i&&void 0!==a){var s=v(a);if(s){t.push([encodeURIComponent(i),encodeURIComponent(s)]);continue}if(h(a))for(var c=0,l=Object.entries(a);c<l.length;c++){var u=d()(l[c],2),p=u[0],f=u[1];if(p&&void 0!==f){var m=v(f);if(null!==m){var g=`${encodeURIComponent(i)}[${encodeURIComponent(p)}]`;t.push([g,encodeURIComponent(m)])}}}}}return t.map(e=>{var t=d()(e,2),r=t[0],n=t[1];return`${r}=${n}`}).join("&")},v=e=>{if(null===e)return"null";switch(typeof e){case"boolean":case"number":case"string":return`${e}`;default:return null}},g=g||{}),y={v:"tumblr"},b={Impression:"impression",TimeSpentOnSite:"TimeSpentOnSite",SendAPostClick:"SendAPostClick",SendAPostSelected:"SendAPostSelected",ShareDestination:"ShareDestination",Like:"like",Unlike:"unlike",ReplyIconClick:"reply_icon_click",Notes:"notes",Follow:"follow",Share:"share",ViewableImpression:"viewable_impression",ClientReblog:"client_reblog",PostSuccess:"PostSuccess",ScreenView:"ScreenView",HydraConfigLoaded:"hydra_config_loaded",Photo:"photo",PhotoClickThrough:"photo_click_through",CTAButton:"cta_button",CTAClick:"action_click",ClickThrough:"click_thru",VideoClickThrough:"video_click_through",Click:"click",WrittenUrlClickThrough:"written_url_click_through",Avatar:"avatar",CopyPostLink:"CopyPostLink",Hyperlink:"caption",HyperlinkedImage:"hyperlinked_image",VideoPlay:"video_play",VideoAutoPlay:"video_auto_play",HideAd:"hide_ad",AdFreeLinkClick:"adMeatballs:goAdsFreeSelected",PostActivitySendReply:"notesScreen:replySendButtonTapped",SessionStart:"SessionStart",SessionEnd:"SessionEnd"},C=r(17276),w=r.n(C),_=r(15228),k=r.n(_),S={}),E=E||{}),x=()=>new Promise(e=>{if("undefined"==typeof __tcfapi)return e({success:!1,error:"noApi"});__tcfapi("ping",2,t=>{if(!t.gdprApplies)return e({success:!1,error:"noGdpr"});__tcfapi("getExtraConsents",2,(t,r)=>r?e({success:r,consent:t}):e({success:!1,error:"getExtraConsentsError"}))})}),P=()=>{var e,t;return w()().async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w()().awrap(x());case 2:if((t=r.sent).success){r.next=5;break}return r.abrupt("return",!0);case 5:return r.abrupt("return",(null===(e=t.consent)||void 0===e?void 0:e.analyticsConsent)!==!1);case 6:case"end":return r.stop()}},null,null,null,Promise)},T=new Set([b.Hyperlink,b.Follow,b.Impression,b.Like,b.Notes,b.Photo,b.ReplyIconClick,b.SendAPostClick,b.VideoAutoPlay,b.CTAClick,b.AdFreeLinkClick,b.Avatar,b.Click,b.ClickThrough,b.CopyPostLink,b.CTAButton,b.HideAd,b.HydraConfigLoaded,b.HyperlinkedImage,b.PostActivitySendReply,b.PhotoClickThrough,b.SendAPostSelected,b.ShareDestination,b.VideoClickThrough,b.VideoPlay,b.ViewableImpression,b.WrittenUrlClickThrough,b.ClientReblog,b.PostSuccess,b.Share,b.Unlike]),I=F=k()("redpop:kraken"),O=F.extend("tracker"),N=F.extend("event"),L=F.extend("rejected"),A=F.extend("allowed");lass R{constructor(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.intervalTimeout,i=n.gdprAnalyticsObjectionAllowedEvents;a()(this,"events",[]),a()(this,"trackers",[]),a()(this,"hasAnalyticsConsent",null),a()(this,"totalVisibilityDurationMs",0),a()(this,"startDurationOnVisibilityMs",0),a()(this,"shouldTrackSessions",!1),a()(this,"impressionsLogged",{}),a()(this,"PULT_PERFORMANCE_EVENTS",{Load:["fetchStart","domContentLoadedEventEnd"],DomainLookup:["domainLookupStart","domainLookupEnd"],Connect:["connectStart","connectEnd"],SecureConnect:["secureConnectionStart","connectEnd"],Request:["requestStart","responseStart"],Response:["responseStart","responseEnd"],DomInteractive:["domLoading","domInteractive"]}),a()(this,"NETWORK_PERFORMANCE_EVENTS",{NetworkPerformanceDns:["domainLookupStart","domainLookupEnd"],NetworkPerformanceConnect:["connectStart","connectEnd"],NetworkPerformanceRequest:["requestStart","responseStart"],NetworkPerformanceResponse:["responseStart","responseEnd"],NetworkPerformanceComplete:["fetchStart","responseEnd"]}),a()(this,"NETWORK_PERFORMANCE_EVENT_DETAILS",{resource_url:"name",transfer_length:"transferSize",payload_length:"decodedBodySize",content_length:"encodedBodySize",initiator_type:"initiatorType"}),a()(this,"INITIATOR_TYPE_COUNTS",{img:10,link:10,script:10,css:10}),a()(this,"onBeforeUnload",()=>{if("visible"===document.visibilityState&&(this.totalVisibilityDurationMs+=performance.now()-this.startDurationOnVisibilityMs),this.shouldTrackSessions){var e={eventName:b.TimeSpentOnSite,eventDetails:{sessionDuration:performance.now(),visibilityDuration:this.totalVisibilityDurationMs}};this.logEvent(e,{sendPayloadImmediately:!0})}}),a()(this,"onVisibilityChange",()=>{if(this.shouldTrackSessions)switch(document.visibilityState){case"visible":this.startDurationOnVisibilityMs=performance.now(),this.logEvent({eventName:b.SessionStart,eventDetails:{action:"resume"}});break;case"hidden":var e=performance.now()-this.startDurationOnVisibilityMs;this.totalVisibilityDurationMs+=e,this.startDurationOnVisibilityMs=0,this.logEvent({eventName:b.SessionEnd,eventDetails:{sessionDuration:e,tabDuration:performance.now(),tabVisibilityDuration:this.totalVisibilityDurationMs}})}"hidden"===document.visibilityState&&this.sendPayload()}),a()(this,"logEvent",function(e,t){var n,o,i;return w()().async(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=r.createEvent({page:e.page,pathname:e.pathname,event_name:e.eventName,experiments:e.experiments||{},event_details:e.eventDetails||{},client_timestamp:r.getCurrentTimeInMilliseconds()}),null!==(n=e.eventDetails)&&void 0!==n&&n.placement_id?(i=r.createEventTracker(e,o),r.trackers.push(i),O(o.event_name,i)):(r.events.push(o),N(o.event_name,o)),!(null!=t&&t.sendPayloadImmediately)){a.next=5;break}return a.next=5,w()().awrap(r.sendPayload());case 5:case"end":return a.stop()}},null,null,null,Promise)}),a()(this,"getPageNameForCustomMetric",()=>""),a()(this,"logCustomMetric",e=>{var t=this.getPageNameForCustomMetric();this.events.push({__type__:"metric",metric_name:e.metricName,value:e.value,client_timestamp:this.getCurrentTimeInMilliseconds(),event_details:c()(c()({},e.eventDetails),{},{page:t})})}),a()(this,"logImpression",function(e,t){var n,o;return w()().async(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!(null!=t&&t.allowRepeatedImpressions)&&r.wasImpressionPreviouslyLogged(e))){i.next=2;break}return i.abrupt("return");case 2:if(n=r.createEvent({page:e.page,pathname:e.pathname,event_name:e.eventName,experiments:e.experiments||{},event_details:e.eventDetails||{},client_timestamp:r.getCurrentTimeInMilliseconds(),serve_id:e.serveId}),e.placementId?(o=r.createImpressionTracker(e,n),r.trackers.push(o),O(n.event_name,o)):(r.events.push(n),N(n.event_name,n)),!(e.displayType===S.Sponsored||null!=t&&t.sendPayloadImmediately)){i.next=7;break}return i.next=7,w()().awrap(r.sendPayload());case 7:r.impressionWasLoggedWithInfo(e);case 8:case"end":return i.stop()}},null,null,null,Promise)}),a()(this,"logPerformanceMetric",,a()(this,"runInterval",function(){return w()().async(function(e){for(;;)switch(e.prev=e.next){case 0:return P().then(,e.next=3,w()().awrap(r.sendPayload());case 3:case"end":return e.stop()}},null,null,null,Promise)}),a()(this,"sendPayload",function(){var e,t,n;return w()().async(function(o){for(;;)switch(o.prev=o.next){case 0:if(null!==r.hasAnalyticsConsent){o.next=2;break}return o.abrupt("return");case 2:if(e=r.events,t=r.trackers,r.events=[],r.trackers=[],r.hasAnalyticsConsent||(F("no analytics consent"),e=r.filterEventListByProperty("event_name",e),t=t.flatMap(e=>{var t=r.filterEventListByProperty("eventString",e.events),n=r.filterEventListByProperty("event_name",e.krakenEvents);return t.length||n.length?[c()(c()({},e),{},{events:t,krakenEvents:n})]:[]})),!(!e.length&&!t.length)){o.next=9;break}return o.abrupt("return");case 9:return F("sending payload",n={flushTime:r.getCurrentTimeInMilliseconds(),krakenClientDetails:r.clientDetails,krakenEvents:e,trackers:t}),o.prev=11,o.next=14,w()().awrap(r.apiFetch("/services/bblog",{baseUrl:r.krakenBaseUrl,credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0,body:n,ignoreResponse:!0}));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(11),"production"===E.Development&&console.error("Error sending Kraken metrics",o.t0);case 19:case"end":return o.stop()}},null,null,[[11,16]],Promise)}),a()(this,"wasImpressionPreviouslyLogged",e=>{if(!e.placementId&&!e.serveId&&e.displayType!==S.Sponsored)return!0;var t=this.impressionsLogged[e.eventName];return t&&-1!==t.indexOf(this.getUniqueIdentifierForImpression(e))}),a()(this,"createNetworkPerformanceEvents",e=>e.flatMap(e=>{var t=this.generateRandomString();return this.createPerformanceEvents(e,"NetworkPerformance","startTime",performance.timing.fetchStart,c()(c()({},this.getNetworkPerformanceResourceEventDetails(e)),{},{network_id:t}),this.NETWORK_PERFORMANCE_EVENTS)})),a()(this,"getNetworkPerformanceResourceEventDetails",e=>Object.keys(this.NETWORK_PERFORMANCE_EVENT_DETAILS).reduce((t,r)=>{var n=e[this.NETWORK_PERFORMANCE_EVENT_DETAILS[r]];return void 0!==n&&(t[r]=n),t},{})),this.apiFetch=t,this.intervalTimeout=void 0===o?5e3:o,this.basePage=e.basePage,this.routeSet=e.routeSet,this.sessionId=e.sessionId,this.krakenBaseUrl=e.krakenBaseUrl,this.clientDetails=e.clientDetails,this.configRef=e.configRef,this.clientDetails.manufacturer=navigator.vendor,P().then(,window.setInterval(this.runInterval,this.intervalTimeout),window.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("beforeunload",this.onBeforeUnload),this.gdprAnalyticsObjectionAllowedEvents=void 0===i?T:i}tartSessionMonitoring(){this.shouldTrackSessions=!0,"visible"===document.visibilityState&&(this.totalVisibilityDurationMs=performance.now(),this.startDurationOnVisibilityMs=performance.now(),this.logEvent({eventName:b.SessionStart,eventDetails:{action:"start"}}))}sendLoadMetrics(){var e=this;return w()().async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.createPerformanceEvents(performance.timing,"PultWarmStart","fetchStart",0,{pult_uuid:e.sessionId},e.PULT_PERFORMANCE_EVENTS).forEach(,t.next=3,w()().awrap(e.sendPayload());case 3:case"end":return t.stop()}},null,null,null,Promise)}queueResourceMetrics(){var e=this.getResourceSamples(),t=this.createNetworkPerformanceEvents(e);0!==t.length&&t.forEach(}filterEventListByProperty(e,t){return t.filter(t=>{var r=!!(t&&"string"==typeof t[e]&&this.gdprAnalyticsObjectionAllowedEvents.has(t[e]));return r?A("Allowed: %s",t[e]):L("Rejected event: %o",t),r})}impressionWasLoggedWithInfo(e){this.impressionsLogged[e.eventName]||(this.impressionsLogged[e.eventName]=[]),this.impressionsLogged[e.eventName].push(this.getUniqueIdentifierForImpression(e))}fillPageNamereateEvent(e){var t,r,n,o,i=(t=c()({},e),r=(e,t)=>null!=t,o=Object.entries(t).filter(e=>{var t=d()(e,2);return r(t[0],t[1])}),Object.fromEntries(n?o.map(n):o));return i.client_session_id=this.sessionId,this.fillPageName(i),i.event_details.pathname||(i.event_details.pathname=window.location.pathname),i.event_details.hostname||(i.event_details.hostname=window.location.hostname),i}createEventTracker(e,t){var r,n,o=null===(r=e.eventDetails)||void 0===r?void 0:r.placement_id;return null===(n=e.eventDetails)||void 0===n||delete n.placement_id,delete t.event_details.placement_id,{pt:o,events:[{eventString:e.eventName,timestamp:t.client_timestamp,data:c()({},e.eventDetails)}],krakenEvents:[t]}}createImpressionTracker(e,t){return{pt:e.placementId,events:[{eventString:e.eventName,timestamp:t.client_timestamp,data:{}}],krakenEvents:[t]}}createPerformanceEvent(e){var t;return this.createEvent({__type__:"performance",domain:e.domain,timer:e.timer,offset:e.offset,duration:e.duration,event_details:e.eventDetails||{},page:e.page||this.basePage,hres_ts:null!==(t=e.ts)&&void 0!==t?t:this.getCurrentTimeInNanoSeconds(),flags:this.configRef?{ref:this.configRef.flags}:void 0})}createPerformanceEvents(e,t,r,n,o,i){return Object.keys(i).flatMap(a=>{var s=d()(i[a],2),c=s[0],l=s[1],u={eventName:a,startTime:e[c],endTime:e[l]},p=e[r];if(M(u.startTime)&&M(u.endTime)&&M(p)&&u.startTime>0&&u.endTime>0&&u.startTime<u.endTime){var f=I(u.endTime-u.startTime),h=I(u.startTime-p),m=I(Math.floor(n+p))+h;return this.createPerformanceEvent({domain:t,offset:h,duration:f,ts:m,eventDetails:o,timer:u.eventName})}return[]})}getResourceSamples(){var e,t,r=(e=window.performance.getEntriesByType("resource"),t=e.reduce((e,r,n,o)=>{var i=t(r,n,o);return c()(c()({},e),{},{[i]:[...e[i]||[],r]})},{}));return Object.keys(this.INITIATOR_TYPE_COUNTS).reduce((e,t)=>{var n=this.INITIATOR_TYPE_COUNTS[t];return e.push(...function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e||!e.length||t<1)return[];for(var r=-1,n=e.length-1,o=[...e];++r<o.length;){var i=r+Math.floor(Math.random()*(n-r+1)),a=o[i];o[i]=o[r],o[r]=a}return o.slice(0,Math.min(t,o.length))}(r[t]||[],n)),e},[])}etCurrentTimeInNanoSeconds(){return I(performance.timing.navigationStart+performance.now())}ar D=j=V="__7YJJqRODjYV7Q9bh0C";try{localStorage.setItem(V,"1"),localStorage.removeItem(V),n=!0}catch(e){n=!1}n&&localStorage;try{sessionStorage.setItem(V,"1"),sessionStorage.removeItem(V),o=!0}catch(e){o=!1}var U=o?sessionStorage:{clear:D,getItem:j,key:j,length:0,removeItem:D,setItem:D},B=/droid ([\w.]+)\b.+(android[- ]x86)/i,$=/android/i,H=/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,W=e=>(t,r)=>{var n=c()(c()({},e.apiFetchStore||{}),{},{csrfToken:e.csrfToken}),o={baseUrl:e.apiUrl||"",method:"POST",credentials:"include",headers:c()(c()({Authorization:`Bearer ${n.API_TOKEN}`,Accept:"application/json;format=camelcase","X-Ad-Blocker-Enabled":"true"===U.getItem("tumblrAdBlockerEnabled")?1:0,"X-Version":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deviceType,r=e.appVersion,n=e.appBuildNumber,o=e.deviceOSVersion,i=e.appName,a=void 0===i?"production"===l.Production?"redpop":"internal":i,s=e.appBuildType;return[void 0===t?"redpop":t,void 0===r?"3":r,void 0===n?0:n,void 0===o?"":o,a,void 0===s?"":s].join("/")}()},JSON.parse(n.extraHeaders||"{}")),{},{"accept-language":"en"})},i=c()(c()(c()({},o),r),{},{headers:c()(c()({},o.headers),r.headers)});if(i.baseUrl){var a=new URL(i.baseUrl);return a.pathname=t,window.fetch(a,c()(c()({},i),{},{body:JSON.stringify(i.body)}))}};class q extends R{a()(q,"PageName","ImageUrlPage"),function(){var e,t,r,n,o,i=document.querySelector("#app-download-links-container > div"),a=navigator.userAgent,s=window.___INITIAL_STATE___||{},l=new q((s.analyticsInfo||{}).kraken,W(s)),u=window.location.pathname;if(i){var d=i.querySelector('[data-app-type="google"]'),f=i.querySelector('[data-app-type="apple"]');!f||$.test(a)||B.test(a)||f.classList.remove("appLinksHidden"),d&&!H.test(a)&&d.classList.remove("appLinksHidden")}t=(e={routeSet:"media"}).hashedUserId,r=e.routeSet,n=c()(c()({},y),{},{rand:Math.round(1e7*Math.random()),tid:"blogNetwork"===r?g.BlogNetwork:g.Main,_ts:Date.now(),ref:window.location.href}),o=t?c()(c()({},n),{},{user_id:t}):n,new Image(1,1).src=p("https://pixel.wp.com/g.gif",o),l.startSessionMonitoring(),l.logEvent({eventName:b.ScreenView,eventDetails:{pathname:u,referrer:document.referrer,color_palette:"trueBlue"},page:q.PageName})}()},74579:20881:50209:17641:30731:54138:17276:(e,t,r)=>{var n=r(16544).default;.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},33970:45252:45992:16544:99207:,);