import{r as f,j as r,o as V,g as k}from"./e5833d38.js";import{bP as U,T as y,A as w,D,d as v,bQ as _,Y as C,bR as F,bS as L,bT as E,bU as I,G as M,a3 as R,bV as A,bW as B,an as O}from"./48a35c56.js";import{P as Q}from"./10437895.js";const $=({videoUrl:e,disabled:t,session:a})=>{const n=f.useCallback(()=>a.setStreamHasFiredEndEvent(!0),[a]);U({videoUrl:e,disabled:t,eventType:"sessionend",onReceived:n})},x=({speakers:e,analyticsAreaName:t})=>{const a=w(),[n,l]=f.useState(!1),c=e.length>4;let d=e;!n&&c&&(d=e.slice(0,4));const i=n?"translate.base.session.info.actions.less":"translate.base.session.info.actions.more",o=s=>{s.preventDefault(),l(m=>!m)};return r.jsxs("div",{className:"speaker-badges__list",children:[d.map(s=>r.jsx(Q,{type:"speaker",name:s.displayName,company:s.company,id:s.speakerId,image:s.thumbnail??s.photo,analyticsAreaName:t},s.speakerId+s.displayName)),c&&r.jsx("div",{className:"speaker-badges-toggle",children:r.jsx(D,{analyticsTag:a({aN:t,cN:i}),ariaLabel:i,buttonStyle:"text",onClickFunction:o,telemetryIdentifier:"telemetry.content-toggle.expand",glyph:{name:n?"chevron-up":"chevron-down",size:{heightInPixels:"16px",widthInPixels:"16px"},postFix:!0},children:r.jsx(y,{textKey:i})})})]})},J=({speakers:e,analyticsAreaName:t,showLabel:a=!0})=>{if(!e)return null;const n=e.length===1?"translate.base.speakers.label.speaker":"translate.base.speakers.label.speakers";return e.length>0&&a?r.jsxs("div",{className:"speaker-badges__container",children:[r.jsxs("span",{className:"speaker-badges__label",children:[r.jsx(y,{textKey:n}),":"]}),r.jsx(x,{speakers:e,analyticsAreaName:t})]}):r.jsx(x,{speakers:e,analyticsAreaName:t})},z=e=>{if(!e)return"";let t;try{t=new URL(e)}catch{return""}const a=new URLSearchParams(window.location.search),n=a.get("ts");n&&t.searchParams.append("l",n);const l=a.get("asl");return l&&t.searchParams.append("asl",l),t.toString()},K=({failoverVideoUrl:e,isStreaming:t,liveStream:a,onDemand:n})=>{const{profileStore:l,configStore:c}=v(),i=c.isFlagEnabled("useSessionFailOverVideo")&&e||a,o=t&&l.isAuthenticated?i:n,s=z(o);return _({url:s})},G=e=>{const{url:t}=K(e),{consentObtained:a}=A();return B(t,a)},H=({session:e,linkToDetailsEnabled:t,showImage:a,showImageOnly:n,listenForHeight:l,children:c,onVideoViewed:d})=>{const{profileStore:i}=v(),{translate:o}=C(),s=G(e),m=F({videoUrl:s,disabled:!l});$({videoUrl:s,session:e}),L({videoUrl:s,onPlay:d,sessionCode:e==null?void 0:e.sessionCode}),E({videoUrl:s});const p=i.isAuthenticated,{elementRef:S,firstVisible:P}=I(),b=()=>!p&&e.isStreaming,j=()=>a||n,g=()=>{var u;return(e.isStreaming&&p||((u=e.onDemand)==null?void 0:u.length)>0)&&!n},h=()=>`/${e.detailNavigation}`,T=()=>{const u=e.title.replace(/'/g,"\\'");return h()===""?o("translate.base.videos.labels.video-for",{sessionTitle:u}):o("translate.base.videos.labels.view-details-for",{sessionTitle:u})},N=()=>r.jsx(O,{maxSize:!0,children:r.jsx("iframe",{width:"360",height:"200",src:s,frameBorder:"0",allow:"fullscreen",title:e?o("translate.base.live-stream.labels.live-stream-for",{title:e.title}):""})});return r.jsx("div",{ref:S,className:"tile-container",children:(g()||a||b())&&P&&r.jsxs("div",{className:"tile-player",style:m,children:[b()&&!a&&c,j()&&(e==null?void 0:e.onDemandThumbnail)&&r.jsx(M,{className:k("tile-player__link",{"not-active":!t}),ariaLabel:T(),href:h(),telemetryIdentifier:`session-catalog.tile.session-link.${e.sessionId}`,buttonStyle:"text",children:r.jsx(R,{role:"presentation",alt:`Card for ${e.title}`,className:"tile-player__image",src:e.onDemandThumbnail})}),g()&&N()]})})},X=V(H);export{J as S,X as T};
