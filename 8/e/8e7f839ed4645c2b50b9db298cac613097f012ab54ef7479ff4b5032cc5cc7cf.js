!function(){"use strict";try{window.snaptr.cfg('edd61b2c-749c-47e6-abc3-1cebb0f1139f',{"asc":[],"a":["PII","AV3"],"ipg":"34","b":[],"t":"1264","v":"3.7.5-2401032347","ec":[]})}catch(e){}}();nction(e){var t=this,s=this.$locale();if(!this.isValid())return r.bind(this)(e);var i=this.$utils(),o=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return s.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return s.ordinal(t.week(),"W");case"w":case"ww":return i.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return i.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return i.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(o)}}},e.exports=s()},247556:function(e,t,s){var r=s(288668),i=s(447443),o=s(301196),a=s(829932),n=s(307518),h=s(274757),u=Math.min;function l(e,t,s){for(var l=s?o:i,d=e[0].length,f=e.length,c=f,P=Array(f),m=1/0,p=[];c--;){var g=e[c];c&&t&&(g=a(g,n(t))),m=u(g.length,m),P[c]=!s&&(t||d>=120&&g.length>=120)?new r(c&&g):void 0}g=e[0];var v=-1,I=P[0];e:for(;++v<d&&p.length<m;){var w=g[v],U=t?t(w):w;if(w=s||0!==w?w:0,!(I?h(I,U):l(p,U,s))){for(c=f;--c;){var y=P[c];if(!(y?h(y,U):l(e[c],U,s)))continue e}I&&I.push(U),p.push(w)}}return p}e.exports=l},24387:function(e,t,s){var r=s(229246);function i(e){return r(e)?e:[]}e.exports=i},225325:function(e,t,s){var r=s(829932),i=s(247556),o=s(105976),a=s(24387),n=o((function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=n},418601:function(e,t,s){var r=s(14841),i=1/0,o=17976931348623157e292;function a(e){return e?(e=r(e))===i||e===-1/0?(e<0?-1:1)*o:e==e?e:0:0===e?e:0;var t}e.exports=a},640554:function(e,t,s){var r=s(418601);function i(e){var t=r(e),s=t%1;return t==t?s?t-s:t:0}e.exports=i},597146:function(e,t,s){"use strict";var r=s(225325),i=s.n(r),o=s(227361),a=s.n(o),n=s(333948),h=s.n(n),u=s(560285),l=s.n(u),d=s(241637),f=s.n(d),c=s(115306),P=s.n(c),m=s(727484),p=s.n(m),g=s(828734),v=s.n(g),I=s(619849),w=s(335664),U=s(359719),y=s(380337);p().extend(v()),t.Z={data:()=>({userLoaded:null}),mixins:[w.Z,U.Z,y.Z],computed:{...(0,I.xq)(["getLastProfileItemIds","getPost","getTempItemIds"]),...(0,I.ri)(["authUser","authUserId","isAuth"]),...(0,I.m9)(["findUserByUserName","getUser","userId"]),...(0,I.Tj)(["route"]),...(0,I.ld)(["getInit"]),...(0,I.or)(["activePostLabel"]),isProfileAlias(){return"ProfileAlias"===this.$route.name},isProfile(){return"Profile"===this.$route.name||this.isProfileAlias},isProfileOrInner(){return this.isProfile||"ProfileInner"===this.$route.name},isLabelPage(){return!!this.activePostLabel},isPostPage(){return"Post"===this.$route.name},isProfileOrInnerOrPost(){return this.isProfileOrInner||["Post","MessagePage"].includes(this.$route.name)},isOwnProfileOrPostFirstLoad(){return!this.route.from.name&&this.isAuthUser&&this.isProfileOrInnerOrPost}},methods:{...(0,I._Q)(["fetchUserStories","fetchUserHighlights","resetUserStories"]),...(0,I.M6)(["resetProfileHighlights"]),...(0,I.Cm)(["setCurrentUser","resetUserLinks","setProfileDataLoadingError","resetNfts"]),...(0,I.p9)(["resetSpotifyBio"]),...(0,I._B)(["fetchCurrentUser","socialButtonsGetByUser"]),...(0,I.xk)(["setItemIds","setLastProfileItemId","setPrevUserPostsToLoad","setPinnedIds","resetPosts","resetPostsFiltersCounter","deletePost"]),...(0,I.rn)(["fetchUserPosts","fetchPost","fetchPostsPinned"]),...(0,I.YR)(["fetchMessageToPost","fetchChatsMessages"]),...(0,I.hJ)(["resetScheduledStreams"]),async fetchProfileData(e,t){if(this.setProfileDataLoadingError(!1),!e)return void this.setProfileDataLoadingError(!0);let s;if(this.setPrevUserPostsToLoad(!1),this.userLoaded)s=this.userLoaded,this.userLoaded=null;else{this.isAfterUnblock||this.$route.params.noLoadUser||this.isOwnProfileOrPostFirstLoad||this.setCurrentUser(null);try{if((this.$route.params.noLoadUser||this.isOwnProfileOrPostFirstLoad)&&(s=Number.isNaN(+e)?this.findUserByUserName(e):this.getUser(e)),!s||!s.id){let t;if(this.getUserWithRef&&this.referrer)try{const{host:e,pathname:s}=new URL(this.referrer);t=this.$window.encodeURIComponent(`${e.replace("www.","")}${"/"!==s?s:""}`)}catch(u){}s=await this.fetchCurrentUser({id:e,httpreferrer:t})}}catch(u){this.setProfileDataLoadingError(!0)}}if(s){if(!s.isPerformer&&this.isProfileOrInner&&"archived"===this.$route.params.postType)return void this.$router.replace({name:"Profile",params:{userId:s.username}});if(this.isProfileOrInnerOrPost&&s.username!==this.$route.params.userId)return this.userLoaded=s,void this.changeRoute(s);if(this.isMyProfileHasScenario)return;if(this.isProfileOrInner&&s.isBlocked)return void("ProfileInner"===this.$route.name&&this.$router.replace({name:"Profile",params:{userId:s.username}}));if(!s.isPrivateRestriction||s.isPrivateRestriction&&this.isAuthUser||s.subscribedBy){var r,o,a;const{id:e}=s,{name:u,params:{postId:l,noLoadPostData:d,postType:f},query:{q:c,order:P,filter:m}}=this.$route;if(s.isPerformer&&this.isProfileOrInner&&(this.isAuth&&this.fetchUserHighlights({userId:e}),s.hasStories&&s.canLookStory&&this.fetchUserStories(e)),["Post","MessagePage"].includes(u)&&l&&!d)return void await this.setPostData(t);this.isProfileOrInner&&s.isPerformer&&this.socialButtonsGetByUser(e);const p=this.getLastProfileItemIds(s.username,f);let g,v,I,w,U,y,T;if(p.length){var n,h;if(({pinnedPostsIds:I,userPostItemIds:w}=this.getTempItemIds(s.username)),["Post","PostsEdit","MessagePage"].includes(null===(n=this.route)||void 0===n||null===(h=n.from)||void 0===h?void 0:h.name)?U=[+this.route.from.params.postId]:(U=i()(I,p),U.length||(U=i()(w,p))),g=w.indexOf(U[0]),I.length?v=I.indexOf(U[0]):this.setPinnedIds(),-1===v&&g>0){if(this.setPinnedIds(),this.isPostPage)return;this.setPrevUserPostsToLoad(!0)}this.isProfile&&(-1===v&&-1===g?this.fetchPostsPinned({isPinnedPostRemove:this.isPinnedPostRemove}):(g>0||s.hasPinnedPosts&&!I.length)&&this.setPrevUserPostsToLoad(!0)),(g>=0||v>=0)&&(v>=0&&this.setPinnedIds(I),this.setItemIds(U))}if(g>-1){const[e]=this.getPost(w[g]);if(!e)return;e.isPinned?(T=!0,this.setPrevUserPostsToLoad(!1)):y=this.getTimeMarker(e)}const $={id:e,type:f,query:c,order:P,filter:m,beforePublishTime:y,more:!!y,label:this.activePostLabel};this.isPostPage||(s.isPerformer?await this.getProfileDataPosts($,T):this.resetPosts(),this.setLastProfileItemId({username:s.username,arr:[]}));const L=null===(r=this.route)||void 0===r||null===(o=r.from)||void 0===o?void 0:o.params.postId;null!==(a=U)&&void 0!==a&&a.length&&!L&&this.hasPrevUserPostsToLoad&&setTimeout((()=>{const e=this.$refs.loadPrevPostsButton;this.scrollToElement({el:e,offset:65})}),1e3)}else s.isPrivateRestriction&&["Post","MessagePage"].includes(this.$route.name)&&this.$router.replace({name:"Profile",params:{userId:s.username,noLoadUser:!0}})}},async getProfileDataPosts(e,t){const{filter:s,order:r}=this.$route.query,i=undefined;this.isProfile&&!s&&!this.activePostLabel&&(!r||"publish_date_asc"===r)&&(e.pinned=0);try{t?await Promise.all([this.fetchPostsPinned({isPinnedPostRemove:this.isPinnedPostRemove}),this.fetchUserPosts(e)]):await this.fetchUserPosts(e)}catch(o){}},getTimeMarker(e){const t=a()(e,"postedAt"),s=a()(e,"postedAtPrecise");return s?p().unix(s).format("X.SSSSSS"):p()(t).format("X.SSSSSS")},changeRoute(e){this.isProfileAlias?this.$router.replace({name:"Profile",params:{userId:e.username}}):this.$router.replace({...this.$route,params:{userId:e.username}})},async setPostData(e){const{params:{postId:t}}=this.$route;let s;if("MessagePage"===this.$route.name&&(s=await this.fetchMessageToPost({groupId:t,userId:e,limit:1,id:t})),this.isPostPage&&(s=await this.fetchPost({id:t,active:!0})),Array.isArray(s)&&!s.length)this.setProfileDataLoadingError(!0);else if(s.author){const{author:{id:e,username:t}}=s,{params:{userId:r}}=this.$route;let i;if(t)i=t;else if(e){const t=this.getUser(e);i=a()(t,"username",!1)}i!==r&&await this.$router.replace({...this.$route,params:{userId:i}})}},resetProfileData(e){this.resetPostsFiltersCounter(),this.resetUserStories(e),this.resetProfileHighlights(),this.resetSpotifyBio(),this.resetUserLinks(),this.resetNfts(),this.resetScheduledStreams()}}}},359719:function(e,t,s){"use strict";var r=s(619849),i=s(214531),o=s(502489);t.Z={mixins:[i.a],computed:{...(0,r.fD)(["scenario"]),...(0,r.ri)(["isAuth","authUser"]),isMyFraudsterProfile(){var e;return this.isAuthUser&&(null===(e=this.scenario)||void 0===e?void 0:e.action)===o.o.FRAUD_REPAYMENT},isMyProfileNeedIV(){var e;return this.isAuthUser&&(null===(e=this.scenario)||void 0===e?void 0:e.action)===o.o.LOGIN_REQUIRES_WAIT_IV},isHasScenario(){return this.isAuth&&this.authUser.hasScenario},isMyProfileHasScenario(){return this.isMyFraudsterProfile||this.isMyProfileNeedIV}}}},380337:function(e,t,s){"use strict";var r=s(619849);t.Z={computed:{...(0,r.or)(["activePostLabel"]),isPinnedPostRemove(){const{query:{filter:e,order:t}}=this.$route,s=e||t;return!s||"publish_date_asc"===s}},methods:{postsByTypeParams(){const{name:e,query:{filter:t,order:s,q:r},params:{labelId:i,postType:o}}=this.$route;return{isHidePinnedPosts:!("Profile"!==e||t||this.activePostLabel||s&&"publish_date_asc"!==s),routeParams:{type:o,query:r,order:s,filter:t,label:i||this.activePostLabel}}}}}},335664:function(e,t,s){"use strict";var r=s(21703),i=s.n(r);t.Z={methods:{scrollToTop({behavior:e="smooth"}={}){if(window.pageYOffset>0)try{window.scrollTo({top:0,behavior:e})}catch(t){if(!(t instanceof TypeError))throw t;window.scrollTo(0,0)}},scrollTo({behavior:e="smooth",top:t,offsetDesktop:s=48}={}){this.$mq.includes("sm")||(t=Math.max(t-s,0));try{window.scrollTo({top:t,behavior:e})}catch(r){if(!(r instanceof TypeError))throw r;window.scrollTo(0,t)}},scrollToBottom(){this.$nextTick((()=>{window.scrollTo(0,document.body.scrollHeight)}))},scrollToElement({behavior:e="smooth",offset:t=0,offsetDesktop:s=0,el:r}={}){if(!r)return;let i=r.getBoundingClientRect().top+window.scrollY;this.$mq.includes("sm")||(i-=s),t&&(i-=t);try{window.scrollTo({top:i,behavior:e})}catch(o){if(!(o instanceof TypeError))throw o;window.scrollTo(0,i)}}}}},214531:function(e,t,s){"use strict";s.d(t,{a:function(){return i}});var r=s(619849);const i={computed:{...(0,r.m9)(["userId"]),...(0,r.ri)(["authUserId"]),isAuthUser(){return!(!this.userId||!this.authUserId||this.userId!==this.authUserId)}}}}}]);