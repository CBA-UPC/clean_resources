(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1899],{1899:29505:function(e,n,r){"use strict";r.d(n,{Z:);var i=r(31737),t=r(17774),l=r(99276),a=r(32735),s=r(30007),u=r.n(s),o=r(17494),d=r.n(o),c=r(72708),m=r(4881),g=r.n(m),p=r(99),v=r(66458),b=r(70231),y=r(12835),f=r(60216),k=r.n(f),N=function(e){var n,r=e.children;try{n=JSON.parse(localStorage.getItem("readingHistoryCount"))}catch(e){console.warn("unable to parse readingHistoryCount from localStorage\n",e),n=null}return r(n||[])};N.propTypes={children:k().func.isRequired};var h=r(74512),O=function(e){var n=e.children,r=e.renderFrequency;return(0,h.jsx)(N,{children:function(e){return n(!r||0===r||e&&e%r==0)}})},j=r(97494),F=r(69236),S=r(63004),T=r(59174),w=r(54298),D=r(96190),x=["renderFrequency","forceDisplay","origin","type"];r q={"haaretz.co.il":"htz","themarker.com":"tm","haaretz.com":"htz"}[g().get("domain")];function P(e){var n=(0,c.Db)(u()),r=(0,l.Z)(n,2),i=r[0],a=r[1].loading,s=(0,y.Z)({query:{from:"s"},matchOnServer:!1}),o=(0,b.aF)().user,d=e.renderFrequency,m=e.forceDisplay,g=e.origin,p=e.type,f=(0,t.Z)(e,x),k="manual"===p;return s||m?(0,h.jsx)(w.Z,{children:(0,h.jsx)("div",{children:(0,h.jsx)(O,{renderFrequency:d,children:function(e){return k||!1!==e?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(v.Z,I(I({featureName:f.featureName,signupNewsletter:i,loading:a,user:o,segmentNumber:f.segmentNumber,titleText:f.desktopTitle,segmentId:f.segmentId,tagNumber:f.tagNumber,origin:g||"yellow-element"},f),{},{segmentName:f.segmentName,displayDialogButton:f.displayDialogButton,isSubscriber:f.isSubscriber,subscribersOnly:f.subscribersOnly}))}):null}})})}):(0,h.jsx)(j.Z,I(I({},e),{},{icon:q}))}var E=new Map([["manual",P],["auto",P],["personal",function(e){var n,r,i=(0,c.Db)(u()),t=(0,l.Z)(i,2),s=t[0],o=t[1].loading,m=(0,y.Z)({query:{from:"s"},matchOnServer:!1}),g=(0,F.Z)(),f=(0,T.Z)().isHDC,k=(0,p.Z)().theme,N=(0,S.Z)()||[],w=(null==N?void 0:null===(n=N[1])||void 0===n?void 0:n.contentId)||null,x=e.siteAlias,Z=(0,D.Z)(),P=null==Z?void 0:Z.map(.join(","),E=(0,b.aF)().user,B=a.useMemo([w,x,P]),C=(0,c.aM)(d(),{variables:{input:B}}).data;if(!C)return null;var R=null==C?void 0:null===(r=C.personalRegistrationNewsletter)||void 0===r?void 0:r.registrationElement,z=I(I({},e),R);return((null==R?void 0:R.resourceType)==="writer"&&(z.renderFrequency=0),g&&!f&&(null==R?void 0:R.resourceType)!=="writer")?null:m||z.forceDisplay?(0,h.jsx)("div",{children:(0,h.jsx)(O,{renderFrequency:z.renderFrequency||0,children:function(e){return!1===e?null:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(v.Z,I(I({featureName:z.featureName,signupNewsletter:s,loading:o,user:E,segmentNumber:z.segmentNumber,titleText:z.desktopTitle,segmentId:z.segmentId,tagNumber:z.tagNumber,resourceId:z.resourceId,resourceType:z.resourceType,origin:z.origin||"yellow-element"},z),{},{segmentName:z.segmentName,displayDialogButton:z.displayDialogButton,isSubscriber:z.isSubscriber,subscribersOnly:z.subscribersOnly}))})}})}):(0,h.jsx)(j.Z,I(I({},z),{},{icon:q,site:x,headlineText:z.mobileTitle||k.newsletterI18n.texts.defaultTitleText,resourceId:null==R?void 0:R.resourceId,resourceType:null==R?void 0:R.resourceType}))}]]);function B(e){var n=(0,F.Z)(),r=(0,T.Z)(),i=r.siteAlias,t=r.isHDC;if(n&&!t&&"personal"!==e.type)return null;var l=E.get(e.type)||P;return(0,h.jsx)(l,I({siteAlias:i},e))}B.defaultProps={buttonText:null,forceDisplay:!1,featureName:"Regular-Newsletter",host:null,inputTemplate:null,icon:null,onSubmit:miscStyles:null,renderFrequency:0,segmentId:1420800,segmentName:null,variant:"highlight",tagNumber:null,segmentNumber:null,mobileTitle:null,desktopTitle:null,isSubscriber:!1,subscribersOnly:!1,displayDialogButton:!0,origin:"yellow-element"};var C=B},17494:function(e){e.exports={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PersonalRegistration"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"personalRegistrationNewsletterInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"personalRegistrationNewsletter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"registrationElement"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resourceType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourceId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mobileEmailBody"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscribersOnly"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mobileButton"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mobileTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mobileEmailSubject"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contentId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"desktopTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"frequency"},arguments:[],directives:[]}]}}]}}]}}]}}}]);
//# sourceMappingURL=1899.d10b3a26b86bbe56.js.map