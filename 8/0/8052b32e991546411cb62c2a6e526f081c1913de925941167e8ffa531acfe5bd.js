/* Adriver viewability 1.5.4.1 Developed by Alexander Nikolaev */
var AdriverViewability=[function(e,i){e.exports.getBannerWidth=function(e,i,t){try{if(1===e.frame){if(void 0===i){if(void 0===t)return"undefined";i=document.getElementById(t)?document.getElementById(t):void 0}return void 0===i?"undefined":Math.round(i.getBoundingClientRect().width)}return Math.round(window.innerWidth)}catch(e){}return"undefined"},e.exports.getBannerHeight=function(e,i,t){try{if(1===e.frame){if(void 0===i){if(void 0===t)return"undefined";i=document.getElementById(t)?document.getElementById(t):void 0}return void 0===i?"undefined":Math.round(i.getBoundingClientRect().height)}return Math.round(window.innerHeight)}catch(e){}return"undefined"}},function(e,i,t){var s=t(2),n=t(0);exports.isFullscreenMode=function(){try{var e=100*n.getBannerWidth(this.isFrame,this.element,this.elementPar)/window.screen.width,i=100*n.getBannerHeight(this.isFrame,this.element,this.elementPar)/window.screen.height;return!!((window.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||window.screenTop>0&&window.screenLeft>0&&screen.height-window.outerHeight<30&&screen.height-window.outerHeight==2*window.screenTop&&screen.width-window.outerWidth<30||window.navigator.platform.toUpperCase().indexOf("MAC")>=0&&0==window.screenTop&&0==window.screenLeft)&&100===e&&i>=90)}catch(e){}return!1},e.exports.addEvent=r,e.exports.removeEvent=e.exports.sendEvent=function(e,i,t){if(void 0!==e&&void 0!==i)return-1==e.indexOf("&type=")&&(e+="&type="),t&&-1==e.indexOf("&custom=")&&(e+="&custom="),e=e.split("&type=").join("&type="+i),t&&(e=e.split("&custom=").join("&custom="+t)),a(e),this},e.exports.onLoadF=function(e,i){var t=i||window;/in/.test(t)&&(t.addEventListener?r(t,"load",e):t.attachEvent("onload",e),setTimeout(e,2e3))},e.exports.checkSecondaryParams=function(e){try{return s.isNumeric(e.time)&&s.isNumeric(e.area)?e:void 0}catch(e){return}},e.exports.callEvent=e.exports.bind=e.exports.sendPixel=a},function(e,i){e.exports.isIframe=function(){var e,i,t=1,s=2,n=3,r=0;try{if(window.top==window)return{frame:t,topFrame:null,topFrameRef:window.location.href};for(e=window;e.parent!=e&&r<1e3;){if(i=e,e.parent.document.domain!=e.document.domain)return{frame:s,topFrame:i,topFrameRef:i.document.referrer};e=e.parent,r++}return{frame:n,topFrame:i,topFrameRef:e.location.href}}catch(e){}return i?{frame:s,topFrame:i,topFrameRef:i.document.referrer}:{frame:s,topFrame:e,topFrameRef:e.document.referrer}},e.exports.getAncestorLength=function(){try{var e=window.location.ancestorOrigins;return void 0!==e?e.length:""}catch(e){return""}},e.exports.isNumeric=e.exports.checkBrowser=function(){var e=window.navigator.userAgent;return/trident/gi.test(e)||/msie/gi.test(e)?"IE":e.search(/Firefox/)>=0?"Firefox":e.search(/Opera/)>=0||e.search(/Chrome/)>=0?"ChromeBased":e.search(/Safari/)>0?"Safari":"Other"},e.exports.checkPlatform=function(){try{var e="desktop";return i=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(e="mobile"),e}catch(e){return"undefined"}var i},e.exports.parseURL=function(e){var i,t,s,n;if(-1!==(i=1==e.frame?window.location.href:e.topFrameRef).indexOf("doubleclick")&&-1!==i.indexOf("betweendigital")||-1!==i.indexOf("vidroll.ru")||-1!==i.indexOf("video-play.ru"))for(var r in-1!==i.indexOf("doubleclick")?s="url":-1!==i.indexOf("betweendigital")?s="ref":-1===i.indexOf("vidroll.ru")&&-1===i.indexOf("video-play.ru")||(s="wpl"),n=i.split("&"))void 0!==(t=n[r].split("="))[1]&&""!==t[1]&&t[0]==s&&(i=t[1]);try{var a=window.location.ancestorOrigins;if(void 0===a)return encodeURIComponent(i);var o=(a=a.length>0?a[a.length-1]:void 0).split("/")[2];return i.split("/")[2]!==o&&""!==o?encodeURIComponent(a):encodeURIComponent(i)}catch(e){return encodeURIComponent(i)}},e.exports.checkInApp=function(e){if("desktop"===e)return 1;if("mobile"===e){var i=window.navigator.userAgent,t=window.navigator.standalone,s=/safari/.test(i),n=/iphone|ipod|ipad/.test(i),r=i.includes("wv"),a=!!i.match(/(WebView|Android.*(wv|.0.0.0)|Linux; U; Android)/gi);return n&&!t&&!s||r||a?3:2}return 0}},function(e,i,t){ar n=t(2),r=t(0),a=t(1),o=t(4),l=t(5),h=t(6),c=t(7),d=function(){function e(i,t,s,o,l,h,c,d){var m=this;if(this,e),this.browser=n.checkBrowser(),this.platform=n.checkPlatform(),this.inApp=n.checkInApp(this.platform),this.win=window,this.firstView=!0,this.viewabilityWay=0,this.mraidVersion=-1,this.libVersion="AV",this.eventLink=i,this.zeroEvent=!0,this.viewabilityEvent=!0,this.isPermanent=!1,void 0!==t&&(0!==t&&(this.isPermanent=!0),3===t?(this.viewabilityEvent=!1,this.zeroEvent=!1):2===t&&(this.zeroEvent=!1)),this.delay=o||1e3,this.startTime=(new Date).getTime(),void 0!==l&&n.isNumeric(l)&&l>0&&(this.startTime=l),this.isStarted=!1,this.isFrame=n.isIframe(),this.element=void 0,this.elementPar=void 0,3===this.isFrame.frame){for(var w,u=this.isFrame.topFrame.parent.document.querySelectorAll("IFRAME"),v=0;v<u.length;v++)u[v].contentWindow===this.isFrame.topFrame&&(w=u[v]);void 0!==w?(this.element=w,this.win=this.isFrame.topFrame.parent.window):(this.isFrame.frame=2,this.isFrame.topFrame=null)}if(void 0!==s&&3!==this.isFrame.frame&&("string"==typeof s?(this.elementPar="#"+s,document.querySelector("#"+s)?this.element=document.querySelector("#"+s):this.element=void 0):0!==s&&(this.element=s)),2==this.isFrame.frame&&this.isFrame.topFrame&&(this.win=this.isFrame.topFrame),this.isViewable=!1,this.firstStart=!0,this.firstViewCounter=0,this.viewCheckStarted=!1,this.eventsCallbacks={},this.measurable=2===this.isFrame.frame&&"IE"==this.browser?0:1,this.tabVisible=this.isTabVisible(),this.ancestorLength=n.getAncestorLength(),this.topURL=n.parseURL(this.isFrame),this.historyLength="undefined"!=typeof history?history.length:"",this.secondaryViewability=a.checkSecondaryParams(h),this.jsVerifications=c,this.counters=d,this.secondaryViewabilityTimeout=void 0,this.secondaryViewabilitySend=!1,this.isSecondaryVisible=!1,this.sendPixel=a.sendPixel,this.fullscreenViewabilitySend=!1,this.sendEvent=a.sendEvent,this.zeroEvent){var b=(new Date).getTime()-this.startTime;setTimeout((function(){m.sendEvent(m.eventLink,0,"113="+(void 0!==m.secondaryViewability?"1":"0")+";161="+r.getBannerWidth(m.isFrame,m.element,m.elementPar)+";162="+r.getBannerHeight(m.isFrame,m.element,m.elementPar)+";168="+m.isFrame.frame+";176="+b+";177="+m.isMeasurable()+";213="+m.ancestorLength+";214="+m.historyLength+";216="+window.screen.width+";217="+window.screen.height+";218="+a.isFullscreenMode()+";163="+m.topURL+";165="+m.getViewableProcWrapper()+";226="+m.inApp)}),0)}a.callEvent("ZeroEvent",this.eventsCallbacks),this.startAFV()}var i,t,d;return i=e,(t=[{key:"startAFV",value:function(){if(!this.isStarted)if("mobile"===this.platform&&window.mraid&&(this.mraidVersion=parseInt(window.mraid.getVersion(),10)),2===this.mraidVersion||3===this.mraidVersion)this.viewabilityWay=2===this.mraidVersion?4:5,c.checkMraidViewability.call(this);else{if(/in/.test(document.readyState)&&1===this.isFrame.frame&&void 0===this.element&&this.firstStart)return this.firstStart=!1,void a.onLoadF(this.startAFV.bind(this));if(2===this.isFrame.frame&&this.isFrame.topFrame&&/in/.test(this.isFrame.topFrame.document.readyState)&&this.firstStart)return this.firstStart=!1,void a.onLoadF(this.startAFV.bind(this),this.isFrame.topFrame);1===this.isFrame.frame&&void 0===this.element&&void 0!==this.elementPar&&(document.querySelector(this.elementPar)?this.element=document.querySelector(this.elementPar):this.element=void 0),this.isStarted=!0,"IntersectionObserver"in window?(this.viewabilityWay=1,this.startIOCheck()):2==this.isFrame.frame&&"IE"!==this.browser?(this.viewabilityWay=2,this.startFrameCheck()):2!==this.isFrame.frame&&void 0!==this.element&&(this.viewabilityWay=3,this.startLocalCheck())}}},{key:"startIOCheck",value:function(){this.ioOptions=l.ioOptions,this.ioElement,this.ioViewableProc=0,this.processChanges=a.bind(l.processChanges,this),this.checkTab=l.checkTab,this.stopObserving=l.stopObserving,this.visibleTimerCallback=a.bind(l.visibleTimerCallback,this),this.secondaryTimerCallback=a.bind(l.secondaryTimerCallback,this),this.observer=new IntersectionObserver(this.processChanges,this.ioOptions),a.addEvent(this.win,"visibilitychange",this.checkTab.bind(this)),void 0===this.element&&1!==this.isFrame.frame&&(this.element=this.win.document.documentElement),void 0!==this.element&&this.observer.observe(this.element)}},{key:"startFrameCheck",value:function(){this.viewableCount=0,this.isCenterVisible=!1,this.frameInfo=h.setFrameInfo(this.browser),this.stopAFV=h.stopAFV,this.checkViwability=h.checkViwability,this.collectInfo=h.collectInfo,h.drawFrames(this.win,this.frameInfo),a.addEvent(this.win,"message",this.collectInfo.bind(this))}},{key:"startLocalCheck",value:function(){this.localTimer=null,this.checkLocalViewability=o.checkLocalViewability,this.controlLocalViewability=a.bind(o.controlLocalViewability,this),this.startLocalListen=o.startLocalListen,this.stopLocalListen=o.stopLocalListen,this.startLocalListen(),this.controlLocalViewability()}},{key:"getViewableProcWrapper",value:,{key:"getViewableProc",value:function(){return void 0!==this.ioViewableProc?this.ioViewableProc:1!==this.isFrame.frame&&3!==this.isFrame.frame||void 0===this.checkLocalViewability?void 0!==this.viewableCount?this.viewableCount<2?0:this.viewableCount<3?12.5:this.viewableCount<5?25:this.viewableCount<6?37.5:this.viewableCount<7?50:this.viewableCount<8?75:100:0:Math.round(100*this.checkLocalViewability(this.element,this.win))}},{key:"getViewability",value:function(){var e=this.getViewableProc();return 2===this.isFrame.frame&&"IE"===this.browser?"unmeasurable":this.isTabVisible()&&e>=50?"viewable":"unviewable"}},{key:"isTabVisible",value:,{key:"isMeasurable",value:,{key:"getTopUrl",value:,{key:"subscribe",value:function(e,i,t){e=e.bind(t),this.eventsCallbacks[i]=e}},{key:"unsubscribe",value:,{key:"loadJsVerifications",value:function(e){if(Array.isArray(e)&&e.length)try{var i=!0,t=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var a=n.value,o=this.win.document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("charset","windows-1251"),o.setAttribute("src",a),1!==this.isFrame.frame?this.win.document.documentElement.appendChild(o):1==this.isFrame.frame&&void 0!==this.element&&this.element.appendChild(o)}}catch(e){t=!0,s=e}finally{try{i||null==r.return||r.return()}finally{if(t)throw s}}}catch(e){}}},{key:"callCounters",value:function(e){if(Array.isArray(e)&&e.length){var i=!0,t=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var a=n.value;this.sendPixel(a)}}catch(e){t=!0,s=e}finally{try{i||null==r.return||r.return()}finally{if(t)throw s}}}}}])&&s(i.prototype,t),d&&s(i,d),e}();window.adriverviewability=window.adriverviewability||{},window.adriverviewability.v=window.adriverviewability.v||[],window.adriverviewability.v.push=window.adriverviewability.checkCalls=function(){for(var e=0;e<window.adriverviewability.v.length;e++)if(void 0===window.adriverviewability.v[e].called)try{window.adriverviewability.v[e].call(),window.adriverviewability.v[e].called=!0}catch(e){}},setTimeout((),e.exports=d},function(e,i,t){var s=t(1),n=t(0);function r(e,i){if(void 0!==e){var t=(n=i,r=s=e),h=function(e,i){var t=e.getBoundingClientRect?function(e,i){var t=e.getBoundingClientRect(),s=o(i);return{left:t.left+s.sl,top:t.top+s.st}}(e,i):function(e,i){for(var t,s=0,n=0,r=!1;e;)"fixed"===a(e,"position",i)&&(r=!0),s+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return scroll&&r?(t=o(i),{left:n+t.sl,top:s+t.st}):{left:n,top:s}}(e,i);return{left:Math.round(t.left),top:Math.round(t.top)}}(s,n),c=o(n),d=l("h",r,h,c),m=l("v",r,h,c),{S:r.w*r.h,curS:d*m});return t.curS/t.S}var s,n,r,h,c,d,m}function a(e,i,t){return e.currentStyle?e.currentStyle[i]||"":t.getComputedStyle?t.getComputedStyle(e,null)[i]||"":void 0}function o(e){var i={},t=e.document,s=t.body,n=t.documentElement,r="CSS1Compat"==t.compatMode;return i.cw=r&&n.clientWidth||e.innerWidth||s.clientWidth,i.ch=r&&n.clientHeight||e.innerHeight||s.clientHeight,i.sl=e.pageXOffset||r&&n.scrollLeft||s.scrollLeft,i.st=e.pageYOffset||r&&n.scrollTop||s.scrollTop,i}function l(e,i,t,s){var n="v"===e,r=n?"h":"w",a=n?"top":"left",o=n?"ch":"cw",l=n?"st":"sl",h=0;return t[a]<s[l]?t[a]+i[r]>s[l]&&(h=t[a]+i[r]-s[l])>s[o]&&(h=s[o]):t[a]<s[l]+s[o]&&(h=t[a]+i[r]<=s[l]+s[o]?i[r]:s[l]+s[o]-t[a]),h}function h(){var e=(new Date).getTime()-this.startTime,i=0,t=setInterval(function(){this.firstViewCounter+=100,i=r(this.element,this.win),this.firstView&&this.firstViewCounter<=1e3?isNaN(i)||(i>=.5&&this.sendEvent(this.eventLink,27,"161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+e),this.firstView=!1):clearInterval(t)}.bind(this),100);this.viewCheckStarted=!0}function c(e){var i,t,r=this.checkLocalViewability(this.element,this.win),a=(new Date).getTime()-this.startTime;if(e){if(!this.isViewable&&r>=.5){var o,l;if(this.isViewable=!0,this.viewabilityEvent)this.sendEvent(this.eventLink,53,"115="+this.viewabilityWay+";161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+a+";216="+window.screen.width+";217="+window.screen.height+";165="+this.getViewableProcWrapper()+";226="+this.inApp),null!==(o=this.jsVerifications)&&void 0!==o&&o.viewability&&this.loadJsVerifications(this.jsVerifications.viewability),null!==(l=this.counters)&&void 0!==l&&l.viewability&&this.callCounters(this.counters.viewability);s.callEvent("ViewabilityEvent",this.eventsCallbacks)}}else!this.secondaryViewabilitySend&&r>=this.secondaryViewability.area/100&&(this.secondaryViewabilitySend=!0,this.sendEvent(this.eventLink,69,"161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+a+";216="+window.screen.width+";217="+window.screen.height+";165="+this.getViewableProcWrapper()+";226="+this.inApp),null!==(i=this.jsVerifications)&&void 0!==i&&i.clientViewability&&this.loadJsVerifications(this.jsVerifications.clientViewability),null!==(t=this.counters)&&void 0!==t&&t.clientViewability&&this.callCounters(this.counters.clientViewability));this.stopLocalListen()}e.exports.checkLocalViewability=r,e.exports.controlLocalViewability=function(){if(this.isStarted){var e=r(this.element,this.win);this.isViewable||(e>=.5&&this.isTabVisible()?this.localTimer||(this.localTimer=setTimeout(c.bind(this),this.delay,!0)):(clearTimeout(this.localTimer),this.localTimer=null)),void 0!==this.secondaryViewability&&(e>=this.secondaryViewability.area/100&&void 0===this.secondaryViewabilityTimeout&&!this.secondaryViewabilitySend&&this.isTabVisible()&&(this.secondaryViewabilityTimeout=setTimeout(c.bind(this),1e3*this.secondaryViewability.time,!1)),void 0!==this.secondaryViewabilityTimeout&&(e<this.secondaryViewability.area/100||!this.isTabVisible())&&(clearTimeout(this.secondaryViewabilityTimeout),this.secondaryViewabilityTimeout=void 0)),this.viewCheckStarted||h.call(this)}},e.exports.localViwabilityComplete=c,e.exports.firstLocalViewCheck=h,e.exports.startLocalListen=function(){s.addEvent(this.win,"scroll",this.controlLocalViewability),s.addEvent(this.win,"resize",this.controlLocalViewability),s.addEvent(this.win,"visibilitychange",this.controlLocalViewability)},e.exports.stopLocalListen=function(){this.isPermanent||!this.isViewable||void 0!==this.secondaryViewability&&!this.secondaryViewabilitySend||(s.removeEvent(this.win,"scroll",this.controlLocalViewability),s.removeEvent(this.win,"resize",this.controlLocalViewability),s.removeEvent(this.win,"visibilitychange",this.controlLocalViewability))}},function(e,i,t){var s=t(1),n=t(0);function r(){var e=(new Date).getTime()-this.startTime,i=setInterval(function(){this.firstViewCounter+=100,this.firstView&&this.firstViewCounter<=1e3?this.ioViewableProc&&(this.ioViewableProc>=50&&this.sendEvent(this.eventLink,27,"161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+e),this.firstView=!1):clearInterval(i)}.bind(this),100);this.viewCheckStarted=!0}function a(e,i,t){return i.width*i.height/(e.width*e.height)>=t}e.exports.ioOptions={rootMargin:"0px",threshold:[0,.12,.25,.37,.5,.75,1]},e.exports.processChanges=function(e){e.forEach(function(e){this.ioElement=e.target,this.ioElement.isVisible=a(e.boundingClientRect,e.intersectionRect,.5),this.ioViewableProc=Math.round(100*e.intersectionRatio),this.ioElement.isVisible&&void 0===this.ioElement.visibleTimeout&&!this.isViewable&&this.isTabVisible()&&(this.ioElement.visibleTimeout=setTimeout(this.visibleTimerCallback,this.delay)),void 0===this.ioElement.visibleTimeout||this.ioElement.isVisible&&this.isTabVisible()||(clearTimeout(this.ioElement.visibleTimeout),this.ioElement.visibleTimeout=void 0),void 0!==this.secondaryViewability&&(this.isSecondaryVisible=a(e.boundingClientRect,e.intersectionRect,this.secondaryViewability.area/100),this.isSecondaryVisible&&void 0===this.secondaryViewabilityTimeout&&!this.secondaryViewabilitySend&&this.isTabVisible()&&(this.secondaryViewabilityTimeout=setTimeout(this.secondaryTimerCallback,1e3*this.secondaryViewability.time)),void 0===this.secondaryViewabilityTimeout||this.isSecondaryVisible&&this.isTabVisible()||(clearTimeout(this.secondaryViewabilityTimeout),this.secondaryViewabilityTimeout=void 0))}.bind(this)),this.viewCheckStarted||r.call(this)},e.exports.checkTab=function(){var e=this.isTabVisible();this.tabVisible!==e&&(e||void 0===this.ioElement.visibleTimeout?e&&this.ioViewableProc>=50&&void 0===this.ioElement.visibleTimeout&&!this.isViewable&&void 0!==this.handler&&(this.ioElement.visibleTimeout=setTimeout(this.handler,this.delay)):(clearTimeout(this.ioElement.visibleTimeout),this.ioElement.visibleTimeout=void 0)),this.tabVisible=e},e.exports.firstIOViewCheck=r,e.exports.visibleTimerCallback=function(){if(this.firstView=!1,this.ioElement.visibleTimeout=void 0,this.processChanges(this.observer.takeRecords()),this.ioElement.isVisible&&!this.isViewable&&this.isTabVisible()){if(this.isViewable=!0,this.viewabilityEvent){var e,i,t=(new Date).getTime()-this.startTime;this.sendEvent(this.eventLink,53,"115="+this.viewabilityWay+";161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+t+";216="+window.screen.width+";217="+window.screen.height+";165="+this.getViewableProcWrapper()+";226="+this.inApp),null!==(e=this.jsVerifications)&&void 0!==e&&e.viewability&&this.loadJsVerifications(this.jsVerifications.viewability),null!==(i=this.counters)&&void 0!==i&&i.viewability&&this.callCounters(this.counters.viewability)}s.callEvent("ViewabilityEvent",this.eventsCallbacks),this.stopObserving()}},e.exports.secondaryTimerCallback=function(){if(clearTimeout(this.secondaryViewabilityTimeout),this.secondaryViewabilityTimeout=void 0,this.processChanges(this.observer.takeRecords()),this.isSecondaryVisible&&!this.secondaryViewabilitySend&&this.isTabVisible()){var e,i;this.secondaryViewabilitySend=!0;var t=(new Date).getTime()-this.startTime;this.sendEvent(this.eventLink,69,"161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+t+";216="+window.screen.width+";217="+window.screen.height+";165="+this.getViewableProcWrapper()+";226="+this.inApp),this.stopObserving(),null!==(e=this.jsVerifications)&&void 0!==e&&e.clientViewability&&this.loadJsVerifications(this.jsVerifications.clientViewability),null!==(i=this.counters)&&void 0!==i&&i.clientViewability&&this.callCounters(this.counters.clientViewability)}},e.exports.stopObserving=function(){this.isPermanent||!this.isViewable||void 0!==this.secondaryViewability&&!this.secondaryViewabilitySend||(s.removeEvent(this.win,"visibilitychange",this.checkTab.bind(this)),this.observer.unobserve(this.ioElement))}},function(e,i,t){var s=t(1),n=t(0);function r(e,i){var t=function(e,i){var t=e.document.getElementById("AdriverFrameViewability_"+i);return t.contentWindow?t.contentWindow.document:t.contentDocument}(e,i);void 0!==t&&(t.write('<script>function tick(e){var t=(new Date).getTime();0!=tick0&&(delay=t-tick0,delay<=100?(viewcount++,count>0&&count--,viewcount>=61&&0===count&&(parent.postMessage&&parent.postMessage(\'{"state": "viewable","AFV": "true","frame": "'+i+'"}\',"*"),count=6)):viewcount=0),tick0=t}function ticker(){requestAnimFrame(function(){ticker(),tick()})}window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var tick0=0,viewcount=0,count=0;ticker()<\/script>'),t.close())}function a(){var e=this.getViewableProc();if(!this.secondaryViewabilitySend&&e>=this.secondaryViewability.area/100){this.secondaryViewabilitySend=!0;var i=(new Date).getTime()-this.startTime;this.sendEvent(this.eventLink,69,"161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+i+";216="+window.screen.width+";217="+window.screen.height+";165="+this.getViewableProcWrapper()+";226="+this.inApp)}this.stopAFV()}e.exports.setFrameInfo=function(e){var i="position:absolute;width:1px;height:1px;";return{topLeft:{isDrawn:!1,isVisible:!1,style:(i+="Firefox"===e?"opacity:0.01;":"visibility:hidden;")+"top:0;left:0",timer:0},topRight:{isDrawn:!1,isVisible:!1,style:i+"top:0;right:0",timer:0},bottomLeft:{isDrawn:!1,isVisible:!1,style:i+"bottom:0;left:0",timer:0},bottomRight:{isDrawn:!1,isVisible:!1,style:i+"bottom:0;right:0",timer:0},centerTop:{isDrawn:!1,isVisible:!1,style:i+"top:25%;left:50%",timer:0},centerLeft:{isDrawn:!1,isVisible:!1,style:i+"top:50%;left:25%",timer:0},centerRight:{isDrawn:!1,isVisible:!1,style:i+"top:50%;left:75%",timer:0},centerBottom:{isDrawn:!1,isVisible:!1,style:i+"top:75%;left:50%",timer:0},center:{isDrawn:!1,isVisible:!1,style:i+"top:50%;left:50%",timer:0}}},e.exports.drawFrames=function(e,i){for(var t in i){var s=e.document.createElement("iframe");s.id="AdriverFrameViewability_"+t,s.style.cssText=i[t].style,e.document.body.appendChild(s),i[t].isDrawn=!0,r(e,t)}},e.exports.stopAFV=function(){this.isStarted&&!this.isPermanent&&this.isViewable&&(void 0===this.secondaryViewability||this.secondaryViewabilitySend)&&(!function(e,i){for(var t in e){var s=i.document.getElementById("AdriverFrameViewability_"+t);void 0!==s&&s.parentNode.removeChild(s),e[t].isDrawn=!1,e[t].isVisible=!1}}(this.frameInfo,this.win),s.removeEvent(this.win,"message",this.collectInfo.bind(this)),this.isStarted=!1)},e.exports.checkViwability=function(){var e=0;for(var i in this.frameInfo){var t=(new Date).getTime();!0===this.frameInfo[i].isVisible&&(t-this.frameInfo[i].timer>300?(this.frameInfo[i].isVisible=!1,"center"===i&&(this.isCenterVisible=!1)):e++)}if(this.viewableCount=e,!0===this.isStarted&&!0===this.isCenterVisible&&!this.isViewable)if(e>=6&&this.isTabVisible()){if(this.isViewable=!0,this.viewabilityEvent){var r=(new Date).getTime()-this.startTime;r<=this.delay+1e3&&this.sendEvent(this.eventLink,27,"161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+r),this.sendEvent(this.eventLink,53,"115="+this.viewabilityWay+";161="+n.getBannerWidth(this.isFrame,this.element,this.elementPar)+";162="+n.getBannerHeight(this.isFrame,this.element,this.elementPar)+";176="+r+";216="+window.screen.width+";217="+window.screen.height+";165="+this.getViewableProcWrapper()+";226="+this.inApp)}s.callEvent("ViewabilityEvent",this.eventsCallbacks),this.stopAFV()}else setTimeout(this.checkViwability.bind(this),100);if(void 0!==this.secondaryViewability){var o=this.getViewableProc();o>=this.secondaryViewability.area/100&&void 0===this.secondaryViewabilityTimeout&&!this.secondaryViewabilitySend&&this.isTabVisible()&&(this.secondaryViewabilityTimeout=setTimeout(a.bind(this),1e3*this.secondaryViewability.time,!1)),void 0!==this.secondaryViewabilityTimeout&&(o<this.secondaryViewability.area/100||!this.isTabVisible())&&(clearTimeout(this.secondaryViewabilityTimeout),this.secondaryViewabilityTimeout=void 0)}},e.exports.collectInfo=function(e){try{var i=JSON.parse(e.data);void 0!==i.AFV&&(!1===this.isCenterVisible&&"center"===i.frame&&"viewable"===i.state&&(this.isCenterVisible=!0,this.checkViwability()),!0===this.isCenterVisible&&"viewable"===i.state&&(this.frameInfo[i.frame].isVisible=!0,this.frameInfo[i.frame].timer=(new Date).getTime()))}catch(e){}},e.exports.frameViwabilityComplete=a,e.exports.stopTracking=function(){this.isPermanent||!this.isViewable||void 0!==this.secondaryViewability&&!this.secondaryViewabilitySend||this.observer.unobserve(this.ioElement)}},function(e,i,t){var s=t(1),n={mraid_env:0,sdkName:0,sdkVersion:0,appID:0,advID:0,firstStart:!0,startTime:(new Date).getTime(),measurable:1,viewState:0};function r(e){for(var i=arguments,t="",s=0;s<i.length;s++)switch(i[s]){case 115:t+="115="+this.viewabilityWay+";";break;case 116:t+="116="+n.appID+";";break;case 117:t+="117="+n.advID+";";break;case 118:t+="118="+n.sdkVersion+";";break;case 119:t+="119="+n.sdkName+";";break;case 161:t+="161="+Math.round(mraid.getSize().width)+";";break;case 162:t+="162="+Math.round(mraid.getSize().height)+";";break;case 165:t+="165="+this.getViewableProcWrapper()+";";break;case 176:t+="176="+((new Date).getTime()-n.startTime)+";";break;case 177:t+="177="+n.measurable+";";break;case 216:t+="216="+window.screen.width+";";break;case 217:t+="217="+window.screen.height+";";break;case 226:t+="226="+this.inApp+";"}return t}function a(e){e?n.viewTimer=setTimeout(function(){if(n.viewState>=50){var e,i,t=r.call(this,115,116,117,118,119,161,162,176,177,216,217,165,226);s.sendEvent(this.eventLink,53,t),mraid.removeEventListener("exposureChange",arguments.callee),null!==(e=this.jsVerifications)&&void 0!==e&&e.viewability&&this.loadJsVerifications(this.jsVerifications.viewability),null!==(i=this.counters)&&void 0!==i&&i.viewability&&this.callCounters(this.counters.viewability)}}.bind(this),1e3):(n.viewTime=void 0,void 0!==n.viewTimer&&clearTimeout(n.viewTimer))}e.exports.checkMraidViewability=function e(){if("undefined"!=typeof MRAID_ENV&&(n.mraid_env=!0,function(){try{n.mraid_env&&(n.sdkName=MRAID_ENV.sdk||0,n.sdkVersion=MRAID_ENV.sdkVersion||0,n.appID=MRAID_ENV.appId||0,n.advID=MRAID_ENV.ifa||0)}catch(e){n.sdkName=0,n.sdkVersion=0,n.appID=0,n.advID=0}}()),"loading"!==mraid.getState())switch(this.mraidVersion){case 2:mraid.isViewable()?setTimeout(function(){if(mraid.isViewable()&&n.firstStart){var e=r.call(this,115,116,117,118,119,161,162,176,177,216,217,165,226);s.sendEvent(this.eventLink,53,e),n.firstStart=!1}}.bind(this),1e3):mraid.addEventListener("viewableChange",function(e){e&&setTimeout(function(){if(mraid.isViewable()&&n.firstStart){var e=r.call(this,115,116,117,118,119,161,162,176,177,216,217,165,226);s.sendEvent(this.eventLink,53,e),mraid.removeEventListener("viewableChange",arguments.callee),n.firstStart=!1}}.bind(this),1e3)}.bind(this));break;case 3:mraid.addEventListener("exposureChange",(function(e){var i,t;e>=50&&(t=n.viewState,n.viewState=i,t<50&&n.viewState>=50?a(!0):t>=50&&n.viewState<50&&a(!1))}))}else mraid.addEventListener("ready",e)}}]);