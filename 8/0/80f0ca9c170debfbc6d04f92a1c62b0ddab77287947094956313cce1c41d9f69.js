![function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}));const r="trackPageView",o="sendData",i="getVisitorId",a="pushUserId",s="event_fpid",c="visitor_fp_id",u=1/24},,function(e,t,n){"use strict";n.r(t),n.d(t,"heVisitorIdKey",(function(){return b})),n.d(t,"ahoyVisitorIdKey",(function(){return _})),n.d(t,"default",(function(){return T})),n.d(t,"MessageHandler",();var r=n(9),o=n.n(r);class i{static isBrowserMobiletatic locationSearch(){return window.location.search}static _fetch(e="",t={}){return fetch(e,t)}tatic cookieDomain(){var e=i.locationHostname().split(".");return e.length>2&&(e=e.slice(1)),e.join(".")}var a=n(0),s=n(3),c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=f=[],l=0;l<256;++l)f.push((l+256).toString(16).substr(1));var d=var p=r v="v5",80,();n(10);class y{static getId(){return new s.a(e=>{this.fetchData().then(})}tatic url(){return i.locationSearch().indexOf("personalization_env=staging")>0?"https://telkomsel.staging.vidio.com/telcos/he":"https://telkomsel.vidio.com/telcos/he"}static fetchData(){return i._fetch(this.url()).then(.then(.catch(}}var g=n(1),w=n.n(g);const b="he_visitor_id",_="ahoy_visitor";class T{static sendPageviewEvent(){return this.headerEnrichmentDataObject().then(}tatic isPtidDisabled(){const e=this.getScriptTagSrc();return null!==e&&e.includes("enable_ptid=false")}static headerEnrichmentDataObject(){return this.isPtidDisabled()?Promise.resolve({}):i.isBrowserMobile()?y.getId().then(e=>{if(e){const t=y.convertToHeVisitorId(e),n=i.cookieDomain();return w.a.set(b,t,{domain:n}),{ptid:e}}return{}}):Promise.resolve({})}tatic sendEvent(e,t){const n={...T.defaultProperties(),...t};window.ahoy.track(e,n)}static defaultProperties(){return{app_name:"personalization",page:location.href,referrer:document.referrer,platform:i.isBrowserMobile()?"web-mobile":"web-desktop",event_time:Math.floor(Date.now()/1e3),build_version:"PERSONALIZATION-2022-03-31_03-40-36",fp_id:window.fpId,he_visitor_id:w.a.get(b)}}}const I={handle:function(e){const t=e.data;if("object"!=typeof t)return!1;if(t.eventName==a.d){const e=null!=w.a.get(b)?w.a.get(b):w.a.get(_),t={eventName:a.e,value:e};window.parent.postMessage(t,"*")}else t.eventName==a.f?T.sendPersonalizationUserEvent(t.value):t.eventName==a.g?T.sendPageviewEvent():t.eventName==a.a&&(window.fpId=t.value)}};window.AhoyEvent=T,window.addEventListener("message",I.handle,!1)}]);