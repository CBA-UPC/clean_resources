(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"014c":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgPHBhdGggZmlsbD0iIzQxNDM0RCIgZD0iTTE4Ljg1OTg4NDksNC45NTQyMjEwOSBDMTkuMzM4OTAzMyw0Ljk1NDIyMTA5IDE5LjcyNzIyNjMsNS4zNDI1MjAyNyAxOS43MjcyMjYzLDUuODIxNTYyNTIgQzE5LjcyNzIyNjMsNi4zMDA1ODA5MSAxOS4zMzg5MDMzLDYuNjg4OTAzOTYgMTguODU5MDk3OSw2LjY4ODg4MDEgTDE4Ljg1OTA5NzksNi42ODg4ODAxIEwxOC44NTkwOTc5LDYuNjg5NjY3MTEgTDcuMTkxOTk3MjgsNi42ODk2NjcxMSBDNi44NzMxMjA3LDYuNjg5NjY3MTEgNi42MTM3NDU4LDYuOTQ5MDg5NyA2LjYxMzc0NTgsNy4yNjc4OTQ3MyBMNi42MTM3NDU4LDcuMjY3ODk0NzMgTDYuNjEzNzQ1OCwyNS42ODQ4IEM2LjYxMzc0NTgsMjYuMDAzNzQ4MiA2Ljg3MzE0NDU1LDI2LjI2MzA1MTUgNy4xOTE5OTcyOCwyNi4yNjMwNTE1IEw3LjE5MTk5NzI4LDI2LjI2MzA1MTUgTDIzLjk2OTgyNzgsMjYuMjYzMDUxNSBDMjQuMjg4NjU2NywyNi4yNjMwNTE1IDI0LjU0ODA1NTUsMjYuMDAzNzQ4MSAyNC41NDgwNTU1LDI1LjY4NDggTDI0LjU0ODA1NTUsMjUuNjg0OCBMMjQuNTQ4MzY1NSwxMi4zNzg2NDg1IEMyNC41NDg3NzA5LDExLjkwMDAxMTcgMjQuOTM2OTI3LDExLjUxMjAyMjUgMjUuNDE1NjgzMSwxMS41MTIwMjI1IEMyNS44OTQ3MDE1LDExLjUxMjAyMjUgMjYuMjgzMDI0NSwxMS45MDAzOTMzIDI2LjI4MjczODksMTIuMzg1MDE2MSBMMjYuMjgyNzM4OSwxMi4zODUwMTYxIEwyNi4yODI3Mzg5LDI1LjY4NDgyMzkgQzI2LjI4MjczODksMjYuOTYwMjExIDI1LjI0NTE5MTEsMjcuOTk3NzU4MyAyMy45Njk4Mjc4LDI3Ljk5Nzc1ODMgTDIzLjk2OTgyNzgsMjcuOTk3NzU4MyBMNy4xOTE5OTcyOCwyNy45OTc3NTgzIEM1LjkxNjYzNDAyLDI3Ljk5Nzc1ODMgNC44NzkwNjI5MSwyNi45NjAyMTEgNC44NzkwNjI5MSwyNS42ODQ4MjM5IEw0Ljg3OTA2MjkxLDI1LjY4NDgyMzkgTDQuODc5MDYyOTEsNy4yNjc5MTg1OSBDNC44NzkwNjI5MSw1Ljk5MjU1NTMzIDUuOTE2NjM0MDUsNC45NTQ5ODQyMSA3LjE5MTk5NzI4LDQuOTU0OTg0MjEgTDcuMTkxOTk3MjgsNC45NTQ5ODQyMSBMMTguODUyMjk4MSw0Ljk1NDU3NTgzIEwxOC44NTIyOTgxLDQuOTU0NTc1ODMgWiBNMjAuNTExODI5MSwxNS42MDkwNzc1IEMyMC45ODMyOTIzLDE1LjYwOTA3NzUgMjEuMzY1NTE0MSwxNS45OTc0MDA1IDIxLjM2NTUxNDEsMTYuNDc2NDE4OSBDMjEuMzY1NTE0MSwxNi45NTUzODk2IDIwLjk4MzI5MjMsMTcuMzQzNzYwNCAyMC41MTE4MjkxLDE3LjM0Mzc2MDQgTDkuMjE5MTk5MDMsMTcuMzQzNzYwNCBDOC43NDc3MzU4NSwxNy4zNDM3NjA0IDguMzY1NTE0MDYsMTYuOTU1Mzg5NiA4LjM2NTUxNDA2LDE2LjQ3NjQxODkgQzguMzY1NTE0MDYsMTUuOTk3NDAwNSA4Ljc0NzcxMjM3LDE1LjYwOTA3NzUgOS4yMTkxOTkwMywxNS42MDkwNzc1IEwyMC41MTE4MjkxLDE1LjYwOTA3NzUgWiBNMTUuNjExMzI1MiwxMC42OTE3ODE2IEMxNi4wNzM1NTA5LDEwLjY5MTc4MTYgMTYuNDQ4MjQyMSwxMS4wODAxMjg1IDE2LjQ0ODI0MjEsMTEuNTU5MTIzMSBDMTYuNDQ4MjQyMSwxMi4wMzgxMTc2IDE2LjA3MzU3MzksMTIuNDI2NDg4NCAxNS42MTEzNDgyLDEyLjQyNjQ4ODQgTDkuMjg1MTU4OTQsMTIuNDI2NDg4NCBDOC44MjI5NTYyNywxMi40MjY0ODg0IDguNDQ4MjQyMDksMTIuMDM4MTE3NiA4LjQ0ODI0MjA5LDExLjU1OTEyMzEgQzguNDQ4MjQyMDksMTEuMDgwMTI4NSA4LjgyMjkzMzI0LDEwLjY5MTc4MTYgOS4yODUxNTg5NCwxMC42OTE3ODE2IEwxNS42MTEzMjUyLDEwLjY5MTc4MTYgWiBNMjYuODQ4MzAyNSw0LjM4OTUxNTQ1IEMyNy4xODY5OTcxLDQuNzI4MjEwMDQgMjcuMTg2OTk3MSw1LjI3NzM5MDM0IDI2Ljg0ODMwMjUsNS42MTYxMzI2MyBMMjAuMjkxOTU1NywxMi4xNzI0MzE3IEMyMC4xMjI1NjA4LDEyLjM0MTg1MDUgMTkuOTAwNTgwMSwxMi40MjY0ODg0IDE5LjY3ODU5OTUsMTIuNDI2NDg4NCBDMTkuNDU2NjE4OCwxMi40MjY0ODg0IDE5LjIzNDY2MiwxMi4zNDE4NTA1IDE5LjA2NTI2NywxMi4xNzI0MzE3IEMxOC43MjY1NzI1LDExLjgzMzczNzEgMTguNzI2NTcyNSwxMS4yODQ1NTY4IDE5LjA2NTI2NywxMC45NDU4MTQ1IEwyNS42MjE2Mzc2LDQuMzg5NTE1NDUgQzI1Ljk2MDM3OTksNC4wNTA3NzMxNyAyNi41MDk1MzY0LDQuMDUwNzczMTcgMjYuODQ4MzAyNSw0LjM4OTUxNTQ1IFoiLz4KPC9zdmc+Cg=="},"0221":function(e,t,n){"use strict";n("e4ee")},"05e8":function(e,t,n){"use strict";n("7368")},"0745":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgPGcgZmlsbD0ibm9uZSI+CiAgICA8cGF0aCBmaWxsPSIjRjZGNkY2IiBkPSJNMTYsMCBDNy4xNTYzNjM2MywwIDAsNy4xNTYzNjM2MyAwLDE2IEMwLDI0Ljg0MzYzNjQgNy4xNTYzNjM2MywzMiAxNiwzMiBDMjQuODQzNjM2NCwzMiAzMiwyNC44NDM2MzY0IDMyLDE2IEMzMiw3LjE1NjM2MzYzIDI0Ljg0MzYzNjQsMCAxNiwwIFoiLz4KICAgIDxnIGZpbGw9IiMwMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDggOCkiPgogICAgICA8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIG9wYWNpdHk9IjAiLz4KICAgICAgPHBhdGggZD0iTTEyLjQ0NDEwNyw4LjE5NDk3MzggTDguMzk1NTExMzYsNC4xNDM1MjkwOSBDOC4yOTYwMDg2MSw0LjA0MzU0MjUzIDguMTY1OTk5MiwzLjk5NTUzODIzIDguMDM2NTAwNDcsMy45OTY1MzI3MiBDOC4wMTkwMDI4MywzLjk5NTAyNzU1IDguMDA0MDA0ODQsMy45ODY1MzQwNiA3Ljk4NjUwNzE5LDMuOTg2NTM0MDYgQzcuOTEzNTA2MjUsMy45ODY1MzQwNiA3Ljg0NTUwNDY0LDQuMDAzNTIxMDMgNy43ODMwMTMwMyw0LjAzMTUyODAyIEM3LjcyMDAxMDc1LDQuMDU1NTMwMTcgNy42NjAwMTg4MSw0LjA5MjAzMDY0IDcuNjA5MDA0MTYsNC4xNDMwMTg0MSBMMy41NTY5OTUwMyw4LjE5MTgyOTA2IEMzLjM2MTQ4MzY3LDguMzg2ODI5NzMgMy4zNjA5OTk4OCw4LjcwMzMxOTQ1IDMuNTU2NDg0MzQsOC44OTg4MzA4MSBDMy42NTM5NzEyMyw4Ljk5NjgyODM5IDMuNzgxOTkxNjcsOS4wNDU4MjcxOSAzLjkxMDQ5NTkxLDkuMDQ1ODI3MTkgQzQuMDM4NDg5NDUsOS4wNDU4MjcxOSA0LjE2NTk5OTIsOC45OTY4MjgzOSA0LjI2Mzk5Njc4LDguODk5ODI1MzEgTDcuNDg2NDkzNzUsNS42Nzg1Mzc4MyBMNy40ODY0OTM3NSwxNC40ODY1NDc1IEM3LjQ4NjQ5Mzc1LDE0Ljc2MzA0MjYgNy43MTA0OTU5MSwxNC45ODY1MzQxIDcuOTg2NTA3MTksMTQuOTg2NTM0MSBDOC4yNjI1MTg0NywxNC45ODY1MzQxIDguNDg2NTIwNjMsMTQuNzYzMDQyNiA4LjQ4NjUyMDYzLDE0LjQ4NjU0NzUgTDguNDg2NTIwNjMsNS42NTQwMjUgTDExLjczNTExNjMsOC44OTk5NTk2OSBDMTEuODMyNjMsOC45OTc5NTcyNyAxMS45NjE2MTgxLDkuMDQ3NDY2NzUgMTIuMDg5NjExNiw5LjA0NzQ2Njc1IEMxMi4yMTc2MDUyLDkuMDQ3NDY2NzUgMTIuMzQ0NjA0Miw4Ljk5ODk3ODY0IDEyLjQ0MjExOCw4LjkwMTk3NTU1IEMxMi42Mzg1OTcsOC43MDc0NTg2NyAxMi42MzkxMDc2LDguMzkwNDU4MjcgMTIuNDQ0MTA3LDguMTk0OTczOCBaIE0xMy41MDAwNDAzLDMgTDIuNTAwMDQwMzEsMyBDMi4yMjQwMjkwMywzIDIuMDAwMDI2ODgsMi43NzU5OTc4NCAyLjAwMDAyNjg4LDIuNDk5OTg2NTYgQzIuMDAwMDI2ODgsMi4yMjM5NzUyOCAyLjIyNDAyOTAzLDIgMi41MDAwNDAzMSwyIEwxMy41MDAwNDAzLDIgQzEzLjc3NjUzNTQsMiAxNC4wMDAwMjY5LDIuMjI0MDAyMTYgMTQuMDAwMDI2OSwyLjUwMDAxMzQ0IEMxNC4wMDAwMjY5LDIuNzc2MDI0NzIgMTMuNzc2NTM1NCwzIDEzLjUwMDA0MDMsMyBaIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},"0808":function(e,t,n){e.exports=n.p+"static/img/guide-3.1.f3046074.png"},"08ca":function(e,t,n){"use strict";n("f415")},"0cf1":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aWNvbl90aW1lPC90aXRsZT4KICAgIDxnIGlkPSLmjqfku7YiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJpdGVtX2NvdXJzZeWkh+S7vS0xNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExLjAwMDAwMCwgLTE3OS4wMDAwMDApIiBmaWxsPSIjODg4ODg4IiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICA8ZyBpZD0iaWNvbl90aW1lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMC4wMDAwMDAsIDE3OC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik04LDEgQzExLjg2NTk5MzIsMSAxNSw0LjEzNDAwNjc1IDE1LDggQzE1LDExLjg2NTk5MzIgMTEuODY1OTkzMiwxNSA4LDE1IEM0LjEzNDAwNjc1LDE1IDEsMTEuODY1OTkzMiAxLDggQzEsNC4xMzQwMDY3NSA0LjEzNDAwNjc1LDEgOCwxIFogTTgsMiBDNC42ODYyOTE1LDIgMiw0LjY4NjI5MTUgMiw4IEMyLDExLjMxMzcwODUgNC42ODYyOTE1LDE0IDgsMTQgQzExLjMxMzcwODUsMTQgMTQsMTEuMzEzNzA4NSAxNCw4IEMxNCw0LjY4NjI5MTUgMTEuMzEzNzA4NSwyIDgsMiBaIE03LjUsNCBDNy43NzYxNDIzNyw0IDgsNC4yMjM4NTc2MyA4LDQuNSBMOCw4LjYyNSBMMTAuNTM5NTU5NCw5LjMwNTg2NjY2IEMxMC44MDYyOTI1LDkuMzc3MzM3NTYgMTAuOTY0NTgzNyw5LjY1MTUwNjA0IDEwLjg5MzExMjgsOS45MTgyMzkwOSBDMTAuODIxNjQxOSwxMC4xODQ5NzIxIDEwLjU0NzQ3MzQsMTAuMzQzMjYzNCAxMC4yODA3NDA0LDEwLjI3MTc5MjUgTDcuMzgyOTYyOTEsOS40OTUzMzUzNSBDNy4zMDUyNzgwMyw5LjQ3NDUxOTc1IDcuMjM2NzkxNjQsOS40MzY1MTA1MSA3LjE4MDUwMDksOS4zODY0OTg4OSBDNy4xNzkyNTA5MSw5LjM4MzU5MDAxIDcuMTc2OTE4OTYsOS4zODE2MjU5MyA3LjE3NDYwNTM2LDkuMzc5NjQxMDcgQzcuMTYyNTQwMzgsOS4zNzAwNTY3NyA3LjE1MTg1Njg3LDkuMzU5MjYxMzYgNy4xNDE3MDIzMiw5LjM0ODAyNjI4IEM3LjA1MzkxMDg0LDkuMjU4NDM3MDggNyw5LjEzNTUxNDMxIDcsOSBMNyw0LjUgQzcsNC4yMjM4NTc2MyA3LjIyMzg1NzYzLDQgNy41LDQgWiIgaWQ9IuW9oueKtue7k+WQiCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},"0ee8":function(e,t,n){},"0efe":function(e,t,n){n("96cf");var i=n("c973"),r=n("970b"),s=n("5bc3"),a="https://learning.u.wps.cn",c={iphone:"18",ipad:"19","android-phone":"16","android-pad":"17",pc:"1",mac:"15"},o={iphone:"ios_wps_servicecenter_search",ipad:"ipados_wps_servicecenter_search","android-phone":"android_wps_servicecenter_search","android-pad":"androidpad_wps_servicecenter_search",pc:"pc_wps_servicecenter_search",mac:"mac_wps_servicecenter_search"},u={pc:1,android:2,ios:3,mac:4},l=function(){"use strict";function e(t){r(this,e),this.sdk=t}return s(e,[{key:"init",value:function(e){var t=e.deviceId,n=e.clientDist,i=e.clientVersion,r=e.platform,s=e.os;this.deviceId=t,this.clientDist=n,this.clientVersion=i,this.platform=u[r]||u.pc,this.os=s}},{key:"_osToCgId",value:function(){return c[this.os]||""}},{key:"_osToPosition",value:function(){return o[this.os]||""}},{key:"search",value:function(){var e=i(regeneratorRuntime.mark((function e(t){var n,i,r,s,c,o,u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.keyword,i=t.page,r=t.limit,s=this._osToCgId(),c=this._osToPosition(),o="1",u="".concat(a,"/search/resource/servicecenter"),l={device_id:this.deviceId,client_dist:this.clientDist,client_version:this.clientVersion,platform:this.platform,position:c,keyword:n,app_type:[],from:i,size:r,resource_params:{service_center_params:{sort_by:"cool",order:"asc",top_cate:[],post_type:[o],sub_cat_id:s}}},e.next=8,this.sdk.http({url:u,method:"post",params:l}).catch((function(e){return{result:"fail",msg:"networkError"}}));case 8:return h=e.sent,e.abrupt("return",h);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"associate",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n){var i,r,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this._osToCgId(),r="".concat(a,"/search/resource/servicecenter/associate"),s={device_id:this.deviceId,key:t,sub_cat_id:i,num:n},e.next=5,this.sdk.http({url:r,method:"post",params:s}).catch((function(e){return{result:"fail",msg:"networkError"}}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();e.exports=l},"0f64":function(e,t,n){"use strict";n("78e4")},"145d":function(e,t,n){},"148f":function(e,t,n){"use strict";n("54bb")},1819:function(e,t,n){},1975:function(e,t,n){"use strict";n("8c14")},"1bdd":function(e,t,n){"use strict";var i=function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"header"},[i("div",{staticClass:"header-fix"},[i("div",{staticClass:"header-content"},[i("div",[i("div",{staticClass:"title tab",on:{click:function(e){return t.handleLogoClick()}}},[i("span",{staticClass:"text"},[t._v("服务中心")])]),i("div",{class:"tab  "+("content"===t.view?"acitve":""),on:{click:function(e){return t.handleChange("content")}}},[t._v(" 首页 "),i("div",{staticClass:"line"})]),t.isGrayReleased?[i("div",{class:"tab feedback-tab "+("my-feedback"===t.view?"acitve":""),on:{click:function(){e.handleChange("my-feedback")}}},[t._m(0)]),i("div",{staticClass:"unreadNumber"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.unreadNum&&t.unreadNum<10,expression:"unreadNum && unreadNum < 10"}],staticClass:"feedback-message-icon-simple",class:t.tipCtrl?"mouseover-tip":"",on:{mouseenter:t.showTip,mouseleave:t.closeTip,click:t.click}},[t._v(" "+t._s(t.unreadNum)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.unreadNum>=10&&t.unreadNum<=99,expression:"unreadNum >= 10 && unreadNum <= 99"}],staticClass:"feedback-message-icon",class:t.tipCtrl?"mouseover-tip":"",on:{mouseenter:t.showTip,mouseleave:t.closeTip,click:t.click}},[t._v(" "+t._s(t.unreadNum)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.unreadNum&&t.unreadNum>99,expression:"unreadNum && unreadNum > 99"}],staticClass:"feedback-message-icon",class:t.tipCtrl?"mouseover-tip":"",on:{mouseenter:t.showTip,mouseleave:t.closeTip,click:t.click}},[t._v("99+")])])]:t._e()],2),t.isShowFeedbackBtn&&"feedback"!==t.view?i("div",{staticClass:"feedback-container"},[i("span",{staticStyle:{display:"inline-block","margin-right":"10px"}},[t._v("未找到解决方案？请反馈")]),i("div",{staticClass:"feedback",on:{click:function(e){return t.handleChange("feedback")},mouseenter:t.handleFeedbackHover}},[t._v(" 问题反馈 ")])]):t._e()])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 我的反馈 "),n("div",{staticClass:"line"})])}],s=(n("99af"),n("96cf"),n("1da1")),a=n("eaf8"),c=0,o={props:{view:{default:"",type:String,require:!0},optionsInfo:{type:Object,default:function(){return{}}},ready:{type:Boolean,default:!1},md5:{type:String,default:""}},computed:{page:function(){switch(this.view){case"detail":return"文章详情页";case"content":return"首页";case"feedback":return"反馈页";case"search-page":return"搜索页"}return""},isShowFeedbackBtn:function(){return this.ready&&"WPS2019"!==this.optionsInfo.productName&&!1===this.$optionsInfo.pure_reading||"WPS2019"===this.optionsInfo.productName&&"my-feedback"===this.view}},data:function(){return{unreadNum:0,status:{hasDw:!1},tipCtrl:!1,isGrayReleased:this.$isGrayReleased}},watch:{ready:function(){this.isShowFeedbackBtn&&!1===this.status.hasDw&&(this.status.hasDw=!0,this.$dw.feedbackShow(this.page,"顶部栏"))}},methods:{showTip:function(){this.tipCtrl=!0},closeTip:function(){this.tipCtrl=!1},handleFeedbackHover:function(){this.$dw.feedbackHover(this.page,"顶部栏")},handleLogoClick:function(){this.$dw.logoClick(),this.handleChange("content")},handleChange:function(e){"feedback"===e?this.$dw.feedbackClick(this.page,"顶部栏"):"content"===e?this.$dw.homepageClick():"my-feedback"===e&&this.$dw.myFeedBackPageClick();var t="//get.wps.cn/feedback/pc/index"+"?view=".concat(e,"&5=").concat(this.md5,"&click_from=header");window.location.href=t},click:function(){++c,this.clickEvents()},getUnreadNum:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$getWpsService.getUnreadNum();case 2:n=t.sent,n&&200===n.code&&(e.unreadNum=n.data);case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.clickEvents=Object(a["c"])(Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(c>1)){t.next=5;break}return t.next=3,e.$getWpsService.clearUnreadNum();case 3:n=t.sent,n&&200===n.code&&(e.$eventHub.$emit("clearUnreadNum"),e.getUnreadNum());case 5:c=0;case 6:case"end":return t.stop()}}),t)}))),250),e.$eventHub.$on("unreadUpdate",(function(){e.getUnreadNum()})),e.$eventHub.$on("updateGray",(function(){e.isGrayReleased=e.$isGrayReleased})),Object(a["l"])()&&(e.$eventHub.$on("login",(function(){e.getUnreadNum()})),e.$eventHub.$on("logout",(function(){e.unreadNum=0}))),e.getUnreadNum();case 5:case"end":return t.stop()}}),t)})))()}},u=o,l=(n("235b"),n("2877")),h=Object(l["a"])(u,i,r,!1,null,"755dd7d4",null);t["a"]=h.exports},"1c85":function(e,t,n){},"1ced":function(e,t,n){e.exports=n.p+"static/img/error.9c86e1eb.svg"},"1d66":function(e,t,n){"use strict";n("4d0d")},"1d7f":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"wrap"},["loading"===e.loadStatus?n("loading-page",{attrs:{text:"正在加载..."}}):e._e(),"fail"===e.loadStatus?n("network-error-page",{on:{retry:e.handleRetry}}):e._e(),e.isHelpdesk?e._e():n("Notice",{attrs:{"is-vip":e.isVip,client:e.client},on:{"load-status-change":e.handleNoticeStatusChange}}),e.commonConfig&&e.commonConfig.list.length>0?n("Topic",{attrs:{title:e.commonConfig.title,list:e.commonConfig.list,"show-more":e.commonConfig.current_page<e.commonConfig.last_page},on:{select:e.showDetail,"load-more":e.loadCommonTopic}}):e._e(),e.hotConfig&&e.hotConfig.list.length>0?n("Topic",{attrs:{title:e.hotConfig.title,list:e.hotConfig.list,"show-more":e.hotConfig.current_page<e.hotConfig.last_page,hot:!0},on:{select:e.showDetail,"load-more":e.loadHotTopic}}):e._e(),n("Category",{attrs:{client:e.client,"product-name":e.optionsInfo.productName,"options-info":e.optionsInfo},on:{select:e.showDetail,loadStatus:e.handleCateLoad}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isHelpdesk&&("fail"===e.loadStatus||e.showFooter),expression:"!isHelpdesk && (loadStatus === 'fail' || showFooter)"}],staticClass:"footer",class:{fix:"fail"===e.loadStatus}},[e._m(0)])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap"},[n("p",[e._v(" Copyright © 2008-2024 Kingsoft Office Corporation, All Rights Reserved. "),n("a",{attrs:{href:"http://beian.miit.gov.cn/",target:"_blank"}},[e._v("粤ICP备13015957号")]),n("a",{attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44049102496073",target:"_blank"}},[e._v("公安备案号：44049102496073")])]),n("p",[e._v(" 金山办公隐私声明"),n("a",{staticStyle:{color:"#417FF9"},attrs:{href:"https://www.wps.cn/privacy/clean_privacyprotect/",target:"_blank"}},[e._v("《金山办公隐私声明》")])])])}],s=(n("99af"),n("47bb")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wps-feedback-page",attrs:{id:"wps-feedback-loading"}},[n("loading"),n("p",{staticClass:"wps-feedback-page-desc",attrs:{id:"loading-info"}},[e._v(e._s(e.text))])],1)},c=[],o=n("9c2a"),u={components:{Loading:o["a"]},props:{text:{type:String,default:""}}},l=u,h=n("2877"),d=Object(h["a"])(l,a,c,!1,null,null,null),p=d.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showNotice?n("div",{staticStyle:{"padding-top":"30px"}},[n("div",{staticClass:"notice"},[n("div",{staticClass:"top"},[e._v("公告栏")]),n("div",{staticClass:"content"},[e.showButton?n("button",{staticClass:"view",on:{click:e.handleView}},[e._v(e._s(e._f("sliceStr")(e.config.button.title,10)))]):e._e(),n("h3",[e._v(e._s(e._f("sliceStr")(e.config.title,15)))]),n("p",[e._v(e._s(e._f("sliceStr")(e.config.desc,30)))])]),n("div",{staticClass:"close",on:{click:e.handleClose}})])]):e._e()},f=[],w=(n("96cf"),n("1da1")),m=n("2ce3"),M=n.n(m),y={props:{isVip:{type:Boolean,default:!1},client:{type:String,required:!0}},data:function(){return{config:null,status:{isShow:!1}}},computed:{showNotice:function(){var e=null!==this.config&&("0"===this.config.show_for_vip||this.isVip)&&!0===this.status.isShow;return e},showButton:function(){return this.config.button&&this.config.button.title&&this.config.button.url}},watch:{showNotice:function(){!0===this.showNotice&&this.$dw.noticeShow(this.showButton)}},methods:{handleView:function(){this.$dw.noticeClick(),window.open(this.config.button.url)},handleClose:function(){this.$dw.noticeClose(),this.status.isShow=!1,M.a.set(!1)}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.status.isShow=!1!==M.a.get(),t.next=3,e.$learningService.getNoticeByKey(e.client).catch((function(){return null}));case 3:if(n=t.sent,n){t.next=7;break}return e.$emit("load-status-change",-1),t.abrupt("return",!1);case 7:e.config=n,e.$emit("load-status-change",e.showNotice?1:-1);case 9:case"end":return t.stop()}}),t)})))()}},v=y,k=(n("d068"),Object(h["a"])(v,g,f,!1,null,"d6e292fa",null)),N=k.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.list.length>0?n("div",{staticClass:"topic"},[n("h3",{staticClass:"title",class:{hot:e.hot}},[e._v(e._s(e.title))]),n("div",{staticClass:"list"},e._l(e.list,(function(t,i){return n("Item",{key:t.id,attrs:{content:t,index:i},on:{select:function(n){return e.handleSelect({id:t.id,index:i,title:t.post_title})},show:function(n){return e.handleShow({id:t.id,index:i,title:t.post_title})}}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"showMore"}],staticClass:"more",on:{click:function(t){return e.handleMore()}}},[e._v("查看更多")])]):e._e()},b=[],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item"},[n("span",{staticClass:"icon",class:{i1:0===e.index,i2:1===e.index,i3:2===e.index},on:{click:function(t){return e.handleClick()}}},[e._v(e._s(e._f("number")(e.index)))]),n("a",{staticClass:"text",attrs:{title:e.content.post_title},on:{click:function(t){return e.handleClick()}}},[e._v(e._s(e.content.post_title))])])},j=[],_={props:{content:{require:!0},index:{require:!0}},filters:{number:function(e){return e+1<10?"0"+(e+1):e+1}},methods:{handleClick:function(){this.$emit("select")}},mounted:function(){}},D=_,x=(n("f4e9"),Object(h["a"])(D,C,j,!1,null,"4a755d18",null)),T=x.exports,S={components:{Item:T},props:{title:{require:!0,default:"",type:String},list:{require:!0,default:function(){return[]},type:Array},showMore:{type:Boolean,default:!1},hot:{require:!1,default:!1}},data:function(){return{page:0}},methods:{handleSelect:function(e){var t=e.id,n=e.index,i=e.title;this.$dw.articleHeadlineClick({articleId:t,articleTitle:i,articleClass:"",moduleTitle:this.title,articleIdx:n}),this.$emit("select",{id:t,index:n,moduleTile:this.title})},handleMore:function(){this.$dw.articleMoreClick(this.title),this.page++,this.$emit("load-more",{page:this.page})},handleShow:function(e){var t=e.id,n=e.index,i=e.title;this.$dw.articleHeadlineShow(t,i,"",this.title,n)}}},A=S,z=(n("2720"),Object(h["a"])(A,I,b,!1,null,"20095ede",null)),O=z.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.ableCategories.length>0,expression:"ableCategories.length > 0"}],staticClass:"category"},[n("h3",{staticClass:"title"},[e._v("分类问题")]),n("Menu",{attrs:{"menu-list":e.ableCategories,selected:e.selected},on:{select:e.handleMenuSelect}}),n("div",{staticClass:"cate-wrap"},e._l(e.showCategories,(function(t){return n("Cate",{key:t.id,attrs:{selected:e.selected,content:t},on:{select:e.handleArticleSelect,more:e.handleCateMore}})})),1)],1)},E=[],P=(n("4de4"),n("fb6a"),n("a434"),n("b0c0"),n("2909")),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu"},[n("div",{staticClass:"option",class:{active:0===e.selected},on:{click:function(t){return e.select(0)}}},[n("span",{staticClass:"icon sum"}),n("span",[e._v("综合")])]),e._l(e.showMenuList,(function(t){return n("div",{key:t.id,staticClass:"option",class:{active:e.selected===t.id},on:{click:function(n){return e.select(t.id,t.name)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.selected===t.id,expression:"(selected === item.id)"}],staticClass:"icon",style:e.getIcon(t,!0)}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.selected!==t.id,expression:"(selected !== item.id)"}],staticClass:"icon",style:e.getIcon(t,!1)}),n("span",[e._v(e._s(e._f("sliceStr")(t.name,8)))])])}))],2)},Y=[],U=(n("a9e3"),{props:{menuList:{require:!0,type:Array,default:function(){return[]}},selected:{require:!0,type:Number,default:0}},computed:{showMenuList:function(){return this.menuList.filter((function(e){return e.data&&e.data.length>0}))}},data:function(){return{}},methods:{select:function(e,t){0===e?this.$dw.articleClassClick("综合"):this.$dw.articleClassClick(t),this.$emit("select",e)},getIcon:function(e,t){return e&&e.more&&e.more.icon&&e.more.checked_icon?t?{backgroundImage:"url(".concat(e.more.checked_icon,")")}:{backgroundImage:"url(".concat(e.more.icon,")")}:null}}}),Q=U,B=(n("1f85"),Object(h["a"])(Q,R,Y,!1,null,"3f62304d",null)),$=B.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.content.data&&e.content.data.length>0?n("div",{staticClass:"cate",class:{minheight:0!==this.selected}},[n("h3",{staticClass:"title"},[n("span",{staticClass:"icon",style:e.icon}),n("span",[e._v(e._s(e._f("sliceStr")(e.content.name,8)))])]),n("div",{staticClass:"list"},e._l(e.showList,(function(t,i){return n("Item",{key:i,attrs:{title:t.post_title},on:{select:function(n){return e.handleSelect({id:t.id,index:i,title:t.post_title})},show:function(n){return e.handleShow({id:t.id,index:i,title:t.post_title})}}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showList.length<e.content.data.length,expression:"showList.length < content.data.length"}],staticClass:"more",class:{selected:0!==this.selected},on:{click:function(t){return e.handleMore(e.content.id)}}},[e._v("查看更多")])]):e._e()},Z=[],F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item"},[n("a",{staticClass:"text",attrs:{title:e.title},on:{click:function(t){return e.handleClick()}}},[e._v(e._s(e.title))])])},G=[],W={props:{title:{require:!0}},methods:{handleClick:function(){this.$emit("select")}},mounted:function(){}},V=W,K=(n("c210"),Object(h["a"])(V,F,G,!1,null,"5a7c63c8",null)),J=K.exports,q={props:{content:{require:!0},selected:{require:!0}},components:{Item:J},data:function(){return{}},computed:{icon:function(){return this.content&&this.content.more&&this.content.more.icon?{backgroundImage:"url(".concat(this.content.more.icon,")")}:null},showList:function(){return this.content&&this.content.data&&0!==!this.content.data.length?0===this.selected?this.content.data.slice(0,6):this.content.data.slice(0,10*this.content.user_page-4):[]}},filters:{number:function(e){return e+1<10?"0"+(e+1):e+1}},methods:{handleSelect:function(e){var t=e.id,n=e.index,i=e.title;this.$dw.articleHeadlineClick({articleId:t,articleTitle:i,articleClass:this.content.name,moduleTitle:"分类问题",articleIdx:n}),this.$emit("select",{id:t,index:n,moduleTile:"分类问题"})},handleMore:function(e){this.$dw.articleMoreClick("分类问题"),this.$emit("more",e)},handleShow:function(e){var t=e.id,n=e.index,i=e.title;this.$dw.articleHeadlineShow(t,i,this.content.name,"分类问题",n)}}},X=q,ee=(n("d827"),Object(h["a"])(X,H,Z,!1,null,"e929ff2c",null)),te=ee.exports,ne={components:{Menu:$,Cate:te},props:{productName:{type:String},optionsInfo:{type:Object,default:function(){return{}}},client:{type:String,required:!0}},data:function(){return{categories:[],selected:0}},computed:{ableCategories:function(){var e=this.categories.filter((function(e){return e.data&&e.data.length>0}));return e.slice(0,15)},showCategories:function(){var e=[];if(0===this.selected)e=this.ableCategories;else for(var t=0;t<this.ableCategories.length;t++)if(this.ableCategories[t].id===this.selected){e=[this.ableCategories[t]];break}return e}},methods:{handleArticleSelect:function(e){this.$emit("select",e)},handleMenuSelect:function(e){this.selected=e;var t=this._getCateObjById(e);t&&1===t.user_page&&this._fetchCategoriesData(t)},handleCateMore:function(e){var t=this._getCateObjById(e);0==this.selected&&1!==t.user_page||this._fetchCategoriesData(t),this.selected=e},_getCateObjById:function(e){for(var t=-1,n=0;n<this.categories.length;n++)if(this.categories[n].id===e){t=n;break}return this.categories[t]},fetchCategories:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n,i,r,s,a,c,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$learningService.getCateList(e.client);case 2:if(n=t.sent,n){t.next=6;break}return e.$emit("loadStatus",-1),t.abrupt("return",!1);case 6:return i=e.optionsInfo.productId||null,t.next=9,e.$learningService.getProductCate(i,e.productName,e.client);case 9:if(r=t.sent,!r||!r["item"]){t.next=23;break}if(s=r["item"]["name"],!s){t.next=23;break}a=-1,c=0;case 15:if(!(c<n.length)){t.next=22;break}if(n[c].name!==s){t.next=19;break}return a=c,t.abrupt("break",22);case 19:c++,t.next=15;break;case 22:-1!==a&&n.unshift.apply(n,Object(P["a"])(n.splice(a,1)));case 23:for(e.categories=n,e.$emit("loadStatus",1),o=function(t){e.$learningService.getCateArticlesById(e.categories[t].id).then((function(n){n&&(e.$set(e.categories[t],"total",n.total),e.$set(e.categories[t],"per_page",n.per_page),e.$set(e.categories[t],"last_page",n.last_page),e.$set(e.categories[t],"data",[]),e.$set(e.categories[t],"start_page",1),e.$set(e.categories[t],"fetch_page",1),e.$set(e.categories[t],"user_page",0),e._fetchCategoriesData(e.categories[t]))}))},u=0;u<e.categories.length;u++)o(u);case 27:case"end":return t.stop()}}),t)})))()},_fetchCategoriesData:function(e,t){var n=this;return Object(w["a"])(regeneratorRuntime.mark((function i(){var r,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t||e.user_page++,!(e.data.length>=e.total)){i.next=3;break}return i.abrupt("return",!1);case 3:return i.next=5,n.$learningService.getCateArticlesById(e.id,e.fetch_page);case 5:r=i.sent,e.fetch_page++,r&&r.data&&((s=e.data).push.apply(s,Object(P["a"])(r.data)),r.data.length<6&&n._fetchCategoriesData(e                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                is.source.groupid},isSa:function(){return["creator","admin"].indexOf(this.role)>-1},isAdmin:function(){return["admin"].indexOf(this.role)>-1},isCorpTeam:function(){return!!this.source.corpid},inviteLinkTipText:function(){return this.isInviteLinkTip?this[this.isInviteLinkTip]:"".concat(this.lang_txt3).concat(this.isCorpTeam?this.lang_txt4:this.lang_txt5)},corpid:function(){return this.source.corpid},inviteCopyText:function(){var e="\n";return navigator.userAgent.indexOf("Firefox")>-1&&(e="%20\n"),"".concat(this.linkKeyUrl).concat(e).concat(this.linkKeyTitle)},allMembersCount:function(){return this.source.member_count||1},allowRoles:function(){return this.user.is_plus?J:z},isShareFolder:function(){return this.source.folderid||this.currentTeam&&this.currentTeam.fileid},showTransferFolder:function(){return this.isShareFolder&&"creator"===this.role&&this.isDialog},showTransfer:function(){return(this.showTransferFolder||this.showTransferEntTeam)&&"pcoffice"!==this.showType},selectedMembers:function(){var e=this;return this.allMembers.filter((function(t){return e.isSa&&"creator"===t.role?t.checked&&"creator"!==t.role:e.isAdmin&&"admin"===t.role?t.checked&&"admin"!==t.role:!0===t.checked}))},allMembers:{get:function(){return this.members.concat(this.invitedMembers).filter((function(e){return e.status}))}},multipleSelect:function(){return this.isSa&&this.source&&0!==this.source.corpid},selectAllNumber:function(){var e=this,t=0;return this.allMembers.forEach((function(n){"creator"===n.role&&"creator"===e.role?t+=1:"admin"!==n.role&&"creator"!==n.role||"admin"!==e.role||(t+=1)})),this.allMembersCount-t},selectAllHasCancel:function(){var e=0;return this.allMembers.forEach((function(t){t.checked||(e+=1)})),this.allMembersCount-this.diabledSelectNumber-e},diabledSelectNumber:function(){var e=this,t=0;return this.allMembers.forEach((function(n){"creator"===n.role&&"creator"===e.role?t+=1:"admin"!==n.role&&"creator"!==n.role||"admin"!==e.role||(t+=1)})),t},selectableMaxNumber:function(){var e=this,t=0;return this.allMembers.forEach((function(n){("creator"!==n.role&&"creator"===e.role||"creator"!==n.role&&"admin"!==n.role&&"admin"===e.role)&&(t+=1)})),t},showShareLink:function(){return!(window&&window.wpsQuery)&&(this.isSa||(this.source.linkSetup&&this.source.linkSetup.allow_invite&&!this.isDialog||this.isDialog&&this.dialogLinkSetup&&this.dialogLinkSetup.allow_invite)&&"read_member"!==this.role)}},watch:{selectAll:function(e){e?this.allMembers.map((function(e){return e.checked=!0})):this.allMembers.map((function(e){return e.checked=!1}))}},created:function(){var e=this;return(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetchItems(),e.$emit("componentLoadChange",!0),e.role=e.source.user_role,t.next=5,e.getLinkinfo();case 5:e.getInviteMembers(),e.$emit("componentLoadChange",!1);case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e;this.dwEvent("pageview"),this.ua=(0,U.getUA)(navigator.userAgent);var t={userinfo:this.user,callbackSuccess:this.onSendInvitationClick,callbackCancel:this.onCancelInvitationClick,doNotShowFeedback:!0,onLoad:this.onContactInvitationPanelLoad};!this.isSa&&this.isTeam&&this.$emit("setDlgSize","FolderShareMainForCommonMember"),W.mount(this,t),"linkfolder"===this.ftype&&"admin"===(null===(e=this.source)||void 0===e?void 0:e.user_role)&&(this.inviteLinkAuthList=this.inviteLinkAuthList.filter((function(e){return"cancel"!==e.command})))},destroyed:function(){window.removeEventListener("click",this.handlePop)},methods:{handleQrcode:function(){var e,t=this,n=this.currentTeam,i=n.name,a=void 0===i?"":i,s=n.recent_members,c=void 0===s?[]:s,l=n.id;a||(a=this.currentTeam.fname||"团队名称"),this.changeDialog("KBarcode",{title:(0,h.t)("logic.FolderShareMain.shareFolderDialogTitle"),linkTitle:a,link:this.linkKeyUrl,linkIcon:(e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.coB)(l,4);case 2:return t=e.sent,e.abrupt("return",t||c.map((function(e){return e.avatar})));case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),description:(0,h.t)("logic.FolderShareMain.qrcode_scan"),footerRender:function(e){return e("div",{style:{marginTop:"16px",color:"#767C85",fontSize:"12px",textAlign:"center"}},[e("span",{},(0,h.t)("logic.FolderShareMain.footer_link")),e("a",{style:{color:"#417FF9",cursor:"pointer",textDecoration:"none"},attrs:{href:"https://f.wps.cn/w/BgmIWySo/",target:"_blank"},on:{click:function(){t.$ua.isTabletClient&&window.open("https://f.wps.cn/w/BgmIWySo/",{})}}},(0,h.t)("logic.FolderShareMain.footer_link_tell_us"))])}})},onClickCopy:function(){},getInviteLinkTitle:function(){return this[this.isInviteLinkTitle]},initlinkSetup:function(e){this.linkExpires=e.link_period>0?this.inviteLinkExpires[0]:this.inviteLinkExpires[1],this.linkAuth=e.member_readonly?this.inviteLinkAuthList[0]:this.inviteLinkAuthList[1],this.need_approve=e.need_approve},onChangeNeedVerify:function(e){var t=this;e?this.dwEvent("verifyneed_on","groupsetting"):this.dwEvent("verifyneed_off","groupsetting"),setTimeout((function(){t.changeShareLink()}),100)},handleLinkExpires:function(e){var t=this;this.inviteLinkExpires.forEach((function(n){n.command===e&&(t.linkExpires=n)}));var n="forever"===this.linkExpires.command?"0":"3";this.dwEvent("linkperiod_"+n,"groupsetting"),this.changeShareLink()},handleChangeLinkAuth:function(e){var t=this;if("cancel"!==e){this.inviteLinkAuthList.forEach((function(n){n.command===e&&(t.linkAuth=n)}));var n="read"===this.linkAuth.command?"readonly_on":"readonly_off";this.dwEvent(n,"groupsetting"),this.changeShareLink()}else this.isDialog?this.changeDialog("KFolderShareCancel",{source:this.source,showType:this.showType,onCancelShare:this.onCancelShare,backtoPrevIcon:!1}):this.$emit("change","FolderShareCancel",{source:this.source})},changeShareLink:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.need_approve,r="forever"===e.linkExpires.command?0:259200,i="read"===e.linkAuth.command,t.next=6,(0,G.U47)(e.source.id,{need_approve:n,link_period:r,member_readonly:i,allow_invite:!1});case 6:"ok"===(a=t.sent).result?R.Z.success((0,h.t)("logic.FolderShareMain.txt55")):R.Z.error(a.result),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,x.R5)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},dwEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"groupprofile";this.$emit("onDwEvent",{type:t,action:e})},handleItemClick:function(e){var t=this;if(this.$nextTick((function(){t.selectedMembers.length===t.selectableMaxNumber&&(t.selectAll=!0),0===t.selectedMembers.length&&(t.selectAll=!1)})),this.selectedMembers.length+1>this.maxSelectNumber&&!e.checked)return R.Z.warning((0,h.t)("logic.FolderShareMain.txt44"));e.checked=!e.checked},handleSelectAll:function(){this.selectAll=!this.selectAll},checkSafe:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var i,a,s,c,l,u,d,p,m,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=[],a=[],s=t.selectAll,c=!1,t.allMembers.forEach((function(e){e.checked||(c=!0)})),(l=s&&c)&&(a=(a=t.getCancelIds()).filter((function(e){return e}))),i=t.selectedMembers.map((function(e){return e.id})),u=l?t.getDiff(i,a):i,!((d=s?t.selectAllHasCancel:u.length)>t.maxSelectNumber&&"delete"!==e)){n.next=12;break}return n.abrupt("return",R.Z.warning((0,h.t)("logic.FolderShareMain.txt44")));case 12:if(t.isUITeamDeleteBindPhone){n.next=16;break}return n.next=15,t.handleBatchAction(e,s,u,i,a);case 15:return n.abrupt("return",n.sent);case 16:if(!(d<=50&&"delete"===e||"delete"!==e)){n.next=21;break}return n.next=19,t.handleBatchAction(e,s,u,i,a);case 19:n.next=36;break;case 21:if(!(d>50&&d<=100&&"delete"===e)){n.next=35;break}if(t.isCheckUserBatchDeleteMemberPerm){n.next=24;break}return n.abrupt("return");case 24:return n.next=26,(0,G.Vsp)();case 26:if(p=n.sent,m=p&&p.phone&&1===p.certification,!p||1!==p.certification||2!==p.phone_user_status){n.next=31;break}return t.certificationForbidden=!0,n.abrupt("return");case 31:f=function(n,r){var o={onOk:function(){t.$parent.$emit("close"),t.handleBatchAction(e,s,u,i,a)},cancel:function(){return t.$parent.$emit("close")},phone:r};n?t.changeDialog("KSecurePhoneCheck",o):t.replaceDialog("KSecurePhoneCheck",o)},m?f(!0):t.changeDialog("KSecureInfo",{identifyType:"certification",onSuccessBindPhone:function(){var e=(0,r.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.Vsp)();case 2:if(n=e.sent,r=n&&n.phone&&1===n.certification,!n||1!==n.certification||2!==n.phone_user_status){e.next=7;break}return t.certificationForbidden=!0,e.abrupt("return");case 7:f(!1,r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),n.next=36;break;case 35:"delete"===e&&d>100&&R.Z.warning((0,h.t)("logic.FolderShareMain.txt62"));case 36:case"end":return n.stop()}}),n)})))()},handleBatchAction:function(e,t,n,i,a){var s=this;return(0,r.Z)(o().mark((function c(){var l,u,d,p,m,f;return o().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,"delete"!==e){c.next=6;break}l={groupid:s.groupid,selected:n,memberids:i,cancelids:a,all:t,selectMember:s.selectAllHasCancel},s.isDialog?(l.successCallback=function(){var e=(0,r.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===t.failList.length?R.Z.success((0,h.t)("logic.FolderShareMain.txt34")):(r=t.failList.map((function(e){return e.userid})),n=s.getDiff(n,r),R.Z.error("".concat(t.failList.length).concat((0,h.t)("logic.FolderShareMain.txt45")))),s.selectAll=!1,s.members=s.members.filter((function(e){return!n.includes(e.id)})),e.next=5,s.onUpdate({id:s.groupid,members:s.members},"role");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.updateTeam=s.updateTeam,s.changeDialog("KFolderShareDelete",l)):s.$emit("change","FolderShareDelete",l),c.next=18;break;case 6:if(u={all:t,role:e,memberids:i,cancelids:a},d=n.length,t&&(delete u.memberids,d=s.selectAllHasCancel),!(d>s.maxSelectNumber)){c.next=11;break}return c.abrupt("return",R.Z.warning((0,h.t)("logic.FolderShareMain.txt44")));case 11:return c.next=13,(0,G.wmG)(s.groupid,u);case 13:p=c.sent,0!==(m=p.data).failList.length?(f=m.failList.map((function(e){return e.userid})),n=s.getDiff(n,f),R.Z.error("".concat(m.failList.length).concat((0,h.t)("logic.FolderShareMain.txt46")))):R.Z.success((0,h.t)("logic.FolderShareMain.txt37")),s.selectAll=!1,s.members=s.members.map((function(t){return t.checked=!1,n.includes(t.id)?Object.assign(t,{role:e}):t}));case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(0),(0,x.R5)(c.t0);case 23:case"end":return c.stop()}}),c,null,[[0,20]])})))()},getDiff:function(e,t){var n=new Set(e),r=new Set(t),i=new Set((0,c.Z)(n).filter((function(e){return!r.has(e)})));return Array.from(i)},getCancelIds:function(){var e=this.role;return this.allMembers.map((function(t){return("creator"!==e||"creator"===t.role||t.checked)&&("admin"!==e||"creator"===t.role||"admin"===t.role||t.checked)?void 0:t.id}))},onMemberRoleChange:function(e,t){var n=this;return(0,r.Z)(o().mark((function r(){var i,a,s,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.role!==t){r.next=2;break}return r.abrupt("return");case 2:if(r.prev=2,"delete"!==t){r.next=18;break}return r.next=6,(0,G.ZTY)({groupid:n.groupid,id:e.id,status:e.status});case 6:if(i=function(t){return t.id!==e.id},e.status?n.members=n.members.filter(i):n.invitedMembers=n.invitedMembers.filter(i),!n.isDialog){r.next=14;break}return n.updateTeam(),r.next=12,n.onUpdate({id:n.groupid,members:n.members},"role");case 12:r.next=16;break;case 14:n.dwEvent("joined_member_delete"),n.$emit("updateTeam");case 16:r.next=26;break;case 18:return delete(a=Object.assign({},e,{role:t})).new_role,r.next=22,(0,G.S39)(a,e.id,n.groupid);case 22:n.members=n.members.map((function(e){return e.id===a.id?a:e})),s="admin"===t?"manager":"read",c="member"===t?"write":s,n.dwEvent("joined_member_"+c);case 26:r.next=31;break;case 28:r.prev=28,r.t0=r.catch(2),(0,x.R5)(r.t0);case 31:case"end":return r.stop()}}),r,null,[[2,28]])})))()},memberRoleText:function(e){return(0,h.t)(this.allowRoles[e])},toTransferMenmbers:function(){var e=this;this.changeDialog("KTransferMembers",{hideHeader:!0,hiddenIds:[this.user.userid],entrance:{eType:"team",eName:this.source.name,id:this.source.id},okCallBack:function(t){t&&t.length>0&&e.toTransferComfirm(t[0])}})},toTransferComfirm:function(e){var t,n=this,i=e.name,a=e.userid;this.changeDialog("KTransferComfirm",{fname:this.source.name,newOwner:{userid:a,name:i},okCallBack:(t=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.source.folderid,e.next=4,(0,G.ZoG)(t,a);case 4:"ok"===e.sent.data.result&&(R.Z.success((0,h.t)("logic.FolderShareMain.txt56")),setTimeout((function(){n.$emit("handleClose"),n.onTransfer()}),1e3)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),"groupNumLimit"===(e.t0.response&&e.t0.response.data?e.t0.response.data.result:-1)?R.Z.error((0,h.t)("logic.FolderShareMain.txt57")):(0,x.R5)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(){return t.apply(this,arguments)})})},onTransferTeam:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,G.yYX)();case 2:n=t.sent,r=n&&n.phone&&n.phone.value,i=function(){setTimeout((function(){e.replaceDialog("KTransferMembers",{hideHeader:!0,hiddenIds:[e.user.userid],entrance:{eType:"team",eName:e.source.name,id:e.source.id},okCallBack:function(t){t&&t.length>0&&e.toTransferComfirm(t[0])}})}),10)},e.showTransferFolder?!r&&e.isTransferShareFolderPhoneCheck?e.changeDialog("KTransferTips",{from:"kdocs-web-transfer",onSuccessBindPhone:function(){e.onSuccessBindPhone(),i()}}):e.toTransferMenmbers():e.transferEntTeam(r);case 6:case"end":return t.stop()}}),t)})))()},onCard:function(e){var t=arguments,n=this;return(0,r.Z)(o().mark((function r(){var i,a,s,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.length<=1?void 0:t[1],a=i.userid,"reMarknameSuccess"!==e){r.next=7;break}return r.next=4,(0,G.snq)({params:{user_ids:a}});case 4:s=r.sent,c=s.name_list,n.allMembers.forEach((function(e){e.id===a&&n.$set(e,"name",c[a])}));case 7:case"end":return r.stop()}}),r)})))()},toDeleteContact:function(){x.F3.closeCurPopover()},getName:function(e){return e.accept_status?e.name+'<span style="color:#949AAE;margin-left:8px;">'+(0,h.t)("logic.FolderShareMain.txt38")+"</span>":e.name},getDisable:function(e){return!(!this.isSa||"creator"!==e.role)||!(!this.isAdmin||"admin"!==e.role)},onClear:function(){V&&V(),this.keyword="",this.members=[],this.searching=!0,this.resetData(),this.fetchItems()},resetData:function(){this.pagination.offset=0,this.canLoad=!0,!this.searching&&this.$refs.scroll&&this.$refs.scroll.toTop()},handleCopySuccess:function(e,t){this.isIE?window.clipboardData.setData("text",e)?this.copySuccessMessage(t):R.Z.error((0,h.t)("logic.FolderShareMain.txt40")):this.copySuccessMessage(t)},copySuccessMessage:function(e){var t=(0,h.t)("logic.FolderShareMain.txt39")+(this.isShareFolder?"，".concat(this.linkAuth.text):"");"wechat"===e?t=(0,h.t)("logic.FolderShareMain.txt58"):"qq"===e&&(t=(0,h.t)("logic.FolderShareMain.txt59")),R.Z.success(t)},handleCopyError:function(){var e=this.$ua.isMac?"Command":"ctrl";prompt((0,h.t)("logic.FolderShareMain.txt41")+" ".concat(e," + c ")+(0,h.t)("logic.FolderShareMain.txt42"))},getInviteMembers:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user.is_plus){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,G.e2J)(e.groupid);case 5:if(n=t.sent,r=n.members,i=r.map((function(e){return{id:e,name:"".concat(e)+(0,h.t)("logic.FolderShareMain.txt43"),avatar:X,role:"member",checked:!1}})),e.invitedMembers=i,"linkfolder"!==e.ftype&&"linkfolder"!==e.changeFtype){t.next=14;break}return t.next=12,(0,G.SEX)(e.groupid);case 12:(a=t.sent)&&a.data&&a.data.info&&a.data.info[e.groupid]>0&&e.$set(e.source,"folderid",a.data.info[e.groupid]);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),(0,x.R5)(t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,16]])})))()},onScroll:function(){var e=this.$refs.dropdown;e&&e.map((function(e){e.hide()})),x.F3.closeCurPopover()},toSendInvitation:function(e){x.F3.closeCurPopover(),W.show(e)},hideDropDown:function(e){return!this.isSa||e.id===this.user.userid||this.isAdmin&&"admin"===e.role},onPhoneLeanClick:function(e){this.changeDialog("KAddRecommendContact",{backprev:!0,defaultPhone:e,isClink:!1,noCorp:!0,user:this.user})},onAddFromCompantContact:function(){this.isDialog?this.changeDialog(this.useNewSelector?"NewMemberSelector":"KInviteContact",{source:this.source,_from:"kdocs",_function:"addMemberToShareFolder",invitedMembers:this.invitedMembers,isEntManager:this.isEntManager,updateTeam:this.updateTeam,showType:this.showType,from:"",onPhoneLeanClick:this.onPhoneLeanClick,inviteLink:this.inviteLink,user:this.user,hideHeader:!0,onOk:this.onOk}):(this.dwEvent("invite_contact"),this.$emit("change","InviteContact",{source:this.source,invitedMembers:this.invitedMembers}))},onOk:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,G.MvM)({groupid:e.groupid});case 2:(n=t.sent).length&&(n.forEach((function(t){"manager"===t.role&&(t.role="admin"),t.userid=t.userid||t.id,e.multipleSelect&&!t.checked&&(t.checked=!1)})),e.pagination.offset+=e.pagination.count,e.members=n),e.updateTeam(n);case 5:case"end":return t.stop()}}),t)})))()},handleInvitePopover:function(){this.inviteErrorInfo?(this.canInvite=!1,(0,x.x2)(this.inviteErrorInfo)):(this.canInvite=!this.canInvite,window.addEventListener("click",this.handlePop))},handlePop:function(e){e&&"link-add-item-txt"!==e.target.className&&(this.canInvite=!1)},onSetup:function(){var e=this;if(this.isDialog){this.changeDialog("KFolderShareSetting",{source:this.source,dialogLinkSetup:this.dialogLinkSetup,showType:this.showType,onChangeSettings:function(t){e.dialogLinkSetup=t}})}else this.dwEvent("setting"),this.$emit("change","FolderShareSetting",{source:this.source,linkSetup:this.linkSetup,inviteMemberAudit:this.inviteMemberAudit})},searchMembers:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var r,i,a,s,u,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!1,e&&"string"==typeof e&&(t.resetData(),t.keyword=e),t.keyword){n.next=4;break}return n.abrupt("return");case 4:if(V&&V(),n.prev=5,t.members.length&&t.keyword||(t.searching=!0),!t.keyword||"string"!=typeof t.keyword){n.next=20;break}return n.next=10,(0,G.Qgx)(t.groupid,{params:Q({searchname:t.keyword},t.pagination),cancelToken:new Y((function(e){V=e}))});case 10:a=n.sent,s=a.members,u=a.total,s.forEach((function(e){e.userid=e.id,e.isSearch=1})),d=s.length,V=function(){},t.total=u,e?t.members=s:(i=t.members).push.apply(i,(0,c.Z)(s)),t.pagination.offset+=t.pagination.count,!d&&(t.canLoad=!1);case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(5),r=l.Z.isCancel(n.t0);case 25:return n.prev=25,t.dwEvent("searchmember"),r||(t.searching=!1),n.finish(25);case 29:case"end":return n.stop()}}),n,null,[[5,22,25,29]])})))()},fetchItems:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.keyword||"string"!=typeof e.keyword){t.next=4;break}return t.next=3,e.searchMembers();case 3:return t.abrupt("return",t.sent);case 4:return n=e.source.id,!e.members.length&&(e.searching=!0),t.prev=6,t.next=9,(0,G.MvM)(Q({groupid:n},e.pagination));case 9:if((r=t.sent).length?(r.forEach((function(t){"manager"===t.role&&(t.role="admin"),t.userid=t.userid||t.id,e.multipleSelect&&!t.checked&&(t.checked=!1),e.multipleSelect&&e.selectAll&&(t.checked=!0)})),(i=e.members).push.apply(i,(0,c.Z)(r))):e.canLoad=!1,e.pagination.offset+=e.pagination.count,t.t0=e.onUpdate,!t.t0){t.next=16;break}return t.next=16,e.onUpdate({members:e.members},"fetchItems");case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(6),(0,x.R5)(t.t1);case 21:return t.prev=21,e.searching=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])})))()},getLinkinfo:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,s,c,l,u,d,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading=!0,t.prev=1,n={},r={need_approve:!1,link_period:0,member_readonly:!1,allow_invite:!1},t.t0=Promise,t.next=7,(0,G.Twg)(e.groupid);case 7:return t.t1=t.sent,t.next=10,(0,G.ZB8)(e.groupid);case 10:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=14,t.t0.all.call(t.t0,t.t3);case 14:i=t.sent,s=(0,a.Z)(i,2),c=s[0],l=void 0===c?{}:c,u=s[1],d=(void 0===u?{}:u).data,p=d.invite_link,r=l,p&&(e.linkKey=p.key,e.linkKeyUrl=e.linkSuffix?d.invite_url+e.linkSuffix:d.invite_url,e.linkKeyTitle=d.title,e.$emit("changeData",{invite_link:p}),e.inviteLink=p),n.linkSetup=r,e.dialogLinkSetup=r,e.initlinkSetup(r),e.showLoading=!1,e.$emit("changeData",{source:Object.assign({},e.source,n)}),t.next=36;break;case 31:t.prev=31,t.t4=t.catch(1),e.showLoading=!1,e.inviteErrorInfo=t.t4,(0,x.R5)(t.t4,!0);case 36:case"end":return t.stop()}}),t,null,[[1,31]])})))()},reverseMemberRole:function(){var e=Object.assign({},this.allowRoles);try{~["admin","manager"].indexOf(this.role)&&delete e.admin}catch(e){console.log(e,e.response)}return Object.keys(e).map((function(t){return{role:t,text:(0,h.t)(e[t])}}))},onVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.dropdownAuth.popperElm&&t.$refs.dropdownAuth.popperElm.focus(),t.$refs.dropdownExpired.popperElm&&t.$refs.dropdownExpired.popperElm.focus()}))}},install:function(e){e.component(ee.name,ee)}},te=ee,ne=n(48970),re=n.n(ne),ie=n(7787),oe=n(7018),ae=n(80174),se={computed:{isDeptTeamCreator:function(){var e;try{e="creator"===this.currentTeam.user_role}catch(e){console.log(e)}return e&&this.isDeptTeam},creatorPermission:function(){var e,t;try{e=this.user.userid,t=this.currentTeam&&this.currentTeam.creator&&this.currentTeam.creator.id}catch(e){console.log(e)}return t===e},isPlusCompany:function(){var e=this.user,t=e.is_plus,n=e.companyid;return t&&n&&!!this.source.corpid},showTransferEntTeam:function(){return this.creatorPermission&&(this.isPlusCompany||this.isGroupTeam)},isDeptTeam:function(){return"corpdep"===this.currentTeam.group_type}},methods:{onConfirm:function(e){1===e.length&&this.changeDialog("KTransferTeamComfirm",{member:e[0],isEntGroup:!!this.corpid,currentTeam:this.currentTeam,onTransfer:this.onTransfer,backToPrev:!0})},transferEntTeam:function(e){var t=this,n=function(e){var n={hideHeader:!0,selectorProps:{sources:[{type:"teamMember",gid:t.currentTeam.id,companyId:t.currentTeam.corpid,role:["creator","admin","manager","member","read_member"]}],_from:"kdocs",_function:0===t.corpid?"changePersonalTeamOnwer":"changeCompTeamOnwer",single:!0,hiddenItems:[{userid:t.user.userid}],onCancel:function(){t.$emit("handleClose")},onConfirm:function(e){var n=e.items;n&&n.length>0&&t.onConfirm(n)}},command:"TRANSFER_TEAM"};setTimeout((function(){e?t.changeDialog("UikitMemberSelector",n):t.replaceDialog("UikitMemberSelector",n)}),10)};!e&&this.pcPrivateShow?this.changeDialog("KSecureInfo",{onSuccessBindPhone:function(){t.onSuccessBindPhone(),n()}}):n(!0)}}},ce=new oe.PlugCtr("kso"),le={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-team-success-link"},[n("div",{staticClass:"k-team-success-link-text"},[n("div",{staticClass:"k-team-success-link-text-title"},[e._v(e._s(e.lang_txt68))]),e._v(" "),n("div",{staticClass:"k-team-success-link-text-desc"},[e._v(e._s(e.lang_txt69))])]),e._v(" "),n("div",{staticClass:"k-team-success-link-content"},[n("div",{staticClass:"k-team-success-link-content-url"},[e._v(e._s(e.linkUrl))]),e._v(" "),n("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.copyText,expression:"copyText"}],staticClass:"k-team-success-link-content-copy",on:{success:e.handleCopySuccess,error:e.handleCopyError}},[e._v("\n      "+e._s(e.lang_txt48)+"\n    ")])])])},staticRenderFns:[],name:"KShareLink",directives:{clipboard:j.B},props:{url:{type:String,required:!0},copyText:{type:String,default:""},onDwEvent:{type:Function,default:function(){}}},data:function(){return{lang_txt68:(0,h.t)("logic.EntFolderShareMain.txt68"),lang_txt69:(0,h.t)("logic.EntFolderShareMain.txt69"),lang_txt48:(0,h.t)("logic.EntFolderShareMain.txt48")}},computed:{linkUrl:function(){return this.url}},methods:{disableLinkKeyboard:function(e){e.preventDefault()},handleCopySuccess:function(){this.onDwEvent({operate:"copy"}),this.isIE?window.clipboardData.setData("text",this.copyText)?R.Z.success((0,h.t)("logic.EntFolderShareMain.txt39")):R.Z.error((0,h.t)("logic.EntFolderShareMain.txt40")):R.Z.success((0,h.t)("logic.EntFolderShareMain.txt39"))},handleCopyError:function(){this.onDwEvent({operate:"copy"});var e=this.userAgent.isMac?"Command":"ctrl";prompt("".concat((0,h.t)("logic.EntFolderShareMain.txt41")," ").concat(e," + c ").concat((0,h.t)("logic.EntFolderShareMain.txt42")),this.copyText)}}};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe,he=(0,Z.Z)(),me="".concat((0,U.getCDN)(),"/kdocs/kso_ui/common/default_avatar.png"),fe=l.Z.CancelToken,ge={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"k-folder-share-main",class:{"k-folder-share-main-new":e.isShareFolder},attrs:{tabindex:"0"}},[e.showLoading?n("KLoading"):[e.isCreateTeamProcess?[n("KShareLink",{attrs:{url:e.linkKeyUrl,copyText:e.inviteCopyText,onDwEvent:e.createTeamProcessDwEvent,createGroupSort:e.createGroupSort,groupSecondSort:e.groupSecondSort}}),e._v(" "),n("div",{staticClass:"k-folder-share-main-search"},[n("div",{staticClass:"k-folder-share-main-search-title"},[e._v(e._s(e.lang_txt66))]),e._v(" "),e.user.is_plus&&e.isGroupTeam?n("KInputSearch",{attrs:{placeholder:e.lang_txt19,onClear:e.onClear,keepFocus:e.keepFocus,onInput:e.searchMembers,maxlength:30}}):e._e(),e._v(" "),n("div",{staticClass:"k-folder-share-main-search-add",on:{click:e.onAddFromCompantContact}},[e._v(e._s(e.lang_txt67))])],1)]:e.user.is_plus&&e.showAddMember?n("div",{class:["k-folder-share-add",(e.isGroupTeam||e.isShareFolder&&!e.isSa)&&"k-folder-share-add-border"]},[n("div",{staticClass:"link-add-members"},[n("span",{staticClass:"link-add-title link-box-title",attrs:{tabindex:"0"}},[e._v(e._s(e.lang_txt0))]),e._v(" "),!e.isGroupTeam&&(e.isSa||e.source.linkSetup&&e.source.linkSetup.allow_invite&&!e.isDialog||e.isDialog&&e.dialogLinkSetup&&e.dialogLinkSetup.allow_invite)?[n("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.inviteCopyText,expression:"inviteCopyText"}],on:{success:function(t){return e.handleCopySuccess(e.linkKeyUrl,"wechat")},error:function(t){return e.handleCopyError()},click:function(t){return e.dwEvent("copylink")}}},[n("KIcon",{staticClass:"copy-link copy-link-wechat",attrs:{type:"wechat2"}})],1),e._v(" "),n("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.inviteCopyText,expression:"inviteCopyText"}],on:{success:function(t){return e.handleCopySuccess(e.linkKeyUrl,"qq")},error:function(t){return e.handleCopyError()},click:function(t){return e.dwEvent("copylink")}}},[n("KIcon",{staticClass:"copy-link copy-link-qq",attrs:{type:"qq2"}})],1)]:e._e(),e._v(" "),e.isSa?n("div",{class:["link-setup",!e.isGroupTeam&&"link-setup-right"]},[e.source.folderid||e.currentTeam&&e.currentTeam.fileid?n("el-popover",{attrs:{placement:"bottom-end",visibleArrow:!1,trigger:"click"}},[n("div",{staticClass:"k-share-link-need-approve"},[n("span",[e._v(e._s(e.lang_txt47))]),e._v(" "),n("el-switch",e._b({attrs:{onText:"",offText:"",tabindex:"0"},on:{change:e.onChangeNeedVerify},model:{value:e.need_approve,callback:function(t){e.need_approve=t},expression:"need_approve"}},"el-switch",e.elSwitchStyle,!1))],1),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(e.lang_txt1))])],1):n("span",{on:{click:e.onSetup}},[e._v(e._s(e.lang_txt1))])],1):e._e()],2),e._v(" "),e.isSa||e.source.linkSetup&&e.source.linkSetup.allow_invite&&!e.isDialog||e.isDialog&&e.dialogLinkSetup&&e.dialogLinkSetup.allow_invite?[e.isGroupTeam||e.isGroup?[n("el-popover",{ref:"QRCodePopover",attrs:{placement:"bottom",trigger:"hover",openDelay:50,visibleArrow:!1},on:{show:function(t){return e.dwEvent("show_qrcode")}}},[n("div",[n("KBarcode",{attrs:{linkTitle:this.currentTeam.name||this.currentTeam.fname||"团队名称",link:this.linkKeyUrl,linkIcon:e.getQRCodeInfo,description:e.lang_QRCode_scan,downloadQRCodeVisible:this.downloadQRCodeVisible,onDwEvent:e.dwEvent}})],1)]),e._v(" "),void 0,e._v(" "),n("div",{staticClass:"share-team-tip"},[e._v(e._s(e.lang_txt70))]),e._v(" "),n("div",{staticClass:"share-team"},[n("div",{staticClass:"share-team__link"},[n("span",{staticClass:"share-team__link__url"},[n("div",{staticClass:"share-team__link__url__text"},[e._v(e._s(e.linkKeyUrl))])]),e._v(" "),e.ecisItemVisible({key:"inviteLink"})&&e.ecisItemVisible({key:"barcode"})&&e.isEntFolderShareMainInviteLink&&!e.ua.isIE?n("KIcon",{directives:[{name:"popover",rawName:"v-popover:QRCodePopover",arg:"QRCodePopover"}],attrs:{type:"qr-code"}}):e._e()],1),e._v(" "),n("KButton",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.inviteCopyText,expression:"inviteCopyText"}],staticClass:"share-team__copy-btn",attrs:{type:"primary"},on:{success:function(t){return e.handleCopySuccess(e.linkKeyUrl)},error:function(t){return e.handleCopyError()},click:e.onClickCopy}},[e._v(e._s(e.lang_txt48))])],1),e._v(" "),e.ecisItemVisible({key:"compantContact"})?n("div",{staticClass:"link-add-item",on:{click:e.onAddFromCompantContact}},[n("KIcon",{staticClass:"link-add-item-icon",attrs:{type:"team-members"}}),e._v(" "),n("span",{staticClass:"link-add-item-txt"},[e._v(e._s(e.user.is_plus?e.lang_txt7:e.lang_txt8))])],1):e._e(),e._v(" "),n(e.ecisPluginRowExtRender(),{tag:"component",attrs:{ftype:e.ftype,info:e.source}})]:n("div",{staticClass:"k-folder-share-copy-invite-link"},[n("div",{staticClass:"k-folder-share-invite-link-box"},[n("div",{staticClass:"k-folder-share-link-auth"},[n("KDropdown",{ref:"dropdown",attrs:{trigger:"click",placement:"bottom-start",menuClass:"transfer-dropdown-menu",selectable:"",useNewLayout:e.useNewLayout},on:{command:e.handleChangeLinkAuth,"visible-change":e.onVisibleChange}},[n("span",[e._v("\n                  "+e._s(e.linkAuth.text)+"\n                  "),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("template",{slot:"menus"},e._l(e.inviteLinkAuthList,(function(t){return n("KDropdownItem",{key:t.command,class:{"cancel-share-btn":"cancel"===t.command},attrs:{useNewLayout:e.useNewLayout,checked:t.command===e.linkAuth.command,command:t.command}},[e._v(e._s(t.text))])})),1)],2)],1),e._v(" "),n("div",{staticClass:"k-folder-share-invite-link"},[n("span",{staticClass:"link"},[e._v(e._s(e.linkKeyUrl))]),e._v(" "),n("KDropdown",{ref:"dropdownExpired",attrs:{trigger:"click",placement:"bottom-start",menuAlign:"start",selectable:"",menuClass:"transfer-dropdown-menu",useNewLayout:e.useNewLayout},on:{command:e.handleLinkExpires,"visible-change":e.onVisibleChange}},[n("span",[e._v("\n                  "+e._s(e.linkExpires.text)+"\n                  "),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("template",{slot:"menus"},e._l(e.inviteLinkExpires,(function(t){return n("KDropdownItem",{key:t.command,attrs:{useNewLayout:e.useNewLayout,checked:t.command===e.linkExpires.command,command:t.command}},[e._v(e._s(t.text))])})),1)],2)],1)]),e._v(" "),n("KButton",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.inviteCopyText,expression:"inviteCopyText"}],staticClass:"link-btn",attrs:{type:"normal"},on:{success:function(t){return e.handleCopySuccess(e.linkKeyUrl)},error:function(t){return e.handleCopyError()},click:function(t){return e.dwEvent("copylink")}}},[e._v(e._s(e.lang_txt48))])],1)]:e.isTeam?n("div",[n("span",{staticClass:"link-box-text",attrs:{tabindex:"0"}},[e._v(e._s(e.lang_txt9))])]):e._e()],2):e._e(),e._v(" "),n("div",{staticClass:"k-folder-share-member",class:{"multiple-select-list":e.multipleSelect,"is-select-item":e.selectedMembers.length>0,"k-folder-share-member-mt":e.isGroupTeam||e.isShareFolder&&!e.isSa,"k-full-share-member-list":!e.showAddMember}},[!e.user.is_plus&&e.isSa||e.user.is_plus?n("KShareWithContactsEntry",{attrs:{onClick:e.onAddFromCompantContact,description:e.user.is_plus?e.lang_txt10:e.lang_txt11}},[e.user.is_plus&&e.selectedMembers.length<=0?n("div",{staticClass:"k-contact-user-box",class:{multipleSelect:e.multipleSelect},attrs:{slot:"title",tabindex:"0"},slot:"title"},[e.multipleSelect&&!e.keyword?n("div",{staticClass:"k-memberItem-box select-all-checkbox",on:{click:function(t){return t.stopPropagation(),e.handleSelectAll(t)}}},[n("KMCheckbox",{staticClass:"k-memberItem-checkbox",attrs:{checked:e.selectAll,disabled:e.disabledSelectNumber===e.allMembersCount}})],1):e._e(),e._v(" "),e.keyword?n("span",[e._v(e._s(e.lang_txt61))]):n("span",[e._v(e._s(e.lang_txt12+"("+e.allMembersCount+")"))]),e._v(" "),e.isSa&&!e.multipleSelect?n("span",{staticClass:"link-add-user",on:{click:e.onAddFromCompantContact}},[e._v(e._s(e.lang_txt49))]):e._e()]):e.multipleSelect?n("div",{staticClass:"titie-batch-dropdown",attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"select-all-count"},[n("div",{staticClass:"select-all-count-wrap"},[e.keyword?e._e():n("div",{staticClass:"k-memberItem-box",on:{click:function(t){return t.stopPropagation(),e.handleSelectAll(t)}}},[n("KMCheckbox",{staticClass:"k-memberItem-checkbox",attrs:{checked:e.selectAll}})],1),e._v(" "),e.selectableMaxNumber===e.selectedMembers.length?n("span",[e._v(e._s(e.lang_txt13)+"("+e._s(e.selectAll?e.selectAllNumber:e.selectedMembers.length)+")")]):n("span",[e._v("\n                "+e._s(e.lang_txt13)+"("+e._s(e.selectAll?e.selectAllHasCancel:e.selectedMembers.length)+")\n              ")])])]),e._v(" "),e.selectedMembers.length>0?n("div",{staticClass:"select-all-actions"},[n("KDropdown",{attrs:{trigger:"click",placement:"bottom-start",menuAlign:"start",menuClass:"transfer-dropdown-menu admin-transfer",useNewLayout:e.useNewLayout},on:{command:e.changeCommandByMulSelect}},[n("span",[n("i",{staticClass:"select-all-actions-title"},[e._v(e._s(e.lang_txt14))]),e._v(" "),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("template",{slot:"menus"},["creator"===e.role?n("KDropdownItem",{attrs:{command:"admin",useNewLayout:e.useNewLayout}},[e._v(e._s(e.lang_txt15))]):e._e(),e._v(" "),n("KDropdownItem",{attrs:{command:"member",useNewLayout:e.useNewLayout}},[e._v(e._s(e.lang_txt16))]),e._v(" "),n("KDropdownItem",{staticClass:"file-actions-dropdown-remove",attrs:{divided:"",command:"delete",useNewLayout:e.useNewLayout}},[e._v(e._s(e.lang_txt18))])],1)],2)],1):e._e()]):e._e(),e._v(" "),!e.isCreateTeamProcess&&e.user.is_plus&&e.isGroupTeam?n("KInputSearch",{attrs:{placeholder:e.lang_txt19,onClear:e.onClear,keepFocus:e.keepFocus,onInput:e.searchMembers,maxlength:30}}):e._e()],1):e._e(),e._v(" "),n("div",{class:{"share-company-members":!e.user.is_plus,"share-personal-members":e.user.is_plus,"no-addr":!e.addr}},[e.allMembers.length<=0||e.searching?n("div",{staticClass:"notfound"},[e.searching?n("KLoading"):n("p",[e._v(e._s(e.lang_txt20))])],1):n("KScroll",{ref:"scroll",attrs:{onLoad:e.fetchItems,onScroll:e.onScroll,canLoad:e.canLoad,loading:e.searching,showLoading:!1}},e._l(e.allMembers,(function(t){return n("KMemberItem",{key:t.id,attrs:{uid:e.user.userid,userid:t.id,cid:e.source.corpid,name:e.getName(t),originName:t.name,avatar:t.avatar,hover:!!e.multipleSelect,hName:t.highlight&&t.highlight.name&&t.highlight.name[0],showInfoByAvatar:e.isGroupTeam,toSendInvitation:function(){return e.toSendInvitation(t)},onCardEvent:e.onCard,toDeleteContact:e.toDeleteContact,hideActions:!0,showInfo:"pcoffice"!==e.showType,multipleSelect:e.multipleSelect,checked:t.checked,disabled:e.getDisabledMember(t),isSearch:1===t.isSearch,onItemClick:e.multipleSelect&&!e.keyword?function(){return e.handleItemClick(t)}:function(){},onItemCanClick:!!e.multipleSelect,pcPrivateShow:e.pcPrivateShow,relation:t.relation}},[n("div",{staticClass:"member-item-suffix",attrs:{slot:"member-suffix"},on:{click:function(e){e.stopPropagation()}},slot:"member-suffix"},["creator"===(t.new_role||t.role)&&e.showTransfer?n("KDropdown",{staticClass:"transfer-dropdown",attrs:{trigger:"click",menuAlign:"start",menuClass:"transfer-dropdown-menu",placement:"bottom-end",useNewLayout:e.useNewLayout},on:{command:e.onTransferTeam}},[n("span",[e._v("\n                  "+e._s(e.lang_txt21)+"\n                  "),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("template",{slot:"menus"},[n("KDropdownItem",{attrs:{disabled:"",useNewLayout:e.useNewLayout,icon:"tip-blue",menuItemClass:"transfer-tip"}},[e._v(e._s(e.showTransferFolder?e.lang_txt22:e.lang_txt23))]),e._v(" "),n("KDropdownItem",{attrs:{divided:!0,command:"transfer",useNewLayout:e.useNewLayout,menuItemClass:"transfer-team"}},[e._v(e._s(e.showTransferFolder?e.lang_txt24:e.lang_txt25))])],1)],2):"creator"!==(t.new_role||t.role)||e.showTransfer?e.hideDropDown(t)?n("span",[e._v(e._s(e.memberRoleTextMapping[t.new_role||t.role].text))]):n("KDropdown",{ref:"dropdown",refInFor:!0,attrs:{trigger:"click",menuAlign:"start",menuClass:"transfer-dropdown-menu",placement:"bottom-end",selectable:"",useNewLayout:e.useNewLayout},on:{command:function(n){return e.onMemberRoleChange(t,n)}}},[n("span",[e._v("\n                  "+e._s(e.memberRoleTextMapping[t.new_role||t.role].text)+"\n                  "),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("template",{slot:"menus"},[e._l(e.reverseMemberRole(),(function(r){return n("KDropdownItem",{key:r.role,attrs:{useNewLayout:e.useNewLayout,checked:r.role===(t.new_role||t.role),command:r.role}},[n("div",{staticClass:"drop-text",class:{check:r.role===(t.new_role||t.role)}},[e._v(e._s(r.text))]),e._v(" "),n("div",{staticClass:"drop-subtext",attrs:{title:r.subText}},[e._v(e._s(r.subText))])])})),e._v(" "),n("KDropdownItem",{staticClass:"drop-text delete",attrs:{divided:"",command:"delete",useNewLayout:e.useNewLayout}},[e._v(e._s(e.lang_txt27))])],2)],2):n("span",[e._v(e._s(e.lang_txt26))])],1)])})),1)],1)],1),e._v(" "),e.isGroupTeam?e._e():n("div",{staticClass:"k-folder-share-search"},[n("KInputSearch",{attrs:{placeholder:e.lang_txt60,onClear:e.onClear,onInput:e.searchMembers,maxlength:30},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMembers(t)}}})],1)]],2)},staticRenderFns:[],name:"KEntFolderShareMain",components:{KIcon:p.default,KInputSearch:g.Z,KShareWithContactsEntry:f,KLoading:v.Z,KScroll:_.Z,KMemberItem:k.Z,KMCheckbox:d.Z,ElDropdown:C(),ElDropdownMenu:F(),ElDropdownItem:P(),KButton:u.Z,ElSwitch:re(),ElPopover:w(),KDropdown:L,KDropdownItem:A,KSwitch:B.Z,KShareLink:le,KBarcode:ae.Z},directives:{clipboard:j.B,focus:function(e){e.focus()}},mixins:[se,ie.Z],props:{user:{type:Object},changeFtype:{type:String},ftype:{type:String},showType:{type:String},source:{type:Object,default:function(){return{}},required:!0},position:String,changeDialog:{type:Function,default:function(){}},replaceDialog:{type:Function,default:function(){}},updateTeam:{type:Function,default:function(){}},route:{type:Object},currentTeam:{type:Object,default:function(){return{}}},onUpdate:{type:Function,default:function(){}},onTransfer:{type:Function,default:function(){}},onSuccessBindPhone:{type:Function,default:function(){}},isGroup:{type:Boolean},isEntManager:{type:Boolean,default:!1},linkSuffix:{type:String,default:""},onCancelShare:{type:Function,default:function(){}},pcPrivateShow:{type:Boolean,default:!0},onUpdateTeamFolderSetting:{type:Function,default:function(){}},onKdocsDwEvent:{type:Function,default:function(){}},useNewSelector:{type:Boolean,default:!1},isCreateTeamProcess:{type:Boolean,default:!1},createGroupSort:{type:String,default:""},groupSecondSort:{type:String,default:""},downloadQRCodeVisible:{type:Boolean,default:!0},callerSceneGroup:{type:String,default:""}},data:function(){return{lang_txt0:(0,h.t)("logic.EntFolderShareMain.txt0"),lang_txt1:(0,h.t)("logic.EntFolderShareMain.txt1"),lang_txt7:(0,h.t)("logic.EntFolderShareMain.txt7"),lang_txt8:(0,h.t)("logic.EntFolderShareMain.txt8"),lang_txt9:(0,h.t)("logic.EntFolderShareMain.txt9"),lang_txt10:(0,h.t)("logic.EntFolderShareMain.txt10"),lang_txt11:(0,h.t)("logic.EntFolderShareMain.txt11"),lang_txt12:(0,h.t)("logic.EntFolderShareMain.txt12"),lang_txt13:(0,h.t)("logic.EntFolderShareMain.txt13"),lang_txt14:(0,h.t)("logic.EntFolderShareMain.txt14"),lang_txt15:(0,h.t)("logic.EntFolderShareMain.txt15"),lang_txt16:(0,h.t)("logic.EntFolderShareMain.txt16"),lang_txt18:(0,h.t)("logic.EntFolderShareMain.txt18"),lang_txt19:(0,h.t)("logic.EntFolderShareMain.txt19"),lang_txt20:(0,h.t)("logic.EntFolderShareMain.txt20"),lang_txt21:(0,h.t)("logic.EntFolderShareMain.txt21"),lang_txt22:(0,h.t)("logic.EntFolderShareMain.txt22"),lang_txt23:(0,h.t)("logic.EntFolderShareMain.txt23"),lang_txt24:(0,h.t)("logic.EntFolderShareMain.txt24"),lang_txt25:(0,h.t)("logic.EntFolderShareMain.txt25"),lang_txt26:(0,h.t)("logic.EntFolderShareMain.txt26"),lang_txt27:(0,h.t)("logic.EntFolderShareMain.txt27"),lang_txt47:(0,h.t)("logic.EntFolderShareMain.txt47"),lang_txt48:(0,h.t)("logic.EntFolderShareMain.txt48"),lang_txt49:(0,h.t)("logic.EntFolderShareMain.txt49"),lang_txt60:(0,h.t)("logic.EntFolderShareMain.txt60"),lang_txt61:(0,h.t)("logic.EntFolderShareMain.txt61"),lang_txt65:(0,h.t)("logic.EntFolderShareMain.txt65"),lang_txt66:(0,h.t)("logic.EntFolderShareMain.txt66"),lang_txt67:(0,h.t)("logic.EntFolderShareMain.txt67"),lang_txt70:(0,h.t)("logic.EntFolderShareMain.txt70"),lang_QRCode_scan:(0,h.t)("logic.EntFolderShareMain.qrcode_scan"),keepFocus:!0,addr:"",total:0,members:[],invitedMembers:[],keyword:"",searching:!0,pagination:{count:20,offset:0},linkKey:"",linkKeyUrl:"",canLoad:!0,selectAll:!1,maxSelectNumber:4e3,inviteErrorInfo:null,dialogLinkSetup:{need_approve:!1,link_period:0,allow_invite:!1,admin_file_perm:!0},inviteLinkAuthList:[{text:(0,h.t)("logic.EntFolderShareMain.txt50"),command:"read"},{text:(0,h.t)("logic.EntFolderShareMain.txt51"),command:"edit"},{text:(0,h.t)("logic.EntFolderShareMain.txt52"),command:"cancel"}],linkAuth:{text:(0,h.t)("logic.EntFolderShareMain.txt51"),command:"edit"},inviteLinkExpires:[{command:"threeDay",text:(0,h.t)("logic.EntFolderShareMain.txt53")},{command:"forever",text:(0,h.t)("logic.EntFolderShareMain.txt54")}],linkExpires:{command:"forever",text:(0,h.t)("logic.EntFolderShareMain.txt54")},need_approve:!1,elSwitchStyle:{width:32,"active-color":"#417FF9","inactive-color":"#E6E6E6"},showNeedVerifyBox:!1,showLoading:!1,showShare:!0,ua:{},deptSelectable:!1,moreLoading:!1}},computed:{isEntFolderShareMainInviteLink:function(){return!this.$__SHIELD_CONFIG__||this.$__SHIELD_CONFIG__.UIEntFolderShareMainInviteLink},role:function(){return this.source.user_role},isDialog:function(){return"dialog"===this.showType},isTeam:function(){return"normal"===this.source.type||"corpnormal"===this.source.type||"corpspecial"===this.source.type},groupId:function(){return this.source.id||this.source.groupid},isSa:function(){return["creator","admin"].indexOf(this.role)>-1},isAdmin:function(){return["admin"].indexOf(this.role)>-1},isGroupTeam:function(){return!!this.source.corpid||this.isGroup},corpid:function(){return this.source.corpid},inviteCopyText:function(){return"".concat(this.linkKeyUrl,"\n").concat(this.linkKeyTitle)},allMembersCount:function(){return this.source.member_count||1},allowRoles:function(){return{admin:(0,h.t)("logic.EntFolderShareMain.txt28"),member:(0,h.t)("logic.EntFolderShareMain.txt29"),read_member:(0,h.t)("logic.EntFolderShareMain.txt30")}},isShareFolder:function(){return this.source.folderid||this.currentTeam&&this.currentTeam.fileid},showTransferFolder:function(){return this.isShareFolder&&"creator"===this.role&&this.isDialog},showTransfer:function(){return(this.showTransferFolder||this.showTransferEntTeam)&&"pcoffice"!==this.showType},selectedMembers:function(){var e=this;return this.allMembers.filter((function(t){return e.isSa&&"creator"===t.new_role?t.checked&&"creator"!==t.new_role:e.isAdmin&&"admin"===t.new_role?t.checked&&"admin"!==t.new_role:!0===t.checked}))},allMembers:function(){return this.members.concat(this.invitedMembers).filter((function(e){return e.status}))},multipleSelect:function(){return this.isSa&&this.source&&this.isGroupTeam},selectAllNumber:function(){var e=this,t=0;return this.allMembers.forEach((function(n){"creator"===n.new_role&&"creator"===e.role?t+=1:"admin"!==n.new_role&&"creator"!==n.new_role||"admin"!==e.role||(t+=1)})),this.allMembersCount-t},selectAllHasCancel:function(){var e=0;return this.allMembers.forEach((function(t){t.checked||(e+=1)})),this.allMembersCount-this.disabledSelectNumber-e},disabledSelectNumber:function(){var e=this,t=0;return this.allMembers.forEach((function(n){"creator"===n.new_role&&"creator"===e.role?t+=1:"admin"!==n.new_role&&"creator"!==n.new_role||"admin"!==e.role||(t+=1)})),t},selectableMaxNumber:function(){var e=this,t=0;return this.allMembers.forEach((function(n){("creator"!==n.new_role&&"creator"===e.role||"creator"!==n.new_role&&"admin"!==n.new_role&&"admin"===e.role)&&(t+=1)})),t},memberRoleTextMapping:function(){return{admin:{text:(0,h.t)("logic.EntFolderShareMain.txt28"),subText:this.dialogLinkSetup.admin_file_perm?(0,h.t)("logic.EntFolderShareMain.txt31"):(0,h.t)("logic.EntFolderShareMain.txt63")},member:{text:(0,h.t)("logic.EntFolderShareMain.txt29"),subText:(0,h.t)("logic.EntFolderShareMain.txt32")}}},showAddMember:function(){return!!this.source.corpid||this.showShare},isSecureGroup:function(){return this.currentTeam.secure}},watch:{selectAll:function(e){e?this.allMembers.map((function(e){return e.checked=!0})):this.allMembers.map((function(e){return e.checked=!1}))}},created:function(){var e=this;return(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetchItems(),e.getTeamConfig(),e.$emit("componentLoadChange",!0),t.next=5,e.getLinkInfo();case 5:return t.next=7,e.getInviteMembers();case 7:e.$emit("componentLoadChange",!1);case 8:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;this.dwEvent("pageview"),this.kdocsDwEvent({action:"show"});var t={userinfo:this.user,callbackSuccess:this.onSendInvitationClick,callbackCancel:this.onCancelInvitationClick,doNotShowFeedback:!0,onLoad:this.onContactInvitationPanelLoad};!this.isSa&&this.isTeam&&this.$emit("setDlgSize","FolderShareMainForCommonMember"),this.ua=(0,U.getUA)(navigator.userAgent),he.mount(this,t),window.__CONFIG__&&window.__CONFIG__.SWITCH&&!1===window.__CONFIG__.SWITCH.share&&(this.showShare=!1),setTimeout((function(){return e.createTeamProcessDwEvent({operate:"show"})}),1e3)},methods:{ecisItemVisible:function(e){return ce.ask("TeamMemberModal.menu.filter",{extra:{ftype:this.ftype,info:this.source},data:[e]},[e]).length>0},ecisPluginRowExtRender:function(){return ce.ask("TeamMemberModal.menu.expand",{},null)},onSelectStaffByDept:function(e){return!!e.length||(R.Z.error((0,h.t)("logic.DialogFolderShare.noMemberToSelect")),!1)},onClickCopy:function(){},initLinkSetup:function(e){this.linkExpires=e.link_period>0?this.inviteLinkExpires[0]:this.inviteLinkExpires[1],this.linkAuth=e.member_readonly?this.inviteLinkAuthList[0]:this.inviteLinkAuthList[1],this.need_approve=e.need_approve},onChangeNeedVerify:function(e){var t=this;this.dwEvent(e?"verifyneed_on":"verifyneed_off","groupsetting"),setTimeout((function(){t.changeShareLink()}),100)},handleLinkExpires:function(e){var t=this;this.inviteLinkExpires.forEach((function(n){n.command===e&&(t.linkExpires=n)}));var n="forever"===this.linkExpires.command?"0":"3";this.dwEvent("linkperiod_"+n,"groupsetting"),this.changeShareLink()},handleChangeLinkAuth:function(e){var t=this;"cancel"!==e?(this.inviteLinkAuthList.forEach((function(n){n.command===e&&(t.linkAuth=n)})),this.changeShareLink()):this.isDialog?this.changeDialog("KFolderShareCancel",{source:this.source,showType:this.showType,onCancelShare:this.onCancelShare,backtoPrevIcon:!1}):this.$emit("change","FolderShareCancel",{source:this.source})},changeShareLink:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.need_approve,r="forever"===e.linkExpires.command?0:259200,i=e.dialogLinkSetup.member_readonly,t.next=6,(0,G.U47)(e.source.id,{need_approve:n,link_period:r,member_readonly:i,allow_invite:!1});case 6:"ok"===(a=t.sent).result?R.Z.success((0,h.t)("logic.EntFolderShareMain.txt55")):R.Z.error(a.result),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,x.R5)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},dwEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"groupprofile";this.$emit("onDwEvent",{type:t,action:e})},kdocsDwEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"team_membermanagement";try{e=Object.assign(e,{companyid:this.corpid,groupid:this.groupId,source:this.callerSceneGroup||""}),this.onKdocsDwEvent(t,e)}catch(e){}},createTeamProcessDwEvent:function(){},handleItemClick:function(e){var t=this;if(this.$nextTick((function(){t.selectedMembers.length===t.selectableMaxNumber&&(t.selectAll=!0),0===t.selectedMembers.length&&(t.selectAll=!1)})),this.selectedMembers.length+1>this.maxSelectNumber&&!e.checked)return R.Z.warning((0,h.t)("logic.EntFolderShareMain.txt44"));e.checked=!e.checked},handleSelectAll:function(){this.selectAll=!this.selectAll},changeCommandByMulSelect:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var i,a,s,c,l,u,d,p,m,f,g;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i="","delete"===e?i="member_remove":"member"===e?i="member_member":"admin"===e&&(i="member_admin"),t.kdocsDwEvent({action:i,ifbatch:!0}),a=[],s=[],c=t.selectAll,l=!1,t.allMembers.forEach((function(e){e.checked||(l=!0)})),(u=c&&l)&&(s=(s=t.getCancelIds()).filter((function(e){return e}))),a=t.selectedMembers.map((function(e){return e.id})),d=u?t.getDiff(a,s):a,!((p=c?t.selectAllHasCancel:d.length)>t.maxSelectNumber&&"delete"!==e)){n.next=15;break}return n.abrupt("return",R.Z.warning((0,h.t)("logic.EntFolderShareMain.txt44")));case 15:if(!((p<=50||t.$__SHIELD_CONFIG__&&!t.$__SHIELD_CONFIG__.checkUserBatchDeleteMemberPerm)&&"delete"===e||"delete"!==e)){n.next=20;break}return n.next=18,t.handleBatchAction(e,c,d,a,s);case 18:n.next=30;break;case 20:if(!(p>50&&p<=100&&"delete"===e)){n.next=29;break}return n.next=23,(0,G.yYX)();case 23:m=n.sent,f=m&&m.phone&&m.phone.value,g=function(n,r){var i={onOk:function(){t.$parent.$emit("close"),t.handleBatchAction(e,c,d,a,s)},cancel:function(){return t.$parent.$emit("close")},phone:r};n?t.changeDialog("KSecurePhoneCheck",i):t.replaceDialog("KSecurePhoneCheck",i)},!f&&t.pcPrivateShow?t.changeDialog("KSecureInfo",{onSuccessBindPhone:function(){var e=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.yYX)();case 2:t=e.sent,n=t&&t.phone&&t.phone.value,g(!1,n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}):g(!0),n.next=30;break;case 29:"delete"===e&&p>100&&R.Z.warning((0,h.t)("logic.EntFolderShareMain.txt62"));case 30:case"end":return n.stop()}}),n)})))()},handleBatchAction:function(e,t,n,i,a){var s=this;return(0,r.Z)(o().mark((function c(){var l,u,d,p,m,f;return o().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,"delete"!==e){c.next=6;break}l={groupid:s.groupId,selected:n,memberids:i,cancelids:a,all:t,selectMember:s.selectAllHasCancel},s.isDialog?(l.successCallback=function(){var e=(0,r.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===t.failList.length?R.Z.success((0,h.t)("logic.EntFolderShareMain.txt34")):(r=t.failList.map((function(e){return e.userid})),n=s.getDiff(n,r),R.Z.error("".concat(t.failList.length).concat((0,h.t)("logic.EntFolderShareMain.txt45")))),s.selectAll=!1,s.members=s.members.filter((function(e){return!n.includes(e.id)})),e.next=5,s.onUpdate({id:s.groupId,members:s.members},"role");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.updateTeam=s.updateTeam,s.changeDialog("KFolderShareDelete",l)):s.$emit("change","FolderShareDelete",l),c.next=23;break;case 6:if("admin"!==e){c.next=11;break}if(!s.selectedMembers.find((function(e){return!!e.relation}))){c.next=11;break}return s.$message.error((0,h.t)("logic.EntFolderShareMain.txt71")),c.abrupt("return");case 11:if(u={all:t,role:e,new_role:e,memberids:i,cancelids:a},d=n.length,t&&(delete u.memberids,d=s.selectAllHasCancel),!(d>s.maxSelectNumber)){c.next=16;break}return c.abrupt("return",R.Z.warning((0,h.t)("logic.EntFolderShareMain.txt44")));case 16:return c.next=18,(0,G.wmG)(s.groupId,u);case 18:p=c.sent,0!==(m=p.data).failList.length?(f=m.failList.map((function(e){return e.userid})),n=s.getDiff(n,f),R.Z.error("".concat(m.failList.length).concat((0,h.t)("logic.EntFolderShareMain.txt46")))):R.Z.success((0,h.t)("logic.EntFolderShareMain.txt37")),s.selectAll=!1,s.members=s.members.map((function(t){return t.checked=!1,n.includes(t.id)?Object.assign(t,{role:e,new_role:e}):t}));case 23:c.next=28;break;case 25:c.prev=25,c.t0=c.catch(0),(0,x.R5)(c.t0);case 28:case"end":return c.stop()}}),c,null,[[0,25]])})))()},getDiff:function(e,t){var n=new Set(e),r=new Set(t),i=new Set((0,c.Z)(n).filter((function(e){return!r.has(e)})));return Array.from(i)},getCancelIds:function(){var e=this.role;return this.allMembers.map((function(t){return("creator"!==e||"creator"===t.new_role||t.checked)&&("admin"!==e||"creator"===t.new_role||"admin"===t.new_role||t.checked)?void 0:t.id}))},onMemberRoleChange:function(e,t){var n=this;return(0,r.Z)(o().mark((function r(){var i,a,s,c,l;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.new_role!==t){r.next=2;break}return r.abrupt("return");case 2:if("admin"!==t||!e.relation){r.next=5;break}return n.$message.error((0,h.t)("logic.EntFolderShareMain.txt71")),r.abrupt("return");case 5:if(i="","delete"===t?i="member_remove":"member"===t?i="member_member":"admin"===t&&(i="member_admin"),n.kdocsDwEvent({action:i,ifbatch:!1}),r.prev=8,"delete"!==t){r.next=24;break}return r.next=12,(0,G.ZTY)({groupid:n.groupId,id:e.id,status:e.status});case 12:if(a=function(t){return t.id!==e.id},e.status?n.members=n.members.filter(a):n.invitedMembers=n.invitedMembers.filter(a),!n.isDialog){r.next=20;break}return n.updateTeam(),r.next=18,n.onUpdate({id:n.groupId,members:n.members},"role");case 18:r.next=22;break;case 20:n.dwEvent("joined_member_delete"),n.$emit("updateTeam");case 22:r.next=32;break;case 24:return s=Object.assign({},e,{role:t,new_role:t}),r.next=27,(0,G.S39)(s,e.id,n.groupId);case 27:n.members=n.members.map((function(e){return e.id===s.id?s:e})),c="admin"===t?"manager":"read",l="member"===t?"write":c,n.dwEvent("joined_member_"+l);case 32:r.next=37;break;case 34:r.prev=34,r.t0=r.catch(8),(0,x.R5)(r.t0);case 37:case"end":return r.stop()}}),r,null,[[8,34]])})))()},toTransferMenmbers:function(){var e=this;this.changeDialog("UikitMemberSelector",{hideHeader:!0,selectorProps:{sources:[{type:"teamMember",gid:this.currentTeam.id}],_from:"kdocs",_function:this.corpid?"changeCompTeamOnwer":"changePersonalTeamOnwer",single:!0,hiddenItems:[{userid:this.user.userid}],onCancel:function(){e.$emit("close")},onConfirm:function(t){var n=t.items;n&&n.length>0&&e.toTransferComfirm(n[0])}}})},toTransferComfirm:function(e){var t,n=this,i=e.name,a=e.userid;this.changeDialog("KTransferComfirm",{fname:this.source.name,newOwner:{userid:a,name:i},okCallBack:(t=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.source.folderid,e.next=4,(0,G.ZoG)(t,a);case 4:"ok"===e.sent.data.result&&(R.Z.success((0,h.t)("logic.EntFolderShareMain.txt56")),setTimeout((function(){n.$emit("handleClose"),n.onTransfer()}),1e3)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),"groupNumLimit"===(e.t0.response&&e.t0.response.data?e.t0.response.data.result:-1)?R.Z.error((0,h.t)("logic.EntFolderShareMain.txt57")):(0,x.R5)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(){return t.apply(this,arguments)})})},onTransferTeam:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.kdocsDwEvent({action:"transfer"}),t.next=3,(0,G.yYX)();case 3:n=t.sent,r=n&&n.phone&&n.phone.value,i=function(){setTimeout((function(){e.replaceDialog("UikitMemberSelector",{hideHeader:!0,selectorProps:{sources:[{type:"teamMember",gid:e.currentTeam.id}],_from:"kdocs",_function:e.corpid?"changeCompTeamOnwer":"changePersonalTeamOnwer",single:!0,hiddenItems:[{userid:e.user.userid}],onCancel:function(){e.$emit("close")},onConfirm:function(t){var n=t.items;n&&n.length>0&&e.toTransferComfirm(n[0])}}})}),10)},e.showTransferFolder?!r&&e.pcPrivateShow?e.changeDialog("KTransferTips",{from:"kdocs-web-transfer",onSuccessBindPhone:function(){e.onSuccessBindPhone(),i()}}):e.toTransferMenmbers():e.transferEntTeam(r);case 7:case"end":return t.stop()}}),t)})))()},onCard:function(e){var t=arguments,n=this;return(0,r.Z)(o().mark((function r(){var i,a,s,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.length<=1?void 0:t[1],a=i.userid,"reMarknameSuccess"!==e){r.next=7;break}return r.next=4,(0,G.snq)({params:{user_ids:a}});case 4:s=r.sent,c=s.name_list,n.allMembers.forEach((function(e){e.id===a&&n.$set(e,"name",c[a])}));case 7:case"end":return r.stop()}}),r)})))()},toDeleteContact:function(){x.F3.closeCurPopover()},getName:function(e){return e.accept_status?e.name+'<span style="color:#949AAE;margin-left:8px;">'+(0,h.t)("logic.EntFolderShareMain.txt38")+"</span>":e.name},getDisabledMember:function(e){return!(!this.isSa||"creator"!==e.new_role)||!(!this.isAdmin||"admin"!==e.new_role)},onClear:function(){pe&&pe(),this.keyword="",this.members=[],this.searching=!0,this.resetData(),this.fetchItems()},resetData:function(){this.pagination.offset=0,this.canLoad=!0,!this.searching&&this.$refs.scroll&&this.$refs.scroll.toTop()},handleCopySuccess:function(e,t){this.isIE?window.clipboardData.setData("text",e)?this.copySuccessMessage(t):R.Z.error((0,h.t)("logic.EntFolderShareMain.txt40")):this.copySuccessMessage(t)},copySuccessMessage:function(e){var t=(0,h.t)("logic.EntFolderShareMain.txt39")+(this.isShareFolder?"，".concat(this.linkAuth.text):"");"wechat"===e?t=(0,h.t)("logic.EntFolderShareMain.txt58"):"qq"===e&&(t=(0,h.t)("logic.EntFolderShareMain.txt59")),R.Z.success(t)},handleCopyError:function(){var e=this.$ua.isMac?"Command":"ctrl";prompt((0,h.t)("logic.EntFolderShareMain.txt41")+" ".concat(e," + c ")+(0,h.t)("logic.EntFolderShareMain.txt42"))},getInviteMembers:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user.is_plus){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,G.e2J)(e.groupId);case 5:if(n=t.sent,r=n.members,i=r.map((function(e){return{id:e,name:"".concat(e)+(0,h.t)("logic.EntFolderShareMain.txt43"),avatar:me,role:"member",checked:!1}})),e.invitedMembers=i,"linkfolder"!==e.ftype&&"linkfolder"!==e.changeFtype){t.next=14;break}return t.next=12,(0,G.SEX)(e.groupId);case 12:(a=t.sent)&&a.data&&a.data.info&&a.data.info[e.groupId]>0&&e.$set(e.source,"folderid",a.data.info[e.groupId]);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),(0,x.R5)(t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,16]])})))()},onScroll:function(){var e=this.$refs.dropdown;e&&e.map((function(e){e.hide()})),x.F3.closeCurPopover()},toSendInvitation:function(e){x.F3.closeCurPopover(),he.show(e)},hideDropDown:function(e){return!this.isSa||e.id===this.user.userid||this.isAdmin&&"admin"===e.new_role},onPhoneLeanClick:function(e){this.changeDialog("KAddRecommendContact",{backprev:!0,defaultPhone:e,isClink:!1,noCorp:!0,user:this.user})},onAddFromCompantContact:function(){this.kdocsDwEvent({action:"invite_contact"}),this.createTeamProcessDwEvent({operate:"add"}),this.isDialog?this.changeDialog(this.useNewSelector?"NewMemberSelector":"KInviteContact",{source:this.source,_from:"kdocs",_function:this.corpid?"addMemberToCompTeam":"addMemberToPersonalTeam",invitedMembers:this.invitedMembers,isEntManager:this.isEntManager,updateTeam:this.updateTeam,showType:this.showType,from:"",onPhoneLeanClick:this.onPhoneLeanClick,inviteLink:this.inviteLink,user:this.user,hideHeader:!0,onOk:this.onOk,changeDialog:this.changeDialog,deptSelectable:this.deptSelectable,onSelectStaffByDept:this.onSelectStaffByDept,fetchItems:this.fetchItems,members:this.members,indexGroupId:this.indexGroupId,groupShareRange:this.groupShareRange,coopContainAssociatedOrg:this.coopContainAssociatedOrg,groupShareReason:this.groupShareReason,cooperateGroupPolicy:this.cooperateGroupPolicy,isSecureGroup:this.isSecureGroup}):(this.dwEvent("invite_contact"),this.$emit("change","InviteContact",{source:this.source,invitedMembers:this.invitedMembers}))},onOk:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,G.MvM)({groupid:e.groupId});case 2:(n=t.sent).length&&(n.forEach((function(t){"manager"===t.new_role&&(t.new_role="admin"),t.userid=t.userid||t.id,e.multipleSelect&&!t.checked&&(t.checked=!1)})),e.pagination.offset+=e.pagination.count,e.members=n),e.updateTeam(n);case 5:case"end":return t.stop()}}),t)})))()},onSetup:function(){var e=this;this.dwEvent("setting"),this.kdocsDwEvent({action:"setting"}),this.isDialog?this.changeDialog("KEntFolderShareSetting",{source:this.source,dialogLinkSetup:this.dialogLinkSetup,showType:this.showType,onChangeSettings:function(t){e.dialogLinkSetup=t,"function"==typeof e.onUpdateTeamFolderSetting&&e.onUpdateTeamFolderSetting(t)},onKdocsDwEvent:this.onKdocsDwEvent}):(this.dwEvent("setting"),this.$emit("change","EntFolderShareSetting",{source:this.source,onChangeSettings:function(t){"function"==typeof e.onUpdateTeamFolderSetting&&e.onUpdateTeamFolderSetting(t)}}))},searchMembers:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var r,i,a,s,u,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.kdocsDwEvent({action:"search"}),r=!1,e&&"string"==typeof e&&(t.resetData(),t.keyword=e),t.keyword){n.next=5;break}return n.abrupt("return");case 5:if(pe&&pe(),n.prev=6,t.members.length&&t.keyword||(t.searching=!0),!t.keyword||"string"!=typeof t.keyword){n.next=21;break}return n.next=11,(0,G.Qgx)(t.groupId,{params:de({searchname:t.keyword},t.pagination),cancelToken:new fe((function(e){pe=e}))});case 11:a=n.sent,s=a.members,u=a.total,s.forEach((function(e){e.userid=e.id,e.isSearch=1})),d=s.length,pe=function(){},t.total=u,e?t.members=s:(i=t.members).push.apply(i,(0,c.Z)(s)),t.pagination.offset+=t.pagination.count,!d&&(t.canLoad=!1);case 21:n.next=26;break;case 23:n.prev=23,n.t0=n.catch(6),r=l.Z.isCancel(n.t0);case 26:return n.prev=26,t.dwEvent("searchmember"),r||(t.searching=!1),n.finish(26);case 30:case"end":return n.stop()}}),n,null,[[6,23,26,30]])})))()},fetchItems:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.keyword||"string"!=typeof e.keyword){t.next=4;break}return t.next=3,e.searchMembers();case 3:return t.abrupt("return",t.sent);case 4:if(n=e.source.id,!e.members.length&&(e.searching=!0),!e.moreLoading){t.next=8;break}return t.abrupt("return");case 8:return e.pagination.offset&&(e.moreLoading=!0),t.prev=9,t.next=12,(0,G.MvM)(de({groupid:n},e.pagination));case 12:if((r=t.sent).length?(r.forEach((function(t){"manager"===t.new_role&&(t.new_role="admin"),t.userid=t.userid||t.id,e.multipleSelect&&!t.checked&&(t.checked=!1),e.multipleSelect&&e.selectAll&&(t.checked=!0)})),(i=e.members).push.apply(i,(0,c.Z)(r))):e.canLoad=!1,e.pagination.offset+=e.pagination.count,t.t0=e.onUpdate,!t.t0){t.next=19;break}return t.next=19,e.onUpdate({members:e.members},"fetchItems");case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(9),(0,x.R5)(t.t1);case 24:return t.prev=24,e.searching=!1,e.moreLoading=!1,t.finish(24);case 28:case"end":return t.stop()}}),t,null,[[9,21,24,28]])})))()},getLinkInfo:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,s,c,l,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading=!0,t.prev=1,t.t0=Promise,t.next=5,(0,G.Twg)(e.groupId);case 5:return t.t1=t.sent,t.next=8,(0,G.ZB8)(e.groupId);case 8:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=12,t.t0.all.call(t.t0,t.t3);case 12:n=t.sent,r=(0,a.Z)(n,2),i=r[0],s=void 0===i?{}:i,c=r[1],l=(void 0===c?{}:c).data,(u=l.invite_link)&&(e.linkKey=u.key,e.linkKeyUrl=e.linkSuffix?l.invite_url+e.linkSuffix:l.invite_url,e.linkKeyTitle=l.title,e.$emit("changeData",{invite_link:u}),e.inviteLink=u),e.dialogLinkSetup=s,e.initLinkSetup(s),e.showLoading=!1,e.$emit("changeData",{source:Object.assign({},e.source,{linkSetup:s})}),t.next=32;break;case 27:t.prev=27,t.t4=t.catch(1),e.showLoading=!1,e.inviteErrorInfo=t.t4,(0,x.R5)(t.t4,!0);case 32:case"end":return t.stop()}}),t,null,[[1,27]])})))()},reverseMemberRole:function(){var e=Object.assign({},this.memberRoleTextMapping);try{~["admin","manager"].indexOf(this.role)&&delete e.admin}catch(e){console.log(e,e.response)}return Object.keys(e).map((function(t){return{role:t,new_role:t,text:e[t].text,subText:e[t].subText}}))},onVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.dropdown.popperElm&&t.$refs.dropdown.popperElm.focus(),t.$refs.dropdownExpired.popperElm&&t.$refs.dropdownExpired.popperElm.focus()}))},getTeamConfig:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.user.companyid){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,G.y5c)(n);case 6:r=t.sent,e.deptSelectable=r.allow_select_all_dept_members_to_group,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e._error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},getQRCodeInfo:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.currentTeam,r=n.recent_members,i=void 0===r?[]:r,a=n.id,t.next=3,(0,G.coB)(a,4);case 3:return s=t.sent,t.abrupt("return",s||i.map((function(e){return e.avatar})));case 5:case"end":return t.stop()}}),t)})))()}},install:function(e){e.component(ge.name,ge)}},ve=ge,_e=n(35244),ke=n(70364),be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showTip?n("div",{staticClass:"k-folder-share-open",attrs:{tabindex:"0"}},[n("div",[n("p",{attrs:{tabindex:"0"}},[n("KIcon",{attrs:{type:"team","aria-hidden":""}}),e._v(e._s(e.lang_txt0))],1),e._v(" "),n("div",{staticClass:"tip",attrs:{tabindex:"0"}},[e._v(e._s(e.lang_txt1))])]),e._v(" "),n("div",{staticClass:"footer"},[n("KButton",{attrs:{useNewLayout:e.useNewLayout},on:{click:function(t){return e.onClose()}}},[e._v(e._s(e.lang_txt2))]),e._v(" "),n("KButton",{attrs:{type:"primary",useNewLayout:e.useNewLayout},on:{click:e.onCommit}},[e._v(e._s(e.lang_txt3))])],1)]):e.certificationForbidden?n("KCertificationForbidden"):n("div",{staticClass:"k-folder-share-open"},[e.committing?n("div",{staticClass:"creating-link-box"},[n("KLoading")],1):n("div",[n("p",{staticClass:"tip1"},[e._v(e._s(e.lang_txt4))]),e._v(" "),n("div",{staticClass:"footer"},[n("KButton",{attrs:{type:"primary",useNewLayout:e.useNewLayout},on:{click:function(t){return e.onClose(!0)}}},[e._v(e._s(e.lang_txt5))])],1)])])},staticRenderFns:[],name:"KFolderShareOpen",componentName:"KFolderShareOpen",components:{KIcon:p.default,KLoading:v.Z,KButton:u.Z,KCertificationForbidden:b.Z},props:{source:{type:Object,required:!0},changeDialog:{type:Function,default:function(){}},replaceDialog:{type:Function,default:function(){}},onSuccessBindPhone:{type:Function,default:function(){}},useNewLayout:{type:Boolean,default:!1}},data:function(){return{lang_txt0:(0,h.t)("logic.FolderShareOpen.txt0"),lang_txt1:(0,h.t)("logic.FolderShareOpen.txt1"),lang_txt2:(0,h.t)("logic.FolderShareOpen.txt2"),lang_txt3:(0,h.t)("logic.FolderShareOpen.txt3"),lang_txt4:(0,h.t)("logic.FolderShareOpen.txt4"),lang_txt5:(0,h.t)("logic.FolderShareOpen.txt5"),committing:!0,showTip:!0,certificationForbidden:!1}},created:function(){this.$emit("componentLoadChange",!1),this.registRequestToken=[],this.$emit("onDwEvent",{type:"create",action:"pageview"})},methods:{csrfToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.csrf||"";if(!t)for(var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r=n.length,i=0;i<32;i++)t+=n.charAt(Math.floor(Math.random()*r));return t},onCommit:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("onDwEvent",{type:"create",action:"createlink"}),t.next=3,(0,G.Vsp)();case 3:if(n=t.sent,r=n&&n.phone&&1===n.certification,!n||1!==n.certification||2!==n.phone_user_status){t.next=8;break}return e.certificationForbidden=!0,t.abrupt("return");case 8:if(!(window.__CONFIG__&&window.__CONFIG__.SWITCH&&window.__CONFIG__.SWITCH.shareNeedBindPhone)||r){t.next=11;break}return e.replaceDialog("KPhoneBind",{hideHeader:!0,backprev:!1,from:ke.Z.WPS&&!ke.Z.wps2018beta?"kdpc-kdocs-web-share":"kdweb-kdocs-web-share",onSuccess:function(){e.onSuccessBindPhone(),setTimeout((function(){e.showTip=!1,e.folderToShare()}),100)},onCancel:function(){e.onClose()}}),t.abrupt("return");case 11:e.showTip=!1,e.folderToShare();case 13:case"end":return t.stop()}}),t)})))()},folderToShare:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,i,a,s,c,l,u,d,p,h,m,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("componentLoadChange",!1),e.registRequestToken=[],n=e.source,i=n.groupid,a=n.fileid,c=0,t.prev=4,l=e.csrfToken(_e.parse(document.cookie)),u={csrfmiddlewaretoken:l},t.next=9,(0,G.A6$)(a,u);case 9:if(d=t.sent,h=(p=d).taskid,m=p.linkgroupid,!h){t.next=15;break}return f=e,t.next=15,new Promise((function(e,t){function n(){return a.apply(this,arguments)}function a(){return(a=(0,r.Z)(o().mark((function r(){var a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=Object.assign({},{taskid:h}),r.next=4,(0,G.VbN)(i,{params:a});case 4:r.sent.done?e(!0):f.registRequestToken.push(setTimeout(n,1e3)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),t(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))).apply(this,arguments)}n()}));case 15:return t.next=17,(0,G.To_)({groupid:m});case 17:d=t.sent,s=d.data,e.$emit("handleUpdateInfo",{linkgroupid:m+"",type:"share",succeed:!0}),e.$emit("changeData",{changeFtype:"linkfolder"}),e.$emit("createdShareFolder",{linkgroupid:m,changeFtype:"linkfolder"}),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(4),"downstreamNotSatisfied"===(c=t.t0.response&&t.t0.response.data&&t.t0.response.data.result||-1)?(e.$emit("onDwEvent",{type:"error_hadlinkfolder",action:"pageview"}),e.committing=!1):((0,x.R5)(t.t0),setTimeout((function(){return e.$emit("handleClose",!0)}),3e3));case 28:!c&&e.$emit("change","FolderShareMain",{source:s});case 29:case"end":return t.stop()}}),t,null,[[4,24]])})))()},onClose:function(e){e?this.$emit("onDwEvent",{type:"error_hadlinkfolder",action:"sure"}):this.$emit("onDwEvent",{type:"create",action:"cancel"}),this.$emit("handleClose",!0)}},install:function(e){e.component(be.name,be)}},xe=be,Se=n(30553),we=n(19731),ye=n(87389),Ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-folder-share",attrs:{tabindex:"0"}},["FolderShareMain"===e.current?[e.source.corpid||e.isGroup?n("KEntFolderShareMain",{attrs:{ftype:e._ftype,showType:e.showType,currentTeam:e.currentTeam,isGroup:e.isGroup,isEntManager:e.isEntManager,user:e.user,source:e.src,route:e.route,changeDialog:e.changeDialog,replaceDialog:e.replaceDialog,updateTeam:e.updateTeam,onUpdate:e.onUpdate,onTransfer:e.onTransfer,onUpdateTeamFolderSetting:e.onUpdateTeamFolderSetting,onCancelShare:e.onCancelShare,changeFtype:e.changeFtype,pcPrivateShow:e.pcPrivateShow,onKdocsDwEvent:e.onKdocsDwEvent,useNewSelector:!0,useNewLayout:e.useNewLayout,isCreateTeamProcess:e.isCreateTeamProcess,createGroupSort:e.createGroupSort,groupSecondSort:e.groupSecondSort,downloadQRCodeVisible:e.downloadQRCodeVisible,callerSceneGroup:e.callerSceneGroup},on:{onDwEvent:e.onDwEvent,handleClose:e.handleClose}}):n("KFolderShareMain",{attrs:{ftype:e._ftype,showType:e.showType,currentTeam:e.currentTeam,isEntManager:e.isEntManager,user:e.user,source:e.src,route:e.route,changeDialog:e.changeDialog,replaceDialog:e.replaceDialog,updateTeam:e.updateTeam,onUpdate:e.onUpdate,inviteLinkTitle:e.inviteLinkTitle,inviteLinkTip:e.inviteLinkTip,inviteMemberAudit:e.inviteMemberAudit,onTransfer:e.onTransfer,onCancelShare:e.onCancelShare,changeFtype:e.changeFtype,useNewSelector:!0,useNewLayout:e.useNewLayout},on:{handleClose:e.handleClose,onDwEvent:e.onDwEvent}})]:"FolderShareOpen"===e.current?[n("KFolderShareOpen",{attrs:{changeDialog:e.changeDialog,replaceDialog:e.replaceDialog,source:e.source,useNewLayout:e.useNewLayout},on:{createdShareFolder:e.createdShareFolder,handleClose:e.handleClose,onDwEvent:e.onDwEvent}})]:e._e()],2)},staticRenderFns:[],name:"KFolderShareEntry",components:{KFolderShareMain:te,KEntFolderShareMain:ve,KFolderShareOpen:xe},props:{ftype:{type:String},showType:{type:String},currentTeam:{required:!0,type:Object},usermsg:{type:Object,required:!1},user:{type:Object},source:{type:Object},isGroup:{type:Boolean},route:{type:Object},onUpdate:{type:Function},onTransfer:{type:Function},onUpdateTeamFolderSetting:{type:Function},inviteLinkTitle:{type:String,default:"邀请QQ、微信好友加入"},inviteLinkTip:{type:String,default:""},inviteMemberAudit:{type:Boolean,default:!0},isEntManager:{type:Boolean},alterFtype:{type:String},onCancelShare:{type:Function},onCreated:{type:Function},pcPrivateShow:{type:Boolean,default:!0},onKdocsDwEvent:{type:Function,default:function(){}},entrance:{type:String,default:""},position:{type:String,default:""},useNewLayout:{type:Boolean,default:!1},isCreateTeamProcess:{type:Boolean,default:!1},createGroupSort:{type:String,default:""},groupSecondSort:{type:String,default:""},downloadQRCodeVisible:{type:Boolean,default:!0},callerScene:{type:String,default:""},callerSceneGroup:{type:String,default:""}},data:function(){return{linkSetup:{},invitedMembers:{},loading:!0,componentsLoading:!0,target:"",from:"",title:"",src:this.source,changeFtype:""}},computed:{_ftype:function(){return this.changeFtype||this.ftype},current:function(){return this.target?this.target:this.ftype&&"linkfolder"!==this.ftype&&"linkfolder"!==this.changeFtype?"FolderShareOpen":"FolderShareMain"},gid:function(){return this.src.id||this.src.fileid}},created:function(){this.changeFtype=this.alterFtype},mounted:function(){this.$el.focus()},methods:{handleClose:function(){this.$emit("close")},updateTeam:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,G.Kvj)(t.gid);case 3:return r=n.sent,t.src=Object.assign({},t.src,r),n.next=7,t.onUpdate({id:t.gid,members:e},"updateTeam");case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t._error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},changeDialog:function(e,t){this.$emit("change",e,t)},replaceDialog:function(e,t){this.$emit("replace",e,t)},createdShareFolder:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var r,i,a,s,c,l,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.changeFtype,i=e.linkgroupid,n.next=3,(0,G.ucm)(t.gid);case 3:if(a=n.sent,s=a.fileinfo,(c=s).linkgroupid=i,"linkfolder"!==s.ftype){n.next=13;break}return l={include:"recent_members"},n.next=11,(0,G.To_)({groupid:s.linkgroupid,params:l});case 11:u=n.sent,t.src=u.data;case 13:t.changeFtype=r,t.$emit("propsChange",{icon:"sharefolder2",width:"600px"}),t.onCreated(c);case 16:case"end":return n.stop()}}),n)})))()},onDwEvent:function(){}}};function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee,Me,Ie="invite_colleague_process",Le={onDwEvent:function(e){var t="";return this.$vm.source.id?t=this.$vm.source.id+"":this.$vm.source.fileid&&(t=this.$vm.source.fileid+""),{event:"share_folder_settings",params:Fe({groupid:this.$vm.source.groupid?this.$vm.source.groupid+"":"",folderid:t,linkfolderid:this.$vm.source.folderid?this.$vm.source.folderid+"":"",caller_scene:this.$vm.callerScene||"",position:this.$vm.position,companyid:this.$vm.source.corpid||0},e)}}},De={KFolderShareEntry:[(0,Se.Z)(Le)],KFolderShareMain:[{trigger:"mounted",listener:function(e){var t=arguments,n=e.handleInvitePopover,r=e.onClickCopy,i=e.corpid,o=e.currentTeam,a=this,s=o.group_type,c=o.id,l="group";"corpindex"!==s&&"corpdep"!==s||(l="all_group"),a.track(Ie,{operation:"group_invite_show",companyid:i,from:l,groupid:c}),e.handleInvitePopover=function(){a.track(Ie,{operation:"group_merb_join",companyid:i,from:l,groupid:c}),n.apply(e,arguments)},e.onClickCopy=function(e){a.track(Ie,{operation:"group_invite_copy",companyid:i,from:l,groupid:c}),r.apply(e,t)}}}],KEntFolderShareMain:[{trigger:"mounted",listener:(Me=(0,r.Z)(o().mark((function e(t){var n,r,i,a,s,c,l,u,d,p,h,m,f=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.createTeamProcessDwEvent,r=t.isCreateTeamProcess,i=t.onClickCopy,a=t.currentTeam,s=t.user,c=void 0===s?{}:s,l=a.id,u="group",d=this,e.next=6,(0,ye.SL)();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:p=e.t0,h=p.version,r&&(m=(0,we.x_)(window),t.createTeamProcessDwEvent=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.track("group_invitepanel",Fe(Fe({},r),{},{companyid:t.corpid,group_sort:t.createGroupSort,role:t.role,group_second_sort:t.groupSecondSort,groupid:null===(e=t.currentTeam)||void 0===e?void 0:e.id,source:m,entrance:"team_list",membernum:t.allMembersCount,utmsource:m,client_version:h,account_id:c.id})),n.apply(t,arguments)}),t.onClickCopy=function(e){d.track(Ie,{operation:"invite_link",from:u,groupid:l}),i.apply(e,f)};case 13:case"end":return e.stop()}}),e,this)}))),function(e){return Me.apply(this,arguments)})}],KDialog:[{event:"group_invitepanel",trigger:"beforeDestroy",listener:(Ee=(0,r.Z)(o().mark((function e(t){var n,r,i,a,s,c,l,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page.body,i=(r=t||{}).source,a=void 0===i?{}:i,s=r.user,c=void 0===s?{}:s,e.next=4,(0,ye.SL)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(l=e.t0,u=l.version,"KFolderShareEntry"!==n.name||!t.isCreateTeamProcess){e.next=11;break}return e.abrupt("return",{operate:"close",group_sort:t.createGroupSort,companyid:a.id,role:a.roleid,group_second_sort:t.groupSecondSort,groupid:null===(d=t.currentTeam)||void 0===d?void 0:d.id,source:"pcoffice",entrance:"team_list",membernum:a.member_count,utmsource:(0,we.x_)(window),client_version:u,account_id:c.id});case 11:case"end":return e.stop()}}),e)}))),function(e){return Ee.apply(this,arguments)})}]};Ce.install=function(e){e.component(Ce.name,Ce)},Ce.dw=De;var Pe=Ce},29563:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(20144),s=n(48970),c=n.n(s),l=n(57099),u=n.n(l),d=n(42173),p=n.n(d),h=n(43229),m=n.n(h),f=n(80589),g=n(62414),v=n(16548),_=n(47189),k=n(85476),b=n(45821),x=[{txt:"3"+(0,b.t)("logic.FolderShareSetting.txt8"),timestamp:259200},{txt:(0,b.t)("logic.FolderShareSetting.txt9"),timestamp:0}],S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.linkSetup?n("div",{staticClass:"k-folder-share-setting"},[n("ul",[e.isShareFolder?e._e():n("li",[n("span",[e._v(e._s(e.lang_txt0))]),e._v(" "),n("el-switch",e._b({on:{change:e.onChangeAllowInvite},model:{value:e.linkSetup.allow_invite,callback:function(t){e.$set(e.linkSetup,"allow_invite",t)},expression:"linkSetup.allow_invite"}},"el-switch",e.elSwitchStyle,!1))],1),e._v(" "),e.isInviteMemberAudit?n("li",[n("span",[e._v(e._s(e.lang_txt1))]),e._v(" "),n("el-switch",e._b({on:{change:e.onChangeNeedVerify},model:{value:e.linkSetup.need_approve,callback:function(t){e.$set(e.linkSetup,"need_approve",t)},expression:"linkSetup.need_approve"}},"el-switch",e.elSwitchStyle,!1))],1):e._e(),e._v(" "),n("li",[n("span",[n("span",[e._v(e._s(e.lang_txt2))]),e._v(" "),n("span",{staticClass:"subtitle"},[e._v(e._s(e.lang_txt3))])]),e._v(" "),n("el-switch",e._b({on:{change:e.onChangeReadonly},model:{value:e.linkSetup.member_readonly,callback:function(t){e.$set(e.linkSetup,"member_readonly",t)},expression:"linkSetup.member_readonly"}},"el-switch",e.elSwitchStyle,!1))],1),e._v(" "),e.isInviteLinkTime?n("li",[n("span",[e._v(e._s(e.lang_txt4))]),e._v(" "),n("el-dropdown",{attrs:{placement:"bottom-end",trigger:"click"},on:{command:e.onChangelinkTime}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n          "+e._s(e.invitelinkTime.find((function(t){return t.timestamp===(e.linkSetup.link_period?259200:0)})).txt)),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("el-dropdown-menu",{staticClass:"el-dropdown-menu_invitesetup",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.invitelinkTime,(function(t,r){return n("el-dropdown-item",{key:r,attrs:{command:t}},[t.timestamp===e.linkSetup.link_period?n("KIcon",{staticClass:"selected-icon",attrs:{type:"check"}}):e._e(),e._v(" "),n("span",{class:{selected:t.timestamp===e.linkType.link_period}},[e._v(e._s(t.txt))])],1)})),1)],1)],1):e._e(),e._v(" "),e.isShareFolder?n("li",[n("a",{staticClass:"cancel",on:{click:e.onCancel}},[e._v(e._s(e.lang_txt5))])]):e._e()]),e._v(" "),n("div",{staticClass:"footer"},[n("KButton",{on:{click:e.onClose}},[e._v(e._s(e.lang_txt6))]),e._v(" "),n("KButton",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.lang_txt7))])],1)]):e._e()},staticRenderFns:[],name:"KFolderShareSetting",components:{KButton:g.Z,KIcon:f.default,ElDropdown:u(),ElDropdownItem:p(),ElDropdownMenu:m(),ElSwitch:c()},props:{user:{type:Object},changeFtype:{type:String},ftype:{type:String},source:{type:Object,required:!0},showType:{type:String},onChangeSettings:{type:Function},dialogLinkSetup:{type:Object}},data:function(){return{lang_txt0:(0,b.t)("logic.FolderShareSetting.txt0"),lang_txt1:(0,b.t)("logic.FolderShareSetting.txt1"),lang_txt2:(0,b.t)("logic.FolderShareSetting.txt2"),lang_txt3:(0,b.t)("logic.FolderShareSetting.txt3"),lang_txt4:(0,b.t)("logic.FolderShareSetting.txt4"),lang_txt5:(0,b.t)("logic.FolderShareSetting.txt5"),lang_txt6:(0,b.t)("logic.FolderShareSetting.txt6"),lang_txt7:(0,b.t)("logic.FolderShareSetting.txt7"),invitelinkTime:x,folderid:"",elSwitchStyle:{width:32,"active-color":"#417FF9","inactive-color":"#E6E6E6"}}},computed:{isInviteMemberAudit:function(){return!this.$__SHIELD_CONFIG__||this.$__SHIELD_CONFIG__.inviteMemberAudit},isInviteLinkTime:function(){return!this.$__SHIELD_CONFIG__||this.$__SHIELD_CONFIG__.inviteLinkTime},isCorpTeam:function(){return!!this.source.corpid},isShareFolder:function(){return this.source.folderid||this.folderid},linkSetup:function(){return"dialog"===this.showType?this.dialogLinkSetup:this.source.linkSetup},linkType:function(){return this.linkSetup.link_period>0?"threeDays":"forever"},groupid:function(){return this.source.id||this.source.groupid}},mounted:function(){this.dwEvent("pageview")},created:function(){var e=this;return(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dwEvent("pageview"),"dialog"===e.showType){t.next=4;break}return t.next=4,e.getLinkinfo();case 4:case"end":return t.stop()}}),t)})))()},methods:{getLinkinfo:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"linkfolder"!==e.ftype&&"linkfolder"!==e.changeFtype){t.next=6;break}return t.next=4,(0,_.SEX)(e.groupid);case 4:(n=t.sent)&&n.data&&n.data.info&&n.data.info[e.groupid]>0&&(e.folderid=n.data.info[e.groupid]);case 6:if(e.linkSetup){t.next=14;break}return r={},i={need_approve:!1,link_period:0,member_readonly:!1,allow_invite:!1},t.next=11,(0,_.Twg)(e.groupid);case 11:i=t.sent,r.linkSetup=i,e.$emit("changeData",{source:Object.assign({},e.source,r)});case 14:e.$emit("componentLoadChange",!1),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),(0,k.R5)(t.t0,!0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},dwEvent:function(e){this.$emit("onDwEvent",{type:"groupsetting",action:e})},onClose:function(e){e||this.dwEvent("cancel"),this.$emit("handleClose"),"dialog"===this.showType&&this.$emit("close")},onCancel:function(){var e=this;return(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dwEvent("cancelshare"),e.$emit("change","FolderShareCancel",{source:e.source});case 2:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dwEvent("sure"),t.prev=1,n=e.linkSetup,r=n.need_approve,i=n.link_period,a=n.member_readonly,s=n.allow_invite,t.next=5,(0,_.U47)(e.source.id,{need_approve:r,link_period:i,member_readonly:a,allow_invite:s});case 5:"ok"===(c=t.sent).result?(v.Z.success((0,b.t)("logic.FolderShareSetting.txt10")),"dialog"===e.showType&&e.onChangeSettings(e.linkSetup)):v.Z.error(c.result),setTimeout((function(){e.onClose(!0)}),500),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),(0,k.R5)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},onChangeReadonly:function(e){e?this.dwEvent("readonly_on"):this.dwEvent("readonly_off")},onChangeNeedVerify:function(e){e?this.dwEvent("verifyneed_on"):this.dwEvent("verifyneed_off"),"dialog"===this.showType&&(this.linkSetup.isNeedVerify=e)},onChangelinkTime:function(e){var t=e.timestamp?"3":"0";if(this.dwEvent("linkperiod_"+t),"dialog"===this.showType)this.linkSetup.link_period=e.timestamp,a.default.set(this.linkSetup,"link_period",e.timestamp);else{var n={},r={need_approve:this.linkSetup.need_approve,member_readonly:this.linkSetup.member_readonly,allow_invite:this.linkSetup.allow_invite,link_period:e.timestamp};n.linkSetup=r,this.$emit("changeData",{source:Object.assign({},this.source,n)})}},onChangeAllowInvite:function(e){"dialog"===this.showType&&(this.linkSetup.allowInvite=e)}},install:function(e){e.component(S.name,S)}};t.Z=S},15948:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(19799),s=n(64512),c=n(62414),l=n(16548),u=n(47189),d=n(85476),p=n(45821),h="admin_target_free_appoval",m="user_target_appoval",f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-invite-by-send"},[n("p",{staticClass:"title"},[e._v(e._s(e.lang_txt0))]),e._v(" "),n("ul",{staticClass:"members"},e._l(e.notEntMembers,(function(t,r){return n("li",{key:r,on:{click:function(n){return e.onChange(t)}}},[n("KAvatar",{staticClass:"k-invite-by-send-avatar",attrs:{src:t.avatar}}),e._v(" "),n("p",[e._v(e._s(t.name))]),e._v(" "),n("KMCheckbox",{staticClass:"inviteBySend-checkbox",attrs:{checked:e.isSelected(t)}})],1)})),0),e._v(" "),n("div",{staticClass:"btns"},[n("KButton",{attrs:{type:"primary"},on:{click:e.invite}},[e._v("\n      "+e._s(e.lang_txt1)+"\n    ")]),e._v(" "),n("p",{on:{click:e.back}},[e._v(e._s(e.lang_txt2))])],1)])},staticRenderFns:[],name:"KInviteBySend",components:{KAvatar:a.Z,KMCheckbox:s.Z,KButton:c.Z},props:{notEntMembers:{type:Array,default:function(){return[]}},source:{type:Object,default:function(){return{}}},company:{type:Object,default:function(){return{}}},errMsg:{type:String,default:""},inviteLink:{type:Object,default:function(){return{}}},showType:{type:String},updateTeam:{type:Function},isEntManager:{type:Boolean}},data:function(){return{lang_txt0:(0,p.t)("logic.InviteBySend.txt0"),lang_txt1:(0,p.t)("logic.InviteBySend.txt1"),lang_txt2:(0,p.t)("logic.InviteBySend.txt2"),selectedUserIds:[]}},created:function(){this.selectedUserIds=this.notEntMembers.map((function(e){return e.id}))},methods:{invite:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a,s,c,f,g,v,_;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.notEntMembers,r=e.selectedUserIds,i=e.company,a=50,t.prev=2,!(r.length<=0)){t.next=5;break}return t.abrupt("return",l.Z.error((0,p.t)("logic.InviteBySend.txt3")));case 5:if(!(r.length>a)){t.next=7;break}return t.abrupt("return",l.Z.error((0,p.t)("logic.InviteBySend.txt4")+"".concat(a)+(0,p.t)("logic.InviteBySend.txt5")));case 7:return s=e.inviteLink,c=s.groupid,f=s.key,g="team","corpindex"===e.source.group_type&&(g="compmainpage"),t.next=12,(0,u.PX8)(i.id,{action:"drive",user_ids:r.join(","),group_id:c,join_group_key:f,invitation_type:parseInt(i.userRole)<3||e.isEntManager?h:m,source:{invite_info:{scene:g,invite_source:"docsWeb"}}});case 12:v=n.filter((function(e){return-1!==r.indexOf(e.id)})),_=v.length,l.Z.success("".concat((0,p.t)("logic.InviteBySend.txt6"),"，").concat(v[0].name).concat(_>1?"".concat((0,p.t)("logic.InviteBySend.txt7")).concat(_).concat((0,p.t)("logic.InviteBySend.txt8")):"").concat((0,p.t)("logic.InviteBySend.txt9"))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),(0,d.R5)(t.t0);case 20:return t.prev=20,e.back(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,17,20,23]])})))()},isSelected:function(e){var t=e.id;return-1!==this.selectedUserIds.indexOf(t)},back:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&l.Z.error(this.errMsg),"dialog"===this.showType?(this.$emit("close"),this.updateTeam()):(this.$emit("change","FolderShareMain",{source:this.source}),this.$emit("updateTeam"))},onChange:function(e){this.isSelected(e)?this.selectedUserIds.splice(this.selectedUserIds.indexOf(e.id),1):this.selectedUserIds.push(e.id)}},install:function(e){e.component(f.name,f)}};t.Z=f},8307:function(e,t,n){var r=n(49200),i=n(37311),o=n(2406),a=n.n(o),s=n(85476),c=n(47189),l=n(16548),u=n(45821),d=n(74470),p=n(7018),h=n(61918),m=n(74114),f=new p.PlugCtr("kso"),g={staff:0,company:0,contact:3,latest:4,custom:5,group:6,department:6},v={computed:{isSa:function(){return["creator","admin"].indexOf(this.source.user_role)>-1},isCooperFile:function(){var e=this.source.fname,t=(0,d.M7)(e);return f.ask("FileDefaultPermission.reset",{source:this.source},t)},isFromFloder:function(){return this.source.type},secureCoopMemberIds:function(){var e=this.groupMembersIds.filter((function(e){return"string"==typeof e}));return this.secure?this.coopmembersIds.concat(e):[]},disableIds:function(){var e=!this.isFromFloder&&this.source.link_members?this.source.link_members.map((function(e){return e.id})).concat(this.secure?this.secureCoopMemberIds:this.groupMembersIds):this.groupMembersIds;return e.push(this.user.id),e},canJoinCount:function(){return this.isFromFloder?Math.max(this.source.member_count_limit-this.source.member_count-this.invitedMembers.length,0):50},isCorpFile:function(){return this.source.extra&&this.source.extra.is_corp_file}},methods:{onFirstLoad:function(){},onPermChange:function(){},onLoad:function(){},onLoadError:function(){this.$emit("close")},onCopy:function(){},onSearchContactClick:function(){},onIndexSend:function(){},onSearchSend:function(){},onSearchEnd:function(){},onSendInvitationClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.Z.success(t.RelationAdded||t.addedMessage||(0,u.t)("logic.InviteContact.txt5"))},onCancelInvitationClick:function(){},onContactInvitationPanelLoad:function(){},genCoopContactsParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={0:{name:"company",getItem:function(e){return e._source?{userid:e.userid,companyid:e._source.comp_id}:{userid:e.userid,companyid:e.comp_id}}},3:{name:"account",getItem:function(e){return e.userid}},4:{name:"recent",getItem:function(e){return e.userid}},5:{name:"group_users",getItem:function(e){return e.userid}}};return e.reduce((function(e,n){var r=n._from?t[g[n._from]]:t[n.mType];return r?(!Array.isArray(e[r.name])&&(e[r.name]=[]),e[r.name].push(r.getItem(n)),e):e}),{})},genCoopDeptContactsParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={6:{name:"company_dept",getItem:function(e){return e._source?{deptid:e.deptId,companyid:e._source.comp_id}:{deptid:e.deptid,companyid:e.comp_id}}}};return e.reduce((function(e,n){var r=n._from?t[g[n._from]]:t[n.mType];return r?(!Array.isArray(e[r.name])&&(e[r.name]=[]),e[r.name].push(r.getItem(n)),e):e}),{})}}};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,h.Z)(),x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-invite-contact"},[e.flag?n("KMemberSelector",{ref:"memberSelector",attrs:{onSubmit:e.onSubmit,corpid:e.corpid,getText:e.getText,disableIds:e.disableIds,initSelectedUsers:e.initSelectedUsers,onCancel:e.back,showDropDown:e.isCooperFile,uid:e.user.id||e.user.userid,toAdd:e.handleToAdd,toSendInvitation:e.toSendInvitation,toDeleteContact:e.toDeleteContact,onActive:e.onActive,onFirstLoad:e.onFirstLoad,onPhoneLeanClick:e.handleToAdd,onPermChange:e.onPermChange,maxSelectCount:e.canJoinCount,showPhoneLean:!0,deptSelectable:e.deptSelectable,showAddContact:"pcoffice"!==e.showType,showInfoCard:"pcoffice"!==e.showType,exceedInfo:e.exceedInfo,entrance:e.entrance,secure:!!e.isCorpFile&&e.secure,hideContact:!!e.isCorpFile&&e.secure,ecisLink:e.source.link}}):e._e()],1)},staticRenderFns:[],name:"KInviteContact",components:{KMemberSelector:m.Z},mixins:[v],props:{from:{type:String,required:!0},user:{type:Object,required:!0},showType:{type:String},source:{type:Object},invitedMembers:{type:Array,default:function(){return[]}},onOk:{type:Function},updateTeam:{type:Function},ua:{type:Object},isEntManager:{type:Boolean},inviteLink:{type:Object},onPhoneLeanClick:{type:Function},dwEntrance:{type:String,default:""},position:{type:String,default:""},deptSelectable:{type:Boolean,default:!1},isClink:{type:Boolean,default:!1},secure:{type:Boolean},corpid:{type:String},onDwEvent:{type:Function,default:function(){}},linkSuffix:{type:String,default:""},isShareV3:{type:Boolean,default:!1,required:!1}},data:function(){return{initSelectedUsers:[],groupMembersIds:[],coopmembersIds:[],deptContactsLength:0,contactsLength:0,company:{},exceedInfo:(0,u.t)("logic.InviteContact.txt0"),entrance:[],flag:!1,currentCompany:null,addFailListMemberName:[]}},mounted:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(e.source.corpid||e.corpid),t.next=3,(0,c.DFW)();case 3:e.company=t.sent,r=e.company.find((function(e){return e.id===n})),e.$emit("changeData",{company:r}),e.currentCompany=r,n&&(e.company=[r]),e.entrance=e.company.length?e.company.map((function(e){return k({eType:"company",eName:e.name},e)})):{eType:"company"},e.flag=!0;case 10:case"end":return t.stop()}}),t)})))()},created:function(){var e=this.source.group&&this.source.group.type;(this.isFromFloder||"normal"===e||"corpnormal"===e||"corpdep"===e)&&this.getGroupMembersIds(),this.deptSelectable&&this.getDeptMembersIds()},methods:{onActive:function(){this.$refs.memberSelector.refresh()},getText:function(e){var t=e.membersLength;if(!this.isCooperFile&&!this.isFromFloder)return(0,u.t)("logic.InviteContact.txt1")+"".concat(t)+(0,u.t)("logic.InviteContact.txt2")},updateLink:function(){this.$emit("updateLink")},handleToAdd:function(e){if("sharefile"===this.from){var t=t||function(){},n={backprev:!0,defaultPhone:e,onUpdateLink:t,source:this.source,isClink:this.isClink,user:this.user,onSendSuccess:this.sendInviteSuccessCb,linkSuffix:this.linkSuffix,onInvitationSuccessCallback:this.onSendInvitationClick};this.$emit("change","KAddRecommendContact",n)}else if("dialog"===this.showType){var r=r||function(){},i={backprev:!0,defaultPhone:e,isClink:!1,onUpdateLink:r,noCorp:!0,user:this.user};this.$emit("change","KAddRecommendContact",i)}else this.toAdd(e)},handlePhoneLeanClick:function(e){this.onPhoneLeanClick(e)},getMType:function(e){var t={staff:0,company:0,teamCompany:1,collaborator:2,contact:3,latest:4,custom:5,group:6};return Array.isArray(e)?e.map((function(e){return t[e]})).join(","):t[e]},onSubmit:function(e){var t=this;return(0,i.Z)(a().mark((function n(){var r,i,o,d,p,h,m,g,v,_,b,x,S,w,y,C,T,F,E,M,I,L,D,P,K,$,O,A,N,B,Z,R,j,G,U,q,H,Q,V,W,X,J;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.users,i=e.exSource,o=e.remindChecked,d=i&&i.user_permission||e.permission,p=r.map((function(e){return e._from})),h=p.length&&t.getMType(p)||e.types,"comment"===d&&(m=["comment"],d="read"),t.isCooperFile||(d="read"),g=r.length,v=!1,!(g<=0)){n.next=10;break}return n.abrupt("return");case 10:return _="file",t.isFromFloder&&(_=t.$attrs&&"Enterprise"===t.$attrs.entrance?"group":"team"),b={result:"success",errorcode:"0",number:g+"",type:h,from:_},x="",S=[],n.next=17,f.askAsync("MemberSelectModal.inviteButton.intercept",{groupId:t.source.id,memberList:r,source:i,goback:function(){return t.$emit("close")}},!1);case 17:if(!n.sent){n.next=20;break}return n.abrupt("return");case 20:if(n.prev=20,y=r.map((function(e){return e.userid||e.id})),!t.isFromFloder){n.next=36;break}return C=t.source.id,n.next=26,(0,c.Fdc)({tid:C,users:r});case 26:T=n.sent,F=T.failMsg,E=T.failList,M=T.members,I=T.wait_approve,v=I,t.onDwEvent("share_folder_settings",{type:"groupprofile",action:"contact_addmember_"+g}),F&&(x=F,L=E.filter((function(e){return-1!==["notCompanyMember","notCompanyUser"].indexOf(e.result)})).map((function(e){return e.userid})),S=M.filter((function(e){return-1!==L.indexOf(e.id)})),t.addFailListMemberName=E.filter((function(e){return-1!==["EpNotInShareScope"].indexOf(e.result)})).map((function(e){return e.name})),b.result=M.length!==E.length?"partial_success":"fail",b.errorcode=b.result),n.next=62;break;case 36:if(D=t.source,P=D.clink,K=D.link,$=D.id,O=D.groupid,A=P&&P.id||K&&K.sid){n.next=49;break}return n.next=41,(0,c.EWY)($);case 41:return N=n.sent,n.next=44,(0,c.Ukd)($);case 44:return n.next=46,(0,c.XjI)(O,$);case 46:if(A=N&&N.link&&N.link.sid){n.next=49;break}return n.abrupt("return");case 49:if(B=t.genCoopContactsParam(r),Z=t.genCoopDeptContactsParam(r),"{}"===JSON.stringify(Z)){n.next=55;break}return t.deptContactsLength=Z.company_dept.length,n.next=55,(0,c.OXd)({sid:A,contacts:Z,permission:d,ext_perm_list:m});case 55:if("{}"===JSON.stringify(B)){n.next=62;break}return t.contactsLength=r.length-t.deptContactsLength,n.next=59,(0,c.Ssx)({sid:A,contacts:B,permission:d,ext_perm_list:m,without_send_message:!o});case 59:R=n.sent,j=R.failList,w=j;case 62:G=S.length>0,U=w&&w.length>0,x&&!U?null!==(q=t.addFailListMemberName)&&void 0!==q&&q.length?e.handleMemberAddFailed(t.addFailListMemberName):!G&&t.$message.error(x):U||(!t.isSa&&t.isFromFloder&&v?l.Z.success((0,u.t)("logic.InviteContact.txt3")):l.Z.success((0,u.t)("logic.InviteContact.txt4"))),G?"dialog"===t.showType?t.$emit("change","KInviteBySend",{source:t.source,notEntMembers:S,errMsg:x,inviteLink:t.inviteLink,company:t.currentCompany,isEntManager:t.isEntManager,showType:t.showType,updateTeam:t.updateTeam}):(t.$emit("changeData",{notEntMembers:S,errMsg:x}),t.$emit("change","InviteBySend",{source:t.source,notEntMembers:S,errMsg:x})):U?(H=w[0].msg+(0,u.t)("logic.InviteContact.txt8")+w.length+(0,u.t)("logic.InviteContact.txt9"),t.$emit("replace","KListInfo",{btnText:(0,u.t)("logic.InviteContact.txt10"),desc:H,items:w,onClosed:function(){t.$emit("close")}})):t.back(y,e),n.next=73;break;case 68:n.prev=68,n.t0=n.catch(20),b.result="fail",b.errorcode=(null===n.t0||void 0===n.t0||null===(Q=n.t0.response)||void 0===Q||null===(Q=Q.data)||void 0===Q?void 0:Q.result)||"noErrorCode",(null===n.t0||void 0===n.t0||null===(V=n.t0.response)||void 0===V||null===(V=V.data)||void 0===V?void 0:V.result)&&(0,s.R5)(n.t0);case 73:t.isClink?(W=t.source.clink||{},X=W.status,J={type:"share",entrance:t.dwEntrance,position:t.position,groupid:t.source.groupid||0,fileid:t.source.id||0,filetype:(0,s.Li)(t.source.fname)},t.deptContactsLength&&t.onDwEvent("share_file_settings",Object.assign(J,{action:"contact_add_group_"+d+"_"+t.deptContactsLength})),t.contactsLength&&t.onDwEvent("share_file_settings",Object.assign(J,{action:"contact_add_user_"+d+"_"+t.contactsLength})),t.onDwEvent("addmember_complete",k(k({},b),{},{status:X,permission:d}))):t.onDwEvent("addmember_complete",b);case 74:case"end":return n.stop()}}),n,null,[[20,68]])})))()},getGroupMembersIds:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.JEF)(e.source.group?e.source.group.id:e.source.id);case 3:n=t.sent,e.groupMembersIds=n&&n.members,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),(0,s.R5)(t.t0),setTimeout((function(){return e.$emit("handleClose",!0)}),3e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getDeptMembersIds:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r,i,o,l,u,d,p,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.source,i=r.clink,o=r.link,l=i&&i.id||o&&o.sid){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,(0,c.upo)(l,0);case 7:if(u=t.sent,d=u.team_collaborators,p=u.collaborators,-1===u.next||u.collaborators.length){t.next=16;break}return t.next=13,(0,c.upo)(l,u.next);case 13:h=t.sent,d=d.concat(h.data.team_collaborators),p=p.concat(h.data.collaborators);case 16:n=d.map((function(e){return e.team_id})),e.coopmembersIds=p.map((function(e){return e.id})),e.groupMembersIds=e.groupMembersIds.concat(n),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),(0,s.R5)(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},back:function(e,t){"dialog"===this.showType||"sharefile"===this.from?(this.$emit("close"),this.onOk(e,t)):(this.$emit("change","FolderShareMain",{source:this.source}),this.$emit("updateTeam"))},onClose:function(e){this.$emit("change",{source:this.from}),e&&this.$emit(e)},toDeleteContact:function(e){var t=this;s.F3.closeCurPopover(),"dialog"!==this.showType&&"sharefile"!==this.from||this.$emit("change","KDeleteContact",{memberInfo:e,onSuccess:function(){l.Z.success((0,u.t)("logic.InviteContact.txt6")),t.$emit("close")},onError:function(){l.Z.error((0,u.t)("logic.InviteContact.txt7"))},onCancel:function(){return t.$emit("close")}})},toSendInvitation:function(e){var t=this;s.F3.closeCurPopover(),"dialog"===this.showType||"sharefile"===this.from?this.$emit("change","KSendAddContactInvitation",{source:this.source,name:this.user.nickname||this.user.shortName||this.user.name,targetId:e.userid,targetName:e.nickname,targetAvatar:e.avatar,onCancel:function(){t.$emit("close")},onSuccess:function(){t.$emit("close")}}):b.show(e)}},install:function(e){e.component(x.name,x)}};t.Z=x},17717:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(47189),s=n(423),c=n(95272),l=n(80589),u=n(62414),d=n(45821),p=n(70364),h=n(16548),m=n(60987),f=(n(47255),p.Z.wexin&&!p.Z.wxwork),g=p.Z.isMobile&&f,v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-phoneBind",class:e.clazzName,style:{height:e.componentHeight}},[!e.loading&&!e.initDataLoading||e.qrCodeBindShow?e.txtShow?n("div",{staticClass:"k-phoneBind-tip"},[n("KIcon",{attrs:{type:"bind-phone"}}),e._v(" "),n("p",[e._v(e._s(e.lang_needBind))]),e._v(" "),n("div",{staticClass:"action-div"},[n("KButton",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.toBind}},[e._v(e._s(e.lang_bind))])],1)],1):e._e():n("KLoading"),e._v(" "),n("iframe",{directives:[{name:"show",rawName:"v-show",value:e.iframeShow,expression:"iframeShow"}],ref:"iframe",attrs:{src:e.url,frameborder:"0"}}),e._v(" "),e.qrCodeBindShow?n("QrCodeBind",{attrs:{from:e.qrCodeBindFrom,onDwEvent:e.onDwEvent},on:{hideBottomTip:function(t){e.isHideBottomTip=!0},success:e.onQrCodeBindSuccess}}):e._e(),e._v(" "),e.bindTipShow?n("div",{staticClass:"k-phoneBind__qr-code-switch",on:{click:e.switchQrCodeStatus}},[e._v("\n    "+e._s(e.qrCodeStatus?e.lang_smsValid+" ＞":e.lang_wxValid+" ＞")+"\n  ")]):e._e()],1)},staticRenderFns:[],name:"KPhoneBind",components:{KLoading:c.Z,KIcon:l.default,KButton:u.Z,QrCodeBind:m.Z},props:{onSuccess:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}},onToBind:{type:Function,default:function(){}},from:{type:String,default:p.Z.WPS&&!p.Z.wps2018beta?"kdpc-kdocs-web-share":"kdweb-kdocs-web-share"},identifyType:{type:String,default:"phone"},entrance:{type:String,default:"share"},descTxt:{type:String},moreDialog:{type:Boolean,default:!1},vipLevel:{type:[Number,String]},callbackFun:{type:Function,default:function(){}},onDwEvent:{type:Function,default:function(){}},isAutoClose:{type:Boolean,default:!1},isQrCodeBind:{type:Boolean,default:!0},qrCodeBindFrom:{type:String,default:"default",required:!1},height:{type:[String,Number],default:""}},data:function(){var e=(0,d.t)("combine.phone.needBind");return"certification"===this.identifyType&&(e=(0,d.t)("combine.phone.needCertification")),this.descTxt&&(e=this.descTxt),{lang_needBind:e,lang_cancel:(0,d.t)("combine.phone.cancel"),lang_bind:"certification"===this.identifyType?(0,d.t)("combine.phone.certification"):(0,d.t)("combine.phone.bind"),lang_wxValid:(0,d.t)("logic.QrCodeBind.wxValid"),lang_smsValid:(0,d.t)("logic.QrCodeBind.smsValid"),thirdPartCookies:!1,loading:!0,initDataLoading:!0,bindSuccessed:!1,isBindWx:!1,qrCodeStatus:!1,isHideBottomTip:!1,dwFromMap:{fileEdit:"editFile",share:"share",default:"other"}}},computed:{url:function(){return g?"".concat(s.Kn,"/account/verify?realname=true"):"".concat(s.fy,"/crossdomain.html?action=sharePhoneBind&from=").concat(this.from,"&type=").concat(this.identifyType)},disabled:function(){return this.second>0},iframeShow:function(){return this.moreDialog?!this.loading&&!this.initDataLoading&&this.thirdPartCookies&&this.bindSuccessed&&!this.qrCodeStatus:!this.loading&&!this.initDataLoading&&this.thirdPartCookies&&!this.qrCodeStatus},txtShow:function(){return this.moreDialog?!this.bindSuccessed&&!this.initDataLoading&&!this.qrCodeStatus:!this.thirdPartCookies&&!this.initDataLoading&&!this.qrCodeStatus},qrCodeBindSwitch:function(){return this.isQrCodeBind&&"certification"===this.identifyType},qrCodeBindShow:function(){return!this.initDataLoading&&this.qrCodeBindSwitch&&this.isBindWx&&this.bindSuccessed&&this.qrCodeStatus},bindTipShow:function(){return!this.initDataLoading&&this.qrCodeBindSwitch&&this.isBindWx&&this.bindSuccessed&&!this.isHideBottomTip},isCertification:function(){return"certification"===this.identifyType},clazzName:function(){return{"k-phoneBind_certification":(this.iframeShow||this.qrCodeBindShow)&&this.isCertification,"k-phoneBind_certification--loading":this.loading||this.initDataLoading,"k-phoneBind_certification--phone-certification":!this.isBindWx&&!this.txtShow&&"certification"===this.identifyType}},componentHeight:function(){var e=this.height,t=this.txtShow,n=this.qrCodeStatus;return e?isNaN(e)?e:"".concat(e,"px"):t?"216px":n?"318px":"450px"}},mounted:function(){this.init(),this.onMessage=this.onMessage.bind(this),window.addEventListener("message",this.onMessage)},created:function(){this.onDwEvent&&this.onDwEvent("binding_mobile_show",{entrance:this.entrance,vip:this.vipLevel,action:"show"})},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},destroy:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.moreDialog){t.next=12;break}return t.prev=1,t.next=4,(0,a.q6S)();case 4:r=t.sent,null!=(i=r.bindstatus)&&null!==(n=i.phone)&&void 0!==n&&n.value&&(e.callbackFun(),e.onDwEvent&&e.onDwEvent("binding_mobile_succes",{entrance:e.entrance,vip:e.vipLevel})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},methods:{init:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.initDataLoading=!0,n=[],e.qrCodeBindSwitch&&n.push(e.getWxBindStatus()),n.push((0,a.fui)()),t.next=7,Promise.all(n);case 7:e.initDataLoading=!1,e.thirdPartCookies=!window.LOCALSPA,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.initDataLoading=!1;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},onMessage:function(e){var t=this,n=e.origin,r=e.data;if(n===s.fy){var i="";try{i=JSON.parse(r).action}catch(e){console.log(e)}var o={load:function(){return t.loading=!1},beforeunload:function(){},onBackPressed:function(){return t.$emit("close")},identityFinish:function(){if(t.bindSuccessed=!0,t.moreDialog){var e=t.isCertification?(0,d.t)("basic.certification.certificationSuccess"):(0,d.t)("basic.certification.bindSuccess");h.Z.success(e),t.thirdPartCookies&&setTimeout((function(){t.isAutoClose&&t.$emit("close","ok")}),1e3)}t.onSuccess()},bindPhoneSuccessed:function(){if(t.bindSuccessed=!0,t.moreDialog){var e=t.isCertification?(0,d.t)("basic.certification.certificationSuccess"):(0,d.t)("basic.certification.bindSuccess");h.Z.success(e),t.thirdPartCookies&&setTimeout((function(){t.isAutoClose&&t.$emit("close","ok"),t.callbackFun()}),1e3)}t.onSuccess()},openBrowser:function(){return window.open(e.data.url||"".concat(s.yV,"/help#account_merge"))}};o[i]&&o[i]()}},toBind:function(){this.bindSuccessed=!0,this.onDwEvent&&this.onDwEvent("binding_mobile_show",{entrance:this.entrance,vip:this.vipLevel,action:"click"}),this.moreDialog&&!this.thirdPartCookies&&(this.$emit("close"),window.open(this.url)),this.moreDialog||(this.onToBind(),window.open(this.url))},getWxBindStatus:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,a.q6S)();case 3:(n=t.sent)&&n.wechat&&(e.isBindWx=!0,e.qrCodeStatus=!0,e.bindSuccessed=!0,e.onDwEvent("realname_dialog",{action:"show",page:"scan",scene:e.dwFromMap[e.qrCodeBindFrom]})),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},switchQrCodeStatus:function(){this.qrCodeStatus?(this.onDwEvent("realname_dialog",{action:"show",page:"message",scene:this.dwFromMap[this.qrCodeBindFrom]}),this.onDwEvent("realname_dialog",{action:"click",type:"switchToMessage",page:"scan",scene:this.dwFromMap[this.qrCodeBindFrom]})):(this.onDwEvent("realname_dialog",{action:"show",page:"scan",scene:this.dwFromMap[this.qrCodeBindFrom]}),this.onDwEvent("realname_dialog",{action:"click",type:"switchToScan",page:"message",scene:this.dwFromMap[this.qrCodeBindFrom]})),this.qrCodeStatus&&!this.thirdPartCookies&&(this.$emit("close"),window.open(this.url)),this.qrCodeStatus=!this.qrCodeStatus},onQrCodeBindSuccess:function(){this.bindSuccessed=!0,this.$emit("close","ok"),this.callbackFun(),this.onSuccess()}},install:function(e){e.component(v.name,v)}};t.Z=v},25510:function(e,t,n){var r=n(49200),i=n(24650),o=n.n(i),a=n(28477),s=n.n(a),c=n(80589),l=n(62414),u={docsCorp:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-popover-theme-corp"},[n("div",{staticClass:"popover-body"},[n("span",{staticClass:"popover-body-content"},[e._v(e._s(e.popoverText))]),e._v(" "),n("span",{staticClass:"popover-body-close-btn",on:{click:e.toClose}},[n("k-icon",{attrs:{type:"close"}})],1)]),e._v(" "),n("div",{staticClass:"popover-footer"},[n("span",{on:{click:e.toGuide}},[n("k-button",[e._v(e._s(e.buttonText))])],1)])])},staticRenderFns:[],name:"KPopoverThemeDocsCorp",components:{KIcon:c.default,KButton:l.Z},props:{showClose:{type:Boolean,default:!0},popoverText:{type:String},buttonText:{type:String,default:"关闭"},onGuideClick:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}}},methods:{toGuide:function(){this.onGuideClick(),this.$emit("close")},toClose:function(){this.onClose(),this.$emit("close")}}},insertCorp:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-popover-theme-corp"},[n("div",{staticClass:"popover-body"},[n("span",{staticClass:"popover-body-content"},[e._v(e._s(e.popoverText))]),e._v(" "),n("span",{on:{click:function(t){return e.$emit("close")}}},[n("k-icon",{attrs:{type:"close"}})],1)]),e._v(" "),n("div",{staticClass:"popover-footer"},[n("span",{on:{click:e.toGuide}},[n("k-button",[e._v(e._s(e.buttonText))])],1)])])},staticRenderFns:[],name:"InsertTheme",components:{KIcon:c.default,KButton:l.Z},props:{showClose:{type:Boolean,default:!0},popoverText:{type:String},buttonText:{type:String,default:"关闭"},onGuideClick:{type:Function,default:function(){}}},methods:{toGuide:function(){this.onGuideClick(),this.$emit("close")}}},lightWeight:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-popover-theme-corp"},[n("div",{staticClass:"popover-body"},[n("span",{staticClass:"popover-body-content"},[e._v(e._s(e.popoverText))]),e._v(" "),n("a",{staticClass:"click-btn",on:{click:e.toGuide}},[e._v(e._s(e.buttonText))]),e._v(" "),n("span",{staticClass:"close",on:{click:function(t){return e.$emit("close")}}},[n("k-icon",{attrs:{type:"close"}})],1)])])},staticRenderFns:[],name:"LightWeight",components:{KIcon:c.default},props:{showClose:{type:Boolean,default:!0},popoverText:{type:String},buttonText:{type:String,default:"关闭"},onGuideClick:{type:Function,default:function(){}}},methods:{toGuide:function(){this.onGuideClick(),this.$emit("close")}}}};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-popover"},[e.useNewLayout?n("KdPopover",e._b({ref:"_k_Popover",attrs:{trigger:e.trigger,visibleArrow:e.showArrow,placement:e.placement,popperClass:e.popoverClassName,popperOptions:e.popperOptions,content:e.content,offset:e.offset,tabindex:e.tabindex},on:{show:function(t){return e.$$emit("show")},"after-enter":function(t){return e.$$emit("afterEnter")},hide:function(t){return e.$$emit("hide")},"after-leave":function(t){return e.$$emit("afterLeave")}}},"KdPopover",e.$attrs,!1),[e._t("reference",null,{slot:"reference"}),e._v(" "),e.passThrough?e._t("default",null,{slot:"default"}):e.themeProps?n(e.curTheme,{tag:"component",attrs:{slot:"default",showClose:e.themeProps.showClose,popoverText:e.themeProps.popoverText,buttonText:e.themeProps.buttonText,onGuideClick:e.themeProps.onGuideClick,onClose:e.themeProps.onClose},on:{close:e.close},slot:"default"}):e._e()],2):n("el-popover",e._b({ref:"_k_Popover",attrs:{width:e.width,trigger:e.trigger,visibleArrow:e.showArrow,placement:e.placement,popperClass:e.popoverClassName,popperOptions:e.popperOptions,content:e.content,offset:e.offset,tabindex:e.tabindex},on:{show:function(t){return e.$$emit("show")},"after-enter":function(t){return e.$$emit("afterEnter")},hide:function(t){return e.$$emit("hide")},"after-leave":function(t){return e.$$emit("afterLeave")}},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},"el-popover",e.$attrs,!1),[e._t("reference",null,{slot:"reference"}),e._v(" "),e.passThrough?e._t("default",null,{slot:"default"}):e.themeProps?n(e.curTheme,{tag:"component",attrs:{slot:"default",showClose:e.themeProps.showClose,popoverText:e.themeProps.popoverText,buttonText:e.themeProps.buttonText,onGuideClick:e.themeProps.onGuideClick,onClose:e.themeProps.onClose},on:{close:e.close},slot:"default"}):e._e()],2)],1)},staticRenderFns:[],name:"KPopover",components:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ElPopover:o(),KdPopover:s()},Object.keys(u).reduce((function(e,t){return Object.assign(e,(0,r.Z)({},u[t].name,u[t]))}),{})),model:{prop:"visible",event:"change"},props:{width:{type:[Number,String],default:"280"},visible:{type:Boolean},showArrow:{type:Boolean,default:!0},placement:{type:String},trigger:{type:String,default:"hover"},content:{type:String},offset:{type:Number},tabindex:{type:Number},popperOptions:{type:Object},popoverClassName:{type:String},passThrough:{type:Boolean,default:!1},theme:{type:String,default:""},themeProps:{type:Object,default:function(){}},useNewLayout:{type:Boolean,default:!1}},data:function(){return{visible2:this.visible,themes:u}},computed:{curTheme:function(){return this.theme&&u[this.theme].name},themeClassName:function(){return this.passThrough?"":this.curTheme+"__wrapper"}},watch:{visible2:function(e){this.$emit("change",e)},visible:function(e){e!==this.visible2&&(this.visible2=e)}},mounted:function(){this.themeClassName&&this.$refs._k_Popover&&this.$refs._k_Popover.$refs.popper&&(this.$refs._k_Popover.$refs.popper.className+=" ".concat(this.themeClassName))},methods:{$$emit:function(e){this.$emit(e)},close:function(){this.visible2=!1,this.$emit("change",!1)}}},h={bind:function(e,t,n){n.context.$refs[t.arg].$refs._k_Popover.$refs.reference=e}};p.install=function(e){e.directive("kpopover",h),e.component(p.name,p)},p.directive=h,t.Z=p},34453:function(e,t,n){var r=n(62414),i=n(45821),o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.useNewLayout?n("div",[e._v(e._s(e.lang_txt0))]):n("p",[e._v(e._s(e.lang_txt0))]),e._v(" "),n("div",{staticClass:"footer",class:{"k-company-secure-info_newLayout":e.useNewLayout}},[n("KButton",{on:{click:e.cancel}},[e._v(e._s(e.lang_txt1))]),e._v(" "),n("KButton",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.lang_txt2))])],1)])},staticRenderFns:[],name:"KSecureInfo",components:{KButton:r.Z},props:{entrance:String,ua:String,onSuccessBindPhone:{type:Function,default:function(){}},identifyType:{type:String,default:"phone"},useNewLayout:{type:Boolean,default:!1}},data:function(){return{lang_txt0:(0,i.t)("logic.SecureInfo.txt0"),lang_txt1:(0,i.t)("logic.SecureInfo.txt1"),lang_txt2:(0,i.t)("logic.SecureInfo.txt2")}},methods:{cancel:function(){this.$emit("close")},submit:function(){this.$emit("replace","KPhoneBind",{identifyType:this.identifyType,onSuccess:this.onSuccessBindPhone})}},install:function(e){e.component(o.name,o)}};t.Z=o},43819:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(62414),s=n(47189),c=n(85476),l=n(45821),u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"secure-phone-dialog-content"},[n("p",{staticClass:"title"},[e._v(e._s(e.lang_txt0)+e._s(e.phone)+e._s(e.lang_txt1))]),e._v(" "),n("el-form",{ref:"form",staticClass:"input",attrs:{model:e.form,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{placeholder:e.lang_txt2},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}},[n("el-button",{style:0===e.countDown?{color:"#2E68F8"}:{},attrs:{slot:"append"},on:{click:e.sendCode},slot:"append"},[e._v(e._s(0===e.countDown?e.lang_txt3:e.lang_txt4+"("+e.countDown+")"))])],1)],1)],1),e._v(" "),n("div",{staticClass:"footer"},[n("KButton",{on:{click:e.cancel}},[e._v(e._s(e.lang_txt5))]),e._v(" "),n("KButton",{attrs:{type:"primary",disabled:e.loading},on:{click:e.onSubmit}},[e._v(e._s(e.lang_txt6))])],1)],1)},staticRenderFns:[],name:"KSecurePhoneCheck",components:{KButton:a.Z},props:{onOk:{type:Function,default:function(){}},phone:{type:String},cancel:{type:Function}},data:function(){return{form:{code:""},rules:{code:[{required:!0,message:(0,l.t)("logic.SecurePhoneCheck.txt7"),trigger:"blur"}]},countDown:0,loading:!1,lang_txt0:(0,l.t)("logic.SecurePhoneCheck.txt0"),lang_txt1:(0,l.t)("logic.SecurePhoneCheck.txt1"),lang_txt2:(0,l.t)("logic.SecurePhoneCheck.txt2"),lang_txt3:(0,l.t)("logic.SecurePhoneCheck.txt3"),lang_txt4:(0,l.t)("logic.SecurePhoneCheck.txt4"),lang_txt5:(0,l.t)("logic.SecurePhoneCheck.txt5"),lang_txt6:(0,l.t)("logic.SecurePhoneCheck.txt6")}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},methods:{sendCode:function(){var e=this;return(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.countDown>0)){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,s.Q6)({host:"account",action:"verify",CHECK_JUMP:"JUMP"});case 6:e.countDown=59,e.timer=setInterval((function(){e.countDown>0?e.countDown--:clearInterval(e.timer)}),1e3),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,c.x2)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=(0,r.Z)(o().mark((function t(n){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return r=e.form,i=r.code,t.prev=4,t.next=7,(0,s.uoE)({CHECK_JUMP:"JUMP",smscode:i,host:"account"});case 7:e.onOk({code:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),(0,c.x2)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}())}},install:function(e){e.component(u.name,u)}};t.Z=u},91341:function(e,t,n){var r=n(48970),i=n.n(r),o=n(28152),a=n.n(o),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.useNewLayout?n("KDSwitch",e._g(e._b({model:{value:e.$attrs.value,callback:function(t){e.$set(e.$attrs,"value",t)},expression:"$attrs.value"}},"KDSwitch",e.$attrs,!1),e.$listeners)):n("ElSwitch",e._g(e._b({},"ElSwitch",e.$attrs,!1),e.$listeners))},staticRenderFns:[],name:"KSwitch",inheritAttrs:!1,components:{ElSwitch:i(),KDSwitch:a()},props:{useNewLayout:{type:Boolean,default:!1}},computed:{kdType:function(){return"normal"===this.type?void 0:this.type}},install:function(e){e.component(s.name,s)}};t.Z=s},70485:function(e,t){var n={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-delete-or-exit-tips-container"},[n("div",{staticClass:"k-delete-or-exit-tips-container-title"},[e._v(e._s(e.title))]),e._v(" "),e._l(e.tipsList,(function(t,r){return n("div",{key:r,staticClass:"k-delete-or-exit-tips-container-item"},[e._m(0,!0),e._v(" "),n("div",{staticClass:"k-delete-or-exit-tips-container-item-content"},[e._v(e._s(t))])])})),e._v(" "),e.warning?n("div",{staticClass:"k-delete-or-exit-tips-container-warning"},[e._v("\n    "+e._s(e.warning)+"\n  ")]):e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"k-delete-or-exit-tips-container-item-dot"},[t("i",{staticClass:"k-delete-or-exit-tips-container-item-dot-circle"})])}],name:"KTeamDeleteExitTransferTips",props:{title:{type:String,default:""},tipsList:{type:Array,default:function(){return[]}},warning:{type:String,default:""}},install:function(e){e.component(n.name,n)}};t.Z=n},95671:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(47189),s=n(62414),c=n(45821),l=n(70485),u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"transfer-team-comfirm-container"},[n("div",{staticClass:"transfer-team-comfirm-content"},[n("div",[e._v("\n      "+e._s(e.lang_txt0)+" "),n("span",[e._v(e._s(e.member.name))])]),e._v(" "),e.isEntGroup?[e._v("\n      "+e._s(e.lang_txt1)+"\n    ")]:[n("KTeamDeleteExitTransferTips",{attrs:{title:e.lang_txt7,tipsList:[e.lang_txt8,e.lang_txt9]}})]],2),e._v(" "),n("div",{staticClass:"footer transfer-team-comfirm-footer"},[n("KButton",{on:{click:e.onClose}},[e._v(e._s(e.lang_txt2))]),e._v(" "),n("KButton",{attrs:{type:"primary"},on:{click:e.onCommit}},[e._v(e._s(e.lang_txt3))])],1)])},staticRenderFns:[],name:"KTransferTeamComfirm",components:{KButton:s.Z,KTeamDeleteExitTransferTips:l.Z},props:{onTransfer:{type:Function},backToPrev:{type:Boolean,default:!1},currentTeam:{type:Object},member:{type:Object},isEntGroup:{type:Boolean,default:!0}},data:function(){return{lang_txt0:(0,c.t)("logic.TransferTeamComfirm.txt0"),lang_txt1:(0,c.t)("logic.TransferTeamComfirm.txt1"),lang_txt2:(0,c.t)("logic.TransferTeamComfirm.txt2"),lang_txt3:(0,c.t)("logic.TransferTeamComfirm.txt3"),lang_txt7:(0,c.t)("logic.TransferTeamComfirm.txt7"),lang_txt8:(0,c.t)("logic.TransferTeamComfirm.txt8"),lang_txt9:(0,c.t)("logic.TransferTeamComfirm.txt9")}},methods:{onClose:function(){this.$emit("close")},onCommit:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.currentTeam.id,r=e.member.userid,t.prev=2,!n||!r){t.next=15;break}if(!e.isEntGroup){t.next=9;break}return t.next=7,(0,a.udw)(n,r);case 7:t.next=11;break;case 9:return t.next=11,(0,a.Ufv)(n,r);case 11:e.$message.success((0,c.t)("logic.TransferTeamComfirm.txt4")),e.$emit("propsChange",{terminal:!0}),e.backToPrev&&e.onClose(),setTimeout((function(){e.onTransfer()}),10);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),(i=t.t0.response&&t.t0.response.data||{}).result&&(s=i.msg||i.result,"notGroupMember"===i.result?s=(0,c.t)("logic.TransferTeamComfirm.txt5"):"toAcceptUserAsOwnerForbidden"===i.result&&(s=(0,c.t)("logic.TransferTeamComfirm.txt6")),e.$message.error(s));case 21:case"end":return t.stop()}}),t,null,[[2,17]])})))()}},install:function(e){e.component(u.name,u)}};t.Z=u},24431:function(e,t,n){var r=n(74114),i=n(45821),o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("KMemberSelector",{attrs:{onSubmit:e.onSubmit,disableIds:e.filterIds,entrance:e.entrance,onCancel:e.onClose,memberRoleType:e.memberRoleType,rightTitle:e.rightTitle,emptyInfo:e.emptyInfo,emptySearchInfo:e.emptySearchInfo,showNextHeader:!1,showInfoCard:!1,single:!0}})],1)},staticRenderFns:[],name:"KTransferTeamMembers",components:{KMemberSelector:r.Z},props:{source:{type:String,default:"groupMembers"},emptySearchInfo:{type:String,default:(0,i.t)("logic.TransferTeamMembers.txt0")},emptyInfo:{type:String,default:(0,i.t)("logic.TransferTeamMembers.txt0")},user:{type:Object},cid:{type:String},currentTeam:{type:Object},hiddenIds:{type:Array},onTransfer:{type:Function},backToPrev:{type:Boolean},isEntGroup:{type:Boolean,default:!0}},data:function(){return{rightTitle:(0,i.t)("logic.TransferTeamMembers.txt1"),memberRoleType:"admin,manager,member,read_member",filterIds:[]}},computed:{entrance:function(){return{eType:"team",id:this.currentTeam.id}}},mounted:function(){this.filterIds.push(this.user.id)},methods:{onClose:function(){this.$emit("close")},onSubmit:function(e){var t=e.users;1===t.length&&this.$emit("change","KTransferTeamComfirm",{isEntGroup:this.isEntGroup,member:t[0],currentTeam:this.currentTeam,onTransfer:this.onTransfer,backToPrev:this.backToPrev})}},install:function(e){e.component(o.name,o)}};t.Z=o},95953:function(e,t,n){n.r(t);var r=n(49200),i=n(45821),o=n(85476);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("kuc-member-selector",e._b({},"kuc-member-selector",e.NewMemberSelectorParams,!1))},staticRenderFns:[],name:"UikitMemberSelector",components:{KucMemberSelector:function(){return Promise.all([n.e(1820),n.e(7255),n.e(667),n.e(5835),n.e(6704),n.e(1626),n.e(9765),n.e(6861),n.e(3420),n.e(6571)]).then(n.bind(n,27248))}},mixins:[n(65260).Z],props:{selectorProps:{type:Object,default:function(){}},company:{type:Object,default:function(){}},indexGroupId:{type:Number,default:0},groupShareRange:{type:String,default:""},coopContainAssociatedOrg:{type:Boolean,default:!1},groupShareReason:{type:String,default:""},cooperateGroupPolicy:{type:Boolean,default:!1},command:{type:String,default:""},isSecureGroup:{type:Boolean,default:!1}},computed:{NewMemberSelectorParams:function(){var e=this,t=this.selectorProps.remindCheckSupportType||["user"],n=null;this.selectorProps.onAddContactParams&&(n=this.toAdd);var r=(0,i.t)("logic.TeamSettings.txt15"),o=(0,i.t)("logic.AddEntMember.txt7"),a=s(s({},this.selectorProps.idCardProps),{},{onAdd:function(t){return e.toSendInvitation(t)}}),c=this.selectorProps.sources;return this.cooperateGroupPolicy&&this.indexGroupId!==this.selectorProps.sources.id&&"TRANSFER_TEAM"!==this.command&&c.push({type:"association",deptSelectable:!1}),s(s({sources:c,onAddContactClick:n,onPhoneLeanClick:n,_from:"kdocs",_function:"newMemberSelector",emptyTitle:r,emptySearchTitle:o,remindCheckSupportType:t},this.selectorProps),{},{idCardProps:a,checkIsDisabledMethod:this.checkIsDisabledMethod,getDisabledTipsMethod:this.getDisabledTipsMethod})}},methods:{toAdd:function(){var e=this.selectorProps.onAddContactParams,t=e.defaultPhone,n=e.source,r=e.addedCoopMembers,i=e.updateLink,o=e.isClink;this.$emit("change","KAddRecommendContact",{backprev:!0,defaultPhone:t,source:n,isClink:o,addedCoopMembers:r,onUpdateLink:i,onSendSuccess:this.onSendInvitationSuccess})},toSendInvitation:function(e){var t=this;o.F3.closeCurPopover();var n=this.selectorProps.user;this.$emit("change","KSendAddContactInvitation",{name:n.nickname||n.shortName||n.name,targetId:e.userid,targetName:e.nickname,targetAvatar:e.avatar,onCancel:function(){t.$emit("close")},onSuccess:function(){t.$emit("close")}})}},install:function(e){e.component(c.name,c)}};t.default=c},7787:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(47189),s={data:function(){return{groupShareRange:"",groupShareReason:"",cooperateGroupPolicy:!1,indexGroupId:0,coopContainAssociatedOrg:!1}},computed:{currentTeamCompanyId:function(){var e;return null===(e=this.currentTeam)||void 0===e?void 0:e.corpid},userCompanyId:function(){var e,t;return(null===(e=this.user)||void 0===e?void 0:e.companyid)||(null===(t=this.user)||void 0===t||null===(t=t.corp)||void 0===t?void 0:t.id)},isEnt:function(){return this.currentTeamCompanyId>0||this.userCompanyId>0}},methods:{getCooperateGroupPolicy:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.currentTeamCompanyId||e.userCompanyId,t.next=3,(0,a.SPt)({window_key:"external_group",company_id:r});case 3:i=t.sent,(null==(s=i.data)||null===(n=s.data)||void 0===n?void 0:n.length)>0&&(e.cooperateGroupPolicy=!0);case 6:case"end":return t.stop()}}),t)})))()},getIndexGroupId:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.arg)(e.user.companyid);case 2:n=t.sent,r=n.data,e.indexGroupId=r.group_id;case 5:case"end":return t.stop()}}),t)})))()},getGroupShareRangeValue:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.hh1)(e.currentTeam.id);case 2:r=t.sent,e.groupShareRange=r.data.range.value,e.coopContainAssociatedOrg=(null===(n=r.data.range)||void 0===n?void 0:n.contain_associated_org)||!1,e.groupShareReason=r.data.reason;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isEnt){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.getCooperateGroupPolicy();case 4:return t.next=6,e.getIndexGroupId();case 6:if(t.t0=null===(n=e.currentTeam)||void 0===n?void 0:n.id,!t.t0){t.next=10;break}return t.next=10,e.getGroupShareRangeValue();case 10:case"end":return t.stop()}}),t)})))()}};t.Z=s}}]);
