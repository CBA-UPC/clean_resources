!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app-compat"),require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app-compat","@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase,e.firebase.INTERNAL.modularAPIs)}(this,function(Bt,qt){"use strict";try{!(function(){ar t=e(Bt);ass i{reate(e,...t){var i,n=t[0]||{},a=`${this.service}/${e}`,r=this.errors[e],r=r?(i=n,r.replace(s,):"Error",r=`${this.serviceName}: ${r} (${a}).`;return new o(a,r,n)}}const s=/\{\$([^}]+)}/g; g(e){this._index=e}unction w(e){this._store=e}_index",["name","keyPath","multiEntry","unique"]),d(g,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),f(g,"_index",IDBIndex,["openCursor","openKeyCursor"]),p(h,"_cursor",["direction","key","primaryKey","value"]),d(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(,w.prototype.createIndex=function(){return new g(this._store.createIndex.apply(this._store,arguments))},w.prototype.index=function(){return new g(this._store.index.apply(this._store,arguments))},p(w,"_store",["name","keyPath","indexNames","autoIncrement"]),d(w,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),f(w,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),l(w,"_store",IDBObjectStore,["deleteIndex"]),m.prototype.objectStore=function(){return new w(this._tx.objectStore.apply(this._tx,arguments))},p(m,"_tx",["objectStoreNames","mode"]),l(m,"_tx",IDBTransaction,["abort"]),y.prototype.createObjectStore=function(){return new w(this._db.createObjectStore.apply(this._db,arguments))},p(y,"_db",["name","version","objectStoreNames"]),l(y,"_db",IDBDatabase,["deleteObjectStore","close"]),b.prototype.transaction=p(b,"_db",["name","version","objectStoreNames"]),l(b,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(,[g,w].forEach(;var I="@firebase/installations",S="0.5.4";const T=1e4,_=`w:${S}`,C="FIS_v2",j="https://firebaseinstallations.googleapis.com/v1",O=36e5;var D,P,A,E,K;const M=new i("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});unction x({projectId:e}){return`${j}/projects/${e}/installations`}ction q(e,{refreshToken:t}){const n=B(e);return n.append("Authorization",(t=t,`${C} ${t}`)),n}async function L(e){var t=await e();return 500<=t.status&&t.status<600?e():t}onst R=/^[cdef][\w-]{21}$/,H="";function W(){try{const t=new Uint8Array(17),n=self.crypto||self.msCrypto;n.getRandomValues(t),t[0]=112+t[0]%16;var e=t);return R.test(e)?e:H}catch(e){return H}}onst G=new Map;function J(e,t){var n=U(e);z(n,t),function(e,t){const n=function(){!Y&&"BroadcastChannel"in self&&(Y=new BroadcastChannel("[Firebase] FID Change"),Y.onmessage=;return Y}();n&&n.postMessage({key:e,fid:t});0===G.size&&Y&&(Y.close(),Y=null)}(n,t)}et Y=null;const Q="firebase-installations-store";let Z=null;function X(){return Z=Z||v("firebase-installations-database",1,e=>{0===e.oldVersion&&e.createObjectStore(Q)}),Z}async function ee(e,t){var n=U(e);const i=await X(),a=i.transaction(Q,"readwrite"),r=a.objectStore(Q);var o=await r.get(n);return await r.put(t,n),await a.complete,o&&o.fid===t.fid||J(e,t.fid),t}async function te(e){var t=U(e);const n=await X(),i=n.transaction(Q,"readwrite");await i.objectStore(Q).delete(t),await i.complete}async function ne(e,t){var n=U(e);const i=await X(),a=i.transaction(Q,"readwrite"),r=a.objectStore(Q);var o=await r.get(n),s=t(o);return void 0===s?await r.delete(n):await r.put(s,n),await a.complete,!s||o&&o.fid===s.fid||J(e,s.fid),s}async function ie(n){let i;var e=await ne(n,e=>{var t=re(e||{fid:W(),registrationStatus:0}),t=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:async function(e){let t=await ae(e);for(;1===t.registrationStatus;)await V(100),t=await ae(e);if(0!==t.registrationStatus)return t;{var{installationEntry:n,registrationPromise:i}=await ie(e);return i||n}}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(M.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(t,n){try{var e=await async function(e,{fid:t}){const n=x(e);var i=B(e),a={fid:t,authVersion:C,appId:e.appId,sdkVersion:_};const r={method:"POST",headers:i,body:JSON.stringify(a)},o=await L(()=>fetch(n,r));if(o.ok){a=await o.json();return{fid:a.fid||t,registrationStatus:2,refreshToken:a.refreshToken,authToken:$(a.authToken)}}throw await F("Create Installation",o)}(t,n);return ee(t,e)}catch(e){throw N(e)&&409===e.customData.serverCode?await te(t):await ee(t,{fid:n.fid,registrationStatus:0}),e}}(e,i);return{installationEntry:i,registrationPromise:n}}}(n,t);return i=t.registrationPromise,t.installationEntry});return e.fid===H?{installationEntry:await i}:{installationEntry:e,registrationPromise:i}}ync function oe({appConfig:e,platformLoggerProvider:t},n){const i=([a,r]=[e,n["fid"]],`${x(a)}/${r}/authTokens:generate`);var a,r;const o=q(e,n),s=t.getImmediate({optional:!0});s&&o.append("x-firebase-client",s.getPlatformInfoString());var c={installation:{sdkVersion:_}};const u={method:"POST",headers:o,body:JSON.stringify(c)},p=await L(;if(p.ok)return $(await p.json());throw await F("Generate Auth Token",p)}async function se(i,a=!1){let r;var e=await ne(i.appConfig,e=>{if(!ue(e))throw M.create("not-registered");var t,n=e.authToken;if(a||2!==(t=n).requestStatus||t)){if(1===n.requestStatus)return r=i,a),e;if(!navigator.onLine)throw M.create("app-offline");n=(t=e,n={requestStatus:1,requestTime:Date.now()},Object.assign(Object.assign({},t),{authToken:n}));return r=async function(t,n){try{var i=await oe(t,n),e=Object.assign(Object.assign({},n),{authToken:i});return await ee(t.appConfig,e),i}catch(e){throw!N(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(i=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),await ee(t.appConfig,i)):await te(t.appConfig),e}}(i,n),n}return e});return r?await r:e.authToken}function ce(e){return ne(e,e=>{if(!ue(e))throw M.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+T<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}sync function pe(e,t=!1){var n,i=e;return e=i.appConfig,await((n=(await ie(e)).registrationPromise)&&await n),(await se(i,t)).token}function de(e){return M.create("missing-app-config-values",{valueName:e})}const le="installations",fe=e=>{var t=e.getProvider("app").getImmediate();return{app:t,appConfig:t),platformLoggerProvider:qt._getProvider(t,"platform-logger"),_delete:},ge=e=>{var t=e.getProvider("app").getImmediate();const n=qt._getProvider(t,le).getImmediate();return{getId:()=>async function(e){var t=e;const{installationEntry:n,registrationPromise:i}=await ie(t.appConfig);return(i||se(t)).catch(console.error),n.fid}(n),getToken:e=>pe(n,e)}};qt._registerComponent(new r(le,fe,"PUBLIC")),qt._registerComponent(new r("installations-internal",ge,"PRIVATE")),qt.registerVersion(I,S),qt.registerVersion(I,S,"esm2017");const he="/firebase-messaging-sw.js",we="/firebase-cloud-messaging-push-scope",me="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ye="https://fcmregistrations.googleapis.com/v1",be="google.c.a.c_id",ve="google.c.a.e";function ke(e){var t=new Uint8Array(e);const n=btoa(String.fromCharCode(...t));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(D=K=K||{})[D.DATA_MESSAGE=1]="DATA_MESSAGE",D[D.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",(K=P=P||{}).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked";const Ie="fcm_token_details_db",Se="fcm_token_object_Store";async function Te(r){if("databases"in indexedDB){const t=await indexedDB.databases(),n=t.map(e=>e.name);if(!n.includes(Ie))return null}let o=null;const e=await v(Ie,5,async e=>{var t;if(!(e.oldVersion<2)&&e.objectStoreNames.contains(Se)){const a=e.transaction.objectStore(Se);var n,i=await a.index("fcmSenderId").get(r);await a.clear(),i&&(2===e.oldVersion?(n=i).auth&&n.p256dh&&n.endpoint&&(o={token:n.fcmToken,createTime:null!==(t=n.createTime)&&void 0!==t?t:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:ke(n.vapidKey)}}):3===e.oldVersion?(n=i,o={token:n.fcmToken,createTime:n.createTime,subscriptionOptions:{auth:ke(n.auth),p256dh:ke(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:ke(n.vapidKey)}}):4===e.oldVersion&&(i=i,o={token:i.fcmToken,createTime:i.createTime,subscriptionOptions:{auth:ke(i.auth),p256dh:ke(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:ke(i.vapidKey)}}))}});return e.close(),await k(Ie),await k("fcm_vapid_details_db"),await k("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;var t=e["subscriptionOptions"];return"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(o)?o:null}const _e="firebase-messaging-database",Ce=1,je="firebase-messaging-store";let Oe=null;function De(){return Oe=Oe||v(_e,Ce,e=>{0===e.oldVersion&&e.createObjectStore(je)}),Oe}async function Pe(e){var t=Ee(e);const n=await De();t=await n.transaction(je).objectStore(je).get(t);if(t)return t;t=await Te(e.appConfig.senderId);return t?(await Ae(e,t),t):void 0}async function Ae(e,t){var n=Ee(e);const i=await De(),a=i.transaction(je,"readwrite");return await a.objectStore(je).put(t,n),await a.complete,t}function Ee({appConfig:e}){return e.appId}const Ke=new i("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function Me(e,t){var n={method:"DELETE",headers:await xe(e)};try{const r=await fetch(`${Ne(e.appConfig)}/${t}`,n);var i=await r.json();if(i.error){var a=i.error.message;throw Ke.create("token-unsubscribe-failed",{errorInfo:a})}}catch(e){throw Ke.create("token-unsubscribe-failed",{errorInfo:e})}}function Ne({projectId:e}){return`${ye}/projects/${e}/registrations`}async function xe({appConfig:e,installations:t}){var n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function $e({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const a={web:{endpoint:n,auth:t,p256dh:e}};return i!==me&&(a.web.applicationPubKey=i),a}const Fe=6048e5;async function Be(e){const t=await async function(e,t){var n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const n=atob(t),i=new Uint8Array(n.length);for(let a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i}(t)})}(e.swRegistration,e.vapidKey);var n,i,a,r,o,s={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ke(t.getKey("auth")),p256dh:ke(t.getKey("p256dh"))},c=await Pe(e.firebaseDependencies);if(c){if(n=c.subscriptionOptions,i=s.vapidKey===n.vapidKey,a=s.endpoint===n.endpoint,r=s.auth===n.auth,o=s.p256dh===n.p256dh,i&&a&&r&&o)return Date.now()>=c.createTime+Fe?async function(t,e){try{var n=await async function(e,t){var n=await xe(e),i=$e(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(i)};let a;try{const r=await fetch(`${Ne(e.appConfig)}/${t.token}`,i);a=await r.json()}catch(e){throw Ke.create("token-update-failed",{errorInfo:e})}if(a.error){i=a.error.message;throw Ke.create("token-update-failed",{errorInfo:i})}if(!a.token)throw Ke.create("token-update-no-token");return a.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Ae(t.firebaseDependencies,i),n}catch(e){throw await qe(t),e}}(e,{token:c.token,createTime:Date.now(),subscriptionOptions:s}):c.token;try{await Me(e.firebaseDependencies,c.token)}catch(e){console.warn(e)}return Le(e.firebaseDependencies,s)}return Le(e.firebaseDependencies,s)}async function qe(e){var t=await Pe(e.firebaseDependencies);t&&(await Me(e.firebaseDependencies,t.token),await async function(e){var t=Ee(e);const n=await De(),i=n.transaction(je,"readwrite");await i.objectStore(je).delete(t),await i.complete}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function Le(e,t){var n={token:await async function(e,t){var n=await xe(e),i=$e(t),i={method:"POST",headers:n,body:JSON.stringify(i)};let a;try{const r=await fetch(Ne(e.appConfig),i);a=await r.json()}catch(e){throw Ke.create("token-subscribe-failed",{errorInfo:e})}if(a.error){i=a.error.message;throw Ke.create("token-subscribe-failed",{errorInfo:i})}if(!a.token)throw Ke.create("token-subscribe-no-token");return a.token}(e,t),createTime:Date.now(),subscriptionOptions:t};return await Ae(e,n),n.token}function Ve(e){var t,n,i,a={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return n=a,(t=e).notification&&(n.notification={},(i=t.notification.title)&&(n.notification.title=i),(i=t.notification.body)&&(n.notification.body=i),(i=t.notification.image)&&(n.notification.image=i)),t=a,(n=e).data&&(t.data=n.data),n=a,(e=e).fcmOptions&&(n.fcmOptions={},(i=e.fcmOptions.link)&&(n.fcmOptions.link=i),(i=e.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=i)),a}function Re(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function He(e){return Ke.create("missing-app-config-values",{valueName:e})}Re("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Re("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class We{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw He("App Configuration Object");if(!e.name)throw He("App Name");var t=e["options"];for(const n of["projectId","apiKey","appId","messagingSenderId"])if(!t[n])throw He(n);return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Ue(e){try{e.swRegistration=await navigator.serviceWorker.register(he,{scope:we}),e.swRegistration.update().catch(}catch(e){throw Ke.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}async function Ge(e,t){if(!navigator)throw Ke.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Ke.create("permission-blocked");var n,i;return n=e,await((i=null==t?void 0:t.vapidKey)?n.vapidKey=i:n.vapidKey||(n.vapidKey=me)),await e,null==t?void 0:t.serviceWorkerRegistration),Be(e)}async function Je(e,t,n){var i=t);const a=await e.firebaseDependencies.analyticsProvider.get();a.logEvent(i,{message_id:n[be],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function ze(e,t){var n,i=t.data;i.isFirebaseMessaging&&(e.onMessageHandler&&i.messageType===P.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(Ve(i)):e.onMessageHandler.next(Ve(i))),n=i.data,"object"==typeof(t=n)&&t&&be in t&&"1"===n[ve]&&await Je(e,i.messageType,n))}const Ye="@firebase/messaging",Qe=Ze=function Xe(e){return e=a(e))}t._registerComponent(new r("messaging",Qe,"PUBLIC")),qt._registerComponent(new r("messaging-internal",Ze,"PRIVATE")),qt.registerVersion(Ye,"0.9.4"),qt.registerVersion(Ye,"0.9.4","esm2017");const tt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nt="https://fcmregistrations.googleapis.com/v1",it="FCM_MSG",at="google.c.a.c_id",rt=3,ot=1;function st(e){var t=new Uint8Array(e);const n=btoa(String.fromCharCode(...t));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(K=A=A||{})[K.DATA_MESSAGE=1]="DATA_MESSAGE",K[K.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",(K=E=E||{}).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked";const ct="fcm_token_details_db",ut="fcm_token_object_Store";async function pt(r){if("databases"in indexedDB){const t=await indexedDB.databases(),n=t.map(;if(!n.includes(ct))return null}let o=null;const e=await v(ct,5,async e=>{var t;if(!(e.oldVersion<2)&&e.objectStoreNames.contains(ut)){const a=e.transaction.objectStore(ut);var n,i=await a.index("fcmSenderId").get(r);await a.clear(),i&&(2===e.oldVersion?(n=i).auth&&n.p256dh&&n.endpoint&&(o={token:n.fcmToken,createTime:null!==(t=n.createTime)&&void 0!==t?t:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:st(n.vapidKey)}}):3===e.oldVersion?(n=i,o={token:n.fcmToken,createTime:n.createTime,subscriptionOptions:{auth:st(n.auth),p256dh:st(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:st(n.vapidKey)}}):4===e.oldVersion&&(i=i,o={token:i.fcmToken,createTime:i.createTime,subscriptionOptions:{auth:st(i.auth),p256dh:st(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:st(i.vapidKey)}}))}});return e.close(),await k(ct),await k("fcm_vapid_details_db"),await k("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;var t=e["subscriptionOptions"];return"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(o)?o:null}const dt="firebase-messaging-database",lt=1,ft="firebase-messaging-store";let gt=null;function ht(){return gt=gt||v(dt,lt,,gt}async function wt(e){var t=yt(e);const n=await ht();t=await n.transaction(ft).objectStore(ft).get(t);if(t)return t;t=await pt(e.appConfig.senderId);return t?(await mt(e,t),t):void 0}async function mt(e,t){var n=yt(e);const i=await ht(),a=i.transaction(ft,"readwrite");return await a.objectStore(ft).put(t,n),await a.complete,t}onst bt=new i("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function vt(e,t){var n={method:"DELETE",headers:await It(e)};try{const r=await fetch(`${kt(e.appConfig)}/${t}`,n);var i=await r.json();if(i.error){var a=i.error.message;throw bt.create("token-unsubscribe-failed",{errorInfo:a})}}catch(e){throw bt.create("token-unsubscribe-failed",{errorInfo:e})}}nc function Tt(e){const t=await async function(e,t){var n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const n=atob(t),i=new Uint8Array(n.length);for(let a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i}(t)})}(e.swRegistration,e.vapidKey);var n,i,a,r,o,s={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:st(t.getKey("auth")),p256dh:st(t.getKey("p256dh"))},c=await wt(e.firebaseDependencies);if(c){if(n=c.subscriptionOptions,i=s.vapidKey===n.vapidKey,a=s.endpoint===n.endpoint,r=s.auth===n.auth,o=s.p256dh===n.p256dh,i&&a&&r&&o)return Date.now()>=c.createTime+6048e5?async function(t,e){try{var n=await async function(e,t){var n=await It(e),i=St(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(i)};let a;try{const r=await fetch(`${kt(e.appConfig)}/${t.token}`,i);a=await r.json()}catch(e){throw bt.create("token-update-failed",{errorInfo:e})}if(a.error){i=a.error.message;throw bt.create("token-update-failed",{errorInfo:i})}if(!a.token)throw bt.create("token-update-no-token");return a.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await mt(t.firebaseDependencies,i),n}catch(e){throw await _t(t),e}}(e,{token:c.token,createTime:Date.now(),subscriptionOptions:s}):c.token;try{await vt(e.firebaseDependencies,c.token)}catch(e){console.warn(e)}return Ct(e.firebaseDependencies,s)}return Ct(e.firebaseDependencies,s)}async function _t(e){var t=await wt(e.firebaseDependencies);t&&(await vt(e.firebaseDependencies,t.token),await async function(e){var t=yt(e);const n=await ht(),i=n.transaction(ft,"readwrite");await i.objectStore(ft).delete(t),await i.complete}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function Ct(e,t){var n={token:await async function(e,t){var n=await It(e),i=St(t),i={method:"POST",headers:n,body:JSON.stringify(i)};let a;try{const r=await fetch(kt(e.appConfig),i);a=await r.json()}catch(e){throw bt.create("token-subscribe-failed",{errorInfo:e})}if(a.error){i=a.error.message;throw bt.create("token-subscribe-failed",{errorInfo:i})}if(!a.token)throw bt.create("token-subscribe-no-token");return a.token}(e,t),createTime:Date.now(),subscriptionOptions:t};return await mt(e,n),n.token}async function jt(e,t){var n=function(e,t){var n;const i={};e.from&&(i.project_number=e.from);e.fcm_message_id&&(i.message_id=e.fcm_message_id);i.instance_id=t,e.notification?i.message_type=A.DISPLAY_NOTIFICATION.toString():i.message_type=A.DATA_MESSAGE.toString();i.sdk_platform=rt.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(i.collapse_key=e.collapse_key);i.event=ot.toString(),null!==(n=e.fcmOptions)&&void 0!==n&&n.analytics_label&&(i.analytics_label=null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label);return i}(t,await e.firebaseDependencies.installations.getId());!e,n)}sync function Dt(e,t){var n=e);if(n){t.deliveryMetricsExportedToBigQueryEnabled&&await jt(t,n);var i,a,r=await At();if(r.some()return r,n);n.notification&&await function(e){var t=e["actions"],n=Notification["maxActions"];t&&n&&t.length>n&&console.warn(`This browser only supports ${n} actions. The remaining actions will not be displayed.`);return self.registration.showNotification(null!==(n=e.title)&&void 0!==n?n:"",e)}(n)),t&&t.onBackgroundMessageHandler&&(r={from:(i=n).from,collapseKey:i.collapse_key,messageId:i.fcm_message_id},n=r,(e=i).notification&&(n.notification={},(a=e.notification.title)&&(n.notification.title=a),(a=e.notification.body)&&(n.notification.body=a),(a=e.notification.image)&&(n.notification.image=a)),e=r,(n=i).data&&(e.data=n.data),n=r,(i=i).fcmOptions&&(n.fcmOptions={},(a=i.fcmOptions.link)&&(n.fcmOptions.link=a),(a=i.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=a)),r=r,"function"==typeof t.onBackgroundMessageHandler?t.onBackgroundMessageHandler(r):t.onBackgroundMessageHandler.next(r))}}async function Pt(e){const t=null===(r=null===(a=e.notification)||void 0===a?void 0:a.data)||void 0===r?void 0:r[it];if(t&&!e.action){e.stopImmediatePropagation(),e.notification.close();var n=function(e){var t;var n=null!==(t=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==t?t:null===(n=e.notification)||void 0===n?void 0:n.click_action;if(n)return n;return function(e){return"object"==typeof e&&e&&at in e}(e.data)?self.location.origin:null}(t);if(n){var i,a=new URL(n,self.location.href),r=new URL(self.location.origin);if(a.host===r.host){let e=await a);if(e?e=await e.focus():(e=await self.clients.openWindow(n),i=3e3,await new Promise(),e)return t.messageType=E.NOTIFICATION_CLICKED,t.isFirebaseMessaging=!0,e.postMessage(t)}}}}("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ot("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kt{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw Et("App Configuration Object");if(!e.name)throw Et("App Name");var t=e["options"];for(const n of["projectId","apiKey","appId","messagingSenderId"])if(!t[n])throw Et(n);return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}const Mt=e=>{const t=new Kt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",,self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(async function(e,t){var n;(n=e["newSubscription"])?(n=await wt(t.firebaseDependencies),await _t(t),t.vapidKey=null!==(n=null===(n=null==n?void 0:n.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:tt,await Tt(t)):await _t(t)}(e,t))}),self.addEventListener("notificationclick",,t};function Nt(e,t){return e=a(e),t)}qt._registerComponent(new r("messaging-sw",Mt,"PUBLIC"));class xt{sync getToken(e){return this._delegate,e)}nMessage(e){return et(this._delegate,e)}const $t=Ft={isSupported:function(){return self&&"ServiceWorkerGlobalScope"in self?n()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"undefined"!=typeof window&&n()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}};t.default.INTERNAL.registerComponent(new r("messaging-compat",$t,"PUBLIC").setServiceProps(Ft)),t.default.registerVersion("@firebase/messaging-compat","0.1.4")}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-messaging-compat.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-messaging-compat.js.map
