(()=>{"use strict";window["br_flx_twins_0_9"]=e=>{try{let i=window.googletag;const n=e.templateParams["<PREBID_INSTANCE>"];let s=window[n];const a=e.templateParams["<PREBID_INSTANCE_CONFIG>"],d=window[a],r=(Number(e.templateParams["<REFRESH_RATE>"]),Number(e.templateParams["<ARRAY_INDEX>"]));let l,o,u=!1,c=!1,m=!1;const p={id:e.divId+"_leftAd",adUnit:e.templateParams["<LEFT_TWIN_AD_UNIT>"],apsSlotName:e.templateParams["<LEFT_TWIN_APS_SLOT_NAME>"],fluxDivId:e.templateParams["<LEFT_TWIN_FLUX_DIV_ID>"],grid:1,timeout:0},f={id:e.divId+"_rightAd",adUnit:e.templateParams["<RIGHT_TWIN_AD_UNIT>"],apsSlotName:e.templateParams["<RIGHT_TWIN_APS_SLOT_NAME>"],fluxDivId:e.templateParams["<RIGHT_TWIN_FLUX_DIV_ID>"],grid:2,timeout:0};let g=document.querySelector("#"+e.divId);g.style.left="0",g.style.right="0";let I=document.createElement("div");function _(e,t,i,n){let s=y(t.id,t.grid);e.appendChild(s),N(t,i)}function N(t,n,s){let a=i.defineSlot(t.adUnit,n,t.id).addService(i.pubads()).setCollapseEmptyDiv(!0);e.targeting&&e.targeting.forEach((function(e){a.setTargeting(e.key,e.value)})),t.id.includes("_rightAd")?o=a:t.id.includes("_leftAd")&&(l=a),i.enableServices();let d=[S(t.id,n,t.fluxDivId)];e.amznBidConf&&d.push(E(t.apsSlotName,t.id,n)),Promise.all(d).then((()=>{var n;n=t.id,i.pubads().addEventListener("slotRenderEnded",(t=>{if(t.slot.getSlotElementId()===n&&!m&&T(t,n))return e.callback(t.isEmpty,void 0)})),i.display(t.id),i.pubads().isInitialLoadDisabled()&&i.pubads().refresh([a],{changeCorrelator:!1})}))}function T(e,t){return e.isEmpty?(t.toLowerCase().includes("left")?c=!0:u=!0,!(!c||!u||(c=u=!1,m=!0,0))):(m=!0,!0)}function y(e,t){let i=document.createElement("div");return i.className=e,i.id=e,i.style.display="grid",i.style.gridColumn=t,i}async function E(e,t,i){return new Promise((function(n){window.apstag.fetchBids({slots:[{slotID:t,slotName:e,sizes:i.filter((function(e){return"fluid"!=e}))}]},(function(e){return window.apstag.setDisplayBids(),n()}))}))}async function S(e,t,i){return new Promise((n=>{let a=w(i),d=s.adUnits.some(();s=s||{},s.que=s.que||[],s.que.push((function(){if(!d){let i={code:e,mediaTypes:{banner:{sizes:t.filter(()}},bids:a};s.addAdUnits(i)}s.requestBids({adUnitCodes:[e],auctionId:e,bidsBackHandler:)}))}))}function w(e){if(d&&d.allUnits&&e){let t=d.allUnits[e];if(t){let e,i=t.bids?t.bids:t[r].bids;try{e=JSON.parse(JSON.stringify(i))}catch(t){e=i}return e}}return null}async function h(e){return new Promise((t=>{s.que.push((function(){s.requestBids({adUnitCodes:[e],auctionId:e,bidsBackHandler:)}))}))}function b(t,n,s,a){const d=[h(t)];e.amznBidConf&&d.push(E(s,t,a)),Promise.all(d).then((()=>{e.targeting&&e.targeting.forEach((),n.setTargeting("browsiRefresh",!0),i.pubads().refresh([n],{changeCorrelator:!1})}))}function P(){m=c=u=!1,b(p.id,l,p.apsSlotName,e.spotsSizes),b(f.id,o,f.apsSlotName,e.spotsSizes)}return I.style.display="grid",I.style.gridColumn="span 2",I.style.gridGap="15px",I.style.width="100%",i=i||{cmd:[]},window.apstagLOADED||(t=e.amznBidConf,window.apstag&&window.apstag.init({pubID:t.pubID,adServer:t.adServer,bidTimeout:t.timeout})),i.cmd.push((()=>{_(I,p,e.spotsSizes),_(I,f,e.spotsSizes),g.appendChild(I)})),{refresh:P}}catch(D){console.warn("[BROWSI]: ",D.message)}var t}})();