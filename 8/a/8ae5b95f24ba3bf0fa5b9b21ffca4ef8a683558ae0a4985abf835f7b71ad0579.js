/*! * Snowplow - The world's most powerful web analytics platform
 *
 * @description JavaScript tracker for Snowplow
 * @version     2.9.1
 * @author      Alex Dean, Simon Andersson, Anthon Pang, Fred Blundun, Joshua Beemster
 * @copyright   Anthon Pang, Snowplow Analytics Ltd
 * @license     Simplified BSD
 */
(()({1:[{}],2:[{}],3:[{}],4:[{}],5:[{}],6:[{charenc:2,crypt:3}],7:[{"./lib/core":9}],8:[{}],9:[{"./payload":10,uuid:12}],10:[{"./base64":8}],11:[{}],12:[{"./rng":11}],13:[{"./lib/helpers":18,"./lib_managed/lodash":20}],14:[{"./lib/helpers":18,"./lib_managed/lodash":20}],15:[{"./lib/helpers":18,"./lib_managed/lodash":20}],16:[{"./snowplow":23}],17:[function(b,c,a){(function(){var l=b("../lib_managed/lodash"),k=b("murmurhash").v3,g=b("jstimezonedetect").jstz.determine(),e=b("browser-cookie-lite"),h=typeof a!=="undefined"?a:this,j=window,d=navigator,i=screen,f=document;h.hasSessionStorage=function(){try{return !!j.sessionStorage}catch(m){return true}};h.hasLocalStorage=h.localStorageAccessible=h.hasCookies=h.detectSignature=h.detectTimezone=h.detectViewport=h.detectDocumentSize=h.detectBrowserFeatures=function(o,n){var m,r,t={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},p={};if(d.mimeTypes&&d.mimeTypes.length){for(m in t){if(Object.prototype.hasOwnProperty.call(t,m)){r=d.mimeTypes[t[m]];p[m]=(r&&r.enabledPlugin)?"1":"0"}}}if(d.constructor===window.Navigator&&typeof d.javaEnabled!=="unknown"&&!l.isUndefined(d.javaEnabled)&&d.javaEnabled()){p.java="1"}if(l.isFunction(j.GearsFactory)){p.gears="1"}p.res=i.width+"x"+i.height;p.cd=i.colorDepth;if(o){p.cookie=h.hasCookies(n)}var q={update:function s(){if(typeof window!=="undefined"&&typeof window.addEventListener==="function"){var w=false;var v=Object.defineProperty({},"passive",{get:);var x=window.addEventListener("testPassiveEventSupport",x,v);window.removeEventListener("testPassiveEventSupport",x,v);q.hasSupport=w}}};q.update();if(q.hasSupport===true){p.passive="1"}p.wheel="onwheel" in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";return p}}())},{"../lib_managed/lodash":20,"browser-cookie-lite":1,jstimezonedetect:4,murmurhash:5}],18:[{"../lib_managed/lodash":20,"browser-cookie-lite":1}],19:[{"./helpers":18}],20:[{}],21:[{"./lib/helpers":18,"./lib_managed/lodash":20}],22:[{"./lib/detectors":17,"./lib/helpers":18,"./lib_managed/lodash":20}],23:[{"./in_queue":15,"./lib/helpers":18,"./lib_managed/lodash":20,"./tracker":24,uuid:12}],24:[function(b,c,a){(function(){var q=b("./lib_managed/lodash"),f=b("./lib/helpers"),i=b("./lib/proxies"),g=b("browser-cookie-lite"),n=b("./lib/detectors"),m=b("sha1"),p=b("./links"),e=b("./forms"),o=b("./errors"),k=b("./out_queue"),l=b("snowplow-tracker-core").trackerCore,d=b("uuid"),h=typeof a!=="undefined"?a:this;h.Tracker=function j(bw,a3,U,C,aJ){var z=l(true,,ax=document,al=window,W=navigator,v=i.fixupUrl(ax.domain,al.location.href,f.getReferrer()),bf=f.fixupDomain(v[0]),bv=v[1],aW=v[2],bE,ao,aJ=aJ||{},aU="GET",L=aJ.hasOwnProperty("platform")?aJ.platform:"web",x,bi=aJ.hasOwnProperty("appId")?aJ.appId:"",aD,a0=ax.title,D,aS=aJ.hasOwnProperty("pageUnloadTimer")?aJ.pageUnloadTimer:500,P=false,F,V,G,bs=aJ.hasOwnProperty("cookieName")?aJ.cookieName:"_sp_",I=aJ.hasOwnProperty("cookieDomain")?aJ.cookieDomain:null,bt="/",ac=W.doNotTrack||W.msDoNotTrack||al.doNotTrack,bm=aJ.hasOwnProperty("respectDoNotTrack")?aJ.respectDoNotTrack&&(ac==="yes"||ac==="1"):false,av,ar,M=aJ.hasOwnProperty("cookieLifetime")?aJ.cookieLifetime:63072000,R=aJ.hasOwnProperty("sessionCookieTimeout")?aJ.sessionCookieTimeout:1800,X=aJ.hasOwnProperty("userFingerprintSeed")?aJ.userFingerprintSeed:123412414,bk=ax.characterSet||ax.charset,a4=aJ.hasOwnProperty("forceSecureTracker")?(aJ.forceSecureTracker===true):false,ag=!a4&&aJ.hasOwnProperty("forceUnsecureTracker")?(aJ.forceUnsecureTracker===true):false,aq=aJ.hasOwnProperty("useLocalStorage")?(f.warn("argmap.useLocalStorage is deprecated. Use argmap.stateStorageStrategy instead."),aJ.useLocalStorage):true,aM=aJ.hasOwnProperty("useCookies")?(f.warn("argmap.useCookies is deprecated. Use argmap.stateStorageStrategy instead."),aJ.useCookies):true,aY=aJ.hasOwnProperty("stateStorageStrategy")?aJ.stateStorageStrategy:(!aM&&!aq?"none":(aM&&aq?"cookieAndLocalStorage":(aM?"cookie":"localStorage"))),K=W.userLanguage||W.language,bj=n.detectBrowserFeatures(aY=="cookie"||aY=="cookieAndLocalStorage",Q("testcookie")),y=(aJ.userFingerprint===false)?"":n.detectSignature(X),O=bw+"_"+a3,aZ=false,aV,br=new Date().getTime(),aQ,aE,ay,af,ak=m,a1,at,ab,aa=1,bD,E=bc(),u=p.getLinkTrackingManager(z,O,bp),az=e.getFormTrackingManager(z,O,bp),aT=o.errorManager(z),bo=new k.OutQueueManager(bw,a3,C,aY=="localStorage"||aY=="cookieAndLocalStorage",aJ.post,aJ.bufferSize,aJ.maxPostBytes||40000),a9=false,bx=aJ.contexts||{},bz=[],t=[],aL=false,J=false;if(aJ.hasOwnProperty("discoverRootDomain")&&aJ.discoverRootDomain){I=f.findRootDomain()}if(bx.gaCookies){bz.push(H())}if(bx.geolocation){bu()}z.setBase64Encoding(aJ.hasOwnProperty("encodeBase64")?aJ.encodeBase64:true);z.setTrackerVersion(U);z.setTrackerNamespace(a3);z.setAppId(bi);z.setPlatform(L);z.setTimezone(n.detectTimezone());z.addPayloadPair("lang",K);z.addPayloadPair("cs",bk);for(var ai in bj){if(Object.prototype.hasOwnProperty.call(bj,ai)){if(ai==="res"||ai==="cd"||ai==="cookie"){z.addPayloadPair(ai,bj[ai])}else{z.addPayloadPair("f_"+ai,bj[ai])}}}ces");if(bI){var bH=[];for(var bG in bI){if(bI.hasOwnProperty(bG)){var bF={id:bG,isMember:bI[bG]};bH.push({schema:"iglu:com.optimizely/visitor_audience/jsonschema/1-0-0",data:bF})}}return bH}return[]}unction aj(){return q.map(bb(),function(bF){return{schema:"iglu:com.optimizely.snowplow/optimizely_summary/jsonschema/1-0-0",data:bF}})}n aK(bL,bI,bG,bF){bB();if(J){aA()}J=true;a0=ax.title;D=bL;var bK=f.fixupTitle(D||a0);z.trackPageView(bn(aD||bv),bK,bn(ao||aW),bp(aR(bI,bG)),bF);var bH=new Date();if(P&&!aZ){aZ=true;if(Object.prototype.hasOwnProperty.call(bj,"wheel")){if(Object.prototype.hasOwnProperty.call(bj,"passive")){f.addEventListener(ax,bj.wheel,bg,{passive:true})}else{f.addEventListener(ax,bj.wheel,bg)}}aN();f.addEventListener(ax,"click",bg);f.addEventListener(ax,"mouseup",bg);f.addEventListener(ax,"mousedown",bg);f.addEventListener(ax,"mousemove",bg);f.addEventListener(al,"scroll",a6);f.addEventListener(ax,"keypress",bg);f.addEventListener(ax,"keydown",bg);f.addEventListener(ax,"keyup",bg);f.addEventListener(al,"resize",bg);f.addEventListener(al,"focus",bg);f.addEventListener(al,"blur",bg);aV=bH.getTime();clearInterval(bE);bE=setInterval(V)}}B();if(aJ.crossDomainLinker){w(aJ.crossDomainLinker)}return{getDomainSessionIndex:function(){return aa},getPageViewId:function(){return aC()},newSession:ae,getCookieName:getUserId:function(){return bD},getDomainUserId:getDomainUserInfo:getUserFingerprint:setAppId:function(bF){f.warn('setAppId is deprecated. Instead add an "appId" field to the argmap argument of newTracker.');z.setAppId(bF)},setReferrerUrl:function(bF){ao=bF},setCustomUrl:setDocumentTitle:discardHashTag:function(bF){G=bF},setCookieNamePrefix:function(bF){f.warn('setCookieNamePrefix is deprecated. Instead add a "cookieName" field to the argmap argument of newTracker.');bs=bF},setCookieDomain:setCookiePath:setVisitorCookieTimeout:function(bF){M=bF},setSessionCookieTimeout:setUserFingerprintSeed:enableUserFingerprint:respectDoNotTrack:crossDomainLinker:function(bF){w(bF)},addListener:enableLinkClickTracking:refreshLinkClickTracking:enableActivityTracking:updatePageActivity:enableFormTracking:killFrame:redirectFile:setOptOutCookie:function(bF){av=bF},setCountPreRendered:function(bF){ar=bF},setUserId:identifyUser:setUserIdFromLocation:function(bF){bB();bD=f.fromQuerystring(bF,bv)},setUserIdFromReferrer:setUserIdFromCookie:setCollectorCf:function(bF){x=am(bF)},setCollectorUrl:setPlatform:function(bF){f.warn('setPlatform is deprecated. Instead add a "platform" field to the argmap argument of newTracker.');z.setPlatform(bF)},encodeBase64:flushBuffer:enableGeolocationContext:bu,trackPageView:trackStructEvent:function(bI,bL,bG,bK,bJ,bH,bF){ad(function(){z.trackStructEvent(bI,bL,bG,bK,bJ,bp(bH),bF)})},trackSelfDescribingEvent:function(bG,bH,bF){ad(function(){z.trackSelfDescribingEvent(bG,bp(bH),bF)})},trackUnstructEvent:addTrans:addItem:trackTrans:trackLinkClick:function(bL,bH,bI,bG,bK,bJ,bF){ad(function(){z.trackLinkClick(bL,bH,bI,bG,bK,bp(bJ),bF)})},trackAdImpression:trackAdClick:function(bH,bM,bF,bI,bP,bK,bJ,bL,bO,bG,bN){ad(function(){z.trackAdClick(bH,bM,bF,bI,bP,bK,bJ,bL,bO,bp(bG),bN)})},trackAdConversion:trackSocialInteraction:trackAddToCart:function(bM,bH,bJ,bK,bL,bG,bI,bF){ad(function(){z.trackAddToCart(bM,bH,bJ,bK,bL,bG,bp(bI),bF)})},trackRemoveFromCart:trackSiteSearch:trackTiming:trackConsentWithdrawn:function(bJ,bL,bG,bH,bK,bI,bF){ad(function(){z.trackConsentWithdrawn(bJ,bL,bG,bH,bK,bp(bI),bF)})},trackConsentGranted:trackEnhancedEcommerceAction:addEnhancedEcommerceActionContext:addEnhancedEcommerceImpressionContext:addEnhancedEcommerceProductContext:addEnhancedEcommercePromoContext:enableErrorTracking:trackError:preservePageViewId:}}())},{"./errors":13,"./forms":14,"./lib/detectors":17,"./lib/helpers":18,"./lib/proxies":19,"./lib_managed/lodash":20,"./links":21,"./out_queue":22,"browser-cookie-lite":1,sha1:6,"snowplow-tracker-core":7,uuid:12}]},{},[16]);