!{1:function(e,t,i){"use strict";(t,"a",(function(){return r}))},12:function(e,t,i){"use strict";.d(t,"a",(function(){return n}))},136:function(e,t,i){},137:function(e,t,i){},138:function(e,t,i){},139:function(e,t,i){},140:function(e,t){(function(){var e=document.querySelector("[data-header-nav]");if(e){var t=null;e.addEventListener("click",e=>{if(e.target.matches("button")){t&&t.classList.remove("isOpen");var i=e.target.parentElement;t!==i?(i.classList.add("isOpen"),t=i):t=null}})}})(),[...document.querySelectorAll(".headerNav-listLink:not(.onMobile .headerNav-listLink.pmc-auth-required)")].forEach(e=>{e.addEventListener("click",()=>{window.ga("send","event",{eventCategory:"Navigation menu",eventAction:"Clic-entree-".concat(e.dataset.tracking),eventLabel:window.matchMedia("(min-width: 992px)").matches?"desktop":"mobile"})})})},141:function(e,t,i){},142:function(e,t,i){},143:function(e,t,i){},144:function(e,t,i){},145:function(e,t,i){},147:function(e,t,i){"use strict";i.r(t);class n{constructor(e){this.element=e}init(){this.initProfileButton(),this.element.querySelector("[data-search-button]")&&document.querySelector("[data-header-searchbar]")&&this.element.querySelector("[data-search-button]").addEventListener("click",()=>{this.toggleSearchBar()}),this.element.querySelector("[data-menu-button]")&&document.querySelector("[data-header-nav]")&&this.element.querySelector("[data-menu-button]").addEventListener("click",()=>{this.toggleNav()})}initProfileButton(){window.pmcstarter("getProfile",e=>{if(e){var t=this.element.querySelector("[data-profile-open-button]"),i=this.element.querySelector("[data-profile-menu]"),n=this.element.querySelector("[data-profile-close-button]"),o=this.element.querySelector("[data-backdrop]"),r=this.element.querySelector("[data-header-nav]");this.hideAuthCta(),this.enableBookmarkLink(),this.enableProfileOpenButton(t),this.enableProfileListeners(t,n,i,o,r),this.enableProfileCta(e.avatar),this.enableProfileName(e.firstname,e.lastname)}})}nableBookmarkLink(){this.element.querySelector("[data-bookmark-auth-link]").classList.add("isHidden"),this.element.querySelector("[data-bookmark-link]").classList.remove("isHidden")}enableProfileName(e,t){var i=this.element.querySelector("[data-profile-name]"),n=document.createElement("span");n.innerHTML="".concat(e||""," ").concat(t||""),i.prepend(n)}nableProfileListeners(e,t,i,n,o){i&&e&&e.addEventListener("click",,this.element.querySelector("[data-profile-close-button]")&&e&&(t.addEventListener("click",()=>{this.closeProfile(i,n)}),n.addEventListener("click",)}enableProfileCta(e){var t=this.element.querySelectorAll("[data-cta-profile]");t.forEach((i,n)=>{if(e){var o=document.createElement("img");o.setAttribute("src",e),"profileMenu-profile-wrapper"===i.className?o.classList.add("profileMenu-profile-avatar"):(o.classList.add("headerMain-avatar"),t[n].classList.add("noBackground")),o.setAttribute("alt","Photo de profil de l'internaute"),t[n].querySelector("[data-default-avatar]").remove()}else t[n].classList.add("isDefaultAvatar");t[n].classList.remove("isHidden")})}oggleNav(){var e=document.querySelector("[data-menu-button]"),t=document.querySelector("[data-header-nav]"),i=document.querySelector("body");t.classList.contains("isShown")?(e.querySelector("[data-normal-icon]").classList.remove("isHidden"),e.querySelector("[data-normal-label]").classList.remove("isHidden"),e.querySelector("[data-close-icon]").classList.add("isHidden"),e.querySelector("[data-close-label]").classList.add("isHidden"),i.classList.remove("noScroll"),this.element.classList.remove("isFixed"),t.classList.remove("isShown")):(e.querySelector("[data-normal-icon]").classList.add("isHidden"),e.querySelector("[data-normal-label]").classList.add("isHidden"),e.querySelector("[data-close-icon]").classList.remove("isHidden"),e.querySelector("[data-close-label]").classList.remove("isHidden"),i.classList.add("noScroll"),this.element.classList.add("isFixed"),t.classList.add("isShown"))}openProfile(e,t,i){i.classList.contains("isShown")&&this.toggleNav(),document.body.classList.add("noScroll"),t.classList.add("isShown"),window.scrollTo(0,0),e.classList.add("isShown")}closeProfile(e,t,i){document.body.classList.remove("noScroll"),t.classList.remove("isShown"),e.classList.remove("isShown")}}var o=i(35),r=i(1),a=i(4),s=i(8);var l=class{constructor(e){Object(r.a)(this,"element",null),this.element=e}hide(){this.element.classList.remove("isShown")}ender(e){var t=document.createElement("div");t.innerHTML=(n")})(e),this.element.prepend(t)}},c=["psExpDa,i)}var u=["psId","psImg","psNewPrice","psOldPrice","psExpDate"],h=new WeakMap,m=new WeakMap;class f{constructor(e){Object(r.a)(this,"element",null),Object(r.a)(this,"fluxUrl",""),Object(r.a)(this,"isTooltipRendered",!1),d(this,h,{writable:!0,value:null}),d(this,m,{writable:!0,value:null}),this.element=e,this.fluxUrl=e.dataset.fluxUrl,Object(s.a)(this,h,this._handleMouseEnter.bind(this)),Object(s.a)(this,m,this._handleMouseLeave.bind(this))}init(){this.element.addEventListener("mouseenter",Object(a.a)(this,h)),this.element.addEventListener("mouseleave",Object(a.a)(this,m)),this.element.removeAttribute("data-tooltip-anchor"),this.element.style.cursor="pointer",this.element.addEventListener("cler"})}_handleMouseEnter(){this.requestSubscriptionInfo().(e)}).c=e()}get tooltip(){return this._tooltip||(this._tooltip=new l(document.getElementsByClassName("abonnementMagazine")[0])),this._tooent}getDataFromStorage(){return u.re),e),{})}hasData(e){var{psId:t,psImg:i,psNewPrice:n,psOldPrice:o}=e;return t&&i&&n&&o}formatData(e,t){return{psId:e.identifiant_unique,psImg:e.url_image[e.identifiant_unique],psNewPrice:e.prix,psOldPrice:e.prix_barre,psExpDate:t}}saveDataInStorage(e){u.fort])})}requestSubscriptionInfo(){var e=this.getDataFromStorage(),{psExpDate:t}=e,i=Object(o.a)(e,c),n=(new Date).toISOString().slice(0,10);return new Promise((e,o)=>{this.hasData(i)&&t===n?e(this.getDataFromStorage()):window.fetch(this.fluxUrl).on()).catch(o).then(t=>{t&&t.length?t.filter(t=>{if("S_FACBIMARCIN10412PSWEBU"===t.identifiant_unique){var i=this.formatData(t,n);this.saveDataInStorage(i),e(i)}}):o(new Error("No magazine data found"))})})}displayTooltip(e){var{psOldPrice:t,psNewPrice:i,psImg:n,psId:o}=e;this.isTooltipRendered||(this.element.style.position="relative",this.templateAbonnement.after(this.templateAbonnement.content.cloneNode(!0)),this.tooltip.render({oldPrice:t,newPrice:i,image:n,id:o}),this.isTooltipRendered=!0),this.tooltip.show()}}clat=e}init(){var e=document.querySelector("[data-brandswitcher-open]");e&&e.addEventListener("click",e=>{window.innerWidth<768&&(e.preventDefault(),this.openBrandSwitcher())});var t=document.querySelector("[data-brandswitcher-close]");t&&t.addEventListener("clr()})}openBrandSwitcher(){document.querySelector("body").classList.add("noScroll"),this.element.classList.add("isShown")}closeBrandSwitcher(){document.querySelector("body").classList.remove("noScroll"),this.element.classList.remove("isShown")}}class v{constructor(e,t){this.element=e,this.siteHeader=t,this.isHeaderVisible=!0,this.lastPageYOffset=window.pageYOffset}init(){window.addEventListener("scroll",()=>{this.onScroll()}),this.createObserver().observe(this.siteHeader)}onScroll(){this.isHeaderVisible||(window.pageYOffset<this.lastPageYOffset?this.element.classList.add("isVisible","isAnimated"):this.element.classList.remove("isVisible"),this.lastPageYOffset=window.pageYOffset)}createObserver(){return new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(this.isHeaderVisible=!0,this.element.classList.remove("isSticky","isAnimated")):(this.isHeaderVisible=!1,this.element.classList.add("isSticky"))})})}}function g(){var e=document.querySelector("[data-header]");if(e){new n(e).init();var t=document.querySelector("[data-header-magazine]");if(t)new f(t).init();var i=document.querySelector("[data-brandswitcher]");if(i)new p(i).init();var o=document.querySelector("[data-header-searchbar]");if(o&&window.innerWidth<768)new v(o,e).init()}}"loading"!==document.readyState?g():document.addEventListener("DOMContentLoag()});i(136),i(137),i(138),i(139),i(140),i(141),i(142),i(143),i(16),i(144);(function(){var e=["#/compte","#/connexion","#/reinitialisation","#/inscription"],t=!1,i={get loginButton(){return this._loginButton||(this._loginButton=document.querySelector("[data-cta-auth]")),this._loginButton},get profilePane(){return this._profilePane||(this._profilePane=document.querySelector("[data-profile-pane]")),this._profilePane},get profileOpenButton(){return this._profileOpenButton||(this._profileOpenButton=document.querySelector("[data-cta-auth]")),this._profileOpenButton},get profileCloseBton}};return{init:function(){var t,o;null===(t=i.loginButton)||void 0===t||t.addEventListener("click",r),null===(o=i.profileCloseButton)||void 0===o||o.addEventListener("click",a),e.includes(window.location.hash)&&(i.profilePane.classList.toggle("isHidden"),r());document.addEventListener("FEM:LOGIN-MANAGER:LOAD",n),document.addEventListener("BMK::TOGGLE-REQUEST",n)}};function n(){var{detail:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(e)k()}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.redirect;if(n&&document.querySelector("fem-login").setAttribute("redirect",n),t)return window.location.hash="#/compte",void i.profilePane.classList.remove("isHidden");t=!0;var o=document.createElement("script");o.src=window.globalConfigs.services.login,o.onload=s,o.onet=!1,document.body.appendChild(o)}function a(){window.location.hash="",i.profilePane.classList.add("isHidden")}function s(){t=!0,e.includes(window.location.hash)||(window.location.hash="#/compte",i.profilePane.classList.remove("isHidden"))}})().init();var b=class{constructor(e,t){this.profile=e,this.login=t,this.getManualOptions=this.getManualOptions.bind(this),this.detail)}activateLinks(){document.querySelectorAll("[data-login-required]").forEach(e=>{var t=e.querySelector("a");t&&(t.href=e.dataset.loginRedirect)})}initLoginRequired(){document.querySelectorAll("[data-login-required]").forEach(e=>{var{loginRedirect:t,pmcSignupService:i}=e.dataset;e.addEventListener("click",e=>{e.preventDefault(),this.login.load({redirect:t,signupService:i}),this.profile.pane.open()})})}getLoginRequestHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{t.preventDefault(),this.login.load(e),this.profile.pane.open()}}handleBookmarkToggleRequest(e){var{detail:{id:t}}=e;this.login.load(this.getManualOptions(t)),this.profile.pane.open()}getManualOptions(e){var{loginRedirect:t=null,pmcSignupService:i=null}=this.getDataset(e);return{redirect:t,signupService:i}}getDa}},w=["#/compte","#/connexion","#/reinitialisation","#/inscription"];var S=class{constrn=t}init(e){e?(this.profile.onProfileClick(()=>{this.profile.pane.open()}),this.profile.onCloseCe()})):(this.initRoutes(),this.profile.onAuthClick(()=>{this.load(),this.profile.pane.open()}),this.profile.onCloseCe()}))}initRoutes(){w.includes(window.location.hash)&&(this.load(),this.profile.pane.open())}load(){var{redirect:e=null,signupService:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&this.femLogin.setAttribute("redirect",e),t&&this.femLogin.setAttribute("signup-service",t),this.isLoaded)window.location.hash="#/compte";else{this.isLoaded=!0;var i=document.createElement("script");i.src=window.globalConfigs.services.login,i.oned(),i.oned=!1,document.body.appendChild(i)}}onLoginLoaded(){this.isLoaded=!0,w.includes(window.location.hash)||(window.location.hash="#/compte")}resetLocation(){window.history.pushState(null,null,window.location.href.replace(window.location.hash,""))}},L={profile:{eventCategory:"Profil_burger",eventAction:"clic_profil_connectÃ©",eventLabel:null},bookmark:{eventCategory:"Profil_burger",eventAction:"clic_carnet_recettes",eventLabel:null},ldc:{eventCategory:"Profil_burger",eventAction:"clic_mes_listes_de_courses",eventLabel:null},coachings:{eventCategory:"Profil_burger",eventAction:"clic_mes_coachings",eventLabel:nul[e])},k=function(){var e,t="[data-cta-auth]",i="[data-cta-profile-click-trap]",n="[data-cta-profile]";return{init(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=document.querySelector("[data-header]"),t?o.call(this,t):e.querySelector("[data-bookmark-link]").remove()},setProfile:function(e){if(e.avatar){var t=document.createElement("img");t.setAttribute("src",e.avatar),t.classList.add("headerMain-avatar"),t.setAttribute("alt","Photo de profil de l'internaute"),this.avatarButton.prepend(t);var i=this.avatarButton.querySelector("[data-default-avatar]");null==i||i.remove(),this.avatarButton.classList.add("noBackground")}},get avatarButton(){return this._avatarButton||(this._avatarButton=e.querySelector(n)),this._avatarButton},get profileButton(){return this._profileButton||(this._profileButton=e.querySelector(i)),this._profileButton},get authButton(){return this._authButton||(this._authButton=e.querySelector(t)),this._authButton}};function o(e){this.setProfile(e),this.authButton.classList.add("isHidden"),this.profileButton.classList.remove("isHidden"),this.avatarButton.classList.remove("isHidden"),window.innerWidth<=768&&this.avatarButton.addEventListener("click",r.bind(tle")}}(),q=(i(145),function(){var e="[data-profile-name]",t="[data-profile-picture]",i="[data-profile-pane]",n="[data-profile-close]",o="[data-profile-connected]",r="fem-login",a=[];returs,e)},open(){var e;document.documentElement.style.overflow="hidden",this.profilePane.classList.remove("isHidden"),null===(e=document.querySelector("#dm-leader"))||void 0===e||e.classList.add("isHidden")},close(){var e;document.documentElement.style.overflow="",this.profilePane.classList.add("isHidden"),null===(e=document.querySelector("#dm-leader"))||void 0===e||e.classList.remove("isHidden"),this.resetFemLoginAttributes()},oh(e)},bindCloseButton(e){this.closeButton.addEventListener("click",()=>{a.length&&a.forEach(e),this.close()})},bindServiceLink(){this.serviceLinks.fois))})},showConnectedCy=""},handleServiceLinkClick(e){e.preventDefault();var{target:t}=e;y(t.dataset.trackingName),window.location.href=t.href},resetFemLoginAttrce")},render(e){var{avatar:t,firstname:i,lastname:n}=e;this.profilePictureEl.src=t,this.profileNameEl.innerText=i+" "+n},get profilePane(){return this._profilePane||(this._profilePane=document.querySelector(i)),this._profilePane},get connectedContent(){return this._connectedContent||(this._connectedContent=document.querySelector(o)),this._connectedContent},get profileNameEl(){return this._profileNameEl||(this._profileNameEl=document.querySelector(e)),this._profileNameEl},get profilePictureEl(){return this._profilePictureEl||(this._profilePictureEl=document.querySelector(t)),this._profilePictureEl},get closeButton(){return this._closeButton||(this._closeButton=document.querySelector(n)),this._closeButton},get feogin},get serviceLinks(){return this._serviceLinks||(this._serviceLinks=[...this.profilePane.querySelectorAll("li a")].slice(0,3)),this._serviceLir(e)}}());var E=class{init(e){k.init(e),q.init(e,k),this.callbacks={}}onAuthClick(e){this.addCallback({name:"auth-button",element:this.header.authButton,callback:e})}onProfileClick(e){this.addCallback({name:"profile-button",element:this.header.profileButton,callback:e})}onCloseClick(e){this.addCallback({name:"close-button",element:this.pane.closeButton,callback:e})}addCallback(e){var{name:t,element:i,callback:n}=e;this.callbacks[t]||(this.callbacks[t]=[],i.addEventListener("click",e=>{this.callbacks[t].fo>t(e))})),this.callbacks[t].push(n)}get header(){retrn q}};var _=class{init(){var e=document.querySelector("fem-login"),t=new E,i=new S(t,e),n=new b(t,i);window.pmcstarter("getProt(e)})}};!function(){var e=new _;try{e.init()}catch(e){}}(,i){},16:function(e,t,i){"use strict";i(15);class n{constructor(e){e.element&&(this.element=e.element,this.options=e.element.dataset,this.anchor=e.anchor,this.onShow=e.onShow,this.onHide=e.onHide,this.element.addEventListener("click",()=>{this.hide()}),this.anchor&&(this.anchor.style.position="relative","hover"===this.options.tooltipTrigger?(this.anchor.addEventListener("mouseenter",()=>{this.show()}),this.anchor.addEventListener("mouseleave",()=>{this.hide()})):"click"===this.options.tooltipTrigger&&(this.anchor.addEventListener("click",()=>{this.show()}),this.anchor.addEventListener("mouseleave",()=>{this.hide()}))))}show(){this.hideOthers(),this.element.classList.add("isShown"),this.onShow&&this.onShow();var e=parseInt(this.options.tooltipDuration);e>0&&setTide()},e)}hide(){this.element.classList.remove("isShown"),this.onHide&&this.onHide()}hideOthers(){for(var e of this.anchor.querySelectorAll("[data-tooltip]"))e.classList.remove("isShown")}}for(var o of document.querySelectorAll("[data-tooltip][data-tooltip-autoinit]"))new n({element:o,anchor:o.closest("[data-tooltip-anchor]")});if(!window.localStorage.bookmarkHelperShown)for(var r of document.querySelectorAll("[data-tooltip][data-tooltip-bookmarkhelper]")){new n({element:r,anchor:r.closest("[data-tooltip-anchor]"),o,!0)}}).show()n}))},4:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(12);function o(e,t){ralue}(e,Object(n.a)(e,t,"get"))}},8:function(e,t,i){"use strict";i.d(trn o}));var n=i(12);function o(e,t,i){re=i}}(e,Object(n.a)(e,t,"set"),i),i}}});
//# sourceMappingURL=esm.header.c1f6ffeec12b6559cfdc.js.map