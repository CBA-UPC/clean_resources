/*! * Snowplow - The world's most powerful web analytics platform
 *
 * @description JavaScript tracker for Snowplow
 * @version     2.7.2
 * @author      Alex Dean, Simon Andersson, Anthon Pang, Fred Blundun, Joshua Beemster
 * @copyright   Anthon Pang, Snowplow Analytics Ltd
 * @license     Simplified BSD
 */
(({1:[function(b,c,a){this.cookie=function(f,h,d,j,g,i){
if(arguments.length>1){
  return document.cookie=f+"="+escape(h)+(d?"; expires="+new Date(+new Date()+(d*1000)).toUTCString():"")+(j?"; path="+j:"")+(g?"; domain="+g:"")+("; secure=true")
}
  return unescape((("; "+document.cookie).split("; "+f+"=")[1]||"").split(";")[0])
}},{}],2:[{}],3:[{}],4:[{}],5:[{}],6:[{charenc:2,crypt:3}],7:[{"./lib/core":9}],8:[function(c,d,a){.base64encode=b},{}],9:[function(b,d,a){var f=b("uuid");var h=b("./payload");unction g(k,p){if(typeof k==="undefined"){k=true}var i={};n{setBase64Encoding:function(q){k=q},addPayloadPair:m,addPayloadDict:resetPayloadPairs:setTrackerVersion:function(q){m("tv",q)},setTrackerNamespace:function(q){m("tna",q)},setAppId:function(q){m("aid",q)},setPlatform:function(q){m("p",q)},setUserId:function(q){m("uid",q)},setScreenResolution:function(r,q){m("res",r+"x"+q)},setViewport:setColorDepth:function(q){m("cd",q)},setTimezone:function(q){m("tz",q)},setLang:function(q){m("lang",q)},setIpAddress:trackUnstructEvent:n,trackSelfDescribingEvent:n,trackPageView:trackPagePing:trackStructEvent:trackEcommerceTransaction:trackEcommerceTransactionItem:trackScreenView:trackLinkClick:trackAdImpression:trackAdClick:function(s,y,q,t,B,v,u,w,A,r,z){var x={schema:"iglu:com.snowplowanalytics.snowplow/ad_click/jsonschema/1-0-0",data:l({targetUrl:s,clickId:y,costModel:q,cost:t,bannerId:B,zoneId:v,impressionId:u,advertiserId:w,campaignId:A})};return n(x,r,z)},trackAdConversion:trackSocialInteraction:trackAddToCart:function(x,s,u,v,w,r,t,q){return n({schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:l({sku:x,name:s,category:u,unitPrice:v,quantity:w,currency:r})},t,q)},trackRemoveFromCart:trackFormChange:trackFormSubmission:trackSiteSearch:}a.trackerCore=g},{"./payload":10,uuid:12}],10:[function(g,h,c){var a=g("./base64");isNonEmptyJson=d;.isJson=i;.payloadBuilder=b},{"./base64":8}],11:[{}],12:[{"./rng":11}],13:[{"./lib/helpers":18,"./lib_managed/lodash":20}],14:[function(c,d,a){var g=c("./lib_managed/lodash"),f=c("./lib/helpers"),b=typeof a!=="undefined"?a:this;b.getFormTrackingManager=function(l,k,n){var q=["textarea","input","select"];var h=k+"form";var r=function(){return true};var j=function(){return true};n{configureFormTracking:function(t){if(t){r=f.getFilter(t.forms,true);j=f.getFilter(t.fields,false)}},addFormListeners:}},{"./lib/helpers":18,"./lib_managed/lodash":20}],15:[{"./lib/helpers":18,"./lib_managed/lodash":20}],16:[{"./snowplow":23}],17:[{"../lib_managed/lodash":20,"browser-cookie-lite":1,jstimezonedetect:4,murmurhash:5}],18:[function(b,c,a){(function(){var h=b("../lib_managed/lodash"),f=b("browser-cookie-lite"),d=typeof a!=="undefined"?a:this;d.fixupTitle=d.getHostName=d.fixupDomain=d.getReferrer=d.addEventListener=d.fromQuerystring=d.warn=d.getCssClasses=.getFilter=d.decorateQuerystring=d.attemptGetLocalStorage=d.attemptWriteLocalStorage=d.findRootDomain=d.isValueInArray=d.deleteCookie=d.getCookiesWithPrefix=d.parseInt=function(j){var i=parseInt(j);return isNaN(i)?undefined:i};d.parseFloat=())},{"../lib_managed/lodash":20,"browser-cookie-lite":1}],19:[{"./helpers":18}],20:[{}],21:[{"./lib/helpers":18,"./lib_managed/lodash":20}],22:[{"./lib/detectors":17,"./lib/helpers":18,"./lib_managed/lodash":20}],23:[{"./in_queue":15,"./lib/helpers":18,"./lib_managed/lodash":20,"./tracker":24,uuid:12}],24:[function(b,c,a){(function(){var r=b("./lib_managed/lodash"),g=b("./lib/helpers"),j=b("./lib/proxies"),h=b("browser-cookie-lite"),o=b("./lib/detectors"),n=b("sha1"),q=b("./links"),f=b("./forms"),p=b("./errors"),l=b("./out_queue"),m=b("snowplow-tracker-core").trackerCore,d=b("uuid"),i=typeof a!=="undefined"?a:this;i.Tracker=function k(bo,aW,T,D,aE){var A=m(true,,at=document,ai=window,V=navigator,w=j.fixupUrl(at.domain,ai.location.href,g.getReferrer()),a7=g.fixupDomain(w[0]),bn=w[1],aR=w[2],al,aE=aE||{},aP="GET",L=aE.hasOwnProperty("platform")?aE.platform:"web",y,ba=aE.hasOwnProperty("appId")?aE.appId:"",az,aU=at.title,E,aN=aE.hasOwnProperty("pageUnloadTimer")?aE.pageUnloadTimer:500,G,U,H,bk=aE.hasOwnProperty("cookieName")?aE.cookieName:"_sp_",J=aE.hasOwnProperty("cookieDomain")?aE.cookieDomain:null,bl="/",aa=V.doNotTrack||V.msDoNotTrack||ai.doNotTrack,be=aE.hasOwnProperty("respectDoNotTrack")?aE.respectDoNotTrack&&(aa==="yes"||aa==="1"):false,ao,M=aE.hasOwnProperty("cookieLifetime")?aE.cookieLifetime:63072000,Q=aE.hasOwnProperty("sessionCookieTimeout")?aE.sessionCookieTimeout:1800,W=aE.hasOwnProperty("userFingerprintSeed")?aE.userFingerprintSeed:123412414,bc=at.characterSet||at.charset,aX=aE.hasOwnProperty("forceSecureTracker")?(aE.forceSecureTracker===true):false,ad=!aX&&aE.hasOwnProperty("forceUnsecureTracker")?(aE.forceUnsecureTracker===true):false,an=aE.hasOwnProperty("useLocalStorage")?aE.useLocalStorage:true,aH=aE.hasOwnProperty("useCookies")?aE.useCookies:true,K=V.userLanguage||V.language,bb=o.detectBrowserFeatures(aH,P("testcookie")),z=(aE.userFingerprint===false)?"":o.detectSignature(W),O=bo+"_"+aW,aT=false,aQ,bj=new Date().getTime(),aL,aA,au,ac,ah=n,aV,ap,Z,Y=1,bu,F=a4(),v=q.getLinkTrackingManager(A,O,bh),av=f.getFormTrackingManager(A,O,bh),aO=p.errorManager(A),bg=new l.OutQueueManager(bo,aW,D,an,aE.post,aE.bufferSize,aE.maxPostBytes||40000),a2=false,bp=aE.contexts||{},br=[],u=[],aG=false;
if(aE.hasOwnProperty("discoverRootDomain")&&aE.discoverRootDomain){J=g.findRootDomain()}if(bp.gaCookies){br.push(I())}if(bp.geolocation){bm()}A.setBase64Encoding(aE.hasOwnProperty("encodeBase64")?aE.encodeBase64:true);A.setTrackerVersion(T);A.setTrackerNamespace(aW);A.setAppId(ba);A.setPlatform(L);A.setTimezone(o.detectTimezone());A.addPayloadPair("lang",K);A.addPayloadPair("cs",bc);for(var af in bb){if(Object.prototype.hasOwnProperty.call(bb,af)){if(af==="res"||af==="cd"||af==="cookie"){A.addPayloadPair(af,bb[af])}else{A.addPayloadPair("f_"+af,bb[af])}}}.concat(bC||[]);if(bp.webPage){bz.push(a9())}if(bp.performanceTiming){var bD=R();if(bD){bz.push(bD)}}if(ai.optimizely){if(bp.optimizelySummary){var bB=ag();r.each(bB,}if(bp.optimizelyExperiments){var bv=ae();for(var bA=0;bA<bv.length;bA++){bz.push(bv[bA])}}if(bp.optimizelyStates){var bF=s();for(var bA=0;bA<bF.length;bA++){bz.push(bF[bA])}}if(bp.optimizelyVariations){var bG=bs();
for(var bA=0;bA<bG.length;bA++){bz.push(bG[bA])}}if(bp.optimizelyVisitor){var by=a0();if(by){bz.push(by)}}if(bp.optimizelyAudiences){var bw=S();for(var bA=0;bA<bw.length;bA++){bz.push(bw[bA])}}if(bp.optimizelyDimensions){var bx=aS();for(var bA=0;bA<bx.length;bA++){bz.push(bx[bA])}}}if(bp.augurIdentityLite){var bE=aC();if(bE){bz.push(bE)}}return bz}ion a3(){var bw=B("state");var bv=B("experiments");return r.map(bw&&bv&&bw.activeExperiments,function(bx){var by=bv[bx];return{activeExperimentId:bx,variation:bw.variationIdsMap[bx][0],conditional:by&&by.conditional,manual:by&&by.manual,name:by&&by.name}})}tion S(){var by=B("visitor","audiences");if(by){var bx=[];for(var bw in by){if(by.hasOwnProperty(bw)){var bv={id:bw,isMember:by[bw]};bx.push({schema:"iglu:com.optimizely/visitor_audience/jsonschema/1-0-0",data:bv})}}return bx}return[]}on aF(bB,by,bw,bv){bt();aw();aU=at.title;E=bB;var bA=g.fixupTitle(E||aU);A.trackPageView(bf(az||bn),bA,bf(al||aR),bh(aM(by,bw)),bv);var bx=new Date();if(G&&U&&!aT){aT=true;aI();g.addEventListener(at,"click",a8);g.addEventListener(at,"mouseup",a8);g.addEventListener(at,"mousedown",a8);g.addEventListener(at,"mousemove",a8);g.addEventListener(at,"mousewheel",a8);g.addEventListener(ai,"DOMMouseScroll",a8);g.addEventListener(ai,"scroll",aZ);g.addEventListener(at,"keypress",a8);g.addEventListener(at,"keydown",a8);g.addEventListener(at,"keyup",a8);g.addEventListener(ai,"resize",a8);g.addEventListener(ai,"focus",a8);g.addEventListener(ai,"blur",a8);aQ=bx.getTime();setInterval(U)}}C();if(aE.crossDomainLinker){x(aE.crossDomainLinker)}return{getUserId:function(){return bu},getDomainUserId:getDomainUserInfo:getUserFingerprint:setAppId:function(bv){g.warn('setAppId is deprecated. Instead add an "appId" field to the argmap argument of newTracker.');
A.setAppId(bv)},setReferrerUrl:function(bv){al=bv},setCustomUrl:setDocumentTitle:discardHashTag:function(bv){H=bv},setCookieNamePrefix:function(bv){g.warn('setCookieNamePrefix is deprecated. Instead add a "cookieName" field to the argmap argument of newTracker.');bk=bv},setCookieDomain:setCookiePath:setVisitorCookieTimeout:function(bv){M=bv},setSessionCookieTimeout:setUserFingerprintSeed:enableUserFingerprint:respectDoNotTrack:crossDomainLinker:addListener:enableLinkClickTracking:refreshLinkClickTracking:enableActivityTracking:enableFormTracking:killFrame:redirectFile:setCountPreRendered:function(bv){ao=bv},setUserId:setUserIdFromLocation:function(bv){bt();bu=g.fromQuerystring(bv,bn)},setUserIdFromReferrer:setUserIdFromCookie:setCollectorCf:function(bv){y=aj(bv)},setCollectorUrl:setPlatform:function(bv){g.warn('setPlatform is deprecated. Instead add a "platform" field to the argmap argument of newTracker.');A.setPlatform(bv)},encodeBase64:flushBuffer:enableGeolocationContext:bm,trackPageView:trackStructEvent:function(by,bB,bw,bA,bz,bx,bv){A.trackStructEvent(by,bB,bw,bA,bz,bh(bx),bv)
},trackSelfDescribingEvent:function(bw,bx,bv){A.trackSelfDescribingEvent(bw,bh(bx),bv)},trackUnstructEvent:addTrans:addItem:trackTrans:trackLinkClick:trackAdImpression:trackAdClick:function(bx,bC,bv,by,bF,bA,bz,bB,bE,bw,bD){A.trackAdClick(bx,bC,bv,by,bF,bA,bz,bB,bE,bh(bw),bD)},trackAdConversion:trackSocialInteraction:function(by,bx,bz,bw,bv){A.trackSocialInteraction(by,bx,bz,bh(bw),bv)},trackAddToCart:function(bC,bx,bz,bA,bB,bw,by,bv){A.trackAddToCart(bC,bx,bz,bA,bB,bw,bh(by),bv)},trackRemoveFromCart:function(bC,bx,bz,bA,bB,bw,by,bv){A.trackRemoveFromCart(bC,bx,bz,bA,bB,bw,bh(by),bv)},trackSiteSearch:function(bA,bz,bw,bx,by,bv){A.trackSiteSearch(bA,bz,bw,bx,bh(by),bv)},trackTiming:function(bA,bx,bz,bw,by,bv){A.trackSelfDescribingEvent({schema:"iglu:com.snowplowanalytics.snowplow/timing/jsonschema/1-0-0",data:{category:bA,variable:bx,timing:bz,label:bw}},bh(by),bv)},trackEnhancedEcommerceAction:function(by,bw,bv){var bx=u.concat(bw||[]);
u.length=0;A.trackSelfDescribingEvent({schema:"iglu:com.google.analytics.enhanced-ecommerce/action/jsonschema/1-0-0",data:{action:by}},bh(bx),bv)},addEnhancedEcommerceActionContext:addEnhancedEcommerceImpressionContext:addEnhancedEcommerceProductContext:addEnhancedEcommercePromoContext:enableErrorTracking:trackError:preservePageViewId:}}())},{"./errors":13,"./forms":14,"./lib/detectors":17,"./lib/helpers":18,"./lib/proxies":19,"./lib_managed/lodash":20,"./links":21,"./out_queue":22,"browser-cookie-lite":1,sha1:6,"snowplow-tracker-core":7,uuid:12}]},{},[16]);
