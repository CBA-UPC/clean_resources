"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2499],{55420:(e,i,a)=>{a.d(i,{T:()=>m});var t=a(17053),n=a(88384),l=a(85039),o=a(71285),r=a(97922);const s="Ws8Ec3GREpT5PAUesr9b",d="kHu_FTRgoBLSLeAJtyKY";var u=a(11527);const m=function(e){let{onClick:i,name:a,images:m,canEdit:c,placeholderType:g,shape:v=r.Kc.SQUARE,dragUri:p=""}=e;const[k,h]=(0,n.R)(m),f=(0,l.VO)(k,h)===l.KO.loaded,b=(0,t.O)({itemUris:[p],dragLabelText:a});return(0,u.jsxs)("div",{className:s,"data-testid":`${g}-image`,draggable:!!p,onDragStart:b,children:[(0,u.jsx)(r.Oe,{loading:"eager",name:a,images:m,placeholderType:g,shape:v}),c&&(0,u.jsx)("div",{className:d,children:(0,u.jsx)(o.F,{overlay:f,onClick:i,rounded:v===r.Kc.CIRCLE})})]})}},1502:(e,i,a)=>{a.d(i,{k:()=>r});var t=a(82187),n=a.n(t),l=a(63068),o=a(11527);const r=e=>{let{children:i}=e;return(0,o.jsx)("div",{className:n()(l.Z.imageContainer,l.Z.imageContainerNew),children:i})}},36637:(e,i,a)=>{a.d(i,{g:()=>o});var t=a(69736),n=a(63068),l=a(11527);const o=e=>{let{children:i}=e;return(0,l.jsx)(t.x,{variant:"bodySmall",className:n.Z.pretitle,children:i})}},84108:(e,i,a)=>{a.r(i),a.d(i,{default:()=>qi});var t=a(50959),n=a(75802),l=a(75095),o=a(11317),r=(a(86277),a(82187)),s=a.n(r),d=a(85648),u=a(15103),m=a(91643),c=a(70930),g=a(67204),v=a(24676);const p="umiKMm5NVr5UeBJCHS6U",k="jzhwZKbfx4vrC_MYd_7c",h="MWWPQQjbjRfoGdPD8D68",f="kWCnF32FrVtGHmTy8QeV",b="uJxNEI2k7x8UCDdMKELt",y="wDIZ2yYKjfGI68I4cZ98";var N=a(11527);const x=e=>{const{uri:i}=e,{data:a,loading:t,error:n}=(0,v.J)(g.n5.getFollowers,[i]),l=null==a?void 0:a.profiles;return t?(0,N.jsx)(m.h,{hasError:null!==n,errorMessage:d.ag.get("error.not_found.title.page")}):(0,N.jsx)(c.P,{className:s()("contentSpacing",h),title:d.ag.get("followers"),total:null==l?void 0:l.length,showAll:!0,children:null==l?void 0:l.map(((e,i)=>(0,N.jsx)(u.P,{index:i,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)))})},S=e=>{const{uri:i}=e,{data:a,loading:t,error:n}=(0,v.J)(g.n5.getFollowing,[i]),l=null==a?void 0:a.profiles;return t?(0,N.jsx)(m.h,{hasError:null!==n,errorMessage:d.ag.get("error.not_found.title.page")}):(0,N.jsx)(c.P,{className:s()("contentSpacing",h),title:d.ag.get("following"),total:null==l?void 0:l.length,showAll:!0,children:null==l?void 0:l.map(((e,i)=>(0,N.jsx)(u.P,{index:i,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)))})};a(46758),a(39301);var I=a(22496),T=a(29132),_=a(23055),j=a(18517),w=a(15894),A=a(25959),P=a(87964),C=a(41736),F=a(41038),R=a(55420),O=a(97922),D=a(81639),U=a(16118),E=a(69736),L=a(7863),M=a(27563),W=a(43286),H=a(27926),K=a(88384),J=a(85039);const V="F8_EX1AeKxXNSeh1qiHq",B="valcBm4lLe9qFBcg0sFY",Q="tAIzXn8C9KriGwGuBfWg",G="PsrXxenHUFXYM1ub1xWw",Z="U_VWfeeLWnDPhUTxCmrQ",z=function(e){let{onClickEdit:i,onClickRemove:a,name:t,images:n,canEdit:l}=e;const[o,r]=(0,K.R)(n),u=(0,J.VO)(o,r)===J.KO.loaded;return(0,N.jsxs)("div",{className:V,children:[(0,N.jsx)(O.Oe,{loading:"eager",name:t,images:n,placeholderType:"user",shape:O.Kc.CIRCLE}),l&&(0,N.jsxs)("div",{className:s()(B,{[G]:u}),children:[(0,N.jsx)("button",{className:Q,"aria-haspopup":"true",onClick:i,type:"button",children:(0,N.jsx)(E.x,{variant:"bodyMedium",children:d.ag.get("user.edit-details.choose-photo")})}),(0,N.jsx)("div",{className:s()(Z,"icon"),children:(0,N.jsx)(H.y,{size:"xlarge","aria-hidden":!0})}),(0,N.jsx)("button",{className:Q,onClick:a,type:"button",children:(0,N.jsx)(E.x,{variant:"bodyMedium",children:d.ag.get("user.edit-details.remove-photo")})})]})]})};a(70054);var q=a(85101),X=a(17532),Y=(a(51016),a(80066),a(94557),a(57023),a(19139),a(65025),a(71969),a(6521),a(66690),a(86523),a(62924),a(66070),a(9590));const $={paths:""},ee={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();for(const a of e.paths)i.uint32(10).string(a);return i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...$};for(n.paths=[];a.pos<t;){const e=a.uint32();if(e>>>3==1)n.paths.push(a.string());else a.skipType(7&e)}return n},fromJSON(e){const i={...$};if(i.paths=[],void 0!==e.paths&&null!==e.paths)for(const a of e.paths)i.paths.push(String(a));return i},fromPartial(e){const i={...$};if(i.paths=[],void 0!==e.paths&&null!==e.paths)for(const a of e.paths)i.paths.push(a);return i},toJSON(e){const i={};return e.paths?i.paths=e.paths.map((e=>e)):i.paths=[],i}};a(31546);var ie=a(3959),ae=a(55872).lW;const te={value:0},ne={value:!1},le={value:""};const oe={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();return i.uint32(8).int32(e.value),i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...te};for(;a.pos<t;){const e=a.uint32();if(e>>>3==1)n.value=a.int32();else a.skipType(7&e)}return n},fromJSON(e){const i={...te};return void 0!==e.value&&null!==e.value?i.value=Number(e.value):i.value=0,i},fromPartial(e){const i={...te};return void 0!==e.value&&null!==e.value?i.value=e.value:i.value=0,i},toJSON(e){const i={};return void 0!==e.value&&(i.value=e.value),i}},re={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();return i.uint32(8).bool(e.value),i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...ne};for(;a.pos<t;){const e=a.uint32();if(e>>>3==1)n.value=a.bool();else a.skipType(7&e)}return n},fromJSON(e){const i={...ne};return void 0!==e.value&&null!==e.value?i.value=Boolean(e.value):i.value=!1,i},fromPartial(e){const i={...ne};return void 0!==e.value&&null!==e.value?i.value=e.value:i.value=!1,i},toJSON(e){const i={};return void 0!==e.value&&(i.value=e.value),i}},se={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();return i.uint32(10).string(e.value),i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...le};for(;a.pos<t;){const e=a.uint32();if(e>>>3==1)n.value=a.string();else a.skipType(7&e)}return n},fromJSON(e){const i={...le};return void 0!==e.value&&null!==e.value?i.value=String(e.value):i.value="",i},fromPartial(e){const i={...le};return void 0!==e.value&&null!==e.value?i.value=e.value:i.value="",i},toJSON(e){const i={};return void 0!==e.value&&(i.value=e.value),i}};Y.util.Long!==ie.Z&&(Y.util.Long=ie.Z,(0,Y.configure)());const de=globalThis;de.atob,de.btoa;const ue={maxWidth:0,maxHeight:0,url:""},me={},ce={},ge={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();return i.uint32(8).int32(e.maxWidth),i.uint32(16).int32(e.maxHeight),i.uint32(26).string(e.url),i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...ue};for(;a.pos<t;){const e=a.uint32();switch(e>>>3){case 1:n.maxWidth=a.int32();break;case 2:n.maxHeight=a.int32();break;case 3:n.url=a.string();break;default:a.skipType(7&e)}}return n},fromJSON(e){const i={...ue};return void 0!==e.maxWidth&&null!==e.maxWidth?i.maxWidth=Number(e.maxWidth):i.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?i.maxHeight=Number(e.maxHeight):i.maxHeight=0,void 0!==e.url&&null!==e.url?i.url=String(e.url):i.url="",i},fromPartial(e){const i={...ue};return void 0!==e.maxWidth&&null!==e.maxWidth?i.maxWidth=e.maxWidth:i.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?i.maxHeight=e.maxHeight:i.maxHeight=0,void 0!==e.url&&null!==e.url?i.url=e.url:i.url="",i},toJSON(e){const i={};return void 0!==e.maxWidth&&(i.maxWidth=e.maxWidth),void 0!==e.maxHeight&&(i.maxHeight=e.maxHeight),void 0!==e.url&&(i.url=e.url),i}},ve={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();void 0!==e.username&&void 0!==e.username&&se.encode({value:e.username},i.uint32(10).fork()).ldelim(),void 0!==e.name&&void 0!==e.name&&se.encode({value:e.name},i.uint32(18).fork()).ldelim();for(const a of e.images)ge.encode(a,i.uint32(26).fork()).ldelim();return void 0!==e.verified&&void 0!==e.verified&&re.encode({value:e.verified},i.uint32(34).fork()).ldelim(),void 0!==e.editProfileDisabled&&void 0!==e.editProfileDisabled&&re.encode({value:e.editProfileDisabled},i.uint32(42).fork()).ldelim(),void 0!==e.reportAbuseDisabled&&void 0!==e.reportAbuseDisabled&&re.encode({value:e.reportAbuseDisabled},i.uint32(50).fork()).ldelim(),void 0!==e.abuseReportedName&&void 0!==e.abuseReportedName&&re.encode({value:e.abuseReportedName},i.uint32(58).fork()).ldelim(),void 0!==e.abuseReportedImage&&void 0!==e.abuseReportedImage&&re.encode({value:e.abuseReportedImage},i.uint32(66).fork()).ldelim(),void 0!==e.hasSpotifyName&&void 0!==e.hasSpotifyName&&re.encode({value:e.hasSpotifyName},i.uint32(74).fork()).ldelim(),void 0!==e.hasSpotifyImage&&void 0!==e.hasSpotifyImage&&re.encode({value:e.hasSpotifyImage},i.uint32(82).fork()).ldelim(),void 0!==e.color&&void 0!==e.color&&oe.encode({value:e.color},i.uint32(90).fork()).ldelim(),i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...me};for(n.images=[];a.pos<t;){const e=a.uint32();switch(e>>>3){case 1:n.username=se.decode(a,a.uint32()).value;break;case 2:n.name=se.decode(a,a.uint32()).value;break;case 3:n.images.push(ge.decode(a,a.uint32()));break;case 4:n.verified=re.decode(a,a.uint32()).value;break;case 5:n.editProfileDisabled=re.decode(a,a.uint32()).value;break;case 6:n.reportAbuseDisabled=re.decode(a,a.uint32()).value;break;case 7:n.abuseReportedName=re.decode(a,a.uint32()).value;break;case 8:n.abuseReportedImage=re.decode(a,a.uint32()).value;break;case 9:n.hasSpotifyName=re.decode(a,a.uint32()).value;break;case 10:n.hasSpotifyImage=re.decode(a,a.uint32()).value;break;case 11:n.color=oe.decode(a,a.uint32()).value;break;default:a.skipType(7&e)}}return n},fromJSON(e){const i={...me};if(i.images=[],void 0!==e.username&&null!==e.username?i.username=String(e.username):i.username=void 0,void 0!==e.name&&null!==e.name?i.name=String(e.name):i.name=void 0,void 0!==e.images&&null!==e.images)for(const a of e.images)i.images.push(ge.fromJSON(a));return void 0!==e.verified&&null!==e.verified?i.verified=Boolean(e.verified):i.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?i.editProfileDisabled=Boolean(e.editProfileDisabled):i.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?i.reportAbuseDisabled=Boolean(e.reportAbuseDisabled):i.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?i.abuseReportedName=Boolean(e.abuseReportedName):i.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?i.abuseReportedImage=Boolean(e.abuseReportedImage):i.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?i.hasSpotifyName=Boolean(e.hasSpotifyName):i.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?i.hasSpotifyImage=Boolean(e.hasSpotifyImage):i.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?i.color=Number(e.color):i.color=void 0,i},fromPartial(e){const i={...me};if(i.images=[],void 0!==e.username&&null!==e.username?i.username=e.username:i.username=void 0,void 0!==e.name&&null!==e.name?i.name=e.name:i.name=void 0,void 0!==e.images&&null!==e.images)for(const a of e.images)i.images.push(ge.fromPartial(a));return void 0!==e.verified&&null!==e.verified?i.verified=e.verified:i.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?i.editProfileDisabled=e.editProfileDisabled:i.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?i.reportAbuseDisabled=e.reportAbuseDisabled:i.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?i.abuseReportedName=e.abuseReportedName:i.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?i.abuseReportedImage=e.abuseReportedImage:i.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?i.hasSpotifyName=e.hasSpotifyName:i.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?i.hasSpotifyImage=e.hasSpotifyImage:i.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?i.color=e.color:i.color=void 0,i},toJSON(e){const i={};return void 0!==e.username&&(i.username=e.username),void 0!==e.name&&(i.name=e.name),e.images?i.images=e.images.map((e=>e?ge.toJSON(e):void 0)):i.images=[],void 0!==e.verified&&(i.verified=e.verified),void 0!==e.editProfileDisabled&&(i.editProfileDisabled=e.editProfileDisabled),void 0!==e.reportAbuseDisabled&&(i.reportAbuseDisabled=e.reportAbuseDisabled),void 0!==e.abuseReportedName&&(i.abuseReportedName=e.abuseReportedName),void 0!==e.abuseReportedImage&&(i.abuseReportedImage=e.abuseReportedImage),void 0!==e.hasSpotifyName&&(i.hasSpotifyName=e.hasSpotifyName),void 0!==e.hasSpotifyImage&&(i.hasSpotifyImage=e.hasSpotifyImage),void 0!==e.color&&(i.color=e.color),i}},pe={encode(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.Writer.create();return void 0!==e.mask&&void 0!==e.mask&&ee.encode(e.mask,i.uint32(10).fork()).ldelim(),void 0!==e.userProfile&&void 0!==e.userProfile&&ve.encode(e.userProfile,i.uint32(18).fork()).ldelim(),i},decode(e,i){const a=e instanceof Uint8Array?new Y.Reader(e):e;let t=void 0===i?a.len:a.pos+i;const n={...ce};for(;a.pos<t;){const e=a.uint32();switch(e>>>3){case 1:n.mask=ee.decode(a,a.uint32());break;case 2:n.userProfile=ve.decode(a,a.uint32());break;default:a.skipType(7&e)}}return n},fromJSON(e){const i={...ce};return void 0!==e.mask&&null!==e.mask?i.mask=ee.fromJSON(e.mask):i.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?i.userProfile=ve.fromJSON(e.userProfile):i.userProfile=void 0,i},fromPartial(e){const i={...ce};return void 0!==e.mask&&null!==e.mask?i.mask=ee.fromPartial(e.mask):i.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?i.userProfile=ve.fromPartial(e.userProfile):i.userProfile=void 0,i},toJSON(e){const i={};return void 0!==e.mask&&(i.mask=e.mask?ee.toJSON(e.mask):void 0),void 0!==e.userProfile&&(i.userProfile=e.userProfile?ve.toJSON(e.userProfile):void 0),i}},ke=`${q.XA}/identity`;async function he(e,i,a){let{name:t,imageUploadToken:n}=a;void 0!==t&&await async function(e,i,a){const t=pe.encode(pe.fromPartial({mask:{paths:["name"]},userProfile:null!==a?{name:a}:{}}));await e.build().withHost(ke).withMethod("POST").withPath(`/v3/user/username/${encodeURIComponent((0,X.C)(i))}`).withEndpointIdentifier("/v3/user/username/{username}").withBody(t.finish()).withoutMarket().send()}(e,i,t),void 0!==n&&(null!==n?await async function(e,i,a){await e.build().withHost(ke).withMethod("POST").withPath(`/v3/profile-image/${encodeURIComponent((0,X.C)(i))}/${a}`).withEndpointIdentifier("/v3/profile-image/{username}/{uploadToken}").withoutMarket().send()}(e,i,n):await async function(e,i){await e.build().withHost(ke).withMethod("DELETE").withPath(`/v3/profile-image/${encodeURIComponent((0,X.C)(i))}`).withEndpointIdentifier("/v3/profile-image/{username}").withoutMarket().send()}(e,i))}var fe=a(13188);const be={type:"error",get message(){return d.ag.get("user.edit-details.error.file-size-exceeded",10)}},ye={type:"error",get message(){return d.ag.get("user.edit-details.error.too-small",300,300)}},Ne={type:"error",get message(){return d.ag.get("user.edit-details.error.missing-name")}},xe={type:"error",get message(){return d.ag.get("user.edit-details.error.failed-to-save")}},Se={type:"error",get message(){return d.ag.get("user.edit-details.error.file-upload-failed")}};function Ie(e){return{type:"setLoading",loading:e}}function Te(e){return{type:"setMessage",message:e}}function _e(e,i){switch(i.type){case"setName":return{...e,name:i.name};case"setMessage":return{...e,message:i.message,loading:!1};case"setLoading":return{...e,loading:i.loading,message:null};case"setImageData":return{...e,imageData:i.data,removeImage:!1};case"setImageToken":return{...e,imageToken:i.token,removeImage:!1};case"removeImage":return{...e,imageToken:void 0,imageData:void 0,image:void 0,removeImage:!0};default:return e}}var je=a(40537),we=a(37931),Ae=a(57201);const Pe="XwNfIrI6_hCa_9_T2cQB",Ce="so0bdX3oZH6YW5_nGxIR",Fe="aM3plU4zzDqjWlvUHGYb",Re="zHeo4VUxytwm6Ptr0QyA",Oe="vAeyAmeLkDEDKdL9Hou0",De="dnmzO6yYKkxUV8jl7O1Z",Ue="oN9QVvJKEtdTH3HGfCu1",Ee="uj7hczcCH1dZpse8Kfmi",Le="wvLAEV5wF5C5ej6rvimT",Me="gAQfzAUp1FuSXODeZJfP",We="dMhJaxli87_22jb_3d9x",He="MDb7QhAtHeyM4gKj8j8t",Ke="zGbjZMZ1DTx4futEbN9l",Je=t.memo((function(e){let{uri:i,name:a,image:n,onClose:l,shouldOpenImagePicker:o,userCapabilities:r}=e;const[u,m]=(0,we.Hs)(),[c,g]=function(e){let{name:i,image:a}=e;return(0,t.useReducer)(_e,{loading:!1,message:null,name:i,image:a})}({name:a,image:n}),v=(0,t.useMemo)((()=>{const e=c.imageData||c.image;return e?[{url:e,width:300,height:300}]:[]}),[c.image,c.imageData]);(0,t.useEffect)((()=>{o&&m()}),[m,o]);const p=(0,t.useCallback)((e=>{e===we.Hy.FILE_TOO_BIG?g(Te(be)):e===we.Hy.IMAGE_TOO_SMALL&&g(Te(ye))}),[g]),k=(0,t.useCallback)((()=>{g({type:"removeImage"})}),[g]),h=(0,t.useCallback)((async e=>{e.preventDefault();if(0!==c.name.trim().length){g(Ie(!0));try{const e=c.removeImage?null:c.imageToken;await async function(e,i){let{name:a,imageUploadToken:t}=i;await he(fe.b.getInstance(),e,{name:a,imageUploadToken:t})}(i,{name:c.name,imageUploadToken:e}),l({name:c.name,image:c.imageData||c.image})}catch(a){g(Te(xe))}}else g(Te(Ne))}),[g,l,c.image,c.imageData,c.imageToken,c.name,c.removeImage,i]);return(0,N.jsx)(je.Z,{isOpen:!0,contentLabel:d.ag.get("user.edit-details.title"),onRequestClose:()=>l(),children:(0,N.jsxs)("div",{className:Pe,children:[(0,N.jsxs)("div",{className:Fe,children:[(0,N.jsx)(E.x,{as:"h1",variant:"titleSmall",children:d.ag.get("user.edit-details.title")}),(0,N.jsx)("button",{className:Re,onClick:()=>l(),"aria-label":d.ag.get("close"),children:(0,N.jsx)(L.k,{size:"small"})})]}),c.message&&(0,N.jsx)(Ae.X,{isErrorMessage:"error"===c.message.type,message:c.message.message}),(0,N.jsxs)("form",{className:Ce,onSubmit:h,children:[r.edit_image&&(0,N.jsx)(we.uL,{isOpen:u,minImageWidth:300,minImageHeight:300,maxFileSizeMB:10,onChange:async function(e){if(!e)return;const{imageFile:i,imageDataUrl:a}=e;if(g(Te(null)),g({type:"setImageData",data:a}),i)try{g(Ie(!0));const e=await async function(e){const i=await fe.b.getInstance().build().withEndpointIdentifier("image-upload/v4/user-profile").withHost("https://image-upload.spotify.com/v4").withMethod("POST").withPath("/user-profile").withBody(e).withoutGlobalHeaders().withHeaders([{key:"Content-Type",value:"image/jpeg"}]).withoutMarket().send();if(!i.body)throw new Error("No upload token recieved");return i.body.uploadToken}(i);g({type:"setImageToken",token:e}),g(Ie(!1))}catch{g(Te(Se))}},onError:p}),(0,N.jsxs)("div",{className:Oe,children:[(0,N.jsx)(z,{name:a,images:v,onClickEdit:m,onClickRemove:k,canEdit:r.edit_image}),c.loading&&(0,N.jsx)("div",{className:De,children:(0,N.jsx)(M.T,{})})]}),(0,N.jsxs)("div",{className:Ee,children:[(0,N.jsx)("label",{htmlFor:"user-edit-name",className:Le,children:(0,N.jsx)(E.x,{variant:"marginalBold",className:Me,children:d.ag.get("user.edit-details.name-label")})}),(0,N.jsx)("input",{"data-testid":"user-edit-name-input",id:"user-edit-name",type:"text",dir:"auto",className:s()(Ue,We),onChange:e=>{g(function(e){return{type:"setName",name:e}}(e.target.value))},placeholder:d.ag.get("user.edit-details.name-placeholder"),maxLength:32,value:c.name,disabled:!r.edit_name})]}),(0,N.jsx)("div",{className:He,children:(0,N.jsx)(W.D,{colorSet:"invertedLight",onClick:h,disabled:c.loading,children:d.ag.get("save")})}),(0,N.jsx)(E.x,{as:"p",variant:"marginalBold",className:Ke,children:d.ag.get("image-upload.legal-disclaimer")})]})]})})}));var Ve=a(50540),Be=a(71318),Qe=a(87350),Ge=a(82813),Ze=a(10956),ze=a(76950),qe=a(90284),Xe=a(80626),Ye=a(58912),$e=a(55649),ei=a(79694),ii=a(97013),ai=a(6395),ti=a(67208),ni=a(13734),li=a(9443),oi=a(33608),ri=a(11406),si=a(66819);const di=t.memo((function(e){let{openModal:i,spec:a,logger:n,name:l,backgroundColor:o,isCurrentUser:r,uri:s}=e;const[u,m]=(0,oi.H)(s),c=(0,ni.o)(),g=!(0,li.k)(),v=(0,t.useCallback)((()=>{c({targetUri:s,intent:u?"unfollow":"follow",type:"click"});const e=a.actionBarFactory().followButtonFactory();u?(m(!1),n.logInteraction(e.hitUnfollow({itemToBeUnfollowed:s}))):(m(!0),n.logInteraction(e.hitFollow({itemToBeFollowed:s})))}),[u,n,c,m,a,s]),p=(0,t.useCallback)((()=>{const e=a.actionBarFactory().contextMenuButtonFactory().hitUiReveal();n.logInteraction(e)}),[n,a]),k=(0,si.j)();return(0,N.jsx)(ei.o,{backgroundColor:o,children:(0,N.jsxs)(ei.F,{children:[!r&&(0,N.jsx)(ai.r,{children:(0,N.jsx)(ti.e,{isFollowing:Boolean(u),onClick:v,disabled:g})}),(0,N.jsx)(ri.y,{menu:(0,N.jsx)(C.I,{uri:s,onEditProfileCallback:i}),children:(0,N.jsx)(ii.z,{label:d.ag.get("more.label.context",l),onClick:p,size:k})})]})})}));var ui=a(53502),mi=a(36199),ci=a(90824),gi=a(42550),vi=a(17162),pi=a(45438),ki=a(22527),hi=a(73928),fi=a(82857);const bi=t.memo((function(e){let{tracks:i,hasHeaderRow:a=!1,nrTracksVisible:n,uri:l}=e;const r=(0,X.C)(l),s=(0,o.qC)(r,"tracks").toURI(),u=(0,t.useMemo)((()=>n?i.slice(0,n):i),[n,i]),{usePlayContextItem:m}=(0,ki.n)({uri:s,pages:[{items:i.map((e=>({type:fi.p.TRACK,uri:e.uri,uid:null,provider:null})))}]},{featureIdentifier:"profile",referrerIdentifier:"user_profile"}),c=(0,t.useCallback)(((e,i)=>{var a,t,n;const l=(0,Ye.X)(null==e||null===(a=e.albumOfTrack)||void 0===a||null===(a=a.coverArt)||void 0===a?void 0:a.sources,{desiredSize:40});return(0,N.jsx)(ci.SS,{index:i,uri:(0,vi.$)(e),duration_ms:e.duration.totalMilliseconds,name:e.name,artists:e.artists.items.map((e=>{let{uri:i,profile:{name:a}}=e;return{uri:i,name:a}})),album:e.albumOfTrack,isPlayable:!0,isExplicit:(null===(t=e.contentRating)||void 0===t?void 0:t.label)===hi.KS.Explicit,isMOGEFRestricted:(null===(n=e.contentRating)||void 0===n?void 0:n.label)===hi.KS.NineteenPlus,imgUrl:(null==l?void 0:l.url)||"",contextUri:s,usePlayContextItem:m},i+e.uri)}),[s,m]),g=(0,t.useMemo)((()=>[mi.QD.INDEX,mi.QD.TITLE_AND_ARTIST,mi.QD.ALBUM,mi.QD.DURATION]),[]),v=(0,t.useCallback)((e=>({uri:e.uri})),[]),p=(0,gi.o)()?0:void 0;return(0,N.jsx)(pi.JL,{value:"user-top-tracks-tracklist",children:(0,N.jsx)(mi.Pv,{ariaLabel:d.ag.get("top_tracks_this_month"),renderRow:c,nrTracks:u.length,tracks:u,resolveItem:v,headerTop:p,hasHeaderRow:a,columns:g,columnPersistenceKey:"user-top-tracks-tracklist"})})}),((e,i)=>e.tracks===i.tracks)),yi=t.memo((function(e){let{tracks:i,title:a,tagline:n,seeAllUri:l,className:o,uri:r,spec:s}=e;const d=(0,Xe.$P)(),u=(0,t.useCallback)((()=>{const e=s.titleLinkFactory().hitUiNavigate({destination:l});d.logInteraction(e)}),[d,l,s]),m=(0,t.useCallback)((()=>{const e=s.titleLinkFactory().hitUiNavigate({destination:l});d.logInteraction(e)}),[d,l,s]);if(!i||0===i.totalCount||0===i.items.length)return null;const c=i.totalCount>4;return(0,N.jsxs)("section",{className:o,children:[(0,N.jsx)(ui.r,{title:a,tagline:n,seeAllUri:l,hasMoreElements:c,onClickTitle:u,onClickSeeAll:m}),(0,N.jsx)(Xe.Nh,{spec:s,children:(0,N.jsx)(bi,{tracks:i.items,uri:r,nrTracksVisible:4})})]})}),((e,i)=>e.tracks===i.tracks));function Ni(e,i){switch(i.type){case"OPEN_MODAL":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!1};case"OPEN_MODAL_WITH_IMAGEPICKER":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!0};case"CLOSE_MODAL":return{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1};default:return e}}var xi=a(1502),Si=a(36637),Ii=a(17866),Ti=a(36255),_i=a(61408),ji=a(60637),wi=a(17676),Ai=(a(53321),a(20069));const Pi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userTopContent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeTopArtists"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topArtistsInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AffinityInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeTopTracks"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topTracksInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AffinityInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"me"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userTopArtists"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userTopTracks"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userTopArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topArtists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"topArtistsInput"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeTopArtists"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistPageV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userTopTracks"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"topTracksInput"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeTopTracks"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackPageV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]};function Ci(e){return"Artist"===e.__typename}function Fi(e){var i;if("ArtistPageV2"!==(null==e||null===(i=e.topArtists)||void 0===i?void 0:i.__typename))return null;const a=e.topArtists.items.map((e=>e.data)).filter(Ci);return 0===a.length?null:{totalCount:e.topArtists.totalCount,items:a}}function Ri(e){return"Track"===e.__typename}function Oi(e){var i;if("TrackPageV2"!==(null==e||null===(i=e.topTracks)||void 0===i?void 0:i.__typename))return null;const a=e.topTracks.items.map((e=>e.data)).filter(Ri).filter((e=>null!==e.albumOfTrack));return 0===a.length?null:{totalCount:e.topTracks.totalCount,items:a}}const Di=hi.K1.Affinity,Ui=hi.eB.ShortTerm;function Ei(e){var i,a;let{includeTopArtists:t,includeTopTracks:n,topArtistsLimit:l,topTracksLimit:o}=e;const{data:r,loading:s,error:d}=(u={includeTopArtists:t,topArtistsInput:{offset:0,limit:l,sortBy:Di,timeRange:Ui},includeTopTracks:n,topTracksInput:{offset:0,limit:o,sortBy:Di,timeRange:Ui}},m={enabled:t||n,gcTime:18e5,staleTime:3e5},(0,Ai.a)(Pi,u,m));var u,m;return null!==d?{topTracks:null,topArtists:null,loading:s,error:new Error("Failed loading user top content!")}:{topTracks:Oi((null==r||null===(i=r.me)||void 0===i?void 0:i.profile)??null),topArtists:Fi((null==r||null===(a=r.me)||void 0===a?void 0:a.profile)??null),loading:s,error:null}}const Li=18e5,Mi=3e5,Wi=(0,_.P1)(Qe.dy,(e=>(null==e?void 0:e.images)||[])),Hi=e=>{var i;let{uri:a,isCurrentUser:n}=e;const l=null===(i=(0,T.v9)(Qe.dy))||void 0===i?void 0:i.uri,r=(0,T.v9)(Qe.Gf),c=(0,T.v9)(Wi),h=(0,T.I0)(),f=(0,I.NL)(),b=(0,j.W6)(wi.J4M,{loadingValue:!0}),y=(0,t.useMemo)((()=>(0,Ye.X)(c)),[c]),[{isModalOpen:x,modalVariant:S,shouldOpenImagePicker:_},E]=function(){const[e,i]=(0,t.useReducer)(Ni,{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1});return[e,i]}(),{data:L,loading:M,queryKey:W}=(0,v.J)(g.n5.getProfile,[{uri:a,playlists:10,artists:10,episodes:10}],{gcTime:Li,staleTime:Mi}),H=(0,Ve.g)();(0,ji.d)(_i.rA.OPERATION_COMPLETE,(()=>{f.invalidateQueries({queryKey:W})})),(0,qe.b)(ze.EW.OPERATION_COMPLETE,(()=>{f.invalidateQueries({queryKey:W})}));const K=null==L?void 0:L.public_playlists,J=null==L?void 0:L.is_verified,V=null==L?void 0:L.recently_played_artists,B=n?(null==y?void 0:y.url)||"":(null==L?void 0:L.image_url)||"",Q=(0,X.C)(a),G=(n?r:null==L?void 0:L.name)||"",Z=(0,Be.Z)((null==L?void 0:L.image_url)||null),{spec:z,logger:q}=(0,Xe.fU)(w.L,{data:{uri:a}}),Y=(0,t.useMemo)((()=>z.sectionTopTracksFactory()),[z]),$=!H&&(!1!==(null==L?void 0:L.show_follows)||n),ee=n&&b,{data:ie,loading:ae}=(0,v.J)(g.n5.getFollowing,[a],{enabled:$,gcTime:Li,staleTime:Mi}),te=null==ie?void 0:ie.profiles,{data:ne,loading:le}=(0,v.J)(g.n5.getFollowers,[a],{enabled:$,gcTime:Li,staleTime:Mi}),oe=null==ne?void 0:ne.profiles,re=null==te?void 0:te.some((e=>e.uri===l)),{topArtists:se,topTracks:de,loading:ue}=Ei({includeTopArtists:ee,includeTopTracks:ee,topArtistsLimit:10,topTracksLimit:4}),me=(0,t.useCallback)((e=>{E({type:"CLOSE_MODAL"}),e&&(h((0,Ge.dL)(e.name)),h((0,Ge.GR)(e.image?[{url:e.image,height:null,width:null}]:[])))}),[E,h]),ce=(0,t.useCallback)((()=>{E({type:"OPEN_MODAL"});const e=z.headerFactory().usernameFactory().hitUiReveal();q.logInteraction(e)}),[q,E,z]),ge=(0,t.useCallback)((()=>{E({type:"OPEN_MODAL_WITH_IMAGEPICKER"});const e=z.headerFactory().profileImageFactory().hitUiReveal();q.logInteraction(e)}),[q,E,z]),ve=(0,t.useMemo)((()=>[{url:B}]),[B]),pe=(0,t.useCallback)((()=>{const e=z.headerFactory().usernameFactory().hitUiReveal();q.logInteraction(e)}),[q,z]),ke=(0,t.useCallback)(((e,i)=>{if(!i)return;const a=z.headerFactory().followersLinkFactory().hitUiNavigate({destination:i});q.logInteraction(a)}),[q,z]),he=(0,t.useCallback)(((e,i)=>{if(!i)return;const a=z.headerFactory().followersLinkFactory().hitUiNavigate({destination:i});q.logInteraction(a)}),[q,z]);if(!L||M||ae||le||ue)return(0,N.jsx)(m.h,{hasError:!1,errorMessage:d.ag.get("error.not_found.title.page")});const fe=s()("contentSpacing",k),be=$&&!(null==oe||!oe.length),ye=$&&!(null==te||!te.length);return(0,N.jsxs)("div",{className:p,children:[(0,N.jsx)(F.$,{children:G}),(0,N.jsxs)(O.gF,{backgroundColor:Z,children:[(0,N.jsx)(D.W,{children:(0,N.jsx)(U.i,{text:G})}),(0,N.jsx)(Ze._,{menu:(0,N.jsx)(C.I,{uri:L.uri}),children:(0,N.jsx)(xi.k,{children:(0,N.jsx)(R.T,{canEdit:n&&!L.edit_image_disabled,name:G,images:ve,onClick:ge,placeholderType:"user",shape:O.Kc.CIRCLE})})}),(0,N.jsxs)(O.sP,{children:[(0,N.jsx)(Si.g,{children:J?(0,N.jsx)(Ii.S,{text:d.ag.get("card.tag.profile")}):d.ag.get("card.tag.profile")}),(0,N.jsx)(Ze._,{menu:(0,N.jsx)(C.I,{uri:L.uri}),children:(0,N.jsx)(O.xd,{canEdit:n&&!L.edit_name_disabled,editTitle:d.ag.get("playlist.edit-details.title"),onClick:ce,children:G})}),(0,N.jsx)(O.QS,{totalFollowers:L.followers_count,totalFollowing:L.following_count,publicPlaylists:L.total_public_playlists_count,userUri:a,onCreatorClick:pe,onTotalFollowersClick:ke,onTotalFollowingClick:he,theyFollowUs:re})]})]}),(0,N.jsx)(di,{openModal:ce,spec:z,logger:q,name:G,backgroundColor:Z,isCurrentUser:n,uri:a}),(0,N.jsxs)(Xe.Nh,{spec:z,children:[n&&(0,N.jsxs)(N.Fragment,{children:[null!==se&&(0,N.jsx)(Ti.q,{className:fe,total:se.totalCount,title:d.ag.get("top_artists_this_month"),tagline:d.ag.get("only_visible_to_you"),seeAllUri:(0,o.QK)(Q,["top","artists"]).toURI(),id:"top-artists",index:0,children:se.items.map(((e,i)=>{var a;return(0,N.jsx)(A.I,{index:i,uri:e.uri,name:e.profile.name,images:(null===(a=e.visuals.avatarImage)||void 0===a?void 0:a.sources)??[]},e.uri)}))}),(0,N.jsx)(yi,{className:fe,title:d.ag.get("top_tracks_this_month"),tagline:d.ag.get("only_visible_to_you"),seeAllUri:(0,o.QK)(Q,["top","tracks"]).toURI(),uri:a,tracks:de,spec:Y})]}),(0,N.jsx)(Ti.q,{className:fe,total:L.total_public_playlists_count,title:d.ag.get("public_playlists"),seeAllUri:(0,o.QK)(Q,["playlists"]).toURI(),id:"playlists",index:1,children:null==K?void 0:K.map(((e,i)=>(0,N.jsx)(P.Z,{index:i,uri:e.uri,name:e.name,images:[{url:(0,$e.p)({imageUriOrUrl:e.image_url}),width:300,height:300}],authorName:e.owner_name,description:e.followers_count?d.ag.get("user.followers",e.followers_count):""},e.uri)))}),null!=V&&V.length?(0,N.jsx)(Ti.q,{className:fe,total:null==V?void 0:V.length,title:d.ag.get("recently_played_artists"),seeAllUri:(0,o.QK)(Q,["recently-played-artists"]).toURI(),id:"recently-played-artists",index:2,children:null==V?void 0:V.map(((e,i)=>(0,N.jsx)(A.I,{index:i,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)))}):null,be?(0,N.jsx)(Ti.q,{className:fe,title:d.ag.get("followers"),total:null==oe?void 0:oe.length,seeAllUri:(0,o.QK)(Q,["followers"]).toURI(),id:"followers",index:3,children:null==oe?void 0:oe.map(((e,i)=>(0,N.jsx)(u.P,{index:i,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)))}):null,ye?(0,N.jsx)(Ti.q,{className:fe,title:d.ag.get("following"),total:null==te?void 0:te.length,seeAllUri:(0,o.QK)(Q,["following"]).toURI(),id:"following",index:4,children:null==te?void 0:te.map(((e,i)=>(0,N.jsx)(u.P,{index:i,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)))}):null,n&&x&&("editProfile"===S?(0,N.jsx)(Je,{uri:a,name:G,image:B,onClose:me,shouldOpenImagePicker:_,userCapabilities:{edit_image:!(null!=L&&L.edit_image_disabled),edit_name:!(null!=L&&L.edit_name_disabled)}}):null)]})]})},Ki=e=>{const{uri:i}=e,{data:a,loading:t,error:n}=(0,v.J)(g.n5.getPlaylists,[{uri:i}]),{public_playlists:l,total_public_playlists_count:o=0}=a||{};return t?(0,N.jsx)(m.h,{hasError:null!==n,errorMessage:d.ag.get("error.not_found.title.page")}):(0,N.jsx)(c.P,{className:s()("contentSpacing",h),total:o,title:d.ag.get("public_playlists"),showAll:!0,children:null==l?void 0:l.map(((e,i)=>(0,N.jsx)(P.Z,{index:i,uri:e.uri,name:e.name,authorName:e.owner_name,description:e.followers_count?d.ag.get("user.followers",e.followers_count):"",images:[{url:(0,$e.p)({imageUriOrUrl:e.image_url}),width:300,height:300}]},e.uri)))})},Ji=e=>{const{uri:i}=e,{data:a,loading:t,error:n}=(0,v.J)(g.n5.getRecentlyPlayedArtists,[{uri:i,limit:50}]),l=null==a?void 0:a.artists;return t?(0,N.jsx)(m.h,{hasError:null!==n,errorMessage:d.ag.get("error.not_found.title.page")}):(0,N.jsx)(c.P,{className:s()("contentSpacing",h),total:null==l?void 0:l.length,title:d.ag.get("recently_played_artists"),showAll:!0,children:null==l?void 0:l.map(((e,i)=>(0,N.jsx)(A.I,{index:i,name:e.name,uri:e.uri,images:[{url:e.image_url}]},e.uri)))})},Vi=()=>{const{topArtists:e,loading:i,error:a}=Ei({includeTopArtists:!0,includeTopTracks:!1,topArtistsLimit:100,topTracksLimit:0});return i?(0,N.jsx)(m.h,{hasError:null!==a,errorMessage:d.ag.get("error.not_found.title.page")}):null===e?null:(0,N.jsx)(c.P,{className:s()("contentSpacing",h),total:e.items.length,title:d.ag.get("top_artists_this_month"),tagline:d.ag.get("only_visible_to_you"),showAll:!0,children:e.items.map(((e,i)=>{var a;return(0,N.jsx)(A.I,{index:i,uri:e.uri,name:e.profile.name,images:(null===(a=e.visuals.avatarImage)||void 0===a?void 0:a.sources)??[]},e.uri)}))})},Bi=e=>{let{isCurrentUser:i}=e;return i?(0,N.jsx)(Vi,{}):(0,N.jsx)(m.h,{hasError:!0,errorMessage:d.ag.get("error.not_found.title.page")})},Qi=e=>{let{uri:i}=e;const{topTracks:a,loading:t,error:n}=Ei({includeTopArtists:!1,includeTopTracks:!0,topArtistsLimit:0,topTracksLimit:100});return t?(0,N.jsx)(m.h,{hasError:null!==n,errorMessage:d.ag.get("error.not_found.title.page")}):null===a?null:(0,N.jsxs)("div",{className:s()("contentSpacing",h,f),children:[(0,N.jsxs)("div",{className:b,children:[(0,N.jsx)(E.x,{as:"h1",variant:"titleSmall",className:y,children:d.ag.get("top_tracks_this_month")}),(0,N.jsx)(E.x,{as:"p",variant:"bodySmall",children:d.ag.get("only_visible_to_you")})]}),(0,N.jsx)(bi,{tracks:a.items,uri:i,hasHeaderRow:!0})]})},Gi=e=>{let{uri:i,isCurrentUser:a}=e;return a?(0,N.jsx)(Qi,{uri:i}):(0,N.jsx)(m.h,{hasError:!0,errorMessage:d.ag.get("error.not_found.title.page")})};var Zi=a(85803);var zi=a(963);const qi=(0,t.memo)((function(){const{userId:e=""}=(0,n.UO)(),i=decodeURIComponent(e),a=(0,o.QK)(i).toURI(),t=(e=>{var i;const a=(0,Ve.g)(),t=null===(i=(0,Zi.r)())||void 0===i?void 0:i.username;return!a&&t===e})(i);return(0,N.jsx)("section",{children:(0,N.jsxs)(n.Z5,{children:[(0,N.jsx)(n.AW,{path:"playlists",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE_PLAYLISTS,children:(0,N.jsx)(Ki,{uri:a})})}),(0,N.jsx)(n.AW,{path:"top/tracks",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE_TOP_TRACKS,children:(0,N.jsx)(Gi,{uri:a,isCurrentUser:t})})}),(0,N.jsx)(n.AW,{path:"top/artists",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE_TOP_ARTISTS,children:(0,N.jsx)(Bi,{isCurrentUser:t})})}),(0,N.jsx)(n.AW,{path:"recently-played-artists",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE_RECENTLY_PLAYED_ARTISTS,children:(0,N.jsx)(Ji,{uri:a})})}),(0,N.jsx)(n.AW,{path:"following",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE_FOLLOWING,children:(0,N.jsx)(S,{uri:a})})}),(0,N.jsx)(n.AW,{path:"followers",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE_FOLLOWERS,children:(0,N.jsx)(x,{uri:a})})}),(0,N.jsx)(n.AW,{path:"/",element:(0,N.jsx)(zi.K,{pageId:l.Wg.PROFILE,children:(0,N.jsx)(Hi,{uri:a,isCurrentUser:t})})})]})})}))},85803:(e,i,a)=>{a.d(i,{r:()=>l});a(86277);var t=a(29132),n=a(82857);const l=()=>{const e=(0,t.v9)((e=>{var i;return null===(i=e.session)||void 0===i?void 0:i.user}));return e?{type:n.p.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((e=>{let{url:i,width:a,height:t}=e;return{url:i,width:a||void 0,height:t||void 0}}))}:null}}}]);
//# sourceMappingURL=xpui-routes-profile.2533d29b.js.map