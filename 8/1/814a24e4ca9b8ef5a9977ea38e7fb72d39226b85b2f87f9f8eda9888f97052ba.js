(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3217],{66533:2612:18406:15329:function(e,t,n){"use strict";n.d(t,{Z:function(){return MissingViewPermission}});var a=n(52322),i=n(99219),l=n(51830);,38426:function(e,t,n){"use strict";n.d(t,{Z:function(){return SelectThemes}});var a=n(52322),i=n(99219),l=n(18318),r=n(73235),o=n(66547),s=n(26806);function _templateObject(){let e=(0,r._)(["\n    query ListThemes($data: ThemeQueryInput!) {\n  themes(data: $data) {\n    id\n    count\n    results {\n      id\n      name\n      creator {\n        id\n      }\n      draft {\n        id\n        dialogBgColor\n        buttonBgColor\n        dialogBorderColor\n      }\n    }\n  }\n}\n    "]);return _templateObject=function(){return e},e}let c=(0,o.ZP)(_templateObject());var d=n(53954),u=n(69260);let ThemeMiniPreview=ThemeOption=,70805:31024:function(e,t,n){"use strict";n.d(t,{Z:function(){return ActionsDropdown}});var a=n(52322),i=n(39708),l=n(99219),r=n(83122);,61096:function(e,t,n){"use strict";n.d(t,{s:function(){return EditableText}});var a=n(52322),i=n(2784),l=n(83122),r=n(20851);,25948:9602:function(e,t,n){"use strict";n.d(t,{M:function(){return useUpdateWorkspaceMutation}});var a=n(73235),i=n(66547),l=n(52793),r=n(26806);function _templateObject(){let e=(0,a._)(["\n    mutation UpdateWorkspace($id: String!, $name: String, $slug: String, $defaultThemeId: String, $accountType: WorkspaceAccountType, $referredBy: ReferredBy, $trialEndDate: String, $showNavatticBranding: Boolean, $hideAccountsTab: Boolean, $paymentMethodRequired: Boolean, $planType: WorkspacePlanType, $teamLimit: Int) {\n  updateWorkspace(\n    id: $id\n    name: $name\n    slug: $slug\n    defaultThemeId: $defaultThemeId\n    accountType: $accountType\n    referredBy: $referredBy\n    trialEndDate: $trialEndDate\n    showNavatticBranding: $showNavatticBranding\n    hideAccountsTab: $hideAccountsTab\n    paymentMethodRequired: $paymentMethodRequired\n    planType: $planType\n    teamLimit: $teamLimit\n  ) {\n    ...Workspace\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let o=(0,i.ZP)(_templateObject(),l.L);,1706:function(e,t,n){"use strict";var a=n(2784),i=n(83122),l=n(5632);t.Z=e=>{let{setOpenNew:t}=e,n=(0,l.useRouter)();(0,a.useEffect)(()=>{let{create:e}=(0,i.H8)(n.query);e&&t(!0)},[n,t])}},48464:66534:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(52322),i=n(2784),l=n(2612),r=n(99219),o=n(18406),s=n(97185),c=n(15329),d=n(81291),u=n(25948),m=n(54532),h=n(70805),p=n(5841),f=n(51830),y=n(73235),x=n(66547),g=n(26806);function _templateObject(){let e=(0,y._)(["\n    mutation UpdateTheme($data: ThemeUpdateInput!) {\n  updateTheme(data: $data) {\n    id\n    name\n  }\n}\n    "]);return _templateObject=function(){return e},e}let A=(0,x.ZP)(_templateObject());var v=n(61096),b=n(4839),k=n(31024),V=n(32517);et j=(0,x.ZP)(deleteTheme_templateObject());var T=n(17554);function duplicateTheme_templateObject(){let e=(0,y._)(["\n    mutation DuplicateTheme($id: String!, $workspaceId: String!) {\n  duplicateTheme(id: $id, workspaceId: $workspaceId) {\n    id\n    name\n    draft {\n      ...ThemeVersion\n    }\n  }\n}\n    ",""]);return duplicateTheme_templateObject=function(){return e},e}let w=(0,x.ZP)(duplicateTheme_templateObject(),T.A);var N=n(9602),S=n(86414),C=n(53954),_=n(5632);function ThemeMoreActions(e){let{theme:t,isDefault:n,openEditModal:i}=e,l=(0,_.useRouter)(),r=l.query.workspace_slug,{id:o}=t,[,s]=g.Db(j),[,c]=g.Db(w),[,d]=(0,N.M)(),{workspace:u}=(0,C.cF)(),handleDuplicate=async()=>{let{id:e}=t;try{await c({id:e,workspaceId:null==u?void 0:u.id})}catch(e){console.error(e),(0,V.Rn)("Unable to duplicate theme")}S.Z.track("theme_duplicated"),l.push({pathname:"/[workspace_slug]/themes",query:{workspace_slug:r}})},handleDelete=async()=>{if(n){(0,V.Rn)("Can't delete default theme");return}confirm("Are you sure you want to delete this theme?")&&(await s({id:o}),S.Z.track("theme_deleted"),l.push({pathname:"/[workspace_slug]/themes",query:{workspace_slug:r}}))},handleSetDefault=async()=>{try{await d({id:null==u?void 0:u.id,defaultThemeId:o})}catch(e){console.error(e),(0,V.Rn)("Unable to set as default theme");return}(0,V.Vp)("Set as default theme")},m=[{name:"Set as default",onClick:handleSetDefault},{name:"Edit details",onClick:,{name:"Duplicate",onClick:handleDuplicate},{color:"#7f1d1d",name:"Delete",onClick:handleDelete}];return(0,a.jsx)(k.Z,{tabs:m})}function ThemeCard(e){let{theme:t,isDefault:n,canEdit:l,openEditModal:o}=e,{id:s,name:c}=t,d=t.draft,[,u]=g.Db(A),m=(0,i.useCallback)(e=>u({data:{id:s,name:e}}),[s,u]);return(0,a.jsx)(f.Z,{href:"/themes/[id]",query:{id:s},children:(0,a.jsx)("div",{className:"w-full cursor-pointer",children:(0,a.jsxs)(p.Z,{className:"h-full",children:[(0,a.jsxs)("div",{className:"bg-radial-dots relative flex cursor-pointer items-center justify-center overflow-hidden rounded-t-lg","data-testid":"theme-card",style:{height:340},children:[(0,a.jsx)("div",{className:"absolute left-0 top-0 h-full"}),(0,a.jsx)(b.Mi,{card:!0,clickable:!0,themeConfig:d,previewing:"MODAL",showWatermark:!1})]}),(0,a.jsxs)("div",{className:"relative flex items-center justify-between border-t border-gray-200 px-4 py-3 text-base",children:[(0,a.jsx)(v.s,{text:c,placeholder:"Untitled",onValueChange:m,className:"-ml-1 mr-2 text-base",disabled:!l}),(0,a.jsxs)("div",{className:"flex gap-x-3",children:[n&&(0,a.jsxs)("div",{className:"flex items-center gap-x-1 rounded-md border border-gray-300 bg-gray-50 px-2 text-sm font-medium text-gray-600",children:[(0,a.jsx)(r.QLK,{className:"h-3 w-3 text-gray-400"}),"Default"]}),l&&(0,a.jsx)(ThemeMoreActions,{theme:t,isDefault:n,openEditModal:o})]})]})]})})})}var I=n(78066),E=n(77512),D=n(56958);function ThemeDetailsModal(e){let{theme:t,defaultThemeId:n,open:l,handleClose:r}=e,[,o]=g.Db(A),[s,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(!1),[,m]=(0,N.M)(),{workspace:h}=(0,C.cF)();(0,i.useEffect)([t]),(0,i.useEffect)([n]);let onSave=async()=>{d&&n!==d&&await m({id:h.id,defaultThemeId:t.id}),D.A.promise(o({data:{id:t.id,name:s}}).then(e=>{var t;if(null===(t=e.data)||void 0===t?void 0:t.updateTheme)r();else throw Error("Error updating theme")}),{loading:"Updating theme...",success:"Updated theme",error:V.bW})};return(0,a.jsxs)(I.Z,{title:"Edit theme",open:l,handleClose:r,handleNext:onSave,nextOnEnter:!0,children:[(0,a.jsx)(E.oi,{labelText:"Title",className:"mb-4 w-full",placeholder:"Enter title",value:s,onChange:c}),(0,a.jsx)(E.XZ,{labelText:"Set as default theme",name:"defaultTheme",className:"mt-3",checked:d===(null==t?void 0:t.id),onChange:e=>{e?u(null==t?void 0:t.id):u(n)}})]})}var P=n(38426);function createTheme_templateObject(){let e=(0,y._)(["\n    mutation CreateTheme($data: ThemeCreateInput!) {\n  createTheme(data: $data) {\n    workspace {\n      id\n      defaultThemeId\n    }\n    theme {\n      id\n      name\n      draft {\n        ...ThemeVersion\n      }\n    }\n  }\n}\n    ",""]);return createTheme_templateObject=function(){return e},e}let Z=(0,x.ZP)(createTheme_templateObject(),T.A);function ThemeNewModal(e){let{open:t,handleClose:n}=e,[l,r]=(0,i.useState)(""),[o,s]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),u=(0,_.useRouter)(),m=u.query.workspace_slug,[,h]=g.Db(Z),{workspace:p}=(0,C.cF)(),onSubmit=async()=>{if(!c||!c.draft)return(0,V.Rn)("Please select a valid theme to start with");try{var e,t;let a=await h({data:{name:l,workspaceId:p.id,starterDraftId:c.draft.id,setAsDefault:o}}),i=null==a?void 0:null===(t=a.data)||void 0===t?void 0:null===(e=t.createTheme)||void 0===e?void 0:e.theme;i&&(S.Z.track("theme_created"),u.push({pathname:"/[workspace_slug]/themes/[id]",query:{workspace_slug:m,id:null==i?void 0:i.id}}),n())}catch(e){console.error(e),(0,V.Rn)("Error creating theme")}};return(0,a.jsx)(I.Z,{title:"Create New Theme",open:t,handleClose:n,handleNext:onSubmit,nextDisabled:!l||null===c,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(E.oi,{labelText:"Title",className:"mb-4 w-full",placeholder:"Enter title",onChange:r}),(0,a.jsx)("label",{className:"label-small",children:"Start with theme"}),(0,a.jsx)(P.Z,{selected:c,onChange:d}),(0,a.jsx)(E.XZ,{labelText:"Set as default theme",name:"is-default",className:"m-0 mt-4",checked:o,onChange:)]})})}function themeVersionResult_templateObject(){let e=(0,y._)(["\n    fragment ThemeVersionResult on Theme {\n  id\n  name\n  draft {\n    ...ThemeVersion\n  }\n  creator {\n    id\n  }\n}\n    ",""]);return themeVersionResult_templateObject=function(){return e},e}let $=(0,x.ZP)(themeVersionResult_templateObject(),T.A);function themeQueryResult_templateObject(){let e=(0,y._)(["\n    fragment ThemeQueryResult on ThemeQueryResult {\n  id\n  count\n  results {\n    ...ThemeVersionResult\n  }\n}\n    ",""]);return themeQueryResult_templateObject=function(){return e},e}let O=(0,x.ZP)(themeQueryResult_templateObject(),$);et R=(0,x.ZP)(listThemesPreview_templateObject(),O);var M=n(47330),L=n(1706),q=n(48464),B=n(69260);function ThemesPage(){var e,t;let[n,s]=(0,i.useState)(""),{workspace:p}=(0,C.cF)(),{startIndex:f,isStart:y,isEnd:x,setTotalCount:A,getNext:v,getPrev:b,reset:k}=(0,q.Z)(B.cv),[{data:V,fetching:j,error:T}]=(t={variables:{data:{workspaceId:p.id,skip:f,limit:B.cv,searchText:n||void 0}},pause:!(null==p?void 0:p.id)},g.aM({query:R,...t})),[w,N]=(0,i.useState)(!1);(0,L.Z)({setOpenNew:N});let[S,_]=(0,i.useState)(!1),[I,D]=(0,i.useState)(),P=(0,C.j_)(M.KG.Themes);(0,i.useEffect)(()=>{var e;let t=null==V?void 0:null===(e=V.themes)||void 0===e?void 0:e.count;void 0!==t&&A(t)},[V,A]);let Z=(null==V?void 0:null===(e=V.themes)||void 0===e?void 0:e.results)||[],$=null==p?void 0:p.defaultThemeId,openEditModal=e=>{var t,n;let a=null==V?void 0:null===(n=V.themes)||void 0===n?void 0:null===(t=n.results)||void 0===t?void 0:t.find(;D(a),_(!0)},O=P===M.KA.Edit;return(0,a.jsxs)(m.Z,{workspaceItem:M.KG.Themes,children:[(0,a.jsx)(d.Z,{title:"Themes",includeSlug:!0}),(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(u.Z,{title:"Themes",fetching:j,count:Z.length}),O&&(0,a.jsxs)("button",{className:"btn-zinc px-3 text-sm font-medium",onClick:()=>N(!0),children:[(0,a.jsx)(r.pOD,{className:"mr-.5 -ml-1 h-3 w-3"}),"Create new"]})]}),(0,a.jsx)("div",{className:"my-4 flex gap-x-3",children:(0,a.jsx)(E.E1,{className:"w-[20em]",placeholder:"Search themes",value:n,onChange:)}),(0,a.jsx)("div",{className:"flex h-full flex-1 flex-col",children:P===M.KA.None?(0,a.jsx)("div",{className:"mx-8 mt-5 flex-1",children:(0,a.jsx)(c.Z,{})}):(0,a.jsx)(a.Fragment,{children:j?(0,a.jsx)("div",{}):(null==Z?void 0:Z.length)?(0,a.jsx)("div",{className:"mt-3 grid grid-cols-2 gap-4 pb-8",children:Z.map(e=>(0,a.jsx)(ThemeCard,{isDefault:$==e.id,theme:e,canEdit:O,openEditModal:openEditModal},e.id))}):(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsx)(l.r,{title:n?"No themes found":"No existing themes",description:n?"Change your search to expand your results":"Customize your guides to match your company's brand",icon:(0,a.jsx)(r.QLK,{className:"mx-auto h-6 w-6 text-gray-300"})})})})}),(0,a.jsx)("div",{className:"mb-1 mt-10",children:(0,a.jsx)(h.Z,{isStart:y,isEnd:x,handleNext:v,handlePrev:b})}),w&&(0,a.jsx)(ThemeNewModal,{open:!0,handleClose:()=>N(!1)}),(0,a.jsx)(ThemeDetailsModal,{theme:I,defaultThemeId:$,open:S,handleClose:)]})]})}ThemesPage.getLayout=var U=ThemesPage},70689:1411:,);
//# sourceMappingURL=themes-5041ae09ee0b47e1.js.map