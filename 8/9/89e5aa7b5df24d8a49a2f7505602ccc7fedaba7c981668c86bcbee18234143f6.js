window.Mpathy=[function(e,t,n){"use strict";n.r(t),n.d(t,"getIntegrationData",(),n.d(t,"version",(function(){return l})),n.d(t,"Config",(function(){return d})),n.d(t,"State",(function(){return f})),n.d(t,"Tools",(function(){return p})),n.d(t,"FrameBridge",(function(){return g})),n.d(t,"Persister",(function(){return m})),n.d(t,"Project",(function(){return h})),n.d(t,"Engine",(function(){return b})),n.d(t,"Events",(function(){return y})),n.d(t,"start",(function(){return S})),n.d(t,"initConfig",(function(){return O})),n.d(t,"initState",(function(){return v})),n.d(t,"isDebug",(function(){return w})),n.d(t,"configureProject",(function(){return k})),n.d(t,"getVid",(function(){return j})),n.d(t,"setDebug",(function(){return C})),n.d(t,"getDebugData",(function(){return E})),n.d(t,"applyConfigOverride",(function(){return N})),n.d(t,"resetConfigOveride",(function(){return T})),n.d(t,"setWebSDKVersion",(function(){return I})),n.d(t,"resetWebSDKVersion",(function(){return P})),n.d(t,"clearState",(function(){return x})),n.d(t,"selectTrackingServer",(function(){return D})),n.d(t,"showConsole",(function(){return M})),n.d(t,"trackMe",(function(){return _}));var o=n(1);function i(){let e={},t={},n=[];this.set=(o,i)=>{this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!0,enumerable:!0,get:set:i=>{let r=e[o];e[o]=i,(t[o]||[]).forEach(,n.forEach(}}),this[o]=i},this.merge=(e={})=>{Object.entries(e).forEach(},this.watch=(o,i)=>{"function"!=typeof o&&"object"!=typeof o||(i=o,o=null),"function"==typeof i&&(i={handler:i}),null===o?n.push(i.handler):(t.hasOwnProperty(o)||(t[o]=[]),t[o].push(i.handler)),i.immediate&&i.handler(null===o?this:e[o]);let r=this;return,this.unwatch=(e,n)=>{let o=t[e].indexOf(n);~o&&t[e].splice(o,1)}}var r=n(6),a=n(2);var c=n(11),s=n(15),u=n(7);const l="6.1.2-mp",d=window._mptc||{},f=function(e={}){let t=t.prototype=new i;let n=new t;return n.merge(e),n}(),p=n(1),g=n(11),m=n(2),h=n(6),b=n(3),y=new class{constructorispatch(e,t={},{target:n,delay:o=null}={}){if(null===o){if(this.initialDispatchedEvents.hasOwnProperty(e)||(this.initialDispatchedEvents[e]=t,this.checkInitialEventHandlers()),this.eventHandlers.forEach(n=>{if(n.event!==e)return!1;n.once&&this.off(e,n.callback);let o=n.callback(t);void 0!==o&&(t=o)}),n){let o=document.createEvent("CustomEvent");o.initCustomEvent("mpt_"+e,!1,!1,t),n.dispatchEvent(o)}return t}setTimeout(()=>this.dispatch(e,t,{target:n}),o)}on(e,t){return this.eventHandlers.push({event:e,callback:t}),()=>this.off(e,t)}once(e,t){return this.eventHandlers.push({event:e,callback:t,once:!0}),off(e,t){let n=this.eventHandlers.findIndex(n=>n.event===e&&n.callback===t);null!==n&&this.eventHandlers.splice(n,1)}onceInitial(e,t){"string"==typeof e&&(e=[e]),this.initialEventHandlers.push({events:e,callback:t}),this.checkInitialEventHandlers()}checkInitialEventHandlers(){let e=[];this.initialEventHandlers.forEach(({events:t,callback:n},o)=>{let i={};t.every(e=>!!this.initialDispatchedEvents.hasOwnProperty(e)&&(i[e]=this.initialDispatchedEvents[e],!0))&&e.push({index:o,callback:n,combinedPayload:i})}),e.reverse().forEach(({index:e})=>this.initialEventHandlers.splice(e,1)),e.forEach(}};function S(){!function(){window.addEventListener("error",e=>{if(/\/\/[^/]+(foresee|answerscloud)\.com/.test(e.filename)){if(!(f.trackedErrors>=d.maxTrackedErrors))return f.trackedErrors++,Object(o.sendStatsRequest)({type:"error",msg:e.message,line:e.lineno+":"+e.colno,script_url:e.filename}),!1;Object(o.notify)("failed to relay JS Error, max allowed count of error requests reached.")}});let e=!1;window.addEventListener("securitypolicyviolation",t=>{let{blockedURI:n,violatedDirective:i,columnNumber:r,lineNumber:a,sourceFile:c}=t;if(!e&&/\/\/[^/]+(foresee|answerscloud)\.com/.test(n))return Object(o.sendStatsRequest)({type:"error",msg:`Content-Security-Violation (${i}) for URI ${n}`,line:a+":"+r,script_url:c}),e=!0,!1}),y.on("after_pi",}(),Object(c.startFrameBridge)(),Object(a.startCookieRefreshInterval)(),O(),v(),document.readyState&&~["complete","loaded"].indexOf(document.readyState)?(f.domloadTime=+Date.now()-f.loadTime,y.dispatch("dom_loaded")):window.addEventListener("load",()=>{f.domloadTime=+Date.now()-f.loadTime,setTimeout(5)}),null===Object(a.getCookie)("module_version")?Object(o.notify)("starting WebSDK version "+l):Object(o.notify)(`starting WebSDK version ${l} (Testversion 🧪)`),f.watch("serverOffset",e=>{Object(a.setCookie)("server_offset",+e,"session"),D()}),f.consoleOpen&&window===parent&&Object(o.loadScript)(d.modulePath+"console-loader.js"),setTimeout(()=>{y.dispatch("mpathy_ready",null,{target:window}),d.autostartPrecheck&&(d.waitForDOMLoad?y.onceInitial("dom_loade()):Object(r.startProject)())},5)}function O(){Object(o.mergeDefaults)(d,{trackingServerHost:null,asyncPrecheck:!1,trackingCookieLifetime:"30d",maxTrackedErrors:10,idsite:null,uploadTime:null,devices:[],domain:".*",trackingRate:0,trackingServers:[],useSamplingRates:!0,setup:{},cookieDomain:null,stopOnTranslation:!0,autostartPrecheck:!0,autostartTracking:!0,recordKeyEvents:!0,maskFullPage:!0,maskAllInputs:!0,piCheckActiveElement:!0,propertyYesValue:"yes",propertyNoValue:"no",bufferRecording:"rolling",bufferRecordingLimit:6,bufferRecordingCompression:!0,bufferCompressionFirstPi:!1,compressionSizeMin:5e4,compressionSizeMax:7e5,teoLoggingSampleRate:.5,opinionlabIntegration:!0,foreseeIntegration:!0,waitForDOMLoad:!0,maskUrl:"",trackHover:null,maxSnapshotDuration:1e3,maxMutationDuration:1e3});let e=d.setup.config||{};void 0===e.maskAllInputs&&(e.maskAllInputs=!1),Object.assign(d,e),null!=Object(a.getCookie)("config_override")&&Object.assign(d,JSON.parse(Object(a.getCookie)("config_override")))}function v(){let e=Object(a.getCookie)("recording_to_buffer_"+d.idsite);f.merge({debug:!!+Object(a.getCookie)("debug",0),consoleOpen:!!+Object(a.getCookie)("console",0),loadTime:+Date.now(),trackedErrors:0,serverOffset:+Object(a.getCookie)("server_offset",0),recordingToBuffer:null===e?e:!!+e,conditionalImport:!!+Object(a.getCookie)("conditional_import_"+d.idsite,0),pagenames:[],rates:[],scopes:[],rateComparator:0,precheckStatus:"pending",rejectMessage:null,pagename:null,propertiesHash:null,isUnmappedPagename:!1,trackingStatus:"initial",socketStatus:"initial",nativeCompressionSupported:!1,previousPID:null,currentPID:null,domloadTime:null,piStartTime:0,initialReferer:Object(a.rememberCookie)("initial_referer","sessioll),matchingScopesConfig:null,teoLoggingEnabled:!1}function j(){return Object(a.rememberCookie)("vid","730d",()=>String(Date.now())+String(Math.floor(9e4*Math.random())+1e4))}function C(e=!0){return Object(a.setCookie)("debug",+e,"session"),console.log("[m-pathy] 🦄 %cStarting debug mode after reload...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function E(){let e={SID:d.idsite,PID:f.currentPID,VID:j(),siteKey:d.siteKey,container:d.container,v:l,upload:d.uploadTime,url:location.href,pn:f.pagename,time:(new Date).toJSON()+" GMT",hoover:d.trackingServerHost,replay:Object(s.b)()};return"function"==typeof window.copy&&(window.copy(JSON.stringify(e,null,2)),console.log("[m-pathy] %cCopied debug data to clipboard 📋","color: green")),e}function N(e){if("object"==typeof e&&0!==Object.keys(e).length)return Object(a.setCookie)("config_override",JSON.stringify(e),"session"),setTimeout(()=>location.reload(),500),window.Mpathy;Object(o.notify)("error","Invalid first argument: Expected Object")}function T(){return Object(a.removeCookie)("config_override"),setTimeout(()=>location.reload(),500),window.Mpathy}function I(e=null,t=null){return null!==e&&Object(a.setCookie)("module_version",e,"session"),null!==t&&Object(a.setCookie)("module_host",t,"session"),console.log("[m-pathy] 🧪 %cLoading test version after reload...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function P(){return Object(a.removeCookie)("module_version"),Object(a.removeCookie)("module_host"),console.log("[m-pathy] 🧪 %reset test version after reload...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function x(){return f.teoLoggingEnabled=!1,b.stopTracking(!0),Object(u.a)(),Object(a.resetCookies)(),Object.keys(localStsWith("m.removeItem(e)),console.log("[m-pathy] 🧪 %cReloading m-pathy with cleared state...","color: green"),setTimeout(()=>location.reload(),500),window.Mpathy}function D(){if(!d.idsite)return;let e=d.trackingServers,t=(j().slice(-5)+f.serverOffset)%e.length;d.trackingServerHost=e[t]}function M(e=!0){return Object(a.setCookie)("console",+e,"session"),console.log("[m-pathy] ⏳ %cStarting m-pathy console after reload...","color: blue"),setTimeout(()=>location.reload(),500),window.Mpathy}function _(e=!0){return h.setTrackingActiveCookie(e),e&&Object(a.removeCookie)("tracking_stopped_"+d.idsite),console.log("[m-pathy] ⏳ %cStarting tracking after reload...","color: blue"),setTimeout(()=>location.reload(),500),window.Mpathy}},function(e,t,n){"use strict";n.r(t),n.d(t,"notify",(function(){return r})),n.d(t,"loadScript",(function(){return a})),n.d(t,"resolvePath",(function(){return c})),n.d(t,"mergeDefaults",(function(){return s})),n.d(t,"sendRequest",(function(){return u})),n.d(t,"sendStatsRequest",(function(){return l})),n.d(t,"generateQueryString",(function(){return d})),n.d(t,"getVersionsString",(function(){return f})),n.d(t,"getDeviceType",(function(){return p})),n.d(t,"isMobile",(function(){return g})),n.d(t,"arrayUniq",(function(){return m})),n.d(t,"resolveNodes",(function(){return h})),n.d(t,"isVisible",(function(){return b})),n.d(t,"throttle",(function(){return y})),n.d(t,"debounce",(function(){return S})),n.d(t,"getScrollingElement",(function(){return O})),n.d(t,"scrambleString",(function(){return v})),n.d(t,"anonymizeString",(function(){return w})),n.d(t,"getScrollTop",(function(){return j})),n.d(t,"getScrollLeft",(function(){return C})),n.d(t,"getOrientation",(function(){return E})),n.d(t,"isScrollingDisabled",(function(){return N})),n.d(t,"getClientWidth",(function(){return T})),n.d(t,"getClientHeight",(function(){return I})),n.d(t,"isTouchDevice",(function(){return P})),n.d(t,"matchSelector",(function(){return x})),n.d(t,"loopNodeTree",(function(){return D})),n.d(t,"findParent",(function(){return M})),n.d(t,"getMatchingParent",(function(){return _})),n.d(t,"getNodeDimensions",(function(){return A})),n.d(t,"getElementXPath",(function(){return R})),n.d(t,"matchString",(function(){return L})),n.d(t,"onNodeInserted",(function(){return H})),n.d(t,"getBlobSize",(function(){return X})),n.d(t,"checkRateByVid",(function(){return V}));var o=n(0);const i={a:8.12,b:9.61,c:12.32,d:16.64,e:28.66,f:30.96,g:32.99,h:38.91,i:46.23,j:46.33,k:47.02,l:51,m:53.61,n:60.56,o:68.24,p:70.06,q:70.17,r:76.19,s:82.47,t:91.57,u:94.45,v:95.56,w:97.65,x:97.82,y:99.93,z:100};function r(...e){if(!o.State.debug)return;let t="log";e.length>1&&["error","warn","info","log","debug","table"].includes(e[0])&&(t=e[0],e.splice(0,1)),"string"==typeof e[0]&&(e[0]="[m-pathy] "+e[0],parent!=window&&(e[0]="[iframe] "+e[0])),"object"==typeof window.console&&"function"==typeof window.console[t]&&window.console[t](...e)}function a(e,t){let n=document.createElement("script");n.setAttribute("src",c(e)),n.setAttribute("async",!0),n.setAttribute("type","text/javascript"),n.setAttribute("charset","utf-8"),n.setAttribute("crossorigin","anonymous"),t instanceof Function&&n.addEventListener("load",t),document.head.appendChild(n)}function c(e){return e.replace(/%CDN_HOST%/g,o.Config.cdnHost).replace(/%TRACKING_SERVER_HOST%/g,o.Config.trackingServerHost).replace(/%VERSION%/g,o.Config.requiredSDKVersion).replace(/%IDSITE%/g,o.Config.idsite).replace(/%CONTAINER%/,o.Config.container).replace(/%SITE_KEY%/,o.Config.siteKey)}function s(e,t){return Oerty(n)||(e[n]=t[n])}),e}function u(e,t={}){if(null===o.Config.trackingServerHost)return void r("warn","Request could not be send. No trackingServerHost has been set yet.");let n=new XMLHttpRequest,i=o.State.serverOffset;t={method:"POST",query:{},data:{},retry:0,maxRetries:5,onSuccess:null,onError:null,isJson:!1,...t},n.onreadystatechange=()=>{4===n.readyState&&200===n.status&&(t.retry=0,"function"==typeof t.onSuccess&&t.onSuccess(n.responseText,n.status))},n.onerror=()=>{t.retry>=t.maxRetries?"function"==typeof t.onError&&t.onError(n.status):(i===o.State.serverOffset&&o.State.serverOffset++,setTimeout(()=>{t.retry++,u(e,t)},1e3))},t.isJson&&(n.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.data=JSON.stringify(t.data)),e=c(e),Object.keys(t.query).length>0&&(e+=d(t.query));try{n.open(t.method.toUpperCase(),e,!0),n.send(t.data)}catch(e){r("warn","Failed to send PostRequest")}}function l(e={}){u("//%TRACKING_SERVER_HOST%/ps",{method:"GET",query:{idsite:o.Config.idsite,pid:o.State.currentPID||42,vid:Object(o.getVid)(),pn:o.State.pagename,url:location.href,user_agent:window.navigator.userAgent,versions:f(),...e}})}function d(e){return"?"+encodeURIComponent(t)).join("&")}function f(){let e="SDK: "+o.Config.requiredSDKVersion;return o.Config.uploadTime&&(e+=" | UP: "+o.Config.uploadTime),e}function p(){return/((i|view|touch)pad|lenovo|tablet(?! pc)|bolt|xoom|playbook|kindle|gt-p|sch-i|sch-t|mz609|mz617|mid7015|tf101|g-v|ct1002|transformer|silk|tab|nexus (7|\d{2}))\b/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)&&!/mobile/i.test(navigator.userAgent)?"tablet":/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|webos|galaxy|phone|pocket|psp|treo|android|mobile|240x320|400X240|nitro|nokia|portalmmm|proxinet|blackberry|palm|series40|series60|s60|sonyericsson|e10i|samsung|nexus|htc|desire|ipod|itunes|vodafone|wap-|wapi|wapa|wapp)/i.test(navigator.userAge=>e.indexOf(t)===n)}function h(e,t){let n,o=document;if(e instanceof Function&&(e=e()),e instanceof NodeList)n=e;else if(e instanceof Node||e instanceof Document||e instanceof Window)n=[e];else{Array.isArray(e)&&(o=e[0],e=e[1],o instanceof Function&&(o=o()));try{n=o.querySelectorAll(e)}catch(t){return r("warn","Invalid CSS Selector in resolveNodes function: ",e),[]}}return t?n[0]:Array.from(n)}function b(e){return h(e).some(e=>!!e&&(!(!e.offsetWidth&&!e.offsetHeight)||"function"==typeof e.getClientRects&&e.getClientRects().length>0))}function y(e,t){let n=!1;return(...o)=>{n||(e(0,setut(()=>{e(...o)},t)}}function O(){return document.scrollingElement||document.body.parentNode||document.body||document.documentElement}function v(e){let t="";for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);if(o>=55296&&o<=56319&&(o=e.charCodeAt(n+1),o>=56320&&o<=57343)){t+=e.slice(n,n+2),n++;continue}let r=e[n];if(/\d/.test(r)&&(r="0"),/[a-zA-Z\u00C0-\u1FFF\u2800-\uFFFD]/.test(r)){let e=100*Math.random();for(let t in i)if(e<=i[t]){r=r.toUpperCase()===r?t.toUpperCase():t;break}}t+=r}return t}function w(e,t=null){if(t instanceof RegExp){return 1===Array.from(e.match(t)||[]).length?w(e):String(e).replace(t,(e,...t)=>(t.splice(-2),t.forEach(t=>e=e.replace(t,w(t))),e))}return String(e).replace(/([\s\S]*?)(&#?\w+;|$)/g,(e,t,n)=>(t=t.split("").map(k).join(""))+n)}function k(e){return/\s/.test(e)?e:/\u00E4|\u00F6|\u00FC|\u00DF/.test(e)?"u":/\u00C4|\u00D6|\u00DC/.test(e)?"U":/[a-z]|[\u0080-\uFFFF]/.test(e)?"x":/[A-Z]/.test(e)?"X":/\d/.test(e)?"0":e}function j(){let e=O().scrollHeight-window.innerHeight;return Math.max(0,Math.min(O().scrollTop,e))}function C(){let e=O().scrollWidth-window.innerWidth;return Math.max(0,Math.min(O().scrollLeft,e))}function E(){return screen.orientation?screen.orientation.angle:window.orientation||0}function N(){let e=!1;try{e=window.frameElement&&window.frameElement.scrolling&&"no"===window.frameElement.scrolling}catch(e){}return e}function T(){return("BackCompat"===document.compatMode?document.body:document.documentElement).clientWidth}function I(){return("BackCompat"===document.compatMode?document.body:document.documentuchstart"in document}function x(e,t,n=!1){let o=document.documentElement.matches||document.documentElement.msMatchesSelector||document.documentElement.webkitMatchesSelector;return n?!!+t.split(/, */).some(t=>o(e,t)||o(e,t+" *")):o.call(e,t)}function D(e,t){for(;e;){if(!1===t(e))return;e=e.parentNode}}function M(e,t){for(;e.parentNode;){if(t(e.parentNode))return e.parentNode;e=e.peturn M(e,e=>x(e,t))}function A(e){e.correspondingUseElement&&(e=e.correspondingUseElement);let t={};if(e.getBoundingClientRect){let n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.top=n.top,t.left=n.left}return t.width||(t.width=e.offsetWidth),t.height||(t.height=e.offsetHeight),t.top||(t.top=e.offsetTop),t.left||(t.left=e.offsetLeft),t}function R(e){if(e===document.body||e===document.documentElement)return"//"+e.tagName;let t=e.hasOwnProperty("mptOldParentNode")?e.mptOldParentNode:e.parentNode;if(!t)return"//"+e.tagName+Array.from(.name}="${e.value}"]`);let n=R(t),o="http://www.w3.org/2000/svg"===e.namespaceURI?'*[name()="'+e.tagName+'"]':e.tagName;if(t.childNodes.length>0){let t=1,i=e.previousElementSibling;for(;i;)i.tagName===e.tagName&&t++,i=i.previousElementSibling;return`${n}/${o}[${t}]`}return 0===t.childNodes.length&&t.correspondingUseElement?(t=t.correspondingUseElement,R(t)):e.hasOwnProperty("mptClickableChild")?`${n}/${o}[${e.mptClickableChild.index}]`:`${n}/${o}`}function L(e,t){if(e instanceof Function){let n=e(t);if("boolean"==typeof n)return n;e=n}return"string"==typeof e?e===t:e instanceof RegExp?e.test(t):!!Arr(e)&&e.some(e=>L(e,t))}function H(e,t,n,o=!1){let i=h(e);if(!i.length)return void r("debug",`onDOMNodeInserted: ${e} not found`);let a=new MutationObserver(e=>{e.forEach(({addedNodes:e})=>{Array.from(e||[]).forEach(e=>{e.nodeType==Node.ELEMENT_NODE&&x(e,t)&&n()})})});return i.forEach(e=>{a.observe(e,{child}),()=>a.disconnect()}function X(e){let t=e;return"string"==typeof e?t=[e]:navigator.userAgent.includes("Trident/")&&(t=[JSON.stringify(e)]),new Blob(t,{type:"text/plain"}).size}function V(e){return Object(o.getVid)().slice(-4)/100<=e}},function(e,t,n){"use strict";n.r(t),n.d(t,"startCookieRefreshInterval",(function(){return i})),n.d(t,"getCookie",(function(){return r})),n.d(t,"setCookie",(function(){return a})),n.d(t,"removeCookie",(function(){return c})),n.d(t,"rememberCookie",(function(){return s})),n.d(t,"resetCookies",(function(){return u})),n.d(t,"refreshCookies",(function(){return d})),n.d(t,"calculateExpiry",(function(){rtInterval(d,6e4),d()}function r(e,t=null,{prefix:n=null}={}){let o=l(p(n,e));return o&&(String(o.expiry).includes("session")||o.expiry>=+Date.now())?o.value:t}function a(e,t,n="30d",{prefix:i=null}={}){let r=p(i,e),a=function(){if(o.Config.cookieDomain)return o.Config.cookieDomain;let e=location.hostname.match(/(?:[^.]+\.)?\w+$/);o.Config.cookieDomain=e?e[0]:location.hostname;return o.Config.cookieDomain}();t=encodeURIComponent(t);let c=n=f(n);+c?c=Math.min(c,f("7d")):"session_timeout"===c&&(c=Date.now()+18e5);let s=`${r}=${t}|${n}`;+c&&(s+=";expires="+new Date(c).toGMTString()),s+=";path=/;domain="+a,function(){let e=navigator.userAgent;if(e.includes("CPU iPhone OS 12")||e.includes("iPad; CPU OS 12"))return!1;if(e.includes("Safari")&&e.includes("Macintosh; Intel Mac OS X 10_14")&&e.includes("Version/"))return!1;if(e.includes("Chrome/5")||e.includes("Chrome/6"))return!1;return!0}()&&(s+=";samesite=none"),s+=";secure",document.cookie=s}function c(e,{prefix:t=null}={}){a(e,0,Date.now(),{prefix:t})}function s(e,t,n,{prefix:o=null}={}){let i=r(e,null,{prefix:o});return null===i&&(i=n(),null!==i&&a(e,i,t,{prefix:o})),i}function u(e=null){null===e&&(e=new RegExp("mpt_")),g(e,c)}function l(e){let t=new RegExp(`(?:^|;\\s?)${e}=(.*?)(?:\\|(\\d+|session|session_timeout))?(?:;|$)`),n=document.cookie.match(t);if(!n)return null;let o=n[2]||"session";return isNaN(o)||(o=+o),{value:decodeURIComponent(n[1]),expiry:o}}function d(){let e=+Date.now();g(new RegExp("mpt_"),t=>{let n=l(t);if(!n)return;let{expiry:o,value:i}=n;(+o&&o>=e||"session_timeout"===o)&&a(t,i,o)})}function f(e){if("string"==typeof e){if("session"===e||"session_timeout"===e)return e;let t=e.match(/(\d+)([mhd])/);if(t){if("m"===t[2])return Date.now()+6e4*t[1];if("h"===t[2])return Date.now()+36e5*t[1];if("d"===t[2])return Date.now()+864e5*t[1]}}return isNaN(e)?"session":+e}function p(e,t){return null===e&&(e="mpt_"),!1===e||t.startsWith(e)||(t=e+t),encodeURIComponent(t)}function g(e,t){(document.cookie.match(/(?:^|;\s?)([^=]+)/g)||[]).forEach(n=>{let o=decodeURIComponent(n).replace(/^;\s?/,"");e.test(o)&&t(o)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"initEngine",(function(){return y})),n.d(t,"startTracking",(function(){return S})),n.d(t,"startConditionalRecording",(function(){return O})),n.d(t,"pauseTracking",(function(){return v})),n.d(t,"stopTracking",(function(){return w})),n.d(t,"activateSession",(function(){return k})),n.d(t,"getRelTime",(function(){return j})),n.d(t,"maskUrl",(function(){return C})),n.d(t,"checkPI",(function(){return E})),n.d(t,"setProperty",(function(){return N}));var o=n(0),i=n(6),r=n(5),a=n(1),c=n(4),s=n(12),u=n(9),l=n(2),d=n(11),f=n(8),p=n(7);let g=!1,m=!1;const h={},b={};function y(){m||(Object(f.a)(),Object(d.subscribeFrameBridge)("xVid",(e,t)=>{g||(N("x-vid",e.VID,{scope:"session"}),g=!0),e.receivedXVid||Object(d.emitFrameBridge)("xVid",{VID:Object(o.getVid)(),receivedXVid:g},t.source)}),Object(d.emitFrameBridge)("xVid",{VID:Object(o.getVid)(),receivedXVid:g}),m=!0,Object(a.notify)("info","Engine ready"),o.Events.dispatch("tracking_ready",null,{target:window}),o.State.trackingStatus="ready",o.Config.autostartTracking&&S())}function S(){if("resolved"!==o.State.precheckStatus)return;null!==Object(i.getPagename)()&&E({force:!0}),Object(s.b)()}function O(){m||(o.Config.bufferRecording&&null===o.State.recordingToBuffer&&(o.State.recordingToBuffer=!0,Object(l.setCookie)("recording_to_buffer_"+o.Config.idsite,1,"session_timeout")),o.State.conditionalImport=!0,Object(l.setCookie)("conditional_import_"+o.Config.idsite,1,"session_timeout"),o.Config.autostartTracking=!0,Object(i.setTrackingActiveCookie)(!0,"session_timeout"),y())}function v(){let e=o.State.trackingStatus;o.State.trackingStatus="paused",o.State.previousPID=null,"recording"===e&&(Object(c.h)(),T(),Object(a.notify)("⏸️ %cPaused Tracking","color: blue; font-weight: bold"))}function w(e=!1){let t=o.State.trackingStatus;o.State.trackingStatus="stopped",o.State.previousPID=null,"recording"===t&&(Object(c.h)(),Object(r.e)(),Object(s.c)(),T(),Object(u.a)()),"paused"===t&&(Object(r.e)(),Object(s.c)(),Object(u.a)()),e?(Object(a.notify)("🛑 %cStopped Tracking (session)","color: red; font-weight: bold"),Object(l.setCookie)("tracking_stopped_"+o.Config.idsite,1,"session_timeout"),Object(i.setTrackingActiveCookie)(!1),Object(p.a)()):Object(a.notify)("⚠️ %cStopped Tracking","color: orange; font-weight: bold")}function k(e="default"){["recording","paused"].includes(o.State.trackingStatus)&&(o.State.recordingToBuffer&&Object(p.e)(),Object(a.notify)("%c✔️ Session has been flagged for import!","color: green"),Object(r.a)("activateSession",{recordingType:e}))}function j(){return o.State.piStartTime?+Date.now()-o.State.piStartTime:null}function C(e){return o.Config.maskUrl instanceof RegExp?e=Object(a.anonymizeString)(e,o.Config.maskUrl):"function"==typeof o.Config.maskUrl?e=o.Config.maskUrl(e,a.anonymizeString):o.Config.maskUrl&&"string"==typeof o.Config.maskUrl&&(e=Object(a.anonymizeString)(e,new RegExp(o.Config.maskUrl))),e}function E({delay:e=null,force:t=!1}={}){if("stopped"===o.State.trackingStatus)return;if(o.Config.stopOnTranslation&&null!==document.querySelector(".translated-ltr, .translated-rtl"))return w(!0),void Object(a.notify)("warn","tracking stopped. translator detected.");if(window.innerHeight<50||window.innerWidth<50)return void Object(a.notify)("warn","tracking stopped. Viewport to small.");if(null!==e)return clearTimeout(.checkPI=setTimeout(()=>E({force:t}),e));let n=+Date.now()-o.State.piStartTime;if(n<1e3)return E({delay:1e3-n,force:t});if(function(){if(o.Events.dispatch("delay_pi",!1))return!0;if(o.State.clickEmulationRunning)return!0;let{activeElement:e}=document;if(e&&o.Config.piCheckActiveElement&&null!==o.State.currentPID){if("INPUT"===e.tagName&&!["radio","checkbox","button","submit"].includes(e.type))return!0;if(["TEXTAREA","SELECT"].includes(e.tagName))return!0}return!1}())return E({delay:500,force:t});let s=o.State.pagename,l=Object(i.getPagename)();if(null===l)return void("recording"===o.State.trackingStatus&&v());!function(){let e={pagenameModifier:[],properties:[],nodeConfig:[]};o.State.scopes.forEach(t=>{if(t.isMatching(!0)){let n=t.config;e.pagenameModifier=e.pagenameModifier.concat(n.pagenameModifier),e.properties=e.properties.concat(n.properties),e.nodeConfig=e.nodeConfig.concat(n.nodeConfig)}}),o.State.matchingScopesConfig=e}();let d=function(e){return e.map(({valueCallback:e,...t})=>(t.value="function"==typeof e?e():e,t))}(o.State.matchingScopesConfig.properties),g=function(e){return e.filter(({overwrite:e,name:t,value:n})=>{if(!e)return!1;let o=n!==b[t];return b[t]=n,o{return e.filter(({overwrite:e})=>!e).map(({name:e,value:t})=>(Array.isArray(t)&&(t=t.join("&")),`${e}:${t}`)).join("\n")}(d);t||s!==l||o.State.propertiesHash!==m?(o.State.propertiesHash=m,function(e){let t="recording"===o.State.trackingStatus;o.State.trackingStatus="recording","initial"===o.State.socketStatus&&(o.State.consoleOpen&&!o.State.consoleSendData||Object(u.c)());o.State.teoLoggingEnabled&&o.State.currentPID&&(Object(f.d)(),Object(f.c)());o.Events.dispatch("before_pi",{pagename:e}),o.State.currentPID&&(T(),Object(r.c)());o.State.currentPID=function(){return String(Date.now())+String(Math.floor(9e5*Math.random())+1e5)}(),o.State.pagename=e,Object(a.notify)("info","▶️ %cnewPI: "+e,"color: blue; font-weight: bold"),t||(Object(p.d)(o.State.currentPID),Object(r.d)());o.State.piStartTime=+Date.now(),Object(r.a)("init",function(e){let t={charset:document.characterSet,client_height:Object(a.getClientHeight)(),con_stats:{},is_iframe:+(parent!=window),is_mutation_stream:1,is_scrolling_disabled:+Object(a.isScrollingDisabled)(),is_new_websdk:!0,is_modern_browser:window._mpt_modern||!1,unmapped_pagename:+o.State.isUnmappedPagename,initial_referer:o.State.initialReferer||"",orientation:Object(a.getOrientation)(),prev_pageid:o.State.previousPID||0,custom_scrolling_element_xpath:null,scroll_left:o.State.scrollPosition.scrollLeft,conditional_import:o.State.conditionalImport,vendors:{}};return{revision:r.b,idsite:o.Config.idsite,VID:Object(o.getVid)(),PID:o.State.currentPID,starttime:o.State.piStartTime,pagename:o.State.pagename,virtualPi:e,url:C(location.href),referer:C(document.referrer),ua:navigator.userAgent,locale:navigator.language,domloadTime:o.State.domloadTime,versions:Object(a.getVersionsString)(),clientWidth:Object(a.getClientWidth)(),scrollHeight:o.State.maxScrollHeight,scrollWidth:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),scrollTop:o.State.scrollPosition.scrollTop,viewport:window.innerWidth+"x"+window.innerHeight,res:screen.width+"x"+screen.height,outerViewport:(window.outerWidth||0)+"x"+(window.outerHeight||0),availableViewport:screen.availWidth+"x"+screen.availHeight,isTouch:Object(a.isTouchDevice)(),extendedProperties:JSON.stringify(t),trackingPersistence:"visit",debugMessages:"",flashVer:0,enginePolls:0}}(t)),t||Object(c.g)();o.Events.dispatch("after_pi",{pagename:e})}(l),null===o.State.previousPID&&d.push({name:"engine.time.load",value:o.State.loadTime-window._mptt,type:"int"}),("production"!==o.Config.container||Object(o.isDebug)())&&d.push({name:"mpt_debug",value:"on"}),d.forEach(({name:e,value:t,...n})=>{Array.isArray(t)?(n.unique=!1,t.forEach(t=>N(e,t,n))):N(e,t,n)}),o.Events.dispatch("property_change",{properties:d})):g.forEach(({name:e,value:t,...n})=>N(e,t,n))}function N(e,t,{type:n="string",session:o=!1,unique:i=!0}={}){null!=t&&(Array.isArray(t)?t.forEach(t=>{N(e,t,{type:n,session:o,unique:!1})}):Object(r.a)("property",{name:e,value:t,scope:o?0:2,dataType:n,unique:i}))}function T(){o.State.previousPID=o.State.currentPID,o.State.currentPID=null,o.State.pagename=null,o.State.piStartTime=0}},function(e,t,n){"use strict";n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"a",(function(){return S})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return E}));var o=n(0),i=n(5),r=n(8),a=n(1),c=n(3);let s,u={},l=-1,d=-1,f={},p=!1,g=!1,m=["onload","onunload","onchange","onfocus","onselect","click","onmouseover","onmousemove","onmouseout","onblur","onkeydown","onkeyup","onkeypress","onenter","onsubmit","onmouseenter","onmouseleave","ontouchstart","ontouchmove","ontouchend"];function h(){N(document.documentElement),function(){f.snapshot=performance.now();let e=T(document,{recursive:!0});if(p&&!Object(o.isDebug)())return Object(c.stopTracking)(),null;Object(o.isDebug)()&&(window.Mpathy.State.jsonDomdata={snapshot:e,mutations:[]});e=JSON.stringify(e),Object(i.a)("snapshot",{snapshot:e}),Object(r.b)({mutationId:"snapshot",mutationData:e,startTime:f.snapshot}),delete f.snapshot}(),p&&!Object(o.isDebug)()||(s=new MutationObserver(I),s.observe(document.documentElement,{subtree:!0,childLes:!0}))}function b(){s&&s.disconnect()}function y(e){let t={},n=C(e,"maskAttributes"),o="INPUT"===e.tagName&&"password"===e.type;for(let n=0;n<e.attributes.length;n++){let o=e.attributes[n];m.includes(o.name)||(t[o.name]=o.value)}if("INPUT"===e.tagName&&["text","email","number","radio","checkbox"].includes(e.type)&&(e.checked&&!t.hasOwnProperty("checked")&&(t.checked=""),!t.value===e.value||o||(t.value=E(e)?Object(a.scrambleString)(e.value):e.value)),"OPTION"===e.tagName&&e.selected&&!t.hasOwnProperty("selected")&&(t.selected=""),0===e.attributes.length)return t;if(null===n&&E(e)&&(n=["value","href","alt","title","placeholder","label"]),Array.isArray(n)&&n.forEach(n=>{"href"===n&&["BASE","LINK","IMAGE","USE"].includes(e.tagName&&e.tagName.toUpperCase())||t.hasOwnProperty(n)&&(t[n]=Object(a.scrambleString)(t[n]))}),"function"==typeof n){let o=n(t,e);void 0!==o&&(t=o)}return t}function S(e,t){if(!e.hasAttribute(t))return null;return y(e)[t]}function O(e){let t=e.textContent;return E(e)&&(t=Object(a.scrambleString)(t)),t}function v(e){if("INPUT"===e.tagName&&"checkbox"===e.type)j(e.mptNodeId,{checked:e.checked?"":null});else if("INPUT"===e.tagName&&"radio"===e.type){let t=Array.from(document.querySelectorAll(e.name?`input[name="${e.name}"]`:null));[e,...t].forEach(e=>j(e.mptNodeId,{checked:e.checked?"":null}))}else"SELECT"===e.tagName&&Array.from(e.childNodes).forEach(t=>{t.selected!==e.mptOptionSelected&&j(t.mptNodeId,{selected:t.selected?"":null})})}function w({target:e}){let t="TEXTAREA"===e.tagName,n="INPUT"===e.tagName&&["text","email","number"].includes(e.type);(t||n)&&j(e.mptNodeId,{value:E(e)?Object(a.scrambleString)(e.value):e.value})}function k(e,t){Object(i.a)("mutation",{data:JSON.stringify({t:[[+e,t]]}),mutationId:++d})}function j(e,t){Object(i.a)("mutation",{data:JSON.stringify({at:[[+e,t]]}),mutationId:++d})}function C(e,t,n=null){return e&&e.mptNodeConfig&&e.mptNodeConfig.hasOwnProperty(t)?e.mptNodeConfig[t]:n}function E(e){let t=null;return Object(a.loopNodeTree)(e,e=>e.tagName&&"STYLE"===e.tagName.toUpperCase()?(t=!1,!1):(t=C(e,"maskText"),null===t&&void 0)),null===t&&(t=o.Config.maskFullPage),t}function N(e,t=null){if(e.mptNodeConfig&&e.mptNodeConfig.hasOwnProperty("lastMutationId")&&e.mptNodeConfig.lastMutationId===t&&null!==t)return;[e].concat(Array.from(e.querySelectorAll("*"))).forEach(e=>{e.mptNodeConfig={maskText:A(e),maskAttributes:null,anticlickmap:!1,ignoreAttributesMutation:null,ignoreTextMutation:!1,trackHover:!1,lastMutationId:t}}),Object(a.resolveNodes)([e,".fsrVisible, [mpt-visible]"]).forEach(e=>{e.mptNodeConfig.maskText=!1}),Object(a.resolveNodes)([e,"[mpt-anon]"]).forEach(e=>{e.mptNodeConfig.maskText=!0}),o.Config.trackHover&&Object(a.resolvrEach(e=>{e.mptNodeConfig.trackHover=!0}),Array.from(o.State.matchingScopesConfig.nodeConfig).forEach(({selector:t,config:n})ch(e=>{Object.assign(e.mptNodeConfig,n)})})}function T(e,{recursive:t=!1}={}){if(!e)return null;if(t){if(!function(){if("recording"!==o.State.trackingStatus)return!1;if(p)return Object(o.isDebug)();if(!f.hasOwnProperty("snapshot"))return Object(a.notify)("warn","SanityCheck: sanityData.snapshot does not exist, possible timing issue"),!0;let e=Math.round(performance.now()-f.snapshot);o.Config.maxSnapshotDuration<e&&(p=!0,Object(a.sendStatsRequest)({type:"sanity",msg:`SanityCheck: snapshot exceeded maximum of ${o.Config.maxSnapshotDuration}ms`}),Object(a.notify)("warn","Sanity check: snapshot limit exceeded"));return!p||Object(o.isDebug)()}())return null}else if(R(e))return{id:+e.mptNodeId};let n=++l,i={nT:e.nodeType,id:+n};switch(e.mptNodeId=n,u[n]=e,e.nodeType){case e.DOCUMENT_TYPE_NODE:i.name=e.name,i.publicId=e.publicId,i.systemId=e.systemId;break;case e.DOCUMENT_FRAGMENT_NODE:return null;case e.ELEMENT_NODE:Object.assign(i,function(e){let t={tN:e.tagName,at:y(e)};"http://www.w3.org/2000/svg"===e.namespaceURI&&(t.ns="svg");"SCRIPT"===t.tN&&t.at.hasOwnProperty("src")&&delete t.at.src;return t}(e)),"STYLE"!==i.tN||e.textContent||(!function(e,t){let n=new Text;n.textContent=P(e.sheet.rules),n.mptNodeConfig={maskText:!1},t.cN=[T(n)];let o,i=e.sheet.deleteRule,r=e.sheet.insertRule;e.sheet.deleteRule=(...t)=>{i.apply(e.sheet,t),clearTimeout(o),o=setTimeout(()=>{k(n.mptNodeId,P(e.sheet.rules))},100)},e.sheet.insertRule=(...t)=>{r.apply(e.sheet,t),clearTimeout(o),o=setTimeout(()=>{k(n.mptNodeId,P(e.sheet.rules))},100)}}(e,i),t=!1),"OPTION"===i.tN&&(e.mptOptionSelected=e.selected);break;case e.TEXT_NODE:Object.assign(i,function(e){let t;t=e.parentNode&&"SCRIPT"===e.parentNode.tagName?"":O(e);return{tC:t}}(e));break;case e.COMMENT_NODE:i.tC=""}if(t&&e.childNodes&&e.childNodes.length>0){let n=e.childNodes[0];for(i.cN=[];n;)i.cN.push(T(n,{recursive:t})),n=n.nextSibling}return i}function I(e){let t=++d;if(f[t]=performance.now(),!X(t))return;let n={am:[],r:[],t:[]},a={},c=new Set;for(let o=0;o<e.length;o++){let i=e[o];if(!X(t))return;"attributes"===i.type&&(x(a,i),c.add(i.target.parentNode)),"childList"===i.type&&(D(n,i.removedNodes,i.target),M(n,i.addedNodes,{mutationId:t,target:i.target}),c.add(i.target.parentNode)),"characterData"===i.type&&_(n,i)}return Object.keys(a).length>0&&(n.at=function(e){return Object.keys(e).map(t=>{let n={},o=u[t];if(o){let i=y(o);e[t].forEach(e=>{i.hasOwnProperty(e)?n[e]=i[e]:n[e]=null})}(a)),c.size>0&&c.forEach(e=>{e&&N(e,t)}),0===n.am.length&&delete n.am,0===n.r.length&&delete n.r,0===n.t.length&&delete n.t,0!==Object.keys(n).length?(Object(o.isDebug)()&&window.Mpathy.State.jsonDomdata.mutations.push(n),n=JSON.stringify(n),Object(i.a)("mutation",{data:n,mutationId:t}),Object(r.b)({mutationId:t,mutationData:n,startTime:f[t]}),delete f[t],n):void e){return Array.from(e).map(e=>e.cssText).join("\n")}function x(e,{target:t,attributeName:n}){if(!R(t))return;let o=C(t,"ignoreAttributesMutation");Array.isArray(o)&&o.includes(n)||(e.hasOwnProperty(t.mptNodeId)||(e[t.mptNodeId]=[]),e[t.mptNodeId].push(n))}function D(e,t){for(let n=0;n<t.length;n++){let o=t[n];R(o)&&(e.r.includes(o.mptNodeId)||H(o)!==document&&(o.nodeType===Node.ELEMENT_NODE&&D(e,o.childNodes),e.r.push(+o.mptNodeId),delete u[o.mptNodeId],o.mptOldNodeId=o.mptNodeId,delete o.mptNodeId,u.hasOwnProperty(t.mptParentId)&&(o.mptOldParentNode=u[t.mptParentId])))}}function M(e,t,{mutationId:n,target:o=null}={}){for(let i=0;i<t.length;i++){let r=t[i],c=R(r);if(o&&H(o)!==document){D(e,[t]);continue}let s=c?{id:r.mptNodeId}:T(r);if(r.previousSibling){let t=L(r.previousSibling);null===t&&(M(e,[r.previousSibling],{mutationId:n,target:o}),t=r.previousSibling.mptNodeId),s.pS={id:t}}let u=null;R(r.parentNode)?u=L(r.parentNode):R(o)?u=L(o):r.previousSibling&&R(r.previousSibling.parentNode)&&(u=L(r.previousSibling.parentNode)),s.pN={id:u},null===s.pN.id&&Object(a.notify)("warn","added/moved node mutation has no parentId",{addedNode:r,parentNode:r.parentNode,target:o,serializedNode:s}),delete r.mptOldNodeId,e.am.push(s),c||r.nodeType!==Node.ELEMENT_NODE||M(e,r.childNodes,{mutationId:n,target:r})}}function _(e,{target:t}){t.nodeType!==Node.COMMENT_NODE&&!C(t.parentNode,"ignoreTextMutation")&&R(t)&&e.t.push([+t.mptNodeId,O(t)])}function A({tagName:e,type:t}){let n="string"==typeof e&&["INPUT","TEXTAREA","SELECT"].includes(e.toUpperCase());return o.Config.maskFullPage||!n||"INPUT"===e&&["button","submit","reset"].inclureturn e&&e.hasOwnProperty("mptNodeId")}function L(e){return e&&e.hasOwnProperty("mptNodeId")?e.mptNodeId:null}function H(e)e;return Object(a.loopNodeTree)(e,e=>t=e),t}function X(e){if("recording"!==o.State.trackingStatus)return!1;if(g||p)return Object(o.isDebug)();if(!f.hasOwnProperty(e))return Object(a.notify)("warn",`SanityCheck: sanityData[${e}] does not exist, possible timing issue`),!0;let t=Math.round(performance.now()-f[e]);return o.Config.maxMutationDuration<t&&(g=!0,Object(a.sendStatsRequest)({type:"sanity",msg:`SanityCheck: mutation exceeded maximum of ${o.Config.maxMutationDuration}ms`}),Object(a.notify)("warn","Sanity check: mutation limit exceeded")),!g||Object(o.isDebug)()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return S})),n.d(t,"a",(function(){return v}));var o=n(0),i=n(16),r=n(3),a=n(9),c=n(4),s=n(1),u=n(12);let l,d,f,p=!1,g={},m={0:1,1:4,2:2};const h=101;function b(){p||(p=!0,y(),o.Events.onceInitial("dom_loaded",()=>{D(),w().forEach(({event:e,context:t=null,args:n=[]})=>{t||(t=document),Array.isArray(e)||(e=[e]),e.forEach(e=>t.addEventListener(e,O,...n))}),I()}))}function y(){o.State.merge({maxScrollHeight:Object(s.getScrollingElement)().scrollHeight,lastClickTime:null,clickEmulationRunning:!1,cursorPosition:{pageX:0,pageY:0},scrollPosition:{scrollTop:Object(s.getScrollTop)(),scrollLeft:Object(s.getScrollLeft)()},clientDimensions:{height:Object(s.getClientHeight)(),width:Object(s.getClientWidth)()},windowDimensions:{height:window.innerHeight,width:window.innerWidth}}),l={},d=null,f=null}function S(){w().forEach(({event:e,context:t=null})=>{t||(t=docum,e.forEach(e=>t.removeEventListener(e,O))}),p=!1}function O(e){if(/^(keydown|mouse(down|move)|touchend|scroll|resize|hashchange|popstate|pageshow)$/.test(e.type)&&Object(u.a)(e),"recording"===o.State.trackingStatus)switch(e.type){case"load":case"pageshow":case"pagehide":!function({type:e}){"pagehide"===e?v("pagehide"):v("load",{eventType:e})}(e);break;case"scroll":!function({target:e}){if(e.nodeType===Node.ELEMENT_NODE)return void v("elementScroll",{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,nodeId:e.mptNodeId||0,xPath:e.hasOwnProperty("mptNodeId")?Object(s.getElementXPath)(e):null});let t=Object(s.getScrollLeft)(),n=Object(s.getScrollTop)(),i=t-o.State.scrollPosition.scrollLeft,r=n-o.State.scrollPosition.scrollTop;if(!i&&!r)return;o.State.scrollPosition.scrollLeft=t,o.State.scrollPosition.scrollTop=n,v("scroll",{deltaScrollLeft:i,deltaScrollTop:r}),Object(s.isMobile)()&&N();I(),T()}(e);break;case"focus":!function(e){let t=e.target,n=t.form;if(!["INPUT","TEXTAREA","SELECT"].includes(t.nodeName))return;let i=e.hasOwnProperty("blank_value")?"":t.value;Object(c.c)(t)&&(i=Object(s.anonymizeString)(i));let r={fieldId:t.getAttribute("id")||"",fieldName:t.getAttribute("name")||"",fieldMptId:M(t)||null,fieldValue:i,fieldType:t.type,formId:null,formName:null,formMptId:null,tagName:t.tagName,XPath:Object(s.getElementXPath)(t)};n&&(r.formId=n.getAttribute("id")||"",r.formName=n.getAttribute("name")||"",r.formMptId=M(n)||null);if(o.Events.dispatch("focus",r),!r.fieldId&&!r.fieldName&&!r.fieldMptId)return;v("focus",r),Object(s.isMobile)()&&N()}(e);break;case"blur":!function(e){let t,n=e.target;if(!["INPUT","TEXTAREA","SELECT"].includes(n.nodeName))return;switch(n.type){case"password":t="*".repeat(n.value.length);break;case"checkbox":t=+n.checked;break;case"select-one":case"select-multiple":t=Object(c.c)(n)?0:n.selectedIndex;break;case"button":case"file":case"image":case"radio":case"reset":case"submit":break;default:t=n.value,Object(c.c)(n)&&(t=Object(s.anonymizeString)(t))}v("blur",{fieldValue:t})}(e);break;case"change":!function(e){let t=e.target,n=t.form;if(!t)return;let o=e.hasOwnProperty("blank_value")?"":t.value;Object(c.c)(t)&&(o=Object(s.anonymizeString)(o));let i={fieldId:t.getAttribute("id")||"",fieldName:t.getAttribute("name")||"",fieldMptId:M(t)||null,fieldValue:o,formId:null,formName:null,formMptId:null,tagName:t.tagName};n&&(i.formId=n.getAttribute("id")||"",i.formName=n.getAttribute("name")||"",i.formMptId=M(n)||null);v("change",i),Object(c.e)(t)}(e);break;case"resize":!function(){if(Object(s.isMobile)())return void N();let{innerHeight:e,innerWidth:t}=window,n=Object(s.getClientHeight)(),i=Object(s.getClientWidth)();if(e===o.State.windowDimensions.height&&t===o.State.windowDimensions.width)return;v("resize",{clientWidth:i,clientHeight:n,windowHeight:e,windowWidth:t,deltaClientHeight:n-o.State.clientDimensions.height,deltaClientWidth:i-o.State.clientDimensions.width,deltaWindowHeight:e-o.State.windowDimensions.height,deltaWindowWidth:t-o.State.windowDimensions.width}),o.State.clientDimensions.height=n,o.State.clientDimensions.width=i,o.State.windowDimensions.height=e,o.State.windowDimensions.width=t,I()}();break;case"mousedown":k(e);break;case"keydown":!function(e){if([16,17,18,91,93,224].indexOf(e.keyCode)>-1)return;let{keyCode:t,key:n}=function({target:e,keyCode:t,key:n=""}){switch(n=String(n)){case"Down":n="ArrowDown";break;case"Up":n="ArrowUp";break;case"Left":n="ArrowLeft";break;case"Right":n="ArrowRight";break;case"Esc":n="Escape"}"INPUT"===e.tagName&&"password"===e.type&&(t=106,n="*");if(!Object(c.c)(e))return{keyCode:t,key:n};/^(6[3-9]|[78]\d|90)$/.test(t)?(t=88,n="X"):/^(49|5[0-7]|9[6-9]|10[0-5])$/.test(t)&&(t=48,n="0");return{keyCode:t,key:n}}(e);v("keydown",{modKey:C(e),keyCode:t,key:n})}(e);break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":!function(e){let t=e.type;Array.from(e.changedTouches||[]).forEach(n=>{let i=n.identifier,r=l[t]||{};if("touchmove"===t&&r[i]&&r[i].screenX===n.screenX&&r[i].screenY===n.screenY)return;l.hasOwnProperty(t)||(l[t]={}),l[t][i]={screenX:n.screenX,screenY:n.screenY};let a={fingerId:i,screenX:Math.round(n.screenX),screenY:Math.round(n.screenY),pageX:Math.round(n.pageX),pageY:Math.round(n.pageY),clientX:Math.round(n.clientX),clientY:Math.round(n.clientY)};return["touchstart","touchmove"].includes(t)&&(a={...a,force:Math.round(100*(n.force||0)),angle:n.rotationAngle||0,radiusX:Math.round(n.radiusX||0),radiusY:Math.round(n.radiusY||0)}),"touchstart"===t&&(a={...a,tagName:n.target.tagName,id:Object(c.a)(n.target,"id"),href:n.target.href||"",anticlickmap:+j(n.target),xpath:Object(s.getElementXPath)(n.target)}),("touchend"===t||"touchmove"===t&&window.pageYOffset<5)&&N(),v(t,a),function(e,t,n){if(clearTimeout(g.clickEmulate),"touchstart"===t.type){if(1!==t.touches.length)return o.State.clickEmulationRunning=!1,void(d=null);o.State.clickEmulationRunning=+Date.now(),d={target:e.target,button:0,el_rel_coords:E(e.target,e.clientX,e.clientY),el_dimensions:Object(s.getNodeDimensions)(e.target),clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,anticlickmap:n.anticlickmap,xPath:n.xpath}}"touchmove"!==t.type&&"touchcancel"!==t.type||(o.State.clickEmulationRunning=!1,d=null);"touchend"===t.type&&setTimeout((function(){if(o.State.clickEmulationRunning){let e=+Date.now()-o.State.lastClickTime,t=+Date.now()-o.State.clickEmulationRunning;e>50&&t<700&&k({type:"mousedown",emulated:!0})}o.State.clickEmulationRunning=!1,d=null}),25)}(n,e,a),a})}(e);break;case"gesturestart":case"gesturechange":case"gestureend":!function({type:e,scale:t,rotation:n,target:o}){let i={scale:t,rotation:n};"gesturestart"===e&&(i.tagName=o.tagName,i.nodeId=Object(c.a)(o,"id"));v(e,i)}(e);break;case"orientationchange":N(),v("orientationChange",{orientation:Object(s.getOrientation)()});break;case"mousemove":!function({pageX:e,pageY:t}){if(e===o.State.cursorPosition.pageX&&t===o.State.cursorPosition.pageY)return;v("mousemove",{buttonId:0,modKey:0,pageX:Math.round(e-o.State.cursorPosition.pageX),pageY:Math.round(t-o.State.cursorPosition.pageY)}),o.State.cursorPosition={pageX:e,pageY:t}}(e);break;case"mouseover":case"mouseout":!function(e){if(!(null!==e&&"object"==typeof e&&e.target&&e.target instanceof Element))return;let t=e.target;if("mouseover"===e.type)for(P(t);t;)P(t),t=t.parentNode;else{let n=e.relatedTarget||e.toElement;for(x(t,n);t;)x(t,n),t=t.parentNode}}(e);break;case"input":Object(c.f)(e)}}function v(e,t={}){if(!i.hasOwnProperty(e))return void Object(s.notify)("error","Unknown Event Type: "+e);let n=Object(r.getRelTime)(),o=i[e];!1!==o.logLevel&&Object(s.notify)(o.logLevel||"debug",`Event ${e} at ${n}ms`,t),t={type:o.id,time:n,...t};let c=i[e].dataOrder||["type"];return Object(a.e)(c.map(e=>t.hasOwnProperty(e)?"boolean"==typeof t[e]?+t[e]:t[e]:e)),t}function w(){let e=[];return e.push({event:["load","pageshow","pagehide","hashchange","popstate"]}),e.push({event:["scroll","focus","blur","change","input"],args:[!0]}),e.push({event:"resize",context:window}),e.push({event:"mousedown"}),o.Config.recordKeyEvents&&e.push({event:"keydown"}),Object(s.isTouchDevice)()?(e.push({event:["touchstart","touchend","touchmove","touchcancel"]}),e.push({event:["gesturestart","gesturechange","gestureend"]}),e.push({event:"orientationchange",context:window})):(e.push({event:"mousemove"}),e.push({event:["mouseover","mouseout"],args:[!0]})),e}function k(e){if(o.State.lastClickTime=+Date.now(),Object(s.isTouchDevice)()){if(window.clearTimeout(g.clickEmulate),o.State.clickEmulationRunning){if(null===d&&e.emulated)return;e=Object.assign({},e,d)}o.State.clickEmulationRunning=!1}let{target:t,pageX:n,pageY:i,button:r}=e;if(!t)return;if(!("OPTION"!==t.tagName||n&&i))return;let a={buttonId:m[r],modKey:C(e),pageX:Math.round(n),pageY:Math.round(i)},u=e.elementDimensions||Object(s.getNodeDimensions)(t),l=e.elemenRelCoords||E(t,e.clientX,e.clientY),f=function(e){let t=[];for(;e&&e!=document;){let n=e.hasOwnProperty("mptClickableChild")?e.mptClickableChild.rect:Object(s.getNodeDimensions)(e),o=e.hasOwnProperty("mptOldParentNode")?e.mptOldParentNode:e.parentNode;o&&document&&document.Element&&o instanceof document.Element&&(n.left=n.left-parseInt(document.getComputedStyle(o).getPropertyValue("text-indent"))),n.width=e.offsetWidth||n.width,n.height=e.offsetHeight||n.height,t.push(n),e=o}return t}(t),p=e.xPath||Object(s.getElementXPath)(t);if(l.x<0||l.y<0||l.x>u.width||l.y>u.height){u.width=200,u.height=200;let e=Math.floor(l.x/u.width)*u.width,t=Math.floor(l.y/u.width)*u.width;l.x=l.x-e,l.y=l.y-t,f.unshift({left:u.left+e,top:u.top+t,width:u.width,height:u.width}),p+="/MPTHIDDEN"+e+"X"+t+"[1]"}let h=function(e){let t=[];return Array.from(e).forEach((n,o)=>{let i=e.length>o+1?e[o+1]:null,r=[n.width,n.height,n.left,n.top,0,0,1,0];i&&(r[4]=n.left-i.left,r[5]=n.top-i.top,i.width>0&&n.width>0&&(r[6]=n.width/i.width,r[7]=(i.left+.5*i.width-(.5*n.width+n.left))/(.5*n.width)),r[6]!==Math.ceil(r[6])&&(r[6]=r[6].toFixed(5)),r[7]!==Math.ceil(r[7])&&(r[7]=r[7].toFixed(5))),t.unshift(r.join(";"))}),t.join("/")}(f),b=j(t);b||"SELECT"!==t.tagName||(b=l.y<-4||l.y>u.height+4),v("mousedown",{...a,tagName:t.tagName,id:Object(c.a)(t,"id"),href:t.href||"",anticlickmap:+b,xpath:p,position:Math.round(l.x)+","+Math.round(l.y),dimensions:Math.round(u.width)+","+Math.round(u.height),dimensionPath:h}),o.State.cursorPosition={pageX:n,pageY:i}}function j(e){let t=!1;return Object(s.loopNodeTree)(e,e=>{if(Object(c.b)(e,"anticlickmap"))return t=!0,!1}),t}function C({ctrlKey:e,altKey:t,shiftKey:n,metaKey:o}){return(e?1:0)+(t?2:0)+(n?4:0)+(o?8:0)}function E(e,t,n){let o=Object(s.getNodeDimensions)(e),i=e.hasOwnProperty("mptOldParentNode")?e.mptOldParentNode:e.parentNode,r=window.getComputedStyle(e).getPropertyValue("position");return i&&i instanceof Element&&["absolute","relative","fixed"].includes(r)&&(o.left=o.left-parseInt(window.getComputedStyle(i).getPropertyValue("text-indent"))),{x:Math.round(t-o.left),y:Math.round(n-o.top)}}const N=Object(s.debounce)(()=>{v("scaleChange",{clientHeight:Object(s.getClientHeight)(),clientWidth:Object(s.getClientWidth)(),pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset})},100),T=Object(s.debounce)(()=>{let{scrollHeight:e}=Object(s.getScrollingElement)();e>o.State.maxScrollHeight&&(v("scrollHeight",{scrollHeight:e}),o.State.maxScrollHeight=e)},1e3),I=Object(s.debounce)(()=>{let e=Object(s.getScrollTop)(),t=Math.ceil(e/50),n=Math.floor((e+Object(s.getClientHeight)())/50)-t,o=t+";"+n;o!==f&&(v("areaVisibility",{firstArea:t,countAreas:n}),f=o)},500);function P(e){Object(c.b)(e,"trackHover")&&!e.mptSimulateHover&&(Object(c.d)(e.mptNodeId,{"mpt-hover":""}),e.mptSimulateHover=!0)}function x(e,t){if(Object(c.b)(e,"trackHover")&&e.mptSimulateHover){for(;t;){if(t===e)return;t=t.parentNode}Object(c.d)(e.mptNodeId,{"mpt-hover":null}),delete e.mptSimulateHover}}function D(){"string"==typeof o.Config.clickableElements&&Object(s.resolveNodes)(o.Config.clickableElements).forEach(e=>{let t={};Array.from(e.children).forEach(e=>{t[e.tagName]=(t[e.tagName]||0)+1,e.mptClickableChild={index:t[e.tagName],rect:Object(s.getNodeDimensions)(e)}})}),setTimeout(D,500)}function M(e){let t=e.getAttribute("mptid");if(t)return t;if("FORM"===e.nodeName){let n=Array.from(document.forms||[]).findIndex(t=>e===t);return~n&&e.setAttribute("mptid",n),t}let n=e.form||null,o=n?n.elements:document.getElementsByTagNName),i=Array.from(o).findIndex(t=>t===e);return t=`${e.tagName};${function(e){if(null==e)return null;if(e.getAttribute("name"))return"name:"+e.getAttribute("name");if(e.getAttribute("id"))return"id:"+e.getAttribute("id");return"mptid:"+M(e)}(n)};${i}`,e.setAttribute("mptid",t),t}},function(e,t,n){"use strict";n.r(t),n.d(t,"Matcher",(function(){return m})),n.d(t,"Property",(function(){return h})),n.d(t,"startProject",(function(){return b})),n.d(t,"addPagename",(function(){return y})),n.d(t,"addRate",(function(){return S})),n.d(t,"resolvePrecheck",(function(){return O})),n.d(t,"resolvePrecheckAsync",(function(){return v})),n.d(t,"rejectPrecheck",(function(){return w})),n.d(t,"getPagename",(function(){return k})),n.d(t,"addScope",(function(){return j})),n.d(t,"delayCheckPI",(function(){return C})),n.d(t,"setTrackingActiveCookie",(function(){return E}));var o=n(1),i=n(0),r=n(3),a=n(10);class c{constructor(e){this.config={matcherCallback:e,pagenameModifier:[],properties:[],listeners:[],nodeConfig:[]},this._cachedMatching=!1,this._boundListeners=[],i.Events.on("after_pi",()=>{this.unbindListeners(this.isMatching),this.isMatching()&&this.bindListeners()})}isMatching(e){return e&&(this._cachedMatching=Object(a.applyMatcher)(this.config.matcherCallback)),this._cachedMatching}addNodeConfig(e,t={}){this.config.nodeConfig.push({selector:e,config:t})}addPagenameModifier(e,t,n=!1){this.config.pagenameModifier.push({pagename:e,matcherCallback:t,override:n})}applyPagenameModifier(e){return this.config.pagenameModifier.forEach(t=>{t.pagename instanceof Function?e=t.pagename(e)||null:Object(a.applyMatcher)(t.matcherCallback)&&(e=t.override?t.pagename:e+t.pagename)}),e}addProperty(e,t,n={}){this.config.properties.push({name:e,valueCallback:t,...n})}on(e,t,n){Object(o.notify)("warn","Scope.on() is deprecated an will be removed in the future"),this.config.listeners.push({selector:e,event:t,callback:n})}bindListeners(){this.config.listeners.forEach(({selector:e,event:t,callback:n})=>{Object(o.resolveNodes)(e).forEach(e=>{let{bind:o,unbind:i}=t(e,n);this._boundListeners.push(i),o()})})}unbindListeners(){this._boundListeners.forEach(e=>{this._cachedMatching||e()}),this._boundListeners=[]}}var s=n(13),u=n(2),l=n(14),d=n(15);let f,p,g=Object(o.getDeviceType)();const m=n(10),h=n(14);function b(){Object(o.notify)("info",`started evaluating site #${i.Config.idsite} (Upload Time ${i.Config.uploadTime||"none"})`),null!==i.Config.idsite?(i.State.rateComparator=+Object(u.rememberCookie)("rate_comparator_"+i.Config.idsite,i.Config.trackingCookieLifetime,()=>{let e=100*Math.random();return Object(o.notify)("🎲 rate comparator has been diced to: "+e),e}),Object(i.selectTrackingServer)(),function(){if(!new RegExp(i.Config.domain,"i").test(location.hostname))return w("Domain Mismatch");if(i.Config.devices&&!~i.Config.devices.indexOf(g))return w("Device Type Mismatch");"function"==typeof i.Config.customcode&&i.Config.customcode(window.Mpathy,window.Mpathy.Project);if(function(){let e=i.Config.setup;Array.isArray(e.pagenames)&&e.pagenames.forEach(N);"global"===i.Config.trackingMode&&y(()=>(i.State.isUnmappedPagename=!0,"documentTitle"===i.Config.autoPagename?document.title:location.pathname));Array.isArray(e.properties)&&e.properties.forEach(T);Array.isArray(e.rates)&&e.rates.forEach(I);if(i.Config.defaultRates){let{desktop:e,tablet:t,phone:n}=i.Config.defaultRates;S(/.*/,{desktop:e,tablet:t,phone:n})}Array.isArray(e.unmasking)&&e.unmasking.forEach(e=>P("unmasking",e));Array.isArra&&e.anonymization.forEach(e=>P("masking",e))}(),+Object(u.getCookie)("tracking_stopped_"+i.Config.idsite))return w("Tracking Stopped");"pending"!==i.State.precheckStatus||i.Config.asyncPrecheck||O()}()):Object(o.notify)("warn","Could not start project: Missing site configuration")}function y(e,t){t="function"==typeof t?t:m.url(t),i.State.pagenames.push({pagename:e,matcherCallback:t})}function S(e,t){e="function"==typeof e?e:m.pagename(e),i.State.rates.push({matcherCallback:e,rate:t})}function O(){if(clearInterval(f),clearTimeout(p),"pending"!==i.State.precheckStatus)return void Object(o.notify)("warn","Precheck has already resolved.");return null===k()?w("Pagename Mismatch"):function(){if(Array.isArray(i.Config.setup.blacklist))return i.Config.setup.blacklist.some(s.a);return!1}()?w("Page Blacklisted"):(Object(o.notify)("%c✔️ Precheck resolved successfully!","color: green"),i.State.precheckStatus{matcherCallback:e})=>Object(a.applyMatcher)(e));if(!e)return;i.Config.trackingRate="object"==typeof e.rate?+e.rate[g]:+e.rate}(),i.Events.dispatch("project_resolved"),+Object(u.getCookie)("tracking_active_"+i.Config.idsite)?Object(r.initEngine)():i.Config.useSamplingRates&&(!function(){let e=i.State.rateComparator<=i.Config.trackingRate;return E(e),e}()?Object(o.notify)("log","⚠️ %cRecording not started automatically: Rate Mismatch.","color: orange"):Object(r.initEngine)()),Object(d.a)(),!0)}function v({callback:e,interval:t=500,timeout:n=1e4}){e(),"pending"===i.Staut(()=>{clearInterval(f),w("asyncResolve Timeout")},n))}function w(e){return clearInterval(f),clearTimeout(p),i.State.precheckStatus="rejected",i.State.rejectMessage=e,i.Events.dispatch("project_resolved"),Object(o.notify)("🛑 %cTracking rejected:","color: red; font-weight: bold",e),!1}function k(){let e=null;return i.State.isUnmappedPagename=!1,i.State.pagenames.some(({pagename:t,matcherCallback:n})=>{if(t instanceof Function?e=t()||null:Object(a.applyMatcher)(n)&&(e=t||null),null!==e)return i.State.pagename=e,!0}),null!==e&&"resolved"===i.State.precheckStatus&&i.State.scopes.forEach(t=>{t.isMatching(!0)&&(e=t.applyPagenameModifier(e),i.State.pagename=e)}),e}function j(e,t){"function"!=typeof e&&(e=m.pagename(e));let n=new c(e);i.State.scopes.p)}function C(e){return()=>Object(r.checkPI)({delay:e})}function E(e,t=null){Object(u.setCookie)("tracking_active_"+i.Config.idsite,+e,t||i.Config.trackingCookieLifetime)}function N(e){let{name:t=null,matchAll:n=!1,conditions:o=[],anonymizePage:r=!1,unmaskPage:a=!1}=e,c=i.Config.maskFullPage?a:r;y(t,m.conditions(n,o)),c&&j(m.conditions(n,o),e=>{e.addNodeConfig("body",{maskText:!i.Config.maskFullPage})})}function T(e){let{name:t="",type:n="",matchAll:o=!1,config:i={},conditions:r=[],selector:a="",overwrite:c=!1,decimalSeparator:s,defaultValue:u=null,values:d=[]}=e;i={sessionProperty:!1,...i},j(m.conditions(o,r),e=>{let o,r={overwrite:c,session:i.sessionProperty};switch(n){case"count":o=Object(l.count)(a),r.type="int";break;case"extract_text":o=Object(l.extractText)(a,u);break;case"extract_number":o=Object(l.extractNumber)(a,u,s),r.type="float";break;case"multiple":o=Object(l.multiple)(d,u)}e.addProperty(t,o,r)})}function I(e){let{desktop:t=0,tablet:n=0,phone:o=0,matchAll:i=!1,conditions:r=[]}=e;S(m.conditions(i,r),{desktop:t,tablet:n,phone:o})}function P(e,t){let{conditions:n=[],matchAll:o=!1,scope:i="global",selector:r=null}=t;r="selector"===i?r:"body",j(m.conditions(o,n),t=>{let n="masking"===e;t.addNodeConfig(r,{maskText:n})})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return C}));var o=n(1),i=n(0),r=n(9),a=n(2),c=n(3),s=n(8);let u,l=!1,d="",f=null,p=null,g=[],m=[],h=0,b=0,y=0,S=!1;function O(){if(l)return;l=!0,d="pages_"+i.Config.idsite,Object(s.e)({bufferRecoi.Config.bufferRecording});let e=setInterval(()=>{h=0},1e4),t=window.indexedDB.open("mpathy-local-buffer",1);t.addEventListener("upgradeneeded",({target:e})=>{u=e.result,u.createObjectStore(d,{keyPath:"idpage"})}),t.addEventListener("success",({target:t})=>{if(u=t.result,!u.objectStoreNames.contains(d))return Object(o.notify)(`📝 Site ID (${i.Config.idsite}) has changed on same domain --\x3e resetting local buffer`),clearInterval(e),l=!1,u.close(),void C(O);u.addEventListener("close",()=>{Object(o.notify)("warn","local buffer connection closed"),_()}),function(e){let t=P(d).openCursor();t.addEventListener("success",t=>{let n=t.target.result;n?(b+=n.value.events.length,y+=n.value.piCount,g.push(n.value),n.continue()):e()}),t.addEventListener("error",()=>Object(o.notify)("error","Error trying to get initial indexeddb pages"))}(()=>{let e=!1,t=E();if(g.length){let{lastActivity:t}=g[g.length-1];e=Date.now()-t>18e5}S=0===g.length||0===t||e,0===t||e?x(M):M()})}),t.addEventListener("error",()=>{Object(o.notifyabase"),k()})}function v(e){f=e}function w(e){m.push(e)}function k(){for(i.State.recordingToBuffer=!1,Object(a.setCookie)("recording_to_buffer_"+i.Config.idsite,0,"2h"),A(),_(),Object(r.d)();g.length>0;){let{events:e}=g.shift();for(let t=0;t<e.length;t++)Object(r.e)(e[t])}x()}function j(e=!0){_(),Object(c.pauseTracking)(),v(null),m=[],h+=1,Object(c.startTracking)(),e?x(M):M()}function C(e){let t=window.indexedDB.deleteDatabase("mpatentListener("success",()=>{D(),"function"==typeof e&&e()}),t}function E(){return+localStorage.getItem("mpt_buffer_size")}function N(e){localStorage.setItem("mpt_buffer_size",e)}funcunction I(e){localStorage.setItem("mpt_discarded_pis",e)}function P(e){return u.transaction(e,"readwrite").objectStore(e)}function x(e){let t=P(d).clear();D(),"function"==typeof e&&t.addEventListener("success",e),t.addEventListener("error",()=>{Object(o.notify)("error","error clearing stored pages"),"funct M(){p=setInterval(A,1e3)}function _(){clearInterval(p)}function A(){let e=[],t=0,n=0;for(;m.length>0;){let a=m.shift();13===a[0]&&(n+=1),!i.Config.bufferRecordingCompression||S&&!i.Config.bufferCompressionFirstPi||Object(r.b)(a),S&&15===a[0]&&(S=!1),t+=Object(o.getBlobSize)(a),e.push(a)}b+=e.length;let a=1024*i.Config.bufferRecordingLimit*1024,c=E(),u=c+t;u<a?(N(u),R(L(e,n))):"rolling"===i.Config.bufferRecording?(Object(o.notify)("warn","local buffer reached its limit --\x3e deleting older pages"),_(),t>a?(x(),m=[],Object(o.notify)("Deleting all buffer data and stop buffering for this page as total size of new events exceeds total buffer")):h>=3?(x(),m=[],Object(o.notify)("Deleting all buffer data and stop buffering for this page as too many snapshots were generated (>3 in 10000ms")):function(e,t,n,r){let a=1024*i.Config.bufferRecordingLimit*1024,c=e,s=P(d).openCursor();s.addEventListener("success",e=>{let i=e.target.result;if(!i)return;let{events:s,idpage:u,piCount:l}=i.value,{idpage:d}=g[0],m=Object(o.getBlobSize)(s);if(d===u&&d===f)return Object(o.notify)("Only one entry and buffer is full --\x3e clearing whole buffer and restarting with new Snapshot"),j();i.delete(),Object(o.notify)(`🚮 Entry PID: ${u}, Size: ${Math.roun been deleted from local buffer`),g=g.filter(e=>u!==e.idpage),c-=m,b-=s.length,y-=l,I(T()+l),c+t>a?(N(c),i.continue()):(N(c+t),.notify)("error","Error trying to parse db with cursor API"))}(c,t,e,n)):"offload"===i.Config.bufferRecording&&(Object(o.notify)("warn","local buffer reached its limit --\x3e transitioning to websocket"),k()),Object(s.e)({bufferedSize:c,bufferedEvents:b,bufferedPis:y,bufferedDiscarded"error",()=>{Object(o.notify)(toring page")})}function L(e,t){let n=g.find(e=>e.idpage===f);return n||(n={idpage:f,events:[],piCount:0},g.push(n)),n.events=n.events.concat(e),n.lastActivity=Date.now(),n.piCount+=t,y+=t,n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return g}));var o=n(1),i=n(3),r=n(0);let a={idsite:0,pagename:"",snapshotSize:0,snapshotTime:0,mutationCount:0,maxMutationSize:0,maxMutationTime:0,totalMutationSize:0,totalMutationTime:0,piDuration:0,bufferedSize:0,bufferedPis:0,bufferedDiscardedPis:0,bufferedEvents:0,bufferRecordingType:"none"},c=["snapshotSize","snapshotTime","bufferedSize","bufferedPIs","bufferedEvents","bufferRecordingType"],s={...a},u=!1;function l(){if(r.State.teoLoggingEnabled=Object(r.isDebug)()||Object(o.checkRateByVid)(r.Config.teoLoggingSampleRate),r.State.teoLoggingEnabled){u=!0;try{let e=localStorage.getItem("mpt_teo_stats");e&&g(JSON.parse(e))}catch(e){Object(o.notify)("warn","Could not parse preserved TEO Stats from last PI: "+e)}localStorage.removeItem("mpt_teo_stats"),window.addEventLisload",m)}}function d(){let e={...a};c.forEach(t=>delete e[t]),s={...s,...e}}function f({mutationId:e,mutationData:t,startTime:n}){if(!u)return;let a=performance.now(),c=Math.round(a-n),l=Number(new Blob([t],{type:"application/json"}).size)||0;isNaN(c)||isNaN(l)||("snapshot"===e?function({mutationSize:e,mutationTime:t}){let n=t>200||e>1e6;Object(o.notify)(n?"warn":"log",`Processing DOM Snapshot took ${t}ms for a size of ${Math.round(e/1e3)}kb`),s.snapshotSize=e,s.snapshotTime=t}({mutationSize:l,mutationTime:c}):function({mutationSize:e,mutationTime:t}){(t>200||e>25e4)&&Object(o.notify)("warn",`Processing mutation took ${t}ms for a size of ${Math.round(e/1e3)}kb`);s.maxMutationSize=Math.max(s.maxMutationSize,e),s.maxMutationTime=Math.max(s.maxMutationTime,t),s.totalMutationSize+=e,s.totalMutationTime+=t,s.piDuration=Object(i.getRelTime)()||0,s.mutationCount+=1}({mutationSize:l,mutationTiename,s.idsite=r.Config.idsite)}function p(e){s={...s,...e}}function g(e={}){e.msg=JSON.stringify(e.msg||s),Object(o.sendStatsRequest)({type:"teo",...e})}function m(){if(!r.State.teoLoggingEnabled)return;let e={idsite:r.Config.idsite,pid:r.State.currentPID||42,vid:Object(r.getVid)(),pn:r.State.pagename,url:location.href,user_agent:window.navigator.userAgent,versions:Object(o.getVersionsString)(),msg:s};localStorage.setItem("mpt_teo_stats",JSON.stringify(e))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"a",(function(){return j})),n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return E}));var o=n(1),i=n(0),r=n(3),){if(meak}h++}return g.join("")}(e,15,(function(e){return c(e+32)}))+" "}var u=n(7);let l,d,f=!1,p=0,g=!1,m=String.fromCharCode(0),h=String.fromCharCode(1),b=[],y=null,S=0,O=null,v=!1;function w(){f||(window.addEventListener("beforeunload",j),f=!0),i.State.recordingToBuffer?(Object(o.notify)("Recording events to local buffer."),i.State.socketStatus="buffer",Object(u.b)()):k()}function k(){if("open"===i.State.socketStatus||"pending"===i.State.socketStatus)return;let e=`wss://${i.Config.trackingServerHost}/ws/?vid=${Object(i.getVid)()}`;"initial"===i.State.socketStatus&&(i.State.socketStatus="pending",Object(o.notify)("connecting websocket to "+e)),"reconnect"===i.State.socketStatus&&Object(o.notify)(ld not open within 10 seconds and no exception was thrown")},1e4);try{l=new WebSocket(e),l.onopen=N,l.onclose=T,l.onmessage=I,l.onerror=P}catch(e){Object(o.notify)("socket failed to connect",e),M("WebSocket Error (Socket Opening Exception); Exception: "+e)}p++}function j(){if(l&&"open"===i.State.socketStatus){clearTimeout(O),function(){for(;b[0];)D(b.shift())}(),i.State.socketStatus="closed",Object(o.notify)("closing socket");try{l.close()}catch(e){Object(o.notify)("error while closing socket",e),M("WebSocket Error (Socket Closing Exception); Exception: "+e)}i.Events.dispatch("socket_closed"),clearInterval(d)}}function C(e){i.State.recordingToBuffer?Object(u.f)(e):(b.push(e),x())}function E(e){return 15===e[0]&&e[2].length>=i.Config.compressionSizeMin&&e[2].length<=i.Config.compressionSizeMax&&"{"===e[2][0]?e[2]=s(e[2]):14===e[0]&&e[1].length>=i.Config.compressionSizeMin/5&&e[1].length<=i.Config.compressionSizeMax/5&&"{"===e[1][0]&&(e[1]=s(e[1])),e}function N(){clearTimeout(O),i.State.nativeCompressionSupported="string"==typeof l.extensions&&!!~l.extensions.indexOf("permessage-deflate"),l.send("MTP/1.0\n"+m),"reconnect"===i.State.socketStatus?Object(a.a)("reconnect",{PID:i.State.currentPID}):Object(a.a)("connectTime",{clientTime:+Date.now()}),i.State.socketStatus="open",i.Events.dispatch("socket_open"),p=0,g&&i.Events.dispatch("socket_switched_server"),d=setInterval(()=>{"recording"===i.State.trackingStatus&&Object(a.a)("ping")},6e4),x()}function T(){return"closed"===i.State.socketStatus?(i.State.socketStatus="initial",void("stopped"!==i.State.trackingStatus&&Object(r.stopTracking)())):p>30?(Object(o.notify)("warn","maximal count of socket reconnect tries reached. stopping tracking"),void Object(r.stopTracking)()):(i.State.socketStatus="reconnect",p%3==2&&(i.State.serverOffset++,g=!0),void setTimeout(w,500))}function I({data:e}){if(e&&"string"==typeof e&&e.length)switch(e=e.split(h),Object(o.notify)("socket server response: "+e.join("·")),e[0]){case"7":e.length>2&&!isNaN(e[2])&&+e[2]?Object(r.stopTracking)(!0):Object(r.stopTracking)()}}function P(e){Object(o.notify)("warn","socket error",e),M()}function x(){if(!l||l.readyState!==WebSocket.OPEN||0===b.length)retuw();null===y&&(y=e),e-y>50?setTimeout((function(){y=null,x()}),1):(D(b.shift()),x())}function D(e){i.State.debug||i.State.nativeCompressionSupported||E(e);try{l.send(e.join(h)+h+m),S=0}catch(t){if(S++,S>1)return;b.unshift(e),M("WebSocket Error (Socket Send Exception); Exception: "+t)}}function M(e="Websocket Error"){clearTimeout(O),v||(Object(o.sendStatsRequest)({type:"error",msg:e,line:"0:0",script_url:"mpathy.js"}),v=!0)}},function(e,t,n){"use strict";n.r(t),n.d(t,"applyMatcher",(function(){return a})),n.d(t,"pagename",(function(){return c})),n.d(t,"url",(function(){return s})),n.d(t,"conditions",(function(){return u})),n.d(t,"visible",(function(){return l})),n.d(t,"exists",(function(){return d})),n.d(t,"contains",(function(){return f})),n.d(t,"all",(function(){return p})),n.d(t,"any",(function(){return g})),n.d(t,"not",(function(){return m}));var o=n(0),i=n(1),r=n(13);function a(e){return"function"==typeof e?e():!!e}function c(e){return()=>Object(i.matchString)(e,o.State.pagename)}function s(e){return()=>e instanceof RegExp?Object(r.a)({type:"url",comparator:"regexp",value:e}):Object(r.a)({type:"url",cor:"exact",value:e})}function u(e,t){if(!t.length)return()=>!0;reject(r.a)(e)))}function l(e){return()=>Object(i.isVisible)(e)}function d(e){return()=>Object(i.resolveNodes)(e).lengsolveNodes)(e).some(e=>Object(i.matc p(e){return()=>e.enction g(e){return()=>e.some(a)}function m(e){return()=>!a(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"startFrameBridge",(function(){return i})),n.d(t,"subscribeFrameBridge",(function(){return r})),n.d(t,"unsubscribeFrameBridge",(function(){return );let o=[];function i(){window.addEventListener("meunction r(e,t){return o.push()}function a(e,t){let n=o.find(n=>n.event===e&&n.callback===t);~n&&o.splice(n,1)}function c(e,t={},n=null){let o={mptEvent:e,payload:t};"function"==typeof n&&(n=n()),null===n?parent===window?Array.from(document.querySelectorAll("iframe")).forEach(e=>{e.contentWindow&&s(e.contentWindow,o)}):s(parent.window,o):s(n,o)}function s(e,t){try{e&&e.postMessage(t,"*")}catch(t){window.console&&window.console.error("error while sending post message",t,e)}}function u(e){let t=e.data;t instanceof Object&&t.hasOwnProperty("mptEvent")&&o.forEach(n=>{n.event===t.mptEvent&&n.callback(t.payload,e)})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return y}));var o=n(1),i=n(3),r=n(0),a=n(7);let c=!1,s=location.href,u=Date.now(),l=null,d=500,f=10,p=2e3,g=1e4,m=500;function h(){c||(c=!0,l=setInterval(S,d),function(){let e=!1;window.addEventListener("pagehide",()=>{e||window.addEventListener("pageshow",t=>{(t.persisted||window.performance&&2===window.performance.navigation.type)&&("rolling"===r.Config.bufferRecording?Object(a.c)(!1):Object(i.checkPI)({force:!0})),e=!0})})}())}function b(){c&&(clearInterval(l),c=!1)}function y(e){["mousemove","scroll"].includes(e.type)?v(e):O(e)}function S(){let e=location.href;s!==location.href&&O({type:"custom-url"}),s=e}const O=Object(o.debounce)(w,f),v=Object(o.throttle)(w,p);function w(e){if(!e||!e.type)return void Object(o.notify)("warn","Eventhandler called without event-object");if("popstate"==e.type&&!e.state)return;let t=Date.now(),n=t-u;u=t,n>g?Object(i.checkPI)({force:!1}):Object(i.checkPI)({delay:m})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(1),i=n(0);function r(e){return"object"==typeof e&&("url"===e.type?function(e,t){let n=location.pathname,i=n+location.search,r=i+location.hash,c=[n,i,r];"regexp"!==e&&(t=(t||"").replace(/^(https?:)?\/\//,""));let s=/^www\./.test(t),u=/^www\./.test(location.host);s&&!u&&(c.push("www."+location.host+n),c.push("www."+location.host+i),c.push("www."+location.host+r));if(!s&&u){let e=location.host.replace(/^www\./,"");c.push(e+n),c.push(e+i),c.push(e+r)}return c.push(location.host+n),c.push(locatiopush(location.host+r),Object(o.arrayUniq)(c).some(n=>a(e,t,n))}(e.comparator,e.value):"pagename"===e.type?(t=e.comparator,n=e.value,a(t,n,i.State.pagename)):"selector"===e.type?function(e,t,n){if("visible"===t)return Object(o.isVisible)(e);let i=Object(o.res"===t)return i.length>0;return i.some(e=>a(t,n,e.textContent))}(e.selector,e.comparator,e.value):"useragent"!==e.type||function(e,t){if("regexp"===e){return new RegExp(t).test(navigator.userAgent)}if("contains"===e)return navigator.userAgent.includes(t);if("exact"===e)return navigator.userAgent===t}(e.comparator,e.value));var t,n}function a(e,t,n){if("regexp"===e){return new RegExp(t).test(n)}return"contains"===e?n.includes(t):"start_with"===e?n.startsWith(t):"exact"===e?n===t:void 0}},function(e,t,n){"use strict";n.r(t),n.d(t,"yesno",(function(){return r})),n.d(t,"count",(function(){return a})),n.d(t,"extractNumber",(function(){return c})),n.d(t,"extractText",(function(){return s})),n.d(t,"breakpoint",(function(){return u})),n.d(t,"multiple",(function(){return l}));var o=n(0),i=n(10);function r(e,t,n){return function(){return(e instanceof Function?e():e)?t||o.Config.propertyYesValue:n||o.Config.propertyNoValue}}function a(e,t=0){return function(){return document.querySelectorAll(e).length+t}}function c(e,t=null,n="."){return function(){t=null===t?t:Number(t);let o=document.querySelector(e);if(!o)return t;let i=o.textContent;return n&&"."!==n&&(i=i.replace(n,".")),i=Number(i.replace(/[^0-9.]+/g,"")),Number.isNaN(i)?t:i}}function s(e,t="",n){return function(){let o=document.querySelector(e),i=o?o.textContent:"";if(i&&n instanceof RegExp){let e=n.exec(i);i=Array.isArray(e)?e.length>1?e.slice(1).join(""):e[0]:""}return i||t}}function u(e){return function(){let t=window.innerWidth,n=e.find((function(e){return!(void 0!==e.min&&t<e.min)&&!(void 0!==e.max&&t>e.max)}));return n&&n.name||null}}function l(e,t=""){return function(){let n=e.find(e=>("string"!=typeof e.selector||Array.isArray(e.conditions)||(e.conditions=[{type:"selector",selector:e.selector,comparator:"exists"}],e.matchAll=!0),Object(i.conditions)(e.matchAll,e.conditions)()));return n&&n.value||t}}},function(e,t,n){"use strict";n.d(t,"a",(functit,"c",(function(){return s})),n.d(t,"b",(function(){return g}));var o=n(0),i=n(3),r=n(6);let a;function c(){let{opinionlabEnabled:e,foreseeEnabled:t}=l();if(o.Config.foreseeIntegration||o.Config.opinionlabIntegration)return e?(t&&u(),Object(r.addScope)(r.Matcher.pagename(/.*/),e=>{e.addPagenameModifier("OpinionLab Survey",r.Matcher.visible(".oo_cc_wrapper"),!0)}),Object(i.startConditer("OL_CC_Launch",()=>Object(i.activateSession)("opinionlab"))):t?u():void setTimeout(c,50)}function s(){return{idsite:o.Config.idsite,idpage:o.State.currentPID,idvisitor:Object(o.getVid)(),insightUrl:p(),replayUrl:g()}}function u(){(o.Config.hasForeseeTrigger||o.Config.hasForeseeFeedback)&&(Object(r.addScope)(r.Matcher.pagename(/.*/),e=>{e.addPagenameModifier("Foresee Feedback",r.Matcher.visible("#acsModalContent"),!0),e.addPagenameModifier("Foresee Invite",r.Matcher.visible("#fsrInvite"),!0)}),window.fsReady(()=>{a=window.FSR,Object(i.startConditionalRecording)(),d("onFeedbackReady",{callback(){"stopped"!==o.State.trackingStatus&&f()},checkDidFire:!0}),d("onFeedbackShown",{callback(){"stopped"!==o.State.trackingStatus&&(fteShown",{callback(){"stopped"!==o.State.trackingStatus&&f()},checkDidFire:!0}),d("onInviteAccepted",{callback(){"stopped"!==o.State.trackingStatus&&(f(),Object(i.activateSession)())},checkDidFire:!0});let{opProductsDisqualified",{callback(){Object(i.stopTracking)(!0)},checkDidFire:!0})}))}function l(){return{opinionlabEnabled:"object"==typeof window.OOo&&o.Config.opinionlabIntegration,foreseeEnabled:"function"==typeof window.fsReady&&o.Config.foreseeIntegration}}function d(e,{callback:t,checkDidFire:n=!1}={}){"object"==typeof a[e]&&(n&&a[e].didFire&&t(),a[e].subscribe(t))}function f(){"recording"===o.State.trackingStatus&&(a.CPPS.set("mpathy_idsite",o.Config.idsite),a.CPPS.set("mpathy_idpage",o.State.currentPID),a.CPPS.set("mpathy_idvisitor",Object(o.getVid)()))}function p(){return`https://cxsuite${m()}.foresee.com/mpathy/insight/site/${o.Config.idsite}/idpage/${o.State.currentPID}`}function g(){return`https://cxsuite${m()}.foresee.com/mpathy/replay/player?idsite=${o.Config.idsite}&idpage=${o.State.currentPID}`}function m(){let e=o.Config.cdnHost.mon":{"id":43,"dataOrder":["type","time","recordingType"]}}')}]);