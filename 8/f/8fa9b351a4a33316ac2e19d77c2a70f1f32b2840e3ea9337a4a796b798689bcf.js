"use strict";(self.webpackChunk_kambi_micro_frontend_app_router=self.webpackChunk_kambi_micro_frontend_app_router||[]).push([[3272],{21676:(e,t,s)=>{s.d(t,{MS:()=>a,eb:()=>E});var i=s(69656),n=s(71569);const o={[n.hP.STRAIGHT_FORECAST]:(0,i.i0)("betoffer.multiPosition.type.forecast"),[n.hP.REVERSE_FORECAST]:(0,i.i0)("betoffer.multiPosition.type.reverseForecast"),[n.hP.COMBINATION_FORECAST]:(0,i.i0)("betoffer.multiPosition.type.combinationForecast"),[n.hP.STRAIGHT_TRICAST]:(0,i.i0)("betoffer.multiPosition.type.tricast"),[n.hP.COMBINATION_TRICAST]:(0,i.i0)("betoffer.multiPosition.type.combinationTricast")};(0,i.i0)("betoffer.multiPosition.labels.1st"),(0,i.i0)("betoffer.multiPosition.labels.2nd"),(0,i.i0)("betoffer.multiPosition.labels.3rd");function E(e){return function(t="Multiposition"){return Object.prototype.hasOwnProperty.call(o,e)?o[e]:t}}function a(e,t){const s=[n.hP.REVERSE_FORECAST,n.hP.COMBINATION_FORECAST,n.hP.COMBINATION_TRICAST].includes(e);return function(e){return s?`${e} (${t})`:e}}},71525:(e,t,s)=>{function i(e,...t){return t.reduce((,e)}function n(e=(){return function(t,...s){return e(t)?i(t,...s):t}}d(t,{Pf:()=>n,Sx:()=>o,WU:()=>i,zv:()=>E})},19502:(e,t,s)=>{s.d(t,{$r:()=>R,At:()=>d,EV:()=>_,FT:()=>y,HU:()=>I,JX:()=>u,J_:()=>p,K2:()=>T,K_:()=>r,Lp:()=>N,Lr:()=>l,Np:()=>B,OU:()=>C,PU:()=>L,Xv:()=>i,Z4:()=>A,ZC:()=>h,fW:()=>m,i5:()=>S,k7:()=>c,mQ:()=>a,o3:()=>n,oP:()=>E,qM:()=>o,uN:()=>b,zT:()=>v,zc:()=>O});const i={RCT_SINGLE:"RCT_SINGLE",RCT_COMBINATION:"RCT_COMBINATION",RCT_SYSTEM:"RCT_SYSTEM"},n={SINGLE:"single",COMBINATION:"combination",SYSTEM:"system",PATENT:"patent",TRIXIE:"trixie",YANKEE:"yankee",CANADIAN:"canadian",HEINZ:"heinz",SUPERHEINZ:"superheinz"},o={APPEND:"append",REPLACE:"replace"},E={SINGLE:"single",COMBINATION:"combination",SYSTEM:"system",PACKAGE:"package",TOTAL_STAKE:"total",TEASER:"teaser"},a={SINGLE:"single",COMBINATION:"combination",SYSTEM:"system"},r={PBA:"PBA",RECEIPT:"receipt",ERROR:"error",INFORMATION:"information",PLACING_BET:"placing-bet",OUTCOMES_LIST:"outcomes-list"},c=[r.PBA,r.ERROR,r.INFORMATION,r.RECEIPT],u={VET_STAKE_HIGHER_THAN_MAX_STAKE_ID:"stake-higher-than-max-stake",VET_POTENTIAL_PAYOUT_HIGHER_THAN_MAX_EXTRA_WINNINGS_ID:"potential-payout-higher-than-max-extra-winnings"},d={VET_TOO_MANY_OUTCOMES:"VET_TOO_MANY_OUTCOMES",VET_STAKE_TOO_LOW_FOR_TOWIN:"VET_STAKE_TOO_LOW_FOR_TOWIN",VET_NOT_LOGGED_IN:"VET_NOT_LOGGED_IN",VET_LIVE_PLACE_BET_FAIL_AFTER_DELAY:"VET_LIVE_PLACE_BET_FAIL_AFTER_DELAY",VET_LIVE_PLACE_BET_COUPON_STATUS_UNKNOWN:"VET_LIVE_PLACE_BET_COUPON_STATUS_UNKNOWN",VET_GENERIC:"VET_GENERIC",VET_REQUEST_TIMEOUT:"VET_REQUEST_TIMEOUT",VET_MULTIPLE_OUTCOME_ERRORS:"VET_MULTIPLE_OUTCOME_ERRORS",VET_LIVE_BETTING_BY_PHONE_ONLY:"VET_LIVE_BETTING_BY_PHONE_ONLY",VET_BET_CONFIRMATION_REQUIRED:"VET_BET_CONFIRMATION_REQUIRED",VET_BET_SELECTION_GENERIC:"VET_BET_SELECTION_GENERIC",VET_TEASER_NOT_AVAILABLE:"VET_TEASER_NOT_AVAILABLE",VET_TEASER_OUTCOME_CLOSED:"VET_TEASER_OUTCOME_CLOSED",VET_MIXED_BOG_REWARD:"VET_MIXED_BOG_REWARD",VET_STAKE_HIGHER_THAN_MAX_STAKE:"VET_STAKE_HIGHER_THAN_MAX_STAKE",VET_POTENTIAL_PAYOUT_HIGHER_THAN_MAX_EXTRA_WINNINGS:"VET_POTENTIAL_PAYOUT_HIGHER_THAN_MAX_EXTRA_WINNINGS",VET_BET_OFFER_CLOSED:"VET_BET_OFFER_CLOSED",VET_BET_OFFER_SUSPENDED:"VET_BET_OFFER_SUSPENDED",VET_NOT_BETTABLE:"VET_NOT_BETTABLE",VET_ODDS_CHANGED:"VET_ODDS_CHANGED",VET_ODDS_TOO_LOW:"VET_ODDS_TOO_LOW",VET_ODDS_TOO_HIGH:"VET_ODDS_TOO_HIGH",VET_INVALID_BET:"VET_INVALID_BET",VET_TOO_MANY_COUPON_ROWS:"VET_TOO_MANY_COUPON_ROWS",VET_NOT_COMBINABLE:"VET_NOT_COMBINABLE",VET_MIXED_LIVE_AND_PRE_MATCH:"VET_MIXED_LIVE_AND_PRE_MATCH",VET_STAKE_TOO_HIGH:"VET_STAKE_TOO_HIGH",VET_STAKE_LIVE_TOO_HIGH:"VET_STAKE_LIVE_TOO_HIGH",VET_STAKE_TOO_LOW:"VET_STAKE_TOO_LOW",VET_STAKE_TOO_LOW_FOR_REWARD:"VET_STAKE_TOO_LOW_FOR_REWARD",VET_STAKE_NOT_INTEGER:"VET_STAKE_NOT_INTEGER",VET_COMBINATION_STAKE_NOT_DIVISIBLE_BY:"VET_COMBINATION_STAKE_NOT_DIVISIBLE_BY",VET_PAYOUT_TOO_HIGH:"VET_PAYOUT_TOO_HIGH",VET_OVERSIZED_BET:"VET_OVERSIZED_BET",VET_STAKE_OVER_REGULATORY_LIMIT:"VET_STAKE_OVER_REGULATORY_LIMIT",VET_USER_NOT_AUTHENTICATED:"VET_USER_NOT_AUTHENTICATED",VET_USER_LOGGED_OUT:"VET_USER_LOGGED_OUT",VET_NOT_ENOUGH_FUNDS:"VET_NOT_ENOUGH_FUNDS",VET_ACCOUNT_INACTIVE:"VET_ACCOUNT_INACTIVE",VET_ACCOUNT_BLOCKED:"VET_ACCOUNT_BLOCKED",VET_RESPONSIBLE_GAMING_SELF_EXCLUSION_IN_EFFECT:"VET_RESPONSIBLE_GAMING_SELF_EXCLUSION_IN_EFFECT",VET_RESPONSIBLE_GAMING_LIMIT_EXCEEDED:"VET_RESPONSIBLE_GAMING_LIMIT_EXCEEDED",VET_GAMING_LIMIT_EXCEEDED:"VET_GAMING_LIMIT_EXCEEDED",VET_TECHNICAL_ERROR:"VET_TECHNICAL_ERROR",VET_NEW_FUNDS_BLOCKED_FOR_EVENT:"VET_NEW_FUNDS_BLOCKED_FOR_EVENT",VET_UNAVAILABLE_PROMOTION_FUNDS:"VET_UNAVAILABLE_PROMOTION_FUNDS",VET_BONUS_MONEY_NOT_ALLOWED:"VET_BONUS_MONEY_NOT_ALLOWED",VET_TERMS_CHANGED:"VET_TERMS_CHANGED",VET_REJECTED_OVER_LIMIT:"VET_REJECTED_OVER_LIMIT",VET_REJECTED_HIGH_ODDS:"VET_REJECTED_HIGH_ODDS",VET_PBA_NOT_ALLOWED:"VET_PBA_NOT_ALLOWED",VET_PARTICIPANTS_SCRATCHED:"VET_PARTICIPANTS_SCRATCHED",VET_REWARD_NOT_AVAILABLE:"VET_REWARD_NOT_AVAILABLE",VET_ODDS_BELOW_REWARD_REQUIREMENT:"VET_ODDS_BELOW_REWARD_REQUIREMENT",VET_COMBINATION_ODDS_ABOVE_REWARD_REQUIREMENT:"VET_COMBINATION_ODDS_ABOVE_REWARD_REQUIREMENT",VET_TOO_MANY_OUTCOMES_FOR_REWARD:"VET_TOO_MANY_OUTCOMES_FOR_REWARD",VET_TOO_FEW_OUTCOMES_FOR_REWARD:"VET_TOO_FEW_OUTCOMES_FOR_REWARD",VET_PBT_STAKE_TOO_HIGH:"VET_PBT_STAKE_TOO_HIGH",VET_PBT_WINNINGS_TOO_HIGH:"VET_PBT_WINNINGS_TOO_HIGH",VET_EW_REWARD_NON_EW_BET:"VET_EW_REWARD_NON_EW_BET",VET_EW_BET_NON_EW_REWARD:"VET_EW_BET_NON_EW_REWARD",VET_BAD_REQUEST:"VET_BAD_REQUEST"},_={VET_SERVER_ERROR:"VET_SERVER_ERROR"},l=["USER_NOT_AUTHENTICATED","USER_LOGGED_OUT"],T={BETSLIP_CLEAR:"betslip-clear",BETSLIP_REMOVE_CLOSED_OUTCOMES:"betslip-remove-closed-outcomes",BETSLIP_CLEAR_AFTER_RECEIVING_RECEIPT:"betslip-clear-after-receiving-receipt",BETSLIP_CLEAR_OUTCOMES_BECOMING_LIVE:"betslip-clear-outcomes-becoming-live"},O={VALID:"valid",INVALID:"invalid"},I={PBA_SEND_UNAPPROVED:"PBA_SEND_UNAPPROVED",PBA_SEND_ALL:"PBA_SEND_ALL",PBA_DISREGARD_UNAPPROVED:"PBA_DISREGARD_UNAPPROVED"},S=3,p="^[0-9]{%max}(%milli[0-9]{3})*[%decimal]{0,1}[0-9]{0,2}$",A="^[0-9]*[%decimal]{0,1}[0-9]{0,2}$",b=[",","."],h=".",R=["ArrowRight","ArrowLeft","Backspace"],m="no_coupon",v=-1,C={SHOWING:"showing",HIDING:"hiding",NO_ANIMATION:"no_animation"},B={SUCCESS:"SUCCESS",FAIL:"FAIL",LIMIT_FAIL:"LIMIT_FAIL",APPROVAL_PENDING:"APPROVAL_PENDING",LIVE_DELAY_PENDING:"LIVE_DELAY_PENDING"},y={STAKE:"betslip-stake-input-mode-stake",TOWIN:"betslip-stake-input-mode-towin"},L={STAKE:"STAKE",STAKE_DIVISOR:"STAKE_DIVISOR",PARTICIPANT:"PARTICIPANT",EACH_WAY_FRACTION:"EACH_WAY_FRACTION",EACH_WAY_PLACE_LIMIT:"EACH_WAY_PLACE_LIMIT",EACH_WAY_TERM:"EACH_WAY_TERM",ODDS:"ODDS",GENERAL:"GENERAL"},N=12},79149:(e,t,s)=>{s.d(t,{DF:()=>E,EP:()=>c,Sh:()=>n,Xp:()=>a,pE:()=>r,qU:()=>u,tl:()=>o});var i=s(87181);const n={DEFAULT:(()=>{let e=12;const t=(0,i.getData)(i.customerSettings.selector).defaultMaxOutcomesInBetslip,s=parseInt(t);return isNaN(s)||(e=s>=51?50:s),e})(),OTC:9,BARCODE:9},o={SINGLE:"single",DOUBLE:"double",TREBLE:"treble",FOURFOLD:"fourfold",FIVEFOLD:"fivefold",SIXFOLD:"sixfold",SEVENFOLD:"sevenfold",EIGHTFOLD:"eightfold",NINEFOLD:"ninefold",TENFOLD:"tenfold",ELEVENFOLD:"elevenfold",TWELVEFOLD:"twelvefold",PATENT:"patent",TRIXIE:"trixie",YANKEE:"yankee",LUCKY_15:"lucky15",CANADIAN:"canadian",LUCKY_31:"lucky31",HEINZ:"heinz",LUCKY_63:"lucky63",SUPERHEINZ:"superheinz"},E={1:o.SINGLE,2:o.DOUBLE,3:o.TREBLE,4:o.FOURFOLD,5:o.FIVEFOLD,6:o.SIXFOLD,7:o.SEVENFOLD,8:o.EIGHTFOLD,9:o.NINEFOLD,10:o.TENFOLD,11:o.ELEVENFOLD,12:o.TWELVEFOLD},a=Object.keys(E).map((e=>E[e])),r={1:"combination.sizeSingle",2:"combination.sizeDouble",3:"combination.sizeTriple",4:"combination.sizeFour",5:"combination.sizeFive",6:"combination.sizeSix",7:"combination.sizeSeven",8:"combination.sizeEight",9:"combination.sizeNine",10:"combination.sizeTen",11:"combination.sizeEleven",12:"combination.sizeTwelve",13:"combination.sizeThirtheen",14:"combination.sizeFourteen",15:"combination.sizeFifteen",16:"combination.sizeSixteen",17:"combination.sizeSeventeen",18:"combination.sizeEighteen",19:"combination.sizeNineteen",20:"combination.sizeTwenty",21:"combination.sizeTwentyOne",22:"combination.sizeTwentyTwo",23:"combination.sizeTwentyThree",24:"combination.sizeTwentyFour",25:"combination.sizeTwentyFive",26:"combination.sizeTwentySix",27:"combination.sizeTwentySeven",28:"combination.sizeTwentyEight",29:"combination.sizeTwentyNine",30:"combination.sizeThirty",31:"combination.sizeThirtyOne",32:"combination.sizeThirtyTwo",33:"combination.sizeThirtyThree",34:"combination.sizeThirtyFour",35:"combination.sizeThirtyFive",36:"combination.sizeThirtySix",37:"combination.sizeThirtySeven",38:"combination.sizeThirtyEight",39:"combination.sizeThirtyNine",40:"combination.sizeForty",41:"combination.sizeFortyOne",42:"combination.sizeFortyTwo",43:"combination.sizeFortyThree",44:"combination.sizeFortyFour",45:"combination.sizeFortyFive",46:"combination.sizeFortySix",47:"combination.sizeFortySeven",48:"combination.sizeFortyEight",49:"combination.sizeFortyNine",50:"combination.sizeFifty"},c={1:"combination.sizeSingles",2:"combination.sizeDoubles",3:"combination.sizeTriples",4:"combination.sizeFours",5:"combination.sizeFives",6:"combination.sizeSixs",7:"combination.sizeSevens",8:"combination.sizeEights",9:"combination.sizeNines",10:"combination.sizeTens",11:"combination.sizeElevens",12:"combination.sizeTwelves"},u=[{id:o.TRIXIE,combination:[o.DOUBLE,o.TREBLE],selectedOutcomes:3,translationKey:"betslip.systems.betPackage.trixie"},{id:o.PATENT,combination:[o.SINGLE,o.DOUBLE,o.TREBLE],selectedOutcomes:3,translationKey:"betslip.systems.betPackage.patent"},{id:o.YANKEE,combination:[o.DOUBLE,o.TREBLE,o.FOURFOLD],selectedOutcomes:4,translationKey:"betslip.systems.betPackage.yankee"},{id:o.LUCKY_15,combination:[o.SINGLE,o.DOUBLE,o.TREBLE,o.FOURFOLD],selectedOutcomes:4,translationKey:"betslip.systems.betPackage.lucky15"},{id:o.CANADIAN,combination:[o.DOUBLE,o.TREBLE,o.FOURFOLD,o.FIVEFOLD],selectedOutcomes:5,translationKey:"betslip.systems.betPackage.canadian"},{id:o.LUCKY_31,combination:[o.SINGLE,o.DOUBLE,o.TREBLE,o.FOURFOLD,o.FIVEFOLD],selectedOutcomes:5,translationKey:"betslip.systems.betPackage.lucky31"},{id:o.HEINZ,combination:[o.DOUBLE,o.TREBLE,o.FOURFOLD,o.FIVEFOLD,o.SIXFOLD],selectedOutcomes:6,translationKey:"betslip.systems.betPackage.heinz"},{id:o.LUCKY_63,combination:[o.SINGLE,o.DOUBLE,o.TREBLE,o.FOURFOLD,o.FIVEFOLD,o.SIXFOLD],selectedOutcomes:6,translationKey:"betslip.systems.betPackage.lucky63"},{id:o.SUPERHEINZ,combination:[o.DOUBLE,o.TREBLE,o.FOURFOLD,o.FIVEFOLD,o.SIXFOLD,o.SEVENFOLD],selectedOutcomes:7,translationKey:"betslip.systems.betPackage.superheinz"}]},39814:(e,t,s)=>{s.d(t,{p:()=>i});s(634);const i={SUCCESS:Symbol("success"),PARTIALLY_SUCCESS:Symbol("partially_success"),ERROR:Symbol("error"),WARNING:Symbol("warning"),PENDING:Symbol("pending"),INFO:Symbol("info")}},8299:(e,t,s)=>{s.d(t,{Z:()=>L});var i=s(23459),n=s(94798),o=s(82614),E=s(33577),a=s(30868),r=s(20595),c=s(19502);function u({pbaOptions:e,generalErrors:t}){const s=function(e=[]){return!e.some((e=>e.type===c.At.VET_PBA_NOT_ALLOWED))}(t);return e.map(()}var d=s(64365),_=s(99250),l=s(82198),T=s(50770),O=s(55527),I=s(97849),S=s(74553),p=s(69656),A=s(39814),b=s(68530),h=s(13272),R=s(8652),m=s(97586),v=s(63449),C=s(75449);const B=(e=[],t=[])=>{const s=t.map((t=>(0,m.ei)(t,e)));return e.length?s:[]};class y extends o.Z{onstructor(){super(),this.lastSyncTime=void 0,this.lastSyncPayload=void 0,this.lastSyncCallStack=void 0,this.currentCouponRef=null}andleCoupon({coupon:e,status:t,couponRef:s,delayBeforeAcceptingBet:o,pbaUnapprovedPlaceSuccessResponse:E},a){if([c.Np.SUCCESS,c.Np.APPROVAL_PENDING].includes(t)||a.get("couponRef")&&!t)this.parseCoupon(e,a),E&&this.sendCustomerNotificaton(i.Z.NOTIFICATION_APPROVAL_PENDING_BET,E);else if(t===c.Np.LIVE_DELAY_PENDING&&o){n.EventBus.send(n.EventKeys.DIAGNOSE_PERSONAL_PUSH,{id:s,delay:1e3*o});const e=a.get("trackingData");n.EventBus.send(n.EventKeys.DELAYED_ACCEPT_BET_RECEIVED,{couponRef:s,delayBeforeAcceptingBet:o,trackingData:e});const t=e=>{const i=null==e?void 0:e.success,o=null==e?void 0:e.error,E=(null==i?void 0:i.couponRef)||(null==o?void 0:o.couponRef);s===E&&(i?this.parse(i,null,a):o&&((0,T.i)(o,a),this.handleCouponError(o)),n.EventBus.unsubscribe(n.EventKeys.HISTORY_COUPON_RECEIVED_FROM_PUSH,t))};n.EventBus.subscribe(n.EventKeys.HISTORY_COUPON_RECEIVED_FROM_PUSH,t)}}parse(e,t,s){var i,o,E,a;e.status===c.Np.LIVE_DELAY_PENDING&&(this.currentCouponRef=e.couponRef);h.Z.getState().get("displayState")===c.K_.ERROR&&e.status!==c.Np.LIVE_DELAY_PENDING&&this._propagateClearErrors();const r=null==e||null===(i=e.coupon)||void 0===i?void 0:i.success,u=null==e||null===(o=e.pbaCoupon)||void 0===o?void 0:o.success,d=null==e||null===(E=e.coupon)||void 0===E?void 0:E.error,_=null==e||null===(a=e.pbaCoupon)||void 0===a?void 0:a.error,l=d||_;if(l)(0,T.i)(l,s),l.status===c.Np.LIMIT_FAIL?this._handlePba(l):this.handleCouponError(l);else{const t=r||u||e,i=t[0]||t.coupon,{status:o,delayBeforeAcceptingBet:E}=t,a=null==i?void 0:i.couponRef;if(i){var O,I;if(u)i.stakeAwaitingApproval=null===(O=u.coupon)||void 0===O||null===(I=O.bets)||void 0===I?void 0:I.reduce((,0);this._handleCoupon({coupon:i,status:o,couponRef:a,delayBeforeAcceptingBet:E,pbaUnapprovedPlaceSuccessResponse:u},s)}else n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_GENERIC)}u&&n.EventBus.send(n.EventKeys.REQUEST_TOASTER,{id:u.couponRef,title:(0,p.i0)("betslip.pba.pbaPendingHeader"),message:(0,p.i0)("betslip.pba.pbaPendingBody"),type:A.p.PENDING,sticky:!0}),n.EventBus.send(n.EventKeys.PLACE_BET_REQUEST_COMPLETED)}parseCoupon(e,t){var s;const o=(0,E.Q)(e),u=o.couponRef;if(this.currentCouponRef&&o.status===d.K7.REJECTED&&u!==this.currentCouponRef)return void(this.currentCouponRef=null);const{outcomes:_}=e;let l=_.map(();const T=(0,r.Q)(e);if((null===(s=T[0])||void 0===s?void 0:s.betStatus)===d.K7.WAITING_FOR_APPROVAL&&!o.hasPBABets)return void(t.get("pollingCount")>0?this._doPoll(t):n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_LIVE_PLACE_BET_COUPON_STATUS_UNKNOWN));if(this.isCouponRejected(o))return n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_LIVE_PLACE_BET_FAIL_AFTER_DELAY),void this.sendCustomerNotificaton(i.Z.NOTIFICATION_BET_FAILED_PLACING,{type:c.EV.VET_SERVER_ERROR,response:e});n.EventBus.send(n.EventKeys.BETSLIP_CLEAR,{trigger:c.K2.BETSLIP_CLEAR_AFTER_RECEIVING_RECEIPT}),n.EventBus.send(n.EventKeys.BETSLIP_CLEAR_STAKES),n.EventBus.send(n.EventKeys.BETSLIP_CLEAR_PBA_OPTIONS),n.EventBus.send(n.EventKeys.CLEAR_SELECTED_VALID_REWARD);const I=t.get("trackingData")||{},{isBetBuilderCombination:S,selectedOutcomes:p=[]}=I,A=(e=>{const{placedDate:t,rewardType:s,currency:i,bets:n,betOffers:o,couponRows:E,outcomes:a,events:r}=e||{},c=B(["couponRowIndexes","playedOdds","betOddsBoosted","potentialPayout","potentialPayoutBoosted","stake"],n),u=B(["betOfferId","criterion"],o),d=B(["index","outcomeId","teaserPlusOffset","selectionType","playedOdds","oddsBoosted","outcomeGroup"],E).map((e=>{const{groups:t}=(null==e?void 0:e.outcomeGroup)||{};return t&&(e.outcomeGroup={groups:B(["outcomeIds"],t)}),e})),_=B(["outcomeId","eventId","betOfferId","label"],a),l=B(["eventId","eventName","eventStartDate","sport"],r);return{...t&&{placedDate:t},...s&&{rewardType:s},...i&&{currency:i},...c.length&&{bets:c},...u.length&&{betOffers:u},...d.length&&{couponRows:d},..._.length&&{outcomes:_},...l.length&&{events:l}}})(e)||{},b={isBetBuilderCombination:S,selectedOutcomes:p,couponFromAPI:A,...o};n.EventBus.send(n.EventKeys.BET_HISTORY_OUTCOMES_RECEIVED,l),n.EventBus.send(n.EventKeys.BET_HISTORY_BETS_RECEIVED,T),n.EventBus.send(n.EventKeys.BET_HISTORY_DETAIL_COUPON_RECEIVED,b),n.EventBus.send(n.EventKeys.COUPONS_PLACED_IN_SESSION,{id:o.id}),n.EventBus.send(n.EventKeys.BET_HISTORY_DETAIL_COUPON_REF_RECEIVED,u),o.isOddsBoostBet&&p.forEach((e=>{const t=R.Z.getActiveRewardWithTypeAndOutcomeId(i.Z.REWARD_TYPE_ODDS_BOOST,e.id);null!=t&&t.get("id")&&n.EventBus.send(n.EventKeys.UPDATE_REWARD_STATUS,t.get("id"))})),l=l.map((e=>{const t=p.filter((t=>t.id===e.outcomeId));if(t.length){const{source:s,fromBetBuilder:i}=t[0];return{...e,source:s,fromBetBuilder:i}}return e})),n.EventBus.send(n.EventKeys.TRACK_PLACE_BET,{coupon:o,outcomes:l,...I}),(0,O.V1)(),this.sendCustomerNotificaton(i.Z.NOTIFICATION_BET_SUCCEEDED_PLACING),this.sendCustomerNotificaton(i.Z.NOTIFICATION_BET_PLACED,u)}andlePba(e){const t=u(e);n.EventBus.send(n.EventKeys.PBA_OPTIONS_RECEIVED,t)}onPostError(e,t){var s,o,E,a,r,u;super.onPostError(e,t);const d=t.responseJSON,_=null==d||null===(s=d.coupon)||void 0===s?void 0:s.error,l=null==d||null===(o=d.pbaCoupon)||void 0===o?void 0:o.error;if(_||l){var O;const t=null===(O=e.get("bets"))||void 0===O?void 0:O[0];t&&(t.stake=_?e.get("approvedStake"):e.get("unapprovedStake"))}let I=_||l||d;if(I&&((0,T.i)(I,e),I={...I,requestCoupon:e.toJSON()}),this._propagateClearErrors(),401===t.status)return n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_NOT_LOGGED_IN),this.sendCustomerNotificaton(i.Z.NOTIFICATION_BET_FAILED_PLACING,{type:c.EV.VET_SERVER_ERROR,response:I}),void n.EventBus.send(n.EventKeys.PLACE_BET_REQUEST_COMPLETED);const S=(null===(E=I)||void 0===E?void 0:E.status)===c.Np.LIMIT_FAIL&&(null===(a=I)||void 0===a||null===(r=a.pbaOptions)||void 0===r?void 0:r.length)>0,p=401===t.status,A=409===t.status,b=0===t.status;n.EventBus.send(n.EventKeys.REQUEST_COUPON_RECEIVED,e.toJSON()),I&&!S&&this.handleCouponError(I),p?n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_NOT_LOGGED_IN):b?n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_REQUEST_TIMEOUT):S?this._handlePba(I):A||n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,c.At.VET_GENERIC),I||S||this.sendCustomerNotificaton(i.Z.NOTIFICATION_BET_FAILED_PLACING,{type:c.EV.VET_SERVER_ERROR}),null!==(u=I)&&void 0!==u&&u.retailSecondaryApprovalAvailable&&this._handleSecondaryApproval(!0),n.EventBus.send(n.EventKeys.PLACE_BET_REQUEST_COMPLETED)}sendCustomerNotificaton(e,t){const s={name:e};t&&(s.data=t),(0,C.t6)(s)}urlPath(e){const t=e.get("pbaId");if(t)return e.unset("pbaId",{silent:!0}),`/coupon/pba/${t}.json`;const s=e.get("couponRef");return s?`/coupon/history/${s}.json`:"/coupon.json"}queryParams(e){const t=super.queryParams(e);return e.get("couponRef")&&(t.liveDelayPoll="true"),e.get("punterProfile")&&(t.suggestedPunterLevel=e.get("punterProfile"),e.unset("punterProfile",{silent:!0})),t}isCouponRejecteddoPoll(e){const t=e.get("pollingCount")-1;e.set("pollingCount",t),setTimeout((,_.Qn)}fetch(e){const t=e.pollingCount;delete e.pollingCount;const s=this.getModelInstance(e),i=s.fetch({success:this.onFetchSuccess,error:this.onFetchError});return s.set("pollingCount",t),i}onFetchError(e,t){super.onFetchError(e,t);const s=0===t.status?c.At.VET_REQUEST_TIMEOUT:c.At.VET_GENERIC;n.EventBus.send(n.EventKeys.BETSLIP_ADD_FEEDBACK,s),this.sendCustomerNotificaton(i.Z.NOTIFICATION_BET_FAILED_PLACING,{type:s,response:null}),n.EventBus.send(n.EventKeys.PLACE_BET_REQUEST_COMPLETED)}sync(e,t,s){if("read"!==e){const e=t.toJSON(),s=Date.now(),i=I.Session.get(S.SessionAPIConstants.SESSION_ID),n=(0,m.ei)(e,["allowOddsChange","channel","bets","couponRows","requestId"]),o=i+JSON.stringify(n);let E=(new Error).stack||"";if(e.callStack&&!((0,l.gn)()||(0,l.rW)()||(0,l.vU)())&&(E+=`\n@@@\n${e.callStack}`),this.lastSyncPayload===o&&(0,C.qQ)()){const e=s-this.lastSyncTime,{requestId:t}=n;v.captureEvent({message:`Placing identical subsequent bets for requestId: ${t}`,extra:{currentSyncPayload:o,currentCallStack:E,lastSyncCallStack:this.lastSyncCallStack,timeDiff:e}})}this.lastSyncTime=s,this.lastSyncPayload=o,this.lastSyncCallStack=E}t.unset("callStack",{silent:!0}),super.sync(e,t,s)}}const L=new y},55527:(e,t,s)=>{s.d(t,{V1:()=>d,dV:()=>l,hX:()=>_});var i=s(87181),n=s(97849),o=s(99250),E=s(75449);let a;const r=(0,i.observeStore)((,();function c(e){!n.Session.isDisposed&&n.Session.isUserLoggedIn()&&n.Session.update({[n.SessionAPIConstants.BALANCE]:e})}function u(){n.Session.isDisposed||n.Session.update({[n.SessionAPIConstants.BALANCE]:void 0})}function d(){var e;null===(e=(0,E.m8)("getBalance"))||void 0===e||e(c,u)}function _(){a=setInterval((,o.Nu)}function l(){a&&clearInterval(a),null==r||r()}},50770:(e,t,s)=>{function i(e,t){!function(e=[],t){e.forEach((e=>{var s,i,n,o;const E=e.betIndex,a=null==t||null===(s=t.get("bets"))||void 0===s?void 0:s[E],r=e.errors[0],{type:c}=r;e.id=`${E}-${c}`,e.type=`VET_${c}`,e.values=[{bet:a,index:E,value:null!==(i=null===(n=r.arguments)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.value)&&void 0!==i?i:""}]}))}(e.betErrors,t),function(e=[]){e.forEach(((e,t)=>{const{type:s}=e;e.id=`${t}-${s}`,e.type=`VET_${s}`,e.arguments?e.values=e.arguments.map(():e.values=[{index:0,value:""}]}))}(e.generalErrors),function(e=[],t){e.forEach((e=>{var s,i,n,o;const E=e.couponRowIndex,a=null==t||null===(s=t.get("couponRows"))||void 0===s?void 0:s[E],r=e.errors[0],{type:c}=r;e.id=`${E}-${c}`,e.type=`VET_${c}`,e.values=[{couponRow:a,index:E,value:null!==(i=null===(n=r.arguments)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.value)&&void 0!==i?i:""}]}))}(e.couponRowErrors,t)}function n(e,t,s,i){const n=Array.isArray(t),o=n?{groups:[{outcomeIds:t}]}:void 0,E=n?1e3*s:null==e?void 0:e.get("approvedOdds"),a=n?1e3*i:null==e?void 0:e.get("odds");return{values:[{couponRow:{outcomeId:null==e?void 0:e.id,group:o,odds:E},value:a}]}}s.d(t,{$:()=>n,i:()=>i})},20595:(e,t,s)=>{s.d(t,{Q:()=>o});var i=s(68277),n=s(99315);function o({bets:e,couponRef:t},s){return e.map((e=>{var o;return{id:e.betRef,betStatus:e.betStatus,couponRef:t,eachWay:!(null===(o=e.tags)||void 0===o||!o.includes(n.zg.EACH_WAY)),statusType:(0,i.O1)(e.betStatus),currency:s}}))}},30868:(e,t,s)=>{s.d(t,{Q:()=>m});var i=s(87181),n=s(82862),o=s(69656);function E(e,t,s){return function(e,t,s){switch(e){case"1":return t;case"X":return(0,o.i0)("outcomes.draw");case"2":return s;default:return e}}(e,t,s)}const a=/.{2,} +\(\d+-\d+\)/;var r=s(71569);const c=[`(${(0,o.i0)("betoffer.multiPosition.labels.1st")})`,`(${(0,o.i0)("betoffer.multiPosition.labels.2nd")})`,`(${(0,o.i0)("betoffer.multiPosition.labels.3rd")})`];function u(e,t,s){return"1"===e?t:"2"===e?s:(0,o.i0)("outcomes.draw")}var d=s(15388),_=s(64365),l=s(68530);function T(e,t,s,i,n){const T=s.boTypeId,O=s.boType,I=e.label,S=i.homeName,p=i.awayName,A=s.eachWayTerms,b=s.h2hParticipants,h=t.multiPosition;if(T===d.i0.ONE_CROSS_TWO.id||T===d.i0.SIDE_BETS.id)return E(I,S,p);if(T===d.i0.OUTRIGHT.id)return function(e,t,s){return s&&""!==s?`${e}`:"Winner"===t?`${e} (${t})`:`${e} ${t}`}(I,O,A);if(T===d.i0.THREE_WAY_HCP.id)return I);if(T===d.i0.DOUBLE_CHANCE.id)return function(e,t,s){switch(e){case"1X":return`${t} ${(0,o.i0)("outcomes.orDraw")}`;case"X2":return`${s} ${(0,o.i0)("outcomes.orDraw")}`;case"12":return`${t} ${(0,o.i0)("outcomes.or")} ${s}`;default:return e}}(I,S,p);if(T===d.i0.HEAD.id)return I,b);if(T===d.i0.MULTI_POSITION.id){const{type:e,participants:t,selection:s}=h;if(t&&s)return m=t,v=s,(R=e)===r.hP.STRAIGHT_FORECAST||R===r.hP.STRAIGHT_TRICAST?v.map(((e,t)=>{const s=e.participantIds[0],i=m.find((e=>e.participantId===s)).name;return`${c[t]} ${i}`})).join(", "):v[0].participantIds.map(().join(", ")}var R,m,v;if(T===d.i0.HT_FT.id)return function(e,t,s){return e.replace(/([12x])\s*\/\s*([12x])/gi,((e,i,n)=>`${u(i,t,s)}/${u(n,t,s)}`))}(I,S,p);if(t.selectionType===_.FB.CAST){const e=(0,l.oj)(t,n);return null==e?void 0:e.map((e=>e.label)).join(" & ")}return t.teaserPlusOffset?(e=>{const t=e.lastIndexOf(" "),s=e.substring(t+1).trim(),i=isNaN(s[0])&&s[0];return i?`${e.slice(0,t)} ${i}${parseFloat(s.substring(1))}`:`${e.slice(0,t)} ${parseFloat(s)}`})(I,s.line,t.teaserPlusOffset):I}var O=s(68277),I=s(71525),S=s(21676);function p(e){if(e){const t=e.reduce(((e,t)=>{const s=t.participantIds;return e.concat(s)}),[]);return[...new Set(t)]}}var A=s(45269),b=s(7825),h=s(99315),R=s(77837);function m(e,t){var s,o,E,a,c,u,m,v;let C,B;const{outcomes:y}=e;t.selectionType===_.FB.CAST?(C=t,B=(0,l.oj)(C,y)[0]):(B=t,C=(0,l.mi)(e,B)||{});const L=(0,l.Ct)(e,C)||[],N=e.betOffers||[];let D=N.find((e=>e.betOfferId===B.betOfferId))||{};const P=N.find(()||void 0;let f=(null===(s=e.events)||void 0===s?void 0:s.find((e=>e.eventId===B.eventId)))||{};const{couponRows:g}=e,V=g.some((e=>e.selectionType===_.FB.CAST));let K={couponRef:e.couponRef,outcomeId:B.outcomeId,eventId:B.eventId,eventName:f.eventName,eventExtraInfo:B.eventExtraInfo,status:B.status};if((C&&C.outcomeId===B.outcomeId&&C.status||C&&V&&C.status)&&(K.status=C.status),K.id=function(e,t,s){switch(s.selectionType){case _.FB.SIMPLE:case _.FB.BET_BUILDER:return`${e}_${t.outcomeId}`;case _.FB.CAST:return(0,l.qL)(e,s)}}(K.couponRef,B,C),K.statusType=(0,O.O1)(K.status),Object.prototype.hasOwnProperty.call(B,"stake")&&(K.stake=B.stake),V){const t=e.bets[C.index];t&&(K.stake=t.requestedStake&&!t.stake?t.requestedStake:t.stake)}if(Object.prototype.hasOwnProperty.call(B,"rejectedStake")&&(K.rejectedStake=B.rejectedStake),Object.prototype.hasOwnProperty.call(B,"payout")&&(K.payout=B.payout),Object.prototype.hasOwnProperty.call(B,"potentialPayout")&&(K.potentialPayout=B.potentialPayout),Object.prototype.hasOwnProperty.call(B,"localLicenseReference")&&(K.localLicenseReference=B.localLicenseReference),Object.prototype.hasOwnProperty.call(C,"playedOdds")&&(K.playedOdds=C.playedOdds),Object.prototype.hasOwnProperty.call(C,"oddsBoosted")&&(K.oddsBoosted=C.oddsBoosted),K.rule4Applied=!(null===(o=D.tags)||void 0===o||!o.includes(h.KP.RULE4)),Object.prototype.hasOwnProperty.call(C,"rule4Odds")&&(K.rule4Odds=C.rule4Odds),Object.prototype.hasOwnProperty.call(C,"bestOddsGuaranteed")&&(K.bestOddsGuaranteed=C.bestOddsGuaranteed),f.homeName&&(K.eventHomeName=f.homeName,K.eventAwayName=f.awayName),null!==(E=C)&&void 0!==E&&null!==(a=E.tags)&&void 0!==a&&a.includes(h.cM.LIVE)&&(K.betofferLive=!0),Object.prototype.hasOwnProperty.call(B,"betOfferId")){K.betLabel=T(B,C,D,f,e.outcomes),K.betofferId=B.betOfferId;const{boTypeId:t,boType:s,criterion:i}=D;K.betofferTypeId=t,K.betofferTypeName=s,K.betofferCriterionLabel=i,Object.prototype.hasOwnProperty.call(B,"scoreCriterion")&&(K.betofferCriterionLabel=`${i}(${B.scoreCriterion})`)}if(C.selectionType===_.FB.CAST){const e=(0,l.m1)(C);K.playercastId=(0,b.YL)(e[0],e[1])}if(K.startingPrice=!(null===(c=D.tags)||void 0===c||!c.includes(h.KP.STARTING_PRICE)),K.neutralVenue=!(null===(u=B.outcomeTags)||void 0===u||!u.includes(h.kO.NEUTRAL_VENUE)),Object.prototype.hasOwnProperty.call(C,"multiPosition")){const{type:e,participantIds:t,criterionLabel:s}=function({type:e,selection:t,nrOfPermutations:s}){return{type:e=r.hP[e],participantIds:p(t),criterionLabel:(0,I.WU)("",(0,S.eb)(e),(0,S.MS)(e,s))}}(C.multiPosition);K.multiPositionType=e,K.betofferCriterionLabel=s,K.participantIds=t,K.isMultiPosition=!0}K.voidReason=null===(m=B.settledInfo)||void 0===m?void 0:m.voidReason,L.some((e=>{var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(h.zg.EACH_WAY)}))&&P&&(K.eachWayTerms=P.eachWayTerms),Object.prototype.hasOwnProperty.call(C,"payoutOdds")&&(K.payoutOdds=C.payoutOdds),Object.prototype.hasOwnProperty.call(D,"extraInfo")&&(K.extraInfo=D.extraInfo);const F=f.eventGroups;F&&(K.path=F.map((e=>e.name)).join(" / "),K.eventGroupIds=F.map((e=>e.id)),K.eventGroups=F);const U=f.eventStartDate;if(U){const e=(0,A.AU)(U);K.startTimeValue=e.getTime(),K.startTime=(0,A.$4)(e,{withSeconds:!1})}const M=null===(v=B.settledInfo)||void 0===v?void 0:v.result;if(M)if(V){const e=(0,l.oj)(C,y);K.result=null==e?void 0:e.map(().filter(Boolean).join(" & ")}else{var z;K.result=M.score||(null===(z=M.correct)||void 0===z?void 0:z.join(", "))}C.selectionType===_.FB.BET_BUILDER&&(K.isBetBuilderOutcome=!0),Object.prototype.hasOwnProperty.call(D,"line")&&(K.line=D.line);if((0,i.getData)(i.customerSettings.selector).enableBetOfferLabelHelper){var G,w,H;const{scoreCriterion:e}=B;if((null===(G=D)||void 0===G?void 0:G.boTypeId)===d.i0.SCORER.id&&e&&(K={...K,criterion:{name:e}}),(null===(w=D)||void 0===w?void 0:w.boTypeId)===d.i0.MULTI_POSITION.id&&C.multiPosition){var k;const{selection:e,type:t,participants:s}=C.multiPosition;K.participants=s;const i=t===r.hP.STRAIGHT_FORECAST||t===r.hP.STRAIGHT_TRICAST,{eventId:n}=f;K.selections=e.reduce(((e,t)=>{const{participantIds:s,position:o}=t,E={1:r.Ly.FIRST,2:r.Ly.SECOND,3:r.Ly.THIRD};return s.forEach((t=>e[`${n}_${t}`]=i?E[o]:r.Ly.ANY)),e}),{}),K.placeLimit=i?null===(k=Object.keys(K.selections))||void 0===k?void 0:k.length:0,i||K.participants.sort(()}if(D){const{boTypeId:e,criterion:t}=D;D={...D,outcomes:[K],placeLimit:K.placeLimit,criterion:{label:t},betOfferType:{id:e}}}if(f){var W;const e=null!==(W=K.eventName)&&void 0!==W&&W.includes(" @ ")?[h.ju.AWAY_HOME]:[];f={...f,tags:e,participants:K.participants,id:f.eventId}}const t={outcomeId:K.id,betOffer:D,event:f,translations:(0,R.vP)(),multiPositionBetOfferLabelOneLine:!0,selections:K.selections};(null===(H=D)||void 0===H?void 0:H.boTypeId)===d.i0.MULTI_POSITION.id?K.betLabel=(0,n.getBetOfferLabel)(t):K.betofferCriterionLabel=(0,n.getBetOfferLabel)(t)}return K}},33577:(e,t,s)=>{s.d(t,{Q:()=>B});s(84870),s(53985);var i=s(23459),n=s(78003),o=s(68277),E=s(69656),a=s(89971),r=s(68530),c=s(64365),u=s(99315),d=s(97586);const _=["combination.sizeSingle","combination.sizeDouble","combination.sizeTriple","combination.sizeFour","combination.sizeFive","combination.sizeSix","combination.sizeSeven","combination.sizeEight","combination.sizeNine","combination.sizeTen","combination.sizeEleven","combination.sizeTwelve","combination.sizeThirtheen","combination.sizeFourteen","combination.sizeFifteen","combination.sizeSixteen","combination.sizeSeventeen","combination.sizeEighteen","combination.sizeNineteen","combination.sizeTwenty","combination.sizeTwentyOne","combination.sizeTwentyTwo","combination.sizeTwentyThree","combination.sizeTwentyFour","combination.sizeTwentyFive","combination.sizeTwentySix","combination.sizeTwentySeven","combination.sizeTwentyEight","combination.sizeTwentyNine","combination.sizeThirty","combination.sizeThirtyOne","combination.sizeThirtyTwo","combination.sizeThirtyThree","combination.sizeThirtyFour","combination.sizeThirtyFive","combination.sizeThirtySix","combination.sizeThirtySeven","combination.sizeThirtyEight","combination.sizeThirtyNine","combination.sizeForty","combination.sizeFortyOne","combination.sizeFortyTwo","combination.sizeFortyThree","combination.sizeFortyFour","combination.sizeFortyFive","combination.sizeFortySix","combination.sizeFortySeven","combination.sizeFortyEight","combination.sizeFortyNine","combination.sizeFifty"],l=_.map((e=>(0,E.i0)(e))),T=["combination.sizeSingles","combination.sizeDoubles","combination.sizeTriples","combination.sizeFours","combination.sizeFives","combination.sizeSixs","combination.sizeSevens","combination.sizeEights","combination.sizeNines","combination.sizeTens","combination.sizeElevens","combination.sizeTwelves"],O=T.map(();function I({couponRows:e,bets:t,outcomes:s,couponRef:i}){const n=(0,d.VS)(s,"outcomeId"),o=e.reduce(((e,t)=>e.concat((0,r.qL)(i,t))),[]),_=(0,a._V)({bets:t,couponRows:e,couponRef:i}).map((e=>{const{betRef:t,outcomes:s,betStatus:a,voidCashoutCouponRowIndex:r,potentialPayout:d,potentialPayoutBoosted:_,payout:l,requestedStake:T,stake:O,tags:I=[],bonusPayout:S,localLicenseReference:p,voidCashoutReason:A}=e,b=s.map((({couponRowIndex:e,outcomeId:t,status:s,castOutcomeIds:E,selectionType:u})=>{const d=s||n[t].status;let _,l="";return u===c.FB.CAST?(_=`${i}_${E.sort().join("_")}`,l=o.indexOf(_)):l=o.indexOf(`${i}_${t}`),{statusType:c.i8[d],label:`${l+1}`,outcomeId:t,hasVoidCashOut:e===r&&a!==c.K7.CASHED_OUT,sortOrder:l,castOutcomeId:_}})),h=(0,E.i0)(c.T6[a]);let R;return a===c.K7.OPEN&&d?R=_||d:l&&[c.K7.WON,c.K7.PLACED].includes(a)&&(R=l),{betRef:t,outcomes:b,status:h,betStatus:a,statusType:c.i8[a],size:b.length,stake:a===c.K7.REJECTED?T:O,actualStake:O,eachWay:I.includes(u.zg.EACH_WAY),payout:R,bonusPayout:S>0&&S,localLicenseReference:![c.K7.WAITING_FOR_APPROVAL_BY_AAMS,c.K7.REJECTED_BY_AAMS].includes(a)&&p,voidCashoutReason:a!==c.K7.CASHED_OUT?A:void 0,voidCashoutOutcomeId:a!==c.K7.CASHED_OUT&&!!r}}));return function(e){const t=e.map((),s=(0,d.vM)(t,"size");return Object.values(s).map((e=>{const t=[...new Set(e.map((e=>e.actualStake)))],s=1===t.length?t[0]:void 0,i=e.some((e=>e.localLicenseReference)),n=e.some(();return{stakes:s,bets:e,hasLocalLicenseReference:i,hasVoidCashOut:n}}))}(_)}const S=[c.K7.LOST,c.K7.VOID,c.K7.WON,c.K7.REJECTED,c.K7.REJECTED_BY_AAMS];function p(e){return e.some(()}function A(e,t){const s=e.map(t);return Math.round(1e3*s.reduce(((e,t)=>e*(t/1e3)),1))}function b(e,t,s){return!p(t)&&((e,t,s)=>{const i=(0,d.VS)(e,"outcomeId");return t.some((e=>(0,r.m1)(e).some((e=>{var t;const n=i[e],o=s.find(();return null==o||null===(t=o.tags)||void 0===t?void 0:t.includes(u.KP.STARTING_PRICE)}))))})(e,t,s)}const h=(e,t)=>e.some((e=>void 0!==e.multiPosition&&void 0!==e.multiPosition.nrOfPermutations))?null==t?void 0:t.reduce(((t,s)=>{var i;const n=null===(i=s.couponRowIndexes)||void 0===i?void 0:i.reduce(((t,s)=>{var i;const n=e.find((),o=null==n||null===(i=n.multiPosition)||void 0===i?void 0:i.nrOfPermutations;return o?t*o:void 0}),1);return t+(n?s.stake*n:s.stake)}),0):null==t?void 0:t.reduce(((e,t)=>e+t.stake),0),R=e=>null==e?void 0:e.reduce(((e,t)=>e+t.requestedStake),0),m=e=>null==e?void 0:e.reduce((,0),v=e=>e.some((e=>{var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(u.cM.LIVE)})),C=(e,t)=>{const s=(0,d.VS)(e,"outcomeId");return t.reduce(((e,t)=>{let i;if(t.selectionType===c.FB.BET_BUILDER){i=(0,r.m1)(t).filter((e=>{const t=s[e];return c.i8[t.status]!==c.OS.PENDING})).length}else i=c.i8[t.status]!==c.OS.PENDING?1:0;return e+i}),0)};function B(e){var t,s,E;const{bets:d,outcomes:B,couponRef:y,couponRows:L,events:N,tags:D,stakeAwaitingApproval:P,channel:f,currency:g,placedDate:V,rewardType:K,betOffers:F,bonusPayout:U}=e;let M={id:y,bonusPayout:U,couponRef:y,channel:f,currency:g,stake:h(L,d),live:v(L),requestedStake:R(d),potentialPayout:m(d),nrOfSettledBetOutcomes:C(B,L),placedDate:V};if(isNaN(Date.parse(M.placedDate))||(M.placedDateTimeStamp=new Date(M.placedDate).getTime()),M.isStartingPrice=b(B,L,F),M.hasRule4Outcomes=function(e){return e.some(()}(F),M.singleBetId=function(e){if(1===(null==e?void 0:e.length))return e[0].betRef}(d),M.isFreeBet=K===i.Z.REWARD_TYPE_FREE_BET,M.isProfitBoostBet=K===i.Z.REWARD_TYPE_PROFIT_BOOST,M.isOddsBoostBet=K===i.Z.REWARD_TYPE_ODDS_BOOST,M.isSecondChance=K===i.Z.REWARD_TYPE_SECOND_CHANCE,M.hasOutcomesWithBog=L),M.isProfitBoostBet||M.isOddsBoostBet){var z;M.isBoostRewardBet=!0;const e=(null==d?void 0:d[0])||{};M.oddsBoosted=e.betOddsBoosted,M.potentialPayout=null!==(z=e.potentialPayoutBoosted)&&void 0!==z?z:M.potentialPayout}else M.isBoostRewardBet=!1;M.eventIds=N.map((e=>e.eventId)),M.eventNames=N.map((),M.couponOutcomeIds=L.reduce(((e,t)=>e.concat((0,r.qL)(y,t))),[]),M.type=(0,n.Q)({bets:d,couponRows:L}),M.odds=function(e,t){if(!p(e)&&t!==c.$i.SYSTEM)return A(e,(e=>e.payoutOdds||e.rule4Odds||e.playedOdds||0))}(L,M.type),M.playedOdds=function(e,t){if(!p(e)&&t!==c.$i.SYSTEM)return A(e,()}(L,M.type),M.status=(0,o.Ih)(e),M.statusType=(0,o.zS)(e),M.distinctBetStatuses=(0,o._K)(e),M.payout=((e,t)=>null==e?void 0:e.reduce(((e,s)=>t===c.K7.VOID?e+s.stake:e+s.payout),0))(d,M.status);const{betCounts:G,systemCombinations:w}=function(e,t,s,i){const n=[];let o;const E=(0,a.p5)(e),r=s===c.$i.SYSTEM;return E.forEach(((e,t)=>{e>0&&n.push({label:r?O[t]:l[t],labelKey:r?T[t]:_[t],singularLabelKey:_[t],pluralLabelKey:T[t],betCount:e,size:1+t})})),i&&(o=I(e)),{betCounts:n,systemCombinations:o}}(e,0,M.type,d);return M.betCounts=G,M.systemCombinations=w,M.isCombinationWithEachWayBet=M.type===c.$i.COMBINATION&&(null==d||null===(t=d[0])||void 0===t||null===(s=t.tags)||void 0===s?void 0:s.includes(u.zg.EACH_WAY)),M.isSinglesOnlySystem=M.type===c.$i.SYSTEM&&1===M.betCounts.length&&1===M.betCounts[0].size,M.isSinglesOnlySystem&&d&&L.forEach(((e,t)=>{const s=(0,r.m1)(e),i=d.find(();B.filter(().forEach((t=>{Object.assign(t,function(e,t){let s,i,n,o;const E=e.localLicenseReference;return e.requestedStake&&!e.stake?s=e.requestedStake:e.requestedStake&&e.stake&&e.requestedStake!==e.stake?(s=e.stake,i=e.requestedStake):s=e.stake,t&&(s*=t.nrOfPermutations),n=e.payout,n||S.includes(e.betStatus)||(o=e.potentialPayoutBoosted?e.potentialPayoutBoosted:e.potentialPayout),{stake:s,rejectedStake:i,payout:n,potentialPayout:o,localLicenseReference:E}}(i,e.multiPosition))}))})),function(e,t){e.systemCombinations&&e.systemCombinations.flatMap(().reduce(((e,t)=>(t.outcomes.forEach((s=>{const i=s.sortOrder;e[i]||(e[i]=[]),e[i].push(t)})),e)),[]).forEach(((e,s)=>{e.every((e=>e.betStatus===c.K7.REJECTED))&&((t[s]||{}).status=c.K7.REJECTED)}))}(M,B),M.singleLocalLicenseReference=function(e,t){var s;return null==t||null===(s=t[0])||void 0===s?void 0:s.localLicenseReference}(M.type,d),M.hasPBABets=null==D?void 0:D.includes(u.SB.PBA_BETS),M.stakeAwaitingApproval=P,M.hasVoidCashOut=function(e){return!(null==e||!e.some((e=>!!e.voidCashoutReason&&e.betStatus!==c.K7.CASHED_OUT)))}(d),null!==(E=L[0])&&void 0!==E&&E.teaserPlusOffset&&(M.teaserPlus=L.map((e=>e.teaserPlusOffset))),M.hasAllData=!0,M.includesBetBuilder=function(e){return e.some(()}(L),M}},78003:(e,t,s)=>{s.d(t,{Q:()=>n});var i=s(64365);function n(e){const{couponRows:t,bets:s}=e;if(t)return 1===t.length&&t[0].selectionType!==i.FB.BET_BUILDER?i.$i.SINGLE:1===(null==s?void 0:s.length)&&s[0].couponRowIndexes.length===t.length?i.$i.COMBINATION:i.$i.SYSTEM}},68277:(e,t,s)=>{s.d(t,{Ih:()=>c,O1:()=>r,_K:()=>d,zS:()=>u});var i=s(64365);const n=Object.values(i.Z9);unction E(e){const t=i.i8[e];if(e&&!t)throw new Error("Unknown status: "+e);return t}function a(e){let t=[];return e.bets&&(t=[...new Set(e.bets.map((e=>e.betStatus)))]),t}function r(e){return E(e)}function c(e){return function(e){const t=(e=e.sort(o))[0],s=t!==i.K7.OPEN,n=t!==i.K7.WON,E=e.includes(i.K7.PLACED);return s&&n&&E?i.K7.PLACED:t}(a(e))}41672:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(7298),n=s(94798),o=s(19502),E=s(87181),a=s(76118);class r extends i.Model{defaults(){return{minimized:!1,pinned:!1,pinnable:!1,hidden:!0,receiptId:void 0,delayedAcceptBetCountdown:void 0,displayState:o.K_.OUTCOMES_LIST,systemDetailsId:void 0,validationCompleted:!0,numberOfValidationsInProgress:0,receivedStakeTooHighError:!1,mobileKeyboardId:void 0,touchKeyboardId:void 0,numberOfOutcomes:0,latestTrackedCouponCid:void 0,selectedTeaserId:o.zT,userSelectedTeaserId:o.zT,touchKeyboardInputMode:"",wapiDisablePlaceBetButton:!1}}constructor(){super(),n.EventBus.subscribe(n.EventKeys.BETSLIP_ACTION_MAXIMIZE,this.maximize.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_ACTION_MINIMIZE,this.minimize.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_ACTION_PINNABLE,this.setPinnable.bind(this)),n.EventBus.subscribe(n.EventKeys.SET_WAPI_DISABLE_PLACE_BET_BUTTON,this.setWapiDisablePlaceBetButton.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_ACTION_TOGGLE_MINIMIZE_MAXIMIZE,this.toggleMaximize.bind(this)),this.listenTo(this,"change:receiptId",((e,t)=>{void 0!==t&&this.setDisplayState(o.K_.RECEIPT)})),this.listenTo(this,"change:displayState",((e,t)=>{t===o.K_.OUTCOMES_LIST&&this.hideMobileKeyboard()}))}isWapiDisablePlaceBetButton(){return this.get("wapiDisablePlaceBetButton")}isMinimized(){return this.get("minimized")}isPinned(){return this.get("pinned")}isHidden(){return this.get("hidden")}getVisualState(){let e="maximized";switch(!0){case this.isMinimized():e="minimized";break;case this.isPinned():e="pinned";break;case this.isHidden():e="hidden"}return e}minimize(){this.isPinned()||this.isHidden()||this.setAttributes({hidden:!1,minimized:!0,pinned:!1,mobileKeyboardId:void 0},!1)}setWapiDisablePlaceBetButtonaximize(){this.isPinned()||this.setAttributes({hidden:!1,minimized:!1,pinned:!1},!1)}etPinnable(e){let t;t=!!e&&this.isPinned(),this.setAttributes({pinnable:e,pinned:t},!0)}pin(){this.setAttributes({hidden:!1,minimized:!1,pinned:!0},!1)}unpin({andHide:e=!1}){this.setAttributes({hidden:e,minimized:!1,pinned:!1},!1)}hide(){this.setAttributes({hidden:!0,minimized:this.isMinimized(),pinned:!1},!0)}display(){this.setAttributes({hidden:!1,pinned:!1},!0)}_trackVisualStateChangeWithNonInteraction(e=!1){n.EventBus.send(n.EventKeys.TRACK_BETSLIP_VISUAL_STATE_CHANGE,{nonInteraction:e})}setAttributes(e,t=!1){const s=this.previous("numberOfOutcomes")!==this.get("numberOfOutcomes"),i=this.hasAttributesChanged(e,["hidden","minimized","pinned"]);this.set(e),(s||i)&&this._trackVisualStateChangeWithNonInteraction(t)}asAttributeChanged(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&this.get(t)!==e[t]}show({minimized:e=!1}){const t=(0,a.S)();(0,E.getData)(E.customerSettings.selector).betslipMinimizedForMobile&&t&&(e=!0),!this.isPinned()&&this.isHidden()&&this.setAttributes({hidden:!1,minimized:e},!0)}setDisplayState(e){e===o.K_.OUTCOMES_LIST?this.set({displayState:e,mobileKeyboardId:void 0}):this.set("displayState",e)}setReceiptId(e){this.set("receiptId",e)}setSelectedTeaserId(e,{userSelected:t}){t?this.set({selectedTeaserId:e,userSelectedTeaserId:e}):this.set({selectedTeaserId:e})}getSelectedTeaserId(){return this.get("selectedTeaserId")}getUserSelectedTeaserId(){return this.get("userSelectedTeaserId")}hasSelectedTeaserasSelectedRewardetSystemDetailsId(e){this.set("systemDetailsId",e)}setReceivedStakeTooHighError(e){this.set("receivedStakeTooHighError",e)}setNumberofOutcomes(e){this.set("numberOfOutcomes",e)}startAcceptBetCountdown(e,t){this.set("delayedAcceptBetCountdown",+e),this.acceptBetTimer=setInterval((()=>{const e=this.get("delayedAcceptBetCountdown");e>0?this.set("delayedAcceptBetCountdown",e-1):(t(),this.stopAcceptBetCountdown())}),1e3)}stopAcceptBetCountdown(){clearInterval(this.acceptBetTimer),this.acceptBetTimer=null,this.set("delayedAcceptBetCountdown",void 0)}etValidationCompleted(e){this.set("validationCompleted",e)}hasValidationCompleted(){return this.get("validationCompleted")}hasReceivedStakeTooHighError(){return this.get("receivedStakeTooHighError")}isPlacingBet(){return this.get("displayState")===o.K_.PLACING_BET}hideMobileKeyboard(){this.get("mobileKeyboardId")&&this.set("mobileKeyboardId",void 0)}ideTouchKeyboard(){this.get("touchKeyboardId")&&this.set("touchKeyboardId",void 0)}sListingOutcomes(){return this.get("displayState")===o.K_.OUTCOMES_LIST}isReceipt(){return this.get("displayState")===o.K_.RECEIPT}isErrorncrementNumberOfValidations(){this.set("numberOfValidationsInProgress",this.get("numberOfValidationsInProgress")+1)}decrementNumberOfValidations(){this.set("numberOfValidationsInProgress",this.get("numberOfValidationsInProgress")-1)}hasValidationsInProgressetLatestTrackedCouponCid(e){e!==this.getLatestTrackedCouponCid()&&this.set("latestTrackedCouponCid",e)}getLatestTrackedCouponCid(){return this.get("latestTrackedCouponCid")}}const c=new r},13272:(e,t,s)=>{s.d(t,{Z:);var i=s(38513),n=s(94798),o=s(41672),E=s(8299),a=s(87181),r=s(19502),c=s(15388),u=s(68107),d=s(76118),_=s(97849),l=s(74553);class T extends i.IX{et services(){return{[`${this.GET_HISTORY_COUPON}`]:E.Z}}constructor(){super(),this.set([o.Z]),n.EventBus.subscribe(n.EventKeys.PLACE_BET,this._onBetPlace.bind(this)),n.EventBus.subscribe(n.EventKeys.SAVE_BET_SELECTION,this._onErrorClosed.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_CLOSE_RECEIPT,this._onReceiptClosed.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_CLOSE_ERROR,this._onErrorClosed.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_SYSTEM_STAKE_LABEL_CLICK,this._onSystemStakeLabelClick.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_TAB_CHANGED,this._onTabChanged.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_RECEIVED_STAKE_TOO_HIGH,this._setReceivedStakeTooHighError.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_ADD_FEEDBACK,this._onErrorsReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.PLACE_BET_GENERAL_ERRORS_RECEIVED,this._onErrorsReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.PLACE_BET_BET_ERRORS_RECEIVED,this._onErrorsReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.PLACE_BET_COUPON_ROW_ERRORS_RECEIVED,this._onErrorsReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.BET_HISTORY_DETAIL_COUPON_REF_RECEIVED,this._onReceiptReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.PBA_OPTIONS_RECEIVED,this._onPBAOptionsReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.DELAYED_ACCEPT_BET_RECEIVED,this._onDelayedAcceptBetReceived.bind(this)),n.EventBus.subscribe(n.EventKeys.VALIDATION_STARTED,this._onValidationStarted.bind(this)),n.EventBus.subscribe(n.EventKeys.VALIDATION_COMPLETED,this._onValidationCompleted.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_CLEAR,this._onBetslipCleared.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_MOBILE_KEYBOARD_HIDE,this._onMobileKeyboardHide.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_TOUCH_KEYBOARD_HIDE,this._onTouchKeyboardHide.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_MOBILE_KEYBOARD_TOGGLE,this._toggleMobileKeyboard.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_TOUCH_KEYBOARD_SHOW,this._onTouchKeyboardShow.bind(this)),n.EventBus.subscribe(n.EventKeys.FREE_BET_SELECTED,this._onMobileKeyboardHide.bind(this)),n.EventBus.subscribe(n.EventKeys.OUTCOME_SUSPENDED,this._onOutcomeStatusChange.bind(this)),n.EventBus.subscribe(n.EventKeys.OUTCOME_CLOSED,this._onOutcomeStatusChange.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_SELECTED_OUTCOME_ADDED,this._onSelectedOutcomeAdded.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_SELECTED_OUTCOME_REMOVED,this._onSelectedOutcomeRemoved.bind(this)),n.EventBus.subscribe(n.EventKeys.RETAIL_OVERLAY_TOGGLED,this._onRetailOverlayToggle.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_HIDE,this._onHideBetslip.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_SHOW,this._onShowBetslip.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_LATEST_TRACKED_COUPON_CID,this._setLatestTrackedCouponCid.bind(this)),n.EventBus.subscribe(n.EventKeys.REWARD_SELECTED,this._onValidRewardSelected.bind(this)),n.EventBus.subscribe(n.EventKeys.SELECTED_VALID_REWARD_CLEARED,this._onValidRewardCleared.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_SELECT_TEASER,this._onTeaserSelected.bind(this)),n.EventBus.subscribe(n.EventKeys.BETSLIP_RESET_SELECTED_TEASER,this._onResetSelectedTeaser.bind(this)),this.listenTo(this.getState(),"change:pinnable",this.setInitialPinnedState)}setOutcomesCollection(e){this._outcomesCollection=e,n.EventBus.subscribe(n.EventKeys.BETSLIP_ACTION_TOGGLE_PINNED,(()=>{this._onTogglePinned(!this.getState().isPinned())})),this.setInitialDisplayState()}get selectedOutcomesetInitialDisplayState(){const e=this.selectedOutcomes;this.getState().setNumberofOutcomes(e),e>0&&this.getState().display()}setInitialPinnedState(){const e=this.getState();(0,a.getData)(a.customerSettings.selector).enableBetslipInitialStatePinned&&e.get("pinnable")&&e.pin()}onValidationStarted(){this.getState().setValidationCompleted(!1),this.getState().incrementNumberOfValidations()}_onValidationCompleted(){this.getState().decrementNumberOfValidations(),this.getState().hasValidationsInProgress()||this.getState().setValidationCompleted(!0)}_onBetslipCleared(){this.getState().isReceipt()||(this._onValidationStarted(),requestAnimationFrame(())}_shouldCollapseBetslipOnAddingSecondOutcome(e,t){if(!e||t)return!1;const s=(0,d.S)();return!!(s&&(0,a.getData)(a.customerSettings.selector).collapseBetslipOnSecondOutcomeForMobile||!s&&(0,a.getData)(a.customerSettings.selector).collapseBetslipOnSecondOutcomeForDesktop)}_onSelectedOutcomeAdded({betBuilder:e=!1,isSourceLocalStorage:t=!1}={}){const s=this.getState().get("numberOfOutcomes"),i=this.selectedOutcomes,n=0===s,o=2===i;this.getState().setNumberofOutcomes(i);const E=(0,u.getTabRoute)().toUpperCase()===c.Ao.BETBUILDER;n&&this.getState().show({minimized:e&&E&&(0,d.S)()}),this._shouldCollapseBetslipOnAddingSecondOutcome(o,t)&&this.getState().minimize(),this._resetOutcomeDependentState()}_onSelectedOutcomeRemoved({trigger:e}){const t=this.selectedOutcomes;var s;(this.getState().setNumberofOutcomes(t),e===r.K2.BETSLIP_CLEAR&&this.getState().isReceipt())||(this.getState().isPinned()||null!==(s=this._outcomesCollection)&&void 0!==s&&s.length||this.getState().hide());t<2&&this._onResetSelectedTeaser({userSelected:!0}),this._resetOutcomeDependentState()}onOutcomeStatusChange(e){const t=`outcome-${e}`;this.getState().get("mobileKeyboardId")===t&&this.getState().hideMobileKeyboard()}_onDelayedAcceptBetReceived({couponRef:e,delayBeforeAcceptingBet:t,trackingData:s}){this.getState().startAcceptBetCountdown(t,(()=>{const t={params:{couponRef:e,trackingData:s}};t.params.pollingCount=r.i5,this.addSubscription(this.GET_HISTORY_COUPON,t)}))}_onErrorsReceived(){this.getState().stopAcceptBetCountdown(),this.getState().setDisplayState(r.K_.ERROR),this.getState().maximize()}_onReceiptReceived(e){this.getState().stopAcceptBetCountdown(),this.getState().setReceiptId(e),this.getState().maximize()}_onReceiptClosed(){var e;this.getState().setDisplayState(r.K_.OUTCOMES_LIST),this.getState().isPinned()||null!==(e=this._outcomesCollection)&&void 0!==e&&e.length||this.getState().hide()}_onErrorClosed(){this.getState().set({displayState:r.K_.OUTCOMES_LIST,minimized:!1}),n.EventBus.send(n.EventKeys.BETSLIP_CLEAR_PBA_OPTIONS)}_onHideBetslip(){this.getState().set({hidden:!0,minimized:!1})}_onShowBetslip(){const e=this.getState();(this.selectedOutcomes||e.get("pinned"))&&(e.setDisplayState(r.K_.OUTCOMES_LIST),e.set({hidden:!1}),this._setLatestTrackedCouponCid(""))}_onBetPlace(){this.getState().setReceiptId(void 0),this.getState().isPinned()?this.getState().setDisplayState(r.K_.PLACING_BET):this.getState().set({hidden:!1,minimized:!_.Session.get(l.SessionAPIConstants.SUPPORT_AGENT_MODE),pinned:!1,displayState:r.K_.PLACING_BET})}_onPBAOptionsReceivedonSystemStakeLabelClick(e){const t=e!==this.getState().get("systemDetailsId")?e:void 0;this.getState().setSystemDetailsId(t)}_resetOutcomeDependentState(){this.getState().setSystemDetailsId(void 0),this.getState().hideMobileKeyboard()}toggleMobileKeyboard(e){this.getState().get("mobileKeyboardId")===e?this.getState().hideMobileKeyboard():this.getState().showMobileKeyboard(e)}_onTouchKeyboardShow({id:e,elementId:t,mode:s}){e&&t&&this.getState().showTouchKeyboard(e,t,s)}_onMobileKeyboardHide(){this.getState().hideMobileKeyboard()}onTogglePinned(e){const t=this.getState().isPinned();e&&!t&&this.getState().pin(),!e&&t&&this.getState().unpin({andHide:0===this._outcomesCollection.length})}_onRetailOverlayToggle(e){!this.getState().isPinned()&&this.selectedOutcomes&&(e?this.getState().hide():this.getState().display())}onTeaserSelected(e){const t=this.getState();t.setSelectedTeaserId(e,{userSelected:!0}),t.get("mobileKeyboardId")!==r.oP.TEASER_ID&&t.hideMobileKeyboard()}_onResetSelectedTeaser({userSelected:e=!1}={}){(this.getState().getSelectedTeaserId()!==r.zT||e)&&this.getState().setSelectedTeaserId(r.zT,{userSelected:e})}_onValidRewardSelected({selectedReward:e}){this.getState().set("selectedRewardId",e.rewardId),this._onResetSelectedTeaser()}_onValidRewardCleared(){this.getState().set("selectedRewardId",void 0),this.getState().getSelectedTeaserId()===r.zT&&this._onResetSelectedTeaser({userSelected:!0})}}const O=new T},66531:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(64572),n=s(38513),o=s(94798);class E extends n._j{constructor(){super(),(0,i.Z)(this,"_clearBetErrors",(()=>{this.set([])})),(0,i.Z)(this,"_onBetErrorsReceived",(e=>{(e=Array.isArray(e)?e:[e]).length>0&&this.set(e,{remove:!1})})),(0,i.Z)(this,"_clearBetBuilderBetError",(),o.EventBus.subscribe(o.EventKeys.VALIDATION_BET_ERRORS_RECEIVED,this._onBetErrorsReceived),o.EventBus.subscribe(o.EventKeys.VALIDATION_BET_BUILDER_ERROR_RECEIVED,this._onBetErrorsReceived),o.EventBus.subscribe(o.EventKeys.VALIDATION_CLEAR_BET_ERRORS,this._clearBetErrors),o.EventBus.subscribe(o.EventKeys.VALIDATION_CLEAR_BET_BUILDER_ERROR,this._clearBetBuilderBetError),o.EventBus.subscribe(o.EventKeys.BETSLIP_CLEAR,this._clearBetErrors),o.EventBus.subscribe(o.EventKeys.CLOSE_BETSLIP_ERROR,(e=>{const t=this.get(e);if(t){const e=t.get("type");this.where({type:e}).forEach((e=>{e.set({wasClosedByUser:!0})}))}})),o.EventBus.subscribe(o.EventKeys.BETSLIP_TAB_CHANGED,(()=>{this.forEach(()}))}getModelIdsetBetErrorIndices(){return this.map(().filter(()}}const a=new E},68530:(e,t,s)=>{s.d(t,{Ct:()=>p,qL:()=>S,mi:()=>O,m1:()=>I,i0:()=>h,oj:()=>b,Cb:()=>A,fZ:()=>R});var i=s(64365),n=s(23459),o=s(94798),E=s(19502);var a=s(13272),r=s(51679),c=s(64384),u=s(42929),d=s(45040),_=s(87181);const l=()=>(0,_.getData)(_.selectedOutcomes.selectIds).some((e=>(e=>{const t=u.Z.get(e),s=c.Z.get(null==t?void 0:t.get("betofferId")),i=r.Z.get(null==s?void 0:s.get("eventId")),n=(null==i?void 0:i.get("state"))===d.he.NOT_STARTED;return!!s&&s.get("live")&&!(s.get("prematch")&&n)})(e)));var T=s(75449);function O({couponRows:e},t){if(e)return e.find((e=>{switch(e.selectionType){case i.FB.SIMPLE:return e.outcomeId===t.outcomeId;case i.FB.BET_BUILDER:case i.FB.CAST:return e.outcomeGroup.groups.some((e=>e.outcomeIds.includes(t.outcomeId)))}}))}function I(e){switch(e.selectionType){case i.FB.SIMPLE:return[e.outcomeId];case i.FB.BET_BUILDER:case i.FB.CAST:return e.outcomeGroup.groups.reduce((,[])}}function S(e,t){const s=I(t);switch(t.selectionType){case i.FB.SIMPLE:return[`${e}_${s[0]}`];case i.FB.BET_BUILDER:return s.map(();case i.FB.CAST:return s.sort(),s.reduce((,e)}}function p({couponRef:e,bets:t},s){if(e&&s&&t)return t.filter(()}function A(e){var t;const{betErrors:s,generalErrors:i,couponRowErrors:r}=e;if(null!=i&&null!==(t=i[0])&&void 0!==t&&t.type){let e=i[0].type;e.startsWith("VET_")&&(e=e.slice(4)),o.EventBus.send(o.EventKeys.PLACE_BET_CUSTOMER_ERRORS_RECEIVED,[{code:e}])}if(null!=s&&s.length&&o.EventBus.send(o.EventKeys.PLACE_BET_BET_ERRORS_RECEIVED,s),null!=i&&i.length&&o.EventBus.send(o.EventKeys.PLACE_BET_GENERAL_ERRORS_RECEIVED,i),null!=r&&r.length){const e=[],t=[];let s=[],i=[];const n=[],c=r.filter((({type:e,values:t})=>[E.At.VET_ODDS_CHANGED,E.At.VET_BET_OFFER_CLOSED,E.At.VET_BET_OFFER_SUSPENDED,E.At.VET_TERMS_CHANGED].includes(e)&&!!t[0].couponRow));c.forEach((({type:o,values:a,errors:r})=>{const{couponRow:c,value:u}=a[0];let{outcomeId:d,group:_}=c;switch(_&&(d=_.groups.map(()),o){case E.At.VET_ODDS_CHANGED:{const s={id:d,odds:+u};Array.isArray(s.id)?t.push(s):e.push(s);break}case E.At.VET_BET_OFFER_CLOSED:s=s.concat(d);break;case E.At.VET_BET_OFFER_SUSPENDED:i=i.concat(d);break;case E.At.VET_TERMS_CHANGED:{const e=function(e,t){var s;const i=null===(s=t[0])||void 0===s?void 0:s.arguments;if(i){var n,o,a;const t=null===(n=i.find((({type:e})=>e===E.PU.EACH_WAY_FRACTION)))||void 0===n?void 0:n.value,s=null===(o=i.find((({type:e})=>e===E.PU.EACH_WAY_PLACE_LIMIT)))||void 0===o?void 0:o.value,r=null===(a=i.find(())||void 0===a?void 0:a.value;return{id:e,eachWay:{fractionMilli:parseInt(t,10),placeLimit:parseInt(s,10),terms:r}}}}(d,r);e&&n.push(e);break}}})),e.length>0&&o.EventBus.send(o.EventKeys.BETSLIP_OUTCOME_ODDS_UPDATED,e),t.length>0&&o.EventBus.send(o.EventKeys.VALIDATION_BET_BUILDER_ODDS_CHANGED,t),s.length>0&&o.EventBus.send(o.EventKeys.BET_OFFER_OUTCOMES_CLOSED,s),i.length>0&&o.EventBus.send(o.EventKeys.BET_OFFER_OUTCOMES_SUSPENDED,i),n.length>0&&o.EventBus.send(o.EventKeys.EACH_WAY_TERMS_UPDATE_RECEIVED,n);const u=a.Z.getState().get("displayState")===E.K_.PLACING_BET;if(l()&&u&&c.length)return;o.EventBus.send(o.EventKeys.PLACE_BET_COUPON_ROW_ERRORS_RECEIVED,r)}(0,T.t6)({name:n.Z.NOTIFICATION_BET_FAILED_PLACING,data:{type:E.EV.VET_SERVER_ERROR,response:e}})}function b(e,t){if(e&&t){const s=t.reduce((,{});return I(e).map((e=>s[e]))}}function h(e,t){return e.find((e=>{const{id:s,outcomeId:i}=t;return(null==t?void 0:t.playercastId)?e.castOutcomeId===s:e.outcomeId===i}))}function R(e,{outcomes:t,betStatus:s},n){var o;const E=1===(null===(o=e.get("couponOutcomeIds"))||void 0===o?void 0:o.length),a=1===t.length,r=s===i.K7.CASHED_OUT;return!E&&a&&r&&t[0].outcomeId===n.outcomeId}},76118:(e,t,s)=>{s.d(t,{O:()=>E,S:()=>a});var i=s(74553),n=s(97849),o=s(23459);function E(){if(n.Session.get(i.SessionAPIConstants.SUPPORT_AGENT_MODE)){return"PLACE_BET"===n.Session.get(i.SessionAPIConstants.ON_BEHALF_OF)}return!0}function a(){return n.Session.get(i.SessionAPIConstants.CHANNEL_ID)===o.Z.CHANNEL_MOBILE}},89971:(e,t,s)=>{s.d(t,{Em:()=>_,RK:()=>I,W5:()=>p,_V:()=>T,jo:()=>S,p5:()=>O});var i=s(79149),n=s(64365),o=s(68530),E=s(66531),a=s(41672),r=s(82862),c=s(87181),u=s(19502),d=s(69656);function _(e){const t=[[]];for(const s of e){const e=[...t];for(const i of e)t.push(i.concat(s))}return t.slice(1)}function l(e,t){const s=e.couponRowIndexesString,i=t.couponRowIndexesString,n=s.length,o=i.length;return n!==o?n-o:s<i?-1:1}function T({bets:e,couponRows:t}){return e.map((e=>({...e,couponRowIndexesString:e.couponRowIndexes.map(().sort().toString()}))).sort(l).map((e=>({...e,outcomes:e.couponRowIndexes.reduce(((e,s)=>{const i=t[s],{selectionType:E}=i;let a,r,c=(0,o.m1)(i);return E===n.FB.CAST&&(r=c,c=c.slice(0,1),a=i.status),e.concat(c.map((e=>({outcomeId:e,couponRowIndex:s,selectionType:E,status:a,castOutcomeIds:r}))))}),[])})))}function O({bets:e,couponRows:t}){const s=Array(i.Sh.DEFAULT).fill(0);for(const i of e){const{couponRowIndexes:e}=i;let E=0;for(const s of e){const e=t[s];e.selectionType===n.FB.BET_BUILDER?E+=(0,o.m1)(e).length:E++}s[E-1]++}return s}function I(e,t){const s=Array(i.Sh.DEFAULT).fill(0);return _(e).filter(().forEach((e=>{s[e.length-1]++})),s}function S(e){const t=E.Z.getBetErrorIndices();return{selectedOutcomes:e.map((),betErrorsIndexes:t,translations:{startingPrice:(0,d.i0)("common.startingPrice"),totalOddsNotAvailable:(0,d.i0)("betslip.details.totalOddsNotAvailable")}}}function p(e,t){const s=a.Z.get("minimized"),n=S(e),o=(0,r.getSystemCombinations)(n),E=Object.entries(o.combinations),d=E.filter((e=>{const s=e[1].type,n=e[0],o=s===t,E=(0,c.getData)(c.customerSettings.selector).enableLuckyBets||![i.tl.LUCKY_15,i.tl.LUCKY_31,i.tl.LUCKY_63].includes(n);return o&&E}));return d.map(((e,t)=>{const i=e[1].type===u.oP.SYSTEM,n=E.some((e=>e[1].type===u.oP.PACKAGE));return{id:e[0],type:e[1].type,isFocused:(!n||!i)&&(!s&&d.length>0&&d.length-1===t)}}))}}}]);
//# sourceMappingURL=kambi-chunk-3272.13911bd262cfccb0ec29.js.map