(()=>{"use strict";var e,t,n={148:(e,t,n)=>{n.d(t,{i:()=>i});let i=function(e){return e.Error="error",e.Warning="warning",e.Info="info",e}({})},886:(e,t,n)=>{n.d(t,{X:()=>i});const i=new class{constructor(e){let t;try{t=window[e]}catch(t){console.warn(`[rcm] Unavailable browserStorage type - ${e}`)}this.storage=t}getItem(e){let t=null;return this.storage&&(t=this.storage.getItem(e)),t}setItem(e,t){this.storage&&this.storage.setItem(e,t)}removeItem(e){this.storage&&this.storage.removeItem(e)}}("localStorage")},512:(e,t,n)=>{n.d(t,{k:()=>d});var i=n(572),r=n(148),o=n(886);const s=Boolean(o.X.getItem("rcmLoggerEnabled")),a=Boolean(o.X.getItem("rcmSentryEnabled"));const d=new class{isSentrySendEnabled(){return 1===((e,t)=>{const n=e-.5+Math.random()*(t-e+1);return Math.round(n)})(1,100)||a}constructor(){(0,i.Z)(this,"isLoggerEnabled",s),(0,i.Z)(this,"tags",[]),this.printFeatureStatus("logger",this.isLoggerEnabled),this.printFeatureStatus("sentry",a)}async captureInSentry(e){const{captureEvent:t}=await Promise.all([n.e(756),n.e(897)]).then(n.bind(n,695));t(e)}printFeatureStatus(e,t){const n=`rcm ${e} ${t?"enabled":"disabled"}`;console.log(n)}setTags(e){this.tags=e}log(e,t){(t||void 0===t&&this.isLoggerEnabled)&&console.log(...e)}error(e){let{error:t,message:n,tags:i=[],fingerprint:o,forcedHeadlessSentry:s=!1,isConsole:a,isSentry:d}=e;if(a||void 0===a&&this.isLoggerEnabled){const e=n?` ${n};`:"";console.error(`[rcm error]${e}`,t)}(d||void 0===d&&this.isSentrySendEnabled())&&(o||(n?o=[n]:"string"==typeof t&&(o=[t])),this.captureInSentry({event:t,logLevel:r.i.Error,tags:[...this.tags,...i],fingerprint:o,forcedHeadlessSentry:s}))}info(e){let{message:t,tags:n=[],fingerprint:i,forcedHeadlessSentry:o=!1,isConsole:s,isSentry:a}=e;(s||void 0===s&&this.isLoggerEnabled)&&console.info(`[rcm info] ${t}`),(a||void 0===a&&this.isSentrySendEnabled())&&(i||(i=[t]),this.captureInSentry({event:t,logLevel:r.i.Info,tags:[...this.tags,...n],fingerprint:i,forcedHeadlessSentry:o}))}warn(e){let{message:t,tags:n=[],fingerprint:i,forcedHeadlessSentry:o=!1,isConsole:s,isSentry:a}=e;(s||void 0===s&&this.isLoggerEnabled)&&console.warn(`[rcm warn] ${t}`),(a||void 0===a&&this.isSentrySendEnabled())&&(i||(i=[t]),this.captureInSentry({event:t,logLevel:r.i.Warning,tags:[...this.tags,...n],fingerprint:i,forcedHeadlessSentry:o}))}}},154:(e,t,n)=>{n.d(t,{WE:()=>i,aw:()=>r,dv:()=>o});const i=window.navigator?.userAgent.toString()||"",r=()=>{if("function"!=typeof Object.fromEntries)return!1;for(const e of["fetch","IntersectionObserver"])if("function"!=typeof window[e])return!1;return!0},o=()=>{const e=o;if(void 0===e.r)if(e.r=null,window.navigator?.webdriver)e.r="webdriver";else{const t=["headlesschrome","blp_bbot","bytespider","googlebot","gptbot","petalbot","yandexbot"],n=i.toLowerCase();for(const i of t)if(n.includes(i)){e.r=`userAgent (${i})`;break}}return e.r}},572:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function o(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>o})}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={id:e,loaded:!1,exports:{}};return n[e](o,o.exports,r),o.loaded=!0,o.exports}r.m=n,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"recommender."+e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="recommender.js:",r.l=(n,i,o,s)=>{if(e[n])e[n].push(i);else{var a,d;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+o){a=l;break}}a||(d=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[i];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(m);var r=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),t)return t(i)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),d&&document.head.appendChild(a)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="//rcmjs.rambler.ru/static/",(()=>{var e={211:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=o);var s=r.p+r.u(t),a=new Error;r.l(s,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,o,s=n[0],a=n[1],d=n[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(d)d(r)}for(t&&t(n);c<s.length;c++)o=s[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.rcmjsWebpackChunkGlobal=self.rcmjsWebpackChunkGlobal||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{let e=function(e){return e.Pending="pending",e.Ready="ready",e}({});const t={},n=t.toString,i=t.hasOwnProperty,o=i.toString,s=o.call(Object);function a(e){if(!e||"[object Object]"!==n.call(e))return!1;const t=Object.getPrototypeOf(e);if(!t)return!0;const r=i.call(t,"constructor")&&t.constructor;return"function"==typeof r&&o.call(r)===s}function d(e,t){let n,i,r=!1;return function o(){for(var s=arguments.length,a=new Array(s),d=0;d<s;d++)a[d]=arguments[d];if(r)return n=a,void(i=this);e.apply(this,a),r=!0,setTimeout((()=>{r=!1,n&&(o.apply(i,n),n=i=null)}),t||100)}}function c(e){const t=Object.entries(e).filter((e=>{let[,t]=e;return null!=t}));return Object.fromEntries(t)}const u={};function l(e,t,n){const i=String(t).split(".");for(let t=0;t<i.length;t++){if(3===arguments.length)t+1===i.length?e[i[t]]=n:a(i[t])||(e[i[t]]={});else if(void 0===e[i[t]])return;e=e[i[t]]}return e}const h={get:e=>e?l(u,e):u,set(e,t){l(u,e,t)}};var m=r(512),p=r(572),f="adtech_uid",v=function(){function e(e){this.regValidKey=new RegExp("([a-zA-Z0-9_-]{0,})","i"),this.hash=e||location.hostname}return e.prototype.isSupported=function(){return"object"==typeof document&&"string"==typeof document.cookie},e.prototype.setItem=function(e,t,n,i,r,o,s,a){void 0===e&&(e=!0),void 0===i&&(i=30),void 0===r&&(r="/"),void 0===o&&(o=location.hostname.split(".").slice(-2).join(".")),void 0===s&&(s="https:"===location.protocol),void 0===a&&(a=!0);try{if("boolean"==typeof e&&"string"==typeof t&&this.regValidKey.test(t)&&"string"==typeof n&&(""===n||this.regValidKey.test(n))&&"number"==typeof i&&"string"==typeof r&&"string"==typeof o&&-1!==location.hostname.indexOf(o)&&"boolean"==typeof s&&s===("https:"===location.protocol)){var d=document.createElement("a");if(d.href="http://"+o+r,d.hostname===o||d.pathname===r){if(!e||this.isSupported()){var c="";c+=a?this.hash+"_"+t:t;var u=new Date;u.setTime(u.getTime()+24*i*60*60*1e3);var l=u.toUTCString();return n=encodeURIComponent(n),document.cookie=c+"="+n+(l?"; expires="+l:"")+(r?"; path="+r:"")+(o?"; domain="+o:"")+(s?"; secure":""),this.getItem(e,t,a)===decodeURIComponent(n)}return!1}return!1}return!1}catch(e){return!1}},e.prototype.getItem=function(e,t,n){void 0===e&&(e=!0),void 0===n&&(n=!0);try{if("boolean"!=typeof e||"string"!=typeof t||!this.regValidKey.test(t))return!1;if(e&&!this.isSupported())return!1;n&&(t=this.hash+"_"+t);for(var i=document.cookie.split(";"),r=[],o=0;o<i.length;o++){var s=i[o],a=this._getCookieParts(s),d=a.left,c=a.right;d===t&&r.push(decodeURIComponent(c))}if(0===r.length)return!1;if(1===r.length)return r[0];try{var u=1/0,l=void 0;for(o=0;o<r.length;o++){var h=r[o].split(":")[1].split(".").length;h<u&&(u=h,l=r[o])}return l||!1}catch(e){return!1}}catch(e){return!1}},e.prototype.removeItem=function(e,t){void 0===e&&(e=!0);try{return!("boolean"!=typeof e||"string"!=typeof t||!this.regValidKey.test(t))&&(!(e&&!this.isSupported())&&(this.setItem(e,t,"",-86400),!1===this.getItem(e,t)))}catch(e){return!1}},e.prototype.getKeys=function(e){void 0===e&&(e=!0);try{if("boolean"==typeof e){if(!e||this.isSupported()){for(var t=[],n=document.cookie.split(";"),i=0;i<n.length;i++){var r=n[i],o=this._getCookieParts(r).left;0===o.indexOf(this.hash)&&t.push(o.substr(this.hash.length+1))}return t}return[]}return[]}catch(e){return[]}},e.prototype.clear=function(e){void 0===e&&(e=!0);try{if("boolean"==typeof e){if(!e||this.isSupported()){var t=this.getKeys(e);if(t)for(var n=0;n<t.length;n++){var i=t[n];this.removeItem(e,i)}return 0===this.getKeys(e).length}return!0}return!1}catch(e){return!1}},e.prototype._getCookieParts=function(e){var t=e.indexOf("=");return t<0?{left:"",right:""}:{left:e.slice(0,t).trim(),right:e.slice(t+1,e.length).trim()}},e}();const g=v;var b,I=function(){function e(){this.cookieStore=new g}return e.prototype.getItem=function(e){var t=this.cookieStore.getItem(!0,e,!1);return"boolean"!=typeof t&&t},e.prototype.setItem=function(e,t,n){return this.cookieStore.setItem(!0,e,t,365,"/",n,"https:"===location.protocol,!1)},e}(),y=new Uint8Array(16);function k(){if(!b&&!(b="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(y)}const w=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const S=function(e){return"string"==typeof e&&w.test(e)};for(var E=[],C=0;C<256;++C)E.push((C+256).toString(16).substr(1));const x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(E[e[t+0]]+E[e[t+1]]+E[e[t+2]]+E[e[t+3]]+"-"+E[e[t+4]]+E[e[t+5]]+"-"+E[e[t+6]]+E[e[t+7]]+"-"+E[e[t+8]]+E[e[t+9]]+"-"+E[e[t+10]]+E[e[t+11]]+E[e[t+12]]+E[e[t+13]]+E[e[t+14]]+E[e[t+15]]).toLowerCase();if(!S(n))throw TypeError("Stringified UUID is invalid");return n};const T=function(e,t,n){var i=(e=e||{}).random||(e.rng||k)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return x(i)};const O=function(e){if(!S(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};var U=function(){function e(){this.uuid="",this.scope=""}return e.prototype.parse=function(e){try{var t=e.split(":");if(2!==t.length)return!1;var n=t[0],i=t[1];return!!function(e){return S(e)&&4===O(e)}(n)&&(this.uuid=n,this.scope=i,!0)}catch(e){return!1}},e.prototype.getID=function(){return{scope:this.scope,uuid:this.uuid}},e.prototype.generate=function(e){this.uuid=T(),this.scope=e},e.prototype.getJoined=function(){return[this.uuid,this.scope].join(":")},e}(),R=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},P=function(){function e(){this.storeFacade=new I}return e.prototype.getID=function(){var e=this.storeFacade.getItem(f);return e?this.getCurrentUID(e):this.generateAndSave()},e.prototype.generateAndSave=function(){var e=this.getScopeDomains(),t=this.tryToSetAllDomains(e);return t?t.getID():{scope:null,uuid:null}},e.prototype.getCurrentUID=function(e){var t=new U;if(t.parse(e)){var n=t.getID();return n.scope&&n.uuid&&this.storeFacade.setItem(f,e,n.scope),n}return this.generateAndSave()},e.prototype.tryToSetAllDomains=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=new U;i.generate(n);var r=i.getJoined();if(this.storeFacade.setItem(f,r,n))return i}},e.prototype.getScopeDomains=function(e){void 0===e&&(e=location.hostname);var t=e.split(".");if(t.length<=1)return t;for(var n=[],i=0;i<t.length-1;i++){var r=t[i];n.unshift(R([r],t.slice(i+1),!0).join("."))}return n},e}();let _=function(e){return e.Beacon="beacon",e.Xhr="xhr",e}({});const A=6e4,F=[5e3,1e4,3e4,6e4,2*A,3*A,5*A,8*A,78e4,21*A,34*A];function V(e){let t,n=1,i=null,r=!1,o=0;const s=[{eventName:"scroll",value:0},{eventName:"mousemove",value:0},{eventName:"click",value:0},{eventName:"keydown",value:0},{eventName:"resize",value:0}].map(((e,t)=>({...e,eventHandler:d((()=>s[t].value++),250)}))),a=()=>s.map((e=>e.value)).join("_"),c=e=>s.map((t=>Math.min(250*t.value,e))).join("_"),u=()=>s.forEach((e=>{e.value=0}));function l(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.Xhr;const r=Date.now(),s=r-t,d={activityCounters:a(),activityDurations:c(s),duration:s,num:n++,timestamp:r};e.onPing(d,i),u(),o+=s,t=r}function h(){const e=function(){let e=null;for(const t of F)if(o<t){e=t-o;break}return e}();e?i=window.setTimeout((()=>{l(),h()}),e):v(!1)}function m(){f(!0)}function p(){const e=document.visibilityState;"visible"===e?function(){if(r)return;r=!0,t=Date.now(),h()}():"hidden"===e&&f(!0)}function f(e){r&&(r=!1,i&&window.clearTimeout(i),i=null,e&&l(_.Beacon))}function v(e){f(e),document.removeEventListener("visibilitychange",p),window.removeEventListener("pagehide",m),s.forEach((e=>window.removeEventListener(e.eventName,e.eventHandler)))}return document.addEventListener("visibilitychange",p),window.addEventListener("pagehide",m),s.forEach((e=>window.addEventListener(e.eventName,e.eventHandler))),p(),v}class L{constructor(){(0,p.Z)(this,"stopActivityTracker",null),this.reset()}start(e){this.stop();const t={onPing:e};this.stopActivityTracker=V(t)}stop(){this.stopActivityTracker&&this.stopActivityTracker(!0),this.reset()}reset(){this.stopActivityTracker=null}}let j=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");class q{constructor(){(0,p.Z)(this,"resendList",null),(0,p.Z)(this,"resendTailElem",null)}push(e){const t={data:e,next:null};this.resendList?this.resendTailElem.next=t:this.resendList=t,this.resendTailElem=t}shift(){if(this.resendList){const e=this.resendList.data;return this.resendList=this.resendList.next,e}return null}get isEmpty(){return!this.resendList}}const $=window.navigator.userAgent.includes("Firefox");class M{constructor(e){(0,p.Z)(this,"baseUrl","https://kraken.rambler.ru/cnt/v2/"),(0,p.Z)(this,"queue",new q),(0,p.Z)(this,"isOnLine",window.navigator.onLine),(0,p.Z)(this,"eventNumber",1),this.baseParams={event_type:"rec",counter_type:e.isAmp?"amp":"web",project_id:e.projectId,version:"1.9.7421+gdc79fc130",session_id:j(),ruid:e.ruid,adtech_uid:e.adtechUid,adtech_uid_scope:e.adtechUidScope},this.baseMeta={xuid:e.xuid,xuidRcmId:e.rcmId,itemRcmId:e.rcmId},this.baseFetchOptions={mode:"cors",credentials:"include",referrerPolicy:"no-referrer",cache:"no-store",redirect:"follow"},window.addEventListener("online",this.createConnectionListener()),window.addEventListener("offline",(()=>{this.isOnLine=!1}))}createConnectionListener(){let e;return async()=>{if(this.isOnLine=!0,!this.queue.isEmpty&&!e){e=!0;let t=0;do{const e=this.queue.shift();e&&this.sendFetch(e,!1),t++,t%10==0&&await new Promise((e=>{setTimeout(e,2e3)}))}while(!this.queue.isEmpty&&this.isOnLine);e=!1}}}enrichEventData(e){const{runtimeContext:t,event:n,userId:i,...r}=e,o={...this.baseMeta,referrer:t.referrer,referrerShowId:t.referrerShowId,...r},s={event_name:n,...this.baseParams,auth_uid:i,request_id:t.pvId,event_id:j(),session_event_number:String(this.eventNumber++),random:String(Math.floor(1e11*Math.random())),url:t.currentUrl,meta:JSON.stringify(c(o))};return m.k.log([`rcm event: ${n}`,"\nmeta:",r,"\nparams:",s]),new URLSearchParams(c(s))}useBeacon(e){const t=window.navigator,n=e.toString();if(!t.sendBeacon||!t.sendBeacon(this.baseUrl,n)){if($){const e=new XMLHttpRequest;e.open("POST",this.baseUrl,!1),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.withCredentials=!0;try{e.send(n)}catch(e){m.k.error({error:e,fingerprint:["Failed to send synchronous xhr from useBeacon to Kraken"]})}}else this.useFetch(e,!0);m.k.info({message:"sendBeacon "+(t.sendBeacon?"failed to send":"does not exist"),fingerprint:["sendBeacon","error"]})}}useFetch(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.toString();let i,r;n.length>1500?(i={...this.baseFetchOptions,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:n,keepalive:t},r=this.baseUrl):(i={...this.baseFetchOptions,method:"GET",keepalive:t},r=`${this.baseUrl}?${n}`),this.sendFetch({url:r,options:i,count:0})}sendFetch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{url:n,options:i}=e;fetch(n,i).then((e=>{e.ok||m.k.error({error:`Kraken api error with status code=${e.status} and text=${e.statusText}`,fingerprint:["Kraken api failed"]})})).catch((n=>{t&&m.k.error({error:n,message:"Kraken: client failed to fetch",fingerprint:["Kraken failed to fetch"]}),this.enqueueFetch(e)}))}enqueueFetch(e){e.count++>=15||(this.queue.push(e),this.isOnLine&&this.runResendTimer())}runResendTimer(){this.resendTimer||(this.resendTimer=window.setTimeout((()=>{if(this.resendTimer=null,this.isOnLine){for(let e=0;e<10;e++){const e=this.queue.shift();if(!e)break;this.sendFetch(e,!1)}this.queue.isEmpty||this.runResendTimer()}}),2e3))}send(e,t){const n=this.enrichEventData(e);t?.transport===_.Beacon?this.useBeacon(n):this.useFetch(n)}}var B=r(886);const D="rcmrclid_list",N="rcmrclid";function H(){const e=B.X.getItem(D);if(e){let t;try{t=JSON.parse(e)}catch(e){}const[n,i]=function(e){const t={};let n=!1;if("object"==typeof e&&null!==e)for(const[i,r]of Object.entries(e))Array.isArray(r)&&r[0]&&r[1]&&Date.now()<r[1]?t[i]=r:n=!0;else n=!0;return[n,t]}(t);return n&&B.X.setItem(D,JSON.stringify(i)),i}return{}}function W(e){h.set(N,e)}function K(){const e=new Uint32Array(10);crypto.getRandomValues(e);let t=0;for(const n of Array.from(e))t^=n;return`${Date.now()/1e3}-${Math.abs(t)}`}var Z=r(154);class X{constructor(e,t){(0,p.Z)(this,"microdataObserver",null),(0,p.Z)(this,"initVideo",null),m.k.log(["rcm event: 'setup', meta:",e]),this.rcmId=e.rcmId,this.xuid=e.xuid,this.ruid=e.ruid,this.userId=e.userId,this.isAmp=e.isAmp??!1,this.adtechUid=e.adtechUid,this.adtechUidScope=e.adtechUidScope,this.options=t??{},this.isFirstPVId=!0,this.runtimeContext=this.createRuntimeContext();const n=e.isActivityTrackerEnabled??!0;if(this.activityTrackerManager=n?new L:null,m.k.log(["rcm activity tracker "+(n?"enabled":"disabled")]),void 0===this.adtechUid||void 0===this.adtechUidScope){const e=(new P).getID();this.adtechUid=e.uuid,this.adtechUidScope=e.scope}this.transport=new M({projectId:"7696632",...e.transportConfig,adtechUid:this.adtechUid,adtechUidScope:this.adtechUidScope,xuid:this.xuid,ruid:this.ruid,rcmId:this.rcmId,isAmp:this.isAmp}),this.headless=(0,Z.dv)()}getOnSetupParams(){return{adtechUid:{uid:this.adtechUid,scope:this.adtechUidScope},runtimeContext:{...this.runtimeContext}}}setMeta(e){m.k.log(["rcm event: 'setMeta', meta:",e]),this.userId=e.userId}sendAddToBookmarks(e){this.sendEvent({event:"rvaddbm",itemUrl:e.itemUrl,itemId:e.itemId})}sendAddToWatchlist(e){this.sendEvent({event:"rvaddwl",itemUrl:e.itemUrl,itemId:e.itemId})}sendBlockInit(e){this.sendEvent({event:"blockinit",blockId:e.blockId,itemId:e.contextItemId??void 0})}sendClick(e){this.sendEvent({event:"click",blockId:e.blockId,contextItemId:e.contextItemId,itemRcmId:e.item.rcm_id,position:e.position,requestId:e.requestId,itemUrl:e.item.item_url,showId:e.item.show_id,itemId:e.item.item_id},{transport:_.Beacon})}sendDislike(e){this.sendEvent({event:"dislike",editorChoice:e.reason,itemRcmId:e.rcmId||this.rcmId,itemUrl:e.itemUrl,showId:e.showId,itemId:e.itemId})}sendLike(e){this.sendEvent({event:"like",editorChoice:e.reason,itemRcmId:e.rcmId||this.rcmId,itemUrl:e.itemUrl,showId:e.showId,itemId:e.itemId})}sendPageRead(e){this.sendEvent({event:"pageread",itemId:e.itemId})}sendPageView(e){const{itemId:t}=e;this.activityTrackerRunCommand("stop"),this.updateRuntimeContext(t),this.sendEvent({event:"pageview",itemId:t}),this.activityTrackerRunCommand("start",t),this.microdataObserverRunCommand("start",t)}sendAutoPageView(e){const{itemId:t}=e;this.activityTrackerRunCommand("stop"),this.updateRuntimeContext(t),this.sendEvent({event:"autopageview",itemId:t}),this.activityTrackerRunCommand("start",t),this.microdataObserverRunCommand("start",t)}sendHubPageView(e){const{hubId:t}=e;this.activityTrackerRunCommand("stop"),this.updateRuntimeContext(),this.sendEvent({event:"hubpageview",itemId:t}),this.activityTrackerRunCommand("start",t),this.microdataObserverRunCommand("stop")}sendRemoveFromBookmarks(e){this.sendEvent({event:"rvrmbm",itemUrl:e.itemUrl,itemId:e.itemId})}sendRemoveFromWatchlist(e){this.sendEvent({event:"rvrmwl",itemUrl:e.itemUrl,itemId:e.itemId})}sendShow(e){this.sendEvent({event:"show",blockId:e.blockId,contextItemId:e.contextItemId,itemRcmId:e.item.rcm_id,position:e.position,requestId:e.requestId,itemUrl:e.item.item_url,showId:e.item.show_id,itemId:e.item.item_id})}sendShowAd(e){this.sendEvent({event:"showAd",blockId:e.blockId,contextItemId:e.contextItemId,position:e.position,requestId:e.requestId})}sendFulltextShow(e){this.activityTrackerRunCommand("stop"),this.updateRuntimeContext(e.item.item_id),this.sendEvent({event:"fulltext_show",blockId:e.blockId,contextItemId:e.contextItemId,itemRcmId:e.item.rcm_id,position:e.position,requestId:e.requestId,itemUrl:e.item.item_url,showId:"show_id"in e.item?e.item.show_id:void 0,itemId:e.item.item_id}),this.activityTrackerRunCommand("start",e.item.item_id),this.microdataObserverRunCommand("start",e.item.item_id)}sendFulltextClick(e){this.sendEvent({event:"fulltext_click",blockId:e.blockId,contextItemId:e.contextItemId,itemRcmId:e.item.rcm_id,position:e.position,requestId:e.requestId,itemUrl:e.item.item_url,showId:"show_id"in e.item?e.item.show_id:void 0,itemId:e.item.item_id},{transport:_.Beacon})}sendSubscribe(e){this.sendEvent({event:"subscribe",position:e.authorId,itemId:e.contextItemId??void 0})}sendUnsubscribe(e){this.sendEvent({event:"unsubscribe",position:e.authorId,itemId:e.contextItemId??void 0})}async setVideoInit(e){if(!this.initVideo)try{const e=await r.e(117).then(r.bind(r,117));this.initVideo=e.initVideo}catch(e){return void m.k.error({error:e,message:"VideoInit set up incorrectly"})}this.initVideo(e,{end:e=>{this.sendVideoEnd({...e})},pause:e=>{this.sendVideoPause({...e})},progress:e=>{this.sendVideoProgress({...e})},screenOff:e=>{this.sendVideoFullScreenOff({...e})},screenOn:e=>{this.sendVideoFullScreenOn({...e})},start:e=>{this.sendVideoStart({...e})}})}sendVideoFullScreenOff(e){this.sendEvent({event:"rvfoff",editorChoice:e.resourceId,itemId:e.itemId})}sendVideoFullScreenOn(e){this.sendEvent({event:"rvfon",editorChoice:e.resourceId,itemId:e.itemId})}sendVideoProgress(e){this.sendEvent({event:"rvp",blockId:String(e.duration),duration:e.pingDuration,editorChoice:e.resourceId,showId:String(e.progress),itemId:e.itemId})}sendVideoPause(e){this.sendEvent({event:"rvpause",editorChoice:e.resourceId,itemId:e.itemId})}sendVideoStart(e){this.sendEvent({event:"rvs",editorChoice:e.resourceId,itemId:e.itemId})}sendVideoEnd(e){this.sendEvent({event:"rve",editorChoice:e.resourceId,itemId:e.itemId})}sendActivityPing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.Xhr;this.sendEvent({event:"activityPing",activityCounters:e.activityCounters,activityDurations:e.activityDurations,duration:e.duration,editorChoice:"2",position:e.num,timestamp:e.timestamp,itemId:e.itemId},{transport:t})}sendScrollEnd(e){this.sendEvent({event:"scrollEnd",duration:e.duration,portion:e.portion,itemId:e.itemId})}sendReadEnd(e){this.sendEvent({event:"readEnd",duration:e.duration,portion:e.portion,itemId:e.itemId})}sendOrderCheckout(e){this.sendEvent({event:"orderCheckout",itemId:e.itemId},{transport:_.Beacon})}sendOrderPaid(e){this.sendEvent({event:"orderPaid",itemId:e.itemId},{transport:_.Beacon})}sendBookingCheckout(e){this.sendEvent({event:"bookingCheckout",itemId:e.itemId},{transport:_.Beacon})}sendBookingDone(e){this.sendEvent({event:"bookingDone",itemId:e.itemId},{transport:_.Beacon})}sendSearch(e){this.sendEvent({event:"search",text:e.text.trim().substring(0,100)})}sendExternalClick(e){this.sendEvent({event:"externalClick",blockId:e.blockId,contextItemId:e.contextItemId,itemRcmId:e.item.rcm_id,position:e.position,itemUrl:e.item.item_url,itemId:e.item.item_id},{transport:_.Beacon})}sendExternalShow(e){this.sendEvent({event:"externalShow",blockId:e.blockId,contextItemId:e.contextItemId,itemRcmId:e.item.rcm_id,position:e.position,itemUrl:e.item.item_url,itemId:e.item.item_id})}createRuntimeContext(){const e=function(){let e;const t=window.location.hash;return t&&t.startsWith(`#${N}=`)&&(e=t.substring(10)||void 0),W(e),e}();return{currentUrl:this.isAmp?window.context?.canonicalUrl:window.location.href,referrer:this.isAmp?window.context?.referrer:this.runtimeContext?.currentUrl?this.runtimeContext.currentUrl:document.referrer,referrerShowId:e,pvId:K()}}updateRuntimeContext(e){this.isFirstPVId?this.isFirstPVId=!1:this.runtimeContext=this.createRuntimeContext();const t=this.options.storeRcmClickId;if(e&&t?.enable){const n=this.runtimeContext.referrerShowId;n?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14400;const i=H();i[e]=[t,Date.now()+1e3*n],B.X.setItem(D,JSON.stringify(i))}(e,n,t.expires):this.runtimeContext.referrerShowId=function(e){const t=H();let n;return t[e]&&(n=t[e][0]),W(n),n}(e)}}async microdataObserverRunCommand(e,t){if(!this.microdataObserver){if(!this.options.microdata?.enable)return;try{const e=await r.e(729).then(r.bind(r,729));this.microdataObserver=new e.MicrodataObserver}catch(e){return void m.k.error({error:e,message:"MicrodataObserver set up incorrectly"})}}"start"===e&&t?this.microdataObserver.observe(t,(e=>{this.sendScrollEnd({...e,itemId:t})}),(e=>{this.sendReadEnd({...e,itemId:t})})):"stop"===e&&this.microdataObserver.stopObserving()}activityTrackerRunCommand(e,t){this.activityTrackerManager&&("start"===e&&t?this.activityTrackerManager.start(((e,n)=>{this.sendActivityPing({...e,itemId:t},n)})):"stop"===e&&this.activityTrackerManager.stop())}sendEvent(e,t){this.headless?m.k.info({message:"The headless browser is detected",tags:[["event",e.event]],fingerprint:["Headless browser"],forcedHeadlessSentry:!0}):this.transport.send({...e,userId:this.userId,runtimeContext:this.runtimeContext},t)}}const J=(e,t)=>"number"===t?String(e):null,Q=!0,G={s:{type:"string",toType:J},b:{type:"boolean",toType:e=>!!e},o:{type:"object"},n:{type:"number",toType:(e,t)=>{if("string"===t){const t=e.trim();if(t.length){const e=Number(t);if(!Number.isNaN(e))return e}}return null}},f:{type:"function"},sn:{type:"string",nullable:!0,toType:J}},z={s:{...G.s,required:Q},b:{...G.b,required:Q},o:{...G.o,required:Q},n:{...G.n,required:Q},f:{...G.f,required:Q},sn:{...G.sn,required:Q}},Y=[["item_id",z.s],["item_url",G.s],["rcm_id",z.s],["show_id",G.sn]],ee=[["item_id",z.s],["item_url",G.s],["rcm_id",z.s]],te=[["itemId",z.s]],ne=[...te,["itemUrl",z.s]],ie=[...ne,["rcmId",G.s],["showId",G.s],["reason",G.s]],re=[["blockId",z.s],["requestId",G.sn],["contextItemId",G.sn],["position",z.n],["item",{...z.o,model:Y}]],oe=[["authorId",z.s],["contextItemId",G.sn]],se=[...te,["resourceId",z.n]],ae=[...te,["duration",z.n],["portion",z.n]],de=[["blockId",G.s],["requestId",G.sn],["contextItemId",G.sn],["position",z.n],["item",{...z.o,model:ee}]],ce={setup:[["rcmId",z.s],["userId",G.sn],["isActivityTrackerEnabled",G.b],["isAmp",G.b],["xuid",G.sn],["ruid",{...G.sn,specialCheck:e=>"string"!=typeof e||32!==e.length||/[^0-9A-F]/i.test(e)?`${e} is not a 32-digit hex number`:null}],["adtechUid",G.sn],["adtechUidScope",G.sn]],onLoad:z.f,onSetup:z.f,setMeta:[["userId",G.sn]],addToBookmarks:ne,addToWatchlist:ne,blockinit:[["contextItemId",G.sn],["blockId",z.s]],click:re,fulltextClick:e=>e.item&&"object"==typeof e.item&&"show_id"in e.item?re:de,show:re,fulltextShow:e=>e.item&&"object"==typeof e.item&&"show_id"in e.item?re:de,like:ie,dislike:ie,pageread:te,pageview:te,autopageview:te,hubpageview:[["hubId",z.s]],removeFromBookmarks:ne,removeFromWatchlist:ne,subscribe:oe,unsubscribe:oe,videoInit:[...te,["parentId",z.s],["resourceId",z.n],["playerOptions",G.o],["onReady",G.f]],videoFullScreenOff:se,videoFullScreenOn:se,videoPause:se,videoStart:se,videoEnd:se,videoProgress:[...se,["duration",z.n],["progress",z.n],["pingDuration",z.n]],showAd:[["blockId",z.s],["position",z.n],["requestId",G.sn],["contextItemId",G.sn]],activityPing:[...te,["timestamp",z.n],["duration",z.n],["activityCounters",z.s],["activityDurations",z.s],["num",G.n]],readEnd:ae,scrollEnd:ae,orderCheckout:te,orderPaid:te,bookingCheckout:te,bookingDone:te,search:[["text",z.s]],externalClick:de,externalShow:de},ue=(e,t,n)=>{let i,r=[],o=[];if("string"!=typeof e)r.push("Event name is not a string, type="+typeof e);else if(Array.isArray(n))i=n;else{const n=ce[e];Array.isArray(n)?i=n:"function"==typeof n?i=n(t):void 0!==n&&(i=[["userMeta",n]],t={userMeta:t}),!i||"object"==typeof t&&null!==t||r.push(`Meta is not an object for event=${e}`)}if(!r.length)if(i)for(const[n,s]of i){let i=t[n];if(void 0===i&&s.required)r.push(`Required param "${n}" is missed in "${e}" event`);else if(void 0!==i){if(null===i&&s.nullable)continue;if("object"===s.type){if(null===i){r.push(`Required param "${n}" is equal to "null" in "${e}" event`);continue}if(s.model){const t=ue(`${e}.${n}`,i,s.model);t.errorMsg.length&&(r=r.concat(t.errorMsg)),t.warnMsg.length&&(o=o.concat(t.warnMsg));continue}}let a=typeof i;if(s.type!==a){if(!s.toType){r.push(`Param "${n}": ${String(i)} is not of type ${s.type} in "${e}" event`);continue}{const o=s.toType(i,a);if(null===o){r.push(`Cannot coerce type of param "${n}": ${JSON.stringify(i)} (${a}) to ${s.type} in "${e}" event`);continue}t[n]=o,i=o,a=s.type}}if(s.specialCheck){const e=s.specialCheck(i);e&&(o.push(`Param "${n}": ${e}`),delete t[n])}"string"===a&&""===i.trim()&&(s.required?r.push(`Param "${n}": is empty string in "${e}" event`):(delete t[n],i=void 0))}}else o.push(`Unknown event ${e}`);return{errorMsg:r,warnMsg:o}},le=[],he={},me={"RCM-7BA1":{options:{storeRcmClickId:{enable:!0}}}};let pe,fe;function ve(t,n){if("setup"===t){if(fe)return;pe="string"==typeof n?.rcmId&&n.rcmId||"none";const e=[["rcmId",pe],["amp",String(!!n?.isAmp)]];if(m.k.setTags(e),le.includes(pe))return void console.warn(`[rcm warning] ${pe} was filtered`)}else if(!fe)return;const{warnMsg:i,errorMsg:r}=ue(t,n);if(i.forEach((e=>{m.k.warn({message:e,fingerprint:["Validation",pe],isConsole:!0,isSentry:!1})})),r.length)r.forEach((e=>{m.k.error({error:e,fingerprint:["Validation",pe],isConsole:!0})}));else try{switch(t){case"setup":{const e=function(e){return me[e]||he[e]&&me[he[e]]}(n.rcmId);fe=new X({...e?.setup,...n},e?.options),ve.isInit=!0;break}case"onLoad":n(e.Ready);break;case"onSetup":n(fe.getOnSetupParams());break;case"setMeta":fe.setMeta(n);break;case"addToBookmarks":fe.sendAddToBookmarks(n);break;case"addToWatchlist":fe.sendAddToWatchlist(n);break;case"blockinit":fe.sendBlockInit(n);break;case"click":fe.sendClick(n);break;case"dislike":fe.sendDislike(n);break;case"like":fe.sendLike(n);break;case"pageread":fe.sendPageRead(n);break;case"pageview":fe.sendPageView(n);break;case"autopageview":fe.sendAutoPageView(n);break;case"hubpageview":fe.sendHubPageView(n);break;case"removeFromBookmarks":fe.sendRemoveFromBookmarks(n);break;case"removeFromWatchlist":fe.sendRemoveFromWatchlist(n);break;case"show":fe.sendShow(n);break;case"subscribe":fe.sendSubscribe(n);break;case"unsubscribe":fe.sendUnsubscribe(n);break;case"videoFullScreenOff":fe.sendVideoFullScreenOff(n);break;case"videoInit":fe.setVideoInit(n);break;case"videoFullScreenOn":fe.sendVideoFullScreenOn(n);break;case"videoProgress":fe.sendVideoProgress(n);break;case"videoPause":fe.sendVideoPause(n);break;case"videoStart":fe.sendVideoStart(n);break;case"videoEnd":fe.sendVideoEnd(n);break;case"fulltextShow":fe.sendFulltextShow(n);break;case"fulltextClick":fe.sendFulltextClick(n);break;case"showAd":fe.sendShowAd(n);break;case"activityPing":fe.sendActivityPing(n);break;case"scrollEnd":fe.sendScrollEnd(n);break;case"readEnd":fe.sendReadEnd(n);break;case"orderCheckout":fe.sendOrderCheckout(n);break;case"orderPaid":fe.sendOrderPaid(n);break;case"bookingCheckout":fe.sendBookingCheckout(n);break;case"bookingDone":fe.sendBookingDone(n);break;case"search":fe.sendSearch(n);break;case"externalClick":fe.sendExternalClick(n);break;case"externalShow":fe.sendExternalShow(n)}}catch(e){m.k.error({error:e})}}ve.isInit=!1,ve.config=h;const ge=(e,t)=>{"function"==typeof e?e(t):m.k.error({error:"Meta is not a function for event=onLoad"})},be=(e,t)=>(ve("setup",e),!!ve.isInit&&(window.rcm=ve,t.forEach((e=>{let[t,n]=e;return window.rcm(t,n)})),!0)),Ie=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ie.q.push(t)};Ie.isInit=!0,Ie.q={innerQueue:[],push(t){const[n,i]=t;"onLoad"===n?ge(i,e.Pending):"setup"===n?be(i,this.innerQueue):this.innerQueue.push(t)}};(()=>{if(!window.rcm)return void m.k.error({error:"Rcm is set up incorrectly",fingerprint:["Rcm is set up incorrectly"]});if(window.rcm.isInit)return;if(!(0,Z.aw)())return;let t,n=Array.isArray(window.rcm.q)?window.rcm.q:[];n=n.filter((n=>{switch(n[0]){case"onLoad":return ge(n[1],e.Pending),!1;case"setup":return t||(t=n),!1;default:return!0}})),t&&be(t[1],n)||(Ie.q.innerQueue=n,window.rcm=Ie)})()})()})();