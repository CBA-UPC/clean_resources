/***************************************
 * @preserve
 * Copyright (c) 2023 Verint Systems, Inc. All rights reserved.
 * ForeSee Web SDK: Survey
 * Version: 19.22.0
 * Built: May 05, 2023 at 09:53:37 EDT
 ***************************************/
_fsDefine(["fs",_fsNormalizeUrl("$fs.utils.js"),"exports"],(function(t,e,i){r r={remove:hasClass:addClass:function(t){this.hasClass(t)||(this.className+=" "+t)},removeClass:function(t){this.className=(this.className||"").replace(t,""),this.className=this.className.replace(/[ ]+$/g,"")},$:css:function(e){for(var i in e)t.hasProp(e,i)&&(this.style[i]=e[i])}},s=function(e){if("string"==typeof e&&-1==e.indexOf("<"))return document.querySelectorAll(e);if("string"==typeof e){var i=document.createElement("div");i.innerHTML=e,e=i.firstChild}for(var a in r)t.hasProp(r,a)&&(e[a]=r[a]);return e},o=3,c=1,l=2,u=4,d=5,h=function(){ar i=t.prototype;return i.initQuestion=function(t,i){if(this.el=t,this.cfg=i,this.cfg.isPersistent=!!s(this.el).hasClass("acs-persistent__block"),this.cfg.isVisible=!!this.cfg.isPersistent,this.cfg.isRequired="1"===i.r||this.cfg.isPersistent&&this.cfg.qt==u,this.cfg.rules_info&&this.cfg.rules_info.length>0){var a=this.cfg.rules_info.replace(/&amp;/g,"&");a=a.replace(/&quot;/g,'"'),this.cfg.rules=JSON.parse(a)}else this.cfg.rules=[];this.answer=null,this.stateChanged=new e.FSEvent},i.hide=function(){this.cfg.isVisible=!1,this.cfg.isPersistent||s(this.el).addClass("acs-feedback__block--hidden")},i.show=function(){this.cfg.isVisible=!0,this.cfg.isPersistent||s(this.el).removeClass("acs-feedback__block--hidden")},i.validate=function(){var t=!0;return this.cfg.isVisible&&(this.cfg.isRequired&&(t=null!==this.answer&&this.answer.length>0),t?s(this.el).removeClass("acs-feedback__block--invalid"):s(this.el).addClass("acs-feedback__block--invalid")),t},i.getAnswer=function(){return!(!this.cfg.isVisible||!this.answer||null===this.answer)&&{questionId:this.cfg.id,answerId:this.answer}},t}(),f=function(t){function i(){return t.apply(this,arguments)||this}a(i,t);var n=i.prototype;return n.initCheckBox=function(t,i){this.initQuestion(t,i);var a,n=this,r=s(this.el),o=r.$("input[type=checkbox]"),c=(a=r,function(t){t&&t.stopPropagation();for(var e=a.$("label"),i=0;i<e.length;i++){var r=s(e[i]),o=r.$("input[type=checkbox]")[0];if(o){if(o.checked)if(r.setAttribute("aria-checked","true"),r.addClass("acsChecked"),null===n.answer)n.answer=[o.getAttribute("questionid")];else{for(var c=!1,l=0;l<n.answer.length;l++)if(n.answer[l]==o.getAttribute("questionid")){c=!0;break}c||(n.answer.push(o.getAttribute("questionid")),c=!1)}else if(r.setAttribute("aria-checked","false"),r.removeClass("acsChecked"),n.answer){for(var u=void 0,d=0;d<n.answer.length;d++)if(n.answer[d]==o.getAttribute("questionid")){u=d;break}u>=0&&n.answer.splice(u,1)}n.validate(),n.stateChanged.fire(n.cfg.id)}}});e.Bind(r,"feedback:keydown",(function(t){t.stopPropagation();var i=e.getKeyCode(t);if("enter"===i||"spacebar"===i){t.preventDefault();for(var a=0;a<o.length;a++)t.target.control!==o[a]&&t.target.firstElementChild!==o[a]||(o[a].checked=!o[a].checked,o[a].setAttribute("checked",o[a].checked));c()}})),e.Bind(r,"feedback:change",c),e.Bind(r,"feedback:mousedown",(function(t){t.target.blur()}),!0),e.Bind(r,"feedback:click",(function(t){t.stopPropagation()}))},n.checkRule=function(t){if(null!==this.answer&&this.answer.length>0)for(var e=0;e<this.answer.length;e++)if(this.answer[e]==t.answer)return!0;return!1},n.getAnswer=function(){if(this.cfg.isVisible&&null!==this.answer&&this.answer.length>0){for(var t=[],e=0;e<this.answer.length;e++)t.push({questionId:this.cfg.id,answerId:this.answer[e]});return t}return!1},i}(h);function g(t,e){if(0===e)return"";if(e<9)return t;if(t.length>9){var i={phone:/\b(?:(?:\(\d{3}\)?)|(?:\d{3}))[ -./\\]?\d{3}[ -./\\]?\d{4}\b/g},a={electron:/\b(4026|417500|4405|4508|4844|4913|4917)[ -./\\]?\d{4}[ -./\\]?\d{4}\d{3,4}\b/g,maestro:/\b(?:5[0678]\d\d|6304|6390|67\d\d)[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?(?:\d{4})?[ -./\\]?(?:\d{1,3})?\b/g,dankort:/\b(5019)[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{4}\b/g,instaPayment:/\b(637|638|639)[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{1}\b/g,visa:/\b4\d{3}[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{1,4}\b/g,mastercard:/\b5[1-5]\d{2}[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{4}\b/g,amex:/\b3[47]\d{2}[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{3}\b/g,diners:/\b3(?:0[0-5]|[68]\d)\d{1}[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{2}\b/g,discover:/\b6(?:011|5\d{2}|22[19]|4[56789]\d{1})[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{4}\b/g,jcb:/\b(?:2131|1800|35\d[28-89])[ -./\\]?\d{4}[ -./\\]?\d{4}[ -./\\]?\d{4}\b/g,ssn:/\b\d{3}[ -./\\]?\d{2}[ -./\\]?\d{4}\b/g},n=[];for(var r in i)t=t.replace(i[r],function(t,e){return this.push({i:e,m:t}),""}.bind(n));var s=for(var o in a)t=t.replace(a[o],s);n.forEach((function(e){t=t.slice(0,e.i)+e.m+t.slice(e.i)}))}return e&&t.length>=this.maxlen&&(t=t.substr(0,this.maxlen-1)),t}f.build=function(t,e){if(e.qt==d){var i=new f;return i.initCheckBox(t,e),i}};var p=function(i){function n(){return i.apply(this,arguments)||this}a(n,i);var r=n.prototype;return r.initInputText=function(t,i){this.initQuestion(t,i);var a=this.el.$("input")[0];if(!a)throw new Error("Missing text input, bad survey data?");this.maxlen=parseInt(a.getAttribute("acsmaxlength"),10);var n=this,r=this.maxlen;/^[0-9]+$/.test(a.getAttribute("acsmaxlength"))&&(e.Bind(a,"feedback:keydown",(function(t){t.stopPropagation();var i=(t.target||t.srcElement).value.replace(/\s+/g," ").length;if(r-i-1<0&&!e.isControlKey(t))return t.preventDefault(),!1})),e.Bind(a,"feedback:keyup",(function(t){t.stopPropagation();var e=t.target||t.srcElement;n.answer=e.value,n.validate(),n.stateChanged.fire(n.cfg.id)})),e.Bind(a,"feedback:keypress",(function(t){t.stopPropagation()})))},r.checkRule=function(i){var a=!1;if(null!==this.answer&&this.answer.length>0){var n=e.decodeHTMLEntities(i.answer);switch(i.operator){case"equals":a=n==this.answer;break;case"contains":a=t.toLowerCase(this.answer).indexOf(t.toLowerCase(n))>-1;break;default:console.error("Unknown rule operator: "+i.operator)}}return a},r.getAnswer=function(){if(this.cfg.isVisible&&null!==this.answer&&this.answer.length>0){var t=this.answer.replace(/\s+/g," ");return" "!=t&&{questionId:this.cfg.id,answerText:g(t,this.maxlen)}}return!1},n}(h);p.build=function(t,e){if(e.qt==c&&1==e.dt){var i=new p;return i.initInputText(t,e),i}};var v=function(t){function i(){return t.apply(this,arguments)||this}a(i,t);var n=i.prototype;return n.initRadio=function(t,i){this.initQuestion(t,i);var a,n=this,r=s(this.el),o=r.$("input[type=radio]"),c=r.$("label"),l=function(t){t.stopPropagation()},u=(a=r,function(t){for(var e=a.$("label"),i=0;i<e.length;i++){var r=s(e[i]),o=r.$("input[type=radio]")[0];o&&(o.checked||o===t?(r.addClass("acsChecked"),r.setAttribute("aria-checked","true"),n.answer=[{answerId:o.value,answerText:o.getAttribute("label"),questionId:n.cfg.id}]):(r.removeClass("acsChecked"),r.setAttribute("aria-checked","false")),n.validate(),n.stateChanged.fire(n.cfg.id))}});e.Bind(r,"feedback:keydown",(function(t){var i,a=e.getKeyCode(t);if(t.stopPropagation(),"enter"===a||"spacebar"===a){t.preventDefault();for(var n=0;n<o.length;n++)t.target.control===o[n]||t.target.firstElementChild===o[n]?(o[n].checked=!0,o[n].setAttribute("checked",!0),i=o[n]):o[n].checked=!1;u(i)}else if("arrowleft"===a||"arrowright"===a)for(var r,s=t.target,c=t.target.parentNode.children,l=c.length-1,d=0;d<=l&&!r;d++)c[d]===s&&c[r="arrowright"===a?d+1>l?0:d+1:d-1<0?l:d-1].focus()})),e.Bind(r,"feedback:change",u),e.Bind(r,"feedback:mousedown",(,!0);for(var d=0;d<c.length;d++)e.Bind(c[d],"feedback:click",l)},n.checkRule=function(t){return null!==this.answer&&this.answer[0].answerId==t.answer},n.getAnswer=function(){return!!(this.cfg.isVisible&&null!==this.answer&&this.answer.length>0)&&this.answer[0]},i}(h);v.build=function(t,e){if(e.qt==o){var i=new v;return i.initRadio(t,e),i}};var b=function(i){function n(){return i.apply(this,arguments)||this}a(n,i);var r=n.prototype;return r.initSelect=function(i,a){this.initQuestion(i,a);var n,r=this,o=s(this.el),c=o.$("select")[0],l=o.$("div.acs-feedback__select")[0];s(c).css({height:(l.offsetHeight||38)+"px"}),e.Bind(c,"feedback:change",(n=c,function(e){for(var i=s(n).$("option"),a=i[n.selectedIndex],o=0;o<i.length;o++)a===i[o]?a.setAttribute("selected","selected"):i[o].getAttribute("selected")&&i[o].removeAttribute("selected");var c=t.toLowerCase(a.value)===t.toLowerCase(i[0].value);r.answer=c?null:a.value,r.validate(),r.stateChanged.fire(r.cfg.id),e.preventDefault(),e.target.blur()}),!1)},r.updateSelects=function(){var t=s(this.el),e=t.$("select")[0],i=t.$("div.acs-feedback__select")[0];t.offsetHeight>0&&s(e).css({height:(i.offsetHeight||38)+"px"})},r.checkRule=function(t){return null!==this.answer&&this.answer.length&&this.answer==t.answer},n}(h);b.build=function(t,e){if(e.qt==l){var i=new b;return i.initSelect(t,e),i}};var w=function(i){function n(){return i.apply(this,arguments)||this}a(n,i);var r=n.prototype;return r._getRating=r.initStarRating=function(i,a){this.initQuestion(i,a);var n=this,r=s(this.el),o=r.$("input");function c(t,i){return function(t){for(var a=!1,n=t.srcElement||t.target,r=0;r<i.length;r++)a?e.removeClass(i[r],"_acsHover"):a||e.addClass(i[r],"_acsHover"),i[r]==n&&(a=!0)}}this.score=-1;var l,u=r.getElementsByClassName(t.CSSprefix+"-star-rating")[0]||r.getElementsByTagName("fieldset"),d=u.children;e.Bind(r,"feedback:mouseleave",(l=d,function(){for(var t=0;t<l.length;t++)e.removeClass(l[t],"_acsHover")}));for(var h=0;h<d.length;h++)e.Bind(d[h],"feedback:mouseenter",c(0,d));var f=function(i,a){return function(r){for(var s=!1,c=function(){i.removeClass("_acsRatingSet")},l=r.srcElement||r.originalTarget,u=0;u<a.length;u++)s?(e.removeClass(a[u],t.CSSprefix+"-star-rating__star--fill"),a[u].setAttribute("aria-checked","false")):s||(n.score=u+1,e.addClass(a[u],t.CSSprefix+"-star-rating__star--fill"),a[u].setAttribute("aria-checked","true")),a[u]!=l&&o[u]!=l||(s=!0,o[u].checked=!0,n.answer=o[u].value,n.stateChanged.fire(n.cfg.id),n.validate()),e.addClass(i,"_acsRatingSet"),t.nextTick(c)}}(r,d);e.Bind(u,"feedback:change",(function(t){"input"===t.target.tagName.toLowerCase()?f(t):t.stopPropagation()}),!0),e.Bind(u,"feedback:click",(function(t){var e=t.target.tagName;if("g"!==e.toLowerCase())"div"===e.toLowerCase()?(f(t),t.target.focus()):t.stopPropagation();else{var i=function t(e){return e?"div"===e.tagName.toLowerCase()&&-1!==e.className.indexOf("acs-feedback-star-rating-selector")?e:t(e.parentNode):null}(t.target.parentNode);i&&i.click()}}),!0),e.Bind(u,"feedback:mousedown",(,!0),e.Bind(u,"feedback:keydown",(function(t){var i=e.getKeyCode(t);t.stopPropagation();var a="arrowleft"===i||"left"===i,n="arrowright"===i||"right"===i;if("enter"!==i&&"spacebar"!==i||(t.preventDefault(),f(t)),(a||n)&&(t.preventDefault(),u&&u.children&&u.children.length>0)){for(var r=0,s=0;s<u.children.length;s++)u.children[s].setAttribute("tabindex",-1),u.children[s]===t.srcElement&&(r=s);if(a){var o=0===r?0:r-1;u.children[o].setAttribute("tabindex",0),u.children[o].click()}if(n){var c=4===r?4:r+1;u.children[c].setAttribute("tabindex",0),u.children[c].click()}}}))},r.checkRule=function(t){var e=!1;if(null!==this.answer&&this.answer.length>0)switch(t.operator){case"equals":e=this.answer==t.answer;break;case"lt":e=this.answer<t.answer;break;case"gt":e=this.answer>t.answer;break;default:console.error("Unknown rule operator: "+t.operator)}return e},n}(h);w.build=function(t,e){if(e.qt==u){var i=new w;return i.initStarRating(t,e),i}};var k={unavailable:"<p>Feedback isn't available right now.</p><p>Please check back later.</p>",expired:"<p>This is an expired survey!</p>",submittext:"Submit",ext:{feedback_choose_topic_text:"Choose a topic",feedback_default_dropdown_text:"Choose..",feedback_ok_button_text:"OK",feedback_required_field_error_text:"Please fill in the required fields.",feedback_survey_closed_header_text:"Survey has closed"}},m=function(i){(n,i);var r=n.prototype;return r.initTextArea=function(t,i){this.initQuestion(t,i);var a=this.el.$("textarea")[0];if(!a)throw new Error("Missing textarea, bad survey data?");this.maxlen=parseInt(a.getAttribute("acsmaxlength"),10);var n,r=this,o=(n=this.maxlen,function(t){t.stopPropagation();var e=t.target||t.srcElement,i=e.value.replace(/\s+/g," ").length,a=n-i,o=s(e.parentNode).$(".acs-feedback__textarea--count")[0],c=Math.max(0,a);if(o.innerHTML=c+" characters remaining",a<0)return e.value=e.value.substr(0,e.value.length+a),!1;r.answer=e.value,r.validate(),r.stateChanged.fire(r.cfg.id)}),c=function(t){return function(i){i.stopPropagation();var a=(i.target||i.srcElement).value.replace(/\s+/g," ").length;if(t-a-1<0&&!e.isControlKey(i))return i.preventDefault(),!1}}(this.maxlen);/^[0-9]+$/.test(a.getAttribute("acsmaxlength"))&&(e.Bind(a,"feedback:keydown",c),e.Bind(a,"feedback:keyup",o),e.Bind(a,"feedback:keypress",())},r.checkRule=function(i){var a=!1;if(null!==this.answer&&this.answer.length>0){var n=e.decodeHTMLEntities(i.answer);switch(i.operator){case"equals":a=i.answer==this.answer;break;case"contains":a=t.toLowerCase(this.answer).indexOf(t.toLowerCase(n))>-1;break;default:console.error("Unknown rule operator: "+i.operator)}}return a},r.getAnswer=function(){if(this.cfg.isVisible&&null!==this.answer&&this.answer.length>0){var t=this.answer.replace(/\s+/g," ");return" "!=t&&{questionId:this.cfg.id,answerText:g(t)}}return!1},n}(h);function _(i){var a,n=window._acsURL||window.location.toString();function r(t){if(!Array.isArray(t))return!1;for(a=0;a<t.length;a++)if(e.testAgainstSearch(t[a],n))return!0;return!1}return n=t.toLowerCase(n),(!i.whitelistActive||r(i.whitelistData))&&(!i.blacklistActive||!r(i.blacklistData))}m.build=function(t,e){if(e.qt==c&&2==e.dt){var i=new m;return i.initTextArea(t,e),i}};var y=function(){function i(i,a,n){var r=this;this.cfg=i,this.data=null,this.cpps=a,this.browser=n,this.qs=[],this._topic=!1,this.SurveyUIUpdated=new e.FSEvent,this.SubmitClicked=new e.FSEvent,this.SurveyData=new e.FSEvent,this.defaultCfg=k,this.SurveyData.subscribe((function(i,a){r.data=r._transpileJSONDef(JSON.parse(i)),r.data.meta.logo1graphicalttag=r.data.meta.logo1graphicalttag||"company logo",r.data.meta.logo2graphicalttag=r.data.meta.logo2graphicalttag||"company logo",r.data.meta.privacyurl=r.data.meta.privacyurl||r.cfg.privacyuri,r.data.meta.privacytext=r.data.meta.privacytext||r.cfg.privacytext,r.data.meta.logoPoweredBy=r.data.meta.logoPoweredBy||r.cfg.logoPoweredBy,r.data.ext=t.ext({},r.defaultCfg.ext,r.data.ext),r.data.meta.unavailable=r.data.meta.unavailable||r.defaultCfg.unavailable,r.data.meta.expired=r.data.meta.expired||r.defaultCfg.expired,r.data.meta.submittext=r.data.meta.submittext||r.defaultCfg.submittext;var n=r,s=r.data.meta,o=!!s.logo2graphic,c=!!s.logo1graphic,l=!1,u=!1,d=function(){if(a)return a(n.data)};o||c?(o&&e.imgInfo(s.logo2graphic,(function(){l=!0,(!c||c&&u)&&d()})),c&&e.imgInfo(s.logo1graphic,(function(){u=!0,(!o||o&&l)&&d()}))):d()}),!0,!0)}var a=i.prototype;return a._transpileJSONDef=function(e){var i,a,n,r,s=e.survey.content.main,o=s.cq,c=s.ca,u=s.ncq,d={meta:e.survey.content.meta.info,ext:e.survey.content.meta["ext-info"],notopic:[],topics:[]},h=/&amp;/gi,f=/&lt;/gi,g=/&gt;/gi,p=/&quot;/gi,v=/&nbsp;/gi,b={};if(u&&"string"!=typeof u||(u={qstn:[]}),u.qstn&&void 0===u.qstn.length&&(u.qstn=[u.qstn]),!this.cfg.autowhitelist&&this.cfg.topics.length>0){window._acsURL=t.getParam("fsUrl");for(var w=0;w<this.cfg.topics.length;w++){var k=this.cfg.topics[w];_(k)&&(b[k.answerId]=!0)}}function m(t,e){for(var i=0;i<e.length;i++){var a=e[i];if(t[a]){for(var n=t[a];n.indexOf("&amp;")>-1;)n=n.replace(h,"&");t[a]=n.replace(f,"<").replace(g,">").replace(p,'"').replace(v," ")}}}for(m(d.meta,["epiloguetext","prologuetext"]),i=0;i<o.qstn.length;i++)for(m(n=o.qstn[i],["txt","lbl"]),d.notopic.push(n),n.answers=[],a=0;a<c.ans.length;a++)(r=c.ans[a]).qid==n.id&&(d.topics.push(r),n.answers.push(r));for(i=0;i<u.qstn.length;i++)for(m(n=u.qstn[i],["txt","lbl"]),n.answers=[],a=0;a<c.ans.length;a++)(r=c.ans[a]).qid==n.id&&n.answers.push(r);if(!this.cfg.autowhitelist&&this.cfg.topics.length>0){for(a=0;a<d.topics.length;a++)b[d.topics[a].id]||d.topics.splice(a--,1);for(a=0;a<d.notopic.length;a++)if(d.notopic[a].qt==l)for(i=0;i<d.notopic[a].answers.length;i++)b[d.notopic[a].answers[i].id]||d.notopic[a].answers.splice(i--,1)}for(i=0;i<d.topics.length;i++){var y=d.topics[i];if(y.questions=[],u.qstn)for(a=0;a<u.qstn.length;a++)u.qstn[a].aid==y.id&&(m(u.qstn[a],["txt","lbl"]),y.questions.push(u.qstn[a]))}var q=[];for(i=0;i<d.notopic.length;i++)d.notopic[i].qt==l&&(q=d.notopic[i].answers);return d.vistopics=q,d.ncq=u,d},a._getScore=function(){return this.qs[0]._getRating?this.qs[0]._getRating():0},a._serialize=function(){var e={mid:this.cfg.mid,url:window.location.toString().indexOf("&fsUrl")>-1?t.getParam("fsUrl"):window.location.toString(),responses:[]},i=e.responses,a=this.qs;if(1==this.data.vistopics.length)for(var n=0;n<this.data.notopic.length;n++){var r=this.data.notopic[n];if(r.qt==l){i.push({questionId:r.id,answerId:r.answers[0].id});break}}for(var s=0;s<a.length;s++){var o=a[s].cfg.id,c=a[s].cfg.qt;if(o){var u=a[s].getAnswer();u&&(u&&c==d?i.push.apply(i,u):i.push(u))}}var h=this.cpps.all();for(var f in 0===Object.keys(h).length&&decodeURIComponent(location.search).substring(1).split("&").forEach((),h)i.push({questionId:f,answerText:h[f]});return this.cfg.version&&(e.version=this.cfg.version),e=JSON.stringify(e)},a._getQConfig=function(t){var e,i,a=this.data.notopic;for(e=0;e<a.length;e++)if(t==a[e].id)return a[e];for(a=this.data.ncq.qstn,i=0;i<a.length;i++)if(t==a[i].id)return a[i]},a._getQObject=function(t){if(this.qs.length>0&&t)for(var e=0;e<this.qs.length;e++)if(this.qs[e].cfg.id==t)return this.qs[e];return!1},a._renderSurvey=function(t){var e,i=this._getQObject(t);if(i&&(e=this._checkTopicChange(i.getAnswer())),e){this._runSkipLogic(this.data.vistopics[e-1].questions);for(var a=0;a<this.data.vistopics.length;a++)if(a!==e-1)for(var n=this.data.vistopics[a].questions,r=0;r<n.length;r++){this._getQObject(n[r].id).hide()}}else for(var s=0;s<this.data.vistopics.length;s++){var o=this._checkWhatTopic(t);if(o)this._runSkipLogic(this.data.vistopics[o-1].questions);else if(this._topic)for(var c=0;c<this.data.vistopics.length;c++)this.data.vistopics[c].id==this._topic&&this._runSkipLogic(this.data.vistopics[c].questions)}},a._checkTopicChange=function(t){var e=t.answerId;if("string"!=typeof e)return!1;for(var i=0;i<this.data.vistopics.length;i++)if(this.data.vistopics[i].id==e)return i+1;return!1},a._checkWhatTopic=function(t){for(var e=0;e<this.data.vistopics.length;e++)for(var i=this.data.vistopics[e].questions,a=0;a<i.length;a++)if(i[a].id==t)return e+1;return!1},a._runSkipLogic=function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this._getQObject(t[e].id),a=i.cfg.rules,n=!1;if(a.length>0)for(var r=0;r<a.length;r++){var s=this._getQObject(a[r].question);s&&(n=n||s.checkRule(a[r])&&!!s.cfg.isVisible)}else n=!0;n?i.show():i.hide()}},a._validateSurvey=function(){var t,e,i=!0;if(this.qs&&this.qs.length>=0)for(var a=0;a<this.qs.length;a++)t=this.qs[a].el,this.qs[a].validate()?(t.setAttribute("aria-invalid","false"),t.getAttribute("aria-label")&&t.removeAttribute("aria-label")):(i=i&&!1,t.setAttribute("aria-invalid","true"),t.setAttribute("aria-label","The submission for this section is invalid"),e||(e=this.qs[a].el));return i?this._validationStatus(!1):(this._validationStatus(!0),e.focus()),i},a.bind=function(t){var i=this,a=this;a.submitted=!1;for(var n=(t=s(t)).$(".acs-feedback__block"),r=0;r<n.length;r++){var o=this._getQConfig(n[r].getAttribute("questionid"));if(o){var c=x(n[r],o);c.stateChanged.subscribe(this._renderSurvey.bind(this),!1,!0),this.qs.push(c)}}var u=function(){for(var t=0;t<i.qs.length;t++)i.qs[t].cfg.qt==l&&i.qs[t].updateSelects()};this.SurveyUIUpdated.subscribe((),a.$el=t;for(var d=t.$(".acs-headingzone h1"),h=0;h<d.length;h++)s(d[h]).addClass("acs-feedback__heading acs-feedback__heading--h1");var f=t.$(".acs-topic__selector")[0];f&&e.Bind(f,"feedback:change",(function(e){!function(e){for(var i=t.$(".acs-feedback__topic"),n=0;n<i.length;n++)s(i[n]).removeClass("acs-visible__topic");try{s(document.getElementById("topk_"+e)).addClass("acs-visible__topic"),a._topic=e}catch(r){}a.SurveyUIUpdated.fire()}(e.target.value)})),1==this.data.vistopics.length&&(this._topic=this.data.vistopics[0].id,this._renderSurvey(),s(document.getElementById("topk_"+this.data.vistopics[0].id)).addClass("acs-visible__topic"),u()),e.Bind(t.$(".acs-submit-feedback__button")[0],"click",(function(t){return i._validateSurvey()&&!i.submitted&&(i.SubmitClicked.fire(),i.submitted=!0),t&&t.preventDefault&&t.preventDefault(),!1}));for(var g=p=document.querySelectorAll('a[href^="mailto"]'),v=0;v<p.length;v++)e.Bind(p[v],"feedback:click",g);for(var b=document.querySelectorAll(".acs-feedback__label p"),w=0;w<b.length;w++)s(b[w]).css({display:"inline"})},a.isExpired=function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(this.cfg.fbexpiredate){var i=this.cfg.fbexpiredate.split("-");return new Date(i[0],Number(i[1])-1,i[2])<e}return!1},a._validationStatus=function(t){var e=s(this.$el.$(".acs-validation-block")[0]);return t?e.css({display:"block"}):e.css({display:"none"}),e},i}(),q=[f.build,p.build,v.build,b.build,w.build,m.build];function x(t,e){for(var i=0;i<q.length;i++){var a=q[i](t,e);if(a)return a}return null}return i.Survey=y,i}));
