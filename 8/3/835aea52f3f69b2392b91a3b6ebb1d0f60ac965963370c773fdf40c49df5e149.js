!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[313],{48352:(e,r,t)=>{t.d(r,{Z:()=>b});var a=t(54138),l=t.n(a),n=t(33970),o=t.n(n),s=t(95004),u=t(78994),d=t(55673),c=t(43523),i=t(22424),f=t(12736),p=t(14544),g=t(78667);let m=e=>{var r=(0,g.bp)().logEvent,t=(0,u.TH)().pathname,a=(0,d.lr)(),n=o()(a,1)[0];(0,s.useEffect)(()=>{"embed"===n.get("source")&&r({pathname:t,eventName:c.J.EmbedPostClick,eventDetails:l()(l()({},e),{},{refUrl:n.get("refUrl"),action:n.get("action")})})},[])},b=e=>{var r=e.page,t=e.eventDetails,a=(0,i.wL)().logEvent,n=(0,u.TH)().pathname,g=(0,d.lr)(),b=o()(g,1)[0],h=(0,p.M)().name,v=(0,f.z)(),y=v.isModalShowing,w=v.isPeeprShowing,_=(0,s.useRef)(y||w),E=b.get("source"),k=()=>a({page:r,pathname:n,eventName:c.J.ScreenView,eventDetails:l()(l()({pathname:n,referrer:document.referrer,color_palette:h},E&&{source:E}),t)});return(0,s.useEffect)([n,r]),(0,s.useEffect)(()=>{!_.current||y||w||k(),_.current=y||w},[_,y,w]),m(),null}},25108:(e,r,t)=>{t.d(r,{Z:()=>b});var a=t(33970),l=t.n(a),n=t(95004),o=t(6135),s=t(6233),u=t(53460),d=t(78667),c=t(93613),i=t(63583),f=t.n(i),p=t(25793),g=t(40733),m=t(2629);let b=e=>{var r,t=e.closeModal,a=e.productGroup,i=e.source,b=e.initialCheckoutType,h=e.initialSelfPurchaseBlogName,v=(0,d.bp)(),y=v._c,w=v._t,_=v.isLoggedIn,E=(0,c.V)().toggleToast,k=(0,p.m)(a),S=k.data,T=k.isError,x=k.isPending,P=(0,n.useState)(b),j=l()(P,2),M=j[0],Z=j[1];return((0,n.useEffect)(()=>{T&&E(y("[TumblrMart] Error message when product detail modal fails to fetch product data","There was a problem loading the TumblrMart product. Check back later."),"error")},[y,T,E]),!_||T)?null:(0,m.jsx)(s.Z,{onClose:t,title:null!==(r=null==S?void 0:S.title)&&void 0!==r?r:w("TumblrMart"),modalWrapperClass:"tumblrmartV2",children:x?(0,m.jsx)("div",{className:g.Z.loader,children:(0,m.jsx)(o.Z,{color:f().paletteBlack})}):(0,m.jsx)(u.dn,{source:i,product:S,checkoutType:null!=M?M:null!=S&&S.gift?"gift":"self-purchase",onSelectGift:()=>Z("gift"),onSelectSelfPurchase:initialSelfPurchaseBlogName:h})})}},25793:(e,r,t)=>{t.d(r,{m:()=>i});var a=t(17276),l=t.n(a),n=t(33590),o=t(91253),s=t(39377),u=t(78667),d=(0,o.i)(s.xm),c=i=e=>{var r=(0,u.bp)().apiFetchWithSchema;return(0,n.a)({queryKey:c(e),queryFn:()=>{var t;return l()().async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l()().awrap(r("/v2/tumblrmart/store_v2",d,{method:"GET",queryParams:{product_group:e}}));case 2:return t=a.sent.response,a.abrupt("return",t);case 5:case"end":return a.stop()}},null,null,null,Promise)},refetchOnWindowFocus:!1})}},14260:(e,r,t)=>{t.r(r),t.d(r,{default:);var a=t(78994),l=t(48352),n=t(9358),o=t(25108),s=t(90127),u=t(86772),d=t(2629);let c=()=>{var e=(0,a.TH)().key,r=(0,a.s0)(),t=(0,a.UO)().productGroup,c=()=>{window.history.length>1&&"default"!==e?r(-1):r(s.o_.dashboard)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{page:u.H.analyticsPageName}),t?(0,d.jsx)(o.Z,{closeModal:c,productGroup:t,source:"deeplink"}):(0,d.jsx)(n.Z,{closeModal:c,source:"deeplink"})]})}}}]);