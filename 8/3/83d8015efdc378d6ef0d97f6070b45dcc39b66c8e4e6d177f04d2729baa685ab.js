(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{1205:function(a,t,s){"use strict";s.r(t);var i={mixins:[s(941).e]},e=s(45),l=Object(e.a)(i,(function(){var a=this,t=a._self._c;return t("article",{staticClass:"thread thread--type-list imgFrame-container--scale"},[t("div",{staticClass:"threadGrid"},[a.hasImageSlot?t("div",{staticClass:"threadGrid-image space--r-3 hide--empty"},[a._t("image")],2):a._e(),t("div",{staticClass:"threadGrid-headerMeta"},[t("div",{staticClass:"flex boxAlign-ai--all-c boxAlign-jc--all-sb space--b-2"},[a._t("header")],2)]),t("div",{staticClass:"threadGrid-title"},[a._t("title"),a.hasLabelSlot?t("div",{staticClass:"overflow--fade"},[a._t("labels")],2):a._e()],2),t("div",{staticClass:"threadGrid-body space--v-1"},[a._t("body")],2),t("div",{staticClass:"threadGrid-footerMeta"},[t("div",{staticClass:"flex--fromW2 boxAlign-ai--all-c boxAlign-jc--all-sb width--all-12"},[t("span",{staticClass:"lbox--v-4"},[a._t("author")],2),t("span",{staticClass:"footerMeta-actionSlot"},[a._t("secondary-action")],2),t("span",{staticClass:"width--all-12 width--fromW2-auto space--l-0 space--fromW3-l-2 space--t-2 space--fromW2-t-0"},[a._t("primary-action")],2)])])]),a._t("default")],2)}),[],!1,null,null,null);t.default=l.exports}}]);space--ml-2 hide--toW2"},[e._v(e._s(e.toggle.label))])],1)}),[],!1,null,null,null).exports,c=i(0),u=i.n(c),g=i(50),h=i(515),f={components:{BaseButton:s.a,BaseSpinner:h.a},props:{info:{type:Object,default:()=>({})}},data:()=>({loading:!1,formActive:!1}),computed:{communityUpdatable(){return this.info.editable},enabled(){return this.communityUpdatable},buttonClasses(){return{"button--selected":this.formActive,"":!1}}},methods:{legacyToggle(e){this.formActive?document.querySelector("#threadInfoForm").dispatchEvent(new CustomEvent("replace-revert",{bubbles:!0})):(this.toggleLoading(),g.a.handler(u()(this.$el),{endpoint:"/thread-info/edit/".concat(this.info.additionalInfoId),method:"get",replaces:[{target:".thread-info",endEvent:"wysiwyg-update",reversible:!0}]},e).done((()=>{this.toggleLoading(),this.toggleActive(),u()(".thread .thread-infos").on("toggle",this.toggleComplete),u()("#threadInfoForm").on("replace-revert toggle",this.toggleInactive)})))},toggleActive(){this.formActive=!0},toggleInactive(){this.formActive=!1},toggleComplete(){this.toggleInactive()},toggleLoading(){this.loading=!this.loading},toggleForm(e){this.legacyToggle(e)}}},m=Object(d.a)(f,(function(){var e=this,t=e._self._c;return e.enabled?t("BaseButton",{directives:[{name:"track",rawName:"v-track:edit.click",arg:"edit",modifiers:{click:!0}}],class:e.buttonClasses,attrs:{variant:"text",mode:"secondary",seal:e.loading},on:{click:e.toggleForm}},[e.loading?t("BaseSpinner"):e._e(),t("BaseIcon",{attrs:{name:"pencil"}}),t("span",{staticClass:"size--all-s space--ml-2 hide--toW2"},[e._v(e._s("Editar"))])],1):e._e()}),[],!1,null,null,null).exports,p=i(93),b=i(23),k={components:{BaseSpinner:h.a,BaseButton:s.a},props:{info:{type:Object,default:()=>({})}},data:()=>({loading:!1}),computed:Object.assign({},Object(p.e)("auth",{authUserId:(e,t)=>{var i;return null===(i=t.me)||void 0===i?void 0:i.userId}}),{isAuthor(){return this.info.userId===this.authUserId},enabled(){return this.info.deletable},isDeleted(){return this.info.isDeleted},label(){let e=this.isDeleted?"Recuperar":"Borrar";return this.isDeleted&&this.info.deletedBy&&(e="".concat(e," ").concat("Borrado por"," ").concat(this.info.deletedBy.username)),e},buttonClasses(){const e=(this.isDeleted,"");return{[e]:!!e}}}),methods:{toggleDelete(){this.$emit("update",Object.assign({},this.info,{isDeleted:!this.isDeleted}))},toggleLoading(){this.loading=!this.loading},legacyToggle(e){this.isDeleted||this.isAuthor?g.a.handler(u()(this.$el),{endpoint:"/thread-info/".concat(this.isDeleted?"undelete":"delete","/").concat(this.info.additionalInfoId),replaces:[{target:".thread-info",endEvent:"init"}]},e).done((()=>{this.toggleLoading(),this.toggleDelete()})):b.a.handler(u()(document.documentElement),Object.assign({},b.a.defaults,{endpoint:"/thread-info/delete-modal/".concat(this.info.additionalInfoId)}))}}},v={components:{AdditionalInfoLike:r,AdditionalInfoEdit:m,AdditionalInfoDelete:Object(d.a)(k,(function(){var e=this,t=e._self._c;return e.enabled?t("BaseButton",{directives:[{name:"track",rawName:"v-track:delete.click",arg:"delete",modifiers:{click:!0}}],class:e.buttonClasses,attrs:{variant:"text",mode:"secondary",seal:e.loading},on:{click:e.legacyToggle}},[e.loading?t("BaseSpinner"):e._e(),t("BaseIcon",{attrs:{name:"trash"}}),t("span",{staticClass:"size--all-s space--ml-2 hide--toW2"},[e._v(e._s(e.label))])],1):e._e()}),[],!1,null,null,null).exports},mixins:[i(937).a]},I=Object(d.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"lbox--v-3 text--b"},[e.ready?[t("AdditionalInfoLike",{staticClass:"space--mr-3",attrs:{info:e.info},on:{update:function(t){return e.$emit("update",t)}}}),t("AdditionalInfoEdit",{staticClass:"space--mr-3",attrs:{info:e.info},on:{update:function(t){return e.$emit("update",t)}}}),t("AdditionalInfoDelete",{attrs:{info:e.info},on:{update:function(t){return e.$emit("update",t)}}})]:e._e()],2)}),[],!1,null,null,null);t.default=I.exports},937:function(e,t,i){"use strict";const a=i(104).b.create("batchGQL");t.a={props:{info:{type:Object,default:()=>({})}},computed:{ready(){return!a.isLoading()&&void 0!==this.info.liked}}}}}]);