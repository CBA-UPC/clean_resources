/**
 * @package Adman System
 * @author  DSerov <dserov@gmail.com>
 * @version 0.0.4
 *
 *
 * –°–æ–∑–¥–∞–µ—Ç –∫—É–∫–∏: __ref_sub_id, __device_info, __page_meta
 *
 * –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π:
 * 0.0.1 - 2022-02-21 –ù–∞—á–Ω–µ–º, –ø–æ–∂–∞–ª—É–π
 * 0.0.2 - 2022-05-18 –î–æ–±–∞–≤–ª–µ–Ω—ã –±–∏–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏–Ω–∫–ª—é–¥–∞
 */

/**
 * –§—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ –ª—é–±–æ–º –∏–∑ –º–æ–¥—É–ª–µ–π
 * 
 * @package Adman System
 * @author  Fred Melnichuk <fredeveloper@gmail.com>
 * @author  Sergey Gorban <serg.ck.ua@gmail.com>ypeof define&&define.amd?defintion(uastring){parser.setUA(uastring);var result=parser.getResult();for(var prop in result){$.ua[prop]=result[prop]}}}})(typeof window==="object"?window:this);

/**
 * @file postscribe
 * @description Asynchronously write javascript, even with document.write.
 * @version v2.0.8
 * @see {@lnctioe.existy=r,e.isFunction=n,e.each=o,e.eachKey=i,e.defaults=a,e.toArray=s,e.last=u,e.isTag=c,e.isScript=l,e.isStyle=p}])});
/*!
  * $script.eof module!="undefinednload=i[o]=null,u=1,l[n]=2,r()},i.async=1,i.src=h?n+(n.indexOf("?")===-1?"?":"&")+h:n,t.insertBefore(i,t.lastChild)}var e=document,t=e.getElementsByTagName("u={},a={},f={},l={},c,h;return v.gtion(e,ton(e){uion(e){return u[e]})?t():!function(e){f[e]=f[e]||[],f[e][i](t),n&&n(r)}(e.join("|")),v},v.done=function(e){v([null],e)},v})


/**
 * –§—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ –ª—é–±–æ–º –∏–∑ –º–æ–¥—É–ª–µ–π
 * 
 * @package Adman System
 * @author  Fred Melnichuk <fredeveloper@gmail.com>
 * @author  Sergey Gorban <serg.ck.ua@gmail.com>
 * @author  DSerov <dserov@gmail.com>
 * @version 0.1.35
 */

/**
 * –†–∞–∑–±–∏–≤–∞–µ—Ç query-—Å—Ç—Ä–æ–∫—É url –≤ –æ–±—ä–µ–∫—Ç. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –ª–∏–±–æ –æ–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
 * –í–Ω–∏–º–∞–Ω–∏–µ! –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤—ã –≤ url!
 *
 * @param url - url –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, —Ç–æ –±–µ—Ä–µ—Ç—Å—è location.href
 * @param name - –µ—Å–ª–∏ –∑–∞–¥–∞–Ω–æ, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
 * @param decode - –µ—Å–ª–∏ true, —Ç–æ —Å—Ç—Ä–æ–∫–∞ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è, –∏–Ω–∞—á–µ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è, –∫–∞–∫ –µ—Å—Ç—å
 * @return {{}}
 */
function getUrlParameters(url, name, decode) {
  let search = location.search.substr(1);
  if (url) {
    if (url.indexOf('?') === -1) {
      search = '';
    } else {
      search = url.substr(url.indexOf('?') + 1);
    }
  }

  const queryParams = search.split('&').reduce(function(obj, keyVal) {
    if (keyVal === '') {
      return {};
    }
    let value = keyVal.split('=');
    if (value[1] === undefined) {
      value[1] = '';
    }
    obj[value[0]] = decode ? decodeURIComponent(value[1].replace(/\+/g, ' ')) : value[1];
    return obj;
  }, {});

  return name ? queryParams[name] : queryParams;
}

//--- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É–∫–æ–≤
function setAdmanCookie(name, value, options)
{
  //--- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–∫–∏ 400 (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫—É–∫)
  if (document.cookie.length > 8000) {
    debug_log('Cookie error, name: ' + name);
    return;
  }

  options = Object.assign({
    SameSite : 'Lax',
  }, options || {});

  let expires = options.expires;

  if (typeof expires == "number" && expires)
  {
    let d = new Date();
    d.setTime(d.getTime() + expires * 1000);
    expires = options.expires = d;
  }

  if (expires && expires.toUTCString)
    options.expires = expires.toUTCString();

  if (options.domain) {
    options.domain = options.domain.replace(/^www\./i, '');
  }

  value = encodeURIComponent(value);

  let updatedCookie = name + "=" + value;

  for (let propName in options)
  {
    updatedCookie += "; " + propName;
    let propValue = options[propName];

    if (propValue !== true)
      updatedCookie += "=" + propValue;
  }

  document.cookie = updatedCookie;
}

//--- —á—Ç–µ–Ω–∏–µ –∫—É–∫–æ–≤
function getAdmanCookie(name)
{
  var result = 0;
  
  try {
    var matches = document.cookie.match(new RegExp(
        "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    ));
    
    if (matches)
      result = decodeURIComponent(matches[1]);
  } catch (e){}
  
  return result;
} 

//--- —á—Ç–µ–Ω–∏–µ –∫—É–∫–æ–≤
function getAdmanCookieNullDefault(name)
{
	var result = null;
	
	try {
		var matches = document.cookie.match(new RegExp(
				"(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
		));
		
		if (matches)
			result = decodeURIComponent(matches[1]);
	} catch (e){}
	
	return result;
} 

//--- —É–¥–∞–ª–µ–Ω–∏–µ –∫—É–∫–æ–≤
function clearAdmanCookie(name)
{
	setAdmanCookie(name, '', {
		expires : -1,
		path : '/',
		domain : location.hostname
	});
}

// —É–¥–∞–ª–µ–Ω–∏–µ –∫—É–∫ –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—es[i].trim();
    if (cookie) {
      let cookieName = cookie.split('=')[0];
      if (cookieName && regexPattern.test(cookieName)) {
        clearAdmanCookie(cookieName);
      }
    }
  }
}

//--- –ø–∞—Ä—Å–∏—Ç —Å—Å—ã–ª–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç domain
function isEqualDomains(domain1, domain2)
{
  //console.debug('getDomainFromURL('+domain1+') == getDomainFromURL('+domain2+') : '+getDomainFromURL(domain1)+' == '= '';
  
  try{
    if (url.match(/(http[s]*:)*\/\//) == null)
      url = '//'+url;
  }catch(e){}
  
  try{
    host_parser.href = url;
    result = host_parser.hostname.replace(/^www./, '').toLowerCase();
  }catch(e){}
  
  return result;
}

//--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
function prepareUrl(url){

  //- –∞–≤—Ç–æ–ø–ª–µ–π–Ω—ã–µ —à—Ç—É–∫–∏ –ø–æ–¥—á–∏—â–∞–µ–º
  url = url.replace(/[&]*play=true/ig, '');

  //- –≤ –∫–æ–Ω—Ü–µ —Ä–∞–∑–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—á–∏—â–∞–µ–º
  url = url.replace(/[\/?#&]+$/, '');

  //- –≤—Å–µ —è–∫–æ—Ä—è
  url = url.replace(/#.*/, '');

  //- –≤ –∫–æ–Ω—Ü–µ —É–±–∏—Ä–∞–µ–º —Å–ª–µ—à
  url = url.replace(/\/$/, '');

  return url;
}	

//--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –≤ –ø–æ–ª–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ 
function prepareUrlToFull(url)
{
	url = new URL(url, window.location.href);
	url = url.href;
	
	return prepareUrl(url);
}

//--- –¥–µ–±–∞–≥ —Ä–µ–∂–∏–º
function is_debug_mode(){var e=!1;try{e="1"==getAdmanCookie("_debug")||"1"==getAdmanCookie("d")||window.location.href.indexOf("/ai-tst/")!=-1||'9000000000'=='9000000000'}catch(e){}return e}
function is_debug_mode_extended(){var e=!1;try{e="1"==getAdmanCookie("_debug_extended")||"1"==getAdmanCookie("de")}catch(e){}return e}
if (typeof debug_log !== 'function') {
  if (is_debug_mode_extended()) {
    // add log interface
    let button_id = 'btn-log-id';
    let div_id = 'div-log-id';
    let cmd_id = 'cmd-id';

    if (!document.getElementById(div_id)) {
      document.body.insertAdjacentHTML('afterbegin', '<div id="' + div_id + '" style="height: calc(100vh - 27px); display: none; overflow: scroll;"></div>');
    }

    if (!document.getElementById(button_id)) {
      document.body.insertAdjacentHTML('afterbegin', '<button id="' + button_id + '" style="font-size: 20px;">show log</button>');
      document.getElementById(button_id).addEventListener('click', function () {
        let div = document.getElementById(div_id);
        if (div.style.display === 'none') {
          div.style.display = 'block';
        } else {
          div.style.display = 'none';
        }
      })
    }

    if (!document.getElementById(cmd_id)) {
      document.body.insertAdjacentHTML('afterbegin', '<button id="' + cmd_id + '" style="font-size: 20px;">Run command</button>');
      document.getElementById(cmd_id).addEventListener('click', function () {
        let cmd = prompt();
        debug_log('cmd: ' + cmd);
        let result;
        try {
          result = eval(cmd);
        } catch (e) {
          result = e;
        }
        debug_log(result);
        alert(result);
      });
    }

    debug_log = function (e) {
      try {
        let this_line = thisLine();
        document.getElementById(div_id).insertAdjacentHTML('afterbegin', `<pre style="white-space:pre-wrap;font-size:20px;
          border-bottom:2px solid black;"><span style="color:#009900;">${this_line}</span><br>${JSON.stringify(e, null, 2)}</pre>`);
        console.debug('%c %s', 'color:#009900;', this_line, e);
      } catch (e) {}
    }
  } else {
    debug_log = function (e, prefix) {
      try {
        if (!is_debug_mode()) {
          return;
        }
        const consolePrepend = function(prefix) {
          const CLASSIC_LOG_PATTERN = /(edge|xbox|msie|trident)/i;
          if (navigator && navigaor.userAgent)) {
            // browsers with no console log styling cap const consoleStyle = 'color: white; background-color: #00ACC1; padding:1px 3px; border-radius: 3px';
        prefix = (prefix || '');
        if (typeof e === 'string') {
          console.log(`${consolePrepend(prefix)} %s\n   %c %s`, consoleStyle, 'color:#009900', thisLine(), 'font-weight:700', e);
        } else {
          console.log(`${consolePrepend(prefix)} %s\n   %c %o`, consoleStyle, 'color:#009900', thisLine(), 'font-weight:700', e);
        }
      } catch (e) {}
    };
  }
}

String.prototype.stripSlashes=function(){return this.replace(/\\(.)/mg, "$1")};

// Current Script
document.currentScript = document.currentScript || (function() {
  const scripts = document.getElementsByTagName('script');
  return scripts[scripts.length - 1];
})();

function thisLine() {
  try {
    throw new Error();
  } catch (e) {
    let line = e.stack.split("\n")[3];
    if (typeof line === 'string') {
      line = line.trim();
    }
    return line;
  }
}

/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞, —Å—Ç—Ä–µ–ª—è—Ç—å –ª–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç–µ, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–ª–∞—Å—Å–æ–≤ —Ñ–æ—Ä—Å–∞ –∏ –∏–≥–Ω–æ—Ä–∞.
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–ø–∞–Ω–¥–µ—Ä–µ, –º–∞—Å—Ç–µ—Ä—Å—Ç–∏—à–µ–ª–µ –∏ –ø–æ—Å—Ç–∏—à–µ–ª–µ.
 * true - –º–æ–∂–Ω–æ —Å—Ç—Ä–µ–ª—è—Ç—å (—Ñ–æ—Ä—Å –∫–ª–∞—Å—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ –∏–≥–Ω–æ—Ä–∞)
 *
 * @param node
 * @param force_class_list —Å—Ç—Ä–æ–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏
 * @param ignore_class_list —Å—Ç—Ä–æ–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏
 * @return {boolean}
 */
function checkForceIgnoreClassForNode(node, force_class_list, ignore_class_list) {
  try{
    //--- –µ—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ä—Å –∫–ª–∞—Å—Å–∞ —É —Å–∞–º–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –∏–ª–∏ –µ–≥–æ –ø—Ä–µ–¥–∫–æ–≤ (—Ä–æ–¥–∏—Ç–µ–ª–µ–π)
    if (force_class_list.length > 0 && isParentsContainsClass(node, force_class_list)) {
      return true;
    }

    if (ignore_class_π) - —Å—Ç—Ä–µ–ª—è–µ–º
    return !isParentsContainsClass(node, ignore_class_list);
  }catch(e){}

  // –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–µ—Ä–Ω–µ–º false
  return false;
}

/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —É–∑–µ–ª, –∏–ª–∏ –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—å —Å–æ–¥–µ—Ä–∂–∞—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ –∫–ª–∞—Å—Å–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ –∫–ª–∞—Å—Å–æ–≤,
 * –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∏–∑ —Å–µ–±—è —Å—Ç—Ä–æ–∫—É –∑–Ω–∞—á–µ–Ω–∏–π, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏
 *
 * @param node
 * @param class_list
 * @return {boolean}
 */
function isParentsContainsClass(node, class_list)
{
  if (!node || !class_list) {
    debug_log({
      title: 'isParentsContainsClass error!',
      node: node,
      class_list: class_list
    });

    return false;
  }
  else {
    let classes = class_list.split(' ').filter(class_name => class_name.length > 0 && node.closest('.' + class_name));
    return classes.length > 0;
  }
}

/**
 * –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –æ–¥–∏–Ω-–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
 *
 * @param func
 * @param timeout
 * @return {Function}
 */
function debounce(func, timeout = 300){
  let timer;
  return (...args) => {
    clearTimeout(timer);
    timer = setTimeout(() => { func.apply(this, args); }, timeout);
  };
}

//--- –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–∞–π—Ç –≤ —Ä–µ—Ñ–µ—Ä–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö
function in_referrer_websites(site, data, window_location_href)
{
	if (window_location_href.length == 0)
		window_location_href = window.location.href;
	
	var result = false;
	var current_domain = getDomainFromURL(window_location_href);
	
	site = getDomainFromURL(site);
	
	if (site.length == 0)
		return false;
	
	try{
		
		for (var i in data)
		{
			if (data[i].source_domains.indexOf(current_domain) == -1)
				continue;
			
			if (data[i].referrer_domains.indexOf(site) !== -1)
			{
				result = true;
				break;
			}
		}
		
	}catch(e){}
	
	return result;			
}

//--- —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤—É —ç–¥–±–ª–æ–∫–∞ –≤ —Å—Å—ã–ª–∫—É, –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —ç–¥–±–ª–æ–∫ –≤–∫–ª—é—á–µ–Ω
function adblockUrlWrapper(url)
{
	if (isAdblock())
		url = url.replace(/\&d\=0/, '&d=1');
	
	return url;		
}

//--- –¥–µ—Ç–µ–∫—Ç–æ—Ä —ç–¥–±–ª–æ–∫
function isAdblock()
{
  if (window.adblock_detected == undefined)
  {
    var adblock_detected = false;
    
    try {
      var testDomEl = document.createElement('iframe'),
          randomNum = Math.floor(Math.random() * (10000 - 123 + 1)) + 123,
          protocol = window.location.protocol,
          id = 'adsbox_ex_' + randomNum;

      testDomEl.setAttribute('height', "1px");
      testDomEl.setAttribute('width', "1px");
      testDomEl.setAttribute('id', id);
      testDomEl.setAttribute('class', 'adsBox pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links banner ad-footer ad ads');
      testDomEl.setAttribute('style', "width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; box-sizing: content-box !important; border-width: 0px !important;");

      var testScript = document.createElement('script');
      testScript.src = protocol + "//ads.exoclick.com/ads.js";

      /*
      testScript.onerror = function () {
        adblock_detected = true;
      };
      */

      document.body.appendChild(testDomEl);
      document.head.appendChild(testScript);

      if (testDomEl.style.display === "none" || testDomEl.style.display === "hidden" || testDomEl.style.visibility === "hidden" || testDomEl.offsetParent === null || testDomEl.offsetHeight === 0 || testDomEl.offsetLeft === 0 || testDomEl.offsetTop === 0 || testDomEl.offsetWidth === 0 || testDomEl.clientHei = true;
      }

      /*
      try {
        console.log('------------');
        console.log('timeout = ', timeout);
        console.log('testDomEl.style.display = ', testDomEl.style.display);
        console.log('testDomEl.style.visibility = ', testDomEl.style.visibility);
        console.log('testDomEl.offsetParent = ', testDomEl.offsetParent);
        console.log('testDomEl.offsetHeight = ', testDomEl.offsetHeight);
        console.log('testDomEl.offsetLeft = ', testDomEl.offsetLeft);
        console.log('testDomEl.offsetTop = ', testDomEl.offsetTop);
        console.log('testDomEl.offsetWidth = ', testDomEl.offsetWidth);
        console.log('testDomEl.clientHeight = ', testDomEl.clientHeight);
        console.log('testDomEl.clientWidth = ', testDomEl.clientWidth);
        console.log('------------');
      }catch (c){}
      */   document.head.removeChild(testScript);

      //--- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –¥—Ä—É–≥–∏—Ö
      window.adblock_detected = adblock_detected;

      /*
      try {
        console.log('adblock_detected timeout '+timeout+' = ', adblock_detected);
      }catch (c){}
      */
    }catch (c){}
  }

  return window.adblock_detected ? true : false;
}

// –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤
function intersectArrays(array1, array2) {
  return array1.filter(function (item) {
    return item && array2.indexOf(item) > -1;
  });
}

// referral-detector-class
(function (window, undefined) {
  "use strict";
  var RefDetector = function (identy, cookie_caption, referrer_capped) {
    if (!(this instanceof RefDetector)) {
      return new RefDetector(identy, cookie_caption, referrer_capped);
    }

    this.clearPageCounterCookie = function () {
      // PageCounter
      clearAdmanCookie('__ctr_' + this.identy + '_pgs'); // —Å—á–µ—Ç—á–∏–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
      clearAdmanCookie('__ctr_' + this.identy + '_mrk'); // —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤
      clearAdmanCookie('__ctr_' + this.identy + '_mrk_shifted'); // —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤
      clearAdmanCookie(this.identy + '_nc'); // –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø–æ–¥—Å—á–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∫–ª–∏–∫–æ–≤

      // PageClickCounter
      clearAdmanCookie('__ctrp_'+this.identy+'_page_clicked');
      clearAdmanCookie('__ctrp_'+this.identy+'_pages_potential');
    };

    this.set_params = function (is_desktop, device_type) {
      this.is_desktop = is_desktop;
      this.device_type = device_type;
    };

    this.check_by_cookie = function (referral_data) {
      return getAdmanCookie(this.cookie_key) != null &&
        getAdmanCookie(this.cookie_key) != 0 &&
        (
          referral_data.referral_key == getAdmanCookie(this.cookie_key) ||
          this.in_referrer_domains(getAdmanCookie(this.cookie_key), referral_data.referral_domains_data, this.window_location_href)
        )
    };

    this.check_by_url = function (referral_data) {
      //--- –∏—â–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–∞–π—Ç–∞
      var ref_dom_data = this.get_ref_data_for_current_domain(referral_data.referral_domains_data);
      var count_from_list_only = 0;
      if (ref_dom_data !== null) {
        count_from_list_only = ref_dom_data.count_from_list_only;
      }

      return this.referrer_site.length > 0 &&
        referral_data.referral_key != '' &&
        this.window_location_href.indexOf(referral_data.referral_key) !== -1 &&
        (
          count_from_list_only === 0
          ||
          ref_dom_data.default_domains.indexOf(this.referrer_site) !== -1
        );
    };

    this.check_by_site = function (referral_data) {
      return this.referrer_site.length > 0 && this.in_referrer_domains(this.referrer_site, referral_data.referral_domains_data);
    };

    //--- –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–∞–π—Ç –≤ —Ä–µ—Ñ–µ—Ä–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö
    this.in_referrer_domains = function (site, data) {
      var result = false;

      if (site.length === 0)
        return false;

      try{
        for (var i in data)
        {
          if (data[i].source_domains.indexOf(this.current_domain) === -1) {
            continue;
          }

          if(data[i].referral_websites_use_defaults) {
            if (data[i].default_domains.indexOf(site) !== -1)
            {
              result = true;
              break;
            }
          } else {
            if (data[i].referrer_domains.indexOf(site) !== -1)
            {
              result = true;
              break;
            }
          }
        }
      }catch(e){}
      return result;
    };

    //--- –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–∞–π—Ç –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º —Å–ø–∏—Å–∫–µ
    this.get_ref_data_for_current_domain = function (data) {
      var result = null;

      try{

        for (var i in data) {
          if (data[i].source_domains.indexOf(this.current_domain) !== -1) {
            result = data[i];
            break;
          }
        }

      }catch(e){}

      return result;
    };

    this.save_cookie = function (referral_key) {
      //--- —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
      var cookie_value = getAdmanCookieNullDefault(this.cookie_key);
      if (cookie_value === null || cookie_value.length == 0) {
        if (this.referrer_site && ! (referral_key != '' && this.window_location_href.indexOf(referral_key) !== -1)) {
          setAdmanCookie(this.cookie_key, this.referrer_site, {
            expires : this.referrer_capped,
            path : '/',
            domain : location.hostname
          });
        }
        else {
          setAdmanCookie(this.cookie_key, referral_key, {
            expires : this.referrer_capped,
            path : '/',
            domain : location.hostname
          });
        }
      }
    };

    this.check_reset_clicks_counter = function() {
      let referrer_site = getDomainFromURL(document.referrer);
      if ((referrer_site != '' && referrer_site != this.current_domain)) {
        //--- –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å counter_identy –≤ counter (—Å—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü)
        this.clearPageCounterCookie();
      }
    };

    this.apply_one_key = function (VR_PARAMS_VR, key, referral_data) {
        VR_PARAMS_VR[key.replace('VAR_', 'VR_').replace('_VAR', '_VR')] = referral_data[key];
    };

    this.check_referral = function (VR_PARAMS_VR, VR_REFERRALS_PARAMS_VR) {
      for (var i = 0; i < VR_REFERRALS_PARAMS_VR.length; i++) {
        try{
          var referral_data = VR_REFERRALS_PARAMS_VR[i];
          var referrer_applied_by_cookie = false, referrer_applied_by_url = false, referrer_applied_by_site = false;
          if (
            (referrer_applied_by_cookie = this.check_by_cookie(referral_data))
            ||
            (referrer_applied_by_url = this.check_by_url(referral_data))
            ||
            (referrer_applied_by_site = this.check_by_site(referral_data))
          ) {
            //--- –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–± —Å–∞–π—Ç —Å–æ–≤–ø–∞–¥–∞–ª —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º–∏ —Å–∞–π—Ç–∞–º–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
            if (referral_data.referral_sites.indexOf(this.current_domain) == -1) {
              continue;
            }

            //--- –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ —Å–∞–π—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω —á—Ç–æ–±—ã –≤–µ—Ä—Å–∏—è —Å–∞–π—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–ª–∞ —Å –¥–µ–≤–∞–π—Å–æ–º
            else {
              if (referral_data.referral_sites_version[this.current_domain] && referral_data.referral_sites_version[this.current_domain] !== 'all') {
                if (
                  (this.ignore_site_version_check_cookie || !getAdmanCookie('__force_sv'))
                  &&
                  (
                    (referral_data.referral_sites_version[this.current_domain] == 'desktop' && !this.is_desktop) ||
                    (referral_data.referral_sites_version[this.current_domain] == 'mobile' && this.is_desktop)
                  )
                )
                {
                  continue;
                }
              }
            }

            //--- –ø—Ä–æ–≤–µ—Ä—è–µ–º device detect
            if (referral_data.enable_mobile !== undefined && referral_data.enable_desktop !== undefined && referral_data.enable_tablet !== undefined)
            {
              //--- –µ—Å–ª–∏ –≤—Å–µ –¥–µ–≤–∞–π—Å—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É
              if (!(referral_data.enable_mobile == '1' && referral_data.enable_desktop == '1' && referral_data.enable_tablet == '1')) {
                if (
                  (this.device_type == 'desktop' && referral_data.enable_desktop != '1') ||
                  (this.device_type == 'mobile' && referral_data.enable_mobile != '1') ||
                  (this.device_type == 'tablet' && referral_data.enable_tablet != '1')
                )
                {
                  debug_log(this.cookie_caption + ', REF: '+referral_data.referral_key+' decline by device policy. ('+device_type+')');
                  continue;
                }
              }
            }

            //--- –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞
            if (referral_data.referral_enabled == 1) {
              for (var key in referral_data)
              {
                try {
                  if (referral_data.hasOwnProperty(key)) {
                    this.apply_one_key(VR_PARAMS_VR, key, referral_data);

                    // update capped
                    if (key.substr(-11) === '_CAPPED_VAR' && !isNaN(parseInt(referral_data[key]))) {
                      this.referrer_capped = parseInt(referral_data[key]);
                    }
                  }
                } catch (e) {}
              }
            }
            else {
              this.referrer_enabled = false;
            }

            //--- —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            this.save_cookie(referral_data.referral_key);

            if (Boolean(referral_data.reset_clicks_counter) === true) {
              this.check_reset_clicks_counter();
            }

            this.referrer_applied = true;

            debug_log({
              title: this.cookie_caption + ' –≤—ã–±—Ä–∞–Ω —Ä–µ—Ñ–µ—Ä–∞–ª',
              by: {
                cookie: referrer_applied_by_cookie,
                url: referrer_applied_by_url,
                site: referrer_applied_by_site
              },
              data: referral_data
            }, this.identy.toUpperCase());

            break;
          }
        }catch(e){}
      }

      debug_log({
        title: this.cookie_caption + ' —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞',
        referrer_applied: this.referrer_applied,
        final_data: VR_PARAMS_VR
      });
    };

    this.readSystemCookie = function() {
      //--- –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–º –∏–Ω–∫–ª—É–¥–æ–º
      try {
        if (getAdmanCookie('_ref_main') == 1 && md5(prepareUrl(window.location.href)) != getAdmanCookie('_ref_main-current_href_md5'))
        {
          this.window_location_href = getAdmanCookie('_ref_main-current_href');
          this.referrer_site = getDomainFromURL(getAdmanCookie('_ref_main-referrer_site'));
        } else {
          if ((this.referrer_site = getDomainFromURL(this.referrer_site)).length > 0)
          {
            if (isEqualDomains(this.referrer_site, window.location.href))
              this.referrer_site = '';
          }
        }
      } catch (e) {}
    };

    // true, –µ—Å–ª–∏ –µ—Å–ª–∏ –Ω–∞–¥–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—É–∫—É __force_sv (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–ø–∞–Ω–¥–µ—Ä–µ –∏ –ø—Ä–µ—Ä–æ–ª–ª–µ)
    this.setIgnoreSiteVersionCheckCookie = function(ignore_site_version_check_cookie) {
      this.ignore_site_version_check_cookie = ignore_site_version_check_cookie;
    };

    this.referrer_applied = false;
    this.referrer_enabled = true;
    this.identy = identy;
    this.cookie_key = '__ref-' + identy;
    this.cookie_caption = cookie_caption;
    this.referrer_capped = referrer_capped;
    this.is_desktop = true;
    this.device_type = 'desktop';
    this.referrer_site = document.referrer;
    this.window_location_href = window.location.href;
    this.readSystemCookie();
    this.current_domain = getDomainFromURL(this.window_location_href);
    this.ignore_site_version_check_cookie = true;

    return this;
  };
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = RefDetector;
    }
    exportse.amd) {
      define("ref-detector-js", [], function () {
        return RefDetector;
      })
    } else {
      window.RefDetector = RefDetector;
    }
  }
})(typeof window === "object" ? window : this);

// page-counter-class
(function (window, undefined) {
  "use strict";
  var PageCounter = function (identy, capp_seconds) {
    if (!(this instanceof PageCounter)) {
      return new PageCounter(identy, capp_seconds);
    }

    this.identy = identy;
    this.capp_seconds = capp_seconds;	  	      //- –≤–µ–ª–∏—á–∏–Ω–∞ –∫–∞–ø–ø–∞
    this.clicks = ''; 						      //- —Ü–µ–ø–æ—á–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
    this.fire_on_marked = false; 	      //- –ø–æ–∑–≤–æ–ª—è—Ç—å —Å—Ç—Ä–µ–ª—è—Ç—å –Ω–∞ –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö

    //--- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.init = function() {
      try{
        let current_page_hashe;
        if (this.getInitiedPages().indexOf((current_page_hashe = this.getUrlHashe(this.getCurrentPage()))) === -1)
        {
          this.addInitiedPage(current_page_hashe);
        }
      }catch(e){}
    };

    //--- –∑–∞–¥–∞–µ—Ç –≤–µ–ª–∏—á–∏–Ω—É –∫–∞–ø–ø–∞
    this.setCappSeconds = function(seconds) {
      t- –∑–∞–¥–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –∏–Ω–¥–µ–∫—Å–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–∞ –∫icks_string) {
      this.clicks = clicks_string;
      return thi—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–æ –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
      let value = '', val;

      if ((val = getAdmanCookie('__ctr_'+this.identy+'_mrk')) != 0 && val.length > 0)
        value = val;

      setAdmanCookie('__ctr_'+this.identy+'_pgs', value, {
        expires : this.capp_seconds,
        path : '/',
        domain : location.hostname
      });
      return this;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç index —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤
    this.getUrlIndex = function(url) {
      return this.getInitiedPages().indexOf(this.getUrlHashe(url))
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    this.isAllowFireOnThisPage = function() {
      let allow_fire = true;

      //--- —Å–º–æ—Ç—Ä–∏–º –Ω–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤—É –ø–æ –∫–ª–∏–∫–∞–º
      try{
        let clicks = this.clicks.replace(/\s/g,'').split(',');

        //--- –µ—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ –∑–∞–¥–∞–Ω–∞, —Å–ª–µ–¥—É–µ–º –µ–π
        if (clicks.length)
        {
          //--- –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
          if (clicks.indexOf((this.getCurrentPageInd

      try{
        //--- –∑–∞–ø—Ä–µ—â–∞–µ–º –≤—ã—Å—Ç—Ä–µ–ª –Ω–∞ –ø–æ–º–µ—á–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        if (this.fire_on_marked == false && this.isMarkedCurrentPage())
          allow_fire = false;
      }catch(e){}

      return allow_fire;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–µ—á–µ–Ω–∞
    this.isMarkedPage = function(url) {
      return this.getMarkedPages().indexOf(this.getUrlHashe(this.prepareUrl(url))) !== -1;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–µ—á–µ–Ω–∞
    this.isMarkedCurrentPage = function() {
      return this.isMarkedPage(this.getCurrentPage());
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç index —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤
    this.getCurrentPageIndex = function() {
      return this.getUrlIndex(this.getCurrentPage());
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.getCurrentPage = function() {
      return this.prepareUrl(window.location.href);
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.prepareUrl = function(url) {

      //- –∞–≤—Ç–æ–ø–ª–µ–π–Ω—ã–µ —à—Ç—É–∫–∏ –ø–æ–¥—á–∏—â–∞–µ–º
      url = url.replace(/[&]*play=true/, '');

      //- –≤ –∫–æ–Ω—Ü–µ —Ä–∞–∑–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—á–∏—â–∞–µ–º
      url = url.replace(/[\/?#&]+$/, '');

      //- –≤—Å–µ —è–∫–æ—Ä—è
      url = url.replace(/#.*/, '');

      //- –≤ –∫–æ–Ω—Ü–µ —É–±–∏—Ä–∞–µ–º —Å–ª–µ—à
      url = url.replace(/\/$/, '');

      return url;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ö–µ—à —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.getUrlHashe = function(url) {
      return md5(url);
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    this.getMarkedPages = function() {
      let pages = new Array(), data;

      try{
        if ((data = getAdmanCookie('__ctr_'+this.identy+'_mrk')).length > 0)
          pages = data.split(',');
      }catch(e){}

      return pages;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–º–µ—â–µ–Ω–Ω—ã—Ö –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    this.getMarkedPagesShifted = function(){
      let pages = new Array();

      try{
        pages = getAdmanCookie('__ctr_'+this.identy+'_mrk_shifted').split(',');
      }catch(e){}

      return pages;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    this.getInitiedPages = function() {
      let pages = new Array(), data;

      try{
        if ((data = getAdmanCookie('__ctr_'+this.identy+'_pgs')).length > 0)
          pages = data.split(',');
      }catch(e){}

      return pages;
    };

    //--- –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    this.markCurrentPage = function() {
      this.markPage(this.getUrlHashe(this.getCurrentPage()));
    };

    //--- –¥–æ–±–∞–≤–ª—è–µ—Ç—Ç—Ä–∞–Ω–∏—Ü—É
    this.markCurrentPageShifted = function(){¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    thi–∫–ª—é—á–∞–µ–º –ø–æ–¥—Å—á–µ—Ç –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
      if (getAdmanCookie(this.identy+'_nc'))
        return this;

      let pages = this.getMarkedPages(),
          last_page = Math.max.apply(Math, this.clicks.replace(/\s/g,'').split(','));

      if (pages.indexOf(hash) == -1)
      {
        pages.push(hash);

        setAdmanCookie('__ctr_'+this.identy+'_mrk', pages.join(','), {
          expires : this.capp_seconds,
          path : '/',
          domain : location.hostname
        });

        //--- –æ—Ç–º–µ—á–∞–µ–º —Ñ–ª–∞–≥ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–¥—Å—á–µ—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
        if (pages.length >= last_page) {
          setAdmanCookie(this.identy+'_nc', 1, {
            expires : this.capp_seconds,
            path : '/',
            domain : location.hostname
          });
        }
      }

      return this;
    };

    //--- –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    this.markPageShifted = function(hash){
      let pages = this.getMarkedPagesShifted();
      pages.push(hash);

      setAdmanCookie('__ctr_'+this.identy+'_mrk_shifted', pages.join(','), {
        expires : this.capp_seconds,
        path : '/',
        domain : location.hostname
      });

      return this;
    };

    //--- –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    this.addInitiedPage = function(hash) {
      //--- –∫–æ–≥–¥–∞ —Å–ø–æ—Ç –æ—Ç—Å—Ç—Ä–µ–ª—è–ª –æ—Ç–∫–ª—é—á–∞–µ–º –ø–æ–¥—Å—á–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
      if (getAdmanCookie(this.identy+'_nc'))
        return this;

      let pages = this.getInitiedPages();
      pages.push(hash);

      setAdmanCookie('__ctr_'+this.identy+'_pgs', pages.join(','), {
        expires : this.capp_seconds,
        path : '/',
        domain : location.hostname
      });

      return this;
    };

    this.init();

    return this;
  };
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = PageCounter;
    }
    exports.PageCounter = PageCounter;
  } else {
    if (typeof define === 'function' && define.amd) {
      define("page-counter-js", [], function () {
        return PageCounter;
      })
    } else {
      window.PageCounter = PageCounter;
    }
  }
})(typeof window === "object" ? window : this);

// —Å—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
// page-click-counter-class
(function (window, undefined) {
  "use strict";
  var PageClickCounter = function (identy, capp_seconds) {
    if (!(this instanceof PageClickCounter)) {
      return new PageClickCounter(identy, capp_seconds);
    }

    this.identy = identy;
    this.capp_seconds = capp_seconds;	  //- –≤–µ–ª–∏—á–∏–Ω–∞ –∫–∞–ø–ø–∞
    this.clicks = ''; 						      //- —Ü–µ–ø–æ—á–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
    this.fire_on_marked = false; 	      //- –ø–æ–∑–≤–æ–ª—è—Ç—å —Å—Ç—Ä–µ–ª—è—Ç—å –Ω–∞ –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö


    //--- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.init = function(identy){
      this.identy = identy;
    };

    //--- –∑–∞–¥–∞–µ—Ç –≤–µ–ª–∏—á–∏–Ω—É –∫–∞–ø–ø–∞
    this.setCappSeconds = function(seconds){
      this.capp_seconds = parseInt(seconds);
      return this;
    };

    //--- –∑–∞–¥–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –∏–Ω–¥–µ––º–æ–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å
    this.setClicks = function(clicks_string)   //--- –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–µ–∫—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    this.addPageToPotential = function(url){
      let full_url = prepareUrlToFull(url);
      let hash = this.getUrlHashe(full_url);

      if (full_url == prepareUrlToFull(window.location.href))
      {
        debug_log({
          title: this.identy+'. –ù–µ –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ, —Ç–∞–∫ –∫–∞–∫ —Å—Å—ã–ª–∫–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π.',
          url: full_url,
          hash: hash
        });

        return this;
      }

      debug_log({
        title: this.identy+'. –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.',
        url: full_url,
        hash: hash
      });

      let pages = this.getPotentialPages();

      if (pages.indexOf(hash) === -1)
      {
        pages.push(hash);

        pages = pages.slice(Math.max(pages.length - 64, 0));

        setAdmanCookie('__ctrp_'+this.identy+'_pages_potential', pages.join(','), {
          expires : this.capp_seconds,
          path : '/',
          domain : location.hostname
        });
      }

      return this;
    };

    //--- –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –∫–ª–∏–∫–Ω—É—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–µ–∫—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    this.addPageToClicked = function(url){
      let full_url = prepareUrlToFull(url);
      let hash = this.getUrlHashe(full_url);

      if (full_url == prepareUrlToFull(window.location.href))
      {
        debug_log({
          title: this.identy+'. –ù–µ –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–ª–∏–∫–Ω—É—Ç—ã–µ, —Ç–∞–∫ –∫–∞–∫ —Å—Å—ã–ª–∫–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π.',
          url: full_url,
          hash: hash
        });

        return this;
      }

      debug_log({
        title: this.identy+'. –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–ª–∏–∫–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.',
        url: full_url,
        hash: hash
      });

      let pages = this.getClickedPages();

      if (pages.indexOf(hash) === -1)
      {
        pages.push(hash);

        pages = pages.slice(Math.max(pages.length - 64, 0));

        setAdmanCookie('__ctrp_'+this.identy+'_pages_clicked', pages.join(','), {
          expires : this.capp_seconds,
          path : '/',
          domain : location.hostname
        });
      }

      return this;
    };

    //--- —É–¥–∞–ª—è–µ—Ç –∏–∑ —Å—Ç–µ–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–µ–∫—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    this.removePageFromPotential = funct     let hash = this.getUrlHashe(full_url);

      debug_log({
        title: this.identy+'. –£–¥–∞–ª—è–µ–º –∏–∑ –ø–æ—Ç–µ–Ω   });

      let pages = this.getPotentialPages();

      if (pages.indexOf(hash) !== -1)
      {
        pages[pages.indexOf(hash)] = '0';

        setAdmanCookie('__ctrp_'+this.identy+'_pages_potential', pages.join(','), {
          expires : this.capp_seconds,
          path : '/',
          domain : location.hostname
        });
      }

      return this;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    this.getPotentialPages = function(){
      let pages = new Array();

      try{
        pages = getAdmanCookie('__ctrp_'+this.identy+'_pages_potential').split(',');
      }catch(e){}

      return pages;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–ª–∏–∫–Ω—É—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    this.getClickedPages = function(){
      let pages = new Array();

      try{
        pages = getAdmanCookie('__ctrp_'+this.identy+'_pages_clicked').split(',');
      }catch(e){}

      return pages;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ö–µ—à —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.getUrlHashe = function(url){
      return md5(url);
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this.getCurrentPage = function(){
      return prepareUrl(window.location.href);
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–µ—á–µ–Ω–∞
    this.isPotentialPage = function(url){
      return -1 !== this.getPotentialPages().indexOf(
        this.getUrlHashe(
          prepareUrlToFull(url)
        )
      );
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ –∫–ª–∏–∫–Ω—É—Ç–∞
    this.isClickedPage = function(url){
      return -1 !== this.getClickedPages().indexOf(
        this.getUrlHashe(
          prepareUrlToFull(url)
        )
      );
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
    this.getClickedIndexes = function(){
      let pages = new Array();

      try{
        pages = getAdmanCookie('__ctrp_'+this.identy+'_page_clicked').split(',');
      }catch(e){}

      return pages;
    };

    //--- –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å—Ç–µ–∫ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤ +1
    this.addClickedIndex = function(){
      debug_log({
        title: this.identy+'. –î–æ–±–∞–≤–ª—è–µ–º +1 ClickedIndex.'
      });

      let indexes = this.getClickedIndexes();
      let current_index = this.getCurrentClickIndex();

      if (current_index <= 64)
      {
        indexes.push(current_index);

        setAdmanCookie('__ctrp_'+this.identy+'_page_clicked', indexes.join(','), {
          expires : this.capp_seconds,
          path : '/',
          domain : location.hostname
        });
      }

      return this;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å –∫–ª–∏–∫–∞
    this.getCurrentClickIndex = function(){
      let indexes = this.getClickedIndexes();
      return parseInt((indexes.length ? indexes[indexes.length - 1] : 0)) + 1;
    };

    //--- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Å—Ç—Ä–µ–ª—è—Ç—å –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–ª–∏–∫
    this.isClickActive = function(index){
      if (index == undefined)
        index = this.getCurrentClickIndex();

      let is_active = true;

      //--- —Å–º–æ—Ç—Ä–∏–º –Ω–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤—É –ø–æ –∫–ª–∏–∫–∞–º
      try{
        let clicks = this.clicks.replace(/\s/g,'').split(',');

        //--- –µ—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ –∑–∞–¥–∞–Ω–∞, —Å–ª–µ–¥—É–µ–º –µ–π
        if (clicks.length)
        {
          //--- –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–º –∫–ª–∏–∫–µ
          if (clicks.indexOf((index).toString()) === -1)
            is_active = false;
        }
      }catch(e){}

      return is_active;
    };

    return this;
  };
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = PageClickCounter;
    }
    exports.PageClickCounter = PageClickCounter;
  } else {
    if (typeof define === 'function' && define.amd) {
      define("page-click-counter-js", [], function () {
        return PageClickCounter;
      })
    } else {
      window.PageClickCounter = PageClickCounter;
    }
  }
})(typeof window === "object" ? window : this);

function is_secure_protocol() {
  return window.location.protocol === 'https:';
}

function getIsDesktop() {
  // –¥–æ—Å—Ç–∞–Ω–µ–º –∏–∑ —Ç–æ–ø–∏–Ω–∫–ª—é–¥–∞
  if (ADMAN_INFO && ADMAN_INFO.device && ADMAN_INFO.device.is_mobile) {
    return !ADMAN_INFO.device.is_mobile;
  }

  // —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
  if (typeof is_desktop !== 'undefined') {
    return is_desktop;
  }

  // –¥–µ—Ç–µ–∫—Ç–∏–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
  window.is_desktop = true;
  try{
    let parser_result = UAParser();
    window.is_desktop = !(parser_result.device.type == 'mobile' || parser_result.device.type == 'tablet');
  }catch (e){}

  // –∑–∞–ø–∏—à–µ–º –≤ —Ç–æ–ø-–∏–Ω–∫–ª—é–¥
  if (ADMAN_INFO.device) {
    ADMAN_INFO.device.is_mobile = !is_desktop;
  } else {
    ADMAN_INFO.device = {is_mobile: !is_desktop};
  }

  return is_desktop;
}

function getDeviceType() {
  // –¥–æ—Å—Ç–∞–Ω–µ–º –∏–∑ —Ç–æ–ø–∏–Ω–∫–ª—é–¥–∞
  if (ADMAN_INFO && ADMAN_INFO.device && ADMAN_INFO.device.type) {
    return ADMAN_INFO.device.type;
  }

  // —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
  if (typeof device_type !== 'undefined') {
    return device_type;
  }

  // –¥–µ—Ç–µ–∫—Ç–∏–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
  window.device_type = 'desktop';
  try{
    let parser_result = UAParser();
    if (parser_result.device.type) {
      if (parser_result.device.type == 'mobile') {
        window.device_type = 'mobile';
      } else if (parser_result.deow.device_type = 'tablet';
      }
    }
  }catch (e){}

  // –∑–∞–ø–∏—à–µ–º
  if (ADMAN_INFO.device) {
    ADMAN_INFO.device.type = window.device_type;
  } else {
    ADMAN_INFO.device = {type: window.device_type};
  }

  return window.device_type;
}

function getBrowserName() {
  // –¥–æ—Å—Ç–∞–Ω–µ–º –∏–∑ —Ç–æ–ø–∏–Ω–∫–ª—é–¥–∞
  if (ADMAN_INFO && ADMAN_INFO.device && ADMAN_INFO.device.browser) {
    return ADMAN_INFO.device.browser;
  }

  // —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
  if (typeof browser_name !== 'undefined') {
    return browser_name;
  }

  // –¥–µ—Ç–µ–∫—Ç–∏–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
  window.browser_name = 'other';
  try{
    let parser_result = UAParser();
   wser = parser_result.browser.name;

    //--- normalize browser name
    if (/Chrome/.test(parser_browser)) {
      window.browser_name = 'chrome';
    } else if (/Safari/.test(parser_browser)) {
      window.browser_name = 'safari';
    }
  }catch (e){}

  // –∑–∞–ø–∏—à–µ–º
  if (ADMAN_INFO.device) {
    ADMAN_INFO.device.browser = window.browser_name;
  } else {
    ADMAN_INFO.device = {browser: window.browser_name};
  }

  return window.browser_name;
}

/**
 * –§—É–Ω–∫—Ü–∏—è –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é –≥—Ä—É–ø–ø—ã —Å–ø–æ—Ç–æ–≤ –∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω–æ–µ –∏–º—è —Å–ø–æ—Ç–∞
 *
 * @param {Array} allSpots
 * @param {String} spotGroupName
 * @param {Boolean} needIsMobile
 * @return {*}
 */
function getSpotCodeBySpotGroupName(allSpots, spotGroupName, needIsMobile) {
  if (!spotGroupName) {
    // –∏–º—è –≥—Ä—É–ø–ø—ã —Å–ø–æ—Ç–∞ –Ω–µ –∑–∞–¥–∞–Ω–æ
    return null;
  }

  if (!allSpots || allSpots.length === 0) {
    // —Å–ø–∏—Å–æ–∫ —Å–ø–æ—Ç–æ–≤ –ø—É—Å—Ç
    return null;
  }

  // —Ä–∞—Å–ø–∞—Ä—Å–∏–º —Ç–µ–∫—É—â–µ–µ –∏–º—è
  let parts;–∏–¥–Ω–æ–µ
    return null;
  }

  const desktopName = parts[1] + '-' + parts[3], mobileName = parts[1] + 'm-' + parts[3];

  // –∏—â–µ–º –ø–æ –¥–µ–≤–∞–π—Å—É
  let name;
  if (allSpots.hasOwnProperty((name = (needIsMobile ? mobileName : desktopName)))) {
    // –Ω–∞–π–¥–µ–Ω –Ω—É–∂–Ω—ã–π
    return name;
  } else if (allSpots.hasOwnProperty((name = (needIsMobile ? desktopName : mobileName)))) {
    // –Ω–∞–π–¥–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π, –Ω–æ —Å –¥—Ä—É–≥–æ–≥–æ –¥–µ–≤–∞–π—Å–∞
    return name;
  }
  return null;
}

//--- Native Ajax
function ajax(option)
{
  if (typeof(option.url) == 'undefined') {
    try {
      option.url = location.href;
    } catch(e) {
      var ajaxLocation;
      ajaxLocation = document.createElement('a');
      ajaxLocation.href = '';
      option.url = ajaxLocation.href;
    }
  }
  if (typeof(option.type) == 'undefined') {
    option.type = 'GET';
  }
  if (typeof(option.data) == 'undefined') {
    option.data = '';
  } else {
    var data = '';
    for (var x in option.data) {
      if (data != '') {
        data += '&';
      }
      data += encodeURIComponent(x)+'='+encodeURIComponent(option.data[x]);
    };
    option.data = data;
  }
  if (typeof(option.statusCode) == 'undefined') {
    option.statusCode = {};
  }
  if (typeof(option.beforeSend) == 'undefined') {
    option.beforeSend = function () {};
  }
  if (typeof(option.success) == 'undefined') {
    option.success = function () {};
  }
  if (typeof(option.error) == 'undefined') {
    option.error = function () {};
  }
  if (typeof(option.complete) == 'undefined') {
    option.complete = function () {};
  }
  typeof(option.statusCode['404']);

  var xhr = null;

  if (window.XMLHttpRequest || window.ActiveXObject) {
    if (window.ActiveXObject) { try { xhr = new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) { xhr = new ActiveXObject('Microsoft.XMLHTTP'); } }
    else { xhr = new XMLHttpRequest(); }
  } else { try{console.debug('ajax error');}catch(e){} return null; }

  xhr.onreadystatechange = function() {
    if (xhr.readyState == 1) {
      option.beforeSend();
    }
    if (xhr.readyState == 4) {
      option.complete(xhr, xhr.status);
      if (xhr.status >= 200 && xhr.status < 300) {
        option.success(xhr.responseText);
      } else {
        option.error(xhr.status);
        if (typeof(option.statusCode[xhr.status]) != 'undefined') {
          option.statusCode[xhr.status]();
        }
      }
    }
  };

  if (typeof(option.signal) !== 'undefined') {
    if (option.signal.aborted) {
      option.complete(xhr, xhr.status);
      option.error(xhr.status);
      if (typeof(option.statusCode[xhr.status]) !== 'undefined') {
        option.statusCode[xhr.status]();
      }
      return;
    } else {
      option.signal.addEventListener('abort', () => {
        xhr.abort();
      });
    }
  }

  if (option.type == 'POST') {
    xhr.open(option.type, option.url, true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
    xhr.send(option.data);
  } else {
    xhr.open(option.type, option.url+option.data, true);
    xhr.send(null);
  }
}

/**
 * AdmanAbortController
 */
(function (window, undefined) {
  "use strict";
  window.AdmanAbortController = function () {
    if (!(this instanceof AdmanAbortController)) {
      return new Adable: false
    });

    function abort(reason) {
      Object.defineProperty(signal, "reason", {
        writable: true
      });
      Object.defineProperty(signal, "aborted", {
        writable: true
      });
      signal.aborted = true;
      signal.reason = reason;
      Object.defineProperty(signal, "reason", {
        writable: false
      });
      Object.defineProperty(signal, "aborted", {
        writable: false
      });

      signal.dispatchEvent(new Event(EVENT_NAME));
      try {(typeof signal.onabort === 'function') ? signal.onabort(reason) : null} catch (e) {}
    }

    return {
      signal: signal,
      abort: abort,
    }
  };
})(typeof window === "object" ? window : this);

/**
 * –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ—Ç–µ–∫—Ç–∞ —Ä–µ—Ñ —Å–∞–π—Ç–∞
 */
(function (window, undefined) {
  "use strict";
  window.AdmanSubIdDetector = function () {
    if (!(this instanceof AdmanSubIdDetector)) {
      return new AdmanSubIdDetector();
    }

    function prepareReferrerCode(code) {
      return code.replace(/[^\w\d\-\(\)@\.\%\*]+/i, '');
    }

    function detectSubId() {
      // —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É— window.location.href;
      let _referrer_site = getDomainFromURL(document.referrer);
      if (_referrer_site.length === 0 || (_referrer_site === getDomainFromURL(_current_href))) {
        // –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å–∞–π—Ç—É (related) –ª–∏–±–æ –∑–∞—Ö–æ–¥ –∏–∑ –∑–∞–∫–ª–∞–¥–æ–∫
        // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        return getSubId();
      }

      // –ø–æ–∏—Å–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –ø–æ —Å—Å—ã–ª–∫–µ
      // –∫–∞—Å—Ç–æ–º–Ω–∞—è –∫—É–∫–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
      let _custom_href = getAdmanCookieNullDefault(SUB_ID.CUSTOM_REF_COOKIE);
      if (_custom_href) {
        _current_href = _custom_href;
      }
      const _sub_id_identifier_value = getUrlParameters(_current_href, sub_id_identifier, true);
      let _sub_id_source = (
        _sub_id_identifier_value
        && _sub_id_identifier_value !== ''
        &&
        (
          SUB_ID.COUNT_FROM_LIST_ONLY === false
          ||
          SUB_ID.DOMAINS.indexOf(_referrer_site) !== -1
        )
      ) ? _sub_id_identifier_value
        : NOREF;

      // –ø–æ–∏—Å–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –ø–æ –¥–æ–º–µ–Ω—É, —Ç–æ–ª—å–∫–æ –ï–°–õ–ò –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Ä–µ—Ñ–µ—Ä –ø–æ —Å—Å—ã–ª–∫–µ
      let _sub_id_source_illegal_domain = '';
      if (_sub_id_source === NOREF && _referrer_site.length) {
        if (SUB_ID.DOMAINS.indexOf(_referrer_site) !== -1) {
          _sub_id_source = _referrer_site;
        } else {
          // –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ –∫–∞–º–ø–∞–Ω–∏—è—Ö
          _sub_id_source_illegal_domain = _referrer_site;
        }
      }

      //--- –ø–æ–¥—á–∏—â–∞–µ–º —Ä–µ—Ñ-–∫–æ–¥
      _sub_id_source = preµ–Ω–∏–ª—Å—è –ª–∏ SUBID –∏–ª–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π —Å–∞–π—Ç
      let _changeSubId = (sub_id_source !== _sub_id_source || sub_id_source_illegal_domain !== _sub_id_source_illegal_domain);
      if (
        _changeSubId ||
        referrer_site !== _referrer_site ||
        current_href !== _current_href
      ) {
        // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –Ω–æ–≤—ã–π sub_id!
        sub_id_source = _sub_id_source;
        sub_id_source_illegal_domain = _sub_id_source_illegal_domain;
        referrer_site = _referrer_site;
        current_href = _current_href;

        // —Å–æ—Ö—Ä–∞–Ω–∏–º –Ω–æ–≤—ã–π sub_id
        updateSubIdCookie();

        // —Å–æ—Ö—Ä–∞–Ω–∏–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫—É–∫–∏
        updateSystemCookie();

        if (_changeSubId) {
          fireChangeSubIdEvent(getSubId());
        }
      }

      return getSubId();
    }

    function updateSubIdCookie() {
      if ((SUB_ID.EXCLUSIONS[sub_id_source] === undefined || SUB_ID.EXCLUSIONS[sub_id_source] === '1')) {
        //--- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥
        setAdmanCookie(SUBID_COOKIE_NAME, sub_id_source, {
          expires: SUB_ID.CAPPED,
          path: '/',
          domain: location.hostname
        });

        //--- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ (–î–õ–Ø –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø –í –ö–ê–ú–ü–ê–ù–ò–Ø–•)
        if (sub_id_source_illegal_domain.length && sub_id_source_illegal_domain !== NOREF) {
          setAdmanCookie(ILLEGAL_SUBID_COOKIE_NAME, sub_id_source_illegal_domain, {
            expires: SUB_ID.CAPPED,
            path: '/',
            domain: location.hostname
          });
        } else {
          clearAdmanCookie(ILLEGAL_SUBID_COOKIE_NAME);
        }
      }
    }

    function getSubId() {
      return {
        // current_href: current_href,
        // referrer_site: referrer_site,
        sub_id_source: sub_id_source,
        sub_id_source_illegal_domain: sub_id_source_illegal_domain,
        // referral: (detected_by.length ? 'detected by ' + detected_by : 'NOT detected'),
      };
    }

    function updateSystemCookie() {
      setAdmanCookie('_ref_main-current_href', current_href, {
        expires: SUB_ID.CAPPED,
        path: '/',
        domain: location.hostname
      });

      setAdmanCookie('_ref_main-current_href_md5', md5(prepareUrl(current_href)), {
        expires: SUB_ID.CAPPED,
        path: '/',
        domain: location.hostname
      });

      // —ç—Ç–∞ –∫—É–∫–∞ –Ω—É–∂–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å https-—Å–∞–π—Ç–∞ –Ω–∞ —Å–∞–π—Ç —Å http –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—Ä–∞—É–∑–µ—Ä –Ω–µ —à–ª–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ REFERER
      // –∏ –ø–æ–ª—É—á–∏—Ç—å —Å–∞–π—Ç, –æ—Ç–∫—É–¥–∞ —Å–¥–µ–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥ –∏–∑ –ø—Ö–ø –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω—ã–º
      setAdmanCookie('_ref_main-referrer_site', referrer_site, {
        expires: SUB_ID.CAPPED,
        path: '/',
        domain: location.hostname
      });

      setAdmanCookie('_ref_main', 1, {
        expires: SUB_ID.CAPPED,
        path: '/',
        domain: location.hostname
      });

      debug_log({
        title: '–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ—Ç–µ–∫—Ç–∞ —Ä–µ—Ñ–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.',
        current_href: current_href,
        referrer_site: referrer_site,
      })
    }

    function fireChangeSubIdEvent(data) {
      const callbacks = callbackList.slice(0);
      callbacks.forEach((callback) => {
        callback(data);
      });
    }

    const NOREF = 'noref'; // 'noref'
    const SUBID_COOKIE_NAME = '__ref_sub_id'; // '__ref_sub_id' —Ç—É—Ç –∑–Ω–∞—á–µ–Ω–∏–µ sub_id
    const ILLEGAL_SUBID_COOKIE_NAME = '__ref_sub_id_illegal'; // '__ref_sub_id_illegal' - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–∏–º–∏—Ç–æ–≤
    const sub_id_identifier = SUB_ID.IDENTIFIER ? SUB_ID.IDENTIFIER : SUB_ID.IDENTIFIER_IN_SITE;
    let current_href = ''; // –ø–æ–ª–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    let referrer_site = ''; // —Ä–µ—Ñ.—Å–∞–π—Ç
    let sub_id_source = NOREF;
    let sub_id_source_illegal_domain = '';
    const callbackList = [];

    // –ø—Ä–æ—á–∏—Ç–∞–µ–º –∫—É–∫–∏
    sub_id_source = getAdmanCookieNullDefault(SUBID_COOKIE_NAME);
    if (sub_id_source === null) {
      sub_id_source = NOREF;
    }
    sub_id_source_illegal_domain = getAdmanCookieNullDefault(ILLEGAL_SUBID_COOKIE_NAME);
    if (sub_id_source_illegal_domain === null) {
      sub_id_source_illegal_domain = '';
    }
    referrer_site = getAdmanCookieNullDefault('_ref_main-referrer_site');
    if (referrer_site === null) {
      // –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
      referrer_site = getDomainFromURL(document.referrer);
      current_href = window.location.href;
      if (referrer_site.length && (referrer_site === getDomainFromURL(current_href))) {
        referrer_site = '';
      }

      updateSystemCookie();
      updateSubIdCookie();
    }

    return {
      detect: detectSubId,
      addChangeSubIdEventListener: function (handler) {
        if (typeof handler !== 'function') {
          return;
        }
        const index = callbackList.indexOf(handler);
        if (index === -1) {
          callbackList.push(handler);
        }
      },
      removeChangeSubIdEventListener: function (handler) {
        const index = callbackList.indexOf(handler);
        if (index > -1) {
          callbackList.splice(index, 1);
        }
      },
    }
  };
})(typeof window === "object" ? window : this);

var SUB_ID = SUB_ID || {
  CAPPED: +'86400',
  IDENTIFIER: 'site_id',
  IDENTIFIER_IN_SITE: 'site_id',
  CUSTOM_REF_COOKIE: '',
  EXCLUSIONS: JSON.parse('[]'),
  DOMAINS: JSON.parse('["3vids.com","00192-pbweb.com","pentest-tools.com","assoass.com","coqnu.com","dinotube.com","ebonygalore.com","el-ladies.com","findtubes.com","forhertube.com","fucd.com","fuq.com","fuqpremium.com","gaymaletube.com","hdporzo.com","ixxx.com","lobstertube.com","lupoporno.com","maturetube.com","melonstube.com","porzo.com","qorno.com","sambaporno.com","stocking-tease.com","tgtube.com","tiava.com","toroporno.com","tubebdsm.com","tubegalore.com","tubemales.com","tubeporn.com","tubepornstars.com","tubeshemales.com","vrporzo.com","asiangalore.com","animegalore.com","homemadegalore.com","lesbiangalore.com","latingalore.com","analgalore.com","pornrox.com","pinflix.com","metaporn.com","gotporn.com","pornhd.com","cartoonpornvideos.com","ghettotube.com","porntv.com","lesbianpornvideos.com","vrxxx.com","002022-AlexZ.com","ipuss.tv","iwank.tv","tonicmovies.com","4porn.com","tastyblacks.com","pornspan.com","maturealbum.com","tubepleasure.com","bigtitszone.com","bestandfree.com","largehdtube.com","sweetshow.com","fapvid.com","rulertube.com","largepornfilms.com","bigboobsfilm.com","spicybigbutt.com","tubespin.tv","fapvidhd.com","titshits.com","spicytranny.com","jetboobs.com","grannycinema.com","afrosex.com","jizzex.com","goldpornfilms.com","hqhole.com","shemales-time.com","cooch.tv","hdsexdino.com","caramelbbw.com","hqbutt.com","ebonypulse.tv","spicytrannyhd.com","polarpornhd.com","dirtyhomeclips.com","fatmomtube.com","tubent.com","hometubeporn.com","newshemaletube.com","myretrotube.com","spicybigtits.com","freshpornclips.com","goldhdtube.com","sexpulse.tv","caramelmature.com","newmaturetube.com","tubepornfilm.com","newmatures.com","hqboobs.com","tube4ace.com","porn24.tv","maturezilla.com","fatgrannytube.com","severalmovies.com","tubexxxx.com","xmomsmovies.com","fattyvideos.com","sexmole.com","vivagals.com","tubesplash.com","tastymovie.com","tubezaur.com","infinitetube.com","1trannytube.com","mylovedtube.com","xgrannytube.com","maturepie.com","iliketubes.com","tubeadultmovies.com","neattube.com","tubecharm.com","tubevector.com","lordoftube.com","carameltube.com","ass-time.com","desiredtube.com","prehistorictube.com","my1tube.com","hqmaturetube.com","newbigtube.com","bangedtranny.com","hdpornochief.com","spicyplumpers.com","wankerlab.com","mymaturegranny.com","hqvintagetube.com","maturetubelust.com","erosexus.com","hotvoyeurtube.com","xgap.tv","kisspornmovies.com","thematureladies.com","sexo24.com","tubeporncity.com","hqbigboobs.com","charmingtranny.com","heavycuties.com","agedlust.com","grannyflash.com","trytits.com","cutiesover30.com","vataa.com","tubedessert.com","grandmammamovies.com","porngur.com","newcooltube.com","attractivetube.com","porntiki.com","sexwithmature.com","bonusvid.com","eroro.com","wildhole.com","jerkvilla.com","ripemom.com","tubeforwork.com","wifesfilmed.com","zztube.com","ardentmums.com","vipmaturetube.com","tuberr.com","tgirlsmovies.com","hqmaturemilf.com","ma-ture.com","1freetube.com","tubeshere.com","faptip.com","retrotubeclips.com","agedmaids.com","tubereserve.com","boobsa.com","bigtitsnow.com","melonsclips.com","jizzoid.com","grannyporn.tv","cumingtube.com","spectraltube.com","perpetualtube.com","sextubehere.com","hqmaturepussy.com","myboner.com","tsfap.com","hardpole.com","daily-bbw-porn.com","sex4pal.com","xdump.tv","deepmuff.com","tendermom.com","dickpal.com","largehole.com","stalemoms.com","nymphasmovies.com","touchmymelons.com","00973-Xdiver.com","hdpornfree.xxx","hdpornmax.com","hdpornmax.xxx","fuckhdtube.com","tophqporn.com","herexxxtube.com","herexxxtube.porn","hdsexmovies.xxx","hdxnxx.xxx","bestfreetube.xxx","redhdtube.xxx","pornxo.xxx","bestfreetube.porn","easyporn.xxx","hqtube.xxx","hqsextube.xxx","00214-TCJ.com","amieporn.com","asscj.com","aweporn.com","besterpornos.com","bestesexvideos.com","clipslujuriosos.com","culonudo.com","demiporn.com","ehporn.com","elitesexyvideos.com","epichardcore.net","excelenteporno.com","fgtube.com","gigantclips.com","gogomovs.com","grantubodesexo.com","hotknock.com","ihrepornos.com","itsass.com","jizz24.com","jizzez.net","jonnyxxx.com","just.porn","kostenlospornofilm.com","lepornochaud.com","marporno.com","neuerporno.com","nurxxx.mobi","nurxxx.net","ozeex.com","peneporno.com","pornbalcony.com","porndavid.com","porndeva.com","porneva.com","pornmia.com","pornobonito.com","pornoingenieux.com","pornokrol.com","pornorc.net","pornpoly.net","porntap.com","pornzoe.com","ruenu.com","rule34pornvids.com","sexlew.com","sexorc.net","sitedesex.com","sitopornoxxx.com","sunnyboobs.com","teatroporno.com","tiaporn.com","tollepornovideo.com","tollesextube.com","tomodachinpo.com","toppornoduro.com","topxxxpornvids.com","vastsextube.com","xecce.com","xxxcj.com","xxxjojo.com","001977-TCJ2.com","playmeporn.com","drivemeporn.com","queduporno.com","pornobombe.com","pornoculo.com","pornoamor.com","pornozentrum.com","pornoplek.com","pornoouf.com","002110-Oblekomorale.com","porn.biz","foxporns.com","tube3.com","dirtypornvids.com","bigporn.com","tubefree.com","ourhappyhardcore.com","freesexavenue.com","htube.com","002319-Pornsos.com","pornsos.com","qqqporn.com","xneon.com","00184-Nightshift.com","ibizababes.com","fantasticnudes.com","realitymadness.com","00181-Nudevista.com","nudevista.com","nudevista.at","nudevista.be","nudevista.com.pl","nudevista.es","nudevista.it","nudevista.jp","nudevista.nl","nudevista.com.br","nudevista.se","nudevista.tv","nudevista.tw","nudevista.net","002583-IvanIvanov.com","azfuck.com","xxxpapa.com","lesbify.com","goldtits.com","sos.xxx","sex-video.tv","her.porn","tubehall.com","maturehole.com","goldporn.xxx","xxxpill.com","pop.xxx","onlybestporn.com","hereporn.com","lezbomovies.com","pornyork.com","spicymature.com","wellporn.com","00193-Paradisenudes.com","paradisenudes.com","topless-babes.com","002352-Serhio.com","sexmotors.com","pornmotors.com","motorsxxx.com","tubexmotors.com","eromotors.com","0052-Fooxy.com","fooxy.com","bigtitsaction.com","teentubesearch.com","teensexwanted.com","teenpornisland.com","sexbloom.com","pornvideosdb.com","hdv.tv","0000-Other.com","theporndude.com","porn.com","porn247.info","100porn.info","theporndude.me","xxxynetwork.com","lasmejoreswebsporno.com","thebestfreepornsites.com","toppornsites.com","bestxxxsites.com","002748-Alex-likevklike.com","freeindianporn.pro","freelesbiansex.pro","darkporn.pro","russkoe-video.com","002737-kapa.com","xxnxcom.mobi","orntube.mobi","xxx-selfies.com","porn24.pro","fuckporn24x7.com","002836-alexz2.com","amamilf.com","youcanfaptothis.com","7mmtv.tv","xtits.com","x-videos.club","the-sexy-tube.com","pornitro.com","xxxvogue.net","amateurvoyeurforum.com","analdin.com","xnxxbest.pro","hellporno.net","hothomefuck.com","hellporno.com","vulvavision.com","pornhol.com","xporn.host","sex4porn.net","xbabe.com","xsexvideos.pro","lxax.com","pornvideo.rodeo","jetsex.pro","xcum.com","pornus.pro","hairyteencunt.com","its.porn","hdpussy.xxx","justnudepic.com","porncoin.pro","zedporn.com","alphaporno.com","porngem.com","www.tubewolf.com","cuteasiangirl.net","crocotube.com","hothdsex.xxx","babes34.pro","porn-video.name","teenpornm.com","xxxsuperporn.com","xxxpussysex.pro","hellmoms.com","gayxboy.pro","tubematik.com","yohapornvideos.com","nylonx.net","porntubez.com","analxxx.club","undernylon.com","erofus.com","japanese6.club","pornn.me","xvideosteenporn.com","teensxvideos.com","txxxa.com","porn2019.pro","sexu.pro","eachporn.com","porn0.me","tube-bunny.com","xvideostube.pro","youporntube.cc","lubed.webcam","eporn.pro","porntv.pro","myslut.pro","pornfilms.cc","telugupornvids.com","bhabhixvideos.com","malluporntube.com"]'),
  COUNT_FROM_LIST_ONLY: (parseInt('1', 10) === 1),
};

//--- –æ–±—ä–µ–∫—Ç, –≥–¥–µ –±—É–¥–µ—Ç –≤—Å—è –∏–Ω—Ñ–∞
if (typeof ADMAN_INFO === 'undefined') {
  var ADMAN_INFO = {spots: {}};
}
ADMAN_INFO.script_add_folder = '/2ff/';

//--- –¥–µ—Ç–µ–∫—Ç–æ—Ä —Ä–µ—Ñ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ–±—â–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–µ—Ç–µ–∫—Ç–∞ —Ä–µ—Ñ–∞,
try {
  // detect referal
  if (ADMAN_INFO.SubIdDetector === undefined) {
    ADMAN_INFO.SubIdDetector = new AdmanSubIdDetector();

    // reset behavior cookies
    ADMAN_INFO.SubIdDetector.addChangeSubIdEventListener(function(data) {
      // —Ñ–ª–∞–≥, —á—Ç–æ –ø–æ–º–µ–Ω—è–ª—Å—è —Ä–µ—Ñ–µ—Ä–∞–ª
      ADMAN_INFO.changedSubId = true;

      // —Å—á–µ—Ç—á–∏–∫–∏
      clearAdmanCookiesByRegexName(/^__ctr_.+_closed$/);
      clearAdmanCookiesByRegexName(/^__ctr_.+_mrk$/);
      clearAdmanCookiesByRegexName(/^__ctr_.+_pgs$/);
      clearAdmanCookiesByRegexName(/^__ctr_.+_mrk_shifted$/);
      clearAdmanCookiesByRegexName(/_nc$/);
      clearAdmanCookiesByRegexName(/^__ctrp_.+_page_clicked$/);
      clearAdmanCookiesByRegexName(/^__ctrp_.+_pages_clicked$/);
      clearAdmanCookiesByRegexName(/^__ctrp_.+_pages_potential$/);

      // adhes
      clearAdmanCookiesByRegexName(new RegExp('^__clel-b4a-a-'));

      // preroll
      let prerollCode = getAdmanCookieNullDefault('preroll-code');
      if (prerollCode) {
        clearAdmanCookie(prerollCode.toLowerCase()+'-capped');
        clearAdmanCookie(prerollCode.toLowerCase()+'-allow');
      }

      // postroll
      let postrollCode = getAdmanCookieNullDefault('postroll-code');
      if (postrollCode) {
        clearAdmanCookie(postrollCode.toLowerCase()+'-capped');
        clearAdmanCookie(postrollCode.toLowerCase()+'-allow');
      }

      // interstitial
      let interstitialCode = getAdmanCookieNullDefault('intt-code');
      if (interstitialCode) {
        clearAdmanCookie(interstitialCode.toLowerCase()+'-capped');
        clearAdmanCookie(interstitialCode.toLowerCase()+'-allow');
      }

      // poststitial
      let poststtCode = getAdmanCookieNullDefault('__spot_code-poststitial');
      if (poststtCode) {
        poststtCode = poststtCode.replace('--IMAG-SBID', '');
        clearAdmanCookie(poststtCode.toLowerCase()+'-capped');
        clearAdmanCookie(poststtCode.toLowerCase()+'-allow');
      }

      // —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–ª–∞–≥–∏
      clearAdmanCookiesByRegexName(/^__spot_code-/);
      clearAdmanCookiesByRegexName(/^__capped_/);
      clearAdmanCookiesByRegexName(/^__ccid_/);
      clearAdmanCookiesByRegexName(/^__ref-/);

      [
        'force_popunder_is_fired',
        'pop_click_counter',
        '__pup',
        '__temp_ref_sub_id',
        '__referrer_only',
        '__ctr_poststt_disabled',
        '__play_preroll',
        '__preroll_disabled',
        'preroll-clicks',
        'preroll-last-click',
        'preroll-current-click',
        'preroll-code',
        '__postroll_disabled',
        'postroll-clicks',
        'postroll-last-click',
        'postroll-current-click',
        'postroll-code',
        '__adheID',
      ].forEach(clearAdmanCookie);


      // —Å–µ–∫—Ü–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫—É–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–ø–∞–Ω–¥–µ—Ä–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π pTMpcfdeddcedefde
      [
        'pTMpcfdeddcedefde0',
      ].forEach(function (name) {
        let secure = (location.protocol.startsWith('https') ? 'secure=1' : '');
        document.cookie = `${name}=; SameSite=None; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; ` + secure;
      });

      // clear localStorage
      if (localStorage && localStorage['pTMpcfdeddcedefdeLastPopAt']) {
        localStorage.removeItem('pTMpcfdeddcedefdeLastPopAt');
      }
      if (localStorage && localStorage['pTMpcfdeddcedefdeCount']) {
        localStorage.removeItem('pTMpcfdeddcedefdeCount');
      }
    });
    ADMAN_INFO.sub_id = ADMAN_INFO.SubIdDetector.detect();
  }
} catch (e) {debug_log(e)}

/**
 * –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏ –≤ –∫–æ–¥ –∏–ª–∏ —É—Ä–ª
 * 3 vids, Mad"dy&O'Reilly\ => 3%20vids%2C%20Mad%22dy%26O%27Reilly%5C –¥–ª—è —É—Ä–ª
 * 3 vids, Mad"dy&O'Reilly\ => 3 vids, Mad%22dy%26O%27Reilly%5C –¥–ª—è –∫–æ–¥–∞
 *
 * @param inputString
 * @param isUrl –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, –ø–æ—á–µ–º—É —Ç–∞–∫ —Å–¥–µ–ª–∞–Ω–æ –≤ replaceKeywords. –≤–∑—è–ª –æ—Ç—Ç—É–¥–∞
 * @return {string}
 */
function escapeKeywordsString(inputString, isUrl) {
  isUrl = isUrl || 0;
  if (isUrl) {
    return encodeURIComponent(inputString)
      .replace(/'/g, '%27')
      .replace(/%2C/g, ',');
  }

  return inputString
    .replace(/\\/g, "%5C")
    .replace(/'/g, "%27")
    .replace(/"/g, "%22")
    .replace(/`/g, "%60")
    .replace(/&/g, "%26");
}


//--- –æ–±—ä–µ–∫—Ç, –≥–¥–µ –±—É–¥–µ—Ç –≤—Å—è –∏–Ω—Ñ–∞
var ADMAN_INFO = ADMAN_INFO || {};
var SUB_ID = SUB_ID || {CAPPED: +'86400'};

//--- –¥–µ—Ç–µ–∫—Ç–æ—Ä –¥–µ–≤–∞–π—Å–∞
try{
  const parser_result = UAParser();

  //--- get browser name
  let browser_name = 'other';
  if (parser_result.browser.name) {
    if (/Chrome/i.test(parser_result.browser.name)) {
      browser_name = 'chrome';
    } else if (/Safari/i.test(parser_result.browser.name)) {
      browser_name = 'safari';
    }
  }

  //--- get OS name
  let os_name = 'other';
  if (parser_result.os.name) {
    if (/Mac/i.test(parser_result.os.name)) {
      os_name = 'mac';
    } else if (/Windows/i.test(parser_result.os.name)) {
      os_name = 'windows';
    } else if (/Android/i.test(parser_result.os.name)) {
      os_name = 'android';
    } else if (/iOS/i.test(parser_result.os.name)) {
      os_name = 'ios';
    }
  }

  //--- get device type
  let device_type = 'desktop';
  if (parser_result.device.type) {
    if (parser_result.device.type == 'mobile') {
      device_type = 'mobile';
    } else if (parser_result.device.type == 'tablet') {
      device_type = 'tablet';
    }
  }

  //--- get network connection
  let network_type ='other';
  if (navigator.connection && navigator.connection.effectiveType) {
    network_type = navigator.connection.effectiveType;
  }

  ADMAN_INFO.device = {
    browser: browser_name,
    os: os_name,
    type: device_type,
    is_mobile: (device_type == 'mobile' || device_type == 'tablet'),
    network: network_type,
  };

  setAdmanCookie('__device_info', JSON.stringify(ADMAN_INFO.device), {expires: SUB_ID.CAPPED, path: '/', domain: location.hostname});
}catch (e){debug_log(e)}

//--- –¥–µ—Ç–µ–∫—Ç–æ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã
try{
  let page_meta = {};
  page_meta.domain = location.host;
  page_meta.title = parent.document.title;

  let metas = parent.document.getElementsByTagName('meta');

  for (let i = 0; i < metas.length; i++)
  {
    if (metas[i].name && metas[i].getAttribute('content'))
    {
      page_meta[metas[i].name.toLowerCase()] = metas[i].getAttribute('content');
    }

    if (metas[i].getAttribute('property') && metas[i].getAttribute('content'))
    {
      page_meta[metas[i].getAttribute('property')] = metas[i].getAttribute('content');
    }
  }

  setAdmanCookie('__page_meta', JSON.stringify(page_meta), {expires: SUB_ID.CAPPED, path: '/', domain: location.hostname});

  ADMAN_INFO.page_meta = parent.window.page_meta = page_meta;
}catch(e){debug_log(e)}
