(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9161],{34881:15127:function(e,t,n){"use strict";n.d(t,{Z:function(){return LanguageDropdown},b:function(){return LanguagesSearchCombobox}});var r=n(52322),a=n(2784),o=n(18318),l=n(77128),s=n(47330),i=n(83122),c=n(98269),d=n(53954),u=n(5632);function LanguagesSearchCombobox(e){let{languages:t,selectedLanguage:n,onChange:l}=e,s=(0,a.useMemo)([t]);return(0,r.jsx)(o.Z,{items:s,selected:n,onChange:l})}function LanguageDropdown(e){let{selectedLanguage:t,onChange:n}=e,{workspace:o}=(0,d.cF)(),c=(0,u.useRouter)(),m=(0,i.H8)(c.query),p=m.id,f=(0,d.NK)(o,s.TT.Multilingual),[{data:h}]=(0,l.w)({variables:{projectId:p}}),b=(0,a.useMemo)([h]);return!f||b.length<2?null:(0,r.jsx)(LanguagesSearchCombobox,{languages:b,selectedLanguage:t,onChange:)}},91170:function(e,t,n){"use strict";n.d(t,{B:function(){return DisplayOnlyFilters}});var r=n(52322),a=n(99219);,44665:function(e,t,n){"use strict";n.d(t,{Z:function(){return CreateMethodDiv}});var r=n(52322);,94145:function(e,t,n){"use strict";n.d(t,{Z:function(){return CreateMethodTabs}});var r=n(52322),a=n(83122),o=n(53954);,94171:function(e,t,n){"use strict";n.d(t,{BS:function(){return createOptionsReducer},Bu:function(){return l},fm:function(){return a}});var r,a,o=n(47330);(r=a||(a={})).Blank="Blank",r.NewCaptures="New captures",r.FromCollection="From collection",r.Duplicate="Make Copy",r.Import="Import";let l={method:"Blank",name:"",boards:[],blank:{type:o.TG.Web,url:"",language:o.sp.En},fromCollection:{collectionId:""},duplicate:{id:""},newCaptures:{url:""},import:{fileName:"",json:""}},createOptionsReducer=,75909:function(e,t,n){"use strict";n.d(t,{Z:function(){return SelectProject}});var r=n(52322),a=n(18318),o=n(73235),l=n(66547),s=n(26806);function _templateObject(){let e=(0,o._)(["\n    query ListProjectsForSelect($workspaceId: String!, $filterForCurrentUser: Boolean!) {\n  projectsForSelect(\n    workspaceId: $workspaceId\n    filterForCurrentUser: $filterForCurrentUser\n  ) {\n    id\n    name\n  }\n}\n    "]);return _templateObject=function(){return e},e}let i=(0,l.ZP)(_templateObject());var c=n(53954);,81291:78066:function(e,t,n){"use strict";n.d(t,{Z:function(){return Modal}});var r=n(52322),a=n(2784),o=n(68810),l=n(64529),s=n(83122),i=n(82002),c=n(89370);}},2594},1016:function(e,t,n){"use strict";n.d(t,{Z:function(){return SelectComboboxPopover}});var r=n(52322),a=n(2784),o=n(68377),l=n(43913),s=n(68810),i=n(99219),c=n(83122),d=n(69260),u=n(71659);function CustomSearchCombobox(e){let{disabled:t,placeHolder:n="Search",items:l,selected:s,onChange:m,max:p=d.G1,allowRemove:f,renderOption:h,renderFooter:b,renderHeaderRight:g,tight:x,className:j="",highlightedClass:v="bg-blue-primary",focusClass:y="focus:outline-none focus:ring-2 focus:border-blue-primary focus:ring-blue-200",searchField:C="name",filterOptions:w,selectFirstItem:N,allowCreate:P,field:k="name",itemName:_="item",title:D,query:O,setQuery:S,close:B}=e,[F,I]=(0,a.useState)(null),[Z,E]=(0,a.useState)(l),$=(0,a.useCallback},[m,N,s]);(0,a.useEffect},[l,w,$]);let A=(0,a.useMemo},[O,Z,p,C]),R=s&&s.id||s;(0,a.useEffect},[R,l]);let handleChange=e=>{e||(I(null),S("")),m(e),B()};return(0,r.jsx)(o.h,{disabled:t,value:F,onChange:handleChange,children:(0,r.jsxs)("div",{className:(0,c.AK)(j,"relative overflow-hidden rounded-md border bg-white shadow-lg"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b bg-white px-3 py-2.5",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-800 ",children:D}),null==g?void 0:g()]}),(0,r.jsx)("div",{className:"border-b px-2 py-1.5",children:(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)(o.h.Input,{autoFocus:!0,className:(0,c.AK)(y,"w-full rounded border border-gray-200 bg-transparent py-2 pl-3 pr-5 text-base"),placeholder:n,onChang)}),f&&s&&(0,r.jsx)("button",{onClick:()=>handleChange(null),className:"absolute right-3 ml-auto",children:(0,r.jsx)(i.aMB,{className:"h-3.5 w-3.5 text-gray-300 hover:text-gray-400"})})]})}),(0,r.jsxs)(o.h.Options,{static:!0,className:"z-10 max-h-60 w-full overflow-auto bg-white py-1 text-sm",children:[0===A.length?(0,r.jsx)(r.Fragment,{children:!O&&(0,r.jsx)("div",{className:"flex items-center justify-center py-8 italic text-gray-400",children:"No results"})}):A.ma}),O&&P&&(0,r.jsx)(o.h.Option,{className:e=>{let{active:t}=e;return"relative mx-4 cursor-pointer select-none overflow-visible rounded px-4 py-2 hover:bg-gray-100 ".concat(t?"bg-gray-100 text-gray-700":"bg-gray-50 text-gray-900")},value:{[k]:O},children:e=>{let{selected:t}=e;return(0,r.jsxs)("span",{className:"flex items-center ".concat(t?"font-semibold":"font-normal"),children:[(0,r.jsx)(i.pOD,{className:"-ml-2 mr-2 h-3 w-3"}),(0,r.jsxs)("span",{className:"trucate font-medium",children:["Create ",_,' "',O,'"']})]})}},"create")]}),b&&b()]})})}function SelectComboboxPopover(e){let{renderSelected:t,...n}=e;return(0,r.jsxs)(l.J,{children:[(0,r.jsx)(l.J.Button,{as:"div",disabled:e.disabled,children:t(e.selected)}),(0,r.jsx)(s.u,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"relative",afterLeav),children:(0,r.jsx)(l.J.Panel,{className:(0,c.AK)(e.widthClass||"w-full","absolute bottom-full top-0 z-10 mt-1 bg-white pb-3 text-base focus:outline-none"),children:e=>{let{close:t}=e;return(0,r.jsx)(CustomSearchCombobox,{...n,close:t,tight:!0,className:"text-sm"})}})})]})}},5453},75433:function(e,t,n){"use strict";n.d(t,{D:function(){return l}});var r=n(73235),a=n(66547),o=n(46678);function _templateObject(){let e=(0,r._)(["\n    fragment BoardProject on BoardProject {\n  createdAt\n  creatorId\n  project {\n    ...ProjectListItem\n  }\n  pinned\n}\n    ",""]);return _templateObject=function(){return e},e}let l=(0,a.ZP)(_templateObject(),o.c)},12464:function(e,t,n){"use strict";n.d(t,{m:function(){return x}});var r=n(73235),a=n(66547),o=n(77243),l=n(49877);function _templateObject(){let e=(0,r._)(["\n    fragment DialogButton on DialogButton {\n  id\n  actions {\n    ...FlowDocumentAction\n  }\n  appearance\n  text\n  multilingualText {\n    ...ContentLanguage\n  }\n}\n    ","\n",""]);return _templateObject=function(){return e},e}let s=(0,a.ZP)(_templateObject(),o.$,l.l);function flowEscapeView_templateObject(){let e=(0,r._)(["\n    fragment FlowEscapeView on FlowEscapeView {\n  id\n  content\n  multilingualContent {\n    ...ContentLanguage\n  }\n  textAlign\n  buttons {\n    ...DialogButton\n  }\n}\n    ","\n",""]);return flowEscapeView_templateObject=function(){return e},e}let i=(0,a.ZP)(flowEscapeView_templateObject(),l.l,s);function embeddedWebCapture_templateObject(){let e=(0,r._)(["\n    fragment EmbeddedWebCapture on EmbeddedWebCapture {\n  id\n  collectionId\n}\n    "]);return embeddedWebCapture_templateObject=function(){return e},e}let c=(0,a.ZP)(embeddedWebCapture_templateObject());function embeddedMediaCapture_templateObject(){let e=(0,r._)(["\n    fragment EmbeddedMediaCapture on EmbeddedMediaCapture {\n  id\n  collectionId\n}\n    "]);return embeddedMediaCapture_templateObject=function(){return e},e}let d=(0,a.ZP)(embeddedMediaCapture_templateObject());function selector_templateObject(){let e=(0,r._)(["\n    fragment Selector on Selector {\n  screenshotHeight\n  screenshotWidth\n  pixelRatio\n  dimensions {\n    height\n    bottom\n    top\n    left\n    width\n    right\n  }\n  freeSelectDimensions {\n    height\n    bottom\n    top\n    left\n    width\n    right\n  }\n  cssSelector\n  imageUrl\n  nv_id\n  nv_roots\n  roots\n}\n    "]);return selector_templateObject=function(){return e},e}let u=(0,a.ZP)(selector_templateObject());function trigger_templateObject(){let e=(0,r._)(["\n    fragment Trigger on Trigger {\n  id\n  type\n  value\n  state\n  timeUntilActions\n  actions {\n    ...FlowDocumentAction\n  }\n  selector {\n    ...Selector\n  }\n}\n    ","\n",""]);return trigger_templateObject=function(){return e},e}let m=(0,a.ZP)(trigger_templateObject(),o.$,u}let p=(0,a.ZP)(beacon_templateObject(),u,o.$);function form_templateObject(){let e=(0,r._)(["\n    fragment Form on Form {\n  id\n  title\n  multilingualTitle {\n    ...ContentLanguage\n  }\n  subTitle\n  multilingualSubtitle {\n    ...ContentLanguage\n  }\n  fields {\n    id\n    label\n    placeHolder\n    type\n    personalizationVariableId\n    metadataId\n    required\n    requireWorkEmail\n  }\n}\n    ",""]);return form_templateObject=function(){return e},e}let f=(0,a.ZP)(form_templateObject(),l.l}let h=(0,a.ZP)(step_templateObject(),c,d,s,l.l,m,p,u,f);var b=n(17554}let g=(0,a.ZP)(flowDocument_templateObject(),s,i,h,b.A);function flowVersion_templateObject(){let e=(0,r._)(["\n    fragment FlowVersion on FlowVersion {\n  id\n  createdAt\n  updatedAt\n  entityTag\n  screenshot\n  doc {\n    ...FlowDocument\n  }\n}\n    ",""]);return flowVersion_templateObject=function(){return e},e}let x=(0,a.ZP)(flowVersion_templateObject(),g)},7797},36763:function(e,t,n){"use strict";n.d(t,{d:function(){return useListBoardProjectsQuery}});var r=n(73235),a=n(66547),o=n(75433),l=n(26806);function _templateObject(){let e=(0,r._)(["\n    query ListBoardProjects($data: BoardProjectListFilterArgs!) {\n  boardProjects(data: $data) {\n    count\n    results {\n      ...BoardProject\n    }\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let s=(0,a.ZP)(_templateObject(),o.D);function useListBoardProjectsQuery(e){return l.aM({query:s,...e})}},77128:function(e,t,n){"use strict";n.d(t,{w:function(){return useListProjectLanguagesQuery}});var r=n(73235),a=n(66547),o=n(77973),l=n(26806}let s=(0,a.ZP)(_templateObject(),o.h}},4608},91729:function(e,t,n){"use strict";n.d(t,{c:function(){return useActiveBoard}});var r=n(57643}},1706:function(e,t,n){"use strict";var r=n(2784),a=n(83122),o=n(5632);t.Z=e=>{let{setOpenNew:t}=e,n=(0,o.useRouter)();(0,r.useEffect)(()=>{let{create:e}=(0,a.H8)(n.query);e&&t(!0)},[n,t])}},4846},98269:function(e,t,n){"use strict";n.d(t,{Gy:function(){return updateMultilingual},_b:function(){return l},_k:function(){return multilingualToMaybeString},re:function(){return o}});var r=n(47330),a=n(341);let o={[r.sp.En]:"English",[r.sp.Es]:"Spanish",[r.sp.Fr]:"French",[r.sp.De]:"German",[r.sp.Pt]:"Portuguese",[r.sp.ZhCn]:"Chinese (Simplified)"},l={[a.C7.Next]:{[r.sp.En]:a.$R[a.C7.Next][a.sp.en],[r.sp.Es]:a.$R[a.C7.Next][a.sp.es],[r.sp.Fr]:a.$R[a.C7.Next][a.sp.fr],[r.sp.De]:a.$R[a.C7.Next][a.sp.de],[r.sp.Pt]:a.$R[a.C7.Next][a.sp.pt],[r.sp.ZhCn]:a.$R[a.C7.Next][a.sp.zhCN]},[a.C7.Back]:{[r.sp.En]:a.$R[a.C7.Back][a.sp.en],[r.sp.Es]:a.$R[a.C7.Back][a.sp.es],[r.sp.Fr]:a.$R[a.C7.Back][a.sp.fr],[r.sp.De]:a.$R[a.C7.Back][a.sp.de],[r.sp.Pt]:a.$R[a.C7.Back][a.sp.pt],[r.sp.ZhCn]:a.$R[a.C7.Back][a.sp.zhCN]},[a.C7.Submit]:{[r.sp.En]:a.$R[a.C7.Submit][a.sp.en],[r.sp.Es]:a.$R[a.C7.Submit][a.sp.es],[r.sp.Fr]:a.$R[a.C7.Submit][a.sp.fr],[r.sp.De]:a.$R[a.C7.Submit][a.sp.de],[r.sp.Pt]:a.$R[a.C7.Submit][a.sp.pt],[r.sp.ZhCn]:a.$R[a.C7.Submit][a.sp.zhCN]},[a.C7.BookDemo]:{[r.sp.En]:a.$R[a.C7.BookDemo][a.sp.en],[r.sp.Es]:a.$R[a.C7.BookDemo][a.sp.es],[r.sp.Fr]:a.$R[a.C7.BookDemo][a.sp.fr],[r.sp.De]:a.$R[a.C7.BookDemo][a.sp.de],[r.sp.Pt]:a.$R[a.C7.BookDemo][a.sp.pt],[r.sp.ZhCn]:a.$R[a.C7.BookDemo][a.sp.zhCN]}};function multilingualToMaybeString(e,t){var n,r;return e&&t&&null!==(r=null===(n=e.fint))||void 0===n?void 0:n.content)&&void 0!==r?r:null}function updateMultilingual(e,t,n){if(!e)return[{language:n,content:t}];let r=e.findInde});return -1===r?e.push({language:n,content:t}):e[r].content=t,e}},23772:function(e,t,n){"use strict";n.r(t),n.d(t,{defaul}});var r=n(52322),a=n(2784),o=n(18002),l=n(91170),s=n(99219),i=n(56268),c=n(1016),d=n(51830),u=n(7199),m=n(47330),p=n(83122),f=n(53954),h=n(23848);let ManageBoardsFooter=()=>{let e=(0,f.cn)();return e?(0,r.jsx)(d.Z,{href:"/settings/boards",children:(0,r.jsxs)("button",{className:" flex w-full items-center rounded-b-md border-t bg-zinc-50 px-4 py-2.5 font-medium text-gray-600 ",children:[(0,r.jsx)(s.ewm,{className:"mr-1.5 h-3 w-3"}),"Manage Boards"]})}):null};function BoardFilter(e){var t,n;let{selectedId:o,setSelectedId:d}=e,{workspace:b}=(0,f.cF)(),g=(0,f.BH)(b),x=(0,f.OC)(b),[{data:j}]=(0,u.H)({variables:{workspaceId:null==b?void 0:b.id,filterForCurrentUser:!0},pause:!(null==b?void 0:b.id)||!g}),v=(null==j?void 0:j.boards)||[],[y,C]=(0,a.useState)(""),w=v.ma)),{currentUser:N}=(0,f.xJ)(),P=(0,h.useSession)(),k=null==P?void 0:null===(n=P.data)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.isRootAccount,renderIco),_=w.fino);return(0,r.jsx)("div",{className:"min-w-[170px] max-w-[270px]",children:(0,r.jsx)(c.Z,{renderSelected:()=>(0,r.jsx)("div",{className:"listbox-base flex items-center disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",children:(0,r.jsxs)("div",{className:"flex items-center text-base",children:[renderIcon(),(0,r.jsx)("span",{className:(0,p.AK)(!_&&"text-gray-400","block truncate"),children:(null==_?void 0:_.name)||"Select board"}),(0,r.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,r.jsx)(s.Ta4,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"})})]})}),selected:o,title:"Boards",placeHolder:"Filter boards",searchField:"name",field:"name",itemName:"Board",widthClass:"w-56",allowRemove:!1,items:w,onChang),renderOption:(e,t)=>{var n;return(0,r.jsxs)("div",{className:"cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:(0,p.AK)(t?"text-white":"text-zinc-800","text-sm font-medium"),children:e.displayName}),(0,r.jsx)("div",{className:(0,p.AK)(t?"text-gray-200":"text-zinc-500","ml-2 text-sm"),children:!!e.projectCount&&"(".concat(e.projectCount,")")})]}),x&&(0,r.jsxs)("div",{className:"mt-1 text-[13px] font-medium",children:[(0,r.jsxs)("span",{className:(0,p.AK)(t?"text-gray-200":"text-zinc-500"),children:[e.permissionType===m.xf.Team?"Teams":"Access",":"," "]}),(0,r.jsx)("span",{className:(0,p.AK)(t?"text-gray-100":"text-zinc-600"),children:e.permissionType===m.xf.Workspace?"Workspace":e.permissionType===m.xf.Private?"Personal":null===(n=e.teamAccess)||void 0===n?void 0:n.ma}).join(", ")})]})]})},renderFooter:ManageBoardsFooter,renderHeaderRight:()=>{var e,t;if(!x)return null;let n=k?"Filtering by all teams":(null==N?void 0:null===(e=N.teamMemberships)||void 0===e?void 0:e.length)?null==N?void 0:null===(t=N.teamMemberships)||void 0===t?void 0:t.mae).join(", "):"You don't belong to any teams";return(0,r.jsx)(i.M,{isDark:!0,hideArrow:!0,descriptionClassName:"w-fit px-2 py-1",element:(0,r.jsx)(l.B,{filters:{teams:["Yours"]}}),description:n})},query:y,setQuery:C})})}var b=n(18406),g=n(97185),x=n(94171),j=n(94145),v=n(39186),y=n(94441),C=n(63831);function MethodBoardSelect(e){let{createOptionsState:t,dispatchCreateOptions:n}=e,{workspace:a}=(0,f.cF)(),o=(0,f.BH)(a),{availableOptions:l,selectedBoards:s}=(0,C.Z)({workspaceId:a.id,boardsEnabled:o,selected:t.boards});return o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{className:"label-small",children:"Boards"}),(0,r.jsx)(y.Z,{options:l,selected:t.boards,onChang)}),(0,r.jsx)(v.Z,{boards:s})]}):(0,r.jsx)("div",{})}var w=n(15127),N=n(44665),P=n(75909);function ImportProject(e){let{createOptionsState:t,dispatchCreateOptions:n}=e,o=(0,a.useRef)(null),l=t.import.fileName,handleFileChange=async e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!a)return;let o=new FileReader;o.onload=async e=>{var r;let o=null===(r=e.target)||void 0===r?void 0:r.result;n({type:"update-import",payload:{...t.import,json:o,fileName:a.name}})},o.readAsText(a)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"file",name:"file",accept:".json",ref:o,className:"invisible absolute left-0 top-0 h-full w-full",onChange:handleFileChange}),(0,r.jsx)("div",{className:"animate-simpleEnter mt-1 flex w-full items-center space-x-3",children:(0,r.jsxs)("button",{className:"btn-gray-border w-full text-sm",onClic},children:[(0,r.jsx)(s.rG2,{className:"mr-2",width:16,height:16}),l||"Choose File"]})})]})}var k=n(32517),_=n(78066),D=n(73235),O=n(66547),S=n(40230),B=n(26806);function _templateObject(){let e=(0,D._)(["\n    mutation CreateProject($data: ProjectCreateInput!) {\n  createProject(data: $data) {\n    ...Project\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let F=(0,O.ZP)(_templateObject(),S.q);function duplicateProject_templateObject(){let e=(0,D._)(["\n    mutation DuplicateProject($data: ProjectDuplicateInput!) {\n  duplicateProject(data: $data) {\n    ...Project\n  }\n}\n    ",""]);return duplicateProject_templateObject=function(){return e},e}let I=(0,O.ZP)(duplicateProject_templateObject(),S.q);var Z=n(33512);function importProject_templateObject(){let e=(0,D._)(["\n    mutation ImportProject($projectVersionJSON: String!, $workspaceId: String!, $name: String, $boards: [ProjectOnBoardInput!]) {\n  importProject(\n    projectVersionJSON: $projectVersionJSON\n    workspaceId: $workspaceId\n    name: $name\n    boards: $boards\n  ) {\n    ...ProjectVersion\n  }\n}\n    ",""]);return importProject_templateObject=function(){return e},e}let E=(0,O.ZP)(importProject_templateObject(),Z.c);var $=n(86414),A=n(1422),R=n(77512),T=n(5632),M=n(56958);let L=[{name:"New",value:x.fm.Blank,Icon:s.pOD,Component:function(e){let{createOptionsState:t,dispatchCreateOptions:n}=e,{workspace:a}=(0,f.cF)(),o=(0,f.NK)(a,m.TT.Multilingual);return o?(0,r.jsxs)(N.Z,{children:[(0,r.jsx)("label",{className:"label-small",children:"Default Language"}),(0,r.jsx)(w.b,{languages:Object.values(m.sp),selectedLanguage:t.blank.language,onChange:e=>{let{id:r}=e;return n({type:"update-blank",payload:{...t.blank,language:r}})}})]}):null}},{name:"Make Copy",value:x.fm.Duplicate,Icon:s.TIy,Component:function(e){let{createOptionsState:t,dispatchCreateOptions:n}=e;return(0,r.jsx)(N.Z,{children:(0,r.jsx)(P.Z,{selected:{id:t.duplicate.id},onChange:e=>n({type:"update-duplicate",payload:{id:e.id}})})})}},{name:"Import",value:x.fm.Import,Icon:s.rG2,Component:function(e){let{createOptionsState:t,dispatchCreateOptions:n}=e;return(0,r.jsx)(N.Z,{children:(0,r.jsx)(ImportProject,{createOptionsState:t,dispatchCreateOptions:n})})},userFeatureFlag:m.lR.ImportExportProject}];function CreateProductDemoModal(e){let{open:t,handleClose:n,createOptionsState:o,dispatchCreateOptions:l}=e,[s,i]=(0,a.useState)(!1),c=(0,T.useRouter)(),[,d]=B.Db(F),[,u]=B.Db(E),[,p]=B.Db(I),{workspace:h}=(0,f.cF)(),b=(0,f.BH)(h),g=(0,a.useCallback)(()=>{i(!1),l({type:"update-name",payload:""}),l({type:"update-boards",payload:[]})},[l]),v=(0,a.useCallback)((e,t)=>{if(e){(0,k.Rn)((0,A.q)(e.message));return}t?($.Z.track("project_created"),c.push({pathname:"/[workspace_slug]/product-demos/[id]",query:{workspace_slug:h.slug,id:t.id}})):(0,k.Rn)("Error creating project")},[c,h.slug]),y=(0,a.useCallback)(async()=>{var e;let t=await d({data:{name:o.name,workspaceId:null==h?void 0:h.id,migrationStatus:m.PI.Completed,boards:o.boards.map(e=>({boardId:e.id})),defaultLanguage:o.blank.language}});v(t.error,null===(e=t.data)||void 0===e?void 0:e.createProject)},[d,o.name,o.boards,o.blank.language,null==h?void 0:h.id,v]),C=(0,a.useCallback)(async()=>{var e;let t=await p({data:{name:o.name,projectId:o.duplicate.id,boards:o.boards.map(e=>({boardId:e.id}))}});v(t.error,null===(e=t.data)||void 0===e?void 0:e.duplicateProject)},[p,v,o.boards,o.duplicate.id,o.name]),w=(0,a.useCallback)(async e=>{var t,n;let{name:r,projectVersionJSON:a,workspaceId:l}=e,s=await u({name:r,projectVersionJSON:a,workspaceId:l,boards:o.boards.ma))});if(s.error)throw(0,k.oj)(s.error),Error(s.error.message);if(!(null===(t=s.data)||void 0===t?void 0:t.importProject))throw(0,k.Rn)("Error importing project"),Error("Error importing project");return null===(n=s.data)||void 0===n?void 0:n.importProject},[u,o.boards]),N=(0,a.useCallback)(async()=>{if(!o.import.json||!(null==h?void 0:h.id))return;try{JSON.parse(o.import.json)}catch(e){(0,k.Rn)("Invalid JSON");return}let e=await w({name:o.name||void 0,projectVersionJSON:o.import.json,workspaceId:null==h?void 0:h.id});$.Z.track("project_imported"),$.Z.track("project_created"),c.push({pathname:"/[workspace_slug]/product-demos/[id]",query:{workspace_slug:h.slug,id:null==e?void 0:e.projectId}})},[w,o.import.json,o.name,c,null==h?void 0:h.id,h.slug]),P=(0,a.useCallback)(e=>{switch(e){case x.fm.Blank:return y;case x.fm.Duplicate:return C;case x.fm.Import:return N;default:return(0,k.Rn)("Invalid method"),y}},[y,C,N]),D=(0,a.useCallback)(async()=>{if(!o.name){(0,k.Rn)("Please give your product demo a name");return}if(b&&!o.boards.length){(0,k.Rn)("Please select at least one board");return}i(!0);let e=P(o.method);M.A.promise(async()=>{await e(),i(!1),g(),n()},{loading:"Creating product demo...",success:"Created product demo",error:k.bW})},[P,n,g,o.method,o.name,o.boards,b]);return(0,r.jsxs)(_.Z,{title:"Create Product Demo",containerClass:"mt-10",open:t,handleClose:n,handleReset:g,handleNext:D,nextText:"Create",nextDisabled:s,nextOnEnter:!0,children:[(0,r.jsx)(R.oi,{className:"mb-4 w-full",labelText:"Name",placeholder:"Enter name",value:o.name,onChange:e=>l({type:"update-name",payload:e})}),(0,r.jsx)(j.Z,{methods:L,createOptionsState:o,dispatchCreateOptions:l}),(0,r.jsx)("div",{className:"mt-4"}),(0,r.jsx)(MethodBoardSelect,{createOptionsState:o,dispatchCreateOptions:l})]})}var z=n(41044),q=n(16548),V=n(48464),K=n(69260),W=n(95965}let H=[{name:"Labels",key:"tags",rende}},{name:"Archived",key:"archived",default:!0}];function ProductDemoFilters(){let[e,t]=useProductDemoFilters(),{reset:n}=(0,V.Z)(K.Dq);return(0,r.jsx)(z.Z,{filterOptions:H,filters:e,setFilters:t,reset:n})}var U=n(15329),G=n(11029),J=n(47409),Q=n(75433);function toggleBoardProjectPin_templateObject(){let e=(0,D._)(["\n    mutation ToggleBoardProjectPin($boardId: String!, $projectId: String!, $pinned: Boolean!) {\n  toggleBoardProjectPin(boardId: $boardId, projectId: $projectId, pinned: $pinned) {\n    ...BoardProject\n  }\n}\n    ",""]);return toggleBoardProjectPin_templateObject=function(){return e},e}let X=(0,O.ZP)(toggleBoardProjectPin_templateObject(),Q.D);var Y=n(28299),ee=n(46085),et=n(20851);let ProjectGri},ProjectsPageLoading=()=>(0,r.jsx)(ProjectGrid,{children:Array.from({length:6}).ma))});function ProductDemoGrid(e){let{projects:t,projectPermission:n,fetching:o,searchText:l,hasFilters:i,canEdit:c,handleClickCreate:u,promptSelectBoardWhenEmpty:p,boardId:f}=e,[h,b]=(0,a.useState)(null);return n===m.KA.None?(0,r.jsx)(U.Z,{}):o?(0,r.jsx)(ProjectsPageLoading,{}):t.length||o?(0,r.jsxs)(ProjectGrid,{children:[t.map(e=>{let{project:t,pinned:n}=e;return(0,r.jsxs)("div",{"data-test":"project-card","data-testid":"project-card-".concat(t.id),className:"text-primary block justify-between overflow-hidden rounded bg-white shadow-sm ring-1 ring-black/[.08] transition duration-150 hover:shadow-lg",children:[(0,r.jsx)(d.Z,{href:"/product-demos/[id]",query:{id:t.id},children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,r.jsx)("div",{className:"h-28 w-full overflow-hidden bg-gray-50 xl:h-36",children:(0,r.jsx)("div",{className:"relative h-full w-full cursor-pointer",children:(0,r.jsx)(ProjectImagePreview,{project:t})})})})}),(0,r.jsxs)("div",{className:"space-y-1 px-4 py-3",children:[(0,r.jsxs)("div",{className:"justify-left flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{href:"/product-demos/[id]",query:{id:t.id},children:(0,r.jsx)("h2",{className:"cursor-pointer truncate text-base font-medium",children:t.name})}),n?(0,r.jsx)("span",{title:"Demo is pinned to the top of this board",children:(0,r.jsx)(s.qQX,{})}):null]}),(0,r.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,r.jsx)("div",{className:"text-[14px] text-gray-500",children:(0,r.jsx)(LastPublished,{project:t})}),(0,r.jsx)("div",{children:(0,r.jsx)(ProductDemoDropdown,{boardProject:e,boardId:f,onEditModalProjectChange:b})})]})]})]},t.id)}),h?(0,r.jsx)(G.Z,{project:h,open:!!h,handleClose:()=>b(null)}):null]}):p?(0,r.jsx)(EmptyState,{title:"No board selected",description:"Please select a board",canCreate:!1,handleClickCreate:et.EI}):l||i?(0,r.jsx)(EmptyState,{title:"No Product Demos found",description:"Change your search to expand your results.",canCreate:c,handleClickCreate:u}):(0,r.jsx)(EmptyState,{title:"There are no product demos on this board yet",description:"Interactive demos of your application.",canCreate:c,handleClickCreate:u})}function ProductDemoDropdown(e){let{boardProject:t,boardId:n,onEditModalProjectChange:o}=e,[,l]=(0,Y.G)(),[,s]=B.Db(I),[,i]=B.Db(X),{project:c,pinned:d}=t,u=(0,a.useCallback)(()=>{M.A.promise(s({data:{projectId:c.id,boards:[{boardId:n}]}}).then(e=>{if(e.error)throw Error((0,A.q)(e.error.message))}),{loading:"Duplicating ".concat(c.name,"..."),success:"Successfully duplicated ".concat(c.name),error:e=>"Failed to duplicate ".concat(c.name,": ").concat(e.message)})},[s,c.id,c.name,n]),p=(0,a.useCallback)(()=>{let e="Archiving will prevent visitors from accessing this product demo. Are you sure you want to archive ".concat(c.name,"?");confirm(e)&&M.A.promise(l({data:{id:c.id,status:m.kJ.Archived}}).then(e=>{if(e.error)throw Error((0,A.q)(e.error.message))}),{loading:"Archiving ".concat(c.name,"..."),success:"Successfully archived ".concat(c.name),error:e=>"Failed to archive ".concat(c.name,": ").concat(e.message)})},[c.id,c.name,l]),f=(0,a.useCallback)(()=>{M.A.promise(l({data:{id:c.id,status:m.kJ.Active}}).then(e=>{if(e.error)throw Error((0,A.q)(e.error.message))}),{loading:"Unarchiving ".concat(c.name,"..."),success:"Successfully unarchived ".concat(c.name),erro)})},[c.id,c.name,l]),h=[{id:"duplicate",name:"Make copy",onClick:u},{id:"details",name:"Edit details",onClic)},{id:"pin",name:d?"Unpin":"Pin to top",onClick:()=>i({boardId:n,projectId:c.id,pinned:!d})},c.status===m.kJ.Archived?{id:"unarchive",name:"Unarchive",onClick:f}:{id:"archive",name:"Archive",onClick:p}];return(0,r.jsx)(J.Z,{tabs:h})}let ProjectImagePreview=e=>{let{project:t}=e,{screenshot:n,name:a}=t;return n?(0,r.jsx)("img",{src:n,alt:"".concat(a," screenshot")}):null},LastPublished=e=>{let{project:t}=e,{lastPublishedAt:n}=t;return(0,r.jsx)("span",{children:n?"Last published ".concat((0,ee.VG)(n)):"Unpublished"})},EmptyState=e=>{let{title:t,description:n,canCreate:a,handleClickCreate:o}=e;return(0,r.jsx)("div",{className:"flex flex-1 items-center justify-center rounded-md border p-4 text-center text-gray-500 md:p-6",children:(0,r.jsxs)("div",{className:"mx-auto max-w-3xl px-6 py-16 text-center",children:[(0,r.jsx)("div",{className:"text-blue m-auto mb-3 inline-block",children:(0,r.jsx)(s.ReH,{className:"h-8 w-8"})}),(0,r.jsx)("h2",{className:"mb-2 text-lg font-semibold text-gray-800",children:t}),(0,r.jsx)("div",{className:"mb-7 text-base text-gray-500",children:n}),(0,r.jsx)("div",{className:"flex justify-center",children:a&&(0,r.jsx)("button",{className:"btn-zinc text-base font-medium",onClick:o,children:"Create demo"})})]})})};var en=n(81291),er=n(25948),ea=n(54532),eo=n(70805),el=n(55261);function getWorkspaceDefaultBoard_templateObject(){let e=(0,D._)(["\n    query GetWorkspaceDefaultBoard($workspaceId: String!) {\n  workspaceDefaultBoard(workspaceId: $workspaceId) {\n    ...Board\n  }\n}\n    ",""]);return getWorkspaceDefaultBoard_templateObject=function(){return e},e}let es=(0,O.ZP)(getWorkspaceDefaultBoard_templateObject(),el.V);var ei=n(36763),ec=n(91729),ed=n(1706);let eu="Product Demos";function ProductDemosPage(){var e,t,n;let[l,i]=(0,a.useState)(""),{workspace:c}=(0,f.cF)(),[d]=useProductDemoFilters(),{startIndex:h,isStart:g,isEnd:j,setTotalCount:v,getNext:y,getPrev:C,reset:w}=(0,V.Z)(24),N=(0,f.j_)(m.KG.Projects),P=N===m.KA.Edit,[k,_]=(0,a.useState)(!1);(0,ed.Z)({setOpenNew:_});let[{data:D}]=(n={variables:{workspaceId:null==c?void 0:c.id},pause:!(null==c?void 0:c.id)},B.aM({query:es,...n})),O=null==D?void 0:D.workspaceDefaultBoard,S=(0,f.BH)(c),[{data:F,fetching:I}]=(0,u.H)({variables:{workspaceId:null==c?void 0:c.id,filterForCurrentUser:!0},pause:!(null==c?void 0:c.id)||!S}),[Z,E]=(0,ec.c)();!function(e){let{activeBoardId:t,boardsData:n,fetchingBoardsData:r,setActiveBoardId:o,boardsEnabled:l,workspaceDefaultBoard:s}=e;(0,a.useEffect)(()=>{if(l){var e,a,i;if(!t&&(null==n?void 0:null===(e=n.boards)||void 0===e?void 0:e.length))o(n.boards[0].id);else if(!r&&t){let e=(null==n?void 0:null===(a=n.boards)||void 0===a?void 0:a.find(e=>e.id===t))!==void 0;!e&&(null==n?void 0:null===(i=n.boards)||void 0===i?void 0:i.length)&&o(null==n?void 0:n.boards[0].id)}}else t!==(null==s?void 0:s.id)&&o((null==s?void 0:s.id)||"")},[t,n,r,o,l,s])}({activeBoardId:Z,setActiveBoardId:E,boardsData:F,fetchingBoardsData:I,boardsEnabled:S,workspaceDefaultBoard:O});let $=function(e){let{activeBoardId:t,filters:n,searchText:r,startIndex:o,limit:l,showPinnedFirst:s}=e;return(0,a.useMemo)(()=>({data:{skip:o,limit:l,searchText:r||void 0,boardId:t||"",showPinnedFirst:s,...n}}),[n,r,o,t,l,s])}({activeBoardId:Z,filters:d,searchText:l,startIndex:h,limit:24,showPinnedFirst:!0}),[{data:A,fetching:T}]=(0,ei.d)({variables:$,pause:!$.data.boardId,context:$});(0,a.useEffect)(()=>{var e;let t=null==A?void 0:null===(e=A.boardProjects)||void 0===e?void 0:e.count;void 0!==t&&v(t)},[A,v]);let[M,L]=(0,a.useReducer)(x.BS,x.Bu),z=(0,a.useCallback)(()=>{var e;let t=null==F?void 0:null===(e=F.boards)||void 0===e?void 0:e.find(e=>e.id===Z);t&&L({type:"update-boards",payload:[t]})},[Z,null==F?void 0:F.boards]),q=(0,a.useCallback},[z]),K=null==A?void 0:null===(e=A.boardProjects)||void 0===e?void 0:e.results,W=Object.keys(d).length>0,H=!T&&(null==K?void 0:K.length)===0&&!W&&!l;return(0,r.jsxs)(ea.Z,{workspaceItem:m.KG.Projects,children:[(0,r.jsx)(en.Z,{title:eu,includeSlug:!0}),(0,r.jsxs)(b.Z,{children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(er.Z,{title:eu,fetching:T,count:null==A?void 0:null===(t=A.boardProjects)||void 0===t?void 0:t.count}),(0,r.jsxs)("button",{className:(0,p.AK)(P&&!H?"visible":"invisible","btn-zinc px-3 text-sm font-medium"),onClick:q,children:[(0,r.jsx)(s.pOD,{className:"mr-.5 -ml-1 h-3 w-3"}),"Create new"]})]}),(0,r.jsxs)("div",{className:"mb-8 mt-4 flex gap-x-3",children:[(0,r.jsx)(R.E1,{value:l,onChang},className:"w-[20em]",placeholder:"Search demos"}),(0,r.jsx)(ProductDemoFilters,{}),S&&(0,r.jsx)(BoardFilter,{selectedId:Z,setSelectedId:E})]}),(0,r.jsx)(ProductDemoGrid,{promptSelectBoardWhenEmpty:S&&!Z,boardId:Z,projects:K||[],projectPermission:N,fetching:T,searchText:l,hasFilters:W,canEdit:P,handleClickCreate:()=>_(!0)}),(0,r.jsx)("div",{className:"mb-1 mt-10",children:(0,r.jsx)(eo.Z,{isStart:g,isEnd:j,handleNext:y,handlePrev:C})}),(0,r.jsx)(CreateProductDemoModal,{open:k,handleClos),createOptionsState:M,dispatchCreateOptions:L}),(0,r.jsx)(o.Z,{})]})]})}ProductDemosPage.getLayou};var em=ProductDemosPage},341:function(e,t,n){"use strict";var r,a,o,l;n.d(t,{$R:function(){return s},C7:function(){return a},sp:function(){return r}}),(o=r||(r={})).en="en",o.es="es",o.fr="fr",o.de="de",o.pt="pt",o.zhCN="zh-CN",(l=a||(a={})).Next="Next",l.Back="Back",l.Submit="Submit",l.BookDemo="Book Demo";let s={Next:{en:"Next",es:"Pr\xf3ximo",fr:"Suivant",de:"N\xe4chste",pt:"Pr\xf3ximo","zh-CN":"下一个"},Back:{en:"Back",es:"Atr\xe1s",fr:"Retour",de:"Zur\xfcck",pt:"Voltar","zh-CN":"后退"},Submit:{en:"Submit",es:"Enviar",fr:"Soumettre",de:"Einreichen",pt:"Enviar","zh-CN":"提交"},"Book Demo":{en:"Book Demo",es:"Reservar demostraci\xf3n",fr:"R\xe9server une d\xe9mo",de:"Demo buchen",pt:"Reservar demonstra\xe7\xe3o","zh-CN":,n){e.exports=n(78941)}},function(e){e.O(0,[3211,8426,3265,1617,4637,5837,696,4974,9391,9623,4054,7330,9219,5306,6870,7156,6456,(){return e(e.s=34881)}),_N_E=e.O()}]);
//# sourceMappingURL=product-demos-73c7153461436ec2.js.map