import{r as n}from"./rules_bb747cab_r24-02-0_b0_t240129-161140.js";import{f as a,c as d}from"./lsanalytics-login_d6e95fa1_r24-02-0_b0_t240129-161140.js";import{R as t,W as e,G as c}from"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import{s as m}from"./serverToUserErrorMessageTransformer_631b8f39_r24-02-0_b0_t240129-161140.js";const E={mixins:[n,m],datacomputed:{credentialspasswordCustomErrors,mounted(){typeof window=="object"&&(window.onResetPasswordClick=this.onForgotPasswordClick),a()},beforeUnmount(){typeof window=="object"&&window.onResetPasswordClick&&delete window.onResetPasswordClick},methods:{redirectFromJoinPageIfNeeded(){this.$route.name===t.REGISTER&&this.$router.push({name:t.HOME})},resetlogin(){return this.resetServerErrors(),this.componentErrorMsgHtml="",this.submitting=!0,this.$store.dispatch("userProfileState/loginAndGetUser",this.credentials).then(({status:s,cartMerged:o,emailAlreadyExists:i})=>{if(this.submitting=!1,s===e.SUCCESS){if(window.LSCO&&window.LSCO.dtos&&window.LSCO.dtos.globalData&&window.LSCO.dtos.globalData.customer){const r=window.LSCO.dtos.globalData.customer;d(this.email,r.auth_status,r.levi_id,r.city,r.state,r.adobe_id)}return this.$emit("loginSuccess",{cartMerged:o,emailAlreadyExists:i}),this.redirectFromJoinPageIfNeeded(),{success:!0}}if(s===e.INVALID_CREDENTIALS){const{emailLogin:r}=this.serverErrMsgMapper(s);this.serverErrors=r}else s===e.ACCOUNT_LOCKED?this.serverErrors=[this.$t("i18n.AccountLockedError")]:this.componentErrorMsgHtml=this.$t("i18n.technicalDifficultiesTryAgain");return{success:!1}}).catch(s=>{throw this.submitting=!1,new Error(s)})},onForgotPasswordClickresetServerErrors};export{E as l};
