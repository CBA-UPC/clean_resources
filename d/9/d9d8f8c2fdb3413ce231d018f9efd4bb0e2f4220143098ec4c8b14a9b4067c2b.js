/*! For license information please see async-recs-feature-c5fcfa169a562af1a8f2.js.LICENSE.txt */
"use strict";(globalThis.webpackChunktinderweb=globalThis.webpackChunktinderweb||[]).push([[20880],{453960:(e,t,s)=>{s.d(t,{Rp:()=>l,mu:()=>c});var i=s(915759),o=s(458963);const r=2*i.s2,a=e=>({id:e,timestamp:Date.now()}),l=(e,t,s=50)=>{if(e){return[a(e)].concat(t).slice(0,s)}return t},c=e=>e.filter((e=>!(0,o.Z)(e.timestamp,r)))},621733:(e,t,s)=>{s.d(t,{Ub:()=>r,jn:()=>l,lC:()=>a,o3:()=>c});var i=s(799327),o=s(229155);const r=(0,i.PH)(o.UPDATE_PROFILE_ACTIVE_PHOTO,((e,t)=>({activePhotoIndex:t,id:e._id}))),a=(0,i.PH)(o.UPDATE_PROFILE_CONFIRMED_STATUS,((e,t,s=!1)=>s?{id:e._id,likesYouConfirmedStatus:t}:{id:e._id,confirmedStatus:t})),l=(0,i.PH)(o.SET_MATCH_SELFIE_VERIFICATION_STATUS,((e,t)=>({matchId:e,status:t}))),c=(0,i.PH)(o.CHECK_SELFIE_VERIFICATION_NEEDED,(e=>({matchId:e})))},933240:(e,t,s)=>{s.d(t,{AK:()=>p,Bg:()=>n,GK:()=>h,Iu:()=>_,MV:()=>u,UA:()=>c,YG:()=>r,Yz:()=>R,g9:()=>E,nh:()=>y,qA:()=>T,ql:()=>o,th:()=>a,tv:()=>d,zv:()=>l,zx:()=>S});var i=s(57250);const o=(0,s(799327).cF)("boost"),r=(0,i.createSelector)(o,(e=>e.resets_at)),a=(0,i.createSelector)(o,(e=>e.boost_refresh_interval_unit)),l=(0,i.createSelector)(o,(e=>e.boost_id)),c=(0,i.createSelector)(o,(e=>e.multiplier)),d=(0,i.createSelector)(o,(e=>e.is_super_boost)),n=(0,i.createSelector)(o,(e=>e.is_primetime_boost)),E=(0,i.createSelector)(o,(e=>e.duration)),u=(0,i.createSelector)(o,(e=>e.consumed_from||0)),_=(0,i.createSelector)(o,(e=>e.sourceVersion)),S=(0,i.createSelector)(o,(e=>e.remaining||0)),R=(0,i.createSelector)(o,(e=>e.primetime_boost_remaining||0)),p=(0,i.createSelector)(S,(e=>0===e)),y=(0,i.createSelector)(o,(e=>e.expires_at)),h=(0,i.createSelector)(o,(e=>!!(e.expires_at&&e.expires_at>Date.now()))),T=(0,i.createSelector)(o,(e=>e.boostTimerStarted))},566039:(e,t,s)=>{s.d(t,{H9:()=>c,OM:()=>E,fd:()=>l,s8:()=>d,ud:()=>n});var i=s(490982),o=s.n(i),r=s(799327),a=s(355899);const l=(0,r.PH)(a.FETCH_LIKES_SENT_RECS,(e=>({nextPage:e}))),c=(0,r.PH)(a.FETCH_LIKES_SENT_RECS_REQUEST),d=(0,r.PH)(a.FETCH_LIKES_SENT_RECS_SUCCESS,((e,t=!0)=>({replaceResults:t,...e}))),n=(0,r.PH)(a.FETCH_LIKES_SENT_RECS_ERROR),E=(o()(l,5e3),(0,r.PH)(a.LIKES_SENT_DISLIKE,(e=>e)))},355899:(e,t,s)=>{s.r(t),s.d(t,{FETCH_LIKES_SENT_RECS:()=>i,FETCH_LIKES_SENT_RECS_ERROR:()=>a,FETCH_LIKES_SENT_RECS_REQUEST:()=>o,FETCH_LIKES_SENT_RECS_SUCCESS:()=>r,LIKES_SENT_DISLIKE:()=>l});const i="FETCH_LIKES_SENT_RECS",o="FETCH_LIKES_SENT_RECS_REQUEST",r="FETCH_LIKES_SENT_RECS_SUCCESS",a="FETCH_LIKES_SENT_RECS_ERROR",l="LIKES_SENT_DISLIKE"},134302:(e,t,s)=>{s.d(t,{PE:()=>l,Yn:()=>r,yi:()=>a});var i=s(799327),o=s(602956);const r=(0,i.PH)(o.OTHER_USER_GET_BY_ID,(({id:e})=>({id:e}))),a=(0,i.PH)(o.OTHER_USER_GET_BY_ID_SUCCESS,(e=>e)),l=(0,i.PH)(o.OTHER_USER_GET_BY_ID_ERROR,(e=>e))},602956:(e,t,s)=>{s.r(t),s.d(t,{OTHER_USER_GET_BY_ID:()=>i,OTHER_USER_GET_BY_ID_ERROR:()=>o,OTHER_USER_GET_BY_ID_SUCCESS:()=>r});const i="OTHER_USER_GET_BY_ID",o="OTHER_USER_GET_BY_ID_ERROR",r="OTHER_USER_GET_BY_ID_SUCCESS"},545117:(e,t,s)=>{s.d(t,{r0:()=>r,sl:()=>a});var i=s(799327),o=s(886012);const r=(0,i.PH)(o.RECS_PERFORMANCE,(e=>e)),a=(0,i.PH)(o.UPDATES_PERFORMANCE,(e=>e));(0,i.PH)(o.TRACK_API_PERFORMANCE,(e=>e))},886012:(e,t,s)=>{s.r(t),s.d(t,{RECS_PERFORMANCE:()=>i,TRACK_API_PERFORMANCE:()=>r,UPDATES_PERFORMANCE:()=>o});const i="RECS_PERFORMANCE",o="UPDATES_PERFORMANCE",r="TRACK_API_PERFORMANCE"},868436:(e,t,s)=>{s.r(t),s.d(t,{_loadRecByIdSaga:()=>Fe,_loadRecsSaga:()=>Ye,_recDislikeSaga:()=>Pe,_recLikeSaga:()=>ke,_recRewindSaga:()=>be,_recSuperlikeSaga:()=>Oe,handleHomeScreenPrompt:()=>pe,handlePriorityLikes:()=>Ce,handleSuperlikeUpsell:()=>Te,loadRecByIdSaga:()=>Be,loadRecsChannel:()=>He,loadRecsChannelSaga:()=>Ne,loadRecsSaga:()=>ze,loadRecsWithBackoffSaga:()=>De,recDislikeSaga:()=>fe,recLikeSaga:()=>ge,recRewindSaga:()=>Le,recSuperlikeSaga:()=>me,showAddToHomescreenSaga:()=>Se,updateFastMatchDetails:()=>ye,updateLikesSentDetails:()=>he});var i=s(13241),o=s(373199),r=s(991931),a=s.n(r),l=s(112954),c=s.n(l),d=s(671502),n=s(897696),E=s(291640),u=s(13124),_=s(50377),S=s(832379),R=s(610747),p=s(915759),y=s(586691),h=s(263880),T=s(892569),C=s(872885),I=s(799327),g=s(259668),m=s(458963),f=s(362570),L=s(235430),k=s(517727),b=s(173969),U=s(621733),v=s(894089),O=s(933240),P=s(474712),A=s(551661),w=s(787165),M=s(405291),K=s(928610),N=s(662310),H=s(661996),D=s(566039),Y=s(355899),z=s(911654),F=s(731917),B=s(134302),q=s(602956),W=s(545117),G=s(669974),Q=s(568343),V=s(386494),Z=s(268714),x=s(200711),j=s(759396),$=s(639859),X=s(463608),J=s(233874),ee=s(479682),te=s(494421),se=s(20115),ie=s(76553);function*oe(e,t){const s=!!e.swipe_note,o=e._id;if(s){const r=e.liked_content_id,a={otherId:o,interactionValue:(0,ie.pb)(!!s),receivedMediaId:r,...t};yield(0,i.gz)((0,X.L)(se.TR,a))}}var re=s(543753),ae=s(491938),le=s(3088),ce=s(604640),de=s(612596),ne=s(691220),Ee=s(909627),ue=s(815926);const _e=(0,T.Z)();function*Se(){const e=(0,F.pe)();if(null!==e){e.prompt(),_e.execute(S.zi,{category:S.WE,action:S.kV,label:"RecsLogic",message:"Show Browser Prompt"});const t=yield e.userChoice;t&&"accepted"===t.outcome?(_e.execute(S.zi,{category:S.WE,action:S._M,label:"RecsLogic",message:"Accept Browser Prompt"}),yield(0,i.gz)((0,z.c0)({theme:le.LC,title:[{id:"success"}],body:[{id:"modals.addToHomeScreen.success"}]}))):_e.execute(S.zi,{category:S.WE,action:S._M,label:"RecsLogic",message:"Reject Browser Prompt"}),(0,F.KU)()}}function*Re(e,t,s){let o=e?.payload?.recUser;o||(o=yield(0,i.Ys)(ue.MY));const r=o?._id;if(r)return yield(0,i.gz)((0,U.lC)(o,t,s)),o=yield(0,i.Ys)(w.QG,r),o}function*pe(){const e=yield(0,i.Ys)(x.T8),t=(0,F.pe)();if((0,n._k)("lite")||e)return void(t&&(0,F.KU)());const s=yield(0,i.Ys)(A.qK),o=yield(0,i.Ys)(A.bt),r="iOS"===s&&"Mobile Safari"===o&&!f.Z;(yield(0,i.Ys)(ue.I4))>5&&(t?(_e.execute(S.zi,{category:S.WE,action:S.kV,label:"RecsLogic",message:"Show Homescreen Modal"}),yield(0,i.gz)((0,N.h)(H.pX,{props:{handleAccept:(0,z.Mp)(),handleCloseModal:()=>{(0,F.KU)()}}})),yield(0,i.gz)((0,Z.g4)({upsellType:"homeScreenTooltip"}))):r&&(_e.execute(S.zi,{category:S.WE,action:S.kV,label:"RecsLogic",message:"Show Homescreen Tooltip"}),yield(0,i.gz)((0,z.P7)()),yield(0,i.gz)((0,Z.g4)({upsellType:"homeScreenTooltip"}))))}function*ye(e){(yield(0,i.Ys)(Q.L6))&&(e&&(yield(0,i.gz)((0,M.mm)())),yield(0,i.RE)(o.Z,1e3),yield(0,i.gz)((0,M.aR)()))}function*he(e){(yield(0,i.Ys)(Q.L6))&&e&&(yield(0,i.gz)((0,D.fd)()))}function*Te(){yield(0,i.gz)((0,de.H3)()),yield(0,i.gz)((0,de.HT)()),yield(0,i.gz)((0,N.h)(H.kK)),yield(0,i.gz)((0,Z.g4)({upsellType:"superlikeHighRsrr",upsellTs:Date.now()}))}function*Ce(){const e=yield(0,i.Ys)(b.y4),t=yield(0,i.Ys)(Q._E);if(e&&!t){const e=yield(0,i.Ys)(ue._w),t=(0,u.s8)(),s=t.readLever(_.hz);if(s&&e>=s){const e=1e3*t.readLever(_.H),s=yield(0,i.Ys)(x.T$);if((0,m.Z)(s,e)){yield(0,i.gz)((0,N.h)(H.fG));const e=Date.now();yield(0,i.gz)((0,Z.g4)({upsellType:"priorityLikes",upsellTs:e}))}else yield(0,i.gz)((0,Z.g4)({upsellType:"priorityLikes"}))}}else yield(0,i.gz)((0,Z.g4)({upsellType:"priorityLikes"}))}function Ie(e={}){return 40012===e.code?"Reactions.contentModerationError":"pleaseTryAgain"}const ge=(0,g.bi)(ke,{name:"recLikeSaga"}),me=(0,g.bi)(Oe,{name:"recSuperlikeSaga",*errorHandler(e){yield(0,i.gz)((0,de.H3)()),yield(0,i.gz)((0,z.c0)({theme:le.k3,title:[{id:"uhOhSomethingWentWrong"}],body:[{id:Ie(e.error)}]}))}}),fe=(0,g.bi)(Pe,{name:"recDislikeSaga"}),Le=(0,g.bi)(be,{name:"recRewindSaga"});function*ke(e){const t=e?.payload,s=e?.type===K.FAST_MATCH_LIKE,r=yield(0,i.Ys)(ue.I4),l=yield(0,i.Ys)(V.lG),d=yield(0,i.Ys)(O.GK),n=yield(0,i.Ys)(Q.L6),E=yield(0,i.Ys)(ue.Wv),S=n&&s,R=yield(0,i.RE)(Re,e,ne.LIKE_STATUS,S);if(!R)return void(0,y.uR)("No rec found",t);const h=R._id,T=R.is_super_like,g=R.s_number,{swipeNoteData:f}=t,U=yield(0,i.Ys)(v.AG,h),A=f||Ue(R,U),w=R.is_traveling,N=yield(0,i.Ys)(x.Ek),D=(0,u.s8)(),Y=R.is_superlike_upsell,z=yield(0,i.Ys)(Q.$Y),F=yield(0,i.Ys)(b.I9),B=yield(0,i.Ys)(x.Kb),q=yield(0,i.Ys)(x.Sl),W=D?.readLever(_.ao),G=D?.readLever(_.o9),Z="DAY"===G?(0,m.Z)(q,p.s2):!B,j=r>1&&Y&&(W&&Z&&!T&&(F||z>0));j&&c()(e,["payload","method"],"upsell_superlike_modal");const $=E===ne.QUEUE_MAIN?"discovery":`explore_${E}`;yield(0,i.RE)(qe,{inputMethod:t.method,recType:ne.LIKE_STATUS,recsUserId:R._id,sNumber:g,categoryId:s?"fastmatch":$}),yield(0,i.rM)(te.Z,R,e,{like:!0,sourceSessionEvent:s?"fastmatch":$,superLike:!1}),yield(0,i.rM)(oe,R,{interactionSide:"receive",interactionType:"like"}),(0,y.uR)("REC LIKE SENT TO SERVER",h);const J=yield(0,i.RE)(yield(0,i.RE)(L.ds,k.NL,"recLike"),h,(0,ce.Hn)({activeBoost:d,didSuperLike:T,isFastMatch:S,swipeNoteData:A,recTraveling:w,sNumber:g,userTraveling:l}));(0,y.uR)("REC LIKE RESULT",J);const{likes_remaining:se,rate_limited_until:ie,match:re}=J||{};if(!re&&!j){const{processedFiles:e}=R?.photos?.[0]||{},t=a()(e,[e?.length-1,"url"]);yield(0,i.gz)((0,de.gW)(t))}if(0===se)(0,y.uR)("YOU ARE OUT OF LIKES",J),yield(0,i.RE)(Re,e,void 0,S),yield(0,i.gz)((0,de.BG)(ie)),yield(0,i.qn)([H.a6]),yield(0,i.gz)((0,de.V)());else if(re){(0,y.uR)("IT WAS A MATCH!",re);const e=yield(0,I.Ff)({data:{match:{...re,person:R}}},Ee.b,!1);yield(0,i.gz)((0,de.Hx)(R,re,e)),yield(0,i.gz)((0,X.L)(ee.Jo,{closerSwipedSource:s?"fastmatch":$,didSuperLike:re.is_super_like,matchId:re._id,otherId:re.other_id})),s||(yield(0,i.RE)(ve,re,R),yield(0,i.RE)(o.Z,1e3),yield(0,i.gz)((0,M.aR)())),yield(0,i.RE)(ye,s)}else j?(yield(0,i.RE)(Re,e,void 0,S),yield(0,i.RE)(Te)):N||(yield(0,i.RE)(Ce));yield(0,i.RE)((0,C.pV)(P.mR).block),yield(0,i.RE)(pe)}function*be(){const e=yield(0,i.Ys)(ue.MY),t=yield(0,i.Ys)(ue.Wv),s=t===ne.QUEUE_MAIN?"discovery":`explore_${t}`;if(e){yield(0,i.RE)(qe,{inputMethod:void 0,recType:ne.RECS_REWIND,recsUserId:e._id,sNumber:e.s_number,categoryId:s});if("superlike"===(yield(0,i.Ys)(v.Hn,e._id))){const t=yield(0,i.RE)(yield(0,i.RE)(L.ds,k.NL,"removeSuperlike"),e._id);yield(0,i.gz)((0,de.jY)(t.super_likes))}yield(0,i.RE)(Re,{payload:{recUser:e}},void 0,!!e.likesYouConfirmedStatus),yield(0,i.gz)((0,de.H3)())}}function Ue(e,t=0){const s=e?.photos?.[t];return{likedContentId:s?.id||"",likedContentType:"photo"}}function*ve(e,t){const s=yield(0,i.Ys)(b.H7);yield(0,i.gz)((0,N.h)(H.kD,{props:{backdropFilter:!0,backgroundClassName:"Bgc($c-ds-background-modal-overlay-recs)",handleCloseModal:de.tB,handleModalOpen:de.lr,match:{match:e,rec:t},renderTarget:s?E.ev:E.C1}}))}function*Oe(e){const t=e?.payload,s=yield(0,i.Ys)(Q.L6),o=yield(0,i.Ys)(O.GK),r=e?.type===K.FAST_MATCH_SUPERLIKE,a=s&&r,l=yield(0,i.Ys)(ue.Wv),c=yield(0,i.RE)(Re,e,ne.SUPERLIKE_STATUS,r);if(!c)return void(0,y.uR)("No rec found",t);const d=yield(0,i.Ys)(V.lG),n=c._id,E=c.s_number,{swipeNoteData:u}=t,_=yield(0,i.Ys)(v.AG,n),S=u||Ue(c,_),R=c.is_traveling,h=l===ne.QUEUE_MAIN?"discovery":`explore_${l}`;yield(0,i.RE)(qe,{inputMethod:t.method,recType:ne.SUPERLIKE_STATUS,recsUserId:c._id,sNumber:E,categoryId:r?"fastmatch":h}),yield(0,i.rM)(te.Z,c,e,{like:!1,superLike:!0,sourceSessionEvent:r?"fastmatch":h}),(0,y.uR)("REC SUPER LIKE SENT TO SERVER",n);const T=yield(0,i.RE)(yield(0,i.RE)(L.ds,k.NL,"recSuperlike"),n,(0,ce.Hn)({activeBoost:o,isFastMatch:a,recTraveling:R,sNumber:E,swipeNoteData:S,userTraveling:d}));(0,y.uR)("REC SUPER LIKE RESULT",T);const{limit_exceeded:C,super_likes:g,match:m}=T||{};if(C){(0,y.uR)("YOU ARE OUT OF SUPER LIKES"),yield(0,i.RE)(Re,e,void 0,a),yield(0,i.gz)((0,de.oR)(g.resets_at)),yield(0,i.qn)([H.a6]),yield(0,i.gz)((0,de.K7)());const t=yield(0,i.Ys)(Q.cF);yield(0,i.gz)((0,X.L)(se.Qb,{otherId:n,percentLikesLeft:t?100:0,timeRemaining:Math.floor((new Date(g.resets_at).getTime()-Date.now())/p.WT)}))}else if(m){(0,y.uR)("IT WAS A MATCH!");const e=yield(0,I.Ff)({data:{match:{...m,person:c}}},Ee.b,!1);yield(0,i.gz)((0,de.Hx)(c,m,e)),yield(0,i.gz)((0,X.L)(ee.Jo,{closerSwipedSource:h,didSuperLike:m.is_super_like,matchId:m._id,otherId:m.other_id})),yield(0,i.gz)((0,de.Rv)(g)),r||(yield(0,i.RE)(ve,m,c))}else yield(0,i.gz)((0,de.Rv)(g));yield(0,i.RE)(ye,r)}function*Pe(e){const t=yield(0,i.Ys)(Q.L6),s=e?.type===K.FAST_MATCH_DISLIKE,o=t&&s,r=e?.type===Y.LIKES_SENT_DISLIKE,a=yield(0,i.RE)(Re,e,ne.NOPE_STATUS,o),l=yield(0,i.Ys)(V.lG),c=yield(0,i.Ys)(ue.Wv),d=a._id,n=a.is_super_like,E=a.s_number,u=a.is_traveling,_=c===ne.QUEUE_MAIN?"discovery":`explore_${c}`;yield(0,i.RE)(qe,{inputMethod:e.payload.method,recType:ne.NOPE_STATUS,recsUserId:a._id,sNumber:E,categoryId:s?"fastmatch":_}),yield(0,i.rM)(te.Z,a,e,{like:!1,superLike:!1,sourceSessionEvent:s?"fastmatch":_}),yield(0,i.rM)(oe,a,{interactionSide:"receive",interactionType:"pass"}),(0,y.uR)("REC DISLIKE SENT TO SERVER",d);const S=yield(0,i.Ys)(O.GK),R=yield(0,i.RE)(yield(0,i.RE)(L.ds,k.NL,"recDislike"),d,(0,ce.Hn)({activeBoost:S,didSuperLike:n,isFastMatch:o,recTraveling:u,sNumber:E,userTraveling:l}));(0,y.uR)("REC DISLIKE RESULT",R),yield(0,i.RE)(ye,s),yield(0,i.RE)(he,r),yield(0,i.RE)((0,C.pV)(P.mR).block),yield(0,i.RE)(pe)}const Ae=2*p.WT,we=30*p.WT,Me=p.yR;let Ke=Ae;function*Ne(){const e=yield(0,i.rM)(He);yield(0,i.qn)(ne.CANCEL_RECS_CHANNEL),yield(0,i.al)(e)}function*He(){let e=!1;for(;;){const t=yield(0,i.rM)(De);e&&(e=!1,yield(0,i.gz)((0,de.dj)())),yield(0,i.qn)(ne.RECS_REFRESH_ACTION_TYPES),(0,y.uR)("Clearing recs and fetching more"),yield(0,i.gz)((0,de.D_)()),yield(0,i.al)(t),Ke=Ae,e=!0}}function*De(){const e=[ne.LOAD_RECS,ne.RECS_LIKE,ne.RECS_DISLIKE,ne.RECS_SUPERLIKE,ne.LOAD_RECS_SUCCESS],t=yield(0,i.ZO)(e,d.Ef.sliding(1));for(yield(0,i.gz)((0,de.dj)());;){yield(0,i.qn)(t);const e=yield(0,i.Ys)(ue.p3),s=(yield(0,i.Ys)(ue.Wv))===ne.QUEUE_MAIN,r=e<10,a=yield(0,i.Ys)(j.yc),l=r&&a&&s;(0,y.uR)("should load more recs?",l),l&&(yield(0,i.RE)(ze),yield(0,i.RE)(o.Z,Ke))}}function*Ye(){(0,y.uR)("STARTED GETTING RECS");const e=yield(0,i.Ys)((e=>!e.sparks.recsReqEndTime)),t=(0,G.f)(),s=(0,u.s8)()?.readLever(_.m);e&&(yield(0,i.gz)((0,X.L)(se.Xy)));const o=yield(0,i.RE)(yield(0,i.RE)(L.ds,k.NL,"getRecs"),t,s),r=yield(0,I.Ff)(o,Ee.E,!1),{entities:a,result:l}=r,{data:c=R.FD}=o||R.FD,{profiles:d=R.FD}=a||R.FD,{queue:n}=l||{},{timeout:E}=c;if(t&&(yield(0,i.gz)((0,W.r0)(o))),e&&(yield(0,i.gz)((0,X.L)(se.rf))),n?.length){const e=new Set(yield(0,i.Ys)(ue.wR)),t=new Set(yield(0,i.Ys)(ue.m1)),s=n.filter((e=>"user"===d[e]?.type)).filter((e=>!t.has(e))).filter((t=>!e.has(t)));if(s?.length){(0,y.uR)("loaded recs"),Ke=Ae;const e={...r,result:{queue:s}};yield(0,i.gz)((0,de.$R)(e,ne.QUEUE_MAIN))}else(0,y.uR)("exhausted"),Ke=Math.min(1.5*Ke,Me),yield(0,i.gz)((0,de.dj)())}else(0,y.uR)("timeout"),Ke=null!=E?E:we,yield(0,i.gz)((0,de.G5)()),yield(0,i.gz)((0,de.dj)())}const ze=(0,g.bi)(Ye,{name:"loadRecsSaga",*errorHandler(e){yield(0,i.gz)((0,de.w_)()),e instanceof h.Yh&&(Ke=Math.min(1.5*Ke,Me),yield(0,i.gz)((0,de.dj)()))}});function*Fe(e){const{id:t}=e.payload;yield(0,i.gz)((0,B.Yn)({id:t}));const s=yield(0,i.qn)([q.OTHER_USER_GET_BY_ID_ERROR,q.OTHER_USER_GET_BY_ID_SUCCESS]);if(s.payload.entities.profiles[t]){const e={...s.payload,result:{queue:[t]}};yield(0,i.gz)((0,de.$R)(e)),yield(0,i.gz)((0,de.Po)())}else yield(0,i.gz)((0,de.ed)())}const Be=(0,g.bi)(Fe,{name:"loadWebProfileRecSaga",*errorHandler(e){yield(0,i.gz)((0,de.ed)(e))}});function*qe(e){const{inputMethod:t,recType:s,recsUserId:o,sNumber:r,categoryId:a}=e;let l,c;switch(s){case ne.LIKE_STATUS:t!==ne.recsRateMethods.button&&t!==ne.recsRateMethods.keyboard||(l=re.L5,c=$.RW),t!==ne.recsRateMethods.profileButton&&t!==ne.recsRateMethods.profileKeyboard||(l=re.Bi,c=$.RW),t===ne.recsRateMethods.swipe&&(l=re.AR,c=$.e6);break;case ne.NOPE_STATUS:t!==ne.recsRateMethods.button&&t!==ne.recsRateMethods.keyboard||(l=re.Zv,c=$.RW),t!==ne.recsRateMethods.profileButton&&t!==ne.recsRateMethods.profileKeyboard||(l=re.TZ,c=$.RW),t===ne.recsRateMethods.swipe&&(l=re.jf,c=$.cU);break;case ne.SUPERLIKE_STATUS:t!==ne.recsRateMethods.button&&t!==ne.recsRateMethods.keyboard&&t!==J.L7||(l=re.je,c=$.RW),t!==ne.recsRateMethods.profileButton&&t!==ne.recsRateMethods.profileKeyboard&&t!==J._8&&t!==J.hV||(l=re._i,c=$.RW),t!==ne.recsRateMethods.swipe&&t!==J.XV||(l=re.P3,c=$.h4);break;case ne.RECS_REWIND:l=re.al,c=$.RW}l&&c&&(yield(0,i.gz)((0,ae.TW)({uuid:l,type:c,recsStatusInfo:{userId:o,sNumber:r.toString(),categoryId:a}})))}},462882:(e,t,s)=>{s.r(t),s.d(t,{persistConfig:()=>y,recsReducer:()=>E,reducer:()=>p});var i=s(343599),o=s(454936),r=s(794128),a=s(453960),l=s(351843),c=s(907379),d=s(691220),n=s(218290);const E=(0,i.ZP)(((e,t)=>{const{chatBubbleIntro:s,likedRecPhotos:i,previouslySwiped:o,status:r}=n.default.recs;((e,t,s)=>{switch(t.type){case d.SET_QUEUE:e.queues[e.activeQueue]=t.payload;break;case d.SET_ACTIVE_QUEUE:e.activeQueue=t.payload,e.queues[t.payload]||(e.queues[t.payload]=[]);break;case d.LOAD_RECS_SUCCESS:{const{queue:s,result:i}=t.payload,o=s||e.activeQueue,r=e.queues[o],a=i?.queue?.filter((e=>!r.includes(e)));e.queues[o]=e.queues[o].concat(a),e.error=!1;break}case d.CLEAR_RECS:e.queues[e.activeQueue]=s.queues[e.activeQueue];break;case d.RECS_LIKE:case d.RECS_DISLIKE:case d.RECS_SUPERLIKE:{e.onePreviousRec=e.previousRec;const t=e.queues[e.activeQueue].shift()??null;Object.keys(e.queues).forEach((s=>{e.queues[s]=e.queues[s]?.filter((e=>e!==t))})),e.previousRec=t;break}case d.REC_OUT_OF_LIKES:case d.REC_OUT_OF_SUPERLIKES:e.previousRec&&(e.queues[e.activeQueue].unshift(e.previousRec),e.previousRec=e.onePreviousRec);break;case d.RECS_REWIND_SUCCESS:e.previousRec&&(e.queues[e.activeQueue].unshift(e.previousRec),e.previousRec=s.previousRec);break;case d.SET_PREVIOUS_REC:e.previousRec=t.payload;break;case d.REC_MATCH:t.payload?.match?.is_fast_match||(e.previousRec=s.previousRec);break;case c.FETCH_UPDATES_SUCCESS:{const s=new Set,{result:i}=t?.payload||{},{blocks:o=[],matches:r=[]}=i||{};if([...o,...r].forEach((e=>{s.add(e.substr(0,24)),s.add(e.substr(24,24))})),!s.size)break;Object.keys(e.queues).forEach((t=>{e.queues[t]=e.queues[t]?.filter((e=>!s.has(e)))}));break}case d.LOAD_RECS_ERROR:e.error=!0;break;case(0,l.dh)(t.type):e.queues=s.queues}})(e,t,n.default.recs),((e,t,s)=>{switch(t.type){case d.LOAD_RECS:e.status=l.ik;break;case d.LOAD_RECS_EMPTY:e.status=l.xQ;break;case(0,l.dh)(t.type):e.status=s}})(e,t,r),((e,t,s)=>{switch(t.type){case d.LOAD_RECS:e.previouslySwiped=(0,a.mu)(e.previouslySwiped);break;case d.RECS_DISLIKE:case d.RECS_LIKE:case d.RECS_SUPERLIKE:{const t=e.queues[e.activeQueue][0];if(t){const s=(0,a.Rp)(t,e.previouslySwiped);s?.length&&(e.previouslySwiped=(0,a.mu)(s))}break}case d.REC_OUT_OF_LIKES:case d.REC_OUT_OF_SUPERLIKES:case d.RECS_REWIND_SUCCESS:{const t=e.queues[e.activeQueue][0];t&&(e.previouslySwiped=e.previouslySwiped.filter((e=>e.id!==t)));break}case(0,l.dh)(t.type):e.previouslySwiped=s}})(e,t,o),((e,t,s)=>{switch(t.type){case d.REC_LIKE_WITHOUT_MATCH:{const s=t.payload;s&&(e.likedRecPhotos?.unshift(s),(e.likedRecPhotos?.length??0)>5&&(e.likedRecPhotos=e.likedRecPhotos?.slice(0,5)??null));break}case(0,l.dh)(t.type):e.likedRecPhotos=s}})(e,t,i),((e,t,s)=>{switch(t.type){case d.CHAT_BUBBLE_CONFIRMED:e.chatBubbleIntro=!0;break;case(0,l.dh)(t.type):e.chatBubbleIntro=s}})(e,t,s)}),n.default.recs),u=(0,i.ZP)(((e,t)=>{const{outOfLikes:s,outOfRecs:i,outOfSuperlikes:o}=n.default.session;((e,t,s)=>{switch(t.type){case d.REC_OUT_OF_LIKES:e.outOfLikes=!0;break;case d.REC_OUT_OF_LIKES_SUCCESS:e.outOfLikes=!1;break;case(0,l.dh)(t.type):e.outOfLikes=s}})(e,t,s),((e,t,s)=>{switch(t.type){case d.LOAD_RECS_SUCCESS:e.outOfRecs=!1;break;case d.LOAD_RECS_EMPTY:e.outOfRecs=!0;break;case(0,l.dh)(t.type):e.outOfRecs=s}})(e,t,i),((e,t,s)=>{switch(t.type){case d.REC_OUT_OF_SUPERLIKES:e.outOfSuperlikes=!0;break;case d.REC_OUT_OF_SUPERLIKES_SUCCESS:e.outOfSuperlikes=!1;break;case(0,l.dh)(t.type):e.outOfSuperlikes=s}})(e,t,o)}),n.default.session),_=(0,i.ZP)(((e,t)=>{switch(t.type){case d.REC_MATCH:{const s=t.payload.match?._id;s&&(e.recentlyMatchedMatchIds.push(s),e.recentlyMatchedMatchIds=e.recentlyMatchedMatchIds.slice(-19));break}case(0,l.dh)(t.type):return n.default.matches}}),n.default.matches),S=(0,i.ZP)(((e,t)=>{const{showStarAnimation:s,resets:i,upsellRecId:o}=n.default.superlike;((e,t,s)=>{switch(t.type){case d.TOGGLE_SUPERLIKE_STAR_ANIMATION:e.showStarAnimation=t.payload?.showSuperlikeStarAnimation;break;case(0,l.dh)(t.type):e.showStarAnimation=s}})(e,t,s),((e,t,s)=>{switch(t.type){case d.SET_SUPERLIKE_UPSELL_REC_ID:e.upsellRecId=t.payload?.recId;break;case(0,l.dh)(t.type):e.upsellRecId=s}})(e,t,o),((e,t,s)=>{switch(t.type){case d.REC_OUT_OF_SUPERLIKES:e.resets=t.payload?.resets??e.resets;break;case(0,l.dh)(t.type):e.resets=s}})(e,t,i)}),n.default.superlike),R=(0,i.ZP)(((e,t)=>{const{persistedSwipeCount:s,rightSwipeCount:i,superlikeSwipeCount:o,swipeCount:r}=n.default.counts;((e,t,s)=>{switch(t.type){case d.RECS_DISLIKE:case d.RECS_LIKE:case d.RECS_SUPERLIKE:e.swipeCount+=1;break;case(0,l.dh)(t.type):e.swipeCount=s}})(e,t,r),((e,t,s)=>{switch(t.type){case d.RECS_SUPERLIKE:e.superlikeSwipeCount+=1;break;case(0,l.dh)(t.type):e.superlikeSwipeCount=s}})(e,t,o),((e,t,s)=>{switch(t.type){case d.RECS_LIKE:e.rightSwipeCount+=1;break;case(0,l.dh)(t.type):e.rightSwipeCount=s}})(e,t,i),((e,t,s)=>{switch(t.type){case d.RECS_DISLIKE:case d.RECS_LIKE:case d.RECS_SUPERLIKE:e.persistedSwipeCount=Math.min(e.persistedSwipeCount+1,d.FIREBOARDING_SWIPE_COUNT);break;case(0,l.dh)(t.type):e.persistedSwipeCount=s}})(e,t,s)}),n.default.counts),p=(0,o.UY)({counts:R,recs:E,session:u,matches:_,superlike:S}),y={transforms:[(0,r.n)(["recs.chatBubbleIntro","recs.previouslySwiped","counts.persistedSwipeCount","counts.superlikeSwipeCount"])],version:4.2}},909627:(e,t,s)=>{s.d(t,{E:()=>a,b:()=>l});var i=s(371948),o=s(994806),r=s(769756);const a=new i.yX({results:r.oO},{processResult:{queue:"results"}}),l=new i.yX({match:o.$})},604640:(e,t,s)=>{s.d(t,{$w:()=>l,Hn:()=>c,i:()=>a});var i=s(699678),o=s(924304);const r=[{check:"processedVideos",compare:Boolean,type:i.MEDIA_TYPE_VIDEO},{check:"processedFiles",compare:Boolean,type:i.MEDIA_TYPE_PHOTO}],a=e=>{const t=[];return e?.length?(e.forEach((e=>{const s=r.find((({check:t,compare:s})=>s(e[t])))?.type??i.MEDIA_TYPE_PHOTO;t.push(o.gM[s])})),t):t},l=e=>{const t=[];return e?.map((e=>{const s=e?.collectible_type?.display_name;return s?t.push(s):null})).filter(Boolean),t},c=({activeBoost:e,didSuperLike:t,isFastMatch:s,recTraveling:i,sNumber:o,swipeNoteData:r,userTraveling:a})=>{const l={};return e&&(l.is_boosting=1),t&&(l.super=1),s&&(l.fast_match=1),o&&(l.s_number=o),i&&(l.rec_traveling=1),a&&(l.user_traveling=1),r&&(r.likedContentId&&(l.liked_content_id=r.likedContentId),r.likedContentType&&(l.liked_content_type=r.likedContentType),r.messageContent&&(l.swipe_note=r.messageContent)),l}},710679:(e,t,s)=>{s.d(t,{M:()=>o,n:()=>i});const i=e=>e?.map((e=>{const{id:t,choice_selections:s}=e,i=s?.map((e=>e.id)).join("_");return t&&i?`${t}_${i}`:null})).filter(Boolean).join(","),o=e=>e.map((e=>(e=>e?.map((e=>e.id)).join(","))(e.descriptors))).join(",")},494421:(e,t,s)=>{s.d(t,{Z:()=>R});var i=s(13241),o=s(894089),r=s(386494),a=s(604640),l=s(219529);const c=new Set([l.LZ,l.Ac]),d="none";function n(e){const{status:t=d}=e?.tinder_u||{};return{recTinderUStatus:c.has(t)?t:d,tinderUEnabled:!(!e.tinder_u?.school||!(0,l.Nf)(e.tinder_u)),schoolId:e.tinder_u?.school?.school_id}}var E=s(463608),u=s(76553),_=s(479682),S=s(710679);function*R(e,t,s){const{method:l}=t?.payload??{},{_id:c,is_super_like:d,s_number:R,country:p,is_traveling:y,recently_active:h,photos:T=[]}=e,C=yield(0,i.Ys)(o.AG,c),I=T[C]?.id,g=(0,a.i)(T),m=e?.user_interests?.selected_interests,f=!!m?.length,L=!!e.swipe_note,k=yield(0,i.Ys)(r.lG),b=T?.filter((e=>"short_video"===e.media_type))||[],U=b.length,v=b.filter((e=>e.assets?.some((e=>e.has_audio))))?.length,O=e?.selected_descriptors,P=e?.collectible_showcase,A=!!P?.length,w=e?.relationship_intent?.descriptor_choice_id??null,M=((e,t=0)=>e?e.map(((e,s)=>s<=t?e.content.map((({id:e})=>e)):null)).filter(Boolean).flat().join(","):null)(e?.tappy_content,C),K={availableMediaList:g,didSuperLike:d,isRecentlyActive:h,method:l,otherId:c,photoId:I,recTraveling:y,sNumber:R,superlikeType:d?(0,u.pb)(L):void 0,teaserType:e.teaser?.type,teaserValue:e.teaser?.string,userTraveling:k,viewedProfileElements:M,valueProfileElementDescriptors:O?(0,S.n)(O):null,valueProfileElementInterests:f?m?.map((e=>e.id)).join(","):null,valueProfileElementCollectibles:A?(0,a.$w)(P):null,valueProfileElementIntent:w,videoCount:U,audibleVideoCount:v,valueProfileElementGeo:p&&JSON.stringify({country:p.code,distance:e.distance_mi}),...n(e),...s};yield(0,i.gz)((0,E.L)(_.oZ,K))}}}]);