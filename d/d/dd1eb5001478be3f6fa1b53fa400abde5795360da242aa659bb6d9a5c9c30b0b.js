"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2068],{59211:function(e,r,t){t.d(r,{Z:function(){return j},H:function(){return b}});var n=t(85893),l=t(27361),i=t.n(l),o=t(67294),c=t(68929),u=t.n(c),s=t(64824),a=t(66436),d=t(77695),f=t(61263),p=t(46254),m=t(24160),h=t(24921),x=t(94611),g=(0,o.memo)(function(e){let{refinement:r,children:t}=e,l=(0,h.Z)(),i=(0,s.Dv)(x.zM);return(0,n.jsxs)(a.Z,{position:"relative",children:[i&&i!==r.id&&(0,n.jsx)(a.Z,{position:"absolute",top:0,left:0,bottom:0,right:0,bg:l.colors.main.white,opacity:.75,zIndex:1}),t]})}),A=t(86121),v=t(61853),y=t(91131);function b(){let[e,r]=(0,y.KO)(x.rN);return(0,o.useCallback)(()=>{e||r(!0)},[e])}function w(e){let{isMobile:r,refinement:t,styles:l}=e,i=(0,s.Dv)(x.rN),o=(0,s.Dv)(x.N_);if(!i)return null;let c=A.TP[t.type];return!r||o?(0,n.jsx)(g,{refinement:t,children:(0,n.jsx)(c,{refinement:t,styles:l})}):null}function Z(e){let{styles:r,refinement:t}=e,l=function(e){let{refinementId:r}=e,t=(0,s.Dv)(x.YK);return(0,o.useMemo)(()=>t?.[r],[r,t])}({refinementId:t.id});return(0,n.jsx)(a.Z,{flex:"1",textAlign:"left",textTransform:"uppercase",children:(0,n.jsx)(d.Z,{variant:"body-primary",size:"md","data-qa":i()(v.A,"plpFilter.filterAccordiontext.b")+`_${u()(t.name)}`,sx:r,children:l?`${t.name} (${l})`:t.name})})}var j=(0,o.memo)(function(e){let{styles:r,isMobile:t,refinement:l,accordionIconExpanded:o,accordionIconCollapsed:c,handleAccordionButtonKeyDown:u}=e,s=b();return(0,n.jsx)(f.Z,{sx:r.accordionSVG,onMouseEnter:s,children:e=>{let{isExpanded:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:(0,n.jsxs)(m.Z,{sx:r.accordionButton,onKeyDown:u,"data-qa":i()(v.A,"plpFilter.filterAccordion.b"),_focus:{outline:"none"},children:[(0,n.jsx)(Z,{styles:r.FilterAccordionText,refinement:l}),s?o:c]})}),(0,n.jsx)(p.Z,{px:0,pt:0,pb:"l",sx:r[l.type]??null,"data-qa":i()(v.A,"plpFilter.filterAccordionCollapse.d"),children:(0,n.jsx)(w,{isMobile:t,styles:r,refinement:l})})]})}})})},2068:function(e,r,t){t.r(r),t.d(r,{default:function(){return _},useRefinementsToRender:function(){return B}});var n=t(85893),l=t(67294),i=t(24921),o=t(66436),c=t(22070),u=t(77695),s=t(86121),a=t(28053),d=t(59211),f=t(45710),p=t(27361),m=t.n(p),h=t(61853),x=(0,l.memo)(function(e){let{styles:r,isMobile:t,accordionRef:i,disableScroll:o,refinementsToRender:c,isKeyboardScrolling:u,handleAccordionChange:s,handleAccordionScroll:p,expandedRefinementIndexes:x,handleAccordionButtonKeyDown:g}=e,A=function(e){let{styles:r}=e,{AccordionIcon:t,AccordionIconExpanded:i}=(0,f.Z)("Icons");return(0,l.useMemo)(()=>{let e=(0,n.jsx)(i,{sx:r,"data-qa":m()(h.A,"plpFilter.filterAccordionUpArrow.b")}),l=(0,n.jsx)(t,{sx:r,"data-qa":m()(h.A,"plpFilter.filterAccordionDownArrow.b")});return{IconExpanded:e,IconCollapsed:l}},[r])}({styles:r.AccordionIconColor});return(0,n.jsx)(a.Z,{pr:"m",mr:"-m",allowToggle:!0,tabIndex:"-1",allowMultiple:!0,ref:i,index:x,className:`${o?"":"custom-scrollbar"} ${u?"is-keyboard-scrolling":""}`,_focus:{outline:"none"},onScroll:p,onChange:s,maxHeight:t?null:"calc(100vh - 96px)",children:c?.map(e=>(0,n.jsx)(d.Z,{styles:r,isMobile:t,refinement:e,accordionIconExpanded:A.IconExpanded,accordionIconCollapsed:A.IconCollapsed,handleAccordionButtonKeyDown:g},`filter-${e.id}`))})}),g=t(37082),A=t(73913),v=t(8204),y=t(50308),b=t.n(y),w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(0,l.useRef)(),n=(0,l.useRef)(null),i=(0,l.useRef)(0),o=l=>{if(null!==n.current){let c=l-n.current;if(i.current+=c,i.current>r&&r>0)return;e(c)}n.current=l,t.current=requestAnimationFrame(o)},c=()=>{i.current=0,n.current=null,t.current=requestAnimationFrame(o)};return(0,l.useEffect)(()=>()=>cancelAnimationFrame(t.current),[r]),c},Z=t(11163),j=t(38203),C=t(73922),R=t(64824),F=t(94611),S=t(11855),D=t(86896);let q=e=>{let{filters:r,asPath:t,query:n,refinementId:l,optionValue:i}=e,o=t.split("?")[0],c=new URLSearchParams,u={},s=r.reduce((e,r)=>e+r.values.length,0);r.forEach(e=>{let r=e.id;u={...u,[r]:e.values}});let a=null!=u[l]&&u[l].find(e=>e==i);if(a){let d=u[l].filter(e=>e!=i);u[l]=[...d]}else{let f=u[l]||[];u[l]=[...f,i]}return Object.keys(u).forEach(e=>{c.set(e,u[e].join("|"))}),n.q&&c.set("q",n.q),s>=2?c.set("index","0"):c.delete("index"),o+"?"+c.toString()};var M=t(31435),E=t(8979);function I(e){let{styles:r,isMobile:t,formatMessage:l,handleClearFiltersClick:i}=e,o=(0,R.Dv)(F.ip);return(0,n.jsx)(E.Z,{size:"xs",ml:"auto",variant:"clearAll",disabled:!o,onClick:i,"data-qa":t?m()(h.A,"plpFilter.filterClearBtn.m"):m()(h.A,"plpFilter.filterClearBtn.b"),width:"80px",height:"30px",sx:r,children:l({id:"plp.activeFilters.clearAll",defaultMessage:"Clear all"})})}let k=[];function B(e){let{routerAsPath:r,routerQuery:t}=e,n=(0,R.Dv)(F.ot),i=(0,R.Dv)(F.gz);return(0,l.useMemo)(()=>i.map(e=>{let l=e.options.map(l=>{if(e.type===M.S0.PRICE)return l;let i=q({filters:n,asPath:r,query:t,optionValue:l.refvalue,refinementId:e.id}),o=n.some(r=>r.id===e.id&&r.values.includes(l.refvalue));return{...l,href:i,isSelected:o}});return{...e,options:l}}),[i,n,r])}var _=(0,j.Z)(function(e){let{disableScroll:r=!1,...t}=e,{formatMessage:a}=(0,D.Z)(),d=(0,f.Z)("Filters"),p=(0,R.Dv)(F.c3),y=(0,R.yW)(F.$1),b=(0,Z.useRouter)(),j=(0,i.Z)(),{isMobile:q}=(0,g.Z)(),{clearFilters:M}=(0,S.Z)(),{toggleHeadroom:E}=(0,C.Z)(),_=B({routerAsPath:b.asPath,routerQuery:b.query}),[T,z]=(0,l.useState)(!1),[K,N]=(0,l.useState)(null),[$,P]=(0,l.useState)(k),U=(0,l.useRef)(),H=(0,l.useRef)(),O=(0,l.useRef)([]),V=(0,l.useRef)([p]),X=(0,l.useRef)(!1),G=(0,l.useRef)(),L=(0,R.Dv)(F.gz),{searchRefinements:{searchRefinementScrollSize:Q}}=(0,v.Z)({searchRefinements:["searchRefinementScrollSize"]}),W=(0,l.useMemo)(()=>{let e=parseInt(Q);return isNaN(e)?96:e},[Q]),Y=e=>{let r=el(K);W>r&&(G.current.scrollTop+=Math.ceil((W-r)*e/100))},J=w(Y,250);(0,l.useEffect)(()=>{let e=()=>{V.current=[],O.current=[],P(k)};return b.events.on("routeChangeComplete",e),()=>{b.events.off("routeChangeComplete",e)}},[]),(0,l.useEffect)(()=>{if(null!==K){let e=el(K);W>e&&J()}},[W,K]),(0,l.useEffect)(()=>{q?G.current=U?.current?.closest(".chakra-modal__body"):G.current=U.current},[q]),(0,l.useEffect)(()=>{let e=[],r=[];if(L){for(let t=0;t<L.length;t++){let n=L[t];V.current.includes(n.id)&&(e.push(n.id),r.push(t))}V.current=e,r.length&&r.some(e=>!$.includes(e))&&(O.current=r,P(r))}},[L]);let ee=(0,A.Z)(["ArrowUp","ArrowDown"],()=>{X.current=!0,z(!0)}),er=(0,A.Z)(["ArrowUp","ArrowDown"],()=>{X.current=!1,z(!1),H.current&&(H.current?.focus({preventScroll:!0}),H.current=null)}),et=(0,l.useCallback)((0,A.Z)(["ArrowUp","ArrowDown"],e=>{e.preventDefault(),U.current&&document.activeElement!==U.current&&(X.current=!0,H.current=e.target,U.current?.focus({preventScroll:!0}))}),[]),en=(0,l.useCallback)(()=>{X.current&&!T?z(!0):!X.current&&T&&z(!1)},[T]);function el(e){let r=e.getBoundingClientRect();return q?window.innerHeight-r.top-72:window.innerHeight-r.top}let ei=(0,l.useCallback)(e=>{let r=e.find(e=>!O.current.includes(e));O.current=[...e];let t=[];for(let n of e)t.push(L[n].id);if(V.current=t,P(e),void 0===r){N(null);return}N(U?.current?.children[r])},[L]);return(0,n.jsxs)(o.Z,{...t,p:"mar",height:"100%",width:"96.5%",direction:"column",sx:d.filterSection,onKeyUp:er,onKeyDown:ee,"data-qa":m()(h.A,"plpFilter.filterBySection.d"),children:[(0,n.jsxs)(c.Z,{alignItems:"center",mb:j.space.m,children:[(0,n.jsx)(u.Z,{size:"md",variant:"eyebrow-primary",textTransform:"uppercase",sx:d.FilterByText,letterSpacing:j.letterSpacings.lg,"data-qa":m()(h.A,"plpFilter.plpFiltertext.d"),children:a({id:"plp.filters.filterBy",defaultMessage:"Filter by"})}),(0,n.jsx)(I,{isMobile:q,formatMessage:a,styles:d.ClearAllButton,handleClearFiltersClick:function(){q?(0,s.X5)(E)("#product-category-header"):(0,s.X5)(E)("#product-search-results"),M(),V.current=[],O.current=[],P(k),y(null)}})]}),(0,n.jsx)(x,{styles:d,isMobile:q,accordionRef:U,disableScroll:r,refinementsToRender:_,isKeyboardScrolling:T,handleAccordionChange:ei,handleAccordionScroll:en,expandedRefinementIndexes:$,handleAccordionButtonKeyDown:et})]})})}}]);