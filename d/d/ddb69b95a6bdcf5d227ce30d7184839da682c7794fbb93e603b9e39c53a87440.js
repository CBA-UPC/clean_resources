!function(){var e=this&&this.__assign||try{!function(){var t="1.2.17",i=navigator.userAgent,o="https://d1lu3pmaz2ilpx.cloudfront.net/5a28e627",s={Persist:"PERSIST",None:"NONE"},n={Tie:"_tie",Identify:"identify",Pageview:"pageview",SessionTie:"_s_tie"},r={pageview:!0,"page view":!0,"page-view":!0,page_view:!0},a=["address","ssn","phone","phone number","city","state","dob","first name","last name"],c=["@","%"],u="(999)999-9999|999-999-9999",h=RegExp("^("+u.replace(/([\(\)])/g,"\\$1").replace(/9/g,"\\d")+")$"),d={os:function(){return/Windows/i.test(i)?/Phone/.test(i)||/WPDesktop/.test(i)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(i)?"iOS":/Android/.test(i)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(i)?"BlackBerry":/Mac/i.test(i)?"Mac OS X":/Linux/.test(i)?"Linux":""},btoa:function(e){for(var t=String(e),i="",o=0,s=void 0,n=void 0,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.charAt(0|o)||o%1;i+=r.charAt(63&s>>8-o%1*8)){if(t.charAt(0|o)||(r="="),(n=t.charCodeAt(o+=.75))>255)return;s=s<<8|n}return i},isValidGuid:function(e){var t=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;return e&&t.test(e.trim())},warnIfInvalidToken:function(e){var t=d.isValidGuid(e);return t||console.error("Token is not a valid GUID"),t},isValidUserId:function(e){if(!e)return!1;var t=i=["undefined","null","n/a","","none",{},0,1,NaN,!0,!1,"0","1","missing-id"].map(t),o=t(e);return!(i.indexOf(o)>-1)}},p=function(){function i(e,i){this.sessionCookieTime=307584e6,this.userCookieTime=307584e6,this.sessionCookieName="tatari-session-cookie",this.sessionUrlParamName="tatari_session_id",this.sessionId="",this.userCookieName="tatari-user-cookie",this.userId="",this.version=t,this.util=d,this.debugCookieName="tatari-debug-cookie",this.debugCookieTime=864e5,this.debug=!1,this.ipCookieName="t-ip",this.ipCookieTime=3e5,this._i=e,this.url=o,this.cookieSupport=this.getCookieSupport(),this.config=i,this.checkDebugCookie(),this.checkSessionCookie(),this.checkUserCookie(),this.recordIpsIfNecessary(),d.warnIfInvalidToken(e),this.debug&&(console.info("Debug: Tatari Tracker Lib Loaded",this),console.info("Debug: Tatari Tracker TLD",this.getDomain()))}return i.prototype.enableDebug=function(){this.createCookie(this.debugCookieName,"1",this.debugCookieTime),this.debug=!0,console.info("Debug: Tatari Tracker Debug Enabled")},i.prototype.init=function(e,t){this._i=e,this.config=t,d.warnIfInvalidToken(e)},i.prototype.flushCommandQueue=function(e){if(void 0===e&&(e=[]),e.length>0){var t=this;e.forEach(function(e){t[e[0]].apply(t,e.slice(1,e.length))})}},i.prototype.scrubParams=function(e){var t=this;if(this.config&&this.config.queryParamScrubs&&e){var i=document.createElement("a");i.setAttribute("href",e);var o=i.search;if(o){var s=[];o.substr(1).split("&").forEach(function(e){var i=decodeURIComponent(e.split("=")[0]);t.config.queryParamScrubs.some(||s.push(e)});var n="?"+s.join("&");return e.replace(o,n)}}return e},i.prototype.scrubUrl=function(e){if(this.config&&this.config.urlScrubs&&e){var t=e;return this.config.urlScrubs.forEach(function(i){var o=i.test(e)&&RegExp.$1;o&&(t=e.replace(o,"TATARI-SCRUBBED"))}),t}return e},i.prototype.scrub=function(e){return this.config?this.scrubUrl(this.scrubParams(e)):e},i.prototype.getProperties=function(){return{$os:d.os(),$referrer:this.scrub(document.referrer),$currentUrl:this.scrub(window.location.href)}},i.prototype.removePII=function(e,t){var i="";if(a.includes(e.toString().toLowerCase().trim()))return[e,""];if(h.test(t.toString()))return[e,""];for(i in c)if(t.toString().includes(c[i]))return[e,""];return[e,t]},i.prototype._track=function(t,i){void 0===i&&(i="");try{t!==n.Tie&&t!==n.SessionTie&&this.checkSessionCookie();var o=i,s=[],r={};if("object"==typeof i)try{for(var a=0,c=Object.entries(i);a<c.length;a++){var u=c[a],h=u[0],d=u[1];s=this.removePII(h,d.toString()),r[s[0]]=s[1]}o=JSON.stringify(r)}catch(e){o="",console.warn("Tatari Tracker arg should be a valid JSON object")}o.length>65535&&(console.warn("Tatari Tracker arg should be smaller than 65535 characters, was "+o.length+"."),"object"==typeof i&&console.warn("Tatari Tracker arg size was the result of large JSON serialization."));var p=e({version:this.version,token:this._i,sessionId:this.sessionId,cookieSupport:this.cookieSupport,userId:this.userId,arg:o,event:t},this.getProperties());this.removeEmptyKeys(p);var f=this.buildReqUrl(p);this.debug&&console.info("Debug: Tatari Tracker Event Fired",p),this.sendRequest(f)}catch(e){console.warn("Tatari's tracking library encountered an error when attempting to track.",e)}},i.prototype.sendRequest=function(e){if(this._i){var t=new XMLHttpRequest;t.open("GET",e,!0),t.send(null)}else this.debug&&console.info("Debug: Tatari Tracker suppressing request with invalid token")},i.prototype.removeEmptyKeys=function(e){Object.keys(e).forEach(function(t){return(void 0===e[t]||null===e[t]||""===e[t])&&delete e[t]})},i.prototype.buildReqUrl=function(e,t){void 0===t&&(t=this.url);var i=this.buildDataBlob(e);return t+"?data="+encodeURIComponent(i)+"&date="+ +new Date},i.prototype.buildDataBlob=function(e){var t=Object.keys(e).map(function(t){var i=encodeURIComponent;return"object"==typeof e[t]&&(i=,encodeURIComponent(t)+"="+i(e[t])}).join("&");return""+this.util.btoa(t)},i.prototype.pageview=function(){this._track(n.Pageview),window.ttm&&window.ttm.onPageview&&window.ttm.onPageview()},i.prototype.track=function(e,t){return e?"string"==typeof e&&r[e.toLowerCase()]?void console.warn("Supressing event "+e):(this._track("e_"+e.toString(),t),void(window.ttm&&window.ttm.onTrack&&window.ttm.onTrack(e.toString(),t))):void console.error("Undefined event passed to track.")},i.prototype.identify=function(e){var t=this.userId;if(!d.isValidUserId(e))return void console.error("Invalid id passed to identify.");t&&e.toString()===t||(this.userId=e.toString(),this.createCookie(this.userCookieName,this.userId,this.userCookieTime),this._track(n.Tie)),this._track(n.Identify),window.ttm&&window.ttm.onIdentify&&window.ttm.onIdentify(e.toString())},i.prototype.guid=i.prototype.createCookie=function(e,t,i){var o="",s=new Date,n="domain="+this.getDomain()+";";return s.setTime(s.getTime()+i),o="expires="+s.toUTCString()+";",document.cookie=e+"="+t+"; "+o+" "+n+" path=/",t},i.prototype.getDomain=function(){var e=document.location||{hostname:""},t=e.hostname.split("."),i="";return t.some(function(e,o){var s=t.slice(t.length-o-1).join(".");if(document.cookie="testTLD=test;domain="+s+";",-1!==document.cookie.indexOf("testTLD=test"))return i=s,document.cookie="testTLD=;domain="+i+";expires="+new Date(0).toUTCString()+";",!0}),i},i.prototype.getCookie=function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie),o=i.split(";"),s=0,n=o;s<n.length;s++){for(var r=n[s];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}},i.prototype.removeCookie=function(e){var t=this.getDomain();document.cookie=e+"=; Max-Age=-99999999;",t&&(document.cookie=e+"=; Max-Age=-99999999; domain="+t+";")},i.prototype.checkUserCookie=function(){var e=this.getCookie(this.userCookieName);e&&!d.isValidUserId(e)?this.removeCookie(this.userCookieName):(this.userId=e,this.userId&&(this.removeCookie(this.userCookieName),this.createCookie(this.userCookieName,this.userId,this.userCookieTime)))},i.prototype.checkSessionCookie=function(){var e=this;this.sessionId=this.getCookie(this.sessionCookieName);var t,i=window.location.search?window.location.search.slice(1).split("&").map(:[];i.forEach(function(i){i&&2===i.length&&i[0]===e.sessionUrlParamName&&(t=i)});var o=t&&t[1];this.sessionId&&!d.isValidGuid(this.sessionId)&&(console.warn("Invalid stored session ID ("+this.sessionId+"). Ignoring."),this.removeCookie(this.sessionCookieName),this.sessionId=null),o&&!d.isValidGuid(o)&&(console.warn("Invalid parameter session ID ("+o+"). Ignoring."),o=null),o&&this.sessionId!==o&&(this.sessionId&&this._track(n.SessionTie,o),this.createCookie(this.sessionCookieName,o,this.sessionCookieTime),this.sessionId=o),this.sessionId?(this.removeCookie(this.sessionCookieName),this.createCookie(this.sessionCookieName,this.sessionId,this.sessionCookieTime)):this.sessionId=this.createCookie(this.sessionCookieName,this.guid(),this.sessionCookieTime)},i.prototype.checkDebugCookie=function(){var e=this.getCookie(this.debugCookieName);this.debug=!!e},i.prototype.recordIpsIfNecessary=function(){var t=this;if(!this.getCookie(this.ipCookieName)){this.createCookie(this.ipCookieName,"1",this.ipCookieTime);var i={version:this.version,token:this._i,sessionId:this.sessionId};this.removeEmptyKeys(i),[this.buildReqUrl(i,"https://dvqigh9b7wa32.cloudfront.net/5a28e627"),this.buildReqUrl(e({ipv6:!0},i),"https://d330aiyvva2oww.cloudfront.net/5a28e627")].forEach(}},i.prototype.getCookieSupport=function(){var e="tatari-cookie-test="+Math.floor(1e8*Math.random()),t=new Date;return t.setTime(t.getTime()+this.sessionCookieTime),document.cookie=e+"; expires="+t.toUTCString()+"; path=/",-1!==document.cookie.indexOf(e)?s.Persist:s.None},i}(),f=window.tatari||[],l=new p(f._i,f.config);window.tatari=l,l.flushCommandQueue(f)}()}catch(e){console.log(e)}}();