(function(){

var globalConfig = {"vendors":{"fs":{"selfHosted":true,"codeVer":"19.14.14-fs","siteKey":"state-gov","gateway":"gateway.foresee.com","configLocation":"gateway.foresee.com/sites/state-gov","integrityHashLocation":null}}};

var productConfig = { fs: {} };

nction setProductConfig(e,t,r){productConfig[e]||(productConfig[e]={}),productConfig[e][t]=JSON.parse(JSON.stringify(r))}unction setVendorConfig(e,t){globalConfig.vendors||(globalConfig.vendors={}),globalConfig.vendors[e]=JSON.parse(JSON.stringify(t))}var _W=window,_D=_W.document,supportsDomStorage=!!_W.sessionStorage,_HD=_D.getElementsByTagName("head"),localStorage=_W.localStorage,sessionStorage=_W.sessionStorage;_HD=_HD&&_HD.length>0?_HD[0]:_D.body;try{supportsDomStorage&&(sessionStorage.setItem("_",""),sessionStorage.removeItem("_"))}catch(e){supportsDomStorage=!1}var op=Object.prototype,hasOwn=op.hasOwnProperty,hasProp=eachProp=isDefined=isFunction=function(e){return"function"==typeof e},isObject=function(e){return"object"==typeof e},isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},isNodeList=isDate=isString=isElement=isPlainObject=proxy=dispose=getParam=getQueryString=nextTick=ar diff=attr=toQueryString=function trimDots(e){var t,r;for(t=0;t<e.length;t++)if("."===(r=e[t]))e.splice(t,1),t-=1;else if(".."===r){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}var compute=toLowerCase=API={_enforceGlobalNS:expose:function(e,t){API._enforceGlobalNS(),"clearState"!==e&&"clearStateFeedback"!==e||(t=interceptClearState(t)),_W.FSR[e]=_W.FSFB[e]=t},retrieveFromAPI:,interceptions=[];unction interceptClearState(e){return var domReady=);function featureFlag(e,t){var globalConfig=getVendorConfig("fs");if((t=t||{}).after=t.after||function(){},!e)return t.after(),null;if(!globalConfig.featureFlags)return t.after(),null;var r=globalConfig.featureFlags[e];return"boolean"!=typeof r?(t.after(),null):r&&"function"==typeof t.on?(t.on(t.after),t.on.length<1&&t.after(),r):r||"function"!=typeof t.off?void 0:(t.off(t.after),t.off.length<1&&t.after(),r)}var fsCmd=PromisePolyfill=),MaybeNativePromise=_W.Promise||PromisePolyfill,isIE=/MSIE |Trident/.test(window.navigator.userAgent),Promise=isIE?PromisePolyfill:MaybeNativePromise;ar winload=function(e){"complete"===_D.readyState?nextTick(e):__eB(_W,"load",e)},globalConfig$1=getVendorConfig("fs"),assetLocation=null,codeLocation=null,embedAttrs=null,gwConfigOverride=null,hasSSL=null,home=null,isProduction=null,isSelfHosted=null,makeAssetURI=null,makeURI=null,startTS=_W.performance&&_W.performance.timing?_W.performance.timing.responseStart:(new Date).getTime(),tagVersion=globalConfig$1.codeVer||""; keyStorage="_4c_",key4CStorageLegacy="_4c_",key4CStorage="_4c_s_",key4CMicroStorage="_4c_mc_",key4CEnableStorage="_4c_es_",key4CReservedKeyNames=[key4CStorage,key4CMicroStorage,key4CEnableStorage],checkIfLegacy4CCookie=globalState={stg:null,browser:null,tracker:null,onProductQualified:null,onProductsDisqualified:null,cpps:null,qamodeCallback:null,ckie:null,trigger:{},feedback:{}};function initializeGlobalState(e){var t=e.Browser,r=e.getGeneralStorage,o=e.CPPS,n=e.Cookie,i=e.FSEvent;globalState.browser=new t,globalState.stg=r(globalState.browser),globalState.cpps=new o(globalState.stg),globalState.ckie=new n({path:"/",secure:!1,encode:!0}),globalState.onProductQualified=new i,globalState.onProductsDisqualified=new i,globalState.trigger={__apiReady:new i,loadedEmitter:new i,initializedEmitter:new i,inviteShownEmitter:new i,inviteAcceptedEmitter:new i,inviteAbandonedEmitter:new i,inviteDeclinedEmitter:new i,trackerShownEmitter:new i,customInvitationRequested:new i,CPPS:null,jrny:null,browser:null,stg:null,_triggerResetLock:null,state:{didInvite:!1,inviteSuppressed:!1,inviteStatus:null,reason:null},inviteSetup:null},globalState.feedback={__apiReady:new i,onFeedbackSubmitted:new i,onFeedbackReady:new i,onFeedbackShown:new i,onFeedbackClosed:new i,onModalCssRetrieved:new i,stg:null,browser:null,CPPS:null,pageResetFn:null},globalState.onRecordQualified=new i}var dec=decodeURIComponent,enc=encodeURIComponent,QA_CONFIG_OVERRIDE="fsrQAConfig",CSSprefix="verint-sdk",fs=Object.freeze({dec:dec,enc:enc,QA_CONFIG_OVERRIDE:QA_CONFIG_OVERRIDE,CSSprefix:CSSprefix,getVendorConfig:getVendorConfig,getProductConfig:getProductConfig,getVendorProducts:getVendorProducts,setVendorConfig:setVendorConfig,setProductConfig:setProductConfig,API:API,addClearStateIntercept:addClearStateIntercept,domReady:domReady,featureFlag:featureFlag,fsCmd:fsCmd,Promise:Promise,get supportsDomStorage(){return supportsDomStorage},localStorage:localStorage,sessionStorage:sessionStorage,_W:_W,_D:_D,winReady:winload,get assetLocation(){return assetLocation},get codeLocation(){return codeLocation},get embedAttrs(){return embedAttrs},get gwConfigOverride(){return gwConfigOverride},get hasSSL(){return hasSSL},get home(){return home},get isProduction(){return isProduction},get isSelfHosted(){return isSelfHosted},get makeAssetURI(){return makeAssetURI},get makeURI(){return makeURI},resetStartTS:resetStartTS,get startTS(){return startTS},get tagVersion(){return tagVersion},attr:attr,compute:compute,diff:diff,dispose:dispose,eachProp:eachProp,ext:ext,getParam:getParam,getQueryString:getQueryString,hasProp:hasProp,isArray:isArray,isDate:isDate,isDefined:isDefined,isElement:isElement,isFunction:isFunction,isNodeList:isNodeList,isObject:isObject,isPlainObject:isPlainObject,isString:isString,nextTick:nextTick,proxy:proxy,toLowerCase:toLowerCase,toQueryString:toQueryString,getNested:getNested,key4CStorage:key4CStorage,key4CStorageLegacy:key4CStorageLegacy,key4CMicroStorage:key4CMicroStorage,key4CEnableStorage:key4CEnableStorage,keyStorage:keyStorage,key4CReservedKeyNames:key4CReservedKeyNames,checkIfLegacy4CCookie:checkIfLegacy4CCookie,globalState:globalState}),Module=),Registry=),registry=new Registry,_fsDefine=registry.define.bind(registry),_fsRequire=registry.require.bind(registry);_fsDefine("define",function(){return _fsDefine}),_fsDefine("require",function(){return _fsRequire}),_W._fsDefine=_W._acsDefine=_fsDefine,_W._fsRequire=_W._acsRequire=_fsRequire;var locator={},currentScript=_D.currentScript,skipInit=!1;function reset(){skipInit=!1,locator.environment="production",locator.isSelfHosted=!1,locator.hasSSL=!0,locator.assetOverride=void 0,locator.rootOverride=void 0,locator.tagAttrs={},locator.gatewayLocation="",locator.isProduction=!1,locator.productCfgOverride=null,locator.gwScript=null,locatorUpdate(locator)}function subtractFromURL(e,t){var r=e.substr(0,e.indexOf("//"))+"//",o=e.substr(r.length),n=o.substr(o.indexOf("/")+1),i=n.substr(n.lastIndexOf("/")+1);n=n.substr(0,n.length-i.length-1),o=o.substr(0,o.indexOf("/"));var a=n.split("/");return a.length-=Math.min(a.length,t),(r+o+"/"+a.join("/")+i).replace(/\/\/\//g,"//")}locator.normalizeUrl=function(e){var globalConfig=getVendorConfig("fs");e=e.replace("foresee/","trigger/");var t,r=locator.gatewayLocation||"";if(e.indexOf("v=")>-1)return e;if("$"==e.substr(0,1)){if(locator.rootOverride){var o="/";return"/"===locator.rootOverride[locator.rootOverride.length-1]&&(o=""),e.replace("$",""+locator.rootOverride+o)}return t="code/"+globalConfig.codeVer+"/"+e.replace("$",""),"/"==r?r+t:subtractFromURL(r,3)+t}return-1==e.indexOf("//")&&(e="/"==r.substr(r.length-1,1)&&"/"==e.substr(0,1)?r+e.substr(1):r+e),e},locator.normalizeAssetUrl=locator.locateGW=function(){var e,t,r,o,n,i,a,s,l,c,f,globalConfig=getVendorConfig("fs"),d="/";if(_HD&&(skipInit="true"==attr(_HD,"data-skipfsinit"),r=attr(_HD,"data-fsgatewaylocparam"),o=attr(_HD,"data-codeversion"),n=attr(_HD,"data-analyticsurl"),i=attr(_HD,"data-surveyurl"),a=attr(_HD,"data-product-assets"),s=attr(_HD,"data-codelocation"),l=attr(_HD,"data-productconfig"),c=attr(_HD,"data-isselfhosted"),f=attr(_HD,"data-hasssl"),r&&(r=getParam(r)),locator.isSelfHosted=!1,c&&(locator.isSelfHosted="true"==getParam(c)),locator.hasSSL=!0,f&&(locator.hasSSL="true"==getParam(f)||"false"),s&&(locator.rootOverride=getParam(s)),a&&(locator.assetOverride=getParam(a),"undefined"===locator.assetOverride&&(locator.assetOverride=void 0)),l&&(locator.productCfgOverride=getParam(l)),o&&(globalConfig.codeVer=getParam(o)),n&&(globalConfig.analyticsUrl=getParam(n)),i&&(globalConfig.surveyUrl=getParam(i))),("string"!=typeof globalConfig.siteKey||globalConfig.siteKey.length<1)&&(globalConfig.siteKey=getParam("sitekey")),currentScript)e=currentScript;else{var u=_D.getElementsByTagName("script");if(eachProp(u,,!e)throw new Error('FSR: No script tag has been found. Expected is a script tag with the following attributes:  data-vendor="fs"  data-role="gateway"  src="[a_path_leading_to]/gateway[.min].js". Aborting loading.')}for(var g=0;g<e.attributes.length;g++){var p=e.attributes[g];locator.tagAttrs[p.name]=p.value}if(locator.gwScript=e,t=r||attr(e,"src"),locator.environment=attr(e,"data-environment")||locator.environment,locator.rootOverride=attr(e,"data-codelocation")||locator.rootOverride,locator.assetOverride=attr(e,"data-product-assets")||locator.assetOverride,locator.isSelfHosted=attr(e,"data-isselfhosted")?"true"==attr(e,"data-isselfhosted"):locator.isSelfHosted,locator.hasSSL=attr(e,"data-hasssl")||locator.hasSSL,-1==t.indexOf(":/")&&t.substr(0,1)!=d){var _=(""+_W.location.href).split(d);_[_.length-1].indexOf(".")>-1&&_[_.length-1].toLowerCase()!=_W.location.hostname.toLowerCase()&&_.pop(),t=_.join(d)+(t.substr(0,1)==d?"":d)+t}(t=t.split(d)).pop(),trimDots(t),locator.gatewayLocation=t.join(d)+d,locator.isProduction=locator.gatewayLocation.toLowerCase().indexOf("production")>-1,locator.rootOverride&&locator.rootOverride.substr(locator.rootOverride.length-1)!=d&&(locator.rootOverride+=d),locator.assetOverride&&locator.assetOverride.substr(locator.assetOverride.length-1)!=d&&(locator.assetOverride+=d),locatorUpdate(locator)},reset();var _fsNormalizeUrl=locator.normalizeUrl;function dynamicConfigReplacer(e){return"object"==typeof e&&eachProp(e,function(t,r){if("object"==typeof t&&null!=t)if("variable"===t.source&&isDefined(t.default)&&isDefined(t.path)){var o=getNested(_W,t.path,!0),n=o&&o.obj[o.key];if(isDefined(n)&&null!==n){if("function"==typeof n||"object"==typeof n)throw new Error("Cannot replace config setting "+r+" with path "+t.path+" with a "+typeof n);switch(typeof t.default){case"string":n=escapeHTML(String(n));break;case"number":n=parseFloat(n);break;case"boolean":n="false"!==String(n)&&Boolean(n);break;default:throw new Error("Default for "+r+" replaced with path "+t.path+" is invalid type "+typeof t.default)}e[r]=n}else e[r]=t.default}else dynamicConfigReplacer(t)}),e}_W._fsNormalizeUrl=_W._acsNormalizeUrl=locator.normalizeUrl,_W._fsNormalizeAssetUrl=locator.normalizeAssetUrl,_fsDefine("fs",function(){return fs}),_fsDefine("_acs",;var htmlEscapeRegex=/[&<>"']/g,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function escapeHTML(e){return htmlEscapeRegex.test(e)?e.replace(htmlEscapeRegex,:e}function shouldLoadQAMode(){var e=supportsDomStorage&&sessionStorage.getItem(QA_CONFIG_OVERRIDE);return!!(fsCmd("qamode")||getParam("fsr-qa-mode")||e)}var RemoveFingerprints=function runStorageUpgradeIfNeeded(e,t,r,o){var n=e.ckie,i=["fsr.r","fsr.s","_fsspl_","fsr.t","acs.t"],a=!1;if(n){for(var s=0;s<i.length;s++)if(n.getByCookieName(i[s])){a=!0;break}var l=!a&&!!checkIfLegacy4CCookie(n);a||(a=l);var c=e.pers===t.MC||e.pers===t.MC_Hybrid;if(!a&&c)a=!!n.getByNestedCookieName(key4CStorage);var f=e.pers==t.CK||e.pers==t.DS||e.pers==t.CK_Hybrid;if(!a&&f)a=!!n.getByNestedCookieName(key4CMicroStorage)}RemoveFingerprints(e,n),a?_W._fsRequire([makeURI("$fs.storageupgrade.js")],:nextTick(o)}var clearState=function(){var e=globalState.stg,t=globalState.tracker;t&&t._heartbeat&&clearInterval(t._heartbeat),e&&e.ckie&&e.ckie.kill(key4CEnableStorage),supportsDomStorage&&(localStorage.removeItem(key4CEnableStorage),sessionStorage.removeItem(key4CEnableStorage),sessionStorage.removeItem("acsFeedbackSubmitted")),e.reset()},getConfigFormatted=getConfig=CPPS={set:get:function(e,t){(t=t||console.log)(globalState.cpps.get(e))},erase:function(e,t){(t=t||console.log)(globalState.cpps.erase(e))},append:all:,Storage={get:all:,Cookie={get:function(t,r){r=r||console.log||function(){},_W._fsRequire([_W._fsNormalizeUrl("$fs.compress.js")],function(o){try{return key4CReservedKeyNames.some(?r(t===key4CStorage?JSON.parse(o.decompress(decodeURIComponent(globalState.ckie.getByNestedCookieName(t)))):globalState.ckie.getByNestedCookieName(t)):r(globalState.ckie.getByCookieName(t))}catch(e){console.error("trigger: couldn't read cookie",t)}})}},enableStorage={set:;function exposeAPI(e,t){API.expose("clearState",clearState),API.expose("getConfigFormatted",getConfigFormatted),API.expose("getConfig",getConfig),API.expose("CPPS",CPPS),API.expose("Storage",Storage),API.expose("Cookie",Cookie),API.expose("enableStorage",enableStorage),API.expose("onRecordQualified",globalState.onRecordQualified),API.expose("onProductQualified",globalState.onProductQualified),API.expose("onProductsDisqualified",globalState.onProductsDisqualified),e&&API.expose("runProductQualificationCheck",e),t&&API.expose("isProductCurrentlyQualified",t)}var __exports={},dispose$1=function(){globalState.trigger.trig&&globalState.trigger.trig.dispose()};__exports.dispose=dispose$1;var getState=__exports.getState=getState;var optOut=function(){var e=_W.location.toString();_W.location=e.indexOf("#")>-1?e+"&fscommand=fsoptout":e+"#fscommand=fsoptout",_W.location.reload()};__exports.optOut=optOut;var test=__exports.test=test;var pReset=__exports.pReset=pReset;var showInvite=__exports.showInvite=showInvite;var suppressInvite=__exports.suppressInvite=suppressInvite;var allowInvite=__exports.allowInvite=allowInvite;var setFSRVisibility=__exports.setFSRVisibility=setFSRVisibility;var Journey={addEvent:function(e){globalState.trigger.__apiReady.subscribe(function(){globalState.trigger.jrny.addEvent(e)},!0,!0)},addEventObj:function(e){globalState.trigger.__apiReady.subscribe(function(){globalState.trigger.jrny.addEventObj(e)},!0,!0)},addEventString:;function exposeAPI$1(){API.expose("dispose",dispose$1),API.expose("getState",getState),API.expose("optOut",optOut),API.expose("test",test),API.expose("run",pReset),API.expose("pageReset",pReset),API.expose("showInvite",showInvite),API.expose("suppressInvite",suppressInvite),API.expose("allowInvite",allowInvite),API.expose("setFSRVisibility",setFSRVisibility),API.expose("Journey",Journey),API.expose("onLoaded",globalState.trigger.loadedEmitter),API.expose("onInitialized",globalState.trigger.initializedEmitter),API.expose("onInviteShown",globalState.trigger.inviteShownEmitter),API.expose("onInviteAccepted",globalState.trigger.inviteAcceptedEmitter),API.expose("onInviteAbandoned",globalState.trigger.inviteAbandonedEmitter),API.expose("onInviteDeclined",globalState.trigger.inviteDeclinedEmitter),API.expose("onTrackerShown",globalState.trigger.trackerShownEmitter),API.expose("customInvitationRequested",globalState.trigger.customInvitationRequested)}__exports.Journey=Journey;var clearStateFeedback=launchFeedback=resetFeedback=function exposeAPI$2(){API.expose("clearStateFeedback",clearStateFeedback),API.expose("launchFeedback",launchFeedback),API.expose("launchACSFeedback",launchFeedback),API.expose("resetFeedback",resetFeedback),API.expose("onFeedbackSubmitted",globalState.feedback.onFeedbackSubmitted),API.expose("onFeedbackReady",globalState.feedback.onFeedbackReady),API.expose("onFeedbackShown",globalState.feedback.onFeedbackShown),API.expose("onFeedbackClosed",globalState.feedback.onFeedbackClosed)}function normalizeDefUId(e,t){if(!isDefined(e))return null;var r=null;return"number"==typeof e&&e>=0&&e<t.length?r=t[e].uid:"string"!=typeof e||(r=e),r}var __exports$1={},bindings={},unloadList=[],_extractEventNS=Bind=function(e,t,r,o){if(e&&t){if(isArray(t))return void t.forEach(function(t){__exports$1.Bind.call(null,e,t,r,o)});var n=_extractEventNS(t);if(bindings[n.ns][n.en].push({elem:e,cb:r,ub:o||!1}),t.indexOf("unload")>-1&&(e===_W||e===_D))return void unloadList.push(r);e._zone$addEventListener?e._zone$addEventListener(n.en,r,typeof o==typeof!0||null==o?!o:o):e.__zone_symbol__addEventListener?e.__zone_symbol__addEventListener(n.en,r,typeof o==typeof!0||null==o?!o:o):"propertychange"!=n.en&&e.addEventListener?e.addEventListener(n.en,r,typeof o==typeof!0||null==o?!o:o):e.attachEvent&&e.attachEvent("on"+n.en,r)}};__exports$1.Bind=Bind;var BindOnce=__exports$1.BindOnce=BindOnce;var _runActualUnBind=function Unbind(e,t,r,o){var n,i,a,s;if(isArray(t))t.forEach(;else{if(t&&t.indexOf("unload")>-1)for(s=0;s<unloadList.length;s++)if(unloadList[s]==r)return void unloadList.splice(s,1);if(0===arguments.length)for(var l in bindings)__exports$1.Unbind(l+":*"),delete bindings[l];else if("string"==typeof e){if("default"==(n=_extractEventNS(e)).ns){for(var c in bindings)if(hasProp(bindings,c))for(var f in i=bindings[c])if(hasProp(i,f)&&(f==n.en||"*"==n.en))for(s=0;s<i[f].length;s++)a=i[f][s],__exports$1._runActualUnBind(f,a.elem,a.cb,a.ub),i[f].splice(s--,1)}else for(var d in i=bindings[n.ns])if(hasProp(i,d)&&(d==n.en||"*"==n.en))for(s=0;s<i[d].length;s++)a=i[d][s],__exports$1._runActualUnBind(d,a.elem,a.cb,a.ub),i[d].splice(s--,1)}else if(e&&!t){for(var u in bindings)if(hasProp(bindings,u))for(var g in i=bindings[u])if(hasProp(i,g))for(s=0;s<i[g].length;s++)(a=i[g][s]).elem===e&&(__exports$1._runActualUnBind(g,a.elem,a.cb,a.ub),i[g].splice(s--,1))}else if(e&&t)if("default"==(n=_extractEventNS(t)).ns){for(var p in bindings)if(hasProp(bindings,p))for(var _ in i=bindings[p])if(hasProp(i,_)&&(_==n.en||"*"==n.en))for(s=0;s<i[_].length;s++)(a=i[_][s]).elem===e&&(__exports$1._runActualUnBind(_,a.elem,r||a.cb,a.ub),i[_].splice(s--,1))}else for(var v in n=_extractEventNS(t),i=bindings[n.ns])if(hasProp(i,v)&&(v==n.en||"*"==n.en))for(s=0;s<i[v].length;s++)(a=i[v][s]).elem===e&&(__exports$1._runActualUnBind(v,a.elem,r||a.cb,a.ub),i[v].splice(s--,1))}}__exports$1._runActualUnBind=_runActualUnBind,__exports$1.Unbind=Unbind;var _suppressUnload=!1,preventUnloadFlag=!1,HandleUnload=function(){if(!_suppressUnload&&!preventUnloadFlag){for(var t=unloadList.length-1;t>=0;t--)try{unloadList[t].call()}catch(e){}dispose(unloadList),__exports$1.Unbind()}};_D.addEventListener?(_W.addEventListener("beforeunload",HandleUnload,!0),_W.addEventListener("pagehide",HandleUnload,!0),_D.addEventListener("unload",HandleUnload,!0)):_D.attachEvent&&_W.attachEvent("onunload",HandleUnload);var FSEvent=),pageNavEvent=new FSEvent;if(history&&history.pushState){_W.addEventListener("popstate",;var oldpush=history.pushState;history.pushState=var storageTypes={CK:"COOKIE",MC:"MICROCOOKIE",CL:"COOKIELESS",DS:"DOMSTORAGE",CK_Hybrid:"HYBRID",MC_Hybrid:"MICRO_HYBRID"},setUnidentifiedUserAgentCpp=__exports$2={};function getRetryBadgesFlags(e){var t=e.all(),r=[];for(var o in t)o.includes("rb_")&&r.push(o);return r}function isBrowserSessionExpired(e,t,r){return r-1e3*t>e}function isIgnoreRepeatDaysActive(e,t,r){var o=e.surveydefs&&e.surveydefs.find(,n=o&&o.display||{},i=n.desktop,a=void 0===i?[]:i,s=n.mobile,l=void 0===s?[]:s;if(r.isMobile){for(var c=0;c<l.length;c++)if(l[c]&&l[c].ignoreRepeatDays)return!0}else for(var f=0;f<a.length;f++)if(a[f]&&a[f].ignoreRepeatDays)return!0;return!1}function _checkInviteRetry(e,t){var r=e.stg,o=e.config,n=e.browser,i=r.get("i");if(!(-1!==["a","d","x"].indexOf(i)))return i;var a=isIgnoreRepeatDaysActive(o,normalizeDefUId(r.get("def"),o.surveydefs),n),s=a&&isBrowserSessionExpired(r.get("pr"),o.config.browserSessionTime,t);return parseInt(r.get("rw"),10)<t||s?(r.erase("i"),r.erase("rw"),r.erase("tp"),a&&r.erase("respondentId"),null):i}function _checkButtonShowRetry(e,t,r){if(t.config.hideBadgeAfterInteraction||t.config.hideBadgeAfterSubmitting){var o=getRetryBadgesFlags(e);o&&o.forEach(}}function _checkBrainFailureRetry(e,t){var r=e.get("i");return"f"!==r?r:parseInt(e.get("fw"),10)<t?(e.erase("i"),e.erase("fw"),null):r}function _loadSystemDefinedCPPs(e,t,r){var o=r.getScreenResolution,n=r.getSize,globalConfig=getVendorConfig("fs");e.set("code",globalConfig.codeVer),e.set("tz",-(new Date).getTimezoneOffset()),e.set("product_type","web sdk");var i=o();if(e.set("device_width",i.w),e.set("device_height",i.h),e.set("dpr",_W.devicePixelRatio||1),t.isMobile)e.set("window_width",i.w),e.set("window_height",i.h);else{var a=n(_W);e.set("window_width",a.w),e.set("window_height",a.h)}setUnidentifiedUserAgentCpp(t,e)}function _loadCPPsForFirstPageView(e,t,r){var o=r.getRootDomain,n=r.INT,globalConfig=getVendorConfig("fs"),i=globalConfig.adobeRsid,a={browser:t.browser.name+" "+t.browser.version,os:t.os.name,referrer:_D.referrer.toString(),site:o(),sitekey:globalConfig.siteKey||""};for(var s in a)hasProp(a,s)&&e.set(s,a[s]);n.GA.uid(;var l=n.OM.uid(i,l),n.OM.mcid(i,l),n.OM.beacon(}function _loadUserDefinedCPPs(e,t,r){var o=r.retrieveNestedVariable,n=r.testAgainstSearch,i=r.Cookie;if(t.config.cpps){var a=t.config.cpps;for(var s in a){var l=a[s];if(isObject(l)){var c=l.source,f=l.name||l.val,d=void 0;switch(c){case"param":d=isDefined(f)&&getParam(f)||null;break;case"variable":d=isDefined(f)&&o(_W,f)||null;break;case"cookie":d=isDefined(f)&&(new i).getByCookieName(f);break;case"url":for(var u=0;u<l.patterns.length;u++){var g=l.patterns[u].regex||l.patterns[u].match;isString(_W.location.href)&&n(g,_W.location.href)&&(d=isDefined(l.patterns[u].value)?l.patterns[u].value:_W.location.href)}break;default:throw new Error("Unknown CPP source: "+c)}var p="url"!==c&&l.exists&&isDefined(l.exists.success)?l.exists.success:null;if(isDefined(p)&&e.get(s)!==p){var _=isDefined(l.exists.init)?l.exists.init:null;d=d?p:_}var v=isDefined(l.init)?l.init:"";if(l.mode&&"append"===l.mode){var b=l.lengthLimit||!1,h=!isDefined(l.preventRepeated)||l.preventRepeated,m=l.delimiter||",";e.append(s,isDefined(d)?d:v,b,h,m)}else isDefined(d)?e.set(s,d):isDefined(e.get(s))||e.set(s,v)}else e.set(s,l)}}}function _triggerAdminOverride(e,t){var r;if(e.get("ovr")&&(r=JSON.parse(e.get("ovr"))),r){for(var o=0;o<t.surveydefs.length;o++){var n=t.surveydefs[o].name;r.sp[n]&&(t.surveydefs[o].criteria.sp=r.sp[n]),r.lf[n]&&(t.surveydefs[o].criteria.lf=r.lf[n])}!0===r.pooloverride&&(t.__pooloverride=!0)}}function triggerPreload(e){var t=e.stg,r=e.config,o=e.browser,n=e.utils,i=new(0,n.CPPS)(t,r.config.cppsResetTimeout);delete r.__foundDefinition,delete r.__hasTracker,delete r.__canDisplayInvitation,delete r.__defaultSamplingPassed,delete r.__mouseoffSamplingPassed,delete r.__pooloverride,__exports$2._checkInviteRetry({stg:t,config:r,browser:o},n.now()),__exports$2._checkButtonShowRetry(t,r,n.now()),__exports$2._checkBrainFailureRetry(t,n.now()),__exports$2._loadSystemDefinedCPPs(i,o,n),t.get("pv")||__exports$2._loadCPPsForFirstPageView(i,o,n),__exports$2._loadUserDefinedCPPs(i,r,n),__exports$2._triggerAdminOverride(t,r)}__exports$2._checkInviteRetry=_checkInviteRetry,__exports$2._checkButtonShowRetry=_checkButtonShowRetry,__exports$2._checkBrainFailureRetry=_checkBrainFailureRetry,__exports$2._loadSystemDefinedCPPs=_loadSystemDefinedCPPs,__exports$2._loadCPPsForFirstPageView=_loadCPPsForFirstPageView,__exports$2._loadUserDefinedCPPs=_loadUserDefinedCPPs,__exports$2._triggerAdminOverride=_triggerAdminOverride;var __exports$3={};function feedbackPreload(e){var t=e.stg,r=e.config,o=e.browser,n=e.utils.CPPS,i=ext({browserCutoff:{Edge:1,IE:11,IEMobile:10,Safari:5.2,Firefox:30,Chrome:30,Opera:1e3},platformCutoff:{Android:5,Winphone:7.4,iPod:11,iPhone:11,iPad:11}},r);ext(r,i);for(var a=0;a<r.instances.length;a++){delete r.instances[a].__didpass}__exports$3._loadSystemDefinedCPPs(t,o,n)}function _loadSystemDefinedCPPs$1(e,t,r){var o=new r(e);setUnidentifiedUserAgentCpp(t,o)}function triggerBrowserCheck(e){var t=e.browser,r=e.config,o=e.stg;return!(!(0,e.utils.isTrackerAlive)(o)&&!t.isMobile&&r.config.browserCutoff[t.browser.name]&&t.browser.actualVersion<r.config.browserCutoff[t.browser.name])}function triggerCookieDomain(e){var t=e.stg,globalConfig=getVendorConfig("fs");return null!==t.selectCookieDomain(globalConfig.cookieDomain,window.location.toString())}__exports$3._loadSystemDefinedCPPs=_loadSystemDefinedCPPs$1;var __exports$4={};function triggerCriteriaCheck(e){var t=e.stg,r=e.browser,o=e.config,n=e.utils,i=n.CPPS,a=n.TriggerCriteria,s=n.findSurveyDefinition,l=n.isTrackerAlive,c=n.now,f=t.get("i");if("a"===f)return!1;var d=new i(t,o.config.cppsResetTimeout),u=new a(t,o,d,r);"x"!==f&&u.incrementGeneralPageViewCount();var g=s(o,u,t,r);if(!g)return!1;if(o.__foundDefinition=g,"x"!==f){var p=__exports$4._initLocale(o.__foundDefinition.def,n);d.set("locale",p),u.incrementPageViewCountForDefinition(g.def),r.isMobile||r.isTablet||!g.def.mouseoff||"off"===g.def.mouseoff.mode||1!=t.get("pv")||t.set("sst",c())}if("x"===f){var _=t.get("mhbi"),v=l(t);if(_||v)return o.__hasTracker=!0,!0}var b=!1,h=!1;u._match(o.config,r,"inviteBlacklist")?g.def.inviteBlacklist&&u.runAllTests(g.def.inviteBlacklist,r,!1,!0)&&(h=!0):b=!0;var m=u.getFittingDisplay(g.def),S="SHORTSURVEY"===m.inviteType&&m.shortSurvey,y=S&&m.shortSurvey.idleViewsBeforeStop&&m.shortSurvey.idleViewsBeforeStop>0,P=y&&u.getShortSurveyOptions(g.def,m),C=!S||!y||P,k=P&&m.shortSurvey.idleViewsShowConsecutively&&P.presentedCount>=1&&P.presentedCount<=m.shortSurvey.idleViewsBeforeStop;o.__defaultSamplingPassed=k||u.evalLoyaltySampling(g.def,"criteria"),o.__mouseoffSamplingPassed=t.get("sst")&&u.evalLoyaltySampling(g.def,"mouseoff");var w=o.__defaultSamplingPassed||o.__mouseoffSamplingPassed;return o.__canDisplayInvitation=!b&&!h&&C&&w,!!o.__canDisplayInvitation}function _initLocale(e,t){var r,o,n=t.Cookie,i=t.retrieveNestedVariable,a=e.language;if(isDefined(a.src)&&isDefined(a.locales)){switch(a.src){case"variable":isDefined(a.name)&&(o=i(window,a.name));break;case"cookie":if(isDefined(a.name))o=new n({}).getByCookieName(a.name);break;case"url":var s=a.locales;if(isDefined(s))for(var l=0,c=s.length;l<c;l++)if(isDefined(s[l].locale)&&isDefined(s[l].match)&&location.href.match(s[l].match))return r=s[l].locale,s[l].criteria&&ext(e.criteria,s[l].criteria),r!==e.language.locale&&(e.language.locale=r),s[l].locale;break;default:throw new Error("Unknown locale src: "+a.src)}if(o)for(var f=0;f<a.locales.length;f++)if(a.locales[f].match==o)return a.locale=a.locales[f].locale,a.locales[f].criteria&&ext(e.criteria,a.locales[f].criteria),a.locale}return a.locale||"en"}function triggerDeviceBlacklistCheck(e){for(var t=e.browser,r=e.config,o=e.stg,n=e.utils.isTrackerAlive,i=0;i<r.config.deviceBlacklist.length;i++)if(!n(o)&&toLowerCase(t.agent).indexOf(toLowerCase(r.config.deviceBlacklist[i]))>-1)return!1;return!0}function triggerEnvironmentCheck(e){var t=e.config,r=_W!=_W.top;return!(("dontRunOtherIframes"===t.config.workInIframes||!t.config.workInIframes)&&r)}function triggerFeatureCheck(e){var t=e.browser,r=e.config,o=e.stg;return!(!(0,e.utils.isTrackerAlive)(o)&&r.config.persistence==storageTypes.DS&&!t.supportsLocalStorage)}function triggerGlobalExclude(e){var t=e.stg,r=e.browser,o=e.config,n=e.utils,i=n.CPPS,a=n.TriggerCriteria;return"y"!==t.get("gx")&&(!!new a(t,o,new i(t,o.config.cppsResetTimeout),r)._match(o.config,r,"triggerBlacklist")||(t.set("gx","y"),!1))}function triggerInviteSituation(e){var t=e.stg.get("i");return"d"!=t&&"f"!=t}function triggerOptoutCheck(e){return!0!==e.stg.get("optout")}function triggerPlatformCheck(e){var t=e.browser,r=e.config,o=e.stg;return!(!(0,e.utils.isTrackerAlive)(o)&&r.config.platformCutoff[t.os.name]&&t.os.version<r.config.platformCutoff[t.os.name])}function feedbackParametersCheck(e){var t=e.config,r=!!(0,e.utils.getHashParm)("previewmode"),o=!!getParam("previewbadgemode");return!!(t.instances||r||o)}function feedbackPlatformCheck(e){var t=e.config,r=e.browser,o=!!(0,e.utils.getHashParm)("previewmode"),n=!!getParam("previewbadgemode");if(o||n)return!0;var i=t.browserCutoff[r.browser.name]&&r.browser.actualVersion<t.browserCutoff[r.browser.name],a=t.platformCutoff[r.os.name]&&r.os.version<t.platformCutoff[r.os.name];return!i&&!a}function feedbackTopicsCheck(e){for(var t=e.config,r=e.utils.checkFeedbackTopicAllowed,o=t.instances,n=!1,i=0;i<o.length;i++){var a=o[i];if(r(a))if(a.topics&&a.topics.length){for(var s=0;s<a.topics.length;s++)if(r(a.topics[s])){a.__didpass=!0,a.disabled||(n=!0);break}}else a.topics&&0===a.topics.length&&!a.disabled&&(n=!0)}return n}__exports$4._initLocale=_initLocale;var rules={trigger:[triggerBrowserCheck,triggerDeviceBlacklistCheck,triggerFeatureCheck,triggerGlobalExclude,triggerPlatformCheck,triggerCookieDomain,triggerEnvironmentCheck,triggerInviteSituation,triggerOptoutCheck,triggerCriteriaCheck],feedback:[feedbackPlatformCheck,feedbackParametersCheck,feedbackTopicsCheck]},__exports$5={__utilsModule:null},fsrd="fsReady",productDependencies={feedback:["$fs.feedback.js","$fs.survey.js"],trigger:["$fs.trigger.js"]},productPreload={trigger:triggerPreload,feedback:feedbackPreload},productAPIs={trigger:exposeAPI$1,feedback:exposeAPI$2};function getEnabledProducts(){var globalConfig=getVendorConfig("fs"),e=getVendorProducts("fs");globalConfig.products=globalConfig.products?globalConfig.products:{},eachProp({feedback:!0,trigger:!0},;var t=[];return eachProp(e,,t}function getQualifiedProducts(e){var t=[locator.normalizeUrl("$fs.utils.js"),locator.normalizeUrl("$fs.compress.js")];_fsRequire(t,function(t){var r=t.pageNavEvent,o=t.storageTypes,n=t._brainStorage;initializeGlobalState(t),__exports$5.__utilsModule=t,globalState.browser.ready.subscribe(function(){globalState.stg.ready.subscribe(function(){runStorageUpgradeIfNeeded(globalState.stg,o,n,function(){exposeAPI(runProductQualificationCheck,isProductCurrentlyQualified,globalState.cpps),eachProp(e,,"function"==typeof globalState.qamodeCallback&&(globalState.qamodeCallback(globalState.cpps),delete globalState.qamodeCallback),__exports$5._runProductsQualification(e),r.subscribe(!1,!1)})},!0,!0)},!0,!0)})}unction setDisqualificationState(e){"triggerBrowserCheck"===e.name||"triggerDeviceBlacklistCheck"===e.name||"triggerFeatureCheck"===e.name||"triggerGlobalExclude"===e.name||"triggerPlatformCheck"===e.name?__exports$5.disqualifieds.trigger=!0:"feedbackPlatformCheck"===e.name&&(__exports$5.disqualifieds.feedback=!0)}function _handleDisqualificationEvent(e){-1===e.indexOf("feedback")&&(__exports$5.disqualifieds.feedback=!0),-1===e.indexOf("trigger")&&(__exports$5.disqualifieds.trigger=!0),__exports$5.disqualifieds.feedback&&__exports$5.disqualifieds.trigger&&globalState.onProductsDisqualified.fire()}unction _runProductsQualification(e){if(fsCmd("fstest"))_fsRequire([locator.normalizeUrl("$fs.svadmin.js")],function(){});else if(fsCmd("fsoptout"))_fsRequire([locator.normalizeUrl("$fs.optout.js")],function(){});else{for(var t=[],r=0;r<e.length;r++){var o=e[r];~__exports$5.loadedProducts.indexOf(o)||__exports$5.runProductQualificationCheck(o)&&(t.push(o),__exports$5.loadedProducts.push(o))}__exports$5._handleDisqualificationEvent(e),__exports$5._loadQualifiedProducts(t)}}function _loadQualifiedProducts(e){var t=["$fs.utils.js","$fs.compress.js"],r=["record"];e.some(&&globalState.onProductQualified.fire();for(var o=0;o<e.length;o++){var n=e[o];t=t.concat(productDependencies[n])}for(var i=0;i<t.length;i++)t[i]=locator.normalizeUrl(t[i]);_fsRequire(t,_handleLoadedProductModules)}function _handleLoadedProductModules(){if(!_W["__"+fsrd+"__"]){var globalConfig=getVendorConfig("fs"),e=Object.keys(globalConfig.products),t=0===e.length||e.some(;t||console.warn("FSR API unavailable"),_W["__"+fsrd+"__"]=_W.__acsReady__=_W.fsReady=_W.acsReady=var r=_W["__"+fsrd+"_stk__"],o=if(r){for(var n=0;n<r.length;n++)nextTick(o(r[n]));delete _W["__"+fsrd+"_stk__"]}}}unction dataModuleGatewayBehavior(e){nextTick(}__exports$5.loadedProducts=[],__exports$5.currentlyQualifiedProducts=[],__exports$5.disqualifieds={feedback:!1,trigger:!1},__exports$5.getEnabledProducts=getEnabledProducts,__exports$5.getQualifiedProducts=getQualifiedProducts,__exports$5.runProductQualificationCheck=runProductQualificationCheck,__exports$5.setDisqualificationState=setDisqualificationState,__exports$5._handleDisqualificationEvent=_handleDisqualificationEvent,__exports$5._runProductsQualification=_runProductsQualification,__exports$5._loadQualifiedProducts=_loadQualifiedProducts,__exports$5._handleLoadedProductModules=_handleLoadedProductModules;var __exports$6={};function createBootSDK(e){return function createDOMReady(e){return var finalSetup=function(e){var globalConfig=getVendorConfig("fs"),t=getVendorProducts("fs");dynamicConfigReplacer(globalConfig),dynamicConfigReplacer(t),e?e&&dataModuleGatewayBehavior(e):defaultGatewayBehavior()};function ensureReadyAPI(){var e="fsReady",t="acsReady";if(isDefined(_W[t])&&(_W[e]=_W[t]),!isDefined(_W[e])){var r="__fsReady_stk__";_W[e]=_W[t]=_W[e]}function initialize(e){__exports$6.ensureReadyAPI(),locator.locateGW(),shouldLoadQAMode()?_fsRequire([_fsNormalizeUrl("$fs.qamode.js")],:e()}function finishSelfHost(e,t){var globalConfig=getVendorConfig("fs"),r=JSON.parse(t);r.global=r.global||{},r.global.selfHosted=globalConfig.selfHosted,r.global.siteKey=globalConfig.siteKey,r.global.codeVer=globalConfig.codeVer,r.global.gateway=globalConfig.gateway,r.global.configLocation=globalConfig.configLocation,setVendorConfig("fs",r.global),delete r.global,globalConfig=getVendorConfig("fs"),eachProp(r,function(e,t){globalConfig.products[t]&&setProductConfig("fs",t,e)}),finalSetup(e)}function finalSetupOnprem(e,t){var globalConfig=getVendorConfig("fs");if(globalConfig.selfHosted&&!t){var r=[locator.normalizeUrl("$fs.utils.js"),locator.normalizeUrl("$fs.sanitize.js")];_fsRequire(r,function(t,r){var o=new t.SeshStorage(globalConfig.siteKey+"_"+locator.environment,!1),n=o.get("setts");if(n)finishSelfHost(e,n);else{var i=""+(0!=globalConfig.configLocation.indexOf("/")?location.protocol+"//":"")+globalConfig.configLocation+"/"+locator.environment+"/config.json";(new t.AjaxTransport).send({method:"GET",url:i,success:function(t){t&&r.checkIntegrity(t).then(function(r){r?(o.set("setts",t),o.commit(),finishSelfHost(e,t)):(console.error("ForeSee WebSDK failed integrity code check on config.json."),console.error("Please contact ForeSee support for an updated integrity code."))}).catch(}})}})}else finalSetup(e)}__exports$6.ensureReadyAPI=ensureReadyAPI;var onDOMReady=createDOMReady(finalSetupOnprem),bootSDK=createBootSDK(onDOMReady);initialize(bootSDK);
})();
