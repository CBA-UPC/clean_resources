"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4082,2198],{55287:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return ScaleOptions}});var r=n(52322),l=n(39708),i=n(8583),a=n(47330),o=n(83122),s=n(89370);let c=new Map(Object.entries({[a.V1.Responsive]:{name:"Responsive",description:"Use the responsive design of the static styles",Icon:i.ae8},[a.V1.ScaleToFill]:{name:"Scale To Fill",description:"Fill the entire screen while maintaining the relative sizes of the original screen",Icon:i.Lxt},[a.V1.Fixed]:{name:"Fixed",description:"Fix to the original captured width and height. Visitors will scroll if there is overflow.",Icon:i.Uyi}}).map(e=>{let[t,n]=e;return[t,{...n,value:t}]}));function ScaleOptions(e){let{selected:t,onChange:n}=e,i=c.get(t);return(0,r.jsx)(l.v,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(l.v.Button,{className:"flex h-6 w-6 items-center justify-center rounded-md shadow ring-1 ring-slate-100/30 hover:bg-slate-200/10",children:i&&(0,r.jsx)(i.Icon,{className:"h-4 w-4 fill-slate-200/40"})})}),(0,r.jsx)(l.v.Items,{style:{zIndex:s.dw},className:"pointer-events-auto absolute right-0 top-7 z-10 w-36 translate-y-0 transform space-y-1 rounded-lg bg-white p-1 text-[0.8125rem] font-medium leading-6 text-slate-700 shadow-xl shadow-black/5 ring-1 ring-slate-700/10",children:Array.from(c.values()).map(})]})})}},34296:83193:15363:87017:},8016},9563},9626},8360},6854},5690},5972},5786},2030},5862},790},5229},35771:function(e,t,n){n.d(t,{Z:function(){return eE}});var r,l,i,a,o,s,c=n(52322),d=n(2784),u=n(22918),WebCaptureEditor_CaptureRenderContaine),m=n(96414),p=n(92333),h=n(84061),v=n(89370),f=n(16270),x=n(99809),b=n(11055);let AnchoredElemen};var components_AnchoredElemen},g=n(67569),y=n(87688),_=n(55283}var w=n(45103),j=n(8583),N=n(86414);let OpenMagicEditorActio};let BackMagicEditorActio};let CloseMagicEditorActio};var C=n(6676),E=n.n(C);let IgnoreOverlayActio};let RestoreOverlayActio}(r=a||(a={})).PERSONALIZATION="Personalization",r.UP_TO_DATE="UpToDate",r.DYNAMIC_EMBED="DynamicEmbed",r.TETHER="Tether",r.OVERLAY="Overlay",r.FIND_AND_REPLACE="FindAndReplace";var T=n(49208);let A=[{name:"Overlay",message:"Click to perform actions like editing elements behind overlay",Icon:j.KqJ,detectSelectedElement:detectElementOverlay,magicEditorRoute:a.OVERLAY}],scrollToCollapseContaine},scrollToMagicEdito}var k=n(52294),S=n(87017),I=n(15363),P=n(77512),R=n(96265);let InsertDynamicEmbedActio};var F=n(61807),z=n(88004),L=n(59720),D=n(68930 M=n(7901),O=n(32517),B=n(40180),V=n(73235),U=n(66547),Z=n(66980),H=n(26806);function _templateObject(){let e=(0,V._)(["\n    mutation FindAndReplaceImageAcrossCaptureCollection($data: FindAndReplaceImageCaptureCollectionInput!, $token: String!) {\n  findAndReplaceImageAcrossCaptureCollection(data: $data, token: $token) {\n    ...GlobalEditResult\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let W=(0,U.ZP)(_templateObject(),Z.w}let q=(0,U.ZP)(findAndReplaceTextAcrossCaptureCollection_templateObject(),Z.w);var K=n(83122),Y=n(64627),X=n(59103),G=n(22146);(l=o||(o={})).Text="text",l.Image="image";var J=n(57863),$=n(95623),Q=n(3016),ee=n(58627);(i=s||(s={})).TOP="TOP",i.TOP_END="TOP_END",i.TOP_START="TOP_START",i.RIGHT="RIGHT",i.RIGHT_START="RIGHT_START",i.RIGHT_END="RIGHT_END",i.LEFT="LEFT",i.LEFT_START="LEFT_START",i.LEFT_END="LEFT_END",i.BOTTOM="BOTTOM",i.BOTTOM_START="BOTTOM_START",i.BOTTOM_END="BOTTOM_END";let et=[{name:"Top center of element",value:"TOP"},{name:"Top right of element",value:"TOP_END"},{name:"Top left of element",value:"TOP_START"},{name:"Right center of element",value:"RIGHT"},{name:"Right top of element",value:"RIGHT_START"},{name:"Right bottom of element",value:"RIGHT_END"},{name:"Left center of element",value:"LEFT"},{name:"Left top of element",value:"LEFT_START"},{name:"Left bottom of element",value:"LEFT_END"},{name:"Bottom center of element",value:"BOTTOM"},{name:"Bottom left of element",value:"BOTTOM_START"},{name:"Bottom right of element",value:"BOTTOM_END"}}var en=n(46085),er=n(50280),el=n(89561),ei=n(97015),ea=n(12335),eo=n(45581),es=n(28879),ec=n.n(es),ed=n(89945),eu=n.n(ed),em=n(56180);let UpdateUpToDateElementActio};let RemoveUpToDateFromAttributeActio}ec().extend(eu());let ep=[{name:"Today's date minus 1 hour",value:er.u1.Hour},{name:"Today's date minus 1 day",value:er.u1.Day},{name:"Today's date minus 1 week",value:er.u1.Week},{name:"Today's date minus 1 month",value:er.u1.Month},{name:"Today's date minus 1 year",value:er.u1.Year},{name:"Preserve original offset of date",value:er.u1.CaptureDate}],randomBetweenZer);function generateOffsetFromOption(e){let{option:t,text:n,createdAt:r,exactOffset:l}=e;if(l)return function(e){let{option:t,text:n,createdAt:r}=e;switch(t){case er.u1.Hour:return -36e5;case er.u1.Day:return -864e5;case er.u1.Week:return -6048e5;case er.u1.Month:return -2592e6;case er.u1.Year:return -31536e6;case er.u1.CaptureDate:return calculateOffsetOrFallback(parseDate(n),r);default:return 0}}({option:t,text:n,createdAt:r});switch(t){case er.u1.Hour:return-randomBetweenZero(36e5);case er.u1.Day:return-randomBetweenZero(864e5);case er.u1.Week:return-randomBetweenZero(6048e5);case er.u1.Month:return-randomBetweenZero(2592e6);case er.u1.Year:return-randomBetweenZero(31536e6);case er.u1.CaptureDate:return calculateOffsetOrFallback(parseDate(n),r);default:return 0var eh=n(37100),ev=n(45152);let ef=[{name:"Personalization",description:"User attributes dynamically populated for the visitor",value:a.PERSONALIZATION,selector:"[".concat(v.lz,"]"),Icon:j.T$Z,SelectedElementComponent:J.X$,PreviewComponent:J.q1},{name:"Dynamic embed",description:"Insert an iframe that will fetch content from a remote source",selector:"[".concat(v.wK,"]"),value:a.DYNAMIC_EMBED,Icon:j.mr4,SelectedElementComponen},PreviewComponen}},{name:"Up-to-date",value:a.UP_TO_DATE,description:"Keep dates fresh by trailing behind the current day",selector:v.Jb,Icon:j.Que,SelectedElementComponent:function(e){let{onUpdate:t,state:n,dispatch:r}=e,{selectedElement:l,capture:i,htmlEditorText:a}=n,o=null==a?void 0:a.trim(),s=l.hasAttribute(v._K),{format:u,offset:m,offsetType:p,original:h}=(0,el.R)(l),f=parseDate(null!=o?o:""),[x,b]=(0,d.useState)(er.u1.Hour),g=null!=m?m:generateOffsetFromOption({createdAt:null==i?void 0:i.createdAt,option:x,text:null!=o?o:"",exactOffset:!0}),y=null!=p?p:er.u1.CaptureDate,_=f&&!s&&o?(0,eo.E)(o):null,w=(0,d.useCallback},[r,t]),N=(0,d.useCallback},[x,f,null==i?void 0:i.createdAt,g,_,r,l,t]),C=(0,d.useCallback},[r,g,t,w,l,y]),E=(0,d.useCallback)(e=>{let{value:n}=e,a=generateOffsetFromOption({option:n,text:null!=o?o:"",createdAt:null==i?void 0:i.createdAt,exactOffset:!0});r(new UpdateUpToDateElementAction(l,u,a,n)),t()},[r,o,t,l,null==i?void 0:i.createdAt,u]),T=u||_;return s&&T?(0,c.jsxs)("div",{className:"grid gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"label-small normal-case",children:"Up-to-date transformation"}),(0,c.jsxs)("div",{className:"max-w-[250px] truncate rounded-md border border-zinc-200 bg-zinc-50 px-3 py-2 text-sm font-medium",children:[h," â†’ ",(0,el.H)(T,g)]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"label-small",children:"Offset"}),(0,c.jsx)(Q.Z,{mb:0,className:"text-sm",items:ep,selected:y,onChange:E})]}),(0,c.jsx)(UpdateDateFormat,{format:T,onUpdate:C,original:null!=h?h:""}),(0,c.jsx)("button",{onClick:w,className:"inline-flex text-sm text-zinc-400 hover:text-zinc-500",children:"Remove up-to-date"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"text-sm italic text-zinc-500",children:_?"Date detected.":"No date detected."}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"label-small mt-3",children:"Offset"}),(0,c.jsx)(Q.Z,{mb:0,className:"text-sm",items:ep,selected:x,onChat)}})]}),_&&(0,c.jsxs)("button",{onClick:N,className:"mt-3 flex w-full items-center justify-center rounded-md border border-gray-300 px-2 py-2 text-[14px] text-sm text-gray-700 shadow-sm",children:[(0,c.jsx)(j.Que,{className:"mr-2 h-4 w-4"}),"Make up-to-date"]})]})},PreviewCompon})},MiddleComponent:function(e){let{dispatch:t,state:n,onUpdate:r}=e,[l,i]=(0,d.useState)(null),{capture:a}=n,[o,s]=(0,d.useState)(ep[0]);return(0,c.jsxs)(BoxSection,{title:"Auto-detect",children:[(0,c.jsxs)("div",{className:"text-sm text-zinc-500",children:["Use this feature to automatically convert"," ",(0,c.jsx)("b",{className:"font-semibold text-zinc-600",children:"all detected dates"})," at once."]}),null!==l?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mt-2 text-sm text-zinc-500",children:0==l?"No dates detected.":"".concat(l," date").concat(l>1?"s":""," detected and converted.")}),(0,c.jsx)("button",{className:"text-blue-primary mt-2 text-sm",onClick:()=>i(null),children:"Reset"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("label",{className:"label-small mt-3",children:"Offset"}),(0,c.jsx)(Q.Z,{mb:0,className:"text-sm",items:ep,selected:o.value,onChange:s}),(0,c.jsxs)("button",{onClick:function(){let e=(0,ei.IR)(),n=null==e?void 0:e.contentDocument;if(!(null==n?void 0:n.body))return;let l=function(e,t){let{document:n,offsetOption:r,captureCreatedAt:l,exactOffset:i}=t;return(0,X.EX)({node:n.__nv_sn,onMatch:t=>{var n;let{node:a,parent:o}=t;if(!o)return!1;let s=null!==(n=a.textContent)&&void 0!==n?n:"",c=(0,eo.E)(s);if(!c)return!1;let d=generateOffsetFromOption({option:r.value,text:s,createdAt:l,exactOffset:i}),u=(0,ea.P)(o.id);return!!u&&(e(new UpdateUpToDateElementAction(u,c,d,r.value)),!0)}})}(t,{document:n,offsetOption:o,captureCreatedAt:null==a?void 0:a.createdAt,exactOffset:!1});i(l),r()},className:"mt-3 flex w-full items-center justify-center rounded-md border border-gray-300 px-2 py-2 text-[14px] text-sm text-gray-700 shadow-sm",children:[(0,c.jsx)(j.Que,{className:"mr-2 h-4 w-4"}),"Convert all dates"]})]})]})}},{name:"Tether",description:"Lock the position of one element relative to another",value:a.TETHER,selector:"[".concat(v.Fi,"]"),Icon:j.D0T,SelectedElementCompon})},PreviewCompon})}},{name:"Overlay",description:"Drill past an overlay to edit the content behind",value:a.OVERLAY,selector:"[".concat(v.xF,"]"),Icon:j.KqJ,SelectedElementCompon})},PreviewCompon})}},{name:"Find & Replace",description:"Replace all instances of text across a capture",value:a.FIND_AND_REPLACE,selector:"[".concat(v.xc,"]"),Icon:j.lvM,MiddleCompon})})}var ex=n(20306),eb=n(3008),eg=n(83615),ey=n(20851);let e_=globalThis.localStorage&&!!localStorage.getItem("debug:navattic:captureEditor:scroll"),ew=globalThis.localStorage&&!!localStorage.getItem("debug:navattic:captureEditor:scroll:manual"),ensureSnAttribu})},getScrollElem,n},acquireBestScrollCandid}let EmptyMess]}),SidebarVisi})}var ej=n(91897),eN=n(38145);let eC=d.forward})});eC.displayName="EditorContent";var eE=eC},76})},45)}},79)}},60)}},98}}},92}}},3n}},91897:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(52322),l=n(2784),Builder_BuilderEr})},i=n(6781),a=n(83603),o=n(47330),s=n(70064),c=n(97015),d=n(50733),u=n(31475),m=n(20851);let p={min:{width:void 0,height:void 0,scale:.5},max:{width:void 0,height:void 0,scale:2}},cleanupElStyles=e=>{e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.transform=""};var use_web_capture_scalar=e=>{let{playerEl:t,strategy:n,embeddedInApp:r,updateTransformScalar:i,pause:a}=e,h=!a,v=(0,l.useRef)(!1),f=(0,u.jA)({"scale-to-fill":!0,responsive:!0,fixed:!0}),x=f["scale-to-fill"]?o.V1.ScaleToFill:f.fixed?o.V1.Fixed:f.responsive?o.V1.Responsive:n,b=(0,l.useRef)(x),{isMobile:g}=(0,s.qE)();(0,l.useEffect)(()=>{var e,n,l,a;let s=t||document.querySelector("#navattic-player"),u=null==s?void 0:s.contentWindow;if(!u||!h||g)return;let f=null==s?void 0:null===(n=s.contentDocument)||void 0===n?void 0:null===(e=n.__nv_sn)||void 0===e?void 0:e.clientWidth,y=null==s?void 0:null===(a=s.contentDocument)||void 0===a?void 0:null===(l=a.__nv_sn)||void 0===l?void 0:l.clientHeight,maybeCleanupFrameStys)},onResize=e=>{let t=s.parentElement,n=e.srcElement||e.currentTarget,r=null==t?void 0:t.clientWidth,l=null==t?void 0:t.clientHeight;if(!(0,c._H)(n))return;let a={width:r||Math.min(n.innerWidth,n.outerWidth),height:l||Math.min(n.innerHeight,n.outerHeight)},u=1;if(x===o.V1.ScaleToFill){if(f&&y){let{isPortrait:e,transformScalar:t=u}=function(e){let{playerFrame:t,viewportDimensions:n,originalDimensions:r=d.lk,wasPortrait:l}=e,i=t.contentDocument;if(!i)return{scaleFactor:0,isPortrait:!1};let a=(0,m.IV)({min:p.min.width,value:n.width,max:p.max.width}),o=(0,m.IV)({min:p.min.height,value:n.height,max:p.max.height}),s=o>a,c=(0,m.IV)({min:p.min.scale,value:a/r.width,max:p.max.scale}),u=(0,m.IV)({min:p.min.scale,value:o/r.height,max:p.max.scale}),h=s?u:c;t.style.width="".concat(100/c,"%"),t.style.height="".concat(s?100:100/h,"%");let v=1;return s?l||(t.style.transform="",t.ownerDocument.body.style.overflowX="auto"):(v=h,t.style.transformOrigin="top left",t.style.transform="scale(".concat(v,")"),l&&(t.ownerDocument.body.style.overflowX="")),{transformScalar:v,isPortrait:s}}({playerFrame:s,viewportDimensions:a,originalDimensions:{width:f,height:y},wasPortrait:v.current});u=t,v.current=e}}else x===o.V1.Fixed?(s.style.width="".concat(f,"px"),s.style.height="".concat(y,"px")):x===o.V1.Responsive&&maybeCleanupFrameStyles();null==i||i(u)};return onResize({srcElement:window,currentTarget:window}),window.addEventListener("resize",onResize),r&&u.addEventListener("resize",onResie)}},[t,h,x,r,i,g])},h=n(2530),v=n(80638);let CaptureCont})},f=l.forwardRef((e,t)=>{let{fetchingOrBuilding:n,errorMessage:i,scaleStrategy:o,updateTransformScalar:s}=e,c=l.useRef(null);return l.useImperativeHandlent),use_web_capture_scalar({playerEl:c.current,strategy:o,embeddedInApp:!0,updateTransformScalar:s,pause:n}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{ref:c,style:{visibility:i?"hidden":void 0,position:"absolute",height:"100%",width:"100%",margin:0}}),(0,r.jsx)(CaptureContent,{fetchingOrBuilding:n,errorMessage:i})]})});f.displayName="WebCapturePreview";var x=f},38)}},4)},96}}},37)}},61)}},40)}},81)}},61)}},95l}},66W)},65416:function(e,t,n){n.d(t,{N:function(){return usePublishWebBasedCaptureVersionMutation}});var r=n(73235),l=n(66547),i=n(28616),a=n(26806);function _templateObject(){let e=(0,r._)(["\n    mutation PublishWebBasedCaptureVersion($input: WebBasedCaptureVersionPublishInput!) {\n  publishWebBasedCaptureVersion(input: $input) {\n    ...WebBasedCaptureVersion\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let o=(0,l.ZP)(_templateObject(),i.W);function usePublishWebBasedCaptureVersionMutation(){return a.Db(o)}},74)}},50)}},53)}},19894:function(e,t,n){n.d(t,{Z:function(){return use_build_web_capture}});var r=n(2784),l=n(70274),i=n(87688),a=n(89370),o=n(83408),s=n(71664);let c=(0,o.hu)("debug:navattic:personalization"),parsePersonalizedElemn}},setPersonalizedSrc=async(e,t)=>{e.getAttribute("src")!==t&&e.setAttribute("src",t)},setPersonalizedBackgroundImn)},setPersonalizedT]}},setPersonalizedInputVat)},applyPersonalizationFallbt)},d="[".concat(a.lz,"][").concat(a.rX,"]"),applyPersonalizat}}},applyPersonalizationToCapt})};var u=n(30555),m=n(64627),use_fetch_capt])},use_build_web_capt])}},71}}},64627:function(e,t,n){n.d(t,{Az:function(){return getWebCaptureFromCache},J9:function(){return fetchWebCaptureCacheFirst},KE:function(){return requestThemeToken},Y6:function(){return initiateWebCapture},qd:function(){return requestProductDemoCaptureToken}});var r=n(24595),l=n(17840),i=n(16377),a=n(39391);let requestProductDemoCaptureToken=async e=>{let{collectionId:t,flowId:n}=e;return await r.Z.requestSessionToken({collectionId:t,flowId:n,action:"EDIT",mode:"product-demo"})}let initiateWebCapture=async e=>{let{collectionId:t,url:n,clickToCaptureEnabled:r}=e,i=await l.qE();if(!i)return{ok:!1,error:"Chrome extension needs to be installed"};let a=await requestProductDemoCaptureToken({collectionId:t});if(!a)return{ok:!1,error:"Failed to request session token for initiating capture"};let o=await l.Xi({url:n,token:a,collectionId:t,config:{clickToCapture:r}});return o?{ok:!1,error:o}:{ok:!0,error:void 0}},o=i.Z.CAPTURE_PLAYER_URL,fetchWebCapts}},s=new Map,fetchWebCaptureCacheFi,r},getWebCaptureFromCa(e)},59)}},50280:function(e,t,n){var r,l,i,a,o,s;n.d(t,{b:function(){return i},cU:function(){return l},u1:function(){return r}}),(a=r||(r={})).Hour="HOUR",a.Day="DAY",a.Week="WEEK",a.Month="MONTH",a.Year="YEAR",a.CaptureDate="CAPTURE_DATE",(o=l||(l={}))[o.Text=0]="Text",o[o.Input=1]="Input",(s=i||(i={}))[s.Img=0]="Img",s[s.BackgroundImage=1]="BackgroundImage"},67)}},73}}},81l}},55l}},2}}},50733:function(e,t,n){n.d(t,{$M:function(){return r},SW:function(){return i},lk:function(){return l}});let r=Symbol("nv_node_ref"),l={width:1200,height:750},i=800},59/i},63})},33d}},12t}},45)}}}]);
//# sourceMappingURL=4082-a24c9dcd612b5466.js.map