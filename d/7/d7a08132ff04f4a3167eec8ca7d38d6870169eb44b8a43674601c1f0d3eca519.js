!self,(function(e){return function(){var t={9662:function(e,t,n){var r=n(7854),i=n(614),o=n(6330),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},9483:6077:1223:1530:5787:9670:4019:260:3331:1048:1285:8533:7745:8457:1318:2092:6583:1194:9341:3671:206:4362:7475:5417:3411:7072:4326:648:5631:7710:9920:4964:8544:4994:8880:9114:6135:654:7235:9781:317:8324:8509:8886:function(e,t,n){var r=n(8113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:256:function(e,t,n){var r=n(8113);e.exports=/MSIE|Trident/.test(r)},1528:6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:1036:function(e,t,n){var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:7392:8008:748:2109:7293:7007:6790:6677:2104:9974:6916:6530:1702:5005:1246:8554:8173:647:7854:2597:3501:function(e){e.exports={}},842:490:4664:1179:8361:9587:2788:2423:9909:7659:3157:614:4411:4705:5988:111:1913:function(e){e.exports=!1},7850:2190:408:9212:3383:7497:6244:5948:3366:133:590:}))},a))},e)}}, e}},}:l},}:c},}:ft)}}, e}},,e}},])}},))}},i)}},ols},ll}},Of)}, l}},i)}},}:n}, 0)}]"}},")}},:t}}s=r},}}}},se}}, e}},}))},")}},s=g},,t}},}))},}))},}))}, e}}, t}},})}},})}},))}},s=a},)"})}(n)}}!0)}}t(r)}!0)}}.")}}n n}}(3)}r:b}eOf)},t)}}n n}}e))}}(r)}}):0}}e))}}n n}}n t}},t)}}+""}}g(r)}(e)}}t"}}}(){}}h}))},t)}}n f}}]))}}36)}}ator},6061:function(e,t,n){var r=n(5112);t.f=r}[e]}}ˆâ€‰â;r<i;);l(srray",proto:!0},{fill:i}),o("fill")},7327:function(e,t,n){"use strict";var r=n(2109),i=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},4553:function(e,t,n){"use strict";var r=n(2109),i=n(2092).findIndex,o=n(1223),a="findIndArray(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return i(this,e,arguments.length>ngth>i(r,ttion(gumen,i("kturn ts.lehis,e&d(rnts[d+2];return b.length=A-r+n,i}})},3792:fc,u(tth?arc:funototymber.)+m:hrced:tion(r:fun(r,t=mes(1{keysproto0,forrn i.n&&!notypeo:!0,"flagts.ledex+=e.length,{value:e,done:!1})}))},6373:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(6916),a=n(1702),s=n(4994),u=n(4488),c=n(7466),l=n(1340),d=n(9670),f=n(4326),p=n(7976),h=n(7850),m=n(7066),v=n(8173),g=n(1320),y=n(7293),b=n(5112),A=n(6707),x=n(1530),w=n(7651),D=n(9909),S=n(1913),C=b("matchAll"),T="RegExp String Iterator",E=D.set,_=D.getterFor(T),L=RegExp.prototype,P=i.TypeError,O=a(m),F=a("".l),M=!!ring:t,global:n,un:!1}Index=c(s.lastIndex),new I(i,u,o,a)};r({target:"ew RegExp(e,"g"),S?o(k,i,n):x),c)ts.le"!=="b=E}}({glofunctreturts.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var r=n(260),i=n(2092).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.le:voidents[1]:void 0);return o(this,t)}))},7174:function(e,t,n){"use strict";var r=n(260),i=n(2092).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var r=n(260),i=n(2092).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4197:function(e,t,n){n(9843)("Float32",(function(e){return function(tts.length>1?arguments[1]:void 0)}))},4731:function(e,t,n){"use strict";var r=n(260),i=n(1318).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var r=n(260),i=n(1318).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.le)),h((func(thistion(e,t){return new(o(e))(t)}))}))},4483:function(e,t,n){"use strict";var r=n(260),i=n(3671).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(o(this),eis),eo],t[tiontion(ts.le/t>0&MENT,type.r d=uion(t)}})))i[c]p].prrts=bal:!O9VBhyColor:"categoryColor-ifF6E"},t.Z=a},9510:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".loading-Y9Zss {\n  position: absolute;\n  top: 75%;\n  left: 50%;\n  transform: translate(-50%, -50%) translateZ(0);\n  font-family: Arial, Helvetica, sans-serif;\n  pointer-events: none;\n}\n\n.loading-Y9Zss .timer-orgx_ {\n  padding: 4px 6px;\n  border-radius: 5px;\n  background: rgba(38, 38, 38, 0.47);\n  color: #f8f8f8;\n  font-size: 1.25em;\n  font-weight: bold;\n  text-align: center;\n}\n\n.spinner-d7259 {\n  width: 70px;\n  text-align: center;\n}\n\n.spinner-d7259 > div {\n  width: 18px;\n  height: 18px;\n  background-color: rgba(255, 255, 255, 0.8);\n  box-shadow: 0 0 10px #646464;\n  border-radius: 100%;\n  display: inline-block;\n  -webkit-animation: sk-bouncedelay-jb5Ni 1.4s infinite ease-in-out both;\n  animation: sk-bouncedelay-jb5Ni 1.4s infinite ease-in-out both;\n}\n\n.spinner-d7259 .bounce1-Ywi_u {\n  -webkit-animation-delay: -0.32s;\n  animation-delay: -0.32s;\n}\n\n.spinner-d7259 .bounce2-hJURR {\n  -webkit-animation-delay: -0.16s;\n  animation-delay: -0.16s;\n}\n\n@-webkit-keyframes sk-bouncedelay-jb5Ni {\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n  }\n  40% {\n    -webkit-transform: scale(1);\n  }\n}\n\n@keyframes sk-bouncedelay-jb5Ni {\n  0%, 80%, 100% {\n    transform: scale(0);\n  }\n  40% {\n    transform: scale(1);\n  }\n}\n",""]),a.locals={loading:"loading-Y9Zss",timer:"timer-orgx_",spinner:"spinner-d7259","sk-bouncedelay":"sk-bouncedelay-jb5Ni",bounce1:"bounce1-Ywi_u",bounce2:"bounce2-hJURR"},t.Z=a},1834:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".maps-PSzhi {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  pointer-events: none;\n  direction: ltr;\n}\n\n.mapboxMap-xstcX {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: grey;\n}\n\n.timeSelectionContainer-rnJ67 {\n  position: relative;\n  bottom: 0;\n  left: 0px;\n  display: flex;\n}\n\n.timeSelectionContainer-rnJ67.permanentlyHidden-LhYKt {\n  visibility: hidden !important;\n  pointer-events: none !important;\n}\n\n.timeSelectionWrapper-oGz5d {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  bottom: 10px;\n  left: 10px;\n  right: 220px;\n  z-index: 2;\n  margin: 0 auto;\n  pointer-events: initial;\n  transition: right 500ms;\n  min-width: 300px;\n}\n\n.timeSelectionWrapper-oGz5d.fullWidth-ZiCXc {\n  right: 10px;\n}\n\n.timeSelectionWrapper-oGz5d.hidden-HWb9O {\n  visibility: hidden;\n  pointer-events: none;\n}\n\n.timeSelectionWrapper-oGz5d .calendarContainer-JNHEH {\n  display: flex;\n  position: relative;\n  height: 36px;\n  margin-left: 10px;\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n}\n\n.timeSelectionWrapper-oGz5d .calendarContainer-JNHEH .dateInput-p14H6 {\n  background: none;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  border: none;\n}\n\n.mb-phone .timeSelectionWrapper-oGz5d {\n  bottom: 15px;\n  left: 0;\n}\n\n.mb-phone .timeSelectionWrapper-oGz5d.fullWidth-ZiCXc {\n  right: 0;\n}\n\n.logo-H4PCf {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  width: 20%;\n  max-width: 220px;\n  min-width: 150px;\n}\n",""]),a.locals={maps:"maps-PSzhi",mapboxMap:"mapboxMap-xstcX",timeSelectionContainer:"timeSelectionContainer-rnJ67",permanentlyHidden:"permanentlyHidden-LhYKt",timeSelectionWrapper:"timeSelectionWrapper-oGz5d",fullWidth:"fullWidth-ZiCXc",hidden:"hidden-HWb9O",calendarContainer:"calendarContainer-JNHEH",dateInput:"dateInput-p14H6",logo:"logo-H4PCf"},t.Z=a},1363:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),u=n.n(s),c=new URL(n(334),n.b),l=new URL(n(409),n.b),d=new URL(n(4181),n.b),f=new URL(n(4385),n.b),p=a()(i()),h=u()(c),m=u()(l),v=u()(d),g=u()(f);p.push([e.id,".select-ZPaHn {\n  position: relative;\n  height: 2.5em;\n}\n\n.select-ZPaHn select {\n  position: absolute;\n  margin: 0.25em 0.8em;\n  padding-right: 10px;\n  height: 100%;\n  max-width: 180px;\n  border: none;\n  font-size: 13px;\n  opacity: 0;\n}\n\n.select-ZPaHn select::-ms-expand {\n  display: none;\n}\n\n.select-ZPaHn .dropdownHeader-eLx_f {\n  position: absolute;\n  margin: 0.25em 0.75em;\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  padding: 0.2em 0.5em;\n  pointer-events: none;\n  max-width: 180px;\n  padding-right: 30px;\n  white-space: nowrap;\n  box-sizing: border-box;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.select-ZPaHn .dropdownHeader-eLx_f:after {\n  display: inline-block;\n  position: absolute;\n  content: url("+h+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+h+"));\n  margin-left: 0.5em;\n  right: 10px;\n}\n\n.mb-rtl select {\n  direction: rtl;\n  right: 0;\n}\n\n.mb-rtl .dropdownHeader-eLx_f {\n  right: 0;\n}\n\n.mb-rtl .searchBarInputText-pMgOZ {\n  background: url("+m+") right no-repeat;\n  background-size: 18px 18px;\n  background-position: 0px 7px 7px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.mb-rtl .searchBarTextClear-eakdh {\n  right: unset;\n  left: 5px;\n}\n\n.overlaysSelectionWrapper-O7O_6 {\n  margin: 0.5em 0 0.1em 0;\n}\n\n.toggleWrapper-wKpjH {\n  position: relative;\n  margin: 0 1em;\n  cursor: pointer;\n}\n\n.toggleWrapper-wKpjH .toggle-owm6j {\n  width: 15px;\n  height: 11px;\n  border-radius: 11px;\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  border: 1px solid #f8f8f8;\n  border: 1px solid var(--meteoblue-mapsplugin-color-toggle, #f8f8f8);\n}\n\n.toggleWrapper-wKpjH .toggle-owm6j:after {\n  background: 1px solid #f8f8f8;\n  background: var(--meteoblue-mapsplugin-color-toggle, #f8f8f8);\n}\n\n.toggleWrapper-wKpjH .toggle-owm6j.active-GX2EL {\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n\n.toggleWrapper-wKpjH .toggle-owm6j:after {\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  content: '';\n  width: 9px;\n  height: 9px;\n  border-radius: 100%;\n}\n\n.toggleWrapper-wKpjH .toggle-owm6j.active-GX2EL:after {\n  left: 5px;\n}\n\n.toggleWrapper-wKpjH.activeByDefault-1kEIr {\n  display: none;\n}\n\n.mb-rtl .toggleWrapper-wKpjH {\n  text-align: right;\n  padding-right: 25px;\n}\n\n.inlineButtons-ymbn5 {\n  width: -webkit-max-content;\n  width: -moz-max-content;\n  width: max-content;\n  cursor: pointer;\n  white-space: nowrap;\n}\n\n.inlineButtons-ymbn5 .inlineButton-EWi6W {\n  display: inline-block;\n  padding: 0.2em 0.5em;\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-left: none;\n}\n\n.inlineButtons-ymbn5 .inlineButton-EWi6W:hover, .inlineButtons-ymbn5 .inlineButton-EWi6W.active-GX2EL {\n  background: #04101e;\n  background: var(--meteoblue-mapsplugin-background-highlight-secondary, #04101e);\n}\n\n.inlineButtons-ymbn5 .inlineButton-EWi6W:first-of-type {\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 5px 0 0 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) 0 0 var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.inlineButtons-ymbn5 .inlineButton-EWi6W:last-of-type {\n  border-radius: 0 5px 5px 0;\n  border-radius: 0 var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0;\n}\n\n.inlineButtons-ymbn5.multipleRows-VM14_ {\n  width: 100%;\n}\n\n.inlineButtons-ymbn5.multipleRows-VM14_ .inlineButton-EWi6W {\n  display: block;\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-top-width: 0;\n  white-space: initial;\n}\n\n.inlineButtons-ymbn5.multipleRows-VM14_ .inlineButton-EWi6W:first-of-type {\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 5px 5px 0 0;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0 0;\n}\n\n.inlineButtons-ymbn5.multipleRows-VM14_ .inlineButton-EWi6W:last-of-type {\n  border-radius: 0 0 5px 5px;\n  border-radius: 0 0 var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.mb-rtl .inlineButtons-ymbn5 .inlineButton-EWi6W:first-of-type {\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 0 5px 5px 0;\n  border-radius: 0 var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0;\n}\n\n.mb-rtl .inlineButtons-ymbn5 .inlineButton-EWi6W:last-of-type {\n  border-right: 0;\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 5px 0 0 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) 0 0 var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.mb-rtl .inlineButtons-ymbn5.multipleRows-VM14_ .inlineButton-EWi6W:first-of-type {\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 5px 5px 0 0;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0 0;\n}\n\n.mb-rtl .inlineButtons-ymbn5.multipleRows-VM14_ .inlineButton-EWi6W:last-of-type {\n  border-top: 0;\n  border-radius: 0 0 5px 5px;\n  border-radius: 0 0 var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.sidebar-FgS_J {\n  position: absolute;\n  top: 10px;\n  bottom: 10px;\n  right: 10px;\n  z-index: 3;\n  width: 200px;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 13px;\n  pointer-events: none;\n  transition: right 500ms;\n}\n\n.sidebar-FgS_J.hidden-fMSC_ {\n  right: -200px !important;\n}\n\n.sidebar-FgS_J.hidden-fMSC_ .controls-X9MLQ .toggleMenuButton-PZ2Od:after {\n  transform: rotate(90deg);\n}\n\n.mb-phone .sidebar-FgS_J {\n  top: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.wrapper-Eexjt {\n  order: 2;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.mb-phone .wrapper-Eexjt {\n  border-radius: 5px 0 5px 5px;\n}\n\n.menu-APvrY {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.mb-rtl .menu-APvrY {\n  direction: rtl;\n}\n\n.categoriesContainer-QSCZ6 {\n  overflow: auto;\n  pointer-events: auto;\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  scrollbar-width: thin;\n  scrollbar-color: var(--meteoblue-mapsplugin-color-scrollbar, #aaa) rgba(0, 0, 0, 0.2);\n}\n\n.categoriesContainer-QSCZ6::-webkit-scrollbar {\n  background-color: rgba(0, 0, 0, 0.2);\n  height: 8px;\n}\n\n.categoriesContainer-QSCZ6::-webkit-scrollbar-thumb {\n  background-color: var(--meteoblue-mapsplugin-color-scrollbar, #aaa);\n  border-radius: 4px;\n}\n\n.mb-phone .categoriesContainer-QSCZ6 {\n  border-radius: 5px 0 0 5px;\n  border-radius: 0 0 0 var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.categorieContainer-JbEgo {\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n}\n\n.categorieContainer-JbEgo .mapContainer-lYViL {\n  display: none;\n}\n\n.categorieContainer-JbEgo.active-GX2EL .mapContainer-lYViL {\n  display: block;\n}\n\n.mb-rtl .categorieContainer-JbEgo {\n  text-align: right;\n}\n\n.categorieTitle-tje4G {\n  font-size: 1em;\n  font-weight: bold;\n  margin: 0;\n  padding: 0.5em 1em;\n  background: rgba(0, 0, 0, 0.2);\n  width: 100%;\n  box-sizing: border-box;\n  pointer-events: initial;\n  cursor: pointer;\n}\n\n.mapContainer-lYViL {\n  width: 100%;\n  max-width: 200px;\n  pointer-events: initial;\n  box-sizing: border-box;\n}\n\n.mapContainer-lYViL.active-GX2EL, .mapContainer-lYViL:hover {\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n\n.mapContainer-lYViL.noHighlight-Z7uL4 {\n  background: none;\n}\n\n.mapContainer-lYViL.active-GX2EL .mapTitle-d1s8D {\n  cursor: pointer;\n  padding: 0.5em 1em;\n  overflow: visible;\n  white-space: initial;\n  text-overflow: initial;\n}\n\n.mapContainer-lYViL .mapTitle-d1s8D {\n  cursor: pointer;\n  padding: 0.5em 1em;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.mapContainer-lYViL .mapOptions-Qpzl_ {\n  max-width: 100%;\n}\n\n.mapContainer-lYViL .variants-KAUpa {\n  display: flex;\n  padding: 0.2em 0.7em;\n  margin-bottom: 0.5em;\n}\n\n.mapContainer-lYViL .levels-N7dUl {\n  margin-bottom: 0.5em;\n}\n\n.mb-rtl .variants-KAUpa {\n  padding-right: 0.7em;\n}\n\n.settings-yJMnl {\n  order: 4;\n  width: 200px;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 13px;\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  pointer-events: initial;\n  margin-top: 12px;\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n}\n\n.mb-phone .settings-yJMnl {\n  border-radius: 5px 0 0 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) 0 0 var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.customMenu-X0kJb {\n  margin-top: 0.5em;\n  border-top: 1px solid #929292;\n  border-top: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n}\n\n.customMenu-X0kJb .customMenuEntry-BizmL {\n  display: inline-block;\n  cursor: pointer;\n  padding-right: 0.5em;\n  margin-left: 0.5em;\n  border-right: 1px solid #929292;\n  border-right: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  text-decoration: none;\n}\n\n.customMenu-X0kJb .customMenuEntry-BizmL:last-of-type {\n  border-right: none;\n}\n\n.customMenu-X0kJb .customMenuEntry-BizmL:hover {\n  color: #9dbcff;\n  color: var(--meteoblue-mapsplugin-color-link-hover, #9dbcff);\n}\n\n.mb-rtl .customMenu-X0kJb {\n  text-align: right;\n}\n\n.mb-rtl .customMenu-X0kJb .customMenuEntry-BizmL {\n  margin-right: 0.5em;\n  margin-left: 0;\n  padding-right: 0;\n  padding-left: 0.5em;\n  border-right: none;\n  border-left: 1px solid #acacac;\n}\n\n.mb-rtl .customMenu-X0kJb .customMenuEntry-BizmL:last-of-type {\n  border-left: none;\n}\n\n.controls-X9MLQ {\n  position: absolute;\n  transform: translateX(-100%);\n  display: flex;\n  pointer-events: initial;\n  opacity: 0.7;\n  transition: opacity 150ms;\n}\n\n.controls-X9MLQ:hover {\n  opacity: 1;\n}\n\n.controlButton-NthjG {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 28px;\n  height: 28px;\n  margin-right: 5px;\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  cursor: pointer;\n}\n\n.zoomButton-jVVBn {\n  font-size: 1.5em;\n}\n\n.toggleMenuButton-PZ2Od:after {\n  content: url("+h+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+h+"));\n  position: absolute;\n  transform: rotate(-90deg);\n  transition: transform 500ms;\n  transition-delay: 500ms;\n}\n\n.logStyleButton-HSUHI {\n  width: -webkit-max-content;\n  width: -moz-max-content;\n  width: max-content;\n  padding: 0 0.25em;\n}\n\n.mb-phone .controls-X9MLQ {\n  margin-top: 10px;\n}\n\n.mb-phone .controls-X9MLQ .toggleMenuButton-PZ2Od {\n  width: 42px;\n  height: 42px;\n}\n\n.mb-phone .controls-X9MLQ .zoomButton-jVVBn {\n  display: none;\n}\n\n.mb-phone .sidebar-FgS_J.hidden-fMSC_ .toggleMenuButton-PZ2Od {\n  display: none;\n}\n\n.menuButton-S2KQh {\n  display: none;\n}\n\n.mb-phone .sidebar-FgS_J.hidden-fMSC_ .menuButton-S2KQh {\n  display: flex;\n  position: absolute;\n  bottom: 120px;\n  margin-right: 10px;\n  transform: translateX(calc(-100% - 5px));\n  pointer-events: initial;\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  width: 36px;\n  height: 36px;\n}\n\n.mb-phone .sidebar-FgS_J.hidden-fMSC_ .menuButton-S2KQh:before {\n  display: block;\n  content: url("+v+");\n  content: var(--meteoblue-mapsplugin-icon-menu, url("+v+"));\n  transform: scale(1.5);\n}\n\n.backgroundMask-EQc8P {\n  display: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 2;\n  pointer-events: initial;\n  transition: background-color 400ms;\n}\n\n.mb-phone .backgroundMask-EQc8P {\n  display: block;\n}\n\n.mapboxgl-ctrl-attrib {\n  display: none;\n}\n\n.shareOption-fOFiy {\n  display: block;\n  margin: 1em 0;\n}\n\ninput.shareOption-fOFiy {\n  margin-top: 3em;\n}\n\n.thirdPartyContentAreaAboveMenu-m3tCb {\n  order: 1;\n}\n\n.thirdPartyContentAreaBelowMenu-XVVlo {\n  order: 3;\n}\n\n.thirdPartyContentAreaBelowOptions-M4h8T {\n  order: 5;\n}\n\n.searchBarContainer-l0muN {\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  padding: 5px 5px 7px;\n}\n\n.searchBarInputText-pMgOZ {\n  pointer-events: all;\n  border: 0;\n  width: 100%;\n  height: 31px;\n  padding: 0 35px;\n  background-position: 8px;\n  background-size: 16px;\n  background-color: rgba(0, 0, 0, 0.2);\n  box-sizing: border-box;\n  /* clears the 'X' from Internet Explorer */\n  /* clears the 'X' from Chrome */\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  background-image: url("+m+");\n  background-image: var(--meteoblue-mapsplugin-icon-search, url("+m+"));\n  background-repeat: no-repeat;\n}\n\n.searchBarInputText-pMgOZ::-ms-clear, .searchBarInputText-pMgOZ::-ms-reveal {\n  display: none;\n  width: 0;\n  height: 0;\n}\n\n.searchBarInputText-pMgOZ::-webkit-search-decoration, .searchBarInputText-pMgOZ::-webkit-search-cancel-button, .searchBarInputText-pMgOZ::-webkit-search-results-button, .searchBarInputText-pMgOZ::-webkit-search-results-decoration {\n  display: none;\n}\n\n.searchBarInputText-pMgOZ::-moz-placeholder {\n  color: #f8f8f8 0.5;\n}\n\n.searchBarInputText-pMgOZ:-ms-input-placeholder {\n  color: #f8f8f8 0.5;\n}\n\n.searchBarInputText-pMgOZ::placeholder {\n  color: #f8f8f8 0.5;\n}\n\n.searchBarInputText-pMgOZ:focus {\n  outline: 2px solid #103f78;\n  outline: var(--meteoblue-mapsplugin-background-highlight, 2px solid #103f78);\n}\n\n.searchBarTextClear-eakdh {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  height: 31px;\n  width: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: all;\n  border-radius: 0 5px 5px 0;\n  cursor: pointer;\n  background-color: transparent;\n  border: 0;\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.searchBarTextClear-eakdh:before {\n  content: url("+g+");\n  content: var(--meteoblue-mapsplugin-icon-close, url("+g+"));\n}\n\n.searchBarTextClear-eakdh.hidden-fMSC_ {\n  display: none;\n}\n\n.searchNoResultContainer-RNT2Y {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100px;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n}\n",""]),p.locals={select:"select-ZPaHn",dropdownHeader:"dropdownHeader-eLx_f",searchBarInputText:"searchBarInputText-pMgOZ",searchBarTextClear:"searchBarTextClear-eakdh",overlaysSelectionWrapper:"overlaysSelectionWrapper-O7O_6",toggleWrapper:"toggleWrapper-wKpjH",toggle:"toggle-owm6j",active:"active-GX2EL",activeByDefault:"activeByDefault-1kEIr",inlineButtons:"inlineButtons-ymbn5",inlineButton:"inlineButton-EWi6W",multipleRows:"multipleRows-VM14_",sidebar:"sidebar-FgS_J",hidden:"hidden-fMSC_",controls:"controls-X9MLQ",toggleMenuButton:"toggleMenuButton-PZ2Od",wrapper:"wrapper-Eexjt",menu:"menu-APvrY",categoriesContainer:"categoriesContainer-QSCZ6",categorieContainer:"categorieContainer-JbEgo",mapContainer:"mapContainer-lYViL",categorieTitle:"categorieTitle-tje4G",noHighlight:"noHighlight-Z7uL4",mapTitle:"mapTitle-d1s8D",mapOptions:"mapOptions-Qpzl_",variants:"variants-KAUpa",levels:"levels-N7dUl",settings:"settings-yJMnl",customMenu:"customMenu-X0kJb",customMenuEntry:"customMenuEntry-BizmL",controlButton:"controlButton-NthjG",zoomButton:"zoomButton-jVVBn",logStyleButton:"logStyleButton-HSUHI",menuButton:"menuButton-S2KQh",backgroundMask:"backgroundMask-EQc8P",shareOption:"shareOption-fOFiy",thirdPartyContentAreaAboveMenu:"thirdPartyContentAreaAboveMenu-m3tCb",thirdPartyContentAreaBelowMenu:"thirdPartyContentAreaBelowMenu-XVVlo",thirdPartyContentAreaBelowOptions:"thirdPartyContentAreaBelowOptions-M4h8T",searchBarContainer:"searchBarContainer-l0muN",searchNoResultContainer:"searchNoResultContainer-RNT2Y"},t.Z=p},3200:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),u=n.n(s),c=new URL(n(4385),n.b),l=a()(i()),d=u()(c);l.push([e.id,".background-oy_HF {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  z-index: 500;\n  background-color: rgba(51, 51, 51, 0.47);\n  -webkit-backdrop-filter: blur(3px);\n          backdrop-filter: blur(3px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.modalWrapper-UfPZo {\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  font-size: 14px;\n  overflow: hidden;\n  margin: 1em;\n}\n\n.content-c8RlK {\n  padding: 1em;\n}\n\n.content-c8RlK a {\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n}\n\n.buttons-hS0ch {\n  padding: 1em;\n  text-align: right;\n}\n\n.button-nP924 {\n  padding: 0.5em;\n  border: 1px solid #929292;\n  border: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  background: none;\n  cursor: pointer;\n  font-size: 12px;\n}\n\n.button-nP924:hover {\n  color: #9dbcff;\n  color: var(--meteoblue-mapsplugin-color-link-hover, #9dbcff);\n}\n\n.header-UUAVg {\n  display: flex;\n  justify-content: space-between;\n  min-height: 1.5em;\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n  padding: 1em;\n}\n\n.close-odHGn {\n  cursor: pointer;\n  margin-left: 1em;\n}\n\n.close-odHGn:before {\n  content: url("+d+");\n  content: var(--meteoblue-mapsplugin-icon-close, url("+d+"));\n}\n",""]),l.locals={background:"background-oy_HF",modalWrapper:"modalWrapper-UfPZo",content:"content-c8RlK",buttons:"buttons-hS0ch",button:"button-nP924",header:"header-UUAnButU",mainArea:"mainArea-xI3AB"},t.Z=a},1260:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),u=n.n(s),c=new URL(n(334),n.b),l=a()(i()),d=u()(c);l.push([e.id,'.wrapper-Jbwzk {\n  max-width: -webkit-max-content;\n  max-width: -moz-max-content;\n  max-width: max-content;\n  margin: 0 auto;\n  display: flex;\n  overflow: hidden;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.mb-phone .wrapper-Jbwzk {\n  border-radius: 5px 5px 0 0;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0 0;\n}\n\n.timeCategories-COHcq {\n  white-space: nowrap;\n  overflow: auto;\n  cursor: pointer;\n  scrollbar-width: thin;\n  scrollbar-color: var(--meteoblue-mapsplugin-color-scrollbar, #aaa) rgba(0, 0, 0, 0.2);\n}\n\n.timeCategories-COHcq::-webkit-scrollbar {\n  background-color: rgba(0, 0, 0, 0.2);\n  height: 8px;\n}\n\n.timeCategories-COHcq::-webkit-scrollbar-thumb {\n  background-color: var(--meteoblue-mapsplugin-color-scrollbar, #aaa);\n  border-radius: 4px;\n}\n\n.timeCategory-IBZnv {\n  display: inline-block;\n  text-align: center;\n  z-index: 1;\n  position: relative;\n  padding: 8px 15px;\n  white-space: nowrap;\n  border-right: 1px solid #929292;\n  border-right: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n}\n\n.timeCategory-IBZnv.active-tcboa {\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n\n.controls-qMj_J {\n  display: flex;\n}\n\n.next-tc4Sa, .prev-OL6Zb, .timeCategory-IBZnv {\n  box-sizing: border-box;\n  min-width: 25px;\n  min-height: 25px;\n}\n\n@media (pointer: coarse) {\n  .next-tc4Sa, .prev-OL6Zb, .timeCategory-IBZnv {\n    min-width: 50px;\n    min-height: 50px;\n    padding: 15px 20px;\n  }\n}\n\n.next-tc4Sa, .prev-OL6Zb {\n  padding: 0.5em 1em;\n  cursor: pointer;\n  align-self: center;\n}\n\n@media (pointer: coarse) {\n  .next-tc4Sa, .prev-OL6Zb {\n    padding: 15px 20px;\n  }\n}\n\n.prev-OL6Zb:before {\n  display: block;\n  content: "";\n  content: url('+d+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+d+'));\n  transform: rotate(90deg);\n}\n\n@media (pointer: coarse) {\n  .prev-OL6Zb:before {\n    transform: rotate(90deg) scale(1.5);\n  }\n}\n\n.next-tc4Sa:before {\n  display: block;\n  content: "";\n  content: url('+d+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+d+"));\n  transform: rotate(-90deg);\n}\n\n@media (pointer: coarse) {\n  .next-tc4Sa:before {\n    transform: rotate(-90deg) scale(1.5);\n  }\n}\n",""]),l.locals={wrapper:"wrapper-Jbwzk",timeCategories:"timeCategories-COHcq",timeCategory:"timeCategory-IBZnv",active:"active-tcboa",controls:"controls-qMj_J",next:"next-tc4Sa",prev:"prev-OL6Zb"},t.Z=l},8078:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),u=n.n(s),c=new URL(n(334),n.b),l=a()(i()),d=u()(c);l.push([e.id,'/**time slider start **/\n.timeControl-SkfDN {\n  width: 100%;\n  cursor: pointer;\n  font-family: Arial, Helvetica, sans-serif;\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n.mb-phone .timeControl-SkfDN {\n  border-radius: 5px 5px 0 0;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0 0;\n}\n.timeElement-mCcgz .glyph-z5sGi {\n  font-size: inherit;\n}\n.timeElement-mCcgz .glyph-z5sGi.backward-ORVe0::before {\n  display: block;\n  content: "";\n  content: url('+d+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+d+'));\n  transform: rotate(90deg);\n}\n@media (pointer: coarse) {\n  .timeElement-mCcgz .glyph-z5sGi.backward-ORVe0::before {\n    transform: rotate(90deg) scale(1.5);\n  }\n}\n.timeElement-mCcgz .glyph-z5sGi.forward-_iCvy::before {\n  display: block;\n  content: "";\n  content: url('+d+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+d+'));\n  transform: rotate(-90deg);\n}\n@media (pointer: coarse) {\n  .timeElement-mCcgz .glyph-z5sGi.forward-_iCvy::before {\n    transform: rotate(-90deg) scale(1.5);\n  }\n}\n.timeElement-mCcgz .glyph-z5sGi.next-DHKLt {\n  font-size: inherit;\n}\n.timeElement-mCcgz {\n  text-align: center;\n  z-index: 1;\n  position: relative;\n  padding: 8px 15px;\n  display: table-cell;\n  border-left: 1px solid #929292;\n  border-left: var(--meteoblue-mapsplugin-border, 1px solid #929292);\n  white-space: nowrap;\n}\n.timeElement-mCcgz .glyph-z5sGi:before {\n  line-height: 0.5em;\n}\n@media (pointer: coarse) {\n  .timeElement-mCcgz {\n    padding: 15px 20px;\n  }\n}\n.timeElement-mCcgz:first-of-type,\n.last-NfhIG {\n  border-left: none;\n}\n.timeElement-mCcgz:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.timeSliderOuter-AKnfq {\n  position: relative;\n  display: table-cell;\n  width: 100%;\n}\n.timeSlider-zg2rd {\n  width: 100%;\n  display: table;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.timeSlider-zg2rd.inidcateFutureSteps-M0HnN .timeElement-mCcgz:last-of-type:after,\n.timeSlider-zg2rd.inidcatePastSteps-E4dsx .timeElement-mCcgz:first-of-type:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 15%;\n  pointer-events: none;\n}\n.timeSlider-zg2rd.inidcateFutureSteps-M0HnN .timeElement-mCcgz:last-of-type:after {\n  right: 0;\n  background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.3));\n}\n.timeSlider-zg2rd.inidcatePastSteps-E4dsx .timeElement-mCcgz:first-of-type:before {\n  left: 0;\n  border-radius: 0.4em;\n  background: linear-gradient(90deg, rgba(0, 0, 0, 0.3), transparent);\n}\n.timeProgress-uvehN,\n.hoverProgress-WeojR {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 6px;\n  width: 0;\n}\n.notransition-aHY0e {\n  transition: none !important;\n}\n.timeProgress-uvehN {\n  background: rgba(255, 142, 75, 0.58);\n  background: var(--meteoblue-mapsplugin-color-progress-bar, rgba(255, 142, 75, 0.58));\n  transition: width 0.3s;\n}\n.hoverProgress-WeojR {\n  border-right: 3px solid black;\n}\n.timeHour-mNJgh,\n.hoverHour-IVZlt {\n  cursor: ew-resize;\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n  padding: 4px 7px;\n  position: absolute;\n  top: -30px;\n  right: 0;\n  transform: translateX(50%);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  z-index: 799;\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n#now-OxaqD {\n  position: absolute;\n  height: 6px;\n  border-right: 4px solid white;\n  pointer-events: none;\n}\n.hide-tEbY2 {\n  display: none;\n}\n',""]),l.locals={timeControl:"timeControl-SkfDN",timeElement:"timeElement-mCcgz",glyph:"glyph-z5sGi",backward:"backward-ORVe0",forward:"forward-_iCvy",next:"next-DHKLt",last:"last-NfhIG",timeSliderOuter:"timeSliderOuter-AKnfq",timeSlider:"timeSlider-zg2rd",inidcateFutureSteps:"inidcateFutureSteps-M0HnN",inidcatePastSteps:"inidcatePastSteps-E4dsx",timeProgress:"timeProgress-uvehN",hoverProgress:"hoverProgress-WeojR",notransition:"notransition-aHY0e",timeHour:"timeHour-mNJgh",hoverHour:"hoverHour-IVZlt",now:"now-OxaqD",hide:"hide-tEbY2"},t.Z=l},9348:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),u=n.n(s),c=new URL(n(334),n.b),l=new URL(n(1380),n.b),d=new URL(n(4385),n.b),f=new URL(n(834),n.b),p=a()(i()),h=u()(c),m=u()(l),v=u()(d),g=u()(f);p.push([e.id,".wrapper-q21sZ {\n  max-width: -webkit-max-content;\n  max-width: -moz-max-content;\n  max-width: max-content;\n  display: flex;\n  margin: 0 0 0 auto;\n  overflow: hidden;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.mb-phone .wrapper-q21sZ {\n  border-radius: 5px 5px 0 0;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px) var(--meteoblue-mapsplugin-border-radius, 5px) 0 0;\n}\n\n.disabled-Qhc6L {\n  cursor: not-allowed;\n  color: #9c9c9c;\n}\n\n.disabled-Qhc6L .timeSteps-XTidU {\n  pointer-events: none;\n}\n\n.disabled-Qhc6L .prev-wm17h, .disabled-Qhc6L .next-P57mw, .disabled-Qhc6L .play-vxSRW {\n  pointer-events: none;\n}\n\n.timeSteps-XTidU {\n  white-space: nowrap;\n  overflow-x: auto;\n  overflow-y: hidden;\n  cursor: pointer;\n  max-height: 40px;\n  scrollbar-width: thin;\n  scrollbar-color: var(--meteoblue-mapsplugin-color-scrollbar, #aaa) rgba(0, 0, 0, 0.2);\n}\n\n.timeSteps-XTidU::-webkit-scrollbar {\n  background-color: rgba(0, 0, 0, 0.2);\n  height: 8px;\n}\n\n.timeSteps-XTidU::-webkit-scrollbar-thumb {\n  background-color: var(--meteoblue-mapsplugin-color-scrollbar, #aaa);\n  border-radius: 4px;\n}\n\n.mb-phone .timeSteps-XTidU {\n  max-height: 50px;\n}\n\n.timeStep-tt119 {\n  display: inline-block;\n  text-align: center;\n  z-index: 1;\n  position: relative;\n  padding: 8px 15px 12px;\n  white-space: nowrap;\n}\n\n.timeStep-tt119.active-eMvm6, .timeStep-tt119:hover {\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n\n@media (pointer: coarse) {\n  .timeStep-tt119 {\n    min-width: 50px;\n    padding: 15px 5px;\n  }\n}\n\n.controls-At4P3 {\n  height: 40px;\n  display: flex;\n  order: 1;\n}\n\n@media (pointer: coarse) {\n  .controls-At4P3 {\n    height: 50px;\n  }\n}\n\n.next-P57mw, .prev-wm17h, .play-vxSRW, .stop-aRwxl {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 40px;\n  height: 100%;\n  line-height: 0;\n  cursor: pointer;\n}\n\n@media (pointer: coarse) {\n  .next-P57mw, .prev-wm17h, .play-vxSRW, .stop-aRwxl {\n    width: 50px;\n  }\n}\n\n.play-vxSRW {\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n\n.stop-aRwxl.hidden-Wwqbi {\n  display: none;\n}\n\n.prev-wm17h:before {\n  display: block;\n  transform: rotate(90deg);\n  content: url("+h+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+h+"));\n}\n\n.next-P57mw:before {\n  display: block;\n  transform: rotate(-90deg);\n  content: url("+h+");\n  content: var(--meteoblue-mapsplugin-icon-arrow, url("+h+"));\n}\n\n.play-vxSRW:before {\n  content: url("+m+");\n  content: var(--meteoblue-mapsplugin-icon-play, url("+m+"));\n}\n\n.stop-aRwxl:before {\n  content: url("+v+");\n  content: var(--meteoblue-mapsplugin-icon-close, url("+v+"));\n}\n\n@media (pointer: coarse) {\n  .next-P57mw, .prev-wm17h, .play-vxSRW {\n    transform: scale(1.5);\n  }\n}\n\n.next-P57mw:before, .prev-wm17h:before, .play-vxSRW:before {\n  padding-bottom: 5%;\n}\n\n.thirdPartyContentAndRangesContainer-fG58B {\n  display: flex;\n  align-items: flex-end;\n  position: absolute;\n  right: 0;\n  bottom: 45px;\n}\n\n.mb-phone .thirdPartyContentAndRangesContainer-fG58B {\n  bottom: 55px;\n}\n\n.timeRanges-b4ycb {\n  display: inline-flex;\n  overflow: hidden;\n  cursor: pointer;\n  color: #f8f8f8;\n  color: var(--meteoblue-mapsplugin-color-primary, #f8f8f8);\n  text-shadow: 1px 1px 2px black;\n  text-shadow: var(--meteoblue-mapsplugin-text-shadow, 1px 1px 2px black);\n  background: rgba(0, 0, 0, 0.47);\n  background: var(--meteoblue-mapsplugin-background-primary, rgba(0, 0, 0, 0.47));\n  border-radius: 5px;\n  border-radius: var(--meteoblue-mapsplugin-border-radius, 5px);\n}\n\n.timeRange-fNi0a {\n  padding: 0.2em 0.5em;\n}\n\n.timeRange-fNi0a:hover, .timeRange-fNi0a.active-eMvm6 {\n  background: #103f78;\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n\n.playing-gy4nV .timeStep-tt119, .playing-gy4nV .next-P57mw, .playing-gy4nV .prev-wm17h, .scrubbingMode-EtMUC .timeStep-tt119, .scrubbingMode-EtMUC .next-P57mw, .scrubbingMode-EtMUC .prev-wm17h {\n  display: none;\n}\n\n.playing-gy4nV .play-vxSRW:before {\n  content: url("+g+");\n  content: var(--meteoblue-mapsplugin-icon-stop, url("+g+"));\n}\n\n.playing-gy4nV .timeRange-fNi0a {\n  display: none;\n}\n\n.timeIndicator-GGaWR {\n  font-size: 2em;\n  width: 65px;\n}\n\n.timeIndicator-GGaWR:hover {\n  background: none;\n}\n\n.timeSliderContainer-LoIq5 {\n  display: flex;\n  position: relative;\n  align-items: center;\n  min-width: 50px;\n  margin: 0 10px;\n  cursor: pointer;\n}\n\n.timeSliderContainer-LoIq5::before {\n  content: '';\n  display: block;\n  position: absolute;\n  background: rgba(0, 0, 0, 0.47);\n  height: 3px;\n  width: 100%;\n}\n\n.timeSlider-F_Igh {\n  position: relative;\n  height: 100%;\n  margin: 0;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n       appearance: none;\n  background: none;\n}\n\n.timeSlider-F_Igh::-webkit-slider-thumb {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 25px;\n  height: 25px;\n  border-radius: 100%;\n  background: #f8f8f8;\n  cursor: pointer;\n}\n\n.timeSlider-F_Igh::-moz-range-thumb {\n  -moz-appearance: none;\n       appearance: none;\n  -webkit-appearance: none;\n  width: 25px;\n  height: 25px;\n  border-radius: 100%;\n  background: #f8f8f8;\n  cursor: pointer;\n}\n\n.forecast-jA00x .timeIndicator-GGaWR {\n  background: #103f78;\n  background: var(--meteoblue-mapsplugin-background-highlight, #103f78);\n}\n",""]),p.locals={wrapper:"wrapper-q21sZ",disabled:"disabled-Qhc6L",timeSteps:"timeSteps-XTidU",prev:"prev-wm17h",next:"next-P57mw",play:"play-vxSRW",timeStep:"timeStep-tt119",active:"active-eMvm6",controls:"controls-At4P3",stop:"stop-aRwxl",hidden:"hidden-Wwqbi",thirdPartyContentAndRangesContainer:"thirdPartyContentAndRangesContainer-fG58B",timeRanges:"timeRanges-b4ycb",timeRange:"timeRange-fNi0a",playing:"playing-gy4nV",scrubbingMode:"scrubbingMode-EtMUC",timeIndicator:"timeIndicator-GGaWR",timeSliderContainer:"timeSliderContainer-LoIq5",timeSlider:"timeSlider-F_Igh",fo:l[4]"').r;e.exon(){n("r"t[l]ter ittrib=n.nc;e.paChild"undefined"!=typeof self?self:this)},4385:function(e){"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2710%27 height=%2710%27 viewBox=%270 0 10 10%27%3E%3Cpath fill=%27%23f8f8f8%27 d=%27M9.988,8.543 C9.988,8.543 8.543,9.988 8.543,9.988 C8.543,9.988 5.000,6.445 5.000,6.445 C5.000,6.445 1.457,9.988 1.457,9.988 C1.457,9.988 0.012,8.543 0.012,8.543 C0.012,8.543 3.554,5.000 3.554,5.000 C3.554,5.000 0.012,1.457 0.012,1.457 C0.012,1.457 1.457,0.012 1.457,0.012 C1.457,0.012 5.000,3.554 5.000,3.554 C5.000,3.554 8.543,0.012 8.543,0.012 C8.543,0.012 9.988,1.457 9.988,1.457 C9.988,1.457 6.445,5.000 6.445,5.000 C6.445,5.000 9.988,8.543 9.988,8.543 Z%27 fill-rule=%27evenodd%27 /%3E%3C/svg%3E"},409:function(e){"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 x=%270px%27 y=%270px%27 viewBox=%270 0 15 15%27 style=%27enable-background:new 0 0 15 15;%27 xml:space=%27preserve%27%3E %3Cpath fill=%27%23f8f8f8%27 d=%27M13.4,11.8c-0.4-0.4-0.7-0.7-1.1-1.1c-0.3-0.3-0.5-0.5-0.5-0.5L9.7,9.1c0.9-1,1.4-2.3,1.4-3.6 C11,2.5,8.6,0,5.5,0S0,2.5,0,5.5S2.5,11,5.5,11c1.4,0,2.7-0.5,3.6-1.4l1.1,2.2c0,0,0.2,0.2,0.5,0.5c0.3,0.3,0.7,0.7,1.1,1.1l1.1,1.1 l0.5,0.5l1.7-1.7l-0.5-0.5C14.2,12.6,13.8,12.2,13.4,11.8z M5.5,9.4c-2.2,0-3.9-1.8-3.9-3.9s1.8-3.9,3.9-3.9s3.9,1.8,3.9,3.9 S7.7,9.4,5.5,9.4z%27/%3E%3C/svg%3E%0A"},4181:function(e){"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 height=%2710%27 viewBox=%270,0,20,21%27 width=%2711%27%3E%3Cpath fill=%27%23cccccc%27 stroke=%27white%27 stroke-width=%274%27 d=%27M 0 2 L 20 2 M 0 10 L 20 10 M 0 18 L 20 18 z%27/%3E%3C/svg%3E"},334:function(e){"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 height=%2710%27 viewBox=%270,0,20,21%27 width=%2711%27%3E%3Cpath fill=%27%23f8f8f8%27 d=%27M0 3l3-3 8 12 7-12 3 3-10 17z%27/%3E%3C/svg%3E"},1380:function(e){"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 height=%2720%27 viewBox=%270,0,20,21%27 width=%2721%27%3E%3Cpath fill=%27%23cccccc%27 d=%27M 0 0 L0 0 2unctio(o.exportn(){pertject"=.prototype.hasOwnProperty.call(e,t)},r.b=document.baseURI||self.location.href;var i={};return function(){"use strict";r.d(i,{default:function(){return Ni}}),r(6992),r(1532),r(1539),r(8783),r(3948),r(1249),r(561),r(7327),r(6699),r(2023),r(2222),r(3371),r(9826),r(4747),r(2526),r(1817),r(2165),r(7941),r(5003),r(9337),r(1038),r(7042),r(8309),r(4916),r(5666),r(5827),r(5306),r(6977),r(285),rh;n<r;n++,i++)e[i]=t[n];return e}var s={},u="xstate.guard"ally{if(r)throw r.error}}return o}};function ion(e){r{current:r,states:C(e,r)}}}))}fuerror}nction E(e){return Array.isArray(e)}func{type:u,name&&event:t}:e(e({},n),{event:t})}))}function j(e,t,n,r,i){var o=e.options.guards,a={state:i,cond:t,_event:r};if(t.type===u)return((null==o?void 0:o[t.name])||t.predicate)(n,r.data,a);var s=o[t.type];if(!s)throw new Error("Guard '"+t.type+"' is not implemented on machinn{next:e,error:t||r,complete:n||r}}(M=O||(O={})).Start="xstate.start",M.Stop="xstate.stop",M.Raise="xstate.raise",M.Send="xstate.send",M.Cancel="xstate.cancel",M.NullEvent="",M.Assign="xstate.assign",M.After="xstate.after",M.DoneState="done.state",M.DoneInvoke="done.invoke",M.Log="xstate.log",M.Init="xstate.init",M.Invoke="xstate.invoke",M.ErrorExecution="error.execution",M.ErrorCommunication="error.communication",M.ErrorPlatform="error.platform",M.ErrorCustom="xstate.error",M.Update="xstate.update",M.Pure="xstate.pure",M.Choose="xstate.choose",(B=F||(F={})).Parent="#_prn H(e)?t:t.concat(b(V(e).map(G)))}function Z(e,t){var r,i,o,a,s,u,c,l,d=q(new Set(e)),f=new Set(t);try{for(var p=n(f),h=p.next();!h.done;h=p.next())for(var m=(S=h.value).parent;m&&!f.has(m);)f.add(m),m=m.parent}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var v=q(f);try{for(var g=n(f),y=g.next();!y.done;y=g.next())if("compound"!==(S=y.value).type||v.get(S)&&v.get(S).length){if("parallel"===S.type)try{for(var b=(s=void 0,n(V(S))),A=b.next();!A.done;A=b.next()){var x=A.value;"history"!==x.type&&(f.has(x)||(f.add(x),d.get(x)?d.get(x).forEach((function(e){return f.add(e)})):x.initialStateNodes.forEach((function(e){return f.add(e)}))))}}catch(e){s={error:e}}finally{try{A&&!A.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}}else d.get(S)?d.get(S).forEach((function(e){return f.add(e)})):S.initialStateNodes.forEach((function(e){return f.add(e)}))}catch(e){o={error:e}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}try{for(var w=n(f),D=w.next();!D.done;D=w.next()){var S;for(m=(S=D.value).parent;m&&!f.has(m);)f.add(m),m=m.parent}}catch(e){c={error:e}}finally{try{D&&!D.done&&(l=w.return)&&l.call(w)}function(e){return e.tags}))))}var Q=O.Start,ee=O.Stop,te=O.Raise,ne=O.Send,re=O.Cancel,ie=O.NullEvent,oe=O.Assign,ae=(O.After,O.DoneState,O.Log),se=O.Init,ue=O.Invoke,ce=(O.ErrorExecution,O.ErrorPlatform),le=O.ErrorCustom,de=O.Update,f,i),td 0!ion(e){return{type:oe,assignment:e}};function we(e,t){var n=O.DoneState+"."+e;return{type:n,data:t,toString:function(){return n}}}function De(e,t){var n=O.DoneInvoke+"."+e;return{type:n,data:t,toString:function(){return n}}}function Se(e,t){var n=O.ErrorPlatform+"."+e;return{type:n,data:t,toString:function(){return n}}}function Ce(t,n,r,i,s,u){void 0===u&&(u=!1);var c=o(u?[[],s]:S(s,(function(e){return e.type===oe})),2),l=c[0],d=c[1],f=l.length?T(r,i,l,n):r,p=u?[r]:void 0,h=b(d.map((function(r){var s;switch(r.type){case te:return{typeo:c,_event:s,event:s.data,delay:o})}(r,f,i,t.opt.expr:t.expr(n,r.data,{_event:r})})}(r,f,i);caions.guards);return!r||j(t,r,f,i,n)})))||void 0===s?void 0:s.actions))return[];var l=o(Ce(t,n,f,i,ge(x(m),t.options.actions),u),2),d=l[0],h=l[1];return f=h,null==p||p.push(f),d;case pe:var m;if(!(m=r.get(f,i.data)))return[];var v=o(Ce(t,n,f,i,ge(x(m),t.options.actions),u),2),g=v[0],y=v[1];return f=yr}:r;return{type:O.Stop,activity:i}}(r,f,i);case oe:f=T(f,i,[r],n),null==p||p.push(f);break;default:var b=ve(r,t.options.actions),A=b.exec;if(A&&p){var w=p.length-1;b=e(e({},b),{exec:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];A.apply(void 0,a([b}})).filter((ffunction(n){return Te(e[n],t[n])}))}var Ee=function(){function n(e){var t,n,r=this;this.actions=[],this.activities=s,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||s,this.meta=(void 0===(void 0!==t.meta&&(e[t.id]=t.meta),e}),{})),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==t?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return function(e){return a([],o(new Set(b(a([],o(e.map((function(e){return e.ownEvents})))))))ion:[],tr.create=[],children:{}})}retur((function(e){return r+t+e}))})))))},n.prototype.toJSON=function(){var n=this,r=(n.configuration,n.transitions,n.tags),i=(n.machine,t(n,["configuration","transitions","tags","machine"]));return e(e({},i),{tags:=function(e){returnfunction(e){return this.tags.has(e)},n.prototype.can=function(e){var t;return this.machine,!!(null===(t=this.machine)||void 0===t?void 0:t.transi{},r),{typ={},Me=function(e){return"#"===e[0]},Ie=function(){function r(t,i,s){var u,l=this;void 0===s&&(s="context"in t?t.context:void 0),this.config=t,this._context=s,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},i),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:"."),this.id=this.config.id||a([this.machine.key],o(this.path)).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&c(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(u=this.config.schema)&&void 0!==u?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=thisap,e(((i={})[oall(o)}finally{if(r)throw r.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(e){return""===e.event})):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=x(this.config.entry||this.config.onEntry).map((function(e){return ve(e)})),this.onExit=x(this.config.exit||this.config.onExit).map((function(e){return ve(e)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,thurn Fe(e(e({id:a.type},t),{src:a}))})),this.activities=x(this.config.activities).concat(this.invoke).map((function(e){return ye(e)})),this.transition=this.transition.bind(this),this.tags=x(this.cforEach((function(e){re,t.delays)},null!=n?n:thn new r(this.config,this.options,e)},Object.defintext)?this._context():this._context},enumerable:!1,configurable:!0}),Object.definePron:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return this.definition},Object.||[],e[t.eventType].push(t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.definePrositions(),this.__cache.transitions)},enumerable:!1,configuturn this.__cache.candidates[e]=n,n},r.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(e,n){var r,i,o,a=(r=_(e)?t.id+":delay["+n+"]":e,i=t.id,o=i?"#"+i:"",O.After+"("+r+")"+o);return t.onEntry.push(Ae(a,{delay:e})),t.onExit.push({typeelay,n);returnurn e(e({},t.formatTransition(n)),{deldes(r[t]);return e.cd(e);return this.events.includes(t)},r.prototype.resolveState=function(t){var n=Array.from(Z([],this.getStateNodes(t.value)));return new Ee(e(e({},t),{value:this.resolve(t.value),configuration:n,done:K(n,this),tags:$(ntransitions.length?r:this.next(t,n)transitions.length?i:this.next(t,n)unction(e){return a[e].a:this.transitionParallelNode(e,t,n)},r.prototype.next=function(e,t){var r,i,s,u=this,c=t.name,d=[],f=[];try{for(var h=n(this.getCandidates(c)),m=h.next();!m.done;m=h.next()){var v=m.value,y=v.cond,A=v.in,x=e.context,w=!A||(L(A)&&Me(A)?e.matches(p(this.getStateNodeById(A).path,this.delimiter)):l(p(A,this.delimiter),g(this.path.slice(0,-2))(e.value))),D=!1;try{D=!y||j(this.machine,y,x,t,e)}catch(e){throw new Error("Unable to evaluate guard '"+(y.name||y.type)+"' in transition for event '"+c+"' in state node '"+this.id+"':\n"+e.message)}if(D&&w){void 0!==v.target&&(f=v.target),d.push.apply(d,a([],o(v.actions))),s=v;break}}}catch(e){r={error:e}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}if(s){if(!f.length)return{transitions:[s],entrySet:[],exitSet:[],configuration:e.value?[this]:[elativeStateNodes(t,e.historyValue)}))),C=!!s.internal;return{transitions:[s],entrySet:C?[]:b(S.map((function(e){return u.nodesFromChild(e)}))),exitSet:C?[]:[this],configuration:S,source:e,actn),n=n.parent;return(t===e)return!1;t=t.parent}return!0},r.prototype.getActions=function(e,t,r,i){var s,u,c,l,d=Z([],i?this.getStateNodes(i.value):[this]),f=e.configuration.length?Z(d,e.configuration):d;try{for(var p=n(f),h=p.next();!h.done;h=p.next())J(d,g=h.value)||e.entrySet.push(g)}catch(e){s={error:e}}finally{try{h&&!h.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}try{for(var m=n(d),v=m.next();!v.done;v=m.next()){var g;J(f,g=v.value)&&!J(e.exitSet,g.parent)||e.exitSet.push(g)}}catch(e){c={error:e}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}e.source||(e.exitSet=[],e.entrySetiguration,t)}))&&i.push(we(a.id)),i})));e.exitSet.sort((function(e,t){returnunction(e,t){return e.order-t.order}));var A=new Set(e.entrySet),x=new Set(exec:void 0}}(e)})))),o(e.onEntry))}))).coop,activity:t,exec:void 0}}(e)}))))})))],2),S=D[0],C=D[1];return ge(C.concat(e.actions).concat(S),this.machine.options.actions)},r.prototype.transition=function(e,t,n){void 0===e&&(e=this.initialState);var r,i,s=U(t);if(e instanceof Ee)r=void 0===n?e:this.resolveState(Ee.from(e,n));else{var u=L(e)?this.resolve(h(this.getResolvedPath(e))):this.resolve(e),c=null!=n?n:this.machine.context;r=this.resolveState(Ee.from(u,c))}if(this.strict&&!this.events.includes(s.name)&&(i=s.name,!/^(done|error)\./.test(i)))throw new Error("Machine '"+this.id+"' does not accept event '"+s.name+"'");var l=this._transition(r.value,r,s)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:r,actions:[]},d=Z([],this.getStateNodes(r.value)),f=l.configuration.length?Z(d,l.configuration):d;return l.configuration=a([],o(f)),this.resolveTransition(l,r,s)}ions).unshift.apply(r,a([],o(i))),e},r.prototype.resolveTransition=function(t,r,i,a){var s,u,c=this;void 0===i&&(i=he),void 0===a&&(a=this.machine.context);var l=t.configuration,d=!r||t.transitions.length>0,f=d?Y(this.machine,l):void 0,p=r?r.historyValue?r.historyValue:t.source?this.machine.historyValue(r.value):void 0:void 0,h=r?r.context:a,m=this.getActions(t,h,i,r),v=r?e({},r.activities):{};try{for(var g=n(m),y=g.next();!y.done;y=g.next()){var b=y.value;b.type===Q?v[b.activity.id||b.activity.type]=b:b.type===ee&&(v[b.activity.id||b.activity.type]=!1)}}catch(e){s={error:e}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}var A,x,D=o(Ce(this,r,h,i,m,this.machine.config.preserveAc=te||e.type===ne&&e.to===F.Intety)||void 0===t?void 0:t.type)===ue})),B=O.reduce((function(e,t){return e[t.activity.id]=function(e,t,n,r){var i,o=W(e.src),a=null===(i=null==t?void 0:t.options.services)||void 0===i?void 0:i[o.type],s=e.data?w(e.data,n,r):void 0,u=a?function(e,t,n){var r=Pe(t);if(r.deferr(n?e.withContext(n):e).initialState}));r.getSnapshot=function(){return i}}return r}(a,e.id,s):Pe(e.id);return u.meta=e,u}(t.activity,c.machine,E,i),e}),r?e({},r.children):{}),M=f?t.configuration:r?r.configuration:[],I=K(M,this),R=new Ee({value:f||r.value,context:E,_event:i,_sessionid:r?r._sessionid:null,historyValue:f?p?(A=p,x=f,{current:x,states:C(A,x)}):void 0:r?r.historyValue:void 0,history:!f||t.source?r:void 0,actions:f?P:[],activities:f?v:r?r.activities:{},events:[],configuration:M,transitions:t.transitions,children:B,done:I,tags:null==r?void 0:r.tags,machine:this}),U=h!==E;R.changed=i.name===de||U;var N=R.history;N&&delete N.history;var j=!I&&(this._transient||l.some((function(e){return e._transient})));if(!(d||j&&""!==i.name))return R;var z=R;if(!I)for(j&&(z=this.resolveRaisedTransition(z,{type:ie},i));L.length;){var H=L.shift();z=this.resolveRaisedTransition(z,H._event,i)}var V=z.changed||(N?!!z.actions.length||U||typeof N.value!=typeof z.value||!Te(z.value,N.value):void 0);return z.changed=V,z.history=N,z.tags=$(z.configt exist on '"+this.id+"'");reon machine '"+this.id+"'");retu)break;n=n.getStateNtateValue||{};default:returnn t.path}return f(e,this.delimiter)},Object.defineProperty(ue=t,this.__cache.initialStateValue},enumerable:!1,configuravoid 0,actions:[]},void 0,void 0,t)},Object.defineProp'.");return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defis.path.length-1)):t.target}return e},enumerable:!1,configurable:!0eHistory(t):e.initialStateNodes:[e]},Object.defineProperty(e.getFromRelativePath(t)}))):[this]},enumerable:!1,configurable:is.states[n].getFromRelat),(function(e){return!e.hiselativePath(e):[r.states[e[0]]]})))},Object.defineteIds})));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defin this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineP.eventType})));return Array.from(e)},enumerable:!1,configu node '"+t.id+"':\n"+e.messagoid 0,source:"#"+n.id})}});return s},r.prototype.formatTransitions=function(){var e,r,i,s=this;if(this.config.on)if(Array.isArray(this.config.on))i=this.config.on;else{var u=this.config.on,l=u["*"],d=void 0).map((function(e){return N(e,f[e])})).concat(N("*",d)))}else i=[];var p=this.config.always?N("",this.config.always):[],h=this.config.onDone?N(String(we(this.id)),this.co(N(String(Se(e.id)),e.onError)))),t}))),v=this.after,g=b(a(a(e){return s.formatTransition(e)}))})));try{for(var y=n(v),A=y.next();!A.done;A=y.next()){var w=A.value;g.push(w)}}catch(t){e={error:t}}finally{try{A&&!A.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}rfinally{this.procendow?window:void 0!==r.g?r.g:void 0="Running",e[e.Stopped=2]="Stopped"}(We||(We={}));var He=function(){function t(n,r){var i=this;void 0===r&&(r=t.defaultOptions),this.machine=n,this.scheduler=new Re,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=We.NotStarted,this.children=new Map,this.forwardTo=netState(n);i.update(e,n)})),i._state},this.sendTo=function(t,n){var r,o=i.parent&&(n===F.Parent||i.parent.id===n),a=o?i.parent:L(n)?i.children.get(n)||function(e){return Ue.get(e)}(n):(r=n)&&"function"==typeof r.send?n:void 0;if(a)"machine"in a?a.send(e(e({},t),{name:t.name===le?""+Se(i.id):t.name,origin:i.sessionId})):a.send(t.data);else if(!o)throw new Error("Unable to send event to child '"+n+"' from service '"+i.id+"'.")};var o=e(e({},t.defaultOptions),r),a=o.clock,s=o.logger,u=o.parent,c=o.id,l=void 0!==c?c:n.id;this.id=l,this.logger=s,this.clock=a,this.parent=u,this.options=o,this.scheduler=new Re({deferEvents:this.options.deferEvents}),this.sessionId="x:"+Ne++}return Object.definePropine.initialState,e._initialState}))},enumerable:!1,configurable:!0}),Object.def,{get:function(){return this._state},enumerable:!1,call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(e,t){var r,i,o,a,s,u,c,l,d=this;if(e._sessionid=this.sessionId,this._state=e,this.options.execute&&this.executunction(e){d.state.children[e.id]=e})),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var f=n(this.eventListeners),p=f.next();!p.done;p=f.next())(0,p.value)(e.event)}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}try{for(var h=n(this.listeners),m=h.next();!m.done;m=h.next())(0,m.value)(e,e.event)}catch(e){o={error:e}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}try{for(var v=n(this.contextListeners),g=v.next();!g.done;g=v.next())(0,g.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(e){s={error:e}}finally{try{g&&!g.done&&(u=v.return)&&u.call(v)}finally{if(s)throw s.error}}var y=K(e.configuration||[],this.machine);if(this.state.configuranal"===e.type&&e.parent===d.machine})),A=b&&b.doneData?w(b.doneData,e.context,t):void 0;try{for(var x=n(this.doneListeners),D=x.next();!D.done;D=x.next())(0,D.value)(De(this.id,A))}catch(e){c={error:e}}finally{try{D&&!D.done&&(l=x.return)&&l.call(x)}finally{if(c)throw c.error}}the(this.state,this.state(r),o&&i.doneListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeturn this.doneLihis.contextListeners.delete(e),this},t.prototype.start=function(e){var t,n,r=this;if(this.status===We.Running)return this;t=this.sessionId,n=this,Ue.set(t,n),this.initialized=!0,this.status=We.Running;var i=vEe.from(e,r.machine.context));var t}));return this.options.devTools&&this.atitialize((function(){r.update(i,he)})),this},t.prototype.stop=function(){var e,t,r,i,o,a,s,u,l,d,f,p=this;try{for(var h=n(this.listeners),m=h.next();!m.done;m=h.next()){var v=m.value;this.listeners.delete(v)}}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}try{for(var g=n(this.stopListeners),y=g.next();!y.done;y=g.next())(v=y.value)(),this.stopListeners.delete(v)}catch(e){r={error:e}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}try{for(var b=n(this.contextListeners),A=b.next();!A.done;A=b.next())v=A.value,this.contextListeners.delete(v)}catch(e){o={error:e}}finally{try{A&&!A.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}try{for(var x=n(this.doneListeners),w=x.next();!w.done;w=x.next())v=w.value,this.doneListeners.delete(v)}catch(e){s={error:e}}finally{try{w&&!w.done&&(u=x.return)&&u.call(x)}finally{if(s)throw s.error}}if(!this.initialized)return thall(i)}finally{if(t)throwch((function(e){_(e.stop)&&e.stop()}));try{for(var D=n(c(this.delayedEventsMap)),S=D.next();!S.done;S=D.next()){var C=S.value;this.clock.clearTimeout(this.delayedEventsMap[C])}}catch(e){l={error:e}}finally{try{S&&!S.done&&(d=D.return)&&d.call(D)}finally{if(l)throw l.error}}return this.scheduler.clear(),this.initialized=!1,this.status=We.Stopped,f=this.sessionId,Ue.delete(f),this},t.prototype.batch=function(t){var r=this;if(this.status===We.NotStarted&&this.options.deferEvents);else if(this.status!==We.Running)throw new Error(t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule((func});var n,r,i}))))),c=c||!!u.changed};try{for(var f=n(t),p=f.next();!p.done;p=f.next())d(p.value)}catch(e){i={error:e}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}u.changed=c,u.actions=l,r.update(u,U(t[on(e){return this.send t.machine.transitioall(i)}finally{if(t,e.to):t.send(e._ee]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,t,n){void 0===n&&(n=this.machine.options.actions);var r=t.context,i=t._event,o=e.exec||me(e.type,n),a=_(o)?o:o?o.exec:e.exec;if(a)try{return a(r,i.data,{action:e,state:this.state,_event:i})}catch(e){throw this.parent&&this.parent.send({type:"xstate.error",data:e}),e}switch(e.type){case ne:var s=e;if("number"==typeof s.delay)return void this.defer(s);s.to?this.sendTo(s._event,s.to):this.send(s._event);break;case re:this.cancel(e.sendId);break;case Q:var u=e.activity;if(!this.state.activities[u.id||u.type])break;if(u.type===O.Invoke){var c=W(u.src),l=this.machine.options.services?this.machine.options.services[c.type]:void 0,d=u.id,f=u.data,p="autoForward"in u?u.autoForward:!!u.forward;if(!l)return;var h=f?w(f,r,i):void 0;if("string"==typeof l)return;var m=_(l)?l(r,i.data,{data:h,src:c,meta:u.meta}):l;if(!m)return;var v=void 0;k(m)&&(m=h?m.withContext(h):m,v={autoForward:p}),this.spawn(m,d,v)}else this.spawnActivity(u);break;case ee:this.stopChild(e.activity.id);break;case ae:var g=e.label,y=e.value;g?this.logger(g,y):this)||void 0===t||delete removeChild(e),_(t.stop)&&t.stop())},t.prototype.spawn=function(t,n,r){if(D(t))return this.spawnPromise(Promise.resolve(t),n);if(_("==typeof e.send}catch(e){return!1}}(o=t)&&"id&&_(e.subscribe)}catch(e){return!1}}(t))return this.spawnObservable(t,n);if(k(t))return this.spawnMachine(t,e(e({},r),{id:n}));if(null!==(i=t)&&"object"==typeof i&&"transition"in i&&"function"==typeof i.transition)return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'+n+'" of type "'+typeof t+'".nd(U(e,{origin:o.id}))})).start(),s},t.prototype.spawnBehavior=function(t,n){var r=function(t,n){void 0===n&&(n={});var r,i=t.initialState,o=ion(e){return e.next(i)}))}s=!1}}()},getSnansubscribe:function(){o.delete(r)}}}},e({subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},r)),c={parent:n.parent,self:u,id:n.id||"anonymous",observers:o};return i=t.start?t.start(c):i,u}(t,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=fund(state),r.machine.strict&&r.stop()}}}));varnsubscribe:function(){return o=!0}}},stop:function(){i=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return n}};return this.children.set(t,o),o},t.prototype.spawnCallback=function(e,t){var n,r,i=th torigin:t}))}),(function(e){a.add(e)}))}catch(e){this.send(Se(t,e))}if(D(r))return thiforEach((fnsubs)}}},stop:function(){o=!0,_(r)&&r()},toJSON:function(){return{id:t}},getSnapshot:function(){return n}};return this.children.set(t,u),u},t.prototype.spawnObservable=functtildhild(t),r.send(U(De(t),{origin:t}))}))on(t,p:function()()},getSnapshot:function(){return n},toJSON:function(){return{id:t}}};return this.childre,t){return this.children.sontext,e);this.spawnEffe},toJSON:function(){retate__}();t&&t.regioJSON=function(prototype[I]=function(){arted?this.initiasole.log.bind(console),devTools:!1}}("undefined"!=typeofunction Ve(e,t){return new He(e,t)}r(9600);var Ge=r(1296),Ze=r.n(Ge),Xe=r(6640),qe=r(3379),Ye=r.n(qe),Je=r(7795),Ke=r.n(Je),$e=r(569),Qe=r.n($e),et=r(3565),tt=r.n(et),nt=r(9216),rt=r.n(nt),it=r(4589),ot=r.n(it),at=r(2979),st={};st.styleTagTransform=ot(),st.setAttributes=tt(),st.insert=Qe().bind(null,"head"),st.domAPI=Ke(),st.insertStyleElement=rt(),Ye()(at.Z,st);var ut=at.Z&&at.Z.locals?at.Z.locals:void 0;function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lt,dt=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ct(this,"tooltip",new Xe.Popup({anchor:"top",closeButton:!1,closeOnClick:!1,offset:20,className:ut.tooltip})),ct(this,"tooltipContent",""),ct(this,"isDisabfix",(function(e){i.layerIdSuffix=e})),ct(this,"destroy",(function(){i.tooltip.remove(),i.mapboxMap.off("mousemove",i.updateTooltipDebounced),i.mapboxMap.off("idle",i.addTooltip),document.querySelectorAll(".mbHideTooltip").forEach((function(e){e.removeEventListener("mouseenter",i.hide),e.removeEventListener("mouseleave",i.show)}))})),ct(this,"getContent",(function(e){return i.updateTooltip(e),""===i.tooltipContent?void 0:i.tooltipContent})),ct(this,"enable",(function(){i.isDisablfunction(){i.isDisabled=!0,i.hide()})),ct(this,"show",(function(){i.tooltip.getElement()&&!i.isDisabled&&i.tooltip.removeClassName(ut.hidden)})),ct(this,"hide",(function(){i.tooltip.getElement()&&i.tooltip.addClassName(ut.hidden)})),ct(this,"addTooltip",(function(){i.mapboxMap.once("mousemove",(function(e){i.tooltip.setLngLat(e.lngLat).addTo(i.mapboxMap),i.tooltip.trackPointer()}))})),ct(this,"updateTooltip",(function(e){var t="point"in e?e.point:e,n=i.tooltipContent,r=i.layers.filter((tion(e){return e.id+i.layerIdSuffix})),o=i.mapboxMap.queryRenderedFeatures(t,{layers:r});i.tooltipContent=o.map((function(e){var t="";if(e.properties){var n=i.layers.find((function(t){return t.id+i.layerIdSuffix===e.layer.id})),r="isLowestContour"in e.properties&&e.properties.isLowestContour;void 0!==n&&"tooltipLabel"in n&&(t+="".concat(n.tooltipLabel,": ")),"value"in e.properties?t+=e.properties.value:(!("minValue"in e.properties)||"maxValue"in e.properties||r||(t+=">&thinsp;"),"minValue"in e.properties&&!r&&(t+=e.properties.minValue),"minValue"in e.properties&&"maxValue"in e.properties&&!r&&(e.properties.minValue<0||e.properties.maxValue<0?t+=" â€“ ":t+="&thinsp;-&thinsp;"),r&&(t+="<&thinsp;"),"maxValue"in e.properties&&(t+=e.properties.maxValue)),"unit"in e.properties&&(t+=" "+e.properties.unit)}return t})).join("<br>"),i.tooltipContent!==n&&i.tooltip.setHTML(i.tooltipContent)})),ct(this,"updateTooltipDebounced",Ze()(this.updateTooltip,100,{maxWait:300})),this.mapboxMap=t,this.layers=JSON.parse(JSON.stringify(n)),this.layerIdSuffix=r,this.mapboxMap.once("idle",this.addTooltip),this.mapboxMap.on("mousemove",this.updateTooltipDebounced),document.queryaddEventListener("mouseleave",i.show)}))};function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=non(e){e.Start="START",e.Stop="STOP"}(lt||(lt("Cannot call a class as a funct(){n.bufferService.sefferService.send("SETtion(){n.tooltip&&n.tooltip.destroy()})),mt(this,"enableTooltip",(function(){return n.tooltip&&n.tooltipreturn n.tooltip&&n.tooltip.disrn n.tooltip&&n.tooltip.getContent(e)})),mt(this,"addDynamicSources",(function(e,t){JSON.parse(JSON.stringify(e)).map((function(e){var r=t;if(n.timeDefinition&&e.isOverlay&&"timesteps"===n.timeDefinition.type){.find((function(e){return e.value===t}));i&&(r=i.timestep)}ve){return e.replace(/{timestamp}/g,r)}))),void 0===n.mapboxMap.getSource("".concat(e.name,"_").concat(t))&&n.mapboxMap.addSource("".concat(e.name,"_").concat(t),e)}))})),mt(this,"removeDynamicSources",(function(e,t){e.map((function(e){var r="".concat(e.name,"_").concat(t);n.mapboxMap.removeSource(r)}))})),mt(this,"addDynamicLayers",(function(e,t,r,i){JSON.parse(JSON.stringify(e)).map((function(e){if("colorTableFromInventory"in e&&void 0!==e.colorTableFromInventory&&(e.paint=ht(ht({},e.paint),{},{"fill-color":["interpolate",["linear"],["get","minValue"]].concat(n(e)=e["mped have a [Symbol.iterator]() method.")}()))})),e.source="".concat(e.source,"_").concat(r),e.id="".concat(e.id,"_").concat(r),i)n.mapboxMap.addLayer(e,n.mapboxMap.getStyle().layers[0].id);else{var o=n.hasLayer(e.addLayerBefore)?e.addLayerBefore:void 0;n.mapboxMap.addLayer(e,o)}var a}))})),mt(this,"removeDynamicLayers",(function(e,t){e.forEach((function(e){var r="".concat(e.id,"_").concat(t);n.mapboxMap.removeLayer(r)}))})),mt(this,"makeLayersVisible",(function(e,t){e.forEach((function(e){var r=n.hasLayer(e.addLayerBefore)?e.addLayerBefore:void 0;n.mapboxMap.moveLayer("".concat(e.id,"_").on(e){return!!n.mapboxMap.getLayer(e)})),this.mapboxMap=t.mapboxMap,this.sources=t.sources,this.layers=t.layers,this.colorTables=t.colorTables,this.onLoading=t.onLoading,this.domain=t.domain,this.level=t.level,this.showTooltip=!(void 0!==t.showTooltip&&!t.showTooltip),thisid 0===n&&(n=e.context),new Ie(e,t,n)}({id:"buffer",initial:"awaitingFirst",context:{currentDate:t.initialDate,nextDate:null,bufferDate:null,previousBufferDate:null,currentlyVisibleDate:t.initialDate,previousVisibleDate:"",timeoutId:0},states:{idle:{on:{SET_STEP:[{target:"awaiting",actions:["updateDates"]}]}},awaiting:{entry:["updateBufferDateWithCurrentDate","loadBuffer","startTimeout"],activities:["loading"],on:{HAS_LOADED:{target:"idle",actions:["setCurrentlyVisibleDate","makeVisible"]},SET_STEP:[{target:"idle",cond:"isStepAlreadyLoaded",actions:["updateDates"]},{target:"awaiting",actions:["updateDates"]}]},exit:["removeTimeout"]},awaitingFirst:{entry:["loadFirstStep"],activities:["loading"],on:{HAS_LOADED:{target:"idle"},SET_STEP:{target:"awaiting",actions:["updateDatesion(e,t){return e.buffeunction(e){return nue.bufferDate===e.currentlyVisibleDate}},actions:{loadFirstStep:function(e){n.addDynamicSources(t.sources,e.currentDate),n.addDynamicLayers(t.layers,n.colorTables,e.currentDate,!1)},makeVisible:function(e){n.makeLayersVisible(n.layers,e.currentDate),e.currentlyVisibleDate!==e.previousVisibleDate&&(n.removeDynamicLayers(n.layers,e.previousVisibleDate),n.removeDynamicSources(n.sources,e.previousVisibleDate))},loadBuffer:function(e){e.bufferDate!==e.previousBufferDate&&e.currentDate!==e.currentlyVisibleDate&&(null!==e.previousBufferDate&&e.previousBufferDate!==e.currentlyVisibleDate&&(n.removeDynamicLayers(t.layers,e.previousBufferDate),n.removeDynamicSources(t.sources,e.previousBufferDate)),null!==e.bufferDate&&(n.addDynamicSources(t.sources,e.bufferDate),n.addDynamicLayers(t.layers,n.colorTables,e.bufferDate,!0)))},updateDates:xe({currentDate:function(e,t){return t.date},nextDate:function(e,t){return t.nextDate}}),updateBufferDateWithNextDate:xe({bufferDate:function(e,t){return e.nextDate},previousBufferDate:function(e,t){return e.bufferDate}}),updateBufferDateWithCurrentDate:xe({bufferDate:function(ate:function(e,t){return e.bufferDate}}),setCurrentlyVisibleDate:xe({currentlyVisibleDate:function(e){rettion(e){return e.currentlyVisibleDate}}),startTimeout:xe({timeoutIdrn n.bufferService.send("HAS_LOADED")}),2e3)}}),removeTimeout:xe({timeoutId:function(e){return window.clearTimeout(e.timeoutId),0}})},activities:{loading:function(){if(void 0!==n.0!==n.onLoading&&n.onLoading(lt.Stop)}}}});this.bufferService=Ve(r),this.bufferService.start();var i=!1;if(setInterval((function(){!i&&n.mapboxMap.areTilesLoaded()?(i=!0,n.mapHasLoaded()):i&&!n.mapboxMap.areTilesLoaded()&&(i=!1)}),10),this.showTooltip){var o="_".concat(t.initialDate);this.tooltip=new dt(this.mapboxMap,this.layers,o),this.bufferService.onTransition((function(e){n.tooltip&&n.tooltip.setLayerIdSuffix("_".concat(e..then((function(e){return e.json()}))},yt=function(e,t,n,r){if("url"===e.type){var i=e.url;return n&&"none"!==n&&(i=i.replace("{domain}",n)),void 0!==t&&(i=(i=i.concat(i.includes("?")?"&":"?")).concat("apikey=".concat(t))),null!=r&&r.start&&(i=(i=i.concat(i.includes("?")?"&":"?")).concat("start=".concat(r.start,"&end=").concat(r.end))),new(i).then((function(e){return e.json()})).then((function(n){n.error&&t(new Error(n.error_message)),void 0!==n?e(n):t(new Error("Could not fe}return new Promise((function(t){t(e)}))},bt=function(e,t){var n=document.createElement(e);returnfunction(e){return n.clasw Array(t);n<t;n++)r[n]=e[n];return r}r(1874),eturn.2126*r[0]+.7152*r[1]+.0722*r[2]},wt=function(e,t){var n=xt(e[0],e[1],e[2]),r=xt(t[0],t[1],t[2]);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},Dt=function(e){var t=bt("div");t.style.color=e;var n=t.style.color;t.style.color.includes("rgb")||(document.body.appendChild(t),n=window.getComputedStyle(t).color,document.body.removeChild(t));var r,i=function(e){if(Array.isArray(e))return At(e)}(r=n.matchAll(/rgba?\( *(\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}).*/g))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i!==[]?i[0]:[];return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]};function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;St(this,e),Ct(this,"canvas",document.createEetLegend",(function(){return n.canvas})),Ct(this,"getLegendWidt.filter((function(e,t){return t%2==0})).filter((function(e,t){return t%n==0&&0!==t})).reduce((function(t,n){if(null===e)return 0;e.font="".concat(r,"px Arial");var i=e.measureText(n.toString()).width;return i>t?i:t}),32);return"number"!=typeof i?Number.parseFloat(i):i}));var o=this.canvas.getContext("2d");if(this.canvas.id="legend-canvas",null===o)throw new Error("Could not create canvas for legend.");var a=12,s=window.devicePixelRatio,u=16,c=t.length/2,l=c*u,d=i<l?i:l,f=Math.ceil(l/d),p=Math.max(this.getLegendWidth(o,t,f,a),r);this.canvas.height=d*s,this.canvas.width=p*s;var h=d/c;o.scale(s,s),this.canvas.style.width=this.canvas.width/s+"px",this.canvas.style.height=this.canvas.height/s+"px",o.fillStyle="white",o.beginPath(),o.rect(0,0,this.canvas.width,this.canvas.height),o.fill();for(var m=0;m<c;m++){var v=t[2*m+1].toString();o.fillStyle=v.replace(/1\.0\)/g,"0.8)");var g=m===c-1,y=0===m,b=v.includes("0.0)");if(g&&b){var A=t[2*m-3].toString();o.fillStyle=A}else if(y&&b){var x=t[3].toString();o.fillStyle=x}o.beginPath();var w=0,D=d-m*h-h;o.rect(w,D,p,h),o.fill()}for(var S=0;S<c;S++)if(S%f==0&&0!==S){var C=t[2*S].toString(),T=t[2*S+1],E=Dt(T);if(o.fillStyle="black",void 0!==E){var _=E,L=[0,0,0],P=wt(_,L);P<6&&(o.fillStyle="white")}o.font="".concat(a,"px Arial"),o.textBaseline="middle",o.textAlign="center",o.fillText(C,p/2,d-S*h)}},Et=r(3376),_t={};_t.styleTagTransform=ot(),_t.setAttributes=tt(),_t.insert=Qe().bind(null,"head"),_t.domAPI=Ke(),_t.insertStyleElement=rt(),Ye()(Et.Z,_t);var Lt=Et.Z&&Et.Z.locals?Et.Z.locals:void 0;function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Sym("Cannot call a class as a function")}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bt=function e(t,n,r,i,o,a){var s=this,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Ot(this,e),Ft(this,"destroy",(function(){s.container.innerText="",window.removeEventListener("resize",s.onResize)})),this.container=t,this.container.classList.add(Lt.legends),this.container.innerText="";var c=Array.isArray(n)?n:[n];c.map((function(e){var n=bt("div",Lt.legend);t.appendChild(n),void 0!==e.title&&null!==e.title&&(n.title=e.title);var c="reference"===e.type&&"string"==typeof e.table&&void 0!==i?i[e.table]:e.table,l=bt("div",Lt.legendHeader);if(void 0!==c.unit&&""!==c.unit){if(void 0!==c.unitType&&u){if(void 0!==o&&void 0!==c.unitType){var d=document.createElement("select");d.classList.add(Lt.unitSelect),d.classList.add("mbHideTooltip"),o[c.unitType].forEach((function(e){var t=document.createElement("option");t.value=e.unit,t.innerText=e.label,e.unit===a[c.unitType]&&(t.selected=!0),d.appendChild(t)})),d.onchange=function(e){null!==e.target&&void 0!==c.unitType&&r(c.unitType,e.target.value)},l.appendChild(d);var f=document.createElement("div");f.id="legend-header",f.classList.add(Lt.unitTitle),f.innerText=c.unit,l.appendChild(f)}}else l.innerText=c.unit,l.id="legend-header";n.appendChild(l)}if("categories"===e.type&&void 0!==Pt(e.title)&&null!==e.title&&(l.innerText=e.title,l.id="legend-header",n.appendChild(l)),Array.isArray(c)&&"categories"===e.type)c.forEach((function(e){var n=bt("div",Lt.legendCategory);if("pattern"in e){var r=document.createElement("img");r.classList.add("categoryImage"),r.src=e.pattern,n.appendChild(r);var i=bt("div",Lt.legendCategory);i.innerText=e.description,n.appendChild(i)}if("symbol"in e){var o=document.createElement("img");o.classList.add("categoryImage"),o.src=e.pattern,n.appendChild(o);var a=bt("div",Lt.legendCategory);a.innerText=e.description,n.appendChild(a)}if("color"in e){var s=Dt(e.color),u=wt([0,0,0],s)<7?"white":"black";n.innerHTML="\n                            <div\n                                class=".concat(Lt.categoryColor,'\n                                style="background: ').concat(e.color,"; color: ").concat(u,'"\n                            >\n                                ').concat(e.description,"\n                            </div>\n                        ")}t.appendChild(n)}));else if("object"===Pt(c)&&"colors"in c){var p=c.colors,h=new Tt(p,t.clientWidth,t.clientHeight);n.appendChild(h.getLegend()),s.onResize=function(){n.innerText="",n.appendChild(l);var e=new Tt(p,t.clientWidth,t.clientHeight);n.appendChild(e.getLegend())},window.addEventListener("resize",s.onResize,!1)}}))},Mt=r(9510),It={};It.styleTagTransform=ot(),It.setAttributes=tt(),It.insert=Qe().bind(null,"head"),It.domAPI=Ke(),It.insertStyleElement=rt(),Ye()(Mt.Z,It);var kt=Mt.Z&&Mt.Z.locals?Mt.Z.locals:void 0;function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ut=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rt(this,"loadingContainer",bt("div",kt.loading)),Rt(this,"infoContaineainer.appendChild(r.loadingContainer)})),Rt(this,"remove",(function(){r.container.contains(r.loadingContainer)&&r.container.removeChild(r.lnction(e){r.infoContainer.innerText=e})),this.container=t,this.loadingContainer.innerHTML='\n            <div class="'.concat(kt.spinner,'">\n                <div class="').concat(kt.bounce1,'"></div>\n                <div class="').concat(kt.bounce2,'"></div>\n                <div class="').concat(kt.bounce3,'"></div>\n            </div>\n        '),n&&this.loadingContainer.appendChild(this.infoContainer)};function Nt(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r(2586),r(4944),r(3792);var Wt=function(e,t){return t.categories.reduce((function(e,t){return[].concat(Nt(e),Nt(t.maps))}),[]).find((function(t){return t.id===e}))},zt=r(1363),Ht={};Ht.styleTagTransform=ot(),Ht.setAttributes=tt(),Ht.insert=Qe().bind(null,"head"),Ht.domAPI=Ke(),Ht.insertStyleElement=rt(),Ye()(zt.Z,Ht);var Vt=zt.Z&&zt.Z.locals?zt.Z.locals:void 0;function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Zt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=bt("div",[Vt.controls,"mbHideTooltip"]);if(t.container.appendChild(r),r.appendChild(t.thirdPartyContentArea),t.controls.downloadStyle){var i=bt("div",[Vt.controlButton,Vt.logStyleButton]);i.innerText="download style",i.onclick=function(){var e=n.filterStyle(t.mapboxMap.getStyle());n.download("style.json",JSON.stringify(e,null,4))},r.appendChild(i)}if(!0===t.controls.zoom||"auto"===t.controls.zoom){var o=bt("div",[Vt.controlButton,Vt.zoomButton]);o.innerText="+",o.onclick=function(){t.mapboxMap.zoomIn()},r.appendChild(o);var a=bt("div",[Vt.controlButton,Vt.zoomButton]);a.innerText="âˆ’",a.onclick=function(){t.mapboxMap.zoomOut()},r.appendChild(a),!0===t.controls.zoom&&(o.style.display="flex",a.style.display="flex")}if(t.controls.toggleMenu){var s=bt("div",[Vt.controlButton,Vt.toggleMenuButton]);s.onclick=t.onSidebarToggle,r.appendChild(s)}}var,n.click(),document.body.removeChild(n)}},{key:"filterStyle",value:function(e){if(void 0!==e&&void 0!==e.sources){var t=Object.keys(e.sources),n=t[t.length-1];delete e.sources[n],void 0!==e.layers&&(e.layers=e.layers.filter((function(e){return e.source!==n})))}return e}}],n&&Gt(t.prototype,n),e}();function Xt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=function e(t,n,r,i,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yt(this,"overlaysSelectionWrapper",bt("div",Vt.overlaysSelectionWrapper)),Yt(this,"domainSelectionWrapper",bt("div",Vt.select)),Yt(this,"domainSelectionHeader",bt("div",Vt.dropdownHeader)),Yt(this,"settingsContainer",bt("div",[Vt.settings,"mbHideTooltip"])),Yt(this,"domainSelection",document.createElement("select")),Yt(this,"attribution",""),Yt(this,"setDomainOptions",(function(e,t){var n=e.reduce((function(e,t){return[].concat(Xt(e),Xt(t.domains))}),[]).find((function(e){return e.id===t}));if(s.domainSelectionHeader.innerText=n?n.name:e[0]&&e[0].domains[0]?e[0].domains[0].name:"",s.domainSelection.textContent="",0!==e.length){s.domainSelectionWrapper.style.display="block";var r=document.createElement("option"),i="Auto (".concat(e[0].domains[0].name,")");r.value='{ "id": "auto", "name": "'.concat(i,'", "levels": [] }'),r.innerText=i,"auto"===t&&(r.selected=!0,s.domainSelectionHeader.innerText=i),s.domainSelection.appendChild(r),e.map((function(e){var n=document.createElement("optgroup");n.label=e.label,s.domainSelection.appendChild(n),e.domains.map((function(e){var r=document.createElement("option");r.value=JSON.stringify(e),r.innerText=e.name,void 0!==t&&e.id===t&&(r.selected=!0),n.appendChild(r)}))}))}else s.domainSelectionWrapper.style.display="none"})),Yt(this,"setOverlayOptions",(function(e,t){if(0!==e.length){s.enableOverlaySelection(),s.overlaysSelectionWrapper.innerText="";var n=[];e.forEach((function(e){var r=bt("div",Vt.toggleWrapper);r.dataset.id=e.id;var i=bt("div");i.innerText=e.name,r.appendChild(i);var o=bt("div",Vt.toggle);t&&t.includes(e)&&(o.classList.add(Vt.active),n.push(e.id)),r.appendChild(o),r.onclick=function(){o.classList.contains(Vt.active)?(on=n.filter((function(t){return t!==e.id}))):(o.classList.add(Vt.active),n.push(e.id)),s.onOverlayChange(n)},s.overlaysSelectionWrapper.appendChild(r)}))}else s.disableOverlaySelection()})),Yt(this,"enableOverlaySelection",(function(){s.overlaysSelectionWrapper.style.display="blocysSelectionWrapper.style.display="none"})),Yt(this,"setAttribution",(function(e){s.attribution=e})),Yt(this,"setDefaultOverlays",(function(e){Array.from(s.overlaysSelectionWrapper.children).forEach((function(t){e.includes(t.dataset.id)?t.classList.add(Vt.activeByDefault):t.classList.remove(Vt.activeByDefault)}))})),Yt(this,"buildCustomMenu",(function(e){if(!1!==e){!0===e&&(e=void 0);var t=bt("div",Vt.customMenu),n=new Map([["scontent:s.attribution,maxWidth:"300px"})}]]);(e||[{label:"Screenshot",action:"screenshot"},{label:"Â©",action:"attribution"}]).map((function(e){if("string"==typeof e.action){var t=n.get(e.action);if(void 0!==t)e.action=t;else if(e.action.includes("http://")||e.action.includes("https://"))e.isLink=!0;else{var r=Array.from(n.keys()).join(", ");console.error('Custom menu: "'.concat(e.action,'" is not a valid default option (').concat(r,")."))}}return e})).forEach((function(e){var n=document.createElement("a");n.classList.add(Vt.customMenuEntry),n.innerHTML=e.label,"function"==typeof e.action&&(n.onclick=e.action),e.isLink&&"string"==typeof e.action&&(n.href=e.action,n.target="_blank"),t.appendChild(n)})),s.settingsContainer.appendChild(t)}})),this.container=t,this.container.appendChild(this.settingsContainer),this.domainSelectionWrapper.appendChild(this.domainSelection),this.domainSelectionWrapper.appendChild(this.domainSelectionHeader),this.settingsContainer.appendChild(this.overlaysSelectionWrapper),this.settingsContainer.appendChild(this.domainSelectionWrapper),this.onOverlayChange=r,this.onScreenshot=i,this.onOpenModal=o,this.buildCustomMenu(a),this.domainSelection.onchange=function(e){if(null!==e.target){var t=JSON.parse(e.target.value);s.domainSelectionHeader.innerText=t.name,n(t)}},this.domainSelection.onkeydown=function(e){("ArrowRight"===e.code||"ArrowLeft"===e.code)&&e.preventDefault()}};function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Kt(this,"mapOptionsContainer",bt("div",Vt.mapOptions)),Kt(this,"variantsWrapper",bt("div",Vt.variants)),Kt(this,"variantSelectElement",bt("div",Vt.inlineButtons)),Kt(this,"levelsWrapper",bt("div",[Vt.select,Vt.levels])),Kt(this,"levelsHeader",bt("div",Vt.dropdownHeader)),Kt(this,"levelSelectElement",document.createElement("select")),Kt(this,"setVariants",(function(e,t){r.variantSelectElement.innerText="",r.variantsWrapper.style.display=e.length<2?"none":"flex",e.map((function(e){var n=bt("div",Vt.inlineButton);n.dataset.value=JSON.stringify(e),n.innerText=e.name,t&&e.id===t.id&&n.classList.add(Vt.active),r.variantSelectElement.appendChild(n)})),r.variantSelectElement.scrollWidth>r.mapOptionsContainer.clientWidth?r.variantSelectElement.classList.add(Vt.multipleRows):r.variantSelectElement.classList.remove(Vt.multipleRows)})),Kt(this,"setLevels",(function(e,t){r.levelsHeader.innerText=t?t.name:e[0]?e[0].name:"",r.levelSelectElement.innerText="",r.levelsWrapper.style.display=e.length<2?"none":"block",e.map((function(e){var n=document.createElement("option");n.value=JSON.stringify(e),n.innerText=e.name,t&&e.id===t.id&&(n.selected=!0),r.levelSelectElement.appendChild(n)}))})),this.onVariantChange=t,this.onLevelCange=n,this.variantsWrapper.appendChild(this.variantSelectElement),this.mapOptionsContainer.appendChild(this.variantsWrapper),this.variantSelectElement.onclick=function(e){e.stopPropagation();var t=e.target;if(null!==t&&void 0!==t.dataset.value){r.variantSelectElement.childNodes.forEach((function(e){e.classList.remove(Vt.active)})),t.classList.add(Vt.active);var n=JSON.parse(t.dataset.value);r.onVariantChange(n)}},this.levelsWrapper.appendChild(this.levelSelectElement),this.mapOptionsContainer.appendChild(this.levelsWrapper),this.levelsWrapper.appendChild(this.leve.onclick=function(e){e.stopPropagation()},this.levelSelectElement.onchange=function(e){if(null!==e.target){var t=JSON.parse(e.target.value);r.onLevelCanAClamped)?Array$/.test(n)?en(e,t):void 0}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r(4603);var rn=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nn(this,"searchInput",bt("input")),nn(this,"noResultsContainer",bt("div")),nn(this,"elClearTextButton",bt("button")),this.elContainer=t,this.maps=n,this.categoriesContainer=r,this.options=i,this.render(),this.hideClearTextButton(),this.registerEventListeners()}var t,n;return t=e,(n=[{key:"render",value:function(){var e,t,n,r,i;this.searchInput.setAttribute("type","search"),this.searchInput.setAttribute("placeholder",(null===(e=this.options)||void 0===e?void 0:e.placeholderText)||"Search for a map"),this.searchInput.classList.add(Vt.searchBarInputText),this.noResultsContainer.classList.add(Vt.searchNoResultContainer),this.noResultsContainer.style.display="none";var o=bt("p");o.innerText=(null===(t=this.options)||void 0===t?void 0:t.noResultsText)||"No results",this.noResultsContainer.appendChild(o),null===(n=this.categoriesContainer)||void 0===n||null===(r=n.item(0))||void 0===r||null===(i=r.parentElement)||void 0===i||i.appendChild(this.noResultsContainer),this.elClearTextButton.classList.add(Vt.searchBarTextClear),this.elClearTextButton.id="clearText",this.elContainer.classList.add(Vt.searchBarContainer),this.elContainer.append(this.searchInput,this.elClearTextButton)}},{key:"getMapIdsMatchingSearch",value:function(e){var t=this;return""===e?null:this.maps.map((function(n){var r=n.name,i=n.id;if(new RegExp("(".concat(e,")")).te)).filter((function(e){return void 0!==e}))}},{key:"sanitizeText",value:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/(?:(?![\t-\r 0-9A-Za-z\xA0\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2000-\u200A\u2028\u2029\u202F\u205F\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3000\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])[\s\S])+/g,"").toLowerCase()}},{key:"dturn||n.return()}finally{if(s)throw o}}}}(Array.from(this.categoriesContainer).entries());try{for(i.s();!(t=i.n()).done;)for(var o=(n=t.value,r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(n,r)||Qt(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],u=0,c=Array.from(s.children);u<c.length;u++){var l=c[u],d=void 0!==l.dataset.mapId,f="H1"===l.tagName;null===e?(d?(s.hidden=!1,l.style.display="",0===a&&s.classList.add("src-menu-style__active")):f&&(l.hidden=!1),"flex"===this.noResultsContainer.style.display&&(this.noResultsContainer.style.display="none")):0===(null==e?void 0:e.length)?(this.noResultsContainer.style.display="flex",d?l.style.display="none":f&&(l.hidden=!0)):e.includes(l.dataset.mapId||"")?("flex"===this.noResultsContainer.style.display&&(this.noResultsContainer.style.display="none"),s.classList.contains("src-menu-style__active")&&s.classList.remove("src-menu-style__active"),d&&(s.hidden=!1,l.style.display="block"),f&&(l.hidden=!0)):d?l.style.display="none":f&&(l.hidden=!0)}}catch(e){i.e(e)}finally{i.f()}}},{key:"registerEventListeners",value:function(){var e=this;this.searchInput.addEventListener("input",(function(t){var n;null===(n=t.target)||void 0===n||n.addEventListener("keydown",(function(e){var t=e;"ArrowRight"!==t.code&&"ArrowLeft"!==t.code||t.stopPropagation()}));var r=t.target.value;""!==r?e.showClearTextButton():e.hideClearTextButton();var i=e.sanitizeText(r),o=e.getMapIdsMatchingSearch(i);e.displayMaps(o)})),this.elClearTextButton.addEventListener("click",(function(){e.searchInput.value="",e.searchInput.dispatchEvent(new Event("input"))}))}},{key:"showClearTextButton",value:function(){this.elClearTextButton.classList.remove(Vt.hClearTextButton.classList.add(Vt.hidden)}}])&&tn(t.prototype,n),e}();function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){return function(e){if(Array.isArray(e))return sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cn=Reflect.deleteProperty,ln=function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),un(this,"sidebarContainer",bt("div",Vt.sidebar)),un(this,"searchBarContainer",bt("div")),un(this,"menuContainer",bt("div",Vt.menu)),un(this,"backgroundMask",bt("div",Vt.backgroundMask)),un(this,"mobileBreakpoint",800),un(this,"hasOnlyOneMap",!1),un(this,"rememberedMapSettings",{}),un(this,"categoryContainers",[]),un(this,"mapContainers",[]),un(this,"getMap",(function(){return n.currentMap})),un(this,"getVariant",(function(){return n.currentVariant})),un(this,"getLevel",(function(){return n.currentLevel})),un(this,"getDomain",(function(){return n.getDomainAutoResolved()})),un(this,"getOverlays",(function(){return n.currentOverlays})),un(this,"setMap",(function(e){n.selectMap(e)})),un(this,"disableOverlaySelection",(function(){n.generalSettings.disableOverlaySelection()})),un(this,"enableOverlaySelection",(function(){n.generalSettings.enableOverlaySel{n.generalSettings.senction(){n.sidebarContainer.innerText=""})),un(this,"enableOverlay",(function(e){var t=n.inventory.overlays.filter((function(e){return n.isSelectableOverlay(e,n.currentVariant.hiddenOverlays)})),r=[].concat(an(n.currentOverlays||[]),[e]);n.generalSettings.setOverlayOptions(t,r),n.onOverlayChange(r.map((function(e){return e.id})))})),un(this,"disableOverlay",(function(e){if(void 0!==n.currentOverlays){var t=n.inventory.overlays.filter((function(e){return n.isSelectableOverlay(e,n.currentVariant.hiddelays.filter((function(t){return t.id!==e}));n.generalSettings.setOverlayOptions(t,r),n.onOverlayChange(r.map((function(e){return e.id})))}})),un(this,"build",(function(){new Zt({container:n.sidebarContainer,mapboxMap:n.mapboxMap,onSidebarToggle:function(){return n.toggleMenu()},controls:n.controls,thirdPartyContentArea:n.thirdPartyContentAreas.controls});var e,t=bt("div",Vt.wrapper);n.thirdPartyContentAreas.aboveMenu.classList.add(Vt.thirdPartyContentAreaAboveMenu),n.menuContainer.appendChild(n.thirdPartyContentAreas.aboveMenu),n.thirdPartyContentAreas.belowMenu.classList.add(Vt.thirdPartyContentAreaBelowMenu),n.menuContainer.appendChild(n.thirdPartyContentAreas.belowMenu),n.thirdPartyContentAreas.belowOptions.classList.add(Vt.thirdPartyContentAreaBelowOptions),n.menuContainer.appendChild(n.thirdPartyContentAreas.belowOptions);var r=bt("div",[Vt.categoriesContainer,"mbHidnction(e){return{name:e.name,id:e.id}}))})).flat();if(t.appendChild(n.searchBarContainer),t.appendChild(r),n.menuContainer.appendChild(t),n.inventory.categories.map((function(e){var t=bt("div",Vt.categorieContainer);if(r.appendChild(t),n.categoryContainers.push(t),-1!==e.maps.indexOf(n.currentMap)&&t.classList.add(Vt.active),1!==n.inventory.categories.length){var i=bt("h1",Vt.categorieTitle);i.innerHTML=e.name,t.appendChild(i),i.onclick=function(){t.classList.contains(Vt.active)?t.classList.remove(Vt.active):(n.categoryContainers.forEach((function(e){e.classList.remove(Vt.active)})),t.classList.add(Vt.active))}}e.maps.map((function(e){var i=bt("div",Vt.mapContainer);n.mapContainers.push(i),i.dataset.mapId=e.id,e===n.currentMap&&i.classList.add(Vt.active),n.hasOnlyOneMap&&i.classList.add(Vt.noHighlight),t.appendChild(i);var o=bt("div",Vt.mapTitle);if(o.textContent=e.name,i.appendChild(o),n.hasOnlyOneMap||(i.onclick=function(){i.classList.contains(Vt.active)||n.selectMap({map:e})}),e===n.currentMap){var a=n.getDomainAutoResolved().levels;n.mapSettings.setVariants(e.variants,n.currentVariant),n.mapSettings.setLevels(a,n.currentLevel),i.appendChild(n.mapSettings.mapOptionsContainer),n.scrollParentToChild(r,i)}}))})),null!==(e=n.seatOwnPropertyDescriptor(n,t))}))}return e}({},n.searchBarOptions);cn(o,"show"),new rn(n.searchBarContainer,i,r.children,o)}})),un(this,"selectMap",(function(e){var t=void 0!==e.map?e.map:n.currentMap,r=n.mapContainers.find((function(e){return e.dataset.mapId===t.id}));if(void 0!==r){var i=void 0!==e.variant?e.variant:void 0!==n.rememberedMapSettings[t.id]?n.rememberedMapSettings[t.id].variant:t.variants[0],o=t.domains.reduce((function(e,t){return[].concat(an(e),an(t.domains))}),[]).find((function(t){return t.id===e.domainId}))||n.currentDomain,a=n.getDomainAutoResolved(o),s=void 0!==e.levelId?a&&a.levels.find((function(t){return t.id===e.levelId})):void 0!==n.rememberedMapSettings[t.id]?n.rememberedMapSettings[t.id].level:void 0;n.onMapChange(t,i,o,s);var u=n.getDomainAutoResolved().levels;r.appendChild(n.mapSettings.mapOptionsContainer),n.mapSettings.setVariants(t.variants,n.currentVariant),n.mapSettings.setLevels(u,n.currentLevel),n.mapContainers.forEach((function(e){e.classList.remove(Vt.active)})),r.classList.add(Vt.active),n.categoryContainers.forEach((function(e){e.classList.remove(Vt.active),e.contains(r)&&e.classList.add(Vt.active)}))}})),un(this,"onMapChange",(function(e,t,r,i){var o;n.currentMap=e,n.currentVariant=t,void 0!==r&&(n.currentDomain=r),0===e.domains.length?(n.currentDomain={id:"none",name:"none",levels:[]},n.currentLevel={id:"none",name:"none"}):(n.currentDomain=e.domains.reduce((function(e,t){return[].concat(an(e),an(t.domains))}),[]).find((function(e){return e.id===n.currentDomain.id}))||{id:"auto",name:"auto",levels:[]},n.currentLevel=i||n.getDomainAutoResolved().levels[0]);var a=n.getDomainAutoResolved(),s=void 0!==i&&a.levels.find((function(e){return e.id===i.id}));n.currentLevel=void 0!==i&&s?i:a.levels.length>0?a.levels[0]:{id:"none",name:"none"},n.mapSettings.setLevels(a.levels,n.currentLevel),n.generalSettings.setDomainOptions(e.domains,n.currentDomain.id);var u=n.inventory.overlays.filter((function(e){return n.isSelectableOverlay(e,n.currentVariant.hiddenOverlays)}));n.generalSettings.setOverlayOptions(u,n.currentOverlays);var c=null===(o=n.currentOverlays)||void 0===o?void 0:o.filter((function(e){return u.includes(e)}));n.rememberedMapSettings[e.id]={variant:n.currentVariant,level:n.currentLevel},n.onChange(n.currentMap,n.currentVariant,n.currentDomain.id,n.currentLevel.id,c)})),un(this,"onDomainChange",(function(e){n.onMapChange(n.currentMap,n.currentVariant,e,n.currentLevel)})),un(this,"onOverlayChange",(functter((function(t){return e.includes(t.id)}));n.currentOverlays=t,n.onChange(n.currentMap,n.currentVariant,n.currentDomain.id,n.currentLevel.id,n.currentOverlays)})),un(this,"getDomainAutoResolved",(function(e){var t=e||n.currentDomain;return"auto"===t.id?n.currentMap.domains[0].domains[0]:t})),un(this,"toggleMenu",(function(e){var t=void 0!==e?e:!n.sidebarContainer.classList.contains(Vt.hidden);t?(n.sidebarContainer.classList.add(Vt.hidden),n.container.contains(n.backgroundMask)&&(n.backgroundMask.cl.container.removeChild(n.backgroundMask)}),400))):(n.sidebarContainer.classList.contains(Vt.hidden)&&n.sidebarContainer.classList.remove(Vt.hidden),n.container.getBoundingClientRect().width<=520&&(n.container.appendChild(n.backgroundMask),setTimeout((function(){return n.backgroundMask.classList.add(Vt.transition)}),10))),n.onToggle&&n.onToggle(t)})),un(this,"isSelectableOverlay",(function(e,t){return e.selectable&&!(null!=t&&t.includes(e.id))})),un(this,"scrollParentToChild",(function(e,t){var n=e.getBoundingClientRect(),r=e.clientHeight,i=(e.clientWidth,t.getBoundingClientRect());if(!(i.top>=n.top&&i.bottom<=n.top+r)){var o=i.top-n.top,a=i.bottom-n.bottom;Math.abs(o)<Math.abs(a)?e.scrollTop+=o:e.scrollTop+=a}})),this.onChange=t.onChange,this.onToggle=t.onToggle,this.onScreenshot=t.onScreenshot,this.onOpenModal=t.onOpenModal,this.inventory=t.inventory,this.mapboxMap=t.mapboxMap,this.container=t.container,this.controls=t.controls,this.thirdPartyContentAreas=t.thirdPartyContentAreas,this.show=t.show,this.searchBarOptions=t.searchBarOptions,"string"==typeof t.defaultValues.mapId?this.currentMap=Wt(t.defaultValues.mapId,this.inventory)||t.inventory.categories[0].maps[0]:this.currentMap=t.inventory.categories[0].maps[0],"variantId"in t.defaultValues?this.currentVariant=this.currentMap.variants.find((function(e){return e.id===t.defaultValues.variantId}))||this.currentMap.variants[0]:this.currentVariant=this.currentMap.variants[0],0===this.currentMap.domains.length?this.currentDomain={id:"none",name:"none",levels:[]}:"domainId"in t.defaultValues?"auto"===t.defaultValues.domainId?this.currentDomain={id:"auto",name:"auto",levels:[]}:this.currentDomain=this.currentMap.domains.reduce((function(e,t){return[].concat(an(e),an(t.domains))}),[]).find((function(e){return e.id===t.defaultValues.domainId}))||{id:"none",name:"none",levels:[]}:this.currentDomain={id:"auto",name:"auto",levels:[]},this.currentOverlays=this.inventory.overlays.filter((function(e){return void 0!==t.defaultValues.overlayIds&&t.defaultValues.overlayIds.includes(e.id)})),this.currentLevel=e){return e.id===t.defaultValues.levelId}))||("none"===this.currentDomain.id?{id:"none",name:"none"}:"auto"===this.currentDomain.id?this.getDomainAutoResolved().levels[0]:this.currentDomain.levels[0]),this.backgroundMask.onclick=function(){return n.toggleMenu(!0)},t.container.appendChild(this.sidebarContainer),this.sidebarContainer.appendChild(this.menuContainer),t.show){var r=bt("div",[Vclick=function(){return n.toggleMenu(!1)},this.sidebarContainer.appendChild(r)}if(this.mapSettings=new $t((function(e){return n.onMapChange(n.currentMap,e,n.currentDomain,n.currentLevel)}),(function(e){return n.onMapChange(n.currentMap,n.currentVariant,n.currentDomain,e)})),this.generalSettings=new Jt(this.menuContainer,this.onDomainChange,this.onOverlayChange,this.onScreenshot,this.onOpenModal,t.customMenuEntries),this.generalSettings.setDomainOptions(this.currentMap.domains,this.currentDomain.id),"overlays"in this.inventoerlay(e,n.currentVariant.hiddenOverlays)}));this.generalSettings.setOverlayOptions(i,this.currentOverlays),"time"in this.currentVariant&&null!==this.currentVariant.time||this.generalSettings.disableOverlaySelection()}this.hasOnlyOnen(e,t){return[].concat(an(e),an(t.maps))}),[]).length,this.build(),this.onMapChange(this.currentMap,this.currentVariant,this.currentDomain,this.currentLevel);var o=this.getDomainAutoResolved().levels;if(this.mapSettings.setVariants(this.currentMap.variants,this.currentVariant),this.mapSettings.setLevels(o,this.currentLevel),"auto"===this.show){var a=this.container.clientWidth<this.mobileBreakpoint;this.toggleMenu(a),window.onresize=function(){var e,t,r=null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(Vt.searchBarInputText),i=null===(t=document.activeElement)||void 0===t?void 0:t.classList.contains(Vt.searchBarTextClear);r||i||n.toggleMenu(a)}}!1===this.show&&(this.toggleMenu(!0),this.menuContainer.style.display="none",this.sidebarContainer.style.transition="none",this.onToggle=void 0),this.generalSettings.setAttribution(this.inventory.attribution)},dn=r(3200),fn={};fn.styleTagTransform=ot(),fn.setAttributes=tt(),fn.insert=Qe().bind(null,"head"),fn.domAPI=Ke(),fn.insertStyleElement=rt(),Ye()(dn.Z,fn);var pn=dn.Z&&dn.Z.locals?dn.Z.locals:void 0;function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vn=function e(t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mn(this,"background",close",(function(){r.background.remove()})),this.container=n,null!==this.container){this.container.appendChild(this.background),this.background.innerHTML='\n                <div class="'.concat(pn.modalWrapper,'" ').concat(t.maxWidth?'style="max-width:'+t.maxWidth+'"':"",'>\n                    <div class="').concat(pn.header,'">\n                        <span>').concat(t.title?t.title:"",'</span>\n                        <span id="mb-closeIcon" class=').concat(pn.close,'></span>\n                    </div>\n                    <div id="mb-modalContent" class="').concat(pn.content,'"></div>\n                    <div class=').concat(pn.buttons,'>\n                        <button id="mb-closeButton" class="').concat(pn.button,'">\n                            ').concat(t.closeLabel?t.closeLabel:"Close",'\n                        </button>\n                        <button id="mb-confirmButton" class="').concat(pn.button,'">\n                            ').concat(t.confirmLabel?t.confirmLabel:"OK","\n                        </button>\n                    </div>\n                </div>\n            ");var i=document.getElementById("mb-modalContent"),o=document.getElementById("mb-closeButton"),a=document.getElementById("mb-closeIcon");i&&("object"===hn(t.content)?i.appendChild(t.content):i.innerHTML=t.content),!0===t.closeable||void 0===t.closeable?(o&&(o.onclick=this.close),a&&(a.onclick=this.close)):(o&&o.remove(),a&&a.remove());var s=document.getElementById("mb-confirmButton");t.onConfirm?s&&(s.onclick=t.onConfirm):s&&s.remove()}},gn=(r(9575),r(4197),r(2990),r(8927),r(3105),r(5035),r(4345),r(7174),r(2846),r(4731),r(7209),r(6319),r(8867),r(7789),r(3739),r(9368),r(4483),r(2056),r(3462),r(678),r(7462),r(3824),r(5021),r(2974),r(5016),r(2472),function(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r));return r}),yn=function(e,t,n){var r=e.createProgram(),i=gn(e,e.VERTEX_SHADER,t),o=gn(e,e.FRAGMENT_SHADER,n);if(e.attachShader(r,i),e.attachShader(r,o),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(r));for(var a={program:r},s=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),u=0;u<s;u++){var c=e.getActiveAttrib(r,u);a[c.name]=e.getAttribLocation(r,c.name)}for(var l=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),d=0;d<l;d++){var f=e.getActiveUniform(r,d);a[f.name]=e.getUniformLocation(r,f.name)}return a},bn=function(e,t,n,r,i){var o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),n instanceof Uint8Array?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,i,0,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.bindTexture(e.TEXTURE_2D,null),o},An=function(e,t,n){e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t)},xn=function(e,t,n,r,i){e.bindTexture(e.TEXTURE_2D,t),e.texSubImage2D(e.TEXTURE_2D,0,0,0,r,i,e.RGBA,e.UNSIGNED_BYTE,n),e.bindTexture(e.TEXTURE_2D,null)},wn=function(e,t){var n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),n},Dn=function(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,r,e.FLOAT,!1,0,0)},Sn=function(e,t,n){e.bindFramebuffer(e.FRAMEBUFFER,t),n&&e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)},Cn="\n    precision mediump float;\n    attribute vec2 a_pos;\n    varying vec2 vTexCoord;\n\n    void main() {\n        vTexCoord = 1.0-a_pos;\n        gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n    }\n",Tn="\n    precision mediump float;\n    uniform float u_opacity;\n    \n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\n    void main() {\n     \n     vec4 color = texture2D(uTexture, vTexCoord);\n     //gl_FragColor =texture2D(uTexture, vTexCoord);\n\n\n     //   gl_FragColor = vec4(length(screenPos), 0.0,  0.0, u_opacity);\n     //   gl_FragColor = vec4(color.r, color.g,  color.b, color.a*u_opacity);\n      //  gl_FragColor = vec4(color.r* u_opacity, color.g* u_opacity,  color.b * u_opacity,color.a);\n        gl_FragColor = vec4(color.rgb* u_opacity,1.0);\n    }\n",En="\n    precision mediump float;\n    attribute vec2 a_pos;\n    varying vec2 vTexCoord;\n\n    void main() {\n        vTexCoord = 1.0-a_pos;\n        gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n    }\n",_n="\n    precision highp float;\n    uniform float u_opacity;\n    \n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\n    void main() {  \n     vec4 color = texture2D(uTexture, vTexCoord);\n     gl_FragColor = vec4(color.rgb,color.a*u_opacity);\n    }\n    ";function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pn(this,"img",new Image),Pn(this,"prog",{}),Pn(this,"maxZoom",1),Pn(this,"minZoom",0),Pn(this,"layerTextureWidth",1),Pn(this,"layerTextureHeight",1),Pn(this,"mapWidth",1),Pn(this,"mapHeight",1),Pn(this,"useRetina",!1),Pn(this,"returnEmptyTilesOnError",!1),Pn(this,"latMax",86),Pn(this,"latMin",-86),Pn(this,"lonMin",-180),Pn(this,"lonMax",180),this.canvas=this.createCanvas();var r=this.canvas.getContext("webgl");this.gl2=r,this.createShaders(this.gl2),this.map=t,this.useRetina=n,this.framebuffer=this.gl2.createFramebuffer(),this.quadBuffer=wn(this.gl2,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]))}var t,n;return t=e,n=[{key:"createCanvas",value:function(){var e=document.createElement("canvas");e.id="tileCanvas",document.body.appendChild(e);var t=document.getElementById(e.id);return t&&t.parentElement&&t.parentElement.removeChild(tion(){console.log("webgl context lost")})),t}},{key:"createShaders",value:function(e){var t=yn(e,"\n       precision highp float;\n       attribute vec2 a_pos;\n       attribute vec2 a_coords;\n       uniform float u_width;\n       uniform float u_height;\n       varying vec2 vTexCoord;\n\n       void main() {\n        float scaleF = 1.0;\n        float x = 2.0*(a_pos.x/u_width)-1.0;\n        float y = 2.0*(a_pos.y / u_height)-1.0;\n        gl_Position = vec4(x*scaleF, y*scaleF, 0.0, 1.0);\n        vTexCoord = vec2(a_coords.x,1.0-a_coords.y);\n       }\n","\n    precision highp float;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      gl_FragColor = color; \n}\n");this.prog=t.program,this.prog.a_pos=e.getAttribLocation(this.prog,"a_pos"),this.prog.a_coords=e.getAttribLocation(this.prog,"a_coords"),this.prog.u_width=e.getUniformLocation(this.prog,"u_width"),this.prog.u_height=e.getUniformLocation(this.prog,"u_height"),this.prog.uTexture=e.getUniformLocation(this.his.lonMax=r,this.lonMin=t,this.latMin=e}},{key:"resetBounds",value:function(){this.latMax=86,this.latMin=-86,this.lonMin=-180,this.lonMax=180}},{key:"findVisibleTiles",value:function(){var e=this.map.getZoom(),t=this.map.getBounds(),n=Math.round(e);this.useRetina&&(n+=1),n>this.maxZoom&&(n=this.maxZoom),n<this.minZoom&&(n=this.minZoom);var r=t.getSouthWest(),i=t.getNorthEast(),o=this.latlon2OSMTileNr(r.lat,r.lng,n),a=this.latlon2OSMTileNr(i.lat,i.lng,n),s=0,u=0;this.latMax<i.lat&&(u=this.latlon2OSMTileNr(this.latMax,0,n).y-o.y),this.latMin>r.lat&&(s=this.latlon2OSMTileNr(this.latMin,0,n).y-o.y);var c=Math.pow(2,n),l=0,d=0;o.x>a.x?(l=c-o.x+1+a.x,d=o.y-a.y+1):(l=a.x-o.x+1,d=o.y-a.y+1);for(var f=[],p=l-o.xpos-1+a.xpos,h=d-a.ypos-1+o.ypos,m=-o.xpos,v=o.ypos,g=0;g<l;g++)for(var y=u;y<d+s;y++){var b=g+m,A=y+v,x={x:(g+o.x)%c,y:y+a.y,z:n,xpos:b,ypos:d-A-1,xrange:p,yrange:h};f.push(x)}return f}},{key:"latlon2OSMTileNr",value:function(e,t,n){var r=Math.pow(2,n),i=.017453292*e,o=(t+540)%360/360*r,a=(1-Math.log(Math.tan(i)+1/Math.cos(i))/3.141592653589793)/2*r,s=o-Math.floor(o),u=1-(a-Math.floor(a));return{x:Math.floor(o),y:Math.floor(a),xpos:s,ypos:u}}},{key:"loadLayerTiles",value:function(e,t,n,r,i,o,a){var s=this,u=this.gl2;this.mapWidth=n,this.mapHeight=r,this.maxZoom=i,this.minZoom=o,this.returnEmptyTilesOnError=a,this.useRetina&&(t=1),u.enable(u.BLEND);var c=this.mapWidth*t,l=this.mapHeight*t;this.layerTextureWidth=c,this.layerTextureHeight=l;var d=this.findVisibleTiles(),f=new Promise((function(t,n){if(0==d.length)throw new Error("No tiles for this layer "+e);var r=new Uint8Array(c*l*4);void 0!==i&&u.deleteTexture(i);var i=bn(u,u.LINEAR,r,c,l);Sn(u,s.framebuffer,i),u.viewport(0,0,c,l);for(var o=[],a=0;a<d.length;a++){var f=e.replace("{x}",String(d[a].x));f=(f=f.replace("{y}",String(d[a].y))).replace("{z}",String(d[a].z));var p=s.map._requestManager._transformRequestFn,h="function"==typeof p?p(f,"Tile").url:f;o.push(s.loadImageAndCreateTextureInfo(h))}Promise.all(o).then((function(e){for(var n=c/(e[0].width*d[0].xrange)*e[0].width,o=0;o<d.length;o++){var a=d[o].xpos*n,f=d[o].ypos*n,p=s.setRectangle(a,f,n,n);s.renderImg(e[o],p)}u.readPixels(0,0,c,l,u.RGBA,u.UNSIGNED_BYTE,r),Sn(u,null,null),e.length=0,void 0!==i&&u.deleteTexture(i),t(r)}))}));return f}},{key:"setRectangle",value:function(e,t,n,r){var i=e+n,o=t+r;return new Float32Array([e,t,i,t,e,o,e,o,i,t,i,o])}},{key:"renderImg",value:function(e,t){var n=this.gl2;n.useProgram(this.prog),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture);var r=wn(n,t);Dn(n,r,this.prog.a_pos,2),Dn(n,this.quadBuffer,this.prog.a_coords,2),n.uniform1i(this.prog.uTexture,0),n.uniform1f(this.prog.u_width,this.layerTextureWidth),n.uniform1f(this.prog.u_height,this.layerTextureHeight),n.drawArrays(n.TRIANGLES,0,6)}},{key:"loadImageAndCreateTextureInfo",value:function(e){var t=this,n=this.gl2,r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([128,128,128,0])),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR);var i={width:1,height:1,texture:r},o=new Image,a=new Promise((function(r,a){o.onload=function(){i.width=o.width,i.height=o.height,n.bindTexture(n.TEXTURE_2D,i.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o),r(i)},o.onerror=function(){t.returnEmptyTilesOnError?(console.log("return empty image",e),r(i)):console.log("Sorry, could not load tile textures: "+e)}}));return o.crossOrigin="",o.src=e,a}}],n&&Ln(t.prototype,n),e}();function Fn(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Bn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Fn(o,r,i,a,s,"next",e)}function s(e){Fn(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),In(this,"program",{}),In(this,"programDrawTexture",{}),In(this,"programDrawTextureAlpha",{}),In(this,"programDrawBlTexture",{}),In(this,"programUV",{}),In(this,"takeScreenshot",!0),In(this,"dataLayerReady",!1),In(this,"renderAnimationActive",!1),In(this,"times",[]),In(this,"allTimes",[]),In(this,"isRadar",!1),In(this,"nt",this.times.length),In(this,"layers",new Array(this.nt)),In(this,"uvLayers",new Array(this.nt)),In(this,"timeStep",0),In(this,"AnimationData",new Array(4)),In(this,"motionData",new Array(4)),In(this,"motionDt",new Array(4)),In(this,"animationFrame",0),In(this,"keyFrameList",new Array(4)),In(this,"substepCount",0),In(this,"substeps",10),In(this,"WindowYsize",0),In(this,"WindowXsize",0),In(this,"motionTexScaleFactor",.25),In(this,"motionTexWidth",0),In(this,"motionTexHeight",0),In(this,"zoom",5),In(this,"screenRes",window.devicePixelRatio?window.devicePixelRatio:1),In(this,"fpsInterval",0),In(this,"then",0),In(this,"frameRate",32),In(this,"mapIsIdle",!1),In(this,"animationLayerActive",!0),In(this,"timeSlide",!1),In(this,"initialize",(function(e,t){n.gl=t,n.map=e,n.framebuffer=t.createFramebuffer(),n.quadBuffer=wn(t,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]));var r=yn(t,Cn,Tn);n.programDrawTexture=r.program,n.programDrawTexture.a_pos=t.getAttribLocation(n.programDrawTexture,"a_pos"),n.programDrawTexture.u_opacity=t.getUniformLocation(n.programDrawTexture,"u_opacity"),n.programDrawTexture.uTexture=t.getUniformLocation(n.programDrawTexture,"uTexture");var i=yn(t,En,_n);n.programDrawTextureAlpha=i.program,n.programDrawTextureAlpha.a_pos=t.getAttribLocation(n.programDrawTextureAlpha,"a_pos"),n.programDrawTextureAlpha.u_opacity=t.getUniformLocation(n.programDrawTextureAlpha,"u_opacity"),n.programDrawTextureAlpha.uTexture=t.getUniformLocation(n.programDrawTextureAlpha,"uTexture");var o=yn(t,"\n    precision highp float;\n    attribute vec2 a_pos;\n    uniform mat4 uMatrix;\n    varying vec2 vTexCoord;\n\n    float Extent =  8192.0;\n\n    void main() {\n        vec4 a = uMatrix * vec4(a_pos * Extent, 0, 1);\n        gl_Position = vec4(a.rgba);\n        vTexCoord = a_pos;\n}\n","\n    precision highp float;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\n    void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n\n     float fac = 1.0-color.a;\n  //   gl_FragColor = vec4(fac,fac,fac,color.a); \n     gl_FragColor = vec4(0,0,0,color.a); \n}\n");n.program=o.program,n.program.a_pos=t.getAttribLocation(n.program,"a_pos"),n.program.uMatrix=t.getUniformLocation(n.program,"uMatrix"),n.program.uTexture=t.getUniformLocation(n.program,"uTexture");var a=yn(t,"\n    precision highp float;\n    attribute vec2 a_pos;\n    uniform mat4 uMatrix;\n    varying vec2 vTexCoord;\n\n    float Extent =  8192.0;\n\n    void main() {\n        vec4 a = uMatrix * vec4(a_pos * Extent, 0, 1);\n        gl_Position = vec4(a.rgba);\n        vTexCoord = a_pos;\n}\n","\n    precision highp float;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      gl_FragColor = color; \n}\n");n.programUV=a.program,n.programUV.a_pos=t.getAttribLocation(n.programUV,"a_pos"),n.programUV.uMatrix=t.getUniformLocation(n.programUV,"uMatrix"),n.programUV.uTexture=t.getUniformLocation(n.programUV,"uTexture");var s=yn(t,"\n    precision highp float;\n    attribute vec2 a_pos;\n    varying vec2 vTexCoord;\n\n    void main() {\n        vTexCoord = 1.0-a_pos;\n        gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n    }\n    ","\n    precision mediump float;\n    uniform float u_opacity;\n    uniform float u_wgt;\n    uniform float u_zoom;\n    uniform vec2 u_res;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture1;\n    uniform sampler2D uTexture2;\n    uniform sampler2D uMV;\n\n\n    void main() {\n        vec4 mv = texture2D(uMV, vTexCoord);\n    //    highp vec2 pos = (mv.rg-0.5)*440.00;//*54; //currently no times2 as we are in the middle of the point\n        highp vec2 pos = vec2(-(mv.b-0.5),-(mv.g-0.5))*u_zoom;\n        float mf = 1.0-u_wgt;\n        vec4 color1 = texture2D(uTexture1,vTexCoord - mf*pos/u_res); \n        vec4 color2 = texture2D(uTexture2,vTexCoord + u_wgt*pos/u_res);\n\n        vec4 color = color1*u_wgt+color2*mf;\n     //   vec3 color = color1.rgb; //for motion testing use this\n      //  gl_FragColor = vec4(color.rgb * u_opacity,1.0);\n        gl_FragColor = vec4(color.rgb * u_opacity,color.a*u_opacity);\n    }\n");n.programDrawBlTexture=s.program,n.programDrawBlTexture.a_pos=t.getAttribLocation(n.programDrawBlTexture,"a_pos"),n.programDrawBlTexture.u_opacity=t.getUniformLocation(n.programDrawBlTexture,"u_opacity"),n.programDrawBlTexture.u_wgt=t.getUniformLocation(n.programDrawBlTexture,"u_wgt"),n.programDrawBlTexture.uTexture1=t.getUniformLocation(n.programDrawBlTexture,"uTexture1"),n.programDrawBlTexture.uTexture2=t.getUniformLocation(n.programDrawBlTexture,"uTexture2"),n.programDrawBlTexture.uMV=t.getUniformLocation(n.programDrawBlTexture,"uMV"),n.programDrawBlTexture.u_res=t.getUniformLocation(n.programDrawBlTexture,"u_res"),n.programDrawBlTexture.u_zoom=t.getUniformLocation(n.programDrawBlTexture,"u_zoom")})),In(this,"setupLayers",(function(e){if(e.disable(e.BLEND),e.canvas.height!=n.WindowYsize||e.canvas.width!=n.WindowXsize){e.viewport(0,0,e.canvas.width,e.canvas.height),void 0!==n.dataTextureTMP&&e.deleteTexture(n.dataTextureTMP),void 0!==n.dataTexture&&e.deleteTexture(n.dataTexture),void 0!==n.backgroundTexture&&e.deleteTexture(n.backgroundTexture),void 0!==n.uvTexture&&e.deleteTexture(n.uvTexture),n.AnimationData=new Array(n.nt),n.motionData=new Array(n.nt-1),n.motionDt=new Array(n.nt-1);var t=new Uint8Array(e.canvas.width*e.canvas.height*4);n.dataTextureTMP=bn(e,e.LINEAR,t,e.canvas.width,e.canvas.height),n.dataTexture=bn(e,e.LINEAR,t,e.canvas.width,e.canvas.height),n.backgroundTexture=bn(e,e.LINEAR,t.fill(255),e.canvas.width,e.canvas.height),n.motionTexWidth=Math.floor(e.canvas.width*n.motionTexScaleFactor),n.motionTexHeight=Math.floor(e.canvas.height*n.motionTexScaleFactor),t=new Uint8Array(n.motionTexWidth*n.motionTexHeight*4),n.uvTexture=bn(e,e.LINEAR,t,n.motionTexWidth,n.motionTexHeight),n.WindowYsize=e.canvas.height,n.WindowXsize=e.canvas.width,t=new Uint8Array(1)}})),In(this,"startAnimating",(function(e){n.fpsInterval=1e3/e,n.then=Date.now(),n.animate()})),In(this,"animate",(function(){if(n.animationLayerActive){var e=Date.now(),t=e-n.then;t>n.fpsInterval&&(n.then=e-t%n.fpsInterval,n.mapIsIdle&&n.renderAnimation()),requestAnimationFrame(n.animate)}})),In(this,"renderAnimation",(function(){if(void 0!==n.gl){n.gl.disable(n.gl.DEPTH_TEST),Sn(n.gl,null,null),n.gl.enable(n.gl.BLEND);var e=n.substeps,t=1,r=n.keyFrameList[n.animationFrame];if(e*=n.motionDt[r],n.isRadar&&(t=.86,n.drawTextureAlpha(n.gl,n.backgroundTexture,1),n.gl.blendFunc(n.gl.SRC_ALPHA,n.gl.ONE_MINUS_SRC_ALPHA)),n.timeSlide){var i=Math.round(n.animationFrame/15*n.substeps);r=n.keyFrameList[i],xn(n.gl,n.dataTextureTMP,n.AnimationData[r],n.WindowXsize,n.WindowYsize),xn(n.gl,n.dataTexture,n.AnimationData[r+1],n.WindowXsize,n.WindowYsize),xn(n.gl,n.uvTexture,n.motionData[r],n.motionTexWidth,n.motionTexHeight);var o=n.animationFrame%15/15;n.drawBlTexture(n.gl,n.dataTexture,n.dataTextureTMP,n.uvTexture,o,t)}else 0==n.animationFrame||r!=n.keyFrameList[n.animationFrame-1]||r==n.nt-1?(xn(n.gl,n.dataTextureTMP,n.AnimationData[r],n.WindowXsize,n.WindowYsize),r<n.nt-1&&xn(n.gl,n.uvTexture,n.motionData[r],n.motionTexWidth,n.motionTexHeight),n.drawBlTexture(n.gl,n.dataTextureTMP,n.dataTextureTMP,n.uvTexture,n.substepCount/e,t),n.substepCount=0):(xn(n.gl,n.dataTexture,n.AnimationData[r+1],n.WindowXsize,n.WindowYsize),n.drawBlTexture(n.gl,n.dataTexture,n.dataTextureTMP,n.uvTexture,n.substepCount/e,t));n.isRadar||(n.gl.blendFuncSeparate(n.gl.SRC_ALPHA,n.gl.ONE_MINUS_SRC_ALPHA,n.gl.SRC_ALPHA,n.gl.ONE),n.drawTextureAlpha(n.gl,n.backgroundTexture,.1+n.zoom/10)),n.substepCount+=1,n.animationFrame=n.animationFrame+1,n.timeSlide||n.animationFrame>n.keyFrameList.length-1&&(n.animationFrame=0)}var a=n.animationFrame;0==n.timeSlide&&(a>n.keyFrameList.length-n.substeps+1&&(a=n.keyFrameList.length-n.substeps+1),a=Math.round(a/n.substeps*15)),n.onStepChange&&n.onStepChange(a),n.timeSlide&&(n.animationFrame=Math.round(n.animationFrame/15*n.substeps),n.substepCount=n.animationFrame%n.substeps)})),In(this,"drawTexture",(function(e,t,r){var i=n.programDrawTexture;e.useProgram(i),Dn(e,n.quadBuffer,i.a_pos,2),An(e,t,0),e.uniform1i(i.uTexture,0),e.uniform1f(i.u_opacity,r),e.drawArrays(e.TRIANGLES,0,6)})),In(this,"drawTextureAlpha",(function(e,t,r){var i=n.programDrawTextureAlpha;e.useProgram(i),Dn(e,n.quadBuffer,i.a_pos,2),An(e,t,0),e.uniform1i(i.uTexture,0),e.uniform1f(i.u_opacity,r),e.drawArrays(e.TRIANGLES,0,6)})),In(this,"drawBlTexture",(function(e,t,r,i,o,a){var s=n.programDrawBlTexture;e.useProgram(s),Dn(e,n.quadBuffer,s.a_pos,2),An(e,t,0),e.uniform1i(s.uTexture1,0),An(e,r,1),e.uniform1i(s.uTexture2,1),An(e,i,2),e.uniform1i(s.uMV,2),e.uniform1f(s.u_opacity,a),e.uniform1f(s.u_wgt,o);var u={pixels:1024,zoom:7};n.isRadar&&(u={pixels:512,zoom:7});var c=n.map.getZoom();n.zoom=c;var l=u.pixels*n.screenRes/Math.pow(2,u.zoom-c);e.uniform1f(s.u_zoom,l),e.uniform2f(s.u_res,e.canvas.width,e.canvas.height),e.drawArrays(e.TRIANGLES,0,6)})),In(this,"fastLoad",Bn(regeneratorRuntime.mark((function e(){var t,r,i,o,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isRadar){e.next=6;break}return e.next=3,n.satLoader.loadLayerTiles("https://maptiles.meteoblue.com/styles/terrain2/{z}/{x}/{y}.png?apikey="+n.apiKey,1,n.WindowXsize,n.WindowYsize,10,1,!0);case 3:t=e.sent,e.next=35;break;case 6:return e.next=8,n.satLoader.loadLayerTiles("https://maptiles.meteoblue.com/data/precalculatedCityTiles2/{z}/{x}/{y}.png?apikey="+n.apiKey,1,n.WindowXsize,n.WindowYsize,7,1,!0);case 8:if(t=e.sent,r=0,!(n.screenRes>1.4)){e.next=24;break}return n.satLoader.setBounds(-57,-180,72,180),e.prev=12,e.next=15,n.satLoader.loadLayerTiles("https://maptiles.meteoblue.com/data/hillshades/{z}/{x}/{y}.png?apikey="+n.apiKey,1,n.WindowXsize,n.WindowYsize,7,2,!0);case 15:i=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),r=1;case 21:n.satLoader.resetBounds(),e.next=34;break;case 24:return e.prev=24,e.next=27,n.imgLoader.loadLayerTiles("https://maptiles.meteoblue.com/data/hillshades/{z}/{x}/{y}.png?apikey="+n.apiKey,1,n.WindowXsize,n.WindowYsize,7,2,!0);case 27:i=e.sent,e.next=33;break;case 30:e.prev=30,e.t1=e.catch(24),r=1;case 33:n.imgLoader.resetBounds();case 34:if(0==r)for(o=0;o<n.WindowXsize*n.WindowYsize*4;o++)t[o]=o%4==3?Math.max(i[o],t[o]):Math.min(i[o],t[o]);case 35:xn(n.gl,n.backgroundTexture,t,n.WindowXsize,n.WindowYsize),a=n.timeStep;case 37:if(!(a<n.nt)){e.next=65;break}if(n.onStepChange&&n.onStepChange(15*n.timeStep),n.animationLayerActive){e.next=41;break}return e.abrupt("return");case 41:if(s=6,Date.parse(n.times[a].substring(0,4)+"-"+n.times[a].substring(4,6)+"-"+n.times[a].substring(6,8))<Date.parse("2021-12-11")&&(s=5),!(n.screenRes>1.4)){e.next=50;break}return e.next=47,n.satLoader.loadLayerTiles(n.layers[n.timeStep],1,n.WindowXsize,n.WindowYsize,s,2,!0);case 47:u=e.sent,e.next=53;break;case 50:return e.next=52,n.imgLoader.loadLayerTiles(n.layers[n.timeStep],1,n.WindowXsize,n.WindowYsize,s,2,!0);case 52:u=e.sent;case 53:return n.AnimationData[n.timeStep]=u,void 0!==n.gl&&(n.gl.enable(n.gl.BLEND),xn(n.gl,n.dataTextureTMP,u,n.WindowXsize,n.WindowYsize),n.isRadar?(n.drawTextureAlpha(n.gl,n.backgroundTexture,1),n.gl.blendFunc(n.gl.SRC_ALPHA,n.gl.ONE_MINUS_SRC_ALPHA),n.drawBlTexture(n.gl,n.dataTextureTMP,n.dataTextureTMP,n.uvTexture,0,.85)):(n.drawTexture(n.gl,n.dataTextureTMP,1),n.gl.blendFuncSeparate(n.gl.SRC_ALPHA,n.gl.ONE_MINUS_SRC_ALPHA,n.gl.SRC_ALPHA,n.gl.ONE),n.drawTextureAlpha(n.gl,n.backgroundTexture,.1+n.zoom/10))),e.next=57,n.imgLoader.loadLayerTiles(n.uvLayers[n.timeStep],n.motionTexScaleFactor,n.WindowXsize,n.WindowYsize,4,2,!0);case 57:if(c=e.sent,a==n.nt-1){for(l=new Uint8Array(c.length),d=0;d<c.length;d++)l[d]=128;n.motionData[n.nt-1]=l}n.motionData[a-1]=c,n.motionDt[a-1]=1,n.timeStep+=1;case 62:a++,e.next=37;break;case 65:n.animationFrame=0,n.animationLayerActive=!0,n.dataLayerReady=!0;case 68:case"end":return e.stop()}}),e,null,[[12,18],[24,30]])})))),In(this,"setRange",(function(e){n.disable(),n.nt=e,n.setTimesteps(),n.resetAnimation(),n.map.triggerRepaint()})),In(this,"setTimes",(function(e){n.allTimes=e.timesteps.map((function(e){return e.value}));var t=e.ranges?e.ranges[0].numsteps:n.allTimes.lengnction(e){n.tileUrl=e,n.resetAnimation()})),In(this,"showImage",(function(e){n.timeSlide=!0,n.animationFrame=e,n.renderAnimation(),n.timeSlide=!1})),In(this,"isAnimationRunning",(function(){return n.renderAnimationActive})),this.map=t.map,this.nt=t.range,this.allTimes=t.steps,this.tileUrl=t.tileUrl,this.apiKey=t.apiKey,this.onStepChange=t.onStepChange,this.onDisable=t.onDisable,this.onLoading=t.onLoading,this.setTimesteps(),this.imgLoader=new On(this.map,!1),this.satLoader=new On(this.map,!0),this.mapIsIdle=!1,this.map.on("move",(function(e){n.resetAnimation()})),this.map.on("resize",(function(e){n.resetAnimation()})),this.map.on("idle",(function(e){n.mapIsIdle=!0}));var r=this.map.getCanvas();this.gl=r.getContext("webgl"),this.initialize(this.map,this.gl)}var t,n;return t=e,(n=[{key:"resetAnimation",value:function(){this.mapIsIdle=!1,this.dataLayerReady=!1,this.animationLayerActive=!1,this.timeStep=0,this.motionData=new Array(this.nt-1),this.AnimationData=new Array(this.nt),this.onDisable&&this.isActive&&this.onDisable(),this.isActive=!1}},{key:"createDebugTextureData",value:function(e){for(var t=new Uint8Array(4*e.length),n=0;n<e.length;n++)t[:function(){this.animationLayerActive=!1}},{key:"enable",value:function(){var e=this;this.isActive=!0;var t=6.5;this.isRadar&&(t=10),this.map.getZoom()>t&&this.map.setZoom(t),this.gl&&this.setupLayers(this.gl),this.animationLayerActive=!0,this.dataLayerReady?(this.renderAnimationActive=!1,this.startAnimating(this.frameRate)):(this.renderAnimationActive=!0,this.onLoading&&this.onLoading("START"),this.fastLoad().then((function(){e.onLoading&&e.onLoading("STOP");var t=new Array(e.motionDt.length);e.motionDt[0]=e.motionDt[1];for(var n=0,r=0;r<e.nt-1;r++)e.motionDt[r]>1.4*e.motionDt[r+1]?t[r]=2:t[r]=1,n+=t[r];e.motionDt[e.nt-1]>1.4*e.motionDt[e.nt-2]?t[e.nt-1]=2:t[e.nt-1]=1,n+=t[e.nt-1],e.motionDt=t;var i=e.substeps;e.keyFrameList=new Array(n*i);for(var o=0,a=0;a<e.nt;a++)for(var s=0;s<i*t[a];s++)e.keyFrameList[o]=a,o+=1;void 0!==e.gl&&(void 0!==e.uvTexture&&e.gl.deleteTexture(e.uvTexture),e.uvTexture=bn(e.gl,e.gl.LINEAR,e.motionData[0],e.motionTexWidth,e.motionTexHeight)),e.mapIsIdle=!0,e.renderAnimationActive=!1,e.startAnimating(e.frameRate)})))}},{key:"texture2Data",value:function(e,t){Sn(t,this.framebuffer,e);var n=this.motionTexWidth*this.motionTexHeight*4,r=new Uint8Array(n);return t.readPixels(0,0,this.motionTexWidth,this.motionTexHeight,t.RGBA,t.UNSIGNED_BYTE,r),Sn(t,null,null),r}},{key:"setTimesteps",value:function(){this.times=this.allTimes.slice(this.allTimes.length-this.nt);for(var e=0;e<this.times.length;e++)this.layers[e]=this.tileUrl.replace("{timestamp}",this.times[e]),this.tileUrl.includes("radar")||this.tileUrl.includes("precipitation_global")?(this.uvLayers[e]=this.layers[e].replace(".png","_uv.png"),this.isRadar=!0,this.frameRate=24,this.substeps=15):(this.uvLayers[e]=this.layers[e].replace(".jpg","_uv.png"),this.isRadar=!1,this.frameRate=32,this.substeps=10)}}])&&Mn(t.prototype,n),e}(),Rn=kn;function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nn=function(){function e(t,n,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.gl=null,this.id=t,this.tileSource=null,this.sourceId=n,this.type="custom",this.tileJson=r,this.program=null,this.onAddCallback=i,this.renderCallback=o,this.preRenderCallback=a}var t,n;return t=e,(n=[{key:"onAdd",value:function(e,t){this.map=e,this.gl=t,e.on("move",this.move.bind(this)),e.on("zoom",this.zoom.bind(this)),this.tileJson&&e.addSource(this.sourceId,this.tileJson),this.tileSource=this.map.getSource(this.sourceId),this.tileSource.on("data",this.onData.bind(this)),"sourceCaches"in this.map.style?this.sourceCache=this.map.style.sourceCaches[this.sourceId]:this.sourceCache=this.map.style._sourceCaches["other:".concat(this.sourceId)],this.map.style._layers[this.id].source=this.sourceId,this.onAddCallback&&this.ohis)),e.off("zoom",ve",value:function(e){this.updateTiles()}},{key:"zoom""===e.sourceDataType&&thisCache.update(this.map.painter.transform)}},{key:"prerender",value:function(e,t){var n=this;this.preRenderCallback&&this.preRenderCallback(e,t,this.sourceCache.getVisibleCoordinates().map((function(e){return n.sourceCache.getTile(e)})))}},{key:"render",value:function(e,t){var n=this;this.renderCallback&&this.renderCallback(e,t,this.sourceCache.getVisibleCoordinates().map((function(e){return n.sourceCache.getTile(e)})))}}])&&Un(t.prototype,n),e}();function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wn(this,"program",{}),Wn(this,"programDrawTexture",{}),Wn(this,"programDrawAlphaTexture",{}),Wn(this,"programWind2uv",{}),Wn(this,"programDrawParticles",{}),Wn(this,"programDrawParticlesW",{}),Wn(this,"programMoveParticles",{}),Wn(this,"programGetTemperature",{}),Wn(this,"programImageMerge",{}),Wn(this,"programCleanImage",{}),Wn(this,"mapZoomLevel",2),Wn(this,"takeScreenshot",!0),Wn(this,"dataLayerReady",!1),Wn(this,"WindowYsize",0),Wn(this,"WindowXsize",0),Wn(this,"screenTextureXsize",0),Wn(this,"screenTextureYsize",0),Wn(this,"pixels",new Uint8Array(4)),Wn(this,"fpsInterval",0),Wn(this,"then",0),Wn(this,"minFrameRate",50),Wn(this,"frameRate",0),Wn(this,"firstImage",!0),Wn(this,"mapIsIdle",!1),Wn(this,"particleLayerActive",!0),Wn(this,"hasError",!1),Wn(this,"_numParticles",8096),Wn(this,"wspeedMin",0),Wn(this,"wspeedMax",1),Wn(this,"particleSpeed",1),Wn(this,"adaptiveParticleSpeed",1),Wn(this,"thicknessGrowth",0),Wn(this,"particleSize",2),Wn(this,"dropRate",.01),Wn(this,"dropRateBump",.01),Wn(this,"_particleArrays",{}),Wn(this,"particleStateResolution",0),Wn(this,"_randomParticleState",new Uint8Array),Wn(this,"AnimationSpeed",1.2),Wn(this,"particleOpacity",.8),Wn(this,"colorScheme",1),Wn(this,"screenshotMapName",""),Wn(this,"screenshotDate",""),Wn(this,"initialize",(function(e,t){n.gl=t,n.map=e,n.framebuffer=t.createFramebuffer(),n.quadBuffer=wn(t,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]));var r=yn(t,Cn,Tn);n.programDrawTexture=r.program,n.programDrawTexture.a_pos=t.getAttribLocation(n.programDrawTexture,"a_pos"),n.programDrawTexture.u_opacity=t.getUniformLocation(n.programDrawTexture,"u_opacity"),n.programDrawTexture.uTexture=t.getUniformLocation(n.programDrawTexture,"uTexture");var i=yn(t,En,_n);n.programDrawAlphaTexture=i.program,n.programDrawAlphaTexture.a_pos=t.getAttribLocation(n.programDrawAlphaTexture,"a_pos"),n.programDrawAlphaTexture.u_opacity=t.getUniformLocation(n.programDrawAlphaTexture,"u_opacity"),n.programDrawAlphaTexture.uTexture=t.getUniformLocation(n.programDrawAlphaTexture,"uTexture");var o=yn(t,"\n    precision highp float;\n    attribute vec2 a_pos;\n    varying vec2 vTexCoord;\n\n    void main() {\n        vTexCoord = 1.0 - a_pos; //check this!!!\n       // vTexCoord =  a_pos; //check this!!!\n        gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n    }\n","\n    precision highp float;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    \n\n\nhighp float atan2(in float y, in float x)\n    {\n        bool s = (abs(x) > abs(y));\n        return mix(3.1415927/2.0 - atan(x,y), atan(y,x), float(s));\n    }\n\n\n\n \nvoid main() {\n\n    highp vec4 color = texture2D(uTexture, vTexCoord); \n    highp vec2 ww = vec2(\n                    color.r * (color.g-0.5),\n                    color.r * (color.b-0.5));\n //   ww = (ww+1.0)*0.5; \n \n    ww = ww+0.5; \n //  gl_FragColor = vec4(ww.x, ww.x,  ww.x, 1.0); \n            \n     gl_FragColor = vec4(\n        fract(ww * 255.0),\n        floor(ww * 255.0) / 255.0);\n}\n    \n");n.programWind2uv=o.program,n.programWind2uv.a_pos=t.getAttribLocation(n.programWind2uv,"a_pos"),n.programWind2uv.uTexture=t.getUniformLocation(n.programWind2uv,"uTexture");var a=yn(t,"\n    precision highp float;\n    attribute vec2 a_pos;\n    uniform mat4 uMatrix;\n    varying vec2 vTexCoord;\n\n    float Extent =  8192.0;\n\n    void main() {\n        vec4 a = uMatrix * vec4(a_pos * Extent, 0, 1);\n        gl_Position = vec4(a.rgba);\n        vTexCoord = a_pos;\n}\n","\n    precision highp float;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\n    void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n\n     float fac = 1.0/color.a;\n     gl_FragColor = vec4(color.r*fac,color.g*fac,color.b*fac,color.a); \n}\n");n.program=a.program,n.program.a_pos=t.getAttribLocation(n.program,"a_pos"),n.program.uMatrix=t.getUniformLocation(n.program,"uMatrix"),n.program.uTexture=t.getUniformLocation(n.program,"uTexture");var s=yn(t,"\n    precision mediump float;\n    precision mediump int;\n    attribute float a_index;\n    uniform float u_particles_res;\n    uniform float u_particle_size;\n    uniform sampler2D u_texture;\n    varying vec2 v_tex_pos;\n    uniform vec2 u_wind_res;\n    \n    float when_gt(float x, float y) {\n        return max(sign(x - y), 0.0);\n    }\n\n  void main() {\n    float a_ind = a_index / 2.0;\n    vec4 color = texture2D(u_texture, vec2(\n        fract(a_ind / u_particles_res),\n        floor(a_ind / u_particles_res) / u_particles_res));\n\n     vec2 screenPos = vec2(\n      color.r  + color.g / 255.0,\n      color.b  + color.a / 255.0);\n\n     float size=u_particle_size;\n     size += when_gt(fract(a_ind),0.1)*1.0;\n  \n    gl_PointSize = size;// u_particle_size;\n    v_tex_pos = 1.0-screenPos;\n    gl_Position =  vec4(1.0-2.0*screenPos, 0, 1);\n}\n","\nprecision mediump float;\nuniform sampler2D u_temp;\nuniform int u_colorScheme;\nvarying vec2 v_tex_pos;\nuniform float u_speed;\nuniform float u_thinc;\n\n\n  void main() {\n     vec4 color = texture2D(u_temp, v_tex_pos);\n\n    \n  //   col=vec4(0.5+4.0*(color.r-0.5), 1.0-1.2*abs(color.r-0.5) ,0.5+4.0*(0.5-color.r),0.9); \n  \n\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n    float r = dot(cxy, cxy);\n    float rc = sin(0.3*color.g*u_speed)*(2.5+u_thinc);\n   \n    rc = max(rc,0.3);\n    if (r > rc) {\n        discard;\n    }\n\n    \n    if (u_colorScheme == 0) {\n        gl_FragColor = vec4(0.7,0.7,0.7,0.5); \n        return;\n    }\n\n     \n    vec4 col=vec4(1.0,1.0,1.0,1.0);\n   \n\n\n  // float  delta = 0.81;\n   // float alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n  float alpha=0.3;\n      float x = 4.*(color.r-0.5);\n     // float alpha = min(0.5+abs(x),0.8);\n    //  float alpha = 0.95;\n      if (x > 0.0){ //red\n       //   x=x*1.5;\n          col = vec4(1.0, max(1.0-1.7*x,0.3),1.0-x,1.0);\n        //  alpha = alpha +x*0.5;\n        } else {\n           col = vec4(max(0.97+1.5*x,0.0),max(1.0-0.4*x*x,0.2),1.0,1.0);\n          // float y = abs(x);\n          // col = vec4(1.0-y, 1.0-0.46*y  ,1,1);\n\n        } //blue\n     //  alpha = 0.5 - (2.0-pow(abs(x),0.8))/7.8;\n       float spdf = color.g*u_speed * 5.0 + 0.08;\n       spdf = clamp(spdf,0.0,1.0);\n       alpha = alpha * spdf ;\n       \n    // gl_FragColor = col*alpha;\n   //  gl_FragColor = vec4(col.r*alpha,col.g*alpha,col.b*alpha,1);\n    gl_FragColor = vec4(col.r,col.g,col.b,alpha);\n    gl_FragColor = clamp(gl_FragColor,vec4(0.0,0.0,0.0,0.0),vec4(1.0,1.0,1.0,1.0));\n  }\n  ");n.programDrawParticles=s.program,n.programDrawParticles.u_texture=t.getUniformLocation(n.programDrawParticles,"u_texture"),n.programDrawParticles.u_temp=t.getUniformLocation(n.programDrawParticles,"u_temp"),n.programDrawParticles.u_particles_res=t.getUniformLocation(n.programDrawParticles,"u_particles_res"),n.programDrawParticles.u_particle_size=t.getUniformLocation(n.programDrawParticles,"u_particle_size"),n.programDrawParticles.a_index=t.getAttribLocation(n.programDrawParticles,"a_index"),n.programDrawParticles.u_colorScheme=t.getUniformLocation(n.programDrawParticles,"u_colorScheme"),n.programDrawParticles.u_wind_res=t.getUniformLocation(n.programDrawParticles,"u_wind_res"),n.programDrawParticles.u_speed=t.getUniformLocation(n.programDrawParticles,"u_speed"),n.programDrawParticles.u_thinc=t.getUniformLocation(n.programDrawParticles,"u_thinc");var u=yn(t,"\n    precision mediump float;\n    precision mediump int;\n    attribute float a_index;\n    uniform float u_particles_res;\n    uniform float u_particle_size;\n    uniform sampler2D u_texture;\n    varying vec2 v_tex_pos;\n    uniform vec2 u_wind_res;\n    varying float ind;\n    \n    float when_gt(float x, float y) {\n        return max(sign(x - y), 0.0);\n    }\n\n  void main() {\n    float a_ind = a_index / 2.0;\n    vec4 color = texture2D(u_texture, vec2(\n        fract(a_ind / u_particles_res),\n        floor(a_ind / u_particles_res) / u_particles_res));\n\n     vec2 screenPos = vec2(\n      color.r  + color.g / 255.0,\n      color.b  + color.a / 255.0);\n\n     float size=u_particle_size*0.5; //0.75\n     size += when_gt(fract(a_ind),0.1)*2.6*size; //2\n     ind = 0.0;\n     ind += when_gt(fract(a_ind),0.1)*1.0;\n\n  \n    gl_PointSize = size;// u_particle_size;\n    v_tex_pos = 1.0-screenPos;\n    gl_Position =  vec4(1.0-2.0*screenPos, 0, 1);\n}\n","\nprecision mediump float;\nvarying vec2 v_tex_pos;\nuniform sampler2D u_temp;\nuniform float u_speed;\nuniform float u_thinc;\nvarying float ind;\n\nfloat when_gt(float x, float y) {\n    return max(sign(x - y), 0.0);\n}\n\n  void main() {\n\n    vec4 color = texture2D(u_temp, v_tex_pos);\n    vec2 tl = vec2(color.r / 255.0 + color.b,color.g / 255.0 + color.a); \n    float sp = length(tl-0.5)*3.2;\n   \n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n    float r = dot(cxy, cxy);\n  \n    float rc = sin(0.35*sp*u_speed)*(2.5+1.2*u_thinc);\n   // float rc = sp;\n   \n    rc = max(rc,0.14);\n    if (r > rc) {\n        discard;\n    }\n\n   // float sp2 = clamp(length(tl-0.5)*1.0,0.0,100.0);\n    //float al = clamp(0.5-40.0*r,0.0,1.0);\n\n    gl_FragColor = vec4(0.7,0.7,0.7,1.0); \n    gl_FragColor -= when_gt(ind,0.5)*(vec4(0.1,0.1,0.1,0.85));\n   \n \n  }\n  ");n.programDrawParticlesW=u.program,n.programDrawParticlesW.u_texture=t.getUniformLocation(n.programDrawParticlesW,"u_texture"),n.programDrawParticlesW.u_temp=t.getUniformLocation(n.programDrawParticlesW,"u_temp"),n.programDrawParticlesW.u_particles_res=t.getUniformLocation(n.programDrawParticlesW,"u_particles_res"),n.programDrawParticlesW.u_particle_size=t.getUniformLocation(n.programDrawParticlesW,"u_particle_size"),n.programDrawParticlesW.a_index=t.getAttribLocation(n.programDrawParticlesW,"a_index"),n.programDrawParticlesW.u_wind_res=t.getUniformLocation(n.programDrawParticlesW,"u_wind_res"),n.programDrawParticlesW.u_speed=t.getUniformLocation(n.programDrawParticlesW,"u_speed"),n.programDrawParticlesW.u_thinc=t.getUniformLocation(n.programDrawParticlesW,"u_thinc");var c=yn(t,"\nprecision mediump float;\nprecision mediump int;\nattribute vec2 a_pos;\nvarying vec2 v_tex_pos;\n\nvoid main() {\n    v_tex_pos = a_pos;\n    gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1); //entire screen size for our 0-1 positions\n//  gl_Position = vec4( a_pos, 0, 1);\n}\n","\n    precision highp float;\n    varying vec2 v_tex_pos;\n    uniform sampler2D u_particles;\n    uniform sampler2D u_wind;\n    uniform bool u_initialize;\n    uniform vec2 u_wind_res;\n    uniform float u_drop_rate;\n    uniform float u_drop_rate_bump;\n    uniform float u_rand_seed;\n    uniform float u_speed;\n    uniform float u_zoomlevel;\n    uniform float u_wsmax;\n    uniform float u_wsmin;\n   \n\n\n\n    highp vec2 bilinearData(const vec2 uv) {\n        precision highp float;\n\n         vec2 px = 1.0 / u_wind_res;\n         vec2 vc = (floor(uv * u_wind_res)) * px;\n         vec2 f = fract(uv * u_wind_res);\n        \n         vec4 color = texture2D(u_wind,vc);\n         vec2 tl = vec2(color.r / 255.0 + color.b,color.g / 255.0 + color.a); \n      \n         vec4 color2 = texture2D(u_wind,vc + vec2(px.x, 0));\n         vec2 tr = vec2(color2.r / 255.0 + color2.b,color2.g / 255.0 + color2.a); \n      \n         vec4 color3 = texture2D(u_wind,vc + vec2(0, px.y));\n         vec2 bl = vec2(color3.r / 255.0 + color3.b,color3.g / 255.0 + color3.a); \n      \n\n         vec4 color4 = texture2D(u_wind,vc + px);\n         vec2 br = vec2(color4.r / 255.0 + color4.b,color4.g / 255.0 + color4.a); \n      \n\n        return mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n    }\n\n    \n\n     float rand(vec2 co)\n    {\n         float a = 12.9898;\n         float b = 78.233;\n         float c = 43758.5453;\n         float dt= dot(co.xy ,vec2(a,b));\n         float sn= mod(dt,3.14);\n        return fract(sin(sn) * c);\n    }\n\n     float when_eq(float x, float y) {\n        return 1.0 - abs(sign(x - y));\n      }\n      \n      float when_neq(float x, float y) {\n        return abs(sign(x - y));\n      }\n      \n      float when_gt(float x, float y) {\n        return max(sign(x - y), 0.0);\n      }\n      \n      float when_lt(float x, float y) {\n        return max(sign(y - x), 0.0);\n      }\n      \n      float when_ge(float x, float y) {\n        return 1.0 - when_lt(x, y);\n      }\n      \n      float when_le(float x, float y) {\n        return 1.0 - when_gt(x, y);\n      }\n\n\n     vec4 update(vec4 color) {\n\n         vec2 pos = vec2( color.r  + color.g / 255.0,\n            color.b  + color.a / 255.0);\n\n        vec2 velocity =  bilinearData(1.0-pos) - 0.5; \n  \n        highp float asp = u_wind_res.x/u_wind_res.y;\n       \n       velocity.y -= when_le(asp,1.0)*(1.0-asp)*velocity.y;\n       velocity.x -= when_gt(asp,1.0)*(1.0-1.0/asp)*velocity.x;\n\n       asp=max(asp,1.0);\n        velocity = velocity * asp;//*1.7;\n\n     //  highp vec2 velocity=-vec2(0.003,0.002)*2.0;\n      // highp vec2 velocity=-vec2(0.00,0.00);\n\n        float speed_th = length(velocity);//* u_speed; \n        mediump float sclf = (speed_th / (0.5+speed_th)*1.3)/speed_th;\n        vec2 rvel = velocity*u_speed*sclf*0.5;\n     \n    \n       color.g = color.g - rvel.x; \n       color.a = color.a - rvel.y; \n      \n        float ds = 1.0/255.0;\n\n       color.r *= when_le(color.r,1.0);\n       float colG = color.g;\n       float df = floor(colG);\n       color.g -= when_gt(colG,1.0)*df;\n       color.r += when_gt(colG,1.0)*ds*df;\n\n      // if (color.r > 1.0 ){color.r = 0.0;}\n      // if (color.g > 1.0 ){\n      //     float df = floor(color.g);\n      //     color.g = color.g - df;\n      //     color.r = color.r+ds*df;\n      //  }\n\n\n      colG = color.g;\n      df = floor(colG);\n      color.r = color.r * when_gt(color.r,0.0) + when_le(color.r,0.0);\n      color.g += when_lt(colG,0.0)*abs(df);\n      color.r += when_lt(colG,0.0)*ds*df;\n\n     //   if (color.r <= 0.0 ){color.r = 1.0;}\n      //  if (color.g < 0.0 ){\n        //    float df = floor(color.g);\n        //    color.g = abs(df) + color.g;\n       //     color.r = color.r+ds*df;\n       //  }\n \n      float colA = color.a;\n      color.b *= when_le(color.b,1.0);\n      df = floor(color.a);\n      color.a -= when_gt(colA,1.0)*df;\n      color.b += when_gt(colA,1.0)*ds*df;\n\n      //   if (color.b > 1.0  ){color.b = 0.0;}\n      //   if (color.a > 1.0 ){\n      //       float df = floor(color.a);\n      //       color.a = color.a - df;\n      //       color.b = color.b+ds*df;\n      //    }\n\n      df = floor(color.a);\n      colA = color.a;\n      color.b = color.b * when_ge(color.b,ds) + when_lt(color.b,ds);\n      color.a += when_lt(colA,0.0)*abs(df);\n      color.b += when_lt(colA,0.0)*ds*df;\n\n      //   if (color.b < ds ){color.b = 1.0;}\n       //  if (color.a < 0.0 ){\n      //       float df = floor(color.a);\n      //       color.a = abs(df) + color.a;\n      //       color.b = color.b+ds*df;\n      //    }\n  \n\n        vec2 seed = (pos + v_tex_pos) * u_rand_seed;\n    \n       \n        float drop_prob = u_drop_rate*0.6 + speed_th * u_drop_rate_bump + smoothstep(0.5, 1.0, length(pos - vec2(0.5, 0.5)) * 0.3);\n        float drop = step(1.0 - drop_prob, rand(seed));\n      \n\n        vec4 random_pos = vec4(\n            rand(seed + 1.3),rand(seed + 4.3),\n            rand(seed + 2.1),rand(seed + 7.3) );\n        return mix(color, random_pos, drop);\n       \n    }\n    \n\nvoid main() {\n    vec4 color = texture2D(u_particles, v_tex_pos);\n\n    color = update(color);\n\n    if (u_initialize) {\n        for (int i = 0; i < 160; i++) {\n            color = update(color);\n        }\n    }\n\n    gl_FragColor=color;\n}\n\n");n.programMoveParticles=c.program,n.programMoveParticles.a_pos=t.getAttribLocation(n.programMoveParticles,"a_pos"),n.programMoveParticles.u_wind_res=t.getUniformLocation(n.programMoveParticles,"u_wind_res"),n.programMoveParticles.u_particles=t.getUniformLocation(n.programMoveParticles,"u_particles"),n.programMoveParticles.u_wind=t.getUniformLocation(n.programMoveParticles,"u_wind"),n.programMoveParticles.u_initialize=t.getUniformLocation(n.programMoveParticles,"u_initialize"),n.programMoveParticles.u_drop_rate=t.getUniformLocation(n.programMoveParticles,"u_drop_rate"),n.programMoveParticles.u_drop_rate_bump=t.getUniformLocation(n.programMoveParticles,"u_drop_rate_bump"),n.programMoveParticles.u_rand_seed=t.getUniformLocation(n.programMoveParticles,"u_rand_seed"),n.programMoveParticles.u_zoomlevel=t.getUniformLocation(n.programMoveParticles,"u_zoomlevel"),n.programMoveParticles.u_speed=t.getUniformLocation(n.programMoveParticles,"u_speed"),n.programMoveParticles.u_wsmax=t.getUniformLocation(n.programMoveParticles,"u_wsmax"),n.programMoveParticles.u_wsmin=t.getUniformLocation(n.programMoveParticles,"u_wsmin");var l=yn(t,"\n   precision mediump float;\n   attribute vec2 a_pos;\n   varying vec2 vTexCoord;\n\n   void main() {\n       vTexCoord = 1.0-a_pos;\n       gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n   }\n","\n   precision mediump float;\n   uniform float u_opacity;\n   varying vec2 vTexCoord;\n   uniform sampler2D uTexture;\n\n   float when_gt(float x, float y) {\n    return max(sign(x - y), 0.0);\n   }  \n\n   float when_lt(float x, float y) {\n    return max(sign(y - x), 0.0);\n  }\n\n   void main() {\n     vec4 color = texture2D(uTexture,  vTexCoord);\n  // gl_FragColor = color; //plot an rgba image\n\n    color.rgb *= when_gt(color.r,0.05) ;\n\n   // gl_FragColor = vec4(floor(color * u_opacity *255.0)/(256.0*u_opacity));\n\n  //  gl_FragColor = vec4(floor(color * u_opacity *255.0)/(254.0*u_opacity));\n  //  gl_FragColor = vec4(color.r,color.g,color.b,floor(color.a * u_opacity *255.0)/(265.5*u_opacity));\n   //  gl_FragColor = vec4(color.r* u_opacity,color.g* u_opacity,color.b* u_opacity,1.0);\n     gl_FragColor = vec4(color.rgb*u_opacity,1.0);\n\n   }\n");n.programCleanImage=l.program,n.programCleanImage.a_pos=t.getAttribLocation(n.programCleanImage,"a_pos"),n.programCleanImage.u_opacity=t.getUniformLocation(n.programCleanImage,"u_opacity"),n.programCleanImage.uTexture=t.getUniformLocation(n.programCleanImage,"uTexture");var d=yn(t,"\n    precision highp float;\n    attribute vec2 a_pos;\n    varying vec2 vTexCoord;\n\n    void main() {\n       // vTexCoord = 1.0 - a_pos; \n        vTexCoord =  1.0 - a_pos; \n        gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n    }\n","\n    precision highp float;\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n\nvoid main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    gl_FragColor = vec4(color.a,color.r,0,0);\n}\n    \n");n.programGetTemperature=d.program,n.programGetTemperature.a_pos=t.getAttribLocation(n.programGetTemperature,"a_pos"),n.programGetTemperature.uTexture=t.getUniformLocation(n.programGetTemperature,"uTexture");var f=yn(t,"\n   precision highp float;\n   attribute vec2 a_pos;\n   varying vec2 vTexCoord;\n\n   void main() {\n       vTexCoord = 1.0-a_pos;\n       gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n   }\n","\n   precision highp float;\n   uniform float u_opacity;\n   varying vec2 vTexCoord;\n   uniform sampler2D uTexture;\n   uniform sampler2D uTextureBackground;\n\n   void main() {\n     vec4 color = texture2D(uTexture,  vTexCoord);\n     vec4 colorB = texture2D(uTextureBackground,  vTexCoord);\n \n     gl_FragColor = colorB;\n\n    \n    if (color.r+color.b+color.g > 0.2) {\n\n        color = color * u_opacity;\n        float fac=color.b;\n        if (color.r > color.b ){fac=color.r;}\n        if (color.g > fac){fac=color.g;}\n\n        gl_FragColor=(color+(1.0-fac)*colorB);\n        \n    }\n\n    gl_FragColor = clamp(gl_FragColor,vec4(0.0,0.0,0.0,0.0),vec4(1.0,1.0,1.0,1.0));\n\n    // gl_FragColor = vec4(color.r* u_opacity,color.g* u_opacity,color.b* u_opacity,1);\n   //  if ((gl_FragColor.r < 0.6) && (gl_FragColor.g < 0.6) && (gl_FragColor.b < 0.6)) {gl_FragColor.a = 0.0;}\n   }\n");n.programImageMerge=f.program,n.programImageMerge.a_pos=t.getAttribLocation(n.programImageMerge,"a_pos"),n.programImageMerge.u_opacity=t.getUniformLocation(n.programImageMerge,"u_opacity"),n.programImageMerge.uTexture=t.getUniformLocation(n.programImageMerge,"uTexture"),n.programImageMerge.uTextureBackground=t.getUniformLocation(n.programImageMerge,"uTextureBackground"),n.initializeParticles(t)})),Wn(this,"setupLayers",(function(e){e.disable(e.BLEND),n._particleArrays.updated=!1;var t=!0,r=n.map.getZoom();n.mapZoomLevel!=r&&(n.initializeParticles(e),t=!1,n.mapZoomLevel=r);var i=new Uint8Array(e.canvas.width*e.canvas.height*4);if(e.canvas.height==n.WindowYsize&&e.canvas.width==n.WindowXsize)return xn(e,n.screenTexture,i,e.canvas.width,e.canvas.height),void xn(e,n.lastScreenTexture,i,e.canvas.width,e.canvas.height);void 0!==n.dataTextureTMP&&e.deleteTexture(n.dataTextureTMP),void 0!==n.dataTexture&&e.deleteTexture(n.dataTexture),void 0!==n.temperatureTexture&&e.deleteTexture(n.temperatureTexture),void 0!==n.screenTexture&&e.deleteTexture(n.screenTexture),void 0!==n.lastScreenTexture&&e.deleteTexture(n.lastScreenTexture),void 0!==n.tmpTexture&&e.deleteTexture(n.tmpTexture),n.dataTexture=bn(e,e.LINEAR,i,e.canvas.width,e.canvas.height),n.temperatureTexture=bn(e,e.LINEAR,i,e.canvas.width,e.canvas.height),n.dataTextureTMP=bn(e,e.LINEAR,i,e.canvas.width,e.canvas.height),n.screenTexture=bn(e,e.LINEAR,i,e.canvas.width,e.canvas.height),n.lastScreenTexture=bn(e,e.LINEAR,i,e.canvas.width,e.canvas.height),n.tmpTexture=bn(e,e.LINEAR,i,e.canvas.width,e.canvas.height),t&&n.initializeParticles(e),n.WindowYsize=e.canvas.height,n.WindowXsize=e.canvas.width})),Wn(this,"renderInputData",(function(e,t,r){n.particleLayerActive&&!n.hasError&&(n.gl=e,n.takeScreenshot&&(n.makeMapScreenshot(e),n.dataLayerReady||(n.setupLayers(e),n.program instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(n.program)))),e.useProgram(n.program),Sn(e,n.framebuffer,n.dataTextureTMP),r.forEach((function(t){t.texture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),Dn(e,n.quadBuffer,n.program.a_pos,2),"posMatrix"in t.tileID?e.uniformMatrix4fv(n.program.uMatrix,!1,t.tileID.posMatrix):e.uniformMatrix4fv(n.program.uMatrix,!1,t.tileID.projMatrix),e.uniform1i(n.program.uTexture,0),e.drawArrays(e.TRIANGLES,0,6))})),Sn(e,n.framebuffer,n.temperatureTexture),void 0!==n.dataTextureTMP?n.getTemperature(e,n.dataTextureTMP):console.log("dataTextureTMP undefined"),Sn(e,null,null),Sn(e,n.framebuffer,n.dataTexture),void 0!==n.dataTextureTMP?n.wind2uv(e,n.dataTextureTMP):console.log("dataTextureTMPuv undefined"),e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE?(n.dataLayerReady=!0,n.getMinMax(e)):console.log("tile buffer not complete yet"),Sn(e,null,null))))})),Wn(this,"frameCnt",0),Wn(this,"renderAnimation",(function(){if(void 0!==n.gl){if(n.gl.disable(n.gl.DEPTH_TEST),n.computeMovement(n.gl),Sn(n.gl,n.framebuffer,n.screenTexture),n.gl.blendFunc(n.gl.SRC_ALPHA,n.gl.ONE_MINUS_SRC_ALPHA),0==n.colorScheme)n.firstImage||n.drawCleanTexture(n.gl,n.lastScreenTexture,.95),n.gl.enable(n.gl.BLEND),n.drawParticlesWhite(n.gl),Sn(n.gl,n.framebuffer,n.tmpTexture),n.gl.disable(n.gl.BLEND),n.drawTexture(n.gl,n.MapBackgroundTexture,1),n.gl.enable(n.gl.BLEND),n.gl.blendFuncSeparate(n.gl.ONE,n.gl.ONE_MINUS_SRC_COLOR,n.gl.SRC_COLOR,n.gl.ONE_MINUS_SRC_COLOR),n.firstImage||n.drawTextureAlpha(n.gl,n.lastScreenTexture,1),Sn(n.gl,null,null),n.gl.disable(n.gl.BLEND),n.frameCnt%2==1&&n.drawTexture(n.gl,n.tmpTexture,1),n.frameCnt+=1;else{n.firstImage||n.drawTexture(n.gl,n.lastScreenTexture,.97),n.gl.enable(n.gl.BLEND),n.drawParticles(n.gl),Sn(n.gl,null,null),n.gl.disable(n.gl.BLEND),n.drawTexture(n.gl,n.MapBackgroundTexture,1),n.gl.enable(n.gl.BLEND),n.gl.blendFunc(n.gl.SRC_COLOR,n.gl.SRC_ALPHA);var e=.85;n.mapZoomLevel<4&&(e-=.25*(1-n.mapZoomLevel/4)),n.firstImage||n.drawTexture(n.gl,n.lastScreenTexture,n.particleOpacity*e)}var t=n.lastScreenTexture;n.lastScreenTexture=n.screenTexture,n.screenTexture=t}})),Wn(this,"RenderCall",(function(e){n.particleLayerActive&&!n.hasError&&n.startAnimating(n.frameRate)})),Wn(this,"startAnimating",(function(e){n.fpsInterval=1e3/e,n.then=Date.now(),n.firstImage=!0,n.animate()})),Wn(this,"now",Date.now()),Wn(this,"elapsed",0),Wn(this,"animate",(function(){n.particleLayerActive&&!n.hasError&&(requestAnimationFrame(n.animate),n.now=Date.now(),n.elapsed=n.now-n.then,n.elapsed>n.fpsInterval&&(n.then=n.now-n.elapsed%n.fpsInterval,n.takeScreenshot&&!n.mapIsIdle||(n.renderAnimation(),n.firstImage=!1)))})),Wn(this,"wind2uv",(function(e,t){var r=n.programWind2uv;r instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(r)))),e.useProgram(r),Dn(e,n.quadBuffer,r.a_pos,2),An(e,t,2),e.uniform1i(r.uTexture,2),e.drawArrays(e.TRIANGLES,0,6)})),Wn(this,"getTemperature",(function(e,t){var r=n.programGetTemperature;r instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(r)))),e.useProgram(r),Dn(e,n.quadBuffer,r.a_pos,2),An(e,t,0),e.uniform1i(r.uTexture,0),e.drawArrays(e.TRIANGLES,0,6)})),Wn(this,"drawTexture",(function(e,t,r){n.programDrawTexture instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(n.programDrawTexture)))),e.useProgram(n.programDrawTexture),Dn(e,n.quadBuffer,n.programDrawTexture.a_pos,2),An(e,t,0),e.uniform1i(n.programDrawTexture.uTexture,0),e.uniform1f(n.programDrawTexture.u_opacity,r),e.drawArrays(e.TRIANGLES,0,6)})),Wn(this,"drawTextureAlpha",(function(e,t,r){n.programDrawAlphaTexture instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(n.programDrawAlphaTexture)))),e.useProgram(n.programDrawAlphaTexture),Dn(e,n.quadBuffer,n.programDrawAlphaTexture.a_pos,2),An(e,t,0),e.uniform1i(n.programDrawAlphaTexture.uTexture,0),e.uniform1f(n.programDrawAlphaTexture.u_opacity,r),e.drawArrays(e.TRIANGLES,0,6)})),Wn(this,"drawCleanTexture",(function(e,t,r){n.programCleanImage instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(n.programCleanImage)))),e.useProgram(n.programCleanImage),Dn(e,n.quadBuffer,n.programCleanImage.a_pos,2),An(e,t,0),e.uniform1i(n.programCleanImage.uTexture,0),e.uniform1f(n.programCleanImage.u_opacity,r),e.drawArrays(e.TRIANGLES,0,6)})),Wn(this,"drawMergedImages",(function(e,t,r,i){var o=n.programImageMerge;o instanceof WebGLProgram||n.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(o)))),e.useProgram(o),Dn(e,n.quadBuffer,o.a_pos,2),An(e,t,0),e.uniform1i(o.uTexture,0),An(e,r,1),e.uniform1i(o.uTextureBackground,1),e.uniform1f(o.u_opacity,i),e.drawArrays(e.TRIANGLES,0,6)})),Wn(this,"initializeParticles",(function(e){var t=n.getScreenResolution(),r=n.map.getZoom(),i=3.5-r;i<1&&(i=1);var o=e.canvas.height*e.canvas.width/500*i*2.5/(t*t);n.particleSpeed=2e3/Math.sqrt(e.canvas.height*e.canvas.width)*t*.8*n.AnimationSpeed,n.particleSize=2.5*t,0==n.colorScheme&&(n.particleSize=.7*n.particleSize),o<3e3&&(o=3e3),t<1.1&&(n.particleSize=2,o*=.7);var a=(e.canvas.height/t+e.canvas.width/t)/2e3-.6;a<0&&(a=0),n.particleSize=n.particleSize+a,n.thicknessGrowth=1*a;var s=(1e3-(e.canvas.height/t+e.canvas.width/t)/2)/500;s<0&&(s=0),s>1&&(s=1),n.frameRate=n.minFrameRate+20*s;var u=.7+o/5e3*.3;if(u>1&&(u=1),r<4){var c=r/3;r<2&&(c=.8),r<1&&(c=.6),n.particleSpeed=n.particleSpeed*c}0==n.colorScheme&&(n.particleSize*=1.4),n.particleStateResolution=Math.ceil(Math.sqrt(o));var l=n.particleStateResolution;n._numParticles=l*l,n._randomParticleState=new Uint8Array(4*n._numParticles);for(var d=0;d<n._randomParticleState.length;d++)n._randomParticleState[d]=Math.floor(256*Math.random());for(var f=new Float32Array(2*n._numParticles),p=0;p<2*n._numParticles;p++)f[p]=p;void 0!==n.particleIndexBuffer&&e.deleteBuffer(n.particleIndexBuffer),n.particleIndexBuffer=wn(e,f),n._particleArrays=n.initializeParticleArrays(e)})),Wn(this,"initializeParticleArrays",(function(e){return void 0!==n._particleArrays.particleStateTexture0&&(e.deleteTexture(n._particleArrays.particleStateTexture0),e.deleteTexture(n._particleArrays.particleStateTexture1)),{particleStateTexture0:bn(e,e.NEAREST,n._randomParticleState,n.particleStateResolution,n.particleStateResolution),particleStateTexture1:bn(e,e.NEAREST,n._randomParticleState,n.particleStateResolution,n.particleStateResolution),updated:!1}})),Wn(this,"makeMapScreenshot",(function(e){if(n.map.loaded()){var t=new Uint8Array(e.drawingBufferWidth*e.drawingBufferHeight*4);e.readPixels(0,0,e.drawingBufferWidth,e.drawingBufferHeight,e.RGBA,e.UNSIGNED_BYTE,t),e.canvas.height==n.WindowYsize&&e.canvas.width==n.WindowXsize&&n.screenTextureXsize==n.WindowXsize&&n.screenTextureYsize==n.WindowYsize?void 0!==n.MapBackgroundTexture?xn(e,n.MapBackgroundTexture,t,e.canvas.width,e.canvas.height):n.MapBackgroundTexture=bn(e,e.NEAREST,t,e.canvas.width,e.canvas.height):(void 0!==n.MapBackgroundTexture&&e.deleteTexture(n.MapBackgroundTexture),n.MapBackgroundTexture=bn(e,e.NEAREST,t,e.canvas.width,e.canvas.height)),n.screenTextureXsize=e.drawingBufferWidth,n.screenTextureYsize=e.drawingBufferHeight;for(var r=!1,i=0,o=0;o<t.length-1;o+=1e3)i+=t[o];i>1&&(r=!0),r&&(n.takeScreen"getMap",(function(){n.takeScreenshot=!0})),Wn(this,"getMinMax",(function(e){if(e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE){Sn(e,n.framebuffer,n.dataTextureTMP);var t=new Uint8Array(e.drawingBufferWidth*e.drawingBufferHeight*4);e.readPixels(0,0,e.drawingBufferWidth,e.drawingBufferHeight,e.RGBA,e.UNSIGNED_BYTE,t);for(var r=0,i=0;i<t.length-1;i+=16)r=Math.max(r,t[i]);Sn(e,null,null),n.wspeedMin=0,n.wspeedMax=r/255,n.wspeedMax<.3&&n.wspeedMax>.001?n.adaptiveParticleSpeed=.2*n.particleSpeed/n.wspeedMax:n.adaptiveParticleSpeed=n.particleSpeed}})),Wn(this,"debouncedRenderInputData",this.debounce(this.renderInputData,60,!1,!0)),Wn(this,"debouncedRender",this.debounce(this.RenderCall,60,!1,!1)),Wn(this,"debouncedgetMap",this.debounce(this.getMap,60,!1,!1)),Wn(this,"syncCount",0),Wn(this,"waitForMap",(function(e){if(console.log(n.mapIsIdle),n.mapIsIdle)return n.doShot(e),void n.disable();n.syncCount++,n.syncCount<500?setTimeout((function(){return n.waitForMap(e)}),10):console.error("Screenshoting did not work ")})),Wn(this,"loadScreenshotLogoImg",(function(){if(void 0!==n.screenshotLogoPath){var e=new Image;return e.src=n.screenshotLction(t){e.onload=function(){return t(e)},e.onerror=function(e){return console.error("Error while loading screenshoew Promise((function(e){return e(void 0)}))})),Wn(this,"triggerRepaint",(function(){n.mapIsIdle=!0,n.disable();var e=n.map.style._sourceCaches||n.map.style.sourceCaches,t="sourceFlow"in e?e.sourceFlow:e["other:sourceFlow"];t.clearTiles(),t.update(n.map.transform),n.map.triggerRepaint(),n.mapIsIdle=!1,n.enable(),n.debouncedgetMap()})),Wn(this,"removeCustomLayer",(function(){void 0!==n.map.getLayer(n.customLayer.id)&&n.map.removeLayer(n.customLayer.id)})),Wn(this,"addCustomLayer",(function(){void 0===n.map.getLayer(n.customLayer.id)&&n.map.addLayer(n.customLayer)})),Wn(this,"setError",(function(e){throw n.hasError=!0,n.onError&&n.onError(e),e})),this.map=t,this.customLayer=new Nn("animationLayer","sourceFlow",void 0,this.initialize,this.renderInputData,this.RenderCall),t.addLayer(this.customLayer),this.mapIsIdle=!1,this.map.on("move",(function(e){n.mapIsIdle=!1,n.dataLayerReady=!1,n.d,n.dataLayerReady=!1,n.debouncedgetMap()})),this.map.on("idle",(function(e){n.mapIsIdle=!0}))}var t,n;return t=e,n=[{key:"drawParticles",value:function(e){this.programDrawParticles instanceof WebGLProgram||this.setError(Error('WebGL error "'.concat(e.getError(),'". Program: ').concat(JSON.stringify(this.programDrawParticles)))),e.useProgram(this.programDrawParticles),Dn(e,this.particleIndexBuffer,this.programDrawParticles.a_index,1),e.uniform1f(this.programDrawParticles.u_particles_res,this.particleStateResolution),e.uniform1f(this.programDrawParticles.u_particle_size,this.particleSize),An(e,this._particleArrays.particleStateTexture0,0),e.uniform1i(this.programDrawParticles.u_texture,0),An(e,this.temperatureTexture,1),e.uniform1i(this.programDrawParticles.u_temp,1),e.uniform1i(this.programDrawParticles.u_colorScheme,this.colorScheme),e.uniform1f(this.programDrawParticles.u_speed,this.adaptiveParticleSpeed),e.uniform1f(this.programDrawParticles.u_thinc,this.thicknessGrowth),e.uniform2f(this.programDrawParticles.u_wind_res,e.canvas.width,e.canvas.height),e.drawArrays(e.POINTS,0,2*this._numParticles)}},{key:"drawParticlesWhite",value:function(e){this.programDrawParticlesW instanceof WebGLProgram||this.setError(Error('WebGL error "'.concat(e.getError(),'". Program: ').concat(JSON.stringify(this.programDrawParticlesW)))),e.useProgram(this.programDrawParticlesW),Dn(e,this.particleIndexBuffer,this.programDrawParticlesW.a_index,1),e.uniform1f(this.programDrawParticlesW.u_particles_res,this.particleStateResolution),e.uniform1f(this.programDrawParticlesW.u_particle_size,this.particleSize),An(e,this._particleArrays.particleStateTexture0,0),e.uniform1i(this.programDrawParticlesW.u_texture,0),An(e,this.dataTexture,1),e.uniform1i(this.programDrawParticlesW.u_temp,1),e.uniform1f(this.programDrawParticlesW.u_speed,this.adaptiveParticleSpeed),e.uniform1f(this.programDrawParticlesW.u_thinc,this.thicknessGrowth),e.uniform2f(this.programDrawParticlesW.u_wind_res,e.canvas.width,e.canvas.height),e.drawArrays(e.POINTS,0,2*this._numParticles)}},{key:"computeMovement",value:function(e){e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.disable(e.BLEND),Sn(e,this.framebuffer,this._particleArrays.particleStateTexture1),e.viewport(0,0,this.particleStateResolution,this.particleStateResolution);var t=this.programMoveParticles;t instanceof WebGLProgram||this.setError(Error("WebGL error: ".concat(e.getError(),". Program: ").concat(JSON.stringify(t)))),e.useProgram(t),An(e,this._particleArrays.particleStateTexture0,0),e.uniform1i(t.u_particles,0),An(e,this.dataTexture,1),e.uniform1i(t.u_wind,1),Dn(e,this.quadBuffer,t.a_pos,2),e.uniform2f(t.u_wind_res,e.canvas.width,e.canvas.height),e.uniform1f(t.u_rand_seed,Math.random()),e.uniform1f(t.u_speed,this.adaptiveParticleSpeed),e.uniform1f(t.u_drop_rate,this.dropRate),e.uniform1f(t.u_drop_rate_bump,this.dropRateBump),e.uniform1i(t.u_initialize,!this._particleArrays.updated),e.uniform1f(t.u_zoomlevel,this.mapZoomLevel),e.uniform1f(t.u_wsmax,this.wspeedMax),e.uniform1f(t.u_wsmin,this.wspeedMin),this._particleArrays.updated=!0,e.drawArrays(e.TRIANGLES,0,6),this.particleTMP=this._particleArrays.particleStateTexture0,this._particleArrays.particleStateTexture0=this._particleArrays.particleStateTexture1,this._particleArrays.particleStateTexture1=this.particleTMP,Sn(e,null,null),e.viewport(0,0,e.canvas.width,e.canvas.height)}},{key:"debounce",value:function(e,t,n,r){var i;return function(){var o=this,a=arguments,s=function(){i=null,n||e.apply(o,a),r&&e.apply(o,a)},u=n&&!i;clearTimeout(i),i=setTimeout(s,t),u&&e.applyvicePixelRatio?window.devicePixelRatio:1}},{key:"disable",value:function(){this.particleLayerActive=!1,void 0!==this.gl&&void 0!==this.MapBackgroundTexture&&this.drawTexture(this.gl,this.MapBackgroundTexture,1)}},{key:"enable",value:function(){this.particleLayerActive=!0,this.mapIsIdle=!1,this.dataLayerReady=!1,this.map.triggerRepaint()}},{key:"setColorScheme",value:function(e){this.colorScheme=e,void 0!==this.gl&&this.initializeParticles(this.gl)}},{key:"setOpacity",value:function(e){this.particleOpacity=e}},{key:"exportScreenshot",value:function(){this.syncCount=0;var e=this.particleLayerActive;void 0!==this.gl&&(e?this.doShot(e):(this.enable(),this.waitForMap(e)))}},{key:"doShot",value:function(e){var t=this;if(console.log("done waiting"),void 0!==this.gl){var n=this.gl;e?(this.gl.disable(this.gl.BLEND),this.drawMergedImages(this.gl,this.lastScreenTexture,this.MapBackgroundTexture,this.particleOpacity),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.drawParticles(this.gl)):Sn(n,this.framebuffer,this.MapBackgroundTexture);var r=n.drawingBufferWidth*n.drawingBufferHeight*4,i=new Uint8Array(r);n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,i),Sn(n,null,null),e||this.disable();for(var o=new Uint8Array(r),a=n.drawingBufferWidth,s=n.drawingBufferHeight,u=0,c=0;c<s-1;c++)for(var l=0;l<a-1;l++)for(var d=0;d<4;d++)u=4*(c*a+l)+d,o[4*((s-c)*a+l)+d]=i[u];var f=document.createElement("canvas");f.width=n.drawingBufferWidth,f.height=n.drawingBufferHeight;var p=f.getContext("2d");if(null===p)return void console.error("Could not create 2D context for screenshot.");var h=p.createImageData(n.drawingBufferWidth,n.drawingBufferHeight);h.data.set(o),p.putImageData(h,0,0);var m=window.devicePixelRatio,v=this.map.getContainer().querySelector("#legend-canvas");if(null!==v){var g=s-v.height-5,y=this.map.getContainer().querySelector("#legend-header");null!==y&&null!==y.textContent&&(p.fillStyle="rgba(0,0,0,0.6)",p.fillRect(5,g-25*m,v.width,25*m),p.font="".concat(12*m,"px Arial"),p.fillStyle="white",p.textAlign="center",p.fillText(y.textContent,5+v.width/2,g-8*m)),p.drawImage(v,5,g)}var b="".concat(this.screenshotMapName," - ").concat(this.screenshotDate),A=15*m;p.font="".concat(A,"px Arial");var x=p.measureText(b).width;p.fillStyle="rgba(0,0,0,0.6)",p.fillRect(a-x-20,s-1.7*A,x+20,1.7*A),p.fillStyle="white",p.textAlign="left",p.fillText(b,a-x-10,s-8*m),this.loadScreenshotLogoImg().then((function(e){if(void 0!==e){var n=.12*a,r=e.height/e.width*n;p&&p.drawImage(e,a-n-.01*a,.01*s,n,r)}var i=f.toDataURL("image/jpeg",.9),o=t.screenshotMapName.replace(/ - /g,"_").replace(/( |\/)/g,"-")+"_"+t.screenshotDate.replace(/(-|:)/g,""),u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",o),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u)}))}}},{key:"setScreenshotFileName",value:function(e,t){e&&(this.screenshotMapName=e),t&&(this.screenshotDate=t.replace("/","ue:function(e){this.screenshotLogoPath=e}}],n&&jn(t.prototype,n),e}(),Hn=zn,Vn=r(7912),Gn={};Gn.styleTagTransform=ot(),Gn.setAttributes=tt(),Gn.insert=Qe().bind(null,"head"),Gn.domAPI=Ke(),Gn.insertStyleElement=rt(),Ye()(Vn.Z,Gn);var Zn=Vn.Z&&Vn.Z.locals?Vn.Z.locals:void 0;function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qn=function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Xn(this,"isSnackbarOpen",!0),Xn(this,"snackbarWrapper",bt("div",[Zn.snackbarWrapper,Zn.fadingIn,"mbHideTooltip"])),Xn(this,"actionButton",bt("div",Zn.actionButton)),Xn(this,"fadeDuration",300),Xn(this,"close",(function(){n.snackbarWrapper.classList.add(Zn.fadingOut),n.isSnackbarOpen=!1,setTimeout((function(){n.snackbarWrapper.remove()}),n.fadeDuration)})),Xn(this,"isOpen",(function(){return n.isSnackbarOpen})),Xn(this,"getActionButton",(function(){return n.actionButton})),this.container=t.container,t.offset&&(this.snackbarWrapper.style.bottom=t.offset+"px"),null!==this.container){this.container.appendChild(this.snackbarWrapper);var r=bt("div",Zn.content);if(r.innerHTML=t.content,this.snackbarWrapper.appendChild(r),this.actionButton.innerHTML=t.actionLabel?t.actionLabel:"Dismiss",this.snackbarWrapper.appendChild(this.actionButton),void 0!==t.onAction&&void 0!==t.actionLabel?this.actionButton.onclick=function(){void 0!==t.onAction&&t.onAction(),t.dismissable&&n.close()}:void 0!==t.dismissable&&t.dismissable?this.actionButton.onclick=this.clobarWrapper.classList.remove(Zn.fadingIn)}),this.fadeDuration),0!==t.duration){var i=void 0===t.duration?2e3+200*t.content.length:t.duration+this.fadeDuration;setTimeout((function(){n.close()}),i)}}else console.error("Could not find container")},Yn=r(598),Jn={};Jn.styleTagTransform=ot(),Jn.setAttributes=tt(),Jn.insert=Qe().bind(null,"head"),Jn.domAPI=Ke(),Jn.insertStyleElement=rt(),Ye()(Yn.Z,Jn);var Kn=Yn.Z&&Yn.Z.locals?Yn.Z.locals:void 0;function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qn=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$n(this,"thirdPartyContentAreas",{top:bt("div",[Kn.thirdPartyContentArea,Kn.topArea]),aboveTimeSelection:bt("div",Kn.thirdPartyContentArea),main:bt("div",[Kn.thirdPartyContentArea,Kn.mainArea]),controls:bt("div",[Kn.thirdPartyContentArea]),aboveMenu:bt("div",[Kn.thirdPartyContentArea]),belowMenu:bt("div",[Kn.thirdPartyContentArea]),belowOptions:bt("div",[Kn.thirdPartyContentArea])}),$n(this,"add",(function(){n.content.top&&(n.thirdPartyContentAreas.top.appendChild(n.content.top),n.uiContainer.appendChild(n.thirdPartyContentAreas.top),n.setTopAreaTopOffset(),window.addEventListener("resize",n.setTopAreaTopOffset)),n.content.main&&(n.thirdPartyContentAreas.main.appendChild(n.content.main),n.uiContainer.appendChild(n.thirdPartyContentAreanction(){n.updateMainContentAreaHeight()}))),n.content.aboveTimeSelection&&n.thirdPartyContentAreas.aboveTimeSelection.appendChild(n.content.aboveTimeSelection),n.content.aboveMenu&&(n.thirdPartyContentAreas.aboveMenu.appendChild(n.content.aboveMenu),n.uiContainer.appendChild(n.thirdPartyContentAreas.aboveMenu)),n.content.belowMenu&&(n.thirdPartyContentAreas.belowMenu.appendChild(n.content.belowMenu),n.uiContainer.appendChild(n.thirdPartyContentAreas.belowMenu)),n.content.belowOptions&&(n.thirdPartyContentAreas.belowOptions.appendChild(n.content.belowOptions),n.uiContainer.appendChild(n.thirdPartyContentAreas.belowOptions)),n.content.controls&&(n.thirdPartyContentAreas.controls.appendChild(n.content.controls),n.uiContainer.appendChild(n.thirdPartyContentAreas.controls))})),$n(this,"updateMainContentAreaHeight",(function(){var e=0===n.timeSelectionContainer.children.length?10:40,t=n.timeSelectionContainer.getBoundingClientRect().height+e+"px";n.thirdPartyContentAreas.main.style.bottom=t})),$n(this,"setMainAreaLeftOffset",(function(e){n.thirdPartyContentAreas.main.style.left=e})),$n(this,"removeMainAreaLeftOffset",(function(){n.thirdPartyContentAreas.main.style.removeProperty("lehirdPartyContentAreas.main.style.right=tAreas.main.style.removeProperty("left")})),$n(this,"setTopAreaTopOffset",(function(){var e=n.thirdPartyContentAreas.top.getBoundingClientRect().height+30+"px";n.legendsContainer.style.top=e})),$n(this,"setAboveTimeSelectionOffset",(function(e){e.marginLeft&&(n.thirdPartyContentAreas.aboveTimeSelection.style.marginLeft=e.marginLeft),e.marginBottom&&(n.thirdPartyContentAreas.aboveTimeSelection.style.marginBottom=e.marginBottom)})),aboveTimeSelection.style.marginBottom=""})),$n(this,"getAreas",(function(){return n.thirdPartyContentAreas})),this.uiContainer=t.uiContainer,this.content=t.content||{},this.timeSelectionContainer=t.timeSelectionContainer,this.legendsContainer=t.legendsContainer},er=(r(4553),r(1260)),tr={};tr.styleTagTransform=ot(),tr.setAttributes=tt(),tr.insert=Qe().bind(null,"head"),tr.domAPI=Ke(),tr.insertStyleElement=rt(),Ye()(er.Z,tr);var nr=er.Z&&er.Z.locals?er.Z.locals:void 0;function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),rr(this,"timeCategoryElements",[]),rr(this,"setDate",(function(e){var t=o.timeCategories.findIndex((function(t){return t.value===e}));-1!==t?o.setStep(t):console.error('No such time category with valuremoveEventListener("resize",o.onResize)})),rr(this,"setStep",(function(e){var t=o.currentIndex,n=o.timeCategories.length-1;if(o.currentIndex=e<0?n:e,o.currentIndex=e>n?0:o.currentIndex,o.currentIndex!==t){var r=o.timeCategories[o.currentIndex];o.onChange(r.value),o.timeCategoryElements.forEach((function(e){e.classList.remove(nr.active)}));var i=o.timeCategoryElements[o.currentIndex];i.classList.add(nr.active),i.scrollIntoView({behavior:"smooth",block:"nearest"})}})),this.container=t,this.timeCategories=n,this.current=i||n[0],this.onChange=r,this.container.inx((function(e){return i&&e.name===i.name}))||0;var a=bt("div",nr.timeCategories);n.forEach((function(e,t){var n=bt("div",nr.timeCategory);n.innerText=e.name,e.name===o.current.name&&n.classList.add(nr.active),n.onclick=function(e){o.setStep(t)},o.timeCategoryElements.push(n),a.appendChild(n)}));var s=bt("div",nr.controls),u=bt("div",nr.next),c=bt("div",nr.prev);u.onclick=functionk=function(){o.setStep(o.currentIndex-1)},s.appendChild(c),s.appendChild(u);var l=bt("div",nr.wrapper);l.appendChild(a),l.appendChild(s),this.container.appendChild(l),this.onResize=function(){o.timeCategoryElements[o.currentIndex].scrollIntoView({block:"nearest"})},window.addEventListener("resize",this.onResize)};function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r(3689),r(3112),r(4723),r(3123);var ar=function(e,t){var n=new Date(e),r=Math.trunc(t/36e5),i=t%36e5/36e5*60;return n.setUTCHours(n.getUTCHours()+r),n.setUTCMinutes(n.getUTCMinutes()+i),n.toISOString().substring(0,19)+(t>=0?"+":"-")+Math.abs(r).toString().padStart(2,"0")+":"+Math.abs(i).toString().padStart(2,"0")},sr=function(e){var t,n,r=e.match(/\d\d\d\d-\d\d-\d\dT\d\d:\d\d(?::\d\d)?([+-]\d\d:\d\d)/),i=null!==r&&void 0!==r.index?r[1]:"+00:00",o=new Date(null===r?e+i:e),a=i.substrinfuncreturn()}finally{if(s)throw i}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],c=s[1];return{offset:(36e5*Number(u)+6e4*Number(c))*("+"===a?1:-1),timestamp:o.getTime()}},ur=function(e){var t=e.includes("+")||e.includes("-")||e.includes("Z")?e:e+"Z";return new Date(t).toISOString().substring(0,19)+"+00:00"},cr=function(e,t,n){var r,i;if(n){var o=null===(r=n.timesteps)||void 0===r||null===(i=r.find((function(t){return t.value===e})))||void 0===i?void 0:i.timestep;if(o){var a=sr(o).timestamp;return ar(a,1e3*t)}}},lr=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";if(-1!==t.indexOf("Y")&&(t=t.replace("Y",e.getUTCFullYear().toString())),-1!==t.indexOf("n")&&(t=t.replace("n",(e.getUTCMonth()+1).toString())),-1!==t.indexOf("j")&&(t=t.replace("j",e.getUTCDate().toString())),-1!==t.indexOf("m")&&(n=e.getUTCMonth()+1,t=t.replace("m",n<10?"0"+n:n.toString())),-1!==t.indexOf("d")&&(n=e.getUTCDate(),t=t.replace("d",n<10?"0"+n:n.toString())),-1!==t.indexOf("H")&&(n=e.getUTCHours(),t=t.replace("H",n<10?"0"+n:n.toString())),-1!==t.indexOf("i")&&(n=e.getUTCMinutes(),t=t.replace("i",n<10?"0"+n:n.toString())),-1!==t.indexOf("s")&&(n=e.getUTCSeconds(),t=t.replace("s",n<10?"0"+n:n.toString())),-1!==t.indexOf("l")){var i=mr(r,"long");t=t.replace("l",i[e.getUTCDay()])}if(-1!==t.indexOf("D")){var o=mr(r,"short");t=t.replace("D",o[e.getUTCDay()])}return t},dr=function(e,t){if(void 0===t)return e.current;var n=sr(t).timestamp,r=sr(e.first).timestamp,i=sr(e.last).timestamp;return n>r&&n<i?t:e.current},fr={Sun:new Date("2020-01-05"),Mon:new Date("2020-01-06"),Tue:new Date("2020-01-07"),Wed:new Date("2020-01-08"),Thu:new Date("2020-01-09"),Fri:new Date("2020-01-10"),Sat:new Date("2020-01-11")},pr=Object.keys(fr),hr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"short";return new Intl.DateTimeFormat(t,{weekday:n,timeZone:"UTC"}).format(fr[e])},mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",t=arguments.length>1&&void 0!==argumenurn pr.map((function(n){return hr(n,e,t)}))},vr=r(8078),gr={};gr.styleTagTransform=ot(),gr.setAttributes=tt(),gr.insert=Qe().bind(null,"head"),gr.domAPI=Ke(),gr.insertStyleElement=rt(),Ye()(vr.Z,gr);var yr=vr.Z&&vr.Z.locals?vr.Z.locals:void 0;function br(e){var t=this;this.container=e.container,this.dateFormat=void 0!==e.dateFormat?e.dateFormat:"m-d",this.timeZoneOffset=void 0!==e.timeZoneOffset?e.timeZoneOffset:0,this.timeZoneAbbreviation=void 0!==e.timeZoneAbbreviation?e.timeZoneAbbreviation:"",this.initialTime=e.initialTime+this.timeZoneOffset,this.now=void 0!==e.now?e.now-e.now%e.interval+e.interval+this.timeZoneOffset:this.initialTime,this.start=e.start,this.stop=e.stop,this.startDay=e.start-e.start%864e5,this.stopDay=e.stop-e.stop%864e5,this.stepWidth=void 0!==e.interval?e.interval:36e5,this.labelToday=e.labelToday,this.labelTomorrow=e.labelTomorrow,this.playSpeed=void 0!==e.playSpeed?e.playSpeed:1e3,this.timeChangeCallback=e.onChange,this.arrowKeysEnabled=void 0!==e.arrowKeysEnabled&&e.arrowKeysEnabled,this.language=void 0!==e.language?e.language:"en",this.visibleStartDay=this.startDay,this.visibleStopDay=this.stopDay,this.interval=null;var n='<div class="'.concat(yr.timeControl,'">\n        <div class="').concat(yr.timeSliderOuter,'">\n            <div id="timeProgress" class="').concat(yr.timeProgress,'">\n                <span id="timeHour" class="').concat(yr.timeHour,'"></span>\n            </div>\n            <div id="hoverProgress" class="').concat(yr.hoverProgress," ").concat(yr.hide,'">\n                <span id="hoverHour" class="').concat(yr.hoverHour,'"></span>\n            </div>\n            <div id="now" class="').concat(yr.now,'"></div>\n            <div id="timeSlider" class="').concat(yr.timeSlider,'"></div>\n        </div>\n        <div class="').concat(yr.timeElement,'" id="hour_backward">\n            <span class="').concat(yr.glyph," ").concat(yr.backward,'"></span>\n        </div>\n        <div class="').concat(yr.timeElement," ").concat(yr.last,'" id="hour_forward">\n            <span class="').concat(yr.glyph," ").concat(yr.forward,'"></span>\n        </div>\n    </div>');this.container.innerHTML=n;var r=this.container.querySelector("#timeSlider");this.hoverProgess=this.container.querySelector("#hoverProgress"),this.timeHour=this.container.querySelector("#timeHour"),this.timeHourText=document.createTextNode(""),this.timeHour.appendChild(this.timeHourText),this.timeProgress=this.container.querySelector("#timeProgress"),this.hoverHour=this.container.querySelector("#hoverHour"),this.hoverHourText=document.createTextNode(""),this.hoverHour.appendChild(this.hoverHourText),this.nowIndicator=this.container.querySelector("#now");var i=this.now-this.now%864e5,o=i+864e5;this.setTodayTomorrowTime(i,o),this.eventMoveBind=this.eventMouseMove.bind(this),r.addEventListener("mousemove",this.eventMoveBind,!1),r.addEventListener("mouseout",this.eventMouseOut.bind(this),!1),r.addEventListener("click",this.eventMouseClick.bind(this),!1),r.addEventListener("touchstart",this.eventMoveBind,!1),r.addEventListener("touchmove",this.eventMoveBind,!1),r.addEventListener("touchend",this.eventTimeBubbleMouseUp.bind(this),!1),this.timeSlider=r,this.timeSliderBoundingLeft=0,this.timeSliderBoundingRight=0,this.dragOffset=0,this.eventTimeBubbleMouseUpBind=this.eventTimeBubbleMouseUp.bind(this),this.timeHour.addEventListener("mousedown",this.eventTimeBubbleMouseDown.bind(this),!1),this.eventResize(),this.eventResizeBind=this.eventResize.bind(this),window.addEventListener("resize",this.eventResizeBind,!1),this.container.querySelector("#hour_backward").addEventListener("click",this.prev.bind(this),!1),this.container.querySelector("#hour_forward").addEventListener("click",this.next.bind(this)?t.next():"ArrowLeft"===e.code&&t.prev()})),this.generateStartStop(this.startDay,this.stopDay),this.setTime(this.initialTime,!1),this.setNowIndicator(),this.setNowIndicatorBind=this.setNowIndicator.bind(this),window.addEventListener("resize",this.setNowIndicatorBind,!1),this.adaptNumberOfDaysToWidth(),this.adaptNumberOfDaysToWidthBind=this.adaptNumberOfDaysToWidth.bind(this),window.addEventListener("resize",this.adaptNumb){this.setTime(thi){this.setTime(this.time-this.stepimestampTomorrow=t,this.timestampToday=e},br.prototype.eventResize=function(){var e=this.timeSlider.getBoundingClientRect(),t=this.timeSliderBoundingRight-this.timeSliderBoundingLeft!=e.right-e.left;if(this.timeSliderBoundingLeft=e.left,this.timeSliderBoundingRight=e.right,t){var n=this.time;this.time=null,this.setTime(n,!1)}},br.prototype.generateStartStop=function(e,t){for(var n=this.timeSlider,r=this.timestampToday,i=this.timestampTomorrow,o=this.dateFormat;n.firstChild;)n.removeChild(n.firstChild);var a,s,u,c,l=document.createDocumentFragment();for(a=e;a<=t;a+=864e5)u=new Date(a),c=r===a&&void 0!==this.labelToday?this.labelToday:i===a&&void 0!==this.labelTomorrow?this.labelTomorrow:lr(u,o,this.language),(s=document.createElement("div")).appendChild(document.createTextNode(c)),s.className=yr.timeElement,s.datetime=a,l.appendChild(s);n.appendChild(l)},br.prototype.setTime=function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.timeSlider.children,i=r.length;if((e+=(this.stepWidth-(e-this.timeZoneOffset-this.start)%this.stepWidth)%this.stepWidth)<this.start+this.timeZoneOffset)this.setTime(this.start+this.timeZoneOffset);else if(e>this.stop+this.timeZoneOffset)this.setTime(this.stop+this.timeZoneOffset);else{var o=this.time;n&&this.time!==e&&this.timeChangeCallback(e-this.timeZoneOffset,this.timeZoneOffset,o,void 0),this.time=e,this.time>=this.visibleStopDay+864e5&&this.visibleStopDay<this.stopDay&&(this.visibleStartDay+=864e5,this.visibleStopDay+=864e5,this.generateStartStop(this.visibleStartDay,this.visibleStopDay)),this.time<=this.visibleStartDay&&this.visibleStartDay>this.startDay&&(this.visibleStartDay-=864e5,this.visibleStopDay-=864e5,this.generateStartStop(this.visibleStartDay,this.visibleStopDay)),this.visibleStopDay<this.stopDay?this.timeSlider.classList.add(yr.inidcateFutureSteps):this.timeSlider.classList.remove(yr.inidcateFutureSteps),this.visibleStartDay>this.startDay?this.timeSlider.classList.add(yr.inidcatePastSteps):this.timeSlider.classList.remove(yr.inidcatePastSteps);for(var a=0;a<i;++a)if((t=r[a]).datetime+864e5>e){var s=(e-t.datetime)/36e5;this.timeHourText.textContent=(s<10?"0":"")+s.toFixed(0)+":00"+" ".concat(this.timeZoneAbbreviation);var u=t.getBoundingClientRect().left+s/24*t.offsetWidth-this.timeSliderBoundingLeft;this.timeProgress.style.width=u.toFixed(1)+"px";break}}},br.prototype.setNowIndicator=function(){for(var e,t=this.timeSlider.children,n=t.length,r=0;r<n;++r)if((e=t[r]).datetime+864e5>this.now){var i=(this.now-e.datetime)/36e5,o=e.getBoundingClientRect().left+i/24*e.offsetWidth-this.timeSliderBoundingLeft;this.nowIndicator.style.width=o.toFixed(1)+"px";break}},br.prototype.eventTimeBubbleMouseDown=function(e){window.addEventListener("mouseup",this.eventTimeBubbleMouseUpBind,!1),window.addEventListener("mousemove",this.eventMoveBind,!1),this.windowEventListeners.push(this.eve),this.dragOffset=e.layerX-this.timeHour.offsetWidth/2,this.timeHour.classList.add(yr.hide),this.hoverProgess.classList.remove(yr.hide)},br.prototype.eventTimeBubbleMouseUp=function(e){window.removeEventListener("mouseup",this.eventTimeBubbleMouseUpBind,!1),window.removeEventListener("mousemove",this.eventMoveBind,!1),this.timeProgress.classList.add(yr.notransition),this.timeHour.classList.remove(yr.hide),this.hoverProgess.classList.add(yr.hide),this.eventMouseClick(e),this.timeProgress.classList.remove(yr.notransition),this.dragOffset=0},br.prototype.eventMouseClick=function(e){var t,n;e.preventDefault();var r=(e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0].pageX:e.pageX)-this.dragOffset;r=Math.max(this.timeSliderBoundingLeft,Math.min(r,this.timeSliderBoundingRight-1));for(var i,o=this.timeSlider.children,a=o.length,s=0;s<a;++s)if((i=o[s]).getBoundingClientRect().left+i.offsetWidth>r){t=Math.floor((r-i.getBoundingClientRect().left)/i.offsetWidth*24),n=i.datetime,this.timeProgress.style.width=(r-this.timeSliderBoundingLeft).toFixed(1)+"px",this.timeHourText.textContent=(t<10?"0":"")+t.toFixed(0)+":00",this.setTime(n+36e5*t);break}this.timeHour.classList.remove(yr.hide),this.hoverProgess.classList.add(yr.hide)},br.prototype.eventMouseOut=function(e){this.hoverProgess.classList.add(yr.hide),this.container.querySelector("#timeHour").classList.remove(yr.hide)},br.prototype.eventMouseMove=function(e){this.timeHour.classList.add(yr.hide);for(var t,n,r=e.touches&&e.touches.length>0?e.touches[0].pageX:e.pageX,i=r-this.dragOffset,o=this.timeSlider.children,a=o.length,s=0;s<a;++s)if(t=o[s],r>this.timeSliderBoundingLeft&&t.getBoundingClientRect().left+t.offsetWidth>i){var u=this.hoverProgess;u.classList.remove(yr.hide),n=Math.floor((i-t.getBoundingClientRect().left)/t.offsetWidth*24);var c=new Date(this.start).getUTCHours(),l=new Date(this.stop).getUTCHours(),d=(this.visibleStopDay+864e5-this.visibleStartDay)/36e5/24;if(this.stopDay===this.visibleStopDay&&d-1===s&&n>=l){this.hoverHourText.textContent=(l<10?"0":"")+l+":00";var f=t.getBoundingClientRect().left-this.timeSliderBoundingLeft,p=t.clientWidth/24*l;u.style.width=(f+p).toFixed(1)+"px"}else if(this.startDay===this.visibleStartDay&&0===s&&n<c){this.hoverHourText.textContent=(c<10?"0":"")+c+":00";var h=t.getBoundingClientRect().left-this.timeSliderBoundingLeft,m=t.clientWidth/24*c;u.style.width=(h+m).toFixed(1)+"px"}else this.hoverHourText.textContent=(n<10?"0":"")+n+":00",u.style.width=(r-this.timeSliderBoundingLeft).toFixed(1)+"px";break}},br.prototype.togglePlay=function(){var e=this;null!==this.interval?(window.clearInterval(this.interval),this.interval=null):(this.setTime(this.timerval((function(){e.setTime(e.time+36e5)}),this.playSpeed))},br.prototype.adaptNumberOfDaysToWidth=function(){var e=864e5;if(this.container.scrollWidth>this.container.clientWidth)for(;this.container.scrollWidth>this.container.clientWidth&&!(this.visibleStopDay-this.startDay<2*e);)this.visibleStopDay-=e,this.generateStartStop(this.startDay,this.visibleStopDay);else for(;this.container.scrollWidth<=this.container.clientWidth&&!(this.visibleStopDay>=this.stopDay);)if(this.visibleStopDay+=e,this.generateStartStop(this.startDay,this.visibleStopDay),this.container.scrollWidth>this.container.clientWidth){this.visibleStopDay-=e,this.generateStartStop(this.startDay,this.visibleStopDay);break}this.eventResize(),this.setTime(this.time)},br.prototype.setDate=function(e){this.setTime(e+tentListener("resize",this.eventMoveBind)};var Ar=br,xr=r(9348),wr={};wr.styleTagTransform=ot(),wr.setAttributes=tt(),wr.insert=Qe().bind(null,"head"),wr.domAPI=Ke(),wr.insertStyleElement=rt(),Ye()(xr.Z,wr);var Dr=xr.Z&&xr.Z.locals?xr.Z.locals:void 0;function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cr=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Sr(this,"wrapper",bt("div",Dr.wrapper)),Sr(this,"timeStepsContainer",bt("div",Dr.timeSteps)),Sr(this,"timeIndicator",bt("div",[Dr.timeStep,Dr.timeIndicator])),Sr(this,"timeSliderContainer",bt("div",Dr.timeSliderContainer)),Sr(this,"timeSlider",document.createElement("input")),Sr(this,"controlsContainer",bt("div",Dr.controls)),Sr(this,"rangesContainer",bt("div",Dr.timeRanges)),Sr(this,"timeStepElements",[]),Sr(this,"isPlaying",!1),Sr(this,"timeStepMultiplier",15),Sr(this,"setPlaying",(function(e){var t=n.controlsContainer.querySelector("."+Dr.stop);e?(n.timeStepsContainer.classList.add(Dr.playing),n.controlsContainer.classList.add(Dr.playing),n.rangesContainer.classList.add(Dr.playing),n.timeStepsContainer.remove(),n.timeIndicator.innerHTML=n.getCurrentDateFormatted(),n.wrapper.appendChild(n.timeSliderContainer),n.wrapper.appendChild(n.timeIndicator),t.classList.remove(Dr.hidden)):(n.timeStepsContainer.classList.remove(Dr.playing),n.controlsContainer.classList.remove(Dr.playing),n.rangesContainer.classList.remove(Dr.playing),n.timeSliderContainer.remove(),n.timeIndicator.remove(),n.wrapper.appendChild(n.timeStepsContainer),n.controlsContainer.classList.remove(Dr.scrubbingMode),t.classList.add(Dr.hidden)),n.isPlaying=e})),Sr(this,"getDate",(function(){var e=n.time.timesteps.find((function(e){return n.currentTimeStep===e.value}));return null==e?void 0:e.timestep})),Sr(this,"getRange",(function(){return n.currentRange})),Sr(this,"setDate",(function(e){var t=ur(e),r=n.time.timesteps.find((function(e){return e.timestep===t}));if(void 0===r)throw new Error("Invalid or unavailable date: ".concat(r));n.setStep(r.value,n.onChange)})),Sr(this,"getTimeStep",(function(){return n.currentTimeStep})),Sr(this,"setIndex",(function(e){n.timeSlider.value=e.toString();var t=Math.floor(e/n.timeStepMultiplier)*n.timeStepMultiplier,r=(n.currentRange?n.time.timesteps.length-n.currentRange.numsteps:0)+t/n.timeStepMultiplier,i=n.time.timesteps[r],o=sr(i.timestep).timestamp+6e4*(e-t)-6e4,a=new Date(o+n.timezoneOffset),s=lr(a,n.time.format);n.timeIndicator.innerHTML=s,r>=n.time.current?n.wrapper.classList.add(Dr.forecast):n.wrapper.classList.remove(Dr.forecast),e%n.timeStepMultiplier==0&&n.setStep(i.value)})),Sr(this,"setLoading",(function(e){n.timeSlider.disabled=e,n.controlsContainer.style.pointerEvents=e?"none":"initial"})),Sr(this,"createRangeSelection",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.rangesContainer;return e.forEach((function(e,r){var i=bt("div",Dr.timeRange);i.innerText=e.label,i.onclick=function(){if(!n.isPlaying){e.isRestricted&&!n.canUseRestricted?(n.onRestricted(!0),n.wrapper.classList.add(Dr.disabled)):(n.onRestricted(!1),n.wrapper.classList.remove(Dr.disabled));var r=n.currentTimeStep;n.createSteps(e.numsteps),n.currentRange=e,n.onRangeChange(e);var o=n.getCurrentDateElement(r);if(void 0!==o)n.highlightStep(o,!1);else{var a=n.timeStepElements[0].dataset.date;a&&n.setStep(a,n.onChange)}Array.from(t.children).map((function(e){e.classList.remove(Dr.active)})),i.classList.add(Dr.active),n.timeSlider.max=((e.numsteps-1)*n.timeStepMultiplier).toString();var s=n.time.timesteps.findIndex((function(e){return e.value===n.currentTimeStep}));n.timeSlider.value=(s*n.timeStepMultiplier).toString()||n.timeSlider.max,n.timeSlider.style.width="".concat(n.timeSlider.max,"px")}},0===r&&i.classList.add(Dr.active),t.appendChild(i)})),t})),Sr(this,"createTimeSlider",(function(){var e=(n.currentRange?n.currentRange.numsteps-1:n.time.timesteps.length-1)*n.timeStepMultiplier;n.timeSlider.classList.add(Dr.timeSlider),n.timeSlider.style.width="".concat(e,"px"),n.timeSlider.type="range",n.timeSlider.min="0",n.timeSlider.max=e.toString(),n.timeSlider.value=(e*n.timeStepMultiplier).toString(),n.timeSliderContainer.appendChild(n.timeSlider),n.timeSlider.addEventListener("mousedown",(function(e){n.onDragStart&&n.onDragStart()})),n.nction(e){n.onDragStart&&n.onDragStart()})),n.timeSlider.addEventListener("mouseup",(function(e){n.onDragEnd&&n.onDragEnd(),n.enableScrubbingMode()})),d&&n.onDragEnd(),n.enableScrubbingMode()})),n.timeSlider.addEventListener("input",(function(e){if(null!==e.target){var t=parseInt(e.target.value,void 0);n.onChangeIndex(t)}}))})),Sr(this,"enableScrubbingMode",(function(){n.controlsContainer.classList.remove(Dr.playing),n.controlsContainer.classList.add(Dr.scrubbingMode),n.isPlaying=!1})),Sr(this,"createSteps",(function(e){e=e||n.time.timesteps.length,n.timeStepElements=[],n.timeStepsContainer.innerText="",n.time.timesteps.slice(n.time.timesteps.length-e).forEach((function(e){var t=bt("div",Dr.timeStep),r=sr(e.timestep).timestamp,i=new Date(r+n.timezoneOffset);t.innerText=lr(i,n.time.format),t.dataset.date=e.value,e.value===n.currentTimeSisPlaying||n.setStep(e.value,n.onChange)},n.timeStepElements.push(t),n.timeStepsContainer.appendChild(t)}))})),Sr(this,"next",(function(){if(!n.isPlaying){var e=n.timeStepElements.findIndex((function(e){return e.dataset.date===n.currentTimeStep})),t=e>=n.timeStepElements.length-1?n.timeStepElements[0].dataset.date:n.timeStepElements[e+1].dataset.date;void 0!==t&&n.setStep(t,n.onChange)}})),Sr(this,"prev",(function(){if(!n.isPlaying){var e=n.timeStepElements.findIndex((function(e){return e.dataset.date===n.currentTimeStep})),t=e<=0?n.timeStepElements[n.timeStepElements.length-1].dataset.date:n.timeStepElements[e-1].dataset.date;void 0!==t&&n.setStep(t,n.onChange)}})),Sr(this,"togglePlay",(function(){n.isPlaying?(n.onStop(),n.isPlaying=!1,n.enableScrubbingMode()):(n.onPlay&&n.onPlay(),n.setPlaying(!0))})),Sr(this,"setStep",(function(e,t){var r=n.currentTimeStep,i=n.timeStepElements.findIndex((function(t){return t.dataset.date===e})),o=n.timeStepElements[i];if(void 0!==o){var a=o.dataset.date;void 0!==a&&e!==r&&(n.currentTimeStep=a,n.timeIndicator.innerHTML=n.getCurrentDateFormatted(),t&&t(e,null),n.highlightStep(o),n.timeSlider.value=(i*n.timeStepMultiplier).toString())}else console.error('No such time step with value "'.concat(e,'"'))})),Sr(this,"highlightStep",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])|unction(e){e.classList.remove(Dr.active)})),e.classList.add(Dr.active),e.scrollIntoView({behavior:t?"smooth":"auto",block:"nearefunction(t){return t.dataset.date===e}))})),Sr(this,"getCurrentDateFormatted",(function(){var e=n.time.timesteps.find((function(e){return e.value===n.currentTimeStep}))||n.time.timesteps[0],t=sr(e.timestep),r=new Date(t.timestamp+n.timezoneOffset);return lr(r,n.time.format)})),this.container=t.container,this.time=t.time,this.timezoneOffset=t.timezoneOffset,this.onChange=t.onChange,this.onChangeIndex=t.onChangeIndex,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRangeChange=t.onRangeChange,this.onDragStart=t.onDragStart,this.onDragEnd=t.onDragEnd,this.currentRange=this.time.ranges?this.time.ranges[0]:void 0,this.currentTimeStep=t.currentTimeStep.value,this.canUseRestricted=t.canUseRestricted,this.onRestricted=t.onRestricted,this.showTimeRanges=t.showTimeRanges,this.thirdPartyContentAreas=t.thirdPartyContentAreas,this.container.innerText="",this.showTimeRanges||(this.rangesContainer.style.display="None");var r=bt("div",Dr.thirdPartyContentAndRangesContainer);if(this.container.appendChild(r),this.time.ranges){var i=this.createRangeSelection(this.time.ranges);r.appendChild(i)}var o=this.thirdPartyContentAreas.getAreas().aboveTimeSelection;o&&r.appendChild(o),this.currentRange?this.createSteps(this.currentRange.numsteps):this.createSteps();var a=bt("div",Dr.prev);a.onclick=this.prev,this.controlsContainer.appendChild(a);var s=bt("div",Dr.next);if(s.onclick=this.next,this.controlsContainer.appendChild(s),this.onPlay){var u=bt("div",Dr.play);u.onclick=this.togglePlay,this.controlsContainer.appendChild(u);var k=function(){n.onStop(),n.setPlaying(!1)},this.controlsContainer.appendChild(c)}this.createTimeSlider(),this.wrapper.appendChild(this.timeStepsContainer),this.wrapper.appendChild(this.controlsContainer),this.container.appendChild(this.weturn e.dataset.date===n.currentTimeStep}));this.timeStepsContainer.scrollLeft=0;var d=null==l?void 0:l.getBoundingClientRect(),f=d?d.left-d.width/2:this.timeStepsContainer.scrollWidth;this.timeStepsContainer.scrollLeft=f};function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];retuturn||n.return()}finally{if(s)throw o}}}}(Object.getOwnPropertyNames(t));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=t[i];t[i]=o&&"object"===Tr(o)?e(o):o}}catch(e){r.e(e)}finally{r.f()}return Object.freeze(t)},Lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAABA9JREFUeJztwTEBAAAAwqD1T20Hb6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOA3AvAAAdln8YgAAAAASUVORK5CYII=",Pr=function(e)es("{timestamp}")||e.includes("{level}")})).length>0},Or=function(e,t){var n=t.domain,r=t.overlayDomains,i=t.level,o=t.timestamp,a=t.apiKey,s=t.lastUpdate,u="string"==typeof i?i:void 0!==i?i.id:void 0,c=n,l=u;return void 0!==e.tiles&&(e.tiles=e.tiles.map((function(e){if(void 0!==r){var t=r.find((function(e){return e.id===n}))||r[0];c=t.id;var i=t.levels.find((function(e){return e.id===u}))||t.levels[0];l=i.id}return void 0!==c&&(e=e.replace(/{domain}/g,c)),void 0!==l&&(e=e.replace(/{level}/g,l)),void 0!==o&&(e=e.replace(/{timestamp}/g,o)),void 0===a||e.includes("base64")||(e=(e=e.concat(e.includes("?")?"&":"?")).concat("apikey=".concat(a))),void 0===s||e.includes("base64")||(e=(e=e.concat(e.includes("?")?"&":"?")).concat("lastUpdate=".concat(encodeURIComponent(s)))),e}))),e},Fr=function(){var e=window.location.hash.match(/map=[^&]*/),t=null!==e?decodeURIComponent(e[0]).split("~"):null;return null!==t?{mapId:t[0].replace("map=",""),variantId:t[1],domainId:t[2],levelI,t){return new URLSearchParams(t).get(e)},Mr=r(1834),Ir={};Ir.styleTagTransform=ot(),Ir.setAttributes=tt(),Ir.insert=Qe().bind(null,"head"),Ir.domAPI=Ke(),Ir.insertStyleElement=rt(),Ye()(Mr.Z,Ir);var kr=Mr.Z&&Mr.Z.locals?Mr.Z.locals:void 0;function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.g){jr(o,r,i,a,s,"throw",e)}a(void 0)}))}}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vr=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Hr(this,"timeSelectionContainer",bt("div",[kr.timeSelectionContainer,"mbHideTooltip"])),Hr(this,"timeSelectionWrapper",bt("div",[kr.timeSelectionWrapper])),Hr(this,"legendsContainer",bt("div",["mbHideTooltip","legendsWrapper"])),Hr(this,"modalContainer",bt("div",kr.modalContainer)),Hr(this,"loadingTimer",0),Hr(this,"loadingTimerInterval",0),Hr(this,"autoplayStarted",!1),Hr(this,"isFlowAnimation",!1),Hr(this,"uiContainer",document.createElement("div")),Hr(this,"isLoaded",!1),Hr(this,"abortId",0),Hr(this,"getMenu",(function(){return r.menu})),Hr(this,"getDate",(function(){if(r.time&&"regular"===r.time.type)return void 0!==r.currentTime?ur(r.currentTime):void 0;if(r.time&&"categories"===r.time.type)return r.currentTimeCategory;if(r.time&&"timesteps"===r.time.type&&r.timeSelection){var e=r.timeSelection.getDate();return void 0!==e?ur(e):void 0}})),Hr(this,"getTimeInfo",(function(){return r.time})),Hr(this,"getInventory",(function(){return r.inventory})),Hr(this,"setDate",(function(e){return r.timeSelection&&"setDate"in r.timeSelection&&r.timeSelection.setDate(e)})),Hr(this,"enableTooltip",(function(){return r.dynamicLayers&&r.dynamicLayers.enableTooltip()})),Hr(this,"disableTooltip",(function(){return r.dynamicLayers&&r.dynamicLayers.disableTooltip()})),Hr(this,"getTooltipContent",(function(e){return r.dynamicLayers&&r.dynamicLayers.getTooltipContent(e)})),Hr(this,"enableTimeSelection",(function(){return r.timeSelectionContainer.classList.remove(kr.permanentlyHiner.classList.add(kr.permanentlyHidden)})),Hr(this,"initUi",(function(){var e=r.mapboxMap.getContainer();r.timeSelectionWrapper.appendChild(r.timeSelectionContainer),r.timeSelectionWrapper.id="timeSelectionWrapper",e.appendChild(r.uiContainer),r.uiContainer.classList.add(kr.maps),r.uiContainer.appendChild(r.timeSelectionWrapper),r.uiContainer.appendChild(r.legendsContainer),"rtl"===r.direction&&r.uiContainer.classList.add("mb-rtl"),r.modalContainer.classList.add("mb-modalContainer"),e.appendChild(r.modalContainer),e.appendChild(r.modalContainer),e.clientWidth<800&&(e.classList.add("mb-phone"),r.showSidebar&&r.timeSelectionWrapper.classList.add(kr.hidden)),window.addEventListener("resize",(function(){e.clientWidth<800?e.classList.add("mb-phone"):e.classList.remove("mb-phone")})),r.thirdPartyContentAreas.add(),r.showSidebar||r.thirdPartyContentAreas.setMainAreaRightOffset("20px"),gt(r.inventoryUrl).then((function(e){r.inventory=_r(e),r.createMenu(r.inventory)}))})),Hr(this,"openModal",(function(e){if(void 0!==e.content)return new vn(e,r.modalContainer);console.error("Cannot create modal dialogue without content.")})),Hr(this,"onMenuChange",(function(e,t,n,i,o,a){var s,u,c,l,d,f=Math.random();if(r.abortId=f,r.hash){var p=function(e,t,n,r,i){var o=void 0!==i&&i.length>0?i.map((function(e){return e.id})):"none";return"map="+encodeURIComponent("".concat(e.id,"~").concat(t.id,"~").concat(n,"~").concat(r,"~").concat(o))}(e,t,n,i,o);s=p,u=null!==(d=window.location.hash.match(/map=[^&]*/))?d[0]:void 0,c=window.location.href.includes("#"),l=void 0===u?window.location.href+(c?"&":"#")+s:window.location.href.replace(u,s),history.replaceState(window.history.state,"",l)}r.sourceFlow=void 0;var h=function(e){var t,n={tiles:[Lr],type:"raster",name:"sourceFlow",maxzoom:6,minzoom:0,tileSize:512};return void 0===e||void 0===e.overlays?n:(e.overlays.forEach((function(e){var n=function(e){var t=e.sources.filter((function(e){return"sourceFlow"===e.name}))[0];return void 0===t?t:JSON.parse(JSON.stringify(t))}(e);void 0!==n&&(t=n)})),t||n)}(r.inventory);r.particleLayer&&(r.particleLayer.disable(),r.particleLayer.removeCustomLayer()),r.animationLayer&&(r.animationLayer.disable(),r.animationLayer.setTileUrl("".concat(t.sources[0].tiles[0],"?apikey=").concat(r.apiKey))),r.dynamicLayers&&r.dynamicLayers.destroy();var m="".concat(e.baseStyle).concat(e.baseStyle.includes("?")?"&":"?","apikey=").concat(r.apiKey);if(r.mapboxMap.setStyle(m,{diff:!0}),r.legend&&r.legend.destroy(),"legend"in t&&r.showLegend?(r.legend=new Bt(r.legendsContainer,t.legend,r.onUnitChange,r.inventory?r.inventory.colorTables:void 0,r.inventory&&r.inventory.units?r.inventory.units:void 0,r.units?r.units:void 0,r.unitSelector),r.thirdPartyContentAreas.removeMainAreaLeftOffset()):r.thirdPartyContentAreas.setMainAreaLeftOffset("20px"),!("time"in t)||null===t.time)return void 0!==r.menu&&r.menu.disableOverlaySelection(),r.removeTimeSelection(),void r.thirdPartyContentAreas.updateMainContentAreaHeight();r.showRestrictedNotice(!!e.isRestricted&&!r.canUseRestricted),r.mapboxMap.once("idle",Wr(regeneratorRuntime.mark((function s(){var u,c,l,d,p,m,v,g,y,b,A,x,w,D,S,C,T;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(r.abortId===f){s.next=2;break}return s.abrupt("return");case 2:if(c="auto"===n?e.domains[0].domains[0].id:n,void 0!==(l="historic"in t?Nr({},t.historic):void 0)&&(r.historyStartDate&&r.historyStartDate>=l.start&&r.historyStartDate<=l.end?l.start=r.historyStartDate:r.historyStartDate=l.start),s.t0=a,s.t0){s.next=10;break}return s.next=9,yt(t.time,r.apiKey,c,l);case 9:s.t0=s.sent;case 10:r.time=s.t0,r.time.current||(r.time.current=r.time.first),void 0!==r.time.utcOffsetInSeconds&&(r.timezoneOffsetInSeconds=r.time.utcOffsetInSeconds),r.animationLayer&&"timesteps"===r.time.type&&r.animationLayer.setTimes(r.time),void 0!==r.inventory&&r.inventory.overlays.filter((function(e){return!(e.sources.filter(Pr).length>0||e.selectable)})).filter((function(e){return e.domains.reduce((function(e,t){return[].concat(function(e){if(Array.isArray(e))return Rr(e)}(n=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t.id]);var n}),[]).includes(c)})).forEach((function(e){e.sources.forEach((function(t){var n=JSON.parse(JSON.stringify(t));Or(n,{domain:c,overlayDomains:e.domains,apiKey:r.apiKey}),r.mapboxMapr.mapboxMap.addLayer(e,e.addLayerBefore)}))})),void 0!==t.images&&(null===(u=t.images)||void 0===u?void 0:u.length)>0&&(null===(d=t.images)||void 0===d||d.forEach((function(e){r.mapboxMap.loadImage(e.url,(function(t,n){if(t)throw t;r.mapboxMap.hasImage(e.name)||r.mapboxMap.addImage(e.name,n,e.parameters)}))}))),"regular"===r.time.type&&(r.currentTime=dr(r.time,r.currentTime)),"categories"===r.time.type&&(r.cuy&&e.value===r.currentTimeCategory.value}))||r.time.categories[0]),p=function(){if("regular"===r.time.type)return r.currentTime||r.time.current;if("categories"===r.time.type)return r.currentTimeCategory?r.currentTimeCategory.value:r.time.categories[0].value;var e="number"==typeof r.time.current?r.time.current:r.time.timesteps.length-1;return r.time.timesteps[e].value}(),m=sr(p),v=m.timestamp,g="regular"===r.time.type?ar(v,1e3*r.timezoneOffsetInSeconds):"categories"===r.time.type?r.currentTimeCategory?r.currentTimeCategory.value:r.time.categories[0].value:p,y=JSON.parse(JSON.stringify(t.sources)),b=y.filter((function(e){return"sourceFlow"!==e.name})).map((function(e){return Or(e,{domain:c,level:i,apiKey:r.apiKey,lastUpdate:r.time?r.time.lastUpdate:void 0})})),A=t.layers,void 0!==o&&o.length>0&&o.filter((function(e){return!t.defaultOverlays||!t.defaultOverlays.includes(e.id)})).filter((function(e){return"windAnimationOverlay"!==e.id})).forEach((function(e){var t=JSON.parse(JSON.stringify(e.sources));(t=t.map((function(t){return Or(t,{domain:c,overlayDomains:e.domains,level:i,apiKey:r.apiKey,lastUpdate:r.time?r.time.lastUpdate:void 0})}))).forEach((function(e){e.isOverlay=!0})),b=b.concat(t),A=A.concat(e.layers)})),void 0!==r.menu&&r.menu.setDefaultOverlays([]),void 0!==t.defaultOverlays&&t.defaultOverlays.length>0&&rerlays&&t.n(e){return"windAnimationOverlay"!==e.id})).forEach((function(e){var t=JSON.parse(JSON.stringify(e.sources));(t=t.map((function(t){return Or(t,{domain:c,overlayDomains:e.domains,level:i,apiKey:r.apiKey,lastUpdate:r.tim}))).forEach((function(e){e.isOverlay=!0})),b=b.concat(t),A=A.concat(e.layers)})),void 0!==r.menu&&r.menu.setDefaultOverlays(t.defaultOverlays)),r.dynamicLayers=new vt({colorTables:r.inventory.colorTables,domain:c,initialDate:g,layers:A,level:i,mapboxMap:r.mapboxMap,onLoading:r.setLoading,sources:b,timeDefinition:r.time}),e.isRestricted&&!r.canUseRestricted?(r.removeTimeSelection(),r.thirdPartyContentAreas.updateMainContentAreaHeight()):(r.initTimeSlider(r.time),r.thirdPartyContentAreas.updateMainContentAreaHeight()),r.isFlowAnimation=!(!o||!o.find((function(e){return"windAnimationOverlay"===e.id})))||void 0!==t.defaultOverlays&&t.defaultOverlays.includes("windAnimationOverlay"),r.isFlowAnimation||(r.particleLayer&&r.particleLayer.disable(),h&&h.tiles&&(h.tiles[0]=Lr)),r.sourceFlow=JSON.parse(JSON.stringify(h)),x=r.inventory&&r.inventory.overlays.find((function(e){return"windAnimationOverlay"===e.id})),r.isFlowAnimation&&void 0!==h&&(h=Or(h,{domain:c,overlayDomains:x?x.domains:void 0,timestamp:g.replace("/","T"),level:r.menu&&r.menu.getLevel(),apiKey:r.apiKey,lastUpdate:r.time.lastUpdate})),void 0===r.mapboxMap.getSource("sourceFlow")&&void 0!==h&&r.mapboxMap.addSource(h.name,h),r.isFlowAnimation&&void 0!==h&&(r.mapboxMap.getSource("sourceFlow").tiles=Or(h,{domain:c,overlayDomains:x?x.domains:void 0,timestamp:g.replace("/","T"),level:r.menu&&r.menu.getLevel(),apiKey:r.apiKey,lastUpdate:r.time.lastUpdate}).tiles,r.particleLayer&&r.particleLayer.triggerRepaint()),w=r.menu&&r.menu.getDomain().levels[0]&&i===r.menu.getDomain().levels[0].id&&"coldwarm"===t.id,void 0===r.particleLayer&&void 0!==h&&(r.particleLayer=new Hn(r.mapboxMap),r.particleLayer.setColorScheme(w?1:0),r.particleLayer.particleOpacity=1,r.particleLayer.particleLayerActive=!1,r.particleLayer.onError=function(e){return new qn({container:r.modalContainer,content:"Cannot display wind animation: ".concat(e.message.slice(0,100)),dismissable:!0})}),r.particleLayer&&(r.particleLayer.addCustomLayer(),S="".concat(e.name)+(t.name?" ".concat(t.name):"")+("none"!==i&&r.menu?" - ".concat(r.menu.getLevel().name):"")+("none"!==n&&r.menu?" - ".concat(r.menu.getDomain().name):""),C="timesteps"===(null===(D=r.time)||void 0===D?void 0:D.type)?cr(g,r.timezoneOffsetInSeconds,r.time):g,r.particleLayer.setScreenshotFileName(S,"".concat(C)),r.isFlowAnimation&&(r.particleLayer.setColorScheme(w?1:0),r.particleLayer.enable())),null===r.initialMaxBounds&&(T=t.sources[0].bounds,r.mapboxMap.setMaxBounds(T)),r.isLoaded||r.mapboxMap.once("idle",(function(){r.fireEvent("load",{}),r.isLoaded=!0})),void 0===a&&r.fireEvent("menuchange",{map:r.menu&&r.menu.getMap(),variant:r.menu&&r.menu.getVariant(),domain:r.menu&&r.menu.getDomain(),level:r.menu&&r.menu.getLevel(),overlays:r.menu&&r.menu.getOverlays()});case 42:case"end":return s.stop()}}),s)}))))})),Hr(this,"initTimeSlider",(function(e){var t,n;if(r.removeTimeSelection(),"regular"===e.type)r.thirdPartyContentAreas.content.aboveTimeSelection&&(r.uiContainer.clientWidth<800?r.thirdPartyContentAreas.setAboveTimeSelectionOffset({marginLeft:"35px",marginBottom:"25px"}):r.thirdPartyContentAreas.setAboveTimeSelectionOffset({marginBottom:"27px"})),r.timeSelection=new Ar({container:r.timeSelectionContainer,dateFormat:"D j",initialTime:sr(r.currentTime||e.current).timestamp,interval:1e3*e.interval,now:Date.now(),onChange:r.onTimesliderChange,playSpeed:1e3,start:sr(e.first).timestamp,stop:sr(e.last).timestamp,timeZoneAbbreviation:r.timezoneAbbrev,timeZoneOffset:1e3*r.timezoneOffsetInSeconds,arrowKeys:r.arrowKeysEnabled,language:r.language});else if("categories"===e.type)r.thirdPartyContentAreas.content.aboveTimeSelection&&(r.uiContainer.clientWidth<800?r.thirdPartyContentAreas.setAboveTimeSelectionOffset({marginLeft:"35px",marginBottom:"-10px"}):r.thirdPartyContentAreas.setAboveTimeSelectionOffset({marginBottom:"0px"})),r.timeSelection=new ir(r.timeSelectionContainer,e.categories,r.onTimeChange,r.currentTimeCategory);else if("timesteps"===e.type){var i;r.thirdPartyContentAreas.content.aboveTimeSelection&&(r.uiContainer.clientWidth<800?r.thirdPartyContentAreas.setAboveTimeSelectionOffset({marginLeft:null!==(i=r.menu)&&void 0!==i&&i.getVariant().id.includes("radar")?"75px":"0px",marginBottom:"0px"}):r.thirdPartyContentAreas.setAboveTimeSelectionOffset({marginBottom:"0px"}));var o=r.menu&&("sat"===r.menu.getVariant().id||r.menu.getVariant().id.includes("radarMap")),a="number"==typeof e.current?e.current:e.timesteps.length-1,s=e.timesteps[a];r.timeSelection=new Cr({container:r.timeSelectionContainer,time:e,timezoneOffset:1e3*r.timezoneOffsetInSeconds,currentTimeStep:s,canUseRestricted:r.canUseRestricted,onRestricted:r.showRestrictedNotice,showTimeRanges:r.showTimeRanges,thirdPartyContentAreas:r.thirdPartyContentAreas,onChange:funtionLayer&&r.animationLayer.showImage(e)},onPlay:o?function(){void 0!==r.time&&"timesteps"in r.time&&(void 0===r.animationLayer&&r.initAnimationLayer(r.time),r.animationLayer&&r.animationLayer.enable())}:void 0,onStop:function(){r.animationLayer&&r&&r.animationLayer.setRange(e.numsteps)},onDragStart:function(){r.animationLayer&&r.animationLayer.disable()}}),r.autoplay&&o&&(r.initAnimationLayer(e),r.animationLayer&&r.animationLayer.enable())}r.showTimeSelection||(r.timeSelectionContainer.innerHTML=""),null!==(t=r.menu)&&void 0!==t&&t.getVariant()&&"historic"in(null===(n=r.menu)||void 0===n?void 0:n.getVariant())&&(r.initCalendar(),"eventResize"in r.timeSelection&&r.timeSelection.eventResize())})),Hr(this,"initCalendar",(function(){var e,t,n,i,o,a,s=bt("div",kr.calendarContainer);r.timeSelectionContainer.append(s),r.dateInput||(r.dateInput=document.createElement("input")),r.dateInput.type="date",r.dateInput.classList.add(kr.dateInput);var u=r.historyStartDate;u&&(r.dateInput.value=u);var c=null===(e=r.menu)||void 0===e||null===(t=e.getVariant())||void 0===t||null===(n=t.historic)||void 0===n?void 0:n.start;c&&(r.dateInput.min=c);var l=null===(i=r.menu)||void 0===i||null===(o=i.getVariant())||void 0===o||null===(a=o.historic)||void 0===a?void 0:a.end;l&&(r.dateInput.max=l),s.append(r.dateInput);var d=document.createElement("button");d.innerText="Go",s.append(d),d.addEventListener("click",Wr(regeneratorRuntime.mark((function e(){var t,n,i,o,a,s,u,c,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.menu){e.next=2;break}return e.abrupt("return");case 2:if(s=null===(t=r.dateInput)||void 0===t?void 0:t.value){e.next=5;break}return e.abrupt("return");case 5:return r.historyStartDate=s,u=null===(n=r.menu)||void 0===n?void 0:n.getVariant(),c=u.time,l=null===(i=r.menu)||void 0===i?void 0:i.getDomain().id,d={start:s,end:null===(o=u.historic)||void 0===o?void 0:o.end,resolution:null===(a=u.historic)||void 0===a?void 0:a.resolution},e.next=12,yt(c,r.apiKey,l,d);case 12:f=e.sent,r.setTimeInfo(f);case 14:case"end":return e.stop()}}),e)}))))})),Hr(this,"initAnimationLayer",(function(e){var t=e.timesteps.map((function(e){return e.value}));r.animationLayer=new Rn({map:r.mapboxMap,steps:t,tileUrl:"".concat(r.menu.getVariant().sources[0].tiles[0],"?apikey=").concat(r.apiKey),range:r.timeSelection.getRange()?r.timeSelection.getRange().numstmeSelection&&r.timeSelection.setIndex(e)},onDisable:function(){"setPlaying"in r.timeSelection&&r.timeSelection.setPlaying(!1),r.dynamicLayers&&r.timeSelection&&r.dynamicLayers.setDate(r.timeSelection.getTimeStep())},onLoading:function(e){r.setLoading(e),r.timeSelection.setLoading("START"===e),r.autoplay&&!r.autoplayStarted&&(r.autoplayStarted=!0,r.timeSelection.setPlaying(!0))}})})),Hr(this,"removeTimeSelection",(function(){r.timeSelection&&"destroy"in r.timeSelection&&r.timeSelection.destroy(),r.timeSelectionContainer.innerText=""})),Hr(this,"setLoading",(function(e){"START"===e?(r.loadingSpinner.show(),r.showLoadingTime&&(window.clearInterval(r.loadingTimerInterval),r.loadingSpinner.setInfo("0.0"),r.loadingTimerInterval=window.setInterval((function(){r.loadingTimer+=.1,r.loadingSpinner.setInfo(r.loadingTimer.toFixed(1))}),100)),r.particleLayer&&r.isFlowAnimation&&r.particleLayer.disable()):(r.loadingSpinner.remove(),r.showLoadingTime&&(r.loadingTimer=0,window.clearInterval(r.loadingTimerInterval)),r.particleLayer&&r.isFlowAnimation&&r.particleLayer.enable())})),Hr(this,"onMenuToggle",(function(e){e?(r.timeSelectionWrapper.classList.add(kr.fullWidth),r.thirdPartyContentAreas.setMainAreaRightOffset("20px"),r.timeSelectionWrapper.classList.remove(kr.hidden)):r.timeSelectionWrapper.classList.contains(kr.fullWidth)&&(r.timeSelectionWrapper.getBoundingClientRect().width>500?(r.timeSelectionWrapper.classList.remove(kr.fullWidth),r.thirdPartyContentAreas.setMainAreaRightOffset("220px")):r.timeSelectionWrapper.classList.add(kr.hidden)),setTimeout((function(){void 0!==r.timeSelection&&"adaptNumberOfDaysToWidth"in r.timeSelection&&r.timeSelection.adaptNumberOfDaysToWidth()}),500),setTimeout(r.thirdPartyContentAreas.updateMainContentAreaHeight,500)})),Hr(this,"onTimesliderChange",(function(e,t){r.currentTime=ar(e,t),r.time&&r.time.interval,void 0!==r.dynamicLayers&&r.dynamicLayers.setDate(r.currentTime),r.updateFlowMovieTime(r.currentTime),r.particleLayer&&r.particleLayer.setScreenshotFileName(void 0,r.currentTime),r.fireEvent("datechange",{date:r.currentTime})})),Hr(this,"onTimeChange",(function(e){if(void 0!==r.dynamicLayers&&r.dynamicLayers.setDate(e),r.time&&"categories"===r.time.type&&(r.currentTimeCategory=r.time.categories.find((function(t){return t.value===e}))||r.time.categories[0]),r.updateFlowMovieTime(e),r.particleLayer){var t=cr(e,r.timezoneOffsetInSeconds,r.time);r.particleLayer.setScreenshotFileName(void 0,t)}r.fireEvent("datechange",{date:e})})),Hr(this,"updateFlowMovieTime",(function(e){if(r.particleLayer&&r.isFlowAnimation){var t=r.mapboxMap.getSource("sourceFlow"),n=e.replace("/","T");if(void 0!==t&&void 0!==t.tiles&&r.sourceFlow&&void 0!==r.sourceFlow.tiles&&void 0!==r.menu&&void 0!==e){t.tiles=r.sourceFlow.tiles;var i=r.inventory&&r.inventory.overlays.find((function(e){return"windAnimationOverlay"===e.id}));Or(t,{domain:r.menu.getDomain().id,overlayDomains:i?i.domains:void 0,timestamp:n,level:r.menu.getLevel(),apiKey:r.apiKey,lastUpdate:r.time?r.time.las&&r.particleLayer.triggerRepaint()}),10)}))}})),Hr(this,"onUnitChange",(function(e,t){r.abortId=0,r.units[e]=t,r.menu&&r.menu.destroy(),r.dynamicLayers&&r.dynamicLayers.destroy();var n=new URL(r.inventoryUrl);n.searchParams.set("temperatureUnit",r.units.temperature),n.searchParams.set("velocityUnit",r.units.velocity),n.searchParams.set("lengthUnit",r.units.length),n.searchParams.set("energyUnit",r.units.energy);var i=n.toString().replace(/%2C/g,",");gt(i).then((function(e){r.defaults=Nr(Nr({},r.defaults),Fr()),r.inventory=e,r.createMenu(e)})),r.fireEvent("unitchange",{unit:t,unitType:e})})),Hr(this,"onScreenshot",(function(e){return r.mapboxMap.panBy([0,.1]),void 0!==r.particleLayer&&(void 0!==e&&r.particleLayer.setScreenshotLogoPath(e),r.particleLayer.exportScreenshot()),!1})),Hr(this,"createMenu",(function(e){r.menu=new ln({container:r.uiContainer,defaultValues:r.defaults,inventory:e,mapboxMap:r.mapboxMap,onChange:r.onMenuChurn r.onScreenshot(r.screenshotLogoPath)},controls:r.controls,customMenuEntries:r.customMenuEntries,thirdPartyContentAreas:r.thirdPartyContentAreas.getAreas(),show:r.showSidebar,onOpenModal:r.openModal,searchBarOptions:r.searchBarOptions})})),Hr(this,"showRestrictedNotice",(function(e){r.restrictedMessageSnackbar&&r.restrictedMessageSnackbar.close(),r.restrictedMessageSnackbar=void 0,e&&(r.restrictedMessageSnackbar=new qn({container:r.modalContainer,content:r.restrictedNotice.content,actionLabel:r.restrictedNotice.actionLabel,onAction:r.restrictedNotice.action,duration:0,dismissable:!1,offset:120}))})),this.mapboxMap=t.mapboxMap,this.inventoryUrl=t.inventory,this.controls=t.controls,this.arrowKeysEnabled=t.arrowKeys,this.timezoneOffsetInSeconds=t.timezoneOffsetInSeconds,this.timezoneAbbrev=t.timezoneAbbreviation,this.language=t.language,this.direction=t.direction,this.unitSelector=t.unitSelector,this.showSidebar=t.showSidebar,this.showLegend=t.showLegend,this.showTimeSelection=t.showTimeSelection,this.showTimeRanges=t.showTimeRanges,this.showLoadingTime=t.showLoadingTime,this.apiKey=t.apiKey,this.canUseRestricted=t.canUseRestricted,this.restrictedNotice=t.restrictedNotice,this.hash=t.hash,this.defaults=Object.assign(Fr(),t.defaults),this.autoplay=t.autoplay,this.customMenuEntries=t.customMenuEntries,this.screenshotLogoPath=t.screenshotLogoPath,this.searchBarOptions=t.searchBarOptions,this.loadingSpinner=new Ut(this.uiContainer,this.showLoadingTime),this.initialMaxBounds=this.mapboxMap.getMaxBounds(),this.fireEvent=n,this.units={temperature:Br("temperatureUnit",this.inventoryUrl)||"C",velocity:Br("velocityUnit",this.inventoryUrl)||"km/h",length:Br("lengthUnit",this.inventoryUrl)||"metric",energy:Br("energyUnit",this.inventoryUrl)||"watts"},this.thirdPartyContentAreas=new Qn({uiContainer:this.uiContainer,content:t.content,timeSelectionContainer:this.timeSelectionContainer,legendsContainer:this.legendsContainer,timeSelectionWrapper:this.timeSelectionWrapper}),this.initUi()}var t,n;return t=e,(n=[{key:"setTimeInfo",value:function(e){this.menu&&this.onMenuChange(this.menu.getMap(),this.menu.getVariant(),this.menu.getDomain().id,this.menu.getLevel().id,this.menu.get have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.ge=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Kr(this,"eventListeners",new Map);var n={};if("object"!==Yr(t.mapboxMap))throw Error("Please provide a reference to a Mapbox GL JS map.");if(n.mapboxMap=t.mapboxMap,"string"!=typeof t.inventory)throw Error("Please provide an inventory URL.");if(n.inventory=t.inventory,"string"!=typeof t.apiKey||t.apiKey&&"<your_api_key>"===t.apiKey)throw Error("Please provide an API key.");n.apiKey=t.apiKey;var r={downloadStyle:!1,toggleMenu:!1!==t.showSidebar,zoom:"auto"};n.controls=qr(qr({},r),t.controls),n.arrowKeys="boolean"==typeof t.arrowKeys&&t.arrowKeys,n.timezoneOffsetInSeconds="number"==typeof t.timezoneOffsetInSeconds?t.timezoneOffsetInSeconds:0,n.timezoneAbbreviation="string"==typeof t.timezoneAbbreviation?t.timezoneAbbreviation:"UTC",n.hash=void 0!==t.hash&&t.hash,n.showLoadingTime="boolean"==typeof t.showLoadingTime&&t.showLoadingTime,n.canUseRestricted="boolean"==typeof t.canUseRestricted&&t.canUseRestricted,n.showTimeRanges=void 0===t.showTimeRanges||t.showTimeRanges,void 0===t.restrictedNotice?n.restrictedNotice={content:"Access to this map is restricted."}:n.restrictedNotice=t.restrictedNotice,n.restrictedNotice.content=void 0===t.restrictedNotice?n.restrictedNotice.content:t.restrictedNotice.content,n.restrictedNotice.action=t.restrictedNotice&&"function"==typeof t.restrictedNotice.action?t.restrictedNotice.action:void 0,n.restrictedNotice.actionLabel=t.restrictedNotice&&"string"==typeof t.restrictedNotice.actionLabel?t.restrictedNotice.actionLabel:void 0,n.customMenuEntries=t.customMenuEntries,n.screenshotLogoPath="string"==typeof t.screenshotLogoPath?t.screenshotLogoPath:void 0,n.content=t.content,n.language=t.language||"en",n.direction=t.direction||"ltr",n.unitSelector="boolean"!=typeof t.unitSelector||t.unitSelector,n.showSidebar=void 0!==t.showSidebar?t.showSidebar:"auto",n.showLegend=void 0===t.showLegend||t.showLegend,n.showTimeSelection=void 0===t.showTimeSelection||t.showTimeSelection,n.defaults={},t.defaults&&(t.defaults.map&&(n.defaults.mapId=t.defaults.map),t.defaults.variant&&(n.defaults.variantId=t.defaults.variant),t.defaults.domain&&(n.defaults.domainId=t.defaults.domain),t.defaults.level&&(n.defaults.levelId=t.defaults.level),t.defaults.overlays&&(n.defaults.overlayIds=t.defaults.overlays)),n.autoplay=t.autoplay||!1,void 0===t.searchBar?n.searchBarOptions={show:!1}:n.searchBarOptions=t.searchBar,this.ui=new Vr(n,this.fireEvent.bind(thie,[]),this.eventListeners.get(e).push(t)}},{key:"off",value:function(e,t){if(this.eventListeners.has(e)){var n=this.eventListeners.get(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}}},{key:"getMap",value:function(){var e=this.ui.getMenu();return e?e.getMap():void 0}},{key:"getVariant",value:function(){var e=this.ui.getMenu();return e?e.getVariant():void 0}},{key:"getOverlays",value:function(){var e,t=this.ui.getMenu(),n=(null==t?void 0:t.getOverlays())||[],r=null==t?void 0:t.getVariant().defaultOverlays,i=null===(e=this.getInventory())||void 0===e?void){return null==r?void 0:r.includes(e.id)})))||[];return[].concat(Gr(n),Gr(o))}},{key:"getLevel",value:function(){var e=this.ui.getMenu();return e?e.g.getMenu();return e?e.getDomain():void 0}},{key:"getDate",value:function(){return this.ui.getDate()}},{key:"getTimeInfo",value:function(){return this.ui.function(){return this.ui.getInventory()}},{key:"setMap",value:function(e){var t=Object.freeze({mapId:"string"==typeof e?e:e.map,variantId:"string"==typeof e?void 0:e.variant,domainId:"string"==typeof e?void 0:e.domain,levelId:"string"==typeof e?void 0:e.level}),n=this.getInventory();if(void 0!==n){var r="string"==typeof t.mapId&&void 0!==Wt(t.mapId,n);if(void 0===t.mapId||r){var i="string"==typeof t.mapId?Wt(t.mapId,n):this.getMap();if(void 0!==i){var o="string"==typeof t.variantId&&i.variants.find((function(e){return e.id===t.variantId}));if(void 0===t.variantId||o){var a=i.variants.find((function(e){return e.id===t.variantId})),s=this.ui.getMenu();void 0!==s&&s.setMap({map:i,variant:a,domainId:t.domainId,levelId:t.levelId})}else console.error('The map "'.concat(i.id,'" has no variant with ID "').concat(t.variantId,'"'))}else console.error('Error while loading map with ID "'.concat(t.mapId,'"'))}else console.error('There is no map with ID "'.concat(t.mapId,'"'))}else console.error("Cannot set map. Inventory has not yet been loaded.")}},{key:"setDate",value:function(e){var t=this.getTimeInfo();if(void 0!==t){if("regular"===t.type){var n="string"==typeof e?sr(e).timestamp:e;this.ui.setDate(n)}"categories"===t.type&&this.ui.setDate(e),"timesteps"===t.type&&this.ui.setDate(e)}else console.error("Could not set date. No time info available.")}},{key:"enableOverlay",value:function(e){var t=this.getInventory();if(void 0!==t){var n=t.overlays.find((function(t){return t.id===e}));if(void 0!==n){var r=this.ui.getMenu();r&&r.enableOverlay(n)}else console.error('Overlay with ID "'.concat(e,'" not found.'))}else console.error("Cannot enable overlay. Inventory has not yet been loaded.")}},{key:"disableOverlay",value:function(e){var t=this.getInventory();if(void 0!==t){var n=t.overlays.find((function(t){return t.id===e}));if(void 0!==n){var r=this.ui.getMenu();r&&r.disableOverlay(n.id)}else console.error('Overlay with ID "'.concat(e,'" not found.'))}else console.error("Cannot disable overlay. Inventory has not yet been loaded.")}},{key:"openModal",value:function(e){this.ui.openModal(e)}},{key:"enableTooltip",value:function(){this.ui.enableTooltip()}},{key:"disableTooltip",value:function(){this.ui.disableTooltip()}},{key:"getFormattedMapValue",value:function(e){return this.ui.getTooltipContent(e)}},{key:"showTimeSelection",value:function(){this.ui.enableTimeSelunction(){this.ui.disableTvalue:function(e){this.ui.setTimeInfo(e)}},{key:"fireEvent",value:function(e,t){var n=this.eventListeners.get(e);void 0!==n&&n.forEach((function(n){n(qr({type:e},t))}))}}],n&&Jrhen}for(var a=0;a<r.length;a++)o(a,r[a])}))},ni=setTimeout,ri="undefinetch(e){if(tch=function(e){rector(oi);return si(this,new di(}for(var a=0;a<r.length;a++)uctor===ai(e){retuth;r<i;r++)ai.resolve(e[r]).then(t,n)}))},ai._immediateFn="&function(e){ri(e)}||funcossible Unhan Error("unable to locate global object")}();"function"!=typeof hi.Promise?hi.Promise=pi:(hi.Promise.prototype.finally||(hi.Promise.prototype.finally=ei),hi.Promise.allSettled||(hi.Promise.allSettled=ti)),r(8264);var mi="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==mi&&mi,vi="URLSearchParams"in mi,gi="Symbol"in mi&&"iterator"in ry{return new Blob,!0}catch(e){return!1}}(),bi="FormData"in mi,Ai="ArrayBuffer"in mi;if(Ai)var xi=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[objeis.text().tr n=this.map[e];thiselete=function(e)urn e=Di(e),this.e){return this.ma.set=function(e,t){throperty(n)&&e.callorEach((function(t,n.forEach((function(t)ch((function(t,n){e.push([n,t])})),Ci(e)},gi&&(Ti.prototype[Symbol.iterator]=Ti.prototype.entries);var Fi=["DEL),this.url=t.urleturn new Bi(this,{body:this._bodyInit})},Oi.call(Bi.prototype)ders:new ,statusText:""});return e.type="error",e}Ii(null,{status:t,headers:{location:e}})};var name=t;var n=Error(e);this.stack=n.stack},Ri.prototype=Object.create(Erroid 0===i._bodyInit?null:i._bodyInit)}))}Ui.polyfill=!0,mi.fetch||(mi.fetch=Ui,mi.Headers=Ti,mi.Request=Bi,mi.Response=Ii);var Ni=Qr}(),i.default}()}));