import{debounced as t,objDataset as S,debug,resolve}from"../base/croco.js";import{LOGGERS as o}from"../base/config.js";const l=o.DEFAULT;const g="modularstarter";const i=document.querySelector(".js-modular-full-page");const j=i&&i.dataset.isPageDesigner;let p=false;function q(p){let q=p.nextElementSibling;if(j){const t=resolve("parentElement.nextElementSibling",p);q=t&&t.querySelector(".js-modular-layer")}if(q){let o=q.querySelector(".js-modular-title");let l=q.querySelector(".js-modular-text");let t=p.querySelector(".js-modular-title");let i=p.querySelector(".js-modular-text");let u=q.querySelector(".js-slideshow-controls");let m=p.querySelector(".js-modular--starter-cover");let S=m&&m.getBoundingClientRect();let g=t&&window.getComputedStyle(t)["color"];let j=i&&window.getComputedStyle(i)["color"];if(S){if(o){let t=o.getBoundingClientRect();o.style.color=t.bottom<=S.bottom?g:"inherit"}if(l){let t=l.getBoundingClientRect();l.style.color=t.bottom<=S.bottom?j:"inherit"}if(u){let t=u.getBoundingClientRect();u.style.color=t.bottom<=S.bottom?g:"inherit"}}}}onst h=t(200,u);function m(i){const u=i.querySelector(".js-btn-scroll");const t=i.querySelector(".js-modular--starter-cover");if(i.classList.contains("js-overlap")){window.addEventListener("resize",h.bind(this,i));t&&t.addEventListener("load",q.bind(this,i));if(j){const l=resolve("parentElement.nextElementSibling",i);const m=l&&l.querySelector(".js-modular-layer");m&&m.classList.add("is-overlap--next-layer")}q(i)}if(!document.querySelector(".js-page-designer-editor")){u&&import("./scroll-next.js").then(({btnScrollInit:t})=>t([u]))}if(i.classList.contains("js-fader")){import("../modules/fader.js").then(({faderInit:t,DATASET_KEY:o})=>{t();if(u){const l=S(i,o);l.fadeCallback=(function(){let t=this.$slides[this.activeIndex].querySelector(".js-fader-color");if(t){const color=window.getComputedStyle(t)["color"];u.style.color=color}}).bind(l)}})}const o=i.querySelector(".js-viewer-3d");if(!p&&o){import("./module3D.js").then(;p=true}i.dataset[g]=true}export function modularStarterInit(t=document.querySelectorAll(".js-modular--starter")){if(t.length){[...t].forEach(t=>{if(!t.dataset[g]){m(t)}})}else{debug("warn",l,"[modular-starter]","missing element")}}