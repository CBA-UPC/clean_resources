/*!For license information please see 1824.bundle.6fdd43458c11cecd4bc9.js.LICENSE.txt*/(self.webpackChunkarena_web=self.webpackChunkarena_web||[]).push([[1824],{63470:function(e,t,n){"use strict";var r,i,s,o,a,c,u,h,l;n.r(t),n.d(t,{DocumentChangeType:function(){return o},MessageChangeType:function(){return i},ModeratorStatus:function(){return c},PollFilter:function(){return l},PublicUserStatus:function(){return u},QnaQuestionFilter:function(){return h},Status:function(){return a}}),function(e){e.POLL="POLL_PUBLISHED",e.QNA="QNA_QUESTION_ANSWER",e.MONETIZATION="MONETIZATION"}(r||(r={})),function(e){e.ADDED="added",e.REMOVED="removed",e.MODIFIED="modified"}(i||(i={})),function(e){e.ALL_CHAT_CHANGES="ALL_CHAT_CHANGES",e.PIN_MESSAGES="PIN_MESSAGES"}(s||(s={})),o||(o={})),a||(a={})),a||(a={})),function(e){e.PENDING="PENDING",e.APPROVED="APPROVED"}(c||(c={})),u||(u={})),function(e){e.POPULAR="popular",e.RECENT="recent",e.ANSWERED="answered",e.NOT_ANSWERED="not_answered"}(h||(h={})),l||(l={}))},78297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r=n(70655),i=function(){function e(){this._environments={EU:{API_V2_URL:"https://api.eu.arena.im/v2",CACHED_API:"https://cached-api.eu.arena.im/v1",DEFAULT_AUTH_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NGQ5OGJiNmY3MDIyOGU4MWI4Njc5YmUiLCJyb2xlcyI6WyJVU0VSIl0sImV4cCI6MzM2OTQxODM2OSwiaWF0IjoxNDc3MjU4MzY5fQ.dNpdrs3ehrGAhnPFIlWMrQFR4mCFKZl_Lvpxk1Ddp4o",FIREBASE_APIKEY:"AIzaSyCdnt__-0U00CfHQu97gzAfub6j7rS3lQc",FIREBASE_AUTHDOMAIN:"arena-eu-im-prd.firebaseapp.com",FIREBASE_PROJECT_ID:"arena-eu-im-prd",GRAPHQL_ENDPOINT:"https://public-eu.arena.im/graphql",ARENA_REALTIME_URL:"https://realtime.eu.arena.im",ARENA_URL:"https://go.eu.arena.im",DD_LOGS_CLIENT_TOKEN:"pubd7fb22aecee9515aee4dbe8c16b8b18e",DD_LOGS_SESSION_SAMPLE_RATE:100,DD_RUM_APLICATION_ID:"980b1eb2-c2b7-4fef-b48b-7d69adc9c283",DD_RUM_CLIENT_TOKEN:"pub24ce7b1f01dcfe6a52633f4154d16859",DD_RUM_DEFAULT_PRIVACY_LEVEL:"mask-user-input",DD_RUM_REPLAY_SAMPLE_RATE:100,DD_RUM_SESSION_SAMPLE_RATE:20,DD_RUM_TRACK_LONG_TASKS:!0,DD_RUM_TRACK_RESOURCES:!0,DD_RUM_TRACK_USER_INTERACTIONS:!0,DD_SERVICE:"web-app",DD_SITE:"us3.datadoghq.com",ENV:"prd-eu",ARENA_CHAT_WS:"wss://chat-proxy.arena.im/ws"},USA:{API_V2_URL:"https://api.arena.im/v2",CACHED_API:"https://cached-api.arena.im/v1",DEFAULT_AUTH_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NGQ5OGJiNmY3MDIyOGU4MWI4Njc5YmUiLCJyb2xlcyI6WyJVU0VSIl0sImV4cCI6MzM2OTQxODM2OSwiaWF0IjoxNDc3MjU4MzY5fQ.dNpdrs3ehrGAhnPFIlWMrQFR4mCFKZl_Lvpxk1Ddp4o",FIREBASE_APIKEY:"AIzaSyCQ6GusAUlKV7FQZDtKplQqpNjQWzE3inE",FIREBASE_AUTHDOMAIN:"arena-im-prd.firebaseapp.com",FIREBASE_PROJECT_ID:"arena-im-prd",GRAPHQL_ENDPOINT:"https://public.arena.im/graphql",ARENA_REALTIME_URL:"https://realtime.arena.im",ARENA_URL:"https://go.arena.im",DD_LOGS_CLIENT_TOKEN:"pubd7fb22aecee9515aee4dbe8c16b8b18e",DD_LOGS_SESSION_SAMPLE_RATE:100,DD_RUM_APLICATION_ID:"980b1eb2-c2b7-4fef-b48b-7d69adc9c283",DD_RUM_CLIENT_TOKEN:"pub24ce7b1f01dcfe6a52633f4154d16859",DD_RUM_DEFAULT_PRIVACY_LEVEL:"mask-user-input",DD_RUM_REPLAY_SAMPLE_RATE:100,DD_RUM_SESSION_SAMPLE_RATE:20,DD_RUM_TRACK_LONG_TASKS:!0,DD_RUM_TRACK_RESOURCES:!0,DD_RUM_TRACK_USER_INTERACTIONS:!0,DD_SERVICE:"web-app",DD_SITE:"us3.datadoghq.com",ENV:"prd",ARENA_CHAT_WS:"wss://chat-proxy.arena.im/ws"}}}return Object.defineProperty(e,"instance",{get:function(){return e.configInstance||(e.configInstance=new e,e.configInstance.region="USA"),e.configInstance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"region",{set:function(t){e.configInstance.environment="EU"===t?this._environments.EU:this._environments.USA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"environment",{get:function(){return e._environment},set:enumerable:!1,configurable:!0}),e}();t.Config=i},49267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r=n(78297);Object.defineProperty(t,"Config",{enumerable:!0,get:function(){return r.Config}});var i=n(78297);t.default=i.Config},89349:9518:74169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserObservable=void 0;var r=n(69550),i=function(){eturn Object.defineProperty(e,"instance",{get:function(){return e.userObervableInstance||(e.userObervableInstance=new e),e.userObervableInstance},enumerable:!1,configurable:!0}),e.prototype.onUserChanged=function(e){return this.userChangedListeners.subscribe(e)},e.prototype.updateUser=function(e){this.userChangedListeners.publish(e)},e}();t.UserObservable=i},78332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var r=n(47730),i=n(62964),s=n(89349),o=n(74169),a=n(24393),c=n(44969),u=n(98526),h=n(49267),l="arenaUserCountry",f=function(){function e(){this.data=null,this.anonymousIdValue=this.generateUserId(),this.global=c.getGlobalObject(),this.localStorage=new a.StorageAPI,this.handleAnonymousId(),this.generateTrackIframe()}return e.prototype.generateUserId=function(){return c.generateUUIDV4()},Object.defineProperty(e,"instance",{get:function(){return e.userInstance||(e.userInstance=new e),e.userInstance},enumerable:!1,configurable:!0}),e.prototype.setNewUser=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,a,c;return r.__generator(this,(function(u){switch(u.label){case 0:return t=r.__read(e.name.split(" ")),n=t[0],a=t.slice(1),[4,i.RestAPI.getAPIInstance().getArenaUser({provider:s.Credentials.apiKey,username:e.id,profile:{urlName:""+ +new Date,email:e.email,username:e.id,displayName:e.name,name:{familyName:a.join(" "),givenName:n},profileImage:e.image,id:e.id},metadata:e.metaData})];case 1:return c=u.sent(),this.data=r.__assign(r.__assign({},e),{id:c.id,token:c.token,isModerator:c.isModerator,isBanned:c.isBanned}),o.UserObservable.instance.updateUser(this.data),[2,this.data]}}))}))},e.prototype.setInternalUser=function(e){return o.UserObservable.instance.updateUser(e),this.data=e,this.data},e.prototype.unsetUser=function(){this.data=null,o.UserObservable.instance.updateUser(null)},e.prototype.handleAnonymousId=function(){var e=this.localStorage.getItem("anonymousUserId");e&&(this.anonymousIdValue=e)},Object.defineProperty(e.prototype,"countryFromCache",{get:enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cacheCountry",{set:enumerable:!1,configurable:!0}),e.prototype.loadCountry=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this.countryFromCache?[2,this.countryFromCache]:[4,i.RestAPI.getAPINoauthInstance().loadViewerCountry()];case 1:return e=t.sent(),this.cacheCountry=e,[2,e]}}))}))},Object.defineProperty(e.prototype,"anonymousId",{get:function(){return this.anonymousIdValue},set:function(e){this.anonymousIdValue=e},enumerable:!1,configurable:!0}),e.prototype.generateTrackIframe=function(){var e=this;if("undefined"!==typeof window){var t=h.default.instance.environment.ARENA_URL;this.global.addEventListener("message",(function(n){n.origin===t&&"arena_hub_anonymous_id"===n.data.type&&(e.anonymousId=n.data.value)}),!1),this.askHubFrameForAnonymousId()}},e.prototype.askHubFrameForAnonymousId=function(){var e,t=this;try{var n=this.global.document.querySelector('[name="arena-hub-frame"]');n?null===(e=n.contentWindow)||void 0===e||e.postMessage({type:"ask_arena_hub_anonymous_id"},h.default.instance.environment.ARENA_URL):("complete"!==document.readyState&&"interactive"!==document.readyState||this.createArenaHubIframe(),this.global.addEventListener("DOMContentLoaded",())}catch(r){u.Logger.instance.log("error","ArenaWebSDK - Could not get AnonymousId",{error:r})}},e.prototype.createArenaHubIframe=function(){var e=document.createElement("iframe");e.style.display="none",e.src=h.default.instance.environment.ARENA_URL+"/arenahubframe",e.name="arena-hub-frame",document.body.appendChild(e)},e}();t.User=f},63386:71824:88271:68832:44611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationSite=void 0;var r=n(47730),i=n(52074),s=n(9518),o=function(){eturn Object.defineProperty(e,"instance",{get:function(){return e.organizationSiteInstance||(e.organizationSiteInstance=new e),e.organizationSiteInstance},enumerable:!1,configurable:!0}),e.prototype.getSite=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return null!==this.site?[3,2]:(e=this,[4,this.fetchSiteData(s.Credentials.apiKey)]);case 1:e.site=t.sent(),t.label=2;case 2:return[2,this.site]}}))}))},e.prototype.fetchSiteData=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,i.fetchCachedAPIData("/sites/"+e)];case 1:if(null===(t=n.sent()))throw new Error("Cannot fetch site data");return[2,t]}}))}))},e}();t.OrganizationSite=o},21755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArenaHub=void 0;var r=n(47730),i=n(68832),s=n(9518),o=n(44969),a=n(62964),c=function(){eturn e.getInstance=e.prototype.track=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(i){switch(i.label){case 0:return[4,this.getTrackPayload("track")];case 1:return n=i.sent(),t.length>0&&(n.properties=r.__assign(r.__assign({},n.properties),t[0])),n.event=e,[2,this.sendRequest(n)]}}))}))},e.prototype.trackPage=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.getTrackPayload("page")];case 1:return e=t.sent(),[2,this.sendRequest(e)]}}))}))},e.prototype.getTrackPayload=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,i.OrganizationSite.instance.getSite()];case 1:return t=r.sent(),n=s.User.instance.data,[2,{userId:(null===n||void 0===n?void 0:n.id)||null,anonymousId:this.anonymousId,context:this.getContext(),messageId:o.generateUUIDV4(),timestamp:this.getTimestamp(),writeKey:t._id,sentAt:this.getTimestamp(),properties:this.getPageInfo(),arenaUserId:(null===n||void 0===n?void 0:n.id)||null,type:e}]}}))}))},e.prototype.sendRequest=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,a.RestAPI.getAPINoauthInstance().collect(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getPageInfo=function(){return{path:this.global.location.pathname,referrer:this.global.document.referrer,search:this.global.location.search,title:this.global.document.title,url:this.global.location.href}},e.prototype.getTimestamp=e.prototype.getContext=function(){return{library:this.getLibraryInfo(),page:this.getPageInfo(),userAgent:this.getUserAgent(),widgetId:this.chatRoom._id,widgetType:"Chat Room",browserLanguage:this.getBrowserLanguage()}},e.prototype.getLibraryInfo=e.prototype.getAPIVersion=function(){return"0.0.7"},e.prototype.getUserAgent=function(){return this.global.navigator.userAgent},e.prototype.getBrowserLanguage=function(){return this.global.navigator.language},e}();t.ArenaHub=c},52074:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClientCache=t.fetchCachedAPIData=void 0;var r=n(47730),i=n(62964),s=n(38047),o="arena-cached-api-",a=new s.LocalStorageAPI;function c(e,t){void 0===t&&(t=!1);try{var n=a.getItem(""+o+e);if(null===n)return null;var r=JSON.parse(n),i=r.timestamp,s=(new Date).getTime().toString();return!t&&function(e,t){var n=+new Date(parseInt(e)),r=+new Date(parseInt(t))-n;return Math.floor(r/1e3/60)}(i,s)>=120?null:r.value}catch(c){return null}}t.fetchCachedAPIData=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(t=c(e))return[2,t];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.RestAPI.getCachedInstance().fetchCachedAPI(e)];case 2:return(t=n.sent())||(t=c(e,!0)),[3,4];case 3:return n.sent(),t=c(e,!0),[3,4];case 4:return function(e,t){try{var n={timestamp:(new Date).getTime().toString(),value:t};a.setItem(""+o+e,JSON.stringify(n))}catch(r){console.error("Cannot set cached-api cache.")}}(e,t),[2,t]}}))}))},t.getClientCache=c},30991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLAPI=void 0;var r,i,s=n(47730),o=n(28687),a=n(63470),c=n(29436),u=n(9518),h=n(68832),l=n(49267),f=function(){function e(e){if(!l.default.instance.environment.DEFAULT_AUTH_TOKEN)throw Error("Invalid environment");this.default_auth_token=l.default.instance.environment.DEFAULT_AUTH_TOKEN;var t=u.User.instance.data;this.transport=new c.GraphQLTransport((null===t||void 0===t?void 0:t.token)||this.default_auth_token,e._id,e.settings.graphqlPubApiKey),u.UserObservable.instance.onUserChanged(this.handleUserChange.bind(this))}return Object.defineProperty(e,"instance",{get:function(){return e.graphQLAPIInstance||(e.graphQLAPIInstance=h.OrganizationSite.instance.getSite().then((function(t){return new e(t)}))),e.graphQLAPIInstance},enumerable:!1,configurable:!0}),e.cleanInstance=e.prototype.handleUserChange=function(e){var t=(null===e||void 0===e?void 0:e.token)||this.default_auth_token;this.transport.setToken(t)},e.prototype.pollVote=function(e){var t=e.pollId,n=e.userId,i=e.optionId;return s.__awaiter(this,void 0,void 0,(function(){var e,c,u;return s.__generator(this,(function(h){switch(h.label){case 0:return e=o.gql(r||(r=s.__makeTemplateObject(["\n      mutation pollVote($input: PollVoteInput!) {\n        pollVote(input: $input)\n      }\n    "],["\n      mutation pollVote($input: PollVoteInput!) {\n        pollVote(input: $input)\n      }\n    "]))),[4,this.transport.client.request(e,{input:{pollId:t,userId:n,optionId:i}})];case 1:if(c=h.sent(),!(u=c.pollVote))throw new Error(a.Status.Failed);return[2,u]}}))}))},e.prototype.deleteReaction=function(e,t,n){return s.__awaiter(this,void 0,void 0,(function(){var r,c,u;return s.__generator(this,(function(h){switch(h.label){case 0:return r=o.gql(i||(i=s.__makeTemplateObject(["\n      mutation deleteReaction($input: DeleteReactionInput!) {\n        deleteReaction(input: $input)\n      }\n    "],["\n      mutation deleteReaction($input: DeleteReactionInput!) {\n        deleteReaction(input: $input)\n      }\n    "]))),[4,this.transport.client.request(r,{input:{userId:e,itemId:t,reaction:n}})];case 1:if(c=h.sent(),!(u=c.deleteReaction))throw new Error(a.Status.Failed);return[2,u]}}))}))},e}();t.GraphQLAPI=f},85009:10228:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogApi=void 0;var n=function(){function e(e){this.contextName=e}return e.prototype.createContext=function(t){return new e(t)},e.prototype.debug=function(e,t){console.log("[DEBUG - "+new Date+"] ["+this.contextName+"]: "+e,t)},e.prototype.info=function(e,t){console.info("[INFO - "+new Date+"] ["+this.contextName+"]: "+e,t)},e.prototype.warn=function(e,t){console.warn("[WARN - "+new Date+"] ["+this.contextName+"]: "+e,t)},e.prototype.error=function(e,t){console.error("[ERROR - "+new Date+"] ["+this.contextName+"]: "+e,t)},e}();t.LogApi=n},98526:function(e,t,n){"use strict";var r,i,s,o,a,c,u,h,l,f,d,p,m;Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var g=n(67569),y=n(52569),v=n(49267),b=null===(r=v.default.instance.environment)||void 0===r?void 0:r.ENV,w=null===(i=v.default.instance.environment)||void 0===i?void 0:i.DD_LOGS_CLIENT_TOKEN,_=null===(s=v.default.instance.environment)||void 0===s?void 0:s.DD_SITE,I=null===(o=v.default.instance.environment)||void 0===o?void 0:o.DD_LOGS_SESSION_SAMPLE_RATE,E=null===(a=v.default.instance.environment)||void 0===a?void 0:a.DD_SERVICE,T=null===(c=v.default.instance.environment)||void 0===c?void 0:c.DD_RUM_APLICATION_ID,S=null===(u=v.default.instance.environment)||void 0===u?void 0:u.DD_RUM_CLIENT_TOKEN,A=null===(h=v.default.instance.environment)||void 0===h?void 0:h.DD_RUM_SESSION_SAMPLE_RATE,D=null===(l=v.default.instance.environment)||void 0===l?void 0:l.DD_RUM_REPLAY_SAMPLE_RATE,O=null===(f=v.default.instance.environment)||void 0===f?void 0:f.DD_RUM_TRACK_USER_INTERACTIONS,C=null===(d=v.default.instance.environment)||void 0===d?void 0:d.DD_RUM_TRACK_RESOURCES,N=null===(p=v.default.instance.environment)||void 0===p?void 0:p.DD_RUM_TRACK_LONG_TASKS,R=null===(m=v.default.instance.environment)||void 0===m?void 0:m.DD_RUM_DEFAULT_PRIVACY_LEVEL,P=function(){function e(){this.currentEnv=b,g.datadogLogs.init({clientToken:w,site:_,forwardErrorsToLogs:!0,sessionSampleRate:I,service:E,env:b}),y.datadogRum.init({applicationId:T,clientToken:S,site:_,service:E,sessionSampleRate:A,sessionReplaySampleRate:D,trackUserInteractions:O,trackResources:C,trackLongTasks:N,defaultPrivacyLevel:R,env:b}),D&&y.datadogRum.startSessionReplayRecording()}return Object.defineProperty(e,"instance",{get:function(){return e._instanceLogger||(e._instanceLogger=new e),e._instanceLogger},enumerable:!1,configurable:!0}),e.prototype.log=function(e,t,n){"warn"===e||"error"===e?g.datadogLogs.logger.log(t,n,e):"prd"!==this.currentEnv&&console[e](t,n,e)},e}();t.Logger=P},3233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceAPI=void 0;var r=n(47730),i=n(44969),s=n(9518),o=n(18181),a=n(44225),c=function(){function e(e,t,n){this.siteId=e,this.channelId=t,this.channelType=n,this.currentUser=null,this.cachedOnlineCount=null,this.cachedPresenceInfo=null,this.hasDisconnected=!1,this.webSocketTransport=o.WebSocketTransport.getInstance(t),this.webSocketTransport.on("connect",this.onConnect.bind(this)),this.webSocketTransport.on("disconnect",this.onDisconnect.bind(this)),this.webSocketTransport.on("reconnect",this.onReconnect.bind(this)),this.webSocketTransport.on("connectFailed",this.onReconnect.bind(this)),this.webSocketTransport.on("error",this.onReconnect.bind(this)),a.PresenceObservable.getInstance(t).onUserJoinedChanged(this.onPresenceUserJoin.bind(this)),this.listenToPresenceInfo()}return e.getInstance=function(t,n,r){return this.instance[n]||(this.instance[n]=new e(t,n,r)),this.instance[n]},e.prototype.joinUser=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.buildPresenceUser(s.User.instance.data)];case 1:return e=t.sent(),[2,this.join(e)]}}))}))},e.prototype.onPresenceUserJoin=e.prototype.buildPresenceUser=function(e){var t,n,o;return r.__awaiter(this,void 0,void 0,(function(){var a;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,s.User.instance.loadCountry()];case 1:return a=r.sent(),[2,{isMobile:i.isMobile(),userId:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:s.User.instance.anonymousId,isAnonymous:!e,name:null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:null,image:null!==(o=null===e||void 0===e?void 0:e.image)&&void 0!==o?o:null,country:a}]}}))}))},e.prototype.handleUserChange=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.buildPresenceUser(e)];case 1:return t=n.sent(),this.updateUser(t),[2]}}))}))},e.prototype.onConnect=e.prototype.onReconnect=e.prototype.onDisconnect=function(){this.hasDisconnected=!0},e.prototype.join=function(e){var t=this;return this.currentUser=e,new Promise((function(n,r){t.webSocketTransport.emit("join",{channelId:t.channelId,siteId:t.siteId,channelType:t.channelType,user:e},(function(i,s){if(i)return r(i);t.handleUserJoined(e),n(s)}))}))},e.prototype.handleUserJoined=function(e){a.PresenceObservable.getInstance(this.channelId).updateUserJoined(e)},e.prototype.updateUser=function(e){var t=this;this.webSocketTransport.emit("user.change",e,(function(){a.PresenceObservable.getInstance(t.channelId).updateUserSetted(!0)}))},e.prototype.getAllOnlineUsers=function(){var e=this;return new Promise((function(t,n){e.webSocketTransport.emit("list",{channelId:e.channelId,status:"online"},()}))},e.prototype.watchOnlineCount=function(e){return this.cachedOnlineCount&&e(this.cachedOnlineCount),a.PresenceObservable.getInstance(this.channelId).onOnlineCountChanged(e)},e.prototype.watchPresenceInfo=function(e){return this.cachedPresenceInfo&&e(this.cachedPresenceInfo),a.PresenceObservable.getInstance(this.channelId).onPresenceInfoChanged(e)},e.prototype.listenToPresenceInfo=function(){var e=this;this.webSocketTransport.on("presence.info",(function(t){e.cachedOnlineCount=t.onlineCount,e.cachedPresenceInfo=t,a.PresenceObservable.getInstance(e.channelId).updateOnlineCount(e.cachedOnlineCount),a.PresenceObservable.getInstance(e.channelId).updateVisitors(e.cachedPresenceInfo)}))},e.prototype.watchUserJoined=function(e){var t=this;return this.webSocketTransport.on("user.joined",e),function(){t.webSocketTransport.off("user.joined",e)}},e.prototype.watchUserLeft=e.prototype.watchCurrentUserJoined=function(e){return a.PresenceObservable.getInstance(this.channelId).onUserJoinedChanged(e)},e.prototype.watchCurrentUserChanged=function(e){return a.PresenceObservable.getInstance(this.channelId).onUserSettedChanged(e)},e.prototype.offAllListeners=e.instance={},e}();t.PresenceAPI=c},44225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceObservable=void 0;var r=n(69550),i=function(){function e(){this.userChangedListeners=r.createObserver(),this.userSettedListeners=r.createObserver(),this.onlineCountListeners=r.createObserver(),this.presenceInfoListeners=r.createObserver()}return e.getInstance=e.prototype.onUserJoinedChanged=function(e){return this.userChangedListeners.subscribe(e)},e.prototype.updateUserJoined=function(e){this.userChangedListeners.publish(e)},e.prototype.onUserSettedChanged=function(e){return this.userSettedListeners.subscribe(e)},e.prototype.updateUserSetted=function(e){this.userSettedListeners.publish(e)},e.prototype.onOnlineCountChanged=function(e){return this.onlineCountListeners.subscribe(e)},e.prototype.onPresenceInfoChanged=function(e){return this.presenceInfoListeners.subscribe(e)},e.prototype.updateOnlineCount=function(e){this.onlineCountListeners.publish(e)},e.prototype.updateVisitors=function(e){this.presenceInfoListeners.publish(e)},e.instance={},e}();t.PresenceObservable=i},59631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionsAPIFirestore=void 0;var r=n(47730),i=n(9518),s=n(94231),o=n(62964),a=n(69550),c=n(30991),u=n(60686),h=n(85009),l=function(){function e(t){var n=this;this.channelId=t,this.userReactionsListeners=a.createObserver(),this.reactionsErrorsListeners=a.createObserver(),this.logger=new h.LogApi(e.name),i.UserObservable.instance.onUserChanged((function(){return n.watchUserChanged()}))}return e.getInstance=function(t){return this.instance[t]||(this.instance[t]=new e(t)),this.instance[t]},e.prototype.watchUserChanged=function(){var e=this;this.fetchUserReactions().then((function(t){e.userReactionsListeners.publish(t)}))},e.prototype.createReaction=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),"poll"!==e.itemType?[3,3]:[4,c.GraphQLAPI.instance];case 1:return[4,n.sent().pollVote({pollId:e.itemId,userId:e.userId,optionId:parseInt(e.reaction)})];case 2:return n.sent(),[3,5];case 3:return[4,o.RestAPI.getAPIInstance().sendReaction(e)];case 4:n.sent(),n.label=5;case 5:return[3,7];case 6:throw t=n.sent(),this.logger.error("Error to create reaction.",{error:t}),this.reactionsErrorsListeners.publish("Error to create reaction."),new Error("Error to create reaction.");case 7:return[2]}}))}))},e.prototype.fetchUserReactions=function(){var e,t;return r.__awaiter(this,void 0,void 0,(function(){var n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=null!==(t=null===(e=i.User.instance.data)||void 0===e?void 0:e.id)&&void 0!==t?t:i.User.instance.anonymousId,[4,s.RealtimeAPI.getInstance().fetchUserReactions(this.channelId,n)];case 1:if(o=r.sent(),!u.isUserReactions(o))throw this.reactionsErrorsListeners.publish("params of ServerReaction incomplete"),this.logger.error("params of ServerReaction incomplete"),new Error("params of ServerReaction incomplete");return[2,o]}}))}))},e.prototype.fetchChannelReactions=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,[]]}))}))},e.prototype.watchUserReactions=function(e){return this.userReactionsListeners.subscribe(e)},e.prototype.watchChannelReactions=e.prototype.watchReactionsErrors=function(e){return this.reactionsErrorsListeners.subscribe(e)},e.prototype.offAllListeners=function(){},e.prototype.removeReaction=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,c.GraphQLAPI.instance];case 1:t=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,t.deleteReaction(e.userId,e.itemId,e.reaction)];case 3:return n.sent(),[2,[]];case 4:throw n.sent(),new Error('Cannot delete reaction from message "'+e.itemId+'"');case 5:return[2]}}))}))},e.instance={},e}();t.ReactionsAPIFirestore=l},32247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionsAPIWS=void 0;var r=n(47730),i=n(69550),s=n(18181),o=n(44225),a=n(60686),c=n(85009),u=n(44969),h="reaction.create",l="reaction.retrieve",f="reaction.channel",d="reaction.user",p="reaction.channel.retrieve",m="reaction.remove",g=3e3,y=function(){function e(t){this.cachedUserReactions=null,this.cachedChannelReactions=null,this.userReactionsListeners=i.createObserver(),this.channelReactionsListeners=i.createObserver(),this.reactionsErrorsListeners=i.createObserver(),this.logger=new c.LogApi(e.name),this.webSocketTransport=s.WebSocketTransport.getInstance(t),o.PresenceObservable.getInstance(t).onUserJoinedChanged(this.onPresenceChanged.bind(this)),o.PresenceObservable.getInstance(t).onUserSettedChanged(this.onPresenceChanged.bind(this)),this.watchChannelReactionsEvent()}return e.getInstance=e.prototype.onPresenceChanged=function(){var e=this;this.fetchUserReactions().then(().catch(()},e.prototype.createReaction=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){return[2,u.promiseTimeout(new Promise((function(n,r){t.webSocketTransport.emit(h,e,(function(e){if(e)return t.logger.error("Error to create reaction.",{error:e}),t.reactionsErrorsListeners.publish("Error to create reaction."),r(e);n({})}))})),g)]}))}))},e.prototype.watchUserReactions=function(e){return this.cachedUserReactions&&e(this.cachedUserReactions),this.userReactionsListeners.subscribe(e)},e.prototype.watchReactionsErrors=function(e){return this.reactionsErrorsListeners.subscribe(e)},e.prototype.fetchUserReactions=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.retrieveUserReactions()];case 1:return e=n.sent(),this.cachedUserReactions=e,[2,e];case 2:throw t=n.sent(),this.logger.error("Could not retrieve user reactions.",{error:t}),new Error("Could not retrieve user reactions");case 3:return[2]}}))}))},e.prototype.retrieveUserReactions=function(){var e=this;return u.promiseTimeout(new Promise((function(t,n){e.webSocketTransport.emit(l,{},(function(r,i){return r?(e.logger.error("Could not retrieve user reactions.",{error:r}),e.reactionsErrorsListeners.publish("Could not retrieve user reactions."),n(r)):a.isUserReactions(i)?void t(i):(e.reactionsErrorsListeners.publish("params of ServerReaction incomplete"),n("params of ServerReaction incomplete"))}))})),g)},e.prototype.fetchChannelReactions=function(){var e=this;return u.promiseTimeout(new Promise((function(t,n){e.webSocketTransport.emit(p,{},(function(r,i){return r?(e.logger.error("Could not fetch channel reactions.",{error:r}),e.reactionsErrorsListeners.publish("Could not fetch channel reactions."),n(r)):a.isChannelReactions(i)?(e.cachedChannelReactions=i,void t(i)):(e.reactionsErrorsListeners.publish("params of ChannelReaction incomplete"),n("params of ChannelReaction incomplete"))}))})),g)},e.prototype.watchChannelReactions=function(e){return this.cachedChannelReactions&&e(this.cachedChannelReactions),this.channelReactionsListeners.subscribe(e)},e.prototype.watchChannelReactionsEvent=function(){var e=this;this.webSocketTransport.on(f,(function(t){a.isChannelReactions(t)?(e.cachedChannelReactions=e.updateCachedChannelReactions(t),e.channelReactionsListeners.publish(e.cachedChannelReactions)):(e.logger.error("params of ChannelReaction incomplete"),e.reactionsErrorsListeners.publish("params of ChannelReaction incomplete"))}))},e.prototype.updateCachedChannelReactions=function(e){var t,n;if(null===this.cachedChannelReactions)return e;var i=this.cachedChannelReactions.reduce((,{});try{for(var s=r.__values(e),o=s.next();!o.done;o=s.next()){var a=o.value;i[a.itemId]=r.__assign({},a)}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var c=[];for(var u in i)c.push(i[u]);return c},e.prototype.offAllListeners=e.prototype.removeReaction=function(e){var t=this;return u.promiseTimeout(new Promise((function(n,r){t.webSocketTransport.emit(m,e,(function(i,s){return i?(t.logger.error("Could not remove the reaction from "+e.itemId,{error:i}),r(i)):a.isChannelReactions(s)?void n(s):r("Reactions received are incompleted")}))})),g)},e.instance={},e}();t.ReactionsAPIWS=y},94231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RealtimeAPI=void 0;var r=n(47730),i=n(29436),s=function(){function e(){}return e.getInstance=e.prototype.fetchUserReactions=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,i.FirestoreAPI.fetchCollectionItems({path:"reactions",where:[{fieldPath:"userId",opStr:"==",value:t},{fieldPath:"openChannelId",opStr:"==",value:e}]})];case 1:return[2,n.sent()]}}))}))},e}();t.RealtimeAPI=s},62964:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestAPI=void 0;var r=n(29436),i=n(20047),s=n(74169),o=n(49267),a=function(){function e(t){var n=o.default.instance.environment,r=n.API_V2_URL,i=n.CACHED_API,s=n.DEFAULT_AUTH_TOKEN;if(!r||!i||!s)throw new Error("Invalid environment");e.baseURL=r,e.default_auth_token=s;var a=t||{},c=a.url,u=a.authToken;c&&(e.baseURL=c),this.setTransport(u)}return e.prototype.handleUserChange=function(e){var t=null===e||void 0===e?void 0:e.token;this.setAPIToken(t)},e.prototype.setTransport=function(t){i.supportsFetch()?this.transport=new r.FetchTransport(e.baseURL,t):this.transport=new r.XHRTransport(e.baseURL,t)},e.getAPIInstance=function(){return e.apiInstance||(e.apiInstance=new e({url:this.baseURL,authToken:this.default_auth_token}),s.UserObservable.instance.onUserChanged(e.apiInstance.handleUserChange.bind(e.apiInstance))),e.apiInstance},e.prototype.setAPIToken=e.getCachedInstance=function(){return e.cachedInstance||(e.cachedInstance=new e({url:o.default.instance.environment.CACHED_API})),e.cachedInstance},e.getAPINoauthInstance=function(){return e.apiNoauthInstance||(e.apiNoauthInstance=new e({url:o.default.instance.environment.API_V2_URL})),e.apiNoauthInstance},e.prototype.getArenaUser=function(e){return this.transport.post("/profile/ssoexchange",e).then((function(e){var t=e.data.user,n=e.data.token;return{id:t._id,name:t.name,image:t.thumbnails.raw,email:t.profile.email,token:n,isModerator:t.isModerator,isBanned:t.isBanned}}))},e.prototype.fetchCachedAPI=function(e){return this.transport.get(e).then((function(e){return e}))},e.prototype.loadViewerCountry=e.prototype.sendReaction=function(e){return this.transport.post("/data/reactions",e).then((function(e){return e.result}))},e.prototype.collect=function(e){return this.transport.post("/collect",e)},e}();t.RestAPI=a},24393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageAPI=void 0;var r=n(20047),i=n(38047),s=n(61277),o=n(11990),a=function(){eturn e.prototype.getStorage=function(){return r.supportsLocalStorage()?new i.LocalStorageAPI:r.supportsCookies()?new o.CookiesAPI:new s.CacheAPI},e.prototype.setItem=function(e,t){this.storage.setItem(e,t)},e.prototype.getItem=function(e){return this.storage.getItem(e)},e.prototype.removeItem=function(e){this.storage.removeItem(e)},e}();t.StorageAPI=a},61277:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CacheAPI=void 0;var n=function(){eturn e.prototype.setItem=e.prototype.getItem=e.prototype.removeItem=function(e){delete this.cache[e]},e}();t.CacheAPI=n},11990:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CookiesAPI=void 0;var r=n(44969),i=function(){function e(){this.global=r.getGlobalObject()}return e.prototype.setItem=function(e,t){"string"!==typeof t&&(t=JSON.stringify(t));var n=new Date;n.setTime(n.getTime()+31536e6);var r="; expires="+n.toUTCString();this.global.document.cookie=e+"="+(t||"")+r+"; path=/"},e.prototype.getItem=function(e){for(var t=e+"=",n=this.global.document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){var s=i.substring(t.length,i.length);try{return s=JSON.parse(s)}catch(o){return s}}}return null},e.prototype.removeItem=e}();t.CookiesAPI=i},38047:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageAPI=void 0;var r=n(44969),i=function(){eturn e.prototype.setItem=e.prototype.getItem=function(e){return this.global.localStorage.getItem(e)},e.prototype.removeItem=e}();t.LocalStorageAPI=i},40359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArenaSocket=void 0;var r=n(47730),i=n(72872),s=n(98526),o=n(44969),a=function(){function e(e){var t,n,r;this.endpoint=e,this.errorObservable$=new i.Subject,this.connectionFailedObservable$=new i.Subject,this.onlineCounterObeservable$=new i.Subject,this.messageObeservable$=new i.Subject,this.connectionCloseObeservable$=new i.Subject,this.clientConnectionFailedObservable$=new i.Subject,this.socketConnectionFailedObservable$=new i.Subject,this.connectionConnectObeservable$=new i.BehaviorSubject(!1),this.reconnectObeservable$=new i.Subject,this.isTryingToReconnect=!1,this.missedPings=0,this.keyCallbacks=new Map,this.isOffline=!1,this.failedSocketReconnections=0,this.socket=this.connect(),this.logOptions={isDisconnected:(null===(t=this.socket)||void 0===t?void 0:t.readyState)===window.WebSocket.CLOSED||(null===(n=this.socket)||void 0===n?void 0:n.readyState)===window.WebSocket.CLOSING,isConnecting:(null===(r=this.socket)||void 0===r?void 0:r.readyState)===window.WebSocket.CONNECTING,isOnline:window.navigator.onLine,isTryingToReconnect:this.isTryingToReconnect}}return e.getInstance=e.prototype.connect=function(){var e=this;this.socket&&this.close(),this.connectTimeout=window.setTimeout((function(){return e.handleTimeout()}),4e3);var t=new window.WebSocket(this.endpoint);return this.addListeners(t),t},e.prototype.close=function(){this.socket&&(this.socket.close(),this.socket=void 0,this.cleanAllTimeouts())},e.prototype.finish=e.prototype.on=function(e,t){var n;switch(e){case"error":n=this.errorObservable$;break;case"connectFailed":n=this.connectionFailedObservable$;break;case"connect":n=this.connectionConnectObeservable$;break;case"message":n=this.messageObeservable$;break;case"close":n=this.connectionCloseObeservable$;break;case"reconnect":n=this.reconnectObeservable$;break;case"users":n=this.onlineCounterObeservable$}return n&&n.subscribe(t),n.unsubscribe.bind(this)},e.prototype.send=function(e,t){var n=this;if(!this.socket)throw new Error("ArenaSocket not found.");return o.promiseTimeout(new Promise((function(i){var s=n.connectionConnectObeservable$.subscribe((function(o){if(o){setTimeout((function(){s.unsubscribe()}),0);var a=""+ +new Date,c=JSON.stringify(r.__assign(r.__assign({},t),{cmd:e,key:a}));n.keyCallbacks.set(a,i),n.socket&&n.socket.send(c)}}))})),1e6)},e.prototype.pinPong=function(){this.missedPings++,this.missedPings>=3?this.errorObservable$.next("miss pings: "+this.missedPings):this.socket&&(this.socket.send("ping"),this.pingPongTimeout=window.setTimeout(this.pinPong.bind(this),3e4))},e.prototype.handleTimeout=e.prototype.cleanAllTimeouts=function(){this.connectTimeout&&clearTimeout(this.connectTimeout),this.keepAliveTimeout&&clearTimeout(this.keepAliveTimeout),this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.pingPongTimeout&&clearTimeout(this.pingPongTimeout)},e.prototype.reconnect=function(){var e=this;s.Logger.instance.log("warn","ArenaSocket reconnect",this.logOptions),this.isTryingToReconnect=!0,this.reconnectTimeout=window.setTimeout((function(){e.connect()}),5e3)},e.prototype.addListeners=function(e){var t=this;e&&(e.onopen=function(){t.connectTimeout&&clearTimeout(t.connectTimeout),t.pinPong(),t.connectionConnectObeservable$.next(!0)},e.onclose=e.onerror=function(e){s.Logger.instance.log("error","ArenaSocket onerror",r.__assign({error:e},t.logOptions)),t.errorObservable$.next(e)},e.onmessage=function(e){if("pong"===e.data)t.missedPings--;else if("message"===e.type){var n=JSON.parse(e.data),i=t.keyCallbacks.get(n.key);if(n.errMsg)return void s.Logger.instance.log("error","ArenaSocket message error: "+n.errMsg);if(i)i(n.payload.map((function(e){return e.content})));n.KindName&&t.messageObeservable$.next(r.__assign(r.__assign({},n.Content),{changeType:n.KindName})),"counter"===n.type&&t.onlineCounterObeservable$.next(n.users)}else t.messageObeservable$.next(e.data)},window.addEventListener("offline",(),window.addEventListener("online",(function(){!0===t.isOffline&&(t.isDisconnected()&&t.clientConnectionFailedObservable$.next("Client connection reestablished"),t.isOffline=!1)})),window.addEventListener("focus",(),this.socketConnectionFailedObservable$.subscribe((function(e){t.failedSocketReconnections>=10&&t.connectionFailedObservable$.next("Failed to reconnect"),t.failedSocketReconnections++,s.Logger.instance.log("error",e),t.reconnect()})),this.clientConnectionFailedObservable$.subscribe((function(e){s.Logger.instance.log("info",e),t.reconnect()})))},e.prototype.isDisconnected=function(){var e,t;return(null===(e=this.socket)||void 0===e?void 0:e.readyState)===window.WebSocket.CLOSED||(null===(t=this.socket)||void 0===t?void 0:t.readyState)===window.WebSocket.CLOSING},e.prototype.completeAllObservables=e.instances={},e}();t.ArenaSocket=a},45612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchTransport=void 0;var r=n(63470),i=n(79879),s=n(44969),o=function(){function e(e,t){this.baseURL=e,this.headers=new Headers,this.global=s.getGlobalObject(),t&&this.headers.append("Authorization","Bearer "+t)}return e.prototype.post=function(e,t){var n={method:"POST",body:JSON.stringify(t),headers:this.headers},r=s.getRequestURL(this.baseURL,e);return this.makeRequestResponse(r,n)},e.prototype.get=function(e){var t={method:"GET",headers:this.headers},n=s.getRequestURL(this.baseURL,e);return this.makeRequestResponse(n,t)},e.prototype.delete=function(e,t){var n={method:"DELETE",body:t?JSON.stringify(t):null,headers:this.headers},r=s.getRequestURL(this.baseURL,e);return this.makeRequestResponse(r,n)},e.prototype.makeRequestResponse=function(e,t){var n=this;return new i.SyncPromise((function(i,s){n.global.fetch(e,t).then((function(e){var t=r.Status.fromHttpCode(e.status);t!==r.Status.Success?s(t):i(e.json())})).catch(s)}))},e}();t.FetchTransport=o},32975:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addItem=t.listenToCollectionItemChange=t.fetchDocument=t.fetchCollectionItems=t.listenToDocumentChange=t.listenToCollectionChange=void 0;var r=n(47730),i=n(36472),s=n(30345),o=n(79879),a=n(49267);function c(){var e,t,n,r,o,c,u;return u=i.getApps().length?i.initializeApp({apiKey:null===(e=a.default.instance.environment)||void 0===e?void 0:e.FIREBASE_APIKEY,authDomain:null===(t=a.default.instance.environment)||void 0===t?void 0:t.FIREBASE_AUTHDOMAIN,projectId:null===(n=a.default.instance.environment)||void 0===n?void 0:n.FIREBASE_PROJECT_ID},"arena-firebase"):i.initializeApp({apiKey:null===(r=a.default.instance.environment)||void 0===r?void 0:r.FIREBASE_APIKEY,authDomain:null===(o=a.default.instance.environment)||void 0===o?void 0:o.FIREBASE_AUTHDOMAIN,projectId:null===(c=a.default.instance.environment)||void 0===c?void 0:c.FIREBASE_PROJECT_ID}),s.initializeFirestore(u,{experimentalAutoDetectLongPolling:!0})}t.listenToCollectionChange=function(e,t){var n=s.collection(c(),e.path);if(null===n)throw new Error("Invalid path: "+e.path);var i=[];e.orderBy&&e.orderBy.forEach((function(e){null!==n&&(e.desc?i.push(s.orderBy(e.field,"desc")):i.push(s.orderBy(e.field)))})),e.limit?i.push(s.limit(e.limit)):i.push(s.limit(1)),e.where&&e.where.forEach((function(e){null!==n&&i.push(s.where(e.fieldPath,e.opStr,e.value))}));var o=s.query.apply(void 0,r.__spreadArray([n],r.__read(i)));return s.onSnapshot(o,(function(e){var n=[];e.forEach((function(e){n.push(e.data())})),t(n)}),(function(t){console.error("listen error",t,e.path)}))},t.listenToDocumentChange=function(e,t){var n=s.doc(c(),e);if(null===n)throw new Error("Invalid path: "+e);return s.onSnapshot(n,(function(e){var n=e.data();t(n)}),()},t.fetchCollectionItems=function(e){return new o.SyncPromise((function(t,n){var i=s.collection(c(),e.path);if(null===i)throw new Error("Invalid path: "+e.path);var o=[];e.orderBy&&e.orderBy.forEach((function(e){e.desc?o.push(s.orderBy(e.field,"desc")):o.push(s.orderBy(e.field))})),e.endAt&&o.push(s.endAt.apply(void 0,r.__spreadArray([],r.__read(e.endAt)))),e.startAt&&o.push(s.startAt.apply(void 0,r.__spreadArray([],r.__read(e.startAt)))),e.limit?o.push(s.limit(e.limit)):o.push(s.limit(1)),e.where&&e.where.forEach((function(e){o.push(s.where(e.fieldPath,e.opStr,e.value))}));var a=s.query.apply(void 0,r.__spreadArray([i],r.__read(o)));return s.onSnapshot(a,(function(e){var n=[];e.forEach((),t(n)}),(function(e){n(e)}))}))},t.fetchDocument=function(e){return new o.SyncPromise((function(t){var n=s.doc(c(),e);if(null===n)throw new Error("Invalid path: "+e);s.getDoc(n).then((function(e){e.exists||t(null),t(e.data())}))}))},t.listenToCollectionItemChange=function(e,t){var n=s.collection(c(),e.path);if(null===n)throw new Error("Invalid path: "+e.path);var i=[];e.orderBy&&e.orderBy.forEach((function(e){e.desc?i.push(s.orderBy(e.field,"desc")):i.push(s.orderBy(e.field))})),e.limit?i.push(s.limit(e.limit)):i.push(s.limit(1)),e.where&&e.where.forEach(();var o=s.query.apply(void 0,r.__spreadArray([n],r.__read(i)));return s.onSnapshot(o,(,()},t.addItem=function(e,t){return new Promise((function(n,r){if(null===s.collection(c(),e))throw new Error("Invalid path: "+e);s.doc(c(),e);var i=s.doc(c(),e);return t.key=i.id,s.setDoc(i,t).then((function(){n(t)})).catch(r)}))}},35834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLTransport=void 0;var r=n(28687),i=n(49267),s=function(){function e(e,t,n){if(!i.default.instance.environment.GRAPHQL_ENDPOINT)throw new Error("Invalid environment");this.client=new r.GraphQLClient(i.default.instance.environment.GRAPHQL_ENDPOINT,{headers:{"content-type":"application/json","x-api-key":n,"ar-token":e,"ar-site-id":t}})}return e.prototype.setToken=e}();t.GraphQLTransport=s},29436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArenaSocket=t.XHRTransport=t.GraphQLTransport=t.FirestoreAPI=t.FetchTransport=void 0;var r=n(45612);Object.defineProperty(t,"FetchTransport",{enumerable:!0,get:function(){return r.FetchTransport}}),t.FirestoreAPI=n(32975);var i=n(35834);Object.defineProperty(t,"GraphQLTransport",{enumerable:!0,get:function(){return i.GraphQLTransport}});var s=n(90655);Object.defineProperty(t,"XHRTransport",{enumerable:!0,get:function(){return s.XHRTransport}});var o=n(40359);Object.defineProperty(t,"ArenaSocket",{enumerable:!0,get:function(){return o.ArenaSocket}})},18181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketTransport=void 0;var r=n(57046),i=n(49267),s=function(){function e(){}return e.getInstance=function(e){var t;if(!(null===(t=i.default.instance.environment)||void 0===t?void 0:t.ARENA_REALTIME_URL))throw new Error("Invalid environment");return this.instance[e]||(this.instance[e]=r.io(i.default.instance.environment.ARENA_REALTIME_URL,{transports:["websocket"]})),this.instance[e]},e.instance={},e}();t.WebSocketTransport=s},90655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHRTransport=void 0;var r=n(63470),i=n(79879),s=n(44969),o=function(){function e(e,t){this.baseURL=e,this.headers={},t&&(this.headers.Authorization="Bearer "+t)}return e.prototype.handleSyncPromise=function(e,t,n,i){var s=new XMLHttpRequest;for(var o in s.onreadystatechange=function(){if(4===s.readyState){var n=r.Status.fromHttpCode(s.status);n!==r.Status.Success?t(n):e(s.response)}},s.open(n,i),this.headers)this.headers.hasOwnProperty(o)&&s.setRequestHeader(o,this.headers[o]);return s},e.prototype.post=e.prototype.get=e.prototype.delete=function(e,t){var n=this,r=s.getRequestURL(this.baseURL,e);return new i.SyncPromise((function(e,i){n.handleSyncPromise(e,i,"DELETE",r).send(t?JSON.stringify(t):null)}))},e.prototype.makeRequestResponse=function(e,t,n){var r=this,o=s.getRequestURL(this.baseURL,e);return new i.SyncPromise((function(e,i){r.handleSyncPromise(e,i,t,o).send(n?JSON.stringify(n):null)}))},e}();t.XHRTransport=o},96914:60686:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isChannelReactions=t.isUserReactions=t.isThenable=t.isPlainObject=t.isPrimitive=t.isString=void 0;var r=n(47730);t.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},t.isPrimitive=t.isPlainObject=t.isThenable=t.isUserReactions=function(e){var t,n;if(!Array.isArray(e))return!1;try{for(var i=r.__values(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(!(o&&o.itemType&&o.reaction&&o.publisherId&&o.itemId&&o.userId))return!1}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0},t.isChannelReactions=function(e){var t,n;if(!Array.isArray(e))return!1;try{for(var i=r.__values(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(!(o&&o.widgetId&&o.itemId&&o.reactions))return!1}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}},44969:function(e,t,n){"use strict";var r=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUIDV4=t.promiseTimeout=t.isMobile=t.debounce=t.getRequestURL=t.isNodeEnv=t.getGlobalObject=void 0;var i={};.getGlobalObject=function(){return s()?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:i},t.isNodeEnv=s,t.getRequestURL=t.debounce=function(e,t,n){var r;return void 0===t&&(t=50),void 0===n&&(n={isImmediate:!1}),function(){for(var i=this,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=n.isImmediate&&void 0===r;void 0!==r&&clearTimeout(r),r=setTimeout((,t),a&&e.apply(this,s)}},t.isMobile=t.promiseTimeout=function(e,t){return Promise.race([e,new Promise((function(e,n){return setTimeout((function(){n(new Error("Timeout"))}),t)}))])},t.generateUUIDV4=function(){try{return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^n.g.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}catch(t){console.info("The browser doesn't support web cryptography")}var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,()}},69550:function(e,t){"use strict";function n(){var e=[];return{subscribe:publish:}Object.defineProperty(t,"__esModule",{value:!0}),t.createBehaviorObserver=t.createObserver=void 0,t.createObserver=n,t.createBehaviorObserver=function(e){var t=e,r=n();return{subscribe:publish:}},20047:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsCookies=t.supportsLocalStorage=t.supportsFetch=void 0;var r=n(44969);t.supportsFetch=function(){if(!("fetch"in r.getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}},t.supportsLocalStorage=t.supportsCookies=function(){var e,t;return!!(null===(t=null===(e=r.getGlobalObject())||void 0===e?void 0:e.navigator)||void 0===t?void 0:t.cookieEnabled)}},79879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncPromise=void 0;var r,i=n(60686);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(r||(r={}));var s=function(){function e(e){var t=this;this._state=r.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(r.RESOLVED,e)},this._reject=this._setResult=function(e,n){t._state===r.PENDING&&(i.isThenable(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=this._executeHandlers=try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}return e.prototype.toString=function(){return"[object SyncPromise]"},e.resolve=e.reject=e.all=e.prototype.then=e.prototype.catch=e.prototype.finally=e}();t.SyncPromise=s},70253:function(e,t,n){"use strict";n.d(t,{Af:function(){return l},C6:function(){return S},H9:function(){return d},Jn:function(){return I},KN:function(){return D},Mq:function(){return T},P2:function(){return A},TP:function(){return O},Ub:function(){return C},Vr:function(){return p},Xd:function(){return m},Z8:function(){return v},ZF:function(){return E},ZR:function(){return s.ZR},l4:function(){return u},lz:function(){return f},qX:function(){return g},wN:function(){return y}});var r=n(16054),i=n(14594),s=n(67);onst a="@firebase/app",c=new i.Yd("@firebase/app"),u="[DEFAULT]",h={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},l=new Map,f=new Map;ion v(){f.clear()}const b={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},w=new s.LL("app","Firebase",b);onst I="9.0.0";function E(e,t={}){if("object"!==typeof t){t={name:t}}const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!==typeof i||!i)throw w.create("bad-app-name",{appName:String(i)});const o=l.get(i);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw w.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const r of f.values())a.addComponent(r);const c=new _(e,n,a);return l.set(i,c),c}m(new r.wA("platform-logger",(,"PRIVATE")),D(a,"0.7.0",N),D("fire-js","")},16054:function(e,t,n){"use strict";n.d(t,{H0:function(){return c},wA:function(){return s}});var r=n(47730),i=n(67),s=),o="[DEFAULT]",a=function(){eturn e.prototype.get=e.prototype.getImmediate=e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=e.prototype.clearInstance=e.prototype.delete=e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=e.prototype.getOptions=e.prototype.initialize=e.prototype.onInit=e.prototype.invokeOnInitCallbacks=e.prototype.getOrInitializeService=e.prototype.normalizeInstanceIdentifier=e.prototype.shouldAutoInitialize=e}();var c=)},36472:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return r.ZR},SDK_VERSION:function(){return r.Jn},_DEFAULT_ENTRY_NAME:function(){return r.l4},_addComponent:function(){return r.H9},_addOrOverwriteComponent:function(){return r.Vr},_apps:function(){return r.Af},_clearComponents:function(){return r.Z8},_components:function(){return r.lz},_getProvider:function(){return r.qX},_registerComponent:function(){return r.Xd},_removeServiceInstance:function(){return r.wN},deleteApp:function(){return r.P2},getApp:function(){return r.Mq},getApps:function(){return r.C6},initializeApp:function(){return r.ZF},onLog:function(){return r.TP},registerVersion:function(){return r.KN},setLogLevel:function(){return r.Ub}});var r=n(70253);(0,r.KN)("firebase","9.0.2","app")},30345:function(e,t,n){"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:function(){return Dd},Bytes:function(){return Ef},CACHE_SIZE_UNLIMITED:function(){return rf},CollectionReference:function(){return Ql},DocumentReference:function(){return zl},DocumentSnapshot:function(){return nd},FieldPath:function(){return _f},FieldValue:function(){return Tf},Firestore:function(){return sf},FirestoreError:function(){return Ur},GeoPoint:function(){return Sf},LoadBundleTask:function(){return nf},Query:function(){return Hl},QueryConstraint:function(){return cd},QueryDocumentSnapshot:function(){return rd},QuerySnapshot:function(){return id},SnapshotMetadata:function(){return td},Timestamp:function(){return Yr},Transaction:function(){return Hd},WriteBatch:function(){return Nd},_DatabaseId:function(){return kl},_DocumentKey:function(){return bi},_EmptyCredentialsProvider:function(){return Vr},_FieldPath:function(){return si},_cast:function(){return ql},_debugAssert:function(){return kr},_isBase64Available:function(){return ai},_logWarn:function(){return Nr},_validateIsNotUsedTogether:function(){return Ul},addDoc:function(){return Bd},arrayRemove:function(){return Xd},arrayUnion:function(){return Yd},clearIndexedDbPersistence:function(){return df},collection:function(){return Wl},collectionGroup:function(){return Jl},connectFirestoreEmulator:function(){return Gl},deleteDoc:function(){return qd},deleteField:function(){return Wd},disableNetwork:function(){return gf},doc:function(){return Yl},documentId:function(){return If},enableIndexedDbPersistence:function(){return hf},enableMultiTabIndexedDbPersistence:function(){return lf},enableNetwork:function(){return mf},endAt:function(){return Id},endBefore:function(){return _d},ensureFirestoreConfigured:function(){return cf},executeWrite:function(){return Gd},getDoc:function(){return Pd},getDocFromCache:function(){return kd},getDocFromServer:function(){return Ld},getDocs:function(){return Md},getDocsFromCache:function(){return Ud},getDocsFromServer:function(){return Fd},getFirestore:function(){return af},increment:function(){return Zd},initializeFirestore:function(){return of},limit:function(){return md},limitToLast:function(){return gd},loadBundle:function(){return vf},namedQuery:function(){return bf},onSnapshot:function(){return Kd},onSnapshotsInSync:function(){return $d},orderBy:function(){return dd},query:function(){return ud},queryEqual:function(){return Zl},refEqual:function(){return Xl},runTransaction:function(){return Qd},serverTimestamp:function(){return Jd},setDoc:function(){return jd},setLogLevel:function(){return Dr},snapshotEqual:function(){return od},startAfter:function(){return bd},startAt:function(){return vd},terminate:function(){return yf},updateDoc:function(){return Vd},waitForPendingWrites:function(){return pf},where:function(){return ld},writeBatch:function(){return ep}});var r=n(70253),i=n(16054),s=n(14594),o=n(67),a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)};function c(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},l=l||{},f=h||self;function d(){}r g="closure_uid_"+(1e9*Math.random()>>>0),y=0;{};E.prototype.s=!1,E.prototype.na=E.prototype.M=var S=Array.prototype.indexOf?A=Array.prototype.forEach? N,R=String.prototype.trim?{var k=f.navigator;if(k){var L=k.userAgent;if(L){N=L;break e}}N=""}r F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");" "]=d;var q,B=P(N,"Opera"),K=P(N,"Trident")||P(N,"MSIE"),$=P(N,"Edge"),G=$||K,z=P(N,"Gecko")&&!(P(N.toLowerCase(),"webkit")&&!P(N,"Edge"))&&!(P(N,"Trident")||P(N,"MSIE"))&&!P(N,"Edge"),H=P(N.toLowerCase(),"webkit")&&!P(N,"Edge");:{var W="",J=);if(J&&(W=J?J[1]:""),K){var Y=Q();if(null!=Y&&Y>parseFloat(W)){q=String(Y);break e}}q=W}var X,Z={};f(f.document&&K){var te=Q();X=te||(parseInt(q,10)||void 0)}else X=void 0;var ne=X,re=);unction se(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(z){e:{try{V(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:oe[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&se.Z.h.call(this)}}ie.prototype.h=function(){this.defaultPrevented=!0},I(se,ie);var oe={2:"touch",3:"pen",4:"mouse"};se.prototype.h=var ae="closure_listenable_"+(1e6*Math.random()|0),ce=0;ototype.add=var pe="closure_lm_"+(1e6*Math.random()|0),me={};__closure_events_fn_"+(1e9*Math.random()>>>0);nction De(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var i=t;j(t=new ie(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Oe(o,r,!0,t)&&i}if(i=Oe(o=t.g=e,r,!0,t)&&i,i=Oe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Oe(o=t.g=n[s],r,!1,t)&&i}(Ae,E),Ae.prototype[ae]=!0,Ae.prototype.removeEventListener=Ae.prototype.M=Ae.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ae.prototype.O=var Ce=f.JSON.stringify;ar Re,Pe=),xe=new())((function(){return new ke}),(function(e){return e.reset()})),ke=);r Ue=!1,Fe=new Pe;Ae),(u=Ve.prototype).da=!1,u.S=null,u.kb=u.start=u.M=var $e=function(e){eturn function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=t.prototype.M=t}(E);(Ge,E);var ze=[];rototype.M=Ge.prototype.handleEvent=We.prototype.Aa=function(){this.g=!1},We.prototype.info=function(){};var Ye={},Xe=null;nction tt(e){var t=Ze();De(t,new et(t,e))}function nt(e,t){ie.call(this,Ye.STAT_EVENT,e),this.stat=t}Ma="serverreachability",I(et,ie),Ye.STAT_EVENT="statevent",I(nt,ie),Ye.Na="timingevent",I(it,ie);var ot={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},at={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ct(){}unction ht(){}ct.prototype.h=null;var lt,ft={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dt(){ie.call(this,"d")}unction mt(){}dt,ie),I(pt,ie),I(mt,ct),mt.prototype.g=function(){return new XMLHttpRequest},mt.prototype.i=lt=new mt;var vt=45e3,bt={},wt={};t(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||fn(n.i,e)))if(n.I=e.N,!e.J&&fn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;er(n),Kn(n)}Yn(n),rt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=st(w(n.ab,n),6e3));if(1>=ln(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else rr(n,11)}else if((e.J||n.g==e)&&er(n),!C(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var c=s[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=e.g;if(u){var h=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(P(h,"spdy")||P(h,"quic")||P(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(dn(l,l.h),l.h=null))}if(r.D){var f=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Kt(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=sr(r,r.H?r.la:null,r.W),d.J){pn(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(Ot(p),At(p)),r.g=d}else Jn(r);0<n.l.length&&zn(n)}else"stop"!=s[0]&&"close"!=s[0]||rr(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?rr(n,7):Bn(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}tt(4)}catch(s){}}function Pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)A(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(p(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}gt.prototype).setTimeout=function(e){this.P=e},u.gb=u.Ia=function(e){try{if(e==this.g)e:{var t=Un(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||G||this.g&&(this.h.h||this.g.ga()||Fn(this.g)))){this.I||4!=t||7==n||tt(8==n||0>=r?3:2),Ot(this);var i=this.g.ba();this.N=i;t:if(Et(this)){var s=Fn(this.g);e="";var o=s.length,a=4==Un(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Nt(this),Ct(this);var c="";break t}this.h.i=new f.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==i,this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(u)){var l=u;break t}}l=null}if(!(i=l)){this.i=!1,this.o=3,rt(12),Nt(this),Ct(this);break e}Je(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rt(this,i)}this.U?(Tt(this,t,c),G&&this.i&&3==t&&(He(this.V,this.W,"tick",this.fb),this.W.start())):(Je(this.j,this.m,c,null),Rt(this,c)),4==t&&Nt(this),this.i&&!this.I&&(4==t?tr(this.l,this):(this.i=!1,At(this)))}else 400==i&&0<c.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),Nt(this),Ct(this)}}}catch(t){}},u.fb=u.cancel=u.eb=(u=xt.prototype).R=u.T=u.get=u.set=u.forEach=var Mt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;unction Ft(e){return new Ut(e)}ype.toString=var Qt=/[#\/\?@]/g,Wt=/[#\?:]/g,Jt=/[#\?]/g,Yt=/[#\?@]/g,Xt=/#/g;prototype).add=u.forEach=u.T=u.R=u.set=u.get=u.toString=var on=function(e,t){this.h=e,this.g=t};ar cn,un=10;on gn(){}ototype.cancel=gn.prototype.stringify=function(e){return f.JSON.stringify(e,void 0)},gn.prototype.parse=I(wn,ct),wn.prototype.g=wn.prototype.i=(cn={},function(){return cn}),I(_n,Ae);var In=0;_n.prototype).open=u.send=u.abort=u.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof f.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;En(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},u.Sa=u.Ua=u.Ta=u.ha=u.setRequestHeader=function(e,t){this.v.append(e,t)},u.getResponseHeader=u.getAllResponseHeaders=Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:);var An=f.JSON.parse;(Dn,Ae);var On="",Cn=/^https?$/i,Nn=["POST","PUT"];ction kn(e){if(e.h&&"undefined"!=typeof l&&(!e.C[1]||4!=Un(e)||2!=e.ba()))if(e.v&&4==Un(e))Be(e.Fa,0,e);else if(De(e,"readystatechange"),4==Un(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(Mt)[1]||null;if(!s&&f.self&&f.self.location){var o=f.self.location.protocol;s=o.substr(0,o.length-1)}i=!Cn.test(s?s.toLowerCase():"")}t=i}if(t)De(e,"complete"),De(e,"success");else{e.m=6;try{var a=2<Un(e)?e.g.statusText:""}catch(c){a=""}e.j=a+" ["+e.ba()+"]",xn(e)}}finally{Ln(e)}}}tion jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Kt(e,t,n))}e){null!=e.B&&(f.clearTimeout(e.B),e.B=null)}nction tr(e,t){var n=null;if(e.g==t){er(e),Xn(e),e.g=null;var r=2}else{if(!fn(e.i,t))return;n=t.D,pn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;De(r=Ze(),new it(r,n,t,i)),zn(e)}else Jn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&e,t)||2==r&&Yn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rr(e,5);break;case 4:rr(e,10);break;case 3:rr(e,6);break;default:rr(e,2)}}ion ar(){}.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lt.g(),this.C=this.u?ut(this.u):ut(lt),this.g.onreadystatechange=w(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Pn(this,s)}e=n||"";var i=new xt(this.headers);r&&Pt(r,(function(e,t){i.set(t,e)})),r=i.T()),n=f.FormData&&e instanceof f.FormData,!(0<=S(Nn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((,this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mn(this),0<this.B&&((this.K=function(e){return K&&ee()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.pa,this)):this.A=Be(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Pn(this,s)}},u.pa=u.abort=u.M=u.Fa=u.cb=u.ba=u.ga=u.Qa=u.Da=function(){return this.m},u.La=(u=qn.prototype).ma=8,u.G=1,u.hb=u.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new gt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?j(n=U(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"===typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Wn(this,t,r),Kt(i=Ft(this.F),"RID",e),Kt(i,"CVER",22),this.D&&Kt(i,"X-HTTP-Session-Id",this.D),Qn(this,i),this.o&&n&&jn(i,this.o,n),dn(this.i,t),this.Ra&&Kt(i,"TYPE","init"),this.ja?(Kt(i,"$req",r),Kt(i,"SID","null"),t.$=!0,_t(t,i,null)):_t(t,i,r),this.G=2}}else 3==this.G&&(e?Hn(this,e):0==this.l.length||hn(this.i)||Hn(this))},u.Ga=u.bb=u.ab=u.jb=(u=ar.prototype).xa=function(){},u.wa=function(){},u.va=function(){},u.ua=function(){},u.Oa=function(){},cr.prototype.g=function(e,t){return new ur(e,t)},I(ur,Ae),ur.prototype.m=ur.prototype.close=ur.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Gn(this.g,t)}else this.v?((t={}).__data__=Ce(e),Gn(this.g,t)):Gn(this.g,e)},ur.prototype.M=I(hr,dt),I(lr,pt),I(fr,ar),fr.prototype.xa=function(){De(this.g,"a")},fr.prototype.wa=function(e){De(this.g,new hr(e))},fr.prototype.va=fr.prototype.ua=cr.prototype.createWebChannel=cr.prototype.g,ur.prototype.send=ur.prototype.u,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,at.COMPLETE="complete",ht.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",Ae.prototype.listen=Ae.prototype.N,Dn.prototype.listenOnce=Dn.prototype.O,Dn.prototype.getLastError=Dn.prototype.La,Dn.prototype.getLastErrorCode=Dn.prototype.Da,Dn.prototype.getStatus=Dn.prototype.ba,Dn.prototype.getResponseJson=Dn.prototype.Qa,Dn.prototype.getResponseText=Dn.prototype.ga,Dn.prototype.send=Dn.prototype.ea;var dr=function(){return new cr},pr=mr=ot,gr=at,yr=Ye,vr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},br=wn,wr=ht,_r=Dn,Ir=n(34155);r.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let Tr="9.0.2";const Sr=new s.Yd("@firebase/firestore");nction Or(e,...t){if(Sr.logLevel<=s.in.DEBUG){const n=t.map(Rr);Sr.debug(`Firestore (${Tr}): ${e}`,...n)}}function Cr(e,...t){if(Sr.logLevel<=s.in.ERROR){const n=t.map(Rr);Sr.error(`Firestore (${Tr}): ${e}`,...n)}}ction xr(e,t){e||Pr()}nst Mr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ur extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=}lass jr{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}ss Kr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Er.FIRST_PARTY}get authHeadersT=-1;class Hr{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=zr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Qr(e,t){return e<t?-1:e>t?1:0}unction Jr(e){return e+"\0"}lass Xr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xr(e)}ompareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}Timestamp(){return this.timestamp}} ii=/^[_a-zA-Z][_a-zA-Z0-9]*$/;lass oi{ss ci{constructor(e){this.binaryString=e}reTo(e){return Qr(this.binaryString,e.binaryString)}ci.EMPTY_BYTE_STRING=new ci("");const ui=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);constructor(e){this.path=e}static fromPath(e){return new bi(ri.fromString(e))}tring(){return this.path.toString()}ion Ei(e,t){const n=wi(e),r=wi(t);if(n!==r)return Qr(n,r);switch(n){case 0:return 0;case 1:return Qr(e.booleanValue,t.booleanValue);case 2:return e,t);case 3:return Ti(e.timestampValue,t.timestampValue);case 4:return Ti(mi(e),mi(t));case 5:return Qr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=fi(e),r=fi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return e.referenceValue,t.referenceValue);case 8:return e.geoPointValue,t.geoPointValue);case 9:return e.arrayValue,t.arrayValue);case 10:return e.mapValue,t.mapValue);default:throw Pr()}}tion Oi(e){return!!e&&"integerValue"in e}function Ci(e){return!!e&&"arrayValue"in e}function Ni(e){return!!e&&"nullValue"in e} Mi{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocumenttatic newFoundDocumenttatic newNoDocument(e,t){return new Mi(e,2,t,ki.empty(),0)}static newUnknownDocumentnvertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}etHasCommittedMutations(){return this.documentState=2,this}et hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}sValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}lonection ji(e){const t=Lr(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>e))).join(","),e+="|ob:",e+=t.orderBy.map(().join(","),gi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Xi(t.startAt)),t.endAt&&(e+="|ub:",e+=Xi(t.endAt)),t.A=e}return t.A}nstructor(e,t){this.position=e,this.before=t}}function Xi(e){return`${e.before?"b":"a"}:${e.position.map((e=>Si(e))).join(",")}`}nction ts(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?bi.comparator(bi.fromName(o.referenceValue),n.key):Ei(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}tion os(e){return!gi(e.limit)&&"F"===e.limitType}ion fs(e){const t=Lr(e);if(!t.S)if("F"===t.limitType)t.S=Fi(t.path,t.collectionGroup,ls(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of ls(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Zi(i.field,t))}const n=t.endAt?new Yi(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Yi(t.startAt.position,!t.startAt.before):null;t.S=Fi(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}ction gs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(().join(", ")}]`),gi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(().join(", ")}]`),e.startAt&&(t+=", startAt: "+Xi(e.startAt)),e.endAt&&(t+=", endAt: "+Xi(e.endAt)),`Target(${t})`}(fs(e))}; limitType=${e.limitType})`}function ys(e,t){return t.isFoundDocument()&&e,t)&&e,t)&&e,t)&&e,t)}xtends Es{constructor(e){super(),this.elements=e}}lass Ns extends Es{constructor(e){super(),this.elements=e}}lass Ps extends Es{constructor(e,t){super(),this.N=e,this.C=t}}ass Ls{constructor(e,t){this.field=e,this.transform=t}}class Ms{constructor(e,t){this.version=e,this.transformResults=t}}ass js{}unction qs(e,t,n){e instanceof Gs?function(e,t,n){if(!Fs(e.precondition,t))return;const r=e.value.clone(),i=Ws(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument($s(t),r).setHasLocalMutations()}(e,t,n):e instanceof zs?function(e,t,n){if(!Fs(e.precondition,t))return;const r=Ws(e.fieldTransforms,n,t),i=t.data;i.setAll(Hs(e)),i.setAll(r),t.convertToFoundDocument($s(t),i).setHasLocalMutations()}(e,t,n):e,t)}function Bs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=As(r.transform,e||null);null!=i&&(null==n&&(n=ki.empty()),n.set(r.field,i))}return n||null}s extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ys extends js{class Xs{constructor(e){this.count=e}}var Zs,eo;o=Zs||(Zs={}))[eo.OK=0]="OK",eo[eo.CANCELLED=1]="CANCELLED",eo[eo.UNKNOWN=2]="UNKNOWN",eo[eo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eo[eo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eo[eo.NOT_FOUND=5]="NOT_FOUND",eo[eo.ALREADY_EXISTS=6]="ALREADY_EXISTS",eo[eo.PERMISSION_DENIED=7]="PERMISSION_DENIED",eo[eo.UNAUTHENTICATED=16]="UNAUTHENTICATED",eo[eo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eo[eo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eo[eo.ABORTED=10]="ABORTED",eo[eo.OUT_OF_RANGE=11]="OUT_OF_RANGE",eo[eo.UNIMPLEMENTED=12]="UNIMPLEMENTED",eo[eo.INTERNAL=13]="INTERNAL",eo[eo.UNAVAILABLE=14]="UNAVAILABLE",eo[eo.DATA_LOSS=15]="DATA_LOSS";lass io{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}EMPTY=null,so.RED=!0,so.BLACK=!1,so.EMPTY=new nst co=new ro(bi.comparator);function uo(){return co}const ho=new ro(bi.comparator);function lo(){return ho}const fo=new ro(bi.comparator);function po(){return fo}const mo=new oo(bi.comparator);onst yo=new oo(Qr);ss _o{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class Io{constructor(e,t){this.targetId=e,this.O=t}}ass So{{const t=new Map;this.et.forEach(();let n=go();this.st.forEach(();const r=new bo(e,t,this.it,this.nt,n);return this.nt=uo(),this.st=Ao(),this.it=new oo(Qr),r}moveTarget(e){this.et.delete(e)}n Ao(){return new ro(bi.comparator)}onst Oo={asc:"ASCENDING",desc:"DESCENDING"},Co={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class No{constructor(e,t){this.databaseId=e,this.D=t}}t){let n;if(t instanceof Gs)n={update:Ko(e,t.key,t.value)};else if(t instanceof Js)n={delete:Uo(e,t.key)};else if(t instanceof zs)n={update:Ko(e,t.key,t.data),updateMask:sa(t.fieldMask)};else{if(!(t instanceof Ys))return Pr();n={verify:Uo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(()),t.precondition.isNone||(n.currentDocument=e,t.precondition)),n}function zo(e,t){const n=t.currentDocument?t.currentDocument):Us.none(),r=t.updateTransforms?t.updateTransforms.map((t=>e,t))):[];if(t.update){t.update.name;const i=Fo(e,t.update.name),s=new ki({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new oi(t.map((e=>si.fromServerFormat(e))))}(t.updateMask);return new zs(i,s,e,n,r)}return new Gs(i,s,n,r)}if(t.delete){const r=Fo(e,t.delete);return new Js(r,n)}if(t.verify){const r=Fo(e,t.verify);return new Ys(r,n)}return Pr()}unction Qo(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=jo(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=jo(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=t.filters);i&&(n.structuredQuery.where=i);const s=t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Yo(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Yo(t.endAt)),n}function Wo(e){let t=Vo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Jo(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(());let a=null;n.limit&&(a=n.limit));let c=null;n.startAt&&(c=Xo(n.startAt));let u=null;return n.endAt&&(u=Xo(n.endAt)),is(t,i,o,s,a,"F",c,u)}ction Zo(e){return Oo[e]}a(e){const t=e.length;if(xr(t>=2),2===t)return xr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ri.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Pr(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Pr()}s=t+2}return new ri(r)}class la{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class fa{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}fa.store="owner",fa.key="owner";class da{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}da.store="mutationQueues",da.keyPath="userId";a.store="mutations",pa.keyPath="batchId",pa.userMutationsIndex="userMutationsIndex",pa.userMutationsKeyPath=["userId","batchId"];class ma{constructor(){}tatic prefixForPathtatic keyma.store="documentMutations",ma.PLACEHOLDER=new ma;class ga{constructor(e,t){this.path=e,this.readTime=t}}class ya{constructor(e,t){this.path=e,this.version=t}}a.store="remoteDocuments",va.readTimeIndex="readTimeIndex",va.readTimeIndexPath="readTime",va.collectionReadTimeIndex="collectionReadTimeIndex",va.collectionReadTimeIndexPath=["parentPath","readTime"];class ba{constructor(e){this.byteSize=e}}ba.store="remoteDocumentGlobal",ba.key="remoteDocumentGlobalKey";a.store="targets",wa.keyPath="targetId",wa.queryTargetsIndexName="queryTargetsIndex",wa.queryTargetsKeyPath=["canonicalId","targetId"];class _a{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}_a.store="targetDocuments",_a.keyPath=["targetId","path"],_a.documentTargetsIndex="documentTargetsIndex",_a.documentTargetsKeyPath=["path","targetId"];class Ia{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Ia.key="targetGlobalKey",Ia.store="targetGlobal";class Ea{constructor(e,t){this.collectionId=e,this.parent=t}}Ea.store="collectionParents",Ea.keyPath=["collectionId","parent"];a.store="clientMetadata",Ta.keyPath="clientId";class Sa{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Sa.store="bundles",Sa.keyPath="bundleId";class Aa{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Aa.store="namedQueries",Aa.keyPath="name";const Da=[da.store,pa.store,ma.store,va.store,wa.store,fa.store,Ia.store,_a.store,Ta.store,ba.store,Ea.store,Sa.store,Aa.store],Oa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";lass Na{uccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Na.resolve(t)}tatic resolve(e){return new Na(((t,n)=>{t(e)}))}ss Ra{t It(){return this.Tt.promise}lass Pa{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Pa.Rt((0,o.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}tatic bt(){if("undefined"==typeof indexedDB)return!1;if(Pa.Pt())return!0;const e=(0,o.z$)(),t=Pa.Rt(e),n=0<t&&t<10,r=Pa.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof Ir&&"YES"===(null===(e={SC_ATTR:"data-styled-arena"})||void 0===e?void 0:e.Vt)}tatic Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}sync Dt(e){return this.db||(Or("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Ur(Mr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ur(Mr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ka(e,r))},r.onupgradeneeded=e=>{Or("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.At.Ct(t,r.transaction,e.oldVersion,this.version).next((()=>{Or("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Nt&&(this.db.onversionchange=e=>this.Nt(e)),this.db}sync runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Dt(e);const t=Ra.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch(().toPromise();return s.catch((()=>{})),await t.It,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(Or("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}ss Ma{constructor(e){this.store=e}ddleteountt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,((e,t)=>{r.push(t)})).next((()=>r))}ion Ua(e){return new Na(((t,n)=>{e.onsuccess=e.onerror=e=>{const t=ja(e.target.error);n(t)}}))}let Fa=!1;function ja(e){const t=Pa.Rt((0,o.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ur("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fa||(Fa=!0,setTimeout((()=>{throw e}),0)),e}}return e}ass Ba{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}pplyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qs(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qs(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Xr.min())}))}lass Ka{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){xr(e.mutations.length===n.length);let r=po();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ka(e,t,n,r)}}lass Ga{constructor(e){this.Wt=e}}function za(e,t){if(t.document)return $o(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=bi.fromSegments(t.noDocument.path),n=Ya(t.noDocument.readTime),r=Mi.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=bi.fromSegments(t.unknownDocument.path),n=Ya(t.unknownDocument.version);return Mi.newUnknownDocument(e,n)}return Pr()}function Ha(e,t,n){const r=Qa(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=e.Wt,t),s=t.hasCommittedMutations;return new va(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Ja(t.version),s=t.hasCommittedMutations;return new va(null,new ga(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Ja(t.version);return new va(new ya(e,n),null,null,!0,r,i)}return Pr()}tion Xa(e,t){const n=(t.baseMutations||[]).map((t=>zo(e.Wt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>zo(e.Wt,t))),i=Yr.fromMillis(t.localWriteTimeMs);return new Ba(t.batchId,i,n,r)}function Za(e){const t=Ya(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ya(e.lastLimboFreeSnapshotVersion):Xr.min();let r;var i;return void 0!==e.query.documents?(xr(1===(i=e.query).documents.length),r=fs(ss(Vo(i.documents[0])))):r=e.query),new $a(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ci.fromBase64String(e.resumeToken))}function ec(e,t){const n=Ja(t.snapshotVersion),r=Ja(t.lastLimboFreeSnapshotVersion);let i;i=qi(t.target)?Ho(e.Wt,t.target):Qo(e.Wt,t.target);const s=t.resumeToken.toBase64();return new wa(t.targetId,ji(t.target),n,s,t.sequenceNumber,r,i)}lass nc{getBundleMetadata(e,t){return rc(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Ya(t.createTime),version:t.version};var t}))}saveBundleMetadataetNamedQuery(e,t){return ic(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:tc(t.bundledQuery),readTime:Ya(t.readTime)};var t}))}saveNamedQueryfunction rc(e){return qa(e,Sa.store)}function ic(e){return qa(e,Aa.store)}class sc{constructor(){this.Gt=new oc}addToCollectionParentIndex(e,t){return this.Gt.add(t),Na.resolve()}getCollectionParents(e,t){return Na.resolve(this.Gt.getEntries(t))}}lass ac{constructor(){this.zt=new oc}unction cc(e){return qa(e,Ea.store)}const uc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};unction lc(e,t,n){const r=e.store(pa.store),i=e.store(ma.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Kt({range:o},();s.push(c.next(());const u=[];for(const h of n.mutations){const e=ma.key(t,h.key.path,n.batchId);s.push(i.delete(e)),u.push(h.key)}return Na.waitFor(s).next((()=>u))}c.DEFAULT_COLLECTION_PERCENTILE=10,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hc.DEFAULT=new hc(41943040,hc.DEFAULT_COLLECTION_PERCENTILE,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hc.DISABLED=new hc(-1,0,0);class dc{eckEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).Kt({index:pa.userMutationsIndex,range:n},().next((()=>t))}addMutationBatch(e,t,n,r){const i=gc(e),s=mc(e);return s.add({}).next((o=>{xr("number"==typeof o);const a=new Ba(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Go(e.Wt,t))),i=n.mutations.map((t=>Go(e.Wt,t)));return new pa(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),u=[];let h=new oo(((e,t)=>Qr(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ma.key(this.userId,e.key.path,o);h=h.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,ma.PLACEHOLDER))}return h.forEach((),e.addOnCommittedListener((),Na.waitFor(u).next((()=>a))}))}tNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return mc(e).Kt({index:pa.userMutationsIndex,range:r},().next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return mc(e).Kt({index:pa.userMutationsIndex,range:t,reverse:!0},().next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).Lt(pa.userMutationsIndex,t).next(()}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ma.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return gc(e).Kt({range:r},().next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new oo(Qr);const r=[];return t.forEach((t=>{const i=ma.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=gc(e).Kt({range:s},();r.push(o)})),Na.waitFor(r).next((()=>this.Zt(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ma.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new oo(Qr);return gc(e).Kt({range:s},().next((()=>this.Zt(e,o)))}formConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Na.resolve();const n=IDBKeyRange.lowerBound(ma.prefixForUser(this.userId)),r=[];return gc(e).Kt({range:n},().next(()}))}e(e){return yc(e).get(this.userId).next((e=>e||new da(this.userId,-1,"")))}}function pc(e,t,n){const r=ma.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return gc(e).Kt({range:s,qt:!0},().next((()=>o))}function mc(e){return qa(e,pa.store)}function gc(e){return qa(e,ma.store)}ass bc{rn _c(e).get(Ia.key).next(()}oeTargetCount(e){return this.re(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ji(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return wc(e).Kt({range:r,index:wa.queryTargetsIndexName},().next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Ic(e);return t.forEach((t=>{const s=aa(t.path);r.push(i.put(new _a(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))})),Na.waitFor(r)}tainsKey(e,t){const n=aa(t.path),r=IDBKeyRange.bound([n],[Jr(n)],!1,!0);let i=0;return Ic(e).Kt({index:_a.documentTargetsIndex,qt:!0,range:r},().next(()}function wc(e){return qa(e,wa.store)}function _c(e){return qa(e,Ia.store)}function Ic(e){return qa(e,_a.store)}ss Ac{tarttop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){const t=this.de?3e5:6e4;Or("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.we=null,this.de=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){La(e)?Or("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ec(e)}await this._e(e)}))}}class Dc{constructor(e,t){this.me=e,this.params=t}oveOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}etCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(().next(().next(().next((e=>(u=Date.now(),Ar()<=s.in.DEBUG&&Or("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-h}ms`),Na.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Oc{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Dc(e,t)}(this,t)}eference(e,t,n){return Cc(e,n)}rkPotentiallyOrphaned(e,t){return Cc(e,t)}emoveOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,((s,o)=>{if(o<=t){const t=this.Ie(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s),Ic(e).delete([0,aa(s.path)]))))}));r.push(t)}})).next((()=>Na.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}(e,t){const n=Ic(e);let r,i=Gr.T;return n.Kt({index:_a.documentTargetsIndex},().next(()}lass Nc{eleteass Rc{etReadTimeddEntryemoveEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Mi.newInvalidDocument(e),readTime:t})}getEntryetEntries(e,t){return this.getAllFromCache(e,t)}ssertNotApplied(){}}class Pc{constructor(e,t){this.N=e,this.Ht=t}addEntryemoveEntrytEntry(e,t){return Lc(e).get(Mc(t)).next((e=>this.Re(t,e)))}be(e,t){return Lc(e).get(Mc(t)).next((e=>({document:this.Re(t,e),size:fc(e)})))}(e,t,n){if(t.isEmpty())return Na.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Lc(e).Kt({range:r},((e,t,r)=>{const o=bi.fromSegments(e);for(;s&&bi.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()})).next(()}getDocumentsMatchingQuery(e,t,n){let r=uo();const i=t.path.length+1,s={};if(n.isEqual(Xr.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=Qa(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=va.collectionReadTimeIndex}return Lc(e).Kt(s,((e,n,s)=>{if(e.length!==i)return;const o=za(this.N,n);t.path.isPrefixOf(o.key.path)?ys(t,o)&&(r=r.insert(o.key,o)):s.done()})).next((()=>r))}etSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return kc(e).get(ba.key).next(()}Ae(e,t){return kc(e).put(ba.key,t)}Reclass xc extends Rc{pplyChanges(e){const t=[];let n=0,r=new oo(();return this.changes.forEach(((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Ha(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const c=fc(a);n+=c-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Ha(this.Se.N,Mi.newNoDocument(i,Xr.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))})),r.forEach((),t.push(this.Se.updateMetadata(e,n)),Na.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next((e=>(this.De.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.Se.ve(e,t).next((({documents:e,Ve:t})=>(t.forEach((),e)))}}function kc(e){return qa(e,ba.store)}function Lc(e){return qa(e,va.store)}lass Uc{constructor(e){this.N=e}Ct(e,t,n,r){xr(n<r&&n>=0&&r<=11);const i=new Ra("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(fa.store)}(e),e),Fc(e),function(e){e.createObjectStore(va.store)}(e));let s=Na.resolve();return n<3&&r>=3&&(0!==n&&(e),Fc(e)),s=s.next((()=>i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(pa.store).Lt().next((n=>{e.deleteObjectStore(pa.store),e.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0});const r=t.store(pa.store),i=n.map((e=>r.put(e)));return Na.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(Ta.store,{keyPath:Ta.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ce(i)))),n<6&&r>=6&&(s=s.next((()=>(e),this.Ne(i))))),n<7&&r>=7&&(s=s.next((()=>this.xe(i)))),n<8&&r>=8&&(s=s.next(()),n<9&&r>=9&&(s=s.next((()=>{!e),t)}))),n<10&&r>=10&&(s=s.next((()=>this.$e(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(Sa.store,{keyPath:Sa.keyPath})}(e),e)}))),s}Ne(e){let t=0;return e.store(va.store).Kt(().next((()=>{const n=new ba(t);return e.store(ba.store).put(ba.key,n)}))}Ce(e){const t=e.store(da.store),n=e.store(pa.store);return t.Lt().next((t=>Na.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(pa.userMutationsIndex,r).next(()}))))}xe(e){const t=e.store(_a.store),n=e.store(va.store);return e.store(Ia.store).get(Ia.key).next((e=>{const r=[];return n.Kt(((n,i)=>{const s=new ri(n),o=s);r.push(t.get(o).next((n=>n?Na.resolve():(n=>t.put(new _a(0,aa(n),e.highestListenSequenceNumber)))(s))))})).next((()=>Na.waitFor(r)))}))}ke(e,t){e.createObjectStore(Ea.store,{keyPath:Ea.keyPath});const n=t.store(Ea.store),r=new oc,i=return t.store(va.store).Kt({qt:!0},().next((()=>t.store(ma.store).Kt({qt:!0},()))}$e(e){const t=e.store(wa.store);return t.Kt(()}}onst jc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vc{constructor(e,t,n,r,i,s,o,a,c,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=c,this.Me=u,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=!Vc.bt())throw new Ur(Mr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Oc(this,r),this.We=t+"main",this.N=new Ga(a),this.Ge=new Pa(this.We,11,new Uc(this.N)),this.ze=new bc(this.referenceDelegate,this.N),this.Ht=new ac,this.He=function(e,t){return new Pc(e,t)}(this.N,this.Ht),this.Je=new nc,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===u&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}n(e){return this.Qe=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(()}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(())}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Bc(e).put(new Ta(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(().next((()=>this.rn(e))).next(())).catch(().then(()}sn(e){return qc(e).get(fa.key).next(()}sync hn(){if(this.isPrimary&&!this.ln(this.je,18e5)){this.je=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=qa(e,Ta.store);return t.Lt().next((e=>{const n=this.fn(e,18e5),r=e.filter(();return Na.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch(();if(this.Ye)for(const t of e)this.Ye.removeItem(this.dn(t.clientId))}}(e){return this.Me?Na.resolve(!0):qc(e).get(fa.key).next((t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Ur(Mr.FAILED_PRECONDITION,jc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bc(e).Lt().next((e=>void 0===this.fn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next(()}async shutdown(){this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),await this.Ge.runTransaction("shutdown","readwrite",[fa.store,Ta.store],(e=>{const t=new Va(e,Gr.T);return this.on(t).next((()=>this.un(t)))})),this.Ge.close(),this.yn()}t started(){return this.Be}etTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){Or("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.Ge.runTransaction(e,r,Da,().then((e=>(i.raiseOnCommittedEvent(),e)))}En(e){return qc(e).get(fa.key).next(()}antatic bt(){return Pa.bt()}on(e){const t=qc(e);return t.get(fa.key).next((e=>this.cn(e)?(Or("IndexedDbPersistence","Releasing primary lease."),t.delete(fa.key)):Na.resolve()))}ln(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Cr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}n(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,o.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ue))}tion qc(e){return qa(e,fa.store)}function Bc(e){return qa(e,Ta.store)}ass Gc{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(()}Rn(e,t,n){return this.He.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}bn(e,t){e.forEach(((e,n)=>{for(const r of t)r.applyToLocalView(n)}))}Pn(e,t){return this.He.getEntries(e,t).next(()},t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(().next((t=>(i=t,this.Cn(e,i,r).next((e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Mi.newInvalidDocument(n),r=r.insert(n,i)),qs(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((e,n)=>{ys(t,n)||(r=r.remove(e))})),r)))}Cn(e,t,n){let r=go();for(const s of t)for(const e of s.mutations)e instanceof zs&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}lass Hc{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return t)||n.isEqual(Xr.min())?this.Fn(e,t):this.On.Pn(e,r).next((i=>{const o=this.Mn(t,i);return(os(t)||as(t))&&this.Ln(t.limitType,o,r,n)?this.Fn(e,t):(Ar()<=s.in.DEBUG&&Or("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gs(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(())}))}nlass Qc{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new ro(Qr),this.qn=new Nc((e=>ji(e)),Vi),this.Kn=Xr.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Gc(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}sync function Jc(e,t){const n=Lr(e);let r=n.In,i=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.In.getAllMutationBatches(e).next((o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Gc(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)))).next((t=>{const n=[],r=[];let o=go();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(()}))}));return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}unction Xc(e,t,n,r,i){let s=go();return n.forEach((),t.getEntries(e,s).next((e=>{let s=uo();return n.forEach(((n,o)=>{const a=e.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Xr.min())?(t.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,c),s=s.insert(n,o)):Or("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}ction nu(e,t,n){const r=Lr(e);let i=Xr.min(),s=go();return r.persistence.runTransaction("Execute query","readonly",(e=>r,e,fs(t)).next(().next(().next(()))}unction iu(e){const t=Lr(e);return t.persistence.runTransaction("Get new document changes","readonly",(e=>function(e,t,n){const r=Lr(e);let i=uo(),s=Qa(n);const o=Lc(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:va.readTimeIndex,range:a},((e,t)=>{const n=za(r.N,t);i=i.insert(n.key,n),s=t.readTime})).next(()}(t.jn,e,t.Kn))).then((({Tn:e,readTime:n})=>(t.Kn=n,e)))}async function su(e,t,n=go()){const r=await eu(e,fs(tc(t.bundledQuery))),i=Lr(e);return i.persistence.runTransaction("Save named query","readwrite",()}s hu{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new ro(bi.comparator),this.size=0}addEntryocumentsMatchingQuery(e,t,n){let r=uo();const i=new bi(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||ys(t,i)&&(r=r.insert(i.key,i.clone()))}return Na.resolve(r)}tSize(e){return Na.resolve(this.size)}}class lu extends Rc{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)})),Na.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}lass du{constructor(e,t){this.bs={},this.Le=new Gr(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new fu(this),this.Ht=new sc,this.He=function(e,t){return new hu(e,t)}(this.Ht,(e=>this.referenceDelegate.Ps(e))),this.N=new Ga(t),this.Je=new ou(this.N)}t started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueueetTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}ass mu{tatic Ns(e){return new mu(e)}ddReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Na.resolve()}){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Na.forEach(this.xs,(n=>{const r=bi.fromPath(n);return this.ks(e,r).next(()})).next(()}s(e){return 0}function gu(e,t){return`firestore_clients_${e}_${t}`}u{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new ro(Qr),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=gu(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Eu),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=this.persistenceKey),this.window.addEventListener("storage",this.Bs)}sync start(){const e=await this.syncEngine.pn();for(const n of e){if(n===this.Ls)continue;const e=this.getItem(gu(this.persistenceKey,n));if(e){const t=_u.$s(n,e);t&&(this.qs=this.qs.insert(t.clientId,t))}}this.Ys();const t=this.storage.getItem(this.Hs);if(t){const e=this.Xs(t);e&&this.Zs(e)}for(const n of this.Ks)this.Us(n);this.Ks=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}QueryTarget(e){return this.si.activeTargetIds.has(e)}OnlineState(e){this.ri(e)}{const t=e;if(t.storageArea===this.storage){if(Or("SharedClientState","EVENT",t.key,t.newValue),t.key===this.js)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ws.test(t.key)){if(null==t.newValue){const e=this.ai(t.key);return this.ci(e,null)}{const e=this.ui(t.key,t.newValue);if(e)return this.ci(e.clientId,e)}}else if(this.Gs.test(t.key)){if(null!==t.newValue){const e=this.hi(t.key,t.newValue);if(e)return this.li(e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.fi(t.key,t.newValue);if(e)return this.di(e)}}else if(t.key===this.Hs){if(null!==t.newValue){const e=this.Xs(t.newValue);if(e)return this.Zs(e)}}else if(t.key===this.Qs){const e=t.newValue);e!==Gr.T&&this.sequenceNumberHandler(e)}else if(t.key===this.Js)return this.syncEngine.wi()}else this.Ks.push(t)}))}}(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine._i(e.batchId,e.state,e.error);Or("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}ss Su{ddPendingMutation(e){}updateMutationState(e,t,n){}moveLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}tOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}nst Ou={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};lass Nu extends class{i(e,t,n,r){const i=this.Bi(e,t);Or("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then((,()}i(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Tr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}{(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=dr(),i=pr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new br({})),this.Ui(s.initMessageHeaders,t),(0,o.uI)()||(0,o.b$)()||(0,o.d)()||(0,o.w1)()||(0,o.Mn)()||(0,o.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const a=n.join("");Or("Connection","Creating WebChannel: "+a,s);const c=r.createWebChannel(a,s);let u=!1,h=!1;const l=new Cu({vi:Vi:()=>c.close()}),f=return f(c,wr.EventType.OPEN,(),f(c,wr.EventType.CLOSE,(),f(c,wr.EventType.ERROR,(),f(c,wr.EventType.MESSAGE,(),f(i,yr.STAT_EVENT,(),setTimeout((,0),l}}function Ru(){return"undefined"!=typeof window?window:null}ss Lu{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new ku(e,t)}r(){return 2===this.state}){this._r(),this.stream.send(e)}ync close(e,t){this._r(),this.rr.cancel(),this.sr++,3!==e?this.rr.reset():t&&t.code===Mr.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):t&&t.code===Mr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(t)}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then((e=>{this.sr===t&&this.yr(e)}),()}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si((()=>{t((()=>(this.state=2,this.listener.Si())))})),this.stream.Ci((e=>{t((()=>this.pr(e)))})),this.stream.onMessage(()}ass Mu extends Lu{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}ass Uu extends Lu{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get br(){return this.Rr}essage(e){if(xr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(xr(void 0!==t),e.map((e=>e,t)))):[]}(e.writeResults,e.commitTime),n=ko(e.commitTime);return this.listener.vr(n,t)}return xr(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}lass Fu extends constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}i(e,t,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Li(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Ur(Mr.UNKNOWN,e.toString())}))}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(().catch((e=>{throw"FirebaseError"===e.name?(e.code===Mr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Ur(Mr.UNKNOWN,e.toString())}))}terminate(){this.Dr=!0}}Qu(e){return Wu(e)&&!fh(e).ar()&&e.qr.size>0}unction nh(e){const t=Lr(e),n=dh(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;rh(t);)try{const e=await Zc(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,ih(t,e)}catch(e){await eh(t,e)}sh(t)&&oh(t)}ction oh(e){dh(e).start()}nc function hh(e,t){t&&dh(e).br&&await async function(e,t){if(to(n=t.code)&&n!==Mr.ABORTED){const n=e.Ur.shift();dh(e).hr(),await th(e,(),await nh(e)}var n}(e,t),sh(e)&&oh(e)}unction fh(e){return e.zr||(e.zr=function(e,t,n){const r=Lr(e);return r.Cr(),new Mu(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Yu.bind(null,e),Ci:Xu.bind(null,e),Tr:Zu.bind(null,e)}),e.jr.push(()),e.zr}function dh(e){return e.Hr||(e.Hr=e.datastore,e.asyncQueue,{Si:ah.bind(null,e),Ci:hh.bind(null,e),Vr:ch.bind(null,e),vr:uh.bind(null,e)}),e.jr.push(()),e.Hr}or(e){this.so.error(e)}o(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.uo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}ss Ch{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=Nh(e)}foync complete(){const e=await async function(e,t,n,r){const i=Lr(e);let s=go(),o=uo(),a=po();for(const h of n){const e=t.zn(h.metadata.name);h.document&&(s=s.add(e)),o=o.insert(e,t.Hn(h)),a=a.insert(e,t.Jn(h.metadata.readTime))}const c=i.jn.newChangeBuffer({trackRemovals:!0}),u=await eu(i,function(e){return fs(ss(ri.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Xc(e,c,o,Xr.min(),a).next(().next((t=>i.ze.removeMatchingKeysForTargetId(e,u.targetId).next(().next((()=>i.Qn.vn(e,t))).next((()=>t))))))}(this.localStore,new Oh(this.N),this.documents,this.lo.id),t=this.wo(this.documents);for(const n of this.queries)await su(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",new $c(Object.assign({},this.progress),e)}}lass Rh{constructor(e){this.key=e}}class Ph{constructor(e){this.key=e}}class xh{et To(){return this._o}Io(e,t){const n=t?t.Ao:new yh,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=os(this.query)&&r.size===this.query.limit?r.last():null,c=as(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((),os(this.query)||as(this.query))for(;s.size>this.query.limit;){const e=os(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}tion Uh(e,t){const n=ul(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=await eu(n.localStore,fs(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Fh(n,t,r,"current"===s),n.isPrimaryClient&&Ku(n.remoteStore,e)}return i}ync function Vh(e,t){const n=Lr(e);try{const e=await function(e,t){const n=Lr(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach(((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(());const c=t.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,u),a,u,t)&&o.push(n.ze.updateTargetData(e,u))}}));let a=uo();if(t.documentUpdates.forEach(((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Xc(e,s,t.documentUpdates,r,void 0).next(()),!r.isEqual(Xr.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(();o.push(t)}return Na.waitFor(o).next((()=>s.apply(e))).next((()=>n.Qn.vn(e,a))).next((()=>a))})).then(()}(n.localStore,t);t.targetChanges.forEach((),await Xh(n,e,t)}catch(e){await Ec(e)}}ync function Kh(e,t){const n=Lr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Lr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Na.resolve();return s.forEach((e=>{o=o.next(().next((t=>{const s=n.docVersions.get(e);xr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((()=>e.In.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.In.performConsistencyCheck(e))).next((()=>n.Qn.Pn(e,r)))}))}(n.localStore,t);zh(n,r,null),Gh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xh(n,e)}catch(e){await Ec(e)}}async function $h(e,t,n){const r=Lr(e);try{const e=await function(e,t){const n=Lr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.In.lookupMutationBatch(e,t).next(().next(().next(()}))}(r.localStore,t);zh(r,t,n),Gh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Xh(r,e)}catch(n){await Ec(n)}}tion tl(e,t){const n=Lr(e),r=await nu(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&Wh(n,t.targetId,i.vo),i}async function nl(e){const t=Lr(e);return iu(t.localStore).then((e=>Xh(t,e)))}async function rl(e,t,n,r){const i=Lr(e),s=await i.localStore,t);null!==s?("pending"===n?await nh(i.remoteStore):"acknowledged"===n||"rejected"===n?(zh(i,t,r||null),Gh(i,t),i.localStore,t)):Pr(),await Xh(i,s)):Or("SyncEngine","Cannot apply mutation batch with id: "+t)}async function il(e,t,n){const r=Lr(e),i=[],s=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=await eu(r.localStore,fs(t[0]));for(const e of t){const t=r.xo.get(e),n=await tl(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await ru(r.localStore,o);e=await eu(r.localStore,t),await Fh(r,sl(t),o,!1)}i.push(e)}return r.No.Tr(s),i}ync function al(e,t,n,r){const i=Lr(e);if(i.qo)Or("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=await iu(i.localStore),r=bo.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Xh(i,e,r);break}case"rejected":await tu(i.localStore,t,!0),Hh(i,t,r);break;default:Pr()}}async function cl(e,t,n){const r=ul(e);if(r.qo){for(const e of t){if(r.ko.has(e)){Or("SyncEngine","Adding an already active target "+e);continue}const t=await ru(r.localStore,e),n=await eu(r.localStore,t);await Fh(r,sl(t),n.targetId,!1),Ku(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&await tu(r.localStore,e,!1).then(().catch(Ec)}}ass ll{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=xu(e.databaseInfo.databaseId),this.sharedClientState=this.Wo(e),this.persistence=this.Go(e),await this.persistence.start(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e)}o(e){return Wc(this.persistence,new Hc,e.initialUser,this.N)}o(e){return new Su}class fl extends ll{sync initialize(e){await super.initialize(e),await async function(e){const t=Lr(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=Lc(e);let n=Xr.min();return t.Kt({index:va.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=Wa(t.readTime)),r.done()})).next((()=>n))}(e))).then(()}(this.localStore),await this.Jo.initialize(this,e),await hl(this.Jo.syncEngine),await nh(this.Jo.remoteStore),await this.persistence.nn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}o(e){return new Su}}class dl extends fl{sync initialize(e){await super.initialize(e);const t=this.Jo.syncEngine;this.sharedClientState instanceof Tu&&(this.sharedClientState.syncEngine={_i:rl.bind(null,t),mi:al.bind(null,t),gi:cl.bind(null,t),pn:ol.bind(null,t),wi:nl.bind(null,t)},await this.sharedClientState.start()),await this.persistence.nn((async e=>{await async function(e,t){const n=Lr(e);if(ul(n),hl(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await il(n,e.toArray());n.qo=!0,await lh(n.remoteStore,!0);for(const r of t)Ku(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((),await t,await il(n,e),n),n.qo=!1,await lh(n.remoteStore,!1)}}(this.Jo.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}class pl{eateDatastore(e){const t=xu(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Nu(r));var r;return e.credentials,n,t)}nction ml(e,t=10240){let n=0;return{async readasync cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}lass yl{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then((,()}close(){return this.Zo.cancel()}async getMetadata(){return this.metadata.promise}sync ea(){const e=await this.na();if(null===e)return null;const t=this.ta.decode(e),n=Number(t);isNaN(n)&&this.sa(`length string (${t}) is not valid number`);const r=await this.ia(n);return new Dh(JSON.parse(r),e.length+n)}sync na(){for(;this.ra()<0&&!await this.oa(););if(0===this.buffer.length)return null;const e=this.ra();e<0&&this.sa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ia(e){for(;this.buffer.length<e;)await this.oa()&&this.sa("Reached the end of bundle when more is expected.");const t=this.ta.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}sync oa(){const e=await this.Zo.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class vl{sync lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ur(Mr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Lr(e),r=qo(n.N)+"/documents",i={documents:t.map((e=>Uo(n.N,e)))},s=await n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach((e=>{const t=n.N,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}nc commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((),e.forEach((),await async function(e,t){const n=Lr(e),r=qo(n.N)+"/documents",i={writes:t.map(()};await n.Li("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}reconditionureCommitNotCalled(){}}class bl{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new ku(this.asyncQueue,"transaction_retry")}ass wl{constructor(e,t,n){this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Er.UNAUTHENTICATED,this.clientId=Hr.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,()}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}erminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(t){const n=mh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}sync function Il(e,t){e.asyncQueue.verifyOperationInProgress();const n=await El(e);Or("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>async function(e,t){const n=Lr(e);n.asyncQueue.verifyOperationInProgress(),Or("RemoteStore","RemoteStore received new credentials");const r=Wu(n);n.Kr.add(3),await Bu(n),r&&n.Wr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),await qu(n)}(t.remoteStore,e))),e.onlineComponents=t}async function El(e){return e.offlineComponents||(Or("FirestoreClient","Using default OfflineComponentProvider"),await _l(e,new ll)),e.offlineComponents}unction Sl(e){return El(e).then((e=>e.persistence))}function Al(e){return El(e).then((e=>e.localStore))}function Dl(e){return Tl(e).then((e=>e.remoteStore))}nction Nl(e,t,n={}){const r=new Fr;return e.asyncQueue.enqueueAndForget((),r.promise}unction Pl(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,n),t)}(n,xu(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Lr(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await e.localStore,r))return await t.close(),void n._completeWith(r));n._updateProgress(Nh(r));const i=new Ch(r,e.localStore,t.N);let s=await t.Qo();for(;s;){const e=await i.fo(s);e&&n._updateProgress(e),s=await t.Qo()}const o=await i.complete();await Xh(e,o.Tn,void 0),await function(e,t){const n=Lr(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Je.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Nr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(r,t,n).then(()}(await Ol(e),i,r)}))}lass kl{nst Ll=new Map;tion Vl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Pr()}ass Kl{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ur(Mr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ur(Mr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ul("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}class $l{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kl({}),this._settingsFrozen=!1,e instanceof kl?this._databaseId=e:(this._app=e,this._databaseId=e))}et _initialized(){return this._settingsFrozen}etSettings(){return this._settings}ction Gl(e,t,n,r={}){var i;const s=(e=ql(e,$l))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Nr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Er.MOCK_USER;else{t=(0,o.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ur(Mr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Er(s)}e._credentials=new qr(new jr(t,n))}}tion Jl(e,t){if(e=ql(e,$l),Ml("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ur(Mr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hl(e,null,t))}ss ef{et isShuttingDown(){return this.wa}const t=this.fa.then((()=>(this.ga=!0,e().catch((e=>{throw this.ma=e,this.ga=!1,Cr("INTERNAL UNHANDLED ERROR: ",e)),e})).then(())));return this.fa=t,t}-1;class sf extends $l{constructor(e,t){super(e,t),this.type="firestore",this._queue=new ef,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}function of(e,t){const n=(0,r.qX)(e,"firestore");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,o.vZ)(r,t))return e;throw new Ur(Mr.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ur(Mr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:t})}function af(e=(0,r.Mq)()){return(0,r.qX)(e,"firestore").getImmediate()}unction uf(e){var t;const n=e._freezeSettings(),r=e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new wl(e._credentials,e._queue,r)}function hf(e,t){wf(e=ql(e,sf));const n=cf(e),r=e._freezeSettings(),i=new pl;return ff(n,i,new fl(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function lf(e){wf(e=ql(e,sf));const t=cf(e),n=e._freezeSettings(),r=new pl;return ff(t,r,new dl(r,n.cacheSizeBytes))}function ff(e,t,n){const r=new Fr;return e.asyncQueue.enqueue((async()=>{try{await _l(e,n),await Il(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Mr.FAILED_PRECONDITION||e.code===Mr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()}function df(e){if(e._initialized&&!e._terminated)throw new Ur(Mr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fr;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Pa.bt())return Promise.resolve();const t=e+"main";await Pa.delete(t)}(Kc(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function pf(e){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Lr(e);Wu(n.remoteStore)||Or("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=mh(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Ol(e),t))),t.promise}(cf(e=ql(e,sf)))}function mf(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Sl(e),n=await Dl(e);return t.setNetworkEnabled(!0),n)}))}(cf(e=ql(e,sf)))}function gf(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Sl(e),n=await Dl(e);return t.setNetworkEnabled(!1),async function(e){const t=Lr(e);t.Kr.add(0),await Bu(t),t.Wr.set("Offline")}(n)}))}(cf(e=ql(e,sf)))}function yf(e){return(0,r.wN)(e.app,"firestore"),e._delete()}function vf(e,t){const n=cf(e=ql(e,sf)),r=new nf;return Pl(n,e._databaseId,t,r),r}function bf(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>await Al(e),t)))}(cf(e=ql(e,sf)),t).then(()}Af=/^__.*__$/;xtends Tf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Lf(this,e,!0),n=this.Ua.map((e=>Kf(e,t))),r=new Os(n);return new Ls(e.path,r)}nction Vf(e,t,n,r){const i=e.Ba(1,t,n);zf("Data must be an object, but it was:",i,r);const s=[],a=ki.empty();ei(r,((e,r)=>{const c=Wf(t,e,n);r=(0,o.m9)(r);const u=i.$a(c);if(r instanceof kf)s.push(c);else{const e=Kf(r,u);null!=e&&(s.push(c),a.set(c,e))}}));const c=new oi(s);return new Of(a,c,i.fieldTransforms)}function qf(e,t,n,r,i,s){const a=e.Ba(1,t,n),c=[Hf(t,r,n)],u=[i];if(s.length%2!=0)throw new Ur(Mr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let o=0;o<s.length;o+=2)c.push(Hf(t,s[o])),u.push(s[o+1]);const h=[],l=ki.empty();for(let d=c.length-1;d>=0;--d)if(!Yf(h,c[d])){const e=c[d];let t=u[d];t=(0,o.m9)(t);const n=a.$a(e);if(t instanceof kf)h.push(e);else{const r=Kf(t,n);null!=r&&(h.push(e),l.set(e,r))}}const f=new oi(h);return new Of(l,f,a.fieldTransforms)}Qf=new RegExp("[~\\*/\\[\\]]");s cd{apply(e){const t=Pf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ur(Mr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){Sd(o,s);const t=[];for(const n of o)t.push(Td(r,e,n));a={arrayValue:{values:t}}}else a=Td(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Sd(o,s),a=Bf(n,"where",o,"in"===s||"not-in"===s);const c=Bi.create(i,s,a);return function(e,t){if(t.v()){const n=us(e);if(null!==n&&!n.isEqual(t.field))throw new Ur(Mr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=cs(e);null!==r&&Ad(e,t.field,r)}const n=e,t.op));if(null!==n)throw n===t.op?new Ur(Mr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ur(Mr.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Hl(e.firestore,e.converter,e._query,n))}}function ld(e,t,n){const r=t,i=ed("where",e);return new hd(i,r,n)}class fd extends cd{applyfunction dd(e,t="asc"){const n=t,r=ed("orderBy",e);return new fd(r,n)}class pd extends cd{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}function md(e){return Bl("limit",e),new pd("limit",e,"F")}function gd(e){return Bl("limitToLast",e),new pd("limitToLast",e,"L")}class yd extends cd{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}function vd(...e){return new yd("startAt",e,!0)}function bd(...e){return new yd("startAfter",e,!1)}class wd extends cd{applyfunction _d(...e){return new wd("endBefore",e,!0)}function Id(...e){return new wd("endAt",e,!1)}d{date(e,t,n,...r){this._verifyNotCommitted();const i=Rd(e,this._firestore);let s;return s="string"==typeof(t=(0,o.m9)(t))||t instanceof _f?qf(this._dataReader,"WriteBatch.update",i._key,t,n,r):Vf(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Us.exists(!0))),this}erifyNotCommitted(){if(this._committed)throw new Ur(Mr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}unction Pd(e){e=ql(e,zl);const t=ql(e.firestore,sf);return Nl(cf(t),e._key).then((n=>zd(t,e,n)))}class xd extends Dd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ef(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zl(this.firestore,null,t)}}function kd(e){e=ql(e,zl);const t=ql(e.firestore,sf),n=cf(t),r=new xd(t);return function(e,t){const n=new Fr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Lr(e);return n.persistence.runTransaction("read document","readonly",(e=>n.Qn.An(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ur(Mr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=mh(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Al(e),t,n))),n.promise}(n,e._key).then(()}function Ld(e){e=ql(e,zl);const t=ql(e.firestore,sf);return Nl(cf(t),e._key,{source:"server"}).then(()}unction Ud(e){e=ql(e,Hl);const t=ql(e.firestore,sf),n=cf(t),r=new xd(t);return function(e,t){const n=new Fr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await nu(e,t,!0),i=new xh(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=mh(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Al(e),t,n))),n.promise}(n,e._query).then((n=>new id(t,r,e,n)))}function Fd(e){e=ql(e,Hl);const t=ql(e.firestore,sf),n=cf(t),r=new xd(t);return Rl(n,e._query,{source:"server"}).then(()}unction Vd(e,t,n,...r){e=ql(e,zl);const i=ql(e.firestore,sf),s=Pf(i);let a;return a="string"==typeof(t=(0,o.m9)(t))||t instanceof _f?qf(s,"updateDoc",e._key,t,n,r):Vf(s,"updateDoc",e._key,t),Gd(i,[a.toMutation(e._key,Us.exists(!0))])}unction Bd(e,t){const n=ql(e.firestore,sf),r=Yl(e),i=Od(e.converter,t);return Gd(n,[xf(Pf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Us.exists(!1))]).then((()=>r))}unction $d(e,t){return function(e,t){const n=new gl(t);return e.asyncQueue.enqueueAndForget((async()=>await Cl(e),n))),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((async()=>await Cl(e),n)))}}(cf(e=ql(e,sf)),tf(t)?t:{next:t})}function Gd(e,t){return function(e,t){const n=new Fr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=hl(e);try{const e=await function(e,t){const n=Lr(e),r=Yr.now(),i=t.reduce((,go());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Qn.Pn(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=Bs(e,s.get(e.key));null!=t&&o.push(new zs(e.key,t,Li(t.value.mapValue),Us.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),r,e.batchId,n),await Xh(r,e.changes),await nh(r.remoteStore)}catch(e){const t=mh(e,"Failed to persist write");n.reject(t)}}(await Ol(e),t,n))),n.promise}(cf(e),t)}lass Hd extends class{ate(e,t,n,...r){const i=Rd(e,this._firestore);let s;return s="string"==typeof(t=(0,o.m9)(t))||t instanceof _f?qf(this._dataReader,"Transaction.update",i._key,t,n,r):Vf(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}{unction Qd(e,t){return function(e,t){const n=new Fr;return e.asyncQueue.enqueueAndForget((async()=>{const r=await e);new bl(e.asyncQueue,r,t,n).run()})),n.promise}(cf(e),()}function Wd(){return new kf("deleteField")}function Jd(){return new Mf("serverTimestamp")}function Yd(...e){return new Uf("arrayUnion",e)}function Xd(...e){return new Ff("arrayRemove",e)}unction ep(e){return cf(e=ql(e,sf)),new Nd(e,(t=>Gd(e,t)))}!r.Jn),(0,r.Xd)(new i.wA("firestore",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new sf(n,new Br(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r}),"PUBLIC")),(0,r.KN)("@firebase/firestore","3.0.2",undefined)},14594:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(t,{Am:function(){return d},Ub:function(){return f},Yd:function(){return l},in:function(){return s}});var s,o=[];!s||(s={}));var a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),h=l=);67:function(e,t,n){"use strict";n.d(t,{BH:function(){return u},LL:function(){return w},ZR:function(){return b},Sg:function(){return h},vZ:function(){return I},m9:function(){return S},z$:function(){return l},ru:function(){return d},d:function(){return m},w1:function(){return g},uI:function(){return f},b$:function(){return p},G6:function(){return v},Mn:function(){return y}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFEHAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:encodeString:decodeString:decodeStringToByteArray:init_:,c=var u=);function h(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=s({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(o)),""].join(".")}tion m(){return l().indexOf("Electron/")>=0}nction v(){return!)&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var b=function(e){eturn i(t,e),t}(Error),w=);var _=/\{\$([^}]+)}/g;unction(){.prototype.reset=e.prototype.compress_=e.prototype.update=e.prototype.digest=();!function(){.prototype.next=e.prototype.error=e.prototype.complete=e.prototype.subscribe=e.prototype.unsubscribeOne=e.prototype.forEachObserver=e.prototype.sendOne=e.prototype.close=();54098:72445:40804:34823:51268:78458:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(34823),s=r(n(53458)),o=t.default=function(e,t,n){var r=i.extractFiles({query:e,variables:t,operationName:n},"",o),a=r.clone,c=r.files;if(0===c.size){if(!Array.isArray(e))return JSON.stringify(a);if("undefined"!==typeof t&&!Array.isArray(t))throw new Error("Cannot create request body with given variable type, array expected");var u=e.reduce((,[]);return JSON.stringify(u)}var h=new("undefined"===typeof FormData?s.default:FormData);h.append("operations",JSON.stringify(a));var l={},f=0;return c.forEach((),h.append("map",JSON.stringify(l)),f=0,c.forEach((),h}},28687:function(e,t,n){"use strict";var r=this&&this.__assign||i=this&&this.__createBinding||(Object.create?,s=this&&this.__setModuleDefault||(Object.create?function(e,t){e.default=t}),o=this&&this.__importStar||a=this&&this.__awaiter||c=this&&this.__generator||u=this&&this.__rest||h=this&&this.__importDefault||Object.defineProperty(t,"__esModule",{value:!0}),t.gql=t.batchRequests=t.request=t.rawRequest=t.GraphQLClient=t.ClientError=void 0;var l=o(n(54098)),f=l,d=n(23033),p=h(n(78458)),m=n(8308);Object.defineProperty(t,"ClientError",{enumerable:!0,get:);var g=y=v=function(e){var t=e.url,n=e.query,i=e.variables,s=e.operationName,o=e.headers,u=e.fetch,h=e.fetchOptions;return a(void 0,void 0,void 0,(function(){var e;return c(this,(function(a){switch(a.label){case 0:return e=p.default(n,i,s),[4,u(t,r({method:"POST",headers:r(r({},"string"===typeof e?{"Content-Type":"application/json"}:{}),o),body:e},h))];case 1:return[2,a.sent()]}}))}))},b=function(e){var t=e.url,n=e.query,i=e.variables,s=e.operationName,o=e.headers,u=e.fetch,h=e.fetchOptions;return a(void 0,void 0,void 0,(function(){var e;return c(this,(function(a){switch(a.label){case 0:return e=function(e){var t=e.query,n=e.variables,r=e.operationName;if(!Array.isArray(t)){var i=["query="+encodeURIComponent(y(t))];return n&&i.push("variables="+encodeURIComponent(JSON.stringify(n))),r&&i.push("operationName="+encodeURIComponent(r)),i.join("&")}if("undefined"!==typeof n&&!Array.isArray(n))throw new Error("Cannot create query with given variable type, array expected");var s=t.reduce((,[]);return"query="+encodeURIComponent(JSON.stringify(s))}({query:n,variables:i,operationName:s}),[4,u(t+"?"+e,r({method:"GET",headers:o},h))];case 1:return[2,a.sent()]}}))}))},w=);function _(e){var t=e.url,n=e.query,i=e.variables,s=e.headers,o=e.operationName,u=e.fetch,h=e.method,l=void 0===h?"POST":h,f=e.fetchOptions;return a(this,void 0,void 0,(function(){var e,a,h,d,p,g,y,w;return c(this,(function(c){switch(c.label){case 0:return e="POST"===l.toUpperCase()?v:b,a=Array.isArray(n),[4,e({url:t,query:n,variables:i,operationName:o,headers:s,fetch:u,fetchOptions:f})];case 1:return[4,E(h=c.sent())];case 2:if(d=c.sent(),p=a&&Array.isArray(d)?!d.some(():!!d.data,h.ok&&!d.errors&&p)return g=h.headers,y=h.status,[2,r(r({},a?{data:d}:d),{headers:g,status:y})];throw w="string"===typeof d?{error:d}:d,new m.ClientError(r(r({},w),{status:h.status,headers:h.headers}),{query:n,variables:i})}}))}))}nction T(e){var t;if("string"===typeof e)return{query:e};var n=void 0,r=e.definitions.filter(();return 1===r.length&&(n=null===(t=r[0].name)||void 0===t?void 0:t.value),{query:d.print(e),operationName:n}}t.GraphQLClient=w,t.rawRequest=t.request=I,t.batchRequests=t.default=I,t.gql=,8308:53458:50972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prototype.toJSON;"function"===typeof t||(0,r.default)(0),e.prototype.inspect=t,i.default&&(e.prototype[i.default]=t)};var r=s(n(7706)),i=s(n(18554));,8002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=var r,i=(r=n(18554))&&r.__esModule?r:{default:r};ar o=10,a=2;,7706:18554:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.default=n},91807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=t.Token=t.Location=void 0;var r,i=(r=n(50972))&&r.__esModule?r:{default:r};var s=);t.Location=s,(0,i.default)(s);var o=);t.Token=o,(0,i.default)(o)},70849:function(e,t){"use strict";ject.defineProperty(t,"__esModule",{value:!0}),t.dedentBlockStringValue=t.getBlockStringIndentation=r,t.printBlockString=,23033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=var r=n(80285),i=n(70849);var s={Name:function(e){return e.value},Variable:Document:OperationDefinition:VariableDefinition:SelectionSet:Field:Argument:function(e){return e.name+": "+e.value},FragmentSpread:InlineFragment:FragmentDefinition:IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:BooleanValue:NullValue:EnumValue:function(e){return e.value},ListValue:function(e){return"["+a(e.values,", ")+"]"},ObjectValue:ObjectField:function(e){return e.name+": "+e.value},Directive:NamedType:function(e){return e.name},ListType:NonNullType:SchemaDefinition:o((function(e){var t=e.directives,n=e.operationTypes;return a(["schema",a(t," "),c(n)]," ")})),OperationTypeDefinition:ScalarTypeDefinition:o((function(e){return a(["scalar",e.name,a(e.directives," ")]," ")})),ObjectTypeDefinition:o((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return a(["type",t,u("implements ",a(n," & ")),a(r," "),c(i)]," ")})),FieldDefinition:o((),InputValueDefinition:o((),InterfaceTypeDefinition:o((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return a(["interface",t,u("implements ",a(n," & ")),a(r," "),c(i)]," ")})),UnionTypeDefinition:o((function(e){var t=e.name,n=e.directives,r=e.types;return a(["union",t,a(n," "),r&&0!==r.length?"= "+a(r," | "):""]," ")})),EnumTypeDefinition:o((function(e){var t=e.name,n=e.directives,r=e.values;return a(["enum",t,a(n," "),c(r)]," ")})),EnumValueDefinition:o((),InputObjectTypeDefinition:o((function(e){var t=e.name,n=e.directives,r=e.fields;return a(["input",t,a(n," "),c(r)]," ")})),DirectiveDefinition:o((),SchemaExtension:ScalarTypeExtension:ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return a(["extend type",t,u("implements ",a(n," & ")),a(r," "),c(i)]," ")},InterfaceTypeExtension:UnionTypeExtension:EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return a(["extend enum",t,a(n," "),c(r)]," ")},InputObjectTypeExtension:;:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=void 0,u=Array.isArray(e),h=[e],l=-1,f=[],d=void 0,p=void 0,m=void 0,g=[],y=[],v=e;do{var b=++l===h.length,w=b&&0!==f.length;if(b){if(p=0===y.length?void 0:g[g.length-1],d=m,m=y.pop(),w){if(u)d=d.slice();else{for(var _={},I=0,E=Object.keys(d);I<E.length;I++){var T=E[I];_[T]=d[T]}d=_}for(var S=0,A=0;A<f.length;A++){var D=f[A][0],O=f[A][1];u&&(D-=S),u&&null===O?(d.splice(D,1),S++):d[D]=O}}l=r.index,h=r.keys,f=r.edits,u=r.inArray,r=r.prev}else{if(p=m?u?l:h[l]:void 0,null===(d=m?m[p]:v)||void 0===d)continue;m&&g.push(p)}var C,N=void 0;if(!Array.isArray(d)){if(!(0,s.isNode)(d))throw new Error("Invalid AST Node: ".concat((0,i.default)(d),"."));var R=c(t,d.kind,b);if(R){if((N=R.call(t,d,p,m,g,y))===a)break;if(!1===N){if(!b){g.pop();continue}}else if(void 0!==N&&(f.push([p,N]),!b)){if(!(0,s.isNode)(N)){g.pop();continue}d=N}}}if(void 0===N&&w&&f.push([p,d]),b)g.pop();else r={inArray:u,index:l,keys:h,edits:f,prev:r},h=(u=Array.isArray(d))?d:null!==(C=n[d.kind])&&void 0!==C?C:[],l=-1,f=[],m&&y.push(m),m=d}while(void 0!==r);0!==f.length&&(v=f[f.length-1][1]);return v},t.visitInParallel=t.getVisitFn=c,t.BREAK=t.QueryDocumentKeys=void 0;var r,i=(r=n(8002))&&r.__esModule?r:{default:r},s=n(91807);var o={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};t.QueryDocumentKeys=o;var a=Object.freeze({});.BREAK=a},70655:47730:]);