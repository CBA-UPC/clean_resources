(self.webpackChunkjtnews=self.webpackChunkjtnews||[]).push([[30400],{"vXVwSu+V":(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var o=s("7vzhYF+v"),i=s.n(o),r=s("xKHFmCek"),n=s.n(r),a=s("vDqi2OZM"),u=s.n(a),c=s("AWUIW6cH");class l{constructor(e){this._timeout=1e4,this._maxRedirects=10,this._maxContentLength=5e7,this._config=e,this._httpClient=this._setupHttpClient()}getHost(e){return`${this.protocol}://newsapi.${(0,c.B1)(e)}${this.envType}/`}get v(){return l.version}et httpClient(){return this._httpClient}get envType(){return void 0!==this._config.envType?this._config.envType:""}setupHttpClient(){if(void 0!==this._config.acceptEncoding&&(u().defaults.headers.get["Accept-Encoding"]=this._config.acceptEncoding),this._config.enableKeepAlive){const e=u().create({timeout:this._timeout,httpAgent:new(i().Agent)({keepAlive:!0}),httpsAgent:new(n().Agent)({keepAlive:!0}),maxRedirects:this._maxRedirects,maxContentLength:this._maxContentLength});return this._initInterceptors(e),e}return this._initInterceptors(u()),u()}_initInterceptors(e){e.interceptors.request.use((e=>(e.metadata={startTime:Date.now()},e)),(e=>Promise.reject(e))),e.interceptors.response.use((e=>(e.config.metadata.endTime=Date.now(),void 0!==typeof e.data&&"string"==typeof e.data&&(e.data={}),e.data.responseTime=e.config.metadata.endTime-e.config.metadata.startTime,e)),()}}l.version="v1",l.accept="vnd.news.v1.jtnews+json"},"te+XqOGk":(e,t,s)=>{"use strict";s.d(t,{K:()=>i});s("2eJaGjyM");class o extends Error{constructor(e,t){super(e.message),this.name=this.constructor.name,"captureStackTrace"in Error&&Error.captureStackTrace(this,this.constructor),this.originalStack=e.stack,e.response&&(this.response={status:e.response.status,statusText:e.response.statusText,data:e.response.data}),this.request={args:t},e.config&&(this.request={...this.request,url:e.config.url,params:e.config.params,data:e.config.data})}}function i(e,t,s){const i=s.value;return s.value=async function(...e){try{return await i.apply(this,e)}catch(t){throw new o(t,e)}},s}},fuHug2aA:(e,t,s)=>{"use strict";s.d(t,{N:()=>u});var o,i,r=s("mrSGxOB2"),n=s("vXVwSu+V"),a=s("te+XqOGk");class u extends n.I{sync saveOneSignalSubscription({regionId:e,playerId:t,notificationTypes:s,profileId:o}){const i=`${this.getHost(e)}${this.v}${this._basePushNotificationsUrl}${o}/subscription`,r={externalServiceId:t,notificationTypes:s,regionId:e};return(await this.httpClient.patch(i,r,{withCredentials:!0,headers:{accept:"vnd.news.v1.jtnews+json"}})).data.data.internalId}async unsubscribeUser({regionId:e,playerId:t,notificationTypes:s,profileId:o}){const i=`${this.getHost(e)}${this.v}${this._basePushNotificationsUrl}${o}/subscription`,r={withCredentials:!0,headers:{accept:"vnd.news.v1.jtnews+json"},params:{externalServiceId:t,regionId:e,notificationTypes:s}};await this.httpClient.delete(i,r)}}(0,r.gn)([a.K,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype","function"==typeof(o="undefined"!=typeof Promise&&Promise)?o:Object)],u.prototype,"saveOneSignalSubscription",null),(0,r.gn)([a.K,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype","function"==typeof(i="undefined"!=typeof Promise&&Promise)?i:Object)],u.prototype,"unsubscribeUser",null)},"6uSY18IX":(e,t,s)=>{"use strict";function o(e,t){if(e===t)return!0;if(!e||!t)return!1;if("object"==typeof e){for(const s in e)if(!o(e[s],t[s]))return!1;return!0}return!1}s.d(t,{C:()=>a});class i{constructor(e,t,s){this.frozen=!1,this.oldResult=void 0,this.el=e,this.observer=null,this.frozen=!1,this.createObserver(t,s)}get thresholdreateObserver(e,t){var s;this.observer&&this.destroyObserver(),this.frozen||(this.options=function(e){let t;return t="function"==typeof e?{intersection:{},callback:e}:e,t}(e),this.callback=(e,t)=>{this.options.callback(e,t),e&&this.options.once&&(this.frozen=!0,this.destroyObserver())},this.oldResult=void 0,this.observer=new IntersectionObserver((e=>{let[t]=e;if(e.length>1){const s=e.find(();s&&(t=s)}if(this.callback){const e=t.isIntersecting&&t.intersectionRatio>=this.threshold;if(e===this.oldResult)return;this.oldResult=e,this.callback(e,t)}}),this.options.intersection),null===(s=t.context)||void 0===s||s.$nextTick(())}function r(e,{value:t},s){if(t)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{const o=new i(e,t,s);e._vue_visibilityState=o}}onst a={directive:"undefined"!=typeof window?{bind:r,updated:function(e,t,s){const{value:i,oldValue:a}=t;if(o(i,a))return;const u=e._vue_visibilityState;i?u?u.createObserver(i,s):r(e,t,s):n(e)},unbind:n}:{}}},Qel7hsIc:(e,t,s)=>{"use strict";s.d(t,{g:()=>u});var o,i=s("gTuzOnMN"),r=s("E+ge1jlK"),n=s("P4szYjiP");class a extends n.g{constructor(e,t){super(e,t),this.name="PushNotificationsError"}static of(e,t){return new a(e,t)}}!o||(o={}));class u extends class{constructor(e){const{deps:{logger:t}}=e;this._logger=t}get logger(){return this._logger}}{constructor(e){super(e),this._config=e,this._defaultSegmentValue="1",this._userPlayerId="",this._isReadyService=!1,this._oneSignalSDK=new r.H}userPlayerId(){return this._userPlayerId}async setup(){const{appId:e,segment:t,swParams:s}=this._config;this._setupStatus="in_progress";try{await this._oneSignalSDK.init({appId:e,swParams:s}),await this._sendTag(t),this._setupStatus="installed",await this._checkInitialState()}catch(e){throw this._setupStatus="error",this.logger.capture({error:a.of("Ошибка инициализации OneSignal",e)}),e}}async getUserPlayerId(){if(!(0,i._X)(this._userPlayerId))try{var e;this._userPlayerId=null!==(e=await this._oneSignalSDK.getPlayerId())&&void 0!==e?e:""}catch(e){this.logger.capture({error:a.of("Не удалось получить playerId пользователя",e)})}}showPopoverNotifications(e=!1){this._oneSignalSDK.showSlidedownPrompt({force:e})}subscribeToNotificationsEnabledChange(e){this._oneSignalSDK.subscribeToNotificationsStateChange((t=>{"boolean"==typeof t&&(this._isOneSignalNotificationsEnabled=t,e(t))}))}unsubscribeToNotificationsEnabledChange(){this._oneSignalSDK.unsubscribeToNotificationsStateChange()}subscribeToBrowserNotificationsDeniedChange(e){this._omission=t,e(this.isBrowserNotificationsDenied)}))}unsubscribeToBrowserNotificationsDeniedChange(){this._oneSignalSDK.unsubscribeToBrowserPermissionChange()}subscribePopoverShown(e){this._oneSignalSDK.subscribePopoverShown(e)}unsubscribePopoverShown(){this._oneSignalSDK.unsubscribePopoverShown()}subscribePopoverActions(e){this._oneSignalSDK.subscribePopoverAllow((()=>{e(o.Allow)}K.his._oneSignalSDK.unsubscribePopoverDisallow()}subscribePopoverClosed(e){this._oneSignalSDK.subscribePopoverClosed(e)}unsubscribePopoverClosed(Prompt(){this._oneSignalSDK.showNativePrompt()}async _sendTag(e){const{key:t="",value:s=this._defaultSegmentValue}=e;(0,i._X)(t)||this.logger.capture({error:a.of("Передан пустой ключ сегмента для отправки тега")});try{await this._oneSignalSDK.sendTag(t,s)}catch(e){this.logger.capture({error:a.of(`Не удалось отправить тэг ${t}: ${s}`,e)})}}async _checkInitialState(){this._oneSignalSDK.checkNotificationsSupportState()?(this._browserPushPermission=await this._oneSignalSDK.checkBrowserPermission(),this._isOneSignalNotificationsEnabled=await this._oneSignalSDK.checkNotificationsState(),await this.getUserPlayerId(),this._isReadyService=!0):this._setupStatus="unsupported"}}},AWUIW6cH:(e,t,s)=>{"use strict";var o;s.d(t,{B1:()=>r,gr:()=>o,vk:()=>n}),function(e){e[e.Arkhangelsk=29]="Arkhangelsk",e[e.Barnaul=22]="Barnaul",e[e.Chelyabinsk=74]="Chelyabinsk",e[e.Fontanka=78]="Fontanka",e[e.Irkutsk=38]="Irkutsk",e[e.Izhevsk=18]="Izhevsk",e[e.Kazan=16]="Kazan",e[e.Kemerovo=42]="Kemerovo",e[e.KemerovoRugion=142]="KemerovoRugion",e[e.KhantyMansiysk=86]="KhantyMansiysk",e[e.Kirov=43]="Kirov",e[e.KrasnodarRugion=23]="KrasnodarRugion",e[e.Krasnoyarsk=24]="Krasnoyarsk",e[e.KrasnoyarskRugion=124]="KrasnoyarskRugion",e[e.Kurgan=45]="Kurgan",e[e.Lipetsk=48]="Lipetsk",e[e.Magnitogorsk=182028]="Magnitogorsk",e[e.Mosk=1077]="Mosk",e[e.Murmansk=51]="Murmansk",e[e.NizhnyNovgorod=52]="NizhnyNovgorod",e[e.NovosibirskRugion=154]="NovosibirskRugion",e[e.Nsk=54]="Nsk",e[e.Omsk=55]="Omsk",e[e.OmskRugion=155]="OmskRugion",e[e.Orenburg=56]="Orenburg",e[e.Perm=59]="Perm",e[e.Pskov=60]="Pskov",e[e.Rostov=61]="Rostov",e[e.Ryazan=62]="Ryazan",e[e.SaintPetersburg=47]="SaintPetersburg",e[e.Samara=63]="Samara",e[e.Saratov=64]="Saratov",e[e.Sochi=93]="Sochi",e[e.Stavropol=26]="Stavropol",e[e.Sterlitamak=114160]="Sterlitamak",e[e.Tambov=68]="Tambov",e[e.Tolyatty=142982]="Tolyatty",e[e.Tomsk=70]="Tomsk",e[e.TomskRugion=170]="TomskRugion",e[e.Tula=71]="Tula",e[e.Tyumen=72]="Tyumen",e[e.Ufa=2]="Ufa",e[e.Ulyanovsk=73]="Ulyanovsk",e[e.VelikiiNovgorod=53]="VelikiiNovgorod",e[e.Vladivostok=25]="Vladivostok",e[e.Volgograd=34]="Volgograd",e[e.Vologda=35]="Vologda",e[e.Voronezh=36]="Voronezh",e[e.Yakutsk=14]="Yakutsk",e[e.YamaloNenetsAutonomousArea=89]="YamaloNenetsAutonomousArea",e[e.Yaroslavl=76]="Yaroslavl",e[e.Yekaterinburg=66]="Yekaterinburg",e[e.YekaterinburgRugion=166]="YekaterinburgRugion",e[e.Chita=75]="Chita"}(o||(o={}));const i={[o.Ufa]:{geoIds:[2],domain:"ufa1.ru",city:"Уфа"},[o.Ulyanovsk]:{geoIds:[73],domain:"173.ru",city:"Ульяновск"},[o.Sterlitamak]:{geoIds:[2],domain:"sterlitamak1.ru",city:"Стерлитамак"},[o.Yakutsk]:{geoIds:[14],domain:"14.ru",city:"Якутск"},[o.Kazan]:{geoIds:[16],domain:"116.ru",city:"Казань"},[o.Izhevsk]:{geoIds:[18],domain:"proizhevsk.ru",city:"Ижевск"},[o.Barnaul]:{geoIds:[22],domain:"ngs22.ru",city:"Барнаул"},[o.Mosk]:{geoIds:[77],domain:"msk1.ru",city:"Москва"},[o.KrasnodarRugion]:{geoIds:[23],domain:"93.ru",city:"Краснодар"},[o.Sochi]:{geoIds:[23],domain:"sochi1.ru",city:"Сочи"},[o.KrasnoyarskRugion]:{geoIds:[24],domain:"kbs.ru",city:"Красноярск"},[o.Krasnoyarsk]:{geoIds:[24],domain:"ngs24.ru",city:"Красноярск"},[o.Stavropol]:{geoIds:[26],domain:"26.ru",city:"Ставрополь"},[o.Arkhangelsk]:{geoIds:[29],domain:"29.ru",city:"Архангельск"},[o.Vladivostok]:{geoIds:[25],domain:"vladivostok1.ru",city:"Владивосток"},[o.Volgograd]:{geoIds:[34],domain:"v1.ru",city:"Волгоград"},[o.Vologda]:{geoIds:[35],domain:"35.ru",city:"Вологда"},[o.Voronezh]:{geoIds:[36],domain:"voronezh1.ru",city:"Воронеж"},[o.Irkutsk]:{geoIds:[38],domain:"ircity.ru",city:"Иркутск"},[o.Kemerovo]:{geoIds:[42],domain:"ngs42.ru",city:"Кемерово"},[o.KemerovoRugion]:{geoIds:[42],domain:"42.ru",city:"Кемерово"},[o.Kirov]:{geoIds:[43],domain:"43.ru",city:"Киров"},[o.Kurgan]:{geoIds:[45],domain:"45.ru",city:"Курган"},[o.Lipetsk]:{geoIds:[48],domain:"48.ru",city:"Липецк"},[o.Murmansk]:{geoIds:[51],domain:"51.ru",city:"Мурманск"},[o.NizhnyNovgorod]:{geoIds:[52],domain:"nn.ru",city:"Нижний Новгород"},[o.VelikiiNovgorod]:{geoIds:[53],domain:"53.ru",city:"Великий Новгород"},[o.Nsk]:{geoIds:[54],domain:"ngs.ru",city:"Новосибирск"},[o.NovosibirskRugion]:{geoIds:[54],domain:"154.ru",city:"Новосибирск"},[o.Omsk]:{geoIds:[55],domain:"ngs55.ru",city:"Омск"},[o.OmskRugion]:{geoIds:[55],domain:"omsk1.ru",city:"Омск"},[o.Orenburg]:{geoIds:[56],domain:"56.ru",city:"Оренбург"},[o.Perm]:{geoIds:[59],domain:"59.ru",city:"Пермь"},[o.Pskov]:{geoIds:[60],domain:"60.ru",city:"Псков"},[o.Rostov]:{geoIds:[61],domain:"161.ru",city:"Ростов"},[o.Ryazan]:{geoIds:[62],domain:"62.ru",city:"Рязань"},[o.Samara]:{geoIds:[63],domain:"63.ru",city:"Самара"},[o.Tolyatty]:{geoIds:[63],domain:"tolyatty.ru",city:"Тольятти"},[o.Saratov]:{geoIds:[64],domain:"164.ru",city:"Саратов"},[o.Yekaterinburg]:{geoIds:[66],domain:"e1.ru",city:"Екатеринбург"},[o.YekaterinburgRugion]:{geoIds:[66],domain:"ekat.ru",city:"Екатеринбург"},[o.Tambov]:{geoIds:[68],domain:"68.ru",city:"Тамбов"},[o.Tomsk]:{geoIds:[70],domain:"ngs70.ru",city:"Томск"},[o.TomskRugion]:{geoIds:[70],domain:"70.ru",city:"Томск"},[o.Tula]:{geoIds:[71],domain:"71.ru",city:"Тула"},[o.Tyumen]:{geoIds:[72],domain:"72.ru",city:"Тюмень"},[o.Chelyabinsk]:{geoIds:[74],domain:"74.ru",city:"Челябинск"},[o.Magnitogorsk]:{geoIdsgo"Магнитогорск"},[o.Yaroslavl]:{geoIds:[76],domain:"76.ru",city:"Ярославль"},[o.SaintPetersburg]:{geoIds:[47,78],domain:"178.ru",city:"Санкт-Петербург"},[o.Fontanka]:{geoIds:[47,78],domain:"fontanka.ru",city:"Санкт-Петербург"},[o.KhantyMansiysk]:{geoIds:[86],domain:"86.ru",city:"Ханты-Мансийск"},[o.YamaloNenetsAutonomousArea]:{geoIds:[89],domain:"89.ru",city:"Ямаita]:{geoIds:[75],domain:"chita.ru",city:"Чита"}},r=e=olyatty",e[e.Tomsk=70]="Tomsk",e[e.TomskRugion=170]="TomskRugion",e[e.Tula=71]="Tula",e[e.Tyumen=72]="Tyumen",e[e.Ufa=2]="Ufa",e[e.Ulyanovsk=73]="Ulyanovsk",e[e.VelikiiNovgorod=53]="VelikiiNovgorod",e[e.Volgograd=34]="Volgograd",e[e.Vologda=35]="Vologda",e[e.Voronezh=36]="Voronezh",e[e.Yakutsk=14]="Yakutsk",e[e.YamaloNenetsAutonomousArea=89]="YamaloNenetsAutonomousArea",e[e.Yaroslavl=76]="Yaroslavl",e[e.Yekaterinburg=66]="Yekaterinburg",e[e.YekaterinburgRugion=166]="YekaterinburgRugion",e[e.Chita=75]="Chita",e[e.Vladivostok=25]="Vladivostok"}(o||(o={}));o.Nsk,o.Omsk,o.Krasnoyarsk,o.Kemerovo,o.Barnaul,o.Irkutsk,o.Tomsk,o.Kazan,o.KrasnodarRugion,o.KhantyMansiysk,o.Tolyatty,o.Mosk,o.Chita,o.Vladivostok,o.Orenburg,o.Tula,o.Ufa,o.Arkhangelsk,o.Volgograd,o.Kurgan,o.Perm,o.Rostov,o.Samara,o.Tyumen,o.Chelyabinsk,o.Yaroslavl,o.Magnitogorsk,o.Yakutsk,o.Izhevsk,o.KrasnoyarskRugion,o.Stavropol,o.Vologda,o.Voronezh,an,o.Saratov,o.YekaterinburgRugion,o.Tambov,o.SaintPetersburg,o.YamaloNenetsAutonomousArea,o.TomskRugion,o.Sochi,o.Sterlitamak,o.Ulyanovsk,o.Yekaterinburg,o.NizhnyNovgorod},Opgh5vc3:(e,t,s)=>{"use strict";s.d(t,{r:()=>n});s("FNk8RlXL");var o=s("vvUUj6lJ"),i=s("t4FuBHro"),r=s("tfi2qRj4");class n{constructor(e){this._config=e;const{domain:t}=e;this._clickhouseService=new o.J(t)}get _sendOnlyByProps(){return this._config.sendOnlyByProps}get _experiments(){return this._config.experiments}get _yandexCounters(){return this._config.yandex.counters}send(e){const{event:t,params:s}=e;if("string"==typeof t)return this._sendYM({counters:this._yandexCounters,goalName:t,params:s}),void this._sendClickHouse(this._getClickHouseParamsByOnlyGoal({goalName:t,params:s}));const{goalName:o}=t;if(!0return this._sendYM({counters:this._yandexCounters,goalName:o,params:this._getParamsFromReachGoalByProps(t)}),void this._sendClickHouse(this._getClickHouseParamsByProps(t));this._guardReachGoalByProductName(t)&&(this._sendYM({counters:this._yandexCounters,goalName:o,params:this._getParamsFromReachGoalByProductName(t)}),this._sendClickHouse(this._getClickHouseParamsByProductName(t)))}_sendYM(e){const{counters:t,goalName:s,params:o}=e;(0,i.OK)("reachGoal",{counters:t,goalName:s,params:o})}_sendClickHouse(e){this._clickhouseService.sendEvent(e)}_getClickHouseParams(e,t){return{url:document.location.href,referrer:document.referrer,eventName:e,experiments:this._experiments,params:t}}_getClickHouseParamsByOnlyGoal(e){const t=(0,r.eL)(e.params)?this._saveClickHouseParams(e.params).map(():[];return this._getClickHouseParams(e.goalName,t)}_getClickHouseParamsByProductName(e){let t=[e.pageName,e.blockType,e.fieldType,(0,r.eL)(e.productName)?e.productName:"Продукт"];return(0,r.eL)(e.valueName)&&(t=[...t,...this._saveClickHouseParams(e.valueName)].map((e=>encodeURIComponent(e)))),this._getClickHouseParams(e.goalName,t)}_getClickHouseParamsByProps(e){let t=[e.pageName,e.blockType,e.actionType];return(0,r.eL)(e.prop1)&&t.push(e.prop1),(0,r.eL)(e.prop2)&&(t=[...t,...this._saveClickHouseParams(e.prop2)].map((e=>encodeURIComponent(e)))),this._getClickHouseParams(e.goalName,t)}_saveClickHouseParams(e){const t=[],s=e=>{if("object"!=typeof e||Array.isArray(e))Array.isArray(e)?t.push(...e):t.push(e.toString());else{const[o]=Object.keys(e),i=e[o];t.push(o),s(i)}};return s(e),t}_getParamsFromReachGoalByProps(e){const{pageName:t,blockType:s,actionType::o}}}_getParamsFromReachGoalByProductName(e){const{pageName:t,blockType:s,productName:o="Продукт",valueName:i,fieldType:r}=e;return{[o]:{[t]:{[s]:{[r]:i}}}}}_guardReachGoalByProps(e){return"string"!=typeof e&&"actionType"in e&&"string"==typeof e.actionType}_guardReachGoalByProductName(e){return"string"!=typeof e&&"fieldType"in e&&"string"==typeof e.fieldType}}},jSieKl2I:(e,t,s)=>{"use strict";s.d(t,{Y:()=>n});var o=s("QcTzHOvR"),i=s("P4szYjiP");class r extends i.g{constructor(e,t){super(e,t),this.name="LoggerError"}static of(e,t){return new r(e,ass n{constructor(e){const{dsn:t,useProxy:s=!1,exclude:i=[],include:n=[],extra:a=[],tags:u,environment:c,release:l}=e;try{this._sentry=new o.I({dsn:t,environment:c,release:l,useProxy:s,captureUnhandledErrors:!1,extra:a,tags:u,exclude:i,include:n})}catch(e){throw r.of("Не удалось инициализировать sentry-клиент",e)}}capture(e){const{error:t,extra:s=[],tags:o={}}=e;if(this._sentry.checkAccessToSendError(t))try{this._sentry.capture({entity:t,extra:s,tags:o})}catch(e){throw r.of("Невозможно отправить ошибку",e)}}}},hcccylMt:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const o={components:{LazyHydrate:s("hBbZhq/l").ZP},props:{idleTimefault:2e3,type:Number},onInteraction:{type:[Array,Boolean,String],required:!1},ssrOnly:{type:Boolean,required:!1},triggerHydration:{type:Boolean,default:!1},whenIdle:{type:Boolean,required:!1},whenVisible:{type:[Boolean,Object],required:!1}}};const i=(0,s("KHd+Ze9M").Z)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("LazyHydrate",{attrs:{never:e.ssrOnly,"on-interaction":e.onInteraction,"idle-timeout":e.idleTimeout,"trigger-hydration":e.triggerHydration,"when-idle":e.whenIdle,"when-visible":e.whenVisible}},[e._t("default")],2)}),[],!1,null,null,null).exports},"7vzhYF+v":()=>{},xKHFmCek:()=>{}}]);
//# sourceMappingURL=30400.aeb4f7c.js.map