/*! For license information please see 646.9e7a6b8d-1.237.1.min.js.LICENSE.txt */
"use strict";(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[646],{6291:(t,e,n)=>{n.d(e,{M:()=>v});var s=n(4420),r=n(4351),a=n(4247);function i(){return""+location}var o=n(5763),c=n(4222),u=n(7894),l=n(3239),d=n(6141);function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t&&"object"==typeof t?(Object.keys(t).forEach((r=>{"object"==typeof t[r]?h(t[r],e,n,s):typeof t[r]!==n||s.includes(r)||(t[r]=e(t[r]))})),t):t}var f=n(1117),g=n(6818),y=n(385),p=n(50);const b={};class v extends f.w{constructor(t){super(t),this.tooManyRequestsDelay=(0,o.Mt)(this.sharedContext.agentIdentifier,"harvest.tooManyRequestsDelay")||60,this.obfuscator=new d.RR(this.sharedContext),this.getScheme=()=>!1===(0,o.Mt)(this.sharedContext.agentIdentifier,"ssl")?"http":"https",this._events={}}sendX(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=a.qD({isFinalHarvest:t.opts?.unload}),n={retry:!t.opts?.unload&&e===a.Be},s=this.createPayload(t.endpoint,n);return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))({...t,payload:s,submitMethod:e})}send(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))(t)}obfuscateAndSend(){var t=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{payload:n={}}=e;return h(n,(function(){return t.obfuscator.obfuscateString(...arguments)}),"string",["e"]),this._send({...e,payload:n})}_send(t){let{endpoint:e,payload:n={},opts:i={},submitMethod:c,cbFinished:u,customUrl:d,raw:h,includeBaseParams:f=!0}=t;const g=(0,o.C5)(this.sharedContext.agentIdentifier);if(!g.errorBeacon)return!1;const v=(0,o.OP)(this.sharedContext.agentIdentifier);let{body:m,qs:w}=this.cleanPayload(n);if(0===Object.keys(m).length&&!i?.sendEmptyBody)return u&&u({sent:!1}),!1;let x="".concat(this.getScheme(),"://").concat(g.errorBeacon).concat("rum"!==e?"/".concat(e):"","/1/").concat(g.licenseKey);d&&(x=d),h&&(x="".concat(this.getScheme(),"://").concat(g.errorBeacon,"/").concat(e));const A=!h&&f?this.baseQueryString():"";let C=(0,s.j6)(w,v.maxBytes);c||(c=a.qD({isFinalHarvest:i.unload})),""===A&&C.startsWith("&")&&(C=C.substring(1));const q="".concat(x,"?").concat(A).concat(C);!!w?.attributes?.includes("gzip")||(m="events"===e?m.e:(0,r.P)(m),m.length>75e4&&1===(b[e]=(b?.[e]||0)+1)&&(0,p.Z)("The Browser Agent is attempting to send a very large payload to /".concat(e,". This is usually tied to large amounts of custom attributes. Please check your configurations."))),m&&0!==m.length&&"{}"!==m&&"[]"!==m||(m=""),v.bytesSent[e]=(v.bytesSent[e]||0)+m?.length||0,v.queryBytesSent[e]=(v.queryBytesSent[e]||0)+q.split("?").slice(-1)[0]?.length||0;const B=[];B.push({key:"content-type",value:"text/plain"});let R=c({url:q,body:m,sync:i.unload&&(y.v6||y.w1),headers:B});if(!i.unload&&u&&c===a.Be){const t=this;R.addEventListener("load",(function(){const e={sent:!0,status:this.status};429===this.status?(e.retry=!0,e.delay=t.tooManyRequestsDelay):408!==this.status&&500!==this.status&&503!==this.status||(e.retry=!0),i.needResponse&&(e.responseText=this.responseText),u(e)}),(0,l.m$)(!1))}return R}baseQueryString(){const t=(0,o.OP)(this.sharedContext.agentIdentifier),e=(0,o.C5)(this.sharedContext.agentIdentifier),n=(0,c.f)(i()),r=this.obfuscator.shouldObfuscate()?this.obfuscator.obfuscateString(n):n;return["a="+e.applicationID,(0,s.wu)("sa",e.sa?""+e.sa:""),(0,s.wu)("v",g.q4),m(e),(0,s.wu)("ct",t.customTransaction),"&rst="+(0,u.z)(),"&ck=0","&s="+(t.session?.state.value||"0"),(0,s.wu)("ref",r),(0,s.wu)("ptid",t.ptid?""+t.ptid:"")].join("")}createPayload(t,e){const n=this._events[t],s={body:{},qs:{}};if(Array.isArray(n)&&n.length>0)for(let t=0;t<n.length;t++){const r=n[t](e);r&&(s.body={...s.body,...r.body||{}},s.qs={...s.qs,...r.qs||{}})}return s}cleanPayload(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t=>"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||Array.isArray(t)?t:"string"==typeof t?t.length>0?t:null:Object.entries(t||{}).reduce(((t,e)=>{let[n,s]=e;return("number"==typeof s||"string"==typeof s&&s.length>0||"object"==typeof s&&Object.keys(s||{}).length>0)&&(t[n]=s),t}),{});return{body:e(t.body),qs:e(t.qs)}}on(t,e){Array.isArray(this._events[t])||(this._events[t]=[]),this._events[t].push(e)}}function m(t){return t.transactionName?(0,s.wu)("to",t.transactionName):(0,s.wu)("t",t.tNamePlain||"Unnamed Transaction")}},4222:(t,e,n)=>{n.d(e,{f:()=>a});var s=/([^?#]*)[^#]*(#[^?]*|$).*/,r=/([^?#]*)().*/;function a(t,e){return t.replace(e?s:r,"$1$2")}},4420:(t,e,n)=>{n.d(e,{j6:()=>l,wu:()=>d});var s=n(1284),r=n(4351),a={"%2C":",","%3A":":","%2F":"/","%40":"@","%24":"$","%3B":";"},i=(0,s.D)(a,(function(t){return t})),o=new RegExp(i.join("|"),"g");function c(t){return a[t]}function u(t){return null==t?"null":encodeURIComponent(t).replace(o,c)}function l(t,e){var n=0,a="";return(0,s.D)(t,(function(t,s){var i,o,c=[];if("string"==typeof s||!Array.isArray(s)&&null!=s&&s.toString().length)i="&"+t+"="+u(s),n+=i.length,a+=i;else if(Array.isArray(s)&&s.length){for(n+=9,o=0;o<s.length&&(i=u((0,r.P)(s[o])),n+=i.length,!(void 0!==e&&n>=e));o++)c.push(i);a+="&"+t+"=%5B"+c.join(",")+"%5D"}})),a}function d(t,e){return e&&"string"==typeof e?"&"+t+"="+u(e):""}},2271:(t,e,n)=>{n.d(e,{V:()=>r});var s=n(385);function r(){return Boolean("file:"===s._A?.location?.protocol)}},6141:(t,e,n)=>{n.d(e,{$c:()=>u,Ng:()=>l,RR:()=>c});var s=n(5763),r=n(1117),a=n(2271),i=n(50),o={regex:/^file:\/\/(.*)/,replacement:atob("ZmlsZTovL09CRlVTQ0FURUQ=")};class c extends r.w{shouldObfuscate(){return u(this.sharedContext.agentIdentifier).length>0}obfuscateString(t){if(!t||"string"!=typeof t)return t;for(var e=u(this.sharedContext.agentIdentifier),n=t,s=0;s<e.length;s++){var r=e[s].regex,a=e[s].replacement||"*";n=n.replace(r,a)}return n}}function u(t){var e=[],n=(0,s.Mt)(t,"obfuscate")||[];return e=e.concat(n),(0,a.V)()&&e.push(o),e}function l(t){for(var e=!1,n=!1,s=0;s<t.length;s++){"regex"in t[s]?"string"==typeof t[s].regex||t[s].regex instanceof RegExp||((0,i.Z)('An obfuscation replacement rule contains a "regex" value with an invalid type (must be a string or RegExp)'),n=!0):((0,i.Z)('An obfuscation replacement rule was detected missing a "regex" value.'),n=!0);var r=t[s].replacement;r&&"string"!=typeof r&&((0,i.Z)('An obfuscation replacement rule contains a "replacement" value with an invalid type (must be a string)'),e=!0)}return!e&&!n}},4247:(t,e,n)=>{n.d(e,{Be:()=>a,qD:()=>r});var s=n(385);function r(){let{isFinalHarvest:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t&&s.il&&s.Nk?i:a}function a(t){let{url:e,body:n=null,sync:s,method:r="POST",headers:a=[{key:"content-type",value:"text/plain"}]}=t;const i=new XMLHttpRequest;i.open(r,e,!s);try{"withCredentials"in i&&(i.withCredentials=!0)}catch(t){}return a.forEach((t=>{i.setRequestHeader(t.key,t.value)})),i.send(n),i}function i(t){let{url:e,body:n}=t;try{return window.navigator.sendBeacon.bind(window.navigator)(e,n)}catch(t){return!1}}},2222:(t,e,n)=>{n.d(e,{m:()=>c});var s=n(4322),r=n(5938),a=n(5763),i=n(9144),o=n(8632);class c extends r.W{constructor(){super(...arguments),this.checkConfiguration()}waitForFlags(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(t.map((t=>new Promise((e=>{(0,s.X)("rumresp-".concat(t),(t=>e(t)),this.featureName,this.ee)})))))}checkConfiguration(){if(!(0,a.lF)(this.agentIdentifier)){let t={...(0,o.gG)().info?.jsAttributes};try{t={...t,...(0,a.C5)(this.agentIdentifier)?.jsAttributes}}catch(t){}(0,i.j)(this.agentIdentifier,{...(0,o.gG)(),info:{...(0,o.gG)().info,jsAttributes:t},runtime:(0,a.OP)(this.agentIdentifier)})}}}}}]);