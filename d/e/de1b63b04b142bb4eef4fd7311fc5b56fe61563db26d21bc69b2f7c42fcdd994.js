(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[242],{273:(t,e,n)=>{"use strict";function r(t){var e=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=r?.leading||!1;let s;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i&&void 0===s&&(t.apply(e,o),s=setTimeout((()=>s=clearTimeout(s)),n)),i||(clearTimeout(s),s=setTimeout((()=>{t.apply(e,o)}),n))}}function i(t){var e=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t.apply(e,i)}}}n.d(e,{D:()=>r,Z:()=>i})},7264:(t,e,n)=>{"use strict";n.d(e,{em:()=>w,u5:()=>S,QU:()=>C,_L:()=>$,Gm:()=>q,Lg:()=>X,gy:()=>Y,BV:()=>G,Kf:()=>nt});var r=n(3752),i=n(8683),s=n.n(i);const o="nr@original";var a=Object.prototype.hasOwnProperty,c=!1;function u(t,e){return t||(t=r.ee),n.inPlace=function(t,e,r,i,s){r||(r="");var o,a,c,u="-"===r.charAt(0);for(c=0;c<e.length;c++)f(o=t[a=e[c]])||(t[a]=n(o,u?a+r:r,i,a,s))},n.flag=o,n;function n(e,n,r,a,c){return f(e)?e:(n||(n=""),nrWrapper[o]=e,l(e,nrWrapper,t),nrWrapper);function nrWrapper(){var o,u,l,f;try{u=this,o=s()(arguments),l="function"==typeof r?r(o,u):r||{}}catch(e){h([e,"",[o,u,a],l],t)}i(n+"start",[o,u,a],l,c);try{return f=e.apply(u,o)}catch(t){throw i(n+"err",[o,u,t],l,c),t}finally{i(n+"end",[o,u,f],l,c)}}}function i(n,r,i,s){if(!c||e){var o=c;c=!0;try{t.emit(n,r,i,e,s)}catch(e){h([e,n,r,i],t)}c=o}}}function h(t,e){e||(e=r.ee);try{e.emit("internal-error",t)}catch(t){}}function l(t,e,n){if(Object.defineProperty&&Object.keys)try{return Object.keys(t).forEach((function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})})),e}catch(t){h([t],n)}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return e}function f(t){return!(t&&t instanceof Function&&t.apply&&!t[o])}var d=n(3916),p=n(2374);const m={},v=XMLHttpRequest,y="addEventListener",g="removeEventListener";function w(t){var e=function(t){return(t||r.ee).get("events")}(t);if(m[e.debugId]++)return e;m[e.debugId]=1;var n=u(e,!0);function i(t){n.inPlace(t,[y,g],"-",s)}function s(t,e){return t[1]}return"getPrototypeOf"in Object&&(p.il&&b(document,i),b(p._A,i),b(v.prototype,i)),e.on(y+"-start",(function(t,e){var r=t[1];if(null!==r&&("function"==typeof r||"object"==typeof r)){var i=(0,d.X)(r,"nr@wrapped",(function(){var t={object:function(){if("function"!=typeof r.handleEvent)return;return r.handleEvent.apply(r,arguments)},function:r}[typeof r];return t?n(t,"fn-",null,t.name||"anonymous"):r}));this.wrapped=t[1]=i}})),e.on(g+"-start",(function(t){t[1]=this.wrapped||t[1]})),e}function b(t,e){let n=t;for(;"object"==typeof n&&!Object.prototype.hasOwnProperty.call(n,y);)n=Object.getPrototypeOf(n);for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];n&&e(n,...i)}var A="fetch-",x=A+"body-",M=/^(13|7)1$/.test(n.j)?null:["arrayBuffer","blob","json","text","formData"],I=p._A.Request,E=p._A.Response,P="prototype",k="nr@context";const j={};function S(t){const e=function(t){return(t||r.ee).get("fetch")}(t);if(!(I&&E&&p._A.fetch))return e;if(j[e.debugId]++)return e;function n(t,n,r){var i=t[n];"function"==typeof i&&(t[n]=function(){var t,n=s()(arguments),o={};e.emit(r+"before-start",[n],o),o[k]&&o[k].dt&&(t=o[k].dt);var a=i.apply(this,n);return e.emit(r+"start",[n,t],a),a.then((function(t){return e.emit(r+"end",[null,t],a),t}),(function(t){throw e.emit(r+"end",[t],a),t}))})}return j[e.debugId]=1,M.forEach((t=>{n(I[P],t,x),n(E[P],t,x)})),n(p._A,"fetch",A),e.on(A+"end",(function(t,n){var r=this;if(n){var i=n.headers.get("content-length");null!==i&&(r.rxSize=i),e.emit(A+"done",[null,n],r)}else e.emit(A+"done",[t],r)})),e}const O={},T=/^(13|7)1$/.test(n.j)?null:["pushState","replaceState"];function C(t){const e=function(t){return(t||r.ee).get("history")}(t);return!p.il||O[e.debugId]++||(O[e.debugId]=1,u(e).inPlace(window.history,T,"-")),e}var D=n(8544);const R={},L=/^(201|797)$/.test(n.j)?["appendChild","insertBefore","replaceChild"]:null;function $(t){const e=function(t){return(t||r.ee).get("jsonp")}(t);if(!p.il||R[e.debugId])return e;R[e.debugId]=!0;var n=u(e),i=/[?&](?:callback|cb)=([^&#]+)/,s=/(.*)\.([^.]+)/,o=/^(\w+)(\.|$)(.*)$/;function a(t,e){var n=t.match(o),r=n[1],i=n[3];return i?a(i,e[r]):e[r]}return n.inPlace(Node.prototype,L,"dom-"),e.on("dom-start",(function(t){!function(t){if(!t||"string"!=typeof t.nodeName||"script"!==t.nodeName.toLowerCase())return;if("function"!=typeof t.addEventListener)return;var r=(o=t.src,c=o.match(i),c?c[1]:null);var o,c;if(!r)return;var u=function(t){var e=t.match(s);if(e&&e.length>=3)return{key:e[2],parent:a(e[1],window)};return{key:t,parent:window}}(r);if("function"!=typeof u.parent[u.key])return;var h={};function l(){e.emit("jsonp-end",[],h),t.removeEventListener("load",l,(0,D.m$)(!1)),t.removeEventListener("error",f,(0,D.m$)(!1))}function f(){e.emit("jsonp-error",[],h),e.emit("jsonp-end",[],h),t.removeEventListener("load",l,(0,D.m$)(!1)),t.removeEventListener("error",f,(0,D.m$)(!1))}n.inPlace(u.parent,[u.key],"cb-",h),t.addEventListener("load",l,(0,D.m$)(!1)),t.addEventListener("error",f,(0,D.m$)(!1)),e.emit("new-jsonp",[t.src],h)}(t[0])})),e}var _=n(2919);const N={};function q(t){const e=function(t){return(t||r.ee).get("mutation")}(t);if(!p.il||N[e.debugId])return e;N[e.debugId]=!0;var n=u(e),i=_.Yu.MO;return i&&(window.MutationObserver=function(t){return this instanceof i?new i(n(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype),e}const F={};function X(t){const e=function(t){return(t||r.ee).get("promise")}(t);if(F[e.debugId])return e;F[e.debugId]=!0;var n=r.c,i=u(e),s=_.Yu.PR;return s&&function(){function t(n){var r=e.context(),o=i(n,"executor-",r,null,!1);const a=Reflect.construct(s,[o],t);return e.context(a).getCtx=function(){return r},a}p._A.Promise=t,Object.defineProperty(t,"name",{value:"Promise"}),t.toString=function(){return s.toString()},Object.setPrototypeOf(t,s),["all","race"].forEach((function(n){const r=s[n];t[n]=function(t){let i=!1;Array.from(t||[]).forEach((t=>{this.resolve(t).then(o("all"===n),o(!1))}));const s=r.apply(this,arguments);return s;function o(t){return function(){e.emit("propagate",[null,!i],s,!1,!1),i=i||!t}}}})),["resolve","reject"].forEach((function(n){const r=s[n];t[n]=function(t){const n=r.apply(this,arguments);return t!==n&&e.emit("propagate",[t,!0],n,!1,!1),n}})),t.prototype=s.prototype;const r=s.prototype.then;s.prototype.then=function(){var t=this,s=n(t);s.promise=t;for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];a[0]=i(a[0],"cb-",s,null,!1),a[1]=i(a[1],"cb-",s,null,!1);const u=r.apply(this,a);return s.nextPromise=u,e.emit("propagate",[t,!0],u,!1,!1),u},s.prototype.then[o]=r,e.on("executor-start",(function(t){t[0]=i(t[0],"resolve-",this,null,!1),t[1]=i(t[1],"resolve-",this,null,!1)})),e.on("executor-err",(function(t,e,n){t[1](n)})),e.on("cb-end",(function(t,n,r){e.emit("propagate",[r,!0],this.nextPromise,!1,!1)})),e.on("propagate",(function(t,n,r){this.getCtx&&!n||(this.getCtx=function(){if(t instanceof Promise)var n=e.context(t);return n&&n.getCtx?n.getCtx():this})}))}(),e}const B={},H="requestAnimationFrame";function Y(t){const e=function(t){return(t||r.ee).get("raf")}(t);if(!p.il||B[e.debugId]++)return e;B[e.debugId]=1;var n=u(e);return n.inPlace(window,[H],"raf-"),e.on("raf-start",(function(t){t[0]=n(t[0],"fn-")})),e}const K={},W="setTimeout",Z="setInterval",z="clearTimeout",U="-start",J="-",V=[W,"setImmediate",Z,z,"clearImmediate"];function G(t){const e=function(t){return(t||r.ee).get("timer")}(t);if(K[e.debugId]++)return e;K[e.debugId]=1;var n=u(e);return n.inPlace(p._A,V.slice(0,2),W+J),n.inPlace(p._A,V.slice(2,3),Z+J),n.inPlace(p._A,V.slice(3),z+J),e.on(Z+U,(function(t,e,r){t[0]=n(t[0],"fn-",null,r)})),e.on(W+U,(function(t,e,r){this.method=r,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=n(t[0],"fn-",this,r)})),e}if(!/^(13|7)1$/.test(n.j))var Q=n(8610);const tt={},et=/^(13|7)1$/.test(n.j)?null:["open","send"];function nt(t){var e=t||r.ee;const n=function(t){return(t||r.ee).get("xhr")}(e);if(tt[n.debugId]++)return n;tt[n.debugId]=1,w(e);var i=u(n),s=_.Yu.XHR,o=_.Yu.MO,a=_.Yu.PR,c=_.Yu.SI,h="readystatechange",l=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],f=[],d=p._A.XMLHttpRequest.listeners,m=p._A.XMLHttpRequest=function(t){var e=new s(t);function r(){try{n.emit("new-xhr",[e],e),e.addEventListener(h,y,(0,D.m$)(!1))}catch(t){(0,Q.Z)("An error occured while intercepting XHR",t);try{n.emit("internal-error",[t])}catch(t){}}}return this.listeners=d?[...d,r]:[r],this.listeners.forEach((t=>t())),e};function v(t,e){i.inPlace(e,["onreadystatechange"],"fn-",M)}function y(){var t=this,e=n.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,n.emit("xhr-resolved",[],t)),i.inPlace(t,l,"fn-",M)}if(function(t,e){for(var n in t)e[n]=t[n]}(s,m),m.prototype=s.prototype,i.inPlace(m.prototype,et,"-xhr-",M),n.on("send-xhr-start",(function(t,e){v(t,e),function(t){f.push(t),o&&(g?g.then(x):c?c(x):(b=-b,A.data=b))}(e)})),n.on("open-xhr-start",v),o){var g=a&&a.resolve();if(!c&&!a){var b=1,A=document.createTextNode(b);new o(x).observe(A,{characterData:!0})}}else e.on("fn-end",(function(t){t[0]&&t[0].type===h||x()}));function x(){for(var t=0;t<f.length;t++)v(0,f[t]);f.length&&(f=[])}function M(t,e){return e}return n}},2011:(t,e,n)=>{"use strict";n.d(e,{setupAgentSession:()=>k});var r=n(2919),i=n(4329),s=n(3752),o=n(4045),a=n(2374),c=n(5526),u=n(8610),h=n(2438);class l{constructor(t,e){if(!t.onEnd)throw new Error("onEnd handler is required");if(!e)throw new Error("ms duration is required");this.onEnd=t.onEnd,this.initialMs=e,this.startTimestamp=Date.now(),this.timer=this.create(this.onEnd,e)}create(t,e){return this.timer&&this.clear(),setTimeout((()=>t?t():this.onEnd()),e||this.initialMs)}clear(){clearTimeout(this.timer),this.timer=null}end(){this.clear(),this.onEnd()}isValid(){return this.initialMs-(Date.now()-this.startTimestamp)>0}}var f=n(2797);class d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=t}get(t){try{return this.state[t]}catch(t){return""}}set(t,e){try{if(null==e)return this.remove(t);this.state[t]=e}catch(t){return}}remove(t){try{delete this.state[t]}catch(t){return}}}var p=n(6998),m=n(273);class v extends l{constructor(t,e){super(t,e),this.onRefresh=t.onRefresh,this.onPause=t.onPause,this.remainingMs=void 0,t.refreshEvents||(t.refreshEvents=["click","keydown","scroll"]);try{this.abortController=new AbortController}catch(t){}if(a.il&&t.ee){if(t.ee){const e=(0,m.D)(this.refresh.bind(this),500,{leading:!0});t.ee.on("fn-end",(n=>{t.refreshEvents.includes(n?.[0]?.type)&&e()}))}(0,p.N)((t=>{"hidden"===t?this.pause():this.refresh()}),!1,!1,this.abortController?.signal)}}abort(){this.clear(),this.abortController?.abort()}pause(){this.onPause?.(),clearTimeout(this.timer),this.remainingMs=this.initialMs-(Date.now()-this.startTimestamp)}refresh(t,e){this.clear(),this.timer=this.create(t,e),this.startTimestamp=Date.now(),this.remainingMs=void 0,this.onRefresh?.()}}var y=n(7264),g=n(4286),w=n(9252),b=n(6034),A=n(2325);const x={value:"",inactiveAt:0,expiresAt:0,updatedAt:Date.now(),sessionReplayActive:!1,sessionTraceActive:!1,custom:{}};class M{constructor(t){this.setup(t)}setup(t){let{agentIdentifier:e,key:n,value:r=(0,c.ky)(16),expiresMs:i=f.oD,inactiveMs:o=f.Hb,storageAPI:u=new d}=t;if(!e||!n)throw new Error("Missing Required Fields");a.il?this.storage=u:this.storage=new d,this.sync(x),this.agentIdentifier=e,this.key=n,this.value=r,this.expiresMs=i,this.inactiveMs=o,this.ee=s.ee.get(e),(0,y.em)(this.ee);const h=this.read();i?(this.expiresAt=h?.expiresAt||this.getFutureTimestamp(i),this.expiresTimer=new l({onEnd:()=>{this.collectSM("expired",this),this.collectSM("duration",this),this.reset()}},this.expiresAt-Date.now())):this.expiresAt=1/0,o?(this.inactiveAt=h?.inactiveAt||this.getFutureTimestamp(o),this.inactiveTimer=new v({onEnd:()=>{this.collectSM("inactive",this),this.collectSM("duration",this),this.reset()},onRefresh:this.refresh.bind(this),onPause:()=>this.write(new g.I(this.read(),x)),ee:this.ee,refreshEvents:["click","keydown","scroll"]},this.inactiveAt-Date.now())):this.inactiveAt=1/0,this.isNew=!Object.keys(h).length,this.isNew?this.write(new g.I(this,x),!0):this.sync(h),this.initialized=!0}get lookupKey(){return"".concat(f.Bq,"_").concat(this.key)}sync(t){Object.assign(this,t)}read(){try{const t=this.storage.get(this.lookupKey);if(!t)return{};const e="string"==typeof t?JSON.parse(t):t;return this.isInvalid(e)?{}:this.isExpired(e.expiresAt)?(this.collectSM("expired",this),this.collectSM("duration",e,!0),this.reset()):this.isExpired(e.inactiveAt)?(this.collectSM("inactive",this),this.collectSM("duration",e,!0),this.reset()):e}catch(t){return(0,u.Z)("Failed to read from storage API",t),{}}}write(t){try{if(!t||"object"!=typeof t)return;return t.updatedAt=Date.now(),this.sync(t),this.storage.set(this.lookupKey,(0,h.P)(t)),t}catch(t){return(0,u.Z)("Failed to write to the storage API",t),null}}reset(){try{return this.initialized&&this.ee.emit("session-reset"),this.storage.remove(this.lookupKey),this.inactiveTimer?.abort?.(),this.expiresTimer?.clear?.(),delete this.custom,delete this.value,this.setup({agentIdentifier:this.agentIdentifier,key:this.key,storageAPI:this.storage,expiresMs:this.expiresMs,inactiveMs:this.inactiveMs}),this.read()}catch(t){return{}}}refresh(){const t=this.read();this.inactiveAt=this.getFutureTimestamp(this.inactiveMs),this.write({...t,inactiveAt:this.inactiveAt})}isExpired(t){return Date.now()>t}isInvalid(t){return!["value","expiresAt","inactiveAt"].every((e=>Object.keys(t).includes(e)))}collectSM(t,e,n){let r,i;if("duration"===t){const t=e.expiresAt-e.expiresMs;r=(n?e.updatedAt:Date.now())-t,i="Session/Duration/Ms"}"expired"===t&&(i="Session/Expired/Seen"),"inactive"===t&&(i="Session/Inactive/Seen"),i&&(0,w.p)(b.xS,[i,r],void 0,A.D.metrics,this.ee)}getFutureTimestamp(t){return Date.now()+t}syncCustomAttribute(t,e){if(a.il)if(null===e){const e=this.read();e.custom&&(delete e.custom[t],this.write({...e}))}else{const n=this.read();this.custom={...n?.custom||{},[t]:e},this.write({...n,custom:this.custom})}}}class I{get(t){try{return localStorage.getItem(t)||void 0}catch(t){return""}}set(t,e){try{return null==e?this.remove(t):localStorage.setItem(t,e)}catch(t){return}}remove(t){try{localStorage.removeItem(t)}catch(t){return}}}class E{constructor(t){this.domain=t}get(t){try{var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));if(e)return e[2]}catch(t){return""}}set(t,e){try{const n="".concat(t,"=").concat(e,"; Domain=").concat(domain,"; Path=/");document.cookie=n}catch(t){return}}remove(t){try{return document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; Domain=").concat(domain,"; Path=/")}catch(t){return}}}let P=0;function k(t){const e=(0,r.OP)(t);if(P++)return e.session;const n=s.ee.get(t);let c;const u=!0===(0,r.Mt)(t,"privacy.cookies_enabled");if(u&&a.il&&(c=(0,r.Mt)(t,"session.domain")?new E((0,r.Mt)(t,"session.domain")):new I),u&&(e.session=new M({agentIdentifier:t,key:"SESSION",storageAPI:c,expiresMs:(0,r.Mt)(t,"session.expiresMs"),inactiveMs:(0,r.Mt)(t,"session.inactiveMs")})),a.il){const n=e.session?.read?.()?.custom,i=(0,r.C5)(t);n&&(0,r.CX)(t,{...i,jsAttributes:{...i.jsAttributes,...n}})}return(0,o.X)("api-setCustomAttribute",((t,n,r)=>{e.session.syncCustomAttribute(n,r)}),"session",n),(0,o.X)("api-setUserId",((t,n,r)=>{e.session.syncCustomAttribute(n,r)}),"session",n),(0,i.L)(t,"session"),e.session}},8683:t=>{t.exports=function(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,s=Array(i<0?0:i);++r<i;)s[r]=t[e+r];return s}}}]);