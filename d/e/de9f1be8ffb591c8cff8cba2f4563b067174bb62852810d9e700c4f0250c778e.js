import{kebabToCamelCase as p,fetchJson as h,storeGetItem as P,storeSetItem as O,resolve,mergeDeep as g}from"./croco.js";export const EVENTS={BREAKPOINT_CHANGE:"breakpointchange"};let m=JSON.parse(sessionStorage.getItem("mediaQuery"));if(!m){m={};let o=getComputedStyle(document.documentElement);let i=o.getPropertyValue("--mq-keys").split(",");for(let l=0,t=i.length;l<t;l++){let t=i[l].trim();m[p(t)]=o.getPropertyValue(`--mq-${t}`).trim()}sessionStorage.setItem("mediaQuery",JSON.stringify(m))}Object.keys(m).forEach(key=>m[key]=window.matchMedia(m[key]));let t,o,i,l,I,N,T;function S(){if(!t){t=document.querySelector(".js-local-resources")}return t}export const mediaQuery=m;export function getDeviceType(){let t="tablet";if(mediaQuery.desktopOnly.matches){t="desktop"}else if(mediaQuery.mobileOnly.matches){t="mobile"}return t}export const POPIN_TYPES={none:"",panel:"popin--panel",mediumPanel:"popin--panel popin--medium-width",smallPanel:"popin--panel popin--small-width",fill:"popin--fill",simple:"popin--simple",floatable:"popin--floatable"};export const POPIN_REFIT_TYPES={dialog:"popin--dialog",alert:"popin--alert",large:"popin--panel popin--large-width",medium:"popin--panel popin--medium-width",small:"popin--panel popin--small-width",fill:"popin--fill"};export const POPIN_ANIMATION={noSlide:"popin--no-slide",noAnimation:"popin--no-anim",openFromBottom:"popin--open-from-bottom",openFromRight:"popin--open-from-right",fade:"fade-enter-done"};export const popinConfs={"popin-search":{tplFn:"tplSearch",tplPath:"../templates/search.tpl.js",classname:`${mediaQuery.mobileAndTablet.matches?"hides-page ":""}popin--under-header popin-with-keyboard`,type:POPIN_TYPES.fill,options:{isNotClosable:true,noAda:true,retainDesktopScrollLockState:true},animation:POPIN_ANIMATION.noSlide},"popin-shipment-stations-relays":{type:POPIN_TYPES.smallPanel},"popin-shipment-stations-web-to-store":{type:POPIN_TYPES.smallPanel},"popin-shipment-stations-stores":{type:POPIN_TYPES.smallPanel},"popin-spa-cancel-order":{type:POPIN_TYPES.none,classname:["popin-mt--centered","popin-cancel-order","popin--no-shadow"],options:{noLockScrollOnOpen:true}},"popin-spa-invoices-order":{},"popin-spa-advantages-list":{classname:["popin-advantages-list"]},"popin-spa-history-points":{classname:["popin-history-points"]},"popin-spa-editable":{}};export const ctaTypes={BUTTON:"btn-cta font-label",BUTTON_PRIMARY:"btn-cta btn--primary font-label",BUTTON_CONVERSION:"btn-cta btn--conversion font-label",BUTTON_EXPRESS:"btn-cta btn--express font-label",BUTTON_SELECTOR:"btn-cta btn--selector font-small text-center",BUTTON_SELECTOR_SQUARE:"btn-cta btn--selector font-small text-center l-aspect-ratio--1 l-overflow-hidden l-auto-height",LINK:"l-inline-block reverse-link",BOLD_LINK:"l-inline-block fw-bold",ICON:"btn-cta btn--icon",ICON_PRIMARY:"btn-cta btn--primary btn--icon",ICON_CONVERSION:"btn-cta btn--conversion btn--icon",PDP_ATC_PRIMARY:"flex rounded pdp-atc-btn l-absolute l-padding-around--medium bg-primary",PDP_ATC_CONVERSION:"flex rounded pdp-atc-btn l-absolute l-padding-around--medium bg-conversion"};export const getThemeClass=(t,target)=>{const o=Lacoste.features.themes||{};let value=null;if(o[t]&&o[t][target]){value=o[t][target]}return value};export const LOGGERS={DEFAULT:"DEBUG|#339ede",TRACKING:"TRACKING|#b70e60",FORM:"FORM|#1ae711",LOADER:"LOADER|#11d0e7",MEDIATOR:"MEDIATOR|#f386f5",POPIN:"POPIN|#cce711",SEARCH:"SEARCH|#9911e7",TEMPLATE:"TEMPLATE|#e79f11",VIDEO:"VIDEO|#1a11e7",OFFLINE:"OFFLINE|#c07623",CONNECT:"CONNECT SPA|#8b4513"};export const INVALID_PARAMETER="Invalid Parameter";export const MODULE_ALREADY_INITIALIZED="Module already Initialized";export const noElement=selector=>`No element ${selector} found`;const A="lcst-configuration";let R=0;let u;function C(){return+new Date+1e3*60*60}export function isLoggedIn(){return!!document.querySelector(".js-logged")}export const isPLPStickyFilterEnabled=!!document.querySelector(".js-plp-sticky-filters");async function L(m){const u=isLoggedIn();return new Promise((t,reject)=>{let o=P({item:A});const i=u!==resolve("isLogged",o);if(!I){[N,I,T]=resolve(["locale","url","codeVersion"],S()?.dataset)}const l=N!==resolve("locale",o);const p=T&&T!==resolve("codeVersion",o);if(m||!o||i||l||p){if(I){import("./mediator.js").then(({Mediator:i})=>{if(R===0){h(I).then(data=>{const o=g(data.cachedData,data.uncachedData);O({item:A,value:o,expiration:C()});if(R>1){for(let t=1;t<R;t++){i.publish("localResources.fetch."+t,o)}}t(o);R=0})}else{i.subscribe("localResources.fetch."+R,data=>{t(data)},true)}R++})}}else{t(o)}})}export function updateLocalConfiguration(key,value){let t=P({item:A})||{};t[key]=value;O({item:A,value:t,expiration:C()})}export async function getLocalData(key,t){const o=await L(t);return key?resolve(key,o):o}export function getPathUrl(absolute){if(absolute&&!i){i=resolve("dataset.pathAbsoluteUrl",S())}else if(!o){o=resolve("dataset.pathUrl",S())}return absolute?i:o}export function getSVGPath(){if(!l){l=resolve("dataset.svgPath",S())}return l}export function getAutoResizeEnabled(){return resolve("dataset.isAutoResizeEnabled",S())==="true"}export function isRTLEnabled(){if(u===undefined){u=!!document.documentElement.classList.contains("js-rtl")}return u}export function getAutomationClass(context,id){return!Lacoste.siteprefs.IS_PROD?"nrt-"+context+"--"+id:""}export function getComputedStyleProperty(t,o){if(!o){o=getComputedStyle(document.documentElement)}return parseInt(o.getPropertyValue(t).replace("px",""))}export function getHeaderHeight(t){const o=getComputedStyle(document.documentElement);const i=getComputedStyleProperty("--top-banner-height",o);const l=getComputedStyleProperty("--header-height",o);let result=i+l;if(t&&!mediaQuery.tabletOnly.matches){result+=getComputedStyleProperty(mediaQuery.mobileOnly.matches?"--search-bar-height":"--header-menu-height",o)}return result}export function isHeaderFoldedDown(){let result=true;if(!mediaQuery.tabletOnly.matches){let t=mediaQuery.mobileOnly.matches?document.querySelector(".js-search-bar-form"):document.documentElement;if(t){result=t.classList.contains(mediaQuery.mobileOnly.matches?"is-folded-down":"header-is-folded-down")}}return result}