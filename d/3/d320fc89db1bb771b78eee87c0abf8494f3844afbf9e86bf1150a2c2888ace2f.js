/*! For license information please see player-api.modern.js.LICENSE.txt */
(()=>{ar t,r={856:5654:4678:3379:(e,t,r)=>{"use strict";d,u=h=),p=[],f=(d=[],,m=null,g=0;e.exports=,7792:e=>{e.exports='<svg viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 1.5a13 13 0 1 0 12.898 14.63" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'},310:e=>{e.exports='<svg viewBox="0 0 18 18"><path d="M14.684 3.292Q17.053 5.661 17.053 9q0 3.34-2.369 5.708Q12.34 17.053 9 17.053V18q3.742 0 6.371-2.629Q18 12.742 18 9q0-3.718-2.629-6.371Q12.742 0 9 0v.947q3.34 0 5.684 2.345z"></path></svg>'},7542:(e,t,r)=>{"use strict";function n(e){return new Promise((t,r)=>{const n=new Image;n.onload=function(){n.width>0&&n.height>0&&t(!0),r("Feature isn't supported")},n.onerror=n.src="data:image/webp;base64,"+b[e]})}async function i(e,t){if(!(0,S.HD)(e))return;if(!t)return e;const r=e.replace(/https?:\/\//i,"").replace(/\/\//i,"").split("/")[1]||null;if(!r||-1===T.indexOf(r))return e;const i=function(e){if("object"!==typeof e)return A.Horizontal;const{width:t,height:r}=e;return t&&r?t>r?A.Horizontal:A.Vertical:A.Horizontal}(t)===A.Horizontal?"1920x1080":"1080x1920",a=await async function(){try{const e=localStorage.getItem("playerapi_webp_support_info");if(null!==e){const{isWebpSupported:t,lastCheckTimestamp:r}=JSON.parse(e);if(t)return!0;if(Date.now()-r<864e5)return!1}return await Promise.all([n("lossy"),n("lossless"),n("alpha"),n("animation")]),localStorage.setItem("playerapi_webp_support_info",JSON.stringify(new R(!0))),!0}catch(e){return localStorage.setItem("playerapi_webp_support_info",JSON.stringify(new R(!1))),!1}}()?"q15":"q30";return e.replace("orig",""+i+a)}unction o(e,t){const r={content_id:t.content_id,stream_block:t.stream_block,channel_id:t.channel_id,path:"player-events."+e};return"error"===e&&(r.error_code="{{error-code}}"),"seek"===e&&(r.position_from="{{old-position}}"),function(e){if(w&&e.reqid===k)return w;k=e.reqid;const t={reqid:k,yandexuid:e.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e.from,from_block:e.from_block};return e.licence&&(t.licence=e.licence),e.svod&&(t.svod=e.svod),w=I+"//yandex.ru/clck/jclck/"+a(t)}(t)+a({rnd:"{{random}}",fullscreen:"{{fullscreen}}",mute:"{{muted}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}",vsid:"{{vsid}}"})+a(r)+"*"}n f(){return{from:{value:"other",set:d},slots:null,"test-id":{value:[],set,distr_id:null,audio_only:!1,tv:{value:!1,set:s},loop:{value:!1,set:s},preload:{value:!1,set:s},report:{value:!0,set:s},preview:{value:!0,set:s},preview_src:{value:"",set:d},poster_object_fit:{set:d},nativeui:{value:!1,set:s},use_friendly_frame:{value:!0,set:s},branding_intro:{value:!1,set:s},restore_playback_progress:{value:!1,set:s},remote_progress_saving:{value:!1,set:s},progress:{value:!0,set:s},start_position_confirmation:{value:!1,set:s},force_unmute:{value:!0,set:s},stream_cms:{value:!0,set:s},beta:{value:!1,set:c},event_prefix:{value:"",set:d},from_block:{value:"other",set:d},hidden:{value:"",set:d},device_id:{value:"",set:d},autoplay:{value:!0,set,lang:{value:"",set(e,t){var r;(r=e,-1!==M.indexOf(r))&&(this[t]=e)}},allow_muted:{set:s},mute:{value:!1,set:l},volume:{set,play_on_visible:{set,adConfig:{set,streams:{set,vmap_id:{set:h},vmap_scenario_id:{set:h},meta:{value:void 0,set(e,t){if(!(0,S.HD)(e))return;const r=N[e];(0,S.hj)(r)&&(this[t]=r)}},subscribe_button:{value:void 0,set(e,t){if(!(0,S.HD)(e))return;const r=D[e];(0,S.hj)(r)&&(this[t]=e)}},m_duration:{value:3e3,set,m_title:{value:null,set:d},m_desc:{value:null,set:d},live_offset:{set,platform:{set(e,t){L.indexOf(e)>-1&&(this[t]=e)}},mod:{value:"",set:d},t:{set:u},skippable_fragments:{value:!0,set:s},preferable_width:{set:u},preferable_height:{set:u},preferable_audio:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},preferable_text:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(:[]}},release_timeout:{value:0,set:u},retpath:{set:d},ya_station:{value:!0,set:s},share:{value:!0,set:s},has_preroll:{set:s},disable_update:{value:!1,set:s},velocity_metrics_sampled:{value:!0,set:s},test_mode:{value:!1,set:s},test_data:{value:"default",set(e,t){var r;(r=e,-1!==x.indexOf(r))&&(this[t]=e)}},object_fit:{set:d},background_color:{set:d},zen_preload:{set:s},disable_postmessage_broadcast:{value:!1,set:s},cache_sources_count:{set:h},scriptedEvents:{set:p},version:{set(e,t){/^1\.0-\d+$/.test(e)&&(this[t]=e)}}}}function m(e){var t;const r="http:"===location.protocol?"http://":"https://",n=null==(t=e.request_info)?void 0:t.player_version;return r+"yastatic.net"+(n?"/yandex-video-player-iframe-api-bundles/"+n+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")}function g(e,t){var r,n,i,a;const o={yandexuid:B.h,reqid:t.reqid,from:t.from,bundle:m(e),sandboxVersion:null==(r=e.request_info)?void 0:r.player_version,slots:(0,j.S)((null==(n=e.request_info)?void 0:n.slots)||"",t.slots||""),frontendVhReqid:e["apphost-reqid"]||(null==(i=e.user_data)?void 0:i.req_id),contentId:null!=(s=e.content)&&s.actual_episode?e.content.actual_episode.content_id:null==(l=e.content)?void 0:l.content_id,fromBlock:t.from_block,streamBlock:t.stream_block||(null==(a=e.content)?void 0:a.streamBlock)};var s,l,c;(!o.reqid&&(0,S.Kn)(t.counters)&&(o.reqid=t.counters.reqid),!o.reqid&&e.user_data)&&(o.reqid=null==(c=e.user_data)?void 0:c.req_id);return o.reqid||(o.reqid=""),o}function y(e,t){const r=parseFloat(e);r===r&&(this[t]=r)}unction E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{y:()=>q});var _=r(2724),S=r(719);const b={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};class R{constructor(e){this.isWebpSupported=void 0,this.lastCheckTimestamp=void 0,this.isWebpSupported=e,this.lastCheckTimestamp=Date.now()}}var A;!function(e){e.Horizontal="HORIZONTAL",e.Vertical="VERTICAL"}(A||(A={}));const T=["get-vh"];var P=r(1321);const I="undefined"!==typeof window&&"http:"===location.protocol?"http:":"https:",O=["init","error","adStart","adEnd","start","play","pause","end","seek"],C=["rnd","fullscreen","mute","duration","timestamp","user_ts","watchedTime","vsid","error_code","position_from"];let w="",k="";const N={none:0,always:1,start:2,ui:3,restriction_age:4},D={plain:0,colourful:1,with_subscribe_info:2,with_subscribe_label:3},L=["desktop","touch","pad","app","tv","tvapp"],x=["default","live","paid","avod","alive"],M=["be","en","id","kk","ru","tr","tt","uk","uz"];let F=!1;const V=(function(){return f()}),(function(e){return e.reqid&&(0,S.Kn)(e.counters)&&!e.counters.reqid&&(e.counters.reqid=e.reqid),(0,S.Kn)(e.counters)&&e.counters.reqid&&!e.reqid&&(e.reqid=e.counters.reqid),(e.tv||e.nativeui||e.test_mode)&&(e.recommendations=""),function(e){const t={};(0,S.HD)(e.slots)&&e.slots.split(";").forEach(();Array.isArray(e["test-id"])&&e["test-id"].forEach(();let r="";const n=[];for(const i in t)t.hasOwnProperty(i)&&(r+=r.length>0?";"+t[i]:t[i],n.push(i));r&&(e.slots=r);n.length>0&&(e["test-id"]=n)}(e),e}));class U{static parse(){const e=U.getDefault();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=r.filter(Boolean).join(";"),a=P.A.parse(i,";",!0);return new P.A(a,e)}static getDefault(){return{"videoplayer-version":void 0,version:void 0,force_unmute:{value:void 0,set:s},restore_playback_progress:{value:void 0,set:s},use_friendly_frame:{value:void 0,set:s},progress:{value:void 0,set:s},start_position_confirmation:{value:void 0,set:s},hide_brand_play_button:{value:void 0,set:s},disable_autoplay_slow_connection:{value:!1,set:s},disable_autoplay_save_data:{value:!1,set:s},max_buffer_length:{value:void 0,set:u},bandwidth_estimate_offset:{value:void 0,set:u},soft_max_res_height:{value:void 0,set:u},poll_id:{value:void 0,set:d},poll_timeout:{value:21600,set:u},poll_show_before_midroll:{value:!1,set:s}}}}var j=r(3563),B=r(9026),Y=r(5745);class G{static create(e){var t,r,n;let{queryParams:i,vhParams:a,playerApi:o}=e;const s=V(i||{},()=>{});null!=(t=a.content)&&t.ottParams&&(0,S.hj)(null==(r=a.content)?void 0:r.restriction_age)&&(s.meta=N.restriction_age,s.m_duration=8,s.m_title=a.content.restriction_age+"+");const l=U.parse(null==(n=a.request_info)?void 0:n.flags,s.mb_flags);return l,s),new G({query:s,expFlags:l,params:{data:a},player:o,ids:g(a,s)})}constructor(e){this.params=void 0,this.query=void 0,this.ids=void 0,this.expFlags=void 0,this.player=void 0,this.requestInfo=void 0,this.params=e.params,this.query=e.query,this.ids=e.ids,this.expFlags=e.expFlags,this.player=e.player,this.requestInfo=e.params.data.request_info||{}}async prepareVHParams(){const e=this.params.data.content||{},t=Object.create(e),r=e.actual_episode;if(r)for(const i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);t.stream&&(t.withCredentials=Boolean(t.stream.withCredentials)),t.loop=Boolean(t.loop);const n=e.max_video_size;return t.meta&&(t.meta.announce_thumbnail=await i(t.meta.announce_thumbnail,n)),t.thumbnail=await i(t.thumbnail,n),t.onto_poster=await i(t.onto_poster,n),t.cover=await i(t.cover,n),t}getHiddenControls(e){if(this.query.tv)return"*";let t=[];(0,S.Kn)(null==e?void 0:e.auto_fields)&&null!=e&&e.auto_fields.player_controls_hidden&&(t=e.auto_fields.player_controls_hidden);const r=[].concat(t,this.query.hidden.split(","));return Object.keys(r.reduce((,{})).join(", ")}getLiveOffset(e){return(0,S.hj)(this.query.live_offset)?this.query.live_offset:null!=e&&e.ugc_live?15:void 0}getSkinConfigsync getPlayerConfig(){const e=await this.prepareVHParams(),t=this.getSourceConfig(e),r=this.getAutoplay(),n=this.getLiveOffset(e),i={source:t,skinParams:{skinConfig:this.getSkinConfig(e)},autoplay:r,volume:this.query.volume,muted:this.query.mute,lang:this.query.lang||this.requestInfo.lang,preload:this.getPreload(),platform:this.query.platform,togglePlaybackOnVisibilityChange:this.query.play_on_visible,useAbdBundle:this.requestInfo.use_aab_bundle,useFriendlyFrame:this.query.use_friendly_frame,flags:this.expFlags,usePlayerApiMock:this.query.test_mode,liveOffset:n,slowConnection:this.requestInfo.slow_connection||this.query.slow_connection,maxBufferLength:this.expFlags.max_buffer_length,bandwidthEstimateOffset:this.expFlags.bandwidth_estimate_offset,logUrl:this.requestInfo.use_aab_bundle?this.requestInfo.logging_url:void 0,device:{id:this.query.device_id},objectFit:this.query.object_fit,backgroundColor:this.query.background_color,zenPreload:this.query.zen_preload,cacheSourcesCount:this.query.cache_sources_count,restoreTabSessionPlaybackProgress:this.expFlags.restore_playback_progress,loadSkin:this.query.skin};return this.params.disableOTTPlayerLoader&&(i.disableOTTPlayerLoader=!0),i}getSourceConfig(e){var t;this.preparePlaybackParams(e),this.prepareAdParams(e);const r=String(this.getStreamParams(e)),n=this.getAdConfig(e),i=this.getVideoInfo(e),a=this.getTrackings(e),o=this.getOTTParams(e),s=this.getStartPosition(e),l=this.getAdditionalParams(e),c=this.getPreview(e),d=this.getPosterStyle(),u={adConfig:n,videoInfo:i,trackings:a,preview:c,startPosition:s,enableRemoteProgressSaving:this.query.remote_progress_saving||this.expFlags.progress,withCredentials:this.query.with_credentials||(null==e?void 0:e.withCredentials),loop:(null==e?void 0:e.loop)||this.query.loop,additionalParams:l,preferredTracks:{preferredAudioLangs:this.query.preferable_audio,preferredTextLangs:this.query.preferable_text},context:o,passportRetpath:this.query.retpath},h=null==(t=this.getStreamsConfig(e))?void 0:t.map((function(e){return r&&(e.url+=e.url.indexOf("?")>-1?"&":"?",e.url+=r),e}));return h&&(u.streams=h),d&&(u.posterStyle=d),this.params.data.scriptedEvents&&(u.scriptedEvents=this.params.data.scriptedEvents),(0,S.HD)(l.slots)&&(0,S.Kn)(u.context)&&(u.context.testIds=l.slots.split(";").map(e=>parseInt(e,10)).join(",")),this.query.scriptedEvents&&(u.scriptedEvents=this.query.scriptedEvents,delete this.query.scriptedEvents),u}preparePlaybackParams(e){e&&(e.start_time=parseInt(e.start_time,10)||void 0,e.finish_time=parseInt(e.finish_time,10),e.finish_time=isNaN(e.finish_time)?void 0:e.finish_time-1,e.dvr=parseInt(e.dvr,10)||void 0)}prepareAdParams(e){e&&(e.imp_id=1,(0,S.Kn)(e.adConfig)&&!e.adConfig.category&&(e.adConfig.category=1017))}getStreamParams(e){const t={audio_only:this.query.audio_only,start:null==e?void 0:e.start_time,end:null==e?void 0:e.finish_time,dvr:null==e?void 0:e.dvr,soft_max_res_height:this.expFlags.soft_max_res_height};return new P.A(t,{audio_only:{set,start:{set:v},end:{set:v},dvr:{set:v},soft_max_res_height:{set:y}})}getStreamsConfig(e){const t=Array.isArray(this.query.streams)?this.query.streams:null==e?void 0:e.streams;if(Array.isArray(t))return t.reduce((,{result:[],defId:""}).result}getAdConfig(e){if((0,S.Kn)(this.query.adConfig))return this.query.adConfig;const t=(0,S.Kn)(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},r=t||{};if(t){r.partnerId=t.partner_id||t.partnerId,r.category=t.category,r.videoContentId=t.video_content_id||t.videoContentId,r.videoContentName=t.video_content_name||t.videoContentName,r.videoGenreId=t.video_genre_id,r.videoGenreName=t.video_genre_name,r.hasPreroll=(0,S.jn)(this.query.has_preroll)?this.query.has_preroll:t.hasPreroll,r.distrId=this.query.distr_id||t.distr_id,r.useAdSession=(0,S.jn)(this.query.use_ad_session)?this.query.use_ad_session:t.useAdSession;const e=parseInt(r.partnerId,10);e&&(r.partnerId=e);const n=parseInt(r.category,10);n&&(r.category=n),t.video_publisher_id&&(r.videoPublisherId=t.video_publisher_id),t.video_publisher_name&&(r.videoPublisherName=t.video_publisher_name)}return this.query.vmap_id&&(r.vmapId=this.query.vmap_id),this.query.vmap_scenario_id&&(r.vmapScenarioId=this.query.vmap_scenario_id),(0,S.hj)(this.query.preferable_width)&&(0,S.hj)(this.query.preferable_height)&&(r.preferableAdSize={width:this.query.preferable_width,height:this.query.preferable_height}),r}getVideoInfo(e){const t=(0,S.Kn)(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},r={videoContentId:null==e?void 0:e.content_id,videoContentName:null==e?void 0:e.title,videoContentDescription:null==e?void 0:e.description,videoPublisherId:(null==t?void 0:t.video_publisher_id)||"",videoPublisherName:(null==t?void 0:t.video_publisher_name)||""};return r.videoGenreId=String((null==t?void 0:t.video_genre_id)||""),r.videoGenreName=String((null==e?void 0:e.genres)||(null==t?void 0:t.video_genre_name)||""),Object.keys(r).reduce((,{})}getTrackings(e){if("zen"===this.ids.from)return{trackingEvents:[]};let t=[];(0,S.Kn)(null==e?void 0:e.trackingEvents)&&(t=t.concat(e.trackingEvents)),(0,S.Kn)(null==e?void 0:e.stream)&&(0,S.Kn)(null==e?void 0:e.stream.trackings)&&(0,S.Kn)(null==e?void 0:e.stream.trackings.trackingEvents)&&(t=t.concat(e.stream.trackings.trackingEvents));const r=this.getYaVideoTrackings(e);return r&&(t=t.concat(r).filter(Boolean)),{trackingEvents:t}}etPreview(e){return this.query.preview_src?this.query.preview_src:this.query.preview&&!this.query.streams?null==e?void 0:e.thumbnail:""}getPosterStyle(){let e;return this.query.poster_object_fit&&(e={objectFit:String(this.query.poster_object_fit)}),e}getFeatureParams(e){const t={};return Array.isArray(null==e?void 0:e.skippableFragments)&&null!=e&&e.skippableFragments.length&&this.query.skippable_fragments&&(t.SkippableFragments={skippableFragments:e.skippableFragments,autoSkipTimeout:5,buttonTitles:e.skippableFragmentsButtonTitles||{},controlsShowDuration:5}),t}getLogoConfig(e){return null!=e&&e.logoConfig?e.logoConfig:(0,S.Kn)(null==e?void 0:e.watermark)&&(0,S.HD)(null==e?void 0:e.watermark.src)?null==e?void 0:e.watermark:void 0}getTitleSettings(){if(void 0===this.query.meta)return;if(this.query.meta===N.none)return null;const e={name:this.query.m_title,description:this.query.m_desc};switch(this.query.meta){case N.always:e.isVisible=!0;break;case N.start:e.isVisible=!0,e.duration=this.query.m_duration;break;case N.restriction_age:e.isVisible=!0,e.visibleOnPlay=!0,e.duration=this.query.m_duration;break;case N.ui:e.isVisible=!0,e.visibleWithSkinOnly=!0}return e}getOTTParams(e){const t=null==e?void 0:e.ottParams;return(0,S.Kn)(t)?(t.from=this.query.from,t.contentTypeID&&!t.contentTypeId&&(t.contentTypeId=t.contentTypeID),"cover"in(e||{})&&(t.cover=null==e?void 0:e.cover,t.thumbnailLogos=null==e?void 0:e.thumbnail_logos),t.container={context:this.query.platform||"",init:this.createOttEventTrigger.call(this,"placeholder:init"),mod:this.query.mod,paymentWidget:this.createOttEventTrigger.call(this,"placeholder:pay")},t):null}createOttEventTrigger(e){return t=>{var r;t.event===e&&(null==(r=this.player)||r.publicEmit("OTT/"+e,t))}}getStartPosition(e){return(0,S.hj)(this.query.t)?this.query.t:(0,S.hj)(null==e?void 0:e.progress)&&(0,S.hj)(null==e?void 0:e.duration)&&e.progress/e.duration>.95?0:this.expFlags.progress&&(0,S.hj)(null==e?void 0:e.progress)?null==e?void 0:e.progress:void 0}getYaVideoTrackings(e){if(!(0,S.Kn)(e))return null;const t={from:this.ids.from,from_block:this.ids.fromBlock,reqid:this.ids.reqid,yandexuid:this.ids.yandexuid,content_id:this.ids.contentId,channel_id:e.channel_id,stream_block:this.ids.streamBlock,duration:e.duration};return(0,S.Kn)(e.ottParams)&&(t.licence=e.ottParams.monetizationModel,t.svod=e.ottParams.subscriptionType),function(e){const t={};var r;return t.heartbeat=[[o("heartbeat",e),{delay:3e4}],[o("deep_watch",e),{delay:1e3*(r=e.duration,r<=180?.57*r:r<=1200?72+.17*r:r<=3600?252+.02*r:216+.03*r),callsCount:1}]],O.forEach((),t}(t)}getAdditionalParams(e){const t=(0,S.Kn)(null==e?void 0:e.additionalParams)?e.additionalParams:{};if(this.ids.frontendVhReqid&&(t.frontend_vh_reqid=this.ids.frontendVhReqid),this.ids.reqid&&(t.reqid=this.ids.reqid),(null!=e&&e.puid||this.query.puid)&&(t.puid=(null==e?void 0:e.puid)||this.query.puid),null!=e&&e.content_id&&(t.content_id=e.content_id),null!=e&&e.folder_id&&(t.folder_id=e.folder_id),this.ids.from&&(t.from=this.ids.from),this.ids.fromBlock&&(t.from_block=this.ids.fromBlock),this.ids.slots&&(t.slots=this.ids.slots),this.ids.streamBlock&&(t.stream_block=this.ids.streamBlock),null!=e&&e.channel_id&&(t.channel_id=e.channel_id),!Array.isArray(this.query["brand-safety-categories"])||(0,S.Kn)(null==e?void 0:e.adTags)&&null!=e&&e.adTags["brand-safety-categories"]||(t["brand-safety-categories"]=this.prepareCategory("brand-safety-categories")),(0,S.Kn)(null==e?void 0:e.adTags))for(const r in null==e?void 0:e.adTags)null!=e&&e.adTags.hasOwnProperty(r)&&(t[r]=this.prepareCategory(r,e.adTags[r]));return t.sandboxVersion=this.ids.sandboxVersion,t}prepareCategory(e,t){const r=this.query[e];let n=[];if(Array.isArray(t)&&Array.isArray(r))n=t.concat(r);else if(Array.isArray(t))n=t;else{if(!Array.isArray(r))return null;n=r}return"brand-safety-categories"===e?"["+n.join(",")+"]":n.join("\n")}getAutoplay(){if((0,Y.z)())return!1;const e=navigator&&navigator.connection&&navigator.connection.saveData,t=this.requestInfo.slow_connection||this.query.slow_connection;return!(this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&t&&e)&&(!(this.expFlags.disable_autoplay_slow_connection&&!this.expFlags.disable_autoplay_save_data&&t)&&(!(!this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&e)&&((0,S.jn)(this.query.allow_muted)?{allowMuted:this.query.allow_muted}:Boolean(this.query.autoplay))))}getPreload(){return!(0,Y.z)()&&this.query.preload}}class q{sync getSourceConfig(e){const{source:t}=await this.createInternalVhConfig(e).getPlayerConfig();return E({},t,{update:async()=>{var t;const{sourceConfig:r}=await(0,_.s6)(null==(t=e.content)?void 0:t.content_id,this.params);return E({},r,{startPosition:void 0})}})}async getPlayerConfig(e){return E({},await this.createInternalVhConfig(e).getPlayerConfig(),{source:await this.getSourceConfig(e)})}getIframeParams(){var e,t;return{eventPrefix:null!=(e=this.params)&&e.event_prefix?String(null==(t=this.params)?void 0:t.event_prefix):void 0}}createInternalVhConfig(e){return G.create({vhParams:e,queryParams:this.params,playerApi:this.playerApi})}}},8484:(e,t,r)=>{"use strict";function n(e){return e?S.A.parse((0,_.en)(e).search):{}}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t,r,a){const d=(0,s.K)(),{setReadyInstance:u,setSource:_}=d,S=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(d,b);let R,A,T=!1,P=!1;const I=(()=>{const a=(0,y.K)(r)?r:(0,g.H)(r)?n(r):{};return(0,E.r)(i({},(0,y.K)(t)?n(location.href):{},a),e)})(),O=async()=>{if("1"===String(I.test_mode))return async function(e){const t=["alive","avod","live","paid"].includes(e)?e:"default";return(await(0,f.W)({method:"GET",url:"https://playerweb-stands.s3.yandex.net/mediabox-test-presets/"+t+".json",responseType:"json",withCredentials:!1,retries:2})).response}(String(I.test_data));if((0,g.H)(t)){const e=t;return(await(0,p.s6)(e,I)).vhParams}return t.data};let C,w;const k=async()=>{if(w)return w;C=C||await O();const t=new o.y(I,S),r=await t.getPlayerConfig(C);return w=i({},r,{source:i({},r.source,{queryParams:I}),element:e,vhParams:C}),a&&(w.envName=a),(0,l.Vc)(w),w};let N=new m.B;const D=async e=>{const{disableOTTPlayerLoader:r}=(0,y.K)(t)?t:{disableOTTPlayerLoader:!1},n=r?{api:window.Ya.playerApi.create(e),withWrapper:!1,withTrackings:!1}:await async function(e){try{const t=await Ya.OTT.PlayerLoader.init(e);return(0,c.m)(t),t}catch(t){}return{api:window.Ya.playerApi.create(e),withWrapper:!1,withTrackings:!1}}(e);if((0,c.m)(n))return A=new h(n),u(A),void N.resolve();T=n.withWrapper,P=n.withTrackings,R=n.api,u(R),N.resolve()};k().then(.catch(()=>{N.resolve()});const L=i({},S,{setSource:async(t,r)=>{var a,s;await N.promise;const l=(0,y.K)(r)?r:(0,g.H)(r)?n(r):{},c=(0,E.r)(l,e),d=await(async()=>{if((0,g.H)(t))return{contentId:t,queryParams:c};const e=new o.y(c,S);return i({},await e.getSourceConfig(t.data),{queryParams:c})})();if(R)return _(d);const u=(null==(a=A)?void 0:a.getAllHandlers())||{};await(null==(s=A)?void 0:s.destroy()),A=void 0,N=new m.B,await D(i({},await k(),{source:d}));const h=A||R;void 0!==h&&(0,v.M)(u,(e,t)=>{e&&e.forEach(e=>{let{once:r,fn:n}=e;h[r?"once":"on"](t,n)})})}});return Object.defineProperty(L,"skin",{get:),Object.defineProperty(L,"withOttWrapper",{get:()=>T}),Object.defineProperty(L,"withOttTrackings",{get:()=>P}),L}r.d(t,{H:()=>a});var o=r(7542),s=r(4841),l=r(5543),c=r(5605),d=r(6094),u=r(9320);class h extends u.h{constructor(e){super(void 0),this.ottPlaceholder=e,this.skin=void 0}publicEmit(e,t){if(e.indexOf("/")>-1)return this.emit(e,t);const r=new Error("Event "+e+" is invalid. Namespace is required: NAMESPACE/"+e);setTimeout(()=>{throw r},0)}getState(){}estroy(){return this.ottPlaceholder.innerHTML="",Promise.resolve()}setVideoTrack(){}setAudioTrack(){}setTextTrack(){}changeAdditionalParams(){}sendReportLog(){return Promise.reject()}setSource(){return Promise.reject()}preloadSource(){return Promise.reject()}requestVideoElementFullscreen(){return Promise.reject()}exitVideoElementFullscreen(){}setPlaybackRate(){}setMuted(){}setVolume(){}setPictureInPictureAllowed(){}setVideoStyle(){}setNativeControlsVisibility(){}setNativeTextTrackVisibility(){}setNativeAdControlsVisibility(){}setDebugPanelVisibility(){}requestDebugInfo(){return Promise.reject()}requestExternalPlay(){return Promise.reject()}requestExternalPlayerList(){return Promise.reject()}play(){return Promise.reject()}pause(){}seek(){}openReportWindow(){}playInrollAd(){}skipAdPod(){}logEvent(){}nsertInto(){return Promise.reject()}var p=r(2724),f=r(7668),m=r(5636),g=r(9899),y=r(5689),v=r(7974),E=r(8875),_=r(504),S=r(1321);r(5207);const b=["setReadyInstance","setInstance","setSource"]},8875:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(e&&"adsdk-container-width"in e&&"adsdk-container-height"in e)return e;const r=t.getBoundingClientRect();return n({},e,{"adsdk-container-width":r.width,"adsdk-container-height":r.height})}r.d(t,{r:()=>i})},1321:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(719);class i{static parse(e,t,r){const a={};if(!e||!(0,n.HD)(e))return a;let o=e;"?"!==o[0]&&"#"!==o[0]||(o=o.slice(1));const s=o.split(t||"&");for(let n=0;n<s.length;n++){const e=s[n].indexOf("=");if(-1===e){r&&(a[decodeURIComponent(s[n])]=!0);continue}a[decodeURIComponent(s[n].slice(0,e))]=i.parseJSON(decodeURIComponent(s[n].slice(e+1)))}return a}onstructor(e,t,r){const a={},o={};if((0,n.Kn)(t))for(const i in t){if(!t.hasOwnProperty(i))continue;const e=t[i];(0,n.Kn)(e)?((0,n.o8)(e.value)||(this[i]=e.value),(0,n.mf)(e.set)&&(a[i]=e.set),e.unsafe&&(o[i]=!0)):(0,n.o8)(e)||(this[i]=e)}let s;if(e){const t=(0,n.Kn)(e)?e:i.parse(e);for(const e in t){if(!t.hasOwnProperty(e))continue;const r=this[e],i=a[e];a.hasOwnProperty(e)&&(0,n.mf)(i)?i.call(this,t[e],e):this[e]=t[e],this[e]!==r&&o[e]&&(s=s||{},s[e]=this[e])}}s&&(0,n.mf)(r)&&r(s,this)}toString(e,t,r){void 0===e&&(e="&"),void 0===t&&(t=!1),void 0===r&&(r=[]);const i=encodeURIComponent,a=this;let o,s=Object.keys(this).filter(().map(().join(e);return t&&(s+=e),s}appendTo},719:(e,t,r)=>{"use strict";function n(e){return"undefined"===typeof e}function i(e){return"boolean"===typeof e}function a(e){return"number"===typeof e&&e===e}function o(e){return"string"===typeof e}function s(e){return"function"===typeof e}function l(e){return Boolean(e)&&"object"===typeof e}r.d(t,{HD:()=>o,Kn:()=>l,hj:()=>a,jn:()=>i,mf:()=>s,o8:()=>n})},5745:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});const n=(0,r(1247).i)(),i=new RegExp("("+["Googlebot","YandexBot","AhrefsBot","spider","Bot","HeadlessChrome"].join("|")+")"),a=function(e){return void 0===e&&(e=n),i.test(e)}},1247:2988:8907:3628:1585:7330:8344:5940:(e,t,r)=>{"use strict";function n(e){return e)&&e)>0&&!function(e){void 0===e&&(e=window);return(0,o.N)(e)>11}(e)}d(t,{b:()=>a});var o=r(2988);const s=["","-webkit-","-ms-","-moz-","-o-"];var l=r(4754),c=r(5689);const d=s.map(e=>"("+e+"any-pointer:coarse)").join(","),u=s.map(.join(",")},8459:6094:(e,t,r)=>{"use strict";let n;r.d(t,{k:()=>n}),function(e){e.init="init",e.ready="ready",e.broken="broken",e.destroyed="destroyed"}(n||(n={}))},706:7746:4780:5543:(e,t,r)=>{"use strict";function n(e){var t;if(f.flagsInited)return;f.flagsInited=!0;const r=null==(t=(0,h.L)())?void 0:t.flags;(0,d.K)(r)&&(0,u.Y)(()=>{(0,c.M)(r,(e,t)=>{f.flags[t]=String(e)})}),(0,d.K)(e)&&(0,d.K)(e.flags)&&(0,u.Y)(}function i(){return l(),(0,u.Y)(||"{}"}t,{II:()=>i,RW:()=>s,Vc:()=>n});var c=r(7974),d=r(5689),u=r(8712),h=r(9272);const p="object"===typeof self?self:window;p.Ya||(p.Ya={}),p.Ya.featureFlags||(p.Ya.featureFlags={});const f=p.Ya.featureFlags,m={ignore_raa_cache_with_forbidden_autoplay:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_forbid_allow_muted_autoplay:"false",web_preload_while_drm_init:"false",web_safari_original_stalled_events:"false",web_stop_other_players:"false",web_userquality_ttl:"false",web_yasp_allocation_error_handling:"true",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_live_sub:"true",web_yasp_save_data_rule:"false",web_yasp_screenshot_capturing:"false",web_yasp_seekable_end_return:"false",web_yasp_source_action_on_fatal:"none",web_yasp_target_latency_updater:"false",web_yasp_time_to_start:"null",web_yasp_track_vtt:"false",web_yasp_zero_start_time:"true",yasp_enable_for_ad:"true",yasp_fast_start_after_seek:"false",yasp_max_preload_count:"0",yasp_no_source_abort_on_fake_seek:"false",yasp_use_element_size_on_preload:"true"};f.flags||(f.flags={})},4841:(e,t,r)=>{"use strict";function n(e,t,r,n){let{params:i}=e;(0,y.K)(i[0])?((0,g.M)(i[0],,n&&(i[0][t]=[])):i[0]===t&&(0,m.m)(i[1])&&(i[1](r),n&&(i[1]=d.Z))}unction a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){function t(t){if(e&&console.log("[PLAYER] [CALL]",t.name,t.params),void 0!==n)return n[t.name].apply(n,t.params);if(void 0!==o&&v.indexOf(t.name)>-1)return o[t.name].apply(o,t.params);if(!t.async)return void m.push(t);const r=a({},t,{resolve:d.Z,reject:d.Z});return m.push(r),new Promise(}et n,o,u=!1,m=[];const g={getReadyState:()=>u?c.k.broken:n?n.getReadyState():c.k.init,getState:setReadyInstancehandlePlayerDestroysetInstance(e){o=e;const[t,n]=m,e=>{let{name:t}=e;return p.n.indexOf(t)>-1});m=n,r(t,o)},emitErrorOnStart(e){if(n)throw new Error("Can't emit error on lazyApi after #setInstance()");u=!0,m,e instanceof Error?e:new Error("NOT_AN_OBJECT_ERROR: "+e))},emitEventOnStart;return Object.defineProperty(g,"skin",{get:),f.t.forEach(e=>{g[e]="pause"===e?function(r){return void 0===r&&(r=l.l.ExternalApi),g.emitEventOnStart("RequestPlayingState",{playingState:s.X.PAUSE,playingStateReason:r}),t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}}),h.o.forEach(e=>{g[e]="play"===e?function(r){return void 0===r&&(r=l.l.ExternalApi),g.emitEventOnStart("RequestPlayingState",{playingState:s.X.PLAY,playingStateReason:r}),t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}:),g}r.d(t,{K:()=>o});var s=r(7746),l=r(8557),c=r(9200),d=r(55),u=r(4145),h=r(1792),p=r(1194),f=r(7549),m=r(4754),g=r(7974),y=r(5689);const v=[...p.n,...u.V]},9026:914:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});const n=,8864:(e,t,r)=>{"use strict";function n(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}r.d(t,{E:()=>n})},3635:7974:9298:(e,t,r)=>{"use strict";.d(t,{Z:()=>n});var i=r(8870)},8870:5689:1312:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var n=r(2739);const i=(0,r(3635).C)(Array,"isArray"),a=i?,3461:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});const n=(e,t)=>{let r=[];try{r=e.cookie?e.cookie.split("; "):[]}catch(a){}const n=/(%[0-9A-Z]{2})+/g;let i;for(let o=0;o<r.length;o++){const e=r[o].split("="),s=e.slice(1).join("=");try{const r=e[0].replace(n,decodeURIComponent);if(s.replace(n,decodeURIComponent),t===r){i=decodeURIComponent(s);break}}catch(a){return}}return i}},4415:6164:8078:(e,t,r)=>{"use strict";function n(e){const t=(0,i.k)(e);if(t)return t.replace(/hidden/i,"visibilitychange")}r.d(t,{Z:()=>n});var i=r(4415)},141:(e,t,r)=>{"use strict";function n(e,t){const r=(0,s.Z)(e);return r?(0,a.O)(e,r,:i.Z}r.d(t,{Y:()=>n});var i=r(4612),a=r(8243),o=r(6164),s=r(8078)},8243:(e,t,r)=>{"use strict";function n(e,t,r,n){const o=n),s=a.FF?o:o.capture,l=o.once&&!a.vE?r,c=return(0,i.h)(e,t,l,s),c}r.d(t,{O:()=>n});var i=r(3751),a=r(895)},3751:(e,t,r)=>{"use strict";r.d(t,{f:()=>a,h:()=>i});var n=r(3635);let i=function(e,t,r){e.attachEvent("on"+t,r)},a=(0,n.C)(document,"addEventListener")&&(0,n.C)(document,"removeEventListener")&&(i=function(e,t,r,i){const a=e&&(0,n.C)(e,"addEventListener");a&&a.call(e,t,r,i)},a=},895:(e,t,r)=>{"use strict";r.d(t,{FF:()=>l,vE:()=>o,wI:()=>s});var n=r(914),i=r(4612),a=r(3751);let o=!1,s=!1,l=!1;try{if((0,n.i)()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>o=!0}),Object.defineProperty(t,"passive",{get:()=>s=!0}),Object.defineProperty(t,"capture",{get:),(0,a.h)(e,"click",i.Z,t)}}catch(c){}},1153:2739:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});const n={}.toString,i=/\[object (\w+)\]/,a=e=>{const t=n.call(e);if(!t)return null;const r=t.match(i);if(!r)return null;const a=r[1];return a||null}},6267:(e,t,r)=>{"use strict";function n(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}r.d(t,{b:()=>n})},4754:9066:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){const{method:t,url:r,async:c=!0,data:d,responseType:u="text",onBeforeSend:h=o.Z,onRetry:p=o.Z,checkStatus:f=(,headers:m={},xhrConstructor:g=XMLHttpRequest,retries:y=0,timeout:v=0,withCredentials:E,onAbort:_,onSetup:S}=e;if(!g)return;const b=e.onSuccess?(0,a.I)(e.onSuccess):o.Z,R=e.onError?(0,a.I)(e.onError):o.Z;let A,T=!1,P=0,I=const O=t=>{C.onerror=null,C.onreadystatechange=null,P&&clearTimeout(P);if(P&&4!==C.readyState||T)try{C.abort()}catch(r){}if(!T)if(y>0){const r=p(t,C);if("boolean"!==typeof r||r||I(),T)return;i(n({},e,{onSetup:retries:y-1}))}else I=o.Z,R(t,C)},C=new g;try{C.open(t,r,c)}catch(w){return void O(w)}if(C.responseType=u,C.withCredentials=Boolean(E),(0,s.M)(m,,v>0&&isFinite(v)&&(P=window.setTimeout(v)),C.onerror=O,C.onreadystatechange=("function"!==typeof S||(S({abort:e=>I(e)}),!T))&&(h(C,e),!T))try{C.send(d)}catch(w){O(w)}}r.d(t,{W:()=>i});var a=r(1153),o=r(4612),s=r(7974);const l=200},7668:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){return new Promise(}r.d(t,{W:()=>i});var a=r(9066)},4612:(e,t,r)=>{"use strict";function n(){}r.d(t,{Z:()=>n})},9899:(e,t,r)=>{"use strict";function n(e){return"string"===typeof e}r.d(t,{H:()=>n})},8712:3472:5753:(e,t,r)=>{"use strict";.d(t,{c:()=>n})},504:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)},{Sr:()=>l,en:()=>i,hA:()=>a});var c=r(1312),d=r(7974),u=r(3472);const h=/^(android-app:|chrome-extension:)/,p=f=,9200:(e,t,r)=>{"use strict";r.d(t,{k:()=>n.k});var n=r(6094)},5636:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});var n=r(55);,3126:(e,t,r)=>{"use strict";function n(e,t,r){void 0===r&&(r=window);const n=(0,i.b)(r),s=t((0,o.c)(e,n));if(void 0!==s)return console&&(0,a.m)(console.warn)&&console.warn("using "+e+"="+s+" from query"),s;const l=t(function(e,t){try{const r=e.localStorage.getItem(t);if(!r)return;return r}catch(r){return}}(r,e));return void 0!==l?(console&&(0,a.m)(console.warn)&&console.warn("using "+e+"="+l+" from localStorage"),l):void 0}r.d(t,{O:()=>n});var i=r(6267),a=r(4754),o=r(5753)},9272:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});var n=r(1153),i=r(8712);const a=(0,n.I)((function(){return(0,i.Y)(()=>{const{flags:e,testids:t,slots:r}=JSON.parse("__UAAS_CONFIG_INLINE__");return{flags:e,testids:t,slots:r}})||void 0}))},5605:(e,t,r)=>{"use strict";.d(t,{m:()=>n});var i=r(9899)},3563:(e,t,r)=>{"use strict";function n(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.filter(Boolean).join(";").split(";").forEach(t=>{if(!/^\d+,\d+,-?\d+$/.test(t))return;const r=parseInt(t,10);e[r]=e[r]||t});const i=[];for(const a in e)e.hasOwnProperty(a)&&i.push(e[a]);return 0<i.length?i.join(";"):void 0}r.d(t,{S:()=>n})},55:2724:(e,t,r)=>{"use strict";function n(e,t){var r;const n=function(e,t){if(void 0===t||!t)return e;const r=(0,o.en)(e),n=r.hostname;return r.hostname=n.split(".").slice(0,-1).concat(t).join("."),r.host=r.host.replace(n,r.hostname),(0,o.hA)(r)}("https://frontend.vh.yandex.ru/player",((0,s.H)(null==t?void 0:t.tld)?String(null==t?void 0:t.tld):void 0)||(void 0===r&&(r=!0),window.location.hostname.split(".").pop()))+"/"+e+".json";return(0,o.Sr)(n,t||{})}async function i(e,t){var r;const i=await async function(e,t){const r=n(e,t);return await(await fetch(r,{credentials:"include"})).json()}(e,t),o=new a.y(t,void 0),s=await o.getPlayerConfig(i);return{vhParams:i,playerConfig:s,sourceConfig:s.source,skinConfig:(null==(r=s.skinParams)?void 0:r.skinConfig)||{}}}r.d(t,{s6:()=>i});var a=r(7542),o=r(504),s=r(9899)},4145:1792:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});const n=["sendReportLog","preloadSource","requestVideoElementFullscreen","requestDebugInfo","requestExternalPlay","requestExternalPlayerList","insertInto","playAdViewers",...r(4145).V]},1194:7549:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});const n=["setVideoTrack","setAudioTrack","setTextTrack","changeAdditionalParams","exitVideoElementFullscreen","setPlaybackRate","setMuted","setVolume","setPictureInPictureAllowed","setVideoStyle","setNativeControlsVisibility","setNativeTextTrackVisibility","logEvent","logError","seek","openReportWindow","playInrollAd","skipAdPod","setNativeAdControlsVisibility","setDebugPanelVisibility",...r(1194).n]},9320:(e,t,r)=>{"use strict";.d(t,{h:()=>l});var i=r(4754),a=r(9298),o=r(5689),s=r(7974);class l{n(e,t){n((e,t)=>this.getHandlers(e).push({once:!1,fn:t}),e,t)}once(e,t){n((e,t)=>this.getHandlers(e).push({once:!0,fn:t}),e,t)}off(e,t){const r=this.getHandlers(e),n=r.findIndex(;-1!==n&&r.splice(n,1)}tAllHandlers(){return this.handlers}emit(e,t){const r=this.filters[e];r&&!r(t)||this.batchFn(()=>{this.getHandlers(e).slice().forEach(r=>{try{r.once&&this.off(e,r.fn),r.fn(t)}catch(n){setTimeout(()=>{throw n},0)}})})}etHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}}},3545:(e,t,r)=>{"use strict";.d(t,{p:()=>n});var i=r(6164),a=r(141);let o=(0,i.s)(document);(0,a.Y)(document,e=>{e||(o=e)})},4519:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(){return c||(!function(){try{l=encodeURIComponent(JSON.stringify(n({},o,s)))}catch(e){}}(),c=!0),l}function a(e){return void 0===e||void 0===e.additional?i():encodeURIComponent(JSON.stringify(n({},o,s,e.additional)))}r.d(t,{B6:()=>a});let o={},s={},l="",c=!1},5865:(e,t,r)=>{"use strict";nction a(e){(0,s.Y)(}function o(e,t){void 0===t&&(t={}),(0,c.p)()&&(0,s.Y)(()=>{const r=i(t,d);window.Ya.Rum.timeEnd(e,n({},r,{"-additional":(0,l.B6)(t)}))})}r.d(t,{iW:()=>a,vG:()=>o});var s=r(8712),l=r(4519),c=r(3545);const d=["additional"]},8557:5207:()=>{![function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e=window),"Ya"in e||(e.Ya={}),"OTT"in e.Ya||(e.Ya.OTT={}),"PlayerLoader"in e.Ya.OTT||(e.Ya.OTT.PlayerLoader={})}},function(e,t,r){"use strict";ar i=this&&this.__assign||a=this&&this.__rest||o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(2)),l=o(r(3)),c=(n.prototype.init=function(e){var t=(e.source||{}).context;if(!t)return this.useBasePlayer(e);var r=t.contentTypeId,n=t.licenses,i=(void 0===n?[]:n)[0];if(i&&!("active"in i))return this.usePlaceholder(e);if(20===r||21===r)return this.useWrapper(e);var a="production"===e.envName?"production":"testing",o=window.Ya.OTT.buildTrackings(e.source.context,{env:a});return e.source.trackings=s.default(o,e.source.trackings),this.useBasePlayer(e,!0)},n.prototype.usePlaceholder=function(e){var t=e.source,r=t.context,n=r.container,o=void 0===n?{}:n,s=r.licenses[0],c=a(r,["container","licenses"]),d=t.preview;e.element="string"==typeof e.element?document.getElementById(e.element):e.element;var u=this.getPlaceholderUrl();return(this.placeholderExists(o)?Promise.resolve():l.default(u,document.head)).then((function(){return window.Ya.OTT.Placeholder.main(i(i(i({container:o,thumbnail:d},c),s),{config:e}))})).then(()},n.prototype.useBasePlayer=function(e,t){void 0===t&&(t=!1);var r=e.version,n=e.useBetaStatic,i=this.getPlayerBundle(r,n);return(this.baseApiExists()?Promise.resolve():l.default(i,document.head)).then(().then(()},n.prototype.useWrapper=function(e){var t=this.getWrapperUrl();return(this.wrapperExists()?Promise.resolve():l.default(t,document.head)).then(().then(()},n.prototype.baseApiExists=n.prototype.wrapperExists=function(){return!(!window.Ya||!window.Ya.OTT||!window.Ya.OTT.Player)},n.prototype.placeholderExists=function(e){return(void 0===e?{}:e).context,!!(window.Ya&&window.Ya.OTT&&window.Ya.OTT.Placeholder)&&!!window.Ya.OTT.Placeholder.main},n.prototype.getWrapperUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-wrapper/"+n.WRAPPER_VERSION+"/ott-player-wrapper.js"},n.prototype.getPlaceholderUrl=n.prototype.getPlayerBundle=function(e,t){return("http:"===location.protocol?"http://":"https://")+(t?"betastatic.yastatic.net":"yastatic.net")+(e?"/yandex-video-player-iframe-api-bundles/"+e+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")},n.WRAPPER_VERSION="4.0.1",n.PLACEHOLDER_VERSION="1.0.1",n);t.default=c},function(e,t,r){"use strict";function n(e){return i.apply(void 0,e.map(()).trackingEvents}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0]?e[0].trackingEvents:{};Array.isArray(r)&&(r=n(r));for(var i=1;i<e.length;i++)!function(t){var i=e[t]?e[t].trackingEvents:{};Array.isArray(i)&&(i=n(i)),Object.keys(i).forEach((function(e){var t=i[e];Array.isArray(t)&&(e in r?Array.isArray(r[e])&&(r[e]=r[e].concat(t)):r[e]=t)}))}(i);return{trackingEvents:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(r,n){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.crossOrigin="anonymous",i.onload=r,i.onerror=n,t.appendChild(i)}))}},function(e,t,r){"use strict";r.r(t);var n="__VAL__",i=["yandexuid","position","serviceName","reqid","path","sid","uuid","kpId","kpTrailerId","contentTypeId","monetizationModel","subscriptionType","puid","page","domain","vars","testIds","eventId","subProfileId","buildTimestamp","pathId","deviceId","appVersion","platformOs","platformVersion","platformVendor","platformModel","platformVendorDeviceId","platformName","psid","fromBlock","fromBlockPosition","fromBlockItemPosition","fromBlockAction","fromBlockMLSessionId","fromBlockStartPage","fromBlockEndPage","fromBlockExternalLink","isLive"],a=["setSource","init","error","adStart","adEnd","heartbeat","watchedTime","viewed"],o={film:{default:a,kp:a},trailer:{default:a},channel:{default:a},episode:{default:a},"vod-broadcast-episode":{default:a},"music-clip":{default:a},"short-video":{default:a},"ott-trailer":{default:a}},s={1:"channel-family",2:"channel",3:"episode",4:"vod-library",5:"vod-episode",6:"tv-series",7:"tv-season",8:"black-window",9:"out-of-tv-channel",10:"type-folder",11:"zen-namespace",12:"zen-library",13:"zen-episode",14:"yandex-disribution-library",15:"yandex-disribution-episode",16:"emergency-black-window",17:"cv-black-window",18:"yandex-market-library",19:"yandex-market-episode",20:"ott-movie",21:"ott-episode",22:"kd-feed-episode",24:"sport-episode",25:"announce",30:"ntv-vod-library",31:"ntv-vod-movie",32:"ntv-vod-series",33:"ntv-vod-series-season",34:"ntv-vod-series-season-episode",35:"ott-multipart",36:"ott-part",37:"ott-trailer",38:"ott-collection",39:"ott-collection-item",40:"high-light",41:"user-episode",42:"vod-news",43:"vod-broadcast",44:"vod-news-episode",45:"vod-broadcast-episode",46:"snapshot-tv-episode",47:"kp-trailer",48:"ya-news",49:"self-service-bw-window",50:"main-black-window",51:"music-clip",82:"ott_linked_video",83:"ott_music_karaoke",84:"ott_linked_video_parent",85:"ott_music_karaoke_parent",86:"ott-vod-library",87:"ott_linked_trailer",88:"ott_linked_music_clip",122:"ott-video-episode"},l="content_duration_",c=[["1","content_start"],["10000",l+"10"],["20000",l+"20"],["30000",l+"30"],["40000",l+"40"],["50000",l+"50"],["60000",l+"60"],["120000",l+"120"]],d="VIDEO_",u=[["25",d+"25"],["50",d+"50"],["75",d+"75"],["90",d+"90"],["99",d+"END"]];t.default=function(e,t){var r;"contentTypeID"in(r=e)&&(r.contentTypeId=r.contentTypeID),e=function(e){for(var t=0;t<i.length;t++){var r=i[t];void 0===e[r]&&(e[r]="domain"===r?document.location.hostname:"buildTimestamp"===r?Date.now():"-")}return e}(e=r);var a,l,d,h,p,f,m=(l={testing:{counterId:45961911,kpCounterId:48924764,vpCounterId:45151398,spCounterId:51357310},production:{counterId:45913512,kpCounterId:48924740,vpCounterId:31713861,spCounterId:51357310}})[a=t.env]?l[a]:l.testing,g=(h={testing:{ottTrackingsBackend:"https://tracking-testing.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"},production:{ottTrackingsBackend:"https://tracking.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"}})[d=t.env]?h[d]:h.testing,y={},v=e.serviceName,E=(p=e.contentTypeId)in(f={47:"trailer",20:"film",21:"film",51:"music-clip",87:"channel",88:"channel",122:"short-video",37:"ott-trailer",3:"episode",45:"vod-broadcast-episode"})?f[String(p)]:"film";return(v in o[E]?o[E][v]:o[E].default).forEach((function(e){y[e]=function(e,t,r){var n,i,a,o,s,l,d=[];"trailer"===t?(n="{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&page-url=goal://{{domain}}/","init"===e?d.push('{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&site-info={"kp_trailers":{"host":{"{{serviceName}}":{"{{kpId}}":{"{{uuid}}":"{{kpTrailerId}}"}}}}}&page-url=goal://{{domain}}/TRAILER_START'):"adStart"===e?d.push(n+"TRAILER_AD_START"):"adEnd"===e?d.push(n+"TRAILER_AD_END"):"viewed"===e&&d.push([n+"TRAILER_50",{percent:50}],[n+"TRAILER_90",{percent:90}])):(i='{{metrikaBackend}}<<COUNTER_NAME>>?page-ref=yandex.ru&site-info={"{{serviceName}}":{"{{fromBlock}}":{"<<EVENT_NAME>>":{"{{uuid}}":{"{{position}}":"{{monetizationModel}}"}}}}}',"setSource"!==e&&"init"!==e||(s=(o=i.replace("<<EVENT_NAME>>","video_start")).replace("<<COUNTER_NAME>>","{{counterId}}"),d.push(s+"&page-url=goal://{{domain}}/VIDEO_START"),"init"===e&&"kp"===r&&(a=o.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),d.push(a+"&page-url=goal://{{domain}}/VIDEO_START"))),"adStart"!==e&&"adEnd"!==e||(s=(o=i.replace("<<EVENT_NAME>>",h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END")).replace("<<COUNTER_NAME>>","{{counterId}}"),d.push(s),"kp"===r&&(l=o.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),d.push(l))),"watchedTime"===e&&c.forEach((function(e){var t={offset:Number(e[0])},n=i.replace("<<EVENT_NAME>>",e[1]),a=n.replace("<<COUNTER_NAME>>","{{counterId}}");d.push([a,t]),"kp"===r&&d.push([n.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t]),"ya-sport"===r&&"120000"===e[0]&&d.push([n.replace("<<COUNTER_NAME>>","{{spCounterId}}")+"&page-url=goal://"+r+"/VIDEO_STREAM_2MIN",t])})),"viewed"===e&&u.forEach((function(e){var t={percent:Number(e[0])},n=(i+"&page-url=goal://{{domain}}/<<EVENT_NAME>>").replace(/<<EVENT_NAME>>/g,e[1]),a=n.replace("<<COUNTER_NAME>>","{{counterId}}");d.push([a,t]),"kp"===r&&d.push([n.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t])})));var h,p='{{ottTrackingsBackend}}watch?data={"position":"{{position}}","fromBlock":"{{fromBlock}}","serviceName":"{{serviceName}}","uuid":"{{uuid}}","puid":"{{puid}}","sid":"{{sid}}","vSid":"{{vsid}}","yaUID":"{{yandexuid}}","monetizationModel":"{{monetizationModel}}","contentTypeName":"{{contentTypeName}}","device-type":"{{device-type}}","device-type-tns":"{{device-type-tns}}","subscriptionType":"{{subscriptionType}}","page":"{{page}}","testIds":"{{testIds}}","eventId":"{{eventId}}","subProfileId":"{{subProfileId}}","deviceId":"{{deviceId}}","appVersion":"{{appVersion}}","platformOs":"{{platformOs}}","platformVersion":"{{platformVersion}}","platformVendor":"{{platformVendor}}","platformModel":"{{platformModel}}","platformVendorDeviceId":"{{platformVendorDeviceId}}","platformName":"{{platformName}}","psid":"{{psid}}","buildTimestamp":"{{buildTimestamp}}","pathId":"{{pathId}}","fromBlockPosition":"{{fromBlockPosition}}","fromBlockItemPosition":"{{fromBlockItemPosition}}","fromBlockAction":"{{fromBlockAction}}","fromBlockMLSessionId":"{{fromBlockMLSessionId}}","fromBlockStartPage":"{{fromBlockStartPage}}","fromBlockEndPage":"{{fromBlockEndPage}}","fromBlockExternalLink":"{{fromBlockExternalLink}}","isLive":"{{isLive}}"';if("setSource"!==e&&"init"!==e||d.push(p+',"eventType":"video_start","eventCount":"-","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}'),"error"===e&&d.push(p+',"errorCode":"{{error-code}}","eventType":"player_error","eventCount":"-"}'),"adStart"!==e&&"adEnd"!==e||(h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END",d.push(p+',"eventType":"'+h+'","eventCount":"-"}')),"heartbeat"===e){var f=void 0;switch(t){case"channel":case"short-video":case"ott-trailer":case"trailer":f=1e4;break;case"music-clip":f=3e4;break;default:f=6e4}d.push([p+',"timestamp":"{{timestamp}}","vts":"{{vts}}","fts":"{{fts}}","fullscreen":"{{fullscreen}}","eventType":"heartbeat","eventCount":"'+f+'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}","mute":"{{muted}}"}',{delay:f,offset:f}])}return"watchedTime"===e&&c.forEach((function(e){var t={offset:Number(e[0])};d.push([p+',"eventType":"'+e[1]+'","eventCount":"'+e[0]+'","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}',t])})),"viewed"===e&&u.forEach((function(e){var t={percent:Number(e[0])};d.push([p+',"eventType":"'+e[1]+'","eventCount":"'+("99"==e[0]?"100":e[0])+'"}',t])})),d}(e,E,v)})),e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],n=1;n<e.length;n++){var i=e[n];if("object"==typeof i)for(var a in i)r[a]=i[a]}return r}(e,m,g,{contentTypeName:s[e.contentTypeId]||"unknown"}),{trackingEvents:JSON.parse(function(e,t,r){void 0===t&&(t={});var i={}.macros,a=void 0===i?"{{"+n+"}}":i,o={};Object.keys(t).forEach((function(e){var r=a.replace(n,e);o[r]=t[e]}));var s=new RegExp("("+Object.keys(o).join("|")+")","ig");return("string"==typeof e?e:JSON.stringify(e)).replace(s,(function(e){return e in o?encodeURI(o[e]):e}))}(y,e))}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(4)),a=n(r(0)),o=n(r(1));a.default(),window.Ya.OTT.buildTrackings=i.default,window.Ya.OTT.PlayerLoader={init:}])},5638:3424:8062:2239:6377:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var n=r(8062);const i=,1390:3022:(e,t,r)=>{"use strict";.d(t,{H:()=>n});var i=r(8833)},8833:8976:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var n=r(1390),i=r(3357);const a=,5521:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});const n=(0,r(8976).Y)(window)},3357:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});const n=e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1}},6996:(e,t,r)=>{"use strict";function n(e){if(void 0!==e){if(!(0,i.H)(e))throw new Error("testIdsString is not a string or undefined ["+e+"]");if(0!==e.length){for(const t of e.split(";")){const r=t.split(",");if(3!==r.length)throw new Error("testIdParts length error ["+e+"]");const[n,,i]=r;if(0===n.trim().length)throw new Error("testId length error ["+e+"]");if(0===i.trim().length)throw new Error("testId bucket length error ["+e+"]")}return e}}}r.d(t,{m:()=>n});var i=r(8833)},4575:6609:(e,t,r)=>{"use strict";function n(e){let t,r,n=!1,a=!1,o=!1;return(0,s.Y)(()=>{t=function(e){const t=i(e,"adsdkecmaver");if("ES2017"===t||"ES5"===t)return t;return}(e)}),(0,s.Y)(()=>{o=Boolean(i(e,"adsdkdebug"))}),(0,s.Y)(,(0,s.Y)(()=>{n=Boolean(i(e,"vasnetworklogs"))}),(0,s.Y)(()=>{a=l(e,"vasfulldebug")}),o&&(console.warn("adsdkdebug is deprecated, use vasfulldebug instead"),a=!0),a&&(n=!0),{adsdkecmaver:t,vasfulldebug:a,vasnetworklogs:n,adsdkver:r,adsdkdebug:o}}function i(e,t){var r,n,i;return null!==(i=null!==(n=null!==(r=o.J.getItem(e,t))&&void 0!==r?r:function(e,t){const r=function(e){var t,r;const n=[e.document];let i=e.document;for(;i;)i=null===(r=null===(t=i.defaultView)||void 0===t?void 0:t.frameElement)||void 0===r?void 0:r.ownerDocument,i&&n.push(i);return n}(e);for(let n=0;n<r.length;n++){const e=new URLSearchParams(r[n].location.search).get(t);if(null!==e)return e}return}(e,t))&&void 0!==n?n:(0,a.$)(e,t))&&void 0!==i?i:void 0}r.d(t,{b:()=>n});var a=r(8087),o=r(2810),s=r(3253);const l=(e,t)=>{const r=i(e,t);return"false"!==r&&Boolean(r)}},2587:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(3022),i=r(4089),a=r(3652);const o=e=>{var t;const{error:r,config:o}=(0,a.vn)(e);if(!r){const e=o.flags,r=null!==(t=e[i.x])&&void 0!==t?t:e[i.f],a=(0,n.H)(r)?r:void 0;if((0,n.H)(a))return{version:a,parsedUaasConfig:o,parseUaasConfigError:void 0}}return{version:void 0,parsedUaasConfig:void 0,parseUaasConfigError:r}}},8087:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=r(3424);const i=(e,t)=>{var r,i;for(const a of(0,n.T)(e)){const e=null===(i=null===(r=a.Ya)||void 0===r?void 0:r.hardcodedParams)||void 0===i?void 0:i[t];if(e)return String(e)}}},4089:5799:6891:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{Q5:()=>i});const i=n(n({},{InPage:"inpage",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player",Rum:"rum"}),{MotionTailor:"motion_ad_creative",Survey:"survey"})},1346:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});const n="https://"+r(6877).N9+"/vas-bundles/"},6877:(e,t,r)=>{"use strict";r.d(t,{N9:()=>n});["a","n.ya","nd","ex.ru"].join(""),["y","a","nde","x.ru"].join("");const n=["ya","sta","tic.net"].join("");["ver","ify.y","a","nde","x.ru"].join("")},8767:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});const n=r(5521).k?"ES2017":"ES5"},7875:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var n=r(6891);const i=,3756:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var n=r(5799),i=r(8427),a=r(3475),o=r(7875),s=r(1536);const l=e=>{let{bundleName:t,win:r,ecmaVersion:l,version:c}=e;const d=n.E[l],u=(0,i.x)(r),h=(0,o.S)(t),p=""+(0,s.a)(c)+d+"/"+h;return(0,a.m)(u)?u(p):p}},1536:(e,t,r)=>{"use strict";function n(e){return i.m1||(0,a.H)(e)}r.d(t,{a:()=>n});var i=r(120),a=r(7004)},7004:(e,t,r)=>{"use strict";function n(e){return""+i.e+e+"/"}r.d(t,{H:()=>n});var i=r(1346)},2810:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});const n={getItem:setItem:removeItem:(e,t)=>{try{e.localStorage.removeItem(t)}catch(r){return}}}},120:(e,t,r)=>{"use strict";r.d(t,{m1:()=>n});const n="undefined"===typeof BUNDLES_PATH?"":BUNDLES_PATH;"undefined"===typeof BUNDLE_NAME||BUNDLE_NAME,"undefined"===typeof BUILD_TIME||BUILD_TIME},7572:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});const n="__ADB_CONFIG__"},2709:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var n=r(3475),i=r(4215),a=r(7572);const o=(0,i.K)(a.M)&&a.M.fn&&(0,n.m)(a.M.fn.encodeUrl)?a.M.fn.encodeUrl:void 0,s=void 0===o?void 0:e=>o(e)},8427:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});var n=r(3424),i=r(3475),a=r(8199),o=r(2709);const s=e=>{if(o.M)return o.M;const t=(0,n.T)(e);for(;t.length;){const e=t.pop();if(!e)continue;const r=(0,a.U)(e,"ya.videoAd.encodeUrl");if((0,i.m)(r))return r}}},5552:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});const n=(e,t,r)=>{for(let n=0;n<e.length;n++)t.call(r,e[n],n,e)}},2572:9772:(e,t,r)=>{"use strict";function n(e){if(!Boolean(null===e||void 0===e?void 0:e.toString))return!1;try{const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}catch(t){return!1}}r.d(t,{E:()=>n})},4385:(e,t,r)=>{"use strict";function n(e,t){let r=e[t];if(!(0,i.E)(r)){const i=r;try{delete e[t];const n=e[t];"function"===typeof n&&(r=n),e[t]=i}catch(n){}}return r}r.d(t,{C:()=>n});var i=r(9772)},3475:(e,t,r)=>{"use strict";function n(e){return"function"===typeof e}r.d(t,{m:()=>n})},33:(e,t,r)=>{"use strict";function n(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}r.d(t,{I:()=>n})},3253:(e,t,r)=>{"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:()=>n})},5295:(e,t,r)=>{"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const r in e)(0,i.n)(e,r)&&t.push(r);return t}r.d(t,{Z:()=>n});var i=r(5694)},5694:(e,t,r)=>{"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:()=>n})},4215:(e,t,r)=>{"use strict";function n(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:()=>n})},8199:3652:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{vn:()=>p});var i=r(6377),a=r(6996),o=r(5552),s=r(2572),l=r(33),c=r(5295),d=r(4215),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const h={testIds:"",flags:{}};(0,l.I)(;const p=e=>{if((0,i.V)(e))return{error:e,config:h};try{const t=(0,d.K)(e)?e:JSON.parse(""+(e||"")),r=(e=>!!(0,d.K)(e)&&!(!("expFlags"in e)||!(0,s.k)(e.expFlags)))(t)?(e=>{const{expFlags:t}=e,r=u(e,["expFlags"]),i={},a={};return(0,o.E)(e.expFlags,e=>{(0,o.E)(e,e=>{let{CONTEXT:{FLAGS:t},TESTID:r}=e;(0,d.K)(t)&&(0,o.E)((0,c.Z)(t),e=>{var n;const o=t[e];i[e]=o,a[e]=null!==(n=a[e])&&void 0!==n?n:[],a[e].push({value:o,testId:r[0]})})})}),n({flags:i,flagsMap:a},r)})(t):t;if(!((e,t)=>{if(!(0,d.K)(t))throw new Error("Parsed replaced macro is not an object: "+e);if((0,a.m)(t.testIds),!("flags"in t)||!(0,d.K)(t.flags))throw new Error("Parsed replaced macro has no flags field: "+e);return!0})(String(e),r))throw new Error("UAAS config is not valid: "+e);return{error:void 0,config:r}}catch(t){return{error:t,config:h}}}},2868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HAS_URL=void 0,t.HAS_URL=(()},7343:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=this&&this.__rest||Object.defineProperty(t,"__esModule",{value:!0}),t.CSPLogger=void 0;const a=r(2868),o=r(1025);t.CSPLogger=class{constructor(e,t){void 0===t&&(t={});var{url:r="https://csp.yandex.net/csp"}=e,a=i(e,["url"]);this.additional=t,this.cspEventListener=e=>{try{const t=new URL(e.blockedURI);if(this.url===t.origin+t.pathname&&"1"===t.searchParams.get("js_client"))return this.unsubscribe(),void(console.warn&&console.warn("URL for logging CSP was blocked"))}catch(a){}const t={"csp-report":{"blocked-uri":e.blockedURI,"column-number":e.columnNumber,disposition:e.disposition,"document-uri":e.documentURI,"effective-directive":e.effectiveDirective,"line-number":e.lineNumber,"original-policy":e.originalPolicy,referrer:e.referrer,"script-sample":e.sample,"status-code":e.statusCode,"violated-directive":e.violatedDirective}},r=JSON.stringify(t),i=this.addParamsToUrl(this.url,n(n(n({},this.config),this.additional),{js_client:"1"}));o.sendLog(i,r)},this.url=r,this.config=a}025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendLog=void 0,t.sendLog=,3106:7881:(e,t,r)=>{"use strict";var n=r(3850);r.o(n,"toBps")&&r.d(t,{toBps:function(){return n.toBps}}),r.o(n,"toSeconds")&&r.d(t,{toSeconds:function(){return n.toSeconds}});var i=r(4423);r.o(i,"toBps")&&r.d(t,{toBps:function(){return i.toBps}}),r.o(i,"toSeconds")&&r.d(t,{toSeconds:function(){return i.toSeconds}});r(2968)},2968:6285:(e,t,r)=>{"use strict";unction i(e){return Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toUnsignedInt=t.toUnsignedFloat=t.toInt=t.toUnsigned=t.toFloat=void 0;const a=r(3106);t.toFloat=a.identity,t.toUnsigned=n,t.toInt=i,t.toUnsignedFloat=t.toUnsignedInt=,3849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTimestamp=t.toMilliseconds=t.toMbps=t.toMegaBitsPerSeconds=t.toKbps=t.toKiloBitsPerSeconds=t.toBps=t.toBitsPerSeconds=t.toMegabits=t.toKilobits=void 0;const n=r(3106),i=r(2008);t.toKilobits=n.identity,t.toMegabits=n.identity,t.toBitsPerSeconds=n.identity,t.toBps=t.toBitsPerSeconds,t.toKiloBitsPerSeconds=n.identity,t.toKbps=t.toKiloBitsPerSeconds,t.toMegaBitsPerSeconds=n.identity,t.toMbps=t.toMegaBitsPerSeconds,t.toMilliseconds=n.identity,t.toTimestamp=i.toMoment},2008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPixels=t.toPerSeconds=t.toPercent=t.toPortion=t.toDays=t.toHours=t.toMinutes=t.toSeconds=t.toDuration=t.toMoment=t.toBytes=t.toBits=void 0;const n=r(3106);t.toBits=n.identity,t.toBytes=n.identity,t.toMoment=n.identity,t.toDuration=n.identity,t.toSeconds=n.identity,t.toMinutes=n.identity,t.toHours=n.identity,t.toDays=n.identity,t.toPortion=n.identity,t.toPercent=n.identity,t.toPerSeconds=n.identity,t.toPixels=n.identity},4423:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6285),t),i(r(2008),t),i(r(3849),t)},963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4957:3850:1299:870:6386:6048:502:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}bject.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=var o,s=r(1299),l=(o=s)&&o.__esModule?o:{default:o},c="lS_",d=);t.default=d},4585:2741:1402:8139:9591:7526:(e,t,r)=>{(t=e.exports=r(870)(!1)).push([e.id,"._1N2NLVV{display:grid;grid-template-areas:'label-vsid vsid vsid vsid vsid' 'label-time time time time time' 'label-info info info info info' 'label-abcID abcID label-drm drm .' 'label-source source source source img' 'label-timeline timeline timeline timeline img' 'label-state state state state img' 'label-viewport viewport viewport viewport img' 'label-video video video video img' 'label-audio audio audio audio img' 'label-error error error error error' 'label-buffer buffer buffer buffer buffer' 'label-bandwidth bandwidth bandwidth bandwidth bandwidth' 'label-frames frames frames frames frames' 'label-memory memory memory memory memory';gap:5px}._2B54Gch{display:flex;gap:5px;align-items:center}._6Xfd9x2{justify-self:center;grid-area:img;width:85px;height:85px;filter:invert(1)}.e8JMhZX{display:flex;flex-direction:column;justify-content:center;align-items:flex-end;padding-right:5px;text-align:right;line-break:auto}@media (min-width:361px) and (max-width:520px){.e8JMhZX{display:none}._2B54Gch{flex-direction:column-reverse;align-items:center;margin-top:10px;gap:2px}._1N2NLVV{grid-template-areas:'. vsid vsid vsid vsid vsid' 'time time time time time time' 'info info info info info info' 'source source source source source source' 'timeline timeline timeline timeline timeline timeline' 'abcID . drm . . img' 'state state viewport viewport . img' 'video video video video video img' 'audio audio audio audio audio img' 'error error error error error error' 'buffer buffer buffer buffer buffer buffer' 'bandwidth bandwidth bandwidth bandwidth bandwidth bandwidth' 'frames frames frames frames frames frames' 'memory memory memory memory memory memory'}._6Xfd9x2{justify-self:right}}@media (max-width:360px){._6Xfd9x2,.e8JMhZX,#_2gz9XaD,#cq-iK_B,#_3VzYxCC,canvas{display:none}._2B54Gch{align-items:center}._1N2NLVV{gap:2px;grid-template-areas:'. vsid vsid vsid vsid' 'source source source source source' 'timeline timeline timeline timeline timeline' 'state state drm drm drm' 'viewport viewport viewport viewport viewport' 'video video video video video' 'audio audio audio audio audio' 'error error error error error' 'buffer buffer bandwidth bandwidth bandwidth' 'frames frames frames memory memory'}}",""]),t.locals={"debug-panel-container":"_1N2NLVV",debugPanelContainer:"_1N2NLVV","debug-panel-graph-wrapper":"_2B54Gch",debugPanelGraphWrapper:"_2B54Gch","debug-panel-qrcode":"_6Xfd9x2",debugPanelQrcode:"_6Xfd9x2","debug-panel-row-name":"e8JMhZX",debugPanelRowName:"e8JMhZX",info:"_2gz9XaD",time:"cq-iK_B",abcID:"_3VzYxCC",abcId:"_3VzYxCC"}}},n={};e.m=r,e.n=e.d=e.f={},e.e=e.u=e.o=t={},e.l=e.r=e.p="https://yastatic.net/yandex-video-player-iframe-api-bundles",((),(()=>{"use strict";function t(e){return"function"===typeof e||"Function"===(e=>{const t=Ar.call(e);if(!t)return null;const r=t.match(Tr);if(!r)return null;const n=r[1];if(!n)return null;return n})(e)}unction n(e){if(void 0===e)return Kr.DEFAULT;const t=function(e){switch(e){case Wr.DEFAULT_ERROR:return Kr.DEFAULT;case Wr.BROADCAST_AD_BLOCK_INIT_ERROR:case Wr.AD_TYPE_IS_NOT_RECOGNIZED:case Wr.AD_IS_ALREADY_PLAYING:case Wr.MULTIROLL_INIT_ERROR:case Wr.PLAY_AD_VIEWERS_ERROR:return Kr.ADS;case Wr.INVALID_METADATA:case Wr.NO_STREAMS:case Wr.INVALID_STREAM_URL:case Wr.NO_DRM_CONFIG:return Kr.CONFIG;case Wr.YANDEX_RPC_ERROR:case Wr.ON_TICK_ERROR:case Wr.SAGA_ERROR:case Wr.REFRESH_SUBTITLES_ERROR:case Wr.NO_HLS_JS_INSTANCE:case Wr.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case Wr.RECOVER_TASK_ERROR:case Wr.PRELOAD_SOURCE_FAILED:case Wr.MEDIA_ERR_ABORTED:return Kr.EXCEPTION;case Wr.UNSUPPORTED_MEDIA_TYPE:case Wr.NATIVE_HLS_NOT_SUPPORTED_ERROR:case Wr.HLS_JS_NOT_SUPPORTED_ERROR:case Wr.MEDIA_ERR_SRC_NOT_SUPPORTED:case Wr.MEDIA_ERR_CUSTOM:case Wr.MEDIA_ERR_DECODE:case Wr.REPRESENTATION_CHANGE:return Kr.MEDIA;case Wr.SCRIPT_INIT_ERROR:case Wr.META_INFO_REQUEST_FAILED:case Wr.STRM_ABD_INVALID_RESPONSE:case Wr.MANIFEST_NOT_FOUND:return Kr.NETWORK_PLAYER;case Wr.MEDIA_ERR_NETWORK:return Kr.NETWORK_MEDIA;case Wr.MPD_WIDEVINE_CERT_LOAD_ERROR:case Wr.FAIRPLAY_CERT_LOAD_ERROR:case Wr.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case Wr.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case Wr.FAIRPLAY_SPC_LOAD_ERROR:case Wr.FAIRPLAY_CREATE_KEY_ERROR:case Wr.FAIRPLAY_INVALID_CONTENT_ID:case Wr.DRM_PROXY_ERROR:case Wr.DRM_PROXY_ERROR_NEED_COOKIE:case Wr.DRM_PROXY_ERROR_NEED_TEAM_LOGIN:case Wr.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION:case Wr.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case Wr.MEDIA_ERR_ENCRYPTED:case Wr.FAIRPLAY_NOT_SUPPORTED:case Wr.NO_DRM:case Wr.DRM_INIT_ERROR:case Wr.DRM_NO_INIT_DATA:case Wr.DRM_CERT_LOAD_ERROR:case Wr.DRM_NO_SUPPORTED_KEY_SYSTEM:case Wr.DRM_FAILED_TO_CREATE_CDM:case Wr.DRM_FAILED_TO_SET_MEDIA_KEYS:case Wr.DRM_NO_LICENSE_SERVER:case Wr.DRM_FAILED_TO_CREATE_SESSION:case Wr.DRM_SESSION_ERROR:case Wr.DRM_FAILED_TO_GENERATE_REQUEST:case Wr.DRM_UNKNOWN_ERROR:return Kr.DRM;case Wr.REGIONAL_LIMITATION_MANIFEST:case Wr.REGIONAL_LIMITATION_LEVEL:case Wr.REGIONAL_LIMITATION_SEGMENT:return Kr.REGIONAL;case Wr.SIGNATURE_EXPIRED_MANIFEST:case Wr.SIGNATURE_EXPIRED_LEVEL:case Wr.SIGNATURE_EXPIRED_SEGMENT:return Kr.ACCESS;case Wr.BANNED_MANIFEST:case Wr.BANNED_LEVEL:case Wr.BANNED_SEGMENT:return Kr.BANNED;case Wr.NO_CODECS:return Kr.NO_CODECS;case Wr.NO_PLAYABLE_STREAMS:return Kr.CANNOT_PLAY;case Wr.NO_MSE:return Kr.UNSUPPORTED_ENV}return Kr.DEFAULT}(e);if(t!==Kr.DEFAULT)return t;switch(e){case Lr.BUFFER_FULL_ERROR:case Lr.BUFFER_NUDGE_ON_STALL:case Lr.BUFFER_STALLED_ERROR:case Lr.FRAG_PARSING_ERROR:case Lr.BUFFER_SEEK_OVER_HOLE:case Lr.BUFFER_APPENDING_ERROR:case Lr.PIPELINE_ERROR_DECODE:case Lr.DECODER_ERROR_NOT_SUPPORTED:case Lr.BUFFER_APPEND_ERROR:case Lr.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case Lr.REMUX_ALLOC_ERROR:case Lr.BUFFER_ADD_CODEC_ERROR:case Lr.DEMUXER_ERROR_COULD_NOT_OPEN:case Lr.NS_ERROR_DOM_INVALID_STATE_ERR:case Lr.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case Lr.FAILED_TO_INIT_DECODER:case Lr.PIPELINE_ERROR_INITIALIZATION_FAILED:case Lr.NS_ERROR_FAILURE:case Lr.REQUEST_FAILED:case Lr.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case Lr.PIPELINE_ERROR_COULD_NOT_RENDER:case Lr.NS_ERROR_DOM_MEDIA_METADATA_ERR:case Lr.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case Lr.NS_ERROR_DOM_MEDIA_FATAL_ERR:case Lr.MANIFEST_PARSING_ERROR:return Kr.MEDIA;case Lr.FRAG_LOAD_ERROR:case Lr.MANIFEST_LOAD_ERROR:case Lr.LEVEL_LOAD_ERROR:case Lr.AUDIO_TRACK_LOAD_ERROR:return Kr.NETWORK_MEDIA;case Lr.FRAG_LOAD_TIME_OUT:case Lr.MANIFEST_LOAD_TIME_OUT:case Lr.LEVEL_LOAD_TIME_OUT:case Lr.AUDIO_TRACK_LOAD_TIME_OUT:return Kr.NETWORK_TIMEOUT;case Lr.INTERNAL_EXCEPTION:case Lr.ON_PLAYER_INIT_ERROR_INTERNAL:case Lr.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case Lr.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case Lr.LOAD_SKIN_ERROR:case Lr.INSERT_INTO_WITH_SECURE_FRAME:case Lr.PLAY_AD_VIEWERS_WITH_SECURE_FRAME:case Lr.ERROR_SCREEN_LOAD_ERROR:return Kr.EXCEPTION;case Lr.UNABLE_TO_LOAD_PLAYER_IFRAME:case Lr.ON_PLAYER_INIT_ERROR:case Lr.LOADER_INIT_ERROR:case Lr.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case Lr.FAILED_TO_DOWNLOAD_DEBUG_INFO:case Lr.REQUEST_SOURCE_ERROR:return Kr.NETWORK_PLAYER;case Lr.PLAYER_CONTAINER_NOT_FOUND:case Lr.KEY_LOAD_ERROR:case Lr.FEATURE_HANDLER_ERROR:case Lr.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case Lr.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case Lr.INVALID_CONFIG_IN_CREATE_PLAYER:case Lr.INVALID_CONFIG_IN_SET_SOURCE:case Lr.INVALID_CONFIG_IN_SOURCE_UPDATE:case Lr.IFRAME_DOES_NOT_ALLOW_DRM:case Lr.DRM_IS_NOT_ALLOWED:case Lr.ELEMENT_NOT_IN_DOM:case Lr.INVALID_LOG_URL:return Kr.CONFIG}return Kr.DEFAULT}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction o(e){let t,n=rn.Z,i=rn.Z,o=rn.Z,s=rn.Z;e.once("Ready",e=>{t=e});const l=e.on("StreamChange",()=>{let c;l();let d=!1,u=!1,h=rn.Z,p=rn.Z;const f=()=>{if(l(),d||!c||!c.engine)return;const{hasPreroll:e=!1,engine:r}=c,n=h(),i=p();a(n)&&(0,Gr.Y)(()=>t.logDelta(e?an[r]:nn[r],n)),a(i)&&(0,Gr.Y)(()=>t.logDelta(e?sn[r]:on[r],i))};n=e=>{let{playingState:t}=e;if(t===en.X.PAUSE)return;h=r(),d=!(0,zr.s)(document,!0);const n=(0,Jr.Y)(document,e=>{e||(d=!0,n())});void 0!==c?f():u=!0},i=e=>{let{playingState:t}=e;t===en.X.BUFFERING?p=r():t===en.X.PAUSE?p=()=>0:t===en.X.PLAY&&l()},o=t=>{e.off("AdPodStart",s),t&&t.engine&&(c=t,u&&f())},s=()=>{c={engine:"AD",hasPreroll:!0},e.off("ContentImpression",o),u&&f()},e.once("RequestPlayingState",n),e.on("PlayingStateChange",i),e.once("ContentImpression",o),e.once("AdPodStart",s)})}nction c(e){if("string"===typeof e&&(e={message:e}),"object"===typeof e&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(i){}const{name:t,message:r,stack:n}=e;return{__stringifyError:{name:t,message:r,stack:n}}}function d(e,t,r,n){const i=h(e[t],l(r,t),n);return void 0===i?"null":i}unction h(e,t,r){switch(typeof e){case"boolean":return e?"true":"false";case"string":return u(e);case"undefined":return;case"bigint":return u(e.toString());case"function":return u("[Function"+("string"===typeof e.name&&e.name.length>0?" "+e.name:"")+"]");case"symbol":return u("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if(n=e,"[object Window]"===Object.prototype.toString.call(n))return u("[object Window]");if((0,fn.m)(e))return u("[DOMNode "+e.tagName+"]");if(function(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}(e)){const{name:t}=e.constructor;return u("["+(t||"TypedArray")+"("+(e.byteLength||0)+")]")}const i=r.get(e);if(void 0!==i)return u("[Circular "+i+"]");r.set(e,t);return mn(e)?function(e,t,r){if(0===e.length)return"[]";let n="["+d(e,0,t,r);for(let i=1;i<e.length;i++)n+=","+d(e,i,t,r);return n+"]"}(e,t,r):function(e,t,r){if("function"===typeof e.toJSON){let n;try{n=e.toJSON()}catch(bi){n=c(bi)}return h(n,l(t,"toJSON"),r)}let n="{",i=!0;for(let a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;let o;try{o=e[a]}catch(bi){o=c(bi)}const s=h(o,l(t,a),r);void 0!==s&&(i?i=!1:n+=",",n+=u(a)+":"+s)}return n+"}"}(e,t,r)}var n}function p(e){try{return h(e,"~",))}catch(bi){return JSON.stringify(c(bi))}}ction y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:r=En.Z,retries:n=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let i=r,a=0;return t&&n>0&&(i=,function e(t){const{src:r,win:n=window,charset:i=Rn,async:a=!0,retries:o=0,onRetry:s=En.Z,retryDelay:l=0,checkLoad:c=An,onBeforeLoad:d=En.Z,onLoad:u=En.Z,onError:h=En.Z}=t,p=n.document.createElement("script"),g=p.type="text/javascript",p.async=a,p.onload=p.onerror=p.src=r,p.charset=i,d(p),f(n).appendChild(p)}(y({},e,{onBeforeLoad:i}))}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e){return new Promise((t,r)=>{!function(e){const{win:t=window,src:r,retries:n=0,onError:i=En.Z}=e,a=new vn({id:"LOAD_SCRIPT_ERROR",message:"Failed to load script ["+r+"]",details:{src:r,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:n}});v(E({},e,{win:t,onError:()=>i(a)}))}(_({},e,{onLoad:t,onError:r}))})}function b(e){let{win:t=window,src:r,checkLoad:n,onBeforeLoad:i=rn.Z,onLoad:a=rn.Z,withCredentials:o=!1}=e;Sr["ll1.0-11279"]=Sr["ll1.0-11279"]||{};const s=Sr["ll1.0-11279"];return s[r]||(s[r]=S({checkLoad:n,win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:).then(a),s[r].catch(),s[r]}function R(e,t,r){return(r?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/1.0-"+t+"/js/"+e}function A(e){let{modern:t,lang:r}=e;return R(function(e){let{modern:t,lang:r}=e;return"skin_"+r+(t?".modern":"")+".js"}({modern:t,lang:r}),11279,!1)}function T(e){const t=window;let r=!1;return e.player.once(ln.Destroy,()=>r=!0),b({src:A({modern:e.modern,lang:dn.i18nLang?dn.i18nLang:"ru"}),checkLoad:).then(}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function I(e,t){Sr.timeAPIInit=Nr();const n=t(e),i=(0,$r.K)(n.getDebugConfig().logCalls);!function(e,t){if(void 0===t&&(t=!0),!(0,zr.s)(document,!0))return;let n=!1;const i=(0,Jr.Y)(document,e=>{e||(n=!0,i())}),a=t?"loader":"create",o=0===Qr++,s=o?a+".player.firstready":a+".player.ready",l=o?a+".player.firststart":a+".player.start",c=r();let d,u=!0;e.once("Ready",e=>{const t=c();d=e,(0,Gr.Y)(()=>{n||e.logDelta(s,t,{initSubpage:!0})})}),e.once("ResourcesIdle",,e.once("ContentImpression",()=>{const e=c();!n&&u&&void 0!==d&&(0,Gr.Y)(()=>d.logDelta(l,e,{initSubpage:!0}))})}(i,!1),!0!==e.skipPlayRumLogger&&o(i);const{setReadyInstance:a,setInstance:s}=i,l=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(i,Pn);s(n),n.once(ln.Ready,a),n.once(ln.SkinReady,;const{loadSkin:c=T}=e,d=c===T;n.on(ln.RequestFullscreenStateChange,async e=>{d&&!n.skin&&n.once(ln.SkinReady,});const u=(0,Rr.I)(async()=>{if(!1===c)return;if(n.getReadyState()===Tn.k.destroyed)return;const t=e.skinParams||{};try{if(d){const e=r();n.once(ln.SkinReady,t=>{let{error:r}=t;n.logSkinDelta(r?"skin.error":"skin.load",e(),{initSubpage:!0})})}n.skin=await c(P({},t,{container:n.getContainer(),player:l,modern:!0},d?{flags:e.flags}:{})),n.emit(ln.SkinReady,{})}catch(i){n.logError(new Xr({code:Lr.LOAD_SKIN_ERROR,isFatal:!1,details:i})),n.setNativeControlsVisibility(!0),n.setNativeAdControlsVisibility(!0),n.emit(ln.SkinReady,{error:i})}}),h=n.once(ln.ErrorChange,h);return Promise.all([new Promise(e=>n.once(ln.Ready,e)),Promise.race([new Promise(e=>setTimeout(e,1e4)),new Promise(])]).then(,l}unction C(e){return e instanceof Date||"Date"===(0,Zr.M)(e)}nction N(e){return Boolean(e)&&"ShadowRoot"===(0,Zr.M)(e)}ction M(e,t){if(void 0===t&&(t=!0),Un.$&&t)return[];const r=[];let n=e;for(;;)try{if(n=n.ownerDocument.defaultView.frameElement,!n)return r;r.push(n)}catch(bi){return r}}nction U(e,t){void 0===t&&(t=!1);const r=e.code;if(r===Wr.NO_CODECS&&Zn&&Xn>6)return{title:"NO_CODECS_TITLE",message:"NO_CODECS_MESSAGE",helpLink:"https://yandex.ru/support/video-player/player-issues.html#no-codecs",helpLinkButtonText:"NO_CODECS_HELP_LINK_TITLE"};if(r===Wr.DRM_PROXY_ERROR_NEED_COOKIE)return{title:"NEED_COOKIE_TITLE",message:"NEED_COOKIE_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_COOKIE_HELP_LINK_TITLE"};if(r===Wr.DRM_PROXY_ERROR_NEED_TEAM_LOGIN)return{title:"NEED_TEAM_LOGIN_TITLE",message:"NEED_TEAM_LOGIN_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_TEAM_LOGIN_HELP_LINK_TITLE"};if(r===Wr.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION)return{title:"NEED_VIEW_PERMISSION_TITLE",message:"NEED_VIEW_PERMISSION_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_VIEW_PERMISSION_HELP_LINK_TITLE"};const i=n(r);return t&&i)?{title:"ADBLOCK_DETECTED_TITLE",message:"ADBLOCK_DETECTED_MESSAGE",helpLink:"https://yandex.ru/support/video-player/blocker-settings.html",helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:i)}return(ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function te(e,t){var r,n;if(!e.servers)return e;const i={},{vsid:a,sourceIndex:o}=t,s=e=>(0,wo.Sr)(e,{vsid:a,source_index:String(o)},{override:!0,saveOriginalPath:!0});$(e.servers).forEach(e=>{let[t,r]=e;!r)?i[t]=r:i[t]=s(r)});const l=ee({},e);l.servers=i;const c=l;return null!=(r=c.advanced)&&null!=(n=r["com.widevine.alpha"])&&n.serverCertificateUrl&&(c.advanced=ee({},c.advanced,{"com.widevine.alpha":ee({},c.advanced["com.widevine.alpha"],{serverCertificateUrl:s(c.advanced["com.widevine.alpha"].serverCertificateUrl)})})),function(e){if(!(0,Hr.K)(e))return!1;if(!(0,Hr.K)(e.servers)||!("com.apple.fps.1_0"in e.servers))return!1;if(!(0,Hr.K)(e.advanced)||!("com.apple.fps.1_0"in e.advanced))return!1;const t=e.advanced["com.apple.fps.1_0"];if(!(0,Hr.K)(t))return!1;const{processSPCPath:r}=t;return(0,qr.H)(r)}(l)&&(l.advanced=ee({},l.advanced,{"com.apple.fps.1_0":ee({},l.advanced["com.apple.fps.1_0"],{processSPCPath:s(l.advanced["com.apple.fps.1_0"].processSPCPath)})})),l}function re(){return(re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}tion se(){return(se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function le(){return(le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ce(e,t,r){const n=le({},Jo.parse(e),{sourceIndex:r}),{vsid:i}=t;n.params.additionalParams.vsid=i,n.params.additionalParams=le({},Co,n.params.additionalParams,{vsid:i});const{testIds:a,slots:o}=function(e){const{testIds:t,slots:r}=Mo.parse({testIds:null==e?void 0:e.testids,slots:null==e?void 0:e.slots});return{testIds:t,slots:r}}((0,Qo.L)()),s=(0,$o.S)(n.params.additionalParams.slots,o),l=function(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.filter(Boolean).join(",").split(",").forEach(t=>{if(!/^\d+$/.test(t))return;const r=parseInt(t,10);e[r]=null});const i=Object.keys(e);return 0<i.length?i.join(","):void 0}(n.params.additionalParams.testIds,a);n.params.additionalParams=le({},n.params.additionalParams,s?{slots:s}:{},l?{testIds:l}:{}),n.params.posterStyle=le({objectFit:t.objectFit},n.params.posterStyle);const{adConfig:c}=n.params;return void 0!==c&&void 0===c.skinType&&(c.skinType=function(e){return void 0===e.loadSkin?"defaultInstream":void 0}(t)),n.streams=n.streams.map(e=>le({},e,{drmConfig:e.drmConfig?te(e.drmConfig,{vsid:i,sourceIndex:r}):void 0,url:(0,wo.Sr)(e.url,{vsid:i,source_index:String(r)},{override:!0,saveOriginalPath:!0})})),n}tion fe(){return(fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function me(e,t,r){return fe({},e),{source:ce(e,t,r)})}function ge(e){if(void 0===e)return;const t=e&&e.match&&e.match(as);if(t&&t[1])return parseInt(t[1],10);throw new Error("paramsObject.version must be a string like [1.0-0] or undefined")}function ye(e,t){return void 0===t&&(t=window),(0,oo.O)("playerapi-version",t)||ge(e)}function ve(e,t){return t?ns.PLAYER_API_MOCK:os&&(e=>{0;try{const t=(0,qr.H)(e)?ge(e):e;return"number"===typeof t&&t>=1410}catch(t){return!1}})(e||ss)?ns.PLAYER_API_MODERN:ns.PLAYER_API}nction Se(e,t){void 0===t&&(t={});const{silent:r=!0,allowRelative:n=!1}=t;return n||_e(e)?new Promise(:r?Promise.resolve(null):Promise.reject("["+e+"] is not an absolute url, to knock this pixel use { allowRelative: true } option")}async function be(e){let{url:t,data:r,contentType:n}=e;if(((t,n?new Blob([r],{type:n}):r))return;const i=new XMLHttpRequest;i.open("POST",t),i.withCredentials=!0,void 0!==n&&i.setRequestHeader("Content-Type",n),i.send(r)}function Re(e){setTimeout(()=>{throw e},0)}nction Pe(e){if("string"===typeof e)return"plain-url="+e;const[t,{utcStart:r="none",offset:n="none",delay:i="none"}]=e;return"url="+t+"|"+r+"/"+n+"/"+i}unction Oe(){return(Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}ction Ne(e){if(void 0===e&&(e=window),!e.navigator)return Bs;const{connection:t={}}=e.navigator;return"number"===typeof(r=t.rtt)&&isFinite(r)?t.rtt:Bs;var r}function De(){}unction xe(){return(xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction Fe(e,t){try{return e()}catch(bi){"function"===typeof t&&t(bi)}}function Ve(e){void 0===e&&(e=Nr);const t=e();return()=>Math.max(0,e()-t)}unction je(){return(je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction Ye(e,t){const r=e);if(!r)return De;const n=return e.addEventListener(r,n),function Ge(e,t,r){return e&&"number"===typeof e?e+t-r:e}function qe(e){var t,r,n,i;return null!=(t=null==(r=e.performance)?void 0:r.timeOrigin)?t:null==(n=e.performance)||null==(i=n.timing)?void 0:i.navigationStart}ction Ze(){return(Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xe(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}function ze(e){const{location:t,referrer:r}=e;return{location:Xe(window),topLocation:t,referrer:window.document.referrer,topReferrer:r}}function Je(e){let t="",r="";if(e){(function(e){const t=M(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(})(e).reverse().forEach(}return{location:t,referrer:r}}unction $e(){return($e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function et(e){let t=0;var r;return(0,ml.W)($e({},e,{checkStatus:url:(r=e.url,r.replace(/<tld>/g,fl))})).then(e=>e.responseText).catch(}ction it(){return(it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}nction st(){const e=window.navigator||{},t=window.performance||{},{location:r,referrer:n}=Je(document);return{navigator:it({},at(e),{connection:at(e.connection),plugins:ot()}),performance:{memory:at(t.memory)},playerLocation:location.href,iframeApiLocation:r,iframeApiReferrer:n}}function lt(e){let{videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:i}=e;if(void 0===t||t===Os.VOD)return li;if(i===1/0||r>n+i-10)return bl;if(t!==Os.LIVE)return li;return n+(0===r?0:10)>r?Sl:li}function ct(e,t){const r=document.createElement("style");r.textContent+=e,t?t.appendChild(r):f(window).appendChild(r)}function dt(e){const t=function(e,t){let{content:r,size:n}=void 0===t?{}:t;const i=e.ownerDocument.createElement("iframe");i.scrolling="no",i.setAttribute("allowfullscreen",""),i.style.display="block",n&&(i.height=n.height,i.width=n.width),e.appendChild(i);const a=i.contentDocument;a.open(),r&&a.write(r),a.close();try{a.body.style.margin="0"}catch(o){}return i.style.borderWidth="0",i}(e);return t.width="0",t.height="0",t.style.position="absolute",t}function ut(e){let t,{vsid:r,container:n}=e;return t=function(e,t){void 0===t&&(t=document);const r=dt(t.body);return r.id="ya-video-player-frame-"+e,r}(r),n.appendChild(r)),t}function ht(e){let{useAbdBundle:t}=e;return(t?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/1.0-11279"}function pt(e){let{vsid:t,from:r,reqid:n,slots:i,flags:a}=e,o="use_friendly_frame=true&vsid="+encodeURIComponent(t)+"&from="+encodeURIComponent(r);return n&&(o+="&reqid="+encodeURIComponent(n)),i&&(o+="&slots="+encodeURIComponent(i)),function(e){void 0===e&&(e=(0,ul.b)(window));try{if("1"===localStorage.getItem("rumdebug"))return console&&(0,cn.m)(console.warn)&&console.warn("using rumdebug=1 from localStorage"),!0}catch(t){}return/[?&#]rumdebug=1(?:[&#]|$)/.test(e)}()&&(o+="&rumdebug=1"),o+="&flags="+encodeURIComponent(a),o}function ft(){return(ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mt(e){return ht({useAbdBundle:e})+(os?"/js/player.v2.modern.js":"/js/player.v2.js")}function gt(t){let{iframe:n,useAbdBundle:i,vsid:a,from:o,reqid:l,slots:c,shouldLoadAdSdk:d,adConfig:u,flags:h,sendDelta:p}=t;const f=n.contentDocument,m=n.contentWindow;!pt({vsid:a,from:o,reqid:l,slots:c,flags:h}),m),function(e,t){const r=ht({useAbdBundle:t}),n=e.createElement("base");n.href=r,e.head.appendChild(n)}(f,i);const g=s(m),y=m);d&&void 0!==u&&e.e(769).then(e.bind(e,9627)).then(e=>{let{initMultirollModule:t}=e;return t(m,u,a,i)}).catch(rn.Z);const v=r();return S(ft({src:mt(i)},y,{checkLoad:)).then(e=>(p("internal_js_load",v()),e)).catch(e=>{throw new Xr(ft({},e,{code:Lr.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT}))})}function yt(){return(yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vt(){return(vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction _t(e){if(e&&e))return(0,wo.Sr)(e,{json_preview:"1",preview_version:"4"})}function St(){return(St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bt(){this.returnValue=!1}ion Ot(){return(Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ct(){return(Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wt(e){let{playingState:t}=e;return t===en.X.BUFFERING||t===en.X.PLAY}function kt(e){let{playingState:t}=e;return t===en.X.PLAY}function Nt(){return(Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}tion Ft(){return(Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vt(){return(Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction jt(e){return(0,qr.H)(e.className)?e.className:e.namespaceURI===Pc&&e.getAttribute("class")||""}function Bt(e,t){(0,qr.H)(e.className)?e.className=t:e.namespaceURI===Pc&&e.setAttributeNS("","class",t)}function Yt(e,t){void 0===t&&(t=""),0!==e.className.length?Oc(e)?kc(e,t):function(e,t){let r=jt(e).split(" ").concat(t.split(" "));r=gn(r,()),Bt(e,r.join(" "))}(e,t):e.className=t}function Gt(e){const t=e.createElement("div");return O(t,Fc),t}function qt(){const e=document.createElement("div");O(e,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"});const t=document.createElement("div");return e.appendChild(t),O(t,{color:"#fff",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:"16px",lineHeight:"19px",textShadow:"0 0 3px #000",textAlign:"center",margin:"0 10px 20px 10px"}),{wrapper:e,setText:}function Kt(e){let{document:t,poster:r,style:n,onReady:i,hiddenControls:a=[],primaryColor:o=cc,backgroundColor:s}=e;const l=t.createElement("div");O(l,{width:"100%",height:"100%",display:"block",position:"relative",pointerEvents:"none",backgroundColor:s});const c=new Ac({container:l,onReady:i,src:r,style:n}),d=Gt(t);let u;-1===a.indexOf(uo.ALL)&&-1===a.indexOf(uo.PRELOADER)&&(u={document:t,primaryColor:o,isMobileSkin:Mt()}),d.appendChild(u)),l.appendChild(d);const h=qt();return l.appendChild(h.wrapper),{element:l,setPoster:e=>c.setPoster(e),setStyle:e=>c.setStyle(e),setSpinnerVisibility:e=>{u&&O(u,{display:e?"block":"none"})},setVisibility:e=>{O(l,{display:e?"block":"none"})},setAnnotationText:destroy:}function Wt(e){id 0===e&&(e=1);const n=[],i=[];return{waitAndLock:addLock:r,isFree:t}}function Ht(){return(Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction Xt(e){return!!(0,Hr.K)(e)&&(!!(0,Hr.K)(e.videoInfo)&&Boolean(e.enableRemoteProgressSaving&&e.videoInfo.videoContentId))}function zt(e,t){const r=function(e,t,r){return void 0===r&&(r=0),pn(e,}(e,t);return void 0===r?void 0:r.end-t}function Jt(){return(Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qt(e,t){return void 0===t&&(t=2),e===1/0?"inf":a(e)?e.toFixed(t):".".repeat(t<=0?1:t+1)}function $t(e){return(e/1024/1024).toFixed(2)+" Mb"}function er(){const e=),t=document.createElement("span"),r=document.createElement("div");return Yt(r,Gc().debugPanelGraphWrapper),r.appendChild(e),r.appendChild(t),{canvas:e,span:t,wrapper:r}}function tr(e,t){const r=document.createElement("div");r.textContent=t,Yt(r,Gc().debugPanelRowName),O(r,{gridArea:"label-"+t});const n=document.createElement("div"),i=Gc()[t];return i&&(n.id=i),O(n,{paddingLeft:"5px",gridArea:t}),e.appendChild(r),e.appendChild(n),n}function rr(e){const{details:t}=e;try{const e="string"===typeof t?JSON.parse(t):t;return Boolean(e.isVhError)}catch(r){}return!1}function nr(e){return void 0===e&&(e=Oo),e in $c&&$c[e].preferHd}function ir(e){return void 0===e&&(e="/log"),"https://log.strm.yandex.ru"+e}function ar(){return ir("/"+Ke((e=td,t=rd,Math.floor(Math.floor(Math.random()*(t-e+1))+e))));var e,t}function or(e){return{reqid:null==e?void 0:e.reqid,from_block:null==e?void 0:e.from_block,frontend_vh_reqid:null==e?void 0:e.frontend_vh_reqid,recommender_reqid:null==e?void 0:e.recommender_reqid,stream_block:null==e?void 0:e.stream_block}}function sr(){if(void 0!==document.featurePolicy)try{return document.featurePolicy.allowedFeatures()}catch(e){return}}function lr(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function cr(){return(cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dr(){return(dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}unction hr(e){void 0===e&&(e={});const t=ye(e.version)||ss,r=[R(os?fd.PLAYER_API_MODERN:fd.PLAYER_API,t,e.useAbdBundle||!1),R(os?fd.PLAYER_MODERN:fd.PLAYER,t,e.useAbdBundle||!1)];if(Zt(e)){var n;const t=(null==(n=e.source)?void 0:n.adConfig)||{};(e=>{var t;const{win:r,config:{vasUaasConfig:n},moduleName:i}=e,{version:a}=(0,pd.M)(n);if(void 0===a)return[];return[{src:(0,ud.J)({version:a,bundleName:i,win:r,ecmaVersion:null!==(t=hd.a.adsdkecmaver)&&void 0!==t?t:dd.I}),type:"script"}]})({win:window,config:t,moduleName:"Multiroll"}).forEach(}return Promise.all(r.map(ur)).then(()=>r)}function pr(e,t){void 0===t&&(t=window),hr(e);try{const r=function(e,t){let{version:r,useAbdBundle:n,usePlayerApiMock:i}=e;const a=ye(r,t),o=ve(a,i);return R(o,a||ss,Boolean(n))}(e,window);return void 0===yd&&(yd=function(e){return new Promise(}({win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"},checkLoad:()=>{try{var e,r;return(0,cn.m)(null==(e=t.Ya)||null==(r=e.playerApi)?void 0:r.create)}catch(n){return!1}}})),{promise:yd,bundleUrl:r}}catch(bi){return{promise:Promise.reject(bi),bundleUrl:""}}}function fr(){return(fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mr(e){const t=fr({},e,{element:"string"===typeof e.element?document.getElementById(e.element):e.element}),r=function(e){void 0===e&&(e=document);const t=e.getElementById("ya-video-playerapi-mock-frame");if(t)return t;const r=dt(e.body);return r.id="ya-video-playerapi-mock-frame",r}(document).contentWindow,n=(0,$r.K)(),{setReadyInstance:i,setInstance:a}=n,o=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,vd);return pr(t,r).promise.then(()=>{const e=r.Ya.playerApi.create(t);i(e),a(e)}),o}var gr=e(1792),yr=e(7549);const vr=[...gr.o,...yr.t,"getState","getReadyState"],Er=window;Er.Ya||(Er.Ya={}),Er.Ya.playerApi||(Er.Ya.playerApi={}),Er.Ya.playerApi.METHODS||(Er.Ya.playerApi.METHODS=vr);const _r=window.Ya.playerApi,Sr=window.Ya.playerApi;var br=e(9591),Rr=e(1153);const Ar={}.toString,Tr=/\[object (\w+)\]/,Pr=Date&&t(Date.now)?()=>Date.now():()=>(new Date).getTime(),Ir="undefined"===typeof window?void 0:window.performance,Or=Ir&&t(Ir.now),Cr=Ir&&Ir.timing&&Ir.timing.navigationStart,wr=Ir&&Ir.timeOrigin?Ir.timeOrigin:Cr?Ir.timing.navigationStart:Pr();let kr=0;const Nr=Or?()=>Ir.now():var Dr=e(7881);let Lr;!Lr||(Lr={}));const xr="DEFAULT_ERROR_MESSAGE",Mr=0,Fr="",Vr="?:?:?",Ur=!0,jr="DEFAULT";var Br=e(8139),Yr=e.n(Br),Gr=e(8712),qr=e(9899);let Kr,Wr;!Kr||(Kr={})),Wr||(Wr={}));var Hr=e(5689),Zr=e(2739);class Xr extends Error{constructor(e,t){const r="object"===typeof e?e:{message:String(e),code:0};super(String(r.message)),this.message=void 0,this.messageDetails=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.vsid=void 0,this.helpLink=void 0,Yr()(this,Xr.prototype),this.message=r.message||this.message,this.messageDetails=r.messageDetails,this.code=r.code;const i=n(this.code);if(this.category=null!=r&&r.category&&i===Kr.DEFAULT?r.category:i,this.details=r.details,this.isFatal=void 0===r.isFatal||r.isFatal,this.stack=r.stack&&"?:?:?"!==r.stack?r.stack:this.details&&this.details.stack||((r,this.stack),!this.stack||this.stack===Vr)try{throw new Error(this.message)}catch(bi){(0,Hr.K)(bi)&&(this.stack=bi.stack||Vr)}this.helpLink=r.helpLink||void 0,this.vsid=t||r.vsid}static from(e,t){var r,n;void 0===t&&(t={});const a=null!=(r=null!=(n=t.code)?n:(0,Gr.Y)(()=>e.code))?r:0;return e instanceof Xr?t?new Xr(i({},e,t,{code:a})):e:(o=e)instanceof Error||"Error"===(0,Zr.M)(o)?new Xr(i({},e,t,{code:a})):(0,qr.H)(e)?new Xr(i({message:e},t,{code:a})):new Xr(i({message:"UNEXPECTED_ERROR_TYPE"},t,{code:a}));var o}oJSON(){const e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid,helpLink:this.helpLink||void 0};return i({},e,{raw:JSON.stringify(e)})}}var zr=e(6164),Jr=e(141);let Qr=0;var $r=e(4841),en=e(7746);let tn;!function(e){e.NATIVE="NATIVE",e.HLS="HLS",e.MP4="MP4",e.YASP="YASP"}(tn||(tn={}));var rn=e(55);const nn={AD:"play.start.adsdk",[tn.YASP]:"play.start.yasp",[tn.NATIVE]:"play.start.native",[tn.HLS]:"play.start.hls",[tn.MP4]:"play.start.mp4"},an={AD:"play.start.adsdk",[tn.YASP]:"play.start.adsdk.yasp",[tn.NATIVE]:"play.start.adsdk.native",[tn.HLS]:"play.start.adsdk.hls",[tn.MP4]:"play.start.adsdk.mp4"},on={AD:"network.start.adsdk",[tn.YASP]:"network.start.yasp",[tn.NATIVE]:"network.start.native",[tn.HLS]:"network.start.hls",[tn.MP4]:"network.start.mp4"},sn={AD:"network.start.adsdk",[tn.YASP]:"network.start.adsdk.yasp",[tn.NATIVE]:"network.start.adsdk.native",[tn.HLS]:"network.start.adsdk.hls",[tn.MP4]:"network.start.adsdk.mp4"};let ln;!ln||(ln={}));var cn=e(4754);const dn=s("object"===typeof self?self:window);var un=e(8864);const hn=[].find,pn=(0,un.E)(hn)?var fn=e(5605);const mn="function"===typeof Array.isArray?Array.isArray:gn=yn=e(8139);class vn extends Error{constructor(e,t){void 0===t&&(t={});const r="object"===typeof e?e:{message:String(e||xr)};super(),this.message=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.toString=void 0,this.toJSON=void 0,yn(this,vn.prototype),this.message=t.message||r.message||xr,this.code=t.code||r.code||r.id||Mr,this.category=t.category||r.category||jr,this.isFatal=Boolean([t.isFatal,r.isFatal,Ur])),this.details=t.details||r.details||Fr,Object.defineProperty(this,"stack",{enumerable:!0});const n=t.stack||r.stack||r);let i=n===Vr?this.stack:n;if(i&&i!==Vr)this.stack=i;else if(!this.stack)try{throw new Error(this.message)}catch(bi){this.stack=i=bi.stack||Vr}this.toString=()=>p(this.toJSON())||"{}",this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,category:this.category,stack:i})}}var En=e(4612);const _n=!(0,un.E)(Math.random)||Math.random()===Math.random();let Sn=Date.now()*Nr()%2147483647;const bn=_n?Rn="utf-8",An=e(5865);var Tn=e(6094);const Pn=["setReadyInstance","setInstance"];var In=e(3461);let On;const Cn=window),wn=kn=["","webkit","moz","o","ms"],Nn={},Dn=var Ln=e(1312),xn=e(7974);const Mn=Fn=e=>function(e){return e instanceof Promise||"Promise"===(0,Zr.M)(e)&&Boolean((0,Gr.Y)()}(e)||((e),Vn=var Un=e(8344);const jn=M(document.documentElement),Bn=);class Yn extends constructor(e,t){void 0===t&&(t=,super(),this.checkToEqualFunction=t,this.value=void 0,this.value=e}getValue(){return this.value}r Gn=e(6048),qn=e.n(Gn);let Kn,Wn;!function(e){e.OFFLINE="offline",e.IDLE="idle",e.ATTEMPT="attempt",e.PLAYING="playing",e.ERROR="error"}(Kn||(Kn={})),Wn||(Wn={}));var Hn=e(1247);const Zn=),Xn=),zn={[Kr.MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[Kr.NETWORK_MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[Kr.NETWORK_PLAYER]:"https://yandex.ru/support/video-player/player-issues.html",[Kr.NETWORK_TIMEOUT]:"https://yandex.ru/support/video-player/player-issues.html",[Kr.NO_CODECS]:"https://yandex.ru/search/?text=\u043a\u043e\u0434\u0435\u043a\u0438",[Kr.UNSUPPORTED_ENV]:"https://yandex.ru/soft/browsers/",[Kr.EXCEPTION]:"https://yandex.ru/support/video-player/loading-issues.html",[Kr.DRM]:"https://yandex.ru/support/video-player/drm.html",[Kr.BANNED]:null},Jn={[Kr.DEFAULT]:"DEFAULT_ERROR_CATEGORY_TITLE",[Kr.MEDIA]:"MEDIA_ERROR_CATEGORY_TITLE",[Kr.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_TITLE",[Kr.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_TITLE",[Kr.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_TITLE",[Kr.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_TITLE",[Kr.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_TITLE",[Kr.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_TITLE",[Kr.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_TITLE",[Kr.CONFIG]:"CONFIG_ERROR_CATEGORY_TITLE",[Kr.REGIONAL]:"REGIONAL_ERROR_CATEGORY_TITLE",[Kr.DRM]:"DRM_ERROR_CATEGORY_TITLE",[Kr.ACCESS]:"ACCESS_ERROR_CATEGORY_TITLE",[Kr.BANNED]:"BANNED_ERROR_CATEGORY_TITLE"},Qn={[Kr.DEFAULT]:"DEFAULT_ERROR_CATEGORY_MESSAGE",[Kr.MEDIA]:"MEDIA_ERROR_CATEGORY_MESSAGE",[Kr.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_MESSAGE",[Kr.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_MESSAGE",[Kr.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_MESSAGE",[Kr.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_MESSAGE",[Kr.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_MESSAGE",[Kr.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_MESSAGE",[Kr.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_MESSAGE",[Kr.CONFIG]:"CONFIG_ERROR_CATEGORY_MESSAGE",[Kr.DRM]:"DRM_ERROR_CATEGORY_MESSAGE",[Kr.ACCESS]:"ACCESS_ERROR_CATEGORY_MESSAGE",[Kr.BANNED]:"BANNED_ERROR_CATEGORY_MESSAGE"},$n={[Kr.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_HELP_LINK",[Kr.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_HELP_LINK"};let ei;!ei||(ei={}));var ti=e(8557);let ri,ni,ii;!ri||(ri={})),function(e){e.INIT="INIT",e.SET_SOURCE="SET_SOURCE"}(ni||(ni={})),function(e){e.SetMuted="SetMuted",e.SetVolume="SetVolume",e.RequestAutoplaySettings="RequestAutoplaySettings",e.VolumeChangeEvent="VolumeChangeEvent",e.RestoreSavedMuted="RestoreSavedMuted"}(ii||(ii={}));var ai=e(7343);const oi=(0,un.E)(Object.getPrototypeOf)?e=>Object.getPrototypeOf(e):let si;!function(e){e.PublicApiCall="PublicApiCall",e.Unload="Unload",e.PlayerContainerNotFound="PlayerContainerNotFound"}(si||(si={}));const li={min:0,max:1/0},ci="0000000000000000000000000000000000000000000000000000000000000000",di={state:ri.NOT_PLAYING,type:void 0,adParams:{}},ui={source:void 0,stream:void 0,drmSystem:void 0,startStage:Wn.init,playingState:en.X.PAUSE,playingStateReason:ti.l.Unknown,videoType:void 0,utcStartTime:void 0,currentTime:NaN,watchedTime:0,dvrStartTime:NaN,dvrDuration:NaN,duration:NaN,volume:NaN,muted:!1,volumeChangeReason:void 0,isFullscreen:!1,pictureInPictureAllowed:!1,isPictureInPicture:!1,isVisible:!1,videoSize:void 0,videoTracks:[],videoTrack:void 0,audioTracks:[],audioTrack:void 0,textTracks:[],textTrack:void 0,subtitles:[],vsid:ci,error:void 0,playbackRateRange:li,playbackRate:1,version:"1.0-11279",adState:di,adSkippableState:!1,adVolumeAvailabilityState:!1,adPodCloseState:void 0,adPodCurrentTime:NaN,adPodTimeToSkip:NaN,adPodDuration:NaN,nextAdRemainingTime:void 0,bufferedRanges:[],tileMetaInfo:void 0,tileMetaInfoUrl:void 0,liveLatency:void 0,connectionQuality:void 0,ugcLiveStatus:void 0};let hi;!hi||(hi={}));var pi,fi,mi=e(5543),gi=window.Map||function(){},yi=window.Set||vi=Ei=function(){return(Ei=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_i=);(fi=pi=pi||{}).assertNever=fi.arrayToEnum=fi.getValidEnumValues=fi.objectValues=fi.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:fi.find=fi.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:var Si,bi,Ri=pi.arrayToEnum(["invalid_type","custom","invalid_union","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types"]),Ai=Error),Ti=Pi=Ti,Ii=pi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oi=Ci=wi=ki=Ni=),Di=Object.freeze({valid:!1}),Li=xi=function(e){return new _i(e)},Mi=function(e){return!1===e.valid},Fi=Vi=function(e){return e instanceof _i};(bi=Si=Si||{}).errToObj=bi.toString=var Ui,ji=Bi=Yi=Gi=),qi=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ki=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,Wi=Gi),Hi=Gi),Zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype._parse=function(e,t,r){return r!==Ii.bigint?(e.addIssue(t,{code:Ri.invalid_type,expected:Ii.bigint,received:r}),Di):Li(t)},t.create=function(){return new t({typeName:aa.ZodBigInt})},t}(Gi),Xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype._parse=function(e,t,r){return r!==Ii.boolean?(e.addIssue(t,{code:Ri.invalid_type,expected:Ii.boolean,received:r}),Di):Li(t)},t.create=function(){return new t({typeName:aa.ZodBoolean})},t}(Gi),zi=Gi),Ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype._parse=function(e,t,r){return r!==Ii.undefined?(e.addIssue(t,{code:Ri.invalid_type,expected:Ii.undefined,received:r}),Di):Li(t)},t.create=function(){return new t({typeName:aa.ZodUndefined})},t}(Gi),Qi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype._parse=function(e,t,r){return r!==Ii.null?(e.addIssue(t,{code:Ri.invalid_type,expected:Ii.null,received:r}),Di):Li(t)},t.create=function(){return new t({typeName:aa.ZodNull})},t}(Gi),$i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return Y(t,e),t.prototype._parse=function(e,t,r){return Li(t)},t.create=function(){return new t({typeName:aa.ZodAny})},t}(Gi),ea=Gi),ta=Gi),ra=Gi),na=ia=Gi);!Ui=Ui||{});var aa,oa=sa=Gi),la=Gi),ca=Gi),da=Gi),ua=Gi),ha=Gi),pa=Gi),fa=Gi),ma=Gi),ga=Gi),ya=Gi),va=Gi),Ea=Gi),_a=Gi),Sa=Gi),ba=Gi),Ra=Gi),Aa=Ta={object:sa.lazycreate};!aa=aa||{});var Pa=Wi.create,Ia=Hi.create,Oa=Zi.create,Ca=Xi.create,wa=zi.create,ka=Ji.create,Na=Qi.create,Da=$i.create,La=ea.create,xa=ta.create,Ma=ra.create,Fa=ia.create,Va=sa.create,Ua=sa.strictCreate,ja=la.create,Ba=ca.create,Ya=da.create,Ga=ua.create,qa=ha.create,Ka=pa.create,Wa=fa.create,Ha=ma.create,Za=ga.create,Xa=ya.create,za=va.create,Ja=Ea.create,Qa=_a.create,$a=Sa.create,eo=ba.create;Object.freeze({__proto__:null,ZodParsedType:Ii,getParsedType:Oi,makeIssue:Ci,EMPTY_PATH:null,pathToArray:wi,pathFromArray:ki,ParseContext:Ni,createRootContext:INVALID:Di,OK:Li,ASYNC:xi,isInvalid:Mi,isOk:Fi,isAsync:Vi,ZodType:Gi,ZodString:Wi,ZodNumber:Hi,ZodBigInt:Zi,ZodBoolean:Xi,ZodDate:zi,ZodUndefined:Ji,ZodNull:Qi,ZodAny:$i,ZodUnknown:ea,ZodNever:ta,ZodVoid:ra,ZodArray:ia,get objectUtil(){return Ui},mergeObjects:ZodObject:sa,ZodUnion:la,ZodIntersection:ca,ZodTuple:da,ZodRecord:ua,ZodMap:ha,ZodSet:pa,ZodFunction:fa,ZodLazy:ma,ZodLiteral:ga,ZodEnum:ya,ZodNativeEnum:va,ZodPromise:Ea,ZodEffects:_a,ZodTransformer:_a,ZodOptional:Sa,ZodNullable:ba,ZodDefault:Ra,custom:Aa,Schema:Gi,ZodSchema:Gi,late:Ta,get ZodFirstPartyTypeKind(){return aa},any:Da,array:Fa,bigint:Oa,boolean:Ca,date:wa,effect:Qa,enum:Xa,function:Wa,instanceof:intersection:Ba,lazy:Ha,literal:Za,map:qa,nativeEnum:za,never:xa,null:Na,nullable:eo,number:Ia,object:Va,oboolean:function(){return Ca().optional()},onumber:function(){return Ia().optional()},optional:$a,ostring:promise:Ja,record:Ga,set:Ka,strictObject:Ua,string:Pa,transformer:Qa,tuple:Ya,undefined:ka,union:ja,unknown:La,void:Ma,ZodIssueCode:Ri,quotelessJson:ZodError:Ai,defaultErrorMap:Ti,get overrideErrorMapsetErrorMap:);const to=["be","en","id","kk","ru","tr","tt","uk","uz"],ro=Xa([to[0],...to.slice(1)]).transform(e=>e).default("ru"),no=ja([ro,Pa().transform(()=>"ru")]).transform(e=>e).default("ru"),io=ao=ja([Ca().default(!1).transform(,Va({allowMuted:Ca()}).transform(]);var oo=e(3126);const so=ja([Ca().default(!1).transform(,Va({logCalls:Ca().default(!1),logEvents:Ca().default(!1),logInternals:Ca().default(!1),showDebugPanel:Ca().default(!1)})]).transform(e=>{let{logCalls:t,logEvents:r,logInternals:n,showDebugPanel:i}=e;return{logCalls:(0,mi.RW)("web_debug_log_calls")||(0,oo.O)("playerapi-debug-logcalls",X)||t,logEvents:(0,mi.RW)("web_debug_log_events")||(0,oo.O)("playerapi-debug-logevents",X)||r,logInternals:(0,mi.RW)("web_debug_log_internals")||(0,oo.O)("playerapi-debug-loginternals",X)||n,showDebugPanel:(0,mi.RW)("web_debug_panel")||(0,oo.O)("playerapi-debug-panel",X)||i}}),lo=Va({}).passthrough().optional();var co=e(9298);let uo;!uo||(uo={}));const ho=(0,co.Z)(uo).map(,po=ja([za(uo),Pa().transform(()=>"")]),fo=Fa(po).transform(,mo=ja([Fa(po),Pa().transform(]).transform(.default(""),go=Ia().optional().transform(e=>Math.max(void 0===e?30:e,5)),yo=ja([Ca().transform(,Va({enabled:La().transform(,reportUrl:Pa().default("https://yandex.ru/support/video-player/feedback.html")})]).default(!1),vo=Number.EPSILON||Math.pow(2,-52),Eo=ja([Ca().transform(,ka().transform(()=>({onlyMuted:!0,forceAutoplay:!1,threshold:vo})),Va({onlyMuted:Ca()}).strict().transform(,Va({threshold:Ia().nonnegative().max(1),onlyMuted:Ca().default(!1)}).transform(]);let _o;!function(e){e.USER_VOLUME="yandexJSPlayerApiSavedUserAdjustedVolume",e.VOLUME="yandexJSPlayerApiSavedUserVolume",e.MUTED="yandexJSPlayerApiSavedUserMuted"}(_o||(_o={}));var So=e(2741);const bo={getItemsetItemremoveItemclear;onst Ao=Ia().refine(J,"must be a number 0..1").optional().transform(.transform(,To=Va({debug:so,autoplay:ao,slowConnection:Ca().default(!1),volume:Ao,muted:Ca().optional(),preload:Ca().default(!0),autoQuality:Ca().default(!0),defaultQuality:Ia().nullable().default(720),feed:Ca().default(!1),useAbdBundle:Ca().default(!1),lang:no,env:lo,maxBufferLength:Ia().refine(a).transform(Dr.toSeconds).optional(),enableRemoteProgressSaving:Ca().default(!1),liveOffset:go,bandwidthEstimateOffset:Ia().refine(a).transform(Dr.toBps).optional(),report:yo,preferNative:Ca().default(!1),togglePlaybackOnVisibilityChange:Eo,restoreTabSessionPlaybackProgress:Ca().default(!1),useFallbackStream:Ca().default(!1),loadSkin:ja([Wa(),Za(!1)]).optional(),perfLogUrl:Pa().optional(),skinParams:Va({skinConfig:Va({hiddenControls:mo,primaryColor:Pa().optional().default("#FFCC00"),secondaryColor:Pa().optional().default("#EEEEEE")}).passthrough().optional().default({})}).refine(io).optional(),useNativeAdControls:Ca().default(!0),device:La().refine(io).transform(e=>e).default({}),backgroundColor:Pa().transform(e=>e||void 0).default("#000"),objectFit:Pa().optional().transform(,cacheSourcesCount:Ia().nonnegative().int().refine(a).default(0)});var Po=e(5745);const Io=To.transform(e=>{var t,r,n,i,a,o;const s=Q(null==(t=e.skinParams)||null==(r=t.skinConfig)?void 0:r.hiddenControls),l=0===e.volume||(void 0===e.muted?Ro.getSavedMuted():e.muted),c=e.togglePlaybackOnVisibilityChange&&e.togglePlaybackOnVisibilityChange.forceAutoplay||e.autoplay.autoplay,d=null===e.defaultQuality?e.defaultQuality:Math.floor(e.defaultQuality/9*16),u=(0,Po.z)();return{streamPlayerParams:{debug:e.debug.logInternals,hidden:!1===e.loadSkin?s:ho,autoplay:!u&&c,allowMuted:(0,mi.RW)("web_forbid_allow_muted_autoplay")?l:e.autoplay.allowMuted,lang:e.lang,autoQuality:e.autoQuality,defaultQuality:d,feed:e.feed,preload:!u&&e.preload,togglePlaybackOnVisibilityChange:e.togglePlaybackOnVisibilityChange,restoreTabSessionPlaybackProgress:e.restoreTabSessionPlaybackProgress,maxBufferLength:e.maxBufferLength,preferNative:e.preferNative,report:e.report.enabled,skinConfig:null==(n=e.skinParams)?void 0:n.skinConfig,backgroundColor:e.backgroundColor,shouldPlayOnFirstClick:void 0===e.loadSkin,bandwidthEstimateOffset:e.bandwidthEstimateOffset,useNativeAdControls:e.useNativeAdControls,device:e.device,volume:e.volume,muted:l,liveOffset:e.liveOffset,slowConnection:e.slowConnection,cacheSourcesCount:e.cacheSourcesCount,showUnmuteButtonForAll:!1,perfLogUrl:null!=(i=e.perfLogUrl)?i:"https://log.strm.yandex.ru/perf"},useAbdBundle:e.useAbdBundle,useFallbackStream:e.useFallbackStream,debugConfig:e.debug,reportConfig:e.report,loadSkin:e.loadSkin,originalHiddenControls:s,primaryColor:null==(a=e.skinParams)||null==(o=a.skinConfig)?void 0:o.primaryColor,objectFit:e.objectFit,savedMutedRestored:void 0===e.muted&&0!==e.volume}}),Oo="other",Co={from:Oo,reqid:void 0,hash:void 0,vsid:ci};var wo=e(504);const ko=["playready-proxy.ott.yandex.ru","playready-proxy-preproduction.ott.yandex.ru","widevine-proxy.ott.yandex.ru","widevine-proxy-preproduction.ott.yandex.ru","fairplay-proxy.ott.yandex.ru","fairplay-proxy-preproduction.ott.yandex.ru","drm.yandex-team.ru"],No=0,Do=["partnerId","partner_id","category","impId","imp_id","hasPreroll","videoContentId","video_content_id","videoContentName","video_content_name","videoPublisherId","video_publisher_id","videoPublisherName","video_publisher_name","videoGenreId","video_genre_id","videoGenreName","video_genre_name","distrId","distr_id","adBreaks"],Lo=Va({}).passthrough().default({partnerId:void 0}).transform((function(e){const{partnerId:t,partner_id:r=t,category:n=No,impId:i,imp_id:a=i,hasPreroll:o,videoContentId:s,video_content_id:l=s,videoContentName:c,video_content_name:d=c,videoPublisherId:u,video_publisher_id:h=u,videoPublisherName:p,video_publisher_name:f=p,videoGenreId:m,video_genre_id:g=m,videoGenreName:y,video_genre_name:v=y,distrId:E,distr_id:_=E,adBreaks:S}=e;return re({},e,Do),{partnerId:Number(r),category:Number(n),impId:void 0!==a?parseInt(String(a),10)||0:void 0,hasPreroll:"boolean"===typeof o?o:void 0,videoContentId:l,videoContentName:d,videoPublisherId:h,videoPublisherName:f,videoGenreId:g,videoGenreName:v,distrId:_,adBreaks:S})})),xo=/^\w(\-|_|:|\s|\.|\w){0,70}$/,Mo=Va({from:Pa().transform(().optional(),slots:ja([Pa().transform((),Fa(Pa()),La().transform(()=>{})]).optional().transform((),testIds:ja([Pa().transform((),Fa(Pa()).transform(ie),Fa(Ia()).transform(ne),La().transform(]).optional()}).catchall(La().transform().transform((),Fo=Va({}).passthrough().refine(ae,"must be serializable"),Vo=Va({preferredAudioLangs:Fa(Pa()).max(1),preferredTextLangs:Fa(Pa()).max(1)}).transform(,Uo=$a(Ia().nonnegative().refine(a).transform(Dr.toSeconds)).transform(,jo=Va({url:Pa().url(),drmConfig:Fo.optional(),metaInfoUrl:Pa().optional()}),Bo=Va({objectFit:Pa().optional()}).optional(),Yo=Va({videoContentId:Pa().optional(),videoContentName:Pa().optional(),videoContentDescription:Pa().optional(),videoPublisherId:Pa().optional(),videoPublisherName:Pa().optional(),videoGenreId:Pa().optional(),videoGenreName:Pa().optional()}),Go=Va({endTime:Ia(),startTime:Ia(),type:Xa(["intro","recap","credits"])}),qo=Va({loop:Ca().default(!1),startPosition:Uo,adConfig:Lo.default({}),withCredentials:Ca().optional(),passportRetpath:Pa().url().optional(),preview:Pa().optional(),posterStyle:Bo,additionalParams:Mo.optional().default({}),externalPlayerConfig:Va({}).passthrough().optional(),id:Pa().default(""),videoInfo:Yo.default({}),enableRemoteProgressSaving:Ca().optional().default(!1),preferredTracks:Vo.default({preferredAudioLangs:[],preferredTextLangs:[]}),skippableFragments:Fa(Go).optional(),initialStalledDuration:Ia().default(0),externalStalledDuration:Ia().optional()}),Ko=Va({streamUrl:Pa().url(),drmConfig:Fo.optional(),contentId:ja([ka(),xa()])}),Wo=Va({streams:Fa(jo).nonempty(),drmConfig:ja([ka(),xa()]),contentId:ja([ka(),xa()])}),Ho=Va({contentId:Pa(),streamUrl:ja([ka(),xa()]),streams:ja([ka(),xa()])}),Zo=Ba(ja([Ho,Wo,Ko]).transform(e=>{if("contentId"in e)return{contentId:e.contentId,streams:[]};if("streams"in e)return{streams:e.streams,contentId:void 0};if("streamUrl"in e)return{streams:[{url:e.streamUrl,drmConfig:e.drmConfig}],contentId:void 0};throw new Error("SourceSchema Exception")}),qo);var Xo=e(8870);const zo=["videoContentName","videoContentId","videoPublisherId","videoPublisherName","videoGenreId","videoGenreName"],Jo=Zo.transform(e=>({contentId:e.contentId,id:e.id,streams:e.streams,params:{startPosition:e.startPosition,adConfig:se({},e.adConfig,oe(e.videoInfo,e.adConfig)),withCredentials:e.withCredentials,loop:e.loop,preview:e.preview,posterStyle:e.posterStyle,additionalParams:e.additionalParams,externalPlayerConfig:(0,Hr.K)(e.externalPlayerConfig)?se({},e.externalPlayerConfig,{passportRetpath:(0,qr.H)(e.passportRetpath)?e.passportRetpath:void 0}):e.externalPlayerConfig,videoInfo:oe(e.videoInfo,e.adConfig),preferredTracks:e.preferredTracks,skippableFragments:e.skippableFragments},initialStalledDuration:e.initialStalledDuration,externalStalledDuration:void 0!==e.externalStalledDuration?e.externalStalledDuration:void 0}));var Qo=e(9272),$o=e(3563);const es={trackingEvents:[{init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]}]},ts=Wa().args().returns(Da()),rs=Va({trackings:La().transform(pe).default(es),update:ts.default(,enableRemoteProgressSaving:Ca().default(!1).or(La().transform(),videoInfo:Yo.default({})});let ns;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js",e.PLAYER_API_MOCK="player-api-mock.js"}(ns||(ns={}));const is=e=>((e)&&((e),as=/1\.0-(\d+)/,os=((window),ss=function(e){const t=100*bn();let r=0;for(let n=0;n<e.length;n++)if(r+=e[n].percent,t<r)return e[n].id;return e[0].id}([{id:11279,percent:100}]),ls=cs=Ee();var ds=e(3628);const us=(0,ds.P)(),hs=),ps=),fs=ls();var ms=e(5753);let gs,ys,vs,Es;!gs||(gs={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.TABLET="tablet"}(ys||(ys={})),vs||(vs={})),Es||(Es={}));const _s=(0,co.Z)(Es),Ss=new RegExp(/^https:\/\/tracking(-testing){0,1}\.ott\.yandex\.net\/v\d+\/watch-batch/),bs=Date&&(0,cn.m)(Date.now)?class Rs{setTimeout(e,t){if(t<=0)return void(0,Gr.Y)(e,Re);const r=window.setTimeout(e,t);returnclass As{etTimeout(e,t){const r=this.time+t,n={task:e,time:r,isCanceled:!1,isRunned:!1};if(((this.tasks,n,,!(t<=0))return(0,Gr.Y)(Re)}Is{constructor(){this.value=0,this.measureTime=()=>0}ause(){this.value=this.value+this.measureTime(),this.measureTime=et Os;!Os||(Os={}));const Cs=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((0,Hn.i)());class ws extends Ps{constructor(e){super(),this.params=e,this.MACROS={dl:random:timestamp:vts:fts:"watched-time":()=>Math.floor(this.params.getWatchedTime()),"video-time":()=>Math.floor(this.params.getCurrentTime()),"device-type":()=>Cs?gs.MOBILE:gs.DESKTOP,"device-type-mediascope":"device-type-tns":()=>{if(Cs){if(us)return vs.IOS;if(cs)return vs.ANDROID;if(fs)return vs.WINDOWS_MOBILE}else if(Zn||ps||hs)return vs.DESKTOP;return vs.UNDEFINED},fullscreen:()=>this.params.getIsFullscreen()?"1":"0",duration:vsid:"audio-track-name":()=>{const e=this.params.getAudioTrack();return e?e.name:""},"audio-track-lang":()=>{const e=this.params.getAudioTrack();return e?e.lang:""},"text-track-name":()=>{const e=this.params.getTextTrack();return e?e.name:""},"text-track-lang":"drm-supported":"drm-type":"bitrate-video":()=>{var e;const t=null==(e=this.params.getVideoTrack())?void 0:e.bitrate;return t?Math.floor(1e3*t):""},"bitrate-audio":()=>{var e;const t=null==(e=this.params.getAudioTrack())?void 0:e.bitrate;return t?Math.floor(1e3*t):""},"initial-buffering-time":"ad-position":"client-ad-sec":()=>Math.floor(this.clientAdTimeMeasurer.getTime()/1e3),muted:,this.measureInitialBufferingTime=void 0,this.initialBufferingTime=void 0,this.clientAdTimeMeasurer=new Is,this.watchedTimeClock=new As,this.heartbeatTimers=[],this.bufferedInfoByTrackKey={},this.trackingEvents={init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]},this.onError=e=>{let{code:t,isFatal:r}=e;r&&this.trackingEvents.error.forEach(e=>{const r=Pe(e);this.parseAndTrackUrls([e],Oe({"error-code":()=>String(t)},this.getBufferedInfoGetters(r))),this.clearBufferedInfo(r)})},this.onReady=()=>{this.parseAndTrackUrls(this.trackingEvents.init)},this.onSetSourceComplete=this.onWatchedTimeChange=e=>{isNaN(e)||this.watchedTimeClock.setTime(1e3*e)},this.onCurrentTimeChange=e=>{this.emit("CurrentTimeChange",e)},this.onAdLoaded=e=>{this.emit("AdLoaded",e)},this.onAdError=()=>{this.emit("AdError")},this.onAdStateChange=e=>{this.emit("AdStateChange",e)},this.onAdPodStart=()=>{this.emit("AdPodStart")},this.onAdPodEnd=()=>{this.emit("AdPodEnd")},this.onAdPodClick=()=>{this.emit("AdPodClick")},this.onAdPodSkip=this.onStateChange=setTrackings(e){this.resetTrackings(),this.trackingEvents=function(e){if(!Array.isArray(e))return e;const t={init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]};return e.forEach(e=>{$(e).forEach(}),t}(e.trackingEvents);const{start:t,end:n,adStart:i,adError:a,adRequest:o,adEnd:s,adPodStart:l,adPodClick:c,adPodEnd:d,adPodSkip:u,sourceStart:h,play:p,pause:f,error:m,firstQuartile:g,midpoint:y,thirdQuartile:v,viewed:E,heartbeat:_,watchedTime:S}=this.trackingEvents,b=(0,Rr.I)(()=>{this.parseAndTrackUrls(h)});let R=[...E,...Te(g,25),...Te(y,50),...Te(v,75)],A=!1;[..._,...f,...m].forEach(e=>{const t=Pe(e);this.bufferedInfoByTrackKey[t]={count:0,time:0}});const T=()=>{b(),A=!0,this.parseAndTrackUrls(t),this.heartbeatTimers=_.concat(S.map(Ae)).map(e=>{const[t,{delay:r,offset:n=r,callsCount:i=1/0,utcStart:a,utcEnd:o}]=e,s=Pe(e);let l=0;const c=new Ts(()=>{const e=Math.round(this.params.getUtcPosition());return void 0!==a&&e<a||void 0!==o&&e>o?1e3:0===l?(l++,n):(this.parseAndTrackUrls([t],this.getBufferedInfoGetters(s)),this.clearBufferedInfo(s),l++,l>i?(c.destroy(),0):r)},this.watchedTimeClock);return c}),this.heartbeatTimers.forEach(e=>e.start())};let P=!1,I=!1;this.on("CurrentTimeChange",,this.on("AdStateChange",,this.on("AdLoaded",,this.on("AdError",;let O=null;this.on("StateChange",e=>{if(this.isAdPlaying())O=null;else if(e===en.X.BUFFERING)O=r();else if(null!==O){const e=O()/1e3;O=null;for(const t in this.bufferedInfoByTrackKey)Object.prototype.hasOwnProperty.call(this.bufferedInfoByTrackKey,t)&&(this.bufferedInfoByTrackKey[t].count++,this.bufferedInfoByTrackKey[t].time=e+this.bufferedInfoByTrackKey[t].time)}}),this.on("StateChange",e=>{this.isAdPlaying()?e===en.X.PLAY?this.clientAdTimeMeasurer.start():this.clientAdTimeMeasurer.pause():this.clientAdTimeMeasurer.reset()}),this.on("StateChange",e=>{if(e===en.X.END)return void this.parseAndTrackUrls(n);if(!P){if(e===en.X.PLAY)this.initialBufferingTime=this.measureInitialBufferingTime?Math.floor(Math.floor(this.measureInitialBufferingTime())):Math.floor(0),this.parseAndTrackUrls(p),P=!0,I=!0;else if(e===en.X.BUFFERING){var t;this.measureInitialBufferingTime=null!=(t=this.measureInitialBufferingTime)?t:r()}return}if(this.isAdPlaying())return;const i=e===en.X.PLAY||e===en.X.BUFFERING;i!==I&&(I=i,i?this.parseAndTrackUrls(p):f.forEach(e=>{const t=Pe(e);this.parseAndTrackUrls([e],this.getBufferedInfoGetters(t)),this.clearBufferedInfo(t)}))});let C=!1,w=!1;this.on("AdPodStart",,this.on("AdPodClick",,this.on("AdPodSkip",,this.on("AdPodEnd",}learBufferedInfo(e){const t=this.bufferedInfoByTrackKey[e];void 0!==t&&(t.time=0,t.count=0)}getBufferedInfoGetters(e){const t=this.bufferedInfoByTrackKey[e];return{"buffering-duration":"buffering-count":}isStreamPlaying(){return this.params.getPlayingState()===en.X.PLAY&&!this.isAdPlaying()}rseAndTrackUrls(e,t){void 0===t&&(t={});const r=Oe({},this.MACROS,t);e.forEach(e=>{const t=_s.reduce(e);if(e)){const r=(0,ms.c)("data",t);be({url:e.split("?")[0],data:"["+r+"]",contentType:"application/json"})}else Se(t)})}}const ks=);let Ns=0;const Ds=ks?"#feedback__app-problem":"#feedback__browser-problem";let Ls,xs;!Ls||(Ls={})),xs||(xs={}));class Ms{nWatchedTimeChange(e){const{previousWatchedTime:t}=this;t!==e&&(!t,e)?!function(e,t){return e<4&&t>=4}(t,e)?!function(e,t){return e<10&&t>=10}(t,e)?!t,e)?t,e)&&this.params.onEvent(Ls.Heartbeat30Sec):this.params.onEvent(Ls.Watched20Sec):this.params.onEvent(Ls.Watched10Sec):this.params.onEvent(Ls.Watched4Sec):this.params.onEvent(Ls.Start),this.previousWatchedTime=e)}class Fs{xtractSourceIndex(e){try{const t=new URL(e).searchParams.get("source_index");return Number(t)}catch(t){return null}}checkIsFatal(e,t){if(!e||!t)return e;const r=this.extractSourceIndex(t);return null===r?e:(null===this.lastSourceIndexWithFatal||r>this.lastSourceIndexWithFatal)&&(this.lastSourceIndexWithFatal=r,!0)}}class Vs{constructor(e,t){this.onTick=e,this.onFlush=t,this.wasFirstFlush=!1,this.isDestroyed=!1,this.lastFlushTime=void 0,this.startTime=void 0,this.timer=void 0,this.handleTimeout=this.startTime=this.lastFlushTime=Nr(),this.timer=window.setTimeout(0)}estroydFlush(){const e=Nr();return this.wasFirstFlush?e-this.lastFlushTime>=3e4:e-this.startTime>=1e4}getTimeout(){return Nr()-this.startTime<1e4?1e3:5e3}}const Us=Math.max(Math.abs(0),0),js={remainingBufferedTime:Math.max(Math.abs(0),0),state:xs.BUFFERING,currentTime:Us,watchedTime:Math.max(Math.abs(0),0),duration:Math.max(0,0)},Bs=NaN;let Ys,Gs,qs,Ks;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(Ys||(Ys={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(Gs||(Gs={}));class Ws{constructor(e){this.props=e,this.prevState=void 0,this.states=[],this.timer=void 0,this.destroyHandlers=[],this.writeStateManually=function(e,t,r,n){===arguments.length&&"boolean"!==typeof r&&(n=r,r=!1);let a=null,o=De;const s=function(){const s=arguments;n=n||this,o=()=>{i(),o=De,e.apply(n,s)},r&&null===a&&e.apply(n,s),i(),a=window.setTimeout((,t)};return s.cancel=i,s.now=s}(0),this.timer=new Vs(()=>this.writeState(),()=>this.flushStates())}addDestroyHandler(e){this.destroyHandlers.push(e)}destroy(){this.timer.destroy(),this.flushStates(),this.destroyHandlers.forEach(,this.destroyHandlers=[]}lushStates(){this.writeStateManually.now();const e=this.getStates();e.length>0&&this.props.onFlushStates(e),this.states.length=0}writeState(){const e=this.getPlayerAliveState();qn()(this.prevState,e)||(this.prevState=e,this.states.push(xe({},e,{timestamp:this.props.getTimestamp()})))}getPlayerAliveState(){var e,t;const r=xe({},js,{saveData:ke(),rtt:Ne()},this.props.stalledController.getStalledHistory()),n=this.props.getState();if(!n)return xe({},r);const{watchedTime:i,currentTime:a,duration:o,muted:s,playingState:l,remainingBufferedTime:c,adState:d,liveLatency:u,videoTracks:h,audioTrack:p,videoSize:f,isVisible:m,capHeight:g,capWidth:y,containerHeight:v,containerWidth:E,bandwidthEstimate:_,bandwidthSource:S,droppedFrames:b,shownFrames:R,isFullscreen:A,isPictureInPicture:T,volume:P,playbackRate:I}=n,O=h.find(e=>e.selected),C=[...h].sort(,w=(null==d?void 0:d.state)===Ys.PLAYING,k=!w;return xe({},r,{watchedTime:Math.max(0,i),currentTime:isNaN(a)?0:Math.max(0,a),duration:isNaN(o)?0:Math.max(0,o),isMuted:s,state:l,remainingBufferedTime:(null==c?void 0:c.total)||0,remainingAudioBufferedTime:void 0===(null==c?void 0:c.audio)?void 0:Math.max(0,c.audio),remainingVideoBufferedTime:void 0===(null==c?void 0:c.video)?void 0:Math.max(0,c.video),ad:w?null==d?void 0:d.type:void 0,liveLatency:void 0===u?void 0:Math.max(0,u),stalledReason:this.props.stalledController.getCurrentStalledReason(),auto:void 0===(null==O?void 0:O.auto)?void 0:O.auto,isVisible:m,bitrate:null!=O&&O.bitrate?Math.max(0,Math.floor(1e3*O.bitrate)):void 0,width:void 0===(null==f?void 0:f.videoWidth)||isNaN(null==f?void 0:f.videoWidth)?void 0:Math.max(0,Math.floor(null==f?void 0:f.videoWidth)),height:void 0===(null==f?void 0:f.videoHeight)||isNaN(null==f?void 0:f.videoHeight)?void 0:Math.max(0,Math.floor(null==f?void 0:f.videoHeight)),maxWidth:k&&null!=(e=C[0])&&e.width?Math.max(0,Math.floor(C[0].width)):void 0,maxHeight:k&&null!=(t=C[0])&&t.height?Math.max(0,Math.floor(C[0].height)):void 0,audioTrack:(null==p?void 0:p.value)||void 0,audioLang:(null==p?void 0:p.lang)||void 0,audioBitrate:null!=p&&p.bitrate?Math.max(0,Math.floor(1e3*p.bitrate)):void 0,capHeight:k&&g?Math.max(0,Math.floor(g)):void 0,capWidth:k&&y?Math.max(0,Math.floor(y)):void 0,containerHeight:void 0!==v?Math.max(0,Math.floor(v)):void 0,containerWidth:void 0!==E?Math.max(0,Math.floor(E)):void 0,bandwidthEstimate:void 0===_||isNaN(_)?void 0:Math.max(0,Math.round(_)),bandwidthSource:S||void 0,droppedFrames:void 0===b?void 0:Math.max(0,Math.floor(b)),shownFrames:void 0===R?void 0:Math.max(0,Math.floor(R)),viewport:Le(A,T),volume:P,playbackRate:I})}}!qs||(qs={})),function(e){e.Internal="internal",e.Api="api",e.Cache="cache"}(Ks||(Ks={}));const Hs=[0,1,4,5];let Zs=0;const Xs=Hs.map(e=>(Zs=e+Zs,Zs)),zs=1e3*Xs[Xs.length-1],Js=[qs.Init];lass $s{constructor(e,t){void 0===t&&(t=new Qs),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.setTimeout(()=>this.knock(this.lastNow+this.lastTimeout),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||this.setTimeout(()=>this.knock(e+t),t)}cancelTimeout(){void 0!==this.cancel&&this.cancel(),this.cancel=void 0}setTimeout(e,t){this.cancelTimeout();const r=this.clock.setTimeout(e,t);void 0!==r&&(this.cancelTimeout(),this.cancel=r)}}class el{constructor(e){let{getState:t,logEvent:r}=e;this.isBuffering=!1,this.timer=void 0,this.stalledId=1,this.preloadDetails=void 0,this.stalledDurationRemainder=0,this.getState=void 0,this.logEvent=void 0,this.expectedStalled=Ue(qs.Init,{}),this.currentStalled=void 0,this.stalledTime=0,this.stalledCount=0,this.getState=t,this.logEvent=r}setBuffering(e,t){var r;if(void 0===t&&(t=0),e!==this.isBuffering)if(this.isBuffering=e,this.isBuffering){const e=[],r=Hs.filter((r,n)=>{const i=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled(),a=Xs[n];if(t/1e3>a){const e=this.currentStalled?this.currentStalled.id:this.stalledId++;return this.currentStalled||this.stalledCount++,this.currentStalled={id:e,expectedStalled:i,duration:a,getElapsedTime:Ve()},this.send(!1,i,a,e),!1}return e.push(a),!0});this.currentStalled&&(this.stalledDurationRemainder=t/1e3-this.currentStalled.duration),r.length&&(r[0]=r[0]-this.stalledDurationRemainder),this.timer=new $s(t=>{let{count:n}=t;const i=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled();if(n>0){const t=e[n-1],r=this.currentStalled?this.currentStalled.id:this.stalledId++;this.currentStalled||this.stalledCount++,this.currentStalled={id:r,expectedStalled:i,duration:t,getElapsedTime:Ve()},this.send(!1,i,t,r)}return n>=r.length?(this.destroyTimer(),1/0):1e3*r[n]}),this.timer.start()}else{if(this.currentStalled){var n,i;const{expectedStalled:e,id:t}=this.currentStalled,a=(void 0===(r=this.currentStalled)?0:r.duration+r.getElapsedTime()/1e3)+this.stalledDurationRemainder;this.send(!0,e,a,t),this.currentStalled=void 0,this.stalledDurationRemainder=0,this.stalledTime=a+this.stalledTime;const o=(null==(n=this.getState())||null==(i=n.adState)?void 0:i.state)===Ys.PLAYING?qs.AdOther:qs.Other;this.setExpectedStalled(Ue(o,void 0))}this.destroyTimer()}}setPreloadDetails(e){this.preloadDetails=e}getStalledHistory(){const{stalledCount:e,stalledTime:t}=this;return{stalledCount:Math.max(Math.floor(e)),stalledTime:Math.max(t,0)}}t,r,n){const{reason:i,details:a}=t,o=i===qs.SetSource?this.preloadDetails:void 0,s={id:n,isStalledEnd:e,reason:i,stalledDuration:r,details:je({},a,o)};o&&e&&this.resetPreloadDetails();let l=je({},s.details,{stalledDuration:s.stalledDuration,stalledId:s.id});const c=this.getState();if(c){const{muted:e,remainingBufferedTime:t,videoTracks:r}=c;l=je({},l,{remainingBufferedTime:t,videoTrack:r.find(e=>e.selected),isMuted:e})}this.logEvent({name:s.isStalledEnd?"StalledEnd":"Stalled",data:l,labels:{reason:s.reason}})}const tl=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0,rl=["Start","4SecWatched","10SecWatched","20SecWatched","30SecHeartbeat","End"],nl=new RegExp("^https?:\\/\\/([^\\/]+\\.)?("+["(an|strm)\\.yandex\\.(ru|net)","yastatic\\.net","strm-ott\\.akamaized\\.net","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru","drm\\.yandex-team\\.ru"].join("|")+")\\/(?!log|perf|jstracer)");class il{constructor(e){this.config=e,this.intervalId=void 0,this.contexts=[]}attach(e){(function(e){return e.performance&&(t(e.performance.getEntriesByType)||t(e.performance.webkitGetEntriesByType))&&(t(e.performance.clearResourceTimings)||t(e.performance.webkitClearResourceTimings))})(e)&&-1===this.contexts.indexOf(e)&&(0===this.contexts.length&&(this.intervalId=setInterval(()=>this.flush(),3e4)),this.contexts.push(e))}detach(e){const t=this.contexts.indexOf(e);-1!==t&&this.contexts.splice(t,1),0===this.contexts.length&&clearInterval(this.intervalId)}destroy(){this.flush(),this.contexts.length=0,clearInterval(this.intervalId)}flush(){const e=[],t=this.contexts.map(qe),r=Math.min(...t);this.contexts.forEach((n,i)=>{(function(e){try{var t,r;const n=null!=(t=e.performance.getEntriesByType)?t:e.performance.webkitGetEntriesByType,i=null!=(r=e.performance.clearResourceTimings)?r:e.performance.webkitClearResourceTimings,a=n.call(e.performance,"resource");return i.call(e.performance),a}catch(n){return[]}})(n).forEach(n=>{nl.test(n.name)&&e.push(function(e,t,r){let{duration:n,entryType:i,name:a,startTime:o,connectEnd:s,connectStart:l,decodedBodySize:c,domainLookupEnd:d,domainLookupStart:u,encodedBodySize:h,fetchStart:p,initiatorType:f,nextHopProtocol:m,redirectEnd:g,redirectStart:y,requestStart:v,responseEnd:E,responseStart:_,secureConnectionStart:S,transferSize:b,workerStart:R,serverTiming:A,responseStatus:T,deliveryType:P,renderBlockingStatus:I,firstInterimResponseStart:O}=e;return{duration:n,entryType:i,name:a,encodedBodySize:h,decodedBodySize:c,initiatorType:f,transferSize:b,nextHopProtocol:m,serverTiming:A,responseStatus:T,deliveryType:P,renderBlockingStatus:I,startTime:Ge(o,t,r),connectEnd:Ge(s,t,r),connectStart:Ge(l,t,r),domainLookupEnd:Ge(d,t,r),domainLookupStart:Ge(u,t,r),fetchStart:Ge(p,t,r),redirectEnd:Ge(g,t,r),redirectStart:Ge(y,t,r),requestStart:Ge(v,t,r),responseEnd:Ge(E,t,r),responseStart:Ge(_,t,r),secureConnectionStart:Ge(S,t,r),workerStart:Ge(R,t,r),firstInterimResponseStart:Ge(O,t,r)}}(n,t[i],r))})}),0!==e.length&&this.config.sendLog(e,{perfnow:String(Pr()),navstart:String(r)})}}const al=!Math.random)||Math.random()===Math.random();let ol=Date.now()*Nr()%2147483647;const sl=al?function(){return ol=16807*ol%2147483647,(ol-1)/2147483646}:function(){return Math.random()},ll={enabled:!0,events:[Ls.Watched10Sec,Ls.Watched20Sec,Ls.Heartbeat30Sec]},cl={logVersion:"1.2.0"};class dl{constructor(e){let{sendLog:t,playerInfo:r,getState:n}=e;this.fatalTracker=void 0,this.playbackTracker=void 0,this.playerAliveController=void 0,this.stalledController=void 0,this.remoteProgressSavingInfo=ll,this.staticParams={},this.playerInfo=void 0,this.startTimestamp=wr,this.sendLog=void 0,this.getState=void 0,this.destroyed=!1,this.wasInitBufferingLogged=!1,this.initialStalledTimestamp=void 0,this.initialStalledTimestampStop=void 0,this.eventIndex=0,this.playerInfo=r,this.sendLog=t,this.getState=n,this.playbackTracker=new Ms({onEvent:),this.stalledController=new el({getState:this.getState,logEvent:e=>this.logEvent(e)}),this.playerAliveController=new Ws({getState:n,onFlushStates:e=>this.logEvent({name:"PlayerAlive",data:{states:e}}),getTimestamp:()=>this.getLogTimestamp(),stalledController:this.stalledController}),this.fatalTracker=new Fs,this.initOnVisibilityChangeHandling()}getLogTimestamp(){return Math.round(this.startTimestamp+Nr())}initOnVisibilityChangeHandling(){const e=Ye(document,;this.playerAliveController.addDestroyHandler(e)}setStaticParams(e,t){this.staticParams=t?Ze({},e):Ze({},this.staticParams,e)}tPlayingState(e){this.playbackTracker.onPlayingStateChange(e),e===xs.BUFFERING?this.setBuffering(!0):this.setBuffering(!1)}logEvent(e){if(this.destroyed)return;const t=this.getFullEventLog(e),r=this.getUrlParams(t.eventType,t.eventName,e.labels);this.sendData(t,r)}logError(e){let{error:t,labels:r,extraRootFields:n}=e;if(this.destroyed)return;t.isFatal=this.fatalTracker.checkIsFatal(t.isFatal,this.staticParams.streamUrl);const i=this.getFullErrorLog({error:t,labels:r,extraRootFields:n}),a=this.getUrlParams(i.eventType,i.eventName,r);this.sendData(i,a)}getUrlParams(e,t,r){return Ze({},r,{[this.playerInfo.service]:this.playerInfo.version,[e]:String(t)})}getFullEventLog(e){const t=this.getState(),r=Ze({},e.labels,this.staticParams.labels,{videoType:null==t?void 0:t.videoType}),n=rl.includes(e.name)?Ze({},e.data,this.getDataToSend(t)):e.data,i={};return this.remoteProgressSavingInfo.events.includes(e.name)&&t&&(i.playbackProgress={time:t.currentTime}),Ze({},cl,this.staticParams,e.extraRootFields,i,this.playerInfo,{eventType:"event",eventName:e.name,timestamp:this.getLogTimestamp(),documentIsVisible:Be(document),eventIndex:this.eventIndex,data:n,labels:r})}getFullErrorLog(e){let{error:t,labels:r,extraRootFields:n}=e;const i=Ze({},r,this.staticParams.labels);return t.details=Fe(()=>"string"===typeof t.details?t.details:JSON.stringify(t.details))||t.details,Ze({},cl,this.playerInfo,this.staticParams,n,{eventType:t.isFatal?"fatal":"error",eventName:String(t.code),timestamp:this.getLogTimestamp(),documentIsVisible:Be(document),eventIndex:this.eventIndex,data:t,labels:i})}getDataToSend(e){if(!e)return{};const{watchedTime:t,duration:r,currentTime:n,utcStartTime:i,isFullscreen:a,volume:o,muted:s}=e;return{watchedSec:t,duration:isNaN(r)?void 0:r,time:n,utcTime:void 0===i?void 0:i+n,isFullscreen:a,isMuted:s||0===o}}sendData(e,t){void 0!==e&&(Fe(Me),this.eventIndex++)}checkStalledReason(e){return this.stalledController.getCurrentStalledReason()===e}etExpectedBuffering(e){let{reason:t,details:r}=e;switch(this.checkInitBuffering(t),t){case qs.SetSource:this.setBuffering(!1),this.clearBufferingHistory();break;case qs.Init:break;default:this.checkStalledReason(t)||this.setBuffering(!1)}return this.stalledController.setExpectedStalled(Ue(t,r))}checkInitBuffering(e){this.wasInitBufferingLogged||e===qs.Init||this.onInitBuffering()}setExternalStalledDuration(e){const t=this.getExpectedStalled();t.reason===qs.Init&&e&&(t.details={externalStalledDuration:e/1e3},this.setExpectedBuffering(t))}startInitBufferingTimer(){this.initialStalledTimestamp=Nr()}stopInitBufferingTimer(){this.initialStalledTimestampStop=Nr()}onInitBuffering(e){if(this.wasInitBufferingLogged)return;const t=this.initialStalledTimestamp&&!this.initialStalledTimestampStop,r=this.initialStalledTimestamp&&this.initialStalledTimestampStop,n=t?Nr()-this.initialStalledTimestamp:r?this.initialStalledTimestampStop-this.initialStalledTimestamp:0;e&&this.setExternalStalledDuration(e),this.setBuffering(!0,n),this.initialStalledTimestamp=void 0,this.initialStalledTimestampStop=void 0,this.wasInitBufferingLogged=!0}destroy(e){this.stalledController.destroy(),this.playerAliveController.destroy(),this.logEvent({name:"DestroyPlayer",data:{reason:null==e?void 0:e.reason}}),this.destroyed=!0}getExpectedStalled(){return this.stalledController.getExpectedStalled()}clearBufferingHistory(){return this.stalledController.clearStalledHistory()}ritePlayerAliveStateManually(){return this.playerAliveController.writeStateManually()}nSetSource(e,t,r){var n;this.flushStates(),r&&this.setStaticParams(r),this.logEvent({name:"SetSource",data:e}),this.setExpectedBuffering({reason:qs.SetSource,details:t}),(null==(n=this.getState())?void 0:n.playingState)!==xs.PAUSE&&this.setBuffering(!0)}onExpectedBuffering(e){let{reason:t,details:r}=e;return this.checkInitBuffering(t),this.stalledController.setExpectedStalled(Ue(t,r))}onSeek(e){this.setExpectedBuffering({reason:qs.Seek,details:e})}onVideoTrackChange(e){this.setExpectedBuffering({reason:qs.VideoTrackChange,details:e})}onAudioTrackChange(e){this.setExpectedBuffering({reason:qs.AudioTrackChange,details:e})}onRecover(e){this.setExpectedBuffering({reason:qs.Recover,details:e})}onMediaError(e){this.setExpectedBuffering({reason:qs.MediaError,details:e})}onNetworkStatusChange(e){this.setExpectedBuffering({reason:qs.Offline,details:e})}onRepresentationsChange(e){this.setExpectedBuffering({reason:qs.RepresentationsChange,details:e})}onLiveEdge(e){this.setExpectedBuffering({reason:qs.LiveEdge,details:e})}onAdStart(e){this.setExpectedBuffering({reason:qs.AdStart,details:e})}onAdBetween(e){this.setExpectedBuffering({reason:qs.AdBetween,details:e})}var ul=e(6267),hl=e(9200),pl=e(5636);const fl=(0,wo.en)(window.location.href).hostname.split(".").reverse()[0];var ml=e(7668);const gl=yl=()=>et({method:"GET",url:"https://cloud-api.yandex.ru/videoplayer/v1/personality/profile/yandex_io/devices/",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(t){return[]}}),vl=El=let _l;!function(e){e.OK="OK",e.SLOW="SLOW",e.UNKNOWN="UNKNOWN"}(_l||(_l={}));const Sl={min:1,max:1/0},bl={min:0,max:1};var Rl=e(5654);const Al=(0,Rr.I)(()=>ct(Rl.toString()));var Tl=e(2988);const Pl=(0,Tl.N)(),Il=Pl>-1&&Pl<=15,Ol=let Cl;!Cl||(Cl={}));let wl=0;const kl=Nl=["requestId"];class Dl extends Ps{Request(e,t,r){void 0===r&&(r=6e4);const n={commandName:e,params:t,requestId:wl++},i=this.waitForAnswer(n,r);return this.sendPostMessage({command:n}),i}itForAnswer(e,t){let r,n=rn.Z;const i=return new Promise(}st Ll=[Kr.NO_CODECS,Kr.UNSUPPORTED_ENV,Kr.CONFIG,Kr.NETWORK_PLAYER,Kr.BANNED,Kr.REGIONAL],xl=vt({},{onReady:!1,onResourcesIdle:!1,onInit:!1,onInitError:!1,onVolumeChange:!1,onFullScreenChange:!1,onVisualStateChange:!1,onStartStageChange:!1,onNextAdRemainingTimeChange:!1,onStreamsWithSupportInfoChange:!1,onNetworkStatusChange:!1,onLogEvent:!1,onPreloadSourceResolve:!1,onPreloadSourceReject:!1,onBandwidthEstimateChange:!1,onRequestFullscreenChange:!1,onPlaybackQualityUpdate:!1,onExpectedStalledChange:!1,onPreloadDetailsUpdate:!1,onCapSizeChange:!1},{onChangeStream:!0,onDrmSystemChange:!0,onStateChange:!0,onAdStateChange:!0,onAdLoaded:!0,onAdError:!0,onBeforeAdPodStart:!0,onAdPodStart:!0,onAdPodClick:!0,onAdPodSkip:!0,onAdPodEnd:!0,onAdSkippableStateChange:!0,onAdVolumeAvailabilityStateChange:!0,onAdPodCloseStateChange:!0,onAdPodDurationChange:!0,onAdPodCurrentTimeChange:!0,onAdPodTimeToSkipChange:!0,onAdInteraction:!0,onPositionChange:!0,onTimelineInfoChange:!0,onError:!0,onRecover:!0,onVideoTrackChange:!0,onVideoTracksChange:!0,onAudioTrackChange:!0,onAudioTracksChange:!0,onTextTrackChange:!0,onTextTracksChange:!0,onSubtitlesChange:!0,onThumbnailTileGeneralMetaInfoChange:!0,onVideoTypeChange:!0,onVideoSizeChange:!0,onOriginalBroadcastAdStateChange:!0,onContentImpression:!0,onBufferingRangesChange:!0,onPlaybackRateChange:!0,onEngineChange:!0,onInrollFrame:!0});var Ml=e(8243);const Fl=[{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Vl=["from_block","stream_block"];let Ul;!function(e){e.PLAY="PLAY",e.PAUSE="PAUSE",e.PREVENT_ACTIONS="PREVENT_ACTIONS",e.CALL_NEXT="CALL_NEXT"}(Ul||(Ul={}));const jl=Bl=Yl=Gl=ql=Kl=Kl.log=Kl.setTimeout=const Wl=class Hl{onstructor(e){this.args=e,this.strategies=void 0,this.runningCount=0,this.callback=this.strategies=Vn(e.strategyFactories,}l=e(3751),Xl=e(895);let zl="hidden",Jl="visibilitychange";if(!(zl in document)){const e=["webkit","moz","ms","o"];for(const t of e){const e=t+"Hidden";if(e in document){zl=e,Jl=t+"visibilitychange";break}}}const Ql=new class{constructor(e){void 0===e&&(e=window),this.windowObj=e,this.yaBroApiInstance=void 0,this.initYaBrowserApi()}lass $l{onstructor(e){this.args=e,this.isDetermined=!0,this.subscription=void 0,this.timer=void 0,this.onVisibilityChangeCallback=()=>{this.args.callback(this.getIsVisible())}}start(){this.timer=window.setTimeout(()=>{this.onVisibilityChangeCallback(),this.subscription=function(e,t,r,n,i){if(!e||!r)return null;let a=At(Kl("handler:"+t,r,n));const o={un;var s;return i&&i.once&&!Xl.vE&&(s=a,a=,Xl.wI?(0,Zl.h)(e,t,a,i):(0,Zl.h)(e,t,a,i&&i.capture),o}(document,Jl,this.onVisibilityChangeCallback)})}onst ec=class tc{onstructor(e){this.args=e,this.isDetermined=!0,this.observer=void 0,this.threshold=void 0,this.callback=this.threshold=Math.max(2**-149,this.args.portion),this.observer=new IntersectionObserver(this.callback,{threshold:this.threshold})}tIsVisible(){return e=this.args.element,t=this.threshold,It(e)>=(t||Number.MIN_VALUE);var e,t}}class rc extends class{constructor(e){this.args=e,this.isDetermined=!0,this.timer=void 0}nstructor(e){super(e),this.args=e,this.isDetermined=void 0,this.windowChain=(e=>{const t=[];for(;e;)try{if((0,ul.b)(e),t.push(e),e.parent===e)break;e=e.parent}catch(bi){break}return t})(window).reverse();try{this.isDetermined=Boolean((window.top||window).location.hostname)}catch(bi){this.isDetermined=!1}}et nc=null;try{"undefined"!==typeof IntersectionObserver&&(nc=Hl.from(from(tc.factory,rc.factory),$l.factory))}catch(_d){}class ic extends Ps{constructor(e,t){super(),this.visibilityThreshold=-1,this.state={isPip:!1,isFullScreen:!1,isDocumentVisible:(0,zr.s)(document),isElementVisible:!0,isVisibilitySupported:null!==nc},this.element=void 0,this.observe=this.notifyDocumentVisibility=e=>{this.state.isDocumentVisible!==e&&(this.state=Ot({},this.state,{isDocumentVisible:e}),this.handleChange())},this.notifyElementVisibility=this.element=e,this.state.isDocumentVisible=(0,zr.s)(e.ownerDocument),t&&(this.visibilityThreshold=Math.min(t.threshold,.99)),this.observeVisibility()}notifyFullScreen(e){this.state.isFullScreen!==e&&(this.state=Ot({},this.state,{isFullScreen:e}),this.handleChange())}tState(){return this.state}ass ac{ppendMiddleware(e){this.middlewareList.unshift(e(this.middlewareInitParams))}bserveVisualState(e){return this.visibilityObserver.observe(e)}restartVisibilityObserver(){return this.visibilityObserver.restart()}getVisualState(){return this.visibilityObserver.getState()}notifyFullScreen(e){this.visibilityObserver.notifyFullScreen(e)}notifyPip(e){this.visibilityObserver.notifyPip(e)}mitChange(){const e=++this.lastChainId,t=Ct({},this.playerStateAdaptor.getState(),{visualState:this.visibilityObserver.getState()}),r=()=>t;this.middlewareList.reduce(rn.Z)()}}lass sc{constructor(e){this.playerApi=void 0,this.handlers=void 0,this.previousWatchedTime=0,this.emitChange=this.emitWatchedTimeChange=this.playerApi=e;if(!e.getState())throw new Error("PlayerStateAdaptorV2 should use only inited PlayerApi");this.handlers=[],this.playerApi.on(ln.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.on(ln.PlayingStateChange,this.emitChange),this.playerApi.on(ln.MutedChange,this.emitChange),this.playerApi.on(ln.AdStateChange,this.emitChange)}r lc=e(9320);const cc="#FFCC00",dc=navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,uc=);var hc=e(5940);const pc=),fc=[["XiaoMi/MiuiBrowser",11],["UCBrowser",12],["HuaweiBrowser",9]],mc=(window),)),gc=En.Z,yc=En.Z,vc=En.Z,Ec=e=>{let{win:t,propertyName:r}=e;return{call:e=>gc(Ft({win:t,propertyName:r},e)),subscribe:e=>vc(Ft({win:t,propertyName:r},e)),wait:e=>(e=>{let{propertyName:t,win:r}=e;return new Promise(e=>{vc({callback:propertyName:t,win:r})})})(Ft({win:t,propertyName:r},e)),waitUntil:e=>(e=>{let{propertyName:t,win:r,comparator:n}=e;return new Promise(e=>{vc({propertyName:t,win:r,callback:)})})(Ft({win:t,propertyName:r},e)),clear:e=>yc(Ft({win:t,propertyName:r},e))}};Ec({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class _c{get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}onstructor(){this._isDestroyed=!1,this.destroyHandlers=[],this._destroyReason=void 0}c.errorHandlers=[];const Sc={position:"absolute",width:"100%",height:"100%",top:"0",left:"0"},bc=Vt({},Sc,{overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none"}),Rc=Vt({},Sc,{backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"});class Ac extends _c{constructor(e){let{container:t,onReady:r=rn.Z,src:n,style:i}=e;super(),this.container=void 0,this.background=void 0,this.src=void 0,this.style=void 0,this.onReady=void 0,this.src=n,this.style=i,this.onReady=(0,Rr.I)(r),this.container=document.createElement("div"),this.src?this.setPoster(this.src):O(this.container,{opacity:"0"}),this.addDestroyHandler(()=>{m(this.container),this.onReady=rn.Z}),t.appendChild(this.container)}setPoster(e){if(this.isDestroyed)return;if(!e)return void this.onReady();this.src=e,O(this.container,Vt({},bc,{opacity:"1"}));const t={backgroundImage:"url("+this.src+")"};this.initBackground(t)}setStyle(e){this.isDestroyed||(this.style=e,this.background&&e&&O(this.background,Vt({},e.objectFit?{backgroundSize:e.objectFit}:{})))}async initBackground(e){var t;null==(t=this.background)||t.remove();const r=this.background=document.createElement("div");O(r,Rc),this.setStyle(this.style);const n=Se(this.src);mc&&await n,O(r,e),this.container.appendChild(r),n.then(()=>this.onReady()).catch(rn.Z)}}const Tc=Pc="http://www.w3.org/2000/svg",Ic="classList"in document.documentElement,Oc=Tc(e=>e.classList&&e.classList.add,un.E),Cc=(Tc(un.E),(()),wc=kc=Cc?var Nc=e(856),Dc=e.n(Nc);const Lc=e(310),xc=e(7792),Mc=(0,Rr.I)(,Fc={display:"flex",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",padding:"20px",color:"#fff",fontSize:"24px",textAlign:"center",justifyContent:"center",alignItems:"center"},Vc=[ln.SourceChange,ln.DrmSystemChange,ln.StreamChange,ln.StartStageChange,ln.PlayingStateChange,ln.VideoTypeChange,ln.UtcStartTimeChange,ln.CurrentTimeChange,ln.WatchedTimeChange,ln.LiveLatencyChange,ln.DurationChange,ln.DVRStartTimeChange,ln.DVRDurationChange,ln.VolumeChange,ln.MutedChange,ln.VolumeChangeReasonChange,ln.FullscreenStateChange,ln.PictureInPictureStateChange,ln.VisibleStateChange,ln.VideoSizeChange,ln.VideoTracksChange,ln.VideoTrackChange,ln.AudioTracksChange,ln.AudioTrackChange,ln.TextTracksChange,ln.TextTrackChange,ln.SubtitlesChange,ln.ErrorChange,ln.PlaybackRateRangeChange,ln.PlaybackRateChange,ln.AdStateChange,ln.NextAdRemainingTimeChange,ln.BufferedRangesChange,ln.TileMetaInfoChange,ln.TileMetaInfoUrlChange,ln.ConnectionQualityChange,ln.AdPodDurationChange,ln.AdPodCurrentTimeChange,ln.AdPodTimeToSkipChange,ln.AdSkippableStateChange,ln.AdPodCloseStateChange,ln.AdVolumeAvailabilityStateChange,ln.UgcLiveStatusChange];onst jc=["object"===typeof document&&document&&"onfreeze"in document?"pagehide":"beforeunload","unload"];var Bc=e(8427);var Yc=e(4678),Gc=e.n(Yc);const qc="<none>",Kc=e=>e>=1e6?Qt(e/1e6)+" Mbit/s":e>=1e3?Qt(e/1e3)+" Kbit/s":Qt(e)+" bit/s",Wc=e=>void 0===e?qc:Kc(e.value)+" ("+e.source+")";class Hc extends _c{constructor(e){super(),this.props=e,this.root=document.createElement("div"),this.visible=!1,this.updateInterval=void 0,this.bandwidthEstimate=void 0,this.engine=void 0,this.framesInfo={shownFrames:0,droppedFrames:0,renderedShownFrames:0,renderedDroppedFrames:0},this.anyPerf=performance,this.container=void 0,this.graphs=void 0,this.memoryGraph=void 0,this.graphsUpdateInterval=null,this.abcIds=new Map,this.nodes=void 0,this.initialRender=(0,Rr.I)(()=>{const{vsid:e}=this.props.getState();O(this.root,{position:"absolute",top:"10px",left:"10px",marginRight:"10px",padding:"5px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#fff",fontFamily:"monospace",fontSize:"10px",lineBreak:"anywhere",whiteSpace:"pre-line",lineHeight:"9px",pointerEvents:"none",zIndex:"2"});const t=document.createElement("img");t.src=function(e){return"https://barcode.yandex.net/qrcode/"+e+".png"}(e),Yt(t,Gc().debugPanelQrcode);const r=document.createElement("div");Yt(r,Gc().debugPanelContainer),this.nodes={vsid:tr(r,"vsid"),time:tr(r,"time"),additionalInfo:tr(r,"info"),source:tr(r,"source"),timeline:tr(r,"timeline"),abcID:tr(r,"abcID"),drm:tr(r,"drm"),state:tr(r,"state"),viewport:tr(r,"viewport"),videoTrack:tr(r,"video"),audioTrack:tr(r,"audio"),error:tr(r,"error"),buffer:tr(r,"buffer"),bandwidth:tr(r,"bandwidth"),frames:tr(r,"frames")},this.nodes.vsid.textContent=e,this.root.appendChild(r),this.props.container.appendChild(this.root);const n=document.createElement("button");n.innerText="[x]",O(n,{border:"none",background:"none",color:"white",padding:"2px",cursor:"pointer",position:"absolute",top:"3px",left:"3px",pointerEvents:"auto"}),this.root.appendChild(n),n.addEventListener("click",,this.container=r,r.appendChild(t),this.initGraphsUpdating()}),this.anyPerf.memory&&(this.memoryGraph=Jt({index:0,data:new Array(60).fill(0),min:1/0,max:0,currentValue:$t(0)},er()));const t=new Array(60);for(let r=0;r<t.length;r++)t[r]={shownFrames:0,droppedFrames:0};this.graphs={buffer:Jt({index:0,data:new Array(60).fill(0),currentValue:"0"},er()),bandwidth:Jt({index:0,data:new Array(60).fill(0),currentValue:Wc(this.bandwidthEstimate)},er()),frames:Jt({index:0,data:t,currentValue:{shownFrames:0,droppedFrames:0}},er())}}setVisibility(e){if(this.visible!==e){if(this.visible=e,e)return this.initialRender(),this.update(),O(this.root,{display:"block"}),void(this.updateInterval=setInterval(()=>this.update(),1e3));O(this.root,{display:"none"}),void 0===this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=void 0)}}onEngineChange(e){this.engine=e,this.update()}enderTimeline(){const{currentTime:e,duration:t,videoType:r,liveLatency:n}=this.props.getState(),i=void 0===n?"":", latency "+Qt(n),a=void 0===r?"":" ("+r+i+")";return Qt(e)+"/"+Qt(t)+a}renderVideoTrack(){const{videoTrack:e,videoSize:t}=this.props.getState();if(void 0===e)return void 0===t?qc:t.videoWidth+"x"+t.videoHeight;let{width:r,height:n,bitrate:i,value:a,auto:o}=e;if(_e(a)&&(a=(0,wo.en)(a).pathname.split("/").pop()||a),void 0===r||void 0===n){if(void 0===t)return a;r=t.videoWidth,n=t.videoHeight}return r+"x"+n+" "+Kc(1e3*i)+" ("+a+") [AUTO: "+o+"]"}renderAudioTrack(){const{audioTrack:e}=this.props.getState();if(void 0===e)return qc;const{value:t,bitrate:r,lang:n}=e,i=(n+" "+(void 0===r?"":Kc(1e3*r))+" ("+t+")").trim();return i.length>0?i:qc}renderDrmSystem(){var e;return null!=(e=this.props.getState().drmSystem)?e:"<unknown>"}renderViewport(){let{width:e,height:t}=this.props.container.getBoundingClientRect();return e*=devicePixelRatio,t*=devicePixelRatio,Math.round(e)+"x"+Math.round(t)}renderSource(){var e,t;const r=null!=(e=null==(t=this.props.getState().source)?void 0:t.params.videoInfo.videoContentId)?e:"<unknown content id>",n=this.props.getSourceId(),{watchedTime:i}=this.props.getState();return r+" "+(a(n)?"#"+n:"#-")+(void 0===this.engine?"":", "+this.engine)+" (watched "+Qt(i)+")"}getAbcID(e){var t;if(!e)return"";if(this.abcIds.has(e))return this.abcIds.get(e);const[,r]=null!=(t=e.match(/abcID=(\d+)/))?t:[];return r?(this.abcIds.set(e,r),this.clearAbcIdsMap(10),r):""}renderAbcID(){var e;const t=null==(e=this.props.getState().stream)?void 0:e.url;return this.getAbcID(t)||"unknown"}renderAdditionalInfo(){const{from:e,from_block:t,stream_block:r}=this.props.getAdditionalParams();return"[from: "+e+"; from_block: "+(t||"unknown")+"; stream_block: "+(r||"unknown")+"]"}clearAbcIdsMap(e){if(this.abcIds.size<e)return;const t=this.abcIds.keys();for(let r=0;r<e/2;r++)this.abcIds.delete(t.next().value)}update(){var e;this.visible&&!this.isDestroyed&&(this.nodes.time.textContent=String(new Date),this.nodes.source.textContent=this.renderSource(),this.nodes.state.textContent=this.props.getState().playingState,this.nodes.timeline.textContent=this.renderTimeline(),this.nodes.viewport.textContent=this.renderViewport(),this.nodes.videoTrack.textContent=this.renderVideoTrack(),this.nodes.audioTrack.textContent=this.renderAudioTrack(),this.nodes.drm.textContent=this.renderDrmSystem(),this.nodes.additionalInfo.textContent=this.renderAdditionalInfo(),this.nodes.abcID.textContent=this.renderAbcID(),this.nodes.error.textContent=(null==(e=this.props.getState().error)?void 0:e.message)||"<none>")}destroy(){super.destroy(),this.root)}onFramesInfoChange(e){const t=e.shownFrames-this.framesInfo.renderedShownFrames,r=e.droppedFrames-this.framesInfo.renderedDroppedFrames;t<0?(this.framesInfo.shownFrames=e.shownFrames,this.framesInfo.renderedShownFrames=0):this.framesInfo.shownFrames=t,r<0?(this.framesInfo.droppedFrames=e.droppedFrames,this.framesInfo.renderedDroppedFrames=0):this.framesInfo.droppedFrames=r}initGraphsUpdating(){this.graphsUpdateInterval||(this.graphsUpdateInterval=setInterval(()=>{var e,t;const r=this.props.getState(),n=1.5*(null==(e=r.videoTracks[0])?void 0:e.bitrate)*1e3||void 0;this.addGraphData("buffer",zt(r.bufferedRanges,r.currentTime)||0,"rgba(0,255,255,0.2)"),this.addGraphData("bandwidth",(null==(t=this.bandwidthEstimate)?void 0:t.value)||0,"rgba(255,255,0, 0.2)",n),this.addFramesDataToGraph(),this.addMemoryGraphData(),this.renderGraph(this.nodes.buffer,this.graphs.buffer),this.renderGraph(this.nodes.bandwidth,this.graphs.bandwidth),this.renderGraph(this.nodes.frames,this.graphs.frames),this.renderMemoryGraph()},500))}renderMemoryGraph(){this.memoryGraph&&this.container&&(this.memoryGraph.parentNode||(this.memoryGraph.parentNode=tr(this.container,"memory")),this.renderGraph(this.memoryGraph.parentNode,this.memoryGraph))}addMemoryGraphData(){if(!this.memoryGraph)return;const{usedJSHeapSize:e}=this.anyPerf.memory;this.memoryGraph.max=Math.max(this.memoryGraph.max,e),this.memoryGraph.min=Math.min(this.memoryGraph.min,e),this.memoryGraph.currentValue=$t(e);const{index:t,data:r}=this.memoryGraph;r[t]=e,this.memoryGraph.index=(t+1)%r.length,this.drawMemoryGraph()}drawMemoryGraph(){if(!this.memoryGraph)return;const{index:e,data:t,canvas:r,max:n,min:i}=this.memoryGraph;if(!r)return;const a=r.getContext("2d");if(!a)return;const{width:o,height:s}=r,l=o/t.length,c=n-i;a.clearRect(0,0,o,s),t.forEach((t,r)=>{const n=r*l;if(t>0){const e=(t-i)/c*s,r=s-e;a.fillStyle="rgba(255,0,255,0.2)",a.fillRect(n,r,l,e)}r===e&&this.drawDivider(a,s,n)})}renderGraph(e,t){if(!e)return;const{currentValue:r,span:n,wrapper:i}=t;n.textContent="string"===typeof r?r:r.shownFrames+" fps | "+r.droppedFrames+" fps drop",e.appendChild(i)}drawSimpleGraph(e,t,r){if(!this.graphsUpdateInterval)return;const{index:n,data:i,canvas:a}=this.graphs[e];if(!a)return;const o=a.getContext("2d");if(!o)return;o.fillStyle=t;const{width:s,height:l}=a,c=s/i.length,d=null!=r?r:Math.max(...i);o.clearRect(0,0,s,l),i.forEach((e,t)=>{const r=t*c,i=e/d*l,a=l-i;o.fillRect(r,a,c,i),t===n&&this.drawDivider(o,l,r)})}addGraphData(e,t,r,n){const{index:i,data:a}=this.graphs[e];a[i]=t,this.graphs[e].currentValue="bandwidth"===e?Wc(this.bandwidthEstimate):t.toFixed(2)+" Sec",this.graphs[e].index=(i+1)%a.length,this.drawSimpleGraph(e,r,n)}addFramesDataToGraph(){const{data:e,index:t}=this.graphs.frames,{shownFrames:r,droppedFrames:n}=this.framesInfo;e[t]={shownFrames:r,droppedFrames:n},this.framesInfo.renderedDroppedFrames+=n,this.framesInfo.renderedShownFrames+=r,this.framesInfo.shownFrames-=r,this.framesInfo.droppedFrames-=n,this.graphs.frames.index=(t+1)%e.length,this.graphs.frames.currentValue=function(e,t){const r=0===e?t.length-1:e-1;let n=0,i=0,a=(e-10+60)%60;for(;a!==r;)n+=t[a].shownFrames,i+=t[a].droppedFrames,a=a===t.length-1?0:a+1;return{shownFrames:Math.round(n/5),droppedFrames:Math.round(i/5)}}(this.graphs.frames.index,this.graphs.frames.data),this.drawFramesGraph()}drawFramesGraph(){if(!this.graphsUpdateInterval)return;const{index:e,data:t,canvas:r}=this.graphs.frames;if(!r)return;const n=r.getContext("2d");if(!n)return;const{width:i,height:a}=r,o=i/t.length,s=Math.max(...t.map();n.clearRect(0,0,i,a);for(let l=0;l<t.length;l++){const r=t[l],i=r.shownFrames/s*a,c=r.droppedFrames/s*a,d=l*o,u=a-i,h=u-c;n.fillStyle="rgba(56,237,56,0.2)",n.fillRect(d,u,o,i),n.fillStyle="rgba(255,0,0,0.2)",n.fillRect(d,h,o,c),l===e&&this.drawDivider(n,a,d)}}drawDivider(e,t,r){e.strokeStyle="blue",e.lineWidth=2,e.beginPath(),e.moveTo(r,0),e.lineTo(r,t),e.stroke()}}ar Xc=e(2724);const zc={no_licenses:{message:"ACCESS_ERROR_NO_LICENSE",code:151},invalid_region:{message:"ACCESS_ERROR_INVALID_REGION",code:153},old_browser:{message:"ACCESS_ERROR_OLD_BROWSER",code:5},future_vod_release:{message:"ACCESS_ERROR_FUTURE_VOD_RELEASE",code:100},access_denied:{message:"ACCESS_DENIED",code:100},unexpected:{message:"ACCESS_ERROR_UNEXPECTED",code:100},unsupported_browser:{message:"ACCESS_ERROR_UNSUPPORTED_BROWSER",code:412},not_found:{message:"ACCESS_ERROR_NOT_FOUND",code:404},video_processing:{message:"VIDEO_PROCESSING",code:100},video_processing_failed:{message:"VIDEO_PROCESSING_FAILED",code:100}};(function(e){const t=Object.values;if("function"===typeof t)return t(e);const r=[];for(const n in e)(0,Xo.n)(e,n)&&r.push(e[n]);return r})(zc).map(;var Jc=e(7542);class Qc extends Zc{constructor(e){super(),this.params=e,this.destroyed=!1,this.requestSourceConfigTimeout=void 0,this.currentPoster=void 0,this.currentUgcLiveStatus=void 0,this.releaseDate=void 0,this.releaseDate=(()=>{var t,r,n;const i=parseInt(String(null==(t=this.params.queryParams)?void 0:t.release_timeout),10);if(i)return Date.now()/1e3+i;const a=parseInt((null==(r=e.vhParams)||null==(n=r.content)?void 0:n.release_date)||"",10)||void 0;return void 0!==a&&Date.now()/1e3<a?a:void 0})(),this.once("Destroy",()=>{this.destroyed=!0,window.clearTimeout(this.requestSourceConfigTimeout),void 0!==this.currentUgcLiveStatus&&(this.currentUgcLiveStatus=void 0,this.emit("UgcLiveStatusChange",void 0))}),Promise.resolve().then(()=>{this.start()})}async start(){if(this.params.vhParams){var e;const t=new Jc.y(this.params.queryParams,this.params.playerApi),r=await t.getPlayerConfig(this.params.vhParams);this.handleVhAnswer({vhParams:this.params.vhParams,sourceConfig:r.source,skinConfig:(null==(e=r.skinParams)?void 0:e.skinConfig)||{},autoplay:r.autoplay})}else await this.run()}async run(){try{await this.requestSourceConfig()}catch(e){this.emit("Error",new Xr({code:Lr.REQUEST_SOURCE_ERROR,isFatal:!1}))}}async requestSourceConfig(){const e=this.getContentId();if(this.destroyed||!e)return;const{sourceConfig:t,vhParams:r,skinConfig:n,playerConfig:i}=await(0,Xc.s6)(e,this.params.queryParams);if(this.destroyed)return;const{autoplay:a}=i;this.handleVhAnswer({vhParams:r,sourceConfig:t,skinConfig:n,autoplay:a})}handleVhAnswer(e){var t,r;let{sourceConfig:n,skinConfig:i,vhParams:a,autoplay:o}=e;const s=function(e){if(void 0!==e)return e.error?zc[e.error]||zc.unexpected:void 0===e.content?zc.not_found:void 0}(a);if(s)return this.requestSetPoster(null==n?void 0:n.preview),this.emit("ShowAnnotation",s.message),void this.emit("Error",new Xr({code:String(s.code),message:s.message,details:{isVhError:!0},isFatal:!1}));this.releaseDate&&Date.now()/1e3<this.releaseDate?this.handleVhAnswerForReleaseDate({sourceConfig:n,releaseDate:this.releaseDate}):null!=(t=a.content)&&t.ugc_live?this.handleVhAnswerForUgc({sourceConfig:n,skinConfig:i,autoplay:o,vhParamsContent:a.content}):this.requestSetSource({sourceConfig:n,skinConfig:i,autoplay:o,externalPlayerConfig:null==(r=a.content)?void 0:r.yastation_cast_cfg})}handleVhAnswerForUgc(e){let{sourceConfig:t,skinConfig:r,vhParamsContent:n,autoplay:i}=e;const{ugc_live_status:a,reload_on_ready:o}=n;if(this.currentUgcLiveStatus!==a&&(this.currentUgcLiveStatus=a,this.emit("UgcLiveStatusChange",this.currentUgcLiveStatus)),"onair"===a||"finished"===a||"ready"===a&&o)return void this.requestSetSource({sourceConfig:t,skinConfig:r,autoplay:i,externalPlayerConfig:n.yastation_cast_cfg});let s;this.requestSetPoster(t.preview),"cancelled"===a?s="UGC_LIVE_CANCELLED":("offline"===a||"ready"===a&&!o)&&(s="UGC_LIVE_OFFLINE"),void 0!==s&&this.emit("ShowAnnotation",s),window.clearTimeout(this.requestSourceConfigTimeout);const l=Math.max(n.auto_reload_ms||6e4,5e3);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),l)}handleVhAnswerForReleaseDate(e){let{releaseDate:t,sourceConfig:r}=e;this.requestSetPoster(r.preview),this.emit("ShowAnnotation","UGC_LIVE_OFFLINE"),window.clearTimeout(this.requestSourceConfigTimeout);const n=1e3*Math.max(t-Date.now()/1e3,0);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),n)}requestSetSource(e){this.setupUpdateRetriesCount(e.sourceConfig),this.emit("SetSource",e)}etContentId(){var e,t;return this.params.contentId||(null==(e=this.params.vhParams)||null==(t=e.content)?void 0:t.content_id)}setupUpdateRetriesCount(e){const t=e.update,{playerApi:r}=this.params;if(!t||!r)return;let n=0;const i=async()=>{if(1<=n)return;n+=1;const e=await t();return e?(e.update=i,e):void 0};e.update=i;const a=r.on(ln.ContentImpression,a),this.once("Destroy",()=>{r.off(ln.ContentImpression,a)})}}let $c=);Ec({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});const ed=ir(),td=Math.floor(5),rd=Math.floor(20),nd=(()=>{const e=sr();return void 0===e||e.includes("encrypted-media")})();var id=e(8875),ad=e(9026);const od=["contentId"],sd=["contentId"],ld=(0,Bc.x)(window);class cd extends lc.h{tDebugConfig(){return this.debug}constructor(e){var t,r,n;if(super(e),this.skin=void 0,this.container=void 0,this.vhHelper=void 0,this.loadIframeDeferred=new pl.B,this.performOnIframeLoad=function(e){onst r=[];let n,i,a=!1,o=!1;return e.then(e=>{n=e,a=!0,t()}),e.catch(,function(e,t){if(void 0===t&&(t=rn.Z),o)t(i);else if(!a||r.length>0)r.push({task:e,onPromiseReject:t});else try{e(n)}catch(s){}}}(this.loadIframeDeferred.promise),this.isIframeLoaded=!1,this.playingStateSynchronization=Wt(),this.iframe=void 0,this.playerNode=void 0,this.postMessenger=void 0,this.visiblePlaybackController=void 0,this.getSourceConfigForRecover=()=>{},this.completeInitAfterGettingSourceConfig=void 0,this.store=void 0,this.errorScreen=void 0,this.preloadSkin=void 0,this.reportConfig=void 0,this.additionalParams=void 0,this.setSourceDeferred=void 0,this.telemetry=void 0,this.resourceTimingsMonitor=void 0,this.playerAliveData={bandwidthEstimate:0},this.playerTracker=void 0,this.setSourceStage=hi.LOADING,this.sourceIdSignal=new Yn(NaN,,this.debugPanel=void 0,this.externalPlaybackCsrfToken=void 0,this.externalPlaybackTokenExpireTimeout=void 0,this.playerApiSourceConfig=void 0,this.loggingForExternalToolsAllowed=void 0,this.isReady=!1,this.debug={logCalls:!1,logEvents:!1,logInternals:!1,showDebugPanel:!1},this.destroyed=!1,this.config=void 0,this.sourceIndex=0,this.readyPendingEvents=[],this.nextPreloadRequestId=0,this.loadComponents=(0,Rr.I)(()=>{return S({src:(e=dn.i18nLang,R("components_"+e+(os?".modern":"")+".js",parseInt("1.0-11279".slice(4),10),!1)),retries:3,dropCacheOnRetry:!0,onBeforeLoad:checkLoad:()=>(0,cn.m)(dn.initErrorScreen)}).catch(e=>{const t=new Xr(e).toJSON(),r=new Xr(cr({},t,{details:{errorDetails:t.details},code:Lr.ERROR_SCREEN_LOAD_ERROR,isFatal:!1}));throw this.emitError(r,ze(Je(document))),r});var e}),this.sendReportToTelemetry=async e=>{var t;let{reportId:r,reported:n}=e;const i=this.isReady?await this.requestDebugInfo():{vsid:this.additionalParams.vsid,version:"1.0-11279",clientTimestamp:Date.now(),streamUrl:null==(t=this.getState().stream)?void 0:t.url,system:st(),playerApiState:this.getState()};!{reportId:r,reported:n,telemetry:this.telemetry,reportData:i})},!(0,Hr.K)(e))throw new Xr("Params is not an object");(0,mi.Vc)(e);const i=e;i.useNativeAdControls=!0;const a=function(e,t){if(3!==t.length)throw new Error("playerType should contains exact 3 symbols");return[Ke(44),t,He(e),We(Date.now().toString().slice(0,10),10,"0")].join("x")}(11279,"WEB"),o=(0,Gr.Y)(()=>{var e;const t=null==i||null==(e=i.source.additionalParams)?void 0:e.from;return t&&(0,qr.H)(t)?t:void 0})||Oo;this.additionalParams={vsid:a,from:o};const l=void 0!==i.vhParams,c=(0,cn.m)(ld),d={vsid:a,version:"1.0-11279",service:"StreamPlayer",isVideoADB:c},u=(h=e.logUrl,!(0,qr.H)(h)||h.startsWith("https://"));var h;const f=u?e.logUrl:void 0;this.telemetry=new dl({playerInfo:d,sendLog:(e,t)=>{const r=p(e);if(!r)return;const n=((0,qr.H)(f)?f:void 0)||(c?ar():ed);be({url:n===ed?(0,wo.Sr)(ed,t):n,data:r})},getState:()=>{const e=this.getState();if(!e)return;const t=e.audioTrack,r=e.videoTrack,n=e.videoTracks.map(e=>cr({},e,{selected:(null==r?void 0:r.value)===e.value,auto:Boolean(null==r?void 0:r.auto)})),i={total:zt(e.bufferedRanges,e.currentTime)||0};return cr({},e,this.playerAliveData,{videoTracks:n,remainingBufferedTime:i,audioTrack:t})}}),this.telemetry.setStaticParams({from:o});const g=(0,qr.H)(e.perfLogUrl)?e.perfLogUrl:"https://log.strm.yandex.ru/perf";this.resourceTimingsMonitor=new il({sendLog:(e,t)=>{const r=p(e);r&&be({url:(0,wo.Sr)(g,t),data:r})}}),this.resourceTimingsMonitor.attach(window),function(e){let{vsid:t}=e;Se((0,wo.Sr)("https://mc.yandex.ru/watch/37773110",{vsid:t}))}({vsid:a});const y=e=>{let{watchedTime:t}=e;t>0&&(this.off(ln.WatchedTimeChange,y),(0,Gr.Y)(()=>function(e){let{vsid:t}=e;return Se((0,wo.Sr)("https://mc.yandex.ru/watch/37773110",{vsid:t,"page-url":"goal://"+window.location.hostname+"/start"}))}({vsid:a}),Me))};this.on(ln.WatchedTimeChange,y),this.container=(()=>{try{return e)}catch(t){const e=Xr.from(t,{code:Lr.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER,isFatal:!0});throw this.emitError(e,ze(Je(document))),e}})(),this.savePlayerAliveData({containerHeight:this.container.clientHeight*devicePixelRatio,containerWidth:this.container.clientWidth*devicePixelRatio});const v=(()=>{try{return function(e){if(!(0,Hr.K)(e))throw new Xr("paramsObject must be an object");return ro.parse(e.lang)}(e)}catch(t){const e=Xr.from(t,{code:Lr.INVALID_CONFIG_LANG_IN_CREATE_PLAYER,isFatal:!1});return this.emitError(e,ze(Je(document))),"ru"}})();if(dn.i18nLang=v,this.initErrorScreen(),!u){const t=new Xr({code:Lr.INVALID_LOG_URL,isFatal:!0,details:{logUrl:e.logUrl}});throw this.emitError(t),t}var E,_;this.prepareContainerNode(),this.playerNode=this.createPlayerNode(),E=this.container,_=this.playerNode,E.firstChild?E.insertBefore(_,E.firstChild):E.appendChild(_);const b=(()=>{try{return function(e){return Io.parse(e)}(e)}catch(t){const r=Xr.from(t),n=new Xr(cr({},r,{details:{errorDetails:r.details,config:(0,Gr.Y)(()=>p(e))||"UNSERIALIZABLE"},code:Lr.INVALID_CONFIG_IN_CREATE_PLAYER,isFatal:!0}));throw this.emitError(n,ze(Je(document))),Me(t),Me(n),n}})();this.config=cr({},b,{vsid:a}),b.objectFit&&this.setVideoStyle({objectFit:b.objectFit}),this.store=this.initPlayerStore({config:b,vsid:a}),(0,mi.RW)("web_stop_other_players")&&this.initOnlyOnePlayingUnmutePlayerControl();const A=(t,r)=>{try{return me(t,this.config,this.sourceIndex)}catch(n){if(r)return;const t=Xr.from(n),i=new Xr(cr({},t,{details:{errorDetails:t.details,config:(0,Gr.Y)(()=>p(e))||"UNSERIALIZABLE"},code:Lr.INVALID_CONFIG_IN_CREATE_PLAYER,isFatal:!0}));throw this.emitError(i,ze(Je(document))),Me(n),Me(i),i}},T=(()=>{try{return A(i.source,l)}catch(_d){return}})();this.once(ln.Destroy,),this.reportConfig=b.reportConfig,this.debug=b.debugConfig,this.initPlaybackTracking(),this.playerTracker=this.initPlayerTracker(),this.once(ln.Destroy,()=>this.playerTracker.destroy());const P=this.iframe=ut({vsid:a,container:this.playerNode});this.resourceTimingsMonitor.attach(this.iframe.contentWindow),this.once(ln.Destroy,()=>this.resourceTimingsMonitor.destroy());const I=this.postMessenger=this.initPostMessenger();var O,C;(this.once(ln.Destroy,()=>this.postMessenger.destroy()),this.subscribeExternalFullscreenChange(this.container),this.once(ln.Destroy,,b.savedMutedRestored&&this.emit(ln.VolumeChangeReasonChange,{volumeChangeReason:ii.RestoreSavedMuted}),this.on(ln.VolumeChangeReasonChange,,this.once(ln.Ready,,T&&(T.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(T.source.params.additionalParams),this.additionalParams=T.source.params.additionalParams,this.applySourceInfoToTelemetry(T)),this.telemetry.setStaticParams({device:b.streamPlayerParams.device?b.streamPlayerParams.device:{}}),this.telemetry.enableRemoteProgressSaving(Xt(this.playerApiSourceConfig)),this.telemetry.logEvent({name:"CreatePlayer",data:cr({},e,{element:void 0,v2:!0,preferHd:nr(o||void 0)}),extraRootFields:ze(Je(document))}),this.on(ln.Ready,,this.visiblePlaybackController=this.initVisiblePlaybackController(b.streamPlayerParams.togglePlaybackOnVisibilityChange,b.streamPlayerParams.autoplay),this.loggingForExternalToolsAllowed=void 0===e.loadSkin,this.preloadSkin=this.initPreloadSkin(b),T)&&(null==(O=this.preloadSkin)||O.setPoster(T.source.params.preview),null==(C=this.preloadSkin)||C.setStyle(T.source.params.posterStyle));!this),this.setFiltersForSourceRelatedEvents();try{this.debugPanel=this.initDebugPanel()}catch(L){}let w;this.once(ln.Destroy,;let k=if(this.postMessenger.on("Command",e=>{e.commandName===Cl.getConfig&&e.sendAnswer(k())}),this.completeInitAfterGettingSourceConfig=(e,t)=>{var r,n;if(this.playerApiSourceConfig||this.destroyed)return;const{source:o}=e;this.playerApiSourceConfig=e,this.emit(ln.SourceChange,{source:o}),null==(r=this.preloadSkin)||r.setPoster(o.params.preview),null==(n=this.preloadSkin)||n.setStyle(o.params.posterStyle);const l=cr({},b.streamPlayerParams,{source:e.source});var c,d;void 0!==t&&(l.autoplay=!0===t||(0,Hr.K)(t),l.allowMuted=!0===t||t&&t.allowMuted),k=()=>l,this.playerTracker.setTrackings(e.trackings),this.telemetry.startInitBufferingTimer(),this.telemetry.setExternalStalledDuration(l.source.externalStalledDuration||Nr()-Math.min(i.timeLoaderInit||1/0,Sr.timeAPIInit||1/0)),function(e,t){try{s(e.contentWindow).initialStreamPlayerParams=t}catch(r){console.warn&&console.warn(r)}}(P,l),c={from:l.source.params.additionalParams.from,slots:l.source.params.additionalParams.slots,project:"video-player",version:"1.0-11279",yandexuid:ad.h,yandex_login:(0,In.e)(document,"yandex_login")},P.contentDocument&&(null==(d=w)||d.unsubscribe(),w=new ai.CSPLogger(c,{vsid:a}),w.subscribe(P.contentDocument)),o.params.additionalParams=this.addRequiredFieldsToAdditionalParams(o.params.additionalParams),this.additionalParams=o.params.additionalParams,this.applySourceInfoToTelemetry(e),async function(e){let{useAbdBundle:t,additionalParams:r,vsid:n,iframe:i,postMessenger:a,shouldRetry:o=(()=>!0),shouldLoadAdSdk:s,adConfig:l,flags:c,sendDelta:d}=e;const{from:u,reqid:h,slots:p}=r;return await gt({iframe:i,vsid:n,useAbdBundle:t,from:u,reqid:h,slots:p,shouldLoadAdSdk:s,adConfig:l,flags:c,sendDelta:d}),1}({useAbdBundle:b.useAbdBundle,additionalParams:this.additionalParams,version:"1.0-11279",vsid:a,iframe:P,postMessenger:I,shouldLoadAdSdk:Zt({source:o}),adConfig:o.params.adConfig,shouldRetry:flags:(0,mi.II)(),sendDelta:).then(e=>{this.isIframeLoaded=!0,this.loadIframeDeferred.resolve(),e<=1||this.telemetry.logEvent({name:"IframeReloadSuccess",labels:{attempt:String(e)},data:{attempt:e}})}).catch(e=>{if(!D(this.container)){m(this.iframe);const e=new Xr({code:Lr.ELEMENT_NOT_IN_DOM,details:{tagName:this.container.tagName,id:this.container.id,className:this.container.className},isFatal:!1});throw this.emitError(e,ze(Je(document))),this.debug.logInternals&&console.warn("element does not present in DOM",this.container),this.emit(ln.ErrorChange,{error:new Xr("element does not present in DOM")}),this.destroy(),e}this.playerApiSourceConfig=void 0;const t=new Xr(e);throw this.emitError(t),t}),this.getSourceConfigForRecover=b.useFallbackStream?this.createSourceConfigForRecoverGetter(e):rn.Z},T&&void 0===T.source.contentId&&!l)return void this.completeInitAfterGettingSourceConfig(T,void 0);const N=this.initVhHelper({contentId:(null==T?void 0:T.source.contentId)||(null==(t=i.vhParams)||null==(r=t.content)?void 0:r.content_id),poster:null==T?void 0:T.source.params.preview,vhParams:i.vhParams,queryParams:null==(n=i.source)?void 0:n.queryParams});this.vhHelper=N,N.on("SetSource",e=>{let{sourceConfig:t,skinConfig:r,externalPlayerConfig:n,autoplay:a}=e;this.configureSkin(r,n);const o=lr(cr({},t,i.source),od);this.completeInitAfterGettingSourceConfig(A(o,!1),a)})}nReportWindow(){const{reportId:e,reported:t}=function(e,t){let{reportUrl:r}=e,{vsid:n,from:i=Oo}=t;const a=Ce(n),o={"form-logId":a,"form-from":i},s=function(e){switch(e){case"ott-kp":case"discovery":case"kinopoisk":return"10463870";case"disk":return"58127089";case"telemost":return"58141887";case"yavideo":case"ottwidget_ya-serp":case"serp":case"ya-market":case"ya-music":case"ya-music-android":case"quantum":case"vconf":return"10491213";case"partner":case"turbo":case"zen":case"yanews":case"yanewstragic":case"woman.ru":case"ru.tv":case"tvrain.ru":return"10491214";default:return}}(i);void 0!==s&&(o["form-from_group"]=s);const l=(0,wo.Sr)(r,o).substr(0,2048)+Ds;return{reportId:a,reported:null!==window.open(l,"_blank")}}(this.reportConfig,this.additionalParams);this.sendReportToTelemetry({reportId:e,reported:t})}play(e){void 0===e&&(e=ti.l.ExternalApi);const{error:t,playingState:r}=this.getState();if(null!=t&&t.isFatal)return Promise.reject();this.emit(ln.RequestPlayingState,{playingState:en.X.PLAY,playingStateReason:e}),(!this.config.streamPlayerParams.autoplay&&this.telemetry.getExpectedStalled().reason===qs.Init||r===en.X.PAUSE&&this.telemetry.getExpectedStalled().reason===qs.SetSource)&&this.emit(ln.RequestPlayingState,{playingState:en.X.BUFFERING,playingStateReason:ti.l.Unknown});const n=new Promise(;return n.catch(()=>{this.emit(ln.RequestPlayingState,{playingState:en.X.PAUSE,playingStateReason:ti.l.PlayRejected})}),this.playingStateSynchronization.addLock(n)}pause(e){void 0===e&&(e=ti.l.ExternalApi),this.emit(ln.RequestPlayingState,{playingState:en.X.PAUSE,playingStateReason:e}),this.performOnIframeLoad(}seek(e){this.postMessenger.sendCommand(Cl.seek,e)}setDebugPanelVisibility(e){var t;this.debug.showDebugPanel=e,null==(t=this.debugPanel)||t.setVisibility(e)}async requestDebugInfo(){var e;return cr({},await this.postMessenger.sendRequest(Cl.requestDebugInfo,void 0),{playerApiState:this.getState(),streamUrl:null==(e=this.getState().stream)?void 0:e.url})}sync requestExternalPlayerList(e){let{currentPlayerListLength:t}=e,r=!1;await this.requestExternalCsrfToken();try{if(0===t){r=!0,this.logEventInternal(ei.ExternalPlaybackPlayerListFetching,{cachedList:r});const e=await yl();if(this.logEventInternal(ei.ExternalPlaybackPlayerListFetchSuccess,{cachedList:r}),!e.length)return[];this.logEventInternal(ei.ExternalPlaybackPlayerListHasAnyDevice)}r=!1,this.logEventInternal(ei.ExternalPlaybackPlayerListFetching,{cachedList:r});const e=await vl();return this.logEventInternal(ei.ExternalPlaybackPlayerListFetchSuccess,{cachedList:r}),e.filter(e=>e.screen_capable).map(.sort(Qe)}catch(n){throw this.logEventInternal(ei.ExternalPlaybackPlayerListFetchError,{cachedList:r,status:(0,Hr.K)(n)?n.status:0}),n}}setVolume(e){this.postMessenger.sendCommand(Cl.setVolume,e)}setMuted(e){this.postMessenger.sendCommand(Cl.setMuted,e)}setVideoTrack(e){this.postMessenger.sendCommand(Cl.setVideoTrack,e)}setAudioTrack(e){this.postMessenger.sendCommand(Cl.setAudioTrack,e)}setTextTrack(e){this.postMessenger.sendCommand(Cl.setTextTrack,e)}changeAdditionalParams(e){((e),this.telemetry.flushStates(),this.additionalParams=cr({},this.additionalParams,e),this.telemetry.setStaticParams({additionalParameters:or(this.additionalParams)})}setNativeTextTrackVisibility(e){this.postMessenger.sendCommand(Cl.setNativeTextTrackVisibility,e)}setPlaybackRate(e){this.postMessenger.sendCommand(Cl.setPlaybackRate,e)}async setSource(e){var t,r,n;null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause of new #setSource()")),this.setSourceDeferred=new pl.B;const i=this.setSourceDeferred;x(i.promise),this.isReady||this.store.getState().error||await Promise.race([this.waitForEvent(ln.Ready),this.waitForEvent(ln.ErrorChange),i.promise]),null==(r=this.vhHelper)||r.destroy(),this.vhHelper=void 0,this.sourceIndex++;const a=e=>{try{return me(e,this.config,this.sourceIndex)}catch(t){const e=Xr.from(t,{code:Lr.INVALID_CONFIG_IN_SET_SOURCE,isFatal:!0});throw this.emitError(e),e}},o=a(e);this.emit(ln.ErrorChange,{error:void 0}),null==(n=this.errorScreen)||n.removeErrorMessage();const s=async e=>{if(this.telemetry.onSetSource(e,{streams:e.source.streams,params:e.source.params,externalStalledDuration:e.source.externalStalledDuration?e.source.externalStalledDuration/1e3:void 0},this.getTelemetryStaticParams(e)),this.telemetry.enableRemoteProgressSaving(Xt(e)),!ae(e.source))throw new Xr("setSource method receive a serializable object");if(void 0===this.playerApiSourceConfig)return this.completeInitAfterGettingSourceConfig(e,void 0),void await Promise.race([this.waitForEvent(ln.Ready),this.waitForEvent(ln.ErrorChange).then(e=>{let{error:t}=e;throw t})]);this.playerTracker.setTrackings(pe(e.trackings)),await this.setSourceInternal(e)};if(o.source.contentId){const t=this.initVhHelper({contentId:o.source.contentId,poster:o.source.params.preview,vhParams:void 0,queryParams:e.queryParams});return this.vhHelper=t,void t.on("SetSource",async t=>{var r;let{sourceConfig:n,skinConfig:i,externalPlayerConfig:o,autoplay:l}=t;this.configureSkin(cr({},void 0!==i.title?{title:i.title}:{}),o),null!=n&&n.additionalParams&&(n.additionalParams.from=this.additionalParams.from,n.additionalParams.from_block=this.additionalParams.from_block);const c=lr(cr({},n,e),sd);try{await s(a(c)),(!0===l||(0,Hr.K)(l))&&x(this.play()),await this.waitForPlay()}catch(d){}null==(r=this.preloadSkin)||r.setVisibility(!1)})}await Promise.race([s(o),i.promise])}async preloadSource(e,t){this.sourceIndex++;const{signal:r}=t||{},n=(()=>{try{return me(e,this.config,this.sourceIndex)}catch(t){return}})();if(void 0===n)return Promise.reject(new Error("source is invalid"));if(n.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(n.source.params.additionalParams),null!=r&&r.aborted)return Promise.reject(new Error("preload was aborted"));if(!ae(n))return console.warn("preloadSource: sourceConfig is not serializable"),Promise.reject(new Error("sourceConfig is not serializable"));const i=String(this.nextPreloadRequestId++),a=new Promise((e,t)=>{let n=rn.Z;const a=null==r||r.addEventListener("abort",a);const o=this.postMessenger.on("Event",o);const s=n=);return this.postMessenger.sendCommand(Cl.preloadSource,{sourceConfig:n.source,requestId:i}),a}async requestVideoElementFullscreen(){this.postMessenger.sendCommand(Cl.setFullscreen,!0)}tNativeAdControlsVisibility(e){this.postMessenger.sendCommand(Cl.setNativeAdControlsVisibility,e)}setPictureInPictureAllowed(e){this.postMessenger.sendCommand(Cl.setPictureInPictureEnabled,e)}setVideoStyle(e){this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(Cl.setVideoStyle,e)})}ync playAdViewers(e,t,r){if("inroll"===e&&!r)throw new Error("playAdViewers error: no cueId for inroll");const n=t.map(t=>({adViewer:t,additionalData:"inroll"===e?{cueId:r}:{},adType:e})),{success:i}=await this.postMessenger.sendRequest(Cl.playAdViewers,{adType:e,adViewers:n});if(!i)throw new Error("playAdViewers error")}gSkinDelta(e,t,r){this.loggingForExternalToolsAllowed&&this.postMessenger.sendCommand(Cl.logDelta,{deltaId:e,value:t,params:r})}logDeltasync insertInto(e){const{playingState:t}=this.getState();await this.postMessenger.sendRequest(Cl.stopAd,{});const r=this.container.querySelectorAll("video")).map(e=>function(e){const t=oi(e);return t?rn.Z}(e));e.appendChild(this.container),L(r),this.visiblePlaybackController.restartVisibilityObserver(),t!==en.X.PLAY&&t!==en.X.BUFFERING||this.play(ti.l.RestoreAfterInsertInto)}etContainer(){return this.container}async setSourceInternal(e,t){let{shouldSaveProgress:r=!1}=void 0===t?{}:t;const{source:n}=e;this.logEventInternal("SetSourceInternal",cr({},n,{shouldSaveProgress:r})),n.params.additionalParams=this.addRequiredFieldsToAdditionalParams(n.params.additionalParams),this.playerApiSourceConfig=e,this.updateStateForSetSource(n,{shouldSaveProgress:r});const i=this.waitForSetSourceComplete();this.setSourceStage=hi.LOADING,this.resetPlayerAliveData(),await this.postMessenger.sendRequest(Cl.setSource,{sourceConfig:n,shouldSaveProgress:r}),this.additionalParams=n.params.additionalParams,await i,this.playerTracker.onSetSourceComplete(n)}async destroyInternal(e){var t;this.destroyed||(this.destroyed=!0,this.telemetry.logEvent({name:"DestroyCalled",data:{message:e}}),this.emit(ln.StartStageChange,{startStage:Wn.destroyed}),null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause destroy player")),await this.destroyIFrame(e),m(this.playerNode),this.emit(ln.Destroy,{}),super.destroy(),this.telemetry.destroy({reason:e}))}initTrackChangeLogging(){let e=this.getState().videoTrack,t=this.getState().audioTrack,r=this.getState().textTrack;this.on(ln.VideoTrackChange,t=>{let{videoTrack:r}=t;const n=e;e=r,!(0,Hr.K)(n)||!(0,Hr.K)(r)||n.auto&&r.auto||n.value===r.value&&n.auto===r.auto||this.telemetry.logEvent({name:"SetVideoTrack",data:{previous:nt(n),next:nt(r)}})}),this.on(ln.AudioTrackChange,,this.on(ln.TextTrackChange,}initVisiblePlaybackController(e,t){const r=new sc(this);this.once(ln.Destroy,()=>{r.destroy()});const n=new oc({play:()=>{this.playingStateSynchronization.waitAndLock(},pause:()=>{this.playingStateSynchronization.waitAndLock(},togglePlaybackVisibilitySetting:e,autoplay:t,playerStateAdaptor:r,logEvent:),i=e=>{let{playingState:t,playingStateReason:r}=e;r!==ti.l.VisiblePlayback&&n.actualizeAutoplay(t===en.X.PLAY)};this.on(ln.RequestPlayingState,i),this.once(ln.WatchedTimeChange,()=>{this.off(ln.RequestPlayingState,i)}),this.once(ln.Destroy,()=>{n.destroy()});const a=new ac({element:this.container,togglePlaybackVisibilitySetting:e,playerStateAdaptor:r,playPauseController:n}),{isVisibilitySupported:o}=a.getVisualState();!function(e,t){try{s(e.contentWindow).isVisibilitySupported=t}catch(r){console.warn&&console.warn(r)}}(this.iframe,o),this.once(ln.Destroy,()=>{a.destroy()}),a.observeVisualState(e=>{!this.iframe,e.isElementVisible),this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(Cl.setExternalVisualState,{isVisible:e.isElementVisible})})}),this.postMessenger.on("Command",e=>{e.commandName===Cl.getExternalVisualState&&e.sendAnswer({isVisible:a.getVisualState().isElementVisible}),e.commandName===Cl.getIsVisibilitySupported&&e.sendAnswer({isVisibilitySupported:o})});const l=e=>{a.notifyFullScreen(e.isFullscreen)};this.on(ln.FullscreenStateChange,l),this.once(ln.Destroy,()=>{this.off(ln.FullscreenStateChange,l)});const c=return this.on(ln.PictureInPictureStateChange,c),this.once(ln.Destroy,,a}initErrorScreen(){this.once(ln.ResourcesIdle,this.loadComponents),this.on(ln.ErrorChange,async e=>{var t;let{error:r}=e;void 0!==r?rr(r)||(await this.loadComponents(),this.destroyed||(void 0===this.errorScreen&&(this.errorScreen=dn.initErrorScreen(cr({},this.additionalParams,{element:this.container,onReportClick:this.sendReportToTelemetry})),this.once(ln.Destroy,()=>this.errorScreen.destroy())),r=void 0===this.store?r:this.store.getState().error,void 0!==r&&(null==(t=this.postMessenger)||t.sendCommand(Cl.setPictureInPicture,!1),this.errorScreen.showErrorMessage(r.messageDetails||U(r))))):this.errorScreen&&this.errorScreen.changeVisibility(!1)})}addRequiredFieldsToAdditionalParams(e){return cr({},e,{vsid:this.additionalParams.vsid,from:e.from||this.additionalParams.from,puid:e.puid||this.additionalParams.puid,folder_id:e.folder_id||this.additionalParams.folder_id})}tPlayerStore(e){let{config:t,vsid:r}=e;return new Uc(cr({},ui,{volume:t.streamPlayerParams.volume,muted:t.streamPlayerParams.muted,vsid:r}),}initPostMessenger(){const e=new Dl({id:this.getState().vsid,receiver:window,sender:this.iframe.contentWindow,syncMode:!0});return e.on("Event",e=>{var t,r,n,i,a;if("onInitError"===e.eventName)return this.emitError(new Xr(e.data)),void(e.data.code===Lr.PLAYER_CONTAINER_NOT_FOUND&&this.destroyInternal(si.PlayerContainerNotFound));if(!this.isReady&&"onReady"!==e.eventName)return this.debug.logInternals&&console.warn("// not ready",e.eventName,e.data),void this.readyPendingEvents.push(e);const{sourceId:o}=e;this.sourceIdSignal.dispatch(o);const s=function(e){return xl[e]}(e.eventName),l=(e=>{let{eventName:t,data:r}=e;if("onError"!==t)return!1;try{return r=r,!!r.isFatal&&("string"===typeof r.details?JSON.parse(r.details).stage===ni.SET_SOURCE:r.details.stage===ni.SET_SOURCE)}catch(_d){return!1}})(e);if(this.setSourceStage!==hi.LOADING||!s||l)if(this.setSourceStage===hi.READY&&s&&o<this.sourceIdSignal.getValue())this.debug.logInternals&&console.warn("// skip public and internal "+e.eventName+" because of old source",e.eventName,e.data);else switch(e.eventName){case"onInit":break;case"onVideoTypeChange":this.emit(ln.VideoTypeChange,{videoType:e.data});break;case"onStateChange":const{playingState:o,reason:s}=e.data;this.getState().playingState!==o&&(this.emit(ln.PlayingStateChange,{playingState:o,playingStateReason:s}),this.telemetry.writePlayerAliveStateManually());break;case"onExpectedStalledChange":this.telemetry.onExpectedBuffering(e.data);break;case"onAdStateChange":const{nextAdState:l,prevAdState:c}=e.data;this.emit(ln.AdStateChange,{adState:l});c.state===ri.NOT_PLAYING&&l.state===ri.PLAYING&&this.telemetry.onAdStart({adType:l.type});c.state===ri.PLAYING&&l.state===ri.NOT_PLAYING&&this.telemetry.onAdEnd({adType:c.type});break;case"onBeforeAdPodStart":this.emit(ln.BeforeAdPodStart,e.data);break;case"onAdLoaded":this.playerTracker.onAdLoaded(e.data),this.emit(ln.AdLoaded,e.data);break;case"onAdError":this.playerTracker.onAdError(),this.emit(ln.AdError,e.data);break;case"onAdPodClick":this.playerTracker.onAdPodClick(),this.emit(ln.AdPodClick,{});break;case"onAdPodStart":const{adState:{type:d},source:{params:{adConfig:u={}}={}}={}}=this.getState();void 0!==d&&this.emit(ln.AdPodStart,{type:d,adConfig:u});break;case"onAdPodSkip":this.emit(ln.AdPodSkip,{});break;case"onAdPodEnd":this.emit(ln.AdPodEnd,{}),this.telemetry.onAdBetween({adType:this.getState().adState.type});break;case"onAdSkippableStateChange":this.emit(ln.AdSkippableStateChange,{adSkippableState:e.data});break;case"onAdVolumeAvailabilityStateChange":this.emit(ln.AdVolumeAvailabilityStateChange,{adVolumeAvailabilityState:e.data});break;case"onAdPodCloseStateChange":this.emit(ln.AdPodCloseStateChange,{adPodCloseState:e.data});break;case"onAdPodDurationChange":this.emit(ln.AdPodDurationChange,{adPodDuration:e.data});break;case"onAdPodCurrentTimeChange":this.emit(ln.AdPodCurrentTimeChange,{adPodCurrentTime:e.data});break;case"onAdPodTimeToSkipChange":this.emit(ln.AdPodTimeToSkipChange,{adPodTimeToSkip:e.data});break;case"onAdInteraction":this.emit(ln.AdInteraction,void 0);break;case"onNextAdRemainingTimeChange":this.emit(ln.NextAdRemainingTimeChange,{nextAdRemainingTime:e.data});break;case"onTimelineInfoChange":const{currentTime:h,duration:p,utcStartTime:f,dvrStartTime:m,dvrDuration:g}=e.data;this.emit(ln.CurrentTimeChange,{currentTime:h}),this.emit(ln.DurationChange,{duration:p}),this.emit(ln.UtcStartTimeChange,{utcStartTime:f}),this.emit(ln.DVRStartTimeChange,{dvrStartTime:m}),this.emit(ln.DVRDurationChange,{dvrDuration:g}),this.emit(ln.PlaybackRateRangeChange,{playbackRateRange:lt({videoType:this.getState().videoType,currentTime:h,dvrStartTime:m,dvrDuration:g})});break;case"onPositionChange":const{watchedTime:y,liveLatency:v}=e.data;this.emit(ln.WatchedTimeChange,{watchedTime:y}),this.emit(ln.LiveLatencyChange,{liveLatency:v});break;case"onFullScreenChange":this.emit(ln.FullscreenStateChange,{isFullscreen:e.data});break;case"onRequestFullscreenChange":this.emit(ln.RequestFullscreenStateChange,{nextFullscreenState:e.data});break;case"onVolumeChange":this.emit(ln.MutedChange,{muted:e.data.muted}),this.emit(ln.VolumeChange,{volume:e.data.volume}),this.emit(ln.VolumeChangeReasonChange,{volumeChangeReason:e.data.changeReason});break;case"onReady":this.emit(ln.Ready,this);break;case"onError":this.emitError(new Xr(e.data));break;case"onRecover":this.telemetry.logEvent({name:"RecoverStreamError",data:{details:e.data}}),this.telemetry.onRecover({recoverReason:e.data.reason}),this.emit(ln.RecoverStart,e.data);break;case"onVideoTrackChange":this.emit(ln.VideoTrackChange,{videoTrack:e.data});break;case"onVideoTracksChange":this.emit(ln.VideoTracksChange,{videoTracks:e.data});break;case"onAudioTrackChange":this.emit(ln.AudioTrackChange,{audioTrack:e.data});break;case"onAudioTracksChange":this.emit(ln.AudioTracksChange,{audioTracks:e.data});break;case"onTextTrackChange":this.emit(ln.TextTrackChange,{textTrack:e.data});break;case"onTextTracksChange":this.emit(ln.TextTracksChange,{textTracks:e.data});break;case"onSubtitlesChange":this.emit(ln.SubtitlesChange,{subtitles:e.data});break;case"onPlaybackRateChange":const E=this.getState().playbackRate;this.emit(ln.PlaybackRateChange,{playbackRate:e.data}),E!==e.data&&this.telemetry.writePlayerAliveStateManually();break;case"onBufferingRangesChange":this.emit(ln.BufferedRangesChange,{bufferedRanges:e.data});break;case"onThumbnailTileGeneralMetaInfoChange":this.emit(ln.TileMetaInfoChange,{tileMetaInfo:e.data});break;case"onOriginalBroadcastAdStateChange":const{cueId:_,originalBroadcastAdDuration:S}=e.data;this.logEventInternal(void 0===_?"OriginalBroadcastAdEnd":"OriginalBroadcastAdStart",{cueId:_,originalBroadcastAdDuration:S});break;case"onDrmSystemChange":this.telemetry.setStaticParams({drm:e.data}),this.emit(ln.DrmSystemChange,{drmSystem:e.data});break;case"onChangeStream":e.data&&this.telemetry.setStaticParams({streamUrl:e.data.url}),this.emit(ln.StreamChange,{stream:e.data}),this.emit(ln.TileMetaInfoUrlChange,{tileMetaInfoUrl:_t(e.data?e.data.url:void 0)});break;case"onStreamsWithSupportInfoChange":this.emit(ln.StreamsWithSupportInfoChange,e.data);break;case"onContentImpression":this.emit(ln.ContentImpression,e.data);break;case"onResourcesIdle":this.emit(ln.ResourcesIdle,{});break;case"onVisualStateChange":const{isFullscreen:b,isPictureInPicture:R}=this.getState();b===e.data.isFullScreen&&R===e.data.isPip||this.telemetry.writePlayerAliveStateManually(),this.emit(ln.PictureInPictureStateChange,{isPictureInPicture:e.data.isPip}),this.emit(ln.VisibleStateChange,{isVisible:e.data.isVisible}),this.telemetry.setStaticParams({visualState:e.data}),this.savePlayerAliveData({containerWidth:e.data.width*devicePixelRatio,containerHeight:e.data.height*devicePixelRatio});break;case"onCapSizeChange":this.savePlayerAliveData({capWidth:null==(t=e.data)?void 0:t.width,capHeight:null==(r=e.data)?void 0:r.height});break;case"onPlaybackQualityUpdate":const A={droppedFrames:e.data.droppedVideoFrames,shownFrames:e.data.totalVideoFrames-e.data.droppedVideoFrames};this.savePlayerAliveData(A),null==(n=this.debugPanel)||n.onFramesInfoChange(A);break;case"onEngineChange":null==(i=this.debugPanel)||i.onEngineChange(e.data),this.telemetry.setStaticParams({engine:e.data});break;case"onStartStageChange":this.emit(ln.StartStageChange,{startStage:e.data}),e.data!==Wn.waitForDocumentVisibility&&e.data!==Wn.waitForUserPlay||this.telemetry.stopInitBufferingTimer(),e.data!==Wn.init&&e.data!==Wn.starting||this.telemetry.onInitBuffering();break;case"onVideoSizeChange":this.emit(ln.VideoSizeChange,{videoSize:e.data});break;case"onNetworkStatusChange":this.emit(ln.NetworkStatusChange,e.data);break;case"onBandwidthEstimateChange":const T=Math.round(e.data.value),P=e.data.source;this.savePlayerAliveData({bandwidthEstimate:T,bandwidthSource:P});const I=function(e){return e.value<=5e5?_l.SLOW:_l.OK}(e.data);this.getState().connectionQuality!==I&&this.emit(ln.ConnectionQualityChange,{connectionQuality:I}),null==(a=this.debugPanel)||a.onBandwidthEstimateChange(e.data);break;case"onInrollFrame":this.emit(ln.InrollFrame,e.data);break;case"onLogEvent":this.telemetry.logEvent({name:e.data.event,data:e.data.params,labels:e.data.additionalStatsLabels});break;case"onPreloadDetailsUpdate":this.telemetry.setPreloadDetails(e.data.details)}else this.debug.logInternals&&console.warn("// skip public and internal "+e.eventName+" because setSource is in progress",e.eventName,e.data)}),e}pdateExternalPlaybackCsrfToken(e){this.externalPlaybackCsrfToken=e,void 0!==e&&(clearTimeout(this.externalPlaybackTokenExpireTimeout),this.externalPlaybackTokenExpireTimeout=window.setTimeout(6e4))}logEventInternal(e,t,r){void 0===t&&(t={}),this.telemetry.logEvent({name:e,data:t,extraRootFields:r})}async destroyIFrame(e){const{iframe:t}=this;if(!t||!t.parentElement)return;this.isIframeLoaded||this.store.getState().error||(await Promise.race([this.loadIframeDeferred.promise.catch(rn.Z),this.waitForEvent(ln.ErrorChange)]),this.loadIframeDeferred.reject(void 0));const{isFullscreen:r}=this.getState();if(r)return new Promise(;this.isIframeLoaded&&await this.postMessenger.sendRequest(Cl.destroy,{reason:e}),t.src="",m(t)}subscribeExternalFullscreenChange(e){this.once(ln.Destroy,function(e){let{element:t,onChange:r}=e;const n=t.ownerDocument||window.document;let i=!1;r(i);const a=Fl.map(e=>(i=i||Et(n,t),(0,Ml.O)(n,e.events.change,{passive:!0})));return({element:e,onChange:e=>{this.performOnIframeLoad(}}))}initPlaybackTracking(){this.on(ln.WatchedTimeChange,e=>{let{watchedTime:t}=e;return this.telemetry.updateWatchedTime(t)}),this.on(ln.PlayingStateChange,}initPlayerTracker(){const e=new ws({vsid:this.getState().vsid,getAdState:()=>this.getState().adState,getVideoTrack:()=>this.getState().videoTrack,getAudioTrack:()=>this.getState().audioTrack,getTextTrack:()=>this.getState().textTrack,getVideoType:()=>this.getState().videoType,getIsFullscreen:()=>this.getState().isFullscreen,getDrmSystemName:()=>this.getState().drmSystem,getIsDrmSupported:getMuted:getDuration:()=>this.getState().duration||0,getPlayingState:()=>this.getState().playingState,getCurrentTime:()=>this.getState().currentTime,getWatchedTime:getUtcPosition:()=>{const{utcStartTime:e,currentTime:t}=this.getState();return void 0===e?0:e+t}});return this.on(ln.Ready,e.onReady),this.on(ln.ErrorChange,,this.on(ln.CurrentTimeChange,t=>{let{currentTime:r}=t;return e.onCurrentTimeChange(r)}),this.on(ln.WatchedTimeChange,t=>{let{watchedTime:r}=t;return e.onWatchedTimeChange(r)}),this.on(ln.AdStateChange,t=>{let{adState:r}=t;return e.onAdStateChange(r)}),this.on(ln.PlayingStateChange,,this.on(ln.AdPodStart,()=>{e.onAdPodStart()}),this.on(ln.AdPodEnd,()=>{e.onAdPodEnd()}),this.on(ln.AdPodSkip,,e}initDebugPanel(){const e=new Hc({container:this.container,getState:getSourceId:getAdditionalParams:);this.once(ln.Destroy,()=>e.destroy());const t=()=>e.update();return this.on(ln.CurrentTimeChange,t),this.on(ln.DurationChange,t),this.on(ln.WatchedTimeChange,t),this.on(ln.PlayingStateChange,t),this.on(ln.LiveLatencyChange,t),this.on(ln.VideoTypeChange,t),this.on(ln.SourceChange,t),this.on(ln.VideoTrackChange,t),this.on(ln.AudioTrackChange,t),this.on(ln.BufferedRangesChange,t),e.setVisibility(this.debug.showDebugPanel),e}requestSourceConfigForRecover(e){if(e.isFatal&&function(e){return e.category===Kr.DRM?e.code===Wr.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:e.category===Kr.REGIONAL||e.category===Kr.ACCESS}(e))return Promise.resolve().then(()=>{var e;const t=null==(e=this.playerApiSourceConfig)?void 0:e.update();return Fn(t)&&(this.emit(ln.PlayingStateChange,{playingState:en.X.BUFFERING,playingStateReason:ti.l.WaitForSourceConfigUpdate}),t.catch(e=>{throw this.emit(ln.PlayingStateChange,{playingState:en.X.PAUSE,playingStateReason:ti.l.Unknown}),e})),t})}async tryRecoverSourceConfigInAsyncMode(e){const t=await this.requestSourceConfigForRecover(e);if(void 0===t)return!1;const r=(()=>{try{return me(t,this.config,this.playerApiSourceConfig.source.sourceIndex)}catch(e){const t=Xr.from(e,{code:Lr.INVALID_CONFIG_IN_SOURCE_UPDATE,isFatal:!1});return void this.emitError(t)}})();return void 0!==r&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfig"),this.setSourceInternal(r,{shouldSaveProgress:!0})}),!0)}ync emitError(e,t){if(e.isFatal&&e.category===Kr.DRM&&!nd&&(e=new Xr({code:Bn?Lr.IFRAME_DOES_NOT_ALLOW_DRM:Lr.DRM_IS_NOT_ALLOWED,isFatal:!0,details:{originalCode:e.code,originalDetails:e.details,allowedFeaturePolicies:sr()}},this.additionalParams.vsid)),(e=new Xr(cr({},e.toJSON(),{isFatal:e.isFatal&&!this.destroyed&&D(this.container)}),this.additionalParams.vsid)).isFatal&&this.emit(ln.PlayingStateChange,{playingState:en.X.PAUSE,playingStateReason:ti.l.Unknown}),e.isFatal&&e)){let t=wt(this.getState())?en.X.PLAY:en.X.PAUSE;const r=e=>{let{playingState:r}=e;t=r};this.on(ln.RequestPlayingState,r);const n=await this.tryRecoverSourceConfig(e);this.off(ln.RequestPlayingState,r),n&&(e=new Xr(cr({},e.toJSON(),{isFatal:!1})),wt({playingState:t})&&this.play(ti.l.CompletedRecoverSourceConfig))}var r,n;e.isFatal&&(null==(r=this.setSourceDeferred)||r.reject(new Error("SetSource rejected cause fatal error")),null!=(n=this.getState())&&n.error?e=new Xr(cr({},e.toJSON(),{isFatal:!1})):this.emit(ln.ErrorChange,{error:e}));rr(e)?this.telemetry.logError({error:new Xr(cr({},e.toJSON(),{code:"VH_"+e.message,isFatal:!1})),extraRootFields:t}):this.telemetry.logError({error:e,extraRootFields:t})}initPreloadSkin(e){if(!1===e.loadSkin)return;if(this.getState().playingState===en.X.PLAY)return;const t=Kt({document:this.container.ownerDocument,poster:void 0,style:void 0,hiddenControls:e.originalHiddenControls,primaryColor:e.primaryColor,backgroundColor:e.streamPlayerParams.backgroundColor,onReady:);return this.container.appendChild(t.element),this.once(ln.SkinReady,()=>{var e;!(this.vhHelper&&null!=(e=this.getState().error)&&e.isFatal)&&t.setVisibility(!1)}),this.once(ln.Destroy,()=>t.destroy()),this.waitForPlay().then(.catch(rn.Z),t}tPlayerAliveData(){this.playerAliveData={bandwidthEstimate:0,containerHeight:this.playerAliveData.containerHeight,containerWidth:this.playerAliveData.containerWidth}}applySourceInfoToTelemetry(e){try{this.telemetry.setStaticParams(this.getTelemetryStaticParams(e)),this.telemetry.enableRemoteProgressSaving(Xt(e))}catch(bi){setTimeout(()=>{throw bi})}}getTelemetryStaticParams(e){var t;const{source:r}=e,{puid:n,from:i}=r.params.additionalParams;return{additionalParameters:or(r.params.additionalParams),slots:(a=r.params.additionalParams,void 0===a?"":a.slots||""),testIds:B(r.params.additionalParams),videoContentId:r.params.videoInfo.videoContentId,streamUrl:null==(t=r.streams[0])?void 0:t.url,labels:{from:i},engine:void 0,drm:void 0,puid:n};var a}createSourceConfigForRecoverGetter(e){let t,r=e.source;return this.on(ln.SourceChange,,this.on(ln.StreamsWithSupportInfoChange,,n=>{const i=void 0===t?void 0:t.filter(j);if(!this.canRecoverBySourceUpdate(n,r,i))return;const a=function e(t,r){void 0===r&&(r={preserveConstructors:!0});let n=t;if((0,Ln.k)(t)){return t.map(}return C(t)?new Date(t.getTime()):(!(0,cn.m)(t)&&(0,Hr.K)(t)&&(n=r.preserveConstructors?Object.create(t):{},(0,xn.M)(t,),n)}(r),o=i.map(e=>{let{stream:t}=e;return t});return a.streams=this.removeCurrentStream(o),cr({},e,{source:a})}}itForEvent(e){return new Promise(}initVhHelper(e){let{contentId:t,poster:r,vhParams:n,queryParams:i}=e;const a=new Qc({contentId:t,vhParams:n,queryParams:(0,id.r)(cr({},i),this.container),playerApi:this});return a.on("ShowAnnotation",async e=>{var t,r,n;await this.loadComponents(),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(r=this.preloadSkin)||r.setAnnotationText(dn.i18nTranslateSandbox(e)),null==(n=this.preloadSkin)||n.setVisibility(!0)}),a.on("SetPoster",e=>{var t,n;null==(t=this.preloadSkin)||t.setPoster(r||e||""),null==(n=this.preloadSkin)||n.setVisibility(!0)}),a.on("Destroy",()=>{var e,t,r;null==(e=this.preloadSkin)||e.setVisibility(!1),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(r=this.preloadSkin)||r.setPoster("")}),a.on("SetSource",()=>{var e,t;null==(e=this.preloadSkin)||e.setAnnotationText(""),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!0)}),a.on("Error",e=>{var t;e.code===Lr.REQUEST_SOURCE_ERROR&&(null==(t=this.preloadSkin)||t.setVisibility(!1));this.emitError(new Xr(cr({},e.toJSON(),{isFatal:!1})))}),a.on("UgcLiveStatusChange",,a}waitForPlay(){return new Promise((e,t)=>{var r;this.once(ln.Destroy,t),null==(r=this.setSourceDeferred)||r.promise.catch(t);const n=()=>{const e=this.getState();if(!e)return!1;const{playingState:t,adState:{state:r}}=e;return t===en.X.PLAY||r===ri.PLAYING};if(n())return void e();const i=()=>{n()&&(e(),this.off(ln.PlayingStateChange,i),this.off(ln.AdStateChange,i))};this.on(ln.PlayingStateChange,i),this.on(ln.AdStateChange,i)})}configureSkin(e,t){if(void 0!==this.config.loadSkin)return;const r=()=>{this.skin&&(this.skin.configure(e),this.skin.updateExternalPlayerConfig(t))};this.skin?r():this.once(ln.SkinReady,e=>{let{error:t}=e;t||r()})}initOnlyOnePlayingUnmutePlayerControl(){const{vsid:e}=this.getState(),t=()=>{sessionStorage.setItem("videoplayer-playing-vsid",e),dispatchEvent(new StorageEvent("storage",{key:"videoplayer-playing-vsid"}))};addEventListener("storage",t=>{let{key:r}=t;if("videoplayer-playing-vsid"!==r)return;const n=sessionStorage.getItem("videoplayer-playing-vsid");if(!n)return;const{muted:i}=this.getState();n===e||i||this.pause(ti.l.StartPlayingAnotherPlayer)}),this.on(ln.PlayingStateChange,e=>{let{playingState:r}=e;const{muted:n}=this.getState();r!==en.X.PLAY||n||t()}),this.on(ln.MutedChange,e=>{let{muted:r}=e;const{playingState:n}=this.getState();n!==en.X.PLAY||r||t()})}}var dd=e(8767),ud=e(3756),hd=e(4575),pd=e(2587);let fd;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js",e.PLAYER="player.v2.js",e.PLAYER_MODERN="player.v2.modern.js"}(fd||(fd={}));const md=f(window),gd={};let yd;const vd=["setReadyInstance","setInstance"],Ed=e=>e.usePlayerApiMock?mr(e):I(e,;Sr.create=Ed,"https://frontend.vh.yandex.ru/player"===br.H&&(Sr.createVhPlayerApi=e(8484).H),_r.init=Ed})()})();