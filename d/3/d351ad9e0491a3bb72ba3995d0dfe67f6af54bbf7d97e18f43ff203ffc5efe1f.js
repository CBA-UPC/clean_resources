/**
 * @id5io/id5-api.js
 * @version v1.0.56
 * @link https://id5.io/
 * @license Apache-2.0
 */
!function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=17)}([function(e,m,_){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),function(e){m.generateId=function(){if(void 0!==e&&void 0!==e.crypto&&void 0!==e.crypto.randomUUID)return e.crypto.randomUUID();return"".concat(1e6*Math.random()|0)},m.semanticVersionCompare=function(e,t){var r="^\\d+(\\.\\d+(\\.\\d+){0,1}){0,1}$";if(!e.match(r)||!t.match(r))return;var n=e.split("."),i=t.split("."),r=e=>parseInt(e)||0,e=(e,t)=>{t=e-t;return 0==t?0:t<0?-1:1},t=e(r(n[0]),r(i[0]));if(0!==t)return t;{t=e(r(n[1]),r(i[1]));return 0===t?e(r(n[2]),r(i[2])):t}},m.isA=l,m.isFn=h,m.isStr=p,m.isArray=g,m.isNumber=function(e){return l(e,o)},m.isPlainObject=function(e){return l(e,s)},m.isBoolean=function(e){return l(e,a)},m.isDefined=function(e){return void 0!==e},m.isEmpty=f,m._each=v,m.ajax=function(n,i,o){let s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:t.c;try{let r;var c,l=s.method||(o?"POST":"GET");let e=document.createElement("a");e.href=n;let t="object"==typeof i&&null!==i?i:{success:function(){a.info("ajax","xhr success")},error:function(e){a.error("ajax","xhr error",null,e)}};"function"==typeof i&&(t.success=i),r=new window.XMLHttpRequest,r.onreadystatechange=function(){var e;4===r.readyState&&(200<=(e=r.status)&&e<300||304===e?t.success(r.responseText,r):t.error(r.statusText,r))},r.ontimeout=function(){a.error("ajax","xhr timeout after ",r.timeout,"ms")},"GET"===l&&o&&(d((c=function(e,t){let r=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e);t=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:t?r.search:function(e){return e?e.replace(/^\?/,"").split("&").reduce((e,t)=>{let r=t.split("="),n=(s=2,function(e){if(Array.isArray(e))return e}(t=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(t,s)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1];var s;return/\[\]$/.test(i)?(i=i.replace("[]",""),e[i]=e[i]||[],e[i].push(o)):e[i]=o||"",e},{}):{}}(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}}(n,s)).search,o),n=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(function(e){return Object.keys(e).map(t=>Array.isArray(e[t])?e[t].map(e=>"".concat(t,"[]=").concat(e)).join("&"):"".concat(t,"=").concat(e[t])).join("&")}(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}(c)),r.open(l,n,!0),s.withCredentials&&(r.withCredentials=!0),v(s.customHeaders,(e,t)=>{r.setRequestHeader(t,e)}),s.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",s.contentType||"text/plain"),"POST"===l&&o?r.send(o):r.send()}catch(e){a.error("ajax","xhr construction",e)}},m.cyrb53Hash=function(r){let e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=function(e,t){if(h(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 4290772992&e&&(r+=(4290772992&e)*t|0),0|r},i=3735928559^e,o=1103547991^e;for(let e=0,t;e<r.length;e++)t=r.charCodeAt(e),i=n(i^t,2654435761),o=n(o^t,1597334677);return i=n(i^i>>>16,2246822507)^n(o^o>>>13,3266489909),o=n(o^o>>>16,2246822507)^n(i^i>>>13,3266489909),(4294967296*(2097151&o)+(i>>>0)).toString()},m.objectEntries=function(e){let t=Object.keys(e),r=t.length,n=new Array(r);for(;r--;)n[r]=[t[r],e[t[r]]];return n};var t=_(1);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const r="Array",n="String",i="Function",o="Number",s="Object",a="Boolean",c=Object.prototype.toString;function l(e,t){return c.call(e)==="[object "+t+"]"}function h(e){return l(e,i)}function p(e){return l(e,n)}function g(e){return l(e,r)}function f(e){if(!e)return!0;if(g(e)||p(e))return!(0<e.length);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function v(t,r){if(!f(t)){if(h(t.forEach))return t.forEach(r,this);let e=0;var n=t.length;if(0<n)for(;e<n;e++)r(t[e],e,t);else for(e in t)hasOwnProperty.call(t,e)&&r.call(this,t[e],e)}}}.call(m,_(20))},function(e,t,r){"use strict";class n{debug(){}info(){}warn(){}error(){}}var i=new(t.a=n);t.c=i;t.b=class extends n{constructor(e,t){super(),this._prefix=e,this._delegate=t}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.debug(this._prefix,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.info(this._prefix,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.warn(this._prefix,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.error(this._prefix,...t)}}},function(e,t,r){"use strict";var i=r(19),n=(r(12),r(16),r(1));r.d(t,"j",function(){return n.a}),r.d(t,"k",function(){return n.c});var o=r(3);r.d(t,"a",function(){return o.a}),r.d(t,"e",function(){return o.b}),r.d(t,"g",function(){return o.e}),r.d(t,"h",function(){return o.f});var s=r(11);r.d(t,"f",function(){return s.a});var a=r(6);r.d(t,"l",function(){return a.a});var c=r(4);r.d(t,"i",function(){return c.a}),r.d(t,"m",function(){return c.e});var l=r(15);r.d(t,"d",function(){return l.a});var d=r(8);r.d(t,"b",function(){return d.a});var u=r(0);r.d(t,"o",function(){return u});var h=r(9);r.d(t,"c",function(){return h.a});r=new class{createInstance(e,t,r,n){return new i.a(e,{},n,r,t)}};t.n=r},function(e,t,r){"use strict";var n=r(0);const i=["localStoragePurposeConsent","ccpaString"];function o(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function c(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.f="131";const l=Object.freeze({NONE:"none",TCF_V1:"TCFv1",TCF_V2:"TCFv2",USP_V1:"USPv1",ID5_ALLOWED_VENDORS:"ID5",PREBID:"PBJS",GPP_V1_0:"GPPv1.0",GPP_V1_1:"GPPv1.1"});t.a=l;class s extends Error{constructor(e,t){super(t),c(this,"consentData",void 0),this.consentData=e}}t.h=s;t.e=class{constructor(e,t,r,n){c(this,"version",void 0),c(this,"localStoragePurposeConsent",void 0),c(this,"applicableSections",void 0),c(this,"gppString",void 0),this.version=e,this.localStoragePurposeConsent=t,this.applicableSections=r,this.gppString=n}isGranted(){return this.applicableSections.includes(2)?this.localStoragePurposeConsent:!!this.applicableSections.includes(6)||!(!this.applicableSections.includes(0)&&!this.applicableSections.includes(-1)&&0!==this.applicableSections.length)&&(void 0===this.localStoragePurposeConsent||this.localStoragePurposeConsent)}};t.b=class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:l.NONE,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,s=6<arguments.length&&void 0!==arguments[6]&&arguments[6],a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:void 0;c(this,"api",void 0),c(this,"gdprApplies",void 0),c(this,"consentString",void 0),c(this,"localStoragePurposeConsent",void 0),c(this,"allowedVendors",void 0),c(this,"ccpaString",void 0),c(this,"forcedGrantByConfig",void 0),c(this,"gppData",void 0),this.api=e,this.gdprApplies=t,this.consentString=r,this.localStoragePurposeConsent=n,this.ccpaString=i,this.allowedVendors=o,this.forcedGrantByConfig=s,this.gppData=a}localStorageGrant(){var e=!0===this.forcedGrantByConfig?a.FORCE_ALLOWED_BY_CONFIG:void 0===this.api||this.api===l.NONE?a.PROVISIONAL:a.CONSENT_API;return new d(this.isGranted(),e,this.api)}isGranted(){switch(this.api){case l.NONE:return!0;case l.TCF_V1:return!this.gdprApplies||!0===this.localStoragePurposeConsent;case l.TCF_V2:case l.PREBID:return!1===this.gdprApplies||!0===this.localStoragePurposeConsent;case l.ID5_ALLOWED_VENDORS:return this.allowedVendors.includes("131");case l.USP_V1:return!0;case l.GPP_V1_0:case l.GPP_V1_1:return this.gppData.isGranted()}}hashCode(){this.localStoragePurposeConsent,this.ccpaString;var e=o(this,i);return Object(n.cyrb53Hash)(JSON.stringify(e))}};const a=Object.freeze({FORCE_ALLOWED_BY_CONFIG:"force_allowed_by_config",ID5_CONSENT:"id5_consent",PROVISIONAL:"provisional",JURISDICTION:"jurisdiction",CONSENT_API:"consent_api"});t.d=a;class d{constructor(e,t,r){c(this,"allowed",!1),c(this,"grantType",a.NONE),c(this,"api",l.NONE),this.allowed=e,this.grantType=t,this.api=r}isDefinitivelyAllowed(){return this.allowed&&this.grantType!==a.PROVISIONAL}}t.g=d;t.c=class{getConsentData(){}localStorageGrant(){}setStoredPrivacy(e){}}},function(e,t,r){"use strict";var n=r(1);function i(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o="_exp";t.a=class{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.c;i(this,"storage",void 0),i(this,"_log",void 0),this.storage=e,this._log=t}getItem(e){try{return this.storage.getItem(e)}catch(e){}}setItem(e,t){try{this.storage.setItem(e,t)}catch(e){}}removeItem(e){try{this.storage.removeItem(e)}catch(e){}}getItemWithExpiration(e){var t=e.name,e=this.getItem(t+o);return!e||new Date(e).getTime()-Date.now()<=0?(this.removeItemWithExpiration({name:t}),null):this.getItem(t)}setItemWithExpiration(e,t){var r=e.name,e=e.expiresDays,e=Date.now()+864e5*e,e=new Date(e).toUTCString();this.setItem(r+o,e),this.setItem(r,t)}removeItemWithExpiration(e){e=e.name;this.removeItem(e),this.removeItem(e+o)}setObjectWithExpiration(e,t){var r=e.name,e=e.expiresDays,e=Date.now()+864e5*e;this.setItem(r,JSON.stringify({data:t,expireAt:e}))}getObjectWithExpiration(t){t=t.name;try{var e=JSON.parse(this.getItem(t));if(e.expireAt&&0<e.expireAt-Date.now())return e.data;e.expireAt&&this.removeItem(t)}catch(e){this._log.error("Error while getting ",t,"object from storage",e)}}updateObjectWithExpiration(e,t){var r=e.name,e=e.expiresDays;try{var n=this.getObjectWithExpiration({name:r});this.setObjectWithExpiration({name:r,expiresDays:e},t(n))}catch(e){this._log.error("Error while updating object with ",r,e)}}};class s{getItem(e){}removeItem(e){}setItem(e,t){}}r=new(t.d=s);t.b=r;t.e=class extends s{constructor(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];super(),i(this,"_writingEnabled",void 0),i(this,"_underlying",void 0),this._writingEnabled=t;try{this._underlying=e.localStorage}catch(e){}}getItem(e){try{return this._underlying.getItem(e)}catch(e){}}removeItem(e){try{this._underlying.removeItem(e)}catch(e){}}setItem(e,t){try{this._writingEnabled&&this._underlying.setItem(e,t)}catch(e){}}static checkIfAccessible(){var e="__id5test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}};t.c=class{constructor(e){i(this,"_replicas",[]),i(this,"_lastKeyOperation",{}),i(this,"_primaryStorage",void 0),this._primaryStorage=e}getItem(e){return this._primaryStorage.getItem(e)}removeItem(t){this._primaryStorage.removeItem(t);var e=e=>{e.removeItem(t)};this._replicas.forEach(e),this._lastKeyOperation[t]=e}setItem(t,r){this._primaryStorage.setItem(t,r);var e=e=>{e.setItem(t,r)};this._replicas.forEach(e),this._lastKeyOperation[t]=e}addReplica(t){Object.values(this._lastKeyOperation).forEach(e=>e(t)),this._replicas.push(t)}}},function(e,t,r){"use strict";t.b=function(e,t){let r=!0;return n.o._each(e,e=>r=r&&t(e)),r},t.p=function(e){l=!!e},t.k=u,t.l=function(){return s},t.d=function(e,t,r){"loading"!==document.readyState?_(e,t,r):document.addEventListener("DOMContentLoaded",function(){_(e,t,r)})},t.e=function(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e},t.c=function t(r,n){const e=y(r)&&y(n);if(!e)return r===n;const i=Object.keys(r);const o=Object.keys(n);if(i.length!==o.length)return!1;for(var s=0,a=i;s<a.length;s++){let e=a[s];if(!t(r[e],n[e]))return!1}return!0},t.f=function(e,t){return w.apply(this,arguments)};var n=r(2);function c(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o="TRUE"===p("id5_debug").toUpperCase(),s="TRACE"===p("id5_debug").toUpperCase(),a=Boolean(window.console);let l=!1;function d(e,t,r,n,i){u()&&a&&e&&e.apply(console,["%cID5 - ".concat(t,"#").concat(r),"color: #fff; background: #1c307e; padding: 1px 4px; border-radius: 3px;",n].concat(i))}function u(){return o||s||l}class h extends n.j{constructor(e,t){super(),i(this,"_invocationId",void 0),i(this,"_origin",void 0),this._invocationId=t,this._origin=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];d(console.info,e,t,"DEBUG",n)}(this._origin,this._invocationId,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];d(console.info,e,t,"INFO",n)}(this._origin,this._invocationId,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];d(console.warn,e,t,"WARNING",n)}(this._origin,this._invocationId,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];d(console.error,e,t,"ERROR",n)}(this._origin,this._invocationId,...t)}}function p(e){const t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(window.location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}t.a=h;r=n.o.isA;t.g=r;const g=n.o.isFn;t.j=g;const f=n.o.isStr;t.o=f;const v=n.o.isArray;t.h=v;r=n.o.isNumber;t.m=r;r=n.o.isPlainObject;t.n=r;r=n.o.isBoolean;t.i=r;const m=n.o.isDefined;n.o.isEmpty;new h("ajax");function _(e,t,r){let n=new Image;n.src=e,g(t)&&t(),g(r)&&(n.complete?r():n.addEventListener("load",r))}function b(e,t){const r=[];return n.o._each(e,e=>{t(e)&&r.push(e)}),r}const y=e=>null!=e&&"object"==typeof e;function w(){var a;return a=function*(e,t){if(m(window.navigator.userAgentData)&&!e){let e;try{e=yield window.navigator.userAgentData.getHighEntropyValues(["architecture","fullVersionList","model","platformVersion"])}catch(e){return void t.error("Error while calling navigator.userAgentData.getHighEntropyValues()",e)}return function(e){if(!m(e))return;const t=/[()-.:;=?_/]/g;v(e.brands)&&(e.brands=b(e.brands,e=>f(e.brand)&&e.brand.search(t)<0));v(e.fullVersionList)&&(e.fullVersionList=b(e.fullVersionList,e=>f(e.brand)&&e.brand.search(t)<0));return e}(e)}},(w=function(){var e=this,s=arguments;return new Promise(function(t,r){var n=a.apply(e,s);function i(e){c(n,t,r,i,o,"next",e)}function o(e){c(n,t,r,i,o,"throw",e)}i(void 0)})}).apply(this,arguments)}},function(e,t,r){"use strict";var l=r(0),n=r(9);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(e,t){this.name=e,this.expiresDays=t}withNameSuffixed(){let e=this.name;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0,o=r;i<o.length;i++){var s=o[i];e+="_".concat(s)}return new a(e,this.expiresDays)}}t.a=class{constructor(){let r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;function e(e){var t=void 0!==r?Math.max(1,r):e.expiresDays;return new a(e.name,t)}var t=n.a.STORAGE_CONFIG;this.ID5=e(t.ID5),this.LAST=e(t.LAST),this.CONSENT_DATA=e(t.CONSENT_DATA),this.PD=e(t.PD),this.PRIVACY=e(t.PRIVACY),this.SEGMENTS=e(t.SEGMENTS)}};class u{constructor(){i(this,"storedResponse",void 0),i(this,"storedDateTime",void 0),i(this,"pdHasChanged",void 0),i(this,"segmentsHaveChanged",void 0),i(this,"refreshInSeconds",void 0),i(this,"nb",void 0),i(this,"consentHasChanged",void 0)}isResponsePresent(){return void 0!==this.storedResponse}hasValidUid(){return this.storedResponse&&this.storedResponse.universal_uid}isResponseComplete(){return this.storedResponse&&this.storedResponse.universal_uid&&this.storedResponse.signature}refreshInSecondsHasElapsed(){return this.storedDateTime<=0||Date.now()-this.storedDateTime>1e3*this.refreshInSeconds}isStoredIdStale(){return this.storedDateTime<=0||12096e5<Date.now()-this.storedDateTime}}t.b=class{constructor(e){i(this,"_clientStore",void 0),this._clientStore=e}getStoredDataState(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=this._clientStore.getResponse(),i=this._clientStore.getDateTime();let o={},s=!1,a=!1,c=e[0].refreshInSeconds||7200;e.forEach(e=>{var t=e.partnerId,r=this._clientStore.getNb(t);o[t]=void 0!==r?r:0;r=!this._clientStore.isStoredPdUpToDate(t,e.pd),t=!this._clientStore.storedSegmentsMatchesSegments(t,e.segments);a=a||t,s=s||r,c>e.refreshInSeconds&&(c=e.refreshInSeconds)}),Object(l.isNumber)(null==n||null===(t=n.cache_control)||void 0===t?void 0:t.max_age_sec)&&(c=n.cache_control.max_age_sec);r=r&&!this._clientStore.storedConsentDataMatchesConsentData(r);return d(new u,{storedResponse:n,storedDateTime:i,pdHasChanged:s,segmentsHaveChanged:a,refreshInSeconds:c,nb:o,consentHasChanged:r})}storeRequestData(e,t){this._clientStore.putHashedConsentData(e),t.forEach(e=>{var t=e.partnerId,r=e.pd,e=e.segments;this._clientStore.isStoredPdUpToDate(t,r)||this._clientStore.putHashedPd(t,r),this._clientStore.putHashedSegments(t,e)})}incNbs(e,r){e.forEach(e=>{var t=e.partnerId;r.nb[t]=this._clientStore.incNbV1(t,r.nb[t]),this._clientStore.incNbV2(e.cacheId)})}storeResponse(e,r,t){this._clientStore.putResponseV1(r.getGenericResponse()),this._clientStore.setResponseDateTimeV1(new Date(r.timestamp).toUTCString());const n=t?0:1;e.forEach(e=>{var t=e.partnerId;this._clientStore.setNbV1(t,n);t=e.cacheId;this._clientStore.setNbV2(t,n),this._clientStore.storeResponseV2(t,r.getResponseFor(e.integrationId),r.timestamp)})}clearAll(e){this._clientStore.clearResponse(),this._clientStore.clearDateTime(),e.forEach(e=>{e=e.partnerId;this._clientStore.clearNb(e),this._clientStore.clearHashedPd(e),this._clientStore.clearHashedSegments(e)}),this._clientStore.clearHashedConsentData()}}},function(e,t,r){"use strict";var n=r(1);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o="*";t.b=void 0;class s{constructor(e,t,r,n,i,o){var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;a(this,"_isId5Message",!0),a(this,"id",void 0),a(this,"timestamp",void 0),a(this,"type",void 0),a(this,"src",void 0),a(this,"dst",void 0),a(this,"request",void 0),a(this,"payload",void 0),this.id=n,this.timestamp=e,this.src=t,this.dst=r,this.type=o,this.request=s,this.payload=i}}class c{constructor(e){a(this,"_senderId",void 0),a(this,"_messageSeqNb",0),this._senderId=e,this._messageSeqNb=0}createBroadcastMessage(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.constructor.name;return new s(Date.now(),this._senderId,void 0,++this._messageSeqNb,e,t||e.constructor.name)}createResponse(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;return new s(Date.now(),this._senderId,e.src,++this._messageSeqNb,t,r||t.constructor.name,e)}createUnicastMessage(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;return new s(Date.now(),this._senderId,e,++this._messageSeqNb,t,r||t.constructor.name)}}class l{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;a(this,"instance",void 0),a(this,"instanceState",void 0),a(this,"isResponse",void 0),this.instance=e,this.instanceState=r,this.isResponse=t}}a(t.c=l,"TYPE","HelloMessage");r=Object.freeze({LEADER:"leader",FOLLOWER:"follower",STORAGE:"storage"});t.e=r;class d{constructor(e,t,r){a(this,"target",void 0),a(this,"methodName",void 0),a(this,"methodArguments",void 0),this.target=e,this.methodName=t,this.methodArguments=r}}a(d,"TYPE","RemoteMethodCallMessage");t.d=class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.c;a(this,"_targets",{}),a(this,"_log",void 0),this._log=e}registerTarget(e,t){return this._targets[e]=t,this}_handle(t){const e=this._targets[t.target];if(e)try{e[t.methodName](...t.methodArguments)}catch(e){this._log.error("Error while handling method call ",t,e)}}};t.a=class{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:n.c;a(this,"_id",void 0),a(this,"_messageFactory",void 0),a(this,"_log",void 0),a(this,"_onMessageCallBackFunction",void 0),this._id=e,this._messageFactory=new c(this._id),this._log=r,this._window=t,this._handlers={},this._register()}_register(){const i=this;i._abortController="undefined"!=typeof AbortController?new AbortController:void 0;var e=null===(e=i._abortController)||void 0===e?void 0:e.signal;i._window.addEventListener("message",r=>{let n=r.data;if(void 0!==r.data&&r.data._isId5Message)if(r.data.src!==i._id)if(void 0===r.data.dst||r.data.dst===i._id)try{[o,n.type].forEach(e=>{let t=i._handlers[e];t&&t.forEach(e=>e(n,r.source))})}catch(e){i._log.error("Error while handling message",n,e)}else i._log.debug("Ignore msg not to me");else i._log.debug("Ignore loopback msg")},{capture:!1,signal:e})}deregister(){this._abortController&&this._abortController.abort()}onAnyMessage(e){return this.onMessage(o,e)}onMessage(e,t){const r=this._handlers[e];return r?r.push(t):this._handlers[e]=[t],this}broadcastMessage(e,t){this._log.debug("Broadcasting message",t,e),this._postMessage(this._messageFactory.createBroadcastMessage(e,t))}sendResponseMessage(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;this._log.debug("Sending response message",e,r,t),this._postMessage(this._messageFactory.createResponse(e,t,r))}unicastMessage(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;this._log.debug("Sending message to",e,r,t),this._postMessage(this._messageFactory.createUnicastMessage(e,t,r))}_postToWindow(e,t){try{e.postMessage(t,"*")}catch(e){this._log.error("Could not post message to window",e)}}_postMessage(n){let i=this;(function t(e){try{i._postToWindow(e,n);var r=e.frames;if(r)for(let e=0;e<r.length;e++)t(r[e])}catch(e){i._log.error("Could not broadcast message",e)}})(i._window.top)}callProxyMethod(e,t,r,n){this._log.info("Calling ProxyMethodCall",{target:t,name:r,args:n}),this.unicastMessage(e,new d(t,r,n),d.TYPE)}onProxyMethodCall(t){return this.onMessage(d.TYPE,e=>{t._handle(i(new d,e.payload))})}}},function(e,t,r){"use strict";var n=r(1);function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=Object.freeze({CONSENT_UPDATED:"consent_updated",USER_ID_READY:"user_id_ready",CASCADE_NEEDED:"fire_sync_pixel",USER_ID_FETCH_CANCELED:"user_id_fetch_canceled",USER_ID_FETCH_FAILED:"user_id_fetch_failed"});t.a=o;r=Object.freeze({ID5_MESSAGE_RECEIVED:"message",ID5_INSTANCE_JOINED:"instance-joined",ID5_LEADER_ELECTED:"leader-elected"});t.c=r;const s=Object.freeze([...Object.values(r),...Object.values(o)]);t.b=class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.c;i(this,"_handlers",void 0),i(this,"_log",void 0),this._log=e,this._handlers={}}_dispatch(t){var e=this._handlers[t];if(e){for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o,s=c(e);try{for(s.s();!(o=s.n()).done;){const a=o.value;try{a(...n)}catch(e){this._log.error("Event ".concat(t," handler execution failed."),e)}}}catch(e){s.e(e)}finally{s.f()}}}emit(e){if(void 0!==e&&s.includes(e)){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._dispatch(e,...r)}else this._log.warn("Unsupported event",e)}on(e,t){void 0!==e&&s.includes(e)?(this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)):this._log.warn("Unsupported event",e)}}},function(e,t,r){"use strict";t.a=Object.freeze({STORAGE_CONFIG:{ID5:{name:"id5id",expiresDays:90},LAST:{name:"id5id_last",expiresDays:90},CONSENT_DATA:{name:"id5id_cached_consent_data",expiresDays:30},PD:{name:"id5id_cached_pd",expiresDays:30},SEGMENTS:{name:"id5id_cached_segments",expiresDays:30},PRIVACY:{name:"id5id_privacy",expiresDays:30}},LEGACY_COOKIE_NAMES:["id5.1st","id5id.1st"],PRIVACY:{JURISDICTIONS:{gdpr:!0,ccpa:!1,lgpd:!0,other:!1}},ID5_EIDS_SOURCE:"id5-sync.com"})},function(e,t,r){"use strict";t.b=function(r,n){if(Math.random()<r&&i.a)return(e,t)=>new i.b(n,{sampling:r}).publish(e,t);return e=>e},t.d=function(){return new o.c},t.c=c;var i=r(25),n=r(26),o=r(13);function s(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function a(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach(function(e){var t,r;t=n,e=i[r=e],(r=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function c(e){return{partner:e}}class l extends n.a{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;super(a(a({source:e,version:t},c(r)),n),"id5.api")}loadDelayTimer(){return this.timer("instance.load.delay",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}fetchCallTimer(e){return this.timer("fetch.call.time",a({status:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}fetchFailureCallTimer(){return this.fetchCallTimer("fail",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}fetchSuccessfulCallTimer(){return this.fetchCallTimer("success",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}extensionsCallTimer(e,t){return this.timer("extensions.call.time",a({extensionType:e,status:t?"success":"fail"},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}consentRequestTimer(e){return this.timer("consent.request.time",a({requestType:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}invocationCountSummary(){return this.summary("invocation.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}instanceCounter(e){return this.counter("instance.count",a({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceUniqueDomainsCounter(e){return this.counter("instance.domains.count",a({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceUniqWindowsCounter(e){return this.counter("instance.windows.count",a({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceUniqPartnersCounter(e){return this.counter("instance.partners.count",a({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceJoinDelayTimer(){return this.timer("instance.join.delay.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}instanceLateJoinCounter(e){return this.counter("instance.lateJoin.count",a({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceLateJoinDelayTimer(){return this.timer("instance.lateJoin.delay",a({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}instanceLastJoinDelayTimer(){return this.timer("instance.lastJoin.delay",a({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}instanceMsgDeliveryTimer(){return this.timer("instance.message.delivery.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}userIdProvisioningDelayTimer(e){return this.timer("userid.provisioning.delay",a({cachedResponseUsed:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}userIdNotificationDeliveryDelayTimer(){return this.timer("userid.provisioning.delivery.delay",a({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}consentChangeCounter(){return this.counter("leader.consent.change.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}t.a=l},function(e,t,r){"use strict";var n=r(0),i=r(9),o=r(12),s=r(3);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends s.c{constructor(e,t,r,n){super(),c(this,"_consentDataHolder",void 0),c(this,"storedPrivacyData",void 0),c(this,"localStorage",void 0),c(this,"_forceAllowLocalStorageGrant",void 0),this._log=n,this.localStorage=e,this.storageConfig=t,this._consentDataHolder=new o.a,this._forceAllowLocalStorageGrant=r}resetConsentData(e){this._consentDataHolder.reset(),this.storedPrivacyData=void 0,this._forceAllowLocalStorageGrant=e}localStorageGrant(){const e=this._log;if(!0===this._forceAllowLocalStorageGrant)return e.warn("cmpApi: Local storage access granted by configuration override, consent will not be checked"),new s.g(!0,s.d.FORCE_ALLOWED_BY_CONFIG,s.a.NONE);if(this._consentDataHolder.hasValue()&&this._consentDataHolder.getValue().api!==s.a.NONE)return this._consentDataHolder.getValue().localStorageGrant();if(Object(n.isPlainObject)(this.storedPrivacyData)||(t=this.localStorage.getItemWithExpiration(this.storageConfig.PRIVACY),this.storedPrivacyData=t&&JSON.parse(t),e.info("cmpApi: Loaded stored privacy data from local storage",this.storedPrivacyData)),this.storedPrivacyData&&!0===this.storedPrivacyData.id5_consent)return new s.g(!0,s.d.ID5_CONSENT,s.a.NONE);if(!this.storedPrivacyData||!Object(n.isDefined)(this.storedPrivacyData.jurisdiction))return new s.g(!0,s.d.PROVISIONAL,s.a.NONE);var t=this.storedPrivacyData.jurisdiction,t=t in i.a.PRIVACY.JURISDICTIONS&&i.a.PRIVACY.JURISDICTIONS[t];return new s.g(!1===t,s.d.JURISDICTION,s.a.NONE)}setStoredPrivacy(e){const t=this._log;try{Object(n.isPlainObject)(e)?(this.storedPrivacyData=e,this.localStorage.setItemWithExpiration(this.storageConfig.PRIVACY,JSON.stringify(e))):t.error("cmpApi: Cannot store privacy data if it is not an object",e)}catch(e){t.error("cmpApi: Error while storing privacy data",e)}}setConsentData(e){this._log.debug("Set consent data",e);e=a(new s.b,e);this._consentDataHolder.set(e)}getConsentData(){return this._consentDataHolder.getValuePromise()}}t.a=l},function(e,t,r){"use strict";var n=r(0);function i(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=class{constructor(){i(this,"_valuePromise",void 0),i(this,"_value",void 0),i(this,"_resolve",void 0),this.reset()}reset(){const r=this;r._value=void 0,r._valuePromise=new Promise((e,t)=>{r._resolve=e})}set(e){this._value=e,this._resolve(this._value)}getValuePromise(){return this._valuePromise}hasValue(){return Object(n.isDefined)(this._value)}getValue(){return this._value}}},function(e,t,r){"use strict";var n=r(14);function i(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=Object.freeze({TIMER:"TIMER",SUMMARY:"SUMMARY",COUNTER:"COUNTER"});class s{constructor(e,t,r){i(this,"name",void 0),i(this,"tags",void 0),i(this,"values",void 0),this.name=e,this.tags=n.a.from(t),this.type=r,this.values=[]}reset(){this.values=[]}}t.d=class extends s{constructor(e){super(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,o.TIMER)}startMeasurement(){try{return new a(this)}catch(e){return}}record(e){try{isNaN(e)||this.values.push({value:e,timestamp:Date.now()})}catch(e){}}recordNow(){try{var e;this.record(0|(null===(e=performance)||void 0===e?void 0:e.now()))}catch(e){}}};class a{constructor(){this.timer=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,this.startTime=performance.now()}record(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;try{var r=performance.now()-this.startTime|0;let e=t||this.timer;return e&&e.record(r),r}catch(e){return}}}t.c=a;t.a=class extends s{constructor(e){super(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,o.COUNTER)}inc(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;try{return 0===this.values.length?this.values.push({value:e,timestamp:Date.now()}):(this.values[0].value+=e,this.values[0].timestamp=Date.now()),this.values[0].value}catch(e){}}};t.b=class extends s{constructor(e){super(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,o.SUMMARY)}record(e){try{this.values.push({value:e,timestamp:Date.now()})}catch(e){}}}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const o=Object.freeze({});t.a={EMPTY:o,from:function(e){return e?e instanceof Map?Object.fromEntries(e):e:o},toString:function(e){return Array.from(Object.entries(e),e=>{var t=n(e,2),e=t[0],t=t[1];return"".concat(e,"=").concat(t)}).sort().toString()}}},function(e,t,r){"use strict";var i=r(0),n=r(3);r(6),r(4);function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){a(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function a(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(e,t,r,n){a(this,"localStorageGrantChecker",void 0),a(this,"localStorage",void 0),a(this,"_log",void 0),this.localStorageGrantChecker=e,this.localStorage=t,this.storageConfig=r,this._log=n}get(e){const t=this._log;try{const n=this.localStorageGrant();if(n.isDefinitivelyAllowed()){var r=this.localStorage.getItemWithExpiration(e);return t.info("Local storage get key=".concat(e.name," value=").concat(r)),r}t.warn("clientStore.get() has been called without definitive grant",n)}catch(e){t.error(e)}}clear(e){const t=this._log;try{this.localStorage.removeItemWithExpiration(e)}catch(e){t.error(e)}}_put(e,t){const r=this._log;try{const n=this.localStorageGrant();n.isDefinitivelyAllowed()?(r.info("Local storage put key=".concat(e.name," value=").concat(t)),this.localStorage.setItemWithExpiration(e,t)):r.warn("clientStore._put() has been called without definitive grant",n)}catch(e){r.error(e)}}_updateObject(e,t){const r=this._log;try{const n=this.localStorageGrant();n.isDefinitivelyAllowed()?this.localStorage.updateObjectWithExpiration(e,t):r.warn("clientStore._updateObject() has been called without definitive grant",n)}catch(e){r.error(e)}}localStorageGrant(){return this.localStorageGrantChecker()}getResponse(){var e=this.get(this.storageConfig.ID5);return e&&JSON.parse(decodeURIComponent(e))}clearResponse(){this.clear(this.storageConfig.ID5)}putResponseV1(e){this._put(this.storageConfig.ID5,encodeURIComponent(Object(i.isStr)(e)?e:JSON.stringify(e)))}getHashedConsentData(){return this.get(this.storageConfig.CONSENT_DATA)}clearHashedConsentData(){this.clear(this.storageConfig.CONSENT_DATA)}putHashedConsentData(e){e!==new n.b&&this._put(this.storageConfig.CONSENT_DATA,e.hashCode())}getHashedPd(e){return this.get(this.pdCacheConfig(e))}isStoredPdUpToDate(e,t){var r=this.getHashedPd(e),n=Object(i.isEmpty)(t)&&!Object(i.isEmpty)(r),e=Object(i.isEmpty)(r)&&Object(i.isEmpty)(t);return n||e||r===c.makeStoredHash(t)}clearHashedPd(e){this.clear(this.pdCacheConfig(e))}putHashedPd(e,t){this._put(this.pdCacheConfig(e),c.makeStoredHash(t))}getHashedSegments(e){return this.get(this.segmentsCacheConfig(e))}putHashedSegments(e,t){this._put(this.segmentsCacheConfig(e),c.makeStoredHash(JSON.stringify(t)))}storedSegmentsMatchesSegments(e,t){return c.storedDataMatchesCurrentData(this.getHashedSegments(e),c.makeStoredHash(JSON.stringify(t)))}clearHashedSegments(e){this.clear(this.segmentsCacheConfig(e))}static makeStoredHash(e){return Object(i.cyrb53Hash)("string"==typeof e?e:"")}getDateTime(){return new Date(this.get(this.storageConfig.LAST)).getTime()}clearDateTime(){this.clear(this.storageConfig.LAST)}setResponseDateTimeV1(e){this._put(this.storageConfig.LAST,e)}getNb(e){e=this.get(this.nbCacheConfig(e));return e?parseInt(e):0}clearNb(e){this.clear(this.nbCacheConfig(e))}setNbV1(e,t){this._put(this.nbCacheConfig(e),t)}incNbV1(e,t){return t=Math.round(t+1),this.setNbV1(e,t),t}pdCacheConfig(e){return this.storageConfig.PD.withNameSuffixed(e)}nbCacheConfig(e){return this.storageConfig.ID5.withNameSuffixed(e,"nb")}segmentsCacheConfig(e){return this.storageConfig.SEGMENTS.withNameSuffixed(e)}storeResponseV2(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Date.now();this._updateObject(this.storageConfig.ID5.withNameSuffixed("v2",e),e=>s(s({},e),{},{response:t,responseTimestamp:r}))}incNbV2(e){this._updateObject(this.storageConfig.ID5.withNameSuffixed("v2",e),e=>{var t=Object(i.isNumber)(null==e?void 0:e.nb)?Math.round(e.nb)+1:1;return s(s({},e),{},{nb:t})})}setNbV2(e,t){Object(i.isNumber)(t)&&this._updateObject(this.storageConfig.ID5.withNameSuffixed("v2",e),e=>s(s({},e),{},{nb:t}))}static storedDataMatchesCurrentData(e,t){return null==e||e===t}storedConsentDataMatchesConsentData(e){return c.storedDataMatchesCurrentData(this.getHashedConsentData(),e.hashCode())}}t.a=c},function(e,t,r){"use strict";var i=r(10);function n(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function s(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(e,t){s(this,"_metrics",void 0),s(this,"_log",void 0),this._metrics=e,this._log=t}static getChunkUrl(e,t){return"https://c".concat(e,".eu-").concat(t,"-id5-sync.com")}submitExtensionCall(t,r){let n=Object(i.d)();return fetch(t).then(e=>{if(e.ok)return n.record(this._metrics.extensionsCallTimer(r,!0)),e.json();n.record(this._metrics.extensionsCallTimer(r,!1));e="The call to get extensions at ".concat(t," was not ok, status: ").concat(e.status,", statusText: ").concat(e.statusText);return this._log.warn(e),Promise.reject(new Error(e))}).catch(e=>(n.record(this._metrics.extensionsCallTimer(r,!1)),this._log.warn("Got error from ".concat(t," endpoint"),e),{}))}gatherChunks(e,r){if(e){let t=Object(i.d)();return Promise.all(Array.from({length:r.length},(e,t)=>{t=a.getChunkUrl(t,r.urlVersion);return fetch(t).then(e=>{if(e.ok)return e.text();throw new Error("The call to get ".concat(r.name," was not ok, status: ").concat(e.status,", statusText: ").concat(e.statusText))})})).then(e=>(t.record(this._metrics.extensionsCallTimer(r.name,!0)),{[r.name]:e,[r.name+"Version"]:"".concat(r.version)})).catch(e=>(t.record(this._metrics.extensionsCallTimer(r.name,!1)),this._log.warn("Got error when getting ".concat(r.name),e),{}))}return Promise.resolve({})}gather(r){let n=Object(i.d)();return this.submitExtensionCall("https://lb.eu-1-id5-sync.com/lb/v1","lb").then(e=>{var t=this.getChunksEnabled(r,e);return Promise.allSettled([Promise.resolve(e),this.gatherChunks(t,a.CHUNKS_CONFIGS.devChunks),this.gatherChunks(t,a.CHUNKS_CONFIGS.groupChunks)])}).then(e=>{n.record(this._metrics.extensionsCallTimer("all",!0));let t=a.DEFAULT_RESPONSE;return e.forEach(e=>{e.value&&(t=o(o({},t),e.value))}),t}).catch(e=>(n.record(this._metrics.extensionsCallTimer("all",!1)),this._log.error("Got error ".concat(e," when gathering extensions data")),a.DEFAULT_RESPONSE))}getChunksEnabled(e,t){e=e.some(e=>e.pd&&""!==e.pd.trim()),t=null==t?void 0:t.chunks;return 0!==t&&(e||t)}}s(a,"CHUNKS_CONFIGS",Object.freeze({devChunks:{name:"devChunks",urlVersion:3,length:8,version:4},groupChunks:{name:"groupChunks",urlVersion:4,length:8,version:4}})),s(a,"DEFAULT_RESPONSE",{lbCDN:"%%LB_CDN%%"}),t.a={createExtensions:function(e,t){return new a(e,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r=r(18);window.ID5||(window.ID5=r.a)},function(e,t,r){"use strict";var g=r(5),n=r(27),f=r(28),v=r(30),m=r(31),_=r(32),b=r(10),y=r(2);function i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function o(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const O="api";r=new class{set debug(e){Object(g.p)(e)}get debug(){return Object(g.k)()}constructor(){o(this,"loaded",!1),o(this,"_isUsingCdn",!1),o(this,"_referer",!1),o(this,"_version",m.a),o(this,"versions",{}),o(this,"invocationId",0),this.loaded=!0,this._isUsingCdn=!!(document&&document.currentScript&&document.currentScript.src&&0===document.currentScript.src.indexOf("https://cdn.id5-sync.com")),this._referer=Object(n.a)(),this.versions[m.a]=!0}init(e){this.invocationId+=1;const n=new g.a(O,this.invocationId);try{n.info("ID5 API version ".concat(this._version,". Invoking init()"),e);const s=new _.a(e,n),a=s.getOptions(),c=this._configureDiagnostics(a.partnerId,a.diagnostics,n);c&&(c.loadDelayTimer().recordNow(),c.invocationCountSummary().record(this.invocationId));var t=new y.m(window,!s.hasCreativeRestrictions()),r=new y.i(t);const l=a.allowLocalStorageWithoutConsentApi||a.debugBypassConsent,d=new y.f(r,s.storageConfig,l,n);var i=new y.d(()=>d.localStorageGrant(),r,s.storageConfig,n);const u=y.n.createInstance(window,n,c,t);var o=new f.a(c,n);const h=new v.a(s,i,d,c,o,n,u),p=Object(b.d)();return u.on(y.b.CASCADE_NEEDED,this._doCascade(h)).on(y.b.USER_ID_READY,(e,t)=>{try{var r=null!=t&&t.tags?w({},t.tags):{};null!=t&&t.timestamp&&c.userIdNotificationDeliveryDelayTimer(r).record(Date.now()-t.timestamp),p.record(c.userIdProvisioningDelayTimer(e.isFromCache,w(w({},r),{},{isUpdate:h._userIdAvailable})))}catch(e){n.error("Failed to measure provisioning metrics",e)}h.setUserId(e.responseObj,e.isFromCache)}).on(y.b.USER_ID_FETCH_CANCELED,e=>n.info("ID5 User ID fetch canceled:",e.reason)),this._gatherFetchIdData(h).then(e=>{var t;return u.register({source:O,sourceVersion:m.a,sourceConfiguration:{options:h.getOptions()},fetchIdData:e,singletonMode:!0===(null===a||void 0===a||null===(t=a.multiplexing)||void 0===t?void 0:t._disabled),canDoCascade:!a.applyCreativeRestrictions,forceAllowLocalStorageGrant:l,storageExpirationDays:a.storageExpirationDays})}),this._submitRefreshConsent(a,o,u,c,n).then(e=>{e&&d.setConsentData(e)}),n.info("ID5 initialized for partner ".concat(a.partnerId," with referer ").concat(this._referer.referer," and options"),e),h}catch(e){n.error("Exception caught during init()",e)}}_doCascade(s){return e=>{const t=s._logger,r=s.config;var n,i,o=r.getOptions();e.partnerId===o.partnerId&&0<=o.maxCascades&&!r.hasCreativeRestrictions()&&(n=o.partnerUserId&&0<o.partnerUserId.length,i=e.gppString?"&gpp=".concat(e.gppString,":&gpp_sid=").concat(e.gppSid):"",i="".concat("https://id5-sync.com","/").concat(n?"s":"i","/").concat(o.partnerId,"/").concat(o.maxCascades,".gif?")+"id5id=".concat(e.userId,"&o=api").concat(n?"&puid="+o.partnerUserId:"","&gdpr_consent=").concat(e.consentString,"&gdpr=").concat(e.gdprApplies).concat(i),t.info("Opportunities to cascade available",i),Object(g.d)(i))}}_submitRefreshConsent(e,t,r,n,i){let o=Object(b.d)(),s=e.debugBypassConsent?"bypass":e.cmpApi;return t.refreshConsentData(e.debugBypassConsent,e.cmpApi,e.consentData).then(e=>(o.record(n.consentRequestTimer(s,{success:!0,apiType:e.api})),r.updateConsent(e),e)).catch(e=>{i.error("Couldn't get consent data",e),o.record(n.consentRequestTimer(s,{success:!1,error:e.message}))})}refreshId(e){let t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!Object(g.i)(t))throw new Error("Invalid signature for refreshId(): second parameter must be a boolean");const n=e._logger;try{n.info("Invoking refreshId()",arguments),e.startRefresh(t),e.updateOptions(r);var i=e.getOptions();const o=e.instance,s=i.allowLocalStorageWithoutConsentApi||i.debugBypassConsent;this._gatherFetchIdData(e).then(e=>{o.updateFetchIdData(e),o.refreshUid({resetConsent:!0,forceAllowLocalStorageGrant:s,forceFetch:t})}),this._submitRefreshConsent(i,e._consentDataProvider,o,e._metrics,e._logger)}catch(e){n.error("Exception caught from refreshId()",e)}return e}_gatherFetchIdData(t){const r=t.getOptions();var e=t._logger;return Object(g.f)(r.disableUaHints,e).then(e=>({partnerId:r.partnerId,refererInfo:this._referer,origin:O,originVersion:this._version,isUsingCdn:this._isUsingCdn,att:r.att,uaHints:e,abTesting:r.abTesting,segments:r.segments,invalidSegmentsCount:t.getInvalidSegments(),provider:r.provider,pd:r.pd,partnerUserId:r.partnerUserId,refreshInSeconds:r.refreshInSeconds,providedRefreshInSeconds:t.getProvidedOptions().refreshInSeconds,trace:Object(g.l)()}))}_configureDiagnostics(t,r,n){try{let e=new b.a(O,m.a);var i;return e.addCommonTags(w(w({},Object(b.c)(t)),{},{tml:this._referer.topmostLocation})),null!=r&&r.publishingDisabled||(i=Object(b.b)(r.publishingSampleRatio),null!=r&&r.publishAfterLoadInMsec&&0<r.publishAfterLoadInMsec&&e.schedulePublishAfterMsec(r.publishAfterLoadInMsec,i),null!=r&&r.publishBeforeWindowUnload&&e.schedulePublishBeforeUnload(i)),e}catch(e){return void n.error("Failed to configure diagnostics",e)}}};t.a=r},function(e,t,r){"use strict";var o=r(7),a=r(0),c=r(21),l=r(1),d=r(22),u=r(8),h=r(23),p=r(4),g=r(6),f=r(11),v=r(24),m=r(15),_=r(16);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w=Object.freeze({UNKNOWN:"unknown",LEADER:"leader",FOLLOWER:"follower"}),O=Object.freeze({MULTIPLEXING:"multiplexing",SINGLETON:"singleton"}),n=Object.freeze({AWAITING_SCHEDULE:"awaiting_schedule",SKIPPED:"skipped",SCHEDULED:"scheduled",COMPLETED:"completed",CANCELED:"canceled"});class s{constructor(e,t,r){y(this,"properties",void 0),y(this,"knownState",void 0),y(this,"_joinTime",void 0),y(this,"_window",void 0),this.properties=e,this.knownState=t,this._window=r,this._joinTime=performance.now()}getId(){return this.properties.id}isMultiplexingPartyAllowed(){var e;return(null===(e=this.knownState)||void 0===e?void 0:e.operatingMode)===O.MULTIPLEXING}getInstanceMultiplexingLeader(){var e,t;if((null===(e=this.knownState)||void 0===e?void 0:e.operatingMode)===O.MULTIPLEXING)return null===(e=this.knownState)||void 0===e||null===(t=e.multiplexing)||void 0===t?void 0:t.leader}getWindow(){return this._window}}class i{constructor(e){y(this,"_knownValues",[]),y(this,"_counter",void 0),this._counter=e}add(e){e&&-1===this._knownValues.indexOf(e)&&(this._counter.inc(),this._knownValues.push(e))}}class S{constructor(e,t){y(this,"_instancesCounter",void 0),y(this,"_domainsCounter",void 0),y(this,"_windowsCounter",void 0),y(this,"_partnersCounter",void 0);var r=t.id;this._instancesCounter=e.instanceCounter(t.id),this._windowsCounter=new i(e.instanceUniqWindowsCounter(r)),this._partnersCounter=new i(e.instanceUniqPartnersCounter(r)),this._domainsCounter=new i(e.instanceUniqueDomainsCounter(r))}addInstance(e){var t,r,n;this._instancesCounter.inc(),this._partnersCounter.add((null==e||null===(t=e.fetchIdData)||void 0===t?void 0:t.partnerId)|(null==e||null===(r=e.sourceConfiguration)||void 0===r||null===(n=r.options)||void 0===n?void 0:n.partnerId)),this._domainsCounter.add(null==e?void 0:e.domain),this._windowsCounter.add(null==e?void 0:e.href)}}class C{constructor(e){y(this,"_scheduleTime",void 0),y(this,"_closeTime",void 0),y(this,"_timeoutId",void 0),y(this,"_state",n.AWAITING_SCHEDULE),y(this,"_delayMs",void 0),y(this,"_instance",void 0),this._instance=e}schedule(e){const t=this;t._delayMs=e,this._timeoutId=setTimeout(()=>{t._timeoutId&&(t._timeoutId=void 0,t._instance._doElection(),t._closeWithState(n.COMPLETED))},t._delayMs),t._state=n.SCHEDULED,t._scheduleTime=performance.now()}skip(){this._closeWithState(n.SKIPPED)}cancel(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0),this._closeWithState(n.CANCELED)}_closeWithState(e){this._state=e,this._closeTime=performance.now()}}t.a=class{constructor(e,t,r,n){var i,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:l.c;y(this,"properties",void 0),y(this,"_messenger",void 0),y(this,"_knownInstances",new Map),y(this,"_lastJoinedInstance",void 0),y(this,"role",void 0),y(this,"_leader",void 0),y(this,"_mode",void 0),y(this,"_metrics",void 0),y(this,"_logger",void 0),y(this,"_instanceCounters",void 0),y(this,"_election",void 0),y(this,"_window",void 0),y(this,"_storage",void 0);var s=a.generateId();this.properties=b({id:s,version:c.a,href:null===(i=e.location)||void 0===i?void 0:i.href,domain:null===(i=e.location)||void 0===i?void 0:i.hostname},t),this.role=w.UNKNOWN,this._metrics=n,this._instanceCounters=new S(n,this.properties),this._loadTime=performance.now(),this._logger=void 0!==o?new l.b("Instance(id=".concat(s,")"),o):l.c,this._window=e,this._dispatcher=new u.b(this._logger),this._leader=new d.b,this._followerRole=new h.a(this._window,this.properties,this._dispatcher,this._logger),this._election=new C(this),this._storage=r}updateConfig(e){b(this.properties,e)}init(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;let n=this,i=n._window;n._mode=!0===n.properties.singletonMode?O.SINGLETON:O.MULTIPLEXING,n._instanceCounters.addInstance(n.properties),function(r){const n=r._metrics;[100,200,500,1e3,2e3,3e3,5e3].forEach(t=>{setTimeout(()=>{var e=((null===(e=r._knownInstances)||void 0===e?void 0:e.size)||0)+1;n.summary("instance.partySize",{after:t,electionState:r._election._state}).record(e)},t)})}(n),n._messenger=new o.a(n.properties.id,i,n._logger),n._messenger.onAnyMessage((e,t)=>{var r=Date.now()-e.timestamp|0;n._metrics.instanceMsgDeliveryTimer({messageType:e.type,sameWindow:i===t}).record(r),n._logger.debug("Message received",e),n._doFireEvent(u.c.ID5_MESSAGE_RECEIVED,e)}).onMessage(o.c.TYPE,(e,t)=>{let r=b(new o.c,e.payload);void 0===r.isResponse&&(r.isResponse=e.dst!==o.b),n._handleHelloMessage(r,e,t)}).onProxyMethodCall(new o.d(this._logger).registerTarget(o.e.LEADER,n._leader).registerTarget(o.e.FOLLOWER,n._followerRole).registerTarget(o.e.STORAGE,n._storage)),n._mode===O.SINGLETON?(n._election.skip(),n._onLeaderElected(n.properties)):n._mode===O.MULTIPLEXING&&n._election.schedule(e),n._messenger.broadcastMessage(n._createHelloMessage(!1),o.c.TYPE),void 0===i.__id5_instances&&(i.__id5_instances=[]),i.__id5_instances.push(n)}register(e){try{this.updateConfig(e),this.init()}catch(e){this._logger.error("Failed to register integration instance",e)}return this}_handleHelloMessage(e,t,r){this._joinInstance(e,t,r)}deregister(){let e=this._window.__id5_instances;void 0!==e&&e.splice(e.indexOf(this),1),this._messenger&&this._messenger.deregister()}on(e,t){return this._dispatcher.on(e,t),this}_joinInstance(e,t,r){var n=e.isResponse;const i=new s(e.instance,e.instanceState,r);this._knownInstances.get(i.getId())?this._logger.debug("Instance already known",i.getId()):(this._knownInstances.set(i.getId(),i),this._lastJoinedInstance=i,this._instanceCounters.addInstance(i.properties),this._metrics.instanceJoinDelayTimer({election:this._election._state}).record(performance.now()-this._loadTime|0),n?(n=i.getInstanceMultiplexingLeader(),this._mode===O.MULTIPLEXING&&this.role===w.UNKNOWN&&void 0!==n&&(this._logger.info("Joined late, elected leader is",n),this._election.cancel(),this._onLeaderElected(n))):(this._messenger.sendResponseMessage(t,this._createHelloMessage(!0),o.c.TYPE),this._mode===O.MULTIPLEXING&&this.role!==w.UNKNOWN&&this._handleLateJoiner(i)),this._logger.debug("Instance joined",i.getId()),this._doFireEvent(u.c.ID5_INSTANCE_JOINED,i.properties))}_createHelloMessage(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];let r={operatingMode:this._mode,knownInstances:Array.from(this._knownInstances.values()).map(e=>e.properties)};return this._mode===O.MULTIPLEXING&&(r.multiplexing={role:this.role,electionState:null===(e=this._election)||void 0===e?void 0:e._state,leader:this._leader.getProperties()}),new o.c(this.properties,t,r)}_handleLateJoiner(e){this._logger.info("Late joiner detected",e.properties);var t=this._metrics.instanceLateJoinCounter(this.properties.id,{scope:"party"}).inc();this._metrics.instanceLateJoinDelayTimer({election:this._election._state,isFirst:1===t}).record(performance.now()-this._election._closeTime),!e.isMultiplexingPartyAllowed()||this.role!==w.LEADER||!0===(null==(e=this._leader.addFollower(new h.b(e,this._messenger,this._logger)))?void 0:e.lateJoiner)&&this._metrics.instanceLateJoinCounter(this.properties.id,{scope:"leader",unique:!0===(null==e?void 0:e.uniqueLateJoiner)}).inc()}_doFireEvent(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._dispatcher.emit(e,...r)}_actAsLeader(){var e=this.properties;const t=this._logger;var r=this._metrics,n=new p.c(this._storage),i=new p.a(n),o=new g.a(e.storageExpirationDays);const s=new f.a(i,o,e.forceAllowLocalStorageGrant,t);o=new v.a(s,new g.b(new m.a(()=>s.localStorageGrant(),i,o,t)),r,t,_.a.createExtensions(r,t));const a=new d.a(this._window,o,e,n,s,r,t);a.addFollower(this._followerRole),this._leader.assignLeader(a),this._mode===O.MULTIPLEXING&&Array.from(this._knownInstances.values()).filter(e=>e.isMultiplexingPartyAllowed()).map(e=>a.addFollower(new h.b(e,this._messenger,t))),a.start()}_followRemoteLeader(e){this._leader.assignLeader(new d.c(this._messenger,e)),this._logger.info("Following remote leader ",e)}updateConsent(e){this._leader.updateConsent(e)}updateFetchIdData(e){b(this.properties.fetchIdData,e),this._leader.updateFetchIdData(this.properties.id,this.properties.fetchIdData)}refreshUid(e){this._leader.refreshUid(e)}_doElection(){var e=this._election;const t=this._knownInstances;let r=Array.from(t.values()).filter(e=>e.isMultiplexingPartyAllowed()).map(e=>e.properties);r.push(this.properties),this._onLeaderElected(function(e){if(!e||0===e.length)return;e=e.sort((e,t)=>{let r=-a.semanticVersionCompare(e.version,t.version);return 0===r&&(r=e.source.localeCompare(t.source),0===r&&(r=-a.semanticVersionCompare(e.sourceVersion,t.sourceVersion)),0===r&&(r=e.id.localeCompare(t.id))),r});return e[0]}(r));var n=this._lastJoinedInstance;n&&this._metrics.instanceLastJoinDelayTimer().record(Math.max(n._joinTime-e._scheduleTime,0))}_onLeaderElected(e){var t=this;t.role=e.id===t.properties.id?w.LEADER:w.FOLLOWER,t.role===w.LEADER?t._actAsLeader():t.role===w.FOLLOWER&&t._followRemoteLeader(e),t._logger.debug("Leader elected",e.id,"my role",t.role),t._doFireEvent(u.c.ID5_LEADER_ELECTED,t.role,t._leader.getProperties())}}},function(e,t){var r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.a="1.0.18"},function(e,t,r){"use strict";var a=r(1),n=r(7),i=r(3);function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){d(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{constructor(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];d(this,"lateJoiner",!1),d(this,"uniqueLateJoiner",!1),this.lateJoiner=e,this.uniqueLateJoiner=t}}class h{updateConsent(e){}updateFetchIdData(e,t){}refreshUid(e){}addFollower(e){}getProperties(){}}t.a=class extends h{constructor(e,t,r,n,i,o){var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:a.c;super(),d(this,"_followers",void 0),d(this,"_followersRequests",{}),d(this,"_fetcher",void 0),d(this,"_log",void 0),d(this,"_consentManager",void 0),d(this,"_cachedResponse",void 0),d(this,"_inProgressFetch",void 0),d(this,"_queuedRefreshOptions",void 0),d(this,"_lastConsentDataSet",void 0),d(this,"_metrics",void 0),d(this,"_leaderStorage",void 0),this._followers=[],this._fetcher=t,this._properties=r,this._consentManager=i,this._metrics=o,this._window=e,this._leaderStorage=n,this._log=s}_handleRefreshResult(e){const t=e.refreshedResponse;if(void 0!==t){const o=[];var r,n=c(this._followers);try{for(n.s();!(r=n.n()).done;){const s=r.value;var i=t.getResponseFor(s.getId());void 0!==i&&(this._log.debug("Notify uid ready.","Follower:",s.getId(),"Uid:",i),this._notifyUidReady(s,{timestamp:t.timestamp,responseObj:i,isFromCache:!1}),!0===i.cascade_needed&&o.push(s.getId()))}}catch(e){n.e(e)}finally{n.f()}e=e.consentData;void 0!==e&&0<o.length&&this._consentManager.localStorageGrant().isDefinitivelyAllowed()&&this._handleCascade(o,t,e),this._cachedResponse={timestamp:t.timestamp,responseObj:t.getGenericResponse(),isFromCache:!1}}}_handleCachedResponse(e){var t,r={timestamp:e.timestamp,responseObj:e.response,isFromCache:!0},n=c(this._followers);try{for(n.s();!(t=n.n()).done;){const i=t.value;this._log.debug("Notify uid ready.","Follower:",i.getId(),"Uid:",r),this._notifyUidReady(i,r)}}catch(e){n.e(e)}finally{n.f()}this._cachedResponse=r}_notifyUidReady(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r={timestamp:Date.now(),tags:{lateJoiner:r,callType:e.callType}};e.notifyUidReady(t,r)}_handleCascade(e,t,r){var n,i=this._followers.filter(t=>void 0!==e.find(e=>t.getId()===e)&&t.canDoCascade()).sort((e,t)=>{function r(e){var t;return(null===(e=e.getFetchIdData().refererInfo)||void 0===e||null===(t=e.stack)||void 0===t?void 0:t.length)||Number.MAX_SAFE_INTEGER}return r(e)-r(t)});if(0<i.length){const o=i[0];o.notifyCascadeNeeded({partnerId:o.getFetchIdData().partnerId,userId:t.getResponseFor(o.getId()).universal_uid,gdprApplies:r.gdprApplies,consentString:r.consentString,gppString:null===(t=r.gppData)||void 0===t?void 0:t.gppString,gppSid:null===(r=r.gppData)||void 0===r||null===(n=r.applicableSections)||void 0===n?void 0:n.join(",")})}else this._log.error("Couldn't find cascade eligible follower")}_handleCancel(e){var t,r=c(this._followers);try{for(r.s();!(t=r.n()).done;){const n=t.value;n.notifyFetchUidCanceled({reason:e})}}catch(e){r.e(e)}finally{r.f()}}_getId(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._followers.map(e=>{var t=e.getId(),r=this._followersRequests[t]=(this._followersRequests[t]||0)+1,n=this._properties.id;return s(s({},e.getFetchIdData()),{},{integrationId:t,requestCount:r,role:n===e.getId()?"leader":"follower",cacheId:e.getCacheId()})});this._inProgressFetch=!0;const r=this._fetcher.getId(t,e);r.cachedResponse&&this._handleCachedResponse(r.cachedResponse),r.refreshResult.then(e=>{e.refreshedResponse&&this._handleRefreshResult(e),this._handleFetchCompleted()}).catch(e=>{e instanceof i.h?this._handleCancel(e.message):this._handleFailed(e),this._handleFetchCompleted()})}start(){!0!==this._started&&(this._getId(!1),this._started=!0)}refreshUid(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._inProgressFetch?this._queuedRefreshOptions=e:(!0===e.resetConsent&&this._consentManager.resetConsentData(!0===e.forceAllowLocalStorageGrant),this._getId(!0===e.forceFetch))}updateConsent(e){var t,r,n=this._lastConsentDataSet;n&&(t=(null==e?void 0:e.api)!==n.api,r=(null==e?void 0:e.consentString)!==n.consentString,n=(null==e?void 0:e.ccpaString)!==n.ccpaString,(t||r||n)&&this._metrics.consentChangeCounter({apiChanged:t,consentStringChanged:r,usPrivacyChanged:n}).inc()),this._consentManager.setConsentData(e),this._lastConsentDataSet=e}updateFetchIdData(t,e){const r=this._followers.find(e=>e.getId()===t);r.updateFetchIdData(e)}addFollower(t){const r=t.getId();var e,n=this._cachedResponse;const i=this._log;this._followers.push(t),this._window!==t.getWindow()&&(e=t.getStorage(),i.info("Adding follower's",t.getId(),"storage as replica"),this._leaderStorage.addReplica(e)),i.debug("Added follower",r,"last uid",n);let o=new u;return(n||this._inProgressFetch)&&(o.lateJoiner=!0,n&&this._notifyUidReady(t,s(s({},n),{},{isFromCache:!0}),!0),this._followers.filter(e=>e.getId()!==r).some(e=>t.isSimilarTo(e))||(i.debug("Will refresh uid for new joiner",r),this.refreshUid({forceFetch:!0}),o.uniqueLateJoiner=!0)),o}getProperties(){return this._properties}_handleFetchCompleted(){this._inProgressFetch=void 0,this._queuedRefreshOptions&&(this.refreshUid(this._queuedRefreshOptions),this._queuedRefreshOptions=void 0)}_handleFailed(e){this._log.error("Fetch id failed",e);var t,r=c(this._followers);try{for(r.s();!(t=r.n()).done;){const n=t.value;n.notifyFetchUidCanceled({reason:"error"})}}catch(e){r.e(e)}finally{r.f()}}};t.c=class extends h{constructor(e,t){super(),d(this,"_messenger",void 0),d(this,"_leaderInstanceProperties",void 0),this._messenger=e,this._leaderInstanceProperties=t}_sendToLeader(e,t){this._messenger.callProxyMethod(this._leaderInstanceProperties.id,n.e.LEADER,e,t)}updateConsent(e){this._sendToLeader("updateConsent",[e])}refreshUid(e){this._sendToLeader("refreshUid",[e])}updateFetchIdData(e,t){this._sendToLeader("updateFetchIdData",[e,t])}getProperties(){return this._leaderInstanceProperties}};t.b=class extends h{constructor(){super(...arguments),d(this,"_callsQueue",[]),d(this,"_assignedLeader",void 0)}updateConsent(e){this._callOrBuffer("updateConsent",[e])}updateFetchIdData(e,t){this._callOrBuffer("updateFetchIdData",[e,t])}refreshUid(e){this._callOrBuffer("refreshUid",[e])}addFollower(e){return this._callOrBuffer("addFollower",[e])}getProperties(){if(this._assignedLeader)return this._assignedLeader.getProperties()}assignLeader(e){this._assignedLeader=e;var t,r=c(this._callsQueue);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._callAssignedLeader(n.name,n.args)}}catch(e){r.e(e)}finally{r.f()}this._callsQueue=[]}_callOrBuffer(e,t){if(this._assignedLeader)return this._callAssignedLeader(e,t);this._callsQueue.push({name:e,args:t})}_callAssignedLeader(e,t){return this._assignedLeader[e](...t)}}},function(e,t,r){"use strict";var n=r(8),i=r(7),o=r(1),s=r(4),a=r(0);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=Object.freeze({DIRECT_METHOD:"direct_method",POST_MESSAGE:"post_message"});class u{constructor(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:o.c;l(this,"_instanceProperties",void 0),l(this,"_log",void 0),l(this,"callType",void 0),l(this,"_instanceWindow",void 0),this._instanceWindow=t,this._instanceProperties=r,this._log=n,this.callType=e}getId(){return this._instanceProperties.id}getFetchIdData(){return this._instanceProperties.fetchIdData}updateFetchIdData(e){c(this._instanceProperties.fetchIdData,e)}getCacheId(){var e=this._instanceProperties.fetchIdData,e={partnerId:e.partnerId,att:e.att,pd:e.pd,provider:e.provider,abTesting:e.abTesting,segments:JSON.stringify(e.segments),providedRefresh:e.providedRefreshInSeconds};return Object(a.cyrb53Hash)(JSON.stringify(e))}isSimilarTo(e){var t=e._instanceProperties.fetchIdData,r=this._instanceProperties.fetchIdData,n=t.partnerId===r.partnerId,i=t.att===r.att,o=t.pd===r.pd,s=t.provider===r.provider,a=JSON.stringify(t.abTesting)===JSON.stringify(r.abTesting),c=JSON.stringify(t.segments)===JSON.stringify(r.segments),r=t.providedRefreshInSeconds===r.providedRefreshInSeconds,a=n&&i&&o&&s&&a&&c&&r;return this._log.debug("Comparing followers this:",this.getId(),"other:",e.getId(),"areSimilar:",a,"reason:",{samePartner:n,sameAtt:i,samePd:o,sameProvider:s,sameSegments:c,sameProvidedRefresh:r}),a}notifyUidReady(e,t){}notifyFetchUidCanceled(e){}notifyCascadeNeeded(e){}canDoCascade(){return!0===this._instanceProperties.canDoCascade}getStorage(){return s.b}getWindow(){return this._instanceWindow}}t.a=class extends u{constructor(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:o.c;super(d.DIRECT_METHOD,e,t,n),l(this,"_dispatcher",void 0),this._dispatcher=r}notifyUidReady(e,t){this._dispatcher.emit(n.a.USER_ID_READY,e,t)}notifyFetchUidCanceled(e){this._dispatcher.emit(n.a.USER_ID_FETCH_CANCELED,e)}notifyCascadeNeeded(e){this._dispatcher.emit(n.a.CASCADE_NEEDED,e)}};class h extends s.d{constructor(e,t){super(),l(this,"_messenger",void 0),l(this,"_destinationId",void 0),this._messanger=e,this._destinationId=t}getItem(e){}removeItem(e){this._remoteCall("removeItem",[e])}setItem(e,t){this._remoteCall("setItem",[e,t])}_remoteCall(e,t){this._messanger.callProxyMethod(this._destinationId,i.e.STORAGE,e,t)}}t.b=class extends u{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.c;super(d.POST_MESSAGE,e.getWindow(),e.properties,r),l(this,"_messenger",void 0),this._messenger=t}_callProxy(e,t){this._messenger.callProxyMethod(this.getId(),i.e.FOLLOWER,e,t)}notifyUidReady(e,t){this._callProxy("notifyUidReady",[e,t])}notifyFetchUidCanceled(e){this._callProxy("notifyFetchUidCanceled",[e])}notifyCascadeNeeded(e){this._callProxy("notifyCascadeNeeded",[e])}getStorage(){return new h(this._messenger,this.getId())}}},function(e,t,r){"use strict";var u=r(0),_=r(3),h=r(10),b=(r(6),r(4));function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function s(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Date.now();s(this,"timestamp",void 0),s(this,"response",void 0),this.response=e,this.timestamp=t}}class l{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Date.now();s(this,"timestamp",void 0),s(this,"response",void 0),this.response=e,this.timestamp=t}getGenericResponse(){return this.response.generic}getResponseFor(e){if(this.response.responses[e])return o(o({},this.response.generic),this.response.responses[e])}}class c{constructor(e,t,r){s(this,"_extensionsProvider",void 0),s(this,"_metrics",void 0),s(this,"_log",void 0),this._extensionsProvider=e,this._metrics=t,this._log=r}refreshUid(e,r,n,c,l,d){return this._extensionsProvider.gather(e).then(t=>{const i=e.map(e=>this._createRequest(r,e,c,n,l,t,d)),o=this._log,s=this._metrics,a=this;return new Promise((t,r)=>{const n=Object(h.d)();var e="".concat("https://id5-sync.com").concat("/gm/v3");o.info("Fetching ID5 ID from:",e,i),Object(u.ajax)(e,{success:function(e){n.record(null===s||void 0===s?void 0:s.fetchSuccessfulCallTimer());try{t(a._validateResponse(e))}catch(e){r(e)}},error:function(e){n.record(null===s||void 0===s?void 0:s.fetchFailureCallTimer()),r(e)}},JSON.stringify({requests:i}),{method:"POST",withCredentials:!0},o)})})}_validateResponse(e){if(!e||!Object(u.isStr)(e)||e.length<1)throw new Error('Empty fetch response from ID5 servers: "'.concat(e,'"'));var t=JSON.parse(e);if(!Object(u.isPlainObject)(t.generic))throw new Error("Server response failed to validate: ".concat(e));return this._log.info("Valid json response from ID5 received",t),t}_createRequest(e,r,t,n,i,o,s){var a;this._log.info("Create request data for",{fetchIdData:r,consentData:e,signature:t,nbs:n,refreshInSecondUsed:i,extensions:o});var c=r.partnerId;const l={requestId:r.integrationId,requestCount:r.requestCount,role:r.role,cacheId:r.cacheId,partner:c,v:r.originVersion,o:r.origin,tml:null===(a=r.refererInfo)||void 0===a?void 0:a.topmostLocation,ref:null===(a=r.refererInfo)||void 0===a?void 0:a.ref,cu:null===(a=r.refererInfo)||void 0===a?void 0:a.canonicalUrl,u:(null===(a=r.refererInfo)||void 0===a?void 0:a.stack[0])||window.location.href,top:null!==(a=r.refererInfo)&&void 0!==a&&a.reachedTop?1:0,localStorage:!0===s?1:0,nbPage:n[c],id5cdn:r.isUsingCdn,ua:window.navigator.userAgent,att:r.att};c=e.gdprApplies;Object(u.isDefined)(c)&&(l.gdpr=c?1:0);c=e.consentString;Object(u.isDefined)(c)&&(l.gdpr_consent=c),Object(u.isDefined)(e.allowedVendors)&&(l.allowed_vendors=e.allowedVendors),Object(u.isDefined)(e.gppData)&&(l.gpp_string=e.gppData.gppString,l.gpp_sid=e.gppData.applicableSections.join(",")),Object(u.isDefined)(t)&&(l.s=t);t=r.uaHints;Object(u.isDefined)(t)&&(l.ua_hints=t),Object(u.isDefined)(e.ccpaString)&&""!==e.ccpaString&&(l.us_privacy=e.ccpaString),Object(u.objectEntries)({pd:"pd",partnerUserId:"puid",provider:"provider",segments:"segments"}).forEach(e=>{var t=d(e,2),e=t[0],t=t[1];Object(u.isDefined)(r[e])&&(l[t]=r[e])});e=r.abTesting;e&&!0===e.enabled&&(l.ab_testing={enabled:!0,control_group_pct:e.controlGroupPct});e=r.invalidSegmentsCount;return e&&0<e&&(l._invalid_segments=e),r.trace&&(l._trace=!0),l.provided_options={refresh_in_seconds:r.providedRefreshInSeconds},l.used_refresh_in_seconds=i,l.extensions=o,l}}class y{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;s(this,"consentData",void 0),s(this,"refreshedResponse",void 0),this.consentData=e,this.refreshedResponse=t}}class w{constructor(){s(this,"cachedResponse",void 0),s(this,"refreshResult",void 0)}}t.a=class{constructor(e,t,r,n,i){i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new c(i,r,n);s(this,"_store",void 0),s(this,"_consentManager",void 0),s(this,"_uidRefresher",void 0),s(this,"_metrics",void 0),s(this,"_log",void 0),this._store=t,this._consentManager=e,this._metrics=r,this._log=n,this._uidRefresher=i}getId(d){let u=1<arguments.length&&void 0!==arguments[1]&&arguments[1];const e=new w,h=this._log;h.info("Get id",d);const p=this._store,g=this._consentManager,t=this._metrics,r=g.localStorageGrant();let f,v=!1;r.isDefinitivelyAllowed()&&(h.info("Using local storage for cached ID",r),f=p.getStoredDataState(d)),!f||!f.hasValidUid()||f.pdHasChanged||f.segmentsHaveChanged||f.isStoredIdStale()?h.info("No ID5 User ID available from cache",f):(h.info("ID5 User ID available from cache:",f),e.cachedResponse=new a(f.storedResponse,f.storedDateTime),p.incNbs(d,f),v=!0),h.info("Waiting for consent");const m=t.timer("fetch.consent.wait.time",{cachedResponseUsed:v});return e.refreshResult=g.getConsentData().then(t=>{h.info("Consent received",t),m&&m.recordNow();const e=g.localStorageGrant();if(h.info("Local storage grant",e),!e.allowed)throw h.info("No legal basis to use ID5",t),new _.h(t,"No legal basis to use ID5");var r=b.e.checkIfAccessible();f=p.getStoredDataState(d,t);var n=f.consentHasChanged;e.isDefinitivelyAllowed()&&p.storeRequestData(t,d);var i=!f.isResponseComplete(),o=f.refreshInSecondsHasElapsed(),s=f.pdHasChanged,a=f.segmentsHaveChanged;if(i||o||n||s||a||u||!v){h.info("Decided to fetch a fresh ID5 ID",{missingStoredData:i,refreshInSecondsHasElapsed:o,consentHasChanged:n,pdHasChanged:s,segmentsHaveChanged:a,forceFetch:u,cachedResponseUsed:v});var a=null===(s=f)||void 0===s?void 0:s.nb,s=null===(s=f)||void 0===s||null===(c=s.storedResponse)||void 0===c?void 0:c.signature,c=null===(c=f)||void 0===c?void 0:c.refreshInSeconds;const l=this;return h.info("Fetching ID5 ID (forceFetch:".concat(u,")")),this._uidRefresher.refreshUid(d,t,a,s,c,r).then(e=>l.handleSuccessfulFetchResponse(e,d,v,t))}return new y(t)}),e}handleSuccessfulFetchResponse(e,t,r,n){const i=this._log,o=this._consentManager,s=this._store;var a=new l(e);o.setStoredPrivacy(e.generic.privacy);const c=o.localStorageGrant();return c.isDefinitivelyAllowed()?(i.info("Storing ID and request hashes in cache"),s.storeRequestData(n,t),s.storeResponse(t,a,r)):(i.info("Cannot use local storage to cache ID",c),s.clearAll(t)),new y(n,a)}}},function(e,t,r){"use strict";function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function n(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){var t,r;t=n,e=i[r=e],(r=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var i="undefined"!=typeof Promise&&"undefined"!=typeof fetch;t.a=i;t.b=class{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;this.url=e||"https://diagnostics.id5-sync.com/measurements",this._metadata=t}publish(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return e&&0<e.length?(e.forEach(e=>function(r){Object.keys(r).forEach(function(e){var t=r[e];t&&(t instanceof Object?r[e]=JSON.stringify(t):r[e]="".concat(t))})}(e.tags)),fetch(this.url,{method:"POST",headers:{"Content-Type":"text/plain"},mode:"no-cors",body:JSON.stringify({metadata:n(n({},this._metadata),t),measurements:e})})):Promise.resolve()}}},function(e,t,r){"use strict";var n=r(13),i=r(14);function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){a(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function a(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class d{has(e){return void 0!==this[e]}set(e,t){return this[e]=t,this}get(e){return this[e]}values(){return Object.entries(this).map(e=>{e=c(e,2),e[0];return e[1]})}}t.a=class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;a(this,"_registry",void 0),a(this,"commonTags",void 0),a(this,"_scheduled",void 0),this._registry=new d,this.commonTags=i.a.from(e),this.commonPrefix=t}getOrCreate(e,t,r){var n=s(s({},t),this.commonTags),t=this.commonPrefix?this.commonPrefix+"."+e:e,e="".concat(t,"[").concat(i.a.toString(n),"]");return this._registry.has(e)||this._registry.set(e,r(t,n)),this._registry.get(e)}getAllMeasurements(){return this._registry.values().map(e=>({name:e.name,type:e.type,tags:e.tags,values:e.values})).filter(function(e){return e.values&&0<e.values.length})}reset(){Array.from(this._registry.values()).forEach(e=>e.reset())}addCommonTags(e){this.commonTags=s(s({},this.commonTags),i.a.from(e))}timer(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},(e,t)=>new n.d(e,t))}counter(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},(e,t)=>new n.a(e,t))}summary(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},(e,t)=>new n.b(e,t))}publish(){let t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:e=>e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return Promise.resolve(this.getAllMeasurements()).then(e=>t(e,r)).then(e=>this.reset())}schedulePublishAfterMsec(t,r){if(!this._scheduled){let e=this;setTimeout(()=>(e._scheduled=!1,e.publish(r,{trigger:"fixed-time",fixed_time_msec:t})),t),this._scheduled=!0}return this}schedulePublishBeforeUnload(e){let t=this;return addEventListener("beforeunload",()=>t.publish(e,{trigger:"beforeunload"})),this}}},function(e,t,r){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s,n=(s=window,function(){try{var r=a(),n=r.length-1,i=null!==r[n].location||0<n&&null!==r[n-1].referrer,o=function(e){let t=[];var r,n=null;let i=null,o=null,s=null,a=null,c;for(c=e.length-1;0<=c;c--){try{i=e[c].location}catch(e){}if(i)t.push(i),a=a||i;else if(0!==c){r=e[c-1];try{o=r.referrer,s=r.ancestor}catch(e){}o?(t.push(o),a=a||o):s?(t.push(s),a=a||s):t.push(n)}else t.push(n)}return{stack:t,detectedRefererUrl:a}}(r);let e,t;r[r.length-1].canonicalUrl&&(e=r[r.length-1].canonicalUrl);try{t=s.top.document.referrer}catch(e){}return{topmostLocation:o.detectedRefererUrl,ref:t||null,reachedTop:i,numIframes:n,stack:o.stack,canonicalUrl:e}}catch(e){}});function a(){let r=function(){let t=[],r;do{try{r=r?r.parent:s;try{var n=r===s.top;let e={referrer:r.document.referrer||null,location:r.location.href||null,isTop:n};n&&(e=i(e,{canonicalUrl:function(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}(r.document)})),t.push(e)}catch(e){t.push({referrer:null,location:null,isTop:r===s.top})}}catch(e){return t.push({referrer:null,location:null,isTop:!1}),t}}while(r!==s.top);return t}();var n=function(){try{return s.location.ancestorOrigins?s.location.ancestorOrigins:void 0}catch(e){}}();if(n)for(let e=0,t=n.length;e<t;e++)r[e].ancestor=n[e];return r}t.a=n},function(e,t,r){"use strict";var d=r(5),n=r(29),s=r(2);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function u(a){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=a.apply(e,s);function i(e){l(n,t,r,i,o,"next",e)}function o(e){l(n,t,r,i,o,"throw",e)}i(void 0)})}}function a(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=Object.freeze({tcfv1:{objName:"__cmpCall",objKeys:["command","parameter"],returnObjName:"__cmpReturn"},tcfv2:{objName:"__tcfapiCall",objKeys:["command","version"],returnObjName:"__tcfapiReturn"},uspv1:{objName:"__uspapiCall",objKeys:["command","version"],returnObjName:"__uspapiReturn"},gppv1:{objName:"__gppCall",objKeys:["command","parameter"],returnObjName:"__gppReturn"}}),p=Object.freeze({TCF:0,USP:1,GPP:2});class g{constructor(e,t){a(this,"direct",void 0),a(this,"version",void 0),this.direct=e,this.version=t}getConsentData(){var e=this;return u(function*(){return e.getClientConsentData()})()}static create(a){return u(function*(){var e=m._findCmpApi("__gpp"),t=e.cmpApiFrame,e=e.cmpApiFunction;let r,n=!1;if(!t)return a.warn("cmpApi: GPP not found! Using defaults."),Promise.resolve();if(Object(d.j)(e))n=!0,a.info("cmpApi: Detected GPP is directly accessible, calling it now."),r=e;else{a.info("cmpApi: Detected GPP is outside the current iframe. Using message passing.");const s=m._buildCmpSurrogate("gppv1",t);r=function(e,t,r){s(e,r,t)}}var i=yield new Promise(t=>{var e=r("ping",function(e){t(e)});e&&t(e)});switch(i.gppVersion){case f.version:return new f(i,r,n);case v.version:return new v(i,r,n);default:var o="Unsupported version of gpp: ".concat(i.gppVersion);return a.warn(o),Promise.reject(o)}})()}static tcfDataHasLocalStorageGrant(e){return Object(d.h)(e.PurposeConsent)&&!0===e.PurposeConsent[0]&&0<=(null===(e=e.VendorConsent)||void 0===e?void 0:e.indexOf(s.h))}}class f extends g{constructor(e,t,r){super(r,f.version),a(this,"gppFn",void 0),a(this,"ready",void 0),this.gppFn=t,this.ready=this.isReady(e)}isReady(e){return"loaded"===e.cmpStatus&&"visible"!==e.cmpDisplayStatus}getClientConsentData(){var n=this;return u(function*(){n.ready||(n.ready=yield new Promise(t=>{n.gppFn("addEventListener",e=>!!n.isReady(e.pingData)&&void t(!0))}));var e=new Promise(t=>{n.gppFn("getGPPData",e=>{t(e)})}),t=new Promise(t=>{n.gppFn("getSection",e=>{t(e)},"tcfeuv2")}),e=i(yield Promise.all([e,t]),2),t=e[0],e=e[1];const r=new s.g;return r.version=s.a.GPP_V1_0,r.gppString=t.gppString,r.applicableSections=t.applicableSections,e&&(r.localStoragePurposeConsent=g.tcfDataHasLocalStorageGrant(e)),r})()}}a(f,"version","1.0");class v extends g{constructor(e,t,r){super(r,v.version),a(this,"gppFn",void 0),a(this,"readyPingData",void 0),this.gppFn=t,"ready"===e.signalStatus&&(this.readyPingData=e)}getClientConsentData(){var r=this;return u(function*(){return new Promise(t=>{r.readyPingData?t(r.parsePingData(r.readyPingData)):r.gppFn("addEventListener",e=>"ready"===e.pingData.signalStatus&&void t(r.parsePingData(e.pingData)))})})()}parsePingData(e){const t=new s.g;t.gppString=e.gppString,t.version=s.a.GPP_V1_1,t.applicableSections=e.applicableSections;e=null===(e=e.parsedSections)||void 0===e?void 0:e.tcfeuv2;return e&&(t.localStoragePurposeConsent=g.tcfDataHasLocalStorageGrant(e[0])),t}}a(v,"version","1.1");class m{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s.k;a(this,"_lookupInProgress",void 0),a(this,"_log",void 0),a(this,"_metrics",void 0),a(this,"_consentDataPromise",void 0),this._metrics=e,this._log=t}refreshConsentData(e,t,r){const n=this;return n._lookupInProgress||(n._lookupInProgress=!0,n._consentDataPromise=this._lookupConsentData(e,t,r).finally(()=>{n._lookupInProgress=!1})),this._consentDataPromise}_lookupConsentData(e,t,r){if(e){this._log.warn("cmpApi: ID5 is operating in forced consent mode and will not retrieve any consent signals from the CMP");let e=new s.e;return e.forcedGrantByConfig=!0,Promise.resolve(e)}switch(t){case"static":return new Promise((e,t)=>{this._parseStaticConsentData(r,e)});case"iab":return new Promise((e,t)=>{this._lookupIabConsent(e)});default:return this._log.error("cmpApi: Unknown consent API: ".concat(t)),Promise.reject(new Error("Unknown consent API: ".concat(t)))}}_parseStaticConsentData(e,t){e=e||{};var r=new s.e;let n={};Object(d.n)(e.getConsentData)?n=this._parseTcfData(e,1):Object(d.n)(e.getTCData)?n=this._parseTcfData(e.getTCData,2):Object(d.h)(e.allowedVendors)?n={api:s.a.ID5_ALLOWED_VENDORS,allowedVendors:e.allowedVendors.map(e=>e.toString()),gdprApplies:!0}:Object(d.n)(e.getUSPData)?n=this._parseUspData(e.getUSPData):this._log.warn("cmpApi: No static consent data detected! Using defaults."),c(r,n),this._log.info("cmpApi: Detected API '".concat(r.api,"' from static consent data"),e),t(r)}_lookupIabConsent(r){const n=[];let i=new s.e;var e=t=>(n[t]=0,e=>{n[t]||(n[t]=Date.now(),e&&c(i,e),n.every(e=>0<e)&&r(i))}),t=e(p.TCF),o=e(p.USP),e=e(p.GPP);this._lookupGpp(e),this._lookupTcf(t),this._lookupUsp(o)}_lookupUsp(r){var e=m._findCmpApi("__uspapi"),t=e.cmpApiFrame,e=e.cmpApiFunction;let n;if(!t)return this._log.warn("cmpApi: USP not found! Using defaults for CCPA."),void r();n=Object(d.j)(e)?(this._log.info("cmpApi: Detected USP is directly accessible, calling it now."),e):(this._log.info("cmpApi: Detected USP is outside the current iframe. Using message passing."),m._buildCmpSurrogate("uspv1",t));n("getUSPData",1,(e,t)=>{t?r(this._parseUspData(e)):(this._log.error("cmpApi: USP callback not successful. Using defaults for CCPA."),r())})}_lookupGpp(s){var a=this;return u(function*(){var t=Date.now();try{let e=yield g.create(a._log);if(e){var r={gppVersion:e.version,directCmp:e.direct};try{var n=yield e.getConsentData(),i={api:n.version,gppData:n};s(i);var o=Date.now();a._metrics.timer("gpp.delay",r).record(o-t)}catch(e){a._metrics.counter("gpp.failure",c({type:"CONSENT"},r)).inc(),a._log.error("cmpApi: getting GPP consent not successful. Using defaults for Gpp."),s()}}else s()}catch(e){a._metrics.counter("gpp.failure",{type:"CLIENT"}).inc(),a._log.error("cmpApi: creating GPP client not successful. Using defaults for Gpp."),s()}})()}static _buildCmpSurrogate(c,l){return(e,t,r)=>{const n=Math.random()+"",i=h[c],o={},s={};s[i.objKeys[0]]=e,s[i.objKeys[1]]=t,s.callId=n,o[i.objName]=s;const a=e=>{e=Object(d.e)(e,"data.".concat(i.returnObjName));e&&e.callId===n&&(void 0!==(e=r(e.returnValue,e.success))&&!0!==e||window.removeEventListener("message",a))};window.addEventListener("message",a,!1),l.postMessage(o,"*")}}_lookupTcf(e){var t=m._findTCF(),r=t.cmpVersion,n=t.cmpFrame,t=t.cmpFunction;if(!n)return this._log.warn("cmpApi: TCF not found! Using defaults for GDPR."),void e();Object(d.j)(t)?this._lookupDirectTcf(r,t,e):(this._log.info("cmpApi: Detected TCF is outside the current iframe. Using message passing."),this._lookupMessageTcf(r,n,e))}_lookupMessageTcf(e,t,r){t=m._buildCmpSurrogate(1===e?"tcfv1":"tcfv2",t);this._lookupDirectTcf(e,t,r)}_lookupDirectTcf(e,t,n){const i=this._log,o={},s={},a=(e,t,r)=>{i.info("cmpApi: TCFv".concat(e," - Received a call back: ").concat(t),r)},c=(e,t)=>{i.error("cmpApi: TCFv".concat(e," - Received insuccess: ").concat(t,". Please check your CMP setup. Using defaults for GDPR."))};var r,l=r=>(s[r]=!1,(e,t)=>{s[r]=!0,t?(a(1,r,e),o[r]=e):c(1,r),Object.values(s).every(e=>e)&&n(this._parseTcfData(o,1))}),d=(e,t)=>(a(2,"event",e),t?!(!e||!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus)&&void n(this._parseTcfData(e,2)):(c(2,"addEventListener"),void n()));1===e?(r=l("getConsentData"),l=l("getVendorConsents"),t("getConsentData",null,r),t("getVendorConsents",null,l)):2===e&&t("addEventListener",e,d)}_parseUspData(e){if(Object(d.n)(e)&&Object(d.o)(e.uspString))return{api:s.a.USP_V1,ccpaString:e.uspString};this._log.error("cmpApi: No or malformed USP data. Using defaults for CCPA.")}_parseTcfData(e,t){let r=this._log,n,i;if(1===t)n=m._isValidV1ConsentObject,i=m._normalizeV1Data;else{if(2!==t)return void r.error("cmpApi: No or malformed CMP data. Using defaults for GDPR.");n=m._isValidV2ConsentObject,i=m._normalizeV2Data}if(n(e))return i(e);r.error("cmpApi: Invalid CMP data. Using defaults for GDPR.",e)}static _isValidV1ConsentObject(e){var t=Object(d.e)(e,"getConsentData.gdprApplies");return!!Object(d.i)(t)&&(!1===t||Object(d.o)(e.getConsentData.consentData)&&Object(d.n)(e.getVendorConsents)&&1<Object.keys(e.getVendorConsents).length)}static _isValidV2ConsentObject(e){var t=e&&e.gdprApplies,e=e&&e.tcString;return!1===t||Object(d.o)(e)}static _normalizeV1Data(e){return{consentString:e.getConsentData.consentData,localStoragePurposeConsent:Object(d.e)(e,"getVendorConsents.purposeConsents.1"),gdprApplies:e.getConsentData.gdprApplies,api:s.a.TCF_V1}}static _normalizeV2Data(e){let t=Object(d.e)(e,"purpose.consents.1");return Object(d.i)(t)||(t=Object(n.a)(e.tcString,1)),{consentString:e.tcString,localStoragePurposeConsent:t,gdprApplies:e.gdprApplies,api:s.a.TCF_V2}}static _findTCF(){let e=0,t=window,r,n;for(;!r;){try{if("function"==typeof t.__tcfapi||"function"==typeof t.__cmp){n="function"==typeof t.__tcfapi?(e=2,t.__tcfapi):(e=1,t.__cmp),r=t;break}}catch(e){}try{if(t.frames.__tcfapiLocator){e=2,r=t;break}}catch(e){}try{if(t.frames.__cmpLocator){e=1,r=t;break}}catch(e){}if(t===window.top)break;t=t.parent}return{cmpVersion:e,cmpFrame:r,cmpFunction:n}}static _findCmpApi(e){let t=window,r,n;for(;!r;){try{if("function"==typeof t[e]){n=t[e],r=t;break}}catch(e){}try{if(t.frames["".concat(e,"Locator")]){r=t;break}}catch(e){}if(t===window.top)break;t=t.parent}return{cmpApiFrame:r,cmpApiFunction:n}}}t.a=m},function(e,t,r){"use strict";t.a=function(e,t){var r=152+t-1,t=~~(r/i);if(!e||"C"!==e.charAt(0)||e.length<=t)return;t=e.charAt(t),t=n[t];if(void 0===t)return;r%=i,r=1<<i-r-1,r&=t;return 0!=r};const n={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"-":62,_:63,"+":62,"/":63},i=6},function(e,t,r){"use strict";var o=r(5),n=r(2);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(e,t,r,n,i,o,s){a(this,"_availableCallbackTimerId",void 0),a(this,"_availableCallbackFired",!1),a(this,"_availableCallback",void 0),a(this,"_updateCallback",void 0),a(this,"_refreshCallbackTimerId",void 0),a(this,"_refreshCallbackFired",!1),a(this,"_refreshCallback",void 0),a(this,"_isExposed",void 0),a(this,"_fromCache",void 0),a(this,"_isRefreshing",!1),a(this,"_isRefreshingWithFetch",!1),a(this,"_userId",void 0),a(this,"_ext",void 0),a(this,"_userIdAvailable",!1),a(this,"_userIdAvailablePromise",void 0),a(this,"_userIdAvailablePromiseResolver",void 0),a(this,"invocationId",void 0),a(this,"config",void 0),a(this,"clientStore",void 0),a(this,"consentManagement",void 0),a(this,"_consentDataProvider",void 0),a(this,"_metrics",void 0),a(this,"_logger",void 0),this.config=e,this.clientStore=t,this.consentManagement=r,this._metrics=n,this._consentDataProvider=i,this._logger=o,this.instance=s,this._userIdAvailablePromise=new Promise(e=>{this._userIdAvailablePromiseResolver=e})}getOptions(){return this.config.getOptions()}getProvidedOptions(){return this.config.getProvidedOptions()}getInvalidSegments(){return this.config.getInvalidSegments()}updateOptions(e){return this.config.updOptions(e)}startRefresh(e){this._isRefreshing=!0,this._isRefreshingWithFetch=e}setUserId(e,t){const r=this;var n=e.universal_uid;if(this._isExposed=!0,Object(o.n)(e.ab_testing))switch(e.ab_testing.result){case"normal":break;default:case"error":this._logger.error("Id5Status: There was an error with A/B Testing. Make sure controlGroupRatio is a number >= 0 and <= 1");break;case"control":this._isExposed=!1,this.info("User is in control group!")}var i=this._userId!==n||!1===Object(o.c)(this._ext,e.ext);this._userIdAvailable=!0,this._userId=n,this._userIdAvailablePromiseResolver(n),this._ext=e.ext,this._fromCache=t,this.info("User id updated, hasChanged: ".concat(i,", fromCache: ").concat(t)),Object(o.j)(this._availableCallback)&&!1===this._availableCallbackFired&&(this._availableCallbackTimerId&&(this.info("Cancelling pending onAvailableCallback watchdog"),clearTimeout(this._availableCallbackTimerId),this._availableCallbackTimerId=void 0),this._availableCallbackTimerId=setTimeout(()=>s.doFireOnAvailableCallBack(r),0)),this._isRefreshing&&Object(o.j)(this._refreshCallback)&&!1===this._refreshCallbackFired&&(!1!==t&&!1!==this._isRefreshingWithFetch||(this._refreshCallbackTimerId&&(this.info("Cancelling pending onRefreshCallback watchdog"),clearTimeout(this._refreshCallbackTimerId),this._refreshCallbackTimerId=void 0),this._refreshCallbackTimerId=setTimeout(()=>s.doFireOnRefreshCallBack(r),0))),i&&Object(o.j)(this._updateCallback)&&setTimeout(()=>s.doFireOnUpdateCallBack(r),0)}getUserId(){return!1===this._isExposed?"0":this._userId}getLinkType(){return!1===this._isExposed?0:this.getExt().linkType}getExt(){var e=!1===this._isExposed?{}:this._ext;return i({abTestingControlGroup:!this.exposeUserId()},e)}isFromCache(){return this._fromCache}exposeUserId(){return this._isExposed}getUserIdAsEid(){return{source:n.c.ID5_EIDS_SOURCE,uids:[{atype:1,id:this.getUserId(),ext:this.getExt()}]}}onAvailable(e,t){if(!Object(o.j)(e))throw new Error("onAvailable expect a function");if(Object(o.j)(this._availableCallback))this.info("onAvailable was already called, ignoring");else{this._availableCallback=e;const r=this;this._userIdAvailable?(this.info("User id already available firing callback immediately"),this._availableCallbackTimerId=setTimeout(()=>s.doFireOnAvailableCallBack(r),0)):0<t&&(this._availableCallbackTimerId=setTimeout(()=>s.doFireOnAvailableCallBack(r),t))}return this}onUpdate(e){if(!Object(o.j)(e))throw new Error("onUpdate expect a function");this._updateCallback=e;const t=this;return this._userIdAvailable&&setTimeout(()=>s.doFireOnUpdateCallBack(t),0),this}onRefresh(e,t){if(!Object(o.j)(e))throw new Error("onRefresh expect a function");this._refreshCallbackTimerId&&(clearTimeout(this._refreshCallbackTimerId),this._refreshCallbackTimerId=void 0),this._refreshCallback=e;const r=this;return!0===this._isRefreshing&&!1===this._isRefreshingWithFetch&&this._userIdAvailable?this._refreshCallbackTimerId=setTimeout(()=>s.doFireOnRefreshCallBack(r),0):0<t&&(this._refreshCallbackTimerId=setTimeout(()=>s.doFireOnRefreshCallBack(r),t)),this}localStorageGrant(){return this.clientStore.localStorageGrant()}info(e){this._logger.info("Id5Status: "+e)}collectEvent(t,r){const n=e=>{e=new Request("https://id5-sync.com/event",{method:"POST",mode:"no-cors",body:JSON.stringify({partnerId:this.config.getOptions().partnerId,id5id:e,eventType:t,metadata:r})});return this.info("Sending event",e),fetch(e).catch(e=>this._logger.error("Error while sending event to ID5 of type "+t,e))};return this._userIdAvailable?n(this._userId):this._userIdAvailablePromise.then(e=>n(e))}static doFireOnAvailableCallBack(e){e.info("Id5Status.doFireOnAvailableCallBack"),e._availableCallbackFired=!0,e._availableCallbackTimerId=void 0,e._availableCallback(e)}static doFireOnUpdateCallBack(e){e.info("Id5Status.doFireOnUpdateCallBack"),e._updateCallback(e)}static doFireOnRefreshCallBack(e){e.info("Id5Status.doFireOnRefreshCallBack"),e._refreshCallbackFired=!0,e._refreshCallbackTimerId=void 0,e._isRefreshing=!1,e._isRefreshingWithFetch=!1,e._refreshCallback(e)}}t.a=s},function(e,t,r){"use strict";t.a="1.0.56"},function(e,t,r){"use strict";var u=r(0),h=r(5),n=r(2);function p(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function g(e,t,r){return(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);t=r.call(e,t||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.k;if(g(this,"invocationId",void 0),g(this,"options",void 0),g(this,"providedOptions",void 0),g(this,"invalidSegments",void 0),this._log=t,this.options={debugBypassConsent:!1,allowLocalStorageWithoutConsentApi:!1,cmpApi:"iab",consentData:{getConsentData:{consentData:void 0,gdprApplies:void 0},getVendorConsents:{}},refreshInSeconds:7200,partnerId:void 0,partnerUserId:void 0,callbackOnAvailable:void 0,callbackOnUpdates:void 0,callbackTimeoutInMs:void 0,pd:void 0,abTesting:{enabled:!1,controlGroupPct:0},provider:void 0,maxCascades:8,applyCreativeRestrictions:!1,acr:!1,segments:void 0,disableUaHints:!1,storageExpirationDays:void 0,att:void 0,diagnostics:{publishingDisabled:!1,publishAfterLoadInMsec:3e4,publishBeforeWindowUnload:!0,publishingSampleRatio:.01},multiplexing:{_disabled:!1}},this.providedOptions={},!Object(h.m)(e.partnerId)&&!Object(h.o)(e.partnerId))throw new Error("partnerId is required and must be a number or a string");this.invalidSegments=0,this.updOptions(e),this.storageConfig=new n.l(e.storageExpirationDays)}getOptions(){return this.options}getProvidedOptions(){return this.providedOptions}getInvalidSegments(){return this.invalidSegments}hasCreativeRestrictions(){return this.options.applyCreativeRestrictions||this.options.acr}updOptions(a){const c=this,l=c._log;if(Object(h.n)(a)){this.setPartnerId(a.partnerId);const d=(e,t)=>{this.options[e]=t,this.providedOptions[e]=t};Object.keys(a).forEach(e=>{if("segments"===e){const n=a[e],i=[];Object(u.isDefined)(n)&&(Object(h.h)(n)?(n.forEach((e,t)=>{t="segments[".concat(t,"]");return Object(h.h)(e.ids)&&Object(h.b)(e.ids,h.o)?e.ids.length<1?(l.error("Config option ".concat(t,".ids should contain at least one segment ID")),void(c.invalidSegments+=1)):Object(h.o)(e.destination)?void i.push(e):(v(l,"".concat(t,".destination"),"String",e.destination),void(c.invalidSegments+=1)):(v(l,"".concat(t,".ids"),"Array of String",e.ids),void(c.invalidSegments+=1))}),d(e,i)):v(l,e,"Array",n))}else if("diagnostics"===e){const o=this.options.diagnostics,s=a.diagnostics;if(Object(h.g)(s,f.configTypes.diagnostics)){let t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach(function(e){g(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},o);Object.keys(s).forEach(e=>{void 0!==o[e]&&typeof o[e]==typeof s[e]&&(t[e]=s[e])}),this.options[e]=t}this.providedOptions[e]=a[e]}else{var t,r;"partnerId"!==e&&(t=f.configTypes[e],r=a[e],Object(u.isDefined)(r)&&(Object(h.g)(r,t)?d(e,r):v(l,e,t,r)))}})}else l.error("Config options must be an object")}setPartnerId(e){let t;if(Object(h.o)(e)){if(t=parseInt(e),isNaN(t)||t<0)throw new Error("partnerId is required and must parse to a positive integer")}else Object(h.m)(e)&&(t=e);if(Object(h.m)(t)){if(Object(h.m)(this.options.partnerId)&&t!==this.options.partnerId)throw new Error("Cannot update config with a different partnerId");this.options.partnerId=t,this.providedOptions.partnerId=e}}}function v(e,t,r,n){e.error("Config option ".concat(t," must be of type ").concat(r," but was ").concat(toString.call(n),". Ignoring..."))}g(t.a=f,"configTypes",{debugBypassConsent:"Boolean",allowLocalStorageWithoutConsentApi:"Boolean",cmpApi:"String",consentData:"Object",refreshInSeconds:"Number",partnerUserId:"String",callbackOnAvailable:"Function",callbackOnUpdates:"Function",callbackTimeoutInMs:"Number",pd:"String",abTesting:"Object",provider:"String",maxCascades:"Number",applyCreativeRestrictions:"Boolean",acr:"Boolean",disableUaHints:"Boolean",storageExpirationDays:"Number",att:"Number",diagnostics:"Object",multiplexing:"Object",dynamicConfig:"Object"})}]);ryParams.authuser);b.session_state=null;a.expires_at&&(b.expires_at=parseInt(a.expires_at/1E3).toString());a.expires_in&&(b.expires_in=a.expires_in.toString());a.first_issued_at&&(b.issued_at=parseInt(a.first_issued_at/1E3).toString(),delete b.first_issued_at);_.Fw(b);return b};
GA=function(a){if(void 0===a.include_granted_scopes){var b=_.Hf("include_granted_scopes");a.include_granted_scopes=!!b}};HA=function(a){window.console&&("function"===typeof window.console.warn?window.console.warn(a):"function"===typeof window.console.log&&window.console.log(a))};
IA=function(a){var b=a||{},c={};_.uc(EA,function(d){null!=b[d]&&(c[d]=b[d])});a=_.Hf("googleapis/overrideClientId");null!=a&&(c.client_id=a);GA(c);"string"===typeof b.scope?c.scope=b.scope:Array.isArray(b.scope)&&(c.scope=b.scope.join(" "));null!=b["openid.realm"]&&(c.openid_realm=b["openid.realm"]);null!=b.cookie_policy?c.cookie_policy=b.cookie_policy:null!=b.cookiepolicy&&(c.cookie_policy=b.cookiepolicy);null==c.login_hint&&null!=b.user_id&&(c.login_hint=b.user_id);try{_.vx(c.cookie_policy)}catch(d){c.cookie_policy&&
HA("The cookie_policy configuration: '"+c.cookie_policy+"' is illegal, and thus ignored."),delete c.cookie_policy}null!=b.hd&&(c.hosted_domain=b.hd);null==c.prompt&&(1==b.immediate||"true"==b.immediate?c.prompt="none":"force"==b.approval_prompt&&(c.prompt="consent"));"none"==c.prompt&&(c.session_selection="first_valid");"none"==c.prompt&&"offline"==c.access_type&&delete c.access_type;"undefined"===typeof c.authuser&&(a=_.bj(),null!=a&&(c.authuser=a));a=b.redirect_uri||_.Hf("oauth-flow/redirectUri");
null!=a&&"postmessage"!=a&&(c.redirect_uri=a);c.gsiwebsdk="shim";return c};
JA=function(a,b){var c=IA(a),d=new _.el(function(e,f){_.by(c,function(h){var k=h||{};_.uc(DA,function(l){null==k[l]&&(k[l]=c[l])});!c.include_granted_scopes&&a&&a.scope&&(k.scope=a.scope);a&&null!=a.state&&(k.state=a.state);k.error?("none"==c.prompt&&"user_logged_out"==k.error&&(k.error="immediate_failed_user_logged_out"),f(k)):(h=FA(k),null!=h.authuser&&_.If("googleapis.config/sessionIndex",h.authuser),e(h))})});b&&d.then(b,b);return d};KA=_.pj.SS;LA=null;
_.OA=function(a,b){if("force"!==a.approvalprompt){a=_.MA(a);a.prompt="none";delete a.redirect_uri;delete a.approval_prompt;delete a.immediate;if(b=!b)LA?(a.client_id!==LA.client_id&&window.console&&window.console.log&&window.console.log("Ignoring mismatched page-level auth param client_id="+a.client_id),b=!0):(LA=a,b=!1);b||NA(a)}};
_.MA=function(a){var b=a.redirecturi||"postmessage",c=(0,_.Ic)((a.scope||"").replace(/[\s\xa0]+/g," "));b={client_id:a.clientid,redirect_uri:b,response_type:"code token id_token gsession",scope:c};a.approvalprompt&&(b.approval_prompt=a.approvalprompt);a.state&&(b.state=a.state);a.openidrealm&&(b["openid.realm"]=a.openidrealm);c="offline"==a.accesstype?!0:(c=a.redirecturi)&&"postmessage"!=c;c&&(b.access_type="offline");a.requestvisibleactions&&(b.request_visible_actions=(0,_.Ic)(a.requestvisibleactions.replace(/[\s\xa0]+/g,
" ")));a.after_redirect&&(b.after_redirect=a.after_redirect);a.cookiepolicy&&"none"!==a.cookiepolicy&&(b.cookie_policy=a.cookiepolicy);"undefined"!=typeof a.includegrantedscopes&&(b.include_granted_scopes=a.includegrantedscopes);a.e&&(b.e=a.e);(a=a.authuser||_.Hf("googleapis.config/sessionIndex"))&&(b.authuser=a);(a=_.Hf("useoriginassocialhost"))&&(b.use_origin_as_socialhost=a);return b};NA=function(a){_.Vp("waaf0","signin","0");JA(a,function(b){_.Vp("waaf1","signin","0");BA(b)})};
_.PA=function(a){a=_.MA(a);_.If("oauth-flow/authWindowWidth",445);_.If("oauth-flow/authWindowHeight",615);NA(a)};_.QA=function(a){_.Hz.unsubscribe(_.Iz,a);_.Hz.subscribe(_.Iz,a)};var XA,$A;_.SA=function(a){return a.cookiepolicy?!0:(_.RA("cookiepolicy is a required field.  See https://developers.google.com/+/web/signin/#button_attr_cookiepolicy for more information."),!1)};_.RA=function(a){window.console&&(window.console.error?window.console.error(a):window.console.log&&window.console.log(a))};_.WA=function(a,b){var c=_.lp();_.qf(a,c);c=vA(c);if(_.SA(c)){var d=_.TA();_.UA(c);b?_.yf(b,"click",function(){_.VA(c,d)}):_.VA(c,d)}};
_.TA=function(){var a=new XA;_.QA(function(b){a.OI&&b&&(b.access_token&&_.If("isPlusUser",!0),b["g-oauth-window"]&&(a.OI=!1,_.Wg.warn("OTA app install is no longer supported.")))});return a};XA=function(){this.OI=!1};_.UA=function(a){a=_.YA(a);_.ZA(a.callback);_.AA(function(){_.OA(a)})};_.YA=function(a){$A(a);a.redirecturi&&delete a.redirecturi;Nz(function(b){return a[b]})||(a.authuser=0);return a};$A=function(a){/^\s*$/.test(a.scope||"")&&(a.scope="https://www.googleapis.com/auth/plus.login")};
_.ZA=function(a){if("string"===typeof a)if(window[a])a=window[a];else{_.RA('Callback function named "'+a+'" not found');return}a&&_.QA(a)};_.VA=function(a,b){b.OI=!0;a=_.YA(a);_.PA(a)};_.r("gapi.auth.authorize",JA);_.r("gapi.auth.checkSessionState",function(a,b){var c=_.of();c.client_id=a.client_id;c.session_state=a.session_state;_.AA(function(){mA()?iA.send("check_session_state",c,function(d){b.call(null,d[0])},_.Jn):_.ah.call(_.Fz,"check_session_state",jA(function(d){b.call(null,d)}),c.session_state,c.client_id)})});_.r("gapi.auth.getAuthHeaderValueForFirstParty",KA);_.r("gapi.auth.getToken",Wz);
_.r("gapi.auth.getVersionInfo",function(a,b){_.AA(function(){var c=_.nj()||"",d=null,e=null;c&&(e=c.split(" "),2==e.length&&(d=e[1]));d?mA()?iA.send("get_versioninfo",{xapisidHash:d,sessionIndex:b},function(f){a(f[0])},_.Jn):_.ah.call(_.Fz,"get_versioninfo",jA(function(f){a(f)}),d,b):a()})});_.r("gapi.auth.init",_.AA);_.r("gapi.auth.setToken",_.Xz);_.r("gapi.auth.signIn",function(a){_.WA(a)});_.r("gapi.auth.signOut",function(){var a=Wz();a&&CA(a,a.cookie_policy)});
_.r("gapi.auth.unsafeUnpackIdToken",xA);_.r("gapi.auth._pimf",_.OA);_.r("gapi.auth._oart",uA);_.r("gapi.auth._guss",function(a){return Zz(a).read()});
var aB=_.lp();aB.clientid&&aB.scope&&aB.callback&&!_.Hf("disableRealtimeCallback")&&_.UA(aB);
});
// Google Inc.
(e,n){return t(e,n)}:function(e){return function(e,t){return e[t]}(e,t)}}}function wa(e,t){var n=b.TD,r=Ho({},Sn.settingsFor(null));if(r[b.k2.xn]||(r[b.k2.xn]=function(){var e=b.TD;return[ha(e.BIDDER,"bidderCode"),ha(e.AD_ID,"adId"),ha(e.PRICE_BUCKET,ma()),ha(e.SIZE,"size"),ha(e.DEAL,"dealId"),ha(e.SOURCE,"source"),ha(e.FORMAT,"mediaType"),ha(e.ADOMAIN,ga()),ha(e.ACAT,ba()),ha(e.DSP,ya()),ha(e.CRID,va())]}()),"video"===e){var i=r[b.k2.xn].slice();if(r[b.k2.xn]=i,[n.UUID,n.CACHE_ID].forEach((function(e){void 0===u(i,(function(t){return t.key===e}))&&i.push(ha(e,"videoCacheKey"))})),_.getConfig("cache.url")&&(!t||!1!==Sn.get(t,"sendStandardTargeting"))){var o=wt(_.getConfig("cache.url"));void 0===u(i,(function(e){return e.key===n.CACHE_HOST}))&&i.push(ha(n.CACHE_HOST,(function(e){return y(e,"adserverTargeting.".concat(n.CACHE_HOST))?e.adserverTargeting[n.CACHE_HOST]:o.hostname})))}}return r}function Ia(e,t,n,r){var i=t[b.k2.xn];return n.size=n.getSize(),(i||[]).forEach((function(i){var o=i.key,a=i.val;if(e[o]&&_e("The key: "+o+" is being overwritten"),qe(a))try{a=a(n,r)}catch(e){ke("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==b.TD.DEAL&&o!==b.TD.ACAT&&o!==b.TD.DSP&&o!==b.TD.CRID||!He(a)&&null!=a?e[o]=a:Ee("suppressing empty key '"+o+"' from adserver targeting")})),e}function Sa(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oa.apply(this,arguments)}function Aa(e){Oa(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.transactionId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===n}))},getMediaTypes:function(e){var t=e.transactionId,n=e.requestId;if(null!=n){var r=this.getBidRequest({requestId:n});if(null!=r&&(null==t||r.transactionId===t))return r.mediaTypes}else if(null!=t){var i=this.getAdUnit({transactionId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,r=t.bidderRequestId;if(null!=n||null!=r){var i=e().flatMap((function(e){return e.getBidRequests()}));return null!=r&&(i=i.filter((function(e){return e.bidderRequestId===r}))),null==n?i[0]:i.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var xa=1,ja=[];function Ca(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:xa)}function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||_a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e){return function(e){if(Array.isArray(e))return ka(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){if(e){if("string"==typeof e)return ka(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ka(e,t):void 0}}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?xa!==(xa=e.ttlBuffer)&&ja.forEach((function(e){return e(xa)})):ke("Invalid value for ttlBuffer",e.ttlBuffer)}));var Ba="minBidCacheTTL";var Ra=function(){var e,t=null,n=Bt({startTime:function(e){return e.end.then((function(){return e.getAuctionEnd()}))},ttl:function(e){return null==t?null:e.end.then((function(){return 1e3*Math.max.apply(Math,[t].concat(Ea(e.getBidsReceived().map(Ca))))}))}});e=function(){null!=t&&n.refresh()},ja.push(e),_.getConfig(Ba,(function(e){t!==(t="number"==typeof(t=null==e?void 0:e[Ba])?t:null)&&n.refresh()}));var r={};function i(e){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.getAuctionId()===e)return i}}catch(e){r.e(e)}finally{r.f()}}function o(){return n.toArray().flatMap((function(e){return e.getBidsReceived()}))}return r.addWinningBid=function(e){var t=Sr(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");var n=i(e.auctionId);n?(e.status=b.UE.fe,n.addWinningBid(e)):_e("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===Jo}},getAdUnitCodes:{post:Ze}}).forEach((function(e){var t=Ta(e,2),i=t[0],o=t[1],a=o.name,u=void 0===a?i:a,c=o.pre,s=o.post,d=null==c?function(e){return e[u]()}:function(e){return c(e)?e[u]():[]},l=null==s?function(e){return e}:function(e){return e.filter(s)};r[i]=function(){return l(n.toArray().flatMap(d))}})),r.getAllBidsForAdUnitCode=function(e){return o().filter((function(t){return t&&t.adUnitCode===e}))},r.createAuction=function(e){var t=ta(e);return function(e){n.add(e)}(t),t},r.findBidByAdId=function(e){return o().find((function(t){return t.adId===e}))},r.getStandardBidderAdServerTargeting=function(){return wa()[b.k2.xn]},r.setStatusForBids=function(e,t){var n=r.findBidByAdId(e);if(n&&(n.status=t),n&&t===b.UE.CK){var o=i(n.auctionId);o&&o.setBidTargeting(n)}},r.getLastAuctionId=function(){var e=n.toArray();return e.length&&e[e.length-1].getAuctionId()},r.clearAllAuctions=function(){n.clear()},r.index=new Aa((function(){return n.toArray()})),r}();function Pa(e){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(e)}function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ua.apply(this,arguments)}function Da(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Na(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||Na(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){if(e){if("string"==typeof e)return Ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(e,t):void 0}}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){La(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Pa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pa(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wa=[],Ha=Object.keys(b.FY).map((function(e){return b.FY[e]})),Va={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},Ga=b.s$,Xa=b.oF,$a=b.V1,Ja=b.zA,Ka=b.FY,Ya=lu($a),Qa=lu(Ga),Za={img:1,js:2,1:"img",2:"js"},eu={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function tu(e){if(e&&e.type&&function(e){if(!e||!a(Object.keys(Va),e))return ke("".concat(e," nativeParam is not supported")),!1;return!0}(e.type)&&(e=Va[e.type]),!e||!e.ortb||nu(e.ortb))return e}function nu(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return ke("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?(ke("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(ke("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!Fe(e))return ke("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!ze(e.img.w)&&!ze(e.img.wmin))return ke("for img asset there must be 'w' or 'wmin' property"),!1;if(!ze(e.img.h)&&!ze(e.img.hmin))return ke("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!ze(e.title.len))return ke("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!ze(e.data.type))return ke("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&ze(e.video.minduration)&&ze(e.video.maxduration)))return ke("video asset is not properly configured"),!1;return!0}(e)}))}function ru(e,t){var n=t.native.ortb||su(t.native);return"click"===e.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fetchURL,i=void 0===r?Je:r;if(t){var o,a=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),u=(null===(o=e.link)||void 0===o?void 0:o.clicktrackers)||[],c=a[t],s=u;c&&(s=c.clicktrackers||[]),s.forEach((function(e){return i(e)}))}else{var d;((null===(d=e.link)||void 0===d?void 0:d.clicktrackers)||[]).forEach((function(e){return i(e)}))}}(n,null==e?void 0:e.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,r=void 0===n?function(e){return Ke(e)}:n,i=t.fetchURL,o=void 0===i?Je:i,a=(e.eventtrackers||[]).filter((function(e){return e.event===eu.impression})),u=a.reduce((function(e,t){return Za.hasOwnProperty(t.method)&&e[Za[t.method]].push(t.url),e}),{img:[],js:[]}),c=u.img,s=u.js;e.imptrackers&&(c=c.concat(e.imptrackers));c.forEach((function(e){return o(e)})),s=s.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(s=s.concat([e.jstracker]));s.length&&r(s.join("\n"))}(n),e.action}function iu(e,t,n){var r,i,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,a=void 0===o?Ra.index:o,u={message:"assetResponse",adId:e.adId},c=a.getAdUnit(t),s=t.native;return t.native.ortb?u.ortb=t.native.ortb:null!==(r=c.mediaTypes)&&void 0!==r&&null!==(i=r.native)&&void 0!==i&&i.ortb&&(u.ortb=du(t.native,c.nativeOrtbRequest)),u.assets=[],(null==n?Object.keys(s):n).forEach((function(e){if("adTemplate"===e&&s[e])u.adTemplate=au(s[e]);else if("rendererUrl"===e&&s[e])u.rendererUrl=au(s[e]);else if("ext"===e)Object.keys(s[e]).forEach((function(t){if(s[e][t]){var n=au(s[e][t]);u.assets.push({key:t,value:n})}}));else if(s[e]&&b.FY.hasOwnProperty(e)){var t=au(s[e]);u.assets.push({key:e,value:t})}})),u}var ou=Object.fromEntries(Object.entries(b.FY).map((function(e){var t=qa(e,2),n=t[0];return[t[1],n]})));function au(e){return(null==e?void 0:e.url)||e}function uu(e){if(nu(e)){var t,n={},r=Da(e.assets);try{var i=function(){var r=t.value;if(r.title){var i={required:!!r.required&&Boolean(r.required),len:r.title.len};n.title=i}else if(r.img){var o={required:!!r.required&&Boolean(r.required)};if(r.img.w&&r.img.h)o.sizes=[r.img.w,r.img.h];else if(r.img.wmin&&r.img.hmin){var a=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(r.img.wmin,r.img.hmin);o.aspect_ratios=[{min_width:r.img.wmin,min_height:r.img.hmin,ratio_width:r.img.wmin/a,ratio_height:r.img.hmin/a}]}r.img.type===Xa.MAIN?n.image=o:n.icon=o}else if(r.data){var u=Object.keys(Ga).find((function(e){return Ga[e]===r.data.type})),c=Object.keys($a).find((function(e){return $a[e]===u}));n[c]={required:!!r.required&&Boolean(r.required)},r.data.len&&(n[c].len=r.data.len)}e.privacy&&(n.privacyLink={required:!1})};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return n}}function cu(e){if(!e||!Me(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[Mo])||void 0===t?void 0:t.ortb})))return e;var t,n=ot(e),r=Da(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[Mo]&&i.mediaTypes[Mo].ortb&&(i.mediaTypes[Mo]=Ua(gt(i.mediaTypes[Mo],Ja),uu(i.mediaTypes[Mo].ortb)),i.nativeParams=tu(i.mediaTypes[Mo]))}}catch(e){r.e(e)}finally{r.f()}return n}function su(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=qa(e,2),r=n[0],i=n[1];switch(r){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach((function(e){t.eventtrackers.push({event:eu.impression,method:Za.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}})),t}function du(e,t){var n=Fa(Fa({},su(e)),{},{assets:[]});function r(e,r){var i=t.assets.find(e);null!=i&&(r(i=ot(i)),n.assets.push(i))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=au(e[t]);switch(t){case"title":r((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var i="image"===t?Xa.MAIN:Xa.ICON;r((function(e){return null!=e.img&&e.img.type===i}),(function(e){e.img={url:n}}));break;default:t in $a&&r((function(e){return null!=e.data&&e.data.type===Ga[$a[t]]}),(function(e){e.data={value:n}}))}})),n}function lu(e){var t={};for(var n in e)t[e[n]]=n;return t}var fu=b.FP,pu=fu.AD_RENDER_FAILED,mu=fu.AD_RENDER_SUCCEEDED,vu=fu.STALE_RENDER,gu=fu.BID_WON;function yu(e){var t=e.reason,n=e.message,r=e.bid,i=e.id,o={reason:t,message:n};r&&(o.bid=r),i&&(o.adId=i),ke("Error rendering ad (id: ".concat(i,"): ").concat(n)),Gt(pu,o)}function bu(e){var t=e.doc,n=e.bid,r=e.id,i={doc:t};n&&(i.bid=n),r&&(i.adId=r),Gt(mu,i)}function hu(e,t){var n=t.adId,r=t.options,i=t.bidResponse;if(null!=i){if(i.status!==b.UE.fe||(_e("Ad id ".concat(n," has been rendered before")),Gt(vu,i),!y(_.getConfig("auctionOptions"),"suppressStaleRender"))){try{var o=i.adId,a=i.ad,u=i.adUrl,c=i.width,s=i.height,d=i.renderer,l=i.cpm,f=i.originalCpm,p=i.mediaType;if(function(e){return!(!e||!e.url&&!e.renderNow)}(d))!function(e,t,n){var r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,n)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}(d,i);else if(o){if(p===zo)return void yu({reason:b.q_.Sn,message:"Cannot render video ad",bid:i,id:o});var m={AUCTION_PRICE:f||l,CLICKTHROUGH:(null==r?void 0:r.clickUrl)||""};e({ad:ut(a,m),adUrl:ut(u,m),adId:o,width:c,height:s})}}catch(e){return void yu({reason:b.q_.XW,message:e.message,id:n,bid:i})}Ra.addWinningBid(i),Gt(gu,i)}}else yu({reason:b.q_.WT,message:"Cannot find ad '".concat(n,"'"),id:n})}b.FP.AD_RENDER_SUCCEEDED,b.FP.AD_RENDER_FAILED;var wu,Iu=b.q_.Ex,Su=b.q_.XW;function Ou(e){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(e)}function Au(){return Au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Au.apply(this,arguments)}function xu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ou(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ou(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ou(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ju=b.FP.BID_WON,Cu=new WeakSet,Tu=(xu(wu={},"Prebid Request",(function(e,t,n){hu((function(t){_u(n),e(Au({message:"Prebid Response"},t))}),{options:t.options,adId:t.adId,bidResponse:n})})),xu(wu,"Prebid Event",(function(e,t,n){if(null==n)return void ke("Cannot find ad '".concat(t.adId,"' for x-origin event request"));if(n.status!==b.UE.fe)return void _e("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));switch(t.event){case b.FP.AD_RENDER_FAILED:yu({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case b.FP.AD_RENDER_SUCCEEDED:bu({doc:null,bid:n,id:t.adId});break;default:ke("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}})),wu);function Eu(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){var r=u(Ra.getBidsReceived(),(function(e){return e.adId===n.adId}));Tu.hasOwnProperty(n.message)&&Tu[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw ke(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,r)}}function _u(e){var t=e.adId,n=e.adUnitCode,r=e.width,i=e.height;["div","iframe"].forEach((function(e){var o=function(e){var r=function(e,t){return rt()?function(e){var t=u(window.googletag.pubads().getSlots(),(function(t){return u(t.getTargetingKeys(),(function(n){return a(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):function(){if(window.apntag&&qe(window.apntag.getTag))return!0}()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),i=document.getElementById(r);return i&&i.querySelector(e)}(e+':not([style*="display: none"])');if(o){var c=o.style;c.width=r?r+"px":"100%",c.height=i+"px"}else _e("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}function ku(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ru(e,t){return e===t?0:e<t?-1:1}function Pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,n){return Ru(e(t),e(n))}}function Uu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ru;return function(t,n){return-e(t,n)||0}}function Du(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r,i=ku(t);try{for(i.s();!(r=i.n()).done;){var o=(0,r.value)(e,n);if(0!==o)return o}}catch(e){i.e(e)}finally{i.f()}return 0}}function qu(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ru;return function(t,n){return e(n,t)<0?n:t}}(Uu(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ru))}Au(Tu,xu({},"Prebid Native",(function(e,t,n){if(null==n)return void ke("Cannot find ad for x-origin event request: '".concat(t.adId,"'"));Cu.has(n)||(Cu.add(n),Ra.addWinningBid(n),Gt(ju,n));switch(t.action){case"assetRequest":e(function(e,t){var n=e.assets.map((function(e){return ou[e]}));return iu(e,t,n)}(t,n));break;case"allAssetRequest":e(function(e,t){return iu(e,t,null)}(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,_u(n);break;default:ru(t,n)}})));var Nu=Pu((function(e){return e.cpm})),Mu=Pu((function(e){return e.responseTimestamp})),zu=qu(Du(Nu,Uu(Pu((function(e){return e.timeToRespond}))))),Fu=qu(Du(Nu,Uu(Mu)));qu(Du(Nu,Mu));function Lu(e){return Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(e)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wu.apply(this,arguments)}function Hu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Lu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Lu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Lu(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vu(e){return function(e){if(Array.isArray(e))return Gu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xu=[],$u="targetingControls.allowTargetingKeys",Ju="targetingControls.addTargetingKeys",Ku='Only one of "'.concat($u,'" or "').concat(Ju,'" can be set'),Yu=Object.keys(b.TD).map((function(e){return b.TD[e]})),Qu={isActualBid:function(e){return e.getStatusCode()===b.Q_.Q},isBidNotExpired:function(e){return e.responseTimestamp+1e3*Ca(e)>ct()},isUnusedBid:function(e){return e&&(e.status&&!a([b.UE.fe],e.status)||!e.status)}};function Zu(e){return!Object.values(Qu).some((function(t){return!t(e)}))}var ec=Tn("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var r=[],i=_.getConfig("sendBidsControl.dealPrioritization"),o=lt(e,"adUnitCode");return Object.keys(o).forEach((function(e){var a=[],u=lt(o[e],"bidderCode");Object.keys(u).forEach((function(e){return a.push(u[e].reduce(t))})),n>0?(a=i?a.sort(tc(!0)):a.sort((function(e,t){return t.cpm-e.cpm})),r.push.apply(r,Vu(a.slice(0,n)))):r.push.apply(r,Vu(a))})),r}return e}));function tc(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}var nc=function(e){var t={},n={};function r(e,t){return e.adserverTargeting&&t&&(Me(t)&&a(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function i(t){return"string"==typeof t?[t]:Me(t)?t:e.getAdUnitCodes()||[]}function o(){var t=e.getBidsReceived();if(_.getConfig("useBidCache")){var r=_.getConfig("bidCacheFilterFunction");"function"==typeof r&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!r(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return(t=t.filter((function(e){return y(e,"video.context")!==Lo})).filter(Zu)).forEach((function(e){return e.latestTargetedAuctionId=n[e.adUnitCode],e})),ec(t,Fu)}function c(e,n){var r=t.getWinningBids(e,n),i=s();return r=r.map((function(e){return Hu({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===i.indexOf(t)})).reduce((function(t,n){var r=[e.adserverTargeting[n]],i=Hu({},n.substring(0,20),r);if(n===b.TD.DEAL){var o=Hu({},"".concat(n,"_").concat(e.bidderCode).substring(0,20),r);return[].concat(Vu(t),[i,o])}return[].concat(Vu(t),[i])}),[]))})),r}function s(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(Yu).filter(Ze)}function d(e,t,n,r){return Object.keys(t.adserverTargeting).filter(l()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){Me(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(Ze),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function l(){var e=s();return e=e.concat(Ha),function(t){return-1===e.indexOf(t)}}function f(e){return Hu({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(l()).map((function(t){return Hu({},t.substring(0,20),[e.adserverTargeting[t]])})))}function p(e,t){return t.map((function(t){return Hu({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if(rt()){var r=i(t),o=e.getAdUnits().filter((function(e){return a(r,e.code)})),u=Xu.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=qe(n)&&n(e);o.forEach((function(n){(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||qe(t)&&t(n.code))&&e.updateTargetingFromMap(u)}))}))}},t.resetPresetTargetingAST=function(e){i(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),r={};n.forEach((function(e){a(Xu,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),s=i(t),l=c(s,n).concat(function(e,t){return t.filter((function(t){return a(e,t.adUnitCode)})).map((function(e){return Wu({},e)})).reduce(d,[]).map(f).filter((function(e){return e}))}(s,n)).concat(_.getConfig("enableSendAllBids")?function(e,t){var n=Yu.concat(Ha),i=_.getConfig("sendBidsControl.bidLimit"),o=ec(t,zu,i),a=_.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),u=a?a.map((function(e){return b.TD[e]})):n;return o.map((function(t){if(r(t,e))return Hu({},t.adUnitCode,p(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==u.indexOf(e)}))))})).filter((function(e){return e}))}(s,n):function(e,t){if(!0===_.getConfig("targetingControls.alwaysIncludeDeals")){var n=Yu.concat(Ha);return ec(t,zu).map((function(t){if(t.dealId&&r(t,e))return Hu({},t.adUnitCode,p(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}(s,n)).concat(function(t){function n(e){return y(e,b.k2.xn)}function r(e){var t=n(e);return Object.keys(t).map((function(e){return Ne(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),Me(t[e])||(t[e]=[t[e]]),Hu({},e,t[e])}))}return e.getAdUnits().filter((function(e){return a(t,e.code)&&n(e)})).map((function(e){return Hu({},e.code,r(e))}))}(s));l.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===Xu.indexOf(Object.keys(e)[0])&&(Xu=Object.keys(e).concat(Xu))}))}))}));var m=Object.keys(Wu({},b.kF,b.FY)),v=_.getConfig($u),g=_.getConfig(Ju);if(null!=g&&null!=v)throw new Error(Ku);v=null!=g?m.concat(g):v||m,Array.isArray(v)&&v.length>0&&(l=function(e,t){var n=Wu({},b.TD,b.FY),r=Object.keys(n),i={};Ee("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var o=Object.keys(e)[0],a=e[o].filter((function(e){var o=Object.keys(e)[0],a=0===r.filter((function(e){return 0===o.indexOf(n[e])})).length||u(t,(function(e){var t=n[e];return 0===o.indexOf(t)}));return i[o]=!a,a}));e[o]=a}));var o=Object.keys(i).filter((function(e){return i[e]}));return Ee("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}(l,v)),l=function(e){var t=e.map((function(e){return Hu({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return Hu({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Wu(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Wu({},e[n],t[n]),e}),{});return t}(l);var h=_.getConfig("targetingControls.auctionKeyMaxChars");return h&&(Ee("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(h," characters.  Running checks on auction keys...")),l=function(e,t){var n=ot(e),r=Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(tc());return r.reduce((function(e,r,i,o){var a,u=(a=r.adserverTargeting,Object.keys(a).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(a[t]),"%26")}),""));i+1===o.length&&(u=u.slice(0,-3));var c=r.adUnitCode,s=u.length;return s<=t?(t-=s,Ee("AdUnit '".concat(c,"' auction keys comprised of ").concat(s," characters.  Deducted from running threshold; new limit is ").concat(t),n[c]),e[c]=n[c]):_e("The following keys for adUnitCode '".concat(c,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(s,", the current allotted amount was ").concat(t,".\n"),n[c]),i+1===o.length&&0===Object.keys(e).length&&ke("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(l,h)),s.forEach((function(e){l[e]||(l[e]={})})),l},_.getConfig("targetingControls",(function(e){null!=y(e,$u)&&null!=y(e,Ju)&&ke(Ku)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(n){Object.keys(e).filter(t?t(n):function(e){return function(t){return mt(e,t)}}(n)).forEach((function(t){Object.keys(e[t]).forEach((function(n){var r=e[t][n];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),e[t][n]=r})),Te("Attempting to set targeting-map for slot: ".concat(n.getSlotElementId()," with targeting-map:"),e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),n=i(e);return t.filter((function(e){return a(n,e.adUnitCode)})).filter((function(e){return!0===Sn.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(Ze).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce(zu)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){ke("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if(Te("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),Ne(n[e][t])||Me(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&qe(window.apntag.setKeywords))return!0},t}(Ra),rc="__Admanpbjs_debugging__";function ic(){return o().installedModules.includes("debugging")}function oc(e){return new G((function(t){ln(e,"debugging",t)}))}function ac(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?ic:t,r=e.script,i=void 0===r?oc:r,a=null;return function(){return null==a&&(a=new G((function(e,t){setTimeout((function(){if(n())e();else{var r="$$PREBID_DIST_URL_BASE$$debugging-standalone.js";Te('Debugging module not installed, loading it from "'.concat(r,'"...')),o()._installDebugging=!0,i(r).then((function(){o()._installDebugging({DEBUG_KEY:rc,hook:Tn,config:_,createBid:or,logger:Be("DEBUG:")})})).then(e,t)}}))}))),a}}var uc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?ac():t,r=e.hook,i=void 0===r?_n("requestBids"):r,o=null,a=!1;function u(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(o||G.resolve()).then((function(){return e.apply(t,r)}))}function c(){i.getHooks({hook:u}).remove(),a=!1}return{enable:function(){a||(o=n(),i.before(u,99),a=!0)},disable:c,reset:function(){o=null,c()}}}();uc.reset;_.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?uc.enable():uc.disable()}));var cc=ko("fpdEnrichment"),sc=At((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!cc.cookiesAreEnabled())return e;var t,n,r=e.split(".");if(2===r.length)return e;var i=-2,o="_rdc".concat(Date.now()),a="writeable";do{t=r.slice(i).join(".");var u=new Date(ct()+1e4).toUTCString();cc.setCookie(o,a,u,"Lax",t,void 0),cc.getCookie(o,void 0)===a?(n=!1,cc.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(i+=-1,n=Math.abs(i)<=r.length)}while(n);return t})),dc=["architecture","bitness","model","platformVersion","fullVersionList"],lc=["brands","mobile","platform"],fc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=t&&lc.some((function(e){return void 0!==t[e]}))?Object.freeze(mc(1,t)):null;return function(){return n}}(),pc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},r=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dc;if(!r.has(e)){var i=Array.from(e);i.sort(),r.set(e,i.join("|"))}var o=r.get(e);if(!n.hasOwnProperty(o))try{n[o]=t.getHighEntropyValues(e).then((function(e){return We(e)?null:Object.freeze(mc(2,e))})).catch((function(){return null}))}catch(e){n[o]=G.resolve(null)}return n[o]}}();function mc(e,t){function n(e,t){var n={brand:e};return Ne(t)&&!He(t)&&(n.version=t.split(".")),n}var r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),void 0!==t.mobile&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];Ne(n)&&(r[e]=n)})),r}var vc=["dooh","app","site"];function gc(e){return function(t){return vc.reduce((function(n,r){return yc(t,r)&&(null!=n?(_e("".concat(e," specifies both '").concat(n,"' and '").concat(r,"'; dropping the latter.")),delete t[r]):n=r),n}),null),t}}function yc(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}function hc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||wc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wc(e,t){if(e){if("string"==typeof e)return Ic(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ic(e,t):void 0}}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sc={getRefererInfo:Xr,findRootDomain:sc,getWindowTop:xe,getWindowSelf:je,getHighEntropySUA:pc,getLowEntropySUA:fc},Oc=gc("FPD"),Ac=Tn("sync",(function(e){var t,n=[e,(t=_.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?Sc.getHighEntropySUA(t):G.resolve(Sc.getLowEntropySUA())).catch((function(){return null})),G.resolve("cookieDeprecationLabel"in navigator&&Jn(Kn,Cr(On,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((function(){return null}))];return G.all(n).then((function(e){var t=hc(e,3),n=t[0],r=t[1],i=t[2],o=Sc.getRefererInfo();(function(e){["app","site","device"].forEach((function(t){var n=_.getConfig(t);null!=n&&(e[t]=St({},n,e[t]))}))}(n),Object.entries(Cc).forEach((function(e){var t=hc(e,2),r=t[0],i=(0,t[1])(n,o);i&&Object.keys(i).length>0&&(n[r]=St({},i,n[r]))})),r&&xt(n,"device.sua",bc({},r,n.device.sua)),i)&&xt(n,"device.ext",bc({},{cdep:i},n.device.ext));n=Oc(n);var a,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=wc(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(vc);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(yc(n,c)){n[c]=St({},Tc(n,o),n[c]);break}}}catch(e){u.e(e)}finally{u.f()}return n}))}));function xc(e){try{return e(Sc.getWindowTop())}catch(t){return e(Sc.getWindowSelf())}}function jc(e){return ft(e,Object.keys(e))}var Cc={site:function(e,t){if(!vc.filter((function(e){return"site"!==e})).some(yc.bind(null,e)))return jc({page:t.page,ref:t.ref})},device:function(){return xc((function(e){return{w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}}))},regs:function(){var e={};xc((function(e){return e.navigator.globalPrivacyControl}))&&xt(e,"ext.gpc",1);var t=_.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function Tc(e,t){var n,r,i,o=Hr(t.page,{noLeadingWww:!0}),a=null===(n=xc((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===n||null===(r=n.content)||void 0===r||null===(i=r.replace)||void 0===i?void 0:i.call(r,/\s/g,"");return jc({domain:o,keywords:a,publisher:jc({domain:Sc.findRootDomain(o)})})}function Ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kc.apply(this,arguments)}var Bc={frameBorder:0,scrolling:"no",marginHeight:0,marginWidth:0,topMargin:0,leftMargin:0,allowTransparency:"true"};function Rc(e,t){var n=e.ad,r=e.adUrl,i=e.width,o=e.height,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n||r?(r&&!n?function(e,t){var n=e.createElement("iframe");t=kc({},t,Bc),Object.entries(t).forEach((function(e){var t=Ec(e,2),r=t[0],i=t[1];return n.setAttribute(r,i)})),e.body.appendChild(n)}(a,{width:i,height:o,src:r}):(a.write(n),a.close()),t()):t({reason:Iu,message:"Missing ad markup or URL"})}function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pc.apply(this,arguments)}function Uc(e){return Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(e)}function Dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Uc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Uc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Uc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mc.apply(this,arguments)}var zc=o(),Fc=No.triggerUserSyncs,Lc=b.FP,Wc=Lc.ADD_AD_UNITS,Hc=Lc.REQUEST_BIDS,Vc=Lc.SET_TARGETING,Gc={bidWon:function(e){if(!Ra.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(et).filter(Ze).includes(e))return void ke('The "'+e+'" placement is not defined.');return!0}};function Xc(e,t){var n=[];return Me(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return yt(e,2)}))?n=e:yt(e,2)&&n.push(e)),n}function $c(e){var t=ot(e),n=t.mediaTypes.banner,r=Xc(n.sizes);return r.length>0?(n.sizes=r,t.sizes=r):(ke("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function Jc(e){var t=ot(e),n=t.mediaTypes.video;if(n.playerSize){var r="number"==typeof n.playerSize[0]?2:1,i=Xc(n.playerSize,r);i.length>0?(2===r&&Ee("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=i,t.sizes=i):(ke("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function Kc(e){var t=ot(e),n=t.mediaTypes.native;if(n.ortb){var r=Object.keys(b.FY).filter((function(e){return b.FY[e].includes("hb_native_")})),i=Object.keys(n).filter((function(e){return r.includes(e)}));i.length>0&&(ke("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(i," keys from request.")),i.forEach((function(e){return delete t.mediaTypes.native[e]})))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&(ke("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&(ke("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&(ke("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function Yc(e,t){var n=y(e,"mediaTypes.".concat(t,".pos"));if(!ze(n)||isNaN(n)||!isFinite(n)){var r="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");_e(r),Gt(b.FP.AUCTION_DEBUG,{type:"WARNING",arguments:r}),delete e.mediaTypes[t].pos}return e}function Qc(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,r=e.bids;return null==r||Me(r)?null==r&&null==e.ortb2Imp?(ke(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],Te(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(ke(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(ke(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=uc,n=null;try{n=e.getItem(rc)}catch(e){}null!==n&&t.enable()}}(),zc.bidderSettings=zc.bidderSettings||{},zc.libLoaded=!0,zc.version="v8.26.0",Ee("Prebid.js v8.26.0 loaded"),zc.installedModules=zc.installedModules||[],zc.adUnits=zc.adUnits||[],zc.triggerUserSyncs=Fc;var Zc={validateAdUnit:Qc,validateBannerMediaType:$c,validateSizes:Xc};Mc(Zc,{validateNativeMediaType:Kc}),Mc(Zc,{validateVideoMediaType:Jc});var es,ts=Tn("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=Qc(e))){var n,r,i,o=e.mediaTypes;o.banner&&(n=$c(e),o.banner.hasOwnProperty("pos")&&(n=Yc(n,"banner"))),o.video&&(r=Jc(n||e),o.video.hasOwnProperty("pos")&&(r=Yc(r,"video"))),o.native&&(i=Kc(r||(n||e)));var a=Mc({},n,r,i);t.push(a)}})),t}),"checkAdUnitSetup");function ns(e){e.forEach((function(e){var t,n,r;null!=(r=null==(t=e)||null===(n=t.mediaTypes)||void 0===n?void 0:n.video)&&null==r.plcmt&&(r.context===ar||[2,3,4].includes(r.placement)?r.plcmt=4:r.context!==ar&&[2,6].includes(r.playbackmethod)&&(r.plcmt=2))}))}function rs(e){var t=Ra[e]().filter((function(e){return Ra.getAdUnitCodes().includes(e.adUnitCode)})),n=Ra.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(Ze).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return Nc({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Mc(e,t)}),{})}zc.getAdserverTargetingForAdUnitCodeStr=function(e){if(Ee("Invoking Admanpbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e)return function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"):""}(zc.getAdserverTargetingForAdUnitCode(e));Te("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},zc.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=Ra.getAllBidsForAdUnitCode(e).filter(Zu);return t.length?t.reduce(zu):{}}Te("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},zc.getAdserverTargetingForAdUnitCode=function(e){return zc.getAdserverTargeting(e)[e]},zc.getAdserverTargeting=function(e){return Ee("Invoking Admanpbjs.getAdserverTargeting",arguments),nc.getAllTargeting(e)},zc.getConsentMetadata=function(){return Ee("Invoking Admanpbjs.getConsentMetadata"),Ui.getConsentMeta()},zc.getNoBids=function(){return Ee("Invoking Admanpbjs.getNoBids",arguments),rs("getNoBids")},zc.getNoBidsForAdUnitCode=function(e){return{bids:Ra.getNoBids().filter((function(t){return t.adUnitCode===e}))}},zc.getBidResponses=function(){return Ee("Invoking Admanpbjs.getBidResponses",arguments),rs("getBidsReceived")},zc.getBidResponsesForAdUnitCode=function(e){return{bids:Ra.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},zc.setTargetingForGPTAsync=function(e,t){if(Ee("Invoking Admanpbjs.setTargetingForGPTAsync",arguments),rt()){var n=nc.getAllTargeting(e);nc.resetPresetTargeting(e,t),nc.setTargetingForGPT(n,t),Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(t){"hb_adid"===t&&Ra.setStatusForBids(n[e][t],b.UE.CK)}))})),Gt(Vc,n)}else ke("window.googletag is not defined on the page")},zc.setTargetingForAst=function(e){Ee("Invoking Admanpbjs.setTargetingForAn",arguments),nc.isApntagDefined()?(nc.setTargetingForAst(e),Gt(Vc,nc.getAllTargeting())):ke("window.apntag is not defined on the page")},zc.renderAd=Tn("async",(function(e,t,n){Ee("Invoking Admanpbjs.renderAd",arguments),Te("Calling renderAd with adId :"+t),function(e,t,n){var r;function i(n){null!=n?yu(Pc({id:t,bid:r},n)):bu({doc:e,bid:r,adId:t})}try{if(t&&e){var a=(r=Ra.findBidByAdId(t))&&Ra.index.getAdUnit(r),u=o().videoModule;if(null!=a&&a.video&&u)return void u.renderBid(a.video.divId,r);e!==document||at()?hu((function(t){Rc(t,i,e),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t.width,e.defaultView.frameElement.height=t.height),Xe(document.createComment("Creative ".concat(r.creativeId," served by ").concat(r.bidder," Prebid.js Header Bidding")),e,"html")}),{adId:t,options:{clickUrl:null==n?void 0:n.clickThrough},bidResponse:r}):i({reason:b.q_.Sn,message:"renderAd was prevented from writing to the main document."})}else i({reason:b.q_.mb,message:"missing ".concat(t?"doc":"adId")})}catch(e){i({reason:Su,message:e.message})}}(e,t,n)})),zc.removeAdUnit=function(e){(Ee("Invoking Admanpbjs.removeAdUnit",arguments),e)?(Me(e)?e:[e]).forEach((function(e){for(var t=zc.adUnits.length-1;t>=0;t--)zc.adUnits[t].code===e&&zc.adUnits.splice(t,1)})):zc.adUnits=[]},zc.requestBids=(es=Tn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.adUnitCodes,o=e.labels,u=e.auctionId,c=e.ttlBuffer,s=e.ortb2,d=e.metrics,l=e.defer;Gt(Hc);var f=n||_.getConfig("bidderTimeout");Ee("Invoking Admanpbjs.requestBids",arguments),i&&i.length?r=r.filter((function(e){return a(i,e.code)})):i=r&&r.map((function(e){return e.code}));var p={global:St({},_.getAnyConfig("ortb2")||{},s||{}),bidder:Object.fromEntries(Object.entries(_.getBidderConfig()).map((function(e){var t=Dc(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=Dc(e,2);return t[0],null!=t[1]})))};return Ac(G.resolve(p.global)).then((function(e){return p.global=e,is({bidsBackHandler:t,timeout:f,adUnits:r,adUnitCodes:i,labels:o,auctionId:u,ttlBuffer:c,ortb2Fragments:p,metrics:d,defer:l})}))}),"requestBids"),function(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t}(es,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||zc.adUnits;return e.adUnits=Me(t)?t.slice():[t],e.metrics=Ar(),e.metrics.checkpoint("requestBids"),e.defer=$({promiseFactory:function(e){return new Promise(e)}}),es.call(this,e),e.defer.promise})));var is=Tn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.ttlBuffer,o=e.adUnitCodes,u=e.labels,c=e.auctionId,s=e.ortb2Fragments,d=e.metrics,l=e.defer,f=bo(_.getConfig("s2sConfig")||[]);function p(e,n,r){if("function"==typeof t)try{t(e,n,r)}catch(e){ke("Error executing bidsBackHandler",null,e)}l.resolve({bids:e,timedOut:n,auctionId:r})}if(ns(r),(r=Sr(d).measureTime("requestBids.validate",(function(){return ts(r)}))).forEach((function(e){var t,n,r=Object.keys(e.mediaTypes||{banner:"banner"}),o=e.bids.map((function(e){return e.bidder})),u=Oo.bidderRegistry,c=o.filter((function(e){return!f.has(e)})),s=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid)||we();e.transactionId=s,null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),xt(e,"ortb2Imp.ext.tid",s),c.forEach((function(t){var n=u[t],i=n&&n.getSpec&&n.getSpec(),o=i&&i.supportedMediaTypes||["banner"];r.some((function(e){return a(o,e)}))?Lr.incrementBidderRequestsCounter(e.code,t):(_e(function(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))})),Lr.incrementRequestsCounter(e.code)})),r&&0!==r.length){var m=Ra.createAuction({adUnits:r,adUnitCodes:o,callback:p,cbTimeout:n,labels:u,auctionId:c,ortb2Fragments:s,metrics:d}),v=r.length;v>15&&Ee("Current auction ".concat(m.getAuctionId()," contains ").concat(v," adUnits."),r),o.forEach((function(e){return nc.setLatestAuctionForAdUnit(e,m.getAuctionId())})),m.callBids()}else Te("No adUnits configured. No bids requested."),p()}),"startAuction");zc.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(To),n(os),e.call(this,t)}),49),zc.addAdUnits=function(e){Ee("Invoking Admanpbjs.addAdUnits",arguments),zc.adUnits.push.apply(zc.adUnits,Me(e)?e:[e]),Gt(Wc)},zc.onEvent=function(e,t,n){Ee("Invoking Admanpbjs.onEvent",arguments),qe(t)?!n||Gc[e].call(null,n)?Wt(e,t,n):ke('The id provided is not valid for event "'+e+'" and no handler was set.'):ke('The event handler provided is not a function and was not set on event "'+e+'".')},zc.offEvent=function(e,t,n){Ee("Invoking Admanpbjs.offEvent",arguments),n&&!Gc[e].call(null,n)||Ht(e,t,n)},zc.getEvents=function(){return Ee("Invoking Admanpbjs.getEvents"),Vt()},zc.registerBidAdapter=function(e,t){Ee("Invoking Admanpbjs.registerBidAdapter",arguments);try{Oo.registerBidAdapter(e(),t)}catch(e){ke("Error registering bidder adapter : "+e.message)}},zc.registerAnalyticsAdapter=function(e){Ee("Invoking Admanpbjs.registerAnalyticsAdapter",arguments);try{Oo.registerAnalyticsAdapter(e)}catch(e){ke("Error registering analytics adapter : "+e.message)}},zc.createBid=function(e){return Ee("Invoking Admanpbjs.createBid",arguments),or(e)};var os=[],as=Tn("async",(function(e){e&&!We(e)?(Ee("Invoking Admanpbjs.enableAnalytics for: ",e),Oo.enableAnalytics(e)):ke("Admanpbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");zc.enableAnalytics=function(e){os.push(as.bind(this,e))},zc.aliasBidder=function(e,t,n){Ee("Invoking Admanpbjs.aliasBidder",arguments),e&&t?Oo.aliasBidAdapter(e,t,n):ke("bidderCode and alias must be passed as arguments","Admanpbjs.aliasBidder")},zc.aliasRegistry=Oo.aliasRegistry,_.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete zc.aliasRegistry})),zc.getAllWinningBids=function(){return Ra.getAllWinningBids()},zc.getAllPrebidWinningBids=function(){return Ra.getBidsReceived().filter((function(e){return e.status===b.UE.CK}))},zc.getHighestCpmBids=function(e){return nc.getWinningBids(e)},zc.markWinningBidAsUsed=function(e){var t=us(e,"Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function.");t.length>0&&Ra.addWinningBid(t[0])};var us=function(e,t){var n=[];return e.adUnitCode&&e.adId?n=Ra.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?n=nc.getWinningBids(e.adUnitCode):e.adId?n=Ra.getBidsReceived().filter((function(t){return t.adId===e.adId})):_e(t),n};function cs(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){ke("Error processing command :","prebid.js",e)}}))}zc.getConfig=_.getAnyConfig,zc.readConfig=_.readAnyConfig,zc.mergeConfig=_.mergeConfig,zc.mergeBidderConfig=_.mergeBidderConfig,zc.setConfig=_.setConfig,zc.setBidderConfig=_.setBidderConfig,zc.que.push((function(){window.addEventListener("message",Eu,!1)})),zc.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){ke("Error processing command :",e.message,e.stack)}else ke("Commands written into Admanpbjs.cmd.push must be wrapped in a function")},zc.que.push=zc.cmd.push,zc.processQueue=function(){Tn.ready(),cs(zc.que),cs(zc.cmd)},zc.triggerBilling=function(e){var t=us(e,"Improper use of triggerBilling. It requires a bid with at least an adUnitCode or an adId to function."),n=t.find((function(t){return t.requestId===e.requestId}))||t[0];if(t.length>0&&n)try{Oo.callBidBillableBidder(n)}catch(e){ke("Error when triggering billing :",e)}else _e("The bid provided to triggerBilling did not match any bids received.")};const ss=zc;function ds(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ls(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fs=new WeakMap;function ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vs(e){return(e=Se(e)).map((function(e){var t=ps(e.split("x"),2),n=t[0],r=t[1];return{w:parseInt(n,10),h:parseInt(r,10)}}))}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gs.apply(this,arguments)}function ys(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hs=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),ws={instream:1};var Is={1:Fo,2:zo,4:Mo};function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ss.apply(this,arguments)}var Os=["request","imp","bidResponse","response"],As=["default","pbs"],xs=Os[0],js=Os[1],Cs=Os[2],Ts=Os[3],Es=As[0],_s=As[1],ks=new Set(Os);var Bs,Rs,Ps=(Bs={},{registerOrtbProcessor:function(e){var t=e.type,n=e.name,r=e.fn,i=e.priority,o=void 0===i?0:i,a=e.dialects,u=void 0===a?[Es]:a;if(!ks.has(t))throw new Error("ORTB processor type must be one of: ".concat(Os.join(", ")));u.forEach((function(e){Bs.hasOwnProperty(e)||(Bs[e]={}),Bs[e].hasOwnProperty(t)||(Bs[e][t]={}),Bs[e][t][n]={priority:o,fn:r}}))},getProcessors:function(e){return Bs[e]||{}}}),Us=Ps.registerOrtbProcessor,Ds=Ps.getProcessors;function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function Ns(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==qs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qs(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fs(){return Fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fs.apply(this,arguments)}var Ls=(Ns(Rs={},xs,{fpd:{priority:99,fn:function(e,t){St(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:gc("ORTB request")},props:{fn:function(e,t){Fs(e,{id:e.id||we(),test:e.test||0});var n=parseInt(t.timeout,10);isNaN(n)||(e.tmax=n)}}}),Ns(Rs,js,{fpd:{priority:99,fn:function(e,t){St(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:function(e,t,n){if(!n.mediaType||n.mediaType===Fo){var r=y(t,"mediaTypes.banner");if(r){var i={topframe:!0===at()?0:1};r.sizes&&(i.format=vs(r.sizes)),r.hasOwnProperty("pos")&&(i.pos=r.pos),e.banner=St(i,e.banner)}}}},pbadslot:{fn:function(e){var t,n,r,i,o=null===(t=e.ext)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.pbadslot;o&&"string"==typeof o||(null===(r=e.ext)||void 0===r||(null===(i=r.data)||void 0===i||delete i.pbadslot))}}}),Ns(Rs,Cs,{mediaType:{priority:99,fn:function(e,t,n){if(!e.mediaType){var r=n.mediaType;if(!r&&!Is.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||Is[t.mtype]}}},banner:{fn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,t=void 0===e?function(e){return Qe(decodeURIComponent(e))}:e;return function(e,n){e.mediaType===Fo&&(n.adm&&n.nurl?(e.ad=n.adm,e.ad+=t(n.nurl)):n.adm?e.ad=n.adm:n.nurl&&(e.adUrl=n.nurl))}}()},props:{fn:function(e,t,n){var r;Object.entries({requestId:null===(r=n.bidRequest)||void 0===r?void 0:r.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((function(e){var t=Ms(e,2);t[0];return void 0!==t[1]})).forEach((function(t){var n=Ms(t,2),r=n[0],i=n[1];return e[r]=i})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain)}}}),Rs);function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ws.apply(this,arguments)}function Hs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=t.length>1?Hs.apply(void 0,t):t[0];return Object.fromEntries(Os.map((function(e){return[e,Ws({},r[e],i[e])]})))}function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vs.apply(this,arguments)}function Gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,r=e.processors,i=void 0===r?$s:r,o=e.overrides,a=void 0===o?{}:o,u=e.imp,c=e.request,s=e.bidResponse,d=e.response,l=new WeakMap;function f(e,t,n,r){var o;return function(){return null==o&&(o=function(){var o=n.bind(this,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!fs.has(e)){var n=Object.entries(e);n.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),fs.set(e,n.map((function(e){var t=ds(e,2);return[t[0],t[1].fn]})))}var r=fs.get(e).filter((function(e){var n=ds(e,1)[0];return!t.hasOwnProperty(n)||t[n]})).map((function(e){var n=ds(e,2),r=n[0],i=n[1];return t.hasOwnProperty(r)?t[r].bind(this,i):i}));return function(){var e=this,t=Array.from(arguments);r.forEach((function(n){n.apply(e,t)}))}}(i()[e]||{},a[e]||{}));return t&&(o=t.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){r.call.apply(r,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),o.apply(this,arguments)}}var p=f(js,u,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){ke("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),m=f(xs,c,(function(e,t,n,r){var i={imp:t};return e(i,n,r),i}),(function(e,t,n,r){throw ke("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:r}),e})),v=f(Cs,s,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){ke("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),g=f(Ts,d,(function(e,t,n,r){var i={bids:t};return e(i,n,r),i}),(function(e,t,n,r){throw ke("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:r}),e}));return{toORTB:function(e){var t=e.bidderRequest,r=e.bidRequests,i=e.context,o=void 0===i?{}:i,a={req:Vs({bidRequests:r=r||t.bids},n,o),imp:{}};a.req.impContext=a.imp;var u=r.map((function(e){var r=Vs({bidderRequest:t,reqContext:a.req},n,o),i=p(e,r);if(null!=i){if(i.hasOwnProperty("id"))return Vs(r,{bidRequest:e,imp:i}),a.imp[i.id]=r,i;ke("Converted ORTB imp does not specify an id, ignoring bid request",e,i)}})).filter(Boolean),c=m(u,t,a.req);return a.req.bidderRequest=t,null!=c&&l.set(c,a),c},fromORTB:function(e){var t=e.request,n=e.response,r=l.get(t);if(null==r)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function i(e){return Vs(e,{ortbRequest:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e)}var o=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),a=(n.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(o.hasOwnProperty(t.impid)&&r.imp.hasOwnProperty(t.impid))return v(t,i(r.imp[t.impid],{imp:o[t.impid],seatbid:e,ortbResponse:n}));ke("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return g(a,n,i(r.req))}}}Ls[js].native={fn:function(e,t,n){if(!n.mediaType||n.mediaType===Mo){var r,i=t.nativeOrtbRequest;i&&(null!==(r=(i=Ss({},n.nativeRequest,i)).assets)&&void 0!==r&&r.length?e.native=St({},{request:JSON.stringify(i),ver:i.ver},e.native):_e("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}}},Ls[Cs].native={fn:function(e,t){if(e.mediaType===Mo){var n;if(!Fe(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},Ls[js].video={fn:function(e,t,n){if(!n.mediaType||n.mediaType===zo){var r=y(t,"mediaTypes.video");if(!We(r)){var i=Object.fromEntries(Object.entries(r).filter((function(e){var t=ys(e,1)[0];return hs.has(t)})));if(r.playerSize){var o=vs(r.playerSize);o.length>1&&_e("video request specifies more than one playerSize; all but the first will be ignored"),gs(i,o[0])}var a=ws[r.context];null!=a&&(i.placement=a),e.video=St(i,e.video)}}}},Ls[Cs].video={fn:function(e,t,n){if(e.mediaType===zo){if(y(n.imp,"video.w")&&y(n.imp,"video.h")){var r=[n.imp.video.w,n.imp.video.h];e.playerWidth=r[0],e.playerHeight=r[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}}};var Xs,$s=At((function(){return Hs(Ls,Ds(Es))}));function Js(e){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(e)}function Ks(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Js(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Js(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Js(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ys,Qs=(Ks(Xs={},Fo,"banner"),Ks(Xs,Mo,"native"),Ks(Xs,zo,"video"),Xs);function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(this,arguments)}function ed(){return ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ed.apply(this,arguments)}function td(e){return td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},td(e)}function nd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==td(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==td(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===td(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return id(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var od=(nd(Ys={},xs,{extPrebid:{fn:function(e,t){var n;xt(e,"ext.prebid",St({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(n=e.ext)||void 0===n?void 0:n.prebid)),_.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t,n;xt(e,"ext.prebid.channel",Zs({name:"pbjs",version:o().version},null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n?void 0:n.channel))}},extPrebidAliases:{fn:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,i=void 0===r?Oo:r;if(i.aliasRegistry[t.bidderCode]){var o=i.bidderRegistry[t.bidderCode];o&&o.getSpec().skipPbsAliasing||xt(e,"ext.prebid.aliases.".concat(t.bidderCode),i.aliasRegistry[t.bidderCode])}}}}),nd(Ys,js,{params:{fn:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.adUnit,o=r.bidderRequests,a=r.index,u=void 0===a?Ra.index:a,c=r.bidderRegistry,s=void 0===c?Oo.bidderRegistry:c,d=t.params,l=s[t.bidder];l&&l.getSpec().transformBidParams&&(i=i||u.getAdUnit(t),o=o||[n.bidderRequest],d=l.getSpec().transformBidParams(d,!0,i,o)),d&&xt(e,"ext.prebid.bidder.".concat(t.bidder),d)}},adUnitCode:{fn:function(e,t){var n=t.adUnitCode;n&&xt(e,"ext.prebid.adunitcode",n)}}}),nd(Ys,Cs,{mediaType:{fn:function(e,t,n){var r,i,o=n.mediaType;o||(o=Is.hasOwnProperty(t.mtype)?Is[t.mtype]:null===(r=t.ext)||void 0===r||null===(i=r.prebid)||void 0===i?void 0:i.type,Qs.hasOwnProperty(o)||(o=Fo)),e.mediaType=o},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===zo){var n=y(t,"ext.prebid.cache.vastXml")||{},r=n.cacheId,i=n.url;if(!r||!i){var o=y(t,"ext.prebid.targeting")||{},a=o.hb_uuid,u=o.hb_cache_host,c=o.hb_cache_path;a&&u&&c&&(r=a,i="https://".concat(u).concat(c,"?uuid=").concat(a))}r&&i&&ed(e,{videoCacheKey:r,vastUrl:i})}},priority:-10},bidderCode:{fn:function(e,t,n){var r;e.bidderCode=n.seatbid.seat,e.adapterCode=y(t,"ext.prebid.meta.adaptercode")||(null===(r=n.bidRequest)||void 0===r?void 0:r.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var n=y(t,"ext.prebid.bidid");Ne(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,t){var n=y(t,"ext.prebid.targeting");Fe(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,t){e.meta=St({},y(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var n=y(t,"ext.prebid.events.win");Ne(n)&&(e.pbsWurl=n)}}}),nd(Ys,Ts,{serverSideStats:{fn:function(e,t,n){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var r=rd(e,2),i=r[0],o=r[1],a=y(t,"ext.".concat(i,".").concat(n.bidderRequest.bidderCode));a&&(n.bidderRequest[o]=a,n.bidRequests.forEach((function(e){return e[o]=a})))}))}}}),Ys),ad=At((function(){return Hs($s(),od,Ds(_s))}));function ud(e){return function(e){if(Array.isArray(e))return cd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sd=["user.keywords"].concat(vc.flatMap((function(e){return["keywords","content.keywords"].map((function(t){return"".concat(e,".").concat(t)}))})));function dd(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.filter((function(e){return e})).flatMap((function(e){return Array.isArray(e)?e:e.split(",")})).map((function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")})).filter((function(e){return e})).forEach((function(t){return e.add(t)})),Array.from(e.keys())}function ld(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dd.apply(void 0,ud(sd.map((function(t){return y(e,t)}))).concat(n))}function fd(e,t){return Object.keys(e).forEach((function(n){var r,i;t[n]&&(qe(e[n])?t[n]=e[n](t[n]):t[n]=(r=e[n],i=t[n],"string"===r?i&&i.toString():"number"===r?Number(i):i),isNaN(t[n])&&delete t.key)})),t}function pd(e){return function(e){if(Array.isArray(e))return hd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?md(Object(n),!0).forEach((function(t){gd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==wd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wd(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||bd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bd(e,t){if(e){if("string"==typeof e)return hd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hd(e,t):void 0}}function hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wd(e){return wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(e)}var Id="https://video-outstream.rubiconproject.com/apex-2.2.1.js",Sd=_.getConfig("rubicon")||{};_.getConfig("rubicon",(function(e){St(Sd,e.rubicon)}));var Od={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450"};Ve(Od,(function(e,t){return Od[e]=t}));var Ad=Gs({request:function(e,t,n,r){var i,a,u=r.bidRequests,c=e(t,n,r);c.cur=["USD"],c.test=_.getConfig("debug")?1:0,xt(c,"ext.prebid.cache",{vastxml:{returnCreative:!0===Sd.returnVast}}),xt(c,"ext.prebid.bidders",{rubicon:{integration:Sd.int_type||"pbjs"}}),xt(c,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}(_));var s=o().installedModules;return!s||s.length&&-1===s.indexOf("rubiconAnalyticsAdapter")||xt(c,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t,n){var r,i,o={},a=ld.apply(void 0,[n].concat(pd(t.map((function(e){return e.params.keywords})))));t.forEach((function(t){var n,r,i,a,u,c={user:{ext:{data:vd({},t.params.visitor)}},site:{ext:{data:vd({},t.params.inventory)}}},s=e.imp.find((function(e){var t,n,r,i,o;return null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n||null===(r=n.bidder)||void 0===r||null===(i=r.rubicon)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.language}));s&&(c.site.content={language:null===(n=s.ext)||void 0===n||null===(r=n.prebid)||void 0===r||null===(i=r.bidder)||void 0===i||null===(a=i.rubicon)||void 0===a||null===(u=a.video)||void 0===u?void 0:u.language});o=St(o,t.ortb2||{},c);var d=_.getConfig("user.id");o.user.id=o.user.id||d})),St(e,o),a&&a.length&&xt(e,"site.keywords",a.join(","));null==e||(null===(r=e.ext)||void 0===r||(null===(i=r.prebid)||void 0===i||delete i.storedrequest))}(c,u,n.ortb2),null==c||(null===(i=c.ext)||void 0===i||(null===(a=i.prebid)||void 0===a||delete a.storedrequest)),!0===Sd.disableFloors&&delete c.ext.prebid.floors,u.filter((function(e){return"object"===wd(e.floorData)})).length>0&&(c.ext.prebid.floors={enabled:!1}),c},imp:function(e,t,n){var r,i,o=_d(t);if(!o.includes(Fo)||1!=o.length){var a=e(t,n);return a.id=t.adUnitCode,delete a.banner,_.getConfig("s2sConfig.defaultTtl")&&(a.exp=_.getConfig("s2sConfig.defaultTtl")),"atf"===t.params.position&&a.video&&(a.video.pos=1),"btf"===t.params.position&&a.video&&(a.video.pos=3),null===(r=a.ext)||void 0===r||(null===(i=r.prebid)||void 0===i||delete i.storedrequest),!0===t.params.bidonmultiformat&&o.length>1&&xt(a,"ext.prebid.bidder.rubicon.formats",o),function(e,t){"USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur);if(!t.bidfloor){var n=parseFloat(y(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,a),a}},bidResponse:function(e,t,n){var r,i=e(t,n);i.meta.mediaType=y(t,"ext.prebid.type");var o=n.bidRequest,a=yd("outstream"===(null===(r=o.mediaTypes.video)||void 0===r?void 0:r.context)?Td(o,zo):[void 0,void 0],2),u=a[0],c=a[1];return i.width=t.w||u||i.playerWidth,i.height=t.h||c||i.playerHeight,i.mediaType===zo&&"outstream"===o.mediaTypes.video.context&&(i.renderer=function(e){var t=mn.install({id:e.adId,url:Sd.rendererUrl||Id,config:Sd.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(Cd)}catch(e){_e("Prebid Error calling setRender on renderer",e)}return t}(i)),y(t,"ext.bidder.rp.advid")&&xt(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==Sd.netRevenue,ttl:300},processors:ad}),xd={code:"rubicon",gvlid:52,supportedMediaTypes:[Fo,zo,Mo],isBidRequestValid:function(e){var t=!0;if("object"!==wd(e.params))return!1;for(var n=0,r=["accountId","siteId","zoneId"];n<r.length;n++)if(e.params[r[n]]=parseInt(e.params[r[n]]),isNaN(e.params[r[n]]))return ke("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=_d(e,!0);if(!i.length)return!1;i.includes(zo)&&(t=function(e){var t=!0,n=Object.prototype.toString.call([]),r=Object.prototype.toString.call(0),i={mimes:n,protocols:n,linearity:r,api:n};return Object.keys(i).forEach((function(n){Object.prototype.toString.call(y(e,"mediaTypes.video."+n))!==i[n]&&(t=!1,ke("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+i[n]))})),t}(e));var o=[Fo,Mo].filter((function(e){return i.includes(e)})).length>0;return o?t&&o:t},buildRequests:function(e,t){var n,r=[],i=[];if((n=e.filter((function(e){var t=_d(e)||[],n=t.length,r=e.params||{},i=r.bidonmultiformat,o=r.video;return 1===n&&(t.includes(zo)||t.includes(Mo))||2===n&&!t.includes(Fo)||o&&t.includes(zo)||i&&(t.includes(zo)||t.includes(Mo))})))&&n.length){var o=Ad.toORTB({bidRequests:n,bidderRequest:t});i.push({method:"POST",url:"https://".concat(Sd.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:n})}var a=e.filter((function(e){var t=_d(e)||[],n=e.params||{},r=n.bidonmultiformat,i=n.video;return t.includes(Fo)&&(1===t.length||r||!r&&!i||!r&&i&&!t.includes(zo))}));if(!0!==Sd.singleRequest)r=i.concat(a.map((function(e){var n=xd.createSlotParams(e,t);return{method:"GET",url:"https://".concat(Sd.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:xd.getOrderedParams(n).reduce((function(e,t){var r=n[t];return Ne(r)&&""!==r||ze(r)?"".concat(e).concat(Bd(t,r),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var u=a.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});r=i.concat(Object.keys(u).reduce((function(e,n){var r,i;return(r=u[n],i=10,r.map((function(e,t){return t%i==0?r.slice(t,t+i):null})).filter((function(e){return e}))).forEach((function(n){var r=xd.combineSlotUrlParams(n.map((function(e){return xd.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(Sd.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:xd.getOrderedParams(r).reduce((function(e,t){var n=r[t];return Ne(n)&&""!==n||ze(n)?"".concat(e).concat(Bd(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return r},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,r=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,r){return Object.keys(n).forEach((function(i){t.hasOwnProperty(i)||(t[i]=new Array(e.length)),t[i].splice(r,1,n[i])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var r=t[e].join(";"),i=r.match(n);t[e]=i?i[1]:r})),t},createSlotParams:function(e,t){var n,r,i,o,a,c,s,d,l,f;e.startTime=(new Date).getTime();var p=e.params,m=Td(e,"banner"),v=yd(p.latLong||[],2),g=v[0],b=v[1],h={account_id:p.accountId,site_id:p.siteId,zone_id:p.zoneId,size_id:m[0],alt_size_ids:m.slice(1).join(",")||void 0,rp_floor:(p.floor=parseFloat(p.floor))>=.01?p.floor:void 0,rp_secure:"1",tk_flint:"".concat(Sd.int_type||"pbjs_lite","_v8.26.0"),"x_source.tid":null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid,"x_imp.ext.tid":null===(i=e.ortb2Imp)||void 0===i||null===(o=i.ext)||void 0===o?void 0:o.tid,l_pb_bid_id:e.bidId,o_cdep:null===(a=e.ortb2)||void 0===a||null===(c=a.device)||void 0===c||null===(s=c.ext)||void 0===s?void 0:s.cdep,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:p.userId,"p_geo.latitude":isNaN(parseFloat(g))?void 0:parseFloat(g).toFixed(4),"p_geo.longitude":isNaN(parseFloat(b))?void 0:parseFloat(b).toFixed(4),"tg_fl.eid":e.code,rf:jd(e,t)};if("function"==typeof e.getFloor&&!Sd.disableFloors){var w;try{w=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){ke("Rubicon: getFloor threw an error: ",e)}h.rp_hard_floor="object"!==wd(w)||"USD"!==w.currency||isNaN(parseInt(w.floor))?void 0:w.floor}!0===p.bidonmultiformat&&y(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(h.p_formats=Object.keys(e.mediaTypes).join(","));var I={1:"atf",3:"btf"}[y(e,"mediaTypes.banner.pos")]||"";h.p_pos="atf"===p.position||"btf"===p.position?p.position:I;var S,O,A=_.getConfig("user.id");(A&&(h.ppuid=A),null!=e&&null!==(d=e.ortb2Imp)&&void 0!==d&&null!==(l=d.ext)&&void 0!==l&&l.ae&&(h.o_ae=1),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source)h.tpid_tdid=e.uids[0].id,h["eid_adserver.org"]=e.uids[0].id;else if("liveintent.com"===e.source)h["tpid_liveintent.com"]=e.uids[0].id,h["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(h["tg_v.LIseg"]=e.ext.segments.join(","));else if("liveramp.com"===e.source)h.x_liverampidl=e.uids[0].id;else if("id5-sync.com"===e.source)h["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||"");else{var t="rubiconproject.com"===e.source?e.uids[0].id:"".concat(e.uids[0].id,"^").concat(e.uids[0].atype||"");h["eid_".concat(e.source)]=t}if(!h.ppuid){var n=u(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));n&&n.id&&(h.ppuid=n.id)}}catch(t){_e("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(h.gdpr=Number(t.gdprConsent.gdprApplies)),h.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(h.us_privacy=encodeURIComponent(t.uspConsent)),null!==(f=t.gppConsent)&&void 0!==f&&f.gppString)&&(h.gpp=t.gppConsent.gppString,h.gpp_sid=null===(S=t.gppConsent)||void 0===S||null===(O=S.applicableSections)||void 0===O?void 0:O.toString());return h.rp_maxbids=t.bidLimit||1,function(e,t,n){var r={user:{ext:{data:vd({},e.params.visitor)}},site:{ext:{data:vd({},e.params.inventory)}}};e.params.keywords&&(r.site.keywords=Me(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=St({},e.ortb2||{},r),o=y(e.ortb2Imp,"ext")||{},a=y(e.ortb2Imp,"ext.data")||{},u=y(e,"ortb2Imp.ext.gpid"),c={user:[4],site:[1,2,5,6]},s={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},d=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&y(e,"ext.segtax")&&c[n]&&-1!==c[n].indexOf(y(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():("object"!==wd(e)||Array.isArray(e))&&void 0!==e?Array.isArray(e)?e.filter((function(e){if("object"!==wd(e)&&void 0!==e)return e.toString();_e("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString():void 0},l=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=d(e,r,t),a=s[r]&&i?"".concat(s[r]):"data"===r?"".concat(s[t],"iab"):"".concat(s[t]).concat(r);n[a]=n[a]?n[a].concat(",",o):o};if(t===Fo){["site","user"].forEach((function(e){Object.keys(i[e]).forEach((function(t){"site"===e&&"content"===t&&i[e][t].data?l(i[e][t].data,e,"data"):"ext"!==t?l(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach((function(t){l(i[e].ext.data[t],e,t,!1)}))}))})),Object.keys(a).forEach((function(e){"adserver"!==e?l(a[e],"site",e):"gam"===a[e].name&&l(a[e].adslot,name,e)})),u&&(n.p_gpid=u),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"];var f=y(i,"device.sua");f&&!1!==Sd.chEnabled&&gt(f,["architecture",function(e){return n.m_ch_arch=e},"bitness",function(e){return n.m_ch_bitness=e},"browsers",function(e){var t,r;if(Array.isArray(e)){var i=yd(e.reduce((function(e,t){var n,r,i;return e[0].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(n=t.version)||void 0===n?void 0:n[0],'"')),e[1].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(r=t.version)||void 0===r||null===(i=r.join)||void 0===i?void 0:i.call(r,"."),'"')),e}),[[],[]]),2),o=i[0],a=i[1];n.m_ch_ua=null==o||null===(t=o.join)||void 0===t?void 0:t.call(o,","),n.m_ch_full_ver=null==a||null===(r=a.join)||void 0===r?void 0:r.call(a,",")}},"mobile",function(e){return n.m_ch_mobile="?".concat(e)},"model",function(e){return n.m_ch_model=e},"platform",function(e){var t,r;n.m_ch_platform=null==e?void 0:e.brand,n.m_ch_platform_ver=null==e||null===(t=e.version)||void 0===t||null===(r=t.join)||void 0===r?void 0:r.call(t,".")}])}else Object.keys(o).length&&St(n.imp[0].ext,o),u&&(n.imp[0].ext.gpid=u),St(n,i)}(e,Fo,h),!0===_.getConfig("coppa")&&(h.coppa=1),e.schain&&kd(e.schain)&&(h.rp_schain=xd.serializeSupplyChain(e.schain)),h},serializeSupplyChain:function(e){if(!kd(e))return"";var t=e.ver,n=e.complete,r=e.nodes;return"".concat(t,",").concat(n,"!").concat(xd.serializeSupplyChainNodes(r))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){var n;e=e.body;var r=t.data;if(!e||"object"!==wd(e))return[];if(e.seatbid){var i=y(e,"ext.errors.rubicon");return Array.isArray(i)&&i.length>0&&_e("Rubicon: Error in video response"),Ad.fromORTB({request:r,response:e}).bids}var o,a=e.ads,u=0,c=t.bidRequest;if("object"===wd(c)&&!Array.isArray(c)&&_d(c).includes(zo)&&"object"===wd(a)&&(a=a[c.adUnitCode]),!Array.isArray(a)||a.length<1)return[];var s=a.reduce((function(t,n,r){if(n.impression_id&&o===n.impression_id?u++:o=n.impression_id,"ok"!==n.status)return t;var i,a,s=Array.isArray(c)?c[r-u]:c;if(s&&"object"===wd(s)){var d={requestId:s.bidId,currency:"USD",creativeId:n.creative_id||"".concat(n.network||"","-").concat(n.advertiser||""),cpm:n.cpm||0,dealId:n.deal,ttl:300,netRevenue:!1!==Sd.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:Fo}};if(n.creative_type&&(d.mediaType=n.creative_type),n.adomain&&(d.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.creative_type===zo)d.width=s.params.video.playerWidth,d.height=s.params.video.playerHeight,d.vastUrl=n.creative_depot_url,d.impression_id=n.impression_id,d.videoCacheKey=n.impression_id;else{d.ad=(i=n.script,a=n.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(a,"'>\n<script type='text/javascript'>").concat(i,"<\/script>\n</div>\n</body>\n</html>"));var l=yd(Od[n.size_id].split("x").map((function(e){return Number(e)})),2);d.width=l[0],d.height=l[1]}d.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:s.adUnitCode}),t.push(d)}else ke("Rubicon: bidRequest undefined at index position:".concat(r),c,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)})),d=null===(n=e.component_auction_config)||void 0===n?void 0:n.map((function(e){return{config:e,bidId:e.bidId}}));return d?{bids:s,fledgeAuctionConfigs:d}:s},getUserSyncs:function(e,t,n,r,i){if(!Rd&&e.iframeEnabled){var o,a={};if(n&&("boolean"==typeof n.gdprApplies&&(a.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(a.gdpr_consent=n.consentString)),r&&(a.us_privacy=encodeURIComponent(r)),null!=i&&i.gppString)a.gpp=i.gppString,a.gpp_sid=null===(o=i.applicableSections)||void 0===o?void 0:o.toString();return a=Object.keys(a).length?"?".concat(ht(a)):"",Rd=!0,{type:"iframe",url:"https://".concat(Sd.syncHost||"eus",".rubiconproject.com/usync.html")+a}}},transformBidParams:function(e,t){return fd({accountId:"number",siteId:"number",zoneId:"number"},e)}};function jd(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function Cd(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var r=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:r.align||"center",position:r.position||"append"},closeButton:r.closeButton||!1,label:r.label||void 0,collapse:r.collapse||!0})}))}function Td(e,t){var n=e.params;if(t===zo){var r=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?r=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(y(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?r=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(r=e.sizes[0]),r}var i=[];return Array.isArray(n.sizes)?i=n.sizes:void 0!==y(e,"mediaTypes.banner.sizes")?i=Ed(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=Ed(e.sizes):_e("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var r=t.indexOf(e),i=t.indexOf(n);return r>-1||i>-1?-1===r?1:-1===i?-1:r-i:e-n}))}(i)}function Ed(e){return Se(e).reduce((function(e,t){var n=parseInt(Od[t],10);return n&&e.push(n),e}),[])}function _d(e){var t,n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=[];if(n=void 0!==y(t=e,"mediaTypes.".concat(zo)),r=void 0!==y(t,"mediaTypes.".concat(Fo)),i=void 0!==y(t,"params.bidonmultiformat"),o="object"!==wd(y(t,"params.video")),n&&i||(r&&o&&(n=!1),n&&o&&xt(t,"params.video",{}),n)){if(-1===["outstream","instream"].indexOf(y(e,"mediaTypes.".concat(zo,".context"))))return a&&ke("Rubicon: mediaTypes.video.context must be outstream or instream"),u;if(Td(e,zo).length<2)return a&&ke("Rubicon: could not determine the playerSize of the video"),u;a&&Te("Rubicon: making video request for adUnit",e.adUnitCode),u.push(zo)}if(void 0!==y(e,"mediaTypes.".concat(Mo))&&u.push(Mo),void 0!==y(e,"mediaTypes.".concat(Fo))){if(0===Td(e,Fo).length)return a&&ke("Rubicon: could not determine the sizes for banner request"),u;a&&Te("Rubicon: making banner request for adUnit",e.adUnitCode),u.push(Fo)}return u}function kd(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||ke("Rubicon: required schain params missing"),t):t}function Bd(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var Rd=!1;function Pd(e){return null==e||!e.gdprApplies||!0===y(e,"vendorData.purpose.consents.1")}Pr(xd);var Ud={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"};function Dd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||Nd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qd(e){return function(e){if(Array.isArray(e))return Md(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nd(e,t){if(e){if("string"==typeof e)return Md(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Md(e,t):void 0}}function Md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zd={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid"},Fd=["user.data"].concat(vc.map((function(e){return"".concat(e,".content.data")})));function Ld(e,t,n){return null==t?n:Ne(t)?t:ze(t)?t.toString():void _e("Unsuported type for param: "+e+" required type: String")}function Wd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return Ve(e,(function(e,r){if(Me(e)){var i=[];Ve(e,(function(e){((e=Ld(t+"."+r,e))||""===e)&&i.push(e)})),e=i}else{if(!Ne(e=Ld(t+"."+r,e)))return;e=[e]}e=e.filter((function(e){return""!==e}));var o={key:r};e.length>0&&(o.value=e),n.push(o)})),n}function Hd(e){var t={};return e.forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),r=n[0],i=n[1];t.hasOwnProperty(r)?t[r].push(i):t[r]=[i]}else t.hasOwnProperty(e)||(t[e]=[])})),t}function Vd(e){return Hd(ld(e))}function Gd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Wd(St.apply(void 0,qd(t.map((function(e){return Object.fromEntries(Object.entries(e||{}).map((function(e){var t=Dd(e,2),n=t[0],r=t[1];return[n,ze(r)||Ne(r)?[r]:r]})))})))))}function Xd(e){var t={};return Fd.forEach((function(n){(y(e,n)||[]).forEach((function(e){var n=zd[y(e,"ext.segtax")];n&&e.segment.forEach((function(e){t[n]?t[n].push(e.id):t[n]=[e.id]}))}))})),t}function $d(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function Jd(e,t){for(var n=[],r=0;r<t;r++){var i=Fe(e)?ot(e):e;n.push(i)}return n}function Kd(e,t){for(var n=[],r=0;r<Math.ceil(e.length/t);r++){var i=r*t,o=i+t;n.push(e.slice(i,o))}return n}function Yd(e){return Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(e)}function Qd(){return Qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qd.apply(this,arguments)}function Zd(e){return function(e){if(Array.isArray(e))return el(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return el(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tl="appnexus",nl="https://ib.adnxs.com/ut/v3/prebid",rl="https://ib.adnxs-simple.com/ut/v3/prebid",il=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],ol=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],al=["age","externalUid","external_uid","segments","gender","dnt","language"],ul=["geo","device_id"],cl=["enabled","dongle","member_id","debug_timeout"],sl={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},dl={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},ll={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},fl="<script",pl=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,ml="trk.js",vl=_o({bidderCode:tl}),gl={code:tl,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"uol",gvlid:32},{code:"adzymic",gvlid:32}],supportedMediaTypes:[Fo,zo,Mo],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var n,r,i=(e=cu(e)).map(yl),o=u(e,hl),c={};!0===_.getConfig("coppa")&&(c={coppa:!0}),o&&Object.keys(o.params.user).filter((function(e){return a(al,e)})).forEach((function(e){var t=$d(e);if("segments"===e&&Me(o.params.user[e])){var n=[];o.params.user[e].forEach((function(e){ze(e)?n.push({id:e}):Fe(e)&&n.push(e)})),c[t]=n}else"segments"!==e&&(c[t]=o.params.user[e])}));var s,d=u(e,Il);d&&d.params&&d.params.app&&(s={},Object.keys(d.params.app).filter((function(e){return a(ul,e)})).forEach((function(e){return s[e]=d.params.app[e]})));var l,f=u(e,Sl);f&&f.params&&d.params.app&&d.params.app.id&&(l={appid:f.params.app.id});var p={},m={},v=vl.getCookie("apn_prebid_debug")||null;if(v)try{p=JSON.parse(v)}catch(e){ke("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(sl).forEach((function(e){var t=Ue(e);Ne(t)&&""!==t&&(p[sl[e]]=t,p.enabled=!0)})),p=fd({member_id:"number",debug_timeout:"number"},p);var g=u(e,Ol);g&&g.debug&&(p=g.debug)}p&&p.enabled&&Object.keys(p).filter((function(e){return a(cl,e)})).forEach((function(e){m[e]=p[e]}));var y=u(e,wl),b=y?parseInt(y.params.member,10):0,h=e[0].schain,w=u(e,xl),I={tags:Zd(i),user:c,sdk:{source:"pbjs",version:"8.26.0"},schain:h};w&&(I.iab_support={omidpn:"Appnexus",omidpv:"8.26.0"}),b>0&&(I.member_id=b),d&&(I.device=s),f&&(I.app=l);var S=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gd.apply(void 0,[Vd(e),Xd(e)].concat(n))}(ot(t&&t.ortb2),ot(_.getConfig("appnexusAuctionKeywords"))||{});if(S.length>0&&(I.keywords=S),_.getConfig("adpod.brandCategoryExclusion")&&(I.brand_category_uniqueness=!0),m.enabled&&(I.debug=m,Ee("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(m,null,4))),t&&t.gdprConsent&&(I.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var O=t.gdprConsent.addtlConsent,A=O.substring(O.indexOf("~")+1);I.gdpr_consent.addtl_consent=A.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(I.us_privacy=t.uspConsent),null!=t&&t.gppConsent?I.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(I.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var x={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},j=t.refererInfo.canonicalUrl;Ne(j)&&""!==j&&(x.rd_can=j),I.referrer_detection=x}if(u(e,Al)&&e.filter(Al).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,r=n.durationRangeSec,i=n.requireExactDuration,o=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,r=e.requireExactDuration,i=Math.min.apply(Math,Zd(n)),o=Math.floor(t/i);return r?Math.max(o,n.length):o}(t.mediaTypes.video),a=Math.max.apply(Math,Zd(r)),u=e.filter((function(e){return e.uuid===t.bidId})),c=Jd.apply(void 0,Zd(u).concat([o]));if(i){var s=Kd(c,Math.ceil(o/r.length));r.forEach((function(e,t){s[t].map((function(t){jl(t,"minduration",e),jl(t,"maxduration",e)}))}))}else c.map((function(e){return jl(e,"maxduration",a)}));return c}(i,e),n=I.tags.filter((function(t){return t.uuid!==e.bidId}));I.tags=[].concat(Zd(n),Zd(t))})),e[0].userId){var C=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var n={source:e.source,id:t.id};"adserver.org"==e.source?n.rti_partner="TDID":"uidapi.com"==e.source&&(n.rti_partner="UID2"),C.push(n)}))})),C.length&&(I.eids=C)}i[0].publisher_id&&(I.publisher_id=i[0].publisher_id);var T=function(e,t){var n=[],r={withCredentials:!0},i=nl;Pd(null==t?void 0:t.gdprConsent)||(i=rl);"TRUE"!==Ue("apn_test").toUpperCase()&&!0!==_.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1});if(e.tags.length>15){var o=ot(e);Kd(e.tags,15).forEach((function(e){o.tags=e;var a=JSON.stringify(o);n.push({method:"POST",url:i,data:a,bidderRequest:t,options:r})}))}else{var a=JSON.stringify(e);n={method:"POST",url:i,data:a,bidderRequest:t,options:r}}return n}(I,t);return T},interpretResponse:function(e,t){var n=this,r=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(r.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),ke(o),i}if(e.tags&&e.tags.forEach((function(e){var t,o=(t=e)&&t.ads&&t.ads.length&&u(t.ads,(function(e){return e.rtb}));if(o&&((!0===Sn.get(r.bidderCode,"allowZeroCpmBids")?o.cpm>=0:o.cpm>0)&&a(n.supportedMediaTypes,o.ad_type))){var c=function(e,t,n){var r=tt(e.uuid,[n]),i=he(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};t.adomain&&(o.meta=Qd({},o.meta,{advertiserDomains:[t.adomain]}));t.advertiser_id&&(o.meta=Qd({},o.meta,{advertiserId:t.advertiser_id}));function a(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}t.buyer_member_id&&(o.meta=Qd({},o.meta,{dchain:a(t)}));t.brand_id&&(o.meta=Qd({},o.meta,{brandId:t.brand_id}));if(t.rtb.video){switch(Qd(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),y(r,"mediaTypes.video.context")){case Lo:var c=Ud[t.brand_category_id]?Ud[t.brand_category_id]:null;o.meta=Qd({},o.meta,{primaryCatId:c});var s=t.deal_priority;o.video={context:Lo,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:s},o.vastUrl=t.rtb.video.asset_url;break;case ar:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var d=u(n.bids,(function(t){return t.bidId===e.uuid})),l=y(d,"mediaTypes.video.renderer.options");l||(l=y(d,"renderer.options")),o.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=mn.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(Cl)}catch(e){_e("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:function(){return Te("AppNexus outstream video impression event")},loaded:function(){return Te("AppNexus outstream video loaded event")},ended:function(){Te("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),r}(o.adUnitCode,t,l)}break;case ur:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}}else if(t.rtb[Mo]){var f,p=t.rtb[Mo];if(function(e){if(!e||""===e)return!1;var t=e.match(pl),n=null!=t&&t.length>=1,r=e.match(ml),i=null!=r&&r.length>=1;return e.startsWith(fl)&&i&&n}(t.viewability.config)){var m="pbjs_adid="+i+";pbjs_auc="+r.adUnitCode;f=t.viewability.config.replace("dom_id=%native_dom_id%",m)}var v=p.javascript_trackers;null==v?v=f:Ne(v)?v=[v,f]:v.push(f),o[Mo]={title:p.title,body:p.desc,body2:p.desc2,cta:p.ctatext,rating:p.rating,sponsoredBy:p.sponsored,privacyLink:p.privacy_link,address:p.address,downloads:p.downloads,likes:p.likes,phone:p.phone,price:p.price,salePrice:p.saleprice,clickUrl:p.link.url,displayUrl:p.displayurl,clickTrackers:p.link.click_trackers,impressionTrackers:p.impression_trackers,video:p.video,javascriptTrackers:v},p.main_img&&(o.native.image={url:p.main_img.url,height:p.main_img.height,width:p.main_img.width}),p.icon&&(o.native.icon={url:p.icon.url,height:p.icon.height,width:p.icon.width})}else{Qd(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var g=0;g<t.rtb.trackers[0].impression_urls.length;g++){var b=Qe(t.rtb.trackers[0].impression_urls[g]);o.ad+=b}}catch(e){ke("Error appending tracking pixel",e)}}return o}(e,o,r);c.mediaType=function(e){var t=e.ad_type;return t===zo?zo:t===Mo?Mo:Fo}(o),i.push(c)}})),e.debug&&e.debug.debug_info){var c="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;c=c.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),Te("https://console.appnexus.com/docs/understanding-the-debug-auction"),Te(c)}return i},getUserSyncs:function(e,t,n,r,i){if(e.iframeEnabled&&Pd(n)&&function(e){return!e||!Array.isArray(e.applicableSections)||e.applicableSections.every((function(e){return"number"==typeof e&&e<=5}))}(i))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,n,r){var i=Wd;if(!0===t){var o=null,u=_.getConfig("s2sConfig");Fe(u)?o=y(u,"endpoint.p1Consent"):Me(u)&&u.forEach((function(e){a(e.bidders,n.bids[0].bidder)&&(o=y(e,"endpoint.p1Consent"))})),o&&o.match("/openrtb2/prebid")&&(i=El)}return e=fd({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(Object.keys(e).forEach((function(t){var n=$d(t);n!==t&&(e[n]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function yl(e){var t,n={};Object.keys(e.params).forEach((function(t){var n=$d(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),n.sizes=bl(e.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=e.bidId,e.params.placement_id?n.id=parseInt(e.params.placement_id,10):n.code=e.params.inv_code,n.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,n.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,n.prebid=!0,n.disable_psa=!0;var r=function(e){if(!qe(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if(Fe(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor;return null}(e);if(r&&(n.reserve=r),e.params.position)n.position={above:1,below:2}[e.params.position]||0;else{var i=y(e,"mediaTypes.banner.pos")||y(e,"mediaTypes.video.pos");0!==i&&1!==i&&3!==i||(n.position=3===i?2:i)}e.params.traffic_source_code&&(n.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(n.private_sizes=bl(e.params.private_sizes)),e.params.supply_type&&(n.supply_type=e.params.supply_type),e.params.pub_click&&(n.pubclick=e.params.pub_click),e.params.ext_inv_code&&(n.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(n.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(n.external_imp_id=e.params.external_imp_id);var o,u=Gd(Ne(o=y(e,"ortb2Imp.ext.data.keywords"))&&""!==o?Hd(o.split(/\s*(?:,)\s*/)):{},null===(t=e.params)||void 0===t?void 0:t.keywords);u.length>0&&(n.keywords=u);var c,s,d=y(e,"ortb2Imp.ext.gpid")||y(e,"ortb2Imp.ext.data.pbadslot");if(d&&(n.gpid=d),(e.mediaType===Mo||y(e,"mediaTypes.".concat(Mo)))&&(n.ad_types.push(Mo),0===n.sizes.length&&(n.sizes=bl([1,1])),e.nativeParams)){var l=(c=e.nativeParams,s={},Object.keys(c).forEach((function(e){var t=ll[e]&&ll[e].serverName||ll[e]||e,n=ll[e]&&ll[e].requiredParams;if(s[t]=Qd({},n,c[e]),(t===ll.image.serverName||t===ll.icon.serverName)&&s[t].sizes){var r=s[t].sizes;(yt(r)||Me(r)&&r.length>0&&r.every((function(e){return yt(e)})))&&(s[t].sizes=bl(s[t].sizes))}t===ll.privacyLink&&(s.privacy_supported=!0)})),s);n[Mo]={layouts:[l]}}var f=y(e,"mediaTypes.".concat(zo)),p=y(e,"mediaTypes.video.context");return n.hb_source=f&&"adpod"===p?7:1,(e.mediaType===zo||f)&&n.ad_types.push(zo),(e.mediaType===zo||f&&"outstream"!==p)&&(n.require_asset_url=!0),e.params.video&&(n.video={},Object.keys(e.params.video).filter((function(e){return a(il,e)})).forEach((function(t){switch(t){case"context":case"playback_method":var r=e.params.video[t];r=Me(r)?r[0]:r,n.video[t]=dl[t][r];break;case"frameworks":break;default:n.video[t]=e.params.video[t]}})),e.params.video.frameworks&&Me(e.params.video.frameworks)&&(n.video_frameworks=e.params.video.frameworks)),f&&(n.video=n.video||{},Object.keys(f).filter((function(e){return a(ol,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof n.video[e]&&(n.video[e]=f[e]);break;case"skip":"boolean"!=typeof n.video.skippable&&(n.video.skippable=1===f[e]);break;case"skipafter":"number"!=typeof n.video.skipoffset&&(n.video.skippoffset=f[e]);break;case"playbackmethod":if("number"!=typeof n.video.playback_method){var t=f[e];(t=Me(t)?t[0]:t)>=1&&t<=4&&(n.video.playback_method=t)}break;case"api":if(!n.video_frameworks&&Me(f[e])){var r=f[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));n.video_frameworks=r}break;case"startdelay":case"placement":var i="context";if("number"!=typeof n.video[i]){var o=f.placement,a=f.startdelay,u=function(e){if(!e)return;if(2===e)return"in-banner";if(e>2)return"outstream"}(o)||function(e){if(!e)return;if(0===e)return"pre_roll";if(-1===e)return"mid_roll";if(-2===e)return"post_roll"}(a);n.video[i]=dl[i][u]}}}))),e.renderer&&(n.video=Qd({},n.video,{custom_renderer_present:!0})),e.params.frameworks&&Me(e.params.frameworks)&&(n.banner_frameworks=e.params.frameworks),y(e,"mediaTypes.".concat(Fo))&&n.ad_types.push(Fo),0===n.ad_types.length&&delete n.ad_types,n}function bl(e){var t=[],n={};if(Me(e)&&2===e.length&&!Me(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===Yd(e))for(var r=0;r<e.length;r++){var i=e[r];(n={}).width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}function hl(e){return!!e.params.user}function wl(e){return!!parseInt(e.params.member,10)}function Il(e){if(e.params)return!!e.params.app}function Sl(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function Ol(e){return!!e.debug}function Al(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===Lo}function xl(e){var t=!1,n=e.params,r=e.params.video;return n.frameworks&&Me(n.frameworks)&&(t=a(e.params.frameworks,6)),!t&&r&&r.frameworks&&Me(r.frameworks)&&(t=a(e.params.video.frameworks,6)),t}function jl(e,t,n){We(e.video)&&(e.video={}),e.video[t]=n}function Cl(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Tl.bind(null,e))}))}function Tl(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function El(e){var t="";return Object.keys(e).forEach((function(n){Ne(e[n])?""!==e[n]?t+="".concat(n,"=").concat(e[n],","):t+="".concat(n,","):Me(e[n])&&(""===e[n][0]?t+="".concat(n,","):e[n].forEach((function(e){t+="".concat(n,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}function _l(e){return function(e){if(Array.isArray(e))return Rl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||Bl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bl(e,t){if(e){if("string"==typeof e)return Rl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rl(e,t):void 0}}function Rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pl(e){return Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(e)}Pr(gl);var Ul=_.getConfig;function Dl(e,t){for(var n,r=0;r<e.length;r++)if(n=y(e[r],t))return n}function ql(e){e.renderer.push((function(){window.Adform.renderOutstream(e)}))}function Nl(e){return Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nl(e)}function Ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(n),!0).forEach((function(t){Fl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Nl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Nl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Nl(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hl.apply(this,arguments)}Pr({code:"adf",aliases:[{code:"adformOpenRTB",gvlid:50},{code:"adform",gvlid:50}],gvlid:50,supportedMediaTypes:[Mo,Fo,zo],isBidRequestValid:function(e){var t=e.params||{},n=t.mid,r=t.inv,i=t.mname;return!!(n||r&&i)},buildRequests:function(e,t){var n,r,i,o,a=t.ortb2||{},u=a.user;"object"===Pl(Ul("app"))?(i=Ul("app")||{},a.app&&St(i,a.app)):(o=Ul("site")||{},a.site&&St(o,a.site),o.page||(o.page=t.refererInfo.page));var c=Ul("device")||{};c.w=c.w||window.innerWidth,c.h=c.h||window.innerHeight,c.ua=c.ua||navigator.userAgent;var s=Dl(e,"params.adxDomain")||"adx.adform.net",d=Dl(e,"params.pt")||Dl(e,"params.priceType")||"net",l=null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid,f=Dl(e,"params.test"),p=Ul("currency.adServerCurrency"),m=p&&[p],v=Dl(e,"userIdAsEids"),g=Dl(e,"schain"),b=e.map((function(e,t){e.netRevenue=d;var n=e.getFloor?e.getFloor({currency:p||"USD",size:"*",mediaType:"*"}):{},r=n.floor,i=n.currency,o=e.params,a={id:t+1,tagid:o.mid,bidfloor:r,bidfloorcur:i,ext:{bidder:{inv:o.inv,mname:o.mname}}};if(e.nativeOrtbRequest&&e.nativeOrtbRequest.assets){for(var u=e.nativeOrtbRequest.assets,c=[],s=0;s<u.length;s++){var l=ot(u[s]),f=l.img;if(f){var m=f.ext&&f.ext.aspectratios;if(m){var v=parseInt(m[0].split(":")[0],10),g=parseInt(m[0].split(":")[1],10);f.wmin=f.wmin||0,f.hmin=g*f.wmin/v|0}}c.push(l)}a.native={request:{assets:c}}}var b=y(e,"mediaTypes.banner");if(b&&b.sizes){var h=Se(b.sizes).map((function(e){var t=kl(e.split("x"),2),n=t[0],r=t[1];return{w:parseInt(n,10),h:parseInt(r,10)}}));a.banner={format:h}}var w=y(e,"mediaTypes.video");return w&&(a.video=w),a})),h={id:t.bidderRequestId,site:o,app:i,user:u,device:c,source:{tid:l,fd:1},ext:{pt:d},cur:m,imp:b};return f&&(h.is_debug=!!f,h.test=1),_.getConfig("coppa")&&xt(h,"regs.coppa",1),void 0!==y(t,"gdprConsent.gdprApplies")&&(xt(h,"user.ext.consent",t.gdprConsent.consentString),xt(h,"regs.ext.gdpr",1&t.gdprConsent.gdprApplies)),t.uspConsent&&xt(h,"regs.ext.us_privacy",t.uspConsent),v&&xt(h,"user.ext.eids",v),g&&xt(h,"source.ext.schain",g),{method:"POST",url:"https://"+s+"/adx/openrtb",data:JSON.stringify(h),bids:e}},interpretResponse:function(e,t){var n=t.bids;if(e.body){var r,i,o=e.body,a=o.seatbid,u=o.cur,c=(r=a.map((function(e){return e.bid})),(i=[]).concat.apply(i,_l(r))).reduce((function(e,t){return e[t.impid-1]=t,e}),[]);return n.map((function(e,t){var n=c[t];if(n){var r=y(n,"ext.prebid.type"),i={requestId:e.bidId,cpm:n.price,creativeId:n.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:u,mediaType:r,width:n.w,height:n.h,dealId:n.dealid,meta:{mediaType:r,advertiserDomains:n.adomain}};return n.native?i.native={ortb:n.native}:i[r===zo?"vastXml":"ad"]=n.adm,e.renderer||r!==zo||"outstream"!==y(e,"mediaTypes.video.context")||(i.renderer=mn.install({id:e.bidId,url:"https://s2.adform.net/banners/scripts/video/outstream/render.js",adUnitCode:e.adUnitCode}),i.renderer.setRender(ql)),i}})).filter(Boolean)}}});var Vl="https://rtb.openx.net/openrtbb/prebidjs",Gl={code:"openx",gvlid:69,supportedMediaTypes:[Fo,zo],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;if(y(e,"mediaTypes.banner")&&t)return!!e.params.unit||y(e,"mediaTypes.banner.sizes.length")>0;return!(!e.params.unit||!t)},buildRequests:function(e,t){var n=e.filter((function(e){return Jl(e)})),r=e.filter((function(e){return function(e){return y(e,"mediaTypes.banner")||!Jl(e)}(e)})),i=r.length?[$l(r,t,Fo)]:[];return n.forEach((function(e){i.push($l([e],t,zo))})),i},interpretResponse:function(e,t){e.body||(e.body={nbr:0});return Xl.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,n,r){if(e.iframeEnabled||e.pixelEnabled){var i=e.iframeEnabled?"iframe":"image",o=[],a="https://u.openx.net/w/1.0/pd";if(n&&(o.push("gdpr="+(n.gdprApplies?1:0)),o.push("gdpr_consent="+encodeURIComponent(n.consentString||""))),r&&o.push("us_privacy="+encodeURIComponent(r)),t.length>0&&t[0].body&&t[0].body.ext){var u=t[0].body.ext;u.delDomain?a="https://".concat(u.delDomain,"/w/1.0/pd"):u.platform&&o.push("ph="+u.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:i,url:"".concat(a).concat(o.length>0?"?"+o.join("&"):"")}]}},transformBidParams:function(e,t){return fd({unit:"string",customFloor:"number"},e)}};Pr(Gl);var Xl=Gs({context:{netRevenue:!0,ttl:300},imp:function(e,t,n){var r=e(t,n);return St(r,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&xt(r,"ext.customParams",t.params.customParams),t.params.customFloor&&!r.bidfloor&&(r.bidfloor=t.params.customFloor),r},request:function(e,t,n,r){var i=e(t,n,r);St(i,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0"),pv:"8.26.0"}});var o=r.bidRequests[0];return o.params.coppa&&xt(i,"regs.coppa",1),o.params.doNotTrack&&xt(i,"device.dnt",1),o.params.platform&&xt(i,"ext.platform",o.params.platform),o.params.delDomain&&xt(i,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&xt(i,"ext.response_template_name",o.params.response_template_name),o.params.test&&(i.test=1),i},bidResponse:function(e,t,n){var r=e(t,n);t.ext&&(r.meta.networkId=t.ext.dsp_id,r.meta.advertiserId=t.ext.buyer_id,r.meta.brandId=t.ext.brand_id);var i=n.ortbResponse;return i.ext&&i.ext.paf&&(r.meta.paf=Hl({},i.ext.paf),r.meta.paf.content_id=y(t,"ext.paf.content_id")),r},response:function(e,t,n,r){var i=r.ortbRequest;i.ext&&(i.ext.delDomain&&xt(n,"ext.delDomain",i.ext.delDomain),i.ext.platform&&xt(n,"ext.platform",i.ext.platform));var o=e(t,n,r),a=y(n,"ext.fledge_auction_configs");return a?(a=Object.entries(a).map((function(e){var t=Ll(e,2);return{bidId:t[0],config:Hl({auctionSignals:{}},t[1])}})),{bids:o.bids,fledgeAuctionConfigs:a}):o.bids},overrides:{imp:{bidfloor:function(e,t,n,r){var i={};e(i,n,zl(zl({},r),{},{currency:"USD"})),"USD"===i.bidfloorcur&&Hl(t,i)},video:function(e,t,n,r){var i,o=n.mediaTypes[zo];o&&(o=Hl({},o,n.params.video),n=zl(zl({},n),{},{mediaTypes:Fl({},zo,o)})),e(t,n,r),t.video&&"outstream"===(null===(i=o)||void 0===i?void 0:i.context)&&(t.video.placement=t.video.placement||4)}}}});function $l(e,t,n){return{method:"POST",url:_.getConfig("openxOrtbUrl")||Vl,data:Xl.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:n}})}}function Jl(e){return y(e,"mediaTypes.video")}function Kl(e){var t;return rt()&&(t=u(window.googletag.pubads().getSlots(),function(e){return function(t){return mt(t,e)}}(e))),t}function Yl(e){var t=Kl(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function Ql(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||af(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(){return Zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zl.apply(this,arguments)}function ef(e){return function(e){if(Array.isArray(e))return uf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||af(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(n),!0).forEach((function(t){rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rf(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==cf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cf(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function of(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=af(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function af(e,t){if(e){if("string"==typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uf(e,t):void 0}}function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cf(e){return cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(e)}var sf="ix",df="roundel",lf=[Fo,zo,Mo],ff=[144,144],pf={JPY:1},mf={PBJS:"p",IX:"x"},vf={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9},gf={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},yf={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","utiq.com":"","criteo.com":"","euid.eu":"","intimatemerger.com":"","33across.com":"","liveintent.indexexchange.com":"","google.com":""},bf=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],hf=["mimes","minduration","maxduration"],wf=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],If="ixdiag",Sf="".concat(sf,"_features"),Of=!1,Af=_o({bidderCode:sf}),xf={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat"],featureToggles:{},isFeatureEnabled:function(e){return y(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(Af.localStorageIsEnabled()){var e=function(e){try{return JSON.parse(e)}catch(e){}}(Af.getDataFromLocalStorage(Sf));y(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,r=y(t,"ext.features");r&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:r},Af.localStorageIsEnabled()&&Af.setDataInLocalStorage(Sf,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},Af.localStorageIsEnabled()&&Af.removeDataFromLocalStorage(Sf)}},jf=0,Cf="",Tf="",Ef=!1,_f=2;function kf(e){var t=Bf(e,zo),n=y(e,"mediaTypes.video"),r=y(e,"params.video");if(qf(n,r).length)return{};t.video=r?ot(e.params.video):{};var i=y(e,"ortb2Imp.ext.tid");for(var o in i&&xt(t,"ext.tid",i),function(e,t){if(y(t,"mediaTypes.video.context")===ar){var n=y(t,"mediaTypes.video.renderer");if(n||(n=y(t,"renderer")),y(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(n&&"object"===cf(n)){if(void 0!==n.url){var r="";try{r=new URL(n.url).hostname}catch(e){return}r.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=n.url}}else e.displaymanager="ix"}}(t,e),Hf(t,e),n)-1===wf.indexOf(o)||t.video.hasOwnProperty(o)||(t.video[o]=n[o]);if(t.video.minduration>t.video.maxduration)return ke("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:sf,code:vf.VIDEO_DURATION_INVALID}),{};var a=r&&r.context||n&&n.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!vt(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&(_e("IX Bid Adapter: video.plcmt [".concat(e.video.plcmt,"] must be an integer between 1-4 inclusive")),delete e.video.plcmt)}(t),a&&!t.video.hasOwnProperty("placement")&&(a===ur?t.video.placement=1:a===ar?y(r,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,Ef=!0):_e("IX Bid Adapter: Video context '".concat(a,"' is not supported"))),!t.video.w||!t.video.h){var u=Nf(y(t,"video.playerSize"))||Nf(y(e,"params.size"));if(!u)return _e("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=u[0],t.video.h=u[1]}return Rf(e,t,zo),t}function Bf(e,t){var n={};if(n.id=e.bidId,np()&&y(e,"params.externalId")&&xt(n,"ext.externalID",e.params.externalId),y(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case Fo:xt(n,"ext.siteID",e.params.banner.siteId.toString());break;case zo:xt(n,"ext.siteID",e.params.video.siteId.toString());break;case Mo:xt(n,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&xt(n,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||xt(n,"ext.sid",String(e.params.id)),n}function Rf(e,t,n){var r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),qe(e.getFloor)){var o="*",a="*";if(n&&Ge(lf,n)){var u=t[n];o=n,a=[u.w,u.h]}try{i=e.getFloor({mediaType:o,size:a})}catch(e){_e("priceFloors module call getFloor failed, error : ",e)}}var c=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,xt(t,"ext.fl",mf.PBJS),c=!0):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,xt(t,"ext.fl",mf.IX),c=!0),c&&(n==Fo?(xt(t,"banner.ext.bidfloor",t.bidfloor),xt(t,"banner.ext.fl",t.ext.fl)):n==zo?(xt(t,"video.ext.bidfloor",t.bidfloor),xt(t,"video.ext.fl",t.ext.fl)):(xt(t,"native.ext.bidfloor",t.bidfloor),xt(t,"native.ext.fl",t.ext.fl)))}function Pf(e,t,n){var r={},i=!(!y(e,"exp")||!vt(e.exp)),o=y(e,"dealid")||y(e,"ext.dealid");pf.hasOwnProperty(t)?r.cpm=e.price/pf[t]:r.cpm=e.price/100,r.requestId=e.impid,o&&(r.dealId=o),r.netRevenue=true,r.currency=t,r.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=_f||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(r.vastUrl=e.ext.vasturl):r.vastXml=e.adm;var a=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{a=JSON.parse(e.adm)}catch(e){_e("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==_f?(r.width=n.video.w,r.height=n.video.h,r.mediaType=zo,r.mediaTypes=n.mediaTypes,r.ttl=i?e.exp:3600):a&&a.native?(r.native={ortb:a.native},r.width=e.w?e.w:1,r.height=e.h?e.h:1,r.mediaType=Mo,r.ttl=i?e.exp:3600):(r.ad=e.adm,r.width=e.w,r.height=e.h,r.mediaType=Fo,r.ttl=i?e.exp:300),r.meta={},r.meta.networkId=y(e,"ext.dspid"),r.meta.brandId=y(e,"ext.advbrandid"),r.meta.brandName=y(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(r.meta.advertiserDomains=e.adomain),r}function Uf(e){return Array.isArray(e)&&2===e.length&&vt(e[0])&&vt(e[1])}function Df(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Uf(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function qf(e,t){var n=[];e||_e("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var r,i=of(hf);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=e&&e.hasOwnProperty(o),u=t&&t.hasOwnProperty(o);a||u||n.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){i.e(e)}finally{i.f()}var c=e&&e.hasOwnProperty("protocol"),s=e&&e.hasOwnProperty("protocols"),d=t&&t.hasOwnProperty("protocol"),l=t&&t.hasOwnProperty("protocols");return c||s||d||l||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Nf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Uf(e)?e:!!Uf(e[0])&&e[0]}function Mf(e,t,n){if(e)return nf(nf({},u(n,(function(t){return t.bidId===e}))),u(t,(function(t){return t.id===e})))}function zf(e,t,n,r){var i="https://htlb.casalemedia.com/openrtb/pbjs",o=function(e){var t=[],n={};if(Me(e)){var r,i=of(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;yf.hasOwnProperty(o.source)&&y(o,"uids.0")&&(n[o.source]=!0,""!=yf[o.source]&&(o.uids[0].ext={rtiPartner:yf[o.source]}),delete o.uids[0].atype,t.push(o))}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:n}}(y(e,"0.userIdAsEids")),a=o.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var n=window.headertag.getIdentityInfo();if(n&&"object"===cf(n))for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];!i.responsePending&&i.data&&"object"===cf(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}(a,o),t&&t.bidderCode===df&&!o.seenSources["liveramp.com"])return[];var u=[],c=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=Af.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);c=function(e,t){t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:xf.isFeatureEnabled(t)}})));return e}(c,xf.REQUESTED_FEATURE_TOGGLES);var s=function(e,t){var n,r=e.map((function(e){return e.adUnitCode})).filter((function(e,t,n){return n.indexOf(e)===t})),i={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"8.26.0",userIds:Gf(e[0]),url:window.location.href.split("?")[0],vpd:Ef,ae:t},o=of(r);try{var a=function(){var t=n.value,r=e.filter((function(e){return e.adUnitCode===t}))[0];y(r,"mediaTypes")&&(Object.keys(r.mediaTypes).length>1&&i.mfu++,y(r,"mediaTypes.native")&&i.nu++,y(r,"mediaTypes.banner")&&i.bu++,"outstream"===y(r,"mediaTypes.video.context")&&(i.ou++,tp(r)&&(i.ren=!0)),"instream"===y(r,"mediaTypes.video.context")&&i.iu++,i.allu++)};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return i}(e,y(t,"fledgeEnabled"));for(var d in s)c.ext.ixdiag[d]=s[d];c=function(e,t,n,r,i){var o,a,u=y(t,"timeout");u&&(e.ext.ixdiag.tmax=u);_.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=_.getConfig("userSync").syncsPerBidder);var c=function(){if(!Af.localStorageIsEnabled())return;var e,t={};try{e=JSON.parse(Af.getDataFromLocalStorage(If)||"{}")}catch(e){return ke("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(r){"number"==typeof e[n][r]&&(t[r]=t[r]?t[r]+e[n][r]:e[n][r])}))})),t}();We(c)||(e.ext.ixdiag.err=c);e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:null==t||null===(o=t.ortb2)||void 0===o||null===(a=o.source)||void 0===a?void 0:a.tid},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain);i.length>0&&(e.user={},e.user.eids=i);document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer);return e}(c,t,n,e,a),c=function(e,t){if(t){t.gdprConsent&&((Cf=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:Cf.gdprApplies?1:0}}),Cf.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:Cf.consentString||""},Cf.hasOwnProperty("addtlConsent")&&Cf.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:Cf.addtlConsent}))),t.uspConsent&&(xt(e,"regs.ext.us_privacy",t.uspConsent),Tf=t.uspConsent);var n=y(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(xt(e,"regs.gpp",t.gppConsent.gppString),xt(e,"regs.gpp_sid",t.gppConsent.applicableSections))}_.getConfig("coppa")&&xt(e,"regs.coppa",1);return e}(c,t);var l={};e[0].params.siteId&&(jf=e[0].params.siteId,l.s=jf);for(var f=Object.keys(n),p=!1,m=0;m<f.length&&!(u.length>=4);m++){c=Ff(n,f,c,m);var v=y(t,"ortb2")||{},g=nf({},v.site||v.context);g.page=Lf(t);var b=nf({},v.user);We(v)||p||((c=Wf(t,c,v,g,b)).site=St({},c.site,g),c.user=St({},c.user,b),p=!0),c=Vf(n,c,f,m,l,i);var h=m===f.length-1;if(c=op(c=ip(c=up(c))),h){var w="".concat(i,"?");0!==jf&&(w+="s=".concat(jf)),np()&&(w+=0!==jf?"&":"",w+="p=".concat(_.getConfig("exchangeId"))),u.push({method:"POST",url:w,data:ot(c),option:{contentType:"text/plain"},validBidRequests:e}),c.imp=[],p=!1}}return u}function Ff(e,t,n,r){var i=e[t[r]],o=i.missingImps,a=void 0===o?[]:o,u=i.ixImps,c={ixImps:void 0===u?[]:u,missingBannerImpressions:a},s=Object.keys(c).map((function(e){return c[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,ef(t))}),[]),d=e[t[r]].gpid,l=e[t[r]].dfp_ad_unit_code,f=e[t[r]].tid,p=e[t[r]].sid,m=e[t[r]].ae,v=s.filter((function(e){return Fo in e})),g=s.filter((function(e){return!(Fo in e)}));if(v.length>0){var b=v.reduce((function(e,t){return e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e}),{});for(var h in b){for(var w=b[h],I=w[0],S=I.id,O=I.banner.topframe,A=y(w[0],"ext.externalID"),x={id:S,banner:{topframe:O,format:w.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},j=0;j<x.banner.format.length;j++)null!=x.banner.format[j].ext&&(null!=x.banner.format[j].ext.sid&&delete x.banner.format[j].ext.sid,null!=x.banner.format[j].ext.externalID&&delete x.banner.format[j].ext.externalID),"bidfloor"in w[j]&&(x.banner.format[j].ext.bidfloor=w[j].bidfloor),"{}"===JSON.stringify(x.banner.format[j].ext)&&delete x.banner.format[j].ext;var C=e[t[r]].pos;vt(C)&&(x.banner.pos=C),(l||d||f||p||m||A)&&(x.ext={},x.ext.dfp_ad_unit_code=l,x.ext.gpid=d,x.ext.tid=f,x.ext.sid=p,x.ext.externalID=A,1==m&&(x.ext.ae=1)),"bidfloor"in w[0]&&(x.bidfloor=w[0].bidfloor),"bidfloorcur"in w[0]&&(x.bidfloorcur=w[0].bidfloorcur);var T=e[t[r]].adUnitFPD;T&&xt(x,"ext.data",T),n.imp.push(x)}}return g.length>0&&g.forEach((function(e){if(d&&xt(e,"ext.gpid",d),n.imp.length>0){var t=!1;n.imp.forEach((function(r,i){e.id===r.id&&zo in e?(r.video=e.video,r.video.ext=Zl({},e.video.ext,e.ext),y(r,"video.ext.bidfloor",!1)&&y(r,"bidfloor",!1)&&r.video.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.video.ext.bidfloor),!y(r,"ext.siteID",!1)&&y(e,"video.ext.siteID")&&(xt(r,"ext.siteID",e.video.ext.siteID),xt(n,"ext.ixdiag.usid",!0)),t=!0):e.id===r.id&&Mo in e&&(r.native=e.native,r.native.ext=Zl({},e.native.ext,e.ext),y(r,"native.ext.bidfloor",!1)&&y(r,"bidfloor",!1)&&r.native.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.native.ext.bidfloor),!y(r,"ext.siteID",!1)&&y(e,"native.ext.siteID",!1)&&(xt(r,"ext.siteID",e.native.ext.siteID),xt(n,"ext.ixdiag.usid",!0)),t=!0)})),t||n.imp.push(e)}else n.imp.push(e)})),n}function Lf(e){var t=e&&e.bidderCode||"ix",n=_.getConfig(t),r="";if((r=y(e,"ortb2.site.page")?e.ortb2.site.page:y(e,"refererInfo.page"),n)&&"object"===cf(n.firstPartyData))return function(e,t,n){var r;try{r=new URL(t)}catch(n){_e("IX Bid Adapter: Invalid URL set in ortb2.site.page: ".concat(t,". Using referer URL instead.")),r=new URL(y(e,"refererInfo.page"))}for(var i=new URLSearchParams(r.search),o=0,a=Object.entries(n);o<a.length;o++){var u=Ql(a[o],2),c=u[0],s=u[1];i.has(c)||i.append(c,s)}return r.search=i.toString(),r.toString()}(e,r,n.firstPartyData);return r}function Wf(e,t,n,r,i){if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((function(e){-1===gf.SITE.indexOf(e)&&delete r[e]})),Object.keys(i).forEach((function(e){-1===gf.USER.indexOf(e)&&delete i[e]})),n.device){var o=nf({},n.device.sua);We(o)||xt(t,"device.sua",o)}return n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&xt(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&xt(t,"regs.gpp_sid",n.regs.gpp_sid)),t}function Hf(e,t){var n=y(t,"ortb2Imp.ext.data");n&&xt(e,"ext.data",n)}function Vf(e,t,n,r,i,o){var a=e[n[r]].pbadslot,u=e[n[r]].tagId,c=e[n[r]].adUnitCode,s=e[n[r]].divId;return(a||u||c||s)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=u,t.ext.ixdiag.adunitcode=c,t.ext.ixdiag.divId=s),t}function Gf(e){var t=e.userId||{};return bf.filter((function(e){return t[e]}))}function Xf(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];if(t[0]===r[0]&&t[1]===r[1]){e.splice(n,1);break}}}function $f(e,t){var n=function(e){var t=Bf(e,Mo),n=e.nativeOrtbRequest;n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"};var r=y(e,"ortb2Imp.ext.tid");return r&&xt(t,"ext.tid",r),Hf(t,e),Rf(e,t,Mo),t}(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=y(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=y(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=y(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=y(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:Yl(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function Jf(e,t){var n=kf(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=y(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=y(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=y(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=y(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:Yl(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function Kf(e,t,n,r){var i=function(e){var t=Bf(e,Fo);t.banner={},t.adunitCode=e.adUnitCode;var n=y(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=at()?0:1,Rf(e,t,Fo),t}(e),o=Df(y(e,"mediaTypes.banner.sizes"),y(e,"params.size"));if(n.hasOwnProperty(e.adUnitCode)||(n[e.adUnitCode]={}),n[e.adUnitCode].gpid=y(e,"ortb2Imp.ext.gpid"),n[e.adUnitCode].dfp_ad_unit_code=y(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.adUnitCode].tid=y(e,"ortb2Imp.ext.tid"),n[e.adUnitCode].pbadslot=y(e,"ortb2Imp.ext.data.pbadslot"),n[e.adUnitCode].tagId=y(e,"params.tagId"),n[e.adUnitCode].pos=y(e,"mediaTypes.banner.pos"),y(r,"fledgeEnabled")){var a=y(e,"ortb2Imp.ext.ae");a?vt(a)?n[e.adUnitCode].ae=a:_e("error setting auction environment flag - must be an integer"):1==y(r,"defaultForSlots")&&(n[e.adUnitCode].ae=1)}var u=y(e,"ortb2Imp.ext.data");u&&(n[e.adUnitCode].adUnitFPD=u);var c=y(e,"params.id");!c||"string"!=typeof c&&"number"!=typeof c||(n[e.adUnitCode].sid=String(c));var s=e.adUnitCode,d=document.getElementById(s)?s:Yl(s).divId;n[e.adUnitCode].adUnitCode=s,n[e.adUnitCode].divId=d,o&&(n[e.adUnitCode].hasOwnProperty("ixImps")||(n[e.adUnitCode].ixImps=[]),n[e.adUnitCode].ixImps.push(i)),function(e,t,n){if(t.hasOwnProperty(e.adUnitCode)){var r=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(r=t[e.adUnitCode].missingSizes),Xf(r,e.params.size),t[e.adUnitCode].missingSizes=r}else if(y(e,"mediaTypes.banner.sizes")){var i=ot(e.mediaTypes.banner.sizes);Xf(i,e.params.size);var o={missingSizes:i,impression:n};t[e.adUnitCode]=o}}(e,t,i)}function Yf(e,t,n){var r=ot(t);return r.banner.w=n[0],r.banner.h=n[1],Rf(e,r,Fo),r}function Qf(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===sf&&function(e){if(Af.localStorageIsEnabled()){var t;try{t=JSON.parse(Af.getDataFromLocalStorage(If)||"{}")}catch(e){_e("ix can not read ixdiag from localStorage.")}var n=new Date;if(Object.keys(t).map((function(e){var r=new Date(e);r.setDate(r.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===sf){var r=n.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[r]=t[r]||{},Number(t[r][i])||(t[r][i]=0),t[r][i]++)}Af.setDataInLocalStorage(If,JSON.stringify(t))}}(e)}function Zf(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:Yl(t).divId;n?window.createIXPlayer(n,e):_e("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function ep(e,t){var n=mn.install({id:e,url:t,loaded:!1});try{n.setRender(Zf)}catch(e){return _e("Prebid Error calling setRender on renderer",e),null}return t?n:(_e("Outstream renderer URL not found"),null)}function tp(e){if("outstream"!==y(e,"mediaTypes.video.context"))return!1;var t=y(e,"mediaTypes.video.renderer");return t||(t=y(e,"renderer")),!!("object"!==cf(t)||!t.url||!t.render)||t.backupOnly}function np(){var e=_.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}function rp(e,t){var n="",r="0";return Cf&&Cf.hasOwnProperty("gdprApplies")&&(r=Cf.gdprApplies?"1":"0"),Cf&&Cf.hasOwnProperty("consentString")&&(n=Cf.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==jf?"&site_id="+jf.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+n+"&us_privacy="+(Tf||"")}function ip(e){return e.imp.forEach((function(t,n){var r=t.ext;if(null==r)return e;ap(t)<2||Object.keys(r).forEach((function(i){if(Fo in t){var o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].banner.ext[i],void 0!==t.banner.format)for(var a=0;a<t.banner.format.length;a++)null!=t.banner.format[a].ext&&null!=t.banner.format[a].ext[i]&&t.banner.format[a].ext[i]==r[i]&&delete e.imp[n].banner.format[a].ext[i]}if(zo in t){var u=t.video.ext;void 0!==u&&void 0!==u[i]&&u[i]==r[i]&&delete e.imp[n].video.ext[i]}if(Mo in t){var c=t.native.ext;void 0!==c&&void 0!==c[i]&&c[i]==r[i]&&delete e.imp[n].native.ext[i]}}))})),e}function op(e){return e.imp.forEach((function(t,n){if(null==t.ext)return e;if(!(ap(t)<2)){if(Fo in t){var r=t.banner.ext;if(void 0!==r&&void 0!==r.siteID&&delete e.imp[n].banner.ext.siteID,void 0!==t.banner.format)for(var i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&(xt(e.imp[n],"ext.siteID",t.banner.format[i].ext.siteID),xt(e,"ext.ixdiag.usid",!0),delete e.imp[n].banner.format[i].ext.siteID)}if(zo in t){var o=t.video.ext;void 0!==o&&void 0!==o.siteID&&delete e.imp[n].video.ext.siteID}if(Mo in t){var a=t.native.ext;void 0!==a&&void 0!==a.siteID&&delete e.imp[n].native.ext.siteID}}})),e}function ap(e){var t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function up(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}function cp(e){return cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(e)}function sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(n),!0).forEach((function(t){lp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==cp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cp(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pr({code:sf,gvlid:10,aliases:[{code:df,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:lf,isBidRequestValid:function(e){Of||(Wt(b.FP.AUCTION_DEBUG,Qf),Wt(b.FP.AD_RENDER_FAILED,Qf),Of=!0);var t,n,r=y(e,"params.video"),i=y(e,"params.size"),o=y(e,"mediaTypes.banner.sizes"),a=y(e,"mediaTypes.video"),u=y(e,"mediaTypes.video.playerSize"),c=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!Ge(lf,e.mediaType))return _e("IX Bid Adapter: media type is not supported."),!1;if(y(e,"mediaTypes.banner")&&!o)return!1;if(i){var d=Nf(i);if(!d)return ke("IX Bid Adapter: size has invalid format.",{bidder:sf,code:vf.BID_SIZE_INVALID_FORMAT}),!1;if(!Df(e.sizes,d)&&!Df(u,d)&&!Df(o,d))return ke("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:sf,code:vf.BID_SIZE_NOT_INCLUDED}),!1}if(!np()&&null==e.params.siteId)return ke("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return ke("IX Bid Adapter: siteId must be string or number type.",{bidder:sf,code:vf.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return ke("IX Bid Adapter: siteId must valid value",{bidder:sf,code:vf.SITE_ID_INVALID_VALUE}),!1}if((c||s)&&!(c&&s&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return ke("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:sf,code:vf.BID_FLOOR_INVALID_FORMAT}),!1;if(a&&r){var l=kf(e).video,f=qf(a,r);if(y(e,"mediaTypes.video.context")===ar&&tp(e)&&l){var p=[y(l,"w"),y(l,"h")];if(!(p[0]>=ff[0]&&p[1]>=ff[1]))return ke("IX Bid Adapter: ".concat(p," is an invalid size for IX outstream renderer")),!1}if(f.length)return f.forEach((function(e){ke(e,{bidder:sf,code:vf.PROPERTY_NOT_INCLUDED})})),!1}return function(e){return void 0===y(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:function(){jf=0},buildRequests:function(e,t){var n=[],r={},i={},o={},a={};for(var u in xf.getFeatureToggles(),e.forEach((function(e){var n=Object.keys(y(e,"mediaTypes",{}));for(var u in n)switch(n[u]){case Fo:Kf(e,a,r,t);break;case zo:Jf(e,i);break;case Mo:$f(e,o);break;default:_e("IX Bid Adapter: ad unit mediaTypes ".concat(u," is not supported"))}})),a)if(a.hasOwnProperty(u)){var c=a[u].missingSizes;r.hasOwnProperty(u)||(r[u]={}),r[u].hasOwnProperty("missingImps")||(r[u].missingImps=[],r[u].missingCount=0);for(var s=a[u].impression,d=0;d<c.length;d++){var l=Yf(e[0],s,c[d]);r[u].missingImps.push(l),r[u].missingCount++}}var f,p=[];return Object.keys(r).length>0&&p.push(r),Object.keys(i).length>0&&p.push(i),Object.keys(o).length>0&&p.push(o),xf.isFeatureEnabled("pbjs_enable_multiformat")?n.push.apply(n,ef(zf(e,t,(f={},p.forEach((function(e){Object.keys(e).forEach((function(t){Object.keys(f).includes(t)?f[t].hasOwnProperty("ixImps")&&e[t].hasOwnProperty("ixImps")?f[t].ixImps=[].concat(ef(f[t].ixImps),ef(e[t].ixImps)):f[t].hasOwnProperty("missingImps")&&e[t].hasOwnProperty("missingImps")?f[t].missingImps=[].concat(ef(f[t].missingImps),ef(e[t].missingImps)):e[t].hasOwnProperty("ixImps")?f[t].ixImps=e[t].ixImps:e[t].hasOwnProperty("missingImps")&&(f[t].missingImps=e[t].missingImps):f[t]=e[t]}))})),f)))):(Object.keys(r).length>0&&n.push.apply(n,ef(zf(e,t,r))),Object.keys(i).length>0&&n.push.apply(n,ef(zf(e,t,i))),Object.keys(o).length>0&&n.push.apply(n,ef(zf(e,t,o)))),n},interpretResponse:function(e,t){var n=[],r=null,i=y(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(xf.setFeatureToggles(e),!e.hasOwnProperty("body"))return n;for(var o=e.body,a=o.seatbid||[],u=0;u<a.length;u++)if(a[u].hasOwnProperty("bid")){for(var c=a[u].bid,s=t.data,d=0;d<c.length;d++){var l=Mf(c[d].impid,s.imp,t.validBidRequests);if((r=Pf(c[d],o.cur,l)).mediaType===zo&&tp(l)){var f=y(o,"ext.videoplayerurl");if(r.renderer=ep(c[d].bidId,f),!r.renderer)continue}n.push(r)}if(y(s,"ext.ixdiag.err")&&Af.localStorageIsEnabled())try{Af.removeDataFromLocalStorage(If)}catch(e){ke("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(i)&&i.length>0))return n;i=i.filter((function(e){return!!function(e){return"object"===cf(e)&&null!==e}(e)||(_e("Malformed auction config detected:",e),!1)}));try{return{bids:n,fledgeAuctionConfigs:i}}catch(e){return _e("Error attaching AuctionConfigs",e),n}},transformBidParams:function(e,t){return fd({siteID:"number"},e)},getUserSyncs:function(e,t){var n=[],r=null;if(t.length>0&&(r=y(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;_.getConfig("userSync")&&(i=_.getConfig("userSync").syncsPerBidder),0===i&&(i=r),i=r&&(0===i||i)?r>i?i:r:1;for(var o=0;o<i;o++)n.push({type:"image",url:rp(i,o)})}return n}});var fp={mimes:function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e}))},minduration:function(e){return vt(e)},maxduration:function(e){return vt(e)},protocols:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=10}))},w:function(e){return vt(e)},h:function(e){return vt(e)},startdelay:function(e){return vt(e)},placement:function(e){return vt(e)&&e>=1&&e<=5},linearity:function(e){return-1!==[1,2].indexOf(e)},skip:function(e){return-1!==[0,1].indexOf(e)},skipmin:function(e){return vt(e)},skipafter:function(e){return vt(e)},sequence:function(e){return vt(e)},battr:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=17}))},maxextended:function(e){return vt(e)},minbitrate:function(e){return vt(e)},maxbitrate:function(e){return vt(e)},boxingallowed:function(e){return-1!==[0,1].indexOf(e)},playbackmethod:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=6}))},playbackend:function(e){return-1!==[1,2,3].indexOf(e)},delivery:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=3}))},pos:function(e){return vt(e)&&e>=1&&e<=7},api:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=6}))}},pp={context:function(e){return e!==Lo},mimes:fp.mimes,maxduration:fp.maxduration,protocols:fp.protocols},mp={code:"sovrn",supportedMediaTypes:[Fo,zo],gvlid:13,isBidRequestValid:function(e){var t,n=null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video;return!(!e.params.tagid||isNaN(parseFloat(e.params.tagid))||!isFinite(e.params.tagid)||n&&!Object.keys(pp).every((function(e){return pp[e](n[e])})))},buildRequests:function(e,t){try{var n,r,i,o,a=[];Ve(e,(function(e){!i&&e.userIdAsEids&&(i=e.userIdAsEids).forEach((function(e){e.uids&&e.uids[0]&&"criteo.com"===e.source&&(o=e.uids[0].id)})),e.schain&&(r=r||e.schain),n=n||Ie("iv",e.params);var t=e.getFloor&&"function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.banner?"banner":"video",size:"*"}):{};t.floor=t.floor||Ie("bidfloor",e.params);var u={adunitcode:e.adUnitCode,id:e.bidId,tagid:String(Ie("tagid",e.params)),bidfloor:t.floor};if(y(e,"mediaTypes.banner")){var c=y(e,"mediaTypes.banner.sizes")||e.sizes,s=(c=(c=Me(c)&&Me(c[0])?c:[c]).filter((function(e){return Me(e)}))).map((function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}));u.banner={format:s,w:1,h:1}}y(e,"mediaTypes.video")&&(u.video=function(e){var t={},n=y(e,"sizes"),r=y(e,"mediaTypes.video",{}),i=y(e,"params.video",{}),o={};if(n){var a=Array.isArray(n[0])?n[0]:n;o.w=a[0],o.h=a[1]}else if(Array.isArray(r.playerSize)){var u=Array.isArray(r.playerSize[0])?r.playerSize[0]:r.playerSize;o.w=u[0],o.h=u[1]}var c=dp(dp(dp({},o),r),i);return Object.keys(fp).forEach((function(e){c.hasOwnProperty(e)&&(fp[e](c[e])?t[e]=c[e]:_e("The OpenRTB video param ".concat(e," has been skipped due to misformating. Please refer to OpenRTB 2.5 spec.")))})),t}(e)),u.ext=Ie("ext",e.ortb2Imp)||void 0;var d=Ie("segments",e.params);d&&(u.ext=u.ext||{},u.ext.deals=d.split(",").map((function(e){return e.trim()}))),a.push(u)}));var u=t.ortb2||{},c=u.site||{};c.page=t.refererInfo.page,c.domain=t.refererInfo.domain;var s=y(t,"timeout"),d={id:he(),imp:a,site:c,user:u.user||{},tmax:s};r&&(d.source={ext:{schain:r}});var l=y(t,"ortb2.source.tid");l&&xt(d,"source.tid",l),t.gdprConsent&&(xt(d,"regs.ext.gdpr",+t.gdprConsent.gdprApplies),xt(d,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&xt(d,"regs.ext.us_privacy",t.uspConsent),t.gppConsent&&(xt(d,"regs.gpp",t.gppConsent.gppString),xt(d,"regs.gpp_sid",t.gppConsent.applicableSections)),i&&(xt(d,"user.ext.eids",i),o&&xt(d,"user.ext.prebid_criteoid",o));var f="https://ap.lijit.com/rtb/bid?src=prebid_prebid_8.26.0";return n&&(f+="&iv=".concat(n)),{method:"POST",url:f,data:JSON.stringify(d),options:{contentType:"text/plain"}}}catch(e){ke("Could not build bidrequest, error deatils:",e)}},interpretResponse:function(e){var t=e.body,n=t.id,r=t.seatbid;if(!n||!r||!Array.isArray(r))return[];try{return r.filter((function(e){return e})).map((function(e){return e.bid.map((function(e){var t,n={requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,mediaType:e.nurl?Fo:zo,ttl:(null===(t=e.ext)||void 0===t?void 0:t.ttl)||90,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}};return e.nurl?n.ad=decodeURIComponent("".concat(e.adm,'<img src="').concat(e.nurl,'">')):n.vastXml=decodeURIComponent(e.adm),n}))})).flat()}catch(e){return ke("Could not interpret bidresponse, error details:",e),e}},getUserSyncs:function(e,t,n,r,i){try{var o=[];if(t&&0!==t.length){if(e.iframeEnabled){var a=t.filter((function(e){return y(e,"body.ext.iid")})).map((function(e){return e.body.ext.iid})),u=[];n&&n.gdprApplies&&"string"==typeof n.consentString&&u.push(["gdpr_consent",n.consentString]),r&&u.push(["us_privacy",r]),i&&(u.push(["gpp",i.gppString]),u.push(["gpp_sid",i.applicableSections])),a[0]&&(u.push(["informer",a[0]]),o.push({type:"iframe",url:"https://ap.lijit.com/beacon?"+u.map((function(e){return e.join("=")})).join("&")}))}e.pixelEnabled&&t.filter((function(e){return y(e,"body.ext.sync.pixels")})).reduce((function(e,t){return e.concat(t.body.ext.sync.pixels)}),[]).map((function(e){return e.url})).forEach((function(e){return o.push({type:"image",url:e})}))}return o}catch(e){return[]}}};function vp(e){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(e)}function gp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(n),!0).forEach((function(t){bp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==vp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vp(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hp.apply(this,arguments)}function wp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||Sp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ip(e){return function(e){if(Array.isArray(e))return Op(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sp(e,t){if(e){if("string"==typeof e)return Op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Op(e,t):void 0}}function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pr(mp);var Ap=0,xp=1,jp=2;function Cp(e){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(e)}var Tp,Ep,_p,kp,Bp,Rp,Pp=2,Up=!1,Dp={iab:function(e){var t=e.onSuccess,n=e.onError,r=e.onEvent;var i=function(e){var t=e.apiName,n=e.apiVersion,r=e.apiArgs,i=void 0===r?["command","callback","parameter","version"]:r,o=e.callbackArgs,a=void 0===o?["returnValue","success"]:o,u=e.mode,c=void 0===u?Ap:u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,d={},l="".concat(t,"Call"),f="".concat(t,"Return");function p(e){var t,n="string"==typeof e.data&&e.data.includes(f)?JSON.parse(e.data):e.data;if(null!=n&&null!==(t=n[f])&&void 0!==t&&t.callId){var r=n[f];d.hasOwnProperty(r.callId)&&d[r.callId].apply(d,Ip(a.map((function(e){return r[e]}))))}}var m,v=function(){for(var e,n=s,r=!1;null!=n;){try{if("function"==typeof n[t]){e=n,r=!0;break}}catch(e){}try{if(n.frames["".concat(t,"Locator")]){e=n;break}}catch(e){}if(n===s.top)break;n=n.parent}return[e,r]}(),g=wp(v,2),y=g[0],b=g[1];if(y)return b?m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new G((function(n,r){var i=y[t].apply(y,Ip(h(yp(yp({},e),{},{callback:e.callback||c===jp?w(e.callback,n,r):void 0})).map((function(e){var t=wp(e,2);return t[0],t[1]}))));(c===xp||null==e.callback&&c===Ap)&&n(i)}))}:(s.addEventListener("message",p,!1),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new G((function(n,r){var i=Math.random().toString(),o=bp({},l,yp(yp({},Object.fromEntries(h(e).filter((function(e){return"callback"!==wp(e,1)[0]})))),{},{callId:i}));d[i]=w(null==e?void 0:e.callback,n,r,(t||null==(null==e?void 0:e.callback))&&function(){delete d[i]}),y.postMessage(o,"*"),c===xp&&n()}))}),hp(m,{isDirect:b,close:function(){!b&&s.removeEventListener("message",p)}});function h(e){return e=hp({version:n},e),i.map((function(t){return[t,e[t]]}))}function w(e,t,n,r){var i="function"==typeof e;return function(o,a){r&&r(),c!==xp&&(null==a||a?t:n)(i?void 0:o),i&&e.apply(this,arguments)}}}({apiName:"__tcfapi",apiVersion:Pp,apiArgs:["command","version","callback","parameter"]});if(!i)return n("TCF2 CMP not found.");i.isDirect?Ee("Detected CMP API is directly accessible, calling it now..."):Ee("Detected CMP is outside the current iframe where Prebid.js is located, calling it now...");i({command:"addEventListener",callback:function(e,i){Ee("Received a response from CMP",e),i?(r(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||Mp(e,{onSuccess:t,onError:n})):n("CMP unable to register callback function.  Please check CMP setup.")}})},static:function(e){var t=e.onSuccess,n=e.onError;Mp(kp,{onSuccess:t,onError:n})}};function qp(e){var t,n,r=!1,i=null,o=!1;function u(e){null!=i&&clearTimeout(i),r||null==e||(0===e?t():i=setTimeout(t,e))}function c(t,n,i){if(u(null),r=!0,Ei.setConsentData(t),"function"==typeof e){for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];e.apply(void 0,[n,i].concat(a))}}if(a(Object.keys(Dp),Tp)){var s={onSuccess:function(e){return c(e,!1)},onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];c.apply(void 0,[null,!0,e].concat(n))},onEvent:function(e){n=e,o||(o=!0,null!=Bp&&u(Bp))}};t=function(){var e=function(e){c(e,!1,"".concat(o?"Timeout waiting for user action on CMP":"CMP did not load",", continuing auction..."))};Mp(n,{onSuccess:e,onError:function(){return e(zp(void 0))}})},Dp[Tp](s),null!=Bp&&o||u(Ep)}else c(null,!1,"CMP framework (".concat(Tp,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}var Np=jr("gdpr",(function(e,t){var n;n=function(n,r){if(r){var i=_e;n&&(i=ke,r="".concat(r," Canceling auction as per consentManagement config."));for(var o=arguments.length,a=new Array(o>2?o-2:0),u=2;u<o;u++)a[u-2]=arguments[u];i.apply(void 0,[r].concat(a))}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():ke("Error executing bidsBackHandler")):e.call(this,t)},Rp?(Ee("User consent information already known.  Pulling internally stored information..."),n(!1)):qp(n)}));function Mp(e,t){var n,r,i=t.onSuccess,o=t.onError;n=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:_p,r=e&&e.tcString,"boolean"==typeof n&&(!0!==n||r&&Ne(r))?i(zp(e)):o("CMP returned unexpected value during lookup process.",e)}function zp(e){return Rp={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:_p},e&&e.addtlConsent&&Ne(e.addtlConsent)&&(Rp.addtlConsent=e.addtlConsent),Rp.apiVersion=Pp,Rp}_.getConfig("consentManagement",(function(e){return function(e){if((e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"===Cp(e)){var t;Ne(e.cmpApi)?Tp=e.cmpApi:(Tp="iab",Ee("consentManagement config did not specify cmp.  Using system default setting (".concat("iab",")."))),ze(e.timeout)?Ep=e.timeout:(Ep=1e4,Ee("consentManagement config did not specify timeout.  Using system default setting (".concat(1e4,")."))),Bp=ze(e.actionTimeout)?e.actionTimeout:null,_p=!0===e.defaultGdprScope,Ee("consentManagement module has been activated..."),"static"===Tp&&(Fe(e.consentData)?(null!=(null===(t=kp=e.consentData)||void 0===t?void 0:t.getTCData)&&(kp=kp.getTCData),Ep=0):ke("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Up||o().requestBids.before(Np,50),Up=!0,Ei.enable(),qp()}else _e("consentManagement (gdpr) config not defined, exiting consent manager")}(e.consentManagement)})),Ac.before((function(e,t){return e(t.then((function(e){var t=Ei.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&xt(e,"regs.ext.gdpr",t.gdprApplies?1:0),xt(e,"user.ext.consent",t.consentString)),e})))})),Us({type:xs,name:"gdprAddtlConsent",fn:function(e,t){var n,r=null===(n=t.gdprConsent)||void 0===n?void 0:n.addtlConsent;r&&"string"==typeof r&&xt(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}});var Fp="Invalid schain object found: ",Lp=" should be a string",Wp=" should be an Integer",Hp=" should be an object",Vp=" should be an Array",Gp={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},Xp=[];function $p(e,t){var n=Gp.STRICT;if(function(e){return!(void 0===e||!Fe(e)&&(ke(Fp+"the following schain config will not be used as schain is not an object.",e),1))}(e)){if(Ne(e.validation)&&-1!=Xp.indexOf(e.validation)&&(n=e.validation),n===Gp.OFF)return e.config;if(function(e,t){var n="Detected something wrong within an schain config:",r="";function i(e){r+="\n"+e}function o(){!0===t?ke(n,e,r):_e(n,e,r)}if(!Fe(e)&&(i("schain.config"+Hp),o(),t))return!1;if(ze(e.complete)&&vt(e.complete)||i("schain.config.complete"+Wp),Ne(e.ver)||i("schain.config.ver"+Lp),e.hasOwnProperty("ext")&&(Fe(e.ext)||i("schain.config.ext"+Hp)),Me(e.nodes))e.nodes.forEach((function(e,t){Ne(e.asi)||i("schain.config.nodes[".concat(t,"].asi")+Lp),Ne(e.sid)||i("schain.config.nodes[".concat(t,"].sid")+Lp),ze(e.hp)&&vt(e.hp)||i("schain.config.nodes[".concat(t,"].hp")+Wp),e.hasOwnProperty("rid")&&(Ne(e.rid)||i("schain.config.nodes[".concat(t,"].rid")+Lp)),e.hasOwnProperty("name")&&(Ne(e.name)||i("schain.config.nodes[".concat(t,"].name")+Lp)),e.hasOwnProperty("domain")&&(Ne(e.domain)||i("schain.config.nodes[".concat(t,"].domain")+Lp)),e.hasOwnProperty("ext")&&(Fe(e.ext)||i("schain.config.nodes[".concat(t,"].ext")+Hp))}));else if(i("schain.config.nodes"+Vp),o(),t)return!1;return!(r.length>0&&(o(),t))}(e.config,!(n!==Gp.STRICT)))return e.config;ke(Fp+"due to the 'strict' validation setting, this schain config will not be passed to bidder '".concat(t,"'.  See above error for details."))}return null}function Jp(e,t){var n=_.getConfig("schain"),r=_.getBidderConfig();t.forEach((function(e){var t=e.bidderCode,i=function(e){return r[e]&&r[e].schain||n}(t);e.bids.forEach((function(e){var n=$p(i,t);n&&(e.schain=ot(n))}))})),e(t)}Ve(Gp,(function(e){return Xp.push(e)})),Oo.makeBidRequests.after(Jp),Us({type:xs,name:"sourceExtSchain",fn:function(e,t,n){if(!y(e,"source.ext.schain")){var r=y(n,"bidRequests.0.schain");r&&xt(e,"source.ext.schain",r)}}});function Kp(e){if(!(e.requestId&&e.cpm&&e.creativeId&&e.ttl&&e.currency))return!1;switch(e.mediaType){case Fo:return Boolean(e.width&&e.height&&e.ad);case zo:return Boolean(e.vastUrl);case Mo:return Boolean(e.title&&e.image&&e.impressionTrackers);default:return!1}}function Yp(e){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(e)}function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(n),!0).forEach((function(t){em(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function em(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Yp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yp(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pr({code:"bidscube",supportedMediaTypes:[Fo,zo,Mo],isBidRequestValid:function(e){return Boolean(e.bidId&&e.params&&!isNaN(parseInt(e.params.placementId)))},buildRequests:function(e){e=(e=cu(e))||[];var t=window;try{window.top.location.toString(),t=window.top}catch(e){Te(e)}for(var n=Ce(),r=[],i=0;i<e.length;i++){var o=e[i];r.push({placementId:o.params.placementId,bidId:o.bidId,traffic:o.params.traffic||Fo,allParams:JSON.stringify(o)})}return{method:"POST",url:"https://supply.bidscube.com/?c=o&m=multi",data:{deviceWidth:t.screen.width,deviceHeight:t.screen.height,language:navigator&&navigator.language?navigator.language:"",secure:+("https:"===n.protocol),host:n.hostname,page:n.pathname,placements:r}}},interpretResponse:function(e){for(var t=e.body,n=[],r=0;r<t.length;r++){var i=t[r];Kp(i)&&n.push(i)}return n},getUserSyncs:function(e,t){return[{type:"image",url:"https://supply.bidscube.com/?c=o&m=cookie"}]}});function tm(e){if(!(e.requestId&&e.cpm&&e.creativeId&&e.ttl&&e.currency&&e.meta))return!1;switch(e.mediaType){case Fo:return Boolean(e.width&&e.height&&e.ad);case zo:return Boolean(e.vastUrl||e.vastXml);case Mo:return Boolean(e.native&&e.native.impressionTrackers&&e.native.impressionTrackers.length);default:return!1}}function nm(e){var t=e.params,n=e.bidId,r=e.mediaTypes,i=e.schain||{},o=t.placementId,a=t.adFormat,u=function(e){if(!qe(e.getFloor))return y(e,"params.bidfloor",0);try{return e.getFloor({currency:"USD",mediaType:"*",size:"*"}).floor}catch(e){return 0}}(e),c={placementId:o,bidId:n,adFormat:a,schain:i,bidfloor:u};switch(a){case Fo:c.sizes=r[Fo].sizes;break;case zo:c.playerSize=r[zo].playerSize,c.minduration=r[zo].minduration,c.maxduration=r[zo].maxduration,c.mimes=r[zo].mimes,c.protocols=r[zo].protocols,c.startdelay=r[zo].startdelay,c.placement=r[zo].placement,c.skip=r[zo].skip,c.skipafter=r[zo].skipafter,c.minbitrate=r[zo].minbitrate,c.maxbitrate=r[zo].maxbitrate,c.delivery=r[zo].delivery,c.playbackmethod=r[zo].playbackmethod,c.api=r[zo].api,c.linearity=r[zo].linearity;break;case Mo:c.native=r[Mo]}return c}var rm={code:"contentexchange",supportedMediaTypes:[Fo,zo,Mo],isBidRequestValid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=e.bidId,r=e.mediaTypes,i=Boolean(n&&t&&t.placementId&&t.adFormat);switch(t.adFormat){case Fo:i=i&&Boolean(r[Fo]&&r[Fo].sizes);break;case zo:i=i&&Boolean(r[zo]&&r[zo].playerSize);break;case Mo:i=i&&Boolean(r[Mo]);break;default:i=!1}return i},buildRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=cu(e);var n,r=0,i=0;try{var o=window.top;r=o.screen.width,i=o.screen.height,n=o.location}catch(e){Te(e),n=window.location}var a,u=t.refererInfo&&t.refererInfo.page;try{a=u&&new URL(u)}catch(e){Te(e)}for(var c=a||n,s=navigator&&navigator.language?navigator.language.split("-")[0]:"",d=c.host,l=c.pathname,f=[],p={deviceWidth:r,deviceHeight:i,language:s,secure:"https:"===c.protocol?1:0,host:d,page:l,placements:f,coppa:!0===_.getConfig("coppa")?1:0,ccpa:t.uspConsent||void 0,gdpr:t.gdprConsent||void 0,tmax:t.timeout},m=e.length,v=0;v<m;v++){var g=e[v];f.push(nm(g))}return{method:"POST",url:"https://eu2.adnetwork.agency/pbjs",data:p}},interpretResponse:function(e){for(var t=[],n=0;n<e.body.length;n++){var r=e.body[n];if(tm(r)){var i=r.adomain&&r.adomain.length?r.adomain:[];r.meta=Zp(Zp({},r.meta),{},{advertiserDomains:i}),t.push(r)}}return t},getUserSyncs:function(e,t,n,r){var i=e.iframeEnabled?"iframe":"image",o="https://sync2.adnetwork.agency"+"/".concat(i,"?pbjs=1");n&&n.consentString&&("boolean"==typeof n.gdprApplies?o+="&gdpr=".concat(Number(n.gdprApplies),"&gdpr_consent=").concat(n.consentString):o+="&gdpr=0&gdpr_consent=".concat(n.consentString)),r&&r.consentString&&(o+="&ccpa_consent=".concat(r.consentString));var a=_.getConfig("coppa")?1:0;return[{type:i,url:o+="&coppa=".concat(a)}]}};function im(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(e,t)||um(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},om.apply(this,arguments)}function am(e){return function(e){if(Array.isArray(e))return cm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||um(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function um(e,t){if(e){if("string"==typeof e)return cm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cm(e,t):void 0}}function cm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(n),!0).forEach((function(t){lm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==fm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fm(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fm(e){return fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(e)}Pr(rm);var pm="pubmatic",mm="PubMatic: ",vm="USD",gm=void 0,ym="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),bm="Video.Placement param missing",hm={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},wm={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},Im={mimes:wm.ARRAY,minduration:wm.NUMBER,maxduration:wm.NUMBER,startdelay:wm.NUMBER,playbackmethod:wm.ARRAY,api:wm.ARRAY,protocols:wm.ARRAY,w:wm.NUMBER,h:wm.NUMBER,battr:wm.ARRAY,linearity:wm.NUMBER,placement:wm.NUMBER,plcmt:wm.NUMBER,minbitrate:wm.NUMBER,maxbitrate:wm.NUMBER,skip:wm.NUMBER},Sm={ICON:1,IMAGE:3},Om={1:"PMP",5:"PREF",6:"PMPG"},Am={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,r=Am.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),o=0;o<window.bluebillywig.renderers.length;o++)if(window.bluebillywig.renderers[o]._id===r){n=window.bluebillywig.renderers[o];break}n?n.bootstrap(t,i):_e("".concat(mm,": Couldn't find a renderer with ").concat(r))}else _e("".concat(mm,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=ym.replace("$RENDERER",e),r=mn.install({url:n,loaded:!1,adUnitCode:t});try{r.setRender(Am.outstreamRender)}catch(e){_e("".concat(mm,": Error tying to setRender on renderer"),e)}return r},outstreamRender:function(e){e.renderer.push((function(){Am.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},xm=[Fo,zo,Mo],jm=0,Cm=!1,Tm=["pubmatic"],Em=["all"];function _m(e,t){if(!Ne(t))return t&&_e(mm+"Ignoring param key: "+e+", expects string-value, found "+fm(t)),gm;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||gm;case"yob":return parseInt(t)||gm;default:return t}}function km(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=Ne(t=e.params.adSlot)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&_e(pm+": adSlot must be a string. Ignoring adSlot"),"");var n=e.params.adSlot,r=n.split(":");if(n=r[0],2==r.length&&(e.params.adUnitIndex=r[1]),r=n.split("@"),e.params.adUnit=r[0],r.length>1){if(2!=(r=r[1].split("x")).length)return void _e(mm+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(r[0],10),e.params.height=parseInt(r[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(Fo)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,o=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&o.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function Bm(e,t,n){var r,i="Ignoring param key: "+e+", expects "+n+", found "+fm(t);switch(n){case wm.BOOLEAN:r=Le;break;case wm.NUMBER:r=ze;break;case wm.STRING:r=Ne;break;case wm.ARRAY:r=Me}return r(t)?t:(_e(mm+i),gm)}var Rm={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},Pm=b.oF,Um=b.zA,Dm=b.FY,qm=b.s$,Nm=Object.values(Rm);function Mm(e){var t;if(e.ortb){e=e.ortb,t=dm(dm({ver:"1.2"},e),{},{assets:[]});var n=e.assets,r=function(e){return e.title||e.img||e.data||e.video};if(n.length<1||!n.some((function(e){return r(e)})))return _e("".concat(mm,": Native assets object is empty or contains some invalid object")),Cm=!0,t;n.forEach((function(e){var n=e;n.img&&(n.img.type==Sm.IMAGE?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:gm),n.h=n.h||n.height||(n.sizes?n.sizes[1]:gm),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:gm),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:gm)):n.img.type==Sm.ICON&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:gm),n.h=n.h||n.height||(n.sizes?n.sizes[1]:gm))),n&&void 0!==n.id&&r(n)&&t.assets.push(n)}))}else t=function(e){if(!e&&!Fe(e))return _e("".concat(mm,": Native assets object is empty or not an object: ").concat(e)),void(Cm=!0);var t={ver:"1.2",assets:[]};for(var n in e)if(!Um.includes(n))if(Dm.hasOwnProperty(n)||Nm.includes(n)){var r=e[n],i=0;r.required&&Le(r.required)&&(i=Number(r.required));var o={id:t.assets.length,required:i};if(n in Rm)o.data={type:qm[Rm[n]]},(r.len||r.length)&&(o.data.len=r.len||r.length),r.ext&&(o.data.ext=r.ext);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?Pm.ICON:Pm.MAIN},r.aspect_ratios)if(Me(r.aspect_ratios))if(r.aspect_ratios.length){var a=r.aspect_ratios[0],u=a.min_width,c=a.min_height;vt(u)&&vt(c)?(o.img.wmin=u,o.img.hmin=c):_e("".concat(mm,": image.aspect_ratios min_width or min_height are invalid: ").concat(u,", ").concat(c));var s=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));s.length>0&&(o.img.ext={aspectratios:s})}else _e("".concat(mm,": image.aspect_ratios was passed, but it's empty: ").concat(r.aspect_ratios));else _e("".concat(mm,": image.aspect_ratios was passed, but it's not a an array: ").concat(r.aspect_ratios));o.img.w=r.w||r.width,o.img.h=r.h||r.height,o.img.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:gm),o.img.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:gm),r.sizes&&(2===r.sizes.length&&vt(r.sizes[0])&&vt(r.sizes[1])?(Ee("".concat(mm,": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):_e("".concat(mm,": image.sizes was passed, but its value is not an array of integers: ").concat(r.sizes))),r.ext&&(o.img.ext=r.ext),r.mimes&&(o.img.mimes=r.mimes)}else"title"===n?(o.title={len:r.len||r.length||140},r.ext&&(o.title.ext=r.ext)):"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}else _e("".concat(mm,": Unrecognized native asset code: ").concat(n,". Asset will be ignored."));return t.assets.length<1?(_e("".concat(mm,": Could not find any valid asset")),void(Cm=!0)):t}(e);return t}function zm(e){var t,n=e.mediaTypes.banner.sizes,r=[];if(n!==gm&&Me(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=gm,_e(mm+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(r=[],n.forEach((function(e){e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=at()?0:1}else _e(mm+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=gm;return t}function Fm(e){var t,n=St(y(e.mediaTypes,"video"),e.params.video);if(n!==gm){for(var r in t={},function(e,t){y(e,"placement")||_e(bm+" for "+t)}(n,e.adUnitCode),Im)n.hasOwnProperty(r)&&(t[r]=Bm(r,n[r],Im[r]));Me(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):ze(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=gm,_e(mm+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function Lm(e,t){var n,r,i={},o={},a=e.hasOwnProperty("sizes")?e.sizes:[],u="",c=[],s=null==t?void 0:t.fledgeEnabled;if(function(e,t){t.params.deals&&(Me(t.params.deals)?t.params.deals.forEach((function(t){Ne(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):_e(mm+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):_e(mm+"Error: bid.params.deals should be an array of strings."))}(i={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:_m("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:_m("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?_m("currency",e.params.currency):vm},e),function(e,t){var n,r="";if(t.params.dctr)if(Ne(r=t.params.dctr)&&r.length>0){var i=r.split("|");r="",i.forEach((function(e){r+=e.length>0?e.trim()+"|":""})),n=r.length,"|"===r.substring(n,n-1)&&(r=r.substring(0,n-1)),e.ext.key_val=r.trim()}else _e(mm+"Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")}(i,e),function(e,t){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var i,o=n.segments.length;r+="jw-id="+n.content.id;for(var a=0;a<o;a++)r+="|jw-"+n.segments[a]+"=1";(i=e.ext)&&void 0===i.key_val?i.key_val=r:i.key_val+="|"+r}}(i,e),e.hasOwnProperty("mediaTypes"))for(u in e.mediaTypes)switch(u){case Fo:(n=zm(e))!==gm&&(i.banner=n);break;case Mo:o.request=JSON.stringify(Mm(e.nativeParams)),Cm?(_e(mm+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),Cm=!1):i.native=o;break;case zo:(r=Fm(e))!==gm&&(i.video=r)}else n={pos:0,w:e.params.width,h:e.params.height,topframe:at()?0:1},Me(a)&&a.length>1&&((a=a.splice(1,a.length-1)).forEach((function(e){c.push({w:e[0],h:e[1]})})),n.format=c),i.banner=n;return function(e,t){var n=dm({},y(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&xt(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var r=y(n,"adserver.".concat(t));"string"==typeof r&&r&&(xt(e,"ext.data.adserver.".concat(t.toLowerCase()),r),"adslot"===t&&xt(e,"ext.dfp_ad_unit_code",r))})):xt(e,"ext.data.".concat(t),n[t])}));var r=y(t,"ortb2Imp.ext.gpid");r&&xt(e,"ext.gpid",r)}(i,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||_.getConfig("pubmatic.disableFloors")||[Fo,zo,Mo].forEach((function(r){if(e.hasOwnProperty(r)){var i=[];"banner"===r&&(e[r].w&&e[r].h&&i.push([e[r].w,e[r].h]),Me(e[r].format)&&e[r].format.forEach((function(e){return i.push([e.w,e.h])}))),0===i.length&&i.push("*"),i.forEach((function(i){var o=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:i});if(Ee(mm,"floor from floor module returned for mediatype:",r," and size:",i," is: currency",o.currency,"floor",o.floor),"object"===fm(o)&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){var a=parseFloat(o.floor);Ee(mm,"floor from floor module:",a,"previous floor value",n,"Min:",Math.min(a,n)),n=-1===n?a:Math.min(a,n),Ee(mm,"new floor value:",n)}}))}}));e.bidfloor&&(Ee(mm,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor));e.bidfloor=!isNaN(n)&&n>0?n:gm,Ee(mm,"new impObj.bidfloor value:",e.bidfloor)}(i,e),function(e,t,n){if(n){var r,i;e.ext=e.ext||{},void 0!==(null==t||null===(r=t.ortb2Imp)||void 0===r||null===(i=r.ext)||void 0===i?void 0:i.ae)&&(e.ext.ae=t.ortb2Imp.ext.ae)}else{var o;null!==(o=e.ext)&&void 0!==o&&o.ae&&delete e.ext.ae}}(i,e,s),i.hasOwnProperty(Fo)||i.hasOwnProperty(Mo)||i.hasOwnProperty(zo)?i:gm}function Wm(e,t){(t=t.filter((function(e){return"string"==typeof e||(_e(mm+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&(_e(mm+"acat: Selected: ",t),e.ext.acat=t)}function Hm(e){return!0===Me(e)&&e.length>0}var Vm,Gm,Xm,$m={code:pm,gvlid:76,supportedMediaTypes:[Fo,zo,Mo],isBidRequestValid:function(e){if(e&&e.params){if(!Ne(e.params.publisherId))return _e(mm+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(zo)){var t=y(e.mediaTypes,"video.mimes"),n=y(e,"params.video.mimes");if(!1===Hm(t)&&!1===Hm(n))return _e(mm+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[zo].hasOwnProperty("context"))return ke("".concat(mm,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[zo].context&&!Ne(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[zo].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(Fo)||e.mediaTypes.hasOwnProperty(Mo)?(delete e.mediaTypes[zo],_e("".concat(mm,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(ke("".concat(mm,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,r,i,o,a,u,c,s,d,l,f;t&&t.refererInfo&&(f=t.refererInfo);var p,m=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(f),v=function(e){return{id:""+(new Date).getTime(),at:1,cur:[vm],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(m),g="",b=[],h=[],w=[];if(e.forEach((function(e){var n,r;if((p=ot(e)).params.adSlot=p.params.adSlot||"",km(p),p.mediaTypes&&p.mediaTypes.hasOwnProperty("video")||p.params.hasOwnProperty("video"));else if(!(p.hasOwnProperty("mediaTypes")&&p.mediaTypes.hasOwnProperty(Mo)||0!==p.params.width||0!==p.params.height))return void _e(mm+"Skipping the non-standard adslot: ",p.params.adSlot,JSON.stringify(p));m.pubId=m.pubId||p.params.publisherId,(m=function(e,t){var n,r,i;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),hm)hm.hasOwnProperty(n)&&(r=e[n])&&("object"===fm(i=hm[n])&&(r=i.f(r,t)),Ne(r)?t[n]=r:_e(mm+"Ignoring param : "+n+" with value : "+hm[n]+", expects string-value, found "+fm(r)));return t}(p.params,m)).transactionId=null===(n=p.ortb2Imp)||void 0===n||null===(r=n.ext)||void 0===r?void 0:r.tid,""===g?g=p.params.currency||gm:p.params.hasOwnProperty("currency")&&g!==p.params.currency&&_e(mm+"Currency specifier ignored. Only one currency permitted."),p.params.currency=g,p.params.hasOwnProperty("dctr")&&Ne(p.params.dctr)&&b.push(p.params.dctr),p.params.hasOwnProperty("bcat")&&Me(p.params.bcat)&&(h=h.concat(p.params.bcat)),p.params.hasOwnProperty("acat")&&Me(p.params.acat)&&(w=w.concat(p.params.acat));var i=Lm(p,t);i&&v.imp.push(i)})),0!=v.imp.length){v.site.publisher.id=m.pubId.trim(),jm=m.pubId.trim(),v.ext.wrapper={},v.ext.wrapper.profile=parseInt(m.profId)||gm,v.ext.wrapper.version=parseInt(m.verId)||gm,v.ext.wrapper.wiid=m.wiid||t.auctionId,v.ext.wrapper.wv="prebid_prebid_8.26.0",v.ext.wrapper.transactionId=m.transactionId,v.ext.wrapper.wp="pbjs";var I,S,O=t?Sn.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==O){if(v.ext.marketplace={},t&&1==O){var A=Sn.get(t.bidderCode,"allowedAlternateBidderCodes");Me(A)?(A=A.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(Ze),Tm=A.includes("*")?Em:[].concat(am(Tm),am(A))):Tm=Em}v.ext.marketplace.allowedbidders=Tm.filter(Ze)}v.user.gender=m.gender?m.gender.trim():gm,v.user.geo={},v.user.yob=_m("yob",m.yob),v.site.page=m.kadpageurl.trim()||v.site.page.trim(),v.site.domain=(I=v.site.page,(S=document.createElement("a")).href=I,S.hostname),"object"===fm(_.getConfig("content"))&&(v.site.content=_.getConfig("content")),"object"===fm(_.getConfig("device"))&&(v.device=om(v.device,_.getConfig("device"))),v.device.language=v.device.language&&v.device.language.split("-")[0],xt(v,"source.tid",null==t||null===(n=t.ortb2)||void 0===n||null===(r=n.source)||void 0===r?void 0:r.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(v.test=1),e[0].schain&&xt(v,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(xt(v,"user.ext.consent",t.gdprConsent.consentString),xt(v,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&xt(v,"regs.ext.us_privacy",t.uspConsent),null!=t&&null!==(i=t.gppConsent)&&void 0!==i&&i.gppString?(xt(v,"regs.gpp",t.gppConsent.gppString),xt(v,"regs.gpp_sid",t.gppConsent.applicableSections)):null!=t&&null!==(o=t.ortb2)&&void 0!==o&&null!==(a=o.regs)&&void 0!==a&&a.gpp&&(xt(v,"regs.gpp",t.ortb2.regs.gpp),xt(v,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===_.getConfig("coppa")&&xt(v,"regs.coppa",1),function(e,t){var n=y(t,"0.userIdAsEids");Me(n)&&n.length>0&&xt(e,"user.eids",n)}(v,e);var x,j,C,T=t&&t.ortb2||{},E=T.user,k=T.device,B=T.site,R=T.bcat;if(B){var P=v.site,U=P.page,D=P.domain,q=P.ref;St(v,{site:B}),v.site.page=U,v.site.domain=D,v.site.ref=q}if(E&&St(v,{user:E}),R&&(h=h.concat(R)),null!=k&&k.sua&&(v.device.sua=null==k?void 0:k.sua),null!=k&&null!==(u=k.ext)&&void 0!==u&&u.cdep&&xt(v,"device.ext.cdep",k.ext.cdep),null!=E&&E.geo&&null!=k&&k.geo?(v.device.geo=dm(dm({},v.device.geo),k.geo),v.user.geo=dm(dm({},v.user.geo),E.geo)):(null!=E&&E.geo||null!=k&&k.geo)&&(v.user.geo=v.device.geo=null!=E&&E.geo?dm(dm({},v.user.geo),E.geo):dm(dm({},v.user.geo),k.geo)),null!==(c=T.ext)&&void 0!==c&&null!==(s=c.prebid)&&void 0!==s&&null!==(d=s.bidderparams)&&void 0!==d&&null!==(l=d[t.bidderCode])&&void 0!==l&&l.acat){var N=T.ext.prebid.bidderparams[t.bidderCode].acat;Wm(v,N)}else w.length&&Wm(v,w);if(function(e,t){(t=t.filter((function(e){return"string"==typeof e||(_e(mm+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;_e(mm+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(_e(mm+"bcat: Selected: ",t),e.bcat=t)}(v,h),null!=t&&t.timeout)v.tmax=t.timeout;else v.tmax=null===(x=window)||void 0===x||null===(j=x.PWT)||void 0===j||null===(C=j.versionDetails)||void 0===C?void 0:C.timeout;return v.ext.epoch=(new Date).getTime(),"object"===fm(_.getConfig("app"))&&(v.app=_.getConfig("app"),v.app.publisher=v.site.publisher,v.app.ext=v.site.ext||gm,"object"!==fm(v.app.content)&&(v.app.content=v.site.content||gm),delete v.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(v),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],r=vm,i=JSON.parse(t.data),o=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&Me(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((function(e){e.bid&&Me(e.bid)&&e.bid.forEach((function(a){var u={requestId:a.impid,cpm:parseFloat((a.price||0).toFixed(2)),width:a.w,height:a.h,creativeId:a.crid||a.id,dealId:a.dealid,currency:r,netRevenue:true,ttl:300,referrer:o,ad:a.adm,pm_seat:e.seat||null,pm_dspid:a.ext&&a.ext.dspid?a.ext.dspid:null,partnerImpId:a.id||""};i.imp&&i.imp.length>0&&i.imp.forEach((function(e){if(a.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=xm[e.ext.bidtype];else{Ee(mm+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,r="",i=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=Fo;else if(i.test(n))t.mediaType=zo;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=Mo)}catch(e){_e(mm+"Error: Cannot parse native reponse for ad response: "+n)}}}(a,u),u.mediaType){case Fo:break;case zo:u.width=a.hasOwnProperty("w")?a.w:e.video.w,u.height=a.hasOwnProperty("h")?a.h:e.video.h,u.vastXml=a.adm,function(e,t){var n,r,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(n=t.bidderRequest.bids[o].params,r=t.bidderRequest.bids[o].mediaTypes[zo].context,i=t.bidderRequest.bids[o].adUnitCode);r&&"outstream"===r&&n&&n.outstreamAU&&i&&(e.rendererCode=n.outstreamAU,e.renderer=Am.newRenderer(e.rendererCode,i))}}(u,t),function(e,t,n){var r,i,o;if(null!=t&&null!==(r=t.ext)&&void 0!==r&&r.prebiddealpriority){var a=y(tt(e.requestId,[n.bidderRequest]),"mediaTypes.video");if((null==a?void 0:a.context)==Lo){var u=(null==t||null===(i=t.ext)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.duration)||(null==a?void 0:a.maxduration);e.video={context:Lo,durationSeconds:u,dealTier:t.ext.prebiddealpriority}}}}(u,a,t);break;case Mo:!function(e,t){if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void _e(mm+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:dm({},n.native)},t.mediaType=Mo,t.width||(t.width=0),t.height||(t.height=0)}}(a,u)}})),a.ext&&a.ext.deal_channel&&(u.dealChannel=Om[a.ext.deal_channel]||null),function(e,t,n){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var r=n||t.ext&&t.ext.advid;r&&(e.meta.advertiserId=r,e.meta.agencyId=r,e.meta.buyerId=r),t.adomain&&Hm(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&Hm(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])}(u,a,e.seat),e.ext&&e.ext.buyid&&(u.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),a.ext&&a.ext.marketplace&&(u.bidderCode=a.ext.marketplace),n.push(u)}))})));var a=y(e.body,"ext.fledge_auction_configs");if(a)return a=Object.entries(a).map((function(e){var t=im(e,2);return{bidId:t[0],config:om({auctionSignals:{}},t[1])}})),{bids:n,fledgeAuctionConfigs:a}}catch(e){ke(e)}return n},getUserSyncs:function(e,t,n,r,i){var o,a,u=""+jm;(n&&(u+="&gdpr="+(n.gdprApplies?1:0),u+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),r&&(u+="&us_privacy="+encodeURIComponent(r)),null!=i&&i.gppString&&null!=i&&null!==(o=i.applicableSections)&&void 0!==o&&o.length)&&(u+="&gpp="+encodeURIComponent(i.gppString),u+="&gpp_sid="+encodeURIComponent(null==i||null===(a=i.applicableSections)||void 0===a?void 0:a.join(",")));return!0===_.getConfig("coppa")&&(u+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+u}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+u}]},transformBidParams:function(e,t,n,r){return fd({publisherId:"string",adSlot:"string"},e)}};Pr($m);var Jm={debug:null===(Vm=window)||void 0===Vm||null===(Gm=Vm.Adman)||void 0===Gm||null===(Xm=Gm.Debug)||void 0===Xm?void 0:Xm.isEnabled,priceGranularity:"dense",userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:["openx","contentexchange","pubmatic","rubicon","appnexus","adform","ix","bidscube","sovrn","contentexchange"],filter:"include"}}}},Km={gdpr:{cmpApi:"iab",timeout:2e3}};("function"==typeof __cmp||window._isFramed&&window._isSameOrigin&&top.__cmp)&&(Km.gdpr.allowAuctionWithoutConsent=!0,Jm.consentManagement=Km),("function"==typeof __tcfapi||window._isFramed&&window._isSameOrigin&&top.__tcfapi)&&(Jm.consentManagement=Km),ss.setConfig(Jm),ss.processQueue()},81432:e=>{
/*
* @license MIT
* Fun Hooks v0.9.10
* (c) @snapwich
*/
u.SYNC=1,u.ASYNC=2,u.QUEUE=4;var t="fun-hooks";var n=Object.freeze({useProxy:!0,ready:0}),r=new WeakMap,i="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,r=Object(this),i=r.length>>>0,o=0;if(t)n=t;else{for(;o<i&&!(o in r);)o++;n=r[o++]}for(;o<i;)o in r&&(n=e(n,r[o],o,r)),o++;return n};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function u(e){var c,s={},d=[];function l(e,t){return"function"==typeof e?v.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?v.apply(null,arguments):"object"==typeof e?f.apply(null,arguments):void 0}function f(e,t,n){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var i={},o=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==o.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var r=t.split(":"),o=r[0],a=r[1]||"sync";if(!i[o]){var u=e[o];i[o]=e[o]=v(a,u,n?[n,o]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return i}function p(e){var n=Array.isArray(e)?e:e.split(".");return i.call(n,(function(r,i,o){var a=r[i],u=!1;return a||(o===n.length-1?(c||d.push((function(){u||console.warn(t+": referenced '"+e+"' but it was never created")})),r[i]=m((function(e){r[i]=e,u=!0}))):r[i]={})}),s)}function m(e){var t=[],n=[],i=function(){},o={before:function(e,n){return c.call(this,t,"before",e,n)},after:function(e,t){return c.call(this,n,"after",e,t)},getHooks:function(e){var r=t.concat(n);"object"==typeof e&&(r=r.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{a(r,{remove:function(){return r.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},u={install:function(r,o,a){this.type=r,i=a,a(t,n),e&&e(o)}};return r.set(o.after,u),o;function c(e,r,o,a){var u={hook:o,type:r,priority:a||10,remove:function(){var r=e.indexOf(u);-1!==r&&(e.splice(r,1),i(t,n))}};return e.push(u),e.sort((function(e,t){return t.priority-e.priority})),i(t,n),this}}function v(n,i,s){var l=i.after&&r.get(i.after);if(l){if(l.type!==n)throw t+": recreated hookable with different type";return i}var f,v,g=s?p(s):m(),y={get:function(e,t){return g[t]||Reflect.get.apply(Reflect,arguments)}};return c||d.push(b),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?v=new Proxy(i,y):(v=function(){return y.apply?y.apply(i,this,o(arguments)):i.apply(this,arguments)},a(v,g)),r.get(v.after).install(n,v,(function(e,t){var r,i=[];e.length||t.length?(e.forEach(a),r=i.push(void 0)-1,t.forEach(a),f=function(e,t,a){var u,c=0,s="async"===n&&"function"==typeof a[a.length-1]&&a.pop();function d(e){"sync"===n?u=e:s&&s.apply(null,arguments)}function l(e){if(i[c]){var r=o(arguments);return l.bail=d,r.unshift(l),i[c++].apply(t,r)}"sync"===n?u=e:s&&s.apply(null,arguments)}return i[r]=function(){var r=o(arguments,1);"async"===n&&s&&(delete l.bail,r.push(l));var i=e.apply(t,r);"sync"===n&&l(i)},l.apply(null,a),u}):f=void 0;function a(e){i.push(e.hook)}b()})),v;function b(){!c&&("sync"!==n||e.ready&u.SYNC)&&("async"!==n||e.ready&u.ASYNC)?"sync"!==n&&e.ready&u.QUEUE?y.apply=function(){var e=arguments;d.push((function(){v.apply(e[1],e[2])}))}:y.apply=function(){throw t+": hooked function not ready"}:y.apply=f}}return(e=a({},n,e)).ready?l.ready=function(){c=!0,function(e){for(var t;t=e.shift();)t()}(d)}:c=!0,l.get=p,l}e.exports=u},77079:e=>{e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}}}]);