!function(){"use strict";var e=ar n=function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};l,d,f,p,v,h=g=y=m="dclid",b="fbclid",_="gbraid",I="gclid",S="ko_click_id",w="li_fat_id",E="msclkid",O="rtd_cid",T="ttclid",k="twclid",P="wbraid",R={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},x=);!c||(c={})),l||(l={})),d||(d={})),f||(f={})),p||(p={})),v||(v={}));var U=Object.freeze({__proto__:null,get SpecialEventType(){return d},get IdentifyOperation(){return c},get RevenueProperty(){return l},get LogLevel(){return f},get ServerZone(){return p},get Status),q="AMP",N="".concat(q,"_unsent"),D="https://api2.amplitude.com/2/httpapi",L=A=j=),C=function(e,t){return n(n({},t),{event_type:d.IDENTIFY,user_properties:e.getUserProperties()})},M=V=F=function(){eturn e.prototype.register=e.prototype.deregister=e.prototype.reset=e.prototype.push=e.prototype.scheduleApply=e.prototype.apply=e.prototype.flush=e}(),Q="Event rejected due to exceeded retry count",$=K=),B=),z="Amplitude Logger ",W=),J=Z=),G=Y=ar X=),ee=te=ne=ie=re=oe=),se=),ue=ae=function(){eturn e.prototype.isEnabled=e.prototype.get=e.prototype.getRaw=function(e){var t;return r(this,void 0,void 0,(function(){var n,i,r;return o(this,()}))},e.prototype.set=e.prototype.remove=e.prototype.reset=e}(),ce=se),le=),de=fe=),pe=ve=Object.entries||(Object.entries=;var he=),ge="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:self,ye=),me=be=),_e=Ie=Se=function(e){return Ie(e,"attribution")},we=function(e){var t,n,i=r=void 0;return(n=e.defaultTracking,Ie(n,"pageViews"))&&(i=void 0,t=void 0,e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.pageViews&&"object"==typeof e.defaultTracking.pageViews&&("trackOn"in e.defaultTracking.pageViews&&(i=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(r=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(t=e.defaultTracking.pageViews.eventType))),{trackOn:i,trackHistoryChanges:r,eventType:t}},Ee=Oe=Te=ke=),Pe=function(){eturn e.prototype.isEnabled=e.prototype.get=e.prototype.getRaw=e.prototype.set=e.prototype.remove=e.prototype.reset=e}(),Re=se),xe=se),Ue=qe=Ne=De="[Amplitude]",Le="".concat(De," Form Started"),Ae="".concat(De," Form Submitted"),je="".concat(De," File Downloaded"),Ce="session_start",Me="session_end",Ve="".concat(De," File Extension"),Fe="".concat(De," File Name"),Qe="".concat(De," Link ID"),$e="".concat(De," Link Text"),Ke="".concat(De," Link URL"),Be="".concat(De," Form ID"),ze="".concat(De," Form Name"),We="".concat(De," Form Destination"),Je="cookie",Ze=function(e){function n(t,n,i,r,o,s,u,a,c,l,d,p,v,h,g,y,m,b,_,I,S,w,E,O,T,k,P,R,x){void 0===i&&(i=new oe),void 0===r&&(r={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),void 0===o&&(o=!0),void 0===u&&(u=1e3),void 0===a&&(a=5),void 0===c&&(c=30),void 0===l&&(l=Je),void 0===g&&(g=new W),void 0===y&&(y=f.Warn),void 0===b&&(b=!1),void 0===S&&(S=""),void 0===w&&(w="US"),void 0===O&&(O=18e5),void 0===T&&(T=new Pe),void 0===k&&(k={ipAddress:!0,language:!0,platform:!0}),void 0===P&&(P="fetch"),void 0===R&&(R=!1);var U=e.call(this,{apiKey:t,storageProvider:T,transportProvider:He(P)})||this;return U.apiKey=t,U.appVersion=n,U.cookieOptions=r,U.defaultTracking=o,U.flushIntervalMillis=u,U.flushMaxRetries=a,U.flushQueueSize=c,U.identityStorage=l,U.ingestionMetadata=d,U.instanceName=p,U.loggerProvider=g,U.logLevel=y,U.minIdLength=m,U.partnerId=_,U.plan=I,U.serverUrl=S,U.serverZone=w,U.sessionTimeout=O,U.storageProvider=T,U.trackingOptions=k,U.transport=P,U.useBatch=R,U._optOut=!1,U._cookieStorage=i,U.deviceId=s,U.lastEventId=v,U.lastEventTime=h,U.optOut=b,U.sessionId=E,U.userId=x,U.loggerProvider.enable(U.logLevel),U}return t(n,e),Object.defineProperty(n.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(e){this._cookieStorage!==e&&(this._cookieStorage=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceId",{get:function(){return this._deviceId},set:function(e){this._deviceId!==e&&(this._deviceId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId!==e&&(this._userId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId!==e&&(this._sessionId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut!==e&&(this._optOut=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(e){this._lastEventTime!==e&&(this._lastEventTime=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastEventId",{get:set:enumerable:!1,configurable:!0}),n.prototype.updateStorage=n}(Z),Ge=function(e,t,i){return void 0===t&&(t={}),r(void 0,void 0,void 0,(function(){var r,s,u,a,c,l,d,f,p,v,h,y,m,b,_,I,S,w,E,O,T,k,P,R,x,U,q,N,D,L,A,j,C,M;return o(this,(function(o){switch(o.label){case 0:return r=t.identityStorage||Je,u=[n({},t.cookieOptions)],S={},r===Je?[3,1]:(a="",[3,5]);case 1:return null===(E=null===(w=t.cookieOptions)||void 0===w?void 0:w.domain)||void 0===E?[3,2]:(c=E,[3,4]);case 2:return[4,Xe()];case 3:c=o.sent(),o.label=4;case 4:a=c,o.label=5;case 5:return s=n.apply(void 0,u.concat([(S.domain=a,S.expiration=365,S.sameSite="Lax",S.secure=!1,S.upgrade=!0,S)])),l=Ye(t.identityStorage,s),[4,Ue(e,l,null===(T=null===(O=t.cookieOptions)||void 0===O?void 0:O.upgrade)||void 0===T||T)];case 6:return d=o.sent(),[4,l.get(ue(e))];case 7:return f=o.sent(),p=g(),v=null!==(x=null!==(R=null!==(P=null!==(k=t.deviceId)&&void 0!==k?k:p.deviceId)&&void 0!==P?P:null==f?void 0:f.deviceId)&&void 0!==R?R:d.deviceId)&&void 0!==x?x:V(),h=null!==(U=null==f?void 0:f.lastEventId)&&void 0!==U?U:d.lastEventId,y=null!==(q=null==f?void 0:f.lastEventTime)&&void 0!==q?q:d.lastEventTime,m=null!==(D=null!==(N=t.optOut)&&void 0!==N?N:null==f?void 0:f.optOut)&&void 0!==D?D:d.optOut,b=null!==(L=null==f?void 0:f.sessionId)&&void 0!==L?L:d.sessionId,_=null!==(j=null!==(A=t.userId)&&void 0!==A?A:null==f?void 0:f.userId)&&void 0!==j?j:d.userId,i.previousSessionDeviceId=null!==(C=null==f?void 0:f.deviceId)&&void 0!==C?C:d.deviceId,i.previousSessionUserId=null!==(M=null==f?void 0:f.userId)&&void 0!==M?M:d.userId,I=n(n({},t.trackingOptions),{ipAddress:!0,language:!0,platform:!0}),[2,new Ze(e,t.appVersion,l,s,t.defaultTracking,v,t.flushIntervalMillis,t.flushMaxRetries,t.flushQueueSize,r,t.ingestionMetadata,t.instanceName,h,y,t.loggerProvider,t.logLevel,t.minIdLength,m,t.partnerId,t.plan,t.serverUrl,t.serverZone,b,t.sessionTimeout,t.storageProvider,I,t.transport,t.useBatch,_)]}}))}))},Ye=function(e,t){switch(void 0===e&&(e=Je),void 0===t&&(t={}),e){case"localStorage":return new Pe;case"none":return new oe;default:return new ae(n(n({},t),{expirationDays:t.expiration}))}},He=Xe=et=tt=nt=function(e){var t=this;void 0===e&&(e={});var s={name:"@amplitude/plugin-web-attribution-browser",type:"before",setup:function(t,s){var a;return r(this,void 0,void 0,(function(){var r,c,l,d,f,p,v;return o(this,(function(o){switch(o.label){case 0:return r=n({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:(m=null===(a=t.cookieOptions)||void 0===a?void 0:a.domain,b=m,b?(b.startsWith(".")&&(b=b.substring(1)),[new RegExp("".concat(b.replace(".","\\."),"$"))]):[])},e),t.loggerProvider.log("Installing @amplitude/plugin-web-attribution-browser."),c=t.cookieStorage,h=t.apiKey,void 0===(g="MKTG")&&(g=""),void 0===y&&(y=10),l=[q,g,h.substring(0,y)].filter(Boolean).join("_"),[4,Promise.all([(new x).parse(),c.get(l)])];case 1:return d=u.apply(void 0,[o.sent(),2]),f=d[0],p=d[1],function(e,t,n){e.referrer;var r=e.referring_domain,o=i(e,["referrer","referring_domain"]),s=t||{};s.referrer;var u=s.referring_domain,a=i(s,["referrer","referring_domain"]);if(tt(n.excludeReferrers,e.referring_domain))return!1;var c=JSON.stringify(o)!==JSON.stringify(a),l=et(r||"")!==et(u||"");return!t||c||l}(f,p,r)&&(r.resetSessionOnNewCampaign&&(s.setSessionId(Date.now()),t.loggerProvider.log("Created a new session for new campaign.")),t.loggerProvider.log("Tracking attribution."),v=f,r),s.track(v),c.set(l,f)),[2]}var h,g,y,m,b}))}))},execute:;return s},it=rt=function(e){var t;void 0===e&&(e={});var i=h(),s=void 0,a=c=l="undefined"!=typeof location?location.href:null,d=f={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(e,n){return r(void 0,void 0,void 0,(function(){var r,l;return o(this,(function(o){switch(o.label){case 0:return t=n,(s=e.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),i&&(i.addEventListener("popstate",(),i.history.pushState=new Proxy(i.history.pushState,{apply:)),c()?(s.log("Tracking page view event"),l=(r=t).track,[4,a()]):[3,2];case 1:l.apply(r,[o.sent()]),o.label=2;case 2:return[2]}}))}))},execute:;return f},ot=st=ut=at=function(e){eturn t(i,e),i.prototype.init=i.prototype._init=function(t){var i,s;return r(this,void 0,void 0,(function(){var u,a,c,l,d=this;return o(this,(function(f){switch(f.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Ge(t.apiKey,t,this)]);case 1:return u=f.sent(),[4,e.prototype._init.call(this,u)];case 2:return f.sent(),this.setSessionId(null!==(s=null!==(i=t.sessionId)&&void 0!==i?i:this.config.sessionId)&&void 0!==s?s:Date.now()),(a=me(t.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new X).promise];case 3:return f.sent(),[4,this.add(new ke).promise];case 4:return f.sent(),[4,this.add(new be).promise];case 5:return f.sent(),v=this.config.defaultTracking,Ie(v,"fileDownloads")?[4,this.add({name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(e,t){return r(void 0,void 0,void 0,(function(){var n,i;return o(this,()}))},execute:function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,e]}))}))}}).promise]:[3,7];case 6:f.sent(),f.label=7;case 7:return this.config.defaultTracking)?[4,this.add({name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(e,t){return r(void 0,void 0,void 0,(function(){var n;return o(this,()}))},execute:).promise]:[3,9];case 8:f.sent(),f.label=9;case 9:return Se(this.config.defaultTracking)?(p=this.config,c=Se(p.defaultTracking)&&p.defaultTracking&&"object"==typeof p.defaultTracking&&p.defaultTracking.attribution&&"object"==typeof p.defaultTracking.attribution?n({},p.defaultTracking.attribution):{},l=nt(c),[4,this.add(l).promise]):[3,11];case 10:f.sent(),f.label=11;case 11:return[4,this.add(rt(we(this.config))).promise];case 12:return f.sent(),this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 13:return f.sent(),a.eventBridge.setEventReceiver((),[2]}var p,v}))}))},i.prototype.getUserId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.userId},i.prototype.setUserId=i.prototype.getDeviceId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.deviceId},i.prototype.setDeviceId=i.prototype.reset=i.prototype.getSessionId=i.prototype.setSessionId=i.prototype.extendSession=i.prototype.setTransport=i.prototype.identify=i.prototype.groupIdentify=i.prototype.revenue=i.prototype.process=i}(K),ct=lt=ct(),dt=lt.add,ft=lt.extendSession,pt=lt.flush,vt=lt.getDeviceId,ht=lt.getSessionId,gt=lt.getUserId,yt=lt.groupIdentify,mt=lt.identify,bt=lt.init,_t=lt.logEvent,It=lt.remove,St=lt.reset,wt=lt.revenue,Et=lt.setDeviceId,Ot=lt.setGroup,Tt=lt.setOptOut,kt=lt.setSessionId,Pt=lt.setTransport,Rt=lt.setUserId,xt=lt.track,Ut=Object.freeze({__proto__:null,add:dt,extendSession:ft,flush:pt,getDeviceId:vt,getSessionId:ht,getUserId:gt,groupIdentify:yt,identify:mt,init:bt,logEvent:_t,remove:It,reset:St,revenue:wt,setDeviceId:Et,setGroup:Ot,setOptOut:Tt,setSessionId:kt,setTransport:Pt,setUserId:Rt,track:xt,Types:U,createInstance:ct,runQueuedFunctions:Ee,Revenue:B,Identify:j});!)}();
