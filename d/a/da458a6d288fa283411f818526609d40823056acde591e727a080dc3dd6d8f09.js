"use strict";(self.webpackChunkihowebsite=self.webpackChunkihowebsite||[]).push([[592],{9441:(o,i,e)=>{e.d(i,{S:()=>a});var u=e(6814),t=e(5879);let a=(()=>{class n{constructor(){this.rating=0}ngOnInit(){this.rating=Math.round(this.rating)}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["iho-stars-rate"]],inputs:{rating:"rating"},standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"flex","items-center","gap-2"],[1,"ico-Star-bold","text-black-300","text-xl"],[1,"text-sm","text-black-500"]],template:function(s,_){1&s&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t.TgZ(2,"span",2),t._uU(3),t.qZA()()),2&s&&(t.xp6(3),t.hij("",_.rating," \u0633\u062a\u0627\u0631\u0647"))},dependencies:[u.ez]})}return n})()},5178:(o,i,e)=>{e.d(i,{d:()=>t});var u=e(5879);let t=(()=>{class a{transform(c,r){return c?Number(c?.split("-")[1]):0}static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275pipe=u.Yjl({name:"extractGrade",type:a,pure:!0,standalone:!0})}return a})()}}]);)=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function a(){const e="undefined"!=typeof document?document:{};return t(e,s),e}const i={document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function r(){const e="undefined"!=typeof window?window:{};return t(e,i),e}class n extends Array{constructor(e){super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this)}}function l(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...l(e)):t.push(e)})),t}function o(e,t){return Array.prototype.filter.call(e,t)}function d(e,t){const s=r(),i=a();let l=[];if(!t&&e instanceof n)return e;if(!e)return new n(l);if("string"==typeof e){const s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let e="div";0===s.indexOf("<li")&&(e="ul"),0===s.indexOf("<tr")&&(e="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(e="tr"),0===s.indexOf("<tbody")&&(e="table"),0===s.indexOf("<option")&&(e="select");const t=i.createElement(e);t.innerHTML=s;for(let e=0;e<t.childNodes.length;e+=1)l.push(t.childNodes[e])}else l=function(e,t){if("string"!=typeof e)return[e];const s=[],a=t.querySelectorAll(e);for(let e=0;e<a.length;e+=1)s.push(a[e]);return s}(e.trim(),t||i)}else if(e.nodeType||e===s||e===i)l.push(e);else if(Array.isArray(e)){if(e instanceof n)return e;l=e}return new n(function(e){const t=[];for(let s=0;s<e.length;s+=1)-1===t.indexOf(e[s])&&t.push(e[s]);return t}(l))}d.fn=n.prototype;const c={addClass:function(...e){const t=l(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=l(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=l(e.map((e=>e.split(" "))));return o(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=l(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let s=0;s<this.length;s+=1)if(2===arguments.length)this[s].setAttribute(e,t);else for(const t in e)this[s][t]=e[t],this[s].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,s,a,i]=e;function r(e){const t=e.target;if(!t)return;const i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),d(t).is(s))a.apply(t,i);else{const e=d(t).parents();for(let t=0;t<e.length;t+=1)d(e[t]).is(s)&&a.apply(e[t],i)}}function n(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"==typeof e[1]&&([t,a,i]=e,s=void 0),i||(i=!1);const l=t.split(" ");let o;for(let e=0;e<this.length;e+=1){const t=this[e];if(s)for(o=0;o<l.length;o+=1){const e=l[o];t.dom7LiveListeners||(t.dom7LiveListeners={}),t.dom7LiveListeners[e]||(t.dom7LiveListeners[e]=[]),t.dom7LiveListeners[e].push({listener:a,proxyListener:r}),t.addEventListener(e,r,i)}else for(o=0;o<l.length;o+=1){const e=l[o];t.dom7Listeners||(t.dom7Listeners={}),t.dom7Listeners[e]||(t.dom7Listeners[e]=[]),t.dom7Listeners[e].push({listener:a,proxyListener:n}),t.addEventListener(e,n,i)}}return this},off:function(...e){let[t,s,a,i]=e;"function"==typeof e[1]&&([t,a,i]=e,s=void 0),i||(i=!1);const r=t.split(" ");for(let e=0;e<r.length;e+=1){const t=r[e];for(let e=0;e<this.length;e+=1){const r=this[e];let n;if(!s&&r.dom7Listeners?n=r.dom7Listeners[t]:s&&r.dom7LiveListeners&&(n=r.dom7LiveListeners[t]),n&&n.length)for(let e=n.length-1;e>=0;e-=1){const s=n[e];a&&s.listener===a||a&&s.listener&&s.listener.dom7proxy&&s.listener.dom7proxy===a?(r.removeEventListener(t,s.proxyListener,i),n.splice(e,1)):a||(r.removeEventListener(t,s.proxyListener,i),n.splice(e,1))}}}return this},trigger:function(...e){const t=r(),s=e[0].split(" "),a=e[1];for(let i=0;i<s.length;i+=1){const r=s[i];for(let s=0;s<this.length;s+=1){const i=this[s];if(t.CustomEvent){const s=new t.CustomEvent(r,{detail:a,bubbles:!0,cancelable:!0});i.dom7EventData=e.filter(((e,t)=>t>0)),i.dispatchEvent(s),i.dom7EventData=[],delete i.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function s(a){a.target===this&&(e.call(this,a),t.off("transitionend",s))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=r();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=r(),t=a(),s=this[0],i=s.getBoundingClientRect(),n=t.body,l=s.clientTop||n.clientTop||0,o=s.clientLeft||n.clientLeft||0,d=s===e?e.scrollY:s.scrollTop,c=s===e?e.scrollX:s.scrollLeft;return{top:i.top+d-l,left:i.left+c-o}}return null},css:function(e,t){const s=r();let a;if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a+=1)for(const t in e)this[a].style[t]=e[t];return this}if(this[0])return s.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,s)=>{e.apply(t,[t,s])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=r(),s=a(),i=this[0];let l,o;if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(l=d(e),o=0;o<l.length;o+=1)if(l[o]===i)return!0;return!1}if(e===s)return i===s;if(e===t)return i===t;if(e.nodeType||e instanceof n){for(l=e.nodeType?[e]:e,o=0;o<l.length;o+=1)if(l[o]===i)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return d([]);if(e<0){const s=t+e;return d(s<0?[]:[this[s]])}return d([this[e]])},append:function(...e){let t;const s=a();for(let a=0;a<e.length;a+=1){t=e[a];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const a=s.createElement("div");for(a.innerHTML=t;a.firstChild;)this[e].appendChild(a.firstChild)}else if(t instanceof n)for(let s=0;s<t.length;s+=1)this[e].appendChild(t[s]);else this[e].appendChild(t)}return this},prepend:function(e){const t=a();let s,i;for(s=0;s<this.length;s+=1)if("string"==typeof e){const a=t.createElement("div");for(a.innerHTML=e,i=a.childNodes.length-1;i>=0;i-=1)this[s].insertBefore(a.childNodes[i],this[s].childNodes[0])}else if(e instanceof n)for(i=0;i<e.length;i+=1)this[s].insertBefore(e[i],this[s].childNodes[0]);else this[s].insertBefore(e,this[s].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&d(this[0].nextElementSibling).is(e)?d([this[0].nextElementSibling]):d([]):this[0].nextElementSibling?d([this[0].nextElementSibling]):d([]):d([])},nextAll:function(e){const t=[];let s=this[0];if(!s)return d([]);for(;s.nextElementSibling;){const a=s.nextElementSibling;e?d(a).is(e)&&t.push(a):t.push(a),s=a}return d(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&d(t.previousElementSibling).is(e)?d([t.previousElementSibling]):d([]):t.previousElementSibling?d([t.previousElementSibling]):d([])}return d([])},prevAll:function(e){const t=[];let s=this[0];if(!s)return d([]);for(;s.previousElementSibling;){const a=s.previousElementSibling;e?d(a).is(e)&&t.push(a):t.push(a),s=a}return d(t)},parent:function(e){const t=[];for(let s=0;s<this.length;s+=1)null!==this[s].parentNode&&(e?d(this[s].parentNode).is(e)&&t.push(this[s].parentNode):t.push(this[s].parentNode));return d(t)},parents:function(e){const t=[];for(let s=0;s<this.length;s+=1){let a=this[s].parentNode;for(;a;)e?d(a).is(e)&&t.push(a):t.push(a),a=a.parentNode}return d(t)},closest:function(e){let t=this;return void 0===e?d([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let s=0;s<this.length;s+=1){const a=this[s].querySelectorAll(e);for(let e=0;e<a.length;e+=1)t.push(a[e])}return d(t)},children:function(e){const t=[];for(let s=0;s<this.length;s+=1){const a=this[s].children;for(let s=0;s<a.length;s+=1)e&&!d(a[s]).is(e)||t.push(a[s])}return d(t)},filter:function(e){return d(o(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};function p(e,t=0){return setTimeout(e,t)}function u(){return Date.now()}function h(e,t="x"){const s=r();let a,i,n;const l=function(e){const t=r();let s;return t.getComputedStyle&&(s=t.getComputedStyle(e,null)),!s&&e.currentStyle&&(s=e.currentStyle),s||(s=e.style),s}(e);return s.WebKitCSSMatrix?(i=l.transform||l.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),n=new s.WebKitCSSMatrix("none"===i?"":i)):(n=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),a=n.toString().split(",")),"x"===t&&(i=s.WebKitCSSMatrix?n.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(i=s.WebKitCSSMatrix?n.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5])),i||0}function m(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function f(...e){const t=Object(e[0]),s=["__proto__","constructor","prototype"];for(let i=1;i<e.length;i+=1){const r=e[i];if(null!=r&&(a=r,!("undefined"!=typeof window&&void 0!==window.HTMLElement?a instanceof HTMLElement:a&&(1===a.nodeType||11===a.nodeType)))){const e=Object.keys(Object(r)).filter((e=>s.indexOf(e)<0));for(let s=0,a=e.length;s<a;s+=1){const a=e[s],i=Object.getOwnPropertyDescriptor(r,a);void 0!==i&&i.enumerable&&(m(t[a])&&m(r[a])?r[a].__swiper__?t[a]=r[a]:f(t[a],r[a]):!m(t[a])&&m(r[a])?(t[a]={},r[a].__swiper__?t[a]=r[a]:f(t[a],r[a])):t[a]=r[a])}}}var a;return t}function g(e,t,s){e.style.setProperty(t,s)}function v({swiper:e,targetPosition:t,side:s}){const a=r(),i=-e.translate;let n,l=null;const o=e.params.speed;e.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(e.cssModeFrameID);const d=t>i?"next":"prev",c=(e,t)=>"next"===d&&e>=t||"prev"===d&&e<=t,p=()=>{n=(new Date).getTime(),null===l&&(l=n);const r=Math.max(Math.min((n-l)/o,1),0),d=.5-Math.cos(r*Math.PI)/2;let u=i+d*(t-i);if(c(u,t)&&(u=t),e.wrapperEl.scrollTo({[s]:u}),c(u,t))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:u})})),void a.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=a.requestAnimationFrame(p)};p()}let w,b,x;function y(){return w||(w=function(){const e=r(),t=a();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const s=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,s)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),w}function E(e={}){return b||(b=function({userAgent:e}={}){const t=y(),s=r(),a=s.navigator.platform,i=e||s.navigator.userAgent,n={ios:!1,android:!1},l=s.screen.width,o=s.screen.height,d=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const p=i.match(/(iPod)(.*OS\s([\d_]+))?/),u=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===a;let m="MacIntel"===a;return!c&&m&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${l}x${o}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),m=!1),d&&!h&&(n.os="android",n.android=!0),(c||u||p)&&(n.os="ios",n.ios=!0),n}(e)),b}function T(){return x||(x=function(){const e=r();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),x}Object.keys(c).forEach((e=>{Object.defineProperty(d.fn,e,{value:c[e],writable:!0})}));var C={on(e,t,s){const a=this;if("function"!=typeof t)return a;const i=s?"unshift":"push";return e.split(" ").forEach((e=>{a.eventsListeners[e]||(a.eventsListeners[e]=[]),a.eventsListeners[e][i](t)})),a},once(e,t,s){const a=this;if("function"!=typeof t)return a;function i(...s){a.off(e,i),i.__emitterProxy&&delete i.__emitterProxy,t.apply(a,s)}return i.__emitterProxy=t,a.on(e,i,s)},onAny(e,t){const s=this;if("function"!=typeof e)return s;const a=t?"unshift":"push";return s.eventsAnyListeners.indexOf(e)<0&&s.eventsAnyListeners[a](e),s},offAny(e){const t=this;if(!t.eventsAnyListeners)return t;const s=t.eventsAnyListeners.indexOf(e);return s>=0&&t.eventsAnyListeners.splice(s,1),t},off(e,t){const s=this;return s.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?s.eventsListeners[e]=[]:s.eventsListeners[e]&&s.eventsListeners[e].forEach(((a,i)=>{(a===t||a.__emitterProxy&&a.__emitterProxy===t)&&s.eventsListeners[e].splice(i,1)}))})),s):s},emit(...e){const t=this;if(!t.eventsListeners)return t;let s,a,i;"string"==typeof e[0]||Array.isArray(e[0])?(s=e[0],a=e.slice(1,e.length),i=t):(s=e[0].events,a=e[0].data,i=e[0].context||t),a.unshift(i);return(Array.isArray(s)?s:s.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...a])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((e=>{e.apply(i,a)}))})),t}};function $({swiper:e,runCallbacks:t,direction:s,step:a}){const{activeIndex:i,previousIndex:r}=e;let n=s;if(n||(n=i>r?"next":i<r?"prev":"reset"),e.emit(`transition${a}`),t&&i!==r){if("reset"===n)return void e.emit(`slideResetTransition${a}`);e.emit(`slideChangeTransition${a}`),"next"===n?e.emit(`slideNextTransition${a}`):e.emit(`slidePrevTransition${a}`)}}function S(e){const t=this,s=a(),i=r(),n=t.touchEventsData,{params:l,touches:o,enabled:c}=t;if(!c)return;if(t.animating&&l.preventInteractionOnTransition)return;!t.animating&&l.cssMode&&l.loop&&t.loopFix();let p=e;p.originalEvent&&(p=p.originalEvent);let h=d(p.target);if("wrapper"===l.touchEventsTarget&&!h.closest(t.wrapperEl).length)return;if(n.isTouchEvent="touchstart"===p.type,!n.isTouchEvent&&"which"in p&&3===p.which)return;if(!n.isTouchEvent&&"button"in p&&p.button>0)return;if(n.isTouched&&n.isMoved)return;!!l.noSwipingClass&&""!==l.noSwipingClass&&p.target&&p.target.shadowRoot&&e.path&&e.path[0]&&(h=d(e.path[0]));const m=l.noSwipingSelector?l.noSwipingSelector:`.${l.noSwipingClass}`,f=!(!p.target||!p.target.shadowRoot);if(l.noSwiping&&(f?function(e,t=this){return function t(s){return s&&s!==a()&&s!==r()?(s.assignedSlot&&(s=s.assignedSlot),s.closest(e)||t(s.getRootNode().host)):null}(t)}(m,p.target):h.closest(m)[0]))return void(t.allowClick=!0);if(l.swipeHandler&&!h.closest(l.swipeHandler)[0])return;o.currentX="touchstart"===p.type?p.targetTouches[0].pageX:p.pageX,o.currentY="touchstart"===p.type?p.targetTouches[0].pageY:p.pageY;const g=o.currentX,v=o.currentY,w=l.edgeSwipeDetection||l.iOSEdgeSwipeDetection,b=l.edgeSwipeThreshold||l.iOSEdgeSwipeThreshold;if(w&&(g<=b||g>=i.innerWidth-b)){if("prevent"!==w)return;e.preventDefault()}if(Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=g,o.startY=v,n.touchStartTime=u(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,l.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==p.type){let e=!0;h.is(n.focusableElements)&&(e=!1),s.activeElement&&d(s.activeElement).is(n.focusableElements)&&s.activeElement!==h[0]&&s.activeElement.blur();const a=e&&t.allowTouchMove&&l.touchStartPreventDefault;!l.touchStartForcePreventDefault&&!a||h[0].isContentEditable||p.preventDefault()}t.emit("touchStart",p)}function M(e){const t=a(),s=this,i=s.touchEventsData,{params:r,touches:n,rtlTranslate:l,enabled:o}=s;if(!o)return;let c=e;if(c.originalEvent&&(c=c.originalEvent),!i.isTouched)return void(i.startMoving&&i.isScrolling&&s.emit("touchMoveOpposite",c));if(i.isTouchEvent&&"touchmove"!==c.type)return;const p="touchmove"===c.type&&c.targetTouches&&(c.targetTouches[0]||c.changedTouches[0]),h="touchmove"===c.type?p.pageX:c.pageX,m="touchmove"===c.type?p.pageY:c.pageY;if(c.preventedByNestedSwiper)return n.startX=h,void(n.startY=m);if(!s.allowTouchMove)return s.allowClick=!1,void(i.isTouched&&(Object.assign(n,{startX:h,startY:m,currentX:h,currentY:m}),i.touchStartTime=u()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(s.isVertical()){if(m<n.startY&&s.translate<=s.maxTranslate()||m>n.startY&&s.translate>=s.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(h<n.startX&&s.translate<=s.maxTranslate()||h>n.startX&&s.translate>=s.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&c.target===t.activeElement&&d(c.target).is(i.focusableElements))return i.isMoved=!0,void(s.allowClick=!1);if(i.allowTouchCallbacks&&s.emit("touchMove",c),c.targetTouches&&c.targetTouches.length>1)return;n.currentX=h,n.currentY=m;const f=n.currentX-n.startX,g=n.currentY-n.startY;if(s.params.threshold&&Math.sqrt(f**2+g**2)<s.params.threshold)return;if(void 0===i.isScrolling){let e;s.isHorizontal()&&n.currentY===n.startY||s.isVertical()&&n.currentX===n.startX?i.isScrolling=!1:f*f+g*g>=25&&(e=180*Math.atan2(Math.abs(g),Math.abs(f))/Math.PI,i.isScrolling=s.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(i.isScrolling&&s.emit("touchMoveOpposite",c),void 0===i.startMoving&&(n.currentX===n.startX&&n.currentY===n.startY||(i.startMoving=!0)),i.isScrolling)return void(i.isTouched=!1);if(!i.startMoving)return;s.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation(),i.isMoved||(r.loop&&!r.cssMode&&s.loopFix(),i.startTranslate=s.getTranslate(),s.setTransition(0),s.animating&&s.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==s.allowSlideNext&&!0!==s.allowSlidePrev||s.setGrabCursor(!0),s.emit("sliderFirstMove",c)),s.emit("sliderMove",c),i.isMoved=!0;let v=s.isHorizontal()?f:g;n.diff=v,v*=r.touchRatio,l&&(v=-v),s.swipeDirection=v>0?"prev":"next",i.currentTranslate=v+i.startTranslate;let w=!0,b=r.resistanceRatio;if(r.touchReleaseOnEdges&&(b=0),v>0&&i.currentTranslate>s.minTranslate()?(w=!1,r.resistance&&(i.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+i.startTranslate+v)**b)):v<0&&i.currentTranslate<s.maxTranslate()&&(w=!1,r.resistance&&(i.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-i.startTranslate-v)**b)),w&&(c.preventedByNestedSwiper=!0),!s.allowSlideNext&&"next"===s.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!s.allowSlidePrev&&"prev"===s.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),s.allowSlidePrev||s.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(v)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,i.currentTranslate=i.startTranslate,void(n.diff=s.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&s.freeMode||r.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),s.params.freeMode&&r.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(i.currentTranslate),s.setTranslate(i.currentTranslate))}function P(e){const t=this,s=t.touchEventsData,{params:a,touches:i,rtlTranslate:r,slidesGrid:n,enabled:l}=t;if(!l)return;let o=e;if(o.originalEvent&&(o=o.originalEvent),s.allowTouchCallbacks&&t.emit("touchEnd",o),s.allowTouchCallbacks=!1,!s.isTouched)return s.isMoved&&a.grabCursor&&t.setGrabCursor(!1),s.isMoved=!1,void(s.startMoving=!1);a.grabCursor&&s.isMoved&&s.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const d=u(),c=d-s.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(o),t.emit("tap click",o),c<300&&d-s.lastClickTime<300&&t.emit("doubleTap doubleClick",o)),s.lastClickTime=u(),p((()=>{t.destroyed||(t.allowClick=!0)})),!s.isTouched||!s.isMoved||!t.swipeDirection||0===i.diff||s.currentTranslate===s.startTranslate)return s.isTouched=!1,s.isMoved=!1,void(s.startMoving=!1);let h;if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,h=a.followFinger?r?t.translate:-t.translate:-s.currentTranslate,a.cssMode)return;if(t.params.freeMode&&a.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:h});let m=0,f=t.slidesSizesGrid[0];for(let e=0;e<n.length;e+=e<a.slidesPerGroupSkip?1:a.slidesPerGroup){const t=e<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==n[e+t]?h>=n[e]&&h<n[e+t]&&(m=e,f=n[e+t]-n[e]):h>=n[e]&&(m=e,f=n[n.length-1]-n[n.length-2])}const g=(h-n[m])/f,v=m<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(c>a.longSwipesMs){if(!a.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=a.longSwipesRatio?t.slideTo(m+v):t.slideTo(m)),"prev"===t.swipeDirection&&(g>1-a.longSwipesRatio?t.slideTo(m+v):t.slideTo(m))}else{if(!a.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(o.target===t.navigation.nextEl||o.target===t.navigation.prevEl)?o.target===t.navigation.nextEl?t.slideTo(m+v):t.slideTo(m):("next"===t.swipeDirection&&t.slideTo(m+v),"prev"===t.swipeDirection&&t.slideTo(m))}}function k(){const e=this,{params:t,el:s}=e;if(s&&0===s.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:a,allowSlidePrev:i,snapGrid:r}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=a,e.params.watchOverflow&&r!==e.snapGrid&&e.checkOverflow()}function z(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function O(){const e=this,{wrapperEl:t,rtlTranslate:s,enabled:a}=e;if(!a)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const r=e.maxTranslate()-e.minTranslate();i=0===r?0:(e.translate-e.minTranslate())/r,i!==e.progress&&e.updateProgress(s?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let I=!1;function L(){}const A=(e,t)=>{const s=a(),{params:i,touchEvents:r,el:n,wrapperEl:l,device:o,support:d}=e,c=!!i.nested,p="on"===t?"addEventListener":"removeEventListener",u=t;if(d.touch){const t=!("touchstart"!==r.start||!d.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};n[p](r.start,e.onTouchStart,t),n[p](r.move,e.onTouchMove,d.passiveListener?{passive:!1,capture:c}:c),n[p](r.end,e.onTouchEnd,t),r.cancel&&n[p](r.cancel,e.onTouchEnd,t)}else n[p](r.start,e.onTouchStart,!1),s[p](r.move,e.onTouchMove,c),s[p](r.end,e.onTouchEnd,!1);(i.preventClicks||i.preventClicksPropagation)&&n[p]("click",e.onClick,!0),i.cssMode&&l[p]("scroll",e.onScroll),i.updateOnWindowResize?e[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",k,!0):e[u]("observerUpdate",k,!0)};const D=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var G={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function N(e,t){return function(s={}){const a=Object.keys(s)[0],i=s[a];"object"==typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(a)>=0&&!0===e[a]&&(e[a]={auto:!0}),a in e&&"enabled"in i?(!0===e[a]&&(e[a]={enabled:!0}),"object"!=typeof e[a]||"enabled"in e[a]||(e[a].enabled=!0),e[a]||(e[a]={enabled:!1}),f(t,s)):f(t,s)):f(t,s)}}const B={eventsEmitter:C,update:{updateSize:function(){const e=this;let t,s;const a=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:a[0].clientWidth,s=void 0!==e.params.height&&null!==e.params.height?e.params.height:a[0].clientHeight,0===t&&e.isHorizontal()||0===s&&e.isVertical()||(t=t-parseInt(a.css("padding-left")||0,10)-parseInt(a.css("padding-right")||0,10),s=s-parseInt(a.css("padding-top")||0,10)-parseInt(a.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(s)&&(s=0),Object.assign(e,{width:t,height:s,size:e.isHorizontal()?t:s}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function s(e,s){return parseFloat(e.getPropertyValue(t(s))||0)}const a=e.params,{$wrapperEl:i,size:r,rtlTranslate:n,wrongRTL:l}=e,o=e.virtual&&a.virtual.enabled,d=o?e.virtual.slides.length:e.slides.length,c=i.children(`.${e.params.slideClass}`),p=o?e.virtual.slides.length:c.length;let u=[];const h=[],m=[];let f=a.slidesOffsetBefore;"function"==typeof f&&(f=a.slidesOffsetBefore.call(e));let v=a.slidesOffsetAfter;"function"==typeof v&&(v=a.slidesOffsetAfter.call(e));const w=e.snapGrid.length,b=e.slidesGrid.length;let x=a.spaceBetween,y=-f,E=0,T=0;if(void 0===r)return;"string"==typeof x&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*r),e.virtualSize=-x,n?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),a.centeredSlides&&a.cssMode&&(g(e.wrapperEl,"--swiper-centered-offset-before",""),g(e.wrapperEl,"--swiper-centered-offset-after",""));const C=a.grid&&a.grid.rows>1&&e.grid;let $;C&&e.grid.initSlides(p);const S="auto"===a.slidesPerView&&a.breakpoints&&Object.keys(a.breakpoints).filter((e=>void 0!==a.breakpoints[e].slidesPerView)).length>0;for(let i=0;i<p;i+=1){$=0;const n=c.eq(i);if(C&&e.grid.updateSlide(i,n,p,t),"none"!==n.css("display")){if("auto"===a.slidesPerView){S&&(c[i].style[t("width")]="");const r=getComputedStyle(n[0]),l=n[0].style.transform,o=n[0].style.webkitTransform;if(l&&(n[0].style.transform="none"),o&&(n[0].style.webkitTransform="none"),a.roundLengths)$=e.isHorizontal()?n.outerWidth(!0):n.outerHeight(!0);else{const e=s(r,"width"),t=s(r,"padding-left"),a=s(r,"padding-right"),i=s(r,"margin-left"),l=s(r,"margin-right"),o=r.getPropertyValue("box-sizing");if(o&&"border-box"===o)$=e+i+l;else{const{clientWidth:s,offsetWidth:r}=n[0];$=e+t+a+i+l+(r-s)}}l&&(n[0].style.transform=l),o&&(n[0].style.webkitTransform=o),a.roundLengths&&($=Math.floor($))}else $=(r-(a.slidesPerView-1)*x)/a.slidesPerView,a.roundLengths&&($=Math.floor($)),c[i]&&(c[i].style[t("width")]=`${$}px`);c[i]&&(c[i].swiperSlideSize=$),m.push($),a.centeredSlides?(y=y+$/2+E/2+x,0===E&&0!==i&&(y=y-r/2-x),0===i&&(y=y-r/2-x),Math.abs(y)<.001&&(y=0),a.roundLengths&&(y=Math.floor(y)),T%a.slidesPerGroup==0&&u.push(y),h.push(y)):(a.roundLengths&&(y=Math.floor(y)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup==0&&u.push(y),h.push(y),y=y+$+x),e.virtualSize+=$+x,E=$,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,r)+v,n&&l&&("slide"===a.effect||"coverflow"===a.effect)&&i.css({width:`${e.virtualSize+a.spaceBetween}px`}),a.setWrapperSize&&i.css({[t("width")]:`${e.virtualSize+a.spaceBetween}px`}),C&&e.grid.updateWrapperSize($,u,t),!a.centeredSlides){const t=[];for(let s=0;s<u.length;s+=1){let i=u[s];a.roundLengths&&(i=Math.floor(i)),u[s]<=e.virtualSize-r&&t.push(i)}u=t,Math.floor(e.virtualSize-r)-Math.floor(u[u.length-1])>1&&u.push(e.virtualSize-r)}if(0===u.length&&(u=[0]),0!==a.spaceBetween){const s=e.isHorizontal()&&n?"marginLeft":t("marginRight");c.filter(((e,t)=>!a.cssMode||t!==c.length-1)).css({[s]:`${x}px`})}if(a.centeredSlides&&a.centeredSlidesBounds){let e=0;m.forEach((t=>{e+=t+(a.spaceBetween?a.spaceBetween:0)})),e-=a.spaceBetween;const t=e-r;u=u.map((e=>e<0?-f:e>t?t+v:e))}if(a.centerInsufficientSlides){let e=0;if(m.forEach((t=>{e+=t+(a.spaceBetween?a.spaceBetween:0)})),e-=a.spaceBetween,e<r){const t=(r-e)/2;u.forEach(((e,s)=>{u[s]=e-t})),h.forEach(((e,s)=>{h[s]=e+t}))}}if(Object.assign(e,{slides:c,snapGrid:u,slidesGrid:h,slidesSizesGrid:m}),a.centeredSlides&&a.cssMode&&!a.centeredSlidesBounds){g(e.wrapperEl,"--swiper-centered-offset-before",-u[0]+"px"),g(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-m[m.length-1]/2+"px");const t=-e.snapGrid[0],s=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+s))}p!==d&&e.emit("slidesLengthChange"),u.length!==w&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==b&&e.emit("slidesGridLengthChange"),a.watchSlidesProgress&&e.updateSlidesOffset()},updateAutoHeight:function(e){const t=this,s=[],a=t.virtual&&t.params.virtual.enabled;let i,r=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const n=e=>a?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)t.visibleSlides.each((e=>{s.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!a)break;s.push(n(e))}else s.push(n(t.activeIndex));for(i=0;i<s.length;i+=1)if(void 0!==s[i]){const e=s[i].offsetHeight;r=e>r?e:r}r&&t.$wrapperEl.css("height",`${r}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop},updateSlidesProgress:function(e=this&&this.translate||0){const t=this,s=t.params,{slides:a,rtlTranslate:i,snapGrid:r}=t;if(0===a.length)return;void 0===a[0].swiperSlideOffset&&t.updateSlidesOffset();let n=-e;i&&(n=e),a.removeClass(s.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let e=0;e<a.length;e+=1){const l=a[e];let o=l.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(o-=a[0].swiperSlideOffset);const d=(n+(s.centeredSlides?t.minTranslate():0)-o)/(l.swiperSlideSize+s.spaceBetween),c=(n-r[0]+(s.centeredSlides?t.minTranslate():0)-o)/(l.swiperSlideSize+s.spaceBetween),p=-(n-o),u=p+t.slidesSizesGrid[e];(p>=0&&p<t.size-1||u>1&&u<=t.size||p<=0&&u>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(e),a.eq(e).addClass(s.slideVisibleClass)),l.progress=i?-d:d,l.originalProgress=i?-c:c}t.visibleSlides=d(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const s=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*s||0}const s=t.params,a=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:r,isEnd:n}=t;const l=r,o=n;0===a?(i=0,r=!0,n=!0):(i=(e-t.minTranslate())/a,r=i<=0,n=i>=1),Object.assign(t,{progress:i,isBeginning:r,isEnd:n}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&t.updateSlidesProgress(e),r&&!l&&t.emit("reachBeginning toEdge"),n&&!o&&t.emit("reachEnd toEdge"),(l&&!r||o&&!n)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:s,$wrapperEl:a,activeIndex:i,realIndex:r}=e,n=e.virtual&&s.virtual.enabled;let l;t.removeClass(`${s.slideActiveClass} ${s.slideNextClass} ${s.slidePrevClass} ${s.slideDuplicateActiveClass} ${s.slideDuplicateNextClass} ${s.slideDuplicatePrevClass}`),l=n?e.$wrapperEl.find(`.${s.slideClass}[data-swiper-slide-index="${i}"]`):t.eq(i),l.addClass(s.slideActiveClass),s.loop&&(l.hasClass(s.slideDuplicateClass)?a.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${r}"]`).addClass(s.slideDuplicateActiveClass):a.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${r}"]`).addClass(s.slideDuplicateActiveClass));let o=l.nextAll(`.${s.slideClass}`).eq(0).addClass(s.slideNextClass);s.loop&&0===o.length&&(o=t.eq(0),o.addClass(s.slideNextClass));let d=l.prevAll(`.${s.slideClass}`).eq(0).addClass(s.slidePrevClass);s.loop&&0===d.length&&(d=t.eq(-1),d.addClass(s.slidePrevClass)),s.loop&&(o.hasClass(s.slideDuplicateClass)?a.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${o.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicateNextClass):a.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${o.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicateNextClass),d.hasClass(s.slideDuplicateClass)?a.children(`.${s.slideClass}:not(.${s.slideDuplicateClass})[data-swiper-slide-index="${d.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicatePrevClass):a.children(`.${s.slideClass}.${s.slideDuplicateClass}[data-swiper-slide-index="${d.attr("data-swiper-slide-index")}"]`).addClass(s.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,s=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:a,snapGrid:i,params:r,activeIndex:n,realIndex:l,snapIndex:o}=t;let d,c=e;if(void 0===c){for(let e=0;e<a.length;e+=1)void 0!==a[e+1]?s>=a[e]&&s<a[e+1]-(a[e+1]-a[e])/2?c=e:s>=a[e]&&s<a[e+1]&&(c=e+1):s>=a[e]&&(c=e);r.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(i.indexOf(s)>=0)d=i.indexOf(s);else{const e=Math.min(r.slidesPerGroupSkip,c);d=e+Math.floor((c-e)/r.slidesPerGroup)}if(d>=i.length&&(d=i.length-1),c===n)return void(d!==o&&(t.snapIndex=d,t.emit("snapIndexChange")));const p=parseInt(t.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(t,{snapIndex:d,realIndex:p,previousIndex:n,activeIndex:c}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),l!==p&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,s=t.params,a=d(e.target).closest(`.${s.slideClass}`)[0];let i,r=!1;if(a)for(let e=0;e<t.slides.length;e+=1)if(t.slides[e]===a){r=!0,i=e;break}if(!a||!r)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=a,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(d(a).attr("data-swiper-slide-index"),10):t.clickedIndex=i,s.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}},translate:{getTranslate:function(e=(this.isHorizontal()?"x":"y")){const{params:t,rtlTranslate:s,translate:a,$wrapperEl:i}=this;if(t.virtualTranslate)return s?-a:a;if(t.cssMode)return a;let r=h(i[0],e);return s&&(r=-r),r||0},setTranslate:function(e,t){const s=this,{rtlTranslate:a,params:i,$wrapperEl:r,wrapperEl:n,progress:l}=s;let o,d=0,c=0;s.isHorizontal()?d=a?-e:e:c=e,i.roundLengths&&(d=Math.floor(d),c=Math.floor(c)),i.cssMode?n[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-d:-c:i.virtualTranslate||r.transform(`translate3d(${d}px, ${c}px, 0px)`),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?d:c;const p=s.maxTranslate()-s.minTranslate();o=0===p?0:(e-s.minTranslate())/p,o!==l&&s.updateProgress(e),s.emit("setTranslate",s.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,s=!0,a=!0,i){const r=this,{params:n,wrapperEl:l}=r;if(r.animating&&n.preventInteractionOnTransition)return!1;const o=r.minTranslate(),d=r.maxTranslate();let c;if(c=a&&e>o?o:a&&e<d?d:e,r.updateProgress(c),n.cssMode){const e=r.isHorizontal();if(0===t)l[e?"scrollLeft":"scrollTop"]=-c;else{if(!r.support.smoothScroll)return v({swiper:r,targetPosition:-c,side:e?"left":"top"}),!0;l.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(r.setTransition(0),r.setTranslate(c),s&&(r.emit("beforeTransitionStart",t,i),r.emit("transitionEnd"))):(r.setTransition(t),r.setTranslate(c),s&&(r.emit("beforeTransitionStart",t,i),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,s&&r.emit("transitionEnd"))}),r.$wrapperEl[0].addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const s=this;s.params.cssMode||s.$wrapperEl.transition(e),s.emit("setTransition",e,t)},transitionStart:function(e=!0,t){const s=this,{params:a}=s;a.cssMode||(a.autoHeight&&s.updateAutoHeight(),$({swiper:s,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e=!0,t){const s=this,{params:a}=s;s.animating=!1,a.cssMode||(s.setTransition(0),$({swiper:s,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(e=0,t=this.params.speed,s=!0,a,i){if("number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const r=this;let n=e;n<0&&(n=0);const{params:l,snapGrid:o,slidesGrid:d,previousIndex:c,activeIndex:p,rtlTranslate:u,wrapperEl:h,enabled:m}=r;if(r.animating&&l.preventInteractionOnTransition||!m&&!a&&!i)return!1;const f=Math.min(r.params.slidesPerGroupSkip,n);let g=f+Math.floor((n-f)/r.params.slidesPerGroup);g>=o.length&&(g=o.length-1),(p||l.initialSlide||0)===(c||0)&&s&&r.emit("beforeSlideChangeStart");const w=-o[g];if(r.updateProgress(w),l.normalizeSlideIndex)for(let e=0;e<d.length;e+=1){const t=-Math.floor(100*w),s=Math.floor(100*d[e]),a=Math.floor(100*d[e+1]);void 0!==d[e+1]?t>=s&&t<a-(a-s)/2?n=e:t>=s&&t<a&&(n=e+1):t>=s&&(n=e)}if(r.initialized&&n!==p){if(!r.allowSlideNext&&w<r.translate&&w<r.minTranslate())return!1;if(!r.allowSlidePrev&&w>r.translate&&w>r.maxTranslate()&&(p||0)!==n)return!1}let b;if(b=n>p?"next":n<p?"prev":"reset",u&&-w===r.translate||!u&&w===r.translate)return r.updateActiveIndex(n),l.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==l.effect&&r.setTranslate(w),"reset"!==b&&(r.transitionStart(s,b),r.transitionEnd(s,b)),!1;if(l.cssMode){const e=r.isHorizontal(),s=u?w:-w;if(0===t){const t=r.virtual&&r.params.virtual.enabled;t&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),h[e?"scrollLeft":"scrollTop"]=s,t&&requestAnimationFrame((()=>{r.wrapperEl.style.scrollSnapType="",r._swiperImmediateVirtual=!1}))}else{if(!r.support.smoothScroll)return v({swiper:r,targetPosition:s,side:e?"left":"top"}),!0;h.scrollTo({[e?"left":"top"]:s,behavior:"smooth"})}return!0}return 0===t?(r.setTransition(0),r.setTranslate(w),r.updateActiveIndex(n),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,a),r.transitionStart(s,b),r.transitionEnd(s,b)):(r.setTransition(t),r.setTranslate(w),r.updateActiveIndex(n),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,a),r.transitionStart(s,b),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(s,b))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e=0,t=this.params.speed,s=!0,a){const i=this;let r=e;return i.params.loop&&(r+=i.loopedSlides),i.slideTo(r,t,s,a)},slideNext:function(e=this.params.speed,t=!0,s){const a=this,{animating:i,enabled:r,params:n}=a;if(!r)return a;let l=n.slidesPerGroup;"a[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,t||[]),r=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){o[e]&&(i[e]=function(t){return new Promise((function(n,i){r.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=o[e](t)).value instanceof m?Promise.resolve(n.value.v).then(c,u):d(r[0][2],n)}catch(e){d(r[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),r.shift(),r.length&&s(r[0][0],r[0][1])}}function g(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,o){t[i]=e[i]?function(t){return(n=!n)?{value:m(e[i](t)),done:"return"===i}:o?o(t):t}:o}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,o,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={id:i,exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";function e(e,t){return fetch(e,t).then((e=>{if(!e.ok)throw Error(e.statusText);return e.json()}))}function t(e,t){return fetch(e,t).then((e=>{if(!e.ok)throw Error(e.statusText);return e}))}function i(){return(new Date).toISOString().split(":")[0]}var o,r;!function(e){e.TEST="test",e.STAGING="staging",e.PRODUCTION="production"}(o||(o={})),function(e){e.UNSUPPORTED_BROWSER="unsupported-browser",e.INCOGNITO_BROWSER="incognito-browser",e.CONFIGURATION_FAILED="configuration-failed",e.MISSING_APP_CONFIG_VALUES="missing-app-config-values",e.SW_REGISTRATION_FAILED="sw-registration-failed",e.SW_UNREGISTRATION_FAILED="sw-unregistration-failed",e.FIREBASE_INITIALIZATION_FAILED="firebase-initialization-failed",e.FIREBASE_REGISTRAION_FAILED="firebase-registration-failed",e.FIREBASE_TOKEN_UPDATE_FAILED="firebase-token-update-failed",e.FIREBASE_TOKEN_DELETE_FAILED="firebase-token-delete-failed",e.NAJVA_SUBSCRIPTION_FAILED="najva-subscription-failed",e.COOKIE_TOKEN_UPDATE_FAILED="najva-token-update-failed",e.ADD_ATTRIBUTE_FAILED="add-attribute-failed",e.DELETE_ATTRIBUTE_FAILED="delete-attribute-failed",e.GET_ATTRIBUTES_FAILED="get-attributes-failed",e.INVALID_KEY_FOR_IDB="invalid-key-for-idb",e.DB_UPDATE_FAILED="db-update-failed",e.DB_READ_FAILED="db-read-failed",e.DB_DELETE_FAILED="db-delete-failed",e.DB_OBJ_STORE_CLEAR_FAILED="db-obj-store-clear-failed",e.SEND_LOCATION_FAILED="send-location-failed",e.UPDATE_USER_ACTIVITY_FAILED="update-user-activity-failed",e.REPORT_SCRIPT_VERSION_FAILED="report-script-version-failed",e.LOAD_YEKTANET_ANALYTICS_SCRIPT_FAILED="load-yektanet-analytics-script-failed",e.INIT_EMAIL_FAILED="init-email-failed",e.ADD_EMAIL_SUBSCRIBER_IDENTIFIER_FAILED="add-email-subscriber-identifier-failed",e.IDENTIFY_EMAIL_SUBSCRIBER_FAILED="identify-email-subscriber-failed",e.SUBSCRIBE_TO_EMAIL_FAILED="subscribe-to-email-failed",e.CREATE_HTML_FAILED="create-html-failed",e.SELECT_ELEMENT_FAILED="select-element-failed",e.HEX_TO_RGB_FAILED="hex-to-rgb-failed",e.FIND_EMAIL_IFRAME_CONTAINER_FAILED="find-email-iframe-container-failed"}(r||(r={}));const a="\nOriginal Error -> {$error}",s={[r.UNSUPPORTED_BROWSER]:`This browser doesn't support the API's required to use the firebase and najva SDK.${a}`,[r.INCOGNITO_BROWSER]:`najva sdk will not run in brower incognito mode.${a}`,[r.MISSING_APP_CONFIG_VALUES]:"Missing App configuration value: {$valueName}.",[r.CONFIGURATION_FAILED]:`failed to get configuration file from {$url}.${a}`,[r.SW_REGISTRATION_FAILED]:`We are unable to register the default service worker. {$browserErrorMessage}.${a}`,[r.SW_UNREGISTRATION_FAILED]:`We are unable to unregister the najva-messaging service worker.${a}`,[r.FIREBASE_INITIALIZATION_FAILED]:`failed to initialize firebase app. {$firebaseErrorMessage}.${a}`,[r.FIREBASE_REGISTRAION_FAILED]:`failed to get registration token from firebase. {$firebaseErrorMessage}.${a}`,[r.FIREBASE_TOKEN_UPDATE_FAILED]:"failed to update firebase token. {$firebaseErrorMessage}.",[r.FIREBASE_TOKEN_DELETE_FAILED]:`failed to delete firebase token. {$firebaseErrorMessage}.${a}`,[r.NAJVA_SUBSCRIPTION_FAILED]:`failed to subscribe firebase token {$firebaseToken} to najva.${a}`,[r.COOKIE_TOKEN_UPDATE_FAILED]:`failed to update cookie_token for najva user {$najva_token}.${a}`,[r.ADD_ATTRIBUTE_FAILED]:`failed to add attribute {$object}.${a}`,[r.DELETE_ATTRIBUTE_FAILED]:`failed to delete attribute {$key}.${a}`,[r.GET_ATTRIBUTES_FAILED]:`failed to get attributes.${a}`,[r.INVALID_KEY_FOR_IDB]:`faild to update indexed db. the {$key} is not a valid key for object store {$objStoreName}.${a}`,[r.DB_UPDATE_FAILED]:`failed to update {$key} with {$value} for {$objectStoreName}. {$browserErrorMessage}.${a}`,[r.DB_DELETE_FAILED]:`failed to update {$key} with {$value} for {$objectStoreName}. {$browserErrorMessage}.${a}`,[r.DB_READ_FAILED]:`failed to read {$key} from {$objectStoreName}. {$browserErrorMessage}.${a}`,[r.DB_OBJ_STORE_CLEAR_FAILED]:`failed to clear {$objectStoreName}. {$browserErrorMessage}.${a}`,[r.SEND_LOCATION_FAILED]:"failed to send location to the server: {$errorStatus}.",[r.UPDATE_USER_ACTIVITY_FAILED]:`failed to update user activity {$browserErrorMessage}.${a}`,[r.REPORT_SCRIPT_VERSION_FAILED]:`failed to report version {$version} to {$url}. {$browserErrorMessage}.${a}`,[r.LOAD_YEKTANET_ANALYTICS_SCRIPT_FAILED]:`failed to load tag script with app_id: {$appId}.${a}`,[r.INIT_EMAIL_FAILED]:`failed to init email.${a}`,[r.ADD_EMAIL_SUBSCRIBER_IDENTIFIER_FAILED]:`failed to add email subscriber identifier.${a}`,[r.IDENTIFY_EMAIL_SUBSCRIBER_FAILED]:`failed to identify email subscriber.${a}`,[r.SUBSCRIBE_TO_EMAIL_FAILED]:`failed to subscribe to email.${a}`,[r.CREATE_HTML_FAILED]:"failed to create html element with string: {$value}.",[r.SELECT_ELEMENT_FAILED]:"failed to select element with selector: {$value}.",[r.HEX_TO_RGB_FAILED]:"failed to convert hex color to rgb format with value: {$value}.",[r.FIND_EMAIL_IFRAME_CONTAINER_FAILED]:"failed to find email iframe container."},c=/\{\$([^}]+)}/g;function u(e,t){const n=s[e],i=n?function(e,t){return e.replace(c,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(n,t||{}):"Error";return new Error(i)}const d={"":"0","":"0","":"1","":"1","":"2","":"2","":"3","":"3","":"4","":"4","":"5","":"5","":"6","":"6","":"7","":"7","":"8","":"8","":"9","":"9"};function l(e){try{return e.toString().replace(/[\u0660-\u0669\u06F0-\u06F9]/g,(e=>d[e]))}catch(t){return e}}var f;!function(e){e.email="email",e.phone="phone",e.required="required"}(f||(f={}));const p={[f.email]:{fa:"  .",en:"Email is not valid"},[f.phone]:{fa:"   .",en:"Phone is not valid"},[f.required]:{fa:"   .",en:"This field is required"}};const h={messaging_sender_id:"334645784830",najva_settings:{campaign_id:"",app_id:"",account_id:"",without_popup:!0,with_popup:!1,api_key:"fd4f22c3-0f92-43ee-b7ed-8b905eb9c7ba",najva_subdomain:"https://app.najva.com/",website_id:18846,location_permission:!0,request_text:"       ",request_description:"",accept_text:"",denied_text:"",request_icon:"https://www.najva.com/wp-content/uploads/2017/07/Najva-Logo-OK-04.png",extra_css:"",dismiss_cookie_days:3,request_permission:{delay:{enable:0,value:20},scroll:{enable:1,value:50},visit:{minimum:{enable:0,value:1},maximum:{enable:0,value:3},interval:{enable:0,value:3}}},show_bell:1,show_bell_in_mobile:1,bell_direction:"right",tooltip_direction:"left",bell_color_hover:"#7a7a7a",bell_color:"#444444",bell_tooltip:" ",show_backdrop:!1,show_backdrop_mobile:!1,native_permission:!0,backdrop_text:"      Allow  ."},custom_links:[],website_policy:{notification_queue:1,notification_countdown:10,notification_blocked:!1,notification_button_enabled:!1,use_najva_firebase_account:!0,recommender_permission:!1,tag_enabled:!1,email_enabled:!0},sw_path:"/",email_settings:{id:79328,uuid:"4ad01101-a47a-4ca5-8ea9-8aaac023d098",show_condition:{delay:{enable:1,value:2},scroll:{enable:0,value:10},visit:{minimum:{enable:0,value:1},maximum:{enable:0,value:1},interval:{enable:0,value:4}}},title:"           ",background_color:"2d292e",button_color:"ccd1d9",send_btn_text:"",success_message:"    .",affected_urls:null,fields:[{key:"email",name:"",validations:[f.email,f.required]}],desc:"            ",img:"https://www.najva.com/wp-content/uploads/2017/07/Najva-Logo-OK-04.png",side_img:"https://www.najva.com/wp-content/uploads/2017/07/Najva-Logo-OK-04.png",background_img:"https://i.postimg.cc/3rCPNt3V/depositphotos-29704447-stock-video-city-skyline-business-man-success.jpg",iframe_container:"#abc"}},v="activity";var _;!function(e){e.LastActiveTime="last_active_time",e.VisitCount="visit_count",e.LastScriptReportedVersion="last_script_reported_version",e.LastServiceWorkerReportedVersion="last_service_worker_reported_version",e.LastCookieMatchingSent="last_cookie_matching_sent",e.HasMigrated="has_migrated",e.LastCurrentUserAPICalled="last-current-user-api-called",e.HasNajvaSubscriptionWindowOpened="has-najva-subscription-window-opened"}(_||(_={}));let m,b;const g=new WeakMap,y=new WeakMap,w=new WeakMap,E=new WeakMap,T=new WeakMap;let I={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return y.get(e);if("objectStoreNames"===t)return e.objectStoreNames||w.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return N(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function S(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(b||(b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(O(this),t),N(g.get(this))}:function(...t){return N(e.apply(O(this),t))}:function(t,...n){const i=e.call(O(this),t,...n);return w.set(i,t.sort?t.sort():[t]),N(i)}}function k(e){return"function"==typeof e?S(e):(e instanceof IDBTransaction&&function(e){if(y.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",r),e.removeEventListener("abort",r)},o=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",r),e.addEventListener("abort",r)}));y.set(e,t)}(e),t=e,(m||(m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,I):e);var t}function N(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",r)},o=()=>{t(N(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&g.set(t,e)})).catch((()=>{})),T.set(t,e),t}(e);if(E.has(e))return E.get(e);const t=k(e);return t!==e&&(E.set(e,t),T.set(t,e)),t}const O=e=>T.get(e);function A(e,t,{blocked:n,upgrade:i,blocking:o,terminated:r}={}){const a=indexedDB.open(e,t),s=N(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(N(a.result),e.oldVersion,e.newVersion,N(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{r&&e.addEventListener("close",(()=>r())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),s}const D=["get","getKey","getAll","getAllKeys","count"],P=["put","add","delete","clear"],L=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(L.get(t))return L.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=P.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!D.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,o?"readwrite":"readonly");let a=r.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),o&&r.done]))[0]};return L.set(t,r),r}I=(e=>({...e,get:(t,n,i)=>x(t,n)||e.get(t,n,i),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(I);const C="token";var j;!function(e){e.Firebase="fb_token",e.Cookie="cookie_token",e.Najva="najva_token"}(j||(j={}));var M=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function R(e,t,n){return M(this,void 0,void 0,(function*(){try{const i=(yield pe()).transaction(C,"readwrite");(yield i.store.get(e))?yield i.store.put({name:e,value:t,timestamp:n}):yield i.store.add({name:e,value:t,timestamp:n}),yield i.done}catch(n){throw u(r.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:C,browserErrorMessage:n.message,error:n})}}))}function B(e){return M(this,void 0,void 0,(function*(){try{const t=(yield pe()).transaction(C,"readonly"),n=yield t.store.get(e);return yield t.done,n?{value:n.value.toString(),timestamp:n.timestamp.toString()}:{value:"",timestamp:""}}catch(t){throw u(r.DB_READ_FAILED,{key:e,objectStoreName:C,browserErrorMessage:t.message,error:t})}}))}const $="website";var U;!function(e){e.WebsiteId="website_id",e.SenderId="messagind_sender_id"}(U||(U={}));var F=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function W(e,t){return F(this,void 0,void 0,(function*(){try{const n=(yield pe()).transaction($,"readwrite");(yield n.store.get(e))?yield n.store.put({name:e,value:t}):yield n.store.add({name:e,value:t}),yield n.done}catch(n){throw u(r.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:$,browserErrorMessage:n.message,error:n})}}))}const K="opt-in";var z,G;!function(e){e.Popup="pop_up"}(z||(z={})),function(e){e.ShownCount="shown_count",e.LastShownTime="last_shown_count",e.Reject="reject"}(G||(G={}));var V=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function H(e){return V(this,void 0,void 0,(function*(){try{const t=(yield pe()).transaction(K,"readwrite"),n=yield t.store.get(z.Popup);return yield t.done,n&&n[e]?n[e]:""}catch(t){throw u(r.DB_READ_FAILED,{key:`${z}.${e}`,objectStoreName:K,browserErrorMessage:t.message,error:t})}}))}function q(e,t){return V(this,void 0,void 0,(function*(){try{const n=(yield pe()).transaction(K,"readwrite"),i=yield n.store.get(z.Popup);i?yield n.store.put(Object.assign(Object.assign({},i),{[e]:t})):yield n.store.add({name:z.Popup,[e]:t}),yield n.done}catch(n){throw u(r.DB_UPDATE_FAILED,{key:`${z}.${e}`,objectStoreName:K,value:t,browserErrorMessage:n.message,error:n})}}))}const Y="attribute";var X=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function J(e,t,n){return X(this,void 0,void 0,(function*(){try{const i=(yield pe()).transaction(Y,"readwrite");(yield i.store.get(e))?yield i.store.put({key:e,value:t,timestamp:n}):yield i.store.add({key:e,value:t,timestamp:n}),yield i.done}catch(n){throw u(r.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:Y,browserErrorMessage:n.message,error:n})}}))}function Z(){return X(this,void 0,void 0,(function*(){try{const e=(yield pe()).transaction(Y,"readwrite").objectStore(Y);yield e.clear()}catch(e){throw u(r.DB_OBJ_STORE_CLEAR_FAILED,{browserErrorMessage:e.message,objectStoreName:Y,error:e})}}))}var Q=n(6808),ee=n.n(Q);function te(e){const t=e.split("."),n=t[t.length-1],i=t[t.length-2];if(i&&i.length>2)return`.${i}.${n}`;if(t&&t.length>2){return`.${t[t.length-3]}.${i}.${n}`}return e}function ne(e){return ee().get(e)}function ie(e){ee().remove(e,{domain:te(window.location.hostname),path:"/"})}var oe=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function re(e,t){return oe(this,void 0,void 0,(function*(){const n=ne(`najva_last_active_time:${t}`)||ne(`najva_last_active_time-${e}`);n&&(yield _e(_.LastActiveTime,n),ie(`najva_last_active_time:${t}`),ie(`najva_last_active_time-${e}`));const i=ne(`pushNotification:shownCount:${t}`)||ne(`pushNotification-shownCount-${e}`);i&&(yield _e(_.VisitCount,i),ie(`pushNotification:shownCount:${t}`),ie(`pushNotification-shownCount-${e}`));if(!(yield ve(_.LastCookieMatchingSent))){const e=Math.floor(30*Math.random());yield _e(_.LastCookieMatchingSent,new Date(Date.now()-24*e*60*60*1e3).toISOString())}ie("cookie_matching")}))}function ae(e){return oe(this,void 0,void 0,(function*(){const t=function(e){const t=Object.keys(localStorage),n=`${e}-tag-`,i=t.filter((e=>e.startsWith(n))),o={};return i.forEach((e=>{var t;const i=e.substr(n.length);o[i]=null===(t=localStorage.getItem(e))||void 0===t?void 0:t.toString()})),o}(e);Object.keys(t).forEach((n=>oe(this,void 0,void 0,(function*(){yield J(n,t[n],(new Date).toISOString()),localStorage.removeItem(function(e,t){return e&&t?`${e}-tag-${t}`:""}(e,n))}))))}))}function se(e,t){return oe(this,void 0,void 0,(function*(){const n=ne(`pushNotification:notWantPopUp:${t}`)||ne(`pushNotification-notWantPopUp-${e}`);n&&(yield q(G.Reject,n),ie(`pushNotification:notWantPopUp:${t}`),ie(`pushNotification-notWantPopUp-${e}`))}))}function ce(e,t){return oe(this,void 0,void 0,(function*(){const n=ne(`token_id:${t}`)||ne(`token_id-${e}`);n&&(yield R(j.Firebase,n,(new Date).toISOString()),ie(`token_id:${t}`),ie(`token_id-${e}`));const i=localStorage.getItem("_njt")||ne("najva_token");i&&(yield R(j.Najva,i,(new Date).toISOString()),ie("najva_token"),localStorage.removeItem("_njt"));const o=ne(`cookie_token:${t}`)||ne(`cookie_token-${e}`);o&&(yield R(j.Cookie,o,(new Date).toISOString()),ie(`cookie_token:${t}`),ie(`cookie_token-${e}`))}))}function ue(e,t){return oe(this,void 0,void 0,(function*(){yield _e(_.HasMigrated,"true");const n=yield function(e){return F(this,void 0,void 0,(function*(){try{const t=(yield pe()).transaction($,"readwrite"),n=yield t.store.get(e);return yield t.done,n?n.value:""}catch(t){throw u(r.DB_READ_FAILED,{key:e,objectStoreName:$,browserErrorMessage:t.message,error:t})}}))}(U.WebsiteId);e!=n&&(yield function(){return oe(this,void 0,void 0,(function*(){return Promise.all([W(U.WebsiteId,""),R(j.Cookie,"",(new Date).toISOString()),q(G.LastShownTime,""),q(G.ShownCount,""),Z(),me()])}))}()),yield Promise.all([W(U.WebsiteId,e),ce(e,t),se(e,t),ae(e),re(e,t)])}))}var de=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let le,fe;function pe(){return de(this,void 0,void 0,(function*(){return le||(le=yield A("najva-native-subscription-database",5,{upgrade(e,t){return de(this,void 0,void 0,(function*(){t>0&&t<5&&(e.deleteObjectStore(C),e.deleteObjectStore($),e.deleteObjectStore(K),e.deleteObjectStore(Y),e.deleteObjectStore(v)),e.createObjectStore(C,{keyPath:"name"}),e.createObjectStore($,{keyPath:"name"}),e.createObjectStore(K,{keyPath:"name"}),e.createObjectStore(Y,{keyPath:"key"}),e.createObjectStore(v,{keyPath:"name"})}))}})),le}))}var he=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function ve(e){return he(this,void 0,void 0,(function*(){try{const t=(yield pe()).transaction(v,"readwrite"),n=yield t.store.get(e);return yield t.done,n?n.value:""}catch(t){throw u(r.DB_READ_FAILED,{key:e,objectStoreName:v,browserErrorMessage:t.message,error:t})}}))}function _e(e,t){return he(this,void 0,void 0,(function*(){try{const n=(yield pe()).transaction(v,"readwrite");(yield n.store.get(e))?yield n.store.put({name:e,value:t}):yield n.store.add({name:e,value:t}),yield n.done}catch(n){throw u(r.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:v,browserErrorMessage:n.message,error:n})}}))}function me(){return he(this,void 0,void 0,(function*(){try{const e=(yield pe()).transaction(v,"readwrite").objectStore(v);yield e.clear()}catch(e){throw u(r.DB_OBJ_STORE_CLEAR_FAILED,{browserErrorMessage:e.message,objectStoreName:v,error:e})}}))}var be=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let ge=null;function ye(){return be(this,void 0,void 0,(function*(){if("production"===o.TEST)return h;const t=`${window.configFile}?v=${i()}`;if(ge)return ge;try{const n=yield e(t,{method:"GET",credentials:"omit"});return function(e){const t=e.messaging_sender_id,n=e.najva_settings;let i="";if(t||(i="messaging_sender_id"),n?n.api_key?n.website_id||(i="najva_settings.website_id"):i="najva_settings.api_key":i="najva_settings",i)throw u(r.MISSING_APP_CONFIG_VALUES,{valueName:i})}(n),yield W(U.WebsiteId,n.najva_settings.website_id.toString()),yield W(U.SenderId,n.messaging_sender_id),n}catch(e){throw u(r.CONFIGURATION_FAILED,{url:window.configFile,error:e})}}))}var we,Ee,Te,Ie=n(1923),Se=n.n(Ie),ke=n(5752),Ne=n(655),Oe=n(1313),Ae=((we={})["only-available-in-window"]="This method is available in a Window context.",we["only-available-in-sw"]="This method is available in a service worker context.",we["should-be-overriden"]="This method should be overriden by extended classes.",we["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",we["permission-default"]="The required permissions were not granted and dismissed instead.",we["permission-blocked"]="The required permissions were not granted and blocked instead.",we["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",we["notifications-blocked"]="Notifications have been blocked.",we["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",we["sw-registration-expected"]="A service worker registration was the expected input.",we["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",we["invalid-saved-token"]="Unable to access details of the saved token.",we["sw-reg-redundant"]="The service worker being used for push was made redundant.",we["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",we["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",we["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",we["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",we["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",we["token-update-no-token"]="FCM returned no token when updating the user to push.",we["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",we["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",we["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",we["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",we["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",we["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",we["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",we["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",we["failed-to-delete-token"]="Unable to delete the currently saved token.",we["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",we["bad-scope"]="The service worker scope must be a string with at least one character.",we["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",we["bad-subscription"]="The subscription must be a valid PushSubscription.",we["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",we["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",we["failed-delete-vapid-key"]="The VAPID key could not be deleted.",we["invalid-public-vapid-key"]="The public VAPID key must be a string.",we["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",we["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",we),De=new Oe.ErrorFactory("messaging","Messaging",Ae),Pe=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),Le="https://fcm.googleapis.com";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xe(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),o=0;o<e.byteLength;o++)if(n.getUint8(o)!==i.getUint8(o))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,Ne.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.TYPE_OF_MSG="firebase-messaging-msg-type",e.DATA="firebase-messaging-msg-data"}(Ee||(Ee={})),function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Te||(Te={}));var je=function(){function e(){}return e.prototype.getToken=function(e,t,n){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var i,o,r,a,s,c,u,d,l;return(0,Ne.__generator)(this,(function(f){switch(f.label){case 0:i=Ce(t.getKey("p256dh")),o=Ce(t.getKey("auth")),r="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+i+"&encryption_auth="+o,xe(n.buffer,Pe.buffer)||(a=Ce(n),r+="&application_pub_key="+a),(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),c={method:"POST",headers:s,body:r},f.label=1;case 1:return f.trys.push([1,4,,5]),[4,fetch(Le+"/fcm/connect/subscribe",c)];case 2:return[4,f.sent().json()];case 3:return u=f.sent(),[3,5];case 4:throw d=f.sent(),De.create("token-subscribe-failed",{errorInfo:d});case 5:if(u.error)throw l=u.error.message,De.create("token-subscribe-failed",{errorInfo:l});if(!u.token)throw De.create("token-subscribe-no-token");if(!u.pushSet)throw De.create("token-subscribe-no-push-set");return[2,{token:u.token,pushSet:u.pushSet}]}}))}))},e.prototype.updateToken=function(e,t,n,i,o){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var r,a,s,c,u,d,l,f,p;return(0,Ne.__generator)(this,(function(h){switch(h.label){case 0:r=Ce(i.getKey("p256dh")),a=Ce(i.getKey("auth")),s="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+i.endpoint+"&encryption_key="+r+"&encryption_auth="+a,xe(o.buffer,Pe.buffer)||(c=Ce(o),s+="&application_pub_key="+c),(u=new Headers).append("Content-Type","application/x-www-form-urlencoded"),d={method:"POST",headers:u,body:s},h.label=1;case 1:return h.trys.push([1,4,,5]),[4,fetch(Le+"/fcm/connect/subscribe",d)];case 2:return[4,h.sent().json()];case 3:return l=h.sent(),[3,5];case 4:throw f=h.sent(),De.create("token-update-failed",{errorInfo:f});case 5:if(l.error)throw p=l.error.message,De.create("token-update-failed",{errorInfo:p});if(!l.token)throw De.create("token-update-no-token");return[2,l.token]}}))}))},e.prototype.deleteToken=function(e,t,n){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var i,o,r,a,s,c;return(0,Ne.__generator)(this,(function(u){switch(u.label){case 0:i="authorized_entity="+e+"&token="+t+"&pushSet="+n,(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),r={method:"POST",headers:o,body:i},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(Le+"/fcm/connect/unsubscribe",r)];case 2:return[4,u.sent().json()];case 3:if((a=u.sent()).error)throw s=a.error.message,De.create("token-unsubscribe-failed",{errorInfo:s});return[3,5];case 4:throw c=u.sent(),De.create("token-unsubscribe-failed",{errorInfo:c});case 5:return[2]}}))}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re="undefined",Be="fcm_token_object_Store";function $e(){var e=indexedDB.open(Re);e.onerror=function(e){},e.onsuccess=function(t){!function(e){if(e.objectStoreNames.contains(Be)){var t=e.transaction(Be).objectStore(Be),n=new je,i=t.openCursor();i.onerror=function(e){},i.onsuccess=function(){var t=i.result;if(t){var o=t.value;n.deleteToken(o.fcmSenderId,o.fcmToken,o.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(Re)}}}(e.result)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),(0,Ne.__awaiter)(this,void 0,void 0,(function(){var n,i,o,r;return(0,Ne.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),i=n.transaction(this.objectStoreName,t),o=i.objectStore(this.objectStoreName),[4,Fe(e(o))];case 2:return r=a.sent(),[2,new Promise((function(e,t){i.oncomplete=function(){e(r)},i.onerror=function(){t(i.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var i=indexedDB.open(e.dbName,e.dbVersion);i.onsuccess=function(){t(i.result)},i.onerror=function(){e.dbPromise=null,n(i.error)},i.onupgradeneeded=function(t){return e.onDbUpgrade(i,t)}}))),this.dbPromise},e}();function Fe(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return(0,Ne.__extends)(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:$e();case 2:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=(0,Ne.__assign)({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=Me(t.vapidKey)),"string"==typeof t.auth&&(n.auth=Me(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=Me(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(t){if(!e)throw De.create("bad-token");return Ke({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(t){if(!e)throw De.create("bad-scope");return Ke({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(t){if(!e.swScope)throw De.create("bad-scope");if(!e.vapidKey)throw De.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw De.create("bad-subscription");if(!e.fcmSenderId)throw De.create("bad-sender-id");if(!e.fcmToken)throw De.create("bad-token");if(!e.fcmPushSet)throw De.create("bad-push-set");return Ke(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(De.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw De.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(Ue);function Ke(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw De.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw De.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw De.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw De.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw De.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw De.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw De.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw De.create("bad-push-set")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return(0,Ne.__extends)(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw De.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var n;return(0,Ne.__generator)(this,(function(i){if("string"!=typeof e||0===e.length)throw De.create("bad-scope");if(null===t||65!==t.length)throw De.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},t.prototype.deleteVapidDetails=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw De.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(Ue),Ge=function(){function e(e){var t=this;if(!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw De.create("bad-sender-id");this.messagingSenderId=e.options.messagingSenderId,this.tokenDetailsModel=new We,this.vapidDetailsModel=new ze,this.iidModel=new je,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,o;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw De.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=r.sent(),[4,this.getPublicVapidKey_()];case 2:return n=r.sent(),[4,this.getPushSubscription(t,n)];case 3:return i=r.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(o=r.sent())?[2,this.manageExistingToken(t,i,n,o)]:[2,this.getNewToken(t,i,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,i){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return function(e,t,n){if(!n.vapidKey||!xe(t.buffer,n.vapidKey.buffer))return!1;var i=e.endpoint===n.endpoint,o=xe(e.getKey("auth"),n.auth),r=xe(e.getKey("p256dh"),n.p256dh);return i&&o&&r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,i)?Date.now()<i.createTime+6048e5?[2,i.fcmToken]:[2,this.updateToken(e,t,n,i)]:[4,this.deleteTokenFromDB(i.fcmToken)];case 1:return o.sent(),[2,this.getNewToken(e,t,n)]}}))}))},e.prototype.updateToken=function(e,t,n,i){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var o,r,a;return(0,Ne.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,i.fcmToken,i.fcmPushSet,t,n)];case 1:return o=s.sent(),r={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:o,fcmPushSet:i.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(r)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,o];case 4:return a=s.sent(),[4,this.deleteToken(i.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var i,o;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return i=r.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i.token,fcmPushSet:i.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return r.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return r.sent(),[2,i.token]}}))}))},e.prototype.deleteToken=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return i.sent(),[4,this.getSWRegistration_()];case 2:return(t=i.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=i.sent())return[2,n.unsubscribe()];i.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then((function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})}))},e.prototype.requestPermission=function(){throw De.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw De.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw De.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw De.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw De.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw De.create("only-available-in-sw")},e.prototype.delete=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}();var Ve=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return(0,Ne.__extends)(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,r,a;return(0,Ne.__generator)(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(i=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return o=s.sent(),r=n.actions,a=Notification.maxActions,r&&a&&r.length,[2,o.showNotification(i,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=o.sent(),[3,3];case 2:throw t=o.sent(),De.create("unable-to-resubscribe",{errorInfo:t});case 3:return o.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return o.sent(),[3,8];case 5:return n=o.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(i=o.sent()))throw n;return[4,this.deleteToken(i.fcmToken)];case 7:throw o.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return e.notification&&e.notification.data&&e.notification.data.FCM_MSG?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(t=e.notification.data.FCM_MSG).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(i=r.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return i=r.sent(),[3,5];case 3:return[4,i.focus()];case 4:i=r.sent(),r.label=5;case 5:return i?(delete t.notification,delete t.fcmOptions,o=qe(Te.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(i,o)]):[2]}}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=(0,Ne.__assign)({},e.notification);return n.data=(0,Ne.__assign)({},e.notification.data,((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw De.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return t=new URL(e,self.location.href).href,[4,He()];case 1:for(n=r.sent(),i=null,o=0;o<n.length;o++)if(new URL(n[o].url,self.location.href).href===t){i=n[o];break}return[2,i]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(n){if(!e)throw De.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return[4,He()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var t,n,i=this;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,He()];case 1:return t=o.sent(),n=qe(Te.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return i.attemptToMessageClient_(e,n)})))];case 2:return o.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw De.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,Pe]:[2,t]}}))}))},t}(Ge);function He(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function qe(e,t){var n;return(n={})[Ee.TYPE_OF_MSG]=e,n[Ee.DATA]=t,n
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ye,Xe,Je=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=(0,Oe.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=(0,Oe.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return(0,Ne.__extends)(t,e),t.prototype.requestPermission=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){var e;return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?De.create("permission-blocked"):De.create("permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw De.create("sw-registration-expected");if(null!=this.registrationToUse)throw De.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw De.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw De.create("use-public-key-before-get-token");var t=Me(e);if(65!==t.length)throw De.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,i){if(t)if("activated"!==t.state)if("redundant"!==t.state){var o=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;i(De.create("sw-reg-redundant"))}t.removeEventListener("statechange",o)};t.addEventListener("statechange",o)}else i(De.create("sw-reg-redundant"));else n(e);else i(De.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw De.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return(0,Ne.__awaiter)(this,void 0,void 0,(function(){return(0,Ne.__generator)(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,Pe]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){if(t.data&&t.data[Ee.TYPE_OF_MSG]){var n=t.data;switch(n[Ee.TYPE_OF_MSG]){case Te.PUSH_MSG_RECEIVED:case Te.NOTIFICATION_CLICKED:var i=n[Ee.DATA];e.messageObserver&&e.messageObserver.next(i)}}}),!1)},t}(Ge);function Ze(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ye=ke.default,Xe={isSupported:Ze},Ye.INTERNAL.registerService("messaging",(function(e){if(!Ze())throw De.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Ve(e):new Je(e)}),Xe);var Qe=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let et,tt={messaging_sender_id:"",isNativeMode:!1};const nt="najva-reset",it="najva-hidden",ot="najva-float-left",rt="najva-float-right",at="najva-clearfix",st="2147483645",ct="najva-style-container";let ut={extra_css:""};function dt(e){if(!e||"string"!=typeof e)return;(function(){let e=document.getElementById(ct);return e||(e=document.createElement("style"),e.setAttribute("id",ct),document.getElementsByTagName("head")[0].appendChild(e),e)})().appendChild(document.createTextNode(e))}function lt(e){ut=e,function(){let e=`\n  .${nt}: {\n            background-attachment: scroll;\n            background-color: transparent;\n            background-image: none;\n            background-position: 0 0;\n            background-repeat: repeat;\n            border-color: #000;\n            border: medium none currentColor;\n            bottom: auto;\n            clear: none;\n            clip: auto;\n            color: inherit;\n            counter-increment: none;\n            counter-reset: none;\n            cursor: auto;\n            direction: inherit;\n            display: inline;\n            float: none;\n            font-family: inherit;\n            font-size: inherit;\n            font-style: inherit;\n            font-variant: normal;\n            font-weight: inherit;\n            height: auto;\n            left: auto;\n            letter-spacing: normal;\n            line-height: inherit;\n            list-style-type: inherit;\n            list-style-position: outside;\n            list-style-image: none;\n            margin: 0;\n            max-height: none;\n            max-width: none;\n            min-height: 0;\n            min-width: 0;\n            opacity: 1;\n            outline: medium none invert;\n            overflow: visible;\n            padding: 0;\n            position: static;\n            quotes: "" "";\n            right: auto;\n            table-layout: auto;\n            text-align: inherit;\n            text-decoration: inherit;\n            text-indent: 0;\n            text-transform: none;\n            top: auto;\n            unicode-bidi: normal;\n            vertical-align: baseline;\n            visibility: inherit;\n            white-space: normal;\n            width: auto;\n            word-spacing: normal;\n            z-index: auto;\n            background-origin: padding-box;\n            background-clip: border-box;\n            background-size: auto;\n            -o-border-image: none;\n            border-image: none;\n            border-radius: 0;\n            box-shadow: none;\n            box-sizing: content-box;\n            column-count: auto;\n            column-gap: normal;\n            column-rule: medium none #000;\n            column-span: 1;\n            column-width: auto;\n            -webkit-font-feature-settings: normal;\n            font-feature-settings: normal;\n            overflow-x: visible;\n            overflow-y: visible;\n            -webkit-hyphens: manual;\n            -ms-hyphens: manual;\n            hyphens: manual;\n            -ms-perspective: none;\n            -o-perspective: none;\n            perspective: none;\n            -ms-perspective-origin: 50% 50%;\n            -o-perspective-origin: 50% 50%;\n            perspective-origin: 50% 50%;\n            -webkit-backface-visibility: visible;\n            backface-visibility: visible;\n            text-shadow: none;\n            transition: all 0s ease 0s;\n            transform: none;\n            transform-origin: 50% 50%;\n            transform-style: flat;\n            word-break: normal;\n        }\n        .${it} {\n            opacity: 0 !important;\n            visibility: hidden !important;\n        }\n        .${ot} {\n            float: left!important;\n        }\n        \n        .${rt} {\n            float: right!important;\n        }\n        \n        .${at}:after, .${at}:before {\n            content: " "!important;\n            display: table!important;\n        }\n        \n        .${at}:after {\n            clear: both!important;\n        }\n        \n        .${at} {\n            zoom: 1!important;\n            width: auto!important;\n        }\n                               \n    `;ut.extra_css&&(e+=ut.extra_css),dt(e)}()}function ft(e){const t=document.createElement("div");if(t.innerHTML=e.trim(),!t.firstElementChild)throw u(r.CREATE_HTML_FAILED,{value:e});return t.firstElementChild}!function(){let e=[],t=!1,n=!1;function i(){if(!t){!0;for(const t of e)t.call(window);[]}}}();function pt(e,t){const n=Math.abs(e-t);return Math.ceil(n/864e5)}var ht=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let vt={website_id:"",najva_subdomain:"",api_key:""};const _t="najva-resubscribe";function mt(e){return ht(this,void 0,void 0,(function*(){vt=e,function(){if(!document.querySelector(`#${_t}`)){const e=ft(`<iframe id="${_t}" style="display: none !important;" src="${vt.najva_subdomain}resubscribe/?website=${vt.website_id}&api_key=${vt.api_key}"></iframe>`);e&&document.body.appendChild(e)}}()}))}function bt(){!function(){const e=`${vt.najva_subdomain}request/permission/?website=${vt.website_id}&api_key=${vt.api_key}`,t=window.open(e,"popup","width=700,height=700,scrollbars=no,resizable=no,toolbar=no,menubar=no");null==t||t.focus(),_e(_.HasNajvaSubscriptionWindowOpened,"true")}()}var gt;!function(e){e.NOTIF_PROMPT_OPEN="najva_notification_prompt_open",e.NOTIF_PROMPT_CLOSE="najva_notification_prompt_close",e.NOTIF_ACCESS_GRANTED="najva_notification_access_granted",e.NOTIF_ACCESS_DENIED="najva_notification_access_denied",e.NOTIF_ACCESS_ASK="najva_notification_access_ask"}(gt||(gt={}));var yt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};const wt="granted",Et="denied",Tt="prompt";function It(){return yt(this,void 0,void 0,(function*(){try{return yield navigator.permissions.query({name:"notifications"})}catch(e){return null}}))}function St(){return yt(this,void 0,void 0,(function*(){const e=yield It();return e?e.state:window.Notification?Notification.permission:null}))}function kt(){return yt(this,void 0,void 0,(function*(){!function(){const e=new CustomEvent(gt.NOTIF_PROMPT_OPEN);window.dispatchEvent(e)}(),yield Notification.requestPermission(),function(){const e=new CustomEvent(gt.NOTIF_PROMPT_CLOSE);window.dispatchEvent(e)}()}))}function Nt(){return yt(this,void 0,void 0,(function*(){const e=yield It();e&&(e.onchange=e=>yt(this,void 0,void 0,(function*(){const t=e.currentTarget.state;t===wt?function(){const e=new CustomEvent(gt.NOTIF_ACCESS_GRANTED);window.dispatchEvent(e)}():t===Et?function(){const e=new CustomEvent(gt.NOTIF_ACCESS_DENIED);window.dispatchEvent(e)}():(!function(){const e=new CustomEvent(gt.NOTIF_ACCESS_ASK);window.dispatchEvent(e)}(),yield kt())})))}))}function Ot(){return yt(this,void 0,void 0,(function*(){return(yield St())===wt}))}function At(){return yt(this,void 0,void 0,(function*(){return(yield St())===Tt}))}const Dt="https://report.najva.com";var Pt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let Lt;function xt(e,t,n){const i=[],o=JSON.parse((null==e?void 0:e.buttons)||"[]");if(o&&o.length)for(const e of o)[0,5,6].includes(Number(e.onclick_action))&&i.push({title:e.title,icon:e.icon_url,action:`BUTTON_CLICKED_${e.button_id}`});return{title:`${(null==e?void 0:e.title)||"title not provided"}`,options:{body:(null==e?void 0:e.body)||"body not provided",icon:`${null==e?void 0:e.icon}${n?`?n=${t}`:""}`,image:null==e?void 0:e.image,requireInteraction:!0,tag:(null==e?void 0:e.tag)||"",data:e,actions:i}}}function Ct(e){return Pt(this,void 0,void 0,(function*(){let t=null;if(!e)try{t=yield B(j.Najva)}catch(e){}return e||(null==t?void 0:t.value)||function(e){const t=e||0,n=[],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var o=0;o<t;o++)n.push(i.charAt(Math.floor(Math.random()*i.length)));return n.join("")}(15)}))}function jt(e){let t=0;return function n(i){i().catch((o=>{t<e&&(t+=1,setTimeout((()=>{n(i)}),5e3)),Lt(o)}))}}void 0===Lt&&(Lt=console.error);function Mt(e,n){return Pt(this,void 0,void 0,(function*(){const{websiteId:i,notificationId:o,notificationData:r,isReportEnabled:a,version:s,najvaTokenFromNotificationPayload:c}=n,u=yield Ct(c),{title:d,options:l}=xt(r,u,a);return a&&jt(2)((()=>(({websiteId:e,notificationId:n,najvaToken:i,version:o})=>t(`${Dt}/deliver?website_id=${e}&notif_id=${n}&sub_id=${i}&version=${o}`,{credentials:"include"}))({websiteId:i,notificationId:o,najvaToken:u,version:s}))),e.showNotification(d,l).then((()=>{a&&jt(2)((()=>(({websiteId:e,notificationId:n,najvaToken:i,version:o})=>t(`${Dt}/show?website_id=${e}&notif_id=${n}&sub_id=${i}&version=${o}`,{credentials:"include"}))({websiteId:i,notificationId:o,najvaToken:u,version:s})))})).catch(Lt)}))}var Rt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function Bt(e){if(document.hidden)return;const t=Se().messaging();t&&t.onMessage((t=>Rt(this,void 0,void 0,(function*(){yield function(e,t){var n,i,o,r;return Rt(this,void 0,void 0,(function*(){yield Mt(t,{websiteId:(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.website_id)||"",notificationId:(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.notification_id)||"",notificationData:(null==e?void 0:e.data)||{},isReportEnabled:"true"===(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.is_report_enabled),version:"1.13.23",najvaTokenFromNotificationPayload:null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.najva_token})}))}(t,e)}))))}let $t,Ut={website_id:0,api_key:"",isNativeMode:!1};function Ft(e,t){Ut=e,$t=t,Nt(),Ut.isNativeMode&&Bt($t),function(e,t){window.addEventListener("message",(n=>Rt(this,void 0,void 0,(function*(){if(n.data.api_key===t&&n.data.website_id===e){const e=n.data.cookie_token,t=n.data.najva_token;e&&t&&(yield R(j.Cookie,e,(new Date).toISOString()),yield R(j.Najva,t,(new Date).toISOString()),n.data.subscribe&&window.najvaUserSubscribed&&window.najvaUserSubscribed(e))}}))),!1)}(Ut.website_id,Ut.api_key)}const Wt={STATIC_IMAGES:"https://app.najva.com/static/images",BASE:"https://api.najva.com"};var Kt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function zt(e,t=1){return Kt(this,void 0,void 0,(function*(){return new Promise((n=>{let i=!1;const o=()=>{i&&window.removeEventListener("scroll",o),function(){const e=document.documentElement,t=document.body,n="scrollTop",i="scrollHeight";return(e[n]||t[n])/((e[i]||t[i])-window.innerHeight)*100}()>e.scroll.value&&(i=!0,n(!0))};e.visit.maximum.enable||e.visit.minimum.enable||e.visit.interval.enable?(e.visit.minimum.enable||(e.visit.minimum.value=1),e.visit.maximum.enable||(e.visit.maximum.value=1e5),e.visit.interval.enable||(e.visit.interval.value=1),t>=e.visit.minimum.value&&t<=e.visit.maximum.value&&(t-e.visit.minimum.value)%e.visit.interval.value==0&&(e.delay.enable||e.scroll.enable?(e.scroll.enable&&window.addEventListener("scroll",o),e.delay.enable&&setTimeout((()=>{n(!0)}),1e3*e.delay.value)):n(!0))):e.delay.enable||e.scroll.enable?(e.scroll.enable&&window.addEventListener("scroll",o),e.delay.enable&&setTimeout((()=>{n(!0)}),1e3*e.delay.value)):n(!0)}))}))}var Gt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let Vt={website_id:"",api_key:"",without_popup:!1,request_permission:{delay:{enable:0,value:0},scroll:{enable:0,value:0},visit:{minimum:{enable:0,value:0},maximum:{enable:0,value:0},interval:{enable:0,value:0}}}};function Ht(e){window.addEventListener("najva-subscription-end",e)}function qt(t,n){return Gt(this,void 0,void 0,(function*(){const{value:i}=yield B(j.Firebase),{value:o}=yield B(j.Najva),{value:a}=yield B(j.Cookie),s=yield function(){return Qe(this,void 0,void 0,(function*(){const e=Se().messaging();try{const t=yield e.getToken();if(!t)throw u(r.FIREBASE_TOKEN_UPDATE_FAILED,{firebaseErrorMessage:"empty firebase token"});return t}catch(e){throw u(r.FIREBASE_REGISTRAION_FAILED,{firebaseErrorMessage:e.message,error:e})}}))}();i===s&&o&&a||(yield function(t,n,i){return Gt(this,void 0,void 0,(function*(){const{value:o}=yield B(j.Cookie),{value:r}=yield B(j.Najva),a={token_id:t,website_id:n,api_key:i};r&&(a.najva_token=r),o&&(a.cookie_token=o);const{cookie_token:s,najva_token:c,status:u,detail:d}=yield e(`${Wt.BASE}/api/v1/add/`,{method:"POST",body:new URLSearchParams(a),headers:{"Content-type":"application/x-www-form-urlencoded"},credentials:"include"});(u&&"failure"!==u||"fail to subscribe"===d)&&(yield R(j.Firebase,t,(new Date).toISOString()),s&&(yield R(j.Cookie,s,(new Date).toISOString()),window.najvaUserSubscribed&&window.najvaUserSubscribed(s)),c&&(yield R(j.Najva,c,(new Date).toISOString())))}))}(s,t,n),function(){const e=new CustomEvent("najva-subscription-end");window.dispatchEvent(e)}())}))}function Yt(){return Gt(this,void 0,void 0,(function*(){return new Promise((e=>Gt(this,void 0,void 0,(function*(){(yield At())?(yield kt(),e()):(yield Ot())?(yield qt(Vt.website_id,Vt.api_key),e()):e()}))))}))}function Xt(e){return Gt(this,void 0,void 0,(function*(){if(Vt=e,function(e){window.addEventListener(gt.NOTIF_ACCESS_GRANTED,e)}((()=>Gt(this,void 0,void 0,(function*(){yield qt(Vt.website_id,Vt.api_key)})))),yield Ot())yield qt(Vt.website_id,Vt.api_key);else if(Vt.without_popup){const t=yield ve(_.VisitCount);yield zt(e.request_permission,t?Number(t):1),yield Yt()}}))}var Jt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let Zt={website_id:"",campaign_id:"",api_key:"",najva_subdomain:"",without_popup:!1,isNativeMode:!1,request_permission:{delay:{enable:0,value:0},scroll:{enable:0,value:0},visit:{minimum:{enable:0,value:0},maximum:{enable:0,value:0},interval:{enable:0,value:0}}}};function Qt(){return Jt(this,void 0,void 0,(function*(){Zt.isNativeMode?yield Yt():bt()}))}function en(){return Jt(this,void 0,void 0,(function*(){const e=yield B(j.Firebase),t=yield B(j.Cookie),n=yield B(j.Najva);return Boolean(e&&t&&n)}))}var tn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let nn={najva_subdomain:"",website_id:""};function on(e,t){return tn(this,void 0,void 0,(function*(){if(!document.querySelector("#najva-cmif")){const n=ft(`<iframe id="najva-cmif" style="display: none!important;" src="${e}cmif/?website_id=${t}"></iframe>`);n&&document.body.appendChild(n),yield _e(_.LastCookieMatchingSent,(new Date).toISOString())}}))}function rn(e){return tn(this,void 0,void 0,(function*(){nn=e,(yield function(){return tn(this,void 0,void 0,(function*(){const e=yield ve(_.LastCookieMatchingSent);return!!e&&pt((new Date).getTime(),new Date(e).getTime())<7}))}())||(yield en())&&(yield on(nn.najva_subdomain,nn.website_id)),Ht((()=>tn(this,void 0,void 0,(function*(){yield on(nn.najva_subdomain,nn.website_id)}))))}))}var an=n(1296);const sn="najva_location_access_granted";var cn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};const un="granted";function dn(){const e={enableHighAccuracy:!0,maximumAge:0},t=e=>{!function(e){const t=new CustomEvent(sn,{detail:e});window.dispatchEvent(t)}(e)};"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t,void 0,e)}var ln=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};const fn=n.n(an)()((function(t){return ln(this,void 0,void 0,(function*(){if(!t)return;const{coords:n}=t,i={accuracy:n.accuracy,altitude:n.altitude,latitude:n.latitude,longitude:n.longitude};try{yield e(`${Wt.BASE}/api/v1/location/`,{method:"POST",body:JSON.stringify(i),credentials:"include",headers:{"Content-Type":"application/json"}})}catch(e){throw u(r.SEND_LOCATION_FAILED,{errorStatus:e})}}))}),1e3);function pn(e){return ln(this,void 0,void 0,(function*(){e.location_permission&&"geolocation"in navigator&&"permissions"in navigator&&(e.isNativeMode&&(yield function(){return cn(this,void 0,void 0,(function*(){if("permissions"in navigator){const e=yield navigator.permissions.query({name:"geolocation"});return"state"in e&&e.state===un}return!1}))}())&&(yield en())&&dn(),function(){cn(this,void 0,void 0,(function*(){"permissions"in navigator&&((yield navigator.permissions.query({name:"geolocation"})).onchange=function(){this.state===un&&dn()})}))}(),Ht((()=>dn())),function(e){window.addEventListener(sn,e,!1)}((e=>{e.detail&&fn(e.detail)})))}))}var hn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};const vn="najva-messaging-sw.js";function _n(e){return hn(this,void 0,void 0,(function*(){try{["/","/firebase-cloud-messaging-push-scope"].forEach((e=>{navigator.serviceWorker.getRegistration(e).then((e=>{var t,n;(null===(n=null===(t=null==e?void 0:e.active)||void 0===t?void 0:t.scriptURL)||void 0===n?void 0:n.includes(vn))&&e.unregister()})).catch((e=>{throw u(r.SW_UNREGISTRATION_FAILED,{error:e})}))}))}catch(e){}try{return yield navigator.serviceWorker.register(e.sw_path+vn,{scope:e.sw_path+"najva-messaging-scope",updateViaCache:"none"})}catch(e){throw u(r.SW_REGISTRATION_FAILED,{browserErrorMessage:e.message,error:e})}}))}var mn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let bn={website_id:"",api_key:"",campaign_id:""};function gn(){return mn(this,void 0,void 0,(function*(){yield function(){return mn(this,void 0,void 0,(function*(){let e=yield ve(_.VisitCount);e||(e=0),e=parseInt(e.toString()),yield _e(_.VisitCount,e+1)}))}();try{yield function(t){return mn(this,void 0,void 0,(function*(){try{const n=yield ve(_.LastCurrentUserAPICalled);n&&n===(new Date).toLocaleDateString()||(yield _e(_.LastCurrentUserAPICalled,(new Date).toLocaleDateString()),yield e("https://cr.najva.com/api/v2/current/user/",{method:"POST",body:new URLSearchParams({website:t}),headers:{"Content-type":"application/x-www-form-urlencoded"},credentials:"include"}))}catch(e){throw u(r.UPDATE_USER_ACTIVITY_FAILED,{browserErrorMessage:e.message,error:e})}}))}(bn.website_id),yield function(){return mn(this,void 0,void 0,(function*(){yield _e(_.LastActiveTime,(new Date).toISOString())}))}()}catch(e){}}))}var yn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let wn={website_id:""};function En(t){return yn(this,void 0,void 0,(function*(){try{if(yield en()){const n=yield e(`${Wt.BASE}/api/v2/subscriber/tag/`,{method:"POST",body:JSON.stringify({website_id:wn.website_id,tags:t}),headers:{"Content-Type":"application/json"},credentials:"include"}),{message:i}=n;"not found"!==i&&(yield Promise.all(Object.keys(t).map((e=>yn(this,void 0,void 0,(function*(){return J(e,t[e],(new Date).toISOString())}))))))}}catch(e){throw u(r.ADD_ATTRIBUTE_FAILED,{object:t,error:e})}}))}function Tn(){return yn(this,void 0,void 0,(function*(){try{const t=yield e(`${Wt.BASE}/api/v2/subscriber/tag/?website_id=${wn.website_id}`,{method:"GET",credentials:"include"}),{message:n}=t,{tags:i}=t;return"not found"===n||null===i?{}:i}catch(e){throw u(r.GET_ATTRIBUTES_FAILED,{error:e})}}))}function In(t){return yn(this,void 0,void 0,(function*(){try{const n=yield e(`${Wt.BASE}/api/v2/subscriber/tag/`,{method:"DELETE",body:JSON.stringify({website_id:wn.website_id,key:t}),headers:{"Content-Type":"application/json"},credentials:"include"}),{message:i}=n,{tags:o}=n;return"not found"!==i&&(yield function(e){return X(this,void 0,void 0,(function*(){try{const t=(yield pe()).transaction(Y,"readwrite");yield t.store.delete(e),yield t.done}catch(t){throw u(r.DB_READ_FAILED,{key:e,objectStoreName:Y,browserErrorMessage:t.message,error:t})}}))}(t)),o||[]}catch(e){throw u(r.DELETE_ATTRIBUTE_FAILED,{key:t,error:e})}}))}function Sn(){let e=!1;var t;return t=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0),e}var kn=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i},Nn=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},On=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},An=function(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},Dn=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Pn=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Ln=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,xn=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Cn=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function jn(e){return e?Rn(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Pn:"undefined"!=typeof navigator?Rn(navigator.userAgent):"undefined"!=typeof process&&process.version?new On(process.version.slice(1)):null}function Mn(e){return""!==e&&xn.reduce((function(t,n){var i=n[0],o=n[1];if(t)return t;var r=o.exec(e);return!!r&&[i,r]}),!1)}function Rn(e){var t=Mn(e);if(!t)return null;var n=t[0],i=t[1];if("searchbot"===n)return new Dn;var o=i[1]&&i[1].split(/[._]/).slice(0,3);o?o.length<3&&(o=kn(o,function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-o.length))):o=[];var r=o.join("."),a=function(e){for(var t=0,n=Cn.length;t<n;t++){var i=Cn[t],o=i[0];if(i[1].exec(e))return o}return null}(e),s=Ln.exec(e);return s&&s[1]?new An(n,r,a,s[1]):new Nn(n,r,a)}function Bn(){const e=jn();return!!e&&"firefox"===e.name}function $n(){const e=jn();return e?e.version:null}var Un,Fn,Wn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function Kn(){return Wn(this,void 0,void 0,(function*(){if(function(){const e=window.navigator.userAgent.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;const t=/(?:msie|rv:)\s?([\d.]+)/.exec(e);return!!(t&&parseInt(t[1],10)>=10)}())return function(){try{return!window.indexedDB}catch(e){return!1}}();if(Bn())try{return yield function(){return Wn(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{window.indexedDB||e();try{const n=window.indexedDB.open("test");n.onerror=()=>{e()},n.onsuccess=()=>{t()}}catch(t){e()}}))}))}(),!0}catch(e){return!1}else{if(function(){const e=jn();return!!e&&"safari"===e.name}())return function(){try{return window.localStorage.setItem("test","1"),!1}catch(e){return!0}}();if(function(){const e=jn();return!!e&&"chrome"===e.name}())try{return yield function(){return Wn(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{"storage"in navigator&&"estimate"in navigator.storage&&navigator.storage.estimate().then((({quota:n})=>{n&&n<12e7&&e(),t()}));const n=window.RequestFileSystem||window.webkitRequestFileSystem;n?n(window.TEMPORARY,100,(()=>{t()}),(()=>{e()})):e()}))}))}(),!0}catch(e){return!1}}return!1}))}!function(e){e.POPUP_BUTTON="najva-popup-button"}(Un||(Un={})),function(e){e.POPUP="najva-popup",e.POPUP_IMAGE_WRAPPER="najva-popup-image-wrapper",e.POPUP_IMAGE="najva-popup-image",e.POPUP_BODY_WRAPPER="najva-popup-body-wrapper",e.POPUP_TEXT="najva-popup-text",e.POPUP_DESCRIPTION="najva-popup-description",e.POPUP_BUTTON_WRAPPER="najva-popup-button-wrapper",e.POPUP_REJECT_BUTTON="najva-popup-reject-button",e.POPUP_ACCEPT_BUTTON="najva-popup-accept-button"}(Fn||(Fn={}));let zn=!1;var Gn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let Vn={request_icon:"",request_text:"",request_description:"",denied_text:"",accept_text:"",without_popup:!0,with_popup:!0,dismiss_cookie_days:0,isNativeMode:!1,request_permission:{delay:{enable:1,value:5},scroll:{enable:0,value:50},visit:{minimum:{enable:1,value:1},maximum:{enable:0,value:24},interval:{enable:0,value:3}}}};function Hn(){const e=document.getElementById(Fn.POPUP);e&&e.classList.add(it)}function qn(){!function(e){if(!document.getElementById(Fn.POPUP)){const t=ft(`\n    <div id="${Fn.POPUP}" class="${it}">\n        <div id="${Fn.POPUP_IMAGE_WRAPPER}">\n            <img id="${Fn.POPUP_IMAGE}" src="${e.request_icon}">\n        </div>\n        <div id="${Fn.POPUP_BODY_WRAPPER}" class="${at}">\n            <p id="${Fn.POPUP_TEXT}">${e.request_text}</p>\n            ${e.request_description?`<p id="${Fn.POPUP_DESCRIPTION}">${e.request_description}</p>`:""}\n            <div id="${Fn.POPUP_BUTTON_WRAPPER}" class="${ot}">\n                <button id="${Fn.POPUP_REJECT_BUTTON}" class="${Un.POPUP_BUTTON}">\n                    ${e.denied_text}\n                </button>\n                <button id="${Fn.POPUP_ACCEPT_BUTTON}" class="${Un.POPUP_BUTTON}">\n                    ${e.accept_text}\n                </button>\n            </div>\n        </div>\n    </div>\n`);t&&document.body.appendChild(t)}}(Vn);const e=document.getElementById(Fn.POPUP_ACCEPT_BUTTON),t=document.getElementById(Fn.POPUP_REJECT_BUTTON);e&&e.addEventListener("click",(()=>Gn(this,void 0,void 0,(function*(){Hn(),yield Qt()})))),t&&t.addEventListener("click",(()=>Gn(this,void 0,void 0,(function*(){Hn(),ai(),yield q(G.Reject,!0)}))))}function Yn(){return Gn(this,void 0,void 0,(function*(){const e=yield function(){return Gn(this,void 0,void 0,(function*(){let e=yield H(G.ShownCount);return e||(e=0),e}))}();yield q(G.ShownCount,e+1)}))}function Xn(){return Gn(this,void 0,void 0,(function*(){!function(e){if(zn)return;zn=!0,dt(`\n    #${Fn.POPUP} {\n        z-index: ${st};\n        -webkit-box-shadow: 0 1px 8px 0 rgba(0,0,0,.2), 0 3px 4px 0 rgba(0,0,0,.14), 0 3px 3px -2px rgba(0,0,0,.12) !important;\n        box-shadow: 0 1px 8px 0 rgba(0,0,0,.2), 0 3px 4px 0 rgba(0,0,0,.14), 0 3px 3px -2px rgba(0,0,0,.12) !important;\n        direction: rtl;\n        position: fixed;\n        ${e.with_popup?"top: 10px;left: 15px;":""}\n        width: 500px;\n        top: 0px;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        -ms-transform: translateX(-50%);\n        transform: translateX(-50%);\n        background-color: #fff;\n        border-bottom-right-radius: 4px;\n        border-bottom-left-radius: 4px;\n        border: 1px solid #eaeaea;\n        -webkit-transition: opacity 0.5s, visibility 0.5s;\n        -o-transition: opacity 0.5s, visibility 0.5s;\n        transition: opacity 0.5s, visibility 0.5s;\n    }\n\n    #${Fn.POPUP_IMAGE_WRAPPER} {\n        width: 25%;\n        position: absolute;\n        top: 50%;\n        -webkit-transform: translateY(-50%);\n        -ms-transform: translateY(-50%);\n        transform: translateY(-50%);\n        text-align: center;\n    }\n\n    #${Fn.POPUP_IMAGE} {\n        width: 75%;\n        height: auto;\n        vertical-align: middle;\n        margin: auto;\n    }\n\n    #${Fn.POPUP_BODY_WRAPPER} {\n        margin-right: 25%;\n        border-right: 1px solid #eaeaea;\n        padding: 10px;\n        font-size: 1.1em;\n        line-height: 1.2em;\n    }\n \n    #${Fn.POPUP_TEXT} {\n        margin: 0;\n        line-height: 1.5em;\n        color: #000;\n        font-size: 1em;\n    }\n\n    #${Fn.POPUP_DESCRIPTION} {\n        font-size: 0.8em;\n        color: gray;\n        margin:0;\n    }\n\n    #${Fn.POPUP_BUTTON_WRAPPER} {\n        margin-top: 7px;\n    }\n\n    .${Un.POPUP_BUTTON} {\n        -webkit-appearance: button;\n        text-transform: none;\n        overflow: visible;\n        margin: 0;\n        font-family: inherit;\n        display: inline-block;\n        font-weight: 400;\n        text-align: center;\n        white-space: nowrap;\n        vertical-align: middle;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        border: 1px solid transparent;\n        padding: .375rem 1rem;\n        font-size: 1.2em;\n        line-height: 1.5;\n        border-radius: .25rem;\n        transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n        -webkit-transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n        -o-transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n        background: initial;\n    }\n\n    #${Fn.POPUP_REJECT_BUTTON}:hover {\n        background-color: #e2e6ea !important;\n        border-color: #dae0e5 !important;\n    }\n\n    #${Fn.POPUP_REJECT_BUTTON} {\n        color: #212529 !important;\n        background-color: #f8f9fa !important;\n        border-color: #f8f9fa !important; \n    }\n\n    #${Fn.POPUP_ACCEPT_BUTTON} {\n        color: #fff !important;\n        background-color: #007bff !important;\n        border-color: #007bff !important;\n    }\n\n    #${Fn.POPUP_ACCEPT_BUTTON}:hover {\n        background-color: #0069d9 !important;\n        border-color: #0062cc !important;\n        text-decoration: none;\n    }\n\n    @media screen and (max-width: 767px) {\n      #${Fn.POPUP} {\n          width: 100%;\n          top: auto;\n          bottom: 0;\n          left:0;\n          -webkit-transform: none;\n          -ms-transform: none;\n          transform: none;\n          border-bottom-right-radius: 0;\n          border-bottom-left-radius: 0;\n          border-top-right-radius: 10px;\n          border-top-left-radius: 10px;\n      }\n\n      #${Fn.POPUP_BODY_WRAPPER}{\n          font-size: 15px;\n      }\n\n      .${Un.POPUP_BUTTON} {\n          width: 100px;\n          font-size: 1em\n      }\n\n      #${Fn.POPUP_BUTTON_WRAPPER} {\n          text-align: center;\n          float: inherit;\n      } \n    }\n  `)}(Vn),oi(it),qn(),function(){const e=document.getElementById(Fn.POPUP);e&&e.classList.remove(it)}(),yield q(G.LastShownTime,(new Date).toISOString()),yield Yn()}))}function Jn(){return Gn(this,void 0,void 0,(function*(){const e=yield At(),t=yield ve(_.HasNajvaSubscriptionWindowOpened);if(Vn.isNativeMode&&!e||!Vn.isNativeMode&&"string"==typeof t&&"true"===t||Vn.without_popup)return!1;const n=yield H(G.LastShownTime);if(!n)return!0;if(!(yield H(G.Reject)))return!0;return pt((new Date).getTime(),new Date(n).getTime())>Vn.dismiss_cookie_days}))}let Zn=!1;var Qn;!function(e){e.BELL="najva-bell",e.BELL_IMAGE_WRAPPER="najva-bell-image-wrapper",e.BELL_IMAGE="najva-bell-image",e.BELL_DENIED_HELP="najva-bell-denied-help",e.BELL_DENIED_HELP_CLOSE="najva-bell-denied-help-close",e.BELL_DENIED_HELP_IMAGE="najva-bell-denied-help-image"}(Qn||(Qn={}));let ei=!1;function ti(e){if(ei)return;ei=!0,function(){if(Zn)return;dt("\n      [najvatooltip] {\n        margin: 20px 60px;\n        position: relative;\n        display: inline-block;\n        font-family: inherit;\n    }\n\n    [najvatooltip]::before {\n        content: \"\";\n        position: absolute;\n        top: -6px;\n        left: 50%;\n        transform: translateX(-50%);\n        border-width: 4px 6px 0 6px;\n        border-style: solid;\n        border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent;\n        z-index: 99;\n        opacity: 0;\n    }\n\n    [najvatooltip-position='left']::before {\n        left: 0%;\n        top: 50%;\n        margin-left: -12px;\n        transform: translatey(-50%) rotate(-90deg)\n    }\n\n    [najvatooltip-position='top']::before {\n        left: 50%;\n    }\n\n    [najvatooltip-position='buttom']::before {\n        top: 100%;\n        margin-top: 8px;\n        transform: translateX(-50%) translatey(-100%) rotate(-180deg)\n    }\n\n    [najvatooltip-position='right']::before {\n        left: 100%;\n        top: 50%;\n        margin-left: 1px;\n        transform: translatey(-50%) rotate(90deg)\n    }\n\n    [najvatooltip]::after {\n        content: attr(najvatooltip);\n        position: absolute;\n        left: 50%;\n        top: -6px;\n        transform: translateX(-50%) translateY(-100%);\n        background: rgba(0, 0, 0, 0.7);\n        text-align: center;\n        color: #fff;\n        padding: 4px 2px;\n        font-size: 12px;\n        min-width: 80px;\n        border-radius: 5px;\n        pointer-events: none;\n        padding: 4px 4px;\n        z-index: 99;\n        opacity: 0;\n    }\n\n    [najvatooltip-position='left']::after {\n        left: 0%;\n        top: 50%;\n        margin-left: -8px;\n        transform: translateX(-100%) translateY(-50%);\n    }\n\n    [najvatooltip-position='top']::after {\n        left: 50%;\n    }\n\n    [najvatooltip-position='buttom']::after {\n        top: 100%;\n        margin-top: 8px;\n        transform: translateX(-50%) translateY(0%);\n    }\n\n    [najvatooltip-position='right']::after {\n        left: 100%;\n        top: 50%;\n        margin-left: 8px;\n        transform: translateX(0%) translateY(-50%);\n    }\n\n    [najvatooltip]:hover::after, [najvatooltip]:hover::before {\n        opacity: 1\n    }\n  "),Zn=!0}();let t=`\n      #${Qn.BELL} {\n        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, .06), 0 2px 32px rgba(0, 0, 0, .16) !important;\n        box-shadow: 0 1px 6px rgba(0, 0, 0, .06), 0 2px 32px rgba(0, 0, 0, .16) !important;\n        max-width: initial;\n        z-index: ${st};\n        position: fixed;\n        width: 50px;\n        height: 50px;\n\n        bottom: 30px;\n        cursor: pointer;\n        background-color: transparent;\n        border-radius: 50%;\n        -webkit-transition: background-color 0.7s;\n        -o-transition: background-color 0.7s;\n        transition: background-color 0.7s;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n    }\n\n    #${Qn.BELL_IMAGE_WRAPPER} {\n        padding: 0;\n        margin: 0;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n        text-align: center;\n        /*background-color: #444;*/\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        -webkit-transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n        transform: translate(-50%, -50%);\n        -webkit-transition: width 0.3s, height 0.3s;\n        -o-transition: width 0.3s, height 0.3s;\n        transition: width 0.3s, height 0.3s;\n  }\n\n    #${Qn.BELL_IMAGE} {\n        width: 40px;\n        height: 40px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        max-width: initial;\n        -webkit-transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n        transform: translate(-50%, -50%);\n        border: 2px solid #fff;\n        border-radius: 50%;\n        padding: 5px;\n        -webkit-transition: width 0.3s, height 0.3s;\n        -o-transition: width 0.3s, height 0.3s;\n        transition: width 0.3s, height 0.3s;\n  }\n\n    #${Qn.BELL}:hover #${Qn.BELL_IMAGE_WRAPPER} {\n        width: 20px;\n        height: 20px;\n    }\n\n    #${Qn.BELL}:hover #${Qn.BELL_IMAGE} {\n        width: 50px;\n        height: 50px;\n        border-color: transparent;\n    }\n\n    #${Qn.BELL} {\n        ${e.bell_direction}: 30px;\n    }\n\n    #${Qn.BELL}:hover {\n        background-color: ${e.bell_color_hover};\n    }\n\n    #${Qn.BELL_IMAGE_WRAPPER} {\n        background-color: ${e.bell_color};\n    }\n\n    #${Qn.BELL_DENIED_HELP_CLOSE}{\n        position: absolute;\n        top: 0;\n        right: 0;\n        padding: 2px 4px;\n        color: gray;\n        cursor: pointer;\n        border: 1px solid #d6d6d6;\n        border-top-right-radius: 5px;\n        font-size: 15px;\n        font-family: arial;\n    }\n\n    #${Qn.BELL_DENIED_HELP}{\n        z-index: ${st};\n        position: fixed;\n        bottom: 110px;\n        ${e.bell_direction}: 30px;\n        background: white;\n        padding: 25px 15px 15px;\n        color: #000;\n        direction: rtl;\n        border-radius: 5px;\n        width:230px;\n    }\n\n  @media screen and (max-width: 767px) {\n      #${Qn.BELL} {\n        width: 4em;\n        height: 4em;\n        margin:0;\n    }\n\n    #${Qn.BELL_IMAGE} {\n        width: 3em;\n        height: 3em;\n    }\n\n    #${Qn.BELL}:hover #${Qn.BELL_IMAGE_WRAPPER} {\n        width: 1em;\n        height: 1em;\n    }\n\n    #${Qn.BELL}:hover #${Qn.BELL_IMAGE} {\n        width: 4em;\n        height: 4em;\n    }\n  \n    #${Qn.BELL_IMAGE_WRAPPER} {\n        width: 4em;\n        height: 4em;\n    }\n  }\n\n  `;e.show_bell_in_mobile||(t+=`\n    @media screen and (max-width: 768px) {\n        #${Qn.BELL} {\n            visibility: hidden!important;\n            opacity: 0!important;\n        }\n    }`),dt(t)}var ni=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let ii={show_bell:1,show_bell_in_mobile:1,bell_direction:"right",tooltip_direction:"left",bell_color_hover:"#7a7a7a",bell_color:"#444444",bell_tooltip:"",without_popup:!0,isNativeMode:!1};function oi(e){const t=document.getElementById(Qn.BELL);t&&t.classList.add(e)}function ri(e){const t=document.getElementById(Qn.BELL);t&&t.classList.remove(e)}function ai(){ri(it)}function si(){var e;let t=document.getElementById(Qn.BELL_DENIED_HELP);if(!t){const e=ft(`\n    <div\n        id="${Qn.BELL_DENIED_HELP}"\n        class="${it}"\n    >\n        <span id="${Qn.BELL_DENIED_HELP_CLOSE}">x</span>\n        <p>\n                   .         .\n        </p>\n        <img id="${Qn.BELL_DENIED_HELP_IMAGE}" src="${Sn()?`${Wt.STATIC_IMAGES}/android-chrome-denied-help.png`:Bn()?`${Wt.STATIC_IMAGES}/firefox-denied-help.png`:`${Wt.STATIC_IMAGES}/chrome-denied-help.png`}"\n           height="${Sn()?319:Bn()?112:274}"\n           width="230"\n           alt="notif denied help image"\n        >\n    </div>\n`);e&&document.body.appendChild(e)}t=document.getElementById(Qn.BELL_DENIED_HELP),null===(e=document.getElementById(Qn.BELL_DENIED_HELP_CLOSE))||void 0===e||e.addEventListener("click",(()=>{t&&t.classList.add(it)}),!1)}function ci(){const e=document.getElementById(Qn.BELL),t=document.getElementById(Qn.BELL_DENIED_HELP);e&&(e.onclick=function(){return ni(this,void 0,void 0,(function*(){const e=yield function(){return yt(this,void 0,void 0,(function*(){return(yield St())===Et}))}();var n;ii.isNativeMode&&e?t&&((n=t)&&(n.classList.contains(it)?n.classList.remove(it):n.classList.add(it))):ii.without_popup?Qt():yield Xn()}))})}function ui(e){si(),function(e){if(ti(e),!document.getElementById(Qn.BELL)){const t=ft(`\n    <div\n        id="${Qn.BELL}"\n        najvatooltip="${e.bell_tooltip}"\n        najvatooltip-position="${e.tooltip_direction}"\n        class="${it}"\n    >\n        <div id="${Qn.BELL_IMAGE_WRAPPER}">\n            <img\n                id="${Qn.BELL_IMAGE}"\n                src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUzIDUzIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MyA1MzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjY0cHgiPjxwYXRoIHN0eWxlPSJmaWxsOiNFN0VDRUQ7IiBkPSJNMTIuODIxLDQ2LjYzOGMxMC43MDEsMS44NDcsMTYuNjU5LDEuODQ3LDI3LjM2LDBMNDkuNjcxLDQ1bDAsMGMtNC42ODUtNC42NTctNy4zMTctMTAuNDE1LTcuMzE3LTE3ICB2LTljMC4wMzgtNi4wNDctMy45NTctMTAuNDc4LTcuOTQ2LTEyLjMwMWMtNC45OTktMi4yODUtMTAuODE1LTIuMjk0LTE1LjgwNiwwLjAwOEMxNC42NDgsOC41MywxMC4zNjcsMTIuOTU4LDEwLjMyOSwxOXY5ICBjMCw2LjU4NS0yLjMxNSwxMi4zNDMtNywxN2wwLDBMMTIuODIxLDQ2LjYzOHoiLz48cGF0aCBzdHlsZT0iZmlsbDojRkZGRkZGOyIgZD0iTTE1LjMyOSwyMGMtMC4wMDIsMC0wLjAwNCwwLTAuMDA2LDBjLTAuNTUyLTAuMDA0LTAuOTk3LTAuNDU0LTAuOTk0LTEuMDA2ICBjMC4wMy00LjY4MiwzLjc1Mi03LjY0Myw1Ljk0OC04LjY1NGMzLjg0OS0xLjc3NSw4LjU5NC0xLjc3MiwxMi40NjktMC4wMDJjMC41MDIsMC4yMjksMC43MjMsMC44MjIsMC40OTQsMS4zMjUgIGMtMC4yMywwLjUwMi0wLjgyMywwLjcyNC0xLjMyNiwwLjQ5M2MtMy4zNTMtMS41MzMtNy40NjktMS41MzctMTAuNzk5LDBjLTEuNzY3LDAuODE0LTQuNzYyLDMuMTczLTQuNzg1LDYuODUgIEMxNi4zMjYsMTkuNTU3LDE1Ljg3OSwyMCwxNS4zMjksMjB6Ii8+PHBhdGggc3R5bGU9ImZpbGw6I0M3Q0FDNzsiIGQ9Ik0zMC4zMjksNS4zODFWNGMwLTIuMjA5LTEuNzkxLTQtNC00cy00LDEuNzkxLTQsNHYxLjQ1M0MyNC45NTgsNC44NjIsMjcuNjksNC44NDEsMzAuMzI5LDUuMzgxeiIvPjxwYXRoIHN0eWxlPSJmaWxsOiNDN0NBQzc7IiBkPSJNMTguMjM1LDQ3LjQ2YzEuNDQ1LDMuMjY4LDQuNjAyLDUuNTQsOC4yNzcsNS41NGMzLjY3NiwwLDYuODM0LTIuMjczLDguMjc4LTUuNTQzICBDMjguODYyLDQ4LjIwOSwyNC4xNTksNDguMjEsMTguMjM1LDQ3LjQ2eiIvPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg=="\n            />\n        </div>\n    </div>\n`);t&&document.body.appendChild(t),ci()}}(e),ai()}function di(e){return ni(this,void 0,void 0,(function*(){if(ii=e,Boolean(ii.show_bell)||Boolean(ii.show_bell_in_mobile)){const e=yield ve(_.HasNajvaSubscriptionWindowOpened),t=yield Ot();(ii.isNativeMode&&!t||!ii.isNativeMode&&("string"!=typeof e||"true"!==e))&&ui(ii),function(e){window.addEventListener(gt.NOTIF_ACCESS_DENIED,e)}((()=>{ui(ii)}))}}))}var li,fi;!function(e){e.BACKDROP_CONTAINER="najva-backdrop-container",e.HIDDEN_IN_BACKDROP="najva-hidden-in-backdrop",e.BACKDROP_TEXT_CONTAINER_DOWN="najva-backdrop-text-container-down",e.BACKDROP_TEXT="najva-backdrop-text"}(li||(li={})),function(e){e.BACKDROP="najva-backdrop",e.BACKDROP_CLOSE="najva-backdrop-close",e.BACKDROP_TEXT_CONTAINER="najva-backdrop-text-container",e.BACKDROP_ARROW="najva-backdrop-arrow",e.DENIED_HELP_BACKDROP="najva-denied-help-backdrop",e.DENIED_HELP_CLOSE="najva-denied-help-close",e.DENIED_HELP_IMAGE="najva-denied-help-img"}(fi||(fi={}));let pi=!1;function hi(){if(pi)return;pi=!0;dt(`\n    #${fi.BACKDROP}{\n        position:fixed;\n        top:0;\n        left:0;\n        width: 100vw;\n        height: 100vh;\n        z-index: ${st};\n        background-color: #000;\n        opacity: 0.8;\n    }\n\n    #${fi.BACKDROP_TEXT_CONTAINER}{\n        direction: rtl;\n        display: flex;\n        max-width: 600px;\n        z-index: 2147483645;\n        margin: 200px auto;\n        position: fixed;\n        right: 0;\n        left: 0;\n        top: 0;\n    }\n\n    #${fi.BACKDROP_TEXT_CONTAINER}.${li.BACKDROP_TEXT_CONTAINER_DOWN}{\n        margin: 250px auto;\n    }\n\n    #${fi.BACKDROP_TEXT_CONTAINER} .${li.BACKDROP_TEXT}{\n        direction: rtl;\n        z-index: ${st};\n        font-size: 30px;\n        font-weight: bold;\n        line-height: normal;\n        color: white;\n        font-family: inherit;\n        text-align: right;\n        display: flex;\n        align-items: flex-end;\n        max-width: 520px;\n        padding-left: 20px;\n    }\n\n    .${li.BACKDROP_TEXT_CONTAINER_DOWN} .${li.BACKDROP_TEXT}{\n        align-items: flex-start;\n    }\n\n    #${fi.BACKDROP_ARROW} {\n        flex-basis: 80px;\n        height: 160px;\n        background-size: contain;\n        transform: rotate(170deg);\n        background-image: url(${Wt.STATIC_IMAGES}/arrow-white.png);\n        background-repeat: no-repeat;\n    }\n\n    .${li.BACKDROP_TEXT_CONTAINER_DOWN} #${fi.BACKDROP_ARROW} {\n        transform: rotate(0deg);\n    }\n\n    #${fi.BACKDROP_CLOSE} {\n        position: fixed;\n        right: 20px;\n        top: 30px;\n        width: 55px;\n        height: 32px;\n        cursor: pointer;\n        z-index: ${st+1}\n    }\n\n    #${fi.BACKDROP_CLOSE}:before,#${fi.BACKDROP_CLOSE}:after  {\n        position: fixed;\n        right: 48px;\n        content: " ";\n        height: 33px;\n        width: 3px;\n        background-color: #ffffff;\n    }\n\n    #${fi.BACKDROP_CLOSE}:before {\n        transform: rotate(45deg);\n    }\n\n    #${fi.BACKDROP_CLOSE}:after {\n        transform: rotate(-45deg);\n    }\n\n    #${fi.DENIED_HELP_BACKDROP}{\n        position: fixed;\n        color: white;\n        font-family: inherit;\n        z-index:${st};\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        top: 30px;\n        margin: auto;\n        left: 0;\n        right: 0;\n    }\n\n    #${fi.DENIED_HELP_BACKDROP} p {\n        direction: rtl;\n        font-size: 1.5em;\n        font-weight: bold;\n    }\n\n    #${fi.DENIED_HELP_BACKDROP} #${fi.DENIED_HELP_CLOSE} {\n        color: white;\n        border: 1px solid white;\n        border-radius: 10px;\n        position: fixed;\n        top: 10px;\n        right: 10px;\n    }\n\n    .${li.HIDDEN_IN_BACKDROP}{\n        display: none;\n    }\n\n    @media screen and (max-width: 767px) {\n      #${fi.DENIED_HELP_BACKDROP} #${fi.DENIED_HELP_IMAGE} {\n          width: 90%;\n      }\n\n      #${fi.DENIED_HELP_BACKDROP} p {\n          text-align: justify;\n          padding: 1em;\n      }\n    }\n  `)}var vi,_i;function mi(){const e=document.getElementById(_i.POWERED_BY);e&&e.classList.add(it)}!function(e){e.POWERED_BY="najva-powered-by",e.POWERED_BY_UP="najva-powered-by-up"}(vi||(vi={})),function(e){e.POWERED_BY="najva-powered-by"}(_i||(_i={}));let bi=!1;function gi(e){if(e.notification_button_enabled)return;const t=document.querySelector(`.${li.BACKDROP_CONTAINER}`);if(!t)return;!function(){if(bi)return;bi=!0,dt(`\n  .${li.BACKDROP_CONTAINER} .${vi.POWERED_BY} {\n        direction: rtl;\n        display: flex;\n        flex-direction: row;\n        color: white;\n        width: 165px;\n        font-size: 12px;\n        align-items: center;\n        font-family: inherit;\n        cursor: pointer;\n        z-index: ${st};\n        position: fixed;\n        bottom: 10px;\n        right: 10px;\n    }\n\n    .${li.BACKDROP_CONTAINER} .${vi.POWERED_BY} img {\n        width: 50px;\n        height: 50px;\n        margin-right: -5px;\n        margin-top: -13px;\n\n    }\n    .${li.BACKDROP_CONTAINER} .${vi.POWERED_BY}.${vi.POWERED_BY_UP}{\n        top: 10px;\n        bottom: unset;\n        width: unset;\n    }\n  `)}();const n=ft(`\n  <div id="${_i.POWERED_BY}" class="${vi.POWERED_BY} ${Sn()?vi.POWERED_BY_UP:""}">\n      <span> </span>\n      <img src="${Wt.STATIC_IMAGES}/najva-flag-typography-white.svg">\n    </div>\n  `);n&&t.appendChild(n);const i=document.getElementById(_i.POWERED_BY);i&&i.addEventListener("click",(()=>{window.open("https://najva.com")}))}const yi="najva-backdrop-close";let wi={show_backdrop:!1,show_backdrop_mobile:!1,backdrop_text:"",website_policy:{notification_queue:1,notification_button_enabled:!1,use_najva_firebase_account:!1,notification_countdown:1,notification_blocked:!1,recommender_permission:!1,tag_enabled:!1,email_enabled:!1}};function Ei(){const e=$n();if(e){const t=e.split(".")[0];if(function(){const e=jn();return!!e&&"edge"===e.name}()&&Number(t)<=18)return!0}return!1}function Ti(){return document.querySelector(`.${li.BACKDROP_CONTAINER}`)}function Ii(){const e=Ti();e&&e.classList.add(li.HIDDEN_IN_BACKDROP)}function Si(){const e=Ti();if(e)e.classList.remove(li.HIDDEN_IN_BACKDROP);else{const e=ft(`<div class="${li.BACKDROP_CONTAINER}">\n        <div id=${fi.BACKDROP}></div>\n      </div>`);e&&document.body.appendChild(e)}}function ki(){oi(li.HIDDEN_IN_BACKDROP)}function Ni(){Ii(),mi(),function(){const e=document.getElementById(fi.BACKDROP_TEXT_CONTAINER);e&&e.classList.add(li.HIDDEN_IN_BACKDROP)}(),function(){const e=document.getElementById(fi.BACKDROP_CLOSE);e&&e.classList.add(li.HIDDEN_IN_BACKDROP)}(),ri(li.HIDDEN_IN_BACKDROP)}function Oi(){Sn()?(Ii(),mi()):Ni()}function Ai(){const e=Ti();if(!e)return;let t=document.getElementById(fi.BACKDROP_CLOSE);if(t)t.classList.remove(li.HIDDEN_IN_BACKDROP);else{const t=ft(`<div id=${fi.BACKDROP_CLOSE}></div>`);t&&e.appendChild(t)}t=document.getElementById(fi.BACKDROP_CLOSE),t&&t.addEventListener("click",(()=>{Oi(),function(){const e=new CustomEvent(yi);window.dispatchEvent(e)}()}))}function Di(){hi(),Si(),gi(wi.website_policy),Ai(),function(){const e=Ti();if(!e)return;const t=document.getElementById(fi.BACKDROP_TEXT_CONTAINER);if(t)t.classList.remove(li.HIDDEN_IN_BACKDROP);else{const t=ft(`\n    <div id="${fi.BACKDROP_TEXT_CONTAINER}">\n        <span class=${li.BACKDROP_TEXT}>\n          ${wi.backdrop_text?wi.backdrop_text:""}\n        </span>\n        <div id=${fi.BACKDROP_ARROW}></div>\n    </div>\n      `);t&&e.appendChild(t);const n=document.querySelector(`#${fi.BACKDROP_TEXT_CONTAINER}`);n&&Ei()&&n.classList.add(li.BACKDROP_TEXT_CONTAINER_DOWN)}}()}function Pi(){(function(){const e=$n();if(e){const t=Number(e.split(".")[0]);if(Bn()&&t<77&&t>71)return!1}return!0})()&&(wi.show_backdrop||wi.show_backdrop_mobile)&&(Sn()&&wi.show_backdrop_mobile?(hi(),Si(),gi(wi.website_policy),ki()):!Sn()&&wi.show_backdrop&&(Di(),ki()))}function Li(e){wi=e,function(e){window.addEventListener(gt.NOTIF_PROMPT_OPEN,e)}(Pi),function(e){window.addEventListener(gt.NOTIF_PROMPT_CLOSE,e)}(Oi)}var xi,Ci,ji,Mi;function Ri(e){return 0===e.indexOf("/")?e.slice(1):e}function Bi(e){return e?decodeURIComponent(e):""}function $i(e){return"/"===e?"":"/"===e[e.length-1]?e.slice(0,e.length-1):e}function Ui(e){return Ri(Bi(window.location.pathname)).startsWith(Bi(e))}function Fi(e){return $i(Bi(window.location.pathname)).endsWith(Bi(e))}function Wi(e){const t=Bi(e);return Bi(window.location.pathname).includes(t)}function Ki(e){const t=new RegExp(e);return Bi(window.location.pathname).search(t)>-1}function zi(e){return e===$i(Ri(Bi(window.location.pathname)))}function Gi(e,t){return e===Ci.Contains?Wi(t):e===Ci.EndsWith?Fi(t):e===Ci.MatchRegex?Ki(t):e===Ci.NotContains?!Wi(t):e===Ci.NotEndsWith?function(e){return!Fi(e)}(t):e===Ci.NotMatchRegex?!Ki(t):e===Ci.NotStartsWith?function(e){return!Ui(e)}(t):e===Ci.StartsWith?Ui(t):e===Ci.EqualsTo?zi(t):e===Ci.NotEqualsTo&&!zi(t)}function Vi(e,t){return!t||(0===t.length||(e===xi.And?t.reduce(((e,t)=>e&&Gi(t.condition,t.value)),!0):t.reduce(((e,t)=>e||Gi(t.condition,t.value)),!1)))}!function(e){e[e.And=0]="And",e[e.Or=1]="Or"}(xi||(xi={})),function(e){e[e.EqualsTo=0]="EqualsTo",e[e.StartsWith=1]="StartsWith",e[e.EndsWith=2]="EndsWith",e[e.Contains=3]="Contains",e[e.MatchRegex=4]="MatchRegex",e[e.NotEqualsTo=5]="NotEqualsTo",e[e.NotStartsWith=6]="NotStartsWith",e[e.NotEndsWith=7]="NotEndsWith",e[e.NotContains=8]="NotContains",e[e.NotMatchRegex=9]="NotMatchRegex"}(Ci||(Ci={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ji||(ji={})),function(e){e[e.Button=0]="Button",e[e.Link=1]="Link"}(Mi||(Mi={}));const Hi="000",qi="00abbb";var Yi;!function(e){e.CUSTOM_LINK_CONTAINER="najva-custom-link-container",e.CUSTOM_LINK="najva-custom-link",e.CUSTOM_LINK_LINK="najva-custom-link-link",e.CUSTOM_LINK_BUTTON="najva-custom-link-button",e.CUSTOM_LINK_LARGE="najva-custom-link-large",e.CUSTOM_LINK_MEDIUM="najva-custom-link-medium",e.CUSTOM_LINK_SMALL="najva-custom-link-small",e.DISABLED="najva-custom-link-disabled"}(Yi||(Yi={}));let Xi=!1;var Ji=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let Zi=null,Qi=[];function eo(e){return Ji(this,void 0,void 0,(function*(){const t=yield function(){return X(this,void 0,void 0,(function*(){try{const e=(yield pe()).transaction(Y,"readwrite"),t=yield e.store.getAll();yield e.done;const n={};return t.forEach((e=>{n[e.key]=e.value})),n}catch(e){throw u(r.DB_READ_FAILED,{key:"allKeys",objectStoreName:Y,browserErrorMessage:e.message,error:e})}}))}();if(!e||!t)return!1;const n=Object.keys(e);if(0===n.length)return!1;let i=!0;return n.forEach((n=>{(!t[n]||t[n]&&t[n]!==e[n])&&(i=!1)})),i}))}function to(e){return Ji(this,void 0,void 0,(function*(){const t=yield eo(e.tags),n=yield en();return e.allow_unsubscribe&&n&&t}))}function no(e,t){return Ji(this,void 0,void 0,(function*(){t.classList.add(Yi.CUSTOM_LINK),t.classList.add(nt),e&&((yield eo(e.tags))&&t.classList.add(Yi.DISABLED),function(e,t){t===Mi.Button?e.classList.add(Yi.CUSTOM_LINK_BUTTON):e.classList.add(Yi.CUSTOM_LINK_LINK)}(t,e.type),function(e,t){t===ji.Small&&e.classList.add(Yi.CUSTOM_LINK_SMALL),t===ji.Medium?e.classList.add(Yi.CUSTOM_LINK_MEDIUM):e.classList.add(Yi.CUSTOM_LINK_LARGE)}(t,e.size),function(e,t,n,i){n&&(e.style.color=`#${n}`),t===Mi.Button&&(e.style.backgroundColor=`#${i}`)}(t,e.type,e.text_color,e.background_color))}))}function io(e){return Ji(this,void 0,void 0,(function*(){const t=e.container_id,n=document.getElementById(t);if(n&&(!(yield eo(e.tags))||(yield to(e)))){for(;n.lastChild;)n.removeChild(n.lastChild);if(Vi(e.urls.operation,e.urls.matchings)){const t=ft(`<button>${yield function(e){return Ji(this,void 0,void 0,(function*(){let t="";return t=(yield to(e))?e.unsubscribe_text?e.unsubscribe_text:"unsubscribe":e.subscribe_text?e.subscribe_text:"subscribe",t}))}(e)}</button>`);t&&(n.appendChild(t),yield function(e,t){return Ji(this,void 0,void 0,(function*(){(yield to(e))?t.addEventListener("click",(()=>Ji(this,void 0,void 0,(function*(){t.disabled=!0;try{yield function(e){return Ji(this,void 0,void 0,(function*(){e.tags&&(yield Promise.all(Object.keys(e.tags).map((e=>In(e)))))}))}(e),yield io(e),t.disabled=!1}catch(e){t.disabled=!1}})))):t.addEventListener("click",(function(){return Ji(this,void 0,void 0,(function*(){t.disabled=!0;try{yield Qt(),yield function(e){return Ji(this,void 0,void 0,(function*(){if(e.tags&&Object.keys(e.tags).length>0&&(yield En(e.tags),e.welcome_notification_enabled&&Zi)){const{title:t,body:n,icon:i,image:o,url:r,actions:a}=e.welcome_notification,s={title:t,body:n,icon:i,image:o,buttons:JSON.stringify(a.map(((e,t)=>({title:e.title,onclick_action:0,button_id:t,icon_url:"",complete_url:e.url})))),complete_url:r,tag:"",pusher:"",require_interaction:"",light_up_screen:"",notification_id:"",priority:"",url:"",expireTime:"",api_key:"",onclick_action:"",website_id:"",is_report_enabled:"",najva_token:""},{title:c,options:u}=xt(s,"",!1);yield Zi.showNotification(c,u)}}))}(e),e.allow_unsubscribe?yield io(e):this.remove(),t.disabled=!1}catch(e){t.disabled=!1}}))}))}))}(e,t),yield no(e,t))}}}))}function oo(){return Ji(this,void 0,void 0,(function*(){!function(){if(Xi)return;Xi=!0,dt(`\n .${Yi.CUSTOM_LINK_CONTAINER}{\n    display: inline-block;\n  }\n\n.${Yi.CUSTOM_LINK} {\n  cursor: pointer;\n  text-transform: uppercase;\n  font-weight: 600;\n  font-family:inherit;\n  border: unset;\n  background-color: unset;\n  font-family: inherit;\n  color: #${Hi}\n}\n\n\n.${Yi.CUSTOM_LINK}:active,.${Yi.CUSTOM_LINK}:focus  {\n  border: none;\n  outline: none;\n}\n\n.${Yi.CUSTOM_LINK}.${nt} {\n  display: inline-block;\n  transition: all .1s;\n}\n\n.${nt}{\n  font-size: medium;\n  line-height: 1;\n  direction: ltr;\n  text-align: left;\n  text-align: start;\n  font-style: normal;\n  font-weight: 400;\n  text-decoration: none;\n  list-style-type: disc\n}\n\n.${Yi.CUSTOM_LINK_LINK}{\n  cursor: pointer;\n  text-transform: uppercase;\n  font-weight: 600\n}\n\n.${Yi.CUSTOM_LINK_LINK}:hover{\n  text-decoration: underline\n}\n\n.${Yi.CUSTOM_LINK_BUTTON}{\n  text-transform: uppercase;\n    -ms-touch-action: manipulation;\n    touch-action: manipulation;\n    font-weight: 600;\n    border-radius: 4px;\n    box-shadow: 1px 1px 1px grey;\n    cursor: pointer;\n    background-color:#${qi}\n}\n\n.${Yi.CUSTOM_LINK_BUTTON}:hover{\n  text-decoration: none;\n  box-shadow: 2px 3px 4px grey\n}\n\n.${Yi.CUSTOM_LINK}.${Yi.CUSTOM_LINK_BUTTON}.${Yi.CUSTOM_LINK_SMALL}{\n  font-size: 13px;\n  padding: 4px 12px;\n}\n\n.${Yi.CUSTOM_LINK}.${Yi.CUSTOM_LINK_BUTTON}.${Yi.CUSTOM_LINK_MEDIUM}{\n  font-size: 15px;\n  padding: 8px 16px;\n}\n\n.${Yi.CUSTOM_LINK}.${Yi.CUSTOM_LINK_BUTTON}.${Yi.CUSTOM_LINK_LARGE}{\n  font-size: 18px;\n  padding: 12px 20px;\n}\n\n\n.${Yi.CUSTOM_LINK}.${Yi.CUSTOM_LINK_LINK}.${Yi.CUSTOM_LINK_SMALL}{\n  font-size: 13px;\n}\n\n.${Yi.CUSTOM_LINK}.${Yi.CUSTOM_LINK_LINK}.${Yi.CUSTOM_LINK_MEDIUM}{\n  font-size: 15px;\n}\n\n.${Yi.CUSTOM_LINK}.${Yi.CUSTOM_LINK_LINK}.${Yi.CUSTOM_LINK_LARGE}{\n  font-size: 18px;\n}\n\n.${Yi.DISABLED} {\n  opacity: 0.5;\n}\n  `)}(),Qi.forEach((e=>Ji(this,void 0,void 0,(function*(){yield io(e)}))))}))}function ro(e,t){Qi=e,Zi=t,Qi&&0!==Qi.length&&oo()}var ao=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function so(e){return ao(this,void 0,void 0,(function*(){return!(yield Kn())&&(!(e&&!Se().messaging.isSupported())&&!(!e&&!(self?"PushManager"in self&&"Notification"in self&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&PushSubscription.prototype.hasOwnProperty("getKey"))))}))}var co=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function uo(e){return co(this,void 0,void 0,(function*(){try{e.website_policy.tag_enabled&&(yield function(e,t){return new Promise(((n,i)=>{const o=document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.onload=n,o.onerror=i,document[t].appendChild(o)}))}(`https://cdn.yektanet.com/rg_woebegone/scripts_v4/${e.najva_settings.app_id}/complete.js?v=${i()}`,"head"))}catch(t){u(r.LOAD_YEKTANET_ANALYTICS_SCRIPT_FAILED,{appId:(null==e?void 0:e.najva_settings.app_id)||"failed to load config --\x3e appId: -",error:t})}}))}const lo="email";var fo;!function(e){e.Email="email",e.Phone="phone",e.Attribute="attribute",e.WebsiteVisitCount="website-visit-count",e.LastCookieSet="last-cookie-set",e.LastTimeCookieMatched="last-time-cookie-matched",e.LastShownTime="last-shown-time"}(fo||(fo={}));var po=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let ho;function vo(){return po(this,void 0,void 0,(function*(){return ho||(ho=yield A("najva-email-subscription-database",1,{upgrade(e){e.createObjectStore(lo,{keyPath:"name"})}})),ho}))}function _o(e){return po(this,void 0,void 0,(function*(){try{const t=(yield vo()).transaction(lo,"readwrite"),n=yield t.store.get(e);return yield t.done,n?n.value:n}catch(t){throw u(r.DB_READ_FAILED,{key:e,objectStoreName:lo,browserErrorMessage:t.message,error:t})}}))}function mo(e){return po(this,void 0,void 0,(function*(){try{const t=(yield vo()).transaction(lo,"readwrite");(yield t.store.get(e.name))?yield t.store.put(e):yield t.store.add(e),yield t.done}catch(t){throw u(r.DB_UPDATE_FAILED,{key:e.name,value:e.value,objectStoreName:lo,browserErrorMessage:t.message,error:t})}}))}var bo;function go(){window.dispatchEvent(new CustomEvent("najva-email-subscription-end"))}!function(e){e[e.close=0]="close",e[e.success=1]="success",e[e.fail=2]="fail"}(bo||(bo={}));var yo=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};const wo="najva-email-cookie_matching_pixel";function Eo(){return yo(this,void 0,void 0,(function*(){if(!document.querySelector(`#${wo}`)){const e=ft(`\n      <img \n        id="${wo}" \n        alt="${wo}" \n        style="display: none!important;" \n        src="https://ua.yektanet.com/pixel?id=njv-email"\n      />\n    `);e&&document.body.appendChild(e),yield mo({name:fo.LastTimeCookieMatched,value:(new Date).toISOString()})}}))}function To(){return yo(this,void 0,void 0,(function*(){if(!(yield function(){return yo(this,void 0,void 0,(function*(){const e=yield _o(fo.LastTimeCookieMatched);return!!e&&pt((new Date).getTime(),new Date(e).getTime())<30}))}())){Math.floor(100*Math.random())<10&&(yield Eo())}!function(e){window.addEventListener("najva-email-subscription-end",e)}((()=>yo(this,void 0,void 0,(function*(){yield Eo()}))))}))}var Io=n(3379),So=n.n(Io),ko=n(449),No={insert:"head",singleton:!1};So()(ko.Z,No);ko.Z.locals;var Oo=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};let Ao=!1;function Do(t){function n(n){return Oo(this,void 0,void 0,(function*(){Ao=!0;try{if(!n||"object"!=typeof n||0===Object.keys(n).length)throw new Error(`Unexpected input: ${n}`);Object.keys(n).forEach((e=>{if(e!==fo.Email&&e!==fo.Phone&&e!==fo.Attribute)throw new Error(`Unexpected field name: ${e}. Please provide a valid field name: ${fo.Email} | ${fo.Phone} | ${fo.Attribute}`);const t=n[e];if(!t)throw new Error(`Unexpected value for field: ${e}. ${p.required.en}`);if(e!==fo.Attribute&&!function(e,t){switch(e){case f.email:return/^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)+$/.test(l(t));case f.phone:return/^(0|\+98|0098)?9\d{9}$/.test(l(t));case f.required:return Boolean(t);default:throw new Error(`please provide a valide validationType: ${Object.keys(p).map((e=>e)).join(" | ")}`)}}(f[e],t.toString()))throw new Error(`Unexpected field value. ${p[e].en}`)}));(yield Object.keys(n).reduce(((e,t)=>Oo(this,void 0,void 0,(function*(){const i=yield e;if(!i){const e=yield _o(t);return t!==fo.Attribute?Promise.resolve(i||n[t]!==e):Promise.resolve(i||JSON.stringify(n[t])!==JSON.stringify(e))}return e}))),Promise.resolve(!1)))&&(yield e(`https://email.najva.com/v1/user-management/emails/identify/${t.najva_settings.account_id}/`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},credentials:"include"}).then((()=>Promise.all([...Object.keys(n).map((e=>{const t=n[e];return t&&e!==fo.Attribute?mo({name:e,value:t.toString()}):t&&"string"!=typeof t?mo({name:fo.Attribute,value:t}):Promise.resolve()})),mo({name:fo.LastCookieSet,value:(new Date).toISOString()})]))).then(go).catch((e=>{throw u(r.IDENTIFY_EMAIL_SUBSCRIBER_FAILED,{error:e})}))),Ao=!1}catch(e){throw Ao=!1,u(r.ADD_EMAIL_SUBSCRIBER_IDENTIFIER_FAILED,{error:e})}}))}return window.dispatchEvent(new CustomEvent("najva-subscriber-identify",{detail:n})),window.Najva=Object.assign(Object.assign({},window.Najva),{identifyEmailSubscriber:n}),n}let Po=null,Lo=null;function xo(){Po&&(Po.style.display="none"),Lo&&(Lo.style.display="none")}const Co="https://van.najva.com";function jo(e){return Oo(this,void 0,void 0,(function*(){try{if(yield function(){return Oo(this,void 0,void 0,(function*(){let e=yield _o(fo.WebsiteVisitCount);e||(e=0),e=parseInt(e.toString(),10),yield mo({name:fo.WebsiteVisitCount,value:e+1})}))}(),yield function(e){return Oo(this,void 0,void 0,(function*(){const t=yield e.email_settings.fields.reduce(((e,t)=>Oo(this,void 0,void 0,(function*(){const n=yield e;if(t.key===fo.Email){const e=yield _o(fo.Email);return Promise.resolve(Boolean(e)&&n)}if(t.key===fo.Phone){const e=yield _o(fo.Phone);return Promise.resolve(Boolean(e)&&n)}return e}))),Promise.resolve(!0)),n=yield _o(fo.LastShownTime),i=n?pt((new Date).getTime(),new Date(n).getTime()):0;return!(!e.website_policy.email_enabled||Ao||t||e.email_settings.affected_urls&&!Vi(e.email_settings.affected_urls.operation,e.email_settings.affected_urls.url_matchings)||n&&!(i>(e.email_settings.show_interval||e.najva_settings.dismiss_cookie_days)))}))}(e)){const t=yield _o(fo.WebsiteVisitCount);yield zt(e.email_settings.show_condition,t?Number(t):1),yield function(e){return Oo(this,void 0,void 0,(function*(){let t="",n="";try{n=(yield _o(fo.Email))||"",t=(yield _o(fo.Phone))||""}catch(e){}const o=ft(`\n    <iframe \n      title="Najva Email Subscription Form"\n      src="https://van.najva.com/static/cdn/email/email-iframe.html?v=${i()}"\n      name="najva-email"\n    ></iframe>\n  `);if(o.onload=function(){o.contentWindow&&o.contentWindow.postMessage({config:e,phone:t,email:n,shouldValidate:!1},Co)},e.iframe_container?Lo=document.querySelector(e.iframe_container):(Po=ft('<div class="najva-email-backdrop"></div>'),Po.onclick=xo,Lo=ft('<div class="najva-email-container"></div>'),Lo.appendChild(o)),!Lo)throw u(r.FIND_EMAIL_IFRAME_CONTAINER_FAILED,void 0);Lo.appendChild(o),!e.side_img&&!e.background_img||e.iframe_container||Lo.style.setProperty("max-width","700px","important"),Po&&document.body.appendChild(Po),document.body.appendChild(Lo)}))}(e.email_settings),yield mo({name:fo.LastShownTime,value:(new Date).toISOString()}),function(){window.addEventListener("message",(e=>Oo(this,void 0,void 0,(function*(){var t,n;if(e.origin===Co)switch(null===(t=e.data)||void 0===t?void 0:t.action){case bo.close:xo();break;case bo.success:{const t=null===(n=e.data)||void 0===n?void 0:n.submitedData;yield Promise.all([mo({name:fo.LastCookieSet,value:(new Date).toISOString()}),...Object.keys(t).map((e=>{const n=t[e];return n?e!==fo.Attribute?mo({name:e,value:n.toString()}):mo({name:fo.Attribute,value:n}):Promise.resolve()}))]),go();break}case bo.fail:{const{error:t,errorCode:n}=e.data;throw u(n,{error:t})}}}))))}()}e.website_policy.email_enabled&&!Ao&&(yield function(e){return Oo(this,void 0,void 0,(function*(){const t=yield _o(fo.LastCookieSet);if(t&&pt((new Date).getTime(),new Date(t).getTime())>30){const t=Do(e),[n,i,o]=yield Promise.all([_o(fo.Email),_o(fo.Phone),_o(fo.Attribute)]);t({email:n,phone:i,attribute:o||{}})}}))}(e)),yield To()}catch(e){throw u(r.INIT_EMAIL_FAILED,{error:e})}}))}var Mo=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};function Ro(e){return Mo(this,void 0,void 0,(function*(){const t=e.najva_settings.native_permission;if(!(yield so(t)))return;yield function(e){return de(this,void 0,void 0,(function*(){fe=e,yield pe();const t=yield ve(_.HasMigrated);"string"==typeof t&&"true"!==t&&(yield ue(fe.website_id,fe.campaign_id))}))}({campaign_id:e.najva_settings.campaign_id,website_id:e.najva_settings.website_id.toString(),messaging_sender_id:e.messaging_sender_id});let n=null;t&&(n=yield _n(e),function(e,t){tt=e,et=t;try{tt.isNativeMode&&(Se().initializeApp({messagingSenderId:e.messaging_sender_id}),Se().messaging().useServiceWorker(et)),window.localStorage.removeItem("najva-reload-counter")}catch(e){throw u(r.FIREBASE_INITIALIZATION_FAILED,{firebaseErrorMessage:e.message,error:e})}}({messaging_sender_id:e.messaging_sender_id,isNativeMode:t},n),Ft({website_id:e.najva_settings.website_id,api_key:e.najva_settings.api_key,isNativeMode:t},n),Li({show_backdrop:e.najva_settings.show_backdrop,show_backdrop_mobile:e.najva_settings.show_backdrop_mobile,backdrop_text:e.najva_settings.backdrop_text,website_policy:e.website_policy})),yield function(e){return mn(this,void 0,void 0,(function*(){bn=e,(yield en())&&gn()}))}({website_id:e.najva_settings.website_id.toString(),campaign_id:e.najva_settings.campaign_id.toString(),api_key:e.najva_settings.api_key}),yield function(e){return Jt(this,void 0,void 0,(function*(){Zt=e,Zt.isNativeMode?yield Xt({website_id:Zt.website_id,api_key:Zt.api_key,without_popup:Zt.without_popup,request_permission:Zt.request_permission}):yield mt({website_id:Zt.website_id,api_key:Zt.api_key,najva_subdomain:Zt.najva_subdomain})}))}({website_id:e.najva_settings.website_id.toString(),campaign_id:e.najva_settings.campaign_id,api_key:e.najva_settings.api_key,najva_subdomain:e.najva_settings.najva_subdomain,without_popup:e.najva_settings.without_popup,request_permission:e.najva_settings.request_permission,isNativeMode:t}),lt({extra_css:e.najva_settings.extra_css}),rn({najva_subdomain:e.najva_settings.najva_subdomain,website_id:e.najva_settings.website_id.toString()}),yield pn({location_permission:e.najva_settings.location_permission,najva_subdomain:e.najva_settings.najva_subdomain,isNativeMode:t}),function(e){wn=e}({website_id:e.najva_settings.website_id}),di({show_bell:e.najva_settings.show_bell,show_bell_in_mobile:e.najva_settings.show_bell_in_mobile,bell_direction:e.najva_settings.bell_direction,tooltip_direction:e.najva_settings.tooltip_direction,bell_color_hover:e.najva_settings.bell_color_hover,bell_color:e.najva_settings.bell_color,bell_tooltip:e.najva_settings.bell_tooltip,without_popup:e.najva_settings.without_popup,isNativeMode:t}),ro(e.custom_links?e.custom_links:[],n),function(e){Gn(this,void 0,void 0,(function*(){if(Vn=e,yield Jn()){const e=yield ve(_.VisitCount);yield zt(Vn.request_permission,e?Number(e):1),yield Xn()}}))}({request_icon:e.najva_settings.request_icon,request_text:e.najva_settings.request_text,request_description:e.najva_settings.request_description,denied_text:e.najva_settings.denied_text,accept_text:e.najva_settings.accept_text,without_popup:e.najva_settings.without_popup,with_popup:e.najva_settings.with_popup,dismiss_cookie_days:e.najva_settings.dismiss_cookie_days,request_permission:e.najva_settings.request_permission,isNativeMode:t})}))}!function(){Mo(this,void 0,void 0,(function*(){const e=yield function(){return be(this,void 0,void 0,(function*(){return ge=yield ye(),ge}))}();Do(e),jo(e).catch(console.error),uo(e).catch(console.error),yield Ro(e);const t={subscribe:Qt,hasSubscribed:en,addAttribute:En,getAttributes:Tn,deleteAttribute:In};window.Najva=Object.assign(Object.assign({},window.Najva),t),window.dispatchEvent(new CustomEvent("najva-execution-end",{bubbles:!0,cancelable:!1}))}))}()})()})();