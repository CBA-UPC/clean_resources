!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="05bd1616-407e-4523-bf04-cef16cb7812e",e._sentryDebugIdIdentifier="sentry-dbid-05bd1616-407e-4523-bf04-cef16cb7812e")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[7181],{6660:(e,t,n)=>{n.d(t,{Z:()=>s});var i=(0,n(36343).q)("gif",{altIcon:"gif-alt"});i.defaultProps={size:{width:24,height:24},useAltIcon:!1};let s=i},21342:(e,t,n)=>{n.r(t),n.d(t,{default:()=>e$});var i=n(33970),s=n.n(i),l=n(95004),r=n(78994),o=n(17276),a=n.n(o),c=n(44027),d=n.n(c),u=n(5754),h=n.n(u),p=n(83707),m=n(55673),v=n(44009),f=n(36343),g=e=>(0,f.q)("video-arrow",{style:{transform:`rotate(${e}deg)`,transformOrigin:"center"}}),b=g(0),S=g(180);[b,S].forEach(e=>e.defaultProps={size:{width:48,height:48}});var x=(0,f.q)("video-close");x.defaultProps={size:{width:48,height:48}};var y=n(6135),P=n(29860),w=n(40041),j=n(78667),T=n(16234),N=n(2629);let I=function(e){var t,n,i=e.post,s=(0,(0,j.bp)()._c)("Variable represents the name of a blog.","%1$s on Tumblr",[(null===(t=i.blog)||void 0===t?void 0:t.title)||i.blogName]),l=i.summary,r=(0,T.VT)(i);return(0,N.jsx)(P.Z,{title:s,description:l,openGraph:{image:r},twitterCardType:"summary",pageName:w.H.analyticsPageName,decodedTag:`page:${w.H.analyticsPageName}, ${null===(n=i.tags)||void 0===n?void 0:n.join(",")}`,imageUrl:i.postUrl})};var k=n(90127),C=n(43523),R=n(42946),E=n(22979),F=n(54138),Z=n.n(F),D=n(86743),O=n(77865),V=n(46244),A=n(85795),M=n(60023),_=n(73125),L="video-hub",U=(e,t)=>{var n,i=d()(e.entries());try{for(i.s();!(n=i.n()).done;){var l=s()(n.value,2),r=l[0],o=l[1].response.timeline.elements;if(0!==o.length){var a,c=d()(o.entries());try{for(c.s();!(a=c.n()).done;){var u=s()(a.value,2),h=u[0];if(u[1].id===t)return[r,h]}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){i.e(e)}finally{i.f()}return[-1,-1]},z=n(49803),H=n(46306),W=n(78380),B=n(71169),$=n(9421),Y=n(71017),Q=n(54382),q=n(55351),G=n(92183),J=n(31679),K=n(81321),X=n(77),ee=n(45051),et=n(55015),en=n(97612),ei=n(29158),es=n(28863),el=n(83302),er=n(6660),eo=n(35665),ea=n(26321),ec=n(63583),ed=n.n(ec),eu=n(93853);let eh=e=>{var t=e.onPreviousImage,n=e.onNextImage,i=(0,l.useRef)(t),s=(0,l.useRef)(t);return(0,l.useEffect)(()=>{i.current=t},[t]),(0,l.useEffect)(()=>{s.current=n},[n]),(0,N.jsx)(eu.ZP,{hotkey:[{key:eu.SV.Left,command:()=>i.current()},{key:eu.SV.Right,command:()=>s.current()}]})},ep={playerContainer:"piGzb",playerBackground:"_8A_e",isFullScreen:"Pw6GH",thumbnail:"YRzsx",thumbnailButton:"nPXxq",firstThumb:"bKsjn",lastThumb:"dqnRT",thumbnailSelected:"qfu9w",currentImage:"jVxjJ",hasMultiple:"RP2At",controls:"DLS7i",thumbnails:"GcwPw",left:"YpTp5",right:"jTc_2",pill:"GGmwU"},em=e=>{var t,n,i=e.hubName,r=e.isVisible,o=e.imageBlocks,a=e.isFullScreen,c=e.onFullScreenChange,d=(0,j.bp)(),u=d._c,p=d.logEvent,m=(0,l.useState)(0),f=s()(m,2),g=f[0],b=f[1],S=(0,l.useRef)(),x=e=>{e>=0&&e<=o.length-1&&b(e)},y=()=>x(g-1),P=()=>x(g+1);(0,H.Z)(()=>{var e,t=48*(g-Math.floor(2.5));null===(e=S.current)||void 0===e||e.scrollTo({left:Math.min(48*(o.length-5),Math.max(0,t)),behavior:"smooth"})},[g,o.length]),(0,l.useEffect)(()=>{r&&!(o.length<=1)&&p({eventName:C.J.VideoHubGifsetViewed,eventDetails:{tag:i,index:g,count:o.length}})},[r,g]);var w=o[g];return(0,N.jsxs)("div",{className:h()(ep.playerContainer,{[ep.isFullScreen]:a}),children:[(0,N.jsx)("div",{className:ep.playerBackground,style:null!==(t=w.media[0].poster)&&void 0!==t&&t.url?{backgroundImage:`url(${null===(n=w.media[0].poster)||void 0===n?void 0:n.url})`}:void 0}),(0,N.jsx)("div",{className:h()(ep.currentImage,{[ep.hasMultiple]:o.length>1}),children:o.map((e,t)=>(0,N.jsx)(eo.Z,{imageResponse:e.media,sizes:"100vw",loading:"eager",style:{display:g===t?"block":"none"}},e.media[0].mediaKey))}),(0,N.jsxs)("div",{className:ep.controls,children:[(0,N.jsx)("div",{className:ep.left,children:(0,N.jsx)(er.Z,{size:{width:22,height:22},colors:{primary:ed().white}})}),(0,N.jsx)(en.Z,{className:ep.thumbnails,visibleWidth:244,itemWidth:48,maxItemsToScroll:1,onScroll:e=>{var t=e.firstIndex,n=e.lastIndex,i=e.right,s=Math.floor((n+t)/2);return i?P():y(),i?s<=g:s>=g},children:o.length>1&&o.map((e,t)=>{var n,i;return(0,N.jsx)(ei.Z.Consumer,{children:n=>{var i,s=n.window,l=n.scrollContainerRef,r=s[t]?s[t].opacity:0;return S.current=l.current,(0,N.jsx)("div",{style:{opacity:r},className:h()(ep.thumbnail,{[ep.thumbnailSelected]:t===g,[ep.firstThumb]:0===t,[ep.lastThumb]:t===o.length-1}),children:(0,N.jsx)(v.Z,{onClick:()=>b(t),className:ep.thumbnailButton,label:u("GIF Viewer controls","Show image"),"aria-pressed":t===g,children:(0,N.jsx)("img",{src:null===(i=e.media[e.media.length-1].poster)||void 0===i?void 0:i.url,alt:u("GIF Viewer controls","Thumbnail")})})})}},null!==(n=null===(i=e.media[e.media.length-1].poster)||void 0===i?void 0:i.mediaKey)&&void 0!==n?n:t)})}),(0,N.jsxs)("div",{className:ep.right,children:[o.length>1&&(0,N.jsx)(ea.Z,{className:ep.pill,children:`${g+1}/${o.length}`}),(0,N.jsx)(v.Z,{onClick:()=>c(!a),label:u("GIF Viewer controls","Toggle full screen"),children:a?(0,N.jsx)(es.Z,{"data-testid":"collapse-icon",size:{width:22,height:22}}):(0,N.jsx)(el.Z,{"data-testid":"fullscreen-icon",size:{width:22,height:22}})})]})]}),r&&(0,N.jsx)(eh,{onPreviousImage:y,onNextImage:P},w.media[0].mediaKey)]})};var ev=n(50209),ef=n.n(ev),eg=n(33997);class eb extends l.Component{constructor(){super(...arguments),ef()(this,"state",{playing:!0}),ef()(this,"onMute",()=>{this.props.onMutedChange(!this.props.muted)}),ef()(this,"onPlayPause",()=>{this.setState(e=>({playing:!e.playing}))})}render(){var e,t=this.props,n=t.isVisible,i=t.videoBlock,s=t.timelineObject,l=t.isFullScreen,r=t.onFullScreenChange,o=t.muted,a=t.onMutedChange,c=this.state.playing,d=i.media,u=i.poster,p=null==u||null===(e=u[0])||void 0===e?void 0:e.url;return d?(0,N.jsxs)("div",{className:h()("_ZAxE",{knBNn:l}),children:[(0,N.jsx)("div",{className:"IgQjq",style:p?{backgroundImage:`url(${p})`}:void 0}),(0,N.jsx)(eg.ZP,{playing:c,media:d,timelineObject:s,isDocked:!1,isMuted:o,isFullScreen:l,onFullScreenChange:r,videoElementProps:{onVolumeChange:e=>{a(e.currentTarget.muted||0===e.currentTarget.volume)},onPlay:()=>this.setState({playing:!0}),onPause:e=>{var t=e.target;t.loop&&!t.ended&&this.setState({playing:!1})}},useViewabilityTracker:!0,hasNoMaxUndockedHeight:!0}),n&&(0,N.jsx)(eu.ZP,{hotkey:[{key:eu.SV.m,command:this.onMute},{key:eu.SV.Space,command:this.onPlayPause}]})]}):null}}let eS={take:"IUTbW",isFullScreen:"ghjuI",loader:"vfT42",adTitle:"ZFSe1",postContent:"KGDrl",adContent:"kelnf",adFreeLink:"UvsnY",ccpaLink:"n4nUY"},ex=e=>{var t,n,i,s,r=e.hubName,o=e.isVisible,a=e.post,c=e.isFullScreen,d=e.onFullScreenChange,u=e.muted,p=e.onMutedChange,m=e.streamPosition,v=(0,j.bp)(),f=(0,J.b)(),g=(0,X.iv)(),b=(0,K.Q)(),S=v.logEvent,x=null==a||null===(t=a.content)||void 0===t?void 0:t.find(W.Lo),P=!x&&(null==a||null===(n=a.content)||void 0===n?void 0:n.filter(W.Lb)),w=null;return a&&(x?w=Z()(Z()({},a),{},{content:null===(i=a.content)||void 0===i?void 0:i.filter(e=>!(0,W.Lo)(e))}):P&&P.length>0&&(w=Z()(Z()({},a),{},{content:null===(s=a.content)||void 0===s?void 0:s.filter(e=>!(0,W.Lb)(e))}))),(0,l.useEffect)(()=>{o&&S({eventName:C.J.VideoHubItemShown,eventDetails:{type:x?"video":"gifset",tag:r}})},[o]),(0,N.jsxs)("div",{className:h()(eS.take,{[eS.isFullScreen]:c}),children:[a&&(0,E.A6)(a)&&(0,N.jsxs)(N.Fragment,{children:[o?(0,N.jsx)($.fi,{isInstream:!0,timelineObject:a,supplyProviderId:G.E.TUMBLR_TV,rootSupplyOpportunityId:a.supplyOpportunityInstanceId,isApproachingView:()=>!0,setApproachingViewCallback:ee.Z,setImpressionsEnabled:ee.Z,setProvideEventDetails:ee.Z,appContext:v,adContext:f,dashboardContext:g,adRequestContext:b,isInView:()=>!0,setInViewCallback:ee.Z,onEmpty:e.onEmpty,children:e=>{var t=e.ad,n=e.supplyOpportunityInstanceId,i=e.location,s=e.onFilled,l=e.onEmpty,r=e.onError;return(0,N.jsx)(B.T,{location:i,streamPosition:m,ad:t,adContext:f,appContext:v,supplyOpportunityInstanceId:n,onFilled:s,onEmpty:l,onError:r})}}):(0,N.jsx)("div",{className:eS.adTitle,children:"Advertisement"}),(0,N.jsx)(q.Z,{children:(0,N.jsx)("div",{className:eS.postContent,children:(0,N.jsxs)("div",{className:eS.adContent,children:[(0,N.jsx)("a",{href:"/settings/ad-free-browsing?source=video_hubs",className:eS.adFreeLink,target:"_blank",rel:"noopener noreferrer",children:(0,N.jsx)(Q.ZP,{children:"Wanna go ad-free?"})}),v.features.ccpa&&(0,N.jsx)("a",{href:v.isLoggedIn&&v.features.ccpaOptOutSwitch?`${v.wwwBaseUrl}/settings/privacy`:"https://tumblr.zendesk.com/hc/articles/360041012973",className:eS.ccpaLink,target:"_blank",children:(0,N.jsx)(Q.ZP,{children:"Do not sell my personal information"})})]})})})]}),!w&&!(0,E.A6)(a)&&(0,N.jsx)("div",{className:h()(eS.loader,{[eS.isFullScreen]:c}),children:(0,N.jsx)(y.Z,{})}),x&&(0,N.jsx)(eb,{isVisible:o,videoBlock:x,timelineObject:a,isFullScreen:c,onFullScreenChange:d,muted:u,onMutedChange:p}),P&&P.length>0&&(0,N.jsx)(em,{hubName:r,isVisible:o,imageBlocks:P,timelineObject:a,isFullScreen:c,onFullScreenChange:d}),w&&!c&&(0,N.jsx)(q.Z,{children:(0,N.jsx)("div",{className:eS.postContent,children:(0,N.jsx)(Y.Z,{timelineObject:w,presentationStyle:et.Z.videoHubDesktop,isNarrow:!0})})})]})};var ey=!0,eP=n(9041),ew=n(29583),ej=n(32156),eT=n(93415),eN=n(74446);class eI extends l.Component{constructor(){var e;super(...arguments),e=this,ef()(this,"onPreviousSlide",()=>this.props.onPreviousSlide()),ef()(this,"onNextSlide",()=>this.props.onNextSlide()),ef()(this,"onFollow",function(t){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.props.currentPost&&e.props.onPostUpdate((0,ej.dQ)(e.props.currentPost,t,n))}),ef()(this,"onLike",(e,t)=>{this.props.currentPost&&this.props.onPostUpdate((0,ej.bX)(this.props.currentPost,t))}),ef()(this,"onReplyAdded",()=>this.props.currentPost&&this.props.onPostUpdate((0,ej.Js)(this.props.currentPost))),ef()(this,"onReplyRemoved",()=>this.props.currentPost&&this.props.onPostUpdate((0,ej.RN)(this.props.currentPost))),ef()(this,"getPostRefs",()=>this.props.visiblePosts.map((e,t)=>{var n;return{ref:null===(n=this.props.scrollContainer)||void 0===n||null===(n=n.children)||void 0===n?void 0:n[t+1],props:{timelineObject:e}}})),ef()(this,"getScrollerMethods",()=>({scrollToElement:this.scrollToElement,getVisibleElement:()=>void 0,scrollToTop:this.scrollToTop})),ef()(this,"scrollToElement",e=>{switch(e){case ew.ZA.Next:this.props.onNextSlide();break;case ew.ZA.Previous:this.props.onPreviousSlide()}}),ef()(this,"scrollToTop",()=>this.props.onScrollToSlide(0))}render(){return(0,N.jsx)(eN.k.Provider,{value:{onFollow:this.onFollow,onLike:this.onLike,onReplyAdded:this.onReplyAdded,onReplyRemoved:this.onReplyRemoved},children:(0,N.jsxs)(eT.I.Provider,{value:this.props.scrollContainer||null,children:[(0,N.jsx)(ew.ZP,{getPostRefs:this.getPostRefs,getScrollerMethods:this.getScrollerMethods,children:this.props.children}),(0,N.jsx)(eu.ZP,{hotkey:[{key:eu.SV.Down,command:this.onNextSlide},{key:eu.SV.Up,command:this.onPreviousSlide}]})]})})}}var ek=n(59215),eC=n(42914),eR={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e};let eE={slides:"LHG1W",isFullScreen:"WPyLO",slideWrapper:"BL1ck",slide:"A7qiD",firstSlide:"WAhyN",lastSlide:"wi4R3",slideDisabled:"wScrI"};var eF=e=>{var t=e.nativeEvent.path||e.nativeEvent.composedPath();if(t&&t.length>0)return t.filter(e=>e instanceof Element);for(var n=e.target,i=[];n;)i.push(n),n=n.parentElement;return i};class eZ extends l.Component{constructor(e){super(e),ef()(this,"deltaYAccumulator",0),ef()(this,"leadingWheelEventTime",0),ef()(this,"isTouchScrolling",!1),ef()(this,"checkScroll",()=>{this.scrollUpdate(0)}),ef()(this,"enableTouchScrolling",()=>{this.slidesRef.current&&this.canScroll()&&(this.isTouchScrolling=!0,this.slidesRef.current.style.overflowY="scroll",this.slidesRef.current.style.scrollSnapType="y mandatory")}),ef()(this,"onScroll",()=>{this.slidesRef.current&&(this.canScroll()?this.onTouchEnd():this.disableTouchScrolling())}),ef()(this,"disableTouchScrolling",()=>{this.slidesRef.current&&(this.slidesRef.current.style.overflowY="hidden",this.slidesRef.current.style.scrollSnapType="initial",this.isTouchScrolling=!1)}),ef()(this,"onTouchEnd",(0,eC.Z)(this.disableTouchScrolling,3e3,{leading:!1,trailing:!0})),ef()(this,"handleInViewChange",(0,eC.Z)((e,t,n)=>{var i=this.props.currentSlideIndex;this.isTouchScrolling&&t&&i!==e&&(this.disableTouchScrolling(),this.props.onScrollToSlide(e))},250,{trailing:!0})),ef()(this,"onWheel",e=>{if(this.isAnimating){clearTimeout(this.wheelDebounceTimer),this.wheelDebounceTimer=void 0,this.deltaYAccumulator=0;return}if(this.wheelDebounceTimer||(this.leadingWheelEventTime=Date.now(),this.wheelDebounceTimer=window.setTimeout(()=>{this.onWheel(Z()(Z()({},e),{},{deltaY:0})),this.wheelDebounceTimer=void 0},51)),Date.now()-this.leadingWheelEventTime<=50){this.deltaYAccumulator+=Math.abs(e.deltaY)>=30?e.deltaY:0;return}var t=e.deltaY+this.deltaYAccumulator;if(this.deltaYAccumulator=0,!(150>Math.abs(t))){for(var n=e.target===this.slidesRef.current,i=eF(e),s=0;s<i.length;s++){if(i[s]===this.slidesRef.current){n=!0;break}var l=i[s];if(l.scrollHeight>l.clientHeight&&window.getComputedStyle(i[s]).overflow.match(/auto|scroll/))return}n&&(t>0?this.props.onNextSlide():this.props.onPreviousSlide())}}),this.isAnimating=!1,this.slidesRef=(0,l.createRef)(),this.currentSlideRef=(0,l.createRef)(),this.resizeObserver=new ResizeObserver(this.checkScroll)}componentDidMount(){if(this.currentSlideRef.current&&this.props.posts.length>0&&this.checkScroll(),this.slidesRef.current){var e;null===(e=this.resizeObserver)||void 0===e||e.observe(this.slidesRef.current)}}componentWillUnmount(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect(),window.clearTimeout(this.wheelDebounceTimer)}componentDidUpdate(e){if(this.currentSlideRef.current&&(e.currentSlideIndex!==this.props.currentSlideIndex||e.isFullScreen!==this.props.isFullScreen)){this.scrollUpdate();return}}scrollUpdate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;!this.isAnimating&&this.currentSlideRef.current&&(this.isAnimating=!0,function(e,t,n){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"easeInOutQuad",l=eR[s],r=function e(t){return null==t?null:t.scrollHeight>t.clientHeight?t:e(t.parentElement)}(e);if(!r){null==t||t();return}var o=r.scrollTop,a=e.offsetTop;if(0===n){r.scrollTop=a,null==t||t();return}var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||(e=>window.setTimeout(()=>e(Date.now()),15));c(function e(s){i||(i=s);var d=s-i;if(d>n||1>Math.abs(a-r.scrollTop)){r.scrollTop=a,null==t||t();return}r.scrollTop=o+(a-o)*l(d/n),c(e)})}(this.currentSlideRef.current,()=>{setTimeout(()=>{this.isAnimating=!1,e>0&&this.scrollUpdate(0)},2*e)},e))}canScroll(){if(!(null!==(e=this.slidesRef.current)&&void 0!==e&&e.children[0]))return!0;var e,t=this.slidesRef.current.children[0].clientHeight;return!(this.slidesRef.current.scrollTop<t)||(this.slidesRef.current.scrollTop=t,!1)}render(){var e,t=this.props,n=t.appContext._c,i=t.isFullScreen,s=t.posts,l=t.currentSlideIndex,r=t.children,o=Math.max(0,l-2),a=Math.min(s.length-1,l+2),c=s.slice(o,a+1);return(0,N.jsxs)("div",{role:"feed","aria-label":n("Accessibility label used to identify the list of takes","Takes"),className:h()(eE.slides,{[eE.isFullScreen]:i}),ref:this.slidesRef,onWheel:this.onWheel,onScroll:this.onScroll,onTouchStart:this.enableTouchScrolling,onTouchEnd:this.onTouchEnd,children:[(0,N.jsx)("div",{style:{minHeight:`${100*o}vh`}}),(0,N.jsx)(eI,{scrollContainer:null!==(e=this.slidesRef.current)&&void 0!==e?e:void 0,visiblePosts:c,currentPost:this.props.posts[l],onPostUpdate:this.props.onPostUpdate,onNextSlide:this.props.onNextSlide,onPreviousSlide:this.props.onPreviousSlide,onScrollToSlide:this.props.onScrollToSlide,children:c.map((e,t)=>{var s=t+o,a=0==s-l;return(0,N.jsx)("article",{"aria-label":n("Accessibility label used to keep track of the current take as you scroll down the list","Take %1$s",[s.toString()]),className:h()(eE.slide,{[eE.slideDisabled]:!a,[eE.firstSlide]:0===t,[eE.lastSlide]:t===c.length-1,[eE.isFullScreen]:i}),ref:a?this.currentSlideRef:void 0,"aria-hidden":!a,children:(0,N.jsx)(eP.df,{threshold:1,onChange:(e,t)=>this.handleInViewChange(s,e,t),className:eE.slideWrapper,children:r({post:e,index:s})})},`slide_${s}`)})})]})}}let eD=(0,ek.X9)(eZ,{appContext:!0}),eO={body:"KPzXO",isFullScreen:"BtMhl",leftControls:"U1iQJ",vCentered:"kDChl",previousButton:"vFfML",nextButton:"H48rD",controlIcon:"EyPrr"};var eV=e=>e.response.timeline.elements.filter(e=>e&&(0,E.A6)(e)||!!e.content.find(e=>(0,W.Lo)(e)||(0,W.Lb)(e))),eA=e=>{var t=e.initialPostBlogName,n=e.initialPostId;return(0,l.useRef)(t&&n?{blogName:t,id:n}:void 0)};let eM=e=>{var t,n,i=e.onClose,o=e.__TEST_ONLY_fetchNextPageOnEmptyDataTimeout,c=(0,r.UO)(),u=c.hubName,f=c.blogName,g=c.postId,P=eA({initialPostBlogName:f,initialPostId:g}),w=(0,m.lr)(),T=s()(w,1)[0],F=function(e,t,n){var i=(0,j.bp)().apiFetch;return(0,D.N)({queryKey:[L,e,null==t?void 0:t.id],queryFn:s=>{var l,r,o;return(l=s.pageParam,r=null!=t&&t.blogName?`/${t.blogName.endsWith(A.oM)?t.blogName:(0,_.Z)(t.blogName)}/${t.id}`:"",o=`/v2/tumblr_tv/channel/${encodeURIComponent(e)}${r}`,null!=n&&n.refresh&&(o+="?refresh=1"),new M.x(i,null!=l?l:o)).fetch()},staleTime:1/0,initialPageParam:void 0,getNextPageParam:e=>{var t;return null===(t=e.response.timeline.links)||void 0===t||null===(t=t.next)||void 0===t?void 0:t.href}})}(u,P.current,{refresh:!!T.get("refresh")}),B=F.data,$=F.fetchNextPage,Y=F.hasNextPage,Q=F.isFetchingNextPage,q=function(e,t){var n=(0,O.NL)();return(0,V.D)({mutationFn:()=>Promise.resolve(),onSuccess:(i,l)=>{var r=l.newPostData;n.setQueryData([L,e,null==t?void 0:t.id],e=>{var t=e.pages,n=e.pageParams,i=U(t,r.id),l=s()(i,2),o=l[0],a=l[1];if(t[o]){var c=Z()(Z()({},t[o]),{},{response:Z()(Z()({},t[o].response),{},{timeline:Z()(Z()({},t[o].response.timeline),{},{elements:Object.assign([],t[o].response.timeline.elements,{[a]:r})})})});return{pageParams:n,pages:Object.assign([],t,{[o]:c})}}})}})}(u,P.current),G=(0,j.bp)(),J=G._t,K=G.logEvent,X=(0,r.s0)(),ee=(0,l.useRef)(null),et=(0,l.useRef)(new Set),en=(0,l.useState)(0),ei=s()(en,2),es=ei[0],el=ei[1],er=[],eo=d()(null!==(t=null==B?void 0:B.pages)&&void 0!==t?t:[]);try{for(eo.s();!(n=eo.n()).done;){var ea=n.value;er=(er=[...er,...eV(ea)]).filter(e=>!et.current.has(null==e?void 0:e.supplyOpportunityInstanceId))}}catch(e){eo.e(e)}finally{eo.f()}Y&&(er=[...er,void 0]);var ec=function(){var e=(0,l.useState)(ey),t=s()(e,2),n=t[0],i=t[1];return[n,e=>i(ey="function"==typeof e?e(ey):e)]}(),ed=s()(ec,2),eu=ed[0],eh=ed[1],ep=(0,l.useState)(0),em=s()(ep,2),ev=em[0],ef=em[1],eg=(0,l.useState)(!1),eb=s()(eg,2),eS=eb[0],eP=eb[1],ew=er[ev],ej=()=>{er[ev-1]&&ef(ev-1)},eT=()=>{if(!Y&&!er[ev+1]){(0,W.VC)(u,void 0),null==i||i();return}ev+1<er.length&&ef(ev+1)},eN=()=>{var e,t,n,i;return a()().async(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(!Y||Q)){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,a()().awrap($());case 4:if(t=(e=s.sent).isSuccess,n=e.data,i=e.hasNextPage,!(!t||!n)){s.next=11;break}return setTimeout(eN,3*R.g.Second),s.abrupt("return");case 11:0===eV(n.pages[n.pages.length-1]).length&&i&&setTimeout(eN,o||R.g.Second);case 13:case"end":return s.stop()}},null,null,null,Promise)};return(0,H.Z)(()=>{ev>=er.length-2&&eN()},[ev]),(0,l.useEffect)(()=>{if(null!=ew&&ew.id){(0,W.VC)(u,ew);var e=ew.id.toString();e!==g&&((0,E.A6)(ew)?X((0,k.hc)({hubName:u,blogName:"advertisement",postId:ew.supplyOpportunityInstanceId}),{replace:!0}):X((0,k.hc)({hubName:u,blogName:ew.blogName,postId:e}),{replace:!0}))}},[null==ew?void 0:ew.blogName,null==ew?void 0:ew.id,u,g]),(0,z.L)(()=>{if(ee.current){if(eS){var e=()=>{p.Z.fullscreenElement||(p.Z.removeEventListener("fullscreenchange",e),eP(!1))};p.Z.addEventListener("fullscreenchange",e),p.Z.requestFullscreen(ee.current)}else p.Z.fullscreenElement&&p.Z.exitFullscreen()}},[eS]),(0,l.useEffect)(()=>{var e=Date.now();return()=>{K({eventName:C.J.ScreenLeft,eventDetails:{tag:u}});var t=Math.round((Date.now()-e)/1e3);K({eventName:C.J.VideoHubSecondsInStream,eventDetails:{tag:u,seconds:t}})}},[]),(0,l.useEffect)(()=>{Q&&K({eventName:C.J.VideoHubPlayerPagination,eventDetails:{tag:u}})},[Q]),(0,N.jsx)("div",{className:h()(eO.body,{[eO.isFullScreen]:eS}),ref:ee,"data-refreshcount":es,children:er.length>0?(0,N.jsxs)(N.Fragment,{children:[er[0]&&(0,N.jsx)(I,{post:er[0]}),!eS&&(0,N.jsxs)("div",{className:eO.leftControls,children:[(0,N.jsx)(v.Z,{label:J("Close"),onClick:i,children:(0,N.jsx)(x,{className:eO.controlIcon})}),(0,N.jsxs)("div",{className:eO.vCentered,children:[(0,N.jsx)(v.Z,{className:eO.previousButton,label:J("Previous"),onClick:ej,children:(0,N.jsx)(b,{className:eO.controlIcon})}),(0,N.jsx)(v.Z,{className:eO.nextButton,label:J("Next"),onClick:eT,children:(0,N.jsx)(S,{className:eO.controlIcon})})]})]}),(0,N.jsx)(eD,{isFullScreen:eS,posts:er,currentSlideIndex:ev,onNextSlide:eT,onPreviousSlide:ej,onScrollToSlide:ef,onPostUpdate:e=>q.mutate({newPostData:e}),children:e=>{var t=e.post,n=e.index;return(0,N.jsx)(ex,{hubName:u,streamPosition:n,isVisible:n===ev,post:t,isFullScreen:eS,onFullScreenChange:eP,muted:eu,onMutedChange:eh,onEmpty:()=>{et.current.add(t.supplyOpportunityInstanceId),el(e=>e+1)}})}})]}):(0,N.jsx)(y.Z,{centerOrientation:"horizontalAndVertical"})})};var e_=n(6259),eL=n(78093),eU=n(48352),ez=n(52980),eH=n(39541);let eW={wrapper:"GKxWk"},eB=e=>{var t=e.isModal,n=e.isOpen,i=e.glassCallback,s=e.children;return t?(0,N.jsx)(eH.Z,{glassCallback:i,position:"center",glassProps:{color:ed().black,opacity:.85},isOpen:n,animateIn:!0,children:s}):(0,N.jsx)(ez.Z,{children:(0,N.jsx)("div",{className:eW.wrapper,children:s})})},e$=()=>{var e=(0,l.useState)(!0),t=s()(e,2),n=t[0],i=t[1],o=(0,e_._)().shouldRenderPeeprOrSsrModalOnModal,a=(0,r.s0)(),c=e=>()=>{i(!1),setTimeout(()=>{a(o?e:k.o_.dashboard)},eL.drawerAnimationDurationMs)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(eU.Z,{page:w.H.analyticsPageName}),(0,N.jsx)(e_.x.Consumer,{children:e=>(0,N.jsx)(eB,{isModal:!!o,isOpen:n,glassCallback:c(e),children:(0,N.jsx)(eM,{onClose:c(e)})})})]})}},16234:(e,t,n)=>{n.d(t,{AO:()=>d,Co:()=>c,OL:()=>r,VT:()=>a,aq:()=>p,vz:()=>h});var i=n(44027),s=n.n(i),l=n(5700);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1200;return e.find(e=>e.width<=t&&e.height<=t)||e[e.length-1]}function o(e){var t,n=s()(e);try{for(n.s();!(t=n.n()).done;){var i,o=t.value;if((0,l.RD)(o))return r(o.media);if(((0,l.gD)(o)||(0,l._P)(o))&&null!==(i=o.poster)&&void 0!==i&&i.length)return r(o.poster)}}catch(e){n.e(e)}finally{n.f()}}function a(e){var t,n,i;return null!==(t=e.content)&&void 0!==t&&t.length&&(i=o(e.content)),!i&&null!==(n=e.trail)&&void 0!==n&&n.length&&(i=function(e){var t,n=s()(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,l=o(i.content);if(l)return l}}catch(e){n.e(e)}finally{n.f()}}(e.trail)),i}function c(e){var t=(0,l.RD)(e)?e.media:e.poster;if(void 0!==t)return r(t)}function d(e){var t,n,i,s=[...e.trail?e.trail.flatMap(e=>e.content):[],...null!==(t=e.content)&&void 0!==t?t:[]];return null!==(n=null!==(i=s.find(l.gD))&&void 0!==i?i:s.find(l._P))&&void 0!==n?n:s.find(l.RD)}var u=e=>{var t=e.subtype;return t===l.lr.Heading1||t===l.lr.Heading2||t===l.lr.Quote};function h(e){var t,n=0!==e.content.length,i=0!==e.trail.length,r=(!n&&i?e.trail[0]:e).content,o=s()(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;if((0,l.LX)(a))return;if((0,l.dz)(a)&&u(a))return a.text.trim();if((0,l.R0)(a)&&a.title)return a.title.trim()}}catch(e){o.e(e)}finally{o.f()}}function p(e){var t,n=0!==e.content.length,i=0!==e.trail.length,r=(!n&&i?e.trail[0]:e).content,o=r.filter(l.dz).find(u),a=[],c=s()(r);try{for(c.s();!(t=c.n()).done;){var d=t.value;if(d!==o){if((0,l.LX)(d))break;if((0,l.dz)(d)&&a.push(d.text),(0,l.R0)(d)&&d.description&&a.push(d.description),(0,l._P)(d)){var h=d.artist,p=d.title;h&&p?a.push(`${h} - ${p}`):h?a.push(h):p&&a.push(p)}}}}catch(e){c.e(e)}finally{c.f()}return 0!==a.length?a.map(e=>e.trim()).join("\n\n"):void 0}}}]);-Hebr-Bold-9b609e9268a3f9d73732dc3cc375821e.woff2) format("woff2"),url(https://encore.scdn.co/fonts/CircularSp-Hebr-Bold-caa03e4cb8690e726ef1625c7d91a7a5.woff) format("woff")}@font-face{font-family:CircularSp-Hebr;font-weight:400;font-display:swap;unicode-range:U+0000,U+000d,U+0020,U+0030-0039,U+00a0,U+00a4,U+00b6-00b7,U+01c4-01c6,U+01f1-01f3,U+02bb-02bc,U+05b0-05c4,U+05d0-05ea,U+05f0-05f4,U+200e-200f,U+20aa,U+fb2a-fb36,U+fb38-fb3c,U+fb3e,U+fb40-fb41,U+fb43-fb44,U+fb46-fb4f,U+ffff;src:url(https://encore.scdn.co/fonts/CircularSp-Hebr-Book-414f88babad55bb44c9552d9b92504f7.woff2) format("woff2"),url(https://encore.scdn.co/fonts/CircularSp-Hebr-Book-d8209975eafc81a9499df8401a339ddd.woff) format("woff")}html{--fallback-fonts:Helvetica Neue,helvetica,arial,Hiragino Kaku Gothic Pro,Meiryo,MS Gothic}html[lang=zh-TW]{--fallback-fonts:Helvetica Neue,helvetica,arial,Microsoft JhengHei,PingFang TC,Lantinghei TC,Hiragino Kaku Gothic Pro,Meiryo,MS Gothic}html[lang=zh-CN]{--fallback-fonts:Helvetica Neue,helvetica,arial,Microsoft YaHei,PingFang SC,Lantinghei SC,Hiragino Kaku Gothic Pro,Meiryo,MS Gothic}html[lang=zh-HK]{--fallback-fonts:Helvetica Neue,helvetica,arial,Microsoft JhengHei,PingFang HK,Lantinghei HK,Microsoft JhengHei,PingFang TC,Lantinghei TC,Hiragino Kaku Gothic Pro,Meiryo,MS Gothic}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:root{--video-wrapper-layer:1;--protection-gradient-layer:2;--headers-layer:3;--upsell-layer:4;--controls-layer:5;--overflow-menu-layer:6}