(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1047:function(t,e,n){"use strict";n.r(e);var a=n(980),s=n(901),i=n(527),o=n(38),c=n(655),m=n(508),r={components:{BaseSpinner:n(516).a,BaseButton:m.a,CommentWysiwyg:()=>Promise.all([n.e(165),n.e(1),n.e(2),n.e(10),n.e(62)]).then(n.bind(null,1282)),CommentWysiwygSkeleton:a.a,UserProfileAvatarLegacy:s.a,BaseRecaptcha:()=>n.e(134).then(n.bind(null,1343))},props:{comment:{type:Object,required:!0}},data:()=>({originalCommentContent:null,commentContent:null,saving:!1,editorInitTimedOut:!1}),computed:{buttonDisabled(){return!this.commentContent.content||this.originalCommentContent===this.commentContent.content},isOwn(){return this.$store.getters["comments/isOwn"](this.comment)},captcha(){return this.$store.state.comments.features.commentForm.reCaptcha}},created(){this.load()},methods:{async load(){const t=Object(o.c)(this.comment.commentId);await this.$options.components.CommentWysiwyg(),this.commentContent=await t,this.keepOriginalContent("load")},async save(){try{const t=this.captcha?await this.$refs.captcha.execute():null;await this.$store.dispatch("comments/update",{async:Object(o.l)(Object.assign({},this.commentContent,{mentions:this.$refs.wysiwyg.updateMentions(),shortcodes:this.$refs.wysiwyg.updateShortcodes(),commentId:this.comment.commentId}),t).then((t=>{let{comment:e}=t;return e})).finally(Object(c.a)(this,"saving"))}),await this.$refs.wysiwyg.clearRestore(),this.track("submit_comment","contribution"),this.$emit("saved"),this.$emit("update:edit",!1)}catch(t){this.track("submit_comment_error","engagement")}},keepOriginalContent(t){("load"===t||"init"===t&&!this.editorInitTimedOut)&&(this.originalCommentContent=this.commentContent.content)},cancel(){this.track("cancel_comment_edit_form"),this.$emit("canceled"),this.$emit("update:edit",!1)},track(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"engagement";Object(i.a)().record({category:"comment_edit_form",action:t,label:e})},onEditorReady(){this.$emit("ready"),setTimeout((()=>{this.editorInitTimedOut=!0}),100)}}},l=r,d=n(45),h=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"comments-item-inner space--h-3 space--v-3 space--fromW3-h-4 comments-item-inner--edit",attrs:{id:"comment-edit-form"}},[e("div",{staticClass:"flex boxAlign-jc--all-c"},[e("UserProfileAvatarLegacy",{staticClass:"comment-avatar flex--shrink-0",attrs:{user:t.comment.user,"avatar-class":"width--all-12 height--all-full"}}),e("div",{staticClass:"flex--grow-1"},[t.commentContent?e("CommentWysiwyg",t._b({ref:"wysiwyg",attrs:{disabled:t.saving},on:{"~update":function(e){return t.keepOriginalContent("init")},ready:t.onEditorReady},scopedSlots:t._u([{key:"action",fn:function(){return[e("BaseButton",{staticClass:"button--toW3-square space--ml-a",attrs:{variant:"tertiary",mode:"default"},on:{click:t.cancel}},[e("BaseIcon",{attrs:{name:"cross"}}),e("span",{staticClass:"hide--toW3 space--ml-2"},[t._v(t._s("Cancel"))])],1),e("BaseButton",{staticClass:"button--toW3-square space--ml-1",attrs:{variant:"primary",mode:"brand",seal:t.saving,disabled:t.buttonDisabled},on:{click:t.save}},[t.saving?e("BaseSpinner",{staticClass:"spinner--centered"}):t._e(),e("BaseIcon",{attrs:{name:"tick"}}),e("span",{staticClass:"hide--toW3 space--ml-2"},[t._v(t._s("Update"))])],1)]},proxy:!0}],null,!1,1659742974)},"CommentWysiwyg",t.commentContent,!1,!0)):e("CommentWysiwygSkeleton",{attrs:{loading:""}}),t.captcha?e("BaseRecaptcha",{ref:"captcha"}):t._e()],1)],1)])}),[],!1,null,null,null);e.default=h.exports}}]);0),w=Object(i.defineComponent)({__name:"form-wizard-description-form",props:{placeholder:null,currentStep:null},setup(e){const t=Object(r.e)(),o=Object(r.j)(),{specification:c,isLoading:d,requested:u}=function(){const e=a.b.create(l.a.specification),t=Object(i.computed)((()=>s.a.state.threadForm.fetchedFromUrl.specification)),o=Object(i.computed)((()=>e.isLoading())),n=Object(i.computed)((()=>null!==t.value&&void 0!==t.value));return{specificationLoader:e,isLoading:o,specification:t,requested:n}}(),p=Object(i.ref)(null),m=Object(i.computed)((()=>({minHeight:"calc(70vh - 220px)",dragImageUpload:!0,maxImages:s.a.state.settings.thread.maxNumberOfImagesInThreadDescription})));return{__sfc:!0,features:t,thread:o,specification:c,isLoading:d,requested:u,formRowDescriptionRef:p,wysiwygConfig:m,addToDescription:function(e){var t,o;const i=null===(t=p.value)||void 0===t||null===(o=t.$refs)||void 0===o?void 0:o.wysiwygComponent;null==i||i.$editor.focus.setEnd(),null==i||i.insertEditor({content:"<br /><br />".concat(e)})},FormList:n.l,FormRowProductSpecs:y,FormRowDescription:x.a}}}),k=Object(h.a)(w,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.FormList,{staticClass:"space--mh-0 width--all-12 width--max-pageNarrow"},[t(o.FormRowDescription,{ref:"formRowDescriptionRef",attrs:{"prepared-html-description":o.thread.preparedHtmlDescription,"wysiwyg-features":o.features.wysiwyg,"wysiwyg-config":o.wysiwygConfig,"tips-feature":o.features.tips,"entity-id":o.thread.threadId,required:!1,placeholder:e.placeholder},on:{"update:preparedHtmlDescription":function(t){return e.$set(o.thread,"preparedHtmlDescription",t)},"update:prepared-html-description":function(t){return e.$set(o.thread,"preparedHtmlDescription",t)}},model:{value:o.thread.description,callback:function(t){e.$set(o.thread,"description",t)},expression:"thread.description"}}),o.features.specification&&o.requested?t(o.FormRowProductSpecs,{attrs:{specification:o.specification,"is-loading":o.isLoading,animation:1===e.currentStep.visitedCount||o.isLoading},on:{"add-to-description":o.addToDescription},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s("Especificaciones del producto"))]},proxy:!0}],null,!1,1344079494)}):e._e()],1)}),[],!1,null,null,null);t.a=k.exports},526:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var i=o(633),n=o.n(i),r=o(636),a=o.n(r),s=o(49);const l=["uuid","userId"],c={set(e){return Object.assign(this.payload,e),this},record(e,t){if(this.enabled){const o=this.sanitizePayload(Object.assign({},this.payload,e));this.track(this.validPayload(o),t)}},validPayload(e){return a()(e,this.whiteList)},sanitizePayload:e=>Object(s.a)()?e:n()(e,l)},d=Object.assign(Object.create(c),{enabled:!0,whiteList:["category","action","label","value"],track(e,t){const o=t&&t.nonInteraction;window.gtag&&e.category&&e.action&&window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value,non_interaction:o?1:0})}}),u=()=>Object.assign(Object.create(d),{payload:{}})},577:function(e,t,o){"use strict";o.d(t,"i",(function(){return u})),o.d(t,"g",(function(){return p})),o.d(t,"f",(function(){return m})),o.d(t,"e",(function(){return h})),o.d(t,"c",(function(){return f})),o.d(t,"d",(function(){return g})),o.d(t,"a",(function(){return v})),o.d(t,"h",(function(){return b})),o.d(t,"b",(function(){return y}));var i,n=o(134),r=o.n(n),a=o(8),s=o.n(a),l=o(20),c=o(6),d=o(1);const u={getSuggestions:"/search/users",getProfile:(e,t)=>Object(l.b)(i||(i=r()(["/profile/","/","?"])),e,t),profileRedirect:"/profile/prg",postSocialTerms:e=>"user/social/provider/".concat(e,"/terms")},p=(e,t,o)=>s.a.post(u.postSocialTerms(e),{username:o,termsConditionsAndPrivacy:t?"on":"off"}),m=e=>Object(c.a)({req:d.kd,params:{id:e}}).then((e=>{let{user:t}=e;return(null==t?void 0:t.lastAddress)||null})),h=()=>Object(c.a)({req:d.oc}).then((e=>e.infractions)),f=(e,t)=>Object(c.a)({req:d.nc,params:{typeId:e,placeholder:t}}).then((e=>e.infraction)),g=e=>Object(c.a)({req:d.jd,params:{id:e}}).then((e=>e.user.infractions.points.active)),v=e=>Object(c.a)({req:d.mc,params:{infraction:e}}),b=()=>Object(c.a)({req:d.Oc}).then((e=>e.resentEmailConfirmationToCurrentUser.result)),y=(e,t)=>Object(c.a)({req:d.fc,params:{userId:e,follow:t}}).then((e=>{let{followUser:t}=e;return t.follow}))},597:function(e,t,o){"use strict";o.d(t,"b",(function(){return i}));const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return{params:Object.keys(e).reduce(((o,i)=>(t.push(i),o[i]=JSON.stringify(e[i]),o)),{}),handlers:t.join(" ")}};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{computed:{$d(){return i(Object.assign({},e,this.$directives||{}))}}}}},610:function(e,t,o){"use strict";t.a=window.RedactorPlugins||(window.RedactorPlugins={})},628:function(e,t,o){},631:function(e,t,o){"use strict";var i=o(597),n=o(71),r={name:"WysiwygButton",components:{BaseButton:o(507).a},mixins:[Object(i.a)(),Object(n.a)({button:{any:!0,smAndDown:!0,mdAndDown:!0,lgAndDown:!0},text:{any:!0,smAndDown:!0,mdAndDown:!0,lgAndDown:!0}})],props:{action:{type:Object,default:()=>({})},target:{type:String,required:!0}},computed:{$directives(){return{"wysiwyg-button":Object.assign({},this.action,{target:this.target}),"popover-close":null}}}},a=o(44),s=Object(a.a)(r,(function(){var e=this,t=e._self._c;return t("BaseButton",{class:["space--mr-1",`button--${e.action.key}`],attrs:{variant:"tag",mode:"light",square:"",title:e.action.title,"data-handler":e.$d.handlers,"data-wysiwyg-button":e.$d.params["wysiwyg-button"]}},[t("BaseIcon",{attrs:{name:e.action.icon}})],1)}),[],!1,null,null,null);t.a=s.exports},633:function(e,t,o){var i=o(184),n=o(758),r=o(795),a=o(243),s=o(313),l=o(797),c=o(732),d=o(727),u=c((function(e,t){var o={};if(null==e)return o;var c=!1;t=i(t,(function(t){return t=a(t,e),c||(c=t.length>1),t})),s(e,d(e),o),c&&(o=n(o,7,l));for(var u=t.length;u--;)r(o,t[u]);return o}));e.exports=u},636:function(e,t,o){var i=o(799),n=o(732)((function(e,t){return null==e?{}:i(e,t)}));e.exports=n},673:function(e,t,o){"use strict";var i=o(677),n=o.n(i);const r={angel:"Ángel",annoyed:"Molesto",blank:"Sin palabras",cheeky:"Atrevido",confused:"Confundido",cool:"Cool",creep:"Creep",cry:"Llorando",devil:"Diablito",embarrassed:"Apenado",excited:"Emocionado",fierce:"Feroz",flirt:"Coqueteo",football:"Fútbol",happy:"Feliz",highfive:"Chócala",horror:"Horror",kitty:"Gatito",laugh:"Risa",lipstick:"Barra de labios",lol:"Muerto de risa",love:"Amor",lucha:"Luchador",mad:"Enojado",nerd:"Nerd",ninja:"Ninja",nutella:"Nutella",onion:"Cebolla",party:"Fiesta",pirate:"Pirata",police:"Polecía",poo:"Popó",popcorn:"Palomitas",rainbow:"Arcoíris",relieved:"Fiu",sad:"Triste",shock:"Shock",sir:"Sir",skeptical:"Escéptico",smiley:"Sonriente",strong:"Mujer fuerte",superfunny:"Muerto de risa",thumb:"Bien",tongue:"Lengua",unicorn:"Unicornio",wink:"Ojo cerrado",woot:"Sorprendido",worldcup:"Copa del mundo",worried:"Preocupado",zombie:"Zombie"};t.a=Object.freeze(Object.keys(n.a).map((e=>Object.assign({name:e,label:r[e]},n.a[e]))))},677:function(e,t,o){e.exports=o(678)},678:function(e,t,o){const i=o(679);e.exports=Object.assign(i,{excited:{text:"(excited)",availableIn:["emoticon-popover"],order:15},flirt:{text:"(flirt)",availableIn:["emoticon-popover"],order:27},football:{text:"(football)",availableIn:[],order:47},lipstick:{text:"(lipstick)",availableIn:["emoticon-popover"],order:45},strong:{text:"(strong)",availableIn:["emoticon-popover"],order:44},unicorn:{text:"(unicorn)",availableIn:["emoticon-popover"],order:25},worldcup:{text:"(worldcup)",availableIn:[],order:46}})},679:function(e,t){e.exports={angel:{text:"(angel)",availableIn:["emoticon-popover"],order:10},annoyed:{text:"(annoyed)",availableIn:["emoticon-popover"],order:31},blank:{text:":|",availableIn:["emoticon-popover"],order:28},cheeky:{text:"(cheeky)",availableIn:["emoticon-popover"],order:12},confused:{text:"(confused)",availableIn:["emoticon-popover"],order:29},cool:{text:"8)",availableIn:["emoticon-popover"],order:19},cry:{text:";(",availableIn:["emoticon-popover"],order:38},devil:{text:"(devil)",availableIn:["emoticon-popover"],order:42},embarrassed:{text:"(embarrassed)",availableIn:["emoticon-popover"],order:13},fierce:{text:"(fierce)",availableIn:["emoticon-popover"],order:34},happy:{text:":D",availableIn:["emoticon-popover"],order:3},highfive:{text:"(highfive)",availableIn:["emoticon-popover"],order:18},horror:{text:"(horror)",availableIn:["emoticon-popover"],order:36},kitty:{text:":3",availableIn:["emoticon-popover"],order:43},laugh:{text:"XD",availableIn:["emoticon-popover"],order:5},lol:{text:"(lol)",availableIn:["emoticon-popover"],order:6},love:{text:"<3",availableIn:["emoticon-popover"],order:14},mad:{text:"(mad)",availableIn:["emoticon-popover"],order:33},nerd:{text:"(nerd)",availableIn:["emoticon-popover"],order:21},ninja:{text:"(ninja)",availableIn:["emoticon-popover"],order:22},party:{text:"(party)",availableIn:["emoticon-popover"],order:16},pirate:{text:"(pirate)",availableIn:["emoticon-popover"],order:24},poo:{text:"(poo)",availableIn:["emoticon-popover"],order:41},popcorn:{text:"(popcorn)",availableIn:["emoticon-popover"],order:7},relieved:{text:"(:I",availableIn:["emoticon-popover"],order:9},sad:{text:":(",availableIn:["emoticon-popover"],order:32},shock:{text:"(shock)",availableIn:["emoticon-popover"],order:35},sir:{text:":{",availableIn:["emoticon-popover"],order:20},skeptical:{text:"(skeptical)",availableIn:["emoticon-popover"],order:30},smiley:{text:":)",availableIn:["emoticon-popover"],order:1},thumb:{text:"(y)",availableIn:["emoticon-popover"],order:2},tongue:{text:":p",availableIn:["emoticon-popover"],order:17},wink:{text:";)",availableIn:["emoticon-popover"],order:11},woot:{text:":o",availableIn:["emoticon-popover"],order:39},worried:{text:":S",availableIn:["emoticon-popover"],order:37},zombie:{text:"(zombie)",availableIn:["emoticon-popover"],order:47}}},698:function(e,t,o){"use strict";o(628)},699:function(e,t,o){"use strict";t.a={methods:{preserveSelection(){const e=this.$editor;e&&!e.isSelectionStored&&(e.selection.save(),e.isSelectionStored=!0,e.$editor.one("focusin",(()=>{e.selection.restore(),e.isSelectionStored=!1})))}}}},700:function(e,t,o){"use strict";var i=o(0),n=o.n(i),r=o(106);t.a={created(){this.registerHandler("link","handleLink"),this.registerWriter("updateLink","updateLink"),this.registerWriter("removeLink","removeLink")},methods:{captureLinkSelection(){if(!this.$editor)return{href:"",content:""};const e=this.$editor.utils.isCurrentOrParent("A"),t=e?e.href:"",o=e?e.innerHTML:this.$editor.selection.getHtml()||this.$editor.selection.getCurrent().innerHTML;return{href:t,content:o?Object(r.c)(o):""}},handleLink(e){if(!this.pluginEnabled("link"))return;const{href:t,content:o}=e;void 0!==t&&(this.plugins.link.href=t),void 0!==o&&(this.plugins.link.content=o)},updateLink(e){let{href:t,content:o}=e;if(!this.$editor)return;this.$editor.$editor.focus(),o||(o=this.$editor.selection.getHtml()||this.$editor.selection.getCurrent().innerHTML||t);let i=this.$editor.utils.isCurrentOrParent("A");this.$editor.buffer.set(),i||(i=this.$editor.insert.node(document.createElement("a"))),i&&(i.href=/^https?:\/\//.test(t)?t:"https://"+t,i.innerHTML=o,i.target="_blank"),this.$editor.code.sync()},updateLinkSelection(){"link"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)&&this.handleLink(this.captureLinkSelection())},removeLink(){if(!this.$editor)return;this.$editor.$editor.focus();const e=this.$editor.utils.isCurrentOrParent("A");e&&(this.$editor.buffer.set(),n()(e).replaceWith(n()(e).contents()),this.$editor.code.sync())}}}},701:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e.vue)return e.vue(t)}},702:function(e,t,o){"use strict";var i=o(10),n=o.n(i),r=o(11),a=o.n(r),s=o(0),l=o.n(s),c=o(610),d=o(106),u=o(52);const p={};c.a.shortcode=function(){return{instance:null,init:function(){this.shortcode.instance=new p.Shortcode(this)}}},p.Shortcode=function(){function e(t){n()(this,e);const o=this;let i;o.redactor=t,o.namespace=t.opts.shortcodeNamespace,"function"==typeof t.opts.markForShortcodes?t.opts.markForShortcodes(o.updateForm.bind(o)):(o.$form=l()(t.$element[0].form),o.$form.on("submit",o.updateForm.bind(o))),i=o.readForm(),o.types={},t.replacer.add({regexp:/\[shortcode id="([^"]+)"\/]/g,replacer:function(e,t,n,r){return o.html(i[r])}}),t.code.syncTransformers.push((function(e){return e.find("[data-embed]").each((function(){const e=l()(this);e.replaceWith(o.marker(e.data("embed")))})),e})),t.$editor.on("click","[data-embed]",(function(){const e=l()(this),i=o.data(e),n=o.getType(i);n.onClick&&n.onClick(i,e,t)}))}return a()(e,[{key:"readForm",value:function(){return this.redactor.opts.formatShortcodes?this.redactor.opts.formatShortcodes():this.$form.find('input[name^="'+this.namespace+'["]').get().reduce((function(e,t){return u.a.inputToJson(t.name,t.value,e)}),{})[this.namespace]||{}}},{key:"updateForm",value:function(){const e=this.embeds().get().map((function(e){return this.data(l()(e))}),this);if(this.redactor.opts.vue)return e;this.$form.find('input[name^="'+this.namespace+'["]').remove(),e.length&&this.$form.append(e.reduce(function(e,t){return e.concat(u.a.jsonToInputs(t,[],this.namespace+"["+t.id+"]"))}.bind(this),[]))}},{key:"registerType",value:function(e){this.types[e.name]=e}},{key:"getType",value:function(e){return e&&this.types[e.type]||null}},{key:"add",value:function(e){return e.id="new".concat(Date.now()),l()(this.redactor.insert.node(l()(this.html(e))))}},{key:"set",value:function(e){this.embed(e.id).replaceWith(this.html(e)),this.redactor.replacer.format("shortcode"),this.redactor.code.sync()}},{key:"del",value:function(e){this.embed(e).remove(),this.redactor.code.sync()}},{key:"marker",value:function(e){return'[shortcode id="'+e+'"/]'}},{key:"html",value:function(e){const t=this.getType(e);return t?t.html(this.redactor,l.a.extend({attr:' data-embed="'+e.id+'" data-embed-obj="'+d.a.escapeHtml(JSON.stringify(e))+'" contenteditable="false"'},e)):""}},{key:"embed",value:function(e){return this.redactor.$editor.find('[data-embed="'+e+'"]')}},{key:"embeds",value:function(){return this.redactor.$editor.find("[data-embed]")}},{key:"data",value:function(e){return e.data("embed-obj")}}]),e}(),p.find=function(e){const t=l()('[data-embed="'+e+'"]').closest(".redactor").find("textarea").data("redactor");return t?t.shortcode.instance:null},p.isChild=function(e){return Boolean(l()(e).closest("[data-embed]").length)},t.a=p},704:function(e,t,o){"use strict";var i=o(673),n={props:{filter:{type:String,default:"emoticon-popover"},mode:{type:String,default:"default"}},data:()=>({emojis:i.a,selected:null}),computed:{availableEmojis(){return this.emojis.filter((e=>e.availableIn.includes(this.filter))).sort(((e,t)=>e.order-t.order))}},methods:{emojiType:e=>"emoji--type-".concat(e.name),preview(e){this.selected=e,this.$emit("preview",{emoji:"&nbsp;".concat(e.text,"&nbsp;")})},insert(e,t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("insert",{emoji:"&nbsp;".concat(e.text,"&nbsp;"),event:t})}}},r=(o(698),o(44)),a=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"emojiSelector-list cGrid boxAlign-jc--all-sb"},e._l(e.availableEmojis,(function(o){return t("li",{key:o.name,staticClass:"box--all-i hAlign--all-c"},[t("button",{staticClass:"button button--emoji button--shape-circle button--square space--h-1 space--v-1",class:{"button--selected":o===e.selected},attrs:{type:"button",title:o.text},on:{mouseenter:function(t){return e.preview(o)},touchstart:function(t){return e.insert(o,t)},click:function(t){return e.insert(o,t)}}},[t("span",{class:["emoji",e.emojiType(o)]})])])})),0)])}),[],!1,null,null,null);t.a=a.exports},705:function(e,t,o){"use strict";var i=o(564),n=o(509),r=o(589),a={components:{BaseButton:o(507).a,FormList:n.l,FormRow:n.o,FormLabel:n.k,FormMessageList:n.m,FormContent:n.c,FormInput:n.e},mixins:[r.b],model:{event:"update",prop:"link"},props:{id:{type:String,default:"insertLink"},link:{type:Object,default:()=>({href:"",content:""})},i18n:{type:Object,default:()=>({insertButtonText:"Insertar",updateButtonText:"Actualizar",unlinkButtonText:"Quitar",urlLabel:"URL",contentLabel:"Texto"})},mode:{type:String,default:"default"}},data(){return{linkUrl:this.link.href,formName:this.id,updating:!!this.link.href}},computed:{buttonDisabled(){return!this.linkUrl.length}},watch:{"$v.$invalid"(e){this.$emit("invalid",e)}},validations:{href:[Object(i.j)(),Object(i.n)()]},methods:{setLinkUrl(e){this.linkUrl=e},remove(e){this.$emit("remove",{event:e})},insert(e){this.$v.$invalid||this.$emit("insert",{link:this.link,event:e})}}},s=o(44),l=Object(s.a)(a,(function(){var e=this,t=e._self._c;return t("div",{},[e.$v.error[e.id]?t("FormMessageList",{staticClass:"text--b space--b-2",attrs:{messages:e.$v.messages[e.id]}}):e._e(),t("FormList",[t("FormRow",{attrs:{error:e.$v.error.href}},[t("FormLabel",[e._v(e._s(e.i18n.urlLabel))]),t("FormContent",[t("FormInput",{attrs:{name:"href"},on:{change:function(t){return e.$v.validate("href",e.link.href)},update:function(t){return e.setLinkUrl(e.link.href)}},model:{value:e.link.href,callback:function(t){e.$set(e.link,"href",t)},expression:"link.href"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.href}})],1)],1),t("FormRow",{attrs:{error:e.$v.error.content}},[t("FormLabel",[e._v(e._s(e.i18n.contentLabel))]),t("FormContent",[t("FormInput",{attrs:{name:"content"},model:{value:e.link.content,callback:function(t){e.$set(e.link,"content",t)},expression:"link.content"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.content}})],1)],1),t("FormRow",[t("FormContent",{staticClass:"flex",class:{"boxAlign-jc--all-sb":e.updating}},[e.updating?t("BaseButton",{staticClass:"flex--shrink-0 space--mr-2",attrs:{variant:"tertiary",mode:"default"},on:{click:e.remove}},[e._v(" "+e._s(e.i18n.unlinkButtonText)+" ")]):e._e(),t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:e.buttonDisabled},on:{click:e.insert}},[e._v(" "+e._s(e.updating?e.i18n.updateButtonText:e.i18n.insertButtonText)+" ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=l.exports},707:function(e,t,o){"use strict";var i=o(516),n=o(631),r=o(704),a=o(705),s=o(564),l=o(509),c=o(589),d=o(507),u={components:{BaseButton:d.a,FormList:l.l,FormRow:l.o,FormMessageList:l.m,FormContent:l.c,FormTextarea:l.s},mixins:[c.b],model:{event:"update"},props:{id:{type:String,default:"insertCode"},i18n:{type:Object,default:()=>({buttonText:"Insertar"})},mode:{type:String,default:"default",validators:e=>-1!==["primary","default"].indexOf(e)}},validations:{code:[Object(s.j)()]},data(){return{formName:this.id,code:""}}},p=o(44),m=Object(p.a)(u,(function(){var e=this,t=e._self._c;return t("FormList",[t("FormRow",{attrs:{error:e.$v.error.code}},[t("FormContent",[t("FormTextarea",{staticClass:"space--mt-1",attrs:{id:"codePopover-code",rows:"5",placeholder:"Código HTML",name:"code"},on:{change:function(t){return e.$v.validate("code",e.code)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.code}})],1)],1),t("FormRow",[t("FormContent",[t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:!e.code},on:{click:function(t){return e.$emit("insert",e.code)}}},[e._v(" "+e._s(e.i18n.buttonText)+" ")])],1)],1)],1)}),[],!1,null,null,null).exports,h=o(71),f=o(597),g={components:{InsertLink:a.a,InsertCode:m,EmojiSelector:r.a,WysiwygButton:n.a,BaseButton:d.a},mixins:[i.a,Object(h.a)({button:{any:!0,smAndDown:!0},buttonText:{any:!0,smAndDown:!0,mdAndDown:!0},primaryButton:{any:!0,smAndDown:!0},primaryButtonText:{any:!0,smAndDown:!0},toolbarActions:{xsOnly:!0,smAndDown:!0},toolbarCompactButton:{smAndUp:!0}})],props:{target:{type:String,required:!0},directives:{type:Object,default:()=>({})},expanded:{type:Boolean,default:!1},plugins:{type:Object,default:()=>({})}},data:()=>({actionsPopoverActive:!1,emojiPopoverActive:!1,linkPopoverActive:!1,imageUploadPopoverActive:!1,htmlPopoverActive:!1}),computed:{popoverLayouts(){const e={preset:"s",right:{target:".redactor"},left:{target:".redactor"},classes:"zIndex--modal"};return[e,Object.assign({},e,{preset:"n"})]},imageUploadAvailable(){return(!!this.$slots["image-upload"]||!!this.$scopedSlots["image-upload"])&&this.plugins.image},toggleExpandedText(){return this.expanded?"Contraer":"Expandir"},$d(){return Object.assign({expandEditor:Object(f.b)({toggle:{toggles:[{target:".redactor",className:"aGrid redactor--height-full bg--main"}]}})},this.directives)}},methods:{updatePlugin(e,t){this.$emit("plugin-update",{key:e,value:t})},toggleExpandEditor(){this.$emit("editor-expand",!this.expanded)},captureFocus(e){this.$emit("editor-capture",e)}}},v={components:{WysiwygToolbarBase:Object(p.a)(g,(function(){var e=this,t=e._self._c;return t("div",e._g(e._b({staticClass:"toolbar space--h-2 width--all-12"},"div",e.$attrs,!1),e.$listeners),[e._t("before"),e.$scopedSlots.actions?t("div",[t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",class:[e.toolbarCompactButtonResponsive],attrs:{variant:"tag",mode:"light",selected:e.actionsPopoverActive,title:"Texto"}},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"format-text"}}),t("BaseIcon",{staticClass:"button-dropdown-icon",attrs:{name:"dropdown"}}),t("BasePopover",{attrs:{active:e.actionsPopoverActive},on:{"update:active":function(t){e.actionsPopoverActive=t},open:function(t){return e.captureFocus("formatText")}},scopedSlots:e._u([{key:"default",fn:function({close:o}){return[t("PopoverHead",{attrs:{icon:"format-text"}},[e._v(e._s("Texto"))]),t("PopoverBody",[e._t("actions",null,{close:o})],2)]}}],null,!0)})],1),t("span",{class:e.toolbarActionsResponsive},[e._t("actions",null,{close:()=>null})],2)],1):e._e(),e.plugins&&e.plugins.line?t("WysiwygButton",{attrs:{action:e.plugins.line,target:e.target,breakpoints:e.plugins.line.breakpoints}}):e._e(),e.plugins.emoji?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Emoticonos",selected:e.emojiPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"smiley"}}),t("BasePopover",{attrs:{active:e.emojiPopoverActive,width:"300","mobile-sheet":""},on:{"update:active":function(t){e.emojiPopoverActive=t},open:function(t){return e.captureFocus("emoji")}},scopedSlots:e._u([{key:"default",fn:function({close:o}){return[t("PopoverHead",{attrs:{icon:"smiley"}},[e._v(e._s("Emoticonos"))]),t("PopoverBody",[t("EmojiSelector",{on:{insert:function(t){e.$emit("editor-insert",{content:t.emoji}),o()}}})],1)]}}],null,!1,381371772)})],1):e._e(),e.plugins.link?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Link",selected:e.linkPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"link"}}),t("BasePopover",{attrs:{active:e.linkPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.linkPopoverActive=t},open:function(t){return e.captureFocus("link")}},scopedSlots:e._u([{key:"default",fn:function({close:o}){return[t("PopoverHead",{attrs:{icon:"link"}},[e._v(e._s("Link"))]),t("PopoverBody",[t("InsertLink",{attrs:{link:{...e.plugins.link}},on:{remove:function(t){e.$emit("editor-insert",{method:"removeLink"}),o()},insert:function(t){e.$emit("editor-insert",{content:t.link,method:"updateLink"}),o()},update:function(t){return e.updatePlugin("link",t)}}})],1)]}}],null,!1,541552780)})],1):e._e(),e.imageUploadAvailable?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Imagen",selected:e.imageUploadPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"image"}}),t("BasePopover",{attrs:{active:e.imageUploadPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.imageUploadPopoverActive=t},open:function(t){return e.captureFocus("image")}},scopedSlots:e._u([{key:"default",fn:function({close:o}){return[t("PopoverHead",{attrs:{icon:"image"}},[e._v(e._s("Insertar imagen"))]),t("PopoverBody",[e._t("image-upload",null,{close:o})],2)]}}],null,!0)})],1):e._e(),e.plugins.html?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"HTML",selected:e.htmlPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"code"}}),t("BasePopover",{attrs:{active:e.htmlPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.htmlPopoverActive=t},open:function(t){return e.captureFocus("html")}},scopedSlots:e._u([{key:"default",fn:function({close:o}){return[t("PopoverHead",{attrs:{icon:"code"}},[e._v(e._s("Insertar código HTML"))]),t("PopoverBody",[t("InsertCode",{on:{insert:function(t){e.$emit("editor-insert",{content:t}),o()}}})],1)]}}],null,!1,2392699295)})],1):e._e(),e.plugins.expand?t("BaseButton",{class:{"button-expand--selected":e.expanded},attrs:{variant:"tag",mode:"light",square:"","data-handler":e.$d.expandEditor.handlers,"data-toggle":e.$d.expandEditor.params.toggle,title:e.toggleExpandedText},on:{click:e.toggleExpandEditor}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:e.expanded?"contract":"expand"}})],1):e._e(),e._t("after")],2)}),[],!1,null,null,null).exports,WysiwygButton:n.a},props:{target:{type:String,required:!0},plugins:{type:Object,default:()=>({})},breakpoints:{type:Object,default:()=>({toolbarActions:{xsOnly:"hide"},toolbarCompactButton:{smAndUp:"hide"}})}},computed:{hasActions(){return this.plugins.bold||this.plugins.strike||this.plugins.italic||this.plugins.list}}},b=Object(p.a)(v,(function(){var e=this,t=e._self._c;return t("WysiwygToolbarBase",e._g(e._b({attrs:{target:e.target,plugins:e.plugins,breakpoints:e.breakpoints},scopedSlots:e._u([{key:"before",fn:function(){return[e._t("before")]},proxy:!0},e.hasActions?{key:"actions",fn:function({close:o}){return[t("span",{staticClass:"flex"},[e.plugins.bold?t("WysiwygButton",{attrs:{action:e.plugins.bold,target:e.target,breakpoints:e.plugins.bold.breakpoints},nativeOn:{click:function(e){return o.apply(null,arguments)}}}):e._e(),e.plugins.strike?t("WysiwygButton",{attrs:{action:e.plugins.strike,target:e.target,breakpoints:e.plugins.strike.breakpoints},nativeOn:{click:function(e){return o.apply(null,arguments)}}}):e._e(),e.plugins.italic?t("WysiwygButton",{attrs:{action:e.plugins.italic,target:e.target,breakpoints:e.plugins.italic.breakpoints},nativeOn:{click:function(e){return o.apply(null,arguments)}}}):e._e(),e.plugins.list?t("WysiwygButton",{attrs:{action:e.plugins.list,target:e.target,breakpoints:e.plugins.list.breakpoints},nativeOn:{click:function(e){return o.apply(null,arguments)}}}):e._e()],1)]}}:null,{key:"image-upload",fn:function({close:t}){return[e._t("image-upload",null,{close:t})]}},{key:"after",fn:function(){return[e._t("after")]},proxy:!0}],null,!0)},"WysiwygToolbarBase",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=b.exports},708:function(e,t,o){"use strict";var i={components:{ImageUploadForm:o(725).a},props:{bucket:{type:String},variation:{type:String,default:"content"},mode:{type:String,default:"default"}},methods:{async handleSubmit(e){this.$emit("upload",e)}}},n=o(44),r=Object(n.a)(i,(function(){var e=this;return(0,e._self._c)("ImageUploadForm",{attrs:{mode:e.mode,"has-alignment-selector":"","has-url-input":"","show-file-name":"","is-loading":!1},on:{submit:e.handleSubmit}})}),[],!1,null,null,null);t.a=r.exports},716:function(e,t,o){"use strict";var i=o(312),n=o(597),r=o(707),a=o(708),s=o(699);let l=null;var c,d,u={created(){this.$on("focus",(()=>{l=this.name}))}},p={methods:{textConfig(e){let{breakpoints:t={button:{any:"btn--square"},text:{any:"hide"}}}=e;return{bold:{module:"inline",fn:"format",args:["strong"],title:"Negrita",key:"bold",icon:"bold",breakpoints:t},strike:{module:"inline",fn:"format",args:["del"],title:"Borrado",key:"deleted",icon:"strike",breakpoints:t},italic:{module:"inline",fn:"format",args:["em"],title:"Cursiva",key:"italic",icon:"italic",breakpoints:t},list:{module:"list",fn:"toggle",args:["unorderedlist"],title:"Lista",key:"unorderedlist",icon:"bullet-list",breakpoints:t},blockquote:{breakpoints:t},line:{module:"line",fn:"insert",title:"Línea",key:"line",icon:"line",breakpoints:t,showOnExpand:!0}}}}},m=o(700),h=o(32),f=o.n(h),g=o(134),v=o.n(g),b=(o(8),o(20));const y=e=>Object(b.b)(c||(c=v()(["/image/upload/","?"])),e),x=e=>Object(b.b)(d||(d=v()(["/image/upload-from-uri/","?"])),e),w=["type","value"];var k={created(){this.registerWriter("insertImage","insertImage")},computed:{imageUploadAvailable(){return(!!this.$slots["image-upload"]||!!this.$scopedSlots["image-upload"])&&this.pluginConfig.plugins.image}},methods:{insertImage(e){this.$editor.$editor.focus();const{type:t,value:o}=e,n=f()(e,w);Object(i.a)(this.$editor,n,{[t.toLowerCase()]:o})},imageConfig(e){return{image:Object.assign({bucket:e.imageBucket,variation:e.imageVariation},this.plugins.image||{})}},imageUploadConfig(e){let{imageVariation:t="content",imageBucket:o="threads"}=e;return{imageFormat:t,imageType:t,imageUploadEndpoint:y(o),imageLinkEndpoint:x(o),imageVariation:t,imageBucket:o}}}},_={methods:{htmlConfig:()=>({html:!0})}},C={inheritAttrs:!1},j=o(44),$=Object(j.a)(C,(function(){var e=this,t=e._self._c;return t("div",[t("input",e._g(e._b({staticClass:"mentionList",attrs:{name:"mentionsList",type:"hidden"}},"input",e.$attrs,!1),e.$listeners)),e._m(0)])}),[function(){var e=this._self._c;return e("div",{staticClass:"mentions atwho-container space--t-2 space--h-2"},[e("span",{staticClass:"atwho-at mute--text lbox--v-2"},[this._v("@")]),e("ul",{staticClass:"atwho-view fGrid"})])}],!1,null,null,null).exports,O=o(577);var I={components:{Mentions:$},data:()=>({currentMentions:""}),created(){this.handleMentions=this.handleMentions.bind(this),this.updateMentions=this.updateMentions.bind(this),this.registerHandler("mentions","handleMentions")},methods:{handleMentions(e){this.plugins.mentions=e,this.currentMentions=e},updateMentions(){return this.currentMentions},mentionsConfig:()=>({searchUrl:O.i.getSuggestions,mentionInputSelector:".mentionList",profileUrl:"".concat("https://www.chollometro.com").concat(O.i.getProfile("==NameReplace==")),replacementKey:"==NameReplace=="})}};const S=["id","type"],B=["shortcode"],L=["shortcode","shortcode_id"];var F={created(){this.markForShortcodes=this.markForShortcodes.bind(this),this.updateShortcodes=this.updateShortcodes.bind(this),this.formatShortcodes=this.formatShortcodes.bind(this)},methods:{shortcodeConfig(){return{markForShortcodes:this.markForShortcodes,formatShortcodes:this.formatShortcodes}},markForShortcodes(e){this.redactorShortcode=e},updateShortcodes(){const e=this.plugins.shortcodes;return this.plugins.shortcodes=this.redactorShortcode().map((t=>{const{id:o,type:i}=t,n=f()(t,S),r=e.find((e=>e.shortcode_id===o))||{},{shortcode:a={}}=r,s=f()(r,B);return Object.assign({},s,{shortcode_id:o,type:i,shortcode:Object.assign({},a,n)})})),this.plugins.shortcodes},formatShortcodes(){var e;return null===(e=this.plugins.shortcodes)||void 0===e?void 0:e.reduce(((e,t)=>{let{shortcode:o,shortcode_id:i}=t,n=f()(t,L);return e[i]=Object.assign({id:i},n,o),e}),{})}}},P=o(653),T={methods:{expandEditor(e){this.expanded=e},expandConfig:()=>({expand:!0})}},A=o(5),E=o(0),q=o.n(E),N=o(2),D=o(7),H=o(45),M=o(3),R=o(106);const Q={history:[],max:100};q()(document).on("focusin",(e=>{Q.history.unshift(e)>Q.max&&(Q.history.length=Q.max)}));var U=e=>{var t=null;return Q.history.some((o=>{var i;return!(!q.a.contains(document,o.target)||!(i=q()(o.target)).is(e))&&(t=i,!0)})),t},W=o(610),V=o(701),z=o(43),G=o(23),J=o(702);function K(e,t,o){t=q()(t),D.a.process(q.a.get(o.endpoint),{$trigger:t}).always(H.a.init(t,o.seal)).always(M.a.tmpClass(t,o.className)).done((function(t){const o=t.data.shortcode,i=e.shortcode.instance.add(o);e.$editor.scrollTop(i.position().top),e.caret.setAfter(q()("<br><br>").insertAfter(i)[1])}))}function X(e,t){e=q()(e);const o=J.a.find(t.id),i=o.data(o.embed(t.id));if(i){const n=void 0!==t.content?t.content:M.a.findTargets(e,t.textarea).val();i.content=R.a.escapeHtml(n),o.set(i)}e.trigger("layer-destroy")}function Y(e,t){e=q()(e);const o=J.a.find(t.id);o&&o.del(t.id),e.trigger("layer-destroy")}W.a.quote=function(){return{init:function(){const e=this.opts,t={name:"quote",html:function(e,t){return t.content=R.a.escapeHtml(t.content),(e=>{let{attr:t,content:o,original_comment_username:i,original_comment_created_at_formatted:n}=e;return'\n\t<blockquote class="userHtml-quote" '.concat(t,'>\n\t\t<span class="userHtml-quote-author">').concat(i,'</span>\n\t\t<span class="userHtml-quote-time">').concat(n,'</span>\n\t\t<p class="userHtml-quote-content">').concat(o,"</p>\n\t</blockquote>\n")})(t)},onClick:function(t,o){Object(V.a)(e,{key:"editQuote",value:t}),z.a.clickHandler(o,q.a.extend({},M.a.$win.height()<600?G.a.defaults:{layout:[{preset:"n",x:0},{preset:"s",x:0}],close:!1,reTrigger:"ignore"},{target:"#template-quotePopover",tplData:t}))}};this.shortcode.instance.registerType(t),this.shortcode.instance.registerType(q.a.extend({},t,{name:"legacy_quote"}))}}},N.a.add("quote-add","click",(function(e,t){const o=U(".redactor-editor")||q()(".redactor-editor"),n=i.b.getTextarea(o);i.b.initRedactor(n).then((o=>{K(o,e,t)}))}),{className:"",seal:{cover:!1}}),N.a.add("quote-update","click",X),N.a.add("quote-del","click",Y);const Z=new A.default({data:()=>({shortcodeId:null}),methods:{triggerQuote(e,t){this.$emit("triggerQuote",{event:e,entityId:t})},addQuote(e,t){this.$emit("addQuote",{event:e,entityId:t})},editQuote(e){this.shortcodeId=e},updateQuote(e,t){this.$emit("updateQuote",{event:e,content:t,shortcodeId:this.shortcodeId}),this.shortcodeId=null},deleteQuote(e,t){this.$emit("deleteQuote",{event:e,shortcodeId:t})}}});var ee={created(){this.registerHandler("editQuote","editQuote"),this.addQuote=this.addQuote.bind(this),this.editQuote=this.editQuote.bind(this),this.updateQuote=this.updateQuote.bind(this),this.deleteQuote=this.deleteQuote.bind(this),Z.$on("addQuote",this.addQuote),Z.$on("updateQuote",this.updateQuote),Z.$on("deleteQuote",this.deleteQuote),this.$once("hook:beforeDestroy",(()=>{Z.$off("addQuote",this.addQuote),Z.$off("updateQuote",this.updateQuote),Z.$off("deleteQuote",this.deleteQuote)}))},methods:{addQuote(e){let{event:t,entityKey:o="comment_id",entityId:i}=e;this.name===l&&K(this.$editor,t.target,{endpoint:"/shortcodes/template/quote?".concat(o,"=").concat(i),seal:{cover:!1},className:""})},updateQuote(e){let{event:t,shortcodeId:o,content:i}=e;this.name===l&&X(t.target,{id:o,content:i})},deleteQuote(e){let{event:t,shortcodeId:o}=e;this.name===l&&Y(t.target,{id:o})},editQuote(e){Z.editQuote(e)}}},te=o(637),oe=o(566),ie=o(120),ne=(o(569),o(719));const re={allowedTags:["ul","li","a","strong","em","del","br","span","div","img","iframe","hr","blockquote"],plugins:["emoji","imagify","shortcode","video","linkify","restore","quote"],buttonActiveClass:"button--selected",buttonTarget:".redactor/.button{% if key %}--{{key}}{% endif %}",forceReplaceDivsOnPaste:!0,linebreaks:!0,imageEditable:!1,imageUrl:"url",replaceDivs:!1,staticDom:!0,maxImages:null};var ae={components:{SlideUpDown:ne.a,WysiwygToolbar:r.a,EditorImageUpload:a.a},mixins:[Object(n.a)(),u,s.a,T,_,P.b,p,m.a,k,I,F,ee],inheritAttrs:!1,model:{event:"update"},props:{name:{type:String,required:!0},value:{type:String,default:""},disabled:{type:Boolean,default:!1},directives:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},plugins:{type:Object,default:()=>({})},mode:{type:String,default:"default",validators:e=>-1!==["brand","default"].indexOf(e)},hasError:{type:Boolean,default:!1}},data(){return{wysiwygConfig:Object.assign({},re,{mentions:this.mentionsConfig&&this.mentionsConfig()},this.restoreConfig?this.restoreConfig():{},this.imageUploadConfig?this.imageUploadConfig(this.config):{},this.shortcodeConfig?this.shortcodeConfig():{},this.config),isTipVisible:!1,expanded:!1}},computed:{redactorStyles(){return this.config.minHeight?{"min-height":this.config.minHeight}:null},pluginConfig(){const e=this.mapPlugins();return{target:"#".concat(this.name),plugins:e}},redactorValue:{get(){return this.value},set(e){this.syncFromEditor(Object(ie.d)(e))}},$directives(){return Object.assign({"focus-toggle":{toggles:[{className:"redactor--focus",target:".redactor"}]}},this.directives)},editorClassList(){return{"redactor-editor--small":this.config.small,"redactor-editor--admin":this.config.admin}}},async mounted(){this.$editor=await i.b.initRedactor(this.$refs.input,Object.assign({},this.wysiwygConfig,{vue:this.updatePlugin.bind(this)}));const e=e=>this.$emit("change",e),t=e=>this.$emit("focus",e),o=e=>{if(e.data){const e=this.$refs.editor.innerHTML;this.syncFromEditor(e)}};this.$refs.editor.addEventListener("blur",e),this.$refs.editor.addEventListener("focus",t),this.$refs.editor.addEventListener("input",o),this.$once("hook:beforeDestroy",(()=>{this.$refs.editor.removeEventListener("blur",e),this.$refs.editor.removeEventListener("focus",t),this.$refs.editor.removeEventListener("input",o)})),setTimeout((()=>this.$emit("ready")))},destroyed(){this.handlers={},this.writers={},this.$editor=null},methods:{mapPlugins(){const e={},t=this.wysiwygConfig,o=Object.assign({},this.textConfig?this.textConfig(t):{},this.imageConfig?this.imageConfig(t):{},this.expandConfig?this.expandConfig(t):{},this.htmlConfig?this.htmlConfig(t):{},this.plugins);for(const[t,i]of Object.entries(o))(t in this.features&&this.features[t]||void 0===this.features[t])&&(e[t]=i);return e},registerHandler(e,t){this.handlers=this.handlers||{value:"syncToEditor"},this.handlers[e]=t},registerWriter(e,t){this.writers=this.writers||{},this.writers[e]=t},pluginEnabled(e){return!1!==this.plugins[e]},updatePlugin(e){let{key:t,value:o}=e;if(t in this.handlers)return this[this.handlers[t]](o)},syncFromEditor(e){this.$emit("update",e)},syncToEditor(e){this.redactorValue!==e&&(this.redactorValue=e)},async syncRedactor(){await this.$nextTick(),this.$refs.editor.innerHTML=this.redactorValue},captureEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.preserveSelection(),this.updateLinkSelection&&this.updateLinkSelection(e)},insertEditor(e){let{content:t,method:o="htmlWithoutClean"}=e;o in this.writers?this[this.writers[o]](t):this.$editor.insert[o](t)},showTip(){this.$scopedSlots.tip&&(this.isTipVisible=!0)},hideTip(){this.isTipVisible=!1},dropLocalImages(e){const{maxImages:t,dragImageUpload:o}=this.wysiwygConfig,i=Array.from((null==e?void 0:e.detail.files)||[]),n=this.getNumberOfImgToUpload();if(!o)return void Object(te.f)(e.type);if(0===i.length)return;let r=i.filter((e=>Object(te.a)(e))).filter((e=>{const t=!Object(oe.a)(e);return t||Object(te.d)(),t}));t&&r.length>n&&(Object(te.e)(t),r=r.slice(0,n)),r.forEach((e=>{this.insertEditor({content:{alignment:"left",type:"FILE",value:e},method:"insertImage"})}))},insertLocalImage(e){const{maxImages:t}=this.wysiwygConfig;0!==this.getNumberOfImgToUpload()?this.insertEditor({content:e,method:"insertImage"}):Object(te.e)(t)},getNumberOfImgToUpload(){const e=(this.$refs.editor.innerHTML.match(/<img/g)||[]).length,{maxImages:t}=this.wysiwygConfig;return t?t-e:t}}},se=ae,le=Object(j.a)(se,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{isActive:e.$slots.tip,handler:e.hideTip},expression:"{ isActive: $slots.tip, handler: hideTip }"}],staticClass:"redactor redactor-box aGrid",class:{"redactor--hasError":e.hasError},attrs:{disabled:e.disabled},on:{click:e.showTip}},[t("div",{ref:"editor",staticClass:"redactor-editor redactor-placeholder size--all-m border--b-r width--all-12 overflow--scrollX-raw overflow--scrollY-raw userHtml userHtml--wysiwyg overflow--wrap-break hide--js-off",class:e.editorClassList,style:e.redactorStyles,attrs:{"data-handler":e.$d.handlers,"data-focus-toggle":e.$d.params["focus-toggle"],"data-field-name":e.name,tabindex:"0"}}),t("div",{staticClass:"redactor-tips",class:{"space--h-2 space--v-2":e.$slots.tip}},[t("SlideUpDown",[e.isTipVisible?t("div",[e._t("tip")],2):e._e()])],1),t("textarea",e._g(e._b({ref:"input",staticClass:"width--all-12 hide--js-on",attrs:{id:e.name,name:e.name},domProps:{value:e.redactorValue},on:{"paste-local-file":e.dropLocalImages,"drop-local-file":e.dropLocalImages}},"textarea",e.$attrs,!1),e.$listeners)),e.pluginEnabled("mentions")?t("Mentions",{attrs:{value:e.plugins.mentions}}):e._e(),e._t("default",(function(){return[t("WysiwygToolbar",e._b({attrs:{expanded:e.expanded},on:{"plugin-update":e.updatePlugin,"editor-insert":e.insertEditor,"editor-capture":e.captureEditor,"editor-expand":e.expandEditor},scopedSlots:e._u([e.pluginEnabled("image")?{key:"image-upload",fn:function({close:o}){return[t("EditorImageUpload",e._b({attrs:{mode:"brand"},on:{upload:function(t){e.insertLocalImage(t),o()}}},"EditorImageUpload",e.pluginConfig.plugins.image,!1))]}}:null],null,!0)},"WysiwygToolbar",e.pluginConfig,!1))]}),{pluginConfig:e.pluginConfig,pluginEnabled:e.pluginEnabled,updatePlugin:e.updatePlugin,insertEditor:e.insertEditor,captureEditor:e.captureEditor,expandEditor:e.expandEditor})],2)}),[],!1,null,null,null);t.a=le.exports},723:function(e,t){e.exports=function(e,t,o){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(o=o>n?n:o)<0&&(o+=n),n=t>o?0:o-t>>>0,t>>>=0;for(var r=Array(n);++i<n;)r[i]=e[i+t];return r}},729:function(e,t,o){"use strict";var i={props:{alignCenter:{type:Boolean,default:!1}},computed:{containerClasses(){return{"boxAlign-ai--all-c":this.alignCenter}},hasTitle(){return!!this.$scopedSlots.title},hasSubTitle(){return!!this.$scopedSlots["sub-title"]}}},n=o(44),r=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("Transition",e._g({attrs:{appear:"",name:"slide-in","leave-active-class":"hide","leave-to-class":"hide"}},e.$listeners),[t("section",{staticClass:"flex flex--grow-1 flex--shrink-0 boxAlign-jc--all-c width--all-12",class:e.containerClasses},[t("div",{staticClass:"flex flex--dir-col space--fromW2-h-4 space--h-3 space--fromW3-t-6 space--b-4 boxAlign-ai--all-c width--all-12"},[e.hasTitle?t("div",{staticClass:"space--mb-4 width--all-12 width--max-pageNarrow"},[e._t("title")],2):e._e(),e.hasSubTitle?t("div",{staticClass:"space--mb-4 width--all-12 width--max-pageNarrow"},[e._t("sub-title")],2):e._e(),e._t("form"),e._t("footnotes")],2)])])}),[],!1,null,null,null);t.a=r.exports},730:function(e,t,o){"use strict";var i=o(44),n=Object(i.a)({},(function(e,t){return e("h1",{staticClass:"size--all-xxxl text--color-charcoal text--b",class:t.data.staticClass},[t._t("default")],2)}),[],!0,null,null,null);t.a=n.exports},732:function(e,t,o){var i=o(798),n=o(325),r=o(326);e.exports=function(e){return r(n(e,void 0,i),e+"")}},749:function(e,t,o){var i=o(136),n=o(81),r=o(122);e.exports=function(e){return"string"==typeof e||!n(e)&&r(e)&&"[object String]"==i(e)}},770:function(e,t,o){"use strict";var i=o(509),n=o(716),r=o(567),a=o(5),s={__name:"form-row-description",props:{value:{type:String,default:""},entityId:{type:[Number,String],default:"new"},fieldName:{type:String,default:"description"},wysiwygFeatures:{type:Object,default:()=>({})},wysiwygConfig:{type:Object,default:()=>({})},tipsFeature:{type:Boolean,default:!1},required:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["input","update:preparedHtmlDescription"],setup(e,t){let{emit:o}=t;const s=e,l=Object(r.m)(),c=Object(a.ref)(!1),d=Object(a.inject)("$v"),u=Object(a.ref)(null),p=Object(a.computed)({get:()=>s.value,set(e){o("input",e),d.validate(s.fieldName,e)}}),m=Object(a.computed)((()=>{var e;return Object.assign({restoreId:"thread-desc-".concat(null!==(e=s.entityId)&&void 0!==e?e:"new")},s.wysiwygConfig)})),h=Object(a.computed)((()=>d.messages[s.fieldName]&&d.messages[s.fieldName].length>0));return{__sfc:!0,wysiwygPlugins:l,canRestore:c,$v:d,emit:o,props:s,wysiwygComponent:u,localValue:p,wysiwygConfigOverridden:m,hasError:h,update:function(){o("update:preparedHtmlDescription",u.value.$editor.$editor.html()),u.value.updateShortcodes()},FormTipLabel:i.u,WysiwygEditor:n.a,FormRow:i.o,FormLabel:i.k,FormContent:i.c,FormMessageList:i.m}}},l=o(44),c=Object(l.a)(s,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.FormRow,{directives:[{name:"track",rawName:"v-track:formField",value:{name:e.fieldName},expression:"{ name: fieldName }",arg:"formField"}],attrs:{error:o.$v.error[e.fieldName]}},[t(o.FormLabel,{staticClass:"flex",attrs:{required:e.required},scopedSlots:e._u([{key:"end",fn:function(){return[o.canRestore?t("button",{staticClass:"link text--color-brandPrimary",attrs:{type:"button"},on:{click:e.$refs.wysiwygComponent.undoRestore}},[e._v(" "+e._s("Ignorar la descripción recuperada")+" ")]):e._e()]},proxy:!0}])},[e._t("label")],2),t(o.FormContent,[t(o.WysiwygEditor,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"wysiwygComponent",staticClass:"redactor--mode-primary width--all-12",attrs:{"has-error":o.hasError,name:e.fieldName,placeholder:e.placeholder,config:o.wysiwygConfigOverridden,plugins:o.wysiwygPlugins,features:e.wysiwygFeatures},on:{canRestore:e=>o.canRestore=e,update:o.update},scopedSlots:e._u([{key:"tip",fn:function(){return[e._t("descTip",(function(){return[e.tipsFeature?t(o.FormTipLabel,{attrs:{title:"Cuéntanos algo sobre tu oferta.",descr:"Incluye información detallada sobre el producto, enlaces a cualquier información o análisis relevante y cuéntanos, además, por qué crees que es una oferta que vale la pena compartir"}}):e._e()]}))]},proxy:!0}],null,!0),model:{value:o.localValue,callback:function(e){o.localValue=e},expression:"localValue"}}),o.$v.messages[e.fieldName]&&o.$v.messages[e.fieldName].length?t(o.FormMessageList,{attrs:{messages:o.$v.messages[e.fieldName]}}):e._e()],1)],1)}),[],!1,null,null,null);t.a=c.exports},774:function(e,t,o){var i=o(247),n=o(800),r=o(243);e.exports=function(e,t,o){for(var a=-1,s=t.length,l={};++a<s;){var c=t[a],d=i(e,c);o(d,c)&&n(l,r(c,e),d)}return l}},795:function(e,t,o){var i=o(243),n=o(315),r=o(796),a=o(183);e.exports=function(e,t){return t=i(t,e),null==(e=r(e,t))||delete e[a(n(t))]}},796:function(e,t,o){var i=o(247),n=o(723);e.exports=function(e,t){return t.length<2?e:i(e,n(t,0,-1))}},797:function(e,t,o){var i=o(66);e.exports=function(e){return i(e)?void 0:e}},798:function(e,t,o){var i=o(322);e.exports=function(e){return(null==e?0:e.length)?i(e,1):[]}},799:function(e,t,o){var i=o(774),n=o(330);e.exports=function(e,t){return i(e,t,(function(t,o){return n(e,o)}))}},800:function(e,t,o){var i=o(321),n=o(243),r=o(210),a=o(88),s=o(183);e.exports=function(e,t,o,l){if(!a(e))return e;for(var c=-1,d=(t=n(t,e)).length,u=d-1,p=e;null!=p&&++c<d;){var m=s(t[c]),h=o;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(c!=u){var f=p[m];void 0===(h=l?l(f,m,p):void 0)&&(h=a(f)?f:r(t[c+1])?[]:{})}i(p,m,h),p=p[m]}return e}},854:function(e,t,o){"use strict";var i=o(5);const n={error:{color:"red",icon:"info-warning"},warn:{color:"yellow",icon:"warning"},info:{color:"blue",icon:"info"},success:{color:"green",icon:"thumb-up"},notification:{color:"black",icon:"bolt"}};var r=Object(i.defineComponent)({__name:"alert-message-icons",props:{messageType:null},setup(e){const t=e,o=Object(i.computed)((()=>{const{color:e,icon:o}=n[t.messageType];return{class:"text--color-".concat(e),icon:o}}));return{__sfc:!0,props:t,iconData:o}}}),a=o(44),s=Object(a.a)(r,(function(){var e=this._self._c,t=this._self._setupProxy;return e("span",{staticClass:"space--mr-3 space--mt-1",class:t.iconData.class},[e("BaseIcon",{attrs:{name:t.iconData.icon,width:"20",height:"20"}})],1)}),[],!1,null,null,null).exports,l=o(507),c={__name:"alert-message-close-btn",setup:e=>({__sfc:!0,BaseButton:l.a})},d=Object(a.a)(c,(function(){var e=this,t=e._self._c;return t(e._self._setupProxy.BaseButton,e._g({staticClass:"space--ml-a",attrs:{variant:"tertiary",mode:"default",square:""}},e.$listeners),[t("BaseIcon",{attrs:{name:"cross"}})],1)}),[],!1,null,null,null).exports,u=Object(i.defineComponent)({__name:"alert-message",props:{messageType:null,hasCloseButton:{type:Boolean},id:null},emits:["hide","action"],setup(e,t){let{emit:o}=t;const r=e,a=Object(i.ref)(!0),l=Object(i.computed)((()=>"border--color-".concat(n[r.messageType].color)));return{__sfc:!0,props:r,isVisible:a,emit:o,classes:l,hide:()=>{o("hide",r.id),a.value=!1},AlertMessageIcons:s,AlertMessageCloseBtn:d}}}),p=Object(a.a)(u,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.isVisible?t("div",{staticClass:"flex width--all-12 space--b-3 space--l-3 space--r-3 space--v-3 border border--w-2 bRad--a bg--color-white",class:o.classes},[t("div",{staticClass:"space--mr-2 flex boxAlign-as--all-c"},[t(o.AlertMessageIcons,{attrs:{"message-type":e.messageType}}),t("div",{staticClass:"text--lh-1-6 hAlign--all-l"},[e.$slots.title?t("div",{staticClass:"size--all-xl text--b space--mb-2"},[e._t("title")],2):e._e(),t("div",[e._t("message")],2),e.$slots.action?t("button",{staticClass:"linkGrey space--mt-2 size--all-s",on:{click:function(e){return o.emit("action")}}},[e._t("action")],2):e._e()])],1),e.hasCloseButton?t(o.AlertMessageCloseBtn,{on:{click:o.hide}}):e._e()],1):e._e()}),[],!1,null,null,null);t.a=p.exports},888:function(e,t,o){"use strict";var i=o(5),n=o(533),r=Object(i.defineComponent)({__name:"popover-hint-content",props:{hideClose:{type:Boolean}},setup:e=>({__sfc:!0,PopoverBody:n.b,PopoverClose:n.c})}),a=o(44),s=Object(a.a)(r,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.PopoverBody,{staticClass:"flex"},[e._t("default"),e.hideClose?e._e():t(o.PopoverClose,{staticClass:"flex boxAlign-as--all-fs"})],2)}),[],!1,null,null,null);t.a=s.exports}}]);