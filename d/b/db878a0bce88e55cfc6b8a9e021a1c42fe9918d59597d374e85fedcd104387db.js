!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"voucher-v1.23.0"},(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[867],{45745:(e,t,r)=>{"use strict";r.d(t,{n$:()=>o,T_:()=>n,_B:()=>c});var a=r(2649);function o(e){const[t,r]=e.split("?"),a=new URLSearchParams(r),o=+(a.get("height")||NaN)||14;return{hash:t,height:14,width:(+(a.get("width")||NaN)||60)/o*14}}36868:(e,t,r)=>{"use strict";r.d(t,{Xm:()=>i,aA:()=>u,R8:()=>E,Ml:()=>m,x:()=>p,l7:()=>O});var a=r(86704),o=r(37356),n=r(72104);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c.apply(this,arguments)}const l=(0,r(66255).R)((0,n.Kd)(),(0,n.of)()),_=o.formatTime.bind(null,o.timeLocales[l]),s=o.formatDuration.bind(null,o.durationLocales[l]),i=e=>_(1e3*e,"TW"===(0,n.Kd)()?"yyyy.MM.dd":"dd.MM.yyyy"),u=e=>_(1e3*e,"TW"===(0,n.Kd)()?"yyyy.MM.dd":"dd.MM.yyyy");async function E(e,t,r){await a.I18n.fetchTranslationCollection(t);const o=null!=r&&r.roundUpDay?m({timestampInSecond:e,opt:c({},r),unitLowerBounds:{day:1+1/86400,hour:1+1/3600},timeBetweenMin:1,totalUnits:1,endUnit:"minute"}):d(e,r);return r&&r.noLeft?o||a.I18n.t("label_1_minute"):o?a.I18n.t("label_time_left",{time:o}):a.I18n.t("label_1_minute_left")}const d=(e,t={})=>{const r=new Date(1e3*e),a=new Date;return(0,o.timeBetween)("minute",r)>1?s(r,a,{unitLowerBounds:{day:1},totalUnits:1,roundLast:e=>"day"===e&&t.roundUpDay?"ceil":"floor"}):null},m=({timestampInSecond:e,opt:t={},unitLowerBounds:r,timeBetweenMin:n=1,totalUnits:c,endUnit:l})=>{const _=new Date(1e3*e),i=new Date;return(0,o.timeBetween)("minute",_)>n?s(_,i,{unitLowerBounds:r,endUnit:l,totalUnits:c,roundLast:e=>"day"===e&&t.roundUpDay||"minute"===e&&t.roundUpMinute?"ceil":"floor"}):a.I18n.t("label_1_minute")},h=e=>c({month:"short",day:"short"},["MX","ES","FR","CO","CL"].some(()?{dateLiteral:"/",month:"2-digit",day:"2-digit"}:{"zh-TW":{dateLiteral:".",month:"numeric",day:"numeric"},"vn-VN":{dateLiteral:".",month:"2-digit",day:"2-digit"},"pt-BR":{dateLiteral:".",month:"2-digit",day:"2-digit"}}[e.useLocale]),p=e=>_(1e3*e,h),O=e=>{let t="dd MMM yyyy hh:mm";return"TW"===(0,n.Kd)()&&(t="en"===(0,n.of)()?"yyyy MMM dd hh:mm":"yyyyyMMMMdddd hh:mm"),_(1e3*e,t)}},16059:(e,t,r)=>{"use strict";r.d(t,{D:()=>u});var a=r(82714),o=r(72104),n=r(45745),c=r(30518),l=r(93319),_=r(2649);(0,r(50316).qY)(__LOCALE__).getUrl;const s=(0,o.Kd)(),i=(0,o.dU)(),u=(e,t={},r,o)=>{if("voucher_market_type"in e&&(0,c.Z2)(e)||"voucher_external_market_type"in e&&(0,c.Nq)(e))return;if("use_link"in e&&"string"==typeof e.use_link&&e.use_link.length&&(e.reward_type!==l.$P.FREE_SHIPPING_VOUCHER||o!==l.PD))return e.use_link;const u=(0,c.pG)(e,{fromMyVoucherPage:t.fromMyVoucherPage});if(u)return u;if("homepage"===r&&e.reward_type===l.$P.FREE_SHIPPING_VOUCHER)return"/";if("voucher_market_type"in e&&e.voucher_market_type===l.Tc.DIGITAL_PURCHASE)return(0,a.N$)({locale:s,env:i,digitalProductContext:{fromSourceDP:t.dpFromSource||4}});const{voucher_code:E,signature:d}=e,m=e.promotionid||e.promotion_id;return _.pc.getUrl({voucherCode:void 0,evcode:(0,n._B)(E),promotionId:m,signature:d||"",source:t.source,preSource:t.preSource})}},30518:(e,t,r)=>{"use strict";r.d(t,{wJ:()=>le,EZ:()=>a,ZD:()=>Ne,$:()=>ge,zo:()=>Te,Ow:()=>ve,pG:()=>te,wP:()=>fe,qr:()=>Ce,Xz:()=>ee,iX:()=>Re,md:()=>de,QD:()=>ne,Ph:()=>ce,Nq:()=>d,cj:()=>V,Le:()=>s,iK:()=>O,wi:()=>_,o6:()=>x,Z2:()=>E,og:()=>m,AE:()=>i,uD:()=>f,np:()=>M,sl:()=>W,sg:()=>B,xF:()=>U,bN:()=>b,lT:()=>u,Yu:()=>k,y2:()=>F,O:()=>se,BF:()=>pe});var a={};r.r(a),r.d(a,{isAirpayVoucher:()=>d,isAvailableFreeShippingVoucher:()=>p,isBeforeClaimStartTime:()=>V,isCashLoanVoucher:()=>T,isCoinCashbackVoucher:()=>s,isDigitalPurchaseVoucher:()=>O,isDiscountVoucher:()=>l,isFreeShippingVoucher:()=>_,isMultiRewardVoucher:()=>x,isNormalVoucher:()=>R,isOfflineVoucher:()=>E,isPublicVoucher:()=>v,isPublisherOfflinePaymentVoucher:()=>m,isShoppingMallOPV:()=>i,isSingleShopVoucher:()=>f,isThirdPartyNowVoucher:()=>C,isUpcomingVoucher:()=>M,isUserWalletPartnerVoucher:()=>N,isVoucherClaimEndTimeOver:()=>H,isVoucherClaimInvalidError:()=>B,isVoucherComing:()=>U,isVoucherEndingSoon:()=>y,isVoucherEndingSoonWithTime:()=>b,isVoucherExpired:()=>u,isVoucherInapplicable:()=>k,isVoucherInvalid:()=>F,isVoucherNew:()=>D,isVoucherNotClaimable:()=>w,isVoucherStartingSoon:()=>P,isVoucherUsedUp:()=>h,isVoucherValid:()=>g});var o=r(36868),n=r(93319),c=r(471);function l(e){return e.reward_type===n.$P.NORMAL_VOUCHER}function _(e){return e.reward_type===n.$P.FREE_SHIPPING_VOUCHER}function s(e){return e.reward_type===n.$P.COIN_CASHBACK_VOUCHER}unction u(e){return"boolean"==typeof e.has_expired?e.has_expired:"number"==typeof e.end?e.end<Date.now()/1e3:!!e.end_time&&e.end_time<Date.now()/1e3}function E(e){return e.voucher_market_type===n.Tc.OFFLINE_PAYMENT}function d(e){return!(!e||e.voucher_external_market_type!==n.sd.AIRPAY_OPV)}function m(e){return(E(e)||d(e))&&e.ui_display_type===n.ob.PUBLISHER_OPV}function h(e){return"number"==typeof e.left_count&&Number.isInteger(e.left_count)&&e.left_count<=0}nction v(e){return e.use_type===n.yD.PUBLIC}function f(e){return Boolean(e.shop_id||!1)}function R(e){return e.reward_type===n.$P.NORMAL_VOUCHER}function C(e){return 3===e.third_party_type||!1}unction T(e){return(null==e?void 0:e.voucher_market_type)===n.Tc.CASHLOAN_BUYER||(null==e?void 0:e.voucher_market_type)===n.Tc.CASHLOAN_SELLER||(null==e?void 0:e.voucher_market_type)===n.Tc.SHOPEEPAY_LATER||(null==e?void 0:e.voucher_market_type)===n.Tc.SHOPEE_INSURANCE}function g(e){return!(u(e)||e.fully_redeemed||!e.is_claimed_before&&e.fully_claimed)}const L=new Date;L.setDate(L.getDate()+4);const S=new Date(L.toDateString()).getTime()/1e3,I=new Date;I.setDate(I.getDate()-3);const A=new Date(I.toDateString()).getTime()/1e3;function y(e){return!!e.end_time&&!u(e)&&e.end_time<S}function b(e){const t=new Date;return t.setDate(t.getDate()+3),!u(e)&&!!e.end_time&&e.end_time<t.getTime()/1e3}function P(e){const t=new Date;return t.setDate(t.getDate()+3),e<=t.getTime()/1e3}function D(e){return!u(e)&&!!e.start_time&&e.start_time>A}function U(e){return!!e.start_time&&e.start_time>Date.now()/1e3}function M(e){return!(!e.shop_id&&e.voucher_market_type!==n.Tc.DEFAULT_MARKET_PLACE&&e.voucher_market_type!==n.Tc.OFFLINE_PAYMENT)&&U(e)}function H(e){return!!e.claim_end_time&&e.claim_end_time<Date.now()/1e3||!1}function V(e){return!!e.claim_start_time&&e.claim_start_time>Date.now()/1e3}function w(e){const{fully_used:t,fully_claimed:r,disabled:a,has_expired:o,already_redeemed:n}=e;return t||o||a||r&&!n||H(e)&&!n}const F=e=>!!e&&n.fq.includes(e)&&e!==n.i8.ALREADY_USED,k=B=x=function W(e){return!e||[n.fr.OK,n.fr.VALID_NOT_START,n.fr.CLAIM_NOT_START,n.fr.FULLY_CLAIMED,n.fr.NON_CLAIMABLE].includes(e)}var G,Y=r(14421),K=r(57608),z=r(72104);const Q={ID:"co.id",SG:"sg",MY:"com.my",VN:"vn",PH:"ph",TH:"co.th",TW:"tw",BR:"com.br"}[(0,z.Kd)()],Z={test:"test.",uat:"uat.",live:""},X=null!=(G=Z[(0,z.dU)()])?G:Z.live;var j;const $={ID:"co.id",SG:"sg",MY:"com.my",VN:"vn",PH:"ph",TH:"co.th",TW:"tw",BR:"com.br"}[(0,z.Kd)()],q={test:"test.",uat:"uat.",live:""},J=null!=(j=q[(0,z.dU)()])?j:q.live;function ee(e,t,r){const{use_link:a,shop_id:o,promotionid:n,promotion_id:c,signature:l}=e;return a&&!o?a:"homepage"===r&&_(e)?Y.cJ.getUrl({promotionId:n||c,signature:l||""}):t||""}function te(e,{fromMyVoucherPage:t=!1}={fromMyVoucherPage:!1}){if(e.exclusive_channel_type)return e.exclusive_channel_type===n.uQ.LIVESTREAM?function(e,t={customFromSource:"voucher_use_pc"}){if(e.exclusive_channel_type!==n.uQ.LIVESTREAM)return;if(void 0===Q||void 0===X)return;const r=`https://live.${X}shopee.${Q}/middle-page`,a={};return e.shop_id?(a.type="shop_session",a.id=e.shop_id):a.type="lp",r+(0,K.Wc)(a)+`#${t.customFromSource}`}(e):e.exclusive_channel_type===n.uQ.SHORT_VIDEO?function(e,t){if(e.exclusive_channel_type!==n.uQ.SHORT_VIDEO)return;if(void 0===$||void 0===J)return;const r=`https://sv.${J}shopee.${$}/landing`,a={type:"voucher",targetPage:"common-timeline",fromSource:"PC",location:t.location};return e.shop_id&&(a.extInfo=JSON.stringify({shopid:e.shop_id})),r+(0,K.Wc)(a)}(e,{location:t?"voucher_wallet":"cart_voucher_drawer"}):void 0}var re=r(86704);const{t:ae}=re.I18n,{t:oe}=re.I18n,ne=e=>{if(!e||e===n.eg.CLAIM_ERROR_EXIST)return"";switch(e){case n.eg.CLAIM_ERROR_NO_QUOTA:return oe("is_fully_redeemed");case n.eg.CLAIM_ERROR_EXPIRED:return oe("is_expired");default:return oe("is_invalid")}},ce=e=>{if(!e)return"";switch(e){case n.i8.NO_QUOTA:return oe("is_fully_redeemed");case n.i8.CODE_EXPIRED:return oe("is_expired");default:return oe("is_invalid")}},le="6";let _e;function se(e,t){return t?t===n.He:!!e}r(53710),function(e){e[e.CLAIMABLE=0]="CLAIMABLE",e[e.USE=1]="USE",e[e.FULLY_REDEEMED=2]="FULLY_REDEEMED"}(_e||(_e={}));var ie=r(83458);const{t:ue}=re.I18n;function Ee(e){var t;return"fsv_error_message"in e&&null!=(t=e.fsv_error_message)?t:""}function de(e){if(null==e.invalid_message_code)return Ee(e);switch(e.invalid_message_code){case n.i8.NONE:case n.i8.INVALID:case n.i8.CODE_EXPIRED:case n.i8.NO_QUOTA:return Ee(e);case n.i8.MIN_BUCKET_NOT_MET:return ue("msg_voucher_min_bucket_not_met",{n:(0,ie.yl)((e.min_spend||0)-(e.current_spend||0),__LOCALE__)});case n.i8.NO_APPLICABLE:if(e.exclusive_channel_type===n.uQ.LIVESTREAM)return ue("voucher_card_promotion_error_live_only");if(e.exclusive_channel_type===n.uQ.SHORT_VIDEO)return ue("voucher_card_promotion_error_video_only")}return ue(n.gs[e.invalid_message_code||0])||Ee(e)}var me=r(63804),he=r(67274);const pe=e=>{const t=(0,me.useMemo)((()=>{const e=document.createElement("div");return document.body.appendChild(e),e}),[]),r=(0,me.useCallback)((()=>{(0,he.unmountComponentAtNode)(t)&&t.parentNode&&t.parentNode.removeChild(t)}),[t]);return(0,me.useEffect)((()=>r),[r]),(0,me.useCallback)((a=>new Promise(((o,n)=>{(0,he.render)(e({destroy:r,confirm:()=>{o(),r()},cancel:props:a}),t)}))),[r,t,e])};function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Oe.apply(this,arguments)}function ve(e){const t=function(e,t="\n"){return e.split(t).map(()}(e);return t.map((e=>0===e.length?e:"- "+e))}function fe(e){const{invalid_message_code:t,is_claimed_before:r}=e;return r?t?n.zQ.CLAIMED_INVALID:n.zQ.CLAIMED_VALID:n.zQ.UNCLAIMED}function Re(e,t){let r,a=(null==e?void 0:e.value_in_secs)||0;switch(null==e?void 0:e.type){case n.QG.MINUTES:a=Math.floor(a/60),r="minutes";break;case n.QG.HOURS:a=Math.floor(a/3600),r="hours";break;case n.QG.DAYS:a=Math.floor(a/86400),r="days";break;default:a=t||0,r="days"}return{duration:a,durationType:r}}function Ce(e,t,{shortFormat:r,isUserOwned:a,useNewTimeVersion:n}){const{claim_start_time:c,start_time:l}=e,_=!!c&&Date.now()/1e3<c,s=_&&!a?c:l;if("number"!=typeof s)return"";const i=_&&!a?"label_voucher_claim":"label_voucher_use";let u;const E=r?o.x:o.aA;return u=P(s)?t(`${i}_in`,{time:n?(0,o.Ml)({timestampInSecond:s,opt:{roundUpDay:!0},unitLowerBounds:{day:1+1/86400,hour:1+1/3600},timeBetweenMin:1,totalUnits:1,endUnit:"minute"}):(0,o.Ml)({timestampInSecond:s,unitLowerBounds:{day:1+1/86400,hour:1+1/3600},totalUnits:1})}):t(`${i}_from`,{date:E(s)}),u}function Ne(e){const t=Oe({},e,{activityId:`${e.activityId||""}`});return Object.keys(t).forEach((e=>{const r=e;t[r]=encodeURIComponent(btoa(JSON.stringify(t[r]||"")))})),t}const Te=ge=(e,t)=>(0,c.formatCurrency)(t,e,{symbol:"",precision:0})},62334:(e,t,r)=>{"use strict";r.d(t,{mO:()=>v,ZP:()=>R,gZ:()=>h});var a=r(63804),o=r.n(a),n=r(71918),c=r.n(n),l=r(72104),_=r(86704),s=r(81166),i=r(83458),u=r(93319),E=r(81449);const d=(0,l.Kd)(),m=({min_spend:e})=>(0,_.t)("label_voucher_wallet_minimum_purchase",{minSpend:(0,i.U)(e||0,d)}),h=e=>{let t,r;switch(e.reward_type){case u.$P.NORMAL_VOUCHER:case u.$P.SHIPPING_FEE:if(t=e.reward_percentage||e.discount_percentage||0,"reward_percentage_with_decimal"in e&&(r=e.reward_percentage_with_decimal||0),t>0||r)return(0,_.t)("label_voucher_discount_percentage_off",{value:r?(0,i.nE)(r):(0,i.AS)(t,d)});if(t=e.reward_value||e.discount_value||0,t>0)return(0,_.t)("label_voucher_discount_value_off",{value:(0,i.us)(t,d)});break;case u.$P.COIN_CASHBACK_VOUCHER:if(t=e.coin_percentage||e.reward_percentage||0,t>0)return(0,_.t)("label_voucher_coins_cashback_value",{value:t});if(t=e.reward_value||0,t>0)return(0,_.t)("label_voucher_fixed_coins_cashback_value",{value:t})}return""},p=e=>{let t;switch(e.reward_type){case u.$P.NORMAL_VOUCHER:case u.$P.SHIPPING_FEE:if(t=e.discount_cap||e.reward_cap||0,t>0)return(0,_.t)("label_voucher_max_value")+" "+(0,i.x2)(t,d);break;case u.$P.COIN_CASHBACK_VOUCHER:if(t=e.coin_cap||e.reward_cap||0,t>0)return(0,_.t)("label_capped_x",{n:(0,i.Ho)(t,d)})}return""},O={small:{mainText:"gCzrmH",subTitle:"DznC4v"},default:{mainText:"jncqUR",subTitle:"Gxhccf"}};function v({voucher:e}){const{title:t}=e;return t?o().createElement(o().Fragment,null,t):o().createElement(o().Fragment,null,[h(e),m(e),p(e)].filter(Boolean).join(" "))}function f({voucher:e,badges:t,sizeStyle:r="default"}){const{title:a}=e;return a?o().createElement(o().Fragment,null,a):o().createElement(o().Fragment,null,o().createElement("div",{className:"VgIkiE"},t,o().createElement("div",{className:c()(O[r].mainText,"-h0ONY")},h(e))),o().createElement("div",{className:c()(O[r].subTitle,"_4oXJov")},[m(e),p(e)].filter(Boolean).join(" ")))}const R=(0,_.withI18nCollections)([s.L])((function({className:e,voucher:t,badges:r,sizeStyle:a}){return o().createElement(E.l.Consumer,null,(({voucher:n})=>(!n&&t&&(n=t),n?o().createElement("div",{className:c()("ZqlitM",e)},o().createElement(f,{sizeStyle:a,badges:r,voucher:n})):"")))}))},24277:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(63804),o=r(71918),n=r.n(o),c=r(44955),l=r(93319),_=r(30518);const s={voucherRight:"Bq8vEv",voucherRightInfo:"rOe3Nv",columns:"idk8HV",specificLabel:"XS+3tS"};function i(e){const{voucher:t,isFromCart:r,isEnabled:o,displayExpiry:i=!0,className:u}=e,{shop_id:E,voucher_market_type:d,voucher_external_market_type:m}=t,h=d===l.Tc.OFFLINE_PAYMENT,p=m===l.sd.AIRPAY_OPV,O=(0,_.AE)(t);return a.createElement("div",{className:n()(s.voucherRightInfo,O?s.shoppingMall:"",s.columns,u)},t.reward_type===l.$P.FREE_SHIPPING_VOUCHER?r?a.createElement(c.oe,{voucher:t}):a.createElement(c.Sh,{voucher:t}):h||p?a.createElement(c.N0,{voucher:t}):a.createElement(c.$j,{voucher:t}),!!E&&a.createElement(c.s_,{className:s.specificLabel,voucher:t}),!E&&a.createElement(c.Th,{voucher:t}),i&&a.createElement(c.EU,{voucher:t,isInvalid:!1===o&&!r,isUserOwned:r}))}},81449:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var a=r(63804);const o=r.n(a)().createContext({})},44955:(e,t,r)=>{"use strict";r.d(t,{h9:()=>vt,ox:()=>Dt,Ns:()=>Se,eN:()=>ce,d0:()=>me,ZD:()=>Xt,rO:()=>Ce,s_:()=>Be,FP:()=>ie,fm:()=>ve,RE:()=>U,Vp:()=>Ut,i8:()=>tt,EU:()=>F,PU:()=>a.ZP,Tg:()=>te,Mg:()=>Y,oe:()=>Ie,mO:Ec:()=>re,n3:()=>Qt,Sh:()=>X,Ae:()=>Z,$j:()=>C,Th:()=>He,N0:()=>$,HQ:()=>Te,zG:()=>Ne});var a=r(62334),o=r(63804),n=r.n(o),c=r(71918),l=r.n(c);var _=r(86704),s=r(81166);const i="IR99jR",u="yy2frc",E="fpQyMI";var d=r(72104),m=r(93319),h=r(75346),p=r(45745);const O=(0,_.withI18nCollections)([s.L])((function({voucher:e,className:t,textClassName:r}){const{is_shop_official:a,is_shop_preferred:o,shop_id:c}=e;return a||o?!c&&a&&o?n().createElement("div",{className:l()(i,t)},n().createElement("span",{className:l()(E,u,r)},(0,_.t)("label_voucher_mall_preferred"))):a?n().createElement("div",{className:i},n().createElement("span",{className:l()(E,u,r)},(0,_.t)("label_voucher_mall"))):n().createElement("div",{className:i},n().createElement("span",{className:l()("vGFP4G",u,r)},(0,_.t)("label_voucher_preferred"))):null}));function v({voucher:e}){const{is_shop_official:t,is_shop_preferred:r,shop_id:a}=e;if(!t&&!r)return null;let o,c;!a&&t&&r?(o=m.Xq.preferred_mall,c=void 0):t?(o=m.Xq.mall,c="label_voucher_mall"):(o=m.Xq.preferred,c="label_voucher_preferred");const l=o[(0,d.Kd)()];if(!l)return null;const{hash:_,height:s,width:i}=(0,p.n$)(l);return n().createElement("div",{className:"E7Lx-Q"},n().createElement("div",{className:"_3xdUZb",style:{backgroundImage:`url("${(0,h.Jn)(_)}")`,height:s,width:i}}))}const f=function({voucher:e}){return e.shop_id?n().createElement(O,{voucher:e}):n().createElement(v,{voucher:e})};function R({voucher:e,className:t}){const{customised_product_scope_tag_image_hash:r}=e;if(!r)return null;const{hash:a,height:o,width:c}=(0,p.n$)(r);return n().createElement("div",{className:"ZXJx3V"},n().createElement("div",{className:l()("_08xXaG",t)},n().createElement("div",{className:"iOmuew",style:{backgroundImage:`url("${(0,h.Jn)(a)}")`,height:o,width:c}})))}const C=(0,_.withI18nCollections)([s.L])((function({className:e,shopTypeClassName:t,voucher:r}){return n().createElement("div",{className:l()("TzKqcU",e)},r.title?r.title:n().createElement(a.ZP,{className:"IHQvLS",badges:!!r.customised_product_scope_tag_image_hash&&n().createElement(R,{voucher:r})||0===r.shop_id&&n().createElement(f,{voucher:r,textClassName:t})}))}));var N=r(45476),T=r(71437);const{t:g}=_.I18n,L=(0,d.Kd)();function S(e){const{className:t,progressBarClassName:r,progress:a,start:n,end:c}=e;if(a<m.kG[L])return null;const _={width:`${a}%`,height:"100%",background:`linear-gradient(270deg, ${!!n&&n||"#FFB000"} 0%, ${!!c&&c||!!n&&n||"#EB1717"} 100%)`};return o.createElement("div",{className:l()("JabP-+",t)},o.createElement("div",{style:_,className:r}))}var I=r(36868),A=r(30518),y=r(7058);const b={default:"wjLEf2",twoRowsLabel:"YHiqRk",usageLimitedText:"_8Tbi9Q",noMargin:"K8ADlz",comingSoonStartTime:"mE6THY",validUntil:"KekO72",isEndingSoon:"_0M2MBQ",capitalize:"jkJz3H",cropped:"f3Fjt0",isUsageLimited:"ezBzbg",isRunningOutSoon:"xFqjTo"},{t:P,withI18nCollections:D}=_.I18n,U=D([s.L])((({voucher:e,upcomingGrayText:t,shortFormat:r,className:a,isUserOwned:o,useNewTimeVersion:c})=>{const _=(0,A.qr)(e,P,{shortFormat:r,isUserOwned:o,useNewTimeVersion:c});return _?n().createElement("div",{className:l()(b.default,b.cropped,!t&&b.isUpcomingText,b.upcomingVoucher,a)},n().createElement(y.Z,{className:b.timeIcon}),n().createElement("span",null,_)):null})),{t:M,withI18nCollections:H}=_.I18n,V=(0,d.Kd)(),w=m.sU[V],F=H([s.L])((function({voucher:e,className:t,isInvalid:r,upcomingGrayText:a,isUserOwned:o}){const c=(0,T.isFeatureEnabled)(N.QNI),_=!r&&(0,A.bN)(e),i=!r&&(0,A.xF)(e),[u,E]=n().useState(""),d=e.voucher_market_type===m.Tc.OFFLINE_PAYMENT,h=(0,A.Nq)(e),p=d||h;if(n().useEffect((()=>{(0,I.R8)(e.end_time||0,s.L,{roundUpDay:p}).then(()}),[e,p]),(0,A.np)(e)){const r=o||e.is_claimed_before||e.user_voucher_claimed_before;return n().createElement(U,{className:t,voucher:e,upcomingGrayText:a,isUserOwned:r,useNewTimeVersion:p})}const{quota_type:O,percentage_used:v,use_type:f}=e,R=v||0,C=f&&f===m.yD.PUBLIC,g=!r&&(C||O===m.Y.USAGE_CONTROLLED_PRIVATE_VOUCHER),L=g&&(R===w.FIRST_TIER||R>w.FIRST_TIER);let y;const{is_claimed_before:P,valid_duration:D,valid_days:H}=e,{duration:V,durationType:F}=(0,A.iX)(D,H),k=!P&&V;if(y=i?p?`${M("label_voucher_use_from",{date:(0,I.Xm)(e.start_time||0)})}`:`${M("label_start_at")}: ${(0,I.Xm)(e.start_time||0)}`:k?M(`label_voucher_valid_duration_${F}`,{n:V}):_?`${M("label_voucher_expiring_soon")}: ${u}`:`${M("label_valid_until")}: ${(0,I.aA)(e.end_time||0)}`,g){const e=R===w.SECOND_TIER||R>w.SECOND_TIER;return n().createElement("span",{className:l()(b.isUsageLimited,b.default,b.cropped,c&&b.twoRowsLabel,t)},!c&&n().createElement(S,{progress:R}),n().createElement("div",{className:l()(b.usageLimitedText,c&&b.noMargin)},L&&n().createElement("span",{className:e&&b.isRunningOutSoon||""},M("label_voucher_usage_percentage_used",{percentage:R}),", "),n().createElement("span",{className:l()(i?b.comingSoonStartTime:_&&!k?b.isEndingSoon:b.validUntil,!L&&!k&&b.capitalize||"")},y)))}return n().createElement("span",{className:l()(!k&&b.capitalize,b.default,b.cropped,t,i?b.comingSoonStartTime:_&&!k?b.isEndingSoon:b.validUntil,c&&b.twoRowsLabel)},y)}));var k=r(81449);var B=r(24319),x=r(56775),W=r(90626);const G={default:{logoSize:""},big:{logoSize:"dbCP0j"}};function Y({className:e,logoClassName:t,shouldGoToShopPage:r,sizeStyle:a="default"}){const o=(0,x.useHistory)();return n().createElement(k.l.Consumer,null,(({voucher:c})=>n().createElement("div",{className:l()("QDRB5E",e,G[a].logoSize),onClick:r?()=>{o.push(W.Ri.getUrl({shopId:c.shop_id||0}))}:null},c&&c.icon_hash&&n().createElement(B.p,{src:(0,h.Jn)(c.icon_hash),className:l()("rSE65G",t)})||n().createElement("div",{className:"VVBpoz"},n().createElement("svg",{enableBackground:"new 0 0 15 15",viewBox:"0 0 15 15",x:"0",y:"0"},n().createElement("g",null,n().createElement("circle",{cx:"7.5",cy:"4.5",fill:"none",r:"3.8",strokeMiterlimit:"10",stroke:"#c6c6c6"}),n().createElement("path",{d:"m1.5 14.2c0-3.3 2.7-6 6-6s6 2.7 6 6",fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",stroke:"#c6c6c6"})))))))}var K=r(83458);const{t:z,withI18nCollections:Q}=_.I18n,Z=Q([s.L])((function(e){const{voucher:t}=e,r=(0,T.isFeatureEnabled)(N.inS),a=(0,d.Kd)(),{min_spend:n,title:c}=t;return o.createElement(o.Fragment,null,e.badges,o.createElement("span",{className:"_48LAeS"},c||(r&&"number"==typeof n?z("label_voucher_wallet_minimum_purchase",{minSpend:(0,K.U)(n,a)}):z("label_free_shipping_header"))))}));function X(e){const{className:t,voucher:r}=e;return n().createElement("div",{className:l()("l-n4wI",t)},n().createElement(Z,{voucher:r,badges:!!r.customised_product_scope_tag_image_hash&&n().createElement(R,{voucher:r,className:"AuYgmE"})}))}const j="_8Wx-Sr",$=(0,_.withI18nCollections)([s.L])((function({className:e,voucher:t}){var r;const o=(0,A.AE)(t),c=t.title?t.title:(e=>{const{reward_type:t}=e;switch(t){case m.$P.PREPAID_CASHBACK:return(0,_.t)("label_voucher_offline_payment_cashback");case m.$P.PREPAID_COIN_CASHBACK:return(0,_.t)("label_voucher_offline_payment_coin_cashback");case m.$P.PREPAID_DISCOUNT:return(0,_.t)("label_voucher_offline_payment_discount");default:return""}})(t),s=m.ob.SKU_OPV===t.ui_display_type,i=t.customised_mall_name;return o||s?n().createElement(n().Fragment,null,n().createElement("div",{title:i,className:l()("E7iZSK",e)},s?(null==(r=t.sku_opv_extra_info)?void 0:r.sku_name)||(0,_.t)("label_voucher_opv_product"):t.customised_mall_name),n().createElement("div",{title:c,className:l()(j,"JaK+rz",e)},c)):n().createElement("div",{className:l()(j,e)},c||n().createElement(a.ZP,{className:"A9y5sq"}))}));var q=r(75946);const J={voucherBody:"iMhHLx",voucher:"zun--d",shadow:"TWfWw5",sawtoothContainer:"+GeQNS",sawtoothLine:"_6wBBz-",sawtooth:"Kp5Iz4",preferred:"lK+4+b",ofs:"YURV7a",sMart:"_5bfgyY",voucherLeftFlat:"fstq5k",bottom:"FZSSpQ",border:"usyKea",voucherRightFlat:"R-nDkM"};function ee({usePreferredShopColorScheme:e,isShopeeMart:t,isOfficial:r,styles:a}){return a&&e?t?a.sMart:r?a.ofs:a.preferred:""}const te=(0,q.Z)((function({children:e,className:t,trackingClick:r,trackingRef:a,sawtoothClassName:n,showRightBorder:c=!0,onClick:_,borderColor:s}){const i=()=>{_&&_(),r()},u={"--border-color":s||"#e8e8e8"};return o.createElement(k.l.Consumer,null,(({type:r,usePreferredShopColorScheme:_,isOfficial:s,isShopeeMart:E})=>o.createElement("div",{style:u,className:l()(r===m.wK.FLAT||r===m.wK.FLAT_WITH_SHADOW?J.voucherLeftFlat:J.voucherLeft,t,ee({usePreferredShopColorScheme:_,isOfficial:s,isShopeeMart:E,styles:J})),onClick:i,ref:a},e,o.createElement("div",{className:J.sawtoothContainer},o.createElement("div",{className:l()(J.sawtooth,n,(r===m.wK.FLAT_WITH_SHADOW||r===m.wK.NORMAL_WITH_SHADOW)&&J.shadow)},o.createElement("div",{className:J.sawtoothLine}))),r===m.wK.NORMAL_WITH_SHADOW&&o.createElement("div",{className:J.bottom}),!1!==c&&o.createElement("div",{className:J.border}))))}),"SellerVoucherLeft",{reportOnce:!0}),re=(0,q.Z)((function({children:e,className:t,trackingRef:r,trackingClick:a,onClick:n,borderColor:c}){const _={"--border-color":c||"#e8e8e8"};return o.createElement(k.l.Consumer,null,(({type:c,usePreferredShopColorScheme:s,isOfficial:i,isShopeeMart:u})=>o.createElement("div",{style:_,className:l()(c===m.wK.FLAT||c===m.wK.FLAT_WITH_SHADOW?J.voucherRightFlat:J.voucherRight,t,ee({usePreferredShopColorScheme:s,isOfficial:i,isShopeeMart:u,styles:J})),ref:r,onClick:,e,c===m.wK.NORMAL_WITH_SHADOW&&o.createElement("div",{className:J.border}))))}),"SellerVoucherRight",{reportOnce:!0}),ae={fsVoucherLeftFlat:"yVY8iM",voucherFlat:"ffHYjA",sawtooth:"YC5sTx",text:"F89aKQ",small:"pAraTA"};var oe=r(58013);const ne={default:{voucherFlat:""},small:{voucherFlat:ae.voucherFlatSmall}},ce=(0,_.withI18nCollections)([s.L])((0,oe.Z)((function({className:e,grayscale:t,trackingClick:r,sizeStyle:a="default",borderColor:n}){const c=(0,d.Kd)(),s={"--border-color":n||(t?"#bdbdbd":"#00bfa5"),"--background-color":t?"#bdbdbd":"#00bfa5"};return o.createElement("div",{className:l()(ae.fsVoucherLeftFlat,e,t&&ae.grayscale,ne[a].voucherFlat),onClick:r,style:s},o.createElement("div",{className:l()(ae.text,"VN"===c&&ae.small)},(0,_.t)("label_free_shipping")),o.createElement("div",{className:ae.sawtooth}))}),"VoucherWalletLeft")),le={default:{voucherFlat:""},small:{voucherFlat:"hndpI9"}},{t:_e,withI18nCollections:se}=_.I18n,ie=se([s.L])((0,oe.Z)((function({className:e,iconClassName:t,iconTextClassName:r,sawtoothClassName:a,onClick:n,grayscale:c,trackingClick:_,sizeStyle:s="default",shopTypeVisible:i}){const u=()=>{n&&n(),_()};return o.createElement(k.l.Consumer,null,(({voucher:n,type:_})=>o.createElement("div",{className:l()("lpWPNb",e,c&&"_4Abwfy",le[s].voucherFlat),onClick:u},n&&n.icon_hash&&o.createElement(B.p,{src:(0,h.Jn)(n.icon_hash),wrapperClassName:l()("G6PvHv",t),placeholderClassName:"ycuKIk",className:"AwBXYf"})||o.createElement("div",{className:l()("z9tDj3",t)},o.createElement("svg",{enableBackground:"new 0 0 15 15",viewBox:"0 0 15 15",x:"0",y:"0"},o.createElement("g",null,o.createElement("circle",{cx:"7.5",cy:"4.5",fill:"none",r:"3.8",strokeMiterlimit:"10",stroke:"#c6c6c6"}),o.createElement("path",{d:"m1.5 14.2c0-3.3 2.7-6 6-6s6 2.7 6 6",fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",stroke:"#c6c6c6"})))),i&&(n.is_shop_official||n.is_shop_preferred)&&o.createElement("div",{className:"_8+zNCT"},o.createElement("div",{className:"KSm9rI"},o.createElement(f,{voucher:n}))),o.createElement("div",{className:l()("ffPRiE",r)},n.icon_text||n.shop_name||_e("label_voucher_shop")),o.createElement("div",{className:l()("XherGz",a)},o.createElement("div",{className:l()("Eswk4H",(_===m.wK.FLAT_WITH_SHADOW||_===m.wK.NORMAL_WITH_SHADOW)&&"_0D15JW")})))))}),"VoucherWalletLeft")),ue={opvVoucherLeftFlat:"CzMsRo",grayscale:"V-YCxF",iconText:"kJ0g9B",voucherFlat:"iJXPhw",shoppingMallOpvVoucherLeftFlat:"R88AmF",sawtoothContainer:"-9zjhk",sawtooth:"_5YdUCB",shadow:"m30R7W",grid:"XmFyl2",iconWrapper:"culjpv",iconPlaceholder:"hlLcd1",shoppingMall:"fCuM2i",iconPlaceholderMall:"jnmvZh",icon:"DRN91Y",iconEmpty:"V7-NMk",mallImage:"zN-q+n",brand:"x2AEZ3"},Ee={default:{voucherFlat:""},small:{voucherFlat:ue.voucherFlatSmall}};function de(e){var t,r;return e?e.icon_hash?(0,h.Jn)(e.icon_hash):e.icon_url?e.icon_url:null!=(t=e.airpay_opv_extra_info)&&t.icon_url?null==(r=e.airpay_opv_extra_info)?void 0:r.icon_url:void 0:""}const me=(0,oe.Z)((function({className:e,iconClassName:t,iconTextClassName:r,onClick:a,grayscale:n,trackingClick:c,sizeStyle:_="default"}){const s=return o.createElement(k.l.Consumer,null,(({voucher:a,type:c})=>{if(!a)return o.createElement("div",null);const i=(0,A.AE)(a),u=a.ui_display_type===m.ob.SKU_OPV;if(i||u){const{brand_image_hash:t,brand_image_url:r}=a.sku_opv_extra_info||{},c=(0,h.Jn)(t)||r;return o.createElement("div",{className:l()(ue.shoppingMallOpvVoucherLeftFlat,e,n&&ue.grayscale,Ee[_].voucherFlat),onClick:s},o.createElement(B.p,{src:de(a),wrapperClassName:ue.mallImage,placeholderClassName:ue.iconPlaceholder,className:ue.icon,isCovered:!0}),c&&o.createElement("div",{className:ue.brand,style:{backgroundImage:`url("${c}")`}}))}return o.createElement("div",{className:l()(ue.opvVoucherLeftFlat,e,n&&ue.grayscale,Ee[_].voucherFlat),onClick:s},o.createElement(B.p,{src:de(a),wrapperClassName:l()(ue.iconWrapper,t),placeholderClassName:ue.iconPlaceholder,className:ue.icon}),o.createElement("div",{className:l()(ue.iconText,r)},a.icon_text),o.createElement("div",{className:ue.sawtoothContainer},o.createElement("div",{className:l()(ue.sawtooth,(c===m.wK.FLAT_WITH_SHADOW||c===m.wK.NORMAL_WITH_SHADOW)&&ue.shadow,{[ue.grayscale]:n})})))}))}),"VoucherWalletLeft"),he={shopeeVoucherLeftFlat:"RtkwZ6",voucherFlatSmall:"i9I+mu",sawtooth:"Ofo6O6",iconWrapper:"aEXgu6",iconPlaceholder:"z36P9q",icon:"cTell6",iconText:"cJTUcI",uppercase:"VAmsiW"};function pe(){return o.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56"},o.createElement("g",{id:"spec",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"shopee-logo-copy",transform:"translate(10 8)",fill:"#FFF"},o.createElement("g",{id:"Group-5",transform:"translate(8.31)"},o.createElement("g",{id:"Group-23"},o.createElement("path",{d:"M18.612 9.889l-1.964.074c-.17-4.48-3.348-7.98-7.15-7.98-3.804 0-6.982 3.5-7.152 7.98L.382 9.89C.59 4.406 4.575.017 9.497.017c4.922 0 8.908 4.39 9.115 9.872z",id:"Stroke-1",fillRule:"nonzero"}),o.createElement("path",{d:"M12.577 32.648c-.94.399-2.2.613-3.2.546a10.371 10.371 0 0 1-4.36-1.121c-.49-.25-1.208-.744-1.749-1.195-.123-.102-.187-.194-.068-.361.126-.19.627-.913.706-1.033.106-.162.28-.17.441-.045l.218.168c1.295 1.008 2.966 1.764 4.823 1.835 2.341-.032 4.04-1.074 4.343-2.689.334-1.78-1.086-3.306-3.82-4.157-.87-.271-3.055-1.14-3.46-1.376-1.904-1.11-2.792-2.566-2.665-4.358.193-2.484 2.512-4.345 5.454-4.358a9.976 9.976 0 0 1 3.873.794c.43.18 1.23.608 1.515.82.2.145.184.307.105.433-.116.193-.462.731-.601.956-.102.153-.228.171-.406.058-1.505-1.004-3.053-1.344-4.446-1.372-2.01.04-3.525 1.226-3.625 2.853-.026 1.47 1.097 2.535 3.483 3.349 4.925 1.572 6.791 3.42 6.438 6.316-.218 1.787-1.31 3.22-2.999 3.937z",id:"Fill-3"}))),o.createElement("path",{d:"M2.687 9.19h30.005a2.293 2.293 0 0 1 2.293 2.293c0 .057 0 .057-.003.113l-1.111 22.406a4.914 4.914 0 0 1-4.908 4.67H6.416a4.914 4.914 0 0 1-4.908-4.67L.397 11.596a2.293 2.293 0 0 1 2.177-2.404c.056-.002.056-.002.113-.002zm0 1.965h-.016a.328.328 0 0 0-.31.344l1.11 22.406a2.948 2.948 0 0 0 2.945 2.802h22.547a2.948 2.948 0 0 0 2.945-2.802l1.111-22.406v-.016a.328.328 0 0 0-.327-.328H2.687z",id:"Rectangle",fillRule:"nonzero"}))))}const Oe={default:{voucherFlat:""},small:{voucherFlat:he.voucherFlatSmall}},ve=(0,_.withI18nCollections)([s.L])((0,oe.Z)((function({className:e,grayscale:t,trackingClick:r,sizeStyle:a="default",borderColor:n}){const c={"--border-color":n||(t?"#bdbdbd":"#ee4d2d"),"--background-color":t?"#bdbdbd":"#ee4d2d"};return o.createElement(k.l.Consumer,null,(({voucher:n})=>o.createElement("div",{className:l()(he.shopeeVoucherLeftFlat,e,t&&he.grayscale,Oe[a].voucherFlat),onClick:r,style:c},n&&n.icon_hash&&o.createElement(B.p,{src:n.icon_hash&&(0,h.Jn)(n.icon_hash),wrapperClassName:he.iconWrapper,placeholderClassName:he.iconPlaceholder,className:he.icon})||o.createElement("div",null,o.createElement(pe,null)),o.createElement("div",{className:he.iconText},n&&n.icon_text||o.createElement("div",{className:he.uppercase},(0,_.t)("label_shopee"))),o.createElement("div",{className:he.sawtooth}))))}),"VoucherWalletLeft")),fe=["voucher","children","className","type","usePreferredShopColorScheme","isOfficial","isShopeeMart"];function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Re.apply(this,arguments)}function Ce(e){let{voucher:t,children:r,className:a,type:c=m.wK.FLAT_WITH_SHADOW,usePreferredShopColorScheme:_,isOfficial:s,isShopeeMart:i}=e,u=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,fe);const E=(0,o.useMemo)((,[c,t,_,s,i]);return n().createElement(k.l.Provider,{value:E},n().createElement("div",Re({className:l()(J.voucherBody,J.voucher,a,c===m.wK.FLAT_WITH_SHADOW&&J.shadow)},u),r))}function Ne({voucher:e,children:t,className:r,type:a=m.wK.FLAT_WITH_SHADOW,onClick:o}){return n().createElement(k.l.Provider,{value:{voucher:e,type:a}},n().createElement("div",{className:l()("M0gH+B",r,a===m.wK.FLAT_WITH_SHADOW&&"W5QpBe"),onClick:o},t))}const Te=(0,q.Z)((function({children:e,className:t,grayscale:r,trackingRef:a,trackingClick:o,borderColor:c}){const _={"--border-color":c||"#e8e8e8"};return n().createElement("div",{className:l()("tstbQl",t,r&&"xz4spb"),ref:a,onClick:o,style:_},e)}),"VoucherWalletRight",{reportOnce:!0}),ge={dpVoucherLeftFlat:"lKAXEH",grayscale:"Bq17Ox",iconText:"lPPGBb",voucherFlat:"PGps61",sawtoothContainer:"_1XvV1Z",sawtooth:"dGAkZ1",shadow:"FuXeJi",iconWrapper:"rPwsKP",iconPlaceholder:"OATqa2",icon:"_2g1FOa",uppercase:"_6LJcGn"},Le={default:{voucherFlat:""},small:{voucherFlat:ge.voucherFlatSmall}},Se=(0,_.withI18nCollections)([s.L])((0,oe.Z)((function({className:e,grayscale:t,trackingClick:r,sizeStyle:a="default",borderColor:n}){const c={"--border-color":n||"#e8e8e8"};return o.createElement(k.l.Consumer,null,(({voucher:n,type:s})=>o.createElement("div",{className:l()(ge.dpVoucherLeftFlat,e,t&&ge.grayscale,Le[a].voucherFlat),onClick:r,style:c},n&&n.icon_hash&&o.createElement(B.p,{src:(0,h.Jn)(n.icon_hash),className:ge.icon,wrapperClassName:ge.iconWrapper,placeholderClassName:ge.iconPlaceholder})||o.createElement("div",null,o.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56"},o.createElement("g",{id:"spec",fill:"none",fillRule:"evenodd"},o.createElement("path",{d:"M17.71 12h19.952v32.331H17.71V12zm7.482 27.357v2.487h4.988v-2.487h-4.988zm-4.57-23.217v18.594h13.886V16.14H20.622zm23.654 20.215a14.925 14.925 0 0 0 2.112-7.678c0-2.807-.771-5.434-2.112-7.678l1.926-1.621a17.41 17.41 0 0 1 2.673 9.299c0 3.418-.98 6.606-2.673 9.298l-1.926-1.62zm-3.884-3.269a9.957 9.957 0 0 0 1.022-4.41c0-1.582-.368-3.08-1.022-4.409l1.95-1.64a12.44 12.44 0 0 1 1.559 6.05 12.44 12.44 0 0 1-1.56 6.05l-1.95-1.641zM11.099 20.999a14.925 14.925 0 0 0-2.112 7.678c0 2.807.77 5.433 2.112 7.678l-1.926 1.62A17.41 17.41 0 0 1 6.5 28.677c0-3.418.98-6.607 2.673-9.299l1.926 1.62zm3.884 3.268a9.957 9.957 0 0 0-1.022 4.41c0 1.583.368 3.08 1.022 4.409l-1.95 1.64a12.44 12.44 0 0 1-1.559-6.05c0-2.195.566-4.258 1.56-6.05l1.95 1.641z",fill:"#26AA99"})))),o.createElement("div",{className:ge.iconText},n.icon_text||n.dp_category_name||o.createElement("div",{className:ge.uppercase},(0,_.t)("label_digital_purchase"))),o.createElement("div",{className:ge.sawtoothContainer},o.createElement("div",{className:l()(ge.sawtooth,(s===m.wK.FLAT_WITH_SHADOW||s===m.wK.NORMAL_WITH_SHADOW)&&ge.shadow)})))))}),"VoucherWalletLeft")),Ie=(0,_.withI18nCollections)([s.L])((function(e){const{className:t,voucher:r}=e,a=(0,d.Kd)(),{min_spend:n,title:c}=r,l=(0,T.isFeatureEnabled)(N.xkh);return o.createElement("div",{className:t},o.createElement("span",{className:"Ld5Adi"},!!r.customised_product_scope_tag_image_hash&&o.createElement(R,{voucher:r,className:"HcoWRF"}),o.createElement("span",{className:"Ir75Jq"},c||(l&&"number"==typeof n?(0,_.t)("label_voucher_wallet_minimum_purchase",{minSpend:(0,K.ld)(n,a)}):(0,_.t)("label_free_shipping_header")))))})),Ae="NzYAiR",ye="QYu8Qd",be="MbupFe";function Pe({key:e,boxClassName:t,className:r,text:a,useTranslation:n}){return o.createElement("div",{key:e,className:t},o.createElement("div",{className:r},n?(0,_.t)(a):a))}function De({labelBoxClassName:e}){return l()(Ae,e)}function Ue({labelClassName:e}){return l()(ye,e)}const Me=[{condition:function(e){const{display_labels:t}=e;return!!t&&t.includes(m.Bq.NEW_USER)},key:"new-user-label",text:()=>(0,_.t)("label_voucher_new_user"),boxClassName:De,className:Ue},{condition:function(e){const{display_labels:t}=e;return!!t&&t.includes(m.Bq.SHOPEEPAY)},key:"shopee-wallet-only-label",text:function(e){const{reward_type:t}=e;return t===m.$P.FREE_SHIPPING_VOUCHER?"voucher_wallet_label_shopee_wallet_only_fsv":"label_shopee_wallet_only"},boxClassName:De,className:Ue},{condition:function(e){const{display_labels:t}=e;return!!t&&t.includes(m.Bq.JKO_PAY)},key:"jko-pay-label",text:()=>(0,_.t)("label_voucher_jko"),boxClassName:De,className:Ue},{condition:function(e){const{display_labels:t}=e;return!!t&&t.includes(m.Bq.SHOPEEPAY_LATER)},key:"shopee-pay-later-label",text:()=>(0,_.t)("label_voucher_shopeepay_later"),boxClassName:De,className:Ue},{condition:function(e){const{display_labels:t}=e;return!!t&&t.includes(m.Bq.LIVE_ONLY)},key:"shopee-live-only-label",text:()=>(0,_.t)("label_voucher_live_only"),boxClassName:De,className:Ue},{condition:function(e){const{display_labels:t}=e;return!!t&&t.includes(m.Bq.VIDEO_ONLY)},key:"shopee-video-only-label",text:boxClassName:De,className:Ue}],He=(0,_.withI18nCollections)([s.L])((function(e){const{voucher:{display_labels:t,customised_labels:r,distributed_labels:a,voucher_market_type:n,ui_display_type:c},voucher:_,className:s,hideOnNoLabel:i,labelClassName:u,labelBoxClassName:E,labelLimit:d}=e,h=(0,A.AE)({ui_display_type:c}),p=(0,A.Nq)(_),O=n===m.Tc.OFFLINE_PAYMENT||p,v=(0,T.isFeatureEnabled)(N.QNI),f=JSON.stringify(r),R=JSON.stringify(t),C=o.useRef(null);if(o.useEffect((()=>{const e=C&&C.current;if(e&&v){const t=e.children;for(const r of t){const t=getComputedStyle(r);if(r.offsetTop<e.offsetHeight&&"0 1 auto"!==t.getPropertyValue("flex")&&(r.style.flex="0 1 auto"),r.offsetTop>=e.offsetHeight){r.style.flex="1 1 0";const t=e.offsetWidth-r.offsetLeft-8;r.style.flex=`1 1 ${t}px`;break}}}}),[R,f,v]),O)return a?o.createElement("div",{className:l()(be,h?"nlefgj":"",s)},a.map(((e,t)=>e&&e.content&&o.createElement("div",{key:t,className:Ae,style:e.color?{color:e.color,border:`1px solid ${e.color}`}:{}},o.createElement("div",{className:ye},e.content))))):null;const g=function(e,{labelClassName:t,labelBoxClassName:r,labelLimit:a}){const{customised_labels:o}=e,n=Me.map((a=>a.condition(e)?Pe({key:a.key,text:a.text(e),boxClassName:"function"==typeof a.boxClassName?a.boxClassName({labelClassName:t,labelBoxClassName:r}):a.boxClassName,className:"function"==typeof a.className?a.className({labelClassName:t,labelBoxClassName:r}):a.className,useTranslation:!0}):null)),c=o&&o.length?o.map(((e,a)=>e&&e.content?Pe({key:`custom-label-${a}`,text:e.content,boxClassName:l()(Ae,r),className:l()(ye,t)}):null)):[],_=n.concat(c).filter(Boolean);return a?_.slice(0,a):_}(_,{labelClassName:u,labelBoxClassName:E,labelLimit:d||(v?4:2)});return i&&Array.isArray(g)&&0===g.length?null:o.createElement("div",{ref:C,className:l()(be,v&&"n93Rpg",s)},g)})),{t:Ve,withI18nCollections:we}=_.I18n;function Fe({className:e,children:t}){return n().createElement("div",{className:l()("FXgYXC",e)},t)}function ke({children:e,isOfs:t,isShopeeMart:r}){return n().createElement("div",{className:l()(t&&!r?"h+qhc-":"_0ZyHDJ")},n().createElement("div",{className:"HrAW6i"},e))}const Be=we([s.L])((function({voucher:{customised_labels:e,product_limit:t,display_labels:r},className:a,isOfs:o,isShopeeMart:c,limit:l=0}){const _=!!r&&r.includes(m.Bq.LIVE_ONLY),s=!!r&&r.includes(m.Bq.VIDEO_ONLY),i=[];return _&&i.push(n().createElement(ke,{key:"live_only_label",isOfs:o,isShopeeMart:c},Ve("label_voucher_live_only"))),s&&i.push(n().createElement(ke,{key:"video_only_label",isOfs:o,isShopeeMart:c},Ve("label_voucher_video_only"))),e&&e.length>0?(e.forEach(((e,t)=>{e&&e.content&&(!l||t<l)&&i.push(n().createElement(ke,{key:`custom_label_${t}`,isOfs:o,isShopeeMart:c},e.content))})),n().createElement(Fe,{className:a},i)):(t&&i.push(n().createElement(ke,{key:"specific_products_label",isOfs:o,isShopeeMart:c},Ve("voucher_label_specific_products"))),i.length?n().createElement(Fe,{className:a},i):n().createElement("div",null))}));r(2089);var xe=r(99972),We=r(15539),Ge=r(95325),Ye=r(38367);var Ke=r(1189),ze=r(53234),Qe=r(94767),Ze=r(2650);function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xe.apply(this,arguments)}const je=o.useEffect,$e=o.useRef,qe=o.useCallback,Je="VoucherCustomErrorPopup",et=function(e){const t=o.forwardRef(((t,r)=>o.createElement(Ze.Z,{onTrack:_.Tracking.onTrack},o.createElement(e,Xe({},t,{ref:r}))))),r=t);return t.displayName=`WithVoucherWrap(${r})`,t}((function(e){const{title:t,message:r,cancelText:a,confirmText:n,handleCancel:c,handleConfirm:l}=e,_=(e.targetType?e.targetType+".":"")+"VoucherCustomErrorActionButton",s=e.targetData||{},i=(0,Qe.Z)(_,s);return o.createElement("div",{className:"wVqUfl"},o.createElement("h3",{className:"_6ldMrX"},t),o.createElement("p",{className:"_7TgaU0"},r),o.createElement("div",{className:"cQy+JE",ref:i},o.createElement(We.Sy,{onClick:c,shouldStopPropagate:!0},a),o.createElement(ze.ZP,{targetType:_,targetData:s},o.createElement(We.nQ,{onClick:l,shouldStopPropagate:!0},n))))})),tt=o.memo((0,_.withI18nCollections)([s.L])((function({isOpen:e,onClose:t,onConfirm:r,errorConfig:a}){const n=(0,Ge.useDispatch)(),c=(0,ze.LN)(),l=(0,ze.JA)(),s=a||{},i=e&&s.use_link,u=function(){const e=(0,x.useHistory)();return qe((t=>{const{url:r,sameDomain:a}=(0,Ye.h)(t,_.config.ROOT_DOMAIN);a?e.push(r):location.href=t}),[e])}(),E=$e({dispatch:n,targetType:c,targetData:l,config:s,onClose:t,onConfirm:r,redirect:u});E.current={dispatch:n,targetType:c,targetData:l,config:s,onClose:t,onConfirm:r,redirect:u};const{showPopup:d,dismissPopup:m}=(0,xe.xh)();return je((()=>{const{targetType:e,targetData:t,config:r,onClose:a,onConfirm:n,redirect:c}=E.current;i&&d(o.createElement(et,{title:r.title||(0,_.t)("voucher_cust_err_msg_title"),message:r.content||(0,_.t)("voucher_cust_err_msg_content"),cancelText:(0,_.t)("voucher_label_close"),confirmText:r.cta_button||(0,_.t)("voucher_cust_err_msg_cta"),handleCancel:()=>{m(Je),"function"==typeof a&&a()},handleConfirm:()=>{"function"==typeof n&&n(),r.use_link&&c(r.use_link)},targetType:e,targetData:t}),!1,a,Je,!0)}),[i]),null})),((e,t)=>!(0,Ke.Z)(e,t,["isOpen"],["errorConfig"])));r(94605);const rt=function({className:e}){return o.createElement("svg",{width:"16",height:"16",className:l()("_7KXzJc",e)},o.createElement("g",{fill:"currentColor",fillRule:"nonzero"},o.createElement("path",{d:"M15.514 7.16a1.58 1.58 0 0 0-1.156-.492 1.56 1.56 0 0 0-1.148.482c-.324.324-.482.71-.482 1.157 0 .447.155.827.473 1.148.322.325.71.482 1.157.482.447 0 .832-.158 1.156-.482.324-.325.482-.7.482-1.148 0-.446-.158-.824-.482-1.147zM12.386 11.444c-.42 0-.771.14-1.06.43-.29.288-.43.63-.43 1.041 0 .413.138.765.43 1.062.287.29.64.428 1.06.428.412 0 .754-.14 1.043-.428.298-.299.447-.649.447-1.062 0-.411-.151-.751-.447-1.04a1.418 1.418 0 0 0-1.043-.43zM12.605 5.582c.482 0 .903-.176 1.253-.525.35-.352.526-.772.526-1.262 0-.5-.175-.92-.526-1.271a1.71 1.71 0 0 0-1.253-.516c-.5 0-.92.174-1.262.516a1.73 1.73 0 0 0-.525 1.27c0 .49.175.911.525 1.263.35.35.771.525 1.262.525zM7.76 13.345c-.369 0-.686.13-.947.395-.256.26-.385.577-.385.955 0 .368.13.686.385.936a1.3 1.3 0 0 0 .946.387 1.3 1.3 0 0 0 .947-.387c.26-.256.394-.568.394-.936 0-.378-.131-.701-.394-.965a1.287 1.287 0 0 0-.947-.385zM7.76 0c-.535 0-.99.185-1.367.56-.377.378-.561.825-.561 1.36 0 .534.184.998.56 1.376.377.375.833.56 1.367.56.535 0 .99-.185 1.367-.56.377-.378.57-.842.57-1.376a1.85 1.85 0 0 0-.57-1.36A1.862 1.862 0 0 0 7.76 0zM3.142 4.679a.865.865 0 0 0 .63-.254c.351-.35.351-.92 0-1.27a.865.865 0 0 0-.63-.254.871.871 0 0 0-.623.254.872.872 0 0 0 0 1.27.872.872 0 0 0 .623.254zM3.142 11.627c-.325 0-.6.127-.842.361a1.1 1.1 0 0 0-.35.823c0 .325.114.605.35.84.237.238.517.36.842.36.324 0 .604-.122.84-.36.237-.235.351-.515.351-.84a1.1 1.1 0 0 0-.35-.823c-.241-.234-.517-.36-.841-.36zM1.792 7.57a.985.985 0 0 0-.727-.306c-.29 0-.543.105-.745.307a.999.999 0 0 0-.298.736A1.019 1.019 0 0 0 1.065 9.35c.29 0 .526-.097.727-.299.202-.202.307-.456.307-.744 0-.29-.105-.534-.307-.736z"})))};var at=r(74294),ot=r(29999),nt=r(41891),ct=r(25373),lt=r(28412);function _t({className:e}){return n().createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e},n().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33366 5.33301C3.8609 5.33301 2.66699 6.52692 2.66699 7.99967V13.9997H4.00033C5.1049 13.9997 6.00033 14.8951 6.00033 15.9997C6.00033 17.1042 5.1049 17.9997 4.00033 17.9997H2.66699V23.9997C2.66699 25.4724 3.8609 26.6663 5.33366 26.6663H12.0003V23.9997H13.3337V26.6663H26.667C28.1398 26.6663 29.3337 25.4724 29.3337 23.9997V17.9997H27.3337C26.2291 17.9997 25.3337 17.1042 25.3337 15.9997C25.3337 14.8951 26.2291 13.9997 27.3337 13.9997H29.3337V7.99967C29.3337 6.52692 28.1398 5.33301 26.667 5.33301H13.3337V7.99967H12.0003V5.33301H5.33366ZM13.3337 9.99967H12.0003V12.6663H13.3337V9.99967ZM12.0003 14.6663H13.3337V17.333H12.0003V14.6663ZM13.3337 19.333H12.0003V21.9997H13.3337V19.333Z",fill:"#EE4D2D"}))}function st(e){const{num:t,className:r,iconClassName:a}=e;return n().createElement("div",{className:l()("XrpgG6",r)},"+",t,n().createElement(_t,{className:l()(a)}))}var it=r(86565);const ut=o.useCallback,Et={progress:at.Z.INIT};function dt({afterClaim:e,onClaim:t,applyText:r,voucher:a,className:n,containerClassName:c,applyBtnClassName:s,disableClaimingOnFullyClaimed:i,shouldExpandButtonClickArea:u,accountStatus:E,buttonDisabled:d,onAnimationChange:m,needAnimation:h}){const p=E===lt.d.LOGGED_IN,O=(0,x.useHistory)(),v=(0,Ge.useSelector)((e=>a&&a.voucher_code&&e.voucher.claimProgress[a.voucher_code]||Et)),{usage_limit_per_user:f}=a,R=v.progress===at.Z.REQ,C=a.is_claimed_before||v.progress===at.Z.OK,N=i&&100===a.percentage_claimed,T=Boolean(C&&e),[g,L]=(0,o.useState)(!1),S=(0,o.useRef)(0);(0,o.useEffect)((()=>{v.progress===at.Z.REQ&&(S.current=at.Z.REQ)}),[v.progress]),(0,o.useEffect)((()=>{h&&v.progress!==at.Z.REQ&&S.current===at.Z.REQ&&(v.progress===at.Z.OK&&L(!0),S.current=at.Z.OK,setTimeout((,900))}),[h,v.progress,m,S.current]);const I=ut((r=>{r.stopPropagation(),R||g||(p||O.push((0,nt.FK)(ot.D_.getUrl(),{next:location.href})),T&&"function"==typeof e?e():[at.Z.INIT,at.Z.ERR].includes(v.progress)&&!N&&(t(),h&&m&&m(!0)))}),[m,h,p,T,e,v.progress,N,O,t,R,g]),y=T?(0,A.np)(a)?"UseLater":"AfterClaim":"";return o.createElement(ze.ZP,{targetType:y},o.createElement("div",{className:l()(c,"yMeGP9"),onClick:u&&I},g&&o.createElement(st,{num:f||0,className:l()("rs3NiE",g&&"_4XHCsM"),iconClassName:"y4HknO"}),o.createElement(We.nQ,{size:"s",disabled:(d||R||C&&!T||N)&&!g,className:l()("_27wMvC",n,!g&&T&&"wjinWT",!g&&T&&s,!g&&T&&(0,A.np)(a)&&"YQ56Rs"),onClick:I,shouldStopPropagate:!0},g?(0,_.t)("voucher_claim"):T?(0,A.np)(a)?(0,_.t)("label_voucher_use_later"):r||(0,_.t)("label_voucher_seller_voucher_use"):C?(0,_.t)("voucher_claimed"):R?o.createElement(rt,{className:"B7rdLr"}):(0,_.t)("voucher_claim"))))}const mt=(0,it.q)((0,ct.u)({fetchOnMount:!0}),(0,_.withI18nCollections)([s.L]))(o.memo(dt,((e,t)=>!(0,Ke.Z)(e,t,["voucher","onClaim"]))));var ht=r(36388);const pt=["onClaim","voucher","trackClick"];function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ot.apply(this,arguments)}function vt(e){const t=(0,Ge.useDispatch)(),{onClaim:r,voucher:a,trackClick:c}=e,l=e,pt),_=(0,o.useCallback)((()=>{!async function(){c&&c();const{promotionid:e,shop_id:o}=a,{error:n,response:l}=await t((0,ht.Ek)({promotionid:e,voucher_code:a.voucher_code||"",shopid:o}));let _=m.eg.CLAIM_ERROR_OK,s=null;n||!l||l.error||!l.data?_=m.eg.CLAIM_ERROR_UNKNOWN:(_=l.data.invalid_message_code||_,s=l.data.error_config),r&&await r(a,_,s)}()}),[t,r,c,a]);return n().createElement(mt,Ot({},l,{onClaim:_,voucher:a}))}(0,_.withI18nCollections)([s.L])((function({onApply:e,disabled:t,isApplying:r,trackingClick:a}){const c=(0,o.useCallback)((,[e]);return n().createElement(We.Xd,{baseClass:"QBT1pQ",onClick:c,disabled:t,trackingClick:a,shouldStopPropagate:!0},r?n().createElement(rt,null):(0,_.t)("label_voucher_apply"))}));function ft(e){const{voucher:t}=e,{shop_id:r}=t,a=(0,A.AE)(t);return o.createElement("div",{className:l()("aMrlTb",a?"WY5Jvp":"","opY6cr")},o.createElement(C,{voucher:t}),!!r&&o.createElement(Be,{className:"L5TKMj",voucher:t}),!r&&!a&&o.createElement(He,{voucher:t}),o.createElement(F,{voucher:t}))}const Rt="nPHNox",Ct=r.p+"voucher/98fdd4361a7be7b594d8720e75408fa1.png",Nt=r.p+"voucher/18f2123166fc527982d8f64bd3a69c4f.png",Tt={withI18nCollections:gt}=_.I18n,Lt=gt([s.L])((0,oe.Z)((function({className:e,grayscale:t,voucher:r,trackingClick:a}){return o.createElement("div",{className:l()("VMMFjn",{qi2J3h:r.reward_type===m.$P.SHIPPING_FEE,[Rt]:t},e),onClick:a},r&&o.createElement(B.p,{src:r.icon_hash?(0,h.Jn)(r.icon_hash):Tt(r),wrapperClassName:"_4L0oZV",placeholderClassName:"D7X-Rb",className:"OV41Dp",hidePlaceholder:!0}),o.createElement("div",{className:"gcSuV9"},r&&r.icon_text||o.createElement("div",{className:"_9JQJLa"},r.icon_text||"")),o.createElement("div",{className:l()("NxVu8n",t&&Rt)}))}),"VoucherWalletLeft")),St={voucherWrapper:"cjeow9",voucherBody:"_7Hm9FE",voucherLeftContainer:"lrJAWi",rightContainer:"Wd8SF-",cornerBadge:"RBLWmw",bold:"_9pNc2X",inValidCornerBadge:"DChD7Z",link:"n6o6Bk",highlighted:"_8xluWf",rightButtons:"+JyftT"};var It=r(63913),At=r(45042);const{t:yt,withI18nCollections:bt}=_.I18n,Pt=bt([s.L])((function(e){const{className:t}=e,[r,a]=o.useState(!1),n=(0,At.Z)("UseLink",e);return o.createElement(o.Fragment,null,o.createElement("div",{onClick:e=>{n(),a(!0),e.stopPropagation()}},o.createElement("a",{className:l()("F0GPeb",t)},yt("label_use"))),o.createElement(It.Z,{isOpen:r,onOverlayClick:()=>a(!1)},o.createElement(xe.bO,{customDesc:yt("msg_download_app_to_use_voucher"),customTitle:yt("msg_voucher_is_used_on_shopeefood_app"),targetType:"VoucherWallet.DownloadAppPopup"})))}));(0,_.withI18nCollections)([s.ez])((function(e){const{voucher:t,status:r,className:a,highlighted:n}=e,{left_count:c,use_type:s,quota_type:i}=t,u=1===r,E=2===r,d=!u&&!E,h=0===c,p=(0,A.lT)(e.voucher),O=i===m.Y.USAGE_CONTROLLED_PRIVATE_VOUCHER,v=u||E||d&&s===m.yD.PUBLIC||O,f=(0,Qe.Z)("VoucherWalletCard",e);return o.createElement("div",{className:St.voucherWrapper,ref:f},o.createElement(Ne,{className:l()(St.voucherBody,a),voucher:t},o.createElement("div",{className:St.voucherLeftContainer},o.createElement(Lt,{voucher:t,grayscale:!d})),o.createElement(Te,{voucher:t,grayscale:!d,className:l()(St.rightContainer,{[St.highlighted]:n})},o.createElement(ft,{voucher:t}),o.createElement("div",{className:l()(St.columns,St.alignRight,St.rightButtons,!1)},d&&o.createElement(Pt,{voucher:t})))),v&&o.createElement("div",{className:l()(St.cornerBadge,!d&&St.inValidCornerBadge)},u?(0,_.t)("label_voucher_badge_used"):h?(0,_.t)("label_voucher_badge_used_up"):p?(0,_.t)("label_voucher_badge_expired"):t.fully_redeemed?(0,_.t)("label_voucher_fully_redeemed"):E?(0,_.t)("label_voucher_badge_invalid"):O?(0,_.t)("label_voucher_limited_stock"):c&&c<=1e3?(0,_.t)("label_n_left",{count:c}):(0,_.t)("label_voucher_limited_stock")))}));function Dt({children:e,className:t,invalid:r,onTop:a}){const o=l()("USK7u8",a?"_3yfNGl":"sUnwnY",r?"g5prK-":"jHLlgK",t);return n().createElement("div",{className:o},e)}const Ut=(0,_.withI18nCollections)([s.L])((function({isShort:e=!1,invalid:t=!1,onTop:r=!1,className:a}){const o=e?(0,_.t)("label_limited"):(0,_.t)("label_voucher_limited_stock"),c=(0,T.isFeatureEnabled)(N.V6n);return n().createElement(k.l.Consumer,null,(({voucher:e})=>{if(e){const{shop_id:l,quota_type:_,use_type:s}=e;if(l&&!c)return;const i=_===m.Y.USAGE_CONTROLLED_PRIVATE_VOUCHER,u=s&&s===m.yD.PUBLIC;if(i||u)return n().createElement(Dt,{className:a,invalid:t,onTop:r},o)}}))}));var Mt=r(80597),Ht=r(24277),Vt=r(48193),wt=r(4493),Ft=r(16059);const kt=(0,d.Kd)(),Bt=(0,_.withI18nCollections)([s.L])((function(e){const{voucher:t,shouldBeClickable:r,className:a,preSource:n}=e,{ui_display_type:c}=t,[l,s]=o.useState(!1),i=(0,A.np)(t),u=(0,At.Z)(i?"UseLaterLink":"UseLink",e),[E]=(0,Vt.JS)("FSV_VLP_VOUCHER_TOGGLE","FSV_VLP_VOUCHER_TOGGLE_WEB"),[d]=(0,Vt.JS)(m.G8,m.S0),h=(0,A.Nq)(t),p=(0,A.Z2)(t)||h,O=p&&c===m.ob.PUBLISHER_OPV;let v=r?O?m.LH:(0,Ft.D)(t,{fromMyVoucherPage:!0,preSource:n},null==E?void 0:E.parameter,null==d?void 0:d.parameter):void 0;E&&"homepage"===E.parameter?(0,A.np)(t)&&!(0,A.wi)(t)&&(v=(0,A.Xz)(t,v,E.parameter)):(0,A.np)(t)&&(v=(0,A.Xz)(t,v));const f=o.useCallback((e=>{u(),p&&s(!0),e.stopPropagation()}),[p,u]),R="TH"===kt||"VN"===kt;return o.createElement(o.Fragment,null,o.createElement("div",{onClick:f},o.createElement(wt.Z,{className:a,to:p||O?void 0:v},(0,A.np)(t)&&!p?(0,_.t)("label_voucher_use_later"):(0,_.t)("label_use"))),o.createElement(It.Z,{isOpen:l,onOverlayClick:,o.createElement(xe.bO,{customDesc:(0,_.t)("page_wallet_label_app_only"),customTitle:R||h?(0,_.t)("msg_voucher_airpay_offline_popup"):p?(0,_.t)("msg_download_app_to_use_voucher"):(0,_.t)("msg_voucher_shopeepay_offline_popup"),targetType:"VoucherWallet.DownloadAppPopup"})))}));var xt=r(57608),Wt=r(2649);const Gt=(0,_.withI18nCollections)([s.L])((0,oe.Z)((function(e){const{className:t,voucher:r,shouldBeClickable:a,trackingClick:n,dpSource:c}=e,{voucher_code:s,promotionid:i,signature:u}=r,[E,d]=o.useState(!1),h=(0,p.T_)(),O=(0,A.Z2)(r)||(0,A.Nq)(r);let v;if((0,A.iK)(r)){const e=(0,A.ZD)({activityId:i,voucherCode:s,dp_from_source:c||m.aB.VOUCHER_WALLET_HOME});v=Wt.Sl.getUrl(e)}else v=a?{pathname:h.getUrl(void 0),search:(0,xt.Wc)(Object.assign({action:O?"use_now":"use"},{evcode:(0,p._B)(s||"0"),promotionId:i,signature:u||""}))}:"";return o.createElement(o.Fragment,null,o.createElement("div",{className:l()("YtTFfx","_31O9Wz",t),onClick:e=>{n(),O&&d(!0),e.stopPropagation()}},a&&!O?o.createElement(x.Link,{to:v},(0,_.t)("label_voucher_tnc")):o.createElement("div",{className:l()("Qf4rJ8",O&&"b45rQq")},(0,_.t)("label_voucher_tnc"))),o.createElement(It.Z,{isOpen:E,onOverlayClick:,o.createElement(xe.bO,{customDesc:(0,_.t)("page_wallet_label_app_only"),customTitle:(0,_.t)("msg_download_app_to_use_voucher"),targetType:"VoucherWallet.DownloadAppPopup"})))}),"TCLink")),Yt="ysKaPV";function Kt(e){const{voucher:t,isEnabled:r,isClickable:a,voucherStatus:o,voucherLocation:c,status:_,highlighted:s=!1,dpSource:i,preSource:u}=e,E=(0,A.AE)(t);return n().createElement(Te,{className:l()("_8fIXo+",{_4tVdMA:s,[Yt]:E}),grayscale:!r,voucherStatus:o,voucher:t,voucherLocation:c},n().createElement(Ht.Z,{voucher:t,isEnabled:r}),n().createElement("div",{className:l()("-noJH7","_2I7nMk","_3n5QZ7",!r&&"ifVQph")},r&&n().createElement(Bt,{voucher:t,className:l()("NGQ9Qe",E?Yt:""),voucherStatus:o,voucherLocation:c,shouldBeClickable:a,preSource:u}),n().createElement(Gt,{className:E?Yt:"",voucher:t,voucherStatus:o,voucherLocation:c,shouldBeClickable:a,status:_,dpSource:i})))}function zt(e){const{voucher:t,status:r,className:a,isClickable:n,voucherLocation:c,highlighted:s=!1,dpSource:i,preSource:u}=e,{reward_type:E,left_count:d,shop_id:h,voucher_market_type:p,quota_type:O}=t,v=1===r,f=2===r,R=!v&&!f,C=0===d,N=(0,Mt.lT)(e.voucher),T=(m.Y.USAGE_CONTROLLED_PRIVATE_VOUCHER,E===m.$P.FREE_SHIPPING_VOUCHER),g=p===m.Tc.DIGITAL_PURCHASE,L=p===m.Tc.OFFLINE_PAYMENT,S=(0,A.Nq)(t),I=1===r?"used":2===r?"invalid":"valid",y=n?{to:W.Ri.getUrl({shopId:h})}:{},b=(0,Qe.Z)("VoucherWalletCard",e);return o.createElement("div",{className:"zwg7RL",ref:b},o.createElement(Ne,{className:l()("KLU19H",a),voucher:t},o.createElement("div",{className:"sCUh+W"},T?o.createElement(ce,{grayscale:!R,voucherStatus:I,voucher:t,voucherLocation:c}):g?o.createElement(Se,{grayscale:!R,voucherStatus:I,voucher:t,voucherLocation:c}):L||S?o.createElement(me,{grayscale:!R,voucherStatus:I,voucher:t,voucherLocation:c}):h?o.createElement(wt.Z,y,o.createElement(ie,{shopTypeVisible:!0,grayscale:!R,className:l()("a61c6M",{gMXfIx:s}),voucherStatus:I,voucher:t,voucherLocation:c})):o.createElement(ve,{grayscale:!R,voucherStatus:I,voucher:t,voucherLocation:c})),o.createElement(Kt,{voucher:t,status:r,isEnabled:R,isClickable:n,voucherStatus:I,voucherLocation:c,highlighted:s,dpSource:i,preSource:u}),R?o.createElement(Ut,null):o.createElement("div",{className:l()("-dtmFA","VeUMfQ")},v?(0,_.t)("label_voucher_badge_used"):N?(0,_.t)("label_voucher_badge_expired"):C?(0,_.t)("label_voucher_fully_redeemed"):f?(0,_.t)("label_voucher_badge_invalid"):void 0)))}zt.defaultProps={isClickable:!0};const Qt=(0,_.withI18nCollections)([s.ez])(zt);function Zt(e){return n().createElement("svg",{width:"5",height:"6",viewBox:"0 0 5 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e.className},n().createElement("path",{d:"M1.50391 0.716797L2.50977 2.46973L3.53516 0.716797H4.8291L3.22754 3.30957L4.89258 6H3.59863L2.52441 4.17383L1.4502 6H0.151367L1.81152 3.30957L0.214844 0.716797H1.50391Z",fill:"#EE4D2D"}))}function Xt(e){return n().createElement("div",{className:l()("oJmMfg",e.className)},n().createElement(Zt,{className:l()("Nsg2GP",e.iconClassName)})," ",n().createElement("div",null,e.num))}r(6993)},6993:(e,t,r)=>{"use strict";r.d(t,{GN:()=>s});var a=r(63804),o=r(86704),n=r(93319),c=r(81166);const l=Object.freeze({[n.eg.CLAIM_ERROR_UNKNOWN]:"msg_voucher_server_error",[n.eg.CLAIM_ERROR_EXIST]:"alert_claim_error_exist",[n.eg.CLAIM_ERROR_INVALID]:"alert_claim_error_invalid",[n.eg.CLAIM_ERROR_EXPIRED]:"alert_claim_error_expired",[n.eg.CLAIM_ERROR_NO_QUOTA]:"alert_claim_error_no_quota",[n.eg.CLAIM_ERROR_USER_SCOPE]:"alert_claim_error_user_scope",[n.eg.CLAIM_ERROR_NOT_START]:"alert_claim_error_not_start",[n.eg.CLAIM_ERROR_FROM_SELF_SHOP]:"alert_claim_error_self_shop",[n.eg.CLAIM_ERROR_NOT_FOUND]:"alert_claim_error_not_found"});function _({errorCode:e}){return(0,o.useI18nCollections)(c.L),a.createElement(a.Fragment,null,(0,o.t)(l[e]||"msg_voucher_server_error"))}const s=e=>a.createElement(a.Suspense,{fallback:""},a.createElement(_,{errorCode:e}))},82884:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>Z,vg:()=>Ne,zH:()=>a,Vn:()=>Y,Nb:()=>ge,zz:()=>Te,iI:()=>Re,LN:()=>fe,xD:()=>Ee,u$:()=>ue,F8:()=>ie,C8:()=>K,TT:()=>me,Ek:()=>he,i:()=>de,AU:()=>Ce,WF:()=>Oe,Vk:()=>pe,rc:()=>ve});var a={};r.r(a),r.d(a,{URL_BATCH_GET_VOUCHERS_BY_PROMOTION_IDS:()=>O,URL_BATCH_GET_VOUCHER_BY_PRMOTION_ID:()=>h,URL_BATCH_GET_VOUCHER_BY_PRMOTION_ID_LITE:()=>p,URL_BFF_BATCH_GET_VOUCHERS_BY_PROMOTION_IDS:URL_COLLECTIONS_GET_VOUCHERS:()=>w,URL_GET_BFF_RECOMMENDED_MICROSITE_GRID_VOUCHERS:()=>U,URL_GET_BFF_RECOMMENDED_VOUCHERS:()=>D,URL_GET_MPI_RECOMMENDED_OPV:()=>V,URL_GET_MPI_RECOMMENDED_VOUCHERS_BY_MODEL:()=>H,URL_GET_PARTNER_VOUCHERS:()=>l,URL_GET_RECOMMENDED_VOUCHERS_BY_MODEL:()=>M,URL_GET_RECOMMEND_LITE_VOUCHERS:()=>y,URL_GET_RECOMMEND_PLATFORM_VOUCHERS:()=>N,URL_GET_RECOMMEND_SHOP_VOUCHERS:()=>C,URL_GET_RECOMMEND_VOUCHERS:()=>c,URL_GET_SHOP_VOUCHERS_BY_SHOPID:()=>u,URL_GET_SHOP_VOUCHERS_BY_SHOPID_LITE:()=>E,URL_GET_SHOP_VOUCHER_LIST_BY_SHOPID:()=>d,URL_GET_SHOP_VOUCHER_LIST_BY_SHOPID_LITE:()=>m,URL_GET_USER_VOUCHER_BY_TIME:()=>f,URL_GET_USER_VOUCHER_LIST:()=>b,URL_GET_USER_VOUCHER_LIST_META:()=>P,URL_GET_VOUCHERS:()=>o,URL_GET_VOUCHERS_LITE:()=>n,URL_GET_VOUCHER_BY_PRMOTION_ID:()=>i,URL_GET_VOUCHER_TERMS_AND_CONDITIONS:()=>R,URL_MARK_PARTNER_VOUCHERS:()=>_,URL_SAVE_PLATFORM_VOUCHER_BY_VOUCHER_CODE:()=>g,URL_SAVE_SHOP_VOUCHER:()=>L,URL_SAVE_SHOP_VOUCHER_BY_VOUCHER_CODE:()=>T,URL_SAVE_VOUCHER:()=>s,URL_VALIDATE_PLATFORM_VOUCHER_BY_VOUCHER_CODE:()=>I,URL_VALIDATE_SHOP_VOUCHER_BY_VOUCHER_CODE:()=>S,URL_VALIDATE_VOUCHER_DRAWER:()=>A}),r(57608);const o="/api/v2/voucher_wallet/get_vouchers",n="/api/v2/voucher_wallet/spl/get_vouchers",c="/api/v2/voucher_wallet/get_recommend_vouchers",l="/api/v2/voucher_wallet/get_partner_vouchers",_="/api/v2/voucher_wallet/mark_partner_voucher",s="/api/v2/voucher_wallet/save_voucher",i="/api/v2/voucher_wallet/get_free_shipping_voucher_by_promotion_id",u="/api/v2/voucher_wallet/get_shop_vouchers_by_shopid",E="/api/v2/voucher_wallet/spl/get_shop_vouchers_by_shopid",d="/api/v2/voucher_wallet/get_shop_voucher_list_by_shopid",m="/api/v2/voucher_wallet/spl/get_shop_voucher_list_by_shopid",h="/api/v2/voucher_wallet/batch_get_voucher_by_promotion_id",p="/api/v2/voucher_wallet/spl/batch_get_voucher_by_promotion_id",O="/api/v2/voucher_wallet/batch_get_vouchers_by_promotion_ids",v="/api/v4/voucher_wallet/batch_get_vouchers_by_promotion_ids",f="/api/v2/voucher_wallet/get_user_voucher_by_time",R="/api/v2/voucher_wallet/get_voucher_terms_and_conditions",C="/api/v2/voucher_wallet/get_recommend_shop_vouchers",N="/api/v2/voucher_wallet/get_recommend_platform_vouchers",T="/api/v2/voucher_wallet/save_shop_voucher_by_voucher_code",g="/api/v2/voucher_wallet/save_platform_voucher_by_voucher_code",L="/api/v2/voucher_wallet/save_shop_voucher",S="/api/v2/voucher_wallet/validate_shop_voucher_by_voucher_code",I="/api/v2/voucher_wallet/validate_platform_voucher_by_voucher_code",A="/api/v4/voucher_wallet/validate_voucher_drawer",y="/api/v2/voucher_wallet/spl/get_recommend_vouchers",b="/api/v2/voucher_wallet/get_user_voucher_list",P="/api/v4/voucher_wallet/get_user_voucher_list_meta",D="/api/v4/recommend/recommend",U="/api/v4/mpi/get_microsite_recommended_vouchers",M="/api/v4/voucher/get_recommended_vouchers_by_model",H="/api/v4/mpi/rcmd/get_recommended_vouchers_by_model",V="/api/v4/mpi/rcmd/get_recommended_opv",w="/api/v4/microsite/get_vouchers";var F=r(86704),k=r(59506);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B.apply(this,arguments)}async function x(e){return 90309999===e.error?new Promise(():e.error?{error:e.error,error_msg:e.error_msg,data:e.data,response:void 0}:{response:B({},e,{status:e.__raw.status,headers:e.__raw.headers})}}const W="Voucher.PC",G=()=>B({apiProtection:{signatureLevel:2}},{antiCrawler:{appKey:W,shouldReplaceHistory:!1}});async function Y(e,t){var r,a;const o=(0,k.ZP)(null!=(r=G())?r:{},null!=(a=null==t?void 0:t.antiFraudConfig)?a:{}),n=await F.FetchUtils.get(e,B({},t,{antiFraudConfig:o}));return await x(n)}async function K(e,t,r){var a,o;const n=(0,k.ZP)(null!=(a=G())?a:{},null!=(o=null==r?void 0:r.antiFraudConfig)?o:{}),c=await F.FetchUtils.post(e,t||{},B({},r,{antiFraudConfig:n}));return await x(c)}var z,Q;let Z;function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X.apply(this,arguments)}!function(e){e[e.Captcha=1]="Captcha",e[e.ForceLogin=2]="ForceLogin"}(z||(z={})),Q||(Q={})),Z||(Z={}));const j=N,$=T,q=g,J=L,ee=s,te=S,re=I,ae=A,oe=C,ne=b,ce=P,le=H,_e=V,se=O;function ie(e,t,r,a,o){const n=o?{headers:o}:{};return K("/api/v2/voucher_wallet/get_voucher_detail",X({promotionid:e,voucher_code:t,signature:r},a),X({},n,{antiFraudConfig:{antiCrawler:{shouldReplaceHistory:!0}}}))}function ue({orders:e,shopid:t,group_buy_info:r,slash_price_info:a,spm_channel_id:o,legacy_spm_channel_id:n,check_voucher_payment_criteria:c,selected_payment_channel_data:l,card_bin_number:_,sorting_flag:s,priority_promotion_ids:i,has_redeem_coins:u,platform_vouchers:E,move_up_addon_voucher:d},m){return K(oe,{orders:e,shopid:t,group_buy_info:r,slash_price_info:a,spm_channel_id:o,legacy_spm_channel_id:n,check_voucher_payment_criteria:c,selected_payment_channel_data:l,card_bin_number:_,sorting_flag:s,priority_promotion_ids:i,has_redeem_coins:u,platform_vouchers:E,move_up_addon_voucher:d},m?{headers:m}:{})}function Ee({orders:e,group_buy_info:t,slash_price_info:r,voucher_market_type:a,dp_items:o,check_voucher_payment_criteria:n,selected_payment_channel_data:c,spm_channel_id:l,legacy_spm_channel_id:_,card_bin_number:s,need_wallet_active_info:i,sorting_flag:u,priority_promotion_ids:E,voucher_payment_type:d,has_redeem_coins:m,higher_bpsf_logistics_channel:h,payment_manual_change:p,caller_source:O},v){return K(j,X({orders:e,group_buy_info:t,slash_price_info:r,voucher_market_type:a,dp_items:o,check_voucher_payment_criteria:n,selected_payment_channel_data:c,spm_channel_id:l,legacy_spm_channel_id:_,card_bin_number:s,need_wallet_active_info:i,sorting_flag:u,priority_promotion_ids:E},null!=d?{voucher_payment_type:d}:{},{has_redeem_coins:m,higher_bpsf_logistics_channel:h,payment_manual_change:p,caller_source:O}),v?{headers:v}:{})}function de({voucher_code:e,shopid:t},r){return K($,{voucher_code:e,shopid:t},X({},r?{headers:r}:{}))}function me({voucher_code:e},t){return K(q,{voucher_code:e},X({},t?{headers:t}:{}))}function he({promotionid:e,voucher_code:t,shopid:r},a){return K(J,{promotionid:e,voucher_code:t,shopid:r},X({},a?{headers:a}:{}))}function pe(e,t){return K(te,e,X({},t?{headers:t}:{}))}function Oe(e,t){return K(re,e,X({},t?{headers:t}:{}))}function ve(e,t){return K(ae,e,t?{headers:t}:{})}async function fe(e,t){const r=X({},e);return 0===r.user_voucher_list_type&&delete r.user_voucher_list_type,await K(ne,X({},r,{limit:r.limit||30,cursor:r.cursor||"",voucher_sort_flag:r.voucher_sort_flag||1,need_statistics:r.need_statistics}),t?{headers:t}:{})}function Re(e){return K(ce,{},e?{headers:e}:{})}function Ce({voucher_code:e,voucher_promotionid:t,promotion_signature:r,need_user_voucher_status:a,source:o,sz_dfp:n,need_sz_dfp:c=!1},l){return K(ee,X({voucher_code:e,voucher_promotionid:t,signature:r},n&&{security_device_fingerprint:n},a?{need_user_voucher_status:a}:{},null==o?{}:{signature_source:o}),X({},c?{antiFraudConfig:{deviceFingerPrint:{dataFormatter:}}:{},l?{headers:l}:{}))}function Ne(e,t,r){return K(se,{promotion_info:e,need_user_voucher_status:!!t},r?{headers:r}:{})}function Te(e){return K(le,e)},83458:(e,t,r)=>{"use strict";r.d(t,{nE:()=>i,ld:()=>u,us:()=>E,U:()=>d,x2:()=>m,Ho:()=>h,AS:()=>p,G:()=>O,ce:()=>v,yl:()=>f});var a=r(72104),o=r(471);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n.apply(this,arguments)}const{localizeCompactNumber:c,compactCurrency:l,formatServerCurrency:_,compactServerCurrency:s}=(0,o.getUtilsByCountry)((0,a.Kd)(),a.of?(0,a.of)():void 0);function i(e){return e=parseFloat(String(e||0))/1e5,isFinite(e)?"zh-Hant"===(0,a.of)()?parseFloat(((100-e)/10).toFixed(3)):parseFloat(e.toFixed(2)):e}const u=(e,t)=>{switch(t){case"TH":case"TW":return(0,o.formatCurrency)(t,(0,o.deflateServerNumber)(e,t));case"VN":return l((0,o.deflateServerNumber)(e,t),3);default:return l((0,o.deflateServerNumber)(e,t),2)}};function E(e,t,r=!1){const a=r?{symbol:""}:void 0;switch(t){case"TW":return(0,o.formatCurrency)(t,(0,o.deflateServerNumber)(e,t),a);case"VN":return l((0,o.deflateServerNumber)(e,t),n({maxPrecision:3},a));default:return l((0,o.deflateServerNumber)(e,t),a)}}function d(e,t){return u(e,t)}unction h(e,t){switch(t){case"ID":return c(e);case"VN":return l(e,{symbol:"",maxPrecision:3});default:return l(e,{symbol:"",precision:0},[])}}function p(e,t){return r=e,r=parseFloat(String(r||0)),isFinite(r)?"zh-Hant"===(0,a.of)()?Math.round(100-r)/10:Math.round(r):r;var r}const O=(e,t)=>"TW"===t?(0,o.formatCurrency)(t,e,{symbol:""}):l(e,{symbol:"",maxPrecision:3}),v=(e,t)=>"TW"===t?_(e,{precision:!1}):s(e,{maxPrecision:3}),f=(e,t)=>l((0,o.deflateServerNumber)(e,t),{maxPrecision:3})},93319:(e,t,r)=>{"use strict";r.d(t,{l2:()=>G,eg:()=>m,uQ:()=>Y,Qb:()=>Q,sj:()=>z,G_:()=>Z,$u:()=>te,S0:()=>ee,G8:()=>J,PD:()=>re,j4:()=>R,Dh:()=>N,kv:()=>x,fq:()=>C,IV:()=>q,cP:()=>$,He:()=>j,m7:()=>ae,RP:()=>X,i8:()=>h,me:()=>O,gs:()=>B,LH:()=>D,cJ:()=>U,Xq:()=>P,W2:()=>y,h4:()=>u,fr:()=>g,Fx:()=>p,j8:()=>K,o$:()=>A,wK:()=>s,sU:()=>I,Y:()=>T,kG:()=>S,vc:()=>k,tz:()=>f,zQ:()=>v,$s:()=>F,Bq:()=>_,ob:()=>L,aB:()=>W,sd:()=>l,vT:()=>V,Tc:()=>c,O_:()=>H,zf:()=>w,QG:()=>M,Q_:()=>b,DF:()=>i,$P:()=>n,Z$:()=>d,b4:()=>E,yD:()=>o});var a=r(72104);const o={PRIVATE:0,PUBLIC:1},n={NORMAL_VOUCHER:0,COIN_CASHBACK_VOUCHER:1,FREE_SHIPPING_VOUCHER:2,PREPAID_CASHBACK:3,PREPAID_COIN_CASHBACK:4,PREPAID_DISCOUNT:5,SHIPPING_FEE:6},c={DEFAULT_MARKET_PLACE:1,DIGITAL_PURCHASE:2,CASHLOAN_BUYER:3,OFFLINE_PAYMENT:4,CASHLOAN_SELLER:5,SHOPEE_EXPRESS:6,SHOPEE_FOOD:8,SHOPEEPAY_LATER:9,SHOPEE_INSURANCE:10},l={UNKNOWN:0,NOW_FOOD:1,AIRPAY_OPV:2,PARTNER:3},_={NEW_USER:1,SHOPEEPAY:2,SHOPEEPAY_LATER:3,JKO_PAY:4,LIVE_ONLY:5,VIDEO_ONLY:6},s={NORMAL:1,NORMAL_WITH_SHADOW:2,FLAT:3,FLAT_WITH_SHADOW:4},i={ALL:0,SHOPEE_VOUCHER:1,SHOP_VOUCHER:2,NOWFOOD_VOUCHER:3,OFFLINE_VOUCHER:4,DP_VOUCHER:5},u={ALL:0,SHOPEE_VOUCHER:1,SELLER_VOUCHER:2,DP_VOUCHER:3,OFFLINE_PAYMENT_VOUCHER:4,NOWFOOD_VOUCHER:5,PARTNER_VOUCHER:6,SHOPEE_FOOD_VOUCHER:7,FINANCIAL_PRODUCT_VOUCHER:9,SHOPEE_EXPRESS_VOUCHER:8},E={VALID:1,USED:2,INVALID:3},d={LATEST_SAVE_TIME:1,HIGHEST_GLOBAL_USAGE_RATE:2,LOWEST_TIME_TO_EXPIRY:3,LOWEST_TIME_TO_EXPIRY_WITHOUT_FILTER:5,VOUCHER_TYPE:6},m=(Object.freeze({DROPPED:-2,UNKNOWN:-1,NOT_FOUND:4,EXISTS:5,PROMOTION:14}),Object.freeze({CLAIM_ERROR_UNKNOWN:-1,CLAIM_ERROR_OK:0,CLAIM_ERROR_EXIST:1,CLAIM_ERROR_INVALID:2,CLAIM_ERROR_EXPIRED:3,CLAIM_ERROR_NO_QUOTA:4,CLAIM_ERROR_USER_SCOPE:5,CLAIM_ERROR_NOT_START:6,CLAIM_ERROR_FROM_SELF_SHOP:7,CLAIM_ERROR_NOT_FOUND:8})),h=Object.freeze({ERROR:-1,NONE:0,INVALID:1,WRONG_CODE:2,CODE_EXPIRED:3,NO_QUOTA:4,NO_APPLICABLE:5,ALREADY_USED:6,MIN_BUCKET_NOT_MET:7,NOT_STARTED:8,INVALID_COUNTRY:9,NOT_COMPLETE_TASK:10,UA_NO_MATCH:14,FROM_SELLER_OWN_SHOP:16,PAYMENT_NOT_MATCH:17,CLAIM_NOT_START:18,LOGISTICS_NOT_MATCH:19,NO_COMMON_PAYMENT_CRITERIA:21,ALLOW_DISPLAY:22,PAYMENT_FROZEN:23}),p={PLATFORM:1},O={[h.ERROR]:"error",[h.NONE]:"none",[h.INVALID]:"invalid",[h.WRONG_CODE]:"wrong_code",[h.CODE_EXPIRED]:"code_expired",[h.NO_QUOTA]:"no_quota",[h.NO_APPLICABLE]:"no_applicable",[h.ALREADY_USED]:"already_used",[h.MIN_BUCKET_NOT_MET]:"min_bucket_not_met",[h.NOT_STARTED]:"not_started",[h.INVALID_COUNTRY]:"invalid_country",[h.NOT_COMPLETE_TASK]:"not_complete_task",[h.UA_NO_MATCH]:"ua_no_match",[h.FROM_SELLER_OWN_SHOP]:"from_seller_own_shop",[h.PAYMENT_NOT_MATCH]:"payment_not_match",[h.CLAIM_NOT_START]:"claim_not_start",[h.LOGISTICS_NOT_MATCH]:"logistics_not_match",[h.NO_COMMON_PAYMENT_CRITERIA]:"no_common_payment_criteria",[h.ALLOW_DISPLAY]:"allow_display",[h.PAYMENT_FROZEN]:"payment_frozen"},v={UNCLAIMED:"unclaimed",CLAIMED_VALID:"claimed_valid",CLAIMED_INVALID:"claimed_invalid"},f={GO_SHOPPING:"go_shopping",ADD_MORE:"add_more",ACTIVE_NOW:"active_now",USE_LATER:"use_later"},R=[h.CODE_EXPIRED,h.NO_QUOTA,h.NOT_STARTED,h.INVALID,h.WRONG_CODE,h.NOT_COMPLETE_TASK,h.ALREADY_USED,h.FROM_SELLER_OWN_SHOP,h.INVALID_COUNTRY,h.CLAIM_NOT_START],C=[h.INVALID,h.WRONG_CODE,h.CODE_EXPIRED,h.NO_QUOTA,h.NOT_STARTED,h.NOT_COMPLETE_TASK,h.ALREADY_USED,h.FROM_SELLER_OWN_SHOP,h.INVALID_COUNTRY],N=[h.NO_APPLICABLE,h.MIN_BUCKET_NOT_MET,h.LOGISTICS_NOT_MATCH,h.UA_NO_MATCH,h.PAYMENT_NOT_MATCH,h.ALLOW_DISPLAY],T={CLAIM_CONTROLLED_PRIVATE_VOUCHER:0,USAGE_CONTROLLED_PRIVATE_VOUCHER:1},g=Object.freeze({UNKNOWN:-1,OK:0,EXPIRED:1,FULLY_REDEEMED:2,VALID_NOT_START:3,CLAIM_NOT_START:4,USER_SCOPE_NOT_MET:5,ALREADY_USED:6,FULLY_CLAIMED:7,FROM_OWN_SHOP:8,NOT_FOUND:9,NON_CLAIMABLE:10}),L=(g.UNKNOWN,g.EXPIRED,g.FULLY_REDEEMED,g.VALID_NOT_START,g.CLAIM_NOT_START,g.USER_SCOPE_NOT_MET,g.ALREADY_USED,g.FULLY_CLAIMED,g.FROM_OWN_SHOP,g.NOT_FOUND,g.NON_CLAIMABLE,{DEFAULT:0,SHOPPING_MALL_OPV:1,PUBLISHER_OPV:2,COD_OPV:3,SKU_OPV:4}),S={ID:0,TH:50,SG:50,VN:50,TW:50,PH:50,MY:50,BR:50,MX:50,CO:50,CL:50,AR:50,FR:50,PL:50,ES:50,IN:50},I={ID:{FIRST_TIER:25,SECOND_TIER:75},TH:{FIRST_TIER:50,SECOND_TIER:75},SG:{FIRST_TIER:50,SECOND_TIER:75},VN:{FIRST_TIER:50,SECOND_TIER:75},TW:{FIRST_TIER:50,SECOND_TIER:75},PH:{FIRST_TIER:50,SECOND_TIER:75},MY:{FIRST_TIER:50,SECOND_TIER:75},BR:{FIRST_TIER:50,SECOND_TIER:75},MX:{FIRST_TIER:50,SECOND_TIER:75},CO:{FIRST_TIER:50,SECOND_TIER:75},CL:{FIRST_TIER:50,SECOND_TIER:75},AR:{FIRST_TIER:50,SECOND_TIER:75},FR:{FIRST_TIER:50,SECOND_TIER:75},PL:{FIRST_TIER:50,SECOND_TIER:75},ES:{FIRST_TIER:50,SECOND_TIER:75},IN:{FIRST_TIER:50,SECOND_TIER:75}},A=5,y={SIGNATURE_SOURCE_DEFAULT:0,SIGNATURE_SOURCE_ROYALTY_USER:1,SIGNATURE_SOURCE_VOUCHER_CORE:2,SIGNATURE_SOURCE_MICROSITE:3,SIGNATURE_SOURCE_GAME_LUCKY_DRAW:4,SIGNATURE_SOURCE_INCENTIVE_SYSTEM:5,SIGNATURE_SOURCE_NEW_USER_ZONE:6,SIGNATURE_SOURCE_SELLER_MEMBERSHIP:7,SIGNATURE_SOURCE_PDP_BFF:8,SIGNATURE_SOURCE_VOUCHER_BFF:9,SIGNATURE_SOURCE_MPI_BFF:11},b={VOUCHER_VIEW_DEFAULT:0,VOUCHER_VIEW_ID:1,VOUCHER_VIEW_V4_RECOMMENDED_VOUCHER:1e3,VOUCHER_VIEW_V2_VOUCHER_CARD:1e5},P={preferred:{SG:null,ID:"5d8f830f48797d0743e2df4f9d9e2798?width=125&height=70",PH:"28e70c63dc9c3b9f0e4ec771d3d97da4?width=290&height=70",TH:"f2bd60c489a0bc7a2afb1f2c58a3c197",TW:"02007b1ccd2534395b381846c68680f2?width=200&height=70",VN:"c21b153ed2524337f929ddcb03dca6f2",MY:null,BR:null,MX:null,CO:null,CL:null},mall:{SG:"5b8fb0c872a5435b89736fe2dfd45add",ID:"4844cfbea954bfcdb8d7232f946122ee?width=125&height=70",PH:"8bc2fddd261b63ea3f2db4f3ac004664?width=120&height=70",TH:"8bc2fddd261b63ea3f2db4f3ac004664?width=120&height=70",TW:"98f562af7803bf8bebc9742b4be3f3d8?width=110&height=70",VN:"8bc2fddd261b63ea3f2db4f3ac004664?width=120&height=70",MY:null,BR:null,MX:null,CO:null,CL:null},preferred_mall:{SG:null,ID:"cd95e71737d7e9d6d017b9acd22bbff2?width=300&height=70",PH:"c9dbb09b61597ab5d1613af71a59ba1f?width=300&height=70",TH:null,TW:"b2c822995c9d96d5938ea8492ea73210?width=240&height=70",VN:"460aa43128b1ecc6867ae6db8fe30a21",MY:null,BR:null,MX:null,CO:null,CL:null}},D={ID:"/m/PakaiVoucherGooglePlay",TH:"/m/HowtoRedeemGooglePlay",MY:"/m/HowtoRedeemGooglePlay",PH:"/m/HowtoRedeemGooglePlay",SG:"/m/HowtoRedeemGooglePlay"}[(0,a.Kd)()]||"",U={SCENE_MICRO_SITE:1,SCENE_GAME_LUCK_DRAW:2,SCENE_MY_VOUCHER:3,SCENE_MY_VOUCHER_V2:5},M={OLD_FLOW:0,DAYS:1,HOURS:2,MINUTES:3},H={VOUCHER_RECOMMEND_SORT_FLAG_OLD:0,VOUCHER_RECOMMEND_SORT_FLAG_DEFAULT:1,VOUCHER_RECOMMEND_SORT_FLAG_CART:2,VOUCHER_RECOMMEND_SORT_FLAG_START_TIME_DESC:3,VOUCHER_RECOMMEND_SORT_FLAG_ITEM_CARD:4,VOUCHER_RECOMMEND_SORT_FLAG_BEST_VALUE_FOR_ITEM:5,VOUCHER_RECOMMEND_SORT_FLAG_BEST_VALUE:6,VOUCHER_RECOMMEND_SORT_FLAG_CART_AUTO_APPLY_NEW_USER:7,VOUCHER_RECOMMEND_SORT_FLAG_VOUCHER_DRAWER:8},V={DEFAULT_PAGE:1,ORDER_PAID_PAGE:2,FEED:4,LIVE_STREAMING:8,CHAT:16,FOOD_STORE_PAGE:32},w={NOT_APPLICABLE:0,SHOP_WELCOME:1,SECOND_ORDER:2,THIRD_ORDER:3},F={SELLER_CENTER:2},k={NO_POPUP:0,SPP_POPUP:1,SPL_POPUP:2,SEABANK_POPUP:3},B={[h.ERROR]:"msg_voucher_server_error",[h.INVALID]:"msg_voucher_invalid",[h.WRONG_CODE]:"msg_voucher_wrong_code",[h.CODE_EXPIRED]:"msg_voucher_code_expired",[h.NO_QUOTA]:"msg_voucher_no_quota",[h.NO_APPLICABLE]:"msg_voucher_no_applicable",[h.ALREADY_USED]:"msg_voucher_already_used",[h.MIN_BUCKET_NOT_MET]:"msg_voucher_min_bucket_not_met",[h.NOT_STARTED]:"msg_voucher_not_started",[h.NOT_COMPLETE_TASK]:"msg_voucher_not_complete_task",[h.UA_NO_MATCH]:"msg_voucher_ua_no_match",[h.FROM_SELLER_OWN_SHOP]:"msg_voucher_from_seller_own_shop",[h.PAYMENT_NOT_MATCH]:"msg_voucher_payment_not_match",[h.CLAIM_NOT_START]:"msg_voucher_claim_not_start",[h.LOGISTICS_NOT_MATCH]:"msg_voucher_logistics_not_match",[h.ALLOW_DISPLAY]:"voucher_card_promotion_error_upcoming_voucher"},x=(m.CLAIM_ERROR_UNKNOWN,m.CLAIM_ERROR_OK,m.CLAIM_ERROR_EXIST,m.CLAIM_ERROR_INVALID,m.CLAIM_ERROR_EXPIRED,m.CLAIM_ERROR_NO_QUOTA,m.CLAIM_ERROR_USER_SCOPE,m.CLAIM_ERROR_NOT_START,m.CLAIM_ERROR_FROM_SELF_SHOP,m.CLAIM_ERROR_NOT_FOUND,m.CLAIM_ERROR_UNKNOWN,m.CLAIM_ERROR_OK,m.CLAIM_ERROR_EXIST,m.CLAIM_ERROR_INVALID,m.CLAIM_ERROR_EXPIRED,m.CLAIM_ERROR_NO_QUOTA,m.CLAIM_ERROR_USER_SCOPE,m.CLAIM_ERROR_NOT_START,m.CLAIM_ERROR_FROM_SELF_SHOP,m.CLAIM_ERROR_NOT_FOUND,h.INVALID,h.WRONG_CODE,h.CODE_EXPIRED,h.NO_QUOTA,h.NO_APPLICABLE,h.ALREADY_USED,h.MIN_BUCKET_NOT_MET,h.NOT_STARTED,h.NOT_COMPLETE_TASK,h.UA_NO_MATCH,h.FROM_SELLER_OWN_SHOP,h.PAYMENT_NOT_MATCH,h.CLAIM_NOT_START,h.LOGISTICS_NOT_MATCH,"#f69113"),W={VOUCHER_WALLET_HOME:"4",VOUCHER_WALLET_HISTORY:"4VoucherHistory",Microsite:"13Voucher",WelcomePackage:"31"},G={SG:"https://help.shopee.sg/portal/article/88502",MY:"https://help.shopee.com.my/portal/article/88289",TH:"https://help.shopee.co.th/portal/article/86417",VN:"https://help.shopee.vn/portal/article/88025",PH:"https://help.shopee.ph/portal/article/83229-[Promotions]-Why-are-promotions-not-applicable-for-products-from-certain-categories?",ID:"https://help.shopee.co.id/portal/article/81669",MX:"https://help.shopee.com.mx/portal/article/88412?source=4",PL:"https://help.shopee.pl/portal/article/87644",ES:"https://help.shopee.es/portal/article/78224-%C2%BFPor-qu%C3%A9-las-promociones-no-son-aplicables-a-los-productos-de-ciertas-categor%C3%ADas?previousPage=secondary%20category",TW:"",BR:"https://help.shopee.com.br/portal/article/88986?source=4",CO:"",CL:"",AR:"",FR:"",IN:""},Y={LIVESTREAM:1,SHORT_VIDEO:2},K={VOUCHER_PAGES_WALLET:"voucher-pages/wallet",VOUCHER_PAGES_TNC:"voucher-pages/tnc",MICROSITE:"microsite",PRODUCT_PAGE:"product-page",SHOP:"shop",SEARCH:"search",CART:"cart",FLASH_SALE_PAGES:"flash-sale-pages",WELCOME_PAGE:"welcome-package",LOYALTY:"loyalty"},z={EXCEED_DAILY_QUOTA:1,EXCEED_WEEKLY_QUOTA:2,EXCEED_MONTHLY_QUOTA:3},Q={ALL:1,WEB:2},Z={APPLICABLE:0,NOT_PASS_MIN_SPEND:3,NOT_APPLICABLE_LOGISTICS:4,NO_APPLICABLE_RULES:5,PAYMENT_NOT_MATCH:8,EXCEED_DAILY_QUOTA:9,EXCEED_WEEKLY_QUOTA:10,INVALID_VOUCHER:10,WP_NO_NEED_FSV:11,RP100_WITH_FSV:12,EXCEED_MONTHLY_QUOTA:13},X=274,j="new_ui",$="ruleset",q="latam_voucher_ui_pc",J="FSV_VLP_VOUCHER_TOGGLE",ee="PHASE2_FSV_VLP_VOUCHER_TOGGLE_WEB",te="control",re="treatment1",ae="VOUCHER_LATEST_DISTRIBUTION_TIME"},34821:36388:(e,t,r)=>{"use strict";r.d(t,{F8:()=>c,u$:()=>l,Ek:()=>_,i:()=>s,iT:()=>i,zd:()=>u,G2:()=>E});var a=r(82884),o=r(34821);onst c=({promotionid:e,voucher_code:t,signature:r="",need_basic_info:n=!1,need_user_voucher_status:c=!1,source:l="0",addition:_=[]})=>async s=>{s({type:o.u7.REQUESTED,promotionid:e,voucher_code:t,signature:r||"",need_basic_info:n,need_user_voucher_status:c,addition:_});const i=await a.F8(e,t,r||"",{need_basic_info:n,need_user_voucher_status:c,source:l,addition:_}),{response:u}=i;let E=i.error,d=i.error_msg;return"string"==typeof i.error&&"number"==typeof i.status&&(d=i.error,E=i.status),u&&!u.error&&u.data?s({type:o.u7.SUCCESS,data:u.data,promotionid:e,voucher_code:t,signature:r,need_basic_info:n,need_user_voucher_status:c,addition:_}):s({type:o.u7.FAILED,error:E,error_msg:d,promotionid:e,voucher_code:t,signature:r,need_basic_info:n,need_user_voucher_status:c,addition:_}),i},l=({orders:e,group_buy_info:t,slash_price_info:r,spm_channel_id:c,legacy_spm_channel_id:l,check_voucher_payment_criteria:_,card_bin_number:s,shopId:i,isCheckout:u,selected_payment_channel_data:E,sorting_flag:d,priority_promotion_ids:m,has_redeem_coins:h,platform_vouchers:p,move_up_addon_voucher:O})=>async v=>{v({type:o.rQ.REQUESTED,orders:e,groupBuyInfo:t,slashPriceInfo:r,spmChannelId:c,legacySpmChannelId:l,checkVoucherPaymentCriteria:_,cardBinNumber:s,shopId:i,isCheckout:u,selectedPaymentChannelData:E,sorting_flag:d,priority_promotion_ids:m});const f=await a.u$(n({orders:e,shopid:i,group_buy_info:t,slash_price_info:r,spm_channel_id:c,legacy_spm_channel_id:l,check_voucher_payment_criteria:_,card_bin_number:s},d?{sorting_flag:d}:{},{priority_promotion_ids:m||[]},E?{selected_payment_channel_data:E}:{},{has_redeem_coins:h,platform_vouchers:p,move_up_addon_voucher:O})),{response:R}=f;return R&&!R.error&&R.data?v({type:o.rQ.SUCCESS,shopId:i,isCheckout:u,data:R.data}):v({type:o.rQ.FAILED,shopId:i,isCheckout:u,error:R&&R.error,error_msg:R&&R.error_msg}),{response:R}};function _({promotionid:e,voucher_code:t,shopid:r}){return async c=>{c({type:o.cI.REQUESTED,promotionid:e,voucher_code:t,shopid:r});const l=await a.Ek({promotionid:e,voucher_code:t,shopid:r}),{response:_}=l;return!_||_.error?c({type:o.cI.FAILED,error:_&&_.error,error_msg:_&&_.error_msg,promotionid:e,voucher_code:t,shopid:r}):c(n({type:o.cI.SUCCESS},_.data,{promotionid:e,voucher_code:t,shopid:r})),l}}function s({voucher_code:e,shopid:t}){return async r=>{r({type:o.XB.REQUESTED,voucher_code:e,shopid:t});const c=await a.i({voucher_code:e,shopid:t}),{response:l}=c;return!l||l.error||l.data&&(l.data.invalid_message_code||l.data.error_config)?r(n({type:o.XB.FAILED,error:l&&l.error,error_msg:l&&l.error_msg},l?l.data:{},{voucher_code:e,shopid:t})):r(n({type:o.XB.SUCCESS},l.data,{voucher_code:e,shopid:t})),c}}const i=e=>({type:o.KW,voucher:e}),u=e=>({type:o.Ec,voucher:e}),E=,80597:(e,t,r)=>{"use strict";r.d(t,{av:()=>o,lT:()=>l,WS:()=>_,qV:()=>s,Q5:()=>i,CV:()=>u,sl:()=>E}),r(471);var a=r(93319);function o(e,t,r,...a){if(t>e.length){const r=t-e.length;e.splice(e.length,r,...new Array(r).fill(null))}return e.splice(t,r,...a),e}let n=new Date;n.setDate(n.getDate()+4),n=new Date(n.toDateString()).getTime()/1e3;let c=new Date;function l(e){return!!e.end_time&&e.end_time<Date.now()/1e3}c.setDate(c.getDate()-3),c=new Date(c.toDateString()).getTime()/1e3;const _=e=>{const{voucher_market_type:t,shop_id:r}=e;return t===a.Tc.DEFAULT_MARKET_PLACE?0===r?a.DF.SHOPEE_VOUCHER:a.DF.SHOP_VOUCHER:t===a.Tc.OFFLINE_PAYMENT?a.DF.OFFLINE_VOUCHER:t===a.Tc.DIGITAL_PURCHASE?a.DF.DP_VOUCHER:0},s=(e,t)=>{const r=e.filter((),a=e.filter(();return 0===r.length?[t,...a].filter(Boolean):[...r,...a].filter(Boolean)},i=function u(e){return e)?a.h4.OFFLINE_PAYMENT_VOUCHER:e)?a.h4.DP_VOUCHER:function(e){return 3===e.third_party_type||!1}(e)?a.h4.NOWFOOD_VOUCHER:function(e){return Boolean(e.shop_id||!1)}(e)?a.h4.SELLER_VOUCHER:function(e){return e.voucher_external_market_type===a.sd.PARTNER}(e)?a.h4.PARTNER_VOUCHER:a.h4.SHOPEE_VOUCHER}function E(e){return!e||[a.fr.OK,a.fr.VALID_NOT_START,a.fr.CLAIM_NOT_START,a.fr.FULLY_CLAIMED,a.fr.NON_CLAIMABLE].includes(e)}},84481:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(63804),o=r(86704),n=r(2650);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c.apply(this,arguments)}const l=function(e){const t=a.forwardRef(((t,r)=>a.createElement(n.Z,{onTrack:o.Tracking.onTrack},a.createElement(e,c({},t,{ref:r}))))),r=function(e){return e.displayName||e.name||"Component"}(t);return t.displayName=`WithVoucherWrap(${r})`,t}},90932:646:(e,t,r)=>{var a={"./ar.png":74949,"./br.png":4852,"./cl.png":79793,"./co.png":82795,"./es.png":6098,"./fr.png":86738,"./id.png":4018,"./in.png":49071,"./mx.png":80820,"./my.png":264,"./ph.png":50239,"./pl.png":15526,"./sg.png":6071,"./th.png":6688,"./tw.png":6642,"./vn.png":11311};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id=646},41584:17807:(e,t,r)=>{var a={"./ar.png":64387,"./br.png":72524,"./cl.png":53785,"./co.png":74117,"./es.png":99946,"./fr.png":80353,"./id.png":43855,"./in.png":29817,"./mx.png":47970,"./my.png":41737,"./ph.png":65198,"./pl.png":15328,"./sg.png":98605,"./th.png":81917,"./tw.png":55389,"./vn.png":60885};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id=17807},16130:20780:(e,t,r)=>{var a={"./popup_apponly@2x.png":58490,"./popup_mall_apponly@2x.png":64669};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id=20780},82102:5634:(e,t,r)=>{"use strict";e.exports=r.microfeI(4)},66517:(e,t,r)=>{"use strict";e.exports=r.microfeI(2)},96234:(e,t,r)=>{"use strict";e.exports=r.microfeI(1)},471:(e,t,r)=>{"use strict";e.exports=r.microfeI(0)},37356:]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-voucher/_/867.9287b8e023b861898416.js.map