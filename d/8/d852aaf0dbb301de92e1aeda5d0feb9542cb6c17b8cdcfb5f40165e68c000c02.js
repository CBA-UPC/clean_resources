!function(){var t,e,n,r,i={8878:4780:4814:5257:9512:615:4705:4122:4554:2272:5926:1207:5480:6279:8264:7452:9951:7359:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=n(633)}catch(t){}var i=o=Object.create||),s={},u=s.lib={},a=u.Base={extend:create:init:function(){},mixIn:clone:,c=u.WordArray=a.extend({init:toString:concat:clamp:clone:random:),l=s.enc={},f=l.Hex={stringify:parse:,p=l.Latin1={stringify:parse:,h=l.Utf8={stringify:parse:,d=u.BufferedBlockAlgorithm=a.extend({reset:_append:_process:clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),v=(u.Hasher=d.extend({cfg:a.extend(),init:reset:update:finalize:blockSize:16,_createHelper:_createHmacHelper:),s.algo={});return s}(Math),r)},8139:8307:6844:6423:9174:1637:1285:5870:5228:6076:325:4791:94:4328:function(t,e,n){"use strict";n.d(e,{G:function(){return r}});var r="us-east-1.hightouch-events.com/v1"},3710:function(t,e,n){"use strict";n.d(e,{_:function(){return d}});var r=n(5163),i=n(1494),o=n(417),s=n(4759),u=n(4278),a=n(6175),c=n(4328);ar f,p=function(){eturn t.prototype.increment=t.prototype.flush=t.prototype.send=function(){return(0,r.mG)(this,void 0,Promise,(function(){var t,e,n;return(0,r.Jh)(this,(function(r){return t={series:this.queue},this.queue=[],e={Accept:"application/json","Content-Type":"application/json"},n="https://".concat(this.host,"/m"),[2,(0,s.h)(n,{headers:e,body:JSON.stringify(t),method:"POST"})]}))}))},t}(),h=o.s),d=function(t){eturn(0,r.ZT)(e,t),e.system=e}(i._)},204:6863:4278:4759:3744:6249:7070:5944:8044:7566:function(t,e,n){"use strict";n.d(e,{Kg:function(){return a},UH:function(){return s},Vl:function(){return u}});var r,i=n(6249),o=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,s=u=a=,3061:9950:6175:6338:5163:888:1494:7127:3098:6096:417:7595:633:function(){},7831:380:,o={};.m=i,s.n=e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:s.t=s.d=s.f={},s.e=s.u=s.o=n={},r="@ht-sdks/events-sdk-js:",s.l=s.r=s.p="",);var u={};!function(){"use strict";s.r(u);var t=s(5163),e=s(7566),n=s(6175);ar i=s(7595);r c=ar f=s(94),p=s(3710),h=s(888);ar v=s(7127),y=s(7831),g=s(380),m=s(4791),b=s.n(m);var _=w=Object.keys(_("","","","","",""));var x=S=k=P=function(){function e(t){this.user=t}return e.prototype.track=e.prototype.page=e.prototype.screen=e.prototype.identify=e.prototype.group=e.prototype.alias=e.prototype.baseEvent=e.prototype.context=e.prototype.normalize=function(e,n){var r,i,o;(null===(r=e.options)||void 0===r?void 0:r.anonymousId)&&this.user.anonymousId(e.options.anonymousId);var s=Object.keys(null!==(i=e.integrations)&&void 0!==i?i:{}).reduce((,{}),u=(0,t.pi)((0,t.pi)({},s),null===(o=e.options)||void 0===o?void 0:o.integrations),a=this.context(e),c=a[0],l=a[1],f=(e.options,(0,t._T)(e,["options"])),p=(0,t.pi)((0,t.pi)((0,t.pi)((0,t.pi)({timestamp:new Date},f),{context:c,integrations:u}),l),{messageId:b().hash(JSON.stringify(e)+(0,y.v4)())});return k(p,n),p},e}(),I=s(3061);var O=s(3098),j=s(1494),A=s(6096),M=v.Q),E=M);ar D={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},B=F=),T=);r G={read:write:,{path:"/"}),N=G;ar R=),H=);r U=s(7452),W=s.n(U),V=s(8307),Z=s.n(V),Q=function(t){return(new TextDecoder).decode(function(t){var e,n=(null!==(e=null===window||void 0===window?void 0:window.atob(t))&&void 0!==e?e:"").split("").map(();return new Uint8Array(n)}(t))};function Y(t){try{return t?JSON.parse(t):null}catch(e){return t||null}}var $="HtEvEncrypt:";var X="RudderEncrypt:",tt="RS_ENC_v3_";var et={persist:!0,cookie:{key:"htjs_user_id",oldKey:"ajs_user"},localStorage:{key:"htjs_user_traits"}},nt=function(){function e(e,n){void 0===e&&(e=et);var r,i,o,s,u=this;this.options={},this.id=this.anonymousId=function(t){var e,n,r,i;if(u.options.disable)return null;if(void 0===t){var o=u.identityStore.getAndSync(u.anonKey);if(o||(o=function(t){try{if(!t||"string"!=typeof t||""===t.trim())return null;if(t.substring(0,$.length)===$)return Y(W().decrypt(t.substring($.length),"HTEV").toString(Z()))}catch(t){console.error(t)}return t}(null!==(e=u.identityStore.getAndSync("htev_anonymous_id"))&&void 0!==e?e:""))&&u.identityStore.set(u.anonKey,o),o||(o=u.identityStore.getAndSync("ajs_anonymous_id"))&&u.identityStore.set(u.anonKey,o),o||(o=function(t){try{if(!t||"string"!=typeof t||""===t.trim())return null;if(t.substring(0,X.length)===X)return Y(W().decrypt(t.substring(X.length),"Rudder").toString(Z()));if(t.substring(0,tt.length)===tt){var e=Y(Q(t.substring(tt.length)));return e&&"string"==typeof e&&""!==e.trim()?e:null}}catch(t){console.error(t)}return t}(null!==(n=u.identityStore.getAndSync("rl_anonymous_id"))&&void 0!==n?n:""))&&u.identityStore.set(u.anonKey,o),o||(o=null!==(i=null===(r=u.legacySIO())||void 0===r?void 0:r[0])&&void 0!==i?i:null),o)return o}return null===t?(u.identityStore.set(u.anonKey,null),u.identityStore.getAndSync(u.anonKey)):(u.identityStore.set(u.anonKey,null!=t?t:(0,y.v4)()),u.identityStore.getAndSync(u.anonKey))},this.traits=this.options=(0,t.pi)((0,t.pi)({},et),e),this.cookieOptions=n,this.idKey=null!==(i=null===(r=e.cookie)||void 0===r?void 0:r.key)&&void 0!==i?i:et.cookie.key,this.traitsKey=null!==(s=null===(o=e.localStorage)||void 0===o?void 0:o.key)&&void 0!==s?s:et.localStorage.key,this.anonKey="htjs_anonymous_id",this.identityStore=this.createStorage(this.options,n),this.legacyUserStore=this.createStorage(this.options,n,(),this.traitsStore=this.createStorage(this.options,n,(function(t){return t!==D.Cookie}));var a=this.legacyUserStore.get(et.cookie.oldKey);a&&"object"==typeof a&&(a.id&&this.id(a.id),a.traits&&this.traits(a.traits)),C(this)}return e.prototype.legacySIO=e.prototype.identify=e.prototype.logout=e.prototype.reset=e.prototype.load=e.prototype.save=function(){return!0},e.prototype.createStorage=e.defaults=et,e}(),rt={persist:!0,cookie:{key:"htjs_group_id"},localStorage:{key:"htjs_group_properties"}},it=nt),ot=s(4278),st=s(3744),ut=s(6249),at=ct=lt=at.bind(void 0,"on"),ft=at.bind(void 0,"setAnonymousId"),pt=ht=dt=vt=);ar gt=),mt="This is being deprecated and will be not be available in future releases of Analytics JS",bt=(0,st.R)(),_t=null==bt?void 0:bt.analytics;ar xt,St=v.Q),kt=s(5944),Pt=s(6863);r jt=At=new jt,Mt=s(7070),Et=s(6338),Ct=function(){eturn e.prototype.addMiddleware=e.prototype.transform=e.prototype._createMethod=function(e){var n=this;return function(r){return(0,t.mG)(n,void 0,Promise,()}},e.prototype.isLoaded=e.prototype.ready=e.prototype.load=e.prototype.unload=e}();r Ft=s(9950),Tt=s(4759);unction Jt(e,n,r){var i,o;void 0===r&&(r="https");var s,u,a,c=[],l=!1,f=null!==(i=null==n?void 0:n.size)&&void 0!==i?i:10,p=null!==(o=null==n?void 0:n.timeout)&&void 0!==o?o:5e3;function h(n){var i;if(0!==n.length){var o=null===(i=n[0])||void 0===i?void 0:i.writeKey,s=n.map(();return(0,Tt.h)("".concat(r,"://").concat(e,"/v1/batch"),{keepalive:l,headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({writeKey:o,batch:s,sentAt:(new Date).toISOString()})})}}eturn u=a=!1,window.addEventListener("pagehide",(),document.addEventListener("visibilitychange",(),{dispatch:}ar Nt=s(8044);r Ht=s(4328);function Lt(e,n,r){var i,o,s;window.addEventListener("pagehide",();var u,a=null!==(i=null==n?void 0:n.apiKey)&&void 0!==i?i:"",c=e.options.disableClientPersistence?new O.Z(e.queue.queue.maxAttempts,[]):new I.$(e.queue.queue.maxAttempts,"".concat(a,":dest-Hightouch.io")),l=new Set,p=!1,h=null!==(o=null==n?void 0:n.apiHost)&&void 0!==o?o:Ht.G,d=null!==(s=null==n?void 0:n.protocol)&&void 0!==s?s:"https",v="".concat(d,"://").concat(h),y=null==n?void 0:n.deliveryStrategy,g="batching"===(null==y?void 0:y.strategy)?Jt(h,y.config,d):(u=null==y?void 0:y.config,{dispatch:function(t,e){return(0,Tt.h)(t,{keepalive:null==u?void 0:u.keepalive,headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify(e)})}});function m(i){return(0,t.mG)(this,void 0,Promise,(function(){var o,s;return(0,t.Jh)(this,(function(t){return(0,f.s)()?(c.push(i),Rt(p,c,b,Rt),[2,i]):(l.add(i),o=i.event.type,s=(0,Ft.D)(i.event).json(),"track"===i.event.type&&delete s.traits,"alias"===i.event.type&&(s=e,s)),[2,g.dispatch("".concat(v,"/v1/").concat(o),Gt(e,s,n,r)).then(().catch(().finally(()])}))}))}var b={name:"Hightouch.io",type:"after",version:"0.1.0",isLoaded:load:track:m,identify:m,page:m,alias:m,group:m,screen:m};return c.todo&&Rt(p,c,b,Rt),b}var Kt=Error),Ut="is not a string",Wt="is not an object",Vt="is nil";nction Yt(t){if(!(0,i.HD)(t.type))throw new Kt(".type",Ut)}r te,ee,ne={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:Xt,identify:Xt,page:Xt,alias:Xt,group:Xt,screen:Xt},re=null!==(te=(ee=(0,st.R)()).__HIGHTOUCH_INSPECTOR__)&&void 0!==te?te:ee.__HIGHTOUCH_INSPECTOR__={};r se={apiKey:"WRITE_KEY",apiHost:"us-east-1.hightouch-events.com",protocol:"https",unbundledIntegrations:[],addBundledMetadata:!1,maybeBundledConfigIds:{},deliveryStrategy:{strategy:"batching",config:{timeout:1e3,size:10}}},ue={integrations:{},plan:{track:{__default:{enabled:!0,integrations:{}}},identify:{__default:{enabled:!0}},group:{__default:{enabled:!0}}},enabledMiddleware:{},metrics:{sampleRate:0},legacyVideoPluginsEnabled:!1,remotePlugins:[]};function ae(n,r,i){var o,s,u,a,c,l;return void 0===r&&(r={}),(0,t.mG)(this,void 0,Promise,(function(){var f,p,h,d,v,y,g,m,b,_;return(0,t.Jh)(this,(function(w){switch(w.label){case 0:return r.globalAnalyticsKey&&(0,ut.jV)(r.globalAnalyticsKey),n.cdnURL&&(0,e.UH)(n.cdnURL),n.cdnSettings?f=n.cdnSettings:(ue.integrations["Hightouch.io"]=(0,t.pi)((0,t.pi)((0,t.pi)((0,t.pi)((0,t.pi)({},se),n.writeKey?{apiKey:n.writeKey}:{}),r.apiHost?{apiHost:r.apiHost}:{}),r.protocol?{protocol:r.protocol}:{}),0==r.batching?{deliveryStrategy:{strategy:"standard"}}:{}),f=ue),r.updateCDNSettings&&(f=r.updateCDNSettings(f)),p=null===(s=null===(o=f.integrations["Hightouch.io"])||void 0===o?void 0:o.retryQueue)||void 0===s||s,h=(0,t.pi)({retryQueue:p},r),d=new St(n,h)),v=null!==(u=n.plugins)&&void 0!==u?u:[],y=null!==(a=n.classicIntegrations)&&void 0!==a?a:[],d,i),[4,oe(n.writeKey,f,d,h,r,v,y)];case 1:return g=w.sent(),m=null!==(c=window.location.search)&&void 0!==c?c:"",b=null!==(l=window.location.hash)&&void 0!==l?l:"",(_=m.length?m:b.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,d.queryString(_).catch(console.error)]:[3,3];case 2:w.sent(),w.label=3;case 3:return d.initialized=!0,d.emit("initialize",n,r),r.initialPageview&&d.page().catch(console.error),[4,ie(d,i)];case 4:return w.sent(),[2,[d,g]]}}))}))}var ce=gt);try{window.analyticsWriteKey="__WRITE_KEY__"}catch(t){}unction fe(){var e,n;return(0,t.mG)(this,void 0,Promise,(function(){var r,i,o;return(0,t.Jh)(this,(function(t){switch(t.label){case 0:return r=function(){var t;if(le())return le();var e=(0,ut.wI)();if(null==e?void 0:e._writeKey)return e._writeKey;for(var n=/http.*\/analytics\.js\/v1\/([^/]*)(\/platform)?\/analytics.*/,r=void 0,i=0,o=Array.prototype.slice.call(document.querySelectorAll("script"));i<o.length;i++){var s=null!==(t=o[i].getAttribute("src"))&&void 0!==t?t:"";if((u=n.exec(s))&&u[1]){r=u[1];break}}if(!r&&document.currentScript){var u;s=document.currentScript.src,(u=n.exec(s))&&u[1]&&(r=u[1])}return r}(),i=null!==(n=null===(e=(0,ut.wI)())||void 0===e?void 0:e._loadOptions)&&void 0!==n?n:{},r?(o=ut.ql,[4,ce.standalone(r,i)]):(console.error("Failed to load Write Key. Make sure to use the latest version of the hightouch snippet, which can be found in your source settings."),[2]);case 1:return o.apply(void 0,[t.sent()]),[2]}}))}))}var pe=(0,e.Vl)();(0,e.UH)(pe),s.p=pe?pe+"/".concat("browser/candidate","/").concat("v1.0.0","/"):"https://cdn.hightouch-events.com/browser/candidate/v1.0.0/",(0,n.X)("web");var he=!1;function de(e){return(0,t.mG)(this,void 0,void 0,(function(){var n;return(0,t.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e()];case 1:return[2,r.sent()];case 2:return n=r.sent(),i=n,console.error("[analytics.js]","Failed to load Analytics.js",i),(0,t.ev)(["type:initialization"],i instanceof Error?["message:".concat(null==i?void 0:i.message),"name:".concat(null==i?void 0:i.name)]:[],!0),[3,3];case 3:return[2]}var i}))}))}if(document.addEventListener("securitypolicyviolation",(function(t){!he&&t)&&(he=!0,console.warn("Your CSP policy is missing permissions required for HtEvents"))})),)){var ve=document.createElement("script");ve.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.7.0/polyfill.min.js"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",():document.body.appendChild(ve),ve.onload=else de(fe)}(),window.AnalyticsNext=u}();
//# sourceMappingURL=events.min.js.map