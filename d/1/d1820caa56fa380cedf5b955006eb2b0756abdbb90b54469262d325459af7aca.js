/**
* Copyright (c) 2017-present, Facebook, Inc. All rights reserved.
*
* You are hereby granted a non-exclusive, worldwide, royalty-free license to use,
* copy, modify, and distribute this software in source code or binary form for use
* in connection with the web services and APIs provided by Facebook.
*
* As with any software that integrates with the Facebook platform, your use of
* this software is subject to the Facebook Platform Policy
* [http://developers.facebook.com/policy/]. This copyright notice shall be
* included in all copies or substantial portions of the software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;var g=typeof Symbol==="function"&&typeof (typeof Symbol==="function"?Symbol.iterator:"@@iterator")==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==(typeof Symbol==="function"?Symbol.prototype:"@@prototype")?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),i=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"](),a;!(d=(a=g.next()).done);d=!0){c.push(a.value);if(b&&c.length===b)break}}catch(a){e=!0,f=a}finally{try{!d&&g["return"]&&g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;else if((typeof Symbol==="function"?Symbol.iterator:"@@iterator")in Object(b))return a(b,c);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:a}function k(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("signalsFBEventsCollapseUserData",function(){
return function(f,g,h,i){var j={exports:{}};j.exports;(function(){"use strict";var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};function b(b,c){if(b==null)return null;var d=Object.keys(b).some(function(a){return Object.prototype.hasOwnProperty.call(c,a)&&b[a]!==c[a]});return d?null:a({},b,c)}j.exports=b})();return j.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsExtractEventPayload",function(){
return function(g,h,i,j){var k={exports:{}};k.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsEvents"),b=a.getIWLParameters,c=f.getFbeventsModules("signalsFBEventsExtractFromInputs"),d=f.getFbeventsModules("signalsFBEventsExtractPageFeatures");function e(a){var e=a.button,f=a.buttonFeatures,g=a.buttonText,i=a.form,j=a.pixel;a=a.shouldExtractUserData;var k=a&&i==null;i=c({button:e,containerElement:k?h:i,shouldExtractUserData:a});a=d();var l=i.formFieldFeatures;i=i.userData;f={buttonFeatures:f,buttonText:g,formFeatures:k?[]:l,pageFeatures:a,parameters:b.trigger({pixel:j,target:e})[0]};return[f,i]}k.exports=e})();return k.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsExtractFormFieldFeatures",function(){
return function(g,h,i,j){var k={exports:{}};k.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsPixelPIIUtils"),b=a.extractPIIFields;function c(a,c){var d={id:a.id,name:a.name,tag:a.tagName.toLowerCase()},e={};(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)&&a.placeholder!==""&&(d.placeholder=a.placeholder);if(d.tag==="input"){d.inputType=a.getAttribute("type");if(c&&(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)){c=b(d,a);c!=null&&(e=c)}}a instanceof HTMLButtonElement===!1&&a.value===""&&(d.valueMeaning="empty");return[d,e]}k.exports=c})();return k.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsExtractFromInputs",function(){
return function(g,h,j,k){var l={exports:{}};l.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsFeatureCounter"),b=f.getFbeventsModules("signalsFBEventsCollapseUserData"),c=f.getFbeventsModules("signalsFBEventsExtractFormFieldFeatures"),d=15,e="input,textarea,select,button";function g(f){var g=f.button,h=f.containerElement;f=f.shouldExtractUserData;var j=new a(),k=[],l={};if(h==null)return{formFieldFeatures:k,userData:l};h=h.querySelectorAll(e);for(var m=0;m<h.length;m++){var n=h[m];if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement||n instanceof HTMLButtonElement){var o=""+n.tagName+(n.type===void 0?"":n.type);o=j.incrementAndGet(o);if(o>d||n===g)continue;o=c(n,f&&l!=null);n=i(o,2);o=n[0];n=n[1];o!=null&&k.push(o);l=b(l,n)}}return{formFieldFeatures:k,userData:l}}l.exports=g})();return l.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsExtractPageFeatures",function(){
return function(g,h,i,j){var k={exports:{}};k.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsShared"),b=a.unicodeSafeTruncate,c=500;function d(){var a=h.querySelector("title");a=b(a&&a.text,c);return{title:a}}k.exports=d})();return k.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEventsFeatureCounter",function(){
return function(f,g,i,j){var k={exports:{}};k.exports;(function(){"use strict";var a=function(){function a(){l(this,a),this._features={}}h(a,[{key:"incrementAndGet",value:function(a){this._features[a]==null&&(this._features[a]=0);this._features[a]++;return this._features[a]}}]);return a}();k.exports=a})();return k.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsMakeSafeString",function(){
return function(g,h,i,j){var k={exports:{}};k.exports;(function(){"use strict";var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=f.getFbeventsModules("SignalsFBEventsUtils"),c=b.each,d=/[^\s\"]/,e=/[^\s:+\"]/;function g(b,c,f){if(f==null)return d.test(c)?c==="@"?null:{start:b,userOrDomain:"user"}:null;if(c==="@")return f.userOrDomain==="domain"?null:a({},f,{userOrDomain:"domain"});if(c===".")return f.userOrDomain==="domain"&&f.lastDotIndex===b-1?null:a({},f,{lastDotIndex:b});return f.userOrDomain==="domain"&&e.test(c)===!1||f.userOrDomain==="user"&&d.test(c)===!1?f.lastDotIndex===b-1?null:a({},f,{end:b-1}):f}function h(a,b){return a.userOrDomain==="domain"&&a.lastDotIndex!=null&&a.lastDotIndex!==b-1&&a.start!=null&&a.end!=null&&a.end!==a.lastDotIndex}function i(a){var b=null,d=a;a=[];for(var e=0;e<d.length;e++)b=g(e,d[e],b),b!=null&&(h(b,d.length)?a.push(b):e===d.length-1&&(b.end=e,h(b,d.length)&&a.push(b)),b.end!=null&&(b=null));c(a.reverse(),function(a){var b=a.start;a=a.end;if(a==null)return;d=d.slice(0,b)+"@"+d.slice(a+1)});return d}var j=/[\d]+(\.[\d]+)?/g;function l(a){a=a;while(/\d\.\d/.test(a))a=a.replace(j,"0");a=a.replace(j,"0");return a}function m(a){return{safe:l(i(a))}}k.exports=m})();return k.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEventsThrottler",function(){
return function(f,g,i,j){var k={exports:{}};k.exports;(function(){"use strict";var a=1e3,b=function(){function b(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a;l(this,b);this._lastArgs=null;this._lastTime=0;this._rateMS=c}h(b,[{key:"_passesThrottleImpl",value:function(){var a=this._lastArgs;if(a==null)return!0;var b=Date.now(),c=b-this._lastTime;if(c>=this._rateMS)return!0;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];if(a.length!==e.length)return!0;for(var g=0;g<e.length;g++)if(e[g]!==a[g])return!0;return!1}},{key:"passesThrottle",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=this._passesThrottleImpl.apply(this,b);this._lastTime=Date.now();this._lastArgs=b;return d}}]);return b}();k.exports=b})();return k.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.inferredevents",function(){
return function(g,h,c,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsConfigStore"),b=f.getFbeventsModules("SignalsFBEventsEvents"),c=b.fired,d=b.piiAutomatched,m=b.piiConflicting,n=b.extractPii;b=f.getFbeventsModules("SignalsFBEventsShared");var o=b.signalsConvertNodeToHTMLElement,p=b.signalsExtractForm,q=b.signalsIsIWLElement,r=b.signalsExtractButtonFeatures,s=b.signalsGetTruncatedButtonText,t=b.signalsGetWrappingButton;b=f.getFbeventsModules("SignalsFBEventsPlugin");var u=f.getFbeventsModules("SignalsFBEventsThrottler"),v=f.getFbeventsModules("SignalsFBEventsUtils"),w=f.getFbeventsModules("signalsFBEventsExtractEventPayload"),x=f.getFbeventsModules("signalsFBEventsMakeSafe"),y=f.getFbeventsModules("signalsFBEventsMakeSafeString"),z=v.each,A=v.keys;v.some;var B=f.getFbeventsModules("signalsFBEventsExtractFromInputs"),C=new u(),D=100;function E(a,b){return b!=null&&b.buttonSelector==="extended"}function F(b,c,e,f){b=f!=null?f:a.get(c.id,"automaticMatching");if(A(e).length>0&&b!=null){f=b.selectedMatchKeys;for(b in e)f.indexOf(b)>=0&&(c.userDataFormFields[b]=e[b]);d.trigger(c)}}function G(b){return function(c){if(b.disableAutoConfig)return;var d=c.target instanceof Node?o(c.target):null;if(d!=null){if(q(d))return;if(!C.passesThrottle(d))return;c=b.getOptedInPixels("InferredEvents");z(c,function(c){var e=a.get(c.id,"inferredEvents"),f=!1;e!=null&&e.disableRestrictedData!=null&&(f=e.disableRestrictedData);e=E(c.id,e);e=t(d,e);if(e==null)return;var g=b.optIns.isOptedIn(c.id,"AutomaticMatching"),h=p(e),j=r(e,h),k=y(s(e)).safe;if(k!=null&&k.length>D)return;g=g;e=w({button:e,buttonFeatures:j,buttonText:k,form:h,pixel:c,shouldExtractUserData:g});j=i(e,2);k=j[0];h=j[1];f&&(k={});h==null&&m.trigger(c);g&&h!=null&&F(b,c,h);if(f&&(c.userDataFormFields==null||A(c.userDataFormFields).length===0))return;b.trackSingleSystem("automatic",c,"SubscribedButtonClick",k)})}}}function H(a,b,c,d,e){if(a.disableAutoConfig)return;var f=a.optIns.isOptedIn(b.id,"InferredEvents");if(!f)return;f=a.optIns.isOptedIn(b.id,"AutomaticMatching");if(!f)return;f=c==null;d=B({button:d,containerElement:f?h:c,shouldExtractUserData:!0});f=d.userData;f==null?m.trigger(b):F(a,b,f,e)}v=function(a){k(b,a);function b(){var a,c,d;l(this,b);var e;for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return d=(e=(c=j(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),c),c.extractPII=H,e),j(c,d)}return b}(b);e.exports=new v(function(a,b){c.listenOnce(function(){var a=x(G(b));h.addEventListener?h.addEventListener("click",a,{capture:!0,once:!1,passive:!0}):g.attachEvent("onclick",a)}),n.listen(function(a,c,d){return H(b,a,c,d)})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.inferredevents");f.registerPlugin&&f.registerPlugin("fbevents.plugins.inferredevents",e.exports);
f.ensureModuleRegistered("fbevents.plugins.inferredevents",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;var g=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"](),a;!(d=(a=g.next()).done);d=!0){c.push(a.value);if(b&&c.length===b)break}}catch(a){e=!0,f=a}finally{try{!d&&g["return"]&&g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;else if((typeof Symbol==="function"?Symbol.iterator:"@@iterator")in Object(b))return a(b,c);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=typeof Symbol==="function"&&typeof (typeof Symbol==="function"?Symbol.iterator:"@@iterator")==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==(typeof Symbol==="function"?Symbol.prototype:"@@prototype")?"symbol":typeof a};function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:a}function k(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("fbevents.plugins.identity",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("fbevents.plugins.iwlbootstrapper",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:a}function i(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("signalsFBEventsIsHostFacebook",function(){
return function(f,g,h,i){var e={exports:{}};e.exports;(function(){"use strict";e.exports=function(a){if(typeof a!=="string")return!1;a=a.match(/^(.*\.)*(facebook\.com|internalfb\.com|workplace\.com|instagram\.com|oculus\.com|novi\.com)\.?$/i);return a!==null}})();return e.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsShouldNotDropCookie",function(){
return function(g,h,i,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("signalsFBEventsIsHostFacebook"),b="FirstPartyCookies";e.exports=function(c,d){return g.location.protocol.substring(0,"http".length)!=="http"||a(g.location.hostname)||d.disableFirstPartyCookies||d.getOptedInPixels(b).indexOf(c)===-1}})();return e.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.cookie",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var c=f.getFbeventsModules("SignalsFBEventsEvents"),d=c.getCustomParameters,j=c.getClickIDFromBrowserProperties;f.getFbeventsModules("SignalsFBEventsPixelCookie");c=f.getFbeventsModules("SignalsFBEventsPlugin");var k=f.getFbeventsModules("SignalsFBEventsURLUtil"),l=k.getURLParameter,m=f.getFbeventsModules("signalsFBEventsShouldNotDropCookie");k=f.getFbeventsModules("SignalsPixelCookieUtils");var n=k.readPackedCookie,o=k.writeNewCookie,p=k.writeExistingCookie,q=k.CLICK_ID_PARAMETER,r=k.CLICKTHROUGH_COOKIE_NAME,s=k.CLICKTHROUGH_COOKIE_PARAM,t=k.DOMAIN_SCOPED_BROWSER_ID_COOKIE_NAME,u=k.DOMAIN_SCOPED_BROWSER_ID_COOKIE_PARAM,v=2147483647;function w(){return""+Math.round(v*Math.random())}function x(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.location.href,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=l(c,q);e===null&&(e=l(b.referrer,q));e===null&&(e=d);if(e!=null&&e.length>500)return null;var f=n(r);if(e!=null){if(!f)return o(r,e);f.maybeUpdatePayload(e);return p(r,f)}else if(f)return p(r,f);return null}function y(){var a=n(t);if(a){p(t,a);return a}a=w();return o(t,a)}k=function(a){i(b,a);function b(){var a,c,d;g(this,b);var e;for(var f=arguments.length,i=Array(f),j=0;j<f;j++)i[j]=arguments[j];return d=(e=(c=h(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(i))),c),c.dropOrRefreshClickIDCookie=x,c.dropOrRefreshDomainScopedBrowserIDCookie=y,e),h(c,d)}return b}(c);e.exports=new k(function(b,c){var e=null;j.listen(function(a){e=a});function b(){d.listen(function(b){if(m(b,c))return{};b={};var d=x(a.location.href,e);d&&(b[s]=d.pack());d=y();d&&(b[u]=d.pack());return b})}b()})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.cookie");f.registerPlugin&&f.registerPlugin("fbevents.plugins.cookie",e.exports);
f.ensureModuleRegistered("fbevents.plugins.cookie",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;var g=typeof Symbol==="function"&&typeof (typeof Symbol==="function"?Symbol.iterator:"@@iterator")==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==(typeof Symbol==="function"?Symbol.prototype:"@@prototype")?"symbol":typeof a};f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBevents.plugins.automaticmatchingforpartnerintegrations",function(){
return function(g,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=f.getFbeventsModules("SignalsFBEventsConfigStore"),c=f.getFbeventsModules("SignalsFBEventsEvents"),d=c.configLoaded,h=c.piiAutomatched;c=f.getFbeventsModules("SignalsFBEventsPlugin");var i=f.getFbeventsModules("SignalsFBEventsUtils"),j=i.idx,k=i.isEmptyObject;i.keys;var l=i.reduce;i=f.getFbeventsModules("SignalsPixelPIIUtils");var m=i.getNormalizedPIIValue;function n(){return j(g,function(a){return a.Shopify.checkout})!=null}var o={ct:function(){return j(g,function(a){return a.Shopify.checkout.billing_address.city})},em:function(){return j(g,function(a){return a.Shopify.checkout.email})},fn:function(){return j(g,function(a){return a.Shopify.checkout.billing_address.first_name})},ln:function(){return j(g,function(a){return a.Shopify.checkout.billing_address.last_name})},ph:function(){return j(g,function(a){return a.Shopify.checkout.billing_address.phone})},st:function(){return j(g,function(a){return a.Shopify.checkout.billing_address.province_code})},zp:function(){return j(g,function(a){return a.Shopify.checkout.billing_address.zip})}};function p(a){return!n()?null:l(a,function(a,b){var c=o[b];c=c!=null?c():null;c=c!=null&&c!==""?m(b,c):null;c!=null&&(a[b]=c);return a},{})}e.exports=new c(function(c,e){d.listen(function(c){if(c==null)return;var d=e.optIns.isOptedIn(c,"AutomaticMatching"),f=e.optIns.isOptedIn(c,"AutomaticMatchingForPartnerIntegrations");d=d&&f;if(!d)return;f=e.getPixel(c);if(f==null)return;d=b.get(f.id,"automaticMatching");if(d==null)return;c=p(d.selectedMatchKeys);if(c==null||k(c))return;f.userDataFormFields=a({},f.userDataFormFields,c);h.trigger(f)})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBevents.plugins.automaticmatchingforpartnerintegrations");f.registerPlugin&&f.registerPlugin("fbevents.plugins.automaticmatchingforpartnerintegrations",e.exports);
f.ensureModuleRegistered("fbevents.plugins.automaticmatchingforpartnerintegrations",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.prohibitedsources",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var b=f.getFbeventsModules("SignalsFBEventsConfigStore"),c=f.getFbeventsModules("SignalsFBEventsEvents"),d=c.configLoaded,g=f.getFbeventsModules("SignalsFBEventsLogging");c=f.getFbeventsModules("SignalsFBEventsPlugin");var h=f.getFbeventsModules("SignalsFBEventsUtils"),i=h.filter,j=f.getFbeventsModules("sha256_with_dependencies_new");e.exports=new c(function(c,e){d.listen(function(c){var d=e.optIns.isOptedIn(c,"ProhibitedSources");if(!d)return;d=e.getPixel(c);if(d==null)return;var f=b.get(d.id,"prohibitedSources");if(f==null)return;f=i(f.prohibitedSources,function(b){return b.domain!=null&&b.domain===j(a.location.hostname)}).length>0;f&&(e.locks.lock("prohibited_sources_"+c),g.consoleWarn("[fbpixel] "+d.id+" is unavailable. Go to Events Manager to learn more"))})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.prohibitedsources");f.registerPlugin&&f.registerPlugin("fbevents.plugins.prohibitedsources",e.exports);
f.ensureModuleRegistered("fbevents.plugins.prohibitedsources",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.unwanteddata",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsEvents");a.configLoaded;var b=a.validateCustomParameters,c=a.validateUrlParameters,d=f.getFbeventsModules("SignalsFBEventsConfigStore"),g=f.getFbeventsModules("SignalsFBEventsLogging");a=f.getFbeventsModules("SignalsFBEventsPlugin");var h=f.getFbeventsModules("SignalsFBEventsUtils"),i=f.getFbeventsModules("sha256_with_dependencies_new");h.each;var j=h.map,k=!1;f.getFbeventsModules("SignalsParamList");e.exports=new a(function(a,e){b.listen(function(b,c,f){if(b==null)return;a.performanceMark("fbevents:start:unwantedDataProcessing",b.id);var h=e.optIns.isOptedIn(b.id,"UnwantedData");if(!h)return;h=e.optIns.isOptedIn(b.id,"ProtectedDataMode");var k=d.get(b.id,"unwantedData");if(k==null)return;var l=!1,m=[],n=[],o={};if(k.blacklisted_keys!=null){var p=k.blacklisted_keys[f];if(p!=null){p=p.cd;j(p,function(a){Object.prototype.hasOwnProperty.call(c,a)&&(l=!0,m.push(a),delete c[a])})}}if(k.sensitive_keys!=null){p=k.sensitive_keys[f];if(p!=null){var q=p.cd;Object.keys(c).forEach(function(a){j(q,function(b){i(a)===b&&(l=!0,n.push(b),delete c[a])})})}}o.unwantedParams=m;o.restrictedParams=n;l&&!h&&(g.logUserError({type:"UNWANTED_CUSTOM_DATA"}),c._filteredParams=o);a.performanceMark("fbevents:end:unwantedDataProcessing",b.id)});function h(a,b,c,d,e){var f=new URLSearchParams(b.search),g=[],h=[];b={};if(c.blacklisted_keys!=null){var l=c.blacklisted_keys[d];if(l!=null){l=l.url;j(l,function(a){f.has(a)&&(k=!0,g.push(a),f.set(a,"_removed_"))})}}if(c.sensitive_keys!=null){l=c.sensitive_keys[d];if(l!=null){var m=l.url;f.forEach(function(a,b){j(m,function(a){i(b)===a&&(k=!0,h.push(a),f.set(b,"_removed_"))})})}}b.unwantedParams=g;b.restrictedParams=h;if(k){e||(a.append("up_url",g.join(",")),a.append("rp_url",h.join(",")),f.set("_filteredParams",JSON.stringify(b)));return f.toString()}return""}c.listen(function(b,c,f,i){if(b==null)return;a.performanceMark("fbevents:start:validateUrlProcessing",b.id);var j=e.optIns.isOptedIn(b.id,"UnwantedData");if(!j)return;j=e.optIns.isOptedIn(b.id,"ProtectedDataMode");var l=d.get(b.id,"unwantedData");if(l==null)return;if(Object.prototype.hasOwnProperty.call(c,"dl")&&c.dl.length>0){var m=new URL(c.dl),n=h(i,m,l,f,j);k&&n.length>0&&(m.search=n,c.dl=m.toString())}if(Object.prototype.hasOwnProperty.call(c,"rl")&&c.rl.length>0){n=new URL(c.rl);m=h(i,n,l,f,j);k&&m.length>0&&(n.search=m,c.rl=n.toString())}k&&g.logUserError({type:"UNWANTED_URL_DATA"});a.performanceMark("fbevents:end:validateUrlProcessing",b.id)})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.unwanteddata");f.registerPlugin&&f.registerPlugin("fbevents.plugins.unwanteddata",e.exports);
f.ensureModuleRegistered("fbevents.plugins.unwanteddata",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.iabpcmaebridge",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var c=f.getFbeventsModules("SignalsFBEventsEvents"),d=c.fired,g=c.setEventId,h=c.getCustomParameters;c=f.getFbeventsModules("SignalsFBEventsPlugin");f.getFbeventsModules("SignalsParamList");var i=f.getFbeventsModules("signalsFBEventsGetIsIosInAppBrowser"),j=f.getFbeventsModules("SignalsFBEventsConfigStore"),k=f.getFbeventsModules("sha256_with_dependencies_new");function l(a){return(typeof a==="string"||a instanceof String)&&a.toUpperCase()==="LDU"}function m(a){try{if(a==null||typeof a!=="string")return null;else{var b=JSON.parse(a);if(b.conversionBit!=null&&typeof b.conversionBit==="number"&&b.priority!=null&&typeof b.priority==="number"&&b.etldOne!=null&&typeof b.etldOne==="string")return a;else return JSON.stringify({conversionBit:-1,priority:-1,etldOne:""})}}catch(a){return null}}function n(a){if(a==null)return!1;a=j.get(a,"IABPCMAEBridge");return a==null||a.enableAutoEventId==null||!a.enableAutoEventId?!1:!0}e.exports=new c(function(c,e){if(!i())return;h.listen(function(a,b){return!n(a.id)?{}:{iab:1}});g.listen(function(b,c){if(!n(b))return;b=a.location.origin+"_"+Date.now()+"_"+Math.random();b=k(b);var d=c.get("eid");if(d!=null&&d!==""||b==null)return;c.append("apcm_eid","1");d="pcm_plugin-set_"+b;c.append("eid",d)});d.listen(function(c,d){c=d.get("id");var e=d.get("ev"),f={},g=d.get("dpo"),h=d.get("dpoco"),i=d.get("dpost"),j=d.get("coo"),k=d.get("es");d.get("eid");var n=m(d.get("aem")),o=!1;(j==="false"||j==="true")&&(f.coo=j);k!==null&&(f.es=k);b!==null&&b.referrer!==null&&(f.referrer_link=b.referrer);if(l(g))if(h==="1"&&i==="1000")return;else h==="0"&&i==="0"&&(o=!0);var p={id:c,ev:e,dpo:o,aem:n!=null?n:""};d.each(function(a,b){if(a){var c=a.match(/^cd\[(.+)\]$/);c?f[c[1]]=b:a in p||(p[a]=b)}});p.cd=JSON.stringify(f);j={pcmPixelPostMessageEvent:p};a.postMessage(j,"*")})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.iabpcmaebridge");f.registerPlugin&&f.registerPlugin("fbevents.plugins.iabpcmaebridge",e.exports);
f.ensureModuleRegistered("fbevents.plugins.iabpcmaebridge",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:a}function i(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEventsBrowserPropertiesTypedef",function(){
return function(g,h,i,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsTyped");a.coerce;a=a.Typed;a=a.objectWithFields({open:a.func()});e.exports={XMLHttpRequestPrototypeTypedef:a}})();return e.exports}(a,b,c,d)});
f.ensureModuleRegistered("signalsFBEventsGetIsAndroidIAW",function(){
return function(f,g,h,i){var e={exports:{}};e.exports;(function(){"use strict";var a=f.navigator;a=a.userAgent;var b=a.indexOf("Android")>=0,c=a.indexOf("FB_IAB")>=0,d=a.indexOf("Instagram")>=0,g=0;a=a.match(/(FBAV|Instagram)[/\s](\d+)/);if(a!=null){a=a[0].match(/(\d+)/);a!=null&&(g=parseInt(a[0],10))}function h(a,e){var f=b&&(c||d);if(!f)return!1;if(c&&a!=null)return a<=g;return d&&e!=null?e<=g:f}e.exports=h})();return e.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.browserproperties",function(){
return function(g,h,i,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsSendEventEvent"),b=f.getFbeventsModules("SignalsFBEventsEvents"),c=b.configLoaded;b=f.getFbeventsModules("SignalsFBEventsEvents");var d=b.getClickIDFromBrowserProperties,i=f.getFbeventsModules("signalsFBEventsGetIsAndroidIAW");b=f.getFbeventsModules("SignalsFBEventsLogging");var j=b.logError;b=f.getFbeventsModules("SignalsFBEventsPlugin");var k=f.getFbeventsModules("signalsFBEventsSendEvent"),l=f.getFbeventsModules("signalsFBEventsShouldNotDropCookie"),m=f.getFbeventsModules("SignalsFBEventsURLUtil"),n=m.getURLParameter,o=f.getFbeventsModules("SignalsParamList");m=f.getFbeventsModules("SignalsFBEventsBrowserPropertiesTypedef");var p=m.XMLHttpRequestPrototypeTypedef;m=f.getFbeventsModules("SignalsFBEventsTyped");var q=m.coerce;m=f.getFbeventsModules("SignalsPixelCookieUtils");var r=m.CLICK_ID_PARAMETER,s=m.CLICKTHROUGH_COOKIE_PARAM;m=f.getFbeventsModules("SignalsFBEvents.plugins.cookie");var t=m.dropOrRefreshClickIDCookie,u=!0;function v(a,b,c){u=!1;while(c.length>0){var d=c.shift(),e=d.id;if(e!=null&&b!=null){e=a.getPixel(e.toString());if(e!=null&&!l(e,a)){e=d.customParams||new o();var f=e.get(s);if(f==null||f===""){f=t(g.location.href,b);f!=null&&(e.append(s,f.pack()),d.customParams=e)}}}k(d)}}e.exports=new b(function(b,e){if(n(g.location.href,r)!=null)return;if(n(h.referrer,r)!=null)return;if(typeof Promise==="undefined"||Promise.toString().indexOf("[native code]")===-1)return;b=g.webkit!=null&&g.webkit.messageHandlers!=null&&g.webkit.messageHandlers.browserProperties!=null;var k=i(397,264)&&typeof g.XMLHttpRequest!=="undefined";if(!b&&!k)return;var l=[],m=200,o=null,s=null;c.listen(function(a){a=e.getPixel(a);if(a==null)return;a=e.pluginConfig.get(a.id,"browserProperties");var b=a!=null&&a.delayInMs!=null?a.delayInMs:m;a=a!=null&&a.enableBackupTimeout!=null?a.enableBackupTimeout:!0;a&&s===null&&(s=g.setTimeout(function(){v(e,o,l)},b))});a.listen(function(a){if(!u)return!1;var b=a.id;if(b==null)return!1;b=e.pluginConfig.get(b.toString(),"browserProperties");if(b==null)return!1;if(b.enableEventSuppression==null||!b.enableEventSuppression)return!1;l.push(a);return!0});var t=function(a){a!=null&&a!==""?(o=a,d.trigger(a),u||j(new Error("[EBP Error] timeout"))):j(new Error("[EBP Error]456:Unexpected empty clickID!")),v(e,o,l)};if(b){b=g.webkit.messageHandlers.browserProperties.postMessage("clickID");b.then(function(a){return t(a)})["catch"](function(a){a.message="[EBP Error]"+a.message,j(a)})}if(k){var w=new g.XMLHttpRequest();w.onloadend=function(){w.readyState===w.DONE&&w.status>=200&&w.status<300?t(w.responseText):j(new Error("[EBP Error], status="+w.status+", responseText="+w.responseText))};try{b=q(XMLHttpRequest.prototype,p);b!=null&&(b.open.toString().includes("native code")||j(new Error("[EBP Error] XMLHttpRequest.prototype.open is overridden ")))}catch(a){}w.open("GET","properties://browser/clickID");w.send()}})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.browserproperties");f.registerPlugin&&f.registerPlugin("fbevents.plugins.browserproperties",e.exports);
f.ensureModuleRegistered("fbevents.plugins.browserproperties",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEventsClientHintTypedef",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("SignalsFBEventsTyped");a.coerce;a=a.Typed;var b=a.objectWithFields({brands:a.array(),platform:a.allowNull(a.string()),getHighEntropyValues:a.func()});a=a.objectWithFields({model:a.allowNull(a.string()),platformVersion:a.allowNull(a.string()),fullVersionList:a.array()});e.exports={userAgentDataTypedef:b,highEntropyResultTypedef:a}})();return e.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEventsGetIsAndroidChrome",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("signalsFBEventsGetIsChrome");function b(a){return a===void 0?!1:a.platform==="Android"&&a.brands.map(function(a){return a.brand}).join(", ").includes("Chrome")}function c(a){return a.includes("Chrome")&&a.includes("Android")}function d(b){b=b.indexOf("Android")>=0;var c=a();return b&&c}e.exports={checkIsAndroidChromeWithClientHint:b,checkIsAndroidChromeWithUAString:c,checkIsAndroidChrome:d}})();return e.exports}(a,b,c,d)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.clienthint",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var b=f.getFbeventsModules("SignalsFBEventsEvents");b.fired;b=f.getFbeventsModules("SignalsFBEventsPlugin");var c=f.getFbeventsModules("SignalsParamList"),d=f.getFbeventsModules("signalsFBEventsSendEvent"),g=f.getFbeventsModules("SignalsFBEventsEvents"),h=g.configLoaded,i=f.getFbeventsModules("SignalsFBEventsSendEventEvent");g=f.getFbeventsModules("SignalsFBEventsLogging");var j=g.logError;g=f.getFbeventsModules("SignalsFBEventsTyped");var k=g.coerce;g.Typed;g=f.getFbeventsModules("SignalsFBEventsClientHintTypedef");var l=g.userAgentDataTypedef,m=g.highEntropyResultTypedef;g=f.getFbeventsModules("SignalsFBEventsGetIsAndroidChrome");var n=g.checkIsAndroidChrome,o="chmd",p="chpv",q="chfv",r=[o,p,q],s=[],t=200,u=new Map(),v=null,w=!0;function x(b,e,a){w=!1;while(a.length>0){b=a.shift();var f=b.customParams||new c(),g=!0,h=!1,i=void 0;try{for(var j=r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"](),k;!(g=(k=j.next()).done);g=!0){k=k.value;f.get(k)==null&&f.append(k,e.get(k))}}catch(a){h=!0,i=a}finally{try{!g&&j["return"]&&j["return"]()}finally{if(h)throw i}}b.customParams=f;d(b)}}e.exports=new b(function(b,d){b=k(a.navigator.userAgentData,l);if(b==null){a.navigator.userAgentData!=null&&j(new Error("[ClientHint Error] UserAgentData coerce error"));return}else if(!n(a.navigator.userAgent))return;a.navigator.userAgentData.getHighEntropyValues(["model","platformVersion","fullVersionList"]).then(function(a){a=k(a,m);if(a==null){j(new Error("[ClientHint Error] getHighEntropyValues returned null from Android Chrome source"));return}u.set(o,String(a.model));u.set(p,String(a.platformVersion));var b=void 0,c=void 0,e=!0,f=!1,g=void 0;try{for(var h=a.fullVersionList[typeof Symbol==="function"?Symbol.iterator:"@@iterator"](),a;!(e=(a=h.next()).done);e=!0)c=a.value,c.brand.includes("Chrome")&&(b=c.version)}catch(a){f=!0,g=a}finally{try{!e&&h["return"]&&h["return"]()}finally{if(f)throw g}}u.set(q,String(b));x(d,u,s)})["catch"](function(a){a.message="[ClientHint Error]"+a.message,j(a)});h.listen(function(b){b=d.getPixel(b);if(b==null)return;b=d.pluginConfig.get(b.id,"clientHint");var c=b!=null&&b.delayInMs!=null?b.delayInMs:t;b=b!=null&&b.disableBackupTimeout!=null?b.disableBackupTimeout:!1;v===null&&!b&&(v=a.setTimeout(function(){x(d,u,s)},c))});i.listen(function(a){if(!w){var b=a.customParams||new c(),e=!0,f=!1,g=void 0;try{for(var h=r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"](),i;!(e=(i=h.next()).done);e=!0){i=i.value;b.get(i)==null&&b.append(i,u.get(i))}}catch(a){f=!0,g=a}finally{try{!e&&h["return"]&&h["return"]()}finally{if(f)throw g}}a.customParams=b;return!1}i=a.id;if(i==null)return!1;e=d.pluginConfig.get(i.toString(),"clientHint");if(e==null)return!1;s.push(a);return!0})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.clienthint");f.registerPlugin&&f.registerPlugin("fbevents.plugins.clienthint",e.exports);
f.ensureModuleRegistered("fbevents.plugins.clienthint",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.privacysandbox",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var a=f.getFbeventsModules("signalsFBEventsGetIsChrome");f.getFbeventsModules("SignalsParamList");var c=f.getFbeventsModules("SignalsFBEventsNetworkConfig"),d=c.GPS_ENDPOINT,g=f.getFbeventsModules("signalsFBEventsSendGET"),h=f.getFbeventsModules("SignalsFBEventsFiredEvent");c=f.getFbeventsModules("SignalsFBEventsPlugin");e.exports=new c(function(c,e){if(!a())return;if(b.featurePolicy==null||!b.featurePolicy.allowsFeature("attribution-reporting"))return;h.listen(function(a,b){a=b.get("id");if(a==null)return;a=e.optIns.isOptedIn(a,"PrivacySandbox");if(!a)return;g(b,{ignoreRequestLengthCheck:!0,attributionReporting:!0,url:d})})})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.privacysandbox");f.registerPlugin&&f.registerPlugin("fbevents.plugins.privacysandbox",e.exports);
f.ensureModuleRegistered("fbevents.plugins.privacysandbox",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.lastexternalreferrer",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var c=f.getFbeventsModules("SignalsFBEventsGetValidUrl"),d=f.getFbeventsModules("SignalsFBEventsEvents"),g=d.getCustomParameters;d=f.getFbeventsModules("SignalsFBEventsPlugin");var h=f.getFbeventsModules("signalsFBEventsGetIsAndroidIAW"),i=f.getFbeventsModules("signalsFBEventsGetIsIosInAppBrowser"),j=f.getFbeventsModules("SignalsFBEventsLogging"),k=j.logError;j=f.getFbeventsModules("SignalsFBEventsTyped");var l=j.coerce;j=j.Typed;var m=j.objectWithFields({setItem:j.func(),getItem:j.func()});e.exports=new d(function(d,e){var j=h()&&typeof a.XMLHttpRequest!=="undefined",n=i(),o=null;try{o=l(a.localStorage,m)}catch(a){return}if(j||n||o==null)return;j="facebook.com";n="instagram.com";o="lastExternalReferrer";var p="lastExternalReferrerTime";function d(a,b){return a==b||a.endsWith(".".concat(b))}function e(b,c){a.localStorage.setItem(b,c)}function q(b){return a.localStorage.getItem(b)}function r(b){a.localStorage.removeItem(b)}try{var s=q(p);s!=null&&(new Date().getTime()-Number(s))/(1e3*60*60*24)>90&&(r(p),r(o));s=!1;r="";var t=c(b.referrer);t!=null&&(r=t.hostname);if(r=="")e(o,"empty"),s=!0;else{t=String(a.location.hostname);r!==t&&(d(r,j)?e(o,"fb"):d(r,n)?e(o,"ig"):e(o,"other"),s=!0)}s&&e(p,new Date().getTime());var u=q(o);u!=null&&(u!="empty"&&u!="fb"&&u!="ig"&&(u="other"));g.listen(function(a){return{ler:u}})}catch(a){a.message="[LastExternalReferrer Error]"+a.message,k(a)}})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.lastexternalreferrer");f.registerPlugin&&f.registerPlugin("fbevents.plugins.lastexternalreferrer",e.exports);
f.ensureModuleRegistered("fbevents.plugins.lastexternalreferrer",function(){
return e.exports})})()})(window,document,location,history);
(function(a,b,c,d){var e={exports:{}};e.exports;(function(){var f=a.fbq;f.execStart=a.performance&&a.performance.now&&a.performance.now();if(!function(){var b=a.postMessage||function(){};if(!f){b({action:"FB_LOG",logType:"Facebook Pixel Error",logMessage:"Pixel code is not installed correctly on this page"},"*");"error"in console&&console.error("Facebook Pixel Error: Pixel code is not installed correctly on this page");return!1}return!0}())return;f.__fbeventsModules||(f.__fbeventsModules={},f.__fbeventsResolvedModules={},f.getFbeventsModules=function(a){f.__fbeventsResolvedModules[a]||(f.__fbeventsResolvedModules[a]=f.__fbeventsModules[a]());return f.__fbeventsResolvedModules[a]},f.fbIsModuleLoaded=function(a){return!!f.__fbeventsModules[a]},f.ensureModuleRegistered=function(b,a){f.fbIsModuleLoaded(b)||(f.__fbeventsModules[b]=a)});
f.ensureModuleRegistered("SignalsFBEvents.plugins.cookiedeprecationlabel",function(){
return function(a,b,c,d){var e={exports:{}};e.exports;(function(){"use strict";var b=f.getFbeventsModules("SignalsFBEventsEvents"),c=b.getCustomParameters;b=f.getFbeventsModules("SignalsFBEventsPlugin");var d=f.getFbeventsModules("SignalsParamList"),g=f.getFbeventsModules("SignalsFBEventsLogging"),h=g.logError,i=f.getFbeventsModules("SignalsFBEventsSendEventEvent"),j=f.getFbeventsModules("signalsFBEventsSendEvent");g=f.getFbeventsModules("SignalsFBEventsEvents");var k=g.configLoaded,l=f.getFbeventsModules("signalsFBEventsGetIsChrome"),m=f.getFbeventsModules("SignalsFBEventsGetIsAndroidChrome"),n="cdl",o=200,p=[],q=!0,r="",s=null;function t(c,b,a){q=!1;while(a.length>0){c=a.shift();var e=c.customParams||new d();e.get(n)==null&&e.append(n,b);c.customParams=e;j(c)}}e.exports=new b(function(b,e){if(!l())return;b=a.navigator.cookieDeprecationLabel;if(b==null){c.listen(function(a){return{cdl:"API_unavailable"}});return}m.checkIsAndroidChrome(a.navigator.userAgent)?(r="fetching_label",b.getValue().then(function(a){r=String(a)})["catch"](function(a){a.message="[CookieDeprecationLabel Error]"+String(a.message),h(a)}),c.listen(function(a){return{cdl:r}})):(b.getValue().then(function(a){r=String(a),t(e,r,p)})["catch"](function(a){a.message="[CookieDeprecationLabel Error]"+String(a.message),h(a)}),k.listen(function(b){b=e.getPixel(b);if(b==null)return;b=e.pluginConfig.get(b.id,"cookieDeprecationLabel");var c=b!=null&&b.delayInMs!=null?b.delayInMs:o;b=b!=null&&b.disableBackupTimeout!=null?b.disableBackupTimeout:!1;!b&&s===null&&(s=a.setTimeout(function(){t(e,r,p)},c))}),i.listen(function(a){if(!q){var b=a.customParams||new d();b.get(n)==null&&b.append(n,r);a.customParams=b;return!1}b=a.id;if(b==null)return!1;p.push(a);return!0}))})})();return e.exports}(a,b,c,d)});e.exports=f.getFbeventsModules("SignalsFBEvents.plugins.cookiedeprecationlabel");f.registerPlugin&&f.registerPlugin("fbevents.plugins.cookiedeprecationlabel",e.exports);
f.ensureModuleRegistered("fbevents.plugins.cookiedeprecationlabel",function(){
return e.exports})})()})(window,document,location,history);
fbq.registerPlugin("1429274203780765", {__fbEventsPlugin: 1, plugin: function(fbq, instance, config) { config.set("1429274203780765", "inferredEvents", {"buttonSelector":null,"disableRestrictedData":false});
fbq.loadPlugin("inferredevents");
fbq.loadPlugin("identity");
instance.optIn("1429274203780765", "InferredEvents", true);
fbq.loadPlugin("iwlbootstrapper");
instance.optIn("1429274203780765", "IWLBootstrapper", true);
fbq.loadPlugin("cookie");
instance.optIn("1429274203780765", "FirstPartyCookies", true);
fbq.loadPlugin("inferredevents");
instance.optIn("1429274203780765", "InferredEvents", true);
fbq.loadPlugin("automaticmatchingforpartnerintegrations");
instance.optIn("1429274203780765", "AutomaticMatchingForPartnerIntegrations", true);
config.set(null, "batching", {"batchWaitTimeMs":501,"maxBatchSize":10});
config.set(null, "microdata", {"waitTimeMs":500});
config.set("1429274203780765", "prohibitedSources", {"prohibitedSources":[]});
fbq.loadPlugin("prohibitedsources");
instance.optIn("1429274203780765", "ProhibitedSources", true);
config.set("1429274203780765", "unwantedData", {"blacklisted_keys":{},"sensitive_keys":{}});
fbq.loadPlugin("unwanteddata");
instance.optIn("1429274203780765", "UnwantedData", true);
config.set("1429274203780765", "IABPCMAEBridge", {"enableAutoEventId":false});
fbq.loadPlugin("iabpcmaebridge");
instance.optIn("1429274203780765", "IABPCMAEBridge", true);
config.set("1429274203780765", "browserProperties", {"delayInMs":200,"enableEventSuppression":true,"enableBackupTimeout":true});
fbq.loadPlugin("browserproperties");
instance.optIn("1429274203780765", "BrowserProperties", true);
config.set("1429274203780765", "clientHint", {"delayInMs":200,"disableBackupTimeout":false});
fbq.loadPlugin("clienthint");
instance.optIn("1429274203780765", "ClientHint", true);
fbq.loadPlugin("privacysandbox");
instance.optIn("1429274203780765", "PrivacySandbox", true);
fbq.loadPlugin("lastexternalreferrer");
instance.optIn("1429274203780765", "LastExternalReferrer", true);
fbq.loadPlugin("cookiedeprecationlabel");
instance.optIn("1429274203780765", "CookieDeprecationLabel", true);instance.configLoaded("1429274203780765"); }});LURRED":n=Hd(n,i);break;case"UPSERT_TEASER":{var l=[];l[i.index]=i.teaser,n=ii(n,{teasers:l});break}case"PLAYER_STATE":{n=ii(n,{player:i});break}case"PLAYER_STATUS":n=Vd(n,i);break;case"PLAYER_VISIBLE":n=qd(n,i);break;case"PLAYER_INIT":n=Gd(n,i);break;case"PLAYER_MUTE":n=Ud(n,i);break;case"PLAYER_EXPANDED":n=jd(n,i);break;case"PLAYER_MOUSE_OVER":n=zd(n,i);break;case"PLAYER_TEASER_POSITION":n=Fd(n,i);break;case"POPUP_VISIBLE":n=Yd(n,i);break;case"PLAYER_STICKY":n=$d(n,i);break;case"PLAYER_IN_SIGHT":n=Zd(n,i);break;case"DELETE_PROPERTY":n=Jd(n,i);break}return s[a]=n,s}di.default=Kd});var ia=re(Xe=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Xe,"__esModule",{value:!0});Xe.clearListeners=Xe.removeTriggerListener=Xe.addTriggerListener=Xe.removeSubListener=Xe.addSubListener=Xe.mainListener=Xe.store=void 0;var Qd=ao(),Qi=we(),oo=De(),ta=ro(),no,Xi=[],ea=[],rr={},Xd=Qi.Helpers.getMostTopWindowUrl().indexOf("mgwdebug")>-1;Xe.store=(0,Qd.createStore)(ta.default,Xd?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():void 0);function lo(){var r={},e=Xe.store.getState(),t=no;no=e,Xi.forEach(function(i){var a=(0,Qi.getInObject)(t,i.path),s=(0,Qi.getInObject)(e,i.path);a!==s&&i.subListener(t)}),ea.forEach(function(i){var a=(0,Qi.getInObject)(t,i.path,!1),s=(0,Qi.getInObject)(e,i.path);s&&a!==s&&!rr[i.path.join(".")]&&(rr[i.path.join(".")]=i.path,r[i.path.join(".")]=i.path,i.subListener(t),delete rr[i.path.join(".")])}),Object.keys(r).forEach(function(i){Xe.store.dispatch((0,oo.setTriggerToFalseGlobal)(r[i]))})}Xe.mainListener=lo;Xe.store.subscribe(function(){lo()});function eh(r,e){var t=(0,ta.pathToArray)(r);Xi.push({path:t,subListener:e})}Xe.addSubListener=eh;function th(r,e){var t=(0,ta.pathToArray)(r);Xi.forEach(function(i,a){i.path.join(".")===t.join(".")&&i.subListener===e&&Xi.splice(a,1)})}Xe.removeSubListener=th;function ih(r,e){var t=(0,ta.pathToArray)(r);Xe.store.dispatch((0,oo.setTriggerToFalseGlobal)(t)),ea.push({path:t,subListener:e})}Xe.addTriggerListener=ih;function ah(r,e){var t=(0,ta.pathToArray)(r);ea.forEach(function(i,a){i.path.join(".")===t.join(".")&&i.subListener===e&&ea.splice(a,1)})}Xe.removeTriggerListener=ah;function sh(){Xi=[],ea=[]}Xe.clearListeners=sh});var Ne=re(Et=>{"use strict";w();_();k();C();D();I();var ki=Et&&Et.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var i=0,a=e.length,s;i<a;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return r.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Et,"__esModule",{value:!0});Et.createAmby=Et.proxyTree=Et.vpaidModes=Et.states=void 0;var co=we(),_t=ia();Et.states={STATUS_PLAYING:"playing",STATUS_PAUSED:"paused",STATUS_READY:"ready",STATUS_STOPPED:"stopped",STATUS_ERROR:"error",STATUS_INIT:"init",INIT_NEEDED:"needed",INIT_DONE:"done",INIT_RESET:"reset",INIT_IN_PROGRESS:"progress",INIT_STOP:"stop"};Et.vpaidModes={INSECURE:"insecure",SECURE:"secure"};(function(r){r.Proxy||(r.Proxy=function(){function e(t,i){this.handlers=i,this.ambyNamespace=""}return e.prototype.dispatch=function(t){return this.handlers.get(null,"dispatch")(t)},e.prototype.subscribe=function(t){return this.handlers.get(null,"subscribe")(t)},e.prototype.get=function(t,i){return this.handlers.get(null,"get")(t,i)},e.prototype.putNS=function(t){return this.handlers.get(null,"putNS")(t)},e.prototype.getNS=function(){return this.handlers.get(null,"getNS")()},e.prototype.addSubListener=function(t,i){return this.handlers.get(null,"addSubListener")(t,i)},e.prototype.addTriggerListener=function(t,i){return this.handlers.get(null,"addTriggerListener")(t,i)},e}())})(typeof process<"u"&&{}.toString.call(process)==="[object process]"?global:self);function po(){var r="";function e(t){return new Proxy({},{get:function(i,a){if(t.length===0){if(a==="dispatch")return function(s){return _t.store.dispatch({type:s.type,value:s.state,ambyNamespace:r})};if(a==="subscribe")return function(s){return _t.store.subscribe({handler:s,ambyNamespace:r})};if(a==="get")return function(s,n){if(typeof s>"u")return _t.store.getState();var l=s.split(".");return l.forEach(function(d,h){parseInt(d,10).toString()===d&&(l[h]=parseInt(d,10))}),(0,co.getInObject)(_t.store.getState()[r],l,n)};if(a==="getNS")return function(){return r};if(a==="putNS")return function(s){r=s};if(a==="addSubListener")return function(s,n){typeof s=="string"?(0,_t.addSubListener)("".concat(r,".").concat(s),n):(0,_t.addSubListener)(ki([r],s,!0),n)};if(a==="removeSubListener")return function(s,n){typeof s=="string"?(0,_t.removeSubListener)("".concat(r,".").concat(s),n):(0,_t.removeSubListener)(ki([r],s,!0),n)};if(a==="addTriggerListener")return function(s,n){typeof s=="string"?(0,_t.addTriggerListener)("".concat(r,".").concat(s),n):(0,_t.addTriggerListener)(ki([r],s,!0),n)};if(a==="removeTriggerListener")return function(s,n){typeof s=="string"?(0,_t.removeTriggerListener)("".concat(r,".").concat(s),n):(0,_t.removeTriggerListener)(ki([r],s,!0),n)}}else{if(a==="get")return function(s){return(0,co.getInObject)(_t.store.getState()[r],t,s)};if(a==="getPath")return function(){return t}}return e(ki(ki([],t,!0),[a],!1))}})}return e([])}Et.proxyTree=po;function rh(r){var e=po();return e.putNS(r),e}Et.createAmby=rh});var aa=re(Pa=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Pa,"__esModule",{value:!0});Pa.DomManagerComponent=void 0;var nh=function(){function r(){this.listenedElems=[],this.observedDocuments=[]}return r.prototype.checkForIframes=function(e){var t=this;if(e.querySelectorAll){var i=e.querySelectorAll("iframe");i&&(i=Array.apply(null,i),i.forEach(function(a){t.checkIframe(a)}))}},r.prototype.getObserver=function(e,t){var i=this;if(t===void 0&&(t=window),t===null||!(e instanceof t.Node))return null;var a=new MutationObserver(function(s){s.forEach(function(n){if(n.type==="childList"&&n.addedNodes.length){var l=Array.apply(null,n.addedNodes);l.forEach(function(d){i.observerAction(d)})}})});return a.observe(e,{childList:!0,subtree:!0}),a},r.prototype.checkIframe=function(e){this.listenedElems.indexOf(e)<0&&(this.listenedElems.push(e),this.checkIframeAction(e))},r.prototype.getMediaElements=function(e){var t=this,i=[];if(e.querySelectorAll){var a=Array.from(e.querySelectorAll("*"));a.forEach(function(s){(s.tagName==="VIDEO"||s.tagName==="AUDIO")&&i.push(s),s.shadowRoot&&(i.push.apply(i,t.getMediaElements(s.shadowRoot)),t.observedDocuments.indexOf(s.shadowRoot)===-1&&(t.observedDocuments.push(s.shadowRoot),t.getObserver(s.shadowRoot,s.ownerDocument.defaultView),setTimeout(function(){t.checkForIframes(s.shadowRoot)})))})}return i},r.prototype.inMgPlayer=function(e){var t=e.ownerDocument.defaultView;if(t.inMgPlayer)return!0;for(var i=e;i.parentElement&&i.parentElement!==i;)if(i=i.parentElement,i.classList.contains("vrline")||i.className.indexOf("mgAdPlayerDiv")>-1)return!0;return!1},r}();Pa.DomManagerComponent=nh});var ra=re(Ci=>{"use strict";w();_();k();C();D();I();var oh=Ci&&Ci.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.NoSoundComponent=void 0;var lh=we(),sa=Oe(),ch=aa(),ph=De(),dh=function(r){oh(e,r);function e(t,i){var a=r.call(this)||this,s=i.playerDiv,n=i.adName;return a.playerDiv=s,a.adName=n,a.amby=t,a.noiframe=t.get("formatConfig.noiframe",!0),a.getObserver(a.playerDiv),a.checkSound(a.playerDiv),a}return e.prototype.observerAction=function(t){var i=this;(t.tagName==="VIDEO"||t.tagName==="AUDIO")&&this.listenedElems.indexOf(t)===-1&&(this.listenedElems.push(t),this.muteVolume(t),t.addEventListener("volumechange",function(a){i.onVolumeChange(a)})),t.tagName==="IFRAME"&&this.checkIframe(t),this.checkSound(t)},e.prototype.checkIframeAction=function(t){var i=lh.Helpers.checkIframe(t);i?(this.getObserver(i,t.contentWindow),this.checkSound(i)):t.src.indexOf("imasdk.googleapis")===-1&&((0,sa.mgDebug)("Iframe detected: src: ".concat(t.src)),this.noiframe&&t.parentNode&&(t.parentNode.removeChild(t),(0,sa.mgDebug)("Iframe deleted: src: ".concat(t.src))))},e.prototype.checkSound=function(t){var i=this;if(t.querySelectorAll){var a=t.querySelectorAll("video, audio");a&&(a=Array.apply(null,a),a.forEach(function(s){s.classList.contains("mg2player__video")||(e.isPlaying(s)&&s.muted===!1&&i.amby.get("ad.initMuted",!0)&&!i.amby.get("ad.soundButtonClicked",!1)&&((0,sa.mgDebug)("Prevent Unmute Video violation."),s.muted=!0),i.listenedElems.indexOf(s)===-1&&(i.listenedElems.push(s),s.addEventListener("volumechange",function(n){i.onVolumeChange(n)})))}))}this.checkForIframes(t)},e.prototype.onVolumeChange=function(t){var i=this;setTimeout(function(){t&&t.target&&!t.target.muted&&i.amby.get("ad.initMuted",!0)&&!i.amby.get("ad.soundButtonClicked",!1)&&((0,sa.mgDebug)("Prevent Unmute violation."),t.target.muted=!0),i.amby.get("ad.soundButtonClicked",!1)&&i.amby.dispatch(ph.upsertAdState({soundButtonClicked:!1}))},0)},e.prototype.muteVolume=function(t){var i=this;setTimeout(function(){!t.muted&&i.amby.get("ad.initMuted",!0)&&!i.amby.get("ad.soundButtonClicked",!1)&&((0,sa.mgDebug)("Mute violation."),t.muted=!0)},0)},e.isPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},e}(ch.DomManagerComponent);Ci.NoSoundComponent=dh});var Ea=re(Di=>{"use strict";w();_();k();C();D();I();var hh=Di&&Di.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Di,"__esModule",{value:!0});Di.UnmuteDetectComponent=void 0;var uh=De(),ho=we(),mh=aa(),fh=function(r){hh(e,r);function e(t){var i=r.call(this)||this;i.widget=t,i.amby=t.amby,i.listenedElems=[],i.observedDocuments=[],i.sentSources=[],i.addPlayingWithSoundProp();var a=i.getMediaElements(document.body);return a&&a.forEach(function(s){i.addListener(s)}),setTimeout(function(){i.checkForIframes(document.body),setTimeout(function(){i.observedDocuments.push(document),i.getObserver(document)})}),i}return e.prototype.observerAction=function(t){var i=this;if(t instanceof HTMLElement&&((t.tagName==="VIDEO"||t.tagName==="AUDIO")&&this.addListener(t),t.querySelectorAll)){var a=this.getMediaElements(t);a&&a.forEach(function(s){i.addListener(s)})}setTimeout(function(){i.checkForIframes(t.ownerDocument)})},e.prototype.getVideoObserver=function(){var t=this;return this.videoObserver||(this.videoObserver=new MutationObserver(function(i){i.forEach(function(a){t.checkMedia(a.target)})})),this.videoObserver},e.prototype.addListener=function(t){var i=this;this.listenedElems.indexOf(t)===-1&&(this.listenedElems.push(t),this.checkMedia(t),t.addEventListener("volumechange",function(a){i.checkMedia(a.target)}),this.getVideoObserver().observe(t,{attributes:!0,attributeFilter:["src"]}))},e.prototype.checkMedia=function(t){var i=t.currentSrc||t.src;i&&this.sentSources.indexOf(i)===-1&&!t.muted&&t.volume>0&&(this.sentSources.push(i),this.amby.dispatch(uh.upsertAdState({unmuteraw:!0,unmuteMediaSrc:t.currentSrc})))},e.prototype.checkIframeAction=function(t){var i=this,a=ho.Helpers.checkIframe(t);if(a&&this.observedDocuments.indexOf(a)===-1){this.inMgPlayer(t)&&(a.defaultView.inMgPlayer=!0),this.observedDocuments.push(a);var s=this.getMediaElements(a);s&&s.forEach(function(l){i.addListener(l)});var n=a.getRootNode();this.getObserver(n,t.contentWindow),setTimeout(function(){i.checkForIframes(a)})}},e.prototype.addPlayingWithSoundProp=function(){Object.defineProperty(HTMLMediaElement.prototype,"playingWithSound",{get:function(){return this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2&&!this.muted&&this.volume>0},configurable:!0})},e.prototype.getUnMutedElements=function(){var t=this,i=[];return this.listenedElems.forEach(function(a){if(a.playingWithSound){var s=a.ownerDocument.defaultView;i.push({src:a.currentSrc,isIFrame:s.self!==s.top,inMgPlayer:t.inMgPlayer(a),xPath:t.getXPath(a)})}}),i},e.prototype.getXPath=function(t){for(var i=this.getElementName(t),a=t;a.parentElement&&a.parentElement!==a;)a=a.parentElement,i="".concat(this.getElementName(a),">").concat(i);return i},e.prototype.getElementName=function(t){var i=t.tagName,a=t.id,s=t.classList.value.replaceAll(" ",",.");return a&&(i="".concat(i,"#").concat(a)),s&&(i="".concat(i,".").concat(s)),i},e.prototype.findIframes=function(t){var i=this,a=[];return t.querySelectorAll&&Array.from(t.querySelectorAll("*")).forEach(function(s){if(s.tagName==="IFRAME"&&s.src)s.src!=="about:blank"&&a.push(s.src);else if(s.tagName==="IFRAME"){var n=ho.Helpers.checkIframe(s);n&&Array.prototype.push.apply(a,i.findIframes(n))}else s.shadowRoot&&Array.prototype.push.apply(a,i.findIframes(s.shadowRoot))}),a},e}(mh.DomManagerComponent);Di.UnmuteDetectComponent=fh});var nr=re(Aa=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.AniviewBase=void 0;var gh=Oe(),na=we(),yh=function(){function r(e,t){this.amby=e.amby,this.ref1=t.ref1}return r.prototype.getRef1=function(){var e=this.amby.get("formatConfig.name");e==="attachedWidget"&&(e="outstream");var t="AV_CDIM1=".concat(this.amby.get("cappingData.dt","desktop"));try{t+="&AV_CUSTOM1=".concat(window.localStorage.mgMuidn)}catch(s){(0,gh.mgDebug)(s)}if(t+="&AV_CDIM2=".concat(this.amby.get("cappingData.isBot",0),"&AV_CDIM3=").concat(e)+"&AV_CDIM4=".concat(this.amby.get("sensorCid"),"&AV_CDIM5=").concat(this.amby.get("uuid"))+"&AV_CDIM6=".concat(this.amby.get("cappingData.iv",0))+"".concat(this.ref1?"&":"").concat(this.ref1||""),this.amby.get("sd")&&(t+="&AV_CDIM9=".concat(encodeURI(this.amby.get("sd").join("|")))),e==="native"){var i=this.getVideoExt(),a=this.amby.get("player.itemIndex",0);t+="&AV_CUSTOM2=".concat((0,na.getInObject)(i,["duration"],0))+"&AV_CUSTOM3=".concat(encodeURIComponent(this.amby.get("playlist.".concat(a,".title"))))+"&AV_CUSTOM4=".concat(r.getKrono((0,na.getInObject)(i,["duration"],0)))+"&AV_CUSTOM5=".concat(this.amby.get("formatConfig.sticky")?7:2)+"&AV_CUSTOM6=".concat(na.Helpers.iOSversion()?1:3)+"&AV_CUSTOM7=".concat((0,na.getInObject)(i,["gpmdCategory","cat1"],0))+"&AV_CUSTOM8=".concat((0,na.getInObject)(i,["gpmdCategory","cat2"],0))}return t},r.getKrono=function(e){var t=0;return[30,30,30,30,60,60,60,300,300,900,1800,1800,1800,1800].reduce(function(i,a,s){return e>i&&(t=s),i+a}),t},r.prototype.getVideoExt=function(){var e=this.amby.get("playlist.".concat(this.amby.get("player.itemIndex"),".videoExt"));return typeof e=="string"&&(e=JSON.parse(atob(e))),e||!1},r}();Aa.AniviewBase=yh});var La=re(Ii=>{"use strict";w();_();k();C();D();I();var vh=Ii&&Ii.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ProxyConsoleComponent=void 0;var or=we(),uo=Oe(),bh=aa(),xh=function(r){vh(e,r);function e(t,i){var a=r.call(this)||this,s=i.playerDiv;return a.playerDiv=s,a.noiframe=t.get("formatConfig.noiframe",!0),a.hideConsoleMessages(),a.getObserver(a.playerDiv),a.checkForIframes(a.playerDiv),a}return e.prototype.hideConsoleMessages=function(){var t=or.Helpers.getPageScriptsList();window.console=new Proxy(window.console,{get:function(i,a){if(typeof a!="string")return null;if(a==="isProxy")return!0;var s=or.Helpers.callScriptURL(),n=["log","debug","table","error","warn","exception","info"];return s&&t.indexOf(s)===-1&&n.indexOf(a)>-1?function(){}:i[a]}})},e.prototype.checkIframeAction=function(t){if(or.Helpers.checkIframe(t)){if(!t.contentWindow.console.isProxy)try{t.contentWindow.console=window.console}catch{}this.checkForIframes(t)}else t.src.indexOf("imasdk.googleapis")===-1&&((0,uo.mgDebug)("Iframe detected: src: ".concat(t.src)),this.noiframe&&t.parentNode&&(t.parentNode.removeChild(t),(0,uo.mgDebug)("Iframe deleted: src: ".concat(t.src))))},e.prototype.observerAction=function(t){t.tagName==="IFRAME"&&this.checkIframe(t),this.checkForIframes(t)},e}(bh.DomManagerComponent);Ii.ProxyConsoleComponent=xh});var Oa=re(Pi=>{"use strict";w();_();k();C();D();I();var Th=Pi&&Pi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Pi,"__esModule",{value:!0});Pi.AniViewComponent=void 0;var Te=Ne(),le=De(),Wt=we(),Ie=Oe(),Sh=wi(),wh=ra(),_h=Ea(),kh=nr(),Ch=La(),Ba="mgAniViewLib",Dh=function(r){Th(e,r);function e(t,i){var a=r.call(this,t,i)||this;a.amby=t.amby;var s=i.name,n=s===void 0?"ad":s,l=i.publisherId,d=i.channelId,h=i.playerDivId,y=i.playerDiv,g=y===void 0?null:y,A=i.vastRetry,P=i.errorLimit,E=i.maxrun,T=i.waterfall,L=i.logLevel,W=i.timeout,S=i.soundButton,M=i.pauseButton,R=i.timeLine,K=i.aniviewParams,$=i.nextAdTimeout,te=i.skipoffset,X=i.noCompleteTimeout,ce=i.verifiedSources,xe=i.initSize;return a.inited=!1,a.closed=!1,a.needToCreate=!1,a.name=n,a.playerDivId=h,a.rootElement=t.rootElement,a.playerDiv=g||a.rootElement.querySelector("#".concat(a.playerDivId)),a.resendTime=parseInt(a.amby.get("formatConfig.resendTime"),10),a.mgVideoIndex=a.amby.get("mgVideoIndex"),a.currentImpressions=0,a.errorsNumber=0,a.startRequestSent=!1,a.pauseRequestSent=!1,a.amby.get("formatConfig.forceMute",!1)&&(a.noSoundComponent=new wh.NoSoundComponent(a.amby,{playerDiv:a.playerDiv,adName:n})),a.amby.get("formatConfig.detectUnmute",!0)&&(a.unmuteDetectComponent=new _h.UnmuteDetectComponent(t)),a.amby.get("formatConfig.hideConsole",!1)&&window.location.href.indexOf("mgwdebug")===-1&&(a.proxyConsoleComponent=new Ch.ProxyConsoleComponent(a.amby,{playerDiv:a.playerDiv})),te&&(a.skipObserver=new MutationObserver(function(pe){pe.forEach(function(fe){fe.type==="attributes"&&fe.target.style&&fe.target.style.display!=="none"&&a.amby.dispatch(le.upsertState({skipBtn:{skipable:!0}}))})})),a.eventStack={},a.config={publisherId:l,channelId:d,width:100,height:0,HD:!1,autoPlay:!1,loop:a.amby.get("formatConfig.loop",!1),mode:0,soundButton:S??!0,pauseButton:M??!0,timelinemode:R||"bottom",skip:!!te,skipTimer:parseInt(te,10)||!1,closeButton:!1,position:a.playerDivId,positionDiv:a.playerDiv,logLevel:parseInt(L,10)||0,antihjck:!0,lastFrame:!a.amby.get("formatConfig.loop",!1)},E&&(a.config.maxrun=E),a.errorLimit=parseInt(P,10)||1,a.config.errorLimit=a.errorLimit,A&&(a.config.vastRetry=parseInt(A,10)),a.verifiedSources=[],ce&&(a.verifiedSources=ce),xe&&(a.initSize=xe),Array.isArray(T)&&T.length>0&&(a.config.updatewaterfall=function(pe){Array.isArray(pe)&&pe.length>0&&pe.forEach(function(fe,Ve){T[Ve]&&(fe.type="vast",fe.url=T[Ve])})}),a.loadAdSrcNoUiList(),a.config.maximp=a.amby.get("formatConfig.maximp",5),a.config=Wt.Helpers.mergeObjects(a.config,K||{}),a.stopRequestTime=W,a.nextAdTimeoutTime=$||10,a.noCompleteTimeoutTime=X||60,a.amby.dispatch(le.setAdInit(null,a.name)),a.amby.addSubListener("".concat(a.name,".init"),function(){[Te.states.INIT_NEEDED,Te.states.INIT_RESET].indexOf(a.amby.get("".concat(a.name,".init")))>-1&&(0,Ie.mgDebug)("Ad starts search."),Wt.Helpers.vitalCall(function(){return a.initPlayer()},a.amby.get("isVital",!0))}),a.amby.addTriggerListener("".concat(a.name,".actionPlay"),function(){var pe=a.amby.get("".concat(a.name,".status"));a.player&&(!pe||pe!==Te.states.STATUS_PLAYING)&&!a.startRequestSent&&(a.apiAction=!0,a.startRequestSent=!0,!pe||pe===Te.states.STATUS_READY?((0,Ie.mgDebug)("Aniview: StartAd requested."),a.player.startAd()):((0,Ie.mgDebug)("Aniview: ResumeAd requested."),a.player.resume())),(!a.player||!pe||[Te.states.STATUS_READY,Te.states.STATUS_PAUSED].indexOf(pe)===-1)&&(a.startRequested=!0)}),a.amby.addTriggerListener("".concat(a.name,".actionPause"),function(){var pe=a.amby.get("".concat(a.name,".status"));a.player&&pe===Te.states.STATUS_PLAYING&&!a.pauseRequestSent&&(a.apiAction=!0,a.pauseRequestSent=!0,a.player.pause())}),a.amby.addTriggerListener("".concat(a.name,".actionStop"),function(){var pe=a.amby.get("".concat(a.name,".status"));pe!==Te.states.STATUS_STOPPED&&(a.apiAction=!0,a.close())}),a.amby.addTriggerListener("".concat(a.name,".actionClose"),function(){a.amby.dispatch(le.setAdVisible(!1,a.name)),a.player&&[Te.states.STATUS_PLAYING,Te.states.STATUS_PAUSED].indexOf(a.amby.get("".concat(n,".status")))>-1&&(a.skipApiAction=!0,a.close())}),a.amby.addTriggerListener("ad.mute",function(){a.mute()}),a.amby.addTriggerListener("ad.unmute",function(){a.unmute()}),a.amby.addTriggerListener("ad.resize",function(){a.onResize()}),a.amby.addSubListener("popup.visible",function(){a.onPlayerChangedLocation()}),a.amby.get("formatConfig.moveToBody",!1)&&a.amby.addSubListener("player.isSticky",function(){a.onPlayerChangedLocation()}),a.amby.addSubListener("ad.mouseOver",function(){a.player&&a.amby.get("ad.isUnmuteOnHover")&&a.amby.get("ad.containerClicked")&&a.amby.get("deviceType")!=="mobile"&&a.amby.get("deviceType")!=="tablet"&&(a.amby.get("ad.mouseOver")?a.unmute():a.mute())}),window.addEventListener("keydown",function(pe){if(!a.eventStackSent&&pe.ctrlKey&&pe.shiftKey&&pe.code==="KeyA"&&(a.eventStackSent=!0,a.unmuteDetectComponent)){var fe=a.unmuteDetectComponent.getUnMutedElements(),Ve=a.unmuteDetectComponent.findIframes(document.body),F={};Object.entries(a.eventStack).forEach(function(Z){var Y=Z[0],ti=Z[1],Ut=[];ti.forEach(function(lt){Ut.push(lt.event)}),F[Y]=Ut});var Q={video:fe,iframes:Ve,campaigns:F};(0,Ie.mgDebug)(Q),a.amby.dispatch(le.upsertState({soundNotify:JSON.stringify(Q)}))}}),a}return e.prototype.initPlayer=function(){var t=this;switch(this.amby.get("".concat(this.name,".init"))){case Te.states.INIT_NEEDED:if(this.amby.dispatch(le.setAdInit(Te.states.INIT_IN_PROGRESS,this.name)),document.getElementById(Ba)){window.avPlayer?this.amby.dispatch(le.setAdInit(Te.states.INIT_RESET,this.name)):document.getElementById(Ba).getAttribute("data-loaded")?(this.createPlayer(),this.amby.dispatch(le.setAdInit(Te.states.INIT_DONE,this.name)),this.inited=!0):document.getElementById(Ba).addEventListener("load",function(){t.createPlayer(),t.amby.dispatch(le.setAdInit(Te.states.INIT_DONE,t.name)),t.inited=!0});return}this.stopRequestTime&&this.stopRequestTime>0&&(this.stopRequestTimeout=setTimeout(function(){(0,Ie.mgDebug)("Aniview StopRequestTimeout"),t.passback(),t.reset(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_ERROR,t.name))},this.stopRequestTime*1e3)),new Image().src="https://track1.aniview.com/track?pid=".concat(this.config.publisherId)+"&cid=".concat(this.config.channelId,"&e=playerLoaded&cb=").concat(Date.now()),this.script=document.createElement("script"),this.script.src=this.amby.get("ad.playerUrl")||"https://player.aniview.com/script/6.1/aniview.js",this.script.id=Ba,this.script.addEventListener("load",function(){t.script.setAttribute("data-loaded",!0),t.createPlayer(),t.amby.dispatch(le.setAdInit(Te.states.INIT_DONE,t.name)),t.inited=!0}),document.head.appendChild(this.script);break;case Te.states.INIT_RESET:this.amby.dispatch(le.setAdInit(Te.states.INIT_IN_PROGRESS,this.name)),this.stopRequestTimeout&&(clearTimeout(this.stopRequestTimeout),this.stopRequestTimeout=null),this.stopRequestTime&&this.stopRequestTime>0&&(this.stopRequestTimeout=setTimeout(function(){(0,Ie.mgDebug)("Aniview StopRequestTimeout"),t.passback(),t.reset(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_ERROR,t.name))},this.stopRequestTime*1e3)),this.createPlayer(),this.amby.dispatch(le.setAdInit(Te.states.INIT_DONE,this.name));break;case Te.states.INIT_STOP:this.reset();break}},e.prototype.createPlayer=function(){var t=this,i,a;if(!this.amby.get("cappingData")){this.initRequested=!0,this.cappingDataListener||(this.amby.addSubListener("cappingData",function(){t.amby.get("cappingData")&&t.initRequested&&(t.initRequested=!1,t.createPlayer())}),this.cappingDataListener=!0);return}if(this.closed||[Te.states.STATUS_PLAYING,Te.states.STATUS_PAUSED,Te.states.STATUS_READY].indexOf(this.amby.get("".concat(this.name,".status")))>-1){this.needToCreate=!0;return}if((0,Ie.mgDebug)("Creating aniview player."),this.amby.dispatch(le.setAdStatus(Te.states.STATUS_INIT,this.name)),this.currentImpressions=0,this.errorsNumber=0,this.initSize)this.config.width=(i=this.initSize.width)!==null&&i!==void 0?i:this.amby.get("ad.size.width",300),this.config.height=(a=this.initSize.height)!==null&&a!==void 0?a:this.amby.get("ad.size.height",300);else{var s=this.amby.get("ad.size",{width:300,height:169});this.config.width=s.width,this.config.height=s.height}this.config.autoSound=!this.amby.get("ad.initMuted",!0),this.config.ref1=this.getRef1(),(this.amby.get("formatConfig.forceMute",!1)||!Wt.Helpers.iOSversion())&&(this.config.autoSound=!1),this.player=new window.avPlayer(this.config),this.player.onLoad=function(){(0,Ie.mgDebug)("Aniview onLoad event."),t.resetTimeout&&(clearTimeout(t.resetTimeout),t.resetTimeout=null),t.skipButton=t.playerDiv.querySelector("#skip-btn"),t.skipButton.innerHTML=Wt.Helpers.getTranslated(t.amby,"skipText","Skip"),t.skipObserver&&(t.skipObserver.disconnect(),t.skipObserver.observe(t.skipButton,{attributes:!0})),t.initSize&&t.onResize(),t.amby.get("formatConfig.forceMute",!1)&&(t.soundButton=t.playerDiv.querySelector("#sound"),t.soundButton&&t.soundButton.addEventListener("click",function(){t.amby.dispatch(le.upsertAdState({soundButtonClicked:!0}))})),t.startRequestSent=!1,t.amby.dispatch(le.setAdStatus(Te.states.STATUS_READY,t.name)),t.startRequested&&(t.startRequested=!1,t.amby.dispatch(le.setTriggerToTrue("".concat(t.name,".actionPlay"))))},this.player.onPlay=function(n){var l,d,h=n.asid,y=n.videoUrl,g=n.clickThrough;(0,Ie.mgDebug)("Aniview onPlay event.");var A=(0,Wt.getInObject)(window,["_mgAdSrcNoUi"]);Array.isArray(A)&&A.indexOf(h)!==-1?((0,Ie.mgDebug)("Controls hided for AdSource ".concat(h)),Wt.Helpers.addClass(t.playerDiv,"adplayer-no-ui")):t.playerDiv.classList.contains("adplayer-no-ui")&&((0,Ie.mgDebug)("Controls showed for AdSource ".concat(h)),Wt.Helpers.removeClass(t.playerDiv,"adplayer-no-ui")),t.updateEventStack(h,{time:new Date().toISOString().replace("Z","MG"),adTag:h,event:"play",cid:t.amby.get("widgetId"),videoUrl:y,clickThrough:g}),t.amby.dispatch(le.upsertState({skipBtn:{skipable:!1}})),t.errorsNumber=0,t.stopRequestTimeout&&(clearTimeout(t.stopRequestTimeout),t.stopRequestTimeout=null),t.nextAdTimeout&&(clearTimeout(t.nextAdTimeout),t.nextAdTimeout=null);var P=g;g&&(P=g.toString().match(/[?&]_redirect=(.+)(&|$)/m),P?(l=P,P=l[1]):P=g),P&&(P=P.toString().replace(/(^\s+|\s+$)/gm,""));var E=y;if(y&&(E=y.toString().replace(/(^\s+|\s+$)/gm,"")),t.amby.dispatch(le.upsertAdState({adTag:h,videoUrl:E,vpaid:!0,adPlayer:1,adClickUrl:decodeURIComponent(P)})),t.apiAction||t.amby.dispatch(le.upsertPlayerState({isPlayingOnVisible:!0})),t.apiAction=!1,!t.amby.get("ad.initMuted",!0)&&!t.amby.get("formatConfig.forceMute",!1)&&!Wt.Helpers.iOSversion()?t.unmute():t.player.muted||t.mute(),t.amby.dispatch(le.upsertState((d={},d[t.name]={linkBtn:{link:g},clickCover:{link:g}},d))),t.startRequestSent=!1,t.amby.dispatch(le.upsertAdState({currentImpressions:t.amby.get("ad.currentImpressions",0)+1})),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_PLAYING,t.name)),t.noCompleteTimeoutTime&&((0,Ie.mgDebug)("Creating noCompleteTimeout"),t.noCompleteTimeoutTimer=0,t.runNoCompleteInterval()),t.amby.get("formatConfig.moveToBody",!1)){var T=t.playerDiv.querySelectorAll("video");T=Array.apply(null,T),T.forEach(function(L){L.paused||(t.currentVideoElem=L)})}t.resizeNeeded&&t.onResize()},this.player.onPlay100=function(){t.noCompleteTimeoutTime&&t.noCompleteTimeout&&((0,Ie.mgDebug)("Removing noCompleteTimeout"),clearInterval(t.noCompleteTimeout),t.noCompleteTimeout=null),t.amby.dispatch(le.setTriggerToTrue("ad.complete")),t.checkMuted(),t.currentImpressions+=1,!t.amby.get("formatConfig.loop",!1)||t.config.maximp<=t.currentImpressions?(t.close(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_STOPPED,t.name))):(t.nextAdTimeout&&(clearTimeout(t.nextAdTimeout),t.nextAdTimeout=null),t.nextAdTimeout=setTimeout(function(){t.amby.get("ad.status")===Te.states.STATUS_STOPPED&&((0,Ie.mgDebug)("Next AD Timeout."),t.reset(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_STOPPED,t.name)))},t.nextAdTimeoutTime*1e3))},this.player.onPlay25=function(){t.amby.dispatch(le.upsertAdState({position:Math.ceil(t.player.getAdDuration()/4),duration:t.player.getAdDuration()}))},this.player.onPlay50=function(){t.amby.dispatch(le.upsertAdState({position:Math.ceil(t.player.getAdDuration()/2),duration:t.player.getAdDuration()}))},this.player.onPlay75=function(){t.amby.dispatch(le.upsertAdState({position:Math.ceil(t.player.getAdDuration()/4*3),duration:t.player.getAdDuration()}))},this.player.onResume=function(){t.apiAction||t.amby.dispatch(le.upsertPlayerState({isPlayingOnVisible:!0})),t.noCompleteTimeoutTime&&((0,Ie.mgDebug)("Resuming noCompleteTimeout"),t.runNoCompleteInterval()),t.apiAction=!1,t.startRequestSent=!1,t.amby.dispatch(le.setAdStatus(Te.states.STATUS_PLAYING,t.name))},this.player.onPause=function(){!t.apiAction&&!t.skipApiAction&&t.amby.dispatch(le.upsertPlayerState({isPlayingOnVisible:!1})),t.noCompleteTimeoutTime&&((0,Ie.mgDebug)("Pausing noCompleteTimeout"),t.noCompleteTimeout&&(clearInterval(t.noCompleteTimeout),t.noCompleteTimeout=null)),t.apiAction=!1,t.skipApiAction=!1,t.pauseRequestSent=!1,t.amby.dispatch(le.setAdStatus(Te.states.STATUS_PAUSED,t.name))},this.player.onError=function(n){t.errorsNumber+=1,(t.errorsNumber>t.errorLimit||n&&n.errorlimit)&&(t.noCompleteTimeoutTime&&t.noCompleteTimeout&&((0,Ie.mgDebug)("Removing noCompleteTimeout"),clearInterval(t.noCompleteTimeout),t.noCompleteTimeout=null),t.passback(),t.reset(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_ERROR,t.name))),t.resendTime&&(t.resendLimit||(t.resendLimit=parseInt(t.amby.get("formatConfig.resendLimit"),10)||1),(0,Ie.mgDebug)("No ads found. Retry in ".concat(t.resendTime," sec.")+" Iteration number: ".concat(t.amby.get("".concat(t.name,".resendNumber"),0)+1)),!t.resetTimeout&&t.amby.get("".concat(t.name,".resendNumber"),0)<t.resendLimit?t.resetTimeout=setTimeout(function(){var l;(0,Ie.mgDebug)("Resetting player..."),t.resetTimeout=null,t.amby.dispatch(le.upsertState((l={},l[t.name]={resendNumber:t.amby.get("".concat(t.name,".resendNumber"),0)+1},l))),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_INIT,t.name)),t.amby.dispatch(le.setAdInit(Te.states.INIT_RESET,t.name))},t.resendTime*1e3):t.resendLimit&&(0,Ie.mgDebug)("Iteration limit is ".concat(t.resendLimit,". Iteration aborted.")))},this.player.onClose=function(){t.noCompleteTimeoutTime&&t.noCompleteTimeout&&((0,Ie.mgDebug)("Removing noCompleteTimeout"),clearInterval(t.noCompleteTimeout),t.noCompleteTimeout=null),t.checkMuted(),t.reset(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_STOPPED,t.name))},this.player.onSkip=function(){t.noCompleteTimeoutTime&&t.noCompleteTimeout&&((0,Ie.mgDebug)("Removing noCompleteTimeout"),clearInterval(t.noCompleteTimeout),t.noCompleteTimeout=null),t.checkMuted(),t.amby.dispatch(le.setTriggerToTrue("ad.skip"))},this.player.onMute=function(){(0,Ie.mgDebug)("Aniview AD muted."),!t.apiMuteAction&&(!t.noSoundComponent||t.amby.get("ad.soundButtonClicked",!1))&&(t.amby.dispatch(le.upsertAdState({isUnmuteOnHover:!1,initMuted:!0})),t.amby.dispatch(le.setTriggerToTrue("player.mute")),t.amby.dispatch(le.setTriggerToTrue("ad.mute"))),t.apiMuteAction=!1,t.amby.dispatch(le.setAdMuted(!0))},this.player.onUnmute=function(){(0,Ie.mgDebug)("Aniview AD unmuted."),!t.apiMuteAction&&(!t.noSoundComponent||t.amby.get("ad.soundButtonClicked",!1))&&(t.amby.dispatch(le.upsertAdState({isUnmuteOnHover:!0,initMuted:!1})),t.amby.dispatch(le.setTriggerToTrue("player.unmute")),t.amby.dispatch(le.setTriggerToTrue("ad.unmute"))),t.apiMuteAction=!1,t.amby.dispatch(le.setAdMuted(!1));var n=t.amby.get("ad.adTag");t.updateEventStack(n,{time:new Date().toISOString().replace("Z","MG"),adTag:n,event:"unmute",cid:t.amby.get("widgetId")})},this.player.onClick=function(){t.amby.dispatch(le.setTriggerToTrue("ad.clicked"))},this.player.onInventory=function(){(0,Ie.mgDebug)("Aniview onInventory fired."),t.amby.dispatch(le.setTriggerToTrue("ad.inventory"))},this.player.onEvent=function(n,l,d){if((0,Ie.mgDebug)("AniView onEvent: ".concat(n," ").concat(l," ").concat(JSON.stringify(d))),t.updateEventStack(l,{time:new Date().toISOString().replace("Z","MG"),adTag:l,event:n,cid:t.amby.get("widgetId"),params:JSON.stringify(d)}),n==="startAd"){var h=(0,Wt.getInObject)(window,["_mgAdTrSrc"]);(t.verifiedSources.indexOf(l)>-1||Array.isArray(h)&&h.indexOf(l)>-1)&&(t.amby.dispatch(le.upsertAdState({adTag:l,adPlayer:1})),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_PLAYING)),t.amby.dispatch(le.setAdVisible(!0,t.name)))}},this.player.play(this.config)},e.prototype.onResize=function(){if(this.player){var t=this.amby.get("ad.size",{width:300,height:169});this.player.resize(parseFloat(t.width),parseFloat(t.height))}[Te.states.STATUS_READY,Te.states.STATUS_PLAYING,Te.states.STATUS_PAUSED].indexOf(this.amby.get("".concat(this.name,".status")))===-1&&(this.resizeNeeded=!0)},e.prototype.reset=function(){if(!(this.closed||this.closedTimeout)){for((0,Ie.mgDebug)("Aniview: Deleting AD player.".concat(this.amby.get("ad.adTag")?" Ad source: ".concat(this.amby.get("ad.adTag")):"")),this.close(),this.playerDiv||(this.playerDiv=this.rootElement.querySelector("#".concat(this.config.position)));this.playerDiv.firstChild;)this.playerDiv.removeChild(this.playerDiv.firstChild);var t=document.querySelectorAll("#AVLoader".concat(this.config.position));t=Array.apply(null,t),t.forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),this.startRequestSent=!1,this.pauseRequestSent=!1}},e.prototype.checkMuted=function(){this.player.muted&&this.amby.get("ad.initMuted",!0)?(this.amby.dispatch(le.upsertAdState({initMuted:!0})),this.amby.dispatch(le.setTriggerToTrue("player.mute"))):this.amby.get("ad.initMuted",!0)&&(this.amby.dispatch(le.upsertAdState({initMuted:!1})),this.amby.dispatch(le.setTriggerToTrue("player.unmute")))},e.prototype.onPlayerChangedLocation=function(){if(this.amby.get("player.isAdPlaying",!1)&&this.player&&this.amby.get("".concat(this.name,".status"))===Te.states.STATUS_PLAYING&&this.amby.get("formatConfig.inlinePlacement"))if(this.currentVideoElem&&this.currentVideoElem.paused){var t=this.currentVideoElem.play();t!==void 0&&t.catch(function(i){(0,Ie.mgDebug)("ERROR: ".concat(i.message))})}else this.player.resume()},e.prototype.mute=function(){var t=this;Wt.Helpers.vitalCall(function(){t.player&&!t.player.muted&&t.player.getAdVolume()>0&&((0,Ie.mgDebug)("Aniview AD mute request sent."),t.apiMuteAction=!0,t.player.mute())},this.amby.get("isVital",!0))},e.prototype.unmute=function(){this.player&&this.player.muted&&this.player.getAdVolume()===0&&((0,Ie.mgDebug)("Aniview AD unmute request sent."),this.apiMuteAction=!0,this.player.unmute())},e.prototype.close=function(){var t=this;this.player&&((0,Ie.mgDebug)("AD closing... Ad source: ".concat(this.amby.get("ad.adTag"))),this.amby.dispatch(le.upsertAdState({adTag:null})),this.player.close(),this.closed=!0,this.closedTimeout||(this.closedTimeout=setTimeout(function(){(0,Ie.mgDebug)("AD closed."),t.closedTimeout=null,t.closed=!1,t.needToCreate&&(t.needToCreate=!1,t.createPlayer())},3e3)))},e.prototype.passback=function(){if(this.amby.get("passback",!1)){this.amby.dispatch(le.setTriggerToTrue("ad.passback"));try{Wt.Helpers.createScriptAndRun("Passback_".concat(this.amby.get("mgVideoIndex")),this.amby.get("passback",!1))}catch(t){(0,Ie.mgDebug)(t)}}},e.prototype.loadAdSrcNoUiList=function(){var t=this.amby.get("libConfig.adSrcNoUiUrlTemplate"),i=t.replace("{{DOMAIN}}",this.amby.get("subnetDomain","")),a=document.location.protocol;a=a.indexOf("http")===0?a:"https:";var s="".concat(a).concat(i),n=new Sh.Loader({adSrcNoUi:{url:s,exists:"typeof window._mgAdSrcNoUi !== 'undefined'"}},function(){});n.checkLoaded()},e.prototype.runNoCompleteInterval=function(){var t=this;this.noCompleteTimeout||(this.noCompleteTimeout=setInterval(function(){t.noCompleteTimeoutTimer+=1,t.noCompleteTimeoutTimer>=(t.player.getAdDuration()+t.noCompleteTimeoutTime)*10&&((0,Ie.mgDebug)("noCompleteTimeout on ".concat(t.noCompleteTimeoutTime," sec of waiting")),clearInterval(t.noCompleteTimeout),t.noCompleteTimeout=null,t.reset(),t.amby.dispatch(le.setAdStatus(Te.states.STATUS_STOPPED,t.name)))},100))},e.prototype.updateEventStack=function(t,i){this.eventStack[t]||(this.eventStack[t]=[]),this.eventStack[t].length>=20&&this.eventStack[t].shift(),this.eventStack[t].push(i)},e}(kh.AniviewBase);Pi.AniViewComponent=Dh});var fo=re(Ma=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ma,"__esModule",{value:!0});Ma.TeaserComponent=void 0;var Ei=De(),Ih=we(),mo=Oe(),Ph=function(){function r(e,t,i){var a=this;(0,mo.mgDebug)("Init TeaserComponent ".concat(i)),this.amby=e,this.teaser=t,this.linkElem=this.teaser.querySelector(".mcimg > a"),this.linkElem&&this.linkElem.removeAttribute("href"),this.index=i,this.amby.get("teasers")||this.amby.dispatch(Ei.upsertState({teasers:[]})),this.amby.dispatch(Ei.upsertTeaser({index:this.index,teaser:{inSight:!1,mouseOver:!1,clicked:!1}})),this.observer=Ih.Helpers.onVisible(this.teaser,function(s){(0,mo.mgDebug)("Teaser is ".concat(s?"in":"out of"," sight")),a.amby.dispatch(Ei.upsertTeaser({index:a.index,teaser:{inSight:s}}))}),this.addListeners()}return r.prototype.addListeners=function(){var e=this;this.teaser.addEventListener("click",function(){e.amby.dispatch(Ei.setTriggerToTrue("teasers.".concat(e.index,".clicked")))}),this.teaser.addEventListener("mouseenter",function(){e.amby.dispatch(Ei.upsertTeaser({index:e.index,teaser:{mouseOver:!0}}))}),this.teaser.addEventListener("mouseleave",function(){e.amby.dispatch(Ei.upsertTeaser({index:e.index,teaser:{mouseOver:!1}}))}),this.amby.addSubListener("teasers.".concat(this.index,".title"),function(){var t=e.amby.get("teasers.".concat(e.index,".title"),""),i=e.teaser.querySelector(".mctitle a");i&&(i.text=t)})},r}();Ma.TeaserComponent=Ph});var Wa=re(Ra=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ra,"__esModule",{value:!0});Ra.WidgetComponent=void 0;var At=De(),lr=we(),Eh=fo(),cr=Oe(),Ah=function(){function r(e,t){t===void 0&&(t=null);var i=this;(0,cr.mgDebug)("WidgetComponent initiating."),this.amby=e.amby,this.widgetBlock=e.block,this.callback=t,this.videoTeasers=[],this.linkElems=[],this.playerTeaserIndex=null,lr.Helpers.onVisible(this.widgetBlock,function(a){i.amby.dispatch(At.upsertState({widget:{inSight:a}}))}),this.teasers=this.widgetBlock.querySelectorAll(".mgline"),this.teasers.length===0&&this.callback?["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name"))>-1&&["above","below","over"].indexOf(this.amby.get("formatConfig.adsPlace"))<0?this.fillTeasers():(this.addedNodes=[],this.observer=this.getObserver(function(a){i.waitForTeasers(a)}),this.observer.observe(this.widgetBlock,{childList:!0,subtree:!0})):this.fillTeasers(),(0,cr.mgDebug)("WidgetComponent initiated.")}return r.prototype.fillTeasers=function(){var e=this;this.teasers.length===0&&(this.teasers=this.widgetBlock.querySelectorAll(".mgline")),this.inlinePlacement=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10);for(var t=0;t<this.teasers.length;t++){var i=this.teasers[t];if(i.className.indexOf("vrline")!==-1){var a=this.videoTeasers.length;this.inlinePlacement!==null&&this.inlinePlacement===a+1&&(this.playerTeaserIndex=t),this.videoTeasers.push(new Eh.TeaserComponent(this.amby,i,a)),this.linkElems.push()}}var s=this.widgetBlock.querySelectorAll(".image-with-text>.mcimg img"),n=!0;if(this.teaserImagesLoaded=[],s&&s.length>0&&(s=Array.apply(null,s),s.forEach(function(l,d){e.teaserImagesLoaded.push(l.complete),l.complete||(n=!1,l.addEventListener("load",function(){e.teaserImagesLoaded[d]=!0,e.amby.dispatch(At.setTriggerToTrue("widget.imageLoaded")),e.teaserImagesLoaded.reduce(function(h,y){return h&&y})&&e.amby.dispatch(At.upsertState({widget:{allImagesLoaded:!0}}))}))})),n&&this.amby.dispatch(At.upsertState({widget:{allImagesLoaded:!0}})),this.playerTeaserIndex!==null)this.amby.dispatch(At.upsertState({widget:{playerTeaserIndex:this.playerTeaserIndex}}));else if(this.inlinePlacement!==void 0&&["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name"))===-1){(0,cr.mgDebug)("Empty WidgetComponent.playerTeaserIndex");return}this.listenersAdded||(this.listenersAdded=!0,this.addListeners(),this.callback&&setTimeout(function(){e.callback()},0))},r.prototype.addListeners=function(){var e=this,t=null,i=null;typeof document.mozHidden<"u"?(t="mozHidden",i="mozvisibilitychange"):typeof document.msHidden<"u"?(t="msHidden",i="msvisibilitychange"):typeof document.webkitHidden<"u"?(t="webkitHidden",i="webkitvisibilitychange"):typeof document.hidden<"u"&&(t="hidden",i="visibilitychange"),t!=null&&i!=null&&document.addEventListener(i,function(){document[t]?(e.blurred=!0,e.amby.dispatch(At.setWidgetBlurred(!0))):(e.blurred=!1,e.amby.dispatch(At.setWidgetBlurred(!1)))}),window.addEventListener("blur",function(){e.blurred=!0,setTimeout(function(){(!document.activeElement||document.activeElement.tagName!=="IFRAME"&&!document.activeElement.shadowRoot)&&e.amby.dispatch(At.setWidgetBlurred(!0))},0)}),window.addEventListener("focus",function(){e.blurred=!1,e.amby.dispatch(At.setWidgetBlurred(!1))}),document.body.addEventListener("mouseenter",function(){document.activeElement&&document.activeElement.tagName==="IFRAME"&&e.blurred&&e.amby.dispatch(At.setWidgetBlurred(!1))}),document.body.addEventListener("mouseleave",function(){document.activeElement&&document.activeElement.tagName==="IFRAME"&&e.blurred&&e.amby.dispatch(At.setWidgetBlurred(!0))})},r.prototype.getObserver=function(e){var t=this;return new MutationObserver(function(i){i.forEach(function(a){if(a.type==="childList"&&a.addedNodes.length){var s=Array.prototype.slice.call(a.addedNodes);s=s.filter(function(n){return n.nodeName!=="#text"}),s.length>0&&(t.addedNodes.push(s),e(s))}})})},r.prototype.waitForTeasers=function(e){var t=this;e.forEach(function(i){["outstream","attachedWidget"].indexOf(t.amby.get("formatConfig.name"))>-1?(i.className&&i.className.indexOf("mgbox")>-1||i.querySelector&&i.querySelector(".mgbox"))&&(t.amby.get("formatConfig.adsPlace","above")!=="over"||t.widgetBlock.querySelectorAll(".mgline").length>0)&&(t.fillTeasers(),t.observer.disconnect(),t.boxesObserver=t.getObserver(function(a){t.waitForBoxes(a)}),t.boxesObserver.observe(t.widgetBlock,{childList:!0,subtree:!0})):(i.className&&i.className.indexOf("vrline")>-1&&i.querySelector("img")||lr.Helpers.getParentBlockByClass(i,"vrline")&&lr.Helpers.getParentBlockByClass(i,"vrline").querySelector("img")||i.querySelector&&i.querySelector(".vrline")&&i.querySelector(".vrline").querySelector("img"))&&(t.fillTeasers(),t.observer.disconnect())})},r.prototype.waitForBoxes=function(e){var t=this;e.forEach(function(i){(i.className&&i.className.indexOf&&i.className.indexOf("mgbox")>-1||i.querySelector&&i.querySelector(".mgbox")&&i.parentNode===t.widgetBlock)&&(t.amby.get("widget.allImagesLoaded",!1)?t.amby.dispatch(At.setTriggerToTrue("widget.newBox")):t.fillTeasers())})},r}();Ra.WidgetComponent=Ah});var Ha=re(Na=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Na,"__esModule",{value:!0});Na.FormatBase=void 0;var ht=Ne(),je=De(),st=we(),rt=Oe(),hi="visibleNotPause",Lh="visibleOnly",Bh=function(){function r(e){this.rootElement=(0,st.getInObject)(e,["mgRec","rootElement"]),this.widgetId=(0,st.getInObject)(e,["mgRec","config","parentCid"],(0,st.getInObject)(e,["mgRec","cid"])),this.siteId=(0,st.getInObject)(e,["mgRec","sid"]),this.mgVideoIndex="".concat(this.widgetId,"_").concat(e.getWidgets().length),this.widget=e,this.widget.rootElement=this.rootElement;var t=(0,st.getInObject)(e,["mgRec","config","qortexGroupId"]);if(t){var i=document.createElement("script"),a=this.rootElement.getRootNode()===window.document?this.rootElement.parentNode.id:this.rootElement.getRootNode().host.id;i.src="https://tags.qortex.ai/bootstrapper?group-id=".concat(t,"&video-container=").concat(a),i.defer=!0,document.head.appendChild(i)}if(this.amby=e.amby,this.config=e.mgRec.config,this.formatConfig=e.formatConfig,this.blockMain=this.widget.block.querySelector(".mgbox"),this.aspectRatio=(this.config.aspectratio||"16:9").match(/(\d+):(\d+)/).reduce(function(g,A,P){return g[["ratio","width","height"][P]]=A,g},{}),this.aspectRatio.width=parseInt(this.aspectRatio.width,10),this.aspectRatio.height=parseInt(this.aspectRatio.height,10),this.aspectRatio.width>0&&this.aspectRatio.height>0||(this.aspectRatio={ratio:"16:9",width:16,height:9}),this.startScroll=this.formatConfig.startScroll,this.startInit=this.formatConfig.startInit,this.pauseOnFocusOut=this.amby.get("formatConfig.pauseOnFocusOut",!0),this.startScroll){var s=this.startScroll.toString().match(/(\d+)%/);if(s&&s[1]){var n=document.body,l=document.documentElement,d=Math.max(n.scrollHeight,n.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight);this.startScrollPixels=Math.floor(d*parseInt(s[1],10)/100),(0,rt.mgDebug)("Site Height: ".concat(d,"px, Start sticky on: ").concat(s[1],"% = ").concat(this.startScrollPixels,"px"))}else this.startScrollPixels=parseInt(this.startScroll,10)}this.calcStartOnScroll(this.widget.block);var h=parseInt((0,st.getInObject)(this.config,["closeButtonEnable"],(0,st.getInObject)(this.formatConfig,["closeButtonEnable"],1)),10),y=(0,st.getInObject)(e,["mgRec","cappingData","dt"],"desktop");this.amby.dispatch(je.upsertState({playlist:e.mgRec.vr_playlist,player:{aspectratio:this.aspectRatio.ratio,muted:!0,playerId:"mgJwPlayer_".concat(this.mgVideoIndex)},widgetId:this.widgetId,siteId:this.siteId,mgVideoIndex:this.mgVideoIndex,templateId:this.config.templateId,uuid:this.config.uuid||"",subid:this.config.subid||0,cappingData:e.mgRec.cappingData,paramsData:e.mgRec.paramsData,subnetDomain:e.mgRec.subnetDomain,countersDomain:e.mgRec.countersDomain,libConfig:e.libConfig,muteBtn:{muted:!0},closeBtn:{enabled:h},adSchedule:this.config.adSchedule,adPlayers:this.config.adPlayers,extLibraries:this.config.extLibraries,cappingInterval:parseInt(this.config.cappingInterval,10)||15,passback:this.config.passback,sensorCid:e.mgRec.cid,lang:this.config.lang,language:e.mgRec.lang,libVer:e.mgRec.lib,ga_id:this.config.ga_id,visibilityKpi:this.config.visibilityKpi,downtimeDetector:this.config.downtimeDetector,downtimeTimeout:this.config.downtimeTimeout,startAdTimeout:this.config.startAdTimeout,autoStart:this.config.autoStart||hi,isVital:this.config.isVital,deviceType:y,animatedArticle:this.config.animatedArticle,sd:e.mgRec.sd,trickyPause:this.config.trickyPause,trickyInstream:this.config.trickyInstream,servLib:e.mgRec.servLib,cxurl:e.mgRec.cxurl,hasBackfill:e.mgRec.hasBackfill,reverseBackfill:this.config.reverseBackfill})),st.Helpers.initClientHintData()}return r.prototype.playOnVisible=function(e){e===void 0&&(e=!0),this.amby.get("ad.status")&&(this.inSight&&e?this.amby.get("player.isPlayingOnVisible",!0)&&!this.focusPaused&&(this.amby.dispatch(je.upsertAdState({startRequested:!0})),this.amby.dispatch(je.setTriggerToTrue("ad.actionPlay"))):this.amby.get("autoStart")===Lh&&this.amby.dispatch(je.setTriggerToTrue("ad.actionPause")))},r.prototype.startOnScroll=function(e){!this.startedByScroll&&this.startScrollPixels&&st.Helpers.getViewTop()>this.startScrollPixels&&!this.isOtherWidgetSticky()&&((0,rt.mgDebug)("Current Scroll: ".concat(st.Helpers.getViewTop(),"px, Starting sticky on: ").concat(this.startScrollPixels,"px")),this.startedByScroll=!0,e())},r.prototype.onWidgetBlurred=function(){var e=this;this.pauseOnFocusOut&&(this.amby.get("widget.blurred",!1)?this.amby.get("player.isAdPlaying",!1)&&this.amby.get("ad.status")===ht.states.STATUS_PLAYING&&this.amby.get("autoStart")!==hi?((0,rt.mgDebug)("adPlayer focused OUT. BASE"),this.focusPaused=!0,this.amby.dispatch(je.setTriggerToTrue("ad.actionPause"))):this.amby.get("player.status")===ht.states.STATUS_PLAYING&&((0,rt.mgDebug)("Player focused OUT. BASE"),this.focusPaused=!0,this.amby.dispatch(je.setTriggerToTrue("player.actionPause"))):this.focusPaused?(this.focusPaused=!1,this.amby.get("player.isAdPlaying",!1)?((0,rt.mgDebug)("adPlayer focused IN. BASE"),this.amby.dispatch(je.setTriggerToTrue("ad.actionPlay"))):((0,rt.mgDebug)("Player focused IN. BASE"),this.amby.dispatch(je.setTriggerToTrue("player.actionPlay"))),this.justFocusedIn=!0,setTimeout(function(){e.justFocusedIn=!1},200)):this.amby.get("autoStart")===hi&&(this.focusPaused=!1,this.amby.get("player.isAdPlaying",!1)&&this.amby.get("ad.status")===ht.states.STATUS_PAUSED?((0,rt.mgDebug)("adPlayer focused IN. BASE"),this.amby.dispatch(je.setTriggerToTrue("ad.actionPlay"))):this.amby.get("player.status")===ht.states.STATUS_PAUSED&&((0,rt.mgDebug)("Player focused IN. BASE"),this.amby.dispatch(je.setTriggerToTrue("player.actionPlay")))))},r.prototype.onAdPlayerBlurred=function(){var e=this;this.pauseOnFocusOut&&(this.amby.get("widget.blurred",!1)&&this.amby.get("ad.status")===ht.states.STATUS_PLAYING&&this.amby.get("autoStart")!==hi?((0,rt.mgDebug)("adPlayer focused OUT. BASE"),this.focusPaused=!0,this.amby.dispatch(je.setTriggerToTrue("ad.actionPause"))):(this.focusPaused||this.amby.get("autoStart")===hi&&this.amby.get("ad.status")===ht.states.STATUS_PAUSED)&&((0,rt.mgDebug)("adPlayer focused IN. BASE"),this.focusPaused=!1,this.amby.dispatch(je.setTriggerToTrue("ad.actionPlay")),this.justFocusedIn=!0,setTimeout(function(){e.justFocusedIn=!1},200)))},r.prototype.onPlayerStatusBase=function(){if(this.pauseOnFocusOut){var e=this.amby.get("player.status");this.justFocusedIn&&e!==ht.states.STATUS_PLAYING&&this.focusPaused&&((0,rt.mgDebug)("Player paused after focusing IN :-( . Base"),this.amby.dispatch(je.setTriggerToTrue("player.actionPlay")),this.focusPaused=!1,this.justFocusedIn=!1),this.amby.get("widget.blurred")&&e===ht.states.STATUS_PLAYING&&((0,rt.mgDebug)("Player tried to play when window not in focus :-( . Base"),this.focusPaused=!0,this.amby.dispatch(je.setTriggerToTrue("player.actionPause")))}},r.prototype.onAdStatusBase=function(){if(this.pauseOnFocusOut){var e=this.amby.get("ad.status");this.justFocusedIn&&e!==ht.states.STATUS_PLAYING&&(this.focusPaused||this.amby.get("autoStart")===hi&&this.amby.get("ad.status")===ht.states.STATUS_PAUSED)&&((0,rt.mgDebug)("adPlayer paused after focusing IN :-( . Base"),this.amby.dispatch(je.setTriggerToTrue("ad.actionPlay")),this.focusPaused=!1,this.justFocusedIn=!1),this.amby.get("widget.blurred")&&e===ht.states.STATUS_PLAYING&&this.amby.get("autoStart")!==hi&&((0,rt.mgDebug)("adPlayer tried to play when window not in focus :-( . Base"),this.focusPaused=!0,this.amby.dispatch(je.setTriggerToTrue("ad.actionPause")))}},r.prototype.onAdClickedTriggerBase=function(){var e=this;this.pauseOnFocusOut&&setTimeout(function(){(0,rt.mgDebug)("adPlayer played after opening new tab with AD :-( . Base"),e.amby.dispatch(je.setTriggerToTrue("ad.actionPause"))},200)},r.prototype.startInitOnVisible=function(){!this.startInitSent&&this.inSight&&(this.startInitSent=!0,this.amby.dispatch(je.setAdInit(ht.states.INIT_NEEDED)))},r.prototype.startInitOnScroll=function(){!this.startInitSent&&st.Helpers.getViewTop()+st.Helpers.getWindowHeight()/2>this.startOnScrollPixels&&(this.startInitSent=!0,(0,rt.mgDebug)("Current Scroll: ".concat(st.Helpers.getViewTop(),"px, Starting code on: ").concat(this.startOnScrollPixels,"px")),this.amby.dispatch(je.setAdInit(ht.states.INIT_NEEDED)))},r.prototype.calcStartOnScroll=function(e){if(this.formatConfig.startOnScroll){var t=e.getBoundingClientRect().top+st.Helpers.getViewTop(),i=this.startOnScrollPixels;this.startOnScrollPixels=Math.floor(t*.51),this.startOnScrollPixels!==i&&(0,rt.mgDebug)("Player Top: ".concat(t,"px, Start searching for ad on: 51% = ").concat(this.startOnScrollPixels,"px"))}},r.prototype.callStartInit=function(){var e=this;this.startInit&&this.startInit!=="onLoad"?(st.Helpers.onVisible(this.adContainerComponent.playerContainer,function(t){e.inSight=t,e.startInitOnVisible()}),this.startInitOnVisible()):this.formatConfig.startOnScroll?(window.addEventListener("scroll",function(){e.calcStartOnScroll(e.adContainerComponent.playerContainer),e.startInitOnScroll()}),this.startInitOnScroll()):this.amby.dispatch(je.setAdInit(ht.states.INIT_NEEDED))},r.prototype.isOtherWidgetSticky=function(){var e=this;return Object.entries(this.amby.get()).reduce(function(t,i){var a=i[0],s=i[1];return t||(0,st.getInObject)(s,["player","isSticky"])&&a!==e.amby.getNS()},!1)&&(0,st.getInObject)(this.amby.get(),["sticky"],!0)},r.prototype.createReInitTimeout=function(){var e=this;this.reinitTimeout&&(clearTimeout(this.reinitTimeout),this.reinitTimeout=null),this.reinitTimeout=setTimeout(function(){(0,rt.mgDebug)("ReinitTimeout"),e.amby.dispatch(je.upsertAdState({reInited:!0})),e.amby.dispatch(je.upsertPlayerState({isPlayingOnVisible:!0})),e.amby.dispatch(je.setAdInit(ht.states.INIT_STOP)),e.amby.dispatch(je.setAdInit(ht.states.INIT_RESET))},this.reInit?this.reInit*1e3:5e3)},r}();Na.FormatBase=Bh});var yo=re(Ga=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ClickThroughComponent=void 0;var go=Ne(),Va=De(),qa=we(),Oh=function(){function r(e,t){this.amby=e,this.container=t,this.elemText=qa.Helpers.getTranslated(this.amby,"clickText","Learn more"),this.widgetId=this.amby.get("widgetId"),this.widgetBlock=qa.Helpers.getParentBlockByClass(this.container,"_mgw_".concat(this.widgetId)),this.elem||this.createElement(),this.addListeners(),this.setClickListener()}return r.prototype.removeElement=function(){this.elem.parentNode.removeChild(this.elem),this.elem=null},r.prototype.createElement=function(){this.widgetBlock&&(this.elem=this.widgetBlock.querySelector("#adLinkButton_".concat(this.widgetId,"_ad"))),this.elem||(this.elem=document.createElement("div"),this.elem.className="adLinkButton",this.elem.id="adLinkButton_".concat(this.widgetId,"_ad"),this.elem.innerText=this.elemText,this.container.appendChild(this.elem))},r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("linkBtn.visible",function(){e.amby.get("linkBtn.visible",!1)?qa.Helpers.addClass(e.elem,"showed"):qa.Helpers.removeClass(e.elem,"showed")}),this.amby.addSubListener("ad.adClickUrl",function(){e.setClickListener()}),this.amby.addTriggerListener("ad.videoEnded",function(){e.removeElement()}),this.amby.addSubListener("ad.status",function(){switch(e.amby.get("ad.status")){case go.states.STATUS_PLAYING:e.amby.get("ad.adClickUrl")&&e.amby.dispatch(Va.upsertState({linkBtn:{visible:!0}}));break;case go.states.STATUS_STOPPED:e.amby.dispatch(Va.upsertState({linkBtn:{visible:!1}}));break}})},r.prototype.setClickListener=function(){var e=this;this.amby.get("ad.adClickUrl")?this.elem.onclick=function(){var t=window.open(e.amby.get("ad.adClickUrl"),"_blank");t&&(e.amby.dispatch(Va.setTriggerToTrue("ad.clicked")),t.focus(),e.amby.dispatch(Va.setTriggerToTrue("ad.actionPause")))}:this.elem.onclick=null},r}();Ga.ClickThroughComponent=Oh});var xo=re(Ua=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ua,"__esModule",{value:!0});Ua.KpiDataManager=void 0;var tt=De(),vo=Oe(),bo=Ne(),Mh=function(){function r(e,t){this.amby=e,this.deletableSubListeners=this.getDeletableSubListenersMap(),this.deletableTriggerListeners=this.getDeletableSubTriggerListenersMap(),this.addListeners(),this.createPlacementObserver(t),this.createAdViewableObserver(t),this.createScrollReachedObserver(t)}return r.prototype.updateKpiCustomData=function(e,t){var i;this.amby.dispatch(tt.upsertState({customDataKpi:(i={},i[e]=t,i)}))},r.prototype.asyncRemoveSubListener=function(e,t){var i=this;setTimeout(function(){i.amby.removeSubListener(e,t)})},r.prototype.asyncRemoveTriggerListener=function(e,t){var i=this;setTimeout(function(){i.amby.removeTriggerListener(e,t)})},r.prototype.getDeletableSubListenersMap=function(){var e=this,t=function(){e.amby.get("widget.blurred",!1)&&e.amby.get("player.InPoint")&&!e.amby.get("player.OutPoint")&&(e.amby.dispatch(tt.upsertState({player:{OutPoint:Date.now()}})),e.amby.dispatch(tt.setTriggerToTrue("widget.exposure")),e.asyncRemoveSubListener("widget.blurred",t))},i=function(){if(e.amby.get("player.InPoint")&&e.amby.get("widget.renderTime")){var y=e.amby.get("player.InPoint")-e.amby.get("widget.renderTime");e.updateKpiCustomData("render_buffer",{renderBufferTime:y>0?y:0}),e.asyncRemoveSubListener("player.InPoint",i),e.addDataCleanListener("player.InPoint","render_buffer")}},a=function(){e.updateKpiCustomData("scroll_buffer",{scrollBufferTime:e.amby.get("player.InPoint")?e.amby.get("player.scrollReached")-e.amby.get("player.InPoint"):0}),e.asyncRemoveSubListener("player.scrollReached",a),e.addDataCleanListener("player.scrollReached","scroll_buffer")},s=function(){e.updateKpiCustomData("exposure",{exposureTime:e.amby.get("player.OutPoint")-e.amby.get("player.InPoint")}),e.asyncRemoveSubListener("player.scrollReached",s),e.addDataCleanListener("player.scrollReached","exposure")},n=function(){e.updateKpiCustomData("ad_viewable",{adViewableTime:Date.now()-e.amby.get("adViewableTimeKpi.lastVideoAdPlayingTime")}),e.asyncRemoveSubListener("widget.adViewable",n),e.addDataCleanListener("widget.adViewable","ad_viewable")},l=function(){e.amby.get("ad.status")===bo.states.STATUS_PLAYING&&(e.amby.dispatch(tt.upsertState({adViewableTimeKpi:{lastVideoAdPlayingTime:Date.now()}})),e.updateKpiCustomData("video_ad_playing",{videoStartDelay:Date.now()-e.amby.get("player.scrollReached")}),e.asyncRemoveSubListener("ad.status",l),e.addDataCleanListener("ad.status","video_ad_playing"))},d=function(){e.amby.dispatch(tt.setTriggerToTrue("sensor.resendAdHashKpi")),e.asyncRemoveSubListener("ad.adHash",d)},h=function(){e.amby.get("ad.loaded")&&e.amby.get("widget.renderTime")&&(e.updateKpiCustomData("ad_loaded_buffer",{loadedBufferTime:Date.now()-e.amby.get("widget.renderTime")}),e.asyncRemoveSubListener("ad.loaded",h),e.addDataCleanListener("ad.loaded","ad_loaded_buffer"))};return{"player.InPoint":i,"widget.renderTime":i,"widget.blurred":t,"player.scrollReached":a,"widget.exposure":s,"widget.adViewable":n,"ad.status":l,"ad.adHash":d,"ad.loaded":h}},r.prototype.getDeletableSubTriggerListenersMap=function(){var e=this,t=function(){e.amby.get("player.scrollReached",!1)&&(e.updateKpiCustomData("vpaid",{impressionDelay:Date.now()-e.amby.get("player.scrollReached")}),e.asyncRemoveTriggerListener("ad.vpaid",t),e.addDataCleanTriggerListener("ad.vpaid","vpaid"))},i=function(){e.amby.get("player.scrollReached",!1)&&(e.updateKpiCustomData("impression",{impressionDelay:Date.now()-e.amby.get("player.scrollReached")}),e.asyncRemoveTriggerListener("ad.impression",i),e.addDataCleanTriggerListener("ad.impression","impression"))};return{"ad.vpaid":t,"ad.impression":i}},r.prototype.addDataCleanTriggerListener=function(e,t){var i=this,a=function(){var s;i.amby.dispatch(tt.upsertState({customDataKpi:(s={},s[t]=null,s)})),setTimeout(function(){i.amby.removeTriggerListener(e,a)})};this.amby.addTriggerListener(e,a)},r.prototype.addDataCleanListener=function(e,t){var i=this,a=function(){var s;i.amby.dispatch(tt.upsertState({customDataKpi:(s={},s[t]=null,s)})),setTimeout(function(){i.amby.removeSubListener(e,a)})};this.amby.addSubListener(e,a)},r.prototype.createPlacementObserver=function(e){var t=this,i=null;this.placementIO=new IntersectionObserver(function(a){var s=a[0]&&a[0].isIntersecting;s&&!t.amby.get("player.InPoint")&&t.amby.dispatch(tt.upsertState({player:{InPoint:Date.now()}})),!s&&!t.amby.get("player.OutPoint")&&i&&(t.amby.dispatch(tt.upsertState({player:{OutPoint:Date.now()}})),t.amby.dispatch(tt.setTriggerToTrue("widget.exposure"))),i=s},{threshold:0}),this.placementIO.observe(e)},r.prototype.createAdViewableObserver=function(e){var t=this,i,a,s=function(){t.amby.get("ad.status")===bo.states.STATUS_PLAYING&&a?i=setTimeout(function(){t.amby.dispatch(tt.setTriggerToTrue("widget.adViewable"))},2e3):clearTimeout(i)};this.adViewableIO=new IntersectionObserver(function(n){a=n[0]&&n[0].isIntersecting,s(),(0,vo.mgDebug)("adViewable intersecting ".concat(a))},{rootMargin:"0px",threshold:.5}),this.amby.addSubListener("ad.status",function(){s()}),this.adViewableIO.observe(e)},r.prototype.createScrollReachedObserver=function(e){var t=this;this.scrollReachedIO=new IntersectionObserver(function(i){var a=i[0]&&i[0].isIntersecting;a&&!t.amby.get("player.scrollReached")&&(t.amby.dispatch(tt.upsertState({player:{scrollReached:Date.now()}})),(0,vo.mgDebug)("Scroll Reached"))},{threshold:.51}),this.scrollReachedIO.observe(e)},r.prototype.addListeners=function(){var e=this,t=function(){e.amby.get("player.InPoint")&&!e.amby.get("player.OutPoint")&&(e.amby.dispatch(tt.upsertState({player:{OutPoint:Date.now()}})),e.amby.dispatch(tt.setTriggerToTrue("widget.exposure")))};window.addEventListener("beforeunload",t),Object.keys(this.deletableSubListeners).forEach(function(i){e.amby.addSubListener(i,e.deletableSubListeners[i])}),Object.keys(this.deletableTriggerListeners).forEach(function(i){e.amby.addTriggerListener(i,e.deletableTriggerListeners[i])}),this.amby.addSubListener("ad.curAdPosition",function(){e.amby.get("ad.curAdPosition")!=="pre"&&(e.placementIO&&e.placementIO.disconnect(),e.adViewableIO&&e.adViewableIO.disconnect(),e.scrollReachedIO&&e.scrollReachedIO.disconnect(),window.removeEventListener("beforeunload",t),Object.keys(e.deletableSubListeners).forEach(function(i){e.amby.removeSubListener(i,e.deletableSubListeners[i])}),Object.keys(e.deletableTriggerListeners).forEach(function(i){e.amby.removeTriggerListener(i,e.deletableTriggerListeners[i])}),e.amby.dispatch(tt.upsertState({player:{InPoint:null}})),e.amby.dispatch(tt.upsertState({player:{OutPoint:null}})),e.amby.dispatch(tt.upsertState({player:{scrollReached:null}})),e.amby.dispatch(tt.upsertState({adViewableTimeKpi:null})),e.amby.dispatch(tt.deleteProperty("customDataKpi")))})},r}();Ua.KpiDataManager=Mh});var oa=re(za=>{"use strict";w();_();k();C();D();I();Object.defineProperty(za,"__esModule",{value:!0});za.AdContainerComponent=void 0;var Rh=Ne(),ja=De(),ui=we(),Wh=yo(),Nh=Oe(),Hh=xo(),Vh=function(){function r(e,t,i,a){i===void 0&&(i="ad"),a===void 0&&(a="below");var s=this;this.amby=e,this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.widgetId=this.amby.get("widgetId"),this.position=a,this.playerDiv=document.createElement("div"),this.playerContainer=document.createElement("div"),this.playerDiv.id="mgAdPlayerDiv_".concat(this.mgVideoIndex).concat(i!=="ad"?"_".concat(i.replace(/ /g,"_")):""),this.playerDiv.className="mgAdPlayerDiv adPlayerDiv",this.playerDiv.oncontextmenu=function(d){d.preventDefault()},this.playerContainer.appendChild(this.playerDiv),this.playerContainer.id="mgAdPlayerContainerDiv_".concat(this.mgVideoIndex)+"".concat(i!=="ad"?"_".concat(i.replace(/ /g,"_")):"");var n=this.amby.get("paramsData.isSmart",!1)?"smart":"",l=this.amby.get("formatConfig.name","native");l==="attachedWidget"&&(l="outstream"),l==="native"&&this.amby.get("formatConfig.performance",!1)&&(l="performance"),this.playerContainer.className="mgAdPlayerContainerDiv "+"adPlayerContainerDiv ".concat(n," mgAdPlayerFormat-").concat(l),i!=="ad"&&ui.Helpers.addClass(this.playerContainer,"partial"),this.appendPlayerContainer(t),i==="ad"&&(ui.Helpers.onVisible(this.playerContainer,function(d){s.inSight=d,s.inSight||s.amby.get("player.isSticky",!1)?s.amby.dispatch(ja.setAdInSight(!0)):s.amby.dispatch(ja.setAdInSight(!1))},this.amby.get("formatConfig.visiblePart",1),this.amby.get("formatConfig.hiddenPart",.5)),parseFloat(this.amby.get("formatConfig.preheat"))&&this.createPreheatObserver(),this.amby.get("visibilityKpi")&&(this.kpiManager=new Hh.KpiDataManager(this.amby,this.playerContainer))),this.playerContainer.addEventListener("click",function(d){d.target.id!=="timeline"&&s.amby.dispatch(ja.upsertAdState({containerClicked:!0})),d.cancelBubble=!0}),this.amby.addSubListener("ad.init",function(){s.amby.get("ad.init")===Rh.states.INIT_DONE&&s.amby.get("ad.enableCTA",!1)&&(s.clickThroughButton?s.clickThroughButton.createElement():s.clickThroughButton=new Wh.ClickThroughComponent(s.amby,s.playerDiv))}),this.amby.addSubListener("".concat(i,".visible"),function(){s.amby.get("".concat(i,".visible"))?(ui.Helpers.addClass(s.playerDiv,"showed"),ui.Helpers.addClass(s.playerContainer,"showed")):(ui.Helpers.removeClass(s.playerDiv,"showed"),ui.Helpers.removeClass(s.playerContainer,"showed"))})}return r.prototype.applyPlayerSize=function(e,t){t===void 0&&(t=!1),e&&(this.playerContainer&&(t?(this.playerContainer.style.removeProperty("top"),this.playerContainer.style.removeProperty("left"),this.playerContainer.style.removeProperty("width")):(this.playerContainer.style.top="".concat(e.top,"px"),this.playerContainer.style.left="".concat(e.left,"px"),this.playerContainer.style.width="".concat(e.width,"px")),this.playerContainer.style.height="".concat(e.height,"px")),this.playerDiv&&(this.playerDiv.style.width="".concat(e.pWidth,"px"),this.playerDiv.style.height="".concat(e.pHeight,"px")),this.amby.get("formatConfig.preheat")&&!this.amby.get("ad.preheated",!1)&&(this.preheatObserver.disconnect(),this.createPreheatObserver()))},r.prototype.createPreheatObserver=function(){var e=this;this.preheatMargin=parseFloat(this.amby.get("formatConfig.preheat"))*this.amby.get("ad.size.height"),this.preheatObserver=ui.Helpers.onVisible(this.playerContainer,function(t){t&&((0,Nh.mgDebug)("PreHeat fired in ".concat(e.preheatMargin,"px")),e.amby.dispatch(ja.upsertState({ad:{preheated:!0,actionPlay:!0}})),e.preheatObserver.disconnect())},.01,0,this.preheatMargin)},r.prototype.appendPlayerContainer=function(e){if(this.baseNode=e,this.position==="above")this.baseNode.insertBefore(this.playerContainer,this.baseNode.children[0]);else if(this.position==="next"){var t=this.playerContainer;(!t.parentNode||t.parentElement.className.indexOf("_mgVideoBlock_".concat(this.widgetId))===-1)&&(t=document.createElement("div"),t.className="_mgVideoBlock_".concat(this.widgetId),t.appendChild(this.playerContainer)),this.baseNode.parentNode.insertBefore(t,this.baseNode.nextSibling)}else this.baseNode.appendChild(this.playerContainer)},r}();za.AdContainerComponent=Vh});var ca=re(Fa=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Fa,"__esModule",{value:!0});Fa.CloseButtonComponent=void 0;var ai=De(),la=we(),pr=Ne(),qh=function(){function r(e,t,i){i===void 0&&(i=!0),this.amby=e,this.container=t,this.widgetId=this.amby.get("widgetId"),this.getElem(),!this.elem||i?this.createElement():this.addClickListener(),this.addListeners()}return r.prototype.createElement=function(){this.elem=document.createElement("div"),this.elem.className="mgCloseButton adCloseButton",this.amby.get("closeBtn.visible",!1)?la.Helpers.addClass(this.elem,"showed"):(this.amby.dispatch(ai.upsertState({closeBtn:{visible:!1}})),la.Helpers.removeClass(this.elem,"showed")),this.container.appendChild(this.elem),this.addClickListener()},r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("closeBtn.visible",function(){e.amby.get("closeBtn.visible",!1)?la.Helpers.addClass(e.elem,"showed"):la.Helpers.removeClass(e.elem,"showed")}),[1,2].indexOf(this.amby.get("closeBtn.enabled"))>-1&&(this.amby.get("closeBtn.enabled")===1&&this.amby.addSubListener("skipBtn.skipable",function(){e.amby.get("skipBtn.skipable",!1)?e.amby.dispatch(ai.upsertState({closeBtn:{visible:!0}})):!e.amby.get("player.isSticky",!1)&&!e.amby.get("player.isAdPlaying",!1)&&e.amby.dispatch(ai.upsertState({closeBtn:{visible:!1}}))}),this.amby.addSubListener("ad.status",function(){switch(e.amby.get("ad.status")){case pr.states.STATUS_PLAYING:e.amby.get("closeBtn.enabled")===1&&!e.amby.get("skipBtn.skipable",!1)&&!e.amby.get("player.isSticky",!1)&&e.amby.dispatch(ai.upsertState({closeBtn:{visible:!1}}));break;case pr.states.STATUS_STOPPED:case pr.states.STATUS_ERROR:e.amby.get("player.isSticky",!1)||e.amby.dispatch(ai.upsertState({closeBtn:{visible:!1}}));break}}),this.amby.addSubListener("player.isSticky",function(){e.amby.get("player.isSticky",!1)&&(["outstream","attachedWidget"].indexOf(e.amby.get("formatConfig.name"))===-1||e.amby.get("skipBtn.skipable",!1)||e.amby.get("closeBtn.enabled")!==1)?e.amby.dispatch(ai.upsertState({closeBtn:{visible:!0}})):(!e.amby.get("player.isAdPlaying",!1)&&["outstream","attachedWidget"].indexOf(e.amby.get("formatConfig.name"))===-1||!e.amby.get("skipBtn.skipable",!1)&&e.amby.get("closeBtn.enabled")===1)&&e.amby.dispatch(ai.upsertState({closeBtn:{visible:!1}}))}))},r.prototype.addClickListener=function(){var e=this;this.elem&&this.elem.addEventListener("click",function(t){e.amby.dispatch(ai.setTriggerToTrue("closeBtn.clicked")),t.cancelBubble=!0})},r.prototype.getElem=function(){return this.widgetBlock||(this.widgetBlock=la.Helpers.getParentBlockByClass(this.container,"_mgw_".concat(this.widgetId))),this.widgetBlock&&(this.elem=this.widgetBlock.querySelector(".mgCloseCrossButton")||this.widgetBlock.querySelector("div[class*=adCloseButton]")),this.elem},r}();Fa.CloseButtonComponent=qh});var Za=re(Ai=>{"use strict";w();_();k();C();D();I();var $a=Ai&&Ai.__assign||function(){return $a=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},$a.apply(this,arguments)};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.VideoSensorComponent=void 0;var Ya=Ne(),Nt=we(),ft=Oe(),Gh=2,Uh=function(){function r(e){var t=this;this.amby=e.amby,this.config=e.mgRec.config,this.playlist=e.mgRec.vr_playlist,this.cappingData=e.mgRec.cappingData,this.cappingData||(this.eventsBuffer=[],this.amby.addSubListener("cappingData",function(){t.cappingData=e.mgRec.cappingData,t.playlist=e.mgRec.vr_playlist,t.sendFromBuffer()})),this.templateId=this.config.templateId||"0",this.subId=this.config.subid||0,this.widgetId=e.mgRec.cid,this.eventListeners={},this.resendAdHashKpi=[],this.adHashKpiQueriesSent=!1,this.silentMode=!1;var i=e.mgRec.countersDomain||"c.".concat(e.mgRec.subnetDomain||""),a=e.libConfig.videoSensorUrlTemplate;this.sensorUrl=a.replace("{{DOMAIN}}",i);var s=document.location.protocol;s=s.indexOf("http")===0?s:"https:",this.sensorUrl="".concat(s).concat(this.sensorUrl),this.lastPosition=0,this.impressionTime=0,this.sequenceIndex=0,this.cappingInterval=parseInt(this.config.cappingInterval,10)||15,this.formats={native:"instream",outstream:"outstream"};var n=(0,Nt.getInObject)(e,["mgRec","config","events"]);(Nt.Helpers.getUrlParam("mgwteaser")||Nt.Helpers.getUrlParam("mgwcampaign"))&&(this.silentMode=!0),n&&Object.entries(n).forEach(function(l){var d=l[0],h=l[1];typeof h=="function"?t.on(d,h):typeof h=="string"&&t.on(d,function(){t.createImg(h)})}),this.muidn="-";try{this.muidn=window.localStorage.mgMuidn||"-"}catch(l){(0,ft.mgDebug)(l)}this.preCustomData={},this.addListeners(),(0,ft.mgDebug)("VideoSensorComponent initiated.")}return r.prototype.addListeners=function(){var e=this;this.amby.addTriggerListener(["player","userPlay"],function(){e.callSensor("vr_play")}),this.amby.addTriggerListener(["player","userPause"],function(){e.impressionTime=0,e.callSensor("vr_pause")}),this.amby.addSubListener(["player","status"],function(){var l=e.amby.get("player.status");switch(l){case Ya.states.STATUS_READY:e.loadFired||(e.loadFired=!0,e.callSensor("vr_load"));break}}),this.amby.addSubListener(["soundNotify"],function(){e.callSensor("sound_notify")}),this.amby.addSubListener(["player","position"],function(){var l=e.amby.get("player.position");if(l&&l>e.lastPosition){e.lastPosition=l;var d=l/e.duration*100;e.impressionTime+=1,!e.impressionTimeSent&&e.impressionTime>=e.cappingInterval&&(e.impressionTimeSent=!0,e.callSensor("vr_capping")),!e.vr25&&d>25&&d<50&&(e.callSensor("vr_progress_25"),e.vr25=!0),!e.vr50&&d>50&&d<75&&(e.callSensor("vr_progress_50"),e.vr50=!0),!e.vr75&&d>75&&d<100&&(e.callSensor("vr_progress_75"),e.vr75=!0)}}),this.amby.addSubListener(["player","complete"],function(){var l=e.amby.get("player.complete",!1);l&&!e.vr100&&e.callSensor("vr_progress_100")}),this.amby.addTriggerListener(["player","seek"],function(){e.lastPosition=e.amby.get("player.position"),e.impressionTime=0}),this.amby.addTriggerListener(["player","firstFrame"],function(){e.reset(),e.callSensor("vr_impression")}),this.amby.addTriggerListener(["player","playerInTeaserClicked"],function(){e.onClickFunc()}),this.amby.addTriggerListener(["player","userMute"],function(){e.callSensor("vr_mute")}),this.amby.addTriggerListener(["player","userUnmute"],function(){e.callSensor("vr_unmute")}),this.amby.addTriggerListener(["closeBtn","clicked"],function(){e.callSensor("vr_close")}),this.amby.addTriggerListener(["player","nextClicked"],function(){e.callSensor("vr_next")}),this.amby.addTriggerListener("player.openPage",function(){e.callSensor("vr_open_page")}),this.amby.addSubListener("ad.status",function(){switch(e.amby.get("ad.status")){case Ya.states.STATUS_READY:e.resetAdVars(),e.fireEvent("load"),e.callSensor("load",!0);break;case Ya.states.STATUS_ERROR:e.fireEvent("error"),e.callSensor("error",!0);break;case Ya.states.STATUS_PLAYING:e.amby.get("visibilityKpi")&&(setTimeout(function(){e.callSensor("video_ad_playing",!0)},0),(0,ft.mgDebug)("VideoAdPlaying sent"));break}}),this.amby.addTriggerListener("player.next",function(){e.callSensor("vr_next")}),this.amby.addTriggerListener("player.previous",function(){e.callSensor("vr_previous")}),this.amby.addTriggerListener("player.next_2",function(){e.callSensor("vr_next_2")}),this.amby.addTriggerListener("player.expandBtnClicked",function(){e.callSensor("vr_expand")}),this.amby.addSubListener("player.quality",function(){e.amby.get("player.quality","360p")==="720p"?e.callSensor("vr_hd_on"):e.callSensor("vr_hd_off")}),this.amby.addSubListener("ad.inSight",function(){!e.inviewSent&&e.amby.get("ad.inSight")&&(e.inviewSent=!0,e.callSensor("inview",!0))}),this.amby.addTriggerListener("ad.impression",function(){var l=new CustomEvent("mgmetrics",{bubbles:!0,composed:!0,detail:{name:"ad.impression",data:""}});window.dispatchEvent(l),e.fireEvent("impression",{hash:e.amby.get("ad.adHash")}),setTimeout(function(){var d=(0,Nt.getInObject)(e.playlist,[e.itemIndex,"id"],0);e.widgetId===1272143&&Number(d)<1e4&&!e.amby.get("ad.adHash")&&(e.preCustomData={vastXml:e.amby.get("vastXml")}),e.callSensor("impression",!0),e.preCustomData={}},0),e.preCustomData={exposureTime:new Date().getTime()-window.performance.timing.navigationStart},e.config.sendRawEvents&&e.callSensor("rawimpression",!0),e.preCustomData={}}),this.amby.addTriggerListener("ad.complete",function(){e.fireEvent("complete"),e.callSensor("complete",!0),e.resetAdVars()}),this.amby.addTriggerListener("ad.vpaid",function(){setTimeout(function(){e.callSensor("vpaid",!0)},0)}),this.amby.addTriggerListener("ad.paid",function(){e.callSensor("impression",!0)}),this.amby.addTriggerListener("ad.clicked",function(){e.fireEvent("click"),e.callSensor("click",!0)}),this.amby.addTriggerListener("ad.skip",function(){e.fireEvent("skip"),e.callSensor("skip",!0)}),this.amby.addTriggerListener("ad.closed",function(){e.callSensor("close",!0)}),this.amby.addTriggerListener("ad.passback",function(){e.callSensor("passback",!0)}),this.amby.addTriggerListener("ad.mute",function(){e.callSensor("mute",!0)}),this.amby.addTriggerListener("ad.unmute",function(){e.callSensor("unmute",!0)}),this.amby.addTriggerListener("ad.unmuteraw",function(){e.config.sendRawEvents&&e.callSensor("unmuteraw",!0)}),this.amby.addTriggerListener("ad.inventory",function(){e.callSensor("adinventory",!0)}),this.amby.addTriggerListener("widget.rawplayer",function(){e.preCustomData={exposureTime:new Date().getTime()-window.performance.timing.navigationStart},e.config.sendRawEvents&&e.callSensor("rawplayer",!0),e.preCustomData={}}),this.amby.addTriggerListener("widget.rawinit",function(){e.preCustomData={exposureTime:new Date().getTime()-window.performance.timing.navigationStart},e.config.sendRawEvents&&e.callSensor("rawinit",!0),e.preCustomData={}}),this.amby.addTriggerListener("ad.rejected",function(){e.callSensor("rejected",!0)});var t=function(l){return function(){e.amby.get("player.InPoint")&&e.amby.get("widget.renderTime")&&(setTimeout(function(){e.callSensor("render_buffer",!0),e.amby.removeSubListener(l,t)},0),(0,ft.mgDebug)("Render buffer sent"))}};this.amby.addSubListener("player.InPoint",t("player.InPoint")),this.amby.addSubListener("widget.renderTime",t("widget.renderTime"));var i=function(){setTimeout(function(){e.callSensor("scroll_buffer",!0),e.amby.removeSubListener("player.scrollReached",i)},0),(0,ft.mgDebug)("Scroll buffer sent")};this.amby.addSubListener("player.scrollReached",i);var a=function(){setTimeout(function(){e.amby.get("customDataKpi.ad_loaded_buffer.loadedBufferTime")&&(e.callSensor("ad_loaded_buffer",!0),(0,ft.mgDebug)("Ad Loaded buffer sent"),e.amby.removeSubListener("ad.loaded",a))},0)};this.amby.addSubListener("ad.loaded",a);var s=function(){(0,ft.mgDebug)("widget.adViewable triggered"),e.amby.get("adViewableTimeKpi.lastVideoAdPlayingTime")&&setTimeout(function(){e.callSensor("ad_viewable",!0),e.amby.removeSubListener("widget.adViewable",s)}),(0,ft.mgDebug)("adViewable sent")};this.amby.addSubListener("widget.adViewable",s);var n=function(){setTimeout(function(){e.callSensor("exposure",!0),e.amby.removeSubListener("widget.adViewable",s)}),(0,ft.mgDebug)("exposure sent")};this.amby.addSubListener("widget.exposure",n),this.amby.addTriggerListener("sensor.resendAdHashKpi",function(){if(e.amby.get("ad.playerEngine")==="vpaid")for(;e.resendAdHashKpi.length>0;){var l=new URL(e.resendAdHashKpi.pop());l.searchParams.set("h",e.amby.get("ad.adHash")),e.createImg(l.toString())}e.adHashKpiQueriesSent=!0,(0,ft.mgDebug)("AdHashKpi queries sent")})},r.prototype.addTeasersListeners=function(){for(var e=this,t=this.amby.get("teasers",[]),i=0;i<t.length;i++)this.amby.addTriggerListener(["teasers",i,"clicked"],function(){e.onClickFunc()}),this.amby.addTriggerListener(["teasers",i,"autoClicked"],function(){e.onClickFunc(!0)})},r.prototype.getFormat=function(){var e=this.amby.get("formatConfig.name");return this.formats[e]||"unknown"},r.prototype.callSensor=function(e,t){if(t===void 0&&(t=!1),this.silentMode)return!1;var i=this.makeSrcObj(e,this.sensorUrl,this.widgetId,this.templateId);t?(this.itemIndex=this.amby.get("player.itemIndex",0),i.tid=(0,Nt.getInObject)(this.playlist,[this.itemIndex,"id"],0),this.amby.get("ad.adPlayer")===Gh&&(i.tid=this.amby.get("ad.adTag")),i.customData=$a($a({},this.preCustomData),{timeOffset:this.amby.get("ad.position",0),muidn:this.muidn,playerEngine:this.amby.get("ad.playerEngine","unknown"),adPlayer:this.amby.get("ad.adPlayer")||0,uuid:this.config.uuid||"",subId:parseInt(this.subId,10)||0,sticky:this.amby.get("player.isSticky",!1)?1:0,viewable:this.amby.get("ad.inSight",!1)?100:0}),i=this.initDataByAdEvent(e,i),this.getFromCappingData(i.customData),this.amby.get("ad.adHash")?i.clickAdditionH=this.amby.get("ad.adHash"):(0,Nt.getInObject)(this.playlist,[this.itemIndex,"hash"])&&(i.clickAdditionH=(0,Nt.getInObject)(this.playlist,[this.itemIndex,"hash"])),this.sourceShowHash&&this.sourceShowHash!==(0,Nt.getInObject)(this.playlist,[this.itemIndex,"hash"])&&(i.clickAdditionV=this.sourceShowHash)):(i.customData={vrViewable:0,sticky:0,playlistSeq:this.sequenceIndex,uuid:this.config.uuid||"",format:this.getFormat(),muidn:this.muidn,playerEngine:this.amby.get("ad.playerEngine","unknown")},this.playlist&&this.playlist[this.amby.get("player.itemIndex",0)]&&(this.itemIndex=this.amby.get("player.itemIndex",0),i.tid=this.playlist[this.itemIndex].id,i.clickAdditionH="".concat(this.playlist[this.itemIndex].hash),this.getFromCappingData(i.customData),this.initDataByEvent(e,i))),this.amby.get("visibilityKpi")&&this.amby.get("customDataKpi.".concat(e))&&((0,ft.mgDebug)(this.amby.get("customDataKpi.".concat(e))),i.customData=Object.assign(i.customData,this.amby.get("customDataKpi.".concat(e))));var a=Nt.Helpers.attachRequestParams(i.generateSrc());return this.needRepeatKpiEvent(e)&&this.resendAdHashKpi.push(a),this.sendGA(e),(0,ft.mgDebug)("Event ".concat(e," fired.").concat(this.amby.get("ad.adTag")?" Ad source: ".concat(this.amby.get("ad.adTag")):"")),(0,ft.mgDebug)("Generated link: ".concat(a)),this.cappingData?this.createImg(a):t?this.addToBuffer(a):!1},r.prototype.initDataByAdEvent=function(e,t){switch(e){case"complete":t.customData={timeOffset:Math.floor(this.amby.get("ad.duration",1))};break;case"vpaid":case"skip":case"click":case"close":t.customData={adTag:this.amby.get("ad.adTag"),videoUrl:this.amby.get("ad.videoUrl"),adClickUrl:this.amby.get("ad.adClickUrl")};break;case"unmuteraw":t.customData={videoUrl:this.amby.get("ad.unmuteMediaSrc")};break;case"impression":t.customData.timems=Date.now(),t.customData.impHash=Nt.Helpers.md5("".concat(this.amby.get("ad.adHash"),"_").concat(this.muidn,"_").concat(t.customData.timems)),this.amby.get("ad.poc")&&(t.customData.poc=this.amby.get("ad.poc"));break;case"load":this.cappingData&&this.amby.get("servLib")&&(t.customData.badLibVer=this.amby.get("servLib"));break;case"error":e==="error"&&(t.customData.errorMessage=encodeURIComponent(this.amby.get("ad.errorMessage")));break}return t},r.prototype.initDataByEvent=function(e,t){var i;switch(e){case"vr_click":case"vr_auto_click":this.cappingData?typeof this.cappingData.isBot<"u"?t.customData.isBot=this.cappingData.isBot:t.customData.isBot=0:t.customData.isBot="{isBot}",t.srcItemIndex=this.itemIndex,this.sourceShowHashUpdated===!1&&(t.clickAdditionV+=this.sourceShowHash);break;default:i=e==="vr_progress_100"?this.duration:this.amby.get("player.position",0),t.customData.timeOffset=Math.floor(i),e.indexOf("vr_")===0&&this.sourceShowHash&&this.sourceShowHash!==this.playlist[this.itemIndex].hash&&(t.clickAdditionV=this.sourceShowHash),e==="sound_notify"&&(t.customData.msg=this.amby.get("soundNotify"));break}return t},r.prototype.needRepeatKpiEvent=function(e){return!this.amby.get("ad.adHash",!1)&&!this.adHashKpiQueriesSent&&["render_buffer","scroll_buffer","exposure","ad_loaded_buffer","video_ad_playing"].indexOf(e)>-1},r.prototype.onClickFunc=function(e){e===void 0&&(e=!1);var t=this.amby.get("player.itemIndex",0);this.sourceShowHashUpdated=!0,this.sourceShowHash=this.playlist[t].hash,this.callSensor(e?"vr_auto_click":"vr_click")},r.prototype.reset=function(){this.lastPosition=0,this.duration=this.amby.get("player.duration",1),this.impressionTime=0,this.impressionTimeSent=!1,this.vr25=!1,this.vr50=!1,this.vr75=!1,this.vr100=!1,this.progress10s=!1,this.progress20s=!1,this.sourceShowHashUpdated===!0&&(this.sourceShowHashUpdated=!1),this.sequenceIndex+=1},r.prototype.createImg=function(e){Nt.Helpers.createImg(e)},r.prototype.resetAdVars=function(){this.lastAdPosition=0},r.prototype.sendGA=function(e){if(this.amby.get("ga_id",!1)){var t="https://www.google-analytics.com/collect?v=1&tid=".concat(this.amby.get("ga_id"))+"&t=event&ec=MgPlayer&cid=1&ea=".concat(e,"&dl=").concat(encodeURIComponent(window.location!==window.parent.location?document.referrer:document.location.href));(0,ft.mgDebug)("GA: ".concat(t)),this.createImg(t)}},r.prototype.on=function(e,t){Object.prototype.hasOwnProperty.call(this.eventListeners,e)||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},r.prototype.fireEvent=function(e,t){t===void 0&&(t=null),Object.prototype.hasOwnProperty.call(this.eventListeners,e)&&this.eventListeners[e].forEach(function(i){setTimeout(function(){try{i(t)}catch(a){(0,ft.mgDebug)("VideoSensorComponent ERROR: event ".concat(e,": ").concat(a))}},0)})},r.prototype.getFromCappingData=function(e){this.cappingData?(this.cappingData.tt&&(e.tt=this.cappingData.tt),this.cappingData.ts&&(e.ts=this.cappingData.ts),this.cappingData.psid&&(e.psid=this.cappingData.psid)):(e.tt="{tt}",e.ts="{ts}",e.psid="{psid}")},r.prototype.addToBuffer=function(e){this.eventsBuffer||(this.eventsBuffer=[]),this.eventsBuffer.push(e)},r.prototype.sendFromBuffer=function(){for(var e=this,t=function(){var a=i.eventsBuffer.shift();setTimeout(function(){var s=new URL(a),n=JSON.parse(s.searchParams.get("o"));n.tt&&(e.cappingData.tt?n.tt=e.cappingData.tt:delete n.tt),n.ts&&(e.cappingData.ts?n.ts=e.cappingData.ts:delete n.ts),n.psid&&(e.cappingData.psid?n.psid=e.cappingData.psid:delete n.psid),n.isBot&&(typeof e.cappingData.isBot<"u"?n.isBot=e.cappingData.isBot:n.isBot=0),e.amby.get("servLib")?n.badLibVer=e.amby.get("servLib"):n.badLibVer&&delete n.badLibVer,s.searchParams.set("o",JSON.stringify(n)),e.createImg(s.href)},0)},i=this;this.eventsBuffer.length>0;)t()},r.prototype.makeSrcObj=function(e,t,i,a){return{sensorUrl:t,tid:null,clickAdditionV:null,widgetId:i,eventName:e,clickAdditionH:null,customData:null,templateId:a,adTag:null,srcItemIndex:null,generateSrc:function(){return"".concat(this.sensorUrl,"?").concat(this.tid?"tid=".concat(this.tid,"&"):"","iid=").concat(this.widgetId,"&e=").concat(this.eventName,"&h=").concat(this.clickAdditionH,"&o=").concat(encodeURIComponent(JSON.stringify(this.customData)),"&t=").concat(this.templateId).concat(this.clickAdditionV?"&v=".concat(this.clickAdditionV):"").concat(this.srcItemIndex?"&src=".concat(this.srcItemIndex):"","&c=").concat(Math.floor(Math.random()*65535))}}},r}();Ai.VideoSensorComponent=Uh});var Ka=re(Ja=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ja,"__esModule",{value:!0});Ja.MoveToBodyComponent=void 0;var jh=function(){function r(e,t){this.widgetId=e,this.playerContainerDiv=t}return r.prototype.attachBody=function(){var e=document.body.querySelector("body > ._mgVideoBlock_".concat(this.widgetId,":last-child"));e?e.appendChild(this.playerContainerDiv):(e=document.createElement("div"),e.className="_mgVideoBlock_".concat(this.widgetId),e.appendChild(this.playerContainerDiv),document.body.appendChild(e))},r.prototype.detachBody=function(e){e.appendChild(this.playerContainerDiv)},r}();Ja.MoveToBodyComponent=jh});var Xa=re(Qa=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Qa,"__esModule",{value:!0});Qa.StyleComponent=void 0;var zh=Oe(),Fh=function(){function r(e){this.amby=e.amby,this.rootElement=e.rootElement,this.widgetId=this.amby.get("widgetId");var t=document.location.protocol;if(t=t.indexOf("http")===0?t:"https:",this.styleUrl=this.amby.get("formatConfig.styleUrl"),this.styleUrl)this.styleUrl=this.styleUrl.replace("{{DOMAIN}}",this.amby.get("subnetDomain","")),this.styleUrl=this.styleUrl.replace(/^(https?:\/\/|\/\/)/,"".concat(t,"//"));else{var i='@keyframes preload{from{transform:rotate(0)}to{transform:rotate(360deg)}}@-webkit-keyframes preload{from{transform:rotate(0)}to{transform:rotate(360deg)}}html>div{display:none!important}.mg2player{position:relative;width:100%;height:100%;overflow:hidden}.mg2player,.mg2player *{font-family:"Open Sans",sans-serif;box-sizing:border-box}.mg2player_mute .mg2player__volume:not(.mghover):not(.showed){opacity:0;visibility:hidden}.mg2player__video{position:absolute;top:50%;left:50%;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform:translate(-50%,-50%)}.mg2player:not(.mg2player_playing) .mg2player__video[poster]{-o-object-fit:cover;object-fit:cover}.mg2player__preload{position:absolute;top:50%;left:50%}.mg2player__controls{position:absolute;bottom:0;left:0;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;padding-top:10px;transition:opacity .3s ease,visibility .3s ease}.mg2player__controls:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;visibility:hidden;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,.85)));background:-webkit-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%);background:-o-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%);background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%)}.mg2player__controls-cover{position:relative;z-index:2;margin-right:25px}.mg2player__controls-wrap{display:block;width:100%;height:30px}.mg2player__controls-wrap>*{display:table-cell}.mg2player_HD,.mg2player__btn,.mg2player__close,.mg2player__custom-btn,.mg2player__expand,.mg2player__play-btn,.mg2player__play-next,.mg2player__preload,.mg2player__start-btn,.mg2player__volume{line-height:1}.mg2player__preload{position:absolute;color:#fff;opacity:0;visibility:hidden;-webkit-animation:preload 1.5s infinite linear;animation:preload 1.5s infinite linear;transition:opacity .1s ease,visibility .1s ease;margin:-12px 0 0 -12px}.mg2player_preload .mg2player__preload{opacity:1;visibility:visible}.mg2player__preload:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#spinner");content:"";width:24px;height:24px;display:block;transform:scale(1.25)}.mg2player__play-btn,.mg2player__play-next{position:relative;width:30px;height:30px;cursor:pointer}.mg2player_HD{position:absolute;right:0;bottom:auto;width:20px;height:20px;top:50%;transform:translate(0,-50%);cursor:pointer}.mg2player__play-btn:after,.mg2player__play-btn:before{position:absolute;top:0;left:0;width:24px;height:24px;transform:scale(1.25)}.mg2player__play-btn:before,.mg2player__start-btn:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#play_arrow");content:"";width:24px;height:24px;display:block}.mg2player__play-btn:after,.mg2player__start-btn:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#pause");content:"";width:24px;height:24px;display:none}.mg2player__start-btn:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#pause");content:"";width:24px;height:24px;display:none}.mg2player__play-next:before{position:absolute;font-size:30px;top:0;left:0;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#skip_next");content:"";width:24px;height:24px;display:block;transform:scale(1.25)}.mg2player_HD_disabled{color:#bbb}.mg2player_HD:before{position:absolute;top:-4px;left:-4px;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#hd");content:"";width:24px;height:24px;display:block;transform:scale(1.25)}.mg2player__start-btn{position:absolute;width:60px;height:60px;color:#fff;cursor:pointer;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;background-color:rgba(0,0,0,.3);border:3px rgba(255,255,255,.5) solid}.mg2player__start-btn:after,.mg2player__start-btn:before{top:50%;left:50%;content:"";transform:translate(-50%,-50%) scale(2.17)}.mg2player:hover:not(.mg2player_playing) .mg2player__start-btn.mghover{background-color:rgba(0,0,0,.7);border:3px #fff solid;transition:background-color .15s ease-in-out,border-color .15s ease-in-out}.mg2player.mg2player_playing:hover .mg2player__start-btn.mghover{transition:none}.mg2player_playing .mg2player__play-btn:before,.mg2player_playing .mg2player__start-btn:before{display:none}.mg2player_playing .mg2player__play-btn:after,.mg2player_playing .mg2player__start-btn:after{display:block}.mg2player__time{font-size:11px;white-space:nowrap;padding:0 4px;width:1px;vertical-align:middle}.mg2player__time_slash{padding-left:0;padding-right:0}.mg2player__track{position:relative;z-index:2;vertical-align:middle;padding:0 5px;margin-bottom:4px;cursor:pointer}.mg2player__track-wrap{position:relative;height:2px;background:rgba(255,255,255,.2);vertical-align:inherit;width:100%;transition:height .2s}.mg2player__controls:hover .mg2player__track-wrap{height:5px}.mg2player__track-buffer{position:absolute;left:0;height:100%;background:rgba(255,255,255,.4)}.mg2player__track-played{position:absolute;left:0;height:100%;background:red}.mg2player__track-point{position:absolute;top:50%;background:red;width:10px;height:10px;border-radius:50%;margin-left:-5px;margin-top:-5px;cursor:pointer}.mg2player__volume{position:absolute;bottom:0;right:0;width:30px;height:30px;cursor:pointer;color:#fff;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;z-index:3;margin-bottom:-3px;margin-right:-3px}.mg2player__volume:after,.mg2player__volume:before{position:absolute;font-size:30px;width:24px;height:24px;content:"";transform:scale(1.25)}.mg2player__volume:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_down_red");display:block}.mg2player__volume:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_off_red");display:none}.mg2player_mute .mg2player__volume:before{display:none}.mg2player_mute .mg2player__volume:after{display:block}.mg2player_controls .mg2player_mute .mg2player__volume{opacity:1;visibility:visible}.mg2player__volume-bar{display:none;position:absolute;bottom:100%;left:0;width:100%;height:70px;padding:3px 3px 15px 3px;border-radius:2px}.mg2player__volume-wrap{width:30%;position:relative;top:0;left:50%;transform:translate(-50%,0);height:100%;background:rgba(255,255,255,.4);cursor:pointer;border-radius:2px}.mg2player__volume-level{background:red;width:100%;height:100%;bottom:0;left:0;position:absolute;border-radius:2px}.mg2player__volume:hover .mg2player__volume-bar{display:block}.mg2player__close,.mg2player__expand{position:absolute;top:2px;cursor:pointer;color:#fff;font-size:20px}.mg2player__expand{left:5px}.mg2player__close{right:5px}.mg2player__expand:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#expand");content:"";width:24px;height:24px;display:block}.mg2player__close:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#cancel");content:"";width:24px;height:24px;display:block}.mg2player__time{font-size:12px;cursor:default}.mg2player__title{position:absolute;top:0;left:0;width:100%;z-index:9999;line-height:22px;font-weight:500;font-size:17px;color:#fff;font-family:Roboto,sans-serif;padding:10px 20px 0;text-align:left;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mg2player__custom-btn{padding:4px}.mg2player__custom-btn>img{width:100%;height:100%}.mg2player_HD:before,.mg2player__btn,.mg2player__close:before,.mg2player__custom-btn,.mg2player__expand:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__start-btn:after,.mg2player__start-btn:before,.mg2player__time,.mg2player__title,.mg2player__track-point,.mg2player__volume:after,.mg2player__volume:before{text-shadow:2px 1px 2px #000}.mg2player__center{text-align:center;vertical-align:middle}.mg2player__btn{position:absolute;top:50%;margin-top:-20px;color:#fff;font-size:40px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease}.mg2player__btn_left{left:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-start;margin-top:-10px}.mg2player__btn_right{right:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-end;margin-top:-10px}.mg2player__btn_left:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#navigate_before");content:"";width:24px;height:24px;display:block;transform:scale(2)}.mg2player__btn_right:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#navigate_next");content:"";width:24px;height:24px;display:block;transform:scale(2)}.mg2player_HD,.mg2player__close,.mg2player__custom-btn,.mg2player__expand,.mg2player__play-btn,.mg2player__play-next,.mg2player__start-btn,.mg2player__time,.mg2player__title,.mg2player__track,.mg2player__volume{opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.mg2player__expand.showed,.mg2player_controls .mg2player_HD.showed,.mg2player_controls .mg2player__btn.showed,.mg2player_controls .mg2player__close.showed,.mg2player_controls .mg2player__custom-btn.showed,.mg2player_controls .mg2player__play-btn.showed,.mg2player_controls .mg2player__play-next.showed,.mg2player_controls .mg2player__start-btn.showed,.mg2player_controls .mg2player__time.showed,.mg2player_controls .mg2player__title.showed,.mg2player_controls .mg2player__track.showed,.mg2player_controls .mg2player__volume.showed{opacity:1;visibility:visible}.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player_HD.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__btn.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__close.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__custom-btn.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__play-btn.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__play-next.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__time.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__track.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__volume.mghover,.mg2player:not(.mg2player_playing) .mg2player__start-btn.mghover,.mg2player:not(.mg2player_playing) .mg2player__title.mghover,.mg2player:not(.mg2player_playing):before{opacity:1;visibility:visible}.mg2player.mg2player_controls:hover .mg2player_HD.mghover,.mg2player.mg2player_controls:hover .mg2player__btn.mghover,.mg2player.mg2player_controls:hover .mg2player__close.mghover,.mg2player.mg2player_controls:hover .mg2player__controls.mghover:before,.mg2player.mg2player_controls:hover .mg2player__custom-btn.mghover,.mg2player.mg2player_controls:hover .mg2player__play-btn.mghover,.mg2player.mg2player_controls:hover .mg2player__play-next.mghover,.mg2player.mg2player_controls:hover .mg2player__time.mghover,.mg2player.mg2player_controls:hover .mg2player__track.mghover,.mg2player.mg2player_controls:hover .mg2player__volume.mghover,.mg2player:hover .mg2player__expand.mghover,.mg2player:hover .mg2player__title.mghover{opacity:1;visibility:visible}.mg2player__track{-moz-flex:1;flex:1}.mg2player__time_slash{-moz-flex:0 0 8px;flex:0 0 8px}.mg2player.mgred:before{content:"";position:absolute;top:0;right:0;left:0;padding-bottom:14%;z-index:1;opacity:0;visibility:hidden;pointer-events:none;background:-webkit-gradient(linear,left top,left bottom,from(#010102),color-stop(50%,rgba(1,1,2,.4)),color-stop(80%,rgba(1,1,2,.1)),to(rgba(1,1,2,0)));background:-webkit-linear-gradient(top,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%);background:-moz-linear-gradient(top,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%);background:-o-linear-gradient(top,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%);background:linear-gradient(to bottom,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%)}.mg2player.mgred .mg2player__controls-wrap{display:-ms-flex;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.mg2player.mgred .mg2player_HD{position:relative}.ctplay .mg2player.mgred .mg2player__start-btn,.ctplay .mg2player.mgred .mg2player__start-btn.mghover,.mg2player.mgred .mg2player__start-btn,.mg2player.mgred .mg2player__start-btn.mghover{background:red;border-color:red;transition:background-color 1s}.ctplay .mg2player.mgred:hover:not(.mg2player_playing) .mg2player__start-btn.mghover,.mg2player.mgred:hover:not(.mg2player_playing) .mg2player__start-btn.mghover{background-color:rgba(1,0,0,.1);border-color:red}.mg2player.mgred.mg2player_playing:hover .mg2player__start-btn.mghover{transition:none}.mg2player.mgred .mg2player__time{-ms-grid-row-align:center;align-self:center}.mg2player.mgred .mg2player__track-wrap{top:50%}.mg2player.mgred .mg2player__volume{color:red}.mg2player.mgred .mg2player__start-btn:before{text-shadow:none;position:relative}.mg2player.mgred .mg2player_HD,.mg2player.mgred .mg2player__custom-btn,.mg2player.mgred .mg2player__play-btn,.mg2player.mgred .mg2player__play-next,.mg2player.mgred .mg2player__time,.mg2player.mgred .mg2player__track,.mg2player.mgred .mg2player__volume{-moz-flex:0 0 35px;flex:0 0 35px}.mg2player.mgred .mg2player__track{-moz-flex:1;flex:1}.mg2player.mgred .mg2player__time_slash{-moz-flex:0 0 8px;flex:0 0 8px}.mg2player.mgred .mg2player_HD,.mg2player.mgred .mg2player__play-btn,.mg2player.mgred .mg2player__play-next,.mg2player.mgred .mg2player__time,.mg2player.mgred .mg2player__track{opacity:1;visibility:visible;display:none}.mg2player.mgred.mg2player_controls .mg2player_HD.showed,.mg2player.mgred.mg2player_controls .mg2player__custom-btn.showed,.mg2player.mgred.mg2player_controls .mg2player__play-btn.showed,.mg2player.mgred.mg2player_controls .mg2player__play-next.showed,.mg2player.mgred.mg2player_controls .mg2player__time.showed,.mg2player.mgred.mg2player_controls .mg2player__track.showed{display:block}.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player_HD.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__custom-btn.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__play-btn.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__play-next.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__time.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__track.mghover,.mg2player.mgred:not(.mg2player_playing):before{display:block}.mg2player.mgred.mg2player_controls:hover .mg2player_HD.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__custom-btn.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__play-btn.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__play-next.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__time.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__track.mghover{display:block}.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__close.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__custom-btn.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__play-btn.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__play-next.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__start-btn.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__time.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__track.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__volume.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__volume.showed{opacity:1;visibility:visible;display:block}.mg2player.mgred .mg2player__volume-bar{padding:3px}@media only screen and (max-device-width:480px){.mg2player.mgred .mg2player__start-btn:before{top:0}.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__volume:after,.mg2player__volume:before{transform:scale(.83)}}@media (max-width:480px){.mg2player__controls-cover{margin-right:30px}.mg2player__preload:before{transform:scale(2)}.mg2player_HD,.mg2player__play-btn,.mg2player__play-next,.mg2player__volume{width:30px;height:30px}.mg2player__time{font-size:12px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__volume:after,.mg2player__volume:before{transform:scale(.8)}.mg2player__start-btn{width:80px;height:80px;font-size:70px}.mg2player.mgred .mg2player__start-btn:before{top:26px;left:26px;transform:scale(2.91);width:24px;height:24px}.mg2player__volume:hover .mg2player__volume-bar{display:none}}@media (min-width:768px){.mg2player__controls-cover{margin-right:30px}.mg2player__preload:before{transform:scale(1.6)}.mg2player_HD,.mg2player__play-btn,.mg2player__play-next,.mg2player__volume{width:30px;height:30px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before{top:0;left:0}.mg2player__time{font-size:12px}.mg2player__start-btn{width:80px;height:80px}.mg2player__start-btn:after,.mg2player__start-btn:before{transform:scale(3.33);margin:-12px 0 0 -12px}}@media (min-width:1024px){.mg2player__preload:before{transform:scale(2)}.mg2player__controls-cover{margin:2px 35px 2px 5px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before{top:4px;left:4px}.mg2player__track{padding:0 10px}.mg2player__volume{bottom:2px;right:5px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__volume:after,.mg2player__volume:before{font-size:30px;transform:scale(1.25)}.mg2player__expand{font-size:30px;transform:scale(1.25)}.mg2player__close{font-size:32px;transform:scale(1.33)}.mg2player__btn{font-size:50px;width:40px;overflow:hidden}.mg2player__btn_left:before{position:relative}.mg2player__btn_right:before{position:relative}.mg2player__start-btn{width:90px;height:90px;font-size:80px}}.video-info__wrap{font-family:Roboto,sans-serif}.fake>.video-info__centering,.video-info__centering{display:table;width:100%;height:100%}.video-info__centering-cell{display:table-cell;vertical-align:middle;text-align:center;padding:20px 0}.video-info__wrap{margin:0 auto;background:#000;max-width:1100px;width:-webkit-calc(100vw - 40px);width:-moz-calc(100vw - 40px);width:calc(100vw - 40px);position:relative;box-shadow:0 0 150px 0 rgba(0,0,0,.9);text-align:left}div.video-info__player{position:relative;height:100%}div.video-info__player.ad-loading .mg2player .mg2player__preload{visibility:visible;opacity:1}div.video-info__player.ad-loading div.adPlayerContainerDiv.showed,div.video-info__player.ad-loading div.mgAdPlayerContainerDiv.showed{background-color:transparent!important}.video-info__title{background:#111;padding:10px}.video-info__title-cell{font-weight:300;font-size:13px;line-height:1.3;margin-bottom:3px;color:#fff}.video-info__sub-title{color:#898989;font-size:11px;line-height:1.3}.mgCloseCrossButton{background:#000;position:absolute;top:0;right:0;width:19px;height:19px;margin:-19px -19px 0 0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mgCloseCrossButton:after,.mgCloseCrossButton:before{content:"";position:absolute;background:#777;transform:rotate(-45deg);transition:background .2s ease}.mgCloseCrossButton:after{width:1px;height:11px;top:4px;left:9px}.mgCloseCrossButton:before{width:11px;height:1px;top:9px;left:4px}.swiper-slide-lenta:first-child{display:none!important}.mgline.vrline.vrnofloat{float:none;width:100%;max-width:100%;border-radius:0;box-shadow:none}.mgline.vrline.vrnofloat img.mcimg{width:100%;height:auto}.video-info__footer{white-space:nowrap;position:relative;overflow-x:auto}.video-info__logo{position:absolute;right:0;bottom:-25px}.video-info__logo img{outline:0;border:none}.video-info__footer.ps--active-x{padding-bottom:11px}.video-info__footer>.ps__scrollbar-x-rail,.video-info__footer>.ps__scrollbar-y-rail{opacity:.7}.video-info__footer.ps>.ps__scrollbar-y-rail>.ps__scrollbar-y{background:#777;border-radius:0;right:0}.video-info__footer.ps>.ps__scrollbar-x-rail>.ps__scrollbar-x{background:#777;border-radius:0;bottom:0}.video-info__footer.ps:hover.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail>.ps__scrollbar-y{background-color:#777;width:10px}.video-info__footer.ps:hover.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail>.ps__scrollbar-x{background-color:#777;height:10px}.video-info__footer.ps>.ps__scrollbar-y-rail{width:10px}.video-info__footer.ps>.ps__scrollbar-x-rail{height:10px}@media (min-width:1024px){.video-info__title-cell{font-size:28px}.video-info__sub-title{font-size:15px}.video-info__title{padding:20px}.video-info__logo{opacity:.6;transition:opacity .2s ease}.video-info__logo:hover{opacity:1}.mgCloseCrossButton{width:41px;height:41px;line-height:42px;font-size:18px;margin:0 -41px 0 0}.mgCloseCrossButton:after{width:1px;height:21px;top:10px;left:20px}.mgCloseCrossButton:before{width:21px;height:1px;top:20px;left:10px}.mgCloseCrossButton:hover:after,.mgCloseCrossButton:hover:before{background:#fff}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{bottom:2px;right:5px;width:30px;height:30px}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{transform:scale(.75);left:0;top:0}}@media (min-width:480px) and (orientation:landscape){.video-info__wrap{width:380px}.video-info__wrap:after{content:"";clear:both;display:table}.video-info__footer{white-space:normal;padding:5px 11px 5px 5px;height:247px}.video-info__title-cell{max-height:37px;overflow:hidden;line-height:1.4}.video-info__sub-title{line-height:1.4;max-height:30px;overflow:hidden}.video-info__title{height:90px;overflow:hidden}.video-info__frame{height:157px;overflow:hidden}}@media (min-width:540px) and (orientation:landscape){.video-info__wrap{width:460px}.video-info__frame{height:190px}.video-info__footer{height:280px}}@media (min-width:760px) and (orientation:landscape){.video-info__wrap{width:580px}.video-info__frame{height:240px}.video-info__footer{height:330px}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{width:30px;height:30px}div.adMuteButton:after,div.adMuteButton:before{transform:scale(.83)}}@media (min-width:900px) and (orientation:landscape){.video-info__wrap{width:720px}.video-info__frame{height:298px}.video-info__footer{height:388px}}@media (min-width:1024px) and (orientation:landscape){.video-info__wrap{width:800px}.video-info__frame{height:331px}.video-info__footer{height:497px}.video-info__title{height:166px}.video-info__title-cell{max-height:80px}.video-info__sub-title{max-height:43px}}@media (min-width:1580px) and (orientation:landscape){.video-info__wrap{width:1100px}.video-info__frame{height:456px}.video-info__footer{height:612px;padding:15px 24px 10px 15px}.video-info__title{height:156px;padding:15px 42px}}.mg-progress-line{height:6px}.mg-progress-point{background-color:#c20509;height:4px;position:relative;top:-3px}.vrline div.mcimg a{position:relative;display:block}.vrline div.mcimg a:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.06)),to(rgba(0,0,0,.4)));background:-webkit-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-o-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:linear-gradient(to bottom,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%)}.mctitle a{font-size:14px;line-height:1.3;color:#222;font-family:Roboto,"Open Sans",sans-serif}.mg-video-footer{display:none;position:absolute;bottom:0;left:0;right:0;color:#fff;font-size:11px;padding:8px 52px 8px 10px;line-height:1;z-index:3}.mg-video-footer:before{content:"";display:block;position:absolute;bottom:0;right:0;width:42px;height:42px;background:#222}.mg-video-footer:after{content:"";display:block;position:absolute;bottom:14px;right:14px;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:12px solid #eee}.mg-video-footer>*{margin-left:4px}.mg-video-footer>:first-child{margin-left:0}.vrline .mg-video-footer{display:block!important}.mg-total-views{white-space:nowrap}.mg-total-views{float:left}.mg-video-format{float:right;font-weight:700;background:#cb4329;padding:3px 4px 2px;border-radius:3px;line-height:1;margin:-3px 0 0 0}.mg-video-duration{float:right}#MarketGidComposite .vrline .image-container:after{display:none}@media screen and (min-width:481px){.mg-total-views{position:absolute;top:5px;left:5px}.vrline div.mcimg a:after{bottom:7px;right:8px}.mg-video-footer{top:0;font-size:10px}.mg-video-footer:before{width:24px;height:24px}.mg-video-footer:after{bottom:6px;right:6px;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:10px solid #eee}.mg-video-duration{position:absolute;bottom:6px;left:0}.mg-video-format{position:absolute;bottom:4px;right:28px}.vrline div.mcimg a:before{background:rgba(0,0,0,.5)}}@media screen and (min-width:1290px){.mg-total-views{display:block!important}.vrline div.mcimg a:after{bottom:8px;right:9px}.mg-video-footer{top:auto;font-size:10px;padding-right:42px}.mg-video-duration{position:static;bottom:auto;left:auto;margin-left:3px;float:right}.mg-video-format{position:static;bottom:auto;right:auto}.mg-total-views{position:static;top:auto;left:auto}.mg-video-footer:before{width:32px;height:32px}.mg-video-footer:after{bottom:8px;right:9px;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:12px solid #eee}.vrline div.mcimg a:before{background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.06)),to(rgba(0,0,0,.4)));background:-webkit-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-o-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:linear-gradient(to bottom,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%)}}.mgCover{position:absolute;width:100%;height:100%;left:0;top:0;z-index:100000000;display:none}.mg-total-views:before{content:"";display:inline-block;vertical-align:top;width:11px;height:8px;margin-right:2px;background:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMy43OCA4Ljg2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkFydGJvYXJkIDM8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTEzLjYzLDMuOUE4LjA3LDguMDcsMCwwLDAsNi44OSwwLDguMDcsOC4wNywwLDAsMCwuMTUsMy45LDEsMSwwLDAsMCwuMTUsNWE4LjA3LDguMDcsMCwwLDAsNi43NCwzLjlBOC4wNSw4LjA1LDAsMCwwLDEzLjYzLDVhMSwxLDAsMCwwLDAtMS4wNlptLTYuNzQsNGEzLjUsMy41LDAsMSwxLDMuNS0zLjVBMy41LDMuNSwwLDAsMSw2Ljg5LDcuOTNaIi8+PGNpcmNsZSBjbGFzcz0iY2xzLTEiIGN4PSI2Ljg5IiBjeT0iNC40MyIgcj0iMS42OSIvPjwvc3ZnPg==) no-repeat center;background-size:contain}.mg-video-tag{text-align:left!important;left:10px}.mg-video-tag{line-height:18px;width:100%;text-align:right;position:absolute;z-index:999;top:10px;right:10px}.mg-video-tag>span{text-align:left;background:#007eff;color:#fff;padding:3px 5px 2px 5px;font-family:"Open Sans",sans-serif;font-weight:700;font-size:12px;box-sizing:border-box;width:100%}.mgline:not(.vrline) .mg-video-tag{display:none}.mgline:nth-child(3) .mg-video-tag>span{background:#786efc!important}.mgline:nth-child(4) .mg-video-tag>span{background:#fb6efc!important}.mgline:nth-child(5) .mg-video-tag>span{background:#912692!important}.mgline:nth-child(6) .mg-video-tag>span{background:#92264f!important}.mgline:nth-child(7) .mg-video-tag>span{background:#ff70a6!important}.mgline:nth-child(8) .mg-video-tag>span{background:#25b8fe!important}.mgline:nth-child(9) .mg-video-tag>span{background:#54966a!important}.mgline:nth-child(10) .mg-video-tag>span{background:#d82903!important}.mgline:nth-child(11) .mg-video-tag>span{background:#c2880a!important}.mgline:nth-child(12) .mg-video-tag>span{background:#342dcd!important}.mgline:nth-child(13) .mg-video-tag>span{background:#787878!important}.mgline:nth-child(14) .mg-video-tag>span{background:#05016b!important}.mgline:nth-child(15) .mg-video-tag>span{background:#0c5f13!important}.mgline:nth-child(16) .mg-video-tag>span{background:#879565!important}.videoTimeLeftText{font-size:12px;opacity:.75;text-shadow:0 0 2px rgba(0,0,0,.5);position:absolute;left:.75em;bottom:.75em;color:#fff;display:none;z-index:100000001}.adEnable .videoTimeLeftText{display:block}div.adPlayerContainerDiv.showed,div.mgAdPlayerContainerDiv.showed{z-index:9999998;opacity:1;visibility:visible;background-color:transparent;position:absolute;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;display:-webkit-flex;align-items:center;justify-content:center;left:0;top:0}div.adPlayerDiv.showed,div.mgAdPlayerDiv.showed{z-index:100;opacity:1;width:100%;height:100%;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;display:-webkit-flex;align-items:center;justify-content:center}div.adPlayerContainerDiv,div.mgAdPlayerContainerDiv{z-index:-100;opacity:0;visibility:hidden;background-color:transparent;position:absolute;left:0;top:0}div.adPlayerContainerDiv.partial,div.mgAdPlayerContainerDiv.partial{position:absolute;top:0;left:0;width:100%;height:100%}div.adPlayerContainerDiv.block,div.mgAdPlayerContainerDiv.block{position:relative;margin-bottom:10px;overflow:hidden;transition:height 2s}div.adPlayerDiv,div.mgAdPlayerDiv{z-index:-1;opacity:0;overflow:hidden;position:relative;height:100%}.overflow-allowed div.adPlayerDiv,.overflow-allowed div.mgAdPlayerDiv{overflow:visible}div.adPlayerContainerDiv.partial>div.adPlayerDiv>div:not(.adCloseButton):not(.adLinkButton),div.mgAdPlayerContainerDiv.partial>div.mgAdPlayerDiv>div:not(.mgCloseButton):not(.mgLinkButton){top:0;left:0}div.adCloseButton,div.mgCloseButton{display:none;position:absolute;top:0;right:0;width:50px;height:50px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}div.adCloseButton.showed,div.mgCloseButton.showed{display:block}div.adCloseButton:after,div.mgCloseButton:after{position:absolute;top:0;right:0;filter:drop-shadow(0 0 3px #000);line-height:20px;margin:3px;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#close");content:"";width:24px;height:24px;display:block}div.adPlayerContainerDiv.showed div.adCloseButton,div.mgAdPlayerContainerDiv.showed div.mgCloseButton{display:none;z-index:9999999;right:0}div.adPlayerContainerDiv.showed div.adCloseButton.showed,div.mgAdPlayerContainerDiv.showed div.mgCloseButton.showed{display:block}div.adMuteButton,div.mgMuteButton{display:none;speak:none;line-height:1;position:absolute;bottom:6px;right:6px;width:20px;height:25px;cursor:pointer;transition:opacity .3s ease,visibility .3s ease;z-index:100;filter:drop-shadow(0 0 3px #000)}div.adMuteButton.showed,div.mgMuteButton.showed{display:block}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{position:absolute;height:24px;width:24px;top:50%;left:50%;transform:translate(-50%,-50%) scale(.75)}div.adMuteButton:before,div.mgMuteButton:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_down");content:"";width:24px;height:24px;display:block}div.adMuteButton:after,div.mgMuteButton:after{display:none}div.adMuteButton.muted:before,div.mgMuteButton.muted:before{display:none}div.adMuteButton.muted:after,div.mgMuteButton.muted:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_off");content:"";width:24px;height:24px;display:block}@-webkit-keyframes mg-spinner-easespin{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mg-spinner-easespin{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@-webkit-keyframes mg-spinner-left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}100%{transform:rotate(130deg)}}@keyframes mg-spinner-left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}100%{transform:rotate(130deg)}}@-webkit-keyframes mg-right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}100%{transform:rotate(-130deg)}}@keyframes mg-right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}100%{transform:rotate(-130deg)}}.mg-spinner{position:absolute;left:50%;top:50%;width:64px;margin-left:-32px;z-index:999999;pointer-events:none}.mg-spinner.show .mg-spinner-container{pointer-events:none;position:absolute;width:100%;padding-bottom:100%;top:50%;left:50%;margin-top:-50%;margin-left:-50%;animation:mg-spinner-linspin 1.568s linear infinite;-webkit-animation:mg-spinner-linspin 1.568s linear infinite}.mg-spinner.show .mg-spinner-rotator{position:absolute;width:100%;height:100%;-webkit-animation:mg-spinner-easespin 5332ms cubic-bezier(.4,0,.2,1) infinite both;animation:mg-spinner-easespin 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mg-spinner.show .mg-spinner-left{right:49%}.mg-spinner.show .mg-spinner-left{position:absolute;top:0;left:0;bottom:0;overflow:hidden}.mg-spinner.show .mg-spinner-left .mg-spinner-circle{left:0;right:-100%;border-right-color:transparent;-webkit-animation:mg-spinner-left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both;animation:mg-spinner-left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mg-spinner.show .mg-spinner-circle{box-sizing:border-box;position:absolute;width:200%;height:100%;border-style:solid;border-color:#ddd #ddd transparent;border-radius:50%;border-width:6px}.mg-spinner.show .mg-spinner-right{left:49%}.mg-spinner.show .mg-spinner-right{position:absolute;top:0;right:0;bottom:0;overflow:hidden}.mg-spinner.show .mg-spinner-right .mg-spinner-circle{left:-100%;right:0;border-left-color:transparent;-webkit-animation:mg-right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both;animation:mg-right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.image-container div.video-info__player{position:absolute;left:0;top:0;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;align-items:center;justify-content:center;background-color:#000;z-index:9999;transition:none!important;overflow:hidden}.image-container div.video-info__player.block{position:relative}.image-container div.video-info__player *{transition:none}.image-container div.video-info__player.overflow-allowed{overflow:visible;background:0 0}.mgline.vrline .image-container{display:block!important}html>div{display:none!important}div.adSkipButton,div.mgSkipButton{position:absolute;top:0;left:0;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;display:none;z-index:101;cursor:pointer}div.adSkipButton.showed,div.mgSkipButton.showed{display:block}div.adPlayerDiv #av-container #av-inner #gui #skip-btn,div.mgAdPlayerDiv #av-container #av-inner #gui #skip-btn{top:0;bottom:auto;left:0;right:auto;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;z-index:2;cursor:pointer;border:none;text-transform:none}div.adPlayerDiv #av-container #av-inner #gui #timer,div.mgAdPlayerDiv #av-container #av-inner #gui #timer{height:25px;width:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);font-size:12px;text-align:center;line-height:25px;border:none;text-transform:none}.clickDiv{position:absolute;height:100%;width:100%;z-index:10000000;left:0;top:0}div.adLinkButton{position:absolute;color:#fff;top:auto;left:auto;bottom:40px;right:40px;height:auto;padding:6px 16px;background:rgba(51,51,51,.8);border-radius:4px;letter-spacing:-.05em;line-height:18px;text-transform:uppercase;font-weight:700;font-size:16px;text-shadow:none}div.adLinkButton:hover{background:#666}@media (max-width:480px){div.adLinkButton{padding:6px 8px!important;bottom:0!important;right:50%!important;transform:translate(50%,-50%);font-size:12px!important;line-height:13px!important}}div.adLinkButton.showed{display:block;z-index:9999999}#av-container #av-inner #gui:before{background:0 0}#av-container.desktop #gui #timeline.av-overlay{opacity:1;bottom:-4px!important;right:0!important;left:0!important}#av-container.desktop #av-inner #gui #timeline #timeline-moveto,#av-container.desktop #gui #buttons,#av-container.desktop #gui #timeline,#av-container.desktop #gui:before{opacity:1}#aniview-credit{display:none!important}#av-container #av-inner #slot #videoslot{background-color:transparent!important}.ps{touch-action:auto;overflow:hidden!important;-ms-overflow-style:none}@supports (-ms-overflow-style:none){.ps{overflow:auto!important}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.ps{overflow:auto!important}}.ps.ps--active-x>.ps__scrollbar-x-rail,.ps.ps--active-y>.ps__scrollbar-y-rail{display:block;background-color:transparent}.ps.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail{background-color:#eee;opacity:.9}.ps.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail>.ps__scrollbar-x{background-color:#999;height:10px}.ps.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail{background-color:#eee;opacity:.9}.ps.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail>.ps__scrollbar-y{background-color:#999;width:10px}.ps>.ps__scrollbar-x-rail{display:none;position:absolute;opacity:0;transition:background-color .2s linear,opacity .2s linear;bottom:0;height:15px}.ps>.ps__scrollbar-x-rail>.ps__scrollbar-x{position:absolute;background-color:#aaa;border-radius:6px;transition:background-color .2s linear,height .2s linear,width .2s ease-in-out,border-radius .2s ease-in-out;bottom:2px;height:6px}.ps>.ps__scrollbar-x-rail:active>.ps__scrollbar-x,.ps>.ps__scrollbar-x-rail:hover>.ps__scrollbar-x{height:10px}.ps>.ps__scrollbar-y-rail{display:none;position:absolute;opacity:0;transition:background-color .2s linear,opacity .2s linear;right:0;width:15px}.ps>.ps__scrollbar-y-rail>.ps__scrollbar-y{position:absolute;background-color:#aaa;border-radius:6px;transition:background-color .2s linear,height .2s linear,width .2s ease-in-out,border-radius .2s ease-in-out;right:2px;width:6px}.ps>.ps__scrollbar-y-rail:active>.ps__scrollbar-y,.ps>.ps__scrollbar-y-rail:hover>.ps__scrollbar-y{width:10px}.ps:hover.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail{background-color:#eee;opacity:.9}.ps:hover.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail>.ps__scrollbar-x{background-color:#999;height:10px}.ps:hover.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail{background-color:#eee;opacity:.9}.ps:hover.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail>.ps__scrollbar-y{background-color:#999;width:10px}.ps:hover>.ps__scrollbar-x-rail,.ps:hover>.ps__scrollbar-y-rail{opacity:.6}.ps:hover>.ps__scrollbar-x-rail:hover{background-color:#eee;opacity:.9}.ps:hover>.ps__scrollbar-x-rail:hover>.ps__scrollbar-x{background-color:#999}.ps:hover>.ps__scrollbar-y-rail:hover{background-color:#eee;opacity:.9}.ps:hover>.ps__scrollbar-y-rail:hover>.ps__scrollbar-y{background-color:#999}div.video-info__player.large,div.video-info__player.medium,div.video-info__player.small{position:fixed;bottom:10px;z-index:9999999;opacity:1;visibility:visible;background-color:#000}div.video-info__player.large div.adPlayerDiv,div.video-info__player.medium div.adPlayerDiv,div.video-info__player.small div.adPlayerDiv{z-index:100;opacity:1;position:relative}div.video-info__player.large.left,div.video-info__player.medium.left,div.video-info__player.small.left{left:10px;top:auto}div.video-info__player.small{width:401px}div.video-info__player.large.right,div.video-info__player.medium.right,div.video-info__player.small.right{right:10px;left:auto;top:auto}div.video-info__player.large.top,div.video-info__player.medium.top,div.video-info__player.small.top{top:10px;bottom:auto}div.video-info__player.large.bottom,div.video-info__player.medium.bottom,div.video-info__player.small.bottom{bottom:10px;top:auto}div.video-info__player.medium{width:501px}div.video-info__player.large{width:601px}div.video-info__player.large div.adCloseButton.showed,div.video-info__player.medium div.adCloseButton.showed,div.video-info__player.small div.adCloseButton.showed{display:block!important;z-index:9999999!important}div.video-info__player.large div.adCloseButton,div.video-info__player.medium div.adCloseButton,div.video-info__player.small div.adCloseButton{display:none!important}@media only screen and (max-device-width:480px){div.video-info__player.large.left,div.video-info__player.large.right,div.video-info__player.medium.left,div.video-info__player.medium.right,div.video-info__player.small.left,div.video-info__player.small.right{position:fixed;bottom:0;right:-480px;transition:right 1s;width:70%}div.video-info__player.large.left.showed,div.video-info__player.large.right.showed,div.video-info__player.medium.left.showed,div.video-info__player.medium.right.showed,div.video-info__player.small.left.showed,div.video-info__player.small.right.showed{position:fixed;bottom:0;right:0;transition:right 1s}div.video-info__player.large.left.upper,div.video-info__player.large.right.upper,div.video-info__player.medium.left.upper,div.video-info__player.medium.right.upper,div.video-info__player.small.left.upper,div.video-info__player.small.right.upper{top:0;right:auto;left:50%;transform:translate(-50%,0)}div.video-info__player.large.left.upper.showed,div.video-info__player.large.right.upper.showed,div.video-info__player.medium.left.upper.showed,div.video-info__player.medium.right.upper.showed,div.video-info__player.small.left.upper.showed,div.video-info__player.small.right.upper.showed{opacity:1;visibility:visible}div.video-info__player.large.bottom,div.video-info__player.large.top,div.video-info__player.medium.bottom,div.video-info__player.medium.top,div.video-info__player.small.bottom,div.video-info__player.small.top{position:fixed;right:auto;left:50%;transform:translate(-50%,0);width:70%;margin-bottom:0}div.video-info__player.large.top,div.video-info__player.medium.top,div.video-info__player.small.top{top:0;bottom:auto}div.video-info__player.large.bottom,div.video-info__player.medium.bottom,div.video-info__player.small.bottom{bottom:0;top:auto}div.video-info__player.large.bottom.showed,div.video-info__player.large.top.showed,div.video-info__player.medium.bottom.showed,div.video-info__player.medium.top.showed,div.video-info__player.small.bottom.showed,div.video-info__player.small.top.showed{opacity:1;visibility:visible}div.adPlayerDiv.adplayer-no-ui #sound,div.adPlayerDiv.adplayer-no-ui .pause,div.adPlayerDiv.adplayer-no-ui .play,div.adPlayerDiv.adplayer-no-ui div.adLinkButton,div.adPlayerDiv.adplayer-no-ui div.adSkipButton{opacity:0;visibility:hidden;z-index:-100}}div.adPlayerDiv.adplayer-no-ui #sound,div.adPlayerDiv.adplayer-no-ui .adClickCover,div.adPlayerDiv.adplayer-no-ui .pause,div.adPlayerDiv.adplayer-no-ui .play,div.adPlayerDiv.adplayer-no-ui div.adLinkButton,div.adPlayerDiv.adplayer-no-ui div.adSkipButton{opacity:0;visibility:hidden;z-index:-100}.adClickCover{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100000;display:none}.adClickCover.showed{display:block}.mgTopBar{display:none;width:100%;position:absolute;top:-31px;padding-bottom:3px;height:31px;left:0;background-color:rgba(255,255,255,.9)}.mgTopBar.showed{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}div.video-info__player.mglogo{overflow:visible}div.video-info__player.large.top.mglogo,div.video-info__player.medium.top.mglogo,div.video-info__player.small.top.mglogo{margin-top:31px}.mgTopBar .other-logo{width:90px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-start;align-items:center}.mgTopBar .other-logo a:before{background:0 0!important}.mgTopBar .other-logo img{width:80px;position:relative;top:4px;left:0}.mgTopBar>span{color:#000;background:0 0;padding:0;font-family:Roboto,sans-serif;font-weight:700;font-size:16px;box-sizing:border-box;line-height:1;text-transform:uppercase;margin:12px 0 0 0;position:absolute;left:50%;transform:translate(-50%,0)}.vrline div.mcimg{padding:0;text-align:center;width:100%}.vrline img.mcimg{border:0 solid #fff;width:100%!important;height:auto!important;box-sizing:border-box;display:block}.vrline .mctitle{margin-top:10px;text-align:left}.vrline .mctitle a{font-weight:700;font-size:18px;line-height:18px;font-style:normal;text-decoration:none;color:#000;font-family:Roboto}.vrline.mgline{background:none repeat scroll 0 0;cursor:pointer;display:inline-block;padding:0!important;border:0 solid #fff;width:100%;max-width:100%;box-sizing:border-box;margin:10px 0 0 0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;flex-direction:column;word-wrap:break-word}.vrline.mgline .image-container{position:relative}.vrline.mgline{vertical-align:top}.vrline.mgline{min-width:90px}@supports not (flex-wrap:wrap){.vrline.mgline{display:inline-block!important}}.text-elements a{text-decoration:none}.vrline div.mcprice,.vrline div.mgarrowbox,.vrline div.mgbuybox{display:none}@media (max-width:480px){.vrline.mgline{width:48%!important;margin:1%!important;max-width:48%!important}}@media (max-width:480px){.vrline.mgline{width:98%!important;margin:1%!important;max-width:98%!important}}.vrline .mctitle a:hover{color:#7f7f7f}.vrline.mgline{position:relative}.vrline.mgline .fake{visibility:hidden;position:relative;padding-top:4px}.vrline.mgline .mctitle{margin-top:2px;line-height:1!important}.vrline.mgline:hover .mctitle a{color:#7f7f7f}.vrline.mgline .image-with-text,.vrline.mgline .mgtobottom{width:100%!important}.ctplay .mgbox{padding:25px 0 0!important;max-width:680px!important}.ctplay .vrline.mgline{background:#eee!important;padding:0 0 20px!important;border:1px solid #e3e3e3!important;width:100%;max-width:100%;margin:3px 0;transition-duration:.8s;transition-property:box-shadow}.ctplay .mgheader{border-bottom:none!important;padding-bottom:0;margin-bottom:0}.ctplay .mghead{color:#000!important;font-size:14px!important}.ctplay .vrline.mgline .mctitle{margin:2px 5px 20px;text-align:left}.ctplay .vrline.mgline .mctitle a{font-size:20px;line-height:1.3;color:#000;font-family:Roboto,"Open Sans",sans-serif}.ctplay .vrline.mgline .mctitle a:hover{color:#000}.ctplay .vrline.mgline:hover .mctitle a{color:#000}.ctplay .vrline.mgline .mcdomain{padding-top:3px;text-align:left}.ctplay .vrline.mgline .mcdomain a{font-size:13px;line-height:13px;font-style:italic;color:#7f7f7f;padding:1px}.ctplay .vrline.mgline .image-with-text,.ctplay .vrline.mgline img.mcimg{max-width:680px!important;max-height:385px!important}.ctplay .mg2player:not(.mg2player_playing) .mg2player__close.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__play-btn.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__play-next.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__start-btn.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__time.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__track.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__volume.mghover{opacity:1;visibility:visible}.ctplay.mgred .vrline.mgline .text-elements{display:none}.ctplay.mgred .vrline.mgline{border:none!important;background:inherit!important}div.vrPopup{opacity:0;visibility:hidden}div.adPlayerContainerDiv .mg2player__controls,div.adPlayerContainerDiv .mg2player__title,div.adPlayerContainerDiv div.mgMuteButton,div.mgAdPlayerContainerDiv .mg2player__controls,div.mgAdPlayerContainerDiv .mg2player__title,div.mgAdPlayerContainerDiv div.mgMuteButton{display:none}div.adPlayerContainerDiv.mgAdPlayerFormat-outstream.showed,div.mgAdPlayerContainerDiv.mgAdPlayerFormat-outstream.showed{z-index:9999999;background-color:#fff}div.adPlayerDiv.showed,div.mgAdPlayerDiv.showed{z-index:100;opacity:1;position:relative;width:100%;height:100%;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;display:-webkit-flex;align-items:center;justify-content:center;overflow:hidden}div.adPlayerContainerDiv,div.mgAdPlayerContainerDiv{z-index:-100;opacity:0;visibility:hidden;background-color:transparent;position:absolute;top:0;left:0}div.adPlayerDiv,div.mgAdPlayerDiv{z-index:-1;opacity:0;position:relative;height:100%}div.adPlayerContainerDiv.block,div.mgAdPlayerContainerDiv.block{position:relative;margin-bottom:10px;overflow:hidden;transition:height 2s}div.adPlayerContainerDiv.block.noanim,div.mgAdPlayerContainerDiv.block.noanim{transition:none}html>div{display:none!important}div.adSkipButton,div.mgSkipButton{position:absolute;top:0;left:0;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;display:none;z-index:101;cursor:pointer}div.adSkipButton.showed,div.mgSkipButton.showed{display:block}div.adPlayerDiv #av-container #av-inner #gui #skip-btn,div.mgAdPlayerDiv #av-container #av-inner #gui #skip-btn{top:0;bottom:auto;left:0;right:auto;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;z-index:2;cursor:pointer;border:none;text-transform:none}div.adPlayerDiv #av-container #av-inner #gui #timer,div.mgAdPlayerDiv #av-container #av-inner #gui #timer{height:25px;width:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);font-size:12px;text-align:center;line-height:25px;border:none;text-transform:none}div.adLinkButton.showed{display:block}#av-container #av-inner #gui:before{background:0 0}#av-container.desktop #gui #timeline.av-overlay{opacity:1;bottom:-4px!important;right:0!important;left:0!important}#av-container.desktop #av-inner #gui #timeline #timeline-moveto,#av-container.desktop #gui #buttons,#av-container.desktop #gui #timeline,#av-container.desktop #gui:before{opacity:1}#aniview-credit{display:none!important}div.adCloseButton,div.mgCloseButton{display:none;position:absolute;top:0;right:0;width:50px;height:50px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:9999}div.adCloseButton.showed,div.mgCloseButton.showed{display:block}div.adCloseButton:after,div.mgCloseButton:after{position:absolute;top:0;right:0;width:24px;height:24px;color:#fff;filter:drop-shadow(0 0 3px #000);line-height:20px;margin:3px;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#close");content:"";display:block}div.adPlayerContainerDiv.showed div.adCloseButton.showed,div.mgAdPlayerContainerDiv.showed div.mgCloseButton.showed{display:block}div.adMuteButton,div.mgMuteButton{display:none;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;bottom:6px;right:6px;width:20px;height:25px;cursor:pointer;transition:opacity .3s ease,visibility .3s ease;z-index:100;filter:drop-shadow(0 0 3px #000)}div.adMuteButton.showed,div.mgMuteButton.showed{display:block}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{position:absolute;width:24px;height:24px;top:50%;left:50%;transform:translate(-50%,-50%) scale(.75)}div.adMuteButton:before,div.mgMuteButton:before{content:"";display:block;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_down")}div.adMuteButton:after,div.mgMuteButton:after{content:"";background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_off");display:none}div.adMuteButton.muted:before,div.mgMuteButton.muted:before{display:none}div.adMuteButton.muted:after,div.mgMuteButton.muted:after{display:block}div.adPlayerContainerDiv.large,div.adPlayerContainerDiv.medium,div.adPlayerContainerDiv.small,div.mgAdPlayerContainerDiv.large,div.mgAdPlayerContainerDiv.medium,div.mgAdPlayerContainerDiv.small{position:fixed;bottom:0;top:auto;z-index:9999999;opacity:1;visibility:visible;background-color:#000;overflow:visible}div.adPlayerContainerDiv.large,div.adPlayerContainerDiv.medium,div.adPlayerContainerDiv.small,div.mgAdPlayerContainerDiv.large,div.mgAdPlayerContainerDiv.medium,div.mgAdPlayerContainerDiv.small{opacity:0;visibility:hidden}div.adPlayerContainerDiv.large.showed,div.adPlayerContainerDiv.medium.showed,div.adPlayerContainerDiv.small.showed,div.mgAdPlayerContainerDiv.large.showed,div.mgAdPlayerContainerDiv.medium.showed,div.mgAdPlayerContainerDiv.small.showed{opacity:1;visibility:visible}div.adPlayerContainerDiv.large div.adPlayerDiv,div.adPlayerContainerDiv.medium div.adPlayerDiv,div.adPlayerContainerDiv.small div.adPlayerDiv,div.mgAdPlayerContainerDiv.large div.mgAdPlayerDiv,div.mgAdPlayerContainerDiv.medium div.mgAdPlayerDiv,div.mgAdPlayerContainerDiv.small div.mgAdPlayerDiv{z-index:100;opacity:1;position:relative}div.adPlayerContainerDiv.large.top,div.adPlayerContainerDiv.medium.top,div.adPlayerContainerDiv.small.top,div.mgAdPlayerContainerDiv.large.top,div.mgAdPlayerContainerDiv.medium.top,div.mgAdPlayerContainerDiv.small.top{top:0;bottom:auto}div.adPlayerContainerDiv.small,div.mgAdPlayerContainerDiv.small{width:401px}div.adPlayerContainerDiv.medium,div.mgAdPlayerContainerDiv.medium{width:501px}div.adPlayerContainerDiv.large,div.mgAdPlayerContainerDiv.large{width:601px}div.adPlayerContainerDiv.small.left,div.mgAdPlayerContainerDiv.small.left{left:-401px;transition:left 1s}div.adPlayerContainerDiv.large.left.showed,div.adPlayerContainerDiv.medium.left.showed,div.adPlayerContainerDiv.small.left.showed,div.mgAdPlayerContainerDiv.large.left.showed,div.mgAdPlayerContainerDiv.medium.left.showed,div.mgAdPlayerContainerDiv.small.left.showed{left:0;right:auto;transition:left 1s}div.adPlayerContainerDiv.small.right,div.mgAdPlayerContainerDiv.small.right{right:-401px;transition:right 1s}div.adPlayerContainerDiv.large.right.showed,div.adPlayerContainerDiv.medium.right.showed,div.adPlayerContainerDiv.small.right.showed,div.mgAdPlayerContainerDiv.large.right.showed,div.mgAdPlayerContainerDiv.medium.right.showed,div.mgAdPlayerContainerDiv.small.right.showed{right:0;left:auto;transition:right 1s}div.adPlayerContainerDiv.medium.left,div.mgAdPlayerContainerDiv.medium.left{left:-501px;transition:left 1s}div.adPlayerContainerDiv.medium.right,div.mgAdPlayerContainerDiv.medium.right{right:-501px;transition:right 1s}div.adPlayerContainerDiv.large.left,div.mgAdPlayerContainerDiv.large.left{left:-601px;transition:left 1s}div.adPlayerContainerDiv.large.right,div.mgAdPlayerContainerDiv.large.right{right:-601px;transition:right 1s}.mgTopBar{display:none;width:100%;position:absolute;top:-31px;padding-bottom:3px;height:31px;left:0;background-color:rgba(255,255,255,.9)}.mgTopBar.showed{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}div.adPlayerContainerDiv.mglogo,div.mgAdPlayerContainerDiv.mglogo{margin-top:31px;overflow:visible}div.adPlayerContainerDiv.large.top .mgTopBar.showed,div.adPlayerContainerDiv.medium.top .mgTopBar.showed,div.adPlayerContainerDiv.small.top .mgTopBar.showed,div.mgAdPlayerContainerDiv.large.top .mgTopBar.showed,div.mgAdPlayerContainerDiv.medium.top .mgTopBar.showed,div.mgAdPlayerContainerDiv.small.top .mgTopBar.showed{display:none}.mgTopBar .other-logo{width:90px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-start;align-items:center}.mgTopBar .other-logo a:before{background:0 0!important}.mgTopBar .other-logo img{width:80px;position:relative;top:4px;left:0}.mgTopBar>span{color:#000;background:0 0;padding:0;font-family:Roboto,sans-serif;font-weight:700;font-size:16px;box-sizing:border-box;line-height:1;text-transform:uppercase;margin:12px 0 0 0;position:absolute;left:50%;transform:translate(-50%,0)}@media only screen and (max-device-width:480px){div.adPlayerContainerDiv.large.left,div.adPlayerContainerDiv.large.right,div.adPlayerContainerDiv.medium.left,div.adPlayerContainerDiv.medium.right,div.adPlayerContainerDiv.small.left,div.adPlayerContainerDiv.small.right,div.mgAdPlayerContainerDiv.large.left,div.mgAdPlayerContainerDiv.large.right,div.mgAdPlayerContainerDiv.medium.left,div.mgAdPlayerContainerDiv.medium.right,div.mgAdPlayerContainerDiv.small.left,div.mgAdPlayerContainerDiv.small.right{position:fixed;bottom:0;right:-480px;transition:right 1s;width:70%}div.adPlayerContainerDiv.large.left.showed,div.adPlayerContainerDiv.large.right.showed,div.adPlayerContainerDiv.medium.left.showed,div.adPlayerContainerDiv.medium.right.showed,div.adPlayerContainerDiv.small.left.showed,div.adPlayerContainerDiv.small.right.showed,div.mgAdPlayerContainerDiv.large.left.showed,div.mgAdPlayerContainerDiv.large.right.showed,div.mgAdPlayerContainerDiv.medium.left.showed,div.mgAdPlayerContainerDiv.medium.right.showed,div.mgAdPlayerContainerDiv.small.left.showed,div.mgAdPlayerContainerDiv.small.right.showed{position:fixed;left:50%;right:auto;transition:right 1s}div.adPlayerContainerDiv.large.left.upper,div.adPlayerContainerDiv.large.right.upper,div.adPlayerContainerDiv.medium.left.upper,div.adPlayerContainerDiv.medium.right.upper,div.adPlayerContainerDiv.small.left.upper,div.adPlayerContainerDiv.small.right.upper,div.mgAdPlayerContainerDiv.large.left.upper,div.mgAdPlayerContainerDiv.large.right.upper,div.mgAdPlayerContainerDiv.medium.left.upper,div.mgAdPlayerContainerDiv.medium.right.upper,div.mgAdPlayerContainerDiv.small.left.upper,div.mgAdPlayerContainerDiv.small.right.upper{top:0;right:auto;left:50%;transform:translate(-50%,0);opacity:0;visibility:hidden}div.adPlayerContainerDiv.large.left.upper.showed,div.adPlayerContainerDiv.large.right.upper.showed,div.adPlayerContainerDiv.medium.left.upper.showed,div.adPlayerContainerDiv.medium.right.upper.showed,div.adPlayerContainerDiv.small.left.upper.showed,div.adPlayerContainerDiv.small.right.upper.showed,div.mgAdPlayerContainerDiv.large.left.upper.showed,div.mgAdPlayerContainerDiv.large.right.upper.showed,div.mgAdPlayerContainerDiv.medium.left.upper.showed,div.mgAdPlayerContainerDiv.medium.right.upper.showed,div.mgAdPlayerContainerDiv.small.left.upper.showed,div.mgAdPlayerContainerDiv.small.right.upper.showed{opacity:1;visibility:visible}div.adPlayerContainerDiv.large.bottom,div.adPlayerContainerDiv.large.top,div.adPlayerContainerDiv.medium.bottom,div.adPlayerContainerDiv.medium.top,div.adPlayerContainerDiv.small.bottom,div.adPlayerContainerDiv.small.top,div.mgAdPlayerContainerDiv.large.bottom,div.mgAdPlayerContainerDiv.large.top,div.mgAdPlayerContainerDiv.medium.bottom,div.mgAdPlayerContainerDiv.medium.top,div.mgAdPlayerContainerDiv.small.bottom,div.mgAdPlayerContainerDiv.small.top{opacity:0;visibility:hidden;position:fixed;right:auto;left:50%;transform:translate(-50%,0);width:70%;margin-bottom:0}div.adPlayerContainerDiv.large.top,div.adPlayerContainerDiv.medium.top,div.adPlayerContainerDiv.small.top,div.mgAdPlayerContainerDiv.large.top,div.mgAdPlayerContainerDiv.medium.top,div.mgAdPlayerContainerDiv.small.top{top:0;bottom:auto}div.adPlayerContainerDiv.large.bottom,div.adPlayerContainerDiv.medium.bottom,div.adPlayerContainerDiv.small.bottom,div.mgAdPlayerContainerDiv.large.bottom,div.mgAdPlayerContainerDiv.medium.bottom,div.mgAdPlayerContainerDiv.small.bottom{bottom:0;top:auto}div.adPlayerContainerDiv.large.bottom.showed,div.adPlayerContainerDiv.large.top.showed,div.adPlayerContainerDiv.medium.bottom.showed,div.adPlayerContainerDiv.medium.top.showed,div.adPlayerContainerDiv.small.bottom.showed,div.adPlayerContainerDiv.small.top.showed,div.mgAdPlayerContainerDiv.large.bottom.showed,div.mgAdPlayerContainerDiv.large.top.showed,div.mgAdPlayerContainerDiv.medium.bottom.showed,div.mgAdPlayerContainerDiv.medium.top.showed,div.mgAdPlayerContainerDiv.small.bottom.showed,div.mgAdPlayerContainerDiv.small.top.showed{opacity:1;visibility:visible}}div.adPlayerDiv.adplayer-no-ui #sound,div.adPlayerDiv.adplayer-no-ui .adClickCover,div.adPlayerDiv.adplayer-no-ui .pause,div.adPlayerDiv.adplayer-no-ui .play,div.adPlayerDiv.adplayer-no-ui div.adLinkButton,div.adPlayerDiv.adplayer-no-ui div.adSkipButton{opacity:0;visibility:hidden;z-index:-100}div.adPlayerContainerDiv.block.smart,div.mgAdPlayerContainerDiv.block.smart{max-width:680px!important;transition:height 1s!important;margin-left:auto;margin-right:auto}.adClickCover{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100000;display:none}.adClickCover.showed{display:block}div.adPlayerContainerDiv .mg2player__controls,div.adPlayerContainerDiv .mg2player__title,div.adPlayerContainerDiv div.mgMuteButton,div.mgAdPlayerContainerDiv .mg2player__controls,div.mgAdPlayerContainerDiv .mg2player__title,div.mgAdPlayerContainerDiv div.mgMuteButton{display:none}',a="".concat(t,"//cdn.").concat(this.amby.get("subnetDomain",""));this.css=i.replaceAll("/mgPlayer/img/mgPlayer_v2_sprite.svg","".concat(a,"/mgPlayer/img/mgPlayer_v2_sprite.svg"))}(0,zh.mgDebug)("Style Component initiated.")}return r.prototype.styleChecking=function(e){if(e&&typeof e=="function"){var t=this.rootElement.querySelector("#mgStyles".concat(this.widgetId));if(t){var i=function(){setTimeout(function(){r.styleElemCheckLoaded(t)?e():i()},50)};r.styleElemCheckLoaded(t)?e():i()}else this.loadStyles(e)}},r.prototype.loadStyles=function(e){var t=this;this.rootElement.querySelector("#mgStyles".concat(this.widgetId))?e&&typeof e=="function"&&e():(this.styleUrl?(this.styleElem=document.createElement("link"),this.styleElem.setAttribute("rel","stylesheet"),this.styleElem.setAttribute("href","".concat(this.styleUrl)),this.styleElem=document.createElement("style"),this.styleElem.setAttribute("type","text/css")):(this.styleElem=document.createElement("style"),this.styleElem.id="mgStyles".concat(this.widgetId),this.styleElem.setAttribute("type","text/css"),this.styleElem.styleSheet?this.styleElem.styleSheet.cssText=this.css:this.styleElem.appendChild(document.createTextNode(this.css))),this.styleElem.addEventListener("load",function(){t.styleElem.setAttribute("data-loaded","true"),e&&typeof e=="function"&&e()}),this.rootElement.appendChild(this.styleElem),document.getElementById("mgStyles".concat(this.widgetId))||document.head.appendChild(this.styleElem.cloneNode(!0)))},r.styleElemCheckLoaded=function(e){var t=e.getAttribute("data-loaded")==="true";if(!t){for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href===e.href){t=!0;break}}return t},r}();Qa.StyleComponent=Fh});var as=re(is=>{"use strict";w();_();k();C();D();I();Object.defineProperty(is,"__esModule",{value:!0});is.LogoComponent=void 0;var es=Ne(),ts=De(),Li=we(),Yh=function(){function r(e,t,i){i===void 0&&(i=!0),this.amby=e,this.container=t,this.stickyOnly=i,this.elemText=Li.Helpers.getTranslated(this.amby,"headerText","Advertisement"),this.mainBlock=Li.Helpers.getParentBlockByClass(this.container,"_mgw_"),this.mainBlock&&(this.headerLinkElem=this.mainBlock.querySelector(".mgheader a"));var a=document.location.protocol;this.protocol=a.indexOf("http")===0?a:"https:",this.domain=this.amby.get("subnetDomain"),this.domainName=this.domain.match(/^\w+/),this.headerLink="".concat(this.protocol,"//www.").concat(this.domain),this.headerLinkElem&&this.headerLinkElem.href&&this.headerLinkElem.href.indexOf(this.domainName)>-1&&(this.headerLink=this.headerLinkElem.href.replace(/^(https?:\/\/|\/\/)/,"".concat(this.protocol,"//"))),this.container&&(this.elem=this.container.querySelector(".mgTopBar")),this.elem||this.createElement(),this.addListeners()}return r.prototype.createElement=function(){this.elem=document.createElement("div"),this.elem.className="mgTopBar",this.elem.innerHTML=`<div class="other-logo">
            <a href="`.concat(this.headerLink,`" target="_blank" rel="nofollow noopener">
                <img src="`).concat(this.protocol,"//cdn.").concat(this.domain,"/images/logo/").concat(this.domainName,`.png" alt="" title="">
            </a></div><span>`).concat(this.elemText,"</span>"),this.container.appendChild(this.elem)},r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("ad.status",function(){switch(e.amby.get("ad.status")){case es.states.STATUS_PLAYING:(!e.stickyOnly||e.amby.get("player.isSticky",!1))&&e.amby.dispatch(ts.upsertState({logo:{visible:!0}}));break;case es.states.STATUS_STOPPED:e.amby.dispatch(ts.upsertState({logo:{visible:!1}}));break}}),this.amby.addSubListener("player.isSticky",function(){(!e.stickyOnly||e.amby.get("player.isSticky",!1))&&[es.states.STATUS_PAUSED,es.states.STATUS_PLAYING].indexOf(e.amby.get("ad.status"))>-1?e.amby.dispatch(ts.upsertState({logo:{visible:!0}})):e.stickyOnly&&e.amby.dispatch(ts.upsertState({logo:{visible:!1}}))}),this.stickyOnly?this.amby.addSubListener("logo.visible",function(){e.checkClasses()}):this.container.addEventListener("transitionend",function(){e.checkClasses()})},r.prototype.checkClasses=function(){this.amby.get("logo.visible")?(Li.Helpers.addClass(this.elem,"showed"),Li.Helpers.addClass(this.container,"mglogo")):(Li.Helpers.removeClass(this.elem,"showed"),Li.Helpers.removeClass(this.container,"mglogo"))},r}();is.LogoComponent=Yh});var hr=re(rs=>{"use strict";w();_();k();C();D();I();Object.defineProperty(rs,"__esModule",{value:!0});rs.MgPlayer=void 0;var ke=we(),$h="playing",Zh="paused",Jh="buffering",dr="idle",Ht="hover",Lt="hidden",ss="visible",Kh=function(){function r(e,t){if(t===void 0&&(t=document),this.rootElement=t,this.container=this.rootElement.querySelector("#".concat(e)),this.container||(this.container=document.querySelector("#".concat(e))),!this.container){console.error("MgPlayer: container not found.");return}var i=document.location.protocol;this.protocol=i.indexOf("http")===0?i:"https:",this.status=dr,this.expanded=!1,this.readyRequest=!1,this.playlistRequest=!1,this.eventListeners={},this.curQuality="360p",this.qualityChanging=!1,this.currentVolumeLevel=1,this.customButtons=[],this.webmSupported=!1}return r.prototype.setup=function(e){var t=this;setTimeout(function(){var i=e.playlist,a=e.repeat,s=e.mute,n=e.stylePath,l=e.buttonSettings,d=e.seekable,h=d===void 0?!0:d,y=e.displayClickDefaultAction,g=y===void 0?!0:y,A=e.theme,P=A===void 0?"mgred":A,E=e.events,T=e.customBtns,L=e.preload,W=L===void 0?"none":L,S=e.useWebm,M=S===void 0?!1:S;Array.isArray(i)&&i.length>0&&(t.playlist=i),t.seekable=h,t.displayClickDefaultAction=g,t.stylePath=n,t.theme=P,t.preload=W,t.useWebm=M,t.addTemplate();var R={playButton:Ht,startButton:Ht,nextButton:Ht,time:Ht,timeline:Ht,hdButton:Lt,muteButton:ss,closeButton:Lt,expandButton:Lt,leftButton:Ht,rightButton:Ht,title:Ht};t.btnSettings=ke.Helpers.mergeObjects(R,l),Object.entries(t.btnSettings).forEach(function($){var te=$[0],X=$[1];if(t[te]!==void 0&&t[te]!==null)switch(X){case Ht:ke.Helpers.addClass(t[te],"mghover");break;case ss:ke.Helpers.addClass(t[te],"showed");break}});for(var K=0;K<t.time.length;K++)switch(t.btnSettings.time){case Ht:ke.Helpers.addClass(t.time[K],"mghover");break;case ss:ke.Helpers.addClass(t.time[K],"showed");break}if(t.repeat=a,t.video.muted=!!s,ke.Helpers.addClass(t.container,"mg2player_mute"),s||ke.Helpers.removeClass(t.container,"mg2player_mute"),t.readyRequest=!0,t.addButtonListeners(),E&&Object.entries(E).forEach(function($){var te=$[0],X=$[1];typeof X=="function"?t.on(te,X):typeof X=="string"&&t.on(te,function(){ke.Helpers.createImg(X)})}),T&&Array.isArray(T)&&T.forEach(function($){t.addCustomButton($.name,$.image,$.click)}),t.useWebm&&(t.webmSupported=t.couldUseWebm(),t.webmSupported))try{t.enableWebmErrorHandler()}catch{}},0)},r.prototype.addTemplate=function(){this.container.className="mg2player".concat(this.theme==="mgred"?" mgred":""," mg2player_preload"),this.theme==="mgred"?this.container.innerHTML='<video class="mg2player__video" playsinline preload="'.concat(this.preload,'"></video>')+'<div class="mg2player__title"></div><div class="mg2player__preload"></div><div class="mg2player__start-btn"></div><div class="mg2player__controls"><div class="mg2player__controls-cover"><div class="mg2player__controls-wrap"><div class="mg2player__play-btn"></div><div class="mg2player__play-next"></div><div class="mg2player__track"><div class="mg2player__track-wrap"><div class="mg2player__track-buffer" style="width:0;"></div><div class="mg2player__track-played" style="width:0;"></div><div class="mg2player__track-point" style="left:0;"></div></div></div><div class="mg2player__time"></div><div class="mg2player__time mg2player__time_slash">/</div><div class="mg2player__time"></div><div class="mg2player_HD mg2player_HD_disabled"></div></div></div></div><div class="mg2player__volume"><div class="mg2player__volume-bar"><div class="mg2player__volume-wrap"><div class="mg2player__volume-level"></div></div></div></div><div class="mg2player__expand"></div><div class="mg2player__btn mg2player__btn_left"></div><div class="mg2player__btn mg2player__btn_right"></div><div class="mg2player__close"></div>':this.container.innerHTML='<video class="mg2player__video" playsinline preload="'.concat(this.preload,'"></video>')+'<div class="mg2player__title"></div><div class="mg2player__preload"></div><div class="mg2player__start-btn"></div><div class="mg2player__controls"><div class="mg2player__track"><div class="mg2player__track-wrap"><div class="mg2player__track-buffer" style="width:0;"></div><div class="mg2player__track-played" style="width:0;"></div><div class="mg2player__track-point" style="left:0;"></div></div></div><div class="mg2player__controls-cover"><div class="mg2player__controls-wrap"><div class="mg2player__play-btn"></div><div class="mg2player__play-next"></div><div class="mg2player__time"></div><div class="mg2player__time mg2player__time_slash">/</div><div class="mg2player__time"></div><div class="mg2player__dummy"></div><div class="mg2player_HD mg2player_HD_disabled"></div></div></div></div><div class="mg2player__volume"><div class="mg2player__volume-bar"><div class="mg2player__volume-wrap"><div class="mg2player__volume-level"></div></div></div></div><div class="mg2player__expand"></div><div class="mg2player__btn mg2player__btn_left"></div><div class="mg2player__btn mg2player__btn_right"></div><div class="mg2player__close"></div>',this.video=this.container.querySelector("video"),this.video||(this.video=document.createElement("video"),this.video.className="mg2player__video",this.container.appendChild(this.video)),this.progressElem=this.container.querySelector(".mg2player__track-played"),this.progressPointElem=this.container.querySelector(".mg2player__track-point"),this.bufferProgressElem=this.container.querySelector(".mg2player__track-buffer"),this.muteButton=this.container.querySelector(".mg2player__volume"),this.volumeBar=this.container.querySelector(".mg2player__volume-bar"),this.volumeWrap=this.container.querySelector(".mg2player__volume-wrap"),this.volumeLevel=this.container.querySelector(".mg2player__volume-level"),this.playButton=this.container.querySelector(".mg2player__play-btn"),this.startButton=this.container.querySelector(".mg2player__start-btn"),this.time=this.container.querySelectorAll(".mg2player__time"),this.timeline=this.container.querySelector(".mg2player__track"),this.hdButton=this.container.querySelector(".mg2player_HD"),this.expandButton=this.container.querySelector(".mg2player__expand"),this.leftButton=this.container.querySelector(".mg2player__btn_left"),this.rightButton=this.container.querySelector(".mg2player__btn_right"),this.nextButton=this.container.querySelector(".mg2player__play-next"),this.closeButton=this.container.querySelector(".mg2player__close"),this.controlsContainer=this.container.querySelector(".mg2player__controls"),this.controlsWrapper=this.container.querySelector(".mg2player__controls-wrap"),this.title=this.container.querySelector(".mg2player__title"),this.addVideoListeners(),(this.video.preload==="none"||!Array.isArray(this.playlist)||this.playlist.length===0)&&this.fireEvent("ready")},r.prototype.addVideoListeners=function(){var e=this;this.container.oncontextmenu=function(t){t.preventDefault()},this.video&&(this.video.onplaying=function(){if(e.video.seeking){e.pause();return}e.status=$h,ke.Helpers.addClass(e.container,"mg2player_playing"),ke.Helpers.removeClass(e.container,"mg2player_preload"),e.fireEvent("play",{playReason:e.playBtnClicked?"interaction":"external"}),e.playBtnClicked=!1,e.firstFrameFired||(e.fireEvent("firstFrame"),e.firstFrameFired=!0),e.qualityChanged&&(e.startButton.style.removeProperty("visibility"),e.startButton.style.removeProperty("opacity"),e.qualityChanged=!1)},this.video.addEventListener("pause",function(){e.status=Zh,ke.Helpers.removeClass(e.container,"mg2player_playing"),e.fireEvent("pause",{pauseReason:e.playBtnClicked?"interaction":"external"}),e.playBtnClicked=!1}),this.video.addEventListener("ended",function(){e.status=dr,e.fireEvent("beforeComplete"),setTimeout(function(){e.fireEvent("complete"),e.playlistItem(e.currentIndex+1)},500)}),this.video.addEventListener("error",function(){console.error(e.video.error),e.fireEvent("error","ERROR: ".concat(e.video.error))}),this.video.addEventListener("seeking",function(){e.qualityChanged&&e.deletingVideoPaused&&(e.startButton.style.removeProperty("visibility"),e.startButton.style.removeProperty("opacity"),e.qualityChanged=!1),e.fireEvent("seek",{offset:e.video.currentTime})}),this.video.onseeked=function(){e.fireEvent("seeked")},this.video.addEventListener("timeupdate",function(){ke.Helpers.removeClass(e.container,"mg2player_preload"),e.progress=e.video.currentTime/e.video.duration*100,e.progressElem.style.width="".concat(e.progress,"%"),e.progressPointElem.style.left="".concat(e.progress,"%"),e.time[0].innerText=ke.Helpers.formatTime(e.video.currentTime),e.fireEvent("time",{position:e.video.currentTime,duration:e.video.duration})}),this.video.addEventListener("volumechange",function(){e.video&&(e.video.muted?ke.Helpers.addClass(e.container,"mg2player_mute"):ke.Helpers.removeClass(e.container,"mg2player_mute")),e.fireEvent("mute",{mute:e.video.muted})}),this.video.addEventListener("progress",function(t){e.updateProgress(t)}),this.video.onclick=function(t){e.displayClickDefaultAction&&e.onPlayBtnClick(),e.fireEvent("displayClick"),t.cancelBubble=!0},this.video.addEventListener("loadstart",function(){e.video.preload!=="none"?e.status=Jh:e.time[2].innerText=ke.Helpers.formatTime(0)}),this.video.addEventListener("durationchange",function(){e.time[0].innerText=ke.Helpers.formatTime(e.video.currentTime),e.time[2].innerText=ke.Helpers.formatTime(e.video.duration)}),this.video.oncanplay=function(){e.onCanPlay()},this.video.onwaiting=function(){ke.Helpers.addClass(e.container,"mg2player_preload")},this.video.onloadedmetadata=function(){e.onCanPlay()})},r.prototype.addButtonListeners=function(){var e=this;this.btnSettings.muteButton!==Lt&&(this.muteButton.addEventListener("click",function(t){e.video&&e.setMute(!e.video.muted),t.cancelBubble=!0}),this.volumeWrap.addEventListener("click",function(t){var i=e.volumeWrap.getBoundingClientRect();e.currentVolumeLevel=(i.height-(t.clientY-i.top))/i.height,e.currentVolumeLevel>1&&(e.currentVolumeLevel=1),e.currentVolumeLevel<0&&(e.currentVolumeLevel=0),e.video&&(e.currentVolumeLevel>0&&e.setMute(!1),e.video.volume=e.currentVolumeLevel,e.volumeLevel.style.height="".concat(e.currentVolumeLevel*100,"%")),t.cancelBubble=!0}),this.volumeBar.addEventListener("click",function(t){t.cancelBubble=!0})),this.btnSettings.playButton!==Lt&&this.playButton.addEventListener("click",function(t){e.onPlayBtnClick(),t.cancelBubble=!0}),this.btnSettings.startButton!==Lt&&this.startButton.addEventListener("click",function(t){e.onPlayBtnClick(),e.fireEvent("displayClick"),t.cancelBubble=!0}),this.btnSettings.timeline!==Lt&&this.timeline.addEventListener("click",function(t){if(e.seekable){var i=e.timeline.getBoundingClientRect(),a=(t.clientX-i.left)/i.width;e.video&&e.seek(Math.floor(a*e.video.duration))}t.cancelBubble=!0}),this.btnSettings.nextButton!==Lt&&this.nextButton.addEventListener("click",function(t){e.playlistItem(e.currentIndex+1),e.fireEvent("next"),t.cancelBubble=!0}),this.btnSettings.expandButton!==Lt&&this.expandButton.addEventListener("click",function(t){e.fireEvent("expand"),t.cancelBubble=!0}),this.btnSettings.leftButton!==Lt&&this.leftButton.addEventListener("click",function(t){e.playlistItem(e.currentIndex-1),e.fireEvent("previous"),t.cancelBubble=!0}),this.btnSettings.rightButton!==Lt&&this.rightButton.addEventListener("click",function(t){e.playlistItem(e.currentIndex+1),e.fireEvent("next_2"),t.cancelBubble=!0}),this.controlsContainer.addEventListener("click",function(t){e.displayClickDefaultAction&&e.onPlayBtnClick(),e.fireEvent("displayClick"),t.cancelBubble=!0}),this.btnSettings.hdButton!==Lt&&this.hdButton.addEventListener("click",function(t){if(e.qualityChanging){t.cancelBubble=!0;return}e.hdButton.className.indexOf("mg2player_HD_disabled")>-1?e.changeQuality("720p",function(){ke.Helpers.removeClass(e.hdButton,"mg2player_HD_disabled"),e.curQuality="720p",e.fireEvent("quality",{quality:"720p"}),e.qualityChanged=!0}):e.changeQuality("360p",function(){ke.Helpers.addClass(e.hdButton,"mg2player_HD_disabled"),e.curQuality="360p",e.fireEvent("quality",{quality:"360p"}),e.qualityChanged=!0}),t.cancelBubble=!0})},r.prototype.play=function(){var e=this;this.video&&(ke.Helpers.isIE()?this.video.play():this.video.play().catch(function(){e.video.muted=!0,e.video.play().catch(function(t){console.error("ERROR: ".concat(t.name," MESSAGE: ").concat(t.message))})}))},r.prototype.pause=function(){this.video&&this.video.pause()},r.prototype.setMute=function(e){this.video.muted=!!e},r.prototype.couldUseWebm=function(){var e=this,t="video/webm; codecs=av01.0.01M.08,opus",i=function(s){return window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported(s)},a=function(s){return e.video.canPlayType&&e.video.canPlayType(s).replace(/no/,"")};return!!(window.MediaError&&MediaError.MEDIA_ERR_DECODE&&(i(t)||a(t)))},r.prototype.enableWebmErrorHandler=function(){var e=this,t=[MediaError.MEDIA_ERR_DECODE,MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED],i=new RegExp(/(_360)\.webm($|\?)/);this.video.addEventListener("error",function(a){var s=e.video;if(s.currentTime<1&&t.indexOf(s.error.code)>-1&&i.test(s.src)){var n=!s.paused,l=s.currentTime;s.src=s.src.replace(i,"$1.mp4$2"),l>0&&(s.currentTime=l),n&&s.paused&&s.play(),a.preventDefault(),a.stopPropagation()}},{capture:!0,passive:!1})},r.prototype.setSuitableExt=function(e){return this.useWebm&&this.webmSupported?e.replace(/\.mp4/,".webm"):e},r.prototype.playlistItem=function(e,t){if(t===void 0&&(t=!0),e>=this.playlist.length?this.currentIndex=0:e<0?this.currentIndex=this.playlist.length-1:this.currentIndex=e,this.video&&Object.prototype.hasOwnProperty.call(this.playlist,this.currentIndex)){var i=this.playlist[this.currentIndex].file;i=i.replace(/^(https?:\/\/|\/\/)/,"".concat(this.protocol,"//")),this.curQuality==="720p"?i=i.replace(/^([^?]+)_360\.(mp4|webm)($|\?)/i,"$1.$2$3"):i=this.setSuitableExt(i),this.video.src=i,this.video.poster=this.playlist[this.currentIndex].image.replace(/^(https?:\/\/|\/\/)/,"".concat(this.protocol,"//")),ke.Helpers.addClass(this.container,"mg2player_preload")}this.title.innerText=this.playlist[this.currentIndex].title||"",this.firstFrameFired=!1,t&&(e<this.playlist.length||this.repeat)&&this.play(),this.fireEvent("playlistItem",{index:this.currentIndex})},r.prototype.setControls=function(e){e?ke.Helpers.addClass(this.container,"mg2player_controls"):ke.Helpers.removeClass(this.container,"mg2player_controls"),this.fireEvent("controls")},r.prototype.seek=function(e){this.video&&this.video.duration>=e&&(this.video.currentTime=e)},r.prototype.resize=function(e,t,i){var a=this;if(e===void 0&&(e=null),t===void 0&&(t=null),i===void 0&&(i=null),this.aspectRatio=(i||"16:9").match(/(\d+):(\d+)/).reduce(function(n,l,d){return n[["ratio","width","height"][d]]=l,n},{}),this.aspectRatio.width=parseInt(this.aspectRatio.width,10),this.aspectRatio.height=parseInt(this.aspectRatio.height,10),e===null?this.container.removeAttribute("style"):(this.container.style.width="".concat(e,"px"),this.container.style.height="".concat(t,"px")),this.video&&(e===null?this.video.removeAttribute("style"):(this.video.style.width="".concat(e,"px"),this.video.style.height="".concat(e/(this.aspectRatio.width/this.aspectRatio.height),"px")),parseFloat(this.video.style.height)>parseFloat(this.container.style.height)&&(this.video.style.height="".concat(t,"px"),this.video.style.width="".concat(t*(this.aspectRatio.width/this.aspectRatio.height),"px")),this.theme==="mgred")){var s=this.video.clientWidth||this.video.offsetWidth;s<=350?this.time.forEach(function(n){ke.Helpers.removeClass(n,"showed"),ke.Helpers.removeClass(n,"mghover")}):this.time.forEach(function(n){a.btnSettings.time===Ht&&ke.Helpers.addClass(n,"mghover"),a.btnSettings.time===ss&&ke.Helpers.addClass(n,"showed")})}},r.prototype.load=function(e){var t=this;setTimeout(function(){Array.isArray(e)?t.playlist=e:e&&typeof e=="object"&&(t.playlist=[e]),t.playlistItem(0,!1),t.playlistRequest=!0,t.video.preload==="none"&&t.fireEvent("playlist")},0)},r.prototype.updateProgress=function(e){e.lengthComputable?this.buffered=e.loaded/e.total*100:this.buffered=100,this.bufferProgressElem.style.width="".concat(this.buffered,"%")},r.prototype.getDuration=function(){return this.video.duration},r.prototype.getState=function(){return this.status},r.prototype.getContainer=function(){return this.container},r.prototype.onPlayBtnClick=function(){this.video&&(!this.video.paused&&!this.video.ended?this.pause():this.play()),this.playBtnClicked=!0},r.prototype.on=function(e,t){Object.prototype.hasOwnProperty.call(this.eventListeners,e)||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},r.prototype.fireEvent=function(e,t){t===void 0&&(t=null),Object.prototype.hasOwnProperty.call(this.eventListeners,e)&&this.eventListeners[e].forEach(function(i){i(t)})},r.prototype.changeQuality=function(e,t){if(!(!e||e===this.curQuality))switch(e){case"720p":this.video.src.indexOf("_360.")>-1&&this.loadVideoSilent(this.video.src.replace(/^([^?]+)_360\.(mp4|webm)($|\?)/i,"$1.$2$3"),t);break;case"360p":this.video.src.indexOf("_360.")===-1&&this.loadVideoSilent(this.video.src.replace(/^([^?]+?)(_360)?\.(mp4|webm)($|\?)/i,"$1_360.$3$4"),t);break}},r.prototype.loadVideoSilent=function(e,t){var i=this;e&&(this.qualityChanging=!0,this.startButton.style.visibility="hidden",this.startButton.style.opacity="0",this.loadingVideo=this.video.cloneNode(!0),this.loadingVideo.src="".concat(e,"#t=").concat(this.video.currentTime),this.loadingVideo.style.visibility="hidden",this.loadingVideo.style.opacity="0",this.loadingVideo.duration&&(this.loadingVideo.currentTime=this.video.currentTime),this.loadingVideo.oncanplay=function(){i.onNewVideoCanPlay()},(ke.Helpers.isSafari()||ke.Helpers.iOSversion())&&(this.loadingVideo.onloadedmetadata=function(){i.onNewVideoCanPlay()}),this.loadingVideo.onplaying=function(){ke.Helpers.removeClass(i.container,"mg2player_preload"),i.qualityTimeout||(i.qualityTimeout=setTimeout(function(){i.deletingVideoElem=i.video,i.loadingVideo.currentTime=i.video.currentTime,i.deletingVideoPaused=i.video.paused,i.loadingVideo.muted=i.video.muted,i.deletingVideoElem.pause(),i.deletingVideoElem.style.visibility="hidden",i.deletingVideoElem.style.opacity="0",i.loadingVideo.style.removeProperty("visibility"),i.loadingVideo.style.removeProperty("opacity"),i.deletingVideoElem.parentNode.removeChild(i.deletingVideoElem),i.video=i.loadingVideo,i.deletingVideoPaused&&i.pause(),i.addVideoListeners(),i.qualityChanging=!1,i.loadingVideoPlayRequested=!1,i.qualityTimeout=null,t&&t()},500))},this.loadingVideo.onwaiting=function(){ke.Helpers.addClass(i.container,"mg2player_preload")},ke.Helpers.isIE()||this.video.addEventListener("timeupdate",function(){i.loadingVideo&&i.loadingVideo.duration&&!i.loadingVideo.paused&&(i.loadingVideo.currentTime=i.video.currentTime)}),this.video.parentNode.insertBefore(this.loadingVideo,this.video))},r.prototype.onNewVideoCanPlay=function(){this.loadingVideoPlayRequested||(this.loadingVideo.muted=!0,ke.Helpers.isIE()?this.video.play():this.loadingVideo.play().catch(function(e){console.error("ERROR: ".concat(e.name," MESSAGE: ").concat(e.message))}),this.loadingVideoPlayRequested=!0)},r.prototype.onCanPlay=function(){ke.Helpers.removeClass(this.container,"mg2player_preload"),this.status=dr,this.video.preload!=="none"?(this.readyRequest&&(this.readyRequest=!1,this.fireEvent("ready")),this.playlistRequest&&(this.playlistRequest=!1,this.fireEvent("playlist"))):this.play()},r.prototype.addCustomButton=function(e,t,i){var a=this,s=document.createElement("DIV"),n=document.createElement("IMG");n.src=t,n.title=e.toString(),s.className="mg2player__custom-btn mghover",s.title=e.toString(),typeof i=="function"?s.addEventListener("click",function(l){l.cancelBubble=!0,i(l)}):typeof i=="string"&&s.addEventListener("click",function(l){l.cancelBubble=!0;var d=a.rootElement.ownerDocument||a.rootElement,h=d.defaultView.open(i,"_blank");h&&h.focus()}),s.appendChild(n),this.controlsWrapper.appendChild(s),this.customButtons.push({name:e,image:t,onClick:i,elem:s})},r.prototype.removeCustomButton=function(e){var t=this,i=e.toString();this.customButtons.forEach(function(a){a.name.toString()===i&&(a.elem.parentNode.removeChild(a.elem),t.customButtons.unshift(a))})},r}();rs.MgPlayer=Kh});var pa=re(os=>{"use strict";w();_();k();C();D();I();Object.defineProperty(os,"__esModule",{value:!0});os.MgAdPlayerComponent=void 0;var gt=Ne(),Ee=De(),Kt=we(),ns=Oe(),Qh=hr(),Xh="playing",To="paused",eu="buffering",So="idle",ur="hover",mi="hidden",tu="visible",iu=function(){function r(e,t){var i=this;this.amby=e.amby;var a=t.name,s=a===void 0?"ad":a,n=t.container,l=t.mgsetup,d=t.quality,h=t.adPlaylist;if(this.rootElement=e.rootElement,this.name=s,this.playerContainerDiv=n,this.config=l||{},this.playerId=this.playerContainerDiv.id,this.aspectRatio=this.amby.get("player.aspectratio"),!Array.isArray(h)){(0,ns.mgDebug)("adPlaylist is not an array"),this.amby.dispatch(Ee.upsertAdState({errorMessage:"adPlaylist is not an array"})),this.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_ERROR,this.name));return}this.playlist=[],h.forEach(function(g){i.playlist.push({file:d==="original"?g.link:g.link.replace(/^([^?]+?)(_360)?\.(mp4|webm)($|\?)/i,"$1_360.$3$4"),image:g.img,title:g.title,mediaid:g.id,hash:g.hash,videoExt:JSON.parse(atob(g.videoExt))})});var y={playButton:ur,startButton:mi,nextButton:mi,time:ur,timeline:ur,hdButton:mi,muteButton:tu,closeButton:mi,expandButton:mi,leftButton:mi,rightButton:mi};this.config&&this.config.buttonSettings?this.config.buttonSettings=Kt.Helpers.mergeObjects(y,this.config.buttonSettings):this.config.buttonSettings=y,this.currentPosition=0,this.amby.addSubListener("".concat(this.name,".init"),function(){i.onPlayerInit()}),this.amby.addTriggerListener("".concat(this.name,".mute"),function(){i.player&&i.player.setMute(!0)}),this.amby.addTriggerListener("".concat(this.name,".unmute"),function(){i.player&&i.player.setMute(!1)}),this.amby.addTriggerListener("".concat(this.name,".resize"),function(){i.onPlayerResize()}),this.amby.addTriggerListener("".concat(this.name,".actionPlay"),function(){i.player&&[Xh,eu].indexOf(i.player.getState())===-1?i.player.play():i.playRequested=!0}),this.amby.addTriggerListener("".concat(this.name,".actionPause"),function(){i.player&&[To,So].indexOf(i.player.getState())===-1&&i.player.pause()}),this.amby.addTriggerListener("".concat(this.name,".actionStop"),function(){i.player&&[To,So].indexOf(i.player.getState())===-1&&(i.player.pause(),i.reset()),i.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_STOPPED,i.name))}),this.amby.addSubListener("popup.visible",function(){i.onPlayerChangedLocation()}),this.amby.get("formatConfig.moveToBody",!1)&&this.amby.addSubListener("player.isSticky",function(){i.onPlayerChangedLocation()}),this.observer=Kt.Helpers.onVisible(this.playerContainerDiv,function(g){g||i.amby.get("player.isSticky",!1)?i.amby.dispatch(Ee.setPlayerInSight(!0)):i.amby.dispatch(Ee.setPlayerInSight(!1))},this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart")),this.viewableObserver=new IntersectionObserver(function(g){g.forEach(function(A){var P;i.amby.dispatch(Ee.upsertState((P={},P[i.name.toString()]={viewable:A.isIntersecting},P)))})},{threshold:[.5]}),this.viewableObserver.observe(this.playerContainerDiv)}return r.prototype.onPlayerInit=function(){var e=this;switch(this.amby.get("".concat(this.name,".init"))){case gt.states.INIT_NEEDED:this.amby.dispatch(Ee.setAdInit(gt.states.INIT_IN_PROGRESS,this.name)),Kt.Helpers.vitalCall(function(){return e.initPlayer()},this.amby.get("isVital",!0));break;case gt.states.INIT_RESET:this.amby.dispatch(Ee.setAdInit(gt.states.INIT_IN_PROGRESS,this.name)),this.reset(),this.initPlayer();break;case gt.states.INIT_STOP:this.reset();break}},r.prototype.onPlayerResize=function(e){var t=this;e===void 0&&(e=!1);var i=this.amby.get("ad.size");this.player&&(i?this.player.resize(i.width,i.height,this.aspectRatio):this.player.resize()),Kt.Helpers.isIE()&&!e&&setTimeout(function(){t.onPlayerResize(!0)},1200)},r.prototype.initPlayer=function(){this.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_INIT,this.name));var e=this.amby.get("formatConfig.staticRoot")||"video-native.".concat(this.amby.get("subnetDomain","")),t=[],i=this.amby.get("libConfig.mgPlayerStylesUrlTemplate"),a=i.replace("{{DOMAIN}}",e),s=this.amby.get("ad.initMuted",!0);this.player=new Qh.MgPlayer(this.playerId,this.rootElement),this.player.setup(Kt.Helpers.mergeObjects({autostart:!1,repeat:!1,mute:s,playlist:t,stylePath:a,seekable:!1,displayClickDefaultAction:!1,preload:"metadata"},this.config)),this.addPlayerListeners()},r.prototype.addPlayerListeners=function(){var e=this;this.player.on("ready",function(){Kt.Helpers.vitalCall(function(){Kt.Helpers.repaintSafari()},e.amby.get("isVital",!0)),e.player&&e.player.load(e.playlist)}),this.player.on("playlist",function(){e.impressions=0,e.amby.dispatch(Ee.setAdInit(gt.states.INIT_DONE)),e.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_READY,e.name)),e.playRequested&&e.player.play()}),this.player.on("displayClick",function(){if(e.amby.dispatch(Ee.setTriggerToTrue("ad.clicked")),e.amby.get("ad.adClickUrl")){var t=Kt.Helpers.fromAscii(e.amby.get("ad.adClickUrl")),i=window.open(t,"_blank");i&&(i.focus(),e.amby.dispatch(Ee.setTriggerToTrue("ad.actionPause")))}}),this.player.on("play",function(t){e.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_PLAYING,e.name)),t.playReason==="interaction"&&(e.amby.dispatch(Ee.upsertPlayerState({isPlayingOnVisible:!0})),e.amby.dispatch(Ee.setTriggerToTrue("ad.userPlay")))}),this.player.on("pause",function(t){(0,ns.mgDebug)("Player Pause Event ".concat(t.pauseReason)),t.pauseReason==="interaction"&&(e.amby.dispatch(Ee.upsertPlayerState({isPlayingOnVisible:!1})),e.amby.dispatch(Ee.setTriggerToTrue("ad.userPause"))),e.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_PAUSED,e.name))}),this.player.on("error",function(t){e.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_ERROR,e.name)),(0,ns.mgDebug)(t)}),this.player.on("complete",function(){e.impressions>=e.playlist.length&&(e.reset(),e.amby.dispatch(Ee.setAdStatus(gt.states.STATUS_STOPPED,e.name)))}),this.player.on("mute",function(t){e.amby.get("player.isControlsVisible",!1)&&(t.mute?(e.amby.dispatch(Ee.upsertAdState({initMuted:!0})),e.amby.dispatch(Ee.setTriggerToTrue("ad.userMute"))):(e.amby.dispatch(Ee.upsertAdState({initMuted:!1})),e.amby.dispatch(Ee.setTriggerToTrue("ad.userUnmute")))),e.amby.dispatch(Ee.setAdMuted(t.mute))}),this.player.on("playlistItem",function(t){e.amby.dispatch(Ee.upsertAdState({adTag:e.playlist[t.index].mediaid,videoUrl:e.playlist[t.index].file,adPlayer:2,adClickUrl:(0,Kt.getInObject)(e.playlist[t.index],["videoExt","clickUrl"]),adHash:e.playlist[t.index].hash}))}),this.player.on("time",function(t){t.position-e.currentPosition>1&&(e.currentPosition=Math.floor(t.position),e.amby.dispatch(Ee.upsertAdState({position:e.currentPosition})))}),this.player.on("firstFrame",function(){e.currentPosition=0,e.impressions+=1,e.player.setControls(!0),e.amby.dispatch(Ee.upsertAdState({duration:e.player.getDuration(),complete:!1})),e.amby.dispatch(Ee.setTriggerToTrue("ad.impression"))}),this.player.on("beforeComplete",function(){e.amby.dispatch(Ee.upsertAdState({complete:!0}))})},r.prototype.onPlayerChangedLocation=function(){var e=this;this.amby.get("player.isAdPlaying",!1)&&this.player&&this.amby.get("ad.status")===gt.states.STATUS_PLAYING&&this.amby.get("formatConfig.inlinePlacement")&&setTimeout(function(){e.player.play()},0)},r.prototype.reset=function(){for((0,ns.mgDebug)("mgAdPlayer: Deleting AD player.".concat(this.amby.get("ad.adTag")?" Ad source: ".concat(this.amby.get("ad.adTag")):"")),this.amby.dispatch(Ee.upsertAdState({adTag:null,adHash:null}));this.playerContainerDiv&&this.playerContainerDiv.firstChild;)this.playerContainerDiv.removeChild(this.playerContainerDiv.firstChild);delete this.player},r}();os.MgAdPlayerComponent=iu});var cs=re(ls=>{"use strict";w();_();k();C();D();I();Object.defineProperty(ls,"__esModule",{value:!0});ls.ImaSdkComponent=void 0;var We=Ne(),ge=De(),it=Oe(),au=ra(),da=we(),su=wi(),wo="mgImaSdkLib",ru=function(){function r(e,t){var i=this;this.amby=e.amby;var a=t.name,s=a===void 0?"ad":a,n=t.adSource,l=t.adResponse,d=t.playerDivId,h=t.playerDiv,y=h===void 0?null:h,g=t.requestsLimit;this.inited=!1,this.name=s,this.playerDivId=d,this.adSource=n,this.adResponse=l,this.requestsLimit=parseInt(g,10)||3,this.requestsNumber=0,this.previousHeight=null,this.playerDiv=y||e.rootElement.querySelector("#".concat(this.playerDivId)),this.amby.get("formatConfig.forceMute",!1)&&(this.noSoundComponent=new au.NoSoundComponent(this.amby,{playerDiv:this.playerDiv,adName:s})),this.amby.dispatch(ge.setAdInit(null,this.name)),this.amby.addSubListener("".concat(this.name,".init"),function(){[We.states.INIT_NEEDED,We.states.INIT_RESET].indexOf(i.amby.get("".concat(i.name,".init")))>-1&&(0,it.mgDebug)("Ad starts search."),da.Helpers.vitalCall(function(){return i.initPlayer()},i.amby.get("isVital",!0))}),this.amby.addTriggerListener("".concat(this.name,".actionPlay"),function(){if((0,it.mgDebug)("IMA SDK: actionPlay"),i.adsManager){i.apiAction=!0;var A=i.amby.get("".concat(i.name,".status"));(!A||A!==We.states.STATUS_PLAYING)&&(!A||A===We.states.STATUS_READY?i.start():i.adsManager.resume())}else i.playRequested=!0}),this.amby.addTriggerListener("".concat(this.name,".actionPause"),function(){var A=i.amby.get("".concat(i.name,".status"));i.adsManager&&i.adsManager.getCurrentAd()&&[We.states.STATUS_PAUSED,We.states.STATUS_READY].indexOf(A)===-1&&i.adsManager.pause()}),this.amby.addTriggerListener("".concat(this.name,".actionStop"),function(){i.adsManager&&i.adsManager.stop()}),this.amby.addTriggerListener("".concat(this.name,".actionClose"),function(){i.amby.dispatch(ge.setAdVisible(!1,i.name)),i.skip()}),this.amby.addTriggerListener("".concat(this.name,".actionSkip"),function(){i.amby.dispatch(ge.setAdVisible(!1,i.name)),i.skip()}),this.amby.addTriggerListener("ad.mute",function(){i.mute()}),this.amby.addTriggerListener("ad.unmute",function(){i.unmute()}),this.amby.addTriggerListener("ad.resize",function(){i.onResize()})}return r.prototype.initPlayer=function(){var e=this;switch(this.amby.get("".concat(this.name,".init"))){case We.states.INIT_NEEDED:this.amby.dispatch(ge.setAdInit(We.states.INIT_IN_PROGRESS,this.name)),document.getElementById(wo)?window.google&&window.google.ima?this.amby.dispatch(ge.setAdInit(We.states.INIT_RESET,this.name)):document.getElementById(wo).addEventListener("load",function(){e.initScript(),e.amby.dispatch(ge.setAdInit(We.states.INIT_DONE,e.name)),e.inited=!0}):this.addScript();break;case We.states.INIT_RESET:this.amby.dispatch(ge.setAdInit(We.states.INIT_IN_PROGRESS,this.name)),this.reset(),this.createPlayer();break;case We.states.INIT_STOP:this.reset();break}},r.prototype.addScript=function(){var e=this,t=document.location.protocol;t=t.indexOf("http")===0?t:"https:";var i=new su.Loader({imaSdk:{url:this.amby.get("ad.playerUrl")||"".concat(t,"//imasdk.googleapis.com/js/sdkloader/ima3").concat(window.location.href.indexOf("mgwdebug")>-1?"_debug":"",".js"),exists:"typeof window.google !== 'undefined' && typeof window.google.ima !== 'undefined'"}},function(){e.initScript(),e.amby.dispatch(ge.setAdInit(We.states.INIT_DONE,e.name)),e.inited=!0,e.createPlayer()});i.checkLoaded()},r.prototype.initScript=function(){var e=this;if(this.ima=(0,da.getInObject)(window,["google","ima"]),!this.ima){(0,it.mgDebug)("IMA SDK ERROR: there is no IMA.");return}this.videoContent=document.createElement("video"),this.videoContent.style.height="100%",this.videoContent.style.width="100%",this.videoContent.style.zIndex="-1",this.videoContent.style.position="absolute",this.videoContent.style.left="0",this.videoContent.style.top="0",this.videoContent.setAttribute("playsinline","true"),this.videoContent.setAttribute("webkit-playsinline","true"),this.playerDiv.appendChild(this.videoContent),this.adDisplayContainer=new this.ima.AdDisplayContainer(this.playerDiv,this.videoContent),this.adDisplayContainer.initialize(),this.adsLoader=new this.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(this.ima.ImaSdkSettings.VpaidMode.INSECURE),this.renderingSettings=new this.ima.AdsRenderingSettings,this.renderingSettings.useStyledNonLinearAds=!0,this.renderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.renderingSettings.loadVideoTimeout=6e4,this.renderingSettings.enablePreloading=!0,this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){(0,it.mgDebug)("IMA SDK manager loaded."),e.adsManager=t.getAdsManager({currentTime:0},e.renderingSettings),e.onAdManagerLoaded(),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_READY,e.name))},!1),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,function(t){e.onAdError(t)},!1)},r.prototype.onAdManagerLoaded=function(){var e=this;this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,function(t){e.onAdError(t)}),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,function(t){var i;(0,it.mgDebug)("IMA SDK ads loaded."),t.getAd&&t.getAd()&&(t.getAd().getDuration&&t.getAd().getDuration()&&(e.amby.dispatch(ge.upsertAdState({position:0,duration:t.getAd().getDuration()})),e.name!=="ad"&&e.amby.dispatch(ge.upsertState({position:0,duration:t.getAd().getDuration()}))),t.getAd().isLinear&&e.amby.dispatch(ge.upsertState((i={},i[e.name]={isLinear:t.getAd().isLinear()},i)))),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_READY,e.name)),e.playRequested&&e.adsManager&&(e.start(),e.playRequested=!1),e.resizeNeeded&&e.onResize()}),this.adsManager.addEventListener(this.ima.AdEvent.Type.STARTED,function(){(0,it.mgDebug)("IMA SDK ads started."),e.adsManager.getCurrentAd&&e.adsManager.getCurrentAd()&&e.adsManager.getCurrentAd().getDuration&&e.adsManager.getCurrentAd().getDuration()&&e.amby.dispatch(ge.upsertAdState({position:0,duration:e.adsManager.getCurrentAd().getDuration()})),e.onResize(),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_PLAYING,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.PAUSED,function(){e.amby.dispatch(ge.setAdStatus(We.states.STATUS_PAUSED,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.RESUMED,function(){e.amby.dispatch(ge.setAdStatus(We.states.STATUS_PLAYING,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.IMPRESSION,function(){(0,it.mgDebug)("IMA SDK ads impression."),e.amby.dispatch(ge.setTriggerToTrue("".concat(e.name,".impression")))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.SKIPPED,function(){(0,it.mgDebug)("IMA SDK Skipped"),setTimeout(function(){e.adsManager.destroy()},400),e.amby.dispatch(ge.setTriggerToTrue("".concat(e.name,".skip"))),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_STOPPED,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.USER_CLOSE,function(){(0,it.mgDebug)("IMA SDK user close"),setTimeout(function(){e.adsManager.destroy()},400),e.amby.dispatch(ge.setTriggerToTrue("".concat(e.name,".complete"))),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_STOPPED,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.COMPLETE,function(){(0,it.mgDebug)("IMA SDK complete"),e.amby.dispatch(ge.setTriggerToTrue("".concat(e.name,".complete")))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){(0,it.mgDebug)("IMA SDK ALL complete"),setTimeout(function(){e.adsManager.destroy()},400),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_STOPPED,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.CLICK,function(){e.amby.dispatch(ge.setTriggerToTrue("".concat(e.name,".clicked")))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){e.amby.dispatch(ge.setAdStatus(We.states.STATUS_READY,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){e.adsManager.destroy(),e.amby.dispatch(ge.setAdStatus(We.states.STATUS_STOPPED,e.name))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.FIRST_QUARTILE,function(){e.amby.dispatch(ge.upsertAdState({position:Math.ceil(e.amby.get("ad.duration")/4)}))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.MIDPOINT,function(){e.amby.dispatch(ge.upsertAdState({position:Math.ceil(e.amby.get("ad.duration")/2)}))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.THIRD_QUARTILE,function(){e.amby.dispatch(ge.upsertAdState({position:e.amby.get("ad.duration")/4*3}))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.VOLUME_CHANGED,function(t){t.getAd&&t.getAd()&&t.getAd().g&&t.getAd().g.volume?e.amby.dispatch(ge.setAdMuted(!1)):e.amby.dispatch(ge.setAdMuted(!0))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.AD_PROGRESS,function(t){var i;t.getAdData&&t.getAdData()&&e.amby.dispatch(ge.upsertState((i={},i[e.name]={position:t.getAdData().currentTime},i)))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.LINEAR_CHANGED,function(t){var i;t.getAd&&t.getAd()&&e.amby.dispatch(ge.upsertState((i={},i[e.name]={isLinear:t.getAd().isLinear()},i)))}),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOG,function(t){var i;e.amby.dispatch(ge.upsertState((i={},i[e.name]={logMessage:t.toString()},i)))})},r.prototype.createPlayer=function(){(0,it.mgDebug)("Creating new IMA SDK request."),this.amby.dispatch(ge.setAdStatus(We.states.STATUS_INIT,this.name)),this.requestsNumber+=1,this.adsLoader.requestAds(this.getRequest())},r.prototype.start=function(){var e;try{var t=this.amby.get("ad.size",{width:300,height:169});this.adsManager.init(t.width,t.height,this.ima.ViewMode.NORMAL),(0,it.mgDebug)("IMA SDK initialising ad...")}catch(i){(0,it.mgDebug)(i.getError()),this.amby.dispatch(ge.upsertAdState({errorMessage:"".concat(i.getError().getErrorCode()," ").concat(i.getError().getMessage())})),this.name!=="ad"&&this.amby.dispatch(ge.upsertState((e={},e[this.name]={errorMessage:"".concat(i.getError().getErrorCode()," ").concat(i.getError().getMessage())},e)))}(this.amby.get("ad.initMuted",!0)||da.Helpers.iOSversion())&&this.mute(),da.Helpers.iOSversion()&&this.amby.dispatch(ge.upsertState({player:{muted:!0}})),this.adsManager.start(),(0,it.mgDebug)("IMA SDK start ad...")},r.prototype.reset=function(){(0,it.mgDebug)("IMA SDK: Deleting AD player."),this.close(),this.adsManager&&this.adsManager.destroy(),this.requestsNumber=0},r.prototype.mute=function(){var e=this;this.amby.dispatch(ge.upsertState({rawPhase:9,widget:{rawplayer:!0}})),da.Helpers.vitalCall(function(){e.adsManager&&((0,it.mgDebug)("IMA SDK: AD mute request sent."),e.adsManager.setVolume(0),e.amby.dispatch(ge.setAdMuted(!0)),e.amby.dispatch(ge.upsertState({muteBtn:{muted:!0}})))},this.amby.get("isVital",!0))},r.prototype.unmute=function(){this.adsManager&&((0,it.mgDebug)("IMA SDK: AD unmute request sent."),this.adsManager.setVolume(1),this.amby.dispatch(ge.setAdMuted(!1)),this.amby.dispatch(ge.upsertState({muteBtn:{muted:!1}})))},r.prototype.close=function(){this.adsManager&&this.adsManager.stop()},r.prototype.skip=function(){this.adsManager&&(this.adsManager.getAdSkippableState()?this.adsManager.skip():this.adsManager.stop())},r.prototype.onResize=function(){if(this.adsManager&&this.adsManager.getCurrentAd()){var e=this.amby.get("ad.size",{width:300,height:169});this.adsManager.resize(e.width,e.height,this.ima.ViewMode.NORMAL);var t=this.playerDiv.querySelector("iframe");if(t){var i=t.style.display;t.style.display="none",this.previousHeight=t.offsetHeight,t.style.display=i}}[We.states.STATUS_READY,We.states.STATUS_PLAYING,We.states.STATUS_PAUSED].indexOf(this.amby.get("".concat(this.name,".status")))===-1&&(this.resizeNeeded=!0)},r.prototype.getRequest=function(){this.adsRequest=new this.ima.AdsRequest,this.adResponse?this.adsRequest.adsResponse=this.adResponse:this.adsRequest.adTagUrl=this.adSource.replace(/^(http:\/\/|\/\/)/,"https://");var e=this.amby.get("ad.size",{width:300,height:169});return this.adsRequest.linearAdSlotWidth=e.width,this.adsRequest.linearAdSlotHeight=e.height,this.adsRequest.nonLinearAdSlotWidth=e.width,this.adsRequest.nonLinearAdSlotHeight=e.height,this.adsRequest.contentDuration=0,this.adsRequest.vastLoadTimeout=15e3,this.adsRequest},r.prototype.onAdError=function(e){var t,i=this;(0,it.mgDebug)(e.getError()),this.amby.dispatch(ge.upsertAdState({errorMessage:"".concat(e.getError().getErrorCode()," ").concat(e.getError().getMessage())})),this.name!=="ad"&&this.amby.dispatch(ge.upsertState((t={},t[this.name]={errorMessage:"".concat(e.getError().getErrorCode()," ").concat(e.getError().getMessage())},t))),this.adsManager&&this.adsManager.destroy(),this.requestsLimit>this.requestsNumber?(this.requestsNumber+=1,setTimeout(function(){i.adsLoader.requestAds(i.getRequest())},500)):this.amby.dispatch(ge.setAdStatus(We.states.STATUS_ERROR,this.name))},r}();ls.ImaSdkComponent=ru});var hs=re(ds=>{"use strict";w();_();k();C();D();I();Object.defineProperty(ds,"__esModule",{value:!0});ds.SkipAdButtonComponent=void 0;var ps=Ne(),ha=De(),ua=we(),nu=Oe(),ou=function(){function r(e,t,i){this.amby=e,this.container=t,this.playerName=i,this.widgetId=this.amby.get("widgetId"),this.elemText=ua.Helpers.getTranslated(this.amby,"skipText","Skip"),this.timeToSkipText=ua.Helpers.getTranslated(this.amby,"skipOffsetText","Skip ad in %s");var a=ua.Helpers.getParentBlockByClass(this.container,"._mgw_".concat(this.widgetId));a&&(this.elem=a.querySelector("div[class*=mgSkipButton]")),this.elem?this.addClickListeners():this.createElement(),this.addListeners(),(0,nu.mgDebug)("Skip Ad Button Component initialised")}return r.prototype.createElement=function(){this.elem=document.createElement("div"),this.elem.className="mgSkipButton adSkipButton",this.elem.innerText=this.elemText,this.container.appendChild(this.elem),this.addClickListeners()},r.prototype.addClickListeners=function(){var e=this;this.elem&&this.elem.addEventListener("click",function(t){e.amby.get("skipBtn.skipable",!1)&&(e.amby.dispatch(ha.setTriggerToTrue("".concat(e.playerName,".actionSkip"))),e.stopInterval()),t.cancelBubble=!0})},r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("skipBtn.visible",function(){e.amby.get("skipBtn.visible",!1)?ua.Helpers.addClass(e.elem,"showed"):ua.Helpers.removeClass(e.elem,"showed")}),this.amby.addSubListener("".concat(this.playerName,".status"),function(){switch(e.amby.get("".concat(e.playerName,".status"))){case ps.states.STATUS_READY:e.skipoffset=e.amby.get("".concat(e.playerName,".skipoffset")),e.timeToSkip=parseInt(e.skipoffset,10);break;case ps.states.STATUS_PLAYING:e.skipoffset&&e.createInterval();break;case ps.states.STATUS_PAUSED:e.skipoffset&&e.pauseInterval();break;case ps.states.STATUS_STOPPED:e.skipoffset&&e.stopInterval();break}}),this.amby.addSubListener("skipBtn.skipable",function(){e.amby.get("skipBtn.skipable",!0)&&e.skipoffset&&e.skipIntervalId&&(e.timeToSkip=0)})},r.prototype.createInterval=function(){var e=this;if(!this.skipIntervalId){this.amby.dispatch(ha.upsertState({skipBtn:{skipable:!1}}));var t=Math.ceil(this.timeToSkip);this.timeToSkip>0&&(this.elem.innerText=this.timeToSkipText.replace("%s",t)),this.skipIntervalId=setInterval(function(){t=Math.ceil(e.timeToSkip),e.elem.innerText=e.timeToSkipText.replace("%s",t),e.timeToSkip<=0&&e.skipIntervalId?(clearInterval(e.skipIntervalId),e.skipIntervalId=null,e.elem.innerText=e.elemText,e.amby.dispatch(ha.upsertState({skipBtn:{skipable:!0}}))):e.timeToSkip-=.1},100)}this.amby.dispatch(ha.upsertState({skipBtn:{visible:!0}}))},r.prototype.pauseInterval=function(){this.skipIntervalId&&(clearInterval(this.skipIntervalId),this.skipIntervalId=null)},r.prototype.stopInterval=function(){this.pauseInterval(),this.timeToSkip=parseInt(this.skipoffset,10),this.amby.dispatch(ha.upsertState({skipBtn:{visible:!1,skipable:!1}}))},r}();ds.SkipAdButtonComponent=ou});var ma=re(us=>{"use strict";w();_();k();C();D();I();Object.defineProperty(us,"__esModule",{value:!0});us.MuteButtonComponent=void 0;var lu=De(),si=we(),cu=function(){function r(e,t){this.amby=e,this.container=t,this.widgetId=this.amby.get("widgetId");var i=si.Helpers.getParentBlockByClass(this.container,"_mgw_".concat(this.widgetId));i&&(this.elem=i.querySelector(".mgMuteButton")),this.elem||this.createElement(),this.amby.get("muteBtn.muted",!1)&&si.Helpers.addClass(this.elem,"muted"),this.addListeners()}return r.prototype.createElement=function(){this.elem=document.createElement("div"),this.elem.className="mgMuteButton",this.container.appendChild(this.elem)},r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("muteBtn.muted",function(){e.amby.get("muteBtn.muted",!1)?si.Helpers.addClass(e.elem,"muted"):si.Helpers.removeClass(e.elem,"muted")}),this.amby.addSubListener("player.isControlsVisible",function(){e.amby.get("player.isControlsVisible",!1)?si.Helpers.removeClass(e.elem,"showed"):si.Helpers.addClass(e.elem,"showed")}),this.amby.addSubListener("muteBtn.visible",function(){e.amby.get("muteBtn.visible",!1)?si.Helpers.addClass(e.elem,"showed"):si.Helpers.removeClass(e.elem,"showed")}),this.elem.addEventListener("click",function(t){e.amby.dispatch(lu.setTriggerToTrue("muteBtn.clicked")),t.cancelBubble=!0})},r}();us.MuteButtonComponent=cu});var _o=re(fs=>{"use strict";w();_();k();C();D();I();Object.defineProperty(fs,"__esModule",{value:!0});fs.VpaidPlayerBase=void 0;var ms=Ne(),ri=we(),pu=ra(),du=La(),Qt=Oe(),nt=De(),hu=function(){function r(e,t){var i=this;this.events={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"},this.inited=!1,this.initRequested=!1,this.requestsLimit=0,this.lastPosition=0,this.positionEventEmitted=!1,this.parameters={},this.wrapperNumber=0,this.vastIndex=0,this.adIndex=0,this.vpaidMode=ms.vpaidModes.INSECURE,this.amby=e.amby;var a=t.name,s=a===void 0?"ad":a,n=t.adSource,l=t.adResponse,d=l===void 0?null:l,h=t.playerDivId,y=t.playerDiv,g=y===void 0?null:y,A=t.desiredBitrate,P=A===void 0?900:A,E=t.skipoffset,T=E===void 0?null:E;this.rootElement=e.rootElement,this.name=s,this.playerDivId=h,this.adSource=ri.Helpers.prepareAdSourceMacroses(n),this.adResponse=d,this.skipOffset=T,this.desiredBitrate=P,this.uuid=this.amby.get("uuid",""),this.previousHeight=null,this.playerDiv=g||e.rootElement.querySelector("#".concat(this.playerDivId)),this.amby.get("formatConfig.forceMute",!1)&&(this.noSoundComponent=new pu.NoSoundComponent(this.amby,{playerDiv:this.playerDiv,adName:s})),this.amby.get("formatConfig.hideConsole",!1)&&window.location.href.indexOf("mgwdebug")===-1&&(this.proxyConsoleComponent=new du.ProxyConsoleComponent(this.amby,{playerDiv:this.playerDiv})),this.amby.dispatch(nt.setAdInit(null,this.name)),this.amby.addTriggerListener("".concat(this.name,".actionPause"),function(){var L=i.amby.get("".concat(i.name,".status"));i.vpaidManager&&[ms.states.STATUS_PAUSED,ms.states.STATUS_READY].indexOf(L)===-1&&((0,Qt.mgDebug)("#".concat(i.name,": Call vpaidManager.pauseAd")),i.vpaidManager.pauseAd())}),this.amby.addTriggerListener("".concat(this.name,".actionSkip"),function(){i.amby.dispatch(nt.setAdVisible(!1,i.name)),i.vpaidManager&&((0,Qt.mgDebug)("#".concat(i.name,": Call vpaidManager.skipAd")),i.vpaidManager.skipAd(),i.amby.dispatch(nt.setTriggerToTrue("".concat(i.name,".admgskip"))))}),this.amby.addTriggerListener("ad.unmute",function(){i.unmute()}),this.amby.addTriggerListener("ad.resize",function(){i.onResize()})}return r.prototype.subscribeEvents=function(){var e=this;this.vpaidManager.subscribe(function(){(0,Qt.mgDebug)("#".concat(e.name,": VPAID Manager: get AdPaused.")),e.amby.dispatch(nt.setAdStatus(ms.states.STATUS_PAUSED,e.name))},this.events.AdPaused),this.vpaidManager.subscribe(function(){var t;(0,Qt.mgDebug)("#".concat(e.name,": VPAID Manager: get AdVideoComplete.")),e.amby.dispatch(nt.upsertState((t={},t[e.name]={complete:!0},t)))},this.events.AdVideoComplete),this.vpaidManager.subscribe(function(){var t;e.amby.dispatch(nt.upsertState((t={},t[e.name]={position:Math.ceil(e.amby.get("ad.duration")/4)},t)))},this.events.AdVideoFirstQuartile),this.vpaidManager.subscribe(function(){var t;e.amby.dispatch(nt.upsertState((t={},t[e.name]={position:Math.ceil(e.amby.get("ad.duration")/2)},t)))},this.events.AdVideoMidpoint),this.vpaidManager.subscribe(function(){var t;e.amby.dispatch(nt.upsertState((t={},t[e.name]={position:e.amby.get("ad.duration")/4*3},t)))},this.events.AdVideoThirdQuartile),this.vpaidManager.subscribe(function(t){(0,Qt.mgDebug)("#".concat(e.name,": VPAID Manager: get AdVolumeChange.")),t&&t.getAd&&t.getAd()&&t.getAd().g&&t.getAd().g.volume?e.amby.dispatch(nt.setAdMuted(!1)):e.amby.dispatch(nt.setAdMuted(!0))},this.events.AdVolumeChange),this.vpaidManager.subscribe(function(){var t;e.positionEventEmitted=!0,e.vpaidManager&&e.amby.dispatch(nt.upsertState((t={},t[e.name]={position:Math.trunc(e.vpaidManager.getAdDuration()-e.vpaidManager.getAdRemainingTime())},t)))},this.events.AdRemainingTimeChange),this.vpaidManager.subscribe(function(){var t;e.vpaidManager&&e.amby.dispatch(nt.upsertState((t={},t[e.name]={duration:e.vpaidManager.getAdDuration()},t)))},this.events.AdDurationChange),this.vpaidManager.subscribe(function(){var t;e.amby.dispatch(nt.upsertState((t={},t[e.name]={skipable:e.vpaidManager.getAdSkippableState()},t.skipBtn={skipable:e.vpaidManager.getAdSkippableState()},t)))},this.events.AdSkippableStateChange),this.vpaidManager.subscribe(function(){e.amby.dispatch(nt.setTriggerToTrue("".concat(e.name,".clicked")))},this.events.AdClickThru),this.vpaidManager.subscribe(function(){e.amby.dispatch(nt.setTriggerToTrue("".concat(e.name,".skip")))},this.events.AdSkipped)},r.prototype.unmute=function(){if(this.vpaidManager){(0,Qt.mgDebug)("#".concat(this.name,": Call vpaidManager.setAdVolume(1)"));try{this.vpaidManager.setAdVolume(1),this.amby.dispatch(nt.setAdMuted(!1)),this.amby.dispatch(nt.upsertState({muteBtn:{muted:!1}}))}catch(e){(0,Qt.mgDebug)("#".concat(this.name,": setAdVolume(1) Error: ").concat(e))}}},r.prototype.onResize=function(){var e=this;if(this.vpaidManager){var t=this.amby.get("ad.size",{width:300,height:169});window.setTimeout(function(){(0,Qt.mgDebug)("#".concat(e.name,": Call vpaidManager.resizeAd"));try{e.vpaidManager.resizeAd(t.width-1,t.height,"normal"),e.vpaidManager.resizeAd(t.width,t.height,"normal")}catch(s){(0,Qt.mgDebug)("#".concat(e.name,": Resize error: ").concat(s))}},10);var i=this.playerDiv.querySelector("iframe");if(i){var a=i.style.display;i.style.display="none",this.previousHeight=i.offsetHeight,i.style.display=a}}},r.prototype.replaceMacros=function(e){var t=e.replace("{uuid}",this.uuid);return this.getPreparedAdSourceSizes(t)},r.prototype.getPreparedAdSourceSizes=function(e){var t,i=this.rootElement.querySelector(".type-v .image-container"),a=this.amby.get("ad.size.width",0)||i&&ri.Helpers.getElemWidth(i),s=this.amby.get("ad.size.height",0)||i&&ri.Helpers.getElemHeight(i);(s<1||a<1)&&(t=ri.Helpers.tryCorrectZeroSizes(this.playerDiv,a,s),a=t.width,s=t.height);var n=this.amby.get("formatConfig.name"),l=this.amby.get("ad.curAdPosition")==="pre"?"pre":"mid",d=ri.Helpers.replaceAll(e,"{width}",Math.ceil(a).toString());return d=ri.Helpers.replaceAll(d,"{height}",Math.ceil(s).toString()),d=ri.Helpers.replaceAll(d,"{format}",n),d=ri.Helpers.replaceAll(d,"{schedule}",l),d},r.prototype.createPositionTimeout=function(){var e=this;this.positionEventEmitted||(this.positionTimeout=window.setTimeout(function(){var t;if(e.vpaidManager){var i=Math.trunc(e.vpaidManager.getAdDuration()-e.vpaidManager.getAdRemainingTime());e.lastPosition<i&&e.amby.dispatch(nt.upsertState((t={},t[e.name]={position:i},t)))}e.createPositionTimeout()},200))},r.prototype.getTracking=function(e){e===void 0&&(e=0);var t=this.xmlDocument.querySelectorAll("Ad"),i=t&&t[e]?t[e]:null;i||(i=this.xmlDocument.documentElement),this.parameters.errors=this.parameters.errors||[];for(var a=i.querySelectorAll("Error"),s=0;s<a.length;s++)this.parameters.errors.push(a[s].textContent.trim());this.parameters.impressions=this.parameters.impressions||[];for(var n=i.querySelectorAll("Impression"),s=0;s<n.length;s++)this.parameters.impressions.push(n[s].textContent.trim());this.parameters.tracking=this.parameters.tracking||{};for(var l=i.querySelectorAll("TrackingEvents > Tracking"),s=0;s<l.length;s++){var d=l[s].getAttribute("type")||l[s].getAttribute("event");d&&(this.parameters.tracking[d]||(this.parameters.tracking[d]=[]),this.parameters.tracking[d].push(l[s].textContent.trim()))}this.parameters.viewableImpressions=this.parameters.viewableImpressions||[];for(var h=this.xmlDocument.querySelectorAll("ViewableImpression>Viewable"),s=0;s<h.length;s++)this.parameters.viewableImpressions.push(h[s].textContent.trim())},r}();fs.VpaidPlayerBase=hu});var ko=re(gs=>{"use strict";w();_();k();C();D();I();Object.defineProperty(gs,"__esModule",{value:!0});gs.Vast=void 0;var Xt=Ne(),Bt=we(),Ot=De(),uu=pa(),at={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"},ot={impression:"impression",click:"click",error:"error",start:"start",firstQuartile:"firstQuartile",midpoint:"midpoint",thirdQuartile:"thirdQuartile",complete:"complete",mute:"mute",unmute:"unmute",pause:"pause",resume:"resume",fullscreen:"fullscreen",exitFullscreen:"exitFullscreen",expand:"expand",collapse:"collapse",skip:"skip",creativeView:"creativeView",rewind:"rewind",viewable_impression:"viewable_impression"},mu=function(){function r(e){e===void 0&&(e="vast"),this.adCompanions="",this.adDuration=1,this.adExpanded=!1,this.adHeight=0,this.adIcons=!1,this.adLinear=!0,this.adRemainingTime=0,this.adSkippableState=!1,this.adVolume=0,this.adWidth=0,this.eventListeners={},this.firstTimePlay=!0,this.skipOffset=5,this.skipOffsetText="Skip in %s",this.protocol="https:",this.viewableImpressionSent=!1,this.silentMode=!1,this.amby=(0,Xt.createAmby)(e),(Bt.Helpers.getUrlParam("mgwteaser")||Bt.Helpers.getUrlParam("mgwcampaign"))&&(this.silentMode=!0),this.setCallbacksForCreative()}return r.prototype.setCallbacksForCreative=function(){var e=this;this.amby.addSubListener("ad.status",function(){switch(e.amby.get("ad.status")){case Xt.states.STATUS_READY:if((0,Bt.getInObject)(e.playerComponent,["player","video","duration"])>e.adDuration&&(e.adDuration=e.playerComponent.player.video.duration),e.parameters.enableDurationBalancer&&e.parameters.contentVideoDurationLimit<parseInt(e.getAdDuration().toString(),10)){e.stopAd();return}e.triggerEvent(at.AdLoaded);break;case Xt.states.STATUS_PLAYING:e.amby.get("ad.viewable",!1)&&(e.clearViewableTimeout(),e.viewableTimeout=window.setTimeout(function(){e.viewableImpressionSent||(e.viewableImpressionSent=!0,e.sendTracking(ot.viewable_impression,!0))},2e3)),e.firstTimePlay?(e.sendTracking(ot.start),e.triggerEvent(at.AdStarted),e.triggerEvent(at.AdVideoStart),e.firstTimePlay=!1):(e.sendTracking(ot.resume),e.triggerEvent(at.AdPlaying));break;case Xt.states.STATUS_PAUSED:e.clearViewableTimeout(),e.sendTracking(ot.pause),e.triggerEvent(at.AdPaused);break;case Xt.states.STATUS_STOPPED:e.clearViewableTimeout(),e.triggerEvent(at.AdStopped);break;case Xt.states.STATUS_ERROR:e.clearViewableTimeout(),e.sendTracking(ot.error,!0),e.triggerEvent(at.AdError,e.amby.get("ad.errorMessage"));break}}),this.amby.addSubListener("ad.position",function(){var t=e.amby.get("ad.position"),i=e.amby.get("ad.duration",1);if(!(i<=1)){var a=t/i;a>=.25&&!e.video25?(e.sendTracking(ot.firstQuartile),e.triggerEvent(at.AdVideoFirstQuartile),e.video25=!0):a>=.5&&!e.video50?(e.sendTracking(ot.midpoint),e.triggerEvent(at.AdVideoMidpoint),e.video50=!0):a>=.75&&!e.video75&&(e.sendTracking(ot.thirdQuartile),e.triggerEvent(at.AdVideoThirdQuartile),e.video75=!0),e.adRemainingTime=Math.trunc(e.adDuration-t),e.triggerEvent(at.AdRemainingTimeChange)}}),this.amby.addTriggerListener("ad.skip",function(){e.sendTracking(ot.skip),e.triggerEvent(at.AdSkipped)}),this.amby.addSubListener("ad.initMuted",function(){e.triggerEvent(at.AdVolumeChange,e.amby.get("ad.initMuted",!0)?0:1)}),this.amby.addTriggerListener("ad.complete",function(){e.sendTracking(ot.complete),e.triggerEvent(at.AdVideoComplete)}),this.amby.addSubListener("skipBtn.skipable",function(){e.adSkippableState=e.amby.get("skipBtn.skipable"),e.triggerEvent(at.AdSkippableStateChange)}),this.amby.addTriggerListener("ad.clicked",function(){e.sendTracking(ot.click,!0),e.triggerEvent(at.AdClickThru,{data:{url:e.clickThru}})}),this.amby.addTriggerListener("ad.impression",function(){e.sendTracking(ot.impression,!0),e.triggerEvent(at.AdImpression)}),this.amby.addSubListener("ad.duration",function(){e.previousDuration!==e.amby.get("ad.duration",1)&&(e.previousDuration=e.amby.get("ad.duration",1),e.adDuration=e.amby.get("ad.duration",1),e.triggerEvent(at.AdDurationChange))}),this.amby.addSubListener("ad.viewable",function(){e.amby.get("ad.viewable")?e.amby.get("ad.status")===Xt.states.STATUS_PLAYING&&(e.clearViewableTimeout(),e.viewableTimeout=window.setTimeout(function(){e.viewableImpressionSent||(e.viewableImpressionSent=!0,e.sendTracking(ot.viewable_impression,!0))},2e3)):e.clearViewableTimeout()})},r.prototype.collapseAd=function(){},r.prototype.expandAd=function(){},r.prototype.getAdCompanions=function(){return this.adCompanions},r.prototype.getAdDuration=function(){return this.adDuration},r.prototype.getAdExpanded=function(){return this.adExpanded},r.prototype.getAdHeight=function(){return this.adHeight},r.prototype.getAdIcons=function(){return this.adIcons},r.prototype.getAdLinear=function(){return this.adLinear},r.prototype.getAdRemainingTime=function(){return this.adRemainingTime},r.prototype.getAdSkippableState=function(){return this.adSkippableState},r.prototype.getAdVolume=function(){return this.adVolume},r.prototype.getAdWidth=function(){return this.adWidth},r.prototype.handshakeVersion=function(e,t){return"2.0"},r.prototype.initAd=function(e,t,i,a,s,n){if(i===void 0&&(i="normal"),a===void 0&&(a=256),this.slot=n.slot,this.videoSlot=n.videoSlot,this.rootElement=n.rootElement,this.amby.dispatch(Ot.setAdInit(Xt.states.INIT_IN_PROGRESS)),s&&s.AdParameters&&(this.parameters=JSON.parse(s.AdParameters)),this.clickThru=this.parameters.clickThru,this.domain=this.parameters.domain,this.debug=!!this.parameters.debug,this.tracking=this.parameters.tracking,this.tracking[ot.impression]=this.parameters.impressions,this.tracking[ot.click]=[this.parameters.clickTracking],this.tracking[ot.error]=this.parameters.errors,this.tracking[ot.viewable_impression]=this.parameters.viewableImpressions,this.cid=this.parameters.cid,this.parameters.protocol)this.protocol=this.parameters.protocol;else{var l=document.location.protocol;this.protocol=l.indexOf("http")===0?l:"https:"}this.clickThru&&(this.clickThru.search(/^(https?:\/\/|\/\/)/)||(this.clickThru="//".concat(this.clickThru)),this.clickThru=this.clickThru.replace(/^(https?:\/\/|\/\/)/,"".concat(this.protocol,"//"))),this.amby.dispatch(Ot.upsertAdState({size:{width:Bt.Helpers.getElemWidth(this.slot),height:Bt.Helpers.getElemHeight(this.slot)}})),this.parameters.contentVideoDurationLimit=s?.contentVideoDurationLimit,this.adWidth=this.amby.get("ad.width"),this.adHeight=this.amby.get("ad.height"),parseInt(this.parameters.skipOffset,10)&&(this.skipOffset=parseInt(this.parameters.skipOffset,10)),this.parameters.skipOffsetText&&this.parameters.skipOffsetText.indexOf("%s")>-1&&(this.skipOffsetText=this.parameters.skipOffsetText),this.parameters.duration&&(this.adDuration=this.parameters.duration),this.adLinear=this.parameters.isLinear;var d=[];this.parameters.file&&(d.push({link:this.parameters.file,img:this.parameters.image,title:this.parameters.title,mediaid:this.parameters.id,hash:this.parameters.hash,videoExt:btoa(JSON.stringify({clickUrl:this.parameters.clickThru}))}),this.amby.dispatch(Ot.upsertState({formatConfig:{staticRoot:this.domain},libConfig:{mgPlayerStylesUrlTemplate:"//{{DOMAIN}}/mgPlayer/css/mgPlayer_v2.css"}})),this.playerComponent=new uu.MgAdPlayerComponent({amby:this.amby,rootElement:this.rootElement},{container:this.slot,adPlaylist:d,quality:"original"}),this.amby.dispatch(Ot.setAdInit(Xt.states.INIT_NEEDED)))},r.prototype.pauseAd=function(){this.mgDebug("PauseAd requested."),this.amby.dispatch(Ot.setTriggerToTrue("ad.actionPause"))},r.prototype.resizeAd=function(e,t,i){i===void 0&&(i="normal"),this.amby.dispatch(Ot.upsertAdState({size:{width:e,height:t},resize:!0})),this.adHeight=t,this.adWidth=e},r.prototype.resumeAd=function(){this.mgDebug("ResumeAd requested."),this.amby.dispatch(Ot.setTriggerToTrue("ad.actionPlay"))},r.prototype.setAdVolume=function(e){this.mgDebug("SetAdVolume(".concat(e,") requested.")),e===0?this.amby.dispatch(Ot.upsertAdState({mute:!0,initMuted:!0})):this.amby.dispatch(Ot.upsertAdState({unmute:!0,initMuted:!1}))},r.prototype.skipAd=function(){this.mgDebug("SkipAd requested."),this.amby.dispatch(Ot.setTriggerToTrue("ad.actionSkip")),this.sendTracking(ot.skip),this.triggerEvent(at.AdSkipped)},r.prototype.startAd=function(){this.mgDebug("StartAd requested."),this.amby.dispatch(Ot.setTriggerToTrue("ad.actionPlay"))},r.prototype.stopAd=function(){this.mgDebug("StopAd requested."),this.amby.dispatch(Ot.setTriggerToTrue("ad.actionStop"))},r.prototype.triggerEvent=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.eventListeners[e]&&this.eventListeners[e].forEach(function(a){window.setTimeout(function(){a(t)},0)})},r.prototype.subscribe=function(e,t){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].indexOf(e)===-1&&this.eventListeners[t].push(e)},r.prototype.unsubscribe=function(e,t){if(this.eventListeners[t])for(;this.eventListeners[t].indexOf(e)>-1;)this.eventListeners[t].splice(this.eventListeners[t].indexOf(e),1)},r.prototype.resetVars=function(){this.video25=!1,this.video50=!1,this.video75=!1,this.firstTimePlay=!0},r.prototype.mgDebug=function(e,t){if(t===void 0&&(t=!1),this.debug||t){var i=e;typeof i!="object"&&(i="".concat(new Date().toISOString().replace("Z","MG")," ").concat(i)),console.debug(i)}},r.prototype.sendTracking=function(e,t){var i=this;t===void 0&&(t=!1),!this.silentMode&&this.tracking[e]&&this.tracking[e].forEach(function(a){var s=a;window.setTimeout(function(){var n=Bt.Helpers.getConsentData(),l=n.gdpr?"gdpr":"";s=Bt.Helpers.replaceAll(s,"{gdpr}",String(Number(n.gdpr))),s=Bt.Helpers.replaceAll(s,"[REGULATIONS]",l),s=Bt.Helpers.replaceAll(s,"{gdpr_consent}",n.consentData),s=Bt.Helpers.replaceAll(s,"[GDPRCONSENT]",n.consentData),s=Bt.Helpers.replaceAll(s,"{cxurl}",i.amby.get("cxurl","")),t&&i.mgDebug("".concat(e," URL: ").concat(s)),Bt.Helpers.createImg(s)},0)})},r.prototype.clearViewableTimeout=function(){this.viewableTimeout&&(clearTimeout(this.viewableTimeout),this.viewableTimeout=null)},r}();gs.Vast=mu});var ys=re(Bi=>{"use strict";w();_();k();C();D();I();var fu=Bi&&Bi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.VpaidPlayerComponent=void 0;var gu=_o(),Ze=Ne(),_e=De(),xt=Oe(),yu=Ea(),Je=we(),vu=ko(),bu=function(r){fu(e,r);function e(t,i){var a=r.call(this,t,i)||this;return a.config={},a.impressionSent=!1,a.slotId=0,a.slots=[],a.slotsToDelete=[],a.hadPreRoll=!1,a.requestsLimit=parseInt(i.requestsLimit,10)||0,a.config=t.mgRec.config,a.inited=!1,a.impressionSent=!1,a.startedSent=!1,a.parameters={},a.wrapperNumber=0,a.teaserDebug=Je.Helpers.getUrlParam("mgwteaser"),a.vpaid=!1,a.slotId=0,a.slots=[],a.slotsToDelete=[],a.vastIndex=0,a.vpaidMode=i.vpaidMode||Ze.vpaidModes.INSECURE,a.hadPreRoll=!1,a.contentVideoDurationLimit=a.getContentVideoDuration(),a.teaserDebug&&(a.adSource=Je.Helpers.replaceAdSource(a.adSource,a.teaserDebug)),!a.adSource&&!a.adResponse&&(a.requestNeeded=!1,a.amby.get("ad.vastContent")?a.adResponse=a.amby.get("ad.vastContent"):a.amby.addSubListener("ad.vastContent",function(){a.adResponse=a.amby.get("ad.vastContent"),a.requestNeeded&&a.sendRequest()})),a.amby.get("formatConfig.detectUnmute",!0)&&(a.unmuteDetectComponent=new yu.UnmuteDetectComponent(t)),a.amby.addSubListener("".concat(a.name,".init"),function(){a.amby.get("".concat(a.name,".init"))===Ze.states.INIT_IN_PROGRESS&&(0,xt.mgDebug)("Ad starts search."),Je.Helpers.vitalCall(function(){return a.initPlayer()},a.amby.get("isVital",!0))}),a.amby.addTriggerListener("".concat(a.name,".actionPlay"),function(){if(a.vpaidManager){a.apiAction=!0;var s=a.amby.get("".concat(a.name,".status"));(!s||s!==Ze.states.STATUS_PLAYING)&&(!s||s===Ze.states.STATUS_READY?a.start():a.vpaidManager.resumeAd())}else a.playRequested=!0}),a.amby.addTriggerListener("".concat(a.name,".actionStop"),function(){a.vpaidManager&&a.vpaidManager.stopAd()}),a.amby.addTriggerListener("".concat(a.name,".actionClose"),function(){a.amby.dispatch(_e.setAdVisible(!1,a.name)),a.close()}),a.amby.addTriggerListener("ad.mute",function(){a.mute()}),a.amby.addTriggerListener("player.firstFrame",function(){if(a.hadPreRoll&&a.amby.get("player.itemIndex")===0){a.hadPreRoll=!1;return}a.contentVideoDurationLimit=a.getContentVideoDuration()}),a}return e.prototype.initPlayer=function(){switch(this.amby.get("".concat(this.name,".init"))){case Ze.states.INIT_NEEDED:this.amby.dispatch(_e.setAdInit(Ze.states.INIT_IN_PROGRESS,this.name)),this.sendRequest();break;case Ze.states.INIT_RESET:this.reset(),this.amby.dispatch(_e.setAdInit(Ze.states.INIT_IN_PROGRESS,this.name)),this.sendRequest();break;case Ze.states.INIT_STOP:this.reset();break}},e.prototype.sendRequest=function(){if(!this.adSource&&!this.adResponse){this.requestNeeded=!0;return}this.adResponse?(this.xmlDocument=Je.Helpers.parseXml(this.adResponse),this.proccessResponse()):this.sendXMLRequest(!0)},e.prototype.proccessResponse=function(){var t,i,a=Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"VASTAdTagURI");if(a&&this.wrapperNumber<4){this.wrapperNumber+=1,this.getTracking(),this.sendXMLRequest(!0,a);return}this.mediaUrl=Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"MediaFile"),this.adParameters=Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"AdParameters");try{this.parameters=Je.Helpers.mergeObjects(this.parameters,JSON.parse(this.adParameters||"{}"))}catch{this.parameters.original=this.adParameters}this.parameters.skipOffset=this.skipOffset,this.amby.dispatch(_e.upsertState((t={},t[this.name]={responseXml:this.xmlDocument.documentElement.outerHTML,responseHash:Je.Helpers.cyrb53(this.xmlDocument.documentElement.outerHTML),responded:!0},t))),this.amby.dispatch(_e.upsertState({vastXml:this.xmlDocument.documentElement.outerHTML}));var s=this.xmlDocument.querySelector("MediaFile");if(!s){var n=this.xmlDocument.querySelector("Ad");n?this.amby.dispatch(_e.setTriggerToTrue("".concat(this.name,".adbidinvalid"))):this.amby.dispatch(_e.setTriggerToTrue("".concat(this.name,".adbidempty")))}this.amby.dispatch(_e.setTriggerToTrue("".concat(this.name,".adbid"))),this.parameters.clickThru=Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"ClickThrough"),this.parameters.clickTracking=Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"ClickTracking"),this.getTracking(),s&&s.getAttribute("type")&&s.getAttribute("type").match(/video\/(mp4|webm)/)&&(this.parameters.cid=this.amby.get("widgetId"),this.parameters.file=this.mediaUrl,this.parameters.image="",this.parameters.title=Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"AdTitle"),this.parameters.protocol=this.amby.get("protocol"),this.parameters.domain=this.amby.get("formatConfig.staticRoot")||"video-native.".concat(this.amby.get("subnetDomain","")),this.parameters.isLinear=!!this.xmlDocument.querySelector("Creative > Linear"),this.parameters.isLinear&&!this.parameters.skipOffset&&(this.parameters.skipOffset=Je.Helpers.parseTime(this.xmlDocument.querySelector("Creative > Linear").getAttribute("skipoffset"))),this.amby.dispatch(_e.upsertAdState({adClickUrl:this.parameters.clickThru})),this.parameters.duration=Je.Helpers.parseTime(Je.Helpers.getFromDocumentByTagName(this.xmlDocument,"Duration"))),(0,xt.getDebugFlag)()&&(this.parameters.debug=(0,xt.getDebugFlag)()),this.xmlRequestTimeoutTime&&(this.parameters.xmlRequestTimeout=this.xmlRequestTimeoutTime),this.parameters.noTracking=!0,this.parameters.downtimeDetector=this.amby.get("downtimeDetector",!1),this.parameters.downtimeTimeout=this.amby.get("downtimeTimeout",!1),this.parameters.startAdTimeout=this.amby.get("startAdTimeout",!1),this.parameters.cxurl=this.amby.get("cxurl",""),this.parameters.formatName=this.amby.get("formatConfig.name"),this.parameters.enableDurationBalancer=this.amby.get("formatConfig.enableDurationBalancer",!1),this.parameters.curAdPosition=this.amby.get("ad.curAdPosition"),this.parameters.sendDetailedEvents=(i=this.config.sendDetailedEvents)!==null&&i!==void 0?i:!1,this.parameters.forceMute=this.amby.get("formatConfig.forceMute",!1),this.adParameters=JSON.stringify(this.parameters),this.mediaUrl.match(/\.(mp4|webm)/i)?this.initVastPlayer():this.mediaUrl!==""?(this.vpaid=!0,this.vpaidMode===Ze.vpaidModes.INSECURE?this.initScript():this.initScriptInFrame()):((0,xt.mgDebug)("#".concat(this.name,": VPAID ERROR: No MediaFile found. [").concat(this.adSource,"]")),this.passback())},e.prototype.initVastPlayer=function(){this.createSlot(),this.playerDiv.appendChild(this.slot),this.vastIndex+=1,this.vpaidManager=new vu.Vast("".concat(this.playerDivId,"_").concat(this.vastIndex)),this.subscribeEvents(),this.slots.push({slot:this.slot}),(0,xt.mgDebug)("vpaidManager.initAd"),this.vpaidManager.initAd(this.amby.get("ad.size.width",300),this.amby.get("ad.size.height",169),"normal",this.desiredBitrate,{AdParameters:this.adParameters,contentVideoDurationLimit:this.contentVideoDurationLimit},{slot:this.slot,videoSlot:this.videoSlot,rootElement:this.rootElement})},e.prototype.initScript=function(t){var i=this;t===void 0&&(t=document),this.createSlot();var a=t.body;t===document?this.playerDiv.appendChild(this.slot):a.appendChild(this.slot),this.playerDiv.appendChild(this.slot),this.scriptFile=t.createElement("script"),this.scriptFile.type="text/javascript",this.scriptFile.id="scriptFile".concat(this.slotId),this.scriptFile.src=encodeURI(this.mediaUrl),this.slots.push({slot:this.slot,scriptFile:this.scriptFile}),this.scriptFile.addEventListener("load",function(){if(i.vpaidManager=window.getVPAIDAd(),parseFloat(i.vpaidManager.handshakeVersion("2.0",""))>=2){i.subscribeEvents();var s=JSON.parse(i.adParameters);i.amby.dispatch(_e.setTriggerToTrue("".concat(i.name,".vpaidinit"))),i.vpaidManager.initAd(i.amby.get("ad.size.width",640),i.amby.get("ad.size.height",480),"normal",i.desiredBitrate,{AdParameters:s.original?s.original:i.adParameters,contentVideoDurationLimit:i.contentVideoDurationLimit},{slot:i.slot,videoSlot:i.videoSlot,rootElement:i.rootElement})}}),a.appendChild(this.scriptFile),this.amby.dispatch(_e.setTriggerToTrue("widget.rawinit"))},e.prototype.initScriptInFrame=function(){var t=this;this.iFrame=document.createElement("iframe"),this.iFrame.width="100%",this.iFrame.height="100%",this.iFrame.style.padding="0",this.iFrame.style.margin="0",this.iFrame.style.border="0",this.iFrame.style.position="relative",this.iFrame.addEventListener("load",function(){var i=t.iFrame.contentWindow.document.body;i.appendChild(t.slot),i.style.position="relative",i.style.margin="0",i.style.padding="0",i.style.width="100%",i.style.height="100%",i.style.overflow="hidden",t.initScript(t.iFrame.contentWindow.document)}),this.playerDiv.appendChild(this.iFrame)},e.prototype.subscribeEvents=function(){var t=this;this.vpaidManager.subscribe(function(){var i,a,s=t.amby.get("".concat(t.name,".status"));s!==Ze.states.STATUS_PLAYING&&(Je.Helpers.vitalCall(function(){var n;t.amby.dispatch(_e.setAdInit(Ze.states.INIT_DONE)),t.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_READY,t.name)),t.amby.dispatch(_e.upsertState((n={},n[t.name]={adloaded:!0},n))),t.amby.dispatch(_e.upsertState({ad:{loaded:!0}}))},t.amby.get("isVital",!0)),t.vpaidManager.getAdDuration&&t.vpaidManager.getAdDuration()&&t.amby.dispatch(_e.upsertState((i={},i[t.name]={position:0,duration:t.vpaidManager.getAdDuration()},i))),t.amby.dispatch(_e.upsertState((a={},a[t.name]={isLinear:t.vpaidManager.getAdLinear()},a))),t.playRequested&&t.vpaidManager&&(t.start(),t.playRequested=!1))},this.events.AdLoaded),this.vpaidManager.subscribe(function(i){t.onAdError(i)},this.events.AdError),this.vpaidManager.subscribe(function(){(0,xt.mgDebug)("#".concat(t.name,": VPAID Manager: get AdStarted.")),t.vpaidManager&&(t.lastPosition=Math.trunc(t.vpaidManager.getAdDuration()-t.vpaidManager.getAdRemainingTime())),t.createPositionTimeout()},this.events.AdStarted),this.vpaidManager.subscribe(function(){t.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_PAUSED,t.name))},this.events.AdPaused),this.vpaidManager.subscribe(function(){t.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_PLAYING,t.name))},this.events.AdPlaying),this.vpaidManager.subscribe(function(){t.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_PLAYING,t.name))},this.events.AdVideoStart),this.vpaidManager.subscribe(function(i){i&&i[0]&&(i[0].showHash&&t.amby.dispatch(_e.upsertAdState({adHash:i[0].showHash})),i[0].poc&&t.amby.dispatch(_e.upsertAdState({poc:i[0].poc}))),t.amby.get("ad.adHash")&&!(i&&i[0]&&i[0].eventFromNativeBackfill)&&t.amby.dispatch(_e.setTriggerToTrue("ad.impression")),t.amby.dispatch(_e.upsertState({skipBtn:{skipable:!1}})),setTimeout(function(){t.amby.dispatch(_e.upsertState({ad:{poc:null,adHash:null}}))}),t.amby.get("ad.curAdPosition")==="pre"&&(t.hadPreRoll=!0),(0,xt.mgDebug)("contentVideoDurationLimit: ".concat(t.contentVideoDurationLimit)),t.contentVideoDurationLimit-=t.vpaidManager.getAdDuration(),t.amby.dispatch(_e.upsertAdState({currentImpressions:t.amby.get("ad.currentImpressions",0)+1}))},this.events.AdImpression),this.vpaidManager.subscribe(function(){var i;t.amby.dispatch(_e.upsertState((i={},i[t.name]={complete:!0},i))),t.amby.dispatch(_e.upsertAdState({videoEnded:!0}))},this.events.AdVideoComplete),this.vpaidManager.subscribe(function(){window.setTimeout(function(){t.destroy(),t.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_STOPPED,t.name))},500)},this.events.AdStopped)},e.prototype.start=function(){var t=this;(this.amby.get("ad.initMuted",!0)||Je.Helpers.iOSversion())&&this.mute(),Je.Helpers.vitalCall(function(){Je.Helpers.iOSversion()&&t.amby.dispatch(_e.upsertState({player:{muted:!0}}))},this.amby.get("isVital",!0)),this.vpaidManager.startAd()},e.prototype.reset=function(){(0,xt.mgDebug)("VPAID Player: Deleting AD player."),this.close(),this.destroy(),this.parameters={},this.requestsNumber=0},e.prototype.mute=function(){var t=this;Je.Helpers.vitalCall(function(){t.vpaidManager&&((0,xt.mgDebug)("VPAID Player: AD mute request sent."),t.vpaidManager.setAdVolume(0),t.amby.dispatch(_e.setAdMuted(!0)),t.amby.dispatch(_e.upsertState({muteBtn:{muted:!0}})))},this.amby.get("isVital",!0))},e.prototype.unmute=function(){this.vpaidManager&&((0,xt.mgDebug)("VPAID Player: AD unmute request sent."),this.vpaidManager.setAdVolume(1),this.amby.dispatch(_e.setAdMuted(!1)),this.amby.dispatch(_e.upsertState({muteBtn:{muted:!1}})))},e.prototype.close=function(){this.vpaidManager&&this.vpaidManager.stopAd&&this.vpaidManager.stopAd()},e.prototype.clearSlots=function(){for(;this.slotsToDelete.length>0;){var t=this.slotsToDelete.shift();t.slot.parentNode.removeChild(t.slot),t.scriptFile&&t.scriptFile.parentNode.removeChild(t.scriptFile)}},e.prototype.destroy=function(){(0,xt.mgDebug)("Delete slots"),this.slotsToDelete=this.slots},e.prototype.onAdError=function(t){var i=this;t&&t.getError&&typeof t.getError=="function"?(0,xt.mgDebug)(t.getError()):(0,xt.mgDebug)(JSON.stringify(t)),this.requestsLimit>this.requestsNumber?(this.requestsNumber+=1,window.setTimeout(function(){i.destroy(),i.sendRequest()},500)):(this.passback(),this.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_ERROR,this.name)))},e.prototype.replaceMacros=function(t){return this.getPreparedAdSourceSizes(t.replace("{uuid}",this.uuid))},e.prototype.createSlot=function(){this.clearSlots(),this.slotId+=1,this.slot=document.createElement("div"),this.slot.id="slot".concat(this.slotId),this.slot.style.position="relative",this.slot.style.top="0",this.slot.style.left="0",this.slot.style.width="100%",this.slot.style.height="100%",this.slot.style.padding="0",this.slot.style.margin="0",this.videoSlot=document.createElement("video"),this.videoSlot.setAttribute("muted","true"),this.videoSlot.setAttribute("playsinline","true"),this.videoSlot.setAttribute("webkit-playsinline","true"),this.videoSlot.style.width="100%",this.videoSlot.style.height="100%",this.videoSlot.style.zIndex="-1",this.videoSlot.style.position="absolute",this.videoSlot.style.top="0",this.videoSlot.style.left="0",this.slot.appendChild(this.videoSlot)},e.prototype.sendXMLRequest=function(t,i){var a=this;t===void 0&&(t=!1),i===void 0&&(i=null);var s=new XMLHttpRequest,n=i||this.adSource;s.open("GET",this.replaceMacros(n)),s.responseType="document",s.withCredentials=t,s.timeout=6e4,s.addEventListener("load",function(){s.status!==200?t?a.sendXMLRequest(!1,n):(a.passback(),a.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_ERROR,a.name))):(a.xmlDocument=s.response,a.proccessResponse())}),s.addEventListener("error",function(){t?a.sendXMLRequest(!1,n):(a.passback(),a.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_ERROR,a.name)))}),s.addEventListener("timeout",function(){a.passback(),a.amby.dispatch(_e.setAdStatus(Ze.states.STATUS_ERROR,a.name))}),s.send()},e.prototype.passback=function(){if(this.amby.get("passback",!1)){this.amby.dispatch(_e.setTriggerToTrue("ad.passback"));try{Je.Helpers.createScriptAndRun("Passback_".concat(this.amby.get("mgVideoIndex")),this.amby.get("passback",!1))}catch(t){(0,xt.mgDebug)(t)}}},e.prototype.getContentVideoDuration=function(){var t=this.amby.get("player.duration",0),i=this.amby.get("playlist",[]);if(!t&&i.length){var a=i[0],s=JSON.parse(atob(a.videoExt));t=s.duration}return t},e}(gu.VpaidPlayerBase);Bi.VpaidPlayerComponent=bu});var bs=re(vs=>{"use strict";w();_();k();C();D();I();Object.defineProperty(vs,"__esModule",{value:!0});vs.ExcoComponent=void 0;var Vt=Ne(),zt=De(),xu=Oe(),Tu=function(){function r(e,t){var i=this;this.amby=e.amby;var a=t.name,s=a===void 0?"ad":a,n=t.container,l=t.adSource;this.rootElement=e.rootElement,this.name=s,this.playerContainerDiv=n,this.adSource=l,this.playerId=this.playerContainerDiv.id;var d=document.location.protocol;this.protocol=d.indexOf("http")===0?d:"https:",(0,xu.mgDebug)("ExCoComponent initializing."),this.amby.addSubListener("".concat(this.name,".init"),function(){i.onPlayerInit()})}return r.prototype.onPlayerInit=function(){var e=this;switch(this.amby.get("".concat(this.name,".init"))){case Vt.states.INIT_NEEDED:this.amby.dispatch(zt.setAdInit(Vt.states.INIT_IN_PROGRESS,this.name)),setTimeout(function(){return e.initPlayer()},0);break;case Vt.states.INIT_RESET:this.amby.dispatch(zt.setAdInit(Vt.states.INIT_IN_PROGRESS,this.name)),this.reset(),this.initPlayer();break;case Vt.states.INIT_STOP:this.reset();break}},r.prototype.initPlayer=function(){if(this.amby.dispatch(zt.setAdStatus(Vt.states.STATUS_INIT,this.name)),!this.script){var e=document.createElement("div");e.id=this.adSource,this.playerContainerDiv.appendChild(e),this.script=document.createElement("script"),this.script.setAttribute("type","text/javascript"),this.script.className="exco-player",this.script.src="".concat(this.protocol,"//player.ex.co/player/").concat(this.adSource);var t=document.getElementsByName("script");t&&t.length>0?t[0].parentNode.insertBefore(this.script,t[0]):document.head.insertBefore(this.script,document.head.firstChild),this.addPlayerListeners()}},r.prototype.addPlayerListeners=function(){var e=this;window.addEventListener("message",function(t){var i;if(t.data.type==="exco-event")switch(t.data.name){case"player-load":e.amby.dispatch(zt.upsertState((i={},i[e.name]={adTag:t.data.metadata.playerId},i))),e.amby.dispatch(zt.setAdInit(Vt.states.INIT_DONE,e.name)),e.amby.dispatch(zt.setAdStatus(Vt.states.STATUS_READY,e.name)),e.amby.get("ad.visible",!1)||e.amby.dispatch(zt.setAdStatus(Vt.states.STATUS_PLAYING,e.name));break;case"ad-impression":break;case"ad-completed":break;case"cta-clicked":break;case"player-closed":break;case"player-muted":break;case"player-unmuted":break;case"player-playing":e.amby.dispatch(zt.setAdStatus(Vt.states.STATUS_PLAYING,e.name));break;case"player-paused":e.amby.dispatch(zt.setAdStatus(Vt.states.STATUS_PAUSED,e.name));break}})},r.prototype.reset=function(){this.amby.dispatch(zt.upsertAdState({adTag:null,adHash:null}))},r}();vs.ExcoComponent=Tu});var ga=re(Oi=>{"use strict";w();_();k();C();D();I();var Su=Oi&&Oi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.AniviewDirectComponent=void 0;var yt=Ne(),ut=De(),fa=Oe(),wu=nr(),_u=ra(),ku=Ea(),Cu=La(),Du=we(),Iu=function(r){Su(e,r);function e(t,i){var a=r.call(this,t,i)||this;a.amby=t.amby,a.rootElement=t.rootElement,a.widgetBlock=document.querySelector('[id*="ScriptRootC'.concat(a.amby.get("widgetId"),'"]'));var s=i.name,n=s===void 0?"ad":s,l=i.container,d=i.publisherId,h=i.tagId;a.name=n,a.playerContainerDiv=l,a.publisherId=d,a.tagId=h,a.playerId=a.playerContainerDiv.id,a.addedNodes=[],a.startMode="DoNotWaitForAd",a.playSent=!1,a.inView=!1;var y=document.location.protocol;return a.protocol=y.indexOf("http")===0?y:"https:",(0,fa.mgDebug)("AniViewDirectComponent initializing."),a.amby.get("formatConfig.forceMute",!1)&&(a.noSoundComponent=new _u.NoSoundComponent(a.amby,{playerDiv:a.playerContainerDiv,adName:n})),a.amby.get("formatConfig.hideConsole",!1)&&window.location.href.indexOf("mgwdebug")===-1&&(a.proxyConsoleComponent=new Cu.ProxyConsoleComponent(a.amby,{playerDiv:a.playerContainerDiv})),a.amby.get("formatConfig.detectUnmute",!0)&&(a.unmuteDetectComponent=new ku.UnmuteDetectComponent(t)),a.amby.addSubListener("".concat(a.name,".init"),function(){a.onPlayerInit()}),a}return e.prototype.onPlayerInit=function(){var t=this;switch(this.amby.get("".concat(this.name,".init"))){case yt.states.INIT_NEEDED:this.amby.dispatch(ut.setAdInit(yt.states.INIT_IN_PROGRESS,this.name)),setTimeout(function(){return t.initPlayer()},0);break;case yt.states.INIT_RESET:this.amby.dispatch(ut.setAdInit(yt.states.INIT_IN_PROGRESS,this.name)),this.initPlayer();break;case yt.states.INIT_STOP:break}},e.prototype.initPlayer=function(){var t=this;if(!this.amby.get("cappingData")){this.initRequested=!0,this.cappingDataListener||(this.amby.addSubListener("cappingData",function(){t.amby.get("cappingData")&&t.initRequested&&(t.initRequested=!1,t.initPlayer())}),this.cappingDataListener=!0);return}this.script||(window["av_getPosition_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex"))]||(window["av_getPosition_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex"))]=function(i){return i.posType="in",t.playerContainerDiv}),this.subscribeAniviewEvents(),window["av_configOverride_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex"))]||(window["av_configOverride_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex"))]=function(i){i.content.firstPrerollSlot={time:0,firstAdTimeOut:15,preloadAdTime:5,maxAds:2,nextAdTimeout:8},i.content.commonSlots=[{time:5,firstAdTimeOut:15,preloadAdTime:5,maxAds:2,nextAdTimeout:8}],t.amby.get("trickyInstream")==="1"&&t.amby.get("trickyPause",!1)&&!t.amby.get("ad.canPlay",!1)&&(i.autoPlay=!1,i.startMode=void 0,i.adConfig.preload={inventory:!0})}),this.script=document.createElement("script"),this.script.id="AV".concat(this.tagId),this.script.dataset.positionApi="av_getPosition_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex")),this.script.dataset.playerApi="av_playerApi_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex")),this.script.dataset.configApi="av_configOverride_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex")),this.script.async=!0,this.script.setAttribute("type","text/javascript"),this.script.src=this.getScriptUrl(),this.script.addEventListener("load",function(){t.onPlayerLoad()}),this.widgetBlock.parentNode.appendChild(this.script),this.isInDOM()||this.amby.dispatch(ut.setTriggerToTrue("widget.newBox")),this.amby.dispatch(ut.setTriggerToTrue("ad.waitingForScript")))},e.prototype.onPlayerLoad=function(){var t=this;this.amby.dispatch(ut.setAdInit(yt.states.INIT_DONE,this.name)),this.amby.dispatch(ut.setAdStatus(yt.states.STATUS_READY,this.name)),setTimeout(function(){if(t.playerContainer=t.rootElement.querySelector("div.AV".concat(t.tagId)),!t.playerContainer&&(t.playerContainer=document.querySelector("div.AV".concat(t.tagId)),t.playerContainer)){t.playerGUI=t.playerContainer.querySelector(".avp-p-gui");var i=t.findCss();i.forEach(function(a){t.playerContainerDiv.appendChild(a.cloneNode(!0)),t.playerContainerDiv.appendChild(t.playerContainer)})}t.amby.get("formatConfig.forceMute",!1)&&(t.soundDirectButton=t.playerContainerDiv.querySelector("div.avp-p-cn-s.avp-btn"),t.soundDirectButton&&t.soundDirectButton.addEventListener("click",function(){t.amby.dispatch(ut.upsertAdState({initMuted:!t.amby.get("ad.initMuted",!0)}))})),t.directCloseButton=t.playerContainerDiv.querySelector("avp-close-button.avp-close-button"),t.directCloseButton&&t.directCloseButton.addEventListener("click",function(){t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_STOPPED))})},1e3),this.playerContainerDiv.addEventListener("transitionend",function(){var i=t.rootElement.querySelector("#aniBox>div");i||(i=document.querySelector("#aniBox>div")),i&&(i.style.height="".concat(t.amby.get("ad.size.height"),"px"))}),this.amby.addSubListener("player.isSticky",function(){var i=t.rootElement.querySelector("#aniBox>div");i||(i=document.querySelector("#aniBox>div")),t.amby.get("player.isSticky",!1)?setTimeout(function(){i&&(i.style.height="".concat(t.amby.get("ad.size.height"),"px"))},50):setTimeout(function(){i&&i.style.removeProperty("height")},50)}),this.amby.get("trickyInstream")==="1"&&this.amby.get("trickyPause",!1)&&!this.amby.get("ad.canPlay",!1)&&this.amby.addSubListener("ad.canPlay",function(){t.inView&&!t.playSent&&t.player&&(t.playSent=!0,t.player.play())})},e.prototype.isInDOM=function(){for(var t=this.playerContainerDiv;t!==document&&t.parentNode;)t=t.parentNode;return t===document},e.prototype.findCss=function(){if(!this.playerGUI)return[];var t=[],i=document.styleSheets;this.playerGUI.matches=this.playerGUI.matches||this.playerGUI.webkitMatchesSelector||this.playerGUI.mozMatchesSelector||this.playerGUI.msMatchesSelector||this.playerGUI.oMatchesSelector;for(var a=0;a<i.length;a++)if(i[a].ownerNode.tagName==="STYLE"){for(var s=i[a].rules||i[a].cssRules,n=0;n<s.length;n++)if(this.playerGUI.matches(s[n].selectorText)){t.push(i[a].ownerNode);break}}return t},e.prototype.getScriptUrl=function(){return"".concat(this.protocol,"//tg1.aniview.com/api/adserver/spt?AV_TAGID=")+"".concat(this.tagId,"&AV_PUBLISHERID=").concat(this.publisherId,"&").concat(this.getRef1())},e.prototype.passback=function(){if(this.amby.get("passback",!1)){this.amby.dispatch(ut.setTriggerToTrue("ad.passback"));try{Du.Helpers.createScriptAndRun("Passback_".concat(this.amby.get("mgVideoIndex")),this.amby.get("passback",!1))}catch(t){(0,fa.mgDebug)(t)}}},e.prototype.subscribeAniviewEvents=function(){var t=this;window["av_playerApi_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex"))]||(window["av_playerApi_".concat(this.tagId,"_").concat(this.amby.get("mgVideoIndex"))]=function(i,a){i&&i.startMode&&(t.startMode=i.startMode.mode),t.player=a,a.getEvents().forEach(function(s){s!=="ContentTimeChange"&&a.on(s,function(n){(0,fa.mgDebug)(s),(0,fa.mgDebug)(n)})}),a.on("AdError",function(s){s&&s.data&&s.data.errorLimit&&((0,fa.mgDebug)("AniviewDirect final AdError"),t.passback(),t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_ERROR,t.name)))}),t.amby.get("trickyInstream")==="1"&&t.amby.get("trickyPause",!1)&&a.on("ContentViewabilityChanged",function(s){var n;t.inView=!!(!((n=s?.data)===null||n===void 0)&&n.inView),t.inView&&!t.playSent&&t.amby.get("ad.canPlay",!1)&&(t.playSent=!0,t.player.play())}),a.on("AdPlaying",function(){t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_PLAYING,t.name))}),a.on("AdStopped",function(){t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_STOPPED,t.name))}),a.on("AdClosed",function(){t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_STOPPED,t.name))}),a.on("AdStarted",function(){t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_PLAYING,t.name))}),a.on("AdImpression",function(){t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_PLAYING,t.name))}),a.on("ContentPlaying",function(){t.startMode!=="WaitForAd"&&t.amby.dispatch(ut.setAdStatus(yt.states.STATUS_PLAYING,t.name))})})},e}(wu.AniviewBase);Oi.AniviewDirectComponent=Iu});var xs=re(Mi=>{"use strict";w();_();k();C();D();I();var Pu=Mi&&Mi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.SmartBackfillComponent=void 0;var Eu=De(),Au=aa(),Lu=we(),Bu=function(r){Pu(e,r);function e(t){var i=r.call(this)||this;i.widget=t,i.amby=t.amby,i.rejectedSent=!1,i.observers=[],i.amby.addSubListener("ad.startRequested",function(){i.amby.get("ad.startRequested",!1)&&i.observers.forEach(function(s){s.disconnect()})});var a=i.getMediaElements(document.body);return a&&a.forEach(function(s){i.addListener(s)}),setTimeout(function(){i.checkForIframes(document.body),setTimeout(function(){i.observedDocuments.push(document),i.observers.push(i.getObserver(document))})}),i}return e.prototype.observerAction=function(t){var i=this;if(t instanceof HTMLElement&&((t.tagName==="VIDEO"||t.tagName==="AUDIO")&&this.addListener(t),t.querySelectorAll)){var a=this.getMediaElements(t);a&&a.forEach(function(s){i.addListener(s)})}setTimeout(function(){i.checkForIframes(t.ownerDocument)})},e.prototype.checkIframeAction=function(t){var i=this,a=Lu.Helpers.checkIframe(t);if(a&&this.observedDocuments.indexOf(a)===-1){this.observedDocuments.push(a);var s=this.getMediaElements(a);s&&s.forEach(function(l){i.addListener(l)});var n=a.getRootNode();this.observers.push(this.getObserver(n,t.contentWindow)),setTimeout(function(){i.checkForIframes(a)})}},e.prototype.addListener=function(t){var i=this;!this.inMgPlayer(t)&&this.listenedElems.indexOf(t)===-1&&(this.listenedElems.push(t),this.checkMedia(),t.addEventListener("playing",function(){i.checkMedia()}),t.addEventListener("pause",function(){i.checkMedia()}))},e.prototype.checkMedia=function(){this.amby.dispatch(Eu.upsertAdState({rejecting:!!this.isAnyPlayerPlaying()}))},e.prototype.isAnyPlayerPlaying=function(){return this.listenedElems.reduce(function(t,i){return e.isPlaying(i)||t},!1)},e.isPlaying=function(t){return t.readyState>2&&t.paused===!1&&(t.currentSrc!==""||t.src!=="")},e}(Au.DomManagerComponent);Mi.SmartBackfillComponent=Bu});var Ts=re(Ri=>{"use strict";w();_();k();C();D();I();var Ou=Ri&&Ri.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Ri,"__esModule",{value:!0});Ri.TremorComponent=void 0;var Mu=ga(),Ru=function(r){Ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getScriptUrl=function(){return"".concat(this.protocol,"//tg1.unrulyvideo.com/api/adserver/spt?AV_TAGID=")+"".concat(this.tagId,"&AV_PUBLISHERID=").concat(this.publisherId,"&").concat(this.getRef1())},e}(Mu.AniviewDirectComponent);Ri.TremorComponent=Ru});var ws=re(Ss=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ss,"__esModule",{value:!0});Ss.CustomEngine=void 0;var Mt=Ne(),ei=De(),Co=Oe(),Wu=we(),Nu=function(){function r(e,t){var i=this;this.amby=e.amby;var a=t.name,s=a===void 0?"ad":a,n=t.container,l=t.adSource;this.adSource=l,this.name=s,this.playerContainerDiv=n,this.addedNodes=[],this.amby.addSubListener("".concat(this.name,".init"),function(){i.onPlayerInit()})}return r.prototype.onPlayerInit=function(){var e=this;switch(this.amby.get("".concat(this.name,".init"))){case Mt.states.INIT_NEEDED:this.amby.dispatch(ei.setAdInit(Mt.states.INIT_IN_PROGRESS,this.name)),setTimeout(function(){return e.initPlayer()},0);break;case Mt.states.INIT_RESET:this.amby.dispatch(ei.setAdInit(Mt.states.INIT_IN_PROGRESS,this.name)),this.initPlayer();break;case Mt.states.INIT_STOP:break}},r.prototype.initPlayer=function(){var e=this;if(Wu.Helpers.addClass(this.playerContainerDiv.parentElement,"noanim"),this.adSource){this.adSource=decodeURIComponent(this.adSource).replace(/\+/g," "),this.script=document.createElement("script");try{var t=this.adSource.match(/render *\(['|"](\S+)['|"]\)/),i=t[1];this.script.id=i}catch(a){(0,Co.mgDebug)("Unsuccessful parsing id tag: ".concat(a))}this.script.async=!0,this.script.setAttribute("type","text/javascript"),this.script.innerHTML=this.adSource,this.playerContainerDiv.appendChild(this.script),(0,Co.mgDebug)("onPlayerLoad load"),this.onPlayerLoad()}this.name==="ad"&&(this.observer=this.getObserver(function(a){e.waitForPlaying(a)}),this.observer.observe(this.playerContainerDiv,{childList:!0,subtree:!0}))},r.prototype.waitForPlaying=function(e){var t=this;e.forEach(function(i){if(i.tagName==="VIDEO")i.addEventListener("playing",function(){t.amby.dispatch(ei.setAdStatus(Mt.states.STATUS_PLAYING,t.name)),t.observer.disconnect()});else if(i.querySelectorAll&&i.querySelectorAll("video")){for(var a=i.querySelectorAll("video"),s=0;s<a.length;s++)a[s].addEventListener("playing",function(){t.amby.dispatch(ei.setAdStatus(Mt.states.STATUS_PLAYING,t.name)),t.observer.disconnect()});for(var n=i.querySelectorAll("img"),s=0;s<n.length;s++)n[s].complete?(t.amby.dispatch(ei.setAdStatus(Mt.states.STATUS_PLAYING,t.name)),t.observer.disconnect()):n[s].addEventListener("load",function(){t.amby.dispatch(ei.setAdStatus(Mt.states.STATUS_PLAYING,t.name)),t.observer.disconnect()})}})},r.prototype.getObserver=function(e){var t=this;return new MutationObserver(function(i){i.forEach(function(a){if(a.type==="childList"&&a.addedNodes.length){var s=Array.prototype.slice.call(a.addedNodes);t.addedNodes.push(s),e(s)}})})},r.prototype.onPlayerLoad=function(){this.amby.dispatch(ei.setAdInit(Mt.states.INIT_DONE,this.name)),this.amby.dispatch(ei.setAdStatus(Mt.states.STATUS_READY,this.name)),this.name!=="ad"&&this.amby.dispatch(ei.setAdStatus(Mt.states.STATUS_PLAYING,this.name))},r}();Ss.CustomEngine=Nu});var Eo=re(Wi=>{"use strict";w();_();k();C();D();I();var Hu=Wi&&Wi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Outstream=void 0;var Ft=Ne(),Se=De(),Vu=Oa(),qu=Wa(),Ke=we(),Gu=Ha(),ya=Oe(),Do=oa(),Uu=ca(),ju=Za(),zu=Ka(),Fu=ia(),Yu=Xa(),Io=as(),$u=pa(),Zu=cs(),Ju=hs(),Po=ma(),Ku=ys(),Qu=bs(),Xu=ga(),em=xs(),tm=Ts(),im=ws(),mr="visibleNotPause",fr="visibleOnly",am=function(r){Hu(e,r);function e(t){var i=r.call(this,t)||this;return i.videoSensorComponent=new ju.VideoSensorComponent(t),i.styleComponent=new Yu.StyleComponent(i.widget),i.styleComponent.styleChecking(function(){i.onStyleLoad()}),i}return e.prototype.onStyleLoad=function(){var t=this;this.amby.get("visibilityKpi")&&this.amby.dispatch(Se.upsertState({widget:{renderTime:Date.now()}})),this.autoStart=this.amby.get("autoStart"),this.slider=this.amby.get("formatConfig.slider",!1),this.sticky=this.amby.get("formatConfig.sticky",!1),this.sliderSize=this.amby.get("formatConfig.sliderSize","m").toLowerCase(),this.sliderAlign=this.amby.get("formatConfig.sliderAlign","right").toLowerCase(),this.reInit=parseInt(this.amby.get("formatConfig.reInit"),10),this.widgetComponent=new qu.WidgetComponent(this.widget,function(){t.deferredInitPlayer()})},e.prototype.deferredInitPlayer=function(){var t=this;(typeof this.formatConfig.startDelay!="number"||this.slider&&this.startScroll)&&(this.formatConfig.startDelay=0),setTimeout(function(){t.initPlayer()},this.formatConfig.startDelay*1e3)},e.prototype.initPlayer=function(){var t=this,i;if(this.formatConfig.targetElemSelector&&(this.targetedElem=document.querySelector(this.formatConfig.targetElemSelector)||this.rootElement.querySelector(this.formatConfig.targetElemSelector)),this.blockMain=this.widget.block.querySelector(".mgbox"),this.blockMain||(this.blockMain=this.widget.block,this.blockMain.style.position="relative"),this.targetedElem&&!this.targetedElem.isEqualNode(this.blockMain)?this.adContainerComponent=new Do.AdContainerComponent(this.amby,document.body):this.adContainerComponent=new Do.AdContainerComponent(this.amby,this.blockMain),this.calcStartOnScroll(this.adContainerComponent.playerContainer),this.amby.addTriggerListener("widget.newBox",function(){t.blockMain=t.widget.block.querySelector(".mgbox"),t.blockMain||(t.blockMain=t.widget.block,t.blockMain.style.position="relative"),(0,ya.mgDebug)("New box found."),(0,ya.mgDebug)(t.blockMain),t.adContainerComponent.appendPlayerContainer(t.blockMain),t.observer&&t.observer.disconnect(),t.observer=Ke.Helpers.onVisible(t.adContainerComponent.playerContainer,function(n){t.onContainerVisible(n)},t.amby.get("formatConfig.visiblePart",.9),t.amby.get("formatConfig.hiddenPart",.5)),t.calcStartOnScroll(t.adContainerComponent.playerContainer),setTimeout(function(){t.placementChanged=!0,t.updatePosition()},50)}),this.moveToBodyComponent=new zu.MoveToBodyComponent(this.widgetId,this.adContainerComponent.playerContainer),this.sticky||this.slider){switch(this.amby.get("formatConfig.sliderSize","m").toLowerCase()){case"s":this.stickyClass="small ";break;case"m":this.stickyClass="medium ";break;case"l":this.stickyClass="large ";break}this.stickyClass+=this.amby.get("formatConfig.sliderAlign","right"),this.adContainerComponent.playerContainer.addEventListener("animationend",function(){t.updatePosition()}),this.adContainerComponent.playerContainer.addEventListener("transitionend",function(){t.updatePosition()})}if(this.slider&&(this.stickPlayer(),this.amby.get("formatConfig.moveToBody",!1)&&this.moveToBodyComponent.attachBody(),this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new Io.LogoComponent(this.amby,this.adContainerComponent.playerContainer,!1))),this.sticky&&this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new Io.LogoComponent(this.amby,this.adContainerComponent.playerContainer)),this.updatePosition(),window.addEventListener("resize",function(){t.updatePosition()}),this.amby.get("formatConfig.focusSound",!1)&&(this.amby.dispatch(Se.upsertAdState({isUnmuteOnHover:!0})),this.adContainerComponent.playerDiv.addEventListener("mouseenter",function(){t.amby.dispatch(Se.upsertAdState({mouseOver:!0}))}),this.adContainerComponent.playerDiv.addEventListener("mouseleave",function(){t.amby.dispatch(Se.upsertAdState({mouseOver:!1}))})),Array.isArray(this.config.adPlayers)){var a=null;if(this.config.adPlayers.forEach(function(n){!a&&typeof n=="object"&&(a=n)}),!a.mobileChannelId&&!a.desktopChannelId&&a.engine==="aniview"&&(a=null),a){var s=Ke.Helpers.getUrlParam("mgwcampaign");switch(s&&(s.match(/pubads\.g/)&&(a.engine="ima"),a.adSource=s),this.amby.dispatch(Se.upsertState({ad:{playerEngine:a.engine}})),this.amby.dispatch(Se.upsertState({ad:{enableCTA:(i=a.enableCTA)!==null&&i!==void 0?i:!1}})),a.engine){case"aniview":this.adComponent=new Vu.AniViewComponent(this.widget,{publisherId:a.publisherId,channelId:this.amby.get("deviceType")==="mobile"?a.mobileChannelId:a.desktopChannelId,playerContainerId:this.adContainerComponent.playerContainer.id,playerDivId:this.adContainerComponent.playerDiv.id,vastRetry:a.vastRetry,errorLimit:a.errorLimit,maxrun:a.maxrun,logLevel:a.logLevel,timeout:parseInt(a.timeout,10),nextAdTimeout:parseInt(a.nextAdTimeout,10),ref1:a.ref1,soundButton:a.soundbutton,pauseButton:a.pausebutton,timeLine:a.timeline,aniviewParams:a.aniviewParams,waterfall:a.waterfall,noCompleteTimeout:a.noCompleteTimeout,skipoffset:a.skipoffset,verifiedSources:a.verifiedSources,initSize:a.initSize});break;case"mgAdPlayer":this.adComponent=new $u.MgAdPlayerComponent(this.widget,{container:this.adContainerComponent.playerDiv,mgsetup:a.mgsetup,quality:a.quality,adPlaylist:a.adPlaylist});break;case"ima":this.skipButton=new Ju.SkipAdButtonComponent(this.amby,this.adContainerComponent.playerContainer,"ad"),this.muteButton=new Po.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),this.adComponent=new Zu.ImaSdkComponent(this.widget,{adSource:a.adSource,requestsLimit:a.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id});break;case"vpaid":this.muteButton=new Po.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),a.adSource||(a.adResponse=this.widget.mgRec.config.vastContent),this.adComponent=new Ku.VpaidPlayerComponent(this.widget,{adSource:a.adSource,requestsLimit:a.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv,desiredBitrate:this.amby.get("formatConfig.bitrate"),vpaidMode:a.vpaidMode,adResponse:a.adResponse,skipoffset:a.skipoffset});break;case"exco":this.adComponent=new Qu.ExcoComponent(this.widget,{adSource:a.adSource,container:this.adContainerComponent.playerDiv});break;case"aniviewDirect":this.adComponent=new Xu.AniviewDirectComponent(this.widget,{publisherId:a.publisherId,tagId:a.playerTagId,ref1:a.ref1,container:this.adContainerComponent.playerDiv});break;case"tremor":this.adComponent=new tm.TremorComponent(this.widget,{publisherId:a.publisherId,tagId:a.playerTagId,ref1:a.ref1,container:this.adContainerComponent.playerDiv});break;case"connatix":this.amby.dispatch(Se.upsertState({ad:{playerEngine:a.engine}})),this.adComponent=new im.CustomEngine(this.widget,{publisherId:a.publisherId,adSource:a.adSource,container:this.adContainerComponent.playerDiv}),this.amby.dispatch(Se.upsertAdState({skipoffset:a.skipoffset}));break}this.amby.dispatch(Se.upsertAdState({skipoffset:a.skipoffset}))}else(0,ya.mgDebug)("There is no available AD player.")}this.amby.addSubListener(["widget","blurred"],function(){t.onAdPlayerBlurred()}),this.amby.addTriggerListener("ad.clicked",function(){t.onAdClickedTriggerBase()}),this.amby.addSubListener("ad.status",function(){var n=t.amby.get("ad.status");n===Ft.states.STATUS_PLAYING?(t.onAdStatusChange(),t.onAdStatusBase()):Ke.Helpers.vitalCall(function(){t.onAdStatusChange(),t.onAdStatusBase()},t.amby.get("isVital",!0))}),this.amby.addSubListener("widget.imageLoaded",function(){t.updatePosition()}),this.amby.get("closeBtn.enabled")&&(this.amby.addSubListener("ad.init",function(){t.amby.get("ad.init")===Ft.states.INIT_DONE&&(t.closeBtnComponent?(!t.closeBtnComponent.elem||!t.adContainerComponent.playerContainer.contains(t.closeBtnComponent.elem))&&t.closeBtnComponent.createElement():t.closeBtnComponent=new Uu.CloseButtonComponent(t.amby,t.adContainerComponent.playerDiv))}),this.amby.addTriggerListener(["closeBtn","clicked"],function(){t.amby.get("player.isSticky",!1)&&t.amby.dispatch(Se.upsertGlobalState({sticky:!1})),t.amby.dispatch(Se.setAdVisible(!1)),t.amby.dispatch(Se.setTriggerToTrue("ad.actionStop")),t.amby.dispatch(Se.setTriggerToTrue("ad.closed"))})),this.muteButton&&this.amby.addTriggerListener("muteBtn.clicked",function(){t.onMuteBtnClicked()}),this.amby.get("formatConfig.smartBackfill",!1)&&(this.amby.addSubListener("ad.rejecting",function(){!t.amby.get("ad.startRequested",!1)&&t.amby.get("ad.rejecting")&&t.amby.get("ad.status")===Ft.states.STATUS_READY&&[Ft.states.STATUS_PLAYING,Ft.states.STATUS_PAUSED].indexOf(t.amby.get("ad.status"))===-1&&(t.amby.dispatch(Se.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout(function(){t.amby.dispatch(Se.setTriggerToTrue("ad.actionStop"))},500))}),this.smartBackfillComponent=new em.SmartBackfillComponent(this.widget)),this.formatConfig.targetElemSelector&&setInterval(function(){t.updatePosition()},500),this.amby.dispatch(Se.setAdVisible(!1)),this.callStartInit()},e.prototype.onAdStatusChange=function(){var t=this,i=this.amby.get("ad.status");switch((0,ya.mgDebug)("Ads ".concat(i,".").concat(this.amby.get("ad.adTag")?" Ad source: ".concat(this.amby.get("ad.adTag")):"")),i){case Ft.states.STATUS_READY:this.amby.get("formatConfig.smartBackfill",!1)&&this.amby.get("ad.rejecting")&&(this.amby.dispatch(Se.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout(function(){t.amby.dispatch(Se.setTriggerToTrue("ad.actionStop"))},500)),this.amby.get("formatConfig.visibleInit",!1)&&Ke.Helpers.vitalCall(function(){return t.amby.dispatch(Se.setAdVisible(!0))},this.amby.get("isVital",!0)),this.observer||(this.observer=Ke.Helpers.onVisible(this.adContainerComponent.playerContainer,function(a){t.onContainerVisible(a)},this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart",.5)),this.sticky&&(0,Fu.addSubListener)("sticky",function(){t.sticky=t.amby.get().sticky})),Ke.Helpers.vitalCall(function(){return t.initActionPlay()},this.amby.get("isVital",!0)),Ke.Helpers.vitalCall(function(){return t.updatePosition()},this.amby.get("isVital",!0));break;case Ft.states.STATUS_PLAYING:this.amby.dispatch(Se.setAdVisible(!0)),this.amby.dispatch(Se.upsertState({muteBtn:{visible:!0}})),this.updatePosition(),this.amby.get("formatConfig.playFunc")&&Ke.Helpers.createScriptAndRun("PlayFunc_".concat(this.mgVideoIndex),this.amby.get("formatConfig.playFunc"));break;case Ft.states.STATUS_STOPPED:this.amby.dispatch(Se.setAdVisible(!1)),this.amby.dispatch(Se.upsertState({muteBtn:{visible:!1}})),this.reInit&&this.createReInitTimeout(),this.amby.get("formatConfig.stopFunc")&&Ke.Helpers.createScriptAndRun("StopFunc_".concat(this.mgVideoIndex),this.amby.get("formatConfig.stopFunc"));break;case Ft.states.STATUS_ERROR:this.amby.dispatch(Se.setAdVisible(!1)),this.reInit&&this.createReInitTimeout(),this.amby.get("formatConfig.stopFunc")&&Ke.Helpers.createScriptAndRun("StopFunc_".concat(this.mgVideoIndex),this.amby.get("formatConfig.stopFunc"));break}},e.prototype.initActionPlay=function(){var t=this;this.slider&&this.startScroll&&!(0,Ke.getInObject)(this.amby.get(),["initedStartScroll"],!1)?(this.amby.dispatch(Se.upsertGlobalState({initedStartScroll:!0})),window.addEventListener("scroll",function(){t.startOnScroll(function(){t.amby.dispatch(Se.upsertAdState({startRequested:!0})),t.amby.dispatch(Se.setTriggerToTrue("ad.actionPlay"))})}),this.startOnScroll(function(){t.amby.dispatch(Se.upsertAdState({startRequested:!0})),t.amby.dispatch(Se.setTriggerToTrue("ad.actionPlay"))})):[fr,mr].indexOf(this.autoStart)>-1&&!this.slider?this.playOnVisible():(this.amby.dispatch(Se.upsertAdState({startRequested:!0})),this.amby.dispatch(Se.setTriggerToTrue("ad.actionPlay"))),this.amby.get("ad.reInited")&&this.amby.get("player.isSticky")&&(this.amby.dispatch(Se.upsertAdState({startRequested:!0})),this.amby.dispatch(Se.setTriggerToTrue("ad.actionPlay")))},e.prototype.updatePosition=function(){var t=this;if(this.slider||this.sticky&&this.amby.get("player.isSticky",!1)){var i=Ke.Helpers.getElemWidth(this.adContainerComponent.playerContainer);this.pos={top:null,left:null,width:i,height:i/this.aspectRatio.width*this.aspectRatio.height,pWidth:i,pHeight:i/this.aspectRatio.width*this.aspectRatio.height}}else{document.body.contains(this.blockMain)||(this.blockMain=this.widget.block.querySelector(".mgbox")||this.widget.block);try{this.pos=Ke.Helpers.getPlayerPos(this.targetedElem&&!this.targetedElem.isEqualNode(this.blockMain)?this.targetedElem:this.blockMain,parseInt(this.formatConfig.teaserIndex,10)||0,parseInt(this.formatConfig.teaserSize,10)||1,parseInt(this.formatConfig.teaserHeight,10)||1,this.formatConfig.teaserStick,this.aspectRatio,this.formatConfig.targetElemSelector,this.amby.get("deviceType")==="mobile",this.rootElement)}catch{setTimeout(function(){t.updatePosition(),t.pos&&t.amby.dispatch(Se.upsertAdState({size:{width:t.pos.pWidth,height:t.pos.pHeight}}))},10);return}}(!this.previousPos||!Ke.Helpers.isEqual(this.previousPos,this.pos)||this.placementChanged)&&this.pos.width>0&&(this.placementChanged=!1,this.previousPos=this.pos,this.adContainerComponent.applyPlayerSize(this.pos,this.slider||this.sticky&&this.amby.get("player.isSticky",!1)),this.amby.dispatch(Se.upsertAdState({resize:!0,size:{width:this.pos.pWidth,height:this.pos.pHeight}})))},e.prototype.stickPlayer=function(){var t=this;this.containerOffsetTop||(this.adContainerComponent.playerContainer.offsetParent?this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetParent.offsetTop+this.adContainerComponent.playerContainer.offsetTop:this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetTop),Ke.Helpers.addClass(this.adContainerComponent.playerContainer,this.stickyClass),Ke.Helpers.addClass(this.adContainerComponent.playerContainer,"noanim"),this.slider||(this.shadowDiv?this.shadowDiv.style.display="block":(this.shadowDiv=document.createElement("div"),this.shadowDiv.style.width="".concat(this.pos.width,"px"),this.shadowDiv.style.height="".concat(this.pos.height*.9,"px"),this.shadowDiv.style.top="".concat(this.pos.top,"px"),this.shadowDiv.style.left="".concat(this.pos.left,"px"),this.shadowDiv.style.position="absolute",this.shadowDiv.className="shadowDiv_".concat(this.amby.get("widgetId")),this.adContainerComponent.playerContainer.parentNode.insertBefore(this.shadowDiv,this.adContainerComponent.playerContainer),Ke.Helpers.onVisible(this.shadowDiv,function(i){i&&t.amby.get("player.isSticky",!1)&&t.unstickPlayer()},1,0))),this.amby.get("formatConfig.moveToBody",!1)&&this.moveToBodyComponent.attachBody(),this.amby.dispatch(Se.setPlayerSticky(!0)),this.placementChanged=!0,this.updatePosition()},e.prototype.unstickPlayer=function(){Ke.Helpers.removeClass(this.adContainerComponent.playerContainer,this.stickyClass),this.shadowDiv&&(this.shadowDiv.style.display="none"),this.amby.get("formatConfig.moveToBody",!1)&&this.moveToBodyComponent.detachBody(this.article.nextSibling),this.amby.dispatch(Se.setPlayerSticky(!1)),this.placementChanged=!0,this.updatePosition()},e.prototype.onMuteBtnClicked=function(){(0,ya.mgDebug)("Mute Button clicked."),this.amby.get("ad.initMuted",!0)?this.amby.dispatch(Se.upsertAdState({initMuted:!1,unmute:!0})):this.amby.dispatch(Se.upsertAdState({initMuted:!0,mute:!0}))},e.prototype.onContainerVisible=function(t){var i=this;if(this.inSight=t,this.sticky){if(t&&!this.amby.get("player.isSticky",!1))this.isOtherWidgetSticky()||(this.wasVisible=!0),[fr,mr].indexOf(this.autoStart)>-1&&this.amby.get("ad.status")!==Ft.states.STATUS_PLAYING&&this.amby.get("player.isPlayingOnVisible",!0)&&(this.amby.dispatch(Se.upsertAdState({startRequested:!0})),this.amby.dispatch(Se.setTriggerToTrue("ad.actionPlay")));else if(this.wasVisible&&(0,Ke.getInObject)(this.amby.get(),["sticky"],!0)&&!this.amby.get("player.isSticky",!1)&&!this.isOtherWidgetSticky())this.stickPlayer();else if(this.amby.get("player.isSticky",!1)){var a=Ke.Helpers.getViewTop(),s=Ke.Helpers.getWindowHeight();a<=this.containerOffsetTop+this.containerHeight*.5&&a+s>=this.containerOffsetTop+this.containerHeight*1.6&&this.unstickPlayer()}this.updatePosition()}else[fr,mr].indexOf(this.autoStart)>-1&&!this.slider&&this.playOnVisible();this.amby.get("trickyInstream")==="1"&&this.amby.get("trickyPause")&&!this.canPlayTimeout&&this.inSight&&(this.canPlayTimeout=setTimeout(function(){i.amby.dispatch(Se.upsertState({ad:{canPlay:!0}}))},parseFloat(this.amby.get("trickyPause"))*1e3))},e}(Gu.FormatBase);Wi.Outstream=am});var gr=re(_s=>{"use strict";w();_();k();C();D();I();Object.defineProperty(_s,"__esModule",{value:!0});_s.InArticleComponent=void 0;var sm=Oe(),Ni=we(),rm=De(),nm=Ne(),om=function(){function r(e,t,i){var a=this;this.amby=e.amby,this.playerContainerDiv=t,this.rootElement=e.rootElement,this.widgetId=this.amby.get("widgetId"),this.articleSelectors=this.amby.get("formatConfig.articleSelectors",!1),this.shadowDivs=[],this.articles=[],this.aspectRatio=(this.amby.get("player.aspectratio")||"16:9").match(/(\d+):(\d+)/).reduce(function(s,n,l){return s[["ratio","width","height"][l]]=n,s},{}),this.articleSelectors?(Array.isArray(this.articleSelectors)||(this.articleSelectors=[this.articleSelectors]),this.articleSelectors.unshift(".MGVideoAnchor".concat(this.widgetId))):this.articleSelectors=[".MGVideoAnchor".concat(this.widgetId)],this.amby.get("formatConfig.multipleArticles",!1)?(i||(document.querySelector("._mgw_".concat(this.widgetId," .mgheader"))||this.rootElement.querySelector("._mgw_".concat(this.widgetId," .mgheader"))?this.articleSelectors.push("._mgw_".concat(this.widgetId," .mgheader")):this.articleSelectors.push("._mgw_".concat(this.widgetId," .mgbox"))),this.articleSelectors.forEach(function(s){var n=document.querySelectorAll(s);n||(n=a.rootElement.querySelectorAll(s)),n&&(n=Array.apply(null,n),n.forEach(function(l){l&&l.parentNode&&a.articles.push(l)}))}),this.articles.length>0&&(this.articles.sort(function(s,n){return Ni.Helpers.getOffsetTop(s)-Ni.Helpers.getOffsetTop(n)}),this.articles.forEach(function(s){var n=document.createElement("div");n.style.width="".concat(Ni.Helpers.getElemWidth(s.parentNode),"px"),n.style.position="absolute",Ni.Helpers.isIE()&&(s.className.indexOf("mgheader")>-1||s.className.indexOf("mgbox")>-1)&&(n.style.top="0",n.style.left="0"),n.className="shadowDiv_".concat(a.amby.get("widgetId")),s.nextSibling?s.parentNode.insertBefore(n,s.nextSibling):s.parentNode.appendChild(n),n.style.height="".concat(Ni.Helpers.getElemWidth(n)/a.aspectRatio.width*a.aspectRatio.height,"px");var l=Ni.Helpers.onVisible(n,function(d){n.inSight=d,d?setTimeout(function(){a.relocatePlayer(n)},0):a.findPlacement()});a.shadowDivs.push({shadowDiv:n,observer:l})}),i&&this.amby.addSubListener("ad.status",function(){a.amby.get("ad.status")===nm.states.STATUS_STOPPED&&a.shadowDivs.forEach(function(s){var n=s.shadowDiv,l=s.observer;n.style.display="none",l.disconnect()})}),this.amby.addSubListener("player.inSight",function(){a.amby.get("player.inSight")||a.findPlacement()}))):(this.articleSelectors.forEach(function(s){a.article||(a.article=document.querySelector(s)),a.article||(a.article=a.rootElement.querySelector(s))}),this.article&&this.article.parentNode?this.article.nextSibling?this.article.parentNode.insertBefore(this.playerContainerDiv,this.article.nextSibling):this.article.parentNode.appendChild(this.playerContainerDiv):(0,sm.mgDebug)("No container found. Src: ".concat(window.location!==window.parent.location?document.referrer:document.location.href)))}return r.prototype.relocatePlayer=function(e){(!e.nextSibling||!this.playerContainerDiv.isEqualNode(e.nextSibling))&&!this.amby.get("player.inSight")&&(e.nextSibling?e.parentNode.insertBefore(this.playerContainerDiv,e.nextSibling):e.parentNode.appendChild(this.playerContainerDiv),this.amby.dispatch(rm.setTriggerToTrue("player.positionChanged")))},r.prototype.findPlacement=function(){var e=this;this.shadowDivs.forEach(function(t){var i=t.shadowDiv;i.inSight&&e.relocatePlayer(i)})},r.prototype.isSomeInSight=function(){return this.shadowDivs.reduce(function(e,t){return e||t.shadowDiv.inSight},!1)},r}();_s.InArticleComponent=om});var Lo=re(Hi=>{"use strict";w();_();k();C();D();I();var lm=Hi&&Hi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.AttachedWidgetVideo=void 0;var vt=Ne(),Pe=De(),ks=Oe(),cm=Ha(),pm=Oa(),yr=oa(),ze=we(),dm=ca(),hm=Za(),um=Wa(),mm=ia(),fm=Ka(),gm=Xa(),ym=as(),vm=pa(),bm=gr(),xm=cs(),Tm=hs(),Ao=ma(),Sm=ys(),wm=bs(),_m=ga(),km=xs(),Cm=Ts(),Dm=ws(),Cs="visibleNotPause",vr="visibleOnly",Im="onLoad",Pm="onClick",Em=function(r){lm(e,r);function e(t){var i=r.call(this,t)||this;return i.videoSensorComponent=new hm.VideoSensorComponent(t),i.styleComponent=new gm.StyleComponent(i.widget),i.styleComponent.styleChecking(function(){i.onStyleLoad()}),i}return e.prototype.onStyleLoad=function(){var t=this;this.amby.get("visibilityKpi")&&this.amby.dispatch(Pe.upsertState({widget:{renderTime:Date.now()}})),this.sticky=!!(0,ze.getInObject)(this.amby.get(),["sticky"],!0)&&!!this.amby.get("formatConfig.sticky",!1),this.wasVisible=!1,this.reInit=parseInt(this.amby.get("formatConfig.reInit"),10),this.moveToBody=this.formatConfig.moveToBody||!1,this.autoStart=this.amby.get("autoStart",Cs),this.showed=this.amby.get("formatConfig.name")!=="outstream",this.widgetComponent=new um.WidgetComponent(this.widget,function(){t.deferredInitPlayer()})},e.prototype.deferredInitPlayer=function(){var t=this;typeof this.formatConfig.startDelay!="number"&&(this.formatConfig.startDelay=0),setTimeout(function(){t.initPlayer()},this.formatConfig.startDelay*1e3)},e.prototype.initPlayer=function(){var t=this,i;if(this.blockMain=this.widget.block.querySelector(".mgbox"),this.blockMain||(this.blockMain=this.widget.block),this.amby.get("formatConfig.name")==="outstream"?(this.articleSelectors=this.amby.get("formatConfig.articleSelectors",!1),this.amby.get("formatConfig.inArticle",!1)?(this.adContainerComponent=new yr.AdContainerComponent(this.amby,this.blockMain,"ad","above"),this.inArticleComponent=new bm.InArticleComponent(this.widget,this.adContainerComponent.playerContainer,!0),this.amby.addTriggerListener("player.positionChanged",function(){t.applyAttachedPlayerSize(),[vt.states.STATUS_PLAYING,vt.states.STATUS_PAUSED,vt.states.STATUS_READY].indexOf(t.amby.get("ad.status"))>-1&&(t.inSight?!t.showed&&t.inArticleComponent.isSomeInSight()&&t.showPlayer():t.hidePlayer()),t.playOnVisible()})):this.adContainerComponent=new yr.AdContainerComponent(this.amby,this.widget.block,"ad",this.amby.get("formatConfig.adsPlace","above"))):this.adContainerComponent=new yr.AdContainerComponent(this.amby,this.blockMain),this.sticky){switch(this.amby.get("formatConfig.sliderSize","m").toLowerCase()){case"s":this.stickyClass="small ";break;case"m":this.stickyClass="medium ";break;case"l":this.stickyClass="large ";break}this.stickyClass+=this.amby.get("formatConfig.sliderAlign","right"),this.adContainerComponent.playerContainer.addEventListener("animationend",function(){t.applyAttachedPlayerSize()}),this.adContainerComponent.playerContainer.addEventListener("transitionend",function(){t.applyAttachedPlayerSize()})}if(this.calcStartOnScroll(this.adContainerComponent.playerContainer),this.moveToBodyComponent=new fm.MoveToBodyComponent(this.widgetId,this.adContainerComponent.playerContainer),this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new ym.LogoComponent(this.amby,this.adContainerComponent.playerContainer,!this.amby.get("formatConfig.inArticle",!1))),ze.Helpers.addClass(this.adContainerComponent.playerContainer,"block"),this.amby.dispatch(Pe.setAdVisible(!1)),this.applyAttachedPlayerSize(),this.previousWidth=ze.Helpers.getElemWidth(this.adContainerComponent.playerContainer),this.previousHeight=ze.Helpers.getElemHeight(this.adContainerComponent.playerContainer),window.addEventListener("resize",function(){(t.previousWidth!==ze.Helpers.getElemWidth(t.adContainerComponent.playerContainer)||t.previousHeight!==ze.Helpers.getElemHeight(t.adContainerComponent.playerContainer))&&(t.previousWidth=ze.Helpers.getElemWidth(t.adContainerComponent.playerContainer),t.previousHeight=ze.Helpers.getElemHeight(t.adContainerComponent.playerContainer),t.applyAttachedPlayerSize())}),this.autoStart===Pm&&(this.clickDiv=document.createElement("div"),this.clickDiv.className="mgClickDiv_".concat(this.widgetId),this.clickDiv.onclick=function(n){(0,ks.mgDebug)("Clicked on teaser"),t.clickDiv.style.display="none",t.amby.dispatch(Pe.setTriggerToTrue("ad.unmute")),t.amby.dispatch(Pe.upsertAdState({startRequested:!0})),t.amby.dispatch(Pe.setTriggerToTrue("ad.actionPlay")),n.cancelBubble=!0},this.adContainerComponent.playerContainer.appendChild(this.clickDiv)),Array.isArray(this.config.adPlayers)){var a=null;if(this.config.adPlayers.forEach(function(n){!a&&typeof n=="object"&&(a=n)}),!a.mobileChannelId&&!a.desktopChannelId&&a.engine==="aniview"&&(a=null),a){var s=ze.Helpers.getUrlParam("mgwcampaign");switch(s&&(s.match(/pubads\.g/)&&(a.engine="ima"),a.adSource=s),this.amby.dispatch(Pe.upsertState({ad:{playerEngine:a.engine}})),this.amby.dispatch(Pe.upsertState({ad:{enableCTA:(i=a.enableCTA)!==null&&i!==void 0?i:!1}})),a.engine){case"aniview":this.adComponent=new pm.AniViewComponent(this.widget,{publisherId:a.publisherId,channelId:this.amby.get("deviceType")==="mobile"?a.mobileChannelId:a.desktopChannelId,playerContainerId:this.adContainerComponent.playerContainer.id,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv,skipoffset:a.skipoffset,vastRetry:a.vastRetry,errorLimit:a.errorLimit,maxrun:a.maxrun,logLevel:a.logLevel,timeout:parseInt(a.timeout,10),nextAdTimeout:parseInt(a.nextAdTimeout,10),ref1:a.ref1,soundButton:a.soundbutton,pauseButton:a.pausebutton,timeLine:a.timeline,aniviewParams:a.aniviewParams,waterfall:a.waterfall,noCompleteTimeout:a.noCompleteTimeout,verifiedSources:a.verifiedSources,initSize:a.initSize}),this.amby.dispatch(Pe.upsertAdState({skipoffset:a.skipoffset}));break;case"mgAdPlayer":this.adComponent=new vm.MgAdPlayerComponent(this.widget,{container:this.adContainerComponent.playerDiv,mgsetup:a.mgsetup,quality:a.quality,adPlaylist:a.adPlaylist});break;case"ima":this.skipButton=new Tm.SkipAdButtonComponent(this.amby,this.adContainerComponent.playerContainer,"ad"),this.muteButton=new Ao.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),this.adComponent=new xm.ImaSdkComponent(this.widget,{adSource:a.adSource,requestsLimit:a.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv});break;case"vpaid":this.muteButton=new Ao.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),a.adSource||(a.adResponse=this.widget.mgRec.config.vastContent),this.adComponent=new Sm.VpaidPlayerComponent(this.widget,{adSource:a.adSource,requestsLimit:a.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv,desiredBitrate:this.amby.get("formatConfig.bitrate"),vpaidMode:a.vpaidMode,adResponse:a.adResponse,skipoffset:a.skipoffset});break;case"exco":this.adComponent=new wm.ExcoComponent(this.widget,{adSource:a.adSource,container:this.adContainerComponent.playerDiv});break;case"aniviewDirect":this.adComponent=new _m.AniviewDirectComponent(this.widget,{publisherId:a.publisherId,tagId:a.playerTagId,ref1:a.ref1,container:this.adContainerComponent.playerDiv});break;case"tremor":this.adComponent=new Cm.TremorComponent(this.widget,{publisherId:a.publisherId,tagId:a.playerTagId,ref1:a.ref1,container:this.adContainerComponent.playerDiv});break;case"connatix":this.amby.dispatch(Pe.upsertState({ad:{playerEngine:a.engine}})),this.adComponent=new Dm.CustomEngine(this.widget,{publisherId:a.publisherId,adSource:a.adSource,container:this.adContainerComponent.playerDiv}),this.amby.dispatch(Pe.upsertAdState({skipoffset:a.skipoffset}));break}}else(0,ks.mgDebug)("There is no available AD player.")}this.amby.addSubListener(["widget","blurred"],function(){t.onAdPlayerBlurred()}),this.amby.addTriggerListener("ad.clicked",function(){t.onAdClickedTriggerBase()}),this.amby.addSubListener("ad.status",function(){t.onAdStatusChange(),t.onAdStatusBase()}),this.amby.addSubListener("widget.imageLoaded",function(){t.applyAttachedPlayerSize()}),this.amby.get("closeBtn.enabled")&&(this.amby.addSubListener("ad.init",function(){t.amby.get("ad.init")===vt.states.INIT_DONE&&(t.closeBtnComponent?(!t.closeBtnComponent.elem||!t.adContainerComponent.playerContainer.contains(t.closeBtnComponent.elem))&&t.closeBtnComponent.createElement():t.closeBtnComponent=new dm.CloseButtonComponent(t.amby,t.adContainerComponent.playerDiv))}),this.amby.addTriggerListener("closeBtn.clicked",function(){t.amby.get("player.isSticky",!1)&&t.amby.dispatch(Pe.upsertGlobalState({sticky:!1})),ze.Helpers.removeClass(t.adContainerComponent.playerContainer,"noanim"),t.hidePlayer(),t.amby.dispatch(Pe.setAdVisible(!1)),t.amby.dispatch(Pe.setTriggerToTrue("ad.actionStop")),t.amby.dispatch(Pe.setTriggerToTrue("ad.closed"))})),this.muteButton&&this.amby.addTriggerListener("muteBtn.clicked",function(){t.onMuteBtnClicked()}),this.amby.get("formatConfig.smartBackfill",!1)&&(this.amby.addSubListener("ad.rejecting",function(){!t.amby.get("ad.startRequested",!1)&&t.amby.get("ad.rejecting")&&t.amby.get("ad.status")===vt.states.STATUS_READY&&[vt.states.STATUS_PLAYING,vt.states.STATUS_PAUSED].indexOf(t.amby.get("ad.status"))===-1&&(t.amby.dispatch(Pe.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout(function(){t.amby.dispatch(Pe.setTriggerToTrue("ad.actionStop"))},500))}),this.smartBackfillComponent=new km.SmartBackfillComponent(this.widget)),this.callStartInit()},e.prototype.onAdStatusChange=function(){var t=this,i=this.amby.get("ad.status");switch((0,ks.mgDebug)("Ads ".concat(i,".").concat(this.amby.get("ad.adTag")?" Ad source: ".concat(this.amby.get("ad.adTag")):"")),i){case vt.states.STATUS_READY:this.amby.get("formatConfig.smartBackfill",!1)&&this.amby.get("ad.rejecting")&&(this.amby.dispatch(Pe.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout(function(){t.amby.dispatch(Pe.setTriggerToTrue("ad.actionStop"))},500)),this.amby.get("formatConfig.visibleInit",!1)&&(this.showPlayer(),this.amby.dispatch(Pe.setAdVisible(!0))),this.observer||(ze.Helpers.isIE()?setTimeout(function(){t.addContainerObserver()},100):this.addContainerObserver()),this.autoStart===Im||this.amby.get("ad.reInited")&&this.amby.get("player.isSticky")?(this.amby.dispatch(Pe.upsertAdState({startRequested:!0})),this.amby.dispatch(Pe.setTriggerToTrue("ad.actionPlay"))):[vr,Cs].indexOf(this.autoStart)>-1&&this.playOnVisible(),this.sticky&&(this.stickyObserver||(this.stickyObserver=ze.Helpers.onVisible(this.adContainerComponent.playerContainer,function(a){if(a&&!t.amby.get("player.isSticky",!1))t.isOtherWidgetSticky()||(t.wasVisible=!0),[vr,Cs].indexOf(t.autoStart)>-1&&t.amby.get("ad.status")!==vt.states.STATUS_PLAYING&&t.amby.get("player.isPlayingOnVisible",!0)&&(t.amby.dispatch(Pe.upsertAdState({startRequested:!0})),t.amby.dispatch(Pe.setTriggerToTrue("ad.actionPlay")));else if(t.wasVisible&&(0,ze.getInObject)(t.amby.get(),["sticky"],!0)&&!t.amby.get("player.isSticky",!1)&&!t.isOtherWidgetSticky())t.stickPlayer();else if(t.amby.get("player.isSticky",!1)&&t.showed){var s=ze.Helpers.getViewTop(),n=ze.Helpers.getWindowHeight();s<=t.containerOffsetTop+t.containerHeight*.5&&s+n>=t.containerOffsetTop+t.containerHeight*1.6&&t.unstickPlayer()}t.placementChanged&&(t.placementChanged=!1,t.applyAttachedPlayerSize())},.6),(0,mm.addSubListener)("sticky",function(){t.sticky=t.amby.get().sticky})));break;case vt.states.STATUS_PLAYING:this.clickDiv&&(this.clickDiv.style.display="none"),this.amby.dispatch(Pe.setAdVisible(!0)),this.amby.dispatch(Pe.upsertState({muteBtn:{visible:!0}})),this.formatConfig.name==="outstream"&&!this.showed?(!this.amby.get("formatConfig.multipleArticles")||this.inArticleComponent.isSomeInSight())&&this.showPlayer():this.applyAttachedPlayerSize();break;case vt.states.STATUS_STOPPED:ze.Helpers.removeClass(this.adContainerComponent.playerContainer,"noanim"),this.formatConfig.name==="outstream"&&(this.hidePlayer(),this.amby.dispatch(Pe.setAdVisible(!1)),this.amby.dispatch(Pe.upsertState({muteBtn:{visible:!1}}))),this.reInit&&this.createReInitTimeout();break;case vt.states.STATUS_ERROR:this.hidePlayer(),this.amby.dispatch(Pe.setAdVisible(!1)),this.reInit&&this.createReInitTimeout();break}},e.prototype.applyAttachedPlayerSize=function(){var t=ze.Helpers.getElemWidth(this.adContainerComponent.playerContainer);this.adHeight=t/this.aspectRatio.width*this.aspectRatio.height,this.containerHeight||(this.containerHeight=this.adHeight),this.showed||this.amby.get("player.isSticky",!1)?this.adContainerComponent.playerContainer.style.height="".concat(this.adHeight,"px"):ze.Helpers.isIE()?this.adContainerComponent.playerContainer.style.height="0.01px":this.adContainerComponent.playerContainer.style.height="0px",this.amby.dispatch(Pe.upsertAdState({resize:!0,size:{width:t,height:this.adHeight}}))},e.prototype.showPlayer=function(){this.showed=!0,this.shadowDiv&&this.amby.get("player.isSticky",!1)&&(this.shadowDiv.style.display="block"),this.applyAttachedPlayerSize(),this.adContainerComponent.playerDiv.firstChild&&this.adContainerComponent.playerDiv.firstChild.clientHeight===0&&window.dispatchEvent(new Event("resize"))},e.prototype.hidePlayer=function(){this.showed=!1,this.shadowDiv&&(this.shadowDiv.style.display="none"),this.applyAttachedPlayerSize()},e.prototype.stickPlayer=function(){var t=this;this.containerOffsetTop||(this.adContainerComponent.playerContainer.offsetParent?this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetParent.offsetTop+this.adContainerComponent.playerContainer.offsetTop:this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetTop),ze.Helpers.addClass(this.adContainerComponent.playerContainer,this.stickyClass),ze.Helpers.addClass(this.adContainerComponent.playerContainer,"noanim"),this.shadowDiv?this.shadowDiv.style.display="block":(this.shadowDiv=document.createElement("div"),this.shadowDiv.style.width="100%",this.shadowDiv.style.height="".concat(this.adHeight*.6,"px"),this.shadowDiv.className="shadowDiv_".concat(this.amby.get("widgetId")),this.adContainerComponent.playerContainer.parentNode.insertBefore(this.shadowDiv,this.adContainerComponent.playerContainer),ze.Helpers.onVisible(this.shadowDiv,function(i){t.shadowDivShown=i,t.shadowDivShown&&t.amby.get("player.isSticky",!1)&&t.unstickPlayer(),t.placementChanged&&(t.placementChanged=!1,t.applyAttachedPlayerSize())})),this.moveToBody&&this.moveToBodyComponent.attachBody(),this.placementChanged=!0,this.amby.dispatch(Pe.setPlayerSticky(!0))},e.prototype.unstickPlayer=function(){ze.Helpers.removeClass(this.adContainerComponent.playerContainer,this.stickyClass),this.shadowDiv&&(this.shadowDiv.style.display="none"),this.moveToBody&&this.moveToBodyComponent.detachBody(this.article.nextSibling),this.placementChanged=!0,this.amby.dispatch(Pe.setPlayerSticky(!1))},e.prototype.addContainerObserver=function(){var t=this;this.observer=ze.Helpers.onVisible(this.adContainerComponent.playerContainer,function(i){t.inSight=i,t.amby.dispatch(Pe.upsertState({player:{inSight:i}})),t.amby.get("formatConfig.multipleArticles",!1)&&[vt.states.STATUS_PLAYING,vt.states.STATUS_PAUSED,vt.states.STATUS_READY].indexOf(t.amby.get("ad.status"))>-1&&(t.inSight?!t.showed&&t.inArticleComponent.isSomeInSight()&&t.showPlayer():t.hidePlayer()),[vr,Cs].indexOf(t.autoStart)>-1&&!t.sticky&&t.playOnVisible(t.amby.get("formatConfig.multipleArticles",!1)?t.showed:void 0)},this.amby.get("formatConfig.visiblePart"),this.amby.get("formatConfig.hiddenPart"))},e.prototype.onMuteBtnClicked=function(){(0,ks.mgDebug)("Mute Button clicked."),this.amby.get("ad.initMuted",!0)?this.amby.dispatch(Pe.upsertAdState({initMuted:!1,unmute:!0})):this.amby.dispatch(Pe.upsertAdState({initMuted:!0,mute:!0}))},e}(cm.FormatBase);Hi.AttachedWidgetVideo=Em});var Bo=re(Ds=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ds,"__esModule",{value:!0});Ds.OutstreamBase=void 0;var Am=Ne(),fi=we(),br=Oe(),Lm=De(),Bm=Eo(),Om=Lo(),Mm=function(){function r(){}return r.init=function(e,t){var i=(0,fi.getInObject)(e,["mgRec","config","enabled"]);if(!i||i==="0"){(0,br.mgDebug)("Widget disabled.");return}var a=(0,fi.getInObject)(e,["mgRec","config","formats"]),s=(0,fi.getInObject)(e,["mgRec","cappingData","dt"],"desktop");if(s==="tablet"&&(s="mobile"),Array.isArray(a)){for(var n=0;n<a.length;n++)if(a[n].device===s&&["outstream","attachedWidget"].indexOf(a[n].name)>-1&&(!a[n].test||fi.Helpers.getUrlParam(a[n].test)||fi.Helpers.getCookie(a[n].test))){var l=(0,fi.getInObject)(e,["mgRec","config","parentCid"],(0,fi.getInObject)(e,["mgRec","cid"])),d=(0,Am.createAmby)("video_".concat(l,"_").concat(t));d.dispatch(Lm.setFormatConfig(a[n])),e.amby=d,e.formatConfig=a[n],a[n].name==="outstream"&&(a[n].adsPlace==="over"||a[n].adsPlace===void 0||a[n].slider)?((0,br.mgDebug)("Initialising Outstream module"),e.outstream=new Bm.Outstream(e)):(a[n].name==="attachedWidget"||a[n].name==="outstream"&&(["above","below"].indexOf(a[n].adsPlace)>-1||a[n].inArticle))&&((0,br.mgDebug)("Initialising AttachedWidgetVideo module"),e.attachedWidget=new Om.AttachedWidgetVideo(e));break}}},r}();Ds.OutstreamBase=Mm});var Mo=re(Is=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Is,"__esModule",{value:!0});Is.AdControllerComponent=void 0;var Ue=Ne(),Ae=De(),gi=we(),Rm=Oa(),Wm=oa(),Nm=Oe(),Hm=hs(),Vm=pa(),qm=cs(),Oo=ma(),Gm=ys(),Um=bs(),jm=ga(),zm=Ts(),Fm=ws(),Ym=function(){function r(e,t){var i=this;this.amby=e.amby,this.widget=e,this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.widgetId=this.amby.get("widgetId"),this.adPlayers=this.amby.get("adPlayers",[]),this.schedule={},Array.isArray(this.amby.get("adSchedule"))&&this.amby.get("adSchedule").forEach(function(a){i.schedule[a.offset]=a.adPlayers}),this.maxAdsAtTime=this.amby.get("formatConfig.maxAdsAtTime",2),this.players={},this.readyPlayers=[],this.adsAtTime=0,Array.isArray(this.adPlayers)&&this.adPlayers.forEach(function(a){i.players[a.name]=a,i.players[a.name].container=new Wm.AdContainerComponent(i.amby,t.playerDiv,a.name),(a.engine==="youtube"||a.engine==="ima")&&(i.players[a.name].skipButton=new Hm.SkipAdButtonComponent(i.amby,i.players[a.name].container.playerContainer,a.name),a.engine==="ima"&&(i.players[a.name].muteButton=new Oo.MuteButtonComponent(i.amby,i.players[a.name].container.playerContainer))),(a.engine==="ima"||a.engine==="vpaid")&&(i.players[a.name].muteButton=new Oo.MuteButtonComponent(i.amby,i.players[a.name].container.playerContainer)),i.addPlayerListeners(a.name)}),this.addListeners(),(0,Nm.mgDebug)("AdControllerComponent initiated.")}return r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("ad.init",function(){switch(e.amby.get("ad.init")){case Ue.states.INIT_NEEDED:case Ue.states.INIT_RESET:e.readyPlayers.forEach(function(t){e.amby.dispatch(Ae.setAdInit(Ue.states.INIT_STOP,t))}),e.readyPlayers=[],e.curPosition=e.amby.get("ad.curAdPosition"),e.schedule&&e.curPosition&&e.schedule[e.curPosition]&&e.schedule[e.curPosition].forEach(function(t){e.initAdPlayer(t)}),e.amby.dispatch(Ae.setAdInit(Ue.states.INIT_IN_PROGRESS));break;case Ue.states.INIT_STOP:e.schedule&&e.curPosition&&e.schedule[e.curPosition]&&e.schedule[e.curPosition].forEach(function(t){e.amby.dispatch(Ae.setAdInit(Ue.states.INIT_STOP,t))});break}}),this.amby.addTriggerListener("ad.actionPlay",function(){e.amby.get("ad.enabled")&&(e.readyPlayers.length>0?(e.amby.dispatch(Ae.upsertAdState({startRequested:!0})),e.amby.dispatch(Ae.setTriggerToTrue("".concat(e.readyPlayers[0],".actionPlay")))):e.startRequested=!0)}),this.amby.addTriggerListener("ad.actionPause",function(){e.amby.dispatch(Ae.setTriggerToTrue("".concat(e.readyPlayers[0],".actionPause")))}),this.amby.addTriggerListener("ad.actionClose",function(){e.amby.dispatch(Ae.setTriggerToTrue("".concat(e.readyPlayers[0],".actionClose")))}),this.amby.addTriggerListener("ad.actionStop",function(){e.readyPlayers.forEach(function(t){[Ue.states.STATUS_PLAYING,Ue.states.STATUS_PAUSED].indexOf(e.amby.get("".concat(t,".status")))>-1&&e.amby.dispatch(Ae.setTriggerToTrue("".concat(t,".actionStop")))})})},r.prototype.addPlayerListeners=function(e){var t=this;this.amby.addSubListener("".concat(e,".status"),function(){t.onPlayerStatus(e)}),this.amby.addTriggerListener("".concat(e,".impression"),function(){t.amby.dispatch(Ae.setTriggerToTrue("ad.impression"))})},r.prototype.onPlayerStatus=function(e){switch(this.amby.get("".concat(e,".status"))){case Ue.states.STATUS_READY:this.readyPlayers.indexOf(e)===-1&&this.readyPlayers.push(e),[Ue.states.STATUS_READY,Ue.states.STATUS_PLAYING].indexOf(this.amby.get("ad.status"))===-1&&(this.amby.dispatch(Ae.setAdInit(Ue.states.INIT_DONE)),this.amby.dispatch(Ae.setAdStatus(Ue.states.STATUS_READY))),(this.amby.get("ad.curAdPosition")==="pre"||this.players[e].engine==="youtube")&&this.amby.dispatch(Ae.setAdVisible(!0,e)),this.startRequested&&(this.startRequested=!1,this.amby.dispatch(Ae.upsertAdState({startRequested:!0})),this.amby.dispatch(Ae.setTriggerToTrue("".concat(this.readyPlayers[0],".actionPlay"))));break;case Ue.states.STATUS_PLAYING:this.amby.dispatch(Ae.setAdVisible(!0,e)),this.amby.dispatch(Ae.upsertState({muteBtn:{visible:!0}})),this.amby.dispatch(Ae.setAdStatus(Ue.states.STATUS_PLAYING));break;case Ue.states.STATUS_PAUSED:this.amby.dispatch(Ae.setAdStatus(Ue.states.STATUS_PAUSED));break;case Ue.states.STATUS_ERROR:case Ue.states.STATUS_STOPPED:this.adsAtTime+=1,this.amby.dispatch(Ae.setAdVisible(!1,e)),this.readyPlayers.splice(this.readyPlayers.indexOf(e),1),this.readyPlayers.length>0&&this.maxAdsAtTime>this.adsAtTime?this.amby.dispatch(Ae.setTriggerToTrue("".concat(this.readyPlayers[0],".actionPlay"))):(this.adsAtTime=0,this.amby.dispatch(Ae.upsertState({muteBtn:{visible:!1}})),this.amby.dispatch(Ae.setAdStatus(this.amby.get("".concat(e,".status")))));break;case Ue.states.STATUS_INIT:[Ue.states.STATUS_ERROR,Ue.states.STATUS_STOPPED].indexOf(this.amby.get("ad.status"))>-1&&this.amby.dispatch(Ae.setAdStatus(Ue.states.STATUS_INIT));break}},r.prototype.initAdPlayer=function(e){var t,i,a,s,n,l;if(this.players[e]&&!this.players[e].component){!this.players[e].mobileChannelId&&!this.players[e].desktopChannelId&&this.players[e].engine==="aniview"&&(this.players[e].engine=null);var d=gi.Helpers.getUrlParam("mgwcampaign");switch(d&&(d.match(/pubads\.g/)&&(this.players[e].engine="ima"),this.players[e].adSource=d),this.amby.dispatch(Ae.upsertState({ad:{playerEngine:this.players[e].engine}})),this.amby.dispatch(Ae.upsertState({ad:{enableCTA:(l=this.players[e].enableCTA)!==null&&l!==void 0?l:!1}})),this.players[e].engine){case"aniview":this.players[e].component=new Rm.AniViewComponent(this.widget,{name:e,publisherId:this.players[e].publisherId,channelId:this.amby.get("deviceType")==="mobile"?this.players[e].mobileChannelId:this.players[e].desktopChannelId,playerContainerId:this.players[e].container.playerContainer.id,playerDivId:this.players[e].container.playerDiv.id,vastRetry:this.players[e].vastRetry,errorLimit:this.players[e].errorLimit,maxrun:this.players[e].maxrun,logLevel:this.players[e].logLevel,timeout:parseInt(this.players[e].timeout,10),nextAdTimeout:parseInt(this.players[e].nextAdTimeout,10),ref1:this.players[e].ref1,soundButton:this.players[e].soundbutton,pauseButton:this.players[e].pausebutton,timeLine:this.players[e].timeline,aniviewParams:this.players[e].aniviewParams,waterfall:this.players[e].waterfall,noCompleteTimeout:this.players[e].noCompleteTimeout,skipoffset:this.players[e].skipoffset,verifiedSources:this.players[e].verifiedSources,initSize:this.players[e].initSize}),this.amby.dispatch(Ae.upsertState((t={},t[e]={skipoffset:this.players[e].skipoffset},t)));break;case"mgAdPlayer":this.players[e].component=new Vm.MgAdPlayerComponent(this.widget,{name:e,container:this.players[e].container.playerDiv,mgsetup:this.players[e].mgsetup,quality:this.players[e].quality,adPlaylist:this.players[e].adPlaylist}),this.amby.dispatch(Ae.upsertState((i={},i[e]={skipoffset:this.players[e].skipoffset},i)));break;case"ima":this.players[e].component=new qm.ImaSdkComponent(this.widget,{name:e,adSource:this.players[e].adSource,requestsLimit:this.players[e].requestsLimit,playerDivId:this.players[e].container.playerDiv.id}),this.amby.dispatch(Ae.upsertState((a={},a[e]={skipoffset:this.players[e].skipoffset},a)));break;case"vpaid":if(!this.players[e].adSource)this.players[e].adResponse=this.widget.mgRec.config.vastContent;else{var h=gi.Helpers.getConsentData(),y=this.players[e].adSource,g=h.gdpr?"gdpr":"";y=gi.Helpers.replaceAll(y,"{gdpr}",String(Number(h.gdpr))),y=gi.Helpers.replaceAll(y,"[REGULATIONS]",g),y=gi.Helpers.replaceAll(y,"{gdpr_consent}",h.consentData),y=gi.Helpers.replaceAll(y,"[GDPRCONSENT]",h.consentData),y=gi.Helpers.replaceAll(y,"{cxurl}",this.amby.get("cxurl","")),this.players[e].adSource=y}this.players[e].component=new Gm.VpaidPlayerComponent(this.widget,{name:e,adSource:this.players[e].adSource,requestsLimit:this.players[e].requestsLimit,playerDivId:this.players[e].container.playerDiv.id,desiredBitrate:this.amby.get("formatConfig.bitrate"),vpaidMode:this.players[e].vpaidMode,adResponse:this.players[e].adResponse,skipoffset:this.players[e].skipoffset}),this.amby.dispatch(Ae.upsertState((s={},s[e]={skipoffset:this.players[e].skipoffset},s)));break;case"exco":this.players[e].component=new Um.ExcoComponent(this.widget,{name:e,adSource:this.players[e].adSource,container:this.players[e].container.playerDiv});break;case"aniviewDirect":this.players[e].component=new jm.AniviewDirectComponent(this.widget,{name:e,publisherId:this.players[e].publisherId,tagId:this.players[e].playerTagId,ref1:this.players[e].ref1,container:this.players[e].container.playerDiv});break;case"tremor":this.players[e].component=new zm.TremorComponent(this.widget,{name:e,publisherId:this.players[e].publisherId,tagId:this.players[e].playerTagId,ref1:this.players[e].ref1,container:this.players[e].container.playerDiv});break;case"connatix":this.adComponent=new Fm.CustomEngine(this.widget,{publisherId:this.players[e].publisherId,adSource:this.players[e].adSource,container:this.players[e].container.playerDiv,name:e}),this.amby.dispatch(Ae.upsertState((n={},n[e]={skipoffset:this.players[e].skipoffset},n)));break}this.amby.dispatch(Ae.setAdInit(Ue.states.INIT_NEEDED,e))}else this.amby.dispatch(Ae.setAdInit(Ue.states.INIT_RESET,e))},r}();Is.AdControllerComponent=Ym});var Ro=re(Ps=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.AdPlayerComponent=void 0;var He=Ne(),ye=De(),Vi=Oe(),$m=ca(),Zm=Mo(),Jm=oa(),kt=we(),Km=xs(),Qm=function(){function r(e,t){var i=this;this.amby=e.amby,this.widget=e,this.mainBox=t,this.rootElement=e.rootEleement;var a=this.amby.get("adSchedule",[]);this.formatConfig=this.amby.get("formatConfig",{}),this.playerTeaserIndex=this.amby.get("widget.playerTeaserIndex",0),this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.widgetId=this.amby.get("widgetId");var s=this.amby.get("adPlayers",[]);this.preTimeoutTime=parseInt(this.formatConfig.preTimeout,10)||2,this.amby.dispatch(ye.upsertAdState({initMuted:!0})),this.schedule={},s&&Array.isArray(s)&&a&&Array.isArray(a)?s.forEach(function(n){a.forEach(function(l){l.adPlayers&&n.name&&l.adPlayers.indexOf(n.name)>-1&&(i.schedule[l.offset]||(i.schedule[l.offset]={adPlayers:[]}),i.schedule[l.offset].adPlayers.push(JSON.parse(JSON.stringify(n))),i.schedule[l.offset].loadAds=(0,kt.getInObject)(l,["loadAds"]),i.schedule[l.offset].preloadPercent=parseFloat((0,kt.getInObject)(l,["preloadPercent"],0)))})}):(0,Vi.mgDebug)("Config error: there is no adPlayers or adSchedule."),this.startScrollPixels=null,(this.formatConfig.startOnScroll||this.schedule.pre&&this.schedule.pre.loadAds==="playerLoaded"&&this.schedule.pre.preloadPercent>=0&&this.schedule.pre.preloadPercent<=100)&&(this.startOnScrollPercent=.51,this.schedule.pre.preloadPercent&&(this.startOnScrollPercent=1-parseFloat(this.schedule.pre.preloadPercent)/100),this.updateStartOnScrollPixels()),this.adContainerComponent=new Jm.AdContainerComponent(this.amby,t),this.adControllerComponent=new Zm.AdControllerComponent(this.widget,this.adContainerComponent),this.addListeners(),(0,Vi.mgDebug)("AdPlayerComponent initiated.")}return r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("player.position",function(){if(e.amby.get("ad.enabled",!1)){var t=e.amby.get("player.position",0),i=e.amby.get("ad.enabledPosition",0);t&&(e.amby.get("ad.curAdPosition")===null?Object.entries(e.schedule).sort(function(a,s){return a[1].posInSec-s[1].posInSec}).forEach(function(a){var s=a[0],n=a[1];["pre","post"].indexOf(s)===-1&&!n.initiated&&e.amby.get("ad.curAdPosition")===null&&(n.initiated=!0,e.amby.get("ad.adInProgress",!1)||(e.amby.dispatch(ye.upsertAdState({adInProgress:!0,curAdPosition:s})),e.amby.get("formatConfig.initAdOnPosition",!1)||e.initAdPlayer()))}):["pre","post"].indexOf(e.amby.get("ad.curAdPosition"))===-1&&e.schedule[e.amby.get("ad.curAdPosition")]&&e.schedule[e.amby.get("ad.curAdPosition")].posInSec<=t-i&&e.amby.get("ad.status")===He.states.STATUS_READY&&(e.prevPlayerStatus=e.amby.get("player.status"),e.amby.get("formatConfig.initAdOnPosition",!1)?e.initAdPlayer():(e.amby.get("player.inSight")||e.amby.get("autoStart")==="onLoad")&&e.amby.dispatch(ye.setTriggerToTrue("ad.actionPlay")))),e.amby.dispatch(ye.upsertAdState({enabledTime:e.amby.get("ad.enabledTime",0)+1}))}}),this.amby.addSubListener("player.status",function(){switch(e.amby.get("player.status")){case He.states.STATUS_READY:e.startScrollPixels!==null&&e.schedule.pre&&e.getPreLoadAdsBy()==="playerLoaded"&&window.addEventListener("scroll",function(){e.startOnScroll(function(){e.presearchInit()})});break;case He.states.STATUS_PLAYING:e.hasPreScheduleLoaded()&&e.amby.get("ad.beforePlacementInitiated")&&!e.amby.get("ad.beforePlacementStopped")&&(e.amby.dispatch(ye.upsertAdState({curAdPosition:null,adInProgress:!1,beforePlacementStopped:!0})),e.amby.dispatch(ye.upsertPlayerState({wasPlaying:!0})),e.amby.dispatch(ye.setAdInit(He.states.INIT_STOP)));break}}),this.amby.addSubListener("ad.status",function(){e.onAdStatusChange()}),this.amby.addTriggerListener("player.resize",function(){kt.Helpers.vitalCall(function(){return e.applyPlayerSize()},e.amby.get("isVital",!0))}),this.amby.addSubListener("ad.enabled",function(){if(e.amby.get("ad.enabled",!1)){var t=e.amby.get("player.position",0),i=e.amby.get("player.duration",1);Object.entries(e.schedule).forEach(function(a){var s=a[0],n=a[1];if(["pre","post"].indexOf(s)===-1){var l=s.toString().match(/(\d+)%/);l&&l[1]?n.posInSec=Math.floor((i-t)*l[1]/100)||0:n.posInSec=parseInt(s,10)||0}}),kt.Helpers.vitalCall(function(){e.amby.dispatch(ye.upsertAdState({enabledPosition:e.amby.get("player.position",0)-e.amby.get("ad.enabledTime",0)}))},e.amby.get("isVital",!0))}e.canPrePlaySchedule()&&e.amby.get("ad.enabled",!1)&&(e.getPreLoadAdsBy()==="pageLoaded"?e.presearchInit():e.presearchObserver=kt.Helpers.onVisible(e.adContainerComponent.playerContainer,function(a){a&&(e.presearchInit(),e.presearchObserver.disconnect())},.01))}),this.amby.addSubListener("player.inSight",function(){e.amby.get("ad.enabled",!1)&&e.amby.get("player.inSight")&&[He.states.STATUS_PAUSED,He.states.STATUS_READY].indexOf(e.amby.get("ad.status"))>-1&&(e.amby.get("player.isPlayingOnVisible",!0)||!e.amby.get("ad.containerClicked",!1))&&(e.amby.get("autoStart")==="visibleNotPause"||e.canPrePlaySchedule()&&e.amby.get("ad.curAdPosition")==="pre")&&e.amby.dispatch(ye.setTriggerToTrue("ad.actionPlay"))}),this.amby.addTriggerListener("player.newItem",function(){(e.amby.get("player.isAdPlaying",!1)||e.amby.get("ad.adInProgress",!1))&&(e.amby.dispatch(ye.setAdInit(He.states.INIT_STOP)),e.amby.dispatch(ye.setAdStatus(He.states.STATUS_STOPPED))),Object.entries(e.schedule).forEach(function(t){var i=t[1];i.initiated=!1,i.posInSec=null}),e.amby.dispatch(ye.upsertAdState({enabledPosition:0,enabledTime:0,adInProgress:!1,curAdPosition:null}))}),this.amby.addTriggerListener("player.firstFrame",function(){e.schedule.pre&&["pageLoaded","playerLoaded"].indexOf(e.schedule.pre.loadAds)===-1&&(e.amby.dispatch(ye.upsertAdState({curAdPosition:"pre",visible:!0,adInProgress:!0})),e.amby.dispatch(ye.upsertPlayerState({actionPause:!0,isAdPlaying:!0})),e.amby.dispatch(ye.setAdStatus(He.states.STATUS_INIT)),e.preTimeout&&(clearTimeout(e.preTimeout),e.preTimeout=null),e.preTimeout=setTimeout(function(){(0,Vi.mgDebug)("PreTimeout fired."),e.amby.dispatch(ye.setAdInit(He.states.INIT_STOP)),e.amby.dispatch(ye.setAdStatus(He.states.STATUS_STOPPED))},e.preTimeoutTime*1e3),e.initAdPlayer())}),this.amby.addSubListener("player.duration",function(){Object.entries(e.schedule).forEach(function(t){var i=t[0],a=t[1],s=e.amby.get("player.position",0),n=e.amby.get("player.duration",1);if(a.initiated=!1,n>1)if(["pre","post"].indexOf(i)===-1){var l=i.toString().match(/(\d+)%/);l&&l[1]?a.posInSec=Math.floor((n-s)*(l[1]/100))||0:a.posInSec=parseInt(i,10)||0}else a.posInSec=null})}),this.amby.addTriggerListener("player.userUnmute",function(){e.amby.dispatch(ye.upsertAdState({initMuted:!1,unmute:!0}))}),this.amby.addTriggerListener("player.userMute",function(){e.amby.dispatch(ye.upsertAdState({initMuted:!0,mute:!0}))}),this.amby.addSubListener("ad.init",function(){e.amby.get("ad.init")===He.states.INIT_DONE&&(e.closeBtnComponent?(!e.closeBtnComponent.elem||!e.adContainerComponent.playerContainer.contains(e.closeBtnComponent.elem))&&e.closeBtnComponent.createElement():e.closeBtnComponent=new $m.CloseButtonComponent(e.amby,e.adContainerComponent.playerDiv))}),this.amby.get("formatConfig.smartBackfill",!1)&&(this.amby.addSubListener("ad.rejecting",function(){!e.amby.get("ad.startRequested",!1)&&e.amby.get("ad.rejecting")&&e.amby.get("ad.status")===He.states.STATUS_READY&&[He.states.STATUS_PLAYING,He.states.STATUS_PAUSED].indexOf(e.amby.get("ad.status"))===-1&&(e.amby.dispatch(ye.setAdEnabled(!1)),e.amby.dispatch(ye.upsertAdState({rejected:!0})),setTimeout(function(){e.amby.dispatch(ye.setAdInit(He.states.INIT_STOP))},500))}),this.smartBackfillComponent=new Km.SmartBackfillComponent(this.widget))},r.prototype.getPreLoadAdsBy=function(){return(0,kt.getInObject)(this.schedule,["pre","loadAds"])},r.prototype.hasPreScheduleLoaded=function(){return["pageLoaded","playerLoaded"].indexOf(this.getPreLoadAdsBy())>-1},r.prototype.canPrePlaySchedule=function(){return!this.amby.get("player.wasPlaying",!1)&&this.hasPreScheduleLoaded()},r.prototype.onAdStatusChange=function(){var e=this,t=this.amby.get("ad.status");switch((0,Vi.mgDebug)("Ads ".concat(t,".").concat(this.amby.get("ad.adTag")?" Ad source: ".concat(this.amby.get("ad.adTag")):"")),t){case He.states.STATUS_READY:this.amby.get("formatConfig.smartBackfill",!1)&&this.amby.get("ad.rejecting")&&(this.amby.dispatch(ye.setAdEnabled(!1)),this.amby.dispatch(ye.upsertAdState({rejected:!0})),setTimeout(function(){e.amby.dispatch(ye.setAdInit(He.states.INIT_STOP))},500)),this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.amby.get("ad.enabled",!1)&&(this.amby.get("formatConfig.visibleInit",!1)&&this.amby.dispatch(ye.setAdVisible(!0)),(this.amby.get("ad.curAdPosition")==="pre"&&!this.hasPreScheduleLoaded()||this.amby.get("formatConfig.initAdOnPosition",!1))&&this.amby.dispatch(ye.setTriggerToTrue("ad.actionPlay")),this.amby.get("ad.curAdPosition")==="pre"&&this.hasPreScheduleLoaded()&&(this.amby.get("ad.inSight",!1)||this.amby.get("autoStart")==="onLoad")&&this.amby.dispatch(ye.setTriggerToTrue("ad.actionPlay")));break;case He.states.STATUS_PLAYING:this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.amby.dispatch(ye.upsertAdState({wasPlaying:!0})),this.prevPlayerStatus===He.states.STATUS_PAUSED||!this.amby.get("ad.enabled",!1)&&this.amby.get("ad.curAdPosition")!=="pre"||this.amby.get("autoStart")==="visibleOnly"&&!this.amby.get("player.inSight")?this.amby.dispatch(ye.setTriggerToTrue("ad.actionPause")):(this.amby.dispatch(ye.upsertPlayerState({isAdPlaying:!0,actionPause:!0})),this.applyPlayerSize(),this.amby.get("ad.enabled",!1)&&this.amby.dispatch(ye.setAdVisible(!0)),!this.amby.get("ad.initMuted",!0)&&!kt.Helpers.iOSversion()&&this.amby.dispatch(ye.setTriggerToTrue("ad.unmute")));break;case He.states.STATUS_ERROR:this.amby.get("ad.curAdPosition")==="pre"&&this.hasPreScheduleLoaded()&&(this.amby.get("ad.currentImpressions",0)>0&&this.amby.dispatch(ye.setTriggerToTrue("player.actionPlay")),this.amby.get("ad.beforePlacementStopped")||this.amby.dispatch(ye.upsertAdState({curAdPosition:null,adInProgress:!1,beforePlacementStopped:!0}))),this.prevPlayerStatus===He.states.STATUS_PLAYING&&this.amby.dispatch(ye.setTriggerToTrue("player.actionPlay")),this.onAdStopped(),this.amby.get("hasBackfill",!1)&&this.amby.get("ad.currentImpressions",0)===0&&!this.amby.get("reverseBackfill",!1)&&(!this.amby.get("ad.wasPlaying",!1)||this.amby.get("ad.playerEngine")==="aniviewDirect")&&this.widget.mgRec.backfillCallback();break;case He.states.STATUS_STOPPED:(this.prevPlayerStatus===He.states.STATUS_PLAYING||this.amby.get("player.position",0)>0||this.amby.get("ad.enabled",!1)&&this.amby.get("ad.curAdPosition")==="pre")&&(this.amby.get("player.inSight",!1)||["onLoad","visibleNotPause"].indexOf(this.amby.get("autoStart"))>-1?this.amby.dispatch(ye.setTriggerToTrue("player.actionPlay")):this.amby.dispatch(ye.upsertPlayerState({isPlayingOnVisible:!0}))),this.onAdStopped();break}},r.prototype.initAdPlayer=function(){var e=this;this.formatConfig.startOnScroll&&!this.startedByScroll?(window.addEventListener("scroll",function(){e.startOnScroll(function(){e.initAdPlayer()})}),this.startOnScroll(function(){e.initAdPlayer()})):(this.amby.dispatch(ye.upsertAdState({currentImpressions:0})),this.adPlayerInited?this.amby.dispatch(ye.setAdInit(He.states.INIT_RESET)):(this.amby.dispatch(ye.setAdInit(He.states.INIT_NEEDED)),this.adPlayerInited=!0))},r.prototype.applyPlayerSize=function(){var e=this;kt.Helpers.vitalCall(function(){var t=e.amby.get("videoElemPosition");e.adContainerComponent&&t&&(e.adContainerComponent.applyPlayerSize(t),e.amby.dispatch(ye.upsertAdState({resize:!0,size:{width:t.pWidth,height:t.pHeight}})))},this.amby.get("isVital",!0))},r.prototype.onAdStopped=function(){this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.amby.dispatch(ye.upsertPlayerState({isAdPlaying:!1})),this.amby.dispatch(ye.setAdVisible(!1)),this.amby.dispatch(ye.upsertAdState({adInProgress:!1,curAdPosition:null}))},r.prototype.presearchInit=function(){var e=this;!this.amby.get("player.wasPlaying",!1)&&!this.amby.get("ad.beforePlacementInitiated")&&kt.Helpers.vitalCall(function(){e.amby.dispatch(ye.upsertAdState({curAdPosition:"pre",adInProgress:!0,beforePlacementInitiated:!0})),e.amby.dispatch(ye.setAdStatus(He.states.STATUS_INIT)),e.initAdPlayer()},this.amby.get("isVital",!0))},r.prototype.startOnScroll=function(e){!this.startedByScroll&&this.startScrollPixels!==null&&(this.updateStartOnScrollPixels(),kt.Helpers.getViewTop()+kt.Helpers.getWindowHeight()/2>this.startScrollPixels&&((0,Vi.mgDebug)("Current Scroll: ".concat(kt.Helpers.getViewTop(),"px, Starting code on: ").concat(this.startScrollPixels,"px")),this.startedByScroll=!0,e()))},r.prototype.updateStartOnScrollPixels=function(){var e=this.mainBox.getBoundingClientRect().top+kt.Helpers.getViewTop(),t=this.startScrollPixels;this.startScrollPixels=Math.floor(e*this.startOnScrollPercent),this.startScrollPixels!==t&&(0,Vi.mgDebug)("Player Top: ".concat(e,"px, Start searching for ad on: ").concat(this.startOnScrollPercent,"% = ").concat(this.startScrollPixels,"px"))},r}();Ps.AdPlayerComponent=Qm});var Vo=re(As=>{"use strict";w();_();k();C();D();I();Object.defineProperty(As,"__esModule",{value:!0});As.ContentPlayerComponent=void 0;var Yt=Ne(),Ce=De(),ni=we(),Xm=wi(),Es=Oe(),ef=hr(),Wo="playing",xr="paused",tf="buffering",No="idle",af="jwplayer",Ho="mgplayer",sf="none",rf=function(){function r(e,t,i){var a=this;if(this.amby=e.amby,this.playerType=this.amby.get("formatConfig.playerType",Ho),this.playerType!==sf){this.playerContainerDiv=t,this.config=this.amby.get("formatConfig",{}),this.mgsetup=i,this.rootElement=e.rootElement,this.jwplatformUrl=this.config.jwplatformUrl||this.amby.get("libConfig.jwPlayerIdVrw"),this.playerId=this.amby.get("player.playerId"),this.aspectRatio=this.amby.get("player.aspectratio");var s=this.amby.get("playlist",[]);this.playlist=[],s?this.fillPlaylist(s):this.amby.addSubListener("playlist",function(){var n=a.amby.get("playlist",[]);n&&n.length>0&&(a.fillPlaylist(n),a.loadRequested&&a.player.load(a.playlist))}),this.currentPosition=0,this.amby.addSubListener("player.init",function(){a.onPlayerInit()}),this.amby.addTriggerListener("player.mute",function(){a.player&&a.player.setMute(!0)}),this.amby.addTriggerListener("player.unmute",function(){a.player&&a.player.setMute(!1)}),this.amby.addTriggerListener("player.resize",function(){a.onPlayerResize()}),this.amby.addTriggerListener("player.actionPlay",function(){a.player&&[Wo,tf].indexOf(a.player.getState())===-1&&a.player.play(!0)}),this.amby.addTriggerListener("player.actionPause",function(){a.player&&[xr,No].indexOf(a.player.getState())===-1&&a.player.pause(!0)}),this.amby.addTriggerListener("player.actionStop",function(){a.player&&[xr,No].indexOf(a.player.getState())===-1&&a.player.stop()}),this.amby.addSubListener("player.isControlsVisible",function(){a.player&&(a.amby.get("player.isControlsVisible",!1)?a.player.setControls(!0):a.player.setControls(!1))}),this.amby.addSubListener("player.itemIndex",function(){var n=a.amby.get("player.itemIndex");n!==null&&a.player&&a.itemIndex!==n&&a.player.playlistItem(n)}),this.amby.addSubListener("popup.visible",function(){a.onPlayerChangedLocation()}),this.amby.get("formatConfig.moveToBody",!1)&&this.amby.addSubListener("player.isSticky",function(){a.onPlayerChangedLocation()}),this.observer=ni.Helpers.onVisible(this.playerContainerDiv,function(n){n||a.amby.get("player.isSticky",!1)?((0,Es.mgDebug)("Player is in sight."),a.amby.dispatch(Ce.setPlayerInSight(!0))):((0,Es.mgDebug)("Player is out of sight."),a.amby.dispatch(Ce.setPlayerInSight(!1)))},this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart"))}}return r.prototype.onPlayerInit=function(){var e=this.amby.get("player.init");switch(e){case Yt.states.INIT_NEEDED:this.amby.dispatch(Ce.setPlayerInit(Yt.states.INIT_IN_PROGRESS)),this.playerType===Ho?this.initPlayer():this.loadLibrary();break}},r.prototype.onPlayerResize=function(e){var t=this;e===void 0&&(e=!1);var i=this.amby.get("player.size");this.player&&(i?this.player.resize(i.width,i.height,this.aspectRatio):this.player.resize()),ni.Helpers.isIE()&&!e&&setTimeout(function(){t.onPlayerResize(!0)},1200)},r.prototype.loadLibrary=function(){var e=this,t=new Xm.Loader({mgJwplatform:{url:this.jwplatformUrl,exists:"typeof window.jwplayer !== 'undefined'"}},function(){e.initPlayer()},this.amby.get("mgVideoIndex"));t.checkLoaded()},r.prototype.initPlayer=function(){var e=this.amby.get("formatConfig.staticRoot")||"video-native.".concat(this.amby.get("subnetDomain","")),t=[{description:"",image:"//".concat(e,"/XHcEUCFl-720.jpg"),file:"//".concat(e,"/XHcEUCFl-26327326.mp4"),title:"Video"}],i=this.amby.get("player.muted",!0);if(this.playerType===af)this.player=window.jwplayer(this.playerId),this.player.setup(ni.Helpers.mergeObjects({autostart:!1,repeat:!0,mute:i,advertising:{},aspectratio:this.aspectRatio,width:"100%",playlist:t},this.config.jwsetup));else{var a=this.amby.get("libConfig.mgPlayerStylesUrlTemplate"),s=a.replace("{{DOMAIN}}",e);this.config.mgsetup&&this.config.mgsetup.stylePath&&(this.config.mgsetup.stylePath=this.config.mgsetup.stylePath.replace("{{DOMAIN}}",e)),this.player=new ef.MgPlayer(this.playerId,this.rootElement),this.player.setup(ni.Helpers.mergeObjects({autostart:!1,repeat:this.amby.get("formatConfig.repeat",!0),mute:i,playlist:t,stylePath:s,useWebm:!0},this.mgsetup))}this.addPlayerListeners()},r.prototype.addPlayerListeners=function(){var e=this;this.player.on("ready",function(){ni.Helpers.vitalCall(function(){return ni.Helpers.repaintSafari()},e.amby.get("isVital",!0)),e.playlist.length>0?e.player.load(e.playlist):e.loadRequested=!0}),this.player.on("playlist",function(){e.amby.dispatch(Ce.setPlayerInit(Yt.states.INIT_DONE)),e.amby.dispatch(Ce.setPlayerStatus(Yt.states.STATUS_READY))}),this.player.on("displayClick",function(){e.amby.dispatch(Ce.setTriggerToTrue("player.displayClicked"))}),this.player.on("play",function(t){e.amby.dispatch(Ce.setPlayerStatus(Yt.states.STATUS_PLAYING)),t.playReason==="interaction"?e.nextButtonClicked?(e.changedQualityPaused||e.player.pause(!0),e.nextButtonClicked=!1,e.changedQualityPaused=!1):(e.amby.dispatch(Ce.upsertPlayerState({isPlayingOnVisible:!0})),e.amby.dispatch(Ce.setTriggerToTrue("player.userPlay"))):e.amby.get("player.isAdPlaying",!1)&&e.player.pause(!0),(e.amby.get("ad.status")===Yt.states.STATUS_PLAYING||e.amby.get("player.isAdPlaying",!1))&&e.player.pause(!0)}),this.player.on("pause",function(t){(0,Es.mgDebug)("Player Pause Event ".concat(t.pauseReason)),t.pauseReason==="interaction"&&(e.amby.dispatch(Ce.upsertPlayerState({isPlayingOnVisible:!1})),e.amby.dispatch(Ce.setTriggerToTrue("player.userPause"))),e.amby.dispatch(Ce.setPlayerStatus(Yt.states.STATUS_PAUSED))}),this.player.on("error",function(t){e.amby.dispatch(Ce.setPlayerStatus(Yt.states.STATUS_ERROR)),(0,Es.mgDebug)(t)}),this.player.on("idle",function(){e.amby.dispatch(Ce.setPlayerStatus(Yt.states.STATUS_STOPPED))}),this.player.on("mute",function(t){e.amby.get("player.isControlsVisible",!1)&&!e.amby.get("player.isAdPlaying",!1)&&(t.mute?(e.amby.dispatch(Ce.upsertAdState({initMuted:!0})),e.amby.dispatch(Ce.setTriggerToTrue("player.userMute"))):(e.amby.dispatch(Ce.upsertAdState({initMuted:!1})),e.amby.dispatch(Ce.setTriggerToTrue("player.userUnmute")))),e.amby.dispatch(Ce.setPlayerMuted(t.mute))}),this.player.on("playlistItem",function(t){e.itemIndex=t.index,e.amby.dispatch(Ce.upsertPlayerState({itemIndex:t.index})),e.firstTimeNewItem?e.amby.dispatch(Ce.setTriggerToTrue("player.newItem")):e.firstTimeNewItem=!0}),this.player.on("time",function(t){t.position-e.currentPosition>1&&(e.currentPosition=Math.floor(t.position),e.amby.dispatch(Ce.upsertPlayerState({position:e.currentPosition})))}),this.player.on("firstFrame",function(){e.currentPosition=0,e.amby.dispatch(Ce.upsertPlayerState({duration:e.player.getDuration(),complete:!1})),e.amby.dispatch(Ce.setTriggerToTrue("player.firstFrame"))}),this.player.on("beforeComplete",function(){e.amby.dispatch(Ce.upsertPlayerState({complete:!0}))}),this.player.on("fullscreen",function(t){e.amby.dispatch(Ce.upsertPlayerState({fullscreen:t.fullscreen})),e.player.getState()===Wo&&setTimeout(function(){e.player.play(!0)},100),t.fullscreen||setTimeout(function(){e.fullscreenTimeout()},100)}),this.player.on("seek",function(t){e.amby.dispatch(Ce.setTriggerToTrue("player.seek")),e.amby.dispatch(Ce.upsertPlayerState({position:Math.floor(t.offset)})),e.currentPosition=Math.floor(t.offset)}),this.player.on("controls",function(){var t=e.player.getContainer().querySelector(".jw-controlbar-right-group .jw-icon-next");t&&t.addEventListener("click",function(i){e.amby.dispatch(Ce.setTriggerToTrue("player.nextClicked")),e.nextButtonClicked=!0,i.cancelBubble=!0})}),this.player.on("next",function(){e.amby.dispatch(Ce.setTriggerToTrue("player.next"))}),this.player.on("previous",function(){e.amby.dispatch(Ce.setTriggerToTrue("player.previous"))}),this.player.on("next_2",function(){e.amby.dispatch(Ce.setTriggerToTrue("player.next_2"))}),this.player.on("expand",function(){e.amby.dispatch(Ce.setTriggerToTrue("player.expandBtnClicked")),e.amby.dispatch(Ce.setTriggerToTrue("player.expand"))}),this.player.on("quality",function(t){e.player.getState()===xr&&(e.changedQualityPaused=!0),e.amby.dispatch(Ce.upsertPlayerState({quality:t.quality}))})},r.prototype.fullscreenTimeout=function(){var e=this;if(!window.screenTop&&!window.screenY||typeof document.webkitCurrentFullScreenElement<"u"&&document.webkitCurrentFullScreenElement!==null)setTimeout(function(){e.fullscreenTimeout()},100);else{var t=ni.Helpers.getParentBlockByClass(this.player.getContainer(),"_mgw_".concat(this.amby.get("widgetId",0)))||this.player.getContainer();window.scrollTo(0,ni.Helpers.getRect(t,!0).top-1)}},r.prototype.onPlayerChangedLocation=function(){var e=this;!this.amby.get("player.isAdPlaying",!1)&&this.player&&this.amby.get("player.status")===Yt.states.STATUS_PLAYING&&this.amby.get("formatConfig.inlinePlacement",1)&&setTimeout(function(){e.player.play(!0)},0)},r.prototype.fillPlaylist=function(e){var t=this;e.forEach(function(i){t.playlist.push({file:t.amby.get("formatConfig.quality")==="original"?i.link:i.link.replace(/^([^?]+?)(_360)?\.(mp4|webm)($|\?)/i,"$1_360.$3$4"),image:i.img,title:i.title,mediaid:i.id})})},r}();As.ContentPlayerComponent=rf});var Go=re(Ls=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Ls,"__esModule",{value:!0});Ls.PlaylistComponent=void 0;var nf=Ne(),qo=De(),$t=we(),of=Oe(),lf=function(){function r(e,t){(0,of.mgDebug)("PlaylistComponent initiated."),this.amby=e,this.popup=t,this.playlist=this.amby.get("playlist",[]),this.checkPlaylist()}return r.prototype.checkPlaylist=function(){var e=this;this.playlist.length===0?setTimeout(function(){e.checkPlaylist()},50):this.onPlaylistFilled()},r.prototype.onPlaylistFilled=function(){this.popup&&this.handlePopupConstructor(),this.amby.get("formatConfig.playerType")!=="none"&&this.addListeners()},r.prototype.handlePopupConstructor=function(){var e=this;this.widgetId=this.amby.get("widgetId",0),this.popupFooter=this.popup.querySelector("div[class*=video-info__footer]"),this.blockMain=$t.Helpers.getParentBlockByClass(this.popup,"_mgw_".concat(this.widgetId)),this.blockMain&&(this.videoTeasers=this.blockMain.querySelectorAll(".mgline.vrline"),this.videoTeasers&&(this.videoTeasers=Array.apply(null,this.videoTeasers))),this.linkElems=[],this.playlist.forEach(function(t,i){var a=null,s="javascript:void({'id':'".concat(t.id,"',")+"'link':'".concat(t.link,"','hash':'").concat(t.hash,"'");t.videoExt&&(a=JSON.parse(atob(t.videoExt)),s+=",'videoExt':'".concat(t.videoExt,"'")),s+="})";var n=document.createElement("a");n.className="mgline-pop",n.href=s,n.innerHTML='<div class="image-with-text-pop"><div class="mcimg-pop">'+'<div class="image-container-pop"><img src="'.concat(t.img)+'" class="mcimg-pop" alt="'.concat(t.title,'">')+'</div></div><div class="mgline-pop__playing">Now playing</div><div class="mgline-pop__format-hd">HD</div><div class="mgline-pop__duration"></div><div class="text-elements"><div class="text_on_hover">'+'<div class="mctitle-pop">'.concat(t.title,"</div></div></div></div>"),n.onclick=function(A){e.amby.get("player.isAdPlaying",!1)||e.amby.dispatch(qo.setTriggerToTrue("playlist.".concat(i,".clicked"))),A.cancelBubble=!0},e.linkElems.push(n),e.popupFooter.appendChild(n);var l=null,d=null;if(a.duration&&(l=a.duration%60,d=Math.floor(a.duration/60)),e.videoTeasers&&e.videoTeasers[i]){var h=e.videoTeasers[i].querySelector(".mg-total-views");h&&a.impressions&&(h.innerText=h.innerText.replace(/^\d*/,a.impressions));var y=e.videoTeasers[i].querySelector(".mg-video-duration");y&&a.duration&&(y.innerText="".concat(d,":").concat(l>9?l:"0".concat(l)))}var g=n.querySelector(".mgline-pop__duration");g&&a.duration&&(g.innerText="".concat(d,":").concat(l>9?l:"0".concat(l))),t.videoExt=a}),this.getScrollDeltas(),window.addEventListener("resize",function(){e.getScrollDeltas()})},r.prototype.addListeners=function(){var e=this;this.amby.addSubListener("player.itemIndex",function(){var t=e.amby.get("player.itemIndex");if(e.itemIndex!==t){e.itemIndex=t;var i=parseInt(e.amby.get("formatConfig.inlinePlacement",1),10);if(i){var a=(0,$t.getInObject)(e.playlist,[t,"title"],"");e.amby.dispatch(qo.upsertTeaser({index:i-1,teaser:{title:a}}))}if(e.popup){if(e.popupFooter){var s=e.popupFooter.querySelectorAll(".current-playing");s&&(s=Array.apply(null,s),s.forEach(function(d){$t.Helpers.removeClass(d,"current-playing")})),$t.Helpers.addClass(e.linkElems[t],"current-playing"),e.getScrollDeltas(),e.deltaScrollWidth&&(e.popupFooter.scrollLeft=e.deltaScrollWidth*(t-1)),e.deltaScrollHeight&&(e.popupFooter.scrollTop=e.deltaScrollHeight*(t-1))}var n=e.popup.querySelector("div[class*=video-info__title-cell]");n&&(n.innerHTML=e.linkElems[t].querySelector("img").getAttribute("alt"));var l=e.popup.querySelector("div[class*=video-info__sub-title]");l&&((0,$t.getInObject)(e.playlist,[t,"videoExt","description"])?l.innerHTML=$t.Helpers.fromAscii(e.playlist[t].videoExt.description):l.innerHTML="")}}}),this.popup&&this.amby.addSubListener("player.status",function(){if(e.linkElems&&typeof e.itemIndex<"u"){var t=e.linkElems[e.itemIndex].querySelector(".mctitle-pop");!e.amby.get("player.adIsPlaying",!1)&&e.amby.get("player.status")===nf.states.STATUS_PAUSED?$t.Helpers.addClass(t,"paused"):$t.Helpers.removeClass(t,"paused")}})},r.prototype.getScrollDeltas=function(){this.popupFooter&&this.linkElems.length>0&&(this.popupFooter.scrollWidth>this.popupFooter.scrollHeight?(this.deltaScrollWidth=$t.Helpers.getElemWidth(this.linkElems[0]),this.deltaScrollHeight=!1):(this.deltaScrollHeight=$t.Helpers.getElemHeight(this.linkElems[0]),this.deltaScrollWidth=!1))},r}();Ls.PlaylistComponent=lf});var Uo=re(Bs=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Bs,"__esModule",{value:!0});Bs.AnimatedArticleComponent=void 0;var cf=we(),pf=function(){function r(e,t){this.amby=e.amby,this.widget=e,this.rootElement=e.rootElement,this.playerContainerDiv=t,this.placementSelector=this.amby.get("formatConfig.animatedArticleSelector",!1),this.aspectRatio=(this.amby.get("player.aspectratio")||"16:9").match(/(\d+):(\d+)/).reduce(function(i,a,s){return i[["ratio","width","height"][s]]=a,i},{}),this.replaceWithVideo()}return r.prototype.replaceWithVideo=function(){var e=document.body.querySelector(this.placementSelector);e&&(e.parentNode.insertBefore(this.rootElement,e),e.parentNode.removeChild(e));var t=cf.Helpers.getElemWidth(this.rootElement),i=t/(this.aspectRatio.width/this.aspectRatio.height);this.playerContainerDiv.style.height="".concat(i,"px")},r}();Bs.AnimatedArticleComponent=pf});var zo=re(qi=>{"use strict";w();_();k();C();D();I();var df=qi&&qi.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(qi,"__esModule",{value:!0});qi.PerformanceBase=void 0;var qt=Ne(),ne=De(),Me=we(),hf=Ro(),uf=Vo(),mf=Wa(),ff=Go(),gf=ma(),yf=Ha(),oi=Oe(),vf=ca(),jo=ia(),bf=Ka(),xf=Xa(),Tf=as(),Sf=gr(),wf=Uo(),Tr="visibleNotPause",va="visibleOnly",_f="onLoad",kf=function(r){df(e,r);function e(t,i){var a=this;return(0,oi.mgDebug)("PerformanceBase constructor"),a=r.call(this,t)||this,a.addIndexes(a.widget.block.children),a.videoSensorComponent=i,a.getVideoTeaserIndex(function(){a.onTeasersLoaded()}),a}return e.prototype.onTeasersLoaded=function(){var t=this;this.addPlayerBlock(),(0,oi.mgDebug)(this.playerContainerDiv),this.config.adSchedule&&(setTimeout(function(){t.adPlayerComponent=new hf.AdPlayerComponent(t.widget,t.playerContainerDiv)},0),setTimeout(function(){t.adPlayerComponent.schedule.pre&&t.amby.dispatch(ne.setAdEnabled(!0))},0)),Me.Helpers.vitalCall(function(){t.styleComponent=new xf.StyleComponent(t.widget),t.styleComponent.styleChecking(function(){t.onStyleLoad()})},this.amby.get("isVital",!0))},e.prototype.onStyleLoad=function(){var t=this;this.amby.get("visibilityKpi")&&this.amby.dispatch(ne.upsertState({widget:{renderTime:Date.now()}})),this.sticky=!!(0,Me.getInObject)(this.amby.get(),["sticky"],!0)&&!!this.amby.get("formatConfig.sticky",!1),this.stickyAd=!!(0,Me.getInObject)(this.amby.get(),["stickyAd"],!0)&&!!this.amby.get("formatConfig.stickyAd",!1),this.amby.get("reverseBackfill",!1)&&(this.stickyAd=!1,this.sticky=!1),this.stickyMode=this.formatConfig.stickyMode||"visibleOnly",this.wasVisible=!1,this.showControlBar=!!this.formatConfig.controlbar||!0,this.moveToBody=this.formatConfig.moveToBody||!1,this.playerContentStart=this.amby.get("adSchedule").reduce(function(a,s){return s.offset==="pre"||a},!1),this.playerContentStart&&(Me.Helpers.addClass(this.widget.block,"ctplay"),this.amby.dispatch(ne.upsertPlayerState({isPlayingOnVisible:!1})));var i=this.amby.get("formatConfig.mgsetup.theme");(!i||i==="mgred")&&Me.Helpers.addClass(this.widget.block,"mgred"),this.playlist=this.widget.mgRec.vr_playlist,this.inlinePlacement=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10),this.autoStart=this.config.autoStart||Tr,this.widgetComponent=new mf.WidgetComponent(this.widget,function(){t.onImagesLoaded()})},e.prototype.onImagesLoaded=function(){var t=this;if(this.videoSensorComponent.addTeasersListeners(),this.playerTeaserIndex||(this.playerTeaserIndex=this.amby.get("widget.playerTeaserIndex")),this.playerComponent=new uf.ContentPlayerComponent(this.widget,this.playerContainerDiv,this.formatConfig.mgsetup),this.playerContentStart&&Me.Helpers.addClass(this.playerContainerDiv,"ctplay"),this.muteBtnComponent=new gf.MuteButtonComponent(this.amby,this.playerContainerDiv),(0,Me.getInObject)(this.widgetComponent,["videoTeasers",0,"teaser"])){var i=this.widgetComponent.videoTeasers[0].teaser;this.teaserImgContainer=i.querySelector(".mcimg .image-container"),this.teaserDiv=i}if(this.playlistComponent=new ff.PlaylistComponent(this.amby),this.sticky||this.stickyAd){switch(this.amby.get("formatConfig.sliderSize","m").toLowerCase()){case"s":this.stickyClass="small ";break;case"m":this.stickyClass="medium ";break;case"l":this.stickyClass="large ";break}this.stickyClass+=this.amby.get("formatConfig.sliderAlign","right"),this.closeBtnComponent=new vf.CloseButtonComponent(this.amby,this.playerContainerDiv),this.playerContainerDiv.addEventListener("animationend",function(){t.applyPlayerSize()}),this.playerContainerDiv.addEventListener("transitionend",function(){t.applyPlayerSize()}),this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new Tf.LogoComponent(this.amby,this.playerContainerDiv))}this.amby.get("formatConfig.inArticle",!1)&&(this.inArticleComponent=new Sf.InArticleComponent(this.widget,this.teasers[this.playerTeaserIndex],!1),this.amby.addTriggerListener("player.positionChanged",function(){t.applyPlayerSize()})),setTimeout(function(){t.addListeners(),t.amby.get("formatConfig.playerType")==="none"?(t.playerContainerDiv.classList.add("overflow-allowed"),t.amby.get("adSchedule").find(function(a){return a.offset==="pre"})||t.adPlayerComponent.initAdPlayer()):t.amby.dispatch(ne.setPlayerInit(qt.states.INIT_NEEDED))})},e.prototype.addListeners=function(){var t=this;this.amby.addSubListener("player.status",function(){t.onPlayerStatus(),t.onPlayerStatusBase()}),this.amby.addSubListener("player.visible",function(){t.onPlayerVisible()}),this.amby.addSubListener("player.muted",function(){var a=t.amby.get("player.muted",!0);t.amby.dispatch(ne.upsertState({muteBtn:{muted:a}}))}),this.amby.addTriggerListener("muteBtn.clicked",function(){t.onMuteBtnClicked()}),this.amby.addTriggerListener("closeBtn.clicked",function(){(0,oi.mgDebug)("Close Button clicked."),t.amby.get("player.isSticky",!1)?(t.sticky=!1,t.stickyAd=!1,t.amby.dispatch(ne.upsertGlobalState({sticky:!1,stickyAd:!1})),t.amby.dispatch(ne.setPlayerSticky(!1)),t.playerContainerDiv.removeAttribute("style"),t.applyPlayerSize(),Me.Helpers.vitalCall(function(){t.onTeaserInSight()},t.amby.get("isVital",!0))):t.amby.get("player.isAdPlaying",!1)&&(t.amby.dispatch(ne.setTriggerToTrue("ad.closed")),t.amby.dispatch(ne.setTriggerToTrue("ad.actionClose")))});var i=this.amby.get("teasers",[]);i&&Array.isArray(i)&&i.forEach(function(a,s){t.amby.addTriggerListener("teasers.".concat(s,".clicked"),function(){(0,oi.mgDebug)("Teaser Clicked"),t.onClick(!0)})}),this.amby.addTriggerListener("player.displayClicked",function(){(0,oi.mgDebug)("Player Clicked"),t.playerContentStart&&!t.amby.get("player.wasPlaying",!1)&&(t.amby.dispatch(ne.upsertPlayerState({wasPlaying:!0})),t.showControlBar&&t.amby.dispatch(ne.upsertPlayerState({isControlsVisible:!0})),t.amby.dispatch(ne.setTriggerToTrue("player.actionPlay"))),t.amby.dispatch(ne.setTriggerToTrue("player.playerInTeaserClicked")),t.amby.get("player.muted",!0)&&t.amby.get("formatConfig.unmuteOnClick",!0)&&(t.amby.dispatch(ne.setTriggerToTrue("player.unmute")),t.amby.dispatch(ne.upsertAdState({initMuted:!1}))),t.onClick()}),this.amby.addTriggerListener("player.userPlay",function(){t.amby.get("player.muted",!0)&&t.amby.get("formatConfig.unmuteOnClick",!0)&&(t.amby.dispatch(ne.setTriggerToTrue("player.unmute")),t.amby.dispatch(ne.upsertAdState({initMuted:!1})))}),this.amby.addSubListener("ad.status",function(){var a=t.amby.get("ad.status"),s=function(n){t.onAdStatus(n),t.onAdStatusBase()};a===qt.states.STATUS_PLAYING?s(a):setTimeout(function(){return s(a)},0)}),this.amby.addSubListener("player.isAdPlaying",function(){t.amby.get("player.isAdPlaying",!1)&&t.amby.get("ad.curAdPosition")==="pre"&&Me.Helpers.addClass(t.playerContainerDiv,"ad-loading")}),([va,Tr].indexOf(this.autoStart)!==-1||this.sticky||this.stickyAd)&&(this.amby.addSubListener("teasers.".concat(this.inlinePlacement-1,".inSight"),function(){t.onTeaserInSight()}),(this.sticky||this.stickyAd)&&(this.amby.addSubListener("player.isSticky",function(){t.onPlayerSticky()}),(0,jo.addSubListener)("sticky",function(){t.sticky=t.amby.get().sticky}),(0,jo.addSubListener)("stickyAd",function(){t.stickyAd=t.amby.get().stickyAd}))),this.amby.addSubListener("player.fullscreen",function(){t.amby.get("player.fullscreen",!1)?t.amby.dispatch(ne.setAdEnabled(!1)):t.amby.get("player.expanded",!1)&&setTimeout(function(){t.amby.dispatch(ne.setAdEnabled(!0))},Me.Helpers.isSafari()?300:0)}),window.addEventListener("resize",function(){t.applyPlayerSize()}),this.playerContainerDiv.addEventListener("mouseenter",function(){t.amby.dispatch(ne.setPlayerMouseOver(!0))}),this.playerContainerDiv.addEventListener("mouseleave",function(){t.amby.dispatch(ne.setPlayerMouseOver(!1))}),this.amby.get("widget.allImagesLoaded",!1)?this.applyPlayerSize():(this.amby.addTriggerListener("widget.imageLoaded",function(){t.applyPlayerSize()}),this.amby.addSubListener("widget.allImagesLoaded",function(){t.amby.get("widget.allImagesLoaded",!1)&&t.applyPlayerSize()})),this.amby.addSubListener(["widget","blurred"],function(){t.onWidgetBlurred()}),this.amby.addTriggerListener("ad.clicked",function(){t.onAdClickedTriggerBase()})},e.prototype.addPlayerBlock=function(){if((!this.teasers||this.teasers.length===0)&&(this.teasers=this.widget.block.querySelectorAll(".mgline")),this.playerTeaserIndex||(this.playerTeaserIndex=this.amby.get("widget.playerTeaserIndex")),this.playerTeaserIndex!==null&&this.teasers&&this.teasers[this.playerTeaserIndex]){this.teaserImgContainer=this.teasers[this.playerTeaserIndex].querySelector(".mcimg .image-container"),this.teaserImg=this.teasers[this.playerTeaserIndex].querySelector(".mcimg .image-container img"),this.teaserImgContainer&&(this.playerContainerDiv=document.createElement("div"),this.playerContainerDiv.className="video-info__player",this.playerContainerDiv.id="vrJwPlayerBlock_".concat(this.mgVideoIndex),this.playerDiv=document.createElement("div"),this.rootElement.querySelector("#mgJwPlayer_".concat(this.mgVideoIndex))?this.playerDiv.id="mgJwPlayer_".concat(this.mgVideoIndex,"_").concat(Math.round(Math.random()*1e3)):this.playerDiv.id="mgJwPlayer_".concat(this.mgVideoIndex),this.amby.dispatch(ne.upsertState({player:{playerId:this.playerDiv.id}})),this.playerContainerDiv.appendChild(this.playerDiv),this.teaserImgContainer.appendChild(this.playerContainerDiv),this.amby.get("animatedArticle",!1)&&(this.animatedArticle=new wf.AnimatedArticleComponent(this.widget,this.playerContainerDiv),this.applyPlayerSize()),this.playerContainerDiv.addEventListener("click",function(i){i.target.className.indexOf("jw-overlays")<0&&(i.cancelBubble=!0)}),this.moveToBodyComponent=new bf.MoveToBodyComponent(this.widgetId,this.playerContainerDiv));var t=this.widget.block.querySelector(".mgbox");t&&t.className.indexOf("MG_Gallery")>-1&&(t.parentNode.insertBefore(this.teasers[this.playerTeaserIndex],t),Me.Helpers.addClass(this.teasers[this.playerTeaserIndex],"vrnofloat"))}else(0,oi.mgDebug)("Container not found.")},e.prototype.addIndexes=function(t){if(t.length>0)for(var i=0;i<t.length;i++)t[i].getAttribute("id")&&t[i].setAttribute("id",t[i].getAttribute("id")+this.mgVideoIndex),this.addIndexes(t[i].children)},e.prototype.onPlayerStatus=function(){var t=this,i=this.amby.get("player.status");switch((0,oi.mgDebug)("Player status: ".concat(i)),i){case qt.states.STATUS_READY:Me.Helpers.vitalCall(function(){t.applyPlayerSize()},this.amby.get("isVital",!0)),setTimeout(function(){return t.amby.dispatch(ne.setAdEnabled(!0))},0),this.inlinePlacement!==null&&setTimeout(function(){return t.initNotInlinePlacementPlayer()},0);break;case qt.states.STATUS_PLAYING:Me.Helpers.removeClass(this.playerContainerDiv,"ad-loading"),this.amby.dispatch(ne.setPlayerVisible(!0)),this.showControlBar&&this.amby.dispatch(ne.upsertPlayerState({isControlsVisible:!0})),this.amby.get("videoElemPosition.pWidth")===0&&this.applyPlayerSize();break;case qt.states.STATUS_PAUSED:this.amby.get("videoElemPosition.pWidth")===0&&this.applyPlayerSize();break}},e.prototype.initNotInlinePlacementPlayer=function(){var t=this;this.showControlBar&&!this.playerContentStart&&this.amby.dispatch(ne.upsertPlayerState({isControlsVisible:!0})),this.stickyAd&&this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)&&!this.isOtherWidgetSticky()&&(this.wasVisible=!0),this.sticky?(this.startScroll&&!(0,Me.getInObject)(this.amby.get(),["initedStartScroll"],!1)?(this.amby.dispatch(ne.upsertGlobalState({initedStartScroll:!0})),window.addEventListener("scroll",function(){!t.wasVisible&&t.sticky&&t.startOnScroll(function(){t.startInSticky()})}),this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)||this.startOnScroll(function(){t.startInSticky()})):this.stickyMode==="onLoad"&&!this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)&&!this.isOtherWidgetSticky()&&this.startInSticky(),this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)&&(this.isOtherWidgetSticky()||(this.wasVisible=!0),this.playerContentStart||this.amby.dispatch(ne.setTriggerToTrue("player.actionPlay")))):(this.autoStart===_f||this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1))&&!this.playerContentStart&&this.amby.dispatch(ne.setTriggerToTrue("player.actionPlay")),this.playerContentStart&&this.amby.dispatch(ne.setPlayerVisible(!0))},e.prototype.onTeaserInSight=function(){var t=this;this.sticky&&!this.isOtherWidgetSticky()?(this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)?(this.wasVisible=!0,this.amby.dispatch(ne.setPlayerSticky(!1)),[va,Tr].indexOf(this.autoStart)!==-1&&this.amby.get("player.status")!==qt.states.STATUS_PLAYING&&this.amby.get("player.isPlayingOnVisible",!0)&&!this.amby.get("player.isAdPlaying",!1)&&this.amby.dispatch(ne.setTriggerToTrue("player.actionPlay"))):this.wasVisible&&this.amby.dispatch(ne.setPlayerSticky(!0)),setTimeout(function(){return t.applyPlayerSize()},0)):this.stickyAd&&this.amby.get("player.isAdPlaying",!1)?this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)?(this.isOtherWidgetSticky()||(this.wasVisible=!0),this.amby.dispatch(ne.setPlayerSticky(!1))):this.wasVisible&&!this.isOtherWidgetSticky()&&this.amby.dispatch(ne.setPlayerSticky(!0)):this.inlinePlacement&&!this.amby.get("player.expanded",!1)&&(this.amby.get("player.isAdPlaying",!1)?this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)&&!this.focusPaused?this.amby.get("player.isPlayingOnVisible",!0)&&this.amby.dispatch(ne.setTriggerToTrue("ad.actionPlay")):this.autoStart===va&&this.amby.dispatch(ne.setTriggerToTrue("ad.actionPause")):this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)&&!this.focusPaused?(this.stickyAd&&!this.wasVisible&&!this.isOtherWidgetSticky()&&(this.wasVisible=!0),this.amby.get("player.isPlayingOnVisible",!0)&&this.amby.dispatch(ne.setTriggerToTrue("player.actionPlay"))):this.autoStart===va&&this.amby.dispatch(ne.setTriggerToTrue("player.actionPause")))},e.prototype.onPlayerSticky=function(){var t=this;this.amby.get("player.isSticky",!1)?(Me.Helpers.addClass(this.playerContainerDiv,this.stickyClass),this.moveToBody&&this.moveToBodyComponent.attachBody()):(Me.Helpers.removeClass(this.playerContainerDiv,this.stickyClass),this.moveToBody&&this.moveToBodyComponent.detachBody(this.teaserImgContainer)),this.applyPlayerSize(),setTimeout(function(){t.applyPlayerSize()},100)},e.prototype.onAdStatus=function(t){switch(t){case qt.states.STATUS_READY:this.stickyAd=this.amby.get("formatConfig.stickyAd",!1),Me.Helpers.removeClass(this.playerContainerDiv,"ad-loading"),this.amby.get("teasers.".concat(this.inlinePlacement-1,".inSight"),!1)?this.isOtherWidgetSticky()||(this.wasVisible=!0):this.autoStart===va&&this.amby.dispatch(ne.setTriggerToTrue("player.actionPause"));break;case qt.states.STATUS_PLAYING:Me.Helpers.removeClass(this.playerContainerDiv,"ad-loading"),this.amby.dispatch(ne.setPlayerVisible(!1)),Me.Helpers.addClass(this.teaserDiv,"ad-show"),this.amby.dispatch(ne.upsertState({ad:{visible:!0}})),this.amby.get("reverseBackfill",!1)&&(this.widget.mgRec.backfillDestructor(),this.sticky=!!(0,Me.getInObject)(this.amby.get(),["sticky"],!0)&&!!this.amby.get("formatConfig.sticky",!1),this.stickyAd=!!(0,Me.getInObject)(this.amby.get(),["stickyAd"],!0)&&!!this.amby.get("formatConfig.stickyAd",!1));break;case qt.states.STATUS_STOPPED:this.stickyAd&&this.amby.get("player.isSticky",!1)&&(this.amby.dispatch(ne.setPlayerSticky(!1)),this.amby.dispatch(ne.setTriggerToTrue("player.actionPause"))),this.amby.dispatch(ne.setPlayerVisible(!0)),Me.Helpers.removeClass(this.teaserDiv,"ad-show");break;case qt.states.STATUS_ERROR:this.amby.get("hasBackfill",!1)&&this.amby.get("ad.currentImpressions",0)===0&&!this.amby.get("reverseBackfill",!1)&&(!this.amby.get("ad.wasPlaying",!1)||this.amby.get("ad.playerEngine")==="aniviewDirect")&&this.playerContainerDiv.parentElement.removeChild(this.playerContainerDiv);break}},e.prototype.onClick=function(t){if(t===void 0&&(t=!1),this.itemIndex=this.amby.get("player.itemIndex"),this.itemIndex!==null){var i=this.amby.get("playlist.".concat(this.itemIndex,".videoExt"));typeof i=="string"&&(i=JSON.parse(atob(i)));var a=i.clickUrl;if(a){a=Me.Helpers.fromAscii(a);var s=window.open(a,"_blank");s&&(this.amby.dispatch(ne.setTriggerToTrue("player.openPage")),s.focus(),t&&this.amby.dispatch(ne.setTriggerToTrue("player.actionPause")))}else!this.amby.get("player.isAdPlaying")&&t&&(this.amby.get("player.status")===qt.states.STATUS_PLAYING?this.amby.dispatch(ne.setTriggerToTrue("player.actionPause")):this.amby.dispatch(ne.setTriggerToTrue("player.actionPlay")))}},e.prototype.onMuteBtnClicked=function(){(0,oi.mgDebug)("Mute Button clicked."),this.muted=this.amby.get("player.muted",!1),this.muted?(this.amby.dispatch(ne.setTriggerToTrue("player.userUnmute")),this.amby.dispatch(ne.setTriggerToTrue("player.unmute")),this.amby.dispatch(ne.upsertAdState({initMuted:!1}))):(this.amby.dispatch(ne.setTriggerToTrue("player.userMute")),this.amby.dispatch(ne.setTriggerToTrue("player.mute")),this.amby.dispatch(ne.upsertAdState({initMuted:!0})))},e.prototype.onPlayerVisible=function(){var t=this.amby.get("player.visible",!1);t?Me.Helpers.addClass(this.playerContainerDiv,"showed"):Me.Helpers.removeClass(this.playerContainerDiv,"showed")},e.prototype.applyPlayerSize=function(t){var i=this;t===void 0&&(t=!0),Me.Helpers.vitalCall(function(){i.videoElementPosition(),i.teaserImgPosition(t)},this.amby.get("isVital",!0))},e.prototype.videoElementPosition=function(){this.playerContainerDiv.removeAttribute("style");var t=Me.Helpers.getElemWidth(this.playerContainerDiv),i=t,a=i/(this.aspectRatio.width/this.aspectRatio.height),s=Me.Helpers.getElemHeight(this.playerContainerDiv);if(s===0){var n=Me.Helpers.getImgSizeByUrl(this.teaserImg.src);n?(s=n.height,s<=0&&(s=a),this.playerContainerDiv.style.height="".concat(s,"px")):s=a}s>a&&(a=s,i=a*(this.aspectRatio.width/this.aspectRatio.height)),(this.sticky||this.stickyAd)&&this.amby.get("player.isSticky",!1)&&(i=t,s=t/(this.aspectRatio.width/this.aspectRatio.height),a=s,this.playerDiv.style.width="".concat(i,"px"),this.playerContainerDiv.style.width="".concat(i,"px")),this.playerContainerDiv.style.height="".concat(s,"px"),this.playerDiv.style.height="".concat(a,"px");var l={width:t,height:s,pWidth:i,pHeight:a};Me.Helpers.isIE()&&(l.top=0,l.left=0),this.amby.dispatch(ne.upsertState({videoElemPosition:l,player:{size:{width:i,height:a}}}))},e.prototype.teaserImgPosition=function(t){var i=this.teaserImgContainer.getBoundingClientRect();this.amby.dispatch(ne.setPlayerTeaserPosition({top:i.top-this.widget.block.getBoundingClientRect().top,left:i.left-this.widget.block.getBoundingClientRect().left,width:i.width,height:i.height||0})),t&&(this.amby.dispatch(ne.setTriggerToTrue("player.resize")),this.amby.dispatch(ne.setTriggerToTrue("player.teaserPositionChanged")))},e.prototype.startInSticky=function(){this.amby.dispatch(ne.setPlayerSticky(!0)),this.applyPlayerSize(),this.playerContentStart||this.amby.dispatch(ne.setTriggerToTrue("player.actionPlay"))},e.prototype.getVideoTeaserIndex=function(t){var i=this;this.teasers=this.widget.block.querySelectorAll(".mgline"),(!this.teasers||this.teasers.length===0||Array.apply(null,this.teasers).filter(function(n){return n.className.indexOf("vrline")>=0}).length===0)&&setTimeout(function(){i.getVideoTeaserIndex(t)},50),this.inlinePlacement||(this.inlinePlacement=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10));for(var a=0,s=0;s<this.teasers.length;s++)if(this.teasers[s].className.indexOf("vrline")>-1){if(this.inlinePlacement!==null&&this.inlinePlacement===a+1){this.playerTeaserIndex=s,this.amby.dispatch(ne.upsertState({widget:{playerTeaserIndex:this.playerTeaserIndex}})),t&&t();break}a+=1}},e}(yf.FormatBase);qi.PerformanceBase=kf});var Fo=re(Os=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Os,"__esModule",{value:!0});Os.NativeBase=void 0;var Cf=Ne(),li=we(),Df=zo(),If=De(),Pf=Za(),Ef=function(){function r(){}return r.init=function(e,t){var i=this,a=(0,li.getInObject)(e,["mgRec","config","formats"]),s=(0,li.getInObject)(e,["mgRec","cappingData","dt"],"desktop");if(s==="tablet"&&(s="mobile"),Array.isArray(a)){for(var n=0;n<a.length;n++)if(a[n].device===s&&a[n].name==="native"&&(!a[n].test||li.Helpers.getUrlParam(a[n].test)||li.Helpers.getCookie(a[n].test))){var l=(0,li.getInObject)(e,["mgRec","config","parentCid"],(0,li.getInObject)(e,["mgRec","cid"])),d=(0,li.getInObject)(e,["mgRec","config","isVital"],!0),h=(0,Cf.createAmby)("video_".concat(l,"_").concat(t));h.dispatch(If.setFormatConfig(a[n])),e.amby=h,e.formatConfig=a[n],(a[n].performance===!0||a[n].sticky===!0&&!a[n].embedded)&&(this.videoSensorComponent=new Pf.VideoSensorComponent(e),li.Helpers.vitalCall(function(){e.performance=new Df.PerformanceBase(e,i.videoSensorComponent)},d));break}}},r}();Os.NativeBase=Ef});var Yo=re(Ct=>{"use strict";w();_();k();C();D();I();var Af=Ct&&Ct.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,i,a)}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),yi=Ct&&Ct.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Af(e,r,t)};Object.defineProperty(Ct,"__esModule",{value:!0});yi(Oe(),Ct);yi(Un(),Ct);yi(wi(),Ct);yi(we(),Ct);yi(Fn(),Ct);yi(Bo(),Ct);yi(Fo(),Ct)});var $o=re(ci=>{"use strict";w();_();k();C();D();I();Object.defineProperty(ci,"__esModule",{value:!0});ci.servLibrary=ci.loadLibrary=ci.loadStyles=void 0;var ba=Yo();window._mgLib1_11_203||(window._mgLib1_11_203=function(){function r(e,t){this.block=e,this.mgRec=t,this.modules=r.modules,this.libConfig=r.libConfig,this.rootElement=null,this.amby=null,this.served=!1,window._mgwhook&&window._mgwhook(this),this.initBlock()}return r.prototype.initBlock=function(){for(var e in r.modules)if(r.modules.hasOwnProperty(e)&&r.modules[e].init)try{r.modules[e].init(this,r.widgets.length)}catch(t){this.hasOwnProperty("debug")&&typeof this.debug=="function"&&this.debug("Error in ".concat(e,": ").concat(t.toString()))}},r.prototype.setConfig=function(e){this.mgRec.config=e},r._mgload=function(e){typeof this.log>"u"&&(this.log=new ba.Debug(ba));var t=e.config.parentCid||e.cid;this.log.debug(new Date().getTime()-window.performance.timing.navigationStart),this.log.debug("_mgload: "+t+" libVer: 1_11_203 DOMLoaded: "+r.DOMContentLoaded),e.rootElement=e.rootElement||document;var i=e.rootElement.getElementsByClassName("_mgw_"+t);if(i.length===0&&e.rootElement.classList&&e.rootElement.classList.contains("_mgw_"+t)&&(i=[],i.push(e.rootElement)),i.length===0){i=[];for(var a=e.rootElement.querySelectorAll("div[class*=vrPopup]"),s=0,n=a.length;s<n;s++)a[s].parentNode&&i.push(a[s].parentNode)}for(var s=0,n=i.length;s<n;s++)i[s].getAttribute("data-mgloaded")||(this.log.debug(i[s]),i[s].setAttribute("data-mgloaded","true"),r.widgets.push(new r(i[s],e)))},r._mgserv=function(e){typeof this.log>"u"&&(this.log=new ba.Debug(ba));var t=e.config.parentCid||e.cid;this.log.debug("_mgserv: "+t+" libVer: 1_11_203");var i=r.widgets;if(i&&i.length>0)for(var a=0;a<i.length;a++){var s=i[a].mgRec.config.parentCid||i[a].mgRec.cid;if(t===s&&!i[a].served){i[a].served=!0,i[a].mgRec.vr_playlist=e.vr_playlist,i[a].mgRec.cappingData=e.cappingData,e.config&&(i[a].mgRec.config.uuid=e.config.uuid,i[a].mgRec.config.templateId=e.config.templateId,i[a].mgRec.config.subid=e.config.subid),i[a].amby.dispatch({type:"UPSERT_STATE",state:{playlist:e.vr_playlist,cappingData:e.cappingData,servLib:e.servLib,cxurl:e.cxurl}}),e.config.vastContent&&i[a].amby.dispatch({type:"UPSERT_STATE",state:{ad:{vastContent:e.config.vastContent}}});break}}},r.prototype.getWidgets=function(){return r.widgets},r.prototype.isDOMContentLoaded=function(){return r.DOMContentLoaded},r}(),_mgLib1_11_203.modules=ba,_mgLib1_11_203.widgets=[],_mgLib1_11_203.DOMContentLoaded=document.readyState!=="loading",_mgLib1_11_203.libConfig=JSON.parse('{"jwPlayerIdVrw":"//content.jwplatform.com/libraries/WLok6WPd.js","mgPlayerStylesUrlTemplate":"//{{DOMAIN}}/mgPlayer/css/mgPlayer_v2.css","teaserCappingSensorUrlTemplate":"//{{DOMAIN}}/c","videoSensorUrlTemplate":"//{{DOMAIN}}/vs/","adSrcNoUiUrlTemplate":"//video-native.{{DOMAIN}}/scripts/adSrcNoUi.js","baseStylesUrlTemplate":"//{{DOMAIN}}/mgPlayer/css/","lang":{"skipText":{"en":"Skip","uk":"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u0438","ru":"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C"},"skipOffsetText":{"en":"Skip ad in %s","uk":"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u0438 \u0440\u0435\u043A\u043B\u0430\u043C\u0443 \u0447\u0435\u0440\u0435\u0437 %s","ru":"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0440\u0435\u043A\u043B\u0430\u043C\u0443 \u0447\u0435\u0440\u0435\u0437 %s"},"clickText":{"en":"Learn more","uk":"\u0414\u0456\u0437\u043D\u0430\u0442\u0438\u0441\u044F \u0431\u0456\u043B\u044C\u0448\u0435","ru":"\u0423\u0437\u043D\u0430\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435"},"headerText":{"en":"Advertisement","uk":"\u0420\u0435\u043A\u043B\u0430\u043C\u0430","ru":"\u0420\u0435\u043A\u043B\u0430\u043C\u0430"}}}'),document.addEventListener("DOMContentLoaded",function(){document.location.href.indexOf("mgwdebug")>0&&console.info("DOMContentLoaded: ".concat(new Date().getTime()-window.performance.timing.navigationStart)),_mgLib1_11_203.DOMContentLoaded=!0}));function Lf(r,e){if(!r.querySelector("#mgPlayerStyles")){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href","".concat(e)),t.id="mgPlayerStyles",t.addEventListener("load",function(){t.setAttribute("data-loaded","true")}),document.getElementById("mgPlayerStyles")||document.head.appendChild(t),r.isEqualNode(document)||r.appendChild(t.cloneNode(!0))}}ci.loadStyles=Lf;function Bf(r){return window._mgLib1_11_203._mgload(r)}ci.loadLibrary=Bf;function Of(r){return window._mgLib1_11_203._mgserv(r)}ci.servLibrary=Of});var Ms,Zo=ae(()=>{w();_();k();C();D();I();Gn();bt();Ms=class r{constructor(e,t,i,a,s,n){if(this.blankImage=`data:image/svg+xml,%3Csvg
            xmlns="http://www.w3.org/2000/svg"
            width="492" height="277"
            viewBox="0 0 492 277"
            %3E%3C/svg%3E`,this.hrefAttr="href",this.enabledCooperationTypes=JSON.parse('["wages","int_exchange"]'),this.BaseBlockClass=r,this.app=this,this.context=t,this.root=this.context.document.getElementById(e),this.debugBlock=new ka(this),this.lifeCycleLoadResolver=null,this.waitConsentResolver=null,this.rootId=e,this.containerId=a,this.uniqId=s,this.fallbackMode=i,this.page=1,this.adlink="",this.template="",this.templateContent=null,this.id=1477799,this.originalId=1477799,this.pvid="",this.muid="",this.beforeInitBlockHooks=[],this.afterPreRenderNewsHooks=[],this.beforeInjectScriptHooks=[],this.beforeInjectTemplateHooks=[],this.beforeLoadNewsHooks=[],this.afterLoadNewsHooks=[],this.afterInjectScriptHooks=[],this.beforePrepareCappingDataHooks=[],this.afterPrepareCappingDataHooks=[],this.afterSendCappingHooks=[],this.beforeInitHooks=[],this.afterInitHooks=[],this.blocksAddress="",this.tickerPrefix="",this.countLoadBlocks=0,this.preTemplate="",this.postTemplate="",this.banners={},this.loadedDefault=!1,this.teaserData={},this.servicerData={},this.pagesServicerData=[],this.childWidgetsData=JSON.parse('{"1477812":{"childId":1477812,"newsWidgetIdPartner":0,"customFuncBlocks":[],"showMonetizationEnabled":0,"childCountNews":6,"isAdblockChild":false,"childSubtype":"under-article-widget-main"},"1578448":{"childId":1578448,"newsWidgetIdPartner":0,"customFuncBlocks":[],"showMonetizationEnabled":1,"childCountNews":6,"isAdblockChild":true,"childSubtype":"under-article-widget-adblock"}}'),this.versionWidget=n,this.sspPerformance=10>=Math.ceil(Math.random()*100),this.doubleClickType="",this.doubleClickCheckId=0,this.doubleClickPercent=0,this.widgetConstructorData=JSON.parse('{"blur":"auto","cols":3,"font":"arial","kind":"wages","rows":"3","type":"under-article-widget","media":{"opacity":80,"duration":1,"minWidth":250,"position":"bottom","minHeight":150,"videoOverlay":1},"mgbox":{"styles":{"maxWidth":1220}},"price":false,"theme":"#de2526","width":"100%","button":1,"mcdesc":{"styles":{"font":"verdana","color":"#666666","display":"none","fontSize":12,"fontStyle":"normal","textAlign":"center","fontWeight":"normal","textDecoration":"none"}},"mgline":{"styles":{"width":"150","height":"120","margin":"2","borderColor":"#ffffff","borderStyle":"solid","borderWidth":0,"borderRadius":"0"}},"imgType":"super","mcimage":{"size":200,"styles":{"padding":0,"borderColor":"#ffffff","borderStyle":"solid","borderWidth":0},"size-width":492,"size-height":277},"mcprice":{"show":"true","styles":{"font":"verdana","color":"#2a3a7b","fontSize":14,"fontStyle":"normal","textAlign":"left","fontWeight":"bold","textDecoration":"none"}},"mctable":{"styles":{"borderColor":"","borderWidth":0,"backgroundColor":""}},"mctitle":{"styles":{"color":"#de2526","fontSize":"16","fontStyle":"normal","textAlign":"left","fontWeight":"bold","text-transform":"uppercase","textDecoration":"none"}},"subType":"under-article-widget-main","mcdomain":{"styles":{"font":"arial","color":"#de2526","display":"block","fontSize":"14","fontStyle":"normal","textAlign":"left","fontWeight":"normal","textDecoration":"none"}},"rerunAds":"0","isToaster":1,"colsMobile":1,"isDragDown":1,"previewImg":"https:\\/\\/cdn.mgid.com\\/images\\/draw-widget-preview.jpg","colorButton":"","imageFormat":46,"imageShadow":"","scrollEffect":"0","textPosition":"bottom","autoplacement":"off","formatChanged":true,"customGradient":"","isInterstitial":0,"popupFrequency":15,"widgetFormatId":1,"is_int_exchange":"1","mobileWidgetImg":"https:\\/\\/cdn.mgid.com\\/images\\/mobile-widget-preview.png","passageFrequency":60,"showEffectButton":"false","showWidgetButton":"true","teaserCardShadow":"0","teaserFixedWidth":"0","imageScaleOnHover":"","interstitialAfter":3,"is_show_ad_marker":0,"frequencyOfDisplay":"1","widgetTitleSettings":{"styles":{"font":"arial","color":"#2b397b","fontSize":17,"text-transform":"uppercase"}},"frequencyCappingShow":3,"frequencyCappingTime":2,"notificationPosition":"top","toasterInactivityTime":8,"widgetTypeDescription":1}'),typeof this.widgetConstructorData.mctitle<"u"&&typeof this.widgetConstructorData.mctitle.styles<"u"&&typeof this.widgetConstructorData.mctitle.styles.fontSize<"u"?this.autoSizeTitle=this.widgetConstructorData.mctitle.styles.fontSize:this.autoSizeTitle=0,this.globalSettings=JSON.parse('{"capping_observer_threshold":"0.5","current_language":"en","widget_lazy_load_margin":"1000","accidental_clicks_delay":"10","ia_page_view_timeout":"180","ia_page_imp_timeout":"180","widget_intentiq_refresh_millis":"43200000","retention_tool_widget_utm":"utm_mgid_push","except_ads_limit":"150","capping_observer_time":"","widget_consent_wait_time_ms":"30","widget_consent_outdated_time":"168"}'),this.preRenderImageSizes={},this.preRenderTeaserSizes={},this.customBanners=JSON.parse('{"1477799":[],"1477812":[],"1578448":[]}'),this.initServicerRequest=!0,this.exceptAdsList=[],this.clickHandlers=[],this.observerWidgetHooks=[],this.observerTeasersHooks=[],this.sspDoubleClickHash=[],this.requestParams={},this.userAgentDataParams=null,this.consentDataParams=null,this.webProtocol="https:",this.clickHandlerList={onSiteNotificationClick:{handler:"onSiteNotificationHandler",priority:8},onSmartDoubleClick:{handler:"onSmartDoubleClickHandler",priority:10},onAntifraudStatisticsClick:{handler:"onAntifraudStatisticsClickHandler",priority:15},sspDoubleClick:{handler:"sspDoubleClickHandler",priority:20},scrollTimeDoubleClick:{handler:"scrollTimeDoubleClickHandler",priority:21},activateDelayLink:{handler:"activateDelayLinkHandler",priority:30},accidentalClicks:{handler:"accidentalClicksHandler",priority:50},externalCountersLink:{handler:"externalCountersLinkHandler",priority:100},returnedRefreshClick:{handler:"returnedRefreshClickHandler",priority:120},internalExchangeLogger:{handler:"internalExchangeLoggerHandler",priority:150},showDesktopDoubleClick:{handler:"showDesktopDoubleClickButton",priority:150},showMobileDoubleClick:{handler:"showDoubleClickButton",priority:150},hangNiceLinkListener:{handler:"hangNiceLinkListener",priority:200},countSessionClicks:{handler:"countSessionClicksHandler",priority:250},closeWidgetClick:{handler:"closeWidget",priority:600},refreshNews:{handler:"refreshNewsHandler",priority:700}},this.context.self!==this.context.top){let l=this.context.document.referrer.split("/");this.intExchangeProtocol=l[0].indexOf("http")==0?l[0]:"https:"}else{let l=this.context.document.location.protocol;this.intExchangeProtocol=l.indexOf("http")==0?l:"https:"}this.sourceName="",this.setTemplate(`<div class="mgbox">\r
<!--advertPrefix-->\r
    {foreach}\r
        <div class="mgline">\r
            {if $banner}{$banner}{/if}\r
            {if $teaser}\r
                <div class="image-with-text">\r
                    <div class="mcimg">\r
                        <a {$target} {$href} >\r
                            <div class="image-container">\r
                                <img class="mcimg" {$src} />\r
	                                <!--intExchangeWagesImagePlace-->\r
                            </div>\r
                        </a>\r
                    </div>\r
                    <div class="text-elements">\r
                        <div class="text_on_hover">\r
                            <div class="mcdomain-top mcdomain"><a {$target} {$href}>{$source}</a></div>\r
                            <div class="mctitle"><a {$target} {$href}>{$title}</a></div>\r
                            <div class="mcdesc"><a {$target} {$href}>{$desc}</a></div>\r
                        </div>\r
                    </div>\r
                </div>\r
            {/if}\r
        </div>\r
    {/foreach}\r
</div>\r
`.replace(/[\r\n]/g,"")),this.setStyles(`.mgresponsive { display: inherit; } .mgbox { padding: 0 !important; position: relative !important; text-align: center; vertical-align: top !important; margin: 0 auto 25px; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-direction: row; -ms-flex-direction: row; flex-direction: row; -webkit-flex-wrap: wrap; -ms-flex-wrap: wrap; flex-wrap: wrap; line-height: 100% !important; transition: none !important; box-sizing: border-box; width: 100%; max-width: 100%; min-width: 90px; -webkit-box-pack: justify; -ms-flex-pack: justify; justify-content: space-between; } .mctitle { text-align: left; margin-top: 2px; line-height: 1 !important; } .mctitle a { font-weight: bold; font-size: 16px; color: #000; font-family: Arial, sans-serif; line-height: 110% !important; } .mcdomain { display: block; text-align: left; } .mcdomain a { font-size: 14px; line-height: 14px; color: #de2526; font-family: Arial, sans-serif; padding: 4px; display: block; overflow: hidden; text-transform: capitalize; } .mcdomain a img.mcimgsrc { vertical-align: bottom; margin-bottom: -3px; height: 20px; width: 20px; display: inline-block; } .mgline { position: relative; background: none repeat scroll 0 0; cursor: pointer; overflow: hidden; zoom: 1; display: inline; padding: 0 !important; width: calc(33.333% - 10px); max-width: 33.333%; min-width: 90px; box-sizing: border-box; margin: 10px 0; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-direction: column; -ms-flex-direction: column; flex-direction: column; word-wrap: break-word; vertical-align: top; flex-wrap: wrap; -webkit-box-pack: justify; -ms-flex-pack: justify; justify-content: space-between; } .mgline:hover .mctitle a { color: #de2526; text-decoration: underline !important; } .mgline[max-width~="120px"] .mcdesc { display: none !important; } .mgline .image-container { position: relative; display: block; } .mgline .image-container .mcimgad { position: absolute; right: 0; bottom: 0; width: 20px; height: 20px; } .mgline .image-with-text { position: relative; min-height: 1px; } .mgline .image-with-text, .mgline .mgtobottom { width: 100% !important; max-width: 492px; margin: 0 auto; } .mgline .fake { visibility: hidden; position: relative; padding-top: 4px; } .text-elements a { text-decoration: none; } .fake, .mgtobottom { display: table; bottom: 0; width: 100%; text-align: left; } .mgtobottom__buy { padding-right: 20px; } .mgtobottom { position: absolute; } .mgheader { margin-bottom: 15px; display: flex !important; justify-content: center; } .mghead { font-family: Lato-Regular,Geneva,Verdana,sans-serif; color: #fff; font-size: 16px !important; line-height: 1; text-transform: uppercase !important; background: #de2626; padding: 8px 16px; margin: 0; font-weight: normal; z-index: 1; } .mgheader div { position: absolute; bottom: -20px; right: 0; } .mgheader:before { content: \\'\\'; position: absolute; top: 12px; left: 0; width: 100%; height: 5px; margin: 0px 0 0px; padding: 0px 0 0px; border-style: solid; border-width: 2px 0; border-color: #000; } .mcdomain-top { padding: 8px 0 4px; overflow: hidden; } .mcdomain-top a { display: block; padding: 0; font-family: Arial, sans-serif; font-weight: normal; text-align: left; line-height: 16px; letter-spacing: 0.04em; overflow: hidden; } div.mgbuybox, div.mgarrowbox, div.mcprice { display: none; } div.mcimg { padding: 0; text-align: center; } img.mcimg { width: 100% !important; height: auto !important; max-width: 492px; max-height: 277px; box-sizing: border-box; display: block; margin: 0; opacity: 1 !important; } .mcdesc { display: none; text-align: center; margin: 0 0 2px; } .mcdesc a { font-weight: normal; font-size: 12px; line-height: 1.5 !important; font-style: normal; text-decoration: none; color: #666666; font-family: Verdana,Geneva,sans-serif; } @supports not (flex-wrap: wrap) { .mgbox { display: block !important; } .mgline { display: inline-block !important; } } @media (max-width: 480px) { .mgline { width: 100% !important; margin: 1% 0 !important; max-width: 100% !important; min-height: 250px; } .mctitle { min-height: 38px; } } .mg-slider-overlay { overflow: hidden; position: relative; } .mg-slider-overlay .mg-slider-wrap { min-height: 200px; position: relative; width: 100%; -webkit-transform: translate3D(0, 0, 0); -moz-transform: translate3D(0, 0, 0); -ms-transform: translate3D(0, 0, 0); -o-transform: translate3D(0, 0, 0); transform: translate3D(0, 0, 0); -webkit-transition-duration: 200ms; -moz-transition-duration: 200ms; -ms-transition-duration: 200ms; -o-transition-duration: 200ms; transition-duration: 200ms; } .mg-slider-overlay .mg-slider-wrap .mg-slider-box { left: 0; top: 0; position: absolute; width: 100%; } .mg-pagination { text-align: center; } .mg-pagination .mg-pagination-list { display: inline-block; } .mg-pagination .mg-pagination-item { cursor: pointer; display: inline-block; *display: inline; *zoom: 1; width: 8px; height: 8px; margin: 0 2px; background: #ddd; border-radius: 50%; } .mg-pagination .mg-pagination-item-prev, .mg-pagination .mg-pagination-item-next { background: #f7f7f7; border: 1px solid #cecece; border-radius: 2px; cursor: pointer; display: inline-block; height: 11px; margin: 0 10px; padding: 5px 0; text-align: center; vertical-align: middle; width: 29px; } .mg-pagination .mg-pagination-item-prev:after, .mg-pagination .mg-pagination-item-next:after { background: url(https://images.dable.io/static/i/prevnext2.png?3) no-repeat 0 0; background-size: 17px 11px; content: ""; display: inline-block; height: 13px; width: 9px; } .mg-pagination .mg-pagination-item-next:after { background-position: -10px 0; width: 8px; } .mg-pagination .mg-pagination-item-current { background: #508eef; } body{margin:0px;} div#mgAdPlayerContainerDiv_1477799_0 { z-index: 999; }`.replace(/\\'/g,"'")),this.servicerDomain="servicer.mgid.com",this.adBlockStyles=`.mgresponsive { display: inherit; } .mgbox { padding: 0 !important; position: relative !important; text-align: center; vertical-align: top !important; margin: 0 auto; border-style: solid; border-width: 0; display: flex; -webkit-flex-direction: row; -ms-flex-direction: row; flex-direction: row; -webkit-flex-wrap: wrap; -ms-flex-wrap: wrap; flex-wrap: wrap; line-height: 100% !important; transition: none !important; box-sizing: border-box; -webkit-box-pack: justify; -ms-flex-pack: justify; justify-content: space-between; } .mgline { position: relative; } .mgline .image-with-text { position: relative; } .mgbox { width: 100%; max-width: 700px; } div.mcimg { padding: 0; text-align: center; } img.mcimg { border-style: solid; border-color: #ffffff; border-width: 0; width: 100% !important; height: auto !important; max-width: 492px; max-height: 277px; box-sizing: border-box; display: block; aspect-ratio: 1.77777778; } .mgline .text-elements { position: absolute; bottom: 0; left: 0; background: transparent linear-gradient(to bottom, transparent 0px, rgba(0, 0, 0, 0.7) 50%, rgba(0, 0, 0, 0.9) 100%) repeat scroll 0 0; width: 100%; } .mctitle { margin: 10px 1% 1px 1%; text-align: left; line-height: 1 !important; } .mctitle a { font-weight: bold; font-size: 13px; line-height: 1.1; font-style: normal; text-decoration: none; color: #fff; font-family: Arial,Helvetica,sans-serif; } .mgline:hover .mctitle a { color: #fff; text-decoration: underline !important; } .mcdesc { display: none; text-align: center; } .mcdesc a { font-weight: normal; font-size: 12px; line-height: 12px; font-style: normal; text-decoration: none; color: #666666; font-family: Verdana,Geneva,sans-serif; } .mcdomain { display: block; text-align: left; margin: 0 1%; overflow: hidden; } .mcdomain a { font-weight: normal; font-size: 11px; line-height: 16px; font-style: normal; text-decoration: none; color: #C7C7C7; font-family: Arial,Helvetica,sans-serif; display: block; overflow: hidden; padding-top: 1px; padding-bottom: 5px; } .mcdomain a img.mcimgsrc { vertical-align: bottom; margin-bottom: -3px; height: 20px; width: 20px; display: inline-block; } .mgline { background: none repeat scroll 0 0; cursor: pointer; overflow: hidden; zoom: 1; display: inline; padding: 0 !important; border-style: solid; border-color: #ffffff; border-width: 0; width: calc(33.333% - 10px); max-width: 33.333%; box-sizing: border-box; margin: 0 0 5px; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-direction: column; -ms-flex-direction: column; flex-direction: column; word-wrap: break-word; flex-wrap: wrap; -webkit-box-pack: justify; -ms-flex-pack: justify; justify-content: space-between; } .mgline .image-container { position: relative; } .mgline .image-container .mcimgad { position: absolute; right: 0; bottom: 0; width: 20px; height: 20px; } .mgline { vertical-align: top; } .mgline, .mgbox { min-width: 90px; } .mgline[max-width~="120px"] .mcdesc { display: none !important; } @supports not (flex-wrap: wrap) { .mgbox { display: block !important; } .mgline { display: inline-block !important; } } .text-elements a { text-decoration: none; } div.mcprice { text-align: left; } div.mcprice span { font-weight: bold; font-size: 14px; line-height: 14px; font-style: normal; text-decoration: none; color: #2a3a7b; font-family: Verdana,Geneva,sans-serif; } div.mgbuybox, div.mgarrowbox { display: none; } div.mgbuybox, div.mgarrowbox, div.mcprice { display: none; } span.mcpriceold { text-decoration: line-through !important; } @media (max-width: 480px) { .mgline { width: 48% !important; margin: 1% !important; max-width: 48% !important; } } @media (max-width: 480px) { .mgline { width: 98% !important; margin: 1% !important; max-width: 98% !important; } } img.mcimg { margin: 0; opacity: 1 !important; } .mgline { position: relative; } .mgline .fake { visibility: hidden; position: relative; padding-top: 4px; } .mgbuybox { text-align: right; font-weight: 700; font-size: 12px; color: #666666; } .mcdesc { margin-top: 0; margin-bottom: 2px; } .mcdesc a { line-height: 1.5 !important; } .mcprice-wrap { position: absolute; display: block; top: 0; left: 0; text-decoration: none; } .mcdiscount { color: #fff; border: none; font-size: 1.21em; } .mgarrowbox { position: relative; background: #fff; padding-right: 12px; } .mgarrowbox:before { content: \\'\\'; position: absolute; top: 0; right: -10px; border-top: 21px solid transparent; border-bottom: 21px solid transparent; border-left: 10px solid #fff; } div.mcprice-cover { display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-wrap: nowrap; -ms-flex-wrap: nowrap; flex-wrap: nowrap; -webkit-align-items: stretch; -moz-box-align: stretch; -ms-flex-align: stretch; align-items: stretch; -webkit-justify-content: flex-start; justify-content: flex-start; -webkit-flex-direction: row; -ms-flex-direction: row; flex-direction: row; height: 42px; font-size: 14px; } div.mcprice-cover .mcprice { font-size: 1.29em; color: #fff; } div.mcprice-cover.mcprice-cover_old .mcprice-inner { padding-top: 4px; width: auto; } div.mcprice-cover.mcprice-cover_old .mcprice-val { padding-right: 0; } div.mcprice-cover.mcprice-cover_old .mcprice { margin-bottom: 4px; color: #2a3a7b; font-size: 1em; } div.mcprice-cover.mcprice-cover_old + .mcprice-cover { display: none !important; } .mcprice-val, .mcprice-inner { display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-wrap: wrap; -ms-flex-wrap: wrap; flex-wrap: wrap; -webkit-align-items: center; -moz-box-align: center; -ms-flex-align: center; align-items: center; -webkit-justify-content: flex-start; justify-content: flex-start; white-space: nowrap; } .mcprice-inner { background: #ed181d; position: relative; padding: 0 2px 0 8px; text-align: center; color: #fff; width: 100%; } .mcprice-inner:before { content: \\'\\'; position: absolute; top: 0; right: -10px; border-top: 21px solid transparent; border-bottom: 21px solid transparent; border-left: 10px solid #ed181d; } .mcprice-val { padding: 2px 10px 0 14px; -webkit-flex-direction: column; -ms-flex-direction: column; flex-direction: column; -webkit-flex-wrap: wrap; -ms-flex-wrap: wrap; flex-wrap: wrap; -webkit-justify-content: center; justify-content: center; -webkit-align-items: flex-start; -moz-box-align: start; -ms-flex-align: start; align-items: flex-start; font-weight: bold; font-style: normal; text-align: left; } .mcpriceold { display: block !important; position: relative; width: 100%; font-size: 0.78em; font-weight: inherit; color: #ed181d; } .mcpriceold span { position: relative; } .mcpriceold span:before { content: \\'\\'; height: 1px; background: #ed181d; left: 0; right: 0; top: 50%; position: absolute; } div.mgbuybox, div.mgarrowbox { display: none; } .fake, .mgtobottom { display: table; bottom: 0; width: 100%; text-align: left; } .fake > *, .mgtobottom > * { display: table-cell; } .mgtobottom__buy { padding-right: 20px; } .mgtobottom { position: absolute; } .mgline .image-with-text, .mgline .mgtobottom { width: 100% !important; margin: 0 auto; } .mgline .image-with-text, .mgline .mgtobottom { max-width: 294px; } .mghead { font-family: Arial,Helvetica,sans-serif !important; color: #2b397b; font-size: 14px !important; text-transform: uppercase !important; } .mghead { margin: 10px 0 0 0 !important; font-weight: 600 !important; } div.mcprice, div.mcriceold { font-weight: bold; font-size: 14px; line-height: 14px; font-style: normal; text-decoration: none; color: #2a3a7b; font-family: Verdana,Geneva,sans-serif; } .mgline[max-width~="120px"] .mgarrowbox, .mgline[max-width~="120px"] .mgbuybox { display: none !important; } .mgline .image-with-text { min-height: 1px; } @media (max-width: 480px) { .mgline { width: 98% !important; margin: 1% !important; max-width: 98% !important; } } .mgheader { border-bottom: 1px solid #2b397b !important; padding-bottom: 3px; margin-bottom: 3px; } .mgheader div object, .mgheader div object a, .mgheader div img { max-width: 40px; max-height: 22px; } .mgheader div object:nth-child(2), .mgheader div object:nth-child(2) > a, .mgheader div object:nth-child(2) > a > img { max-width: 12px; max-height: 22px; } `.replace(/\((\'|\")?\/\//g,"($1https://"),this.clickTracking="",this.loadedType="",this.parentCustomFuncBlocks={},this.childFuncBlocks={},this.browserId=-1,this.deviceType=Si.Desktop,this.hrefAttr="href",this.enabledCooperationTypes=JSON.parse('["wages","int_exchange"]'),this.consentData=null,this.cmpEnabled=!1,this.uspString="",this.uspEnabled=!1,this.tcfv2Data=null,this.tcfv2Enabled=!1,this.consentOrigin=null,this.cookieMatchingDomain="cm.mgid.com",this.context._mgIntExchangeNews=this.context._mgIntExchangeNews||{},this.iframePlacementType=0,this.networkInformationType="unknown",this.networkInformationEffectiveType="unknown",this.networkInformationSaveData=0,this.pageUrl="",this.refererUrl="",this.refererParam="",this.adblockDetectResult=null,this.gptOptions=JSON.parse('{"slot":"\\/22717329971,4196\\/flash.pt\\/flash.pt_890543_1477799_under-article-widget_1_pt_pt_iab1_web","divId":"div-gpt-ad-1477799","lazy":1000,"price":0.2,"backfill":1510147}'),this.backfillData=JSON.parse('{"gpt":1510147}'),this.isOurIframe=this.context.document.location.hostname==="mg.mgid.com",this.refreshedElement=null,this.getActiveChilds().length||(this.videoWidgetsLib=$o())}getQueryParameterByName(e){e=e.replace(/[\[\]]/g,"\\$&");let i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(this.app.context.location.href);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}setStyles(e){this.app.styles=e.replace(/\((\'|\")?\/\//g,"($1"+this.app.webProtocol+"//")}setTemplate(e){e=e.replace(/^\s*[\r\n]|\s{2,}/gm,""),e=e.replace(/\((\'|\")?\/\//g,"($1"+this.app.webProtocol+"//"),e=e.replace('src="//','src="'+this.app.webProtocol+"//"),this.app.templateText=e.replace('href="//','href="'+this.app.webProtocol+"//")}cutString(e,t,i){if(e.length<=t)return e;let a=[];a=e.split(" ");let s=a[0]+" ",n;for(let l=1;l<a.length;l++){if(n=s+a[l],n.length>t)return s+(typeof i>"u"||i?"...":"");s+=a[l]+" "}return e}parseString(e,t){let i=[],a,s="";for(i=e.split(" "),a=0;a<i.length;a++)i[a].length>t&&i[a].search(/&\w+;/)<0?s+=i[a].substr(0,t)+" "+i[a].substr(t)+" ":s+=i[a]+" ";return s}prepareTitle(e){return e=this.app.cutString(e,75,1),e}prepareDesc(e){return e=this.app.cutString(e,75,1),e}hidePreloadDiv(){this.app.fallbackMode?this.app.fallbackMode&&this.app.countLoadBlocks===0&&(this.app.root.innerHTML="",this.app.context.document.getElementById("M890543PreloadC1477799")&&(this.app.context.document.getElementById("M890543PreloadC1477799").style.display="none")):["MarketGidPreloadC"+this.app.containerId,"M890543PreloadC"+this.app.containerId,"MarketGidPreloadN"+this.app.containerId,"M890543PreloadN"+this.app.containerId].every(t=>{let i=this.app.context.document.getElementById(t);return i?(i.style.display="none",!1):!0})}prerenderNews(e){if(this.app.root&&e){this.app.fallbackMode&&this.app.countLoadBlocks===0&&(this.app.root.innerHTML=""),this.advertLinkBlock.refreshAdvertLink(),e=this.app.advertLinkBlock.parseAdvertLink(e),this.app.addPreRenderTemplate(e);let t=this.app.root.getElementsByTagName("a");for(let i=0;i<t.length;i++)t[i].rel="sponsored nofollow noopener"}}loadNewsPrestart(e,t){if(this.app.hidePreloadDiv(),typeof e<"u"){this.app.servicerData=e;let i={page:this.app.pagesServicerData.length+1,servicerData:this.app.servicerData,teasersCount:t};if(this.app.pagesServicerData.push(i),typeof e.dt<"u"&&(this.app.deviceType=e.dt),typeof e.brid<"u"&&(this.app.browserId=e.brid),typeof this.app.servicerData.lib<"u"&&this.app.servicerData.config&&this.app.servicerData.config.formats&&this.preloadVideoWidgetResources(),typeof this.app.servicerData<"u"&&typeof this.app.servicerData.css<"u"&&(this.app.styles=this.app.servicerData.css,this.app.stylesheetsBlock.add("split_style",this.app.servicerData.css),this.app.stylesheetsBlock.remove("main")),typeof this.app.servicerData<"u"&&typeof this.app.servicerData.t<"u"&&this.app.servicerData.t!==""){let a=this.app.servicerData.t.replace(/\r?\n/g,"");this.app.setTemplate(a)}}}preloadVideoWidgetResources(){let e=this.app.servicerData.dt?this.app.servicerData.dt:"desktop",t=this.app.servicerData.config.formats.filter(i=>i.device===e)[0];if(t){let{protocol:i}=this.context.document.location,a=i.indexOf("http")!==-1?`${i}//`:"https://",s=this.app.currentSubnetDomain,n=`video-native.${s}/mgPlayer/css`,l=`mgStyles${this.id}`;if(t.styleUrl){let d=t.styleUrl.replace("{{DOMAIN}}",this.app.currentSubnetDomain).replace(/^(https?:\/\/|\/\/)/,`${a}`);this.appendWidgetPreloadDom(d,l,!0)}(typeof t.playerType>"u"||t.playerType==="mgplayer")&&this.appendWidgetPreloadDom(`${a}video-native.${s}/mgPlayer/img/mgPlayer_v2_sprite.svg`)}}appendWidgetPreloadDom(e,t="",i=!1){let a=this.context.document.createElement("link");a.setAttribute("href",e);let s=e.split(".").pop();s==="css"&&(a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet")),s==="svg"&&a.setAttribute("type","image/svg+xml"),t&&a.setAttribute("id",t),i&&(a.onload=()=>{a.setAttribute("data-loaded","true")}),this.app.isShadowRoot()?(this.app.root.getRootNode().appendChild(a),this.context.document.head.appendChild(a.cloneNode(!0))):this.context.document.head.appendChild(a)}addVideoLib(){if(typeof this.app.servicerData.lib<"u"){let e=this.app.servicerData.lib!=="1.11.203"?`1.11.203<${this.app.servicerData.lib}`:"",t=JSON.parse('{"vpaid":{"adsLimit":1,"totalTimeout":60,"singleTimeout":30,"maxSinglePlayers":5},"enabled":"1","formats":[{"loop":true,"name":"outstream","test":false,"device":"desktop","maximp":1,"sticky":false,"adsPlace":"over","autoStart":"visibleOnly","moveToBody":false,"teaserSize":1,"teaserIndex":0,"teaserHeight":1,"closeButtonEnable":1},{"loop":true,"name":"outstream","test":false,"device":"mobile","maximp":1,"sticky":false,"adsPlace":"over","autoStart":"visibleOnly","moveToBody":false,"teaserSize":1,"teaserIndex":0,"teaserHeight":1,"closeButtonEnable":1}],"adPlayers":[{"name":"aniviewDirectPlayer","engine":"aniviewDirect","channelId":"651b191f0d8da8fad10fcaaa","sourceType":"test","playerTagId":"651b1a2fd9cdb1341307e9eb","publisherId":"5ac2203f073ef46a6856c7b0","nativeBackfillEnabled":false}],"autoStart":"visibleNotPause","adSchedule":[{"offset":0,"adPlayers":["aniviewDirectPlayer"]},{"offset":"pre","loadAds":"pageLoaded","adPlayers":["aniviewDirectPlayer"]}],"trickyInstream":"1"}'),i={lib:this.getActiveChilds().length===0?"1.11.203":this.app.servicerData.lib,servLib:e,cid:this.app.id,sid:890543,config:typeof this.app.servicerData.config<"u"?this.app.servicerData.config:t,vr_playlist:typeof this.app.servicerData.vr_playlist<"u"?this.app.servicerData.vr_playlist:[],template:"",styles:"",paramsData:{isSmart:!1},cxurl:this.app.contextBlock.contextUriParse(),subnetDomain:this.app.currentSubnetDomain,countersDomain:"c.mgid.com",lang:this.app.servicerData.sl,sd:this.app.servicerData.sd,cappingData:{dt:this.app.servicerData.dt,ts:this.app.servicerData.ts,tt:this.app.servicerData.tt,h2:this.app.servicerData.h2,iv:this.app.servicerData.iv,psid:this.app.servicerData.psid,isBot:this.app.servicerData.isBot,subnet:this.app.currentSubnet,lang:this.app.globalSettings.current_language},rootElement:this.app.root,hasBackfill:!!this.app.backfillData.video,backfillCallback:()=>{this.app.backfillBlock.renderBackfill()},backfillDestructor:()=>{this.app.backfillBlock.destroyBackfill()}};this.app.root.className.indexOf("_mgw_1477799")===-1&&(this.app.root.className+=(this.app.root.className.length===0?"":" ")+"_mgw_1477799"),this.app.root.className.indexOf("_mgVideoBlock_1477799")===-1&&(this.app.root.className+=(this.app.root.className.length===0?"":" ")+"_mgVideoBlock_1477799"),setTimeout(()=>{if(this.getActiveChilds().length>0||this.app.servicerData.config?.testWidgetLib){this.app.context._mgq=this.app.context._mgq||[];let a=!0,s=this.app.webProtocol+"//cdn.mgid.com/js/wglibs/mgWidget_"+this.app.servicerData.lib+(a?".es6":".es5")+".js";if(this.app.servicerData.config?.testWidgetLib){let l=this.app.servicerData.config.testWidgetLib.match(/mgWidget_(debug_)?(VID\d+)/);l!==null&&(i.lib=l[2]);let d=this.app.servicerData.config.testWidgetLib;d.indexOf(".es")===-1&&(d=d.replace(".js",a?".es6.js":".es5.js")),s=d+"?r="+encodeURIComponent(this.app.pageUrl)}let n=this.app.context.document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.async=!0,n.src=s,this.app.context.document.head.appendChild(n),this.app.context._mgq.push(["_mgload",i]),this.startMgqwp()}else this.videoWidgetsLib.loadLibrary(i)},0)}}loadNews(e){if(e.length>0){let i=this.app.getRenderer(this.app.templateText).getHtml(e);if(this.app.addVideoLib(),this.app.root&&i){if(i=this.app.advertLinkBlock.parseAdvertLink(i),this.app.fallbackMode&&this.app.countLoadBlocks==0&&(this.app.root.innerHTML=""),this.app.templateContent=this.app.context.document.createElement("template"),this.app.templateContent.innerHTML="<div>"+this.app.preTemplate+i+this.app.postTemplate+"</div>",typeof this.app.templateContent.content>"u"){let l=this.app.templateContent,d=document.createDocumentFragment(),h=l.childNodes;for(let y=0;y<h.length;y++)d.appendChild(h[y].cloneNode(!0));this.app.templateContent.content=d}this.app.templateContent=this.app.templateContent.content.firstChild;for(let l=0;l<this.app.beforeInjectTemplateHooks.length;l++){let d=this.app.beforeInjectTemplateHooks[l];try{d()}catch(h){this.app.log(`BaseBlock - beforeInjectTemplateHooks hook ${d} failed`,"error",h)}}let a=this.app.templateContent.querySelectorAll(".mgline-gpt");if(a.length)for(let l=0;l<a.length;l++)a[l].innerHTML="";this.app.refreshedElement&&(this.app.templateContent=this.app.templateContent.querySelector(".mgline"));let s=this.app.templateContent.querySelectorAll("img.mcimg");if(s.length>0)for(let l=0;l<s.length;l++){let d=s[l];d.src=s[l].getAttribute("data-src"),d.setAttribute("alt","")}let n=this.app.templateContent.querySelectorAll("video.mcvideo");if(n.length>0)for(let l=0;l<n.length;l++){let d=n[l];d.onplay=function(){d.classList.add("played")},d.removeAttribute("nopin"),d.removeAttribute("crossorigin"),d.src=d.getAttribute("data-src"),typeof d.childNodes[0]<"u"&&d.parentElement.appendChild(d.childNodes[0])}this.app.addTemplate(this.app.templateContent),this.app.renderBanners(!0,null)}}else{if(typeof this.app.context._mgIsCustomBanner<"u")try{let i={bannerType:"_mgIsCustomBanner",isEmpty:!0,id:this.app.context.frameElement.id};this.app.context.parent.postMessage(i,"*")}catch{}if(this.app.root&&this.app.countLoadBlocks==0){this.app.root.innerHTML="";return}}if(this.app.servicerData&&this.app.servicerData.muidn&&this.app.servicerData.pvid&&this.app.pvid!=""&&this.app.servicerData.pvid==this.app.pvid)try{if(this.app.context.localStorage&&this.app.context.localStorage.setItem("mgMuidn",this.app.servicerData.muidn),this.app.isAmp()){let i=new Date(new Date().setFullYear(new Date().getFullYear()+1)).toUTCString(),a="mgMuidn="+this.app.servicerData.muidn+";domain=.ampproject.net;expires="+i+";SameSite=None;Secure";this.app.context.document.cookie=a}this.app.muid=this.app.servicerData.muidn}catch{}this.app.cookieBlock.cookieStorage.page=this.app.page,this.app.cookieBlock.cookieStorage.time=new Date().getTime().toString(),this.app.cookieBlock.setCookie();let t=this.app.root.getElementsByTagName("a");for(let i=0;i<t.length;i++)t[i].rel="sponsored nofollow noopener";this.app.countLoadBlocks++}addTemplate(e){this.app.refreshedElement?(this.app.refreshedElement.parentNode.replaceChild(e,this.app.refreshedElement),(typeof this.app.requestParams.limitads<"u"||typeof this.app.requestParams.rtb_disabled<"u")&&(delete this.app.requestParams.limitads,delete this.app.requestParams.rtb_disabled),this.app.refreshedElement=null):this.app.root.appendChild(e)}addPreRenderTemplate(e){this.app.root.insertAdjacentHTML("beforeend",this.app.preTemplate+e+this.app.postTemplate)}getViewportHeight(){let e=this.app.context.document,t=this.app.context,i="documentElement",a="clientHeight",s="clientWidth",n="innerHeight",l="innerWidth",d="scrollHeight",h="scrollWidth",y="offsetHeight",g="offsetWidth",A="offsetLeft",P="offsetTop",E="scrollTop",T="scrollLeft";return this.app.isAmp()?typeof t["intersectionRect1477799_"+this.uniqId]<"u"?{c:t["intersectionRect1477799_"+this.app.uniqId].height,s:t["intersectionRect1477799_"+this.app.uniqId].y}:{c:t.intersectionRect1477799.height,s:t.intersectionRect1477799.y}:t[l]?{c:t[n],s:t.pageYOffset}:e[i]&&e[i][s]?{c:e[i][a],s:e[i][E]}:e.body[s]?{c:e.body[a],s:e.body[E]}:0}renderBanners(e,t){for(let i in this.app.banners)if(this.app.banners[i].rs!=e){if(!e){if(this.app.banners[i].iteration!=t)continue;this.app.banners[i].rs=!1}if(this.app.banners[i].isRendered===!0)continue;let a=this.app.root.querySelector("#"+i),s=this.app.banners[i].html,n=!1;if(this.app.banners[i].clickUrl&&s.indexOf("${CLICK_PIXEL}")!==-1){let h=this.app.allowReturnParams;this.app.allowReturnParams=!0,s=s.replace(/\${CLICK_PIXEL}/g,this.app.banners[i].clickUrl+this.app.getAntifraudQueryParameter(this.app.banners[i].clickUrl)),n=!0,this.app.allowReturnParams=h}s.indexOf("{page_url}")!==-1&&(s=s.replace(/{page_url}/g,this.app.pageUrl)),s.indexOf("{referrer_url}")!==-1&&(s=s.replace(/{referrer_url}/g,this.app.refererUrl));let l=this.app.banners[i].isCustomBanner,d=`<!DOCTYPE html><html><body style="margin: 0;">
          ${l?"<script>var _mgIsCustomBanner = true;<\/script>":""}
          ${s}
          </body></html>
        `;if(l)try{this.app.context.addEventListener("message",({data:h})=>{h&&h?.bannerType==="_mgIsCustomBanner"&&h?.id===this.app.banners[i].id&&(h.isEmpty&&(a.style.display="none",a.parentElement.style.display="none"),h.height&&(a.style.height=h.height+"px"))},!1)}catch{}this.app.banners[i].useSecureIframe?this.app.renderInSafeIframe(a,`banner_${i}`,d):(a.contentWindow.document.open(),a.contentWindow.document.write(d),a.contentWindow.document.close()),this.app.banners[i].isRendered=!0,n||(h=>{a.contentWindow.document.body.addEventListener("click",y=>{let g=y.target,A=!1;for(;g.parentElement;)if(g.tagName==="A"){A=!0;break}else g=g.parentElement;A&&this.app.request.pixel("bannerClickTracker",this.app.banners[h].clickUrl,{k:this.app.getAntifraudQueryParameter(this.app.banners[h].clickUrl)},{})},!0)})(i)}}renderInSafeIframe(e,t,i){e.sandbox="allow-scripts allow-popups";let a=this.app.context.location.href.indexOf("admin.")===-1&&this.app.context.location.href.indexOf("dashboard.")===-1&&this.app.context.location.href.indexOf("panel.")===-1;40>0&&a&&(e.sandbox="allow-same-origin allow-scripts allow-popups"),"srcdoc"in e?e.srcdoc=i:(e.src=this.app.webProtocol+`//cdn.mgid.com/widgets/framehost.html#${t}`,this.app.context.addEventListener("message",s=>{s.origin===this.app.webProtocol+"//cdn.mgid.com"&&s.data===`loaded #${t}`&&e.contentWindow.postMessage(i,"*")},!1))}getPageCount(){return 20}init(){if(this.app.countersBlock.widgetPerformancePixel("init"),typeof JSON!="object"&&(this.app.hidePreloadDiv(),this.app.log("Unsupported browser","error"),this.app.debugBlock.sendData("Unsupported browser")),this.app.canUseShadowDom()){let e=this.app.root;try{e.parentNode.attachShadow({mode:"open"}).appendChild(e)}catch(t){this.app.log("Shadow DOM can't be attached: ","error",t)}}if(this.app.root){this.app.cookieBlock.getCookie();let e=parseInt(this.app.cookieBlock.cookieStorage.page),t=this.app.context.MarketGidPageOffset?parseInt(this.app.context.MarketGidPageOffset):0;this.app.addClickHandler(this.app.clickHandlerList.hangNiceLinkListener.handler,this.app.clickHandlerList.hangNiceLinkListener.priority),this.app.addEvent(this.app.root,"mouseup",this.app.eventsHangNiceLinkListener),this.app.addEvent(this.app.root,"contextmenu",this.app.eventsHangNiceLinkListener),this.app.addEvent(this.app.root,"touchstart",this.app.eventsHangNiceLinkListener);let i=this.app.getPageCount();if(e!=null&&e<i&&e>0?this.app.page=e+1:(e>i-1||e<1)&&(this.app.page=1+t),new Date().getTime()-(typeof this.app.cookieBlock.cookieStorage.time<"u"?this.app.cookieBlock.cookieStorage.time:0)>=6e5&&(this.app.page=1+t),this.app.page||(this.app.page=1),this.app.pageUnlim=this.app.page-1,this.app.cookieBlock.cookieStorage.page=this.app.page,this.app.cookieBlock.setCookie(),!this.app.context.document.cookie){let a=new Date;this.app.page=a.getSeconds()%i+1}this.app.blocksAddress=this.app.webProtocol+"//"+this.app.servicerDomain+"/",this.app.clickTracking=typeof this.app.context.MGClickTracking<"u"?this.app.context.MGClickTracking:"",this.app.adBlockStatement=!1,this.app.adBlockStatement=this.app.adBlockDetect(),this.app.adBlockStatement&&(this.app.getRoot().classList.add("eyeo"),this.app.rtbDisabled=1),this.app.adBlockStatement&&this.app.setTemplate(`<div class="mgbox">
    <!--advertPrefix-->
    {foreach}
    <div class="mgline">
        {if $banner}{$banner}{/if}
        {if $teaser}
        <div class="image-with-text">
            <div class="mcimg">
                <a {$target} {$href} >
                    <div class="image-container">
                        <img class="mcimg" {$src} />
                        <!--intExchangeWagesImagePlace-->
                    </div>
                </a>
            </div>
            <div class="text-elements">
                <div class="text_on_hover">
                    <div class="mcdomain-top mcdomain" style="display: none;"><a {$target} {$href}>{$source}</a></div>
                    <div class="mctitle"><a {$target} {$href}>{$title}</a></div>
                </div>
            </div>
        </div>
        {/if}
    </div>
    {/foreach}
</div>
`.replace(/[\r\n]/g,"")),this.app.context.onClickExcludes=this.app.context.onClickExcludes||[],this.app.context.onClickExcludes.push(this.app.root),typeof this.app.context.s1<"u"&&this.app.context.s1&&this.app.context.s1!=="${PUBLISHER_ID}"&&(this.app.sourceName=this.app.context.s1),this.app.adBlockStatement&&(this.app.sourceName="eyeo"),this.app.adBlockStatement?this.app.stylesheetsBlock.add("adBlockMain",this.app.adBlockStyles):(typeof this.app.context._mgBackfillStyles<"u",this.app.stylesheetsBlock.add("main",this.app.styles)),this.app.addEvent(this.app.root,"click",this.app.widgetClickHandler),this.app.addEvent(this.app.root,"auxclick",this.app.widgetClickHandler)}}setBackfillStyles(){let e=this.app.context._mgBackfillStyles,t=`
      .mgbox {
        padding: 0 !important;
        margin: 0 auto !important;
        width: 100% !important;
        max-width: 100% !important;
        border: none !important;
      }
      .mgbox:first-of-type {
        padding: 0 !important;
      }
      .mgbox .mgline {
        width: 100% !important;
        max-width: 100% !important;
        height: auto !important;
        padding: 0 !important;
        margin: 0 !important;
        box-shadow: none !important;
        border-radius: 0 !important;
        background: none !important;
      }
      .mgline .mcdesc {
        display: none !important;
      }
    `;this.app.utils.isMobile()||(e=e.replace("@media (max-width: 480px)","@media (min-width: 480px)")),e.indexOf(".mgtobottom .mcdomain")!==-1&&(e=e.replace(".mgtobottom .mcdomain",".mcdomain"),e=e.replace(".mgtobottom .mcdomain a",".mcdomain a")),this.app.stylesheetsBlock.add("backfillMain",e+t)}resetPage(){this.app.page=1}getMostTopWindow(){let e=this.app.context;for(;e!=e.parent;)try{let t=e.parent.document.body;e=e.parent}catch{break}return e}getDevicePixelRatio(){let e=1;return typeof this.app.context.devicePixelRatio<"u"?e=this.app.context.devicePixelRatio:typeof this.app.context.screen.systemXDPI<"u"&&typeof this.app.context.screen.logicalXDPI<"u"&&this.app.context.screen.systemXDPI>this.app.context.screen.logicalXDPI&&(e=this.app.context.screen.systemXDPI/this.app.context.screen.logicalXDPI),e%1===0||(e=e.toFixed(3)),e}getCbusterParameter(){return this.app.context.MG_CacheBuster||new Date().getTime()+""+Math.floor(Math.random()*1e9+1)}async injectScript(e,t){this.app.time("processHooks(beforeInjectScriptHooks)"),await this.lifeCycleBlock.processHooks("beforeInjectScriptHooks",null),this.app.timeEnd("processHooks(beforeInjectScriptHooks)"),this.app.injectionScriptMethod(e,t)}createServicerScriptElement(e,t){let i=this.app.context.document.createElement("script"),a="MarketGidC1477799DisableStart",s="mgDisableStart1477799",n=typeof this.app.context[a]<"u";n||(n=typeof this.app.context[s]<"u"),i.type=n?"text/plain":"text/javascript",i.charset="utf-8",i.referrerPolicy="strict-origin-when-cross-origin";let l=1477799;this.app.adBlockStatement&&Object.keys(this.app.childWidgetsData).some(y=>{let g=this.app.childWidgetsData[y];if(g.showMonetizationEnabled===1&&typeof g.childId<"u")return l=g.childId,this.app.requestParams.src_cid=this.app.originalId,!0});let d=e?"fs/":"",h=this.app.blocksAddress+d+l+"/"+t;if(Array.isArray(this.app.context.document.mgExceptIds)){let y=h.indexOf("?")>-1?"&":"?",g=this.app.context.document.mgExceptIds.join(",");if(h.indexOf("except_ads")>-1){let A=new RegExp("([?&])except_ads=(.*?)(&|$)","i");h=h.replace(A,"$1except_ads=$2,"+g+"$3"),h=h.replace("=,","=")}else h+=`${y}except_ads=${g}`}return i.src=h,i}getMuid(){if(!this.app.muid.length){let e="";if(this.app.isAmp())e=this.app.getCookieValue("mgMuidn");else try{this.app.context.localStorage&&(e=this.app.context.localStorage.getItem("mgMuidn"))}catch{}typeof e=="string"&&e.length&&(this.app.muid=e)}return this.app.muid}getCookieValue(e){let t="";try{let i=this.app.context.document.cookie.split("; ").filter(a=>a.indexOf(e)!==-1);i.length&&(t=i[0].split("=")[1])}catch(i){this.app.log("getCookieValue Failed","error",i)}return t}getArticlePublishedTime(){let e="",t=this.app.getMostTopWindow(),i=t.document.querySelector('meta[property="article:published_time"]')||t.document.querySelector('meta[property="og:article:published_time"]');if(i&&(e=i.getAttribute("content")?.trim()||""),!e.length)try{let a=JSON.parse(t.document.querySelector('script[type="application/ld+json"]')?.textContent.trim()||"{}");if(Object.keys(a)?.length){let s="dateModified",n=l=>{for(let d in l){let h=l[d];if(d===s)return h;if(typeof h=="object"){let y=n(h);if(y)return y}}};e=n(a)?.trim()||""}}catch(a){this.app.log("getArticlePublishedTime - Failed","error",a)}return e}injectionScriptMethod(e,t){let i=this.app.createServicerScriptElement(e,this.app.page);if(this.app.requestParams={...this.app.requestParams,...this.app.pageViewPixelBlock.getPageDataParams()},this.app.userAgentDataParams&&(this.app.requestParams={...this.app.requestParams,...this.app.userAgentDataParams}),this.app.consentDataParams=this.app.consentsBlock.getConsentData(),this.app.consentDataParams&&(this.app.requestParams={...this.app.requestParams,...this.app.consentDataParams}),this.app.consentOrigin!==null&&(this.app.requestParams.consentOrigin=this.app.consentOrigin),this.app.consentOrigin==="cmp")typeof this.app.requestParams.consentStrLen<"u"&&delete this.app.requestParams.consentStrLen,typeof this.app.requestParams.consentTimestamp<"u"&&delete this.app.requestParams.consentTimestamp;else try{let g=this.app.context.localStorage.getItem("MG_tcfv2Data");this.app.requestParams.consentStrLen=g?g.length:0,g&&(this.app.requestParams.consentTimestamp=JSON.parse(g||"{}")?.timestamp||0)}catch{}if(typeof this.app.context._mgRMB890543<"u"&&(this.app.requestParams.rmb=1),this.app.adBlockStatement&&(this.app.requestParams.adb=1,typeof this.app.rtbDisabled<"u"&&(this.app.requestParams.rtb_disabled=this.app.rtbDisabled)),typeof this.app.context.MGi<"u"&&(this.app.requestParams.iso=this.app.context.MGi,this.app.requestParams.token="34c5abfc1ed4758d9abfaaf715a5b1f6"),this.app.sourceName!==""&&(this.app.requestParams.src_id=this.app.sourceName),typeof this.app.context["ampOptions1477799_"+this.app.uniqId]<"u")try{let g=JSON.parse(this.app.context["ampOptions1477799_"+this.app.uniqId]),A=typeof g.src_id<"u"?g.src_id:this.app.sourceName;this.app.requestParams.src_id=A}catch{}if(JSON.parse('["wages","int_exchange"]').indexOf("int_exchange")>=0){let g=this.app.context.document.querySelector('meta[property="og:title"]');if(this.app.context!==this.app.context.top)try{g=this.app.context.parent.document.querySelector('meta[property="og:title"]')}catch{}g&&(this.app.requestParams.ogtitle=encodeURIComponent(g.getAttribute("content")))}this.app.uniqId!==""&&(this.app.requestParams.uniqId=this.app.uniqId),this.app.getActiveChilds().length&&(this.app.requestParams.childs=this.app.getActiveChilds().join(",")),t&&(this.app.requestParams.rsh=t,this.app.requestParams.initial_composite=this.app.id,t===2&&this.app.getExceptAds().length&&(this.app.requestParams.except_ads=this.app.getExceptAds().join(","))),Array.isArray(this.app.context._mgExceptAds)&&this.app.context._mgExceptAds.length&&(this.app.requestParams.except_ads=this.app.context._mgExceptAds.join(",")),this.app.gptOptions?.backfill&&!this.app.adBlockStatement&&typeof this.app.context._mgGPT1477799>"u"?(this.app.context._mgGPT1477799=!0,this.app.requestParams.gpt=1):typeof this.app.requestParams.gpt<"u"&&delete this.app.requestParams.gpt,typeof this.app.context.MG_setRequestNonPersonalizedAds<"u"&&this.app.context.MG_setRequestNonPersonalizedAds==1&&(this.app.requestParams.npa=1),this.app.getInternalIds().length&&(this.app.requestParams.exclude_int_exchange=this.app.getInternalIds().join(","));try{let g=navigator.connection||navigator.mozConnection||navigator.webkitConnection;typeof g.type<"u"&&(this.app.networkInformationType=g.type,this.app.requestParams.nit=this.app.networkInformationType),typeof g.effectiveType<"u"&&(this.app.networkInformationEffectiveType=g.effectiveType,this.app.requestParams.niet=this.app.networkInformationEffectiveType),typeof g.saveData<"u"&&(this.app.networkInformationSaveData=g.saveData?1:0,this.app.requestParams.nisd=g.saveData)}catch{}this.app.requestParams.pv=5,this.app.requestParams.lct=this.getLct(1707440723),this.app.requestParams.jsv="es6",this.app.requestParams.pageView=this.app.pageView,this.app.requestParams.dpr=this.app.getDevicePixelRatio(),this.app.requestParams.ref=encodeURIComponent(this.app.refererParam),this.app.iframePlacementType!==0&&(this.app.requestParams.iframe=this.app.iframePlacementType),typeof this.app.context._mgBackfillCxurl<"u"&&(this.app.requestParams.cxurl=this.app.context._mgBackfillCxurl),typeof this.app.context._mgBackfillRef<"u"&&(this.app.requestParams.ref=this.app.context._mgBackfillRef);let a=this.app.getMuid();a.length&&(this.app.requestParams.muid=a);let s=this.app.getArticlePublishedTime();s.length&&(this.app.requestParams.apt=encodeURIComponent(s));let n=this.app.context?.performance.getEntriesByType?.("navigation")[0]?.responseEnd,l=this.app.context?.performance.now?.(),d=Math.round(l-n);typeof d=="number"&&!isNaN(d)&&(this.app.requestParams.tfre=d);let h=[];for(let g in this.app.requestParams)this.app.requestParams.hasOwnProperty(g)&&h.push(`${g}=${this.app.requestParams[g]}`);if(typeof this.app.globalSettings.retention_tool_widget_utm=="string"&&this.app.globalSettings.retention_tool_widget_utm.length&&!this.app.isAmp()){let g=this.app.globalSettings.retention_tool_widget_utm,P=(this.app.pageUrl||this.app.context.location.href||"").split("&").filter(E=>E.indexOf(g)!==-1).slice(0,1).join("");P=P.substring(P.indexOf(g)),P&&h.push(P)}let y=i.src;y.indexOf("?")==-1?y+="?":y+="&",y+=h.join("&"),i.src=y,this.app.sspPerformance&&typeof this.app.context.performance.getEntries<"u"&&(i.onload=()=>{this.app.context.performance.getEntries().map(g=>{if(g.name===y){let A=Math.ceil(g.responseEnd-g.startTime);this.app.request.pixel("widgetSspPerformance",this.app.webProtocol+"//c.mgid.com/widget-ssp-performance",{time:`time=${A}`},{})}})}),this.app.context.document.head.appendChild(i),i.onerror=()=>{this.app.isAdblock=!0}}getActiveChilds(){return JSON.parse("[1477812,1578448]")}addClickHandler(e,t){this.app.clickHandlers.push({handler:e,priority:t}),this.app.clickHandlers.sort(function(i,a){return i.priority<a.priority?-1:1})}widgetClickHandler(e){e||(e=this.app.context.event),e.target||(e.target=e.srcElement);let t=e.target;if(t.tagName!=="A"){t=this.app.getParentLink(t);let i=!1;if("which"in e?i=e.which===3:"button"in e&&(i=e.button===2),!t&&!i){let a=this.app.getParentElWithClass(e.target,"text-elements");if(a){let s=e.target.getElementsByTagName("A");s[0]?t=s[0]:(s=a.getElementsByTagName("A"),s[0]&&(t=s[0]))}if(t){t.click();return}}}if(t&&!(!t.hasAttribute("data-hash")&&!t.classList.contains("mg-close-action")))for(let i=0;i<this.app.clickHandlers.length;i++)try{if(!this[this.app.clickHandlers[i].handler](t,e))return}catch(a){this.app.log("Click Handler name: "+this.app.clickHandlers[i].handler+", error: ","error",a)}}start(){this.app.root&&this.app.countLoadBlocks==0&&this.app.injectScript(!1)}defaultComposite(e){}addEvent(e,t,i){e.addEventListener?(t==="touchstart"||t==="touchmove")&&this.app.isPassiveSupported()?e.addEventListener(t,i.bind(this),{passive:!0}):e.addEventListener(t,i.bind(this),!1):e.attachEvent("on"+t,i.bind(this))}removeEvent(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)}getMainCssSelector(){return"#"+(this.app.realRoot?this.app.realRoot.id:this.app.root.id)}doubleClickHandler(e,t){t=parseInt(t|0);let i=e.getAttribute("data-hash"),a={checkId:"checkId="+this.app.doubleClickCheckId,cid:"cid="+this.app.getWidgetValue("id",1477799),gb_uid:"gb_uid="+this.app.getWidgetValue("goodsPartUid",57809668),h2:"h2="+this.app.servicerData.h2,hash:"hash="+i,percent:"percent="+this.app.doubleClickPercent,type:"type="+this.app.doubleClickType,url:"url="+encodeURIComponent(e),uuid:"uuid="+this.app.servicerData.rid};t&&(a.isOut="isOut="+t),this.app.request.pixel("doubleclick",this.app.webProtocol+"//c.mgid.com/doubleclick",a,{})}adBlockDetect(){if(this.adblockDetectResult===null){let e={ABP_NOT_DETECTED:0,ABP_DETECTED:1},t=["banner_ad","sponsored_ad"],i=l=>{let d=this.app.context.document.createElement("div");return d.className=l,d.style.setProperty("display","block","important"),d.style.setProperty("padding","1px","important"),d.style.visibility="hidden",d.style.position="absolute",d.innerHTML=".",this.app.context.document.body.appendChild(d),d},a=l=>!l.offsetHeight,s=l=>{let d,h=l.length,y;for(d=0;d<h;d++){y=i(l[d]);let g=a(y);if(this.app.context.document.body.removeChild(y),g)return!0}return!1},n=l=>s(l)?e.ABP_DETECTED:e.ABP_NOT_DETECTED;this.adblockDetectResult=n(t)}return this.adblockDetectResult}isShadowRoot(){try{return typeof this.app.root.getRootNode<"u"&&this.app.root.getRootNode().host}catch{return!1}}canUseShadowDom(){let e=this.app.root.parentNode;return!!(e&&(e.id?.indexOf("ScriptRoot")>0||e.dataset?.type==="_mgwidget")&&typeof e.attachShadow=="function")}getRoot(){return this.app.isShadowRoot()?this.app.root.getRootNode().host:this.app.root.parentElement}generatePvid(){return new Date().getTime().toString(16)+(Math.round(Math.random()*1e9)+2147483648).toString(16)}getLct(e){return e-e%86400}isAmp(){return typeof this.app.context.context<"u"&&typeof this.app.context.context.data<"u"&&typeof this.app.context.context.data.widget<"u"?!0:typeof this.app.context.boundingClientRect1477799<"u"&&typeof this.app.context.intersectionRect1477799<"u"}isIframe(){try{return this.app.context.self!==this.app.context.top}catch{return!0}}startMgqwp(){typeof this.context._mgwqp<"u"?setTimeout(()=>{this.context._mgwqp()},0):setTimeout(()=>{this.startMgqwp()},50)}htmlEntities(e){return String(typeof e<"u"?e:"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}getRenderer(e){return e.indexOf("data-template-schema")===-1?this.app.renderClassicBlock:this.app.renderSchematicBlock}getViewrateParams(){let e=Object.keys(this.app.teaserData).filter(a=>this.app.teaserData[a].isViewed),t=e.length,i=e.map(a=>this.app.teaserData[a].page).filter((a,s,n)=>n.indexOf(a)===s).reduce((a,s)=>a+this.app.pagesServicerData.filter(n=>n.page===s)[0]?.teasersCount,0);return{views:t,renders:i}}}});function xa(r,e){async function t(...i){await Gi.acquireStorage(()=>{r.call(this,...i)}),typeof i[i.length-1]=="function"&&i[i.length-1]()}return t}var vi,qe,Sr,Gi,Rt,lw,Tt,wr=ae(()=>{w();_();k();C();D();I();(function(r){r.ping="ping",r.get="get",r.set="set",r.lock="lock",r.unlock="unlock"})(vi||(vi={}));(function(r){r.local="local",r.session="session",r.page="page"})(qe||(qe={}));Sr=class{constructor(){if(this.callbacks={},this.pingIntervalId=null,this.internalStore={},this.isCrossDomainStorageEnabled()){let e=document.createElement("iframe");e.src="https://cdn.mgid.com/widgets/storage.html",e.style.display="none",document.body.appendChild(e),this.frame=e.contentWindow,this.internalStore[qe.local]={},this.internalStore[qe.session]={},this.internalStore[qe.page]={},window.addEventListener("message",t=>{if(typeof t.data._mgstorage<"u"){let i=t.data._mgstorage;i.error&&console.error(i.error),this.callbacks[i.eventId](i)}})}else this.internalStore[qe.local]=localStorage,this.internalStore[qe.session]=sessionStorage,this.internalStore[qe.page]=window}async waitForFrame(){return this.isCrossDomainStorageEnabled()?new Promise(e=>{this.pingIntervalId=setInterval(()=>{let t=this.getEventId();this.callbacks[t]=()=>{clearInterval(this.pingIntervalId),e()},this.request({eventId:t,srcId:"widget",action:vi.ping})},100)}):Promise.resolve()}async get(e,t,i){return new Promise(a=>{let s=this.getEventId();this.callbacks[s]=n=>{a(n.data)},this.request({eventId:s,engine:t,srcId:"widget",action:vi.get,lockId:e,key:i})})}async set(e,t,i,a){return new Promise(s=>{let n=this.getEventId();this.callbacks[n]=()=>{s()},this.request({eventId:n,engine:t,srcId:"widget",action:vi.set,lockId:e,key:i,val:a})})}async lock(){return new Promise(e=>{let t=this.getEventId();this.callbacks[t]=i=>{e(i.data)},this.request({eventId:t,srcId:"widget",action:vi.lock})})}async unlock(e){return new Promise(t=>{let i=this.getEventId();this.callbacks[i]=a=>{t(a)},this.request({eventId:i,srcId:"widget",action:vi.unlock,lockId:e})})}async fetch(e){this.internalStore[qe.local]=JSON.parse(await this.get(e,qe.local,this.getStorageKey()))??{},this.internalStore[qe.session]=JSON.parse(await this.get(e,qe.session,this.getStorageKey()))??{},this.internalStore[qe.page]=JSON.parse(await this.get(e,qe.page,this.getStorageKey()))??{}}async flush(e){await this.set(e,qe.local,this.getStorageKey(),JSON.stringify(this.internalStore[qe.local])),await this.set(e,qe.session,this.getStorageKey(),JSON.stringify(this.internalStore[qe.session])),await this.set(e,qe.page,this.getStorageKey(),JSON.stringify(this.internalStore[qe.page])),this.internalStore[qe.local]={},this.internalStore[qe.session]={},this.internalStore[qe.page]={},await this.unlock(e)}getStorageKey(){return"storage890543"}isCrossDomainStorageEnabled(){return!1}engine(e){return{getItem:t=>{let i=this.internalStore[e][t]??null;return i==="undefined"&&(i=null),i},setItem:(t,i)=>{this.internalStore[e][t]=i},removeItem:t=>{delete this.internalStore[e][t]}}}async acquireStorage(e){try{if(this.isCrossDomainStorageEnabled()){let t=await this.lock();await this.fetch(t),e(),await this.flush(t)}else e()}catch(t){console.error(t)}}getEventId(){return("0000000000"+Math.round(Math.random()*1e10).toString(16)).slice(-10)}request(e){this.frame.postMessage({_mgstorage:e},"*")}},Gi=new Sr,Rt=Gi.engine(qe.local),lw=Gi.engine(qe.session),Tt=Gi.engine(qe.page)});var Jo={};me(Jo,{NavigatorAgentDataBlock:()=>_r});var Ui,_r,Ko=ae(()=>{w();_();k();C();D();I();ue();(function(r){r.architecture="scua",r.bitness="scub",r.brands="scu",r.fullVersionList="scufvl",r.mobile="scum",r.model="scumd",r.platform="scup",r.platformVersion="scupv",r.uaFullVersion="scufv",r.wow64="scuw"})(Ui||(Ui={}));_r=class extends J{constructor(e){super(e),this.name="NavigatorAgentDataBlock"}waitForUserAgentData(){return new Promise(e=>{this.app.context.navigator.userAgentData.getHighEntropyValues(Object.keys(Ui)).then(t=>{this.app.userAgentDataParams={},Object.keys(t).forEach(i=>{let a=t[i];if(typeof a=="boolean"&&(this.app.userAgentDataParams[Ui[i]]=`${encodeURIComponent(a?"?1":"?0")}`),typeof a=="string"&&a.length&&(this.app.userAgentDataParams[Ui[i]]=`${encodeURIComponent('"'+a+'"')}`),Array.isArray(a)&&a.length){let s=a.reduce((n,l,d,h)=>n+`"${l.brand}";v="${l.version}"${d!==h.length-1?", ":""}`,"");this.app.userAgentDataParams[Ui[i]]=`${encodeURIComponent(s)}`}}),e()}).catch(t=>{this.app.log(`${this.name}: waitForUserAgentData. Error: `,"error",t),e()})})}}});var Qo={};me(Qo,{AmpRenderBlock:()=>kr});var kr,Xo=ae(()=>{w();_();k();C();D();I();ue();kr=class extends J{constructor(e){super(e),this.name="AmpRenderBlock",this.ampResized=[],this.app.isAmp()&&(this.addHook("afterInitHooks",this._ampRenderStart),this.addHook("afterLoadNewsHooks",this._ampResizeHook),this.addHook("beforeInitBlockHooks",this._ampPageView,1e4),this.addHook("beforePrepareCappingDataHooks",this._ampPageImp,1e4))}_ampRenderStart(){this.app.context.context.renderStart({width:this.app.precalcRect.width,height:this.app.precalcRect.height})}_ampPageView(e){typeof this.app.context.context.computeInMasterFrame<"u"?this.app.context.context.computeInMasterFrame(this.app.context,"_mgPageViewAmp890543",t=>{let i=this.app.context.context.pageViewId,a=localStorage.getItem("_mgPageViewAmpId890543")?localStorage.getItem("_mgPageViewAmpId890543"):"";if(i===a){let s=this.app.getMostTopWindow();s._mgPageView890543=s._mgPageView890543||[],s._mgPageView890543.push(s.location.pathname),s._mgPageViewEndPoint890543=s._mgPageViewEndPoint890543||[],s._mgPageViewEndPoint890543.push(s.location.pathname),this.app.initServicerRequest=!1}localStorage.setItem("_mgPageViewAmpId890543",i),t()},()=>{}):e()}_ampPageImp(e){typeof this.app.context.context.computeInMasterFrame<"u"?this.app.context.context.computeInMasterFrame(this.app.context,"_mgPageImpAmp890543",t=>{let i=this.app.context.context.pageViewId,a=localStorage.getItem("_mgPageImpAmpId890543")?localStorage.getItem("_mgPageImpAmpId890543"):"";if(i===a){let s=this.app.getMostTopWindow();s._mgPageImp890543=s._mgPageImp890543||[],s._mgPageImp890543.push(s.location.pathname)}localStorage.setItem("_mgPageImpAmpId890543",i),t()},()=>{}):e()}_askAmpForResize(){let e=this.app.root.getBoundingClientRect();this.app.context.context.requestResize(e.width,e.height).then(()=>{this.ampResizeDenied=!1,this._updateSizeStatement(e.width,e.height)},()=>{this.ampResizeDenied=!0})}_ampResizeHook(){setTimeout(()=>{this._askAmpForResize()},100),typeof this.ampResizeInterval>"u"&&(this.ampResizeInterval=setInterval(()=>{let e=this.app.root.getBoundingClientRect();typeof this.ampResizeDenied<"u"&&this.ampResizeDenied?this._askAmpForResize():(Math.floor(e.width)!==this.ampResized.width||Math.floor(e.height)!==this.ampResized.height)&&this._askAmpForResize()},100))}_updateSizeStatement(e,t){this.ampResized.width=e,this.ampResized.height=t}}});var el={};me(el,{MgqBlock:()=>Cr});var Cr,tl=ae(()=>{w();_();k();C();D();I();ue();Cr=class extends J{constructor(e){super(e),this.name="MgqBlock",this.isLongCheck=!1,this._worker=this._createWorker(),this._init()}_init(){this.app.context._mgq=this.app.context._mgq||[],typeof this.app.context._mgqp>"u"&&(this.app.context._mgqp=this._worker,this.app.context._mgqt=new Date().getTime(),this._worker())}_createWorker(){return()=>{let e=this.app.context._mgq.length,t=this.app.context._mgq.slice(0),i=0;for(let a=0;a<e;a++){let s=t[a],n=this.app.context,l=s[0];if(s[0].indexOf(".")>0&&(n=n[s[0].split(".")[0]],l=s[0].split(".")[1]),typeof n[l]=="function"){try{n[l].apply(n,s.slice(1))}catch(d){this.app.log("mgq error:","error",d),this.app.debugBlock.sendData(`mgq error: ${d.message}`)}this.app.context._mgq.splice(a-i,1),i++}}this.app.context._mgqi||(this.app.context._mgqi=this.app.context.setInterval(()=>{this._worker()},5)),this.isLongCheck||new Date().getTime()-this.app.context._mgqt>1e4&&(this.isLongCheck=!0,this.app.context.clearInterval(this.app.context._mgqi),this.app.context._mgqi=this.app.context.setInterval(()=>{this._worker()},100))}}}});var il=re(Rs=>{"use strict";w();_();k();C();D();I();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.ConsentsBlock=void 0;var Mf=function(){function r(e,t,i){t===void 0&&(t=30),i===void 0&&(i=!1);var a;this.hasStorageConsentTCFv2=!1,this.app=e,this.consentTimeout=t,this.isWaitConsent=i,this.app.requestParams=this.app.requestParams||{},this.topWindow=this.app.getMostTopWindow(),this.actualizeStorageConsentTCFv2(),this.isWaitConsent&&!this.hasStorageConsentTCFv2&&(this.consentTimeout=Number((a=this.app.globalSettings)===null||a===void 0?void 0:a.widget_consent_wait_time_ms)||300,this.app.requestParams.nocmp=1)}return r.prototype.actualizeStorageConsentTCFv2=function(){var e,t=Number((e=this.app.globalSettings)===null||e===void 0?void 0:e.widget_consent_outdated_time)||168;try{if(this.app.context.localStorage&&!this.app.isOurIframe){var i=JSON.parse(this.app.context.localStorage.getItem("MG_tcfv2Data")||"{}");i?.timestamp&&new Date().getTime()-i.timestamp<t*60*60*1e3?this.hasStorageConsentTCFv2=!0:this.app.context.localStorage.removeItem("MG_tcfv2Data")}}catch{this.app.log("ConsentsAdapter - localStorage not found.")}},r.prototype.initTCFv2Proxy=function(){if(typeof this.app.context.__tcfapi=="function")return;this.isSearchingLocator=!0;for(var e=this.app.context,t,i={};e;){try{if(e.frames.__tcfapiLocator){t=e;break}}catch(s){this.app.log(s,"warn",s)}if(e===this.app.context.top)break;e=e.parent}if(this.isSearchingLocator=!1,!t)return;this.app.context.__tcfapi=function(s,n,l,d){var h=Math.random()+"",y={__tcfapiCall:{command:s,parameter:d,version:n,callId:h}};i[h]=l,t.postMessage(y,"*")};function a(s){var n={};try{n=typeof s.data=="string"?JSON.parse(s.data):s.data}catch(d){this.app.log(d,"warn",d)}var l=n?n.__tcfapiReturn:null;l&&typeof i[l.callId]=="function"&&i[l.callId](l.returnValue,l.success)}this.app.context.addEventListener("message",a.bind(this),!1)},r.prototype.tcfv2Api=function(e){var t=this,i=new Date().getTime(),a;return new Promise(function(s,n){var l=function(){t.app.tcfv2Enabled=!0,t.app.requestParams.tcfV2=1;try{var d=function(h,y){y&&(h.eventStatus==="tcloaded"||h.eventStatus==="useractioncomplete")?(t.app.tcfv2Data=h,t.app.context.localStorage&&(t.app.isOurIframe?t.app.context.localStorage.removeItem("MG_tcfv2Data"):(h.timestamp=new Date().getTime(),t.app.context.localStorage.setItem("MG_tcfv2Data",JSON.stringify(h)))),t.app.log("Consents. TCFv2 API done."),t.app.waitConsentResolver&&t.app.waitConsentResolver(),e&&setTimeout(function(){e()},0),s()):(y&&!h.gdprApplies&&(e&&setTimeout(function(){e()},0),s()),t.app.log("Consents. TCFv2 API paused."))};t.app.context.__tcfapi("addEventListener",2,d)}catch(h){t.app.log("Consents. TCFv2 API fail."),e&&setTimeout(function(){e()},0),n(h)}};t.initTCFv2Proxy(),typeof t.app.context.__tcfapi=="function"?l():a=setInterval(function(){if(new Date().getTime()-i>=t.consentTimeout*1e3){clearInterval(a),t.app.log("Consents. TCFv2 API not found. Limit time end."),e&&setTimeout(function(){e()},0),s();return}t.isSearchingLocator||t.initTCFv2Proxy(),typeof t.app.context.__tcfapi=="function"&&(clearInterval(a),l())},500)})},r.prototype.gdprApi=function(e){var t=this;return new Promise(function(i,a){if(typeof t.topWindow.__cmp=="function"){t.app.cmpEnabled=!0,t.app.requestParams.tcfV1=1;try{t.topWindow.__cmp("getConsentData",null,function(s){t.app.consentData=s,t.app.context.localStorage&&(t.app.isOurIframe?t.app.context.localStorage.removeItem("MG_ConsentData"):t.app.context.localStorage.setItem("MG_ConsentData",JSON.stringify(s))),t.app.log("Consents. TCFv1 API done."),e&&setTimeout(function(){e()},0),i()})}catch(s){e&&setTimeout(function(){e()},0),a(s)}}else e&&setTimeout(function(){e()},0),i()})},r.prototype.ccpaApi=function(e){var t=this;return new Promise(function(i,a){if(typeof t.topWindow.__uspapi=="function"){t.app.uspEnabled=!0;try{t.topWindow.__uspapi("getUSPData",1,function(s,n){n?(t.app.uspString=s.uspString||"",t.app.context.localStorage&&t.app.uspString!==""&&(t.app.isOurIframe?t.app.context.localStorage.removeItem("MG_uspString"):t.app.context.localStorage.setItem("MG_uspString",t.app.uspString)),t.app.log("Consents. CCPA API done.")):t.app.log("Consents. CCPA API fail."),e&&setTimeout(function(){e()},0),i()})}catch(s){e&&setTimeout(function(){e()},0),a(s)}}else e&&setTimeout(function(){e()},0),i()})},r.prototype.getGdprData=function(){var e,t,i,a,s=null;if((this.app.cmpEnabled||this.app.tcfv2Enabled||this.app.isAmp())&&(this.app.isAmp()&&this.app.context.context.initialConsentValue?s={gdpr_consent:this.app.context.context.initialConsentValue,gdpr:1}:!((e=this.app)===null||e===void 0)&&e.tcfv2Data&&typeof((t=this.app.tcfv2Data)===null||t===void 0?void 0:t.tcString)<"u"?(s={gdpr_consent:this.app.tcfv2Data.tcString,gdpr:typeof this.app.tcfv2Data.gdprApplies<"u"?+this.app.tcfv2Data.gdprApplies:""},this.app.consentOrigin="cmp"):!((i=this.app)===null||i===void 0)&&i.consentData&&typeof((a=this.app.consentData)===null||a===void 0?void 0:a.consentData)<"u"&&(s={gdpr_consent:this.app.consentData.consentData,gdpr:typeof this.app.consentData.gdprApplies<"u"?+this.app.consentData.gdprApplies:""})),s===null)try{if(this.app.context.localStorage&&!this.app.isOurIframe){var n=null;n=JSON.parse(this.app.context.localStorage.getItem("MG_ConsentData")||"null"),n!==null&&typeof n.consentData<"u"&&(s={gdpr_consent:n.consentData,gdpr:typeof n.gdprApplies<"u"?+n.gdprApplies:""}),n=JSON.parse(this.app.context.localStorage.getItem("MG_tcfv2Data")||"null"),n!==null&&typeof n.tcString<"u"&&(s={gdpr_consent:n.tcString,gdpr:typeof n.gdprApplies<"u"?+n.gdprApplies:""},this.app.consentOrigin="storage")}}catch(l){this.app.log("getGdprData -> "+l.message)}return s},r.prototype.getUspData=function(){var e=null;if(this.app.uspEnabled&&this.app.uspString!=""&&typeof this.app.uspString<"u")e={us_privacy:this.app.uspString};else try{if(this.app.context.localStorage&&!this.app.isOurIframe){var t=this.app.context.localStorage.getItem("MG_uspString");t!=null&&t!=""&&typeof t<"u"&&(e={us_privacy:t})}}catch(i){this.app.log("getUspData -> "+i.message)}return e},r.prototype.getConsentData=function(){var e={},t=this.getGdprData(),i=this.getUspData();return t!=null&&Object.keys(t).forEach(function(a){return e[a]=t[a]}),i!=null&&Object.keys(i).forEach(function(a){return e[a]=i[a]}),Object.keys(e).length>0?e:null},r.prototype.fetchConsents=function(){var e=this;return Promise.allSettled([this.tcfv2Api(),this.gdprApi(),this.ccpaApi()]).then(function(){return e.getConsentData()})},r}();Rs.ConsentsBlock=Mf});var sl={};me(sl,{ConsentsBlock:()=>Dr});var al,Dr,rl=ae(()=>{w();_();k();C();D();I();ue();al=_a(il()),Dr=class extends J{constructor(e){super(e),this.consentTimeout=30,this.name="ConsentsBlock",this.isWaitConsent=!1,this.consentsAdapter=new al.ConsentsBlock(e,this.consentTimeout,this.isWaitConsent),this.addHook("beforeInitHooks",this.consentsAdapter.tcfv2Api.bind(this.consentsAdapter),50),this.addHook("beforeInitHooks",this.consentsAdapter.gdprApi.bind(this.consentsAdapter),50),this.addHook("beforeInitHooks",this.consentsAdapter.ccpaApi.bind(this.consentsAdapter),50)}getConsentData(){let e=this.consentsAdapter.getConsentData();return(!e||!e.gdpr)&&typeof this.app.context._mgGdprApplies<"u"&&(e=e||{},e.gdpr=this.app.context._mgGdprApplies),(!e||!e.gdpr_consent)&&typeof this.app.context._mgConsentData<"u"&&(e=e||{},e.gdpr_consent=this.app.context._mgConsentData),e}waitConsent(e){let t=!1,i=()=>{t||(t=!0,typeof this.app.requestParams.nocmp<"u"&&delete this.app.requestParams.nocmp,this.app.injectScript(!1))};this.waitConsentResolve().then(()=>{this.app.log(`${this.name}: Wait consent resolve.`),i()}),setTimeout(()=>{this.app.log(`${this.name}: Wait consent limit time end.`),i()},e*1e3)}async waitConsentResolve(){return new Promise(e=>{this.app.waitConsentResolver=e})}}});var nl={};me(nl,{RequestBlock:()=>Ir});var Ir,ol=ae(()=>{w();_();k();C();D();I();ue();Ir=class extends J{pixel(e,t,i,a){this._send(e,t,i,a,(s,n)=>{this._imgRequest(s,n)})}beacon(e,t,i,a){this._send(e,t,i,a,(s,n,l)=>{if(typeof navigator.sendBeacon=="function")try{navigator.sendBeacon(n),this.app.log(`Request beacon ${s} started`)}catch(d){this.app.log(`Request beacon ${s} error: `,"error",d),this._imgRequest(s,n)}else this._imgRequest(s,n)})}beaconBlob(e,t,i,a){this._send(e,t,{},a,(s,n,l)=>{if(typeof navigator.sendBeacon=="function")try{navigator.sendBeacon(n,i),this.app.log(`Request beaconBlob ${s} started`)}catch(d){this.app.log(`Request beaconBlob ${s} error: `,"error",d),this._xhrRequest(s,n,"POST",i)}else this._xhrRequest(s,n,"POST",i)})}script(e,t,i,a){this._send(e,t,i,a,(s,n)=>{let l=this.app.context.document.createElement("SCRIPT");l.src=n,l.type="text/javascript",l.async=!0,a.charset&&(l.charset=a.charset),a.onerror&&(l.onerror=a.onerror),a.dest?(a.dest.appendChild(l),this.app.log(`Request script ${s} started`)):this.app.log(`Request script ${s} failed - options.dest is undefined!`,"warn")})}_prepareUrl(e,t){this.app.consentDataParams=this.app.consentsBlock.getConsentData(),this.app.consentDataParams&&e.indexOf("/vz")==-1&&Object.keys(this.app.consentDataParams).forEach(a=>{let s=this.app.consentDataParams[a];e.indexOf(a)===-1&&(t[a]=`${a}=${s}`)});let i=[];for(let a of Object.keys(t))(t[a][0]==="?"||t[a][0]==="&")&&(t[a]=t[a].substring(1)),i.push(t[a]);return i.length&&(e.slice(-1)!=="?"&&e.slice(-1)!=="&"&&(e+=e.indexOf("?")===-1?"?":"&"),e+=i.join("&")),e}_send(e,t,i,a,s){if(a.unique){if(this.app.context._mgRequests=this.app.context._mgRequests||{},this.app.context._mgRequests[e]){this.app.log(`Request ${e} stopped - already defined on page`,"warn");return}this.app.context._mgRequests[e]=!0}t=this._prepareUrl(t,i),s(e,t,a)}_imgRequest(e,t){let i=this.app.context.document.createElement("IMG");i.referrerPolicy="strict-origin-when-cross-origin",i.src=t,i.onerror=()=>this.app.log(`Request image ${e} load error`,"error"),this.app.log(`Request image ${e} started`)}_xhrRequest(e,t,i,a){let s=new XMLHttpRequest;s.open(i,t,!0),s.onerror=()=>this.app.log(`Request XHR ${e} load error`),s.send(a),this.app.log(`Request image ${e} started`)}}});var ll={};me(ll,{ContextBlock:()=>Pr});var Pr,cl=ae(()=>{w();_();k();C();D();I();ue();Pr=class extends J{constructor(e){super(e),this.topmostWindowAccessible=null,this.name="ContextBlock"}getTopmostWindowAccessible(){if(!this.topmostWindowAccessible)try{for(let e=this.app.context;e.document&&(this.topmostWindowAccessible=e,e!=e.top);e=e.parent);}catch{}return this.topmostWindowAccessible}parseUrl(e){let t=document.createElement("A");t.href=e;let i=t.search.replace(/^\?/,"").split("&"),a=[];for(let n of i)if(n!==""){let l=n.split("=");a.push({key:l[0],value:typeof l[1]<"u"?l[1]:""})}let s=t.pathname;return s===""&&(s="/"),s.charAt(0)!=="/"&&(s="/"+t.pathname),{protocol:t.protocol,host:t.host,pathname:s,search:t.search,hash:t.hash,parsedParams:a}}composeUrl(e){return e.protocol+"//"+e.host+e.pathname+e.search+e.hash}stripAmpParts(e){let t=e,i=this.parseUrl(e),a="cdn.ampproject.org";if(i.host.indexOf(a)>0&&i.host.indexOf(a)===i.host.length-a.length){let s=i.pathname.split("/");if(typeof s[1]<"u"&&(s[1]==="c"||s[1]==="v"||s[1]==="wp")){let n=!1;typeof s[2]<"u"&&s[2]==="s"&&(n=!0),t=(n?"https":"http")+"://";let l=0;for(let d of s)d!==""&&d!=="c"&&d!=="v"&&d!=="wp"&&d!=="s"&&(t+=(l++!==0?"/":"")+d);t+=i.search+i.hash}else(typeof s[1]>"u"||s[1]==="")&&(t=t.replace("."+a,"").replace("-","."))}return t}contextUriSanitize(e){if(e){e=this.stripAmpParts(e);let t=this.parseUrl(e);this.app.context._mgCanonicalUri=this.composeUrl(t)}return this.app.context._mgCanonicalUri}contextUriParse(){if(!this.app.context._mgCanonicalUri){this.app.context._mgCanonicalUri="";try{let e=this.getTopmostWindowAccessible(),t="",i=e.document.querySelector('meta[property="og:url"]');if(i&&i.getAttribute("content")&&i.getAttribute("content").indexOf("http")!==-1)t=i.getAttribute("content");else{let a=e.document.querySelector("link[rel='canonical']");a&&a.getAttribute("href")&&a.getAttribute("href").indexOf("http")!==-1&&(t=a.getAttribute("href"))}if(t===""){switch(this.app.iframePlacementType){case 0:t=this.app.pageUrl;break;case 1:t=this.app.pageUrl;break;case 2:t=this.app.refererUrl;break;case 3:try{t=this.app.context.context.canonicalUrl}catch{}t||(t=this.app.pageUrl!==""?this.app.pageUrl:this.app.refererUrl);break}this.contextUriSanitize(t)}else this.app.context._mgCanonicalUri=t}catch{}}return this.app.context._mgCanonicalUri}}});var pl={};me(pl,{PageViewPixelBlock:()=>Er});var Er,dl=ae(()=>{w();_();k();C();D();I();ue();Er=class extends J{constructor(e){super(e),this.name="PageViewPixelBlock",this.sendPageViewPixel()}sendPageViewPixel(){this.w=this.app.getMostTopWindow();let e=this.w.location.pathname;this.w._mgPageViewEndPoint890543=this.w._mgPageViewEndPoint890543||[];let t=this.w._mgPageViewEndPoint890543,i=Number(this.app.globalSettings?.ia_page_view_timeout)||180,a=0,s=0;try{this.app.context.localStorage&&(a=Number(this.app.context.localStorage.getItem("_mgPageViewEndPoint890543")),s=Number(this.app.context.localStorage.getItem("_mgPvidTime")),new Date().getTime()-s>i*1e3&&this.app.context.localStorage.setItem("_mgPvid",this.app.generatePvid()))}catch{}if(new Date().getTime()-a>i*1e3&&Array.isArray(t)&&t.indexOf(e)===-1){t.push(e);let n=this.getPageViewPixelParams(),l={};for(let d in n)l[d]=`${d}=${n[d]}`;this.app.initServicerRequest&&this.app.request.pixel("pageView",this.app.webProtocol+"//c.mgid.com/pv/",l,{})}this.app.initServicerRequest=!1}getPageDataParams(){let e={};this.setPageData(),this.setRefererData();try{if(!sessionStorage.MG_Session_lastUpdate||Number(sessionStorage.MG_Session_lastUpdate)+30*60*1e3<Date.now()){let t=this.app.refererUrl.match(/:\/\/([^\/:]+)/i);sessionStorage.MG_Session_pr=t&&t[1]?t[1]:"",sessionStorage.MG_Session_lu=this.app.pageUrl}sessionStorage.MG_Session_lastUpdate=Date.now(),sessionStorage&&sessionStorage.MG_Session_pr&&(e.pr=encodeURIComponent(sessionStorage.MG_Session_pr)),sessionStorage&&sessionStorage.MG_Session_lu&&(e.lu=encodeURIComponent(sessionStorage.MG_Session_lu))}catch{}return e.cbuster=this.app.getCbusterParameter(),e.pvid=this.app.pvid,this.app.context.isFBIA1477799?e.implVersion=14:this.app.isAmp()?e.implVersion=12:this.app.context._mgc&&this.app.getRoot().dataset.type==="_mgwidget"?e.implVersion=17:this.app.versionWidget&&(e.implVersion=this.app.versionWidget),e.cxurl=encodeURIComponent(this.app.contextBlock.contextUriParse()),e}setPageData(){this.app.pageView=0;let e=!1;try{e=!!this.app.context.isFBIA1477799&&!!this.app.context.localStorage}catch{}if(this.app.pvid||(this.app.pvid=this.app.generatePvid()),e){let t=this.app.context.localStorage.getItem("_mgPageView890543"),i=Number(this.app.globalSettings.ia_page_view_timeout)||180;(!t||new Date().getTime()-parseInt(t)>i*1e3)&&!this.app.initServicerRequest&&(this.app.context.localStorage.setItem("_mgPageView890543",new Date().getTime().toString()),this.app.pageView=1),this.app.initServicerRequest&&(this.app.context.localStorage.setItem("_mgPageViewEndPoint890543",new Date().getTime().toString()),this.app.context.localStorage.setItem("_mgPvidTime",new Date().getTime().toString()),this.app.pageView=1);let a=this.app.context.localStorage.getItem("_mgPvid");a&&(this.app.pvid=a)}else{let t=this.w.location.pathname;this.w._mgPageView890543=this.w._mgPageView890543||[];let i=this.w._mgPageView890543;this.w._mgPageViewEndPoint890543=this.w._mgPageViewEndPoint890543||[];let a=this.w._mgPageViewEndPoint890543;this.w._mgPvidList=this.w._mgPvidList||[];let s=this.w._mgPvidList;Array.isArray(i)&&i.indexOf(t)===-1&&!this.app.initServicerRequest&&(i.push(t),this.app.pageView=1),Array.isArray(a)&&a.indexOf(t)===-1&&this.app.initServicerRequest&&(a.push(t),this.app.pageView=1),typeof this.w._mgPvid<"u"&&(this.app.pvid=this.w._mgPvid),Array.isArray(s)&&s.indexOf(t)===-1&&(s.push(t),this.app.pvid=this.app.generatePvid(),this.w._mgPvid=this.app.pvid)}}setRefererData(){let e=this.app.isIframe(),t=!0,i=!1,a=this.app.context,s=this.app.context;if(e)for(;;){try{a.frameElement&&a.frameElement.src!=""&&(t=!1),a.document.body}catch{a=s,i=!0,t=!1;break}if(a==a.parent)break;s=a,a=a.parent}try{this.app.isAmp()?(this.app.iframePlacementType=3,this.app.pageUrl=typeof this.app.context.context.sourceUrl<"u"?this.app.context.context.sourceUrl:"",this.app.refererUrl=typeof this.app.context.context.referrer<"u"?this.app.context.context.referrer:"",this.app.pageUrl!=""?this.app.refererParam=this.app.pageUrl:this.app.refererParam=this.app.refererUrl):(this.app.pageUrl=a.document.location.href,this.app.refererUrl=a.document.referrer||"",this.app.refererParam=this.app.refererUrl,e&&!t&&(i?this.app.iframePlacementType=2:(this.app.refererParam=this.app.pageUrl,this.app.iframePlacementType=1)))}catch{this.app.iframePlacementType=2}}getPageViewPixelParams(){let e={...this.getPageDataParams(),site:890543,i:1};return this.app.userAgentDataParams&&(e={...e,...this.app.userAgentDataParams}),e}}});var hl={};me(hl,{UtilsBlock:()=>Ar});var Ar,ul=ae(()=>{w();_();k();C();D();I();ue();Ar=class extends J{constructor(e){super(e),this.isMobileResult=null,this.name="UtilsBlock"}getScroll(){let e=this.app.getMostTopWindow();return{top:e.document.body.scrollTop||e.document.documentElement.scrollTop||0,left:e.document.body.scrollLeft||e.document.documentElement.scrollLeft||0}}getViewportSize(){let e=this.app.getMostTopWindow();return{width:e.innerWidth||e.document.documentElement.clientWidth,height:e.innerHeight||e.document.documentElement.clientHeight}}getRect(e,t){let i=e.getBoundingClientRect(),a={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height?i.height:i.bottom-i.top,width:i.width?i.width:i.right-i.left};if(this.app.context.self!==this.app.context.top){let s=this.getFrame();if(s){let n=s.getBoundingClientRect();a.top+=n.top,a.bottom+=n.top,a.left+=n.left,a.right+=n.left}}if(t){let s=this.getScroll();a.top+=s.top,a.bottom+=s.top,a.left+=s.left,a.right+=s.left}return a}getFrame(){let e;try{let t;for(let i=this.app.context;i.frameElement;i=i.parent)t=i.frameElement;e=t}catch{e=null}return e}isMobile(){if(this.isMobileResult===null){let e=!1;(function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)})(navigator.userAgent||navigator.vendor||window.opera),this.isMobileResult=e}return this.isMobileResult}isTablet(){let e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)}generateHash(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}isChromeWebView(){let e=["WebView","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"],t=new RegExp("("+e.join("|")+")","ig");return!!navigator.userAgent.match(t)}isSupportES6(){try{return new Function("async (x = 0) => x; try {const x=window?.x;} catch {};"),!0}catch{return!1}}}});var ml={};me(ml,{MainBlock:()=>Lr});var Lr,fl=ae(()=>{w();_();k();C();D();I();ue();bt();Lr=class extends J{constructor(e){super(e),this.cappingRealShowTime=0,this.widgetRealShowTime=0,this.name="MainBlock",this.addHook("beforeInitHooks",()=>{this.app.addEvent(this.app.root,"mousemove",t=>{this.app.root.mouseX=t.pageX-this.app.root.offsetLeft,this.app.root.mouseY=t.pageY-this.app.root.offsetTop})}),this.setAppFunctions(),this.addHook("afterPrepareCappingDataHooks",()=>{this.cappingRealShowTime=this.app.getCurrentTimestamp()}),this.addHook("observerWidgetHooks",(t,i)=>{t&&i>=.01&&(this.widgetRealShowTime=this.app.getCurrentTimestamp())}),this.addHook("afterLoadNewsHooks",()=>{this.fixWrongExternalImages()}),this.addHook("afterPrepareCappingDataHooks",this.renderLazyBanners),this.addHook("afterLoadNewsHooks",this.setAltToImages),this.addHook("afterLoadNewsHooks",this.fixCustomBannerHeight),this.addHook("afterLoadNewsHooks",this.fixBackfillBannerHeight)}setAppFunctions(){this.app.extractClass=e=>{if(e&&typeof e.className<"u"){let t=e.className.replace(/\s/g,".").split(".")[0];if(t)return t.replace("1477799","")}return""},this.app.getCurrentTimestamp=()=>Math.floor(Date.now()/1e3),this.app.prepareNiceHref=(e,t,i)=>{let a,s=this.app.teaserData[e];if(s?.type!=de.Teaser)return;let n=s;if(s.coopType!=be.InternalExchange&&n.sdl==1){if(a=this.app.clickTracking,n.dl!="")a+=n.dl;else{let l=decodeURIComponent(n.source.replace(/[`|',:\/?;$%&\(\)^*!@\s]/g,"")).toLowerCase(),d=decodeURIComponent(n.title.replace(/[`|',:\/?;$%&\(\)^*!@]/g,"")).replace(/\s/g,"_");a+=this.app.webProtocol+"//"+(l?l+"/":"")+d}this.app.clickTracking&&a.indexOf(this.app.clickTracking)!==-1&&(a=this.app.clickTracking+encodeURIComponent(a.replace(this.app.clickTracking,"")))}else a=this.app.prepareHref(e,t,i);return a},this.app.prepareHref=(e,t,i)=>{let a=this.app.teaserData[e],s=this.app.getQueryParameterByName("dc"),n=this.getClickZone(),l="",d="";if(i&&this.app.context._mgExternalLinkChanger===1){let h=i.search;if(l=i.protocol+"//"+i.hostname+i.pathname,h!=""){h=h.replace("?","");let y=h.split("&");for(let g=0;g<y.length;g++){let A=y[g].split("=");A[0]!="k"&&A[0]!="dc"&&(l+=(g==0?"?":"&")+y[g])}}}else l=this.app.clickTracking+this.app.webProtocol,a?a.link&&(/^http[s]?:/.test(a.link)?l=this.app.clickTracking+a.link:a.coopType==be.InternalExchange?l=this.app.clickTracking+this.app.intExchangeProtocol+a.link:l=this.app.clickTracking+this.app.webProtocol+a.link):l="#";if(this.app.clickableDelay&&this.app.activateDelayBlock&&this.app.activateDelayBlock.isWagesLink(i)&&(d="dc=1"),d=s?"dc="+parseInt(s):d,d=n!==""&&d===""?"dc="+n:d,d!==""&&(l+=(l.indexOf("?")>=0?"&":"?")+d),this.app.transitParamsInit){let h=this.app.getQueryParameterByName("extclckid");h&&/[\&\?]extclckid\=/.test(l)===!1&&(l+=(l.indexOf("?")>=0?"&":"?")+"extclckid="+h)}if(this.app.antifraudBlock?.getAntifraudParams&&a&&a.coopType!=be.InternalExchange&&(l+=this.app.getAntifraudQueryParameter(l,t,i)),a&&a.coopType!=be.InternalExchange&&(this.cappingRealShowTime&&/[\&\?]crst\=/.test(l)===!1&&(l+=(l.indexOf("?")>=0?"&":"?")+"crst="+this.cappingRealShowTime),this.widgetRealShowTime&&/[\&\?]wrst\=/.test(l)===!1&&(l+=(l.indexOf("?")>=0?"&":"?")+"wrst="+this.widgetRealShowTime)),this.app.context.transitType&&/[\&\?]trt\=/.test(l)===!1&&(l+=(l.indexOf("?")>=0?"&":"?")+"trt="+this.app.context.transitType),this.app.clickTracking&&l.indexOf(this.app.clickTracking)!==-1&&(l=this.app.clickTracking+encodeURIComponent(l.replace(this.app.clickTracking,""))),i&&/[\&\?]wct\=/.test(l)===!1&&this.getParameterFromLink(i,"wct")&&(l+=(l.indexOf("?")===-1?"?":"&")+this.getParameterFromLink(i,"wct")),t?.type==="click"){let h=t.target,y="."+this.app.extractClass(h),g=h.tagName;if(g==="A"){let A=h.parentNode;g=A.tagName,y="."+this.app.extractClass(A)}(!a||a.coopType!==be.InternalExchange&&a.coopType!==be.DirectPublisherDemand)&&(l+=(l.indexOf("?")>=0?"&":"?")+"ce="+g+y)}if(a&&a.coopType!==be.InternalExchange&&a.coopType!==be.DirectPublisherDemand){let h=this.app.getMuid();h.length&&l.indexOf("muid")<0&&(l+=(l.indexOf("?")>=0?"&":"?")+"muid="+h)}return this.app.context.transitThrownParams&&this.app.context.transitThrownParams.forEach(h=>{let y=this.app.getQueryParameterByName(h);y&&y.length>0&&(l=this.replaceUrlParam(l,h,y))}),l},this.app.getAntifraudQueryParameter=(e,t,i)=>{let a=this.app.antifraudBlock.getAntifraudParams(t,i);if(a){let s=this.app.id;return(e.indexOf("?")>=0?"&":"?")+"k="+s+"f"+a}return""},this.app.getTranslation=e=>{let t=G;return e.search(/^\[\S*\]$/g)===0?t[e]?t[e]:"":e},this.app.getParentLink=e=>{for(;e&&e.tagName!=="BODY";){if(e.tagName=="A")return e;e=e.parentNode}return null},this.app.getParentElWithClass=(e,t)=>{try{for(;e&&e.tagName!=="BODY";){if(e.classList.contains(t))return e;e=e.parentNode}}catch{return null}return null},this.app.findClosest=(e,t)=>{let i;for(;e.parentNode;){i=e.parentNode.querySelectorAll(t);for(let a=0;a<i.length;a++)if(e.isEqualNode(i[a]))return i[a];e=e.parentNode}return null},this.app.htmlToElement=e=>{let t=document.createElement("div");return t.innerHTML=e,t.firstChild},this.app.htmlToElements=e=>{let t=this.app.context.document.createElement("div");return t.innerHTML=e,Array.prototype.slice.call(t.childNodes)},this.app.getInternalIds=()=>Object.keys(this.app.context._mgIntExchangeNews),this.app.getExceptAds=()=>{let e=Number(this.app.globalSettings?.except_ads_limit)||150;return this.app.exceptAdsList.length>e&&(this.app.exceptAdsList=this.app.exceptAdsList.slice(this.app.exceptAdsList.length-e)),this.app.exceptAdsList},this.app.tox64String=(e,t)=>{t=t||!1;let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="",s,n,l,d,h,y,g,A=0;for(;A<e.length;)s=e.charCodeAt(A++),n=e.charCodeAt(A++),l=e.charCodeAt(A++),d=s>>2,h=(s&3)<<4|n>>4,y=isNaN(n)?64:(n&15)<<2|l>>6,g=isNaN(l)?64:l&63,a+=i.charAt(d)+i.charAt(h)+i.charAt(y)+i.charAt(g);return t===!0&&(a=a.replace("+","-").replace("/","_").replace("=","*")),a},this.app.hangNiceLinkListener=(e,t)=>{if(this.app.loadedDefault)return;let i=e.getAttribute("data-hash");return this.app.teaserData[i].type==de.Teaser&&this.app.teaserData[i].sdl&&(this.app.teaserData[i].sdl=0),e[this.app.hrefAttr]=this.app.prepareHref(i,t,e),!0},this.app.eventsHangNiceLinkListener=e=>{e||(e=this.app.context.event);let t=e.target||e.srcElement;t.tagName!="A"&&(t=this.app.getParentLink(t),t===null)||t.hasAttribute("data-hash")&&this.app.hangNiceLinkListener(t,e)},this.app.isHiddenElement=e=>{for(;e.tagName!=="BODY";){if(e.style.position!=="fixed"&&e.offsetParent||e.style.visibility==="hidden"||e.style.display==="none")return!0;e=e.parentNode}return!1},this.app.random=(e,t)=>Math.floor(e+Math.random()*(t-e+1)),this.app.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0,this.app.getExpectedCountNews=()=>{let e=9,t=JSON.parse("[]");if(this.app.utils.isMobile()&&typeof t.mobile<"u"&&(e=t.mobile),this.app.adBlockDetect()){for(let i in this.app.childWidgetsData)if(this.app.childWidgetsData.hasOwnProperty(i)&&this.app.childWidgetsData[i].isAdblockChild){e=this.app.childWidgetsData[i].childCountNews;break}}return e},this.app.isPassiveSupported=()=>{if(typeof this.app.passiveIsSupported<"u")return this.app.passiveIsSupported;this.app.passiveIsSupported=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){this.app.passiveIsSupported=!0}}))}catch{}return this.app.passiveIsSupported},this.app.getWidgetValue=(e,t)=>{let i=JSON.parse('{"1477812":{"id":1477812,"desktopDoubleclickDelay":0,"doubleclickParameters":null,"mobileDoubleclickDelay":0,"goodsPartUid":57809679,"newsPartUid":0,"widgetReturnedRefresh":0,"useRefreshNews":0,"elastic":0,"refreshAdsTime":45,"refreshAdsBy":0,"gptOptions":"{}"},"1578448":{"id":1578448,"desktopDoubleclickDelay":0,"doubleclickParameters":null,"mobileDoubleclickDelay":0,"goodsPartUid":57909832,"newsPartUid":0,"widgetReturnedRefresh":0,"useRefreshNews":0,"elastic":0,"refreshAdsTime":45,"refreshAdsBy":0,"gptOptions":"{}"}}');return this.app.originalId!==this.app.id&&typeof i[this.app.id]?.[e]<"u"?i[this.app.id][e]:t},this.app.isEnabledDoubleClick=()=>typeof this.app.servicerData.dcb<"u"}fixWrongExternalImages(){let e=this.app.root.getElementsByClassName("mg-wrong-image");if(e.length>0&&this.app.debugBlock.sendData("Wrong external images count: "+e.length),e.length)for(let t=0;t<e.length;t++){let i=e[t],a=i.src;i.src=this.app.blankImage,setTimeout(()=>{let s=i.getBoundingClientRect();i.classList.add("mg-wrongImage"+t),i.src=a,this.app.stylesheetsBlock.add("wrongImage"+t,".mg-wrongImage"+t+" { width: "+s.width+`px !important;
height: `+s.height+`px !important;
object-fit: cover;
-o-object-fit: cover;
object-position: top;
-o-object-position: top;
 }`),this.app.debugBlock.sendData("fixWrongExternalImages. "+JSON.stringify(s))},50)}}fixHeaderWidgetHeight(){let t=this.app.context.document.getElementById("M890543ScriptRootC1477799");t||(t=this.app.getRoot()),t&&t.setAttribute("style","min-height:auto !important;")}getClickZone(){let e=JSON.parse("[]");if(e.length===0||!e.top||!e.left||!e.right||!e.bottom)return"";let t=this.app.root.offsetHeight,i=this.app.root.offsetWidth,a=this.app.root.mouseX,s=this.app.root.mouseY,n={top:t/100*e.top,left:i/100*e.left,right:i-i/100*e.right,bottom:t/100*e.bottom},l=s<=n.top?0:s>=n.bottom?2:1,d=a<=n.left?0:a>=n.right?2:1;return[[2,3,4],[5,"",6],[7,8,9]][l][d]}getParameterFromLink(e,t){let i=e?.search;if(i==="")return null;let a=i.replace("?","").split("&");for(let s=0;s<a.length;s++)if(a[s].split("=")[0]===t)return a[s];return null}replaceUrlParam(e,t,i){let a=new RegExp("\\b("+t+"=).*?(&|#|$)");return i===null?e:e.search(a)>=0?e.replace(a,"$1"+i+"$2"):(e=e.replace(/[?#]$/,""),e+(e.indexOf("?")>0?"&":"?")+t+"="+i)}renderLazyBanners(e){this.app.root&&this.app.teaserData[e].type==="banner"&&this.app.renderBanners(!1,this.app.teaserData[e].iteration)}fixBackfillBannerHeight(){if(typeof this.app.context._mgIsBackfillBanner<"u"){let e=this.app.root.querySelector(".mcdomain");typeof this.app.context._mgBackfillStyles<"u",e.style.display="block",this.sendBannerHeight("_mgIsBackfillBanner")}}setAltToImages(){if(this.app.root){let e=this.app.root.getElementsByTagName("img");for(let t=0;t<e.length;t++)e[t].getAttribute("alt")===null&&e[t].setAttribute("alt","")}}fixCustomBannerHeight(){typeof this.app.context._mgIsCustomBanner<"u"&&this.sendBannerHeight("_mgIsCustomBanner")}sendBannerHeight(e){try{this.app.root.style.width="100%",this.app.root.style.height="auto";let t=this.app.root.querySelectorAll("video.mcvideo");if(t.length){let i='width="492" height="277"'.split(" ").reduce((a,s,n,l)=>{let d=Number(s.split("=")[1].replace(/"/g,""));return n===0?a+d:a/d},0);for(let a=0;a<t.length;a++){let s=t[a],n=Math.ceil(s.getBoundingClientRect()?.width),l=Math.ceil(n/i);s.style.setProperty("height",`${l}px`,"important")}}setTimeout(()=>{let i=Math.ceil(this.app.root.getBoundingClientRect()?.height);if(i>0){let a={bannerType:e,height:i,id:this.app.context.frameElement.id};this.app.context.parent.postMessage(a,"*")}},0)}catch{}}}});var gl={};me(gl,{ResponseParserBlock:()=>Br});var Br,yl=ae(()=>{w();_();k();C();D();I();ue();bt();Br=class extends J{getParsedTeaserData(e,t){let i={source:this.app.htmlEntities(e[0]),id:this.app.htmlEntities(e[1]),title:e[3]?this.app.prepareTitle(e[3]):"",desc:e[4]?this.app.prepareDesc(e[4]):"",mirror:"adfnetwork",key:e[6],price:e[7]?this.app.htmlEntities(e[7]).replace(",00","").replace(new RegExp("[^0-9,]"),""):"",priceold:e[8]?this.app.htmlEntities(e[8]).replace(",00","").replace(new RegExp("[^0-9,]"),""):"",discount:"",other:e[10]?e[10]:{},hash:e[9]},a=(1-parseFloat(i.price)/parseFloat(i.priceold))*100;return a<=1||a>100?(i.priceold="",i.discount=""):i.discount=a?`${Math.floor(a)}%`:"",i.other.i=i.other.i?this.app.htmlEntities(i.other.i):this.app.blankImage,this.app.deviceType!=Si.Desktop&&(i.other.sdl=0),{type:de.Teaser,hash:i.hash,id:i.id,source:i.source,title:i.title,desc:i.desc,price:i.price,priceold:i.priceold,discount:i.discount,category:i.other.category,catId:i.other?.catId||null,cta:i.other.cta??"",cdt:i.other.cdt??"",img:i.other.i,link:i.other.l??"",mirror:i.mirror,extd:i.other.extd,coopType:i.other.type??null,mediaType:i.other["media-type"],sdl:i.other.sdl,dl:i.other.dl,clicktrackers:i.other.clicktrackers??[],imp:i.other.imp??[],impt:i.other.impt??[],jst:i.other.jst??[],iteration:t,page:this.app.pagesServicerData.length,cdomain:i.other.cdomain||null,ccid:i.other.ccid||null,ch:i.other.ch||null,isViewed:!1}}getParsedBannerData(e,t){let a="mgBanner_1477799_"+this.app.pagesServicerData.length+"_"+t;return{type:de.Banner,id:a,hash:e.h,coopType:be.Wages,imp:e.imp??[],page:this.app.pagesServicerData.length,iteration:t,impt:e.impt??[],jst:e.jst??[],html:e.html,width:e.width??0,height:e.height??0,rs:e.rs??!1,useSecureIframe:!1,clickUrl:e.clickUrl,isViewed:!1}}getCustomBannerData(e,t){this.app.consentDataParams&&(typeof this.app.consentDataParams.gdpr<"u"&&typeof this.app.consentDataParams.gdpr_consent<"u"&&(e=e.replace(/\${GDPR}/g,String(this.app.consentDataParams.gdpr)).replace(/\${GDPR_CONSENT}/g,this.app.consentDataParams.gdpr_consent)),typeof this.app.consentDataParams.us_privacy<"u"&&(e=e.replace(/\${CCPA}/g,this.app.consentDataParams.us_privacy)));let i="mgBanner_1477799_"+this.app.pagesServicerData.length+"_"+t;return{type:de.Banner,hash:"",coopType:be.Wages,imp:[],page:this.app.pagesServicerData.length,iteration:t,impt:[],jst:[],html:e,id:i,width:0,height:0,rs:!1,useSecureIframe:!0,clickUrl:"",isViewed:!1,isCustomBanner:!0}}getParsedGptData(e,t){let i="mgGpt_1477799_"+this.app.pagesServicerData.length+"_"+t,a=Object.keys(this.app.preRenderTeaserSizes).filter(s=>this.app.preRenderTeaserSizes[s].position===t).map(s=>this.app.preRenderTeaserSizes[s])[0];return{id:i,type:de.Gpt,hash:"",coopType:be.Wages,page:this.app.pagesServicerData.length,iteration:t,imp:[],impt:[],jst:[],width:a?.width||0,height:a?.height||0,afrd:this.app.servicerData.afrd||0,divId:this.app.gptOptions.divId,slot:this.app.gptOptions.slot,lazy:this.app.gptOptions?.lazy||null,backfill:this.app.gptOptions?.backfill||null,isRendered:!1,isViewed:!1,slotPrice:e?.price||this.app.gptOptions?.price||null}}getAdUnitsFromJson(e){let t=[];return Array.isArray(e)&&e.forEach((i,a)=>{let s=a+1;if("gpt"in i){let n=this.getParsedGptData(i,s);t.push(n)}else if("html"in i){let n=this.getParsedBannerData(i,s);t.push(n)}else if(this.app.customBanners[this.app.id]?.[s]?.length>0){let n=this.getCustomBannerData(this.app.customBanners[this.app.id][s],s);t.push(n)}else{let n=this.getParsedTeaserData(i,s);t.push(n)}}),t}fillAdUnitsData(e){e.forEach(t=>{switch(t.type){case de.Teaser:this.fillTeaserData(t);break;case de.Banner:this.fillBannerData(t);break;case de.Gpt:this.fillGptData(t);break}})}fillTeaserData(e){this.app.teaserData[e.hash]=e,e.coopType==be.InternalExchange&&(this.app.context._mgIntExchangeNews[e.id]=1),e.coopType==be.Wages&&e.extd!==1&&this.app.exceptAdsList.indexOf(e.id)===-1&&this.app.exceptAdsList.push(e.id)}fillBannerData(e){this.app.teaserData[e.hash||e.id]=e,this.app.banners[e.id]=e}fillGptData(e){this.app.teaserData[e.id]=e}}});var vl={};me(vl,{CookieBlock:()=>Or});var Or,bl=ae(()=>{w();_();k();C();D();I();ue();Or=class extends J{constructor(e){super(e),this.app=e,this.cookieStorage={},this.sharedCookieStorage={},this.storageName="MgidStorage"+(this.app.context.MarketGidPageOffset?this.app.context.MarketGidPageOffset:"")}getCookieValue(){{let e=this.app.context.document.cookie.match(new RegExp("(?:^|; )"+this.storageName+"=([^;]*)")),t={};if(e)try{t=JSON.parse(decodeURIComponent(e[1]))}catch{}return t}}getCookie(){let e=this.getCookieValue();typeof e.C1477799<"u"?this.cookieStorage=e.C1477799:this.cookieStorage={},typeof e[0]<"u"?this.sharedCookieStorage=e[0]:this.sharedCookieStorage={}}setCookie(){{let e=this.getCookieValue();e.C1477799=this.cookieStorage,e[0]=this.sharedCookieStorage;let t=encodeURIComponent(JSON.stringify(e));this.app.context.document.cookie=this.storageName+"="+t+";path=/"}}}});var xl={};me(xl,{StylesheetsBlock:()=>Mr});var Mr,Tl=ae(()=>{w();_();k();C();D();I();ue();Mr=class extends J{constructor(e){super(e),this.name="StylesheetsBlock",this._isIE=typeof Proxy>"u",this._stylesDom={},this._isIE||(this._stylesDom=new Proxy(this._stylesDom,{set:(t,i,a)=>{let s=a.container,n=a.style;return t[i]&&delete this._stylesDom[i],this._inject(n,i,s),t[i]=a,!0},has:(t,i)=>this.app.root.querySelector("style#"+i)===null&&typeof t[i]<"u"?!1:typeof t[i]<"u",deleteProperty:(t,i)=>(this._removeFromDom(i),delete t[i],!0)}))}add(e,t,i=null){e+="_"+this.app.uniqId,!(!this._isIE&&typeof i>"u"&&e in this._stylesDom)&&(t=t.replace(/((@media|@supports not) \([^(]*\) {)/g,"$1}"),t=t.replace(/((?:^|}|,|;)\W*)((?:\w+)?\.(?:mc|mg|row)[\-\w]+)/g,"$1"+this.app.getMainCssSelector()+" $2"),t=t.replace(/(((@media|@supports not) \([^(]*\) \{)\})/g,"$2"),t=t.replace(/video-cdn\.(.+)\/mgPlayer/g,this.app.currentSubnetDomain),t!==""&&(this._isIE?(this._removeFromDom(e),this._inject(t,e,i)):this._stylesDom[e]={style:t,container:i}))}remove(e){e+="_"+this.app.uniqId,!this._isIE&&e in this._stylesDom?delete this._stylesDom[e]:this._removeFromDom(e)}_removeFromDom(e){let t=this.app.root.querySelector("#"+e);t&&t.parentNode.removeChild(t)}_inject(e,t,i){if(i){let a=i;if(a.className="MarketGidC1477799",a.styleSheet)a.styleSheet.cssText=e;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(this.app.context.document.createTextNode(e))}}else{let a=this.app.context.document.createElement("style");a.setAttribute("id",t),a.className="MarketGidC1477799",a.type="text/css",(typeof this.app.realRoot<"u"?this.app.realRoot:this.app.root).appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(this.app.context.document.createTextNode(e))}}}});var Sl={};me(Sl,{SendDimensionsBlock:()=>Rr});var Rr,wl=ae(()=>{w();_();k();C();D();I();ue();bt();Rr=class extends J{constructor(e){super(e),this.childMarginFixPixels=1,this.loremData={title:"Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum",domain:"Lorem ipsum dolor",description:"Lorem ipsum dolor sit amet Lorem ipsum"},this.name="SendDimensionsBlock",this.app.precalcRect={},this.isAdblock=!!this.app.adBlockDetect(),this.setAppFunctions()}setAppFunctions(){this.app.calcPreRenderingBlock=()=>{let e=this.app.root.getElementsByClassName("mgline");if(this.isAdblock)if(this.app.utils.isMobile()){for(let E=e.length;E>1;E--){let T=e[E-1];if(this.app.root.getBoundingClientRect().height>this.app.context.screen.height&&T&&T.parentNode)T.parentNode.removeChild(T);else break}e=this.app.root.getElementsByClassName("mgline"),this.app.requestParams.limitads=e.length}else{let E="",T=0;for(let L in this.app.childWidgetsData)if(this.app.childWidgetsData.hasOwnProperty(L)&&this.app.childWidgetsData[L].isAdblockChild){E=this.app.childWidgetsData[L].childSubtype;break}E==="under-article-widget-adblock"||E==="in-article-adblock"?T=25:E==="header-widget-adblock"&&(T=15),E&&T&&E.indexOf("adblock")!==-1&&this.addHook("afterLoadNewsHooks",()=>{this.changeWidgetWidth(this.app.root.querySelector(".mgbox"),T)})}typeof this.app.iframeSizeChangerBlock?.initIframeSizeChange=="function"&&this.app.iframeSizeChangerBlock.initIframeSizeChange();let t=this.app.root.getBoundingClientRect(),i=this.app.root.querySelector(".mgbox")?.getBoundingClientRect();if(this.app.precalcRect.width=Math.ceil(t.width?t.width:t.right-t.left),this.app.precalcRect.height=Math.ceil(t.height?t.height:t.bottom-t.top)-this.childMarginFixPixels,this.app.precalcRect.top=t.top,this.app.precalcRect.bottom=t.bottom,this.app.requestParams.w=this.app.precalcRect.width,this.app.requestParams.h=this.app.precalcRect.height,typeof this.app.context._mgIsCustomBanner<"u")try{let E={bannerType:"_mgIsCustomBanner",height:this.app.precalcRect.height,id:this.app.context.frameElement.id};this.app.context.parent.postMessage(E,"*")}catch{}let a=0,s="3".split(",").map(Number)||[],l=(this.app.templateText.indexOf("$banner")!==-1||this.app.templateText.indexOf('data-template-schema="banner"')!==-1)&&!this.isAdblock,d=300,h=250,y=220,g=this.app.utils.isMobile()?280:h;for(let E=0;E<e.length;E++){let T=E+1,L=e[E].getBoundingClientRect(),W=Math.ceil(e[E]?.clientHeight||(L.height?L.height:L.bottom-L.top)),S=Math.ceil(e[E]?.clientWidth||(L.width?L.width:L.right-L.left)),M=e[E].querySelector("img.mcimg"),R=s.indexOf(T)!==-1;if(M){let K=M.getBoundingClientRect();if(K.height===0||K.width===0){let $="#preRenderingBlock1477799_"+this.app.uniqId;if(this.app.realRoot.querySelector($)!==null){let te=this.app.realRoot.querySelector($);te.style.clear="both",K=M.getBoundingClientRect()}}(K.height===0||K.width===0)&&(this.app.requestParams.wrongImageSize=1),this.app.preRenderImageSizes[T-1]={height:K.height,width:K.width}}if((l||R)&&S>=d&&W>=y&&W<g){let K=!1;e[T-1].innerHTML=`<div style="min-width: ${d}px; min-height: ${g}px;"></div>`;let $=e[T-1].getBoundingClientRect(),te=this.app.root.getBoundingClientRect();if($.width>=d&&$.height>=g){K=!0;let X=this.app.root.parentNode;for(;X&&typeof X.tagName<"u"&&X.tagName!=="BODY";){let ce=X.getBoundingClientRect();if(ce.width<te.width||ce.height<te.height){K=!1;break}else X=X.parentNode}}K&&(W=g)}this.app.preRenderTeaserSizes[T-1]={height:W,width:S,position:T,top:Math.floor(L.top)},typeof this.app.prepTop<"u"&&this.app.prepTop<L.top&&a===0&&(a=E),this.app.prepTop=L.top}if(l){let E=Object.keys(this.app.preRenderTeaserSizes).map(S=>this.app.preRenderTeaserSizes[S]);E.every(S=>S.height>=h&&S.width>=d)&&(this.app.requestParams.ident_p=!0);let T=E.reduce((S,M)=>{let R=`${M.width}x${M.height}`,K=S[R]||[];return{...S,[R]:[...K,M.position]}},{});this.app.requestParams.sz=Object.keys(T).join(";"),this.app.requestParams.szp=Object.keys(T).map(S=>T[S]).join(";");let L=E[0].top,W=E.reduce((S,M)=>{let R=M.top+(L<0?-L:0),K=S[R]||[];return{...S,[R]:[...K,M.position]}},{});this.app.requestParams.szl=Object.keys(W).map(S=>W[S]).join(";")}a===0&&(a=e.length),this.app.requestParams.cols=a,this.app.root=this.app.realRoot;let A="preRenderingBlock1477799_"+this.app.uniqId,P=this.app.root;this.app.root.parentNode.id===A&&this.app.root.parentNode.parentNode!=null&&(P=this.app.root.parentNode.parentNode),P.querySelector("#"+A)!==null&&P.removeChild(P.querySelector("#"+A)),this.app.root.style.overflow="visible",this.app.root.style.visibility="visible",Math.ceil(i?.width)>this.app.precalcRect.width,this.app.root.style.width=this.app.precalcRect.width+"px",this.app.root.style.height=this.app.precalcRect.height+"px",this.addHook("afterLoadNewsHooks",()=>{this.app.root.style.width="auto",this.app.root.style.height="auto"}),this.app.loadedType="",this.app.currentSubnet=null,this.app.countLoadBlocks=this.app.countLoadBlocksContainer,this.app.template="",delete this.app.teaserData[""]},this.app.preparePrerenderData=e=>{let t=this.app.context.document.createElement("div"),i=this.app.context.document.createElement("div"),a=e||this.app.getExpectedCountNews(),s=[];t.id="preRenderingBlock1477799_"+this.app.uniqId,t.style.visibility="hidden",i.id=this.app.root.id,i.style.padding=`${this.childMarginFixPixels}px 0 0 0`,i.style.margin=`-${this.childMarginFixPixels}px auto 0 auto`,t.appendChild(i),this.app.loadedType="goods",this.app.currentSubnet=0,this.app.realRoot=this.app.root,this.app.countLoadBlocksContainer=this.app.countLoadBlocks,this.app.root.appendChild(t),this.app.root=i;for(let n=1;n<=a;n++)s.push({type:de.Teaser,coopType:be.Wages,hash:"",id:n.toString(),source:this.loremData.domain,title:this.loremData.title,desc:this.loremData.description,img:this.app.blankImage,price:"",priceold:"",discount:"",iteration:n,imp:[],impt:[],clicktrackers:[],jst:[],category:"",catId:null,cdt:"",cta:"",dl:"",extd:0,link:"",mediaType:"",mirror:"",page:1,sdl:0});return this.app.teaserData[""]=s[0],s}}changeWidgetWidth(e,t){let a=e.offsetWidth,s=e.offsetHeight,n=a*s,l=this.app.context.innerWidth*this.app.context.innerHeight;if(n/l*100>t&&a>500){let h=l*t/100,y=n-h,g=a-a*(y/n/2),A=g>=500?Math.floor(g):500;e.style.maxWidth=A+"px"}}}});var _l={};me(_l,{VersionControlBlock:()=>Wr});var Wr,kl=ae(()=>{w();_();k();C();D();I();ue();Wr=class extends J{constructor(e){super(e),this.initConsoleInfo()}initConsoleInfo(){{let e=U,t=Object.keys(e);if(t.length>0){let i=`%c Branch: vid-4769 error (main branch used)  \u2192  WIDGET: 1477799_${this.app.uniqId}  `;for(let a=0;a<t.length;a++)i+="\u2192  "+t[a]+": "+e[t[a]]+"  ";i+="\u2192  VIDEO_LIB: 1.11.203  ",console.info(i,"color: gold; font: 1rem/1 Tahoma; background: #1d1d1d; padding: 10px;")}}}}});var Cl={};me(Cl,{InternalExchangeBlock:()=>Nr});var Nr,Dl=ae(()=>{w();_();k();C();D();I();ue();Nr=class extends J{constructor(e){super(e),this.name="InternalExchangeBlock",this.addHook("afterLoadNewsHooks",this.initIntExchangeLabels)}initIntExchangeLabels(){if(this.app.enabledCooperationTypes.indexOf("int_exchange")===-1&&[3,2].indexOf(this.app.currentSubnet)===-1)return;let i=this.getComments(this.app.root),a=this.app.root.getElementsByClassName("type-w");if(!(this.app.currentSubnet===3&&this.app.enabledCooperationTypes.indexOf("wages")!==-1&&this.app.enabledCooperationTypes.length===1&&a.length===i.length))for(let s=0;s<i.length;s++){let n=i[s],l=this.app.findClosest(n,".mgline");if(!l||l.className.indexOf("type-w")===-1)continue;let d=this.app.context.document.createElement("IMG");d.setAttribute("height","20"),d.setAttribute("width","20"),d.setAttribute("alt",""),n.data==="intExchangeWagesImagePlace"&&(d.className="mcimgad",d.src=this.app.webProtocol+"//cdn.mgid.com/images/mgid/int_exchange_wages_ad.svg");let h=l.querySelector("a"),y=h["data-hash"]||h.getAttribute("data-hash");y&&this.app.teaserData[y]&&this.app.teaserData[y].source&&n.data==="intExhangeWagesSourcePlace"&&(d.className="mcimgsrc",d.src=this.app.webProtocol+"//cdn.mgid.com/images/mgid/int_exchange_wages_src.svg"),d.src&&n.parentNode.replaceChild(d,n)}}getComments(e){let t=[],i=[e];for(;i.length>0;){let a=i.pop();for(let s=0;s<a.childNodes.length;s++){let n=a.childNodes[s];n.nodeType===Node.COMMENT_NODE?t.push(n):i.push(n)}}return t}}});var Il={};me(Il,{InternalExchangeLoggerBlock:()=>Hr});var Hr,Pl=ae(()=>{w();_();k();C();D();I();ue();bt();Hr=class extends J{constructor(e){super(e),this.name="InternalExchangeLoggerBlock",this.app.internalExchangeLoggerHandler=this.clickHandler.bind(this),this.addHook("afterLoadNewsHooks",this.init)}init(){this.app.addClickHandler(this.app.clickHandlerList.internalExchangeLogger.handler,this.app.clickHandlerList.internalExchangeLogger.priority)}clickHandler(e){let t=e.getAttribute("data-hash");if(this.app.teaserData[t]&&this.app.teaserData[t].coopType==be.InternalExchange){let i={};i.cid=`cid=${this.app.id}`,i.tid=`tid=${this.app.teaserData[t].id}`,i.h=`h=${t}`,typeof this.app.servicerData.isBot<"u"&&(i.bot=`bot=${this.app.servicerData.isBot}`),typeof this.app.servicerData.tt<"u"&&(i.tt=`tt=${this.app.servicerData.tt}`),typeof this.app.servicerData.ts<"u"&&(i.ts=`ts=${this.app.servicerData.ts}`),typeof this.app.servicerData.psid<"u"&&(i.psid=`psid=${this.app.servicerData.psid}`),typeof this.app.servicerData.dt<"u"&&(i.dt=`dt=${this.app.servicerData.dt}`);let a=e.parentNode.tagName,s="."+this.app.extractClass(e.parentNode);i.ce=`ce=${a}${s}`,this.app.request.pixel("internalExchangeLogger",this.app.webProtocol+"//c.mgid.com/clie",i,{})}return!0}}});var El={};me(El,{AdvertLinkBlock:()=>Vr});var Vr,Al=ae(()=>{w();_();k();C();D();I();ue();Vr=class extends J{constructor(e){super(e),this.name="AdvertLinkBlock",this.addHook("beforeLoadNewsHooks",this.refreshAdvertLink),this.addHook("afterLoadNewsHooks",this.initAdvertPopup)}parseAdvertLink(e){let t="<!--advertPrefix-->",i=e.indexOf(t)>e.length/2;return i&&this.removeElements(this.app.root.getElementsByClassName("mg_addad"+this.app.id)),(i||this.app.countLoadBlocks===0)&&(e.indexOf(t)>=0?e=e.replace(t,this.app.tickerPrefix):e=this.app.tickerPrefix+e),e}initAdvertPopup(){if(this.app.context.top!==this.app.context.self||this.app.widgetConstructorData.type==="banner"||this.app.widgetConstructorData.type==="exit-pop-up"||["tablet","desktop"].indexOf(this.app.deviceType)===-1||typeof this.app.context._mgDisableAdvertPopup<"u")return;let e=this.app.root.querySelector(".mg_addad"+this.app.id);e&&e.addEventListener("click",t=>{this.showAdvertPopup(t)})}showAdvertPopup(e){let t=this.app.findClosest(e.target,"[data-advert-url]");if(!t)return null;e.preventDefault();let i=(typeof this.app.realRoot<"u"?this.app.realRoot:this.app.root).parentNode,a=i.querySelector("._mgAdvertPopupC1477799"),s=i.querySelector("._mgPopupInner");var n=function(l,d,h){if(h<=0)return;let g=(d-l.scrollTop)/h*10;setTimeout(function(){l.scrollTop=l.scrollTop+g,l.scrollTop!==d&&n(l,d,h-10)},10)};if(!a){let d=this.app.htmlToElements(`"\\n<style>\\n    ._mgAdvertPopupC1477799 {\\n        position: fixed;\\n        width: 100%;\\n        height: 100%;\\n        top: 0px;\\n        left: 0px;\\n        font-family: \\"PTSans\\", Arial, sans-serif;\\n        font-size: 16px;\\n        color: #696969;\\n        line-height: 1.3;\\n        z-index: 999;\\n\\n        -webkit-box-sizing: border-box;\\n        -moz-box-sizing: border-box;\\n        box-sizing: border-box;\\n    }\\n    ._mgAdvertPopupC1477799 iframe {\\n        width: 100%;\\n        height: 377px;\\n    }\\n    ._mgAdvertPopupC1477799 ._mgPopupShadow {\\n        position: absolute;\\n        top: 0px;\\n        left: 0px;\\n        width: 100%;\\n        height: 100%;\\n        background-color: #000;\\n        opacity: 0.4;\\n        -ms-filter: \\"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)\\";\\n        z-index: 1;\\n    }\\n    ._mgAdvertPopupC1477799 ._mgPopupInner {\\n        position: relative;\\n        top: 50%;\\n        margin-left: -375px;\\n        left: 50%;\\n        padding: 36px;\\n        width: 750px;\\n        background-color: #f8f8f8;\\n        z-index: 2;\\n\\n        -webkit-box-sizing: border-box;\\n        -moz-box-sizing: border-box;\\n        box-sizing: border-box;\\n    }\\n    ._mgAdvertPopupC1477799 ._mgPopupInner.fixPop {\\n        position: absolute!important;\\n        top: 30px!important;\\n        margin-top: 0!important;\\n    }\\n    ._mgAdvertPopupC1477799 ._mgClosePopup {\\n        position: absolute;\\n        overflow: hidden;\\n        top: 5px;\\n        right: 5px;\\n        height: 21px;\\n        width: 21px;\\n        text-indent: -9999px;\\n        background: url('data:image\\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALAgMAAADUwp+1AAAABGdBTUEAALGPC\\/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEVmZmZmZmb\\/\\/\\/+E1CFqAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAlSURBVAjXY3BgYGEQAEIWBgcGRkYGBgYXIBaA0CA+SBwkD1QHACp2Ae2BHO8IAAAAAElFTkSuQmCC') no-repeat center center;\\n        background-color: transparent;\\n    }\\n    ._mgAdvertPopupC1477799 ._mgClosePopup:hover {\\n        background-color: #dfdfdf;\\n    }\\n<\\/style>\\n\\n<div class=\\"_mgAdvertPopupC1477799\\">\\n    <div class=\\"_mgPopupShadow\\"><\\/div>\\n    <div class=\\"_mgPopupInner\\">\\n        <a href=\\"#\\" class=\\"_mgClosePopup\\" title=\\"Close\\"><\\/a>\\n        <iframe frameborder=\\"0\\"><\\/iframe>\\n    <\\/div>\\n<\\/div>\\n"`);for(let A=0;A<d.length;A++)i.appendChild(d[A]);if(a=i.querySelector("._mgAdvertPopupC1477799"),!a)return!1;s=a.querySelector("._mgPopupInner");let h=a.querySelector("._mgPopupShadow");s.style.marginTop=-(s.clientHeight/2)+"px",h.addEventListener("click",A=>{this.app.findClosest(A.target,"._mgPopupInner")==null&&a.setAttribute("style","display: none")});let y=a.querySelector("._mgClosePopup");y&&y.addEventListener("click",function(A){A.preventDefault(),a.setAttribute("style","display: none")});let g=a.querySelector("iframe");g.setAttribute("src",t.getAttribute("data-advert-url")),this.app.addEvent(this.app.context,"message",A=>{let P=A.message?"message":"data",E=JSON.parse(A[P]);if(typeof E.target>"u"||E.target!=="correct-popup-height")return!0;g.style.height=E.height+"px",E.safariIPad&&(E.keyboard?(n(this.app.context.document.body,0,500),s.classList.add("fixPop")):s.classList.remove("fixPop")),s.style.marginTop=-(s.clientHeight/2)+"px"},!1)}a.setAttribute("style","display: block"),s.className.indexOf("fixPop")>=0&&n(this.app.context.document.body,0,500)}refreshAdvertLink(){let e=this.getAdvertLinkValue(),t=!1,i=!0;if(t=this.app.adBlockDetect(),e||t&&i)try{let a=this.getAdLinkBlock().replace(/%id/g,this.app.id),s="";t?s=this.app.getTranslation("[WIDGET_TITLE_PROMOTED_CONTENT]"):s=this.app.getTranslation("PODE GOSTAR DE LER...");let n=navigator.language.substr(0,2),l='["es","vi","it","hi","pl","ru","uk"]'.indexOf(n)!==-1?n:"";a=a.replace("%WIDGET_TITLE%",s),a=a.replace("%lang/",l===""?"":l+"/"),a=a.replace(/\((\'|\")?\/\//g,"($1"+this.app.webProtocol+"//"),a=a.replace('src="//','src="'+this.app.webProtocol+"//"),a=a.replace('href="//','href="'+this.app.webProtocol+"//");let d="";if(d===""){d=this.app.subnetMirrorsUtm;let y=this.app.context.document.location.hostname;if(this.app.context!==this.app.context.top){let g=this.app.context.document.referrer.match(/:\/\/(.[^/]+)/);g!==null&&(y=g[1])}d=d.replace("{domain}",y)}this.app.tickerPrefix=a.replace(/%utm/,d);let h=document.createElement("div");if(t&&i)h.innerHTML=this.app.tickerPrefix;else{if(e===1)return;h.innerHTML=this.app.tickerPrefix,e===2&&this.removeElements(h.getElementsByClassName("mg_addad"+this.app.id)),e===3&&(this.removeElements(h.getElementsByClassName("mghead")),this.removeElements(h.getElementsByClassName("mghead"+this.app.id)))}this.app.tickerPrefix=h.innerHTML}catch{}else this.app.tickerPrefix=""}getAdvertLinkValue(){return parseInt(1)}removeElements(e){for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}getAdLinkBlock(){let e="under-article-widget",t="under-article-widget-main",i="adfnetwork",a=q;typeof a<"u"&&typeof a[e]<"u"&&(typeof a[e]["*"]<"u"&&(i=a[e]["*"]),typeof a[e][t]<"u"&&(i=a[e][t]));let s=V;return typeof s[i]>"u"&&(i="adfnetwork"),s[i]}}});var Ll={};me(Ll,{ColorBlock:()=>qr});var qr,Bl=ae(()=>{w();_();k();C();D();I();ue();qr=class extends J{constructor(e){super(e),this.name="ColorBlock"}colorAverage(e){return new Promise(t=>{e.complete?t(this._getColor(e)):e.onload=()=>{t(this._getColor(e))}})}_getColor(e){let t={r:0,g:0,b:0},i=4,a=document.createElement("canvas");a.width=i,a.height=i;let s=a.getContext("2d");s.drawImage(e,0,0,i,i);try{let n=s.getImageData(0,0,i,i),l=-4,d=0;for(;(l+=1*4)<n.data.length;)++d,t.r+=n.data[l],t.g+=n.data[l+1],t.b+=n.data[l+2];t.r=Math.floor(t.r/d),t.g=Math.floor(t.g/d),t.b=Math.floor(t.b/d);let h=Math.max(t.r,t.g,t.b),y=Math.min(t.r,t.g,t.b);if((h/255+y/255)/2>.8){let g=this._rgbToHsl(t.r,t.g,t.b);t=this._hslToRgb(g.h,g.s,.8)}}catch(n){this.app.log(`${this.name} error: `,"error",n)}return t}_rgbToHsl(e,t,i){e/=255,t/=255,i/=255;let a=Math.max(e,t,i),s=Math.min(e,t,i),n,l,d=(a+s)/2;if(a==s)n=l=0;else{let h=a-s;switch(l=d>.5?h/(2-a-s):h/(a+s),a){case e:n=(t-i)/h+(t<i?6:0);break;case t:n=(i-e)/h+2;break;case i:n=(e-t)/h+4;break}n/=6}return{h:n,s:l,l:d}}_hslToRgb(e,t,i){let a,s,n;if(t==0)a=s=n=i;else{let l=function(y,g,A){return A<0&&(A+=1),A>1&&(A-=1),A<.16666666666666666?y+(g-y)*6*A:A<.5?g:A<.6666666666666666?y+(g-y)*(.6666666666666666-A)*6:y},d=i<.5?i*(1+t):i+t-i*t,h=2*i-d;a=l(h,d,e+1/3),s=l(h,d,e),n=l(h,d,e-1/3)}return{r:Math.floor(a*255),g:Math.floor(s*255),b:Math.floor(n*255)}}}});var Ol={};me(Ol,{GradientBlock:()=>Gr});var Gr,Ml=ae(()=>{w();_();k();C();D();I();ue();Gr=class extends J{constructor(e){super(e),this.name="GradientBlock",this.addHook("afterLoadNewsHooks",this._gradientRendering)}_createGradient(e,t,i,a,s,n,l){(this.app.context.matchMedia("(max-width: 480px)").matches||this.app.deviceType==="mobile")&&(s=n);let d=.299*l.r+.587*l.g+.114*l.b>186?"#000":"#fff",h="linear-gradient("+s+"transparent, rgba("+l.r+","+l.g+","+l.b+", 0.25) 15%,rgba("+l.r+","+l.g+","+l.b+", 0.85) 30%,rgb("+l.r+","+l.g+","+l.b+") 45%)";e.style.background="rgb("+l.r+","+l.g+","+l.b+")",t.style.background=h,i.style.color=d,Object.keys(a).forEach(function(y){let g=a[y];g.firstElementChild.style.color=d}),this._setFontSize(i)}_defaultGradient(e,t,i,a,s,n){(this.app.context.matchMedia("(max-width: 480px)").matches||this.app.deviceType==="mobile")&&(a=s);let l="";n===""?l="linear-gradient("+a+"transparent,rgba(0,0,0, 0.25) 15%,rgba(0,0,0, 0.85) 30%,rgb(0,0,0) 45%)":l="linear-gradient("+a+"transparent,rgba("+n+", 0.25) 15%,rgba("+n+", 0.85) 30%,rgb("+n+") 45%)",e.style.background=l,t.style.color="#fff",Object.keys(i).forEach(function(d){let h=i[d];h.firstElementChild.style.color="#fff"}),this._setFontSize(t)}_setFontSize(e){let t=this.app.autoSizeTitle-Math.round(e.clientHeight/this.app.autoSizeTitle);e.style.fontSize=t+"px",e.style.lineHeight=t+"px"}_gradientRendering(){if(!this.app.templateContent)return;let e=this.app.templateContent.querySelectorAll("[class*=mgline-blur]");if(!e.length)return;let t=a=>{let s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return s?parseInt(s[1],16)+","+parseInt(s[2],16)+","+parseInt(s[3],16):""},i={r:159,g:138,b:126};for(let a=0;a<e.length;a++){let s="",n="",l="",d=/\bmgline-[^\s]*\b/.exec(e[a].classList.value),h=/\bmgline-[^\s]*\b-mob/.exec(e[a].classList.value);d&&(l=d[0].split("-").pop(),l=l==="blur"?"bottom":l,s="to "+l+","),h&&(l=h[0].split("-")[2],n="to "+l+",");let y=e[a],g=e[a].getElementsByClassName("text-elements")[0];if(!e[a].getElementsByClassName("mctitle")[0])continue;let A=e[a].getElementsByClassName("mctitle")[0].getElementsByTagName("a")[0],P=e[a].getElementsByClassName("mcdomain"),E=e[a].querySelector("img.mcimg"),T=e[a].querySelector("video.mcvideo"),L="";L!==""&&(L=t(L)),L===""?E?this.app.colorBlock.colorAverage(E).then(W=>{this._createGradient(y,g,A,P,s,n,W)}):T&&this._createGradient(y,g,A,P,s,n,i):this._defaultGradient(g,A,P,s,n,L)}}}});var Rl={};me(Rl,{RejectBlock:()=>Ur});var Ur,Wl=ae(()=>{w();_();k();C();D();I();ue();Ur=class extends J{constructor(e){super(e),this.isRejectNeeded=!1,this.name="RejectBlock",this.app.isInsertedRejectStyles=!1,this.app.MarketGidReject=()=>{this.isRejectNeeded=!0},this.addHook("afterLoadNewsHooks",this.initReject)}initReject(){this.isRejectNeeded&&this.reject()}reject(){let e=this.app.root.querySelectorAll(".mgline");for(let t=0;t<e.length;t++){let i=e[t],a=i.querySelector(".close-informer"),s=i.querySelector("div.mcimg"),n=i.className.match(/teaser-([0-9]+)/),l=i.className.match(/type-(w|e|i)/);if(!a&&s&&i.className.indexOf("dsp")<=0&&n&&l&&l[1]!=="i"){let h=this.buildCloseBtn(n,l);i.querySelector(".image-with-text")?.appendChild(h)}}this.initRejectStyles()}buildCloseBtn(e,t){let i=this.app.subnetDashboardDomain+"/publisher/blocked",a=this.app.context.document.createElement("a");return a.className="close-informer",a.href=i+"/teaser/"+e[1]+"/widget/"+(t[1]==="w"?"57809668/type/goods":"0/type/news"),a.target="_blank",a.style.top="2px",a.style.right="3px",a.rel="sponsored nofollow",a}initRejectStyles(){if(this.app.isInsertedRejectStyles)return;this.app.stylesheetsBlock.add("reject",`
div.mgline a.close-informer {
width: 14px !important;
height: 14px !important;
background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NzI0ODBDMzY3ODcxMUU1OEM4RUU2RUJCOUREODIyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NzI0ODBDNDY3ODcxMUU1OEM4RUU2RUJCOUREODIyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk3MjQ4MEMxNjc4NzExRTU4QzhFRTZFQkI5REQ4MjJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk3MjQ4MEMyNjc4NzExRTU4QzhFRTZFQkI5REQ4MjJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+uNcpEQAAAHxJREFUeNqckgEKwCAIRe3fYjfKc2zX6hydaLRbbDnGkLDIPggl/5lKIcbIRJRqbDSnUmOHE6LPm+CEfhj6lnN+o5WVh1VOm6xColCXc/cgLWYev9gaejnQojCab5RDzyDt6RantqoBaz5zq54ZywJ3CXjIwQGd8skfAQYALdQqftYulocAAAAASUVORK5CYIJ0ZW50Ij4NCiA8ZGl2IGNsYXNzPSJjb250ZW50LWNvbnRhaW5lciI+PGZpZWxkc2V0Pg0KICA8aDI+NTAyIC0gV2ViIHNlcnZlciByZWNlaXZlZCBhbiBpbnZhbGlkIHJlc3BvbnNlIHdoaWxlIGFjdGluZyBhcyBhIGdhdGV3YXkgb3IgcHJveHkgc2VydmVyLjwvaDI+DQogIDxoMz5UaGVyZSBpcyBhIHByb2JsZW0gd2l0aCB0aGUgcGFnZSB5b3UgYXJlIGxvb2tpbmcgZm9yLCBhbmQgaXQgY2Fubm90IGJlIGRpc3BsYXllZC4gV2hlbiB0aGUgV2ViIHNlcnZlciAod2hpbGUgYWN0aW5nIGFzIGEgZ2F0ZXdheSBvciBwcm94eSkgY29udGFjdGVkIHRoZSB1cHN0cmVhbSBjb250ZW50IHNlcnZlciwgaXQgcmVjZWl2ZWQgYW4gaW52YWxpZCByZXNwb25zZSBmcm9tIHRoZSBjb250ZW50IHNlcnZlci48L2gzPg0KIDwvZmllbGRzZXQ+PC9kaXY+DQo8L2Rpdj4NCjwvYm9keT4NCjwvaHRtbD4NCg==");
display: block;
opacity: 0;
position: absolute;
right: 2px;
top: 2px;
z-index: 149999;
cursor: pointer;
-moz-transition: all 0.3s ease-out;
-o-transition: all 0.3s ease-out;
-webkit-