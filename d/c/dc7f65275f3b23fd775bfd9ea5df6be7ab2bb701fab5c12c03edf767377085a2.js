/*! For license information please see rendition.js.LICENSE.txt */
(()=>{var s,f,_={sR8A:s=>{s.exports=function(s){ar f={},_={main:0};.e=i.m=s,i.c=f,i.d=i.r=i.t=i.n=i.o=i.p="",i.oe=var y=window.webpackJsonp=window.webpackJsonp||[],S=y.push.bind(y);y.push=t,y=y.slice();for(var T=0;T<y.length;T++)t(y[T]);var E=S;return i(i.s=132)}([function(s,f){s.exports={}},,function(s,f,_){_(31)("Uint8",(function(s){return function(f,_,y){return s(this,f,_,y)}}))}ise}},function(s,f,_){_(31)("Uint32",(function(s){return function(f,_,y){return s(this,f,_,y)!1)}},function(s,f,_){"use strict";_.r(f),_.d(f,"AcrobatJS",(function(){return st})),_.d(f,"enums",(function(){return y})),_.d(f,"AcrobatJSSecurityHandler",(function(){return cr})),_.d(f,"CertificateValidationInterface",(function(){return ur}));var y={};_.r(y),_.d(y,"PageRequestType",(function(){return ye})),_.d(y,"AnnotType",(function(){return Pe})),_.d(y,"Permissions",(function(){return Ce})),_.d(y,"ContentType",(function(){return Ne})),_.d(y,"ColorPaletteKey",(function(){return We})),_.d(y,"FTPDFToWebViewTranslationStatus",(function(){return Be})),_.d(y,"ProcessingMode",(function(){return Ue})),_.d(y,"WasmSwitchingState",(function(){return qe})),_.d(y,"Workflow",(function(){return ze})),_(9),_(65),_(94),_(34),_(107),_(108),_(72),_(109),_(117);const S=Object.freeze(["unknown",'"Kozuka Gothic Pr6N R", "Meiryo", "Hira Kaku Pro N", "Hira Min Pro N", "Noto Sans JP"','"Adobe Heiti Std", "SimSun", "ST Heiti SC", "Adobe Song Std"','"DF Kai Shu", "ST Heiti TC", "Adobe Fan Heiti Std", "MingLiU", "Li Hei Pro", "Adobe Ming Std"','"Gulim", "Apple Gothic", "Adobe Gothic Std", "GulimChe", "Apple Myungjo", "Adobe Myungjo Std"']);var T=new class{constructor(){this._textDataMap={},this._fontNameMap={},this._canvas=document.createElement("canvas")}_getFontWidth(s){const f=this._canvas.getContext("2d");return f.font="10px ".concat(s),f.measureText("thequickbrownfoxjumpsovethelazydog").width}_fontAvailable(s){const f=this._getFontWidth("monospace"),_=this._getFontWidth("serif"),y=this._getFontWidth("sans-serif");return f!==this._getFontWidth('"'.concat(s,'",monospace'))||y!==this._getFontWidth('"'.concat(s,'",sans-serif'))||_!==this._getFontWidth('"'.concat(s,'",serif'))}_getCSSFontFaceString(s,f){if(void 0===this._fontNameMap[s.psName]){const f=s.bold?"bold ":"",_=s.italic?"italic ":"";this._fontNameMap[s.psName]="".concat(f+_,'10px "').concat(s.displayName?s.displayName:s.psName,'"'),this._textDataMap[s.psName]||(this._fontNameMap[s.psName]="".concat(f+_,"10px ").concat(S[s.language]))}return this._fontNameMap[s.psName].replace("10px","".concat(f,"px"))}_prepareContextForFontMatrix(s,f){const _=this._canvas.getContext("2d"),y=Math.ceil(1.65*f.size);this._canvas.setAttribute("height",y),this._canvas.setAttribute("width",y),_.font=this._getCSSFontFaceString(s,f.size);const S=-f.top,T=-f.left,E=1/f.size;return _.setTransform(f.a*E,f.b*E,-f.c*E,-f.d*E,T,S),_}_getBitmapForCharCode(s,f){s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,this._canvas.width,this._canvas.height),s.restore(),s.fillText(String.fromCharCode(f),0,0);const _=s.getImageData(0,0,this._canvas.width,this._canvas.height),y={width:_.width,height:_.height,data:new Uint8ClampedArray(_.width*_.height)};for(let s=0;s<_.width*_.height;s+=1)y.data[s]=_.data[4*s+3];return y}_logData(s){const f={},_="".concat(s.psName,"(").concat(s.displayName,")");return this._textDataMap[s.psName]?f[_]="ExactFont":s.allowFallback?f[_]="SystemDefault":f[_]="FauxFont",f}generateGlyphBitmap(s,f){const _={bitmaps:{}};if(!f)return _;const{matrix:y}=f;if(void 0===this._textDataMap[f.psName]){const s=this._fontAvailable(f.displayName?f.displayName:f.psName);this._textDataMap[f.psName]=s}if(_.analyticsData=this._logData(f),_[f.psName]=this._textDataMap[f.psName],!this._textDataMap[f.psName]&&!f.allowFallback)return _;const S=this._prepareContextForFontMatrix(f,y);return s.forEach((s=>{if(void 0===_.bitmaps[y.key+s]){const f=this._getBitmapForCharCode(S,s);_.bitmaps[y.key+s]=f}})),_}};const Eeof s,L=s=>{let f;for(f=s.length-1;f>=0&&!(s[f]>0);f--);s.splice(f+1)},j=(s,f)=>{const _=s.split(".").map((s=>parseInt(s,10))),y=f.split(".")s,10)));L(_),L(y);const S=Math.min(_.length,y.length);for(let s=0;s<S;s+=1){if(_[s]>y[s])return 1;if(_[s]<y[s])return-1}return _.length===y.length?0:_.length<y.length?-1rigin,O="registerLicense",M="openPDF",q="getPageRendition",ee="addMessagePort",te="verifyDigitalSignatures",re="createFormField",ne="updateFormField",ie="deleteFormField",se="isFileQualifiedForLiquidMode",oe="translateToLiquidModeView",ae="getLiquidModeViewResource",ce="applyCNFTPDFUpdates",ue="getHtmlLocationForDocPoint",le="getDocPointForHtmlLocation",de="JSApi",he="editLinkAnnot",fe="deleteLinkAnnot",pe=[se,oe,ae,ce,ue,le];let ge=!1;connts)};var me=_(50),ve=_.n(me);conser(),tt=s=>("13.0",!(-1===j(s,"13.0")||((s,f)=>1===j(s,"13.1"))(s))),we=Object.freeze({INCORRECT_PASSWORD:3,LINEARIZATION_DICT_NOT_FOUND:4,INCOMPLETE_BUFFER_RANGES_DOWNLOADED:-1,SAB_INDEX_OUT_OF_BOUNDS:-2}),be=Object.freeze({INVALID_BUFFER:"Invalid buffer",INVALID_PAGE_NUM:"Invalid page number",SHARED_ARRAY_BUFFER_NOT_SUPPORTED:"Shared array buffer not supported",LINEARIZATION_DICT_NOT_FOUND:"Linearization dict not found",INCOMPLETE_BUFFER_RANGES_DOWNLOADED:"Incomplete pdf buffer ranges downloaded",SAB_INDEX_OUT_OF_BOUNDS:"Shared array buffer index is out of bounds",PASSWORD_PROTECTED_PDF_NOT_SUPPORTED_IN_LINEARIZED_WORKFLOW:"password protected pdf not supported in linearized workflow"}),ye=Object.freeze({PAGE:0,PAGE_CACHE:1,THUMBNAIL:2}),Pe=Object.freeze({TEXT:1,LINK:2,FREE_TEXT:4,LINE:8,SQUARE:16,CIRCLE:32,POLYGON:64,POLYLINE:128,HIGHLIGHT:256,UNDERLINE:512,SQUIGGLY:1024,STRIKEOUT:2048,CARET:4096,STAMP:8192,INK:16384,POPUP:32768,FILE_ATTACHMENT:65536,SOUND:131072,MOVIE:262144,SCREEN:524288,WIDGET:1048576,WATERMARK:2097152,THREE_D:4194304,FREE_TEXT_TYPEWRITER:8388608,ALL:4294967295,NONE:0}),Ce=Object.freeze({PRINT:4,MODIFY_CONTENT:8,COPY_EXTRACT_CONTENT:16,COMMENTING:32,FORM_FILLING:256,COPY_EXTRACT_CONTENT_ACCESSIBILITY:512,DOCUMENT_ASSEMBLY:1024,HIGH_QUALITY_PRINT:2048}),Ne=Object.freeze({NO_CONTENT:0,TEXT:1,HYPERLINK:2,INVALID:3,IMAGE:4}),We=Object.freeze({BACKGROUND:"background",TEXT:"text"}),Be=Object.freeze({NOT_STARTED:-1,IN_PROGRESS:0,COMPLETE:1,ERROR:2}),Ue=Object.freeze({BATCHED:"batched",DEFAULT:"default"}),qe=Object.freeze({NOT_SWITCHED:-1,SWITCHING:0,SWITCHED:1}),ze=Object.freeze({LINEARIZED:"Linearized",NON_LINEARIZED:"Non-Linearized"});clanull}open(s){this._beginRequestCallback=s}onload(s){this._loadCallback=s}onerror(s){this._errorCallback=s}send(s){this._beginRequestCallback(s).then((s=>{if(this._loadCallback){const f={command:ce,priority:10,params:{cnftpdfUpdatesStream:s},transferList:[s]};this._loadCallback(f)}})).c:s})}))}}cla(_)}fetchCNFTPDFUpdates(s){this._adobeSenseiPredictRequest.send(s)}}function vt(s,f){var _=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);f&&(y=y.filter((function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),_.push.apply(_,y)}return _}function bt(s){for(var f=1;f<arguments.length;f++){var _=null!=arguments[f]?arguments[f]:{};f%2?vt(Object(_),!0).forEach((function(f){wt(s,f,_[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(_)):vt(Object(_)).forEach((function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(_,f))}))}return s}function wt(s,f,_){return f in s?Object.defineProperty(s,f,{value:_,enumerable:!0,configurable:!0,writable:!0}):s[f]=_,s}class yt{constructor(s,f){this._startTranslationCallback=s,this._recordPerfMarkerCallback=f,this._html=null,this._htmlRequestQueue=[],this._isNewHTMLAvailable=!1,this._resources=new Map,this._pendingResourceRequests=new Map,this._translationStatus=Be.NOT_STARTED,this._errorMsg=null,this._adobeSenseiClient=new mt,this._perfMarkers=new Map,this._serverMetaData=null,this._textDecoder=new TextDeRTED}get _isTranslationComplete(){return this._translationStatus===Be.COMRROR}_startTranslation(s){this._startTranslationCallback(s),this._translationStatus=Be.IN_PROGRESS,this.recordPerfMarker({marker:"beginTranslatingth}_resolveHTMLRequest(s){const{requestStartTime:f,resolveCallback:_}=s;_({data:{html:this._html,serverMetaData:this._serverMetaData},timeTaken:performance.now()-f}),this.recordPerfMarker({marker:"firstHTMLMarkupResolved"}),this._isTranslationComplete&&this.recordPerfMarker({marker:"lastHTMLMarkupResolved"}),this._isNewHTMLAvailable=!1}_rejectHTMLRequest(s,f){const{requestStartTime:_,rejectCallback:y}=s;y(bt(bt({},f),{},{timeTaken:performance.now()-_}))}_resolvePendingHTMLRequest(){if(!this._isHTMLRequestQueueEmpty&&(this._isNewHTMLAvailable||this._isTranslationComplete)){const s=this._htmlRequestQueue.shift();this._resolveHTMLRequest(s)}}_resolveAllPendingHTMLRequests(){for(;!this._isHTMLRequestQueueEmpty;)this._resolvePendingHTMLRequest()}_rejectAllPendingHTMLRequests(s){this._htmlRequestQueue.forf,s)})),this._htmlRequestQueue=[]}_handleHTMLRequest(){return new Promise(((s,f)=>{const _=performance.now();this._htmlRequestQueue.push({requestStartTime:_,resolveCallback:s,rejectCallback:f}),this.recordPerfMarker({marker:"firstHTMLMarkupRequested"}),this._hasTranslationFailed?this._rejectAllPendingHTMLRequests():this._resolvePendingHTMLRequest()}))}getHTMLStream(s,f,_){return this._isTranslationStarted||(this._startTranslation(s),this._adobeSenseiClient.init(f,_,this._onAdobeSenseiClientError.bind(this))),new Promise(((f,_)=>{const y=performance.now(),S=new ReadableStream({pull:s=>{const f=this._handleHTMLRequest();s.enqueue(f),this._hasTranslationFailed&&(this._rejectAllPendingHTMLRequests(),s.close()),this._isTranslationComplete&&(this._resolveAllPendingHTMLRequests(),s.close())}}),{command:T}=s;f({command:T,data:{htmlStream:S},timeTaken:performance.now()-y})}))}setHTML(s,f,_){_&&(this._serverMetaData=_);const y=this._textDecoder.decode(s.buffer);this._html=encodeURI(y),this._translationStatus=f,this._isNewHTMLAvailable=!0,this._resolvePendingHTMLRequest(),this._isTranslationComplete&&this._resolveAllPendingHTMLRequests()}_resolveResourceRequest(s){const{command:f,resourceID:_,resourceURL:y,requestStartTime:S,resolveCallback:T}=s;T({command:f,data:bt({resourceID:_,resourceURL:y},this._resources.get(y)),timeTaken:performance.now()-S})}_resolvePendingResourceRequest(s){if(this._pendingResourceRequests.has(s)&&this._resources.has(s)){const f=this._pendingResourceRequests.get(s);this._resolveResourceRequest(f),this._pendingResourceRequests.delete(s)}}getResource(s){let{command:f,params:_}=s;const{resourceID:y,resourceURL:S}=_;return new Promise(((s,_)=>{const T=performance.now(),E={command:f,resourceID:y,resourceURL:S,requestStartTime:T,resolveCallback:s};this._pendingResourceRequests.set(S,E),this._resolvePendingResourceRequest(S)}))}setResource(s,f,_){this._resources.set(s,{resourceContent:f,resourceMimeType:_}),this._resolvePendingResourceReques(s)}_onAdobeSenseiClientError(s){this._translationStatus=Be.ERROR,this._errorMsg=s,this._rejectAllPendingHTMLRequests(s)}recordPerfMarker(s){const{marker:f}=s;if(!this._perfMarkers.has(f)&&(this._perfMarkers.set(f,performance.now()),this._recordPerfMarkerCallback)){const s={};s[f]=this._perfMarkers.get(f),this._recordPerfMarkerCallback("ajsPerfTimings",s)}}}_(119);const _t=s=>{try{return new URL(s).origin}catch(s){return}},kt=(s,f)=>!(!s||!_t(s))&&f.location.origin!==_t(s),Pt=function(s){co);")}(s,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"acrobatProxy.js"),_=new Blob([f],{type:"application/javascript"});return URL.createObjectURL(_)},Ge=Object.freeze({ENABLE:0,DISABLE:1}),He=(Object.freeze({READY_TO_WRITE_CHUNK:0,CHUNK_WRITTEN:1}),Object.freeze({MESSAGE_IN_PROGRESS:0,MESSAGE_WRITTEN:1}),Object.freeze({busyLoopStatus:0,doneStatus:1,readWriteStatus:2,lengthByteFirst:3,lengthByteSecond:4,responseStart:5})),At=(s,f)=>{s&&(new Uint8Array(s)[He.busyLoopStatus]=f?Ge.ENABLE:Ge.DISABLE)};function Mt(s,f){var _=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);f&&(y=y.filter((function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),_.push.apply(_,y)}return _}function Ot(s,f,_){return f in s?Object.defineProperty(s,f,{value:_,enumerable:!0,configurable:!0,writable:!0}):s[f]=_,s}_(128),_(75);const Ve=Object.freeze({approval:"Approval",certification:"Certification",ur:"Usage Rights"}),Je=Object.freeze({valid:"valid",invalid:"invalid",unknown:"unknown"}),$e=Object.freeze({currentTime:"currentTime",signingTime:"signingTime"}),Ke=Object.freeze({version:"Version",serialNumber:"Serial Number",issuer:"Issuer",subject:"Subject",validityStarts:"Validity Starts",validityEnds:"Validity Ends",keyUsage:"Key Usage",extendedKeyUsage:"Extended Key Usage",certificatePolicies:"Certificate Policies",crlDistributionPoints:"CRL Distribution Points",certificateAuthorityInformationAccess:"Certificate Authority Information Access",basicConstraints:"Basic Constraints",signatureAlgorithm:"Signature Algorithm",publicKey:"Public Key",subjectKeyIdentifier:"Subject Key Identifier",authorityKeyIdentifier:"Authority Key Identifier",x509Data:"X509 Data"});function Ft(s,f){var _=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);f&&(y=y.filter((function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),_.push.apply(_,y)}return _}function It(s){for(var f=1;f<arguments.length;f++){var _=null!=arguments[f]?arguments[f]:{};f%2?Ft(Object(_),!0).forEach((function(f){Wt(s,f,_[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(_)):Ft(Object(_)).forEach((function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(_,f))}))}return s}function Wt(s,f,_){return f in s?Object.defineProperty(s,f,{value:_,enumerable:!0,configurable:!0,writable:!0}):s[f]=_,s}class Ct{constructor(s){this.validators=s||[],this.X509Certificate=null,this.X509CRL=null}getCertificateDetails(s){return new Promise(((f,y)=>{const i=()=>{const _=new this.X509Certificate(s);return f(_.getDetails())};if(this.X509Certificate)return i();Promise.all([_.e("vendors~X509CRL~X509Certificate"),_.e("X509CRL~X509Certificate"),_.e("X509Certificate")]).then(_.bind(null,147)).then((s=>(this.X509Certificate=s.default,i()))).catch((()=>f({})))}))}getCRLDetails(s){return new Promise(((f,y)=>{const i=()=>{const _=new this.X509CRL(s);return f(_.getDetails())};if(this.X509CRL)return i();Promise.all([_.e("vendors~X509CRL~X509Certificate"),_.e("X509CRL~X509Certificate"),_.e("X509CRL")]).then(_.bind(null,148)).then((s=>(this.X509CRL=s.default,i()))).cf({})))}))}async getParsedCertificates(){const s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((s=>this.getCertificateDetails(s)));return(await Promise.allSettled(s)).map((s=>s.value))}async getParsedCRLs(){const s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((s=>this.getCRLDetails(s)));return(await Promise.allSettled(s)).map((s=>s.value))}validate(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const f=[],_={trustSources:[],status:Je.unknown,certificates:s,validatorErrors:f,verifiedBy:"",validation:{validatedOn:$e.currentTime,timestamp:(new Date).toISOString()}},n=(y,S)=>{if(y>=this.validators.length)return S(It({},_));this.validators[y].validate(s).then((s=>{var f;const T=null==s||null===(f=s.status)||void 0===f?void 0:f.toLowerCase();if(_.certificates=s.certificates,T===Je.valid||T===Je.invalid)return s.status=T,s.verifiedBy=this.validators[y].name(),S(It(It({},_),s));n(y+1,S)})).catch((s=>{f.push({validator:this.validators[y].name(),error:{message:s.message||"",reason:s.reason||{}}}),n(y+1,S)}))};return new Promise((f=>{if(!s.length)return f(It({},_));n(0,f)}))}}clat(s)}_setSignatureType(s){let f=!1;s.length&&(f="undefined"!==s[0].mdpValidation.type),s.foroval})),f&&(s[0].signatureDetails.type=Ve.certification)}_sortSignaturesBySigningTime(s){s.sort(((s,f)=>{const _=s.signatureDetails.timestamp,y=f.signatureDetails.timestamp;return _||y?_?y?Date.parse(_)-Date.parse(y):-1:1:0}))}_updateMDPValidationForApprovalSignatures(s){s.forEach((s=>{s.signatureDetails.type!==Ve.certification&&delete s.mdpValidation.tys(s)}async _fixCertificateOrder(s){if(s.length<=1)return s;const f=await this.validationManager.getParsedCertificates(s);f.forex=f}));try{const _=(s=>{if(!s.length)return s;const f=[],_=s.find((s=>{var f;return"No"===(null===(f=s[Ke.basicConstraints])||void 0===f?void 0:f.CA)}));if(!_)return s;for(f.push(_);f.length<s.length;){const _=f[f.length-1],y=s.find((s=>s[Ke.serialNumber]!==_[Ke.serialNumber]&&JSON.stringify(s[Ke.subject])===JSON.stringify(_[Ke.issuer])));if(!y)break;f.push(y)}return f})(f);return _ndex]))}catch(f){return s}}async _getCertificateChains(s){const f=[];if(!s||!s.signatures)return f;s.signatures.forEach((s=>{const _=s.certificates.map((s=>s.pem));f.push(_)}));const _=fer(s)));return(await Promise.allSettled(_)).map((s=>s.value))}async _handleX509Parsing(s,f){var _;null!=s&&null!==(_=s.certificates)&&void 0!==_&&_.length&&(f.certificates=await this.validationManager.getParsedCertificates(s.certificates))}_handleCertificateValidationInfo(s,f){f.certificateValidation={status:s.status||Je.unknown,trustSources:s.trustSources||[],verifiedBy:s.verifiedBy||"",validatorErrors:s.validatorErrors||[],validation:s.validation||{}}}async responseHandler(s,f){try{const f=(await this._getCertificateChains(s.data.data)).map((s=>this.validationManager.validate(s))),_=await Promise.allSettled(f),{signatures:y}=s.data.data;y.forEach(((s,f)=>{const{value:y}=_[f];this._handleCertificateValidationInfo(y,s)}));const S=y.map(((s,f)=>{const{value:y}=_[f];return this._handleX509Parsing(y,s)}));await Promise.allSettled(S),this._processSignatureData(s.data.data.signatures)}catch(s){}finally{f(s.data.msgId,s)}}}function Bt(s,f){var _=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);f&&(y=y.filter((function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),_.push.apply(_,y)}return _}function Ut(s){for(var f=1;f<arguments.length;f++){var _=null!=arguments[f]?arguments[f]:{};f%2?Bt(Object(_),!0).forEach((function(f){qt(s,f,_[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(_)):Bt(Object(_)).forEach((function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(_,f))}))}return s}function qt(s,f,_){return f in s?Object.defineProperty(s,f,{value:_,enumerable:!0,configurable:!0,writable:!0}):s[f]=_,s}cla Map}getAnnotData(s){let{params:f}=s,_=function zt(s,f){if(null==s)return{};var _,y,S=function(s,f){if(null==s)return{};var _,y,S={},T=Object.keys(s);for(y=0;y<T.length;y++)_=T[y],f.indexOf(_)>=0||(S[_]=s[_]);return S}(s,f);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(s);for(y=0;y<T.length;y++)_=T[y],f.indexOf(_)>=0||Object.prototype.propertyIsEnumerable.call(s,_)&&(S[_]=s[_])}return S}(s,["params"]);const{annotId:y}=f;return new Promise(((s,S)=>{this._getAnnotData(Ut({params:f},_)).then((f=>{const _=Ut({},f);_&&_.data&&_.data.annot?(_.data.annot=Ut(Ut({},_.data.annot),this._annotData.get(y)),s(_)):S({message:"Annotation data for annotation ID ".concat(y," not found")}),this._annotData.delete(y)})).catch((s=>{S(s)}))}))}setAnnotData(s){const{annotId:f}=s;this._annotData.set(f,s)}}function Gt(s,f){var _=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);f&&(y=y.filter((function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),_.push.apply(_,y)}return _}function Xt(s){for(var f=1;f<arguments.length;f++){var _=null!=arguments[f]?arguments[f]:{};f%2?Gt(Object(_),!0).forEach((function(f){Kt(s,f,_[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(_)):Gt(Object(_)).forEach((function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(_,f))}))}return s}function Kt(s,f,_){return f in s?Object.defineProperty(s,f,{value:_,enumerable:!0,configurable:!0,writable:!0}):s[f]=_,s}const Xe="".concat("ajs","PerfTimings");var Ze=class{constructor(s){let{ajsWorkerPath:f="",useFullBuild:_=!1,enableWasmExceptions:y=!1,enableLogging:S=!1,workerCreator:T,signalDispatcher:E,windowObj:q,enableProgressiveRendering:te=!1,apiTrackingInfo:re,currentPluginCount:ne,hostEnv:ie}=s;if(!window.Worker)throw new Error("Web Workers not supported!");Object.assign(this,Xt({ajsWorkerPath:f,useFullBuild:_,enableWasmExceptions:y,enableLogging:S,signalDispatcher:E,workerCreator:T,windowObj:q,enableProgressiveRendering:te,apiTrackingInfo:re,hostEnv:ie},x(ne)&&{currentPluginCount:ne})),this._messageMap={},this._unsettledMessageList=[],this._pdfBuffer=null,this._decryptedPdfBuffer=null,this._pdfPassword="",this._jsSAB=null,this._includeDocLevelActions=!1,this._messageCount=0,this.pluginModesEntered=new Map,this.activePluginModeInfo={activePluginMode:"",activePluginModeStartTime:null},this._linearizationInfo={},this._digSigHandler=null,this._annotDataClient=new Ht((s=>this.sendMessageToWorker(s))),this._ftpdfWebViewCache=new yt((s=>{this.sendMessageToWorker(s,f)})),this._wasmSwitchHandler=new class{constructor(s){let{sendMessageToWorker:f,restartWorker:_,getOpenPdfMessage:y}=s;this.sendMessageToWorker=f,this.restartWorker=_,this.getOpenPdfMessage=y,this.pluginPortsMap=null,this.switchingState=qe.NOT_SWITCHED}shouldSwitch(){return this.switchingState===qe.NOT_SWITCHED}isSwitching(){return this.switchingState===qe.SWITCHING}setSwitchingState(s){this.switchingState=s}switchToFullBuild(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve(),f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.shouldSwitch())return Promise.reject();const _=f;this.setSwitchingState(qe.SWITCHING),this.sendMessageToWorker({command:"pauseMessageProcessing",params:{}});const y=this.sendMessageToWorker({command:"getMessages",params:{}});return Promise.all([y,s]).catch((s=>{throw this.setSwitchingState(qe.NOT_SWITCHED),s})).then((s=>{let[f]=s;const y=f;return this.restartWorker().then((()=>{const s=!this._checkCommandInObject(_,O)&&this.getOpenPdfMessage();(this._checkCommandInObject(_,de)||this._checkCommandInObject(_,M))&&delete _.data.currEvent,this._checkCommandInObject(y,M)&&delete y.data.currEvent,s&&this.sendMessageToWorker(s),this._sendMessageListToWorker(y,_),y&&y.data&&(this.pluginPortsMap=y.data.pluginPortsMap),this._sendPluginPortsToWorker()})).finHED)}))}))}_checkCommandInObject(s,f){return s&&s.data&&s.data.currEvent&&s.data.currEvent.command===f}_setAppearanceDataInCurrEventHelper(s,f,_){const y=s;if(y&&y.params&&y.params.data){const{annotIndex:S}=s.params.data;if(void 0!==S&&S>=0&&S<f.length&&y.params.data.appearanceData){const s=f[S];y.params.data.appearanceData.buffer=s,_.push(s.buffer)}}}_setAppearanceDataInCurrEvent(s,f){const _=s,y=_.currEventAppearanceData;if(y.length>0){let s=_&&_.params&&_.params.data;_.params.data.commentData&&(s=_.params.data.commentData),s&&(Array.isArray(s)?s.fory,f)})):this._setAppearanceDataInCurrEventHelper(_,y,f)),delete _.currEventAppearanceData}}_sendMessageListToWorker(s,f){const _=[],y=f&&f.data&&f.data.currEvent;let S;const T=s&&s.data&&s.data.msgList;if(y?(this._setAppearanceDataInCurrEvent(y,_),S={value:y,next:T,priority:1}):S=T,!S)return;const E={command:"addMessages",params:{msgList:S},transferList:_};this.sendMessageToWorker(E)}_sendPluginPortsToWorker(){if(this.pluginPortsMap&&this.pluginPortsMap instanceof Map&&this.pluginPortsMap.size>0){const s=[];return this.pluginPortsMap.forEach(((f,_)=>{const y={command:ee,params:{port:f,pluginName:_},transferList:[f]};s.push(this.sendMessageToWorker(y))})),Promise.all(s).then((()=>{this.pluginPortsMap=null}))}return Promise.resolve()}}({sendMessageToWorker:s=>this.sendMessageToWorker(s),restartWorker:()=>this._restartWorker(),getOpenPdfMeage()}),this._wasmErrorHandler=new class{constructor(s){let{getPluginModesInfo:f,messageCallback:_,logError:y,switchToFullBuild:S,enableWasmExceptions:T,switchToNonLinearizedWorkflow:E}=s;this.getPluginModesInfo=f,this.switchToFullBuild=S,this.messageCallback=_,this.logError=y,this.enableWasmExceptions=T,this.switchToNonLinearizedWorkflow=E,this._errorTypesLogged=[],this._lastEventBeforeWasmSwitch=null}get lastEventBeforeWasmSwitch(){return this._lastEventBeforeWasmSnull}handleWasmError(s,f,_,y){if(this._logErrorData(s,f,_,y),this.enableWasmExceptions){var S;const f=null==s||null===(S=s.data)||void 0===S?void 0:S.currEvent;return _===ze.LINEARIZED?this.switchToNonLinearizedWorkflow(f):(this._sendCorruptFileError(f,s.errorCode),Promise.resolve())}return this._handleSwitchJS(s,f)}_sendCorruptFileError(s,f){if(s&&s.msgId){const _={error:"corruptFile",errorCode:f};this.messageCallback(s.msgId,_)}}_handleSwitchJS(s,f){var _;const y=null==s||null===(_=s.data)||void 0===_?void 0:_.currEvent;if(["FirstTimeSwitchJS","LinearizationSwitchJS"].includes(f))return this._lastEventBeforeWasmSwitch=y,this.switchToFullBuild(s);const S=this._lastEventBeforeWasmSwitch||y;return this._sendCorruptFileError(S,s.errorCode),Promise.resolve()}_logErrorData(s,f,_,y){const S=[],{activePluginModeInfo:T,pluginModesEntered:E}=this.getPluginModesInfo(),{activePluginMode:O,activePluginModeStartTime:M}=T;E.forEach(((s,f)=>{Srn s}({name:f},s))}));const q={ajsError:{activePluginMode:O,pluginModesEntered:S}};if(O&&M){const s=performance.now();q.ajsError.timeSpentInActivePluginMode=s-M}if(s&&s.data){const{currEvent:f,stackTrace:_,pdfUpdatesSoFar:S,memInfo:T}=s.data;f?q.ajsError.currEvent=f.command:y&&(q.ajsError.lastProcessedMessage=y.command),console.log(_),q.ajsError.stackTrace=_,q.ajsError.pdfUpdatesSoFar=S,q.ajsError.memInfo=T}if(s){const f=["errorCode","filename","lineno","colno"];((s,f,_)=>{const y=s;void 0!==f&&void 0!==y&&_.for]=_)}))})(q.ajsError,s,f),console.error("Exception: ".concat(q.ajsError.errorCode)),s.message&&(q.ajsError.errorMessage=s.message)}q.ajsError.type=f,this.enableWasmExceptions?(q.ajsError.workflow=_,this._errorTypesLogged.includes(q.ajsError.workflow)||(this.logError(q.ajsError),this._errorTypesLogged.push(q.ajsError.workflow))):this._errorTypesLogged.includes(q.ajsError.type)||(this.logError(q.ajsError),this._errorTypesLogged.push(q.ajsError.type))}}({getPluginModered}),messageCallback:(s,f)=>this._callMessageCallback(s,f),logr",s),switchToFullBuild:s=>this._switchToFullBuild(s),enableWasmExceptions:this.enableWasmExceptions,switchToNonLinearizedWorkflow:s=>this._switchToNonLinearizedWorkflowount}_isWasmSupportedOnBrowser(){let s=!0;return-1===navigator.userAgent.indexOf("OS 11_2")||-1===navigator.userAgent.indexOf("iPhone")&&-1===navigator.userAgent.indexOf("iPad")||(s=!1),self.WebAssembly&&"object"==typeof self.WebAssembly||(s=!1),((()=>{const s=et().name.toLowerCase();return"safari"===s||"mobile safari"===s})()&&tt(et().version)||(()=>{const s=(new ve.a).getOS();return s&&"iOS"===s.name&&tt(s.version)})())&&(s=!1),s}_createWorker(){if(this.workerCreator&&"function"==typeof this.workerCreator&&(this.worker=this.workerCreator()),!this.worker){const s=this.enableWasmExceptions?"acrobatProxy_we.js":"acrobatProxy.js";this.workerURL=kt(this.ajsWorkerPath,this.windowObj)?Pt(this.ajsWorkerPath,s):"".concat(this.ajsWorkerPath).concat(s),this.worker=new window.Worker(this.workerURL)}}init(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(((_,y)=>{if(this._initResolve=_,this._initReject=y,!this._isWasmSupportedOnBrowser()){const s={error:"WASM is not supported on this browser!"};return this._initReject(s)}this.signalDispatcher.trigger(Xe,{ajsInit:performance.now()}),this._createWorker(),this.worker.onmessage=this._onWorkerMessage.bind(this),this.worker.onerror=this._onWorkerError.bind(this);const S=this._wasmSwitchHandler.isSwitching(),T=this.enableWasmExceptions?"renderingWorker_we.js":"renderingWorker.js",E={command:"init",params:{useFullBuild:S||this.useFullBuild,enableLogging:this.enableLogging,totalMemory:s,t5Cache:Math.max(f,209715200),enableProgressiveRendering:this.enableProgressiveRendering,apiTrackingInfo:this.apiTrackingInfo,hostEnv:this.hostEnv,devicePixelRatio:window.devicePixelRatio,renderingWorkerPath:kt(this.ajsWorkerPath,this.windowObj)?Pt(this.ajsWorkerPath,T):"".concat(this.ajsWorkerPath).concat(T)}};this._ajsBinaryStartTime=performance.now(),this.signalDispatcher.trigger("ajsBinaryLoadStarted",{startTime:this._ajsBinaryStartTime,isFullBuild:S||this.useFullBuild}),this.worker.postMessage(E),this.enableProgressiveRendering&&this.createMsgChannelBwMainAndRenderingWorker()}))}createMsgChannelBwMainAndRenderingWorker(){const{port1:s,port2:f}=new MessageChannel;this.worker.postMessage({command:"transferPortToRenderingWorker",port:s},[s]),f.onmessage=this.worker.onmessage}registerPDFBufferFetcher(s){this.fetchPDFBufferRanges=s}setPDFBuffer(s){const f={command:"setPDFBuffer",params:{buffer:s}};this.signalDispatcher.trigger("completePDFBufferAvailable",{}),this._pdfBuffer=s,this.worker.postMessage(f)}tered")}terminateRenderingWorker(){const s={command:"terminateRenderingWorker"};return this.sendMessageToWorkh()}_restartWorker(){return this._terminateWorker(),this.worker=void 0,this.ild()}getUpdatedPDF(){const s={data:{buffer:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this._decryptedPdfBuffer:this._pdfBuffer}};return Promise.resolve(s)}_getOpenPdfMessage(){return{command:M,priority:1,params:{buffer:this._pdfBuffer,password:this._pdfPassword,includeActions:this._includeDocLevelActions,jsSAB:this._jsSAB}}}_cleanUpLinearizationWorkflow(){let s=Promise.resolve();return this._pdfBuffer||(s=this.fetchPDFBufferRanges([{start:0}]).then((s=>{const f=s[0];this.setPDFBuffer(f)}))),s.null}))}_isLinearizedWorkflow(){return this._linearizationInfo.pdfSize}_switchToNonLinearizedWorkflow(s){return this.sendMessageToWorker({command:"pauseMessageProcessing",params:{}}),this._cleanUpLinearizationWorkflow().then((()=>{const f=this._getOpenPdfMessage();f.params.switchingToNonLinearizedWorkflow=!0,this.sendMessageToWorker(f),this.sendMessageToWorker({command:"resumeMessageProcessing",params:{}}),(null==s?void 0:s.command)!==M&&this.sendMessageToWorker(s)}))}_switchToFullBuild(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._shouldSwitchToFullBuild()){At(this._jsSAB,!1);const f=this._isLinearizedWorkflow()?this._cleanUpLinearizationWorkflow():Promise.resolve();return this._wasmSwitchHandler.switchToFullBuild(f,s)}return Promise.resolve()}_onWasmError(s){let f="WASM_ERROR";this.enableWasmExceptions||(f="SecondTimeSwitchJS",this._shouldSwitchToFullBuild()&&(f=this._isLinearizedWorkflow()?"LinearizationSwitchJS":"FirstTimeSwitchJS"));const _=this._isLinearizedWorkflow()?ze.LINEARIZED:ze.NON_LINEARIZED;this._wasmErrorHandler.handleWasmError(s,f,_,this._lastMessage).then((()=>{["WASM_ERROR","SecondTimeSwitchJS"].includes(f)&&(this._postToWorker({command:"resumeMessageProcessing",params:{}}),At(this._jsSAB,!0))}))}sendMessageToWorker(s){let f=Promise.resolve();return pe.includes(s.command)&&(f=this.loadFullWorker()),f.then((()=>{if(s.command===M&&s.params){const{buffer:f,password:_,linearizationInfo:y,jsSAB:S,includeActions:T}=s.params;y?(this._linearizationInfo=y,this._int32PartialPDFSAB=new Int32Array(this._linearizationInfo.partialPDFSAB)):(this._pdfBuffer=f,this.signalDispatcher.trigger("completePDFBufferAvailable",{})),this._pdfPassword=_,this._includeDocLevelActions=T,this._jsSAB=S}if(s.command===te){const{certificateChainValidators:f}=s.params;this._digSigHandler=new Nt(f),delete s.params.certificateChainValidators}return new Promise(((f,_)=>{const y=s,S=performance.now();y.msgId||(y.msgId=this._getUpdatedMessageCount(),this._messageMap[y.msgId]=s=>{const T=performance.now()-S;let E={};s.error?(E=Xt(Xt({},s),{},{totalTime:T}),_(E)):(E=Xt(Xt({},s.data),{},{totalTime:T}),f(E)),Ye("msgId and TotalTime",y.msgId,T)}),this._postToWorker(y)}))}))}sendMessageToWorkerSynchronously(s){return new Promise(((f,_)=>{const y=s,S=performance.now();y.msgId||(y.msgId=this._getUpdatedMessageCount(),this._messageMap[y.msgId]=s=>{const T=performance.now()-S;let E={};s.error?(E=Xt(Xt({},s),{},{totalTime:T}),_(E)):(E=Xt(Xt({},s.data),{},{totalTime:T}),f(E)),Ye("msgId and TotalTime",y.msgId,T)}),this._postToWorker(y)}))}_trackMessage(s){null!=s&&s.msgId&&this.apiTrackingInfo.enabled&&this.apiTrackingInfo.trackList.includes(s.command)&&this._unsettledMessageList.push(s.msgId)}_postToWorker(s){const f=s;Ye("message to worker",f);const _=f.transferList||[];delete f.transferList,this._trackMessage(f),this.worker.postMessage(f,_)}_updatePluginInfo(s){const{activePluginMode:f,activePluginModeStartTime:_}=this.activePluginModeInfo,{activePluginMode:y}=s;let S=null;if(y&&(S=performance.now(),this.pluginModesEntered.has(y)||this.pluginModesEntered.set(y,{})),f&&_){const s=performance.now();this.pluginModesEntered.set(f,{timeSpent:s-_})}this.activePluginModeInfo={activePluginMode:y,activePluginModeStartTime:S}}_notifyBufferRanges(s,f){if(s.length!==f.length)this._int32PartialPDFSAB[0]=we.INCOMPLETE_BUFFER_RANGES_DOWNLOADED;else{let s,_,y=f.length;for(let S=0;S<f.length;S++){if(s=new Uint8Array(f[S]),this._int32PartialPDFSAB[S]=s.length,_=new Int32Array(s,0,s.length),this._int32PartialPDFSAB.length-y<_.length){this._int32PartialPDFSAB[0]=we.SAB_INDEX_OUT_OF_BOUNDS;break}this._int32PartialPDFSAB.set(_,y),y+=_.length}}Atomics.notify(this._int32PartialPDFSAB,0,1)}_handleFileData(s){let{fileDescription:f,fileId:_,fileData:y,fileDataMimeType:S}=s;if("annotData"===f)this._setAnnotData({annotId:_,annotData:y,annotDataMimeType:S})}getAnnotData(s){return this._annotDataClient.getAnnotData(s)}_setAnnotData(s){this._annotDataClient.setAnnotData(s)}getFTPDFWebViewHTMLStream(s,f){return this._ftpdfWebViewCache.getHTMLStream(s,f,this.sendMessageToWorker.bind(this))}_setFTPDFWebViewHTML(s,f,_){this._ftpdfWebViewCache.setHTML(s,_)}_notifyIfWorkerIdle(){this.currentPluginCount()||0!==this._unsettledMessageList.length||this.signalDispatcher.trigger("workerIdlef,1)}_onWorkerMessage(s){const{data:f}=s;if(Ye("message from worker",f),"proxyInitDone"===f.message)this.signalDispatcher.trigger(Xe,{proxyInitTime:R(f.proxyInitTime)});else if("fileData"===f.message)this._handleFileData(f);else if("init"===f.command){if(!f.isInitialized)return this._initReject({error:f.error});this.signalDispatcher.trigger(Xe,{ajsLoaded:performance.now()}),this._initResolve()}else if("wasmInitTime"===f.command){this.signalDispatcher.trigger("ajsBinaryTotalTime",{ajsBinaryTotalTime:performance.now()-this._ajsBinaryStartTime});const{importScriptStartTime:s,importScriptEndTime:_,wasmInitTime:y,wasmLoadStartTime:S,wasmLoadEndTime:T}=f;this.signalDispatcher.trigger(Xe,{wasmLoadStartTime:R(S),wasmLoadEndTime:R(T),wasmInitTime:R(y),wasmjsImportStartTime:R(s),wasmjsImportEndTime:R(_)})}else if("generateGlyphBitmap"===f.command){const{resolveId:s,params:_}=f,{fontInfo:y,chars:S}=_,E=T.generateGlyphBitmap(S,y),{matrix:O}=y;this.signalDispatcher.trigger("unembeddedFontsDetected",{chars:S,fontName:O.fontName});const M={command:"missingFontBitmaps",params:{missingTextData:E,resolveId:s}};this._postToWorker(M)}else if("updatePDFBuffer"===f.command)f.pdfBuffer&&(f.decryptedBuffer?this._decryptedPdfBuffer=f.pdfBuffer:this._pdfBuffer=f.pdfBuffer);else if("fetchPDFBufferRanges"===f.command)if(this._pdfBuffer){Ye("fetchPDFBufferRanges: full pdf available");const s=f.ranges.map((s=>this._pdfBuffer.slice(s.start,Math.min(s.end+1,this._pdfBuffer.byteLength))));this._notifyBufferRanges(f.ranges,s)}else this.fetchPDFBufferRanges(f.ranges).es,s)));else if("fetchCNFTPDFUpdates"===f.command)this._ftpdfWebViewCache.fetchCNFTPDFUpdates(f);else if("liquidModePerfMarker"===f.command)this._ftpdfWebViewCache.recordPerfMarker(f);else if("setFTPDFWebViewHTML"===f.command){const{html:s,translationStatus:_rn S}(f,["html","translationStatus"]);this._setFTPDFWebViewHTML(s,_,y)}else if("setFTPDFWebViewResource"===f.command){const{resourceURL:s,resourceContent:_,resourceMimeType:y}=f;this._setFTPDFWebViewResource(s,_,y)}else if(f.command===te)this._digSigHandler&&this._digSigHandler.responseHandler(s,this._callMessageCallback.bind(this));else if(f.lastProcessedMessage)this._lastMessage=f.lastProcessedMessage;else if(Object.prototype.hasOwnProperty.call(f,"activePluginMode")&&"string"==typeof f.activePluginMode)this._updatePluginInfo(f);else if("trackingEvent"===f.command)this.signalDispatcher.trigger(f.eventName,f.data);else if("trackDeletedMessages"===f.command)this._settleMessages(f.deletedMessagesList);else{"openPDF"===f.command&&this._pdfBuffer&&At(this._jsSAB,!0);const{msgId:_,error:y}=f;if(void 0!==_)if("WASM_ERROR"===y)this._onWasmError(f);else{let S;S=y?Xt(Xt({},f),{},{error:f.err_code||y}):s,this._callMessageCallback(_,S)}}}_settleMessages(s){this._unsettledMessageList.length&&(s.forEach((s=>{this._removeUnsettledMessage(s)})),setTimle()}),10)),s.forap[s]))}_callMessageCallback(s,f){const{lastEventBeforeWasmSwitch:_}=this._wasmErrorHandler;_&&s===_.msgId&&this._wasmErrorHandler.resetLastEventBeforeWasmSwitch();const y=this._messageMap[s];x(y)&&y(f),this._settleMessagesr(s)}};const Qe={ZOOM_LEVEL_CHANGE:"zoomLevelChange",HC_THEME_CHANGE:"highContrastThemeChange"},rt=(Object.freeze({invalid:0,openPDF:1,getPageRendition:2,getPageRangeGeometry:3,extractPageText:4,selectText:5,hitTest:6,getSelectedText:7,getBookmarks:8,getDataFromNamesTree:9,getAttachments:10,getAttachmentBuffer:11,getHyperlinkData:12,findText:13,getAnnotAppearance:14,createAnnot:15,editAnnot:16,deleteAnnot:17,getAnnots:18,getVoiceAnnotData:19,registerLicense:20,getDocumentXMPMetadata:21,editWillBegin:22,editDidEnd:23,processAction:24,editOperationBegin:25,editOperationDone:26,getPageFontList:27,saveChangesToPDF:28,setLinearizedBlockSize:29,getFASFields:30,createFASField:31,deleteFASField:32,updateFASField:33,flattenFASFields:34,getFASFieldAppearance:35,createAnnots:36,deleteAnnots:37,translateToLiquidModeView:38,applyCNFTPDFUpdates:39,getHtmlLocationForDocPoint:40,getDocPointForHtmlLocation:41,JSApi:42,createFormField:43,createFormFields:44,updateFormField:45,deleteFormField:46,deleteFormFields:47,getFormFields:48,updateSignMetadata:49,getSignMetadata:50,lockFormFields:51,createLinkAnnot:52,getLinkAnnots:53,editLinkAnnot:54,deleteLinkAnnot:55,deleteLinkAnnots:56,addIcon:57,updateDocInfo:58,updateFormFields:59,detectSignFields:60,verifyDigitalSignatures:61,editLinkAnnots:62,isFileQualifiedForLiquidMode:63,removeOffScreenCanvas:64,terminateRenderingWorker:65,detectLanguage:66,getPagesScanStatus:67}),Object.freeze({kNoError:0,kZeroByteFile:1,kPDFDownloadingError:2,kIncorrectPassword:3,kLinearizationDictNotFound:4,kUnknownError:5}),Object.freeze({NO_CONTENT:0,TEXT:1,HYPERLINK:2,INVALID:3,IMAGE:4,PATH:5}),Object.freeze({kNoDirection:0,kForwardArrow:1,kBackwardArrow:2,kUpArrow:3,kDownArrow:4})),nt=Object.freeze({kNoShortcut:0,kLineBegin:1,kLineEnd:2}),it=Object.freeze({NORMAL:1,RELAXED:2,DISABLE,s}class ar{constructor(s){let{ajsPath:f="",enableLogging:y=!1,useFullBuild:S=!1,enableWasmExceptions:T=!1,workerCreator:E,windowObj:O=window,enableProgressiveRendering:M=!1,apiTrackingInfo:q={enabled:!1,trackList:[]},hostEnv:ee}=s;const te=Array.isArray(q.trackList);Object.assign(this,{ajsPath:f,useFullBuild:S,enableWasmExceptions:T,enableLogging:y,workerCreator:E,windowObj:O,enableProgressiveRendering:M,apiTrackingInfo:{enabled:q.enabled&&te,trackList:te?q.trackList:[]},hostEnv:ee}),this._signalDispatcher=new class{constructor(){this._re1)}getAllListeners(){return this.commonListeners}trigger(){for(var s=arguments.length,f=new Array(s),_=0;_<s;_++)f[_]=arguments[_];this.commonListeners.forEach((s=>s(...f,"ajet()}},this._pluginsMap=new Map,this.ajsWorkerInitPromise=null,this._canvasMap=new Map,this._isRenderingWorkerPresent=!1,e(s)}_attachAllListenersToPlugin(s){this._signalDispatcher.getAllListeners().for(f,s)))}_attachListenerToAllPlugins(s){this._pluginsMap.for(s,_)))}_removeAllListenersFromPlugin(s){const f=this._getPlugin(s);f&&this._signalDispatcher.getAllListeners().forEach(f.unsubscize}_checkPluginDoesNotExist(s){let{name:f}=s;return new Promise(((s,_)=>{this._getPlugin(f)&&_(new Error("Plugin ".concat(f," already exists"))),s()}))}_checkApisDontExist(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(((f,_)=>{const y=s.fiis[s]));y.length&&_(new Error("Following apis already exist: ".concat(y.join(",")))),fnull}_sendCoreApisToPlugin(s){const f=this._getPlugin(s);f&&f.setCoreApis(this._getExposedApis(f.requestedApiList))}_getExposedApis(){const s={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((f=>{this[f]&&(s[f]=Promise.resolve(this[f].bind(this)))})),s}_populateSupportedPluginApis(s){let{name:f}=s;const _=this._getPlugin(f);_.supportedApiList.ford(_)}))}_removeSupportedPluginApis(s){let{name:f}=s;const _=this._getPlugin(f);_&&_.supportedApiList.fors[s]}))}_createMessageChannel(s,f){const{port1:_,port2:y}=new MessageChannel;return Promise.all([this._transferPortToPlugin(_,s),this._transferPortToT5(y,f)])}_transferPortToPlugin(s,f){const _={params:{port:s},transferList:[s]};return f.addMessagePort(_)}_transferPortToT5(s,f){const _={command:ee,params:{port:s,pluginName:f},transferList:[s]};return this._ajsWorker.sendMessageToWorker(_)}_removePluginPortFromT5(s){const f={command:"removeMessagePort",params:{pluginName:s}};return this._ajsWorker.sendMessageToWorker(f)}_createBatchOfMessagesAndSendToWorker(s,f,_,y){const S=[],T=[];f.forEach(((s,y)=>{const E={command:_,params:ir(ir({},s),{},{shouldUpdatePDFBuffer:y===f.length-1})};if(S.push(E),s&&s.data&&s.data.appearanceData&&s.data.appearanceData.buffer){const f=s.data.appearanceData.buffer;T.push(f.buffer)}}));const E={command:s,priority:y,params:{data:S},processingMode:Ue.BATCHED,transferList:T};return this._ajsWorker.sendMessageToWorkll()}init(){const{ajsPath:s,useFullBuild:f,enableWasmExceptions:_,enableLogging:y,workerCreator:S,windowObj:T,enableProgressiveRendering:E,hostEnv:O}=this;return ge=y,this._ajsWorker=new Ze({ajsWorkerPath:"".concat(s,"build/"),useFullBuild:f,enableWasmExceptions:_,enableLogging:y,workerCreator:S,signalDispatcher:this._signalDispatcher,currentPluginCount:this._currentPluginCount.bind(this),windowObj:T,enableProgressiveRendering:E,apiTrackingInfo:this.apiTrackingInfo,hostEnv:O}),this._isRenderingWorkerPresent=E||!1,this.ajsWorkerInitPromise=this._ajsWorker.init(),this.ajsWorkerInitPromise}registerPlugin(s){const{plugin:f,name:_,autoLoad:y}=s;return this._checkPluginDoesNotExist(s).List))).then((()=>{if(this._pluginsMap.set(_,f),this._populateSupportedPluginApis(s),this._attachAllListenersToPlugin(_),this._sendCoreApisToPlugin(_),y)return this.loadPlugin(s)}))}deregisterPlugin(s){const{name:f}=s;return this.unloadPlugin(s).then((()=>{this._removeSupportedPluginApis({name:f}),this._pluginsMap.delete(f),this._removeAllListenersFromPlugin(f)}))}loadPlugin(s){const{name:f}=s,_=this._getPlugin(f);if(_){const s=_.load();return _.isSeparateWorker?Promise.all([s,this.ajsWorkerInitPromise]).then((s=>this._createMessageChannel(_,f).>s[0])))):s}return Promise.reject(new Error("Plugin ".concat(f," does not exist")))}unloadPlugin(s){const{name:f}=s,_=this._getPlugin(f);return _?(_.isSeparateWorker&&this._removePluginPortFromT5(f),_.unload()):Promise.resot:[]}terminate(){return new Promise((s=>{this._isRenderingWorkerPresent?this._ajsWorker.terminateRenderingWorker().fin,s()})):(this._terminateWorker(),s())}))}subscribe(s){this._signalDispatcher.subscribe(s),this._attachListenerToAllPlugis(s)}registerLicense(s,f){let{token:_,domain:y}=s;const S={command:O,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,viewState:f,params:{token:_,domain:y}};return this._ajsWorker.sendMessageToWorker(S)}openPDF(s,f){let{buffer:_,password:y="",documentId:S,includeActions:T=!1,jsSAB:E=null,securityHandler:O=null}=s,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!this._isValidArrayBuffer(_))return Promise.reject({error:be.INVALID_BUFFER});this._signalDispatcher.trigger("openPDFCalled",{}),this._canvasMap.clear();const ee={command:M,priority:q,viewState:f,params:{buffer:_,password:y,documentId:S,includeActions:T,jsSAB:E}};return this._ajsWorker.sendMessageToWorker(ee).then((s=>s.data.errorCode===we.INCORRECT_PASSWORD&&O&&x(O.fetchPassword)?O.fetchPassword().then((s=>{const y={buffer:_,password:s,documentId:S,includeActions:T,jsSAB:E,securityHandler:O};return this.openPDF(y,f,q)})):(this._prepareTransformationMatrices(s),Promise.resolve(s))))}setLinearizedBlockSize(){const s={command:"setLinearizedBlockSize",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,viewState:arguments.length>1?arguments[1]:void 0,params:{blockSize:arguments.length>0&&void 0!==arguments[0]?arguments[0]:65536}};return this._ajsWorker.sendMessageToWorker(s)}openLinearizedPDF(s,f){let{buffer:_,password:y="",fetchPDFBufferRanges:S,pdfSize:T,documentId:E,includeActions:O=!1,blockSize:q=65536}=s,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return void 0===self.SharedArrayBuffer?Promise.reject({error:be.SHARED_ARRAY_BUFFER_NOT_SUPPORTED}):S([{start:0,end:1024}]).then((s=>{const te=4*T+1024,re=s[0],ne=new SharedArrayBuffer(te),ie={command:M,priority:ee,viewState:f,params:{buffer:_,password:y,linearizationInfo:{initialBuffer:re,pdfSize:T,partialPDFSAB:ne,blockSize:q},documentId:E,includeActions:O}};return this._ajsWorker.registerPDFBufferFetcher(S),this._ajsWorker.sendMessageToWorker(ie)})).then((s=>s.data.errorCode===we.INCORRECT_PASSWORD?Promise.reject({error:be.PASSWORD_PROTECTED_PDF_NOT_SUPPORTED_IN_LINEARIZED_WORKFLOW}):s.data.errorCode===we.LINEARIZATION_DICT_NOT_FOUND?Promise.reject({error:be.LINEARIZATION_DICT_NOT_FOUND}):(this._prepareTransformationMatrices(s),S([{start:0}]).then((s=>{const f=s[0];f.byteLength>T?this._ajsWorker.loadFullWorker():this._ajsWorker.setPDFBuffer(f)}))er()}getPageRangeGeometry(s,f){let{startPageNum:_,endPageNum:y,forceCacheless:S=!1}=s;const T={command:"getPageRangeGeometry",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,viewState:f,params:{startPageNum:_,endPageNum:y,forceCacheless:S}};return this._ajsWorker.sendMessageToWorker(T)}_isValidRGBArr(s){return s&&Array.isArray(s)&&3===s.length}_validateColorPalette(s){return!!s&&this._isValidRGBArr(s[We.BACKGROUND])&&this._isValidRGBArr(s[We.TEXT])}getPageRendition(s,f){let{pageNum:_,zoomLevel:y,renderRect:S,devicePixelRatio:T=window.devicePixelRatio,requestType:E,showAnnots:O=Pe.ALL,tileRect:M,timeLimit:ee,maxRenderInterval:te,renderIntervalMultiplier:re,hiddenOCGs:ne=[],colorPallete:ie,includeActions:se=!1,mimeType:oe,enableOverprintSupport:ae=!1,canvas:ce,canvasId:ue}=s,le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!_||_<0){const s={command:q,data:{status:"failed",error:be.INVALID_PAGE_NUM}};return Promise.resolve(s)}const de=new Uint32Array(1);de[0]=O;const he=ir(ir({zoomLevel:y,renderRect:S,devicePixelRatio:T,pageNum:_,showAnnots:de[0],tileRect:M,requestType:E,timeLimit:ee,maxRenderInterval:te,renderIntervalMultiplier:re,hiddenOCGs:ne,includeActions:se,mimeType:oe,enableOverprintSupport:ae},this._validateColorPalette(ie)&&{colorPallete:ie}),{},{isCanvasDrawing:!1});let fe=[];if(ce&&this._isRenderingWorkerPresent&&(he.canvasId=ue,he.isCanvasDrawing=!0,!this._canvasMap.has(ue))){const s=ce.transferControlToOffscreen();he.canvas=s,fe=[s],this._canvasMap.set(ue,!0)}const pe={command:q,priority:le,viewState:f,params:he,transferList:fe};return this._ajsWorker.sendMessageToWorker(pe)}hitTest(s,f){let{pageNum:_,x:y,y:S,shouldDetectWeblinks:T=!0}=s;const E={command:"hitTest",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,viewState:f,params:{pageNum:_,x:y,y:S,shouldDetectWeblinks:T}};return this._ajsWorker.sendMessageToWorker(E)}selectText(s,f){let{startPoint:_,endPoint:y,direction:S,snapToWords:T,jumpTo:E=nt.kNoShortcut,force:O=!1,getCaret:M=!1}=s;const q={command:"selectText",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,viewState:f,params:{startPoint:_,endPoint:y,direction:S,snapToWords:T,jumpTo:E,force:O,getCaret:M}};return this._ajsWorker.sendMessageToWorker(q)}getDocumentXMPMetadata(s,f){let{}=s;const _={command:"getDocumentXMPMetadata",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,viewState:f,params:{}};return this._ajsWorker.sendMessageToWorker(_)}getAttachments(s,f){let{}=s;const _={command:"getAttachments",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,viewState:f,params:{}};return this._ajsWorker.sendMessageToWorker(_)}getBookmarks(s,f){let{}=s;const _={command:"getBookmarks",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,viewState:f,params:{}};return this._ajsWorker.sendMessageToWorker(_)}getDataFromNamesTree(s,f){const _={command:"getDataFromNamesTree",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,viewState:f,params:s};return this._ajsWorker.sendMessageToWorker(_)}getAttachmentBuffer(s,f){let{name:_}=s;const y={command:"getAttachmentBuffer",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,viewState:f,params:{name:_}};return this._ajsWorker.sendMessageToWorker(y)}getSelectedText(s,f){let{}=s;const _={command:"getSelectedText",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,viewState:f,params:{}};return this._ajsWorker.sendMessageToWorker(_)}getHyperlinkData(s,f){let{pageNum:_,x:y,y:S,shouldDetectWeblinks:T=!0}=s;const E={command:"getHyperlinkData",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,viewState:f,params:{x:y,y:S,pageNum:_,shouldDetectWeblinks:T}};return this._ajsWorker.sendMessageToWorker(E)}findText(s,f){let{text:_,startPage:y,numPages:S}=s;const T={command:"findText",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,viewState:f,params:{text:_,startPage:y,numPages:S}};return this._ajsWorker.sendMessageToWorker(T)}extractPageText(s,f){let{pageNum:_,getWordRects:y=!1,getTextAttributes:S=!1,getFormFieldData:T=!1,getCharRects:E=!1}=s;const O={command:"extractPageText",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,viewState:f,params:{pageNum:_,getWordRects:y,getTextAttributes:S,getFormFieldData:T,getCharRects:E}};return this._ajsWorker.sendMessageToWorker(O)}getAnnots(s,f){let{pageNum:_,annotsFilter:y,includeActions:S=!1}=s;const T={command:"getAnnots",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,annotsFilter:y,includeActions:S}};return this._ajsWorker.sendMessageToWorker(T)}createAnnot(s,f){let{data:_}=s;const y={command:"createAnnot",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{data:_}};return this._ajsWorker.sendMessageToWorker(y)}updateSignMetadata(s,f){let{data:_}=s;const y={command:"updateSignMetadata",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{data:_}};return this._ajsWorker.sendMessageToWorker(y)}getSignMetadata(s,f){let{}=s;const _={command:"getSignMetadata",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{}};return this._ajsWorker.sendMessageToWorker(_)}createFormField(s,f){let{data:_}=s;const y={command:re,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{data:_}};return this._ajsWorker.sendMessageToWorker(y)}createFormFields(s){let{fields:f}=s,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return this._createBatchOfMessagesAndSendToWorker("createFormFields",f,re,_)}updateFormField(s,f){let{pageNum:_,id:y,data:S,authoringMode:T=!1}=s;const O={command:ne,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y,data:S,authoringMode:T}};return this._ajsWorker.sendMessageToWorker(O)}addIcon(s){let{iconName:f,newIconName:_}=s;const y={command:"addIcon",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,params:{newIconName:_,iconName:f}};return this._ajsWorker.sendMessageToWorker(y)}updateFormFields(s){let{fields:f}=s,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return this._createBatchOfMessagesAndSendToWorker("updateFormFields",f,ne,_)}deleteFormField(s,f){let{pageNum:_,id:y}=s;const S={command:ie,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y}};return this._ajsWorker.sendMessageToWorker(S)}deleteFormFields(s){let{fields:f}=s,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return this._createBatchOfMessagesAndSendToWorker("deleteFormFields",f,ie,_)}getFormFields(s,f){let{pageNum:_,includeActions:y=!1,includeSignData:S=!1}=s;const T={command:"getFormFields",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,includeActions:y,includeSignData:S}};return this._ajsWorker.sendMessageToWorker(T)}lockFormFields(s,f){let{}=s;const _={command:"lockFormFields",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{}};return this._ajsWorker.sendMessageToWorker(_)}createAnnots(s,f){let{data:_}=s;const y={command:"createAnnots",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{data:_}};return this._ajsWorker.sendMessageToWorker(y)}editAnnot(s,f){let{pageNum:_,id:y,data:S}=s;const T={command:"editAnnot",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y,data:S}};return this._ajsWorker.sendMessageToWorker(T)}deleteAnnot(s,f){let{pageNum:_,id:y}=s;const S={command:"deleteAnnot",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y}};return this._ajsWorker.sendMessageToWorker(S)}deleteAnnots(s,f){let{data:_}=s;const y={command:"deleteAnnots",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{data:_}};return this._ajsWorker.sendMessageToWorker(y)}getAnnotAppearance(s,f){let{pageNum:_,id:y,zoomLevel:S,devicePixelRatio:T,appearanceSubDict:O,appearanceState:M,colorPallete:q,ignoreDisplayFlags:ee=!1,enableOverprintSupport:te=!1}=s;const re={command:"getAnnotAppearance",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:ir(ir({pageNum:_,id:y,zoomLevel:S,devicePixelRatio:T,appearanceSubDict:O,appearanceState:M},this._validateColorPalette(q)&&{colorPallete:q}),{},{ignoreDisplayFlags:ee,enableOverprintSupport:te})};return this._ajsWorker.sendMessageToWorker(re)}getVoiceAnnotData(s,f){let{pageNum:_,annotId:y}=s;const S={command:"getVoiceAnnotData",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,annotId:y}};return this._ajsWorker.getAnnotData(S)}JSApi(s){let{params:f}=s;const _={command:de,priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,params:f};return f.addResultToSAB?this._ajsWorker.sendMessageToWorkerSynchronously(_):this._ajsWorker.sendMessageToWorker(_)}updateDocInfo(s){let{data:f}=s;const _={command:"updateDocInfo",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,params:{data:f}};return this._ajsWorker.sendMessageToWorker(_)}verifyDigitalSignatures(s,f){let{certificateChainValidators:_=[]}=s;const y={command:te,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,viewState:f,params:{certificateChainValidators:_}};return this._ajsWorker.sendMessageToWorker(y)}getFASFieldAppearance(s,f){let{pageNum:_,id:y,zoomLevel:S,enableOverprintSupport:T=!1}=s;const O={command:"getFASFieldAppearance",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y,zoomLevel:S,enableOverprintSupport:T}};return this._ajsWorker.sendMessageToWorker(O)}getFASFields(s){let{pageNum:f}=s;const _={command:"getFASFields",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,params:{pageNum:f}};return this._ajsWorker.sendMessageToWorker(_)}createFASField(s){let{pageNum:f,data:_}=s;const y={command:"createFASField",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,params:{pageNum:f,data:_}};return this._ajsWorker.sendMessageToWorker(y)}deleteFASField(s){let{pageNum:f,id:_}=s;const y={command:"deleteFASField",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,params:{pageNum:f,id:_}};return this._ajsWorker.sendMessageToWorker(y)}updateFASField(s){let{pageNum:f,id:_,data:y}=s;const S={command:"updateFASField",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,params:{pageNum:f,id:_,data:y}};return this._ajsWorker.sendMessageToWorker(S)}getPagesScanStatus(s,f){let{startPageIndex:_,endPageIndex:y,ocrType:S}=s;const T={command:"getPagesScanStatus",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,params:{startPageIndex:_,endPageIndex:y,ocrType:S}};return this._ajsWorker.sendMessageToWorker(T)}flattenFASFields(s){let{forceFlatten:f}=s;const _={command:"flattenFASFields",priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,params:{forceFlatten:f}};return this._ajsWorker.sendMessageToWorker(_)}detectSignFields(s,f){let{startPage:_,numPages:y,detectAll:S=!1,enableLogging:T=!1}=s;const E={command:"detectSignFields",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,viewState:f,params:{startPage:_,numPages:y,detectAll:S,enableLogging:T}};return this._ajsWorker.sendMessageToWorker(E)}getUpdatedBuffer(){let{decryptedBuffer:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const f=performance.now();return Promise.all(Array.from(this._pluginsMap.values()).map((s=>s.doPreSaveOperations?s.doPreSaveOperations():Promise.resolve({saveRequired:!1})))).then((_=>{const y=performance.now();if(window.TIME_TAKEN_IN_PRE_SAVE_OPS=y-f,-1!==_.findIuired))||s){const _={command:"saveChangesToPDF",priority:20,params:{decryptedBuffer:s}};return this._ajsWorker.sendMessageToWorker(_).then((()=>{const _=performance.now();return window.TOTAL_TIME_TAKEN_IN_SAVE=_-f,this._ajsWorker.getUpdatedPDF(s)}))}return this._ajsWorker.getUpdatedPDF()}))}getPageFontList(s,f){let{pageNum:_}=s;const y={command:"getPageFontList",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,viewState:f,params:{pageNum:_}};return this._ajsWorker.sendMessageToWorker(y)}addFontForViewing(s,f){let{name:_,type:y,buffer:S}=s,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;const E=ArrayBuffer.isView(S)?S.buffer:S;if(!this._isValidArrayBuffer(E))return Promise.reject({error:be.INVALID_BUFFER});const O={command:"addFontForViewing",viewState:f,priority:T,params:{name:_,type:y,buffer:E},transferList:[E]};return this._ajsWorker.sendMessageToWorker(O)}isFileQualifiedForLiquidMode(s,f){let{disqualificationMethod:_=it.NORMAL,detectBarcodesCallback:y}=s;const S={command:se,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,viewState:f,params:{disqualificationMethod:_,detectBarcodesCallback:y}};return this._ajsWorker.sendMessageToWorker(S)}translateToLiquidModeView(s,f){let{fetchCNFTPDFUpdatesCallback:_,convertType1Fonts:y=!0}=s;const S={command:oe,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,viewState:f,params:{convertType1Fonts:y}};return this._ajsWorker.getFTPDFWebViewHTMLStream(S,_)}getLiquidModeViewResource(s){let{resourceID:f,resourceURL:_}=s;const y={command:ae,params:{resourceID:f,resourceURL:_}};return this._ajsWorker.getLiquidModeViewResource(y)}getHtmlLocationForDocPoint(s,f){let{page:_,x:y,y:S}=s;const T={command:ue,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,viewState:f,params:{page:_,x:y,y:S}};return this._ajsWorker.sendMessageToWorker(T)}getDocPointForHtmlLocation(s,f){let{elementID:_,offset:y}=s;const S={command:le,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,viewState:f,params:{elementID:_,offset:y}};return this._ajsWorker.sendMessageToWorker(S)}convertToViewSpace(s){let{pageNum:f,x:_,y,scale:S=1}=s;if(!this._pageMatrices||0===this._pageMatrices.length)return;const T=this._pageMatrices[f-1]?this._pageMatrices[f-1]:this._pageMatrices[0];let E=T.a*_+T.c*y+T.e,O=T.b*_+T.d*y+T.f;return E=Math.round(E*S),O=Math.round(O*S),{x:E,y:O}}convertToPDFSpace(s){let{pageNum:f,x:_,y,scale:S=1}=s;if(!this._pageMatrices||0===this._pageMatrices.length)return;const T=this._pageMatrices[f-1]?this._pageMatrices[f-1]:this._pageMatrices[0],E=_/S,O=y/S,M=T.a*T.d-T.b*T.c;return{x:(T.d*E-T.c*O+T.c*T.f-T.d*T.e)/M,y:(T.a*O-T.b*E+T.b*T.e-T.a*T.f)/M}}clearMessageQueue(s){let{evtName:f}=s,_=function rr(s,f){if(null==s)return{};var _,y,S=function(s,f){if(null==s)return{};var _,y,S={},T=Object.keys(s);for(y=0;y<T.length;y++)_=T[y],f.indexOf(_)>=0||(S[_]=s[_]);return S}(s,f);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(s);for(y=0;y<T.length;y++)_=T[y],f.indexOf(_)>=0||Object.prototype.propertyIsEnumerable.call(s,_)&&(S[_]=s[_])}return S}(s,["evtName"]);if(!Object.values(Qe).includes(f))return Promise.reject();const y={command:"clearMessageQueue",params:ir({evtName:f},_)};return this._ajsWorker.sendMessageToWorker(y)}createLinkAnnot(s,f){let{pageNum:_,data:y}=s;const S={command:"createLinkAnnot",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,data:y}};return this._ajsWorker.sendMessageToWorker(S)}editLinkAnnot(s,f){let{pageNum:_,id:y,data:S}=s;const T={command:he,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y,data:S}};return this._ajsWorker.sendMessageToWorker(T)}editLinkAnnots(s){let{links:f}=s,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return this._createBatchOfMessagesAndSendToWorker("editLinkAnnots",f,he,_)}deleteLinkAnnot(s,f){let{pageNum:_,id:y}=s;const S={command:fe,priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,id:y}};return this._ajsWorker.sendMessageToWorker(S)}deleteLinkAnnots(s){let{links:f}=s,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return this._createBatchOfMessagesAndSendToWorker("deleteLinkAnnots",f,ffer}getLinkAnnots(s,f){let{pageNum:_,includeActions:y=!0,includeSignData:S=!1}=s;const T={command:"getLinkAnnots",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,viewState:f,params:{pageNum:_,includeActions:y,includeSignData:S}};return this._ajsWorker.sendMessageToWorker(T)}detectLanguage(s,f){let{text:_="",useDocAsFallback:y=!0}=s;const S={command:"detectLanguage",priority:arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,viewState:f,params:{text:_,useDocAsFallback:y}};return this._ajsWorker.sendMessageToWorker(S)}removeOffScreenCanvas(s){let{canvasId:f}=s;const _={command:"removeOffScreenCanvas",params:{canvasId:f}};return this._canvasMap.delete(f),this._ajsWorker.sendMessageToWorker(_)}_prepareTransformationMatrices(s){s.data&&s.data.pages&&(this._pageMatrices=[],s.data.pages.forEach((s=>{const[f,_,y,S]=s.boxes.cropBox;let T;switch(s.rotation){case 270:T={a:0,b:-1,c:-1,d:0,e:S,f:y};break;case 180:T={a:-1,b:0,c:0,d:1,e:y,f:-_};break;case 90:T={a:0,b:1,c:1,d:0,e:-_,f:-f};break;default:T={a:1,b:0,c:0,d:-1,e:-f,f:S}}this._pageMatrices.push(T)})))}}Object.defineProperty(ar,"PageRequestType",{value:ye,writable:!1}),Object.defineProperty(ar,"AnnotType",{value:Pe,writable:!1}),Object.defineProperty(ar,"Permissions",{value:Ce,writable:!1}),Object.defineProperty(ar,"ContentType",{value:Ne,writable:!1}),Object.defineProperty(ar,"KeyboardNavigationDirection",{value:rt,writable:!1}),Object.defineProperty(ar,"KeyboardNavigationShortcut",{value:nt,writable:!1});var ")}}}])},uY7Q:(s,f,_)=>{s=_.nmd(s);var y="__lodash_hash_undefined__",S=9007199254740991,T="[object Arguments]",E="[object AsyncFunction]",O="[object Function]",M="[object GeneratorFunction]",q="[object Null]",ee="[object Object]",te="[object Proxy]",re="[object Undefined]",ne=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,se={};se["[object Float32Array]"]=se["[object Float64Array]"]=se["[object Int8Array]"]=se["[object Int16Array]"]=se["[object Int32Array]"]=se["[object Uint8Array]"]=se["[object Uint8ClampedArray]"]=se["[object Uint16Array]"]=se["[object Uint32Array]"]=!0,se[T]=se["[object Array]"]=se["[object ArrayBuffer]"]=se["[object Boolean]"]=se["[object DataView]"]=se["[object Date]"]=se["[object Error]"]=se[O]=se["[object Map]"]=se["[object Number]"]=se[ee]=se["[object RegExp]"]=se["[object Set]"]=se["[object String]"]=se["[object WeakMap]"]=!1;var oe="object"==typeof _.g&&_.g&&_.g.Object===Object&&_.g,ae="object"==typeof self&&self&&self.Object===Object&&self,ce=oe||ae||Function("return this")(),ue=f&&!f.nodeType&&f,le=ue&&s&&!s.nodeType&&s,de=le&&le.exports===ue,he=de&&oe.proces){}}(),pe=fe&&fe.isTypedArray;var ge,me=Array.prototype,ve=Function.prototype,we=Object.prototype,be=ce["__core-js_shared__"],ye=ve.toString,Pe=we.hasOwnProperty,Ce=(ge=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+ge:"",Ne=we.toString,We=ye.call(Object),Be=RegExp("^"+ye.call(Pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=de?ce.Buffer:void 0,qe=ce.Symbol,ze=ce.Uint8Array,Ge=Ue?Ue.allocUnsafe:void_))}}(Object.getPrototypeOf,Object),Ve=Object.create,Je=we.propertyIsEnumerable,$e=me.splice,Ke=qe?qe.toStringTag:voids){}}(),Ze=Ue?Ue.isBuffer:void 0,Qe=Math.max,rt=Date.now,nt=getNative(ce,"Map"),it=getNative(Object,"create0,f}}();function Hash(s){var f=-1,_=null==s?0:s.length;for(this.clear();++f<_;){var y=s[f];this.set(y[0],y[1])}}function ListCache(s){var f=-1,_=null==s?0:s.length;for(this.clear();++f<_;){var y=s[f];this.set(y[0],yash.prototype.ze=0},Hash.prototype.d:0,f},Hash.prototypid 0},Hash.prototypf,s)},Hash.prototypthis},ListCache.prototype.ze=0},ListCache.prototype.d,!0)},ListCache.prototyp][1]},ListCache.prototyp)>-1},ListCache.prototypthis},MapCache.prototype.ash}},MapCache.prototype.d:0,f},MapCache.prototype.get=function mapCacheGet(s){return getMapData(this,s).get(s)},MapCache.prototyps(s)},MapCache.prototypthis},Stack.prototype.ze=0},Stack.prototype.dze,_},Stack.prototype.get=function stackGet(s){return this.__data__.get(s)},Stack.prototyps(s)},Stack.prototypthis};vn r _}:idenf!=f}var ct=baseIsArguments(function(){return arguments}())?baseIsArguee")},ut=Array.isn(s)}var ls}var (f)}n(s)}vff,rn s}s.exports=ht},"6Wbc":(s,f,_)=>{"use strict";_.d(f,{IH:()=>E,Mq:()=>T,Sg:()=>O,U_:()=>y,n5:()=>M,zI:()=>S});const y=5,S=Object.freeze({CACHED:0,ACTIVE:1,IDLE:2}),T=new Set([]),E=new Set(["organizeWillBegin","insertPages","insertBlankPage","deletePages","reorderPages","rotatePages","extractPages","organizeDidEnd"]),O=Object.freeze({INVALID_INTENT:"Intent Is Invalid",FETCH_TOKEN_FAILURE:"Fetch Token Failure",UNKNOWN_ERROR:"Unknown Error"}),M=10},ibkQ:(s,f,_)=>{"use strict";_.d(f,{Ev:()=>setDocumentId,Kz:()=>logEvent,Qf:()=>addFieldsToCommonLogging});const y=_("plsW").logging.getLogger("dc-rendition-provider");let S="",T={sessionId:window.dcWebSessionId,userAgent:navigator.userA.s}}const logEvent=(s,f)=>{y.emit(s,{...f,...T,docSessionId:window.docSessionId,documentId:S})}},RbXz:(s,f,_)=>{"use strict";_.d(f,{ZQ:()=>getScriptSrc,ir:()=>getOriginFromUrl,lO:()=>getAjsPath});var y=_("zSZc");const getOriginFr""}`},getScriptSrc=s=>{let f;return[...document.scripts].forEach((_=>{const y=_.src;return-1===y.indexOf(s)||(f=y,!1)})),f},getAjsPath=()=>{const s=getScriptSrc(y.Xy);return s?`${s.replace(y.Xy,"")}AJS/`:""}},zSZc:(s,f,_)=>{"use strict";_.d(f,{$j:()=>oe,$l:()=>ce,Bq:()=>te,D$:()=>se,GN:()=>T,H3:()=>ae,Ho:()=>O,KY:()=>q,Lo:()=>ue,VL:()=>S,Wb:()=>M,Xq:()=>he,Xy:()=>y,_U:()=>re,aY:()=>ne,dA:()=>fe,iO:()=>E,im:()=>le,rg:()=>ie,u3:()=>de,z1:()=>ee});const y="rendition.js",S="/review",T="/parcel",E="/external",O="/sign",M="/pdfnow",q=["/onedrive","/sharepoint","/gdrive"],ee=Object.freeze({"/onedrive":"OneDrive","/sharepoint":"SharePoint","/gdrive":"GDrive"}),te=10,re=5,ne=10,ie=1e3,se=500,oe=Object.freeze({S3:"S3",DCAPI:"DCAPI",NONE:"NONE"}),ae=1,ce=Object.freeze({PDF_DOWNLOAD_URI_START:"pdfDownloadUriStartTime",PDF_DOWNLOAD_URI_END:"pdfDownloadUriEndTime",PDF_DOWNLOAD_START:"pdfDownloadStartTime",PDF_DOWNLOAD_END:"pdfDownloadEndTime",DCAPI_INIT:"dcapiInit",DCAPI_LOADED:"dcapiLoaded"}),ue=Object.freeze({AdobeSignValidator:"AdobeSignCertificateValidator",EdgeExtensionValidator:"EdgeExtensionCertificateValidator"}),le=Object.freeze({valid:"VALID",invalid:"INVALID",unknown:"UNKNOWN"}),de=Object.freeze({currentTime:"currentTime",signingTime:"signingTime"}),he=Object.freeze({AATL:"AATL",EUTL:"EUTL",OS:"OS"}),fe=Object.freeze({tooManyRequests:"TooManyRequests",gatewayTimeout:"GatewayTimeout",internalServerError:"InternalServerError",apiTimeoutError:"APITimeoutError",unknownError:"UnknownError"})},GNuk:(s,f,_)=>{"use strict";_.d(f,{v:()=>getQueryParams});const getQueryParams=s=>{const f={};let _,y;const S=(s||window.location.search).substr(1).split("&");if(""!==S)for(_=0;_<S.length;_+=1)y=S[_].split("="),2===y.length&&(f[y[0]]=decodeURIComponent(y[1].replace(/\+/g," ")));return f}},"6mnL":(s,f,_)=>{"use strict";_.d(f,{Z:()=>SecurityHandler});var y=_("sR8A");class SecurityHandler extends y.AcrobatJSSecurityHandler{constructor(s){super(),s.fetchPasswordCallback&&(this.fetchPassword=s.fetchPasswordCallback)}}},"Eb/P":(s,f,_)=>{"use strict";_.d(f,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var y=_("GNuk"),S=_("GTUu"),T=_("ibkQ");const __WEBPACK_DEFAULT_EXPORT__=()=>{const s=(0,y.v)(),f=(0,S.vz)(s);let _=!0;return WebAssembly&&WebAssembly.Exception?f.ajsExceptionSupport&&(_="wasm"===f.ajsExceptionSupport):_=!1,f.ajsExceptionSupport=_?"wasm":"js",(0,T.Qf)({enableWasmExceptions:_}),_}},GTUu:(s,f,_)=>{"use strict";_.d(f,{Xh:()=>cloneDeep,Xm:()=>canDoOrganize,gw:()=>delay,vz:()=>getVariablesFromQueryParams});var y=_("6Wbc");const clony(s)),,s))),getVariablesFromQueryParams=s=>{const f={useDCAPI:{tran"!==s},enableAJSLogging:{transform:s=>"true"===s},useAJSFullBuild:{transform:s=>"true"===s},useProgressiveRendering:{tran"===s},ajsExceptionSupport:{tran:s=>s}},_={};return Object.keys(f).forEach((y=>{y in s&&(_[y]=f[y].transform(s[y]))})),_},canDoOrganize=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const f={isSupported:!0,reason:{}},{isXFA:_,isPortfolio:S,isEncrypted:T,permissions:E,hasDigitalSignatures:O}=s;if(_||S||T||O){const s=1===((s,f)=>s>>>f&1)(E,y.n5);f.isSupported=!1,_&&(f.reason.isXFA=!0),S&&(f.reason.isPortfolio=!0),T&&(f.reason.isEncrypted=!0,f.reason.isDocumentAssemblyAllowed=s),O&&(f.reason.hasDigitalSignatures=!0,f.reason.isDocumentAssemblyAllowed=s)}return f}},"6rni":(s,f,_)=>{s.exports=_("2pFd")("DlMc")},sdTo:(s,f,_)=>{s.exports=_("2pFd")("WOwn")},"4PKp":(s,f,_)=>{s.exports=_("2pFd")("bfRH")}sN")},"re"]}}orts}__webpack_require__.m=_,__webpack_requir}),f},__webpack_requir_]})},__webpack_require__.f={},__webpack_requir,[])),__webpack_requir.js"),__webpack_requirdow}}(),__webpack_requir(s,f),s={},f="adobe_dc_sdk.components.rendition:",__webpack_requir(E)}},__webpack_requir!0})},__webpack_require_].p=s(f))})();var S={};(()=>{"use strict";__webpack_require__.r(S),__webpack_require__.d(S,{RenditionAPI:()=>RenditionAPI,prov)=>he});var s=__webpack_require__("6rni"),f=__webpack_require__.n(s),_=__webpack_require__("uY7Q"),y=__webpack_require__.n(_),T=__webpack_require__("sdTo"),E=__webpack_require__.n(T),O=__webpack_require__("sR8A");const M="11.195.2";var q=__webpack_require__("plsW"),ee=__webpack_require__("4PKp"),te=__webpack_require__("ibkQ");const utils_cancellablePromise=s=>{let f=!1,_=s;_||(_=Promise.reject());return{promise:new Promise(((s,y)=>{_.then((_=>!f&&s(_))).c&y(s)))})),cf=!0}}};let re=[];const renditionMakeCancellablePromise=s=>{const f=utils_cancellablePromise(s);return re.push(f),f.promise}tMode,getDigest=s=>isIE()?window.msCrypto.subtle.digest("SHA-256",s):window.crypto&&window.crypto.subtle?window.crypto.subtle.digest("SHA-256",s):Promise.reject("Crypto is not supported"),getDigen(""),stringToUint8ArrayBuffer=s=>{let f,_,y,S,T,E=0;if(s){for(E=s.length,f=-1,_="undefined"==typeof Uint8Array?new Array(1.5*E):new Uint8Array(3*E),y=0,S=0,T=0;T!==E;){if(y=s.charCodeAt(T),T+=1,y>=55296&&y<=56319){if(T===E){_[f+=1]=239,_[f+=1]=191,_[f+=1]=189;break}S=s.charCodeAt(T),S>=56320&&S<=57343?(y=1024*(y-55296)+(S-56320+65536),T+=1,y>65535&&(_[f+=1]=240|y>>>18,_[f+=1]=128|y>>>12&63,_[f+=1]=128|y>>>6&63,_[f+=1]=128|63&y)):(_[f+=1]=239,_[f+=1]=191,_[f+=1]=189)}y<=127?_[f+=1]=0|y:y<=2047?(_[f+=1]=192|y>>>6,_[f+=1]=128|63&y):(_[f+=1]=224|y>>>12,_[f+=1]=128|y>>>6&63,_[f+=1]=128|63&y)}return"undefined"!=typeof Uint8Array?_.subarray(0,f+1):(_.length=f+1,_)}return""},getSHA256Digest=s=>new Promise(((f,_)=>{if(isIE()){const y=stringToUint8ArrayBuffer(s);let S="";const T=getDigest(y);T.process(y),T.finish(),T.oncomplete=function onComplete(){if(S=T.result,null!==S){const s=getDigestHex(S);f(s)}else _("documentIdHash error")}}else{const y=/Edge/.test(navigator.userAgent)?stringToUint8ArrayBuffer(s):(new TextEncoder).encode(s);getDigest(y).f(_)})).catch((s=>{_(s)}))}}));var ne=__webpack_require__("RbXz"),ie=__webpack_require__("zSZc"),se=__webpack_require__("GNuk"),oe=__webpack_require__("6mnL");const getStreamRequestHeaders=s=>{let{apiKey:f,accessToken:_,transactionId:y,apiTimeoutDuration:S=0}=s;const T={Accept:"application/json, text/plain, */*"};return f&&(T["x-api-key"]=f),_&&(T.Authorization=_),y&&(T["x-transaction-id"]=y),S&&(T.Prefer=`respond-partial, wait=${S}`),new Headers(T)},uploadStream=(s,f,_,y,S)=>new Promise(((T,E)=>{const O=getStreamRequestHeaders(S?{apiKey:_,accessToken:S}:{apiKey:_,transactionId:y}),M=(s=>{const f=new FormData;return f.append("contentAnalyzerRequests",'{\n        "sensei:engines": [{\n          "sensei:execution_info": {\n            "sensei:engine": "Annotation:pdf-object-detection:Service-61274bccdf4e4177b62ee988d67b9989"\n          },\n          "sensei:inputs": {\n            "in_stream": {\n              "sensei:multipart_field_name": "in_stream",\n              "dc:format":"application/pdf+dcxucf"\n            }\n          },\n          "sensei:outputs": {\n            "out_stream": {\n              "sensei:multipart_field_name": "out_stream",\n              "dc:format":"application/zip"\n            }\n          },\n          "sensei:params": {\n            "client_analytics_consent":true,\n            "result_format":"cnpdf_updates",\n            "save_intermediate_files":false,\n            "degree_of_parallelism": 1,\n            "overrides":"",\n            "provisional":true\n          }\n        }]\n      }'),f.append("in_stream",s),f})(s);fetch(f,{method:"POST",headers:O,body:M}).E(s)})).catch((s=>{E(s)}))})),AdobeSenseiPredictClient=s=>{let{cnpdfZipData:f,mimeType:_}=s;return new Promise(((s,y)=>{const S=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,f="";const _="0123456789";for(let y=0;y<s;y+=1)f+=_.charAt(Math.floor(10*Math.random()));return f}(),T=new Blob([f],{type:_});let E,O,M,ee;!q.auth2.isSignedIn?(O="https://sensei-stage.adobe.io/anonymous/v2/predict",M="https://sensei-stage.adobe.io/anonymous/v2/status",ee="ReaderMobileAndroid4_0002_Anonymous"):(E=(()=>{const{adobeIMS:s}=window;if(s&&s.getAccessToken){const{token:f}=s.getAccessToken();if(f)return f}})(),O=`https://senseis-stage.adobe.io/services/v2/stream/predict/${S}`,M=`https://senseis-stage.adobe.io/services/v2/stream/predict/${S}`,ee="AdobeSenseiPredictServiceStageKey"),uploadStream(T,O,ee,S,E).catch((s=>{y(s)})),function(s,f,_,y){let S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:59;return new Promise(((T,E)=>{const O=getStreamRequestHeaders(y?{apiKey:f,accessToken:y}:{apiKey:f,transactionId:_,apiTimeoutDuration:S});fetch(s,{method:"GET",headers:O}).then((s=>{s.ok?(s=>!(!s||!s.headers)&&null!==s.headers.get("content-length"))(s)?E(s):T(s.body):E(s)})).catch((s=>{E(s)}))}))}(M,ee,S,E).then((f=>{s(f)})).cy(s)}))}))};var ae=__webpack_require__("GTUu");class EdgeExtensionCertificateValidation extends O.CertificateValidationInterface{static isAvailable(){const{edgeCertVerifierPrivate:s}=window.chrome||{};return!(!s||!s.getResult)}name(){return ie.Lo.EdgeExtensionValidator}_base64ToArrayBuffer(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!s.length)return null;let f="";s.forb(s)}));const _=f.length,y=new Uint8Array(_);for(let s=0;s<_;s+=1)y[s]=f.charCodeAt(s);return y.buffer}validate(s){return new Promise(((f,_)=>{if(!Array.isArray(s))return _(new Error("certificateChain must be an array"));try{const y=this._base64ToArrayBuffer(s);window.chrome.edgeCertVerifierPrivate.getResult(y,(_=>{_.certificates||(_.certificates=s),_.trustSources||(_.trustSources=[ie.Xq.OS]),_.validation||(_.validation={validatedOn:ie.u3.currentTime,timestamp:(new Date).toISOString()}),f(_)})),setTimeout((()=>_(new Error(ie.dA.apiTimeoutError))),5e3)}catch(s){_(s)}}))}}const ce=EdgeExtensionCertificateValidation;class AdobeSignCertificateValidation extends O.CertificateValidationIntetor}_getError(s,f){const _=new Error(s);return _.reason=f?{code:f}:{},_}validate(s){return new Promise(((f,_)=>{if(!Array.isArray(s))return _(this._getError("certificateChain must be an array"));const y=new Headers;y.append("Content-Type","application/json"),y.append("x-api-key","certificatevalidator");const S={method:"POST",headers:y,body:JSON.stringify({certificates:s})};fetch("https://certificatevalidator.adobe.io/certificatevalidator/v1/verify",S).then((async s=>{if(s.ok){const _=await s.json();_.validation||(_.validation={validatedOn:ie.u3.currentTime,timestamp:(new Date).toISOString()}),_&&_.status===ie.im.valid&&!_.trustSources.length&&(_.status=ie.im.unknown),f(_)}const _=s.status;let y=ie.dA.unknownError;throw 429===_?y=ie.dA.tooManyRequests:504===_?y=ie.dA.gatewayTimeout:_>=500&&_<600&&(y=ie.dA.internalServerError),this._getError(y,_)})).then((s=>f(s))).c>_(s)))}))}}const ue=AdobeSignCertificateValidation,recordNow=(s,f)=>{const _=Math.round(f||performance.now());return window.performance&&window.performance.mark&&window.performance.mark(`provider_rendition_${s}`,{startTime:_}),_};var le=__webpack_require__("Eb/P");let de415}}class RenditionAPI{constructor(s,f){var _=this;return this._getFileInfoObj=function(s,f){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(q.auth2.isSignedIn&&!_._isS3DownloadUrl){const s=q.auth2.getAccessTokenInfo();s.access_token&&y.push({key:"Authorization",value:`Bearer ${s.access_token}`})}return f&&!("id"in f)&&(f.id=f.asset_id),{content:{location:{url:s,headers:y}},metaData:f}},this._shouldEnableProgressiveRendering=()=>!!window.OffscreenCanvas&&this.options.useProgressiveRendering,this._fetchPDFBufferRanges=(s,f,_)=>1===_.length&&0===_[0].start&&void 0===_[0].end?this._fetchCompletePDFBufferPromise.=>[s])):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((()=>this._externalGetDownloadUri(s,f).(s,_)))))),this._fetchPDFSize=(s,f)=>(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((()=>this._externalGetDownloadUri(s,f).ze(s)))))),de=this,this.queryParams=(0,se.v)(),this.options=Object.assign({},{enableExternal:!0,useAJS:!0,useDCAPI:!0,AJSDelay:0,useReview:!0,usePDFNow:!1,fetchWithCredentials:!1,autoStart:!0,shouldUseModernViewer:!1,enableAJSLogging:!1,useAJSFullBuild:!1,useProgressiveRendering:!0},f,(0,ae.vz)(this.queryParams)),this._fetchCompletePDFBufferPromise=null,this._assetRenditions={},this._assetRenditionsIndex=[],this._assetPageRenditions={},this._assetPageRenditionPromises={},this._assetPageRenditionsIndex=[],this._cachedRedirectUrl={},this._perfTimings={},this._resetAjsPerfTimings(),this._getAssetFileInfoPromise={},this.options.autoStart&&this.init(),de}init(){this.options.useDCAPI?(this.dcapiPromise=new Promise(((s,f)=>{this.dcapiResolve=s,this.dcapiReject=f})),this._dcapiInit()):this.dcapiPromise=Promise.resolve(),this.options.useAJS&&(this._completePDFBufferAvailablePromise=new Promise((s=>{this._completePDFBufferAvailablePromiseResolve=s})),this.options.AJSDelay>0?setTimeout(this._getAjs.bind(this),this.options.AJSDelay):this._getAjs()),this._waitOnCompletePDFBuffer=new Prove=s}))}_resetAjsPerfTimings(){this.options.useAJS&&(this._perfTimings.ajs={})}_getDCAssetFileInfo(s){const f=`${s}`;return this._getAssetFileInfoPromise[f]||(this._getAssetFileInfoPromise[f]=this.dcapiPromise.then((()=>{const f=this._dcapiGetMetadata(s,{}),_=this._dcapiGetDownloadUri(s,{});return Promise.all([_,f])})).then((s=>{const f=s[0],_=s[1];return this._getFileInfoObj(f,_,[])})).catch((()=>{delete this._getAssetFileInfoPromise[f]}))),this._getAssetFileInfoPromise[f]}_getPDFNowAssetFileInfo(s,f){return this.dcapiPromise.(s,f))).then((s=>{const f=s;return f&&!("id"in f)&&(f.id=f.asset_id),{metaData:f}}))}_getReviewAssetFileInfo(s){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const _=`${s}`;if(this._getAssetFileInfoPromise[_])return this._getAssetFileInfoPromise[_];let y;y=f&&q.auth2.isSignedIn?this._dcapiGetMetadata(s,{}):this._reviewGetMetadata(s);const S=this._reviewGetDownloadUri(s,f);return this._getAssetFileInfoPromise[_]=Promise.all([S,y]).then((s=>{const f=s[0],_=s[1];return this._getFileInfoObj(f,_,[])})).ce[_]})),this._getAssetFileInfoPromise[_]}getAssetFileInfo(s,f){return RenditionAPI._isReviewAsset(f)||RenditionAPI._isParcelAsset(f)?this._getReviewAssetFileInfo(s):RenditionAPI._isPDFNowAsset(f)?this._getPDFNowAssetFileInfo(s,f):RenditionAPI._isConnectorAsset(f)?this._connectorGetMetadata(s,f).then((_=>(_&&!("id"in _)&&(_.id=_.asset_id),_.download_url?Promise.resolve({content:{location:{url:_.download_url}},metaData:_}):this._connectorGetContentBuffer(s,f).then((s=>{const f=new Blob([s]);return Promise.resolve({content:{location:{url:URL.createObjectURL(f)}},metaData:_})}))))):this._getDCAssetFileIns,f)}_ajsInit(){this.ajs.subscribe(this._onAjsEvent.bind(this)),this.ajs.init().c",lO()}_ajsSetup(){const s={ajsPath:RenditionAPI._ajsGetPath(),workerCreator:de.getAJSWorker,enableLogging:this.options.enableAJSLogging,useFullBuild:this.options.useAJSFullBuild,enableProgressiveRendering:this._shouldEnableProgressiveRendering(),hostEnv:q.envUtil.getHostEnv(),enableWasmExceptions:(0,le.Z)()};return this._ajsPromise=new Promise(((f,_)=>{try{this.ajs=new O.AcrobatJS({...s}),this._ajsInit(),f(this.ajs)}catch(s){_(s)}})),this._ajsPromise}_getAjs(){return this.options.useAJS&&!this._ajsPromise?this._ajsSetup():this._ajsPrr(s)}_ajsEmit(s,f){const _={...f,acrobatJSVersion:M,shouldUseModernViewer:this.options.shouldUseModernViewer};(0,te.Kz)(s,_)}_onAjsEvent(s,f,_){switch(s){case"completePDFBufferAvailable":this._completePDFBufferAvailablePromiseResolve();break;case`${_}PerfTimings`:"ajs"===_&&Object.keys(f).forf[s]))),this._perfTimings[_]=Object.assign({},this._perfTimings[_],f);break;case"FontUsed":q.providers["font-provider"]().then((s=>{!f.isInEditMode&&f.fontsList&&f.fontsList.forEach((f=>{s.isUsageUnReported(f)&&this._ajsEmit("FontUsageNotReported",{fontName:f})}))}));break;default:this._ajsEmit(s,f)}}_dcapiInit(){this._perfTimings.dc={dcapiInit:recordNow(ie.$l.DCAPI_INIT)},q.providers&&q.providers.dcapi&&q.providers.dcapi().then((s=>{this._dcapi=s.getDcapi(),this._dcapi.promise().then((()=>{this._perfTimings.dc.dcapiLoaded=recordNow(ie.$l.DCAPI_LOADED),this.dcapiResolve()})).catch((s=>{(0,te.Kz)(s,{code:s.code,level:"error"}),this.dcapiReject()}))}))}_pdfnowInitPromise(){return!this.pdfnowApiPromise&&(this.options.usePDFNow?(this.pdfnowApiPromise=new Promise(((s,f)=>{this.pdfnowApiResolve=s,this.pdfnowApiReject=f})),!0):(this.pdfnowApiPromise=Promise.resolve(),!1))}_pdfnowInit(){void 0!==q.providers&&q.providers["dcapi-facade"]().then((s=>s.getDcapi().ve()})))).catch((s=>{(0,te.Kz)(s,{code:s.code,level:"error"}),this.pdfnowApiRejectt()}_reviewInitPromise(){return!this.reviewApiPromise&&(this.options.useReview?(this.reviewApiPromise=new Proct=f})),!0):(this.reviewApiPromise=Promise.resolve(),!1))}_reviewInit(){void 0!==q.providers&&q.providers["review-handler"]().then((s=>{this._reviewApi=s,this.reviewApiResolve()})).catch((s=>{(0,te.Kz)(s,{code:s.code,level:"error"}),this.reviewApiReject()}))}_externalInitPromise(){return!this.externalPromise&&(this.options.enableExternal?(this.externalPromise=new Promise(((s,f)=>{this.externalResolve=s,this.externalReject=f})),!0):(this.externalPromise=Promise.resolve(),!1))}_externalInit(){void 0!==q.providers&&q.providers.integrationProvider().then((s=>{this._external=s,this.externalResolve()})).catch((s=>{(0,te.Kz)(s,{code:s.code,level:"error"}),this.externalReject()}))}_cacheRendition(s,f){this._assetRenditions[s]||(this._assetRenditionsIndex.length===ie.D$&&delete this._assetRenditions[this._assetRenditionsIndex.shift()],this._assetRenditionsIndex.push(s)),this._assetRenditions[s]=y()(this._assetRenditions[s],f)}_cachePageRendition(s,f,_){const S=`${s}-${f}`;this._assetPageRenditions[S]||(this._assetPageRenditionsIndex.length===ie.D$&&delete this._assetPageRenditions[this._assetPageRenditionsIndex.shift()],this._assetPageRenditionsIndex.push(S)),this._assetPageRenditions[S]=y()(this._assetPageRenditions[S],_)}_dcapiGetAssetUri(s){return this._dcapi&&s.startsWith("urn:")?this._dcapi.getTemplateURI("asset_uri",{asset_id:s}):s}static _dcapiGetAssetUrn(s){return s.startsWith("urn:")?s:s.substr(s.lastIndexOf("/")+1)}_dcapiMetadataCall(s,_){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise(((S,T)=>{this._dcapi.call("assets.get_metadata",{accept:"asset_metadata_basic_v1.json",resource_parameter:this._dcapiGetAssetUri(s),headers:{"x-request-id":f().v4()}}).then((f=>{const E=f,O=E.content.page_count;let M;if(E.content.numPages=O,(_.enableRetryForPDFs||this.queryParams.enableRetryForPDFs||"application/pdf"!==E.content.type)&&!O){const f="application/pdf"===E.content.type?ie.Bq:ie._U,S="application/pdf"===E.content.type?ie.rg:0;y===f?E.content.numPages=1:M=new Promise(((f,T)=>{setTimeout((()=>{this._dcapiMetadataCall(s,_,y+1).then(f).catch(T)}),S)}))}M||(M=Promise.resolve(E)),M.then(S).catch(T)}),(s=>{T(s)}))}))}_dcapiGetMetadata(s,f){return this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&this._assetRenditions[s].dcapi.contentData&&!0!==f.forceCacheless?Promise.resolve(this._assetRenditions[s].dcapi.contentData):RenditionAPI._isReviewAsset(f)||RenditionAPI._isParcelAsset(f)?this._reviewGetMetadata(s,f):RenditionAPI._isPDFNowAsset(f)?this._pdfnowGetMetadata(s,f):RenditionAPI._isConnectorAsset(f)?this._connectorGetMetadata(s,f):new Promise(((_,y)=>{this.dcapiPromise.then((()=>{const S=this._dcapiMetadataCall(s,f),T=this._dcapiGetDocumentRenditionStatus(s);Promise.all([S,T]).then((f=>{let[y,S]=f;this._cacheRendition(s,{dcapi:{contentData:(0,ae.Xh)(y.content)}}),this._cacheRendition(s,{dcapi:{contentData:{documentRenditionStatus:S}}}),_(this._assetRenditions[s].dcapi.contentData)})).catch(y)}))}))}static _isReviewAsset(s){return s.assetType===ie.VL}static _isParcelAsset(s){return s.assetType===ie.GN}static _isExternalAsset(s){return s.assetType===ie.iO}static _isConnectoype)}static _isSignAsset(s){return s.assetType===e.Wb}_dcapiIsPDFAsset(s,f){return new Promise(((_,y)=>{f.useDCAPI?this._dcapiGetMetadata(s,f).then((()=>{this._assetRenditions[s]&&"application/pdf"===this._assetRenditions[s].dcapi.contentData.type?_():y()})).catch(y):_()}))}_isPDFAsset(s,f){return new Promise(((_,y)=>{f&&"application/pdf"===f.assetMimeType?_():this._dcapiIsPDFAsset(s,f).then(_).catch(y)}))}_ajsPostMetaData(s,f){return this._fetchCompletePDFBufferPromise=this._fetchCompletePDFBuffer(s,f),f.enableLinearization&&!f.password?renditionMakeCancellablePromise(this._ajsGetLinearizedContentData(s,f)):this._fetchCompletePDFBufferPromise.then((s=>renditionMakeCancellablePromise(this._ajsGetContentData(s,f)).catch((f=>{const _=ArrayBuffer.isView(s)?s.buffer:s;return(0,te.Kz)("ajsGetContentData Failed",{error:JSON.stringify(f),size:_?_.byteLength:-1}),Promise.reject(f)}))))}_fetchCompletePDFBuffer(s,f){let _;return _=RenditionAPI._isExternalAsset(f)?renditionMakeCancellablePromise(this._externalGetDownloadUri(s,f)).catch((s=>((0,te.Kz)("GetDownloadUri failed",{assetType:"external",error:JSON.stringify(s)}),Promise.reject(s)))).then((f=>renditionMakeCancellablePromise(this._externalGetContentBuffer(s,f)).catch((s=>((0,te.Kz)("GetContentBuffer failed",{assetType:"external",error:JSON.stringify(s)}),Promise.reject(s)))))):renditionMakeCancellablePromise(this._isPDFAsset(s,f)).catch((s=>((0,te.Kz)("Non PDF asset in AJS flow",{assetType:"non-external",error:JSON.stringify(s)}),Promise.reject(s)))).then((()=>renditionMakeCancellablePromise(this._dcapiGetDownloadUri(s,f)).catch((s=>((0,te.Kz)("GetDownloadUri failed",{assetType:"non-external",error:JSON.stringify(s)}),Promise.reject(s)))).then((_=>(this._perfTimings.ajs.pdfDownloadStart=recordNow(ie.$l.PDF_DOWNLOAD_START),(0,te.Kz)("pdfDownloadStartTime",{pdfDownloadStart:this._perfTimings.ajs.pdfDownloadStart}),renditionMakeCancellablePromise(this._dcapiGetContentBuffer(s,_,f)).catch((s=>((0,te.Kz)("GetContentBuffer failed",{assetType:"non-external",error:JSON.stringify(s)}),Promise.reject(s))))))))),_.then((_=>{if(RenditionAPI._isExternalAsset(f)){const _=this._external.apis.file.getDownloadTimes();this._perfTimings.ajs.pdfDownloadStart=recordNow(ie.$l.PDF_DOWNLOAD_START,_.pdfDownloadStartTime),this._perfTimings.ajs.pdfDownloadEnd=recordNow(ie.$l.PDF_DOWNLOAD_END,_.pdfDownloadEndTime),(0,te.Kz)("pdfDownloadStartTime",{pdfDownloadStart:this._perfTimings.ajs.pdfDownloadStart}),this._getFileSize(s,f).e(s)})).ce(0)}))}else{this._perfTimings.ajs.pdfDownloadEnd=recordNow(ie.$l.PDF_DOWNLOAD_END);const{pdfDownloadStart:s,pdfDownloadEnd:f}=this._perfTimings.ajs,_=f-s;(0,te.Kz)("pdfDownloadTotalTime",{pdfDownloadTotalTime:_}),this._setDownloadUrlType(ie.$j.NONE)}return _}))}_getFileSize(s,f){return this._externalGetMetadata(s,f).ize:0))}_logPdfDownloadTotalTime(s){const{pdfDownloadStart:f,pdfDownloadEnd:_}=this._perfTimings.ajs,y=_-f;(0,te.Kz)("pdfDownloadTotalTime",{pdfDownloadTotalTime:y,fileSize:s,isS3Url:this._isS3DownloadUrl}),this._setDownloadUrlType(ie.$j.NONE)}_ajsGetMetadata(s,f){const _=f?{...f}:{};return renditionMakeCancellablePromise(getSHA256Digest(s)).)(s)})).cd=""})).then((()=>{if(!0!==_.forceCacheless&&this._assetRenditions[s]&&this._assetRenditions[s].ajs&&this._assetRenditions[s].ajs.metadataPromise)return this._assetRenditions[s].ajs.metadataPromise;const f=this._ajsPostMetaData(s,_);return this._cacheRendition(s,{ajs:{metadataPromise:f}}),f}))}_externalGetMetadata(s,f){return this._assetRenditions[s]&&this._assetRenditions[s].external&&this._assetRenditions[s].external.metadata&&!0!==f.forceCacheless?Promise.resolve(this._assetRenditions[s].external.metadata):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((()=>this._external.getSelectedFilesListFromFileIds([s]).then((f=>(this._cacheRendition(s,{external:{metadata:f[0]}}),f[0]))))))}_externalGetDownloadUri(s,f){return this._assetRenditions[s]&&this._assetRenditions[s].external&&this._assetRenditions[s].external.downloadUri&&!0!==f.forceCacheless?Promise.resolve(this._assetRenditions[s].external.downloadUri):this._externalGetMetadata(s,f).then((f=>f.downloadUrl?(this._cacheRendition(s,{external:{downloadUri:f.downloadUrl}}),f.downloadUrl):Promise.reject(new Error("Download Uri not available"))))}_externalGetContentBuffer(s,f){return this._assetRenditions[s]&&this._assetRenditions[s].external&&this._assetRenditions[s].external.contentBuffer?Promise.resolve(this._assetRenditions[s].external.contentBuffer):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((()=>this._external.getFileContents(f).then((f=>(this._cacheRendition(s,{external:{contentBuffer:f},ajs:{contentBuffer:f}}),f))))))}_connectorGetRendition(s,f){const _=f.size||"3200",y=`${s}-0`;if(!0===f.forceCacheless||!this._assetPageRenditions[y]||!this._assetPageRenditions[y].connector||!this._assetPageRenditions[y].connector.pageImgBuffer||this._assetPageRenditions[y].connector.size!==_||0!==this._assetPageRenditions[y].connector.page){const y=new URLSearchParams(window.location.search),S=ie.z1[f.assetType];return S?q.providers["storage-connectors"]().then((T=>T.getStorageProvider(S).then((S=>{let E=y.get("connectorid");return E||(E=f.connectorId),S.getRendition(s,T.getConnectorById(E),{size:_}).then((f=>{const y={params:{pageImgBuffer:f,mimeType:"image/png",pageNum:0}};return this._cachePageRendition(s,0,{connector:{pageImgBuffer:f,size:_,page:0}}),y}))})))).catch((s=>{throw new NoRenditionError(s&&s.message||"Unknown")})):Promise.reject(new Error("Not supported"))}const S=this._assetPageRenditions[y].connector,T={params:{pageImgBuffer:S.pageImgBuffer,mimeType:"image/png",pageNum:S.page}};return Promise.resolve(T)}_connectorGetMetadata(s,f){const _=`${s}`;if(this._getAssetFileInfoPromise[_])return this._getAssetFileInfoPromise[_];if(!0!==f.forceCacheless&&this._assetRenditions[s]&&this._assetRenditions[s].connector&&this._assetRenditions[s].connector.metaData)this._getAssetFileInfoPromise[_]=Promise.resolve(this._assetRenditions[s].connector.metaData);else{const y=new URLSearchParams(window.location.search),S=ie.z1[f.assetType];this._getAssetFileInfoPromise[_]=S?q.providers["storage-connectors"]().then((f=>f.getStorageProvider(S).then((S=>{const T=y.get("connectorid");return S.getItem(s,f.getConnectorById(T)).then((_=>{const y=S.normalizeItem(_,f.getConnectorById(T));return"application/pdf"!==y.type&&(y.numPages=1,y.page_count=1),this._cacheRendition(s,{connector:{metaData:y},ajs:{metaData:y}}),y})).catch((()=>{delete this._getAssetFileInfoPromise[_]}))})))):Promise.reject(new Error("Not supported"))}return this._getAssetFileInfoPromise[_]}_connectorGetContentBuffer(s,f){if(!this._assetRenditions[s]||!this._assetRenditions[s].connector||!this._assetRenditions[s].connector.contentBuffer){const _=new URLSearchParams(window.location.search),y=ie.z1[f.assetType];return y?q.providers["storage-connectors"]().then((f=>f.getStorageProvider(y).then((y=>{const S=_.get("connectorid");return y.getFileContent(s,f.getConnectorById(S)).then((f=>(this._cacheRendition(s,{connector:{contentBuffer:f},ajs:{contentBuffer:f}}),f)))})))):Promise.reject(new Error("Not supported"))}return Promise.resolve(this._assetRenditions[s].connector.contentBuffer)}_dcapiGetRenditionUri(s){return this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&this._assetRenditions[s].dcapi.renditionUri?Promise.resolve(this._assetRenditions[s].dcapi.renditionUri):this._dcapi.call("assets.rendition_uri",{resource_parameter:this._dcapiGetAssetUri(s),accept:"asset_uri_rendition_v1.json",headers:{"x-request-id":f().v4()}}).then((f=>(this._cacheRendition(s,{dcapi:{renditionUri:f.content.uri}}),f.content.uri)),(s=>Promise.reject(s)))}_externalGetRendition(s,f){const _=void 0!==f.pageNum?f.pageNum:1,y=`${s}-${_}`;return this._assetPageRenditions[y]&&this._assetPageRenditions[y].external&&this._assetPageRenditions[y].external.rendition&&this._assetPageRenditions[y].external.rendition[_]&&!0!==f.forceCacheless?Promise.resolve(this._assetPageRenditions[y].external.rendition[_]):(this._externalInitPromise()&&this._externalInit(),this.externalPromise.then((()=>"function"!=typeof this._external.getRenditionByFileId?Promise.reject(new Error("Cannot get External rendition")):this._external.getRenditionByFileId(s,f).then((f=>{const y={external:{rendition:{}}};return y.external.rendition[_]={params:f},this._cachePageRendition(s,_,y),Promise.resolve({params:f})}),(s=>Promise.reject(s))))))}_dcapiGetDirectRenditionForPage(s,_){const y=_.size||"1200",S=_.format||"jpg",T=void 0!==_.pageNum?_.pageNum:1,E=`${s}-${T}`,O=this._assetPageRenditions[E];let M;if(O&&(M=O.dcapi),M&&M.pageImgBuffer&&M.format===S&&M.size===y&&M.page===T){const s={params:{pageImgBuffer:M.pageImgBuffer,mimeType:M.mimeType,pageNum:M.page}};return Promise.resolve(s)}return this._dcapi.call("assets.rendition_direct",{accept:"image/*",resource_parameter:RenditionAPI._dcapiGetAssetUrn(s),uri_parameters:{size:y,format:S,page:T-1,processing_hint:"speed_over_quality"},headers:{"x-request-id":f().v4()},responseType:"arraybuffer"}).then((f=>{const _={params:{pageImgBuffer:f.content,mimeType:f.headers["content-type"],pageNum:T}};return this._cachePageRendition(s,T,{dcapi:{pageImgBuffer:f.content,mimeType:f.headers["content-type"],size:y,page:T,format:S}}),Promise.resolve(_)}),(s=>Promise.reject(s)))}_dcapiGetRendition(s,f){let _,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const S=performance.now();return _=RenditionAPI._isReviewAsset(f)||RenditionAPI._isParcelAsset(f)?this._reviewGetRendition(s,f):RenditionAPI._isPDFNowAsset(f)?this._pdfnowGetRendition(s,f):RenditionAPI._isConnectorAsset(f)?this._connectorGetRendition(s,f):this.dcapiPromise.then((()=>this._dcapiGetDirectRenditionForPage(s,f))),_.catch((_=>{const{code:T}=_;if(404===T||429===T){if(y<ie.aY)return(0,ae.gw)(ie.rg).then((()=>this._dcapiGetRendition(s,f,y+1)));const{format:_,size:E,type:O}=f;(0,te.Kz)("dcapiGetRendition max retries",{asset_uri:s,code:T,format:_,level:"error",rendition_duration:performance.now()-S,size:E,type:O})}throw _}))}_getReviewRenditionWithRetries(s,f){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const y=performance.now();return this._reviewGetRendition(s,f).catch((S=>{const{code:T}=S;if(404===T||429===T){if(_<ie.aY)return(0,ae.gw)(ie.rg).,_+1)));const{format:S,size:E,type:O}=f;(0,te.Kz)("getReviewRenditionWithRetries max retries",{asset_uri:s,code:T,format:S,level:"error",rendition_duration:performance.now()-y,size:E,type:O})}throw S}))}_dcapiGetDocumentRenditionUri(s,_){const y=_;return this.dcapiPromise.then((()=>{const _=y.format||"owp";return this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&this._assetRenditions[s].dcapi.documentRenditionUri?Promise.resolve(this._assetRenditions[s].dcapi.documentRenditionUri+(y.format?`&format=${y.format}`:"")):this._dcapi.call("assets.rendition_uri",{resource_parameter:this._dcapiGetAssetUri(s),accept:"asset_uri_rendition_v1.json",uri_parameters:{make_ticket:"owp"===_,type:"document"},headers:{"x-request-id":f().v4()}}).then((f=>(this._cacheRendition(s,{dcapi:{documentRenditionUri:f.content.uri}}),this._assetRenditions[s].dcapi.documentRenditionUri+(y.format?`&format=${y.format}`:""))),(s=>Promise.reject(s)))}))}_dcapiGetDocumentRendition(s,_){const y=_;return this.dcapiPromise.then((()=>{const _=y.format||"owp";return y.format=void 0,this._dcapiGetDocumentRenditionUri(s,y).then((s=>this._dcapi.call("assets.document_rendition",{accept:"*/*",resource_parameter:s,uri_parameters:{format:_,fallback:"none"},headers:{"x-request-id":f().v4()},responseType:"arraybuffer"}).then((s=>s.content))))}))}_dcapiGetDocumentRenditionStatus(s){return this.dcapiPromise.then((()=>this._dcapi.call("assets.document_rendition_status",{resource_parameter:this._dcapiGetAssetUri(s),accept:"asset_document_rendition_status_v1.json",headers:{"x-request-id":f().v4()}}).tact(s)))))}_reviewGetDownloadUri(s){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._initReviewProviderIfRequired();return new Promise(((_,y)=>{this.reviewApiPromise.then((()=>{this._reviewApi.initReviewIfRequired().then((()=>{const S=this._reviewApi.getReview(s);let T=!0;if(void 0!==S){const y=recordNow(ie.$l.PDF_DOWNLOAD_URI_START);(f?S.getFileDownloadURLByAssetUri(s,"view",T):S.getFileDownloadURL("view",T)).then((s=>{this._setDownloadUrlType(ie.$j.S3),_(s);const f=recordNow(ie.$l.PDF_DOWNLOAD_URI_END);(0,te.Kz)("pdfDownloadUriTotalTime",{pdfDownloadUriTotalTime:f-y})})).catch((()=>{T=!1;return(f?S.getFileDownloadURLByAssetUri(s,"view",T):S.getFileDownloadURL("view",T)).then((s=>{this._setDownloadUrlType(ie.$j.DCAPI),_(s);const f=recordNow(ie.$l.PDF_DOWNLOAD_URI_END);(0,te.Kz)("pdfDownloadUriTotalTime",{pdfDownloadUriTotalTime:f-y})})).catch((s=>{this._setDownloadUrlType(ie.$j.NONE),(0,te.Kz)("Failed to fetch reviewDownloadUri",JSON.stringify(s))}))}))}else y(new Error("Review does not exist"))}))}.S3}_reviewGetMetadata(s){this._initReviewProviderIfRequired();return new Promise(((f,_)=>{this.reviewApiPromise.then((()=>{this._reviewApi.initReviewIfRequired().then((()=>{const y=this._reviewApi.getReview(s);void 0!==y?y.getSendBootstrapData().then((S=>{const T={};if(S&&S.meta_list&&S.meta_list instanceof Array&&S.meta_list.length>y.getDownloadAssetIndex()){const _=S.meta_list[y.getDownloadAssetIndex()];T.type=_.content_type,T.assetMimeType=_.content_type,T.name=_.name,T.last_pagenum=_.last_pagenum||0,T.numPages=_.page_count||0,T.size=_.size,T.id=_.id,this._cacheRendition(s,{dcapi:{contentData:(0,ae.Xh)(T)}}),f(T)}else _(new Error("Invalid Bootstrap data"))})).catch((s=>{_(s)})):_(new Error("Review does not exist"))}))})).catch(_)}))}_reviewGetRenditionAuthHeader(s){const f=s;return this._dcapi&&this._dcapi.session&&this._dcapi.session.content&&this._dcapi.session.content.access_token&&(f.headers={Authorization:`Bearer ${this._dcapi.session.content.access_token}`}),f}_getReviewRenditionURL(s,f){const _=void 0!==f.pageNum?f.pageNum-1:0,y=parseInt(f.size||"1200",10);return new Promise(((f,S)=>{this.reviewApiPromise.then((()=>{this._reviewApi.instantiateReview().then((()=>{void 0!==this._reviewApi.getReview(s)?s?(this.filesTierBaseUriPromise=q.providers.user().ris())),this.filesTierBaseUriPromise.then((S=>{let T,E=`${S.send_api.replace("/api/","/invitation/")+encodeURIComponent(s)}/asset/asset-0`;switch(!0){case y<=30:T="/icon";break;case y<=120:T="/thumbnail";break;case y<=500:T="/tile";break;default:T="/preview"}E+=T,_&&(E+=`?page=${_}`),f(E)}),S)):S(new Error("Invalid Bootstrap data")):S(new Error("Review does not exist"))}),S)})).catch(S)}))}_getCachedRedirectURL(s,f){const{assetUri:_,pageNum:y,renditionUrl:S,fetchOptions:T}=s;return new Promise(((s,E)=>{const{pageNum:O,cachedAssetUri:M}=this._cachedRedirectUrl;let{redirectUrl:q}=this._cachedRedirectUrl;const ee="cachedAssetUri"in this._cachedRedirectUrl,te=S.includes("/preview");ee&&M===_&&te&&!f?(O===y&&s(q),q=q.includes("page=")?q.replace(/page=\d+/g,"page="+(y-1)):`${q}&page=${y-1}`,s(q)):RenditionAPI._fetchWithCredentials(S,T).then((f=>{let S;if(f&&200===f.status&&f.content){S=JSON.parse(f.content).url,te&&(this._cachedRedirectUrl={cachedAssetUri:_,redirectUrl:S,pageNum:y}),s(S)}S||E(new Error("Redirect url could not be obtained"))})).catch((s=>E(s)))}))}_getRenditionsUsingCachedRedirectURL(s){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{assetUri:y,pageNum:S,size:T,renditionUrl:E}=s;return new Promise(((O,M)=>{this._getCachedRedirectURL(s,f).then((f=>{let q={responseType:"arraybuffer",withCredentials:this.options.fetchWithCredentials};q=this._reviewGetRenditionAuthHeader(q),q.headers||(q.headers={}),RenditionAPI._fetchWithCredentials(f,q).then((f=>{const M={params:{pageImgBuffer:f.content,mimeType:f.headers["content-type"],pageNum:S}};this._cachePageRendition(y,S,{dcapi:{renditionUri:E,pageImgBuffer:f.content,mimeType:f.headers["content-type"],size:T,page:S}});f&&(410===f.status||401===f.status)&&_<ie.H3&&this._getRenditionsUsingCachedRedirectURL(s,!0,_+1),O(M)})).catch((s=>{M(s)}))})).catch((s=>{M(s)}))}))}_reviewGetRendition(s,f){this._initReviewProviderIfRequired();const _=void 0!==f.pageNum?f.pageNum:1,y=f.size||"1200",S=`${s}-${_}-${y}`;return this._assetPageRenditionPromises[S]||(this._assetPageRenditionPromises[S]=new Promise(((T,E)=>{this._getReviewRenditionURL(s,f).then((f=>{let O={withCredentials:this.options.fetchWithCredentials};O=this._reviewGetRenditionAuthHeader(O),O.headers||(O.headers={}),Object.assign(O.headers,{ACCEPT:"application/vnd.adobe.skybox+json;version=1","x-api-client-id":"api_browser"});const M=`${s}-${_}`;if(this._assetPageRenditions[M]&&this._assetPageRenditions[M].dcapi&&this._assetPageRenditions[M].dcapi.pageImgBuffer&&this._assetPageRenditions[M].dcapi.renditionUri===f&&this._assetPageRenditions[M].dcapi.size===y&&this._assetPageRenditions[M].dcapi.page===_){const s={params:{pageImgBuffer:this._assetPageRenditions[M].dcapi.pageImgBuffer,mimeType:this._assetPageRenditions[M].dcapi.mimeType,pageNum:this._assetPageRenditions[M].dcapi.page}};return void T(s)}const q={assetUri:s,pageNum:_,size:y,renditionUrl:f,fetchOptions:O};this._getRenditionsUsingCachedRedirectURL(q).then((s=>T(s))).catch((s=>{delete this._assetPageRenditionPromises[S],E(s)}))})).cd"))}))}))),this._assetPageRenditionPromises[S]}_dcapiGetDownloadUri(s,_){if(RenditionAPI._isReviewAsset(_)||RenditionAPI._isParcelAsset(_))return this._reviewGetDownloadUri(s,_);if(RenditionAPI._isSignAsset(_))return Promise.resolve(s);if(!this.options.useDCAPI)return Promise.resolve(s);const y={resource_parameter:this._dcapiGetAssetUri(s),accept:"asset_uri_download_v1.json",headers:{"x-request-id":f().v4()}};return new Promise(((s,f)=>{this.dcapiPromise.then((()=>(recordNow(ie.$l.PDF_DOWNLOAD_URI_START),this._dcapi.call("assets.download_uri",{...y,uri_parameters:{make_direct_storage_uri:!0}}).then((f=>{this._setDownloadUrlType(ie.$j.S3),recordNow(ie.$l.PDF_DOWNLOAD_URI_END),s(f.content.uri)})).catch((()=>this._dcapi.call("assets.download_uri",y).then((f=>{this._setDownloadUrlType(ie.$j.DCAPI),recordNow(ie.$l.PDF_DOWNLOAD_URI_END),s(f.content.uri)})).catch((s=>{this._setDownloadUrlType(ie.$j.NONE),f(s)})))))))}))}_dcapiGetUserDownloadUri(s,_){return RenditionAPI._isReviewAsset(_)||RenditionAPI._isParcelAsset(_)?this._reviewGetDownloadUri(s,_):this.options.useDCAPI?this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&this._assetRenditions[s].dcapi.userDownloadUri?Promise.resolve(this._assetRenditions[s].dcapi.userDownloadUri):this.dcapiPromise.then((()=>this._dcapi.call("assets.download_uri",{resource_parameter:this._dcapiGetAssetUri(s),accept:"asset_uri_download_v1.json",headers:{"x-request-id":f().v4()}}).then((f=>(this._cacheRendition(s,{dcapi:{userDownloadUri:f.content.uri}}),f.content.uri)),(s=>Promise.reject(s))))):Promise.resolve(s)}_dcapiSetLastPageNum(s,f){return RenditionAPI._isReviewAsset(f)||RenditionAPI._isParcelAsset(f)?Promise.reject(new Error("Cannot set last page number on a review/parcel asset")):this.dcapiPromise.then((()=>this._dcapi.call("assets.put_metadata_field",{resource_parameter:this._dcapiGetAssetUri(s),content_type:"asset_metadata_field_v1.json",content:{last_pagenum:f.lastPageNum-1},uri_parameters:{fields:"last_pagenum"}})))}_dcapiSetLastAccess(s,f){return RenditionAPI._isReviewAsset(f)||RenditionAPI._isParcelAsset(f)?Promise.reject(new Error("Cannot set last access on a review/parcel asset")):this.dcapiPromise.then((()=>this._dcapi.call("assets.put_metadata_field",{resource_parameter:this._dcapiGetAssetUri(s),content_type:"asset_metadata_field_v1.json",content:{last_access:""},uri_parameters:{fields:"last_access"}})))}static _fetchWithCredentials(s,f){let _,y;const S=f||{};y=S.timeout,y>=0||(y=E().http.timeout);const T=new Promise(((f,T)=>{try{_=new XMLHttpRequest,_.open("GET",s,!0),y>=0&&(_.timeout=y),S.responseType&&(_.responseType=S.responseType),S.headers&&Object.entries(S.headers).f,y)})),S.withCredentials&&(_.withCredentials=S.withCredentials),_.onreadystatechange=()=>{if(S.response_content_open){if(!_.readyState||_.readyState<2)return}else if(4!==_.readyState)return;let s;try{if(s={status:_.status,statusText:_.statusText||_.status,headers:E().http.parseHeaders(_.getAllResponseHeaders()),content:void 0},S.response_content_open||(_.responseType&&"text"!==_.responseType?s.content=_.response:s.content=_.responseText),!(_.status>0&&_.status<400))throw 0!==_.status||s.statusText||(s.statusText="Timeout or network error"),new(E().AdobeError)(s.statusText,s.status,s);f(s)}catch(f){!f||f instanceof Error?T(f):T(new(E().AdobeError)(f.stack||f,s.status,s))}},S.request_content_open||_.send(undefined)}catch(f){T(new(E().AdobeError)(f.stack||f,0,{method:"GET",url:s,options:S}))}}));return(S.request_content_open||S.response_content_open)&&(T.request=_),T}_dcapiGetContentBuffer(s,f,_){if(!this._assetRenditions[s]||!this._assetRenditions[s].dcapi||!this._assetRenditions[s].dcapi.contentBuffer){const y={responseType:"arraybuffer",withCredentials:this.options.fetchWithCredentials};return!RenditionAPI._isSignAsset(_)&&!this._isS3DownloadUrl&&this._dcapi&&this._dcapi.session&&this._dcapi.session.content&&this._dcapi.session.content.access_token&&(y.headers={Authorization:`Bearer ${this._dcapi.session.content.access_token}`}),RenditionAPI._fetchWithCredentials(f,y).then((f=>{const _=f.content;return this._cacheRendition(s,{ajs:{contentBuffer:_,contentFormat:f.headers["x-content-format"]},dcapi:{contentBuffer:_,contentFormat:f.headers["x-content-format"]}}),_}))}return Promise.resolve(this._assetRenditions[s].dcapi.contentBuffer)}_dcapiGetUserContentBuffer(s,f){if(!this._assetRenditions[s]||!this._assetRenditions[s].dcapi||!this._assetRenditions[s].dcapi.userContentBuffer){const _={responseType:"arraybuffer",withCredentials:this.options.fetchWithCredentials};return this._dcapi&&this._dcapi.session&&this._dcapi.session.content&&this._dcapi.session.content.access_token&&(_.headers={Authorization:`Bearer ${this._dcapi.session.content.access_token}`}),RenditionAPI._fetchWithCredentials(f,_).then((f=>{const _=f.content;return this._cacheRendition(s,{ajs:{userContentBuffer:_},dcapi:{userContentBuffer:_}}),_}))}return Promise.resolve(this._assetRenditions[s].dcapi.userContentBuffer)}_pdfnowGetMetadata(s,f){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this._assetRenditions[s]&&this._assetRenditions[s].pdfnow&&this._assetRenditions[s].pdfnow.contentData&&!0!==f.forceCacheless?Promise.resolve(this._assetRenditions[s].pdfnow.contentData):(this._pdfnowInitPromise()&&this._pdfnowInit(),new Promise(((y,S)=>{this.pdfnowApiPromise.then((()=>{this._pdfnowDcapi.call("assets.get_metadata",{accept:"asset_metadata_basic_v1.json",resource_parameter:s}).then((T=>{const E=T.content;E.assetMimeType=T.content_type,E.last_pagenum=T.content.last_pagenum||0;let O,M=T.content.page_count;return void 0===M&&(_===ie._U?M=1:O=this._pdfnowGetMetadata(s,f,_+1)),O||(E.numPages=M,this._cacheRendition(s,{pdfnow:{contentData:(0,ae.Xh)(E)}}),O=Promise.resolve(this._assetRenditions[s].pdfnow.contentData)),O.then(y).catch(S)})).catch(S)})).catch(S)})))}_pdfnowGetRendition(s,f){const _=f.size||"3200",y=f.format||"png",S=void 0!==f.pageNum?f.pageNum:1,T=`${s}-${S}`;if(!0===f.forceCacheless||!this._assetPageRenditions[T]||!this._assetPageRenditions[T].pdfnow||!this._assetPageRenditions[T].pdfnow.pageImgBuffer||this._assetPageRenditions[T].pdfnow.format!==y||this._assetPageRenditions[T].pdfnow.size!==_||this._assetPageRenditions[T].pdfnow.page!==S)return this._pdfnowInitPromise()&&this._pdfnowInit(),new Promise(((f,T)=>{this.pdfnowApiPromise.then((()=>{this._pdfnowDcapi.call("assets.rendition_direct",{accept:"image/*",resource_parameter:s,responseType:"arraybuffer",uri_parameters:{format:y,page:S-1,size:_}}).then((T=>{const E={params:{pageImgBuffer:T.content,mimeType:T.headers["content-type"],pageNum:S}};this._cachePageRendition(s,S,{pdfnow:{pageImgBuffer:T.content,mimeType:T.headers["content-type"],size:_,page:S,format:y}}),f(E)})).catch(T)})).catch(T)}));const E=this._assetPageRenditions[T].pdfnow,O={params:{pageImgBuffer:E.pageImgBuffer,mimeType:E.mimeType,pageNum:E.page}};return Promise.resolve(O)}_ajsGetContentData(s,f){const _=ArrayBuffer.isView(s)?s.buffer:s;(0,te.Kz)("ajsGetContentData Called",{size:_?_.byteLength:-1});const y=Object.assign({buffer:_,documentId:this._documentId,securityHandler:f.fetchPasswordCallback?new oe.Z({fetchPasswordCallback:f.fetchPasswordCallback}):void 0},f);return this._getAjs().then((()=>this.ajs.openPDF(y).then((f=>Object.assign({},f.data,{buffer:s,acrobatJSVersion:M,enableWasmExceptions:"wasm"===this.options.ajsExceptionSupport,openPDFWasmTime:Math.round(f.timeTaken)})))))}_ajsGetLinearizedContentData(s,f){return this._fetchPDFSize(s,f).then((_=>{const y=Object.assign({fetchPDFBufferRanges:y=>{if(1===y.length&&0===y[0].start&&void 0===y[0].end)return this._fetchCompletePDFBufferPromise.then((s=>[s]));const getBufferRangesFromCompleteBuffer=()=>(this._waitOnCompletePDFBufferResolve(),this._fetchCompletePDFBufferPromise.then((s=>y.map((f=>s.slice(f.start,Math.min(f.end+1,s.byteLength))))))),S=.75*_;return y.some((s=>s.end-s.start>S))?getBufferRangesFromCompleteBuffer():this._fetchPDFBufferRanges(s,f,y).cfer()))},pdfSize:_,blockSize:f.linearizationBlockSize,documentId:this._documentId},f);return this._getAjs().then((()=>this.ajs.openLinearizedPDF(y).data)))))})).catch((()=>(this._waitOnCompletePDFBufferResolve(),this._fetchPDFBufferRanges(s,f,[{start:0}]).0],f))))))}_ajsGetRenditionForPage(s,f){const _=Object.assign({devicePixelRatio:1},f);let{requestType:y}=_;const{PageRequestType:S}=O.enums;"page"===y?y=S.PAGE:"cache"===y?y=S.PAGE_CACHE:"thumbnail"===y&&(y=S.THUMBNAIL),_.requestType=y;const{priority:T,viewState:E}=_;return this._getAjs().then((()=>this.ajs.getPageRendition(_,E,T).then((s=>{const f=Object.assign({},s),{buffer:_,...y}=f.data;return f.params={pageImgBuffer:_,...y},delete f.data,f}))))}_downloadUserAssetContentBuffer(s,f){const _=f||{};return this._dcapiGetUserDownloadUri(s,_).then((f=>this._dcapiGetUserContentBuffer(s,f).then((s=>s))))}_ajsPerformCommand(s,f){const{commandName:_}=f;if("forceSwitchJS"===_)return this._resetReviewProvider(),this._getAjs().ker()));if("resetWorker"===_)return this._assetRenditions[s]&&this._assetRenditions[s].ajs&&delete this._assetRenditions[s].ajs,this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&(delete this._assetRenditions[s].dcapi.contentData,delete this._assetRenditions[s].dcapi.contentBuffer,delete this._assetRenditions[s].dcapi.contentFormat),this._assetRenditions[s]&&this._assetRenditions[s].external&&(delete this._assetRenditions[s].external.contentBuffer,delete this._assetRenditions[s].external.metadata),this.closeRendition(s,{...f,cancelPromises:!0}),this._resetReviewProvider(),this._getAjs().then((()=>(this.ajs.terminate(),this._resetAjsPerfTimings(),this._ajsSetup())));if("translateToLiquidModeView"===_)return this._getAjs().then((()=>this.ajs.translateToLiquidModeView({fetchCNFTPDFUpdatesCallback:AdobeSenseiPredictClient})));if("verifyDigitalSignatures"===_){const s=(()=>{const s=[];return ce.isAvailable()&&s.push(new ce),ue.isAvailable()&&s.push(new ue),s})();return this._getAjs().s:s})))}if("remapAJSCache"===_){const{oldAssetUri:s,newAssetUri:_}=f,y=this._assetRenditionsIndex.indexOf(s);return this._assetRenditions[s]&&this._assetRenditions[s].ajs&&(this._assetRenditions[_]=this._assetRenditions[_]||{},this._assetRenditions[_].ajs=this._assetRenditions[s].ajs,this._assetRenditionsIndex.splice(y,1),this._assetRenditionsIndex.includes(_)||this._assetRenditionsIndex.push(_)),Promise.resolve()}return this._getAjs().then((()=>{if(this.ajs[_]){const{priority:s,viewState:y,...S}=f;return this.ajs[_](S,y,s)}return(0,te.Kz)("Unknown AJS Command",{commandName:_}),Promise.reject(new Error("Unknown AJS command"))}))}_dcapiPerformCommand(s,f){return this.dcapiPromise.then((()=>new Promise(((_,y)=>{"setLastPageNum"===f.commandName?this._dcapiSetLastPageNum(s,f).then(_).catch(y):"setLastAccess"===f.commandName?this._dcapiSetLastAccess(s,f).then(_).catch(y):"getContentBuffer"===f.commandName?this.downloadAssetContentBuffer(s,f).then(_).catch(y):"getUserContentBuffer"===f.commandName?this._downloadUserAssetContentBuffer(s,f).then(_).catch(y):y()}))))}_externalPerformCommand(s,f){return new Promise(((_,y)=>{"setLastPageNum"===f.commandName?_():"getContentBuffer"===f.commandName?this.downloadAssetContentBuffer(s,f).then(_).catch(y):"setLastAccess"===f.commandName||"getUserContentBuffer"===f.commandName?_():yhis)}performCommandSynchronously(s,f){const{commandName:_}=f;if(this.ajs[_]){const{priority:s,viewState:y,...S}=f;return this.ajs[_](S,y,s)}return Promise.reject(new Error("Unknown AJS command"))}performCommand(s,f){const _={},y=f||{};return y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,y.useAJS=!1!==y.useAJS&&this.options.useAJS,y.enableExternal=!1!==y.enableExternal&&this.options.enableExternal,y.useAJS?_.ajs=this._ajsPerformCommand(s,y):_.ajs=Promise.reject(new Error("Cannot perform AJS command if AJS is disabled")),y.useDCAPI?_.dcapi=this._dcapiPerformCommand(s,y):_.dcapi=Promise.reject(new Error("Cannot perform DCAPI command if DCAPI is disabled")),y.enableExternal&&RenditionAPI._isExternalAsset(y)&&(_.external=this._externalPerformCommand(s,y)),_}isCompletePDFBufferAvailable(){return this._completePDFBufferAvailablePromise}getMetadata(s,f){const _={},y=f||{};return y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,y.useAJS=!1!==y.useAJS&&this.options.useAJS,y.enableExternal=!1!==y.enableExternal&&this.options.enableExternal,this.options.shouldUseModernViewer=y.shouldUseModernViewer,y.useDCAPI?_.dcapi=this._dcapiGetMetadata(s,y):_.dcapi=Promise.reject(new Error("Cannot get DCAPI metadata if DCAPI is disabled")),y.enableExternal&&RenditionAPI._isExternalAsset(y)&&(_.external=this._externalGetMetadata(s,y)),y.useAJS?_.ajs=this._ajsGetMetadata(s,y):_.ajs=Promise.reject(new Error("Cannot get AJS metadata if AJS is disabled")),_}_ajsRegisterLicense(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const f={token:s.licenseString,domain:s.domain};return this._getAjs().se(f)))}registerLicense(s){const f={},_=s||{};return _.useDCAPI=!1!==_.useDCAPI&&this.options.useDCAPI,_.useAJS=!1!==_.useAJS&&this.options.useAJS,f.dcapi=Promise.reject(new Error("DCAPI doesn't support sdk license validation")),_.useAJS?f.ajs=this._ajsRegisterLicense(_):f.ajs=Promise.reject(new Error("Cannot register license if AJS is disabled")),f}getRendition(s,f){const _={},y=f||{};return y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,y.useAJS=!1!==y.useAJS&&this.options.useAJS,y.enableExternal=!1!==y.enableExternal&&this.options.enableExternal,y.useDCAPI?_.dcapi=this._dcapiGetRendition(s,y):_.dcapi=Promise.reject(new Error("Cannot get DCAPI rendition if DCAPI is disabled")),y.enableExternal&&RenditionAPI._isExternalAsset(y)&&(_.external=this._externalGetRendition(s,y)),y.useAJS?_.ajs=this._ajsGetRenditionForPage(s,y):_.ajs=Promise.reject(new Error("Cannot get AJS rendition if AJS is disabled")),_}getDocumentRenditionUri(s,f){const _={},y=f||{};return y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,y.useAJS=!1!==y.useAJS&&this.options.useAJS,y.useDCAPI?_.dcapi=this._dcapiGetDocumentRenditionUri(s,y):_.dcapi=Promise.reject(new Error("Cannot get DCAPI doc rendition URI if DCAPI is disabled")),_.ajs=Promise.reject(new Error("Cannot get AJS doc rendition URI")),_}getDocumentRendition(s,f){const _={},y=f||{};return y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,y.useAJS=!1!==y.useAJS&&this.options.useAJS,y.useDCAPI?_.dcapi=this._dcapiGetDocumentRendition(s,y):_.dcapi=Promise.reject(new Error("Cannot get DCAPI doc rendition if DCAPI is disabled")),_.ajs=Promise.reject(new Error("Cannot get AJS doc rendition")),_}getDocumentRenditionStatus(s,f){const _={},y=f||{};return y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,y.useAJS=!1!==y.useAJS&&this.options.useAJS,y.useDCAPI?_.dcapi=this._dcapiGetDocumentRenditionStatus(s):_.dcapi=Promise.reject(new Error("Cannot get DCAPI doc rendition status if DCAPI is disabled")),_.ajs=Promise.reject(new Error("Cannot get DCAPI doc rendition status")),_}downloadAssetContentBuffer(s,f){return f&&RenditionAPI._isExternalAsset(f)?this._externalGetDownloadUri(s,f).then((f=>this._externalGetContentBuffer(s,f).then((s=>s)))):this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&this._assetRenditions[s].dcapi.contentBuffer?Promise.resolve(this._assetRenditions[s].dcapi.contentBuffer):this._dcapiGetDownloadUri(s,f).then((_=>this._dcapiGetContentBuffer(s,_,f).then((s=>s))))}clearRenditionCache(s,f){const _=f||{},y=`${s}`;return _.useDCAPI=!1!==_.useDCAPI&&this.options.useDCAPI,_.useAJS=!1!==_.useAJS&&this.options.useAJS,_.enableExternal=!1!==_.enableExternal&&this.options.enableExternal,_.useAJS&&this._assetRenditions[s]&&this._assetRenditions[s].ajs&&delete this._assetRenditions[s].ajs,_.useDCAPI&&this._assetRenditions[s]&&this._assetRenditions[s].dcapi&&delete this._assetRenditions[s].dcapi,_.enableExternal&&this._assetRenditions[s]&&this._assetRenditions[s].external&&delete this._assetRenditions[s].external,this._getAssetFileInfoPromise[y]&&delete this._getAssetFileInfoPromise[y],Promise.resolve()}closeRendition(s,f){const _={dcapi:Promise.resolve(),ajs:Promise.resolve()},y=f||{},S=`${s}`;if(y.useDCAPI=!1!==y.useDCAPI&&this.options.useDCAPI,this._assetRenditions[s]&&y.clearCache&&(delete this._assetRenditions[s],this._assetRenditionsIndex=this._assetRenditionsIndex.fif!==s))),y.clearCache){this._assetPageRenditions=Object.entries(this._assetPageRenditions).reduce(((f,_)=>{let[y,S]=_;return y.startsWith(s)||(f[y]=S),f}),{}),this._assetPageRenditionsIndex=Object.keys(this._assetPageRenditions);const f=Object.entries(this._assetPageRenditionPromises);this._assetPageRenditionPromises=f.reS),f}),{})}this._getAssetFileInfoPromise[S]&&delete this._getAssetFileInfoPromise[S],y.useDCAPI&&void 0!==y.lastPageNum&&(_.dcapi=this._dcapiSetLastPageNum(s,y)),y.cancelPromises&&(re.forel()})),rer}}const he={rendition:{load:function renditionLoad(){return Promise.resolve(RenditionAPI)}},"font-provider":{load:function loadFontProvider(s){return __webpack_require__.p=s,__webpack_require__.e(611).then(__webpack_require__.bind(__webpack_require__,"MiuD")).then((s=>s.default))}},acrobatjs:lt))}}};RenditionAPI.getInstance=(0,ee.getSingletonFunction)(RenditionAPI,!0),q.providers.rendition=RenditionAPI.getInstance})(),((window.adobe_dc_sdk=window.adobe_dc_sdk||{}).components=window.adobe_dc_sdk.components||{}).rendition=S})();
//# sourceMappingURL=private/rendition.js.map