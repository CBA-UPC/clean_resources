/*!For license information please see index.js.LICENSE.txt*/var TrfAdManager=function(t){var e=window.webpackHotUpdateTrfAdManager;window.webpackHotUpdateTrfAdManager=var n,r=!0,o="3b13fc26103cfd35bd42",i=1e4,a={},l=[],u=[];function c(t){var e=P[t];if(!e)return T;var r=function(r){return e.hot.active?(P[r]?-1===P[r].parents.indexOf(t)&&P[r].parents.push(t):(l=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):l=[],T(r)},o=for(var i in T)Object.prototype.hasOwnProperty.call(T,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=r.t=r}var s=[],f="idle";ar h,y,d,v,m=0,b=0,g={},w={},_={};unction k(t){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=t,p("check"),i).then((function(t){if(!t)return p(C()?"ready":"idle"),null;w={},g={},_=t.c,d=t.h,p("prepare");var e=new Promise(();return y={},x(0),"prepare"===f&&0===b&&0===m&&O(),e}))}nction S(e){if("ready"!==f)throw new Error("apply() is only allowed in ready status");return function e(r){var i,u,c,s,f;);var b={},g=[],w={},k=function(){};for(var x in y)if(Object.prototype.hasOwnProperty.call(y,x)){var O;f=E(x);var S=!1,j=!1,I=!1,A="";switch((O=y[x]?h(f):{type:"disposed",moduleId:x}).chain&&(A="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":r.onDeclined&&r.onDeclined(O),r.ignoreDeclined||(S=new Error("Aborted because of self decline: "+O.moduleId+A));break;case"declined":r.onDeclined&&r.onDeclined(O),r.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+A));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(O),r.ignoreUnaccepted||(S=new Error("Aborted because "+f+" is not accepted"+A));break;case"accepted":r.onAccepted&&r.onAccepted(O),j=!0;break;case"disposed":r.onDisposed&&r.onDisposed(O),I=!0;break;default:throw new Error("Unexception type "+O.type)}if(S)return p("abort"),Promise.reject(S);if(j)for(f in w[f]=y[f],m(g,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,f)&&(b[f]||(b[f]=[]),m(b[f],O.outdatedDependencies[f]));I&&(m(g,[O.moduleId]),w[f]=k)}var M,D=[];for(u=0;u<g.length;u++)f=g[u],P[f]&&P[f].hot._selfAccepted&&w[f]!==k&&!P[f].hot._selfInvalidated&&D.push({module:f,parents:P[f].parents.slice(),errorHandler:P[f].hot._selfAccepted});p("dispose"),Object.keys(_).forEach(();for(var H,R,L=g.slice();L.length>0;)if(f=L.pop(),s=P[f]){var N={},F=s.hot._disposeHandlers;for(c=0;c<F.length;c++)(i=F[c])(N);for(a[f]=N,s.hot.active=!1,delete P[f],delete b[f],c=0;c<s.children.length;c++){var W=P[s.children[c]];W&&(M=W.parents.indexOf(f))>=0&&W.parents.splice(M,1)}}for(f in b)if(Object.prototype.hasOwnProperty.call(b,f)&&(s=P[f]))for(R=b[f],c=0;c<R.length;c++)H=R[c],(M=s.children.indexOf(H))>=0&&s.children.splice(M,1);for(f in p("apply"),void 0!==d&&(o=d,d=void 0),y=void 0,w)Object.prototype.hasOwnProperty.call(w,f)&&(t[f]=w[f]);var U=null;for(f in b)if(Object.prototype.hasOwnProperty.call(b,f)&&(s=P[f])){R=b[f];var V=[];for(u=0;u<R.length;u++)if(H=R[u],i=s.hot._acceptedDependencies[H]){if(-1!==V.indexOf(i))continue;V.push(i)}for(u=0;u<V.length;u++){i=V[u];try{i(R)}catch(t){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:f,dependencyId:R[u],error:t}),r.ignoreErrored||U||(U=t)}}}for(u=0;u<D.length;u++){var B=D[u];f=B.module,l=B.parents,n=f;try{T(f)}catch(t){if("function"==typeof B.errorHandler)try{B.errorHandler(t)}catch(e){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:f,error:e,originalError:t}),r.ignoreErrored||U||(U=e),U||(U=t)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:f,error:t}),r.ignoreErrored||U||(U=t)}}return U?(p("fail"),Promise.reject(U)):v?e(r).then(():(p("idle"),new Promise((function(t){t(g)})))}(e=e||{})}r P={};function T(e){if(P[e])return P[e].exports;var r=P[e]={i:e,l:!1,exports:{},hot:function(e){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:decline:dispose:function(t){r._disposeHandlers.push(t)},addDisposeHandler:function(t){r._disposeHandlers.push(t)},removeDisposeHandler:invalidate:check:k,apply:S,status:addStatusHandler:function(t){s.push(t)},removeStatusHandler:data:a[e]};return n=void 0,r}(e),parents:(u=l,l=[],u),children:[]};return t[e].call(r.exports,r,r.exports,c(e)),r.l=!0,r.exports}return T.m=t,T.c=P,T.d=T.r=T.t=T.n=T.o=T.p="",T.h=function(){return o},c(94)(T.s=94)}([,function(t,e,n){e.f=n(4)},?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n(35),nall(o,a,c):a,c+=1;return u.length=l,u}}()),n(14),n(3),n(15),n(18);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new Map}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"setWidget",value:function(t,e){this.map.set(t,e)}},{key:"get",value:function(t){var e=this.map.get(t);return null==e?null:e}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var i=o;function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defia function")}(this,t),this.map=new Map}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"set",value:function(t,e){this.map.set(t,new e)}},{key:"get",value:function(t){var e=this.map.get(t);return null==e?null:e}},{key:"decide",value:function(t){for(var e=Array.from(this.map.values()),n=0;n<e.length;n++){var r=e[n];if(r.isOptionsValid(t))return r}return null}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var u=l;function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widgetFactory=i.getInstance(),this.contentProviderFactory=u.getInstance(),this.map=new Map,this.instanceMap=new Map}return function(t,e,n){e&&c(t.prototype,e),value:function(t,unction(t){return this._getInstance(t)}},{key:"_getInstance",value:function(t){var e=this.instanceMap.get(t);if(null==e){var n=this.map.get(t);if(null==n)return null;e=new n(this.widgetFactory,this.contentProviderFactory,this),this.instanceMap.set(t,e)}return e}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();s.instance=null;var f=s;function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defis as a function")}(this,t),this.type=e}return function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(t,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;if(window.traffective.logger)for(var o=0;o<e.length;o++){var i;(i=window.traffective).logger.apply(i,[this.type+": "+new String(e[o])].concat(e))}else(r=console).log.apply(r,[this.type,":"].concat(e))}}],[{key:"get",value:function(e){return void 0===e&&(e="default"),void 0===t.instances.get(e)&&t.instances.set(e,new t(e)),t.instances.get(e)}}]),t}();h.instances=new Map;var y=h;function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.,t),this.containerNode=e,this.params=n}return function(t,e,n){e&&d(t.prototype,e)}(t,[{key:"init",value:function(){throw new Error("Not implemented")}}]),t}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(64);var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&b(t,n)}(t,0,ion(t){return t.previousElementSibling}},{key:"setStyleByElements",value:function(e,n,r){for(var o=0;o<e.length;o++)t.setStyle(e[o],n,r)}},{key:"setStyle",value:function(t,e,n){var r=n;!0===(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).important&&(r+="!important"),t.style.cssText=t.style.cssText+";"+e+":"+r}},{key:"setClass",value:function(t,e){var n=t.className.split(" "),r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)if(a.value===e)return}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}n.push(e),t.className=n.join(" ")}},{key:"unsetClass",value:function(t,e){var n=t.className.split(" "),r=[],o=!0,i=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c!==e&&r.push(c)}}catch(t){i=!0,a=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}t.className=r.join(" ")}},{key:"appendStyle",value:function(t,e){var n=e.createElement("style");n.type="text/css",n.appendChild(e.createTextNode(t)),e.head.appendChild(n)}},{key:"isNode",value:function(t){return"object"===("undefined"==typeof Node?"undefined":m(Node))?t instanceof Node:t&&"object"===m(t)&&"number"==typeof t.nodeType&&"string"==typ.nodeType&&"string"==typeof t.nodeName}},{key:"getScrollY",value:function(t){if(void 0!==t.scrollY)return t.scrollY;if(void 0!==t.pageYOffset)return t.pageYOffset;throw new Error("Browser doesnt support scrollY and pageYOffset")}}]),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(47);var _=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.document=e.ownerDocument,this.params=n,this.userContent=null,this.elementHeight=null,this.userContentHeight=null,this.contentPosition=null,this.elementPosition=null,this.debug=!1,this.viewportHeight=0,this.touchmoveEvents=0,this._resizeWindow()}return function(t,e,n){e&&w(t.prototype,e)}(t,[{key:"init",value:function(){this._injectCss(),this._build()}},{key:"_injectCss",value:function(){var e=this.document.createElement("style");e.setAttribute("type","text/css"),e.appendChild(this.document.createTextNode(t.css)),this.document.head.appendChild(e)}},{key:"_build",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");null===this.params.clipWidth?this.element.style.display="block":(this.element.style.display="inline-block",this.element.style.width=this.params.clipWidth+"px"),this.element.style.height=this.params.clipHeight+"px";var t=Math.round((this.params.clipWidth-this.params.width)/2),e=this.element.children[0];e.style.marginLeft=t+"px",g.setClass(e,"trf-parallax-content");var n=this.document.createElement("div");n.className="trf-parallax-container";var r=this.document.createElement("div"),o=n.appendChild(r);r.className="trf-parallax-divAbs";var i=this.document.createElement("div");r.appendChild(i),i.className="trf-parallax-divFix";var a=this.document.createElement("div");i.appendChild(a),a.className="trf-parallax-divCreativeHolder",this.userContent=a.appendChild(e),this.element.appendChild(n).style.height=this.params.clipHeight+"px",this.userContent.style.height=this.params.adHeight+"px",this.userContent.style.top="0px",this.userContent.style.willChange="transform",this.elementHeight=this.element.offsetHeight,this.userContentHeight=this.userContent.offsetHeight,null===this.params.clipWidth&&this.document.defaultView.setInterval(this._updateContainerWidth.bind(this),500),this.document.defaultView.addEventListener("resize",this._resizeWindow.bind(this)),this._prepareDebuggin((function(){r=null,t.apply(e,n)}),10)}}(this._positionUserContent.bind(this));this._loop(l)}},{key:"_loop",value:function(t){t(),this.document.defaultView.requestAnimationFrame(this._loop.bind(this,t))}},{key:"_resizeWindow",value:function(){this.viewportHeight=this.document.defaultView.innerHeight}},{key:"_updateContainerWidth",value:function(){var t=this.element.getBoundingClientRect(),e=t.right-t.left,n=Math.round((e-this.params.width)/2);this.userContent.style.marginLeft=n+"px"}},{key:"_positionUserContent",value:function(t){this.touchmoveEvents++;var e=this._getElementPosition(this.element);if(this.elementPosition!==e){this.elementPosition=e;var n=e/(this.viewportHeight-this.elementHeight);n>1?n=1:n<0&&(n=0);var r=-1*n*(this.userContentHeight-this.viewportHeight);this.userContent.style.WebkitTransform="translateY("+r+"px)",this.userContent.style.transform="translateY("+r+"px)",this.contentPosition!==r&&(this.contentPosition=r)}}},{key:"_prepareDebugging",value:function(t){if(!1!==this.debug){var e=this.document.createElement("div");e.className="trf-parallax-debug",t.appendChild(e)}}},{key:"_debug",value:function(t){if(!1!==this.debug){var e=this.element.querySelector(".trf-parallax-debug"),n=[];for(var r in t)n.push(r+": "+JSON.stringify(t[r]));e.innerHTML=n.join("<br/>")}}},{key:"_getElementPosition",value:function(t){return t.getBoundingClientRect().top}}]),t}();_.css="\n            .trf-parallax-container * {\n                -moz-transition: none;\n                -webkit-transition: none;\n                -o-transition: color 0 ease-in;\n                transition: none;\n            }\n\n            .trf-parallax-container {\n                width: 100%;\n                position: relative;\n                overflow: initial;\n                margin: 0 auto;\n            }\n\n            .trf-parallax-debug {\n                position:absolute;\n                top:10px;\n                left:10px;\n                z-index:999;\n                background-color:white;\n                color:black;\n                padding:10px;\n                border:1px solid black;\n                width:300px;\n            }\n\n            .trf-parallax-divAbs {\n                width: 100%;\n                height: 100%;\n                overflow: auto;\n                position: absolute;\n                top: 0;\n                left: 0;\n                clip: rect(auto,auto,auto,auto);\n            }\n\n            .trf-parallax-divFix {\n                height: 100%;\n                height: 100vh;\n                width:100%; /* Maximalbreite definieren */\n                position: fixed;\n                top: 0px;\n                -moz-transform: translateZ(0);\n                -webkit-transform: translateZ(0);\n                -ms-transform: translateZ(0);\n                -o-transform: translateZ(0);\n                transform: translateZ(0);\n                margin: 0 auto;\n            }\n\n            .trf-parallax-divCreativeHolder {\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                -moz-transform: translateZ(0);\n                -webkit-transform: translateZ(0);\n                -ms-transform: translateZ(0);\n                -o-transform: translateZ(0);\n                transform: translateZ(0);\n            }\n\n            .trf-parallax-content {\n                left:0;\n                /*right:0;*/\n                /*margin:auto;*/\n                border: none;\n                position: absolute;\n                bottom: 0;\n                -moz-transform: translateZ(0);\n                -webkit-transform: translateZ(0);\n                -ms-transform: translateZ(0);\n                -o-transform: translateZ(0);\n                transform: translateZ(0);\n            }\n\n";var E=_;function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=O(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,v),function(t,e,n){e&&x(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new E(this.containerNode,this.params),this.widget.init()}}]),e}();function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var P=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.document=e.ownerDocument,this.params=n,this.userContent=null,this.elementHeight=null,this.userContentHeight=null,this.contentPosition=null,this.elementPosition=null,this.debug=!1,this.viewportHeight=0,this._resizeWindow()}return function(t,e,n){e&tion(){this._injectCss(),this._build()}},{key:"_injectCss",value:function(){var e=this.document.createElement("style");e.setAttribute("type","text/css"),e.appendChild(this.document.createTextNode(t.css)),this.document.head.appendChild(e)}},{key:"_build",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");null===this.params.clipWidth?this.element.style.display="block":(this.element.style.display="inline-block",this.element.style.width=this.params.clipWidth+"px"),this.element.style.height=this.params.clipHeight+"px",this.element.style.overflow="hidden",this.userContent=this.document.createElement("div");var t=!0,e=!1,n=void 0;try{for(var r,o=this.element.children[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;this.userContent.appendChild(i)}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.element.appendChild(this.userContent),this.userContent.style.willChange="transform",this.userContent.style.height=this.params.adHeight+"px",this.userContent.style.overflow="hidden",this.elementHeight=this.element.offsetHeight,this.userContentHeight=this.userContent.offsetHeight,null===this.params.clipWidth&&this.document.defaultView.setInterval(this._updateContainerWidth.bind(this),500),this.document.defaultView.addEventListener("resize",this._resizeWindow.bind(this)),this._loop()}},{key:"_updateUserContentDimensions",value:function(){!0===this.params.adjustToContentHeight&&(this.userContentHeight=this.userContent.offsetHeight,this.elementHeight=this.element.offsetHeight)}},{key:"_loop",value:function(){this._updateUserContentDimensions(),this._positionUserContent(),this.document.defaultView.requestAnimationFrame(this._loop.b=this.document.defaultView.innerHeight}},{key:"_updateContainerWidth",value:function(){var t=this.element.getBoundingClientRect(),e=t.right-t.left,n=Math.round((e-this.params.width)/2);this.userContent.style.marginLeft=n+"px"}},{key:"_positionUserContent",value:function(){var t=this._getElementPosition(this.element);this.elementPosition=t;var e=t/(this.viewportHeight-this.elementHeight);e>1?e=1:e<0&&(e=0);var n=-1*e*(this.userContentHeight-this.elementHeight);this.userContent.style.transform="translateY("+n+"){return t.getBoundingClientRect().top}}]),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}P.css="\n";var D=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,A(e).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,P),function(t,e,n){e&&I(t.prototype,e)}(e,[{key:"_positionUserContent",value:function(){var t=(this.viewportHeight-this.userContentHeight)/2-this._getElementPosition(this.element);this.userContent.style.transform="translateY("+Math.floor(t)+"px)"}}]),e}();function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var R=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.userContent=null,this.document=e.ownerDocument,this.params=n,this.cache={contentHeight:null}}return function(t,e,n){e&&H(t.prototype,e)}(t,[{key:"init",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");var t=null!==this.params.clipWidth?this.params.clipWidth+"px":"100%";this.element.style.position="relative",this.element.style.display="block",this.element.style.width=t,this.element.style.height=this.params.clipHeight+"px";var e=this.document.createElement("div");this.element.appendChild(e),e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.clip="rect(0px, auto, auto, 0px)",null!==this.params.width&&this.params.width,this.userContent=this.document.createElement("div");var n=!0,r=!1,o=void 0;try{for(var i,a=this.element.children[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this.userContent.appendChild(l)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}e.appendChild(this.userContent),this.userContent.style.position="fixed",this.params.adHeight&&(this.userContent.style.height=this.params.adHeight+"px"),this.userContent.style.display="block",this.userContent.style.overflow="hidden",this.userContent.style.top="50%",this.userContent.style.transform="translateY(-50%)",this._updateContentPosition(this.params.width),setInterval(this._updateContentPosition.bind(this,this.params.width),200)}},{key:"_updateContentPosition",value:function(t){var e=this.userContent.parentElement.getBoundingClientRect(),n=e.right-e.left;null===t?this.userContent.style.width=n:(this.userContent.style.width=t+"px",this.userContent.style.marginLeft=Math.round((n-t)/2)+"px")}}]),t}();function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var N=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.userContent=null,this.document=e.ownerDocument,this.params=n,this.cache={contentHeight:null}}return function(t,e,n){e&&L(t.prototype,e)}(t,[{key:"init",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");var t=null!==this.params.clipWidth?this.params.clipWidth+"px":"100%";this.element.style.position="relative",this.element.style.display="block",this.element.style.width=t,this.element.style.height=this.params.clipHeight+"px";var e=this.document.createElement("div");this.element.appendChild(e),e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.clip="rect(0px, auto, auto, 0px)",null!==this.params.width&&this.params.width,this.userContent=this.document.createElement("div");var n=!0,r=!1,o=void 0;try{for(var i,a=this.element.children[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this.userContent.appendChild(l)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}e.appendChild(this.userContent),this.userContent.style.position="fixed",this.userContent.style.display="block",this.userContent.style.overflow="hidden",this.userContent.style.top="50%",this.userContent.style.left="50%",this.userContent.style.transform="translate3d(-50%, -50%, 0px)",this._updateContentPosition(this.params.width),setInterval(this._updateContentPosition.bind(this,this.params.width),200)}},{key:"_updateContentPosition",value:function(t){var e=this.userContent.parentElement.getBoundingClientRect(),n=e.right-e.left;null===t?this.userContent.style.width=n:(this.userContent.style.width=t+"px",this.userContent.style.marginLeft=Math.round((n-t)/2)+"px")}}]),t}();function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.strategies=new Map,this.strategies.set("default",P),this.strategies.set("static",D),this.strategies.set("staticCss",R),this.n(t,e,n){e&&F(t.prototype,e),n&&F(t,n)}(t,[{key:"get",value:function(t,e,n){return new(this.strategies.genstance&&(t.instance=new t),t.instance}}]),t}();function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}W.instance=null;var V=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=void 0===n.underscrollerType?"default":n.underscrollerType;this.behaviour=W.getInstance().get(r,e,n)}return function(t,e,n){e&value:function(){this.behaviour.init()}}]),t}();function B(t){return(B="function"==typeof St!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writablon(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r)() hasn't been called");return t}(t):e}(this,(t=q(e)).call.apply(t,[itablv),function(t,e,n){e&&G(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new V(this.containerNode,this.params),this.widget.init()}}]),e}();function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(89),n(111);var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&Z(t,n)}(t,0,[{key:"isInternetExplorer",value:function(t){var e=!1,n=t.navigator.userAgent,r=n.indexOf("MSIE "),o=n.indexOf("Trident/"),i=n.indexOf("Edge");return(r>-1||o>-1||-1!==i)&&(e=!0),e}}]),t}();function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&K(t,n)}(t,0,[{key:"parse",value:function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",o=e.toString(),i={},a=t.getNormalizedParameters(o,r,n.length),l=0;l<n.length;l++){var u=a[l],c=n[l],s=t.parseParameter(u,c);i[c.name]=s}return i}},{key:"minLengthOrDefault",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null==t||t.toString().length<e?n:t}},{key:"getNormalizedParameters",value:function(t,e,n){var r=new Array(n);if(r.fill(void 0),void 0===t)return r;var o=t.split(e),i=0,a=!0,l=!1,u=void 0;try{for(var c,s=o[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value;if(i===n)break;var p=f.trim();0!==p.length&&(r[i]=p,i++)}}catch(t){l=!0,u=t}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}return r}},{key:"parseParameter",value:function(t,e){try{if("int"===e.type){var n=parseInt(t);return Number.isNaN(n)?e.default:n}}catch(t){return e.default}}}]),t}();function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(113),n(114);var Q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&X(t,n)}(t,0,[{key:"getPropertyByPath",value:function(t,e){var n=t,r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(null==n)return;n=n[u]}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}}]),t}();function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var et=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&tt(t,n)}(t,0,[{key:"isOriginal",value:function(t){var e=t.split("."),n=Q.getPropertyByPath(window,e);if(null==n)throw new Error("Function not found");return!!n.toString().includes("[native code]")}},{key:"callFunction",value:function(t,e){var n,r=t.split(".");if(this.isOriginal(t))n=Q.getPropertyByPath(window,r);else{var o=this.getOrCreateIframe().contentWindow;n=Q.getPropertyByPath(o,r)}if(null==n)throw new Error("Funt to spread non-iterable instance")}()}(e))}},{key:"getOrCreateIframe",value:function(){return null==this.iframe&&(this.iframe=document.createElement("iframe"),this.iframe=document.body.appendConfigurable:!0,writable:!0}):t[ call s,t)}return function(t,e,n){n&&nt(t,n)}(t,0,[{key:"getInfoByElement",value:function(t){var e={hasDeclaration:!1,outerHeight:0};if(!1===t.classList.contains(this.ClassName))return e;var n=et.callFunction("getComputedStyle",[t,":before"]);return e.hasDeclaration=!0,e.outerHeight=this.parseFloatOrDefault(n.height,0)+this.parseFloatOrDefault(n.marginTop,0)+this.parseFloatOrDefault(n.marginBottom,rseFloat(t);return Number.isNaN(n)?e:n}}]),t}();function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){re0,configurable:!0,writable:!0}):t[e]=n}(rt,"ClassName","trf-declaration-container");var lt=function(){function t(){ot(this,t)}return at(t,null,[{key:"getAvailableWidth",value:function(t,e){t.ownerDocument.defaultView;var n=e.getBoundingClientRect().right;return t.ownerDocument.getElementsByTagName("html")[0].clientWieturn t.getViewHeight(n.owneon(t){return t.defaultView.innerHeight}}]),t}(),ut=function(){function t(e,n){ot(this,t),this.document=e.ownerDocument,this.params=n,this.skyElement=e,this.contextElement=n.contextElement,this.topMargin=this._parseTopMargin(n.topMargin),this.intervalId=null,this.bottomAnchorElement=null,this.scrollEventListener=this._reposition.bind(this)}return at(t,[{key:"init",value:function(){void 0!==this.skyElement.sitebarWidget&&this.skyElement.sitebarWidget.destroy(),this.skyElement.sitebarWidget=this,void 0!==this.params.bottomAnchorSelector&&(this.bottomAnchorElement=this.document.querySelector(this.params.bottomAnchorSelector)),this._build()}},{key:"destroy",value:function(){this.document.removeEventListener("scroll",this.scrollEventListener),this.document.defaultView.clearInterval(this.intervalId),delete this.skyElement.sitebarWidget}},{key:"_build",value:function(){var t=this;this._prepareSky(),this.intervalId=this.document.defaultView.setInterval((function(){t._reposition()}),500),this.document.addEventListener("scroll",this.scrollEventListener)}},{key:"_reposition",value:function(){var t=this.contextElement.getBoundingClientRect(),e=0;if("left"===this.params.position)this.skyElement.style.left=0,e=t.left-this.params.leftMargin;else this.skyElement.style.marginLeft=this.params.leftMargin+"px",e=lt.getAvailableWidth(this.skyElement,this.contextElement),null!=this.params.leftMargin&&(e-=this.params.leftMargin),this.skyElement.style.left=t.right+"px";this.skyElement.style.width=e+"px";var n=t.top,r=g.getScrollY(this.document.defaultView)>=this.topMargin.scrollThreshold?this.topMargin.afterScroll:this.topMargin.beforeScroll;n<r&&(n=r);var o=0;null!=this.bottomAnchorElement&&(o=lt.getViewHeight(this.bottomAnchorElement.ownerDocument)-this.bottomAnchorElement.getBoundingClientRect().top)<0&&(o=0),n-=o,this.skyElement.style.top=n+"px";var i=lt.getAvailableHeight(this.skyElement,this.contextElement)-n,a=rt.getInfoByElement(this.skyElement);a.hasDeclaration&&(i-=a.outerHeight),i-=o,this.skyElement.style.height=i+"px"}},{key:"_prepareSky",value:function(){g.setStyle(this.skyElement,"position","fixed",{important:!0}),this.skyElement.style.float="none",this.skyElement.style.bottom="",this.skyElement.style.right="",this.skyElement.style.marginLeft="",this.skyElement.style.marginRight="",this.skyElement.style.marginTop="",this.skyElement.style.marginBottom="",this.skyElement.style.zIndex="2",this.skyElement.style.top=this.topMargin.beforeScroll+"px",this._reposition()}},{key:"_parseTopMargin",value:function(t){var e=$.parse(t,[{name:"beforeScroll",type:"int",default:0},{name:"afterScroll",type:"int",default:null},{name:"scrollThreshold",type:"int",default:1}]);return null===e.afterScroll&&(eymbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=ft(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(e,v),function(t,e,n){e&&st(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new ut(this.containerNode,this.params),this.widget.init()}}]),e}();function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(21),n(19);var dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.idToElementMap=new Map}return function(t,e,n){e&&yt(t.prototype,e),n&&yt(t,n)}(t,[{key:"register",value:function(t,e){this.idToElemenreturn this.idToElementMap.delete(t),e}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();dt.instance=null;for(var vt=dt,mt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),bt=new Uint8Array(16),gt=[],wt=0;wt<256;++wt)gt.push((wt+256).toString(16).substr(1));var _t=functionomvalues-not-supported");return mt(bt)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var ogt[t[n+ass as a function")}(this,t),this.id=e};function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xt=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widgetFactory=e,this.contentProviderFactory=n,this.templateFactory=r,this.logger=y.get("Adlib"),this.templateStore=vt.getInstance()}return function(t,e,n){e&&kt(t.prototype,e)}(t,[{key:"_destroyWidget",value:function(t,e){var n=this.templateStore.unregister(t);void 0!==n&&(n.trfWidgetInstance.destroy(e===n),delete n.trfWidgetInstance)}},{key:"build",value:function(){throw new Error("Not implemented")}},{key:"_buildWidget",value:function(t,e,n){var r=n.id;void 0===r&&(r=_t());var o=this.widgetFactory.get(t);if(null===o)throw new Error("Ad with id "+t+" not implemented.");var i=new o(e,n);return e.trfWidgetInstance=i,i.init(),this.templateStore.register(r,e),new Et(r)}},{key:"_broadcastEvent",value:function(t,e){var n=new CustomEvent(t,{bubbles:!1});e.dispatchEvent(n);var r=!0,o=!1,i=void 0;try{for(var a,l=e.children[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;this._broadcastEvent(t,u)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}teDeployed&&t.eventTemplateDeployed(e)}},{key:"_hideGoogleIframe",value:function(t){var e=t.querySelector("[id^='google']");null!==e&&(e.style.display="none")}},{key:"_stopRefresh",value:function(t){setTimeout((function(){var e,n="trfWallpaperLoadedBlockRefresh";t.CustomEvent?e=new t.CustomEvent(n,{detail:{}}):(e=t.document.createEvent(n)).initCustomEvent(n,!0,!0,{}),t.document.dispatchEvent(e)}),5e3)}}]),t}();function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var St=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&Ot(t,n)}(t,0,[{key:"buildIframeUrl",value:function(t,e){var n=(-1===t.indexOf("?")?"?":"&")+"clickTag=";return t.indexOf("?rd=")>-1&&(n=""),t+n+encodeURICoickUrl",value:function(t,e){return e+t}}]),t}();function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(){return(jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var At=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Tt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(e,xt),function(t,e,n){e&&Pt(t.prototype,e),n&&Pt(t,n)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var n=this,r=t.containerHeight,o=t.imageUpload,i=t.imageUrl,a=t.htmlUrl,l=t.clickthrough,u=e.getNullIfEmptyOrZero(t.adWidth),c=t.adHeight,s=t.clickmacro,f=t.htmlFileupload,p=t.elementSelector,h=t.thirdPartyCount,y=t.context,d=t.underscrollerType,v=e.getNullIfEmptyOrZero(t.containerWidth),m=!1!==t.showDeclaration,b=t.placement;null==b&&(b="sibling"),"string"==typeof f&&f.length>0&&(a=f);var g="";null!=o&&o.length>0&&(g=o),null!=i&&i.length>0&&(g=i),function(){var o=y.createElement("div");o.setAttribute("class","underscroller");var i=y.querySelector(p);if(null===i)throw new Error("Container element not found: "+p);var f="",w="",_=y.createElement("DIV");m&&_.classList.add("trf-declaration-container"),_.classList.add("trf-parallaxContainer"),_.classList.add("anx_cr_loc"),new Promise((function(r){var i=n.contentProviderFactory.get("scriptTag"),p=n.contentProviderFactory.get("iframe"),h=n.contentProviderFactory.get("htmlUpload"),d=n.contentProviderFactory.get("htmlContent"),v=jt({contextDocument:y},t,{htmlUrl:a});if(i.isOptionsValid(v))i.generate(v).then((function(t){o.appendChild(t),_.appendChild(o),r()}));else if(d.isOptionsValid(v))d.generate(v).then((function(t){o.appendChild(t),_.appendChild(o),r()}));else if(p.isOptionsValid(v))p.generate(v).then((function(t){o.appendChild(t),_.appendChild(o),r()}));else if({o.appendChild(t),_.appendChild(o),r()}));else{if(void 0!==g&&g.length>0){var m=e.generateImageDimensions(u,c);w='\x3c!-- <a href="{link}" target="_blank" style="width:IMAGEWIDTH"> <img src="IMAGESOURCE" width="IMAGEWIDTH" height="IMAGEHEIGHT" ></img> </a> --\x3e'.replace("\x3c!--","").replace("{link}",St.buildClickUrl(l,s)).replace("IMAGESOURCE",g).replace(/IMAGEWIDTH/g,m.width).replace("IMAGEHEIGHT",m.height).replace("--\x3e","")}f+='\x3c!-- <div class="underscroller">ADFORMAT</div> --\x3e'.replace("\x3c!--","").replace("ADFORMAT",w).replace("--\x3e",""),_.innerHTML=f,r()}})).then((function(){var e;if(_.appendChild(n._getThirdPartyCount(h,y)),n._prepareTemplateContainer(i,t),"sibling"===b)e=i.parentNode.insertBefore(_,i),i.style.display="none";else{if("origin"!==b)throw new Error("Placement value not supported: "+b);e=i.insertBefore(_,null)}var o=e.querySelector(".underscroller"),a={adHeight:c,clipHeight:r,clipWidth:v,width:u,adjustToContentWidth:t.adjustToContentWidth,adjustToContentHeight:t.adjustToContentHeight,underscrollerType:d};n._buildWidget("ampParallax",o,a),n._broadcastEvent("trfDeployed",o),J.isInternetExplorer(y.defaultView)&&o.addEventListener("click",(function(){y.defaultView.open(St.buildClickUrl(l,s))}))}))}()}},{key:"_prepareTemplateContainer",value:function(t,e){var n=t.parentNode;!0===e.correctParentHeight&&(n.style.height="")}},{key:"_getThirdPartyCount",value:function(t,e){if(""!==t){var n=e.createElement("div");n.setAttribute("style","display:none");var r=e.createElement("img");return r.src=t,r.setAttribute("width","1"),r.setAttribute("height","1"),n.appendChild(r),n}return e.createTextNode("")}}],[{key:"isEmptyOrZero",value:function(t){if(null==t)return!0;var e=t.toString();return 0===e.length||"0"===e}},{key:"getNullIfEmptyOrZero",value:function(t){return e.isEmptyOrZero(t)?null:parseInt(t)}},{key:"generateImageDimensions",value:function(t,e){return null===t?{width:"100%",height:"auto"}:{width:t+"px",height:"auto"}}}]),e}();function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ht(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(e,xt),function(t,e,n){e&&Dt(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=t.contextDocument.querySelector(t.contextElementSelector),n=t.contextDocument.querySelector(t.skyElementSelector);null==e&&y.get().error("Context element not found: "+t.contextElementSelector),null==n&&y.get().error("Sky element not found."+t.skyElementSelector);var r={contextElement:e,topMargin:void 0!==t.topMargin?t.topMargin:void 0,leftMargin:t.leftMargin?t.leftMargin:0,skipMoveToBody:!0===t.skipMoveToBody,bottomAnchorSelector:t.bottomAnchorSelector,position:t.position};this._buildWidget("stickySky",n,r)}}]),e}();function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ft=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("StickySky"),this.document=e.ownerDocument,this.params=n,this._setParams(),this.skyElement=e,this.intervalId=null,this.scrollEventListener=this._placeSky.bind(this),this.bottomAnchorElement=null}return function(t,e,n){e&&Nt(t.prototype,e)}(t,[{key:"_setParams",value:function(){this.contextElement=this.params.contextElement,this.topMargin=this._parseTopMargin(this.params.topMargin)}},{key:"init",value:function(){var t={};void 0!==this.skyElement.stickySkyWidget&&(t=this.skyElement.stickySkyWidget.params,this.skyElement.stickySkyWidget.destroy(),this.params=Object.assign(t,this.params),this._setParams()),this.skyElement.stickySkyWidget=this,null!=this.params.bottomAnchorSelector&&(this.bottomAnchorElement=this.document.querySelector(this.params.bottomAnchorSelector)),this._build()}},{key:"destroy",value:function(){this.document.removeEventListener("scroll",this.scrollEventListener),this.document.defaultView.clearInterval(this.intervalId),delete this.skyElement.stickySkyWidget}},{key:"_build",value:function(){var t=this;this._prepareSky(),this.intervalIdnction(){t._placeSky(),t._reposition()}),500),this.document.addEventListener("scroll",this.scrollEventListener)}},{key:"_reposition",value:function(){this.contextElement.getBoundingClientRect();var t=this._calculateLeft();this.skyElement.style.left=t+"px"}},{key:"_calculateLeft",value:function(){var t,e=this.contextElement.getBoundingClientRect();if("left"===this.params.position){var n=this.skyElement.getBoundingClientRect(),r=n.right-n.left;t=e.left-r}else t=e.right;if("left"===this.params.position)t-=parseInt(this.params.leftMargin);else t+=parseInt(this.params.leftMargin);return t}},{key:"_prepareSky",value:function(){!0!==this.params.skipMoveToBody&&(this.skyElement=this.document.body.appendChild(this.skyElement)),g.setStyle(this.skyElement,"position","fixed",{important:!0}),this.skyElement.style.float="none",this.skyElement.style.bottom="",this.skyElement.style.right="",this.skyElement.style.marginLeft="",this.skyElement.style.marginRight="",this.skyElement.style.marginTop="",this.skyElement.style.marginBottom="",this.skyElement.style.zIndex="2",this._reposition(),this._placeSky()}},{key:"_placeSky",value:function(){g.setStyle(this.skyElement,"position","fixed",{important:!0});var t=this.contextElement.getBoundingClientRect().top,e=g.getScrollY(this.document.defaultView)>=this.topMargin.scrollThreshold?this.topMargin.afterScroll:this.topMargin.beforeScroll;if(t<e&&(t=e),null!==this.bottomAnchorElement){var n=this.bottomAnchorElement.getBoundingClientRect(),r=this.skyElement.getBoundingClientRect(),o=r.bottom-r.top;n.top<t+o&&(t=n.top-o)}this.skyElement.style.top=t+"px"}},{key:"_parseTopMargin",value:function(t){var e=$.parse(t,[{name:"beforeScroll",type:"int",default:0},{name:"afterScroll",type:"int",default:null},{name:"scrollThreshold",type:"int",default:1}]);return null===e.afterScroll&&(e.afterScroll=e.beforeScroll),e}}]),t}();function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gt=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=Vt(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(e,v),function(t,e,n){e&&Ut(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new Ft(this.containerNode,this.params),this.widget.init()}}]),e}();function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Yt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,xt),function(t,e,n){e&&zt(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=this,n=t.imageUpload,r=t.imageUrl,o=t.htmlUrl,i=t.clickthrough,a=t.clickmacro,l=t.thirdPartyCount,u=t.contextDocument,c="";null!=n&&n.length>0&&(c=n),null!=r&&r.length>0&&(c=r),function(){var n="CLICKMACROCLICKTHROUGH".replace("CLICKTHROUGH",i).replace("CLICKMACRO",a),r=u.body,s="",f="";if(null!=o&&""!==o){var p="?clickTag=";o.indexOf("?rd=")>-1&&(p=""),o=o+p+a,f='\x3c!-- <iframe frameborder="0" width="IFRAMEWIDTH" height="IFRAMEHEIGHT" src="IFRAMESOURCE" scrolling="no"></iframe> --\x3e'.replace("\x3c!--","").replace("IFRAMEWIDTH","100%").replace("IFRAMEHEIGHT","100%").replace("IFRAMESOURCE",o).replace("--\x3e","")}else""!==c&&(f='\x3c!-- <a href="{link}" target="_blank"> <img src="IMAGESOURCE" width="IMAGEWIDTH" height="IMAGEHEIGHT" ></img> </a> --\x3e'.replace("\x3c!--","").replace("{link}",n).replace("IMAGESOURCE",c).replace("IMAGEHEIGHT","100%").replace("--\x3e",""));s+='\x3c!-- <div class="push-down" style="line-height:0px">ADFORMAT</div> THIRDPARTYCOUNT --\x3e'.replace("\x3c!--","").replace("ADFORMAT",f).replace("THIRDPARTYCOUNT",e._getThirdPartyCount(l)).replace("--\x3e",""),r.insertAdjacentHTML("afterbegin",s);var h=r.querySelector(".push-down"),y={initialHeight:t.initialHeight,expandedHeight:t.expandedHeight};e._buildWidget("pushDown",h,y),h.addEventListener("click",(function(){u.defaultView.open(n)}))}()}},{key:"_getThirdPartyCount",value:function(t){return""!==t?'<div style="display:none;"><img src="'+t+'" wir("Cannot call a class as a function")}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writablturn e&&$t(t.prototype,e),n&&$t(t,n),t}var Qt=function(){function t(e){Kt(this,t);var n=e.ownerDocument.createElement("div");this.element=e.ownerDocument.body.appendChild(n),this.element.style.position="fixed",this.element.style.bottom="0",this.element.style.left="0",this.element.style.height="20vh",this.element.style.overflow="auto",this.element.style.padding="0.5em",this.element.style.width="100%",this.element.style.border="1px solid #000",this.element.style.backgroundColor="white",this.document=e.ownerDocument}return Xt(t,[{key:"log",value:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++){var i=n[o];t.push(JSON.stringify(i))}var a=this.document.createElement("p");a.style.padding="0",a.style.margin="0",a.appendChild(this.document.createTextNode(t.join(""))),this.element.insertBefore(a,this.elechannels=new Map,this.context+)r[o-1]=arguments[o];e.log.apply(e,r)}},{key:"_getOrCreateChannel",value:function(t){if(!1===this.channels.has(t)){var e=new Qt(this.contextElement);this.channels.set(t,e)}return this.channels.get(t)}}]),t}();function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ne=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.document=e.ownerDocument,this.element=e,this.container=null,this.expansionElement=null,this.params=n,this.transition={speed:.5},this.initialHeight=n.initialHeight,this.expandedHeight=n.expandedHeight,this.debug=!1,this.debugSession=new te(this.document.body),this.scrollEventCallback=this._onScroll.bind(this)}return function(t,e,n){e&&:"init",value:function(){this._build()}},{key:"_build",value:function(){this._prepare(),this.document.defaultView.setTimeout(this._expand.bind(this),100),this.scrollEventListener=this.document.defaultView.addEventListener("scroll",this.scrollEventCallback)}},{key:"_prepare",value:function(){var t=this.document.createElement("div");t.appendChild(this.element),this.container=this.document.body.insertBefore(t,this.document.body.firstChild),g.setClass(this.element,"trf-pushdown-content");var e=this.document.createElement("div");e.style.height=this.initialHeight+"px",e.style.transition="height {speed}s".replace("{speed}",this.transition.speed),g.setClass(e,"trf-pushdown-expander"),this.expansionElement=this.document.body.insertBefore(e,this.document.body.firstChild),this.element.style.height="100%",this.element.style.width="100%",this.container.style.zIndex="99999",this.container.style.position="fixed",this.container.style.float="none",this.container.style.width="100%",this.container.style.bottom="",this.container.style.right="",this.container.style.top="0",this.container.style.left="0",this.container.style.height=this.initialHeight+"px",this.container.style.transition="height {speed}s".replace("{speed}",this.transition.speed);var n=this.document.createElement("div");n.style.display="inline-block",n.style.opacity="0.5",n.style.cursor="pointer",n.style.position="absolute",n.style.left="0",n.style.bottom="0",n.style.lineHeight="1.5em",n.style.borderRadius="0.75em",n.style.backgroundColor="#999999",n.style.paddingLeft="1em",n.style.paddingRight="1em",n.style.marginBottom="1em",n.style.marginLeft="1em",n.appendChild(this.document.createTextNode("Close")),n.addEventListener("click",this._onClose.bind(this)),this.container.appendChild(n)}},{key:"_onClose",value:function(){var t=this;this.document.defaultView.removeEventListener("scroll",this.scrollEventCallback),this._close(ntNode.removeChild(t.expansionElement)}),1e3*this.transition.speed)}},{key:"_onScroll",value:function(){var t=this.expansionElement.getBoundingClientRect().top;this.debug&&this.debugSession.log("default","scrollPosition:",t),t<0?this._rewind():tue:function(t,e){t.style.height=e+"px"}},{key:"_expand",value:function(){this._setHeight(this.container,this.expandedHeight),this._setHeight(this.expansionElement,thiss.expansionElement,this._setHeight(this.expansionElement,0)}}]),t}();function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var le=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=ie(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(e,v),function(t,e,n){e&&oe(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new ne(this.containerNode,this.params),this.widget.init()}}]),e}();function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(118);var ce=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&ue(as to be implemented by child class.")}},{key:"getValue",value:function(){throw new Error("Has to be implemented by child class.")}}]),t}();function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ye=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,pe(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,ce),function(t,e,n){e&&fe(t.prototype,e)}(e,[{key:"replace",value:function(t,e,n){var r=this._convertInputToOutput(e,n);t.textContent=r}},{key:"_convertInputToOutput",value:function(t,e){null==t&&(t="");var n=Number.MAX_SAFE_INTEGER;e.maxLength&&(n=e.maxLength);var r=!1;e.addDots&&t.length>n&&(n-=3,r=!0);var o=t.substr(0,n);return r&&(o+="..."),o}},{key:"getValue",value:function(t){return t.textContent}}]),e}();function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ve=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&de(t,n)}(t,0,[{key:"handleRelAttribute",value:function(t,e){var n="nofollow";"string"==typeof e.rel?n=e.rel:!1===e.rel&&(n=null),null===n?t.removeAttribute("rel"):"A"===t.tagName.toUpperCase()&&t.setAttribute("rel",n)}}]),t}();function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){return(we=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ge(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&we(t,e)}(e,ce),function(t,e,n){e&&be(t.prototype,e)}(e,[{key:"replace",value:function(t,e,n){t.setAttribute("href",e),"A"===t.tagName.toUpperCase()&&ve.handleRelAttribute(t,n.globalContext)}},{key:"getValue",value:function(t){return t.getAttribute("href")}}]),e}();function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Se=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,xe(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(e,ce),function(t,e,n){e&&ke(:function(t,e){t.setAttnction(t){return t.getAttribute("src")}}]),e}();function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new Map,this.map.set("text",new ye),this.map.set("src",new Se),this.map.set("href",new _e)}return function(t,e,n){e&&Ce(t.prototype,e)}(t,[{key:"get",value:function(t){var e=this.map.get(t);return null==e?null:e}}]),t}();function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(){return(Te=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Me(t,e){return(Me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var De=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==Pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ae(e).call(this))).pluginFactory=new je,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Me(t,e)}(e,xt),function(t,e,n){e&&Ie(t.prototype,e)}(e,[{key:"reset",value:function(t,n){var r=this._getPlaceholders(t),o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,s=c.node._nativeOriginalValues;null==s&&(s={});var f=e.placeholders[c.name];if(!1!==Array.isArray(f)){var p=!0,h=!1,y=void 0;try{for(var d,v=f[Symbol.iterator]();!(p=(d=v.next()).done);p=!0){var m=d.value,b=m.plugin,g=this.pluginFactory.get(b);if(null!==g){var w=s[b];null!=w&&"undefined"!==w||(w=""),g.replace(c.node,w,Te({},m,{globalContext:n}))}}}catch(t){h=!0,y=t}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}}}}catch(t){i=!0,a=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"_getPlaceholders",value:function(t){var e=t.querySelectorAll("[data-placeholder-id]"),n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=u.getAttribute("data-placeholder-id");null!=c&&0!==c.length&&n.push({node:u,name:c})}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}},{key:"build",value:function(t){var e=t.element;if(!1!==g.isElement(e)&&null!=t.placeholders){var n=this._getPlaceholders(e),r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=t.placeholders[u.name];null!=c&&"undefined"!==c||(c=""),this._replace(u.name,c,u.node,t)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}}},{key:"_replace",value:function(t,n,r,o){var i=e.placeholders[t];if(!1!==Array.isArray(i)){var a={},l=!0,u=!1,c=void 0;try{for(var s,f=i[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var p=s.value,h=p.plugin,y=this.pluginFactory.get(h);if(null!==y){var d=y.getValue(r);y.replace(r,n,Te({},p,{globalContext:o})),a[h]=d}}}catch(t){u=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}r._nativeOriginalValues=a}}}]),e}();De.placeholders={title:[{plugin:"text",maxLength:60,addDots:!0}],kicker:[{plugin:"text",maxLength:60,addDots:!1}],body:[{plugin:"text",maxLength:170,addDots:!0}],sponsor:[{plugin:"text",maxLength:25,addDots:!0}],imgSrc:[{plugin:"src"}],icon:[{plugin:"src"}],clickUrl:[{plugin:"href"}],cta:[{plugin:"href"}]};var He=De;function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.definthis,t),this.clickTrackerListener=null}return function(t,e,n){e&&Re(t.prototype,e)}(t,[{key:"_destroyClickTrackers",value:function(t){var e=this;null!==this.clickTrackerListener&&(t.querySelectorAll("a").forEach((function(t){t.removeEventListener("click",e.clickTrackerListener)})),this.clickTrackerListener=null)}},{key:"_buildClickTrackers",value:function(t,e,n){var r=this,o=t.querySelectorAll("a");this.clickTrackerListener=this._onClicstener("click",r.clickTrackerListener)}))}},{key:"_onClickTrackrEach((function(t){try{e(t)}catch(t){}}))}}]),t}();function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ve=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,We(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(e,Le),function(t,e,n){e&&Fe(t.prototype,e)}(e,[{key:"destroy",value:function(t){var e=this._getNative(t);if(null===e)throw new Error("Native element not in DOM.");void 0!==t.setVisibility&&!0!==t.setVisibility||this._setVisibility(!0,e),this._destroyClickTrackers(e),(new He).reset(e,t),this._postPt,e){this._setTarget(t.anchorTarget,e)}},{key:"_setTarget",value:function(t,e){Array.from(e.querySelectorAll("a")).forEach((function(e){var n=e.getAttribute("target");null!=n&&""!==n||(n=void 0),void 0!==t&&(n=t),void 0===n&&(n="_blank"),e.setAttribute("target",n)}))}},{key:"_setVisibility",value:function(t,n){var r=t?"visible":"hidden";g.setStyle(n,"visibility",r);for(var o=0;o<e.visibilitySelectors.length;o++)g.setStyleByElements(n.querySelectorAll(e.visibilitySelectors[o]),"visibility",r)}},{key:"build",value:function(t){t.contextDocument.querySelector(t.elementSelector);var e=this._getNative(t);if(null===e)throw new Error("Native element not in DOM.");var n=t.placeholders,r=new He,o={element:e,placeholders:n,rel:t.rel};r.build(o),e.style.display="",void 0!==t.setVisibility&&!0!==t.setVisibility||this._setVisibility(!0,e),this._postProcess(t,e),Array.isArray(t.clickTrackers)&&"function"==typeof t.fireRequest&&this._buildClickTrackers(e,t.clickTrackers,t.fireRequest)}},{key:"_getNative",value:function(t){var e=t.templateSelector;return void 0===e?null:t.contextDocument.querySelector(e)}},{key:"accept",value:function(t){if(null===t.contextDocument.querySelector(t.elementSelector))throw new Error("Target element not found for selector "+t.elementSelector);var e=this._getNative(t);return null!==e&&null!=e.querySelector("[data-placeholder-id]")}}]),e}();Ve.visibilitySelectors=[".id-Teaser-el--proBEEP",".id-Teaser-el--nativeBEEPtemplate"];var Be=Ve;function Ge(t,e){this.definedTemplate=t,this.isDefault=!0===e}n(90),Ge.prototype.getHtml=function(t){return this._repltion(){return this.definedTemplate.css},Ge.prototype._replacePlaceholders=function(t){var e=this.definedTemplate.html;for(var n in t){var r=t[n];null!=r&&"undefined"!==r||(r="");var o=new RegExp("\\{"+n+"\\}","g");e=e.replace(o,r)}return Ge._removeurn t.repls.target=t.target,this.method=t.method}ze.prototype.send=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new XMLHttpRequest;e.withCredentials&&(n.withCredentials=!0),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?t(this.responseText):t(null,new Error("Response status "+new String(this.status))))};try{n.open(this.method,this.target,!0),n.send()}catch(e){t(null,new Error("Error sending request",e))}};var Ye=ze;function Ze(){this.defaultTemplate={html:'<div class="an-native-ad stacked" style="display:block;max-width:300px;text-align: left"><a href="{clickUrl}" target="_blank"><img class="an-native-img" src="{imgSrc}" style="max-width:300px;" /></a><header class="an-native-headline" style="font-weight:bold;font-size:1.3em;"><a href="{clickUrl}" target="_blank">{title}</a></header><div class="an-native-body" style="margin:5px 0;"><a href="{clickUrl}" target="_blank">{body}</a></div><div class="an-native-sponsor-wrapper" style="color:#999999;font-size:0.8em;"></div></div>',css:".an-native-ad.stacked a { color: #000; text-decoration: none;}"},this.demoMapping={templates:{keyvaluetemplate:{html:"<div>keyvaluetemplate{sponsor}</div>",css:"div {color:red}"},adunitdefaulttemplate:{html:"<div>adunitdefaulttemplate</div>",css:"div {color:red}"}},adunits:{adunit1:{defaultTemplate:"adunitdefaulttemplate",mappings:[{key:"key1",value:"value1",template:"keyvaluetemplate"}]}}}}Ze.prototype._getMapping=function(t,e){var n="https://cdntrf.com/native-templates/{domain}/mapping.json".replace("{domain}",t);new Ye({target:n,method:"get"}).send((function(t){var n=null;null!==t&&(n=JSON.ppty=function(t){return null==t||""===t},Ze.prototype.getTemplate=function(t,e){this._getMapping(t.domain,function(n){var r=this._decideTemplate(t,n),o=this.defaultTemplate,i=!0;if(null!==r){var a=n.templates[r];null!=a&&(o=a,i=!1)}e(new qe(o,i))}.bind(this))},Ze.prototype._decideTemplate=function(t,e){if(!this._isEmpty(t.domain)){var n=null;if(null==e)return n;if(this._isEmpty(t.adunit))return n;var r=e.adunits[t.adunit];if(null==r)return n;if(!1===this._isEmpty(r.defaultTemplate)&&(n=r.defaultTemplate),!1===Array.isArray(r.mappings)||!1===Array.isArray(t.targeting))return n;var o=!1,i=!0,a=!1,l=void 0;try{for(var u,c=t.targeting[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value,f=!0,p=!1,h=void 0;try{for(var y,d=r.mappings[Symbol.iterator]();!(f=(y=d.next()).done);f=!0){var v=y.value;if(v.key===s.key&&v.value===s.value&&!1===this._isEmpty(v.template)){n=v.template,o=!0;break}}}catch(t){p=!0,h=t}finally{try{f||null==d.return||d.return()}finally{if(p)throw h}}if(o)break}}catch(t){a=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return n}reject(new Error("Domain not specified"))};var Je=Ze;function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $e=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&Ke(t.prototype,e),n&&Ke(t,n)}(t,[{key:"get",value:funct){e.getTemplate(t,(function(t){n(t)}))}))}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();$e.instance=null;var Xe=$e;function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,en(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(e,Le),function(t,e,n){e&&tn(t.prototype,e)}(e,[{key:"destroy",value:function(t){var e=t.contextDocument.querySelector(t.elementSelector);if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"build",value:function(t){var e=this,n=t.contextDocument.querySelector(t.elementSelector);if(null!==n)return Xe.getInstance().get(t.filter).then((function(r){var o=r.getHtml(t.placeholders),i=r.getCss(),a=t.contextDocument.createElement("div");a.innerHTML=o,n.appendChild(a);for(var l=n.querySelectorAll("a"),u=0;u<l.length;u++)ve.handleRelAttribute(l[u],t);try{document.querySelectorAll(t.elementSelector+' >[id^="google_ads_"]')[0].style.height="1px"}catch(t){}var c=t.contextDocument.createElement("style");null!=c&&(c.type="text/css",c.appendChild(t.contextDocument.createTextNode(i)),t.contextDocument.head.appendChild(c)),Array.isArray(t.clickTrackers)&&"function"==typeof t.fireRequest&&e._buildClickTrackers(a,t.clickTrackers,t.fireRequest)}));this.logger.debug("Target Element with selector "+t.elementSelectey:"accept",value:func!0}},{key:"prepare",value:function(t){}}]),e}();function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var an=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=new Map,this.handlers.set("cms",new Be),this.handlers.set("template",new rn)}return function(t,e,n){e&&on(t.protelector(t);return this.handlers.get(e)}},{key:"_getHandlerTypeBySelector",value:funcorEach((function(t,n){return e.push(n)}));for(var n=0;n<e.length;n++){var r=e[n];if(this.handlers.get(r).accept(t))return r}throw new Error("No handler accepted Native element")}}]),t}();function ln(t){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==ln(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,cn(e).call(this,t))).handlerFactory=new an,n.logger=y.get("Native"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sn(t,e)}(e,xt),function(t,e,n){e&&un(t.prototype,e)}(e,[{key:"_destroy",value:function(t){return this.handlerFactory.getBySelecndlerFactory.getBySelector(t).build(t)}},{key:"build",value:function(t){try{switch(t.command){case"build":this._build(t);break;case"destroy":this._destroy(t)}}catch(t){throw t}}}]),e}();function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yn(t){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==pn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,yn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(e,xt),function(t,e,n){e&&hn(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=this,n=t.containerHeight,r=t.imageUpload,o=t.imageUrl,i=t.htmlUrl,a=t.clickthrough,l=t.adWidth,u=t.adHeight,c=t.clickmacro,s=t.elementSelector,f=t.thirdPartyCount,p=t.context,h=t.containerWidth;null!=h&&0!==h.toString().length||(h=null);var y="";null!=r&&r.length>0&&(y=r),null!=o&&o.length>0&&(y=o),function(){var r=p.querySelector(s),o="",d="";""!==i?d='\x3c!-- <iframe frameborder="0" width="IFRAMEWIDTH" height="IFRAMEHEIGHT" src="IFRAMESOURCE" scrolling="no"></iframe> --\x3e'.replace("\x3c!--","").replace("IFRAMEWIDTH",l).replace("IFRAMEHEIGHT",u).replace("IFRAMESOURCE",St.buildIframeUrl(i,c,a)).replace("--\x3e",""):""!==y&&(d='\x3c!-- <a href="{link}" target="_blank"> <img src="IMAGESOURCE" width="IMAGEWIDTH" height="IMAGEHEIGHT" ></img> </a> --\x3e'.replace("\x3c!--","").replace("{link}",St.buildClickUrl(a,c)).replace("IMAGESOURCE",y).replace("IMAGEWIDTH",l+"px").replace("IMAGEHEIGHT",u+"px").replace("--\x3e","")),o+='\x3c!-- <div class="underscroller">ADFORMAT</div> THIRDPARTYCOUNT --\x3e'.replace("\x3c!--","").replace("ADFORMAT",d).replace("THIRDPARTYCOUNT",e._getThirdPartyCount(f)).replace("--\x3e","");var v=p.createElement("DIV");v.classList.add("trf-declaration-container"),v.classList.add("trf-parallaxContainer"),v.innerHTML=o,e._prepareTemplateContainer(r,t);var m=r.parentNode.insertBefore(v,r);r.style.display="none";var b=m.querySelector(".underscroller"),g={adHeight:u,clipHeight:n,clipWidth:h,width:l};e._buildWidget("ampParallax",b,g),e._broadcastEvent("trfDeployed",b),J.isInternetExplorer(p.defaultView)&&b.addEventListener("click",(function(){p.defaultView.open(St.buildClickUrl(a,c))}))}()}},{key:"_prepareTemplateContainer",value:function(t,e){var n=t.parentNode;!0===e.correctParentHeight&&(n.style.height+t+'" width="1" height="1"/></div>':""}}]),e}();function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,gn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(e,xt),function(t,e,n){e&&b,value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var n=this,r=t.contextDocument.querySelector(t.contextElementSelector),o=t.contextDocument.querySelector(t.skyElementSelector);if(null==r)throw new Error("Context element not found: "+t.contextElementSelector);if(null==o)throw new Error("Sky element not found."+t.skyElementSelector);t.adWidth="100%",t.adHeight="100%";var i=t.style;null==i&&(i="default");var a=e.styleWidgetMap[i],l=this.contentProviderFactory.decide(t);if(null===l)throw new Error("No content provider accepts the params.");l.generate(t).then((function(e){eTemplateDeployed(t,{content:e.detail})})),o.appendChild(e);var i={contextElement:r,topMargin:t.topMargin,leftMargin:t.leftMargin?t.leftMargin:0,position:t.position,bottomAnchorSelector:t.bottomAnchorSelector};n._buildWidget(a,o,i),n._broadcastEvent("trfDeployed",o),n._hideGoogleIframe(o)}))}},{key:"_hideGoogleIframe",value:function(t){var e=t.querySelector("[id^='google']");null!==e&&(e.style.display="none")}}]),e}();_n.styleWidgetMap={default:"sitebar",fixed:"fixedSitebar"};var En=_n;function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.definthis,t),this.logger=y.get("AdManager")}return function(t,e,n){e&&kn(t.prototype,e)}(t,[{key:"generate",value:function(t){throw new Error("Has to be implemented by the chilto be implemented by the child class")}},{key:"_notifyContentDeployed",value:function(t){var e=new CustomEvent("trfContentDeployed",{bubbles:!1,detail:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}});t.dispatchEvent(e)}}]),t}();function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cn(t){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jn(t,e){return(jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==On(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Cn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jn(t,e)}(e,xn),function(t,e,n){e&&Sn(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.scriptTag&&""!==t.scriptTag&&void 0!==t.contextDocument}},{key:"_fetchContent",value:function(t){var e=new RegExp(/<script[^>]+src="([^"]+)"/,"gmi").exec(t);if(2!==e.length)throw new Error("Can't fetch ad content given by "+t);var n=e[1],r=new Ye({target:n,method:"get"});refunction(t,e){r.send((function(e){t(e)}),{withCredentials:!0})}))}},{key:"_adjustDimensions",value:function(t,e){return!0===e.adjustToContentWidth&&null!=t.contentWindow.document.body&&(t.style.width=t.contentWindow.document.body.scrollWidth+"px"),!0===e.adjustToContentHeight&&null!=t.contentWindow.document.body&&(t.style.height=t.contentWindow.document.body.scrollHeight+"px"),t}},{key:"generate",value:function(t){var e=this;return this._fetchContent(t.scriptTag).then((function(n){e._checkContentEmpty(n)&&e.logger.debug("Yieldlab ad is empty.");var r=t.contextDocument,o=r.createElement("iframe");o.setAttribute("id",_t()),o.setAttribute("style","width:100%;height:100%;border:0;"),e._overrideStyles(o,t.contextDocument,t);var i=r.createTextNode(n);return o.addEventListener("trfDeployed",(function(){e._setupDimensionUpdate(o,t);var n=r.createElement("script");n.appendChild(i),o.contentWindow.document.getElementsByTagName("head")[0].appendChild(n)}))dlab fallback with no content/.test(t)}},{key:"_setupDimensionUpdate",value:function(t,e){t.ownerDocument.defaultView.setInterval(this._adjustDimensions.bind(this,t,e),500)}},{key:"_overrideStyles",value:function(t,e,n){var r=t.getAttribute("id"),o=[];!0!==n.adjustToContentWidth&&o.push("width:100% !important"),!0!==n.adjustToContentHeight&&o.push("height:100% !important"),0!==o.length&&g.appendStyle("#{id} {{styles}}".replace("{id}",r).replace("{styles}",o.join(";")),e)}}]),e}();function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,eproto__=e,t})(t,e)}Pn.noo):e}(this,An(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(e,g),function(t,e,n){n&&In(t,n)}(e,0,[{key:"isElementSetVisible",value:function(t){var e=t.ownerDocument.defaultView.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.tion(t){t.parentElement.removeChild(tdeName.toUpperCase()===e.toUpperCase()}function n(t){var e=t.ownerDocument,n=t.text||t.textContent||t.innerHTML||"",r=e.getElementsByTagName("head")[0]||e.documentElement,o=e.createElement("script");o.type="text/javascript";try{o.appendChild(e.createTextNode(n))}catch(t){o.text=n}r.insertBefore(o,r.firstChild),r.removeChild(o)}var r,o,i,a=[],l=t.childNodes;for(i=0;l[i];i++)!e(o=l[i],"script")||o.type&&"text/javascript"!==o.type.toLowerCase()||a.push(o);for(i=0;a[i];i++)(r=a[i]).parentNode&&r.parentNode.removeChild(r),n(a[i])}}]),e}();function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ln(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,xn),function(t,e,n){e&&Rn(t.prototype,e),n&&Rn(t,n)}(e,[{key:"isOptionsValid",value:function(t){return"string"==typeof t.htmlUrl&&t.htmlUrl.length>0&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var n=t.contextDocument,r={width:e.getDimension(t.adWidth),height:e.getDimension(t.adHeight)},o=t.clickmacro,i=t.clickthrough,a='\x3c!-- <iframe frameborder="0" width="IFRAMEWIDTH" height="IFRAMEHEIGHT" src="IFRAMESOURCE" scrolling="no"></iframe> --\x3e'.replace("\x3c!--","").replace("IFRAMEWIDTH","100%").replace("IFRAMEHEIGHT","100%").replace("IFRAMESOURCE",St.buildIframeUrl(t.htmlUrl,o,i)).replace("--\x3e",""),l=n.createElement("div");return l.setAttribute("class","sitebar-container"),l.style.width=r.width,l.style.height=r.height,l.style.marginLeft="50%",l.style.transform="translateX(-50%)",l.insertAdjacentHTML("afterbegin",a),Promise.resolve(l)}}],[{key:"getDimension",value:function(t){if(null==t)return"100%";if(""===t)return"100%";if(!0===/^\d+$/.test(t.toString())){var e=parseInt(t);return 0===e?"100%":e+"px"}returrn e.isEmptyOrZero(t)?null:parseInt(t)}},{key:"isEmptyOrZero",value:function(t){if(null==t)return!0;var e=t.toString();return 0===e.length||"0"===e||"100%"===e}}]),e}();function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==n[r])}return t}).apply(this,arguments)}function Vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writablget?o.get.call(n):o.value}})(t,e,n||t)}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qn(t,e){return(qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Gn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qn(t,e)}(e,Fn),function(t,e,n){e&&Vn(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return"string"==typeof t.htmlFileupload&&t.htmlFileupload.length>0&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var n=t.htmlFileupload;return Bn(Gn(e.prototype),"generate",this).call(this,Un({},t,{htmlUrl:n}))}}]),e}();function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Jn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(e,xn),function(t,e,n){e&&Zn(t.proto=t.element&&void 0!==t.n(t){return Promise.resolve(t.element)}}]),e}();function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tr(t){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,tr(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(e,xn),function(t,e,n){e&&Qn(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.elementSelector&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var e=t.contextDocument.querySelector(t.elementSelector);return null==e?Promise.reject("Element not found: "+t.elementSelector):Promise.resolve(e)}}]),e}();function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ir(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ar(t,e)}(e,xn),function(t,e,n){e&&or(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.htmlContent&&""!==t.htmlContent&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var n=this,r=t.htmlContent,o=t.contextDocument.createElement("iframe");return o.setAttribute("style","width:100%;height:100%;border:0;"),o.addEventListener("trfDeployed",(function(){var t=o.contentWindow.document;t.open(),t.write(r),t.close();var i=t.getElementsByTagName("head")[0],a=t.createElement("style");a.setAttribute("type","text/css"),i.appendChild(a),a.appendChild(t.createTextNode(e.iframeStyle)),n._notifyContentDeployed(o,{iframe:o})})),Promise.resolve(o)}}]),e}();lr.runner='\nwindow.trfScriptRunner(document.getElementsByTagName("body")[0]);\n',lr.iframeStyle="\nbody {\n    margin:0;\n    padding:0;\n}\n";var ur=n(67),cr=n.n(ur);function sr(t){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pr(t){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hr(t,e){return(hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,pr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hr(t,e)}(e,xt),function(t,e,n){e&&fr(t.prototype,e)}(e,[{key:"build",value:function(t){return this._getContent(t)}},{key:"_getContent",value:function(t){var e=this;if(null==t.contextDocument)throw new Error("Context document not set");var n=this.contentProviderFactory.decide(t);if(null===n)throw new Error("No content provider accepts the params.");n.generate(t).then((function(n){e._destroyWidget(t.id,n);var r={options:t.options,id:t.id},o=e._buildWidget("bottomSticky",n,r);return e._broadcastEvent("trfDeployed",n),o}))}}]),e}();function dr(){return(dr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("BottomSticky"),this.document=e.ownerDocument,this.params=n,this.contentElement=e,this.containerElement=null,this.innerContainer=null,this.closer=null,this.options=dr({},t.defaults),this.intervalId=null}return function(t,e,n){e&&vr(t.prototype,e)}(t,[{key:"init",value:function(){this.contentElement.trfAdWidget=this,this._build()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalId&&window.clearInterval(this.intervalId),t&&this.document.body.appendChild(this.contentElement),Dn.removeElement(this.containerElement)}},{key:"_build",value:function(){var t=this;this._prepare(),this._updateStyle(this.params.options),this._positioerval((function(){return t._positio]?arguments[0]:{};this._updateStyle(t)}},{key:"_prepare",value:function(){var t=this,e=this.document.createElement("div");e.setAttribute("class","trf-ad-bottom-sticky-container"),e.classList.add("sticky-container-".concat(this.contentElement.id)),e.style.boxShadow="0 -0.1rem 0.1rem 0 rgba(0,0,0,.2)",this.innerContainer=this.document.createElement("div"),this.innerContainer.style.position="absolute",this.innerContainer.appendChild(this.contentElement),e.appendChild(this.innerContainer),this.containerElement=this.document.body.appendChild(e),this.label=this.document.createElement("div"),this.label.setAttribute("class","trf-ad-bottom-sticky-label"),this.containerElement.appendChild(this.label),this.adText=this.document.createElement("div"),this.adText.setAttribute("class","trf-ad-bottom-sticky-label-text"),this.label.appendChild(this.adText),this.closer=this.document.createElement("div"),this.closer.setAttribute("class","trf-ad-bottom-sticky-closer"),this.closer.addEventListener("click",(function(){t._close()})),this.label.appendChild(this.closer)}},{key:"_updateStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=dr({},this.options,t),this.containerElement.style.transition="bottom 0.1s ease 0s",this.containerElement.style.height=this.options.height+"px",this.containerElement.style.backgroundColor=this.options.backgroundColor,!0===this.options.hide?this.containerElement.style.display="none":this.containerElement.style.removeProperty("display"),this.innerContainer.style.width="calc(100% - "+2*this.options.padding+"px)",this.innerContainer.style.left=this.options.padding+"px",this.innerContainer.style.top=this.options.padding+"px",this.innerContainer.style.height="calc(100% - "+1*this.options.padding+"px)",Dn.appendStyle(this.options.style,this.document),this.label.style.backgroundColor=this.options.backgroundColor,this.adText.innerHTML="",null!=this.options.label&&this.adText.appendChild(this.document.createTextNode(this.options.label)),this.options.fontSize&&(this.adText.style.fontSize=this.options.fontSize),void 0!==this.options.zIndex?this.containerElement.style.zIndex=this.options.zIndex.toString():this.containerElement.style.zIndex="2147483646",null!=this.options.marginBottom&&(this.containerElement.style.marginBottom=this.options.marginBottom.toString()+"px")}},{key:"_calculateBottom",value:function(){var t=0;if(this.options.bottom)t=this.options.bottom;else if(this.options.bottomElementSelector){var e=this.document.querySelector(this.options.bottomElementSelector);if(null!=e&&!0===Dn.isElementSetVisible(e)){var n=e.getBoundingClientRect();t=this.document.defaultView.innerHeight-n.top}}return t+"px"}},{key:"_position",value:function(){Dn.setStyle(this.containerElement,"position","fixed",{important:!0}),this.containerElement.style.left="0px",this.containerElement.style.right="0px",this.containerElement.style.bottom=this._ose",value:function(){this.destroy(!1)}}]),t}();mr.defaults={height:50,padding:10,backgroundColor:"#f3f3f3",hide:!1,fontSize:"9pt",marginBottom:0,style:"\n\n    .trf-ad-bottom-sticky-container {\n        box-sizing:border-box;\n    }\n\n    .trf-ad-bottom-sticky-label {\n        border: none;\n        border-top-left-radius: 12px;\n        box-shadow: 0 -1px 1px 0 rgba(0,0,0,.2);\n        height: 28px;\n        position: absolute;\n        right: 0;\n        top: -27px;\n        min-width: 28px;\n        white-space: nowrap;\n    }\n\n    .trf-ad-bottom-sticky-label-text {\n        display:inline-block;\n        float:left;\n        line-height:28px;\n        padding-left:10px;\n    }\n\n    .trf-ad-bottom-sticky-closer {\n        display:inline-block;\n        background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='13' height='13' viewBox='341 8 13 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%234F4F4F' d='M354 9.31L352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z' fill-rule='evenodd'/%3E%3C/svg%3E\");\n        background-position: center;\n        background-repeat: no-repeat;\n        background-size: 12px 12px;\n        height: 28px;\n        width: 28px;\n    }\n    "};var br=mr;function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _r(t){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kr=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==gr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=_r(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(e,v),function(t,e,n){e&&wr(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new br(this.containerNode,this.params),thhis.widget).destroy.apply(t,arguments)}}]),e}();function xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Or=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.document=e.ownerDocument,this.element=e,this.container=null,this.params=n,this.initialHeight=void 0===n.height?0:n.height,this.debug=!1}return function(t,e,n){e&&xr(t.prototype,e)}(t,[{key:"init",value:function(){this._build()}},{key:"_build",value:function(){this._prepare()}},{key:"_getWidthCss",value:function(){return null!=this.params.extendedWidth?"calc(100% + "+2*this.params.extendedWidth+"px)":"100%"}},{key:"_calculateLeftMargin",value:function(){return-(this.params.extendedWidth||0)}},{key:"_prepare",value:function(){this.container=this.element,this.container.style.zIndex="99999",this.container.style.float="none",this.container.style.width=this._getWidthCss(),this.container.style.bottom="",this.container.style.right="",this.container.style.top="0",this.container.style.left="0",this.container.style.height=this.initialHeight+"px",this.container.style.marginLeft=this._calculateLeftMargin()+"px",this._updatePosition()}},{key:"_updatePosition",value:function(){}}]),t}();function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tr=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==Sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=jr(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(e,v),function(t,e,n){e&&Cr(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new Or(this.containerNode,this.params),this.widget.init()}}]),e}();function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(){return(Ar=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Ir(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Dr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}(e,xt),function(t,e,n){e&&Mr(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t),!0===t.stopRefresh&&this._stopRefresh(t.contextDocument.defaultView)}},{key:"_getContent",value:function(t){var e={contextDocument:t.contextDocument,contextElementSelector:t.contextElementSelector};this._createTemplate("sitebar",Ar({},e,{style:"fixed",position:"left"},t.sitebarLeft)),this._createTemplate("sitebar",Ar({},e,{style:"fixed",position:"right"},t.sitebarRight)),this._createTemplate("banner",Ar({},e,t.banner))}},{key:"_createTemplate",value:function(t,e){var n=this.templateFactory.get(t);if(null===n)throw new Error("Template with id "+t+" not implemented.");try{return n.build(e)}catch(t){throw t}}}]),e}();function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fr(t){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ur=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Lr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Fr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wr(t,e)}(e,xt),function(t,e,n){e&&Nr(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=this,n=t.contextDocument.querySelector(t.bannerElementSelector);if(null==n)throw new Error("Banner element not found."+t.bannerElementSelector);t.adWidth="100%",t.adHeight="100%";var r=this.contentProviderFactory.decide(t);if(null===r)throw new Error("No content provider accepts the params.");r.generate(t).then((function(r){r.addEventListener("trfContentDeployed",(function(n){e._notifyTemplateDeployed(t,{content:n.detail})})),n.appendChild(r);var o={height:t.height,extendedWidth:t.extendedWidth};e._buildWidget("banner",n,o),e._broadcastEvent("trfDeployed",n),e._hideGoogleIframe(n)}))}},{key:"_hideGoogleIframe",value:function(t){var e=t.querySelector("[id^='google']");null!==e&&(e.style.display="none")}}]),e}();function Vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gr(t,e,n){return e&&Br(t.prot qr=function(){function t(){Vr(this,t)}return Gr(t,null,[{key:"getAvailableWidth",value:function(t,e){t.ownerDocument.defaultView;var n=e.getBoundingClientRect().right;return t.ownerDocument.getElementsByTagName("html")[0].clientWi.ownerDocument.defaultView.innerHeight}}]),t}(),zr=function(){function t(e,n){Vr(this,t),this.document=e.ownerDocument,this.params=n,this.skyElement=e,this.contextElement=n.contextElement,this.intervalId=null,this.scrollEventListener=this._reposition.bind(this)}return Gr(t,[{key:"init",value:function(){void 0!==this.skyElement.sitebarWidget&&this.skyElement.sitebarWidget.destroy(),this.skyElement.sitebarWidget=this,this._build()}},{key:"destroy",value:function(){this.document.removeEventListener("scroll",this.scrollEventListener),this.document.defaultView.clearInterval(this.intervalId),delete this.skyElement.sitebarWidget}},{key:"_build",value:function(){var t=this;this._prepareSky(),this.intervalIdetInterval((function(){t._reposition()}),500),this.document.addEventListener("scroll",this.scrollEventListener)}},{key:"_reposition",value:function(){var t=this.contextElement.getBoundingClientRect(),e=0;if("left"===this.params.position)this.skyElement.style.left=0,e=t.left-this.params.leftMargin;else this.skyElement.style.marginLeft=this.params.leftMargin+"px",e=qr.getAvailableWidth(this.skyElement,this.contextElement)-this.params.leftMargin,this.skyElement.style.left=t.right+"px";this.skyElement.style.width=e+"px",this.skyElement.style.top="0px";var n=qr.getAvailableHeight(this.skyElement,this.contextElement);this.skyElement.style.height=n+"px"}},{key:"_prepareSky",value:function(){g.setStyle(this.skyElement,"position","fixed",{important:!0}),this.skyElement.style.float="none",this.skyElement.style.bottom="",this.skyElement.style.right="",this.skyElement.style.marginLeft=0,this.skyElement.style.marginRight="",this.skyElement.style.marginTop="",this.skyElement.style.marginBottom="",this.skyElement.style.zIndex="2",this._reposition()}}]),t}();function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $r=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==Yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=Jr(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(e,v),function(t,e,n){e&&Zr(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new zr(this.containerNode,this.params),this.widget.init()}}]),e}();function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function to(t){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eo(t,e){return(eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var no=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Xr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,to(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eo(t,e)}(e,xt),function(t,e,n){e&&Qr(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=t.contextDocument.querySelector(t.contextElementSelector);if(null==e)throw y.get().error("Context element not found: "+t.contextElementSelector),new Error("Context element not found: "+t.contextElementSelector);var n={contextElement:e,contextDocument:t.contextDocument,topMargin:$.minLengthOrDefault(t.topMargin,1),skipMoveToBody:!0===t.skipMoveToBody,bottomAnchorSelector:$.minLengthOrDefault(t.bottomAnchorSelector,1)};this.buildSky(Object.assign({},n,t.left),"left"),this.buildSky(Object.assign({},n,t.right),"right"),null!=$.minLengthOrDefault(t.backgroundColor,1)&&(t.contextDocument.body.style.backgroundColor=t.backgroundColor),!0===t.stopRefresh&&this._stopRefresh(e.ownerDocument.defaultView)}},{key:"buildSky",value:function(t,e){var n=this,r=this.contentProviderFactory.decide(t);if(null===r)throw new Error("No content provider accepts the params.");r.generate(t).then((function(r){var o=t.contextDocument.querySelector(t.skyElementSelector);null==o&&y.get().error("Sky element not found."+t.skyElementSelector),o.appendChild(r),!0===t.showDeclaration&&o.classList.add("trf-declaration-container");var i={contextElement:t.contextElement,topMargin:t.topMargin,leftMargin:$.minLengthOrDefault(t.leftMargin,1,0),skipMoveToBody:!0===t.skipMoveToBody,bottomAnchorSelector:t.bottomAnchorSelector,position:e,showDeclaration:t.showDeclaration};n._buildWidget("stickySky",o,i),n._broadcastEvent("trfDeployed",o),n._hideGoogleIframe(o)}))}}]),e}();function ro(t){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ao(t,e){return(ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==ro(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,io(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ao(t,e)}(e,xn),function(t,e,n){e&&oo(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return null!=t.imageSrc&&t.imageSrc.length>0&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var e=t.imageSrc,n=t.contextDocument,r=n.createElement("img");r.src=e,t.adWidth&&(r.style.width=t.adWidth+"px"),t.adHeight&&(r.style.height=t.adHeight+"px");var o=n.createElement("a");return o.href=St.buildClickUrl(t.clickthrough,t.clickmacro),o.target="_blank",o.appendChild(r),Promise.resolve(o)}}]),e}();function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(){return(co=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]done?e(u):Promise.resolve(u).then(r,o)}function fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function po(t,e,n){return(po="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ho(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ho(t){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yo(t,e){return(yo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n(119);var vo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ho(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yo(t,e)}(e,Fn),function(t,e,n){e&&fo(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return"string"==typeof t.imageUpload&&t.imageUpload.length>0&&void 0!==t.contextDocument}}{so(i,r,o,a,l,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function t(n){var r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.imageUpload,t.next=3,po(ho(e.prototype),"generate",this).call(this,co({},n,{htmlUrl:r}));case 3:return o=t.sent,(i=this.buildLayerInto(o)).style.backgroundColor="transparent",i.style.cursor="pointer",i.addEventListener("click",(function(){n.contextDocument.defaultView.open(St.buildClickUrl(n.clickthrough,n.clickmacro),"_blank")})),t.abrupt("return",o);case 9:case"endtion(e){return t.apply(this,arguments)}}()},{key:"buildLayerInto",value:function(t){t.style.position="relative";var e=t.ownerDocument.createElement("div");return e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0px",e.style.left="0px",e.style.zIndex="1",t.appendChild(e),e}}]),e}();function mo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("AdManager"),this.enabled=this._isEnabled(),this.widgetFactory=i.getInstance(),i.getInstance().setWidget("underscroller",C),i.getInstance().setWidget("stickySky",Gt),i.getInstance().setWidget("pushDown",le),i.getInstance().setWidget("ampParallax",Y),i.getInstance().setWidget("sitebar",ht),i.getInstance().setWidget("bottomSticky",kr),i.getInstance().setWidget("banner",Tr),i.getInstance().setWidget("fixedSitebar",$r),this.templateFactory=f.getInstance(),f.getInstance().setTemplate("underscroller",At),f.getInstance().setTemplate("stickySky",Lt),f.getInstance().setTemplate("pushDown",Jt),f.getInstance().setTemplate("native",fn),f.getInstance().setTemplate("cmsNative",He),f.getInstance().setTemplate("ampParallax",vn),f.getInstance().setTemplate("sitebar",En),f.getInstance().setTemplate("bottomSticky",yr),f.getInstance().setTemplate("fireplace",Rr),f.getInstance().setTemplate("banner",Ur),f.getInstance().setTemplate("doubleSky",no),u.getInstance().set("scriptTag",Pn),u.getInstance().set("iframe",Fn),u.getInstance().set("htmlUpload",zn),u.getInstance().set("htmlContent",lr),u.getInstance().set("element",$n),u.getInstance().set("elementSelector",nr),u.getInstance().set("imageSrc",lo),u.getInstance().set("imageUpload",vo)}return function(t,e,n){e&&mo(t.pturn 0!==cr.a.get("trf-adman-enabled")}},{key:"enable",value:function(t){this.enabled=1==t,cr.a.set("trf-adman-enabled",this.enabled?"1":"0",{expires:3650,path:"/",SameSite:"None",secure:!0}),this.enabled?this.logger.debug("enabled"):this.logger.debug("disabled")}},{key:"buildTemplate",value:function(t,e){if(!1===this.enabled)return this.logger.debug("\tdisabled, exitting"),Promise.resolve();var n=this.templateFactory.get(t);if(null===n)throw new Error("Template with id "+t+" not implemented.");try{return n.build(e)}catch(t){throw this.logger.debug(t.message),t}}},{key:"build",value:function(t,e,n){var r=this.widgetFactory.get(e);if(null===r)throw new Error("Ad with id "+e+" not implemented.");new r(t,n).init()}}]),t}();if(n(120),n(121),n(122),void 0===window.traffective)throw new Error("Traffective Namespace not declared.");window.traffective.trfAdManager=new bo,e.default=bo}]).default;