"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1963],{30435:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>Pe,TEST_IDS:()=>Be});var l=i(50959),n=i(82187),o=i.n(n),a=i(51840),r=i(12737),s=i(1448),c=i(10992),u=(i(69380),i(78136),i(45968)),d=i(91845),m=i(89907),k=i(33904),g=i(17370),h=i(81085),p=i(47858),v=i(23280),x=i(82694),C=i(83117),y=i(75152),b=i(86192),f=i(27324),w=i(76482);const j="gXC4vnPDiiiiawwnDN6i",S="HGOZPJuKeigRY5I0vqQw",N="AZLdtyFhMa1Aqml2YhF2",B="QfiWYSeXiPwGYmKED38q";var P=i(11527);const R=e=>{let{item:t,onClick:i,className:l}=e;const n=(0,C.QR)(t),a=(0,g.k6)(t)?null==n?void 0:n.title:t.name,r=(0,g.k6)(t)?null==n?void 0:n.subtitle:t.name,s="SMALL"===(0,x.G)().vertical;return(0,P.jsxs)("div",{className:o()(j,l),children:[(0,P.jsx)("div",{className:S,children:(0,P.jsx)(f.R,{title:a,children:(0,P.jsx)(v.x,{"data-testid":"context-item-info-title",as:"div",variant:s?"bodyMedium":"titleSmall",className:S,dir:"auto",children:(0,P.jsx)(b.b,{item:t,onClick:i,adUrl:null==n?void 0:n.url,children:a})})},t.uri)}),(0,P.jsx)(w.t,{className:B,item:t}),(0,P.jsx)("div",{className:N,children:(0,P.jsx)(f.R,{title:r,children:(0,P.jsx)(v.x,{"data-testid":"context-item-info-subtitles",as:"div",variant:"bodySmall",className:N,semanticColor:"textSubdued",children:(0,P.jsx)(y._,{item:t,onClick:i,adSubtitle:r,adBlurbUri:null==n?void 0:n.blurbUri,adUrl:null!=n&&n.url?null==n?void 0:n.url:void 0})})},t.uri)})]})};var E=i(74039),T=i(65341),F=i(13129),I=i(24839);const V="yGrUaUzhqIFvdg5zlVYX",_="NSayKQ_soKzuAAg2YhAq",L="eF7BXmqMaY8xVdOtoH1Z",A="UgnljPH_Vf14LZWb1jBu",M={title:"bodyMediumBold",subtitle:"bodySmall"},O={title:"titleSmall",subtitle:"bodyMedium"},W=l.memo((()=>{const{openURLWithSessionTransfer:e}=(0,F.e)(),t="SMALL"===(0,x.G)().vertical?M:O,i=(0,I.d)("loggedin_upgrade_button"),n=(0,l.useCallback)((()=>{e(i(T.IT),"_blank")}),[i,e]);return(0,P.jsx)("div",{className:V,children:(0,P.jsxs)("div",{className:o()("encore-dark-theme","encore-layout-themes",_),children:[(0,P.jsx)(v.x,{variant:t.title,dir:"auto",className:L,children:c.ag.get("web-player.pip-mini-player.upsell.title")}),(0,P.jsx)(v.x,{variant:t.subtitle,semanticColor:"textSubdued",children:c.ag.get("web-player.pip-mini-player.upsell.subtitle")}),(0,P.jsx)("div",{className:A,children:(0,P.jsx)(E.D,{onClick:n,size:"small",children:c.ag.get("web-player.pip-mini-player.upsell.cta-button")})})]})})}));var D=i(42957),z=i(49857),H=i(73343),U=i(944),q=i(36680),X=i(26702),Y=i(39852),G=i(49613),K=i(30678),Z=i(64546),Q=i(54329);function $(e){var t;return{itemToBeSkipped:(null===(t=e.item)||void 0===t?void 0:t.uri)||"",positionMs:(0,Z.k)(e)??-1,totalContentMs:e.duration??-1}}function J(e){return Math.floor(100*e)}const ee="E7rR1kkQFoqCTrZAxs8l",te="I2v17dp_FDztHzG7CZy9",ie="H5VJw6yCxUOoh88LJ42y",le=l.memo((e=>{let{item:t,spec:i,logger:n}=e;const o=t.uri,{onClickPlayPause:a,onClickLike:r,onClickSkipPrevious:s,onClickSkipNext:c,onClickRepeat:u,onClickShuffle:d,onClickVolumeButton:m,onClickVolumeBar:k,onDragVolumeBar:h,onClickSeekBack:p,onClickSeekForward:v}=(e=>{let{uri:t,spec:i,logger:n}=e;const o=(0,l.useRef)(t);o.current=t;const a=(0,K.g)(),r=(0,l.useMemo)((()=>i.playerControlsFactory()),[i]),s=(0,l.useCallback)((e=>{let t=null;o.current&&("pause"===e?t=r.playPauseButtonFactory().hitPause({itemToBePaused:o.current}):"resume"===e&&(t=r.playPauseButtonFactory().hitResume({itemToBeResumed:o.current})),t&&n.logInteraction(t))}),[n,r]),c=(0,l.useCallback)((e=>{if(!o.current)return;const t=r.likeButtonFactory(),i=e?t.hitLike({itemToBeLiked:o.current}):t.hitRemoveLike({itemNoLongerLiked:o.current});n.logInteraction(i)}),[n,r]),u=(0,l.useCallback)((()=>{const e=a.getState();if(!e)return;const t=r.previousButtonFactory().hitSkipToPrevious($(e));n.logInteraction(t)}),[n,a,r]),d=(0,l.useCallback)((()=>{const e=a.getState();if(!e)return;const t=r.nextButtonFactory().hitSkipToNext($(e));n.logInteraction(t)}),[n,a,r]),m=(0,l.useCallback)((e=>{const t=r.repeatButtonFactory();let i=null;switch(e){case g.zq.REPEAT_TRACK:i=t.hitRepeatOneEnable();break;case g.zq.REPEAT_CONTEXT:i=t.hitRepeatEnable();break;case g.zq.REPEAT_NONE:i=t.hitRepeatDisable();break;default:(0,Q._)(e)}i&&n.logInteraction(i)}),[n,r]),k=(0,l.useCallback)((e=>{if(!o.current)return;const t=e?"shuffle":"linear",i=e?"linear":"shuffle",l=r.shuffleButtonFactory({uri:o.current}).hitSelectShuffleMode({previousMode:i,selectedMode:t});n.logInteraction(l)}),[n,r]),h=(0,l.useCallback)((e=>{const t=r.volumeMuteButtonFactory();n.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[n,r]),p=(0,l.useCallback)((e=>{const t=r.volumeBarFactory();n.logInteraction(t.hitSetVolume({newVolumePercentage:J(e)}))}),[n,r]),v=(0,l.useCallback)((e=>{const t=r.volumeBarFactory();n.logInteraction(t.dragSetVolume({newVolumePercentage:J(e)}))}),[n,r]),x=(0,l.useCallback)((e=>{const t=r.seekBackwardButtonFactory();n.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[n,r]);return{onClickSeekForward:(0,l.useCallback)((e=>{const t=r.seekForwardButtonFactory();n.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[n,r]),onClickSeekBack:x,onClickPlayPause:s,onClickLike:c,onClickSkipPrevious:u,onClickSkipNext:d,onClickRepeat:m,onClickShuffle:k,onClickVolumeButton:h,onClickVolumeBar:p,onDragVolumeBar:v}})({uri:o,spec:i,logger:n}),C=(0,x.G)(),y=(0,z.y1)(h,500,{leading:!1,trailing:!0});if(!o)return null;const b=(0,U.G)(t),f=(0,H.i)(t),w=function(e){if((0,H.i)(e)||(0,g.G7)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(t),j="SMALL"===C.horizontal;return"SMALL"===C.vertical?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Y.IF,{onClick:a}),w?(0,P.jsx)(Y.Of,{onClick:v}):(0,P.jsx)(Y.C$,{onClick:c})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:ee,children:[b&&(0,P.jsx)(X.B,{uri:o,onClick:r,className:te}),f&&(0,P.jsx)(q.w,{uri:o,onClick:r,className:te})]}),w?(0,P.jsx)(Y.FP,{onClick:p}):(0,P.jsx)(Y.P4,{onClick:d}),(0,P.jsx)(Y.Wu,{onClick:s}),(0,P.jsx)(Y.IF,{iconSize:j?"small":"medium",onClick:a,className:ie}),(0,P.jsx)(Y.C$,{onClick:c}),w?(0,P.jsx)(Y.Of,{onClick:v}):(0,P.jsx)(Y.$Z,{onClick:u}),(0,P.jsx)(G.h,{mode:G.R.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:m,onVolumeBarClick:k,onVolumeBarDrag:y})]})}));var ne=i(37959),oe=i(73196),ae=i(69111),re=i(42871),se=i(82610),ce=i(9958);var ue=i(48140),de=i(50428);var me=i(67736);var ke=i(54718);const ge="AFZj_hxk7gFsvDDwhsHA",he="UJwngpM5puDW7Frkha4F",pe="ktiXGqfcVuegTncUQJim",ve="u7pi5kPx9ekghoqH8RcS",xe="EzVSQ6md_ZPcpGd373uw",Ce="xM5DXnNVIBKl0D8KmkKr",ye="xZLIxv5s2tm_tmFk3WK8",be="X_fBDy8Kj2NkVB4npQT3",fe="yMMglN43dvX2QKTUoivA",we="D0BU1OBnl1EjBDosrWXn",je="tKfqdd6glswVG49yHgiT",Se="Hbbk972I34uVuWeqBn2Q",Ne="xI3ObXOh1ql5ZWoAUyff",Be={HOVER_CONTAINER:"document-pip-hover-element",COVER_ART:"document-pip-cover-art",COVER_ART_PLACEHOLDER:"document-pip-cover-art-placeholder"},Pe=l.memo((()=>{var e;const{item:t,context:i}=(0,ae.x)()??{},[n,v]=(0,l.useState)(!1),x=ke.Yw,C=(0,r.W6)(oe.nN2),y=(0,l.useMemo)((()=>(0,p.o)((null==t?void 0:t.images)??void 0,{desiredSize:x})),[null==t?void 0:t.images,x]),b=(0,m.b)(y,ke.XW),f=(0,r.W6)(oe.YZd),w=(0,ne.E)();((e,t)=>{const i=(0,me.Y)((e=>{var t;return null==e||null===(t=e.nextItems)||void 0===t?void 0:t[0]}),((e,t)=>(null==e?void 0:e.uri)===(null==t?void 0:t.uri))),n=(0,l.useMemo)((()=>(0,p.o)((null==i?void 0:i.images)??void 0,{desiredSize:e})),[null==i?void 0:i.images,e]);(0,m.b)(n,t)})(x,ke.XW);const{spec:j,logger:S}=(0,h.fU)(s.O,{}),N=(0,h.Wi)(j);(e=>{let{spec:t,logger:i}=e;const n=(0,ce.zY)(),o=(0,l.useRef)(null);null===o.current&&(o.current=(0,de.b)(n)),(0,ue.a)((()=>{const e=(0,de.b)(n);null!==e&&null!==o.current&&(i.logInteraction(t.dragUiResize2d({startWidthPx:o.current.width,startHeightPx:o.current.height,endWidthPx:e.width,endHeightPx:e.height})),o.current=e)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:S,spec:j}),(e=>{let{spec:t,logger:i,pipWindow:n}=e;(0,l.useEffect)((()=>{if(!n)return;const e=e=>{if(e.currentTarget===n){const e=t.windowControlsFactory().closeButtonFactory().hitUiHide();i.logInteraction(e)}};return n.addEventListener("pagehide",e),()=>{n.removeEventListener("pagehide",e)}}),[i,n,t])})({logger:S,spec:j,pipWindow:(null===(e=window.documentPictureInPicture)||void 0===e?void 0:e.window)??null});const{setVideoPlayerUIFlag:B}=(0,re.l)(),{isPlayingRemotely:E}=(0,k.H)(),[T,F]=(0,l.useState)("");(0,l.useLayoutEffect)((()=>{F(he)}),[]);const I=function(){const e=(0,ce.zY)(),[t,i]=(0,l.useState)(!1);return(0,ue.a)((()=>{const t=(0,de.b)(e);null!==t&&(t.width<=300&&t.height<=300?i(!0):i(!1))}),{throttleTime:500,leading:!1,trailing:!0}),t}();(0,l.useEffect)((()=>{f&&B(se.x.documentPip,!0)}),[f,B]);const V=(0,l.useCallback)((e=>{var t,i,l;(l=e.target)&&"object"==typeof l&&"nodeName"in l&&"A"===l.nodeName&&("_blank"!==e.target.target&&("showMainWindow"in window?null===(t=(i=window).showMainWindow)||void 0===t||t.call(i):v(!0)))}),[]);if(((e,t)=>{const i=(0,ce.zY)(),n=t??i;(0,l.useEffect)((()=>{e&&n&&(n.document.title=e)}),[e,n])})(c.ag.get("web-player.pip-mini-player.window-title")),(0,l.useEffect)((()=>{if(n){const e=setTimeout((()=>{v(!1)}),3e3);return()=>{clearTimeout(e)}}}),[n]),!t||!i)return null;const _={"--background-color":b,"--background-image-url":`url(${y})`,"--background-image-width":`${x}px`,"--background-image-height":`${x}px`,display:"var(--mini-player-display)"},L=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(t);let A=!L;!L||!E&&f||(A=!0);const M=(0,g.k6)(t);return!C&&!M&&I?(0,P.jsx)(W,{}):(0,P.jsxs)("div",{className:ge,style:{"--mini-player-display":"none"},children:[(0,P.jsxs)("div",{className:o()("encore-dark-theme","encore-layout-themes",pe,{[ve]:w}),style:_,ref:N,children:[(0,P.jsx)("div",{className:o()(Ce,{[ye]:!L}),"data-testid":"pip-hover-element",children:(0,P.jsx)("div",{className:be,id:"document-pip-main-container",children:A&&(0,P.jsx)(d.Ee,{className:fe,src:y,loading:"eager",testid:Be.COVER_ART,children:(0,P.jsx)("div",{className:we,children:(0,P.jsx)(u.t,{size:"xlarge",type:t.type,"data-testid":Be.COVER_ART_PLACEHOLDER})})})})}),(0,P.jsx)(R,{item:t,className:Ne,onClick:V}),(0,P.jsx)("div",{className:o()("encore-over-media-set",je,{[Se]:!(0,g.k6)(t)}),dir:"ltr","data-testid":Be.HOVER_CONTAINER,children:(0,P.jsx)(le,{item:t,spec:j,logger:S})})]}),(0,P.jsx)("div",{className:T,children:(0,P.jsx)(D.E,{fadeIn:!1})}),(0,P.jsx)(a.A9,{colorSet:"invertedLight",showSnackbar:n,className:xe,children:c.ag.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")})]})}))},50428:(e,t,i)=>{function l(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}i.d(t,{b:()=>l})},54718:(e,t,i)=>{i.d(t,{XW:()=>n,Yw:()=>l});const l=640,n="transparent"}}]);
//# sourceMappingURL=xpui-pip-mini-player.bdc384c8.js.map