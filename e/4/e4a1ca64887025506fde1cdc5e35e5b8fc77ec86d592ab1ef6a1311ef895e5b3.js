
((window);window.KAMPYLE_CONSTANT={PLACEHOLDERS:{URL_PREFIX:'https://resources.digital-cloud-prem.medallia.com/',USERSNAP_CDN_URL:'//screencaptue-cdn.kampyle.com/',USERSNAP_HOST_PREFIX:'//screencapture.kampyle.com/',COOLADATA_SRC_PREFIX:'//nebula-cdn.kampyle.com/',COOLDATA_API_HOST:'udc-neb.kampyle.com/',USERSNAP_V4_HOST_PREFIX:'//scp.kampyle.com',USERSNAP_ONPREM_HOST_PREFIX:'https://md-scp.kampyle.com/',USER_AGENT_CLIENT_HINTS_LIST:'["brands", "mobile", "platform", "architecture", "model", "bitness", "platformVersion", "fullVersionList", "wow64", "uaFullVersion"]'},SRC:{OPEN_SANS:'resources/form/FormBuilder/vendor/fonts-googleapis/css/open-sans-v14.css',COOLADATA:'resources/onsite/js/cool-2.1.15.min.js',OOPS:'resources/onsite/images/oops.svg'},FORM_HEIGHT:'450',FORM_WIDTH:'450',COOKIE_EXPIRATION:365,DEVICES:{DESKTOP:'desktop',MOBILE:'mobile',TABLET:'tablet',},FEATURE_VERSIONS:{MOBILE_DYNAMIC_SIZING:2,},TIME_FORMATS:{SECONDS:'seconds',MINUTES:'minutes',HOURS:'hours',DAYS:'days',WEEKS:'weeks',MONTHS:'months',YEARS:'years',},DISPLAY_TYPES:{LIGHTBOX:'lightbox',ANIMATION:'animation',POPUP:'popup',EMBEDDED:'embedded',},FORM_TYPES:{EMBEDDED:'embedded',INVITATION:'invitation',BUTTON:'button',CODE:'code',},EVENT_DATA:{PAGE_NUMBER:'pageNumber',FEEDBACK_CORRELATION_UUID:'feedbackCorrelationUUID',FEEDBACK_UUID:'feedbackUUID'},EVENT_NAME:{NEB_LOAD_FORM:'neb_loadForm'},FEATURE_FLAGS:{WCAG:'WCAG',EXEMPT_BUTTON_FORMS_FROM_QUARANTINE:'exemptButtonFormsFromQuarantine',EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE:'exemptEmbeddedFormsFromQuarantine',EXEMPT_CODE_FORMS_FROM_QUARANTINE:'exemptCodeFormsFromQuarantine'},PROVISIONS:{cooladataNewEvents:'cooladataNewEvents',NEW_SCREEN_CAPTURE_CONFIG:'newScreenCaptureConfiguration',ON_PREM_HYBRID:'onPremHybrid',API_GATEWAY:'apiGateway',LOCALIZED_FORMS:'localizedForms',FORM_TEMPLATE_DATA_SEPERATION:'separateFormTemplateFromData',EVENT_INCLUDE_FEEDBACK_CONTENT:'eventIncludeFeedbackContent',CP_EXT_REFACTOR:'cpExtractRefactor',ADOBE_INCLUDE_LINK_TRACK_VARS:'adobeIncludeLinkTrackVars',ADOBE_ANALYTICS_OBJECT_NAME:'adobeAnalyticsObjectName',ADOBE_CONCAT_LINK_TRACK_VARS:'adobeConcatLinkTrackVars',ENABLE_OVERFLOW:'enableOverflow',SERVER_BASED_TARGETING:'serverBasedTargeting',COOLADATA_EVNETS_LIMIT:'cooladataEventsLimit',UBT_EXTRA_EVENTS:'UBTExtraEvents',ALTERNATIVE_UUID:'alternativeUUID',DISABLE_COOKIE_STORAGE:'cookieStorageDisable',SHARE_PROPERTY_DOMAIN:'sharePropertyBetweenSubdomains',SKIP_INVITATION_OPTIMIZATION:'skipInvitationOptimization',COOLADATA_SUBMITTED_BY_XHR:'cooladataSubmittedByXhr',DO_NOT_SURVEY_ON_UBT_NETWORK_FAIL:'doNotSurveyOnUBTNetworkFail',DHH:'dynamicHybridHosting',USER_SNAP_V4:'userSnapV4',USER_SNAP_ONPREM:'21dcr2_MPC3296_enable_usersnapOnpremCSP',DYNAMIC_ONSITE_EVENTS:'dynamicOnsiteEvents',CSP_RULES:'CSPRemoveInlineStyling',CREATE_SESSION:'cooladataCreateSessionEvent',FORM_TEMPLATES_WCAG:'formTemplatesWCAG',PREVENT_IFRAME_SCROLLBAR_FLICKERING:'20dcr32_NM11146_PreventIFrameScrollFlickering',BACKEND_GENERATED_UUID:'20dcr4_MPC2802_enable_backendGeneratedUUID',CHTML_LOGS:'chtmlLogs',EXEMPT_FORMS_FROM_QUARANTINE:'20dcr4_MPC2952_enable_exemptFormsFromQuarantine',USER_SNAP_AS_COMPONENT:'20dcr4_MPC2893_enable_ScreenCaptureAsComponent',ADDITIONAL_BUTTON_STYLES:'21dcr1_MPC3199_AdditionalButtonStyles',RTL:'21dcr1_MPC_3283_enable_RTL',GREATER_SMALLER_THAN_DECODE:'21dcr1_MPC3370_EnableGreaterSmallerThanSupport',NEW_MODAL_DIALOGS:'21dcr3_MPC3281_enable_newModalDialogs',IS_CHTML_HANDLE_INIT_FOCUS_INDEPENDENTLY:'21dcr3_MPC3281_enable_CHTMLHandleFocusIndependently',WCAG_TRAP_FOCUS_IN_MODAL:'WCAGTrapFocusInModal',WCAG_REVIEW_FIXES:'20dcr4_MPC2905_wcagReviewFixes',PROPERTY_MESSAGES:'propertyMessages',NOT_SCROLL_TO_LAST_POSITION_DISPLAY_TYPE_ANIMATION:'willNotScrollToLastPositionDisplayTypeAnimation',CLEAR_EMBEDDED_ON_UPDATE_PAGE:'21dcr2_MPC3571_enable_ClearEmbeddedFormOnUpdatePageView',ENABLE_EVENTS_FOR_CE_DEBUG:'21DCR2_MPC3662_EnableEventsForCEDebug',EXPOSE_SELECTION_QUESTIONS:'21DCR3_MPC3866_exposeSelectionQuestionsInCustomEvent',EXPOSE_VERBATIM_QUESTIONS:'21DCR3_MPC3866_exposeVerbatimQuestionsInCustomEvent',EXTENSION_ENABLED:'21dcr6_MPC4042_enable_exmdextension',LIVE_FORM_V2:'21dcr2_MPC2743_enable_newLiveForm',ENABLE_FIX_FOR_SPA_TIME_ON_PAGE:'21DCR5_MPC4030_EnableFixForSpaTimeOnPage',ENABLE_UBT_IDENTIFIER_HASH:'21dcr6_MPC4296_enable_UBTIdentifierHash',TARGETING_EVENTS_REPORTING:'targetingEventsReporting',ENABLE_CLIENT_HINTS:'23dcr1_MPC6052_EnableClientHints',},MEDALLIA_DIGITAL_EMBED_FILE:'medallia-digital-embed.js',DEFAULT_ADOBE_SDK_NAME:'s',ONPREM_URL_PREFIX:'/****ONPREM_URL_PREFIX****/',ONPREM_UDC_PREFIX:'/****JS_UDC****/',ANALYTICS_EVENT_FORBIDDEN_PROPERTIES:{sourceWindow:true,content:true,feedbackCorrelationUUID:true},FORM_TRIGGER_TYPES_MAP:{embedded:'Embedded',invitation:'Intercept',button:'AlwaysOn',code:'TriggeredByCode',},EXPOSED_FEEDBACK_KEYS:{FORM_ID_LABEL:'Form_ID',FORM_TYPE_LABEL:'Form_Type',FEEDBACK_UUID_LABEL:'Feedback_UUID',FEEDBACK_CONTENT_LABEL:'Content',FORM_LANGUAGE_LABEL:'Form_Language',},LANG_MEMORY_DATA_KEY_PREFIX:'formLanguage:',FORM_JSON_DATA_KEY_PREFIX:'formJsonData:',INVITE_JSON_DATA_KEY_PREFIX:'inviteJsonData:',FORM_BUTTON:'button',FORM_INVITATION:'invitation',CUSTOM_EVENT_OTHER:'Other',LOCALIZED_FORM_DEFAULT_REPLACE_VALUE:'default',NOT_RECORDING:'NOT_RECORDING',IFRAME_SETTINGS:{EMBEDDED:{IFRAME_ID_PREFIX:"embeddedIframe"},LIGHTBOX:{IFRAME_ID_PREFIX:"kampyleForm",CONTAINER_ID_PREFIX:"kampyleFormModal",WRAPPER_ID:"MDigitalLightboxWrapper"},ANIMATION:{CONTAINER_ID:'KampyleAnimationContainer',IFRAME_ID:'kampyleFormAnimation',WRAPPER_ID:'MDigitalAnimationWrapper'},INVITATION:{IFRAME_ID:'kampyleInvite',CONTAINER_ID:'kampyleInviteModal',IFRAME_TITLE:'Invitation to provide feedback',WRAPPER_ID:'MDigitalInvitationWrapper'},OOPS:{CONTAINER_ID_PREFIX:'mdigital-no-json-modal_',CLOSE_BUTTON_ID:'close-no-json-modal'},IFRAME_TITLE:"Feedback Survey",},PROPERTY_SETTINGS:{MANUALLY_INVITE_TARGETING:'MANUALLY_INVITE_TARGETING',CUSTOM_CSS_UPLOAD:'CUSTOM_CSS_UPLOAD'},EVENTS:{MDIGITAL_MANUALLY_INVITE_TARGETING:'MDigital_manuallyInviteTargeting',MDIGITAL_PAGE_TARGETING_PHASE_ENDED:'MDigital_pageTargetingPhaseEnded',MDIGITAL_BEHAVIORAL_TARGETING_PHASE_ENDED:'MDigital_behavioralTargetingPhaseEnded',MDIGITAL_QUARANTINED_SURVEY_PHASE_ENDED:'MDigital_quarantinedSurveyPhaseEnded',MDIGITAL_TARGETING_RULE_EVALUATED:'MDigital_targetingRuleEvaluated',MDIGITAL_SCREEN_CAPTURE_LOADED:'neb_screenCaptureLoaded',MDIGITAL_SDK_PAGE_VIEW:'neb_sdkPageView',MDIGITAL_WARNING:'MDigital_warning',MDIGITAL_COULD_NOT_FETCH_DATA:'MDigital_couldNotFetchData',MDIGITAL_COULD_NOT_LOAD_FORM_APPLICATION:'MDigital_couldNotLoadFormApplication',NEB_EVENT_DISPATCHER_ERROR:'neb_eventDispatcherError',NEB_LOAD_FORM:'neb_loadForm',NEB_FORM_LOADING_HAS_FAILED:'neb_formLoadingHasFailed',NEB_RESET_FORM_STATE:'neb_resetFormState',MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY:'MDigital_DynamicOnsiteInitializedSuccessfully',CREATE_SESSION:'createSession',MDIGITAL_NO_JSON_MODAL_SHOWN:'MDigital_noJsonModalShown',MDIGITAL_NO_JSON_MODAL_CLOSED:'MDigital_noJsonModalClosed',MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_FORM_CLOSED:'MDigital_updateTargetingWithDeclinedDateFormClosed',MDIGITAL_UPDATE_TARGETING_WITH_DECLINED_DATE_INVITE_DECLINED:'MDigital_updateTargetingWithDeclinedDateInviteDeclined',MDIGITAL_CHTML_LOGS:'MDigital_CHTML_Logs',SCREEN_CAPTURE_RETAKE:'MDigital_screenCaptureRetake',SCREEN_CAPTURE_DELETE:'MDigital_screenCaptureDelete',CUSTOM_EVENTS_DEBUG_MESSAGE:'mdigital_customEventsDebugMessage',MDIGITAL_VALIDATE_ORIGIN:'MDigital_validate_origin',},LOG_MESSAGES:{TRIGGER_MESSAGE_TEMPLATE:'Event {{EVENT_NAME}} has been {{STATUS}}. \n the data is: {{DATA}}. \n the context is :{{CONTEXT}}. \n the options are : {{OPTIONS}}.\n',ERROR_LOG_TEMPLATE:'Error Message is {{ERROR_MESSAGE}}',ERROR_DYNAMIC_ONSITE_INITIALIZATION:'Failed to fetch onsite data.',ERROR_ONSITE_SDK_CONFIGURATION_MISSING:'Failed to execute KAMPYLE_ONSITE_SDK.{{METHOD}}, due to missing onsite configuration.'},LOG_STATUSES:{FAILED:'failed',TRIGGERED:'triggered'},OPERATORS:{REGEX:'regex',EQUALS:'equals',DOES_NOT_EQUAL:'doesnotequal',CONTAINS:'contains',DOES_NOT_CONTAIN:'doesnotcontain',STARTS_WITH:'startswith',ENDS_WITH:'endswith',HAS_VALUE:'hasvalue',LATER_THAN:'laterthan',EARLIER_THAN:'earlierthan',GREATER_THAN:'greaterthan',SMALLER_THAN:'smallerthan'},TARGETING_STATUS:{CANDIDACY:'candidacy',TRIGGERED:'triggered',QUARANTINED:'quarantined'},TARGETING_PHASES:{PAGE_TARGETING:"pageTargeting",BEHAVIORAL_TARGETING:"behavioralTargeting",QUARANTINE_TARGETING:"quarantineTargeting"},TARGETING_RULES:{INVITE_IF_ANY_SURVEY_ALREADY_SUBMITTED_PER_SESSION:'InviteAnySurveyAlreadySubmittedPerSession',INVITE_IF_ANY_INVITE_ALREADY_SHOWN_PER_SESSION:'InvitePerSession'},REGIONS:{DEV:'dev',QA:'qa',COLO_QA:'digital-cloud-qa',COLO_US:'digital-cloud-us',},MEMORY_DATA_FIELDS:{MDIGITAL_ALTERNATIVE_UUID:'mdigital_alternative_uuid',FETCHING_DATA_IN_PROGRESS:'FETCHING_DATA_IN_PROGRESS_',DATA_JSON:'dataJson',HAS_ONSITE_CONFIGURATION:'hasOnsiteConfiguration',TIMEOUT_HANDLERS:'mdTimeoutHandlers',FEEDBACK_CORRELATION_UUID:'feedbackCorrelationUUID',IS_BUTTON_CONTAINER_CREATED:'isButtonContainerCreated',REGION:'region',FEEDBACK_BUTTON_POSITION_STYLE:'buttonPositionStyle',LIVE_FORM_V2_DEBUG_MODE:'md_liveFormV2_isDebugMode',DOM_EVENT_HANDLERS:'domEventHandlers',DECIBEL_DATA:'decibelData'},SESSION_DATA_FIELDS:{IS_SURVEY_SUBMITTED_IN_SESSION:'md_isSurveySubmittedInSession'},TIMEOUT_HANDLERS:{FORM_APP_STATUS:'formAppStatus',EMBEDDED_STATUS:'embeddedFormStatus',},CSS_FONT_RULE:'CSSFontFaceRule',NETWORK:{RETRY_TIMEOUT:1000,REQUEST_TIMEOUT:5000,TIME_FOR_FORM_TO_LOAD_MS:60000,NUM_OF_RETRIES:3},ERROR_CODE:{SECURITY_ERROR:18},KEY_CODES:{SPACE:32,TAB:9,ENTER:13,ESC:27,},BROWSERS:{IE:'IE',CHROME:'Chrome',FIREFOX:'Firefox',SAFARI:'Safari'},URLS:{KMA_UDC:'https://nginx-log-post.kampyle.com/?data='},TEXTS:{DEFAULT_JSON_ERROR_MESSAGES:{title:'Oops...',body:'We canâ€™t collect your feedback at the moment.<br/>Refresh your page and try again',close:'Close this modal',},SCREEN_CAPTURE:{DEFAULT_DESCRIPTION:'Click "Capture Image" button or drag the cursor to highlight a specific area'}},FORM_LOADING_FAILURE_CAUSE:{APPLICATION_FAILED:'applicationFailed',JSON_FAILED:'jsonFailed'},PROPERTY_MESSAGES:{NO_JSON_MESSAGE:{TYPE:'noJsonMessage',KEYS:{TITLE:'title',BODY:'body',CLOSE:'close'}}},BROWSER_EVENTS:{FOCUS:'focus',MOUSE_DOWN:'mousedown'},COOLADATA_INSTANCE_NAME:"cooladata_instance_for_medallia_digital",SCREEN_CAPTURE:{DOM_SELECTION:"DOM_SELECTION",DOM_SELECTION_VALUE:"domSelector",AREA_SELECTION_VALUE:"highlight",},COOLADATA_HTTP_EVENTS_BY_METHOD:{BEFORE:{POST:'neb_beforeHttpPostRequest'},AFTER:{GET:'neb_afterHttpGetRequest',POST:'neb_afterHttpPostRequest'},TIMEOUT:{GET:'neb_afterHttpGetRequestOnTimeout',POST:'neb_afterHttpPostRequestOnTimeout'},ERROR:{GET:'neb_afterHttpGetRequestOnError',POST:'neb_afterHttpPostRequestOnError'},ERROR_STATUS_CODE:{GET:'neb_afterHttpGetRequestOnErrorStatusCode',POST:'neb_afterHttpPostRequestOnErrorStatusCode'}},HTTP_METHODS:{GET:'GET',POST:'POST'},COLORS:{USERSNAP_V4_SELECTION_COLOR:"#fb585b",USERSNAP_ONPREM_SELECTION_COLOR:"#004CCB",},VIEW:{FEEDBACK_BUTTON_ID:'nebula_div_btn',FEEDBACK_BUTTON_CONTAINER_ID:'kampyleButtonContainer',},CLOSE_FORM_PARAM_VALUES:{ALL:'all',EMBEDDED:'embedded',MODAL:'modal'},SPINNER_SETTINGS:{ID:'MDigital_spinnerCircle',CONTAINER_ID:'MDigital_spinnerContainer',SIZE:{LARGE:"large",SMALL:"small"}},CSS_SETTINGS:{STYLE_SHEET_ANIMATION_NAME:'MDigital_animationStyle',ANIMATION_RULE_SPIN_NAME:'MDigital_spin'}};window.MDIGITAL.CONFIGURATION=(function(window,document}
function getOnsiteConfiguration(){var dataJson=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON);if(dataJson){return dataJson;}
return{"provisions":{"21dcr1_mpc3281_alignWCAGLogoMarkup":null,"20dcr4_MPC2905_wcagReviewFixes":null,"ibmIncludeSpecificCPsInCooladataEvent":null,"cpExtractRefactor":null,"chtmlLogs":null,"disableFormReloadOnClose":true,"customEventsBroadcast":true,"sharePropertyBetweenSubdomains":null,"googleAnalyticsClientEventsEnabled":null,"spaUrlPolling":true,"20dcr4_MPC2802_enable_backendGeneratedUUID":true,"21dcr2_MPC2743_enable_newLiveForm":true,"customCssUpload":null,"willNotScrollToLastPositionDisplayTypeAnimation":null,"cooladataNewEvents":null,"20dcr4_MPC2893_enable_ScreenCaptureAsComponent":null,"adobeAnalytics":true,"eventIncludeFeedbackContent":false,"userSnapV4":null,"dynamicModalSizeInCustomHtml":true,"customHtmlFormsEnable":true,"propertyMessages":true,"cooladataEventsLimit":null,"23dcr1_MPC6052_EnableClientHints":true,"21DCR5_MPC4030_EnableFixForSpaTimeOnPage":null,"targetingEventsReporting":null,"cspUsersnapV2Support":null,"21DCR3_MPC3866_exposeSelectionQuestionsInCustomEvent":true,"21dcr3_MPC3281_enable_CHTMLHandleFocusIndependently":null,"serverBasedTargeting":null,"CSPRemoveInlineStyling":null,"enableOverflow":null,"doNotSurveyOnUBTNetworkFail":null,"mobileInvitationLayout":true,"coolodataEventsByXhr":null,"addingRandomTimeForTimeInSession":null,"21dcr2_MPC3571_enable_ClearEmbeddedFormOnUpdatePageView":true,"21dcr3_mpc3662_delaySurveyUntilCSSLoad":true,"mobileWebDynamicFormSizeInFormBuilder":false,"21dcr1_MPC3370_enable_ratingOrientationChange":true,"cookieStorageDisable":true,"screenCaptureEnabled":null,"skipInvitationOptimization":null,"reusableResourcesLibrary":true,"formTemplatesWCAG":true,"formSpacing":true,"21dcr1_MPC_3283_enable_RTL":null,"21DCR3_MPC3866_exposeVerbatimQuestionsInCustomEvent":true,"20dcr4_MPC2952_enable_exemptFormsFromQuarantine":true,"21dcr1_MPC3199_AdditionalButtonStyles":true,"22dcr2_MPC4277_useDecibelTriggers":null,"21dcr6_MPC4143_enable_HideAlternativeOptions":null,"21dcr6_MPC4296_enable_UBTIdentifierHash":null,"onPremHybrid":true,"responsiveRatingComponent":true,"localizedForms":true,"21dcr3_MPC3281_enable_newModalDialogs":true,"UBTExtraEvents":null,"21dcr2_MPC3296_enable_usersnapOnpremCSP":true,"adobeAnalyticsObjectName":true,"mobileWebDynamicFormSize":true,"WCAGTrapFocusInModal":null,"dynamicHybridHosting":true,"21dcr1_MPC3370_EnableGreaterSmallerThanSupport":null,"underScoreLocalization":null,"thermoFisherTeaLeafIntegration":null,"alternativeUUID":null,"adobeConcatLinkTrackVars":null,"errorMessageWcagSupport":true,"multiOptionsID":true,"adobeIncludeLinkTrackVars":true,"20dcr32_NM11146_PreventIFrameScrollFlickering":true,"separateFormTemplateFromData":true,"dynamicOnsiteEvents":null,"21dcr6_MPC4042_enable_exmdextension":null,"cooladataIntegration":true,"cooladataCreateSessionEvent":null,"21DCR1_MPC3199_enable_RatingLabelAlign":null,"21DCR2_MPC3662_EnableEventsForCEDebug":null,"parallelTabSolution":null},"onsiteDataUrl":"https://resources.digital-cloud-prem.medallia.com/wdcusprem/14478/onsite/onsiteData.json","region":"digital-cloud-us-prem","websiteId":14478,"accountId":14477,"packageVersion":"2.48.3_20230426221425","isWCAG":true,"isManuallyInviteTargeting":false,"isGoogleAnalyticsClientGTM":false,"isFormsPreloaded":true,"cookieExpirationTime":null,"adobeSdkName":null,"sharedSubdomain":null,"customCssUpload":false,"exemptButtonFormsFromQuarantine":false,"exemptCodeFormsFromQuarantine":false,"exemptEmbeddedFormsFromQuarantine":false,"screenCaptureSelectionTool":null,"isSpa":false};}
function onsiteDataSuccess(data){if(!data||data.error){MDIGITAL.CONFIGURATION.onsiteDataFailed(data);}else{if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.DYNAMIC_ONSITE_EVENTS)){KAMPYLE_EVENT_DISPATCHER.trigger(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY);}
KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.HAS_ONSITE_CONFIGURATION,true);var formattedData=MDIGITAL.CONFIGURATION.formatConfiguration(data);var fullConfiguration=Object.assign({},getOnsiteConfiguration(),formattedData);MDIGITAL.INIT.initOnsite(fullConfiguration);}}
return{init:init,isOnsiteConfigurationMissing:isOnsiteConfigurationMissing,getOnsiteConfiguration:getOnsiteConfiguration,onsiteDataSuccess:onsiteDataSuccess,onsiteDataFailed:onsiteDataFailed,fetchOnsiteExternalConfiguration:fetchOnsiteExternalConfiguration,formatConfiguration:formatConfiguration};})(window,document);window.KAMPYLE_FUNC=(function(){function init(){window.MDIGITAL&&window.MDIGITAL.FORM_STATE&&window.MDIGITAL.FORM_STATE.init();subscribeFirstToPageEvents();KAMPYLE_VIEW.init();window.MDIGITAL&&window.MDIGITAL.EMBEDDED&&window.MDIGITAL.EMBEDDED.init();if(checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)){window.MDIGITAL&&window.MDIGITAL.MODAL_DIALOGS&&window.MDIGITAL.MODAL_DIALOGS.init();}
else if(checkProvision(KAMPYLE_CONSTANT.PROVISIONS.WCAG_TRAP_FOCUS_IN_MODAL)){window.MDIGITAL&&window.MDIGITAL.WCAG&&window.MDIGITAL.WCAG.init();}
KAMPYLE_TARGETING.init();KAMPYLE_MESSAGE.init();KAMPYLE_ANIMATION.init();var formattedFormData=MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{};formattedFormData=validateFormContract(formattedFormData);formattedFormData.formNodes.forEach(MDIGITAL.ON_PREM.replaceFormNodeUrls);formattedFormData.globalResourcesUrl=MDIGITAL.ON_PREM.replaceOnPremPrefixes(formattedFormData.globalResourcesUrl);KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.DATA_JSON,formattedFormData);var context=KAMPYLE_UTILS.getUrlParam('nebContext')||window.MDIGITAL.nebContext||'live';KAMPYLE_DATA.setMemoryData('context',context);KAMPYLE_DATA.setMemoryData('kampyleDevice',checkDevice());KAMPYLE_DATA.setMemoryData('hostedViewportContent',[]);KAMPYLE_DATA.setMemoryData('isGuest',true);if(KAMPYLE_DATA.getMemoryData('context')!=='preview'){KAMPYLE_ADOBE_ANALYTICS.init();}
MDIGITAL.CUSTOM_EVENTS.init();createSession();subscribeToPageEvents();subscribeToCustomEvents();KAMPYLE_UTILS.setEventHandler(window,'hashchange',handleHashChanged);KAMPYLE_DATA.setMemoryData('currentUrl',window.location.href);var urlInterval=setInterva},500);}
function shouldSkipFetchingFormData(formId,isInvite,formLanguage,isLocalizedForm){var isFetchingDataInProgressKey=KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FETCHING_DATA_IN_PROGRESS+formId;if(isLocalizedForm){isFetchingDataInProgressKey=isFetchingDataInProgressKey+'_'+formLanguage;}
var isFetchingDataInProgress=KAMPYLE_DATA.getMemoryData(isFetchingDataInProgressKey);var dataSeparationProvision=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)
return!dataSeparationProvision||isJsonDataLoaded(formId,false)||hasApplicationLoadingFailed(formId,isInvite)||isFetchingDataInProgress;}
function prepareJsonData(eventName,data){var isInvite=eventName==='neb_loadInvitation';var formLanguage=KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.LANG_MEMORY_DATA_KEY_PREFIX+data.formId);var isLocalizationOn=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS);var fetchingDataInProgressKey=KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FETCHING_DATA_IN_PROGRESS+data.formId;if(isLocalizationOn){fetchingDataInProgressKey=fetchingDataInProgressKey+'_'+formLanguage}
if(isInvite){fetchingDataInProgressKey=fetchingDataInProgressKey+'_invite';}
if(KAMPYLE_FUNC.shouldSkipFetchingFormData(data.formId,isInvite,formLanguage,isLocalizationOn)){return;}
else{KAMPYLE_DATA.setMemoryData(fetchingDataInProgressKey,true);}
KAMPYLE_DATA.fetchFormJsonData({formId:data.formId,isInvite:isInvite,fetchingDataInProgressKey:fetchingDataInProgressKey,callbac},onError:onJsonFetchingFailed.bind(null,data,isInvite)});}
function createSession(){var referrerDifferentThanHost=KAMPYLE_FUNC.isReferrerDifferentThanHost();var kampyleUserSession=KAMPYLE_DATA.getData('kampyleUserSession');var isDirectNavigation=false;try{isDirectNavigation=document.referrer===''||window.parent.document.referrer==='';}catch(e){var data={errorMessage:e.message,errorStack:e.stack,additionalInfo:"createSession- failed to access document.referrer, probably CORS problem when the customer's iframe is hosted in a website with different domain."};referrerDifferentThanHost=false;KAMPYLE_COOLADATA.triggerCooladataEvent(KAMPYLE_CONSTANT.MDIGITAL_WARNING,data);}finally{if(!kampyleUserSession||isDirectNavigation||referrerDifferentThanHost){KAMPYLE_DATA.setMemoryData('isSyncedIdentifierData',false);KAMPYLE_DATA.setData('kampyleUserSession',KAMPYLE_UTILS.getCurrentTimestamp());KAMPYLE_DATA.setData('kampyleSessionPageCounter',0);addToSessionCount();KAMPYLE_DATA.deleteData('kampyleUserPercentile');KAMPYLE_DATA.deleteData('kampyleInvitePresented');KAMPYLE_DATA.deleteData(KAMPYLE_CONSTANT.SESSION_DATA_FIELDS.IS_SURVEY_SUBMITTED_IN_SESSION)}}}
function sendInviteInitialData(eventName,data){data=data||{};if(!KAMPYLE_DATA.getFormState(data.formId).inviteLoaded){return false;}
KAMPYLE_UTILS.sendMessageToIframe('kampyleInvite',{action:'inviteShown',});var messageData={accountId:data.accountId,websiteId:data.websiteId,environment:data.enviroment,url:document.location.href,kampyle_version:window.MDIGITAL.version||'0.0.0.0',formId:data.formId,cookie_size:KAMPYLE_UTILS.getByteSize(document.cookie),isWCAG:KAMPYLE_DATA.isFeatureEnabled('WCAG'),deviceType:checkDevice(),provisions:getAllProvisions(),position:KAMPYLE_VIEW.getInvitePosition(data.formId),customCssUpload:KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.CUSTOM_CSS_UPLOAD)};if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)){var callbackFunction=function(jsonData){var formData=KAMPYLE_DATA.getFormData(data.formId);var onsiteConfiguration=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();var extraMessageData={submitUrlPrefix:onsiteConfiguration.submitUrlPrefix,submitUrlSuffix:onsiteConfiguration.submitUrlSuffix,globalResourcesUrl:onsiteConfiguration.globalResourcesUrl,versionedResourcesUrl:formData.versionedResourcesUrl};messageData=Object.assign({},messageData,{inviteData:jsonData},extraMessageData);if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)){messageData.formLanguage=MDIGITAL.LOCALIZATION.getFormLanguage(data.formId)||null;}
KAMPYLE_UTILS.sendMessageToIframe('kampyleInvite',{action:'setExtraData',data:messageData,});};var onError=function(error){console.error(error);};KAMPYLE_DATA.fetchFormJsonData({formId:data.formId,callback:callbackFunction,onError:onError,isInvite:true},true)}else{KAMPYLE_UTILS.sendMessageToIframe('kampyleInvite',{action:'setExtraData',data:messageData,});}}
function sendFormExtraData(eventName,data){data=data||{};var formData=KAMPYLE_DATA.getFormData(data.formId);if(!formData||!data.formId){return false;}
var targetWindow;var currIframe;var formDisplayType=KAMPYLE_DATA.getDisplayType(formData);switch(formDisplayType){case'animation':currIframe=document.getElementById('kampyleFormAnimation'+data.formId);break;case'lightbox':currIframe=document.getElementById('kampyleForm'+data.formId);break;case'popup':targetWindow=KAMPYLE_DATA.getMemoryData('popupHandler');break;case KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED:currIframe=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.EMBEDDED.IFRAME_ID_PREFIX+data.formId);break;default:KAMPYLE_UTILS.showWarning('Invalid display type - '+formDisplayType);return false;}
var origin='*';if(currIframe&&currIframe.getAttribute){origin=currIframe.getAttribute('origin')||'*';targetWindow=currIframe.contentWindow;}
if(targetWindow&&targetWindow.postMessage){if(MDIGITAL.CUSTOM_PARAMETERS.hasCustomParams(data.formId))
{var customParams=MDIGITAL.CUSTOM_PARAMETERS.formatCustomParams(data.formId);targetWindow.postMessage('{"action": "customParamsLoaded","customParams" : '+JSON.stringify(customParams)+'}',origin);}
var messageData='{"action": "setFormId","formId" : '+data.formId+'}';targetWindow.postMessage(messageData,origin);messageData={action:'setExtraData',};messageData.clientHints=KAMPYLE_UTILS.safeJsonParse(KAMPYLE_CONSTANT.PLACEHOLDERS.USER_AGENT_CLIENT_HINTS_LIST)||[];messageData.provisions=getAllProvisions();messageData.integrations=KAMPYLE_INTEGRATION.getIntegrationData();messageData.websiteId=MDIGITAL.CONFIGURATION.getOnsiteConfiguration().websiteId||null;messageData.device=KAMPYLE_DATA.getMemoryData('kampyleDevice');messageData.context=KAMPYLE_DATA.getMemoryData('context');messageData.url=encodeURIComponent(document.location.href);messageData.customCssUpload=KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.PROPERTY_SETTINGS.CUSTOM_CSS_UPLOAD),messageData.displayType=KAMPYLE_DATA.getDisplayType(formData);var onsiteConfiguration=MDIGITAL.CONFIGURATION.getOnsiteConfiguration();Object.assign(messageData,{submitUrlPrefix:onsiteConfiguration.submitUrlPrefix,submitUrlSuffix:onsiteConfiguration.submitUrlSuffix,submitUrlWithBackendUUID:onsiteConfiguration.submitUrlWithBackendUUID,globalResourcesUrl:onsiteConfiguration.globalResourcesUrl,versionedResourcesUrl:formData.versionedResourcesUrl});if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.SERVER_BASED_TARGETING)){messageData.endUserIdentifier=getUserIdentifierVal();KAMPYLE_EVENT_DISPATCHER.trigger('neb_initUserIdentifierOnExtraData',{hasIdentifierValue:messageData.endUserIdentifier!==null});}
messageData.onPremPackageVersion=MDIGITAL.ON_PREM.getPackageVersion();var pendingExtraData=KAMPYLE_DATA.flushFormExtraData(data.formId);if(pendingExtraData){for(var extra in pendingExtraData){if(pendingExtraData.hasOwnProperty(extra)){messageData[extra]=pendingExtraData[extra];}}}
if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.FORM_TEMPLATE_DATA_SEPERATION)){var callbackFunction=function(jsonData){messageData=Object.assign({},messageData,{formData:jsonData});if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)){messageData.formLanguage=MDIGITAL.LOCALIZATION.getFormLanguage(data.formId)||null;}
targetWindow.postMessage(JSON.stringify(messageData),origin);};var onError=function(error){console.error(error);};KAMPYLE_DATA.fetchFormJsonData({formId:formData.formId,callback:callbackFunction,onError:onError},true);}else{targetWindow.postMessage(JSON.stringify(messageData),origin);}}
KAMPYLE_EVENT_DISPATCHER.trigger('neb_formShown',{formId:data.formId,feedbackCorrelationUUID:data.feedbackCorrelationUUID,});}
function getTimeInSession(){var sessionStartTimestamp=Number(KAMPYLE_DATA.getData('kampyleUserSession'));return!!sessionStartTimestamp?Math.floor(KAMPYLE_UTILS.getTimeDiff(sessionStartTimestamp,KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS)):0;}
return{increasePageViewCounter:increasePageViewCounter,subscribeToCustomEvents:subscribeToCustomEvents,subscribeToPageEvents:subscribeToPageEvents,createSession:createSession,updateTargeting:updateTargeting,checkProvision:checkProvision,getAllProvisions:getAllProvisions,onSyncIdentifierDataSuccess:onSyncIdentifierDataSuccess,shouldRenderForm:shouldRenderForm,addScreenCaptureData:addScreenCaptureData,sendFormExtraData:sendFormExtraData,handleVersion:handleVersion,showPreviewForm:showPreviewForm,updatePreviewIframeStyle:updatePreviewIframeStyle,validateFormContract:validateFormContract,getTriggerTypeByEvent:getTriggerTypeByEvent,prepareInviteTriggeringData:prepareInviteTriggeringData,loadScreenCaptureApi:loadScreenCaptureApi,handleInviteLoaded:handleInviteLoaded,sendInviteInitialData:sendInviteInitialData,checkDevice:checkDevice,shouldSyncIdentifier:shouldSyncIdentifier,prepareJsonData:prepareJsonData,shouldSkipFetchingFormData:shouldSkipFetchingFormData,getTimeInSession:getTimeInSession,getTimeOnPage:getTimeOnPage,isReferrerDifferentThanHost:isReferrerDifferentThanHost,setQuarantineDeclinedDate:setQuarantineDeclinedDate,setQuarantineSubmittedDate:setQuarantineSubmittedDate,handleFormClosed:handleFormClosed,handleFeedbackSubmitted:handleFeedbackSubmitted,handleInviteDeclined:handleInviteDeclined,init:init,startCheckingTargeting:startCheckingTargeting,isAnyOtherFormAlreadyShown:isAnyOtherFormAlreadyShown,isAnyInviteShown:isAnyInviteShown,getSafeCustomParamVal:getSafeCustomParamVal,isPreloadConfigured:isPreloadConfigured,kampyleButtonClicked:kampyleButtonClicked,loadMultipileForms:loadMultipileForms,routeToForm:routeToForm,updateIdentifierDataIntegerIfNecessary:updateIdentifierDataIntegerIfNecessary,syncIdentifierData:syncIdentifierData,getUserIdentifierVal:getUserIdentifierVal,handleFormStateUpdated:handleFormStateUpdated,hasApplicationLoadingFailed:hasApplicationLoadingFailed,isJsonDataLoaded:isJsonDataLoaded,handleInviteApplicationUpdated:handleInviteApplicationUpdated,isFormLoaded:isFormLoaded,isContentPayloadEnabled:isContentPayloadEnabled,};})();window.KAMPYLE_DATA=(function(){var dataJson;var _memory;var TargetingMapping={abandon:'abandon',percentage:'kampyleInvitePercentageUsers',timeInSession:'kampyleTimeInSession',timeOnPage:'kampyleTimeOnPage',deviceTypes:'devicetypes',pageEvents:'pageElementEvent',};var featureToPathMapping={'GTM':'isGoogleAnalyticsClientGTM','WCAG':'isWCAG','SPA':'isSpa','MANUALLY_INVITE_TARGETING':'isManuallyInviteTargeting','CUSTOM_CSS_UPLOAD':'customCssUpload'};var supportedFeatures=[KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_BUTTON_FORMS_FROM_QUARANTINE,KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_EMBEDDED_FORMS_FROM_QUARANTINE,KAMPYLE_CONSTANT.FEATURE_FLAGS.EXEMPT_CODE_FORMS_FROM_QUARANTINE]
var ini}
function initOnsiteDefaultState(){var formsState={};var allData=MDIGITAL.CONFIGURATION.getOnsiteConfiguration()||{};var allForms=allData.formNodes||[];var len=allForms.length;var curr;for(var i=0;i<len;i++){curr=allForms[i];if(curr){formsState[curr.formId]={loading:false,loaded:null,shouldBeShown:false,shown:false,inviteLoaded:null,inviteShown:false,jsonFailed:false,applicationFailed:false,isCurrentlySubmitted:false,targeting:{pageTargeting:null,behavioralTargeting:[],quarantineTargeting:[]}};}}
setMemoryData('formsState',formsState);setMemoryData('hostingElementsHeights',{});KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,false);KAMPYLE_DATA.clearAllTimeoutHandlers();KAMPYLE_DATA.clearAllDOMEventsHandlers();}
function getTimeoutHandler(key){return getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.TIMEOUT_HANDLERS+"."+key);}
function setData(dataName,dataValue,expriration){if(!KAMPYLE_DATA.getPropertySharedSubdomain()){try{localStorage[dataName]=dataValue;}
catch(e){KAMPYLE_UTILS.kampyleSetCookie(dataName,dataValue,expriration||getCookieExpiration(),KAMPYLE_DATA.getPropertySharedSubdomain());}}
else{KAMPYLE_UTILS.kampyleSetCookie(dataName,dataValue,expriration||getCookieExpiration(),KAMPYLE_DATA.getPropertySharedSubdomain());}
return true;}
var deleteDat}
function getMemory(){return _memory;}
function getServerBasedTargetingPrefix(){return getNestedConfigurationProperty('sbtServerDomain');}
function isPopupDisplayType(formId){var formData=getFormData(formId);return getDisplayType(formData)===KAMPYLE_CONSTANT.DISPLAY_TYPES.POPUP;}
function isEmbeddedDisplayType(formId){var formData=getFormData(formId);return getDisplayType(formData)===KAMPYLE_CONSTANT.DISPLAY_TYPES.EMBEDDED;}
function getMemoryJsonKey(formId,isInvite,dataKey){var isLocalizationOn=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS);var jsonDataKey;if(!dataKey){jsonDataKey=(isInvite?KAMPYLE_CONSTANT.INVITE_JSON_DATA_KEY_PREFIX:KAMPYLE_CONSTANT.FORM_JSON_DATA_KEY_PREFIX)+formId;}else{jsonDataKey=isInvite?dataKey+formId+'_invite':dataKey+formId;}
if(isLocalizationOn){jsonDataKey=jsonDataKey+'_'+MDIGITAL.LOCALIZATION.getFormLanguage(formId);}
return jsonDataKey;}
function localizeUrl(formId,url){var langCode=(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&MDIGITAL.LOCALIZATION.getFormLanguage(formId))||KAMPYLE_CONSTANT.LOCALIZED_FORM_DEFAULT_REPLACE_VALUE;return url.replace('###LANGUAGE_CODE###',langCode);}
return{init:init,isFeatureEnabled:isFeatureEnabled,getData:getData,setData:setData,deleteData:deleteData,getAllForms:getAllForms,getInegrations:getInegrations,getFormData:getFormData,getMemoryData:getMemoryData,getTargetingData:getTargetingData,setMemoryData:setMemoryData,getShownFormId:getShownFormId,getFormState:getFormState,setFormState:setFormState,getInviteData:getInviteData,getDisplayType:getDisplayType,saveFormExtraData:saveFormExtraData,flushFormExtraData:flushFormExtraData,isCustomHtmlForm:isCustomHtmlForm,getCookieExpiration:getCookieExpiration,isNewMobileInvitation:isNewMobileInvitation,isCustomHtmlAndFixedSizeForm:isCustomHtmlAndFixedSizeForm,deleteMemoryData:deleteMemoryData,getFormVersion:getFormVersion,isMobileDynamicSizing:isMobileDynamicSizing,getPropertySharedSubdomain:getPropertySharedSubdomain,getUserIdentifier:getUserIdentifier,getServerBasedTargetingPrefix:getServerBasedTargetingPrefix,getServerBasedTargetingEnv:getServerBasedTargetingEnv,isPopupDisplayType:isPopupDisplayType,isEmbeddedDisplayType:isEmbeddedDisplayType,isLightBoxDisplayType:isLightBoxDisplayType,fetchFormJsonData:fetchFormJsonData,getFormTriggerType:getFormTriggerType,getPropertyId:getPropertyId,isMobile:isMobile,isSkipInvitation:isSkipInvitation,getFormIframeId:getFormIframeId,isFormOfType:isFormOfType,getMemoryJsonNestedPropertyValue:getMemoryJsonNestedPropertyValue,resetAllFormsLanguagesCode:resetAllFormsLanguagesCode,getMemoryJsonKey:getMemoryJsonKey,setTimeoutHandler:setTimeoutHandler,getTimeoutHandler:getTimeoutHandler,isV2Form:isV2Form,setDOMEventHandler:setDOMEventHandler,getDOMEventHandler:getDOMEventHandler,clearAllDOMEventsHandlers:clearAllDOMEventsHandlers,localizeUrl:localizeUrl,getMemory:getMemory,initOnsiteDefaultState:initOnsiteDefaultState,getDataJsonUrl:getDataJsonUrl,clearAllTimeoutHandlers:clearAllTimeoutHandlers,getNestedConfigurationProperty:getNestedConfigurationProperty};})();window.KAMPYLE_TARGETING})(window,document);window.KAMPYLE_ANIMATION=(function(){var DEFAULTS={ANIMATION_DIRECTION:'centerRight',};function init(){var eventMapping={neb_buttonClicked:[animateWithInit],neb_sdkShowForm:[animateWithInit],neb_loadForm:[handleAnimationIframe,initAnimationPosition],neb_inviteAccepted:[animateWithInit],neb_skipInvitation:[animateWithInit],neb_formClosed:[animateOut,refreshFormIframe],neb_popupBlocked:[animateOut,refreshFormIframe],neb_captureInit:[animateOut],neb_captureImageClicked:[animateIn],MDigital_Capture_Cancelled:[animateIn],neb_formHide:[animateOut],neb_formLoadingHasFailed:[hideAnimationContainer],neb_skipShowingForm:[hideFormAnimationContainer],neb_resetFormState:[refreshFormIframe]};KAMPYLE_EVENT_DISPATCHER.subscribeMany(eventMapping);}
function animateIn(eventName,data){data=data||{};var formData=KAMPYLE_DATA.getFormData(data.formId);var animationContainer=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(shouldIgnoreRenderAnimationForm(formData,animationContainer,data.formId)){return false;}
KAMPYLE_DATA.setMemoryData('isInvitationShouldBeIgnored',true);var formIframe=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+data.formId);var v1IframeStyle={display:'block',};var v2IframeStyle={display:'block',boxShadow:'-4px 0px 18px -1px rgba(0,0,0,0.37)'};var displayDirection=getDisplayDirection(formData);switch(displayDirection){case'centerRight':KAMPYLE_UTILS.setElementStyle(animationContainer,{right:0,});v2IframeStyle.borderRadius='8px 0px 0px 8px';break;case'centerLeft':KAMPYLE_UTILS.setElementStyle(animationContainer,{left:0,});v2IframeStyle.borderRadius='0px 8px 8px 0px';break;case'bottomRight':KAMPYLE_UTILS.setElementStyle(animationContainer,{bottom:0,});v2IframeStyle.borderRadius='8px 0px 0px 0px';break;case'bottomLeft':KAMPYLE_UTILS.setElementStyle(animationContainer,{bottom:0,});v2IframeStyle.borderRadius='0px 8px 0px 0px';break;case'topRight':KAMPYLE_UTILS.setElementStyle(animationContainer,{top:0,});v2IframeStyle.borderRadius='0px 0px 0px 8px';break;case'topLeft':KAMPYLE_UTILS.setElementStyle(animationContainer,{top:0,});v2IframeStyle.borderRadius='0px 0px 8px 0px';break;default:KAMPYLE_UTILS.showWarning('Invalid animation type - '+displayDirection);return false;}
if(formIframe){if(KAMPYLE_DATA.isV2Form(data.formId)){KAMPYLE_UTILS.setElementStyle(formIframe,v2IframeStyle);}else{KAMPYLE_UTILS.setElementStyle(formIframe,v1IframeStyle);}}}
function refreshFormIframe(eventName,data){setTimeout(function(){var formData=KAMPYLE_DATA.getFormData(data.formId);var currIframe=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+data.formId);if(!!currIframe){if(KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")){currIframe.remove();KAMPYLE_DATA.initOnsiteDefaultState();}else{currIframe.src=currIframe.src;currIframe.style.display='none';if(currIframe.removeAttribute){currIframe.removeAttribute('origin');}}}
hideAnimationContainer();},1000);}
function getMiddleHeight(formHeight){return String((window.innerHeight-parseInt(formHeight,10))/2)+'px';}
function getOrCreateAnimationContainer(){var container=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID);if(!container){var formSpanPlacer=Object.assign(document.createElement('span'),{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.WRAPPER_ID});container=document.createElement('div');KAMPYLE_UTILS.addAttributesOnElement(container,{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.CONTAINER_ID});container.style.zIndex='2147483000';formSpanPlacer.appendChild(container);document.body.appendChild(formSpanPlacer);KAMPYLE_UTILS.setElementStyle(container,{border:0,position:'fixed',display:'block',zIndex:'2147483000',});}
return container;}
function handleAnimationIframe(eventName,data){data=data||{};var formData=KAMPYLE_DATA.getFormData(data.formId);if(!formData||!KAMPYLE_ANIMATION.isAnimationForm(formData)){return false;}
var animationContainer=KAMPYLE_ANIMATION.getOrCreateAnimationContainer();var formIframe=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID+data.formId);if(!formIframe){var animationIframeStyle={border:0,height:formData.formHeight+'px',width:formData.formWidth+'px',display:'none',}
var isStyleImportant=false;KAMPYLE_VIEW.createFormIframe(data.formId,KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.IFRAME_ID,animationContainer,animationIframeStyle,isStyleImportant);}}
return{initAnimationPosition:initAnimationPosition,getDisplayDirection:getDisplayDirection,getOrCreateAnimationContainer:getOrCreateAnimationContainer,init:init,hideAnimationContainer:hideAnimationContainer,hideFormAnimationContainer:hideFormAnimationContainer,handleAnimationIframe:handleAnimationIframe,isAnimationForm:isAnimationForm,};})();window.KAMPYLE_VIEW=(function(window,document){var DEFAULTS={CORNER_MARGIN:0,TRIANGULAR_MARGIN:0,VERTICAL_MARGIN:30,};var BUTTON_FUNCTION_ENUM={vertical:'getVerticalButton',triangular:'getTriangularButton',custom:'getCustomButton',}
function handleInviteReady(eventName,data){data=data||{};if(KAMPYLE_FUNC.hasApplicationLoadingFailed(data.formId,true)){return;}
var inviteContainer=document.getElementById('kampyleInviteContainer');if(newMobileInvite()){restoreHostingDOM();if(inviteContainer){KAMPYLE_UTILS.setElementStyle(inviteContainer,{top:'',bottom:'',left:'',right:'',background:'none',visibility:'',display:'none',},true);}}
else{KAMPYLE_UTILS.setElementStyle(inviteContainer,{visibility:'visible',},true);var iframe=document.getElementById('kampyleInvite');if(iframe){KAMPYLE_UTILS.setElementStyle(iframe,{visibility:'visible',},true);}}}
function onKeyboardClose(e){KAMPYLE_UTILS.showInvite();KAMPYLE_UTILS.removeEventHandler(e.srcElement,'blur',onKeyboardClose);}
function setupListenersForHideInviteWhenVirtualKeyboardIsOpen(eventName,data){data=data||{};data.formId=data.formId||KAMPYLE_DATA.getMemoryData('currentFormId');var pos=KAMPYLE_VIEW.getInvitePosition(data.formId);if(newMobileInvite()&&pos==='bottom'){var allFocusableElements=getAllFocusableElements();for(var i=0;i<allFocusableElements.length;i++){KAMPYLE_UTILS.setEventHandler(allFocusableElements[i],'focus',onKeyboardOpen);}}}
function init(){var eventMapping={neb_targetingInit:[removeAllShownElements],neb_loadInvitation:[createInviteIframe],neb_loadForm:[handleLightBoxIframe,showSpinner,applyMobileDynamicStyles],neb_formReady:[hideButton],neb_formLoaded:[setIframeOrigin,hideSpinner,showInviteIfNeeded],neb_formShown:[handleInvitationSkippedForms],neb_inviteHeightChanged:[changeInviteHeight],neb_iFrameHeightChanged:[reactToIframeHeightChange],neb_scrollToTop:[scrollToTop],neb_scrollFromTop:[scrollFromTop],neb_inviteReady:[handleInviteReady,setupListenersForHideInviteWhenVirtualKeyboardIsOpen],neb_scrollToForm:[scrollToForm],neb_showButton:[showButton,alignButtonWithForm,setVerticalOffset],neb_buttonClicked:[handleButtonClicked],neb_sdkShowForm:[hideButton],neb_captureInit:[hideVisibility,hideButton],neb_inviteAccepted:[hideInvite,hideButton,removeListenersForHideInviteWhenVirtualKeyboardIsOpen],neb_showForm:[showForm],neb_sdkPageView:[hideInvite,removeListenersForHideInviteWhenVirtualKeyboardIsOpen],neb_inviteDeclined:[hideInvite,removeListenersForHideInviteWhenVirtualKeyboardIsOpen],neb_formClosed:[hideForm],neb_popupBlocked:[hideForm],neb_formHide:[hideVisibility],neb_captureImageClicked:[showVisibility],MDigital_Capture_Cancelled:[showVisibility],neb_formLoadingHasFailed:[showFormCouldNotFechtedErrorMsg],neb_inviteLoaded:[updateInviteIframeTitle,hideSpinnerIfPopup],MDigital_Invalid_Origin:[showFormCouldNotFechtedErrorMsg],};if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)){eventMapping.neb_showButton.push(setZIndex);}
KAMPYLE_EVENT_DISPATCHER.subscribeMany(eventMapping);if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){KAMPYLE_UTILS.addStyle('.noOutline{outline: none !important;}');KAMPYLE_UTILS.addStyle('.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}');}
KAMPYLE_UTILS.setEventHandler(window,'resize});}
function hideSpinner(eventName,data){toggleSpinner(false);}
function setVerticalOffset(eventName,data){var formData=KAMPYLE_DATA.getFormData(data.formId);var buttonData=KAMPYLE_UTILS.getNestedPropertyValue(formData,'buttonData');var offset=KAMPYLE_UTILS.getNestedPropertyValue(buttonData,'verticalOffset')||0;if(!isNaN(offset)){var nebButton=document.getElementById('nebula_div_btn');if(nebButton&&nebButton.style){if(buttonData.position.indexOf('bottom')>-1){nebButton.style.marginBottom=offset+'px';}else{offset=Number(offset)*-1;nebButton.style.marginTop=offset+'px';}}}}
function hideForm(eventName,data){data=data||{};var currentFormId=KAMPYLE_DATA.getMemoryData('currentFormId');setMetaViewport('remove');if(document.getElementById('kampyleFormContainer')!==null){var currIframe=document.getElementById('kampyleForm'+currentFormId);if(!!currIframe){if(!KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")){currIframe.src=currIframe.src;KAMPYLE_EVENT_DISPATCHER.trigger('neb_load_form_form_reload',{formId:data.formId});}else{KAMPYLE_DATA.initOnsiteDefaultState();var kampyleFormContainer=document.getElementById('kampyleFormContainer');if(kampyleFormContainer){kampyleFormContainer.remove();}}
KAMPYLE_UTILS.setElementStyle(currIframe,{display:'none',},true);if(currIframe.removeAttribute){currIframe.removeAttribute('origin');}}
hideVisibility();restoreHostingDOM();}
if(!KAMPYLE_FUNC.checkProvision("disableFormReloadOnClose")||KAMPYLE_DATA.isPopupDisplayType(currentFormId)){if(data.sourceWindow&&data.sourceWindow.close){data.sourceWindow.close();}}}
function formatTriangularStyle(formData){var buttonData=formData.buttonData||{};var triangularStyle=['button#nebula_div_btn { height: auto !important }','.kampyle_feedback-button{','background-color:transparent !important;font-family:"Open Sans",sans-serif;cursor:pointer;position:fixed;z-index:99999990','}','.kampyle_feedback-button .kampyle_triangle{position:absolute;width:0;height:0;z-index:-1}','.kampyle_feedback-button .kampyle_button-text{','height:81px;width:81px;text-align:center;z-index:1000;color:'+buttonData.textColor+';font-size:14px;font-weight:normal !important;','}','.kampyle_feedback-button .kampyle_bottom{','line-height:108px !important;','}','.kampyle_feedback-button .kampyle_top {','line-height:53px !important;','}','.kampyle_feedback-button.kampyle_top-right{','top:0;right:0;','}','.kampyle_feedback-button.kampyle_top-left .kampyle_triangle, .kampyle_feedback-button.kampyle_top-right .kampyle_triangle {','top:0;border-top:81px solid;','}','.kampyle_feedback-button.kampyle_bottom-left .kampyle_triangle, .kampyle_feedback-button.kampyle_bottom-right .kampyle_triangle {','bottom:0;border-bottom:81px solid;','}','.kampyle_feedback-button.kampyle_bottom-right .kampyle_triangle, .kampyle_feedback-button.kampyle_top-right .kampyle_triangle {','right:0;border-left:81px solid transparent;','}','.kampyle_feedback-button.kampyle_bottom-left .kampyle_triangle, .kampyle_feedback-button.kampyle_top-left .kampyle_triangle {','left:0;border-right:81px solid transparent;','}','#nebula_div_btn .kampyle_triangle {','border-bottom-color: '+buttonData.backgroundColor+';','border-top-color: '+buttonData.backgroundColor+';','}','.kampyle_feedback-button.kampyle_top-right .kampyle_button-text, .kampyle_feedback-button.kampyle_bottom-left .kampyle_button-text {','-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);','}','.kampyle_feedback-button.kampyle_top-left .kampyle_button-text, .kampyle_feedback-button.kampyle_bottom-right .kampyle_button-text {','-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg);','}','.kampyle_feedback-button.kampyle_top-left {','top:0;left:0;','}','.kampyle_feedback-button.kampyle_bottom-right {','bottom:0;right:0;','}','.kampyle_feedback-button.kampyle_bottom-left {','bottom:0;left:0;','}','.kampyle_feedback-button.kampyle_bottom-left, .kampyle_feedback-button.kampyle_bottom-right, .kampyle_feedback-button.kampyle_top-left, .kampyle_feedback-button.kampyle_top-right {','padding: 0 !important;','}'].join(' ');return triangularStyle;}
function formatVerticalStyle(formData){var buttonData=formData.buttonData||{};var textScaling='';if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.RTL)&&MDIGITAL.LOCALIZATION.isFormLanguageRtl(formData)){textScaling='transform: scale(-1);-ms-transform: scale(-1);-webkit-transform: scale(-1)';}
var verticalStyle=['button#nebula_div_btn { height: auto !important }','.kampyle_vertical_button {','background-color:transparent !important;font-family:"Open Sans",sans-serif;cursor:pointer;position:fixed;top:45%;z-index:99999990;height:35px !important;min-height: 35px !important;max-height: 35px !important;width:125px !important;max-width: 125px !important;min-width: 125px !important;-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)','}','.kampyle_vertical_button .kampyle_button {','height:35px;min-height: 35px !important;max-height: 35px !important;width:125px !important;min-width: 125px !important;max-width: 125px !important; background:{{BUTTON_BACKGROUND_COLOR}};color:{{BUTTON_TEXT_COLOR}};position:absolute;top:0;left:0;z-index:-1;','}','.kampyle_vertical_button .kampyle_button-text {','color:{{BUTTON_TEXT_COLOR}};font-size:14px;line-height:35px;text-align:center;font-weight:normal !important;'+textScaling,'}','.kampyle_vertical_button.kampyle_left .kampyle_button {','-webkit-border-radius:3px 3px 0 0;-moz-border-radius:3px 3px 0 0;-ms-border-radius:3px 3px 0 0;border-radius:3px 3px 0 0;','}','.kampyle_vertical_button.kampyle_right {','right:-45px;','}','.kampyle_vertical_button.kampyle_left {','left:-45px','}','.kampyle_vertical_button.kampyle_right .kampyle_button {','-webkit-border-radius:0 0 3px 3px;-moz-border-radius:0 0 3px 3px;-ms-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px','}','.kampyle_vertical_button.kampyle_right, .kampyle_vertical_button.kampyle_left  {','padding: 0 !important;','}',].join(' ');verticalStyle=verticalStyle.replace(/{{BUTTON_TEXT_COLOR}}/g,buttonData.textColor);verticalStyle=verticalStyle.replace(/{{BUTTON_BACKGROUND_COLOR}}/g,buttonData.backgroundColor);if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)){verticalStyle+=['.kampyle_vertical_button:hover .kampyle_button-text {','color:'+buttonData.textHoverColor+';','}','.kampyle_vertical_button:hover .kampyle_button {','background-color:'+buttonData.backgroundHoverColor+';','}',].join(' ');}
return verticalStyle;}
function createButton(eventName,data){var btnHtml='';data=data||{};var formData=KAMPYLE_DATA.getFormData(data.formId)||{};var buttonType=KAMPYLE_UTILS.getNestedPropertyValue(formData,'buttonData.type')||'';if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){switch(buttonType.toLowerCase()){case'vertical':case'triangular':btnHtml=displayGenericFormBtn(formData);break;case'custom':btnHtml=displayImageFormBtn(formData);break;default:KAMPYLE_UTILS.showWarning('Invalid button type - '+buttonType);return false;}
var spanContainer=document.getElementById('kampyleButtonContainer');if(spanContainer===null){spanContainer=document.createElement('span');spanContainer.innerHTML=btnHtml;spanContainer.id='kampyleButtonContainer';document.body.appendChild(spanContainer);}
else{spanContainer.innerHTML=btnHtml;}}
if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)){var button=document.getElementById(KAMPYLE_CONSTANT.VIEW.FEEDBACK_BUTTON_ID);KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.FEEDBACK_BUTTON_POSITION_STYLE,pickElementStyleProperties(button,['position','top','right']));}
KAMPYLE_EVENT_DISPATCHER.trigger('neb_button_displayed',{formId:data.formId,position:KAMPYLE_UTILS.getNestedPropertyValue(formData,'buttonData.position')||'',formClosed:KAMPYLE_UTILS.getNestedPropertyValue(data,'formClosed')||false});spanContainer.onclic};var isDesktop=KAMPYLE_DATA.getMemoryData('kampyleDevice')===KAMPYLE_CONSTANT.DEVICES.DESKTOP;if(isDesktop){this.boundHandleLoadFormEvent=handleLoadFormEvent.bind(this,data,spanContainer);KAMPYLE_UTILS.setEventHandler(spanContainer,'mouseover',this.boundHandleLoadFormEvent);var buttonProximityFunc=function(event){var formState=KAMPYLE_DATA.getFormState(data.formId);if(!formState||formState.loading||formState.loaded||KAMPYLE_DATA.getMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED)){return false;}
var isNear=KAMPYLE_UTILS.isNear('nebula_div_btn',100,event);if(isNear){KAMPYLE_EVENT_DISPATCHER.trigger('neb_load_form_preload_proximity',{formId:data.formId});KAMPYLE_EVENT_DISPATCHER.trigger('neb_loadForm',{formId:data.formId});KAMPYLE_DATA.setMemoryData(KAMPYLE_CONSTANT.MEMORY_DATA_FIELDS.IS_BUTTON_CONTAINER_CREATED,true);}};KAMPYLE_UTILS.setEventHandler(window,'mousemove',buttonProximityFunc);}
spanContainer.onkeyu};spanContainer.onkeypres};}
function createFormContainer(){if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){var formSpanPlacer=Object.assign(document.createElement('span'),{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.WRAPPER_ID});var html='';html+='<div id="kampyleFormContainer" style="top:0 !important;left:0 !important;width: 100% !important;height: 100% !important;position: fixed !important;visibility:hidden !important;display:table !important;background-color: rgba(102,102,102,0.4) !important;z-index:99999999 !important;-webkit-overflow-scrolling: touch !important; ">';html+=' <div id="innerContainer">';html+='   <div id="kampyleFormModal" style="z-index:99999999 !important; -webkit-overflow-scrolling: touch !important;"></div>';html+=' </div>';html+='</div>';formSpanPlacer.innerHTML=html;var spinnerContainer=MDIGITAL_ELEMENT_BUILDER.createSpinnerElement();formSpanPlacer.querySelector('#innerContainer').appendChild(spinnerContainer);KAMPYLE_UTILS.setSpinnerStyle(spinnerContainer,KAMPYLE_CONSTANT.SPINNER_SETTINGS.SIZE.LARGE);document.body.appendChild(formSpanPlacer);}}
function createInviteIframe(eventName,eventData){var data=KAMPYLE_DATA.getFormData(eventData.formId);var inviteSpanPlacer=Object.assign(document.createElement('span'),{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.WRAPPER_ID});if(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.CSP_RULES)){var inviteContainerStyles='top:0 !important;left:0 !important;width: 100% !important;';inviteContainerStyles+='height: 100% !important;position: fixed !important;visibility:hidden !important;';inviteContainerStyles+='display:none !important;background-color: rgba(22,22,22,0.5) !important;';inviteContainerStyles+='z-index:99999999 !important;overflow:auto !important';inviteSpanPlacer.innerHTML='<div id="kampyleInviteContainer" style="'+inviteContainerStyles+'">'+'<div id="kampyleInviteModal" style="overflow: hidden;margin: 0 auto;height:'+data.inviteData.inviteHeight+';width:'+data.inviteData.inviteWidth+';position:relative;z-index:99999999;top: 25%;-webkit-box-shadow:0 0 10px rgba(0,0,0,0.4);-moz-box-shadow:0 0 10px rgba(0,0,0,0.4); box-shadow:0 0 10px rgba(0,0,0,0.4);"></div></div>';var spinnerContainer=MDIGITAL_ELEMENT_BUILDER.createSpinnerElement();inviteSpanPlacer.querySelector('#kampyleInviteContainer').appendChild(spinnerContainer);KAMPYLE_UTILS.setSpinnerStyle(spinnerContainer,KAMPYLE_CONSTANT.SPINNER_SETTINGS.SIZE.LARGE);document.body.appendChild(inviteSpanPlacer);}
var inviteIframe=document.createElement('iframe');inviteIframe.id=KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.IFRAME_ID;inviteIframe.title=KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.IFRAME_TITLE;inviteIframe.tabIndex=-1;var inviteHeight=data.inviteData.inviteHeight;var inviteWidth=data.inviteData.inviteWidth;var kampyleDevice=KAMPYLE_DATA.getMemoryData('kampyleDevice');if(kampyleDevice===KAMPYLE_CONSTANT.DEVICES.MOBILE||kampyleDevice===KAMPYLE_CONSTANT.DEVICES.TABLET){inviteHeight='100%';inviteWidth='100%';var inviteModal=document.getElementById('kampyleInviteModal');if(!!inviteModal)
{KAMPYLE_UTILS.setElementStyle(inviteModal,{height:'100%',width:'100%',},true);}}
KAMPYLE_UTILS.setElementStyle(inviteIframe,{height:inviteHeight,width:inviteWidth,display:'none',border:'0',},true);var iframeSrc=data.inviteData.inviteUrl+'?formId='+eventData.formId;if(KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)){iframeSrc+='&isWCAG=true';}
iframeSrc+='&domainsListRelativePath='+KAMPYLE_COMMON.getDomainsListRelativePath(iframeSrc);inviteIframe.src=iframeSrc;document.getElementById('kampyleInviteModal').appendChild(inviteIframe);if(KAMPYLE_DATA.isNewMobileInvitation()){var spinner=document.getElementsByClassName('neb-loading-spinner')[0];KAMPYLE_UTILS.setElementStyle(spinner,{display:'none',},true);KAMPYLE_UTILS.setElementStyle(inviteSpanPlacer,{'z-index':99999998,},true);var inviteContainer=document.getElementById('kampyleInviteContainer');if(inviteContainer){KAMPYLE_UTILS.setElementStyle(inviteContainer,{'z-index':99999998,},true);}}
setTimeou},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS);}
function hideButton(eventName,data){if(!data||KAMPYLE_DATA.isEmbeddedDisplayType(data.formId)){return;}
if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)){KAMPYLE_VIEW.hideFeedbackButtonVisually();}
else{KAMPYLE_VIEW.removeButton(eventName,data);}}
function removeAllShownElements(eventName,data){var lightboxWrapper=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.WRAPPER_ID);var invitationWrapper=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.WRAPPER_ID);var animationWrapper=document.getElementById(KAMPYLE_CONSTANT.IFRAME_SETTINGS.ANIMATION.WRAPPER_ID);var abandon=document.getElementById("kampyle_abandon_zone");KAMPYLE_VIEW.removeButton(eventName,data);if(lightboxWrapper){KAMPYLE_UTILS.removeAllContent(lightboxWrapper);}
if(invitationWrapper){KAMPYLE_UTILS.removeAllContent(invitationWrapper);}
if(animationWrapper){KAMPYLE_UTILS.removeAllContent(animationWrapper);}
if(abandon){KAMPYLE_UTILS.removeAllContent(abandon);}}
function getButtonText(formData){if(typeof MDIGITAL.LOCALIZATION!=='undefined'&&KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)){return MDIGITAL.LOCALIZATION.getLocalizedButtonText(formData);}
else{return formData.buttonData.text;}}
return{setIframeOrigin:setIframeOrigin,ignoreShowForm:ignoreShowForm,scrollToEmbeddedForm:scrollToEmbeddedForm,scrollFromTop:scrollFromTop,doScrollY:doScrollY,removeAllShownElements:removeAllShownElements,handleLightBoxIframe:handleLightBoxIframe,createFormIframe:createFormIframe,createFormContainer:createFormContainer,showForm:showForm,hideForm:hideForm,showButton:showButton,createButton:createButton,hideInvite:hideInvite,hideButton:hideButton,hideFeedbackButtonVisually:hideFeedbackButtonVisually,showFeedbackButtonVisually:showFeedbackButtonVisually,removeButton:removeButton,handleInvitationSkippedForms:handleInvitationSkippedForms,updateIframeStyle:updateIframeStyle,formatTriangularStyle:formatTriangularStyle,formatVerticalStyle:formatVerticalStyle,prepareHostingDOM:prepareHostingDOM,restoreHostingDOM:restoreHostingDOM,getInvitePosition:getInvitePosition,newMobileInvite:newMobileInvite,changeInviteHeight:changeInviteHeight,iFrameHeightChangedHandler:iFrameHeightChangedHandler,manipulateAriaHiddens:manipulateAriaHiddens,restoreAriaHidden:restoreAriaHidden,getDefaultIframeHeight:getDefaultIframeHeight,shouldAddScroll:shouldAddScroll,shouldShowErrMsgOnForm:shouldShowErrMsgOnForm,onErrModalClose:onErrModalClose,handleLoadFormEvent:handleLoadFormEvent,handleCloseButtonInErroModalKeydown:handleCloseButtonInErroModalKeydown,onErrorModalKeyPressed:onErrorModalKeyPressed,pickElementStyleProperties:pickElementStyleProperties,resetFormState:resetFormState,init:init,setMetaViewport:setMetaViewport,setZIndex:setZIndex,showVisibility:showVisibility,getCornerMargin:getCornerMargin,showFormCouldNotFechtedErrorMsg:showFormCouldNotFechtedErrorMsg,handleInviteReady:handleInviteReady,getButtonText:getButtonText,showInvite:showInvite,getWCAGClass:getWCAGClass,getClassDirectonByPosition:getClassDirectonByPosition,updateInviteIframeTitle:updateInviteIframeTitle};})(window,document);window.KAMPYLE_MESSAGE})();window.KAMPYLE_UTILS={TOP_LEVEL_DOMAIN_COOKIE_PREFIX:'Tld-',startsWit},isIos:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;},isSafar},isiPhon},isiPadOS13:function(){return KAMPYLE_UTILS.isSafari()&&!KAMPYLE_UTILS.isiPhone()&&window.DeviceOrientationEvent!==undefined;},isDeskto},triggerCustomEven},isDebugMode:function(){var region=KAMPYLE_DATA.getMemoryData('region');return(region===KAMPYLE_CONSTANT.REGIONS.DEV||region===KAMPYLE_CONSTANT.REGIONS.QA);},showErrorStac},showWarnin},addStyl},addAttributesOnElemen},removeAttribut},getViewportSiz},getDocumentSiz},getElementSiz},getCurrentTimestam},getTimeDif},setEventHandle},subscribeToCustomEven},removeEventHandle},setElementStyl},setAnimationRul},isNea},offse},createIfram},getUrlPara},htmlDecod},escapeRegExp:function(str){return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,'\\$1');},replaceAl},sendMessageToIfram},getBrowse},initEventSubscription},getRandomTimeM},kampyleGetUserI},kampyleCreateUUI},removeAllConten},safeToLowe},getCookieFlagByProtoco},buildQueryParam},kampyleSetCooki},isSecureProtoco},getCooki},getDomainFromHos},isHostMatchesSubdomai},kampyleGetCooki},getByteSiz},getAllKampyleDat},kampyleDeleteCooki},kampyleIsCookieEnable},kampyleCompareTimestamp},kampyleCompareByOperato},setNestedPropertyValu},getNestedPropertyValu},validateKampyleDomai},camelToDas},objectPropertyObserve},showInvite:function(){var inviteIframe=document.getElementById('kampyleInvite');KAMPYLE_UTILS.setElementStyle(inviteIframe,{visibility:'visible'},true);},hideInvit},getNumericValu},extractAllObjectNonFunctionsPropertie},httpReques},loweriz},tri},getDeviceTypeByUserAgen},getElementStyl},isTruth},safeJsonPars},addWcagStyleOnFocu},addHoverEffectOnElemen},handleAfterFormPositio},scrollToLastPositio},setCurrentScrollPositio},getScrollPositio},getLangCodeFromNavAP},getStrigifiedDat},appendScrip},toBase6},styleObjToInlin},getBaseUr},generateUUI},getRetryTimeou},isTru},isValueNumericAndDefine},focusElemen},fakePromis},textEncod},toHe},sha51},isModalFormTyp},isFormInPreviewContext:function(formId){var formState=KAMPYLE_DATA.getFormState(formId);return formState!=null&&formState.triggerType=="Preview"},setSpinnerStyle:function(spinnerContainerElement,spinnerSize,iframe){if(!(spinnerContainerElement||spinnerSize))return;var spinerSizes={small:{widthHeight:'15px',border:'3px'},large:{widthHeight:'40px',border:'4px'},}
var spinner=spinnerContainerElement.querySelector('#'+KAMPYLE_CONSTANT.SPINNER_SETTINGS.ID);var spinnerContainerStyle={'display':'block','height':'100%','z-index':'2147483647'}
if(spinnerSize===KAMPYLE_CONSTANT.SPINNER_SETTINGS.SIZE.LARGE){spinnerContainerStyle.position='absolute';spinnerContainerStyle.width='100%';spinnerContainerStyle.top=0;}
KAMPYLE_UTILS.setElementStyle(spinner,{'border':spinerSizes[spinnerSize]['border']+' solid #f3f3f3','border-radius':'50%','width':spinerSizes[spinnerSize]['widthHeight'],'height':spinerSizes[spinnerSize]['widthHeight'],'border-top':spinerSizes[spinnerSize]['border']+' solid #4050C6','margin-top':'5px','margin-right':'5px','top':'calc(50% - '+spinerSizes[spinnerSize]['widthHeight']+')','left':'calc(50% - '+spinerSizes[spinnerSize]['widthHeight']+')','position':'relative','animation':KAMPYLE_CONSTANT.CSS_SETTINGS.ANIMATION_RULE_SPIN_NAME+' 1s linear infinite'},true);KAMPYLE_UTILS.setElementStyle(spinnerContainerElement,spinnerContainerStyle,true);KAMPYLE_UTILS.setAnimationRule(KAMPYLE_CONSTANT.CSS_SETTINGS.ANIMATION_RULE_SPIN_NAME,'{0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); }}',iframe);},getParsedUr}};window.KAMPYLE_EVENT_DISPATCHER})(window,document);window.KAMPYLE_GA})(window,document);window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.ON_PREM})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.LOCALIZATION})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.EMBEDDED=(function(window,document}
function createEmbeddedIframe(eventName,data){data=data||{};if(!KAMPYLE_DATA.isEmbeddedDisplayType(data.formId)){return false;}
var hostingElement=getHostingElement(data.formId);if(!isHostingElementValid(hostingElement)){return false;}
if(hostingElement){var hostingElementHeight=parseInt(getComputedStyle(hostingElement).height);addHostingElementHeight(hostingElement.id,hostingElementHeight);}
var timeoutHandler=setTimeou},KAMPYLE_CONSTANT.NETWORK.TIME_FOR_FORM_TO_LOAD_MS);KAMPYLE_DATA.setTimeoutHandler(KAMPYLE_CONSTANT.TIMEOUT_HANDLERS.EMBEDDED_STATUS+"_"+data.formId,timeoutHandler);var formIframe=getOrCreateIframe(data.formId);var formData=KAMPYLE_DATA.getFormData(data.formId);formIframe.src=KAMPYLE_COMMON.createFormUrl(formData.formHtmlUrl,data.formId);hostingElement.appendChild(formIframe);KAMPYLE_DATA.setFormState(data.formId,{shouldBeShown:true});return true;}
return{removeEmbeddedIFrames:removeEmbeddedIFrames,init:init,createEmbeddedIframe:createEmbeddedIframe,showForm:showForm,calculateFormSize:calculateFormSize,deleteEmbeddedIframe:deleteEmbeddedIframe,addHostingElementHeight:addHostingElementHeight,getHostingElementHeight:getHostingElementHeight,handleThankyouPage:handleThankyouPage,setIframeScrolling:setIframeScrolling};})(window,document);window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.FORM_STATE})(window,document);window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL_ELEMENT_BUILDER=(function(){function createFormContainer(){var formSpanPlacer=Object.assign(document.createElement('span'),{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.WRAPPER_ID});var divContainer=Object.assign(document.createElement('div'),{id:'kampyleFormContainer'});var containerStyle={top:0,left:0,width:'100%',height:'100%',position:'fixed',visibility:'hidden',display:'table',backgroundColor:'rgba(102,102,102,0.4)',zIndex:'99999999',webkitOverflowScrolling:'touch'};KAMPYLE_UTILS.setElementStyle(divContainer,containerStyle,true);var divElem1=document.createElement('div');divElem1.id='kampyleFormContainer';var spinnerContainer=createSpinnerElement();var divElem2=document.createElement('div');divElem2.id='kampyleFormModal';KAMPYLE_UTILS.setElementStyle(divElem2,{zIndex:'99999999',webkitOverflowScrolling:'touch'},true);divElem1.appendChild(spinnerContainer);divElem1.appendChild(divElem2);divContainer.appendChild(divElem1);formSpanPlacer.appendChild(divContainer);KAMPYLE_UTILS.setSpinnerStyle(spinnerContainer,KAMPYLE_CONSTANT.SPINNER_SETTINGS.SIZE.LARGE);document.body.appendChild(formSpanPlacer);}
function createInviteIframeContainer(data){var inviteSpanPlacer=Object.assign(document.createElement('span'),{id:KAMPYLE_CONSTANT.IFRAME_SETTINGS.INVITATION.WRAPPER_ID});var divContainer=Object.assign(document.createElement('div'),{id:'kampyleInviteContainer'});KAMPYLE_UTILS.setElementStyle(divContainer,{top:'0',left:'0',width:'100%',height:'100%',position:'fixed',visibility:'hidden',display:'none',backgroundColor:'rgba(22,22,22,0.5)',zIndex:'99999999',overflow:'auto'},true);var spinnerContainer=createSpinnerElement();var divElem1=document.createElement('div');divElem1.id='kampyleInviteModal';KAMPYLE_UTILS.setElementStyle(divElem1,{overflow:'hidden',margin:'0 auto',height:data.inviteData.inviteHeight,width:data.inviteData.inviteWidth,position:'relative',zIndex:'99999999',top:'25%',webkitBoxShadow:'0 0 10px rgba(0,0,0,0.4)',mozBoxShadow:'0 0 10px rgba(0,0,0,0.4)',boxShadow:'0 0 10px rgba(0,0,0,0.4)',});divContainer.appendChild(divElem1);divContainer.appendChild(spinnerContainer);inviteSpanPlacer.appendChild(divContainer);KAMPYLE_UTILS.setSpinnerStyle(spinnerContainer,KAMPYLE_CONSTANT.SPINNER_SETTINGS.SIZE.LARGE);document.body.appendChild(inviteSpanPlacer);}
function getErrorModal(noJsonModalId,errorModalLang,errorMessageTitle,errorMessageBody,errorMessageClose){var errorModal=document.createElement("div");var errorModalAttributes=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.NEW_MODAL_DIALOGS)?{id:noJsonModalId}:{tabIndex:0,id:noJsonModalId,role:"alertdialog",'aria-modal':true,'aria-labelledby':'title-no-json-modal','aria-describedby':'description-no-json-modal',lang:errorModal}
KAMPYLE_UTILS.addAttributesOnElement(errorModal,errorModalAttributes);KAMPYLE_UTILS.setElementStyle(errorModal,{position:'relative',textAlign:'center',backgroundColor:'rgba(255,255,255, 1)',margin:'5% auto 2% auto',border:'1px solid #cccccc',boxShadow:'8px 10px 58px 2px rgba(64, 64, 74, 0.56)',color:'#2C3548',fontFamily:'helvetica',height:'500px',width:KAMPYLE_DATA.isMobile()?'98%':"450px"});var closeButton=getErrorModalCloseButton(errorMessageClose,errorModalLang);var backgroundImage=getErrorModalBackgroundImage()
var title=getErrorModalTitle(errorMessageTitle);var description=getErrorModalDescription(errorMessageBody);errorModal.appendChild(closeButton);errorModal.appendChild(backgroundImage);errorModal.appendChild(title);errorModal.appendChild(description);return errorModal;}
function getVerticalButton(formData){var buttonText=KAMPYLE_VIEW.getButtonText(formData);var direction='kampyle_'+formData.buttonData.position;var buttonElement=document.createElement('button');KAMPYLE_UTILS.addAttributesOnElement(buttonElement,{id:'nebula_div_btn',alt:buttonText,tabIndex:"0",class:'kampyle_vertical_button '+direction+' '+KAMPYLE_VIEW.getWCAGClass()});KAMPYLE_UTILS.setElementStyle(buttonElement,{backgroundColor:'transparent',height:'auto',minHeight:'35px',maxHeight:'35px',width:'125px',minWidth:'125px',maxWidth:'125px',padding:0},true);KAMPYLE_UTILS.setElementStyle(buttonElement,{fontFamily:'Open Sans, sans-serif',cursor:'pointer',position:'fixed',top:'45%',border:"none",zIndex:'99999990',height:'35px !important','-ms-transform':'rotate(90deg)','-webkit-transform':'rotate(90deg)',transform:'rotate(90deg)'});if(KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)){KAMPYLE_UTILS.addWcagStyleOnFocus(buttonElement);}else{KAMPYLE_UTILS.setElementStyle(buttonElement,{outline:'none'},true);}
buttonElement.style[formData.buttonData.position]='-45px';var divElement=document.createElement('div');divElement.setAttribute('class','kampyle_button');var styleForRadius=formData.buttonData.position==='left'?'3px 3px 0 0':'0 0 3px 3px';KAMPYLE_UTILS.setElementStyle(divElement,{width:'125px',minWidth:'125px',maxWidth:'125px',minHeight:'35px',maxHeight:'35px','-webkit-border-radius':styleForRadius,'-moz-border-radius':styleForRadius,'-ms-border-radius':styleForRadius,'border-radius':styleForRadius},true);KAMPYLE_UTILS.setElementStyle(divElement,{height:'35px',background:formData.buttonData.backgroundColor,color:formData.buttonData.textColor,position:'absolute',top:0,left:0,zIndex:'-1'});var divElement2=document.createElement('div');KAMPYLE_UTILS.addAttributesOnElement(divElement2,{'data-aut':'feedback',class:'kampyle_button-text'});KAMPYLE_UTILS.setElementStyle(divElement2,{fontWeight:'normal'},true);KAMPYLE_UTILS.setElementStyle(divElement2,{color:formData.buttonData.textColor,fontSize:'14px',lineHeight:'35px',textAlign:'center'});if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.RTL)&&MDIGITAL.LOCALIZATION.isFormLanguageRtl(formData)){KAMPYLE_UTILS.setElementStyle(divElement2,{transform:'scale(-1)','-ms-transform':'scale(-1)','-webkit-transform':'scale(-1)'});}
if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.ADDITIONAL_BUTTON_STYLES)){var defaultTextHoverColor="#FFFFFF",defaultBackgroundHoverColor="#396CEF";addHoverStyleToFeedbackButton(buttonElement,{bgElementStyle:{backgroundColor:formData.buttonData.backgroundColor},textElementStyle:{color:formData.buttonData.textColor}},{bgElementStyle:{backgroundColor:formData.buttonData.backgroundHoverColor||defaultBackgroundHoverColor},textElementStyle:{color:formData.buttonData.textHoverColor||defaultTextHoverColor}});}
var textNode=document.createTextNode(buttonText);divElement2.appendChild(textNode);buttonElement.appendChild(divElement);buttonElement.appendChild(divElement2);return buttonElement}
function getPositionEnum(formData){return{topRight:{btnStyle:{top:0,right:0},div1Style:{top:0,right:0,borderTop:'81px solid '+formData.buttonData.backgroundColor,borderLeft:'81px solid transparent'},div2Style:{'-ms-transform':'rotate(45deg)','-webkit-transform':'rotate(45deg)',transform:'rotate(45deg)'}},topLeft:{btnStyle:{top:0,left:0},div1Style:{top:0,left:0,borderTop:'81px solid '+formData.buttonData.backgroundColor,borderRight:'81px solid transparent'},div2Style:{'-ms-transform':'rotate(-45deg)','-webkit-transform':'rotate(-45deg)',transform:'rotate(-45deg)'}},bottomRight:{btnStyle:{bottom:0,right:0},div1Style:{bottom:0,right:0,borderBottom:'81px solid '+formData.buttonData.backgroundColor,borderLeft:'81px solid transparent'},div2Style:{'-ms-transform':'rotate(-45deg)','-webkit-transform':'rotate(-45deg)',transform:'rotate(-45deg)'}},bottomLeft:{btnStyle:{bottom:0,left:0},div1Style:{bottom:0,left:0,borderBottom:'81px solid '+formData.buttonData.backgroundColor,borderRight:'81px solid transparent'},div2Style:{'-ms-transform':'rotate(45deg)','-webkit-transform':'rotate(45deg)',transform:'rotate(45deg)'}}};}
function getTriangularButton(formData){var STYLE_BY_POSITION=getPositionEnum(formData);var buttonElement=document.createElement('button');var buttonText=KAMPYLE_VIEW.getButtonText(formData);var position=formData.buttonData.position||'topLeft';var classDirection=KAMPYLE_VIEW.getClassDirectonByPosition(position);var styleForBtn=STYLE_BY_POSITION[position].btnStyle;var styleForDiv1=STYLE_BY_POSITION[position].div1Style;var styleForDiv2=STYLE_BY_POSITION[position].div2Style;KAMPYLE_UTILS.addAttributesOnElement(buttonElement,{id:'nebula_div_btn',alt:buttonText,tabindex:0,class:'kampyle_feedback-button '+classDirection.leftright+' '+KAMPYLE_VIEW.getWCAGClass(),});KAMPYLE_UTILS.setElementStyle(buttonElement,{backgroundColor:'transparent',height:'auto',padding:0},true);KAMPYLE_UTILS.setElementStyle(buttonElement,Object.assign({fontFamily:'Open Sans, sans-serif',cursor:'pointer',position:'fixed',border:'none',zIndex:'99999990'},styleForBtn));if(KAMPYLE_DATA.isFeatureEnabled(KAMPYLE_CONSTANT.FEATURE_FLAGS.WCAG)){buttonElement.addEventListener("focusin",function(event){KAMPYLE_UTILS.setElementStyle(buttonElement,{outline:'1px dashed #595959',outlineOffset:'2px',transition:'none'},true);});buttonElement.addEventListener("focusout",function(event){buttonElement.style.outline='none';buttonElement.style.outlineOffset=null;buttonElement.style.transition=null;});}else{KAMPYLE_UTILS.setElementStyle(buttonElement,{outline:'none'},true);}
var divElem1=document.createElement('div');divElem1.setAttribute('class','kampyle_triangle');KAMPYLE_UTILS.setElementStyle(divElem1,Object.assign({position:'absolute',width:0,height:0,zIndex:-1},styleForDiv1));var divElem2=document.createElement('div');KAMPYLE_UTILS.addAttributesOnElement(divElem2,{'data-aut':'feedback',class:'kampyle_button-text '+classDirection.topbottom,});KAMPYLE_UTILS.setElementStyle(divElem2,{fontWeight:'normal',lineHeight:(position==='bottomLeft'||position==='bottomRight')?'108px':'53px'},true);KAMPYLE_UTILS.setElementStyle(divElem2,Object.assign({height:'81px',width:'81px',textAlign:'center',zIndex:'1000',color:formData.buttonData.textColor,fontSize:'14px',},styleForDiv2));var textNode=document.createTextNode(buttonText);divElem2.appendChild(textNode);buttonElement.appendChild(divElem1);buttonElement.appendChild(divElem2);return buttonElement;;}
return{createFormContainer:createFormContainer,createInviteIframeContainer:createInviteIframeContainer,getErrorModal:getErrorModal,getVerticalButton:getVerticalButton,getTriangularButton:getTriangularButton,getCustomButton:getCustomButton,addHoverStyleToFeedbackButton:addHoverStyleToFeedbackButton,createSpinnerElement:createSpinnerElement};})(window,document);window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.PROPERTY_MESSAGE}})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.LOGGE;})(window,document);window.COOLADATA_COD}})(window,document);window.KAMPYLE_COOLADATA=(function(window,document){var COOLADATA_CONFIGURATION={API_GATEWAY_ENDPOINT:'uwbhzazjt4.execute-api.eu-west-1.amazonaws.com/Production',COOLADATA_APP_KEY:{PROD:'qceuv8449dzg58ptt1bhda9g8ue19c7s',QA:'lf5shxz66ckwmizs7kowapgs2rkoejcl'}};var rateLimitCounterMap={};function kmaUDCSubmit(data){return KAMPYLE_UTILS.httpRequest(KAMPYLE_CONSTANT.HTTP_METHODS.GET,KAMPYLE_CONSTANT.URLS.KMA_UDC+encodeURI(data));}
var COMMON_FIELDS;var COOLADATA_SRC_PREFIX=KAMPYLE_CONSTANT.PLACEHOLDERS.COOLADATA_SRC_PREFIX;COOLADATA_SRC_PREFIX=MDIGITAL.ON_PREM.getPackageRoot()+"/";var COOLADATA_SRC=COOLADATA_SRC_PREFIX+KAMPYLE_CONSTANT.SRC.COOLADATA;var cooladataEvents={neb_pageView:{eventId:'nebula_page_view',},neb_inviteAccepted:{eventId:'nebula_invite_accepted',},neb_inviteDeclined:{eventId:'nebula_invite_declined',},neb_showInvitation:{eventId:'nebula_invitation_show',memoryDataKey:'invitationTriggeringData',},neb_feedbackSubmitted:{eventId:'nebula_form_submitted',},neb_formShown:{eventId:'nebula_form_show',},neb_buttonClicked:{eventId:'nebula_button_clicked',},neb_sdkShowForm:{eventId:'nebula_code_trigger_form',},neb_routeToForm:{eventId:'nebula_route_to_form',},neb_formClosed:{eventId:'nebula_form_closed',},neb_popupBlocked:{eventId:'nebula_popup_blocked',},neb_skipInvitation:{eventId:'nebula_invitation_skipped',},neb_formPageShown:{eventId:'nebula_form_page_displayed',},neb_captureInit:{eventId:'nebula_capture_init',},neb_captureImageClicked:{eventId:'nebula_capture_image_clicked',},MDigital_Capture_Cancelled:{eventId:'nebula_cancel_capture_clicked',},neb_load_form_preload_proximity:{eventId:'nebula_load_form_preload_proximity',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_cancel_capture_clicked:{eventId:'nebula_cancel_capture_clicked',},neb_load_form_form_reload:{eventId:'nebula_load_form_form_reload',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_button_displayed:{eventId:'nebula_button_displayed',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_invitation_loaded:{eventId:'nebula_invitation_loaded',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_invitation_ready:{eventId:'nebula_invitation_ready',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_form_loaded:{eventId:'nebula_form_loaded',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_formReady:{eventId:'nebula_form_ready',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents,},neb_sdkSurveyDisplayed:{eventId:'nebula_code_survey_displayed',},neb_afterHttpGetRequestOnError:{eventId:'nebula_after_http_get_request_on_error',eventDataKey:'httpRequestData',},neb_afterHttpGetRequestOnErrorStatusCode:{eventId:'nebula_after_http_get_request_on_error_status_code',eventDataKey:'httpRequestData',},neb_afterHttpGetRequestOnTimeout:{eventId:'nebula_after_http_get_request_on_timeout',eventDataKey:'httpRequestData',},neb_afterHttpGetRequest:{eventId:'nebula_after_http_get_request',eventDataKey:'httpRequestData',},MDigital_updatingSbtServer:{eventId:'MDigital_updating_sbt_server',eventDataKey:'dataObjForSbt',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},MDigital_settingIdentifierValueOnMemory:{eventId:'MDigital_setting_identifier_value_on_memory',eventDataKey:'hasIdentifierValue',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},MDigital_shouldNotSyncIdentifier:{eventId:'MDigital_should_not_sync_identifier',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_beforeHttpPostRequest:{eventId:'nebula_before_http_post_request',eventDataKey:'httpRequestData',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_afterHttpPostRequestOnError:{eventId:'nebula_after_http_post_request_on_error',eventDataKey:'httpRequestData',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_afterHttpPostRequest:{eventId:'nebula_after_http_post_request',eventDataKey:'httpRequestData',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_afterHttpPostRequestOnErrorStatusCode:{eventId:'nebula_after_http_post_request_on_error_status_code',eventDataKey:'httpRequestData',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_afterHttpPostRequestOnTimeout:{eventId:'nebula_after_http_post_request_on_timeout',eventDataKey:'httpRequestData',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},MDigital_updateTargetingWithDeclinedDateInviteDeclined:{eventId:'MDigital_update_targeting_with_declined_date_invite_declined',eventDataKey:'declinedDate',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},MDigital_updateTargetingWithSubmittedDate:{eventId:'MDigital_update_targeting_with_submitted_date',eventDataKey:'submittedDate',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},MDigital_updateTargetingWithDeclinedDateFormClosed:{eventId:'MDigital_update_targeting_with_declined_date_form_closed',eventDataKey:'declinedDate',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_initUserIdentifier:{eventId:'nebula_init_user_identifier',eventDataKey:'hasIdentifierValue',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_initUserIdentifierOnExtraData:{eventId:'nebula_init_user_identifier_on_extra_data',eventDataKey:'hasIdentifierValue',provision:KAMPYLE_CONSTANT.PROVISIONS.UBT_EXTRA_EVENTS,},neb_eventDispatcherError:{eventId:'nebula_eventDispatcherError',eventDataKeys:['errorMessage','errorStack','additionalInfo']},neb_feedbackUUIDisNull:{eventId:'nebula_feedbackUuidIsNull'},neb_submitFeedbackFailed:{eventId:'nebula_submitFeedbackFailed',eventDataKeys:['uuid','errorMessage','errorStack']},MDigital_Form_Next_Page:{eventId:'MDigital_Form_Next_Page',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_Form_Back_Page:{eventId:'MDigital_Form_Back_Page',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_Form_Close_No_Submit:{eventId:'MDigital_Form_Close_No_Submit',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_ThankYou_Displayed:{eventId:'MDigital_ThankYou_Displayed',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_ThankYou_Close:{eventId:'MDigital_ThankYou_Close',provision:KAMPYLE_CONSTANT.PROVISIONS.cooladataNewEvents},MDigital_warning:{eventId:'MDigital_warning',eventDataKey:'message'},MDigital_couldNotFetchData:{eventId:'MDigital_couldNotFetchData',eventDataKey:'errorData'},MDigital_couldNotLoadFormApplication:{eventId:'MDigital_couldNotLoadFormApplication',eventDataKey:'errorData'},MDigital_Invalid_Origin:{eventId:'MDigital_Invalid_Origin'},MDigital_DynamicOnsiteInitializedSuccessfully:{eventId:KAMPYLE_CONSTANT.EVENTS.MDIGITAL_DYNAMIC_ONSITE_INITIALIZED_SUCCESSFULLY,provision:KAMPYLE_CONSTANT.PROVISIONS.DYNAMIC_ONSITE_EVENTS,},MDigital_noJsonModalShown:{eventId:'mdigital_noDataMessageDisplayed',eventDataKey:'additionalInfo'},screenCaptureRetake:{eventId:KAMPYLE_CONSTANT.EVENTS.SCREEN_CAPTURE_RETAKE},screenCaptureDelete:{eventId:KAMPYLE_CONSTANT.EVENTS.SCREEN_CAPTURE_DELETE},};function initRateLimiting(){Object.keys(cooladataEvents).forEa}});}
function getDataToSend(dataFormatted){var feedbackUUID=KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?dataFormatted.feedbackUUID:dataFormatted.feedbackCorrelationUUID;var dataToSend={enviroment:dataFormatted.enviroment,accountId:dataFormatted.accountId,url:dataFormatted.pageURL,websiteId:dataFormatted.websiteId,feedback_uuid:feedbackUUID,formId:dataFormatted.formId||null,formTriggerType:KAMPYLE_DATA.getFormTriggerType(dataFormatted.formId),kampyle_data:dataFormatted.kampyle_data||null,cookie_size:dataFormatted.cookie_size||null,kampyle_version:dataFormatted.kampyle_version||'',onsite_version:window.MDIGITAL.version||'0.0.0.0',history_length:window.history.length,event_local_timestamp:KAMPYLE_UTILS.getCurrentTimestamp(),position:dataFormatted.position||null,isUserIdentified:!!KAMPYLE_DATA.getMemoryData('identifierValue'),feedback_correlation_uuid:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?dataFormatted.feedbackCorrelationUUID:null,};if(dataFormatted.eventId==='nebula_form_page_shown'){dataToSend.pageNumber=dataFormatted.pageNumber;}
if(dataFormatted.eventId==='nebula_route_to_form'){dataToSend.destinationForm=dataFormatted.formId;}
if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&dataFormatted.formId){dataToSend.Web_form_lang=MDIGITAL.LOCALIZATION.getFormLanguage(dataFormatted.formId)||null;}
dataToSend.packageVersion=MDIGITAL.ON_PREM.getPackageVersion();addEventDataKeys(dataFormatted,dataToSend)
return dataToSend;}
var triggerCooladataEve;}
function isEventProvisioned(eventObj){return!eventObj.provision||!!KAMPYLE_FUNC.checkProvision(eventObj.provision)]}
function init(){try{COMMON_FIELDS={userid:KAMPYLE_UTILS.kampyleGetUserId(),};var config={cookie_expiration:KAMPYLE_DATA.getCookieExpiration(),app_key:KAMPYLE_UTILS.isDebugMode()?COOLADATA_CONFIGURATION.COOLADATA_APP_KEY.QA:COOLADATA_CONFIGURATION.COOLADATA_APP_KEY.PROD,track_pageload:false,img_src_get_request:true,api_host:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.API_GATEWAY)?COOLADATA_CONFIGURATION.API_GATEWAY_ENDPOINT:getCooladataApiHost(),};try{COOLADATA_CODE.init();window.cooladata.init(config,null,KAMPYLE_CONSTANT.COOLADATA_INSTANCE_NAME);if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.COOLADATA_EVNETS_LIMIT)){initRateLimiting();KAMPYLE_EVENT_DISPATCHER.subscribeOnce(KAMPYLE_CONSTANT.EVENTS.MDIGITAL_SDK_PAGE_VIEW,initRateLimiting);}}catch(e){console.warn(e);}
KAMPYLE_UTILS.initEventSubscriptions(cooladataEvents,triggerCooladataEvent);return true;}catch(e){console.warn(e);;}
return{getDataToSend:getDataToSend,kampyleSendCoolaData:kampyleSendCoolaData,formatData:formatData,appendDataByEventName:appendDataByEventName,addEventDataKeys:addEventDataKeys,rateLimitCounterMap:rateLimitCounterMap,isEventProvisioned:isEventProvisioned,isEventDefinedAsRateLimited:isEventDefinedAsRateLimited,getEventCallsCounter:getEventCallsCounter,isRateLimitExceeded:isRateLimitExceeded,increaseEventCallsCounter:increaseEventCallsCounter,initRateLimiting:initRateLimiting,init:init,triggerCooladataEvent:triggerCooladataEvent,getCooladataInstance:getCooladataInstance,getUserId:getUserId,triggerCooladataEventDispatcherError:triggerCooladataEventDispatcherError,};})(window,document);window.KAMPYLE_COMMON=(function(window,document){function loadForm(formId){return KAMPYLE_ONSITE_SDK.loadForm(formId);}
function getDomainsListRelativePath(url){var configurationPath='/resources/config';if(KAMPYLE_DATA.getMemoryData('context')==='preview'){return configurationPath;}
var genericParsedUrl=KAMPYLE_UTILS.getParsedUrl(KAMPYLE_EMBED.getGenericLocation());var formParsedUrl=KAMPYLE_UTILS.getParsedUrl(url);if(genericParsedUrl.hostname!==formParsedUrl.hostname){return configurationPath;}else{var genericFilePathname=genericParsedUrl.pathname;var formPathname=formParsedUrl.pathname;if(genericFilePathname&&formPathname){var genericPathnameParts=genericFilePathname.split('/').slice(1,-1);var formPathnameParts=formPathname.split('/').slice(1,-1);return getRelativePathByFoldersNum(formPathnameParts.length)+genericPathnameParts.join('/');}
return'';;}
return{loadForm:loadForm,showForm:showForm,closeForm:closeForm,createFormUrl:createFormUrl,getSpinnerTemplate:getSpinnerTemplate,getUrlPrefix:getUrlPrefix,getFormFailureCause:getFormFailureCause,getDomainsListRelativePath:getDomainsListRelativePath};})(window,document);window.KAMPYLE_THERMO_TEALEAF_FUN;})();window.KAMPYLE_ADOBE_ANALYTIC;})(window,document);window.KAMPYLE_SCREEN_CAPTURE=(function(window,document){var ONPREM_WIDGET_VERSION='ONPREM';var V4_WIDGET_VERSION='V4';var V2_WIDGET_VERSION='V2';var ON_LOAD_ONPREM_AND_V4_CALLBACK_NAME='onUsersnapLoad';var ON_LOAD_V2_CALLBACK_NAME='_usersnapconfig';var SCROLLABLE_OVERFLOW='scroll';var formData,userSnapInstance=false;var screenCaptureTooltipStyles='[data-tips]{position:relative;text-decoration:none}[data-tips]:after,[data-tips]:before{position:absolute;z-index:100;opacity:0}[data-tips]:after{content:attr(data-tips);line-height:20px;padding:0 10px;font-size:12px;text-align:center;color:#fff;background:#222;border-radius:5px;text-shadow:0 0 5px #000;-moz-box-shadow:0 0 5px rgba(0, 0, 0, .3);-webkit-box-shadow:0 0 5px rgba(0, 0, 0, .3);box-shadow:0 0 5px rgba(0, 0, 0, .3);white-space:normal;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:135px;word-wrap:break-word}[data-tips]:before{content:"";width:0;height:0;border-width:6px;border-style:solid}[data-tips]:hover:after,[data-tips]:hover:before{opacity:1}[data-tips].top-tip:after,[data-tips].top-tip:before{-webkit-transition:bottom .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:bottom .25s ease-in-out, opacity .25s ease-in-out;transition:bottom .25s ease-in-out, opacity .25s ease-in-out;bottom:90%;left:-9999px;margin-bottom:12px}[data-tips].top-tip:before{border-color:#222 transparent transparent;margin-bottom:0}[data-tips].top-tip:hover:after,[data-tips].top-tip:hover:before{bottom:100%;left:0}[data-tips].top-tip:hover:before{left:15px}[data-tips].bottom-tip:after,[data-tips].bottom-tip:before{-webkit-transition:top .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:top .25s ease-in-out, opacity .25s ease-in-out;transition:top .25s ease-in-out, opacity .25s ease-in-out;top:90%;left:-9999px;margin-top:12px}[data-tips].bottom-tip:before{border-color:transparent transparent #222;margin-top:0}[data-tips].bottom-tip:hover:after,[data-tips].bottom-tip:hover:before{top:100%;left:0}[data-tips].bottom-tip:hover:before{left:15px}[data-tips].left-tip:after,[data-tips].left-tip:before{-webkit-transition:left .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:left .25s ease-in-out, opacity .25s ease-in-out;transition:left .25s ease-in-out, opacity .25s ease-in-out;top:-9999px;left:96%;margin-left:12px}[data-tips].left-tip:before{border-color:transparent #222 transparent transparent;margin-left:0}[data-tips].left-tip:hover:after,[data-tips].left-tip:hover:before{left:100%;top:0}[data-tips].left-tip:hover:before{top:7px}[data-tips].right-tip:after,[data-tips].right-tip:before{-webkit-transition:right .25s ease-in-out, opacity .25s ease-in-out;-moz-transition:right .25s ease-in-out, opacity .25s ease-in-out;transition:right .25s ease-in-out, opacity .25s ease-in-out;top:-9999px;right:96%;margin-right:12px}[data-tips].right-tip:before{border-color:transparent transparent transparent #222;margin-right:0}[data-tips].right-tip:hover:after,[data-tips].right-tip:hover:before{right:100%;top:0}[data-tips].right-tip:hover:before{top:7px}';var screenCaptureButtonsOutlineStyle=".scTitle:focus, .scParagraph:focus, .sc-widget-footer-cancel:focus, .sc-widget-footer-capture:focus, p:focus { border: 2px solid #8e8e93 !important; box-shadow: 0 0 7px #8e8e93 !important;}";var SCREEN_CAPTURE_DEFAULT_TEXTS={submitScreenCaptureLabel:"Capture Image",cancelScreenCaptureLabel:"Cancel",instructionsScreenCapture:'<h2 class="scTitle" style="font-size: 1.5em;">Screen Capture</h2><p class="scParagraph" style="font-size: 1em; margin-top: 10px;">Drag the cursor around the area you want to highlight.<br>Press Capture Image to take the snapshot and return to your feedback</p>',submitScreenCaptureTooltip:"Take snapshot",cancelScreenCaptureTooltip:"Back to Feedback",};var spinnerTemplate=KAMPYLE_COMMON.getSpinnerTemplate();var screenCaptureWidgetTemplate=["<html>","<head>",'<link rel="stylesheet" type="text/css" href="'+
KAMPYLE_CONSTANT.PLACEHOLDERS.URL_PREFIX+
KAMPYLE_CONSTANT.SRC.OPEN_SANS+'" />','<script type="text/javascript">',"function resizeIframe() {",'parent.document.getElementById("nebScIframe").height = document.getElementById("sc-widget").scrollHeight + 15;','var SCWidget = parent.document.getElementById("nebScIframe");',"if (SCWidget) {","SCWidget.focus();","}","}","</script>","<style>{tooltipStyles} {buttonsOutlineStyle}</style>","</head>",'<body onload="resizeIframe();" style="margin:0px;overflow:hidden;">','<div id="sc-widget" class="sc-widget" style="{widget}">','<div class="sc-widget-content" style="{widgetContent}">',"{{instructionsScreenCapture}}","</div>",'<div class="sc-widget-footer" style="{widgetFooter}">','<button onclick="parent.KAMPYLE_SCREEN_CAPTURE.onCancelScreenCaptureClick();" class="sc-widget-footer-cancel top-tip" '+'data-tips="{{cancelScreenCaptureTooltip}}" style="{widgetFooterBtn} {widgetFooterCancel}">',"{{cancelScreenCaptureLabel}}","</button>",'<button onclick="parent.KAMPYLE_SCREEN_CAPTURE.onSubmitScreenCaptureClick();" class="sc-widget-footer-capture top-tip" '+'data-tips="{{submitScreenCaptureTooltip}}" style="{widgetFooterBtn} {widgetFooterCapture}">',spinnerTemplate,'<span id="widgetFooterCaptureText">{{submitScreenCaptureLabel}}</span>',"</button>","</div>","</div>","</body></html>",].join(" ");var defaultStyles={overlay:{position:"fixed",top:"0",left:"0","z-index":"2147483646 !important",right:"0",bottom:"0",display:"block","pointer-events":"none",},widget:{"font-family":"'Open Sans'",border:"1px solid #999",width:"285px","border-radius":"5px",position:"absolute","z-index":"2147483647 !important","pointer-events":"auto",background:"#FFFFFF","text-align":"center","line-height":"20px",},widgetContent:{padding:"10px 14px",outline:"none",},widgetFooter:{"font-family":"'Open Sans' !important",padding:"10px","font-size":"14px","padding-top":"0","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal","letter-spacing":"normal","line-height":"20px",},widgetFooterBtn:{height:"34px",margin:"0 0 2px 5px","min-width":"100px",padding:"6px 12px",display:"inline-block","border-radius":"4px",cursor:"pointer","transition-delay":"0s","transition-duration":"0.3s","transition-property":"all","transition-timing-function":"ease","vertical-align":"middle","white-space":"nowrap","word-spacing":"0px",border:"none",color:"#FFF",},widgetFooterCancel:{background:"#A2A2A2",color:"#FFF",},widgetFooterCapture:{"margin-left":"5px",background:"#020202",color:"#FFF",},};var UserSnapMod}}
var hideSpinn}};var cancelCaptureClick;}
function getConfiguration(){return function(api){api.on('ope}});api.on('opene}});api.on('submit',function(){afterSend()});api.on("clos}})
api.on("domSelector:selecte;});var initParams={serviceUrl:KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)?KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_ONPREM_HOST_PREFIX:KAMPYLE_CONSTANT.PLACEHOLDERS.USERSNAP_V4_HOST_PREFIX,mode:"headless",button:null,tools:{keys:["highlight"],colors:[KAMPYLE_CONSTANT.COLORS.USERSNAP_V4_SELECTION_COLOR],},thankYou:{isHidden:true,},};initParams.tools.keys[0]=getSelectedTool();initParams.tools.colors[0]=KAMPYLE_CONSTANT.COLORS.USERSNAP_ONPREM_SELECTION_COLOR;if(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.USER_SNAP_ONPREM)){initParams.apiKey=KAMPYLE_UTILS.getNestedPropertyValue(MDIGITAL.CONFIGURATION.getOnsiteConfiguration(),'usersnapEnvId');}
api.init(initParams);window.UserSnap={api:api};};}
function getUserSnapInstance(){return userSnapInstanc;}
return{initScreenCaptureWidget:initScreenCaptureWidget,handleCaptureCancellation:handleCaptureCancellation,closeScreenCaptureWidget:closeScreenCaptureWidget,beforeOpen:beforeOpen,UserSnapModel:UserSnapModel,shouldProcessScreenCaptureAsComponent:shouldProcessScreenCaptureAsComponent,overrideDefaultScreenCaptureTexts:overrideDefaultScreenCaptureTexts,overrideDefaultScreenCaptureStyles:overrideDefaultScreenCaptureStyles,formatScreenCaptureWidget:formatScreenCaptureWidget,getSelectedTool:getSelectedTool,handleScrollIfNeeded:handleScrollIfNeeded,setBodyOverflowType:setBodyOverflowType,cancelCaptureClicked:cancelCaptureClicked,afterSend:afterSend,getUserSnapInstance:getUserSnapInstance,init:init,addEscKeyDownListenerToIframe:addEscKeyDownListenerToIframe,createScreenCaptureWidget:createScreenCaptureWidget,isScreenCaptureEnabled:isScreenCaptureEnabled,onCancelScreenCaptureClick:onCancelScreenCaptureClick,onSubmitScreenCaptureClick:onSubmitScreenCaptureClick,showScreenCaptureSpinner:showScreenCaptureSpinner,};})(window,document);window.KAMPYLE_ONSITE_SD;})(window,document);window.KAMPYLE_INTEGRATIO;})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.CUSTOM_EVENTS=(function(){var FORM_ID='formId';var FORM_TRIGGER_TYPE='formTriggerType';var FEEDBACK_UUID='feedbackUUID';var FEEDBACK_CORRELATION_UUID='feedbackCorrelationUUID';var FEEDBACK_CONTENT='content';var IS_PASSED='isPassed';var TARGETING_RULE='targetingRule';var EXPECTED='expected';var ACTUAL='actual';var FORM_LANGUAGE='formLanguage';var customEvents={MDigital_Form_Close_Submitted:{customEventId:'MDigital_Form_Close_Submitted',payload:[FORM_ID,FORM_TRIGGER_TYPE]},neb_formReady:{customEventId:'MDigital_Form_Displayed',payload:[FORM_ID,FORM_TRIGGER_TYPE]},neb_pageView:{customEventId:'MDigital_Page_View',payload:[],},MDigital_Form_Next_Page:{customEventId:'MDigital_Form_Next_Page',payload:[FORM_ID,FORM_TRIGGER_TYPE]},MDigital_Form_Back_Page:{customEventId:'MDigital_Form_Back_Page',payload:[FORM_ID,FORM_TRIGGER_TYPE]},MDigital_Form_Close_No_Submit:{customEventId:'MDigital_Form_Close_No_Submit',payload:[FORM_ID,FORM_TRIGGER_TYPE]},MDigital_ThankYou_Displayed:{customEventId:'MDigital_ThankYou_Displayed',payload:[FORM_ID,FORM_TRIGGER_TYPE]},MDigital_ThankYou_Close:{customEventId:'MDigital_ThankYou_Close',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:FEEDBACK_UUID)},neb_feedbackSubmitted:{customEventId:'MDigital_Submit_Feedback',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:FEEDBACK_UUID).concat(isExposeFormLanguageAllowed()?FORM_LANGUAGE:[]).concat(KAMPYLE_FUNC.isContentPayloadEnabled()?FEEDBACK_CONTENT:[])},neb_inviteAccepted:{customEventId:'MDigital_Invite_Accepted',payload:[FORM_ID]},neb_showInvitation:{customEventId:'MDigital_Invite_Displayed',payload:[FORM_ID]},neb_inviteDeclined:{customEventId:'MDigital_Invite_Declined',payload:[FORM_ID]},neb_skipInvitation:{customEventId:'MDigital_invite_Skipped',payload:[FORM_ID]},neb_buttonClicked:{customEventId:'MDigital_Feedback_Button_Clicked',payload:[FORM_ID,FORM_TRIGGER_TYPE]},neb_captureInit:{customEventId:'MDigital_CaptureButton_Clicked',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:[]),},neb_captureImageClicked:{customEventId:'MDigital_CaptureButton_Taken',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:[]),},neb_initButton:{customEventId:'MDigital_Button_Displayed',payload:[FORM_ID]},MDigital_Capture_Cancelled:{customEventId:'MDigital_CaptureButton_Cancel',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:[]),},screenCaptureDelete:{customEventId:'MDigital_ScreenCapture_Delete',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:[])},screenCaptureRetake:{customEventId:'MDigital_ScreenCapture_Retake',payload:[FORM_ID,FORM_TRIGGER_TYPE].concat(!KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.BACKEND_GENERATED_UUID)?FEEDBACK_CORRELATION_UUID:[])},neb_sdkShowForm:{customEventId:'MDigital_ShowForm_Called',payload:[FORM_ID,FORM_TRIGGER_TYPE]},MDigital_targetingRuleEvaluated:{customEventId:KAMPYLE_CONSTANT.EVENTS.MDIGITAL_TARGETING_RULE_EVALUATED,payload:[FORM_ID,IS_PASSED,TARGETING_RULE,EXPECTED,ACTUAL,FORM_TRIGGER_TYPE],},};var dataToSendMapping={formId:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_KEYS.FORM_ID_LABEL,manipulateValueMethod:null},formTriggerType:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_KEYS.FORM_TYPE_LABEL,manipulateValueMethod:manipulateTriggerTypeValue},feedbackCorrelationUUID:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_KEYS.FEEDBACK_UUID_LABEL},feedbackUUID:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_KEYS.FEEDBACK_UUID_LABEL,manipulateValueMethod:null},content:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_KEYS.FEEDBACK_CONTENT_LABEL,manipulateValueMethod:null,},formLanguage:{exposedProperty:KAMPYLE_CONSTANT.EXPOSED_FEEDBACK_KEYS.FORM_LANGUAGE_LABEL,manipulateValueMethod:null,;}
function isExposeFormLanguageAllowed(){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)&&(KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXPOSE_SELECTION_QUESTIONS)||KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.EXPOSE_VERBATIM_QUESTIONS))}
return{init:init,triggerCustomEvent:triggerCustomEvent,getCustomEventDataToSend:getCustomEventDataToSend,isExposeFormLanguageAllowed:isExposeFormLanguageAllowed};})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.CUSTOM_PARAMETER;})(window,document);window.MDIGITAL.INIT=(function(window,document){var onsiteConfigurati;}
return{init:init,initOnsite:initOnsite,reportInitComplete:reportInitComplete};})(window,document);window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.WCAG=(function(){var CURRENT_SHOWN_MODAL_INITIAL_STATE={formId:null,targetModalId:'',};var rootWindow=window.top;var currentShownModal=;}
function initModalState(){Object.assign(currentShownModal,CURRENT_SHOWN_MODAL_INITIAL_STATE)}}
function refocusForm(){var targetModal=document.getElementById(currentShownModal.targetModalId);if(targetModal&&targetModal.contentWindow){targetModal.contentWindow.focus();}}
function setModalState(newState){Object.assign(currentShownModal,newState)}}
function trapFocus(){rootWindow.addEventListener(KAMPYLE_CONSTANT.BROWSER_EVENTS.FOCUS,focusOnModal);}
function getModalState(){return currentShownModal;}
return{init:init,initModalState:initModalState,onFormShown:onFormShown,getModalState:getModalState,setModalState:setModalState,focusOnModal:focusOnModal,trapFocus:trapFocus,refocusForm:refocusForm,announceInvitation:announceInvitation,CURRENT_SHOWN_MODAL_INITIAL_STATE:CURRENT_SHOWN_MODAL_INITIAL_STATE}})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.MODAL_DIALOGS=(function(){var CURRENT_SHOWN_MODAL_INITIAL_STATE={formId:null,targetModalId:'',};var rootWindow=window.top;var currentShownModal=;}
function onFormClosed(eventName,payload){if(!isEventOccuredOnCurrentShownModal(payload.formId)){return;}
restoreLightBoxDefaultState();}
function restoreInviteDefaultState(){releaseFocus();removeDialogAriaAttributesInvite();restoreFocus();initModalState();}
function trapFocus(){if(currentShownModal.isPreview)return;rootWindow.addEventListener(KAMPYLE_CONSTANT.BROWSER_EVENTS.FOCUS,handleTrapFocus,true);}
function releaseFocus(){if(currentShownModal.isPreview)return;rootWindow.removeEventListener(KAMPYLE_CONSTANT.BROWSER_EVENTS.FOCUS,handleTrapFocus,true)}}
function setDialogAriaAttributesOnForm(formId){var ariaAttrs={role:"dialog",'aria-modal':true,'aria-label':getFormAnnouncement(formId),}
var langCode=getFormLanguageCode(formId);removeDialogAriaAttributesLightBox();setDialogAriaAttributesLightBox(langCode!=null?Object.assign(ariaAttrs,{lang:langCode}):ariaAttrs);}
function setDialogAriaAttributesLightBox(attributes){MDIGITAL.MODAL_DIALOGS.setDialogAriaAttributes(KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.CONTAINER_ID_PREFIX,attributes);}
function getFormLanguageCode(formId){return KAMPYLE_FUNC.checkProvision(KAMPYLE_CONSTANT.PROVISIONS.LOCALIZED_FORMS)?MDIGITAL.LOCALIZATION.getFormLanguage(formId):null;}
function removeDialogAriaAttributesLightBox(){removeDialogAriaAttributes(KAMPYLE_CONSTANT.IFRAME_SETTINGS.LIGHTBOX.CONTAINER_ID_PREFIX);}
function removeDialogAriaAttributes(targetId){var target=document.getElementById(targetId);if(target==null)return;var attributes=['role','aria-modal','aria-label','aria-labelledby','aria-describedby','lang']
for(var key in attributes){KAMPYLE_UTILS.removeAttribute(target,attributes[key]);}}
return{init:init,initModalState:initModalState,onFormShown:onFormShown,onInviteReady:onInviteReady,onNoJsonModalShown:onNoJsonModalShown,getModalState:getModalState,setModalState:setModalState,setFocus:setFocus,focusOnModal:focusOnModal,focusOnOopsCloseButton:focusOnOopsCloseButton,trapFocus:trapFocus,refocusForm:refocusForm,setDialogAriaAttributes:setDialogAriaAttributes,setLocalizedAnnouncementOnForm:setLocalizedAnnouncementOnForm,setLocalizedAnnouncementOnInvite:setLocalizedAnnouncementOnInvite,CURRENT_SHOWN_MODAL_INITIAL_STATE:CURRENT_SHOWN_MODAL_INITIAL_STATE}})();window.MDIGITAL=window.MDIGITAL||{};window.MDIGITAL.DECIBE}})();MDIGITAL.INIT.init();