(function( window, undefined ){'use strict';var gg = window.gg = window.gg || {};
window.__didomiVersion&&2===window.__didomiVersion?(window.gdprAppliesGlobally=!0,function(){!"__tcfapi","__tcfapiBuffer","__tcfapiCall","__tcfapiReturn"),"__tcfapiLocator"),function(e){var t=document.createElement("script");t.id="spcloader",t.type="text/javascript",t.async=!0,t.src="https://sdk.privacy-center.org/3da070b4-2745-4eb6-8fc9-1fabe5f634e6/loader.js?target="+document.location.hostname,t.charset="utf-8";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)}()}()):(window.gdprAppliesGlobally=!0,),)),gg.didomi=function(){var e,t=null,o=function(){var e=document.createElement("style");e.type="text/css",e.textContent="#didomi-host .didomi-notice-banner {border-top: none !important;box-shadow: 1px 7px 10px 3px rgba(0,0,0,0.75);} #didomi-host .didomi-mobile #didomi-notice.bottom .didomi-notice__interior-border{border:none !important;}#didomi-host .didomi-buttons .didomi-button{border:none !important;text-decoration:none !important;border-radius: 4px !important;}",document.getElementsByTagName("head")[0].appendChild(e)},n=i=s=function(){var e=window,t={};try{"function"!=typeof e.__tcfapi&&"function"!=typeof e.__cmp||("function"==typeof e.__tcfapi?(t.tcfVersion=2,t.cookieName="euconsent-v2"):(t.tcfVersion=1,t.cookieName="euconsent"))}catch(e){console.error(e)}return t};return{init:function(t){window.didomiOnReady=window.didomiOnReady||[],e=t||{},!!document.documentMode||o(),e.hidden&&n(),window.didomiOnReady.push(function(t){t.notice.isVisible()&&(document.getElementsByClassName("didomi-learn-more-button")[0].addEventListener("click",,document.getElementsByClassName("didomi-dismiss-button")[0].addEventListener("click",)})},getConfig:s,doWhenConsent:function(e,t,o){window.didomiOnReady.push(function(n){n.isConsentRequired()&&e?n.getObservableOnUserConsentStatusForVendor(t).filter(.first().subscribe(function(e){o()}):o()})},onTCLoaded:function(e){var t=s().tcfVersion;1===t?__cmp("getVendorConsents",null,:2===t&&__tcfapi("addEventListener",2,function(t,o){(o&&"tcloaded"===t.eventStatus||o&&"useractioncomplete"===t.eventStatus)&&(e(t.purpose.consents),__tcfapi("removeEventListener",2,null))})},getPurposesStatus:function(){if(2===s().tcfVersion)var e=[{v2_F1_cookies:""+Didomi.getUserConsentStatusForPurpose("cookies")||!1+"",v2_F2_select_basic_ads:""+Didomi.getUserConsentStatusForPurpose("select_basic_ads")||!1+"",v2_F3_create_ads_profile:""+Didomi.getUserConsentStatusForPurpose("create_ads_profile")||!1+"",v2_F4_select_personalized_ads:""+Didomi.getUserConsentStatusForPurpose("select_personalized_ads")||!1+"",v2_F5_create_content_profile:""+Didomi.getUserConsentStatusForPurpose("create_content_profile")||!1+"",v2_F6_select_personalized_content:""+Didomi.getUserConsentStatusForPurpose("select_personalized_content")||!1+"",v2_F7_measure_ad_performance:""+Didomi.getUserConsentStatusForPurpose("measure_ad_performance")||!1+"",v2_F8_measure_content_performance:""+Didomi.getUserConsentStatusForPurpose("measure_content_performance")||!1+"",v2_F9_market_research:""+Didomi.getUserConsentStatusForPurpose("market_research")||!1+"",v2_F10_improve_products:""+Didomi.getUserConsentStatusForPurpose("improve_products")||!1+"",v2_FP1_data_sharing:""+Didomi.getUserConsentStatusForPurpose("kEeDsLCp")||!1+"",v2_FP2_segment_sharing:""+Didomi.getUserConsentStatusForPurpose("compartir-dpHgJEJa")||!1+""}];else e=[{v1_1_F1_device_acces:""+Didomi.getUserConsentStatusForPurpose("cookies")||!1+"",v1_1_F2_personalization:""+Didomi.getUserConsentStatusForPurpose("advertising_personalization")||!1+"",v1_1_F3_ad_delivery:""+Didomi.getUserConsentStatusForPurpose("ad_delivery")||!1+"",v1_1_F4_content_personalization:""+Didomi.getUserConsentStatusForPurpose("content_personalization")||!1+"",v1_1_F5_statistics:""+Didomi.getUserConsentStatusForPurpose("analytics")||!1+"",v1_1_FP1_data_sharing:""+Didomi.getUserConsentStatusForPurpose("kEeDsLCp")||!1+"",v1_1_FP2_segment_sharing:""+Didomi.getUserConsentStatusForPurpose("compartir-dpHgJEJa")||!1+""}];return JSON.stringify(e)}}}();
gg.EventRegistry=function(){var r={},n={};return{on:function(o,t){n[o]||(n[o]=[]),n[o].push(t),null!=r[o]&&t(r[o])},trigger:function(o,t){r[o]=null!=t?t:[],gg.util.map(n[o]||[],function(r){try{r(t)}catch(n){console.error("Error occurred for handler of event {}",o,r,t,n)}})}}};
gg.ads=function(){var cfg={},sequences={},librariesToLoad=0,disabledSlots={},abpSlots={},slots={},events=new gg.EventRegistry,adomikGroup,prebidBids,initialLoadDisabled=!1,displayEnabled=!0,personalizedAds=!1,load=function(e){cfg=e;var t=gg.breakpoint.getCurrent();cfg.keys.d=t,cfg.keys.adUnitPath=cfg.unitname;var n=document.location.href;if(!(n.indexOf("@")>=0||n.indexOf("%40")>=0)){cfg.abpSlots&&cfg.abpSlots[t]&&(abpSlots=cfg.abpSlots[t],loadCriteoAbp());var o=gg.util.url().params.sc;o&&(cfg.keys.sc=o),gg.util.map((cfg.disabledSlots[t]||[]).concat(window.moreDisabled||[]),(),window.googletag={cmd:[]},gg.util.map([["loadPG",loadPG],["adomik",resolveAdomikGroup]],(function(e){var t=cfg[e[0]];t&&(librariesToLoad++,e[1](t))})),loadDfp()}},dfpExec=function(e){try{cfg.syncLoading?e():window.googletag.cmd.push(e)}catch(e){throw console.error("Error on command array",e),e}},setDisplayEnabled=function(e){displayEnabled=e,e&&dfpExec((function(){var e=gg.util.toArray(slots),t=gg.util.filter(e,"displayRequested",!0);gg.ads.refresh(gg.util.map(t,"elementId"))}))},push=function(slot){if(gg.breakpoint.is(slot.device)){if(slots[slot.elementId]=slot,cfg.sequential&&gg.util.contains(cfg.sequential,slot.type)){var seq=(sequences[slot.type]||0)+1;sequences[slot.type]=seq,slot.name=slot.type+seq}else cfg.sectionable&&gg.util.contains(cfg.sectionable,slot.type)?slot.name=slot.type+"-"+slot.section:slot.name=slot.type;slot.enabled=!disabledSlots[slot.name],slot.enabled&&(slot.keys=slot.keys||{},slot.keys.t=slot.name,slot.sizes?(slot.outOfPage=!1,"string"==typeof slot.sizes&&(slot.sizes=eval(slot.sizes))):slot.outOfPage=!0,slot.defined=slot.loaded=slot.finished=!1)}},init=function(){(prebidBids=getPrebidBids()).length>0&&initPrebid(prebidBids),dfpExec((function(){for(var e in slots){var t=slots[e];t.deferred||define(t)}doConfig()}))},onRender=function(e){var t=e.slot.getSlotElementId();console.log("rendered",t);var n=slots[t];n.displayRequested?(n.finished&&console.warn("slotRenderEnded event already received for",n.name,t),doAfterRender(e,n)):console.warn("slotRenderEnded received without calling to display()",n,e)},doAfterRender=function(e,t){if(t.finished=!0,t.loaded=!e.isEmpty,t.loaded){var n=!1;try{var o=gg.util.filter(pbjs.getAllWinningBids(),"adUnitCode",t.elementId)[0];o&&(t.width=o.width,t.height=o.height,n=!0)}catch(e){}n||(t.width=e.size[0],t.height=e.size[1])}events.trigger(t.name,t)},define=function(e){if(e.enabled){if(e.outOfPage)e.ref=googletag.defineOutOfPageSlot(cfg.unitname,e.elementId);else{var t=e.sizes;e.sizeNames&&(t=e.sizeNames.concat(e.sizes)),e.ref=googletag.defineSlot(cfg.unitname,t,e.elementId)}for(var n in e.ref.addService(googletag.pubads()),cfg.adomik&&e.ref.setTargeting("ad_group",adomikGroup),e.keys)e.ref.setTargeting(n,e.keys[n]);e.callback&&on(e.name,e.callback.functionName,e.callback.args),e.defined=!0}},doConfig=function(){for(var e in cfg.keys)googletag.pubads().setTargeting(e,cfg.keys[e]);try{for(var e in window.localStorage){var t="ads.keys.";e.length>t.length&&e.substring(0,t.length)==t&&googletag.pubads().setTargeting(e.substring(t.length),window.localStorage[e])}}catch(e){console.log("Error when setting targeting from local storage",e)}googletag.pubads().collapseEmptyDivs(!0,!0),googletag.pubads().enableSingleRequest(),cfg.syncRendering&&console.log("Sync rendering enabled = ",googletag.pubads().enableSyncRendering()),googletag.pubads().setRequestNonPersonalizedAds(personalizedAds?0:1),googletag.pubads().addEventListener("slotRenderEnded",onRender),googletag.enableServices(),console.log("Services enabled")},display=function(e){if(gg.breakpoint.is(e.device)&&!e.deferred){var t=slots[e.elementId];t?t.deferred?dfpExec((function(){define(t),doDisplay(t),initialLoadDisabled&&googletag.pubads().refresh([t.ref])})):window.abp&&abpSlots[t.name]?displayCriteoAbp(abpSlots[t.name]):doDisplay(e):dfpExec((function(){push(e),define(e),doDisplay(slots[e.elementId]),initialLoadDisabled&&googletag.pubads().refresh([e.ref])}))}},doDisplay=function(e){var t=document.getElementById(e.elementId);(e=slots[e.elementId]).enabled?(t.setAttribute("data-name",e.name),console.log("display",e.name,e),dfpExec((function(){e.displayRequested=!0,displayEnabled&&(window.googletag.display(e.elementId),t.classList.add("ad-displayed"))}))):t.setAttribute("class","hidden")},getMatchingSlots=function(e){null==e?e=function(){return!0}:"string"==typeof e&&(e=[e]);var t=e instanceof Array?function(t){return gg.util.contains(e,t.name)||gg.util.contains(e,t.elementId)}:e;return gg.util.filter(gg.util.toArray(slots),t)},remove=function(e){var t=getMatchingSlots(e);for(var n in console.log("removed",gg.util.map(t,"name")),googletag.destroySlots(gg.util.map(t,"ref")),t){var o=t[n];document.getElementById(o.elementId).classList.remove("ad-displayed")}},on=function(e,t,n){events.on(e,(function(e){gg.registry.register("ads-"+e.name+"-"+gg.util.seq(),t,[e,n])}))},refresh=function(e){var t=getMatchingSlots(e);console.log("refresh",gg.util.map(t,"name")),googletag.pubads().refresh(gg.util.map(t,"ref"))},onPassbackRender=function(e,t,n){console.log("rendered passback",e);var o=n.t,a=gg.util.filter(gg.util.toArray(slots),"name",o);1!=a.length&&console.error("Found %i slots with name %s",a.length,o);var i=a[0];i.passback=!0,doAfterRender(e,i);var s=document.querySelector("ins#"+i.elementId+" iframe");s.setAttribute("width",i.width+"px"),s.setAttribute("height",i.height+"px")},getTargeting=function(){return cfg.keys},passback=function(e,t,n){console.log("display passback",e,t,n),window.googletag={cmd:[function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){window.top.gg.ads.onPassbackRender(e,t,n)}));var o=googletag.pubads().definePassback(e,t),a=window.top.gg.ads.getTargeting();for(var i in a)o.setTargeting(i,a[i]);for(var i in n)o.setTargeting(i,n[i]);o.display()}]},gg.util.getScript("//securepubads.g.doubleclick.net/tag/js/gpt.js",{async:!1})},loadDfp=function(){if(librariesToLoad>0)--librariesToLoad;else{var e=function(e){personalizedAds=e,gg.util.getScript("//securepubads.g.doubleclick.net/tag/js/gpt.js",{async:!cfg.syncLoading})};window.didomiOnReady?window.didomiOnReady.push((function(t){t.isConsentRequired()&&!0!==t.getUserConsentStatusForVendor("c:google-dfp")?(console.log("Set non personalized ads"),e(!1)):(console.log("Set personalized ads"),e(!0))})):e(!0)}},debug={log:function(){var e=gg.util.toArray(slots),t=gg.util.filter(e,"enabled",!0),n=gg.util.filter(t,"loaded",!0),o=gg.util.filter(t,();if(cfg.prebid&&cfg.prebid.bidders){var a=[],i=pbjs.getBidResponses(),s=pbjs.getAllWinningBids();for(var d in e){var r=$.extend(!0,{},e[d]),l=gg.util.getByName(r.elementId,i);if(l){for(var g in cfg.prebid.bidders)r["cpm-"+g.substring(0,3)]=null;for(var c in l.bids){var u=l.bids[c];for(var p in r["cpm-"+u.bidderCode.substring(0,3)]=u.cpm,s){var f=s[p];f.adUnitCode===r.elementId&&f.bidderCode===u.bidderCode&&(r["cpm-"+u.bidderCode.substring(0,3)]=r["cpm-"+u.bidderCode.substring(0,3)]+" Winner!")}}}a.push(r)}e=a}console.table(e),console.log("Total = %i, enabled = %i, (enabled & loaded) = %i, (enabled & !loaded & outOfPage) = %i",e.length,t.length,n.length,o.length),console.log("Configuration",cfg)},getSlots:function(){return slots}},runCallback=function(e){for(var t in slots){console.log(t);var n=slots[t];if(n.name==e&&($("#"+n.elementId).hide(),"callback"in n)){n.loaded=!1;var o=n.callback.functionName;console.log("runCallback",n,n.elementId,o,n.callback.args);var a="string"==typeof o?gg.util.getByName(o):o;return void gg.util.logWrap("tapablancos-"+e,a,[n,n.callback.args])()}}},resolveAdomikGroup=function(){var e=Math.random();adomikGroup=e<.1?"ad_ex"+Math.floor(100*e):e<.11?"ad_bc":"ad_opt",loadDfp()},getPrebidBids=function(){if(!gg.util.getByName("prebid.bidders",cfg))return[];var e={appnexus:getPrebidAppnexus,rubicon:getPrebidRubicon,criteo:getPrebidCriteo,smartadserver:getPrebidSmartAdServer},t=[],n=gg.util.filter(gg.util.toArray(slots),"enabled",!0);for(var o in n){var a=n[o];for(var i in e)try{var s=cfg.prebid.bidders[i];if(s){var d=e[i].apply(this,[a,s]);d&&t.push({code:a.elementId,mediaTypes:{banner:{sizes:a.sizes}},bids:[{bidder:i,params:d}]})}}catch(e){console.log("Error for slot "+a+", "+e)}}return t},initPrebid=function(e){dfpExec((function(){googletag.pubads().disableInitialLoad(),initialLoadDisabled=!0}));var t=function(){pbjs.adserverRequestSent||(pbjs.adserverRequestSent=!0,dfpExec(())};window.pbjs.que.push((function(){pbjs.setConfig({priceGranularity:{buckets:[{min:0,max:12,increment:.01},{min:12,max:20,increment:.05}]},consentManagement:{cmpApi:"iab",timeout:1e3,allowAuctionWithoutConsent:!0},enableSendAllBids:!1,debug:!0}),pbjs.addAdUnits(e),pbjs.requestBids({bidsBackHandler:t})})),setTimeout(t,cfg.prebid.timeout)},getPrebidAppnexus=function(e,t){var n=t[gg.breakpoint.getCurrent()];"string"==typeof n&&(n=t[n]);var o=n[e.name];return o?{placementId:o}:null},getPrebidRubicon=function(e,t){var n=gg.breakpoint.getCurrent(),o=t.slots[n];return"string"==typeof o&&(o=t.slots[o]),o.indexOf(e.name)>=0?{accountId:t.params.accountId,siteId:t.params.siteId[n],zoneId:t.params.zoneId[n]}:null},getPrebidCriteo=function(e,t){var n=t[gg.breakpoint.getCurrent()];"string"==typeof n&&(n=t[n]);var o=n[e.name];return o?{zoneId:o}:void 0},getPrebidSmartAdServer=function(e,t){var n=t[gg.breakpoint.getCurrent()];"string"==typeof n&&(n=t[n]);var o=n[e.name];return o?{domain:"https://prg.smartadserver.com",currency:"EUR",siteId:t.siteId,pageId:t.pageId,formatId:o}:void 0},loadPG=function(e){gg.util.getScript("//pq-direct.revsci.net/pql?placementIdList="+e,{async:!cfg.syncLoading,callback:function(e){if(e&&"undefined"!=typeof asiPlacements)for(var t in asiPlacements)for(var n in window["ASPQ_"+t]="",asiPlacements[t].data)window["ASPQ_"+t]+="PQ_"+t+"_"+n,cfg.keys["gwd_"+t]=n;loadDfp()}})},loadTrackingPG=function(e){window.setUpAgknTag=gg.util.getScript("//js.agkn.com/prod/v0/tag.js")},loadCriteoAbp=function(){gg.util.getScript("//static.criteo.net/js/px.js?ch=1",{callback:function(){gg.util.getScript("//static.criteo.net/js/px.js?ch=2")}})},displayCriteoAbp=function(e){var t="//cas.criteo.com/delivery/ajs.php?zoneid="+e+"&amp;cb="+Math.floor(99999999999*Math.random())+(","!=document.MAX_used?"&amp;exclude="+document.MAX_used:"")+(document.charset?"&amp;charset="+document.charset:document.characterSet?"&amp;charset="+document.characterSet:"")+"&amp;loc="+escape(window.location).substring(0,1600)+(document.context?"&context="+escape(document.context):"")+(void 0!==document.MAX_ct0&&"http"==document.MAX_ct0.substring(0,4)?"&amp;ct0="+escape(document.MAX_ct0):"")+(document.mmm_fo?"&amp;mmm_fo=1":"");document.write('<script type="text/javascript" src="'+t+'"><\/script>')},loadPan=function(e){var t=[];window.cX={callQueue:t},t.push(["setSiteId",e]),t.push(["sendPageViewEvent"]),gg.util.getScript("http"+("https:"===location.protocol?"s://s":"://")+"cdn.cxense.com/cx.js")},loadSeedTag=function(e){(window._seedtagq=[]).push(["_setId",e]),gg.util.getScript("//config.seedtag.com/loader.js?v="+Math.random())},loadBrandcrumb=function(e){var t=window._BCaq=[];t.push(["setAccount",e]),t.push(["crumb"]),gg.util.getScript("//static.brandcrumb.com/bc.js")},loadFacebook=loadQuantum=return{load:load,push:push,init:init,display:display,on:on,refresh:refresh,setDisplayEnabled:setDisplayEnabled,getTargeting:getTargeting,passback:passback,onPassbackRender:onPassbackRender,debug:debug,runCallback:runCallback,remove:remove,loadPan:loadPan,loadSeedTag:loadSeedTag,loadBrandcrumb:loadBrandcrumb,loadFacebook:loadFacebook,loadTrackingPG:loadTrackingPG,loadQuantum:loadQuantum}}();
gg.breakpoint=function(){var n=null,t=null,i=null,e=function(){var n=i,t=function(){r(),i.name==n.name||gg.refresh.ignoreRefresh()||location.reload()},e=null;window.onresize=,r=function(){for(var n=o().width,e=0;e<t.length;e++){var r=t[e];if(n>=r.minWidth)return void(i=r)}},o=return{setBreakpoints:function(i,o){for(var u in n=i,t=[],i)t.push({name:u,minWidth:i[u]});t.sort(,r(),o&&e()},getMinWidth:function(t){return n[t]},is:getCurrent:function(){return i.name},getBreakpointName:function(n){for(var i=0;i<t.length;i++){var e=t[i];if(n>e.minWidth)return e.name}},getViewport:o}}();
gg.console={init:function(){window.console=window.console||{},gg.util.map(["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],function(o){window.console[o]=window.console[o]||function(){}})}};
gg.cookie=function(){var e=function(e,n,t,o){var r=t?"; expires="+new Date((new Date).getTime()+1e3*t).toGMTString():"";document.cookie=e+"="+encodeURIComponent(n)+r+"; path=/"+(o?";domain="+o:"")},n=function(){for(var e={},n=document.cookie.split("; "),t=0;t<n.length;t++){var o=n[t].split("=");try{e[o[0]]=decodeURIComponent(o[1])}catch(e){}}return e};return{set:e,get:function(e){return n()[e]},remove:map:n}}();
gg.gtm=function(){var pushedOnce={},regex=/{.*}/,push=function(e,t,a,n){if(n){var u=[e,t,a].join("|");if(pushedOnce[u])return;pushedOnce[u]=!0}dataLayer.push({event:e,eventAction:t,eventLabel:a,eventValue:null})},getData=function(data){return gg.util.map(data.split("|"),function(x){return regex.exec(x)?eval(x.slice(1,-1)):x})},listen=function(){$(document).on("click","[data-gtm-click]",function(e){var t=getData($(e.currentTarget).attr("data-gtm-click"));push(t[0],t[1],t[2],!0)})},virtualPageView=return{push:push,listen:listen,virtualPageView:virtualPageView}}();
gg.registry=function(){var t=!1,i={},r=null,n=null,e=function(){try{var t=window.sessionStorage.getItem("gg.registry.ids");return""===t?[]:t.split(",")}catch(t){}var r=[];for(var n in i)r.push(i[n]);return r.sort(,gg.util.map(r,function(t){return t.id})},o=function(t){try{if(null!=t){var r=i[t];if(r.options.devices&&!gg.util.contains(r.options.devices,gg.breakpoint.getCurrent()))return;var n="string"==typeof r.f?gg.util.getByName(r.f):r.f;gg.util.logWrap(t,n,r.args)()}}catch(i){console.error(t,i)}};return{register:function(r,n,e,g){if(g&&g.multiple&&(r=r+"-"+gg.util.seq()),!i[r]){var s={id:r,f:n,args:e,options:g||{}};i[r]=s,t&&o(r)}},init:function(){if(!t)for(t=!0,r=e(),n=0;n<r.length;n++)o(r[n])},execute:o,debug:{getIds:e,setIds:}}();
gg.util=function(){var t=(new Date).getTime(),r=0,e=!0,n=Math.random()*Math.pow(10,20)+"-"+Math.random()*Math.pow(10,20)+"-"+(new Date).getTime(),a=function(t,r){if("string"==typeof r){var e=r;r=function(t){return t[e]}}for(var n=[],a=0;a<t.length;a++)n.push(r(t[a],a));return n},i=function(t,r){return"string"==typeof t?function(e){return e[t]===r}:t},o=function(t,r,e){return function(n){return"string"==typeof t&&(t=gg.util.getByName(t)),t.apply(n||e,r)}};return{toArray:function(t,r){var e=[];for(var n in t)e.push(r?{key:n,value:t[n]}:t[n]);return e},map:a,filter:function(t,r,e){r=i(r,e);for(var n=[],a=0;a<t.length;a++){var o=t[a];r(o,a)&&n.push(o)}return n},contains:remove:function(t,r,e){var n=t.length-1;for(r=i(r,e);n>=0;)r(t[n],n)&&t.splice(n,1),n--},getScript:function(t,r){var e=r||{};if(!1===e.async){var n='<script type="text/javascript" src="'+t+'"';if(e.callback){gg.callbacks=gg.callbacks||{};var a="cb_"+(""+Math.random()).substring(2);gg.callbacks[a]=e.callback,n+=" onload=\"gg.callbacks['"+a+"'](true)\" onerror=\"gg.callbacks['"+a+"'](false)\""}document.write(n+">"+(e.content||"")+"<\/script>")}else{var i=document.createElement("script");if(i.src=t,i.type="text/javascript",i.async=!0,e.attrs)for(var c in e.attrs)i.setAttribute(c,e.attrs[c]);if(e.content&&(i.text=e.content),e.callback){var l=!1,u=i.onload=o(u,[!0]),i.onerror=o(u,[!1]),i.onreadystatechange=function(){"complete"==this.readyState&&u(!0)}}document.head.appendChild(i)}},logWrap:function(r,e,n){return function(){r+=" ("+((new Date).getTime()-t)+"ms)",console.time(r),e.apply(null,n),console.timeEnd(r)}},url:function(t){var r=document.createElement("a");r.href=t||document.location.href,r.protocol=r.protocol.slice(0,-1),r.params={};for(var e,n=/[?&]?([^=]+)=([^&]*)/g;e=n.exec(r.search);)r.params[e[1]]=e[2];var a=r.toString;return r.toString=function(){for(var t in r.search="",r.params){var e=r.params[t];r.search+=(""==r.search?"?":"&")+t+(e?"="+r.params[t]:"")}return a.apply(r)},r},execution:o,getByName:function(t,r){var e=r||window;return a(t.split("."),function(t){e=e?e[t]:null}),e},seq:setImgSrc:function(t){if(e){if(null==t.getAttribute("data-src-loaded")){var r=t.getAttribute("data-src-"+gg.breakpoint.getCurrent());null==r&&(r=t.getAttribute("data-src")),t.setAttribute("src",r),t.setAttribute("data-src-loaded","")}}else gg.util.lazify?gg.util.lazify(t):gg.util.imgToLoad.push(t)},disableImageLoading:function(){e=!1,gg.util.imgToLoad=[],gg.util.getScript("https://cdnjs.cloudflare.com/ajax/libs/lazyloadjs/3.2.2/lazyload.min.js",{callback:function(){gg.util.lazify=lazyload({offset:400,src:function(t){var r=t.getAttribute("data-src");return r||t.getAttribute("data-src-"+gg.breakpoint.getCurrent())}}),gg.util.map(gg.util.imgToLoad,gg.util.lazify)}})},disableDocumentWrite:function(){document.write=,readCookie:function(t){var r,e,n,a=t+"=";for(n=document.cookie.split(";"),r=0;r<n.length;r++){for(e=n[r];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return""},writeCookie:function(t,r,e){var n,a;e?((n=new Date).setTime(n.getTime()+24*e*60*60*1e3),a="; expires="+n.toGMTString()):a="",document.cookie=t+"="+r+a+"; path=/"},getParams:function(t){var r=window.ggUrlParams?window.ggUrlParams:{};return window.ggUrlParams||(window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,,window.ggUrlParams=r),t?void 0!==r[t]?r[t]:null:r},getTrackingId:function(){return n}}}();
}(window));
var md = window.md = window.md || {};
(function(window){
 var _conf={"default":{"site":"LV","sourceAgent":"WEB"},"mdusa":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".mundodeportivo.com"},"screens":{"url":"https://us.mundodeportivo.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"engagementGroup":"MD","api":{"url":"https://us.mundodeportivo.com/perfil"},"authorizedDomains":"https://us.mundodeportivo.com","base":{"url":"https://us.mundodeportivo.com"}},"evolok":{"api":{"url":"https://ggo.evolok.net"},"linkNif":{"url":"/perfil/ev/link"},"login":{"url":"/perfil/ev/login"},"products":{"url":"/perfil/ev/paywall/productos"}},"md":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".mundodeportivo.com"},"screens":{"url":"https://www.mundodeportivo.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"engagementGroup":"MD","api":{"url":"https://www.mundodeportivo.com/perfil"},"authorizedDomains":"https://www.mundodeportivo.com,https://shopping.mundodeportivo.com,https://alta.mundodeportivo.com","base":{"url":"https://www.mundodeportivo.com"}},"club":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".lavanguardia.com"},"screens":{"url":"https://club.lavanguardia.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"engagementGroup":"Default","api":{"url":"https://club.lavanguardia.com/perfil"},"authorizedDomains":"https://club.lavanguardia.com","base":{"url":"https://club.lavanguardia.com"}},"lv":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".lavanguardia.com"},"screens":{"url":"https://www.lavanguardia.com/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"onlyEvolok":"true","recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"engagementGroup":"Default","api":{"url":"https://www.lavanguardia.com/perfil"},"authorizedDomains":"https://www.lavanguardia.com,https://entradas.lavanguardia.com,https://shopping.lavanguardia.com,https://alta.lavanguardia.com","base":{"url":"https://www.lavanguardia.com"}},"api":{"club":{"loquiero":{"url":"https://api.serviciosgrupogodo.com/promo","key":"1U9cpQFaNq3NwvxUOXiJk7vmCoEvcp2e3UYELn6l"}}},"integrations":{"qualifio":"Z2djcC1ldm9sb2stcXVhbGlmaW8="},"r1":{"rsc":{"url":"https://rsc.lavanguardia.com"},"cookie":{"domain":".rac1.cat"},"screens":{"url":"https://www.rac1.cat/screens/{layout}/{flow}/{screen}/{id}"},"evolok":{"api":{"url":"https://ev.rac1.cat"}},"onlyEvolok":"true","recaptcha":{"key":"6LdpK_EaAAAAADWyt7JUdoNtnUWOmUyOv_tYecTo"},"engagementGroup":"R1","api":{"url":"https://www.rac1.cat/perfil"},"authorizedDomains":"https://www.rac1.cat","base":{"url":"https://www.rac1.cat"}}};
var gg = window.gg = window.gg || {};gg.screens = window.gg.screens || {};
gg.accounts=function(){var e=function(){if("undefined"==typeof _conf)throw new Error("Script config is missing!");return _conf},o=function(){if("undefined"!=typeof ggSite)return ggSite;var o=e();for(var n in o)if(o[n].authorizedDomains)for(var t=o[n].authorizedDomains.split(","),i=0;i<t.length;i++)if(t[i].includes(location.hostname))return n;return"lv"},n=function(){return e()[o()]},t=[],i=null,r=[],c=!1,u={};const a="ev_gg_st",g="ev_gg_rt",l="ev_gg_app_rt",f="ev_gg_app_tch_rt",p="ev_ss",d="_id_loggedIn",v=n().cookie.domain;window.appPlatform="";const h="productToAdd";var m="anonimo",k="registrado",w="acceso_digital",_={0:"anonimo",1:"registrado",2:"acceso_digital",3:"exsuscriptor"},y=new gg.EventRegistry,S=function(){return A()},A=function(){const e=ev.cookie.get("ev_ss");return null!=e},I=function(e){var o=ev.cookie.get(e);return!(o&&!(o&&new Date/1e3>o))},C=function(){return"app"===gg.util.getParams("facet")},T=function(e){var o=e||{};o.baseUrl=n().api.url,i=new gg.EvlAccountsService(o),b(),setTimeout((function(){var e=ev.cookie.get(p);if(null!=e){const o=q().guid,n=I("ev_gg_tch_rt"),t=I(g),i={touch:function(){return gg.paywall.service.touchSession(e)},cookies:function(){return gg.paywall.service.getUserByGuid(o,e)}};if(!t&&!n||C())console.log("*** sesion no chequeada ***"),D(!0);else{console.log("*** sesion chequeada ***");const e=t&&!n;(e?i.cookies:i.touch)().then((function(o){return gg.paywall.service.refreshCookies(e?o:void 0,e?"cookie":"touch")})).then((function(){D(!0)})).catch((function(e){if("SESSION_NOT_FOUND"===e.code||"SECURE_SESSION_NOT_FOUND"===e.code)return Z(),void D(!1);D(!0)}))}}else D(!1)}))},E=function(e){if(null!=_conf.allowedOrigins){var o=_conf.allowedOrigins.split(",");for(s of o)if(s.includes(e))return!0}return!1},b=U=function(){var e={};for(var o in gg.cookie.map()){var n=/^_id_/;n.test(o)&&(e[o.replace(n,"")]=o)}e.loggedIn="_id_loggedIn",u=new gg.Cookies(e)},O=function(){var e={};for(var o in ev.cookie.map()){var n=new RegExp("^_id_");n.test(o)&&(e[o.replace(n,"")]=o)}u=new gg.Cookies(e)},N=function(){b();var e=!1;u.authToken&&u.sessionState&&("OPEN"===u.sessionState.val()||"SUPER"===u.sessionState.val())?(u.loggedIn.boolean()||(u.loggedIn.set(1),e=!0),B("logged",e)):(u.loggedIn.boolean()&&(u.loggedIn.remove(),L(),e=!0),B("unlogged",e)),c||(gg.util.map(r,(),c=!0)},D=function(e){var o=ev.cookie.get(a),n=ev.cookie.get(h),t=!1;e?(null==o&&(t=!0,F(),R()),H("shopping")&&null!=n&&(productToAdd=n,ev.cookie.remove(h,v)),B("logged",t)):(null!=o&&(t=!0,x(),L()),B("unlogged",t))},P=function(){S()?D(!0):N()},R=L=function(){ev.cookie.remove(d,v)},x=function(){ev.cookie.remove(a,v)},F=function(){return ev.cookie.set(a,"1",null,v),ev.cookie.get(a)},M=function(e,o){y.on(o,e)},G=function(){return S()?A():!!u.loggedIn&&u.loggedIn.boolean()},q=function(){return S()?function(){var e={},o=new RegExp("^_id_");for(var n in b(),u)e[n]=u[n].val();for(var n in e)if(o.test(e[n])){for(var t={},i=e[n].split(";"),r=0;r<i.length;r++){var c=i[r].split("=");try{t[c[0].replace(o,"")]=decodeURIComponent(c[1])}catch(e){}}for(var a in delete e[n],t)e[a]=t[a]}return e.setUserImage=function(e){if("function"==typeof e){e(q().imageUrl||void 0)}},e.getAge=function(){if(!e.birthday)return null;var o=new Date,n=new Date(e.birthday),t=0;(o.getMonth()<n.getMonth()||o.getMonth()==n.getMonth()&&o.getDate()<n.getDate())&&(t=1);var i=o.getFullYear()-n.getFullYear()-t;return-1===i&&(i=null),i},e.getGender=function(){return e.gender&&"string"==typeof e.gender?e.gender.toLowerCase():null},e.hasActiveSubscription=function(){return"1"===gg.cookie.get("_pac")},e.getEvolokId=function(){return e.guid},e.getId=function(){return e.uid},e.getType=function(){return e.type?_[e.type]:G()?"function"==typeof e.hasActiveSubscription&&e.hasActiveSubscription()?w:k:m},e.getRoleName=function(){return e.roles},e.getRegisterDate=function(){if(e.registrationDate&&""!==e.registrationDate){const o=new Date(parseInt(e.registrationDate));return o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0")}return""},e.getNewsletterList=function(){return e.newsletters},e.getCommunicationList=function(){return e.communications},e}():function(){b();var e={};for(var o in u)e[o]=u[o].val();return e.setUserImage=function(o){return i.utils.setUserImage({uid:e.uid,lastUpdate:e.lastUpdate,callback:o})},e.getEvolokId=function(){return""},e.getId=function(){return""},e.getType=function(){return m},e.getRoleName=function(){return""},e.getRegisterDate=function(){return""},e.getNewsletterList=function(){return""},e.getCommunicationList=function(){return""},e}()},B=function(e,o){y.trigger(e,o)},z=function(e){e=e||{};for(var t="",i={},r={shopping:"shopping",club:"club",alta:"campaignator",entradas:"entradas"},c=Object.keys(r),u=0;u<c.length;u++)if(H(c[u])){t=r[c[u]];break}if(!t&&e.sourceAgent&&(t=o()+"-"+e.sourceAgent),C()){if(ee())return;i.facet="app"}!e.ignoreSource&&t&&ev.gtm.source.save(t,{cookieEnabled:!0}),ev.commons.referrer.save(),window.location=n().base.url+"/perfil/ev/login"+ev.utils.formatParams(i)},H=W=function(e,o,i,r){if("login"===e&&"login"===o&&H("shopping")&&(H("subscripcions")||H("suscripciones")))try{productToAdd&&ev.cookie.set(h,productToAdd,null,v)}catch(e){}if("true"===n().onlyEvolok&&"login"===e&&"login"===o)z(i);else{var c={layout:r&&r.selector?"embedded":"popup",flow:e,screen:o,id:t.length};for(var u in i)c[u]=i[u];o=new gg.WindowLoad(r);t.push(o),o.onClose((function(){P()})),o.load(n().screens.url,c)}},Y=function(e,o,n,t){S()?function(e,o,n,t){"login"===e&&"login"===o?z(n):"verify_email"===e?W(e,o,n,t):console.warn("** This flow ("+e+") is not supported with Evolok impl **")}(e,o,n,t):W(e,o,n,t)},Z=function(){for(var e in ev.cookie.remove("ev_ss",v),ev.cookie.remove("ex_ss",v),ev.cookie.remove(g,v),gg.cookie.map()){/^(_id_|ev_gg)/.test(e)&&ev.cookie.remove(e,v)}L()},Q=function(){var e=navigator.userAgent.match(/gg[a-zA-Z]*\/[0-9a-zA-Z.]*[0-9\s]/);return(e=e?e[0].toLowerCase().trim():"").toLowerCase().trim()},V=function(){const e=Q().split("/")[1];return e?parseInt(e.replace(/\./g,""),10):0},j=function(e){appPlatform=e?"ios"===e?1:2:0},J=function(e,o){if(!e)return!1;o=o||{};const n=Q();try{if(1===appPlatform||n.includes("ios"))return window.webkit.messageHandlers.appCallback.postMessage(e),!0;if(2===appPlatform||n.includes("and"))return appCallback.sendMessage(e),!0;console.log("fwdToApp for userAgent="+n)}catch(o){console.log("caught exception fwdToApp for userAgent="+n+"; message="+e)}return!1},K=function(){const e=Q(),o=V(),n="SUBSCRIPTION_REQUIRED";try{return"undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"undefined"==typeof __evContext&&!gg.accounts.isEvolokCookiePresent()?ee():"function"==typeof gg.accounts.getUser().hasActiveSubscription&&gg.accounts.getUser().hasActiveSubscription()?$():1===appPlatform||e.includes("ios")?(window.webkit.messageHandlers.appCallback.postMessage(n),!0):(2===appPlatform||e.includes("and"))&&o&&o>=500?(appCallback.sendMessage(n),!0):(console.log("fwdToAppPaywall for="+appPlatform),!1)}catch(e){return console.log("caught exception fwdToAppPaywall for="+appPlatform),!0}},X=function(){return J("UNAUTHORIZED")},$=function(){return J("PROFILE")},ee=function(){return J("REQUIRED_LOGIN")},oe=function(e,o){gg.paywall.service.refreshAllCookies(o).then((function(){gg.paywall.init(e,!0),setTimeout((function(){D(!0)}))})).catch((function(e){"session_not_found"===e.errorCode&&X()}))},ne=function(e,o){const n=q().guid;if(!n)return void oe(e,o);const t=I(f),i=I(l),r={touch:function(){return gg.paywall.service.touchSession(o)},cookies:function(){return gg.paywall.service.getUserByGuid(n,o)}};if(i||t){console.log("*** sesion app chequeada ***");const o=i&&!t;(o?r.cookies:r.touch)().then((function(e){return gg.paywall.service.refreshAppCookies(o?e:void 0,o?"cookie":"touch")})).then(().catch((function(o){"SESSION_NOT_FOUND"!==o.code&&"SECURE_SESSION_NOT_FOUND"!==o.code?gg.paywall.init(e,!0):X()}))}else console.log("*** sesion app no chequeada ***"),gg.paywall.init(e,!0)},te=function(e){gg.paywall.initNotConsent(e)},ie=function(e){gg.paywall.service.refreshAllCookies(e).then(().catch(()},re=function(e){const o=q().guid;if(!o)return void ie(e);const n=I(f),t=I(l),i={touch:cookies:;if(t||n){console.log("*** sesion app chequeada ***");const e=t&&!n;(e?i.cookies:i.touch)().then((function(o){return gg.paywall.service.refreshAppCookies(e?o:void 0,e?"cookie":"touch")})).catch(()}else console.log("*** sesion app no chequeada ***")};return{init:function(e){S()?T(e):function(e){var o=e||{};o.baseUrl=n().api.url,E(window.location.hostname)&&(o.baseUrl=o.customUrl||n().api.url),o.oAuthFlow=o.oAuthFlow||"popup",i=new gg.AccountsService(o),b(),setTimeout((function(){u.authToken&&u.loggedIn.boolean()&&(!u.refreshTime||u.refreshTime.val()<new Date/1e3)?i.checkBrowser().done((function(){A()?(x(),u.loggedIn.boolean()&&u.loggedIn.remove(),T()):P()})):P()}))}(e)},refresh:P,onLogged:function(e){M(e,"logged")},onUnlogged:function(e){M(e,"unlogged")},isLogged:G,getUser:q,show:Y,login:logout:function(){var e;S()?((e=gg.cookie.get(p))?gg.paywall.service.deleteSession(e):Promise.resolve()).then(().catch((function(){})):i.logout().done((function(){P()}))},getScreen:function(e){return t[e]},register:function(e,o,n){r.push({id:e,f:o,args:n}),c&&gg.registry.register(e,o,n)},cookieName:"_id_uid",evInit:function(e){gg.paywall.init(e)},evAppInit:evNotConsent:te,getService:function(){return i},getEvEnabled:S,reloadToEvLogin:z,evolokClearCookies:Z,didomiLogged:function(){return A()},evAppInitV2:function(e,o,n){if(j(n),!o)return;const t=ev.cookie.get(p);if(-1!==o.indexOf("evolok--")){if("anonimo"===(o=o.replace("evolok--","")))return void gg.paywall.init(e,!0);if(o===t)return void ne(e,o);oe(e,o)}else{if(t)return void ne(e,t);!function(e,o){gg.paywall.service.refreshAllCookiesWithLegacy(o).then((function(){A()&&(gg.paywall.init(e,!0),setTimeout((function(){D(!0)})))})).catch((function(e){}))}(e,o)}},fwdToAppInvalidSession:X,fwdToAppPaywall:K,calcPlatform:j,getCustomUserAgent:Q,getAppVersion:V,fwdToNativeApp:function(){return J("HOME")},evAppInitAdi:function(e,o){if(j(o),!e)return;const n=ev.cookie.get(p);if(-1!==e.indexOf("evolok--")){if("anonimo"===(e=e.replace("evolok--","")))return;if(e===n)return void re(e);ie(e)}else{if(n)return void re(n);!function(e){gg.paywall.service.refreshAllCookiesWithLegacy(e).then((function(){A()&&setTimeout(()})).catch(()}(e)}},fwdToAppLogin:ee,isEvolokCookiePresent:A,getMultitenantScriptConfig:n,getGGSite:o,getScriptConfig:e,getEvolokSessionId:function(){const e=q().authToken;return e&&S()?-1!==e.indexOf("evolok--")?e.replace("evolok--",""):ev.cookie.get(p):""},evAppNotConsent:function(e,o){if((o=o||{}).token&&-1!==o.token.indexOf("evolok--")&&"anonimo"===o.token.replace("evolok--",""))return void te(!0);o.onAuth&&"function"==typeof o.onAuth&&(o.onAuth(e,o.token,o.platform),o.onAuthTriggered=!0)},getUserType:fwdToSubscribe:function(e){!1===K()&&(e=e||gg.accounts.getMultitenantScriptConfig().base.url+"/suscripciones/suscribete.html?utm_source=lavanguardia&utm_medium=boton-suscripcion&utm_campaign=captacion&utm_content=header",ev.utils.redirect(e))},isApp:C}}();
gg.AccountsService=function(e){var n=function(n,r){var o=gg.util.url(e.baseUrl+n);if(e.lang&&(o.params.lang=e.lang),null!=r)for(var t in r)o.params[t]=r[t];for(var t in o.params)o.params[t]=encodeURIComponent(o.params[t]);return o.toString()},r=function(e){var n=new gg.AccountsServicePromise;return e(n),n.handler};return{login:function(e,o){var t={email:e,password:o};return r(function(e){gg.ajax.post(n("/user/login"),t,function(n){e.resolve(n)},{credentials:!0})})},oAuthLogin:function(o){return r(function(r){var t=n("/user/oauth/"+o);if("redirect"===e.oAuthFlow)window.location.href=t+"?redirect="+window.location.href;else if("popup"===e.oAuthFlow){var a=window.open(t,o,"popup=yes,alwaysRaised=yes");window.focus&&a.focus();var s=setInterval(1e3)}})},getInfo:function(){return r(function(e){gg.ajax.get(n("/user"),function(n){e.resolve(n)},{credentials:!0})})},signup:function(e){return e.sourceRef=e.sourceRef||window.location.href,r(function(r){gg.ajax.post(n("/user"),e,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},update:function(e){return e.sourceRef=e.sourceRef||window.location.href,r(function(r){gg.ajax.put(n("/user"),e,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},logout:function(){return r(function(e){gg.ajax.post(n("/user/logout"),{},function(n){e.resolve(n)},{credentials:!0})})},changePassword:function(e,o){return r(function(r){var t={password:e,oldPassword:o};gg.ajax.post(n("/user/password"),t,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},resetPassword:function(e,o){return r(function(r){var t={password:e},a=gg.util.url().params["auth-token"],s=a?{"auth-token":a}:{};gg.ajax.post(n("/user/password/"+o,s),t,function(e){r.resolve(e)},{credentials:!0,type:"json"})})},forgottenPassword:function(e){var o={email:e};return r(function(e){gg.ajax.post(n("/user/request/password-reset"),o,function(n){e.resolve(n)})})},requestVerification:function(){return r(function(e){gg.ajax.post(n("/user/request/verification"),{},function(n){e.resolve(n)},{credentials:!0})})},checkBrowser:function(){return r(function(e){gg.ajax.get(n("/user/ev/check/browser"),function(n){e.resolve(n)},{credentials:!0})})},utils:{setUserImage:function(e){if(void 0!==e.uid&&void 0!==e.lastUpdate){var o=n("/user/"+e.uid+"/img/"+e.lastUpdate);return r(function(n){e.callback&&gg.ajax.get(o,function(r){200==r.status?e.callback(o):e.callback(),n.resolve(r)},{credentials:!0})})}return null},getFullPath:n}}};
gg.AccountsServicePromise=function(){var s=!1,t=null,e={},n=null,i=null,u=null;this.done=function(t){return s?t(e):n=t,this},this.success=function(n){return s&&1==t?n(e):i=n,this},this.failure=function(n){return s&&0==t?n(e):u=n,this},this.resolve=function(r){if(s=!0,!0===r)t=!0;else{t=r.status>=200&&r.status<300;try{e=JSON.parse(r.responseText)}catch(s){}}n&&n(r.status,e),t&&i?i(e):!t&&u&&u(e)},this.handler={done:this.done,success:this.success,failure:this.failure}};
gg.ajax=function(){var e=function(e,n,o){t("GET",e,null,{},n,o)},n=function(e,n,r,i,u){var a="json"==(u=u||{}).type?"application/json":"application/x-www-form-urlencoded",s="json"==u.type?JSON.stringify(r):o(r);t(e,n,a,s,i,u)},t=function(e,n,t,o,r,i){i=i||{};var u=new XMLHttpRequest;u.open(e,n,!0),t&&u.setRequestHeader("Content-type",t),1==i.credentials&&(u.withCredentials=!0),i.headers&&Object.keys(i.headers).forEach(function(e){u.setRequestHeader(e,i.headers[e])}),u.onload=u.send(o)},o=function(e){var n=[];for(var t in e)n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")};return{get:e,post:function(e,t,o,r){n("POST",e,t,o,r)},put:delete:function(e,n,o){t("DELETE",e,null,{},n,o)},load:function(n,t){e(n,function(e){200==e.status&&(t.innerHTML=e.responseText,setTimeout(function(){for(var e=t.querySelectorAll("script"),n=0;n<e.length;n++){var o=e[n],r=document.createElement("script"),i=document.createTextNode(o.innerHTML);r.appendChild(i),o.parentNode.replaceChild(r,o)}},100))})},utils:{statusOk:url:function(e,n){for(var t in n)if(e.match(new RegExp("\\{"+t+"\\}")))e=e.replace("{"+t+"}",n[t]);else{var o=gg.util.url(e);o.params[t]=encodeURIComponent(n[t]),e=o.toString()}return e}}}}();
gg.Cookies=function(o,n){var e=n||{};for(var r in o)e[r]=function(o){return{val:function(){return gg.cookie.get(o)},boolean:function(){var o=this.val();return 1==o||"true"===o},set:remove:function(){gg.cookie.remove(o)}}}(o[r]);return e};
![.VIEW,!0),n.ArrayBuffer=x,n.DataView=w},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){t.exports=!r(120)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){t.exports=!r(8)&&!r(2)(function(){return 7!=Object.defineProperty(r(60)("divr)||l.push(t?[r,c[r]]:c[r]);return l}}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(.call(t,u=c[f++])&&n.push(u);return n}},function(t,n,r){varturn function(t,n){return i(e(t),n)}})},function(t,n,r){var e=r(10),i=r(35);r(21)("getPrototypeOf",function(ertyNames",function(){return r(92).f})},function(t,n,r){var e=r(4),i=r(27).onFreeze;r(21)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4),i=r(27).onFreeze;r(21)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(4);r(21)("isFrozen",function(t){return(0);e(e.S+e.F,"Object",{assign:r(93)})},function(t,n,r)on(){return"[object "+e(this)+"]"},!0)},function(t,n,r){varhis.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(0),i=r(97)d,d.constructor=v,r(11)(e,"Number",v)}},function(t,n,r){"use strict";var e=r(0),i=r(19),o=r(99),u=r(68),c=1..toFixed,a=Math.floor,f=[0,0,0,0,0,0],s="N++;-?r==n?r:n%2==1?p(t,n-1,r*t):p(t*t,n/2,r)};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(2)(fung:gn(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r,{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(0),i=r(98);e(e.S+e.F*(Number.p+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){van(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){vtion(t){return Math.log(t)/Math.LN2}})},function(t,n,r)ments.length>1?arguments[1]:void 0)}})},function(t,n,r){varll(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(12)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(12)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(12)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(12)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";r(12)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(12)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(12)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){"use strict";r(12)("italics",function(t){return tion(n){return t(this,"a","href",n)}})},function(t,n,r){"use strict";r(12)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";r(12)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(12)("sub",function(t){return fu hint");return i(e(this),"number"!=t)}},function(t,n,r){varn[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(0),i=r(22)(1);e(e.P+e.F*!r(16)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(22)(2);e(e.P+e.F*!r(16)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(22)(3);e(e.P+e.F*!r(16)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(0),i=r(105);e(e.P+e.F*!r(16)([].reduce,!0),"Array",{reduce:function(t){return i(this,in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){var e=r(0);e(e.P,"Array",{cgth>1?arguments[1]:void 0)}}),r(*!r(59).ABV,{DataView:r(84).DataView})},function(t,n,r){r(25)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint8",1,function(t){return ftion(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){r(25)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(25)("Float32",4,function(t){return frn i.set(t,n),!0}catch(t){return!1}}})},function(t,n,ruments[1]:void 0)}}),r(36)("includes")},function(t,n,w TypeError();n[g]=p}g++}y++}return g}},function(t,n,r){r(273),t.exports=r(7).String.padStart},function(t,n,r){"use strict";var e=r(0),i=r(117),o=r(57),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,ts.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){r(277),t.exports=r(7).String.trimLeft},function(t,n,r){"use strict";r(39)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){function(t,n,r){r(89)("asyncIterator")},function(t,n,r){r(283),t.exportsr=a(e,n=f[l++]))&&c(s,n,r);return s}})},function(t,n,r){r(285),t.exports=r(7).Object.values},function(t,n,r){var e=r(0),i=r(118)(!1);e(e.S,"ObjeB=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(299);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(301),i=r(306);t.exports=r(87)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(302),i=r(303),o=r(305),u=Object.defineProperty;n.f=r(87)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(86);t.exports=function(t){if(!e(t))throw TypeE"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(86),i=r(85).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){var e=r(86);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r={}.hasOwnProperty;t.exports=function(!0),Object.define!important; top: -1000px !important;"}}vL,this.options.verbose=!1it=window.document.body.avisibility||0==this.bait.offsetHProperties.style,s.src=r,f.append(s)})}},{key:"isAdblockDetected",value:function(){var t,n=(t=regeneratorRuntime.mark(function t(){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=2,t.next=5,fetch(new Request("https://pagead2.googlesyndicatien tryBlock m An Adblock must be active | ",t),n=!0});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),this.options.verbose&&console.info("Fetch request blocked. ADBlock is active | ",error),n=!0;case 11:return t.prev=11,t.abrupt("return",n);case 14:case"end":return t.stop()}},t,this,[[2,7,11,14]])}),function(){var n=this,e=arguments;return new Promise(function(i,o){var u=t.apply(n,e);function c(t){r(u,i,o,c,a,"next",t)}function a(t){r(u,i,o,c,a,"throw",t)}c(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"detectPrivateMode",value:function(){return new Promise(function(t){var n,r,e=function(){t(!0)},i=function(){t(!1)};if(!((n=/(?=.*(opera|chrome)).*/i.test(navigator.userAgent)&&navigator.storage&&navigator.storage.estimuncte")null,null),i()}catch(t){e()}}return!!t}()||((r=!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent))&&e(),r)))return i()})}}])&&e(n.prototype,i),t}(),window.EV=window.EV||{},window.EV.Dab=new i}]);
/**
 * @license ev-em.js v3.4.4 (Google One Tap more conf - 12:07 CEST - 2 May 2023)
 * (c) 2015-2023 Evolok, Inc. https://www.evolok.ext"===this.method&&(this.arg=u),v}},a}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(t){Function("r","regenerarableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects mu"Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writablrray.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}surable:!0,writable:!0}):e[t]=n,e}window.EV=window.EV||{},function(G){var r,F,u,d,o,m=new w,a=new w,n=!1,i=0,s=0,p={};window.addEventllTimeRequests(p.authorizeData)},1e lit("=");n[i[0]]=i[1]}return n[e]||""}G.Em={Event:{AD_AUTHORIZE:"ev.ad.authorize",PROFILE_ACCESS_RENDER_STATUS:"ev.ad.profile.access.render.status",GET_USER_PROFILE_SUCCESS:"ev.ad.get.user.profile.success",GET_USER_PROFILE_FAIL:"ev.ad.get.user.profile.fail",UPDATE_PROFILE_SUCCESS:"ev.em.profile.update.success",UPDATE_PROFILE_FAIL:"ev.em.profile.update.fail",GET_PROFILE_TEMPLATE_SUCCESS:"ev.em.profile.template.get.success",GET_PROFILE_TEMPLATE_FAIL:"ev.em.profile.template.get.fail",GET_PROFILE_DATA_SUCCESS:"ev.em.profile.data.get.success",GET_PROFILE_DATA_FAIL:"ev.em.profile.data.get.fail",DWELLTIME_CHECK:"ev.ad.dwelltime.check",DWELLTIME_WIDGETS_ENABLED:"ev.widgets.dwelltime.enabled",PAYWALL_MODAL_RENDERED:"ev.em.paywall.modal.rendered",NOTIFIER_MODAL_RENDERED:"ev.em.notifier.modal.rendered",PAYWALL_OPENED:"ev.em.paywall.opened",NOTIFIER_OPENED:"ev.em.notifier.opened",PAYWALL_SHOW_CTA:"ev.em.paywall.showCTA",NOTIFIER_SHOW_CTA:"ev.em.notifier.showCTA",PAYWALL_RENDER_READY:"ev.em.paywall.render.ready",NOTIFIER_RENDER_READY:"ev.em.notifier.render.ready",NOTIFIER_CLOSE:"ev.em.notifier.close",ARTICLE_DATA:"ev.em.article.data",ARTICLE_URL:"ev.em.article.url",CLOSE_ARTICLE_SHARING_MODAL:"ev.em.close.article.sharing.modal",SHARE_ARTICLE_SUCCESS:"ev.em.share.article.success",SHARE_ARTICLE_ERROR:"ev.em.share.article.error",OPEN_PRODUCT_SELECTION:"ev.em.open.product.selection",PRODUCT_SELECTION_LOADED:"ev.em.product.selection.loaded",SOCIAL_LOGIN_SUCCESS:"ev.em.social.login.success",SOCIAL_LOGIN_FAILED:"ev.em.social.login.failed",SESSION_REFRESH:"ev.em.session.refresh",SESSION_SAVED:"ev.em.user.session.saved",IDENTITY_LINK_AUTHENTICATION:"ev.em.identity.link.authentication",SOCIALS_LINK_AUTHENTICATION:"ev.em.socials.link.authentication",SOCIAL_LOGIN_ATTEMPTED_EXISTING_EMAIL:"social.login.existing.email.attempted",SOCIAL_LOGIN_ATTEMPTED_REQUIRES_AUTHENTICATION:"social.login.existing.email.authentication.required",USER_IDENTIFIED:"ev.em.user.identified",LOGOUT_SUCCESS:"ev.em.logout.success",LOGOUT_FAILED:"ev.em.logout.failed",SESSION_EXPIRED:"ev.em.session.expired"},on:function(e,t!1,{detail:t}HARE_function(){G.Emdefer=!0,docuj(e):t)i.mainSession.,G.Em.removeUserProfili()},e.ublish(G.Em.Event.LOGOUT_FAILED,e)})})},clearAllSessions:function(){G.Em.removeEVSession()},removeUserProfile:function(){sessionStorage.re_ss");loNot Compatible with cour browser does not support CORS."),e},getAuthResponse:function(){return m.promise},getSegmentResponse:function(){rGET_PROFILE_TEMPLATGET_PROFILE_DATA_SUCCESS,"re-render")}},updateAttributes:(t=_acase 16:case"end":return e.stop()}},e)})),function(e){retion error")},c.send(JSs(t),i++),i==s&&clearI:"none"}catch(e){r.e(e)}fdgets.notifie)?([,[{])s=json-v,"unknown connection error")},i.send()},assert:function(e,t){if(!e){if(t=t||"Assertion failed","undefined"!=typeof Error)throw new Error(t);throw t}},getUrl:function(){return F.url},showMeteredContent:function(){var e=document.getElementsByClassName("ev-meter-content");[].forEach.call(e,function(e){e.style,function(e){e.style.display="none"})}},setTimeout(function(){h(e,t){n.reject=t,n.resolve=e})}windon 200===e.status?e.json():null})}}]),n}()),window.customEleme{return e.apply(this,arguments)})}]),n}()),window.cusis.appendChild(this.mainParent))}}]),t}()),window.customEl{return t.apply(this,arguments)})}]),r}()),window.custoG.Em.paywallAndNotifierEvents(e)}}]),t}()),window.cticleId:this.articleId,email:e})}}]),t}()),G.Em.on(G.Em.Event.AD_AUTHORIZE,function(e){r=e})}(window.EV);
window.__evCurrentExecution={queue:[],pendingPromise:!1,workingOnPromise:!1,enqueue:function(e){__evCurrentExecution.queue.push({promise:e}),__evCurrentExecution.dequeue()},dequeue:function(){if(__evCurrentExecution.workingOnPromise)return!1;const e=__evCurrentExecution.queue.shift();if(!e)return!1;try{__evCurrentExecution.workingOnPromise=!0,e.promise.then((function(){__evCurrentExecution.workingOnPromise=!1,_mise=!1,__evCurrentExecution.dequeue()}))}catch(e){__evCurrentExecution.workingOnPromise=!1,__evCurrentExecution.dequeue()}return!0},isRenderEventPublished:!1,isNotifierRenderEventPublished:!1,isSegmentEventPublished:!1,detail:null,notifierDetail:null,isOnAuthEventPublished:!1,params:null,opts:null,response:null,isApp:!1},gg.paywall=function(){const e=gg.accounts.getMultitenantScriptConfig().evolok.api.url+"/acd/api/3.0";gg.accounts.getMultitenantScriptConfig().cookie.domain;var t=function(){var e="evolok:ev_session",t=function(){var e="hello",t=ev.storage.load("local",e);if(ev.utils.isEmpty(t)){return ev.storage.load("session",e)||ev.cookie.get(e)}return t}();for(var n in ev.cookie.remove("ev_ss",null,null),ev.cookie.remove("ex_ss",null,null),ev.storage.remove("session",e),ev.storage.remove("session","evolok:ev_profile"),ev.storage.remove("local",e),ev.storage.remove("local","hello"),t)n&&delete t[n]},n=function(e){gg.paywall.utils.addEventHandlerFromData(e,"click","data-referrer-strategy",(function(e,t){"supplier"===e.getAttribute(t)&&ev.commons.referrer.save()}))},o=function(e){document.addEventListener("paywall.opened",(function(t){var o=t.detail,i=null,r="REQUIRE_LOGIN"!==o.displayOn,a=gg.accounts.getGGSite();n(o.container),gg.paywall.utils.addEventHandlerFromData(o.container,"click","data-paywall",(function(t,n){const o=t.getAttribute(n),i=gg.accounts.getMultitenantScriptConfig().base.url;var r={products:i+_conf.evolok.products.url,link:i+_conf.evolok.linkNif.url,main:i}[o];if("login"!==o){if(r){var a=t.getAttribute("data-paywall-href");if(a&&(r=a),e){if(("undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"undefined"==typeof __evContext&&!gg.accounts.isEvolokCookiePresent())&&("products"===o||"link"===o)&&!0===gg.accounts.fwdToAppLogin())return;if("products"===o&&("undefined"==typeof __evContext||!1!==__evContext.isNativePurchaseEnabled)&&!0===gg.accounts.fwdToAppPaywall())return;if("main"===o&&!0===gg.accounts.fwdToNativeApp())return}ev.utils.redirect(r,"main"===o)}}else gg.accounts.reloadToEvLogin({ignoreSource:!0})})),i=o.isCustom?a+"-sw-consent":params&&"yes"===params.accessType?r?"pw-freemium":a+"-sw-freemium":r?"pw-metered":a+"-sw-metered",ev.gtm.source.save(i,{cookieEnabled:!0}),ev.gtm.pageview.conf("lightbox",r?"paywall":"signup-login");var s=ev.gtm.pageview.trigger("welcome",o.widgetName?o.widgetName:"");"undefined"!=typeof fbq&&fbq("trackCustom","VirtualPageView",{url:s})}))},i={notifier:function(e){e.closest("div[class*='ev-open-modal-notifier-']").remove();var t=ev.utils.find(document,"body");["ev-modals-notifier","modal-open-notifier"].forEach((function(e){t.removeClass(e)}))}},r=function(e){const t="consent",o={};o[t]=[];var r=function(e,n){o[t].includes(e)||(window.didomiEventListeners.push({event:e,listener:function(e){n(e)}}),o[t].push(e))};document.addEventListener("notifier.opened",(function(t){var o=t.detail,a="-";gg.accounts.getGGSite();n(o.container),gg.paywall.utils.addEventHandlerFromData(o.container,"click","data-paywall-notifier",(function(t,n){const o=t.getAttribute(n),a=gg.accounts.getMultitenantScriptConfig().base.url;var s={products:a+_conf.evolok.products.url,link:a+_conf.evolok.linkNif.url,main:a,custom:a}[o];if("login"!==o){if(s){var l=t.getAttribute("data-paywall-href");if(l&&(s=l),e){if(("undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"undefined"==typeof __evContext&&!gg.accounts.isEvolokCookiePresent())&&("products"===o||"link"===o)&&!0===gg.accounts.fwdToAppLogin())return;if("products"===o&&("undefined"==typeof __evContext||!1!==__evContext.isNativePurchaseEnabled)&&!0===gg.accounts.fwdToAppPaywall())return;if(("main"===o||"custom"===o&&!l)&&!0===gg.accounts.fwdToNativeApp())return}ev.utils.redirect(s,"main"===o)}if("consent-agreetoall"===o){if(!0===ev.app.fwdToConsentAgreeToAll())return;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.setUserAgreeToAll()}))}if("consent-showpreferences"===o){if(!0===ev.app.fwdToConsentShowPreferences())return;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.preferences.show()}))}if("consent-showvendors"===o){if(!0===ev.app.fwdToConsentShowVendors())return;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.preferences.show("vendors")}))}"consent-showpreferences"!==o&&"consent-showvendors"!==o||(r("preferences.clickclose",(function(e){gg.paywall.utils.isSubscriptionRequiredByCMP()||i.notifier(t)})),r("preferences.clicksavechoices",(function(e){gg.paywall.utils.isSubscriptionRequiredByCMP()||i.notifier(t)}))),"close"!==o&&"consent-agreetoall"!==o||i.notifier(t)}else gg.accounts.reloadToEvLogin({ignoreSource:!0})}));const s=[{types:["homepage"],screen:"homepage"},{types:["section-page","section-page-opinion"],screen:"section-page"},{types:["story-reportage","story-video","la-contra","lacontra","story","opinion","topics"],screen:params.articleId||"-"}];params=params||{};for(var l=0;l<s.length;l++){const e=s[l];if(e.types.includes(params.webtype||"")){a=e.screen;break}}ev.gtm.source.save(params.webtype||""),ev.gtm.pageview.conf("lightbox","notifier"),ev.gtm.pageview.trigger(a,o.widgetName?o.widgetName:"")}))},a=function(e,t){t=t||{};e&&(t.hasOwnProperty("type")&&"notifier"===t.type?function(e,t){if(e.content){var n=`\n                <div class="modal show fade ev ev-open-modal-notifier-${e.displayOn} in" id="${e.widgetName}">\n                    <div class="modal-dialog modal-${e.modalSize}">\n                        <div class="modal-content">\n                            <div class="ev widget-container">\n                                ${e.content}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;if(!e.hasOwnProperty("modal")||!0===e.modal||"undefined"==typeof __evContext){var o=ev.utils.find(document,"body");["ev-modals-notifier","modal-open-notifier"].forEach((function(e){o.addClass(e)})),o.append(n),e.container=o.getFirst()}t.ignoreOnNotifierOpened||document.dispatchEvent(new CustomEvent("notifier.opened",{detail:e}))}}(e,t):function(e,t){if(t=t||{},e){var n=`\n\t\t\t\t<div class="modal show fade ev ev-open-modal-paywall-${e.displayOn} in">\n\t\t\t\t\t<div class="modal-dialog modal-${e.modalSize}">\n\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t<div class="ev widget-container">\n\t\t\t\t\t\t\t\t${e.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;if(e.hasOwnProperty("modal")&&!0!==e.modal&&"undefined"!=typeof __evContext){if(!e.articleContainer){var o=ev.utils.find(document,".main-article-container > .generated.in-view").getFirst();e.articleContainer=o||ev.utils.find(document,".main-article-container > .article-default").getFirst()}if(e.container=e.articleContainer,ev.utils.find(e.container,".modal.ev").getFirst())t.ignoreOnPaywallOpened=!0;else{var i=null;try{var r=(new DOMParser).parseFromString(n,"text/html"),a=ev.utils.find(r,"div.evl-paywall__container").getFirst();i=a.getAttribute("data-blurparagraph")}catch(e){}if(null!=i){var s=!1,c=0;ev.utils.find(e.container,".article-modules >*").asArray().forEach((function(e){s?e.style.display="none":"paragraph"==e.className&&++c==i&&(e.className+=" evl-payw-content",s=!0)}))}else ev.utils.find(e.container,".article-modules >*:not(.trinityAudioPlaceholder)").first().addClass("evl-payw-content"),ev.utils.find(e.container,".article-modules >*:not(.trinityAudioPlaceholder):not(.evl-payw-content)").hide();ev.utils.find(e.container,".article-modules").append(n)}}else{var u=ev.utils.find(document,"body");["ev-modals","modal-open"].forEach((function(e){u.addClass(e)})),u.append(n),e.container=u.getFirst()}t.ignoreOnPaywallOpened||document.dispatchEvent(new CustomEvent("paywall.opened",{detail:e})),__evCurrentExecution.opts.notifier.enabled&&l(__evCurrentExecution.response,__evCurrentExecution.isApp)}}(e,t))},s=function(e){if("undefined"!=typeof __evContext&&!__evContext.isApp&&((__evContext.dab||{}).active&&e&&"1"!==ev.cookie.get("_pac")))return w(),!0;return!1},l=function(e,t){if(!0!==__evCurrentExecution.opts.notifier.sectionExempted){var n=e.segments||[],o=e.sessionId||e.restoredSessionId,i=e.deviceId||ev.cookie.get("ev_did"),r=gg.accounts.getMultitenantScriptConfig().engagementGroup||"Default",s=0,l=0,c=!1,u=e.hasOwnProperty("loggedOut")&&0==e.loggedOut,d=null;"ALLOW_ACCESS"==e.result?e.hasOwnProperty("activeMeter")&&(d=e.activeMeter):e.hasOwnProperty("exceededMeter")&&(d=e.exceededMeter),d&&d.hasOwnProperty("count")&&(s=d.count),d&&d.hasOwnProperty("max")&&(l=d.max),d&&d.hasOwnProperty("viewed")&&(c=d.viewed),function(e,t,n,o,i,r,s,l){gg.paywall.service.getNotifierTemplate(e,t,n,o,i,r,s,l).then((function(e){var t={type:"notifier"};__evCurrentExecution.notifierDetail=e,e.hasOwnProperty("widgetName")&&ev.utils.find(document,"div#"+e.widgetName).getFirst()||("undefined"!=typeof __evContext&&e.hasOwnProperty("autoRender")&&!1===e.autoRender?(document.er.showCTA",(function(e){a(e.detail,t)})),document.dispatchEvent(new CustomEvent("ev.notifier.render.ready",{detail:__evCurrentExecution.notifierDetail})),__evCurrentExecution.isNotifierRenderEventPublished=!0):a(e,t))}))}(o,i,r,s,l,c,n,u)}},c=function(e){e=e||[],document.dispatchEvent(new CustomEvent("ev.user.segments.ready",{detail:e})),__evCurrentExecution.isSegmentEventPublished=!0},u=function(e,t){var n=e.segments||[];if(function(e){try{const o="undefined"!=typeof __evContext&&__evContext.segmentCDPattern?__evContext.segmentCDPattern:"^cds";var t=e.filter((function(e){return e.toLowerCase().match(o)}));t.length>0&&dataLayer.push({evolokSegments:t.join(",")}),ev.storage.save("local","evolokSegments",t.join(","));const i="undefined"!=typeof __evContext&&__evContext.segmentCDHPattern?__evContext.sion(e){return e.toLowerCase().match(i)}));n.length>0&&dataLayer.push({evolokSegmentsHit:n.join(",")}),gg.accounts.didomiLogged()&&ev.gtm.push("evolok","segments",e.join(","),!1)}catch(e){console.log("Error: Could not process user segments."+(e.message?" Reason: "+e.message:""))}c(e)}(n),"ALLOW_ACCESS"!==e.result){"undefined"!=typeof __evContext&&__evContext.consent&&__evContext.consent.notifierRequired&&(!gg.paywall.utils.isSubscriptionRequiredByCMP()||__evCurrentExecution.opts.notifier.enabled&&"ALLOW_ACCESS"===e.result||l(e,t));var o=e.hasOwnProperty("loggedOut")&&0==e.loggedOut,i=p(e);if(!t||"undefined"!=typeof __evContext&&-1!==__evContext.token.indexOf("anonimo")||"REQUIRE_LOGIN_WITH_ENTITLEMENT"!==i&&"REQUIRE_LOGIN"!==i||!0!==gg.accounts.fwdToAppInvalidSession()){var r=e.sessionId||e.restoredSessionId,s=e.deviceId||ev.cookie.get("ev_did"),u=gg.accounts.getMultitenantScriptConfig().engagementGroup||"Default",d=e.articleContainer;d&&ev.utils.find(d,".modal.ev").getFirst()||"undefined"!=typeof __evContext&&"REQUIRE_LOGIN"!==i&&!0===__evCurrentExecution.opts.paywall.sectionExempted||function(e,t,n,o,i,r,s){gg.paywall.service.getPaywallTemplate(e,t,n,o,i,r).then((function(e){e.articleContainer=s,__evCurrentExecution.detail=e,"undefined"!=typeof __evContext&&e.hasOwnProperty("autoRender")&&!1===e.autoRender?(documentwall.showCTA",(function(e){a(e.detail)})),document.dispatchEvent(new CustomEvent("ev.paywall.render.ready",{detail:__evCurrentExecution.detail})),__evCurrentExecution.isRenderEventPublished=!0):a(e)}))}(i,n,r,s,u,o,d)}}else __evCurrentExecution.opts.notifier.enabled&&l(e,t)},d=function(e,t){__evCurrentExecution.opts.paywall.enabled?u(e,t):__evCurrentExecution.opts.notifier.enabled&&l(e,t)},g=function(e,t){if(__evCurrentExecution.opts=function(e,t){var n={authorization:{enabled:!0},notifier:{enabled:!1,sectionExempted:!1},paywall:{enabled:!0,sectionExempted:!1}};if(void 0!==e){if(!1===gg.paywall.authorize.isWebtypeAllowed(e,t))return n.authorization.enabled=!1,n;!1===gg.paywall.authorize.isPaywallAllowed(e,t)&&(n.paywall.enabled=!1),!0===gg.paywall.authorize.isSectionExemptedFromPaywall(e,t)&&(n.paywall.sectionExempted=!0),!0===gg.paywall.authorize.isNotifierAllowed(e,t)&&!0===gg.paywall.authorize.isUsertypeNotifierAllowed(e,t)&&(n.notifier.enabled=!0),!0===gg.paywall.authorize.isSectionExemptedFromNotifier(e,t)&&(n.notifier.sectionExempted=!0)}return n}(window.__evContext,e),__evCurrentExecution.params=Object.assign({},e),!1!==__evCurrentExecution.opts.authorization.enabled){var n=function(e){if(__evCurrentExecution.response=e,__evCurrentExecution.isApp=t,__evCurrentExecution.detail=null,__evCurrentExecution.notifierDetail=null,__evCurrentExecution.isSegmentEventPublished=!1,"GaaMetering"in window&&gg.googleShowcase.hasGAAParams())try{gg.googleShowcase.setUserState(e),__evCurrentExecution.googleShowcase.evResponse=e,document.addEventListener("aywallEventPublished=!0,d(e.detail,t))})),gg.googleShowcase.init()}catch(n){console.log("Google Showcase: init aborted"),d(e,t)}else d(e,t)},o=function(){console.log("** paywall ** Rejected!")},i=function(){if("undefined"!=typeof __evContext){if(s(e.adblock))return;__evCurrentExecution.enqueue(gg.paywall.authorize.init(e,n,o,__evContext.articleContainer).promise)}else EV.Em.authorize(JSON.stringify(e),n,o)};void 0!==t.adblock,e.incognito=t.incognito,i()}))}else c()},v=function(e){var t={},n="undefined"!=typeof __evContext&&__evContext.dab?__evContext.dab:{};"undefined"!=typeof __evContext&&n.initit.adbloc).then((function(n){t.incognito=n,e(t)})):setTimeout((function(){t.adblock=!1,t.incognito=!1,e(t)}))},p=function(e){return e.requireEntitlement?"REQUIRE_LOGIN_WITH_ENTITLEMENT":"REQUIRE_LOGIN"==e.result?"REQUIRE_LOGIN":"REQUIRE_ENTITLEMENT"},f=function(e){if("undefined"!=typeof __evContext){var t=__evContext.dab||{};if(t.initialized||__evContext.isApp)return;if(void 0!==e&&void 0!==t.exemptedWebtypes&&t.exemptedWebtypes.includes(e.webtype))return void(t.initialized=!1);t.active&&t.adServiceURL&&(EV.Dab.init({adServiceURL:t.adServiceURL}),t.initialized=!0)}},m=function(e,t){f(e),v((function(n){"undefined"!=typeof __evContext&&!1===gg.paywall.authorize.isWebtypeAllowed(__evContext,e)||s(n.adblock)||t&&"function"==typeof t&&t()}))},w=function(){gg.paywall.service.getDabNotifier().then((function(e){a({displayOn:"ADB_DETECTION",modalSize:"lg",content:e,modal:!0,isCustom:!0},{ignoreOnPaywallOpened:!0})}))},y=function(){try{window.EV=window.EV||{},EV.Event=EV.Event||{on:function(e,t){chEvent(new CustomEvent(e,{detail:t}))}},ev.events()}catch(e){console.error("Error occurred initializing events",e)}};return{init:function(i,a){y(),window.__evAuthConfig={url:e,sidCookieDomain:gg.accounts.getMultitenantScriptConfig().cookie.domain},EV.Em.init(function(e,t,n){try{var o="undefined"==typeof __evContext?{}:__evContext.googleOneTap||{};if(gg.accounts.isLogged()||n||!o.active||!t.webtype||"string"!=typeof t.webtype||!o.webtypesAllowed||!Array.isArray(o.webtypesAllowed)||!o.webtypesAllowed.includes(t.webtype))return e;var i={channel:"WEB",realmName:"default_realm",serviceName:"social",icDomain:ev.accounts.getMultitenantScriptConfig().evolok.api.url.replace(/https:\/\//g,"")+"/ic/api",enableGoogleOneTap:!0,googleClientId:ev.accounts.getMultitenantScriptConfig().social.google.key,socialAttributeMapping:{email_address:"email",first_name:"firstName",last_name_first:"lastName"},autoPopulate:!0,autoLinkLoginRedirectAutomatic:!1,googleGenericConf:{cancel_on_tap_outside:!1}};o.autoLinkLogin&&(i.authSchemeName="default"),EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_SUCCESS,(function(e){const t=(e.detail||{}).response||{},n=void 0!==t.socialAccountCreated&&t.socialAccountCreated,o={isSocial:!0,isRegister:n,isShowcase:!1};ev.gtm.source.save("googleonetap"),ev.gtm.pageview.conf("lightbox","signup-login"),n&&ev.gtm.pageview.trigger("thanks","google"),ev.gtm.pageview.trigger("login-ok","google"),ev.seterUserTy((function(e){window.location.reload()}))})),EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_ATTEMPTED_REQUIRES_AUTHENTICATION,(function(e){ev.gtm.source.save("googleonetap"),gg.accounts.reloadToEvLogin({ignoreSource:!0})})),EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_FAILED,(function(e){ev.gtm.source.save("googleonetap"),gg.accounts.reloadToEvLogin({ignoreSource:!0})}));const r=ev.utils.find(document,"body"),a="\n                <style>\n                    #credential_picker_container {\n                        top: 145px!important;\n                    }\n                </style>\n            ";return r.append(a),Object.assign({},e,i)}catch(e){}return e}(window.__evAuthConfig,i,a)),f(i),document.addEventListener("session.cleanup",(function(){gg.accounts.evolokClearCookies(),t(),gg.accounts.refresh()})),o(a),r(a),n(),i&&(!function(e){const t="evolok:thirdPartySegment";try{if("undefined"==typeof __evContext)return!1;const n=__evContext.delegationToThirdParty?Object.assign({},__evContext.delegationToThirdParty):{};if(!n.active||!n.facet||!Array.isArray(n.facet))return!1===n.active&&gg.paywall.utils.isPresentInStorage(t,"local")&&ev.storage.remove("local",t),!1;if(!1===n.ignoreSegmentOnStorage&&gg.paywall.utils.isPresentInStorage(t,"local"))return!1;if(n.facet.includes("web")&&!e||n.facet.includes("app")&&e)return!0}catch(e){}return!1}(a)?g(i,a):(document.addEventListener("ev.paywall.onAuth.trigger",(function(e){g(e.detail,gg.accounts.isApp())})),document.dispatchEvent(new CustomEvent("ev.paywall.onAuth.ready",{detail:i})),__evCurrentExecution.params=Object.assign({},i),__evCurrentExecution.isOnAuthEventPublished=!0))},initNotConsent:function(e){m({},(function(){o(e),gg.paywall.service.getNotConsentTemplate().then((function(e){a({displayOn:"REQUIRE_LOGIN",modalSize:"lg",content:e,modal:!0,isCustom:!0})}))}))},verifyAuthorization:g,triggerDabDetection:+)>)/gi,"").replace(/&nbsp;/gi," "):""},t=fun(t){return e(t).split("/").filter((e=>e))},n=function(e,t){if(void 0!==window[t+"Storage"])try{return window[t+"Storage"].getItem(e)}catch(e){return console.warn("Could not retrieve the cookie in "+t+" storage - maybe the browser's running on an environment with restricted access?"),""}else o(e)&&ev.cookie.get(e)},o=function(e){return!!ev.cookie.get(e)};return{addEventength?Array.prototype.slice.call(e):[]}(ev.utils.find(e||document,`[${n}]`).get());i.length&&i.forEach((function(e){e.addEventListener(t,(function(){o(e,n)}))}))},removeHash:e,getSections:t,getCategory:function(e){var n=t(e);if(n.length<2)rer o=n.shift();return n.filter((e=>e!==o)).join("/")},getDate:function(e){if(!e)return"";e=e.replace(/-/g,"/");var t=new Date(e),n=oor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+"T"+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())+o+i(n/60)+":"+i(n%60)},getAccessType:function(e){return e?"limitado-registro"===e?"yes":"abierto-libre"===e?"no":void 0:"no"},getAuthor:functi e(t).split(/\||\,/gpeof Error)throw new Error(t);throw t}},storeInStorage:function(e,t,n,o,i){var r=new Date;if(r.setDate(r.getDate()+(n||0)),void 0!==window[o+"Storage"])try{window[o+"Storage"].setItem(e,t)}catch(e){console.warn("Could not store in "+o+" storage - maybe the browser's running on an environment with restricted access?")}else document.cookie=e+"="+encodeURIComponent(t)+";expires="+r.toUTCString()+"; path=/"+(i?";domain="+i:"InStorage:function(e,t){return!!n(e,t)},isCookiePresent:o,getRegisteredValue:function(e){var t=void 0;if(e)try{e=+e;var n=new Date(e),o=new Date;const i=Math.abs(o-n),r=Math.ceil(i/864e5);r<=15?t=0:r&&(t=Math.ceil(r/30))}catch(e){t=0}return t},isSubscriptionRequiredByCMP:function(e){return"function"==typeof gg.didomi.isSubscriptionRequiredByPurposes&&gg.didomi.isSubscriptionRequiredByPurposes(e)||"function"==typeof gg.didomi.isSubscriptionRequiredByVendors&&gg.didomi.isSubscriptionRequiredByVendors(e)}}}(),gg.paywall.service=function(){const e=gg.accounts.getMultitenantScriptConfig().evolok.api.url,t=gg.accounts.getMultitenantScriptConfig().base.url,n=e+"/ic/api",o="registration";var i=function(e,t){var n=gg.util.url(e);if(null!=t)for(var o in t)n.params[o]=t[o];for(var o in n.params)n.params[o]=encodeURIComponent(n.params[o]);return n.toString()};return{getPaywallTemplate:function(e,t,n,o,r,a){var s=EV.Em.getUrl()+"/widgets/templates/paywall",l={displayOn:e,segments:t,groupName:r,loggedIn:a,brand:EV.Em.brand},c={ev_sid:n,ev_did:o};return ev.ajax.post(i(s,c),l,{type:"json"})},getNotConsentTemplate:function(){const e=t+"/suscripciones/signNoConsent";return ev.ajax.get(i(e),{ignoreParsing:!0})},getUser:function(e){var t=n+"/userProfile/"+e.guid,o=e.mainSession.sessionId;return ev.ajax.get(i(t),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service=registration evolok.api.sessionId="+o}})},getUserByGuid:function(e,t){var o=n+"/userProfile/"+e;return ev.ajax.get(i(o),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service=client_profile evolok.api.sessionId="+t}})},getSession:function(e){var t=n+"/session/"+e;return ev.ajax.get(i(t),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+o+" evolok.api.sessionId="+e}})},deleteSession:function(e){var t=n+"/session/"+e;return ev.ajax.delete(i(t),{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+o+" evolok.api.sessionId="+e}})},refreshCookies:function(e,n){var o=t+"/perfil/user/ev/check/ev-browser/"+n;return ev.ajax.post(i(o),e,{type:"json",credentials:!0})},refreshAppCookies:function(e,n){var o=t+"/perfil/user/ev/check/ev-app/"+n;return ev.ajax.post(i(o),e,{type:"json",credentials:!0})},refreshAllCookies:function(e){var n=t+"/perfil/user/ev/check/cookies";return ev.ajax.post(i(n),{sessionId:e},{credentials:!0})},refreshAllCookiesWithLegacy:function(e){var n=t+"/perfil/user/ev/check/app";return ev.ajax.post(i(n),{"auth-token":e},{credentials:!0})},touchSession:function(e){var t=n+"/session/"+e+"/touch";return ev.ajax.post(i(t),{},{headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+o}})},getExternalIntegrationToken:function(e){var n=t+"/perfil/user/ev/integrations/v1/token";return ev.ajax.post(i(n),e,{type:"json",credentials:!0})},getDabNotifier:function(){const e=t+"/suscripciones/dab-notifier";return ev.ajax.get(i(e),{ignoreParsing:!0})},getNotifierTemplate:function(e,t,n,o,r,a,s,l){var c=EV.Em.getUrl()+"/widgets/templates/notifier",u=(EV.Em.brand,{groupName:n,count:o,total:r,viewed:a,segments:s,loggedIn:l}),d={ev_sid:e,ev_did:t};return ev.ajax.post(i(c,d),u,{type:"json"})}}}(),gg.paywall.authorize=function(){var e=function(e,t){var n=new Date;n.setDate(n.getDate()+1461),ev.cookie.set(e,t,(n.getTime()-(new Date).getTime())/1e3,__evAuthConfig.sidCookieDomain)},t=function(t){var n="";if(gg.paywall.utils.isCookiePresent(t))n=ev.cookie.get(t),gg.paywall.utils.storeInStorage(t,n,0,"local",__evAuthConfig.sidCookieDomain);else if(gg.paywall.utils.isPresentInStorage(t,"local")){var o=gg.paywall.utils.getFromStorage(t,"local");e(t,o),__evAuthConfig.meterHD&&(n=o)}return n};return{init:function(n,o,i,r){gg.paywall.utils.assert(n,"Parameters should not be empty!"),gg.paywall.utils.assert(o,"Success callback should not be empty!"),gg.paywall.utils.assert(i,"Error callback should not be empty!");var a=Object.assign({},n),s="evolok:ev_access_token";if(!n.referrer&&document.referrer&&(a.referrer=document.referrer),!n.title&&document.title&&(a.title=document.title),!n.article_url&&window.location.href&&(a.article_url=window.location.href),(__evAuthConfig.brand||n.site)&&(a.brand=n.site?n.site:__evAuthConfig.brand),n.registered&&(a.registered=n.registered),a.ev_sid=t("ev_sid"),a.ev_did=t("ev_did"),gg.paywall.utils.isCookiePresent("ev_ss")&&(a.ev_ss=ev.cookie.get("ev_ss")),gg.paywall.utils.isPresentInStorage(s,"local"))try{const e=ev.storage.load("local",s);e.expires&&new Date/1e3>e.expires?ev.storage.remove("local",s):a.evAccessToken=e.accessCode}catch(e){}var l=__evAuthConfig.url+"/authorize/json",c=!1,u=function(){c=!0};return{promise:new Promise((function(t,n){var s=new XMLHttpRequest;s.withCredentials=!0,s.open("POST",l,!0),s.setRequestHeader("Content-type","application/json"),s.onload=function(){var a=s.status>=200&&s.status<300,l={};try{l=JSON.parse(s.responseText)}catch(e){}if(r&&(l.articleContainer=r),a){t(l);const n=ev.cookie.get("ev_ss");l.sessionKeys&&(l.sessionKeys.ev_sid&&l.sessionKeys.ev_sid!==ev.cookie.get("ev_sid")&&e("ev_sid",l.sessionKeys.ev_sid),l.sessionKeys.ev_did&&l.sessionKeys.ev_did!==ev.cookie.get("ev_did")&&e("ev_did",l.sessionKeys.ev_did)),l.deviceId=l.sessionKeys?l.sessionKeys.ev_did:ev.cookie.get("ev_did"),EV.Em.paywallAndNotifierEvents(l),"REQUIRE_LOGIN"===l.result&&n&&EV.Event.publish("session.cleanup","Session has expired"),"ALLOW_ACCESS"!==l.result&&EV.Em.hideMeteredContent(),o(l)}else i(l),n(l)},s.onerror=function(e){n(s.response),e?i(e):i(s.response,"unknown connection error")},s.onabort=function(e){n(s.response),e?i(e):i(s.response,"unknown connectify(a)),u=function(){c||(s.abort(),n())},c&&u()})).th,e})).catch((function(e){return c=!0,e})),cancel:u}},isWebtypeAllowed:function(e,t){if(t=t||{},!0===(e=e||{}).triggerStop)return!1;if(!t.webtype||"string"!=typeof t.webtype||!e.webtypesAllowed||!Array.isArray(e.webtypesAllowed))return!0;for(i=0;i<e.webtypesAllowed.length;i++)if(e.webtypesAllowed[i]===t.webtype)return!0;return!1},isSectionExemptedFromPaywall:function(e,t){if(e=e||{},"yes"===(t=t||{}).accessType)return!1;if(!t.section||"string"!=typeof t.section||!e.exemptedSections||!Array.isArray(e.exemptedSections))return!1;for(i=0;i<e.exemptedSections.length;i++)if(e.exemptedSections[i]===t.section)return!0;return!1},isSectionExemptedFromNotifier:function(e,t){if(e=e||{},!(t=t||{}).section||"string"!=typeof t.section||!e.exemptedSectionsNotifier||!Array.isArray(e.exemptedSectionsNotifier))return!1;for(i=0;i<e.exemptedSectionsNotifier.length;i++)if(e.exemptedSectionsNotifier[i]===t.section)return!0;return!1},isPaywallAllowed:function(e,t){if(e=e||{},!(t=t||{}).webtype||"string"!=typeof t.webtype||!e.webtypesAllowedPaywall||!Array.isArray(e.webtypesAllowedPaywall))return!0;for(i=0;i<e.webtypesAllowedPaywall.length;i++)if(e.webtypesAllowedPaywall[i]===t.webtype)return!0;return!1},isNotifierAllowed:function(e,t){if(e=e||{},!(t=t||{}).webtype||"string"!=typeof t.webtype||!e.webtypesAllowedNotifier||!Array.isArray(e.webtypesAllowedNotifier))return!1;for(i=0;i<e.webtypesAllowedNotifier.length;i++)if(e.webtypesAllowedNotifier[i]===t.webtype)return!0;return!1},isUsertypeNotifierAllowed:function(e,t){if(t=t||{},!(e=e||{}).usertypeNotifierAllowed||!Array.isArray(e.usertypeNotifierAllowed))return!1;var n=gg.accounts.getUserType();if(!n)return!0;for(i=0;i<e.usertypeNotifierAllowed.length;i++)if(e.usertypeNotifierAllowed[i]===n)return!0;return!1}}}();
gg.EvlAccountsService=function(n){var t=function(t,e){var o=gg.util.url(n.baseUrl+t);if(n.lang&&(o.params.lang=n.lang),null!=e)for(var r in e)o.params[r]=e[r];for(var r in o.params)o.params[r]=encodeURIComponent(o.params[r]);return o.toString()},e=function(n){var t=new gg.Accounts+" is not supported with Evolok impl")};return{requestVerification:function(){return e(function(n){gg.ajax.post(t("/user/ev/request/verification"),{},function(t){n.resolve(t)},{credentials:!0})})},recaptchaVerification:function(n){var o={catpchaResponse:n};return e(function(n){gg.ajax.post(t("/user/ev/verification/recaptcha"),o,function(t){n.resolve(t)},{credentials:!0})})},login:function(){o("login()")},oAuthLogin:function(){o("oAuthLogin()")},getInfo:function(){return e(function(n){gg.ajax.get(t("/user"),function(t){n.resolve(t)},{credentials:!0})})},signup:function(){o("signup()")},update:function(n){return e(function(e){gg.ajax.post(t("/user/ev/update/from-legacy-data"),n,function(n){e.resolve(n)},{credentials:!0,type:"json"})})},logout:function(){o("logout()")},changePassword:function(){o("changePassword()")},resetPassword:function(){o("resetPassword()")},forgottenPassword:function(){o("forerImage:function(){o("setUserImage()")},getFullPath:treion(e){return Number(e)?t(Number(e)):e},t=function(e){return e>=1e14||e<=-1e14?Math.floor(e/1e6):e>=1e11||e<=-3e10?Math.floor(e/1e3):e},a=function(){console.log("Google Showcase: unlockArticle called");var e=ev.utils.find(document,"body");["ev-modals","modal-open"].forEach((function(o){e.removeClass(o)}))},g=function(){console.log("Google Showcase: showPaywall called"),document.dispatchEvent(new CustomEvent("ev.paywall.googleShowcase.showPaywall",{detail:__evCurrentExecution.googleShowcase.evResponse}))},n=function(){gg.accounts.show("login","login",{})};return{hasGAAParams:function(){return!!(gg.util&&"function"==typeof gg.util.getParams&&gg.util.getParams("gaa_at")&&gg.util.getParams("gaa_ts")&&gg.util.getParams("gaa_n")&&gg.util.getParams("gaa_sig"))&&("na"!==gg.util.getParams("gaa_at")&&!(parseInt(gg.util.getParams("gaa_ts"),16)<Date.now()/1e3))},setUserState:function(e){var t=gg.accounts.getUser(),a=t.uid||"",g=gg.accounts.getUserType(),n="",i=o(t.registrationDate)||"",s=o(t.subscriptionDate)||"";"ALLOW_ACCESS"===e.result&&("registrado"===g?(n="METERING",i=i||1640991600):"acceso_digital"===g?(n="SUBSCRIBER",i=i||1640991600,s=s||1640991600):n="METERING"),__evCurrentExecution.googleShowcase={userState:{id:a,registrationTimestamp:i,subscriptionTimestamp:s,granted:"ALLOW_ACCESS"===e.result,grantReason:n}}},getUserState:e,init:function(){console.log("Google Showcase: init called");var o=ev.accounts.getMultitenantScriptConfig(),t=e(),i=new Promise((Showcase: getLoginPromise called"),n()}))})),s=new Promise((e=>{GaaMetering.getGaaUserPromise().then((e=>{console.log("Google Showcase: getGaaUserPromise called");var o={client_id:e.client_id,jwt:e.credential};ev.service.getSocialGoogleSession(o).then((e=>{console.log("Google Showcase session: ",e);var o=Boolean(e&&e.socialAccountCreated),t={isRegister:o,isSocial:!0,isShowcase:!0},a={};"app"===gg.util.getParams("facet")&&(a.facet="app");ev.gtm.source.save("googleshowcase"),ev.gtm.pageview.conf("lightbox","signup-login"),o&&ev.gtm.pageview.trigger("thanks","google"),ev.gtm.pageview.trigger("login-ok","google"),ev,e).then((e=>{window.location.)).catch((e=>{n()}))})).catch((e=>{n()}))}))}));!1!==GaaMetering.init({googleApiClientId:o.social.google.key,userState:e(),allowedReferrers:["www.lavanguardia.com"],handleLoginPromise:i,registerUserPromise:s,unlockArticle:a,showPaywall:g})&&t.id&&!t.granted||g(),(self.SWG=self.SWG||[]).push((function(e){e.getEventManagonsole.log("Google Showcase Event:",e)}))}))}))}}}();
gg.campaigns=function(){const e=gg.accounts.getScriptConfig().api.club.loquiero.url,t=gg.accounts.getScriptConfig().api.club.loquiero.key,o="club_offer_container_popup",n="modal-club";var r=function(e){[...document.querySelectorAll(e)].forEach((e=>{e.addEventListener("click",(()=>{try{m(e.getAttribute("data-id"))}catch(e){console.log("Error: "+e)}}))}))},a=function(e,t){[...document.querySelectorAll(e)].forEach((e=>{t&&!0===t?d(e.getAttribute(ck",(()=>{d(e.getAttribute("data-id"))}))}))},i=function(){var e=this.getAttribute("data-loquiero-href");ev.commons.referrer.save(),ev.utils.redirect(e,!1)},d=function(e){try{p(e)}catch(t){console.log("OpenPromo "+e+" "+t)}},c=function(e){parent=this.closest("div.modal-club"),element=parent.closest(document.getElementById(e);return s(t)},s=function(e){return e&&("block"!=e.style.display?e.style.display="block":e.style.display="none"),e},u=function(e){const t=document.createElement("div");var d;switch(document.body.appendChild(t),t.classList.add(o),t.innerHTML=e.page,d="div."+o+" .close-modal",[...document.querySelectorAll(d)].forEach((e=>{e.addEventListener("click",c,!1)})),e.type){case"static":!function(e){[..((e=>{e.addEventListener("click",i,!1)}))}("div."+o+" a[data-btn-link]"),l(n);break;case"dynamicList":a("div."+o+" button[data-btn-promo]"),r("div."+o+" button[data-btn-offer]"),l(n);break;case"dynamic":r("div."+o+" button[data-btn-offer]"),a("div."+o+" button[data-btn-promo]",!0)}},p=function(o){const r=document.getElementById(o).queryS a={};r.forEach((e=>{a[e.name]=e.value}));var i=document.getElementById(n);fetch(e+"/validate",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8","x-api-key":t},redirect:"follow",body:JSON.stringify(a)}).then((e=>{if(!e.ok){let t=new Error("HTTP status code: "+e.status);throw t.response=e,t.status=e.status,t}i&&"block"==i.style.display&&l(n),l(o)})).catch((e=>{i&&"block"==i.style.display&&l(n),l("modal-club-promo-error")}))},m=function(e){if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){var t=document.getElementById("modal-club-promo-"+e);const n=t.querySelectorAll("input[data-input-promocode]");var o="";return n&&n.length>0&&(o=n[0].value),navigator.clipboard.writeText(o).then((()=>{const e=t.querySelectorAll("button[data-promo-url]");if(e&&e.length>0){const t=e[0].getAttribute("data-promo-url");t&&""!=t&&window.open(t,"_blank")}var o;o=document.getElementById("text-copied"),s(o),setTimeout((function(){s(o)}),3e3)}))}return Promise.reject("The Clipboard API is not available.")};return{fwdOfferToCore:function(o){var n,r=gg.accounts.getUser().guid||"",a=gg.accounts.getUser().sapId||"",i=document.documentElement.lang||"ES",d=(n="loQuieroSpinnerModal",{create:function(){const e=document.createElement("div");e.id=n,e.classList.add("loQuieroSpinnerModalContainer");const t=document.createElement("head"),o=document.createElement("style");o.type="text/css",o.textContent='.loQuieroSpinnerModalContainer { z-index:10;background-color: rgba(0, 0, 0, .2); position: fixed; top: 0; left: 0; width:100%; height: 100%;} .spinnerTitle{font-size:14px; color:#FFFFFF; font-size: 1.4rem; line-height: 2.5rem; text-align: center; padding: 0 5%;}.loQuieroSpinnerModalBox{ background-color: #001c4c; min-width:150px; min-height: 125px; position: absolute; top:50%; left: 50%;transform: translate(-50%, -50%); padding:25px;}.loader{margin-top:20px;width:100px;height:100px;border-radius:100%;position:absolute;top:50%; left: 50%;transform:translate(-50%, -50%);}#loader-1:before,#loader-1:after{content:"";position:absolute;left:0;right:0;margin:0 auto;width:50%;height:50%;border-radius:100%;border:10px solid transparent;border-top-color:#baad72}#loader-1:before{z-index:100;animation:spin 1s infinite}#loader-1:after{border:10px solid rgba(186, 173, 114, 0.4)}@keyframes spin{from{transform:scale(1) rotate(0)}to{transform:scale(1) rotate(360deg)}}.md #loader-1:before{border-top-color:#baad72}.r1 #loader-1:before{border-top-color:#baad72}';const r=document.createElement("div");r.classList.add("loQuieroSpinnerModalBox");const a=document.createElement("div");a.classList.add("spinnerTitle"),a.textContent="",r.append(a);const i=document.createElement("div");i.id="loader-1",i.classList.add("loader");const d=document.createElement("div");d.append(i),r.append(d),document.body.appendChild(e),e.appendChild(t),e.a(){document.getElementById(n).remove()}});d.create(),fetch(e+"/page/"+o,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8","x-api-key":t},redirect:"follow",body:JSON.stringify({guid:r,sap_ic:a,li})}).theconsole.logToCore: "+e))).finally((()=>d.destroy()))}}}();
gg.qualifio=function(){var e,i,n,nction(i){ev.storage.save("local",e,i)},{create:function(e){if(e=e||{},i()){var o=n();if(o.sessionId===gg.accounts.getEvolokSessionId())return ev.utils.isArray(o.requestedBy)&&-1===o.requestedBy.indexOf(e.divId)&&(o.requestedBy.push(e.divId),t(o)),Promise.resolve(n())}var s={sessionId:gg.accounts.getEvolokSessionId(),clientId:gg.accounts.getScriptConfig().integrations.qualifio};return new Promise((function(i,n){gg.paywall.service.getExternalIntegrationToken(s).then((function(n){(n=n||{}).sessionId=gg.accounts.getEvolokSessionId(),n.re],t(n),i(n)})).catch((function(){n({})}))}))},eraseIfNeeded:function(){if(i()){var t=n();if(gg.accounts.isLogged()&&t.sessionId===gg.accounts.getEvolokSessionId()||!ev.utils.isArray(t.requestedBy))return;t.requestedBy.forEach((function(e){document.cookie="_qual_restore_"+e.replace("qualifio_insert_place_","")+"=; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}));try{ev.storage.ll.utils.isPresentInStorage(e,"local")},get:n=function(){return ev.storage.load("local",e)}}),r=function(e){if(!o){e.addEventListener("load",(function(){o||(_qual_async.push(["registerChildMessageCallback","requestParticipantAction",function(e){var i=!gg.accounts.isLogged();_qual_async.push(["sendChildMessage",e.divId,"requestParticipantAction",i])}]),_qual_async.push(["registerChildMessageCallback","isLoggedIn",function(e){!function(e){e=e||{},gg.accounts.isLogged()?s.create(e).then((function(i){_qual_async.push(["sendChildMessage",e.divId,"userInfo",i.token])})).catch((function(){})):(s.eraseIfNeeded(),gg.accounts.show("login","login",{sourceAgent:"qualifio"}))}(e)}]),_qual_async.push(["registerChildMessageCallback","error",function(e){!function(e){e=e||{},s.eraseIfNeeded()}(e)}]),o=!0)}),!0)}},a=function(e){if(!e)return;var i=e.querySelector("iframe[id^='qualifio-']");if(i)return void r(i);const n=e.querySelector("div[id^='qualifio_insert_place_']");if(!n)return;var t=new MutationObserver((function(i,n){for(var t=0;t<i.length;t++)if("childList"===i[t].type){var o=e.querySelector("iframe[id^='qualifio-']");if(o){r(o);break}}n.disconnect()}));t.observe(n,{attributes:!1,childList:!0,subtree:!0}),s.eraseIfNeeded()};return{sso:function(e){(e=e||{}).isSinglePage?a(document.querySelector("body")):(document.addEventListener("infiniteScrollChangeUrl",(function(e){a(e.articleContainer)})),a(document.querySelector("article.article-default")))}}}();
gg.serialize=function(){var e=function(e){for(var n={},r=0;r<e.length;r++)t(e[r],n);return n},t=function(e,t){t=t||{};var r=e.value,l=e.getAttribute("name");if(l){if("checkbox"===e.type||"radio"===e.type)if(null==e.getAttribute("value"))r=1==e.checked;else if(!e.checked)return;n({name:l,value:r},t)}return t},n=function(e,t){var r,l=e.name.match(/(.*?)\.(.*)/);if(l)if((r=l[1].split("[]")).length>1){t[r[0]]=t[r[0]]||[];var u={};t[r[0]].push(u),e.name=l[2],n(e,u)}else t[l[1]]=t[l[1]]||{},e.name=l[2],n(e,t[l[1]]);else(r=e.name.split("[]")).length>1?(t[r[0]]=t[r[0]]||[],t[r[0]].push(e.value)):t[e.name]=e.value};return{form:function(t){return e(t.querySelectorAll("input, select"))},elements:e,element:t}}();
md.spotim=function(){var t=gg.accounts.getMultitenantScriptConfig().api.url,e=function(){return gg.accounts.isLogged()&&1==gg.accounts.getUser().verified&&1==gg.accounts.getUser().human},n=function(){if(gg.accounts.isEvolokCookiePresent())return!1;const t=gg.accounts.getUser();return gg.cookie.get("_spotimLastUpdate")<=t.lastUpdate},o=function(){var t=localStorage.getItem("SPOTIM_CURRENT_USER");return null!=t&&gg.accounts.getUser().username!=JSON.parse(t).data.username},i=function(t){var e=document.createElement("script");e.setAttribute("async","true"),e.setAttribute("src","https://launcher.spot.im/spot/"+t.spotId),e.setAttribute("data-spotim-module","spotim-launcher"),e.setAttribute("data-post-url",t.url),e.setAttribute("data-post-id",t.articleId),e.setAttribute("data-article-tags",t.tags),e.setAttribute("data-livefyre-url",t.articleId),e.setAttribute("data-spotim-autorun","false"),document.querySelector("body").appendChild(e)},c=function(e){var n=e+"-auth-buttons",o=$("<div class='"ss='"+e+"-auth-confirm'>"+t+"</span>")},c=function(t,n){var i=o.html("<span class='"+e+"-auth-buttons-text'>"+t+"</span>");i.unbind("click"),i.click(n)};this.refresh=function(){gg.accounts.isLogged()?1!=gg.accounts.getUser().verified?c(">> Verifica tu email para comentar",function(){gg.accounts.getService().update({}).success(function(){gg.accounts.refresh(),1!=gg.accounts.getUser().verified&&gg.accounts.show("verify_email","required")})}):gg.accounts.getUser().username?1!=gg.accounts.getUser().human?(i("Confirma para comentar"),gg.recaptcha.init(),gg.recaptcha.register({selector:"#spotim-comments ."+n,callback:function(t){gg.accounts.getService().recaptchaVerification(t).success(function(){gg.accounts.refresh(),(new s).onUserlogin(a)})}})):ario",function(){window.locatogin","login",{sourceAgent:"comments"})})}},s=function(){this.onUserlogin=function(t){window.SPOTIM&&window.SPOTIM.startSSO?t():document.addEventListener("spot-im-api-ready",t,!1)},this.updateData=function(t){window.SPOTIM&&window.SPOTIM.logout?window.SPOTIM.logout().then(function(){t()}):documw.SPOTIM.logout().then(function(){t()})},!1)},this.onUserLogout=function(){window.SPOTIM&&window.SPOTIM.logout?(window.SPOTIM.logout(),gg.cookie.remove("_spotimLastUpdate")):document.addEventListener("spot-im-api-ready",function(){window.SPOTIM.logout()},!1)},this.onUserPost=function(t){document.addEventListener("spot-im-login-start",function(){if(!e()){var n=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:n,behavior:"smooth"})}},!1)}},a=function(){window.SPOTIM.startSSO(function(t,e){var n={codeA:t,uid:gg.accounts.getUser().uid},o=gg.util.url("/perfil/user/spotim/sso").toString();fetch(o,{method:"post",body:JSON.stringify(n),headers:{"on"}}).then(function(t){return t.text()}).then(function(t){t&&e(t)}).catch(function(t){console.error(t)})})};return{init:function(t){var r=new s(t.elToScroll),u=new c(t.el);i(t),r.onUserPost(t.el),e()&&(n()||o())?r.updateData(a):e()?r.onUserlogin(a):r.onUserLogout(),gg.accounts.onLogged(function(){u.refresh()}),gg.accounts.onUnlogged(function(){u.refresh()})}}}();
gg.WindowLoad=function(e){var o=null,l=e&&e.selector,r=document.createElement("div");l?r=document.querySelector(e.selector):document.querySelector("body").appendChild(r);return{load:function(e,o,l){var t=r;l&&l.selector&&(t=t.querySelector(l.selector)),gg.ajax.load(gg.ajax.utils.url(e,o),t)},close:function(){if(l)for(;r.firstChild;)r.removeChild(r.firstChild);else r.parentNode.removeChild(r);o&&o()},onClose:function(e){o=e}}};
gg.screens.factory={popup:function(e){return new gg.screens.Screen(e,(t=gg.screens.utils.find(document,"body"),n=t.style("overflow"),{opts:{closeable:!0},load:function(){var e={layout:"none",flow:this.data.flow,screen:this.data.screen,id:this.id,facet:this.data.facet};for(var t in this.data.params)e[t]=this.data.params[t];gg.accounts.getScreen(this.id).load(gg.accounts.getMultitenantScriptConfig().screens.url,e,{selector:'[data-screen-id="'+this.id+'"] [data-screen-content]'})},close:function(){var e=gg.accounts.getScreen(this.id),s=gg.screens.utils.find(document,'[data-screen-overlay="'+this.id+'"]'),a=s.style("transition");s.removeClass("active"),!a||a.match(/^(\w+ 0s ease 0s|\w+ 0s)$/)?e.close():s.one(["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"],function(t){e.close()}),t.style("overflow",n)},display:function(e){t.style("overflow","hidden"),gg.screens.utils.find(document,'[data-screen-overlay="'+e+'"]').addClass("active")}}));var t,n},embedded:function(e,t){return new gg.screens.Screen(e,{opts:{closeable:!1},load:function(e){var t={layout:"none",flow:this.data.flow,screen:this.data.screen,id:this.id,facet:this.data.facet};for(var n in this.data.params)t[n]=this.data.params[n];gg.accounts.getScreen(this.id).load(gg.accounts.getMultitenantScriptConfig().screens.url,t,{selector:'{gg.accounts.getScreen(this.id).close()},display:function(e){gg.screens.utils.find(document,"[data-screen-id="+e+"]").show()}})}};
gg.screens.forms=function(){var e=function(e,s){return gg.screens.utils.findInScreen(e,"#"+s).get()[0]},s=function(s,r){t.onSubmit(e(s,r),function(e,r){gg.accounts.getService().login(r.email,r.password).success(function(n){t.submitDone(e),gg.screens.registry[s].analytics.pageview("login-ok","site"),gg.screens.registry[s].close()}).failure(function(s){n(e,s)})})},n=function(e,s){if(t.submitDone(e),400==s.status)for(i in s.validationErrors)t.markFieldError(e,s.validationErrors[i].field),t.error(e,s.validationErrors[i].message);else t.error(e,s.errorMessage)},r=function(e,s){var n=gg.screens.registry[s].data;return e.sourceRef=n.sourceRef,e.sourceFacet=n.facet,e.sourceAgent=n.params.sourceAgent,e.sourceCampaign=n.params.sourceCampaign,e},t={show:function(e,s,n){var r=gg.screens.utils.find(e,s);r.show(),n&&r.first().append("<p>"+n+"</p>")},success:function(e,s){t.show(e,'[data-screen-success-for="'+e.id+'"]',s)},error:function(e,s){t.show(e,'[data-screen-error-for="'+e.id+'"]',s)},markFieldError:function(e,s){gg.screens.utils.find(e,'[name="'+s+'"]').forEach(function(e){e.classList.add("error")})},cleanErrors:function(e){gg.scrfunction(e){e.classList.remove("error")}),gg.screens.utils.find(e,"[data-screen-error-bound-to]").empty(),gg.screens.utils.find(e,"[data-screen-error-for]").empty()},onSubmit:function(e,s){e.addEventListener("submit",function(n){n.preventDefault(),gg.screens.utils.find(e,"button[type=submit]").prop("disabled",!0),document.body.style.cursor="wait",t.cleanErrors(e),s(e,gg.serialize.form(e))})},submitDone:function(e){gg.screens.utils.find(e,"button[type=submit]").prop("disabled",!1),document.body.style.cursor="default"}};return{login:s,signup:function(s,i,o){t.onSubmit(e(s,i),function(e,i){var c=r(i,s);try{gg.screens.formsValidation.validate(gg.screens.formsValidation.Action.SIGNUP,c),gg.accounts.getService().signup(c).success(function(n){t.submitDone(e),gg.screens.utils.evalTransitionOnEvent(s,o,"onSuccess",{provider:"site"})}).failure(function(s){n(e,s)})}catch(s){n(e,{errorMessage:s.message})}})},completeSignup:function(s,i,o,c){gg.screens.utils.findInScreen(s,'input[name="email"]').first(function(e){null!=o.oauthIdentity.email?e.value=o.oauthIdentity.email:e.disabled=!1}),t.onSubmit(e(s,i),function(e,i){var u=gg.screens.registry[s].data;i.sourceRef=u.sourceRef,i.sourceFacet=u.facet,i.sourceAgent=u.sourceAgent,i.sourceCampaign=u.sourceCampaign,gg.accounts.getService().update(r(i,s)).success(function(n){t.submitDone(e);var r="PENDING_LINK"==gg.accounts.getUser().sessionState?"onPendingLink":"onSuccess";gg.screens.utils.evalTransitionOnEvent(s,c,r,{provider:o.oauthIdentity.provider})}).failure(function(s){n(e,s)})})},linkAccounts:function(e,n,r){1==r.hasPassword&&(gg.screens.utils.finnction(e){e.value=r.email,e.disabled=!0}),gg.screens.utils.findInScreen(e,"#"+n).show(),gg.screens.utils.findInScreen(e,"[data-screen-email=email]").show()),r.oauthProviders&&r.oauthProviders.length>0&&r.oauthProviders.forEach(function(s){gg.screens.utils.findInScreen(e,"[data-screen-oauth-provider="+s+"]").show()}),s(e,n)},forgottenPassword:function(s,r){t.onSubmit(e(s,r),function(e,r){gg.accounts.getService().forgottenPassword(r.email).success(function(){t.submitDone(e),gg.screens.utils.findInScreen(s,"[data-screen-inputs],[data-screen-subtitle]").hide(),t.success(e)}).failure(function(s){n(e,s)})})},resetPassword:function(s,r,i){t.onSubmit(e(s,r),function(e,r){if(r.password!=r.repeatPassword){var o=gg.screens.utils.findInScreen(s,'[name="repeatPassword"]').attr("data-error-mismatch");t.error(e,o),t.submitDone(e)}else gg.accounts.getService().resetPassword(r.password,i).success(function(){t.submitDone(e),gg.screens.utils.findInScreen(s,"[data-screen-inputs],[data-screen-subtitle]").hide(),t.success(e)}).failure(function(s){n(e,s)})})},requestVerification:function(s,r){t.onSubmit(e(s,r),function(e,s){gg.accounts.gefunction(){t.submitDone(e),t.success(e)}).failure(function(s){n(e,s)})})},manageAlerts:function(s,n){t.onSubmit(e(s,n),function(e,n){var r=void 0!==n.alerts?n.alerts.join(";"):[];gg.screens.webpush.setCategories(r),t.submitDone(e),gg.screens.registry[s].close()})}}}();
gg.screens.formsValidation=function(){var n={};return{Action:lidate:functio(t)},setValidation:function(i,t){n[i]=t}}}();
gg.screens.navigation={init:function(n){var c=gg.screens.registry[n];gg.screens.utils.click(n,"transition",function(n){c.transition(n)}),c.hasPrevious()?gg.screens.utils.click(n,"back",function(n){c.back()}):gg.screens.utils.findInScreen(n,"[data-screen-back]").hide(),1==c.opts.closeable&&(gg.screens.utils.findInScreen(n,"[data-screen-close]")){c.analytics.event("cerrar"),c.close()})),gg.screens.utils.click(n,"logout",function(n(function(){n?c.transition(n):c.close()})}),gg.screens.utils.click(n,"end",function(){c.close()})}};
gg.screens.oauth=function(){var n=function(n,e){var s=gg.accounts.getUser().sessionState;"PENDING_SIGNUP"===s?gg.screens.utils.evalTransitionOnEvent(n,e,"onPendingSignup"):"PENDING_LINK"===s?gg.screens.utils.evalTransitionOnEvent(n,e,"onPendingLink"):"OPEN"===s&&gg.screens.registry[n].close()};return{initProviders:function(e,s){1==s.preStateCheck&&n(e,s),gg.screens.utils.click(e,"oauth-provider",function(t){gg.accounts.getService().oAuthLogin(t).success(function(){"OPEN"==gg.accounts.getUser().sessionState&&gg.screens.registry[e].analytics.pageview("login-ok",t),n(e,s)})})}}}();
gg.screens.Screen=function(t,s){var i,n,a,e,o,l=[],c=!0;for(var r in this.data=t,this.id=t.id,this.load=s.load,this.close=s.close,this.opts={closeable:!0},s.opts)this.opts[r]=s.opts[r];this.transition=function(t,s){l.push(this.data.screen),s&&(this.data.transition=s),this.data.screen=t,this.load()},this.back=function(){var t=l.length;t>0&&(this.data.screen=l[t-1],this.lasPrevious=fuisplay=function(){c&&s.display(this.id)},this.blockDisplay=function(){c=!1},this.analytics=(i=null,n=null,a=null,e=null,o=null,{conf:function(t){i=t.layout||i,n=t.flow||n,a=t.facet||a,e=t.source||e},pageview:function(t,s){o=t,window.dataLayer&&n&&o&&gg.gtm.virtualPageView("/vpv/"+i+"/"+n+"/"+a+"/"+e+"/"+o+(s?"/"+s:""))},event:function(t){window.dataLayer&&n&&o&&gg.gtm.push(i,t,n+"/"+e+"/"+o)}}),gg.screens.registry=gg.screens.registry||{},gg.screens.registry[this.id]=this};
gg.screens.utils=functiorstChild;)t.removeChild(t.firstChild)})},this.hide=function()ction(){this.style("display","inherit")},this.prop=function(t,n){if(null==n)return i[0][t];this.forEach(function(i){i[t]=n})},this.attr=function(t,n){if(null==n)return i[0].getAttribute(t);this.forEach(function(i){i.setAttribute(t,n)})},this.append=function(t){this.forEach(function(n){for(var i=t,e=(new DOMParser).parseFromString(i,"text/html"),o=0;o<e.body.childNodes.length;o++)n.appendChild(e.body.childNodes[o])})},this.first=function(n){return 0==i.length?t,this.one=function(t,n){this.on(t,n,!0)},this.on=function(t,n,i){var e=function(t){(!i||i&&!this.triggered)h(function(t){n.addEventListener(t,e)})})},this.style=function(t,n){if(null==n)return window.getComputedStyle(i[0]).getPropertyValue(t);this.forEach(function(i){i.style[t]=n})},this.addClass=function(t){this.forEach(function(n){n.classList.add(t)})},this.removeClass=function(t){this.forEach(function(n){n.classList.remove(t)})},this.forEach=function(t){for(var n=0;n<i.length;n++)t(i[,i){return new t(n.querySelectorAll(i))},i=function(t,i){return n(document,'[data-screen-id="'+t+'"] '+i)};return{find:n,findInScreen:i,click:function(t,n,e){var o="data-screen-"+n;i(t,"["+o+"]").forEach(function(t){t.addEventListener("click",function(){e(this.getAttribute(o))})})},evalTransitionOnEvent:function(t,n,i,e,o){var r=gg.screens.registry[t];n&&n.transitions&&n.transitions[i]?r.transition(n.transitions[i],e):o?o():r.close()},evalNonSecureRedirect:function(t){"https:"==window.location.protocol||window.location.search.match("facet=app(?:&|$)")||(window.location.href=t+"?_ref="+encodeURIComponent(window.location.href),screen.blockDisplay())},getUrlParam:function(t){var n=new RegExp("[?&]"+t+"=?(.*?)(?=(?:$|&))","g"),i=window.location.search.match(n);return i?i.pop().replace(/.*?(=|$)/,""):null}}}();
gg.screens.webpush=function(){window.ACC=window.ACC||[];return{setCategories:function(e){ACC.push(["core:updateDeviceInfo",{categories:e}]),gg.storage.save("local","webpush.categories",e)},getCategories:function(){var e=gg.storage.load("local","webpush.categories");return e.length>0?e.split(";"):[]}}}();
gg.screens.validations=function(){function i(i){if("app"==i.sourceFacet&&i.email!=i.email2)throw new Error("El email no coincide")}return{init:function(){gg.screens.formsValidation.setValidation(gg.screens.formsValidation.Action.SIGNUP,i)}}}();
var _AccountsService=gg.AccountsService;gg.AccountsService=function(e){var t=new _AccountsService(e),n=function(e){var t=new gg.AccountsServicePromise;return e(t),t.handler};return t.recaptchaVerification=function(e){var c={catpchaResponse:e};return n(function(e){gg.ajax.post(t.utils.getFullPath("/user/verification/recaptcha"),c,function(t){e.resolve(t)},{credentials:!0})})},t.tokenValidate=function(e){var c={"auth-token":e};return n(function(e){gg.ajax.post(t.utils.getFullPath("/user/validateToken"),c,function(t){e.resolve(t)},{credentials:!0})})},t};
})(window);
var ev = window.ev || {};var lv = window.lv = window.lv || {};
(function(window){
var __evScriptConfig={"backoffice":{"api":{"cookie":{"domain":".lavanguardia.com"},"invoices":{"getInvoices":"https://www.lavanguardia.com/perfil/evbk/invoices/get-invoices","negative":"https://www.lavanguardia.com/perfil/evbk/invoices/negative","substitutive":"https://www.lavanguardia.com/perfil/evbk/invoices/substitutive","getPdf":"https://www.lavanguardia.com/perfil/evbk/invoices/get-pdf","rectification":"https://www.lavanguardia.com/perfil/evbk/invoices/rectification","base":"https://www.lavanguardia.com/perfil/evbk/invoices"},"bck":{"loadRetentionConfig":"https://www.lavanguardia.com/perfil/evbk/load-retentionConfig","uploadNifs":"https://www.lavanguardia.com/perfil/user/evbk/uploadNifs","retention":{"content":{"upload":"https://fioahw4ht7.execute-api.eu-west-1.amazonaws.com/v1/upload"}},"landings":{"upload":"https://www.lavanguardia.com/perfil/user/evbk/landings/upload","list":"https://www.lavanguardia.com/perfil/evbk/landings","delete":"https://www.lavanguardia.com/perfil/user/evbk/landings/delete"}},"user":{"bck":{"subscriptions":"https://www.lavanguardia.com/perfil/evbk/subscriptions","digitalsubscriptions":"https://www.lavanguardia.com/perfil/evbk/digital-subscriptions","thirdPartiesSubscriptions":"https://www.lavanguardia.com/perfil/evbk/thirdParties-subscriptions","paymentPlans":"https://www.lavanguardia.com/perfil/evbk/payment-plans","products":"https://www.lavanguardia.com/perfil/evbk/products","recalculateInvoice":"https://www.lavanguardia.com/perfil/user/evbk/recalculate-invoice","baseUrl":"https://www.lavanguardia.com/perfil/user/evbk","appleSubscriptions":"https://www.lavanguardia.com/perfil/evbk/apple-subscriptions","invalidateCache":"https://ggo.evolok.net/acd/api/3.0/invalidate/user","roleAssignments":"https://www.lavanguardia.com/perfil/evbk/roleAssignments","retention":{"video":{"update":"https://www.lavanguardia.com/perfil/user/evbk/retention-video-update"},"uploadRetentionImage":"https://www.lavanguardia.com/perfil/user/evbk/upload-retention-image"},"beneficiarySubscriptions":"https://www.lavanguardia.com/perfil/evbk/beneficiary-subscriptions","info":"https://www.lavanguardia.com/perfil/user/evbk/info"}}}},"mdusa":{"defaultLanguage":"es","cookie":{"domain":".mundodeportivo.com"},"social":{"apple":{"key":"com.mundodeportivo.loginservice"},"facebook":{"key":"296333073816810"},"google":{"key":"589205672786-nmgvrf1hjf31dgfknp2o8us7umng7jo6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"api":{"url":"https://us.mundodeportivo.com/perfil/"},"brand":"MD","authorizedDomains":"https://us.mundodeportivo.com","base":{"url":"https://us.mundodeportivo.com"}},"streets":{"provinces":"https://streets.grupogodo.com/provinces","streets":"https://streets.grupogodo.com/streets/{town}/{streetType}?start={data}","streetTypes":"https://streets.grupogodo.com/streetTypes","towns":"https://streets.grupogodo.com/towns/{town}?start={data}"},"evolok":{"api":{"url":"https://ggo.evolok.net"}},"md":{"defaultLanguage":"es","cookie":{"domain":".mundodeportivo.com"},"social":{"apple":{"key":"com.mundodeportivo.loginservice"},"facebook":{"key":"296333073816810"},"google":{"key":"589205672786-nmgvrf1hjf31dgfknp2o8us7umng7jo6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.mundodeportivo.com"}},"recaptcha":{"key":"6LekHqUUAAAAAFGr_ERvycV9pjTeqbczf8GYURlv"},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"api":{"url":"https://www.mundodeportivo.com/perfil/"},"brand":"MD","authorizedDomains":"https://www.mundodeportivo.com,https://shopping.mundodeportivo.com,https://alta.mundodeportivo.com","base":{"url":"https://www.mundodeportivo.com"}},"club":{"defaultLanguage":"es","cookie":{"domain":".lavanguardia.com"},"social":{"apple":{"key":"com.lavanguardia.loginservice"},"facebook":{"key":"308114232627941"},"google":{"key":"766792178111-keuj5fj715i0qd7d612212p8ko369dg6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"api":{"url":"https://club.lavanguardia.com/perfil/"},"brand":"LV","authorizedDomains":"https://club.lavanguardia.com","base":{"url":"https://club.lavanguardia.com"}},"lv":{"defaultLanguage":"es","cookie":{"domain":".lavanguardia.com"},"social":{"apple":{"key":"com.lavanguardia.loginservice"},"facebook":{"key":"308114232627941"},"google":{"key":"766792178111-keuj5fj715i0qd7d612212p8ko369dg6.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.lavanguardia.com"}},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"recaptcha":{"key":"6LdaCqQUAAAAAI3bjqFNdTYJWs4ttsWDAwuSrtIl"},"api":{"url":"https://www.lavanguardia.com/perfil/"},"brand":"LV","authorizedDomains":"https://www.lavanguardia.com,https://entradas.lavanguardia.com,https://shopping.lavanguardia.com,https://alta.lavanguardia.com","base":{"url":"https://www.lavanguardia.com"}},"r1":{"defaultLanguage":"ca","cookie":{"domain":".rac1.cat"},"social":{"apple":{"key":"cat.rac1.loginservice"},"facebook":{"key":"1061068540655806"},"google":{"key":"444047032466-jf069uv7u5ohrinujei1odn859v61afm.apps.googleusercontent.com"}},"evolok":{"api":{"url":"https://ev.rac1.cat"}},"recaptcha":{"key":"6LdpK_EaAAAAADWyt7JUdoNtnUWOmUyOv_tYecTo"},"stripe":{"key":"pk_live_uSwclOkMJDXBrMimE8h9o0rx001L7UCTpw"},"api":{"url":"https://www.rac1.cat/perfil/"},"brand":"R1","authorizedDomains":"https://www.rac1.cat","base":{"url":"https://www.rac1.cat"}}};
lv.profile = lv.profile || {};
ev.accounts=function(){var e=function(){if("undefined"==typeof __evScriptConfig)throw new Error("Script config is missing!");return __evScriptConfig},t="anonimo",n="registrado",o="acceso_digital",i={0:"anonimo",1:"registrado",2:"acceso_digital",3:"exsuscriptor"},r=function(){if("undefined"!=typeof ggSite)return ggSite;var t=e();for(var n in t)if(t[n].authorizedDomains)for(var o=t[n].authorizedDomains.split(","),i=0;i<o.length;i++)if(o[i].includes(location.hostname))return n;return"lv"},a=function(){return e()[r()]},c=new gg.EventRegistry,u=a().cookie.domaitrigger(e,t)},l=function(e,t){c.on(t,e)},d=function(){return ev.cookie.get("ev_ss")},f=function(){var e=ev.cookie.map();for(var r in e){var a=new RegExp("^_id_");a.test(r)&&(s[r.replace(a,"")]=e[r])}for(var c in s)if(a.test(s[c])){for(var u={},g=s[c].split(";"),l=0;l<g.length;l++){var d=g[l].split("=");try{u[d[0].replace(a,"")]=decodeURIComponent(d[1])}catch(e){}}for(var f in delete s[c],u)s[f]=u[f]}return s.hasActiveSubscription=function(){return"1"===gg.cookie.get("_pac")},s.getEvolokId=function(){return s.guid},s.getId=function(){return s.uid},s.getType=function(){if(s.type)return i[s.type];const e=ev.cookie.get("ev_ss");return null!=e?"function"==typeof s.hasActiveSubscription&&s.hasActiveSubscription()?o:n:t},s.getRoleName=function(){return s.roles},s.getRegisterDate=function(){if(void 0===s.registrationDate||""!==s.registrationDate){const e=new Date(parseInt(s.registrationDate));return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}return""},s.getRegisteredMonthsValue=function(){var e=void 0,t=s.getRegisterDate();if(t)try{var n=new Date(t),o=new Date;const i=Math.abs(o-n),r=Math.ceil(i/864e5);r<=15?e=0:r&&(e=Math.ceil(r/30))}catch(t){e=0}return e},s.getNewsletterList=function(){retuList=function(){return s.communications},s};window.forgotPasswordHandler=function(){document.getElementById("evLogin").style.display="none",document.getElementById("evForgotPassword").style.display="block",ev.gtm.pageeturn"app"===ev.utils.getParam("facet")};return{isUserAuthenticated:function(){retu,getUserGuid:function(){return f().guid},getUser:f,isApp:v,logout:function(e){const t=d();var n=!1;EV.Core.UI.logout(),EV.Event.on(EV.Event.LOGOUT_ACTION,(function(){if(!n){if(ev.cookie.remove("_id_loggedIn",u),t)ev.gtm.push("myaccount","cerrar-sesion","logout"),ev.service.logout(t).then((function(){ev.accounts.clearUserCookies(),e&&"function"==typeof e?e():window.location.reload()})).catch((function(){window.location.reload()}));else{if(e&&"function"==typeof e)return void e();window.location.reload()}n=!0}}))},setAttributesWhenRegistering:function(){var e=ev.service.setAttributesWhenRegistering;return ev.utils.retryAsync(e,2)},onUserIdentifierLoad:function(){const e="#apple-btn";ev.utils.registerMutationOon(){ev.commons.registerAppleHandler(e)},targetElId:e}),ev.gtm.pageview.conf("embedded","signup-login"),d()&&ev.accounts.clearUserCookies()},onLoggednUnlogged:function(e){l(e,"evUnlogged"){return ev.utils.getParam("auth-token")},clearUserCookies:function(){for(var e in ev.cookie.remove("ev_ss",null,null),ev.cookie.remove("ex_ss",null,null),ev.cookie.map()){/^(_id_|yy__id_)/.test(e)&&ev.cookie.remove(e,u)}},loginAppInit:function(){ev.utils.addEventHandlerFromData("click","data-login-app=end",(function(){const e=ev.utils.getParam("auth-token");var t="";if(e){switch(r()){case"md":case"mdusa":t="mundodeportivoauth://callback?auth-token=";break;case"r1":case"lv":default:t="lavanguardiaauth://callback?auth-token=";break;case"club":t="clubvanguardiaauth://callback?auth-token="}t&&(t+=e,ev.utils.redirect(t,!0))}}))},getScriptConfig:e,getMultitenantScriptConfig:a,getGGSite:r,reloadToLogin:function(e){e=e||{};for(var t,n="",o={},i={shopping:"shopping",club:"club",alta:"campaignator",entradas:"entradas"},c=Object.keys(i),u=0;u<c.length;u++)if(t=c[u],window.location.href.indexOf(t)>-1){n=i[c[u]];break}if(!n&&e.sourceAgent&&(n=r()+"-"+e.sourceAgent),v()){if(ev.app.fwdToLogin())return;o.facet="app"}!e.ignoreSource&&n&&ev.gtm.source.save(n,{cookieEnabled:!0}),window.location.href=a().base.url+"/perfil/ev/login"+ev.utils.formatParams(o)},init:function(){const e=d();g(null!=e?"evLogged":"evUnlogged");const t=ev.utils.areCookiesEnabled(),n=ev.utils.hasBrowserSupport();if(!n||!t){if(n){ev.utils.find(document,"#nocookies").show()}else{ev.utils.find(document,"#nobrowser").show()}ev.utils.find(document,".main-content").hide()}}}}();
ev.ajax=function(){var e=function(e,n){return r("GET",e,null,{},n)},n=function(e,n,r){return t("POST",e,n,r)},t=function(e,n,t,a){var s="json"===(a=a||{}).type?"application/json":"application/x-www-form-urlencoded",u="json"===a.type?JSON.stringify(t):o(t);return!1===a.processData&&(s=null,u=t),r(e,n,s,u,a)},r=function(e,n,t,r,o){return new Promise((function(a,s){o=o||{};var u=new XMLHttpRequest;u.open(e,n),o.n(e){u.setRequestHeader(e,o.headers[e])})),t&&u.setRequestHeader("Content-type",t),o.responseType&&(u.responseType=o.responseType),1==o.credentials&&(u.withCredentials=!0),u.onload=function(){var e=u.status>=200&&u.status<300,n={};if(o.ignoreParsing)n=u.response;else try{n=JSON.parse(u.response)}catch(e){}e?a(n):s(n)},u.onerror=feURIComponent(e[t]));rett:function(e,n,r){return t("PUT",e,n,r)},delete:function(e,n){return r("DELETE",e,null,{},n)},load:function(n,t){return e(n,{ignoreParsing:!0}).then((function(e){t.append(e)}))},loadWithPayload:function(e,t,r){return n(e,t,{ignoreParsing:!0,type:"json"}).then((function(e){r.append(e)}))},jsonp:function(e,n){return n=n||{},new Promise((function(t,r){var o="_"+Math.round(1e4*Math.random()),a=n.callback||"jsonp_callback_"+o;window[a]=function(e){delete window[a];var n=document.getElementById(o);n.parentNode.removeChild(n),t(e)};var s=e+ev.utils.formatParams(n),u=document.createElement("script");u.src=s,u.id=o,u.addEventListener("error",r),(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(u)}))}}}();
ev.app=function(){var n=function(){var n=navigator.userAgent.match(/gg[a-zA-Z]*\/[0-9a-zA-Z.]*[0-9\s]/);return(n=n?n[0]:"").toLowerCase().trim()},e=function(e,o){if(!e)return!1;o=o||{};const r=n();try{if(r.includes("ios"))return window.webkit.messageHandlers.appCallback.postMessage(e),!0;if(r.includes("and"))return appCallback.sendMessage(e),!0;console.log("fwdToApp for userAgent="+r)}catch(n){console.log("caught exception fwdToApp for userAgent="+r+"; message="+e)}return!1};return{fwdToNativeSection:function(){return e("HOME")},fwdToInvalidSession:function(){return e("UNAUTHORIZED")},fwdToPaywall:function(){return e("SUBSCRIPTION_REQUIRED")},fwdToRestorePurchases:function(){return e("RESTORE_PURCHASES")},fwdToManagePurchases:function(){return e("MANAGE_PURCHASES")},fwdToPurchaseCompleted:function(){return e("PURCHASE_COMPLETED")},fwdToSignOut:function(){return e("SIGN_OUT")},fwdToInbox:function(){return e("INBOX")},fwdToLogin:function(){return e("REQUIRED_LOGIN")},fwdToConsentAgreeToAll:function(){return e("ACCEPT_CONSENT")},fwdToConsentShowPreferences:function(){return e("DIDOM{return e("DIDOMI_PREFERENCES_VENDORS")}}}();
ev.commons=function(){const e=ev.accounts.getMultitenantScriptConfig().cookie.domain,t="_ref",a="ev_gg_ps",n="ev_gg_err";var i=new FileReader,r=null,o={save:function(a){const n=null!=a?a:d();ev.cookie.set(t,n,null,e)},origin:function(){return ev.utils.getParam(t)},load:function(e){var t=(e=e||{}).origin||o.origin();if(t&&!e.ignore){var a=e.queryParams?e.queryParams:ev.utils.getQueryParams();["_ref","base"].forEach((function(e){a[e]&&delete a[e]})),ev.utils.redirectWithParams((e.base?e.base:"")+t.replace(/%2F/g,"/"),a)}else{const e=this.get(),t=e||ev.accounts.getMultitenantScriptConfig().base.url;this.delete(),ev.ut,get:fudelete:function(){ev.cookie.remove(t,e)}},s=function(){var t=ev.cookie.get(a);if(t){try{t=JSON.parse(t)}catch(e)}return t},u={get:function(){return s()},save:function(){var t={};t.base=ev.accounts.getMultitenantScriptConfig().base.url,t=ev.utils.getQueryParams(t),ev.utils.isEmpty(t)||ev.cookie),null,e)},delete:function(){this.get()}},l=function(){return EV.Translate.getConfig().translations[EV.function(){return l().ev.widgets.errors},d=function(){return window.location.href},v=function(e){ev.utils.find(document,"#"+e).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")},f=function(){const e="autoPopulate";var t=!1,a=function(e,a){t=!0;var i=ev.utils.find(document,"."+e).getFirst();if(i){var r;r="newsletters"===a?ev.utils.find(i,"span.newsletter__title").getFirst().innerHTML:ev.utils.find(i,"label.checkbox__label").getFirst().childNodes[0].nodeValue;var o=ev.utils.find(document,"p.autopopulate-popup-msg");ev.utils.find(o.getFirst(),"span").asArray().forEach((function(e){e.remove()})),o.append("<span>"+r+"</span>"),n()}},n=function(){ev.utils.find(document,"#autopopulatePopup").toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")};return{init:function(i){var r=ev.utils.getParam(e);if(ev.utils.find(document,"#autopopulatePopup").getFirst()&&r){var o=ev.utils.find(document,"."+r).getFirst();if(o){var s="newsletters"===i?"input[name$="+r+"]":"input[name^="+r+"]",u=ev.utils.find(o,s).getFirst();if(u.hasAttribute("checked"))t=!0,ev.utils.redirectWithOptions(d().split("?")[0],{paramsToDelete:[e,"base"]});else{var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});u.dispatchEvent(l)}}}EV.Event.on("gg.user_updated",(function(n){if(n.response.changedAttributes.some((function(e){var t="newsletters"===i?"newsletters"==e.name:e.name.includes("Optin");return"UPDATED"==e.value&&t}))){var r=ev.utils.getParam(e);r&&!t&&a(r,i)}})),ev.utils.addEventHandlerFromData("click","data-autopopulate-popup",(function(t,a){n(),ev.utils.redirectWithOptions(d().split("?")[0],{paramsToDelete:[e,"base"]})}))}}}();return{referrer:o,init:function(){ev.utils.addEventHandlerFromData("click","data-vpv-src",(function(e,t){const a=e.getAttribute(t);a&&("delete"!==a?ev.gtm.source.save(a):ev.gtm.source.delete())})),ev.utils.addEventHandlerFromData("click","data-referrer-strategy",(function(e,t){const a=e.getAttribute(t);a&&("supplier"!==a?ev.accounts.isApp()&&("referrer"!==a||!o.get()||o.get().includes("suscripciones")&&ev.commons.getURL().includes("pago-exitoso"))&&!0===ev.app.fwdToNativeSection()||o.load():o.save())})),ev.utils.addEvup",(function(e,t){v(e.getAttribute(t))})),ev.utils.addEventHandlerFromData("click","data-accounts=logout",(function(e,t){ev.accounts.isApp()?ev.app.fwdToSignOut():ev.accounts.logout()})),ev.utils.addEventHandlerFromData("click","data-accounts=blurred",(function(e,t){ev.utils.find(document,"body").toggleClass("blurred")})),ev.utils.addEventHandlerFromData("click","data-accounts=deleteAccount",(function(e,t){ev.gtm.push("myaccount","darse-baja","baja"),ev.service.deleteAccount().then((function(){ev.accounts.clearUserCookies(),ev.accounts.isApp()&&ev.app.fwdToInvalidSession()||ev.utils.redirect(ev.accounts.getMultitenantScriptConfig().base.url)})).catch((function(e){e.hasOwnProperty("errorMessage")&&ev.forms.utils.error(e.errorMessage)}))})),ev.utils.addEventHandlerFromData("click","data-accounts=emailRequired",(function(e,t){EV.Event.publish("gg.collect_user_info",{screen:"email",onSuccess:function(){window.location.reload()}})})),ev.utils.addEventHandlerFromData("click","data-app=subscriptions",(function(e,t){ev.app.fwdToManagePurchases()})),ev.utils.addEventHandlerFromData("click","data-app=purchase",(function(e,t){ev.app.fwdToPaywall()})),ev.utils.addEventHbox",(function(e,t){ev.app.fwdToInbox()})),function(){var t=ev.cookie.get(n);if(t){try{var a=(t=JSON.parse(t))&&t.args?t.args:[],i=c(),r=t&&t.code?i[t.code.toLowerCase()]:"";if(r){var o=r.mah((function(e,t){r=r.replaceAll(e,a[t])})),ev.forms.utils.error(r)}}catch(e){}ev.cookie.remove(n,e)}}(),ev.utils.find(document,".table-responsive").asArray().forEach((function(e){new SimpleBar(e,{autoHide:!1,forceVisible:"y"}).getScrollElement().addEventListener("scroll",(function(){const t=ev.utils.find(e,".dropdown-menu");t.removeClass("show"),t.hide()}))})),ev.utils.addEventHandlerFromData("click","data-app-href",(function(e){var t=e.getAttribute("data-app-href"),a=e.getAttribute("provider");if(a){var n=e.getAttribute("data-app-network");ev.gtm.push("onboarding","download-app-"+a,n),ev.utils.open(t)}else ev.utils.open(t)})),ev.utils.addEventHandlerFromData("click","data-benefits-href",(function(e){if(!ev.accounts.isApp()||"true"!==ev.utils.getParam("isGiftPurchase")||!0!==ev.app.fwdToNativeSection()){var t=e.getAttribute("data-benefits-href");ev.gtm.push("checkout","gracias","beneficios"),ev.utils.redirect(t)}})),ev.utils.addEventHandlerFromData("change","data-profile=binary",(function(e,t){var a=e.files;if(a.length){ev.utils.spinner.show();var n=parseInt(e.getAttribute("size"));a[0].size<n?(r=a[0],i.readAsDataURL(a[0])):(e.value=null,ev.utils.spinner.hide(),ev.forms.utils.error(c().avatar_max_size+Math.floor(n/1048576).toString()+"MB"))}})),ev.utils.addEventHandlerFromData("click","data-profile=uploadImage",(function(e,t){i.onload=function(){ev.service.updateAvatar(r).then((function(e){return ev.forms.utils.success(),ev.utils.spinner.hide(),ev.utils.find(document,"img[data-profile=image]").attr("src",e.url),ev.utils.find(document,"div[data-profile=uploadImage]").addClass("avatar__has-image"),ev.utils.find(document,"a[data-profile=deleteImage]").removeClass("d-none"),ev.utils.find(document,"[data-profile=span]").removeClass("d-none"),ev.service.refreshAliasCookies()})).catch((function(e){e=e||{},ev.utils.spinner.hide();var t=ev.utils.find(document,"input[data-profile=binary]").getFirst();t&&(t.value=null),"format"===e.type?ev.forms.utils.error(c().avatar_wrong_format):"size"===e.type?ev.forms.utils.error(c().avatar_max_size+Math.floor(e.value/1048576).toString()+"MB"):ev.forms.utils.error(c().generic)}))};var a=ev.utils.find(document,"input[data-profile=binary]").getFirst();if(a){var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});a.dispatchEvent(n)}})),ev.utils.addEventHandlerFromData("click","data-profile=deleteAvatar",(function(e,t){ev.utils.spinner.show(),v("deleteAvatar"),ev.service.deleteAvatar().then((function(){return ev.utils.spinner.hide(),ev.forms.utils.success(),ev.utils.find(document,"img[data-profile=image]").attr("src",""),ev.utils.find(document,"input[data-profile=binary]").val(""),ev.utils.find(document,"div[data-profile=uploadImage]").removeClass("avatar__has-image"),ev.utils.find(document,"a[data-profile=deleteImage]").addClass("d-none"),ev.utils.find(document,"[data-profile=span]").addClass("d-none"),ev.service.refreshAliasCookies()})).catch((function(){ev.utils.spinner.hide(),ev.forms.utils.error(c().generic)}))})),ev.forms.onSubmit(ev.utils.getFormFromId("simplUserInfoCardForm"),(function(e,t){return t=t||{},ev.forms.validate(e)?ev.forms.sendDataToEvolok(t):Promise.reject({ignoreOnFailure:!0})}),(function(){window.location.reload()}),null,{ignoreSuccessMessage:!0})},getURL:d,registerAppleHandler:function(t,n){const i=ev.utils.find(document,t);if(i.getFirst()){if(ev.cookie.get(a)&&!ev.commons.getURL().includes("apple")&&ev.cookie.remove(a,e),n){var r=ev.utils.find(document,n);if(!r.getFirst())return;var o=document.createEvent("Event");o.initEvent("submit",!0,!0)}i.on(["click"],(function(e){r&&e.preventDefault(),u.save(),r&&r.getFirst().dispatchEvent(o)}))}},ger:function(t){ev.cookie.set(n,t,null,e)},getErrorMessages:c,getMessageTable:l,sendReferrerToAnalytics:function(e){var t=o.get()?o.get().split("?")[0]:"none";ev.gtm.push("conversion",e,t)},autoPopulate:f,togglePopup:v,disableFormAutocomplete:function(){var e=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&navigator.userAgent.toLowerCase().indexOf("edge")<0?"new-password":"off";ev.utils.find(document,"input, select").attr("autocomplete",e)}}}();
ev.config=function(){const a=ev.accounts.getMultitenantScriptConfig().evolok.api.url,e=a+"/ic/api",i=a+"/pm/api/v2";var n=function(a){return{es:{ev:{widgets:{orseparator:"O CON TU E-MAIL",userProfileUpdateSuccess:"Tu cuenta ha sido actualizada correctamente.",social:{buttons:{login:{label:"Continuar con",description:"CON TU RED SOCIAL"},register:{label:"Continuar con"}}},popup:{blocked:{title:"Hemos conectado tus cuentas",text:"A partir de ahora podrs acceder con cualquiera de ellas.",button:"Continuar"}},registration:{buttons:{submit:"Continuar",cancel:""}},login:{forgotPassword:"Olvidaste tu contrasea?",buttons:{submit:"Continuar",cancel:""}},userIdentifier:{buttons:{submit:"Continuar",cancel:""}},forgotPassword:{buttons:{submit:"Continuar"}},changePassword:{title:"Cambiar contrasea",buttons:{submit:"Guardar Cambios",cancel:""}},changepassword:{success:"La contrasea ha sido modificada."},resetPassword:{buttons:{cancel:"",submit:"Aceptar"}},resetpassword:{success:"La contrasea ha sido modificada."},editProfile:{buttons:{submit:"Guardar Cambios",cancel:""}},ev_date:{january:"Enero",february:"Febrero",march:"Marzo",april:"Abril",may:"Mayo",june:"Junio",july:"Julio",august:"Agosto",september:"Septiembre",october:"Octubre",november:"Noviembre",december:"Diciembre",undef_day:"",undef_month:"",undef_year:""},registration_attr:{password:{label:"Aadir una contrasea",placeholder:"Aadir una contrasea"}},productSummary:{productName:"Suscripcin",productDescription:"Descripcin",productFrequency:"Periodicidad",deliveryCost:"Delivery Cost",productPrice:"Importe",totalProductPrice:"Importe total",totalAmount:"Total",checkout:"Checkout",noProductsSelected:"No products selected!",ariaLabels:{removeItemFromBasket:"Remove Item From Basket",checkoutPurchaseBasket:"Checkout Purchase Basket"}},attr:{password:{label:"Escribe tu contrasea",placeholder:"Escribe tu contrasea",new:{label:"Escribe tu nueva contrasea",placeholder:"Escribe tu nueva contrasea"},confirm:{label:"Confirma tu nueva contrasea",placeholder:"Confirma tu nueva contrasea"}},"contrasea":{label:"Aadir una contrasea",placeholder:"Aadir una contrasea"},email_address:{label:"E-mail",placeholder:"E-mail"},gender:{label:"Gnero"}},errors:{no_social_network_linked:"No existe ninguna red social vinculada.",all_social_networks_linked:"Todas las redes sociales estn vinculadas!",checkout:"Ha habido un problema durante el proceso, por favor intntalo de nuevo",payment:"Ha habido un problema con el pago, por favor intntalo de nuevo",order:"Ha habido un problema durante el proceso, por favor intntalo de nuevo",direct_debit:"Los datos de la tarjeta no son correctos",identifiers_not_found:"No hemos encontrado la cuenta, por favor registra una nueva cuenta.",duplicate_user_profile:"Correo en uso! Por favor, utiliza un email distinto o introduce tu contrasea actual y vincula la cuenta.",user_linked_with_different_account:"Tu cuenta de {0} est ya vinculada con otra.",identifiers_invalid:"Contrasea incorrecta.",account_locked:"Tu cuenta est bloqueada porque se ha alcanzado el lmite intentos establecido, por favor intntalo ms tarde.",account_suspended:"Tu cuenta ha sido suspendida, contacte con Atencin al Cliente.",user_already_linked_with_same_social_network:"Tu cuenta ya est vinculada a la cuenta {1} con el correo {0}. Desvincula {1} antes de vincularla con otro {1} usuario.",user_profile_inactive:"Tu cuenta no ha sido an activada. <a class=\resend-activation ng-click=\resendActivation()>Re-enviar correo</a>",unlink_user_social_network:"No es posible desvincular tu cuenta social",user_profile_identifiers_not_found:"No existe una cuenta con este email. Prueba con otro email o crea una cuenta.",nothing_selected:"Por favor, selecciona una opcin para continuar",technical_difficulties:"Lo sentimos, estamos experimentando problemas tcnicos, por favor reintntalo en unos momentos.",change_card_failed:"No ha sido posible actualizar los detalles de la tarjeta, por favor reintntalo en unos momentos.",retrieve_card_fail:"Ha sido imposible recuperar las tarjetas existentes.",change_product_plan_failed:"La modificacin de producto/plan no ha sido realizada satisfactoriamente.",reset_validation_failed:"La validacin del valor {1} para el campo {0} no es correcta.",reset_key_used:"Lo sentimos, este enlace ya ha caducado.",attribute_validation_failed_change_password:"Se ha producido un error de validacin de uno o ms campos.",general_attributes:"Los campos [{0}] siguientes son incorrectos o no estn informados. Estos campos son obligatorios para uno o ms servicios asociados a tu cuenta.",general_attribute:"El campo [{0}] siguiente es incorrecto o no est informado. Este campo es obligatorio para uno o ms servicios asociados a tu cuenta.",product_not_found:"Producto no encontrado.",duplicated_purchase:"No es posible completar esta suscripcin debido a que ya existe",not_logged_in:"Este widget precisa que inicies sesin",undefined_order_id:"La orden de compra no ha sido creada.",create_payment_failed:"Se ha producido un error con el pago, por favor reintntalo de nuevo.",invalid_request:"Peticin invalida",field_required:"Campo requerido",field_invalid:"Campo invlido",field_length6:"Longitud incorrecta, se precisan 6 caracteres.",field_length8:"Longitud incorrecta, se precisan 8 caracteres.",invalid_bank_details:"Los datos de la cuenta bancaria no son correctos",password_length:"La contrasea ha de tener una longitud mnima de 6 carcteres.",identifier_mismatch:"El correo electrnico no coincide.",delivery_address_required:"Direccin de entrega no informada",billing_address_required:"Direccin de facturacin no informada",authentication_values_required:"Uno o ms campos de autenticacin requieren ser informados: {0}",personal_details_required:"Las caracteristicas personales siguientes deben ser informadas: {0}",attributes_required:"Introduce los siguientes datos para continuar: {0}",attribute_validation_failed:"Uno o ms atributos con formato incorrecto: {0}.",not_robot:"Por favor, demuestra que no eres un robot",invalid_form:"Algunos datos no son vlidos o estn incompletos, por favor comprueba tu informacin",invalid_profile:"Perfil no vlido: Revisa los campos de tu perfil",invalid_delivery_country:"Has introducido un pas de envo no vlido",no_products_selected:"Debes seleccionar un producto",incomplete_name:"El campo Nombre est incompleto",social_email_address_in_use:"Correo en uso. Por favor, utiliza un email distinto",require_uniquie_profile_and_realm:"El {0} est ya en uso! Por favor, utiliza uno distinto.",duplicate_identifiers_found:"El {0} est ya en uso! Por favor, utiliza uno distinto.",duplicated_beneficiary:"Este beneficiario ya ha sido aadido.",beneficiary_limit_reached:"El nmero mximo de beneficiarios ha sido alcanzado.",grant_limit_reached:"El nmero mximo de beneficiarios ha sido alcanzado.",add_beneficiary_fail:"Se ha producido un error al aadir un beneficiario, por favor reintntalo en unos momentos.",avatar_wrong_format:"El formato de la imagen no es vlido (png, gif, jpg, jpeg)",avatar_max_size:"Tienes que subir una imagen de un tamao menor que ",generic:"La solicitud no se ha podido procesar, por favor intntalo ms tarde",invalid_format:"Formato invlido"},productSelection:{headerNote:"Select plan translated",cancel:"",text:{normal:"",boosted:"LA PREFERIDA DE LOS LECTORES"},select:"SUSCRBETE",paymentPlansHeader:""},plan:{frequency:{NONE:"Pago nico",DAY1:"Diario",WEEK1:"Semanal",MONTH1:"Mes",MONTH3:"Trimestral",MONTH6:"Semestral",MONTH12:"Ao",MONTH18:"Sesquiennial"}},stripe:{cardNumber:"Nmero de tarjeta",cardExpiry:"Caducidad",cardExpiryDate:"Caducidad",cardCVC:"CVC",submitPayment:"Pagar",paymentSuccessful:"Pago exitoso",transactionSecurity:"Esta transaccin est protegida con encriptacin SSL",securityMessage:"Protegida con encriptacin SSL",ideal:{name:"Name","name.placeholder":"Jenny Rosen",bank:"iDEAL Bank"},sepa:{authorization:"By providing your IBAN and confirming this payment, you are authorizing [company name] and Stripe, our payment service provider, to send instructions to your bank to debit your account and your bank to debit your account in accordance with those instructions. You are entitled to a refund from your bank under the terms and conditions of your agreement with your bank. A refund must be claimed within 8 weeks starting from the date on which your account was debited."},ariaLabels:{submitPayment:"Submit Payment",paymentForm:"Payment Form"}},grant:{productName:"Producto",actions:"Estado",noRecordsInvitationKeySpecified:"Sin ninguna invitacin",accept:"Aceptar",decline:"Rechazar",ACCEPTED:"Aceptada",DECLINED:"Rechazada",PENDING:"Pendiente"},purchase:{status:{ACTIVE:"Activa",ACTIVE_PENDING:"Activa",CANCEL_PENDING:"Renovacin Cancelada",PENDING:"Pendiente"},existingCard:{loadingCards:"Searching for existing cards...",selectCardText:"Utilizar los datos de mi tarjeta guardada",selectCard:{ariaLabel:"Selected card"},info:{cardNumber:"Card Number",cardExpiryDate:"Expiry Date"}},newCard:{selectFromExistingBtn:{label:"Select Existing Card",ariaLabel:"Choose from Existing Card"},newCardButton:{label:"Cambiar",ariaLabel:"Cambiar"}}},purchases:{productName:"Producto",startDate:"Fecha de inicio",endDate:"Fecha de renovacin",frequency:"Frecuencia",status:"Estado",nextPaymentDate:"Fecha de renovacin",trialPrice:"Trial Price",finalPrice:"Precio final",noPurchases:"Sin ninguna suscripcin",actions:"Acciones",actionsButton:{label:"Gestionar",action:{displayBeneficiaries:"Beneficiarios",addBeneficiary:"Aadir beneficiario",changeCard:"Cambiar tarjeta",cancelPurchase:"Cancelar suscripcin",applyOffer:"Acepto la oferta",changeProductPlan:"Cambiar producto/plan"}},numberBeneficiaries:"Beneficiarios",notification:{title:"Aadir beneficiario",email:"E-mail",emailPlaceholder:"Introducir e-mail",emailHelp:"Introduce el e-mail del beneficiario a ser invitado.",emailRequired:"El e-mail es requerido.",emailInvalid:"El e-mail es invlido.",message:"Mensaje para el beneficiario",add:"Aadir",cancel:"Cancelar",close:"Cerrar",success:"El beneficiario recibir tu invitacin por correo electrnico.",beneficiaryMessageHelp:"Introduce el mensaje para el beneficiario a ser invitado.",beneficiaryMessageRequired:"El mensaje para el beneficiario es requerido."},beneficiaries:{title:"Beneficiarios",email:"E-mail",status:"Estado",action:"Accin",remove:"Eliminar",cancel:"Cerrar",noBeneficiaries:"Ningn beneficiario"},confirmDialog:{message:"Ests seguro que quieres eliminar este beneficiario?",confirm:"Confirmar",cancel:"Cancelar"},changeCard:{action:"Cambiar tarjeta",title:"Modificar tarjeta",securityMessage:"Protegido con encriptacin SSL",availableCard:{label:"Tarjeta actual",cardNumber:"Nmero de tarjeta",cardExpiryDate:"Caducidad"},newCard:{label:"Nueva tarjeta",buttonLabel:"Nueva tarjeta",save:"Guardar"},confirm:"Guardar",close:"Cerrar",success:"Tarjeta actualizada correctamente"},cancel:{action:"Cancelar suscripcin",success:"La suscripcin ha sido cancelada. Podrs disfrutar de ella hasta el final del periodo actual.",title:"Cancelar suscripcin",cancelling:"Cancelando la suscripcin...",message:"",confirm:"Cancelar suscripcin",close:"Cerrar",select_a_reason:"Selecciona una razn",reason_for_cancellation:"Razn para cancelar la suscripcin",select_an_offer:"Ests seguro que quieres cancelar esta suscripcin? Porque nos importas, acepta nuestra oferta <b>No te vayas todava</b>.",applying_offer:"Aplicando oferta...",offer_success:"Oferta aplicada correctamente"},changeProductPlan:{title:"Cambiar producto/plan",message:"Seleccionar un nuevo producto/plan",upgrading:"Modificando la suscripcin...",select_new_product:"Seleccione producto",select_new_plan:"Seleccione plan",confirm:"Confirme el cambio de producto/plan",success:"El nuevo producto/plan entrar en vigor al final del periodo actual."}},placeholder:{cardNumber:"4509 9535 6623 3704",securityCode:"123",cardExpirationMonth:"12",cardExpirationYear:"2022",cardholderName:"APRO",docNumber:"12345678"},error:{205:"Enter your card number",208:"Select a month",209:"Select a year",212:"Enter your identification type",213:"Enter your identification subtype",214:"Enter your identification number",220:"Enter your issuing bank",221:"Enter your full name",224:"Enter the security code",E301:"There's something wrong with that number. Please reenter",E302:"Check the security code",316:"Enter a valid name",322:"Check your identification type",323:"Check your identification type",324:"Check your identification number",325:"Check the date",326:"Check the date",securityCode:"Enter a valid security code",cardNumber:"Enter a valid card number",default:"Invalid parameters"}}},registration_attr:{"correo_electrnico":{confirm:{label:"Repetir e-mail",placeholder:"Repetir e-mail"}}},gender:{male:"Masculino",female:"Femenino",unknown:"Prefiero no informar"},custom:{cancel_subscription:"Cancela cuando quieras",language:{catalan:"Cataln",spanish:"Castellano"}}},ca:{ev:{widgets:{orseparator:"O AMB EL TEU CORREU ELECTRNIC",userProfileUpdateSuccess:"El teu compte ha estat actualitzat correctament.",social:{buttons:{login:{label:"Continuar amb",description:"O AMB LA TEVA XARXA SOCIAL"},register:{label:"Continuar amb"}}},popup:{blocked:{title:"Hem conectat els teus comptes",text:"A partir d'ara podrs accedir amb qualsevol dels teus comptes.",button:"Continuar"}},registration:{buttons:{submit:"Continuar",cancel:""}},login:{forgotPassword:"Has oblidat la teva contrasenya?",buttons:{ok:"Continuar",cancel:""}},userIdentifier:{buttons:{submit:"Continuar",cancel:""}},forgotPassword:{buttons:{submit:"Continuar"}},changePassword:{title:"Canviar contrasenya",buttons:{submit:"Desar Canvis",cancel:""}},changepassword:{success:"La contrasenya ha estat modificada."},resetPassword:{buttons:{cancel:""}},resetpassword:{success:"La contrasenya ha estat modificada."},editProfile:{buttons:{submit:"Desar Canvis",cancel:""}},ev_date:{january:"Gener",february:"Febrer",march:"Mar",april:"Abril",may:"Maig",june:"Juny",july:"Juliol",august:"Agost",september:"Setembre",october:"Octubre",november:"Novembre",december:"Desembre",undef_day:"",undef_month:"",undef_year:""},registration_attr:{password:{label:"Afegir una contrasenya",placeholder:"Afegir una contrasenya"}},productSummary:{productName:"Subscripci",productDescription:"Descripci",productFrequency:"Periodicitat",deliveryCost:"Cost d'entrega",productPrice:"Import",totalProductPrice:"Import total",totalAmount:"Total",checkout:"Pagament",noProductsSelected:"No s'ha seleccionat cap producte!",ariaLabels:{removeItemFromBasket:"Elimina l'element de la cistella",checkoutPurchaseBasket:"Cistella de compra"}},attr:{password:{label:"Escriu la contrasenya",placeholder:"Escriu la contrasenya",new:{label:"Escriu la contrasenya nova",placeholder:"Escriu la contrasenya nova"},confirm:{label:"Confirma la contrasenya nova",placeholder:"Confirma la contrasenya nova"}},"contrasea":{label:"Afegir una contrasenya",placeholder:"Afegir una contrasenya"},email_address:{label:"Correu electrnic",placeholder:"Correu electrnic"},display_name:{label:"Nom d'usuari",placeholder:"Nom d'usuari"},first_name:{label:"Nom",placeholder:"Nom"},last_name_first:{label:"Primer cognom",placeholder:"Primer cognom"},last_name_second:{label:"Segon cognom",placeholder:"Segon cognom"},gender:{label:"Gnere",placeholder:"Gnere"},birth_date:{label:"Data de naixement",placeholder:"Data de naixement"},phone_number:{label:"Telfon",placeholder:"Telfon"},language:{label:"Idioma de comunicaci",placeholder:"Idioma de comunicaci"},address2_postcode:{label:"Codi postal",placeholder:"Codi postal"}},errors:{no_social_network_linked:"No existeix cap xarxa social vinculada.",all_social_networks_linked:"Totes les xarxes socials estan vinculades!",checkout:"Hi ha hagut algun problema durant del procs, si us plau intenta-ho de nou",payment:"Hi ha hagut algun problema amb el pagament, si us plau intenta-ho de nou",order:"Hi ha hagut algun problema durant del procs, si us plau intenta-ho de nou",direct_debit:"Les dades de la targeta sn incorrectes",identifiers_not_found:"No hem trobat el compte, si us plau crea un nou compte.",duplicate_user_profile:"Correu en s! Si us plau, utilitza un email diferent o introdueix la teva contrasenya actual i vincula el compte.",user_linked_with_different_account:"El teu compte de {0} est ja vinculat amb un altre.",identifiers_invalid:"Contrasenya incorrecta.",account_locked:"El teu compte est bloquejat perqu has esgotat el lmit d'intents establert, si us plau intenta-ho de nou ms tard.",account_suspended:"El teu compte ha estat susps, si us plau posa't en contacte amb Atenci al Client.",user_already_linked_with_same_social_network:"El teu compte ja est vinculat al compte {1} amb el correu {0}. Si us plau desvincula {1} abans de vincular-lo amb una altre {1} usuari.",user_profile_inactive:"El teu compte encara no ha estat activat. <a class=\resend-activation ng-click=\resendActivation()>Re-enviar correu</a>",unlink_user_social_network:"No s possible desvincular la teva xarxa social",user_profile_identifiers_not_found:"No existeix un compte amb aquest email. Prova amb un altre email o crea un compte.",nothing_selected:"Si us plau, selecciona una opci per a continuar",technical_difficulties:"Ho sentim, estem experimentant problemes tcnics, si us plau torna-ho a intentar en uns moments.",change_card_failed:"No ha estat possible actualitzar els detalls de la targeta, si us plau torna-ho a intentar en uns moments.",retrieve_card_fail:"Ha estat impossible recuperar les targetes existents.",change_product_plan_failed:"No ha estat possible realitzar la modificaci del producte/pla ",reset_validation_failed:"La validaci del valor {1} per al camp {0} no s correcte.",reset_key_used:"Ho sentim. El valor {0} no ha estat trobat o ja est en s.",attribute_validation_failed_change_password:"S'ha produt un error de validaci d'un o ms camps.",general_attributes:"Els camps [{0}] segents sn incorrectes o no estan informats. Aquests camps sn obligatoris per a un o ms serveis associats al teu compte.",general_attribute:"El camp [{0}] segent s incorrecte o no est informat. Aquest camp s obligatori per a un o ms serveis associats al teu compte.",product_not_found:"No ha estat possible trobar el producte",duplicated_purchase:"No ha estat possible finalitzar la compra perqu ja existeix",not_logged_in:"Aquest widget precisa que inicis sessi",undefined_order_id:"L'ordre de compra no ha estat creada.",create_payment_failed:"S'ha produt un error amb el pagament, si us plau torna-ho a intentar.",invalid_request:"Petici invlida",field_required:"Camp obligatori",field_invalid:"Camp invlid",field_length6:"Longitud incorrecta, es precisen 6 carcters.",field_length8:"Longitud incorrecta, es precisen 8 carcters.",invalid_bank_details:"Les dades bancries facilitades sn incorrectes",password_length:"La contrasenya ha de tenir una longitud mnima de 6 carcters.",identifier_mismatch:"El correu electrnic no coincideix.",delivery_address_required:"Adrea de lliurament no informada",billing_address_required:"Adrea de facturaci no informada",authentication_values_required:"Un o ms camps d'autenticaci requereixen ser informats: {0}",personal_details_required:"Les caracterstiques personals segents han de ser informades: {0}",attributes_required:"Introdueix les segents dades per a continuar: {0}",attribute_validation_failed:"Un o ms atributs amb format incorrecte: {0}.",not_robot:"Si us plau, demostra que no ets un robot",invalid_form:"Algunes dades sn invlides o estan incompletes, si us plau comprova les dades informades",invalid_profile:"Perfil invlid: Revisa els camps del teu perfil",invalid_delivery_country:"Has introdut un pas de lliurament invlid",no_products_selected:"Has de seleccionar un producte",incomplete_name:"El camp 'Nom' est incomplet",social_email_address_in_use:"Correu en s. Si us plau, utilitza un correu electrnic diferent",require_uniquie_profile_and_realm:"El {0} est ja en s! Si us plau, utilitza un diferent.",duplicate_identifiers_found:"El {0} est ja en s! Si us plau, utilitza un diferent.",duplicated_beneficiary:"Aquest beneficiari ja ha estat afegit.",beneficiary_limit_reached:"El nombre mxim de beneficiaris ha arribat al seu lmit.",grant_limit_reached:"El nombre mxim de beneficiaris ha arribat al seu lmit.",add_beneficiary_fail:"S'ha produt un error en afegir un beneficiari, si us plau torna-ho a intentar en uns moments.",avatar_wrong_format:"El format de la imatge no s correcte (png, gif, jpg, jpeg)",avatar_max_size:"Has de pujar una imatge d'una mida menor que ",generic:"La sollicitud no s'ha pogut processar, si us plau intenta-ho ms tard",invalid_format:"Format invlid"},productSelection:{headerNote:"Selecciona el pla tradut",cancel:"",text:{normal:"",boosted:"LA PREFERIDA DELS LECTORS"},select:"SUBSCRIU-TE",paymentPlansHeader:""},plan:{frequency:{NONE:"Pagament nic",DAY1:"Diari",WEEK1:"Setmanal",MONTH1:"Mensual",MONTH3:"Trimestral",MONTH6:"Semestral",MONTH12:"Anual",MONTH18:"Sesquienal"}},stripe:{cardNumber:"Nmero de targeta",cardExpiry:"Caducitat",cardExpiryDate:"Caducitat",cardCVC:"CVC",submitPayment:"Pagar",paymentSuccessful:"Pagament exits",transactionSecurity:"Aquesta transacci est protegida amb xifratge SSL",securityMessage:"Protegida amb xifratge SSL",ideal:{name:"Nom","name.placeholder":"Jenny Rosen",bank:"iDEAL Bank"},sepa:{authorization:"Proporcionant el vostre IBAN i confirmant aquest pagament, est autoritzant a [company name] i a Stripe, el nostre provedor de serveis de pagament, enviar instruccions al vostre banc per emetre el pagament. T dret a un reemborsament del seu banc en virtut dels termes i condicions del seu acord amb el seu banc. Per reclamar un reemborsament, s imprescindible fer-ho en un termini mxim de 8 setmanes a partir de la data en qu es va fer el pagament."},ariaLabels:{submitPayment:"Enviar pagament",paymentForm:"Formulari de pagament"}},grant:{productName:"Producte",actions:"Estat",noRecordsInvitationKeySpecified:"No tens cap invitaci",accept:"Acceptar",decline:"Rebutjar",ACCEPTED:"Acceptada",DECLINED:"Rebutjada",PENDING:"Pendent"},purchase:{status:{ACTIVE:"Activa",ACTIVE_PENDING:"Activa",CANCEL_PENDING:"Renovaci Cancellada",PENDING:"Pendent"}},purchases:{productName:"Producte",startDate:"Data d'inici",endDate:"Data de renovaci",frequency:"Freqncia",status:"Estat",nextPaymentDate:"Data de renovaci",trialPrice:"Preu de la subscripci de prova",finalPrice:"Preu final",noPurchases:"No tens cap subscripci",actions:"Accions",actionsButton:{label:"Gestionar",action:{displayBeneficiaries:"Beneficiaris",addBeneficiary:"Afegir beneficiari",changeCard:"Canviar targeta",cancelPurchase:"Cancellar subscripci",applyOffer:"Accepto l'oferta",changeProductPlan:"Canviar producte/pla"}},numberBeneficiaries:"Beneficiaris",notification:{title:"Afegir beneficiari",email:"E-mail",emailPlaceholder:"Introduir e-mail",emailHelp:"Introdueix l'e-mail del beneficiari convidat.",emailRequired:"L'e-mail s obligatori.",emailInvalid:"L'e-mail s invlid.",message:"Missatge pel beneficiari",add:"Afegir",cancel:"Cancellar",close:"Tancar",success:"El beneficiari rebr la teva invitaci per correu electrnic.",beneficiaryMessageHelp:"Introdueix el missatge per convidar al beneficiari",beneficiaryMessageRequired:"El missatge pel beneficiari s obligatori"},beneficiaries:{title:"Beneficiaris",email:"E-mail",status:"Estat",action:"Acci",remove:"Eliminar",cancel:"Tancar",noBeneficiaries:"Cap beneficiari"},confirmDialog:{message:"Ests segur que vols eliminar aquest beneficiari?",confirm:"Confirmar",cancel:"Cancellar"},changeCard:{action:"Canviar targeta",title:"Modificar targeta",securityMessage:"Protegit amb xifratge SSL",availableCard:{label:"targeta actual",cardNumber:"Nmero de targeta",cardExpiryDate:"Caducitat"},newCard:{label:"Nova targeta",buttonLabel:"Nova targeta",save:"Desar"},confirm:"Desar",close:"Tancar",success:"Targeta actualitzada correctament"},cancel:{action:"Cancellar la subscripci",success:"La subscripci ha estat cancellada. Podrs gaudir d'ella fins al final del perode actual.",title:"Cancellar la subscripci",cancelling:"Cancellant la subscripci...",message:"Ests segur que vols cancellar aquesta subscripci?",confirm:"Cancellar subscripci",close:"Tancar",select_a_reason:"Selecciona un motiu",reason_for_cancellation:"Motiu per a cancellar la subscripci",select_an_offer:"Ests segur que vols cancellar aquesta subscripci? Perqu ens importes, accepta la nostra oferta. <b>No et vagis encara</b>.",applying_offer:"Aplicant oferta...",offer_success:"Oferta aplicada correctament"},changeProductPlan:{title:"Canviar producte/pla",message:"Seleccionar un nou producte/pla",upgrading:"Modificant la subscripci...",select_new_product:"Selecciona un nou producte",select_new_plan:"Selecciona un nou pla",confirm:"Confirma el canvi de producte/pla",success:"El nou producte/pla entrar en vigor al final del perode actual."}},placeholder:{cardNumber:"4509 9535 6623 3704",securityCode:"123",cardExpirationMonth:"12",cardExpirationYear:"2022",cardholderName:"APRO",docNumber:"12345678"},error:{205:"Introduu el nmero de la vostra targeta",208:"Selecciona el mes",209:"Selecciona l'any",212:"Introduu el vostre tipus didentificaci",213:"Introduu el vostre subtipus didentificaci",214:"Introduu el vostre nmero didentificaci",220:"Introduu el vostre banc emissor",221:"Introdueix el teu nom complet",224:"Introdueix el codi de seguretat",E301:"Hi ha quelcom erroni amb aquest nmero. Si us plau, torna a entrar",E302:"Comprova el codi de seguretat",316:"Introdueix un nom vlid",322:"Comprova el tipus d'identificaci",323:"Comprova el tipus d'identificaci",324:"Comproveu el nmero d'identificaci",325:"Comprova la data",326:"Comprova la data",securityCode:"Introdueix un codi de seguretat vlid",cardNumber:"Introdueix un nmero de targeta vlid",default:"Parmetres invlids"}}},registration_attr:{password:{label:"Contrasenya",placeholder:"Contrasenya"},email_address:{label:"Correu electrnic",placeholder:"Correu electrnic"},"correu_electrnic":{confirm:{label:"Repetir el correu electrnic",placeholder:"Repetir el correu electrnic"}}},gender:{male:"Home",female:"Dona",unknown:"Prefereixo no informar-ne"},custom:{cancel_subscription:"Cancella quan vulguis",language:{catalan:"Catal",spanish:"Castell"}}}}[a]};return{init:function(){var a=ev.accounts.getMultitenantScriptConfig()||{};a.defaultLanguage=a.defaultLanguage||"es";var t={serviceName:"my_account",realmName:"default_realm",icDomain:e,secureMode:!1,ssoCookieDomain:a.cookie.domain};EV.WM.init({brand:"empty"}),EV.Core.init(t),EV.PM.init({pmDomain:i,version:2,stripeKey:a.stripe.key}),EV.Social.init({icDomain:e,serviceName:"social",realmName:"default_realm",redirectUri:a.api.url+"ev/oauth/redirect",socialAttributeMapping:{email_address:"email",first_name:"firstName",last_name_first:"lastName"},socialKeys:{google:a.social.google.key,facebook:a.social.facebook.key,apple:a.social.apple.key}}),ev.events(),EV.Translate.addTranslationTable("es",n("es")),EV.Translate.addTranslationTable("ca",n("ca")),EV.Translate.setActiveLanguage(a.defaultLanguage);var o=n(a.defaultLanguage);EV.Widgets=EV.Widgets||{},EV.Widgets.Display={gender:{type:"radiobutton",values:[{caption:o.gender.male,value:"MALE"},{caption:o.gender.female,value:"FEMALE"},{caption:o.gender.unknown,value:"UNKNOWN"}]},language:{type:"dropdown",values:[{caption:"Selecciona un idioma",value:""},{caption:"Castellano",value:"ES"},{caption:"Catal",value:"CA"}]},address2_country:{type:"dropdown",values:[{caption:"Selecciona un pas",value:""},{caption:"Espaa",value:"ES"},{caption:"Afganistn",value:"AF"},{caption:"Albania",value:"AL"},{caption:"Alemania",value:"DE"},{caption:"Andorra",value:"AD"},{caption:"Angola",value:"AO"},{caption:"Antigua y Barbuda",value:"AG"},{caption:"Arabia Saudita",value:"SA"},{caption:"Argelia",value:"DZ"},{caption:"Argentina",value:"AR"},{caption:"Armenia",value:"AM"},{caption:"Australia",value:"AU"},{caption:"Austria",value:"AT"},{caption:"Azerbaiyn",value:"AZ"},{caption:"Bahamas",value:"BS"},{caption:"Banglads",value:"BD"},{caption:"Barbados",value:"BB"},{caption:"Barin",value:"BH"},{caption:"Blgica",value:"BE"},{caption:"Belice",value:"BZ"},{caption:"Benn",value:"BJ"},{caption:"Bielorrusia",value:"BY"},{caption:"Birmania",value:"MM"},{caption:"Bolivia",value:"BO"},{caption:"Bosnia-Herzegovina",value:"BA"},{caption:"Botsuana",value:"BW"},{caption:"Brasil",value:"BR"},{caption:"Bruni",value:"BN"},{caption:"Bulgaria",value:"BG"},{caption:"BurkinaFaso",value:"BF"},{caption:"Burundi",value:"BI"},{caption:"Butn",value:"BT"},{caption:"CaboVerde",value:"CV"},{caption:"Camboya",value:"KH"},{caption:"Camern",value:"CM"},{caption:"Canad",value:"CA"},{caption:"Catar",value:"QA"},{caption:"Chad",value:"TD"},{caption:"Chile",value:"CL"},{caption:"China",value:"CN"},{caption:"Chipre",value:"CY"},{caption:"Colombia",value:"CO"},{caption:"Comoras",value:"KM"},{caption:"Congo",value:"CG"},{caption:"Corea del Norte",value:"KP"},{caption:"Corea del Sur",value:"KR"},{caption:"Costa de Marfil",value:"CI"},{caption:"Costa Rica",value:"CR"},{caption:"Croacia",value:"HR"},{caption:"Cuba",value:"CU"},{caption:"Dinamarca",value:"DK"},{caption:"Dominica",value:"DM"},{caption:"Ecuador",value:"EC"},{caption:"Egipto",value:"EG"},{caption:"ElSalvador",value:"SV"},{caption:"Emiratos rabes Unidos",value:"AE"},{caption:"Eritrea",value:"ER"},{caption:"Eslovaquia",value:"SK"},{caption:"Eslovenia",value:"SI"},{caption:"Estados Unidos",value:"US"},{caption:"Estonia",value:"EE"},{caption:"Etiopa",value:"ET"},{caption:"Filipinas",value:"PH"},{caption:"Finlandia",value:"FI"},{caption:"Fiyi",value:"FJ"},{caption:"Francia",value:"FR"},{caption:"Gabn",value:"GA"},{caption:"Gambia",value:"GM"},{caption:"Georgia",value:"GE"},{caption:"Ghana",value:"GH"},{caption:"Granada",value:"GD"},{caption:"Grecia",value:"GR"},{caption:"Guatemala",value:"GT"},{caption:"Guinea",value:"GN"},{caption:"Guinea Ecuatorial",value:"GQ"},{caption:"Guinea-Bisu",value:"GW"},{caption:"Guyana",value:"GY"},{caption:"Hait",value:"HT"},{caption:"Honduras",value:"HN"},{caption:"Hungra",value:"HU"},{caption:"India",value:"IN"},{caption:"Indonesia",value:"ID"},{caption:"Irak",value:"IQ"},{caption:"Irn",value:"IR"},{caption:"Irlanda",value:"IE"},{caption:"Islandia",value:"IS"},{caption:"Islas Marshall",value:"MH"},{caption:"Islas Salomn",value:"SB"},{caption:"Israel",value:"IL"},{caption:"Italia",value:"IT"},{caption:"Jamaica",value:"JM"},{caption:"Japn",value:"JP"},{caption:"Jordania",value:"JO"},{caption:"Kazajistn",value:"KZ"},{caption:"Kenia",value:"KE"},{caption:"Kirguistn",value:"KG"},{caption:"Kiribati",value:"KI"},{caption:"Kosovo",value:"-"},{caption:"Kuwait",value:"KW"},{caption:"Laos",value:"LA"},{caption:"Lesoto",value:"LS"},{caption:"Letonia",value:"LV"},{caption:"Lbano",value:"LB"},{caption:"Liberia",value:"LR"},{caption:"Libia",value:"LY"},{caption:"Liechtenstein",value:"LI"},{caption:"Lituania",value:"LT"},{caption:"Luxemburgo",value:"LU"},{caption:"Macedonia",value:"MK"},{caption:"Madagascar",value:"MG"},{caption:"Malasia",value:"MY"},{caption:"Malaui",value:"MW"},{caption:"Maldivas",value:"MV"},{caption:"Mal",value:"ML"},{caption:"Malta",value:"MT"},{caption:"Marruecos",value:"MA"},{caption:"Mauricio",value:"MU"},{caption:"Mauritania",value:"MR"},{caption:"Mxico",value:"MX"},{caption:"Micronesia",value:"FM"},{caption:"Moldavia",value:"MD"},{caption:"Mnaco",value:"MC"},{caption:"Mongolia",value:"MN"},{caption:"Montenegro",value:"ME"},{caption:"Mozambique",value:"MZ"},{caption:"Namibia",value:"NA"},{caption:"Nauru",value:"NR"},{caption:"Nepal",value:"NP"},{caption:"Nicaragua",value:"NI"},{caption:"Nger",value:"NE"},{caption:"Nigeria",value:"NG"},{caption:"Noruega",value:"NO"},{caption:"Nueva Zelanda",value:"NZ"},{caption:"Omn",value:"OM"},{caption:"PasesBajos",value:"NL"},{caption:"Pakistn",value:"PK"},{caption:"Palaos",value:"PW"},{caption:"Palestina",value:"PS"},{caption:"Panam",value:"PA"},{caption:"Papa Nueva Guinea",value:"PG"},{caption:"Paraguay",value:"PY"},{caption:"Per",value:"PE"},{caption:"Polonia",value:"PL"},{caption:"Portugal",value:"PT"},{caption:"ReinoUnido",value:"GB"},{caption:"Repblica Centroafricana",value:"CF"},{caption:"Repblica Checa",value:"CZ"},{caption:"Repblica Democrtica del Congo",value:"CD"},{caption:"Repblica ominicana",value:"DO"},{caption:"Ruanda",value:"RW"},{caption:"Rumania",value:"RO"},{caption:"Rusia",value:"RU"},{caption:"Samoa",value:"WS"},{caption:"San Cristbal y Nieves",value:"KN"},{caption:"San Marino",value:"SM"},{caption:"San Vicente y las Granadinas",value:"VC"},{caption:"Santa Luca",value:"LC"},{caption:"Santo Tom y Prncipe",value:"ST"},{caption:"Senegal",value:"SN"},{caption:"Serbia",value:"RS"},{caption:"Seychelles",value:"SC"},{caption:"Sierra Leona",value:"SL"},{caption:"Singapur",value:"SG"},{caption:"Siria",value:"SY"},{caption:"Somalia",value:"SO"},{caption:"SriLanka",value:"LK"},{caption:"Suazilandia",value:"SZ"},{caption:"Sudfrica",value:"ZA"},{caption:"Sudn",value:"SD"},{caption:"Sudn del Sur",value:"SS"},{caption:"Suecia",value:"SE"},{caption:"Suiza",value:"CH"},{caption:"Surinam",value:"SR"},{caption:"Tailandia",value:"TH"},{caption:"Taiwn",value:"TW"},{caption:"Tanzania",value:"TZ"},{caption:"Tayikistn",value:"TJ"},{caption:"Timor Oriental",value:"TL"},{caption:"Togo",value:"TG"},{caption:"Tonga",value:"TO"},{caption:"Trinidad y Tobago",value:"TT"},{caption:"Tnez",value:"TN"},{caption:"Turkmenistn",value:"TM"},{caption:"Turqua",value:"TR"},{caption:"Tuvalu",value:"TV"},{caption:"Ucrania",value:"UA"},{caption:"Uganda",value:"UG"},{caption:"Uruguay",value:"UY"},{caption:"Uzbekistn",value:"UZ"},{caption:"Vanuatu",value:"VU"},{caption:"Vaticano",value:"VA"},{caption:"Venezuela",value:"VE"},{caption:"Vietnam",value:"VN"},{caption:"Yemen",value:"YE"},{caption:"Yibuti",value:"DJ"},{caption:"Zambia",value:"ZM"},{caption:"Zimbabue",value:"ZW"}]}},function(){if(ev.accounts.isUserAuthenticated()){const a=EV.util.getEVSession(),e=ev.accounts.getUser().guid;if(!e||a&&a.guid===e)return;ev.storage.remove("local","evolok:ev_session",!0);try{EV.Core.refreshSSOSession()}catch(a){}}}()},cleanupEvWidgetStorage:function(){ev.storage.remove("local","evolok:ev_session",!0),ev.storage.remove("session","evolok:ev_profile",!0),ev.storage.remove("session","evolok:ev_identifnction(){var e=function(e,n,t,o,i){var r=t?"; expires="+new Date((new Date).getTime()+1e3*t).toGMTString():"";document.cookie=e+"="+encodeURIComponent(n)+r+(void 0===i||i?";path="+(i||"/"):"")+(o?";domain="+o:"")},n=function(){for(var e={},n=document.cookie.split("; "),t=0;t<n.length;t++){var o=n[t].split("=");try{e[o[0]]=decodeURIComponent(o[1])}catch(e){}}return e};return{set:e,get:function(e){return n()[e]},remove:function(n,t,o){e(n,"",-1,t,o)},map:n}}();
ev.customerHelp=function(){var e=null;const t={id:"URL"},i={id:"FORM"},n=function(e){if(!ev.customerHelp.items)return null;const t=ev.customerHelp.items.find((function(t){return t.id===e}));return t||null},r=function(e,t,i){ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='confirm'] .btn.btn-primary").once(["click"],(function(e){try{const e=s(t)[i];if(!e.value)throw new Error;window.location=e.external?e.value:ev.accounts.getMultitenantScriptConfig().base.url+e.value}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}})),ev.screens.registry[e].transition("confirm")},s=function(e){var t=null;try{const i=ev.accounts.getGGSite().toUpperCase();(t=e.url[i])||(t=e.url.LV)}catch(e){}return t},a=function(e){try{const t=window.location.href+ev.utils.formatParams({action:e});ev.commons.referrer.save(t),ev.accounts.reloadToLogin({ignoreSource:!0})}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}},o=function(e,c,l,d){try{const p=e.getAttribute(c);if(!p)throw neror;const f=ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen]:not([data-paywall-screen='items'])"+(l&&l.description?":not([data-paywall-screen='childs'])":"")+" .evl-profile-title");if(f.empty(),f.append(l&&l.description?l.description+" "+m.description.toLowerCase():m.description),m.childs&&m.childs.length>0){const e=[];if(m.childs.forEach((function(t){const i=n(t);i&&e.push(i)})),0===e.length)throw new Error;const t=ev.utils.fi+"'] [data-paywall-screen='childs'] ."+d.id+"__items");var u="";return e.forEach((function(e){u+=`\n                        <div class="${d.id}__item" data-selection-id="${e.id}">\n                            ${e.description}\n                        </div>\n                    `})),t.empty(),t.append(u),ev.utils.find(t.getFirst(),"[data-selection-id]").on(["click"],(function(e,t){o(t,"data-selection-id",m,d)})),void ev.screens.registry[d.id].transition("childs")}if((m.requireLogin||m.requireSubscription)&&!ev.accounts.isUserAuthenticated())return ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='unlogged'] .btn.btn-primary").once(["click"],(function(e){a(l?l.id:p)})),void ev.screens.registry[d.id].transition("unlogged");if(m.requireSubscription&&!ev.accounts.getUser().hasActiveSubscription())return ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='item'],[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='link-P'] input[name='item'],[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='link-E'] input[name='item']").val(m.id),ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='link']").val("true"),void ev.screens.registry[d.id].transition("non-subscriber");switch(m.action){case t.id:const e=s(m)?Object.keys(s(m)):[];if(0===e.length)throw new Error;if(1===e.length)return void r(d.id,m,e[0]);if(!e.includes("E")||!e.includes("P"))throw new Error;ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='item']").val(m.id),ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='subscription-type'] input[name='link']").val("false"),ev.screens.registry[d.id].transition("subscription-type");break;cashrow Error();if(!ev.utils.find(document,"[data-paywall-screen-id='"+d.id+"'] [data-paywall-screen='"+n+"'").getFirst())throw Error();ev.screens.registry[d.id].transition(n);break;default:throw new Error}}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}};return{init:function(e){if(!(e=e||{}).id)return;ev.utils.addEventHandlerFromData("click","data-selection-id",(function(t,i){o(t,i,null,e)})),ev.forms.onSubmit(ev.utils.getFormFromId(e.id+"-subscription-selection-form"),(function(e,t){return Promise.resolve(t)}),(function(t){try{const i=n(t.item);if(!i||!t.subscriptionType)throw new Error;if("true"!==t.link||!i.requireSubscription)return void r(e.id,i,t.subscriptionType);if(ev.accounts.getUser().hasActiveSubscription())return void o(ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+i.id+"']").getFirst(),"data-selection-id",null,e);if("E"!==t.subscriptionType&&"P"!==t.subscriptionType)throw new Error;ev.screens.registry[e.id].transition("link-"+t.subscriptionType)}catch(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}}),es().generic)}),{ignoreSuccessMessage:!0}),e.requestAction&&Object.keys(e.requestAction).forEach((function(t){!function(e,t){ev.forms.onSubmit(ev.utils.getFormFromId(e+"-"+t.id+"-form"),(function(i,n){return ev.forms.validate(i)?(ev.screens.registry[e].transition("loading"),ev.service.customerHelp.request(t.id,n)):Promise.reject({ignoreOnFailure:!0})}),(function(t){ev.screens.registry[e].transition("success")}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic),ev.screens.registry[e].transition(t.id)}),{ignoreSuccessMessage:!0}),t.recaptcha&&ev.recaptcha.register({selector:"#recaptcha-"+t.id,callback:function(i){ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] input[name='recaptcha']").val(i),ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] [data-form-submit]").prop("disabled",!1)},expiredCallback:function(i){ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] input[name='recaptcha']").val(""),ev.utils.find(document,"[data-paywall-screen-id='"+e+"'] [data-paywall-screen='"+t.id+"'] [data-form-submit]").prop("disabled",!0)}v.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='subscription-type],(function(t,i){ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='subscriptionbscriptionType']").val(i.getAttribute("data-subscription-type"))})),ev.utils.find(document,"textarea").each((function(e){e.value="",e.blur()})),ev.recaptcha.init(),ev.forms.onSubmit(ev.utils.getFormFromId(e.id+"-link-E-subscription-form"),(function(e,t){return Promise.resolve(t)}),(function(e){ev.accounts.isApp()?ev.app.fwdToSignOut():(document.body.style.cursor="wait",ev.accounts.logout((function(){a(e.item)})))}),(function(){document.body.style.cursor="default",ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.forms.onSubmit(ev.utils.getFormFromId(e.id+"-link-P-subscription-form"),(function(e,t){return t.form=e,Promise.resolve(t)}),(function(t){try{const i=t.item,n=t.form;if(!i||!n)throw new Error;delete t.item,delete t.form,ev.forms.utils.loading(n),ev.service.sap.link(t).then((function(){if(!ev.accounts.getUser().hasActiveSubscription())throw new Error;ev.gtm.pageview.trigger("nif-ok"),o(ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-sc]").getFirst(),"data-selection-id",null,e)})).catch((function(){ev.accounts.getUser().hasActiveSubscription()?o(ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+i+"']").getFirst(),"data-selection-id",null,e):(ev.screens.registry[e.id].transition("link-P-failure"),ev.gtm.pageview.trigger("nif-ko"))})).finally((function(){ev.forms.utils.completed(n)}))}catch(t){ev.screens.registry[e.id].transition("link-P-failure"),ev.gtm.pageview.trigger("nif-ko")}}),(function(){ev.screens.registry[e.id].transition("link-P-failure"),ev.gtm.pageview.trigger("nif-ko")}),{ignoreSuccessMessage:!0});const t=ev.utils.getQueryParams();if(Object.keys(t).length>0){if(!t.action)return;try{const n=ev.utils.find(document,"[data-paywall-screen-id='"+e.id+"'] [data-paywall-screen='items'] [data-selection-id='"+t.action+"']").getFirst();if(!n)throw new Error;var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.dispatchEvent(i)}catch(e){}delete t.action,window.history.replaceState({},document.title,window.location.pathname+ev.utils.formatParams(t))}},get items(){return e},set items(t){e=t}}}();
ev.events=function(){EV.GGEvent=EV.GGEvent||{},EV.GGEvent.PM_PURCHASE_CHANGED="gg.pm.purchaseChanged",EV.GGEvent.PM_PURCHASE_REACTIVATED="gg.pm.purchaseReactivated",EV.GGEvent.PM_PURCHASE_REACTIVATED_PROMO="gg.pm.purchaseReactivatedWithPromo";var e=!1,n=!1,t=!1,i=!1,o=null,r=function(e,r){var c=ev.commons.getParams(),a={isSocial:t,isRegister:n,isShowcase:i};ev.service.loginCompleted(a,c,e,r).then((function(e){o=e;var n=ev.commons.referrer.origin()||"",t={},r=function(){ev.marfeel.registerUserType(),ev.gtm.pageview.proccessQueue(),s(o,c)};try{const e=ev.accounts.getMultitenantScriptConfig().brand;if(!a.isRegister&&o.brand&&e&&o.brand!==e){const n=new Date(o[e+"Consent"]),t=new Date;n.toDateString()===t.toDateString()&&ev.gtm.pageview.trigger("login-ok-registered")}}catch(e){}!a.isRegister&&o.hasOwnProperty("gender")&&o.gender&&o.hasOwnProperty("birth_date")&&o.birth_date||n.includes("checkout")||i?o.hasOwnProperty("email_address")&&o.emate"===document.readyState?r():document.onreadystatechange=function(){"complete"===document.readyState&&r()}:(t={screen:"email",onSuccess:r,onClose:r},EV.Event.publish("gg.collect_user_info",t)):(t={screen:"sociodemographic",onSuccess:function(){ev.service.refreshAliasCookies().then((function(){r()})).catch((function(){r()}))},onClose:r},EV.Event.publish("gg.collect_user_info",t))})).catch((function(e){c&&v(c)}))},s=function(e,n){var t=ev.commons.referrer.origin();e=ev.accounts.getUser();n&&n._ref&&(t=n._ref),e.hasActiveSubscription()&&t&&(t.includes("link")||t.includes("checkout"))?ev.commons.referrer.load({ignore:!0}):c(n="app"===e.facet),n?e?v(e):window.location.reload():u(e)?ev.utils.redirect((e&&e.base?e.base:"")+"/perfil/ev/registro-exitoso"):ev.commons.referrer.load({origin:e?e._ref:null,base:e?e.base:null,queryParams:e||null})},a=function(e){var n=ev.commons.referrer.get();return!!n&&n.includes(e)},v=functithParams("/perfil/ev/login",e)},l=function(e){ev.utils.redirectWithParams("/perfil/ev",e)},u=function(e){return n&&!ev.commons.referrer.origin()&&!a("shopping")&&!a("alta")&&(!e||e&&!e._ref)},d=function(e){var n=ev.commons.getParams();const t=(e=e||{}).ev_session;t&&t.hasOwnProperty("network")&&"apple"===t.network&&l(n)},E=function(n,i){e?EV.Event.on(EV.Event.AUTO_SOCIAL_LINK_SUCCESS,(function(e){t=!0,r(n,i)})):r(n,i)},g=function(e){ev.utils.find(document,"#evIdentifier").show(),ev.utils.find(document,"#evIdentifierInfo").hide(),ev.utils.find(document,"#widget_social_icon_btns_desc").hide(),ev.utils.find(document,"#evSocialInfo").show(),ev.utils.find(document,"#evSocialInfo .evl-profile-text__"+e).show(),ev.gtm.pageview.trigger("link-accounts",e)},f=function(e,n){e&&ev.utils.isArray(e.args)&&e.args.includes("apple")&&("user_cancelled_authorize"===e.code&&n(ev.commons.getParams()))},m=function(e){var n=e.ev_session&&e.ev_session.network?e.ev_session.netw.getURL().includes("apple")&&(n="apple"),n};EV.Event.on(EV.Event.AUTO_LINK_SOCIAL_ACCOUNT,(function(){e=!0})),EV.Event.on(EV.Event.FACEBOOK_LINK_AUTHENTICATION,(function(){g("facebook")})),EV.Event.on(EV.Event.GOOGLE_LINK_AUTHENTICATION,(function(){g("google")})),EV.Event.on(EV.Event.APPLE_LINK_AUTHENTICATION,(function(){g("apple")})),EV.Event.on(EV.Event.SOCIALS_LINK_AUTHENTICATION,(function(e){g("multiple")})),EV.Event.on(EV.Event.IDENTITY_LINK_AUTHENTICATION,(function(){ev.utils.find(document,"#evLoginInfo").hide(),ev.utils.find(document,"#evSocialCredentialsInfo").show(),ev.gtm.pageview.trigger("link-accounts","site")})),EV.Event.on(EV.Event.LOGIN_SUCCESS,(function(e){e=e||{},t=!1,ev.gtm.pageview.trigger("login-ok","site"),E(!1,e.response),ev.gtm.pushGA4("login",{method:"site",page:ev.commons.referrer.get()||void 0})})),EV.Event.on(EV.Event.REGISTRATION_SUCCESS,(function(){t=!1,n=!0,ev.gtm.pageview.trigger("thanks","site"),ev.gtm.pushGA4("signup",{method:"site",page:ev.commons.referrer.get()||void 0})})),EV.Event.on(EV.Event.SOCIAL_LOGIN_SUCCESS,(function(e){var n=e.ev_session&&e.ev_session.network?e.ev_session.network:"",i=!1k",m(e)),n||(i=!0),ev.gtm.pushGA4("login",{method:m(e)||void 0,page:ev.commons.referrer.get()||void 0}),E(i,e.ev_session.response)})),EV.Event.on(EV.Event.SOCIAL_REGISTER_SUCCESS,(function(e){t=!0,n=!0,ev.gtm.pageview.trigger("thanks",m(e)),ev.gtm.pushGA4("signup",{method:m(e)||void 0,page:ev.commons.referreTO_SOCIAL_LINK_FAILED,(function(e){f(e,(function(e){l(e)}))})),EV.Event.on(EV.Event.SOCIAL_LOGIN_FAILED,(function(e){console.log(e)})),EV.Event.on(EV.Event.SOCIAL_LINKED_ACCOUNT_FAILED,(function(e){if(e&&e.error&&"apple"===e.network){var n=ev.commons.getParams();ev.commons.storeCustomError(JSON.stringify(e.error)),l(n)}})),EV.Event.on(EV.Event.SOCIAL_REGISTER_FAILED,(function(e){f(e.error,(function(e){v(e)}))})),EV.Event.on(EV.Event.EDIT_PROFILE_COMPLETE_SUCCESS,(function(e){var n=e.widget_guid;n&&-1!==n.indexOf("3")&&ev.gtm.push("onboarding","guardar","info");var t=!ev.utils.find(document,"#change-password").getFirst();ev.service.refreshAliasCookies().then((function(){t&&n&&-1!==n.indexOf("1")&&window.location.reload()}))})),EV.Event.on(EV.Event.SESSION_REFRESH,(function(){})),EV.Event.on(EV.Event.SESSION_EXPIRED,(function(){ev.accounts.logout()})),EV.Event.on(EV.Event.SECURE_SESSION_EXPIRED,(function(){ev.accounts.logout()})),EV.Event.on(EV.Event.LOGIN_FAILED,(function(){})),EV.Event.on(EV.Event.USER_IDENTIFIED,(function(){document.getElementById("evIdentifier").style.display="none",document.getElementById("evLogin").style.display="block",ev.gtm.pageview.trigger("login")})),EV.Event.on(EV.Even.display="block",ev.gtm.pageview.trigger("create-account")})),EV.Event.on(EV.Event.LOGIN_CANCELLED,(function(){document.getElementById("evIdentifier").style.display="block",document.getElementById("evLogin").style.display="none"})),EV.Event.on(EV.Event.REGISTRATION_CANCELLED,(function(){document.getElementById("evIdentifier").style.display="block",document.getElementById("evRegistration").style.display="none"})),EV.Event.on(EV.Event.FORGOT_PASSWORD_SUCCESS,(function(){document.getElementById("evForgotPassword").style.display="none",document.getElementById("evForgotPasswordSuccess").style.display="block",ev.gvResetPassword").style.display="none",document.getElementById("evResetPasswordSuccess").style.display="block",ev.gtm.pn: tu cuenta ha sido vinculada, pero no hemos podido informarla como verificada."),d(e)}))})),EV.Event.on(EV.Event.EDIT_PROFILE_FORM_LOADED,(function(e){const n=document.getElementById(e);if(!n)return;var t=function(){ev.commons.disableFormAutocomplete(),ev.commons.registerAppleHandler("#social-panel-apple form[name='evSocialLinkAccountForm'] button","#social-panel-apple form[name='evSocialLinkAccountForm']")};if(ev.utils.find(n,"input, select").asArray().length>0)return void t();new MutationObserver((function(e,n){for(var i=0;i<e.length;i++)if("childList"===e[i].type){t();break}n.disconnect()})).observe(n,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_PRODUCTS_LOADED,(function(e){var n=ev.utils.find(document,"body").getFirst().classList.value.match("landing-group-v[0-9]+");if(n&&(n=parseInt(n[0].replace(/landing-group-v/g,""),10)),"number"==typeof n&&n>1){ev.subscriptions.landing.products=e,ev.subscriptions.landing.version=n;const t=ev.utils.find(document,".recommended-product");ev.subscriptions.landing.recommended=t.getFirst()?t.getFirst().id.replace("product-",""):null,ev.subscriptions.landing.refresh()}var t=function(e){e.length>0&&e.forEach((function(n){var t=ev.utils.find(n,".product-header").getFirst(),i=ev.utils.find(n,"div[id^='payment-plan-']").getFirst(),o=ev.utils.find(i,".payment-price").getFirst(),r=o.innerHTML.replace(/\/g,"").split(".");if(r[1]="<span class='payment-price__decimal'>"+r[1]+"</span>",o.innerHTML=r.join(","),t.appendChild(i),ev.commons.getURL().includes("checkout")&&e.length<2){var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});i.dispatchEvent(s)}}))},i=ev.utils.find(document,"div[id^='product-']").asArray();if(i.length>0)return void t(i);const o=ev.utils.find(document,".product-list").getFirst();if(!o)return;var r=new MutationObserver((function(e,n){for(var i=0;i<e.length;i++)if("childList"===e[i].type){var o=ev.utils.find(document,"div[id^='product-']").asArray();t(o);break}n.disconnect()}));r.observe(o,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_PRODUCTS_SELECTED,(function(e){if(Array.isArray(e)&&!(e.length<1)){var n={},t={},i=e[0]||{},o=i.paymentPlan||{};t.description=i.description,t.finalPrice=(null!==o.trialPrice?o.trialPrice:o.finalPrice).replace(".",","),t.productName=n.productName,ev.storage.save("local","paywall:product",t),ev.commons.getURL().includes("suscripciones")&&ev.gtm.source.save("lv-landing"),"BUNDLE"===i.type&&(n.isBundlePurchase=!0),i.giftEnabled&&(n.isGiftPurchase=!0),n.produev.utils.redirectWithParams("/perfil/ev/paywall/checkout",n)}}));var p=function(e){ev.utils.find(document,"#"+e+"Beneficiary").toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")};EV.Event.on(EV.Event.PM_INVITATION_KEY_ACCEPTED,(function(){const e="accepted",n=ev.utils.getParam("invitationKey");n&&ev.service.getBeneficiary(n).then((function(n){return ev.service.onBeneficiaryAction(e,n)})).then((function(){p(e)})).catch((function(){p(e)}))})),EV.Event.on(EV.Event.PM_INVITATION_KEY_DECLINED,(function(){p("declined")})),EV.Event.on(EV.Event.PM_BENEFICIARY_DELETED,(function(e){e&&"ACCEPTED"===e.status&&ev.service.onBeneficiaryAction("deleted",e).catch((function(){}))})),EV.Event.on(EV.Event.PM_CHANGE_CARD_OPEN,(function(e){var n=function(e,n){var t=ev.utils.find(n,".add-new-card");t.getFirst()&&t.on(["click"],(function(){ev.gtm.push("myaccount","modificar-tarjeta","nueva-tarjeta");const e=ev.utils.find(n,".change-card-footer").getFirst();if(!e)return;new MutationObserver((function(e,t){for(var i=0;i<e.length;i++)if("childList"===e[i].type){var o=ev.utils.find(n,".change-card-footer .btn-primary");o.getFirst()&&o.on(["click"],(function(){ev.gtm.push("myaccount","modificar-tarjeta","guardar")}));break}t.disconnect()})).observe(e,{attributes:!1,childList:!0,subtree:!0})}))},t=(ev.subscriptions.digital.subscriptions.filter((n=>n.id===e))[0],ev.utils.find(document,".pm2 .stripe-payment").getFirst());if(t)return void n(0,t);const i=ev.utils.find(document,"body").getFirst();if(!i)return;var o=new MutationObserver((function(e,t){for(var i=0;i<e.length;i++)if("childList"===e[i].type){var o=ev.utils.find(document,".pm2 .stripe-payment").getFirst();if(o){n(0,o);break}}t.disconnect()}));o.observe(i,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_CANCEL_PURCHASE_OPEN,(function(e){var n=function(e,n){ev.utils.find(n,"#cancelReason").on(["change"],(function(){if(e&&"PAYPAL"===e.paymentType)!function(e){ev.utils.find(e,"#modal-display-offers").hide(),ev.utils.find(e,".model-cancel-confirm .modal-footer .btn-success").hide()}(n);else{ev.utils.transformInnerTextToHtml(n,"#modal-display-offers > p",ev.commons.getMessageTable().ev.widgets.purchases.cancel.select_an_offer);var t=ev.utils.find(n,"#modal-display-offers .offer");if(t.getFirst()){var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});t.getFirst().dispatchEvent(i)}}}));var t=ev.utimodel-cancel-confirm .modal-footer .btn-success");t.getFirst()&&t.on(["click"],(function(){ev.gtm.push("layout","boton-myaccount","acepto-la-oferta")}))},t=function(e,t){n(e,t);var i=ev.utils.find(t,".model-cancel-confirm .modal-footer .btn-primary");i.getFirst()&&i.on(["click"],(function(){ev.gtm.push("myaccount","cancelar-suscripcion","confirmar")}))},i=ev.subscriptions.digital.subscriptions.filter((n=>n.id===e))[0],o=ev.utils.find(document,".pm2 .modal-cancel-purchase").getFirst();if(o)return void t(i,o);const r=ev.utils.find(document,"body").getFirst();if(!r)return;var s=new MutationObserver((function(e,n){for(var o=0;o<e.length;o++)if("childList"===e[o].type){var r=ev.utils.find(document,".pm2 .modal-cancel-purchase").getFirst();if(r){t(i,r);break}}n.disconnect()}));s.observe(r,{attributes:!1,childList:!0,subtree:!0})})),EV.Event.on(EV.Event.PM_OFFER_APPLY_SUCCESS,(function(){})),EV.Event.on("gg.get_social_google_session",(function(e){detail=e.detail,n=detail.isRegister,i=!0,t=!0,n&&ev.gtm.pageview.trigger("thanks","google");ev.gtm.pageview.trigger("login-ok","google"),E(!1,detail.session)})),EV.Event.on("gg.collect_user_info",(function(e){const n="#"+(e=e||{}).screen+"CollectUserInfo";var t=ev.utils.find(document,n);if(t.getFirst())return t.toggleClass("active"),void ev.utils.find(document,"body").toggleClass("modal-open");var i=function(){e.onClose&&e.onClose(),t.getFirst()&&(t.toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open"))};ev.service.loadUserInfoCollection(e.screen,ev.utils.find(document,".main-content")).then((function(){(t=ev.utils.find(document,n)).getFirst()||i(),e.ignoreOnUpdateHandler=!0,ev.forms.registerDefaultOnSubmit(n+"Form",e),t.toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.addEventHandlerFromData("click","data-popup-close="+n.replace("#",""),(function(e,n){i()}))})).catch((function(){i()}))})),ev.paywall.handleWidgetPreloadEvents()};
ev.fidelityCard=function(){const e="clubCardForm";var t=function(){"beneficiary"==ev.utils.getParam("cardType")&&(ev.utils.find(document,"input[name=cardType][value=beneficiary]").prop("checked",!0),n()),ev.forms.onSubmit(ev.utils.getFormFromId(e),(function(e,t){return ev.service.requestNewFidelityCard(t)}),(function(t){ev.subscriptions.requestSuccess(e,t.ticketId),ev.commons.togglePopup("cardFormPopup")}),void 0,{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("change","data-card-change",(function(e,t){n()})),ev.utils.addEventHandlerFromData("click","data-autopopulate-popup",(function(t,n){i(e),ev.commons.togglePopup("cardFormPopup")}))},i=function(e){const t=ev.utils.getFormFromId(e).getFirst();ev.utils.find(t,"input:not([name=cardType])").val(""),ev.utils.find(t,"[data-form-submit]").show(),ev.utils.find(t,"[name=conditions]").prop("checked",!1)},n=function(){const e=ev.utils.getFormFromId("beneficiary"),t=ev.utils.find(document,"#cardNumberDiv");e.getFirst()&&t.getFirst()&&(e.toggle(),t.toggle(),ev.utils.find(e.getFirst(),"input").prop("required",ev.utils.isVisible(e.getFirst())),ev.utils.find(t.getFirst(),"input").prop("required",ev.utils.isVisible(t.getFirst())))};return{init:t,initform:function(){ev.utils.getFormFromId(e).show(),ev.utils.find(document,"[data-subscription-back] i").hide(),t()}}}();
ev.forms=function(){var e=function(e){const i=ev.accounts.getUserSessionId(),a=ev.accounts.getUser().guid;"string"==typeof i&&"string"==typeof a||console.log("Guid no disponible");try{Object.keys(e).forEach((function(t){var r=e[t];if(r.dateValues){if(""===r.dateValues.day&&""===r.dateValues.month&&""===r.dateValues.year)return void(e[t]="");if(!ev.utils.validateDateString(r.dateValues.day,r.dateValues.month,r.dateValues.year))throw{code:"ATTRIBUTE_VALIDATION_FAILED",args:[t,r]};const i=r.dateValues.year+"/"+ev.utilsdateValues.day);e[t]=i+" 00:00:00"}}))}catch(e){return Promise.reject(e)}return ev.service.getUser(a,i).then((function(n){n=n||{};var o=Object.assign({},n.userProfile),s=[];Object.keys(e).forEach((function(i){var a=t(o.attributes);s.push(r(i,e[i],a))}));const u={attributes:ser(a,i,u)}))},t=function(e){return(e=e||[]).reduce((function(e,t){return e[t.name]=decodeURIComponent(t.value),e}),{})},r=function(e,t,r){if(ev.utils.isArray(t)){r.hasOwnProperty(e)||(r[e]="");var i=r[e].includes("|")?r[e].split("|"):""!==r[e]?[r[e]]:[],a=[];t.forEach((function(e){"object"==typeof e?(Object.keys(e).forEach((function(t){!i.includes(t)&&e[t]?i.push(t):e[t]||(i=i.filter((function(e){return!(e===t)})))})),t=i.slice()):(a.push(e),t=a.slice())})),t=(t=a.length?a:i).join("|")}return{name:e,value:t}},i=function(e,t,r,i,a){e&&e.getFirst()&&e.on(["submit"],(function(e,o){e.preventDefault(),n.loading(o),n.cleanErrors(o),t(o,ev.serialize.form(o)).then((function(e){a&&a.ignoreSuccessMessage||n.success(),n.completed(o),r&&r(e)})).catch((function(e){const t=e.validationErrors||[];!e.ignoreOnFailure&&i&&i(e),a&&a.ignoreFailureMessage||!e.errorMessage||n.error(e.errorMessage),a&&a.ignoreValidationErrors||t.forEach((function(e){n.inputError(o,e)})),n.completed(o)}))}))},a=function(e){const t=[];if(null===e)return!1;n.cleanErrors(e);return ev.utils.find(e,"[required]:not([data-form-disabled=true]), [data-form-required]:not([data-form-disabled=true])").each((function(r){var i=!0,a=null===r.getAttribute("data-form-required")||"true"===r.getAttribute("data-form-required");if(r.getAttribute("data-form-group")){const e=r.getAttribute("data-form-group"),s=r.getAttribute("data-form-group-type"),u=ev.utils.find(r,"input:not([data-form-disabled=true]), select:not([data-form-disabled=true])").asArray();var o=u.some((function(e){return!e.value||/^\s*$/.test(e.value)}));o||"checkbox"!==s&&"radio"!==s||(o=!n.isAnyCheckboxChecked(u)),o&&a&&(i=!1,t.push({field:e,message:"Requerido"}))}else a&&(r.value&&!/^\s*$/.test(r.value)||(i=!1,t.push({field:r.name,message:"Requerido"})));if(i&&r.hasAttribute("data-form-length")){const e=parseInt(r.getAttribute("data-form-length"));"string"==typeof r.value&&r.value.length<e&&(i=!1,t.push({field:r.name,message:"Min. "+e+" carcteres"}))}if(i&&r.hasAttribute("data-form-max-length")){const e=parseInt(r.getAttribute("data-form-max-length"));"string"==typeof r.value&&r.value.length>e&&(i=!1,t.push({field:r.name,message:"Max. "+e+" carcteres"}))}if(i&&r.hasAttribute("data-form-validator")){const a=r.getAttribute("data-form-validator");if("nif"===a){const a=ev.utils.find(e,"[name=document_type]").asArray().filter((function(e){return e.checked}))[0];"CIF"===(a?a.value:"NIF")?ev.nifValidator.isCifValid(r.value)||(i=!1,t.push({field:r.name,message:"CIF invlido"})):ev.nifValidator.isNifValid(r.value)||ev.nifValidator.isNieValid(r.value)||(i=!1,t.push({field:r.name,message:"NIF invlido"}))}if("email"===a){new RegExp("^[_a-zA-Z0-9-']+([+.][_a-zA-Z0-9-']+)*@[a-zA-Z0-9-]+(.[a-zA-Z0-9-]+)*.(([0-9]{1,3})|([a-zA-Z]{2,20}))$").test(r.value)||(i=!1,t.push({field:r.name,message:"Formato invlido"}))}if("cellphone"===a){/^([6-7]{1})(\d{8})/.test(r.value)||(i=!1,t.push({field:r.name,message:"Formato invlido"}))}}})),!(t.length>0)||(t.forEach((function(t){n.inputError(e,t)})),!1)},n={error:function(e){var t=ev.utils.find(document,"[data-profile-alerts]");t.append('<p class="error">'+e+"</p>"),setTimeout((function(){t.empty()}),5e3)},success:function(){var e=ev.utils.find(document,"[data-profile-success]");e.show(),setTimeout((function(){e.hide()}),5e3)},loading:function(e){ev.utils.find(e,"[data-form-submit]").prop("disabled",!0),ev.utils.find(e,"[data-form-submit]").addClass("disabled"),document.body.style.cursor="wait"},completed:function(e){ev.utils.find(e,"[data-form-submit]").prop("disabled",!1),ev.utils.find(e,"[data-form-submit]").removeClass("disabled"),document.body.style.cursor="default"},cleanErrors:function(e,t){const r=ev.utils.find(e,t||"input, select, textarea");r.removeClass("form__input--error"),r.asArray().forEach((function(t){ev.utils.find(e,"[data-error-for='"+t.name+"']").hide(),ev.utilction(e,t){const r=ev.utils.find(e,"textarea[name='"+t.field+"'], input[name='"+t.field+"'], select[name='"+t.field+"'], [data-form-group='"+t.field+"'] input, [data-form-group='"+t.field+"'] select"),i=ev.utils.find(e,"[data-error-for='"+t.field+"']");ev.utils.findth>0&&i.empty(),r.once(["focus","change"],(function(e){r.removeClass("form__input--error"),i.hide(),i.empty()})),r.addClass("form__in'>"+t.message+"</p>")},isAnyCheckboxChecked:function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return!0;return!1},attr:{map:{Alias:"display_name","Correo electrnico":"email_address"},get:function(e){return this.map[e]?this.map[e]:e}}};return{init:function(t){t=t||{};var r="data-form-submit",a=ev.utils.findfromDataAndReturnArray(r);if(a.length){var n=[];a.forEach((function(e){const t=e.getAttribute(r);t&&n.push(t)})),ev.utils.unique(n).forEach((function(r){const a=ev.utils.getFormFromId(r);i(a,(function(r,i){return ev.forms.validate(r)?e(i):Promise.reject({ignoreOnFailure:t.ignoreOnFailure})}),(function(e){EV.Event.publish("gg.user_updated",{data:ev.serialize.form(a.getFirst()),response:e})}),null,t)}))}var o=document.createEvent("Event");o.initEvent("submit",!0,!0),a.forEach((function(e){const t=e.getAttribute(r);t&&e.addEventListener("click",(function(){ev.utils.getFormFromId(t).getFirst().dispatchEvent(o)}))}))},onSubmit:i,utils:n,validate:a,sendDataToEvolok:e,registerDefaultOnSubmit:function(t,r){r=r||{};const o=ev.utils.find(document,t);r.onSuccess||(r.onSuccess=function(e){EV.Event.publish("gg.user_updated",{data:ev.serialize.form(o.getFirst()),response:e})}),i(o,(function(t,r){return a(t)?e(r):Promise.reject({ignoreOnFailure:!0})}),r.onSuccess,(function(e){if("REQUIRE_UNIQUIE_PROFILE_AND_REALM"!==e.code&&"ATTRIBUTE_VALIDATION_FAILED"!==e.code||!e.args||!e.args[0])n.error(ev.comm_UNIQUIE_PROFILE_AND_REALM"===e.code?e.args[0]+" existente":"Formato invlido";n.inputError(o.getFirst(),{field:n.attr.get(e.args[0]),message:t})}})),r.ignoreOnUpdateHandler||EV.Event.on("gg.user_updated",(function(e){ev.service.refreshAliasCookies()}))}}}();
ev.gtm=function(){const e="ev_gg_vpv",t=ev.accounts.getMultitenantScriptConfig().cookie.domain;var n,o,i,a,s,r=function(){return ev.utils.getParam("facet")||"web"},u={save:function(n,o){n=n||"others",(o=o||{}).cookieEnabled?ev.cookie.set(e,n,null{var n=null;return ev.utils.isCookiePresent(e)?(n=ev.cookie.get(e),ev.cookie.remove(e,t),this.save(n)):n=ev.storage.load("session",e),n},delete:function(){ev.storage.remove("session",e)}},c=(n=null,o=null,i=[],a=function(){i.length&&(i.forEach((function(e){s(e)})),i=[])},s=function(e){gg.gtm.virtualPageView(e)},{conf:function(e,t){n=e||n,o=t||o,document.onreadystatechange=function(){"complete"===document.readyState&&a()}},trigger:function(e,t){u.get()||u.save();const a="/vpv/"+n+"/"+o+"/"+r()+"/"+u.get()+"/"+e+(t?"/"+t:"");return window.dataLayer&&n&&o&&("complete"!==document.readyState?i.pushunction(e,t,n){var o={};if("myaccount"===e)o={myaccount_action:t,myaccount_detail:n};else if("usuarios"!==e&&"onboarding"!==e||"newsletter"!==t)"evolok"===e&&"segments"===t?o={segments_name:n}:"layout"===e?o={layout_action:t,layout_detail:n}:"conversion"===e&&(o={method:t,page:n});else{var i=n.split("-");o={newsletter_action:i[0],newsletter_detail:i.length>1?i[1]:void 0}}return o},g=function(e,t){d("event_generico",e,t)},d=function(e,t,n){var o=n||{},i={event:"event-generico",eventName:t=t||"event-generico"},a=Object.assign(i,o)||i;dataLayer.push(a)};return{pageview:c,getUserInfo:function(){const e=ev.accounts.getUser();return{userId:e&&e.uid?e.uid:"",facet:r(),userType:e&&e.uid?e.getType():"anonimo",monthsFromUserRegistration:e&&e.uid&&void 0!==e.getRegisteredMonthsValue?e.getRegisteredMonthsValue():void 0,evolokId:e&&e.uid&&void 0!==e.getEvolokId&&e.getEvolokId()||void 0,roles:e&&e.uid&&void 0!==e.getRoleName&&e.getRoleName()||void 0,registerDate:e&&e.uid&&void 0!==e.getRegisterDate&&e.getRegisterDate()||void 0,newsletters:e&&e.uid&&void 0!==e.getNewsletterList&&e.getNewsletterList()||void 0,communications:e&&e.uid&&void 0!==e.getCommunicationList&&e.getCommunicationList()||void 0}},getFinalPrice:function(){var e=ev.paywall.utils.basket.get(),t=parseFloat(e.products[0].paymentPlan.trialPrice),n=parseFloat(e.products[0].paymentPlan.finalPrice);return{precioSuscripcion:(e=isNaN(t)?n:t).toFixed(2).replace(/\.?0+$/,"")}},source:u,push:function(e,t,n,o){if(o){var i=[e,t,n].join("|");if(v[i])return;v[i]=!0}dataLayer.push({event:e,eventAction:t,eventLabel:n,eventValue:null});var a=l(e,t,n);void 0!==a&&("usuarios"!==e&&"onboarding"!==e||"newsletter"!==t||(e="newsletter,n,a,r,d=function(t,n){var a=document.createElement("a");a.href=e.getPdf+"?transactionId="+t,a.download=n+".pdf",a.click()},o=function(){(function(t){return $.ajax({url:e.getInvoices,type:"GET",data:$.param({guid:t}),contentType:"application/json"})})(n).then(i)},i=function(e){r=e;for(var n=a.tBodies,d=0;d<n.length;d++)a.removeChild(n[0]);if(r){r.sort((function(e,t){return new Date(e.invoiceDate)-new Date(t.invoiceDate)}));var o=a.createTBody();r.forEach((function(e,n,a){var r=o.insertRow();if(r.insertCell(-1).appendChild(document.createTextNode(e.subscriptionId)),r.insertCell(-1).appendChild(document.createTextNode(e.invoiceId)),r.insertCell(-1).appendChild(document.createTextNode(e.productName)),r.insertCell(-1).appendChild(document.createTextNode(new Date(e.date).toLocaleDateString())),r.insertCell(-1).appendChild(document.createTextNode(e.grossAmount.toLocaleString(navigator.language,{style:"currency",currency:"EUR"}))),r.insertCell(-1).appendChild(document.createTextNode(c(e))),!t){var d=document.createElement("DIV");d.classList.add("dropdown");var i=document.createElement("BUTTON");i.setAttribute("data-toggle","dropdown"),i.appendChild(document.createTextNode("Gestionar")),d.appendChild(i);var u=document.createElement("UL");u.classList.add("dropdown-menu"),"PAID"!=e.state||e.corporate||l(u),e.corporate&&"PENDING"==e.state&&l(u),d.appendChild(u);var s=r.insertCell(-1);u.children.length>0&&s.appendChild(d)}}))}},c=function(e){switch(e.state){case"PAID":return"Pagada";case"PENDING":return"Corporativa";case"SUBSTITUTED":return"Sustituida";case"RECTIFIED":return"Rectificada";case"REFUNDED":return"Abonada";default:return state}},l=function(e){var t=document.createElement("LI"),n=document.createElement("A");n.setAttribute("value","download"),n.appendChild(document.createTextNode("Descargar")),n.addEventLis,n=Array.from(t.parentElement.children).indexOf(t),a=r[n];d(a.transactionId,a.invoiceId)})),t.appendChild(n),e.appendChild(t)};return{init:function(n){e=n,t=ev.accounts.isApp()},initPage:function(e){if(n=e,a=document.getElementById("invoicesTable"),t){var r=a.tHead.firstChild.lastElementChild;"Acciones"==r.textContent&&r.remove()}o()}}}();
ev.marfeel=function(){var e=function(e){try{window.marfeel.cmd.push(e)}catch(e){}};return{registerUserType:function(){var n=function(){const e=ev.accounts.getUser();return{userId:e&&e.uid?e.uid:"",userType:e&&e.uid?e.hasActiveSubscription()?"paid":"logged":"anonymous"}}();"anonymous"!=n.userType&&e(["compass",function(e){e.setUserType(n.userType)}])},registerTrackConversion:fun);
ev.newsletter=function(){var e={};return{init:function(){var t=ev.utils.find(document,"form#newsletters__form").getFirst();ev.utils.find(t,"input[type=checkbox]").each((function(t){e[t.name.split(".")[1]]=t.checked}));var n=ev.utils.find(document,"#autopopulatePopup").getFirst();EV.Event.on("gg.user_updated",(function(t){if(t.response.changedAttributes.some((function(e){return"UPDATED"==e.value&&"newsletters"==e.name}))){var r=n?"usuarios":"onboarding";t.data.newsletters.forEach((function(t){for(var n in t)if(t[n]!=e[n]){var i=t[n]?"on":"off";ev.gtm.push(r,"newsletter",i+"-"+n),e[n]=t[n]}}))}}))}}}();
ev.nifValidator=function(){const r="TRWAGMYFPDXBNJZSQVHLCKE",t=["X","Y","Z"],n=new RegExp("[[A-H][J-N][P-S]UVW][0-9]{7}[0-9A-J]");return{isNifValid:function(t){if(!t)return!1;const n=(t=t.toUpperCase()).substring(0,8);return n+r.charAt(parseInt(n)%23)===t},isNieValid:function(n){if(!n)return!1;const i=(n=n.toUpperCase()).substring(0,1),e=t.indexOf(i.toUpperCase());if(e<0)return!1;const a=n.substring(1,8);return i+a+r.charAt(parseInt(e+a)%23)===n},isCifValid:function(r){if(!r)return;if(r=r.toUpperCase(),n.test(r))return!1;var t=0,e=0;for(i=2;i<8;i+=2){if((a=parseInt(r.charAt(i)))<0)return!1;t+=a}for(i=1;i<9;i+=2){var a;if((a=parseInt(r.charAt(i)))<0)return!1;var s=2*a;s>9&&(s=s-10+1),e+=s}const f=(t+e)%10,u=f>0?10-f:0,c=r.charAt(0),o=r.charAt(8);return""!==c&&("ABEH".indexOf(c)<0&&"JABCDEFGHI".charAt(u)===o||"KPQS".indexOf(c)<0&&u===parseInt(o))}}}();
ev.paywall=function(){const e=".stripe-submit-btn",n=".paypal-submit-btn",a=".evl-payw-btn-back";var t,i,r={id:null,paymentMethod:null,beneficiary:null},o=null,s=null,c=document.createEvent("Event"),u=null,d={enabled:!1,screen:"existing-card"},l=function(e){if(ev.utils.find(document,".cvc-help-container").toggle(),ev.utils.find(document,".evl-payw-creditcard-img").toggle(),ev.utils.find(document,".evl-pay-paypal, .evl-payw-paypal__xtratitle").toggle(),d.screen=e,"existing-card"===e){var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});ev.utils.find(document,"#existing-card-container .card-thumbnail").getFirst().dispatchEvent(n)}},v=function(){const n="data-paywall",a=ev.storage.load("local","paywall:product"),t=ev.utils.findfromDataAndReturnArray(n);if(t.length<1||null===a)return;if(t[0].closest(".checkout--v2")){var i=ev.utils.find(document,e);i.prop("textContent",""),i.append('<span class="span-text-pay">Pagar hoy:</span><span class="span-text-price"><strong>'+a.finalPrice+" </strong></span>")}t.forEach((function(e){const t=e.getAttribute(n);Object.keys(a)e){e=e||{},ev.subscriptions.products.referrer.delete(),(ev.accounts.isApp()||"app"===e.facet)&&ev.app.fwdToPurchaseCompleted(),ev.utils.redirectWithParams("/perfil/ev/paywall/pago-exitoso",e)},m=function(e,n){n=n||{},ev.service.purchaseCompleted(e).then((function(){ev.marfeel.registerTrackConversion("subscribe"),p(n.params)})).catch((function(){p(n.params)}))},f=function(e){return ev.utils.find(e,"[name='fiscalEnabled']")},E=function(){const e=ev.utils.getFormFromId("fiscalAddressForm"),n=ev.utils.getFormFromId("simplUserInfoForm").getFirst(),a="input[data-form-required=true]:not([data-form-shared=true]), select[data-form-required=true]:not([data-form-shared=true])",t=ev.utils.find(n,a);e.toggle(!0);var i=ev.utils.isVisible(e.getFirst());t.prop("required",!i),f(n).attr("data-form-disabled",i),i&&ev.forms.utils.cleanErrors(n,a)},g=function(e){e.code&&"string"==typeof e.code?"no_products_selected"===e.code?ev.commons.referrer.load():"create_payment_failed"!==e.code&&_(e.code.toLowerCase()):e.message&&"string"==typeof e.message?ev.forms.utils.error(e.message):_("")},_=function(e){try{ev.forms.utils.error(b({lang:"es",code:e}))}catch(n){ev.gtm.pageview.trigger("error"),ev.utils.find(document,".card--red__error-message").append(e),u.addClass("evl-payw-box--error-show")}},b=function(e){const n={es:{authentication_required:"Es necesario que intentes nuevamente el pago y autenticar tu tarjeta cuando se te solicite durante la transaccin.",approve_with_id:"El pago debera ser reintentado una vez ms. Si el problema persiste, es necesario que contactes con tu entidad bancaria.",call_issuer:"Es necesario que contactes con tu entidad bancaria para ms informacin.",card_not_supported:"Es necesario que contactes con tu entidad bancaria para verificar que tu tarjeta puede ser utilizada para realizar este tipo de transaccin.",card_velocity_exceeded:"Es necesario que contactes con tu entidad bancaria para ms informacin.",currency_not_supported:"Es necesario que contactes con tu entidad bancaria para verificar que tu tarjeta puede ser utilizada para este tipo de moneda.",do_not_honor:"Es necesario que contactes con tu entidad bancaria para ms informacin.",do_not_try_again:"Es necesario que contactes con tu entidad bancaria para ms informacin.",duplicate_transaction:"Es necesario que verifiques si existe un pago reciente para esta misma transaccin.",expired_card:"Es necesario que utilices otra tarjeta.",fraudulent:"Es necesario que contactes con tu entidad bancaria para ms informacin.",generic_decline:"Es necesario que contactes con tu entidad bancaria para ms informacin.",incorrect_number:"Nmero de tarjeta invlido.",incorrect_cvc:"CVC invlido.",incorrect_pin:"PIN invlido.",insufficient_funds:"Es necesario que utilices otra tarjeta.",invalid_account:"Es necesario que contactes con tu entidad bancaria para ms informacin.",invalid_amount:"Es necesario que contactes con tu entidad bancaria para ms informacin.",invalid_cvc:"CVC invlido.",invalid_expiry_year:"Fecha de expiracin invlida.",invalid_number:"Nmero de tarjeta invlido.",invalid_pin:"PIN invlido.",issuer_not_available:"El pago debera ser reintentado una vez ms. Si el problema persiste, es necesario que contactes con tu entidad bancaria.",lost_card:"Es necesario que contactes con tu entidad bancaria para ms informacin.",merchant_blacklist:"Es necesario que contactes con tu entidad bancaria para ms informacin.",new_account_information_available:"Es necesario que contactes con tu entidad bancaria para ms informacin.",no_action_taken:"Es necesario que contactes con tu entidad bancaria para ms informacin.",not_permitted:"Es necesario que contactes con tu entidad bancaria para ms informacin.",pickup_card:"Es necesario que contactes con tu entidad bancaria para ms informacin.",processing_error:"El pago debera ser reintentado una vez ms. Si el problema persiste, intentar ms tarde.",reenter_transaction:"Es necesario que intentes nuevamente el pago y autenticar tu tarjeta cuando se te solicite durante la transaccin.",restricted_card:"Es necesario que contactes con tu entidad bancaria para ms informacin.",revocation_of_all_authorizations:"Es necesario que contactes con tu entidad bancaria para ms informacin.",revocation_of_authorization:"Es necesario que contactes con tu entidad bancaria para ms informacin.",security_violation:"Es necesario que contactes con tu entidad bancaria para ms informacin.",service_not_allowed:"Es necesario que contactes con tu entidad bancaria para ms informacin.",stolen_card:"Es necesario que contactes con tu entidad bancaria para ms informacin.",stop_payment_order:"Es necesario que contactes con tu entidad bancaria para ms informacin.",transaction_not_allowed:"Es necesario que contactes con tu entidad bancaria para ms informacin.",try_again_later:"El pago debera ser reintentado una vez ms. Si el problema persiste, es necesario que contactes con tu entidad bancaria.",withdrawal_count_limit_exceeded:"Es necesario que utilices otra tarjeta.",error_processing_order:"No es posible continuar debido a que ya posees una suscripcin del mismo tipo en vigor.",payment_intent_authentication_failure:"No podemos autenticar tu mtodo de pago. Elige otro mtodo y vuelve a intentarlo.",setup_intent_authentication_faiElige otro mtodo y vuelve a intentarlo.",incomplete_number:"El nmero de tu tarjeta est incompleto.",incomplete_expiry:"La fecha de caducidad de tu tarjeta est incompleta.",incomplete_cvc:"El cdigo de seguridad de tu tarjeta est incompleto.",card_declined:"Es necesario que contactes con tu entidad bancaria para ms informacin."}ode);return n},y=(t="evolok:basket",i="evolok:properties",{basket:{get:function(){return ev.storage.load("session",t)},save:function(e){ev.storage.save("session",t,e,!0)},remove:function(e){ev.storage.remove("session",t),EV.Event.publish(EV.Event.PM_CLEARED_BASKET,e)}},extraProperties:{get:function(){return ev.storage.load("session",i)||ev.storage.save("session",i,{},!0),ev.storage.load("session",i)},save:function(e){ev.storage.save("session",i,e,!0)},remove:function(){ev.storage.remove("session",i)}}});return{init:function(t){t=t||{};const i=ev.accounts.getUser(),p=ev.utils.getParam("isGiftPurchase"),b=ev.utils.getFormFromId("simplUserInfoForm"),h=f(b.getFirst()).getFirst(),P=ev.utils.find(document,"#beneficiaryMessage");P&&P.val(""),u=ev.utils.find(document,".evl-payw-box--error"),c.initEvent("submit",!0,!0),ev.utils.find(document,e).on(["click"],(function(e){e.preventDefault(),ev.utils.spinner.show([],!0),w(o="card")})),ev.utils.find(document,n).on(["click"],(function(e){e.preventDefault(),ev.commons.queryParams.save(),ev.utils.spinner.show([".evl-pay-paypal"],!1,".evl-payw-box>"),w(o="paypal")}));var w=function(t){[e,n,a].forEach((function(e){ev.utils.find(document,e).prop("disabled",!0)})),EV.Event.publish(EV.Event.PM_PAYMENT_TYPE_ENFORCE,{paymentTypeName:t.toUpperCase(),showOtherPaymentMethods:!0})};EV.Event.on(EV.Event.PM_PAYMENT_TYPE_CHANGED,(function(){q()}));var q=function(){b.getFirst().dispatchEvent(c)};t={onSuccess:function(){S()},onFailure:function(){C()},ignoreSuccessMessage:!0,ignoreOnFailure:!1};ev.subscriptions.fiscal.init(t),ev.forms.onSubmit(b,(function(e,n){if(!ev.forms.validate(e))return Promise.reject({});if(n.beneficiary){if(n.beneficiary!==s){s=n.beneficiary;var a=y.basket.get();a.orderType="GIFT",y.basket.save(a);var t=y.extraProperties.get();t.beneficiary=s,n.beneficiaryMessage&&""!=n.beneficiaryMessage.trim()&&(t.beneficiaryMessage=n.beneficiaryMessage),y.extraProperties.save(t)}delete n.beneficiary}return ev.forms.sendDataToEvolok(n)}),(function(){h&&h.checked?ev.subscriptions.fiscal.dispatch():t.onSuccess()}),(function(e){"REQUIRE_UNIQUIE_PROFILE_AND_REALM"===e.code?ev.forms.utils.inputError(b.getFirst(),{field:"email_address",message:"Email existente"}):"ATTRIBUTE_VALIDATION_FAILED"===e.code&&ev.forms.utils.inputError(b.getFirst(),{field:"email_address",message:"Formato invlido"}),C()}),{ignoreSuccessMessage:!0});var S=function(){r.paymentMethod===o&&r.beneficiary===s?k():EV.Event.publish(EV.Event.PM_PROCESS_ORDER)};EV.Event.on(EV.Event.PM_CREATE_ORDER_SUCCESS,(function(e){r.paymentMethod=o,r.id=e.id,r.beneficiary=e.beneficiary||null,k()}));var k=function(){ev.service.requestFullInvoice(r.id).then((sOwnProperty("errorMessage")&&ev.forms.utils.error(e.errorMessage)}))},A=function(){if("paypal"===o)return void EV.Event.publish(EV.Event.PM_DO_PAYPAL_CHECKOUT,{});if(function(){const e=["card-number","card-expiry","card-cvc"];for(var n=0;n<e.length;n++)if(ev.utils.find(document,"#"+e[n]).hasClass("invalid"))return!0;return!1}()&&(!d.enabled||"new-card"===d.screen)nd(document,"[attrib-data-hide=true]").asAstyle="display:none")})),ev.utils.find(document,".stripe-payment-form").getFirst().dispatchEvent(c)};EV.Event.on(EV.Event.PM_PAYMENT_SUCCESS,(function(e){ev.commons.queryParams.save();var n={params:ev.commons.queryParams.get()};m(e,n)})),EV.Event.on(EV.Event.PM_ERROR,(function(e){if(4us&&e.data&&"STREX0012"===e.data.appErrorCode){var n=nullilter((function(e){return null!=e&&""!==e}));n=a.includes("card_declined")?a.filter((function(e){return"card_declined"!==e}))[0]:a[0],_(n)}else e.error?g(e.error):g(e);C()}));var C=function(){ev.utils.spinner.hide(),ev.commons.queryParams.delete(),[e,n,a].forEach((function(e){ev.utils.find(document,e).prop("disabled",!1)}))};h&&h.checked&&E(),ev.utils.addEventHandlerFromData("change","data-fiscal-change",(function(e,n){E()})),ev.utils.addEventHandlerFromData("keyup","bind-input",(function(e,n){R(e,n)}));var R=function(e,n){ev.utils.find(document,"["+n+"="+e.getAttribute(n)+"]").asArray().forEach((function(n){e.id!=n.id&&(n.value=e.value)}))};ev.utils.find(document,".card--red__btn").on(["click"],(function(){ev.gtm.pageview.trigger("payment"),u.removeClass("evl-payw-box--error-show"),ev.utils.find(document,".card--red__error-message").empty()})),ev.utils.find(document,a).on(["click"],(function(){if(d.enabled&&"new-card"===d.screen){var e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});ev.utils.find(document,"#select-existing-card-panel-btn").dispatchEvent(e)}else ev.subscriptions.products.referrer.load()})),EV.Event.on(EV.Event.PM_STRIPE_PURCHASE_PANEL_NEW_CARD,(function(){l("new-card")})),EV.Event.on(EV.Event.PM_STRIPE_PURCHASE_PANEL_EXISTING_CARD,(function(){l("existing-card")})),v(),!i.hasActiveSubscription()||p&&"false"!==p||ev.commons.togglePopup("has-digital-access")},utils:y,renderSubscriptionInfo:v,handleWidgetPreloadEvents:function(){var e;e={},ev.commons.getURL().includes("paypal")&&(e=ev.utils.getQueryParams()),EV.Event.on(EV.Event.PM_SUBSCRIPTION_APPROVED,(function(){var n={params:ev.commons.queryParams.get()},a={approved:{processPaymentResults:[{purchaseId:e.subscription_id||null}]}};m(a,n)})),EV.Event.on(EV.Event.PM_SUBSCRIPTION_REJECTED,(function(){var e=ev.commons.queryParams.get();ev.utils.redirectWithParams("/perfil/ev/paywall/checkout",e)})),EV.Event.on(EV.Event.PM_SUBSCRIPTION_UPGRADED,(function(e){var n=function(){var e=ev.commons.queryParams.get();ev.utils.redirectWithParams("/perfil/ev/paywall/paypal/oferta-aplicada",e)};try{var a=e.approved.processPaymentResults[0];ev.service.changeSubscriptionCompleted(a.purchaseId,ev.subscriptions.digital.changeSubscriptionActionType.ALTA,a.roleAssignmentType).finally((function(){n()}))}catch(e){n()}})),EV.Event.on("pm.subscriptionUpgradeRejected",(function(){var e=ev.commons.queryParams.get();ev.utils.redirectWithParams("/perfil/ev/suscripciones",e)})),EV.Event.on(EV.Event.PM_STRIPE_PURCHASE_CARD_EXISTS,(function(e){if((e=e||{}).cardExists){d.enabled=!0;const e=ev.utils.find(document,"#existing-card-container").getFirst();if(!e)return;const n={attributes:!1,childList:!0,subtree:!0};new MutationObserver((function(e,n){for(var a=0;a<e.length;a++)if("childList"===e[a].type){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});ev.utils.find(document,"#existing-card-container .card-thumbnail").getFirst().dispatchEvent(t),ev.utils.find(document,".evl-pay-paypal, .evl-payw-paypal__xtratitle").toggle();break}n.disconnect()})).observe(e,n)}else ev.utils.find(document,".cvc-help-container").toggle(),ev.utils.find(document,".evl-payw-creditcard-img").toggle();ev.utils.find(document,"#evPayment .evl-spinner").toggle()}))},link:function(){ev.forms.onSubmit(ev.utils.getFormFromId("linkSubscription"),(function(e,n){return ev.service.sap.link(n)}),(function(){ev.utils.find(document,"#linkSubscription").toggle(),ev.utils.find(document,"#linkSubscriptionSuccess").toggle(),ev.gtm.pageview.trigger("nif-ok")}),(function(e){e=e||{},ev.utils.find(document,"#linkSubscription").toggle();var n=ev.utils.find(document,"#linkSubscriptionFailure"),a=ev.utils.find(n.getFirst(),".evl-paywall-link__generic-error");e.errorCode&&"client.alreadyLinked"===e.errorCode&&(a=ev.utils.find(n.getFirst(),".evl-paywall-link__already-linked-error")),a.toggle(),n.toggle(),ev.gtm.pageview.trigger("nif-ko")}))}}}();
ev.print={init:function(){ev.forms.onSubmit(ev.utils.getFormFromId("vouchersForm"),(function(e,t){return ev.service.requestEVouchess("addressForm"),(function(e,t){const r=ev.utils.find(document,"[name=town]").getFirst(),i=ev.utils.find(document,"[name=streetName]").getFirst();return t.townCode=r.getAttribute("code"),t.streetCode=i.getAttribute("code"),ev.service.changeDelivery(t)}),(function(e){ev.subscriptions.requestSuccess("addressForm",e.ticketId)})),ev.forms.onSubmit(ev.utils.getFormFromId("editionForm"),(function(e,t){return ev.service.changeEdition(t)}),(function(e){ev.subscriptions.requestSuccess("editionForm",e.ticketId)})),ev.utils.addEventHandlerFromData("change","name=country",(function(e,t){const r=ev.utils.find(document,"[name=province]"),i=ev.utils.find(document,"[name=town]"),o=ev.utils.find(document,"[name=streetName]");"AND"===e.value?(lv.profile.streets.disable(),r.prop("required",!1),r.prop("disabled",!0),r.val(""),i.prop("disabled",!1),o.prop("disabled",!1)):(lv.profile.streets.enable(),r.prop("required",!0),r.prop("disabled",!1))}))}};
ev.recaptcha=funchis.render=function(){r||($(a.selector).append("<form id='"+e+"'><div id='"+c+"' class='livefyre-captcha-box' ></div></form>"),grecaptcha.render(c,{callback:a.callback,"expired-callback":a.expiredCallback,sitekey:ev.accounts.getMultitenantScriptConfig().recaptcha.key,size:"compact"}),r=!0)0,gg.util.getScript("https://www.google.com/recaptcha/api.js?onload=grecaptchaOnLoad&render=explicit"),window.grecaptchaOnLoad=function(){c=!0,e.forEach((function(e){e.render()}))})},register:function(a){var t="gg-recaptcha-form-"+e.length,n="gg-recaptcha-renderel-"+e.length,i=new r(t,n,a);e.push(i),c&&i.render()}}}();
ev.screens=function(){var e,i={},t={click:function(i,t,n){var r="data-paywall-screen-"+t;e(i,"["+r+"]").each((function(e){e.addEventListener("click",(function(){n(this.getAttribute(r))}))}))},findInScreen:e=function(e,i){return ev.utils.find(document,'[data-paywall-screen-id="'+e+'"] '+i)}};return{factory:function(e,n,r,s,c){c=c||{},i[e]={flow:e,screen:n,layou.utils.findInScreen(this.flow,"[data-paywall-screen="+this.screen+"]").show(),c.triggerPageView&&ev.gtm.pageview.trigger(this.screen)},hide:function(){ev.screens.utils.findInScreen(this.flow,"[data-paywall-screen="+this.screen+"]").hide()},transition:function(e){this.trail.pction(){var e=this.trail.length;e>0&&(this.hide(),this.screen=this.trail[e-1],this.load(),this.trail.splice(e-1,1))},hasPrevious:function(){return this.trail.length>0}},function(e){var n=i[e];t.click(e,"transition",(function(e){n.transition(e)})),t.click(e,"back",(function(){n.back()}))}(e),c.triggerPageView&&(ev.gtm.source.save(r),ev.gtm.pageview.conf(s,e),ev.gtm.pageview.trigger(n))},registry:i,utils:t}}();
ev.serialize=function(){var e=function(e){for(var a={},n=0;n<e.length;n++)t(e[n],a);return a},t=function(e,t){t=t||{};var n=e.value,r=e.getAttribute("name");if(r){if("checkbox"===lue:n},t)}return t},a=function(e,t){var n,r=e.name.match(/(.*?)\.(.*)/);if(r)if((n=r[1].split("[]")).length>1){t[n[0]]=t[n[0]]||[];var u={};t[n[0]].push(u),e.name=r[2],a(e,u)}else t[r[1]]=t[r[1]]||{},e.name=r[2],a(e,t[r[1]]);else(n=e.name.split("[]")).length>1?(t[n[0]]=t[n[0]]||[],e.value&&t[n[0]].push(e.value)):t[e.name]=e.value};return{form:function(t){return e(t.querySelectorAll("input:not([data-form-disabled=true]), select:not([data-form-disabled=true]), textarea:not([data-form-disabled=true])"))},elements:e,element:t}}();
ev.service=function(){const e=ev.accounts.getMultitenantScriptConfig().evolok.api.url,n=ev.accounts.getMultitenantScriptConfig().api.url,a=e+"/ic/api",t=e+"/acd/api/3.0",o=e+"/pm/api/v2",s=n+"user/ev",i="client_profile",r="social";var c=function(e,n){if(n=n||{},ev.accounts.isApp()){const e=ev.accounts.getAuthTokenFromUrl();n.facet="app",e&&(n["auth-token"]=e)}return Object.keys(n).length>0&&(e+=ev.utils.formatParams(n)),e};return{getUser:function(e,n){var t={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+i+" evolok.api.sessionId="+n}};return ev.ajax.get(a+"/userProfile/"+e,t)},updateUser:function(e,n,t){var o={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service="+i+" evolok.api.sessionId="+n}};return ev.ajax.put(a+"/userProfile/"+e,t,o)},getSocialGoogleSession:function(e){e.realmName="default_realm",e.serviceName=r,e.attributesMapping=[{name:"email_address",value:"email"}];var n={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.service=social"}};return ev.ajax.post(a+"/social/google/session?autoRegister=true&autoPopulate=true",e,n)},deleteAccount:function(){return ev.ajax.delete(c(s+"/delete"))},changeEdition:function(e){return ev.ajax.post(c(s+"/subscriptions/request/edition-change"),e,{type:"json"})},changeDelivery:function(e){return ev.ajax.post(c(s+"/subscriptions/request/delivery-change"),e,{type:"json"})},requestEVouchers:function(e){return ev.ajax.post(c(s+"/subscriptions/request/e-vouchers"),e,{type:"json"})},requestNewFidelityCard:function(e){return ev.ajax.post(c(s+"/subscriptions/request/new-club-card/"+e.cardType),e,{type:"json"})},setAttributesWhenRegistering:function(){return ev.ajax.post(c(s+"/register/default-attributes"))},updateUserFiscalAddress:function(e,n){n=n||{};return ev.ajax.post(c(s+"/subscriptions/paywall/update-fiscal-address",n),e,{type:"json"})},purchaseCompleted:function(e){return ev.ajax.post(c(s+"/subscriptions/paywall/purchase-completed"),e,{type:"json"})},requestFullInvoice:function(e){var n={};return n.orderId=e,ev.ajax.get(c(s+"/subscriptions/paywall/request-invoice",n))},loginCompleted:function(e,n,a,t){var o=e||{};n=n||{};ev.accounts.isApp();var i=ev.accounts.getUserSessionId(),r=s+"/logreg-done";a&&(r+="-apple"),"app"===n.facet&&(o.facet=n.facet);try{null==i&&t&&"object"==typeof t&&(i=t.mainSession.sessionId)}catch(e){}return i&&(o["auth-token"]="evolok--"+i),ev.ajax.get(c(r,o))},logout:function(e){var n={};return null!=e&&(n.evSessionId=e),ev.ajax.get(c(s+"/logout",n))},invalidateADCache:function(e){return ev.ajax.post(t+"/invalidate/user/"+e,{})},refreshAliasCookies:function(){return ev.ajax.get(c(s+"/refreshAliasCookies"))},socialLinkCompleted:function(){return ev.ajax.post(s+"/social-link-done",{})},onBeneficiaryAction:function(e,n){return ev.ajax.post(s+"/subscriptions/paywall/beneficiary-"+e,n,{type:"json"})},getBeneficiary:function(e){var n={type:"json",headers:{Accept:"application/json",Authorization:"Evolok evolok.api.sessionId="+ev.accounts.getUserSessionId()}};return ev.ajax.get(a+"/userProfile/"+ev.accounts.getUser().guid+"/grant/"+e,n)},getDigitalSubscriptions:function(){return ev.ajax.get(c(o+"/widget/account/purchases",{ev_ss:ev.accounts.getUserSessionId()}))},reactivateDigitalSubscription:function(e){return ev.ajax.post(c(o+"/widget/account/"+e.subscriptionId+"/cancel/revert",{ev_ss:ev.accounts.getUserSessionId()}))},loadDigitalSubscriptions:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/digital"),e)},loadUserInfoCollection:function(e,a){return ev.ajax.load(c(n+"ev/collect-user-info/"+e),a)},updateAvatar:function(e){var n=new FormData;return n.append("image",e),ev.ajax.post(c(s+"/update-avatar"),n,{processData:!1})},deleteAvatar:function(){return ev.ajax.delete(c(s+"/delete-avatar"))},validateHorecaPin:function(e){return ev.ajax.post(s+"/horeca/validate/pin",e,{type:"json"})},validateHorecaGeocoding:function(e){return ev.ajax.post(s+"/horeca/validate/geocoding",e,{type:"json"})},validateHorecaEpaper:function(e,n){return ev.ajax.post(s+"/horeca/validate/epaper"+(n?"/"+n:""),e,{type:"json"})},loadEpaperIssues:function(e,a,t){var o={purchaseId:a};return t&&(o.publication=t),ev.ajax.load(c(n+"ev/suscripciones/module/horeca/epaper/issues",o),e)},loadGeocodingConfirmation:function(e){return ev.ajax.load(c(n+"ev/horeca/address-geocoding"),e)},loadHorecaConfig:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/horeca/config"),e)},updateGeocoding:function(e,n){return ev.ajax.post(s+"/horeca/address-geocoding/"+e,n,{type:"json"})},deleteGeocoding:function(e){return ev.ajax.delete(s+"/horeca/address-geocoding/"+e)},loadChangeProducts:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/cambio-suscripcion/productos/"+a),e)},changeSubscription:function(e,n){return ev.ajax.post(o+"/widget/payment/"+e+"/changeProductPlan"+ev.utils.formatParams({ev_ss:ev.accounts.getUserSessionId()}),n,{type:"json",headers:{Accept:"application/json"}})},changeSubscriptionCompleted:function(e,n,a){return ev.ajax.post(s+"/subscriptions/paywall/change-subscription-done/"+e+"/"+n,a,{type:"json"})},cancelSubscription:function(e){return ev.ajax.get(o+"/widget/account/"+e.subscriptionId+"/cancel"+ev.utils.formatParams({cancelReasonId:e.cancelReason,ev_ss:ev.accounts.getUserSessionId(),immediately:e.cancelImmediately}),{headers:{Accept:"application/json"}})},loadSubscriptionSingleAction:function(e,a,t,o){return ev.ajax.load(c(n+"ev/suscripciones/module/acciones/"+a+"/"+e,o?{purchaseId:o}:null),t)},applyRetentionDiscount:function(e){return ev.ajax.post(c(s+"/subscriptions/paywall/apply-retention-discount"),e,{type:"json"})},sap:{load:{subscriptions:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/sap"),e)},invoices:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/invoices"),e)},changePaymentCard:function(e,a,t){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/change-payment-card",{issuingCompanyId:a,subscriptionId:t}),e)},cardManagement:function(e){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/club-card-management"),e)},singleAction:function(e,a,t,o,s){var i="ev/suscripciones/module/sap/";return s&&(i+="e-paper/"),i+="acciones/",ev.ajax.load(c(n+i+a+"/"+e,o?"/"+{purchaseId:o}:null),t)},changeDelivery:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/change-delivery",{subscriptionId:a}),e)},newspaperReplacement:function(e,a){return ev.ajax.load(c(n+"ev/suscripciones/module/sap/newspaper-replacement",{subscriptionId:a}),e)}},link:function(e){return ev.ajax.post(c(s+"/link"),e)},unlink:function(){return ev.ajax.delete(c(s+"/unlink"))},downloadInvoice:function(e,n){return ev.ajax.get(c(s+"/subscriptions/sap/invoices/get-pdf",{id:e,type:n}),{ignoreParsing:!0,responseType:"blob"})},handleFidelityCard:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/handle-fidelity-card/"+e.action),e.data,{type:"json"})},changePaymentCard:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/change-payment-card"),e,{type:"json"})},cancelSubscription:function(e){return ev.ajax.get(c(s+"/subscriptions/sap/cancel-subscription",e))},changeDelivery:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/change-delivery"),e,{type:"json"})},changeEdition:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/change-edition",e))},requestNewspaperReplacement:function(e){return ev.ajax.post(c(s+"/subscriptions/sap/newspaper-replacement"),e,{type:"json"})}},renfe:{cardSubscription:function(e){var n={};return n.renfeCardId=e,ev.ajax.post(c(s+"/subscriptions/renfe"),n)}},digital:{dowloadInvoice:function(e){return ev.ajax.get(c(n+"/ev/my-invoices/get-pdf",{transactionId:e}),{ignoreParsing:!0,responseType:"blob"})},actions:{reactivate:{load:{retentionDiscounts:function(e,a){return ev.ajax.load(c(n+"ev/su),e)}},applyRetentionDiscount:function(e){return ev.ajax.post(c(s+"/subscriptions/paywall/reactivate-subscription/apply-retention-discount"),e)}}}},landing:function(){const e=ev.accounts.getMultitenantScriptConfig().base.url+"/suscripciones/";var n={products:function(n,a){return ev.ajax.loadWithPayload(c(e+"landing/module/products"),n,a)},offers:function(n,a){return ev.ajax.loadWithPayload(c(e+"landing/module/offers"),n,a)},externalOffers:function(e,n,a){return ev.ajax.jsonp(e,{callback:n,version:a})}};return{load:n}}(),customerHelp:{request:function(e,n){return ev.ajax.post(c(s+"/customer-help/send-request/"+e),n,{type:"json"})}}}}();
ev.storage={save:function(t,e,o,r){try{window[t+"Storage"].setItem(e,JSON.stringify(o))}catch(t){if(!r)throw t}},load:function(t,e,o){try{return JSON.parse(window[t+"Storage"].getItem(e))}catch(t){if(!o)throw t}},remove:function(t,e,o){try{window[t+"Storage"].removeItem(e)}catch(t){if(!o)throw t}}};
ev.subscriptions=function(){const e=ev.accounts.getMultitenantScriptConfig().cookie.domain;var t,i,n,r,o,s,a,c,d,u,l,f,v=function);e?(this.delete(),ev.utils.redirect(e.replace("%2F","/"))):ev.commons.referrer.load({igno ev.cookie.get(t)},delete:function(){ev.cookie.remove(t,e)}}}}(),m=function(){const e=document.createEvent("Event");var t=null,i=null,n=function(){const e=ev.utils.find(document,"#removalFiscalAddressLink");ev.utils.isVisible(e.getFirst())||e.toggle()},r=function(){ev.forms.utils.error("Lo sentimos, estamos experimentando problemas tcnicos, por favor reintntalo en unos momentos.")},o=function(){"CIF"===ev.utils.find(t.getFirst(),"[name=document_type]").asArray().filter((function(e){return e.checked}))[0].value?(s("legal"),a("natural")):(s("natural"),a("legal")),ev.forms.utils.cleanErrors(t.getFirst())},s=function(e){var i=ev.utils.find(t.getFirst(),"#"+e+"Person");i.show(),ev.utils.find(i.getFirst(),"input[data-form-required=true]").prop("required",!0),ev.utils.find(i.getFirst(),"input").attr("data-form-disabled",!1)},a=function(e){var i=ev.utils.find(t.getFirst(),"#"+e+"Person");i.hide(),ev.utils.find(i.getFirst(),"input[data-form-required=true]").prop("required",!1),ev.utils.find(i.getFirst(),"input").attr("data-form-disabled",!0)};return{init:function(s){if(i=(s=s||{}).id||"fiscalAddressForm",s.customValidation=null===s.customValidation||void 0===s.customValidation||s.customValidation,s.onSuccess=s.onSuccess||n,s.onFailure=s.onFailure||r,s.ignoreOnFailure=void 0===s.ignoreOnFailure||s.ignoreOnFailure,t=ev.utils.getFormFromId(i),e.initEvent("submit",!0,!0),t){if(ev.forms.onSubmit(t,(function(e,t){return s.customValidation&&!ev.forms.validate(e)?Promise.reject({ignoreOnFailure:s.ignoreOnFailure}):(s.onValidated&&s.onValidated(),ev.service.updateUserFiscalAddress(t))}),s.onSuccess,s.onFailure,s),s.customValidation)t.attr("novalidate",!0);else{ev.utils.find(t.getFirst(),"input[data-form-required=true], select[data-form-required=true]").prop("required",!0)}ev.utils.find(t.getFirst(),"[data-form-change]").each((function(e){var t=null;"document_type"===e.getAttribute("data-form-change")&&(o(),t=function(){o()}),e.addEventListener("change",t)}))"data-fiscal-address=delete",(function(e,i){ev.service.updateUserFiscalAddress({}).then((function(){ev.utils.find(t.getFirst(),"input:not([type=radio]), select").val(""),ev.utils.find(t.getFirst(),"input[name=document_type][value=CIF]").prop("checked",!0),o(),ev.utils.find(document,"#removalFiscalAddressLink").toggle(),ev.utils.find(document,"#removalFiscalAddress").toggleClass("active")})).catch((function(e){ev.forms.utils.error(e.errorMessage)}))}))}},dispatch:function(){t.getFirst().dispatchEvent(e)},displayDependingDoc:o}}(),p=function(){var e=null;const t={BENEFICIARY_LIST:{id:"beneficiary-list"},ADD_BENEFICIARY:{id:"add-beneficiary"},REACTIVATE_SUBSCRIPTION:{id:"reactivate-subscription",url:"reactivar-suscripcion"},REACTIVATE_SUBSCRIPTION_PROMO:{id:"reactivate-subscription-promo",url:"reactivar-suscripcion-promo"},CHANGE_PAYMENT_METHOD:{id:"change-payment-method",url:"cambio-tarjeta"},CANCEL_SUBSCRIPTION:{id:"cancel-subscription",url:"cancelar-suscripcion"},CANCEL_SUBSCRIPTION_NOT_ALLOWED:{id:"cancel-subscription-not-allowed",url:"#"},CHANGE_SUBSCRIPTION:{id:"change-subscription",url:"cambio-suscripcion"}};var i,n,r,o,s={ALTA:"alta",BAJA:"baja"},a="PAYPAL",c=function(e){return p.subscriptions.filter((function(t){return t.id===e})).shift()},d=function(e){e=e||{};const t=".digital-subscriptions",i=ev.utils.find(docu.utils.find(document,t+" .evl-spinner");i.getFirst()&&(n.show(),i.empty(),ev.service.loadDigitalSubscriptions(i).then((function(){n.hide(),b(e)})).catch((function(e){n.hide(),ev.utils.find(document,t+"__error").show()})))},u=function(e){e=e||{};const t=".subscription-single-action",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");i.getFirst()&&(n.show(),i.empty(),ev.service.loadSubscriptionSingleAction(e.action,e.layout,i,e.purchaseId).then((function(){n.hide(),b(e)})).catch((function(e){n.hide(),ev.utils.find(document,t+"__error").show()})))},l=(i=null,n=null,{init:function(e){e=e||{};const i="."+t.CHANGE_SUBSCRIPTION.id;var n=ev.utils.find(document,i+" .evl-spinner");n.show(),ev.utils.find(document,i+"__container").empty(),ev.utils.find(document,i+"__error").hide(),ev.service.loadChangeProducts(ev.utils.find(document,i+"__co("click","data-product-id",(function(e,t){ev.utils.find(document,"[data-product-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen='products'] .btn-primary").getFirst().removeAttribute("disabled"),ev.utils.find(document,"[data-paywall-screen='confirm'] [name='productId']").val(e.getAttribute(t))})),ev.utils.addEventHandlerFromData("click","data-paywall-screen-transition=confirm",(function(e,t){ev.gtm.push("myaccount","cambiar-suscripcion","continuar")}));const e=ev.utils.find(document,i+" [data-product-id]");if(e.getFirst()){var c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});e.getFirst().dispatchEvent(c)}const d=ev.utils.getFormFromId(t.CHANGE_SUBSCRIPTION.id+"-form");ev.forms.onSubmit(d,(function(e,i){try{return ev.gtm.push("myaccount","cambiar-suscripcion","confirmar"),ev.screens.registry[t.CHANGE_SUBSCRIPTION.id].hide(),n.show(),l.purchase.paymentType!==a?ev.service.changeSubscription(l.purchase.id,r(i.productId)):(EV.Event.publish(EV.Event.PM_OPEN_CHANGE_PRODUCT_PLAN+"new",l.purchase),Promise.resolve(i))}catch(e){return Promise.rejectaymentType!==a){var r=e.processPaymentResults[0];ev.service.changeSubscriptionCompleted(r.purchaseId,s.ALTA,r.roleAssignmentType).finally((function(){n.hide(),ev.screens.registry[t.CHANGE_SUBSCRIPTION.id].transition("success"),ev.utils.find(document,i+" [data-paywall-screen='success'] .btn-default").once(["click"],(function(){EV.Event.publish(EV.GGEvent.PM_PURCHASE_CHANGED)})),ev.utils.find(document,i+" [data-paywall-screen='success'] .btn-primary").once(["click"],(function(){ev.commons.referrer.save()}))}))}else o.handleRedirect(t.CHANGE_SUBSCRIPTION.id,"products",e,n)}),(function(e){n.hide(),ev.screens.registry[t.CHANGE_SUBSCRIPTION.id].transition("products");try{if(e&&ev.utils.isArray(e)&&409===e[0].httpErrorCode&&e[0].message.includes("already exists"))return void ev.forms.utils.error(ev.commons.getErrorMessages().duplicated_purchase)}catch(e){}ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.find(document,i+"__container [data-subscription-popup]").on(["click"],(function(e,t){ev.utils.find(document,"#"+t.getAttribute("data-subscription-popup")).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")}))})).catch((function(e){n.hide(),ev.utils.find(document,i+"__error").show()}))},get purchase(){return i},set purchase(e){i=e},get products(){return n},set products(e){n=e},buildOrder:r=function(e){const t=p.changeSubscription.products.filter((function(t){return t.id===e})).shift();if(!t)throw new Error;var i={id:null,orderItems:[],paymentType:l.purchase.paymentType,deliveryAddressGroup:l.purchase.deliveryAddressGroup||null,billingAddressGroup:l.purchase.billingAddressGroup||null,createdDate:null,lastModifiedDate:null,version:null,orderType:l.purchase.orderType};return i.orderItems.push({product:t,paymentPlan:t.paymentPlans[0],quantity:l.purchase.orderItem.quantity,startDate:null,endDate:null,startDeliveryDate:null}),i},paypal:o={handleRedirect:function(e,t,i,n){EV.Event.on(EV.Event.PM_PURCHASES_LIST_CHANGE_PRODUCTS_AVAILABLE,(function(){try{const r=l.products.filter((function(e){return e.id===i.productId})).shift();if(!r)throw new Error;if(!ev.utils.isArray(r.paymentPlans)||1!==r.paymentPlans.length)throw new Error;EV.Event.publish(EV.Event.PM_PURCHASES_LIST_CHANGE_PRODUCT,r.id),EV.Event.publish(EV.Event.PM_PURCHASES_LIST_CHANGE_PLAN,r.paymentPlans[0].id),ev.commons.queryParams.save(),EV.Event.publish(EV.Event.PM_PURCHASES_LIST_CHANGE_PURCHASE_CONFIRM),EV.Event.on(EV.Event.PM_ERROR,(function(i){i=i||{},ev.screens.registry[e].screen!==t&&(n&&n.hide(),ev.screens.registry[e].transition(t),409===i.statusCode&&i.error&&"duplicated_purchase"===i.error.code?ev.forms.utils.error(ev.commons.getErrorMessages().duplicated_purchase):ev.forms.utils.error(ev.commons.getErrorMessages().generic))}))}catch(i){n&&n.hide(),ev.screens.registry[e].transition(t),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}}))}}}),f=function(){var e=null,i=[],n={CONFIRMATION:{id:"confirmation",analytics:{onLeave:function(){hj("event","continuar-video"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-video")}}},REASONS:{id:"reasons",analytics:{onLeave:function(){hj("event","continuar-motivos"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-motivos")}}},REASONS_NOT_TO_CANCEL:{id:"reasons-not-to-cancel",analytics:{onLeave:function(){hj("event","continuar-ventajas"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-ventajas")}}},OFFERS:{id:"offers",analytics:{onLeave:function(){hj("event","continuar-oferta"),ev.gtm.push("myaccount","cancelar-suscripcion","continuar-oferta")}}},CANCELLED:{id:"cancelled",analytics:{onLeave:null}},LOADING:{id:"loading",analytics:{onLeave:null}},OFFER_APPLIED:{id:"offer-applied",analytics:{onLeave:null}}};return{init:function(){const i="."+t.CANCEL_SUBSCRIPTION.id,r=ev.utils.getFormFromId(t.CANCEL_SUBSCRIPTION.id+"-form"),o=ev.utils.find(document,i+"__cancel-reasons select"),c=ev.utils.find(document,"[data-submit-form="+t.CANCEL_SUBSCRIPTION.id+"-form]"),d=ev.utils.find(document,i+"__container video");if(d.getFirst()){var u=d.getFirst();ev.utils.find(document,"[data-paywall-screen="+n.CONFIRMATION.id+"] [data-paywall-screen-transition="+n.REASONS.id+"]").on(["click"],(function(){try{u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2&&u.pause()}catch(e){}}))}ev.forms.onSubmit(r,(function(e,i){var r=ev.utils.find(document,"[data-paywall-screen="+ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].screen+"] [data-submit-form="+t.CANCEL_SUBSCRIPTION.id+"-form]").getFirst().getAttribute("data-submit-screen");return r!==n.CANCELLED.id?Promise.resolve({screenTo:r}):(ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.LOADING.id),ev.service.cancelSubscription(i))}),(function(i){i=i||{};var r=Promise.resolve();e&&"PENDING"===e.status&&i.roleAssignmentType&&(r=ev.service.changeSubscriptionCompleted(e.id,s.BAJA,i.roleAssignmentType)),r.finally((function(){i.screenTo=i.screenTo?i.screenTo:n.CANCELLED.id,ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(i.screenTo)}))}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.REASONS.id),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),o.on(["change"],(function(){var e=o.getFirst();if(!e.value)return c.attr("data-submit-screen",""),void c.attr("disabled","");c.attr("data-submit-screen",n.CANCELLED.id),ev.utils.isArray(f.cancelReasonsToSkipOffers)&&f.cancelReasonsToSkipOffers.includes(e.value)||ev.utils.find(document,"[data-paywall-screen="+n.REASONS.id+"] [data-submit-form="+t.CANCEL_SUBSCRIPTION.id+"-form]").attr("data-submit-screen",n.REASONS_NOT_TO_CANCEL.id),c.removeAttr("disabled")})),c.on(["click"],(function(){var e=new Event("submit",{bubbles:!0,cancelable:!0});r.getFirst().dispatchEvent(e)})),ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,i){ev.utils.find(document,'[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]').getFirst()||(ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-offer-id]").removeClass("selected"),ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-product-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-paywall-screen='confirm'] [name='productId']").val(e.getAttribute(i)),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").attr("data-submit-form",t.CHANGE_SUBSCRIPTION.id+"-form"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").removeAttr("disabled"))}));const v=ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-product-id]");if(v.getFirst()){var m=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});v.getFirst().dispatchEvent(m)}ev.forms.onSubmit(ev.utils.getFormFromId(t.CHANGE_SUBSCRIPTION.id+"-form"),(function(e,i){try{return ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.LOADING.id),f.purchase.paymentType!==a?ev.service.changeSubscription(f.purchase.id,l.buildOrder(i.productId)):(EV.Event.publish(EV.Event.PM_OPEN_CHANGE_PRODUCT_PLAN+"new",l.purchase),Promise.resolve(i))}catch(e){return Promise.reject(e||{})}}),(function(e){if(l.purchase.paymentType!==a){var i=e.processPaymentResults[0];ev.service.changeSubscriptionCompleted(i.purchaseId,s.ALTA,i.roleAssignmentType).finally((function(){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFER_APPLIED.id)}))}else l.paypal.handleRedirect(t.CANCEL_SUBSCRIPTION.id,n.OFFERS.id,e)}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFERS.id);try{if(e&&ev.utils.isArray(e)&&409===e[0].httpErrorCode&&e[0].message.includes("already exists"))return void ev.forms.utils.error(ev.commons.getErrorMessages().duplicated_purchase)}catch(e){}ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("click","data-offer-id",(function(e,i){ev.utils.find(document,'[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]').getFirst()||(ev.utils.find(document,"[data-paywall-screen-id="+t.CHANGE_SUBSCRIPTION.id+"] [data-product-id]").removeClass("selected"),ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-offer-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-paywall-screen='confirm'] [name='offerId']").val(e.getAttribute(i)),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").attr("data-submit-form","retention-discounts-form"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").removeAttr("disabled"))}));const p=ev.utils.find(document,"[data-paywall-screen-id=retention-discounts] [data-offer-id]");if(p.getFirst()&&!v.getFirst()){m=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});p.getFirst().dispatchEvent(m)}if(ev.forms.onSubmit(ev.utils.getFormFromId("retention-discounts-form"),(function(e,i){try{return ev.gtm.push("myaccount","cancelar-suscripcion","acepto-oferta"),ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.LOADING.id),ev.service.applyRetentionDiscount({purchaseId:f.purchase.id,offerId:i.offerId})}catch(e){return Promise.reject(e||{})}}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFER_APPLIED.id)}),(function(e){ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition(n.OFFERS.id),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").on(["click"],(function(e,t){var i=new Event("submit",{bubbles:!0,cancelable:!0});t.getAttribute("data-submit-form")&&ev.utils.getFormFromId(t.getAttribute("data-submit-form")).getFirst().dispatchEvent(i)})),Object.keys(n).forEach((function(e){const t=n[e];"function"==typeof t.analytics.onLeave&&ev.utils.find(document,"[data-paywall-screen="+t.id+"] .continue__button").on(["click"],(function(){t.analytics.onLeave()}))})),ev.utils.find(document,'[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]').getFirst()){const e='[data-paywall-screen] ~ [data-paywall-screen="offers"][data-screen-version="2"]',i=ev.utils.find(document,e+" .split-screen"),r=ev.utils.find(document,e+" .offers__content"),o=ev.utils.find(document,e+" .current_offer"),s=ev.utils.find(document,e+" .toggle-button"),a=ev.utils.find(document,e+" .view_new_offer"),c=(ev.utils.find(document,e+" .tap_new_offer"),ev.utils.find(document,e+" .offers__text"),function(e){const t=e.orderItem.finalPrice;return 2===t.split(".").length&&"00"===t.split(".")[1]?t.split(".")[0]:t}),d=function(e){const t=e.orderItem;return"BUNDLE"===t.product.type?t.bundlePlan.frequency.displayName:t.paymentPlan.frequency.displayName}(f.purchase),u=c(f.purchase);var g=!0;o.append("<span>"+u.replace(".",",")+" /"+("Mensual"===d?"mes":"Anual"===d?"Ao":d)+"</span>"),ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-submit-screen="+n.OFFER_APPLIED.id+"]").removeAttr("disabled"),s.on(["click"],(function(){g?(i.style("transform","translateX(90%)"),s.style("right","calc(100% - 25px)"),o.removeClass("fade-in"),o.addClass("fade-out"),a.removeClass("fade-in"),a.addClass("fade-out"),setTimeout((function(){o.hide(),o.removeClass("fade-out"),o.addClass("fade-in"),a.hide(),r.style("visibility","unset")}),200),s.style("transform","rotate(180deg)"),g=!1):(i.style("transform","translateX(0)"),s.style("right","calc(100% - 25px)"),o.removeClass("fade-in"),o.addClass("fade-out"),a.removeClass("fade-in"),a.addClass("fade-out"),setTimeout((function(){o.show(),o.removeClass("fade-out"),o.addClass("fade-in"),a.show(),a.removeClass("fade-out"),a.addClass("fade-in"),r.style("visibility","hidden")}),200),s.style("transform","rotate(0deg)"),g=!0)}));const l=function(e,t,i,r){ev.utils.find(document,"[data-paywall-screen="+n.OFFERS.id+"] [data-offer-id]").removeClass("selen.OFFERS.id+"] [data-product-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"#"+i+"-form [name='"+r+"']").val(e.getAttribute(t));var o=new Event("submit",{bubbles:!0,cancelable:!0});ev.utils.getFormFromId(i+"-form").getFirst().dispatchEvent(o)};ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,i){l(e,i,t.CHANGE_SUBSCRIPTION.id,"productId")})),ev.utils.addEventHandlerFromData("click","data-offer-id",(function(e,t){l(e,t,"retention-discounts","offerId")}))}ev.utils.find(document,"footer").hide();ev.utils.find(document,"body").style("background-color","#fff")},get purchase(){return e},set purchase(t){e=t},get cancelReasonsToSkipOffers(){return i},set cancelReasonsToSkipOffers(e){i=e}}}(),v=function(e){if(e){var i=ev.utils.getFormFromId(e.action.id+"-form");switch(e.action.id){case t.CANCEL_SUBSCRIPTION.id:const n="."+eh("myaccount","cancelar-suscripcion","confirmar"),ev.screens.registry[e.action.id].transition("submitting"),e.onSubmit(i)}),(function(t){var i=Promise.resolve(),r=c(t.purchase.id);r&&"PENDING"===r.status&&(i=ev.service.changeSubscriptionCompleted(r.id,s.BAJA,t.roleAssignmentType)),i.finally((function(){ev.screens.registry[e.action.id].transition("success"),ev.utils.find(document,n+" [data-paywall-screen='success'] .btn-default").once(["click"],(function(){EV.Event.publish(EV.Event.PM_PURCHASE_CANCELLED,r)}))}))}),(function(){ev.screens.registry[e.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.find(document,n+" [data-paywall-screen='confirm'] select").on(["change"],(function(e,t){const i=ev.utils.find(document,n+" [data-paywall-screen='confirm'] .btn-primary");0!==t.selectedIndex?i.show():i.hide()}));break;case t.REACTIVATE_SUBSCRIPTION.id:ev.forms.onSubmit(i,(function(t,i){return ev.gtm.push("myaccount","reactivar-suscripcion","confirmar"),e.onSubmit(i)}),(function(){ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+e.action.id).toggleClass("active"),EV.Event.publish(EV.GGEvent.PM_PURCHASE_REACTIVATED)}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}))}ev.utils.addEventHandlerFromData("click","data-subscription-action="+e.action.id,(function(i,n){const r=c(i.getAttribute("data-subscription-id"));if(!r&&"SAP"!=i.getAttribute("data-subscription-type"))return;if("embedded"===i.getAttribute("data-layout")&&("md"===gg.breakpoint.getCurrent()||"false"===i.getAttribute("data-lock-xs")))return void m(e.action,r.id);var o=ev.utils.getFormFromId(e.action.id+"-form");const s="."+e.action.id;switch(e.action.id){case t.CHANGE_SUBSCRIPTION.id:ev.commons.togglePopup(e.action.id),l.init({id:r.id}),ev.gtm.push("myaccount","cambiar-suscripcion","cambiar-suscripcion");break;case t.CANCEL_SUBSCRIPTION.id:"SAP"!=i.getAttribute("data-subscription-type")&&(ev.screens.registry[e.action.id].transition("xs"===gg.breakpoint.getCurrent()&&"true"===i.getAttribute("data-lock-xs")?"lock-xs":"confirm"),ev.utils.find(document,s+" [data-paywall-screen='confirm'] .btn-primary").hide(),ev.utils.find(document,s+" [data-paywall-screen='confirm'] select").getFirst().selectedIndex=0,ev.utils.find(o.getFirst(),"[name='cancelImmediately']").val(i.getAttribute("data-cancel-immediately")),ev.utils.find(o.getFirst(),"[name='subscriptionId']").val(r.id),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion"));break;case t.REACTIVATE_SUBSCRIPTION.id:ev.utils.find(o.getFirst(),"[name='subscriptionId']").val(r.id),ev.gtm.push("myaccount","reactivar-suscripcion","reactivar-suscripcion");break;case t.REACTIVATE_SUBSCRIPTION_PROMO.id:ev.commons.togglePopup(e.action.id);var a=ev.utils.find(document,s+" .evl-spinner");a.show(),ev.utils.find(document,s+"__container").empty(),ev.utils.find(document,s+"__error").hide(),ev.service.digital.actions.reactivate.load.retentionDiscounts(ev.utils.find(document,s+"__container"),r.id).then((function(){a.hide();var i=ev.utils.getFormFromId(t.REACTIVATE_SUBSCRIPTION_PROMO.id+"-form");i.getFforms.onSubmit(i,(function(i,n){return ev.screens.registry[t.REACTIVATE_SUBSCRIPTION_PROMO.id].transition("loading"),ev.gtm.push("myaccount","reactivar-suscripcion-promo","confirmar"),e.onSubmit(n)}),(function(){ev.screens.registry[t.REACTIVATE_SUBSCRIPTION_PROMO.id].transition("success"),ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [data-paywall-screen='success'] .btn-default").once(["click"],(function(){EV.Event.publish(EV.GGEvent.PM_PURCHASE_REACTIVATED_PROMO)}))}),(function(e){e=e||{},ev.screens.registry[t.REACTIVATE_SUBSCRIPTION_PROMO.id].transition("confirm"),e.errorMessage||ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("click","data-offer-id",(function(e,i){ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [data-offer-id]").removeClass("selected"),e.classList.add("selected"),ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [name='offerId']").val(e.getAttribute(i))})),ev.utils.find(document,s+"__container [data-subscription-popup]").on(["click"],(function(e,t){ev.utils.find(document,"#"+t.getAttribute("data-subscription-popup")).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")}));const n=ev.utils.find(document,"[data-paywall-screen-id="+t.REACTIVATE_SUBSCRIPTION_PROMO.id+"] [data-offer-id]");if(n.getFirst()){var o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.getFirst().dispatchEvent(o)}})).catch((function(e){a.hide(),ev.utils.find(document,s+"__error").show()})),ev.gtm.push("myaccount","reactivar-suscripcion-promo","reactivar-suscripcion-promo")}ev.utils.find(document,s+"-sap [data-paywall-screen='confirm'] select").on(["change"],(function(e,t){const i=ev.utils.find(document,s+"-sap [data-paywall-screen='confirm'] .btn-primary");0!==t.selectedIndex?i.show():i.hide()}));const u=ev.utils.getFormFromId(t.CANCEL_SUBSCRIPTION.id+"-sap-form");ev.forms.onSubmit(u,(function(t,i){return ev.screens.registry[e.action.id].transition("submitting"),ev.service.sap.cancelSubscription(i)}),(function(t){ev.screens.registry[e.action.id].transition("success")}),(function(t){if(t&&"object"==typeof t){const i=t.validationErrors||[];return o.each((function(e){i.forEach((function(t){ev.forms.utils.inputError(e,{field:t.field,message:ev.commons.getErrorMessages().invalid_format})}))})),void ev.screens.registry[e.action.id].back()}ev.screens.registry[e.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0,ignoreValidationErrors:!0}),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,t){"true"!==e.getAttribute(t)||d()})),e.action&&e.action.id!==t.CHANGE_SUBSCRIPTION.id&&e.action.id!==t.REACTIVATE_SUBSCRIPTION_PROMO.id&&("true"===i.getAttribute("data-custom-action")||e.action.id===t.CANCEL_SUBSCRIPTION.id&&"xs"===gg.breakpoint.getCurrent()&&"true"===i.getAttribute("data-lock-xs"))&&(ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+i.getAttribute("data-subscription-action")).toggleClass("active"))}))}},m=function(e,t){ev.commons.referrer.save(),ev.utils.redirect("/perfil/ev/suscripciones/"+e.url+"/"+t)},g=function(e,t,i){if(!t)return;const n=c(e.getAttribute("data-subscription-id"));n&&"embedded"!==e.getAttribute("data-layout")&&EV.Event.publish(EV.Event[t],i?n.id:n)},E=function(e,i){if(i=i||[],(e=e||{}).registerHandlers&&(ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.CHANGE_PAYMENT_METHOD.id,(function(e,t){"SAP"===e.getAttribute("data-subscription-type")?(ev.subscriptions.sap.changePaym"data-issuing-company"),subscriptionId:e.getAttribute("data-subscription-id")}),ev.gtm.push("myaccount","cambiar-tarjeta","confirmar"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+e.getAttribute("data-subscription-action")).toggleClass("active")):(ev.gtm.push("myaccount","modificar-tarjeta","cambiar"),g(e,"PM_OPEN_CHANGE_CARD"))})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.BENEFICIARY_LIST.id,(function(e,t){g(e,"PM_OPEN_BENEFICIARY_LIST")})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.ADD_BENEFICIARY.id,(function(e,t){g(e,"PM_OPEN_ADD_BENEFICIARY",!0)})),ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.CANCEL_SUBSCRIPTION.id,(function(e,i){if("SAP"==e.getAttribute("data-subscription-type")){const i="."+t.CANCEL_SUBSCRIPTION.id+"-sap";var n=ev.utils.getFormFromId(t.CANCEL_SUBSCRIPTION.id+"-sap-form");ev.screens.registry[t.CANCEL_SUBSCRIPTION.id].transition("confirm"),ev.utils.find(document,i+" [data-paywall-screen='confirm'] .btn-primary").hide(),ev.utils.find(document,i+" [data-paywall-screen='confirm'] select").getFirst().selectedIndex=0,ev.utils.find(n.getFirst(),"[name='subscriptionId']").val(e.getAttribute("data-subscription-id")),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion"),ev.utils.find(doribute("data-subscription-action")).toggleClass("active")}else"false"!==e.getAttribute("data-custom-action")||"md"!==gg.breakpoint.getCurrent()&&"false"!==e.getAttribute("data-lock-xs")||(hj("event","cancelar-suscripcion"),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion"),bscription-action="+t.CANCEL_SUBSCRIPTION_NOT_ALLOWED.id,(function(e,i){ev.commons.togglePopup(t.CANCEL_SUBSCRIPTION_NOT_ALLOWED.id)})),v({action:t.REACTIVATE_SUBSCRIPTION,onSubmit:function(e){return ev.service.reactivateDigitalSubscription(e)}}),v({action:t.CANCEL_SUBSCRIPTION,onSubmit:function(e){return ev.service.cancelSubscription(e)}}),v({action:t.CHANGE_SUBSCRIPTION}),v({action:t.REACTIVATE_SUBSCRIPTION_PROMO,onSubmit:function(e){return ev.service.digital.actions.reactivate.applyRetentionDiscount(e)}}),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")}))),e.autoTriggerSingleAction){var n=ev.utils.find(document,"[data-subscription-action]");if(1===n.asArray().length){var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.getFirst().dispatchEvent(r)}}e.registerOnActionHandler&&(EV.Event.on(EV.Event.PM_PURCHASE_CANCELLED,(function(){u({action:t.CANCEL_SUBSCRIPTION.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.Event.PM_CARD_UPDATED,(function(){u({action:t.CHANGE_PAYMENT_METHOD.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.GGEvent.PM_PURCHASE_CHANGED,(function(){u({action:t.CHANGE_SUBSCRIPTION.iseId:e.purchaseId}),d()})),EV.Event.on(EV.GGEvent.PM_PURCHASE_REACTIVATED,(function(){u({action:t.REACTIVATE_SUBSCRIPTION.id,layout:e.layout,purchaseId:e.purchaseId}),d()})),EV.Event.on(EV.GGEvent.PM_PURCHASE_REACTIVATED_PROMO,(function(){u({action:t.REACTIVATE_SUBSCRIPTION_PROMO.id,layout:e.layout,purchaseId:e.purchaseId}),d()})))},b=function(t){void 0===(t=t||{}).registerHandlers&&(t.registerHandlers=!0),null!=e?E(t,e):function(t){t=t||{},ev.service.getDigitalSubscriptions().then((function(i){e=i,E(t,i)})).catch((function(i){E(t,e)}))}(t)};return{init:b,refreshSubscriptions:d,refreshSubscriptionSingleAction:u,changeSubscription:l,changeSubscriptionActionType:s,cancelSubscription:f,invoices:{init:function(e){e=e||{};var t=function(e,t){var i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=t+".pdf",i.style.display="none",document.body.appendChild(i),i.click()};ev.utils.addEventHandlerFromData("click","data-invoice-id",(function(e,i){const n=e.getAttribute("data-invoice-id"),r=e.getAttribute("data-transaction-id");if(document.body.style.cursor="wait","SAP"!=e.getAttribute("data-invoice-source"))ev.service.digital.dowloadInvoice(r).then((function(e){t(e,n)})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})).finally((function(){document.body.style.cursor="default"}));else{const i=e.getAttribute("data-invoice-type");ev.service.sap.downloadInvoice(n,i).then((function(e){t(e,n),ev.gtm.push("myaccount"," factura-descargar","factura")})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})).finally((function(){document.body.style.cursor="default"}))}}))}},get subscriptions(){return e},set subscriptions(t){e=t}}}(),g=function(){const e={CHANGE_PAYMENT_METHOD:{id:"change-payment-method",url:"cambio-tarjeta"},CANCEcancelar-n"},CHANGE_DELIVERIES:{id:"change-deliveries",url:"entregas"},NEWSPAPER_REPLACEMENT:{id:"newspaper-replacement",url:"reposicion"},INVOICES:{id:"invoices"}};var t,i=function(e){e=e||{};const t=ev.utils.find(document,e.selector+"__container"),i=ev.utils.find(document,e.selector+" .evl-spinner"),n=ev.utils.find(document,e.selector+"__error");if(t.getFirst())return i.show(),t.empty(),n.hide(),e.load(t,e).then((function(){return i.hide(),Promise.resolve()})).catch((function(e){return i.hide(),Promise.reject(e)}))},n={refresh:t=function(n){(n=n||{}).selector="."+e.CHANGE_DELIVERIES.id;var r=ev.utils.find(document,"#subscriptionId").getFirst().value;i({selector:n.selector,load:function(e,t){return ev.service.sap.load.changeDelivery(e,r)},subscriptionId:r}).then((function(){!function(i){i=i||{},ev.forms.onSubmit(ev.utils.getFormFromId(e.CHANGE_DELIVERIES.id+"-form"),(function(e,t){return t=t||{},ev.forms.validate(e)?(ev.utils.find(document,"[data-paywall-screen=buttons]").hide(),ev.utils.find(document,"[data-paywall-screen=loading]").show(),t.address&&Object.keys(t.address).forEach((function(e){if(e.match("city|streetName")){const i=$("[name='address."+e+"']");i&&(i.length&&null!=i.data()&&null!=i.data().value&&""!=i.data().value?t.address[e+"Id"]=i.data().value?i.data().value:i.val():"streetName"==e&&i.length&&null!=i.data()&&null!=i.data().code?t.address[e+"Id"]=i.data().code?i.data().code:i.val():i.val(""))}})),ev.service.sap.changeDelivery(t)):Promise.reject({ignoreOnFailure:!0})}),(function(e){document.getElementById("card-modal-message-successful").innerHTML=e.message,ev.utils.find(document,"[data-paywall-screen=modal-message-successful]").show(),ev.utils.find(document,"[data-paywall-screen=loading]").hide()}),(function(e){document.getElementById("card-modal-message-error").innerHTML=e.errorMessage,ev.utils.find(document,"[data-paywall-screen=modal-message-error]").show(),ev.utils.find(document,"[data-paywall-screen=loading]").hide()}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0}),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] input[id=check-type]").on(["click"],(function(t,i){const n=i.value,r=ev.utils.find(document,"form[id="+e.CHANGE_DELIVERIES.id+"-form").getFirst(),o=ev.utils.find(r,".endDate");n.includes("undefined")?o.hide():o.show()})),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.gtm.push("myaccount","cambio-entrega-iniciotramite","modificar")})),ev.utils.addEventHandlerFromData("click","data-modal-popup",(function(e,t){ev.utils.find(document,"[data-paywall-screen=modal-message-error]").hide(),ev.utils.find(document,"[data-paywall-screen=buttons]").show()})),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,n){"true"!==e.getAttribute(n)||t(i)})),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] input[id=check-type-days-week]").on(["click"],(function(t,i){const n=i.value,r=ev.utils.find(document,"form[id="+e.CHANGE_DELIVERIES.id+"-form").getFirst(),o=ev.utils.find(r,".selectionDays");n.includes("selectedDays")?o.show():o.hide()})),ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] select[name*=deliveryType]").on(["change"],(function(t,i){var n=ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] .delivery-address");0===t.currentTarget.selectedIndex?n.show():n.hide(),n.getFirst()&&ev.utils.find(n.getFirst(),"input, select").attr("data-form-disabled",0===t.currentTarget.selectedIndex?"false":"true")})),ev.utils.find(document,"[data-paywall-screen-id='"change"],(function(t,i){var n=ev.utils.find(document,"[data-paywall-screen-id='"+e.CHANGE_DELIVERIES.id+"'] .others-indications");i.selectedIndex===t.currentTarget.length-1?n.show():n.hide()}))}(n)})).catch((function(e){ev.utils.find(document,n.selector+"__error").show()}))}},r={refresh:function(t){(t=t||{}).selector="."+e.NEWSPAPER_REPLACEMENT.id;var n=ev.utils.find(document,"#subscriptionId").getFirst().value;i({selector:t.selector,load:function(e,t){return ev.service.sap.load.newspaperReplacement(e,n)},subscriptionId:n}).then((function(){!function(t){t=t||{},ev.forms.onSubmit(ev.utils.getFormFromId(e.NEWSPAPER_REPLACEMENT.id+"-selection-form"),(function(e,t){return ev.gtm.push("myaccount","no_recibi_diario","no_recibi_diario_inicia_accion"),Promise.resolve(t)}),(function(i){ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] div").hide(),ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] input[name='requestType']").val(""),ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] div[id='"+i.requestType.toLowerCase()+"']").show(),ev.utils.find(document,t.selector+" [data-paywall-screen='confirm'] input[name='requestType']").val(i.requestType),ev.screens.registry[e.NEWSPAPER_REPLACEMENT.id].transition("confirm")}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0}),ev.forms.onSubmit(ev.utils.getFormFromId(e.NEWSPAPER_REPLACEMENT.id+"-form"),(function(t,i){return ev.screens.registry[e.NEWSPAPER_REPLACEMENT.id].transition("loading"),ev.service.sap.requestNewspaperReplacement(i)}),(function(i){ev.utils.find(document,t.selector+" [data-paywall-screen='success'] div[id='"+i.requestType.toLowerCase()+"']").show(),ev.screens.registry[e.NEWSPAPER_REPLACEMENT.id].transition("success")}),(function(e){ev.forms.utils.error(ev.commons.getErrorMessages().generic),r.refresh()}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0})}(t)})).catch((function(e){ev.utils.find(document,t.selector+"__error").show()}))}},o={refresh:function(t){(t=t||{}).selector="."+e.CHANGE_PAYMENT_METHOD.id,i({selector:t.selector,load:function(e,t){riptionId)},issuingCompany:t.issuingCompany,subscriptionId:t.subscriptionId}).then((function(){!function(t){t=t||{},ev.utils.find(document,t.selector+"__container [data-subscription-popup]").on(["click"],(function(e,t){ev.utils.find(document,"#"+t.getAttribute("data-subscription-popup")).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.utils.find(document,".current-card .btn.btn-primary").on(["click"],(function(){ev.gtm.push("myaccount","cambiar-tarjeta","nueva-tarjeta")}));for(var i=(new Date).getFullYear(),n=0;n<15;n++)ev.utils.find(document,t.selector+"__container [data-paycomet=dateYear]").append('<option value="'+i.toString().substring(2,4)+'">'+i+"</option>"),i++;ev.forms.onSubmit(ev.utils.getFormFromId(e.CHANGE_PAYMENT_METHOD.id+"-form"),(function(t,i){return ev.screens.registry[e.CHANGE_PAYMENT_METHOD.id].transition("loading"),ev.service.sap.changePaymentCard(i)}),(function(t){ev.screens.registry[e.CHANGE_PAYMENT_METHOD.id].transition("successful")}),(function(){ev.screens.registry[e.CHANGE_PAYMENT_METHOD.id].transition("submit"),ev.utils.find(document,"#paymentErrorMsg").append(ev.commons.getErrorMessages().generic),ev.utils.find(document,"#paycometPaymentForm button").removeAttr("disabled")}),{ignoreSuccessMessage:!0});const r=ev.utils.find(document,"#paymentErrorMsg").getFirst();if(r){var o=new MutationObserver((function(e,t){for(var i=0;i<e.length;i++)if("childList"===e[i].type){const e=ev.utils.find(document,"#paymentErrorMsg");e.getFirst().innerText&&(e.addClass("alert"),e.addClass("alert-danger"))}}));o.observe(r,{attributes:!1,childList:!0,subtree:!0})}}(t)})).catch((function(e){ev.utils.find(document,t.selector+"__error").show()}))},handlePaycometTemporalToken:function(){const t=ev.utils.find(document,"#paymentErrorMsg");t.removeClass("alert"),t.removeClass("alert-danger");var i=new Event("submit",{bubbles:!0,cancelable:!0});ev.utils.getFormFromId(e.CHANGE_PAYMENT_METHOD.id+"-form").dispatchEvent(i)}},s=function(){var t=function(t){if(t){var i=ev.utils.getFormFromId(t.action.id+"-form");switch(t.action.id){case e.CANCEL_SUBSCRIPTION.id:const n="."+t.action.id;ev.forms.onSubmit(i,(function(e,i){return ev.screens.registry[t.action.id].transition("submitting"),t.onSubmit(i)}),(function(e){ev.screens.registry[t.action.id].transition("success")}),(function(e){if(e&&"object"==typeof e){const n=e.validationErrors||[];return i.each((function(e){n.forEach((function(t){ev.forms.utils.inputError(e,{field:t.field,message:ev.commons.getErrorMessages().invalid_format})}))})),void ev.screens.registry[t.action.id].back()}ev.screens.registry[t.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!0,ignoreValidationErrors:!0}),ev.utils.find(document,n+" [data-paywall-screen='confirm'] select").on(["change"],(function(e,t){const i=ev.utils.find(document,n+" [data-paywall-screen='confirm'] .btn-primary");0!==t.selectedIndex?i.show():i.hide()}));break;case e.CHANGE_EDITION.id:ev.forms.onSubmit(i,(function(e,i){return ev.screens.registry[t.action.id].transition("submitting"),t.onSubmit(i)}),(function(e){(e=e||{}).startDate&&ev.utils.find(document,'[data-paywall-screen-id="'+t.action.id+'"] .'+t.action.id+"__date").append(e.startDate),ev.screens.registry[t.action.id].transition("success")}),(function(){ev.screens.registry[t.action.id].transition("confirm"),ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),{ignoreSuccessMessage:!0});break;case e.CHANGE_DELIVERIES.id:t.action.id}ev.utils.addEventHandlerFromData("click","data-subscription-action="+t.action.id,(function(i,r){var s=ev.utils.getFormFromId(t.action.id+"-form");const a="."+t.action.id;if("embedded"===i.getAttribute("data-layout"))return c=t.action,d=i.getAttribute("data-subscription-id"),ev.commons.referrer.save(),void ev.utils.redirect("/perfil/ev/suscripciones/papel/"+c.url+"/"+d);var c,d;switch(t.action.id){case e.CHANGE_PAYMENT_METHOD.id:o.refresh({issuingCompany:i.getAttribute("data-issuing-company"),subscriptionId:i.getAttribute("data-subscription-id")});break;case e.CANCEL_SUBSCRIPTION.id:ev.screens.registry[t.action.id].transition("confirm"),ev.utils.find(document,a+" [data-paywall-screen='confirm'] .btn-primary").hide(),ev.utils.find(document,a+" [data-paywall-screen='confirm'] select").getFirst().selectedIndex=0,ev.utils.find(s.getFirst(),"[name='subscriptionId']").val(i.getAttribute("data-subscription-id")),ev.gtm.push("myaccount","cancelar-suscripcion","cancelar-suscripcion");break;case e.CHANGE_EDITION.id:ev.gtm.push("myaccount","cambiar-idioma-iniciotramite","confirmar");const r=ev.commons.getMessageTable().custom.language;ev.utils.find(s.getFirst(),"[name='publicationId']").val(i.getAttribute("data-publication-id"));const c=ev.utils.find(document,'[data-paywall-screen-id="'+t.action.id+'"] .'+t.action.id+"__language");c.empty(),c.append("00000011"===i.getAttribute("data-edition-id")?r.spanish:r.catalan),ev.utils.find(s.getFirst(),"[name='subscriptionId']").val(i.getAttribute("data-subscription-id")),ev.utils.find(s.getFirst(),"[name='editionId']").val(i.getAttribute("data-edition-id"));break;case e.CHANGE_DELIVERIES.id:n.refresh({subscriptionId:i.getAttribute("data-subscription-id")})}ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+i.getAttribute("data-subscription-action")).toggleClass("active")}))}},r=function(i){void 0===(i=i||{}).registerHandlers&&(i.registerHandlers=!0),function(i){if((i=i||{}).registerHandlers&&(t({action:e.CHANGE_PAYMENT_METHOD}),t({action:e.CHANGE_EDITION,onSubmit:function(e){return ev.service.sap.changeEdition(e)}}),t({action:e.CANCEL_SUBSCRIPTION,onSubmit:function(e){return ev.service.sap.cancelSubscription(e)}}),t({action:e.CHANGE_DELIVERIES}),t({action:e.NEWSPAPER_REPLACEMENT}),t({action:e.INVOICES}),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.forms.onSubmit(ev.utils.getFormFromId("linkSubscription"),(function(e,t){return ev.service.sap.link(t)}),(function(){window.location.reload()})),ev.utils.addEventHandlerFromData("click","data-accounts-subscription=unlink",(function(e,t){ev.service.sap.unlink().then((function(){window.location.reload()}))})),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,t){"true"!==e.getAttribute(t)||s(i)}))),i.autoTriggerSingleAction){var n=ev.utils.find(document,"[data-subscription-action]");if(1===n.asArray().length){var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.getFirst().dispatchEvent(r)}}}(i)},s=function(e){(e=e||{}).selector=".print-subscriptions",i({selector:e.selector,load:function(e,t){return ev.service.sap.load.subscriptions(e)}}).then((function(){r(e)})).catch((function(t){ev.utils.find(document,e.selector+"__error").show()}))};return{refresh:s,refreshSubscriptionSingleAction:function(e){e=e||{};const t=".subscription-single-action",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");i.getFirst()&&(n.show(),i.empty(),ev.service.sap.load.singleAction(e.action,e.layout,i,e.purchaseId,e.isEpaper).then((function(){const t=ev.utils.find(document,".purchases.purchasesSingleAction");t.getFirst()?t.hide():n.hide(),r(e)})).catch((function(e){n.hide(),ev.utils.find(document,t+"__error").show()})))}}}(),a=function(){var e=function(e){e=e||{},ev.subscriptions.init(),ev.utils.addEventHandlerFromData=e.getAttribute("data-invoice-id"),n=e.getAttribute("data-invoice-type");document.body.style.cursor="wait",ev.service.sap.downloadInvoice(i,n).then((function(.createElement("a");t.href=window.URL.createObjectURL(e),t.download=i+".pdf",t.style.display="none",document.body.appendChild(t),t.click(),ev.gtm.push("myaccount"," factura-descargar","factura")})).catch((function(){ev.forms.u((function(){document.body.style.cursor="default"}))}))};return{refresh:function(t){(t=t||{}).selector=".sap-invoices",i({selector:t.selector,load:function(e,t){return ev.service.sap.load.invoices(e)}}).then((function(){e(t)})).catch((function(e){ev.utils.find(document,t.selector+"__error").show()}))}}}(),c=function(){const e="card-management",t={id:"add-beneficiary-card"};var n={},r=function(o){(o=o||{}).selector="."+e,i({selector:o.selector,load:function(e,t){return ev.service.sap.load.cardManagement(e)}}).then((function(){n={},function(i){i=i||{},ev.utils.find(document,"#"+e+"-form."+t.id+" input:not([replace-required=false])").removeAttr("disabled"),ev.utils.find(document,"#"+e+"-form."+t.id+" input:not([replace-required=false])").attr("required",""),ev.utils.getFormFromId(e+"-form").on(["submit"],(function(e,t){if(e.preventDefault(),n=ev.serialize.form(t),ev.forms.validate(t)){if(!n.action)return void ev.forms.utils.error(ev.commons.getErrorMessages().generic);"replace-holder-card"===n.action&&ev.gtm.push("myaccount","tarjetaclub-sustitucion","sustitucion"),"cancel-beneficiary-card"===n.action&&ev.gtm.push("myaccount","tarjetaclub-beneficiarios-baja","baja"),"add-beneficiary-card"===n.action&&ev.gtm.push("myaccount","tarjetaclub-beneficiarios-iniciotramite","alta"),ev.utils.find(document,"body").toggleClass("modal-open"),ev.utils.find(document,"#"+n.action).toggleClass("active")}})),ev.forms.onSubmit(ev.utils.getFormFromId(e+"-confirm-form"),(function(e,t){return ev.gtm.push("myaccount","tarjetaclub-sustitucion-confirmar","confirmar"),ev.screens.registry[n.action].transition("loading"),ev.service.sap.handleFidelityCard(n)}),(function(e){e=e||{},"replace-holder-card"===n.action&&e.startDate&&ev.utils.find(document,'[data-paywall-screen-id="'+n.action+'"] .'+n.action+"__date").append(e.startDate+"."),ev.screens.registry[n.action].transition("successful")}),(function(){ev.screens.registry[n.action].transition("error")}),{ignoreSuccessMessage:!0}),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.utils.addEventHandlerFromData("click","data-subscription-refresh",(function(e,t){"true"!==e.getAttribute(t)?ev.screens.registry[n.action].transition("confirm"):r(i)}))}(o)})).catch((function(e){ev.utils.find(document,o.selector+"__error").show()}))};return{refresh:r}}();return{subscriptions:s,invoices:a,fidelityCard:c,changePaymentCard:o,changeDelivery:n,newspaperReplacement:r}}(),E=(o=null,s=function(e){e=e||{};const t=ev.utils.find(document,e.containerSelector+"__container"),i=ev.utils.find(document,e.containerSelector+" .evl-spinner");i.show(),t.empty(),ev.service.loadHorecaConfig(t).then((function(){i.hide()})).catch((function(){i.hide(),ev.utils.find(document,e.containerSelector+"__error").show()}))},{init:function(e){o=(e=e||{}).containerSelector,s({containerSelector:o})},validation:(t=function(e){e.eventSentToAnalytics=!1,ev.storage.save("local","evolok:ev_access_token",e),ev.utils.redirect("/perfil/ev/horeca/acceso-exitoso")},{init:function(e){e=e||{};var i=ev.storage.load("local","evolok:ev_access_token")||{};if(!i.eventSentToAnalytics&&i.purchaseId)try{ev.gtm.push("evolok","acceso-horeca",i.purchaseId,!0),i.eventSentToAnalytics=!0,ev.storage.save("local","evolok:ev_access_token",i)}catch(e){console.error("Error: Could not process user segments."+(e.message?" Reason: "+e.message:""))}switch(e.detectionStrategy){case"pin":!function(e){if(!e.formId)return;const i=ev.utils.getFormFromId(e.formId);ev.forms.onSubmit(i,(function(e,t){return ev.forms.validate(e)?ev.service.validateHorecaPin(t):Promise.reject({ignoreOnFailure:!0})}),(function(e){(e=e||{}).purchaseId&&e.accessCode?t(e):ev.forms.utils.error(ev.commons.getErrorMessages().generic)}),null,{ignoreSuccessMessage:!0})}(e);break;case"geocoding":!function(e){(e=e||{}).purchaseId&&navigator.geolocation?navigator.geolocation.getCurrentPosition((function(i){const n={lat:i.coords.lv.service.validateHorecaGeocoding(n).then((function(i){(i=i||{}).purchaseId&&i.accessCode?t(i):ev.screens.registry[e.screenId].transition("error")})).catch((function(){ev.screens.registry[e.screenId].transition("error")}))}),(function(){ev.screens.registry[e.screenId].transition("error")}),{timeout:1e4}):ev.screens.registry[e.screenId].transition("error")}(e)}}}),geocoding:(i=[],n=!1,r=function(){ev.utils.addEventHandlerF){ev.commons.togglePopup(e.getAttribute(t))}))},{init:function(e){e=e||{},n||(EV.Event.on("gg.user_updated",(function(){ev.utils.find(document,e.confirmationContainerId).empty(),ev.service.loadGeocodingConfirmation(ev.utils.find(document,e.confirmationContainerId)).then((function(){const t=ev.utils.find(document,e.confirmationContainerId+"Form");ev.forms.onSubmit(t,(function(t,n){if(!ev.forms.validate(t))return Promise.reject({ignoreOnFailure:!0});const r=i.filter((function(e){return e.placeId===n.placeId}))[0];return 0===r.length?Promise.reject({}):ev.service.updateGeocoding(e.purchaseId,r)}),(function(){ev.commons.togglePopup(e.confirmationContainerId.replace("#","")),s({containerSelector:o})}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})),r(),ev.utils.fv.utils.find(document,"body").toggleClass("modal-open")})).catch((function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)}))})),n=!0),ev.utils.addEventHandlerFromData("click","data-geocoding-target",(function(t,i){var n=t.getAttribute(i);t.getAttribute("data-purchase-id"),"delete"===n&&ev.commons.togglePopup(e.deletionContainerId.replace("#",""))}));const t=ev.utils.find(document,e.deletionContainerId+"Form");ev.forms.onSubmit(t,(function(e,t){return ev.service.deleteGeocoding(t.purchaseId)}),(function(){ev.commons.togglePopup(e.deletionContainerId.replace("#","")),s({containerSelector:o})}),(function(){ev.forms.utils.error(ev.commons.getErrorMessages().generic)})),r(),ev.commons.disableFormAutocomplete()},set results(e){i=e}})}),b=(a="lv",c="md",d=function(){ev.utils.spinner.hide(),ev.utils.find(document,".horeca-epaper__error").show()},{reader:function(e){if((e=e||{}).ticket){window.readerEvents={};var t,i={languageCode:"es",splashScreen:{time:1500},theme:(t=e.publication,t===c?{backgroundColor:"#f0f0f0",topbarIconColor:"#ffffff",topbarTitleColor:"#ffffff",topbarBackgroundColor:"#000000",topbarBorderColor:"rgba(255, 255, 255, 0.15)",logo:"https://epaper.mundodeportivo.com/img/logo.png",articleTitleColor:"#ffffff",articleBackgroundColor:"white",articleLogoBackgroundColor:"#000000",articleTopbarIconColor:"#ffffff",articleTopbarBorderColor:"rgba(0,0,0,0.15)",articleTopbarBackgroundColor:"#000000"}:{backgroundColor:"#f0f0f0",topbarIconColor:"#ffffff",topbarTitleColor:"#ffffff",topbarBackgroundColor:"#012c63",topbarBorderColor:"rgba("https://epaper.lavanguardia.com/img/logo.png",articleTitleColor:"#ffffff",articleBackgroundColor:"white",articleLogoBackgroundColor:"#012c63",articleTopbarIconColor:"#ffffff",articleTopbarBorderColor:"rgba(0rticle:!0,printPage:!1,boxLayer:!0,help:!1,"startPage-":1,tableOfContent:!0,railway:!0,articleTextSelection:!1,forceOnePage:!1,railwaySinglePageLayout:!1,disableVerticalLayout:!1,disableHorizontalLayout:!1,closeButton:function(){history.go(-1)},selector:e.selector,ticket:e.ticket},n=ev.storage.load("local","evolok:ev_access_token");if(!n)return d(),void ev.utils.find(document,e.selector).hide();ev.service.validateHorecaEpaper(n,e.publication).then((function(){ev.utils.spinner.hide(),MilibrisReader.load(i)})).catch((function(){d(),ev.utils.find(document,e.selector).hide()}))}else console.error("Error: Could not initialize miLibris reader. Reason: the ticket can not be undefined, null or empty.")},issues:function(e){e=e||{};var t=ev.storage.load("local","evolok:ev_access_token");t?ev.service.validateHorecaEpaper(t,e.publication).then((function(){const i=ev.utils.find(document,".horeca-epaper__issues");return ev.service.loadEpaperIssues(i,t.purchaseId,e.publication)})).then((function(){ev.utils.spinner.hide(),ev.utils.addEventHandlerFromData("click","data-epaper-ticket",(function(e,i){var n={},r=e.getAttribute("data-epaper-publication");r&&r!==a&&(n.publication=r),ev.utils.redirectWithParams("/perfil/ev/horeca/epaper/reader/"+t.purchaseId+"/"+e.getAttribute(i),n)}))})).catch((function(){d()})):d()}}),h=(u=null,l=null,f=null,{init:function(e){e=e||{};const t=".product-list",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,".header_button"),r=new IntersectionObservting?n.style("visibility","hidden"):n.style("visibility","visible")}))}),{root:null,rootMargin:"0px",threshold:.1});i.each((function(e){r.observe(e)})),EV.Event.on(EV.Event.PM_ERROR,(function(e){ev.utils.find(document,t+" .evl-spinner").hide(),ev.utils.find(document,t+"__widget").show()})),ev.utils.addEventHandlerFromData("click","data-consent-action",(function(e,t){"agreetoall"===e.getAttribute(t)&&(window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.setUserAgreeToAll()})),ev.commons.referrer.load())})),e.offersConfig&&e.offersConfig.external&&function(e){const t=".club-vanguardia__features--external",i=ev.utils.find(document,t+" .evl-spinner");try{ev.service.landing.load.externalOffers(e.url,e.callback,e.version).then((function(e){const i=[],n=(new DOMParser).parseFromString(e.model.html,"text/html");if(ev.utils.find(n,".article-module").each((function(e){i.push({discountText:ev.utils.find(e,".call-to-action").getFirst().innerText.replace(/\n/g,"").trim(),descriptionText:ev.utils.find(e,".epigraph").getFirst().innerText.replace(/\n/g,"").trim(),title:ev.utils.find(e,"h2").getFirst().innerText.replace(/\n/g,"").trim(),url:ev.utils.find(e,"h2 > a").attr("href"),imageUrl:ev.utils.find(ev.utils.find(e,".image-container").getFirst(),"img").attr("data-src"),isUrlExternal:!0})})),0===i.length)throw new Error;const r=ev.utils.find(document,t);if(!r.getFirst())throw new Error;return ev.service.landing.load.offers(i,r)})).catch((function(e){ev.utils.find(document,t+"+div").show()})).finally((function(){i.hide()}))}catch(e){i.hide(),ev.utils.find(document,t+"+div").show()}}(e.offersConfig)},refresh:function(e){e=e||{};const t=".product-list",i=ev.utils.find(document,t+"__container"),n=ev.utils.find(document,t+" .evl-spinner");try{if(!i.getFirst())throw new Error;if(!h.products)throw new Error;var r=[];h.products.forEach((function(e){const t={};if(t.id=e.id,t.productName=e.name,t.recommended=h.recommended===e.name,e.bundlePlans&&e.bundlePlans.length>0){const t=e.bundlePlans[0],i={};i.frequency=t.frequency,i.trialPrice=t.trialPrice,i.finalPrice=t.finalPrice,i.discount=t.discount,e.paymentPlans.push(i)}if(e.paymentPlans&&e.paymentPlans.length>0){const i=e.paymentPlans[0];e.toUpperCase(),t.price=(i.trialPrice?i.trialPrice:i.finalPrice).replace(".","'"),t.period=" /"+("MONTH1"===i.frequency.id?"mes":"ao"),t.discount=i.trialPrice&&i.discount&&i.discount.displayName?i.discount.displayName:"Sin descuento"}r.push(t)})),n.show(),i.empty(),ev.service.landing.load.products(r,i).then((function(){ev.utils.addEventHandlerFromData("click","data-product-id",(function(e,t){if(!h.products)return;const i=e.getAttribute(t);if(!i)return;const n=h.products.find((function(e){return e.id===i}));if(!n)return;const r=ev.utils.find(document,"#ev-product-selection__ div[id^='product-"+n.name+"']");if(r.getFirst()){var o=ev.utils.find(r.getFirst(),"div[id^='payment-plan-']").getFirst(),s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});o.dispatchEvent(s)}}))})).catch((function(e){ev.utils.find(document,t+"__error").show()})).finally((function(){n.hide()}))}catch(e){n.hide(),ev.utils.find(document,t+"__error").show()}},get products(){return u},set products(e){u=e},get version(){return l},set version(e){l=e},get recommended(){return f},set recommended(e){f=e}});return{init:function(){ev.utils.addEventHandlerFromData("click","data-subscription-change",(function(e,t){const i=e.getAttribute("data-subscription-id"),n=ev.utils.getFormFromId(e.getAttribute(t));ev.utils.find(document,"#subscriptions").hide(),ev.utils.find(n.getFiw()})),ev.utils.addEventHandlerFromData("click","data-subscription-popup",(function(e,t){ev.utils.find(document,"#"+e.getAttribute(t)).toggleClass("active"),ev.utils.find(document,"body").toggleClass("modal-open")})),ev.utils.addEventHandlerFromData("click","data-subscription-back",(function(e,t){const i=ev.utils.getFormFromId(e.getAttribute(t));ev.utils.find(document,"#subscriptions").show(),i.hide()})),ev.forms.onSubmit(ev.utils.getFormFromId("linkSubscription"),(function(e,t){return ev.service.sap.link(t)}),(function(){window.location.reload()})),ev.utils.addEventHandlerFromData("click","data-accounts-subscription=unlink",(function(e,t){ev.service.sap.unlink().then((function(){window.location.reload()}))}))},requestSuccess:function(e,t){const i=ev.utils.getFormFromId(e).getFirst();ev.utils.find(i,"#ticketNumber").empty(),ev.utils.find(i,"#ticketNumber").append(t),ev.utils.find(i,"[data-subscription-success]").show(),ev.utils.find(i,"[data-form-submit]").hide(),ev.utils.find(i,"input").prop("readonly",!0)},fiscal:m,products:v,digital:p,sap:g,horeca:E,renfe:{init:function(e){e=e||{},ev.forms.onSubmit(ev.utils.getFormFromId("renfeCardForm"),(function(e,t){return t=t||{},ev.forms.validate(e)?(ev.utils.find(document,"[renfe-button-validate]").attr("disabled",""),ev.service.renfe.cardSubscription(t.renfeCardId)):Promise.reject({ignoreOnFailure:!0})}),(function(e){ev.utils.find(document,"#containerRenfeForm").hide(),ev.utils.find(document,"#containerSuccess").show()}),(function(e){ev.utils.find(document,"[renfe-button-validate]").removeAttr("disabled")}),{ignoreSuccessMessage:!0,ignoreFailureMessage:!1})}},milibris:b,landing:h}}();
ev.swiper=function(){const e=".swiper-container";var i=function(){const e=ev.utils.find(docuirst();e&&ev.gtm.pageview.trigger(e.id)};return{init:function(n){n=n||{};new Swiper(e,{autoHeight:!0,watchOverflow:!0,arents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swipm.pageview.conf("embedded",n.flow),i()},slideChangeTransitionEnd:function(){i()}}})}}}();
ev.utils=function(){var n=fu?"+Object.keys(n).map((function(t){return t+"="+encodeURIComponent(n[t])})).join("&")},t=function(n,t,e){return n.attachEvent?n.attachEvent("on"+t,(function(t){e(t,n)})):n.addEventListenerreturn n.attachEvent?n.detachEvent("on"+t,e):n.reon(n||n instanceof Array},o=function(n){var r=n||[],i=!1,u=function(n,t){if(null==t)return window.getComputedStyle(r[0]).getPropertyValue(n);f((function(e){e.style[n]=t}))},c=function(n,e,r){var o=function(n,t){(!r||r&&!i)&&(i=!0,e(n,t))};f((function(e){n.forEach((fion(){return r.length?Array.prototype.slice.call(r):[]},f=function(n){for(var t=0;t<r.length;t++)n(r[t])};return{hide:function(){u("display","none")},show:function(){u("display","inherit")},one:function(n,t){c(n,t,!0)},first:function(n){return 0===r.length?this:(n&&n(r[0]),o([r[0]]))},append:function(n){f((function(t){var e=(new DOMParser).parseFromString(n,"text/html");[...Array.prototype.slice.call(e.head.childNodes),...Array.prototype.slice.call(e.body.childNodes)].reduce((function(n,t){return n.push(t),n}),[]).forEach((function(n){t.appendChild(n),setTimeout((function(){if(void 0!==n.querySelectorAll)for(var t=n instanceof HTMLScriptElement?[n]:n.querySelectorAll("scrint.createElement("scriprc),o.appendChild(i),r.parentNode.replaceChild(o,r)}})) o=function(t){r(t),f((function(t){n.forEach((function(n){e(t,n,o)}))}))};f((fun){t(e,n,o)}))}))},style:u,addClass:function(n){f((function(t){t.classList.add(n)}))},removeClass:function(n){f((function(t){t.classList.remove(n)}))},hasClass:function(n){return a().some((function(t){returny:function(){f((function(n){for(;n.firstChild;)n.reld)}))},get:function(){return r},toggleCle(n)}))},asArray:a,getFirst:function(){return r.length?r[0]:null},val:function(nion(n){const t=n?"flex":"block";fn.style.display=t:n.styl=){(n,t){if(null==t)return r[0][n];f((function(e){e[n]=t}))},each:f,removeHandler:function(n,t){f((function(r){n.forEach((function(n){e(r,n,t)}))}))},removeAttr:function(n){f((function(t){t.removeAttribute(n)}))},dispatchEvent:function(n){f((function(t){t.dispatchEvent(n)}))}}},i=functioturn n.then((function(){return t}))}),Promise.resolve())},u=function(n,t){return o(n.querySelectorAll(t))},c=function(n,t){return u(document,"["+n+"]")},a=function(n,t){return c(n).asArray()};var f=function(n){if(!n)return!0;if(Array.isArray(n))return!n.length;if("object"==typeof n){for(var t in n)if(n.hasOwnProperty(t))return!1}else if("string"==typeof n)return!n&&/^\s*$/.test(n);return!0},s=function(n,t,e,r,o){return t--,r=r||{resolve:null,reject:null},e=e||new Promise((function(n,t){r.resolve=n,r.reject=t})),n(o).then((function(n){r.resolve(n)})).catch((function(i){t>0?s(n,t,e,r,o):r.reject(i)})}).base;r&&delete e.base,ev.utils.redirect((r||"")+t+n(e))},d=function(n,t!1},p=function(){const n=".evl-spinner";var t=[];return{show:function(e,o,i){o||ev.utils.find(document,(i||"")+n).show(),e&&r(e)&&(t=e,e.forEach((function(n){u(document,n).hide()})))},hide:function(){ev.utils.find(document,n).hide(),t&&t.length&&(t.forEach((function(n){u(document,n).show()})),t=[])}}}();return{formatParams:n,addEvent:t,nodeListHelper:o,loadScript:function(n){return new Promise((function(t,e){var r=document.createElement("script");r.src=n,r.onload=t,r.onerror=e,document.head.appendChild(r)}))},loadStylesheet:function(n){return new Promise((function(t,e){var r=document.createElement("link");r.href=n,r.rel="stylesheet",r.type="text/css",r.onload=t,r.onerror=e,document.head.appendChild(r)}))},loadInlineStylesheet:function(n){return new Promise((function(t,e){var r=document.createElement("style");r.innerHTML=n,document.head.appendChild(r),r.onload=t,r.oneev.accounts.isApp()&&!e){var r=function(n){const t=n.slice(n.indexOf("?")+1);&").reduce((function(n,t){const e=tnst r=t.slice(0,e),o=t.slice(e+1);return n[r]=decodeURIComponent(o),n}),{}):{}}(t);r.facet||(r.facet="app"),!r["auth-token"]&&ev.accounts.getAuthTokenFromUrl()&&(r["auth-token"]=ev.accounts.getAuthTokenFromUrl()),t")[0]+n(r)}window.lon i(e)},formatent(n).format(t)},find:u,findfromData:c,findfromDataAndReturnArray:a,findIa-"+n+"="+t+"ray:function(n,t){return n.filter((function(n){return n!=t}))},isEmpty:f,unique:function(n){var t={boolean:{},number:{},string:{}},e=[];return n.filter((function(n){var r=typeof n;return r in t?!t[r].hasOwnProperty(n)&&(t[r][n]=!0):!(e.indexOf(n)>=0)&&e.push(n)}))},getFormFromId:function(n){return u(document,"#"+n)},addEventHandlerFromData:function(n,t,e,r){var o=a(t);o.length&&o.forEach((function(r){r.addEventListener(n,(function(){e(r,t)}))}))},isVisible:function(n){return n.offsetWidth>0||n.offsetHeight>0},getParam:function(n){var t=new RegExp("[?&]"+n+"=?([^&]*cation.hash,"").match(t);if(e)return e[1]},retryAsync:s,disableInputAutocomplete:function(n){u(document,"#"+n+" inp)},redirectWithParams:l,registerMutationObserver:function(n){n=n||{};const t=document.getElementById(n.id);if(!t)return;if(!d(n,t,e)){var e=new MutationObserver((function(e,r){for(var o=0;o<e.length&&("r));o++);}));e.observe(t,{attributes:!1,childList:!0,subtree:!0})}},isCookiePresent:function(n){return!!ev.cookie.get(n)},getQueryParams:function(n){n=n||{};var t=window.location.search.replace("rEach((function(t){var e=t.split("=");n[e[0]]=e[1]})),n},spinner:p,redirectWithOptions:function(n,t){t=t||{},ev.commons.queryParams.save();var e=ev.commons.queryParams.get();t.pt r=new Date(e,t,n),o=r.getFullYear()===e,i=r.getMonth()===t,u=r.getDate()===n;return o&&i&&u},minTwoDigits:function(n){return(n<10?"0":"")+n},getSiblings:function(n){var t=[];if(!n||!n.parentNode)return t;for(var e=n.parentNode.firstChild;e;)1===e.nodeType&&e!==n&&t.push(e),e=e.nextSibling;return t},arokie="cookietest=1";var n=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",n}catch(n){return!1}},hasBrowserSupport:function(){var n=window.navigator.userAgent;return!(n.indexOf("MSIE ")>0)&&!(n.indexOf("Trident/")>0)},transformInnerTextToHtmr){var o=e||r.innerText;r.innerText="",u(n,t).append(o)}},camelCaseToDash:function(n){return n.replace(/([A-Z])/g,(function(n){return"-"+n[0].toLowerCase()}))}}}();
lv.profile.common={init:function(o){$("[data-accounts=logout]").click(function(o){gg.accounts.getService().logout().success(function(){gg.gtm.push("usuarios","logout","perfil",!0),window.location.reload()}).failure(function(o){lv.profile.utils.error(o.errorMessage)})}),$(".header-profile__burger").click(function(){$("body").toggleClass("blurred")})}};
lv.profile.interests={init:function(){lv.profile.utils.form("#interestsForm",function(t){return t.data=t.data||{},t.data.interests=t.data.interests||{},t.data.interests.hobbies=t.data.interests.hobbies||[],gg.accounts.getService().update(t)})}};
lv.profile.newsletters={init:function(){lv.profile.utils.form("#newslettersForm",function(t){return t.data=t.data||{},t.data.newsletters=t.data.newsletters||[],gg.accounts.getService().update(t)})}};
lv.profile.privacy={init:function(){lv.profile.utils.form("#privacyform",function(i){return i.data=i.data||{},i.data.notifications=i.data.notifications||[],gg.accounts.getService().update(i)})}};
lv.profile.profile=function(){var a=function(){$("[data-accounts=deleteAccount]").click(function(a){$.ajax("/perfil/user",{type:"DELETE"}).done(function(){window.location.reload()}).fail(function(a){lv.profile.utils.error(a.responseJSON.errorMessage)})}),$("[data-profile=deleteImage]").click(function(a){$("[data-profile=image]")[0].removeAttribute("src"function(a){var o=new FileReader;o.onload=function(a){$("[data-profile=image]").prop("src",o.result),$("input[name=image]").val(o.result)},$("[data-profile=binary]")[0].click(),$("[data-profile=binary]").one("change",function(a){var e=$(this)[0].files;e.length&&o.readAsDataURL(e[0])})})},o=function(){$("[data-accounts=addPassword]").click(function(a){gg.accounts.getService().forgottenPassword($(this).data("email")).success(function(){$("#addPassword").toggleClass("active"),$("[data-popup=emailSent]").click()}).failure(function(a){lv.profile.utils.error(a.errorMessage)})}),lv.profile.utils.form("#passwordForm",function(a){return gg.accounts.getService().changePassword(a.password,a.oldPassword)},funcopup=changePassword]").click())}),$("[data-accounts-oauth-link]").click(function(a){gg.accounts.getService().oAuthLogin($(this).data("accounts-oauth-link")).success(function(){window.location.reload()}).failure(function(a){lv.profile.utils.error(a.errorMessage)})}),$("[data-accounts-oauth-unlink]").click(function(a){$.ajax("/perfil/user/oauth/"+$(this).data("accounts-oauth-unlink"),{type:"DELETE"}).done(function(){window.location.reload()}).fail(function(a){lv.profile.utils.error(a.responseJSON.errorMessage)})})};return{init:function(){a(),o(),$("[data-popup]").click(function(a){$("#"+$(this).data("popup")).toggleClass("active")}),lv.profile.utils.form("#profileForm",function(a){return a.data.notifications=a.data.notifications||[],gg.accounts.getService().update(a)})}}}();
lv.profile.service=function(){var n=ev.accounts.getMultitenantScriptConfig().api.url,e=function(n){var e=new gg.AccountsServicePromise;return n(e),e.handler};return{link:function(t){return e(function(e){gg.ajax.post(n+"/user/client",t,function(n){e.resolve(n)},{credentials:!0})})},unlink:function(){return e(function(e){gg.ajax.delete(n+"/user/client",function(n){e.resolve(n)},{credentials:!0on(t){return e(function(e){gg.ajax.post(n+"/user/subscriptions/"+t.idSubscription+"/request/edition-change",t,fun},{credentials:!0,type:"json"})})},requestEVouchers:function(t){return e(function(e){gg.ajax.post(n+"/user/subscriptions/"+t.idSubscription+"/request/e-vouchers",t,function(n){e.resolve(n)},{credentials:!0,type:"json"})})},changeDelivery:function(t){return e(function(e){gg.ajax.post(n+"/user/subscriptions/"+t.idSubscription+"/request/delivery-change",t,function(n){e.resolve(n)},{credentials:!0,type:"json"})})}}}();
lv.profile.screens=function(){var n=function(n,c,t){gg.accounts.onUnlogged(function(){o(n,c,t)}),gg.accounts.onLogged(function(){var n=e("_ref");n?window.location.href=decodeURIComponent(n):window.location.reload()})},o=function(n,o,e){e.facet=e.facet||"web",e.soceAgent||"profile",gg.accounts.show(n,o,e,{selector:"#screen-container"})},e=function(n){var o=new RegExp("[?&]"+n+"=?([^&]*)ion.href.replace(location.hash,"").match(o);if(e)return e[1]};return{load:function(e,c,t){"login"!=e&&"signwall"!=e||"forgotten_password"==c?o(e,c,t):n(e,c,t)}}}();
lv.profile.streets=function(){var e=!1,t=function(t,a,n){var l=0,i=null,o=[];$(t).focusout((function(t){e||(clearTimeout(l),l=setTimeout((function(){c()}),300))})),$(t).bind("forceFocusOut",(function(){c()})),$(t).keyup((function(t){if(!e&&i){var a=this.value;clearTimeout(l),a?l=setTimeout((function(){$.get(i.replace("{data}",a),(function(e){u(e)}))}),300):u([])}})),$(a).on("click","a[data-value]",(function(t){e||(clearTimeout(l),r({id:$(this).data("value"),label:$(this).text()}))}));var r=function(e){$(t).val(e.label),$(t).data("value",e.id),$(t).data("code",e.code),$(a).hide()},c=o[0]),r(e)},u=function(e){var t="";o=e,e&&e.length>0?$.each(e,(function(e,a){t+='<li class="autocomplete-content-item"><a data-value="'+(a.id?a.id:a.code)+'">'+a.label+"</a></li>"})):t='<li class="autocomplete-content-item"><a>Sin resultados</a></li>',$(a+" ul").html(t),$(a).show()},s=function(a){e||(i=a,a?($(t).attr("data-form-disabled",!1),$(t).prop("disabled",!1)):($(t).attr("data-form-disabled",!0),$(t).prop("disabled",!0)))};s(n);return{setQueryUrl:s,clear:function(){$(t).val(""),$(t).data("value",null)}}};return{init:function(a){e=null!=a&&!1===a;var n=t("[name=town], [name*=city]","#query-town-results"),l=t("[name*=streetName], [name*=street_name]","#query-streetName-results");lv.profile.utils.loadSelect("[name*=province]",ev.accounts.getScriptConfig().streets.provinces,(function(e){n.clear(),e?n.setQueryUrl(ev.accounts.getSeets.towns.replace("{town}",e)):n.s));var i=function(){l.clear();var e=$("[name=town], [name*=city]").data("value"),t=$("[name*=streetType], [name*=street_type]").val();e&&t?l.setQueryUrl(ev.accounts.getScriptConfig().streets.streets.replace("{town}",e).replace("{streetType}",t)):l.setQueryUrl(null)};$("[name=town], [name*=city]").change((function(e){i()})),lv.profile.utils.loadSelect("[name*=streetType], [name*=street_type]",ev.accounts.getScriptConfig().streets.streetTypes,(function(e){i()}))},disable:function(){e=!0},enable:function(){e=!1}}}();
lv.profile.subscriptions={init:fe]").clicdata("subscription-id"),$("#"+$(this).data("subscription-change")).find("[name='idSubscription']on-change")).show()}),$("[data-subscription-back]").click(function(i){$("#subscriptions").show(),$("#"+$(this).data("subscription-back")).hide()}),$("[data-accounts-subscription=unlink]").click(function(i){lv.profile.utils.cleanErrors($(this)),lv.profile.service.unlink().success(function(){window.location.reload()}).failure(function(i){lv.profile.utils.error(i.errorMessage)})}),lv.profile.utils.form("#linkSubscriptionFtion(i){i&&window.location.reload()}),lv.profile.utils.form("#vouchersForm",function(i){return lv.profile.service.requestEVouchers(i)},function(e,o){e&&i($("#vouchersForm"),o.ticketId)}),lv.profile.utils.form("#addressForm",function(i){return i.townCode=$("[name=town]").data("code"),i.streetCode=$("[name=streetName]").data("code"),lv.profile.service.changeDelivery(i)},function(e,o){e&&i($("#addressForm"),o.ticketId)}),lv.profile.utils.form("#editionForm",function(i){return lv.profile.service.changeEdition(i)},function(e,o){e&&i($("#editionForm"),o.ticketId)}),$("[data-popup]").click(function(i){$("#"+$(this).data("popup")).toggleClass("active")}),$("[name=country]").change(function(i){"AND"==this.value?(lv.profile.streets.disable(),$("[name=province]").prop("required",!1).prop("disabled",!0),$("[name=province]").val(""),$("[name=town]").prop("disabled",!1),$("[name=streetName]").prop("disabled",!1)):(lv.profile.streets.enable(),$("[name=province]").prop("reabled",!1))});var i=function(i,e){i.find("#ticketNumber").text(e),i.find("[data-subscription-success]").show(),i.find("[data-form-submit]").hide(),i.find(":input").prop("readonly",!0)}}};
lv.profile.utils=function(){var o=function(o){o||(o="La solicitud no se ha podido procesar, por favor intntalo ms tarde");var r=$('<p class="error">'+o+"</p>");$("[data-profile-alerts]").append(r),setTimeout(function(){r.remove()},5e3)},r=function(){var o=$("[data-profile-success]");o.show(),setTimeout(function(){o.hide()},5e3)},e=function(o){o.find("[data-form-submit]").prop("disabled",!0),o.find("[data-form-submit]").addClass("disabled"),document.body.style.cursor="wait"},i=function(o){o.find("[data-form-submit]").prop("disabled",!1),o.find("[data-form-submit]").removeClass("disabled"),document.ut").removeClass("form__input--error"),o.find("[data-error-for]").hide(),o.find("[data-error-for]").empty()};return{form:function(t,a,d){var f=$(t);f.submit(function(t){t.preventDefault(),e(f),n(f),a(gg.serialize.form(f[0]ssage),$.each(r.validatio.find("input[name='"+r.field+"']").addClass("form__input--error"),f.find("input[name='"+r.field+"']").on("click",function(){$(this).removeClass("form__input--error")}),f.find("[data-error-for='"+r.field+"']").show(),f.find("[data-error-for='"+r.field+"']").append("<p>"+r.message+"</p>")}),i(f),d&&d(!1,r)})})},error:o,cleanErrors:n,loadSelect:function(o,r,e){$.get(r,function(r){$.each(r,function(r,e){$(o).append('<option value="'+e.id+'">'+e.label+"</option>")})},"json"),e&&$(o).change(function(o){e(this.value)})}}}();
gg.comScore=function(){return{init:function(){window.didomiOnReady=window.didomiOnReady||[];var c=window._comscore=window._comscore||[],o=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js";window.didomiOnReady.push(function(n){c.push({c1:"2",c2:"6398301",cs_ucfr:!1===n.getUserConsentStatusForVendor("c:comscore-jUFc9icY")?"0":"1"}),gg.util.getScript(o,{async:!0})})},beacon:function(){self.COMSCORE&&COMSCORE.beacon({c1:"2",c2:"6398301"}),$.ajax({url:gg.config.baseUrl+"/comscore-pageview.html",async:!0})}}}();
})(window);